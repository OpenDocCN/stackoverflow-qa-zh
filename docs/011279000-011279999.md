# StackOverflow 问答 11279000-11279999

# javascript - JSON循环不起作用

> ID：11279005
> 
> 赞同：0
> 
> 时间：2012-07-01T01:45:10.807
> 
> 标签：javascript, json, loops, each

我试图循环一个 javascript 对象，但我无法让它运行。数据来自本地存储。

我的输出：

```
 {"widget": {"title": "blablabla", "color": "yellow"},"widget": {"title": "lorem ipsum", "color": "black"},......} 
```

// 我尝试过的（关键工作）

```
var list = JSON.parse(the localStoragekey);

for(var key in list){
if (list.hasOwnProperty(key)){  
       console.log(list[key])
    }
} 
```

我在网上（和 Stackoverflow）上看过，但我似乎找不到可行的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T01:46:36.727

您的对象中有重复的键。请改用数组。

```
var widgets = [
    {"title": "blablabla", "color": "yellow"},
    {"title": "lorem ipsum", "color": "black"}
] 
```

# c - 如何使用 getch() （来自 curses 库）？

> ID：11279012
> 
> 赞同：1
> 
> 时间：2012-07-01T01:46:31.160
> 
> 标签：c, ncurses

考虑这段代码：

```
if(initscr() == NULL) ERROR("Cannot start ncurses mode.\n");

    keypad(stdscr, TRUE);

    cbreak();

    int reply = getch(); 

    if(reply == 'y')
        printw("yes!\n");
    else if(reply == 'n')
        printw("no!\n");
    else
        printw("invalid answer!\n");

    refresh();

    endwin(); 
```

与我键入的键无关，程序关闭时不打印任何消息。

有人可以解释这个程序的行为吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T01:53:33.000

您调用`printw()`打印三个消息之一，然后`refresh()`显示消息。到现在为止还挺好。

然后您立即调用`endwin()`，这（取决于您的 termcap/terminfo 设置）可能会清除屏幕。

消息实际上是显示的；它只是没有在屏幕上停留足够长的时间让您阅读。

`getch()`尝试在通话后添加延迟或另一个`refresh()`通话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:57:08.820

如果你在你的 refresh() 和你的 endwin() 之间插入一个 sleep(5)，你应该会看到更好的结果。至少，我愿意。

# url - 为什么 id & sessionid 在 URL 中？

> ID：11279015
> 
> 赞同：1
> 
> 时间：2012-07-01T01:46:37.950
> 
> 标签：url, sessionid, userid

我看到一些这样的网址：

```
http://www.example.com/?view=profile&id=098&hash=589e8bed895198495d987d055699d2b9 
```

为什么有些网站会在 URL 中添加 ID 和散列密码？是会话ID吗？将这样的 URL 用于用户配置文件有什么好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T01:54:38.953

该意图可能会阻止您快速浏览具有可预测 URL 模式的页面。

如果他们的个人资料 URL 就像： [http ://www.siteadress.com/?view=profile&id=098](http://www.siteadress.com/?view=profile&id=098)

您可以访问[http://www.siteadress.com/?view=profile&id=099](http://www.siteadress.com/?view=profile&id=099)、[http://www.siteadress.com/?view=profile&id=100](http://www.siteadress.com/?view=profile&id=100)等，并期望在那里找到内容。如果配置文件包括电子邮件地址，那么对于垃圾邮件机器人来说，这将是一个很好的发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T01:54:05.240

这并没有错。数据必须以某种方式发送……站点程序员选择了这种特殊方法。

不漂亮……仅此而已。

您还应该注意，您可以通过这种方式设置 PHP 会话 ID，[具体取决于配置](http://php.net/manual/en/session.idpassing.php)。

# java - Android在某些情况下绘制一个小部件

> ID：11279017
> 
> 赞同：1
> 
> 时间：2012-07-01T01:48:14.327
> 
> 标签：java, android

`Activity`仅当`boolean`值等于 true时，Android 是否可以在其中绘制小部件？`Button`基本上，如果当前登录的用户不是管理员，我想隐藏 a ，但如果是，则显示。

这样的事情可能吗？我没有注意到可以提供我寻求的功能的小部件属性，但我希望我正在监督一些事情。一个不太理想的替代方案是创建一个完全独立的以管理员​​为中心的 Intent `Activity`，并加载管理员特定的 layout.xml，但这会立即创建大量重复代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T02:20:20.897

看看[这个问题](https://stackoverflow.com/questions/1851633/how-to-add-button-dynamically-in-android)，它向您展示了如何动态添加按钮。

您还可以查看[Fragments](http://developer.android.com/guide/components/fragments.html)。Fragment 提供了一组额外的 API 来通过组装 UI 和行为的 Fragment 来自定义 Activity。如果您决定向管理员添加大量功能，这可能是一个不错的选择。使用 Fragments，您的代码会更干净，将“管理”UI 组件与其他组件分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T03:52:13.273

我认为您正在寻找的是 android:visibility

您可以将值设置为可见（不言自明）、不可见（不可见但仍占用布局中的空间）或消失（根本不包含在布局中）。

相关链接： http: [//developer.android.com/reference/android/view/View.html#setVisibility](http://developer.android.com/reference/android/view/View.html#setVisibility(int) (int ) [http://developer.android.com/reference/android/view/View.html#attr_android:visibility](http://developer.android.com/reference/android/view/View.html#attr_android:visibility)

# tridion - 当仪表板按钮被禁用时，我们可以显示不同的工具提示吗？

> ID：11279018
> 
> 赞同：4
> 
> 时间：2012-07-01T01:48:31.470
> 
> 标签：tridion, tridion-2011

我正在专门使用 Tridion 2011 的 PowerTools 扩展，但这适用于仪表板中带有按钮的任何 Anguilla 扩展。

我们可以设置`<ext:title>`获得悬停工具提示。用户将鼠标悬停在 GUI 扩展按钮上以查看此文本。[请参阅配置](http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/Configuration/editor.config#440)中的“计数项目”扩展名的示例。

```
<ext:extension assignid="CountItems" name="Count Items" 
               pageid="Power Tools" groupid="Tools">
    <ext:command>PT_CountItems</ext:command>
    <ext:title>Count Items</ext:title>
    <ext:issmallbutton>false</ext:issmallbutton>
    <ext:dependencies>
        <cfg:dependency>PowerTools.Commands</cfg:dependency>
    </ext:dependencies>
    <ext:apply>
        <ext:view name="DashboardView" />
    </ext:apply>
</ext:extension> 
```

当未启用扩展程序时，我们要求[将此工具提示更改为一些有用的文本。](http://code.google.com/p/tridion-2011-power-tools/issues/detail?id=5)

我可以在 Chrome 控制台的按钮中看到“计数项目”文本。

```
<div id="CountItems" class="tridion button PT_CountItems ribbonitem disabled"
     title="Count Items" c:command="PT_CountItems" 
     c:controltype="Tridion.Controls.RibbonButton" 
     style="-webkit-user-select: none; ">
    <div class="image">&nbsp;</div>
    <div class="text">Count Items</div>
</div> 
```

同样在控制台中，我可以选择包含文本的 div：`$("div#CountItems > div.text")`。我不确定如何获取文本。

问题： **当 GUI 按钮处于非活动状态时，我应该/应该如何更改工具提示文本？**

我可能也需要澄清这些。

*   在 Anguilla（或 PowerTools）中，`$()`与`jQuery()`? 我试过`$("div#CountItems > div.text").text()`了 `Object #<HTMLDivElement> has no method 'text'`
*   当按钮被禁用时，是否有首选或可配置的方式来设置该工具提示？我确信我们可以在 DOM 中找到一个元素，但我可能遗漏了一些东西。

最后，

*   `{NameSpace}.Commands.{ExtensionName}.prototype.isValidSelection = function(selection) { }`通常是更改此工具提示的正确位置吗？
*   对于上下文菜单，我相信我们有 _isAvailable 代替。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T11:15:09.037

# $() 和 jQuery() 一样吗？

不，Tridion UI 包含 jQuery 库的一个子集：[sizzle CSS 选择器引擎](http://sizzlejs.com/)。

因此，所有用于选择一组元素的常用 jQuery 技巧都可以使用，但其他 jQuery 方法（AJAX 东西、事件处理程序、实用方法）将**不可**用。

请注意，如果您想在扩展中使用完整的 jQuery，可以通过将其包含在所谓的[`noConflict`mode](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)中来实现。

# 当按钮被禁用时，我可以设置工具提示吗？

据我所知，Tridion GUI 中的按钮只有一个工具提示，并且每个按钮状态都会显示该工具提示。当 GUI 即将显示工具提示时，也没有任何`ontooltip`事件可以挂钩来计算工具提示。

按钮确实有一个 public `setTooltip`，所以一旦你检测到某种情况，你就可以自己改变它。如果您搜索 Anguilla 源代码，`setTooltip`您会发现一些如何使用它的示例（在欢迎屏幕中，向页面添加组件演示文稿时以及在 BluePrint 查看器中）。

# isValidSelection 是更改此工具提示的正确位置吗？

不要问“我可以在显示工具提示时更改它吗？”，而是尝试将其改写为“哪个状态导致哪个工具提示？我可以检测到状态更改并在那个时候设置正确的工具提示吗？”。

如果您的工具/命令仅在选择某种类型的项目时启用，您应该检测该条件，然后在那时设置工具提示。然后，当 GUI 需要向您显示工具提示时，您无需执行任何操作。

当然，这只会将您的问题推到其他地方：如何检测这种或那种情况。但是您会发现为此类“应用程序状态更改”查找事件通常比为“ontooltip”查找事件更容易。

# python - Python：如何在未排序的列表中找到大于某个数字的所有项目（大数据集）

> ID：11279019
> 
> 赞同：4
> 
> 时间：2012-07-01T01:48:33.043
> 
> 标签：python, search, sorting, zodb

虽然，其他人也问过类似的问题，例如。[在这里](https://stackoverflow.com/questions/7281760/in-python-how-do-you-find-the-index-of-the-first-value-greater-than-a-threshold "这里")，但它们略有不同，并没有真正解决我的问题，所以我又来了。

我有 N 个列表（N>20,000），每个列表包含 M 个列表（M >20,000），方式如下（数据是虚拟的）：

```
Key1: [ [4,3,1], [5,1,0] ...... [43,21,0 ] ]   # List 1 with collection of M smaller lists
:
:
KeyN: [ [5,4,1], [55,1,1] ...... [ 221, 0, 0] ] # Nth list 
```

数据**未排序**。逐个迭代阈值列表，例如`Threshold =[2, 3, 5, 7, 8]`，在中间元素上应用阈值时，我想为所有键提取大于阈值的所有元素。例如。根据我上面写的数据，`Threshold = 2`会产生

```
 For Key1: [ [4,3,1], [43,21,0]]
 :
 : 
 For KeyN: [[5,4,1]] 
```

对于其他阈值也是如此。由于列表太多，我的观察是排序会导致大量开销，因此我想避免它。**在python**中执行此操作的最佳方法是什么？另一个重要的一点是，我自己构建数据，所以可能有更好的数据结构来存储数据。我目前将数据以容器的形式存储在`PersistentList`中`Btree`，`ZODB`这是[在此处](https://stackoverflow.com/questions/11254384/when-to-commit-data-in-zodb "这里")建议的。以下是用于它的代码片段：

```
for Gnodes in G.nodes():      # Gnodes iterates over N values 
    Gvalue = someoperation(Gnodes)
    for Hnodes in H.nodes():  # Hnodes iterates over N values 
        Hvalue =someoperation(Hnodes,Gnodes)
        score = SomeOperation on (Gvalue,Hvalue)
        btree_container.setdefault(Gnodes, PersistentList()).append([Hnodes, score, -1 ])
    transaction.savepoint(True)  
transaction.commit() 
```

关于什么应该是最有效的方法的任何建议？首先排序确实是最佳方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T01:58:19.920

使用生成器理解：

```
(sublist for sublist in Key1 if sublist[1] > Threshold) 
```

生成器仅按需计算元素，并且由于它按顺序遍历列表中的元素，因此无需排序。（也就是说，它在每个 的长度上以线性时间运行，而不是 M*log(M) 进行排序。）`Key*n*`

等效地，在函数样式中（仅在 Python 3 中等效；对于 Python 2，使用`itertools.ifilter`）：

```
filter(lambda sublist: sublist[1] > Threshold, Key1) 
```

如果您的列表存储在列表（或其他可下标对象）中，您可以一次处理它们（显示了一些替代样式）：`Key*n*`

```
filtered_Keys = [(sublist for sublist in Key if sublist[1] > Threshold)
    for Key in Keys
] 
```

或者

```
filtered_Keys = list(map(
    lambda Key: filter(lambda sublist: sublist[1] > Threshold, Key1),
    Keys
)) 
```

## 此方法相对于排序的性能

这种方法是否比排序更快取决于*M*和您拥有的阈值*T的数量。*运行时间（每个`Key`列表）为 O(M * T)。如果您对列表进行排序 (O(M * log(M)))，那么您可以对每个阈值使用二进制搜索，给出的总体运行时间为 O(M * log(M) + T * log(M)) = O（最大（M，T）* log（M））。*当T*相对于*M*足够大时，排序会更快。我们无法先验地知道常数，因此请测试两种方法，看看根据您的数据是否更快。

如果两者都不够快，请考虑编写自己的线性时间排序。例如，[基数排序可以推广到（非负）浮点数上](http://phimuemue.com/blog.php?article=158)。如果您真的关心这里的性能，您可能必须将其编写为 C 或 Cython 扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T02:30:15.670

在 numpy 中，您可以使用 NxMx3 数组轻松完成此操作：

```
data = array([
    [ [4,3,1], [5,1,0],  [43,21,0]    ],
    [ [5,4,1], [55,1,1], [ 221, 0, 0] ]
    ])
data[ data[:,:,1]>2 ] 
```

这将返回：

```
array([[ 4,  3,  1],
   [43, 21,  0],
   [ 5,  4,  1]]) 
```

如果您需要超过阈值的元素的位置，请使用 argwhere()。

**编辑**：

也可以同时进行多个阈值比较：

```
>>> mask = data[:,:,1,np.newaxis] > array([[[2, 3, 4]]])
>>> data[mask[...,0]]
array([[ 4,  3,  1],
   [43, 21,  0],
   [ 5,  4,  1]])

>>> data[mask[...,1]]
array([[43, 21,  0],
   [ 5,  4,  1]])

>>> data[mask[...,2]]
array([[43, 21,  0]]) 
```

# css - 以移动设备运行时如何修复错误css宽度x高度

> ID：11279022
> 
> 赞同：0
> 
> 时间：2012-07-01T01:48:50.350
> 
> 标签：css

我有一张图片：

```
<img class="" width="78px" height="78px" border="0" alt="" src="test.png" smartload="7" style="opacity: 1;"> 
```

和CSS：

```
img {
    border: 0;
    max-width: 100%;
} 
```

当作为 PC (firefox) 运行时

![个人电脑](../Images/899ff960fdf4dbd173f7aab27986cdf7.png)

以移动设备运行时出现高度错误：

![移动的](../Images/692d601077ebd83e9fe7adbfa8acae2d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T01:50:59.470

如果您希望按比例缩放，请不要设置宽度和高度......只设置其中一个。浏览器将根据高度/宽度比自动为您缩放其他尺寸。

我会在标签中删除你的宽度/高度，并在你的 CSS 中设置宽度。

```
width: 78px;
max-width: 100%; 
```

你一般不需要`max-width: 100%`.

# mysql - Mysql 查询过滤器

> ID：11279024
> 
> 赞同：0
> 
> 时间：2012-07-01T01:50:17.503
> 
> 标签：mysql, sql

所以我试图从我的 sql 数据库中获取数据，并按与我可能想要制作的某些报告生成相关的某些变量对其进行排序。

```
<?
$sql = 'SELECT DISTINCT jsfdName.baseData AS Name, jsfdAddr.baseData as Address, jsfdZip.baseData AS Zip, jsfdCity.baseData AS City, jsfdState.baseData AS State,jsfdPhone.baseData AS Phone, jsfdPerson.baseData AS Person, jsfdContacted.baseData AS Contacted
FROM jos_sobipro_field_data AS jsfdName
JOIN jos_sobipro_field_data AS jsfdAddr USING(sid)
JOIN jos_sobipro_field_data AS jsfdZip USING(sid)
JOIN jos_sobipro_field_data AS jsfdCity USING(sid)
JOIN jos_sobipro_field_data AS jsfdState USING(sid)
JOIN jos_sobipro_field_data AS jsfdPhone USING(sid)
JOIN jos_sobipro_field_data AS jsfdPerson USING(sid)
JOIN jos_sobipro_field_data AS jsfdContacted USING(sid)
WHERE jsfdName.fid = 36 AND jsfdAddr.fid = 37 AND jsfdZip.fid=38 AND jsfdCity.fid = 39 AND jsfdState.fid = 41 AND jsfdPhone.fid = 46 AND jsfdPerson.fid = 62 AND jsfdContacted.fid = 61 AND sid > 905';
$rs_result = mysql_query($sql) or die (mysql_error());
$ttl=mysql_num_rows($rs_result);
?>

<center><H2><?=$sitename;?></h2>
<h3>Business Information</h3></center>
<center>Total Entries in Report:&nbsp;<?=$ttl;?></center>
<table border="1" ALIGN = CENTER>
<tr><th>Name</th><th>Address</th><th>Zip</th><th>City</th><th>State</th><th>Phone</th><th>Sales Person</th><th>Contact Method</th></tr>
<?
while ($row = mysql_fetch_assoc($rs_result)) {
?>
  <tr>
  <td><? echo $row[Name]; ?></td>
  <td><? echo $row[Address]; ?></td>
  <td><? echo $row[Zip]; ?></td>
  <td><? echo $row[City]; ?></td>
  <td><? echo $row[State]; ?></td>
  <td><? echo $row[Phone]; ?></td>
  <td><? echo $row[Person]; ?></td>
  <td><? echo $row[Contacted]; ?></td>
  </tr>
<? }; ?></table> 
```

所以我只想显示名字是 Justin、Jeremy 等的销售人员。所以我想我必须在 where 子句中添加另一个条件，比如 AND Person = "Justin"..... 但是那是行不通的。有任何想法吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T01:53:54.850

在 jsfdPhone.fid = 46 之后你有“AND AND”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T02:04:17.500

我在 WHERE 子句的末尾添加了另一个 AND。它不能在结束之前，否则它会影响表格并给我错误。所以现在 where 子句看起来像这样......

```
WHERE jsfdName.fid = 36 AND jsfdAddr.fid = 37 AND jsfdZip.fid=38 AND jsfdCity.fid = 39 AND jsfdState.fid = 41 AND jsfdPhone.fid = 46 AND jsfdPerson.fid = 62 AND jsfdContacted.fid = 61 AND sid > 905 AND jsfdPerson.baseData = "Justin"'; 
```

再次感谢各位

# java - 读取文件并保存为双数组，然后将其写入新文件

> ID：11279025
> 
> 赞同：2
> 
> 时间：2012-07-01T01:50:55.573
> 
> 标签：java, arrays

我正在做这个作业，我应该将一个`.txt`充满整数的文件读入一个`double`数组，然后将这个双精度数组写入另一个`.txt`文件。

起初我认为一切正常，因为我能够读取文件并将其显示为图像，然后将其保存为s`.txt`文件。`double`但是，当我尝试在另一节课中使用相同的类文件时（在我创建的框架中显示它），我一直得到`0.0`输出`.txt`文件的值。下面是我的读写类的代码：

```
import java.io.*;
import java.util.*;
import java.awt.*;
import java.awt.event.*;

public class IO {
  FileDialog fd;
  public double[][] readData() {
    fd = new FileDialog(new Frame(), "Open Files", FileDialog.LOAD);
    fd.setVisible(true);
    File f = null;
    if ((fd.getDirectory() != null)||( fd.getFile() != null)) {
      f = new File(fd.getDirectory() + fd.getFile());
    }
    FileReader fr = null;
    try {
      fr = new FileReader (f);
    } catch (FileNotFoundException fnfe) {
      fnfe.printStackTrace();
    }
    BufferedReader br = new BufferedReader(fr);
    int lines = -1;
    String textIn = " ";
    String[] file = null;
    try {
      while (textIn != null) {
        textIn = br.readLine();
        lines++;
      }
      file = new String[lines];
      fr = new FileReader (f);
      br = new BufferedReader(fr);
      for (int i = 0; i < lines; i++) {
        file[i] = br.readLine();
      }
      br.close();
    } catch (IOException ioe) {
      ioe.printStackTrace();
    }
    double[][] data = new double [lines][];
    for (int i = 0; i < lines; i++) {
      StringTokenizer st = new StringTokenizer(file[i],",");
      data[i] = new double[st.countTokens()];
      int j = 0;
      while (st.hasMoreTokens()) {
        data[i][j] = Double.parseDouble(st.nextToken());
        j++;
      }
    }
    return data;
  }

  public void writeData(double[][] dataIn) {
    fd = new FileDialog(new Frame(), "Save Files", FileDialog.SAVE);
    fd.setVisible(true);
    File f = null;
    if ((fd.getDirectory() != null)||( fd.getFile() != null)) {
      f = new File(fd.getDirectory() + fd.getFile());
    }
    FileWriter fw = null;
    try {
      fw = new FileWriter (f, true);
    } catch (IOException ioe) {
      ioe.printStackTrace();
    }
    BufferedWriter bw = new BufferedWriter (fw);
    String tempStr = "";
    try {
      for (int i = 0; i < dataIn.length; i++) {
        for (int j = 0; j < dataIn[i].length; j++) {
          tempStr = String.valueOf(dataIn[i][j]);
          bw.write(tempStr);
        }
        bw.newLine();
      }
      bw.close();
    } catch (IOException ioe) {
      ioe.printStackTrace();
    }
  }
} 
```

我试图读取的 txt 文件有 300 行和列，其中并非所有列都用 int 数填充。我可以将输入 txt 设置为 Display，但无法将其保存为具有相同值但使用 double 而不是 int 的 txt 文件。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T02:10:46.190

我不确定我是否理解您的完整问题，但您至少有一个问题，即您在写入文件时忘记在每个数字后添加逗号。由于`readData`使用逗号分隔数字，程序生成的文件无法被它读取。简单地改变

```
for (int j = 0; j < dataIn[i].length; j++) {
          tempStr = String.valueOf(dataIn[i][j]);
          bw.write(tempStr); 
```

至

```
for (int j = 0; j < dataIn[i].length; j++) {
          bw.write(String.valueOf(dataIn[i][j]) + ","); 
```

（删除了中间`tempStr`因为它是不必要的，因为你的代码现在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T09:51:36.370

我想我已经设法解决了这个问题，不确定这是否是正确的方法。下面是我在 try catch 循环写入数据之前添加的内容：

```
BufferedWriter bw = new BufferedWriter (fw);
dataIn = getData(dataIn);
try { 
```

我在 Class 中创建了一个 getData(double[][] data) 方法，因此我现在可以读取数据。

# java - Java REST 服务二进制文件下载

> ID：11279027
> 
> 赞同：3
> 
> 时间：2012-07-01T01:51:15.040
> 
> 标签：java, objective-c, web-services, tomcat, download

我有一个 Java REST Web 服务，它当前正在将文本文件下载到 iPad 应用程序。我们希望将服务扩展到现在从多个请求中一次下载 10 - 20 Mb 的二进制数据。这些请求的范围从几 kb 到几 Mb。我们现在如何设置它，下载效率不是很高，而且大多数时候下载没有完成。有人对资源或行动计划有任何建议吗？

谢谢

编辑以提供更多信息。当前设置是没有额外框架的 tomcat web 服务器。我传入一个 URL 以获得一堆插入语句和大约 40 个链接来下载 blob 数据。然后我一次发出 2 个这 40 个请求，直到该过程完成。我已经尝试了 2 个以上的请求，但它通常会很快失败，因为客户端确实关闭了连接错误。存储二进制数据的数据库是 SQLite。

是否需要任何其他信息来提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:48:07.263

这应该很容易与 Apache Tomcat 一起使用。我在 iOS 上开发了几个应用程序，它们通过多个请求（图像、JSON 和 XML）从服务器下载数据。我认为问题可能出在iOS App中。您是否在单独的线程中从您的应用程序发出多个请求？iOS 不喜欢 UI 线程被网络操作阻塞。

# c++ - 可以使用带有错误代码 ERROR_ACCESS_DENIED 的 OpenProcess 来了解进程是否存在吗？

> ID：11279035
> 
> 赞同：0
> 
> 时间：2012-07-01T01:52:25.260
> 
> 标签：c++, winapi, access-denied, pid

我在 Windows 平台上运行以下代码。目的是了解特定进程 ID 是否引用现有进程。

```
BOOL bProcessExists = FALSE;
HANDLE hProcHandle = ::OpenProcess(PROCESS_QUERY_INFORMATION, FALSE, dwProcID);
if(hProcHandle)
{
    bProcessExists = TRUE;
    ::CloseHandle(hProcHandle);
}
else
{
    if(::GetLastError() == ERROR_ACCESS_DENIED)
    {
        bProcessExists = TRUE;
    }
} 
```

运行上述代码的进程没有运行提升，我发现 OpenProcess 可以返回拒绝访问某些进程 ID。

上面的代码有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T06:44:12.800

我会更担心您的假设，即能够打开流程意味着流程存在（“存在”的极其松散的定义除外）。

只要至少有一个打开该进程的句柄，就会保留该进程的*条目。*如果（例如）父进程生成一个进程，然后保留子进程的句柄，那么即使在该进程退出后，子进程仍然会有一个条目。在这种情况下，假设您拥有适当的权限，您将能够打开该进程的句柄，即使该进程已经退出。

为了正确处理这种情况，您可能想要调用，并且仅在返回为进程状态`GetExitCodeProcess`时才说进程存在。`STILL_ALIVE`

至于另一部分，我不能肯定地说它会起作用，但我会说这是一个很好的机会。我使用了类似的技术来验证用户的密码——让他们输入建议的用户名和密码。然后使用`NetUserChangePassword`（无权更改密码）*。*然后你看看你得到的错误——`ERROR_ACCESS_DENIED`意味着他们输入的用户名/密码组合是有效的，`ERROR_INVALID_PASSWORD`意味着它是无效的。

# django - 处理 Django 表单给出 x（多对多）字段是无效的关键字参数

> ID：11279037
> 
> 赞同：0
> 
> 时间：2012-07-01T01:53:07.910
> 
> 标签：django, django-forms

我正在构建一个包含用户配置文件、联系人和事件的站点。我创建了一个表单来添加链接到 UserProfile 的新事件，其中的成员是从 UserProf 的联系人列表中选择的。起初，Event 有一个联系人的 ForeignKey，EventForm 是 ModelChoice，一切正常。我可以处理表单并将联系人添加到事件中，并将事件添加到登录的用户配置文件中。

然后，当我尝试使用 ManyToManyField 和 EventForm ModelMultipleChoice 创建事件时，我得到“成员”是此函数的无效关键字参数错误。完全想不通这个。非常感谢您的帮助:)

意见：

```
def add_events(request):
        user = request.user
        contacts_list = user.get_profile().contacts.all().order_by('first_name')
        if user.is_authenticated():
            if request.method == 'POST':
                form = EventForm(request.POST)
                if form.is_valid():
                    na = form.cleaned_data['name']
                    da = form.cleaned_data['date']
                    de = form.cleaned_data['description']
                    me = form.cleaned_data['members']
                    event = Event.objects.create(user=user.get_profile(), name=na, date=da, description=de, members=me)
                    return HttpResponseRedirect('/events')
                else:
                    form.fields['members'].queryset = user.get_profile().contacts.all().order_by('first_name')
            else:
                form = EventForm()
                form.fields['members'].queryset = user.get_profile().contacts.all().order_by('first_name')
            return render_to_response('add_events.html', {'user': user, 'form': form, 'usp': user.get_profile(), 'contacts_list': contacts_list}, context_instance=RequestContext(request)) 
```

楷模：

```
class EventForm(forms.Form):
    name = forms.CharField(max_length=100, required=True)
    date = forms.DateField()
    description = forms.CharField(max_length=200)
    members = forms.ModelMultipleChoiceField(queryset=Profile.objects.all(), widget=forms.CheckboxSelectMultiple)

class Event(models.Model):
    user = models.ForeignKey(UserProfile, related_name='event')
    members = models.ManyToManyField(Profile)

    name = models.CharField(max_length=100)
    description = models.CharField(max_length=200)
    date = models.CharField(max_length=20) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T05:05:20.973

该行可能会引发错误

```
event = Event.objects.create(user=user.get_profile(), name=na, date=da, description=de, members=me) 
```

的`__init__()` ，`Model`这里的`Event`，只接受对普通字段和属性的分配，因为`kwargs`不接受 M2M 字段，因此出现错误。

将代码更改为以下可以解决问题，请查看[文档](https://docs.djangoproject.com/en/1.4/topics/db/examples/many_to_many/)以了解 M2M 的分配。

```
event = Event.objects.create(user=user.get_profile(), name=na, date=da, description=de)
event.members = form.cleaned_data['members'] 
```

# php - 防止复制/复制 PHP/SQL 数据库

> ID：11279041
> 
> 赞同：0
> 
> 时间：2012-07-01T01:53:33.357
> 
> 标签：php, javascript, sql, jquery

我正在创建一个商店库存管理 PHP/SQL 数据库，它将在商店的本地服务器上使用。现在我遇到了一个问题。如何防止有人未经许可将数据库从我的客户端 PC 复制到另一台 PC？我们如何开发一个只有开发人员才能安装的数据库？一些建议可能是：

*   使用机器代码等，例如数据库只能在一台 PC 上运行，但仍有一些人可能会更改控制器代码并在未经开发人员许可的情况下非法复制它。
*   其他建议可能是使用登录系统，但客户端仍然可以将副本提供给其他人并共享登录信息。

所以我的问题是：有没有防止非法复制php/Sql数据库的好方法？

换句话说：有没有办法让数据库只在客户端 PC/PC 上工作，这样如果有人将它复制到其他 PC 上，它就不会工作？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T06:33:27.047

无法安装特定于机器的数据库。你能做的最好的就是将它存储在一个加密的文件系统上，采取安全预防措施，例如对服务器进行基于强密钥的身份验证访问，关闭不使用的端口，确保软件是最新的，加密所有客户端和服务器之间的通信等，并在物理上保护机器。（这就是为什么，例如，谷歌的数据中心的访问控制如此严格，设施的安全性很高，而且作为一般规则，他们甚至不公布其数据中心的位置。）

真的，当你想到它时，这是一件*好事*。毕竟，如果服务器崩溃了怎么办？您*真的*希望绝对没有办法将数据恢复到另一台服务器吗？

安全性很重要，但它可以做的只有这么多。在某些时候，您将不得不基于实际考虑做出妥协。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:24:10.593

我非常欣赏这些答案，但因为我在目前的答案中没有得到一个非常合适的解决方案。经过一些研究并查看答案后，我找到了一种方法。我们可以创建一个数据库，该数据库依赖于客户端 PC 中的一些加密隐藏文件或机器代码或密钥等。我们必须开发一个脚本来在安装数据库时应用这些安全措施（隐藏文件或机器代码或密钥）。如果没有正确执行安全措施（隐藏文件或机器代码或密钥），数据库将无法工作。开发人员应随身携带安装脚本，并在将数据库安装到客户端 PC 时使用它。没有该脚本将无法安装数据库，因此未经开发人员许可，任何人都无法安装/复制数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T02:09:09.500

对此的“最佳”解决方案是

1.  使用未在任何地方键入的密钥（您的密码）加密您 PC 上的所有内容
2.  锁定你的电脑，这样别人就不能复制它。

如果有人掌握了数据，即使是加密的，如果他们愿意，他们也会解密。所以阻止他们访问它是你最好的防御。

您也可以加密数据库中的数据 - 但密钥将保存在某处。如果他们可以访问您的 PC，他们就可以访问解密密钥。其他“编程”防御（例如检查计算机硬件/注册表项等）也可以循环编程。

因此，这又回到了加密您的 PC 上，因为希望加密密钥没有被写下来，并且被锁定，这样一开始就有人无法获取数据。

# javascript - Javascript 无法在 IE 上运行

> ID：11279042
> 
> 赞同：0
> 
> 时间：2012-07-01T01:53:37.433
> 
> 标签：javascript, jquery, internet-explorer

我有以下代码，当将鼠标悬停在元素上时，将显示一个 div，并在鼠标移出时隐藏。这在除 IE 之外的所有浏览器上都可以正常工作，这是我的代码；

```
// JavaScript Document

var baseopacity=0
function showtext(thetext){
    if (!document.getElementById)
    return
    textcontainerobj=document.getElementById("tabledescription")
    browserdetect=textcontainerobj.filters? "ie" : typeof textcontainerobj.style.MozOpacity=="string"? "mozilla" : ""
    instantset(baseopacity)
    document.getElementById("tabledescription").innerHTML=thetext
    highlighting=setInterval("gradualfade(textcontainerobj)",50)
}

function hidetext(){
    cleartimer()
    instantset(baseopacity)
}

function instantset(degree){
    if (browserdetect=="mozilla")
        textcontainerobj.style.MozOpacity=degree/100
    else if (browserdetect=="ie")
        textcontainerobj.filters.alpha.opacity=degree
    else if (document.getElementById && baseopacity==0)
        document.getElementById("tabledescription").innerHTML=""
}
function cleartimer(){
    if (window.highlighting) clearInterval(highlighting)
}
function gradualfade(cur2){
    if (browserdetect=="mozilla" && cur2.style.MozOpacity<1)
        cur2.style.MozOpacity=Math.min(parseFloat(cur2.style.MozOpacity)+0.2, 0.99)
    else if (browserdetect=="ie" && cur2.filters.alpha.opacity<100)
        cur2.filters.alpha.opacity+=20
    else if (window.highlighting)
        clearInterval(highlighting)
}
//<![CDATA[ 
$(window).load(function(){
    $(".tiptext").mouseover(function() {
        $(this).children(".description").show();
    }).mouseout(function() {
        $(this).children(".description").hide();
    });
});//]]> 
```

这是其中一个元素的 HTML（每个元素都是一张图片）；

```
<div id="one">
<div class="tiptext"><a href="http://mathremake.site40.net/"><img src="../images/web/1.png" height="180" width="300"/></a>
<div class="description"><font face="Arial, Helvetica, sans-serif"><u>Ascension Math Page</u></font><font size="2" face="Arial, Helvetica, sans-serif"><br>Ascension Collegiate's Mathematics department web page.</br></font></div>
</div>
</div> 
```

以及相同元素的 CSS；

```
#one {
    top: 200px;
    position: absolute;
    width: 300px;
    position: absolute;
    left: 50%; 
    margin-left: -500px;
    } 
```

感谢所有帮助，谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T01:57:46.920

IE有问题`$(window).load()`，你可以试试这个：

```
$(window).bind('load', function(){
     ...
}); 
```

或者：

```
$(document).ready(function() {
   $(".tiptext").hover(function() {
      $(this).find(".description").show();
   }, function() {
      $(this).find(".description").hide();
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T02:08:50.533

您可以尝试准备好文档，也可以使用[.hover()](http://api.jquery.com/hover/)函数，这可以使事情变得更容易。另外，我建议`display:none`向您的班级添加一个 CSS 属性`.description`或创建一个新`.hide`班级并添加它。

Javascript

```
 $(function(){
     $(".tiptext").hover(function() {
         $(".description").show();
     },function() {
         $(".description").hide();
     });
  });​ 
```

CSS：

```
 .description{
     display:none;
  } 
```

[解决方案](http://jsfiddle.net/xxCPG/10/)

# c++ - 如何使用 std::tuple 中的值作为函数参数？

> ID：11279044
> 
> 赞同：3
> 
> 时间：2012-07-01T01:54:01.880
> 
> 标签：c++, c++11, variadic-templates, template-meta-programming

```
#include <tuple>

class Foo {
public:
    Foo(int i, double d, const char* str) { }
};

template<class T, class... CtorArgTypes>
class ObjectMaker {
public:
    ObjectMaker(CtorArgTypes... ctorArgs) : m_ctorArgs(ctorArgs...)
    {
    }
    Foo* create()
    {
        //What do I do here?
    }
private:
    std::tuple<CtorArgTypes...> m_ctorArgs;
};

int main(int, char**)
{
    ObjectMaker<Foo, int, double, const char*> fooMaker(42, 5.3, "Hello");
    Foo* myFoo = fooMaker.create();     //this should do new Foo(42, 5.3, "Hello");
} 
```

基本上，我希望类`ObjectMaker`保存将传递给构造函数的参数`Foo`并在调用时使用它们`ObjectMaker::create()`。我想不通的是如何从`tuple`的构造函数中获取值`Foo`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:24:46.590

[无耻地应用“解包”元组中](https://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer)列出的代码和概念来调用由@Xeo 链接的匹配函数指针。据我了解，基本思想是在您的元组中创建一系列索引并将它们解压缩到对 std::get 的调用中。下面的代码适用于 g++ 4.5.2，我通常使用 msvc10，所以还没有这种乐趣 - 很酷的东西！

```
#include <tuple>
#include <iostream>

class Foo {
public:
    Foo(int i, double d, const char* str) 
    {
        std::cout << "Foo constructor: i=" << i << " d=" << d << "str=" << str << std::endl;
    }
};

template<int ...>
struct seq { };

template<int N, int ...S>
struct gens : gens<N-1, N-1, S...> { };

template<int ...S>
struct gens<0, S...> {
  typedef seq<S...> type;
};

template<class T, class... CtorArgTypes>
class ObjectMaker {
public:
    ObjectMaker(CtorArgTypes... ctorArgs) : m_ctorArgs(ctorArgs...)
    {
    }

    Foo* create()
    {
        return create_T( typename gens<sizeof ...(CtorArgTypes)>::type() );
    }

private:
    template< int ...S >
    T* create_T( seq<S...>)
    {
        return new T(std::get<S>(m_ctorArgs) ...);
    }

    std::tuple<CtorArgTypes...> m_ctorArgs;
};

int main(int, char**)
{
    ObjectMaker<Foo, int, double, const char*> fooMaker(42, 5.3, "Hello");
    Foo* myFoo = fooMaker.create();     //this should do new Foo(42, 5.3, "Hello");
} 
```

# c# - sharpNLP 作为 .nbin 文件扩展名

> ID：11279054
> 
> 赞同：11
> 
> 时间：2012-07-01T01:56:35.710
> 
> 标签：c#, nlp

我已经从这个站点[http://sharpnlp.codeplex.com/](http://sharpnlp.codeplex.com/) 下载了 SharpNLP，但它下载了 .nbin 文件，我不知道如何处理。任何帮助pleeeeeeeease？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-18T18:47:22.650

我也是和你一样的用户。但经过一番努力，我找到了几种使用 Nbin 文件的方法。如前所述，Nbin 文件是经过训练的模型。**我们可以使用BinaryGisModelWriter**创建 Nbin 文件。但是，就像我一样，我相信您也对创建自己的模型不感兴趣，而是在您的项目中有效地使用 nbin 文件。

为此，您需要两个 dll。

> SharpEntropy.dll OpenNLP.dll

除此之外，为了快速入门，您可以[从 Code Project for SharpNLP 下载示例项目](http://www.codeproject.com/Articles/12109/Statistical-parsing-of-English-sentences)

最好下载[.NET 2.0 版本的示例](http://www.codeproject.com/KB/recipes/englishparsing/englishparsing_net2_0_src.zip)

在其中，您将有一个名为 OpenNLP 的项目。将该项目添加到您希望使用 NLP 或 nbin 文件的任何项目中，并将解决方案中的引用添加到“OpenNLP”项目。

现在从您的主要解决方案中，您可以初始化不同的工具，例如，我将向您展示句子检测器、标记器和 PosTagger 的初始化

```
 private string mModelPath = @"C:\Users\ATS\Documents\Visual Studio 2012\Projects\Google_page_speed_json\Google_page_speed_json\bin\Release\";
 private OpenNLP.Tools.SentenceDetect.MaximumEntropySentenceDetector mSentenceDetector;
 private OpenNLP.Tools.Tokenize.EnglishMaximumEntropyTokenizer mTokenizer;
 private OpenNLP.Tools.PosTagger.EnglishMaximumEntropyPosTagger mPosTagger; 
```

**mModelPath**是保存您希望使用的 nbin 文件路径的变量。

现在我将向您展示如何使用上述定义的类的构造函数来使用 nbin 文件。

对于句子检测器

```
private string[] SplitSentences(string paragraph)
    {
        if (mSentenceDetector == null)
        {
            mSentenceDetector = new OpenNLP.Tools.SentenceDetect.EnglishMaximumEntropySentenceDetector(mModelPath + "EnglishSD.nbin");
        }

        return mSentenceDetector.SentenceDetect(paragraph);
    } 
```

对于分词器

```
private string[] TokenizeSentence(string sentence)
    {
        if (mTokenizer == null)
        {
            mTokenizer = new OpenNLP.Tools.Tokenize.EnglishMaximumEntropyTokenizer(mModelPath + "EnglishTok.nbin");
        }

        return mTokenizer.Tokenize(sentence);
    } 
```

而对于 POSTagger

```
private string[] PosTagTokens(string[] tokens)
    {
        if (mPosTagger == null)
        {
            mPosTagger = new OpenNLP.Tools.PosTagger.EnglishMaximumEntropyPosTagger(mModelPath + "EnglishPOS.nbin", mModelPath + @"\Parser\tagdict");
        }

        return mPosTagger.Tag(tokens);
    } 
```

你可以看到我分别使用了**EnglishSD.nbin、EnglishTok.nbin 和 EnglishPOS.nbin**来进行**句子检测、标记化和词性标注**。nbin 文件只是可以使用 SharpNLP 或 OpenNLP 通常使用的预训练模型。

您可以从官方 OpenNLP 工具模型或从用于 SharpNLP 的 Nbin 文件的 Codeplex 存储库中找到最新的训练模型集

使用上述方法和 Nbin 文件的示例 POS 标注器将如下所示，

```
public void POSTagger_Method(string sent)
    {
        File.WriteAllText("POSTagged.txt", sent+"\n\n");
        string[] split_sentences = SplitSentences(sent);
        foreach (string sentence in split_sentences)
        {
            File.AppendAllText("POSTagged.txt", sentence+"\n");
            string[] tokens = TokenizeSentence(sentence);
            string[] tags = PosTagTokens(tokens);

            for (int currentTag = 0; currentTag < tags.Length; currentTag++)
            {
                File.AppendAllText("POSTagged.txt", tokens[currentTag] + " - " + tags[currentTag]+"\n");
            }
            File.AppendAllText("POSTagged.txt", "\n\n");
        }
    } 
```

您可以使用可用的 Nbin 文件为分块、解析等编写类似的方法，或者您可以训练自己的一种。

虽然我没有自己训练过模型，但从格式整齐的训练文本文件中训练模型的语法是

```
System.IO.StreamReader trainingStreamReader = new System.IO.StreamReader(trainingDataFile);
SharpEntropy.ITrainingEventReader eventReader = new SharpEntropy.BasicEventReader(new SharpEntropy.PlainTextByLineDataReader(trainingStreamReader));
SharpEntropy.GisTrainer trainer = new SharpEntropy.GisTrainer();
trainer.TrainModel(eventReader);
mModel = new SharpEntropy.GisModel(trainer); 
```

我相信这篇文章将帮助您开始使用 SharpNLP。请随时讨论您面临的任何问题。我很乐意回复。

# c++ - 为什么要数组 永远比向量慢 ?

> ID：11279055
> 
> 赞同：17
> 
> 时间：2012-07-01T01:56:56.820
> 
> 标签：c++, optimization, stl, c++11

今天我决定对`std::vector`和`std::array`. 一般来说，我发现了我的预期：**在每个短数组集合上执行任务比在集合等效向量上执行任务要快得多。**

但是，我发现**了一些意想不到`std::vector`的事情：使用来存储数组集合*比*使用`std::array`**. 以防它是堆栈上大量数据的某些工件的结果，我还尝试将其分配为堆上的数组和堆上的 C 样式数组（但结果仍然类似于堆栈上的数组和数组向量）。

**知道为什么`std::vector`会超越（编译器有更多*的*`std::array`编译时信息）吗？**

`gcc-4.7 -std=c++11 -O3`我使用(`gcc-4.6 -std=c++0x -O3`也应该导致这个难题)编译。运行时间是使用`bash`-native`time`命令（用户时间）计算的。

**代码：**

```
#include <array>
#include <vector>
#include <iostream>
#include <assert.h>
#include <algorithm>

template <typename VEC>
double fast_sq_dist(const VEC & lhs, const VEC & rhs) {
  assert(lhs.size() == rhs.size());
  double result = 0.0;
  for (int k=0; k<lhs.size(); ++k) {
    double tmp = lhs[k] - rhs[k];
    result += tmp * tmp;
  }
  return result;
}

int main() {
  const std::size_t K = 20000;
  const std::size_t N = 4;

  // declare the data structure for the collection
  // (uncomment exactly one of these to time it)

  // array of arrays
  // runtime: 1.32s
  std::array<std::array<double, N>, K > mat;

  // array of arrays (allocated on the heap)
  // runtime: 1.33s
  //  std::array<std::array<double, N>, K > & mat = *new std::array<std::array<double, N>, K >;

  // C-style heap array of arrays
  // runtime: 0.93s
  //  std::array<double, N> * mat = new std::array<double, N>[K];

  // vector of arrays
  // runtime: 0.93
  //  std::vector<std::array<double, N> > mat(K);

  // vector of vectors
  // runtime: 2.16s
  //  std::vector<std::vector<double> > mat(K, std::vector<double>(N));

  // fill the collection with some arbitrary values
  for (std::size_t k=0; k<K; ++k) {
    for (std::size_t j=0; j<N; ++j)
      mat[k][j] = k*N+j;
  }

  std::cerr << "constructed" << std::endl;

  // compute the sum of all pairwise distances in the collection
  double tot = 0.0;
   for (std::size_t j=0; j<K; ++j) {
     for (std::size_t k=0; k<K; ++k)
       tot += fast_sq_dist(mat[j], mat[k]);
   }

   std::cout << tot << std::endl;

  return 0;
} 
```

**注意 1：**所有版本都打印相同的结果。

**NB 2：**并且只是为了证明 , 和 之间的运行时差异`std::array<std::array<double, N>, K>`不仅仅是`std::vector<std::array<double, N> >`分配`std::vector<std::vector<double> >`时的分配/初始化，简单分配集合的运行时间（即注释掉 的计算和打印`tot`）是 0.000s、0.000s、和 0.004s，分别。

**NB 3：**每个方法都是单独编译和运行的（不是在同一个可执行文件中背靠背计时），以防止缓存中的不公平差异。

**NB 4：**
数组数组的组装：http: [//ideone.com/SM8dB](http://ideone.com/SM8dB)
数组向量的组装：http: [//ideone.com/vhpJv](http://ideone.com/vhpJv)
向量的组装：http: [//ideone.com/RZTNE](http://ideone.com/RZTNE)

**NB 5：**为了绝对清楚，我绝不打算批评 STL。一个绝对喜欢的 STL，不仅我经常使用它，而且有效使用的细节教会了我很多 C++ 微妙而伟大的特性。相反，这是一种智力追求：我只是在安排时间来学习高效 C++ 设计的原则。

此外，责怪 STL 是不合理的，因为很难对运行时差异的病因进行反卷积：启用优化后，编译器优化可能会*减慢而不是加快代码速度*。在关闭优化的情况下，它可能来自不必要的复制操作（将被优化并且永远不会在生产代码中执行），这可能比其他数据类型更偏向某些数据类型。

如果您像我一样好奇，我希望您能帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:05:24.477

我怀疑`array`在堆栈或堆上分配时，编译器只需要`array`在使用`vector`分配器时对齐，它可能使用`operator new`它必须返回适合*任何*类型对齐的内存。如果分配的内存恰好更好地对齐，允许更多的缓存命中/更大的读取，那么这似乎可以很容易地解释性能差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T02:46:41.200

考虑第二个和第三个测试。从概念上讲，它们是相同的：`K * N * sizeof(double)`从堆中分配字节，然后以完全相同的方式访问它们。那么为什么不同时期呢？

您所有的“更快”测试都有一个共同点：`new[]`. 所有较慢的测试都分配`new`在堆栈上或堆栈上。`vector`可能使用`new[]`Under the Hood™。唯一明显的原因是它的`new[]`实现`new`比预期的要显着不同。

我要建议的是，`new[]`它将回退`mmap`并直接在页面边界上分配，从而加快对齐速度，而其他两种方法不会在页面边界上分配。

考虑使用 OS 分配函数直接映射已提交的页面，然后将 a`std::array<std::array<double, N>, K>`放入其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T20:31:58.597

我刚刚在我的桌面上使用 MSVC++ 2010 进行了尝试，除了5.0 秒之外`vector`，所有测试的时间都相同（1.6 秒）。`vectors`

我会考虑查看您的库的实际实现，`array`看看`vector`是否有任何明显的差异。

尝试用迭代器样式的循环替换索引样式的循环，看看这是否会影响性能。

另外，尝试`clock()`从程序内部对程序进行计时：除其他外，这可以让您判断代码的哪一部分表现不同。甚至可能值得在嵌套范围中添加，这样您也可以对对象析构函数进行计时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T07:04:03.993

当简单的解释就足够时，不要寻找复杂的解释。这是一个优化器错误。普通的、固定大小的 C 风格堆栈分配数组的性能类似于`std::array`，所以不要责怪`std::array`实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T11:18:23.913

我看到的唯一大区别是您的数据存储方式不同。在前两种情况下，您的数据存储在一个巨大的块中。所有其他情况都存储指向矩阵中行的指针。我不太清楚为什么这会使您的代码更快，但它可能与查找和 CPU 预取有关。在迭代之前尝试缓存矩阵行，这样您就不需要查找`mat[k]`每个条目。这可以使它更快，甚至速度。可能是您的编译器可以在这种情况下执行此操作，`vector<array<T>>`但不能在这种`array<array<T>>`情况下执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-01T02:44:37.127

对我来说突然想到的一件事是，一次堆栈上的这么大的对象可能会触发操作系统对堆栈空间的重新分配。尝试在 main 末尾转储 /proc/self/maps

# html - css3 在这个效果上有一个错误的“重影”？

> ID：11279065
> 
> 赞同：0
> 
> 时间：2012-07-01T02:00:11.650
> 
> 标签：html, animation, css

不幸的是，我无法在 jsfiddle 中重现它......尽管如此，这是我的代码：http: [//jsfiddle.net/nZePr/](http://jsfiddle.net/nZePr/)

基本上，当您将鼠标悬停在工具提示上时，它会留下一个非常微弱的大约 5% 不透明度的鬼影，并且不会 100% 淡出。你们能看出我的代码有什么问题吗？这是它的样子：

你可以看到它发出的非常微弱的轮廓。

![鬼影效应](../Images/20795e387981074bd16909bcd80d4c2a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T03:13:06.910

我发现如果您尝试以非常小的增量进行过多动画处理，问题就会被夸大。我移动了工具提示必须移动几个像素的距离，它也清除了它。将时间缩短 0.1 秒也有帮助。它现在大约有 1%，但很难看出一切都很好:)

# statistics - 朴素贝叶斯行分类

> ID：11279067
> 
> 赞同：5
> 
> 时间：2012-07-01T02:01:55.670
> 
> 标签：statistics, machine-learning, classification, matlab

如何在 MATLAB 中对一行单独的单元格进行分类？

目前我可以像这样对单个列进行分类：

```
training = [1;0;-1;-2;4;0;1]; % this is the sample data.
target_class = ['posi';'zero';'negi';'negi';'posi';'zero';'posi'];
% target_class are the different target classes for the training data; here 'positive' and 'negetive' are the two classes for the given training data

% Training and Testing the classifier (between positive and negative)
test = 10*randn(25, 1); % this is for testing. I am generating random numbers.
class  = classify(test,training, target_class, 'diaglinear')  % This command classifies the test data depening on the given training data using a Naive Bayes classifier 
```

与上述不同，我想分类：

```
 A   B   C
Row A | 1 | 1 | 1 = a house

Row B | 1 | 2 | 1 = a garden 
```

这是来自 MATLAB 站点的代码示例：

```
nb = NaiveBayes.fit(training, class)
nb = NaiveBayes.fit(..., 'param1', val1, 'param2', val2, ...) 
```

我不明白`param1`,`val1`等是什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:41:08.403

这是改编自文档的示例：

```
%# load data, and shuffle instances order
load fisheriris
ord = randperm(size(meas,1));
meas = meas(ord,:);
species = species(ord);

%# lets split into training/testing
training = meas(1:100,:);         %# 100 rows, each 4 features
testing = meas(101:150,:);        %# 50 rows
train_class = species(1:100);     %# three possible classes
test_class = species(101:150);

%# train model
nb = NaiveBayes.fit(training, train_class);

%# prediction
y = nb.predict(testing);

%# confusion matrix
confusionmat(test_class,y) 
```

在这种情况下，输出是 2 个错误分类的实例：

```
ans =
    15     0     1
     0    20     0
     1     0    13 
```

现在您可以自定义分类器的各种选项（您提到的参数/值），只需参考[文档](http://www.mathworks.com/help/toolbox/stats/naivebayes.fit.html)以获取每个..

例如，它允许您从高斯或非参数内核分布中进行选择来对特征进行建模。您还可以指定类的先验概率，如果它是从训练实例估计的，还是假设概率相等。

# javascript - jquery 从 javascript 文件中获取 GET 变量

> ID：11279071
> 
> 赞同：1
> 
> 时间：2012-07-01T02:03:31.237
> 
> 标签：javascript, jquery, variables, get, parameter-passing

我有一个链接，当用户单击它时，它会将一个 javascript 文件推送到页面上。除此之外，它还在 javascript src 示例中添加了参数：

```
<script type="text/javascript" src="javascripfile.js?r=some%values&u=more&values"> 
```

这不会通过浏览器上的 URL 传递。我想知道如何在 javascriptfile.js 中获取这些参数？

**javascriptfile.js**：

```
(function(){
     //how to get r value, u value?
}()); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T02:11:22.593

请试试这个： http: [//jsfiddle.net/9Mvxb/](http://jsfiddle.net/9Mvxb/) **或** [http://jsfiddle.net/mKNPT/1/](http://jsfiddle.net/mKNPT/1/) **和** [http://jsfiddle.net/mKNPT/3/](http://jsfiddle.net/mKNPT/3/)

**请注意**，如果您不习惯使用`class`请参阅此**演示：http:** [//jsfiddle.net/24UdH/](http://jsfiddle.net/24UdH/)

API：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf)

如果您想知道`val.indexOf("?") + 1`为什么`+1`要狂热`?`

这应该有帮助，`:)`

**代码**

```
$("script").each(function(){
   if ($(this).prop('src').split("?")[0].indexOf("javascripfile.js") )
          value = $(this).prop("src");
});

var returnStr = value.substr(value.indexOf("?") +1);

alert(" value after ? is ==> " + returnStr);

var spliMe = returnStr.split('&');

alert("value of R ==> " + spliMe[0]); 
```

**或者**

```
 var value = $(".foo").prop("src");

    var returnStr = value.substr(value.indexOf("?") +1);

    alert(" value after ? is ==> " + returnStr);

    var spliMe = returnStr.split('&');

​ 
```

**标签**

```
<script type="text/javascript" class="foo" src="javascripfile.js?r=some%values&u=more&values"> 
```

# java - 如何在 HQL 中编写内联视图？

> ID：11279072
> 
> 赞同：0
> 
> 时间：2012-07-01T02:03:45.823
> 
> 标签：java, hibernate, hql

```
session.createQuery(" from " +
                "(select att.licenceNo license,driver.driverName drivername" +
                    " from DriverAttendanceDTO att,DriverDetailsDTO driver" +
                    " where att.licenceNo=driver.licenceNo" +
                    " and att.recordStatus='A'" +
                    " and driver.recordStatus='A' )"); 
```

休眠给了我

```
Exception in thread "main" org.hibernate.hql.ast.QuerySyntaxException: unexpected token: ( near line 1, column 7 [ from (select att.licenceNo license,driver.driverName drivername,att.present present from com.vms.dto.DriverAttendanceDTO att,com.vms.dto.DriverDetailsDTO driver where att.licenceNo=driver.licenceNo and att.recordStatus='A' and driver.recordStatus='A' )]
    at org.hibernate.hql.ast.QuerySyntaxException.convert(QuerySyntaxException.java:54)
    at org.hibernate.hql.ast.QuerySyntaxException.convert(QuerySyntaxException.java:47) 
```

那有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T07:44:44.180

删除`from (...)`：

```
session.createQuery("select att.licenceNo license,driver.driverName drivername" +
                    " from DriverAttendanceDTO att,DriverDetailsDTO driver" +
                    " where att.licenceNo=driver.licenceNo" +
                    " and att.recordStatus='A'" +
                    " and driver.recordStatus='A'"); 
```

# c# - 为什么此属性未显示在属性框中？

> ID：11279074
> 
> 赞同：1
> 
> 时间：2012-07-01T02:04:47.890
> 
> 标签：c#, wpf, visual-studio-2010, properties

我正在尝试按照[这些信息](http://bit.ly/N8CKrt)在 wpf 中创建地址簿程序。我实际上正在使用visual c# 2010，并且随着我的前进而适应。但是，我已尽可能严格地遵循所有说明，并且由于某种原因，`contact`当我选择`MainWindow`.

我的代码如下：

```
namespace WpfApplication1
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        contacts.Add(new Contact()
        {
            Name = "James",
            Email = "james@mail.com",
            PhoneNumber = "01234 111111"
        });
        contacts.Add(new Contact()
        {
            Name = "Bob",
            Email = "bob@mail.com",
            PhoneNumber = "01234 222222"
        });
        contacts.Add(new Contact()
        {
            Name = "Emma",
            Email = "emma@mail.com",
            PhoneNumber = "01234 333333"
        });
    }

    protected List<Contact>  contacts = new List<Contact>();

    public List<Contact> Contacts
    {
        get { return  contacts; }
        set {  contacts = value; }
    }

} 
```

我不知道这是否有帮助，但由于某种原因，如果我单击我的列表框，请选择 ItemSource>Binding>Element>Path>Items 我的 VC# 2010 崩溃。我的问题可能都是程序错误，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T02:32:46.833

如果您想让它出现在属性窗口中，请将[Browsable](http://msdn.microsoft.com/en-us/library/system.componentmodel.browsableattribute.aspx)属性添加到其中：

```
[Browsable(true)]
public List<Contact> contacts
{
    get { return this._contacts; }
    set { this._contacts = value; }
}
protected List<Contact> _contacts = new List<Contact>(); 
```

# time - 为什么闰秒会引起问题？

> ID：11279076
> 
> 赞同：36
> 
> 时间：2012-07-01T02:05:24.343
> 
> 标签：time, operating-system, datetime

所以目前（但很可能不会持续很长时间）Reddit、Meetup、Fark、LinkedIn、Yelp、4Chan 都倒闭了。Netflix显然也有一段时间了。

根据 Reddit 的推文，他们从 2012 年 6 月 30 日开始遇到与闰秒有关的问题：[https ://twitter.com/redditstatus/status/219244389044731904](https://twitter.com/redditstatus/status/219244389044731904)

> “我们在太平洋标准时间下午 5 点遇到了一些与闰秒相关的 Java/Cas​​sandra 问题。我们正在尽快恢复服务。”

显然，影响其他站点的问题都与闰秒问题有关。

[阅读关于闰秒](http://en.wikipedia.org/wiki/Leap_second)的维基百科文章后，我*想*我明白闰秒是什么......但我不明白的是，如果不考虑闰秒，会发生什么样的奇怪行为？作为程序员，我们在编写和配置服务器时应该如何准备闰秒？

我的意思是只有一秒钟，不是吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-01T02:10:54.050

某些 Linux 内核（2.6.29 之前的版本）在[处理闰秒](https://lkml.org/lkml/2009/1/2/373)时存在问题，[甚至可能导致内核恐慌](https://bugzilla.redhat.com/show_bug.cgi?id=479765)。其他 Linux 内核[可能会受到活锁的影响](http://lkml.indiana.edu/hypermail/linux/kernel/1203.1/04598.html)。这显然对系统有不利影响，因为它需要重新启动。

这是[有关此主题的相关 ServerFault 问题](https://serverfault.com/questions/403732/anyone-else-experiencing-high-rates-of-linux-server-crashes-today)，因为它实际上是 Linux 服务器问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-11T23:13:45.923

在我见过的大多数系统（路由器）上，一个问题是正常运行时间（系统启动的时间）x 或启动时间（系统启动的时间）如果跨过闰秒，则会出现 1 秒的错误。此外，23:59:60 的日志被错误地标记为 23:59:59。协议计时器不受影响。NTP 不同步并逐步调整时钟以纠正它 - 根据 NTP 规则，这需要几分钟。

# ruby-on-rails - 无法使用 sudo 运行每当任务

> ID：11279086
> 
> 赞同：2
> 
> 时间：2012-07-01T02:09:10.980
> 
> 标签：ruby-on-rails, rvm, delayed-job, whenever

我想在每次重新启动时使用rails gem执行一项任务

```
every :reboot do 
   script "cd :path && RAILS_ENV=:environment && rvmsudo ruby script/delayed_job start :environment"
end 
```

但是 rvmsudo 会提示输入密码
成功执行任务的解决方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T03:17:47.783

默认情况下，Sudo 会记住您的密码 5 分钟。而且，rvmsudo 只是调用 sudo，所以它也能记住你的密码。

```
every :reboot do
    #hack to rvmsudo to use password later 
    sudo "your_password"
    script "cd :path && RAILS_ENV=:environment && rvmsudo ruby script/delayed_job start    :environment"
end 
```

# javascript - 如何获取对象中的键值对列表？

> ID：11279093
> 
> 赞同：23
> 
> 时间：2012-07-01T02:11:26.257
> 
> 标签：javascript

> **可能重复：**
> [获取键/值 javascript 对象的键的最佳方法](https://stackoverflow.com/questions/6268679/best-way-to-get-the-key-of-a-key-value-javascript-object)

> foo = {酒吧：“baz”}

如何获得 foo 中所有属性和值的列表？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-01T02:16:27.280

`for in`循环可以为您提供键和值。[记得在严格模式下](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)使用`const`,`let`或`var`用于变量声明。

```
for(const p in foo) {
    console.log (p, foo[p])
} 
```

从控制台：

```
foo = {bar: "baz"}

Object
bar: "baz"
__proto__: Object

for(p in foo) { console.log (p, foo[p]) }
> bar baz 
```

如果您正在循环的对象具有从其原型继承的属性，您可以使用如下`Object.hasOwnProperty()`函数防止继承的属性被循环：

```
for(const p in foo) {
    if (foo.hasOwnProperty(p)) {
        console.log (p, foo[p])
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T02:16:06.640

你可以遍历它：

```
for(var i in foo) {
  console.log( i + ": " + foo[i] + "<br />");
} 
```

[**演示**](http://jsfiddle.net/qhLmb/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T02:54:20.537

对于您当前正在使用的不同平台，这可能会有所不同。如果您从终端运行，则使用`print`，如果您没有`console`对象，则可以使用`document.write()`，依此类推。

您可以使用/阅读以下内容来理解：

```
var foo = {bar: "baz", boolean: true, num: 2}

for (i in foo) {
//checks to see where to print.
if (typeof console === 'object') 
    console.log(i + ": " + foo[i]);
else if (typeof document === 'object') 
    document.write(i + ": " + foo[i]);
else 
    print(i + ": " + foo[i]);
} 
```

或者，如果您只是说`console.log(foo)`在 Chrome/Firefox 中，浏览器会为您执行循环突出显示并为您提供对象的漂亮打印，因此您实际上不需要执行上面显示的循环。

您也可以使用`console.debug(foo)`代替`console.log(foo)`，区别是细微的。[您可以在http://getfirebug.com/wiki/index.php/Console_API](http://getfirebug.com/wiki/index.php/Console_API)阅读更多相关信息

# maple - 从 Maple 的解决方案中拯救解决方案

> ID：11279095
> 
> 赞同：0
> 
> 时间：2012-07-01T02:12:15.940
> 
> 标签：maple, equation-solving

我有类似的东西

`solutions := solve ( {eqn1=0, eqn2=0, eqn3=0, eqn4=0, ... } )`

它返回类似：

`solutions := {Ax = -.2312688085, Ay = -7.770329620, Bx = -19.76873119, ....}`

如何访问和保存每个解决方案？
“Ax := Solutions[1];”等是唯一的方法吗？

虽然solutions[1] 在上面的例子中没有访问-.2312688085，而是一种字符串“Ax = -.2312688085”，所以我最终得到了“Ax := Ax = -.2312688085”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T03:31:06.177

在评估涉及这些名称的其他表达式时，该`eval`命令允许您使用解决方案，就像已分配 Ax、Ay 等一样。您无需实际进行分配即可获得此效果（这样做的好处是您可以在这些变量中创建其他方程而无需取消分配它们的名称）。

另一种方法是使用`assign`命令将返回的数值实际分配给这些变量名称。但这使得后续尝试使用这些符号变量名称更加尴尬——您必须首先取消分配它们。您可能不想陷入不得不一遍又一遍地分配/取消分配的尴尬模式。

我认为使用`eval`更容易。当然，您可以同时尝试两者，并使用您喜欢的。

一些示例可能会有所帮助：

```
restart:

eq1 := Ax + Ay + 8.001598428:
eq2 := Bx + 20.08373119:
eq3 := By + Ay + 8.085329620:
eq4 := By + 0.315:

solutions := solve([eq1=0, eq2=0, eq3=0, eq4=0]);

    {Ax = -0.2312688080, Ay = -7.770329620, Bx = -20.08373119, 
     By = -0.3150000000}

eval(Ax, solutions);

                     -0.2312688080

eval(Ax^2 + sin(By), solutions);

                     -0.2563312096

eq5 := cos(Bx) + sin(Ax);   # still convenient

                   cos(Bx) + sin(Ax)

restart:

eq1 := Ax + Ay + 8.001598428:
eq2 := Bx + 20.08373119:
eq3 := By + Ay + 8.085329620:
eq4 := By + 0.315:

solutions := solve([eq1=0, eq2=0, eq3=0, eq4=0]);

  {Ax = -0.2312688080, Ay = -7.770329620, Bx = -20.08373119, 
   By = -0.3150000000}

assign(solutions);

Ax;

                     -0.2312688080

Ax^2 + sin(By);

                     -0.2563312096

eq5 := cos(Bx) + sin(Ax); # oops

                      0.1010869460

unassign('Ax'):
unassign('Bx'):

eq5 := cos(Bx) + sin(Ax);

                   cos(Bx) + sin(Ax) 
```

# python - 'python setup.py nosetests' 报告包的 __init__.py 没有被测试覆盖

> ID：11279096
> 
> 赞同：2
> 
> 时间：2012-07-01T02:14:16.533
> 
> 标签：python, code-coverage, nose, coverage.py

当我测试[https://bitbucket.org/petar/beam_integrals](https://bitbucket.org/petar/beam_integrals)时，`python setup.py nosetests`我得到了**96% 的覆盖率**：

```
----------------------------------------------------------------------
XML: nosetests.xml
Name                                             Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------
beam_integrals                                       7      7     0%   1-24
beam_integrals.beam_types                           79      0   100%
beam_integrals.characteristic_equation_solvers      65      0   100%
beam_integrals.exceptions                            6      0   100%
beam_integrals.utils                                14      0   100%
------------------------------------------------------------------------------
TOTAL                                              171      7    96%
----------------------------------------------------------------------
Ran 634 tests in 178.245s

OK (SKIP=3) 
```

但是，如果我测试相同的代码，`nosetests`我会得到**完全覆盖**：

```
----------------------------------------------------------------------
XML: nosetests.xml
Name                                             Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------
beam_integrals                                       7      0   100%
beam_integrals.beam_types                           79      0   100%
beam_integrals.characteristic_equation_solvers      65      0   100%
beam_integrals.exceptions                            6      0   100%
beam_integrals.utils                                14      0   100%
------------------------------------------------------------------------------
TOTAL                                              171      0   100%
----------------------------------------------------------------------
Ran 634 tests in 179.226s

OK (SKIP=3) 
```

似乎`python setup.py nosetests`没有正确报告`beam_integrals`模块的测试覆盖率。

此问题已在以下位置得到验证：

1.  我们的[持续集成服务器](http://ci.petarmaric.com/job/beam_integrals/)运行 Ubuntu 10.04 Server 32bit
2.  新创建的 Rackspace 云服务器，运行 Ubuntu 12.04 Server 64 位，设置如下：

    ```
    $ sudo aptitude update
    $ sudo aptitude upgrade
    $ sudo reboot

    $ sudo aptitude install python-pip mercurial git-core python-gmpy python-dev
    $ hg clone https://bitbucket.org/petar/beam_integrals
    $ sudo pip install -r beam_integrals/requirements.txt
    $ sudo pip install -r beam_integrals/requirements-test.txt

    $ cd beam_integrals
    $ python setup.py nosetests
    $ nosetests 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:51:03.070

`python setup.py nosetests`在开始覆盖测试之前导入 beam_integrals，因此在进行覆盖测量时它已经被导入。这是因为您的 setup.py 直接导入了 beam_integrals。这不是一件坏事，很多 Python 项目这样做是为了从代码本身获取版本信息，而不是在 setup.py 中复制它。

当您使用`nosetests`时，它知道在导入任何内容之前开始覆盖测量。实际上，它可能会导入东西，取消导入它们，开始覆盖，然后运行代码，再次导入东西。

`nosetests`除了用来运行测试之外，我不确定你能做些什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T11:58:44.717

为了完成 Ned 的回答，我知道有两种解决方案可以在不复制文件中的版本的情况下规避该问题。

1.  导入模块后从 sys.modules 中删除模块

    ```
    import beam_integrals
    for mod in [m for m in sys.modules.keys() if m.startswith('beam_integrals')]:
        del sys.modules[mod] 
    ```

    覆盖率报告现在将包括所有文件。
    但是，在您的情况下，它仍然需要`sympy`安装。
    这就是我转向下一个解决方案的原因。

2.  读取模块版本而不导入它：

    ```
    def get_version():
        with open('beam_integrals/__init__.py') as f:
            for line in f:
                if line.startswith('__version__'):
                    return eval(line.split('=')[-1])

    setup(
        name='beam_integrals',
        version=get_version(), 
    ```

    我在这里看到了这个：[https ://github.com/PyCQA/pycodestyle/blob/2.3.1/setup.py](https://github.com/PyCQA/pycodestyle/blob/2.3.1/setup.py)

# cuda - CUPTI / CUDA prof_trigger 未按预期工作

> ID：11279098
> 
> 赞同：1
> 
> 时间：2012-07-01T02:14:50.650
> 
> 标签：cuda, profiling

根据 NVidia 的说法，__prof_trigger() 调用是在 warp 级别执行的，或者换句话说，每个 warp 都会将指定的触发器增加 1。

所以我写了一个小内核来测试它：

```
__global__ void kernel(int *arr) {
   __prof_trigger(00);

   // from here, it's irrevelant to the question
   int id = threadIdx.x + blockDim.x * blockIdx.x;
   if (id >= N) return;
   __prof_trigger(01);
   if (arr[id] < 4) __prof_trigger(02);
   else             __prof_trigger(03);
} 
```

我使用以下方法调用程序：./prof_trigger_test [block_size] [event_name]

输入数组此时无关紧要（我只是在测试 prof_trigger_0，所以它甚至没有被使用）

我只测试了一个块（根据我的理解，不同数量的块不应该影响这个问题，还是我错了？）并且事件名称是 CUPTI 给出的名称，或 prof_trigger_XX，它被翻译为事件 id运行。

因此，鉴于经纱尺寸为 32，我应该期待类似：

```
./prof_trigger_test 1  prof_trigger_00   // expected to return 1
./prof_trigger_test 33 prof_trigger_00   // expected to return 2 
```

每次我将线程数增加 32 时，prof_trigger_00 都应该增加（这需要一个新的扭曲）

不是这种情况。在我的笔记本电脑上运行时，使用 NVidia 9600M GT 而不是 32，我只需增加 4 即可看到计数器的增量值。并在远程集群上运行，使用 Tesla M2070，所需增量为 8

很明显我错过了一些东西。GPU是否出于某种原因产生了较小的扭曲（我认为性能，虽然不确定如何）？

根据要求，这是整个代码：

```
#include <cuda.h>
#include <cupti.h>
#include <stdio.h>

#define N 10

#define CHECK_CU_ERROR(err, cufunc)                                     \
    if (err != CUDA_SUCCESS) {                                          \
        printf("%s:%d: error %d for CUDA Driver API function '%s'\n",   \
                __FILE__, __LINE__, err, cufunc);                       \
        exit(-1);                                                       \
    }

#define CHECK_CUPTI_ERROR(err, cuptifunc)                               \
    if (err != CUPTI_SUCCESS) {                                         \
        const char *errstr;                                             \
        cuptiGetResultString(err, &errstr);                             \
        printf("%s:%d:Error %s for CUPTI API function '%s'\n",          \
                __FILE__, __LINE__, errstr, cuptifunc);                 \
        exit(-1);                                                       \
    }

typedef struct cupti_eventData_st {
    CUpti_EventGroup eventGroup;
    CUpti_EventID eventId;
} cupti_eventData;

// Structure to hold data collected by callback
typedef struct RuntimeApiTrace_st {
    cupti_eventData *eventData;
    uint64_t eventVal;
} RuntimeApiTrace_t;

void CUPTIAPI getEventValueCallback(
                        void *userdata,
                        CUpti_CallbackDomain domain,
                        CUpti_CallbackId cbid,
                        const CUpti_CallbackData *cbInfo) {

    CUptiResult cuptiErr;
    RuntimeApiTrace_t *traceData = (RuntimeApiTrace_t*) userdata;
    size_t bytesRead;

    // This callback is enabled for launch so we shouldn't see anything else.
    if (cbid != CUPTI_RUNTIME_TRACE_CBID_cudaLaunch_v3020) {
        printf("%s:%d: unexpected cbid %d\n", __FILE__, __LINE__, cbid);
        exit(-1);
    }

    switch(cbInfo->callbackSite) {
        case CUPTI_API_ENTER:
            cudaThreadSynchronize();
            cuptiErr = cuptiSetEventCollectionMode(cbInfo->context, CUPTI_EVENT_COLLECTION_MODE_KERNEL);
            CHECK_CUPTI_ERROR(cuptiErr, "cuptiSetEventCollectionMode");
            cuptiErr = cuptiEventGroupEnable(traceData->eventData->eventGroup);
            CHECK_CUPTI_ERROR(cuptiErr, "cuptiEventGroupEnable");
            break;

        case CUPTI_API_EXIT:
            bytesRead = sizeof(uint64_t);
            cudaThreadSynchronize();
            cuptiErr = cuptiEventGroupReadEvent(traceData->eventData->eventGroup, CUPTI_EVENT_READ_FLAG_NONE, traceData->eventData->eventId, &bytesRead, &traceData->eventVal);
            CHECK_CUPTI_ERROR(cuptiErr, "cuptiEventGroupReadEvent");
            cuptiErr = cuptiEventGroupDisable(traceData->eventData->eventGroup);
            CHECK_CUPTI_ERROR(cuptiErr, "cuptiEventGroupDisable");
            break;
    }
}

static void displayEventVal(RuntimeApiTrace_t *trace, char *eventName) {
    printf("Event Name: %s \n", eventName);
    printf("Event Value: %llu\n", (unsigned long long) trace->eventVal);
}

__global__ void kernel(int *arr) {
    __prof_trigger(00);

    int id = threadIdx.x + blockDim.x * blockIdx.x;
    if (id >= N) return;

    __prof_trigger(01);

    if (arr[id] < 4) __prof_trigger(02);
    else             __prof_trigger(03);
}

int main(int argc, char **argv) {
    int deviceCount;
    CUcontext context = 0;
    CUdevice dev = 0;
    char deviceName[32];
    char *eventName;
    CUptiResult cuptiErr;
    CUpti_SubscriberHandle subscriber;
    cupti_eventData cuptiEvent;
    RuntimeApiTrace_t trace;
    int cap_major, cap_minor;

    CUresult err = cuInit(0);
    CHECK_CU_ERROR(err, "cuInit");

    err = cuDeviceGetCount(&deviceCount);
    CHECK_CU_ERROR(err, "cuDeviceGetCount");

    if (deviceCount == 0) {
        printf("There is no device supporting CUDA.\n");
        return -2;
    }

    if (argc < 3) {
        printf("Usage: ./a.out <num_threads> <event_name>\n");
        return -2;
    }

    err = cuDeviceGet(&dev, 0);
    CHECK_CU_ERROR(err, "cuDeviceGet");

    err = cuDeviceGetName(deviceName, 32, dev);
    CHECK_CU_ERROR(err, "cuDeviceGetName");

    err = cuDeviceComputeCapability(&cap_major, &cap_minor, dev);
    CHECK_CU_ERROR(err, "cuDeviceComputeCapability");

    printf("CUDA Device Name: %s\n", deviceName);
    printf("CUDA Capability: %d.%d\n", cap_major, cap_minor);

    err = cuCtxCreate(&context, 0, dev);
    CHECK_CU_ERROR(err, "cuCtxCreate");

    cuptiErr = cuptiEventGroupCreate(context, &cuptiEvent.eventGroup, 0);
    CHECK_CUPTI_ERROR(cuptiErr, "cuptiEventGroupCreate");

    int threads = atoi(argv[1]);
    eventName = argv[2];

    cuptiErr = cuptiEventGetIdFromName(dev, eventName, &cuptiEvent.eventId);
    if (cuptiErr != CUPTI_SUCCESS) {
        printf("Invalid eventName: %s\n", eventName);
        return -1;
    }

    cuptiErr = cuptiEventGroupAddEvent(cuptiEvent.eventGroup, cuptiEvent.eventId);
    CHECK_CUPTI_ERROR(cuptiErr, "cuptiEventGroupAddEvent");

    trace.eventData = &cuptiEvent;

    cuptiErr = cuptiSubscribe(&subscriber, (CUpti_CallbackFunc)getEventValueCallback, &trace);
    CHECK_CUPTI_ERROR(cuptiErr, "cuptiSubscribe");

    cuptiErr = cuptiEnableCallback(1, subscriber, CUPTI_CB_DOMAIN_RUNTIME_API, CUPTI_RUNTIME_TRACE_CBID_cudaLaunch_v3020);
    CHECK_CUPTI_ERROR(cuptiErr, "cuptiEnableCallback");

    int host_arr[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};
    int *dev_arr;

    cudaMalloc(&dev_arr, sizeof(int) * N);
    cudaMemcpy(dev_arr, &host_arr, sizeof(int) * N, cudaMemcpyHostToDevice);
    kernel<<< threads, 1 >>>(dev_arr);

    displayEventVal(&trace, eventName);
    trace.eventData = NULL;

    cuptiErr = cuptiEventGroupRemoveEvent(cuptiEvent.eventGroup, cuptiEvent.eventId);
    CHECK_CUPTI_ERROR(cuptiErr, "cuptiEventGroupRemoveEvent");

    cuptiErr = cuptiEventGroupDestroy(cuptiEvent.eventGroup);
    CHECK_CUPTI_ERROR(cuptiErr, "cuptiEventGroupDestroy");

    cuptiErr = cuptiUnsubscribe(subscriber);
    CHECK_CUPTI_ERROR(cuptiErr, "cuptiUnsubscribe");

    cudaDeviceSynchronize();
} 
```

和 SASS 代码：

```
Fatbin ptx code:
================
arch = sm_10
code version = [1,4]
producer = cuda
host = linux
compile_size = 64bit
identifier = cuda.cu

Fatbin elf code:
================
arch = sm_10
code version = [1,2]
producer = cuda
host = linux
compile_size = 64bit
identifier = cuda.cu

    code for sm_10
        Function : _Z6kernelPi
    /*0000*/ ;
    /*0008*/     /*0xf0000001e0000004*/     MOV.U16 R0H, g [0x1].U16;
    /*0010*/     /*0x100042050023c780*/     I2I.U32.U16 R1, R0L;
    /*0018*/     /*0xa000000504000780*/     IMAD.U16 R0, g [0x6].U16, R0H, R1;
    /*0020*/     /*0x60014c0100204780*/     ISET.S32.C0 o [0x7f], R0, c [0x1] [0x0], LE;
    /*0028*/     /*0x308001fd6c40c7c8*/     RET C0.EQU;
    /*0030*/ ;
    /*0038*/     /*0x3000000300000500*/     SHL R0, R0, 0x2;
    /*0040*/     /*0xf0000401e0000004*/     IADD R0, g [0x4], R0;
    /*0048*/     /*0x30020001c4100780*/     GLD.U32 R0, global14 [R0];
    /*0050*/     /*0x2000c80104200780*/     ISET.S32.C0 o [0x7f], R0, c [0x1] [0x1], GT;
    /*0058*/     /*0xd00e000180c00780*/     BRA C0.NE, 0x70;
    /*0060*/ ;
    /*0068*/     /*0x308101fd6c4107c8*/     RET;
    /*0070*/ ;
    /*0078*/     /*0x1000e00300000280*/     NOP;
        ............................ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T17:44:09.347

prof_trigger_XX 的集合因架构而异。在计算能力为 1.* 的设备上，计数器值仅从 1 个 SM 收集。在计算能力 >= 2 时，从所有 SM 收集计数器值。

GeForce 9600M GPU 是具有 4 个 SM 的 1.1 设备。

示例程序正在启动 [block_size] 块，每个块有 1 个线程。这有点令人困惑，因为我认为您的意思是启动 N 个线程的示例，每个块最多 1 个扭曲。这不是示例代码中实现的。

```
[block_size]  prof_trigger_00 expected range
1-3           0-1
4-7           1-2
8-11          2-3 
```

预期值是一个范围，因为无法保证观察到的 SM 是否会是第一个接收到被调度线程块的 SM。

# c++ - Irrlicht 错误“无入口点”

> ID：11279103
> 
> 赞同：0
> 
> 时间：2012-07-01T02:16:04.447
> 
> 标签：c++, visual-studio-2010, dll, irrlicht

我在 Irrlicht 做了一些项目，它编译得很好，但是当我尝试运行它时，它给了我以下错误

```
The procedure entry point ?IdenttityMatrix@core@irr@@3V?$CMatrix4@M@12@B 
could not be located in the dynamic link library Irrlicht.dll. 
```

我在这里错过了什么，因为我无法弄清楚它到底在抱怨什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:43:44.263

好吧，至少你的应用程序开始了！这意味着您的应用程序动态链接到 Irrlicht.dll 而不是静态链接（在后一种情况下，您的应用程序甚至不会启动）。此失败表示已成功**找到**Irrlicht.dll 库，但未找到预期函数的入口点（在您的情况下为 IdenttityMatrix）。很可能，您没有使用正确版本的库。

# layout - 没有边缘的节点的 GraphViz 点布局

> ID：11279106
> 
> 赞同：1
> 
> 时间：2012-07-01T02:16:48.177
> 
> 标签：layout, graphviz, dot

我正在使用 GraphViz 点布局计算相当大的布局。我的源结构是一个图，其中一些节点连接而其他节点不连接。连接节点的布局是完美的，但是 dot 将所有其他节点排列成一条直线，这导致输出的长度相当大。有什么改变可以摆脱这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T07:42:12.543

在 Graphviz 套件中有一个[`unflatten`](http://www.graphviz.org/pdf/unflatten.1.pdf)可以用于此的程序。使用示例：

```
unflatten -c 2 graph.dot | dot -Tpng -o graph.png 
```

您告诉 unflatten 将断开的节点链接到长度为 2 的位置。这将创建不可见的边缘，从而阻止节点按照您的描述排列。有关更多详细信息，请参阅[文档](http://www.graphviz.org/pdf/unflatten.1.pdf)。

# java - 休眠多对一 - 获取重复条目异常

> ID：11279107
> 
> 赞同：0
> 
> 时间：2012-07-01T02:16:50.357
> 
> 标签：java, database, hibernate, many-to-one

我有 2 个实体类，称为学生和大学，学生和大学之间的关系是多对一的，这意味着许多学生可以在一所大学学习。我的输入jsp页面基本上会要求大学名和学生邮箱注册。

这是流程。我在输入页面中输入以下内容 -

university1, student1 - 这将在我的数据库中添加 university1 和 student1。

当我进入 -

university1, student2 - 我的目的是首先找出我的数据库中是否已经存在 university1。如果是，则将同一所大学与学生对象相关联并尝试保存它。但是当我这样做时，hibernate 试图在数据库中再添加一个大学对象，我得到以下异常 -

```
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'university_id'. 
```

这是我的实体类 -

```
@Entity
@Table(name="students")
public class Student implements Serializable{

private Integer studentId;
private University university;

@Id
@GeneratedValue
@Column(name = "student_id")
public Integer getStudentId() {
    return studentId;
}

@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "university_id")
public University getUniversity() {
    return university;
}

}

@Entity
@Table(name="university")
public class University implements Serializable {

private Integer universityId;

@Id
@GeneratedValue
@Column(name = "university_id")
public Integer getUniversityId() {
    return university;
}

public void setCompanyId(Integer companyId) {
    this.companyId = companyId;
}

@Column(name = "university_name", unique = true, nullable = false)
public String getUniversityName() {
    return university;
}

} 
```

这是简单的Java代码。

```
University university =   universityService.getUniversityByName(student.getUniversity().getUniversityName());
if(university != null) {
student.setUniversity(university);
}
getHibernateTemplate().saveOrUpdate(student); 
```

我正在使用 Spring MVC，并且数据库模式是由 Hibernate 生成的。看起来我犯了一些非常基本的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:16:19.273

hibernate 不会发出查询来识别数据库中是否已经存在具有相同唯一列值的其他记录，您必须自己做。

```
List<University> unis = session.createCriteria(University.class)
    .add(<Restrictions.eq("name", name)
    .list<University>()

University u;
if (unis.getCount() == 0)
{
    u = new University();
    ...
}
else
{
    u = unis.get(0);
} 
```

# mysql - mySQL - 比较表行

> ID：11279108
> 
> 赞同：0
> 
> 时间：2012-07-01T02:17:24.120
> 
> 标签：mysql, database, select

我只是不太确定这样做的正确方法。我基本上有2张桌子。两个表具有相同的结构。Database1（当前数据平均 20k 行），Database2（数据累积，在任何给定时间都可以超过 100 万行）。

我想比较这两个表，并通过特定的时间戳查询从 Database1 中给出在 Database2 中不存在的结果。我已经尝试过的查询需要很长时间才能搜索。

试过：

```
select distinct player from Database1
where not exists (select player from Database2 where snap = 1340981695)

SELECT Database1.player FROM Database1
INNER JOIN Database2 ON Database1.player NOT IN (Database2.player) AND Database2.snap = 1340981695
GROUP BY Database1.player

select distinct Database1.player from Database1
left join Database2 on Database1.player not in (Database2.player)
and Database2.snap = 1340981695 
```

我仍然无法理解这一点。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:00:02.340

有三种方法。按照[性能](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)的大致顺序，从最好到最差：

1.  使用外连接：

    ```
    SELECT Database1.*
    FROM   Database1
      LEFT JOIN Database2
             ON Database1.id = Database2.id AND Database2.snap = 1340981695
    WHERE  Database2.id IS NULL 
    ```

2.  使用`IN`：

    ```
    SELECT *
    FROM   Database1
    WHERE  id NOT IN (SELECT id FROM Database2 WHERE snap = 1340981695) 
    ```

3.  使用`EXISTS`：

    ```
    SELECT *
    FROM   Database1
    WHERE  NOT EXISTS (
             SELECT *
             FROM   Database2
             WHERE id = Database1.id AND snap = 1340981695
           ) 
    ```

# php - 将文件服务器传输到服务器

> ID：11279109
> 
> 赞同：0
> 
> 时间：2012-07-01T02:18:10.567
> 
> 标签：php, file, shell, file-transfer

我需要将一个帐户转移到另一台服务器。最大的问题是：一个有Cpanel（好！），另一个有自定义品牌面板（坏=（）。所以，我想：用PHP转移怎么样？（如何？不知道）

我知道服务器支持 exec，并且我有 Jailsshell (SSH)，但是 wget 被禁用。不知道其他限制。想法？

我试过这个：

```
function ftp($host, $username, $password, $local, $remote) {
    $execTime = 7000;
    ini_set('max_execution_time', $execTime);
    set_time_limit($execTime);

    $c = ftp_connect($host);
    ftp_set_option($c, FTP_TIMEOUT_SEC, $execTime);
    ftp_login($c, $username, $password) or die("Can't login");

    ftp_get($c, $local, $remote, FTP_ASCII);

    ftp_close($c) or die("Can't close");
} 
```

但是获取请求超时..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T02:22:02.543

你可以从 exec 访问 scp 吗？它将允许将文件结构从一台主机复制到另一台主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T02:23:38.073

首先，我会通过 ssh 或 telnet 登录到该网站的服务器。以下是我要输入的命令：

```
cd /home/somepath/to/yourwebsite/public_html 
tar -cvf sitepack.tar ./ 
```

完成后，我将转到您的新服务器并通过 telnet 和 ssh 登录。在这里我会输入：

```
cd /home/somepath/to/yourwebsite/public_html 
wget yourdomain.com/sitepack.tar 
tar -xvf sitepack.tar 
```

在这一点上，我会检查以确保正确的所有者和组在您刚刚解压缩的文件中。您可以通过键入以下内容来查看它们是什么：

```
ls -la 
```

如果所有者或组错误，您可以键入以下内容来修复所有文件：

```
chown -R owner.group ./ 
```

owner.group 应替换为您想要的所有者名称和您想要的组名称。这将递归地遍历所有文件和目录，并将它们更改为正确的所有者和组。

# redis - Redis 和查询值

> ID：11279113
> 
> 赞同：8
> 
> 时间：2012-07-01T02:19:30.227
> 
> 标签：redis

Redis 在概念上与我使用的传统 SQL 数据库不同，我试图弄清楚它是否适合我的项目......我一直在环顾四周，但似乎找不到我的问题的答案。

我有一组需要存储的用户，每个用户都有一个唯一的 ID 和几个与之关联的值（例如他们的名字）。似乎我可以简单地将它们存储为哈希：

```
user:fef982dcfe1a7bcba4849b4c281bba95
"username" "andrewm" "name" "Andrew" 
```

我还有一堆要存储的消息，每条消息都有一些属性，例如发件人和收件人：

```
message:1a7bcba4849b4c281bfef98a952dcfeb
"sender" "fef982dcfe1a7bcba4849b4c281bba95" "recipient" "82dcfe1a7bcba4849b4c281bba95fef9" "message" "Hi!" 
```

我的问题是，我将如何检索特定用户（由他们的哈希指定）发送的所有消息。我应该改用传统的关系数据库，还是像 MongoDB 这样的 NoSQL 数据库（我以前用过）？如果是这样，有人对高性能商店有什么建议吗？我不会进行任何真正的搜索（即 MySQL`LIKE`查询）——实际上只是键值查找。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T09:32:37.003

当然可以使用 Redis 对这些数据进行建模，但您需要考虑数据结构和访问路径。使用 Redis，访问路径不是隐式管理的（就像 RDBMS/MongoDB 中的索引一样）。

对于提供的示例，您可以：

```
user:<user hash> -> hash of user properties
user:<user hash>:sent -> set of <msg hash>
user:<user hash>:received -> set of <msg hash>
message:<msg hash> -> hash of message properties 
```

添加/删除消息意味着在添加/删除消息对象本身的基础上维护与发送者和接收者相对应的 *:sent 和 *:received 集。

检索给定用户发送或接收的消息只是一个 SMEMBERS 命令，或者如果您还想同时检索消息的属性，则需要一个 SORT：

```
# Get a list of message hash codes only in one roundtrip
smembers user:<user hash>:received

# Get a list of message contents in one roundtrip
sort user:<user hash>:received by nosort get message:*->sender get message:*->message 
```

有关使用排序的基本原理，请参见：

*   [从 Redis 获取多个键值](https://stackoverflow.com/questions/10155398/getting-multiple-key-values-from-redis/10155814#10155814)
*   [需要帮助在 Redis/NoSQL 中进行概念化](https://stackoverflow.com/questions/9425733/need-help-conceptualizing-in-redis-nosql/9437279#9437279)

**注意 1：**对于 Redis，最好使用整数作为键而不是 UUID 或哈希码（尤其是在集合中），因为它们以更有效的方式存储。

**注意 2：**如果您需要对消息进行排序，则必须使用列表而不是集合。结果是只能删除最旧的消息，并且只能以有效的方式添加新消息。您可能还会为所有消息添加一个全局列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-01T10:08:36.780

Redis的基本数据类型不支持多条件查询、全文搜索等，因此我们对Redis源码进行了修改，通过辅助索引将Redis转化为可以像SQL数据一样使用的数据库。

这个项目主页是[https://oncedb.com](https://oncedb.com)

OnceDB 不会改变 Redis 的数据存储结构。Redis数据库文件可以直接在OnceDB中操作，然后返回Redis使用。

# 索引搜索

## 创建索引

全文搜索的性能很差。您可以通过创建索引来提高性能。方法是为索引字段创建有序列表，然后在进行条件查询时对这些有序列表进行交集查询操作。

```
# Create hash data
hmset article:001 poster dota visit 21 key js
hmset article:002 poster dota visit 11 key c
hmset article:003 poster like visit 34 key js
hmset article:004 poster like visit 44 key c 
```

然后我们为上述字段创建索引，权重分数设置为：202000201，一个关于时间的整数，值为文章的ID值

```
# Create indexed
zadd *article.poster:dota 20200201 001 20200201 002
zadd *article.poster:like 20200201 003 20200201 004
zadd *article.key:js 20200201 001 20200201 003
zadd *article.key:c 20200201 002 20200201 004
# "visit" using its value as the weight score
zadd *article.visit 21 001 11 002 34 003 44 004 
```

## 按索引查询

找到 *article.key:js 和 *article.poster:dota 两个索引的交集，并将它们存储在 *tmp1 有序列表中：

```
zinterstore *tmp1 2 *article.key:js *article.poster:dota
> 1 
```

然后*tmp1存储满足key=js和poster=dota条件的ID集合：

```
zrange *tmp1 0 -1
> 001 
```

可以使用 zrangehmget 命令打印对应的 HASH 值：

```
zrangehmget *tmp1 0 -1 article: key poster
1) 001
2) 40400402
3) js
4) dota
5) 
6) 
```

结果与直接全文搜索key = js 和poster = dota 一样

```
hsearch article:* key = js poster = dota
1) article:001
2) js
3) dota 
```

## 搜索范围

比如要搜索访问次数在20到30之间的数据，key=js，可以通过控制权重来实现

创建临时索引，只取*article.visit的权重和key=js的数据

```
zinterstore *tmp2 2 *article.key:js *article.visit weights 0 1
> 2 
```

获取 20 到 30 之间的数据

```
zrangebyscore *tmp2 20 30
> 001 
```

您可以使用 zrangehmgetbyscore 打印相应的哈希数据：

```
zrangehmgetbyscore *tmp2 20 30 article: key visit
1) 001
2) 21
3) js
4) 21
5) 
6) 
```

结果与使用全文搜索的结果一致：

```
hsearch article:* visit >= 20 visit <= 30 key = js
1) article:001
2) 21
3) 
4) js 
```

因为有两个相同的字段，visit> = 20 visit <= 30，所以搜索结果只会输出一个，第三行重复的字段会输出空。

更多OnceDB扩展指令可查看：OnceDB中[的搜索、查询、计算、求和指令](https://oncedb.com/wiki/view/oncedb-server/data_instruction)

# 自动索引

Redis索引的创建和维护不是很方便。OnceDB 可以选择在数据修改时自动创建辅助索引。

## 创建索引：upsert schema field operator value ...

使用 upsert / insert / update 指令和特殊运算符自动创建索引：

上面的例子可以写成：

```
upsert article id @ 001 poster ? dota visit / 21 key ? js
upsert article id @ 002 poster ? dota visit / 11 key ? c
upsert article id @ 003 poster ? like visit / 34 key ? js
upsert article id @ 004 poster ? like visit / 44 key ? c 
```

操作员：

> @：主键 ?：组索引 /：排序索引

操作后自动创建索引： *article *article.poster:dota *article.poster:like *article.visit *article.key:js *article.key:c

## 多条件索引查询：查找schema from to field operator value ...

对于有索引的字段，可以使用 find 命令通过索引字段进行查询。例如查询：key = js 和poster = dota 的数据。您可以使用 ”？” 表示这两个字段是分组索引：

```
find article 0 -1 key ? js poster ? dota
1) 1
2) article:001
3) js
4) dota 
```

1代表数据总量。如果为-1，则表示使用全文搜索，性能较差。

## 索引范围查询

您可以添加 @ 来指定索引范围，并使用 + 来指定将哪个索引字段用于分数权重范围。

```
find article 0@20 -1@30 key ? js visit /+ *
1) 1
2) article:001
3) js
4) 21 
```

## 删除索引

OnceDB 不存储索引定义。删除时需要手动指明哪些字段包含索引。您需要指定字段名称和索引运算符。

```
remove article @ 001 key ? poster ? visit / 
```

您还可以自定义索引名称和权重分数。更多说明请参见：[OnceDB数据修改和查询帮助文档](https://oncedb.com/wiki/view/oncedb-server/data_modify_and_query)

# spring - spring 使用 ClassPathXmlApplicationContext 访问属性文件值

> ID：11279115
> 
> 赞同：1
> 
> 时间：2012-07-01T02:21:09.133
> 
> 标签：spring

如果我使用`ClassPathXmlApplicationContext`

有没有办法通过使用来获得它`x = context.getBean("") and then x.getProperty("firstName")`？

我想在主类中使用它，所以我不想使用@Value 注入它

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:44:56.950

是的，有一种方法可以将其作为 bean 访问。

为此，在您的上下文文件中，在 utils 下定义您的属性 bean。就像是：

```
<util:properties id="myProps" location="classpath:server.properties" /> 
```

确保您有必要的模式`xmnls`和`xsi`声明

```
xmlns:util="http://www.springframework.org/schema/util" 
```

并且对于`xsi`

```
http://www.springframework.org/schema/util/spring-util-3.0.xsd 
```

现在您所要做的就是将 bean 加载到`Properties`对象

```
Properties x = context.getBean("myProps"); 
```

你很高兴去..！

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:35:38.087

```
Properties props = PropertiesLoaderUtils.loadProperties(new ClassPathResource("your_file_path")); 
```

或者您可以使用[ResourceBundle](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html)。

# python - 在 Python 中获得多个范围内的每个可能组合的最佳方法是什么？

> ID：11279119
> 
> 赞同：0
> 
> 时间：2012-07-01T02:22:55.640
> 
> 标签：python

假设我有以下代码来收集所有可能的组合。

```
abArray = []
for a in range(minA, maxA, aStep):
  for b in range(minB, maxB, bStep):
    if a < b: continue
    abArray.append((a,b)) 
```

有没有一种更有效的方法来存储所有可能的条件组合，而不是使用嵌套的 for 循环？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T02:26:54.113

我想你正在寻找`itertools.product`：

```
from itertools import product
abGenerator = product(range(minA, maxA, stepA), range(minB, maxB, stepB))
abArray = (i for i in abGenerator if i[0] < i[1]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T02:26:59.823

首先，您可以使用生成器而不是显式列表。如果您只是要迭代它们，您可能不需要存储所有组合。其次，您可以缩短内部循环：

```
def range_combos(minA, maxA, aStep, minB, maxB, bStep):
  for a in range(minA, maxA, aStep):
    for b in range(minB, min(a, maxB), bStep):
      yield (a,b) 
```

然后稍后：

```
for a, b in range_combos(...):
    # etc... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T14:48:31.000

Joel 的答案是最简单的，但可能效率低下（它会生成所有可能的组合，然后剔除那些与约束不匹配的组合）。

Ned 的效率更高，但您必须手动编码所有循环和约束。

如果您有多个范围，您可能希望查看该`constraint`模块：

```
import constraint

p = constraint.Problem()
p.addVariable('a', range(minA, maxA, aStep))
p.addVariable('b', range(minB, maxB, bStep))
p.addConstraint(lambda a,b: a >= b, ['a','b'])

abArray = [(sol['a'], sol['b']) for sol in p.getSolutionIter()] 
```

请注意，这不是一个很好的例子；由于只有在所有基础变量都已知后才能评估功能约束，所以这基本上等同于 Joel 的解决方案。只有开始使用更多变量和各种交互约束时，这种方法的真正威力才会变得明显。

# c++ - 'a' 和 "a" 和有什么不一样？

> ID：11279126
> 
> 赞同：16
> 
> 时间：2012-07-01T02:25:03.107
> 
> 标签：c++, string, char

我正在学习 C++ 并且有一个我找不到答案的问题。

`char`常量（使用单引号）和字符串常量（使用双引号）有什么区别？

我所有与 char 数组 vs 相关的搜索结果`std::string`。我追求和之间的`'a'`区别`"a"`。

执行以下操作会有所不同：

```
cout << "a";
cout << 'a'; 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-01T02:29:11.203

`'a'`是字符文字。它是 type `char`，在大多数系统上的值为 97 （字母的 ASCII/Latin-1/Unicode 编码`a`）。

`"a"`是一个字符串文字。它的类型`const char[2]`是 ，并且是指一个由 2 组成的数组，`char`其中包含`'a'`和`'\0'`。在大多数（但不是全部）上下文中，对的引用`"a"`将被隐式转换为指向字符串第一个字符的指针。

两个都

```
cout << 'a'; 
```

和

```
cout << "a"; 
```

碰巧产生相同的输出，但出于不同的原因。第一个打印单个字符值。第二个连续打印字符串的所有字符（终止字符除外`'\0'`）——恰好是单个字符`'a'`。

字符串文字可以任意长，例如`"abcdefg"`. 字符文字几乎总是只包含一个字符。（您可以使用*多字符文字*，例如`'ab'`，但它们的值是实现定义的，而且很少有用。）

（在 C 中，你没有问过，`'a'`是 type `int`，并且`"a"`是 type `char[2]`(no `const`)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T02:28:43.163

`"a"`是一个字符数组，恰好只包含一个字符，或者如果你`\0`在最后算上两个字符。`'a'`是一个字符。他们不是一回事。例如：

```
#include <stdio.h>

void test(char c) {
    printf("Got character %c\n", c);
}

void test(const char* c) {
    printf("Got string %s\n", c);
}

int main() {
    test('c');
    test("c");
} 
```

这将使用两种不同的重载；有关演示，请参见[http://codepad.org/okl0UcCN 。](http://codepad.org/okl0UcCN)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T02:28:52.110

单引号用于包围字符文字。双引号用于包围字符串（字符数组）文字。

许多接口，例如`cout <<`，都接受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T02:32:18.363

单引号`'a'`是类型的文字`char`。双引号`"a"`是`char`s 的以 null 结尾的字符串文字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-16T10:53:09.243

*   "a" -> 它表示它是一个字符串。在 c++ 中，字符串是字符数组的集合。
*   所以字符串由**分隔符'\0'**终止，它表示字符串的结尾。
*   所以它的大小将是 2 因为“a”为 1 字节，“\0”为 1 字节

如果是 'a'-> 它是单个字符。所以它的大小是1字节。

```
char str[]="a"; 
```

或者

```
char *ptr = "c";

for  'c' -> char c = 'a'; 
```

或者我们也可以写

```
char c = 97; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-06T06:18:28.123

'a' - 1) 字符常量 2) 大小 - 1 个字符 3) 不是字符数组的集合

"a" -1) 字符串字面量 2) 大小 - 2 个字符 3) 字符数组的集合

# php - Doctrine2 多对多不返回数组

> ID：11279132
> 
> 赞同：2
> 
> 时间：2012-07-01T02:26:55.087
> 
> 标签：php, doctrine-orm

如果我定义了以下类，

```
class Category {

    /**
     *
     * @var integer $id
     * @Column(name="id", type="integer",nullable=false)
     * @Id
     * @GeneratedValue(strategy="IDENTITY")
     */
    protected $id;

     /**
     *
     * @ManyToMany(targetEntity="Tag")
     * @JoinColumn(onDelete="SET NULL")
     */
    protected $tags;
} 
```

我不应该能够通过以下方式获取与该类别相关的所有标签：

```
$categoryTags = $category->getTags(); 
```

上述赋值后 $categoryTags 中的对象是 Doctrine\ORM\PersistentCollection 类型，而我希望它是一个数组。

我使用 sql 命令手动在 category_tag 表中添加了关联值，但我可以看到它们是有效的。

我的标签类如下所示：

```
class Tag extends Tag{

    /**
     *
     * @var integer $id
     * @Column(name="id", type="integer",nullable=false)
     * @Id
     * @GeneratedValue(strategy="IDENTITY")
     */
    protected $id;

    /**
     * @Column(type="string",length=60,nullable=false)
     * @var string
     */
    protected $tag;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T01:28:57.177

Doctrine 不返回关联实体集合的简单数组。相反，它返回`Doctrine\Common\Collections\Collection`.

您可以像使用数组一样使用它们，因为它们扩展了[`Countable`](http://php.net/manual/en/class.countable.php),[`IteratorAggregate`](http://php.net/manual/en/class.iteratoraggregate.php)和[`ArrayAccess`](http://php.net/manual/en/class.arrayaccess.php)接口。

如果你*真的*需要一个数组（我想不出原因），你可以使用该`toArray()`方法。

请阅读文档以了解为什么 Doctrine 不使用简单数组

*   [http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html?highlight=many-to-many#collections](http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html?highlight=many-to-many#collections)
*   [http://doctrine-orm.readthedocs.org/en/2.0.x/reference/architecture.html#persistent-fields](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/architecture.html#persistent-fields)

# google-apps-script - 使用 Google API 获取登录位置

> ID：11279134
> 
> 赞同：0
> 
> 时间：2012-07-01T02:27:07.483
> 
> 标签：google-apps-script

我正在尝试为一家公司编写一个小工具，通过它我可以记录我的员工在其场所内登录/退出 Gmail（不是移动登录）的时间。它几乎可以自动化他们目前拥有的时钟应用程序。为此，我需要能够在不使用任何其他第三方服务的情况下获取 IP 地址/经纬度。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T05:49:13.373

我能想到的唯一方法是让员工访问其中嵌入了 AppsScript 的 Google 协作平台页面，然后您可以记录时间。

如果您不想这样做并且只依赖于登录到 gmail，则可以使用 Gmail 的上下文小工具来执行此操作，但这超出了 Apps 脚本的范围。

# ios - 动态调整 UILabel 的大小

> ID：11279140
> 
> 赞同：0
> 
> 时间：2012-07-01T02:29:51.110
> 
> 标签：ios, uilabel

在我的应用程序中，我有 4 个标签，我需要将它们添加到前一个标签的正下方。问题是这些标签是动态填充的，我不知道标签的大小。

例如，在下面的代码中，我有 2 个标签 - myLabel 和 titleLabel。我需要将 titleLabel 粘贴到 myLabel 的正下方，但问题是后者的高度不同。所以我不能给出titleLabel的y坐标。

```
CGRect labelFrame = CGRectMake(22, 50, 280, 150);
UILabel *myLabel = [[UILabel alloc] initWithFrame:labelFrame];
[myLabel setText:finalIngredients];
[myLabel setBackgroundColor: [UIColor lightGrayColor]];
[myLabel setFont:[UIFont fontWithName:@"Helvetica" size:15]];
[myLabel setNumberOfLines:0];
[myLabel sizeToFit];
[self.view addSubview:myLabel];

CGRect titleLabelFrame = CGRectMake(0, 25, 400, 15);
UILabel *titleLabel = [[UILabel alloc] initWithFrame:titleLabelFrame];
[titleLabel setText:title];
[self.view addSubview:titleLabel]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T03:05:17.790

利用`myLabel.bounds.size.height`和`myLabel.frame.origin.y`分别获取 的高度和起始 y 坐标`myLabel`。`sizeToFit`据我所知，当您调用（例如）时，它们会动态变化。在您的情况下，您可以简单地更改线路

```
CGRect titleLabelFrame = CGRectMake(0, 25, 400, 15); 
```

到

```
CGRect titleLabelFrame = CGRectMake(0, myLabel.frame.origin.y + myLabel.bounds.size.height, 400, 15); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T02:46:47.587

用这个动态计算高度：

```
 CGSize size = [finalIngredients sizeWithFont:[UIFont systemFontOfSize:15]
      constrainedToSize:CGSizeMake(100, 200)
          lineBreakMode:UILineBreakModeWordWrap]; 
```

这里 finalIngredients 是你的字符串。你只需要提供你想要的标签的宽度来代替 100。

根据上一个或下一个标签动态计算标签的框架

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T02:32:53.290

如果文本是动态的，那么你有一个修改文本的函数是理所当然的。

在该函数内部，计算内部新修改文本的高度`myLabel`。然后将 y 位置设置`titleLabel`为`myLabel`'sx 位置 +`myLabel`新计算的高度 + 您在它们之间需要的任何缓冲空间。:)

# android - Android“第一次”应用用户教程

> ID：11279144
> 
> 赞同：6
> 
> 时间：2012-07-01T02:30:36.890
> 
> 标签：android, android-fragments, android-viewpager

我正在尝试为我的应用程序创建一个包含四个窗格的开放教程，但由于我是 Android 新手，因此我想确保在将此任务标记为“完成”之前考虑所有选项。我知道三种方法，我只能真正做到一种。本教程没有任何要求，但一些“想要的功能”将是每个窗格的滑动动作，图像和底部（导航圈）不动，顶部的标题不动。

## 单程

**4 个独立的活动和 4 个独立的布局**

![第一次尝试](../Images/b742b8e2ac65f9b11468e4224685f62e.png)

红色圆圈的项目是`textViews`水平居中并从顶部推开的项目。

白色圆圈的项目是`imageViews`水平和垂直居中的项目。

紫色圆圈是`imageViews`水平居中并从底部推开的。

## 第二种方式

**一项活动中的 4 个片段**

片段很难学习，但我对它们的了解越多/查看它们的教程，它们似乎只真正用于平板电脑。这会是实现这一目标的有效方法吗？

## 第三条路

**浏览器？**

[http://android-developers.blogspot.com/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

我以前从未使用过它，但我知道这是一种选择。

## 最后的问题

哪种方式更常用/什么是正确的实现方式？有没有办法只让中间部分（图像）滑入，但是一旦图像滑入，标题（顶部）和导航图像（底部）就会改变？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T03:53:09.423

这是一些以 ViewPager 方式执行的代码（这正是您的操作方式）

```
package com.test.viewpager;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.TextView;

public class WalkthroughActivity extends Activity {

    private static final int MAX_VIEWS = 5;

    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.walkthrough_activity);
        mViewPager = (ViewPager) findViewById(R.id.view_pager);
        mViewPager.setAdapter(new WalkthroughPagerAdapter());
        mViewPager.setOnPageChangeListener(new WalkthroughPageChangeListener());
    }

    class WalkthroughPagerAdapter extends PagerAdapter {

        @Override
        public int getCount() {
            return MAX_VIEWS;
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view == (View) object;
        }

        @Override
        public Object instantiateItem(View container, int position) {
            Log.e("walkthrough", "instantiateItem(" + position + ");");
            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View imageViewContainer = inflater.inflate(R.layout.walkthrough_single_view, null);
            ImageView imageView = (ImageView) imageViewContainer.findViewById(R.id.image_view);

            switch(position) {
            case 0:
                imageView.setImageResource(R.drawable.image1);
                break;

            case 1:
                imageView.setImageResource(R.drawable.image2);
                break;

            case 2:
                imageView.setImageResource(R.drawable.image3);
                break;

            case 3:
                imageView.setImageResource(R.drawable.image4);
                break;

            case 4:
                imageView.setImageResource(R.drawable.image5);
                break;
            }

            ((ViewPager) container).addView(imageViewContainer, 0);
            return imageViewContainer;
        }

        @Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            ((ViewPager)container).removeView((View)object);
        }
    }

    class WalkthroughPageChangeListener implements ViewPager.OnPageChangeListener {

        @Override
        public void onPageScrollStateChanged(int arg0) {

        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {

        }

        @Override
        public void onPageSelected(int position) {
            // Here is where you should show change the view of page indicator
            switch(position) {

            case MAX_VIEWS - 1:
                break;

            default:

            }

        }

    }
} 
```

这是我的`walkthrough_activity.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <android.support.v4.view.ViewPager
        android:id="@+id/view_pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/screen_navigation_button" />

    <!--  This TextView will not swipe when you swipe in the ViewPager -->

    <TextView
        android:id="@id/screen_navigation_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:gravity="center"
        android:padding="10dip"
        android:text="Hello, Walkthrough!"
        android:textSize="18sp" />

</RelativeLayout> 
```

就这么`walkthrough_single_view.xml`简单——

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/image_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T03:10:28.470

**ViewPagerIndicator**

我建议你使用 ViewPager 方式，试试 Jake Wharton 开发的 ViewPagerIndicator 库，因为它还提供了几种不同的选项卡类型供你选择，而且非常容易设置样式。

[https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

ViewPagerIndicator 应用程序的示例代码也在[这里](https://github.com/JakeWharton/Android-ViewPagerIndicator/tree/master/sample)

与 Android 支持库中的 ViewPager 兼容的分页指示器小部件，以提高内容的可发现性。

[在Google Play](https://play.google.com/store/apps/details?id=com.viewpagerindicator.sample)上试用示例应用程序。

# java - 将用户输入文本添加到 .txt 文件

> ID：11279146
> 
> 赞同：-1
> 
> 时间：2012-07-01T02:31:30.220
> 
> 标签：java, text

我正在尝试通过询问用户所说的信息来更新包含电影列表和一些信息的 .txt 文件。该文件的组织方式如下：

```
0000-Movie Title Goes Here-9.99-ClientID
0001-Same thing here-9.99-CLIENTID2 
```

等等。

这是我正在使用的代码：

```
 BufferedWriter output = new BufferedWriter(new FileWriter("movies.txt", true));
    System.out.println("Inserte numero de la pelicula:\n");
    String pelNum = CTeclado.ReadString();
    System.out.println("Inserte el titulo de la pelicula:\n");
    String pelName = CTeclado.ReadString();
    System.out.println("Inserte el precio de la pelicula:\n");
    String pelPrice = CTeclado.ReadString();
    output.append(pelNum + "-" + pelName + "-" + pelPrice + "-null");
    output.close();
    ReadM();
    System.out.println("Pelicula agregada!\n");
    MainMenu(); 
```

（CTeclado 的东西用于读取输入）
这编译没有错误，但是，实际文件没有变化......我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:31:27.127

我认为您应该尝试以下代码

```
 PrintStream output = new PrintStream(new File("movies.txt"));
 output.append(pelNum + "-" + pelName + "-" + pelPrice + "-null").append("\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T03:26:06.907

使用`output.write("\n" + "stuff goes here)`就像@fireshadow52 说的那样工作。
`output.append("\n" + "stuff")`也有效，必须确保 .txt 文件恰好在行尾结束（而不是在新行上）

# php - 排名 MongoDB 搜索

> ID：11279150
> 
> 赞同：1
> 
> 时间：2012-07-01T02:32:32.730
> 
> 标签：php, mongodb, search

好的，这听起来很简单，但不知道该怎么做。

我正在运行 PHP 5.3.x，这就是我想要做的。我知道 find() 命令。但我不确定如何对返回的 JSON 进行排名。

这是我们存储博客的方式

```
{
"title":"this is a title";
"body":"this is the body";
"author":"ROB"
"keywords":[{'auto';'music';'fun'}]
"country":"USA"
"dateadded":"07-11-2011";
} 
```

我想要做的是以下顺序 关键字匹配 100% - 0% 作者如果作者经常谈论这个关键字，那么帖子的标题搜索分数会更高 1（意思是匹配用户搜索的顺序，按日期最新到最旧

请让我知道这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T02:36:57.750

Mongo 是一个文档存储而不是搜索引擎。我建议您查看 SOLR 来索引您的文档以进行搜索/相关性并将文档本身存储在 mongo 中。对于博客，您可能可以放弃 mongo 并将所有内容存储在 SOLR 中，但对于大型文档集，这将是一个坏主意。

# clojure - Clojure：单机、Clojure <-> ClojureScript、Ring、websocket通信

> ID：11279155
> 
> 赞同：5
> 
> 时间：2012-07-01T02:33:14.557
> 
> 标签：clojure

## 语境

我喜欢 Clojure。比起 ClojureScript，我更喜欢 Clojure。

比起 Swing，我更喜欢 DOM。

我打算主要在 Clojure 中构建一个 GUI 应用程序，但使用 Web 浏览器的 DOM 作为 GUI。[我尝试过 JavaFX，它经常在我身上崩溃，我不喜欢它。]

现在，我熟悉 ring + ajax requests + setup web socket 一次。我想知道的是——我能想出的最低延迟设置是多少？

客户端（网络浏览器）和服务器（clojure 的东西）都在同一台机器上运行。我在机器上有root访问权限。我只想设置最小延迟通信通道。

## 问题：

当我完全控制机器时，如何设置 clojurescript / clojure 之间的最小延迟通信？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:45:54.767

本地主机上的 Websockets（现代浏览器支持的最快的双向方法）（在大多数合理的平台上使用共享内存 IPC 或类似的东西，避免了大部分网络堆栈）。

# php - 简化解析 json 响应

> ID：11279159
> 
> 赞同：0
> 
> 时间：2012-07-01T02:34:00.067
> 
> 标签：php, html, arrays, json, parsing

首先，这是我一直在处理的 JSON 响应：

```
{  "status": "ok",
 "permalinks": [
"http:\/\/localhost\/blog\/2012\/06\/",
"http:\/\/localhost\/blog\/2012\/04\/",
"http:\/\/localhost\/blog\/2012\/03\/",
"http:\/\/localhost\/blog\/2011\/10\/"
 ],
 "tree": {
"2012": {
  "06": "221",
  "04": "2",
  "03": "3"
},
"2011": {
  "10": "3"
}
}
} 
```

PHP 用于将其格式化为 DIV 中的 HTML UL：

```
function DisplayResponse(){
$baseref = 'http://localhost/' ;
$url = $baseref . 'api/get_date_index';
$r = file_get_contents( $url ) ;
if( $r !== false ){
    $r = json_decode($r,true);
    $t = $r['tree'] ;
    echo '<div class="sidebar">' ;
    echo '<h3>Response</h3>' ;
    echo '<ul class="sidebar-list">' ;
    for ( $y = 0 ; $y <= 2 ; $y++ ){
        if ( $y == 0 ){
            for ( $m = 12 ; $m >= 0 ; $m-- ) {
                $d = mktime ( 0, 0, 0, $m, 1, Date("Y") ) ;
                $du = Date("Y", $d ) ;
                $dm = Date("M", $d ) ;
                if ( $m < 11 ){
                    $mm = sprintf("%02d",$m) ;
                    if ( $t[$du][$mm] != NULL ){

                        echo '<li><a href="' . $baseref . 'blog/' . $du . '/' . $mm
                            . '/">' . $dm . ',&nbsp;' . $du . '</a></li>' ;
                    }
                } else {
                    if ( $t[$du][$m] != NULL ){

                        echo '<li><a href="' . $baseref . 'blog/' . $du . '/' . $mm
                            . '/">' . $dm . ',&nbsp;' . $du . '</a></li>' ;
                    }
                }
            }
        } else {
            for ( $m = 12 ; $m >= 0 ; $m-- ) {
                $d = mktime ( 0, 0, 0, $m, 1, ( Date("Y") - $y) ) ;
                $du = Date("Y", $d );
                $dm = Date("M", $d ) ;
                if ( $m < 11 ){
                    $mm = sprintf("%02d",$m) ;
                    if ( $t[$du][$mm] != NULL ){

                        echo '<li><a href="' . $baseref . 'blog/' . $du . '/' . $mm
                            . '/">' . $dm . ',&nbsp;' . $du . '</a></li>' ;
                    }
                } else {
                    if ( $t[$du][$m] != NULL ){

                        echo '<li><a href="' . $baseref . 'blog/' . $du . '/' . $mm
                            . '/">' . $dm . ',&nbsp;' . $du . '</a></li>' ;
                    }
                }
            }
        }
    }

    echo '</ul></div><div class="sidebar-bottom"></div>' ;

} 
```

}

输出是在页面部分以降序显示月份和年份行项目的理想结果，但是我如何清理这段代码以便在源代码中漂亮地显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T03:17:56.947

一些技巧：

*   分为三个部分：

    1.  从网站获取数组
    2.  从中提取有趣的部分
    3.  用那部分做展示。

        ```
        $response = get_response();
        $tree = get_tree($response);
        output_tree($tree); 
        ```

*   在您当前的显示代码中，您有很多代码重复。只需压缩任何重复的代码，就像将其放入函数中所建议的那样。当您这样做时，您可能还会意识到大多数代码甚至都不需要。

*   您可以遍历一个数组，甚至在一个数组内：

    ```
    echo "<ul>\n";
    foreach ($tree as $year => $months) {
        foreach ($months as $month => $count) {
            echo "  <li>", $month, ",&nbsp;", $year, "</li>\n";
        }
    }
    echo "<ul>\n"; 
    ```

    这个小例子显示了整个列表，我刚刚创建了链接，这应该可以用于演示目的。

如果您将事物保持小而分开，您会发现创建某些东西会更容易。

# ruby - 如何获取 sample() 返回的元素的索引？

> ID：11279161
> 
> 赞同：0
> 
> 时间：2012-07-01T02:34:43.830
> 
> 标签：ruby

我`Array.sample`用来从数组中返回一个随机元素。

然后我想获取该元素的索引以生成永久链接。有没有内置的方法来做到这一点？还是我需要自己动手？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T02:47:55.273

我认为没有预先烘焙的解决方案，但您可以轻松地制作自己的解决方案。您可以[`sample`](https://ruby-doc.org/core/Array.html#method-i-sample)在索引上使用：

```
i = (0 .. a.length).to_a.sample
e = a[i] 
```

这为您提供了索引`i`和采样元素`e`。或者，由于您只是提取大小为 1 的样本，[`rand`](https://ruby-doc.org/core/Random.html#method-i-rand)因此直接使用并跳过所有[`sample`](https://ruby-doc.org/core/Array.html#method-i-sample)噪音：

```
i = rand(a.length)
e = a[i] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T02:53:48.170

使用[find_index](http://apidock.com/ruby/Array/find_index)怎么样？

如果你有：

```
my_array = [:foo,:qux] 
```

你可以这样做：

```
my_sample = my_array.sample 
```

进而：

```
my_index = my_array.find_index(my_sample) 
```

# php - 我可以从 CakePHP 中的控制器访问哪些模型？

> ID：11279168
> 
> 赞同：0
> 
> 时间：2012-07-01T02:37:36.943
> 
> 标签：php, cakephp

假设我有经典的 Post 模型，并且我也创建了 Author 模型。

我有一些基本问题：

1.  Post 对象是在 PostsController 中自动创建的吗？

2.  为了创建 Post whithin AuthorsController 的实例，是唯一的方法

`$this->Post = ClassRegistry::init('Post');`

请注意，通过执行“$this->Post”，我假设 Post 变量将在这一行中创建。我对吗 ？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T02:41:57.040

查看[模型关联](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)。如果您的关联设置正确，您将能够

```
$this->Author->Post 
```

从 Authorscontroller 访问 Post 模型。如果模型不相关但您仍需要访问它，您可以使用[$uses 数组](http://book.cakephp.org/2.0/en/controllers.html#components-helpers-and-uses)来访问它。

关于你的第一个问题，你是对的。您的所有控制器都扩展了 Appcontroller，它导入了 /lib/ 中的默认蛋糕控制器类。您可以在[此处的 cakePHP 控制器文件](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Controller/Controller.php#L376)的第 376 行看到，在加载了 $uses 数组中给出的所有模型之后，加载了名称等于类名的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:43:35.947

## 您使用数组中的所有模型

您可以访问在[uses 属性](http://book.cakephp.org/2.0/en/controllers.html#Controller::$uses)`$this->MmodelName`中声明的所有模型- 如果未声明此属性，则默认为与控制器对应的模型 - 即->模型。`PostsContorller``Post`

在第一次引用时声明`$uses`为创建/实例化的模型 - 即它们是延迟创建的。

# mongodb - 我可以使用 32 位 mongodb-client 连接到 64 位 mongodb-server 吗？

> ID：11279174
> 
> 赞同：1
> 
> 时间：2012-07-01T02:38:51.140
> 
> 标签：mongodb, nosql

当我使用32位mongodb时，我想升级到64位，但是有些PC不支持64位操作系统，所以我想知道我是否可以使用32位mongodb-client连接到64 -bit mongodb 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T02:43:39.543

连接到服务器时，客户端的体系结构并不重要。他们通过插座说话。在大多数情况下，服务器甚至不知道也不关心客户端是什么。

# c - 函数调用的宏分配

> ID：11279175
> 
> 赞同：1
> 
> 时间：2012-07-01T02:39:17.533
> 
> 标签：c, macros, struct, bit-manipulation

是否可以定义宏 BREF(...)：

```
struct bits
{
    int b0:1;
    int b1:1;
    int b2:1;
    int b3:1;
    int b4:1;
    int b5:1;
    int b6:1;
    int b7:1;
}

#define BREF(var,bit) ????
#define BAR 4
#define ALIAS BREF(foo,BAR)

unsigned char foo; 
```

使得这个声明：

```
ALIAS = 1; 
```

扩展为：

```
((struct bits *)&foo)->b4 = 1; 
```

还有这个：

```
int k = ALIAS; 
```

对此：

```
int k = ((struct bits *)&foo)->b4; 
```

到目前为止，这是我对 BREF(...) 的实现：

```
#define BREF(var,bit) (((struct bits *) &(var))->b##bit) 
```

但是，这仅适用`bit`于文字数字。我希望能够传入一个扩展为数字的宏变量。如何在将 C 预处理器`bit`连接到之前扩展它`b`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T02:47:10.023

诀窍是 C 预处理器仅在宏参数*未与字符串化 ( `#`) 或标记粘贴 ( `##`) 运算符*一起使用时才会展开宏参数。因此，要使其与扩展为数字文字的宏一起使用，请添加一个额外的宏层，如下所示：

```
#define CONCAT(x, y) x ## y
#define BREF(var,bit) (((struct bits *) &(var))-> CONCAT(b, bit)) 
```

有了这个定义，`bit`不再是标记粘贴操作符的直接参数，所以如果它是一个宏，它会在标记粘贴之前被扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T02:48:03.293

您可以使用额外的扩展步骤，如下所示：

```
#define BITATTR(num) b##num
#define BREF(var,bit) (((struct bits *) &(var))->BITATTR(bit)) 
```

# c - 使用 Fscanf 解析特定的输入文件

> ID：11279176
> 
> 赞同：1
> 
> 时间：2012-07-01T02:40:04.210
> 
> 标签：c, parsing, scanf

我一直在尝试使用 fscanf 来读取我的应用程序上的输入文件。

这是输入文件

```
3
Process#1 - 2Kb
3
exec 20

io 5

exec 50

Process#2 - 8Kb

1

exec 100

Process#3 - 8Kb

4

exec 50

io 50

exec 50

io 50 
```

首先，我想阅读第一个“3”，我这样做没有问题。

之后，我需要阅读 # 之后的信息（即 1）和“kb”字符串之后的数字（即 2）。

为什么这个 fscanf 没有这样做？

```
fscanf(inputFile, "Process#%d - %dKb", &id, &mem ); 
```

我该怎么做 ？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T02:46:27.700

可能是因为 in 之后留下的换行符`3`没有被`P`in识别`Process`。

这也是很多人避而远之的原因`scanf()`；它通常更容易使用`fgets()`或相关功能（但*不是* `gets()`！）然后使用`sscanf()`.

* * *

### 演示代码

请注意从`scanf()`. 如果你不这样做，你将不知道什么时候出了问题。请注意，检查也是针对正确的转换次数。

```
#include <stdio.h>
int main(void)
{
    int i;
    int id;
    int mem;

    if (scanf("%d", &i) != 1)
        printf("oops!\n");
    /* With    space - reads past newline on first line */
    /* Without space - prints 'thank goodness!' */
    if (scanf(" Process#%d - %d", &id, &mem) != 2)
        printf("thank goodness!\n");
    return 0;
} 
```

# javascript - 如何更改 Javascript 对象属性的可写可枚举和可配置值？

> ID：11279177
> 
> 赞同：10
> 
> 时间：2012-07-01T02:40:14.087
> 
> 标签：javascript

从节点 repl：

```
foo = { bar: 'baz'};
console.log (Object.getOwnPropertyDescriptor(foo, 'bar')) 
```

返回值：

```
{ value: 'baz',
  writable: true,
  enumerable: true,
  configurable: true } 
```

如何将可写可枚举和可配置更改为 false？这些值叫什么？它们是 ES5.1 的一部分吗？repl 没有输出的还有更多吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-01T02:46:35.567

> *“如何将可写可枚举和可配置更改为 false？”*

```
Object.defineProperty(foo, 'baz', {
    enumerable:false,
    writable:false,
    configurable:false
}); 
```

还有`Object.defineProperties`, 是一样的，只是你可以设置多个属性， 和`Object.create`，它可以让你创建一个新对象，并设置它的原型对象和它的描述符。

> *“这些值叫什么？”*

它们是属性描述符。

> *“它们是 ES5.1 的一部分吗？”*

是的，ES5。

> “*还有其他repl没有输出的吗？”*

更多什么，属性描述符？不。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-11T16:52:15.210

squint：我认为您的回答中有一点打字错误。

你的代码：

```
Object.defineProperty(foo, 'baz', {
enumerable:false,
writable:false,
configurable:false
}); 
```

但第二个参数必须是属性的名称而不是值，所以正确的代码是：

```
Object.defineProperty(foo, 'bar', {
enumerable:false,
writable:false,
configurable:false
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T20:58:09.883

只是想添加这个

您可以在第一次创建对象时更改属性，如下所示：

```
var newObj = Object.defineProperty({}, 'aPropertyName', {
    enumerable:false,
    writable:false,
    configurable:false
}); 
```

您也可以一次更改多个属性：

```
var newObj = Object.defineProperties({}, {
    aPropertyName: {enumerable: false, writable: false, configurable: false},
    anotherPropertyName: {enumerable: true, writable: true, configurable: false},
    finalPropertyName: {enumerable: true, writable: false, configurable: true},
}); 
```

当然，使用前面的方法传入对象名称：

```
Object.defineProperties(objectName, {
    aPropertyName: {enumerable: false, writable: false, configurable: false},
    anotherPropertyName: {enumerable: true, writable: true, configurable: false},
    finalPropertyName: {enumerable: true, writable: false, configurable: true},
}); 
```

# sql-server-2008 - 使用经典 ASP 的 SQL Server 最大事务行插入

> ID：11279178
> 
> 赞同：0
> 
> 时间：2012-07-01T02:40:44.937
> 
> 标签：sql-server-2008, asp-classic

我在将包含 13,000 行的文件中的行插入 SQL Server 2008 数据库时遇到问题。我可以取一小块文件并将其插入就可以了。我已经能够在单个事务中插入多达 4000 行（是的，我正在使用事务），但是当我使用更高的东西时，我得到了服务器 500 错误。

在经典 ASP 中使用 SQLOLEDB 数据库连接在 SQL Server 中提交或回滚的行数是否有限制？如果是这样，我该如何增加它？

如果不是，我应该在 IIS 和 SQL Server 中寻找什么其他东西来确保我可以插入那么多行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T02:49:07.760

1.  我不知道单个事务的 #/rows 中有任何限制（“事务”是 T-SQL“开始传输”/“提交”）。

2.  “经典 ADO”（“经典”ASP 3.0 和 VB6 使用的数据访问 API）有*很多*限制。但坦率地说，我不认为它们中的任何一个都适用于这种情况。

3.  问：您的实际 ADO“插入”是什么样的？你能在这里剪切/粘贴代码吗？

4.  问：您查看过您的 IIS 服务器日志吗？在您的 MSSQL 服务器日志中？是否生成了任何 ADO 异常（您*正在*检测客户端错误，不是吗？）。

# java - 获取网络强度 (RSSI)

> ID：11279191
> 
> 赞同：0
> 
> 时间：2012-07-01T02:44:59.000
> 
> 标签：java, android, eclipse, networking, rssi

我无法在 Android 4.0+ 上获取 RSSI 或网络强度。我使用的当前方法适用于以下任何版本的 android。

这是我正在尝试的...

* * *

```
ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnected()) {
    signalStrengthTextView = (TextView) view.findViewById(R.id.signalStrengthTextView);
    signalStrengthListener = new SignalStrengthListener();  
    ((TelephonyManager)getSystemService(TELEPHONY_SERVICE)).listen(signalStrengthListener,SignalStrengthListener.LISTEN_SIGNAL_STRENGTHS);
    int SIGNAL_STRENGTH_VALUE = 0;
    try {
        SIGNAL_STRENGTH_VALUE = Integer.parseInt(signalStrengthTextView.getText().toString());
    } catch(NumberFormatException nfe) {
} 
```

* * *

该值始终返回 99 而不是正确的 RSSI。任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:01:30.697

并不是说我是电话 API 方面的专家。以下是在超出最后一个范围之前不会更新的值。

```
 SIGNAL_STRENGTH_NONE_OR_UNKNOWN (99)
     SIGNAL_STRENGTH_GREAT (16-32)
     SIGNAL_STRENGTH_GOOD (8-15)
     SIGNAL_STRENGTH_MODERATE (4-7)
     SIGNAL_STRENGTH_POOR (0-3) 
```

希望这会有所帮助...不是解决方案，但可能会有所帮助。

# objective-c - 位于 TabBarController 上方的导航栏

> ID：11279192
> 
> 赞同：1
> 
> 时间：2012-07-01T02:45:02.483
> 
> 标签：objective-c, uitabbarcontroller, uinavigationbar

我希望有一个带有设置按钮的导航栏，无论它位于哪个选项卡上，它都保持在那里。

对不起，我的短信来晚了，

追赶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:06:20.977

如果您只想放置一个带有设置按钮的导航栏，该按钮可以使用 UITabBarController 从任何视图访问，您可以在 AppDelegate 中执行类似的操作 -->

```
YourViewController1 *yourVC1 = [YourViewController1 alloc]  initWithNibName:@"YourViewController1" bundle:nil];
UINavigationController *yourNVC1 = [[UINavigationController alloc] initWithRootViewController:yourVC1];

YourViewController2 *yourVC2 = [YourViewController2 alloc]  initWithNibName:@"YourViewController2" bundle:nil];
UINavigationController *yourNVC2 = [[UINavigationController alloc] initWithRootViewController:yourVC2];

UITabBarController *tabBC = [[UITabBarController alloc] init];
[tabBC setViewControllers:[NSArray arrayWithObjects:yourNVC1, yourNVC2, nil]];

self.window.rootViewController = tabBC; 
```

并且您应该在所有视图上都有一个带有导航栏的标签栏。现在要将设置按钮放置在导航栏中，将其添加到视图控制器中要显示设置按钮的 viewDidLoad 方法 -->

```
UIBarButtonItem *selectBarButton = [[UIBarButtonItem alloc] initWithTitle:@"Settings" style:UIBarButtonItemStyleBordered target:self action:@selector(selectorName:)];
self.navigationItem.rightBarButtonItem = selectBarButton; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T03:05:44.597

在 AppDidFinishLaunching 中：

```
Add Your TabBarcontroller (rootViewController) for UINavigationController 
```

现在在下面添加设置按钮是导航栏中的示例

```
UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" 
style:UIBarButtonSystemItemDone target:nil action:nil];

navigationCOntroller.navigationItem.rightBarButtonItem = rightButton 
```

rightButton 将通过应用程序可见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T02:49:36.523

你可以做的是将 UIToolBar 拖到你的故事板控制器上，并在那里设置你想要的按钮和动作。你可以让你的所有控制器从同一个基类扩展，这样就不必重复你的代码，如果你觉得这个工具栏更令人愉悦，你也可以在代码中实例化这个工具栏。

问题在于使用导航时，导航栏将替换/重叠此工具栏。

```
UIToolbar *myToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 44)];

UIBarButtonItem *myButton = [[UIBarButtonItem alloc] initWithTitle:@"Title" 
                                                             style:UIBarButtonItemStyleBordered 
                                                            target:self
                                                            action:@selector(myAction:)];

[myToolbar setItems:[NSArray arrayWithObjects:myButton, nil]];

[self.view addSubview:myToolbar]; 
```

# android - Android 相当于 UIEdgeInset

> ID：11279193
> 
> 赞同：0
> 
> 时间：2012-07-01T02:45:27.057
> 
> 标签：android, android-layout, drawable

我有一个圆角的图像。我需要在不扭曲角落的情况下拉伸图像。（基本上我只是想拉伸中间）

在iOS中，我会做一些类似的事情

```
[[UIImage imageNamed:@"foo.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(5, 5, 5, 5)]; 
```

我将如何在android上做同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T03:01:42.650

这可以通过使用 9-patch drawable 在 Android 中完成，并指定图像的可拉伸区域以获取更多详细信息，您可以查看 Android 开发者[网站上的文档](http://developer.android.com/tools/help/draw9patch.html)

# c++ - 用于进程/任务调度的简单离散事件模拟库（C++）？

> ID：11279195
> 
> 赞同：5
> 
> 时间：2012-07-01T02:45:58.723
> 
> 标签：c++, events, simulation, scheduler, des

简单的问题：我构建了一个准处理器模拟器，它采用优先级图，确定优先级（和“就绪”指令），在可用功能单元上安排任务等。几乎是一个非常基本的模拟器。

但我意识到我应该在 DES 引擎之上构建它，因为我没有能力（除了设置一个标志并在每个“时钟滴答”上检查每个节点）说“在 10 个周期内，执行此操作”（即在预定义的时间发出信号并处理应该在未来发生或满足预定标准的事件）。

我显然可以自己实现这个；构建了一个“事件”类，将它们放在队列中，并在每个周期的结束（或开始）时检查队列，看看那里有什么，但我认为重新发明轮子没有意义。

所以复杂的网络模拟器显然是矫枉过正的。我不需要花哨的建模、排队或类似的东西。我需要的只是一个内置时钟，以及设置事件发生的能力，当事情发生时引发标志等，如上所述。

免费软件和 C++ 会很棒。

有人有想法么？（由于其他一些相关的问题，我最接近的是一种叫做 SIMLIB 的东西。）

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:03:48.840

您可以尝试开放虚拟平台 ( [OVP](http://www.ovpworld.org/) )。它似乎提供了您正在寻找的模拟器类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:09:56.510

试试 SystemC，它是一个免费软件库。我会警告它不是“开源的”，因为许可证不兼容 FOSS。

# apache - 我需要一个 apache 服务器名设置吗？

> ID：11279198
> 
> 赞同：6
> 
> 时间：2012-07-01T02:46:37.980
> 
> 标签：apache, apache2, apache-config

我不确定 SO 是否适合提出这个问题 - 如果不是，请告诉我。我想到了超级用户，但它似乎不太符合他们的常见问题规范。

无论如何 - 问题！如果我只是使用服务器为单个网站提供服务，是否需要在我的 apache2.conf 文件中输入 ServerName 值？如果是这样，我应该将其设置为什么？

我正在遵循本指南：

[http://meppum.com/2009/jan/17/installing-django-ubuntu-intrepid/](http://meppum.com/2009/jan/17/installing-django-ubuntu-intrepid/)

它建议我在我的 apache2.conf 文件中设置“SeverName”设置。我检查并找到了这篇讨论“ServerName”的文章

[http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_: *Ch20* :_The_Apache_Web_Server](http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_%3a_Ch20_%3a_The_Apache_Web_Server)

这很有趣，但它并没有真正告诉我*何时*需要设置 ServerName。'据我判断，我只有在做某事时才需要它。domainname.com，比如，answers.yahoo.com

是这样吗？如果不是，那么服务器名称（例如，一个名为 www.yahoo.com 的域，例如 192.0.0.1）是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-28T10:46:38.293

如果服务器托管单个网站，则不必使用 VirtualHosts，因此不必定义 ServerName，但建议这样做。

如果您不这样做，Apache 将尝试根据执行反向 DNS 查找的服务器 IP 找出主机名。

从[Apache 文档](http://httpd.apache.org/docs/2.2/mod/core.html#servername)：

> ServerName 指令设置服务器用来标识自己的请求方案、主机名和端口。这在创建重定向 URL 时使用。
> 
> 此外，在使用基于名称的虚拟主机时，ServerName 用于（可能与 ServerAlias 结合使用）来唯一标识虚拟主机。
> 
> 例如，如果托管 Web 服务器的机器的名称是 simple.example.com，但该机器也有 DNS 别名 www.example.com，并且您希望 Web 服务器被这样标识，则应使用以下指令：
> 
> ```
>  ServerName www.example.com 
> ```
> 
> ServerName www.example.com 如果未指定 ServerName，则服务器尝试通过对 IP 地址执行反向查找来推断主机名。如果在 ServerName 中未指定端口，则服务器将使用传入请求中的端口。为了获得最佳可靠性和可预测性，您应该使用 ServerName 指令指定明确的主机名和端口。

回答您的问题：

> 如果我只是使用服务器为单个网站提供服务，是否需要在我的 apache2.conf 文件中输入 ServerName 值？

不，你不这样做，但建议这样做。

> 如果是这样，我应该将其设置为什么？

语法是：`ServerName [scheme://]fully-qualified-domain-name[:port]`

> 是这样吗？

不，不仅如此。

> 如果不是，那么服务器名称（例如，一个名为 www.yahoo.com 的域，例如 192.0.0.1）是什么意思？

`ServerName www.yahoo.com`

# html - 中心 垂直在另一个

> ID：11279204
> 
> 赞同：1
> 
> 时间：2012-07-01T02:47:50.600
> 
> 标签：html, css

我正在尝试使用垂直居中的箭头设置看起来像这样的东西：

![](../Images/dab54bb797ea1383b10bdac5468b3abe.png)

CSS：

```
#arrowdiv {
    width:282px;
    height:61px;
    background-image:url('http://i.imgur.com/RV80I.png');
    margin: 0 auto;
}

#optin {
    height:110px;
    width:960px;
    background-color:#FFFFBF;
    border:1px solid black;
    -moz-border-radius: 15px;
    border-radius: 15px;
    -moz-box-shadow: 3px 3px 4px #000;
    -webkit-box-shadow: 3px 3px 4px #000;
    box-shadow: 3px 3px 4px #000;
    /* For IE 8 */
    -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')";
    /* For IE 5.5 - 7 */
    filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000');
    margin: 0 auto;
} 

#leftdiv {
    width:340px;
    height:108px;
} 
```

​ HTML：

```
<div id="optin">
    <div id="leftdiv">
        <div id="arrowdiv"></div>
    </div>
</div>​ 
```

[http://jsfiddle.net/NzMLd/1/](http://jsfiddle.net/NzMLd/1/)

现在，它只是水平居中，正如您在我的 jsFiddle 中看到的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T03:17:49.227

使用`background-`设置：

```
#arrowdiv {
    width:282px;
    height:61px;
    background-image:url(http://i.imgur.com/RV80I.png);
    background-position: 0 50%;
    background-repeat: no-repeat;
    height: 100%;
    margin: 0 auto;
} 
```

[http://jsfiddle.net/userdude/NzMLd/3/](http://jsfiddle.net/userdude/NzMLd/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T03:13:11.410

由于您有不同 DIV 的固定高度，因此可以将其添加到箭头中：

```
margin-top:23px; 
```

其中 23=(108-61)/2

是的，另一种方法是使用这个

```
background-position: 0 50%;
background-repeat: no-repeat;
height: 100%; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T03:40:37.727

有很多方法可以做到这一点......由于某种原因，你的小提琴对我不起作用，但试试这个作为你的`leftdiv`CSS：

```
#leftdiv {
    width:340px;
    height:108px;
    display: table-cell;
    vertical-align: middle;
} 
```

# ruby-on-rails - 是什么让 Rails 从不输出“Set-Cookie”标头？

> ID：11279205
> 
> 赞同：0
> 
> 时间：2012-07-01T02:47:53.980
> 
> 标签：ruby-on-rails

这是我的`config/application.rb`文件，不知何故我让我的 Rails 不再输出`Set-Cookie`标题，所有会话机制都失败了。

怎么了？

```
module KAPP
  class Application < Rails::Application
    config.cache_store = :dalli_store, 'localhost'
        { :namespace => 'fxs', :expires_in => 1.day, :compress => true }
    config.action_mailer.default_url_options = {:host => "k.tv"}
    config.action_controller.default_url_options = {:host => "k.tv"}
    config.time_zone = 'Beijing'
    config.i18n.default_locale = 'zh-CN'
    config.i18n.available_locales = ['zh-CN', :en]
    config.encoding = "utf-8"
    config.filter_parameters += [:password]
    config.active_record.schema_format = :sql
    config.active_record.whitelist_attributes = true
    config.assets.enabled = true
    config.assets.version = '1.0'
    config.assets.prefix = ""
    config.action_controller.asset_host = nil
    config.active_support.escape_html_entities_in_json = true
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T02:51:26.383

哦，是因为这条恶意线路

`config.assets.prefix = ""`

您永远不会希望将其设置为空字符串。

否则，访问普通页面（如`/`）会导致

`Served asset / - 404 Not Found (8ms)`

但是，页面仍然可以显示，只是没有`Set-Cookie`标题，这使得问题难以识别。

只是设置`config.assets.prefix`为零。

# java - onDrawFrame 未在 Android 上调用

> ID：11279209
> 
> 赞同：6
> 
> 时间：2012-07-01T02:48:20.820
> 
> 标签：java, android

我遇到了渲染器对象似乎根本没有被`onDrawFrame`调用的问题。调试器永远不会在函数内部遇到断点。因此，我的正方形没有绘图。这是代码，如果您需要其他任何内容，请告诉我：

```
public class renderer implements GLSurfaceView.Renderer {

Square square;

public void onDrawFrame(GL10 unused) {
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);
    square.Draw();
}

public void onSurfaceChanged(GL10 gl, int width, int height) {
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);
}

public void onSurfaceCreated(GL10 unused, int width, int height) {
    GLES20.glViewport(0, 0, width, height);

}

public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    square = new Square(5, 5);

} 
```

主要活动是：

```
public class gameActivity extends Activity {
/** Called when the activity is first created. */

private GLSurfaceView mGLView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    staticHolder.context = getApplicationContext();
    mGLView = new GLSurface(this);
    setContentView(mGLView);
}
@Override
protected void onPause() {
    super.onPause();
    // The following call pauses the rendering thread.
    // If your OpenGL application is memory intensive,
    // you should consider de-allocating objects that
    // consume significant memory here.
    mGLView.onPause();
}

@Override
protected void onResume() {
    mGLView.onResume();
}

class GLSurface extends GLSurfaceView
{
    renderer r = new renderer();
    public GLSurface(Context context)

    {
        super(context);

        setEGLContextClientVersion(2);
        setRenderer(r);
        setRenderMode(GLSurfaceView.RENDERMODE_CONTINUOUSLY);
    }
} 
```

}

目前屏幕只是黑色的。是否知道为什么 openGL 不能正确渲染？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T19:51:17.503

好吧，这真的很愚蠢，但一开始没有问题。问题是 Eclipse/Java 不像 C# 和其他语言那样关心歧义（如果我错了，请纠正我）。问题是我设法在不同的位置复制了同一个类，一个更新了另一个没有。最终结果是它抓住了它可以找到的第一个。

吸取的教训，自己注意歧义，因为编译器/解析器不会告诉你！

# xcode4.3 - 发现错误 - 方法调用的参数过多，预 期 1 有 2 - 在应用程序电子邮件中

> ID：11279216
> 
> 赞同：0
> 
> 时间：2012-07-01T02:51:47.720
> 
> 标签：xcode4.3

我的编码似乎有错误，它说有很多 nil 或我需要帮助的东西

```
MFMailComposeViewController *composer = [[MFMailComposeViewController alloc]init];
if ([MFMailComposeViewController canSendMail]) {

    [composer setToRecipients:[NSArray arrayWithObject:@"nicole@aandtlegal.com", nil]];
    [composer setSubject:nil];[composer setMailComposeDelegate:self];
    [composer setMessageBody:nil isHTML:YES];
    [composer setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T03:07:29.377

试试这个代码：

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;
[picker setSubject:@"Hello!"];
NSArray *toRecipients = [NSArray arrayWithObject:@"example@example.com"]; 
[picker setToRecipients:toRecipients];
NSString *emailBody = [NSString stringWithString:@"Hello!"];
[picker setMessageBody:emailBody isHTML:YES];
picker.navigationBar.barStyle = UIBarStyleBlack;
[self presentModalViewController:picker animated:YES];
[picker release]; 
```

# php - Amazon EC2 上的 PHP 脚本可能已缓存

> ID：11279220
> 
> 赞同：1
> 
> 时间：2012-07-01T02:54:09.093
> 
> 标签：php, amazon-ec2

我在 Amazon EC2 实例上有一个 PHP 脚本。我在其中更改了一些内容，但是当我在浏览器中加载它时，输出是相同的。亚马逊是否有某种缓存？我知道东区今天停机了，但我的实例现在运行良好。我已经排除了客户端缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T03:04:30.033

在我们的 ec2 实例中，这种事情发生在 2 个场景中：

1) 我们部署中的错误（例如，puppet 或其他部署工具做了一些有趣的事情）或

2) git : 一个分支没有被推到头部，但是服务器重新部署发生了。

除非您使用的是您所知道的缓存系统，否则没有理由认为 ec2 在后台缓存东西 - ec2 是非常直接地控制和配置的。

# c# - 在 C# 中更改字体？

> ID：11279224
> 
> 赞同：0
> 
> 时间：2012-07-01T02:55:57.473
> 
> 标签：c#, winforms, fonts, visual-c#-express-2010

我正在使用此代码使我的所有文本框都使用相同的字体：

```
 if (textBox1.Font.Underline)
        {
            foreach (Control y in this.Controls)
            {
                if (y is TextBox)
                {
                    ((TextBox)(y)).Font = new Font(((TextBox)(y)).Font, FontStyle.Regular);
                }
            }
        }
        else
        {
            foreach (Control y in this.Controls)
            {
                if (y is TextBox)
                {
                    ((TextBox)(y)).Font = new Font(((TextBox)(y)).Font, FontStyle.Underline);
                }
            } 
```

可以说我单击粗体按钮。文本将变为粗体。当我单击下划线按钮时，文本应该是粗体并带下划线，但它只是带下划线？？？为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T03:52:50.237

`FontStyle`是一个枚举，您可以`Or`将它们一起添加或`Xor`删除。

IE

为现有样式添加下划线：

```
textBox1.Font = new Font(textBox1.Font, textBox1.Font.Style | FontStyle.Underline); 
```

从样式中删除下划线：

```
textBox1.Font = new Font(textBox1.Font, textBox1.Font.Style ^ FontStyle.Underline); 
```

并且您可以通过执行此操作检查 Font.Style 中的枚举。

```
if ((textBox1.Font.Style.HasFlag(FontStyle.Underline)))
{
    textBox1.Font = new Font(textBox1.Font, textBox1.Font.Style ^ FontStyle.Underline);
}
else
{
    textBox1.Font = new Font(textBox1.Font, textBox1.Font.Style | FontStyle.Underline);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T03:17:37.423

你可以尝试使用这样的东西

```
 List<Control> controls = Controls.OfType<TextBox>().Cast<Control>().ToList();
  foreach (Control m in controls)
  {
      if (m.Font.Bold)
      {
          m.Font = new Font(m.Font, FontStyle.Underline);
      }
      else
      {
           m.Font = new Font(m.Font, FontStyle.Bold);
           m.Font = new Font(m.Font, FontStyle.Underline);
      }

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T03:25:47.820

代替

```
((TextBox)(y)).Font = new Font(((TextBox)(y)).Font, FontStyle.Underline); 
```

采用

```
((TextBox)(y)).Font = new Font(((TextBox)(y)).Font.FontFamily, ((TextBox)(y)).Font.Size, FontStyle.Underline); 
```

# ruby-on-rails-3 - 具有嵌套模型和派生列值的 ActiveRecord 查询？

> ID：11279225
> 
> 赞同：0
> 
> 时间：2012-07-01T02:56:40.483
> 
> 标签：ruby-on-rails-3, activerecord

我有以下关系：

```
class Order < ActiveRecord::Base
  has_many :item_selections, :dependent => :destroy
  has_many :inventory_items, :through => :item_selections
end
class InventoryItem < ActiveRecord::Base
  has_many :item_selections, :dependent => :destroy
  has_many :orders, :through => :item_selections
end
class ItemSelection < ActiveRecord::Base
  belongs_to :order
  belongs_to :inventory_item
end 
```

我正在尝试在下面创建此 SQL 查询的 ActiveRecord 等效项，然后将 *total_weight* 和 *total_volume* 列的总和加载到实例变量中：

```
select t1.quantity, t2.volume, t2.weight, 
t2.volume * t1.quantity as total_volume,    
t1.quantity * t2.weight as total_weight
from orders t0
inner join item_selections t1 on t0.id = t1.order_id
inner join inventory_items t2 on t1.inventory_item_id = t2.id
where t0.id = <id_val> 
```

关于使用 ActiveRecord 获取这些值的正确方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:03:44.750

这应该有效：

```
orders = Order.select('orders.*, t1.quantity, t2.volume, t2.weight, t2.volume * t1.quantity as total_volume, t1.quantity * t2.weight as total_weight').joins('inner join item_selections t1 on orders.id = t1.order_id, inner join inventory_items t2 on t1.inventory_item_id = t2.id').where(:id => id_val) 
```

使用这样的自定义选择会添加其他选择作为返回对象的属性，因此您可以引用它们，就好像它们是订单对象的字段一样：

```
@total_volume_sum = orders.sum(:total_volume)
@total_weight_sum = orders.sum(:total_weight) 
```

# jquery - 使用选择菜单时的同位素活性类

> ID：11279226
> 
> 赞同：2
> 
> 时间：2012-07-01T02:56:45.687
> 
> 标签：jquery, plugins, jquery-isotope

我正在使用 Metafizzy 的 Isotope 插件，并将其设置为使用此处所示的选择菜单进行过滤：http: [//jsfiddle.net/trewknowledge/jJZEN/](http://jsfiddle.net/trewknowledge/jJZEN/)

```
 $(function() {

    var $container = $('#container'),
        $select = $('#filters select');

    $container.isotope({
        itemSelector: '.item'
    });

    $select.change(function() {
        var filters = $(this).val();
;
        $container.isotope({
            filter: filters
        });
    });

});​ 
```

我想弄清楚的是，当过滤器变量已经被使用时，我将如何向所选元素添加一个突出显示/活动类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T03:01:38.477

尝试这个：

```
$select.change(function() {
        var filters = $(this).val();
        $('.container div').removeClass('active');
        $(filters).addClass('active');
        $container.isotope({
            filter: filters
        });
}); 
```

[演示](http://jsfiddle.net/jJZEN/17/)

你也可以试试`<option value=".item">All</option>`哪个`<option value="*">All</option>`太慢了。

```
$select.change(function() {
        var filters = $(this).val();
        $('.active').removeClass('active');
        if (filters != '.item') {
            $( filters).addClass('active');
        }
        $container.isotope({
            filter: filters
        });
}); 
```

[演示](http://jsfiddle.net/jJZEN/18/)

# joomla - Joomla - 模块 Div 的多个实例

> ID：11279227
> 
> 赞同：0
> 
> 时间：2012-07-01T02:56:55.333
> 
> 标签：joomla, module, position

我习惯使用 Joomla 1.5，并正在尝试切换到 2.5。

我有 2 个模块在正确的位置，我希望会有 2 个盒子（这是我想要的），每个模块一个盒子。但由于某种原因，它只是将第二个模块添加到第一个框中。

它不是在 if 语句中复制 div (main_top_box, main_mid_box, main_bottom_box) `<?php if($this->countModules('right')) { ?>`，而是将`<jdoc:include type="modules" name="right"/>`命令并排放置。

您可以使用我在 Joomla 1.5 中使用的代码来做到这一点。他们是否删除了此功能？

这是我看到的：

![在此处输入图像描述](../Images/61eaafa1b76ce9aaddb0b47ee98965bb.png)

这是我应该看到的：

![在此处输入图像描述](../Images/a2f4426faec34c5a4d83f641eba0d057.png)

Joomla 代码：

```
 <?php if($this->countModules('right')) { ?>
        <div class="main_top_box">
          <div class="main_mid_box">
            <div class="main_bottom_box">
                <jdoc:include type="modules" name="right"/>
            </div>
          </div>
        </div>
    <?php } ?> 
```

代码输出（来源）：

```
<div class="main_top_box">
  <div class="main_mid_box">
    <div class="main_bottom_box">
      <div class="custom"  >
        <h3>Services</h3>
        <ul>
          <li>Family Law</li>
          <li>Collaborative Law</li>
          <li>Real Estate</li>
          <li>Wills</li>
          <li>Estate Planning</li>
          <li>Estates</li>
        </ul>
        <p> </p>
      </div>
      <div class="custom"  >
        <h3>Test</h3>
        <p>Testing the Right Box</p>
      </div>
    </div>
  </div>
</div> 
```

应该是（来源）：

```
<div class="main_top_box">
  <div class="main_mid_box">
    <div class="main_bottom_box">
        <h3>Services</h3>
        <ul>
          <li>Family Law</li>
          <li>Collaborative Law</li>
          <li>Real Estate</li>
          <li>Wills</li>
          <li>Estate Planning</li>
          <li>Estates</li>
        </ul>
      </div>
  </div>
</div>

<div class="main_top_box">
  <div class="main_mid_box">
    <div class="main_bottom_box">
        <h3>Test</h3>
        <p>Testing the Right Box</p>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T03:34:45.197

你可以通过这些方法做到这一点

1.  更改在模块管理器中相同位置显示模块的顺序。
2.  为两个模块创建单独的模块位置并相应地分配它们。

# javascript - 模糊画布形状的边框

> ID：11279229
> 
> 赞同：0
> 
> 时间：2012-07-01T02:57:24.220
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

如何使画布形状失焦？

我已经看到它是用 webGl 完成的，我希望有一种方法可以用画布和 JS 来完成它？

我希望能够为模糊量设置动画，所以我不能使用图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T03:11:20.997

您将需要一个 Javascript 库。这是一个很好的用途，它允许您在画布上选择 X、Y 和宽度/高度以进行模糊：

[http://www.quasimondo.com/BoxBlurForCanvas/FastBlur.js](http://www.quasimondo.com/BoxBlurForCanvas/FastBlur.js)

这是演示：

[http://www.quasimondo.com/BoxBlurForCanvas/FastBlurDemo.html](http://www.quasimondo.com/BoxBlurForCanvas/FastBlurDemo.html)

# php - Flash/Php/MySQL 注册表

> ID：11279230
> 
> 赞同：0
> 
> 时间：2012-07-01T02:58:05.803
> 
> 标签：php, mysql, flash, registration

对于这个问题，我几乎去过所有可能的论坛（包括这个问题）。我几乎得到了我的问题的答案。问题是似乎没有人能弄清楚我的问题，因为一切看起来都正确，而且对我来说一切看起来也正确。有人可以帮帮我吗？这是我的代码。

闪码：

```
var lvSend:LoadVars = new LoadVars();
var lvReceive:LoadVars = new LoadVars();

register_button.onRelease = function(){
var valid:Boolean = validateForm();
if (valid) {
    //gather information and put in loadvars object
    lvSend.username = username1.text;
    lvSend.password = password1.text;
    lvSend.email = email1.text;
    lvSend.sendAndLoad("register.php", lvReceive, "POST");
    gotoAndStop(1);
}
};
lvReceive.onLoad = function(success:Boolean) {
if (success) {
    username1.text = "";
    password1.text = "";
    email1.text = "";
}
}
function validateForm():Boolean {
if (username1.text == "" || password1.text == "" || email1.text == "") {
    return false;
}
return true;
} 
```

php代码：

[http://i.stack.imgur.com/RXPWb.png](http://i.stack.imgur.com/RXPWb.png) （对不起，链接形式）

请收藏这个或其他东西，直到我得到答案，因为我到处都是，没有人能帮助我。：/顺便说一句，我的数据库中有一些空白条目，但我不知道为什么。另外， lvReceive 函数似乎不起作用，但是当我添加 username1.text = ""; 进入 register_button 函数，它似乎清除了文本字段。请帮我。我将数据库信息留在了 php 文件中，因为我认为我输入的数据库可能是问题所在，但我确实将此 php 代码与 html 文件一起使用，并且工作正常。我会接受任何答案。提前致谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T15:23:57.050

```
lvSend.sendAndLoad("register.php", lvReceive, "POST"); 
```

您将信息放在 lvSend 中而不是 lvReceive 中。也许你应该把信息放在 lvReceive 中：

```
 lvReceive.username = username1.text;
    lvReceive.password = password1.text;
    lvReceive.email = email1.text;
    lvSend.sendAndLoad("register.php", lvReceive, "POST"); 
```

# ruby-on-rails - 模型的布局视图不起作用——Ruby on Rails

> ID：11279235
> 
> 赞同：0
> 
> 时间：2012-07-01T03:00:15.653
> 
> 标签：ruby-on-rails, ruby, views, models

我将不胜感激任何可能出现问题的指针：

```
# Controller
class UsersController < ApplicationController

def index
@users = User.all
end

# View

    <table>
<tr>
  <th>Name</th>
  <th>UID</th>
  <th></th>
  <th></th>
  <th></th>
</tr>

<% for user in @users %>
<tr>
  <td> <%= user.name %> </td>
  <td> <%= user.uid %> </td>
</tr>
<% end %>
</table>   

# Model - generated using: generate model :name :uid
class User < ActiveRecord::Base
  attr_accessible :name, :uid
end 
```

这就是我得到的“ `www.myWebAdress.com/users`”

```
Name UID 
```

为什么缺少用户列表？Rails 控制台显示三个用户。

* * *

这是“show source”生成的 :www.myWebAdress.com/user 的源文件

```
<!DOCTYPE html>
<html>

<head>

</head>

<body  >

</br>
</br>

<div class="container">
</br>
</br>
  <div class="content" align="center">

</br>
</br>

</br>
</br>
   <table>
      <tr>
        <th>Name</th>
        <th>UID</th>
        <th></th>
        <th></th>
        <th></th>
      </tr>

   </table>   
  </div>

</div>

<footer>

</footer>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:21:25.110

不知道是不是这个原因，但你可以尝试更换

```
<% for user in @users %> 
```

和

```
<% @users.each do |user| %> 
```

# java - java：当覆盖方法不抛出时模板方法抛出异常时如何处理设计

> ID：11279237
> 
> 赞同：0
> 
> 时间：2012-07-01T03:00:40.487
> 
> 标签：java

编码时。尝试解决这个难题：

InputStreamDigestComputor 抛出 IOException 时如何设计类/方法？

由于模板方法抛出异常，但覆盖方法不抛出异常，我们似乎无法使用此设计结构。但是如果改变被覆盖的方法来抛出它，会导致其他子类都抛出它。那么对于这种情况有什么好的建议吗？

```
abstract class DigestComputor{

    String compute(DigestAlgorithm algorithm){
        MessageDigest instance;
        try {
            instance = MessageDigest.getInstance(algorithm.toString());
            updateMessageDigest(instance);

            return hex(instance.digest());
        } catch (NoSuchAlgorithmException e) {
            LOG.error(e.getMessage(), e);
            throw new UnsupportedOperationException(e.getMessage(), e);
        }
    }

    abstract void updateMessageDigest(MessageDigest instance);

}

class ByteBufferDigestComputor extends DigestComputor{

    private final ByteBuffer byteBuffer;

    public ByteBufferDigestComputor(ByteBuffer byteBuffer) {
        super();
        this.byteBuffer = byteBuffer;
    }

    @Override
    void updateMessageDigest(MessageDigest instance) {
        instance.update(byteBuffer);

    }

}

class InputStreamDigestComputor extends DigestComputor{

               // this place has error. due to exception. if I change the overrided method to throw it. evey caller will handle the exception. but 
    @Override
    void updateMessageDigest(MessageDigest instance) {
        throw new IOException();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T03:11:07.970

在这种情况下，您的超类并不意味着抛出异常。

在这种情况下，您的子类因此会引发上层软件架构不期望的异常。因此，您可以：

1.  更新所有子类以引发异常。

2.  将整个 Digestor 类框架包装在一个新的类系统中。

3.  （最简单）维护当前代码并简单地将您希望抛出的任何异常包装在 RuntimeException 中。

RuntimeExceptions 是在 java 中抛出异常的惯用方式，编译器或方法签名未检查这些异常，这些异常发生有些意外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T03:29:12.010

正如其他人所建议的那样，最简单的做法是将真正的异常简单地包装在运行时异常中。因此，您不必在 throws 子句中声明异常。如果您有足够的野心，您可以创建自己的 RuntimeException 子类并在更高级别捕获它（这是 hibernate 所做的，它捕获所有抛出的 SQLExceptions 并将它们包装在 DataAccessException 的某个子类中，这是一个运行时异常）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T03:48:31.953

你的要求是精神分裂症。

您必须决定该`DigestComputor.updateMessageDigest`方法是否可以 throw `IOException`。如果您希望这成为可能，那么您必须将其添加到*基类的签名中*。这是强制调用者对`IOException`. 但缺点是您还强制其他子类的调用者处理`IOException`... 这不会发生。

您不能创建一个方法覆盖来引发被覆盖的方法没有的检查异常。这会破坏子类型的可替代性，而 Java 不允许这样做。

它就像一个岔路口。你必须决定走哪条路。你不能同时走两条路。

* * *

但是有一个妥协（有点）：

```
public abstract class Base {
    public abstract void method() throws IOException;
}

public class A extends Base {
    public void method() throws IOException {
        //
    }
}

public class B extends Base {
    public void method() {  // Doesn't throw!!!
        //
    }
} 
```

现在，如果调用者知道它有一个它的实例，`B`可以执行以下操作：

```
Base base = ...
B b = (B) base;
b.method();  // No need to catch or propagate IOException 
```

（IIRC，这样做的能力......即减少在覆盖方法中抛出的异常......在Java 1.5中添加。）

# iphone - iPhone模拟器上OpenGL的简单渐变问题

> ID：11279240
> 
> 赞同：1
> 
> 时间：2012-07-01T03:01:36.587
> 
> 标签：iphone, opengl-es, gradient

[我正在按照 raywenderlich网站上](http://www.raywenderlich.com/3857/how-to-create-dynamic-textures-with-ccrendertexture)的教程进行操作，渐变似乎无法完美运行，仅仅是因为 iphone 模拟器，还是其他原因？我不能用 iPhone 自己试一试。这是图像：

![在此处输入图像描述](../Images/d10870bfaab1cee6f43a54cc23f6a55a.png)

和代码：

```
-(CCSprite *)spriteWithColor:(ccColor4F)bgColor textureSize:(float)textureSize {

    // 1: Create new CCRenderTexture
    CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:textureSize height:screenSize.height];

    // 2: Call CCRenderTexture:begin
    [rt beginWithClear:bgColor.r g:bgColor.g b:bgColor.b a:bgColor.a];

    // 3: Draw into the texture
    glDisable(GL_TEXTURE_2D);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);

    float gradientAlpha = 0.5;    
    CGPoint vertices[4];
    ccColor4F colors[4];
    int nVertices = 0;

    vertices[nVertices] = CGPointMake(0, 0);
    colors[nVertices++] = (ccColor4F){0, 0, 0, 0};
    vertices[nVertices] = CGPointMake(textureSize, 0);
    colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};
    vertices[nVertices] = CGPointMake(0, screenSize.height);
    colors[nVertices++] = (ccColor4F){0, 0, 0, 0};
    vertices[nVertices] = CGPointMake(textureSize, screenSize.height);
    colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};

    glVertexPointer(2, GL_FLOAT, 0, vertices);
    glColorPointer(4, GL_FLOAT, 0, colors);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)nVertices);

    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnable(GL_TEXTURE_2D);

    // 4: Call CCRenderTexture:end
    [rt end];

    // 5: Create a new Sprite from the texture
    return [CCSprite spriteWithTexture:rt.sprite.texture];

} 
```

谢谢

# javascript - 节点 repl 在这里输出什么？

> ID：11279244
> 
> 赞同：0
> 
> 时间：2012-07-01T03:03:05.643
> 
> 标签：javascript, node.js

所有这些属性是什么？它们是属性或方法还是什么？它们看起来像标签。super_、fail、equal（等于什么？）、deepequal，它们是什么意思？您如何访问这些属性|方法|无论它们叫​​什么？它们是特定于节点的吗？

```
// $ node #start the node repl 
// > assert //outputs the below
{ [Function: ok]
  AssertionError: 
   { [Function: AssertionError]
     super_: 
      { [Function: Error]
        captureStackTrace: [Function: captureStackTrace],
        stackTraceLimit: 10 } },
  fail: [Function: fail],
  ok: [Circular],
  equal: [Function: equal],
  notEqual: [Function: notEqual],
  deepEqual: [Function: deepEqual],
  notDeepEqual: [Function: notDeepEqual],
  strictEqual: [Function: strictEqual],
  notStrictEqual: [Function: notStrictEqual],
  throws: [Function],
  doesNotThrow: [Function],
  ifError: [Function] } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T03:18:28.147

它们是 Node`assert`模块的属性和方法：[http ://nodejs.org/api/assert.html](http://nodejs.org/api/assert.html)

# c# - 按年龄对某个范围内的用户进行分组

> ID：11279245
> 
> 赞同：4
> 
> 时间：2012-07-01T03:03:11.773
> 
> 标签：c#, linq, group-by

我有一些数据需要做一些统计。我需要按年龄对用户进行分组。

```
var byAge = displayResult.GroupBy(x => x.Age); 
```

我可以像上面那样做。但是，这给了我 19、20、21 等年龄。我想要的是按 10 岁分组年龄，例如

10-20岁、20-30岁、30-40岁等用户

我怎么能得到那个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T03:04:59.900

您可以通过使用整数除法除以十，然后再乘以十来截断尾随数字。

```
 var byAge = displayResult.GroupBy(x => 10*(x.Age/10)); 
```

介于 0（包括在内）和 10（不包括在内）之间的每个人都将在桶 0 中。从 10 到 20 将在 key 下`10`，从 20 到 30 - 在 key 下`20`，依此类推。

# matlab - 在 Matlab 中写入文件时出现浮点错误？

> ID：11279246
> 
> 赞同：0
> 
> 时间：2012-07-01T03:03:30.697
> 
> 标签：matlab, file-io, floating-point, binary

我不确定我是否遗漏了一些简单的东西，但以下代码失败（a 和 b 应该是相同的）：

```
a=single(2147483584)
f=fopen('test','wb');
fwrite(f,a,'int32')
fclose(f); 
f=fopen('test','rb');
b=fread(f,inf,'int32');
fclose(f)
a
b 
```

输出：

```
a = 
   2.1475e+009
b =
   -2.1475e+009 
```

以下代码成功：

```
a=single(2147483583)
f=fopen('test','wb');
fwrite(f,a,'int32')
fclose(f); 
f=fopen('test','rb');
b=fread(f,inf,'int32');
fclose(f)
a
b 
```

输出：

```
a = 
   2.1475e+009
b =
   2.1475e+009 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:09:04.767

我不太了解 Matlab，但这里发生的事情似乎相当清楚。您正在转换`a`为浮点数，然后将该转换的结果存储为 32 位有符号整数。但最接近整数的单精度 IEEE 754 浮点数`2147483584`是`2147483648.0`, 或`2**31`. 一个 32 位整数只能表示 range 中的值`[-2**31, 2**31-1]`，因此看起来当您将此值写为整数时，它会`2**32`以模数形式给出`-2**31`而不是`2**31`.

相比之下，最接近的单精度浮点数`2147483583`是`2147483520.0`，它*确实*适合 32 位整数。

# ruby - JRuby 关闭 AWT 框架

> ID：11279247
> 
> 赞同：0
> 
> 时间：2012-07-01T03:03:31.657
> 
> 标签：ruby, jruby, awt, jogl

我决定检查 JRuby 和 JOGL，看看我是否可以运行一些图形模拟程序。我已经设置了类路径，并且正确包含了 OpenGL 的东西。按照一些教程，他们建议使用 AWT 框架而不是 Swing 框架，因为 Swing 不支持图形加速（这确实是我正在寻找的）。

但是，我不知道如何从 Ruby 中*关闭*AWT 框架。`Kernel.exit`我有一个 WindowAdapter，当单击框架上的关闭按钮时会触发一个事件。它看起来像这样：

```
class Controller < WindowAdapter
  def windowClosing(event)
    Kernel.exit
  end
end 
```

Frame 用`add_window_listener(Controller.new)`. 当我单击关闭按钮时，该事件成功触发，但它吐出以下错误：

`Exception in thread "AWT-EventQueue-0" org.jruby.exceptions.RaiseException: (SystemExit) exit`

从 Frame 的初始化中调用 Kernel.exit 成功退出程序。所以我不确定为什么从监听器调用它会失败。我知道在java中你可以定义一个匿名的WindowAdapter inline，但我不知道Ruby中的语法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:18:06.287

我做了一些额外的搜索和实验，找到了答案。这似乎是 JVM 中 Ruby 实现的一个怪癖。从 WindowAdapter 内部调用`exit`or是没有用的。`Kernel.exit`

`java.lang.System.exit(0)`但是，调用*确实*有效。我不确定为什么这种区别应该有所作为。我希望`exit`为 Java 系统命令起别名，但它显然不希望这对可能遇到相同问题的其他人有所帮助。

# python - Facebook 的签名请求去哪儿了？谷歌应用引擎python

> ID：11279255
> 
> 赞同：-1
> 
> 时间：2012-07-01T03:06:17.100
> 
> 标签：python, google-app-engine, facebook-authentication

我真的很困惑，因为文档指出，当用户使用 facebook 注册表单从我的网站注册时，我应该收到签名的请求。我不知道在哪里寻找它。任何答复将不胜感激。我在 Google App Engine 中使用 Python，我只是想知道签名请求的发送位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T06:01:57.267

当用户在 facebook 上登录完成后，您的应用将收到 POST 请求。请参阅一些有用的博客文章[，例如 this](http://blog.arunbalan.in/2011/09/20/facebook-canvas-apps-with-python-on-google-app-engine-super-simplified/)和[this](http://bitkickers.blogspot.sg/2011/12/migrate-your-python-app-to-facebook.html)

# groovy - 有没有办法使用 Groovy 2.0 Extensions 添加构造函数

> ID：11279256
> 
> 赞同：0
> 
> 时间：2012-07-01T03:06:33.517
> 
> 标签：groovy, groovy-2

在较旧的 (1.xx) 版本的 Groovy 中，您可以使用 metaClass.constructor 添加构造函数

```
Example.metaClass.constructor << { String arg0 -> new Example(arg0, "") } 
```

有没有办法使用新的 Groovy 2.0 扩展模块注册构造函数？

**这似乎有效：**

为 Groovy 2 定义一个扩展类，只需在静态初始化程序中添加构造函数

```
public class ExampleHelper {
    static {
        Example.metaClass.constructor << { String arg0 -> new Example(arg0, "") }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:41:33.440

从来没听说过...

您可以将静态工厂方法添加到示例类，即：

```
class ExampleExtensionStatic {
  public static Example newInstance( Example type, String arg0 ) {
    new Example( arg0, '' )
  }
} 
```

`staticExtensionClasses`然后（在文件字段中添加指向此类的链接后`org.codehaus.groovy.runtime.ExtensionModule`），您可以执行以下操作：

```
Example.newInstance( 'arg0' ) 
```

这是值得在邮件列表中询问的内容，以查看构造函数是否值得添加到模块扩展系统中。

# database - drupal 7中的Oracle数据库连接

> ID：11279261
> 
> 赞同：1
> 
> 时间：2012-07-01T03:08:07.753
> 
> 标签：database, oracle, drupal-7

我想从外部 oracle 数据库中检索产品列表，并将其作为目录显示在我的 drupal 站点中。但问题是，如何从 drupal 7 站点连接到 oracle db。请任何关于如何执行此操作的建议都非常受欢迎。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:22:49.890

从 PHP 连接到 Oracle 数据库相当简单：[http ://www.oracle.com/technetwork/topics/php/whatsnew/index.html](http://www.oracle.com/technetwork/topics/php/whatsnew/index.html)

所以问题是你连接后想要做什么。

最简单的方法是安装 PHP 过滤器模块，并将 PHP 代码插入您网站上的节点中。

更灵活的解决方案是编写自己的小模块来运行 Oracle 查询并采取适当的措施。需要更多的学习，但从长远来看，它将提供更灵活的解决方案。

# php - 更新数据库字段错误 CodeIgniter

> ID：11279262
> 
> 赞同：13
> 
> 时间：2012-07-01T03:08:16.617
> 
> 标签：php, mysql, codeigniter, codeigniter-2

我在 CodeIgniter 2.1 中收到以下错误消息：

```
A PHP Error was encountered

Severity: Notice

Message: Array to string conversion

Filename: database/DB_active_rec.php

Line Number: 1407 
```

我正在尝试更新数据库中的字段。我有这个代码，每个教程对于批量上传都是一样的。无论如何它都可以工作，但问题是它显示了这样的错误。

这是我在我的模型中拥有的：

```
function update2($data){
   $this->db->update_batch('users',$data, "id");
} 
```

这是我在控制器中拥有的：

```
public function updateValues(){
    $this->load->model('get_db');
    $newRow = array(
        array(
            'id' => '3',
            'firstname' => 'Rapphie'
        ),
        array(
            'id' => '2',
            'firstname' => 'Charmie'
        )
    );
    $this->get_db->update2($newRow);
    echo "it has been updated";
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-16T08:00:44.140

在这里偶然发现了完全相同的问题。幸运的是，我使用的是相同的 CI 版本。:)

确实，来自 M_A_K 的答案有助于删除“通知”，但我认为这不是解决问题的正确方法。所以我决定看一下**DB_active_rec.php**中的第**1407**行，我相信这只是 CI 2.1.2 中的一个小错误。

 **这是我的解决方法。我只是更改了原始代码：

```
$not[] = $k.'-'.$v; 
```

进入这个：

```
$not[] = $k2.'-'.$v2; 
```

瞧！“通知”不再出现。:)

我们可以清楚地看到第 1407 行并不是要使用 $k 和 $v，因为第 1407 行是在一个 foreach 循环中，它以 $k2 和 $v2 遍历 $v。

我希望我清楚自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T03:00:31.370

刚刚意识到**使用**像 M_A_K 这样的 foreach 建议实际上超出了使用 update_batch 函数的目的。这是因为通过使用 foreach，我们实际上对每个数组元素进行了一次更新（而不是批处理）。这与在 CodeIgniter 中使用（单个）更新函数没有什么不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T23:51:58.987

这样做我总是觉得有点脏，但你也总是可以抑制那一行代码的错误！

```
function update2($data){
   @$this->db->update_batch('users',$data, "id");
} 
```

当然，正确的做法是升级到 2.1.3（尚未测试或查看，所以我认为它已修复。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-18T02:19:36.820

正确的解决方案是从[DB_active_rec.php](https://github.com/bcit-ci/CodeIgniter/blob/v2.1.0/system/database/DB_active_rec.php#L1403)中删除第 1401 - 1404 行，因为该`$not`变量不在任何地方使用。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-02T12:39:59.350

试试这个希望它的工作

```
function update2($data){
   foreach($data as $string_val){
   $this->db->update_batch('users',$string_val, "id");
    }
} 
```

或者

```
function update2($data){
   foreach($data as $string_val){
   $this->db->update_batch('users',$string_val->first_name, "id");
    }
} 
```**

# ios - PhoneGap/Cordova：childBrowser 插件提供奇怪的 URL (iOS)

> ID：11279263
> 
> 赞同：1
> 
> 时间：2012-07-01T03:08:42.200
> 
> 标签：ios, cordova, childbrowser

我很难让 childBrowser 插件工作

目前，当我单击我的链接时，它在我的 iOS 模拟器上什么也不做，当我使用浏览器单击它时，我收到一个网页未找到错误，网址看起来像：

```
file://myapp/www/%C3%A2%E2%82%AC%C2%9D#ￃﾢ￢ﾂﾬￂﾝ 
```

我真的很想知道发生了什么以及导致这种情况的原因，任何建议都将不胜感激。

我的代码是：

```
<script type="text/javascript" charset="utf-8" src="js/ChildBrowser.js"></script>
        <script>
            function onDeviceReady() {
                childbrowser = ChildBrowser.install();
                var root = this;
                cb = window.plugins.childBrowser;

                if(cb != null) {
                    cb.onLocationChange = function(loc){ root.locChanged(loc); };
                    cb.onClose = function(){root.onCloseBrowser(); };
                    cb.onOpenExternal = function(){root.onOpenExternal(); };
                    //cb.showWebPage(“http://google.com”);
                                   }
                                   }

                                   function onCloseBrowser() {
                                   console.log(“onCloseBrowser!”);
                                   }

                                   function locChanged(loc) {
                                   console.log(“locChanged!”);
                                   }

                                   function onOpenExternal() {
                                   alert(“onOpenExternal!”);
                                   } 
```

```
<body onLoad=”onBodyLoad()”&gt;
<a href=”#” onclick=’cb.showWebPage(“http://www.google.com”);’&gt;Click Me</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:32:59.720

很难确定应用程序的哪个部分做错了，因为给定的源是不够的。我有一个小型演示应用程序，它仅使用带有 cordova 1.7.0 的 childbrowser，您可以检查它以确保源未更改。

[ios-cordova-childbrowser 示例](https://github.com/dhavaln/cordova-examples/tree/master/ios-cordova-childbrowser)

# ruby-on-rails - 为什么没有 RVM 我的延迟作业会失败？

> ID：11279267
> 
> 赞同：4
> 
> 时间：2012-07-01T03:09:45.100
> 
> 标签：ruby-on-rails, ruby, rvm, delayed-job

我已经`delayed_job`安装了一个，我启动了守护进程来使用这个 Ruby 脚本运行作业：

```
require 'rubygems'
require 'daemon_spawn'
$: << '.'

RAILS_ROOT = File.expand_path(File.join(File.dirname(__FILE__), '..'))

class DelayedJobWorker < DaemonSpawn::Base
  def start(args)
    ENV['RAILS_ENV'] ||= args.first || 'development'
    Dir.chdir RAILS_ROOT
    require File.join('config', 'environment')

    Delayed::Worker.new.start
  end

  def stop
    system("kill `cat #{RAILS_ROOT}/tmp/pids/delayed_job.pid`")
  end
end

DelayedJobWorker.spawn!(:log_file => File.join(RAILS_ROOT, "log", "delayed_job.log"),
                    :pid_file => File.join(RAILS_ROOT, 'tmp', 'pids', 'delayed_job.pid'),
                    :sync_log => true,
                    :working_dir => RAILS_ROOT) 
```

如果我使用它运行命令，`rvmsudo`它将完美运行。

如果我只是使用没有 RVM 的 Ruby 命令，它会失败，这就是输出。我不知道为什么会这样。你能给我一些线索吗？

```
user@mysystem:~/redeal.it/application$ ruby script/delayed_job start production
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/daemon-spawn-0.4.2/lib/daemon_spawn.rb:16:in `kill': Operation not permitted (Errno::EPERM)
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/daemon-spawn-0.4.2/lib/daemon_spawn.rb:16:in `alive?'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/daemon-spawn-0.4.2/lib/daemon_spawn.rb:125:in `alive?'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/daemon-spawn-0.4.2/lib/daemon_spawn.rb:176:in `block in start'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/daemon-spawn-0.4.2/lib/daemon_spawn.rb:176:in `select'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/daemon-spawn-0.4.2/lib/daemon_spawn.rb:176:in `start'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/daemon-spawn-0.4.2/lib/daemon_spawn.rb:165:in `spawn!'
from script/delayed_job:37:in `<main>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T04:53:46.393

您有权限问题。

简而言之：您有一个在另一个用户下运行的延迟作业（可能是`root`由于 using `rvmsudo`），而守护进程 spawn 正试图杀死它。你会得到一个`Operation not permitted`.

尝试先使用 rvmsudo 杀死延迟作业，确保它没有运行（尝试`ps aux`），然后尝试不使用`rvmsudo`.

它应该工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T11:06:33.673

首先，查看 shared/pids/delayed_job.pid 并查看进程是否正在运行。在我的情况下，它看起来像是被关闭而不干净，并且 pid 文件被留在原处。部署脚本试图杀死不存在的进程并给出该权限错误。

我已经删除了delayed_job.pid 并且部署成功了。

# google-app-engine - 是否可以在 Google App Engine 中编写协议？

> ID：11279270
> 
> 赞同：0
> 
> 时间：2012-07-01T03:10:24.213
> 
> 标签：google-app-engine, protocols

我想用 Google App Engine 编写一个名为[DSNP](https://github.com/ilhanyumer/DSNP)的协议，以便它可以在 Internet 上使用，因为我无法让它在共享主机中运行。是否可以用 Java 编写协议，然后在 Google Apps Engine 中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T03:25:42.083

请参阅[https://developers.google.com/appengine/docs/whatisgoogleappengine](https://developers.google.com/appengine/docs/whatisgoogleappengine)并阅读“沙盒”部分，该部分将更详细地解释答案是否定的。

# mysql - 如果每个线程都有 3000 个帖子，是否最好为每个线程创建一个新表？

> ID：11279271
> 
> 赞同：1
> 
> 时间：2012-07-01T03:10:25.280
> 
> 标签：mysql, sql, database, scalability

已经有 1200 万个帖子，人们似乎在用东西聊天。我不知道拥有一堆小表是否比让数据库扫描具有如此多条目的数据库中的最后 10 条消息更有效。我知道我必须进行基准测试，但只是询问是否有人有任何观察或轶事，如果他们曾经有过类似的情况。

编辑添加架构：

```
create table reply(
id int(11) unsigned not null  auto_increment,
thread_id int(10) unsigned not null default 0,
ownerId int(9) unsigned not null default 0,
ownerName varchar(20),
profileId int(9) unsigned,
profileName varchar(50),
creationDate dateTime,
ip int unsigned,
pic varchar(255) default '',
reply text,
index(thread_id),
primary key(id)) TYPE=MyISAM; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T03:13:05.123

使用变量表名不是一个好主意。如果您已对将转换为单独表的列进行索引，则数据库使用索引将比创建单独表做得更好。这就是数据库的设计目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T03:15:49.303

我假设这里的“线程”是指帖子池中的线程。

在这里获得长期可扩展性的方法是开发一种架构，在该架构中您可以拥有多个数据库实例，并避免需要跨所有实例执行查询。

在同一个数据库上创建多个表在可伸缩性方面并没有真正的帮助。（事实上​​，它甚至可能会降低吞吐量......由于增加了数据库缓存的负载。）但听起来在您的应用程序中，您可以在不同数据库中划分为消息“池”，前提是您可以安排一个回复消息与它回复的消息进入同一个池。

出现的问题是某些事情将涉及查询所有数据库实例中的数据。在这种情况下，它可能会列出所有用户的消息，或者进行关键字搜索。因此，您确实必须查看整个图片以找出如何最好地实现分区。您需要分析所有查询，并考虑它们的相对频率。归根结底，解决方案可能涉及对模式进行非规范化，以便可以对数据库进行分区。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T11:21:15.410

动态表在关系模式中通常是一个非常糟糕的主意。键/值存储进行了不同的权衡，因此有些存储在动态表等方面表现更好，但以弱数据完整性/一致性保证等为代价。您似乎没有定义任何外键引用并且您正在使用 MyISAM，因此数据完整性/可靠性可能不是优先事项；要理解的重要一点是，不同的设计有不同的擅长的东西，所以对于一个数据库来说好的设计对于另一个数据库来说可能是坏的设计。

当我专注于 Pg 时，我无能为力，这是一个 MySQL 问题。取消标记。

（请注意，至少在 PostgreSQL 中，关系集上的许多操作都是 O(n)，因此大量的关系可能是非常有害的。）

# java - java中的二维对象数组

> ID：11279275
> 
> 赞同：0
> 
> 时间：2012-07-01T03:11:26.117
> 
> 标签：java, multidimensional-array

如何设置二维数组（java 中的数组数组）？

```
 dmap = new sq[255][255];
    for (int y = 0; y < 255; ++y)
        for (int x = 0; x < 255; ++x)
            dmap[x][y] = new sq(); 
```

我的其他课程在哪里`sq`运行不好-我长时间挂起（2 分钟），并且 Eclipse 调试视图（控制台+日志）中没有出现日志记录或 printfs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:04:33.127

首先，您必须初始化数组的第一维，然后转到下一步，这是正确的代码：

```
sq dmap[][] = new sq[256][];
for (int x = 0; x < 255; ++x){
   dmap[x] = new sq[256];
   for(int y = 0 ; y < 255 ; ++y){
      dmap[x][y] = new sq();
   }
} 
```

# python - 根据python中的bin大小将数组划分为多个（单个）数组

> ID：11279276
> 
> 赞同：0
> 
> 时间：2012-07-01T03:11:26.067
> 
> 标签：python

我正在读取一个包含如下值的文件：

```
-0.68285 -6.919616
-0.7876 -14.521115
-0.64072 -43.428411
-0.05368 -11.561341
-0.43144 -34.768892
-0.23268 -10.793603
-0.22216 -50.341101
-0.41152 -90.083377
-0.01288 -84.265557
-0.3524 -24.253145 
```

如何根据第 1 列中的值将其拆分为单个数组，bin 宽度为 0.1？

我想要我的输出是这样的：

```
array1=[[-0.05368, -11.561341],[-0.01288, -84.265557]]
array2=[[-0.23268, -10.79360] ,[-0.22216, -50.341101]]
array3=[[-0.3524, -24.253145]]
array4=[[-0.43144, -34.768892], [-0.41152, -90.083377]]
array5=[[-0.68285, -6.919616],[-0.64072, -43.428411]]
array6=[[-0.7876, -14.521115]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:29:38.293

这是一个使用 Python 的 round 函数和字典类的简单解决方案：

```
lines = open('some_file.txt').readlines()

dictionary = {}
for line in lines:
    nums = line[:-1].split(' ')     #remove the newline and split the columns
    k = round(float(nums[0]), 1)    #round the first column to get the bucket
    if k not in dictionary:         
        dictionary[k] = []          #add an empty bucket
    dictionary[k].append([float(nums[0]), float(nums[1])])
                                    #add the numbers to the bucket
print dictionary 
```

要获得特定的存储桶（如 .3），只需执行以下操作：

```
x = dictionary[0.3] 
```

或者

```
x = dictionary.get(0.3, []) 
```

如果您只想为空桶返回一个空列表。

# php - 如何让大型 Facebook API 请求更快？

> ID：11279283
> 
> 赞同：0
> 
> 时间：2012-07-01T03:13:23.960
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 PHP 开发一个 Facebook 应用程序，该应用程序获取用户朋友的大量位置信息。随着用户朋友数量的增加，应用程序变得越来越慢。但是我检索的朋友信息越多，结果就越准确。

我曾尝试使用以下方式来加快查询速度：

```
$facebook->api('/locations?ids=uid1,uid2,uid3,...') 
```

我将它与[批处理请求](http://developers.facebook.com/docs/reference/api/batch/)一起使用：

```
$batched_request = array(
    array('method' => 'GET', 'relative_url' => '/locations?ids=uid1,uid2,uid3,...'),    
    array('method' => 'GET', 'relative_url' => '/locations?ids=uid11,uid12,uid13,...'), 
    array('method' => 'GET', 'relative_url' => '/locations?ids=uid21,uid22,uid23,...'), 
    ...
);
$batch = $facebook->api('/?batch='.json_encode($batched_request), 'POST'); 
```

但仍然需要至少**20 秒**才能从用户的 100 个随机朋友集中获取位置信息。

## 实际使用的代码

这部分很好。只需几秒钟即可完成。

```
$number_of_friends = "100"; // Set the maximum number of friends from which their location information is retrieved
$number_of_friends_per_request = 10; // Set the number of friends per request in the batch

$access_token = $facebook->getAccessToken();

// This is the excerpt of another batched request to get the friend ids
$request = '[{"method":"POST","relative_url":"method/fql.query?query=SELECT+uid,+name+FROM+user+WHERE+uid+IN(SELECT+uid2+FROM+friend+WHERE+uid1+=+me()+order+by+rand()+limit+'.$number_of_friends.')"}]';
$post_url = "https://graph.facebook.com/" . "?batch=" . urlencode($request) . "&access_token=" . $access_token . "&method=post";
$post = file_get_contents($post_url);
$decoded_response = json_decode($post, true);
$friends_json = $decoded_response[0]['body'];
$friends_data = json_decode($friends_json, true);
if (is_array($friends_data)) {
    foreach ($friends_data as $friend) {
        $selected_friend_ids[] = number_format($friend["uid"], 0, '.', ''); // Since there are exceptionally large id numbers
    }
} 
```

但这是有问题的。收到 Facebook 的回复需要很长时间。

```
// Retrieve the locations of the user's friends using batched request
$i = 0;
$batched_request = array();
while ($i < ($number_of_friends/$number_of_friends_per_request)) {
    $i++;
    $friend_ids_variable_name = 'friend_ids_part_'.$i;
    $$friend_ids_variable_name = array_slice($selected_friend_ids, ($i-1)*$number_of_friends_per_request, $number_of_friends_per_request);
    if (!empty($$friend_ids_variable_name)) {
        $api_string_ids_variable_name = 'api_string_ids_'.$i;
        $$api_string_ids_variable_name = implode(',', $$friend_ids_variable_name);
        $batched_request[] = array('method' => 'GET', 'relative_url' => '/locations?ids='.$$api_string_ids_variable_name);
    }
}
$batch = $facebook->api('/?batch='.json_encode($batched_request), 'POST');
foreach ($batch as $batch_item) {
    $body = $batch_item["body"];
    $partial_friends_locations = json_decode($body, true);
        foreach ($partial_friends_locations as $friend_id => $friend_locations_data) {
            $friend_locations = $friend_locations_data["data"];
            foreach ($friend_locations as $friend_location) {
                // Process location information...
            }
        }
    }
} 
```

有没有办法使上述请求更快？我放置了一些代码来检查请求的响应时间，它很慢。

*   对于 100 个朋友，平均需要 > 20 秒。
*   对于 200 个朋友，平均需要 > 40 秒。
*   对于 400 位朋友，平均需要 > 80 秒，有时我会收到一条错误消息：“错误代码：1 消息：发生未知错误”

为了让事情变得更快，这意味着：

*   **在更短的时间内**获得**相同数量**的信息，或
***   在**相同**的时间内获取**更多信息。****

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T04:05:31.017

为什么要打扰批量请求？您可以使用单个 FQL 多查询来实现所有目标：

```
{
  "my_friends":
    "SELECT uid, name FROM user WHERE uid IN
      (SELECT uid2 FROM friend WHERE uid1 = me() ORDER BY rand() LIMIT 100)",
   "their_locations":
     "SELECT page_id, tagged_uids FROM location_post WHERE tagged_uids IN
       (SELECT uid FROM #my_friends)",
   "those_places":
      "SELECT page_id, name, location FROM page WHERE page_id IN
        (SELECT page_id FROM #their_locations"
 } 
```

在[API explorer](https://developers.facebook.com/tools/explorer?fql=%7B%0A%22my_friends%22%3A%22SELECT%20uid%2C%20name%20FROM%20user%20WHERE%20uid%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%20ORDER%20BY%20rand%28%29%20LIMIT%20100%29%22%2C%0A%22their_locations%22%3A%22SELECT%20page_id%2C%20author_uid%20FROM%20location_post%20WHERE%20author_uid%20IN%20%28SELECT%20uid%20FROM%20%23my_friends%29%22%2C%0A%22those_places%22%3A%20%22SELECT%20page_id%2C%20name%2C%20location%20FROM%20page%20WHERE%20page_id%20IN%20%28SELECT%20page_id%20FROM%20%23their_locations%29%22%0A%7D)中，这对我来说在 800-1200 毫秒范围内运行。

另一个问题：为什么您安装了 PHP SDK，但没有使用它来进行这些查询？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T04:01:58.860

我也注意到 facebook 的 API 响应时间很慢。我实际上并没有开发一个 facebook 应用程序，但也许我在处理 facebook 按钮和评论/分享按钮方面的一些学习会对你有所帮助：

我的建议是通过 javascript 将您的页面与异步 api 调用相结合以获取数据。这样，页面会为您的用户快速加载，然后在后台加载 facebook 数据。您可以使用 jquery 之类的库相对轻松地完成此操作。本质上，您将中断运行以将数据处理到另一个文件中的代码块，然后使用 jquery 调用运行它。

现在这是第一部分。第二部分可能又是一个小技巧，让用户感知更快的应用程序加载时间。始终先加载前 100 个好友并显示结果数据，然后再查询第二次（再次使用异步调用），以完成对其余用户好友的查询。

同样，这是从更一般的角度讲的，但希望它会有所帮助！****

# grails - 如何在 grails 中预填充隐藏的表单字段？

> ID：11279287
> 
> 赞同：1
> 
> 时间：2012-07-01T03:13:47.100
> 
> 标签：grails

我刚刚开始使用 Grails，并且正在运行一个非常基本的应用程序。我想用随机字符串预填充隐藏的表单字段。

做这个的最好方式是什么？我查看了 taglib，但我不确定此类事情的最佳实践是什么。我应该在 src/java 或 src/groovy 文件夹中创建一个类，还是有更好的方法来完成这项工作？

最后，我知道这是一个非常基本的问题，但是如果我确实创建了一个类或 taglib，那么它究竟是如何从 .gsp 页面中调用的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:23:47.097

如果您的操作看起来像这样

```
def create() { [orgInstance: new Org(params)] } 
```

这意味着将一个新`Org`对象传递给您的视图，可以将其引用为`orgInstance`

由于模型`[orgInstance: new Org(params)]`是地图，您可以简单地添加另一个参数：

```
def create() { [orgInstance: new Org(params), hiddenValue: 'something random'] } 
```

这可以通过以下方式在您的 .gsp 中使用：

```
<input type="hidden" name="test" value="${hiddenValue}" /> 
```

关于您的其他问题：自定义标记库的使用方式与其他 Grails-Tags 相同：`<g:myTag ...>...</g:myTag> . You can change the namespace`g `to whatever you like -`g` 是默认设置。有关更多详细信息，请参阅文档：http: [//grails.org/doc/latest/ref/Tag%20Libraries/Usage.html](http://grails.org/doc/latest/ref/Tag%20Libraries/Usage.html)

# java - 如何使用逻辑循环打印出 20 个毕达哥拉斯数的非全等三角形

> ID：11279290
> 
> 赞同：0
> 
> 时间：2012-07-01T03:15:19.627
> 
> 标签：java

如何使用逻辑循环打印出 20 个不全等三角形的毕达哥拉斯数。如果没有重复数字，即如果我有 4、3、5，我就不能有 3、4、5。

我正在使用“for”循环，但我不知道如何删除重复的答案。

```
for (k = 0; k < 50; k++)
    {
        for ( i = 0; i < 50; i++)
        {
            for ( j = 0; j < 50; j++)
            {
                if ( (k+1)*(k+1) + (i+1)*(i+1) == (j+1)*(j+1) )
                {
                    System.out.println( "\n\n\t\tThe numbers are : " + (k+1) + ", "
                                                                     + (i+1) + ", "
                                                                     + (j+1) );
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T03:23:11.527

想到两个（相关）选项：您可以按排序顺序“保留”每个三元组，因此当您找到 {4,3,5} 时，您将其转换为 {3,4,5}，然后再保存以供后续使用与任何其他人进行比较以获得独特性。或者，您可以创建一个“Triple”类，在其中定义一个类似的方法`boolean equals(final Triple rval)`，将每个元素从最低到最高进行比较。当然，可能还有其他方法可以做到这一点。

更新：鉴于您刚刚添加的代码，如果您只想将它​​们打印出来，那么您可能不需要像我上面假设的那样保留到目前为止找到的三元组。对您的代码进行以下修改可能会起作用：

```
for (k = 0; k < 50; k++)
{
    for ( i = k; i < 50; i++)
    {
        for ( j = i; j < 50; j++)
        {
            if ( (k+1)*(k+1) + (i+1)*(i+1) == (j+1)*(j+1) )
            {
                System.out.println( "\n\n\t\tThe numbers are : " + (k+1) + ", "
                                                                 + (i+1) + ", "
                                                                 + (j+1) );
            }
        }
    }
} 
```

请注意，我更改了内部循环的起点，以确保您将找到的所有三元组如下 `k <= i <= j`：我相信这个约束也将确保唯一性。

# javascript - 一个好的文本转语音 JavaScript 库

> ID：11279291
> 
> 赞同：15
> 
> 时间：2012-07-01T03:15:39.943
> 
> 标签：javascript, jquery, jquery-plugins, text-to-speech, html5-audio

我正在为我的应用程序寻找一个好的文本到语音 javascript 库。我环顾四周，看到了[Jtalk](http://www.jtalkplugin.com/)和[speak.js](http://syntensity.com/static/espeak.html)。但我不确定该选择哪一个。我很想从人们那里了解它们的优缺点，我很想知道你们是否遇到过其他任何 Javascript 插件。

我基本上是在可视化动画，我想为视障人士添加一些音频来告诉他们正在发生的事情。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-01T03:24:04.347

2018 年更新

现代浏览器内置了 TTS

```
if ('speechSynthesis' in window) {
    var msg = new SpeechSynthesisUtterance('Hello World');
    window.speechSynthesis.speak(msg);
} 
```

语音合成

**已弃用**

如果你不想写很多代码（或者导入一些你看不懂的库），我建议你使用谷歌 TTS 服务。这很简单。例如，您有这样的文本：`welcome to Stack overflow`您可以这样调用：

```
http://translate.google.com/translate_tts?ie=UTF-8&q=Welcome%20to%20stack%20overflow&tl=en&total=1&idx=0&textlen=23&prev=input 
```

这将返回一个读取该文本的音频文件。那么你的工作就是使用浏览器音频来播放它。好，易于。

PS：Google TTS 的声音真的很真实。

示例：http: [//jsfiddle.net/qspcL/](http://jsfiddle.net/qspcL/)

参考来自：http: [//jnjnjn.com/187/playing-audio-on-the-ipad-with-html5-and-javascript/](http://jnjnjn.com/187/playing-audio-on-the-ipad-with-html5-and-javascript/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T03:29:26.727

那么我建议你使用JTtalk。这取决于您的目标人群是什么，因为法律上的盲人和您可能认为的盲人可能会有所不同，而且并非每个人都知道盲文。我看到 Jtalk 的好处真的取决于它所拥有的示例，以及它们的工作情况。使用 JTalk 完成项目的整个前端部分只花了我们 2 天时间，因为我们几乎只是编辑了它的示例。在我/我的团队看来，Speak.js 的学习曲线更加困难。但是，我们发现演讲有点含糊不清，并且存在理解问题，尤其是对于名称很多的文档（例如提及公司的股票文章）。这就是我们搬到盲文的原因。

我的高级设计项目是为盲人设计的，但是我们意识到文本到语音并不是我们想要去的地方，因为我们觉得盲文更好。使用盲文，您可以更好地执行多项任务，轻松返回和暂停，大多数盲人可以更快地阅读盲文，然后他们可以听。

# c - 所有系统进程的 Linux CPU 亲和性

> ID：11279295
> 
> 赞同：2
> 
> 时间：2012-07-01T03:17:11.537
> 
> 标签：c, linux, affinity

有没有办法将除我自己的进程线程之外的所有系统进程设置为自己的 CPU，而无需手动设置每个 pid。

我在 Fedora 上使用 C 并且想在程序启动时设置它而不是之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T03:57:56.210

`cgroups`（控制组）是[划分系统资源](https://docs.fedoraproject.org/en-US/Fedora/15/html/Resource_Management_Guide/Starting_a_Process.html)（甚至不仅仅是 CPU）的有效方式。此外，另一种获得进程独占 CPU 访问权限的有效方法是利用调度程序——赋予它比其他任何东西更高的优先级。

如果这些不是你想要的，并且你已经决定你真的，真的想使用一位掩码来控制 CPU 亲和性，你可以从 init 开始遍历进程树（尝试使用`system`这个[如何使用`ps`at外壳](https://superuser.com/questions/286219/unix-list-children-processes-for-a-given-pid)）。

# php - 在 IIS 7 上创建自定义站点

> ID：11279296
> 
> 赞同：0
> 
> 时间：2012-07-01T03:17:30.647
> 
> 标签：php, iis-7, web

我在 Windows 7 上运行 IIS 7。在默认网站上一切正常。现在我正在尝试使用物理路径创建一个新站点`C:\users\xxx\mysite`。我正在关注[本教程](http://technet.microsoft.com/en-us/library/cc772350%28v=ws.10%29.aspx)。

该站点已创建，但当我运行它时，出现以下错误： **HTTP 错误 500.19 - 内部服务器错误 请求的页面无法访问，因为该页面的相关配置数据无效。**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:15:38.707

好的，我得到了这个工作！配置没有任何问题。

我是**windows文件权限**问题。

为了解决这个问题，我做了以下事情：

1) 在 IIS 中，单击编辑权限（在右侧）。

2) 转到安全选项卡。

3) 单击编辑 -> 添加 -> 高级 -> 立即查找。

4) 选择 IIS_IUSRS 和 IUSR。

5) 点击 OK>OK>OK... 并退出

而已！

# iphone - 在 didReceiveResponse 方法中使用 RestKit 的 EXC_BAD_ACCESS 错误

> ID：11279297
> 
> 赞同：1
> 
> 时间：2012-07-01T03:17:34.063
> 
> 标签：iphone, objective-c, json, restkit

我无法摆脱 RestKit 中的 EXC_BAD_ACCESS 错误。我怀疑这是因为我有一个 ARC 项目，并且可能多次发布请求或响应变量，但我已经花了几个小时在这上面，但不确定。

我的问题听起来与[这篇文章](https://stackoverflow.com/questions/2802180/asynchronous-nsurlconnection-throws-exc-bad-access)相似，但我不确定在我的代码中的哪个位置进行类似的更改。

我的实现文件有一种将新对象发布到服务器的简单方法。所有映射逻辑都在下面 NSObject 的实现文件中：

```
-(void) createMeeting 
{
    NSString* baseUrl = @"https://myapp.appspot.com/api/meeting/?format=json&username=testuser@test.com&api_key=f8s9df8as8df9s8d97";
    RKObjectManager* rkoManager = [RKObjectManager objectManagerWithBaseURLString:baseUrl];    [NewMeetingRK initMap:rkoManager];
    NewMeetingRK *newmtg = [NewMeetingRK alloc];
    newmtg.leader = self.leaderEmail.text;
    newmtg.startdate = [sqliteformatter stringFromDate:bdate];
    newmtg.enddate = [sqliteformatter stringFromDate:edate];
[[RKObjectManager sharedManager] postObject:newmtg delegate:self]; 
```

它成功地开始 requestDidStartLoad:(RKRequest *)request 但是它在 RKResponse.m 下面倒数第二行崩溃（如果 ([[_request delegate] respondsToSelector:... 出现 EXC_BAD_ACCESS 错误。

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSHTTPURLResponse *)response {
    RKResponseIgnoreDelegateIfCancelled();
    RKLogDebug(@"NSHTTPURLResponse Status Code: %ld", (long) [response statusCode]);
    RKLogDebug(@"Headers: %@", [response allHeaderFields]);
    _httpURLResponse = [response retain];
    [_request invalidateTimeoutTimer];
    if ([[_request delegate] respondsToSelector:@selector(request:didReceiveResponse:)]) {
      [[_request delegate] request:_request didReceiveResponse:self];
    }
} 
```

有什么想法可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T07:02:05.747

EXC_BAD_ACCESS 发生在将消息发送到已释放的对象时。您应该注意 _request 委托对象。NSZombieEnabled 断点也可能对您有所帮助。[如何启用僵尸对象](https://stackoverflow.com/questions/2190227/how-do-i-setup-nszombieenabled-in-xcode-4)

# ruby - 从 Mechanize/Nokogiri 获取链接

> ID：11279303
> 
> 赞同：2
> 
> 时间：2012-07-01T03:18:25.410
> 
> 标签：ruby, nokogiri, mechanize

我正在尝试发现从 Nokogiri 节点检索 a href 链接的最佳方法。这是我所在的地方

```
mech = Mechanize.new 
mech.get(HOME_URL) 

mech.page.search('.listing_content').each do |business| 
  website = business.css('.website-feature')
  puts website.class
  puts website.inner_html
end 
```

输出 =>

```
Nokogiri::XML::NodeSet
64c15af0-a558-012f-a041-00215a4685f6","nav":null});' rel="nofollow" target="_blank" title="Executive Service Ctr Website"><span class="raquo">»</span> 网站</a>

```

基本上，我只需要`http://urlofsite.com`退出 ，`inner_html`我不知道该怎么做。我已经阅读了关于使用 CSS 和 XPATH 进行此操作的信息，但此时我都无法工作。谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T03:31:48.253

首先，告诉 Nokogiri 获取一个节点，而不是一个 NodeSet。`at_css`将检索 Node 并`css`检索一个 NodeSet，它就像一个 Array。

代替：

```
website = business.css('.website-feature') 
```

尝试：

```
website = at_css('a.track-visit-website no-tracks') 
```

`<a>`用 检索节点的第一个实例`class="website-feature"`。如果它不是您想要的第一个实例，那么您需要通过抓取 NodeSet 然后对其进行索引来缩小范围。如果没有周围的 HTML，很难提供更多帮助。

要从节点获取`href`参数，只需将节点视为哈希：

```
website['href'] 
```

应该返回：

```
http://urlofsite.com 
```

这是来自 IRB 的一个小样本：

```
irb(main):001:0> require 'nokogiri'
=> true
irb(main):002:0> 
irb(main):003:0*   html = '<a class="this_node" href="http://example.com">'
=> "<a class=\"this_node\" href=\"http://example.com\">"
irb(main):004:0> doc = Nokogiri::HTML.parse(html)
=> #<Nokogiri::HTML::Document:0x8041e2ec name="document" children=[#<Nokogiri::XML::DTD:0x8041d20c name="html">, #<Nokogiri::XML::Element:0x805a2a14 name="html" children=[#<Nokogiri::XML::Element:0x805df8b0 name="body" children=[#<Nokogiri::XML::Element:0x8084c5d0 name="a" attributes=[#<Nokogiri::XML::Attr:0x80860170 name="class" value="this_node">, #<Nokogiri::XML::Attr:0x8086047c name="href" value="http://example.com">]>]>]>]>
irb(main):005:0> 
irb(main):006:0*   doc.at_css('a.this_node')['href']
=> "http://example.com"
irb(main):007:0> 
```

# r - 在 R 中拆分应用重组、plyr、data.table

> ID：11279304
> 
> 赞同：6
> 
> 时间：2012-07-01T03:18:27.117
> 
> 标签：r, split, plyr, data.table, apply

我在 R 中做经典的拆分应用重组事情。随着时间的推移，我的数据集是一堆公司。我正在做的应用是对每个公司进行回归并返回残差，因此，我没有按公司汇总。 `plyr`很好，但是当公司数量很大时，它需要很长时间才能运行。有没有办法做到这一点`data.table`？

样本数据：

```
dte, id, val1, val2
2001-10-02, 1, 10, 25
2001-10-03, 1, 11, 24
2001-10-04, 1, 12, 23
2001-10-02, 2, 13, 22
2001-10-03, 2, 14, 21 
```

我需要按每个 id （即 1 和 2）拆分。运行回归，返回残差并将其作为列附加到我的数据中。有没有办法做到这一点`data.table`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T17:06:15.183

DWin 的答案对于 v1.8.0 是正确的（目前在 CRAN 上）。但在 v1.8.1（在 R-Forge 存储库上）中，`:=`现在按组工作。它也适用于非连续组，因此无需`setkey`先排队。

```
dtb <- as.data.table(dat)
dtb
           dte id val1 val2
1:  2001-10-02  1   10   25
2:  2001-10-03  1   11   24
3:  2001-10-04  1   12   23
4:  2001-10-02  2   13   22
5:  2001-10-03  2   14   21
dtb[, resid:=residuals(lm(val1 ~ val2)), by=id]
           dte id val1 val2         resid
1:  2001-10-02  1   10   25  1.631688e-15
2:  2001-10-03  1   11   24 -3.263376e-15
3:  2001-10-04  1   12   23  1.631688e-15
4:  2001-10-02  2   13   22  0.000000e+00
5:  2001-10-03  2   14   21  0.000000e+00 
```

要升级到 v1.8.1，只需从 R-Forge 存储库安装。（从 R-Forge 安装任何二进制包时需要 R 2.15.0+）：

```
install.packages("data.table", repos="http://R-Forge.R-project.org") 
```

或者如果您无法升级到最新的 R，则从源代码安装。 `data.table`它本身只需要 R 2.12.0+。

扩展到 1MM 外壳：

```
DT = data.table(dte=Sys.Date()+1:1000000, 
                id=sample(1:2, 1000000, repl=TRUE),
                val1=runif(1000000),  val2=runif(1000000) )
setkey(DT, id)
system.time(ans1 <- cbind(DT, DT[, residuals(lm(val1 ~ val2)), by="id"]) )
   user  system elapsed 
 12.272   0.872  13.182 
ans1
                dte id      val1       val2 id           V1
      1: 2012-07-02  1 0.8369147 0.57553383  1  0.336647598
      2: 2012-07-05  1 0.0109102 0.02532214  1 -0.488633325
      3: 2012-07-06  1 0.4977762 0.16607786  1 -0.001952414
     ---                                                   
 999998: 4750-05-27  2 0.1296722 0.62645838  2 -0.370627034
 999999: 4750-05-28  2 0.2686352 0.04890710  2 -0.231952238
1000000: 4750-05-29  2 0.9981029 0.91626787  2  0.497948275

system.time(DT[, resid:=residuals(lm(val1 ~ val2)), by=id])
   user  system elapsed 
  7.436   0.648   8.107 
DT
                dte id      val1       val2        resid
      1: 2012-07-02  1 0.8369147 0.57553383  0.336647598
      2: 2012-07-05  1 0.0109102 0.02532214 -0.488633325
      3: 2012-07-06  1 0.4977762 0.16607786 -0.001952414
     ---                                                
 999998: 4750-05-27  2 0.1296722 0.62645838 -0.370627034
 999999: 4750-05-28  2 0.2686352 0.04890710 -0.231952238
1000000: 4750-05-29  2 0.9981029 0.91626787  0.497948275 
```

上面的示例只有 2 个组，非常小，不到 40MB，`Rprof`显示 96% 的时间都花在`lm`. 所以在这些情况下`:=`，分组并不是为了速度优势，而是为了方便；即，需要编写的代码更少，并且没有多余的列添加到输出中。随着大小的增长，避免复制开始出现，速度优势开始显现。特别是，随着组数的增加，`transform`in`j`会非常慢。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T03:32:11.873

我猜这需要按“id”排序才能正确排列。幸运的是，当您设置密钥时会自动发生这种情况：

```
dat <-read.table(text="dte, id, val1, val2
 2001-10-02, 1, 10, 25
 2001-10-03, 1, 11, 24
 2001-10-04, 1, 12, 23
 2001-10-02, 2, 13, 22
 2001-10-03, 2, 14, 21
 ", header=TRUE, sep=",")
 dtb <- data.table(dat)
 setkey(dtb, "id")
 dtb[, residuals(lm(val1 ~ val2)), by="id"]
#---------------
cbind(dtb, dtb[, residuals(lm(val1 ~ val2)), by="id"])
#---------------
            dte id val1 val2 id.1            V1
[1,] 2001-10-02  1   10   25    1  1.631688e-15
[2,] 2001-10-03  1   11   24    1 -3.263376e-15
[3,] 2001-10-04  1   12   23    1  1.631688e-15
[4,] 2001-10-02  2   13   22    2  0.000000e+00
[5,] 2001-10-03  2   14   21    2  0.000000e+00

> dat <- data.frame(dte=Sys.Date()+1:1000000, 
                    id=sample(1:2, 1000000, repl=TRUE),  
                    val1=runif(1000000),  val2=runif(1000000) )
> dtb <- data.table(dat)
> setkey(dtb, "id")
> system.time(  cbind(dtb, dtb[, residuals(lm(val1 ~ val2)), by="id"]) )
   user  system elapsed 
  1.696   0.798   2.466 
> system.time( dtb[,transform(.SD,r = residuals(lm(val1~val2))),by = "id"] )
   user  system elapsed 
  1.757   0.908   2.690 
```

**来自 Matthew 的编辑**：这对于 CRAN 上的 v1.8.0 都是正确的。在[data.table wiki](http://rwiki.sciviews.org/doku.php?id=packages%3acran%3adata.table)第 2 点的主题中`transform`添加了一点点：“为了速度，不要按组，然后”。但是，现在在 v1.8.1 中按组工作，既简单又快速。请参阅我的答案以获取说明（但无需投票）。`j``transform()``cbind()``:=`

嗯，我投了赞成票。这是在 Mac 上安装 v 1.8.1 的控制台命令（如果您有适当的 XCode 工具可用，因为它只存在于源代码中）：

```
install.packages("data.table", repos= "http://R-Forge.R-project.org", type="source", 
               lib="/Library/Frameworks/R.framework/Versions/2.14/Resources/lib") 
```

（由于某种原因，我无法让 Mac GUI 包安装程序将 r-forge 读取为存储库。）

# iphone - iOS：如何在父容器的中心放置一个控件？

> ID：11279307
> 
> 赞同：1
> 
> 时间：2012-07-01T03:19:26.823
> 
> 标签：iphone, ios

我有一个控件和一个容器，首先指定容器的宽度。之后，我将控件添加到容器中。如何告诉容器将子控件水平放置在中心？我想自己指定y值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T03:26:23.837

试试这个：

```
childControl.center = parentControl.center; 
```

或者如果您只想水平居中：

```
childControl.center = CGPointMake(childControl.center.x,parentControl.center.y); 
```

比做数学容易。

**编辑：** 这仅在超级视图与 parentControl 视图具有相同大小时才有效，要在与其超级视图大小不同的视图中执行此操作，您可以执行以下操作：

```
childControl.center = CGPointMake(childControl.center.x,
                                  parentControl.bounds.size.height/2); 
```

我没有测试上面的行，但它应该可以工作，如果它不让我知道，我会自己测试它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T03:21:47.273

数学是：

`control.x = (container.width - control.width) / 2`

如果这不是您想要的，请告诉我，我会尽力提供帮助！

# c# - RavenDB 查询异常 - 找不到方法：'Void Raven.Abstractions.Data.IndexQuery.set_DefaultField(System.String)'

> ID：11279309
> 
> 赞同：1
> 
> 时间：2012-07-01T03:20:45.737
> 
> 标签：c#, ravendb

我在刷新模型的 foreach 循环期间遇到以下异常，因为它试图枚举查询检索到的结果。我无法在互联网上的其他任何地方找到与此错误相关的任何内容。有人可以指出我做错了什么吗？

> System.MissingMethodException 未处理
> 
> > 消息=未找到方法：'Void Raven.Abstractions.Data.IndexQuery.set_DefaultField(System.String)'。来源=Raven.Client.Lightweight
> > 
> > 堆栈跟踪：
> > 
> > > 在 Raven.Client.Document.AbstractDocumentQuery`2.GenerateIndexQuery（字符串查询）
> > > 
> > > `2.InitializeQueryOperation(Action`在c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\AbstractDocumentQuery.cs:line 399中的 Raven.Client.Document.AbstractDocumentQuery 2 setOperationHeaders)
> > > 
> > > 在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\AbstractDocumentQuery.cs:line 434 中的 Raven.Client.Document.AbstractDocumentQuery`2.InitSync()
> > > 
> > > 在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\AbstractDocumentQuery.cs:line 421 中的 Raven.Client.Document.AbstractDocumentQuery`2.get_QueryResult()
> > > 
> > > 在 Raven.Client.Linq.RavenQueryProviderProcessor`1.ExecuteQueryTProjection 在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProviderProcessor.cs:line 1263
> > > 
> > > 在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProviderProcessor.cs:line 1244 中的 Raven.Client.Linq.RavenQueryProviderProcessor`1.Execute（表达式表达式）
> > > 
> > > 在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProvider.cs:line 138 中的 Raven.Client.Linq.RavenQueryProvider`1.Execute（表达式表达式）
> > > 
> > > 在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProvider.cs:195 中的 Raven.Client.Linq.RavenQueryProvider`1.System.Linq.IQueryProvider.Execute（表达式表达式）
> > > 
> > > 在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryInspector.cs:line 97 中的 Raven.Client.Linq.RavenQueryInspector`1.GetEnumerator()
> > > 
> > > 在 C:\AdminPanel\AdminPanel.xaml.cs:line 111 中的 AdminPanel.RefreshModel()

```
private void RefreshModel()
{
    MainModel.Movies.Clear();
    foreach (FriendlyName movie in App.Database.QueryAllMovies())
    {
        MainModel.Movies.Add(movie);
    }
}

public IEnumerable<FriendlyName> QueryAllMovies()
{
    using (var session = DocumentStore.OpenSession())
    {
        return session.Query<Movie, Movies_AsFriendlyName>().As<FriendlyName>();
    }
}

class Movies_AsFriendlyName : AbstractIndexCreationTask<Movie>
{
    public Movies_AsFriendlyName()
    {
        Map = movies => movies.Select(movie => new { Id = movie.Id, Name = movie.FileName });

        TransformResults = (database, movies) => movies.Select(movie => new { Id = movie.Id, Name = movie.FileName });
    }
}

public class FriendlyName
{
    public string Name { get; set; }
    public string Id { get; set; }

    public FriendlyName(string id, string name)
    {
        Id = id;
        Name = name;
    }

    public override string ToString()
    {
        return Name;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T03:44:54.173

通常当你有这样的东西时，你是针对一个版本编译的，但它试图使用的 dll 是另一个版本。

我敢打赌，如果您查看程序运行位置和编译位置之间的版本，它们是不同的。

# mysql - 在 MySQL 中将行显示为列

> ID：11279310
> 
> 赞同：2
> 
> 时间：2012-07-01T03:21:00.067
> 
> 标签：mysql, pivot

我有一张`networks`桌子和一张`groups`桌子，它们由连接到网络的每个组链接。

每个组都有一个`type`，其中一些组是`special type`组。

我正在尝试运行查询，该查询将显示每个特殊类型的组，以显示为一列，显示该组类型中有多少人。

那是可能的吗？将每个组类型显示为列标题。

数据：

```
Networks

id | name
1  | networka
2  | networkb

groups

id | name   | type | network
1  | groupa | 1    | 1
2  | groupb | 2    | 2
3  | groupc | 3    | 1

type

id | name     | special
1  | speciala | 0
2  | specialb | 1 
```

我目前正在运行：

```
SELECT Name FROM (

    SELECT groups.Name FROM groups INNER JOIN group_types on groups.Type = group_types.Id WHERE group_types.SpecialType = 1 Group by groups.Type
) as s 
```

它返回具有特殊类型的组列表。但是，如果我想获取更多信息，例如该组中的成员数量，假设我有一个`group_members`链接回该表的`groups`表或具有该类型的组的数量。

我目前连续获得两个：

```
name
specialb 
```

但我其实想回来

```
specialb
(sub query to get more values for that special group) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:07:22.850

如果我正确理解了您想要的内容，请写下：

```
select g.name, t.name, count(*)
from groups as g left join group_members as gm on gm.group=g.id left join types as t on t.id=g.type
group by g.name, t.name 
```

然后使用特殊粘贴>转置复制并粘贴到Excel中。

# xpath - 在 Common Lisp 中使用 XPath 查找“输入”标签

> ID：11279313
> 
> 赞同：1
> 
> 时间：2012-07-01T03:22:19.910
> 
> 标签：xpath, common-lisp

我正在尝试为特定输入字段抓取 HTML 页面（以便我可以从中提取令牌以在登录期间使用）。我正在使用 SBCL 1.0.54（因为该版本可与 StumpWM 一起正常工作）、quicklisp 和以下 quicklisp 包：

```
drakma
closure-html
cxml-stp 
```

如果我使用 Drakma 加载 HTML 页面，并将其转换为有效的 X(HTML)，我可以使用以下代码（大致改编自 Plexippus XPath 示例）：

```
(xpath:do-node-set (node (xpath:evaluate "//*" xhtml-tree))
  (format t "found element: ~A~%"
    (xpath-protocol:local-name node))) 
```

...获得以下结果（为简洁起见被剪断；有问题的页面*很大*）：

```
found element: img
found element: a
found element: img
found element: script
found element: div
found element: img
found element: a
found element: input
found element: input 
```

但是，我似乎无法让任何 XPath 语句比“//*”正常工作更复杂。我的目标是找到具有特定名称的输入，但即使只是找到所有输入也会失败：

```
* (xpath:evaluate "//input" xhtml-tree)

#<XPATH:NODE-SET empty {10087146F3}> 
```

我显然在这里遗漏了一些非常基本的东西。有人可以给我指点正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T03:32:56.743

会不会是命名空间问题？也就是说，如果`xmlns`根`html`元素上有一个属性，那么您需要声明命名空间`xpath:with-namespaces`并在 XPath 表达式中指定它。该表达式`"//input"`仅查找`input`不在任何命名空间中的元素。

# ruby-on-rails - Rails：HABTM - 查找所有没有关联的记录

> ID：11279317
> 
> 赞同：9
> 
> 时间：2012-07-01T03:23:13.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, has-and-belongs-to-many

我有 2 个模型（锻炼、设备），并且属于许多关系。如果我使用`Workout.find(:all, :joins => :equipment, :conditions => "equipment.id = 5")`它可以工作，但如果我使用`Workout.find(:all, :joins => :equipment, :conditions => "equipment.id = null")`它不会返回没有关联的记录。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T03:47:20.200

试一试；

```
Workout.joins("left join equipments e on workouts.id = e.workouts_id").where("e.id is null") 
```

# file-upload - PhoneGap FileTransfer.upload 参数不再发布

> ID：11279319
> 
> 赞同：2
> 
> 时间：2012-07-01T03:24:17.030
> 
> 标签：file-upload, cordova, file-transfer

我今天刚刚从 Cordova (PhoneGap) 1.5 升级到 1.9，突然我的 FileTransfer 参数停止发布。我可以说出来，因为我让服务器端调试了 $_POST 参数，它们现在是空白的。这是正在运行的代码：

```
 var options = new FileUploadOptions();
    options.fileKey="file";
    options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
    options.mimeType="image/jpeg";
    options.chunkedMode=false;

    var params = new Object();
    params.client_token = "This will not make it across, sadly...";  

    options.params = params;

    var ft = new FileTransfer();
    rs = ft.upload(imageURI, "http://www.mysite.com/api/uploadimage", 
        function() { alert('Yay!'); }, 
        function() { alert('Fail happens..'); }, options, true); 
```

这有发生在其他人身上吗？也许有一个必须设置的新设置？

**更新：**

为了确保不是 CodeIgniter 导致服务器端问题，我现在将上述代码发布到 echo.php，它只是执行“print var_dump($_REQUEST);”。仍然没有结果。我能够作弊并将客户端令牌作为 $_GET 参数扔到 URL 上，但是由于客户端发生了变化，因此破解服务器端似乎是一种耻辱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T17:00:21.207

我在 iOS Cordova 1.9 上遇到了同样的问题。我发现并修复了框架代码中的错误，您可以下载我的 Cordova fork 并从中使用新修补的[/dist/Cordova-1.9.0.dmg：https://github.com/eschultz/incubator-cordova- IOS/](https://github.com/eschultz/incubator-cordova-ios/)

快速浏览一下，Android Cordova 1.9 代码看起来不错。我向 Apache 提交了我的更改，以在他们的下一个版本中包含修复。

希望这可以帮助。

# regex - 正则表达式接受至少五个字符的所有字符

> ID：11279321
> 
> 赞同：1
> 
> 时间：2012-07-01T03:25:08.323
> 
> 标签：regex

我在网上看到了以下正则表达式。

```
(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$ 
```

它仅验证字符串是否：

*   至少包含 (1) 个大写字母
*   至少包含 (1) 个小写字母
*   至少包含 (1) 个数字或特殊字符
*   长度至少包含 (8) 个字符

但我试图让它包含至少 5 个字符，同时允许用户使用他们选择的任何字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T03:39:25.697

正则表达式`.{5}`将匹配任何包含至少五个字符的字符串。请注意，除了换行符之外，字符可以是*任何*字符，因此将匹配由五个空格组成的字符串。

# mongodb - 如何在启用身份验证的情况下从命令行创建新的 MongoDB？

> ID：11279327
> 
> 赞同：13
> 
> 时间：2012-07-01T03:26:15.407
> 
> 标签：mongodb, capistrano

为了想在 Capistrano 任务中创建一个 MongoDB 数据库，我需要弄清楚当 MongoDB 在 auth 开启的情况下运行时如何通过 MongoDB shell 创建一个新数据库。

启用身份验证后，MongoDB shell 必须先进行身份验证才能执行任何操作，但据我所知，必须在使用**管理数据库时进行身份验证。**所以我一直在连接它，比如：

```
sudo -u mongodb mongo admin --eval "db.auth(username, password)" 
```

这对我进行了进一步操作的身份验证，但是......此时我需要在同一个 shell 会话中创建数据库和一个用户。但是我不能：

```
sudo -u mongodb mongo admin --eval "db.auth(username, password);use new_database" 
```

因为`use database`不能在eval中使用。所以我尝试了：

```
sudo -u mongodb mongo admin --eval "db.auth(username, password);db = connect('localhost:27017/new_database')" 
```

这实际上会给我一个我想要创建的新数据库的实例，但是如果我尝试：

```
sudo -u mongodb mongo admin --eval "db.auth(username, password);connect('localhost:27017/new_database').addUser(new_user, new_password)" 
```

我收到一个身份验证错误，所以显然使用该`connect()`命令会忘记我之前已经过身份验证。

所以这就是我卡住的地方，尝试使用 auth 和管理员用户在 MongoDB 中创建一个数据库。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T05:03:29.983

您可以使用[db.getSiblingDB(name)](http://docs.mongodb.org/manual/reference/method/db.getSiblingDB/)来引用新数据库并添加新帐户，例如：

```
mongo -u username -p password admin --eval "db.getSiblingDB('new_database').addUser('new_user', 'new_password');" 
```

现在您应该能够使用 -u 和 -p 从命令行进行身份验证：

```
mongo -u new_user -p new_password new_database 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-27T13:50:12.757

请注意，该`addUser`功能自 2.6 版以来已被弃用。

使用`db.createUser()`and`db.updateUser()`而不是`db.addUser()`将用户添加到 MongoDB。

您的代码应如下所示：

```
mongo -u username -p password admin --eval "db.getSiblingDB('new_database').createUser({ user : 'new_user', pwd :  'new_password', roles : [{ role: 'readWrite', db: 'new_database'}]});" 
```

# python - 字符串值前面的“u”符号是什么意思？

> ID：11279331
> 
> 赞同：135
> 
> 时间：2012-07-01T03:26:52.990
> 
> 标签：python, google-app-engine

是的，简而言之，我想知道为什么我会在我的键和值前面看到 au。

我正在渲染一个表格。该表单具有特定标签的复选框和一个用于 IP 地址的文本字段。我正在创建一个字典，其中键是在 list_key 中硬编码的标签，字典的值取自表单输入 (list_value)。字典已创建，但某些值前面有 u。这是字典的示例输出：

```
{u'1': {'broadcast': u'on', 'arp': '', 'webserver': '', 'ipaddr': u'', 'dns': ''}} 
```

有人可以解释我做错了什么。当我在 pyscripter 中模拟类似方法时，我没有收到错误消息。欢迎任何改进代码的建议。谢谢

```
#!/usr/bin/env python

import webapp2
import itertools
import cgi

form ="""
    <form method="post">
    FIREWALL 
    <br><br>
    <select name="profiles">
        <option value="1">profile 1</option>
        <option value="2">profile 2</option>
        <option value="3">profile 3</option>
    </select>
    <br><br>
    Check the box to implement the particular policy
    <br><br>

    <label> Allow Broadcast
        <input type="checkbox" name="broadcast">
    </label>
    <br><br>

    <label> Allow ARP
        <input type="checkbox" name="arp">
    </label><br><br>

    <label> Allow Web traffic from external address to internal webserver
        <input type="checkbox" name="webserver">
    </label><br><br>

    <label> Allow DNS
        <input type="checkbox" name="dns">
    </label><br><br>

    <label> Block particular Internet Protocol  address
        <input type="text" name="ipaddr">
    </label><br><br>

    <input type="submit">   
    </form>
"""
dictionarymain={}

class MainHandler(webapp2.RequestHandler):  
    def get(self):
        self.response.out.write(form)

    def post(self):
        # get the parameters from the form 
        profile = self.request.get('profiles')

        broadcast = self.request.get('broadcast')
        arp = self.request.get('arp')
        webserver = self.request.get('webserver')
        dns =self.request.get('dns')
        ipaddr = self.request.get('ipaddr')

        # Create a dictionary for the above parameters
        list_value =[ broadcast , arp , webserver , dns, ipaddr ]
        list_key =['broadcast' , 'arp' , 'webserver' , 'dns' , 'ipaddr' ]

        #self.response.headers['Content-Type'] ='text/plain'
        #self.response.out.write(profile)

        # map two list to a dictionary using itertools
        adict = dict(zip(list_key,list_value))
        self.response.headers['Content-Type'] ='text/plain'
        self.response.out.write(adict)

        if profile not in dictionarymain:
            dictionarymain[profile]= {}
        dictionarymain[profile]= adict

        #self.response.headers['Content-Type'] ='text/plain'
        #self.response.out.write(dictionarymain)

        def escape_html(s):
            return cgi.escape(s, quote =True)

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-07-01T03:52:23.277

字符串值前面的 'u' 表示该字符串是 Unicode 字符串。Unicode 是一种表示比普通 ASCII 所能管理的更多字符的方法。您看到的事实`u`意味着您使用的是 Python 2 - Python 3 上的字符串默认为 Unicode，但在 Python 2 上，`u`前面的 Unicode 字符串可以区分。这个答案的其余部分将集中在 Python 2 上。

您可以通过多种方式创建 Unicode 字符串：

```
>>> u'foo'
u'foo'
>>> unicode('foo') # Python 2 only
u'foo' 
```

但真正的原因是代表这样的东西（[这里的翻译](http://translate.google.com/#ru%7Cen%7C%D0%9E%D0%B7%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%8C%D1%82%D0%B5%D1%81%D1%8C%20%D1%81%20%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D0%B5%D0%B9)）：

```
>>> val = u'Ознакомьтесь с документацией'
>>> val
u'\u041e\u0437\u043d\u0430\u043a\u043e\u043c\u044c\u0442\u0435\u0441\u044c \u0441 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0435\u0439'
>>> print val
Ознакомьтесь с документацией 
```

在大多数情况下，Unicode 和非 Unicode 字符串在 Python 2 上是可互操作的。

您还会看到其他符号，例如`r`用于告诉字符串不要解释反斜杠的“原始”符号。这对于编写正则表达式非常有用。

```
>>> 'foo\"'
'foo"'
>>> r'foo\"'
'foo\\"' 
```

Unicode 和非 Unicode 字符串在 Python 2 上可以相等：

```
>>> bird1 = unicode('unladen swallow')
>>> bird2 = 'unladen swallow'
>>> bird1 == bird2
True 
```

但不是在 Python 3 上：

```
>>> x = u'asdf' # Python 3
>>> y = b'asdf' # b indicates bytestring
>>> x == y
False 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-01T03:44:20.407

这是一个功能，而不是一个错误。

请参阅[http://docs.python.org/howto/unicode.html](http://docs.python.org/howto/unicode.html)，特别是“unicode 类型”部分。

# asp.net-mvc - 捆绑和缩小正在发送旧样式

> ID：11279332
> 
> 赞同：0
> 
> 时间：2012-07-01T03:26:56.963
> 
> 标签：asp.net-mvc, bundling-and-minification

我按照这篇文章来设置捆绑和缩小，[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)。

我认为它工作得很好，直到我更新了一些 CSS，但我一直在使用旧样式。我在 Firefox 中工作，我已经清除了缓存，重新启动了浏览器，重新启动了 IIS，甚至重新启动了我的计算机，但没有任何效果。

当我关闭捆绑和缩小

```
BundleTable.EnableOptimizations = false; 
```

新样式出现，页面看起来应该是这样。重新打开捆绑和缩小，我又得到了旧样式。此外，每当我重建或更改其中一个 css 文件时，都会有一个新的 chache busting 令牌。所以你会认为它正在发送不同的内容，但我仍然得到旧的东西。我什至在其中一个 css 文件中添加了一个测试类，然后下载了缩小的 css 文件，但是我添加的测试类不存在。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T18:09:39.043

按照我在**Debugging Bundled and Minified JavaScript**下的说明找出你做错了什么。

> > 重建或更改其中一个 css 文件，有一个新的 chache 破坏令牌 验证您使用的是 RC 而不是 beta。重建不会更改缓存破坏令牌，只会更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:43:26.153

我不觉得自己像个白痴。显然我工作时间太长了。我有一个优化器正在使用的 style.min.css 文件，但我正在对 style.css 进行更改。我什至知道优化器就是这么做的，但我……嗯，没有任何借口。这是一个脑放屁。

# php - 我的 PHP 生成的 CSV 文件保存为 PHP 文件

> ID：11279333
> 
> 赞同：1
> 
> 时间：2012-07-01T03:27:06.500
> 
> 标签：php, mysql, csv

我从另一个 StackOverflow 问题中学习了如何从 MySQL 数据创建 CSV 文件。我的问题是，由于某种原因，当我调用此代码时，它会尝试保存一个名为`index.php`（即当前页面）的文件。在`index.php`文件中，我的表中的数据在那里，用逗号分隔。我猜我在某个地方有一个小错字，但是在玩了代码之后我找不到它。感谢任何能提供帮助的人。

```
$result=mysql_query("SELECT * from tbl_email");
if(mysql_num_rows($result)) {
  header ("Content-type: application/csv Content-Disposition:\"inline; filename=messages.csv\"");
  echo "REF #,Company,Name,Email,Message,Date\n";
  while($row = mysql_fetch_row($result)) {
    $companyname = mysql_query("SELECT company FROM tbl_users WHERE user_id ='$row[1]'");
    $datname = mysql_fetch_array($companyname);
    echo"$row[7],$datname[company],$row[2],$row[4],$row[5],$row[6]\n";
  }
  die();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T03:29:54.030

您需要多次`header()`调用而不是一次调用在一行上提供多个标题，我相信最适合 CSV 的 mime 类型是`text/csv`.

```
header("Content-type: text/csv");
header("Content-Disposition: inline; filename=messages.csv"); 
```

更常见的是，我们会使用`Content-Disposition: attachment`强制下载。

```
header("Content-type: text/csv");
header("Content-Disposition: attachment; filename=messages.csv"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T03:40:44.760

它应该是：

```
header('Content-type: application/csv');
header('Content-Disposition: attachment; filename="messages.csv"'); 
```

请注意，文件名的值没有正确地用双引号括起来。尝试在php中使用单引号，这样会省去很多麻烦。;)

看看[http://www.techcoil.com/blog/php-codes-to-tell-browsers-to-open-the-download-dialog-box-for-users-to-download-a-file/](http://www.techcoil.com/blog/php-codes-to-tell-browsers-to-open-the-download-dialog-box-for-users-to-download-a-file/)了解更多关于告诉浏览器下载您的文件的信息。

# android - 检索微调器的绑定值

> ID：11279334
> 
> 赞同：0
> 
> 时间：2012-07-01T03:27:18.893
> 
> 标签：android, spinner, selected

我想获得微调器的选定值。
首先，我`STRING-ARRAY`在 res/values/string 中创建了一个

```
<string-array name="location">
    <item name="AUH">ABU DHABI</item>
    <item name="AAN">AL AIN</item>
    <item name="DMM">DAMMAM</item>
</string-array> 
```

布局中的微调器定义：

```
<Spinner
         android:id="@+id/spnOrigin"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content" 
         android:entries="@array/location"/> 
```

现在我需要完成按钮点击主体，如果用户选择 ABU DHABHI，他应该返回 AUH。
`GETSELECTITEM`返回阿布扎比，而不是背后的价值。如果我尝试这样的事情，这种方法可以让我获得 NAME 属性吗？

```
String[] _location =getResources().getStringArray(R.array.location); 
```

按钮处理程序：

```
bttProcess.setOnClickListener(new View.OnClickListener() {          
    public void onClick(View v) {    

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T03:49:59.467

我不相信 name 属性对[字符串数组的项目](http://developer.android.com/guide/topics/resources/string-resource.html#StringArray)有效。

我认为你最好的选择是设置另一个数组来包含其中的值。然后，您可以`((AdapterView)getViewById(R.id.spnOrigin)).getSelectedItemPosition()`从该其他数组中查找相关名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T03:50:22.360

尝试按照[android](http://developer.android.com/guide/topics/ui/controls/spinner.html)开发者网站中的示例开始使用 spinner

首先，您的活动必须实施`AdapterView.OnItemSelectedListener`。这将提供一个回调方法，该方法将在从 Spinner 中选择项目时通知您的应用程序。

```
public class SpinnerActivity extends Activity implements OnItemSelectedListener 
```

其次，您需要通过调用来注册接口实现：

```
spinner.setOnItemSelectedListener(this); 
```

最后在该类的“onItemSelected”方法中，您可以获得所选项目：

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    String selected = parent.getItemAtPosition(pos).toString();
}

public void onNothingSelected(AdapterView parent) {
    // Do nothing.
} 
```

像这样使用你的字符串数组

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="locations">
        <item>ABU DHABI</item>
        <item>AL AIN</item>
        <item>DAMMAM</item>
    </string-array>
</resources> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:13:35.770

在这种 Spinner 需要通过 KEY - VALUE PAIR List 绑定的场景中，spinner 可以从
1\. DATABASE
2\. 静态字符串数组中获取值。
3\. 通过创建双资源字符串数组。

第三点：
如果你需要通过资源字符串数组绑定微调器，你需要创建两个数组。一个将包含 KEY [国家名称]，第二个将包含 VALUES [国家短代码]。

比点击按钮，

```
bttProcess.setOnClickListener(new View.OnClickListener() {          

   public void onClick(View v) {    
    int position = spinner.getSelectedItemPosition();

    Log.i("Code:","Selected Country Code: "+
    getStringFromArray(R.array.locations_code, position ));

});

private String getStringFromArray(int id, int index) {
   try {
        String[] bases = getResources().getStringArray(id);
        return bases[index];
    } 
    catch (Exception e) {
        return "";
    }
} 
```

资源看起来像，

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="locations">
        <item>ABU DHABI</item>
        <item>AL AIN</item>
        <item>DAMMAM</item>
    </string-array>
    <string-array name="locations_code">
        <item>ABU</item>
        <item>AL</item>
        <item>DAM</item>
    </string-array>
</resources> 
```

# bash - Bash写入文件没有回声？

> ID：11279335
> 
> 赞同：57
> 
> 时间：2012-07-01T03:27:33.353
> 
> 标签：bash, command-line, io-redirection

作为练习，是否存在将字符串重定向到没有回显的文件的方法？目前我正在使用

```
echo "Hello world" > test.txt 
```

我知道`cat`和`printf`。我在想类似的东西

```
> test.txt <<<"Hello world" 
```

当然这不起作用，但也许是一个类似的命令？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-05T16:49:12.887

您可以使用“cat”和此处的文档来执行此操作。

```
cat <<EOF > test.txt
some text
EOF 
```

这样做的一个原因是避免密码在 ps 的输出中可见的任何可能性。然而，在 bash 和大多数现代 shell 中，“echo”是一个内置命令，它不会出现在 ps 输出中，所以使用这样的东西是安全的（当然，忽略在文件中存储密码的任何问题）：

```
echo "$password" > test.txt 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-08-09T12:40:38.763

我遇到了无法发送“>”的问题，并以 echo 告终！

```
echo "Hello world" | dd of=test.txt 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-21T14:41:11.133

有多种方法可以做到这一点，让我们运行这个名为`exercise.sh`

```
#!/usr/bin/env bash

> file1.txt cat <<< "This is a here-string with random value $RANDOM"

# Or if you prefer to see what is happening and write to file as well
tee file2.txt <<< "Here is another here-string I can see and write to file"

# if you want to work multiline easily
cat <<EOF > file3.txt
You don't need to escape any quotes here, $ marks start of variables, unless escaped.
This is random value from variable $RANDOM
This is literal \$RANDOM
EOF

# Let's say you have a variable with multiline text and you want to manipulate it
a="
1
2
3
33
"

# Assume I want to have lines containing "3". Instead of grep it can even be another script
a=$(echo "$a" | grep 3)

# Then you want to write this to a file, although here-string is fine,
# if you don't need single-liner command, prefer heredoc
# Herestring. (If it's single liner, variable needs to be quoted to preserve newlines)
> file4.txt cat <<< "$a"
# Heredoc
cat <<EOF > file5.txt
$a
EOF 
```

这是您应该看到的输出：

```
$ bash exercise.sh
Here is another here-string I can see and write to file 
```

文件应包含以下内容：

```
$ ls
exercise.sh  file1.txt  file2.txt  file3.txt  file4.txt  file5.txt
$ cat file1.txt
This is a here-string with random value 20914
$ cat file2.txt
Here is another here-string I can see and write to file
$ cat file3.txt
You don't need to escape any quotes here, $ marks start of variables, unless escaped.
This is random value from variable 15899
This is literal $RANDOM
$ cat file4.txt
3
33
$ cat file5.txt
3
33 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-01T04:01:38.843

有太多的方法可以讨论，而你可能并不关心。你当然可以破解 - strace bash，或者在 gdb 中运行 Bash 做各种黑魔法。

你实际上有两个完全不同的例子。`<<<'string'`已经将字符串写入文件。如果除了 、 和 之外还有什么可以接受的`printf`，`echo`您`cat`可以使用许多其他命令来表现得像 cat（sed、awk、tee 等）。

```
$ cp /dev/stdin ./tmpfooblah <<<'hello world'; cat tmpfooblah
hello world 
```

或者地狱，这取决于你如何编译 Bash。

```
$ enable -f /usr/lib/bash/print print; print 'hello world' >tmpfile 
```

如果您只想在纯 bash 中使用 bash 字符串和重定向，没有黑客攻击，也没有可加载项，这是不可能的。然而，在 ksh93 中，这是可能的。

```
 $ rm tmpfooblah; <<<'hello world' >tmpfooblah <##@(&!()); cat tmpfooblah
 hello world 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-22T02:29:36.563

在 bash 中执行此操作的方法是

`zsh <<< '> test <<< "Hello World!"'`

这是 zsh 和 bash 之间有趣的区别之一：给定一个未链接的`>`or `>>`，zsh 可以很好地将其连接到标准输入，而 bash 则没有。这将是非常有用的——如果它只是标准的话。我尝试使用它通过 ssh 发送和附加我的​​ ssh 密钥到远程`authorized_keys`文件，但是远程主机当然是 bash，并且悄悄地什么也没做。

这就是为什么你应该只使用`cat`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-05T05:48:31.393

```
awk ' BEGIN { print "Hello, world" } ' > test.txt 
```

会做的

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-31T04:03:33.827

我有 bash 纯粹主义者的解决方案。

函数“定义”帮助我们将多行值分配给变量。这需要一个位置参数：分配值的变量名。

在 heredoc 中，也可以选择参数扩展！

```
#!/bin/bash

define ()
{
  IFS=$'\n' read -r -d '' $1
}

BUCH="Matthäus 1"

define TEXT<<EOT
Aus dem Buch: ${BUCH}

1 Buch des Geschlechts Jesu Christi, des Sohnes Davids, des Sohnes Abrahams.
2 Abraham zeugte Isaak; Isaak aber zeugte Jakob, Jakob aber zeugte Juda und seine Brüder;
3 Juda aber zeugte Phares und Zara von der Thamar; Phares aber zeugte Esrom, Esrom aber zeugte Aram,

4 Aram aber zeugte Aminadab, Aminadab aber zeugte Nahasson, Nahasson aber zeugte Salmon,
5 Salmon aber zeugte Boas von der Rahab; Boas aber zeugte Obed von der Ruth; Obed aber zeugte Isai,
6 Isai aber zeugte David, den König. David aber zeugte Salomon von der, die Urias Weib gewesen; 

EOT

define TEXTNOEXPAND<<"EOT" # or define TEXTNOEXPAND<<'EOT'
Aus dem Buch: ${BUCH}

1 Buch des Geschlechts Jesu Christi, des Sohnes Davids, des Sohnes Abrahams.
2 Abraham zeugte Isaak; Isaak aber zeugte Jakob, Jakob aber zeugte Juda und seine Brüder;
3 Juda aber zeugte Phares und Zara von der Thamar; Phares aber zeugte Esrom, Esrom aber zeugte Aram,

4 Aram aber zeugte Aminadab, Aminadab aber zeugte Nahasson, Nahasson aber zeugte Salmon,
5 Salmon aber zeugte Boas von der Rahab; Boas aber zeugte Obed von der Ruth; Obed aber zeugte Isai,
6 Isai aber zeugte David, den König. David aber zeugte Salomon von der, die Urias Weib gewesen; 

EOT

OUTFILE="/tmp/matthäus_eins"

# Create file
>"$OUTFILE"

# Write contents
{
   printf "%s\n" "$TEXT"
   printf "%s\n" "$TEXTNOEXPAND"
} >>"$OUTFILE" 
```

幸运！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-01T03:36:45.247

只有重定向不起作用，因为没有任何东西可以连接现在打开的文件描述符。所以不，没有这样的方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-09T21:37:36.690

有趣的是，我也遇到了这个问题......所以我搜索并找到了这个线程......我发现这对我很有效：

```
echo "Hello world" | grep "" > test.txt 
```

*但是*- 当我关闭那个终端并打开一个新终端时，我发现问题消失了！我希望我一直打开那个终端来比较设置。我当前的终端是一个 bash shell。不知道是什么导致了这个问题的开始——有人吗？

# javascript - dom jquery 行为不起作用

> ID：11279336
> 
> 赞同：-1
> 
> 时间：2012-07-01T03:27:39.010
> 
> 标签：javascript, jquery, dom

我有以下正常工作的功能：

```
 $(function() {
                var availableTags  = <? echo htmlspecialchars($jsEnc,ENT_NOQUOTES,'utf-8');?>;

                $( "input.tags" ).autocomplete({
                    source: availableTags
                });
        }); 
```

在所有预先存在的情况下：`<input class="tags"/>`该函数按其应有的方式执行（自动完成列表，即数据库转储）。

现在，这些输入实际上存在于 a`<table>`中，其中的行可以动态添加或删除。

将单元格添加到表格时，我执行以下操作：

`if(i== document.getElementById("soldTo").cellIndex){ element2.setAttribute('class','tags'); }`

这基本上使输入（element2）能够成为jquery函数的目标（至少我是这么认为的）。

我假设 jquery 函数没有“意识到”这个新元素，必须以某种方式重新初始化才能看到新成员。

这是真的？这是在添加新元素时完成的吗？某种`$(x).add(myBehavior)`？

> 编辑

我尝试了以下方法：

```
$("table.inventoryItems").bind("DOMSubtreeModified", function() {
alert('z');
     $( "input.tags" ).autocomplete({
       source: availableTags
      });
 }); 
```

并且警报也不会触发。

有什么可疑的地方吗？

谢谢

> 适当的解决方案外部链接

[使用 ajax 检索到的元素上的 jquery 自动完成功能](https://stackoverflow.com/questions/5407956/jquery-autocomplete-on-element-retrieved-w-ajax)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T03:34:29.817

尝试`DOMSubtreeModified`事件：

```
$("table").bind("DOMSubtreeModified", function() {
     $( "input.tags" ).autocomplete({
        source: availableTags
     });
}); 
```

或者您可以**[`on()`](http://api.jquery.com/on/)**根据创建新输入元素的方式使用方法：

```
$("table").on("change", "input.tags", function() {
     $(this).autocomplete({
        source: availableTags
     });
}); 
```

# asp.net - 如何跨多个 ASP.NET 请求更新 EF 中的实体而不再次检索它？

> ID：11279344
> 
> 赞同：5
> 
> 时间：2012-07-01T03:29:30.037
> 
> 标签：asp.net, vb.net, linq, entity-framework

听起来很容易，对吧？这是场景...

```
Private dbQuery As New ReefEntities

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        CurrentCoral = (From c In dbQuery.Corals Where c.CoralID = intCoralID).FirstOrDefault
       txtCommonName.Text = CurrentCoral.CommonName
    End If
End Sub

Protected Sub btnSave_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnSave.Click
    'how do I access the coral from the page load to update it?
   CurrentCoral.CommonName = strName
   dbQuery.SaveChanges()
End Sub 
```

我不想重新查询我的结果，我想从页面加载更新查询，然后保存更改，对吗？如何访问该原始对象以更新它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:59:03.883

HTTP 是一种无状态协议，因此，您向服务器发出的每个请求都需要重建您的对象图，除非您将其持久化到某个地方。有很多方法可以在网络“会话”中保存数据。在 ASP.NET 中，您可以将数据存储在 cookie、服务器端会话、视图状态、表单变量等中。

首先，当您在 Page_Load 中完成 CurrentCoral 时，您会将其从对象上下文中分离出来

```
dbQuery.Detach(CurrentCoral) 
```

然后把它放在像视图状态这样的数据存储中。

```
Me.ViewState.Add("CurrentCoral", CurrentCoral) 
```

在单击保存按钮时的下一个 Web 请求中，从视图状态检索实体并将其附加到新对象上下文。

```
CurrentCoral = CType(Me.ViewState("CurrentCoral"), Coral)
dbQuery.Attach(CurrentCoral)
CurrentCoral.CommonName = strName
dbQuery.SaveChanges() 
```

请原谅任何语法错误。VB.NET 不是我的第一语言！有关使用 Entity Framework 附加和分离实体的更多详细信息，请参阅以下文章。

[附加和分离对象](http://msdn.microsoft.com/en-us/library/bb896271.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T05:02:56.193

您可以将 CurrentCoral 对象放入 ViewState 或 Session，然后在 Click 事件中检索它。

```
 Dim oCurrentCorral as Object = ViewState("CurrentCoral")
 dbQuery.ObjectStateManager.ChangeObjectState(oCurrentCoral, System.Data.EntityState.Added)
 dbQuery.SaveChanges() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T14:26:25.057

如果请求是回发，则根本不会加载记录`Page_Load`——没有什么可重新查询的，因为您根本没有在请求中进行查询。我想说只是在回发处理程序中重新查询，一次更新数据库的开销可能远小于始终发送在 ViewState 中序列化的整个实体的开销。

# php - PHP 表单必须提交两次才能更新复选框

> ID：11279348
> 
> 赞同：2
> 
> 时间：2012-07-01T03:31:29.020
> 
> 标签：php, sql, forms

我对 PHP 还是比较陌生。我正在尝试建立一个隐私设置页面，让成员选择退出触发事件的自动电子邮件（即私人消息通知）。我希望根据数据库设置自动设置复选框。到目前为止，表单确实正确更新了数据库，但复选框状态不会显示正确的设置，除非两次按下提交按钮，或者重新加载页面。设置为“0”表示未选中，“1”表示选中。我很想使用 Ajax 或 jQuery 来处理这个问题，但我根本不知道这些。

**隐私设置.php**

```
<?php
  $id = "";
  $pm_mail_able = "";
  $pm_email = "";

  if (isset($_GET['id'])) {
    $id = preg_replace('#[^0-9]#i', '', $_GET['id']); // filter everything but numbers
  } else if (isset($_SESSION['idx'])) {
    $id = $logOptions_id;
  } else {
    header("location: index.php");
    exit();
  }

  //query to get checkbox status
  $sql = mysql_query("SELECT * FROM members WHERE id='$id'");

  while($row = mysql_fetch_array($sql)){
    $pm_mail_able = $row['pm_mail_able'];
  }

  switch ($pm_mail_able) {
    case 0:
      $pm_setting = NULL;
      break;
    case 1:
      $pm_setting = "checked=\"checked\"";
      break;
  }

  if(isset($_GET['pm_email']) && !empty($_GET['pm_email'])) {
    $updateqry = mysql_query("UPDATE members SET pm_mail_able='1' WHERE id='$id'");
  } else {
    $updateqry = mysql_query("UPDATE members SET pm_mail_able='0' WHERE id='$id'");
  }

?>

<html>
    Email Notifications<br />

    <form name="testform" method="get" action="PvResult.php">
        When a friend sends me a private message
        <input type="checkbox" name="pm_email" value="on"<?php echo $pm_setting;?> />
        <br /><br />
        <input type="submit" value="Submit" />
    </form>
</html> 
```

**PvResult.php**

```
<?php

  $url = 'http://www.mywebsite.com';

  //If the form isn't submitted, redirect to the form
  if(!isset($_GET['Submit']))
    header('Location: '.$url.'/privacysettings.php');

  //Redirect to the correct location based on form input
  $pm_email = $_GET['pm_email'];
  $url .= '/privacysettings.php?pm_email='.$pm_email;

  header('Location: '.$url);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T04:25:35.190

好的，希望这不仅可以回答您的问题，还可以为您提供一些您可能想要考虑的最佳实践。

您可以相对容易地将这两个脚本合并为一个。另外，我强烈建议使用 POST 而不是 GET；GET 非常有限，并不打算像您使用它一样提交数据。如果您要更改后端存储中的数据，那么使用 GET 会很麻烦。也许不是今天，也许不是明天，但它会的，相信我。

你*真的*应该考虑[转移到 PDO](http://us2.php.net/manual/en/ref.pdo-mysql.php)而不是 mysql_ 函数。PDO 在处理参数化查询方面要好得多，为了更好的安全性，你真的应该在这里拥有它，如果有一天你想移动到不同的数据库系统，它更便携。

我对您的应用程序如何获得 $id 仍然有些模糊。大多数应用程序从 $_SESSION 变量中获取它，以确保用户已成功验证登录。如果你不这样做，*请*这样做。您可能想彻底[消化这篇文章](https://stackoverflow.com/questions/549/the-definitive-guide-to-forms-based-website-authentication)，它有很多关于身份验证和“记住我”类型功能的多汁最佳实践。

这里有一点重写。我还没有实际测试过它，但它应该可以让你很好地了解如何满足你的迫切需求。如果它抛出任何错误（请记住免责声明：我还没有实际测试过它！），请告诉我，我会尝试调试它。

```
<?php
$message = '';
$pm_setting = '';
$id = 0;

// Put your $id retrieval logic here.  It should look something like:
if (isset($_SESSION['id'])) {
    $id = $_SESSION['id'];
    if (!preg_match('/^\\d{1,10}$/', $id) > 0) {
        // Someone is trying to hack your site.
        header("location: scum.php");
        exit();
    }
    $id = intval($id);
}
// Quick security note: You might want to read up on a topic called
// session hijacking if you want to ensure your site is secure and
// this $id isn't spoofed.

if (isset($_POST['Submit'])) {
    // The form is being submitted.  We don't need to read the current
    // pm_mail_able setting from the database because we're going to
    // overwrite it anyway.
    if ($id > 0) {
        $pm_mail_able = 0;
        if (isset($_POST['pm_email']) && $_POST['pm_email'] === 'on') {
            $pm_mail_able = 1;
            $pm_setting = 'checked ';
        }
        $query = 'UPDATE members SET pm_mail_able='.$pm_mail_able.
            ' WHERE id = '.$id;
        mysql_query($query);
        // Another quick security note: You REALLY need to consider
        // updating to PDO so that you can bind these parameters
        // instead. The mysql_ functions are probably going to be
        // deprecated soon anyway.

        if (mysql_affected_rows($query) > 0)
            $message = '<p style="color: #00a000;">Settings saved!</p>';
        else
            $message = '<p style="color: #a00000;">User id not valid.</p>';
    }
    else
        $message = '<p style="color: #a00000;">User id not valid.</p>';
}

else {
    // This is the first load of the form, we need to just display it
    // with the existing setting.
    if ($id > 0) {
        $query = mysql_query('SELECT * FROM members WHERE id = '.$id);
        if (($row = mysql_fetch_array($query, MYSQL_ASSOC)) !== FALSE)
            if ($row['pm_mail_able'] === 1) $pm_setting = 'checked ';
    }
}

?>
<html>
    <body>
        <?= $message ?>
        <!-- Without action parameter, form submitted to this script. -->
        <form name="testform" method="post">
            E-mail notifications<br />
            <input type="checkbox" name="pm_email" value="on" <?= $pm_setting ?>/>
            When a friend sends me a private message
            <br /><br />
            <input type="submit" value="Submit" />
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T03:47:10.333

尝试进行这些设置，看看它是否会起作用：

1）您需要在“on”和“checked=checked”之间添加一个空格

```
<input type="checkbox" name="pm_email" value="on" <?php echo $pm_setting;?> /> 
```

2）您必须通过其名称引用提交按钮，而不是其值

```
<input type="submit" name="Submit" value="Send" /> 
```

3) 当设置为“0”时，设置`$pm_setting`为空字符串，而不是`NULL`

```
case 0:
    $pm_setting = ''; 
```

4）也许有一些问题`$_GET['pm_email']`并且`else`总是被执行

5）如果当你按下提交按钮两次时一切正常，这意味着表单正在传递一些使代码工作的 GET var，所以尝试发现这是什么 var

# python - 使用返回或缩进关闭函数是否更pythonic？

> ID：11279349
> 
> 赞同：3
> 
> 时间：2012-07-01T03:31:47.130
> 
> 标签：python

如果我有一个不需要返回变量的函数，那么关闭这样的函数是否被认为是更好的编码实践：

```
def foo():
    """Code"""
    return
# More code 
```

还是这样？

```
def bar():
   """Code"""
# More code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T03:33:46.453

我只会使用裸返回来提前退出该函数。在函数结束时，它让我想知道您是否打算返回某些东西而忘记完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T03:34:56.903

我认为省略 return 语句是最 Pythonic 的事情。它清楚地表明该函数并非旨在返回任何内容，更重要的是，我认为它看起来更好。

```
def hello():
    print 'hello world' 
```

相对

```
def hello():
    print 'hello world'
    return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T03:52:51.327

`return None`当您的函数正在改变其他东西时（例如 do_something_to_something()），或者是一个自身发生变异的类的实例方法时，明确表示。

Make sure the behaviour is documented so it doesn't muck you/or anyone else up later though.

# iphone - 错误 0xE8008016

> ID：11279352
> 
> 赞同：1
> 
> 时间：2012-07-01T03:32:29.450
> 
> 标签：iphone, ios, code-signing

我又遇到了另一个 iPhone 问题。我完成了我的应用程序，在将其提交到应用商店之前，我需要在手机上对其进行测试。但是，每当我按运行时，我都会收到这样的错误消息。

“您的应用程序的代码签名权利文件中指定的权利与您的配置文件中指定的权利不匹配。

(0xE8008016)"

我有一个用于开发和分发的配置文件，以及用于开发和分发的证书以及我的设备在门户中列出。

我不是 Xcode 的真正专家，所以如果你回答，你能解释一下每一步的修复细节吗？我知道很多其他人都问过这个问题，但我无法遵循那里的答案。

提前致谢， 威尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T14:41:22.730

检查您使用的构建配置是否未指向某些 Entitlements.plist 文件，该文件可能不存在或包含有关证书/配置文件对的错误数据。如果是这种情况，后者中的设置将覆盖您在构建设置中设置的任何内容，从而导致使用错误的实际证书。

要仔细检查这一点，请在 Target/Project Build Settings 的“Code Signing Entitlements”部分中找到您的配置。

就我而言，当它指向“entitlements.plist”时，我收到了完全相同的警报，在项目的任何地方都找不到它。为目标构建配置清除此文件的任何提及解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T03:40:33.980

拥有配置文件与在构建设置中设置它以与项目一起运行不同。单击左侧边栏上的目标，然后单击项目。单击构建设置选项卡。在代码签名下，在每个下拉框中选择正确的配置文件。假设您确实拥有正确的配置文件和证书，它应该在那之后正确构建。

如果您现在只是在提交到商店之前在手机上进行测试，那是另一个问题，但我想您会自己解决这个问题。

# java - ArrayIndexOutOfBounds 异常

> ID：11279353
> 
> 赞同：-1
> 
> 时间：2012-07-01T03:32:40.977
> 
> 标签：java, exception

```
public class Repetition {
  public static void main (String[]a){
    int[] x;
    x = new int[10];
    int i;
    int n=0;
      for (i=0;i<x.length;i++){
        n++;
        x[i]=n;
        System.out.print(x[i] + " ");
      }
    i=0;
    while (x[i]<x[10]){
      System.out.println(x[i]);
      i++;
   }
} 
```

运行程序后，它显示此错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 10
at Repetition.main(Repetition.java:14)
1 2 3 4 5 6 7 8 9 10 Java Result: 1 
```

实际上，我还是这门语言的新手。我正在尝试创建一个程序，它将值分配给 10 个数组并显示它们并从第一个数组开始再次显示。

我希望输出是这样的：

```
1 2 3 4 5 6 7 8 9 10

1 2 3 4 5 6 7 8 9 10 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T03:36:15.993

表示您尝试`ArrayIndexOutOfBoundsException`使用数组索引，但该索引不存在。例如，如果数组中的最后一个有效索引是 9，而您使用 10，则会收到此错误。

这行代码就是问题所在（错误信息告诉你行号）：

```
while (x[i]<x[10]){ 
```

`x`是一个长度为 10 的数组，这意味着它具有从 0（零）到 9 的索引。`x[10]`不存在，因此您会收到错误消息。

# c - Fedora 14 x86_64 函数“同步”的隐式声明

> ID：11279355
> 
> 赞同：3
> 
> 时间：2012-07-01T03:33:11.687
> 
> 标签：c, posix, fedora

我的`#include <unistd.h>`源文件中包含了手册页中指定的标题`sync(2)`。但是，当我编译我的程序时，我收到以下警告。

> ./test.c:25:3: 警告：函数'sync'的隐式声明</p>

我在这里错过了什么吗？下面是我的小测试程序的源代码。

```
#include <fcntl.h>
#include <unistd.h>
#include <stdio.h>

int main(int argc, char *argv[]) {
  // Open file ./test.txt and append to it
  int fd = open("./test.txt", O_RDWR | O_CREAT | O_TRUNC, 0);
  if (fd < 0) {
    perror("Failure to open file: ");
    close(fd);
    return(1);
  }
  // Write Hello World\n\0 100 time to ./test.txt
  for (int i = 0; i < 100; ++i) {
    ssize_t bytes = write(fd, "Hello World\n", 12); // 12 for Null '\0'
    if (bytes != 12) {
      perror("Failure to write to file");
      close(fd);
      return(1);
    }
  }

  // Close the file for the exercise
  sync();
  close(fd);

  // This will allow lseek to go back
  fd = open("./test.txt", O_RDWR, 0);
  // This will not allow lseek to go back
  //fd = open("./test.txt", O_RDWR | O_APPEND, 0);
  if (fd < 0) {
    perror("Failure to open files: ");
    close(fd);
    return(1);
  }

  if (lseek(fd, -500, SEEK_END) == -1) {
    perror("Test failed: ");
    close(fd);
    return(1);
  }

  ssize_t bytes = write(fd, "\n\nHello Dog\n\n", 14);
  if(bytes != 14) {
    perror("Failure to write: ");
    close(fd);
    return(1);
  }

  write(1, "Done!!!\n", 9);
  close(fd);

return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:53:46.760

在评论中，我问：

> 你的编译器选项是什么？您是否设置`-D_XOPEN_SOURCE=700`（或其他值）？您是否指定`-std=c99`而不是`-std=gnu99`，或类似的东西？

对此的回应是：

> 我曾经`-std=c99`在 for 循环中允许变量初始化。`-std=gnu99`似乎成功了。

当您设置 时`-std=c99`，您必须明确请求所有不属于 C99 的符号（至少是第一个近似值）。如您所见，获取所有符号的最简单方法是使用`-std=gnu99`。如果您愿意，您可以更精确地使用诸如此标头（我称之为`posixver.h`）之类的选项：

```
#ifndef JLSS_ID_POSIXVER_H
#define JLSS_ID_POSIXVER_H

/*
** Include this file before including system headers.  By default, with
** C99 support from the compiler, it requests POSIX 2001 support.  With
** C89 support only, it requests POSIX 1997 support.  Override the
** default behaviour by setting either _XOPEN_SOURCE or _POSIX_C_SOURCE.
*/

/* _XOPEN_SOURCE 700 is loosely equivalent to _POSIX_C_SOURCE 200809L */
/* _XOPEN_SOURCE 600 is loosely equivalent to _POSIX_C_SOURCE 200112L */
/* _XOPEN_SOURCE 500 is loosely equivalent to _POSIX_C_SOURCE 199506L */

#if !defined(_XOPEN_SOURCE) && !defined(_POSIX_C_SOURCE)
#if __STDC_VERSION__ >= 199901L
#define _XOPEN_SOURCE 600   /* SUS v3, POSIX 1003.1 2004 (POSIX 2001 + Corrigenda) */
#else
#define _XOPEN_SOURCE 500   /* SUS v2, POSIX 1003.1 1997 */
#endif /* __STDC_VERSION__ */
#endif /* !_XOPEN_SOURCE && !_POSIX_C_SOURCE */

#endif /* JLSS_ID_POSIXVER_H */ 
```

在 Linux 上，您可能更喜欢使用`_XOPEN_SOURCE`set to 700（对于 POSIX 2008），但我使用的许多机器对此没有很好的支持。

# ajax - Telerik 网格：使用 Ajax 绑定检索行数

> ID：11279360
> 
> 赞同：1
> 
> 时间：2012-07-01T03:35:30.670
> 
> 标签：ajax, asp.net-mvc, telerik

如何在 Telerik ASP.Net MVC 网格中使用 Ajax 绑定访问网格行数？我需要在页脚中显示总计，请参见下面的代码片段。总数必须在插入和删除时更新。

使用服务器绑定，有@Model.Count()。如何使用 Ajax 绑定做同样的事情？

谢谢你！

```
 @{
    Html.Telerik()
        .Grid<ContractMonth>()
        .Name("contractMonthGrid")
        .DataBinding(dataBinding => dataBinding
            .Ajax()
            .Select("_AjaxBinding", "ContractMonth")
            .Insert("_AjaxInsert", "ContractMonth")
            .Delete("_AjaxDelete", "ContractMonth")
            )
        .DataKeys(keys => keys.Add(c => c.Id))
        .ToolBar(commands => commands.Insert())
        .Columns(columns =>
        {
            columns.Bound(o => o.StartDate).EditorTemplateName("Date").FooterTemplate(@<text>@Model.Count()</text>); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T05:10:05.380

Telerik MVC 网格支持服务器和[Ajax 聚合](http://demos.telerik.com/aspnet-mvc/razor/grid/aggregatesajax)：

> 支持以下聚合：
> 
> *   平均的
> *   数数
> *   敏
> *   最大限度
> *   和
> 
> 要为列指定聚合，请使用 Aggregates 方法

所以在你的样本中：

```
.Columns(columns =>
    {
        columns.Bound(o => o.StartDate)
               .EditorTemplateName("Date")
               .Aggregate(aggregates => aggregates.Count())
               .FooterTemplate(@<text>@item.Count</text>)
               .ClientFooterTemplate("<#= Count #>");
    } 
```

如果您需要网格“外部”的行数，您可以使用网格的[客户端 API](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html)：

```
<script type="text/javascript">
$(function() {
    var totalRows = $("#contractMonthGrid").data("tGrid").total;
    //do something with totalRows 
});
</script> 
```

# android - 如何为我的应用创建安全的 Rails REST Api？

> ID：11279368
> 
> 赞同：5
> 
> 时间：2012-07-01T03:37:19.463
> 
> 标签：android, ruby-on-rails, authentication, rest

因此，我正在为需要 Web 后端的 Android 应用程序。该网站正在使用 Ruby on Rails 构建。它有一个面向客户端的端（漂亮的 HTML 页面），但我也希望它能够通过 JSON 向我的 Android 应用程序提供信息。但是，我不希望全世界都能得到这个 JSON，因为它包含一些可能危险的信息。如何锁定 JSON 格式的页面并仍然可以从 Android 应用程序访问它们？

作为记录，我使用 Rails 3.1`has_secure_password`进行现场用户身份验证，并且我希望有一些对 HTML 请求开放但对 JSON 锁定的路由（例如，`/users`url 应该可以作为 HTML 访问，但可以作为 JSON 访问）只能通过某种安全方法从我的应用程序访问）。

有什么方法可以做到这一点，还是 API 必须是一个单独的应用程序（这对于数据库设置等来说会非常不方便）？

澄清：基本上我想做的是从我的 Rails 应用程序创建一个安全的基于令牌的 JSON API，我不想使用 Devise 或其他会迫使我改变我已经存储用户/通行证信息的方式的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:03:22.300

根据您使用的 Rails 版本，部分工作已经使用 respond_to 方法完成，该方法允许您为同一个 url 提供 JSON 和 HTML。现在，要锁定 JSON 访问，您可以定义一个检查应用程序访问的方法，并在提供 JSON 响应时调用它

```
def with_access_check()
  if allowed # Or any verification you want.
    yield
  else
    # Raise a 403 maybe?
  end
end

# Then in every method that needs a check:
respond_to :json { with_access_check { render :json => @stuff } } 
```

最后，除非您在 json 和 html 视图上提供非常不同的数据（如果您对两者使用相同的 url，这很奇怪）请考虑没有什么可以阻止攻击者/恶意用户从您的 HTML 中提取相同的数据.

# qt - 将 UTF-16 QByteArray 转换为 QString

> ID：11279371
> 
> 赞同：5
> 
> 时间：2012-07-01T03:39:12.577
> 
> 标签：qt, unicode

我有一个 QByteArray，其中包含 UTF-16 格式的字节。

Java 程序使用套接字通过套接字向 QT 程序发送数据

```
//dos is DataOutPutStream
dos.writeChars("hello world"); 
```

在 QT 程序的接收端，我将套接字中的数据读取到 QByteArray 中，并且我想将其转换为 QString。检查 QByteArray 的数据变量它有 0h0e0l0l0o0 0w0o0r0l0d

当我尝试像这样用它制作一个 QString

```
QString str(byteArray) 
```

结果字符串可能是空的，可能是因为它在开始时遇到了一个 0 字节，并且因为我正在使用的构造函数的文档说它在内部使用 fromAscii 而我传递的不是 ascii。

我想我必须以某种方式使用 QString::fromUTF-16 但这需要一个 ushort* 并且我有一个 QbyteArray。

请告知最好的方法是什么。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T03:45:03.887

获取指向[QByteArray.data()](http://doc.trolltech.com/4.7-snapshot/qbytearray.html#data-2)的指针 并将其转换为 ushort*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T15:37:08.323

假设您的 utf-16 数据具有相同的字节序或具有 BOM（字节顺序标记），这将起作用：

```
QByteArray utf16 = ....;
auto str = QString::fromUtf16(
                reinterpret_cast<const ushort*>(utf16.constData())); 
```

# c# - 如何将消息附加到 SMSComposeTask 或 EmailComposeTask 的末尾？

> ID：11279376
> 
> 赞同：0
> 
> 时间：2012-07-01T03:40:00.220
> 
> 标签：c#, windows-phone-7

我想附加一条小消息，说明在我的应用程序中选择使用 SMSComposeTask 或 EmailComposeTask 时如何向用户发送消息。我希望它说类似`"sent from" + my application name`但我不确定如何导航到用户消息的末尾然后添加我的文本。到目前为止，我刚刚浏览了几行并手动添加了它，但我想转到下一行并说明消息，以防止用户在达到 160 个字符限制后发送多条短信。

MainPage.xaml.cs

```
private void Messaging_Click(object sender, RoutedEventArgs e) {
  SmsComposeTask smsComposeTask = new SmsComposeTask();
  smsComposeTask.To = "";
  smsComposeTask.Body = "Check out this application!" + "\n\n" + "sent from " + "QuickStarts";
  smsComposeTask.Show();
}
private void Email_Click(object sender, RoutedEventArgs e) {
  EmailComposeTask emailComposeTask = new EmailComposeTask();
  emailComposeTask.Subject = "Share from " + "QuickStarts";
  emailComposeTask.Body = "Check out this application!" + "\n\n" + "sent from " + "QuickStarts";
  emailComposeTask.To = "";
  emailComposeTask.Cc = "";
  emailComposeTask.Bcc = "";
  emailComposeTask.Show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:58:36.670

一旦您显示了 SmsComposeTask 或 EmailComposeTask，您就无法控制用户输入的内容。您可以做的最好的事情是在您的应用程序中显示一个文本框，以便用户可以键入其消息，然后附加您的“发送自”文本，执行您需要的所有检查，然后才显示任务。但是用户之后仍然可以更改消息。

# couchdb - 处理 BigCouch 中复制引起的冲突

> ID：11279382
> 
> 赞同：48
> 
> 时间：2012-07-01T03:42:04.580
> 
> 标签：couchdb, bigcouch

CouchDB[复制和冲突](http://wiki.apache.org/couchdb/Replication_and_conflicts)wiki 页面建议使用`_bulk_docs`with`all_or_nothing=true`强制写入新版本的文档，即使这会在写入时引入冲突，但在随后的读取后不久就会解决。我已经实现了这一点，从概念上讲它似乎工作正常。

但 BigCouch 不支持`all_or_nothing`语义，因此写入批量文档可能会返回 409 Conflict 结果。为 BigCouch 中的复制引入的冲突实施类似的应用程序级冲突解决方案的最佳实践是什么？我应该查看写入时冲突解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T12:13:15.293

如果在附件过程中发生冲突，则获取要更新的文档的修订号，并在发生冲突时递归调用，

```
$url = "http://couchdb/DATABASE/DOCID/ATTACHMENTNAME?rev=$rev";
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt( $ch, CURLOPT_PUT, true );
curl_setopt( $ch, CURLOPT_URL, $url );
curl_exec( $ch ); 
```

# javascript - 无法在 jsf 页面中执行 Javascript

> ID：11279383
> 
> 赞同：7
> 
> 时间：2012-07-01T03:42:09.707
> 
> 标签：javascript, jsf, facelets

我是 jsf 的新手。我一直在尝试用命令按钮做一个简单的 Javascript 函数。我尝试了很多次，但甚至无法发出警报消息。这是我的代码的一部分。请任何人都可以指导我，告诉我出了什么问题，我应该怎么做才能让它运行？

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core">
<h:head>
  <script type="text/javascript">
  function test(){
    alert('test');
    alert(document.getElementById('frmDashBoard:testbt').value);
  }
  </script>
</h:head>
<h:body>
  <ui:composition template="../../template/commonLayout.xhtml"> 
    <ui:define name="content">
      <div>
        <h:form id="frmdashboard">
          <div name="form_panel" style="width: 984px">
               <h:commandButton id="testbt" value="#{message.btn_dashboard_search}" action="#{searchBLAction.doAction}" onclick="test()" />
          </div>
        </h:form>
      </div>
    </ui:define>
  </ui:composition>     
</h:body> 
</html> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-01T05:24:36.997

除了这个小写/大写拼写错误（顺便说一句，这不会导致函数根本不被调用），你的具体问题是因为这个页面被设计为模板客户端使用`<ui:composition>`. Facelets 在运行时会**忽略**`<ui:composition>`标签之外的任何内容。此内容仅对可视化网页设计师有用，但一旦在运行时编译和执行，它就会被完全忽略。相反，在您的情况下，合成的内容将插入到主模板中。**`commonLayout`**

 **您需要将`<script>`元素放在 an`<ui:define>`中，这样它将被带入最终的 Facelets 组合中。

```
<ui:define name="...">
    <script>
        ...
    </script>
    ...
</ui:define> 
```

或者，更好的是，将JS函数放在文件夹中自己的JS文件中`/resources`，引用如下：

```
<ui:define name="...">
    <h:outputScript name="some.js" target="head" />
    ...
</ui:define> 
```

多亏了，它会在构建视图期间`target="head"`自动重新定位到 HTML中。`<head>`

### 也可以看看：

*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-25T09:04:56.717

任何在 ui:composition 之外定义的东西都会被忽略。所以将你的内容放在这个标签中，它就会起作用：像这样的东西：

```
<ui:composition template="/WEB-INF/tags/layout.xhtml"> 
<ui:include src="/tags/common.xhtml"></ui:include>  
<ui:define name="content">
<h:outputScript name="validation.js" library="javascript"></h:outputScript> 
```**

# php - PHP PDO 不插入新记录

> ID：11279385
> 
> 赞同：2
> 
> 时间：2012-07-01T03:42:46.997
> 
> 标签：php, mysql, database, pdo, prepared-statement

我不明白我的问题似乎是什么。我得到以下 PHP 代码：

```
include_once 'db.inc.php';
    try 
    {
        $db = new PDO(DB_INFO, DB_USER, DB_PASS);
    } 
    catch(PDOException $e) 
    {
        echo 'Connection failed: ', $e->getMessage();
        exit();
    }

    $title = htmlentities($_POST['title']);
    $entry = htmlentities($_POST['entry']);

    $sql = "INSERT INTO entries (title, entry) VALUES (?, ?)"; 
    $stmt = $db->prepare($sql); 
    $stmt->execute(array($title, $entry)); 
    $stmt->closeCursor(); 
```

我没有收到任何类型的错误，并且脚本似乎可以正常工作，但是它没有向数据库中插入任何内容。无论我尝试什么，它都不会做任何事情。

* * *

## 编辑

排序:) 我不知道`$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);`。

它给了我“未捕获的异常 'PDOException' 和消息'SQLSTATE [3D000]：无效的目录名称：1046 未选择数据库'”。

原来我写`mysql:host=127.0.0.1;db_name=test1`而不是`mysql:host=127.0.0.1;dbname=test1`在我的配置文件中。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T03:57:42.217

设置 PDO 在执行失败时抛出异常

```
$db = new PDO(DB_INFO, DB_USER, DB_PASS);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

# c - 如何检查该函数在编译器上是否可用？

> ID：11279388
> 
> 赞同：0
> 
> 时间：2012-07-01T03:43:15.203
> 
> 标签：c, compiler-directives

如果编译器内置函数，有没有办法在编译时检测？例如，像这样：

```
#ifndef ITOA_FUNCTION
#define itoa myitoaimplementation
#endif 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T03:49:47.797

不，没有任何直接的东西。你能做的最好的事情就是从平台、编译器版本等方面进行猜测。

在大多数情况下，我更喜欢其他两条路线之一。一种是只给你自己的实现一个不同于编译器使用的名称，并且无论编译器是否提供类似的东西，都始终使用它。

第二种是将您的此类函数的实现放入单独的文件中，并处理makefile中的存在/不存在，只是决定是否将该文件包含在项目中。

# android - 如何在第一次绘制时显示以编程方式设置的布局？

> ID：11279389
> 
> 赞同：0
> 
> 时间：2012-07-01T03:43:19.253
> 
> 标签：android, textview, android-linearlayout

我有这个 LinearLayout ，它是 RelativeLayout 的子级以及 ListView 等：

```
<LinearLayout
    android:id="@+id/color_bar"
    android:layout_alignParentBottom="true"
    android:layout_weight="1"
    android:layout_width="match_parent"
    android:layout_height="16dp"
    android:padding="0dp"
    android:orientation="horizontal"
>
    <TextView
        android:id="@+id/space_used_bar"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:background="#006688"
        android:padding="0dp"
    />
    <TextView
        android:id="@+id/space_free_bar"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:background="#444444"
        android:padding="0dp"
    />
</LinearLayout> 
```

我不打算在这些 TextView 中放置任何文本；他们只是为了他们的背景颜色值。我想以编程方式设置这两个 TextView 的宽度，我可以这样做，但问题是第一次呈现 LinearLayout 时，它没有被绘制。它没有大小，我也看不到其中包含的 TextView。当用户几乎做任何事情（例如锁定屏幕、按下主页按钮、单击列表项、选择选项项等）时，TextViews 会正确显示。只是在活动打开的第一刻，TextViews 和 Layout 根本没有出现。有谁知道问题可能是什么？

PS 我已经尝试在 LinearLayout 以及各个 TextView 上调用 invalidate。

编辑：这里是回调

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    //Log.d(TAG, "onCreate()");

    super.onCreate(savedInstanceState);
    setContentView(R.layout.browser);
    topMenu = getActionBar();
    lv = (ListView) findViewById(R.id.file_list);
    spaceUsedBar = (TextView) findViewById(R.id.space_used_bar);
    spaceFreeBar = (TextView) findViewById(R.id.space_free_bar);
    spaceUsed = (TextView) findViewById(R.id.space_used);
    spaceFree = (TextView) findViewById(R.id.space_free);
    colorBar = (LinearLayout) findViewById(R.id.color_bar);
    stat = new StatFs(Environment.getExternalStorageDirectory().getPath());

    if (savedInstanceState == null)
    {
        if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))
            currentDirectory = externalStorageDirectory;
        else
        {
            currentDirectory = new File(ROOT_DIR);
            Toast t = Toast.makeText(c, R.string.not_mounted, Toast.LENGTH_SHORT);
            t.show();
        }
    }
    else
    {
        currentDirectory = new File(savedInstanceState.getString("savedPath"));
        int savedPosition = savedInstanceState.getInt("savedPosition");
        int savedListTop = savedInstanceState.getInt("savedListTop");
        if (savedPosition >= 0)
            lv.setSelectionFromTop(savedPosition, savedListTop);
    }
}

@Override
public void onStart()
{
    //Log.d(TAG, "onStart()");

    super.onStart();
    lv.setOnItemClickListener(this);
    lv.setMultiChoiceModeListener(this);
    browseTo(currentDirectory);
}

@Override
public void onResume()
{
    //Log.d(TAG, "onResume()");

    super.onResume();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:09:07.537

我猜您在为 TextViews 设置了新宽度之后以及当系统在用户离开然后返回（锁定屏幕、主页按钮、方向更改等）后重新绘制布局时，您还没有重新绘制布局。但我没有看到你的 onCreate() 和 onResume() 代码，所以这只是一个猜测......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T04:09:08.450

我不确定这是否可行，但请尝试以下方法之一（在 textviews 上）。例如，您为其分配一些初始宽度或重量，然后在该代码执行时以编程方式相应地调整它......

```
android:layout_width="40dp" 
```

如果您希望它们占据屏幕的百分比，请使用 weight 属性：

```
android:layout_weight="2" 
```

# zend-framework - Zend Framework 内部路由

> ID：11279393
> 
> 赞同：1
> 
> 时间：2012-07-01T03:44:22.433
> 
> 标签：zend-framework, url-rewriting

例如，我的应用程序中有一个名为 page2 的页面，我想访问它，例如 mysite.com/page2

在 application.ini 文件中我会有一个部分

```
resources.router.routes.index.route = '/page2/'
resources.router.routes.index.defaults.controller = index
resources.router.routes.index.defaults.action = page2 
```

我的问题是，如果我有几个要作为索引控制器的子级访问的页面怎么办。每次我有一个新页面时，必须有一种方法不涉及在 application.ini 中创建一个新部分......

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:41:39.603

Ekerete Akpan 的这个[StaticRoute 插件](https://github.com/jara/jara-base/blob/master/library/Jara/Plugin/StaticRoutes.php)使用反射来检查您的默认控制器，并`/actionname`为它在那里找到的所有操作方法添加表单的静态路由。

这意味着您不必为每个操作添加显式路由。只需在默认控制器和预期位置的相应视图脚本中添加一个操作。无需更改任何路由文件或`application.ini`只需添加新的顶级 url。

但是请注意，由于插件使用反射来检查您的默认控制器，因此使用它会影响性能。

# jquery - 带有 Twitter Bootstrap 的完整日历？

> ID：11279394
> 
> 赞同：25
> 
> 时间：2012-07-01T03:44:23.017
> 
> 标签：jquery, twitter-bootstrap, fullcalendar

Fullcalendar 小部件很棒。我在 Twitter Bootstrap 项目中使用它，它看起来几乎是完美的开箱即用。

但是，突出的一件事是按钮的**HTML**，例如前进、后退和今天。有没有办法**改变 Fullcalendar 输出按钮代码**的方式，使其符合 Bootstrap 的*Button Group*？例如：

```
<div class="btn-group">
  <button class="btn">1</button>
  <button class="btn">2</button>
  <button class="btn">3</button>
</div> 
```

如果不是，我想一种方法是自己创建按钮并将它们连接到 Fullcalendar 小部件。但我不是 jquery 专业人士，我更愿意尝试更简单的东西。谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-02T22:27:57.847

正如您在问题中暗示的那样，有两种方法可以做到这一点。任何一个：

1.  制作您自己的**fullcalendar.js**自定义构建。

2.  在呈现后处理默认 HTML，最好使用 jQuery 之类的东西。

## 自定义构建

如果要执行前者，则需要编辑[Header.js](https://github.com/arshaw/fullcalendar/blob/master/src/Header.js)文件，然后重新编译并提供您的自定义版本的**fullcalendar.js**。但是，我会回避它，因为它会增加将来更新 FullCalendar 插件的开销。但是，如果您想走那条路线，那是您的决定。优点是你可以控制一切，所以它从一开始就按照你想要的方式呈现。

## jQuery 覆盖

如果你想覆盖默认渲染，它只需要少量的 jQuery 行。例如：

```
var $fcButtons = $('[class*="fc-button"]').addClass('btn')
  , $oldTable = $('.fc-header-right > table');

$('<div>')
  .addClass('btn-group')
  .appendTo('.fc-header-right')
  .append($fcButtons);

$oldTable.remove(); 
```

这将撕掉三个默认按钮`<table>`并将它们扔到`<div>`一个`btn-group`类中。之后我们可以丢弃那个空表。

请记住，一堆 CSS 仍将附加到这些按钮，因此即使从技术上讲它们现在是“Twitter 引导”按钮组，它们仍然不会看起来那么漂亮。我假设，给出其他答案，你可以自己找出所有的 CSS。

## [JSFiddle 演示](http://jsfiddle.net/mmfansler/AJ2Mh/)

​</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-07T22:01:31.780

要添加来自@merv 的答案，我的完整日历版本不使用表格，所以我添加了这个 jquery 来更新按钮

```
$('.fc-toolbar').find('.fc-button-group').addClass('btn-group');
$('.fc-toolbar').find('.ui-button').addClass('btn btn-primary');
$('.fc-toolbar').find('.fc-prev-button').html($('<span />').attr('class', 'glyphicon glyphicon-chevron-left'));
$('.fc-toolbar').find('.fc-next-button').html($('<span />').attr('class', 'glyphicon glyphicon-chevron-right')); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T07:43:12.533

**这是全日历按钮**的默认 css

 **```
/* Buttons
------------------------------------------------------------------------*/
.fc-button {
    position: relative;
    display: inline-block;
    cursor: pointer;
    }

.fc-state-default { /* non-theme */
    border-style: solid;
    border-width: 1px 0;
    }

.fc-button-inner {
    position: relative;
    float: left;
    overflow: hidden;
    }

.fc-state-default .fc-button-inner { /* non-theme */
    border-style: solid;
    border-width: 0 1px;
    }

.fc-button-content {
    position: relative;
    float: left;
    height: 1.9em;
    line-height: 1.9em;
    padding: 0 .6em;
    white-space: nowrap;
    }

/* icon (for jquery ui) */

.fc-button-content .fc-icon-wrap {
    position: relative;
    float: left;
    top: 50%;
    }

.fc-button-content .ui-icon {
    position: relative;
    float: left;
    margin-top: -50%;
    *margin-top: 0;
    *top: -50%;
    }

/* gloss effect */

.fc-state-default .fc-button-effect {
    position: absolute;
    top: 50%;
    left: 0;
    }

.fc-state-default .fc-button-effect span {
    position: absolute;
    top: -100px;
    left: 0;
    width: 500px;
    height: 100px;
    border-width: 100px 0 0 1px;
    border-style: solid;
    border-color: #fff;
    background: #444;
    opacity: .09;
    filter: alpha(opacity=9);
    }

/* button states (determines colors)  */

.fc-state-default,
.fc-state-default .fc-button-inner {
    border-style: solid;
    border-color: #ccc #bbb #aaa;
    background: #F3F3F3;
    color: rgb(162, 48, 48);
    }

.fc-state-hover,
.fc-state-hover .fc-button-inner {
    border-color: #999;
    }

.fc-state-down,
.fc-state-down .fc-button-inner {
    border-color: #555;
    background: #777;
    }

.fc-state-active,
.fc-state-active .fc-button-inner {
    border-color: #555;
    background: #777;
    color: #fff;
    }

.fc-state-disabled,
.fc-state-disabled .fc-button-inner {
    color: rgb(122, 69, 69);
    border-color: #ddd;
    }

.fc-state-disabled {
    cursor: default;
    }

.fc-state-disabled .fc-button-effect {
    display: none;
    } 
```

因此，只需尝试将其添加到您的 CSS 并根据需要更改它们**

# mobile - 使用 screen.width 和 window.devicePixelRatio 来检测移动和/或视网膜显示器这是一种不好的方法吗？

> ID：11279401
> 
> 赞同：3
> 
> 时间：2012-07-01T03:46:42.700
> 
> 标签：mobile, responsive-design, media-queries, retina-display

我正在为企业开发网站。无论如何，它都不是一个网络应用程序，但我希望它在移动设备上看起来不错，而不是简单地扩展桌面版本。在对媒体查询和响应式/自适应设计方法进行大量研究之后，我的要求是移动布局只有在用户真正在小屏幕上时才会启动，而不仅仅是调整桌面窗口的大小，解决方案很简单，可以通过媒体来完成查询和最少的 javascript。

我想出的方法是这样的：

```
<script type="text/javascript"> 
var isRetina = window.devicePixelRatio > 1 ? true : false;
var isMobile = (screen.width < 768) ? true : false;

if (isMobile && isRetina) {
    SHOW MOBILE LAYOUT AND HI-RES IMAGES
} else if (isMobile && !isRetina) {
    SHOW MOBILE LAYOUT AND LO-RES IMAGES
} else if (!isMobile && isRetina) {
    <<SHOW HI_RES IMAGES>>
} else if (!isMobile && !isRetina) {
    SHOW DESKTOP LAYOUT AND LO-RES IMAGES
}
</script> 
```

在我采用这种方法之前，我想我会检查一下，看看是否有问题或可怕的陷阱在等着我。或者，如果有更简单/更好的方法来实现这个目标。我在 SO 上搜索了一堆，但没有看到任何提及使用这个完全相同的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:50:05.780

javascript 在加载 CSS 布局时不是首选方法的原因是，javascript 通常是浏览器呈现页面时加载的最后一个内容。这意味着在加载正确的 CSS 之前，您将在屏幕上看到您的初始布局。最简单和最理想的方法是使用 CSS3 媒体查询（类似这个简单的教程可能会有很长的路要走：[http](http://webdesignerwall.com/tutorials/responsive-design-in-3-steps) ://webdesignerwall.com/tutorials/responsive-design-in-3-steps ）。

您拥有的另一个选择是使用 Modernizr 来加载样式表或您可能希望根据视口大小加载的其他文件。查看[Modernizr Doc](http://modernizr.com/docs/)，您基本上可以“测试”当前浏览器上用于查看您的网页的功能和特性 - 并相应地加载文件。作为旁注，Modernizr 是一个 JS 库，因此在加载 CSS 文件时再次谨慎使用 - 众所周知，加载它们时不会出现初始布局的初始屏幕，但我仍然会说基于媒体查询加载布局的最佳实践是自己使用 CSS3 媒体查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-11T14:02:23.167

抱歉发帖回答，无法添加评论。 `window.devicePixelRatio`如果放大，在 Firefox（我相信 Mac）上将大于 1，这可能会导致错误

```
navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i) 
```

这可能会有所帮助

# php - Yii Active Record CExistValidator 似乎没有做任何事情

> ID：11279404
> 
> 赞同：0
> 
> 时间：2012-07-01T03:47:02.013
> 
> 标签：php, yii

我正在尝试使用存在验证规则来确保满足我的关系（即表 EventOther 中的 event_id 存在于表 Event 中）。我正在尝试使用（EventOther.php）

```
 public function rules(){
        return array(
                array('event_id','exists','allowEmpty'=>false,
                        'attributeName'=>'id','className'=>'Event',
                        'message'=>'Specified event does not exist. (event_id incosistent)')
    ); 
```

以及在数据库中创建新条目（id 为 17 的记录不存在）：

```
 $ev = new EventOther;
    $ev->event_id = 17;
    $ev->location_id = 1;
    $ev->location = "Test Location - hardcoded";
    if(!$ev->save()) print_r($ev->getErrors()); 
```

这总是导致 CDbException：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`fiss`.`event_other`, CONSTRAINT `event_other_ibfk_1` FOREIGN KEY (`event_id`) REFERENCES `event` (`id`)). The SQL statement executed was: INSERT INTO `event_other` (`event_id`, `location_id`, `location`) VALUES (:yp0, :yp1, :yp2) 
```

`$ev->event_id`此外，如果未设置，验证仍然通过，因为`'allowEmpty'=>false`它不应该。

`Event::model()->exists("id=2");`（其中 id 为 2 的记录存在）返回 1 而`Event::model()->exists("id=17");`返回空。

我是否误解/误用了 CExistValidator？非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T03:48:48.563

`array('event_id','exists','allowEmpty'=>false,`

应该：

`array('event_id','exist','allowEmpty'=>false,`

# android - Android浮动窗口（多任务分离活动）

> ID：11279410
> 
> 赞同：2
> 
> 时间：2012-07-01T03:48:33.010
> 
> 标签：android, multitasking, floating

如何为 Android 创建浮动活动？这似乎不是不可能的，因为我在商店里找到了一个[可行的样本][1]。似乎即使是 Android 2.1+ 也已经支持这一点。知道如何开始吗？

# bash - 具有多个强制性选项的 bash getopts

> ID：11279423
> 
> 赞同：50
> 
> 时间：2012-07-01T03:50:52.997
> 
> 标签：bash, getopts

是否可以使用 getopts 一起处理多个选项？例如，myscript -iR 或 myscript -irv。

另外，我有一种情况，基于条件脚本需要强制选项。例如，如果 script 的参数是一个目录，我需要指定 -R 或 -r 选项以及任何其他选项（myscript -iR mydir 或 myscript -ir mydir 或 myscript -i -r mydir 或 myscript -i -R mydir），如果只有文件 -i 就足够了（myscript -i myfile）。

我试图搜索但没有得到任何答案。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-07-01T04:08:25.127

您可以连接您提供的选项`getopts`并将它们分开。在您的`case`声明中，您将单独处理每个选项。

您可以在看到选项时设置一个标志，并检查以确保在`getopts`循环完成后强制“选项”（！）存在。

这是一个例子：

```
#!/bin/bash
rflag=false
small_r=false
big_r=false

usage () { echo "How to use"; }

options=':ij:rRvh'
while getopts $options option
do
    case "$option" in
        i  ) i_func;;
        j  ) j_arg=$OPTARG;;
        r  ) rflag=true; small_r=true;;
        R  ) rflag=true; big_r=true;;
        v  ) v_func; other_func;;
        h  ) usage; exit;;
        \? ) echo "Unknown option: -$OPTARG" >&2; exit 1;;
        :  ) echo "Missing option argument for -$OPTARG" >&2; exit 1;;
        *  ) echo "Unimplemented option: -$OPTARG" >&2; exit 1;;
    esac
done

if ((OPTIND == 1))
then
    echo "No options specified"
fi

shift $((OPTIND - 1))

if (($# == 0))
then
    echo "No positional arguments specified"
fi

if ! $rflag && [[ -d $1 ]]
then
    echo "-r or -R must be included when a directory is specified" >&2
    exit 1
fi 
```

这代表了一个`getopts`函数的完整参考实现，但只是一个较大脚本的草图。

# java - 一个紧凑的反模式、基于 DetachedCriteria 的 DAO 实用程序用于休眠有多危险？

> ID：11279425
> 
> 赞同：2
> 
> 时间：2012-07-01T03:52:10.617
> 
> 标签：java, hibernate, dao, utilities, detachedcriteria

很久以前，我使用 DetachedCriteria 创建了一个类休眠实用程序来简化我在**非常小的应用程序**上的生活，如下所示：

```
import java.util.List;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import org.hibernate.criterion.DetachedCriteria;

/* WARNING: This utility was projected only for applications of one operation per use per mapping!
Using it for multiple operations characterizes the anti-pattern "session-per-operation". */
public class HibernateUtil {
    private static final int SEARCH = 0;
    private static final int LIST = 1;
    private static final int SAVE = 2;
    private static final int UPDATE = 3;
    private static final int SAVE_OR_UPDATE = 4;
    private static final int DELETE = 5;
    private static final int MERGE = 6;
    private static SessionFactory SESSION_FACTORY;

    // Single session factory instantiation
    static {SESSION_FACTORY = new Configuration().configure().buildSessionFactory();}

    // Opens the session and executes only one operation on the transaction
    private static Object executeTransaction(Object object, int operation) {
        Object output = null;
        Session session = SESSION_FACTORY.openSession();
        Transaction transaction = null;
        try {
            transaction = session.beginTransaction();
            switch (operation) {
                case SEARCH: output = ((DetachedCriteria) object).getExecutableCriteria(session).uniqueResult(); break;
                case LIST: output = ((DetachedCriteria) object).getExecutableCriteria(session).list(); break;
                case SAVE: session.save(object); break;
                case UPDATE: session.update(object); break;
                case SAVE_OR_UPDATE: session.saveOrUpdate(object); break;
                case DELETE: session.delete(object); break;
                case MERGE: session.merge(object); break;
                default: throw new HibernateException("No operation was executed on the database.");
            }
            transaction.commit();
        } finally {
            session.close();
        }
        return output;
    }

    // Usable methods, named accordingly to the operation:
    public static Object searchCriteria(DetachedCriteria criteria) {return executeTransaction(criteria, SEARCH);}
    public static List<?> listCriteria(DetachedCriteria criteria) {return (List<?>) executeTransaction(criteria, LIST);}
    public static void save(Object object) {executeTransaction(object, SAVE);}
    public static void update(Object object) {executeTransaction(object, UPDATE);}
    public static void saveOrUpdate(Object object) {executeTransaction(object, SAVE_OR_UPDATE);}
    public static void delete(Object object) {executeTransaction(object, DELETE);}
    public static void merge(Object object) {executeTransaction(object, MERGE);}
} 
```

这允许我通过调用与数据库进行交互`HibernateUtil.searchCriteria()/listCriteria()/save()/update()/saveOrUpdate()/delete()/merge()`，但由于它的*会话每个操作的*性质，我实际上在非常罕见的情况下（小型应用程序）使用它。

问题是，我刚刚发现我的同事们一直在更大的应用程序中使用它，运行过度使用正确的 DAO 模式。我的错。我担心可能的副作用，例如开销或过载，但我不知道我应该担心什么问题。这是否足以让我开始在他们的应用程序中重新构建 DAO？

你们中的一些更有经验的程序员或 DBA 可以在这里分享一些亮点吗？我会非常感激。

**编辑**

将其更改为关闭会话。我现在为避免延迟初始化错误所做的是`lazy="false"`在 hbm.xml 中的每个多对一映射中进行设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T07:38:57.803

我认为您应该担心的主要问题是事务完整性。我敢打赌，您会发现许多用例，其中几个安全/更新/保存或更新/删除操作应该在一个事务中，但每个都在自己的事务中完成，“感谢”这个帮助程序类。

另一个问题是使用这个助手类会强制使用两个会话工厂而不是一个，因为这个助手类使用它自己的私有会话工厂。

我会删除这个类，并使用 Spring 或 EJB 进行声明式事务管理，并使用每个事务模式的会话或视图模式中的打开会话，这两者都确保会话在某个时间关闭。

# c - 声明一个结构并定义包含在 {} 中的值是否有效？

> ID：11279426
> 
> 赞同：1
> 
> 时间：2012-07-01T03:52:10.760
> 
> 标签：c, macos

声明一个结构并定义包含在 {} 中的值是否有效？

```
struct name new_name[] {
    {"value1"},
    {"value2"},
    {"value3"},
} 
```

在哪里：

```
struct name {
    union {
        char *value1;
    } n_u;

    char *value2;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T04:46:33.550

您发布的内容无效，因为它在初始化程序（以及尾随分号）之前缺少等号。否则，它是合法的，但有点难以阅读，因为它没有初始化每个字段，也没有使用完整的大括号。在完全支撑的初始化程序中，每个数组、结构或联合的值列表周围都有一对花括号。在这种情况下，您有一个带有联合的结构数组，因此应该有 3 级大括号以获得最佳可读性。与所有内容的等价物是：

```
struct name new_name[] = {
    {{"value1"}, NULL},
    {{"value2"}, NULL},
    {{"value3"}, NULL},
}; 
```

# cocoa-touch - 获取数组 cocos2d 中精灵的位置`

> ID：11279429
> 
> 赞同：4
> 
> 时间：2012-07-01T03:52:33.693
> 
> 标签：cocoa-touch, cocos2d-iphone, cocos2d-android, cocos2d-x

我需要能够触摸数组中的特定移动精灵并对其执行操作。但是，当我执行 MoveTo 操作时，精灵位置不会更新。帮助！

大批：

```
int numbreds = 7;

redBirds = [[CCArray alloc] initWithCapacity: numbreds];

for( int i = 1; i<=numbreds; i++){

    int xvalue = ((-50*i) + 320);
    int yvalue= 160;

    if (i==4)
    { 
        CCSprite *parrot = [CCSprite spriteWithFile:@"taco.png"];

        [birdLayer addChild:parrot];
        [self movement]; //the action that moves the array horizontally
        parrot.position = ccp(xvalue,yvalue);
        parrot.tag=100; 
```

触碰

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event

{
UITouch *touch = [touches anyObject];
CGPoint location = [touch locationInView:[touch view]];
location = [[CCDirector sharedDirector] convertToGL:location];

CCSprite *mark = (CCSprite *)[birdLayer getChildByTag:100];

if (CGRectContainsPoint([mark boundingBox], location))
{

    CCLOG(@"YAY!");
} 
```

问题是 CCSprite 的位置实际上并没有更新或移动。耶！只有在精灵的原始位置生成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T04:07:56.540

试试这个：

```
CCSprite *temp = [CCSprite spriteWithFile:@"taco.png"];

temp = [birdLayer getChildByTag:100];

if (temp.position.x == location.x) {

    // do stuff...
} 
```

# java - 将图像字节数组保存到 .net webservice 并检索它

> ID：11279431
> 
> 赞同：0
> 
> 时间：2012-07-01T03:52:36.907
> 
> 标签：java, android, asmx, bytearray, android-ksoap2

我有一个使用 ksoap2 库使用的 .net ASMX Web 服务。在服务中，我首先保存用户图像，然后再检索它。但是，一旦我检索到它，字节数组就完好无损，但 BitmapFactory 无法对其进行解码并返回 null。

**转换为字节数组：**

```
Bitmap viewBitmap = Bitmap.createBitmap(imageView.getWidth(),
imageView.getHeight(), Bitmap.Config.ARGB_8888);
ByteArrayOutputStream bos = new ByteArrayOutputStream();
viewBitmap.compress(CompressFormat.PNG, 0 /* ignored for PNG */, bos);
byte[] bitmapdata = bos.toByteArray(); 
```

Web 服务接受 byte[] 格式的 bytearray。

**要将数组转换为位图：**

```
byte[] blob= info.get(Main.KEY_THUMB_BYTES).getBytes();
Bitmap bmp=BitmapFactory.decodeByteArray(blob,0,blob.length); // Return null :(
imageView.setImageBitmap(bmp); 
```

从部分分析来看，字节数组似乎没有改变。那为什么解码返回null？有没有更好的方法来保存图像并通过网络服务传递它？我没有分析整个字节数组，所以我猜它可能已经改变了一点。

有什么想法吗？非常感谢！

**更新：** 我只是尝试使用以下方法将 byte[] 转换为字符串：

```
Base64.encodeToString( bos.toByteArray(), Base64.DEFAULT); 
```

并使用解码：

```
byte[] blob= Base64.decode(info.get(Main.KEY_THUMB_BYTES)); 
```

现在我得到的只是一张**白色**的照片。我不确定这里有什么问题。请帮忙。

**更新：** 我将此图像存储在数据库中，类型为**varchar(max)**的列中。我应该将此字节数组字符串存储在不同的 sql 数据类型中吗？我对 SQL 不太熟悉，所以我使用了 varchar，因为它没有将文本转换为 unicode，我认为这可能对字节数组有好处。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T05:05:43.743

将您的字节数组转换为 Base64，它是一个字符串且易于传输：

```
public static String bitmapToBase64(Bitmap bitmap) {
        byte[] bitmapdata = bitmapToByteArray(bitmap);
        return Base64.encodeBytes(bitmapdata);
    }

    public static byte[] bitmapToByteArray(Bitmap bitmap) {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bitmap.compress(CompressFormat.PNG, 0 /* ignored for PNG */, bos);
        byte[] bitmapdata = bos.toByteArray();
        return bitmapdata;
    } 
```

和

```
public static Bitmap base64ToBitmap(String strBase64) throws IOException {
    byte[] bitmapdata = Base64.decode(strBase64);
    Bitmap bitmap = BitmapFactory.decodeByteArray(bitmapdata, 0,
            bitmapdata.length);
    return bitmap;
} 
```

您不仅可以对图像文件执行此操作，还可以对每种文件类型执行此操作：

```
public static String fileToBase64(String path) throws IOException {
    byte[] bytes = fileToByteArray(path);
    return Base64.encodeBytes(bytes);
}

public static byte[] fileToByteArray(String path) throws IOException {
    File imagefile = new File(path);
    byte[] data = new byte[(int) imagefile.length()];
    FileInputStream fis = new FileInputStream(imagefile);
    fis.read(data);
    fis.close();
    return data;
}

public static void base64ToFile(String path, String strBase64)
        throws IOException {
    byte[] bytes = Base64.decode(strBase64);
    byteArrayTofile(path, bytes);
}

public static void byteArrayTofile(String path, byte[] bytes)
        throws IOException {
    File imagefile = new File(path);
    File dir = new File(imagefile.getParent());
    if (!dir.exists()) {
        dir.mkdirs();
    }
    FileOutputStream fos = new FileOutputStream(imagefile);
    fos.write(bytes);
    fos.close();
} 
```

# php - SELECT * FROM table WHERE row IN ('list')

> ID：11279434
> 
> 赞同：0
> 
> 时间：2012-07-01T03:52:50.357
> 
> 标签：php, mysqli

我在使用下面的代码时遇到了问题，它给了我一个语法错误，我在手册或网上找不到任何关于它的内容。你对我如何让它运行有什么想法？

第一次尝试：

```
<?php
require("../dbpass.php");    $types = array('Buyer','Seller','Buyer / Seller','Investor');
$typeslist = implode ("','", $types);

$sql = "SELECT * FROM contacts WHERE contacttype IN ('$typeslist') AND status = 'New' ORDER BY date DESC";
$result = mysqli_query($mysqli,$sql) or die ("Error: ".mysqli_error($mysqli));
while ($row = mysqli_fetch_array($result)) { 
```

第二次尝试（在“IN”之后放置一个“=”）：

```
<?php
require("../dbpass.php");
$types = array('Buyer','Seller','Buyer / Seller','Investor');
$typeslist = implode ("','", $types);

$sql = "SELECT * FROM contacts WHERE contacttype = IN ('$typeslist') AND status = 'New' ORDER BY date DESC";
$result = mysqli_query($mysqli,$sql) or die ("Error: ".mysqli_error($mysqli));
while ($row = mysqli_fetch_array($result)) { 
```

这是代码的其余部分：

```
$firstname = $row ['firstname'];     

echo'.$firstname.';
}
?> 
```

错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 'IN ('Buyer','Seller','Buyer/Seller','Investor') AND status = 'New' ORDER BY da' 行附近使用1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T03:59:08.713

你有一段`;`时间后的情况。

```
while ($row = mysqli_fetch_array($result)); { 
```

应该

```
while ($row = mysqli_fetch_array($result)) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T04:08:57.370

删除 =。

```
contacttype IN 
```

不是

```
contacttype = IN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T08:36:11.450

试试这个查询

```
$sql = "SELECT * FROM contacts WHERE contacttype IN('".$typeslist."') AND status = 'New' ORDER BY date DESC"; 
```

# c++ - CPP 新手：编译器错误

> ID：11279435
> 
> 赞同：-1
> 
> 时间：2012-07-01T03:52:50.547
> 
> 标签：c++

编译失败，输出如下。

有什么想法请..

```
PStore.cpp
PStore.cpp(169) : error C2220: warning treated as error - no 'object' file generated
PStore.cpp(169) : warning C4091: '' : ignored on left of 'bool' when no variable is declared
PStore.cpp(169) : error C2143: syntax error : missing ';' before 'inline function header'
PStore.cpp(170) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
PStore.cpp(170) : error C2556: 'int PStore::getVersion(std::string &)' : overloaded function differs only by return type from 'bool PStore::getVersion(std::string &)'
    ../include\PStore.h(48) : see declaration of 'PStore::getVersion'
PStore.cpp(170) : error C2371: 'PStore::getVersion' : redefinition; different basic types
    ../include\PStore.h(48) : see declaration of 'PStore::getVersion' 
```

这是代码片段：

```
bool PStore::getVersion(std::string& version)
{
    AMPI_INFO("[API]");

    return getVersionNoLogging(version);
}
bool PStore::getVersionNoLogging(std::string& version)
{
    version = AMPI_PStore_VERSION " " __DATE__ " " __TIME__;

    return true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T03:56:07.673

请发布您的代码，以便可以解释所有错误。

然而，其中一个错误是显而易见的：您不能拥有两个具有相同参数和相同名称的函数。

在您的情况下，您有`int PStore::getVersion(std::string &)`and `bool PStore::getVersion(std::string &)`，这是不合法的。

要么更改其中一个函数的名称，要么更改其中一个函数的类型或参数数量。

# javascript - 返回 Javascript 文件中定义的所有函数

> ID：11279441
> 
> 赞同：19
> 
> 时间：2012-07-01T03:54:08.370
> 
> 标签：javascript, reflection

对于以下脚本，我如何编写一个将脚本的所有函数作为数组返回的函数？我想返回脚本中定义的函数数组，以便我可以打印脚本中定义的每个函数的摘要。

```
 function getAllFunctions(){ //this is the function I'm trying to write
        //return all the functions that are defined in the script where this
        //function is defined.
        //In this case, it would return this array of functions [foo, bar, baz,
        //getAllFunctions], since these are the functions that are defined in this
        //script.
    }

    function foo(){
        //method body goes here
    }

    function bar(){
        //method body goes here
    }

    function baz(){
        //method body goes here
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-01T04:40:33.103

这是一个函数，它将返回文档中定义的所有函数，它的作用是遍历所有对象/元素/函数并仅显示类型为“函数”的那些。

```
function getAllFunctions(){ 
        var allfunctions=[];
          for ( var i in window) {
        if((typeof window[i]).toString()=="function"){
            allfunctions.push(window[i].name);
          }
       }
    } 
```

​这里是一个[jsFiddle 工作演示](http://jsfiddle.net/DSmqy/8/) ​</p>

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-01T06:09:51.183

在伪命名空间中声明它，例如这样：

```
 var MyNamespace = function(){
    function getAllFunctions(){ 
      var myfunctions = [];
      for (var l in this){
        if (this.hasOwnProperty(l) && 
            this[l] instanceof Function &&
            !/myfunctions/i.test(l)){
          myfunctions.push(this[l]);
        }
      }
      return myfunctions;
     }

     function foo(){
        //method body goes here
     }

     function bar(){
         //method body goes here
     }

     function baz(){
         //method body goes here
     }
     return { getAllFunctions: getAllFunctions
             ,foo: foo
             ,bar: bar
             ,baz: baz }; 
    }();
    //usage
    var allfns = MyNamespace.getAllFunctions();
    //=> allfns is now an array of functions. 
    //   You can run allfns[0]() for example 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-20T22:47:11.800

```
function foo(){/*SAMPLE*/}
function bar(){/*SAMPLE*/}
function www_WHAK_com(){/*SAMPLE*/}

for(var i in this) {
	if((typeof this[i]).toString()=="function"&&this[i].toString().indexOf("native")==-1){
		document.write('<li>'+this[i].name+"</li>")
	}
}
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-29T22:59:21.477

浪费了1个多小时。

这是`.js`从`node.js`

1.安装节点模块：

```
npm i esprima 
```

2.假设您在当前目录`func1`的文件中声明了如下所示的函数：`a.js`

```
var func1 = function (str1, str2) {
    //
}; 
```

3.你想得到它的名字，即`func1`代码如下：

```
const fs = require("fs");
const esprima = require("esprima");

let file = fs.readFileSync("./a.js", "utf8");

let tree = esprima.parseScript(file);
tree.body.forEach((el) => {
    if (el.type == "VariableDeclaration") {
        // console.log(el);
        console.log(el.declarations);
        console.log(el.declarations[0].id);
        console.log(el.declarations[0].id.name);
    }
}); 
```

4.您还可以获取其他详细信息，例如参数`str1`，`str2`等，取消注释该`console.log(el)`行以查看其他详细信息。

5.您可以将以上两个代码部分放在一个文件中，以获取当前文件的详细信息（`a.js`）。

# php - MySQL 和 PHP 关于如何正确存储信息

> ID：11279442
> 
> 赞同：0
> 
> 时间：2012-07-01T03:54:16.773
> 
> 标签：php, mysql

我需要一些指导。从我对 MYSQL 的阅读中，我了解到要正确配置我的数据库并使其保持最佳运行，我需要按如下方式制作我的数据库。比如说我有

```
DB Members: which holds~ 1-Primary_ID, 2-email, 3-password, 4-address_ID, and 5-phone_ID. 
```

好的，现在我知道我需要创建一个名为 DB: address 和另一个 DB: phone 的新数据库

```
DB Address: which holds~ 1-address_ID(UNIQUE), 2-street, 3-city, 4-state, 5-zip 
```

最后是另一个数据库：电话

```
DB Phone: which holds~ 1-phone_ID(UNIQUE), 2-area code, 3-phone 
```

问题 #1：这是设置我的数据库的有效方法吗？＆＆ 这是正确的吗？

问题 #2：当使用 PHP 从 HTML 表单中插入记录时。我如何确保在表格中输入的地址被分配给 DB 地址并且正确的 address_ID 记录在 DB Members 中？&& DB Phone 和 DB 成员中的 phone_ID 是否相同？

谢谢您的帮助！

我的 mysql_query 语句应该是什么样的？

```
mysql_query("INSERT INTO Members (email, password, address, phone, timeStamp) 
VALUES('$email', 'SHA($pass)', '$address', '$phone', now())"); 
```

如何将地址分配给地址数据库并将电话分配给电话数据库？我需要使用单独的插入语句吗？如果是这样 - 我如何让他们的正确 ID 进入 DB 成员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:26:16.487

**不要`SHA()`用来散列您的密码**

[来自 MySQL 参考手册：](http://dev.mysql.com/doc//refman/5.5/en/encryption-functions.html#function_sha1)

> MD5 和 SHA-1 算法的漏洞利用已广为人知。您可能希望考虑使用本节中描述的其他加密函数之一，例如 SHA2()。

**不应继续使用 mysql_* 函数套件**

> “不建议使用此扩展来编写新代码。相反，应使用 mysqli 或 PDO_MySQL 扩展。” - [PHP.net](http://www.php.net/manual/en/intro.mysql.php)

**现在，关于你的问题**

> 这是设置我的数据库的有效方法吗？＆＆ 这是正确的吗？

这取决于。您是否打算每个用户只有一个电话号码，每个用户只有一个地址？通过在 members 表中指定 address_ID 字段，您可以有效地将成员的地址数量限制为一个。或者，如果您希望允许用户拥有任意数量的地址或电话号码，则电话和地址表应该具有对成员的引用——而不是相反。

如果您真的*只*希望每个成员有一个地址和电话号码，您应该在成员表中包含所有这些信息。这将防止不必要的连接，并且您始终可以指定您想要的`SELECT`。

如果您需要多个地址和电话号码，您仍然可能希望对所有数据[进行非规范化](http://www.codinghorror.com/blog/2008/07/maybe-normalizing-isnt-normal.html)并仅使用一个表。您只需将用户限制为一些合理数量的地址或电话号码。

> 我如何确保在表格中输入的地址被分配给 DB 地址并且正确的 address_ID 记录在 DB Members 中？&& DB Phone 和 DB 成员中的 phone_ID 是否相同？

如果您使用 mysqli，请使用[`insert_id`属性](http://php.net/manual/en/mysqli.insert-id.php). 如果您使用 PDO，请使用[lastInsertId() 方法](http://php.net/manual/en/pdo.lastinsertid.php)。

# menuitem - Caliburn.Micro 子菜单项如何单击在包含视图的视图模型上调用操作？

> ID：11279443
> 
> 赞同：3
> 
> 时间：2012-07-01T03:54:18.187
> 
> 标签：menuitem, caliburn.micro

我的shellView中有一个顶级菜单，选择子菜单时，我想在shellViewModel（conteror.collection.allactive）上调用以下方法。

```
 public void SelectServer(string pServerName)
    {
        mDefaultClaimServer = pServerName;
    } 
```

以下不起作用，因为没有调用任何方法（我尝试了各种签名和动作参数） -

```
 <Menu Name="menu1" DockPanel.Dock="Top">
        <MenuItem Header="Select Server" Name="ClaimServers">
            <MenuItem.ItemTemplate>
                <DataTemplate>
                    <!-- we need this else we show the class name -->
                    <TextBlock Text="{Binding DisplayName}">
                        <ContentControl cal:Message.Attach="[Event Click] = [Action TxTester.ShellViewModel.SelectServer($Text)]"/>
                    </TextBlock>
                </DataTemplate>
            </MenuItem.ItemTemplate>
        </MenuItem>
    </Menu> 
```

以下确实调用了 ShellViewModel SelectServer 方法，但是对于单击的子 MenuItem 的文本，我得到了 null （我还尝试了许多其他签名和操作参数）-

```
 <Menu Name="menu1" DockPanel.Dock="Top">
        <MenuItem Header="Select Server" Name="ClaimServers" cal:Message.Attach="SelectServer($this.Text)">
            <MenuItem.ItemTemplate>
                <DataTemplate>
                    <!-- we need this else we show the class name -->
                    <TextBlock Text="{Binding DisplayName}" />
                </DataTemplate>
            </MenuItem.ItemTemplate>
        </MenuItem>
    </Menu> 
```

我已经为此苦苦挣扎了很长时间，无法弄清楚。有人可以建议我可以将子 MenuItem 的标题文本传递给 ShellViewModel SelectServer 方法的正确组合吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T22:06:53.023

根据 Rob Eisenberg 的一篇文章，我得到了我想要做的工作，这里描述了一个“从绑定子菜单中获取文本的特殊技巧” - [http://caliburnmicro.codeplex.com/discussions/287228](http://caliburnmicro.codeplex.com/discussions/287228)

如果有人有建议，我仍然很想知道如何使用标准 OOTB 逻辑来做我想做的事情，以便我能够更好地理解 CM。

基本上我将它添加到引导程序 Configure() overide -

```
 MessageBinder.SpecialValues.Add("$originalsourcecontext", context =>
        {
            var args = context.EventArgs as RoutedEventArgs;
            if (args == null)
                return null;

            var fe = args.OriginalSource as FrameworkElement;
            if (fe == null)
                return null;

            return fe.DataContext;
        }); 
```

并将其添加到 xaml -

```
 <MenuItem Header="_Select Server" Name="ClaimServers" cal:Message.Attach="SelectServer($originalsourcecontext)" /> 
```

然后我收到了我想要的子菜单项的标题文本。

# django - Django管理屏幕中的对称多对多

> ID：11279448
> 
> 赞同：1
> 
> 时间：2012-07-01T03:55:51.233
> 
> 标签：django, django-admin, many-to-many

我在 Django 中有一个对称的多对多关系

```
class Person(models.Model):
    id = models.CharField(max_length=32, primary_key=True)
    first_name = models.CharField(max_length=32)
    last_name = models.CharField(max_length=32)
    connections = models.ManyToManyField('self', blank=True) 
```

如何在管理屏幕中查看连接（即 myappname_person_connections）表（不是内联表，而是作为它自己的表）？

例如在 admin.py

```
admin.site.register(Person)
admin.site.register(???) # what to register for the connections? 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T04:51:54.070

M2M 表映射到模型`Person.connections.through`，因此您可以使用

```
admin.site.register(Person.connections.through) 
```

# android - 自定义 ListView 的 OnClickListener

> ID：11279449
> 
> 赞同：0
> 
> 时间：2012-07-01T03:56:05.557
> 
> 标签：android, sqlite, android-listview, onclicklistener

这是我的第一个 android 项目，所以请帮助我尝试为我的列表视图创建一个点击监听器。我将有多个列表视图，所以我不能将我的列表视图命名为 android:id="@id/android:list"。好吧，我可以显示数据，但我无法实现 onClickListener 方法。我不想单击文本视图或列表视图中的任何按钮，我想在将值传递给新活动时单击整个列表视图

这是启动应用程序时启动的主要活动。

```
public class Db extends Activity {
private SQLiteDatabase newDb;
DataBaseHelper myDbHelper = new DataBaseHelper(this);
public ListAdapter adapter;
private ArrayList<String> results = new ArrayList<String>();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

setContentView(R.layout.main);
    openDatabase();
    newDb = myDbHelper.getReadableDatabase();   
    Cursor c = newDb.rawQuery("SELECT _id, organisation, address, postcode FROM shoplist", null);
    int i_organisation = c.getColumnIndex("organisation");
    int i_id = c.getColumnIndex("_id");
    int i_address = c.getColumnIndex("address");
    int i_postcode = c.getColumnIndex("postcode");

    //int count = c.getCount();
    //String data[] = new String[count];
    //int i= 0;
    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
    {
        String i1 = c.getString(c.getColumnIndex("_id"));
        String i2 = c.getString(c.getColumnIndex("organisation"));
        String i3 = c.getString(c.getColumnIndex("address"));
        results.add(i1);

        //i++;
    }
    customAdapter adapter = new customAdapter(getApplicationContext(),
            R.layout.main, results, results, results);
    setListAdapter(adapter);

}

private long inserttodata() {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put("id", "112");
    cv.put("organisation","test" );
     return newDb.insert("shoplist", null, cv);
}

private void openDatabase() {

    try {

        myDbHelper.createDataBase();

    } catch (IOException ioe) {

        throw new Error("Unable to create database");

    }

    try {

        myDbHelper.openDataBase();

    } catch (SQLException sqle) {
System.out.println("failed to open");
        throw sqle;

    }
    //String[] columns= new String[]{"_id", "Organisation"};
    //cursor = newDb.query("Shop", columns, null, null, null, null, null);

}

} 
```

我的数据库助手类

```
public class DataBaseHelper extends SQLiteOpenHelper{

//The Android's default system path of your application database.
private static String DB_PATH = "/data/data/calc.three/databases/";

private static String DB_NAME = "charity.db";

private SQLiteDatabase myDataBase; 

private final Context myContext;

public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;
}   

public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    if(dbExist){
        //do nothing - database already exist
    }else{

        //By calling this method and empty database will be created into the default system path
           //of your application so we are gonna be able to overwrite that database with our database.
        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }catch(SQLiteException e){

        //database does't exist yet.

    }

    if(checkDB != null){

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created empty database in the
 * system folder, from where it can be accessed and handled.
 * This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[2048];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DB_PATH + DB_NAME;
    SQLiteDatabase.CursorFactory c = null;
    myDataBase = SQLiteDatabase.openDatabase(myPath, c , SQLiteDatabase.OPEN_READWRITE);

}

@Override
public synchronized void close() {

        if(myDataBase != null)
            myDataBase.close();

        super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}} 
```

我的自定义适配器类

```
 public class customAdapter extends ArrayAdapter<String> {
static List<String> serialNo = new ArrayList<String>();
static List<String> name = new ArrayList<String>();  
static List<String> address = new ArrayList<String>();

Context myContext;

public customAdapter(Context context, int resource, List<String> c_serialNo,
    List<String> c_name, List<String> c_address) {

super(context, resource, c_serialNo);

myContext = context;
serialNo = c_serialNo;
name = c_name;
address = c_address;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
View v = convertView;
if (v == null) {
    LayoutInflater vi = (LayoutInflater) myContext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v = vi.inflate(R.layout.custom_list, null);
}

TextView tv_serialNo = (TextView) v.findViewById(R.id.serialNo);
TextView tv_name = (TextView) v.findViewById(R.id.name);
TextView tv_address = (TextView) v.findViewById(R.id.address);

if (tv_serialNo != null) {
    tv_serialNo.setText(serialNo.get(position));
}
if (tv_name != null) {
    tv_name.setText(name.get(position));
}
if (tv_address!= null) {
    tv_address.setText(address.get(position));
}

return v; }} 
```

main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

   <ListView android:layout_width="wrap_content" android:layout_height="wrap_content" android:id="@id/android:list"></ListView>

</LinearLayout> 
```

custom_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

        <RelativeLayout android:layout_width="fill_parent" android:layout_height="80dp" >
            <TextView android:id="@+id/serialNo"
                android:layout_height="38dp"
                android:layout_width="40dp"
                android:padding="1dip"
                android:gravity="top"                    
                android:text="sn"
                                    />
            <TextView android:id="@+id/name"
                android:layout_height="38dp"
                android:layout_width="240dp"
                android:padding="1dip"
                android:gravity="top"                    
                android:text="name"
                android:layout_toRightOf="@id/serialNo"
                                    />

            <ImageButton
                android:id="@+id/fav"
                android:layout_width="38dp"
                android:layout_height="38dp"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/name"
                android:src="@drawable/ic_launcher" />
            <TextView android:id="@+id/address"
                android:layout_height="40dp"
                android:layout_width="300dp"
                android:padding="1dip"

                android:text="name"
                android:layout_below="@id/serialNo"
                                    />

            <ImageView
                android:id="@+id/source"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_alignBottom="@+id/address"
                android:layout_toRightOf="@+id/address"
                android:src="@drawable/pg" />

        </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T22:48:04.937

您应该使用`OnItemClickListener`列表项，应用于 ListView，而不是尝试将 an`OnClickListener`应用于单元格本身。

`theListView.setOnItemClickListener(new ListView.OnItemClickListener(...){...});`

# java - 使用 Java XPath 查询解析 XML，错误：

> ID：11279454
> 
> 赞同：2
> 
> 时间：2012-07-01T03:57:09.370
> 
> 标签：java, exception, xpath, xml-parsing

我正在尝试在这里学习一些 XML 解析，并且我已经获得了一些代码来开始。我已经对我正在使用的不同 API 进行了一些研究，并且我逐渐能够将我的代码调试成我希望能够工作的东西。我试图通过将 XPath 查询硬连接到字符串变量来解析 XML 文件。如果有帮助的话，我也在使用 DocumentBuilderFactory。无论如何，我不断收到此异常：Java.lang.String 无法转换为 org.w3c.dom.Node（我已在下面的代码中对其进行了标记）。我明白错误是什么。字符串查询似乎与“评估”方法的参数不一致。只是不知道如何解决它。我尝试了各种不同的演员阵容，但它们都不起作用。有些东西告诉我我在这里做错了什么......请帮忙！PS。对不起，我的代码有点乱，我对解析完全陌生，我也知道有一些不必要的导入，但我想如果我进行一些更改，我可能需要它们。

代码：

```
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPath;

import org.jaxen.JaxenException;
import org.jaxen.dom.DOMXPath;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import org.xml.sax.SAXException;

import java.io.File;
import java.io.IOException;
import java.util.List;

public class Parser 
{
public static void main(String[] args) 
{
    boolean isNamespaceAware = true;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setNamespaceAware(isNamespaceAware);
    DocumentBuilder builder = null;
    try 
    {
        builder = dbf.newDocumentBuilder();
    } 
    catch (ParserConfigurationException e2)
    {
        e2.printStackTrace();
    } 
    try 
    {
        Document workingDocument =
builder.parse("C:\\Users\\Brandon\\Job\\XPath\\XPath_Sample_Stuff\\XPath_Objects.xml");
    } 
    catch (SAXException e1) 
    {
        e1.printStackTrace();
    } 
    catch (IOException e1) 
    {
        e1.printStackTrace();
    } 
    String xPathQuery = "/book/author"; 
    DOMXPath generatedPath;
    String results = null;
    try 
    {
        generatedPath = new DOMXPath(xPathQuery);
//Here is the errror
        results = generatedPath.evaluate(xPathQuery); 
    } 
    catch (JaxenException e) 
    {
        e.printStackTrace();
    }   
    if(results == null)
        System.err.println("There was an issue processing the xpath, and
 results were still null.");
    for (int i=0; i<= results.getLength();i++)
    {
        System.out.println(results.item(i));
    }
} 
```

}

这是我收到的 XML 文件中的一些 XML：

```
 <?xml version="1.0"?>
 <catalog> 
 <book id="bk101"> 
  <author>Gambardella, Matthew</author> 
  <title>XML Developer's Guide</title> 
  <genre>Computer</genre>
  <price>44.95</price>
  <publish_date>2000-10-01</publish_date> 
  <description>An in-depth look at creating applications with XML.</description> 
</book> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:23:12.430

该错误告诉您该`DOMXPath#evaluate(...)`方法返回一个字符串。您正在尝试将其转换为 NodeList，但事实并非如此。此方法的 API 将解释所有内容——但同样，该 API 不是标准 Java 的一部分，而是 Jaxen 的一部分。但是即使对于核心 Java，结果也是有意义的，因为它的`XPath#evaluate(...)`方法*通常*也返回一个字符串（除了一个重载）。

同样，也许您现在不想使用 Jaxen，除非您有充分的理由这样做但还没有告诉我们。

**编辑**
假设您在文件 Catalog.xml 中有一个 XML，如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<catalog>
    <book id="bk101">
        <author>Smith, John</author>
        <title>Fubars Rule</title>
        <price>100.1</price>
        <date>2012-10-01</date>
        <description>A witty exposé</description>
    </book>
    <book id="bk102">
        <author>Python, Monty</author>
        <title>Your Hovercraft is full of Eels</title>
        <price>250.5</price>
        <date>10-01-01</date>
        <description>an even wittier exposé</description>
    </book>
</catalog> 
```

JAXB 可以在您的常规课程中仅使用一些注释来编组/解组该傻瓜。这使得这样做几乎是白痴证明。例如：

```
import java.io.File;
import java.util.ArrayList;
import java.util.List;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

public class CatalogTest {
   private static final String PATH_NAME = "Catalog.xml";

   public static void main(String[] args) {
      // comment one of the lines below and un-comment the other to test
      // marshallTest(); 
      unmarshallTest();
   }

   private static void unmarshallTest() {
      JAXBContext context;
      try {
         context = JAXBContext.newInstance(Catalog.class);
         Unmarshaller unmarshaller = context.createUnmarshaller();
         File catalogFile  = new File(PATH_NAME);
         Catalog catalog = (Catalog) unmarshaller.unmarshal(catalogFile  );
         System.out.println(catalog);
      } catch (JAXBException e) {
         e.printStackTrace();
      }

   }

   private static void marshallTest() {
      try {
         Book[] books = {
               new Book("bk101", "Smith, John", "Fubars Rule", 100.10, "2012-10-01", "A witty exposé"),
               new Book("bk102", "Python, Monty", "Your Hovercraft is full of Eels", 250.50, "10-01-01", "an even wittier exposé")
         };
         Catalog catalog = new Catalog();
         for (Book book : books) {
            catalog.addBook(book);
         }
         JAXBContext context = JAXBContext.newInstance(Catalog.class);
         Marshaller marshaller = context.createMarshaller();
         marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

         File catalogFile = new File(PATH_NAME);
         marshaller.marshal(catalog, catalogFile);

      } catch (JAXBException e) {
         e.printStackTrace();
      }
   }
}

@XmlRootElement
class Catalog {
   @XmlElement(name = "book")
   private List<Book> bookList = new ArrayList<Book>();

   public List<Book> getBookList() {
      return bookList;
   }

   public void addBook(Book book) {
      bookList.add(book);
   }

   @Override
   public String toString() {
      return "Catalog [bookList=" + bookList + "]";
   }

}

@XmlRootElement
@XmlType(propOrder = { "author", "title", "price", "date", "description"})
class Book {
   private String id;
   private String author;
   private String title;
   private double price;
   private String date;
   private String description;

   public Book() {
   }

   public Book(String id, String author, String title, double price,
         String date, String description) {
      this.id = id;
      this.author = author;
      this.title = title;
      this.price = price;
      this.date = date;
      this.description = description;
   }

   @XmlAttribute(name = "id")
   public String getId() {
      return id;
   }

   public void setId(String id) {
      this.id = id;
   }

   public String getAuthor() {
      return author;
   }

   public void setAuthor(String author) {
      this.author = author;
   }

   public String getTitle() {
      return title;
   }

   public void setTitle(String title) {
      this.title = title;
   }

   public double getPrice() {
      return price;
   }

   public void setPrice(double price) {
      this.price = price;
   }

   public String getDate() {
      return date;
   }

   public void setDate(String date) {
      this.date = date;
   }

   public String getDescription() {
      return description;
   }

   public void setDescription(String description) {
      this.description = description;
   }

   @Override
   public String toString() {
      return "Book [id=" + id + ", author=" + author + ", title=" + title
            + ", price=" + price + ", date=" + date + ", description="
            + description + "]";
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T04:44:33.027

如果从头开始，我会建议将 JDOM 或 DOM4J 作为 Java 库标准类 (org.w3c.dom.*) 的替代品（查看两者的教程）。他们更容易使用。Jaxen 将与他们两人合作。

# vim - 如何更改突出显示的拼写错误单词的颜色？

> ID：11279456
> 
> 赞同：9
> 
> 时间：2012-07-01T03:57:26.983
> 
> 标签：vim, spell-checking

在我用于 vim 的主题中，字符串显示为红色，但问题是我打开了拼写检查，拼写错误的单词也显示为红色。

这使得在您转到该单词并删除任何字符之前很难看出错误是什么。

我想让拼写错误的单词的突出显示比现在更轻。说#ff2929。

                                                       ![你看不到拼错的词是什么](../Images/6a83ea6cb2248d0fb06784ca82245321.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T05:13:27.990

`hi`您可以`:help highlight`在`~/.vimrc`. 一般结构是：

```
hi SpellBad    ctermfg=015      ctermbg=000     cterm=none      guifg=#FFFFFF   guibg=#000000   gui=none 
```

`cterm`用于终端 vim，用于`gui`gVim。`fg`代表前景，是字母的颜色，代表`bg`背景，是字母后面的颜色。

对于标准终端颜色（8 个正常和 8 个明亮），终端颜色可以是 0-15，对于支持 256 种颜色的术语，终端颜色可以是 0-255，例如 xterm-256colors。gui 颜色采用十六进制格式。[xterm-color-table](https://github.com/guns/xterm-color-table.vim)是 256 和十六进制颜色的有用参考。最后一个选项可用于指定**粗体**、*斜体*或无（两者都不）。

在您的情况下，将前景设置为黑色以使字母突出可能是最简单的。首先，找到一个拼写错误的单词，`:set spell`然后输入 asdflkjasldf 或其他内容。然后输入`:hi SpellBad ctermfg=000 guifg=#000`并查看这是否是您喜欢的解决方案。如果没有，请使用 xterm-color-table 或其他颜色参考来查找您喜欢的颜色。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T04:02:42.503

尝试这个：

```
 :hi SpellBad guibg=#ff2929 ctermbg=224 
```

*   `guibg`用于图形用户界面
*   `ctermbg`是 TERM

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-19T07:55:37.713

我发现对于一个涉及 .vimrc 的更复杂的例子来说，下面的方法可以完成一半的工作`colorscheme`，但它对 .vimrc 命令的顺序很敏感。我用 Cygwin/mintty 和 Git Bash、vim 8.0 进行了测试，结果相似。我在标题和段落中编辑了一个带有“拼写错误”的单词的 markdown 文件，因此另一个因素是 vim 为 markdown 所做的自动格式化。如果 .vimrc 的顺序是`spell`, `colorscheme`, 然后`hi`（尝试在红色背景上使用白色文本），则拼写错误的单词的结果是黑色背景上的白色前景（下图），无论是在 markdown 标题还是段落中。这没关系，但我希望拼错单词的背景更醒目，这就是我指定红色背景的原因。

[![嗨之前的配色方案](../Images/a43396239680fb9d22b593206de7be8f.png)](https://i.stack.imgur.com/pUaoC.png)

但是，如果顺序是`spell`、`hi`和`colorscheme`，则段落中的结果是可以的，但标题中的红色是不受欢迎的粉红色（下图）。这实际上是没有 的原始行为`hi`，这是有道理的，因为`colorscheme`可能正在踩`hi`设置。基于其他测试， 和 的相对位置`hi`是`colorscheme`重要的。

[![嗨之后的colorschme](../Images/f0116b76b82c7c8ca0509a39ea71aa18.png)](https://i.stack.imgur.com/zUAAa.png)

我想我会选择第一个选项，因为至少亮点似乎在所有内容中，但如果使用红色背景会很好。以下是第一种情况的 .vimrc 行。任何解决此问题的指导将不胜感激。

```
" Turn on spell-checker
set spell

" Color scheme
" To pick from available list do:
" :colorscheme _space_ Tab
" Reasonable options seem to be:  koehler, murphy, elford
colorscheme koehler

" Using the colorscheme with spellchecking results in highlights with
" pink text on red background, which is hard to read, so change the highlight color.
" Color table:  https://github.com/guns/xterm-color-table.vim
" Use white text on red background for misspelled words.
hi SpellBad ctermfg=015 ctermbg=009 cterm=bold guibg=#ff0000 guifg=#000000 gui=bold 
```

# facebook - 仅当网站访问者还不是粉丝时才提示他们喜欢 Facebook 页面

> ID：11279459
> 
> 赞同：4
> 
> 时间：2012-07-01T03:57:44.290
> 
> 标签：facebook, api, facebook-like, detect

我想（以非侵入性的方式）要求我们博客的访问者喜欢我们的 Facebook 页面。问题是我不想向所有人展示这条信息，只向非粉丝展示。

我已经阅读了这篇文章

[如何使用 Facebook 的 API 检查用户是否喜欢我的 Facebook 页面或 URL](https://stackoverflow.com/questions/5093398/check-if-user-liked-page)

看来，如果您想知道用户是否喜欢您的 facebook 页面，则需要他们的许可。

我的代码目前是：

```
 FB.api('/me/likes/--mypageid--',{limit: 1}, function(response) { 
        if( response.data ) {
            if( !isEmpty(response.data) )
                console.log('You are a fan!');
            else
                console.log('Not a fan!');
        } else {
            console.log(response);
        }
    }); 
```

始终返回错误：“必须使用活动访问令牌来查询有关当前用户的信息。”

我认为这是因为我没有传递访问令牌，但要获得此访问令牌，我必须向用户询问它，并且我不希望我的网站上有任何弹出窗口。

有没有人有任何想法如何实现这一点，我也愿意接受任何其他关于如何提示用户以非侵入方式喜欢页面的建议。

## 谢谢！

只想更新当前的FB api这是不可能的（如下面的回答）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:20:59.987

> 我认为这是因为我没有传递访问令牌，

正确的。

API 无法知道谁`/me`应该没有访问令牌。

此外，您需要先获得用户的许可才能以这种方式阅读他的喜欢。

> 但是要获得此访问令牌，我必须向用户索取它，并且我不希望我的网站上有任何弹出窗口。

在 Facebook 之外，您无权知道*匿名*用户喜欢或不喜欢什么。

您必须让用户连接到您的应用程序（并请求许可），然后才能获得此类信息。

当然，这将是最重要的，让用户连接并授予权限只是为了你想要的那个小效果。所以坚持点赞框，这是你可以通过合理的努力得到的，而且不会骚扰用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T10:46:34.440

您可以让用户登录到该站点。例如“登录以获取实时更新”等。

为用户创建某种激励措施，让他们在您的页面上设置 FB 登录，然后在登录过程中请求“User_likes”权限。有了这个，您可以简单地反转您的逻辑并向所有人显示“喜欢我们在 FB 上”提示，除了那些已经拥有的人？

这是我能想到的唯一解决方法，当然不是很理想，但是通过将您的博客打开为像这样的开放式图形应用程序，它可以让您访问大量社交工具，以帮助您通过最活跃/感兴趣的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T04:10:21.310

为什么不直接在页面的某处扔一个[Like Box 。](https://developers.facebook.com/docs/reference/plugins/like-box)它不显眼，而且由于 Facebook 从不告诉您的页面有关用户的任何信息，因此您不必对他们进行身份验证。

否则，您需要先对用户进行身份验证，然后 Facebook 才会向您提供有关他们的数据。

# web-services - 验证对网站的未经授权的修改

> ID：11279462
> 
> 赞同：0
> 
> 时间：2012-07-01T03:58:08.667
> 
> 标签：web-services, http, authentication

我制作了一个爬过域的脚本，我希望它确定是否有任何未经授权的修改。对于静态页面，我可以简单地与预设的哈希值进行比较，但对于动态长度页面，检查是否进行了任何重大更改的好方法是什么？

对不起，如果这听起来很愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:00:57.497

您可以在本地下载页面，然后用于`diff`检查答案的长度。例如，

```
diff old_version new_version | wc 
```

这将为您提供更改长度的摘要。

# iphone - 在 facebook 上分享 照片 api 新 IOS

> ID：11279464
> 
> 赞同：3
> 
> 时间：2012-07-01T03:58:35.120
> 
> 标签：iphone, objective-c, ios, facebook, ipad

[http://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app](http://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app)

我发现本教程在 facebook 墙上分享照片是完美的，但是如果我更改 facebook api 的 ID，将我的 ID 而不是使用 MyGrades 它不起作用，因为 Facebook SDK 已经更新并且不再兼容。

我收到以下消息：“抱歉，您使用的应用程序是 Facebook 集成配置错误......”

已经研究过解决方案是更新 facebook api。

任何人都有与此示例完全相同但使用当前 api 的建议？

[http://www.crocko.com/D880103DB52C4426B1D7331A69CADDE4/FacebookPostTutorial.zip](http://www.crocko.com/D880103DB52C4426B1D7331A69CADDE4/FacebookPostTutorial.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:18:36.023

随着ios6，苹果在Social框架中引入了一些自己的分享工具。我建议您查看 SLComposeViewController。[在这个问题](https://stackoverflow.com/questions/12503287/tutorial-for-slcomposeviewcontroller-sharing)中有一个很好的解释

# python - Eventlet+Gunicorn 工作线程中有什么？

> ID：11279467
> 
> 赞同：1
> 
> 时间：2012-07-01T03:59:19.087
> 
> 标签：python, django, multithreading, gunicorn, eventlet

如果我使用带有 Eventlet 工作器类型的 Gunicorn 部署 Django，并且只使用一个进程，那么在为 1000 个（默认情况下）工作器连接提供服务时会发生什么？Django 的哪些部分被复制到每个线程中？有没有抄袭的部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:43:38.077

如果您`workers = 1`在 gunicorn 配置中进行设置，将创建两个进程：1 个主进程和 1 个工作进程。

使用`worker_class = eventlet`时，同时连接由绿色线程处理。绿色线程不像真正的线程。简单来说，绿色线程就是`yield`每当函数遇到 I/O 操作时的函数（协程）。

所以没有任何东西被复制。您只需要担心使每个 I/O 操作“绿色”。

# visual-studio-2010 - 如何从任何页面托管 SWF 文件

> ID：11279468
> 
> 赞同：0
> 
> 时间：2012-07-01T03:59:42.233
> 
> 标签：visual-studio-2010, flash, asp.net-ajax

有没有办法在我的 ASP.NET 页面上托管像[Bloons Tower Defense这样的](http://en.wikipedia.org/wiki/Bloons#Bloons_Tower_Defense)[SWF](http://en.wikipedia.org/wiki/SWF)游戏？您能以某种方式缓存包含 .SWF 文件的页面，然后在该页面上播放吗？

如果您已注明作者，那么获取您想要的任何 SWF 文件并在不同的页面上播放它是否合法？

我对这个话题很陌生，想创建一个网站来搜索所有可用的在线游戏，然后在我的网站页面上玩。

我将如何采用这种方法？我曾想过通过 WebRequest 和 WebResponse 类将外部页面创建为字符串，然后搜索 .swf，然后将其下载到我的服务器并将其重新托管在页面上，但这似乎太麻烦了，就像它赢了不行。

我应该使用什么方法，我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:16:29.057

如果不疯狂，至少这是非法的。未经版权所有者的书面批准或遵守其许可，您不能托管从其他网站~~窃取的内容。~~

与网站所有者交谈并询问他的内容并阅读许可条款（如果有）。这适用于您想要从任何其他来源获得的任何内容。

回答你的问题：不要这样做！不要对自己这样做！

# java - 想要删除空格，使用 java 内置方法

> ID：11279469
> 
> 赞同：-1
> 
> 时间：2012-07-01T03:59:47.070
> 
> 标签：java, string, io

我开发了一个应用程序，它读取 java 项目内的 java 包中有多少文件，并计算这些单独文件中的代码行，例如在 java 项目中，如果有 2 个包有 4 个单独的文件，则读取的文件总数将是 4，如果这 4 个文件在每个文件中有 10 行代码，那么 4*10 在整个项目中总共有 40 行代码......下面是我的一段代码

```
 private static int totalLineCount = 0;
        private static int totalFileScannedCount = 0;

        public static void main(final String[] args) throws FileNotFoundException {

            JFileChooser chooser = new JFileChooser();
            chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
            chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
            chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
            chooser.setAcceptAllFileFilterUsed(false);
            if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
                Map<File, Integer> result = new HashMap<File, Integer>();
                File directory = new File(chooser.getSelectedFile().getAbsolutePath());

                List<File> files = getFileListing(directory);

                // print out all file names, in the the order of File.compareTo()
                for (File file : files) {
                   // System.out.println("Directory: " + file);
                    getFileLineCount(result, file);
                    //totalFileScannedCount += result.size(); //saral
                }

                System.out.println("*****************************************");
                System.out.println("FILE NAME FOLLOWED BY LOC");
                System.out.println("*****************************************");

                for (Map.Entry<File, Integer> entry : result.entrySet()) {
                    System.out.println(entry.getKey().getAbsolutePath() + " ==> " + entry.getValue());
                }
                System.out.println("*****************************************");
                System.out.println("SUM OF FILES SCANNED ==>" + "\t" + totalFileScannedCount);
                System.out.println("SUM OF ALL THE LINES ==>" + "\t" + totalLineCount);
            }

        }

        public static void getFileLineCount(final Map<File, Integer> result, final File directory)
                throws FileNotFoundException {
            File[] files = directory.listFiles(new FilenameFilter() {

                public boolean accept(final File directory, final String name) {
                    if (name.endsWith(".java")) {
                        return true;
                    } else {
                        return false;
                    }
                }
            });
            for (File file : files) {
                if (file.isFile()) {
                    Scanner scanner = new Scanner(new FileReader(file));
                    int lineCount = 0;
                    totalFileScannedCount ++; //saral
                    try {
                        for (lineCount = 0; scanner.nextLine() != null; ) {
                            while (scanner.hasNextLine()) {
   String line = scanner.nextLine().trim();
   if (!line.isEmpty()) {
     lineCount++;
   }
                        }
                    } catch (NoSuchElementException e) {
                        result.put(file, lineCount);
                        totalLineCount += lineCount;
                    }
                }
            }

        }

        /**
         * Recursively walk a directory tree and return a List of all Files found;
         * the List is sorted using File.compareTo().
         * 
         * @param aStartingDir
         *            is a valid directory, which can be read.
         */
        static public List<File> getFileListing(final File aStartingDir) throws FileNotFoundException {
            validateDirectory(aStartingDir);
            List<File> result = getFileListingNoSort(aStartingDir);
            Collections.sort(result);
            return result;
        }

        // PRIVATE //
        static private List<File> getFileListingNoSort(final File aStartingDir) throws FileNotFoundException {
            List<File> result = new ArrayList<File>();
            File[] filesAndDirs = aStartingDir.listFiles();
            List<File> filesDirs = Arrays.asList(filesAndDirs);
            for (File file : filesDirs) {
                if (file.isDirectory()) {
                    result.add(file);
                }
                if (!file.isFile()) {
                    // must be a directory
                    // recursive call!
                    List<File> deeperList = getFileListingNoSort(file);
                    result.addAll(deeperList);
                }
            }
            return result;
        }

        /**
         * Directory is valid if it exists, does not represent a file, and can be
         * read.
         */
        static private void validateDirectory(final File aDirectory) throws FileNotFoundException {
            if (aDirectory == null) {
                throw new IllegalArgumentException("Directory should not be null.");
            }
            if (!aDirectory.exists()) {
                throw new FileNotFoundException("Directory does not exist: " + aDirectory);
            }
            if (!aDirectory.isDirectory()) {
                throw new IllegalArgumentException("Is not a directory: " + aDirectory);
            }
            if (!aDirectory.canRead()) {
                throw new IllegalArgumentException("Directory cannot be read: " + aDirectory);
            }
        } 
```

但问题是它在计算单个文件的代码行时也会计算空白行，它不应该，请告知我需要在我的程序中做哪些修改，以便它在计算时不计算空白行单个文件的代码行。

我想到的想法只是将读取的字符串与“”进行比较，如果不等于“”（空）则计数 if(!readString.trim().equals("")) lineCount++ 请为此提供建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T04:34:32.020

建议：

*   扫描仪有一个`hasNextLine()`你应该使用的方法。我会用它作为while循环的条件。
*   然后通过在循环内调用`nextLine()`一次来获取 while 循环内的行。
*   再次调用`trim()`您读入的字符串。在最新的代码更新中，我仍然没有看到您的尝试！
*   在 Strings 上调用方法时的一个关键概念是它们是不可变的，并且在它们上调用的方法不会改变底层 String，并且`trim()`没有什么不同：调用它的 String 是不变的，但方法*返回的 String****是***改变了，实际上是修剪过的。
*   String 有一个`isEmpty()`方法，你应该在修剪 String 后调用它。

所以不要这样做：

```
try {
    for (lineCount = 0; scanner.nextLine() != null; ) {
        if(!readString.trim().equals("")) lineCount++; // updated one
    }
} catch (NoSuchElementException e) {
    result.put(file, lineCount);
    totalLineCount += lineCount;
} 
```

而是这样做：

```
int lineCount = 0;
while (scanner.hasNextLine()) {
   String line = scanner.nextLine().trim();
   if (!line.isEmpty()) {
     lineCount++;
   }
} 
```

# c - 在 openGL 中查找聚光灯向量

> ID：11279470
> 
> 赞同：0
> 
> 时间：2012-07-01T04:00:10.197
> 
> 标签：c, opengl, vector, lighting

我正在尝试为我拥有的聚光灯的方向找到合适的矢量（我正在尝试使它像手电筒一样）。我希望它面向与相机始终面向的方向相同的方向，就像您将手电筒放在您面前一样。但是，我似乎找不到正确的方向向量。

目前，我有轻微的跟随相机前后移动的感觉，但不是转向角度。此外，实际位置是向上的，而不是像我想要的那样直接指向前方。

我知道各个对象的所有法线都在工作；我已经测试了普通照明。

我只会发布与问题相关的代码。如果你真的需要我的整个代码，请说出来。灯光代码：

```
float sco=20;         //  Spot cutoff angle
float Exp=0;          //  Spot exponent

float Ambient[]   = {0.01*ambient ,0.01*ambient ,0.01*ambient ,1.0};
float Diffuse[]   = {0.01*diffuse ,0.01*diffuse ,0.01*diffuse ,1.0};
float Specular[]  = {0.01*specular,0.01*specular,0.01*specular,1.0};
//  Light direction
float Position[]  = {Ox+3, 2, Oz,1};
float Direction[] = {Ox+lx, here, Oz+lz, 0};

glLightfv(GL_LIGHT0,GL_AMBIENT ,Ambient);
glLightfv(GL_LIGHT0,GL_DIFFUSE ,Diffuse);
glLightfv(GL_LIGHT0,GL_SPECULAR,Specular);
glLightfv(GL_LIGHT0,GL_POSITION,Position);

glLightfv(GL_LIGHT0,GL_SPOT_DIRECTION,Direction);
glLightf(GL_LIGHT0,GL_SPOT_CUTOFF,sco);
glLightf(GL_LIGHT0,GL_SPOT_EXPONENT,Exp); 
```

相机代码：

```
//  Camera Values
double Ox=0, Oz=0;
float Oy=1.0;
float angle = 0.0;
float lx=0.0,lz=-1.0;
float deltaAngle = 0.0;
float deltaMove = 0;
double here;

void computePos(float deltaMove) {
    Ox += deltaMove * lx * 0.1f;
    Oz += deltaMove * lz * 0.1f;
}
void computeDir(float deltaAngle) {
    angle += deltaAngle;
    lx = sin(angle);
    lz = -cos(angle);
}

void display() {
    here = 2.0f*Oy;
    if (deltaMove)
        computePos(deltaMove);
    if (deltaAngle)
        computeDir(deltaAngle);

    gluLookAt(Ox,2,Oz, Ox+lx, here, Oz+lz, 0,1,0);
}

void key(unsigned char ch,int x,int y) {
    //  Exit on ESC
    if (ch == 27)
        exit(0);
    // WASD controls
    else if (ch == 'a' || ch == 'A')
        deltaAngle = -0.01;
    else if (ch == 'd' || ch == 'D')
        deltaAngle = 0.01;

    else if (ch == 'w' || ch == 'W') {
        collidefront=collision(1);
        collidextra=collision(3);
        if (collideback == 2 && collidextra == 3) { deltaMove = 0; collideback = 0; }
        else if (collideback == 2) { deltaMove = 0.1; collidefront = 0;}
        else if (collidefront == 1) deltaMove = 0;
        else 
            deltaMove = 0.1; 
        }

    else if (ch == 's' || ch == 'S') {
        collideback=collision(2);
        if (collidefront == 1) { deltaMove = -0.3; collidefront = 0; }
        else if (collideback == 2) deltaMove = 0;
        else 
            deltaMove = -0.1; 
        }

    else if ((ch == 'e' || ch == 'E') && here < 4)
        Oy += 0.01;
    else if ((ch == 'c' || ch == 'C') && here > .5)
        Oy -= 0.01;

    Project(fov,asp,dim);
    glutPostRedisplay();
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:16:38.650

由于您使用的是`gluLookAt`，因此您可以轻松计算减去中心和眼睛的向量：

```
(...)
gluLookAt(eyeX, eyeY, eyeZ, centerX, centerY, centerZ, upX, upY, upZ);
(...)
spotlightVecX = centerX - eyeX;
spotlightVecY = centerY - eyeY;
spotlightVecZ = centerZ - eyeZ; 
```

您可以在计算矢量后对其进行归一化。

希望能帮助到你。

# linux - 如何正确地用 oob 写一个 nanddump 的转储？

> ID：11279473
> 
> 赞同：6
> 
> 时间：2012-07-01T04:01:34.337
> 
> 标签：linux, embedded

我正在努力在 Linux 中刷新嵌入式设备的先前 ROM 转储。我以前的转储包含 oob 数据。我用 写了它`nandwrite -n -N -o /dev/mtd0 backup.bin`，然后再次进行 ROM 转储。

通过比较新旧ROM转储，我看到一些无法解释的情况：任何空块（填充为0xFF）的oob（ecc字节）的最后24字节也应该是0xFF，但新ROM中的那些dump 中填充了 0x00，导致后来的写入失败。

oob 应该是：

```
FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF
FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF
FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF
FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF 
```

但对于`nandwrite`：

```
FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF
FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF
FFFFFFFF FFFFFFFF 00000000 00000000
00000000 00000000 00000000 00000000 
```

有人知道为什么吗？

* * *

我在代码中添加了一个 hack，`nandwrite`如果要写入的内容是 ，则跳过写入 NAND `0xFF`，并且它有效。那么在尝试将空页写入 NAND 时是否存在问题？

* * *

**添加：**

现在我在编写引导加载程序映像时也遇到了这个问题。图片不是页面对齐的，所以`nandwrite`用`0xFF`. 但是对于只有`0xFF`ecc 字节的页面仍然`0x00`像上面一样被污染。似乎我的 hack 并没有完全解决我的问题。任何人都可以帮忙吗？也许它可能是内核 2.6.35 中的一个错误？

这是我的黑客：

```
int i;
int needwrite=0;
for (i = 0 ; i < len ; ++i){
    if(((uint8_t*)data)[i]!=0xff){
        needwrite=1;
        break;
    }
}
if(!needwrite)
    return 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:12:30.943

对不起，Alvin，但备份真的不会“只在那个特定的闪存上工作”，因为你无法知道某个特定位何时会从好到边缘或边缘到坏*。*您可能会以一种状态读取它，尝试以完全相同的状态写入它，但在任何给定的一天，任何给定的备份都会失败。

安全备份 NAND 设备中数据的*唯一*方法是打开 ECC。您从具有 ECC 更正的设备中读取数据以获得良好的数据。然后，您在 ECC 开启的情况下将已知良好的数据写回 NAND，以便使用新的 ECC 值更正您之前读取时现在边缘或坏的任何位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:30:41.320

这是因为它是对你的*警告*。它*不会*可靠地工作。

考虑这样一种情况，您的块 (1) 在位置 0 有错误。Nand-flash 设备的“控制器”放置纠错码来纠正此错误。

*您使用*ECC从块 1 中复制数据，但是当您将数据写入*新*的Nand-flash 设备时，您正在克隆数据。如果那个新的 nand-flash 设备在位置 1 有错误。那么你写回的数据在接下来的读取*中将是错误*的，因为位置 1 是错误的。但是系统会认为是对的，因为ECC在位置1没有显示错误

您不能可靠地将 1 个 nand-flash 直接克隆到另一个，因为硬/软错误位置不相同。

可靠地做到这一点的*唯一*方法是读出数据，使用系统 ECC 算法来纠正任何错误。将数据写入新设备，使用系统算法纠正任何位错误。

您可能认为设备是相同的，但结果是由于误码映射不匹配导致的数据/程序损坏。

回应阿尔文的评论：

> 我非常有信心我正在克隆完全相同的 NAND，即我备份了那个特定的芯片，然后将它写回那个特定的芯片。不是我觉得是一样的，但是从头到尾只有一个单芯片。这很奇怪，但是其他一些人说它可以在他们自己的设备上运行，而我的却没有，驱动程序中可能有错误吗？– Alvin Wong 8 月 5 日 5:16

抱歉*不可能*（除非你真的..真的..真的很幸运并且得到0缺陷的芯片）

每个 Nand-Flash 芯片都有自己的一组缺陷位，它们是唯一的。用户绕过它的方法是生成一个文件系统，一旦坏位超出 CRC 的能力，就会屏蔽掉坏块。当您将一个 nand 芯片复制到另一个设备时，CRC 映射与主芯片匹配。当您对设备进行 1:1 克隆时，一些数据位会在写入后翻转（坏单元格），并且由于您正在进行克隆，因此您不会在 CRC 中考虑这些位已翻转（因为您正在逐字复制）。

它对某些人“有效”的事实并不意味着它是正确的，就像我会开车一样，但我只发现刹车在我需要的时候不起作用。更糟糕的是，网上许多所谓的“专家”实际上是在“克隆”设备时擦除制造商提供的缺陷图，或者在保存缺陷图*之前执行“芯片擦除”。*

这就是 ebay 上出现的许多“狡猾”的 nand-flash USB 棒所发生的情况，它们实际上是“缺陷图”被擦除的芯片，因此它们看起来像是好的设备，直到你尝试将内容保存到它们.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T14:51:46.050

我的**技巧**是添加一个 check in `nandwrite`，如果要写入的整个页面完全是空的（即充满`0xFF`），程序将*跳过*写入它（就像`flash_erase`已经完成的那样）。

一个额外的*好处*`nandwrite`是，由于跳过了空白页面，整个过程变得更快。万岁！

* * *

**添加：**

事实证明，我的 hack 并没有真正解决问题......

* * *

**再次添加：（*真正的解决方案）***

问题实际上是 PXA310 用`0x00`空白页填充硬件 ECC 位，因此如果软件写入空白页，则位会变为`0x00`. 这很奇怪，因为我应该已经在`nandwrite`. 幸运的是，跳过写空页可以防止重写 ROM 转储出现问题。

更多信息可以在[我的博文](https://sourceforge.net/p/ipaq214android/blog/2012/10/the-strange-hardware-ecc-of-the-pxa310-flash-controller/)中找到。

发送到 linux-mtd 列表的[补丁实际上提到了这个事实](http://lists.infradead.org/pipermail/linux-mtd/2011-June/035911.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T05:48:38.887

在我的嵌入式世界中，您首先使用`flash_erase`爆炸所有内容，然后`nandwrite -p`使用 0xFF 填充数据之外的页面其余部分。

```
Usage: nandwrite [OPTION] MTD_DEVICE [INPUTFILE|-]
Writes to the specified MTD device.

  -m, --markbad           Mark blocks bad if write fails
  -N, --noskipbad         Write without bad block skipping
  -o, --oob               Image contains oob data
  -O, --onlyoob           Image contains oob data and only write the oob part
  -r, --raw               Image contains the raw oob data dumped by nanddump
  -s addr, --start=addr   Set start address (default is 0)
  -p, --pad               Pad to page size
  -b, --blockalign=1|2|4  Set multiple of eraseblocks to align to
  -q, --quiet             Don't display progress messages
      --help              Display this help and exit
      --version           Output version information and exit 
```

# c - 由内存支持的虚拟文件（反向 MMAP）？

> ID：11279477
> 
> 赞同：7
> 
> 时间：2012-07-01T04:02:46.573
> 
> 标签：c, posix, reverse, mmap

mmap() 用于创建由文件系统支持的内存区域。但是，我想要相反的：一个由内存支持的文件。那可能吗？我有一个旧版静态库（意味着无法更改它）只能打开一个本地文件。我无法将其更改为使用重定向的 fd 或标准输入（因为管道不支持查找）我希望从 Windows 共享 (CIFS/SMB) 流式传输文件内容。是否可以在本地文件系统上创建具有虚假大小的虚拟文件，并且当旧版静态库访问文件的任何部分（搜索或读取，不写入）时，我们通过从 CIFS/SMB 获取并返回到遗留库（就像处理页面错误一样）？然后遗留库不会注意到任何区别......

由于权限问题，无法挂载 CIFS/SMB 共享。假设环境是 POSIX，但是，也欢迎针对操作系统的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:55:08.900

可能您正在寻找`shm_open`. `shm_overview(7)`手册页是开始搜索的好地方。

# c - strcpy的C奇怪错误甚至更奇怪的解决方案

> ID：11279478
> 
> 赞同：1
> 
> 时间：2012-07-01T04:03:31.007
> 
> 标签：c, segmentation-fault, strcpy

我正在创建一个程序来打开给定目录中的 .txt 文件，我有一个数组，其中包含相关目录中文件的所有绝对路径，并且我正在创建一个函数来提取并返回文件的名称，函数编写如下：

```
char *name(char *string) {
    int i = strlen(string);
    char *aux;
    while(string[i-1] != '/'){
        i--;
    }
    strcpy(aux, &string[i]); 
    return aux;
} 
```

上面的函数给出了一个 Segmentation Fault 错误，但如果我添加以下行“int j = 0;” 在 aux 声明之前，错误消失了，新的和工作的代码是

```
char *name(char *string) {
    int i = strlen(string);
    int j = 0;
    char *aux;
    while(string[i-1] != '/'){
        i--;
    }
    strcpy(aux, &string[i]); 
    return aux;
} 
```

输入：C:\test\a.txt
输出：a.txt

为什么要添加“int j = 0;” 解决问题？我坚持这一点，无法继续，因为我不知道这种不一致是否会在以后导致更大的问题，我正在考虑编写自己的函数来复制字符串，但在此之前我真的很想了解错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T04:05:59.537

你从不分配`aux`. `aux`在尝试将任何内容复制到它之前，需要指向一个有效的内存位置。

而不是`char *aux`，你需要类似的东西`char *aux = malloc(i+1);`。请注意，这`i+1`是矫枉过正的，因为在您的情况下，它总是比（它不包含）`aux`短至少 3 个字符，但您可能不关心这么小的字符串。完成后请记住指针。`string``C:\``free()`

此外，您发现它可以通过切换声明顺序和/或添加声明来工作的原因可能是您很幸运，并且以某种方式`aux`指向的位置是有效的（如果您这样做`char *aux;`，则`aux`指向随机位置）。然而，这纯粹是运气，即使它似乎有效，它仍然是**无效的代码。**

将来，您可能希望使用[Valgrind](http://valgrind.org/)之类的工具来帮助您诊断内存问题。您还应该阅读有关 C 中基本内存管理和指针的教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T04:22:54.560

由于听起来您只对使用字符串的文件名部分作为参数感兴趣，因此另一种选择是使用您已经拥有的字符串部分。

试试： aux = &string[i]; 而不是strcpy。

这为您提供了一个指向您感兴趣的字符串部分的指针（即最后一个“/”之后的最后一部分）。

其次，确保在所有输入字符串中都有一个“/”，否则会发生不好的事情（即，您的循环将超出字符串的开头，可能在某些时候遇到分段错误）。最好在循环上设置一个条件，使其不会继续超过 i = 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T04:08:10.213

您没有分配任何内存到`aux`. 您正在尝试通过未初始化的指针写入内存。

# ios - iOS Xcode 4.2 使用 StoryBoard 呈现 ViewController

> ID：11279482
> 
> 赞同：2
> 
> 时间：2012-07-01T04:04:08.447
> 
> 标签：ios, storyboard

使用 StoryBoard 呈现视图控制器的新方法。

```
 UIStoryboard* secondStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

UINavigationController* secondViewController = [secondStoryboard instantiateViewControllerWithIdentifier:@"Connect"];

[self presentViewController: secondViewController animated:YES completion: NULL]; 
```

呈现控制器 Connect 的旧方式是这样的

```
 Connect *connect = [[[Connect alloc] initWithNibName:@"Connect" bundle:nil] autorelease]; 

[self presentViewController:connect animated:YES completion:NULL];
 NSString *userid;
 userid=@"123";

 [connect setID:userid]; 
```

我想以 Storyboard 的方式调用连接控制器的 setID 函数，我该怎么做呢？好像我没有直接获得 Connect 控制器的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:49:28.413

您应该子类化视图控制器，以便您可以控制用户与其交互时发生的情况（除非您的应用程序可以单独在 segues 上运行。）

在 Xcode 中，文件 -> 新建 -> 文件 -> Cocoa Touch 类。制作一个类似`MyAwesomeViewController`子类的类（在你的情况下）`UINavigationController`。

`NewVC`我喜欢在我的自定义视图控制器类中调用一个自定义方法。它可以执行您上面列出的所有操作，以及任何自定义设置：

```
+(MyAwesomeViewController *)NewVC {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName: @"MyStoryboard" bundle: nil];
    return [storyboard instantiateViewControllerWithIdentifier: @"MyAwesomeViewController"];
} 
```

这样当你想创建一个新的时，你可以调用`[MyAwesomeViewController NewVC]`它，它会返回一个新的视图控制器实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T04:29:34.090

你为什么将它转换为 UINavigationController？做你正在做的事。

```
Connect* connect = [secondStoryboard instantiateViewControllerWithIdentifier:@"Connect"]; 
```

# objective-c - 目标 C：计算器应用程序 - currentNumber = currentNumber * 10 + digit；

> ID：11279483
> 
> 赞同：2
> 
> 时间：2012-07-01T04:04:58.447
> 
> 标签：objective-c, xcode, calculator

我正在阅读“Objective-C 编程”第 4 版。斯蒂芬 G. Kochan。书中有一个示例代码，用于为 iPhone 创建一个计算器应用程序。我理解代码，至少 90%。- 有一个 Fraction 类，它具有存储分数对象的方法，并描述了如何执行不同的基本分数算术运算 - 除此之外，还有一个计算器类，它根据用户是否在 Fraction 类中运行适当的方法试图求和、除法等。

当用户在界面中按下数字时，视图控制器具有以下方法：

```
-(IBAction)clickDigit:(UIButton *)sender {
int digit = sender.tag;     //sender or the argument inthis case is  the button

[self processDigit:digit];
} 
```

如您所见，此方法现在称为：

```
-(void) processDigit:(int)digit {
currentNumber = currentNumber * 10 + digit;

[displayString appendString:
 [NSString stringWithFormat:@"%i", digit]];
display.text = displayString;

} 
```

我唯一的问题（可能也是最简单的答案）是：为什么 currentNumber 总是乘以 10？当编译器进入上述方法时，currentNumber 的值始终为 0（我使用 XCode 中的调试器验证了这一点）所以我不明白为什么我们甚至必须将它乘以 10。我确实删除了那个乘法，结果不正确，我只是不知道为什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T04:21:44.023

也许考虑这个问题的最好方法是举个例子。

假设用户按顺序单击了以下数字：1、2。然后，假设代码有效，数字值`currentNumber`应该是 12。

现在想象用户接下来点击“3”。现在您希望该值为 123。您可以通过将先前的值 (12) 乘以 10，然后添加 3 来获得此值。如果他们随后单击“4”，则该值应变为 1,234，即 10 * 123 + 4。依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T04:21:34.570

想象一下你的计算器屏幕上有“123”，而你想把它变成“1234”。如果它是一个字符串，您可以在末尾添加“4”，它可以正常工作。但它是一个整数，如果你在整数值上加 4，你会得到 127。所以你所做的就是取 123，乘以 10 得到 1230，然后加上 4 得到 1234。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T04:28:31.013

调试器一定会误导您，就像它有时那样。

考虑一下，如果将乘法取出会使结果错误，那么乘法显然会起作用！

尝试以下仅用于调试：

```
int lastCurrentNumber = currentNumber;
currentNumber = 10 * lastCurrentNumber + digit; 
```

现在在调试器中检查 的值`lastCurrentNumber`，`currentNumber`并`digit`在您逐步执行这两个语句时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T04:29:23.067

用于将`*10`数字移动到十进制数的各个位置（十位、百位等）

避免使用数组是一种“黑客”。其他计算器应用程序“pop”和“push”数字到数组上，这允许更强大的操作以及非十进制数（二进制、十六进制等）的操作

iTunes U 上的免费 iOS 开发课程包括一个使用数组的计算器应用程序。如果您想比较差异，可以在此处下载源代码：

[http://www.stanford.edu/class/cs193p/cgi-bin/drupal/](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)

它也有一个 Fraction 对象，但不使用该`*10`方法。

# java - System.in.read() 不会阻止读取更多输入字符？

> ID：11279490
> 
> 赞同：0
> 
> 时间：2012-07-01T04:06:00.783
> 
> 标签：java

谁能解释一下为什么下面的代码表现得很奇怪：

```
public class UserInputTest {
    public static void main(String[] args) throws IOException {
        int n=3;
        char[] arr = new char[n];
        for (int i=0; i<n; i++) {
          System.out.println(i+1 + " character :");
          arr[i] = ((char)System.in.read());
        }

        System.out.println("You Entered : ");
        for (int i=0; i<n; i++) {
         System.out.println(arr[i]);
        }
    }
} 
```

**输出：**
1 个字符：
u
2 个字符：
3 个字符：
您输入：
u

我希望它会阻止用户输入值三次。任何意见 ？

谢谢，
莫希特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T04:31:48.447

从控制台读取字符有上面提到的输入问题。因此，尝试读取为字符串：

```
public static void main(String args[]){

        int n=3;
        char[] arr = new char[n];
        Scanner in = new Scanner(System.in);
        for (int i=0; i<n; i++) {
          System.out.println(i+1 + " character :");
          String s1 = in.nextLine();
          arr[i] = s1.charAt(0);
        }

        System.out.println("You Entered : ");
        for (int i=0; i<n; i++) {
         System.out.println(arr[i]);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T04:07:55.977

您键入了一个字符，然后按 Enter 键。第二次读取返回 Enter。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T04:11:49.813

输入单个字符的正确方法是使用 GUI，例如 Swing GUI。您不能使用标准 Java 控制台输入单个字符。

您可以为此使用非标准控制台，例如 JCurses，但不能使用标准 Java 控制台。

# ios - 找不到具有指定主机名的服务器

> ID：11279491
> 
> 赞同：53
> 
> 时间：2012-07-01T04:06:25.877
> 
> 标签：ios, xcode, app-store, itunes

当我尝试通过 Xcode 在 App Store 上提交我的应用程序时，我收到了这个错误。

> 找不到具有指定主机名的服务器。

这是Apple的临时错误还是与Xcode有关？

还有其他人面临这个问题吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-03-21T05:44:43.930

这可能是**DNS 污染**问题，至少对我来说（*在中国*）。

如果您也在中国或某些有 DNS 污染问题的地方，您也可以通过修改`8.8.8.8`Mac 的 DNS（以示例为例）来解决此问题。

* * *

我在我的 iPad 应用程序中遇到了这个错误，这是随机发生的，太无聊了。继续尝试对我来说不是一个好的解决方案，尽管它可能会以某种方式起作用。最后，我刚刚更改了我的 Wi-Fi DNS，现在不再出现错误。脚步：

1.  您的设备、设置/Wi-Fi
2.  选择已连接的 Wi-Fi pot
3.  按 DHCP/DNS
4.  调成`8.8.8.8`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2019-06-10T08:03:57.063

在 Xcode 中，选择 Target -> Capabilities，并选中“Outgoing Connections (Client)”以启用 App Sandbox。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-07-01T06:49:42.017

**继续尝试！**

我有过几次（包括今天），每次都没有改变任何东西，当我再次尝试时它就起作用了。

有时是第二次，有时是 20 分钟后。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-11-10T09:49:33.443

我收到了`A server with the specified hostname could not be found.`。我发现我的 MacOS 应用程序打开了应用程序沙盒。避免问题的最简单方法是关闭 Sandbox。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-10-01T21:13:58.450

这解决了我在尝试升级到 El Capitan 时的问题：

```
sudo softwareupdate --clear-catalog 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2020-05-24T03:34:58.000

如果问题发生在 MacOS 项目中，正如@nstein 在此[答案](https://stackoverflow.com/a/47219898/1404324)中评论的那样，只需转到您`Target`的 's`Signing & Capabilities`和 allow`Incoming`和`Outgoing`network 选项。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2019-11-07T07:26:34.790

对我来说，在功能选项卡中启用传出连接是一个问题。

[![在此处输入图像描述](../Images/1d81f1bccaa5a0157f9e8d06f6207bad.png)](https://i.stack.imgur.com/r25rA.png)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-06-04T18:05:50.793

我遇到了同样的问题，原来是VPN相关的。如果您在设备上针对公司网络进行测试，您的 Mac 可能已设置了正确的 VPN，但您的手机没有。**将手机连接到企业 VPN**，以便您的应用程序部署到设备以查看企业服务器。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-10-23T05:36:38.573

我重新启动了我的 MacBook Pro，然后我再次构建，错误已修复。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-05T12:58:42.647

当设备已打开移动数据且没有 wifi 连接，但互联网未正确连接时，我收到此消息。

尝试通过互联网连接或关闭移动数据连接到 wifi 网络。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-01-28T13:14:31.233

我遇到了同样的问题。其实我经常面对。遵循三个步骤总是对我有用

1.  将 DNS 更改为 8.8.8.8 和 4.2.2.2
2.  打开 net.properties 并将“# https.proxyPort=443”更改为“https.proxyPort=80”。你可以在这里找到 net.properties /Applications/Xcode.app/Contents/Applications/Application Loader.app/Contents/MacOS/itms/java/lib/net.properties
3.  打开 Application Loader->Preferences->Advanced 并取消选中 Signiant 和 Aspera。确保选中 DAV。

谢谢大家。现在您可以使用应用程序加载器和 Xcode 提交应用程序。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-16T06:39:30.763

找不到具有指定主机名的服务器。

我遇到了同样的问题，就我而言，这是因为-

1.  服务器未正确配置。
2.  服务器订阅已过期

联系服务器托管公司解决我的问题。

我认为这不是苹果的临时错误或与 Xcode 有关的东西吗？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-06-06T14:12:36.780

当我的 URL 中的“/”丢失时，我收到此错误消息。希望这对某人有所帮助。

例如：实际 URL 是“ [https://www.myweb.com/login](https://www.myweb.com/login) ”。我的 URL 是“ [https://www.myweb.comlogin](https://www.myweb.comlogin) ”导致此错误

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-11-23T20:35:48.740

当我们为 API 服务从一个域更改为另一个域时，我遇到了这个问题。

重新启动网络路由器/调制解调器解决了这个问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-04-29T14:41:08.503

只需**重新启动**您的网络路由器设备。

> 观察。如果它已经具有自动 DNS 设置。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-05-10T02:44:21.003

只是为了分享我的经验

这是由“系统**偏好设置”中的“****共享”>“Internet 共享”引起的**

 **我正在测试并创建**NAT64 网络**取消选中它解决了我的问题。

[![在此处输入图像描述](../Images/8b4b39ab705534ab4c8e42f7d48e3cb0.png)](https://i.stack.imgur.com/bd4j4.png)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-03-02T13:17:31.413

首先检查您的互联网连接.. 去 safari 并通过在 google 上搜索一些东西来检查（不要只尝试 google.com.. 因为它可以被缓存）。如果它工作正常，那么现在在您的应用程序中尝试。它必须工作。这是在没有正确的互联网连接时触发的。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2019-11-23T13:28:34.247

关闭推送通知。然后，**重新启动 XCode**并重新打开推送通知。这个对我有用。**

# mysql - MySQL COUNT(*) GROUP BY HAVING COUNT=?

> ID：11279495
> 
> 赞同：2
> 
> 时间：2012-07-01T04:07:49.620
> 
> 标签：mysql, count, group-by, having-clause

这是我的查询

```
SELECT COUNT(*) as total, toys, date FROM T1
 WHERE (date >= '2012-06-26'AND date < '2012-06-30') AND (Avail > '0')
UNION
SELECT COUNT(*) as total, toys, date FROM T2
 WHERE (date >= '2012-06-26'AND date < '2012-06-30') AND (Avail > '0')
UNION
SELECT COUNT(*) as total, toys, date FROM T3
 WHERE (date >= '2012-06-26'AND date < '2012-06-30') AND (Avail > '0')
GROUP BY RoomType
HAVING COUNT( total ) = 4 
```

输出结果

```
count   Toys            date
3   Bibi        2012-06-26
4   Baba            2012-06-26 
```

如何让 MYSQL 仅显示 count=4 的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T04:17:01.817

```
SELECT * FROM (
    SELECT COUNT(*) as total, toys, date FROM T1
     WHERE (date >= '2012-06-26' AND date < '2012-06-30') AND (Avail > '0')
     GROUP BY RoomType
    UNION
    SELECT COUNT(*) as total, toys, date FROM T2
     WHERE (date >= '2012-06-26' AND date < '2012-06-30') AND (Avail > '0')
     GROUP BY RoomType
    UNION
    SELECT COUNT(*) as total, toys, date FROM T3
     WHERE (date >= '2012-06-26'AND date < '2012-06-30') AND (Avail > '0')
    GROUP BY RoomType) AS src
WHERE total = 4; 
```

请注意，对于正确的数据分组，您*必须*将所有列都包含在`GROUP BY`子句中或作为聚合函数的参数。MySQL 的特性可以让你避免这种限制，但它可能会导致你意想不到的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T04:22:40.957

您需要先分组，然后合并结果。

```
SELECT COUNT(*) as total, toys, date FROM T1
 WHERE (date >= '2012-06-26'AND date < '2012-06-30') AND (Avail > '0')
 GROUP BY RoomType HAVING COUNT( *) = 4
UNION
SELECT COUNT(*) as total, toys, date FROM T2
 WHERE (date >= '2012-06-26'AND date < '2012-06-30') AND (Avail > '0')
 GROUP BY RoomType HAVING COUNT( * ) = 4
UNION
SELECT COUNT(*) as total, toys, date FROM T3
 WHERE (date >= '2012-06-26'AND date < '2012-06-30') AND (Avail > '0')
 GROUP BY RoomType HAVING COUNT( * ) = 4 
```

# qt4 - QTreeView的Qt委托模块，仅委托非顶级小部件？

> ID：11279498
> 
> 赞同：0
> 
> 时间：2012-07-01T04:07:57.520
> 
> 标签：qt4

我将 Qt 的委托模块用于 QTreeView，但这适用于顶级小部件和非顶级小部件，是否可以控制这种行为？仅代表非顶级小部件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:20:11.690

我确定您已经知道可以为给定的列或给定的行设置委托。但是，更简单的方法可能是从任何有意义的 Qt 继承您的委托。在委托函数中，您应该能够检查模型索引的父级并查看它是否与树视图的根索引相同。如果是，它是一个顶级项目，然后你可以调用父类的函数。否则，为非顶级小部件实现您自己的。

# algorithm - 只走一次无向图的所有边

> ID：11279518
> 
> 赞同：2
> 
> 时间：2012-07-01T04:12:48.380
> 
> 标签：algorithm, graph-theory

我正在寻找一种算法，它会告诉我是否有可能只走一次单向图的所有边。该算法必须能够从任何节点开始并遍历整个图，而无需重新访问同一条边。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T04:24:15.260

您正在寻找的东西被称为*欧拉路径*，如果您的图满足必要条件，[维基百科描述了几种](http://en.wikipedia.org/wiki/Eulerian_path#Constructing_Eulerian_trails_and_circuits)构造一个算法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T04:26:12.453

柯尼斯堡[七桥](https://en.wikipedia.org/wiki/Seven_Bridges_of_K%C3%B6nigsberg#Solutions)是欧拉路径的经典例子。

Hierholzer 的算法，[来自 Wikipedia](https://en.wikipedia.org/wiki/Eulerian_path#Hierholzer.27s_algorithm)：

> 选择任何起始顶点 v，并沿着从该顶点开始的边轨迹直到返回 v。不可能卡在除 v 之外的任何顶点，因为所有顶点的度数相等，确保当轨迹进入另一个顶点时w 必须有一条未使用的边离开 w。这样形成的游览是一个封闭的游览，但可能不会覆盖初始图的所有顶点和边。
> 
> 只要存在属于当前游览但相邻边不属于游览的顶点 v，则从 v 开始另一条路径，沿着未使用的边直到返回 v，并将以这种方式形成的游览加入前一个旅游。
> 
> 通过使用诸如双向链表之类的数据结构来维护入射到每个顶点的未使用边的集合，维护当前游览中具有未使用边的顶点列表，并维护游览本身，算法（找到退出每个顶点的未使用边，为一个旅行找到一个新的起始顶点，并连接两个共享一个顶点的旅行）可以在每个固定时间执行，因此整个算法需要线性时间。

# google-cloud-datastore - 带数据存储的 GAE (JDO)

> ID：11279520
> 
> 赞同：0
> 
> 时间：2012-07-01T04:13:20.903
> 
> 标签：google-cloud-datastore, jdo

我是 GAE 新手，尤其是 Datastore (JDO)

我有一个对象组合：用户对象有一个联系人对象的引用。我能够将它们存储在数据存储中。但是该代码允许存储多个具有相同“用户名”的对象，该用户名被定义为主键。

这是代码片段

```
//User class

@PersistenceCapable (identityType = IdentityType.APPLICATION)
public class User{

@PrimaryKey
@Persistent (valueStrategy = IdGeneratorStrategy.IDENTITY) 
String username;

@Persistent
Contact contact;
//getters and setters
}

// Contact  class

@PersistenceCapable (identityType = IdentityType.APPLICATION)
public class Contact {

@PrimaryKey    
@Persistent (valueStrategy = IdGeneratorStrategy.IDENTITY) 
private Key username; 

@Persistent
String Phone1;
}

//DAO class
public void register()  {
User user = new User();
user.setUserName("abc");

Contact contact=new Contact();
contact.setEmail("abc@gmail.com");
user.setContact(contact);
pm.makePersistent(user);
} 
```

如果我两次调用此注册方法（或等效于两次使用相同的用户名和电子邮件 ID 提交注册表单），则数据存储不会抱怨重复键异常。

由于我正在创建“用户名”作为我的 KEY，我希望得到重复的密钥异常。但是为什么这没有发生呢？

谢谢马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:51:19.923

什么“同一组用户名和电子邮件”？您将用户名设置为由 JDO 自动生成，因此它不会为您生成该字段的值。因此它是独一无二的。因此也不例外。

# python - 这些参数定义在python中是什么意思？

> ID：11279521
> 
> 赞同：0
> 
> 时间：2012-07-01T04:13:21.987
> 
> 标签：python

python中参数的许多不同表示形式，例如：

```
urllib2.urlopen(url[, data][, timeout])

urllib2.build_opener([handler, ...])

cookielib.MozillaCookieJar(filename, delayload=None, policy=None)

urllib2.urlopen(url[, data][, timeout]) 
```

和

```
urllib2.urlopen(url,data,timeout) 
```

第一个是否意味着所有 url、数据和超时都可以作为列表传递？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T04:16:02.780

> 我知道第二种方法中的参数是一个列表

这是不正确的。命令/函数文档中的方括号表示可选参数。请注意，在 Python 中，参数的顺序*确实*很重要，因此您需要使用关键字参数来省略中间的参数。

```
urllib2.urlopen(someurl, somedata, sometimeout)
urllib2.urlopen(someurl)
urllib2.urlopen(someurl, somedata)
urllib2.urlopen(someurl, timeout=sometimeout)

urllib2.build_opener()
urllib2.build_opener(handler1)
urllib2.build_opener(handler1, handler2)
urllib2.build_opener(handler1, handler2, handler3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T04:18:24.023

这是可选参数的标准表示法......即您可以传递数据，可选地后跟超时，或者按照您的名称，使用 timeout=... 传递没有数据的超时

# .net - 在没有 XAML 文件的情况下使用 NavigationService

> ID：11279523
> 
> 赞同：2
> 
> 时间：2012-07-01T04:13:51.250
> 
> 标签：.net, wpf, windows-phone-7, c#-4.0

我正在尝试在不使用任何 XAML 的情况下在我的 Windows Phone 应用程序中创建一些页面。一切正常，但是，我无法通过这种方法使用 NavigationService/Journal，并且我使用它的所有尝试都得到了通常的“在位置 {0}' 处找不到 XAML”响应的回答。是的，我可以添加一个几乎为空的 XAML 文件来让一切正常工作，但是这种样板代码真的有必要吗？

是否可以使用 UriMapping 将某些 Uris 映射到特定类而不是 *.xaml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:12:28.100

即使使用 UriMapping，您也必须使用有效的 XAML 页面。并且在 Navigating 事件中取消导航会阻止页面被添加到后台堆栈。因此，如果您希望能够使用导航服务和日志，使用虚拟页面可能是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:44:57.033

我想你要做的是违反 WindowsPhone 指南，因此你的应用程序可能会被市场拒绝..请先验证一下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:40:44.390

MS 通过强迫程序员不惜一切代价使用 XAML 做出了一些非常草率和明显错误的设计“选择”，因此创建 WP 应用程序甚至在没有 XAML 的情况下在这些应用程序中导航是不可能的（还没有？）。我非常希望他们的实习生能在下学期解决这个问题......

# c - 调用函数时出错（指针和向量）

> ID：11279525
> 
> 赞同：0
> 
> 时间：2012-07-01T04:14:46.987
> 
> 标签：c, vector, warnings, ansi, initialization

假设我主要有一个功能`a`：

```
a(c); 
```

并`c`声明为

```
char* c. 
```

函数a其实是这样的：

```
void a(char* v)
{
    v[0] = 1;
    v[1] = 2;
} 
```

这是错的吗？因为程序说`c`在这个函数中是未初始化的。

编辑：更多代码：

```
byte* msg;

insere_msg(t_msg, argv[2], msg);

void insere_msg(int size, char name[MAX], byte* v)
{
    FILE *fp;
    int i = 10;
    int n = 0;
    char aux;

    v[0] = (byte) 4;
    v[1] = (byte) 8;
    v[2] = (byte) 15;
    v[3] = (byte) 16;
    v[4] = (byte) 23;
    v[5] = (byte) 42;
    v[6] = (byte) size>>(3*8);
    v[7] = (byte) size>>(2*8);
    v[8] = (byte) size>>(1*8);
    v[9] = (byte) size;

    fp = fopen(name, "r");

    while(n < size)
    {
        fscanf(fp, "%c", &aux);
        v[i] = (byte) aux;
        i++;
        n++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:26:14.883

查看您的编辑：您需要在某处使用 malloc 命令分配内存。

```
msg = (char *)malloc(sizeof(char) * atLeastThree); 
```

现在分配了 msg，它可以被推送到您的 insere_msg 函数和您的 a 函数中。

您还应该实现这个更“安全”的代码：

```
void a(char * v, unsigned int sizeofV){
    if(NULL != v && sizeofV >= 3){
        v[0] = 1;
        v[2] = 2;
    }else{
        printf("array v is either not allocated or not of proper size");
    }
} 
```

在您操作指针指向的数据之前，您真的应该检查以确保点类型已被初始化并且它对于您尝试追求的功能的目的是有效的！！！

现在，如果您没有分配内存，这将无法解决问题，它只会防止它出错。

如果你想要更安全的代码，你将传入未分配的指针，让函数分配并返回大小。这里唯一的事情是，调用者负责释放内存。

```
unsigned int a(char * v){

    v = (char *)malloc(sizeof(char) * Necessity);

    if(NULL != v){
        v[0] = 1;
        v[2] = 2;
    }else{
        printf("array v is either not allocated or not of proper size");
    }

    return Necessity;
} 
```

# python - 在 Heroku dyno 上运行多个进程是否可行？

> ID：11279527
> 
> 赞同：10
> 
> 时间：2012-07-01T04:15:01.860
> 
> 标签：python, heroku, subprocess, worker

我知道 Heroku 平台的内存限制，并且我知道将应用程序分成 web 和 worker dynos 更具可扩展性。但是，出于测试目的，我仍然希望在 Web 进程旁边运行异步任务。Dynos 很昂贵，我想在 Heroku 提供的免费实例上进行原型设计。

在与 Web 进程相同的测功机中生成新作业作为进程或子进程是否有任何问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T14:43:54.933

在较新的 Cedar 堆栈上，生成多个进程没有问题。每个 dyno 都是一个虚拟机，除了内存和 CPU 使用（我认为大约 512 MB 内存和 1 个 CPU 内核）之外没有特别的限制。遵循某些堆栈（例如 Python）的较新安装说明将导致配置具有开箱即用的多个（Web 服务器）进程。

安装在 web dynos 上的软件可能会根据您使用的 buildpack 有所不同；如果您的子流程需要特殊软件，那么您可能必须将其与您的应用程序捆绑在一起，或者（更好地）推出您自己的 buildpack。

在这一点上，我通常会提醒您，强烈建议使用适当的任务队列系统在工作人员测功机而不是 Web 测功机上运行异步任务，但听起来您已经知道这一点。请记住，只有一个 Web dyno 的帐户（通常这意味着“免费”帐户）将在一个小时左右未收到任何 Web 请求后使该 dyno 停止运行，并且任何后台进程在该 dyno 上运行时间必然会被扼杀。具有多个 web dyno 的帐户不受此限制。

# android - 带有确定和取消按钮的android多选选项

> ID：11279530
> 
> 赞同：0
> 
> 时间：2012-07-01T04:16:29.910
> 
> 标签：android

我正在尝试使用确定和取消按钮创建一个日期选择用户界面。这与闹钟功能上的选择日期基本相同，但我似乎找不到一个我能理解的好例子，所以我可以理解它。有人知道一个很好的例子吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T05:02:55.010

您希望基本上有一个线性布局，在活动的底部有一个复选框和两个按钮。布局类似于：（PS - 这是最基本的解决方案。您可以使用单独的 textview 和 RelativeLayouts 获得更多控制）

```
<LinearLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical">
    <CheckBox
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Sunday"/> 
    <CheckBox
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Monday"/>
   <CheckBox
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Tuesday"/>
    <CheckBox
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Wednesday"/>
    <CheckBox
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Thursday"/>
    <CheckBox
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Friday"/>
    <CheckBox
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Saturday"/>
</LinearLayout>

  <LinearLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal">
    <Button
      android:layout_with="wrap_content"
      android:layout_height="wrap_content"
      android:text="OK"/>
    <Button
      android:layout_with="wrap_content"
      android:layout_height="wrap_content"
      android:text="Cancel"/>
  </LinearLayout> 
```

# java - 显示图像的代码不适用于不同的 java 编辑器

> ID：11279532
> 
> 赞同：1
> 
> 时间：2012-07-01T04:16:31.607
> 
> 标签：java, swing, netbeans, jbutton, imageicon

我需要你的帮助！我正在切换到 netbeans 并且遇到了一些重大问题。大约 6 小时后，我终于想出了如何让图像在 netbeans 中显示。有没有办法编写可以在 JGrasp 和 netbeans 中工作的代码？

netbeans 的工作代码是

```
menuPic = new javax.swing.JButton();
menuPic.setIcon(new javax.swing.ImageIcon(getClass().getResource("image/w2.png"))); 
```

JGrasp 的工作代码是

```
menuPic = new JButton();
ImageIcon bottompic = new ImageIcon("image/w2.png");
JButton menuPic = new JButton(bottompic); 
```

我讨厌 JGrasp，但那是我老师用来评分的，所以我希望能够在 netbeans 中编写它并将代码复制并粘贴到 JGrasp 并且它能够工作。任何帮助将不胜感激！！

解决了这个问题，但现在我有另一个问题，但现在我的 JOptionPane 图片没有加载到 netbeans 我在 JGrasp 中使用的代码是

```
final ImageIcon icon1 = new ImageIcon("image/money.gif");
JOptionPane.showMessageDialog(null, " blah blah", "Text", JOptionPane.INFORMATION_MESSAGE,   icon1); 
```

如果我想在 JOptionPane.showInputDialog 中显示图像，是否与在 JOptionPane.showMessageDialog 中显示图像相同？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T04:18:44.430

只要您的图像文件位于正确的位置，“NetBeans”代码就可以在 JGrasp 中工作——在包含类文件的目录之外的图像子目录中。顺便说一句，它不是特定于 NetBeans 的代码。它只是 Java 代码，纯粹而简单。

# python - 在 IDLE 中调用实例名称时执行操作

> ID：11279537
> 
> 赞同：0
> 
> 时间：2012-07-01T04:17:13.537
> 
> 标签：python, python-2.7

所以假设你有这样的事情：

```
Class Person:
    height = """6' 0""" 
```

和

```
Henry = Person 
```

我必须在课堂上定义什么来做`Henry`和得到`'6' 0"'`而不是类似的东西`<class __main__.Person 0x00012040>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T04:20:32.793

首先，您需要[**实例化**类](http://www.diveintopython.net/object_oriented_framework/defining_classes.html)。

```
Henry = Person() 
```

然后，您需要定义[`__repr__()`方法](http://docs.python.org/reference/datamodel.html#object.__repr__)。

```
Class Person:
    def __repr__(self):
        return self.height 
```

最后，您需要将其设为[实例属性，而不是类属性](https://stackoverflow.com/questions/207000/python-difference-between-class-and-instance-attributes)。

```
Class Person:
    def __init__(self):
        self.height = "6' 0\"" 
```

# php - 用户 ip 没有被记录

> ID：11279538
> 
> 赞同：0
> 
> 时间：2012-07-01T04:18:02.293
> 
> 标签：php, mysql

嗨，我的网站上有 2 个文件`config.php`和`log_user_ips.php`.

我无法将用户 IP 数据插入我的数据库。

我的数据库包含`IPS`表。

**配置.php**：

```
<?php require_once("path/to/base/ip_user_logs.php");  fSaveIPUserLog(); ?> 
```

**ip_user_logs.php**：

```
<?php
function fSaveIPUserLog() {
    return;

    $check = mysql_query("SELECT id FROM ips WHERE ip = '".mysql_real_escape_string($_SERVER['REMOTE_ADDR'])."' LIMIT 1") or die(mysql_error());
    if (mysql_num_rows($check) > 0):
        $check_fetched = mysql_fetch_array($check);
        $id = (int)$check_fetched['id'];
    else:
        mysql_query("INSERT INTO ips SET ip = '".mysql_real_escape_string($_SERVER['REMOTE_ADDR'])."'") or die(mysql_error());
        $id = (int)mysql_insert_id();
    endif;
    mysql_free_result($check);

    mysql_query("UPDATE ips SET 
        times = times + 1, 
        host = '".mysql_real_escape_string(gethostbyaddr($_SERVER['REMOTE_ADDR']))."', 
        agent = '".mysql_real_escape_string($_SERVER['HTTP_USER_AGENT'])."', 
        script = CONCAT(script, '".mysql_real_escape_string("\n".date('Y-m-d H:i:s').' '.$_SERVER['SCRIPT_NAME'].((count($_GET))? '?'.http_build_query($_GET): ''))."'), 
        username = IF('".mysql_escape_string($_SESSION[SESSION_PREFIX.'user']['username'])."' != '', '".mysql_escape_string($_SESSION[SESSION_PREFIX.'user']['username'])."', username), 
        date = NOW() 
        WHERE id = '$id' LIMIT 1") or die(mysql_error());

    return;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:50:33.487

你有一个`return;`不会运行你`function fSaveIPUserLog()`也在使用的语句。现在也鼓励使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)而不是 mysql。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T04:22:26.090

你说你的文件是`log_user_ips.php`，但你包括`ip_user_logs.php`......这是问题吗？

此外，您`return`在定义之后直接有一个语句`fSaveIPUserLog()`，因此该函数不会做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T04:22:39.130

看起来您在`fSaveIPUserLog()`函数定义之后立即有一个 return 语句。这将在函数体中的任何其他代码运行之前退出函数。

# java - Eclipse中的Java，使用replaceAll for int int

> ID：11279540
> 
> 赞同：0
> 
> 时间：2012-07-01T04:18:22.047
> 
> 标签：java, string, int, replaceall

我正在为一个 Java 项目编写代码，我目前`replaceAll(String, int)`在`public String getDAT(int col, int MULTIPLIER)`. Eclipse 是说`replaceAll`是为了`(String, String)`而不是`(String, int)`我试图如何使用它。

但是，唯一的建议是将其更改为`replace()`,`replaceFirst()`或更改`MULTIPLIER`为`String`. 我不能做最后一个，因为它必须是一个整数。当我根据前两个更改它时，错误基本上是相同的。我对Java很陌生，所以我不太了解它。

这是该代码块（忽略`ChatColor`和`ConfigManager`，它们与其余代码一起使用）：

```
public String getDAT(int col, int MULTIPLIER)
  {
    String RESULT = this.LANGUAGE_DATA[this.LANGUAGE][col];
    RESULT = RESULT.replaceAll("%murk%", ChatColor.DARK_GREEN + ConfigManager.Murk() + ChatColor.WHITE);
    if (MULTIPLIER > 0)
      RESULT = RESULT.replaceAll("%mult%", MULTIPLIER);
    return RESULT;
  } 
```

**帮助！我在这里仍然没有有效的答案！我已经添加了`String.valueOf(MULTIPLIER);`，但它没有改变 replaceAll 的任何问题。是否应该添加其他内容`String.valueOf(MULTIPLIER);`？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T04:20:51.967

您可以将 MULTIPLIER 替换为以下之一：

`(new Integer(MULTIPLIER)).toString()`

`Integer.toString(MULTIPLIER)`

`String.valueOf(MULTIPLIER)`

`MULTIPLIER + ""`

# azure - 如何在 Windows azure 部署中访问我的旧文件（ftp - 媒体文件）？

> ID：11279541
> 
> 赞同：0
> 
> 时间：2012-07-01T04:18:24.900
> 
> 标签：azure

我已将我的 asp.net (2010) 应用程序迁移并部署到 Windows azure 云服务。

我在这里有一点疑问。

在我之前的托管中，我的应用程序文件（媒体、文档）位于 ftp 站点的本地文件夹中。并且存储（db）在服务器中。但是根据 windows azure，我刚刚将我的应用程序部署到云中，并在 windows azure 门户中创建了数据库。

一世）。我如何在这里使用我以前的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:53:25.640

我建议您将曾经在 FTP 中的文件存储在 Azure Blob 存储[https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)中。如果你把它们放到 blob 存储中，你可以使用 Cloudxplorer [http://clumsyleaf.com/products/cloudxplorer](http://clumsyleaf.com/products/cloudxplorer)之类的东西来浏览它们并上传它们。如果您真的想使用 FTP（我不推荐它，因为它是一个不安全的协议），还有一个用于 FTP 桥[http://ftp2azure.codeplex.com/的 blob 存储](http://ftp2azure.codeplex.com/)

# performance - 在matlab中对矩阵元素求和的有效（最快）方法

> ID：11279549
> 
> 赞同：9
> 
> 时间：2012-07-01T04:20:38.313
> 
> 标签：performance, matlab, matrix, sum

让矩阵`A`说`A = magic(100);`。我已经看到了两种计算矩阵所有元素之和的方法`A`。

```
sumOfA = sum(sum(A)); 
```

或者

```
sumOfA = sum(A(:)); 
```

其中一个比另一个更快（或更好的练习）吗？如果有，是哪一个？还是它们都同样快？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-01T15:05:19.323

似乎您无法决定性能还是浮点精度更重要。

如果浮点精度是最重要的精度，那么您将分离正负元素，对每个段进行排序。然后按照绝对值递增的顺序求和。是的，我知道，它的工作量比任何人都多，而且可能会浪费时间。

相反，请使用足够的精度，以使所犯的任何错误都无关紧要。使用关于测试等的良好数值实践，这样就不会产生问题。

就时间而言，对于 NxM 阵列，

sum(A(:)) 将需要 N*M-1 加法。

sum(sum(A)) 将需要 (N-1)*M + M-1 = N*M-1 加法。

任何一种方法都需要相同数量的添加，所以对于一个大数组，即使解释器不够聪明，无法识别它们都是同一个操作，谁在乎呢？

这根本不是问题。不要为了担心这个而把鼹鼠山变成一座山。

编辑：为了回应 Amro 关于一种方法的错误的评论，您几乎无法控制。添加将以不同的顺序完成，但不能保证哪个顺序会更好。

```
A = randn(1000);
format long g 
```

这两种解决方案非常接近。事实上，与 eps 相比，差异几乎不显着。

```
sum(A(:))
ans =
          945.760668102446

sum(sum(A))
ans =
          945.760668102449

sum(sum(A)) - sum(A(:))
ans =
      2.72848410531878e-12

eps(sum(A(:)))
ans =
      1.13686837721616e-13 
```

假设您选择我提到的隔离和排序技巧。请注意，负部分和正部分将足够大，以至于会损失精度。

```
sum(sort(A(A<0),'descend'))
ans =
          -398276.24754782

sum(sort(A(A<0),'descend')) + sum(sort(A(A>=0),'ascend'))
ans =
            945.7606681037 
```

因此，无论如何，您确实需要将这些片段累积在更高精度的数组中。我们可以试试这个：

```
[~,tags] = sort(abs(A(:)));
sum(A(tags))
ans =
          945.760668102446 
```

即使在这些测试中也会出现一个有趣的问题。是否会因为测试是在随机（正常）阵列上完成而出现问题？本质上，我们可以将 sum(A(:)) 视为随机游走，醉汉游走。但是考虑 sum(sum(A))。sum(A) 的每个元素（即内部和）本身就是 1000 个正态偏差的总和。看看其中几个：

```
sum(A)
ans =
  Columns 1 through 6
         -32.6319600960983          36.8984589766173          38.2749084367497          27.3297721091922          30.5600109446534          -59.039228262402
  Columns 7 through 12
          3.82231962760523          4.11017616179294         -68.1497901792032          35.4196443983385          7.05786623564426         -27.1215387236418
  Columns 13 through 18 
```

当我们将它们相加时，精度会有所下降。因此，作为 sum(A(:)) 的操作可能会更准确一些。是这样吗？如果我们使用更高的精度进行累加呢？因此，首先，我将使用双精度对列求和，然后转换为 25 位小数精度，并对行求和。（我在这里只显示了 20 个数字，留下 5 个数字作为保护数字隐藏。）

```
sum(hpf(sum(A)))
ans =
945.76066810244807408 
```

或者，立即转换为 25 位精度，然后对结果求和。

```
sum(hpf(A(:))
945.76066810244749807 
```

所以双精度的两种形式在这里同样是错误的，方向相反。最后，这一切都没有实际意义，因为与简单的变化 sum(A(:)) 或 sum(sum(A)) 相比，我展示的任何替代方案都更耗时。只需选择其中一个，别担心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T08:56:23.077

在性能方面，我想说两者都非常相似（假设是最近的 MATLAB 版本）。这是使用[TIMEIT](http://www.mathworks.com/matlabcentral/fileexchange/18798-timeit-benchmarking-function)功能的快速测试：

```
function sumTest()
    M = randn(5000);
    timeit( @() func1(M) )
    timeit( @() func2(M) )
end
function v = func1(A)
    v = sum(A(:));
end
function v = func2(A)
    v = sum(sum(A));
end 
```

结果是：

```
>> sumTest
ans =
    0.0020917
ans =
    0.0017159 
```

我担心的是浮点问题。例子：

```
>> M = randn(1000);
>> abs( sum(M(:)) - sum(sum(M)) )
ans =
   3.9108e-11 
```

对于较大的矩阵，误差幅度会增加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-22T13:54:35.373

我认为一个简单的理解方法是在代码的第一个和最后一个应用“ **tic_ toc** ”函数。

```
tic
A = randn(5000);
format long g
sum(A(:));
toc 
```

但是当你使用 randn 函数时，它的元素是随机的，并且每个周期**CPU**计算的计算时间可能不同。这更好地使用了一个具有如此大元素的独特矩阵来比较计算时间。

# jquery - 自上次访问 jquery 以来，如何突出显示网站上的新项目？

> ID：11279551
> 
> 赞同：1
> 
> 时间：2012-07-01T04:21:06.980
> 
> 标签：jquery, cookies

我在网站上有几个 div。我想突出显示自上次访问以来的新项目。

我不想为此使用 php 和 mySQL，因为： - 我不想将每个用户的上次访问信息存储在数据库中 - 我希望这也适用于未注册/未登录的用户 - 主要内容被缓存，所以我不能向不同的用户输出不同的内容。

我认为这给我留下了一个解决方案：cookies + javascript： - 检查 cookie 是否存在 - 如果是，突出显示新项目（例如向 div 添加一个类） - 更新 cookie

那么，我该怎么做呢？

div 当前使用相同的类，并且它们没有 id，因此如果需要，我可以将 div 的日期或项目的主要 ID 放在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:57:03.340

您可以将`data-timestamp="[current_timestamp]"`属性添加到您的 div。然后将上次访问的时间戳存储在cookie中并添加这样的类

```
$('.divClass').filter(function() {
  return $(this).attr("data-timestamp") > "[last_visit_timestamp]";
}).addClass('highlight'); 
```

（请参阅[jQuery：选择属性大于值的所有元素](https://stackoverflow.com/questions/2613648/jquery-selecting-all-elements-where-attribute-is-greater-than-a-value)）

您可以通过以下方式轻松读取/写入 cookie： [https ://github.com/carhartl/jquery-cookie/](https://github.com/carhartl/jquery-cookie/)

# c# - 带有 arrayLists 的 InvalidOperationException

> ID：11279552
> 
> 赞同：0
> 
> 时间：2012-07-01T04:21:30.123
> 
> 标签：c#

我得到了这个例外：

`Collection was modified; enumeration operation may not execute.`

直接在此代码之后：

```
 else if (count == 0)
                    {
                        partCategory.Add(words[count].ToString());
                        foreach (string categoryS in partCategory)
                        {
                            if (categoryS != words[count].ToString())
                            {
                                partCategory.Add(words[count].ToString());
                            }
                        }
                    } 
```

我猜测它可能是之前使用的 Add 方法，但我不确定。

调用堆栈代码：

```
**********.exe!**********m.FileController.readSortText(string fileName = "**********extracted\\PC120701.txt", System.Windows.Forms.ProgressBar newProgress = {Value = 0 Min = 0 Max = 100}) Line 78 + 0x207 bytes   C#

**********.exe!**********.mainForm.unzipFile(string fileName = "**********") Line 133 + 0x42 bytes  C#
**********.exe!**********.mainForm.decompress_Click(object sender = {Text = "Unzip"}, System.EventArgs e = {X = 49 Y = 7 Button = Left}) Line 163 + 0x17 bytes  C#

[External Code] 
**********.exe!**********.Program.Main() Line 18 + 0x28 bytes   C#

[External Code] 
```

感谢您未来的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T04:27:04.650

根据[foreach](http://msdn.microsoft.com/en-us/library/ttw7t8t6%28v=vs.100%29.aspx)文档：我的口音。

> foreach 语句为实现 System.Collections.IEnumerable 或 System.Collections.Generic.IEnumerable 接口的数组或对象集合中的每个元素重复一组嵌入语句。foreach 语句用于遍历集合以获取您想要的信息，但**不能用于从源集合中添加或删除项目以避免不可预知的副作用**。如果您需要从源集合中添加或删除项目，请使用**for 循环**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T04:26:16.873

是的，那是因为您正在修改您正在枚举的集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T04:26:22.450

您在通过 foreach 命令读取列表时无法更改列表您可以使用 for 命令或获取另一个列表并将值保留在新列表中，然后在另一个 for 循环中将新值放入旧列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T04:31:24.737

MSDN 是你的朋友。[看看这里。](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.aspx)该`foreach`语句在幕后使用 IEnumerator 接口。

> 只要集合保持不变，枚举数就保持有效。如果对集合进行了更改，例如添加、修改或删除元素，则枚举器将不可恢复地失效，并且下一次调用 MoveNext 或 Reset 将引发 InvalidOperationException。如果集合在 MoveNext 和 Current 之间进行了修改，则 Current 返回它设置为的元素，即使枚举器已经失效。

# php - 基于索引的新数组创建和与主数组合并

> ID：11279562
> 
> 赞同：0
> 
> 时间：2012-07-01T04:23:50.473
> 
> 标签：php, arrays, sorting

假设一个主数组已经按 ASCENDING 顺序排序：

```
$values = array('value1', 'value2', 'value3', 'value4', 'value5', 'value6'); 
```

另一个带有键（索引）的数组根据某些特定要求进行排序。

```
$keys = array(0, 2, 1, 5); 
```

**必需的逻辑：**应该创建一个数组说`$output`

*   从 who's 索引的元素开始`$values`存储`$keys`保留索引的顺序。
*   的其余元素`$values`应按升序附加在后面。

例如 1

```
$values = array('value1', 'value2', 'value3', 'value4', 'value5', 'value6');
$keys = array(0, 2, 1, 5);
$output = array('value1', 'value3', 'value2', 'value6', 'value4', 'value5'); 
```

例如 2

```
$values = array('value1', 'value2', 'value3', 'value4', 'value5', 'value6');
$keys = array(5);
$output = array('value6', 'value1', 'value2', 'value3', 'value4', 'value5'); 
```

例如 3

```
$values = array('value1', 'value2', 'value3', 'value4', 'value5', 'value6');
$keys is empty, no keys(indexes).
$output = array('value1', 'value2', 'value3', 'value4', 'value5', 'value6'); 
```

我有`$values`和`$keys`数组。我只需要弄清楚如何创建`$output`数组。我很确定阵列上需要有一个`foreach`循环`$values`才能工作。

我在这里碰壁，试图弄清楚这件事......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:32:47.613

试试这个...

基本上解析`$values`数组并提取相关值。取消设置数组，只留下未排序的值。数组中的剩余项将在循环后合并。与 array_merge。

取消设置数组不会更改索引值，这在这种情况下很有用。

如果有更多，就会有`$keys`错误`$values`。需要添加一些错误检查。

```
$values = array('value1', 'value2', 'value3', 'value4', 'value5', 'value6');
$keys = array(0, 2, 1, 5);

foreach ($keys AS $key) {
    $tempOutput[] = ($values[$key])?$values[$key]:'';
    unset($values[$key]);
}

$output = array_merge($tempOutput, $values); 
```

# android - 复制活动时R未解决的变量

> ID：11279566
> 
> 赞同：1
> 
> 时间：2012-07-01T04:24:47.687
> 
> 标签：android, duplicates, code-duplication

我正在尝试使用不同的标题和包名称复制我的项目。但是，当我复制并粘贴活动时，它返回 R 是一个未解析的变量，我可以从 android 或从我的包中导入它。有没有更好的方法来复制我的项目，或者有没有办法解决 R？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:27:03.247

如果您更改了包名称，您还必须在 AndroidManifest.xml 中进行更改

您可以将项目复制粘贴到磁盘上，然后在 Eclipse 上的项目上右键单击您的包并转到重构 --> 重命名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T04:36:48.593

只需删除所有说的导入语句

导入 com.you.yourapp.R

并完成创建新项目。问题会自行解决。

编辑

只需阅读您为什么要这样做。更简单的方法是右键单击原始项目中的包，转到重构>重命名，然后重命名包。然后使用新的包名称和应用程序标题更新您的 AndroidManifest。

# html - 为什么这些 div 重叠？

> ID：11279568
> 
> 赞同：0
> 
> 时间：2012-07-01T04:25:26.367
> 
> 标签：html, css

这对我来说毫无意义。我一直在尝试研究这个，但我不知道它为什么会重叠。我有一种感觉，这是因为我使用了“img”标签，或者因为我需要在某处使用某种位置类型，但我已经尝试过了，但没有成功。

[http://jsfiddle.net/FhU3r/](http://jsfiddle.net/FhU3r/)

```
#picdiv {
height:405px;
width:320px;
border:1px solid black;
margin:15px;
    float:left;
 }

#rightdiv {
width:620px;
height:320px;
border:1px solid black;

 } ​

<div id="picdiv">
<center><img src="img.png" /></center>
<div id="quote">
"Here's Some Inspirational Text Like OMG!"
</div> <!-- end quote -->
</div> <!-- end pic container -->

<div id="rightdiv">
"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
</div>​ 
```

**我更新了它，但仍然无法让它工作**：http: [//jsfiddle.net/FhU3r/15/](http://jsfiddle.net/FhU3r/15/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T04:34:07.683

如果我了解您要做什么，我会添加`float: left`到`#rightdiv`.

这将使段落仅出现在图像和标题的一侧。当然，如果父容器中没有足够的宽度，它将换行到下一行，因此需要注意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T05:15:11.673

首先，请注意您的*边框*重叠，但内容不重叠。

我所知道的 float 属性在概念上确实有两种不同的用途，即使技术实现是相同的。第一个是让内容围绕一个元素流动，第二个是让元素在布局中彼此相邻。据我所知，您正在寻找第二个但实施第一个。

让我们回顾一下第一个，让内容围绕一个元素流动。

假设您要发表一篇文章。您有许多文本段落，以及一些要插入整个正文的图像。它们应该“浮动”在一侧、左侧或右侧，并且段落文本应该围绕它们流动。而且，*包含围绕图像流动的段落文本的框也应该包含图像本身*。这就是您在代码中看到的内容。

[例子](http://jsfiddle.net/FhU3r/14/)

然后是第二个，为了布局目的，你想把东西贴在一起。这似乎就是你所追求的。

好吧，第一个目的的适应使得将浮动用于第二个目的有点难看。我不知道历史，但如果我不得不猜测，我会说浮动规格是围绕第一个目的设计的。

基本上你只需要将*两个*元素都向左浮动，使用`float: left;`. 右边的那个不会试图绕着左边的那个流动，而是存在于它自己的垂直列中。即使它比左边的长，它也只会延伸它的柱子，而不是在左边的柱子下面流动。

[例子](http://jsfiddle.net/FhU3r/16/)

这种方法的一个丑陋方面是你不能随便在两列下面放一些东西。如果您只是添加另一个段落，它将环绕*两个*浮动元素：

[例子](http://jsfiddle.net/FhU3r/18/)

所以要解决这个问题，您需要添加`clear: left`到两个左浮动元素下方的任何内容。

[例子](http://jsfiddle.net/FhU3r/19/)

有关这方面的权威来源，请查看[W3C 规范](http://www.w3.org/TR/CSS2/visuren.html#floats)。

[这篇文章](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)也很好地解决了浮动的常见问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T04:33:56.787

由于您有一个浮动 div 和另一个非浮动 div，因此浮动 div 已脱离文档的正常流程。您可以通过添加`float:right;`到`#rightdiv`.

如果您希望一个显示在左侧，另一个显示在右侧 - 从您的 div 的 id 来看，这听起来像您这样做:) - 那么您需要手动设置它们的宽度（px、%、em - 无论你需要什么），这样它们就可以水平地放入包含的元素中。如果两个浮动元素不能放在同一行，则第二个元素会“碰撞”到第二行。

此外，如果您有更多内容位于这些 div 下方，您可能希望使用以下内容“清除”浮动元素：

```
<br style="clear:both" /> 
```

这将确保下面的任何元素都不会与浮动元素重叠。我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T04:28:03.003

浮动 div 将其从“流”中取出。所以你有点“浮动”了图像顶部的 div 。如果您浮动图像，它应该定位您想要的位置。

# python - 以编程方式将图像保存到 Django ImageField 2

> ID：11279570
> 
> 赞同：1
> 
> 时间：2012-07-01T04:26:00.447
> 
> 标签：python, django, imagefield

我已经阅读了很多答案并在 shell 中尝试了所有这些，但不想正确保存我的本地图像，他截断了文件。当图像大小为 400kb 时，他在媒体目录中创建大小为 10-30kb 的文件。我不知道为什么。例如，我有路径为 d:/1.png 的图像。我试过了

```
from django.core.files import File
fileObject=File(open("d:/1.png"))
object.image.save('1.png',fileObject,True) 
```

fileObject.size 显示正确的图像大小，但 object.image.size 不正确和文件，他保存的内容不完整。我也试过

```
from django.core.files.temp import NamedTemporaryFile
temp = NamedTemporaryFile()#with delete=True TypeError: __init__() got an unexpected keywork argument 'delete'
temp.write(open('d:/1.png').read())
temp.flush()
f=File(temp)#f.size not correct
object.image.save('1.png',f,True)
and object.image.size and file not correct, file not full. 
```

我尝试使用 StringIO，但这也不起作用。我不知道是什么尝试正确保存这些图像。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:08:01.787

您必须将模式更改为二进制

fileObject=File(open("d:/1.png", mode="rb"))

# c# - MonoTouch.Dialog：在 OwnerDrawnElement 中设置 Disclosure Indicator Clear

> ID：11279576
> 
> 赞同：1
> 
> 时间：2012-07-01T04:26:41.587
> 
> 标签：c#, ios, uitableview, xamarin.ios, monotouch.dialog

我有一个自定义`OwnerDrawnElement`，我在其中覆盖 GetCell 以添加一个披露指标，但它不透明。如何制作 DisclosureIndicator`transparent`以便通过查找单元格？

```
 public override UITableViewCell GetCell(UITableView tv)
    {
        var cell =  base.GetCell(tv);
        cell.Accessory = UITableViewCellAccessory.DisclosureIndicator;
        return cell;
    } 
```

结果： ![在此处输入图像描述](../Images/0b814c57d8a0e010684135b83139ba7a.png)

# ruby-on-rails - Rails 控制器无法识别对象

> ID：11279577
> 
> 赞同：0
> 
> 时间：2012-07-01T04:26:54.043
> 
> 标签：ruby-on-rails

我在我的一个控制器中有这段代码可以访问多事。

```
eventful = Eventful::API.new('my_key_here') 
```

但是，刷新页面时出现以下错误

```
uninitialized constant LocationsController::Eventful 
```

[我按照http://api.eventful.com/libs](http://api.eventful.com/libs)的指示安装了 gem 版本 2.2.1 ，我的 gemfile 包含该行

```
gem 'eventfulapi', '2.2.1' 
```

我正在尝试在这里重新创建示例：http: [//api.eventful.com/libs/ruby/doc/index.html](http://api.eventful.com/libs/ruby/doc/index.html) 我可以让它在单独的 ruby​​ 脚本中工作（例如通过命令运行 'ruby a.rb'行）这让我认为这是完全可能的。我只是无法让它在控制器中工作以提供我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T07:43:50.047

尝试`require 'eventful/api'`在控制器代码的顶部添加。

# php - 记录的条件计数

> ID：11279580
> 
> 赞同：0
> 
> 时间：2012-07-01T04:27:11.683
> 
> 标签：php, count, mysql-num-rows

我试图根据特定条件计算表中的行数。所以，我确实设法编写了一段可以根据需要运行的代码。

但是，有点太长了。所以我想知道是否有更简单的方法来实现它。

代码：

```
// Comments
$sql_total_comments = mysql_query("SELECT * FROM comments");
$sql_pending_comments = mysql_query("SELECT * FROM comments WHERE comment_status = '0'");
$sql_approved_comments = mysql_query("SELECT * FROM comments WHERE comment_status = '1'");
$sql_declined_comments = mysql_query("SELECT * FROM comments WHERE comment_status = '2'");

$total_comments_num = mysql_num_rows($sql_total_comments);
$pending_comments_num = mysql_num_rows($sql_pending_comments);
$approved_comments_num = mysql_num_rows($sql_approved_comments);
$declined_comments_num = mysql_num_rows($sql_declined_comments); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T04:43:59.083

```
SELECT comment_status, COUNT(comment_status)
  FROM comments GROUP BY comment_status; 
```

在您的代码中，要么将总数的计数加起来，要么像其他答案一样对 COUNT(*) 运行单独的查询。

所以你的代码看起来像这样，假设你使用的是 PDO：

```
$sql = 'SELECT comment_status, COUNT(comment_status) AS "count" '.
  'FROM comments GROUP BY comment_status;';
$query = $db->query($sql);
$count_total = 0;
$count = array( );
while (($row = $query->fetch(PDO::FETCH_ASSOC)) !== FALSE) {
  $count_total += $row['count'];
  $count[$row['comment_status']] += $row['count'];
}
$query = null;  // Because I'm neurotic about cleaning up resources. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T04:31:45.393

使用[COUNT()](http://dev.mysql.com/doc/refman/5.6/en/counting-rows.html) DB FUNCTION 来完成这项工作。

```
$ret = mysql_query("SELECT COUNT(*) FROM comments");
$row = mysql_fetch_row($ret);
$total_comments_num = $row[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T04:29:08.010

使用`select count(*) from comments where`......

# html - 如何在html中创建新页面？

> ID：11279581
> 
> 赞同：1
> 
> 时间：2012-07-01T04:27:36.313
> 
> 标签：html

我是 HTML 的菜鸟。我的桌面上有一个带有 page1.html 和 page2.html 的文件夹。这是第 1 页的示例

```
<html>
<h1> Welcome
<title>Website
</h1>
<body>
<p> to page 2
</body>
<a href="page2.html" target="_self">Link</a>
</html> 
```

每当我打开 page1.html 时，它只会说“欢迎”和“到第 2 页”。没有超链接。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T04:29:42.490

您缺少一个`</p>`标签，该`<a>`标签应该在`<body>`标签内。

`<h1>`标签也格式不正确。请记住，这就像数学中的括号一样。如果你打开一个，那么你需要关闭一个。

```
<html>
<head>
<title>Website</title>
</head>
<body>
<h1>Welcome</h1>
<p>
<a href="page2.html" target="_self">Link to page 2</a>
</p>
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T04:30:19.523

A 标签应该在 body 标签内。您可能还想关闭 p 标签。

尝试类似：

```
<html>
  <head><title>Website</title></head>
  <body>
     <h1>Welcome</h1>
     <p>to page 2 <a href="page2.html">Link</a></p>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T04:31:11.123

尝试这个。（记得关闭你的标签！）

```
<html>
<h1> Welcome 
<title>Website </title>
</h1>
<body>
<p> to page 2 </p>
<a href="page2.html" target="_self">Link</a>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T04:31:34.673

你应该`<title>`用`</title>`. 修复该问题将使其余内容显示（[演示](http://jsfiddle.net/yVeWt/)）。

正如其他人所说，您还应该关闭`<p>`标签，`<a>`并将`<body>`. 另外，`<title>Welcome</title>`应该在外面`<h1>`，也`<h1>`应该在里面`<body>`。

举个例子就更简单了。有效的 HTML 将是：

```
<html>
<head>
    <title>Website</title>
</head>
<body>
    <h1>Welcome</h1>
    <p>to page 2</p>
    <a href="page2.html" target="_self">Link</a>
</body>
</html> 
```

[在这里查看结果](http://jsfiddle.net/7hYrP/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-01T04:39:08.110

您的`<title>`标签应该放在文档的头部，并且您的内容都应该在正文中。您还需要关闭所有标签。

尝试这个：

```
<html>
    <head>
        <title>Website</title>
    </head>

    <body>
        <h1>Welcome</h1>
        <p> To page 2: <a href="page2.html" target="_self">Link</a></p>
    </body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-30T18:23:32.690

标题和浏览器需要理解页面的所有内容更适合放在`<head> </head>`标签之间。

必须在浏览器视口窗口中显示的内容必须位于`<body> </body>`标签之间。正如其他人所提到的，大多数 HTML 标签都需要关闭。

此外，`<!DOCTYPE>`声明必须是 HTML 文档中`<html>`标记之前的第一件事。

```
 <!DOCTYPE html> 
   <html>            
        <head>
          <title>Website</title>
        </head>

        <body>
          <h1> Welcome </h1>
          <p> to page 2 </p>
          <a href="page2.html" target="_self">Link</a>
        </body>            
    </html> 
```

如需快速教程或帮助，您可以随时参考以下网站。这很容易也很有趣。祝你好运！

[http://www.w3schools.com/html/default.asp](http://www.w3schools.com/html/default.asp)

# c# - 具有不同配置值的单元测试静态构造函数

> ID：11279582
> 
> 赞同：4
> 
> 时间：2012-07-01T04:27:37.030
> 
> 标签：c#, unit-testing, static-constructor

我有一个带有静态构造函数的类，我用它来读取 app.config 值。如何对具有不同配置值的类进行单元测试。我正在考虑在不同的应用程序域中运行每个测试，因此我可以为每个测试执行静态构造函数 - 但我在这里有两个问题：
1.我不知道如何在单独的应用程序域中运行每个测试运行
2.如何在运行时更改配置设置？

有人可以帮我吗？或者有人有更好的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:04:54.593

如果您从 读取`(Web)ConfigurationManager.AppSettings`，那只是一个 NameValueCollection，因此您可以将`ConfigurationManager.AppSettings`直接读取的代码替换为从任何 NameValueCollection 读取的代码。

只需将您的实际配置解析从静态 ctor 移至静态方法即可。静态 ctor 调用该静态方法并通过`ConfigurationManager.AppSettings`，但您可以从测试代码中调用该解析器方法，并验证配置解析而无需实际接触文件或弄乱应用程序域。

但从长远来看，确实按照 seldary 的建议注入您的配置参数。创建一个配置类，在应用程序启动时读取实际值，并设置您的 IoC 容器以向所有请求者提供相同的配置实例。

这也使进一步的测试更容易，因为您的类不会从全局静态配置实例中读取。您可以只传递特定的配置实例以进行不同的测试。当然为你的测试创建一个工厂方法，来构建一个全局配置，所以你不必一直手动做......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:30:23.607

您无需测试 .Net 是否能够从配置文件加载数据。
相反，试着专注于测试你自己的逻辑。

更改您的类，使其从其构造函数（或通过属性）获取配置值，然后像使用任何其他依赖项一样对其进行测试。

在此过程中，您还将班级移向[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

根据配置加载 - 将此逻辑集中在一个单独的非静态类中。

* * *

编辑：
将配置逻辑分离到另一个类中。像这样的东西：

```
public static class ConfigurationLoader
{
    static ConfigurationLoader()
    {
        // Dependency1 = LoadFromConfiguration();
        // Dependency2 = LoadFromConfiguration();
    }

    public static int Dependency1 { get; private set; }
    public static string Dependency2 { get; private set; }
} 
```

然后，当您实例化您的类时，将其注入依赖项：

```
public class MyClass
{
    private readonly int m_Dependency1;
    private readonly string m_Dependency2;

    public MyClass(int dependency1, string dependency2)
    {
        m_Dependency1 = dependency1;
        m_Dependency2 = dependency2;
    }

    public char MethodUnderTest()
    {
        if (m_Dependency1 > 42)
        {
            return m_Dependency2[0];
        }

        return ' ';
    }
}

public class MyClassTests
{
    [Fact]
    public void MethodUnderTest_dependency1is43AndDependency2isTest_ReturnsT()
    {
        var underTest = new MyClass(43, "Test");
        var result = underTest.MethodUnderTest();
        Assert.Equal('T', result);
    }
}

...

var myClass = new MyClass(ConfigurationLoader.Dependency1, ConfigurationLoader.Dependency2); 
```

您可以继续使用 IOC 容器，但是通过这种简单的可测试设计解决了使用不同输入测试 MyClass 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T06:46:45.670

就个人而言，我只会将您的静态构造函数放入静态方法中，然后在静态块中执行该方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-22T13:05:32.267

我最近遇到了同样的问题。唯一的区别是配置值来自数据库而不是 app.config。我能够使用 TypeInitializer 解决它。

```
[Test]
public void TestConfigurationInStaticConstructor()
{
    // setup configuraton to test
    // ...

    // init static constructor
    ReaderTypeInit();

    // Assert configuration effect
    // ...

    // reset static ctor to prevent other existing tests (that may depend on original static ctor) fail
    ReaderTypeInit();
}

// helper method
private void ReaderTypeInit()
{
    typeof(< your class with static ctor>).TypeInitializer.Invoke(null, new object[0]);
} 
```

# php - 循环遍历 JSON 数据并将其显示在 DIV 中

> ID：11279583
> 
> 赞同：0
> 
> 时间：2012-07-01T04:27:40.383
> 
> 标签：php, jquery, ajax

我有一个带有一些复选框和提交按钮的页面。我使用 AJAX 将复选框值发布到 PHP 脚本 calc.php，使用数据运行一些计算并将结果分配给 PHP 会话变量。我有另一个 PHP 脚本 json.php，它获取该会话数据并将其编码为 JSON，以便 jquery 显示在 div 中。我的问题是我允许用户设置他们要提交的数据集的数量，子编号，当用户更改数据集的数量时，我的显示循环会不同步。

例如，如果他们从 3 个数据集开始，他们通过按 #button 来逐一提交。在最后一组之后， if (count == max) 运行并且。现在，他们可以根据需要进行另一次计算并更改数据集的数量。如果他们将其更改为 2，则输出变为 4，而不是重置为 1 并清空#log。

```
$("#button").click(function() {
$.ajax({
  type: "POST",
  url: "calc.php",
  data: $("form#checkboxes").serialize(),
  success: function(data) {
    if(document.getElementById('calc').checked) {
    var max = checkboxes.subnumber.value;
    var stop = Number(max) + 1;
    count++;
    output++;
    $.getJSON('json.php', function(data) {
      $.each(data, function(key, val) {
        $('#log').append(output);
        $('#log').append(val.result);
        $('#log').append("</br>");
      })
    })
    if (count == max){
      count = 0;
      $("#results").load('results.php')
    }
if(output == stop) {
  $("#log").empty();
  output = 1;
}
}
}
})
} 
```

我知道这很简单，但我已经尝试修复它两个小时，但无法找出问题所在。其他一切都完美无缺，只是输出计数器没有正确完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T05:42:07.533

您正在对 JSON 进行异步调用。如果用户做事如此之快以至于电话无法正常返回，那么问题就出在那儿。

你有两个选择：

1.  同步运行所有 JSON（在 JSON 调用中使用 async:false）
2.  利用计数器并仅处理返回当前索引的事件。

#2 的伪代码：

```
var pCounter = 0;
function doSomeAjax()
{
    pCounter++;
    $.ajax('url',{
        data:{count:pCounter}
        success:function(data)
            {
                // your json should return the current counter index
                if (data.counter != pCounter) return;
                // execute normally.
            }
    });
} 
```

# .net - Vb.NET 中的公式编辑器，就像 Crystal 报表一样

> ID：11279584
> 
> 赞同：0
> 
> 时间：2012-07-01T04:27:42.257
> 
> 标签：.net, vb.net, custom-controls

我正在开发一个金融系统，我必须让用户能够使用数据库中的一些预定义字段生成自己的结果并对其执行数学计算。

例如，我必须计算等于 Basic 的 10% + VDA 的 15% 的小费金额。这个公式不时变化，并且可以根据某些参数进行调整。

整个模块类似于水晶报表中的公式编辑器，可以从顶部选择字段并在编辑器中对其添加数学运算，一旦完成公式，您就会得到结果。

最初，我将只有 +,-,*,/,(,),% 数学运算。

任何想法如何绕过它以及如何在运行时获得数学结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T07:32:37.437

我自己做了一个类似的编辑器，并使用动态 sql 计算了值。

# php - 图像选项关系的 MySQL 数据库设计

> ID：11279587
> 
> 赞同：1
> 
> 时间：2012-07-01T04:28:15.193
> 
> 标签：php, mysql, sql, database-design, relationship

我有两个表，**images**和**image_data**，这是我的 image_data 表的一个示例。

```
image_id | slide_id | language_id  | type   |
101      | 1        | 1            | CQ     |
101      | 2        | NULL         | NULL   |
56       | 5        | 1            | TN     |
56       | NULL     | 2            | NULL   | 
```

所以基本上，每个图像都会有不同的选项，我想知道实现这一点的最佳方法..因为我觉得我做错了。

有了这个，我可以运行一个查询来`GROUP_CONCAT()`将多行中的值转换为一个连接的字符串。

```
image_id | slide_id | language_id  | type   |
101      | 1,2      | 1            | CQ     |
56       | 5        | 1,2          | TN     | 
```

这很好，但我现在这样做的问题是……用我的后端系统更新行似乎真的很困难。

![在此处输入图像描述](../Images/2531d6b3a457780aa85a05057f713197.png)

因此，通过我的查询，我可以根据数据库确定要检查哪些，因为自从我将它连接起来后，我将所有这些都放在一行中。但现在就像..当我点击“保存”并更新行时，我应该更新哪一个？可以有超过 1 行相同的图像 id，那么我将如何更新正确的，等等。

如果我检查了另一张幻灯片的**图像 #101**，那么我需要为它创建一个新行。如果在那之后我想向它添加另一个 language_id，那么我需要确保不添加新行，因为存在一个具有 NULL 值的行，并且只需用新的语言 id 替换 NULL 值。

它看起来真的很复杂，并且有很多因素，使用这种方法真的很难编程。

最好的方法是什么？任何建议都非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:01:40.017

`images`您需要做的是在您的和`slides`//表之间实现 N:M（多对多）关系，`languages`以便`types`您的设计更加规范化（一个事实在一个地方）。

**可以这样想：**一个`image`可以有多个`slides`，一个`slide`可能是多个的选项`images`。——这是一个 N:M 关系。语言和类型也是如此。

您需要做的是摆脱包含***所有实体***`image_data`之间选项的表，并改为使用三个单独的交叉引用表。以下是您将如何建模：

 ** * *

基表：

> **图像**（image_id [PK]，...）
> 
> **幻灯片**（slide_id [PK]，slide_name，...）
> 
> **语言**(language_id [PK], language_name, ...)
> 
> **类型**（类型名称 [PK]，...）

交叉引用表：

> **images_has_slides** (image_id [PK], slide_id [PK])
> 
> **images_has_languages** (image_id [PK], language_id [PK])
> 
> **images_has_types** (image_id [PK], type_name [PK])

它在 ER 中的外观：

![多对多 ER 图](../Images/5f85f3f760ecd808fdddf5904fc88d94.png)

使用这种类型的设计，您不必处理`NULL`值或确定要更新哪一行，因为您现在*在一个地方只有一个事实*。要获得所有选项，您仍然必须这样`GROUP_CONCAT()`做：

```
SELECT
    a.*,
    GROUP_CONCAT(c.slide_name) AS slides,
    GROUP_CONCAT(e.language_name) AS languages,
    GROUP_CONCAT(f.type_name) AS types
FROM
    images a
LEFT JOIN
    images_has_slides b ON a.image_id = b.image_id
LEFT JOIN
    slides c ON b.slide_id = c.slide_id
LEFT JOIN
    images_has_languages d ON a.image_id = d.image_id
LEFT JOIN
    languages e ON d.language_id = e.language_id
LEFT JOIN
    images_has_types f ON a.image_id = f.image_id
GROUP BY
    a.image_id 
```

然后要更新图像选项，您可以在交叉引用表上使用`INSERT`和：`DELETE`

假设您想在图像中添加两种语言，您会这样做

```
INSERT INTO images_has_languages (image_id, language_id) 
VALUES (101, 4), (101, 5); 
```

上面的查询将 id 为 的语言添加到 id为`4`的`5`图像中`101`。

要删除选项（取消选中表单） - 假设您想从图像中删除 2 张幻灯片

```
DELETE FROM images_has_slides WHERE image_id = 101 AND slide_id IN (3,6) 
```

这会从 id 的图像中`3`删除id 为 的幻灯片。`6``101`

因此，在您的应用程序中，您可以根据用户是否未选中或选中图像表单中的值来确定是否需要执行插入/删除查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T04:43:49.527

您需要[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的架构。

1.  你有`images`表：

```
 CREATE TABLE images (
        image_id   integer,
        image_name varchar(100),
        PRIMARY KEY(image_id)
    ); 
```

1.  每个图像可以有几个`slides`：

```
 CREATE TABLE slides (
        slide_id   integer,
        image_id   integer,
        slide_name varchar(100),
        PRIMARY KEY(slide_id)
    ); 
```

`image_types`和 也是如此`image_languages`。我希望你明白其中的逻辑。并确保添加适当的`FOREIGN KEY`约束。`CREATE INDEX`此外，在从属表的`image_id`列上也是一个好主意。

现在，相关表中的每个参数都有 1 行。管理内容应该很容易：`INSERT`选择某些功能时的新记录以及`DELETE`取消选择这些功能时的新记录。查询（基于概述的 2 个表）应为：

```
SELECT i.image_id, i.image_name,
       group_concat(s.slide_id) AS slides
  FROM images i
  LEFT JOIN slides s USING (image_id)
 GROUP BY i.image_id; 
```

一些注意事项：

1.  `GROUP BY`只做是安全的`image_id`，因为它是 的`PRIMARY KEY`，`iamges`因此它将保证单行分组；
2.  如果您希望`slide_id`(also`language_id`和`type_id`others) 从 1 开始为每个图像，您可能会在从属表中选择 2 字段主键，例如`PRIMARY KEY (image_id, slide_id)`.

* * *

**编辑：**

关于[多对多](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)关系的注释。如果您碰巧有 2 组相关数据，例如`images`can have many`slides`并且`slide_id`可以由 many 共享`image_id`，那么您需要一个额外的表：

```
CREATE TABLE images (
    image_id   integer,
    image_name varchar(100),
    PRIMARY KEY(image_id)
);

CREATE TABLE slides (
    slide_id   integer,
    slide_name varchar(100),
    PRIMARY KEY(slide_id)
);

CREATE TABLE image_slides (
    image_id   integer,
    slide_id   integer,
    create_dt  timestamp,
    PRIMRY KEY (image_id, slide_id)
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T04:52:53.307

您是否尝试过拆分表？如果您为幻灯片和语言制作一个单独的表格，并将类型与图像 ID 保存在同一个表格中，您就可以使用它来制作列表。然后，您可以使用外键优化您的数据库，这样您就不会受到太大的性能影响。

这就是我的意思：

图片数据表：两列，image_id和image_type（type为保留字）。Imageid 是主键，因此没有重复项（假设您只希望每个图像使用一种类型）

图像语言表：两列，图像 id 和 image_language。两者都是主键，因此您不会在同一图像 ID 上重复语言，但图像 ID 可以有多种语言。图像id的主键链接到图像数据表中的主键

Image-slide table：两列，image id和slide number。同上（两个主键、关系等）

通过这种方式，您可以获得所有数据，如下所示：

`SELECT d.image_id, d.image_type, l.image_language, s.slide_number FROM image_data d LEFT JOIN image_language l ON d.image_id = l.image_id LEFT JOIN image_slide s ON s.image_id = s.image_id`

左连接确保所有项目 id 始终显示，即使没有足够的语言或幻灯片可供使用。它将为您创建一个“矩阵”，其中每个图像和每种语言以及它适用的每张幻灯片都有一行。例如，如果您有一张以西班牙语和英语为语言的图像和 4 张幻灯片，您将获得 8 个条目：每种语言的每张幻灯片一个条目。

我不知道这是否一定会解决问题，但它会使准确控制数据库中的内容变得更容易一些，同时仍然让数据库为您做一些工作。*

# python - 从python中的xml文档中提取文本

> ID：11279589
> 
> 赞同：0
> 
> 时间：2012-07-01T04:28:40.743
> 
> 标签：python, linux, xml-parsing, ubuntu-10.04

这是示例 xml 文档：

```
<bookstore>
    <book category="COOKING">
        <title lang="english">Everyday Italian</title>
        <author>Giada De Laurentiis</author>
        <year>2005</year>
        <price>300.00</price>
    </book>

    <book category="CHILDREN">
        <title lang="english">Harry Potter</title>
        <author>J K. Rowling </author>
        <year>2005</year>
        <price>625.00</price>
    </book>
</bookstore> 
```

我想在不指定元素的情况下提取文本，我该怎么做，因为我有 10 个这样的文档。我想要这样，因为我的问题是用户输入了一些我不知道的单词，必须在所有 10 个 xml 文档的各自文本部分中对其进行搜索。为此，我应该在不知道元素的情况下知道文本的位置。还有一件事是所有这些文件都不同。

请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T04:57:18.373

可以使用带有 xpath 查询的 lxml 库：

```
xml="""<bookstore>
    <book category="COOKING">
        <title lang="english">Everyday Italian</title>
        <author>Giada De Laurentiis</author>
        <year>2005</year>
        <price>300.00</price>
    </book>

    <book category="CHILDREN">
        <title lang="english">Harry Potter</title>
        <author>J K. Rowling </author>
        <year>2005</year>
        <price>625.00</price>
    </book>
</bookstore>
"""
from lxml import etree
root = etree.fromstring(xml).getroot()
root.xpath('/bookstore/book/*/text()')
# ['Everyday Italian', 'Giada De Laurentiis', '2005', '300.00', 'Harry Potter', 'J K. Rowling ', '2005', '625.00'] 
```

虽然你没有得到类别....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T04:56:48.703

如果您想从 python 内部调用 grep，请参阅[此处](https://stackoverflow.com/questions/89228/how-to-call-external-command-in-python)的讨论，尤其是[这篇](https://stackoverflow.com/a/92395/317512)文章。

如果要搜索目录中的所有文件，可以使用 glob 模块尝试类似的操作：

```
import glob    
import os    
import re    

p = re.compile('>.*<')    
os.chdir("./")    
for files in glob.glob("*.xml"):    
    file = open(files, "r")    
    line = file.read()    
    list =  map(lambda x:x.lstrip('>').rstrip('<'), p.findall(line))    
    print list    
    print 
```

此搜索遍历目录中的所有文件，打开每个文件并提取与正则表达式匹配的文本。

输出：

```
['Everyday Italian', 'Giada De Laurentiis', '2005', '300.00', 'Harry Potter', 'J
 K. Rowling ', '2005', '625.00'] 
```

**编辑**：更新代码以仅从 xml 中提取文本元素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-01T04:36:32.657

您可以简单地删除任何标签：

```
>>> import re
>>> txt = """<bookstore>
...     <book category="COOKING">
...         <title lang="english">Everyday Italian</title>
...         <author>Giada De Laurentiis</author>
...         <year>2005</year>
...         <price>300.00</price>
...     </book>
...
...     <book category="CHILDREN">
...         <title lang="english">Harry Potter</title>
...         <author>J K. Rowling </author>
...         <year>2005</year>
...         <price>625.00</price>
...     </book>
... </bookstore>"""
>>> exp = re.compile(r'<.*?>')
>>> text_only = exp.sub('',txt).strip()
>>> text_only
'Everyday Italian\n        Giada De Laurentiis\n        2005\n        300.00\n
  \n\n    \n        Harry Potter\n        J K. Rowling \n        2005\n        6
25.00' 
```

但是，如果您只想在 Linux 中搜索文件中的某些文本，则可以使用`grep`：

```
burhan@sandbox:~$ grep "Harry Potter" file.xml
        <title lang="english">Harry Potter</title> 
```

如果要在文件中搜索，请使用`grep`上面的命令，或者打开文件并在 Python 中搜索：

```
>>> import re
>>> exp = re.compile(r'<.*?>')
>>> with open('file.xml') as f:
...     lines = ''.join(line for line in f.readlines())
...     text_only = exp.sub('',lines).strip()
...
>>> if 'Harry Potter' in text_only:
...    print 'It exists'
... else:
...    print 'It does not'
...
It exists 
```

# c# - GridView 访问数据源

> ID：11279590
> 
> 赞同：0
> 
> 时间：2012-07-01T04:28:45.003
> 
> 标签：c#, asp.net, ms-access, gridview, oledb

我有一个 GridView 控件，我想根据存储在整数“intOrderNo”中的字段“orderNo”来显示表（cartTable）的行，我该如何配置我的数据源呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:38:46.043

试试这个：
- 连接到访问文件
- 设置你的查询和你的 WHERE 子句-
执行它
- 然后将它绑定到你的网格

```
OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\YOUR_ACCESS_FILE_PATH");
conn.Open();
OleDbCommand cmd = new OleDbCommand("SELECT * FROM cartTable WHERE orderNo = " + intOrderNo , conn);
OleDbDataReader reader = cmd.ExecuteReader();
DataTable dt = new DataTable();
dt.Load(reader);

//Bind your grid
this.gridView1.DataSource = dt;
this.gridView1.DataBind(); 
```

# c# - RSA 公共指数默认为 65537。这个值应该是多少？我的选择有什么影响？

> ID：11279595
> 
> 赞同：3
> 
> 时间：2012-07-01T04:29:55.150
> 
> 标签：c#, math, rsa, bouncycastle, public-key-encryption

我正在为可能遇到不同指数大小的软件创建单元测试。（[请参阅本 RFC 的第 3.3.1 节](http://www.ietf.org/rfc/rfc4871.txt)）

如何使用 Bouncy Castle 或任何其他 C# 库来生成[密钥大小不为 65537 的 RSA 密钥对。](https://crypto.stackexchange.com/q/3110/371)

如果答案是我可以直接修改这个，只要我也更新私钥，我应该对公钥和私钥进行哪些具体的更改（或重新计算）？

这是我用来创建指数为 65537 的密钥的示例代码：

```
 // Create key
        RsaKeyPairGenerator generator = new RsaKeyPairGenerator();
        var param = new KeyGenerationParameters(new SecureRandom(), 1024);
        generator.Init(param);
         AsymmetricCipherKeyPair keyPair= generator.GenerateKeyPair();

        // Save to export format
        SubjectPublicKeyInfo info = SubjectPublicKeyInfoFactory.CreateSubjectPublicKeyInfo(keyPair.Public);
        byte[] ret =  info.GetEncoded();
        string ovalue1 = Convert.ToBase64String(ret);

        // Read from export format
        byte[] publicKeyBytes = Convert.FromBase64String(ovalue1);
        AsymmetricKeyParameter asymmetricKeyParameter = PublicKeyFactory.CreateKey(publicKeyBytes);

        RsaKeyParameters rsaKeyParameters = (RsaKeyParameters)asymmetricKeyParameter;
        RSAParameters rsaParameters = new RSAParameters();
        rsaParameters.Modulus = rsaKeyParameters.Modulus.ToByteArray();
        rsaParameters.Exponent = rsaKeyParameters.Exponent.ToByteArray();
        RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
        rsa.ImportParameters(rsaParameters); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:27:17.647

感谢[@BrettHale](https://stackoverflow.com/users/906839/brett-hale)，我能够解决这个问题。

这是在 Bouncy Castle 中创建密钥对的方法

```
 // Create key
        RsaKeyPairGenerator generator = new RsaKeyPairGenerator();

        /*
         * This value should be a Fermat number. 0x10001 (F4) is current recommended value. 3 (F1) is known to be safe also.
         * 3, 5, 17, 257, 65537, 4294967297, 18446744073709551617,
         * 
         * Practically speaking, Windows does not tolerate public exponents which do not fit in a 32-bit unsigned integer. Using e=3 or e=65537 works "everywhere". 
         */
        BigInteger exponentBigInt = new BigInteger(exponent.ToString());

        var param = new RsaKeyGenerationParameters(
            exponentBigInt, // new BigInteger("10001", 16)  publicExponent
            new SecureRandom(),  // SecureRandom.getInstance("SHA1PRNG"),//prng
            keyStrength, //strength
            certaninty);//certainty
        generator.Init(param); 
```

与他建议使用 RSAKeyGenerationParameters 相关的其他链接包括：

*   [为什么使用指数值 65537，有哪些替代方案和影响？](https://crypto.stackexchange.com/q/3110/371)

*   [什么是确定性，什么是正确的值](https://crypto.stackexchange.com/q/3114/371)（提示：这取决于密钥长度）

# opengl - 使用 GL_TRIANGLE_FAN 进行抗锯齿

> ID：11279596
> 
> 赞同：2
> 
> 时间：2012-07-01T04:30:06.767
> 
> 标签：opengl, antialiasing

使用以下代码绘制 GL_TRIANGLE_FANs 时，我没有得到任何抗锯齿：

```
 glDisable(GL_DEPTH_TEST);

  // Blended points, lines, and polygons.
  glEnable(GL_BLEND);
  glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

  glHint(GL_POINT_SMOOTH_HINT, GL_NICEST);
  glHint(GL_LINE_SMOOTH_HINT, GL_NICEST);
  glHint(GL_POLYGON_SMOOTH_HINT, GL_NICEST);

  glEnable(GL_POINT_SMOOTH);
  glEnable(GL_LINE_SMOOTH);
  glEnable(GL_POLYGON_SMOOTH); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T04:37:24.593

边缘抗锯齿始终是一个提示，实现（您没有指定哪个）可以根据规范随意忽略它。由于各种原因（例如，无法处理相交的多边形、与帧缓冲区混合的不良交互），这种抗锯齿已经失宠，并被在帧缓冲区级别工作的基于多样本的算法所取代。有一个 ARB 多样本扩展来控制这一点（我相信它在最近版本的规范中是默认的，实际上）。或者，驱动程序通常有办法在不修改源代码的情况下全局启用它。

# c - 在C中通过套接字编写不同类型的消息

> ID：11279602
> 
> 赞同：0
> 
> 时间：2012-07-01T04:31:45.113
> 
> 标签：c, sockets

我想通过 C 中的 TCP 套接字连接向我的 Binder 类发送消息。我必须使用 write( ） 方法。在一条消息中发送所有信息的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:39:21.493

无法保证您可以在一次读/写操作中发送/接收所有数据；太多的因素可能会影响质量/数据包大小/连接稳定性/等。
这个[问题/答案解释了它](https://stackoverflow.com/q/48908/15161)。

这里有一些[C 示例](http://www.prasannatech.net/2008/07/socket-programming-tutorial.html)。[C 中套接字编程的](http://www.prasannatech.net/2008/07/socket-programming-tutorial.html)
一个很好的解释。 TCP/IP的[快速概述](http://www.thegeekstuff.com/2011/11/tcp-ip-fundamentals/)。

关于发送不同类型的消息：
您发送的数据来自您的服务器应用程序，由您的客户端应用程序接收，然后客户端应用程序可以以任何喜欢的方式解释此数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:07:58.980

如果您的数据是相关的，您可以在单独的标头中创建一个结构，并在客户端和服务器代码中使用它，并发送此结构的变量。如果它不相关，那么我不确定您为什么需要将它们作为一条消息发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:15:19.943

如果您想通过一次写入和一次读取来传输和接收数据，那么您必须使用数据报套接字。由于数据报套接字是无连接的，因此您不能使用`write`/ `read`。相反，您使用`sendto`/`recvfrom`或`sendmsg`/ `recvmsg`。由于数据报套接字是不可靠的，因此您必须实现自己的协议来容忍乱序数据传递和数据丢失。

如果您不想处理数据报套接字的不可靠特性，那么您需要一个流套接字。由于连接了流套接字，因此传输的数据得到保证并且有序。如果您发送的数据始终具有相同的大小，那么您可以通过对`send`调用使用阻塞模式然后在调用中传递`MSG_WAITALL`来模拟数据报`recv`。

```
#define MY_MSG_SIZE 9876

int my_msg_send (int sock, const void *msg) {
    int r, sent = 0;
    do {
        r = send(sock, (const char *)msg + sent, MY_MSG_SIZE - sent,
                 MSG_NOSIGNAL);
        if (r <= 0) {
            if (r < 0 && errno == EINTR) continue;
            break;
        }
        sent += r;
    } while (sent < MY_MSG_SIZE);
    if (sent) return sent;
    return r;
}

int my_msg_recv (int sock, void *msg) {
    int r, rcvd = 0;
    do {
        r = recv(sock, (char *)msg + rcvd, MY_MSG_SIZE - rcvd, MSG_WAITALL);
        if (r <= 0) {
            if (r < 0 && errno == EINTR) continue;
            break;
        }
        rcvd += r;
    while (rcvd < MY_MSG_SIZE);
    if (rcvd) return rcvd;
    return r;
} 
```

请注意，该软件仍然必须处理某些错误情况。在 的情况下`EINTR`，需要重试 I/O 操作。对于其他错误，数据的交付或检索可能不完整。但一般来说，对于阻塞套接字，我们期望上面的`do`-`while`循环只进行一次迭代。

如果您的消息并不总是相同的大小，那么您需要一种方法来*构建*消息。框架消息意味着您需要一种方法来检测消息的开头和结尾。也许通过流式套接字构建消息的最简单方法是在消息之前加上它的大小。然后接收者将首先读出大小，然后读取消息的其余部分。您应该能够轻松地调整示例代码`my_msg_send`并`my_msg_recv`执行此操作。

最后，还有你的信息本身的问题。如果消息的大小并不总是相同，这可能意味着消息中有一个或多个可变长度记录。示例是值数组或字符串。如果发送者和接收者都同意记录的顺序，那么在每个可变长度记录之前加上它的长度就足够了。因此，假设您的消息具有以下结构：

```
struct my_data {
    const char *name;
    int address;
    int *types;
    int number_of_types;
}; 
```

然后你可以代表这样的一个实例`struct my_data`：

```
NAME_LEN : 4 bytes
NAME : NAME_LEN bytes
ADDRESS : 4 bytes
TYPES_LEN : 4 bytes
TYPES : TYPES_LEN * 4 bytes 
```

`NAME_LEN`将从 获得`strlen(msg->name)`，并将从`TYPES_LEN`获得其值`msg->number_of_types`。当您发送消息时，前面会加上上面消息的总长度。

我们一直使用 32 位数量来表示长度，这可能足以满足您的目的。通过套接字传输数字时，发送方和接收方必须就数字的字节顺序达成一致。即，数字 1 表示为`0.0.0.1`还是表示为`1.0.0.0`。这通常可以使用*网络字节排序*来处理，后者使用前者。套接字头文件提供了`htonl`将 32 位值从主机的本机字节顺序转换为网络字节顺序的宏。这在存储一个值时使用，比如`NAME_LEN`. 接收方将使用相应的宏`ntohl`将传输的值恢复为主机使用的表示。如果主机本机字节顺序已经与网络字节顺序匹配，那么宏当然可以是无操作的。在异构环境中发送和接收数据时，使用这些宏特别重要，因为发送方和接收方可能具有不同的主机字节顺序。

# php - 使用计数（分页）时，两个看似相同的查询返回不同的结果

> ID：11279604
> 
> 赞同：3
> 
> 时间：2012-07-01T04:31:47.030
> 
> 标签：php, mysql, sql

出于分页原因，我正在对我的数据库运行两个查询。因此，每个查询几乎是相同的。我的 COUNT(*) 查询没有返回非计数查询的结果数。我很困惑为什么会这样。查询如下。

```
SELECT p.host_id, p.rating_support, p.rating_tech, MAX(p.rating_overall) AS rating_overall, p.publish_rating, h.name, prices.price, prices.term_duration
FROM plans p
INNER JOIN hosts AS h ON h.id = p.host_id
INNER JOIN (SELECT plan_id, price, term_duration FROM prices WHERE price > 0 AND price < 50 AND term_duration = 1) prices ON prices.plan_id = p.id
WHERE p.published = 1 AND h.published = 1
GROUP BY p.host_id
ORDER BY rating_overall desc LIMIT 0, 12

SELECT COUNT(*) AS count
FROM plans p
INNER JOIN hosts AS h ON h.id = p.host_id
INNER JOIN (SELECT plan_id, price, term_duration FROM prices WHERE price > 0 AND price < 50 AND term_duration = 1) prices ON prices.plan_id = p.id
WHERE p.published = 1 AND h.published = 1
GROUP BY p.host_id 
```

我不是 MySQL 专家。除了计数没有提供正确数量的结果外，非计数查询也能完美运行。

对这个问题的任何了解都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T08:17:31.850

在 Dems 评论的帮助下（在某处[寻找并支持他](https://stackoverflow.com/users/53341/dems?tab=answers):)，我创建了这个查询。请注意，我删除了子查询，因为它似乎没有必要：

```
SELECT
  COUNT( DISTINCT p.host_id )
FROM       plans p
INNER JOIN hosts h ON h.id = p.host_id
INNER JOIN prices  ON prices.plan_id = p.id
                  AND prices.price > 0
                  AND prices.price < 50
                  AND prices.term_duration = 1
WHERE p.published = 1
  AND h.published = 1 
```

* * *

我原来的答案：

要获取总行数，您必须将`GROUP BY`查询包装到外部`SELECT`：

```
SELECT COUNT(*)
FROM (
  SELECT NULL -- we are just counting, so we need no actual data -> a bit faster
  FROM       plans p
  INNER JOIN hosts h ON h.id = p.host_id
  INNER JOIN prices  ON prices.plan_id = p.id
                    AND prices.price > 0
                    AND prices.price < 50
                    AND prices.term_duration = 1
  WHERE p.published = 1
    AND h.published = 1
  GROUP BY p.host_id
) AS all_rows_without_data 
```

或者你可以使用`SQL_CALC_FOUND_ROWS`+`FOUND_ROWS()`

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

> 一个 SELECT 语句可能包含一个 LIMIT 子句来限制服务器返回给客户端的行数。在某些情况下，希望知道在没有 LIMIT 的情况下该语句将返回多少行，但无需再次运行该语句。要获取此行数，请在 SELECT 语句中包含 SQL_CALC_FOUND_ROWS 选项，然后调用 FOUND_ROWS()：

首先，只需选择所需的行，但添加`SQL_CALC_FOUND_ROWS`：

```
SELECT SQL_CALC_FOUND_ROWS
  p.host_id, p.rating_support, p.rating_tech,
  MAX(p.rating_overall) AS rating_overall,
  p.publish_rating, h.name, prices.price, prices.term_duration
FROM       plans p
INNER JOIN hosts AS h ON h.id = p.host_id
INNER JOIN prices  ON prices.plan_id = p.id
                  AND prices.price > 0
                  AND prices.price < 50
                  AND prices.term_duration = 1
WHERE p.published = 1 AND h.published = 1
GROUP BY p.host_id
ORDER BY rating_overall desc
LIMIT 0, 12; 
```

其次，如果第一个查询中没有`LIMIT`语句，则获取将返回的行数：

```
SELECT FOUND_ROWS(); 
```

*更新*：`SQL_CALC_FOUND_ROWS`+`FOUND_ROWS()`似乎不太可靠，总是因为未知原因返回零（不仅仅是我：[FOUND_ROWS() 一直返回 0](https://stackoverflow.com/questions/1020745/found-rows-keeps-returning-0)）：

[http://sqlfiddle.com/#!2/7304d/8](http://sqlfiddle.com/#!2/7304d/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T08:35:07.303

您的第二个查询的结果将返回相同数量的行，但第一行不会给您返回总数。

结果将给出每行每组的计数：

```
3
5
1
6
etc.
etc. 
```

要将结果放入一行，请在 PHP 中对完整结果集使用`COUNT(DISTINCT p.host_id)`或。`array_sum()`

# javascript - Jquery 推迟了 ajax 调用的回调

> ID：11279606
> 
> 赞同：1
> 
> 时间：2012-07-01T04:32:06.877
> 
> 标签：javascript, jquery

我正在尝试编写一个过程，该过程在由于 ajax 函数的回调而返回 2 个对象之后执行某些操作。

我知道使用 Jquery when() 的经典示例：

```
$.when($.get("http://localhost:3000/url1"), 
$.get("http://localhost:3000/url2").done(//do something)); 
```

但在我的情况下，我不想触发 ajax 函数的执行时间，我希望何时从执行 ajax 函数的回调中触发。就像是：

```
$.get("http://localhost:3000/url1", function(data){
  function(){
    //do something with the data, and return myobj1;
  }
});

$.get("http://localhost:3000/url2", function(data){
  function(){
    //do something with the data, and return myobj2;
  }
});

$.when(obj1, obj2).done(function(){
  //do something with these 2 objects
}); 
```

但当然，这是行不通的。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T04:35:11.827

这实际上应该工作。[`jQuery.when()`](http://api.jquery.com/jQuery.when/)接受多个参数并在它们都完成将每个结果参数作为数组返回后触发：

```
var req1 = $.get("http://localhost:3000/url1");
var req2 = $.get("http://localhost:3000/url2");

$.when(req1, req2).done(function(res1, res2) {
    //do something with these 2 objects
}); 
```

如果您不想一起处理请求，您可以创建自己的延迟并使用它们：

```
var deferred1 = $.Deferred(),
    deferred2 = $.Deferred();

$.get("http://localhost:3000/url1", function(data){
    function(){
        //do something with the data, and return myobj1;
        deferred1.resolve(myobj1);
    }
});

$.get("http://localhost:3000/url2", function(data){
    function(){
        //do something with the data, and return myobj2;
        deferred2.resolve(myobj2);
    }
});

$.when(deferred1, deferred2).done(function(){
    //do something with these 2 objects
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T07:07:58.813

或者你可以自己控制

```
 $(function(){$('body').addClass('doc-ready')})
     var thingsToLoad = ['blabla.js','blublu.js','weee.js'];

     var launch = function(){

     // do whatever you want to do after loading is complete
     // this will be invoked after dom ready.
     // objectCollection will have everything you loaded.

     // and you can wrap your js files in functions, and execute whenever you want.

     }

     var loadTester = (function() {
        var loadCounter   = 0,
            loadEnds      = thingToLoad.length; // total number of items needs to be loaded
        return function() {
          loadCounter += 1;
          if (loadCounter === loadEnds) {
            if ($('body').hasClass('doc-ready')) {
              launch();
            } else {
              /* if body doesnt have ready class name, attach ready event and launch application */
              $(function() {
                launch();
              });
            }
          }
        }
      }());

$.each(thingsToLoad, function(i) {
    $.ajax({
      url      : thingsToLoad[i],
      mimeType : 'application/javascript',
      dataType : 'script',
      success  : function(data) {
        loadTester();
      }
    });
  }); 
```

将您的文件添加到`thingsToLoad`数组中，最后它将被迭代并在成功后加载，它将 init `loadTester`。

`loadTester`将检查`thingsToLoad`数组的长度，当加载的文件数与文件长度匹配并且 dom 处于就绪状态时，它将`launch()`.

如果您只是加载 html 文件或文本文件，您可以将它们（`data`在 ajax 函数中）传递到`loadTester`那里并在那里累积（在像那些`loadCounter`和这样的私有 var 中`loadEnds`），并将累积的数组或对象传递给`launch()`

# spring - Spring Security：SecurityContextHolder.getContext().getAuthentication() 在 Wicket 页面上返回 null

> ID：11279607
> 
> 赞同：0
> 
> 时间：2012-07-01T04:32:11.587
> 
> 标签：spring, google-app-engine, spring-security, wicket-1.5

我在 Google App Engine 上使用 Spring MVC（用于 REST）、Spring Security 3 和 Apache Wicket (UI)。一切正常，除了登录后我无法通过 SecurityContextHolder 在 Wicket 页面上获取身份验证。

我已经用谷歌搜索了这个问题，但似乎没有一个对我有用。我怀疑这是我的 web xml 有问题。任何人都可以请帮忙。谢谢。

我正在使用来自[http://blog.springsource.org/2010/08/02/spring-security-in-google-app-engine/的 Google App Engine 上的 Spring Security 教程](http://blog.springsource.org/2010/08/02/spring-security-in-google-app-engine/)

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app>        
 <display-name>MTP Portal</display-name>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/mtp-web-servlet.xml, /WEB-INF/mtp-web-security-context.xml
    </param-value>
</context-param>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>mtp-web</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>mtp-web</servlet-name>
    <url-pattern>/api/*</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>WicketApp</filter-name>
    <filter-class>org.apache.wicket.protocol.http.WicketFilter</filter-class>
    <init-param>
        <param-name>applicationFactoryClassName</param-name>
        <param-value>org.apache.wicket.spring.SpringWebApplicationFactory</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>WicketApp</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这是我的弹簧安全配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<b:beans xmlns="http://www.springframework.org/schema/security"
     xmlns:b="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<global-method-security pre-post-annotations="enabled"/>

<http pattern="/images/**" security="none"/>
<http pattern="/css/**" security="none"/>
<http pattern="/js/**" security="none"/>
<http pattern="/api/**" security="none"/>
<http pattern="/favicon.ico" security="none"/>
<http pattern="/disabled" security="none"/>

<http use-expressions="true" entry-point-ref="gaeEntryPoint" auto-config="true">
    <intercept-url pattern="/" access="permitAll"/>
    <intercept-url pattern="/api/**" access="permitAll"/>
    <intercept-url pattern="/admin/logout" access="permitAll"/>
    <intercept-url pattern="/register" access="hasRole('NEW_USER')"/>
    <intercept-url pattern="/admin/**" access="hasRole('ADMIN')"/>
    <custom-filter position="PRE_AUTH_FILTER" ref="gaeFilter"/>
</http>

<b:bean id="gaeEntryPoint"
        class="com.peerbuccoss.apps.mtp.web.authentication.impl.GoogleAccountsAuthenticationEntryPoint"/>

<b:bean id="gaeFilter" class="com.peerbuccoss.apps.mtp.web.authentication.filter.GaeAuthenticationFilter">
    <b:property name="authenticationManager" ref="authenticationManager"/>
    <b:property name="failureHandler">
        <b:bean class="org.springframework.security.web.authentication.ExceptionMappingAuthenticationFailureHandler">
            <b:property name="exceptionMappings">
                <b:map>
                    <b:entry key="org.springframework.security.authentication.DisabledException"
                             value="/disabled"/>
                </b:map>
            </b:property>
        </b:bean>
    </b:property>
</b:bean>

<authentication-manager alias="authenticationManager">
    <authentication-provider ref="gaeAuthenticationProvider"/>
</authentication-manager>

<b:bean id="gaeAuthenticationProvider"
        class="com.peerbuccoss.apps.mtp.web.authentication.provider.GoogleAccountsAuthenticationProvider"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:55:39.087

我不确定哪个 URL 无法获取 SecurityContext（也许您可以提供一个示例 URL），但不会为映射到 security="none" 的任何 URL 填充 SecurityContext。这是因为 security="none" 指示 Spring Security 完全忽略此 URL。如果您需要访问每个用户都允许的 URL 上的 SecurityContext，那么您需要使用 permitAll。

PS：如果这对您没有帮助，您可以提供一个示例 URL，说明您在获取身份验证时遇到了问题。您还可以通过“在 Wicket 页面上获取身份验证时遇到问题”提供有关您的意思的详细信息（即它是否为空、抛出异常等）。

# java - 如何通过 Java 通过 HTTP（来自服务器）改变显示的 HTML 页面的 DOM？

> ID：11279608
> 
> 赞同：0
> 
> 时间：2012-07-01T04:32:31.553
> 
> 标签：java, html, http, dom, servlets

我想获得对显示网页的 DOM 的引用，以便我可以添加和删除元素。我想通过从 servlet 发送 HTTP 请求来添加和删除这些元素。此外，我希望能够在浏览器中，通过 java，从来自所述 servlet 的 http 消息中逐个节点地构造一个 DOM。

假设有人请求一个 url（比如）：[http://helloWorld.xhtml](http://helloWorld.xhtml)

我想通过发送 HTTP 消息来呈现内容，这些消息一个节点一个节点地构建显示的文档。然后，如果我需要更改文档中的某些内容，我希望能够以节点方式删除 html，或者以相同的方式添加 html；我想通过 http 对 html 文档进行部分更改。

有谁知道实现这一目标的具体方法？

我不想使用 JavaScript，除非它意味着一种实用方法来完成通信机制。我也不想使用客户端applet，但这可能是一种绕过http 限制的方法（即，通过jaxb 发送回java 对象响应）。

* * *

我不想使用 javascript，因为我只想使用 html 浏览器作为将事件的发生中继回服务器的元素的显示器。然后，我希望能够在不重绘页面的情况下添加或删除元素。另外，我想使用 XSLT 来生成 HTML，但同样，我想要一种在不使用隐藏元素且不重绘整个页面的情况下更新网页的方法。

我还想到了别的东西。我可能会使用嵌入在 HTML 页面中的 JApplet，然后通过 JAXB 与 JApplet 进行通信？我假设你可以做到这一点..（也许它不是那样工作的）。然后，在 JApplet 中，只是使用了一种显示 HTML 页面的手段；组件中可能有比 JLabel 更好的选择。

我认为最好的选择是使用 HTTP 机制（如果可能的话），或者使用某种中间层，使我能够在网页和服务器之间来回发送 Java。

* * *

我考虑了一下，也许，如果浏览器会改变他们的更新策略，那么，我们将能够通过支持添加的浏览器行为，使用 http 来促进基于每个元素可更新的视图还是元素减法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:30:48.640

为什么你不想使用 JS 是我的事，因为这是编辑 dom 的语言。

完成您的场景的最简单方法是使用[Jquery.ajax](http://api.jquery.com/jQuery.ajax/)。

对于解析/构建 Json，我会推荐[Google 的 Gson](http://code.google.com/p/google-gson/)。

你可以[在这里](https://stackoverflow.com/questions/11224338/sending-json-data-servlet-applet-communication-example/11225420#11225420)寻找一个小样本。

# php - cookie 和会话的 php 安全性

> ID：11279609
> 
> 赞同：1
> 
> 时间：2012-07-01T04:32:33.723
> 
> 标签：php

关于 cookie 和会话的 PHP 安全性，这是我迄今为止为防止攻击所做的工作。我做错了什么/不安全？

登录.php

```
 if ($username==$dbusername&&$hashed_password==$dbpassword){

setcookie('username[0]',$username,time()+(60*60*24*365));
setcookie('username[1]',$userid,time()+(60*60*24*365));
setcookie('password',$hashed_password,time()+(60*60*24*365));

if($admin=='1') {
setcookie('username[3]',$admin,time()+(60*60*24*365));  
}
$_SESSION['logged-in']=1; 
```

注销.php

```
 $time = time()-(60*60*24*365);
setcookie('username[0]', '',$time);
setcookie('username[1]', '',$time);
setcookie('username[2]', '',$time);
setcookie('username[3]', '',$time);
setcookie('password', '',$time);
unset($_COOKIE['username']); 
unset($_SESSION['logged-in']); 
```

我在每个页面上调用 session_regenerate_id()，停止会话固定/劫持是否正确？

```
<?php session_start(); session_regenerate_id(); 
```

这是我的 PHP.ini 我还可以通过哪些其他方式为会话和 cookie 提供安全性

```
 session.use_trans_sid = 0
session.user_only_cookies = 1 
```

欢迎任何示例/改进，因为我通过示例可以更好地学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T06:50:16.023

在更改访问权限时（例如登录后），通常会重新生成会话 ID。

密码不应**存储在客户端的 cookie**中，甚至不应该存储在哈希中。甚至不需要将它存储在会话中，您只使用它来验证登录，并且在将状态写入会话后，您应该忘记密码。

如果您想要一个真正安全的站点，您需要一个带有 SSL 加密的**HTTPS 连接。**否则，攻击者可以窃听发送的明文信息，并使用 session-id（或您用来验证用户的任何内容）来冒充用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T04:46:34.220

请真的请不要将密码存储为cookie。它（计算机）可能在咖啡馆或其他地方。

这是一个安全问题，并且有待破解。

顺便说一句，重新考虑并使用狡猾的头脑来了解一个人如何闯入您的系统。

# java - JTable Nimbus 外观和感觉 - 如何明确哪个单元格具有焦点

> ID：11279610
> 
> 赞同：5
> 
> 时间：2012-07-01T04:32:34.897
> 
> 标签：java, swing, jtable, nimbus, tablecelleditor

在 JTable (Nimbus L & F) 中编辑数据时，当用户从一个单元格切换到另一个单元格时，哪个单元格具有焦点并不明显。我怎样才能更清楚哪个单元格有焦点？我知道可以设置许多属性来修改 Nimbus - 有人知道我想要哪个属性吗？

下面的屏幕截图只有一个属性设置为默认值以外的其他属性：

```
UIManager.put("Table.showGrid", true); 
```

![JTable 屏幕截图](../Images/8528d42ece9665fca4ffd7797a871ab3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T07:14:51.093

*   你看看[渲染器的概念](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)，

*   默认情况下适用于[Nimbus Look and Feel](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)，

*   [JButtons 组件 (JCheckBox ei)](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)可能有一些问题，但在这个论坛上回答或解决了几次

![在此处输入图像描述](../Images/5f662c7cd6f25a16e6f4806efdfa48de.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Font;
import java.awt.Graphics;
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Pattern;
import javax.swing.Icon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.RowSorter.SortKey;
import javax.swing.SortOrder;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableColumn;
import javax.swing.table.TableModel;
import javax.swing.table.TableRowSorter;

public class ImageChangeDemo extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTable table = new javax.swing.JTable();
    private JTable table1 = new javax.swing.JTable();
    private static Icon ascendingSortIcon;
    private static Icon descendingSortIcon;

    public static void main(String args[]) {
        //comment out the code below to try in Metal L&F
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    ascendingSortIcon = UIManager.getLookAndFeelDefaults().getIcon("Table.ascendingSortIcon");
                    descendingSortIcon = UIManager.getLookAndFeelDefaults().getIcon("Table.descendingSortIcon");
                    //UIManager.getLookAndFeelDefaults().put("Table.ascendingSortIcon", new BevelArrowIcon(BevelArrowIcon.UP, false, false));
                    //UIManager.getLookAndFeelDefaults().put("Table.descendingSortIcon", new BevelArrowIcon(BevelArrowIcon.DOWN, false, false));
                    break;
                }
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ImageChangeDemo().setVisible(true);
            }
        });
    }

    public ImageChangeDemo() {
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        JScrollPane pane = new javax.swing.JScrollPane();
        //table.setAutoCreateRowSorter(true);
        table.setModel(new javax.swing.table.DefaultTableModel(
                new Object[][]{
                    {"a", "q", "h", "v"},
                    {"b", "m", "l", "h"},
                    {"d", "c", "a", "d"},
                    {"j", "o", "y", "e"}
                },
                new String[]{
                    "Col 1", "Col 2", "Col 3", "Col 4"
                }) {

            private static final long serialVersionUID = 1L;
            Class[] types = new Class[]{
                String.class, String.class, String.class, String.class
            };

            @Override
            public Class getColumnClass(int columnIndex) {
                return types[columnIndex];
            }
        });
        TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(table.getModel()) {

            @Override
            public void toggleSortOrder(int column) {
                if (column >= 0 && column < getModelWrapper().getColumnCount() && isSortable(column)) {
                    List<SortKey> keys = new ArrayList<SortKey>(getSortKeys());
                    if (!keys.isEmpty()) {

                        SortKey sortKey = keys.get(0);
                        if (sortKey.getColumn() == column && sortKey.getSortOrder() == SortOrder.DESCENDING) {
                            setSortKeys(null);
                            return;
                        }
                    }
                }
                super.toggleSortOrder(column);
            }
        };
        table.setRowSorter(sorter);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        pane.setViewportView(table);
        UIManager.getLookAndFeelDefaults().put("Table.ascendingSortIcon", new BevelArrowIcon(BevelArrowIcon.UP, false, false));
        UIManager.getLookAndFeelDefaults().put("Table.descendingSortIcon", new BevelArrowIcon(BevelArrowIcon.DOWN, false, false));
        SwingUtilities.updateComponentTreeUI(table);
        add(pane, BorderLayout.NORTH);
        JScrollPane pane1 = new javax.swing.JScrollPane();
        //table.setAutoCreateRowSorter(true);
        table1.setModel(new javax.swing.table.DefaultTableModel(
                new Object[][]{
                    {"a", "q", "h", "v"},
                    {"b", "m", "l", "h"},
                    {"d", "c", "a", "d"},
                    {"j", "o", "y", "e"}
                },
                new String[]{
                    "Col 1", "Col 2", "Col 3", "Col 4"
                }) {

            private static final long serialVersionUID = 1L;
            Class[] types = new Class[]{
                String.class, String.class, String.class, String.class
            };

            @Override
            public Class getColumnClass(int columnIndex) {
                return types[columnIndex];
            }
        });
        table1.setRowSorter(sorter);
        table1.setPreferredScrollableViewportSize(table1.getPreferredSize());
        pane1.setViewportView(table1);
        add(pane1, BorderLayout.SOUTH);

        for (int i = 0; i < table1.getColumnCount(); i++) {
            RowColorRenderer rowRenderer = new RowColorRenderer(i);
            TableColumn column = table1.getColumnModel().getColumn(i);
            column.setCellRenderer(rowRenderer);
        }
        pack();
    }

    private class RowColorRenderer extends DefaultTableCellRenderer {

        private static final long serialVersionUID = 1L;
        private int colNo = 0;

        RowColorRenderer(int col) {
            colNo = col;
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value,
                boolean isSelected, boolean hasFocus, int row, int column) {
            Component comp = super.getTableCellRendererComponent(table, value,
                    isSelected, hasFocus, row, column);
            JComponent jc = (JComponent) comp;
            if (!isSelected) {
                if (table.getValueAt(row, colNo) != null) {
                    String str = table.getValueAt(row, colNo).toString();
                    if (!str.isEmpty()) {
                        if (Pattern.compile("\\d").matcher(str).find()) {
                            if (((Pattern.compile("[02468]").matcher(str).find()))
                                    && (!(Pattern.compile("[13579]").matcher(str).find()))) {
                                setForeground(Color.magenta);
                                setBackground(Color.orange);
                            } else if ((!(Pattern.compile("[02468]").matcher(str).find()))
                                    && ((Pattern.compile("[13579]").matcher(str).find()))) {
                                setForeground(Color.blue);
                                setBackground(Color.yellow);
                            } else if (((Pattern.compile("[02468]").matcher(str).find()))
                                    && ((Pattern.compile("[13579]").matcher(str).find()))) {
                                setForeground(Color.red);
                                setBackground(Color.cyan);
                            }
                            setFont(new Font("Serif", Font.BOLD, 12));
                            setHorizontalAlignment(CENTER);
                        } else {
                            setBackground(table.getBackground());
                            setForeground(table.getForeground());
                            setFont(new Font("Serif", Font.PLAIN, 8));
                            setHorizontalAlignment(CENTER);
                        }
                    }
                }
            } else {
                if (hasFocus) {
                    setFont(new Font("Serif", Font.BOLD, 12));
                    setForeground(Color.magenta);
                    setBackground(Color.orange);
                }
            }
            return this;
        }
    }

    static class BevelArrowIcon implements Icon {

        public static final int UP = 0;         // direction
        public static final int DOWN = 1;
        private static final int DEFAULT_SIZE = 11;
        private Color edge1;
        private Color edge2;
        private Color fill;
        private int size;
        private int direction;

        public BevelArrowIcon(int direction, boolean isRaisedView, boolean isPressedView) {
            if (isRaisedView) {
                if (isPressedView) {
                    init(UIManager.getColor("controlLtHighlight"), UIManager.getColor("controlDkShadow"), UIManager.getColor("controlShadow"), DEFAULT_SIZE, direction);
                } else {
                    init(UIManager.getColor("controlHighlight"), UIManager.getColor("controlShadow"), UIManager.getColor("control"), DEFAULT_SIZE, direction);
                }
            } else {
                if (isPressedView) {
                    init(UIManager.getColor("controlDkShadow"), UIManager.getColor("controlLtHighlight"), UIManager.getColor("controlShadow"), DEFAULT_SIZE, direction);
                } else {
                    init(UIManager.getColor("controlShadow"), UIManager.getColor("controlHighlight"), UIManager.getColor("control"), DEFAULT_SIZE, direction);
                }
            }
        }

        public BevelArrowIcon(Color edge1, Color edge2, Color fill, int size, int direction) {
            init(edge1, edge2, fill, size, direction);
        }

        @Override
        public void paintIcon(Component c, Graphics g, int x, int y) {
            switch (direction) {
                case DOWN:
                    drawDownArrow(g, x, y);
                    break;
                case UP:
                    drawUpArrow(g, x, y);
                    break;
            }
        }

        @Override
        public int getIconWidth() {
            return size;
        }

        @Override
        public int getIconHeight() {
            return size;
        }

        private void init(Color edge1, Color edge2, Color fill, int size, int direction) {
            edge1 = Color.red;
            edge2 = Color.blue;
            this.edge1 = edge1;
            this.edge2 = edge2;
            this.fill = fill;
            this.size = size;
            this.direction = direction;
        }

        private void drawDownArrow(Graphics g, int xo, int yo) {
            g.setColor(edge1);
            g.drawLine(xo, yo, xo + size - 1, yo);
            g.drawLine(xo, yo + 1, xo + size - 3, yo + 1);
            g.setColor(edge2);
            g.drawLine(xo + size - 2, yo + 1, xo + size - 1, yo + 1);
            int x = xo + 1;
            int y = yo + 2;
            int dx = size - 6;
            while (y + 1 < yo + size) {
                g.setColor(edge1);
                g.drawLine(x, y, x + 1, y);
                g.drawLine(x, y + 1, x + 1, y + 1);
                if (0 < dx) {
                    g.setColor(fill);
                    g.drawLine(x + 2, y, x + 1 + dx, y);
                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);
                }
                g.setColor(edge2);
                g.drawLine(x + dx + 2, y, x + dx + 3, y);
                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);
                x += 1;
                y += 2;
                dx -= 2;
            }
            g.setColor(edge1);
            g.drawLine(xo + (size / 2), yo + size - 1, xo + (size / 2), yo + size - 1);
        }

        private void drawUpArrow(Graphics g, int xo, int yo) {
            g.setColor(edge1);
            int x = xo + (size / 2);
            g.drawLine(x, yo, x, yo);
            x--;
            int y = yo + 1;
            int dx = 0;
            while (y + 3 < yo + size) {
                g.setColor(edge1);
                g.drawLine(x, y, x + 1, y);
                g.drawLine(x, y + 1, x + 1, y + 1);
                if (0 < dx) {
                    g.setColor(fill);
                    g.drawLine(x + 2, y, x + 1 + dx, y);
                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);
                }
                g.setColor(edge2);
                g.drawLine(x + dx + 2, y, x + dx + 3, y);
                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);
                x -= 1;
                y += 2;
                dx += 2;
            }
            g.setColor(edge1);
            g.drawLine(xo, yo + size - 3, xo + 1, yo + size - 3);
            g.setColor(edge2);
            g.drawLine(xo + 2, yo + size - 2, xo + size - 1, yo + size - 2);
            g.drawLine(xo, yo + size - 1, xo + size, yo + size - 1);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:34:49.027

您需要创建一个自定义单元格渲染器类，例如，如果选择该类，它将更改前景色。

您的类将*扩展 DefaultTableCellRenderer*并*覆盖方法 getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)*。

例如

```
public class SpreadsheetCellRenderer extends DefaultTableCellRenderer {
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        /* the following is the similar to DefaultTableCellRenderer */
        if (isSelected) {
            super.setForeground(Color.red);
        } else {
            super.setForeground(Color.black);
        }
    setText(value.toString());
    return this;
    }
} 
```

然后，您需要通过执行此操作将该渲染器设置为表中的字符串对象的默认渲染器。

```
table.setDefaultRenderer(Class.forName("java.lang.String"), new SpreadsheetCellRenderer()); 
```

# javascript - 如何插入交互式地图？

> ID：11279613
> 
> 赞同：0
> 
> 时间：2012-07-01T04:33:18.703
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在尝试在我的网站中使用 GoogleMap：

```
 function InsertMap()
           {
               var map;
                var op = {
                    zoom: 10,
                    center: new google.maps.LatLng(-34.397, 150.644),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };                    
                map = new google.maps.Map(document.getElementById('id'), op);
           } 
```

我在按钮单击事件上调用此函数。但我的问题是它插入了静态地图（单个图像）而不是交互式地图。我也尝试了`IsStaticMap : false`，但它不起作用，当我这样做时，它既没有显示静态也没有显示任何交互。帮帮我 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:47:00.943

有一个使用 jQuery 的实现可能会对您有所帮助。包括源代码和演示！

[http://www.position-absolute.com/articles/create-an-interactive-google-map-widget-with-a-list-filter-and-a-map-helper-class/](http://www.position-absolute.com/articles/create-an-interactive-google-map-widget-with-a-list-filter-and-a-map-helper-class/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T04:56:18.857

这是我平时用的，很好用！您可以根据您的要求对其进行编辑。

```
 <iframe
    width="425"
    height="350"
    frameborder="0"
    scrolling="no"
    marginheight="0"
    marginwidth="0"
    src="http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=San%2BFrancisco%2C%2BCalifornia(HEY%21)@37.774930,-122.419416&ie=UTF8&z=12&t=m&iwloc=addr&output=embed">
  </iframe>

<br>

<table
  width="425"
  cellpadding="0"
  cellspacing="0"
  border="0">
  <tr>
    <td align="left">
      <small><a href="http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=San%2BFrancisco%2C%2BCalifornia(HEY%21)@37.774930,-122.419416&ie=UTF8&z=12&t=m&iwloc=addr">View Larger Map</a></small></td><td align="right"><small><a href="http://www.github.com/dtx">my git!</a></small></td></tr>
</table>
</div> 
```

[**在这里演示**](http://jsfiddle.net/tKYQu/)

# java - Java中的受保护字段替代方案？

> ID：11279622
> 
> 赞同：2
> 
> 时间：2012-07-01T04:35:28.470
> 
> 标签：java, protected

我有一个在超类中使用受保护字段的代码。我怎样才能避免它，因为我认为所有领域都应该是私有的？

```
 /** "Abstract Builder" */
 abstract class PizzaBuilder {
    protected Pizza pizza;

    public Pizza getPizza() { return pizza; }
    public void createNewPizzaProduct() { pizza = new Pizza(); }

    public abstract void buildDough();
    public abstract void buildSauce();
    public abstract void buildTopping();
 }

 /** "ConcreteBuilder" */
 class HawaiianPizzaBuilder extends PizzaBuilder {
    public void buildDough()   { pizza.setDough("cross"); }
    public void buildSauce()   { pizza.setSauce("mild"); }
    public void buildTopping() { pizza.setTopping("ham+pineapple"); }
 }

 /** "ConcreteBuilder" */
 class SpicyPizzaBuilder extends PizzaBuilder {
    public void buildDough()   { pizza.setDough("pan baked"); }
    public void buildSauce()   { pizza.setSauce("hot"); }
    public void buildTopping() { pizza.setTopping("pepperoni+salami"); }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T04:39:00.607

`getPizza()`在子类中使用。

所以 ：

```
 public void buildDough()   { pizza.setDough("cross"); } 
```

变成

```
public void buildDough()   { getPizza().setDough("cross"); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T04:46:41.093

您始终可以将夏威夷和辣味比萨制造商公开并保护比萨场。

```
public abstract class PizzaBuilder {
    protected Pizza pizza;
    ...
 }

 /** "ConcreteBuilder" */
 public class HawaiianPizzaBuilder : PizzaBuilder {
     ...
 }

 /** "ConcreteBuilder" */
 public class SpicyPizzaBuilder : PizzaBuilder {
     ...
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T05:01:20.277

您因此回复评论：

> @Logan：感谢您的回答，但是所有类都可以通过 setter/getter 方法访问该字段。但我认为这个解决方案比原来的更好。

如果您想阻止这种情况，那么答案可能是更改 getter 方法的可见性，而根本不提供 setter。

* * *

实际上，整体设计看起来有点奇怪。您有一个`create`不返回它创建的对象的方法，并且没有明显的方法可以调用子类的构建方法。（也许您应该“回顾”工厂对象设计模式。）

在这个级别上重新思考将清楚地表明，`pizza`变量及其吸气剂可以而且应该从外部视图中隐藏起来。

# php - 使用 sscanf 传递“模板句子”？

> ID：11279624
> 
> 赞同：1
> 
> 时间：2012-07-01T04:35:44.727
> 
> 标签：php, string

使用 PHP 的 sscanf 读取用户提交的句子并尝试从中获取数据是否合适？例如：

用户输入：

`"James is child of Bill"``$child="james"`我想做`$parent="bill"`

或：`"Mary is the mother of kate"`我想做`$child="kate"`和`$parent="mary"`

可能有很多其他可能的句子格式，我必须从中提取数据（不超过 100 种）。

所以我应该使用：

```
$templates = array("%s is a child of %s","%s is the mother of %s");
$i=0;
$max = count($templates);
while( ($test == -1) && (i < $max) ) {
    $test = sscanf($userInput, $templates[i]);
    $i++;
}
if(i < $max) {
    sscanf($userInput, $templates[i],$child,&parent);//hmm, what if $child,&parent should be the other way around?
} else {
    echo "template not found for sentence";
} 
```

? 因此，如您所见，我有点老套，谁能提出更好的方法，或者让这个解决方案发挥作用的方法？

真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T04:56:00.223

欢迎来到**图论**领域。我不认为你可以用句子模板解决你的问题。幸运的是，这里已经在 SO 上讨论了一个类似的主题。有关该讨论，请参阅此主题[如何在图形数据库（如 Neo4j）中建模真实世界的关系？](https://stackoverflow.com/questions/7536142/how-to-model-real-world-relationships-in-a-graph-database-like-neo4j)

# objective-c - 如何从获取的结果对象中填充稀疏的 UITableView？

> ID：11279625
> 
> 赞同：1
> 
> 时间：2012-07-01T04:35:51.180
> 
> 标签：objective-c, cocoa-touch, uitableview, core-data

在我的甜蜜应用程序中，您可以使用项目列表中的两种项目。有可装备的物品和袋子物品。当您导航到清单屏幕时，表格视图有两个部分，每个部分有 4 个单元格。四个单元格用于装备物品，四个单元格用于“包”中的物品。如果您没有任何装备，则单元格只会说“空”。

如何根据结果对象的形状有条件地填充表格单元格？

这是我希望拥有的代码：

```
- (UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {

  static NSString *CellIdentifier = @"Cell";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
  }

  // this returns 'nil' if the index path was out of bounds
  NSManagedObject * item = [self.fetchedResultsController carefullyGetObjectAtIndexPath:indexPath];

  if (nil == item) {
    cell.textLabel.text = @"empty"; 

  } else {
    cell.textLabel.text = [item valueForKey:@"name"];

  }

} 
```

我在尝试实现这个“小心”的 objectAtIndexPath 时遇到了一些问题：

我尝试了边界检查，但我遇到了麻烦，因为 fetchedArray 是扁平的，而我试图导航的概念模型不是扁平的：行是“in”部分。

我尝试使用 try/catch，但后来我记得越界元素是未定义的，而不是 nil ... . 我现在的设置：

```
@try {

  NSManagedObject *managedObject = [self.fetchedResultsController objectAtIndexPath:indexPath];

  return managedObject;
}
@catch (NSException * e) {
  return nil;
} 
```

始终给我 5 个条目，4 个在正确的位置和 1 个奇数球，这是从另一部分重复的。

不确定如何手动导航获取的结果。我正在玩四个项目，每种两个。我曾希望它像双重嵌套数组一样简单，部分在外面，行在里面。似乎事情比这更棘手。当我检查 fetchedResults NSArray 时，我发现它是平的。所有的“包”物品都是第一位的，然后是“装备”。不过，我不认为我可以依赖这种排序，所以我觉得制作一个从 indexPath 部分到数组索引的映射函数并不安全。（我可以确信对此感到安全）。

我想到的另一种选择是在我的库存中填充 8 个“空”项目，当这些部分没有完全填满时，这些项目将作为占位符结果返回。但这并不适合我。

我意识到为什么这不起作用：表不应该有“空”行。但我希望我的表有空行！

**更新**

这是我现在使用的方法...

```
- (NSManagedObject*) carefullyGetObjectAtIndexPath:(NSIndexPath*)indexPath 
{
  NSLog(@"in %@ %s", [self class], _cmd);

  NSString * desiredType = (indexPath.section == BAG_SECTION)? @"bag" : @"equipable";
  NSArray * fetchedObjects = [self.fetchedResultsController fetchedObjects];
  NSInteger sectionStartIndex = -1;

  // iterate until you hit a type you like
  NSUInteger i, count = [fetchedObjects count];
  for (i = 0; i < count; i++) {
    NSObject * obj = [fetchedObjects objectAtIndex:i];
    NSString * fetchedType = (NSString*)[obj valueForKey:@"type"];

    if ([desiredType isEqualToString:fetchedType]) {
      sectionStartIndex = i;
      break;
    }
  }

  if (-1 == sectionStartIndex) {
    // maybe there aren't any of that type of item

  } else {

    NSInteger calculatedEntityIndex = sectionStartIndex + indexPath.row;
    NSLog(@"calculated index %d", calculatedEntityIndex);

    // if we are still in the array
    if (calculatedEntityIndex < [fetchedObjects count]) {

      // then we can get the object
      NSManagedObject * entity = [fetchedObjects objectAtIndex:calculatedEntityIndex];

      // and if we are still in the right section
      NSString * typeForEntityAtIndex = [entity valueForKey:@"type"];

      if ([desiredType isEqualToString:typeForEntityAtIndex]) {
        // then this is what we wanted

        return entity;
      }
    }
  }

  return nil;   
} 
```

我真的不觉得我应该迭代这样的事情......

z。

全面披露：这是一个长期项目，但该项目是通过任何必要的方式制作应用程序。这包括第三方库、在 stackoverflow 上提问等等……这个学期项目的目标是体验在更大的东西上工作，比如一个甜蜜的应用程序，而不是学习 Objective-c。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:03:33.660

齐吉，

有`NSFetchedResultsController`很多限制。如果您不能使您的架构满足其严格的要求，并且您可能没有，那么您应该构建您`tableView`的多个`NSFetchRequest`s. 这很简单。大多数有趣`tableView`的 s 就是这样做的。当您执行较大的提取然后使用集合类上的集合和过滤操作细化搜索时，Core Data 确实工作得最好。

`tableView`s 可以有空行。您只需要将其与各种委托和单元配置代码中的自定义代码进行协调。

你有很多选择来解决你的问题。看来您对非常有限的框架 API 不满意。你是一个初出茅庐的程序员。自己滚。

安德鲁

PS 你有一个奇怪的目标，即编写一个 Mac OS X/iOS 应用程序而不需要学习 Objective-C。您实际上已经选择了框架中的一项技术，即 Core Data，它可以最大限度地发挥 Objective-C 的能力。（在我看来，作为 iOS 程序员的教育者，学习一个非常不同的持久性模型（Core Data 的模型）的复杂性可能会比退缩到平凡的主流 SQL 解决方案更好。）如果你更喜欢使用不同的语言，MacRuby/RubyMotion 相当有效。

# ruby-on-rails - 为 Ruby 1.9 和 Rails 3.2.5 编写 GeoRuby Oracle 适配器

> ID：11279630
> 
> 赞同：1
> 
> 时间：2012-07-01T04:37:39.397
> 
> 标签：ruby-on-rails, ruby, oracle, activerecord, georuby

我们是一家基于 GIS RoR 的软件公司，它处理空间数据。目前，我们直接在Oracle中执行我们的纯SQL，但这是一个具有挑战性的过程，现在我们考虑切换到GeoRuby的想法。
我们希望在我们公司的 Oracle 数据库和 Rails 环境中采用 GeoRuby。
据您所知，没有用于此目的的结构良好的适配器。
目前，我正在开发自己的空间预言机适配器。现在，我可以使用迁移创建表和几何列。此外，我可以设法为表创建模型。
例如，假设有一个具有两个属性（名称：字符串和几何：几何）的 GeoShape 模型，我可以这样做：

```
g = GeoShape.new(:name => "Point1", geom: Point.from_x_y(-1.6, 2.8, 123)) 
```

执行上述语句后，我有：

```
=> #<GeoShape id: nil, name: "Point1", geom: <GeoRuby::SimpleFeatures::Point:0x6a3cb030 @srid=123, @with_z=false, @with_m=false, @y=2.8, @x=-1.6, @z=0.0, @m=0.0>, created_at: nil, updated_at: nil> 
```

现在我想用 g.save 将我的模型保存到数据库中。

我收到以下完全合乎逻辑的错误，因为 GeoRuby 和 Oracle 类型之间的类型不匹配。

```
INSERT INTO "GEO_SHAPES" ("CREATED_AT", "GEOM", "ID", "NAME", "UPDATED_AT") VALUES (:a1, :a2, :a3, :a4, :a5)  [["created_at", Sun, 01 Jul 2012 04:34:34 UTC +00:00], ["geom", #<GeoRuby::SimpleFeatures::Point:0x6a3d3410 @srid=123, @with_z=false, @with_m=false, @y=2.8, @x=-1.6, @z=0.0, @m=0.0>], ["id", 10053], ["name", "Point1"], ["updated_at", Sun, 01 Jul 2012 04:34:34 UTC +00:00]]
ActiveRecord::StatementInvalid: OCIError: ORA-00932: inconsistent datatypes: expected MDSYS.SDO_GEOMETRY got CHAR: INSERT INTO "GEO_SHAPES" ("CREATED_AT", "GEOM", "ID", "NAME", "UPDATED_AT") VALUES (:a1, :a2, :a3, :a4, :a5) 
```

* * *

有人对这样做的过程有任何想法吗？
我想，我必须将我的 GeoRuby 结构映射到相应的 Oracle SDO_Geometry，但我对这个过程一无所知。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:43:22.373

有一个不错的宝石[rgeo](https://github.com/dazuma/rgeo)

> 其核心是行业标准 OGC 简单特征规范的实现，该规范提供了点、线和多边形等几何对象的数据表示，以及一组几何分析操作。这使其成为地理定位数据建模的理想选择。它还支持一套提供各种地理定位相关服务的可选附加模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:29:29.057

我可以做到这一点。现在我可以直接从 GeoRuby 模型保存到 Oracle DB。该过程在[此](https://stackoverflow.com/questions/11307732/getting-ocierror-ora-00932-inconsistent-datatypes-from-rails-3)线程中进行了说明。

# php - 修改页面链接中的分页偏移量

> ID：11279636
> 
> 赞同：0
> 
> 时间：2012-07-01T04:39:40.987
> 
> 标签：php, pagination

我想`Next 1000`在当前页面上单击按钮时创建更新的 URL。`number`即每次单击时递增1000 `Next 1000`。

eg: 如果当前 URL 是

```
mywebsite.com/people.php?number=0 
```

`Next 1000`应该说：

```
 mywebsite.com/people.php?number=1000 
```

依此类推，每次单击按钮时都会继续

```
<?php
$count = 1000;
?>

<a href="people.php?number=<?php echo $_GET['number'] + $count ;?>">Next 1000</a> 
```

我知道那里有大量的分页脚本。我正在使用 jQuery 一次获取 1000 条记录。

我只想要一个按钮，允许用户根据需要加载下一个 1000。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T04:43:33.787

您可能想对输入进行一些检查，但这是基本答案：

```
<a href="people.php?number=<?=$_GET['number']+1000?>">Next 1000</a> 
```

更安全的赌注是：

```
<?
$increment = (is_numeric($_GET['number']))?$_GET['number']+1000:1000;
?>
<a href="people.php?number=<?=$increment?>">Next 1000</a> 
```

# sublimetext2 - 在 SublimeREPL 中撬动

> ID：11279637
> 
> 赞同：6
> 
> 时间：2012-07-01T04:39:43.490
> 
> 标签：sublimetext2, pry, sublimerepl

有没有人在 SublimeREPL 中使用交换 irb 来撬动运气？我很接近，我想。我没有收到错误消息，但是当我输入命令时也没有收到响应。每次我点击返回时，它的行为就像缓冲区被重置一样。

* * *

我正在使用 rbenv 并将我的 SublimeREPL PATH 设置如下：

```
 "default_extend_env": {"PATH": "{HOME}/.rbenv/bin:{HOME}/.rbenv/shims:{PATH}"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T02:04:02.967

试着把`Pry.config.auto_indent = false`你的`.pryrc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T14:48:40.617

除了在 default_extend_env 中设置 PATH 外，您还必须设置 GEMPATH。这是我的 SublimeREPL 设置：</p>

```
{
"default_extend_env": {
    "PATH": "{HOME}/.rbenv/shims:{PATH}",
    "GEM_PATH": "{HOME}/.rbenv/shims"}
} 
```

您可以在 pry_repl.py 开头添加以下代码以打印出 PATH 以检查您的设置是否生效。

```
puts "PATH:#{ENV['PATH']}"
puts "GEM_PATH:#{ENV['GEM_PATH']}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T16:28:47.090

我使用 RVM 和 Ruby 2.1.2。我将 /Users/[my name]/Library/Application Support/Sublime Text 3/Packages/User/SublimeREPL.sublime-settings 更改为：

```
default_extend_env":
{
  "PATH": "/usr/local/bin/:{PATH}",
  "GEM_PATH": "{HOME}/.rvm/gems/ruby-2.1.2/"
} 
```

要获取您的 GEM_PATH，请键入`gem env`并从“安装目录：”获取路径，或者进入 pry 并键入`ENV['GEM_PATH']`

# android - 按下键时启动 Activity

> ID：11279642
> 
> 赞同：9
> 
> 时间：2012-07-01T04:41:50.877
> 
> 标签：android, keylistener

我想在用户按下空格键时开始一个活动。我的代码未检测到何时单击空格键。

```
@Override
public boolean dispatchKeyEvent(KeyEvent e) {
    if (e.getKeyCode() == KeyEvent.KEYCODE_SPACE) {
        Toast.makeText(MainActivity.this, "YOU CLICKED SPACE KEY",
                Toast.LENGTH_LONG).show();
        return true;
    }
    Toast.makeText(MainActivity.this, "Didnt work", Toast.LENGTH_SHORT)
            .show();
    return super.dispatchKeyEvent(e);
}; 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T04:50:46.377

您可以将侦听器设置为`View` **具有*当前*焦点**的 a，也可以`dispatchKeyEvent`在您的中使用`Activity`，如[本答案](https://stackoverflow.com/a/11237860/489607)所示。

两者都会起作用。

* * *

**回答您的意见：**如果您关注了我的链接，那么您[`Activity.dispatchKeyEvent(KeyEvent)`](http://developer.android.com/reference/android/app/Activity.html#dispatchKeyEvent%28android.view.KeyEvent%29)现在可能已经实现了。:-)

> 该代码没有注册我按下的任何键，但是当我按下后退键时，它为我干杯“没有工作”

**你碰巧在使用模拟器吗？**我问这个是因为最新的 SDK 似乎在模拟器键盘上有一些问题。特殊键（DPAD、HOME、BACK 等）有效，但屏幕上的 QWERTY 键盘不记录任何按下。我笔记本电脑中的物理键盘也不会注册任何按键。

不要问我为什么。

我这么说是因为本周我在链接中发布了答案，而且效果很好。变化是我今天早上将 Android SDK 更新为 R20/JB，所以我想这可能是一个因素。

但是，它**只能**在***真实*设备**上运行。我刚刚将物理键盘连接到我的平板电脑（P7510 / Honeycomb 3.2），**它可以很好地听空格键。**

如果您仍然怀疑，这里有证据：:-)

![在此处输入图像描述](../Images/3962533d88925b41851e2edb044017ab.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T11:01:18.707

```
public abstract boolean onKey (View v, int keyCode, KeyEvent event) 
```

此功能可用于检查按下了哪个键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T10:40:23.837

对于这种情况，我所做的是，我使用了覆盖函数'onKey'

```
@Override
public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event)
{
    if (keyCode == nNeededKeyCode)
    {
        //do something
    }
    return true;
} 
```

ps 首先你需要使用'OnKeyListener()'来获取按键事件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T12:51:28.473

很抱歉复制/粘贴答案，但这应该可以完成您的尝试。

这将在用户按下“空格键”然后放开空格键时发生。如果您不想等待他们放手，您可以删除我的布尔值，并在 onKeyDown 函数中执行您的代码。希望这可以帮助。

```
boolean spacePressed = false;
@Override
public boolean onKeyDown(View arg0, Editable arg1, int arg2, KeyEvent arg3) {
    // TODO Auto-generated method stub
       switch (keyCode) {
               case KeyEvent.KEYCODE_SPACE:
               {
                  spacePressed = true;
                  return true;
                }
               // other cases can go here
    }

    return true;
}// End of onKeyDown

@Override
public boolean onKeyUp(View arg0, Editable arg1, int arg2, KeyEvent arg3) {
   if (spacePressed){
       // start intent

       // make this false again, so other keys won't trigger it
       spacePressed = false;
   }

    return true;
}// End of onKeyUp 
```

# python - 我对 Project Euler 71 的逻辑有什么问题？

> ID：11279643
> 
> 赞同：3
> 
> 时间：2012-07-01T04:41:51.477
> 
> 标签：python, python-3.x

现在我正在尝试解决[Project Euler 71](http://projecteuler.net/problem=71)。

> 考虑分数 n/d，其中 n 和 d 是正整数。如果 n
> 
> 如果我们按大小升序列出 d ≤ 8 的约简真分数集，我们得到：
> 
> 1/8, 1/7, 1/6, 1/5, 1/4, 2/7, 1/3, 3/8, 2/5, 3/7, 1/2, 4/7, 3/ 5、5/8、2/3、5/7、3/4、4/5、5/6、6/7、7/8
> 
> 可以看出，2/5 是紧靠 3/7 左边的分数。
> 
> 通过按大小升序列出 d ≤ 1,000,000 的简化真分数集，找到紧靠 3/7 左侧的分数的分子。

## 当前代码：

```
from fractions import Fraction
import math

n = 428572
d = 1000000

x = Fraction(3,7)

best = Fraction(0)

while d > 1:
    if Fraction(n,d) >= x:
        n-=1
    else:
        y = Fraction(n,d)
        if (x - y) < (x - best):
            best = y
        d -= 1
        n = int(math.ceil(d*0.428572))

print(best.denominator) 
```

## 解释：

```
from fractions import Fraction
import math 
```

分数和 math.ceil 需要。

```
n = 428572
d = 1000000 
```

这两个变量代表原始问题中的`n`和`d`陈述。数字以这种方式开始，因为这是一个稍大的表示`3/7`（稍后将转换为分数）。

```
x = Fraction(3,7)

best = Fraction(0) 
```

x 只是一个快速参考，`Fraction(3,7)`所以我不必继续输入它。`best`用于跟踪最接近`3/7`但仍在其左侧的分数。

```
while d > 1: 
```

如果`d <= 1`并且`n`必须小于`1`检查的意义何在？那就别查了。

```
if Fraction(n,d) >= x:
    n-=1 
```

如果分数最终大于或等于`3/7`它不在它的左边，所以继续减去`n`它直到它在它的左边`3/7`。

```
 else:
        y = Fraction(n,d)
        if (x - y) < (x - best):
        best = y 
```

如果它在左边，`3/7`看看`3/7`减号`best`或`y`（它等于我们需要检查的分数）是否更接近于 0。更接近于 0 的那个将是最左边的，或者最接近于`3/7`。

```
 d -= 1
        n = int(math.ceil(d*0.428572)) 
```

不管最佳改变与否，分母都需要改变。因此，从分母中减去 1 并设置 n 分数（n，d）略大于（添加额外的 ceil 方法以确保它更大！）而不是`3/7`修剪测试空间。

```
print(best.denominator) 
```

最后打印问题想要的内容。

## 笔记

更改`d`为`8`和更改`n`为`4`（如测试用例）给出了`5`分母的所需结果。保持原样给出：`999997`.

有人可以向我解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T05:01:02.473

这不是做事的正确方法。您应该使用[Stern-Brocot 树](http://en.wikipedia.org/wiki/Stern-Brocot_tree)。您根本不必弄乱浮点数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T05:06:13.330

你做错了什么：

> 找到**分子**

除此之外，遵循@Antimony 的建议并了解 Stern-Brocot 树，这很有用而且很有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T05:12:45.873

不是为了让你觉得自己很傻。但是您的答案完全正确，请再次阅读问题并将最后一行更改为：

```
print( best.numerator ) 
```

此外，为了记录，有一种**更**有效的计算方法。

# ocaml - Ocamlgraph 有什么好的教程吗？

> ID：11279644
> 
> 赞同：2
> 
> 时间：2012-07-01T04:42:15.510
> 
> 标签：ocaml

我不熟悉 OCamlgraph 库？我找不到任何好的文档吗？我也无法运行任何小示例。我想在图中找到我正在使用它的所有循环。

任何人都知道任何文件？或者一组相同的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:22:48.347

有关于 ocamlgraph 的论文： [http ://www.lri.fr/~filliatr/ftp/publis/ocamlgraph.ps](http://www.lri.fr/~filliatr/ftp/publis/ocamlgraph.ps)

除了 ocamlgraph 主页上的示例之外，这里还有一个更紧凑的代码示例： [如何在 ocaml 中可视化/绘制自动机？](https://stackoverflow.com/questions/8999557/how-to-visualize-draw-automata-in-ocaml/9011334#9011334)

# javascript - 多次单击运行关键帧动画

> ID：11279646
> 
> 赞同：1
> 
> 时间：2012-07-01T04:43:07.063
> 
> 标签：javascript, jquery, css, webkit-animation

我有一个具有图像内容的 div。我想在单击图像时实现动画，但它仅在第一次单击时才起作用，而在图像中的下一次单击是无效的。什么是问题，我该如何解决？

```
$(function () {
         $('div.c').bind('mousedown', function () {
             var $elem = $(this);
             $elem.stop(true)
             .css({ "-webkit-animation-name": "xi",
             "-webkit-animation-duration": "3s",
             "-webkit-animation-timing-function": "ease", 
             "-webkit-animation-delay": "1s",            
              })
              })}) 
```

和

```
 @-webkit-keyframes xi{ 0% {
  left: 100px;
}

40% {
  left: 150px;
}

60% {
  left: 75px;
}

100% {
  left: 100px;
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:49:36.527

您可以按照此处的建议使用第二个关键帧块重置动画： [Css 和 jQuery：如何触发将 CSS3 动画元素重新定位回动画之前的位置？](https://stackoverflow.com/questions/7932672/css-and-jquery-how-do-i-trigger-the-repositioning-of-a-css3-animated-element-ba)

这里还有一个关于如何在动画完成后重置动画的可能解决方案： [CSS3 动画完成时是否有回调？](https://stackoverflow.com/questions/6186454/is-there-a-callback-on-completion-of-a-css3-animation)

# c++ - 当它的初始化程序是引用时，为什么 auto 不是引用？

> ID：11279647
> 
> 赞同：9
> 
> 时间：2012-07-01T04:43:31.633
> 
> 标签：c++, c++11, standards

我试图理解为什么`not_a_ref`不是参考。我知道我可以将其作为参考`auto &`。我在标准中挖掘了一段时间，但迷路了，无法弄清楚这种行为是在哪里定义的。

例子：

```
#include <vector>
#include <iostream>
#include <type_traits>

std::vector<int> stuff;

std::vector<int>& get_stuff()
{
    return stuff;
}

int main()
{
    auto not_a_ref = get_stuff();

    if( std::is_reference<decltype(not_a_ref)>::value )
        std::cout << "is_reference true" << std::endl;
    else
        std::cout << "is_reference false" << std::endl;

    if( &not_a_ref != &stuff )
        std::cout << "definately not a reference" << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T09:55:17.863

来自 C++11 草案，7.1.6.4（`auto`说明符）第 6 段：

> 为变量 d 推导的类型然后是使用从函数调用 (14.8.2.1) 的模板参数推导规则确定的推导 A。

从 14.8.2.1（*从函数调用中推导出模板参数*）第 3 段：

> 如果 P 是引用类型，则使用 P 所引用的类型进行类型推导。

所以对于 的类型推导，引用只是被忽略了`auto`。

请注意此规则与 的规则有何不同`decltype`。

**更新**：请参阅下面的评论，因为我认为 14.8.2.1 第 3 段不适用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T04:47:25.103

看看模板参数推导。`auto x = stuff;`就. `template<typename T> void f(T x) {} f(stuff);`_`x`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-01T08:11:49.057

根据 C++11 标准，auto 算作简单类型说明符 [7.1.6.2]，因此与其他简单类型说明符相同的规则适用于它。这意味着用 auto 声明引用与其他任何东西没有什么不同。

这意味着下一行：

```
auto not_a_ref = get_stuff(); 
```

将与以下内容相同：

```
std::vector<int> not_a_ref = get_stuff(); 
```

# c++ - OpenCV：对 cv::Mat 进行分区

> ID：11279651
> 
> 赞同：1
> 
> 时间：2012-07-01T04:44:13.683
> 
> 标签：c++, image, opencv, data-partitioning

我正在尝试使用 OpenCV 将 cv::Mat 划分为更小的 cv::Mat。我在网上找到了这个方法，但我无法让它工作。我想将一个 cv::Mat 划分为 640 x 480 的块，例如 32 x 32 块，并在我进行时单独对每个块进行操作。

这是我的代码。curr_frame 包含作为 cv::Mat 的总图像。N_per_col 和 N_per_row 分别包含每列和每行的 mb_sz x mb_sz 块的数量。

```
void ClassName::partition( void )
{       

    for( i = 0; i < N_per_col; i += mb_sz )
    {   
        for( j = 0; j < N_per_row; j += mb_sz )
        {
            cv::Mat tmp_img( curr_frame, cv::Rect( i, j, mb_sz, mb_sz ) );
            // Do stuff with tmp_img here
        }
    }   
} 
```

这编译得很好，但在运行时我在 tmp_img 中得到一个充满 NULL 像素的图像。curr_frame 肯定没问题，我可以用 imshow() 查看。

文档对此不是很清楚，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:16:46.797

正如我在评论中提到的，代码是正确的。可以肯定的是，我用 opencv 2.4.1 对其进行了测试，结果如你所料。所以我想问题出在这里没有提到的其他东西上。

# generator - 生成器不断返回相同的值

> ID：11279653
> 
> 赞同：0
> 
> 时间：2012-07-01T04:44:48.953
> 
> 标签：generator, yield, next

我被困在这段代码上，因为我无法让生成器在每次调用时都返回下一个值——它只是停留在第一个！看一看：

> 从 numpy 导入 *

```
def ArrayCoords(x,y,RowCount=0,ColumnCount=0):   # I am trying to get it to print
    while RowCount<x:                            # a new coordinate of a matrix
        while ColumnCount<y:                     # left to right up to down each
            yield (RowCount,ColumnCount)         # time it's called.
            ColumnCount+=1
        RowCount+=1
        ColumnCount=0 
```

这是我得到的：

```
>>> next(ArrayCoords(20,20))
... (0, 0)
>>> next(ArrayCoords(20,20))
... (0, 0) 
```

但它只是停留在第一个！我期待这个：

```
>>> next(ArrayCoords(20,20))
... (0, 0)
>>> next(ArrayCoords(20,20))
... (0, 1)
>>> next(ArrayCoords(20,20))
... (0, 2) 
```

你们能帮我写代码并解释为什么会这样吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:49:36.067

您在每一行上创建一个新生成器。试试这个：

```
iterator = ArrayCoords(20, 20)
next(iterator)
next(iterator) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T04:49:47.980

每次调用`ArrayCoords(20,20)`它都会返回一个新的生成器对象，与您每次调用时返回的生成器对象不同`ArrayCoords(20,20)`。要获得您想要的行为，您需要保存生成器：

```
>>> coords = ArrayCoords(20,20)
>>> next(coords)
(0, 0)
>>> next(coords)
(0, 1)
>>> next(coords)
(0, 2) 
```

# javascript - 如何根据组合框调用控制器操作？

> ID：11279655
> 
> 赞同：0
> 
> 时间：2012-07-01T04:45:31.157
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, combobox

我正在使用 Ruby on Rails 3.2.2 和 ruby​​ 1.9 。

我确实有一个模型招标，其中一个属性是状态。在索引页面上，首次加载时，根据已登录的用户所在公司显示招标数据（也会显示状态）。

我想通过组合框进行过滤，其中将包含所有状态（已启动、已关闭、已赢 ..etc），因此当用户更改过滤器时，我也想通过将状态提交给控制器来更改表​​数据这将根据状态过滤掉投标。我怎样才能做到这一点？使用 Ajax 怎么样（因为唯一改变的是表格数据而不是整个页面）？

除了状态之外，我还有不同的过滤器选项，例如bid_amount（也是属性之一）。如何将按数据的bid_amount 过滤器与状态相结合（即，如果用户想要显示出价为b/n 10,000-100,000 的已关闭状态）。在控制器上编写查询不会有问题，但我不知道如何从视图中使用它。

由于 ruby​​ 没有像 Java 这样的枚举，所以我也从模型类的数组中加载这些状态。这是一个好方法吗？

任何建议也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:18:25.510

Rails 通过 ajax 执行事物的方式是使用 :remote => true。一个简单的搜索将为您提供相当多的教程。

非 ajax 解决方案可能是这样的结构。

```
 def index
    if params[:status] || params[:bid_amount]
         # Tailored Query
    else
         # Generic Query
    end
 end 
```

看法

```
 <%= form_tag index_route_path do %>
     # Statuses that are pulled form symbolize via Model
     # Bid Amount Boxes
 <% end %>

 # Display query results 
```

另外我会检查 gem Symbolize，以帮助您解决枚举 [https://github.com/nofxx/symbolize](https://github.com/nofxx/symbolize)

我仍然不太清楚我们想要做什么。如果您希望根据用户设置的状态来填充您的出价金额框。您可以触发表单提交 onChange，并使用帮助程序填充您的 bid_amount 值。

# c# - Type.GetType 未按名称查找类型

> ID：11279662
> 
> 赞同：1
> 
> 时间：2012-07-01T04:47:49.377
> 
> 标签：c#, reflection, structuremap

我正在尝试使用 StructureMap 来执行运行时类型注册，并且在使用`Type.GetType()`. 这是我的测试应用程序的完整代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using StructureMap;
using StructureMap.Configuration.DSL;
using StructureMap.Graph;

namespace ConsoleApplication1 {
    class Program {
        static void Main(string[] args) {
            ObjectFactory.Initialize(r => r.Scan(
                s => {
                    s.AssembliesFromPath(
                        @"c:\Path\To\MyClasses\bin\Debug");
                    s.Convention<MyConvention>();
                }
                                              ));

            ObjectFactory.AssertConfigurationIsValid();

            foreach (var name in MyConvention.assemblyQualifiedTypenames) {
                Console.WriteLine(name);
                Console.WriteLine("Type found for reflection by assembly qualified name: {0}", Type.ReflectionOnlyGetType(name, false, false) != null);
                Console.WriteLine("Type found by assembly qualified name: {0}", Type.GetType(name) != null);
                Console.WriteLine("Type found by search: {0}",
                    AppDomain.CurrentDomain.GetAssemblies().ToList()
                    .SelectMany(assembly => assembly.GetTypes().Where(t => t.AssemblyQualifiedName == name))
                    .FirstOrDefault() != null
                );
            }
            Type type = null;
            foreach (var name in MyConvention.fullnames) {
                Console.WriteLine(name);
                Console.WriteLine("Type found by full name: {0}", Type.GetType(name) != null);
                Console.WriteLine("Type found by search: {0}",
                    AppDomain.CurrentDomain.GetAssemblies().ToList()
                    .SelectMany(assembly => assembly.GetTypes().Where(t => t.FullName == name))
                    .FirstOrDefault() != null
                );
            }
            foreach (var name in MyConvention.typenames) {
                Console.WriteLine(name);
                Console.WriteLine("Type found by name: {0}", Type.GetType(name) != null);
                Console.WriteLine("Type found by search: {0}",
                    (type = AppDomain.CurrentDomain.GetAssemblies().ToList()
                    .SelectMany(assembly => assembly.GetTypes().Where(t => t.Name == name))
                    .FirstOrDefault()) != null
                );
            }
            Console.ReadLine();
            var instance = ObjectFactory.GetInstance(type);
            Console.WriteLine("Type instance retrieved from StructureMap: {0}", instance != null);
            Console.ReadLine();
            ObjectFactory.WhatDoIHave()
                .Split(new [] { Environment.NewLine}, StringSplitOptions.None)
                .Where(s => s.Contains("Class2")).ToList()
                .ForEach(Console.WriteLine);
            Console.ReadLine();
        }

        private class MyConvention : IRegistrationConvention {
            public static List<string> typenames = new List<string>();
            public static List<string> fullnames = new List<string>(); 
            public static List<string> assemblyQualifiedTypenames = new List<string>(); 
            public void Process(Type type, Registry registry) {
                if (type.GetCustomAttributes(false).Any(o => o.GetType().Name == "MyClassAttribute")) {
                    registry.For(type).Use(type);
                    typenames.Add(type.Name);
                    fullnames.Add(type.FullName);
                    assemblyQualifiedTypenames.Add(type.AssemblyQualifiedName);
                }
            }
        }
    }
} 
```

测试类定义：

```
namespace MyAttributes {
    public class MyClassAttribute : Attribute { }
}

namespace MyClasses {
    public class MyClass1 { }

    [MyClass]
    public class MyClass2 { }
} 
```

运行控制台应用程序的输出：

```
MyClasses.Class2，MyClasses，版本=1.0.0.0，文化=中性，PublicKeyToken=null
通过程序集限定名称找到用于反射的类型：False
按程序集限定名称找到的类型：False
通过搜索找到的类型：True
MyClasses.Class2
按全名找到的类型：False
通过搜索找到的类型：True
2 类
按名称找到的类型：False
通过搜索找到的类型：True

从 StructureMap 检索的类型实例：True

Class2 (MyClasses.Class2) 60eb30ad-ae50-413d-884f-04743ea3148c
  MyClasses.Class2、MyClasses、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null 的已配置实例
                                         60eb30ad-ae50-413d-884f-04743ea3148c
  MyClasses.Class2、MyClasses、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null 的已配置实例

```

我已经根据[这篇 SO 帖子](https://stackoverflow.com/questions/2426752/get-instance-from-structuremap-by-type-name)完成了所有测试——我是否遗漏了一些基本的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T23:25:57.747

试试这段代码。这避免了使用程序集限定名称，因此没有硬编码版本控制。

```
const string myClass = "<Namespace.Class>";
const string dllName = "<DllName>,"; //Notice the ','

Type myType = AppDomain.CurrentDomain.GetAssemblies().Where(a => a.ToString().StartsWith(dllName)).Select(a => a.GetType(myClass )).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T07:02:56.007

问题是您正在尝试使用`Type.GetType(name)`. 因此，.net 将尝试定位程序集本身 - 在 GAC 中或与正在执行的程序集相同的目录中。由于它位于不同的目录中，因此无法找到它。您可以通过将包含的可执行文件复制`MyClasses`到与控制台应用程序相同的目录中来确认这一点 - 然后它就可以工作了。

出于类似的原因，它不会`AppDomain.CurrentDomain.GetAssemblies()`在当前域中使用`MyClasses`.

您需要加载从返回的程序集`MyConvention.assemblyQualifiedTypenames`然后使用`assembly.GetType(name)`，或者使用`Type.GetType`允许您指定自己的程序集解析器的版本，如此[处](http://msdn.microsoft.com/en-us/library/ee332932.aspx)所述（仅当类包含程序集名称时才有效）。

# java - 如何将文本链接设置为实际 URL 而不是 HTML 中的文本标记

> ID：11279672
> 
> 赞同：1
> 
> 时间：2012-07-01T04:50:34.010
> 
> 标签：java, android, twitter

我一直在尝试使用模式或其他实用程序来解决这个问题，但还没有让它工作。

假设我有一个 HTML 链接：

```
 <a href="http://www.google.com">Google, Inc.</a> 
```

我想在文本视图中创建一个链接，但将链接的文本设置为实际 URL，而不是 Google，Inc。

例如，如果我收到的数据是：

--嘿，如果你想尝试搜索`<a href="http://www.google.com">Google, Inc.</a>`，就这么简单。

我希望它显示为：

*--嘿，如果您想尝试搜索，请访问[http://www.google.com](http://www.google.com)，就这么简单。*

代替：

*--嘿，如果您想尝试搜索，请访问 Google, Inc.，就这么简单。*

Html.fromHtml() 使其显示为“Google, Inc.” 自动，但不是我想要的结果。

另外，我不需要它来专门用于这个示例，我需要它来处理所有 html 链接，因为我不知道我将获得哪些链接作为数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:22:08.207

这实际上很棘手....但我找到了一种方法。

感谢 SO。

这是答案：

```
TextView tvYourTextView = ( TextView ) findById( R.id.yourTextViewThatShowsALink );

tvYourTextView.setMovementMethod(LinkMovementMethod.getInstance()); //that will make your links work. 
```

PS：别忘了使用`Html.fromHtml("your content as html")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T04:55:34.937

我建议使用[Linkify](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aautoLink)并自己解析字符串来创建你想要的链接。

设置 Linkify 以查找原始网址并将其转换为文本中的链接：

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:autoLink="web"
    /> 
```

此函数将从 html 标签中提取原始地址：

```
public String parseLinks(String raw) {
    String openTag = "<a href=\"";
    String closeTag = "</a>";
    String result = "";

    int start = 0;
    int middle = raw.indexOf(openTag);
    int end;
    while(middle > -1) {
        result += raw.substring(start, middle);

        end = raw.indexOf("\">", middle);
        result += raw.substring(middle + openTag.length(), end);

        start = raw.indexOf(closeTag, end) + closeTag.length(); 
        middle = raw.indexOf(openTag, start);
    }

    result += raw.substring(start, raw.length());
    return result;
} 
```

了解此功能不会进行错误检查，我建议您自己添加。

现在只需将 parseLinks() 返回的字符串传递给您的 TextView，如下所示：

```
textView.setText(parseLinks(rawHTML)); 
```

希望有帮助！

# python - 在 Python 中限制套接字上的 readline 长度

> ID：11279674
> 
> 赞同：1
> 
> 时间：2012-07-01T04:50:56.610
> 
> 标签：python, sockets, readline

我在服务器上工作，所有数据都是基于行的。我希望能够在一行超过给定长度时引发异常，而无需读取比我需要的更多数据。例如，客户端*X*发送的行长度为 16KB，即使行长度限制为 1024 字节。读取超过 1024 字节后，我想停止读取附加数据，关闭套接字并引发异常。我查看了文档和一些源代码，但如果不重写 _readline 方法，我看不到这样做的方法。有没有更简单的方法可以让我忽略？

编辑：评论让我意识到我需要添加更多信息。我知道我可以编写逻辑来执行此操作而无需太多工作，但我希望使用内置函数来利用 memoryview 的有效缓冲，而不是自己再次实现它或使用读取块、连接和拆分的幼稚方法根据需要没有记忆视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:01:18.297

我真的不喜欢接受不能真正回答问题的答案，所以这是我最终采用的方法，如果没有人有更好的解决方案，我只会标记它社区 wiki 或稍后未回答：

```
#!/usr/bin/env python3
class TheThing(object):
    def __init__(self, connection, maxlinelen=8192):
        self.connection = connection
        self.lines = self._iterlines()
        self.maxlinelen = maxlinelen

    def _iterlines(self):
        """
        Yield lines from class member socket object.
        """
        buffered = b''
        while True:
            received = self.connection.recv(4096)
            if not received:
                if buffered:
                    raise Exception("Unexpected EOF.")
                yield received
                continue

            elif buffered:
                received = buffered + received

            if b'\n' in received:
                for line in received.splitlines(True):
                    if line.endswith(b'\n'):
                        if len(line) > self.maxlinelen:
                            raise LineTooLong("Line size: %i" % len(line))
                        yield line
                    else:
                        buffered = line
            else:
                buffered += received

            if len(buffered) > self.maxlinelen:
                raise LineTooLong("Too much data in internal buffer.")

    def _readline(self):
        """
        Return next available line from member socket object.
        """
        return next(self.lines) 
```

我没有费心比较代码来确定，但我做的连接和拆分更少，所以我认为我的可能更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T05:47:33.287

我意识到您的编辑正在澄清您想要的是实现目标的内置方法。但我不知道有任何东西可以帮助您对 readline 方法进行细粒度控制。但我想我可能只包括一个使用生成器和拆分进行编码方法的示例......只是为了好玩。

参考这个其他问题/答案以获得读取行的漂亮生成器：
[https ://stackoverflow.com/a/822788/496445](https://stackoverflow.com/a/822788/496445)

基于该读者：

**服务器.py**

```
import socket

MAXLINE = 100

def linesplit(sock, maxline=0):
    buf = sock.recv(16)
    done = False
    while not done:
        # mid line check        
        if maxline and len(buf) > maxline:
            yield buf, True

        if "\n" in buf:
            (line, buf) = buf.split("\n", 1)
            err = maxline and len(line) > maxline
            yield line+"\n", err
        else:
            more = sock.recv(16)
            if not more:
                done = True
            else:
                buf = buf+more
    if buf:
        err = maxline and len(buf) > maxline
        yield buf, err

HOST = ''                
PORT = 50007             
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((HOST, PORT))
s.listen(1)
conn, addr = s.accept()
print 'Connected by', addr
for line, err in linesplit(conn, MAXLINE):
    if err:
        print "Error: Line greater than allowed length %d (got %d)" \
                % (MAXLINE, len(line))
        break
    else:
        print "Received data:", line.strip()
conn.close() 
```

**客户端.py**

```
import socket
import time
import random

HOST = ''    
PORT = 50007             
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))
while True:
    val = 'x'*random.randint(1, 50)
    if random.random() > .5:
        val += "\n"
    s.sendall(val)
    time.sleep(.1)
s.close() 
```

**输出**

```
Connected by ('127.0.0.1', 57912)
Received data: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Received data: xxxxxxxxxxxxxxxxxxxxxxxxxxxx
Received data: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
...
Received data: xxxxxxxxxxx
Received data: xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Error: Line greater than allowed length 100 (got 102) 
```

服务器读取它接收到的数据，并在组装后不断检查行的长度。如果在任何时候该行超过指定的数量，它会返回一个错误代码。我把它放在一起的速度很快，所以我确信可以进一步清理检查，并且可以更改读取缓冲区的数量，以解决您希望在消耗过多数据之前检测长行的速度。在上面的输出示例中，我只得到了比允许的多 2 个字节，并且它停止了。

客户端只是发送随机长度的数据，换行的 50/50 变化。

# mysql - 优化这些 MySQL 查询的更好方法

> ID：11279679
> 
> 赞同：0
> 
> 时间：2012-07-01T04:52:30.297
> 
> 标签：mysql, query-optimization

我有两个 MySQL 表：

*   属性（attributeid，名称）
*   产品属性（productid、attributeid、displayvalue）

需要为每个名为“产品类型”的属性名称获取与此“产品类型”关联的所有其他属性。举个例子——属性表看起来像：

```
 attributeid  name
    1            A
    2            B
    3            Product Type
    4            D 
```

productsattributes 表如下所示：

```
productid attributeid displayvalue
        1         3           FAN
        1         1           Brown
        1         2           Stand
        2         3           FAN
        2         4           D
        3         3           CAR
        3         4           imported 
```

所以最终的结果应该是：

```
FAN (A,B, Product Type,D) 
CAR (Product Type, imported) 
```

这是我的尝试：

*   首先，我从产品属性中获取所有“显示值”：

```
SELECT DISTINCT displayvalue 
  FROM productsttributes 
 WHERE attributeid = 3; 
```

*   然后我遍历每个“显示值”以找到其他属性：

```
SELECT a.name 
 FROM attributes a 
 INNER JOIN productsattributes pa 
    ON pa.attributeid = a.attributeid AND productid in (
        SELECT productid 
        FROM productsttributes 
        WHERE dispalyvale =  '$displayvalue') 
 ORDER BY a.name; 
```

问题是 productattributes 表有大约 700 万行，所以我的脚本需要永远......当然我不是在寻找 10 分钟的解决方案，但至少它会改善我的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:46:45.597

我将从以下陈述开始：

```
ALTER TABLE attributes ADD CONSTRAINT p_attributes PRIMARY KEY (attributeid);
ALTER TABLE productsattributes ADD CONSTRAINT p_productsattributes
    PRIMARY KEY(productid, attributeid);
ANALYZE TABLE attributes, productsattributes; 
```

这将确保所有重要字段都被索引。

查询可能如下所示（也在[SQL Fiddle](http://www.sqlfiddle.com/#!2/39600/3)上）：

```
SELECT trg.displayvalue,
       group_concat(a.name ORDER BY trg.productid, a.attributeid)
  FROM (
        SELECT t.productid,t.displayvalue
          FROM attributes a
          JOIN productsattributes t USING (attributeid)
         WHERE a.name = 'Product Type') AS trg
  JOIN productsattributes p ON p.productid = trg.productid
  JOIN attributes a ON a.attributeid = p.attributeid
 GROUP BY trg.displayvalue
 ORDER BY 1; 
```

请`EXPLAIN`在您的问题中包含您的输出和此查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T05:11:56.737

试试这个 ：：

```
Select displayvalue, attribute_name
from 
(Select 
product_id from productsattributes pa inner join attributes_table at on (pa.attributeid=at.id) where at.name=?) as productList
inner join  productsattributes pa2 on(pa2.product_id=productList.product_id)
inner join attributes_table at2 on (pa2.attributeid=at2.id) 
```

# c# - 在循环中创建 BinaryWriter 比创建一次获得更好的性能？

> ID：11279681
> 
> 赞同：1
> 
> 时间：2012-07-01T04:52:58.000
> 
> 标签：c#, performance

我检查了内存映射文件以检查它们的性能效果，并且在执行此操作时我注意到，如果我重新创建 BinaryWriter，每次我要写入文件时，它都会使我的代码运行速度快 30%。

有人能解释一下吗？

***此代码的运行速度比以下代码快 30%：***

```
 using (MemoryMappedFile mmf = MemoryMappedFile.CreateOrOpen("testmap", 1000000000))
 {
    DateTime dt;
    bool mutexCreated;
    Mutex mutex = new Mutex(false, "testmapmutex", out mutexCreated);
    using (MemoryMappedViewStream stream = mmf.CreateViewStream())
    {
       dt = DateTime.Now;
       for (int i = 0; i < 1000000; i++)
       {
           BinaryWriter writer = new BinaryWriter(stream); // In or out?
           try
           {
               mutex.WaitOne();
               writer.Write(i);
               mutex.ReleaseMutex();
           }
       }
    }
 } 
```

***这段代码的运行速度比上面的慢 30%：***

```
 using (MemoryMappedFile mmf = MemoryMappedFile.CreateOrOpen("testmap", 1000000000))
 {
    DateTime dt;
    bool mutexCreated;
    Mutex mutex = new Mutex(false, "testmapmutex", out mutexCreated);
    using (MemoryMappedViewStream stream = mmf.CreateViewStream())
    {
       dt = DateTime.Now;
       BinaryWriter writer = new BinaryWriter(stream); // In or out?
       for (int i = 0; i < 1000000; i++)
       {
           try
           {
               mutex.WaitOne();
               writer.Write(i);
               mutex.ReleaseMutex();
           }
       }
    }
 } 
```

***编辑：***

代码现在应该编译。

***新观察：***

如果我在“发布”（而不是调试）中进行编译，则问题消失且结果有意义当使用 W2008 在服务器上（而不是使用 W7 在 PC 上）运行代码时，问题消失且结果有意义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:27:11.670

我已经测试了您的代码，它运行如下。用于`System.Diagnostics.Stopwatch`测量经过的时间。

> `BinaryWriter`循环内：**4815537**滴答 `BinaryWriter`循环外：**4168415**滴答

这是预期的正常行为。

但是话虽如此，由于您`BinaryWriter`在循环内实例化后没有进行处理，因此`for`您犯了一个严重的错误。如果您更正了该错误，那么您的代码**将无法运行**。

**错误代码**

```
for (int i = 0; i < 1000000; i++)
{
   using (BinaryWriter writer = new BinaryWriter(stream)) 
   // this will force disposing of writer, but will also close the base 
   // stream instance too. 
   {
           // In or out?
           try
           {
              mutex.WaitOne();
              writer.Write(i);
              mutex.ReleaseMutex();
           }
           catch (Exception e)
           {
               Console.WriteLine(e);
           }
    }
 } 
```

# jquery - 从 jquery 对话框 iframe 获取表单值

> ID：11279682
> 
> 赞同：2
> 
> 时间：2012-07-01T04:53:02.173
> 
> 标签：jquery, jquery-ui, iframe

我试图将此代码缩小到基础

我有这个 jquery 对话框。它有一个 iframe，它是一个带有表单的填充 JSP 当用户单击保存按钮时，我想从 iframe 表单中获取一些表单值。我只是不确定如何从 Save 函数访问这些表单字段（标题，htmldata 是表单字段名称）。

```
$("#dialog-edit-raw").dialog({
    autoOpen: false, height: 300, width: 500,  position: [200, 100], modal: true,
            buttons: {
                Save: function() {
                    $.ajax({
                        type: "POST",
                        url: "/servlet/trainingServlet",
                        data: ({method: 'ajaxSaveArticle',title: title_from_Form }),
                        cache: false,
                        dataType: 'json',
                        beforeSend: function(){
                        },
                        error: function(jqXHR, textStatus, errorThrown){
                        },
                        success: function(data){
                        }
                    });

                },
                Close: function() {
                    $( this ).dialog( "close" );
                }
            },
            close: function() {
                $( this ).html('');
            }
    }); 
```

* * *

```
$( ".ui-state-default" ).live("click", function(event){
     $("#dialog-edit-raw")
      .html('<iframe id="iframeedit" style="border: 0px;" src="/servlet/myServlet?method=editDoc&ID='+tID+'&raw=1" width="100%" height="580" "></iframe>')
.dialog('open');
}); 
```

表单看起来有两个输入：

```
input name="title" id="title" size="50" value="" type="text"
textarea cols="50" id="htmldata" name="htmldata" rows="6" 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:14:27.790

我找到了：

```
$("#iframeedit").contents().find("#title"); 
```

# java - 将零添加到一位数，可以吗？

> ID：11279683
> 
> 赞同：4
> 
> 时间：2012-07-01T04:53:05.837
> 
> 标签：java

```
public class MultiplicationTable {
public static void main (String[]a){

    int[] x;
    x = new int[10];
    int i;
    int n=0;

    for (i=0;i<x.length;i++){
        n++;
        x[i]=n;
        System.out.print(x[i] + " ");
    }

    System.out.println();
    for (i=0;i<x.length;i++)            
        System.out.print(x[0] * x[i] + " ");

    System.out.println();
    for (i=0;i<x.length;i++)            
        System.out.print(x[1] * x[i] + " ");

    System.out.println();
    for (i=0;i<x.length;i++)            
        System.out.print(x[2] * x[i] + " ");

    System.out.println();
    for (i=0;i<x.length;i++)            
        System.out.print(x[3] * x[i] + " ");

    System.out.println();
    for (i=0;i<x.length;i++)            
        System.out.print(x[4] * x[i] + " ");

    System.out.println();
    for (i=0;i<x.length;i++)            
        System.out.print(x[5] * x[i] + " ");

    System.out.println();
    for (i=0;i<x.length;i++)            
        System.out.print(x[6] * x[i] + " ");

    System.out.println();
    for (i=0;i<x.length;i++)            
        System.out.print(x[7] * x[i] + " ");

    System.out.println();
    for (i=0;i<x.length;i++)            
        System.out.print(x[8] * x[i] + " ");

    System.out.println();
    for (i=0;i<x.length;i++)            
        System.out.print(x[9] * x[i] + " ");

}
} 
```

这是一个将显示如下乘法表的程序：

1 2 3 4 5 6 7 8 9 10

1 2 3 4 5 6 7 8 9 10

2 4 6 8 10 12 14 16 18 20

3 6 9 12 15 18 21 24 27 30

4 8 12 16 20 24 28 32 36 40

5 10 15 20 25 30 35 40 45 50

6 12 18 24 30 36 42 48 54 60

7 14 21 28 35 42 49 56 63 70

8 16 24 32 40 48 56 64 72 80

9 18 27 36 45 54 63 72 81 90

10 20 30 40 50 60 70 80 90 100

==================================================== ==============

它正在运行且正确，但我希望它看起来像这样：

01 02 03 04 05 06 07 08 09 10

01 02 03 04 05 06 07 08 09 10

02 04 06 08 10 12 14 16 18 20

03 06 09 12 15 18 21 24 27 30

04 08 12 16 20 24 28 32 36 40

05 10 15 20 25 30 35 40 45 50

06 12 18 24 30 36 42 48 54 60

07 14 21 28 35 42 49 56 63 70

08 16 24 32 40 48 56 64 72 80

09 18 27 36 45 54 63 72 81 90

10 20 30 40 50 60 70 80 90 100

================================================

有什么办法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-01T04:56:05.113

是的你可以！您可以使用`String.format`向输出添加零填充。

例子：

`String.format("%05d", 2)`会产生`00002`.

对当前代码的一些改进：

我不确定您为什么打算将数字存储在数组中（可能出于练习目的），但这不是必需的，因为无论如何它都是从 1 到 10。虽然如果你想这样做，你不需要两者`i`和`n`。

```
for (i=0; i<x.length; i++){
    x[i] = i+1;
    System.out.print(x[i] + " ");
} 
```

其次，我相信你意识到你有很多重复的代码，而且它是非常连续的。您可以使用 2 个嵌套的 for 循环来做到这一点，而不是使用 10 个单循环：

```
for (int row = 1; row <= 10; row++) {
    for (int col = 1; col <= 10; col++)
        System.out.print(String.format("%03d", row * col));
    System.out.println();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T04:59:43.273

是的：

```
String.format("%01d", x[i]*x[j]); is what you want. 
```

如果您熟悉`printf`C 语言，那么这将很熟悉。如果没有，请阅读有关[String.format 格式字符串](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)的 java 参考。

`System.out.println`此外，您可以使用带有两个计数器的双重嵌套循环，而不是 10条语句。一个用于计算您所在的行`j`，一个用于计算每一列`i`。

# mysql - mysql中特殊专栏上的数学

> ID：11279685
> 
> 赞同：-1
> 
> 时间：2012-07-01T04:53:07.627
> 
> 标签：mysql, sql

我想在我的表格的一列上做一个数学运算。
我的列中有数字，我想除以 11 然后 *0.5 和从第一个数字中挖掘我可以只用 mysql 做这样的事情吗？或者需要一个 php 文件来执行此操作？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:01:13.137

```
SELECT numcol, ((numcol / 11 ) * 0.5 - numcol) AS calccol
  FROM special_table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T05:00:19.253

最好将计算逻辑留在应用程序层而不是数据库层，但如果你仍然想试试这个：

```
Select ((column/11)*0.5) from mytable 
```

# java - Google App Engine RuntimeHelper.checkRestricted 从 antlr GAE Java 1.7 花费了 25 倍的时间

> ID：11279686
> 
> 赞同：4
> 
> 时间：2012-07-01T04:53:26.937
> 
> 标签：java, google-app-engine

我们在 GAE 1.7 上使用 antlr 解析并发现 25 倍的开销（在 eclipse 中本地运行 GAE 与运行独立 Java 应用程序相比），因为它在 RuntimeHelper.checkRestricted 中花费了 96% 的时间

（我们不在 GAE 1.6.4 中，它有一个额外调用 RuntimeHelper.checkRestricted 的错误）

有谁知道哪些方法调用会触发对 RuntimeHelper.checkRestricted 的调用的列表，以便我们可以避免这些调用？出于某种原因，我找不到该安全管理器的任何文档以及触发它的原因。

一个反复触发对 checkRestricted 的耗时调用的调用似乎是 antlr.runtime.DFA.predict(IntStream)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:33:57.347

你知道你是否使用 BCrypt 吗？其他人在使用 BCrypt 时也遇到了类似的问题。谷歌已经修复了 BCrypt 问题：[http](http://code.google.com/p/googleappengine/issues/detail?id=7277&thanks=7277&ts=1333530915) ://code.google.com/p/googleappengine/issues/detail?id=7277&thanks=7277&ts=1333530915你现在怎么样了？

# arrays - 出现所有数字中最短的窗口

> ID：11279687
> 
> 赞同：1
> 
> 时间：2012-07-01T04:53:35.417
> 
> 标签：arrays, algorithm, search

> **可能重复：**
> [数组中给定数字的最小窗口](https://stackoverflow.com/questions/3382757/minimum-window-for-the-given-numbers-in-an-array)

我想知道应该在这里应用的方法。我们有一个包含从 0 到 n 的数字的数组。我们必须找到从 1 到 n 的所有数字都出现的最小窗口。

例如：

1 0 2 3 1 4 0

答案应该是 2 3 1 4

1 3 1 4 0 1 2 0 3 2 4 1

答案应该是 3 2 4 1

如果可能有许多这样的窗口，则应打印最先出现的窗口。

# grails - Grails应用中Time Machine Feature的实现

> ID：11279690
> 
> 赞同：2
> 
> 时间：2012-07-01T04:54:45.863
> 
> 标签：grails, history

我正在尝试在我的 grails 应用程序中实现“时间机器”功能。该功能将允许用户选择过去的日期，并显示所选日期的应用程序界面。如何实现此功能？我正在考虑为所有域添加一个“dateCreated”字段，以便在时间机器功能中，我可以在所选日期之前查询所有创建日期的结果。我认为这会起作用，但是随着数据的增长，数据库的大小会增长，那时应用程序会很重。有没有其他方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T19:12:12.067

您也许可以从这个相关问题中获得一些灵感：

[如何管理 Grails 中的对象修订？](https://stackoverflow.com/questions/3564936/how-to-manage-object-revisions-in-grails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:00:45.070

您应该查看[http://grails.org/plugin/audit-logging](http://grails.org/plugin/audit-logging)插件，因为它允许您保留所有版本的域类实例。但是实现此功能将非常棘手，因为对象不是孤立存在的 - 您不仅需要显示截至上一个日期的数据，还需要显示截至该日期的相关数据（例如作者的书籍收藏）。它会使查询变得相当复杂。

# java - 如何在 WebSphere 7.0 上使用 OpenJPA 2.2？

> ID：11279691
> 
> 赞同：4
> 
> 时间：2012-07-01T04:54:57.503
> 
> 标签：java, websphere, openjpa

我正在启动一个需要使用 OpenJPA 2.2 并在 WAS 7.0 上运行的项目。

如何让 WAS 7.0 拾取 OpenJPA 2.2 jar 而不是使用它自己的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:07:05.753

您可以配置 OpenJPA 2.2，如 WAS7 信息中心[使用第三方持久性提供程序一](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tejb_jpa3rdparty.html)文中所述。

本文中指出，除了使用来自其他供应商的 JPA 提供程序外，“应用程序还可以指定一个 Apache OpenJPA 提供程序，该提供程序与应用程序服务器随附的版本不同。”

# python - gdata-python-client中的“导入原子”，哪个原子

> ID：11279692
> 
> 赞同：1
> 
> 时间：2012-07-01T04:55:26.160
> 
> 标签：python, gdata-api

我正在通过 gdata-python-client 运行，当我尝试运行代码时它失败了，因为未安装模块 atom。

[http://code.google.com/p/gdata-python-client/source/browse/samples/contacts/contacts_example.py](http://code.google.com/p/gdata-python-client/source/browse/samples/contacts/contacts_example.py)

当我尝试对 atom 进行 pip 安装时

```
sudo pip install atom 
```

它似乎选择了“Mac 上的自动测试”，它不能在 ubuntu 上编译。

[http://pypi.python.org/pypi/atom/0.9.2](http://pypi.python.org/pypi/atom/0.9.2)

并且是不对的，因为阅读代码表明这里使用的 atom 模块是用于生成 atom feed 的。

atom 在 gdata 世界中安装的正确模块是什么，它可以按原样使用还是需要在文件中更正：

```
import pyatom as atom 
```

例如

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T22:26:16.540

我有同样的问题，我不知道为什么它也找不到它，但它是一个模块，应该是 gdata 的一部分：

Atom 作为 gdata 的一部分安装。它安装在文件夹 /usr/lib/python2./dist-packages/atom 和 gdata 中：usr/lib/python2./dist-packages/gdata

尝试定位，否则卸载gdata，获取最新的：

[https://code.google.com/p/gdata-python-client/downloads/list](https://code.google.com/p/gdata-python-client/downloads/list)

并手动安装:)

请注意，它不适用于 python 3

它最高支持python 2.7。

希望有帮助

# c# - C# MVC：如何从 XML 中提取值并传递给视图

> ID：11279699
> 
> 赞同：1
> 
> 时间：2012-07-01T04:56:23.043
> 
> 标签：c#

我有一个 C# MVC 应用程序，我需要将以下数据输出到视图：

```
 <versions>
              <product>true</product>
              <type>city</type>
              <factory name="Demme" url="http://test1.com" thumbnail="http://test3.com/img1" interval="10" />
              <factory name="Vollick" url="http://test2.com" thumbnail="http://test3.com/img1" interval="10" />
              <factory name="Tony" url="http://test3.com" thumbnail="http://test3.com/img1" interval="10" />
            </versions> 
```

上述数据来自将数据存储为 XML 数据类型的 SQL 表/列。somone 可以给我一个代码示例来提取元素的值（也许将每个值分配给变量），以便我可以将它传递给视图吗？

所以我需要获取值 "true" 、 "City" 、 "Demme" 、 "http://test1.com" 、 "http://test3.com/img1....等等。

将这些数据呈现给视图的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:26:40.787

我的想法是创建类，对应于你的 Xml 文件，一个版本类，一个工厂类。加载 xml 文件，然后将其传递给返回数据的类，我是这样做的：

版本类：

```
public class Version
{
    public bool IsProduct { get; set; }
    public string City { get; set; }
    public List<Factory> Factories { get; set; }

    //Create a version
    public Version(XElement xVersion)
    {
        IsProduct = Convert.ToBoolean(xVersion.Element("Product").Value);
        City = xVersion.Element("City").Value;
        Factories = Factory.GetFactories(xVersion);
    }

    //Get the list of versions
    public static List<Version> GetVersions(XElement xDocument)
    {
        if (xDocument == null)
            return null;

        List<Version> list = new List<Version>();
        var xVersions = xDocument.Elements("Version");

        foreach (var xVersion in xVersions)
        {
            list.Add(new Version(xVersion));
        }

        return list;
    }
} 
```

工厂类：

```
public class Factory
{
    public string Name { get; set; }
    public string Url { get; set; }
    public string Thumbnail { get; set; }
    public string Interval { get; set; }

    //Create a factory
    public Factory(XElement xFactory)
    {
        Name = xFactory.Attribute("Name").Value;
        Url = xFactory.Attribute("Url").Value;
        Thumbnail = xFactory.Attribute("Thumbnail").Value;
        Interval = xFactory.Attribute("Interval").Value;
    }

    //Get the factories of a version
    public static List<Factory> GetFactories(XElement xVersion)
    {
        var xFactories = xVersion.Elements("Factory");
        if (xFactories == null)
            return null;

        List<Factory> list = new List<Factory>();

        foreach (var xFactory in xFactories)
        {
            list.Add(new Factory(xFactory));
        }

        return list;
    }
} 
```

最后，在您的 MCV 控制器中：

```
private void myMethod()
    {
        var xDocument = XElement.Load("XmlFilePath");
        var versions = Version.GetVersions(xDocument);

        //And then, pass the -versions- to your typed view ^^
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T04:58:31.417

```
using System.Xml;
    List<string> values= new List<string>();    
    XmlTextReader reader = new XmlTextReader ("books.xml");
    while (reader.Read()) 
    {
           switch (reader.NodeType) 
           {
                   while (reader.MoveToNextAttribute()) // Read the attributes.
                     values.add(reader.Value);
                   break;
         case XmlNodeType.Text: //Display the text in each element.
                     values.add(reader.Value);
                   break;
         case XmlNodeType. EndElement: //Display the end of the element.
          Console.WriteLine(">");
                   break;
           }
       } 
```

现在你有一个值列表。将其分配给模型，然后使用模型填充视图。

# python - 由 2 个以上元素组成的 Django 模型组

> ID：11279701
> 
> 赞同：1
> 
> 时间：2012-07-01T04:56:38.133
> 
> 标签：python, sql, django

我有一个包含用户 ID 及其分数的表。

```
eg. userid rating
    123    1
    123    2
    456    1
    789    5
    123    1 
```

我想要实现的是这样的汇总表：

```
rating 1 : 32 ratings by 20 ppl       
       2 : 37 ratings by 15 ppl 
       etc.. 
```

ppl 的数量应该是给出该评级的不同用户。

我已经了解了 Django 模型聚合方法，并且知道如何使用 count 等。但我无法想出能够实现这一目标的方法。

当然，我可以检索整个集合并在 python 中使用 for 循环来计数，但这不会有效。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:23:23.313

您正在寻找的 sql 是这样的：

```
SELECT rating, COUNT(rating) AS rc, COUNT(DISTINCT userid) FROM rating_tbl GROUP BY rating ORDER BY rc DESC; 
```

您还没有提供模型，实际上在 Django ORM、IMO 中表示 SQL 并不容易。最简单的方法是直接写，参考[文档](https://docs.djangoproject.com/en/1.4/topics/db/sql/#executing-custom-sql-directly)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:59:59.393

也许是这样的：

```
MyTable.objects.annotate(Count('rating')).order_by('rating_count').annotate(Count('user_id')) 
```

# box2d - 屏幕标题为（Box2D/AndEngine）时如何获得重力？

> ID：11279707
> 
> 赞同：1
> 
> 时间：2012-07-01T04:58:45.067
> 
> 标签：box2d, andengine, gravity

我正在使用 AndEngine 和 Box2d 开发游戏。我正在向一个物体施加一个力，以使其“高空”等于重力。我设置了场景，以便：

```
public void onAccelerationChanged(final AccelerationData pAccelerationData) {
        gravity = Vector2Pool.obtain(pAccelerationData.getX(), pAccelerationData.getY());
        this.mPhysicsWorld.setGravity(gravity);
        Vector2Pool.recycle(gravity);
    } 
```

现在我需要设置我的力量：

```
body.applyForce(new Vector2(0,-*gravity*), new Vector2(body.getWorldCenter())); 
```

如何获得重力值，以便在屏幕倾斜时将其作为力施加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:40:57.017

如果你想拥有一个不受重力影响的物体，你可以将它的身体设置为静态或动态。它更高效，避免了额外的处理。

顺便说一句，我猜你是空的，因为你已经用这条线回收了向量

```
Vector2Pool.recycle(gravity); 
```

**编辑：**

为什么你不简单地使用这样的东西？

```
public void onAccelerationChanged(final AccelerationData pAccelerationData) {
    gravity = Vector2Pool.obtain(pAccelerationData.getX(), pAccelerationData.getY());
    this.mPhysicsWorld.setGravity(gravity);
    body.applyForce(new Vector2(-pAccelerationData.getX(), -pAccelerationData.getY()), new Vector2(body.getWorldCenter()));
    Vector2Pool.recycle(gravity);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:14:17.457

我对 Box2D 扩展进行了一些更改，以包含来自最新版本的 Box2D 的 setGravityScale 方法。我把链接贴在了，

[我如何做一个身体忽略重力和引擎](https://stackoverflow.com/questions/11239548/how-do-i-make-a-body-ignore-gravity-andengine/12770735#12770735)

例如，让身体忽略重力呼叫，

```
Body.setGravityScale(0.0f); 
```

在您的情况下，Body 可能是动态的。关键是您不需要对需要抵抗重力的每个物体施加力。示例中执行此操作的代码取自 Box2D 2.2.1。

我解释了它是如何实现的。还为 GLES1 提供了下载。

希望这可以帮助。

# c# - 公平分享水果（动态编程）

> ID：11279710
> 
> 赞同：6
> 
> 时间：2012-07-01T04:59:10.017
> 
> 标签：c#, dynamic-programming

我很难弄清楚如何有效地解决这个问题。让我描述一下它是如何进行的：

“一位勤劳的妈妈为她的 3 个孩子 Amelia、Jessica 和 Bruno 买了几种营养价值不同的水果。两个女孩都超重，而且她们非常恶毒，总是让可怜的布鲁诺一无所有，所以他们的母亲决定分享食物以下方式：

*   阿米莉亚是最重的人获得最多的营养价值
*   杰西卡得到的金额等于或少于阿米莉亚
*   布鲁诺得到的数量等于或少于杰西卡，但你需要找到一种方法，在尊重规则的同时给他尽可能高的营养价值（A >= J >= B）”

注意：原问题描述不同，但思路是一样的，我不希望我的同学在google寻求帮助时找到这个帖子嘿嘿。

我老师给的一个测试用例如下：

```
The fruit list has the following values { 4, 2, 1, 8, 11, 5, 1}

Input:
7   -----> Number of Fruits
4 2 1 8 11 5 1 ----> Fruits Nutritional Values

Output:
1 11  ---->  One fruit, their nutritional values sum for Amelia
5     ---->  Position of the fruit in the list
3 11  ---->  Three fruits, their nutritional values sum for Jessica
1 2 6 ---->  Position of the fruits in the list
3 10  ---->  Three fruits, their nutritional values sum for Bruno
3 4 7 ---->  Position of the fruits in the list 
```

注意：我知道在孩子们中间有几种挖水果的方法，但只要遵循规则 A >= J >= B，这并不重要。

起初我做了一个算法来生成所有子集，每个子​​集都有它们的总和，以及正在使用的位置。该方法很快被丢弃，因为水果列表最多可以有 50 个水果，并且子集算法是 O(2^n)。我内存不足。

我的第二个想法是使用动态编程。在列标题中，我将有水果列表的位置，在行标题中相同，用字母很难解释，所以我将提前为前面的例子做表格 { 4, 2, 1, 8 , 11, 5, 1}。

```
 00 01 02 03 04 05 06 07
00 
01
02
03
04
05
06
07 
```

每次我们前进到下面的行时，我们都会添加位置 1,2,3,...,7

```
 00 01 02 03 04 05 06 07
00 00                     <---No positions in use  
01 04                     <---RowPosition 1 + Column Position(Column 0) (4+0)
02 06                     <---RowPosition 1 + RowPosition 2 + Column Position (4+2+0)
03 07                     <---RP(1) + RP(2) + RP(3) + CP(0) (4+2+1+0)
04 15                     <--- (4+2+1+8+0)
05 26
06 31
07 32                     <--- (4+2+1+8+11+5+1+0) 
```

现在您知道它是如何进行的，让我们添加第一行

```
 00 01 02 03 04 05 06 07
00 00 04 02 01 08 11 05 01   <-- Sum of RP + CP                     
01 04 00 06 05 12 15 09 05   <-- Sum of RP(0..1) + CP                      
02 06                     
03 07                     
04 15                     
05 26
06 31
07 32 
```

我放了 00，因为第一个位置已经在使用中。完成的表格将如下所示。

```
 00 01 02 03 04 05 06 07
00 00 04 02 01 08 11 05 01                      
01 04 00 06 05 12 15 09 05                         
02 06 00 00 07 14 17 11 07                 
03 07 00 00 00 15 18 12 08                  
04 15 00 00 00 00 26 20 16                    
05 26 00 00 00 00 00 31 27
06 31 00 00 00 00 00 00 32
07 32 00 00 00 00 00 00 00 
```

现在我们有了桌子。我将营养价值的总和除以孩子的数量，32/3 = 10.6667，上限为 11。我尝试检查 11，如果它在表中，我选择它并标记行的位置和使用的表的列，然后我会尝试再次检查 11，如果它在表中，我会选择它，否则查看 10 或 9 等，直到找到它。之后，我会将相应的位置标记为已使用，然后将未使用的位置相加以获得布鲁诺的果实。

我知道必须有更好的方法来做到这一点，因为我发现我的方法存在缺陷，该表只有几个子集的总和。所以也许这在一些测试用例中是有害的。也许是一个 3D Memoization Cube？，我认为它会消耗太多内存，而且我也有 256MB 的限制。

哇，我没有意识到我输入了这么多 xX 我希望我不会得到很多 tl；博士。任何帮助/指南将不胜感激：D

编辑：我编写了生成表格的代码，以防有人想尝试。

```
static void TableGen(int[] Fruits)
    {
        int n = Fruits.Length + 1;
        int[,] memo = new int[n, n];

        for (int i = 1; i < n; i++)
        {
            memo[0, i] = Fruits[i - 1]; 
            memo[i, 0] = memo[i - 1, 0] + Fruits[i - 1]; 

            for (int j = i + 1; j < n; j++)
                memo[i, j] = memo[i, 0] + Fruits[j - 1];               
        }

        for (int i = 0; i < n; i++)
        {
            for (int j = 0; j < n; j++)
                Console.Write("{0:00} ", memo[i, j]);

            Console.WriteLine();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:28:59.290

一种稍微计算密集型的方法是以循环方式分配水果，从阿米莉亚的最高营养价值开始。
从那里开始，逐步遍历 amelia 持有的最低营养价值的水果，并尝试以下两种组合：(a) 将水果交给 jessica，或 (b) 将水果与 jessica 持有的水果交换，同时仍然满足规则。然后对 jessica 和 bruno 应用相同的方法。重复这 2 个循环，直到不再有交换或给予是可能的。
稍微棘手但可能更快的方法是同时给予/交换给 jess/bruno。对于 A 持有的每 2 个水果，您将有 4 个选项可供尝试，如果您同时尝试平衡 J & B，则可以选择更多。

对于更快的算法，您可以尝试在数学堆栈交换站点上询问，因为这在很大程度上是一个集合论问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:53:24.820

```
 for(i = 0; i < count; i++)
    {
    currentFruit=Fruits.Max();

    if(Amelia.Sum() + currentFruit < Jessica.Sum() + currentFruit)
        {
        Amelia.Add(currentFruit);
        Fruits.Remove(currentFruit);
        continue;
        }
    if(Jessica.Sum() + currentFruit < Bruno.Sum() + currentFruit)
        {
        Jessica.Add(currentFruit);
        Fruits.Remove(currentFruit);
        continue;
        }
    Bruno.Add(currentFruit);
    Fruits.Remove(currentFruit);
    } 
```

这适用于具有相对相似值的水果。如果您添加的水果的价值大于所有其他水果的总和（我偶然做过一次），它会有点崩溃。

# regex - 正则表达式在响应断言和正则表达式提取器 Jmeter 中失败

> ID：11279713
> 
> 赞同：4
> 
> 时间：2012-07-01T05:00:11.750
> 
> 标签：regex, jmeter

我的测试中的响应数据有这一行：

```
<head><title>
    My Title
</title><meta charset 
```

我在 Jmeter 的内置正则表达式测试器中检查了这个正则表达式，它找到了标题。

```
(?m)(?is)<title>\n\tMy Title\n</title> 
```

但是，当我将它用作响应断言时，断言总是失败。

我已经尝试了“应用到”部分中的所有设置。为“要测试的响应字段”选择了“文本响应”。我为“模式匹配规则”选择了“包含”。

我对正则表达式提取器也有一个非常相似的问题 - 选定的表达式在测试器中通过，但在正则表达式提取器中失败。

我相信这可能与响应的多线性质有关。

任何指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T09:39:36.423

尝试使用：

`(?<=<title>\s*)(\S.+\S)(?=\s*</title>)`查找任何标题

`(?<=<title>\s*)(My Title)(?=\s*</title>)`查找“我的标题”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:59:48.783

尝试以下操作：

```
Regular Expression: <title>(.+?)</title>
Template: $1$
Match: 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T09:04:29.193

尝试改用[xpath](http://www.w3.org/TR/xpath/)。

使用 expression like`//title/text()`和[XPath Extractor](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor) - 来提取标题值， - 和 expression like和[XPath Assertion](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Assertion)`//title[text()='My Title']`一起使用。

在这两种情况下，您都必须确保选中 Use Tidy（容错解析器）选项 - 因为您正在解析 HTML（不是 XML！..）响应。

# c++ - Nullptr 并检查指针是否指向有效对象

> ID：11279715
> 
> 赞同：51
> 
> 时间：2012-07-01T05:00:33.130
> 
> 标签：c++

在我从未听说过智能指针的几个旧代码项目中，每当我需要检查指针是否仍然指向有效对象时，我总是会做这样的事情......

```
object * meh = new object;
if(meh) 
    meh->member; 
```

或者当我需要安全地删除对象时，像这样

```
if(meh)
{
    delete meh;
    meh = 0;
} 
```

好吧，现在我已经了解了在布尔表达式中使用对象和指针可能产生的问题，这两种方法都带有文字数字，很难：。现在，我还了解到了 C++ 中一个不那么新但非常酷的特性，即`nullptr`关键字。但现在我很好奇。

我已经完成并修改了我的大部分代码，例如，在删除我现在编写的对象时

```
if(meh)
{
    delete meh;
    meh = nullptr;
} 
```

现在我想知道布尔值。当你把一个 int 说成这样的 if 语句时，

```
int meh;
if(meh) 
```

然后它会隐式检查零，而无需您编写它。

```
if(meh == 0) // does the exact same check 
```

现在，C++ 会为指针做同样的事情吗？如果将这样的 char * 传递给 if 语句？

```
char * meh;
if(meh) 
```

那么它会隐含地将它与nullptr进行比较吗？由于我已经像这样编写这些 if 有多久了，此时通过键入 if (object *) 然后调用其成员来检查指针是否有效在这一点上是第二天性。如果这不是功能，为什么不呢？实施起来太难？将通过删除另一种可能会弄乱代码的小方法来解决一些问题。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-01T05:08:35.437

在 C 中，任何不为 0 的都是真的。所以，你当然可以使用：

```
if (ptrToObject) 
    ptrToObject->doSomething(); 
```

安全地取消引用指针。

C++11 稍微改变了游戏，`nullptr_t`它的类型`nullptr`是实例；的表示`nullptr_t`是特定于实现的。因此，编译器可以随心所欲地定义`nullptr_t`。它只需要确保它可以对 a`nullptr_t`到不同类型的强制转换实施适当的限制——允许使用*布尔值*——并确保它可以区分 a`nullptr_t`和 0。

只要编译器遵循 C++11 语言规范，So`nullptr`就会正确且隐式地转换为*布尔值。* `false`上面的代码片段仍然有效。

如果删除引用的对象，则不会发生任何变化。

```
delete ptrToObject;
assert(ptrToObject);
ptrToObject = nullptr;
assert(!ptrToObject); 
```

* * *

> 由于我已经像这样编写这些 if 有多久了，此时通过键入 if (object *) 然后调用它的成员来检查指针是否在使用之前有效是第二天性。

***不***，请保持正确的对象图（最好使用唯一/智能指针）。正如所指出的，没有办法确定一个不是`nullptr`指向有效对象的指针。无论如何，您有责任维护生命周期。这就是指针包装器首先存在的原因。

事实上，由于[共享](https://en.cppreference.com/w/cpp/memory/shared_ptr)指针和[弱](https://en.cppreference.com/w/cpp/memory/weak_ptr)指针的生命周期定义明确，它们具有语法糖，可让您以您希望使用裸指针的方式使用它们，其中有效指针具有值，而所有其他指针是`nullptr`：

**共享**

```
#include <iostream>
#include <memory>

void report(std::shared_ptr<int> ptr) 
{
    if (ptr) {
        std::cout << "*ptr=" << *ptr << "\n";
    } else {
        std::cout << "ptr is not a valid pointer.\n";
    }
}

int main()
{
    std::shared_ptr<int> ptr;
    report(ptr);

    ptr = std::make_shared<int>(7);
    report(ptr);
} 
```

**虚弱的**

```
#include <iostream>
#include <memory>

void observe(std::weak_ptr<int> weak) 
{
    if (auto observe = weak.lock()) {
        std::cout << "\tobserve() able to lock weak_ptr<>, value=" << *observe << "\n";
    } else {
        std::cout << "\tobserve() unable to lock weak_ptr<>\n";
    }
}

int main()
{
    std::weak_ptr<int> weak;
    std::cout << "weak_ptr<> not yet initialized\n";
    observe(weak);

    {
        auto shared = std::make_shared<int>(42);
        weak = shared;
        std::cout << "weak_ptr<> initialized with shared_ptr.\n";
        observe(weak);
    }

    std::cout << "shared_ptr<> has been destructed due to scope exit.\n";
    observe(weak);
} 
```

* * *

> 现在，C++ 会为指针做同样的事情吗？如果将这样的 char * 传递给 if 语句？

所以回答这个问题：用*裸*指针，**没有**. 使用*包装*的指针，**是**的。

[伙计们，把你的指针包起来。]

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-08T00:25:08.527

无法测试指针是否指向有效对象。如果指针不为空但未指向有效对象，则使用指针会导致未定义的行为。为了避免这种错误，你有责任小心被指向的对象的生命周期；智能指针类有助于完成这项任务。

如果是原始指针，则and和`meh`之间没有任何区别。如果指针不为空，它们都会继续进行。`if (meh)``if (meh != 0)``if (meh != nullptr)`

存在从文字`0`到的隐式转换`nullptr`。

# android - Android Gps 路由系统

> ID：11279720
> 
> 赞同：2
> 
> 时间：2012-07-01T05:01:42.340
> 
> 标签：android, routing, gps, location

我正在开发一个可以定位用户的 android 应用程序（假设用户在路上），该应用程序将为用户创建最短的路线，以便能够前往用户选择的目的地。定位用户不是问题，因为这里有一个 API：

[http://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

所以这就是问题所在。道路、交叉口及其距离可以通过代码中的变量进行映射或声明，但我的问题是到目前为止我发现的 GPS API 只会返回经度和纬度，而不是道路名称或可用于映射的图表最短路径。我需要关于如何使用我们现在拥有的给定 Android GPS 资源创建最短路线的帮助。

假设：3G 或 wifi 连接始终可用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:05:27.123

查看我们的开源 OpenTripPlanner for Android 应用程序中的代码（在 Apache 2.0 下获得许可）： [https ://github.com/CUTR-at-USF/OpenTripPlanner-for-Android/wiki](https://github.com/CUTR-at-USF/OpenTripPlanner-for-Android/wiki)

有关该应用程序的完整摘要，请参阅 wiki，但这里有一个简短的描述：

OTP for Android 使用开源[OpenTripPlanner 服务器实例通过调用](https://github.com/openplans/OpenTripPlanner/wiki/)[OTP 服务器 REST API](http://www.opentripplanner.org/apidoc/)来规划多模式路线（公共汽车、自行车和步行）。一旦从服务器检索到旅行计划，它就会显示给用户。

OTP 使用[OpenStreetMap 数据](http://www.openstreetmap.org/)获取道路/人行道/自行车道信息，使用[通用交通信息规范](https://developers.google.com/transit/gtfs/reference)数据获取交通信息。

# html - HTML 表格：保持居中对齐，与浏览器宽度无关

> ID：11279722
> 
> 赞同：3
> 
> 时间：2012-07-01T05:02:29.370
> 
> 标签：html, css, html-table

这是上一个 SO 问题[Anchoring CSS Repeating Background Image](https://stackoverflow.com/questions/11260986/anchoring-css-repeating-background-image)的后续，但差异很大，可以作为一个单独的问题处理。

jsFiddle [http://jsfiddle.net/By2xj/](http://jsfiddle.net/By2xj/)演示了这个概念。我有一个横幅图像（中心），然后需要在左右重复图像，这将根据浏览器窗口的宽度显示和重复。附带条件是左右图像必须锁定在中心横幅图像的边缘。如果您展开 jsFiddle Result 窗口，您可以看到这种效果 - 左右重复图像始终保持锁定在中心横幅图像的一侧并从该点展开。

所以这一切都有效，但我使用了一个表格来实现这个效果，因为在前面的 Stack Overflow 问题中建议的 CSS 并没有完全工作，并且有点依赖于浏览器，特别是不使用旧浏览器。

使用这个基于表格的解决方案，我希望始终保持中心横幅图像居中，即使浏览器宽度小于横幅。如果您减小 jsFiddle Result 窗口的大小，您会看到当浏览器宽度小于横幅时，横幅会保持左对齐而不是居中。

所以我的问题是，即使浏览器宽度小于横幅宽度（并包含表格单元格），我如何才能始终保持中心横幅中心对齐（或者更准确地说，整个表格中心对齐）？

 `* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T05:45:56.080

这有点作弊，但我希望你在找什么。

[http://jsfiddle.net/By2xj/8/](http://jsfiddle.net/By2xj/8/)

发生的事情是，我在那个中间单元格中创建了一个 div，然后定位绝对，然后将其居中到屏幕。无论浏览器窗口的大小，该 div 都将始终居中。

作为记录：

```
<table id="banner-table">
    <td id="left-image"></td>
    <td id="center-image"><div></div></td>
    <td id="right-image"></td>
</table>​ 
```

CSS：

```
 #banner-table {

    width: 100%;
    height: 200px;
    padding: 0;
    margin: 0;
    border-collapse: collapse;
    table-layout: fixed;
}

#left-image {
    background-image: url(http://www.dummyimage.com/100x200/ff0303/ffffff.png&text=Left);
    background-position: right;
    background-repeat: repeat-x;
}

#center-image {

    width:400px;

}
#center-image div {
    top:0; left:50%;
    margin-left:-200px;
    width:400px;
    height:200px;

    position:absolute;
    background-image: url(http://www.dummyimage.com/400x200/0021fa/ffffff.png&text=Center);
    background-position: center;
    background-repeat: no-repeat;
}
#right-image {
    background-image: url(http://www.dummyimage.com/100x200/1f9900/ffffff.png&text=Right);
    background-position: center center;
    background-repeat: repeat-x;}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T05:56:37.090

您可以放弃桌子并使用以下内容：

[http://jsfiddle.net/bryandowning/f2unW/](http://jsfiddle.net/bryandowning/f2unW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T08:54:17.683

您需要编辑您的 HTML 代码，如下所示：

```
<table id="banner-table">
    <td id="left-image"></td>
    <td id="center-image"><div></div></td>
    <td id="right-image"></td>
</table>​ 
```

首先，您可以在没有任何 CSS 文件的情况下实现此功能。然后您可以根据需要自定义代码。`

# php - For循环创建连续日期

> ID：11279726
> 
> 赞同：-1
> 
> 时间：2012-07-01T05:03:39.197
> 
> 标签：php, datetime, for-loop

`mktime()`我在 PHP中使用日期函数编写了一段代码：

```
mktime(0,0,0,date("m"),date("d"),date("y")) 
```

我得到了想要的结果，但我希望接下来的五个连续日期使用 for 循环。

解决这个问题的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:06:58.347

试试这个`strtotime`功能

```
for($i=0;$i<5;$i++) {
  strtotime("+" . $i . " day");
} 
```

您也可以使用自定义日期来执行此操作：

```
for($i=0;$i<5;$i++) {
  strtotime("+" . $i . " day", mktime(0,0,0,date("m"),date("d"),date("y")));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T05:22:01.117

```
sscanf(date('n j Y'),'%d %d %d',$m,$d,$y);
for ($i=0;$i<5;$i++)
{
    echo date('m/d/Y',mktime(0,0,0,$m,$d+$i,$y)).'<br />';
} 
```

结果

```
07/01/2012
07/02/2012
07/03/2012
07/04/2012
07/05/2012 
```

*   [扫描仪](http://php.net/manual/en/function.sscanf.php)
*   [时间](http://php.net/manual/en/function.mktime.php)

# java - 字段必须保密，但子类必须覆盖使用该字段的方法？

> ID：11279727
> 
> 赞同：1
> 
> 时间：2012-07-01T05:04:09.340
> 
> 标签：java

我有一个设计问题：

*   问题类：有一个问题和答案（字符串）
*   TextQuestion 类：普通文本问答
*   NumberQuestion 类：问题（字符串）、答案（数字 - 整数、浮点数...），并使用 epsilon 值检查答案

但我对 NumberQuestion 有疑问。我必须选择正确的答案，将其转换为数字，并与用户的答案进行比较。那么我怎样才能得到答案呢？使用 getter 方法并不安全。还是我的设计不好？我该如何改变？

> ```
> public abstract class Question {
>   private String question;
>   private String answer;
> 
>   public Question(String question, String answer) {
>       this.question = question;
>       this.answer = answer;
>   }
> 
>   public boolean checkAnswer(String yourAnswer) {
>       // default implementation
>   }
> }
> 
> class TextQuestion extends Question {
>   // Answer and Question is always string type, it's OK, not problem
> }
> 
> class NumberQuestion extends Question {
>   // Question is String, OK
>   // Answer: input is number, accept approximately
>   // Ex: Question: 1/3 = ?
>   //     Answer: 0.3 or 0.33 or 0.333 are accepted (using an Epsilon value)
> 
>   // so must override checkAnswer
>   public boolean checkAnswer(String yourAnswer) {
>       // HOW can I do?
>   }
> } 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T05:31:43.523

我不明白为什么需要对子类（或任何客户端代码，就此而言）隐藏答案。客户端代码肯定首先需要知道答案才能创建一个`TextQuestion`或`NumberQuestion`实例。

您应该从类中抽象出测试的逻辑以及答案类型`Question`：

```
public abstract class Question<AnswerType> {
  private String question;
  private AnswerType answer;

  public Question(String question, AnswerType answer) {
    this.question = question;
    this.answer = answer;
  }

  public abstract boolean checkAnswer(AnswerType yourAnswer);

  protected AnswerType getAnswer() {
    return answer;
  }
}

class TextQuestion extends Question<String> {
  public TextQuestion(String question, String answer) {
    super(question, answer);
  }

  public boolean checkAnswer(String yourAnswer) {
    return answer.equals(yourAnswer);
  }
}

class NumberQuestion extends Question<Double> {
  private double epsilon;

  public NumberQuestion(String question, Double answer, double epsilon) {
    super(question, answer);
    this.epsilon = epsilon;
  }

  public boolean checkAnswer(Double yourAnswer) {
    return Math.abs(getAnswer() - yourAnswer) < epsilon;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T05:20:37.833

如果您的答案可以有不同的类型，您也可以在抽象类中使用泛型。

```
public abstract class Question<T> {
    private final String question;
    protected final T answer;

    public Question(String question, T answer) {
        this.question = question;
        this.answer = answer;
    }

    //Default implementation
    public boolean checkAnswer(T yourAnswer) {
        return answer.equals(yourAnswer);
    }
} 
```

当你定义子类时：

```
class NumberQuestion extends Question<BigDecimal> {
    ...
    private final BigDecimal epsilon;

    public NumericQuestion(String question, BigDecimal answer, BigDecimal epsilon) {
        super(question, answer);

        this.epsilon = epsilon;
    }

    @Override
    public boolean checkAnswer(BigDecimal yourAnswer) {
        BigDecimal result = this.answer.subtract(yourAnswer).abs();

        return (result.compareTo(epsilon) == -1); // check whether result < epsilon
    }
} 
```

顺便说一句，使用 BigDecimal 进行浮点计算比使用 double 更好。有很多关于这个的好文章。如果对您感兴趣，您可以“谷歌”这个问题。

如果您需要为浮点数设置比例，您可以使用大小数轻松完成此操作，例如：

```
result = result.setScale(5); 
```

并且要小心，因为 BigDecimal 类是不可变的（不完全，但这是另一个问题），并且当您尝试更改它的状态时会返回新实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T05:11:59.240

我不确定您是否熟悉泛型类，但这在这种情况下是合适的。你可以谷歌它。:-)

如果您不想这样做，您可以随时将两者转换`yourAnswer`为`this.answer`相同的类型，然后您可以找到绝对差异并确保它们低于特定阈值。

# android - 标志动画 - 不知道从哪里开始

> ID：11279736
> 
> 赞同：1
> 
> 时间：2012-07-01T05:07:28.437
> 
> 标签：android, opengl-es, android-animation

当我的徽标首次出现在我的 Android 应用程序屏幕上时，我正在尝试为我的徽标制作一个很酷的小动画。

我完全不知道如何实现这个想法，OpenGL，制作视频并将其导入活动，其他选项？

这是我想要完成的事情： ![在此处输入图像描述](../Images/1015dc64353b8042aa7a4ac8ab519e86.png)

第 1 步：开始三角形的底线第 2 步：开始上下并连接第 3 步：让我的自定义徽标淡入三角形

我是在努力学习如何做到这一点，还是让我的徽标显示为图像更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:35:58.407

一般来说，有两种选择：

*   您可以以编程方式执行此操作。使用基于时间的状态机来绘制三角形。如果您使用的是 android 引擎（andengine、libdgdx），那么有一些抽象可以帮助您处理“基础设施”代码。

*   您可以在 3D 建模程序中制作动画模型，并导出动画网格或一系列图像。

最好现在只显示一张图片，然后把时间花在应用程序本身上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T07:59:19.613

在这种情况下，最容易为我创建一个 GIF。

# c++ - opencv中以下方法的含义是什么？

> ID：11279742
> 
> 赞同：4
> 
> 时间：2012-07-01T05:08:33.867
> 
> 标签：c++, image-processing, opencv, javacv

我正在使用 javacv 进行对象检测项目，因为我经历了几个用于检测矩形的代码示例，我发现所有大多数代码示例都在这些类中包含以下方法。

请有人解释一下这种方法的含义或用法。

```
double angle( CvPoint* pt1, CvPoint* pt2, CvPoint* pt0 )
{
    double dx1 = pt1->x - pt0->x;
    double dy1 = pt1->y - pt0->y;
    double dx2 = pt2->x - pt0->x;
    double dy2 = pt2->y - pt0->y;
    return (dx1*dx2 + dy1*dy2)/sqrt((dx1*dx1 + dy1*dy1)*(dx2*dx2 + dy2*dy2) + 1e-10);
} 
```

[这](http://download.andol.info/CombinedObjectsRecognition.cpp)就是那个方法的来源。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T05:29:30.507

你可以猜到，这计算两个向量 (pt1, pt0) , (pt2, pt0) 的夹角的余弦

公式是这样的： `Cos(theta) = DotProduct(a,b) / (length(a) * length(b))`

![在此处输入图像描述](../Images/e94300b5ea82ad17003bc1d29ce82b17.png)

对于最后一部分`1e-10`，这可能是为了避免在零长度向量上除以零误差。

# php - 通过 PHP 将 MySQL 表中的数据转换为 XML

> ID：11279744
> 
> 赞同：0
> 
> 时间：2012-07-01T05:08:58.937
> 
> 标签：php, mysql, xml

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我正在尝试遵循本教程：

> [](https://developers.google.com/maps/articles/phpsqlsearch_v3)***使用 PHP、MySQL 和 Google Maps Google Geo API 团队*[**创建商店定位器；**](https://developers.google.com/maps/articles/phpsqlsearch_v3)
> *2009 年 8 月***

 **我已经到了拥有 MySQL 位置数据表的地步。为了我的目的，我更改了本教程中的代码元素。我只是想从 MySQL 表中提取所有数据并将其转换为 XML，以便 Google Maps API 可以读取它。

不幸的是，当我运行下面的代码时，浏览器页面没有加载并收到以下错误：

> 警告：无法修改标头信息 - 标头已由第 43 行 .../getdata/genxml.php 中的（输出开始于 .../getdata/genxml.php:8）发送

这可能是有问题的行：

```
header("Content-type: text/xml"); 
```

这是整个代码块。我犯了什么错误？谢谢！

```
<?php
require("phpsqlsearch_dbinfo.php");

//Get parameters from URL
//$center_lat = $_GET["lat"];
//$center_lng = $_GET["lng"];

// Start XML file, create parent node
$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node);

// Opens a connection to a mySQL server
$connection=mysql_connect (localhost, $username, $password);
if (!$connection) {
  die("Not connected : " . mysql_error());
}

// Set the active mySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die ("Can\'t use db : " . mysql_error());
}

// Search the rows in the markers table
$query = sprintf("SELECT * FROM markers WHERE 1");
$result = mysql_query($query);

$result = mysql_query($query);
if (!$result) {
  die("Invalid query: " . mysql_error());
}
// **Below is line 42\. The error may be here.** 
header("Content-type: text/xml");

// Iterate through the rows, adding XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  $node = $dom->createElement("marker");
  $newnode = $parnode->appendChild($node);
  $newnode->setAttribute("id", $row['id']);
  $newnode->setAttribute("address", $row['address']);
  $newnode->setAttribute("lat", $row['lat']);
  $newnode->setAttribute("lng", $row['lng']);
  $newnode->setAttribute("bt", $row['bt']);
  $newnode->setAttribute("dt", $row['dt']);
  $newnode->setAttribute("br", $row['br']);
  $newnode->setAttribute("bth", $row['bth']);
  $newnode->setAttribute("sqft", $row['sqft']);
  $newnode->setAttribute("lp", $row['lp']);
  $newnode->setAttribute("url", $row['url']);
  $newnode->setAttribute("dom", $row['dom']);
}
echo $dom->saveXML();

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:55:01.327

当您已经发送要输出的内容然后尝试发出对 header() 的调用时，就会给出您发布的错误。

*在调用 header() 之前，有些东西*正在输出，你需要找到它。它可能在 phpsqlsearch_dbinfo.php 源文件中，或者它可能在您的`<?php`标记之上，这是一个常见的错误。（或者可能在`<?php`标签上方或`?>`phpsqlsearch_dbinfo.php 中的标签之后。）

Another thing that I've seen as a problem before is that some editors don't translate newlines and carriage returns correctly, which can be a problem. If you're editing the file in Notepad, use a different editor that supports newlines and carriage returns correctly, such as [PSPad](http://www.pspad.com/) (freeware) or [UltraEdit](http://www.ultraedit.com/) (commercial), and make sure that the file is saved in Unix format, *not* DOS format. Or if you edit it at a Unix command prompt using something like vim, it will be immediately obvious if you have extra carriage returns in your source code.

But like I said, that error is explicitly telling you that *something* has already been output to the browser when you try to make the header() call. The header() call is only legal when nothing (except possibly other header() calls) has gone before, including any white space or html markup.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T05:37:31.943

`<?php`删除标签前的所有空格和字符**

# javascript - Magento 后端：如何添加 jscolor？

> ID：11279746
> 
> 赞同：0
> 
> 时间：2012-07-01T05:09:56.190
> 
> 标签：javascript, magento, backend, color-picker

我正在尝试在 Magento 的后端添加一个颜色选择器。到目前为止，我可能已经上课了。（见下文）。但我不知道 Data.php 文件应该是什么样子。有人帮助或给我一个例子吗？

问候

```
class Namespace_Module_Block_System_Config_Form_Field_Colorpicker extends Mage_Adminhtml_Block_System_Config_Form_Field
{
protected function _getElementHtml(Varien_Data_Form_Element_Abstract $element)
{
    $url  = Mage::getBaseUrl('js');
    $element->addClass("color");
    $output = "";
    if(!defined("_LOADED_JSCOLOR_")){
        $jspath = $url.'jscolor/jscolor.js';
        $output .= '<script type="text/javascript" src="'.$jspath.'"></script>';
        define("_LOADED_JSCOLOR_",1);
    }
    $output .= $element->getElementHtml();
    return $output;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T07:39:19.357

您可以将 js 文件添加到布局更新：

```
<action method="addJs"><file>%folder%/%file%.js</file></action> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:14:02.687

如果我可以让管理配置字段使用 JSColor，我正在构建的模块会很棒。我遇到了这篇文章，查看了 JSColor 的简单设置，并且知道，这几乎已经内置到 Magento 中（至少从版本 1.7.0.2 开始）。

如果您有管理布局更新文件，只需包括：

```
<adminhtml_system_config_edit>
    <reference name="head">
        <action method="addJs"><file>jscolor/jscolor.js</file></action>
    </reference>
</adminhtml_system_config_edit> 
```

在对此进行测试时，我发现 JSColor 脚本已经包含在 1.7.0.2 包中。`/js/jscolor/jscolor.js`.

从那里开始，就像将`color`类分配给输入表单字段一样简单。我不确定这是否是有意的，但这就像`<validate>`在文件中添加一个节点一样简单`system.xml`。

```
<fields>
    <bg>
        <label>Background Color</label>
        <frontend_type>text</frontend_type>
        <validate>color</validate>
        <sort_order>1</sort_order>
        <show_in_default>1</show_in_default>
        <show_in_website>1</show_in_website>
        <show_in_store>1</show_in_store>
    </bg>
</fields> 
```

万岁！无需自定义...无需自定义`<frontend_type>`...无需...包含脚本，`color`通过`<validate>`节点为其提供一个类，您就完成了！

# jquery - jquery 滑动 ul li

> ID：11279748
> 
> 赞同：0
> 
> 时间：2012-07-01T05:10:18.023
> 
> 标签：jquery, list, menu, slide

我正在尝试使用 jquery 制作一个简单的导航菜单，您将鼠标悬停在其中一个 li 上，然后在其下方滑入一个 sub ul li。我可以让它与 slideToggle() 一起工作就好了，但我一辈子都不能让幻灯片工作。（我正在通过单击进行调试，但需要将其悬停）。Javascript：

```
<script type="text/javascript">
    // Wait for the page and all the DOM to be fully loaded
    $(document).ready(function() {
        // Add the 'hover' event listener to our drop down class
        $(".dropdown").click(function() {
            // When the event is triggered, grab the current element 'this' and
            // find it's children '.sub_navigation' and display/hide them
            //$(this).find('.sub_navigation').slideToggle(); 
            $(this).find(".sub_navigation").show("slide", { direction: "left" }, 1000); 
        });
    });
</script> 
```

CSS

```
ul {
    margin:0;
    padding:0;
    list-style-type:none;
    min-width:200px;
} 
ul#navigation {
    float:left;
} 
ul#navigation li {
    float:left;
    border:1px black solid;
    min-width:200px;
} 
ul.sub_navigation {
    position:absolute;
    display:none;
    overflow: hidden;
} 
ul.sub_navigation li {
    clear:both;
    margin-left: 9999px;
    float: left;
} 
a,a:active,a:visited {
    display:block;
    padding:10px;
} 
```

列表

```
<div id="menu">
    <ul id="navigation">
        <li class="dropdown"><a href="javascript:ajaxpage('home.php', 'body');">Home</a></li>
        <li class="dropdown"><a href="javascript:ajaxpage('projects.php', 'body');">Projects</a>
            <ul class="sub_navigation">
                <!-- pull projects with P H P -->
                <?php
                    require('config/config.php');
                    //pull all data from projects table
                    $result = mysql_query("SELECT * FROM projects") or die('Unable to query!');
                    $num_results = mysql_num_rows($result);
                    //make sure there is at least 1 project 
                    if ($num_results > 0) {
                            //loop to catch each project in database
                            while ($row = mysql_fetch_array($result)) {
                            //return in list each project name
                            ?>
                            <li><a href="openproject.php?id=<? echo $row['id']; ?>"><? echo $row['name']; ?></a></li>
                            <?php
                            }                             
                    } else {
                    //return to add a project
                    ?>
                    <li><a href="createproj.php">Add a project</a></li>
                    <?php
                    }
                    ?>
                </ul>
            </li>
            <li class="dropdown"><a href="javascript:ajaxpage('pubfiles.php', 'body');">Public Files</a></li>
            <li class="dropdown"><a href="javascript:ajaxpage('users.php', 'body');">Users</a></li>
            <li class="dropdown"><a href="javascript:ajaxpage('settings.php', 'body');">Settings</a></li>
            <!-- only pull if admin and logged in per P H P session-->
            <li class="dropdown"><a href="javascript:ajaxpage('admin.php', 'body');">Admin</a></li>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:18:39.730

试试这个：

> .show( [持续时间] [, 缓动] [, 回调] )

```
$(".dropdown").hover(function() {
       $(this).find(".sub_navigation").show("slow");  
       //or $(this).find(".sub_navigation").slideDown(); 
   },function() {
       $(this).find(".sub_navigation").hide('slow');    
       // or $(this).find(".sub_navigation").slideUp(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T05:25:12.597

您的代码`show()`签名错误： http: [//api.jquery.com/show/](http://api.jquery.com/show/)

它可以是：
`.show()`
或
`.show( duration [, callback] )`
或
`.show( [duration] [, easing] [, callback] )`

在您的情况下，您可以使用[`animate()`](http://api.jquery.com/animate/)水平滑动：

```
$(this).find(".sub_navigation").animate({ width: "toggle" }, 1000); 
```

**编辑：**
如果您使用 jQuery UI 效果，语法是正确的。确保您已在页面中包含 jQuery UI .js 文件，并且该文件是使用效果模块构建的。

# ios - 使旧文件与 ARC iOS 兼容

> ID：11279750
> 
> 赞同：1
> 
> 时间：2012-07-01T05:11:51.620
> 
> 标签：ios, automatic-ref-counting

为了使旧文件能够在 ARC 下编译，请在 Build 阶段设置开关 -fno-objc-arc。

但只有 .m 文件列出，我可以添加 -fno-objc-arc。

但我也有一些导致 ARC 错误的 .h 文件。我需要将该开关设置为那些 .h 文件。但我没有在构建阶段看到它们。

那么，如何设置 .h 文件的开关？

这是 .h 文件的示例

```
\
__object__=__array__->arr[0]; for(NSUInteger i=0, num=__array__->num; i<num; i++,   __object__=__array__->arr[i])   \

typedef struct ccArray {
    NSUInteger num, max;
    id *arr;
} ccArray;

/** Allocates and initializes a new array with specified capacity */
static inline ccArray* ccArrayNew(NSUInteger capacity) {
    if (capacity == 0)
            capacity = 1; 

    ccArray *arr = (ccArray*)malloc( sizeof(ccArray) );
    arr->num = 0;
    arr->arr =  (id*) malloc( capacity * sizeof(id) );
    arr->max = capacity;

    return arr;
}

 static inline void ccArrayRemoveAllObjects(ccArray *arr);

 /** Frees array after removing all remaining objects. Silently ignores nil arr. */
 static inline void ccArrayFree(ccArray *arr)
{
    if( arr == nil ) return;

    ccArrayRemoveAllObjects(arr);

    free(arr->arr);
    free(arr);
 }

 /** Doubles array capacity */
  static inline void ccArrayDoubleCapacity(ccArray *arr)
 {
    arr->max *= 2;
    id *newArr = (id *)realloc( arr->arr, arr->max * sizeof(id) );
    // will fail when there's not enough memory
     NSCAssert(newArr != NULL, @"ccArrayDoubleCapacity failed. Not enough memory");
    arr->arr = newArr;
}

  /** Increases array capacity such that max >= num + extra. */
   static inline void ccArrayEnsureExtraCapacity(ccArray *arr, NSUInteger extra)
 {
        while (arr->max < arr->num + extra)
            ccArrayDoubleCapacity(arr);
}

/** shrinks the array so the memory footprint corresponds with the number of items */
static inline void ccArrayShrink(ccArray *arr)
{
NSUInteger newSize;

    //only resize when necessary
    if (arr->max > arr->num && !(arr->num==0 && arr->max==1))
    {
            if (arr->num!=0) 
            {
                    newSize=arr->num;
                    arr->max=arr->num; 
            }
            else 
            {//minimum capacity of 1, with 0 elements the array would be free'd by realloc
                    newSize=1;
                    arr->max=1;
            }

            arr->arr = (id*) realloc(arr->arr,newSize * sizeof(id) );
            NSCAssert(arr->arr!=NULL,@"could not reallocate the memory");
    }
} 
```

(id*) 导致问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:04:56.873

您可以将 .h 文件拆分为 .h/.m 文件对吗？这样，您可以将方法体放在 .m 文件中，用 . 编译它`-fno-objc-arc`，并随意包含 .h 文件。

# reporting-services - SSRS 从 Live 服务器创建开发环境

> ID：11279756
> 
> 赞同：0
> 
> 时间：2012-07-01T05:12:58.477
> 
> 标签：reporting-services, development-environment

我继承了一个实时 SSRS 服务器，并被要求修改那里的许多报告。

有没有一种快速的方法可以将所有报告/数据源“导出”到本地实例，以便我可以使用 BIDS 对其进行开发？

例如，我可以从生产中复制 ReportServer 数据库吗？我还需要做什么？

我希望能够拥有所有内容的开发副本，其中 DataSources 指向生产数据库的副本，但名称相同。因此，我可以重新编写报告并重新定义本地所需的任何 SP，然后只需将新的 RDL 与 ALTER SP 脚本一起部署到服务器。

这是可能的，甚至是明智的！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:58:38.763

就个人而言，对于您在评论中提到的数量（30 个 RDL 和 3 个数据库），我不建议将整个报告设置从生产环境自动克隆到本地。相反，我建议以下内容：

**报告**
转到您的报告服务器的 Web 前端（通常是`http://yourserver/reports`）。找到每个报告，打开它，然后在“*属性*”选项卡上单击“*编辑*”按钮。此按钮不会执行您可能期望的操作（在浏览器中编辑报告），而是为您提供 RDL 文件的下载。将所有 RDL 文件保存在磁盘上的一个文件夹中。

手动下载 30 份报告可能需要一个小时，最多。这可能会击败大多数自动化方法。而且由于您应该只需要执行一次此步骤...

**数据库**
从这个问题上看并不完全清楚，但是如果您只有*生产*数据库并且还没有[DTAP](http://en.wikipedia.org/wiki/Development,_testing,_acceptance_and_production)设置，那么现在可能是开始的好时机。您可以在测试服务器或可能在您的开发环境中托管 3 个生产数据库的克隆。请注意，架构在这里很重要（应该与生产相同），数据不必完全是最新的。

或者，您可以跳过这一点并针对生产数据库开发报告，假设您可以创建从开发机器到生产数据库的连接。由你决定。

**Visual Studio / BIDS**
这个位有几个部分：

*   在 Visual Studio 中创建新的报表项目和解决方案。
*   添加您之前下载的现有 RDL 文件。
*   根据报告的设置方式，您可能需要在项目中添加共享数据源，以启动和运行报告。

毕竟，您应该能够从 Visual Studio 预览您的报告（数据来自“克隆”数据库，或直接来自生产环境）。

此时，您还应该能够在部署它们之前安全地进行更改并预览/测试它们。

请务必将解决方案、报告等添加到您选择的版本控制系统中。

**部署**
一旦您做出了想要部署到报表服务器的更改，您有两个基本选项：

1.  [使用 BIDS 部署它们](http://msdn.microsoft.com/en-us/library/ee635898%28v=sql.105%29.aspx)（另请参阅[部署属性 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms155802.aspx)）
2.  Go back to the web front-end, find the report, open the *Properties* tab again, click the *Update* button. This allows you to re-upload the RDL file with the changes you've made.

From now on you can just rinse and repeat on making updates and deploying the reports. No need for cloning/exporting the entire SSRS instance to keep things in sync.

# java - 将数据编码为用户键入的代码，就像旧游戏的密码保存系统一样

> ID：11279759
> 
> 赞同：0
> 
> 时间：2012-07-01T05:13:46.797
> 
> 标签：java, cryptography, java1.4, human-readable

我尝试搜索这方面的信息，但一定不知道要使用的正确术语...

将信息存储在人类可读和可写密码中的最简单方法是什么，并具有足够的填充以使随机猜测的代码不太可能有效？与 8 位主机游戏的密码保存系统不同。

在我的特定情况下，我希望能够在 Java 1.4.2 下将三个无符号整数（每个最大长度可能约为 20 位）编码为密码，并在 Web 服务器上对其进行解密。我还在考虑添加一个随机或基于日期的值，以尝试使密码独一无二。

该代码可以使用数字、混合大小写字母和可能的一些简单符号，但可能应该排除容易混淆的字符，如 1lI 和 O0。由于用户需要输入，显然越短越好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:27:43.053

1.  选择您要使用的字母表。它可以有任意数量的符号，顺序不限。一个示例字母表将`ABCDEFGHJKLMNPQRSTUVWXYZ0123456789`包含 34 个符号。
2.  通过使用位移位和按位或，或乘法和加法，将要保存的数据编码为单个整数。如果您有大约 20 位数据，这应该不是问题。
3.  将步骤 1 中的整数编码为 base-N，其中 N 是字母表中的符号数，然后使用字母表中的符号打印它。
4.  在末尾添加一个“校验位”。添加所有输出数字 mod N 是一个简单而有用的系统。校验位不是真正的加密货币，不会阻止任何*努力*伪造保存代码的人，但它会限制随机选择的代码工作的机会。如果您的字母表有 34 个符号，那么校验位与随机代码匹配的几率只有 34 分之一。
5.  要解码，首先验证接收代码中的校验位，然后解码 base-N 表示（反向步骤 3），然后从整数值中提取各个值（反向步骤 2）。

`k`以基数表示数据位`n`加一位校验位所需的符号数为 ，对于=20 位和=34位，`ceil(k * log(2) / log(n)) + 1`只有 5个。`k``n`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T06:14:34.770

您可以将属性编码为 Base64。唯一的限制是您的属性必须具有固定大小。您可能希望对编码字符串应用 MD5 算法或类似算法。

看看这个使用[apache commons codec for java 1.4的snipplet](http://archive.apache.org/dist/commons/codec/binaries/commons-codec-1.4-bin.zip)

```
public class Base64Encoder {

/**
 * Base64 game properties encoded
 * @param properties list of properties as Strings
 * @return base64 encoded properties
 */
public String encodeProperties(List properties){
    StringBuffer buffer = new StringBuffer();
    Iterator iter = properties.iterator();
    while(iter.hasNext()){
        buffer.append(iter.next().toString());
    }
    return Base64.encodeBase64String(buffer.toString().getBytes());
}

/**
 * Decodes a based64 properties
 * @param propertiesSize list of Integer with each property size
 * @param encodedProperties base64 encoded properties
 * @return List of properties as String
 */
public List decodeProperties(List propertiesSize, String encodedProperties){
    List decodedProperties = new ArrayList();
    Iterator iter = propertiesSize.iterator();
    String decoded = new String(Base64.decodeBase64(encodedProperties.getBytes()));
    int current = 0;
    while(iter.hasNext()){
        Integer propertySize = new Integer(iter.next().toString());
        String property = decoded.substring(current, current + propertySize.intValue());
        decodedProperties.add(property);
        current += propertySize.intValue();
    }
    return decodedProperties;
}

public static void main(String[] args){
    String points = "1450";
    String level = "12";
    String lifes = "2";
    Base64Encoder encoder = new Base64Encoder();
    List properties = new ArrayList();
    properties.add(points);
    properties.add(level);
    properties.add(lifes);
    String encodedProperties = encoder.encodeProperties(properties); //MTQ1MDEyMg==
    System.out.println(encodedProperties);
    List propertiesSize =  new ArrayList();
    propertiesSize.add(Integer.valueOf(points.length()));
    propertiesSize.add(Integer.valueOf(level.length()));
    propertiesSize.add(Integer.valueOf(lifes.length()));
    System.out.println(encoder.decodeProperties(propertiesSize, encodedProperties)); //[1450, 12, 2]
} 
```

}

# java - Windows Azure cspack.exe 是开源的吗？

> ID：11279760
> 
> 赞同：1
> 
> 时间：2012-07-01T05:14:50.857
> 
> 标签：java, windows, azure, sdk, cspack

我正在尝试在 Mac 中打包我的 Java Azure 项目，但我找不到 cspack.exe 的源代码。到目前为止，我已经成功运行 Azure Eclipse 插件并成功创建了一个项目，但是在尝试部署它时无法运行 cspack.exe。我已经下载了 Windows Azure 工具并看到 CsPack.cs 到以下几行

```
// Run CsPack to generate the package
ProcessHelper.StartAndWaitForProcess(
  new ProcessStartInfo(Path.Combine(AzureSdkBinDirectory, Resources.CsPackExe),
    args), out standardOutput, out standardError); 
```

而且我真的不知道这个组件是否是开源的。如果cspack.exe是专有的，有没有办法模拟cspack.exe。我知道它将项目压缩为 zip 文件，但我可以使用任何文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:16:03.597

cspack.exe 不是开源的。它将打包到可以下载和安装的 Azure SDK 中。有一些像 jJack 所说的开源，但这只是可以在 Java、.NET 或任何程序中使用的 API，用于访问您的配置、安装云驱动器或其他东西。eclipse 插件使用 cspack.exe.jar，它是原始 cspack 应用程序的命令行包装器。Azure SDK for Mac 可以下载[Azure SDK](http://go.microsoft.com/fwlink/?LinkId=253471&clcid=0x409)。不知道 Eclipse 插件是否能够在 Mac 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T05:40:25.093

看起来 WindowsAzure4j 是开源的，所以如果这是你正在使用的，那么你很幸运。我会尝试下载[这个](http://sourceforge.net/projects/javasdk-azure/files/)并查找完整的 CsPack.cs 文件，也许您可​​以从中收集问题的根源？

# django - django - 针对对象过滤外键

> ID：11279761
> 
> 赞同：5
> 
> 时间：2012-07-01T05:15:03.997
> 
> 标签：django, django-models

```
class Blog(models.Model):
    name = models.CharField(max_length=100)

class Entry(models.Model):
    blog = models.ForeignKey(Blog)
    headline = models.CharField(max_length=255) 
```

以下查询是否正确？

```
a = Blog.objects.get(id__exact=14)
b = Entry.objects.filter(blog = a) 
```

我理解以下任何一种方法都更优雅，甚至被推荐。

```
Entry.objects.filter(blog__id__exact=3) # Explicit form
Entry.objects.filter(blog__id=3)        # __exact is implied
Entry.objects.filter(blog__pk=3)        # __pk implies __id__exact 
```

换句话说，我可以将对象（模型实例）作为参数值传递吗？

还请提供一些关于在哪里可以找到明确文档的指导？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T05:33:51.543

是的，根据 django 文档；您可以使用行的实例进行过滤。

[查询相关对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#queries-over-related-objects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:33:29.090

选择：

```
a = Blog.objects.get(pk=3)
b = a.blog_set.all() 
```

# listbox - 将列表框项动态添加到 ObservableCollection

> ID：11279764
> 
> 赞同：0
> 
> 时间：2012-07-01T05:15:53.340
> 
> 标签：listbox

我有一个绑定到 Observable 集合的列表框。在运行时，我希望用户单击一个按钮并将他们自己的自定义 ID 和名称添加到列表框中。当列表框已经绑定到 Observable 集合时，我该怎么做？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:48:37.523

当用户单击按钮时，将项目添加到可观察集合中，并且列表框应自动更新。如果没有，在列表框被添加到集合后调用数据绑定，这会将数据重新绑定到更新它的列表框

# facebook - Facebook Pagetab 请求对话通知显示并开始

> ID：11279765
> 
> 赞同：1
> 
> 时间：2012-07-01T05:16:42.027
> 
> 标签：facebook

我在 facebook 页面选项卡中使用请求对话。它显示了多人选择器对话框，一旦我发送了请求，用户就会收到通知并在一段时间后消失。并且它从不存在于通知中。

这是代码：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:fb="https://www.facebook.com/2008/fbml">
  <head>
    <title>Request Example</title>
  </head>

  <body>
<div id="fb-root"></div>

<p>
  <input type="button"
    onclick="sendRequestToRecipients(); return false;"
    value="Send Request to Users Directly"  />
  <input type="text" value="User ID" name="user_ids" />
  </p>
<p>
<input type="button"
  onclick="sendRequestViaMultiFriendSelector(); return false;"
  value="Send Request to Many Users with MFS" />
</p>

<script>
window.fbAsyncInit = function() {
  FB.init({
    appId      : xxxx,
    status     : true, 
    cookie     : true,
    xfbml      : true,
    oauth      : true,
  });
};
(function(d){
   var js, id = 'facebook-jssdk'; 
   if (d.getElementById(id)) {
       return;
       }
   js = d.createElement('script');
   js.id = id; 
   js.async = true;
   js.src = "//connect.facebook.net/en_US/all.js";
   d.getElementsByTagName('head')[0].appendChild(js);
 }(document));
</script>

<script>
function sendRequestToRecipients() {
        var user_ids = document.getElementsByName("user_ids")[0].value;
        FB.ui({method: 'apprequests',
          message: 'My Great Request',
          to: user_ids, 
        }, requestCallback);
      }

      function sendRequestViaMultiFriendSelector() {
        FB.ui({method: 'apprequests',
          message: 'My Great Request'
        }, requestCallback);
      }

      function requestCallback(response) {
        // Handle callback here
      }
</script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:15:34.090

> 用户收到通知并在一段时间后消失。

你可以说得更详细点吗？

AFAIK 一段时间后自动删除没有用户响应的请求是正常的。

> 并且它从不存在于通知中。

这意味着什么？

# c - 如何确保 strtol() 已成功返回？

> ID：11279767
> 
> 赞同：17
> 
> 时间：2012-07-01T05:16:51.447
> 
> 标签：c, type-conversion

[`according documentation:`](http://www.kernel.org/doc/man-pages/online/pages/man3/strtol.3.html)

> 成功时，该函数将转换后的整数作为 long int 值返回。如果无法执行有效转换，则返回零值。如果正确值超出可表示值的范围，则返回 LONG_MAX 或 LONG_MIN，并将全局变量 errno 设置为 ERANGE。

考虑一下如何知道函数是否失败或仅将字符串转换为 `strtol(str, (char**)NULL, 10);`数字？`str``"0\0"``"0"`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-01T05:25:37.463

如果要进行错误检查，则需要传递一个真实的指针地址，这样您就可以区分 0 产生的值`"0"`和类似的 0 产生的值`"pqr"`：

```
char *endptr;
errno = 0;
long result = strtol(str, &endptr, 10);
if (endptr == str)
{
    // nothing parsed from the string, handle errors or exit
}
if ((result == LONG_MAX || result == LONG_MIN) && errno == ERANGE)
{
    // out of range, handle or exit
}
// all went fine, go on 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-28T12:04:32.690

由于接受的答案实际上并不是检查失败的正确方法。

您不应通过检查 strtol 的返回值来检查错误，因为该字符串可能是 0l、LONG_MAX 或 LONG_MIN 的有效表示。相反，请检查 tailptr 是否指向您期望的数字之后的内容（例如，如果字符串应该在数字之后结束，则为 '\0'）。您还需要在调用之前清除 errno 并在之后检查它，以防溢出。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-01T05:24:52.470

恕我直言，我更`sscanf()`喜欢`atoi()`or `strtol()`。主要原因是您*无法*可靠地检查某些平台（即 Windows）上的错误状态，*除非*您使用`sscanf()`（`1`如果成功则返回，`0`如果失败则返回）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-26T21:32:13.370

我想我检查了所有的边缘情况。如果有人想到我错过的边缘案例，请在评论中告诉我，我会更新这篇文章。我试图使错误消息保持简单。如果您不同意此决定，请随时按照您认为合适的方式进行更改。

```
// Copyright (C) 2021 by cmwt
// Permission to use, copy, modify, and/or distribute this software for any purpose with or without fee is hereby granted.
// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

#include <errno.h>    // errno, ERANGE
#include <limits.h>   // LONG_MAX, LONG_MIN
#include <stdbool.h>  // true, false
#include <stddef.h>   // ptrdiff_t
#include <stdio.h>    // printf()
#include <stdlib.h>   // strtol()

struct ResultToLong {
  const char *err_msg;
  long        answer;
  ptrdiff_t   num_read;
  bool        is_func_success;
};

struct ResultToLong stringToLong(const char* start, int base) {
  struct ResultToLong result = {NULL, 0, 0, false};
  int save_errno = 0;
  char *end = NULL;

  if (base < 0 || base > 36) {
    result.err_msg = "Bad base: expect (0 <= base <= 36)";
    return result;
  }
  if (start == NULL) {
    result.err_msg = "Bad start: expect (start != NULL)";
    return result;
  }
  if (*start == '\0') {
    result.err_msg = "Bad start: start empty (const char* start == \"\";)";
    return result;
  }

  errno = 0;
  result.answer = strtol(start, &end, base);
  save_errno = errno;

  if (result.answer == 0 && *(start - 1) != '0') {
    result.err_msg = "Bad start: not a number";
    result.num_read = end - start;
    return result;
  }
  if (result.answer == LONG_MIN && save_errno == ERANGE) {
    result.err_msg = "Bad start: result < LONG_MIN";
    result.num_read = end - start;
    return result;
  }
  if (result.answer == LONG_MAX && save_errno == ERANGE) {
    result.err_msg = "Bad start: result > LONG_MAX";
    result.num_read = end - start;
    return result;
  }
  if (*end != '\0') {
  result.err_msg = "Warning: number in start is not '\\0' terminated";
  result.num_read = end - start;
  result.is_func_success = true;
  return result;
  }

  result.err_msg = "Success";
  result.num_read = end - start;
  result.is_func_success = true;
  return result;
}

int main() {
  struct ResultToLong result;
  const char* str;

  printf("Starting...\n\n");

  str= NULL;
  result = stringToLong(str, 0);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: %s\n", "<NULL>");
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  str= "";
  result = stringToLong(str, 0);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: '%s'\n", str);
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  str= "42";
  result = stringToLong(str, -1);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: '%s'\n", str);
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  str= "42";
  result = stringToLong(str, 0);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: '%s'\n", str);
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  str= "42 ";
  result = stringToLong(str, 0);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: '%s'\n", str);
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  str= "                42";
  result = stringToLong(str, 0);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: '%s'\n", str);
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  str= "0x42";
  result = stringToLong(str, 0);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: '%s'\n", str);
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  str= "042";
  result = stringToLong(str, 0);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: '%s'\n", str);
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  str= "+9999999999999999999";
  result = stringToLong(str, 0);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: '%s'\n", str);
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  str= "-9999999999999999999";
  result = stringToLong(str, 0);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: '%s'\n", str);
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  str= "?";
  result = stringToLong(str, 0);
  printf("Response message: %s\n", result.err_msg);
  printf("Input string: '%s'\n", str);
  printf("Number of chars processed: %ld\n", result.num_read);
  printf("Result: %ld\n\n", result.answer);

  printf("Done.\n");
} 
```

如果您反对按值返回此大小的结构，则将指向该结构的指针作为附加参数传递，只是不要忘记处理结构指针为`NULL`. 我的目标是让这段代码易于理解。您可能想要组合检查并集中设置返回值。

### 其他想法

我有点希望`strtol()`也能从数字开始的地方返回。您可以通过从结束指针迭代回来来解决这个问题，但它可能会很慢。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-01T05:24:28.440

您可以检查`errno`或传递第二个参数的非 NULL 值，并将其结果值与 进行比较`str`，例如：

```
char * endptr;
long result = strtol(str, &endptr, 10);
if (endptr > str)
{
    // Use result...
} 
```

# jquery - jQuery CSS 样式保持不变，即使链接不是当前链接

> ID：11279769
> 
> 赞同：0
> 
> 时间：2012-07-01T05:17:56.317
> 
> 标签：jquery, css

我在论坛上找到了这个 jQuery 代码：http: [//jsfiddle.net/nZLpk/8/](http://jsfiddle.net/nZLpk/8/) 但是，如果我将代码更改为这个[http://jsfiddle.net/c5LTj/](http://jsfiddle.net/c5LTj/)（修改`$(this).css({'font-weight': 'bold', 'border-left': '5px solid #555554'});`边框甚至会保留在链接上如果那不是选定的...请帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:28:09.167

我很欣赏回答问题的人正在回答真正的问题（“我如何修复这个确切的代码以便出现我的预期结果？”），但我会借此机会指出一种不同的方法。

你应该简单地用 CSS 定义一个类来封装你需要发生的所有事情，然后`addClass()`用`removeClass()`. 处理删除的一种经典方法甚至不是跟踪要从哪个元素中删除它，而是在重新应用到仅必要的元素之前将其从 ALL 中删除（我刚刚注意到或多或少是现有代码正在做的事情） ，除了样式而不是类）。

```
$(document).ready(function(){
    $('.atags').click(function(){
        $('.atags').removeClass('selected');
        $(this).addClass('selected');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T05:22:38.300

您必须以与重置它们的方式相同的方式重置`border-left`所有具有类的元素：`atag``font-weight`

```
$(document).ready(function(){
    $('.atags').click(function(){
        $('.atags').css({"font-weight":"300", 'border-left': '0'});
        $(this).css({'font-weight': 'bold', 'border-left': '5px solid #555554'});
    });
}); 
```

[http://jsfiddle.net/c5LTj/1/](http://jsfiddle.net/c5LTj/1/)

如果您只想更改颜色，如您在下面的评论中所说：

```
$('.atags').css({"font-weight":"300", 'border-left-color': '#555554'});
$(this).css({'font-weight': 'bold', 'border-left-color': '#eee'}); 
```

如果您删除`showonlyone`和内联`href="javascript:showonlyone`实例，您还可以大大改进您的代码，并`showonlyone`在您更改链接外观的同一位置完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T05:35:14.627

因为您需要在应用粗体样式之前添加`border-left`到应用到所有`.atags`元素的 css。

```
$(document).ready(function(){
    $('.atags').click(function(){
        $('.atags').css({'font-weight': '300', 'border-left': '0px'});
        $(this).css({'font-weight': 'bold', 'border-left': '5px solid #555554'});
    });
}); 
```

我建议使用 CSS 类而不是直接在代码中指定样式，而不是在 HTML 属性中使用 JavaScript：http: [//jsfiddle.net/c5LTj/3/](http://jsfiddle.net/c5LTj/3/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T05:25:35.123

你没有重置边界，

```
 $('.atags').click(function(){
        $('.atags').css({"font-weight":"300", "border-left":0});
        $(this).css({'font-weight': 'bold', 'border-left': '5px solid #555554'});

}) 
```

应该可以正常工作

# c++ - 一次通过在 O(n) 时间内从大量 URL 列表中找到唯一的 URL

> ID：11279779
> 
> 赞同：0
> 
> 时间：2012-07-01T05:20:58.823
> 
> 标签：c++, python, algorithm

最近在一次采访中被问到这个问题。我在 O(n) 时间内给出了答案，但分两次。他还问我如果 url 列表无法放入内存中该怎么做。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T05:47:15.027

如果这一切都适合内存，那么问题很简单：创建两个集合（选择您喜欢的数据结构），最初都是空的。一个将包含唯一的 URL，另一个将包含多次出现的 URL。扫描一次 URL 列表。对于每一个URL，如果存在于唯一集中，则将其从唯一集中移出，放入多重集中；否则，如果它不存在于多重集中，则将其添加到唯一集中。

如果该集合不适合内存，则问题很困难。O(n) 的要求并不难满足，但“单次通过”的要求（似乎排除了随机访问等）是困难的；我认为如果没有对数据的一些限制，这是不可能的。您可以使用对集合有大小限制的集合方法，但这很容易被不幸的数据排序所破坏，并且无论如何只有一定的概率（<100％）找到一个唯一元素（如果存在）。

编辑：

如果您可以设计一个存在于大容量存储中的集合数据结构（因此它可以大于内存中的容量）并且可以在 O(1)（摊销）时间内进行查找、插入和删除，那么您可以使用它用第一种方法解决第二个问题的结构。也许面试官所寻找的只是将 URL 转储到具有 URL 唯一索引和计数列的数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T06:52:59.287

可以尝试使用 Trie 结构来保存数据。它被压缩了，所以它会占用更少的内存，作为常见 url 部分的内存重用。

循环看起来像：

```
add string s to trie;
check that added string is not finished in existing node
    internal node -> compress path
    leaf node -> delete path 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T05:46:57.103

对于“适合内存”的情况，您可以使用如下两个哈希表（伪代码）：

```
hash-table uniqueTable = <initialization>;
hash-table nonUniqueTable = <initialization>;
for-each url in url-list {
    if (nonUniqueTable.contains(url)) {
        continue;
    }
    else if (uniqueTable.contains(url)) {
        nonUniqueTable.add(url);
        uniqueTable.remove(url);
    }
    else {
        uniqueTable.add(url)
    }
}
if (uniqueTable.size() > 1)
    return uniqueTable.first(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T06:26:15.010

**基于 Python**

你有一个`list`- 不确定它“来自”哪里，但如果你已经在内存中拥有它，那么：

```
L.sort()
from itertools import groupby
for key, vals in groupby(L, lambda L: L):
    if len(vals) == 1:
       print key 
```

否则使用存储（可能使用）：

```
import sqlite3
db = sqlite3.connect('somefile')
db.execute('create table whatever(key)') 
```

将您的数据放入其中，然后执行“select * from any group by key where count(*) = 1)”

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-01T06:31:46.737

这实际上是一个经典的面试问题，他们期望的答案是您首先对 url 进行排序，然后进行二分搜索。如果它不适合内存，您可以对文件执行相同的操作。

# python - 金字塔：OperationalError 1054，“‘字段列表’中的未知列‘XX’

> ID：11279783
> 
> 赞同：3
> 
> 时间：2012-07-01T05:21:46.443
> 
> 标签：python, sqlalchemy, pyramid

尝试访问数据库时，我无法访问该列。我已经多次运行 init 数据库脚本。这是代码：

看法

```
from .models import Session, Admin
@view_config(route_name='admin', renderer='templates/admin.pt')
def admin(request):
    session = Session()
    user = authenticated_userid(request)
    admin = bool(session.query(Admin).filter_by(username = user).first())
    message = ''
    if admin:
        if 'form.submitted' in request.params:
            session.add(Admin(request.params['admin']))
            session.commit()
            message = "%s has been added as an Admin!" % request.params['admin']
            return dict(url=request.route_url('admin'),
                        message = message,
                    )
        return dict(message = message)
    else:
        return HTTPForbidden() 
```

楷模

```
class Admin(Base):
    __tablename__='admins'
    __table_args__={
        'mysql_engine':'InnoDB',
        'mysql_charset':'utf8',
    }

    username = Column(String(255), ForeignKey('users.username'), primary_key=True)

    def __init(self, user):
        self.username = user 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T08:56:37.557

数据库脚本无法在已经存在的表上添加列。如果您在运行脚本后修改或添加了该列，那就是您的问题所在。

你有三种可能性：

*   删除数据库并让脚本以正确的方式重新创建它
*   运行 sql 手动添加列。
*   看看[Alembic](http://alembic.readthedocs.org/en/latest/index.html)，它可以帮助您自动执行此操作。

# c# - 为什么一个循环在内存方面和性能方面都比其他循环表现更好？

> ID：11279786
> 
> 赞同：2
> 
> 时间：2012-07-01T05:22:20.307
> 
> 标签：c#, performance, linq

我在 C# 中有两个循环，我正在为一个集合运行这些循环，其中包含 10,000 条记录，使用“yield return”进行分页下载

第一的

```
foreach(var k in collection) {
  repo.Save(k);
} 
```

第二

```
 var collectionEnum = collection.GetEnumerator();
 while (collectionEnum.MoveNext()) {
   var k = collectionEnum.Current;
   repo.Save(k);
   k = null;
 } 
```

似乎第二个循环消耗的内存更少，并且比第一个循环更快。我理解的记忆可能是因为`k`被设置为`null`（尽管我不确定）。但是怎么比`for each`。

以下是实际代码

```
 [Test]
    public void BechmarkForEach_Test() {
        bool isFirstTimeSync = true;
        Func<Contact, bool> afterProcessing = contactItem => {
            return true;
        };

        var contactService = CreateSerivce("/administrator/components/com_civicrm");
        var contactRepo = new ContactRepository(new Mock<ILogger>().Object);
        contactRepo.Drop();
        contactRepo = new ContactRepository(new Mock<ILogger>().Object);

        Profile("For Each Profiling",1,()=>{
            var localenumertaor=contactService.Download();
            foreach (var item in localenumertaor) {

            if (isFirstTimeSync)
                item.StateFlag = 1;

            item.ClientTimeStamp = DateTime.UtcNow;

            if (item.StateFlag == 1)
                contactRepo.Insert(item);
            else
                contactRepo.Update(item);

            afterProcessing(item);

        }
        contactRepo.DeleteAll();
        });

    }

    [Test]
    public void BechmarkWhile_Test() {
        bool isFirstTimeSync = true;
        Func<Contact, bool> afterProcessing = contactItem => {
                                                                 return true;
        };

        var contactService = CreateSerivce("/administrator/components/com_civicrm");
        var contactRepo = new ContactRepository(new Mock<ILogger>().Object);
        contactRepo.Drop();
        contactRepo = new ContactRepository(new Mock<ILogger>().Object);

        var itemsCollection = contactService.Download().GetEnumerator();

        Profile("While Profiling", 1, () =>
            {
                while (itemsCollection.MoveNext()) {

                    var item = itemsCollection.Current;
                    //if First time sync then ignore and overwrite the stateflag
                    if (isFirstTimeSync)
                        item.StateFlag = 1;

                    item.ClientTimeStamp = DateTime.UtcNow;

                    if (item.StateFlag == 1)
                        contactRepo.Insert(item);
                    else
                        contactRepo.Update(item);

                    afterProcessing(item);

                    item = null;
                }
                contactRepo.DeleteAll();

            });
    }

    static void Profile(string description, int iterations, Action func) {

        // clean up
        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();

        // warm up 
        func();

        var watch = Stopwatch.StartNew();
        for (int i = 0; i < iterations; i++) {
            func();
        }
        watch.Stop();
        Console.Write(description);
        Console.WriteLine(" Time Elapsed {0} ms", watch.ElapsedMilliseconds);
    } 
```

我正在使用微基准标记，来自stackoverflow问题本身[的基准测试小代码](https://stackoverflow.com/questions/1047218/benchmarking-small-code-samples-in-c-can-this-implementation-be-improved)

花费的时间是

*   对于每个经过的分析时间 5249 毫秒
*   分析时间经过 116 毫秒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:13:55.880

您的`foreach`版本`var localenumertaor = contactService.Download();`在配置文件操作内部调用，而枚举器版本在调用外部调用它`Profile`。

最重要的是，迭代器版本的第一次执行将耗尽枚举器中的项目，并且在随后的迭代`itemsCollection.MoveNext()`中将返回 false 并完全跳过内部循环。

# performance - 哪种汇编程序最适合从头开始对操作系统进行编程，并优先考虑执行性能？

> ID：11279788
> 
> 赞同：0
> 
> 时间：2012-07-01T05:23:56.483
> 
> 标签：performance, assembly, operating-system, portability

**我不适合在任何情况下编写操作系统，但这是假设性的。**

我想用汇编语言从几乎绝对的零开始创建一个简单的操作系统。怀着远大的抱负，我希望它尽可能地优化执行。我还希望代码对于多种架构（尤其是 x86 和 x64 可互换）具有相当的可移植性。我觉得有点极简主义，所以让我们抛弃软件“膨胀”。

我正在寻找的是一个可以符合这个标准的汇编程序。显然，我想要一个正式或非正式记录得当的，并且我需要它是众所周知的（即我不希望在互联网撒哈拉沙漠中找到“ΣASM”。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T06:09:43.093

你是在极大地自相矛盾。优化 x86 上的执行是不可能的，每个系列都可以/确实以截然不同的速度执行相同的二进制文件，尤其是如果您要在 32 位和 64 位之间跳转。如果您的目标是 x86 上的速度，请不要用 asm 编写，请使用 C，然后让编译器针对它所在的平台进行优化。对于大型项目，您将无法与编译器竞争。对于简短的编译器生成的代码序列，是的，您有时可以更好/更快地手动组装一些东西。对于 x86，编译器在 x86 上的平均速度可能比您做得更好。膨胀不一定来自编译器或语言，而是来自所选语言的设计和实现。很容易将臃肿的 asm 变成臃肿的 C 或其他。

其次，如果您使用汇编语言编写。这段代码中有多少是指令，你希望有多少是汇编程序特定的指令和其他细微差别？您至少可以尝试使用这些汇编程序共享的最少数量的指令来编写适用于不同汇编程序的可移植 asm，其余的是指令。不幸的是，x86 在这里也有问题，首先是 intel vs at&t 语法问题，然后是字节 ptr 和近/远项目告诉汇编器特定指令的哪种风格甚至仅限于 intel 语法可能无法从一个移植x86 汇编器到另一个。你可以花 25 美元买一个树莓派，或者花 90 美元买一个 beaglebone。

x86 组装充其量是可怕的，几十年的创可贴在创可贴之上（从原来的创可贴开始）。如果您觉得需要做一个大小合适的汇编项目，（与 C 等更有用的东西相比）特别是如果您的目标是速度，那么选择更好的处理器和指令集。我不知道你的项目的大小。如果足够小，则为 thumb 或 thumb2 或 arm 或 avr 或 msp430，如果足够大，则为 arm 或 mips。可悲的是，对于大多数你可能会使用 gnu binutils 的人来说。对于 x86，如果您真的认为需要为此使用该指令集和该硬件，我同意 Jerry，请使用 nasm。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T05:45:04.420

在您指定的情况下，NASM 可能是最佳选择。它有合理的记录，相当广泛的使用和大量的测试。它也是为数不多的可以直接生成原始二进制输出文件的文件之一，其中大多数文件都需要您通过链接器跳过箍来获得它。对于操作系统本身来说，这对于引导加载程序来说并不是一个问题，但是（无论出于何种原因）大多数在操作系统上工作的人自己也至少编写了一些玩具引导加载程序。

# java - 如何在 Netbeans 的 JOptionPane 中显示图像

> ID：11279790
> 
> 赞同：1
> 
> 时间：2012-07-01T05:24:29.750
> 
> 标签：java, swing, netbeans, joptionpane, imageicon

我用来`JGrasp`显示图像的代码在 Netbeans 中不起作用

我使用的代码`JGrasp`是

```
final ImageIcon icon1 = new ImageIcon("image/money.gif");
JOptionPane.showMessageDialog(null, " blah blah", "Text",
   JOptionPane.INFORMATION_MESSAGE,   icon1); 
```

如果我想在 中显示图像`JOptionPane.showInputDialog`，它会是一样的`JOptionPane.showMessageDialog`吗？

任何帮助是极大的赞赏！

编辑：我不认为位置是问题，因为当我这样做时

```
menuPic = new javax.swing.JButton();
menuPic.setIcon(new javax.swing.ImageIcon(
    getClass().getResource("image/money.gif"))); 
```

它可以很好地显示图像，但是当我尝试将图像添加到 my`JOptionPane`时，它没有显示任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T05:36:57.277

[这与您之前的问题](https://stackoverflow.com/questions/11279532/code-to-display-an-image-wont-work-with-different-java-editors)完全相同，但现在相反。关键是图像文件的位置*。*关键是您现在将图像作为*File*获取，而之前您将其作为*Resource*获取，Java 在两个不同的地方查找这些图像。

*现在*文件必须位于用户目录之外的图像子目录中。您可以通过调用获取用户目录

```
System.out.println(System.getProperty("user.dir")); 
```

获得用户目录后，向其中添加“/image/money.gif”，这就是您的图像***文件***的路径（同样，不是您在上一个示例中所做的资源）。

**编辑**
关于您的评论：

> 我不认为位置是问题，因为当我这样做时
> 
> menuPic = new javax.swing.JButton(); menuPic.setIcon(new javax.swing.ImageIcon(getClass().getResource("image/money.gif")));
> 
> 它可以很好地显示图像，但是当我尝试将图像添加到我的 joptionpane 时，它​​没有显示任何内容

当然——这就是我一直想说的。在第二个实例中，您将图像作为资源而不是文件获取，这对于 Java 查找 jpg 文件的位置有***很大***的不同。

如果为您的 JOptionPane 寻找图像作为资源，它会正常工作，因为您知道 jpg 资源的位置。即，这可能会起作用：

```
// final ImageIcon icon1 = new ImageIcon("image/money.gif");
final ImageIcon icon1 = new javax.swing.ImageIcon(getClass().getResource("image/money.gif"))
JOptionPane.showMessageDialog(null, " blah blah", "Text",
   JOptionPane.INFORMATION_MESSAGE,   icon1); 
```

但是，如果您想将图像作为文件查找——有时这是必要的，首先您必须按照我上面的建议找到 user.dir。

# sync - 通过 Box.com API 为文件夹启用桌面同步

> ID：11279797
> 
> 赞同：2
> 
> 时间：2012-07-01T05:25:35.833
> 
> 标签：sync, box-api

是否可以通过 Box.com API 以编程方式为文件夹启用桌面同步？

My Box 应用程序在安装时会在根级别创建一个文件夹。我希望使用桌面客户​​端的用户可以通过桌面同步访问此文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:40:34.977

这可以通过更新`sync_state`文件夹上的参数来完成，如此[处](http://developers.box.com/docs/#folders-update-information-about-a-folder)所述。

例如，要在 cURL 中为 ID 为 123 的文件夹执行此操作：

```
curl https://api.box.com/2.0/folders/123 \
-H 'Authorization: Bearer ACCESS_TOKEN' \
-d '{"sync_state": "synced"}' \
-x PUT 
```

# c# - C# 转换为 double 返回无穷大

> ID：11279800
> 
> 赞同：1
> 
> 时间：2012-07-01T05:26:27.557
> 
> 标签：c#, double, converter, infinity, typedescriptor

我有一个方法：

```
public void StoreNumberInSmallestType(ValueType number)
{
    if (numberTypes == null)
        numberTypes = new List<Type>() { typeof(sbyte), typeof(short), typeof(int), typeof(long), typeof(float), typeof(double) };

    foreach (Type t in numberTypes)
    {
        try
        {
            var converter = TypeDescriptor.GetConverter(t);
            value = converter.ConvertTo(number, t);

            Type = value.GetType();

            return;
        }

        catch (OverflowException) { }
    }
} 
```

该方法位于变量`value`定义为的类中`dynamic`。

像这样使用时：

```
StoreNumberInSmallestType(Math.Pow(200, 100)); 
```

`value`最终成为`Infinity`. 如果我单步执行这个过程，我会发现 的值`number`不是`Infinity`，而是用科学计数法表示的结果。`number`每当被转换并存储在里面时，就会发生一些不好的事情`value`。有谁知道为什么`number`持有正确的价值，但`value`不知道？

# 编辑：

这是一个完整的代码示例：

主要的：

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Class1 c1 = new Class1();
            c1.StoreNumberInSmallestType(Math.Pow(200, 100));
        }
    }
} 
```

班级：

```
namespace ConsoleApplication1
{
    public class Class1
    {
        List<Type> numberTypes;
        dynamic value;
        public Type Type { get; set; }

        public void StoreNumberInSmallestType(ValueType number)
        {
            if (numberTypes == null)
                numberTypes = new List<Type>() { typeof(sbyte), typeof(short), typeof(int), typeof(long), typeof(float), typeof(double) };

            foreach (Type t in numberTypes)
            {
                try
                {
                    var converter = TypeDescriptor.GetConverter(t);
                    value = converter.ConvertTo(number, t);

                    Type = value.GetType();

                    return;
                }

                catch (OverflowException) { }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:39:08.907

当您使用 Single Type 对您的号码进行转换时会发生这种情况，该单类型的最大值为`3.40282347E+38`且 nber 的值是，`1.2676506002282294E+230`因此您超出了[单](http://msdn.microsoft.com/en-us/library/3www918f)值类型。一旦你把它变成双重类型，它就会`1.2676506002282294E+230`有价值。

从上面的链接：

> 如果浮点运算结果的幅度对于目标格式来说太大，则运算结果为 PositiveInfinity 或 NegativeInfinity，这与结果的符号相适应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T05:39:53.207

双转换不是无穷大，而是浮点转换。
在那里你得到 Infinity 并且没有例外，然后你的代码在你进行双重转换之前返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T05:42:57.667

溢出条件导致无穷大；您可以使用以下任一方法进行检查：

*   MSDN：[double.IsPositiveInfinity](http://msdn.microsoft.com/en-us/library/system.double.ispositiveinfinity)
*   MSDN：[double.IsNegativeInfinity](http://msdn.microsoft.com/en-us/library/system.double.isnegativeinfinity)

浮点转换导致您超出数据类型的限制。

# python - 附加字典列表的值

> ID：11279804
> 
> 赞同：0
> 
> 时间：2012-07-01T05:27:48.193
> 
> 标签：python

我正在制作一个示例程序来计算一个字符在给定单词中出现的次数。说“好”，g 发生一次，o 发生 2 次等。现在我想尝试通过将列表作为我的字典的值来进一步实现这一点，每次找到现有字符时将第一个元素（索引 0）增加 1并通过单词中字符的索引附加相同的dict值列表，例如 Word="Programming is nature" Dict={'a':[2,5,16],'i':[2,8, 12]...等}

因此，每个 dict 值的第一个索引随着字符的出现而增加（即，如果找到该字符，则 +1）但列表中的其他值被附加（保存在单词中找到字符的位置）。我有这个仅用于计数，但不适用于索引

```
def count(word):
    v=0;b={}
    b.clear()
    while word[v] in word:
        if word[v] in b.keys():
            b[word[v]]+=1;v+=1
        else:
            b[word[v]]=1;v+=1
        if v==(len(word)):
            break
    print("\n",b)

word=input("Enter word: ")
count(word) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:36:51.117

使用 a[`collections.defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)代替：

```
import collections

def count(word):
    c = collections.defaultdict(list)
    for index, letter in enumerate(word):
        c[letter] += [index]
    return c

print count('programming is nature') 
```

输出：

```
defaultdict(<type 'list'>, {'a': [5, 16], ' ': [11, 14], 'e': [20], 'g': [3, 10], 'i': [8, 12], 'm': [6, 7], 'o': [2], 'n': [9, 15], 'p': [0], 's': [13], 'r': [1, 4, 19], 'u': [18], 't': [17]}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:05:28.787

使用`defaultdict`有点不同：

```
from collections import defaultdict
example = 'Programming is nature'
D=defaultdict(lambda: [0])
for i,c in enumerate(example):
    D[c][0] += 1
    D[c].append(i)
for k,v in D.items():
    print(k,v) 
```

输出匹配您的示例：

```
a [2, 5, 16]
  [2, 11, 14]
e [1, 20]
g [2, 3, 10]
i [2, 8, 12]
m [2, 6, 7]
o [1, 2]
n [2, 9, 15]
P [1, 0]
s [1, 13]
r [3, 1, 4, 19]
u [1, 18]
t [1, 17] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T05:39:47.513

这是我的解决方案：

```
def count(word):
    b={}
    for i,letter in enumerate(word):
        if letter not in b:
            b[letter]=[0]
        b[letter][0]+=1
        b[letter].append(i)
return b 
```

print(count("编程是天性"))

word="编程是天性" print(count(word))

完全按照您想要的方式工作。:)

输出：

```
{'a': [2, 5, 16], ' ': [2, 11, 14], 'e': [1, 20], 'g': [2, 3, 10], 'i': [2, 8, 12], 'm': [2, 6, 7], 'o': [1, 2], 'n': [2, 9, 15], 'P': [1, 0], 's': [1, 13], 'r': [3, 1, 4, 19], 'u': [1, 18], 't': [1, 17]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T05:40:15.453

好的，所以先做一些笔记。

您应该使用[raw_input](http://docs.python.org/library/functions.html#raw_input)而不是[input](http://docs.python.org/library/functions.html#input)；`input`评估您作为 Python 代码输入的内容`raw_input`，从 stdin 获取输入（如果您使用的是 Python 3，请忽略这一点）。如果您的 dict 值可以采用特定的默认值，则[collections.defaultdict](http://docs.python.org/library/collections.html)非常有用。

```
from collections import defaultdict

def count(word):
    counts = defaultdict(int)
    appearances = defaultdict(list)
    for pos, val in enumerate(word)
        counts[val] += 1
        appearances[c].append(pos)

    print 'counts:', counts
    print 'appearances:', appearances

word = input("Enter word: ")
count(word) 
```

`defaultdict`将可调用对象作为其参数，因此如果您这样做：

```
x = defaultdict(int)
x['b'] += 1 
```

因为`'b'`它不是 x 中的键，所以它会将其初始化为`int()`（零）的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T05:41:02.003

如果您使用的是 Python 2.7+，请使用[`Counter`](http://docs.python.org/library/collections.html#collections.Counter)：

```
>>> from collections import Counter
>>> Counter('abchfdhbah')
Counter({'h': 3, 'a': 2, 'b': 2, 'c': 1, 'd': 1, 'f': 1})
>>> the_count = Counter('abchfdhbah')
>>> the_count['h']
3 
```

# php - 当您的链接来自 $_GET 方法时如何实现搜索功能

> ID：11279808
> 
> 赞同：0
> 
> 时间：2012-07-01T05:29:38.963
> 
> 标签：php, search

你们可能不明白我的问题，我会尝试进一步解释。

我有一个显示产品信息的站点，它的名称、ID、价格、数量等。现在我以使用 $_GET 变量的方式显示它。

例如，如果我想点击产品页面，那么链接将是

```
http://localhost/InventorySystem/Employee/Tools/?Item=ProductList 
```

我不需要创建另一个 php 页面，我只需要一个 get 方法，它会显示产品信息。

现在我的问题是，如何用它实现搜索功能？有没有办法让我创建一个搜索功能，比如

```
?Item=ProductList&Search=SearchTerm 
```

我很难做到。请任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:07:19.807

基本上在您的查询字符串中添加另一个变量，就像您在示例中所示`?Item=ProductList&Search=SearchTerm`：并且只是`$_GET['Search']`获取值，将其传递给您的 mysql 并使用`WHERE`与如下复合的子句实现过滤器`LIKE`：

```
$searchkey = $_GET['Search'];
$result = mysql_query("SELECT * FROM table WHERE column LIKE '%".$searchkey."%'"); 
```

这将返回包含您传入的术语的结果`$searchkey`，例如，如果`$searchkey = "ball"`then`volleyball, basketball, baller, basketballvolley`都是有效匹配项。

编辑：

您的 html 表单应如下所示，以便能够在查询字符串中传递所需的参数：

```
<form method="GET">
<input type="hidden" name="Item" value="ProductList" />
Search: <input type="text" name="Search" />
<input type="submit" value="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T05:39:41.490

我假设您只是使用 SQL 语句来查询此页面的产品。

我会检查参数`isset($_GET['Search'])`是否`Search`存在。如果是这样，那么我会在 SQL 语句 ( `where ... = ...`) 中附加一些条件。但请记住清理查询，以避免[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。

示例代码：

```
$query = "select * from products";
if (isset($_GET['Search']))
  $query .= " where somefield=?";

$mysqli->prepare($query....); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T05:43:09.960

这可能是这个的一些变化：

```
<!DOCTYPE html>
<html>
  <body>
<?php
if (isset($_GET['search'])) {
  // Perform the search, probably against a back-end database.
  // For purposes of this pseudocode, I'll assume you store the results in a
  // variable named $search_result that is an array of associative arrays
  // with fields 'id' and 'name'.
?>
    <p style="font-weight: bold;">Search Results</p>
    <table>
    <?php foreach ($search_result as $result): ?>
      <tr>
        <td><a href=$base_url."/Item="<?= urlencode($result['id']) ?>">
          <?= htmlentities($result['name']) ?></a></td>
      </tr>
    </php endforeach; ?>
    </table>
<?php } ?>

  <!-- stuff you display whether page is searched or not goes here -->
  </body>
</html> 
```

# java - Java 代码中的缓存

> ID：11279809
> 
> 赞同：-1
> 
> 时间：2012-07-01T05:29:54.743
> 
> 标签：java, hashmap, javac

在我的代码中，我使用[RandomAccessFile](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html)读取多个文件。我也在内置的[HashMap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)中使用 JAVA 。这些会导致几个页面错误。是否有任何内置库关心缓存机制并轻松嵌入 Java 代码？

编辑：我正在使用 JAVAC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T07:04:49.227

> 这些会导致几个页面错误。他们可以这样做，除了 JVM 通常将所有同时构建或引用的对象放在一个地方，因此您可能只有一个一页错误。
> 
> 是否有任何内置库关心缓存机制并轻松嵌入 Java 代码？

不，这在 JAva 或任何语言中都不容易做到，除非该语言从一开始就是为了使用它而设计的。

幸运的是，您通常不必担心，因为如果不是主内存，您的大部分数据可能都在缓存中（如果数据不在内存中，例如在磁盘上，您只会遇到页面错误）

第一次从磁盘读取文件时可能会出现页面错误。操作系统的工作是确保您的访问模式得到有效处理。如果不是，最好的办法是 a) 使用更快的驱动器，如 SSD 或 b) 使用不同的操作系统。（不太可能有帮助）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T05:43:41.007

据我所知，有一个用于缓存的 JSR。这是[JSR 107](http://jcp.org/en/jsr/detail?id=107)
看起来这将成为 Java EE 7 的一部分。
在您的情况下，我建议使用其中一种缓存框架，其中一些实现 JSR 107 。
也许为了让你的代码支持 Java 站，你应该选择一个支持这个 JSR 的缓存框架。
但是，您应该考虑这是否不会损害您的流程/用例。
您可以在[此](http://gregluck.com/blog/archives/2011/10/javax-cache-the-new-java-caching-standard/)博客中获得更多详细信息。

# animation - 影响 -webkit-animation 中的 -webkit-transform 函数而不影响应用于目标元素的其他 -webkit-transform 函数？

> ID：11279810
> 
> 赞同：0
> 
> 时间：2012-07-01T05:30:15.573
> 
> 标签：animation, css, webkit

我想为元素的 -webkit-transform: rotateX() 设置动画，同时允许元素保持其 -webkit-transform: rotate() 属性完整。考虑以下代码：

```
@-webkit-keyframes anim {
    from { -webkit-transform: rotateX(0); }
    to { -webkit-transform: rotateX(45deg); }
}

.target {
    -webkit-animation: anim .5s infinite alternate linear;
}

.target.one {
    -webkit-transform: rotate(45deg);
}

.target.two {
    -webkit-transform: rotate(-45deg);
} 
```

在这种情况下，目标 1 和 2 开始正确旋转，但是当动画应用其 -webkit-transform: rotateX() 时，它们的旋转会被覆盖

我怎样才能只为-webkit-transform的rotateX函数设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:58:00.593

完成此操作的最简单方法是使用应用了基本变换 (-45/45) 的包装器 div，并将动画类应用于包装的 div。

# database - 如何知道我的数据库关系是否正常？

> ID：11279812
> 
> 赞同：0
> 
> 时间：2012-07-01T05:30:59.730
> 
> 标签：database, table-relationships

我怎样才能知道我的数据库设计（特别是关系）是否正常？我在互联网上找到了一些数据库示例并试图解决它们，但我的设计总是与示例设计不同。在设计关系时是否有任何规则可以遵循，或者有任何问题要问自己以找出我的关系是否不好？或者数据库是否有可能有多个 OK 设计？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:38:41.840

每个人在数据库设计中都有自己的风格。你在网上看到的也不错，但那是他们自己对给他们的业务规则的解释。如果您的数据中没有冗余或可能少于应有的冗余，您就会知道您的数据库设计是否正常。高效且易于使用您的查询进行调用。但是如果你想知道设计中的常见错误是什么，那么这里有一个链接给你

[http://www.simple-talk.com/sql/database-administration/ten-common-database-design-mistakes/](http://www.simple-talk.com/sql/database-administration/ten-common-database-design-mistakes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T05:40:19.313

通常，您使用体验是否遵循规范化的正常规则（取决于使用情况）。

一个领域拥有多种解决方案是完全可以的，通常具有不同的性能方面或维护/扩展方面。

买一些好书。获取数据模型资源手册，第 1 卷，了解如何解决标准问题（会计、跟踪库存、地址管理等）的一些非常好的示例。

请记住，这是 2012 年，互联网上到处都是白痴——你看到的很多例子都会因为无能而被解雇。

# android - 一段时间后的android flyin imageView

> ID：11279815
> 
> 赞同：1
> 
> 时间：2012-07-01T05:31:23.940
> 
> 标签：android, animation, android-imageview, postdelayed

我的目的是，在我的活动开始 2 秒后，一个 ImageView（带有图像）应该飞入视图。但是使用以下代码没有任何反应。

我是在正确的道路上还是我可以完全不同地解决这个问题？我必须改变什么才能使它起作用？

这是我的代码的外观：

```
public class Main extends Activity {
    private ImageView _truck;
    private Handler _flyInTruckHandler;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        _truck = (ImageView) findViewById(R.id.main_garbageTruck);
        _truck.setVisibility(View.INVISIBLE);

        _flyInTruckHandler = new Handler() {
            public void handleMessage(Message msg) {
                _truck.setVisibility(View.VISIBLE);
            }
        };

        _flyInTruckHandler.postDelayed(new Runnable() {
            public void run() {
                new flyInTruck();
            }
        }, 2000);
    }

    class flyInTruck extends TimerTask {

        @Override
        public void run() {
            Animation anim = AnimationUtils.loadAnimation(                      getApplicationContext(), R.anim.flyin);
        findViewById(R.id.main_garbageTruck).setAnimation(anim);
            _flyInTruckHandler.sendEmptyMessage(0);
            anim.start();
        }
    }
} 
```

我使用的动画来自这里：[Fly In Animation for a GridView](https://stackoverflow.com/questions/4991279/fly-in-animation-for-a-gridview) 但略有改变：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:shareInterpolator="true" >
    <scale
        android:duration="2500"
        android:fillAfter="false"
        android:fromXScale="0.0"
        android:fromYScale="0.0"
        android:interpolator="@android:anim/decelerate_interpolator"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toXScale="1.0"
        android:toYScale="1.0" />
</set> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T05:38:03.610

**解决方案**

好的，我明白了（如此简单，我之前没有考虑过）。我不需要那个额外的课程“flyInTruck”。我可以这样写：

```
 _flyInTruckHandler.postDelayed(new Runnable() {
        public void run() {
            Animation anim = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.flyin);
            findViewById(R.id.main_garbageTruck).setAnimation(anim);
            _flyInTruckHandler.sendEmptyMessage(0);
            anim.start();
        }
    }, 2000); 
```

# javascript - 使用on的Jquery后期绑定 - 旧形式不起作用？

> ID：11279816
> 
> 赞同：0
> 
> 时间：2012-07-01T05:31:31.640
> 
> 标签：javascript, jquery, events, syntax, jquery-selectors

我不知道为什么选项（1）不起作用。我已经阅读了[现场](http://api.jquery.com/on/)[直播](http://api.jquery.com/live/)，但错过了/找不到答案。

有人可以解释一下或将我指向有关此的文档吗？

```
1\. $('#MAIN a[href="#PAGE"]').on( 'click',function(event){ alert("1"); });
2\. $(document).on('click', '#MAIN a[href="#PAGE"]', function(event){ alert("2"); }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:58:22.657

第一种形式连接链接上的常规事件，而第二种形式连接文档级别的委托事件。

第一个与以下内容相同：

```
$('#MAIN a[href="#PAGE"]').click(function(event){ alert("1"); }); 
```

当您运行代码时，第一个表单需要存在链接。对于您稍后添加的链接，这些事件将不存在。

第二种形式会在事件冒泡到文档级别时捕获该事件，因此它也适用于您稍后添加的链接。

最好将委托事件连接到尽可能靠近目标元素的位置。如果连接`#MAIN`时元素存在，则可以使用它而不是文档：

```
$('#MAIN').on('click', 'a[href="#PAGE"]', function(event){ alert("2"); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T05:34:58.163

如果没有一些 HTML 和脚本执行信息，很难判断这是否是问题，但第一个搜索与选择器匹配的元素（好吧，在这种情况下为单个元素），并将事件处理程序附加到它。

第二种情况将事件处理程序附加到文档。每当点击事件发生时，它都会测试事件目标是否与选择器匹配，如果匹配则触发事件。这就是为什么您可以提前设置事件并动态创建元素的原因……但是这样做确实会影响性能。

# iphone - 如何开始使用airplay？

> ID：11279818
> 
> 赞同：2
> 
> 时间：2012-07-01T05:32:14.440
> 
> 标签：iphone, objective-c, ios, xcode, airplay

我正在尝试开始使用 iOS Airplay（分屏和镜像），似乎网络上几乎没有关于此的内容。我正在寻找一个示例应用程序或分步教程来在我的应用程序上设置 Airplay，基本上是为了共享我的屏幕，不一定是音频或视频（尽管我可以从它开始更简单）。

谁能指出我对了解更多信息有帮助的地方（除了 iOS 库）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T06:27:24.220

查看[AirPlay 概述文档](http://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/AirPlayGuide)，尤其是[为 AirPlay 丰富您的应用](http://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/AirPlayGuide/EnrichYourAppforAirPlay/EnrichYourAppforAirPlay.html)一章。

对于镜像，您根本不需要做太多事情。如果你想让不同的内容出现在 AirPlay 连接的屏幕上，你基本上必须创建一个单独的`UIWindow`并将其`screen`属性设置为相应的`UIScreen`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-17T10:12:21.167

我认为您需要阅读的是[“iOS 多显示器编程指南”](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/WindowAndScreenGuide/Introduction/Introduction.html)。Airplay 与“Multiple Display”相比，更多地与音频或视频相关。

需要一个额外的窗口来支持外部显示器

如果您的应用程序支持外部设备显示，您需要创建一个单独的窗口对象来表示要在其上显示的内容。您可以在两个显示器上显示相同的内容（此功能称为镜像，默认情况下会发生），或者您可以在每个显示器上显示不同的内容。

阅读[在外部显示器上呈现内容以](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/WindowAndScreenGuide/UsingExternalDisplay/UsingExternalDisplay.html#//apple_ref/doc/uid/TP40012555-CH3-SW1)获取分步教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:08:24.823

这可能会有所帮助： [https ://github.com/quellish/AirplayDemo](https://github.com/quellish/AirplayDemo)

它展示了如何将 airplay 显示器用作辅助屏幕。

# jquery - Jquery Mobile - 自定义转换

> ID：11279819
> 
> 赞同：0
> 
> 时间：2012-07-01T05:32:40.587
> 
> 标签：jquery, mobile, jquery-mobile, transitions

我正在使用 jquery 移动库...几天过去了...我遇到了一个 dojo 移动库。在这个库中，有一些在 jquery 中不存在的转换：“cover”、“reveal” .... [Dojo Mobile Showcase](http://demos.dojotoolkit.org/demos/mobileGallery/demo-iphone.html)

有什么方法可以在 jquery mobile 中创建自定义转换或稍微更改现有转换？

我从哪说起呢？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T06:49:34.280

我已经将自定义转换放在一起。
[http://jsfiddle.net/nachiket/3BJ5C/](http://jsfiddle.net/nachiket/3BJ5C/)

jquery 移动转换的文档：http: [//jquerymobile.com/test/docs/pages/page-customtransitions.html](http://jquerymobile.com/test/docs/pages/page-customtransitions.html)

# objective-c - 来自 IB 的 GestureRecognizers 在模拟内存警告时崩溃应用程序

> ID：11279820
> 
> 赞同：2
> 
> 时间：2012-07-01T05:32:52.467
> 
> 标签：objective-c, ios, memory-leaks, uigesturerecognizer, exc-bad-access

我有一个从情节提要中提取的手势识别器，它工作得很好而且很花哨......

除非我模拟低内存警告。那时，它会因错误而崩溃：

```
[UISwipeGestureRecognizer retain]: message sent to deallocated instance 0x8627330 
```

为了让它不崩溃，我要做的就是将手势识别器设置为一个强属性，并在 viewdidload 中注释掉自动生成的集合为 nil：

```
//[self setSwipeGestureRecognizer:nil]; 
```

我随机得到了这个解决方案，我希望有人能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T18:27:30.973

迷人。当您第一次发布此内容时，我假设您的代码存在一些问题，但鉴于您的澄清评论，我决定自己尝试一下。我遇到与您相同的行为。

具体来说，我在 Interface Builder 中创建了一个手势识别器并将其链接到适当的`IBAction`并确认它工作正常，即使我推送到另一个视图控制器并从另一个视图控制器弹出。但是，如果我在该辅助视图控制器上模拟内存警告，则在返回原始视图控制器后立即收到与您相同的崩溃。

它很容易补救。看起来你有一个方法，或者你可以完全绕过 Interface Builder，并在代码中创建你自己的手势识别器，你不会有这个问题，例如，

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.

    UIPanGestureRecognizer *recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    [self.view addGestureRecognizer:recognizer];
    // [recognizer release]; // uncomment in non-ARC project
} 
```

如果您像这样手动创建它，则在模拟内存警告后返回视图时不会发生崩溃。所以这就是你的解决方案。

幸运的是，在 Xcode 和 iOS 的下一个版本的测试版中，这似乎已经得到了解决。

# jquery - 如何在元素上实现切换以使用 jQuery 更改 CSS？

> ID：11279824
> 
> 赞同：0
> 
> 时间：2012-07-01T05:34:51.897
> 
> 标签：jquery

我有以下html：

```
<a id="page-width" href="#" class="button">
    <div class="icon sprite-application-text" ></div>
</a> 
```

我怎样才能做到这一点，以便在单击链接时：

1.  班级更改为`<div class="icon sprite-application-sidebar-list.png" >`
2.  对象有`<section id="menu" class="grid_3"></section>`一个`width``0%`
3.  `<section id="content" class="grid_9"></section>`更改为 a`class`的对象`"grid_12"`

然后当再次单击它时，该类变回：

1.  `<div class="icon sprite-application-text" >`
2.  对象有`<section id="menu" class="grid_3"></section>`一个`width``23%`
3.  `<section id="content" class="grid_9"></section>`更改为 a`class`的对象`"grid_9"`

我需要某种切换操作，但我不知道如何用 jQuery 实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T05:44:03.733

你应该看看 jQuery 的[toggleClass()](http://api.jquery.com/toggleClass/) api。

您可以使用它轻松切换类。此外，要更改宽度，您可以在某些 css 类中定义它，以便在切换时设置所需的宽度。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T05:43:45.200

```
$(".icon sprite-application-text").removeClass("icon
sprite-application-text").addClass("icon
sprite-application-sidebar-list.png");

$(".icon sprite-application-sidebar-list.png").removeClass("icon
sprite-application-sidebar-list.png").addClass("icon
sprite-application-text");
if ($("#menu").width() == 0) 
{
   $("#menu").width("23%");
   $("#content").removeClass("grid-9").addClass("grid-12");
}
else
{
   $("#menu").width("0");
   $("#content").removeClass("grid-12").addClass("grid-9");
} 
```

# java - 部署在 Solaris 服务器中时如何在 Java 应用程序中添加库/jar 文件？

> ID：11279829
> 
> 赞同：0
> 
> 时间：2012-07-01T05:36:03.597
> 
> 标签：java, glassfish, solaris

我开发了一个在本地服务器上完美运行的 java 应用程序。但是当我将它上传到 solaris 服务器上时，它给出的错误没有在指示的地方找到： lib/ojdbc6.jar lib/jstl-1.2.jar lib/commons-codec-1.6.jar ；忽略并继续|#]

我该如何解决这个问题？

谢谢埃纳穆尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:19:46.650

此错误意味着您的应用程序正在类路径中查找这些 jar 并且找不到它们，您有两种选择：

1.  将这些 jar 复制到 Glassfish 库中 - 这是最简单的选项，但请注意，这将导致服务器上运行的所有其他应用程序也识别这些 jar。通常这不是问题，但如果有其他应用程序正在使用这些 jar 的其他版本，则可能会出现问题。

2.  打包你的 jar 及其所有依赖项。

# codeigniter - 在 codeigniter 中发送 AUTH LOGIN 命令失败

> ID：11279831
> 
> 赞同：7
> 
> 时间：2012-07-01T05:36:50.027
> 
> 标签：codeigniter, email

每次我尝试发送电子邮件时都会遇到一堆错误：

```
hello: 
The following SMTP error was encountered: 
Failed to send AUTH LOGIN command. Error: 
from: 
The following SMTP error was encountered: 
to: 
The following SMTP error was encountered: 
data: 
The following SMTP error was encountered: 

The following SMTP error was encountered: 
Unable to send email using PHP SMTP. Your server might not be configured to send mail using this method.
User-Agent: CodeIgniter
Date: Sun, 1 Jul 2012 20:47:47 +0000
From: "Rapphie" 
Return-Path: 
To: csorila17@gmail.com
Subject: =?iso-8859-1?Q?Email_Test?=
Reply-To: "alinorapjoseph@gmail.com" 
X-Sender: alinorapjoseph@gmail.com
X-Mailer: CodeIgniter
X-Priority: 3 (Normal)
Message-ID: <4ff0b7736810b@gmail.com>
Mime-Version: 1.0 
```

//..

好吧，我看不出有什么问题，但实际上，也许我错过了一些大的东西..这就是我的控制器中的东西..

```
$config = Array(
    'protocol' => 'smtp',
    'smtp_host' => 'smtp.googlemail.com',
    'smtp_port' => 465,
    'smtp_user' => 'alinorapjoseph@gmail.com',
    'smtp_pass' => '****',
    'mailtype'  => 'html', 
    'charset'   => 'iso-8859-1'
);
$this->load->library('email', $config);

            $this->email->from('alinorapjoseph@gmail.com','Rapphie');
            $this->email->to($email,'Charmie');
            $this->email->subject('Email Test');
            $this->email->message('Testing the email class.');

            $this->email->send();

            echo $this->email->print_debugger(); 
```

我不使用“ssl://smtp.gmail.com”，因为它给了我另一个错误，例如：

```
fsockopen(): unable to connect to ssl://smtp.gmail.com:465 (Unable to find the socket transport "ssl" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-15T05:08:53.660

尝试这个

```
 $from = 'noreply@example.com';
 $to   = 'bob@example.com';
 $subject = 'your subject';
 $message = 'your message';

 $this->load->library('email');

 $config['mailtype'] = 'html';
 $config['smtp_port']='465';
 $config['smtp_timeout']='30';
 $config['charset']='utf-8';
 $config['protocol'] = 'smtp';
 $config['mailpath'] = '/usr/sbin/sendmail';
 $config['charset'] = 'iso-8859-1';
 $config['wordwrap'] = TRUE;

 $this->email->initialize($config);
 $this->email->from($from);
 $this->email->to($to);
 $this->email->subject($subject);
 $this->email->message($message);

 // Sending Email
 $this->email->send(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-29T04:37:42.457

这里的银弹是

`$config['newline'] = "\r\n";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-28T00:59:04.057

在strato托管服务器上有类似的问题，我的解决方案正在改变，

```
$config['protocol'] = "smtp";
to:
$config['protocol'] = "sendmail"; 
```

# jquery - 删除某个班级后的所有班级

> ID：11279835
> 
> 赞同：3
> 
> 时间：2012-07-01T05:38:00.307
> 
> 标签：jquery, class, attr, removeclass

我有一个

```
<div id="thisdiv" class="class1 class2 class3 class4 class5">文本</div>
```

我需要能够使用 jQuery 删除 class3 之后的所有类。

就像是

```
$('#thisdiv').removeClass(all after class3); 
```

或者

```
$('#thisdiv').attr('class', all from class1 to class3); 
```

请问我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T05:45:43.793

您可以尝试以下方法，但您的类可能与它们在 HTML 源代码中出现的顺序不同：

```
$('#thisdiv').attr('class', function(i, v)
{
    var classes = v.split(' '),
        position = $.inArray('class3', classes);

    return classes.slice(0, position + 1).join(' ');
}); 
```

这是小提琴：http: [//jsfiddle.net/FNUK2/](http://jsfiddle.net/FNUK2/)

* * *

更简洁的方法是[对字符串本身进行切片](http://jsfiddle.net/FNUK2/1/)：

```
$('#thisdiv').attr('class', function(i, v)
{
    return v.substr(0, v.indexOf('class3') + 6);
}); 
```

但我发现使用数组更容易。

* * *

如果你想在 jQuery 链中使用它，你必须首先将它添加到 jQuery 的原型中：

```
$.fn.removeClassesAfter = function(className)
{
    return this.each(function()
    {
        $(this).attr('class', function(i, v)
        {
            var classes = v.split(' '),
                position = $.inArray(className, classes);

            return position == -1 ? v : classes.slice(0, position + 1).join(' ');
        });
    });
}; 
```

这是小提琴：http: [//jsfiddle.net/FNUK2/11/](http://jsfiddle.net/FNUK2/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T06:54:59.057

```
function removeAllClass(selector, after, before) {
    $(selector).attr('class', function(i, oldClass) {
        var arr = oldClass.split(' ');
        if (!before) {
            arr.splice(arr.indexOf(after)+1).join(' ');
            return arr.join(' ');
        } else {
            return arr.slice(arr.indexOf(after), arr.indexOf(before) + 1).join(' ');
        }
    });
} 
```

**利用：**

*   毕竟`class3`

    `removeAllClass('#thisdiv', 'class3');`

    **[演示](http://jsfiddle.net/FNUK2/6/)**

*   从`class1`到`class3`

    `removeAllClass('#thisdiv', 'class1', 'class3');`

    **[演示](http://jsfiddle.net/FNUK2/5/)**

### 根据评论

> 更新：我想知道是否可以使用 **$('#thisdiv').removeAllClass('class3');**

```
$.fn.removeAllClass = function(after, before) {
    $(this).attr('class', function(i, oldClass) {
        var arr = oldClass.split(' ');
        if (!before) {
            arr.splice(arr.indexOf(after) + 1).join(' ');
            return arr.join(' ');
        } else {
            return arr.slice(arr.indexOf(after), arr.indexOf(before) + 1).join(' ');
        }
    });
} 
```

**利用：**

*   毕竟`class3`

    `$('#thisdiv').removeAllClass('class3');`

    **[演示](http://jsfiddle.net/FNUK2/7/)**

*   从`class1`到`class3`

    `$('#thisdiv').removeAllClass('class1', 'class3');`

    **[演示](http://jsfiddle.net/FNUK2/9/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T05:54:51.893

**简单演示** [http://jsfiddle.net/XaBjX/](http://jsfiddle.net/XaBjX/)

行为：之后的任何内容都`class3`将被删除，您可以在屏幕上看到之前和之后的警报

使用的 API：`indexOf`, `prop`, `removeClass`.

希望这可以帮助，

**代码**

```
var getClass = $("#thisdiv").prop('class');
alert(" Classes before remove ==> " + getClass);

getClass = getClass.substr(getClass.indexOf('class3')+1);

$("#thisdiv").removeClass(getClass.toString());

alert("Classes After remove ==> "+ $("#thisdiv").prop('class'));​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T05:57:59.733

尝试这个：

```
var c = $('#thisdiv').prop('class')
$('#thisdiv').prop('class', c.slice(0, c.indexOf('3')+1)) 
```

[演示](http://jsfiddle.net/TuYQ7/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T06:07:59.240

正确地做这样的事情可能有点贵。您需要`class`通过迭代现有类并删除那些不符合您的标准的类来替换 attr。属性中的类的顺序`class`不保证是任何顺序，一般来说：

```
function removeAbove(prefix, max) {
    var regex = new RegExp('^' + prefix + '(\\d+)$');
    return function (v) {
        var match = regex.exec(v);
        if (!match || parseInt(match[1], 10) <= max) {
          return v;
        }
    }
}

function processClasses(keys, fn) {
    var i = keys.length,
        result = [],
        temp;
    while (i--) {
        temp = fn(keys[i]);
        if (temp) {
            result.push(temp);
        }
    }
    return result.join(' ');
}

$('#thisdiv').attr('class', function (idx, cls) {
    return processClasses(cls.split(' '), removeAbove('class', 3));
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-01T05:45:38.853

没有像这样处理“类”的内置方法。但是应该不乏处理切断字符串的方法，这就是全部。

获取类字符串 ( `getClass()`)，使用似乎满足您要求的任何字符串截断技术对其进行修改，然后使用`.attr('class', newString)`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-01T05:45:46.487

不，不能真正保证课程会按任何顺序排列。

如果它们以某种方式被索引，您可以将它们解析出来......但否则这将不起作用。如果您只是尝试存储信息，请考虑使用 HTML5 建模的 .data() 函数。

# ios - 如何比较数组？并改变属性？

> ID：11279837
> 
> 赞同：2
> 
> 时间：2012-07-01T05:38:26.520
> 
> 标签：ios, xcode, arrays, sorting, compare

我是新的 ios 开发人员，我想比较和更改属性

Array1 = (object1,object2,object3,object4) Array2 = (object2,object4,object5,object8)

比较 Array1 和 Array2 如果 Array2 中有相同的对象，则更改对象中的属性。

在上面的这种情况下，应该更改 Object2 和 Object4。

我应该怎么做？？

请帮我！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T07:51:17.390

您可以为此使用集合

```
NSMutableSet *array1Set = [NSMutableSet setWithArray:array1];
NSSet *array2Set = [NSSet setWithArray:array2];
[array1Set intersectSet:array2Set]; 
```

您现在有一个集合，其中仅包含两个数组中的对象。现在您可以`enumerateObjectsUsingBlock:`在集合上使用来操作对象或将集合转换回数组`NSArray *filteredArray = [array1Set allObjects]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T06:52:51.577

您可以使用快速枚举通过数组2，然后使用`containsObject:`检查它是否属于数组1：

```
for (id object in array2)
{
    if ([array1 containsObject:object])
    {
        // change your settings here
    } 
```

您还可以使用 创建一个新数组`filteredArrayUsingPredicate:`，或使用 获取匹配对象的索引路径`indexesOfObjectsPassingTest:`。您还没有说阵列中可能有多少对象，所以我不知道性能是否会成为问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T05:43:40.443

`n*n`我认为在这种情况下您必须进行搜索。遍历 Array1 中的每个对象，有一个嵌套循环并将 Array2 中的每个项目与当前对象（在 Array1 中）进行比较。如果它们相等，则更改您的属性。

```
for (int i = 0; i < [array1 count]; i++)
    for (int j = 0; j < [array2 count]; j++)
        if ([array1 objectAtIndex:i] == [array2 objectAtIndex:j]) {
            // do yo thangs
        } 
```

# java - 关于代码行

> ID：11279840
> 
> 赞同：-4
> 
> 时间：2012-07-01T05:38:44.580
> 
> 标签：java, string, collections, io

这次修改代码的目的是统计代码行数的目标是完美的下面是一段代码..

```
 /**
     * @param args
     * @throws FileNotFoundException
     */
    private static int totalLineCount = 0;
    private static int totalFileScannedCount = 0;

    public static void main(final String[] args) throws Exception {

        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
        chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);
        if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
            Map<File, Integer> result = new HashMap<File, Integer>();
            File directory = new File(chooser.getSelectedFile().getAbsolutePath());

            List<File> files = getFileListing(directory);

            // print out all file names, in the the order of File.compareTo()
            for (File file : files) {
               // System.out.println("Directory: " + file);
                getFileLineCount(result, file);
                //totalFileScannedCount += result.size(); //saral
            }

            System.out.println("*****************************************");
            System.out.println("FILE NAME FOLLOWED BY LOC");
            System.out.println("*****************************************");

            for (Map.Entry<File, Integer> entry : result.entrySet()) {
                System.out.println(entry.getKey().getAbsolutePath() + " ==> " + entry.getValue());
            }
            System.out.println("*****************************************");
            System.out.println("SUM OF FILES SCANNED ==>" + "\t" + totalFileScannedCount);
            System.out.println("SUM OF ALL THE LINES ==>" + "\t" + totalLineCount);
        }

    }

    public static void getFileLineCount(final Map<File, Integer> result, final File directory)
            throws FileNotFoundException {
        File[] files = directory.listFiles(new FilenameFilter() {

            public boolean accept(final File directory, final String name) {
                if (name.endsWith(".java")) {
                    return true;
                } else {
                    return false;
                }
            }
        });
        for (File file : files) {
            if (file.isFile()) {
                Scanner scanner = new Scanner(new FileReader(file));
                int lineCount = 0;
                totalFileScannedCount ++; //saral
                try {

                    /*for (lineCount = 0; scanner.nextLine() != null;lineCount++ ) { //saral
                        ;

                    }*/

                    while (scanner.hasNextLine()) {
                           String line = scanner.nextLine().trim();
                           if (!line.isEmpty()) {
                              System.out.println("debug-->"+line); // to debug cross checked that no whitespaces are there 
                             lineCount++;
                           }
                    }

                     result.put(file, lineCount);
                     totalLineCount += lineCount;                               
                } catch (NoSuchElementException e) {
                     e.printStackTrace();
                }
            }
        }

    }

    /**
     * Recursively walk a directory tree and return a List of all Files found;
     * the List is sorted using File.compareTo().
     * 
     * @param aStartingDir
     *            is a valid directory, which can be read.
     */
    static public List<File> getFileListing(final File aStartingDir) throws FileNotFoundException {
        validateDirectory(aStartingDir);
        List<File> result = getFileListingNoSort(aStartingDir);
        Collections.sort(result);
        return result;
    }

    // PRIVATE //
    static private List<File> getFileListingNoSort(final File aStartingDir) throws FileNotFoundException {
        List<File> result = new ArrayList<File>();
        File[] filesAndDirs = aStartingDir.listFiles();
        List<File> filesDirs = Arrays.asList(filesAndDirs);
        for (File file : filesDirs) {
            if (file.isDirectory()) {
                result.add(file);
            }
            if (!file.isFile()) {
                // must be a directory
                // recursive call!
                List<File> deeperList = getFileListingNoSort(file);
                result.addAll(deeperList);
            }
        }
        return result;
    }

    /**
     * Directory is valid if it exists, does not represent a file, and can be
     * read.
     */
    static private void validateDirectory(final File aDirectory) throws FileNotFoundException {
        if (aDirectory == null) {
            throw new IllegalArgumentException("Directory should not be null.");
        }
        if (!aDirectory.exists()) {
            throw new FileNotFoundException("Directory does not exist: " + aDirectory);
        }
        if (!aDirectory.isDirectory()) {
            throw new IllegalArgumentException("Is not a directory: " + aDirectory);
        }
        if (!aDirectory.canRead()) {
            throw new IllegalArgumentException("Directory cannot be read: " + aDirectory);
        }
    } 
```

但问题是，当它在控制台上显示结果时会引发以下异常，请告知如何克服

```
*****************************************
FILE NAME FOLLOWED BY LOC
*****************************************
C:\Users\vaio\Desktop\Demo\fg\src\asd\abv.java ==> 9
*****************************************
SUM OF FILES SCANNED ==>    1
SUM OF ALL THE LINES ==>    9
Exception while removing reference: java.lang.InterruptedException
java.lang.InterruptedException
    at java.lang.Object.wait(Native Method)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at sun.java2d.Disposer.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:47:15.980

问题是您正在更新块`totalLineCount`内部`catch`。把它移到外面。

```
 } catch (NoSuchElementException e) {
                result.put(file, lineCount); // <-- 
                totalLineCount += lineCount; // <--  
            } 
```

到

```
 result.put(file, lineCount); 
              totalLineCount += lineCount;   
            } catch (NoSuchElementException e) {
              e.printStackTrace();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T05:47:28.723

只有在发生 NoSuchElement 异常时才更新 totalLineCount。您应该将其移到 try catch 语句之外或将其放在 finally 块中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T05:47:36.447

你有

```
totalLineCount += lineCount; 
```

在 catch 块中，但在 try 块中，我看不到任何会导致抛出 NoSuchElementException 的东西。将 catch 块代码移至 try 块，该代码似乎不适合作为异常处理程序。至少如果你仍然想在发生异常的情况下执行它，请将它放在 finally 块中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T06:11:56.177

我已经修改了您的代码，尝试了解我为使您的代码正常工作所做的工作-

```
 public class LineCount{ 
private static int totalLineCount = 0;
private static int totalFileScannedCount = 0;

public static void main(final String[] args) throws FileNotFoundException {

    JFileChooser chooser = new JFileChooser();
    chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
    chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    chooser.setAcceptAllFileFilterUsed(false);
    if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
        Map<File, Integer> result = new HashMap<File, Integer>();
        File directory = new File(chooser.getSelectedFile().getAbsolutePath());

        List<File> files = getFileListing(directory);

        // print out all file names, in the the order of File.compareTo()
        for (File file : files) {
           // System.out.println("Directory: " + file);
            result  = getFileLineCount(result, file);
            totalFileScannedCount += result.size(); //saral
        }

        System.out.println("*****************************************");
        System.out.println("FILE NAME FOLLOWED BY LOC");
        System.out.println("*****************************************");

        for (Map.Entry<File, Integer> entry : result.entrySet()) {
            System.out.println(entry.getKey().getAbsolutePath() + " ==> " + entry.getValue());
        }
        System.out.println("*****************************************");
        System.out.println("SUM OF FILES SCANNED ==>" + "\t" + totalFileScannedCount);
        System.out.println("SUM OF ALL THE LINES ==>" + "\t" + totalLineCount);
    }

}

public static Map<File, Integer> getFileLineCount(final Map<File, Integer> result, final File file)
        throws FileNotFoundException {

    if (file.isFile()) {
            Scanner scanner = new Scanner(new FileReader(file));
            int lineCount = 0;
           // totalFileScannedCount ++; //saral
            try {
                /*for (lineCount = 0; scanner.nextLine() != null; ) { //saral
                    ;

                }*/

                while (scanner.hasNextLine()) {
                       String line = scanner.nextLine().trim();
                       if (!line.isEmpty()) {
                           System.out.println("debug-->"+line); // to debug cross checked that no whitespaces are there 
                         lineCount++;
                       }
                }

            } catch (NoSuchElementException e) {

            }
            result.put(file, lineCount);
            totalLineCount += lineCount;
        }
    return result;
    }

//}

/**
 * Recursively walk a directory tree and return a List of all Files found;
 * the List is sorted using File.compareTo().
 * 
 * @param aStartingDir
 *            is a valid directory, which can be read.
 */
static public List<File> getFileListing(final File aStartingDir) throws FileNotFoundException {
    validateDirectory(aStartingDir);
    List<File> result = getFileListingNoSort(aStartingDir);
    Collections.sort(result);
    return result;
}

// PRIVATE //
static private List<File> getFileListingNoSort(final File aStartingDir) throws FileNotFoundException {
    List<File> result = new ArrayList<File>();
    File[] filesAndDirs = aStartingDir.listFiles(new FilenameFilter() {

        public boolean accept(final File directory, final String name) {
            if (name.endsWith(".java")) {
                return true;
            } else {
                return false;
            }
        }
    });

    List<File> filesDirs = Arrays.asList(filesAndDirs);

    for (File file : filesDirs) {
        if (file.isFile()) {
            result.add(file);
        }
        if (!file.isFile()) {
            // must be a directory
            // recursive call!
            List<File> deeperList = getFileListingNoSort(file);
            result.addAll(deeperList);
        }
    }
    return result;
}

/**
 * Directory is valid if it exists, does not represent a file, and can be
 * read.
 */
static private void validateDirectory(final File aDirectory) throws FileNotFoundException {
    if (aDirectory == null) {
        throw new IllegalArgumentException("Directory should not be null.");
    }
    if (!aDirectory.exists()) {
        throw new FileNotFoundException("Directory does not exist: " + aDirectory);
    }
    if (!aDirectory.isDirectory()) {
        throw new IllegalArgumentException("Is not a directory: " + aDirectory);
    }
    if (!aDirectory.canRead()) {
        throw new IllegalArgumentException("Directory cannot be read: " + aDirectory);
    }
}

} 
```

我把上面的java文件放在一个文件夹里，运行这段代码——结果如下——

* * *

文件名后跟 LOC

* * *

/home/hkr/Desktop/LineCount.java ==> 129

* * *

扫描文件的总和 ==> 1 所有行的总和 ==> 129

# objective-c - ios - 核心数据更新记录

> ID：11279843
> 
> 赞同：5
> 
> 时间：2012-07-01T05:39:08.940
> 
> 标签：objective-c, ios, core-data

我目前正在查看文档和网络，但我没有看到我正在寻找的内容，我只想确认我正在寻找的内容是否存在:-)

据我了解 - 这行代码允许我向 SQLite 数据库添加一条记录，我通过 Core Data 在我的应用程序中显示该记录：

```
NSManagedObject *newSoftware = [NSEntityDescription insertNewObjectForEntityForName: 
```

现在是否有类似的行允许我更新我正在处理的记录？

像这样的东西？

```
NSManagedObject *newSoftware = [NSEntityDescription updateCurrentObjectForEntityForName: 
```

非常感谢您的反馈:-)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T06:24:15.727

要更新记录，您只需更新`NSManagedObject`的属性。如果您使用的是 CoreData，则应该`NSManagedObject`为每个“表”设置 s。查询数据库后获取对对象的引用（使用`NSFetchRequest`）。然后您可以像这样更新记录：`myObject.firstName = "John";` 当您准备好更新 Sqlite 数据库中的对象时，只需调用您`NSManagedContext`的`save`方法。我建议使用 CoreData 示例应用程序（如 Xcode 生成的默认应用程序）以更好地理解这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-01T11:00:53.697

这是我之前的回答。了解发生了什么非常详细。

[如何更新 Core Data 中的现有对象？](https://stackoverflow.com/questions/10571786/how-to-update-existing-object-in-core-data/10572134#10572134)

根据**fumoboy007**评论，如果您尚未为托管对象设置子类，则必须通过 KVC 更新您的对象。如果你还没有，我建议创建它。代码看起来更简洁，因为您可以通过属性访问托管对象。

这里有一个链接：

[为 ios 组织核心数据](http://blog.chrismiles.info/2011/06/organising-core-data-for-ios.html)

# console - 谷歌开发者控制台统计页面

> ID：11279848
> 
> 赞同：0
> 
> 时间：2012-07-01T05:39:55.810
> 
> 标签：console

我昨晚刚刚发布了我的第一个应用程序（耶！），我今天检查了开发者控制台，下载/安装的计数器仍然为零，这是我所预料的。我不认为他们会经常更新它。我没有看到的是这个带有趋势图表的“统计”页面，以及其他开发人员谈到的，您可以在其中使用图表等跟踪其他统计数据。在我的开发者控制台中没有指向它的链接，所以我觉得我找错地方了。有人可以帮忙找到吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:07:10.910

您必须至少安装 1 次才能看到任何统计信息。完成后，您将在 # of installs 下看到一个**统计链接。**

# c# - 有效的 div 标识符名称 ASP.NET

> ID：11279852
> 
> 赞同：0
> 
> 时间：2012-07-01T05:40:26.047
> 
> 标签：c#, asp.net, html

我正在为客户开发一个新项目；他们提供了我需要转移到我们的内容管理系统的网站设计。

.NET 似乎不喜欢散布在整个主题中的 id。

有什么理由 - throws ...不是有效的标识符吗？

为任何回应欢呼。

**例子**

```
<form id="login-form" runat="server">

<input type="text" name="username" runat="server" id="login-username" placeholder="Username" /> 
```

**更新**

似乎将 - 更改为 _ 解决了这个问题。下面回答！

马特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T06:18:26.380

在 ASP.NET 中，当您使用 时`runat="SERVER"`，“ID”命名约定必须遵循属性和字段的命名约定。字段名称中不允许使用“-”字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:08:31.943

问题可能是这些 id 之间的“-”（连字符）符号。有时在样式表中使用此类 ID 时必须谨慎。删除它们，看看是否有帮助

# ruby - 为什么 fancybox 不能在我的 octopress 博客中使用？

> ID：11279855
> 
> 赞同：0
> 
> 时间：2012-07-01T05:42:00.403
> 
> 标签：ruby, fancybox, blogs, octopress

正如标题所说，fancybox 在我的 octopress 博客中无法正常工作？我的github项目地址：[https](https://github.com/tinyxd/tinyxd.github.com) ://github.com/tinyxd/tinyxd.github.com 我的博客地址：http: [//tinyxd.me](http://tinyxd.me)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:17:27.500

我还没有评论的特权，但我想让你试试这个：[http ://www.forceappx.com/blog/2011/12/28/getting-fancybox-to-play-nice-with-octopress /](http://www.forceappx.com/blog/2011/12/28/getting-fancybox-to-play-nice-with-octopress/)

# visual-studio - 签名者的证书对签名无效

> ID：11279858
> 
> 赞同：13
> 
> 时间：2012-07-01T05:42:39.617
> 
> 标签：visual-studio, sharepoint, visual-studio-debugging

在 Visual Studio 中调试时出现此错误

> 签名者的证书对签名无效，尝试签名时发生错误：sharepoint_link.dll，命令
> “C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\signtool.exe”签名/f
> "C:\Users\Administrator\Documents\GitHub\SPLink2010\SharePoint_Link\ITOPIA_certificate2.p12"/p $h0pp1ng /t " [http://tsa.starfieldtech.com](http://tsa.starfieldtech.com) " "SharePoint_Link.dll""
> 以代码 1 退出

我创建了一个新的测试证书并通过证书导入向导将其导入，但我仍然收到此错误。我还使用删除了旧的临时证书，`certmgr.exe`但徒劳无功，我仍然收到此错误。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-02-18T13:23:26.217

这很简单; 只需按照以下步骤操作：

1.  **在右侧面板的解决方案资源管理器中**右键单击项目**，然后从上下文菜单中选择**属性。***请记住右键单击 Main Project，而不是 solution*。**

***   将打开一个窗口，然后单击“**签名**”选项卡。

    *   在那里您可以看到一个按钮**Create Test Certificate**，单击它，它将要求输入密码，只需将其留空即可。**

# asp.net-mvc - 尝试将 List Linq 查询返回到 MVC3 视图出现错误“有一些无效参数”

> ID：11279862
> 
> 赞同：0
> 
> 时间：2012-07-01T05:43:12.993
> 
> 标签：asp.net-mvc, asp.net-mvc-3, generics, linq-to-entities

我有一个名为 Property 的类，我只需要在我的列表视图中显示几个项目。我创建了一个 Linq 查询以仅返回我的控制器 Index 方法中的那些项目。我已经实例化了

```
List<Property> props = new List<Property>(); 
```

在控制器的 Index 方法中，但是当我尝试“添加”到*道具*列表“props.Add(getProp);” 我收到此错误：

“匹配的最佳重载方法`System.Collections.Generic.List<PropertyEntities.Property>.Add(PropertyEntities.Property)` 有一些无效参数”

我在下面包含了 PropertyControler 索引方法和我正在使用的 Property 类：

```
 public ViewResult Index()
    {
        //var properties = db.Properties.Include(p => p.PropertyType);

        var getProp = from p in db.Properties
                      orderby p.PropName
                      select new
                      {
                          p.PropertyID,
                          p.PropName,
                          p.PropertyStatus,
                          p.City,
                          p.State,
                          p.Bedrooms,
                          p.PropertyType
                      };

        List<Property> props = new List<Property>();
        props.Add(getProp);
        return View(props);
    }

public partial class Property 
{
    //public int temp { get; set; }

    // Values stored in the view Garage DropDownList
    public enum GarageType{ None = 0, One = 1, Two = 2, Three = 3, Four = 4, Carport = 5, Other = 6 }

    public enum PropertyStatusType { Leased = 0, Available = 1, Selling = 2, Sold = 4 }

    [Required]
    [ScaffoldColumn(false)]
    public int PropertyID { get; set; }

    [Required(ErrorMessage="Generic name for referencing."),
     StringLength(30, ErrorMessage = "Property name max length is 30 characters."),
     Display(Name="Property Name", Prompt="Enter Property Name")]
    public string PropName { get; set; }

    [Required(ErrorMessage="Select a status for this property."),
    Display(Name="Property Status")]
    public int PropertyStatus { get; set; }

    // used in corolation with the property PropertyStatus
    // to allow dropdown list to except Enum values
    // PropertyStatusType
    public PropertyStatusType PropertyEnumStatus
    {
        get { return (PropertyStatusType)PropertyStatus; }
        set { PropertyStatus = (int)value; }
    }

    [Required(ErrorMessage="Select a property type.")]
    public int PropertyTypeId { get; set; }

    [Required(ErrorMessage="Address is required."),
     StringLength(75, ErrorMessage="Address max length is 75 characters.")]
    public string Address { get; set; }

    [Required(ErrorMessage = "City name is required."),
     StringLength(25, ErrorMessage = "City max length is 25 characters.")]
    public string City { get; set; }

    [Required(ErrorMessage = "State abbreviation is required."),
     StringLength(2, ErrorMessage = "State max length is 2 characters.")]
    public string State { get; set; }

    [Required(ErrorMessage = "Zip Code is required."),
     StringLength(5, ErrorMessage = "Zip Code max length is 5 numbers."),
    Range(00001, 99999)]
    [Display(Name="Zip Code")]
    public string ZipCode { get; set; }

    [Required(ErrorMessage="Square feet is required."),
     Display(Name="Square Feet")]
    public int SquareFeet { get; set; }

    [Required(ErrorMessage = "Number of bedrooms is required."),
    Range(0,10)]
    public int Bedrooms { get; set; }

    [Required(ErrorMessage="Number of bathrooms is required."),
    Range(0,20)]
    public int Bathrooms { get; set; }

    public int Garage { get; set; }

    // used in corolation with the property Garage
    // to allow dropdown list to except Enum values
    // of GarageType
    [NotMapped]
    public GarageType GarageEnumValue
    {
        get { return (GarageType)Garage; }
        set{ Garage = (int)value; }
    }

    [Display(Name="Morgage Amount"),
    Range(0.00, 100000000.00)]
    public Nullable<decimal> MonthlyMortgage { get; set; }

    [Display(Name="HOA Dues"), 
    Range(0.00, 1000.00)]
    public Nullable<decimal> HousingDues { get; set; }

    [Display(Name="Property Tax"),
    Range(0.0, 100000000.00)]
    public Nullable<decimal> Tax { get; set; }

    [Display(Name="Property Insurance"),
    Range(0.0, 100000000.00)]
    public Nullable<decimal> Insurance { get; set; }

    [Display(Name="Assessed Value"),
    Range(0.0, 100000000.00)]
    public Nullable<decimal> AssessedValue { get; set; }

    [Display(Name="Current Value"),
    Range(0.0, 100000000.00)]
    public Nullable<decimal> CurrentValue { get; set; }

    [DataType(DataType.MultilineText)]
    [StringLength(500, ErrorMessage="You have reached the allotted 500 characters.")]
    public string Notes { get; set; }

    public virtual ICollection<Lease> Leases { get; set; }

    public virtual PropertyType PropertyType { get; set; }

    public virtual ICollection<Service> Services { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:15:33.903

当您需要实体属性的子集或实体属性子集的混合时，创建 ViewModel 类

```
public class PropertyViewModel {
    public int PropertyID {get;set;}
    public string PropName {get;set;}
    public int PropertyStatus {get;set;}
    //etc.
    public PropertyType PropertyType {get;set;}
} 
```

然后为每个属性选择新的 PropertyViewModel （或使用 AutoMapper，这可以满足您的需要[https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)）

```
public ViewResult Index()
    {
        var properties = db.Properties.Include(prop => prop.PropertyType)
                 .Select(p => new PropertyViewModel {
                                 PropertyID = p.PropertyID,
                                 PropName = p.PropName,
                                 //etc.
                              })
                  .ToList();
        return View(properties);//View's model should be of tye IList<PropertyViewModel> (or IEnumerable)
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T07:49:05.783

好吧，看起来您正在`IEnumerable<T>`从 linq 查询返回一个匿名类型，但期望`List<Property>`接受这些对象作为 type `Property`。所以`Add`方法自然会抵抗。

# c# - 使用c#将复选框列表从一个组框移动到另一个组框的Windows窗体

> ID：11279863
> 
> 赞同：-2
> 
> 时间：2012-07-01T05:43:27.237
> 
> 标签：c#

此表单是使用菜单1下的Windows应用程序创建的，单击子菜单时也有子菜单我必须在单击复选框并单击移动按钮时在组框中显示复选框列表命令列表应显示在另一个组框上，我必须按钮“删除”和“清除”单击删除按钮应从列表中删除所选命令，单击清除按钮显示的列表命令应从组框中清除，我还想在消息框中显示选中的复选框列表使用 c# 的 windows 窗体

任何人都可以帮我解决这个问题..请也给我提供代码....

```
 With Regards,
         Sweety 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T05:57:07.427

假设你有 [chkList1 : your first CheckListBox] , [lstBox1 : your destination]
btnAdd, btnDel, btnClear

```
 private void btnAdd_Click(object sender, EventArgs e)
    {
        foreach (var item in chkList1.SelectedItems)
        {
            if (!lstBox1.Items.Contains(item))
                lstBox1.Items.Add(item);
        }
    }

    private void btnDel_Click(object sender, EventArgs e)
    {
        foreach (var item in lstBox1.SelectedItems)
        {
            lstBox1.Items.Remove(item);
        }
    }

    private void btnClear_Click(object sender, EventArgs e)
    {
        lstBox1.Items.Clear();
        //if you want to hide the lstBox you'll write
        //lstBox1.Visible = true;
    } 
```

# ios - UI 吐槽能力

> ID：11279866
> 
> 赞同：0
> 
> 时间：2012-07-01T05:43:42.040
> 
> 标签：ios, objective-c, ipad, uisplitviewcontroller

id 真的很想在应用程序中尝试一些东西，但想知道它是否可以完成。

使用 UI 拆分视图，我们知道如果我们更改左视图...右视图发生更改，因此示例我们有一个包含猫名的左视图。因此，每次我们在左侧视图控制器中更改猫的名称时，我们都会在右侧看到猫的图像。但我想知道猫的名字是否有可能在前一个屏幕中传递。当我们改变左控制器时，我们会得到那只特定猫的不同特征，比如眼睛颜色、颜色等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T11:27:25.607

左视图通常有一个导航控制器，这意味着您可以向下钻取各种级别的信息和选择，直到您到达需要使用右侧以获得更多细节的那个。

# django-celery - 在 django 中使用 raven 和芹菜

> ID：11279868
> 
> 赞同：2
> 
> 时间：2012-07-01T05:44:03.220
> 
> 标签：django-celery, sentry, raven

我正在尝试设置 raven 以使用 celery 异步登录到哨兵。我想我已经正确设置了，但是没有调用 CeleryClient 中的 send_raw 函数（并且在哨兵或芹菜中没有任何东西被拾取）。如果我不更改下面的 SENTRY_CLIENT 设置（日志出现在哨兵中），事情就会起作用。我的设置是：

```
SENTRY_CLIENT = 'raven.contrib.django.celery.CeleryClient' 
```

已安装的应用程序：

```
'raven.contrib.django',    
# sentry.client.celery should be replaced with raven.contrib.django.celery in INSTALLED_APPS.    
'raven.contrib.django.celery', 
```

记录：

```
记录 = {
    “版本”：1，
    'disable_existing_loggers'：是的，
    '根'： {
        'level': 'WARNING', # 任何警告或以上的东西都会去哨兵...
        'handlers': ['sentry'], # TARAS 这是将所有错误发送到 Sentry 的原因
    },
    “格式化程序”：{
        '详细'：{
            'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
        },
    },
    “处理程序”：{
        “哨兵”：{
            '级别'：'错误'，
            'class': 'raven.contrib.django.handlers.SentryHandler', # 这是与 Sentry 通信的内容
        },
        '安慰'： {
            '级别'：'调试'，
            '类'：'logging.StreamHandler'，
            “格式化程序”：“详细”
        }
    },
    “记录器”：{
        'django.db.backends': {
            '级别'：'错误'，
            '处理程序'：['控制台']，
            “传播”：错误，
        },
        '掠夺'： {
            '级别'：'调试'，
            # 类 logging.StreamHandler(stream=None)
            # 返回 StreamHandler 类的新实例。如果指定了流，实例将使用它来记录输出；否则，将使用 sys.stderr。            
            'handlers': ['sentry'], # sentry命中sentry配置如上，console默认按照上面streamhandler的定义命中stderr
            “传播”：错误，
        },
        'sentry.errors'：{
            '级别'：'调试'，
            '处理程序'：['控制台']，
            “传播”：错误，
        },
    },
}

```

我已将 CeleryClient 修改为

```
CeleryClient 类（CeleryMixin，DjangoClient）：
    def send_integrated(self, kwargs):
        self.send_raw_integrated.delay(kwargs)
        打印“哟”

    @task(routing_key='sentry')
    def send_raw_integrated(self, kwargs):
        超级（CeleryClient，self）.send_integrated（kwargs）
        打印“yo2”

```

而且痕迹不出来

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:10:24.700

raven 中的 celery 客户端在任务上使用了路由键：

```
class CeleryMixin(object):
    def send_encoded(self, *args, **kwargs):
        "Errors through celery"
        self.send_raw.delay(*args, **kwargs)

    @task(routing_key='sentry')
    def send_raw(self, *args, **kwargs):
        return super(CeleryMixin, self).send_encoded(*args, **kwargs) 
```

Django 默认使用直接交换类型：

[http://docs.celeryproject.org/en/latest/userguide/routing.html](http://docs.celeryproject.org/en/latest/userguide/routing.html)

这意味着（我相信）芹菜产生的消息不会被路由到队列（因此​​永远不会被拾取）。

您可以定义它，例如：

```
CELERY_QUEUES = {
    "default": {
        "exchange": "default",
        "binding_key": "default"},
    "sentry": {
        "exchange": "default",
        "binding_key": "sentry"},
} 
```

# reporting-services - 部署到报告服务器时出现“找不到指定的报告服务器 url”错误

> ID：11279871
> 
> 赞同：24
> 
> 时间：2012-07-01T05:45:03.920
> 
> 标签：reporting-services

我想部署在 SQL Server Business Intelligence Development Studio 2008 R2 中创建的报表。我已经设置`TargetServerURL`为`http://mohammad-pc/Reports`. 我可以通过浏览器访问此路径，但想要部署我得到的报告：

> “找不到指定的报表服务器 url”

还有其他我错过的设置吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-01T09:27:43.480

通常，在默认安装中，您将拥有两个 URL：

*   `http://yourmachine/ReportServer`-[用于访问 Web 服务和部署报告](http://msdn.microsoft.com/en-us/library/ms159261.aspx)
*   `http://yourmachine/Reports`- 用于访问基于浏览器的管理前端

根据您的设置，第一个 URL 可能会有所不同，例如端口号可能不同或`_SQLEXPRESS`可能添加后缀。

[另请参阅本文档](http://technet.microsoft.com/en-us/library/bb630447.aspx)的最后一部分以获取一些示例 URL。以下是有关链接外观的相关报价：

> ...报表服务器 URL 可能类似于：
> - `http://localhost/reportserver`
> - `http://localhost/reportserver_SQLEXPRESS`
> - `http://sales01/reportserver`
> - `http://sales01:8080/reportserver`
> - `https://sales.adventure-works.com/reportserver`
> -`https://www.adventure-works.com:8080/reportserver01`
> 
> ...用于访问报告管理器的 URL...
> - `http://localhost/reports`
> - `http://localhost/reports_SQLEXPRESS`
> - `http://sales01/reports`
> - `http://sales01:8080/reports`
> - `https://sales.adventure-works.com/reports`
> -`https://www.adventure-works.com:8080/reports`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-01T09:20:11.940

我找到了解决方案。我的网址是错误的。为了获得正确的 URL，我进入了开始菜单 > SQL Server 2008 > 配置工具 > Reporting Services 配置。在 Web 服务 URL 部分有一个虚拟目录，它是我计算机上 SSRS 目录的目录。所以正确的 URL 是“http://localhost/[Reporting Service Virtual directory]”。就我而言，它是“http://localhost/ReportServer_SQL2008”。

这里有一篇很好的文章：

[http://alexduggleby.com/2008/07/18/sql-server-reporting-services-2008-tutorial-in-5-minutes-or-how-to-send-my-boss-a-report-from-快速查看/](http://alexduggleby.com/2008/07/18/sql-server-reporting-services-2008-tutorial-in-5-minutes-or-how-to-send-my-boss-a-report-from-a-view-quickly/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-11T16:15:49.803

最近我遇到了同样的问题...测试我发现您需要转到项目->属性，然后将以下选项更改为：

> TargetReportPartFolder：[报表管理器 URL 的虚拟目录] TargetServerURL：http://yourPCName/[Web 服务 URL 的虚拟目录]

这对部署您的项目很有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-19T09:57:51.997

除此之外，我也遇到了这个问题。我的报表服务器运行了好几个月，我有大约 30 个报表，并且几乎每周都会对它们进行不断更新，重新部署报表或创建新报表，但是它只是停止部署一天（尽管我可以在我们的应用程序中看到它们）已将他们绑定到）

错误是**502 host not found**。我感觉这与 IT 在我的公司进行更改有关，但是我需要做的就是修复它，将报告服务器名称更改为属性设置中的本地主机。

项目 / [项目名称] 属性

> 在 TargetServerURL 的常规选项卡上，它曾经说：
> 
> [http://GSV-REP01/ReportServer](http://GSV-REP01/ReportServer)

但后来我把它改成了这样：

> [http://localhost:8080/ReportServer](http://localhost:8080/ReportServer)

它再次开始工作，没有任何问题。希望这对某人有所帮助，SSRS 有时真的很痛苦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-05T02:41:52.020

您可以执行以下步骤来获取正确的报表服务 URL

1.  打开 Reporting Services 配置管理器，您可以通过 windows 开始按钮搜索它
2.  系统将提示您连接到可用的报告服务数据库，单击连接。
3.  选择 Report Manager URL，您将在其中看到您的 url，通常模式为 http:// **YOURHOSTNAME** :80/Reports_ **SQLVERSION**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-12T12:26:41.247

在项目属性中使用`http://localhost/reportserver`或`http://mohammad-pc/reportserver`作为 TargetServerURL。

# excel - Excel：列中最后一个非空单元格的内容（活动单元格上方）

> ID：11279878
> 
> 赞同：0
> 
> 时间：2012-07-01T05:46:35.293
> 
> 标签：excel, vba

我有一列可以连续包含任意数量的空白单元格。一个单元格是否为空白以复杂的方式取决于其他几列的内容。如果单元格不是空白的，它应该包含 1 加上前一个非空白单元格的内容（即同一列中位于其上方的最低的非空白单元格）。我需要动态更新这些数字。

如何找到列中最后一个非空白单元格的值？

我更愿意通过公式来做到这一点，但如果没有可行的公式方法，我愿意使用 VBA 方法。

如果我能得到任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:09:32.433

VBA 用户定义函数：

```
Function PrevPlus()
    Application.Volatile
    PrevPlus = Application.Caller.End(xlUp).Value + 1
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:25:20.453

如果这些单元格中有数字，那么 A100 中的这个公式将找到 A1:A99 中的前一个数字

`=LOOKUP(9.99E+307,A1:A99)`

# javascript - SlickGrid 取消选择行复选框事件

> ID：11279884
> 
> 赞同：0
> 
> 时间：2012-07-01T05:47:22.547
> 
> 标签：javascript, jquery, html, slickgrid

我是 jQuery 新手，我需要在我的项目中使用网格。我选择了 SlickGrid（确实很漂亮）。取消选择行时，我需要禁用某些按钮。

我正在使用以下回调：

```
grid.onSelectedRowsChanged.subscribe(function(){}); 
```

问题是回调仅在选择时执行 - 而不是在取消选择行时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:28:30.353

```
var lastSelectedRow = null;

grid.onSelectedRowsChanged.subscribe(function () {
    if (lastSelectedRow && lastSelectedRow != grid.getSelectedRows()[0]) {        
        var item = dataView.getItem(lastSelectedRow);
        // Do something with item;
    }

    lastSelectedRow = grid.getSelectedRows()[0];

    // other logic may go here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:27:47.763

```
grid.onSelectedRowsChanged.subscribe(function(){
     var selectedRows = grid.getSelectedRows();
     if (selectedRows.length === 0) {
          // (when all rows are deselected)
          // your logic goes here...
     }
}); 
```

如果您想在任何取消选择的行上执行逻辑，我建议将 selectedRows 存储在全局变量中，该变量将在 SelectedRowsChanged 事件中更新。同样在 onSelectedRowsChanged 中，您可以比较全局 selectedRows 变量和 grid.getSelectedRows() 长度以查看是否发生了任何更改。

```
var lastSelectedRows = [];    
grid.onSelectedRowsChanged.subscribe(function(){
     var selectedRows = grid.getSelectedRows();
     if (selectedRows.length < lastSelectedRows.length ) {
        // proceed in finding the actual row by comparing the two arrays
        // the rest of the logic goes here...
      }
      lastSelectedRows =  selectedRows;
 }); 
```

**！请注意，我是 Slickgrid 世界的新手，这可能不是最好的解决方案。我只是觉得值得一试**。

# java - Java中文本区域中的链接文本

> ID：11279889
> 
> 赞同：1
> 
> 时间：2012-07-01T05:49:12.863
> 
> 标签：java, swing, url, richtextbox, jtextarea

我需要用户能够在输入表单的文本区域中输入文本，并能够在该文本的某些部分创建可点击的链接（链接由表单中的按钮插入，并且是对应用程序中其他位置的引用，而不是 WWW 链接）。
我怎样才能做到这一点？
这有什么组件吗？

# java - 无法在 cpanel+ tomcat 中运行 servlet

> ID：11279891
> 
> 赞同：0
> 
> 时间：2012-07-01T05:49:14.080
> 
> 标签：java, jsp, tomcat, servlets, cpanel

我使用 tomcat + cpanel 。我的 jsps 和标签正确运行但无法运行 servlet。

我的 web.xml 内容是：

```
 <servlet>
        <servlet-name>Servlet1</servlet-name>
        <servlet-class>pack1.Servlet1</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Servlet1</servlet-name>
        <url-pattern>/Servlet1</url-pattern>
    </servlet-mapping> 
```

当请求 www.mydomain.com/Servlet1 得到这个错误（404）：

```
Not Found

The requested URL /Servlet1 was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:34:31.060

cpanel 建议您使用的是第 3 方主机。由于系统限制，许多廉价的第 3 方主机部署 servlet 的规则不同。您应该阅读他们的开发人员指南/文档/常见问题解答如何在其主机上正确部署 servlet。例如，某些第 3 方主机需要特定的文件夹或包结构，或者它们需要特定的 URL 结构。

例如，Godaddy 要求您使用`/servlet/YourServletClassName`带有`/servlet`前缀路径的 URL 结构，另请参阅[他们的常见问题解答](http://support.godaddy.com/help/article/65/adding-a-java-servlet-to-your-web-site)。

如果您想要完全控制部署或想要遵循标准的 Java EE 规则，您宁愿寻找不同的主机。例如，[OpenShift](http://openshift.redhat.com/)是一个完全免费的云托管服务，使用成熟的 JBoss AS 7 应用服务器，包括 EJB 和 JPA 支持以及所有在 em 和 MySQL 和 PostgreSQL 数据库之间的自由选择。

# android - 如何以编程方式确保用户使用 AlertDialog.Builder 选择了一个选项？

> ID：11279892
> 
> 赞同：0
> 
> 时间：2012-07-01T05:49:31.110
> 
> 标签：android, dialog, options, builder

在我的 android 应用程序中，我创建了一个对话框，向用户显示列表中的多个选项。

我已经使用这个类来做到这一点：http: [//developer.android.com/reference/android/app/AlertDialog.Builder.html](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)

更具体地说，我使用了 setMultiChoiceItems

现在选项显示正确，一切正常。但是，我需要确保用户实际选择了这些选项之一，并且没有立即按下我使用 setPositiveButton 设置的进行中的按钮。

有没有一种方法可以以编程方式确保选择其中一个或多个选项？我还将设置一个快速的 if 语句，如果没有选择任何选项，甚至会显示一个警告对话框。

谢谢，如果以前有人问过这个问题，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:58:43.657

最简单的方法是使用`DialogInterface.OnMultiChoiceClickListener`来跟踪用户的选择。在创建对话框之前初始化一个数组，然后每次用户进行/清除选择时，然后从数组中添加/删除它。一旦用户点击肯定按钮，检查数组是否为空：如果是，他们没有选择。

# android - Android Ignition RemoteImageView 无法正常运行

> ID：11279895
> 
> 赞同：-1
> 
> 时间：2012-07-01T05:51:25.583
> 
> 标签：android, android-imageview, droid-fu

我有一个非常基本的应用程序，其中包含两个点火远程图像视图 (RIV)。该应用程序似乎运行正常，除了以下事实，而不是图像，我得到两个灰色三角形，其中图像应该是感叹号。我的测试图像 URL 是“http://developer.android.com/images/home/android-design.png” 在此发布时，图像会加载到我的浏览器中，因此我认为问题出在其他地方。我只在布局中放置了两个 riv。我还没有编写相应的 Java 代码。失败是因为我还没有添加所需的 java，还是有其他问题？我之前使用点火器制作了一个测试应用程序，我不记得必须添加 java 才能获得最基本的功能。如果需要，我可以发布代码，

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:31:41.440

我应该等大约一个小时，我的问题不会花费我两个代表。出于某种原因，当我授予权限 ACCESS_NETWORK_STATE 时，它没有接受。一旦我重新建立了这个权限，两个 RIV 都可以在*没有*java 的情况下正常工作。

Ignition 是一个外部库项目或带有一些花哨类的单独 jar。在这种情况下 RemoteImageView 允许显示远程图像。它还会自动缓存它们...

我为这个问题道歉，因为它确实归结为我忘记的一些愚蠢的东西......但这首先是问题的症结所在。

# jquery - 将事件绑定到选定的选择

> ID：11279898
> 
> 赞同：19
> 
> 时间：2012-07-01T05:52:48.147
> 
> 标签：jquery, onchange, jquery-chosen, jquery-events

我有这个选择框的代码，它由 Chosen jQuery 插件显示。我想要实现的是从已选择的当前项目中获取值：

```
<div>
  <select id="schedule_event" name="schedule[event]" style="display: none; " class="chzn-done"><option value="Game" selected="selected">Game</option>
    <option value="Event">Event</option>
    <option value="Training">Training</option>
  </select>
  <div id="schedule_event_chzn" class="chzn-container chzn-container-single chzn-container-active" style="width: 854px; ">
    <a href="javascript:void(0)" class="chzn-single chzn-single-with-drop" tabindex="-1">
      <span>Game</span>
      <div></div>
    </a>
    <div class="chzn-drop" style="width: 849px; top: 27px; left: 0px; ">
      <div class="chzn-search">
        <input type="text" autocomplete="off" style="width: 814px; " tabindex="0">
    </div>
    <ul class="chzn-results">
      <li id="schedule_event_chzn_o_0" class="active-result result-selected highlighted" style="">Game</li>
      <li id="schedule_event_chzn_o_1" class="active-result" style="">Event</li>
      <li id="schedule_event_chzn_o_2" class="active-result" style="">Training</li>
    </ul>
  </div>
</div>
</div> 
```

我目前用来查找当前值的 JavaScript 是：

```
$("#schedule_event").chosen().change( function() {
    alert(+ $(this).text());
    $('#' + $(this).val()).show();
}); 
```

然而，我不断得到一个'NaN'，即没有价值。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-01T06:01:55.527

**代码：**

```
$(".chzn-select").chosen().change(function() {
    alert(+$(this).val());
    //$('#' + $(this).val()).show();
}); 
```

**演示：**

~~工作演示：http: [//jsfiddle.net/MM7wh/](http://jsfiddle.net/MM7wh/)~~

### 编辑（2015 年 7 月 6 日）

cdns 现在改了。

工作演示：http: [//jsfiddle.net/uk82dm5L/](http://jsfiddle.net/uk82dm5L/)

请使用`$(this).val()`而不是`.text()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-21T07:46:40.010

我个人更喜欢使用这个：

```
$(document).on('change', '#mychosen', function(evt, params) {
    if (params.selected != undefined)
    {
        console.log('selected: ' + params.selected);
    }
    if (params.deselected != undefined)
    {
        console.log('deselected: ' + params.deselected);
    }
}); 
```

# java - 指定 Cipher.getInstance() 参数？

> ID：11279903
> 
> 赞同：10
> 
> 时间：2012-07-01T05:56:01.293
> 
> 标签：java, android, encryption

我在一个 android 应用程序和一个独立的 java 应用程序中使用以下内容：

```
private static byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(clear);
    ... 
```

我在 android 和我的独立 java 应用程序上得到不同的加密字符串（都使用相同的代码和密钥）。我得到了与这个问题相同的异常（javax.crypto.BadPaddingException：Blocktype mismatch：0）：

[RSA 加密：Java 和 Android 的区别](https://stackoverflow.com/questions/6069369/rsa-encryption-difference-between-java-and-android)

建议的解决方案是指定填充策略，例如：

```
Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding"); 
```

但我使用的是“AES”，而不是“RSA”，并且不确定如何结合 AES 指定填充。在这种情况下，我将如何构造传递给 Cipher.getInstance() 的字符串？我试了一下：

```
Cipher cipher = Cipher.getInstance("AES/PKCS1Padding"); 
```

但得到一个关于无效的例外。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-08T16:56:26.457

另一个“简短回答”，但我相信 AES-GCM 比 CBC 模式更安全，并且已经存在了几年，但是如果你想在 Android 中使用，你需要包括[spongycastle](https://github.com/rtyley/spongycastle)

```
Cipher cipher = Cipher.getInstance("AES/GCM/NoPadding"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T21:57:41.387

Short answer:

```
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding"); 
```

[Long Answer](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-24T09:34:16.503

我是这样做的：

```
keyGenerator.init(new
                KeyGenParameterSpec.Builder(KEY_NAME,
                KeyProperties.PURPOSE_ENCRYPT |
                        KeyProperties.PURPOSE_DECRYPT)
                .setBlockModes(KeyProperties.BLOCK_MODE_CBC)
                .setUserAuthenticationRequired(true)
                .setEncryptionPaddings(
                        KeyProperties.ENCRYPTION_PADDING_PKCS7)
                .build());

cipher = Cipher.getInstance(KeyProperties.KEY_ALGORITHM_AES + "/" + KeyProperties.BLOCK_MODE_CBC + "/" + KeyProperties.ENCRYPTION_PADDING_PKCS7); 
```

# php - 如何在 symfony2 的 config.yml 中引用包路径

> ID：11279910
> 
> 赞同：2
> 
> 时间：2012-07-01T05:57:11.617
> 
> 标签：php, symfony

为了使捆绑包自己工作，我想从当前捆绑包路径中调用我的类（Paypal）。这样做的方法是什么？

```
#MyBundle/Resources/Config/config.yml
parameters:
    paypal.class:      **DontKnowWhatToPutHere**/Services/Paypal
    paypal.argument: exampleParam

services:
    paypal:
        class:        %paypal.class%
        arguments:    [%paypal.env%] 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:11:27.367

您将使用命名空间的类名...

```
FooVendor\BarBundle\Services\Paypal 
```

# android - ClassCastException 发生在 onRestoreInstanceState

> ID：11279911
> 
> 赞同：8
> 
> 时间：2012-07-01T05:57:35.257
> 
> 标签：android, bundle, serializable

ClassCastException 随机发生以在 onRestoreInstanceState() 中恢复 Vector。一般恢复向量都可以很好地完成，但有时会出现异常。

我认为当活动进入后台并被销毁时会发生这种情况，但我不确定。

有任何想法吗？谢谢你。

```
Stack<LocationInfo> mLocationInfoVector;

@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putSerializable("locationInfos", mLocationInfoVector);

    super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    if (savedInstanceState.getSerializable("locationInfos") != null) {
        @SuppressWarnings("unchecked")
        mLocationInfoVector= (Stack<LocationInfo>) savedInstanceState.getSerializable("locationInfos");
    }

    super.onRestoreInstanceState(savedInstanceState);
} 
```

添加：

我忘了附上异常日志。那是

```
java.lang.ClassCastException: java.util.ArrayList cannot be cast to java.util.Stack 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:24:10.380

这通常发生在活动因内存压力而被破坏时。传递给 onRestoreInstanceState 的包似乎保留了基类的一个实例（`ArrayList`在这种情况下）。

您可以通过调整开发人员选项来重现该问题：

1.  转到设置 | 开发人员选项
2.  选中“不保留活动”复选框

现在，您的活动将在您离开后立即被销毁。启动有问题的活动，按下主页按钮，然后切换回您的应用程序应该会触发`ClassCastException`.

与此同时，Ted Hopp 建议使用

```
if (saved instanceof Stack) {
    ....
} 
```

应避免使应用程序崩溃。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T05:52:44.977

我使用下一个代码来恢复 Vector：

```
objects = new Vector<Object>((Collection<Object>) state.getSerializable(EXTRA_OBJECTS)); 
```

它可以防止 java.lang.ClassCastException 并保存元素顺序。

要恢复堆栈，您可以使用以下代码：

```
stack = new Stack<Object>();
stack.addAll((Collection<Object>) state.getSerializable(EXTRA_STACK)); 
```

它之所以有效，是因为 Vector、Stack、ArrayList 正在扩展 Collection，您可以将序列化对象转换为 Collection 并传递给 Stack 或 Vector addAll() 方法。

# ios - iOS：UITableViewController - 何时刷新（设计）？

> ID：11279917
> 
> 赞同：0
> 
> 时间：2012-07-01T05:59:38.500
> 
> 标签：ios, notifications, refresh, uitableview, push

我有一个显示消息列表的 UITableViewController。我使用 CoreData 和 NSFetchedResultsController 来兑现/存储与单元格对应的每个对象。我想知道何时刷新表以与服务器同步。一方面，我只能手动刷新，但我希望表格视图自动同步。另一方面，每次表格视图出现时我都可以刷新，但这似乎很浪费。在这种情况下，正常的方法是什么？每次收到推送时使用推送通知并刷新？但是如果用户禁用推送通知怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T06:39:04.353

我假设当您说“服务器”时，您指的是 Internet 上的某个远程服务器。在这种情况下，如果服务器上有用户需要/想要的频繁更新，则在 tableview 出现时刷新并不是不合理的（或者更准确地说，询问服务器以查看是否需要刷新并且只下载更新而不是而不是重新下载所有内容，并且仅在有新数据时才刷新……这取决于您服务器的性质）。但是，如果您执行此类逻辑，您将希望异步执行此操作，因此当您在后台检查更新时不会延迟用户体验。但是，如果用户很有可能需要/想要更新的数据，请省去点击刷新按钮的工作。想想邮件程序：您想查看现有的电子邮件，

如果服务器更新不频繁和/或如果您的服务器协议有点慢，您可能会加入一些“只有在上次刷新时间超过 x 分钟前才出现 tableview 时刷新”的混合。如果您对数据刷新进行这种条件检查，那么您可能必须提供一个 UI 以允许用户手动刷新、查看上次刷新发生的时间等。想想不太可能出现的公司新闻提要是大量的每分钟更新，而是每天或每周更新。

此外，正如我之前的一些评论所暗示的那样，您可能希望确保在后台进行服务器更新，并且可能还需要主动更新。（例如，您可能希望在应用程序启动后立即在后台启动更新服务器数据的检查，从而减少用户进入特定表格视图时的延迟）。或者，您可能会在用户仍在相关表格视图上时触发异步更新检查（例如，您正在查看正在进行的体育赛事的得分摘要）。这完全取决于服务器数据更改的性质、您可以访问的服务器接口类型以及用户的期望。无论如何，如果你能阻止它，永远不要用烦人的微调器或类似的东西来阻止用户界面。

因此，不幸的是，您的问题没有简单的答案，因为答案至少取决于 (a) 服务器可以多快响应有关数据更新存在的查询，然后下载这些更新；(b) 服务器数据更改的频率；(c) 用户寻找更新数据的可能性有多大（没有用户感到不得不一直点击刷新按钮的 UX）。

# php - 设置输出日期格式 MSSQL/PHP/SQLSRV

> ID：11279921
> 
> 赞同：1
> 
> 时间：2012-07-01T06:00:28.157
> 
> 标签：php, sql-server, sql-server-2008

我正在使用 PHP + SQLSRV 扩展以及 MSSQL 数据库（2008）。查询时，我正在获取日期字段的日期对象，通过使用 sqlsrv_connect 函数的“ReturnDatesAsStrings”参数，我能够获取字符串日期而不是对象。我想知道是否有类似的方法来设置日期格式（在建立连接时传递格式），所以我不需要从应用程序结束格式化它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T00:23:59.357

我遇到了同样的问题，你在哪里使用 Codeigniter 的 activerecord？

这就是我用activerecord解决它的方法，：

```
// returns true on successful update
public function last_touched($user_id)
{
    // the format used in ISO 8601
    $time = date("Y-m-d"); // = "2013-06-10"

    $sql_query  = "UPDATE Users ";
    $sql_query .= "SET Modified= '{$time}' ";
    $sql_query .= "WHERE ID= '{$user_id}'";
    return $this->db->query($sql_query);
} 
```

# java - 有人知道 Java/JVM 的嵌入式博客引擎吗？

> ID：11279923
> 
> 赞同：0
> 
> 时间：2012-07-01T06:01:32.337
> 
> 标签：java, jvm

我正在为一家公司开发“庭院销售标志”类型的应用程序。他们对响应时间和页面速度非常认真，因此应用程序是在 JVM 上编写的。

他们希望网站有一个博客部分，这将我带到了一个十字路口。在这个时间点，他们*不是*在寻找超高级的功能。要求是帖子条目、带有模糊匹配的全文搜索、评论和审核。

我喜欢 WordPress，但将其集成到网站中有点超出范围。

理想的答案是如果有人知道用于 JVM 或 Java 的可嵌入博客引擎，但我想听听任何人对替代方案的看法。

谢谢，一如既往！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:21:35.930

我们正在推出自己的...我认为我的公司最终会开源它。详情请关注！

# java - JTextPane 轻量级替代品？

> ID：11279927
> 
> 赞同：0
> 
> 时间：2012-07-01T06:02:26.800
> 
> 标签：java, swing, user-interface, jtextcomponent

我正在研究简单的类 Unix`tail`实用程序（我在 Java 中的第一份工作）。已经有很多可用的，但没有一个适合我的具体要求。我需要额外的日志分析帮助功能、配置共享、书签、编辑、正则表达式支持等等。我能想到的最接近的商业产品是[bareTail](http://www.baremetalsoft.com/baretail/)。

我几乎完成了实现，但在 Java 中受到 TextArea 的限制。我无法为 TextArea 中的线条设置不同的背景颜色。虽然我可以在 JTextPane 中做到这一点，但它看起来很安静，两者之间是否有任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:11:50.457

[JEdi​​torPane](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JEditorPane.html)可能是您正在寻找的。它支持自定义突出显示，并且 JTextPane 扩展了 JEditorPane

# vb.net - 复制带有索引和键的访问表

> ID：11279929
> 
> 赞同：1
> 
> 时间：2012-07-01T06:02:34.577
> 
> 标签：vb.net, ms-access, indexing, copy

我有一个 Access 2007 数据库，当我打开它时，我可以在 Access 应用程序中复制和粘贴一个表。我可以选择仅复制结构或结构和数据。就我而言，我只需要结构。副本保留原件的索引和键。我需要用 VB.NET 来做这件事。到目前为止，我已经查看了许多文章，并且能够通过发出 SQL 语句来复制表结构

```
Dim dbCmdInsert As New OleDbCommand
With dbCmdInsert
    .CommandText = "SELECT * INTO tmpTable FROM Trips WHERE 0=1;"
    .CommandType = CommandType.Text
    .Connection = connNavDb
    Dim n As Integer = .ExecuteNonQuery
End With 
```

这复制了没有记录的结构，这是我想要的，但索引和键丢失了。我似乎无法找到完成此任务的良好指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:45:30.867

确实非常粗略：

```
 Dim oAccess As New Access.Application

    ''Open a database
    oAccess.OpenCurrentDatabase("z:\docs\test.accdb")
    ''"Import" table 
    oAccess.DoCmd.TransferDatabase(
        Access.AcDataTransferType.acExport, "Microsoft Access", "z:\docs\test.accdb", _
        Access.AcObjectType.acTable, "table1", "newtable1", True, False) 
```

另请参阅 c#：[使用 C# 或 SQL 复制 Access 表结构和约束](https://stackoverflow.com/questions/10201661/copy-access-table-structure-and-constraints-using-c-sharp-or-sql/10213461#10213461)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:30:39.867

在 Access VBA 中，您可以`DoCmd.TransferDatabase acExport`使用源数据库作为目标，提供（当然）不同的目标表名称。
我不知道是否有`DoCmd`与 vb.net 等效的方法，但这可能是最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-21T01:43:38.447

```
DoCmd.TransferDatabase acExport, "Microsoft Access", CurrentDb().Name, acTable, "Table1", "TableToCreate", True 
```

# wordpress - 在 Wordpress 查找数组中获取和使用评论 ID

> ID：11279930
> 
> 赞同：0
> 
> 时间：2012-07-01T06:03:01.307
> 
> 标签：wordpress, post

我正在尝试显示包含与评论 ID 匹配的元变量的自定义帖子。我正在使用以下代码，我需要动态提取评论 ID：

```
 <?php 
 $args = array( 'post_type' => 'paidbriefs', 'meta_key' => 'Comment_ID', 'meta_value' => **CURRENT COMMEND ID TO GO HERE** ,   'posts_per_page' => 10 );
 $loop = new WP_Query( $args );
 while ( $loop->have_posts() ) : $loop->the_post();
 echo 'paid';
 endwhile; wp_reset_query(); ?>

 I have tried using 
 <?php comment_ID();?> 
```

获取评论 ID，但这不起作用。如果我输入数字注释 id，则代码可以工作，但我无法通过动态拉取 id 来使用它。任何人都可以帮助如何做到这一点，这让我发疯！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:09:17.560

```
 comment_ID(); 
```

直接打印/回显 ID，所以

```
 'meta_value' => get_comment_ID(), ... 
```

可能是您正在寻找的。

这是 Wordpress 辅助函数的一个常见问题，会将直接回显变量的函数与返回值混淆:)

# java - 代码运行没有错误，但不更改标签文本

> ID：11279931
> 
> 赞同：2
> 
> 时间：2012-07-01T06:04:00.130
> 
> 标签：java, swing, jlabel, nimbus, jradiobutton

我已经处理了一段时间了，我无法让两个`JLabel`s 的文本在点击事件上发生变化。

任何帮助都会非常受欢迎。先感谢您。

这是一个带有两个单选按钮组的 GUI 程序，它们从字段中提取输入并进行计算。然后它将计算发送到 a `JLabel`，然后根据该计算发送到 second `JLabel`。

代码：

* * *

```
public void jRB1ActionPerformed(java.awt.event.ActionEvent evt) {
    // Set the Length of Loan to 1 year:
    year = 1;
}

public void jRB2ActionPerformed(java.awt.event.ActionEvent evt) {
    // Set the Length of Loan to 2 years:
    year = 2;
}

public void jRB3ActionPerformed(java.awt.event.ActionEvent evt) {
    // Set the Length of Loan to 3 years:
    year = 3;
}

public void jRB4ActionPerformed(java.awt.event.ActionEvent evt) {
    // Set the Length of Loan to 4 years:
    year = 4;
}

public void jRB5ActionPerformed(java.awt.event.ActionEvent evt) {
    // Set the Length of Loan to 5 years:
    year = 5;
}

public void jRB6ActionPerformed(java.awt.event.ActionEvent evt) {
    // Set the Length of Loan to 6 years:
    year = 6;
}

public void jRB7ActionPerformed(java.awt.event.ActionEvent evt) {
    // Set the Intrest Rate to 5%:
    intrest = 5;
}

public void jRBActionPerformed(java.awt.event.ActionEvent evt) {
    // Set the Intrest Rate to 10%::
    intrest = 10;
}

public void jRB9ActionPerformed(java.awt.event.ActionEvent evt) {
    // Set the Intrest Rate to 12%:
    intrest = 12;
}

public void CalcActionPerformed(java.awt.event.ActionEvent evt) {
    // Button Click will get the value of the Loan from the jTFLoanAmmount
    // Performs the calculation RP = Loan Amount * (Interest Rate / 12) / [1-(1 + (Interest Rate / 12))^ - // (The length of Loan *12)]:
    //It will then send the result to the jLRPOut JLable
    //It will then send the result of the above calculation *(The length of Loan *12) to the //jLTotalLoanOut JLable
    double RP=(double)((Double.parseDouble(jTFLoanAmount.getText()))*(ir)/(1-1/Math.pow(1+ir, month)));
    jLRPOut.setText(String.valueOf(RP));
    double TLC=(double)((Float.parseFloat(jLRPOut.getText()))*(month));
    jLTotalLoanOut.setText(String.valueOf(TLC));
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(AOOADJavaLoanCalculator.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(AOOADJavaLoanCalculator.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(AOOADJavaLoanCalculator.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(AOOADJavaLoanCalculator.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            new AOOADJavaLoanCalculator().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton Calc;
private javax.swing.ButtonGroup buttonGroup1;
private javax.swing.ButtonGroup buttonGroup2;
private javax.swing.JLabel jL1;
private javax.swing.JLabel jL2;
private javax.swing.JLabel jL3;
private javax.swing.JLabel jLRPOut;
private javax.swing.JLabel jLTotalLoanOut;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JRadioButton jRB;
private javax.swing.JRadioButton jRB1;
private javax.swing.JRadioButton jRB2;
private javax.swing.JRadioButton jRB3;
private javax.swing.JRadioButton jRB4;
private javax.swing.JRadioButton jRB5;
private javax.swing.JRadioButton jRB6;
private javax.swing.JRadioButton jRB7;
private javax.swing.JRadioButton jRB9;
private javax.swing.JTextField jTFLoanAmount;
private javax.swing.JTabbedPane jTabbedPane1;
// End of variables declaration                   

// My Variables
public int year = 0;
public int month = year * 12;
public int intrest = 0;
public double ir = intrest / 12;

} 
```

# java - PersistenceException：获取序列 nextval 时出错

> ID：11279942
> 
> 赞同：1
> 
> 时间：2012-07-01T06:06:42.600
> 
> 标签：java, sql, playframework-2.0

又是同样的问题！如果我用@Id 注释 ID，则会出现异常。

```
@ForeignKey(name = "User") 
public String He;
@ForeignKey(name = "User") 
public String Him;
@Id @GeneratedValue(strategy=GenerationType.AUTO) 
public int f_id; 
```

但是如果我注释了其他一些字符串属性，错误就会消失。可能是什么问题，有人可以帮我吗？

conf 文件中的“evolutionsplugin=disabled”是什么？不是造成问题吗？

# android - 如何在建筑物中跟踪 Android 设备的位置？

> ID：11279946
> 
> 赞同：5
> 
> 时间：2012-07-01T06:07:18.433
> 
> 标签：android, position, sensors

我想开发一个应用程序，我需要知道我的设备在建筑物内的位置（设备当前所在的房间）。GPS 无法在大楼内工作。有没有办法找到设备在建筑物中的位置？如果是怎么办？我可以为此目的使用位置或运动传感器或这些传感器的组合吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T07:01:32.293

没有通用的解决方案。如果您可以在建筑物中放置 WiFi 热点/中继器（最好在每个房间中），您可以根据 WiFi 信号强度对位置进行三角测量。但这也并不简单，因为通过墙壁和地板的信号损失不同。您需要提前勘察建筑物并制作信号强度图，然后根据收到的信号在地图上查找您的位置。

运动传感器也不够精确，如果您在钢结构内，指南针也是不准确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:13:20.230

您可以尝试使用[网络](http://developer.android.com/reference/android/location/LocationManager.html#NETWORK_PROVIDER)来定位用户。如果信号足够强，它应该会返回一个不错的位置修复，但不如 GPS 准确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T06:17:53.547

不幸的是，没有简单的解决方案。网络位置是不可能的，因为它不足以显示建筑物，甚至没有提到房间。我能想到的唯一方法是在建筑物中使用外部传感器并以某种方式将它们与设备连接。

# php - 如何在 Linux 上用 PHP 发送 HTML 邮件

> ID：11279949
> 
> 赞同：0
> 
> 时间：2012-07-01T06:07:47.453
> 
> 标签：php, linux, email

我必须编写以下代码才能在我的网站中使用 PHP 发送邮件，该网站托管在 Linux 服务器上。邮件已发送，但消息以原始 HTML 而不是标记文本的形式发送。这是代码：

```
<?php
sendMail('name@domain.tld', 'Your recovered password', 'Your password is <b>ABC123</b>', 'kush.impetus@gmail.com');

function sendMail($from='name@domain.tld', $subject, $message, $to = 'name@domain.tld'){
    $message = '<html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title>'.$subject.'</title>
        </head>
        <body>'.$message.'</body>
        </html>';
    $message = preg_replace("#(?<!\r)\n#si", "\r\n", $message); 
    $message = wordwrap($message, 70);  

    $headers   = array();
    $headers[] = "MIME-Version: 1.0";
    $headers[] = "Content-type: text/plain; charset=UTF-8";
    $headers[] = "From: $from";
    $headers[] = "Reply-To: $from";
    $headers[] = "Subject: {$subject}";

    $additional_params = "-f $from -r $from";

    if(mail($to, $subject, $message, implode("\r\n", $headers)))
        echo 'Mail Sent';
    else
        echo 'Mail NOT Sent';
    exit();
} 
```

?>

如何更正代码以正确发送 HTML 邮件？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T06:12:25.113

更改此行

```
$headers[] = "Content-type: text/plain; charset=UTF-8"; 
```

到

```
$headers[] = "Content-type: text/html; charset=UTF-8"; 
```

这样您就可以告诉您的邮件程序它是 HTML 而不是纯文本。

# javascript - Rails 3 嵌入式小部件：show.js.erb 似乎不起作用

> ID：11279961
> 
> 赞同：0
> 
> 时间：2012-07-01T06:10:29.647
> 
> 标签：javascript, ruby-on-rails-3, iframe, widget

我有两个本地主机网络服务器正在运行（webrick）；一个在端口 3000（服务器）和一个在 3001（网页）。但这毫无意义，因为它似乎在服务器端被破坏了。

在“服务器”上，如果我去 'http://localhost:3000/projects/5.js'，什么都没有加载。我得到一个白屏，“查看页面源”甚至不能作为选项使用。

我猜 document.write 是问题所在，但我无法解决它，因为没有加载任何内容。有我需要的路线吗？在我的项目/表演活动中，我需要做些什么不同的事情吗？

```
####The website embedded code:
<iframe src="http://localhost:3000/projects/5.js"></iframe>

####projects_controller.rb
def widget
   @project = Project.find(params[:id])
end

def show
  @project = Project.find(params[:id])    
  respond_to do |format|
    format.html { render :layout => 'application_project' }
    format.json { render json: @project }
  end
end

####projects/show.js.erb
document.write("<%= escape_javascript(content_tag(:iframe, '', :src => widget_project_url(@project))).html_safe %>");

####projects/widget.html.erb
<div id="project-embed-widget">
    <h3><%= link_to @project.name, @project %></h3>
    <% if @project.funding? %>
        <h4>
        <% if @project.backers.nil? %>
            0
        <% else %>
            <%= @project.backers.count %>
        <% end %>
        BACKERS</h4>
        <% @project.calc_goal_collected %>
        <h4><%= number_to_currency(@project.goal_collected, :unit => "$") %></h4>
        <h4>PLEDGED OF <%= number_to_currency(@project.goal, :unit => "$") %> GOAL</h4>
        <h4><%= @project.time_to_go[:time] %>
        <%= @project.time_to_go[:unit].upcase %> TO GO</h4>
        <br />
        <%= render "funding_message" %>
        <br />
  <% else %>
      <%= @project.about %>
  <% end %>
  </div>

####routes.rb
resources :projects do
  member do
    get 'widget'
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:29:46.057

好吧，我注意到的一件事是您正在调用`<iframe src="http://localhost:3000/projects/5.js"></iframe>`，但**js**不是您在控制器中的响应格式之一。添加`format.js`到 respond_to 块。

# java - libEGL 调用未实现的 OpenGL ES Api Android

> ID：11279966
> 
> 赞同：2
> 
> 时间：2012-07-01T06:12:09.833
> 
> 标签：java, android

我查看了 stackoverflow 上的解决方案，但似乎都没有解决我的问题。我已在清单文件中包含 API：

```
<uses-sdk android:minSdkVersion="10" />
<uses-feature android:required="true" android:glEsVersion="0x00020000"/>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".HidderActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我的包装代码是：

```
class GLSurface extends GLSurfaceView
{
  final renderer r;
  public GLSurface(Context context)

  {
      super(context);

      setEGLContextClientVersion(2);
      r = new renderer();
      setRenderer(r);
      setRenderMode(GLSurfaceView.RENDERMODE_CONTINUOUSLY);
  }
} 
```

这是错误。

> 调用未实现的 OpenGL ES API

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:03:32.387

改变：

mGLView.setEGLContextClientVersion(2); -> mGLView.setEGLContextClientVersion(1);

它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:00:09.837

看起来 Android 使用 OpenGL ES 的 2.0 版本的能力存在一些问题，这阻碍了它在设备上的工作。为了解决这个问题，我取消了注释

```
setEGLContextClientVersion(2); 
```

行，它奏效了。然而，这似乎将该版本置于（1.1？）。取决于你想做什么，这可能不是一个好的解决方案，但对我制作 2D 游戏来说这并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-27T17:30:50.603

这可能是因为您在 Renderer 实现中使用了 GL10 实例作为 onSurfaceCreated()、onSurfaceChanged() 和 onDrawFrame() 中的参数。由于您打算使用 OpenGL ES 2.0，我们可以也可能不使用该实例，而是使用替代方案。还有其他选择！这就是我们在网上看到那些参数名称和 unUsed 或类似代码的原因！

它肯定没有以最好的方式记录下来！

这种方式可能是您可以探索更多基于 3D 的 OpenGL。

这是一个关于如何开始使用 OpenGL ES 2.0 的好例子

[http://androidbook.com/item/4254](http://androidbook.com/item/4254)

# powershell - 使用 Powershell 访问跨域上的远程计算机？

> ID：11279969
> 
> 赞同：2
> 
> 时间：2012-07-01T06:13:01.317
> 
> 标签：powershell, remote-access, powershell-remoting

我需要将文件从本地计算机复制到远程计算机，但两者都在不同的域中。我尝试使用 powershell 连接它，但防病毒软件阻止了我的连接。

我无法禁用远程计算机中的防病毒软件。谁能告诉是否有办法在不禁用防病毒软件的情况下做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T08:23:20.420

您是否尝试使用 net use 命令：

```
Net use o: \\Computer\share /user:domainName\remoteuser 
```

或者同样使用 PowerShell

```
New-PSDrive -Name NDrive -PSProvider filesystem  -Root \\Computer\share  -Credential (get-credential) 
```

然后您可以复制到新驱动器`o:`或在 PowerShell 中`NDrive:`

# php - 通过将数据放入一个组来控制要从 MySQL 显示的数据

> ID：11279972
> 
> 赞同：0
> 
> 时间：2012-07-01T06:14:04.343
> 
> 标签：php, jquery

我的数据库中有很多项目，显示它们没有问题。只是我想通过对从数据库中获取的项目进行分组来组织它们。

例如，我有 50 个项目，我想先显示前 10 个项目，然后保留其余项目以供稍后显示。因此，如果用户单击“查看下一个项目”按钮或适当的数字（例如，10 个项目在“1”中，因此如果单击“2”，它应该显示第 2 个 10 个项目，直到所有项目都按 10 及其对应的编号组项目持有者显示），那么接下来的 10 个项目将被显示并替换前 10 个项目。简而言之，我希望项目按 10 显示。

我有这个当前代码：

## PHP

```
$result = mysql_query("SELECT * FROM items");
$data = "";
while($row = mysql_fetch_array($result)) {
    $data .= "<a href='#' id='".$row['id']."' class='theitem'><img src='media/".$row['picture']."' /></a>";
} 
```

## HTML

```
<div id="itemsholder">
  <? echo $data; ?>
</div> 
```

在下方应该有一个数字导航，该数字应该对应于设置超过 50 个项目的 10 个项目的数量。例如，有 50 个项目，因为我只想显示 10 个项目，我应该有 1、2、3、4、5 个链接，或者“显示下一个项目”按钮，这样每当用户点击它时，它就会显示下一个10 个项目，其余的。

PS：我对建议、建议和想法持开放态度。

谢谢，希望有人能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:21:03.543

这是一种常见的设计模式，称为分页。您可能想要谷歌 php 分页并消化一些结果。

简而言之，一般模式是确定总共有多少项目（通过 SELECT COUNT(*) 查询，或者对于非常大的数据集，通过将其存储在另一个地方并在添加或删除项目时对其进行更新）并使用[LIMIT 子句](http://dev.mysql.com/doc/refman/5.0/en/select.html)运行查询。

例如，如果您想要每页 20 个项目并且您在第 5 页，而不是：

```
SELECT * FROM items; 
```

改为运行这个：

```
SELECT * FROM items LIMIT 100, 20; 
```

并将这些结果显示为页面。如果您总共有 $n 个项目，则页数将为：

```
floor(($n + 1) / 20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T14:18:38.763

使用分页，那里有很多，只需在 google 中搜索 em。这是帮助您入门的代码。

```
SELECT * FROM items LIMIT 100, 20; 
```

# html - 如何查找网站使用的 CSS、颜色代码和其他编码

> ID：11279977
> 
> 赞同：0
> 
> 时间：2012-07-01T06:16:12.237
> 
> 标签：html, css

如何找到网站用于其按钮、背景、文本和其他内容的 CSS、颜色代码和其他编码（宽度、高度）？

我在这里尝试做的是重新创建在 youtube.com 上找到的侧边按钮和搜索框以及页面宽度和背景。有没有一种简单的方法来获取 youtube 用于这些东西的代码？是否有程序或小部件可以让您做到这一点？我已经疯了。

谢谢，诺曼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T06:18:10.480

# 开发者工具

如果您使用的是 Chrome、Safari、Opera、IE8+，它们带有**开发者工具**和 HTML/CSS 检查器选项。

# 萤火虫

如果您使用 Firefox，则可以使用[Firebug](http://getfirebug.com/)：

*   检查 HTML 并实时修改样式和布局
*   使用适用于任何浏览器的最先进的 JavaScript 调试器
*   准确分析网络使用情况和性能
*   扩展 Firebug 并添加功能以使 Firebug 更加强大
*   获取使用 Firebug 完成工作所需的信息。

# Web开发人员

您还可以选择适用于 Chrome 和 Firefox的[Web Developer插件](http://chrispederick.com/)

> Web Developer 扩展将各种 Web 开发人员工具添加到浏览器中。该扩展适用于 Firefox 和 Chrome，并且可以在这些浏览器支持的任何平台上运行，包括 Windows、OS X 和 Linux。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T06:18:22.453

如果您使用的是 Chrome/Firefox/Firebug：右键单击 -> 检查元素。利润？:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T06:37:33.903

使用**Mozilla Firefox**并添加**插件，如 colorpicker、Firebug**等，或者使用**Chrome**右键单击​​要查看的网页并**单击 inspectelement**。我建议最好的方法是使用 firefox，firefox 有大量的插件可以帮助开发人员防止一直挠头，而且它们比其他浏览器更灵活。首先去探索firefox插件网站。

# asp.net - C# ASP.Net + CR 13 - 缺少参数值

> ID：11279981
> 
> 赞同：0
> 
> 时间：2012-07-01T06:17:39.990
> 
> 标签：asp.net, parameters, crystal-reports, report

我有一个项目，该项目由一个 asp.net 网页组成，该网页生成一个 pertcular 项目每天的总使用量报告。该代码使用 VS 2008 在 CR 9 中工作，但由于我使用 VS 2010 将其转换为 CR 13，因此每当我向报告中添加参数时，报告都会抛出错误为“缺少参数值”。该参数在子报表中。报告在没有参数的情况下正确可见。[dt2 有记录，我已在上述代码上方填写] 我只在星期六尝试它，我编写的代码如下所示 -

```
crReport cr = new crReport();
cr.SetDatabaseLogon(gf.databaseUsername, gf.databasePass);
((ReportDocument)cr.Subreports["MenuReport"]).SetDataSource(dt2);
#region Parameter gathering
ParameterValues paramQuantity = new ParameterValues();
for (int i = 0; i < dt.Rows.Count; i++)
{
    dt2.Rows[i]["menuItemFK"] = jobBll.GetDataInfo("M_MenuItems", "id", dt.Rows[i]["menuItemFK"].ToString(), "menuItemName", true);
    string menuItemFK = dt.Rows[i]["menuItemFK"].ToString();
    string reportDate = dt.Rows[i]["reportDate"].ToString();
    DataTable dtQuntity = new DataTable();
    dtQuntity = jobBll.GetMenuItemDayUsage(menuItemFK, reportFrom, reportTo, "Saturday", true);
    ParameterDiscreteValue parameterDiscreteValue = new ParameterDiscreteValue();
    if (dtQuntity.Rows[0][0].ToString() != "")
        parameterDiscreteValue.Value = dtQuntity.Rows[0][0].ToString();
    else
        parameterDiscreteValue.Value = "0";
    paramQuantity.Add(parameterDiscreteValue);
}
#endregion
//cr.SetParameterValue("Sunday Quantity", paramQuantity, "MenuReport");
//cr.SetParameterValue("Monday Quantity", paramQuantity, "MenuReport");
//cr.SetParameterValue("Tuesday Quantity", paramQuantity, "MenuReport");
//cr.SetParameterValue("Wednesday Quantity", paramQuantity, "MenuReport");
//cr.SetParameterValue("Thursday Quantity", paramQuantity, "MenuReport");
//cr.SetParameterValue("Friday Quantity", paramQuantity, "MenuReport");
cr.SetParameterValue("saturdayQuantity", paramQuantity, "MenuReport");
crvReport.ReportSource = cr;     
crvReport.RefreshReport(); 
```

请尽快帮助我。等待回复。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:30:16.993

好的，我终于开始工作了。我将“cr”声明为“ReportDocument”对象，或者“crReport.rpt”对象也注释了 cr.RefreshReport();，它正在清除参数值。现在它工作正常。为了显示记录的单个参数值，我为参数编写了“显示字符串”公式 -

```
StringVar Array Input:={?saturdayQuantity};
Input[RecordNumber]; 
```

现在 C# 代码如下所示 -

```
ReportDocument cr = new ReportDocument();//
string reportPath = Server.MapPath("crReport.rpt");//
cr.Load(reportPath);//

((TextObject)cr.ReportDefinition.ReportObjects["reportFrom"]).Text = reportFrom;
((TextObject)cr.ReportDefinition.ReportObjects["reportTo"]).Text = reportTo;
cr.SetDatabaseLogon(gf.databaseUsername, gf.databasePass);

#region Parameter gathering
ParameterValues paramQuantity = new ParameterValues();
for (int i = 0; i < dt.Rows.Count; i++)
    {
        dt2.Rows[i]["menuItemFK"] = jobBll.GetDataInfo("M_MenuItems", "id", dt.Rows[i]["menuItemFK"].ToString(), "menuItemName", true);

        //GET OPENING & CLOSING STOCK TOTAL & ASSIGN BELOW
        string menuItemFK = dt.Rows[i]["menuItemFK"].ToString();
        string reportDate = dt.Rows[i]["reportDate"].ToString();

        DataTable dtQuntity = new DataTable();
        dtQuntity = jobBll.GetMenuItemDayUsage(menuItemFK, reportFrom, reportTo, "Saturday", true);

        ParameterDiscreteValue parameterDiscreteValue = new ParameterDiscreteValue();
        if (dtQuntity.Rows[0][0].ToString() != "")
            parameterDiscreteValue.Value = dtQuntity.Rows[0][0].ToString();
        else
            parameterDiscreteValue.Value = "0";

        paramQuantity.Add(parameterDiscreteValue);

    }

    cr.Subreports["MenuReport"].SetDataSource(dt2);

    ////cr.SetParameterValue("Sunday Quantity", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Monday Quantity", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Tuesday Quantity", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Wednesday Quantity", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Thursday Quantity", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Friday Quantity", paramQuantity, "MenuReport");
    cr.SetParameterValue("saturdayQuantity", paramQuantity, "MenuReport");

    ////cr.SetParameterValue("Sunday Rate", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Monday Rate", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Tuesday Rate", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Wednesday Rate", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Thursday Rate", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Friday Rate", paramQuantity, "MenuReport");
    ////cr.SetParameterValue("Saturday Rate", paramQuantity, "MenuReport");
    #endregion

    crvReport.ReportSource = cr;
    //crvReport.RefreshReport();// 
```

**我在行尾用 // 标记了编辑后的代码。**

# objective-c - 目标 C 和 NSURLConnection

> ID：11279982
> 
> 赞同：1
> 
> 时间：2012-07-01T06:17:47.933
> 
> 标签：objective-c, ios5

我是 ObjC 的新手，正在编写一个简单的 CONSOLE 应用程序来从 web 获取数据并解析或做一些事情。我正在尝试使用 NSURLConnection 但在获取任何数据时遇到问题。我使用 TCPDUMP 来捕获流量，我看到请求甚至没有被发送出去，因此我什至没有在控制台中得到任何结果。我不是想在 mac 上创建一个简单的控制台应用程序，而是创建 ios 应用程序。任何帮助将不胜感激。** 我在这个项目中使用 Xcode v4.2 和 ARC。

**主.m：**

```
#import <Foundation/Foundation.h>
#import "HTTPRequest.h"

int main(int argc, const char * argv[])
{
    @autoreleasepool {  
    HTTPRequest *http = [[HTTPRequest alloc]init];
    [http doMagic ];
    }
  return 0;
} 
```

**HTTPRequest.h：**

```
 #import <Foundation/Foundation.h>
    @interface HTTPRequest :NSObject <NSURLConnectionDelegate> {
       NSMutableData *webData;
       NSURLConnection *conn;
    }

    -(void) doMagic;

    @end 
```

**HTTPRequest.m：**

```
#import "HTTPRequest.h"
@implementation HTTPRequest
-(void) doMagic {
    NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
    conn = [[NSURLConnection alloc] initWithRequest:req
                                           delegate:self];
    if (conn) {
        webData = [NSMutableData data];
        NSLog(@"DEBUG:  %@", [webData length]);
        }

    }

    -(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
        [webData setLength:0];
    }

    -(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        [webData appendData:data];
    }
    -(void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
        NSLog(@"Connection failed! Error - %@ %@",
        [error localizedDescription],
        [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
    }

    -(void) connectionDidFinishLoading:(NSURLConnection *) connection {

    NSLog(@"Succeeded! Received %lu bytes of data",[webData length]);

    NSLog(@"DONE.  Received Bytes: %lu", [webData length]);
    NSString *theData = [[NSString alloc] initWithBytes:[webData mutableBytes] 
                                                length:[webData length] 
                                              encoding:NSUTF8StringEncoding];
    // -prints html received --
    NSLog(@"%@", theData);
    }
    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:40:28.990

谢谢 OMZ。NSRunLoop 就是答案。在这里找到了很棒的文章：http: [//coc24hours.blogspot.com/2012/01/using-nsrunloop-and-nsurlconnection.html](http://coc24hours.blogspot.com/2012/01/using-nsrunloop-and-nsurlconnection.html)

对于修复：

只是为了测试而添加了这个，它在 if 语句中工作得很好：

```
 if (conn) {
        webData = [NSMutableData data];
        NSRunLoop *loop = [NSRunLoop currentRunLoop];
        [loop run]; 
        NSLog(@"DEBUG:  %@", [webData length]);
    } 
```

感谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:28:34.820

我通常将`startImmediately`参数用于我的连接（例如，使用`initWithRequest:delegate:startImmedately:`to `NSURLConnection`。）也许尝试一下？如果没有，您可能需要显式调用`start`.

另外，我不确定这是否与您的问题有关，但您没有保留`webData`. （您正在使用自动释放指针对其进行初始化，该指针可以在任何 NSURLConnectionDelegate 回调之前释放。）

# bash - 在 CentOS 中使用 bash 脚本删除文件中的文本

> ID：11279988
> 
> 赞同：1
> 
> 时间：2012-07-01T06:18:52.433
> 
> 标签：bash, shell, centos5

我是来自印度尼西亚的学生，我想创建一个脚本，从包含以下文本的文件中删除几行：

```
zone "irf.com" {
type master;
file "db.irf.com";
allow-update { none; };
};

zone "friedrice.com" {
type master;
file "db.friedrice.com";
allow-update { none; };
};

zone "you.com" {
type master;
file "db.you.com";
allow-update { none; };
}; 
```

如果我想删除这个：

```
zone "friedrice.com" {
type master;
file "db.friedrice.com";
allow-update { none; };
}; 
```

在终端中我可以运行： `sh you.txt friedrice`

shell编程中的语法如何？

所有文本都在一个文件中，假设`you.txt`

我是新手，所以请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T06:48:11.660

用这个：

```
sed -i -E -n '1h;1!H;${;g;s/zone "friedrice.com" {[^}]*};\n};//g;p;}' you.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T07:06:17.580

```
sed -i '/^zone "friedrice.com"/,/^}/d' you.txt 
```

# text - 如何使文本始终显示在顶部（AndEngine）？

> ID：11279990
> 
> 赞同：1
> 
> 时间：2012-07-01T06:19:23.970
> 
> 标签：text, andengine, layer

我有一些我总是需要显示的文本（如 HUD）。但是，当精灵越过它的顶部时，精灵会覆盖文本。我如何始终在最顶层制作文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T06:31:37.643

为什么你不使用HUD类？您可以将它附加到您的相机上，它将始终覆盖在您的常规场景中附加的所有实体。为了实现这一点，您需要创建一个 HUD 实例，将您需要的精灵附加到所有内容之上，并使用相机中的 setHUD 方法。

**编辑：**

```
@Override
protected Scene onCreateScene() {
    /* ... */
    HUD hud = new HUD();
    hud.attachChild("your sprite with the text goes here");
    getEngine().getCamera().setHUD(hud); //or mCamera.setHUD(hud)
    /* ... */
} 
```

# math - 谷歌闰秒涂抹公式背后的数学

> ID：11279992
> 
> 赞同：23
> 
> 时间：2012-07-01T06:19:35.517
> 
> 标签：math, synchronization, timestamp

[谷歌的 Leap Second Smear Techinque](http://googleblog.blogspot.in/2011/09/time-technology-and-leaping-seconds.html)帖子中提到的公式：在午夜之前的时间窗口 w 内调制“谎言”：

```
lie(t) = (1.0 - cos(pi * t / w)) / 2.0 
```

这背后的数学没有描述。有人可以解释为什么该公式有效。这也可以用于我们想要在窗口上逐渐同步时间并避免突然跳跃的任何情况吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-01T06:53:21.427

这是有效的，因为图表`cos(x)`随着时间的推移平滑变化。它不会突然变化，尽管它确实是非线性变化的。

假设我们在`w = 86400`. 以下是谎言从`t = 0`to的内容`t = 86400`：

![谎言图(t)](../Images/761380c0dc8434a86db47d87abf53a80.png)

在一天的开始，我们所说的谎言非常小。您报告的时间 ( `t + lie(t)`) 几乎与实际时间 ( `t`) 相同。随着时间的推移，您报告的拖尾时间也发生了非常缓慢的变化。理想情况下，每经过 1 秒，您应该报告 1 秒已经过去。在涂抹时间，您看到的是：

![涂抹时间的变化](../Images/2484d2387c6687a78f8daa9392bab9a8.png)

到了中午，我们看到了最大的变化。但这些变化的顺序是`10^-5`. 它们足够小，任何接受涂抹时间的人都不会怀疑有什么问题。在中午，您正在谈论模糊时间移动速度的微秒差异。

就 Google 而言，他们希望*非常缓慢*地平滑更改时间，以免发生局部修正。如果它们突然将时间更改一秒钟，则可能会发生局部校正。从博客文章中，听起来这通常会导致非常糟糕的事情发生（即东西中断）。

需要注意的一件事是，他们可能不会在一天内抹去闰秒。可能会超过一整年。在这种情况下，变化就更小了。在这种情况下，每天的变化是纳秒级的。

如果你想知道实际的数学——那部分不是很有趣。`cos(x)`以 [-1, +1] 为界。在`x = 0`我们有`cos(0) = 1`并且在`x = pi`, `cos(pi) = -1`。该值`t / w`从 0 线性增加到 1 `t = 0 ... w`。所以`cos(pi * t / w)`从`+1`at `t = 0`down 变为`-1`at `t = w`。其余的由此而来。

的周期性质`cos(x)`实际上是相当重要的。我们不能只选择使用类似`lie(t) = t / w`. 如果我们这样做了，谎言总是会随着时间的推移而增加。`1 / w`闰秒将继续以每秒的速度堆积。具有在和`cos(x)`之间振荡的性质。`-1``+1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T06:54:05.627

我有点猜

cos() 输出 -1 到 +1 范围内的值，因此，最大谎言将是当 cos 为 -1 时，因为

```
(1.0 - -1)/2 == 1.0 
```

和 cos 为 +1 时的最小值

```
(1.0 - 1)/2 == 0.0 
```

请注意，0.0 将是“不说谎”的合适值，而 1.0 将是“闰秒”的合适值。

这是函数的图，你可以看到它从 0 到 1 有一个漂亮而平滑的渐变。

![在此处输入图像描述](../Images/1ba7ebb0a44d8b0ebc178a06bc1f22c7.png)

至于用于计算 cos: 参数的表达式`pi * t / w`，它们可以被认为是改变函数从 -1 转换到 1 的速度/间隔。使 t 变大使其转换更快，使 w 变大使其变大过渡较慢。

他们提到 w 是应用正式闰秒之前的时间窗口，所以以秒为单位。然后 t 可能是一些增加的数字，可能又是几秒钟。

# eclipse - Tomcat/Eclipse：在上下文重新加载期间禁用 HttpSession 序列化

> ID：11279993
> 
> 赞同：4
> 
> 时间：2012-07-01T06:19:50.730
> 
> 标签：eclipse, hibernate, jsf, tomcat

我`InvalidObjectException: Could not find a SessionFactory named: null`在重新启动tomcat服务器后得到。

我找到了一些可能的解决方案：

> *如果您尝试序列化断开连接的 Hibernate Session 并在不同的 VM 中反序列化它，或者如果类加载器已重新启动，例如，在应用程序服务器或 Web 容器中的热重新部署期间，则会发生此异常。这在 Tomcat 中尤其明显。在应用程序服务器中，始终使用 JNDI 来存储 SessionFactory，如文档所述。在 Tomcat 或其他 Web 容器中， **在 context reload 期间禁用 HttpSession 序列化**。这有副作用，在 web 容器的文档中进行了解释。*

我该怎么做？在上下文重新加载期间禁用 HttpSession 序列化？

*注意：*我在 Eclipse 中使用 Tomcat7。

**更新：**

我尝试在以下位置启用此标签`context.xml`：

`<Manager pathname="" />`

是的，异常消失了，但是我失去了持久会话，所以我必须在 tomcat 服务器重新启动后再次登录。

我是否很好地理解会话持久性，如果我相信，在例如 JSF 应用程序中的 tomcat 重新启动后应该保留该会话（并且我不能通过登录创建一个新会话）？

**UPDATE2（会话管理器）：**

```
@SessionScoped
@ManagedBean(name="userManager")
public class UserManager implements Serializable {
  private static final long serialVersionUID = 1L;
  private transient HttpSession session;
  private String username;
  private String password;
  private User user;

  public String login() {
    // here is seraching for user in database (based on username and password)

    if (user != null) {
      FacesContext context = FacesContext.getCurrentInstance();
      session = (HttpSession) context.getExternalContext().getSession(true);
      session.setAttribute("id", user.getId());
      session.setAttribute("username", user.getName());
      ...
      return "success";
    } 
  }

  public String logout() {
    user = null;
    FacesContext context = FacesContext.getCurrentInstance();
    session = (HttpSession) context.getExternalContext().getSession(true);
    ...     
    session.invalidate();
    return "success";
  }
  // getters and setters ----------------------------------------------------
} 
```

我的`hibernate.cfg.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC 
  "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
  "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
 <session-factory>
  <property name="connection.url">jdbc:sqlserver://localhost;databaseName=RXP</property>
  <property name="connection.username">user</property>
  <property name="connection.password">password</property>
  <property name="connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
  <property name="dialect">org.hibernate.dialect.SQLServer2008Dialect</property>
  <property name="current_session_context_class">thread</property>
  <property name="hibernate.show_sql">true</property>
  <property name="hibernate.hbm2ddl.auto">update</property>

  <mapping class="tables.User"/>

 </session-factory>
</hibernate-configuration> 
```

我的**会话工厂**：

```
public final class DaoSF implements Serializable {
  private static final long serialVersionUID = 1L;

  private static SessionFactory sessionFactory;
  private static ServiceRegistry serviceRegistry;

  public static SessionFactory getSessionFactory() {
    try {
      Configuration configuration = new Configuration();
      configuration.configure("hibernate.cfg.xml");
      serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
      sessionFactory = configuration.buildSessionFactory(serviceRegistry);
      return sessionFactory;
    }
    catch (HibernateException he) { 
      ...
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T06:32:30.777

您应该可以通过以下方式关闭它：

```
<Manager pathname="" /> 
```

在 Tomcat 配置文件的 Context 部分中。

请参阅 Tomcat 文档：
*配置参考*>*管理器组件*>*禁用会话持久性*

*   [7.0 版](http://tomcat.apache.org/tomcat-7.0-doc/config/manager.html#Disable_Session_Persistence)
*   [8.0 版](http://tomcat.apache.org/tomcat-8.0-doc/config/manager.html#Disable_Session_Persistence)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T04:26:50.440

The [answer by Codo](https://stackoverflow.com/a/11280040/642706) is correct.

Here is an example of implementing the mentioned tag.

In your web app’s `META-INF` folder, in the `context.xml` file:

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="">
    <Manager pathname=""/>
</Context> 
```

# jquery - 替换克隆的 jquery 对象中的字符串

> ID：11279994
> 
> 赞同：9
> 
> 时间：2012-07-01T06:19:51.563
> 
> 标签：jquery, string, replace

在以下脚本中，我从 tfoot 中克隆了一个新行并将其附加到表 tbody

```
<script>
$('#checklist-builder .add-row').click(function(){
    var new_row = $('#checklist-builder>tfoot>tr').clone();
    $('#checklist-builder>tbody').append(new_row);
});
</script> 
```

克隆的行是：

```
<tr>
  <td>${j}</td>
  <td>
    <input size="2" type="hidden" value="" name="WhoChecklistField[1][${j}][id]" id="WhoChecklistField_1_${j}_id">      <input size="2" maxlength="2" type="text" value="" name="WhoChecklistField[1][${j}][weight]" id="WhoChecklistField_1_${j}_weight">    </td>
  <td>
    <input type="text" value="" name="WhoChecklistField[1][${j}][name]" id="WhoChecklistField_1_${j}_name">    </td>
  <td>
    <select size="1" name="WhoChecklistField[1][${j}][type]" id="WhoChecklistField_1_${j}_type">
      <option value="text">Text field</option>
      <option value="select">Select field</option>
      <option value="radio">Radio field</option>
      <option value="checkbox">Checkbox field</option>
    </select>
  </td>
</tr> 
```

现在我想替换`${j}`为`table size + 1`，如何`${j}`在 jquery 克隆字符串中替换？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-01T06:24:54.573

```
new_row.html(function(i, oldHTML) {
    return oldHTML.replace(/\${j}/g, 'table_size');
}); 
```

**[演示](http://jsfiddle.net/P43mW/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-14T10:25:56.123

从我自己的问题中，我想出了下面的代码，它也可以工作，也许会对某人有所帮助（完整示例）

```
$j('grab_object')
.clone()
.html(function(i, oldHTML) {
    return oldHTML.replace(/regular_expression/, change_found_expression_to_this);
}))
.appendTo('paste_object_here'); 
```

并且您应该收到克隆和粘贴的对象，其中更改了部分代码。就我而言，我正在`[nr]`用一个数字进行更改，我的表情如下所示

```
(...).replace(/\[nr\]/g, $j('#some_id').val().(...) 
```

另外由于文档的原因，请记住使用`clone()`jQuery 还会复制属性`id`，包括这可能会导致在 DOM 中进一步操作时出现一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T06:22:53.653

在你`append`做之前：

```
new_row.html(function(i, oldHtml){ return oldHtml.replace(/${j}/g, tSize) }); 
```

# java - 在 matlabcontrol 中使用 eval 时出错

> ID：11279998
> 
> 赞同：0
> 
> 时间：2012-07-01T06:20:26.447
> 
> 标签：java, matlab, matlab-deployment

我使用[MatlabConrol](http://code.google.com/p/matlabcontrol/)连接 Java 和 MATLAB。我想向 MATLAB 发送一个图像路径，以使用匹配的函数对其进行处理，并返回一些相似的图像和路径，以在 Java GUI 中显示。

将图像路径传递给 MATLAB 时，我总是遇到同样的错误：

```
Error using eval
Undefined function 'getinput' for input arguments of type 'char'. 
```

这是我的 MATLAB 函数：

```
function matlab = getinput(input)
results = hgr(input); 
```

还有我的 Java 代码：

```
imag = ImageIO.read(fileChoose.getSelectedFile());
ImagePath = fileChoose.getSelectedFile().getAbsolutePath();

public void SendingMatlabControl() throws MatlabConnectionException,
  MatlabInvocationException {
  // create proxy
  MatlabProxy proxy;
  // Create a proxy, which we will use to control MATLAB
  MatlabProxyFactory factory = new MatlabProxyFactory();
  proxy = factory.getProxy();
  // Display 'hello world' like before, but this time using feval
    try {
      // call builtin function
      proxy.eval("getinput('imagepath')");
      // call user-defined function (must be on the path)
      proxy.eval("addpath('E:\\vm')");
      proxy.feval("matlab");
      proxy.eval("rmpath('E:\\vm)");
    } catch (MatlabInvocationException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
    // Disconnect the proxy from MatLab
    proxy.disconnect();
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:36:12.970

让我举一个调用函数、传递它的输入并检索输出的例子。有两种方法：

*   [`eval`](http://matlabcontrol.googlecode.com/svn/javadocs/doc/matlabcontrol/MatlabProxy.html#eval%28java.lang.String%29)在 MATLAB 工作区中使用并分配函数的结果，然后使用[`getVariable`](http://matlabcontrol.googlecode.com/svn/javadocs/doc/matlabcontrol/MatlabProxy.html#getVariable%28java.lang.String%29), 或检索这些变量
*   使用[`returningFeval`](http://matlabcontrol.googlecode.com/svn/javadocs/doc/matlabcontrol/MatlabProxy.html#returningFeval%28java.lang.String,%20int,%20java.lang.Object...%29)其输入来评估函数，并直接检索输出。

假设我们有一个 MATLAB 函数**`myfunc.m`**，它接受一个字符串作为输入，并返回一个包含字符串、数字和向量的元胞数组：

```
function out = myfunc(str)
    out = cell(3,1);
    out{1} = sprintf('Welcome to %s!', str);
    out{2} = 99;
    out{3} = rand(10,1);
end 
```

这是Java代码：

```
import matlabcontrol.*;

public class TestMyFunc
{
    public static void main(String[] args)
        throws MatlabConnectionException, MatlabInvocationException
    {
        // create proxy
         MatlabProxyFactoryOptions options =
            new MatlabProxyFactoryOptions.Builder()
                .setUsePreviouslyControlledSession(true).build();
        MatlabProxyFactory factory = new MatlabProxyFactory(options);
        MatlabProxy proxy = factory.getProxy();

        // call function and get output cell array
        String in = "Stack Overflow";
        Object[] out = proxy.returningFeval("myfunc", 1, in);

        // extract stuff from cell array
        out = (Object[]) out[0];
        String str = (String) out[0];
        double x = ((double[]) out[1])[0];
        double[] arr = (double[]) out[2];

        // show result
        System.out.println("str =\n " + str);
        System.out.println("x = \n " + x);
        System.out.println("arr =");
        for(int i=0; i < arr.length; i++) {
            System.out.println(" " + arr[i]);
        }

        // shutdown MATLAB
        //proxy.feval("quit");

        // close connection
        proxy.disconnect();
    }
} 
```

我得到输出：

```
str =
 Welcome to Stack Overflow!
x =
 99.0
arr =
 0.5974901918725793
 0.3353113307052461
 0.29922502333310663
 0.45259254156932405
 0.42264565322046244
 0.35960631797223563
 0.5583191998692971
 0.7425453657019391
 0.42433478362569066
 0.42935578857620504 
```