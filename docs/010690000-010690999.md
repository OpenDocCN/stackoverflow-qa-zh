# StackOverflow 问答 10690000-10690999

# c# - 将职责委派给 WinForm 控件——控件是否应该知道彼此的行为？

> ID：10690010
> 
> 赞同：3
> 
> 时间：2012-05-21T17:44:41.620
> 
> 标签：c#, winforms, event-handling

我在表单上有一些控件：

*   一个复选框，负责根据其选中状态启用/禁用页面上的所有其他控件。
*   一些单选按钮负责根据其选中状态启用/禁用页面上的特定控件。
*   由上述控件操作的其他控件。

出现了几种情况：

*   当表单初始化时，我加载复选框的状态。然后，它启用或禁用窗体上的其余控件。
*   随着表单继续初始化，我加载了单选按钮的状态。如果选中但禁用了单选按钮，则有可能撤消先前的要求。因此，我检查以确保首先启用单选按钮。
*   表单加载后，用户可以选中或取消选中单选按钮。这是一个微不足道的案例，我只是运行满足最后一个要求的代码。但是，另一种情况是用户可以选中/取消选中该复选框。当复选框启用时，它希望重新启用页面上的所有控件，因为它禁用了它们。但是，这样做会破坏单选按钮的要求。

用蛮力处理这种情况非常简单。我创建了几种方法来突出显示：

```
private void ChkBxSnmPv3OnCheckedChanged(object sender, EventArgs eventArgs)
{
    snmpSettingsErrorProvider.Clear();

    foreach (Control control in grpBxSNMPv3.Controls)
    {
        if (control != sender)
            control.Enabled = ((CheckBox)sender).Checked;
    }
}

private void rdBtnAuthNoPriv_CheckedChanged(object sender, EventArgs e)
{
    RadioButton authNoPrivRadioButton = ((RadioButton)sender);

    if (authNoPrivRadioButton.Enabled)
    {
        bool isChecked = authNoPrivRadioButton.Checked;

        SetControlState(cmbBxAuthProtocol, isChecked);
        SetControlState(mskdTxtBxAuthPassword, isChecked);
        SetControlState(mskdTxtBxAuthPasswordConfirm, isChecked);

        SetControlState(cmbBxPrivacyProtocol, !isChecked);
        SetControlState(mskdTxtBxPrivacyPassword, !isChecked);
        SetControlState(mskdTxtBxPrivacyPasswordConfirm, !isChecked);
    }
}
//More methods for other checkedChange and also for when rdBtn's enable. 
```

粗略的布局思路：

![在此处输入图像描述](../Images/dc96227d601decca1b275fe9cfade994.png)

尽管如此，我的问题很“简单”：

*   方法应该在不假设存在其他方法的情况下工作。然而，如果我保留 rdBtn 对 chkBx 存在的逻辑，那么我将拥有必须相互对抗的代码。

我可以这样写我的代码：

```
private void ChkBxSnmPv3OnCheckedChanged(object sender, EventArgs eventArgs)
{
    snmpSettingsErrorProvider.Clear();

    txtBxEngineID = ((CheckBox)sender).Checked;
    rdBtnAuthNoPriv = ((CheckBox)sender).Checked;
    rdBtnAuthPriv = ((CheckBox)sender).Checked;
    rdBtnNoAuthNoPriv = ((CheckBox)sender).Checked;

    //Pass work for enabling Auth and Priv fields to rdBtn events.
} 
```

这个解决方案更有效，并且保证我不会看到任何闪烁。然而，这也意味着为了“成功完成”启用页面上的所有控件，我的 chkBx 现在必须依赖 rdBtn 的逻辑。这是良好的编程习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T22:28:36.013

我认为这是保留在表单中的明智代码，但是我会提出一些建议；

1) 铸造的加工成本较低，因此应避免在循环内铸造。事实上，作为一般概念，当结果保证保持不变时，您应该避免在循环内执行任何重复操作。所以你可以像这样改进你的第一种方法；

```
private void ChkBxSnmPv3OnCheckedChanged(object sender, EventArgs eventArgs)
{
    snmpSettingsErrorProvider.Clear();

    // cast the sender once only
    CheckBox cb = sender as CheckBox;
    if (null == cb) return;

    foreach (Control control in grpBxSNMPv3.Controls)
    {
        if (control != sender)
            control.Enabled = cb.Checked;
    }
} 
```

2）我建议将启用/禁用逻辑移到一个单独的方法中，然后从您的控制事件处理程序中调用它。如果您决定从其他控件中重用相同的逻辑，这将使您能够重用。我发现将行为与控制事件紧密耦合会导致代码重复。像这样；

```
private void ChkBxSnmPv3OnCheckedChanged(object sender, EventArgs eventArgs)
{
    snmpSettingsErrorProvider.Clear();

    // cast the sender once only
    CheckBox cb = sender as CheckBox;
    if (null == cb) return;

    SetEnabled(grpBxSNMPv3, cb.Checked, new[] { cb });
}

private void SetEnabled(Control parent, bool isEnabled, Control[] exludeControls)
{
    if (null == parent) return;

    foreach (Control control in parent.Controls)
    {
        if (!excludeControls.Contains(control))
            control.Enabled = isEnabled;
    }
} 
```

您现在有了一个可重用的方法来启用/禁用另一个包含的所有控件。

3）关于你的最后一个问题，是的，我认为这种方法很好。减少耦合总是一件好事。想想如何设计你的方法更可重用，我想你会想出一个干净的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T22:51:52.223

这就是我最终的结果。除了我正在初始化的两个列表之外，我对此非常满意。他们可能应该在他们自己的控制之下，但我还不能让自己做到这一点。

```
public partial class DeviceSnmpSettings : UserControl, INotifyPropertyChanged
{
    private readonly List<Control> AuthenticationControls = new List<Control>(6);
    private readonly List<Control> PrivacyControls = new List<Control>(6);
    public event PropertyChangedEventHandler PropertyChanged;

    public DeviceSnmpSettings()
    {
        InitializeComponent();
        InitializeAuthControls();
        InitializePrivacyControls();
    }

    public DeviceSnmpSettings(Point location)
        : this()
    {
        Location = location;
    }

    //TODO: Move out into sub-user control?
    private void InitializeAuthControls()
    {
        AuthenticationControls.Add(lblAuthPassword);
        AuthenticationControls.Add(mskdTxtBxAuthPassword);
        AuthenticationControls.Add(lblAuthProtocol);
        AuthenticationControls.Add(cmbBxAuthProtocol);
        AuthenticationControls.Add(lblAuthPasswordConfirm);
        AuthenticationControls.Add(mskdTxtBxAuthPasswordConfirm);
    }
    //TODO: Move out into sub-user control?
    private void InitializePrivacyControls()
    {
        PrivacyControls.Add(lblPrivacyPassword);
        PrivacyControls.Add(mskdTxtBxPrivacyPassword);
        PrivacyControls.Add(lblPrivacyProtocol);
        PrivacyControls.Add(cmbBxPrivacyProtocol);
        PrivacyControls.Add(lblPrivacyPasswordConfirm);
        PrivacyControls.Add(mskdTxtBxPrivacyPasswordConfirm);
    }

    private bool SNMPv3Enabled
    {
        get { return chkBxSNMPv3.Checked; }
        set { chkBxSNMPv3.Checked = value; }
    }

    private SNMPV3Mode SecurityMode
    {
        get
        {
            SNMPV3Mode mode = SNMPV3Mode.NoAuthNoPriv;

            if (rdBtnAuthNoPriv.Checked)
                mode = SNMPV3Mode.AuthNoPriv;
            else if(rdBtnAuthPriv.Checked)
                mode = SNMPV3Mode.AuthPriv;

            return mode;
        }
        set
        {
            switch (value)
            {
                case SNMPV3Mode.NoAuthNoPriv:
                    rdBtnNoAuthNoPriv.Checked = true;
                    break;
                case SNMPV3Mode.AuthNoPriv:
                    rdBtnAuthNoPriv.Checked = true;
                    break;
                default:
                    rdBtnAuthPriv.Checked = true;
                    break;
            }

            OnSecurityModeChanged();
        }
    }

    protected virtual void OnSecurityModeChanged()
    {
        AuthenticationControls.ForEach(control => SetControlEnabledState(control, AuthenticationEnabled));
        PrivacyControls.ForEach(control => SetControlEnabledState(control, PrivacyEnabled));
        NotifyPropertyChanged("SecurityMode");
    }

    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(property));
    }

    private bool AuthenticationEnabled
    {
        get
        {
            return SNMPv3Enabled && (SecurityMode == SNMPV3Mode.AuthPriv || SecurityMode == SNMPV3Mode.AuthNoPriv);
        }
    }

    private bool PrivacyEnabled
    {
        get { return SNMPv3Enabled && SecurityMode == SNMPV3Mode.AuthPriv; }
    }

    private void ChkBxSnmPv3OnCheckedChanged(object sender, EventArgs eventArgs)
    {
        SetControlEnabledStates();
    }

    private void SetControlEnabledStates()
    {
        snmpSettingsErrorProvider.Clear();

        foreach (Control control in grpBxSNMPv3.Controls)
        {
            //Check each of the lists for the control to prevent flickering.
            if (control != chkBxSNMPv3 && !AuthenticationControls.Contains(control) && !PrivacyControls.Contains(control))
                control.Enabled = SNMPv3Enabled;
        }

        //Need to validate that our radio button's checked state is reflected properly.
        AuthenticationControls.ForEach(control => SetControlEnabledState(control, AuthenticationEnabled));
        PrivacyControls.ForEach(control => SetControlEnabledState(control, PrivacyEnabled));
    }

    public void LoadFields(NetworkDiscovery networkDiscovery)
    {
        SNMPv3Enabled = networkDiscovery.Snmpv3Enabled;
        SecurityMode = networkDiscovery.SecurityMode;
        txtBxSNMPv3Username.Text = networkDiscovery.Username;
        mskdTxtBxAuthPassword.Text = networkDiscovery.AuthPassword;
        mskdTxtBxAuthPasswordConfirm.Text = networkDiscovery.AuthPassword;
        cmbBxAuthProtocol.SelectedItem = networkDiscovery.AuthProtocol.ToString();
        mskdTxtBxPrivacyPassword.Text = networkDiscovery.PrivacyPassword;
        mskdTxtBxPrivacyPasswordConfirm.Text = networkDiscovery.PrivacyPassword;
        cmbBxPrivacyProtocol.SelectedItem = networkDiscovery.PrivacyProtocol.ToString();

        SetControlEnabledStates();
    }

    private void SetControlEnabledState(Control control, bool enabled)
    {
        control.Enabled = enabled;
                    //Clear errors set on errorProvider when control is disabled.
        if (!control.Enabled)
            snmpSettingsErrorProvider.SetError(control, string.Empty);
    }

    private void rdBtnNoAuthNoPriv_CheckedChanged(object sender, EventArgs e)
    {
        if (((RadioButton)sender).Checked)
            SecurityMode = SNMPV3Mode.NoAuthNoPriv;
    }

    private void rdBtnAuthNoPriv_CheckedChanged(object sender, EventArgs e)
    {
        if (((RadioButton)sender).Checked)
            SecurityMode = SNMPV3Mode.AuthNoPriv;
    }

    private void rdBtnAuthPriv_CheckedChanged(object sender, EventArgs e)
    {
        if (((RadioButton)sender).Checked)
            SecurityMode = SNMPV3Mode.AuthPriv;
    }
} 
```

# c# - 取消在 .NET 套接字服务器中自动固定的字节 []

> ID：10690012
> 
> 赞同：2
> 
> 时间：2012-05-21T17:45:00.217
> 
> 标签：c#, .net, tcp, network-programming, clr

我有一个异步套接字服务器。我遇到了一个问题，即有问题的客户端和难以重现的网络事件导致大量字节 [] 被固定。由于处理客户端的所有线程都是隐式的（我使用 BeginAcceptClient，并且我使用回调而不是显式实例化的线程）我不控制固定过程。“隐式线程”是指不是由我直接生成的线程，而是由托管我的应用程序的运行时生成的。

无论如何，[这篇](https://stackoverflow.com/questions/4830417/manually-unpinning-a-byte-in-c)文章中的答案显示了如何取消固定对象。如果我继续并自己固定我的字节 []，是否可以覆盖幕后固定，在清理期间执行 BeginRead 和取消固定？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:47:08.227

您链接到的帖子中的答案是完全错误的（我只是在那里留下了评论）。只有当最后一个固定句柄（更一般地说：固定“原因”，因为除了 GCHandles 之外还有其他原因）被移除时，对象才会被取消固定。您不能强制取消固定。那将是非常不安全的。您可以使用安全的托管代码来做不安全的事情，这甚至是一个安全问题！

无论如何，尝试阻止对象固定对您来说是没有意义的。即使这是可能的，但事实并非如此，您的进程也会随机崩溃！套接字依靠固定来确保正确性。它不会无缘无故地这样做。

解决方案在别处：

1.  在应用程序启动时创建所有缓冲区，以便所有缓冲区在内存中是连续的。使用缓冲池。
2.  使用少量大缓冲区并将其部分分配给各个客户端。

一个小的旁注：固定的实现与您的想法不同。固定不是您可以在对象上打开和关闭的标志。当您固定某些东西时，一开始并没有什么特别的事情发生。只有在 GC 运行时，GC 才会注意到存在具有它们正在固定的特殊属性的引用。然后它会阻止对象被移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:55:17.350

我建议您不要专注于 Pin/Unpin，而是从不同的 AppDomain 执行所有套接字调用。然后，当您处于“空闲/安全”点时，您可以卸载并重新加载该 AppDomain 以将其中的内存重置为良好状态。

# vb.net - 使用 Gmail 发送电子邮件会出现超时错误

> ID：10690015
> 
> 赞同：11
> 
> 时间：2012-05-21T17:45:10.483
> 
> 标签：vb.net, email, smtp, timeoutexception

我们正在测试一些代码以使用 Gmail 从表单发送电子邮件，但出现超时错误。

您能告诉我们此代码中缺少什么来发送电子邮件吗？

```
 Try
        Dim SmtpServer As New SmtpClient()
        Dim mail As New MailMessage()

        SmtpServer.EnableSsl = True
        SmtpServer.Credentials = New Net.NetworkCredential("ouremail@gmail.com", "MyPasswordGoesHere")
        SmtpServer.Port = 465
        SmtpServer.Host = "smtp.gmail.com"

        mail.From = New MailAddress("ouremail@gmail.com")
        mail.To.Add("ouremail@gmail.com")
        mail.Subject = "Test Mail"
        mail.Body = "This is for testing SMTP mail from GMAIL"

        SmtpServer.Send(mail)

        MsgBox("mail sent")

    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try 
```

更新：使用 MailBee 更改代码。这就是我们向所有客户发送电子邮件的方式：

```
 Dim strSqlStatement As String = "Select CustomerName, Email " & _
                               "From Customers " & _
                              "Where Email Is Not Null"
    If IsConnected() Then

        ' Set up the sql command and lookup the parent.
        '----------------------------------------------
        Using objSqlCommand As SqlCommand = New SqlCommand(strSqlStatement, ObjConnection)

            With objSqlCommand

                ' Open the SqlConnection before executing the query.
                '---------------------------------------------------
                Cursor = Cursors.WaitCursor

                ObjConnection.Open()

                Dim objDataReader As SqlDataReader = .ExecuteReader()

                ' Go through all the customers and send out the promotion emails.
                '----------------------------------------------------------------
                If objDataReader.HasRows Then

                    MailBee.Global.LicenseKey = "My license key goes here."

                    Dim objSMTP As New Smtp
                    Dim server As New SmtpServer(TextBoxSMTPServer.Text, TextBoxUserName.Text, TextBoxPassword.Text)

                    'SmtpServer.Host = TextBoxSMTPServer.Text
                    'SmtpServer.Port = TextBoxPort.Text
                    'SmtpServer.Timeout = 100

                    'If TextBoxUseSSL.Text = "Yes" Then
                    '    SmtpServer.EnableSsl = True
                    'Else
                    '    SmtpServer.EnableSsl = False
                    'End If

                    'If TextBoxUseDefaultCredentials.Text = "Yes" Then
                    '    SmtpServer.UseDefaultCredentials = True
                    'Else
                    '    SmtpServer.UseDefaultCredentials = False
                    'End If

                    'SmtpServer.Credentials = New Net.NetworkCredential(TextBoxUserName.Text, TextBoxPassword.Text)

                    objSMTP.SmtpServers.Clear()
                    objSMTP.SmtpServers.Add(server)

                    While objDataReader.Read()
                        If objDataReader("Email").ToString <> "" Then

                            objSMTP.Message.From.AsString = TextBoxEmailFrom.Text
                            objSMTP.Message.To.AsString = objDataReader("Email").ToString
                            objSMTP.Message.Subject = "Promotion: " & TextBoxID.Text
                            objSMTP.Message.BodyPlainText = "Dear " & objDataReader("CustomerName") & "," & vbCrLf & vbCrLf & TextBoxPromotionBodyText.Text

                            Try
                                objSMTP.Send()

                            Catch exBadPassword As MailBeeSmtpLoginBadCredentialsException
                                MsgBox("The login name or password is not correct.", MsgBoxStyle.Exclamation, "Email")
                                blnThereWereErrors = True

                            Catch exBadFromAddress As MailBeeSmtpRefusedSenderException
                                MsgBox("The sender email must be the same as the user's email address.", MsgBoxStyle.Exclamation, "Email")
                                blnThereWereErrors = True

                            Catch ex As Exception
                                MsgBox(ex.Message)
                                blnThereWereErrors = True
                            End Try
                        End If

                        If blnThereWereErrors Then
                            Exit While
                        End If
                    End While

                    If blnThereWereErrors = False Then
                        MessageBox.Show("Mass emailing has completed." & vbCrLf, _
                                "Email Message.", _
                                MessageBoxButtons.OK, _
                                MessageBoxIcon.Information)
                    End If
                End If

                objDataReader.Close()
                ObjConnection.Close()

                Cursor = Cursors.Default
            End With ' objSqlCommand
        End Using ' objSqlCommand 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T12:21:39.843

尝试使用不同的端口号。您不能使用端口 465，`System.Net.Mail`因为它只支持“显式 SSL”。请查看[此页面](http://www.systemnetmail.com/faq/5.3.aspx)以获取有关此内容的更多信息。

通过 VB.NET 发送邮件时，Gmail 将接受端口 25 或 587，但使用端口 465 会超时。

还要确保你有`UseDefaultCredentials = False`

还可以查看[this example](https://stackoverflow.com/questions/32260/sending-email-in-net-through-gmail) on how to send mail using GMail in C#，它可能会给你更多的线索。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-06-23T14:08:04.273

我有类似的问题，在我的情况下，我只是忘记指定协议，所以`smtp.gmail.com`我不得不把`ssl://smtp.gmail.com`.

# android - 如何使用游标从数据库中检索数据？（安卓、SQLite）

> ID：10690018
> 
> 赞同：3
> 
> 时间：2012-05-21T17:45:31.107
> 
> 标签：android, database, sqlite, cursor

我被困住了。我无法找出我做错了什么，所以请帮助任何人。虽然这是一个非常简单的任务，但我不明白数据库的实际情况。

这是我用来将数据插入数据库表的代码：

```
EditText title = (EditText)findViewById(R.id.Title); 
String Title = title.getText().toString();

EditText d = (EditText)findViewById(R.id.director); 
String Director = d.getText().toString();

SQLiteDatabase db = openOrCreateDatabase("Films", MODE_PRIVATE, null);
db.execSQL("CREATE TABLE IF NOT EXISTS MyFilms (idFilm INTEGER PRIMARY KEY AUTOINCREMENT, Title VARCHAR, Director VARCHAR, Year INTEGER, Rating INTEGER);");
db.execSQL("INSERT INTO MyFilms (Title) VALUES('" + Title + "');");
db.execSQL("INSERT INTO MyFilms (Director) VALUES('" + Director + "');");
db.close(); 
```

`idfilm`这段代码是否给了我一个包含, `Title`, `Director`, `Year`,列的表格`Rating`？如果是这样，当我尝试`Title`使用以下代码从列中检索所有标题时仍然存在问题：

```
SQLiteDatabase db = openOrCreateDatabase("Films", MODE_PRIVATE, null);
Cursor c = db.rawQuery("SELECT * FROM MyFilms",null);
c.moveToFirst();

while (c.isAfterLast() == false) {
  String Title = c.getString(c.getColumnIndex("Director"));         
  stringList.add(Title); //This I use to create listlayout dynamically and show all the Titles in it
  c.moveToNext();
} 
```

错误日志：

```
05-21 17:50:14.666: E/AndroidRuntime(27045): FATAL EXCEPTION: main
05-21 17:50:14.666: E/AndroidRuntime(27045): java.lang.NullPointerException
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.widget.AbsListView.obtainView(AbsListView.java:1409)
 05-21 17:50:14.666: E/AndroidRuntime(27045):   at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.widget.ListView.onMeasure(ListView.java:1127)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.view.View.measure(View.java:8313)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.widget.RelativeLayout.measureChild(RelativeLayout.java:566)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:381)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.view.View.measure(View.java:8313)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.view.View.measure(View.java:8313)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.view.View.measure(View.java:8313)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.view.View.measure(View.java:8313)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.os.Looper.loop(Looper.java:123)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at android.app.ActivityThread.main(ActivityThread.java:3683)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at java.lang.reflect.Method.invokeNative(Native Method)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at java.lang.reflect.Method.invoke(Method.java:507)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-21 17:50:14.666: E/AndroidRuntime(27045):    at dalvik.system.NativeStart.main(Native Method) 
```

为什么 DDMS 会抛出 NullPointerException？我应该如何从“标题”中获取数据？我尝试使用 c.getString()，但是当我要求 c.getString(1) 时，仍然有 NullPointerException，尽管当我设置 c.getString(2) 时它返回“Director”。请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T18:16:49.373

如果您从编辑文本框中正确插入了值。然后做这些步骤。检索值

```
Cursor c = db.rawQuery("SELECT * FROM MyFilms",null);

if (c != null ) {
        if  (c.moveToFirst()) {
              do {
              String dir = c.getString(c.getColumnIndex("Director"));
              test.add("" + dir );
              }while (c.moveToNext());
        }
   } 
```

将值显示为列表

```
 this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,test)); 
```

该语句将其显示为一个列表，因为该类扩展了一个 ListActivity。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T17:55:09.147

当您填充数据库（您的第一个代码段）时，您的问题就会发生。

您需要结合以下`INSERT`语句：

```
db.execSQL("INSERT INTO MyFilms (Title, Director, Year) VALUES('" 
    + title + "','" + director + "'," + year + ");"); 
```

否则，您将得到包含`Title`or的空值的行`Director`。

(**注意：**不要使用上面的 SQL 表示法，因为它可能会让你容易受到 SQL 注入的攻击。我只是为了简单起见才这样写。在生产代码中，你应该使用参数或清理你的值。不要成为[Little Bobby Tables](http://xkcd.com/327/)的受害者）。

**编辑**

以下是有关准备好的语句的一些线程：

*   [如何在 Android 的 SQlite 中使用准备好的语句？](https://stackoverflow.com/questions/433392/how-do-i-use-prepared-statements-in-sqlite-in-android)
*   [在 Android 中使用准备好的语句进行查询？](https://stackoverflow.com/questions/9857073/queries-with-prepared-statements-in-android)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-04T05:47:50.710

使用此代码。

```
c.moveToFirst();
        if (c != null) {
            do {
                for (int i = 0; i < c.getColumnCount(); i++) {

                    Log.e("", "" + c.getString(i));
                }
            }while (c.moveToNext());
        } 
```

# button - 在不生成按钮的情况下链接到 pinterest 上的“固定”

> ID：10690019
> 
> 赞同：122
> 
> 时间：2012-05-21T17:45:31.307
> 
> 标签：button, pinterest

我有一个包含数十或数百个帖子的页面，每个帖子都有社交按钮。我只是无法为每个 url 生成所有按钮：它太慢了（facebook、g+、twitter、pinterest ......对于数百个链接）。因此，我没有使用即时生成的 facebook 分享按钮，而是使用一个简单的 img 指向

```
https://www.facebook.com/sharer.php?u=${url_of_current_post}&t= 
```

当用户单击它时，会打开一个弹出窗口，其中包含 facebook 生成的内容。

我怎样才能为 Pinterest 做到这一点？我只找到生成按钮的代码，但如果可能的话，我想完全避免使用 js。有没有像下面这样的东西？

```
http://pinterest.com/pinthis?url=${url_of_current_post} 
```

请不要试图让我使用 js 按钮，谢谢。

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-06-26T16:52:11.257

标准 Pinterest 按钮代码（您可以[在此处生成](http://pinterest.com/about/goodies/)）是`<a>`包装`<img>`Pinterest 按钮的标签。

如果您没有`pinit.js`在页面上包含脚本，则此`<a>`标记将“按原样”工作。您可以通过在这些标签上注册自己的点击处理程序来改善体验，这些标签会打开一个具有适当尺寸的新窗口，或者至少添加`target="_blank"`到标签以使其在新窗口中打开点击。

标签语法如下所示：

```
<a href="http://pinterest.com/pin/create/button/?url={URI-encoded URL of the page to pin}&media={URI-encoded URL of the image to pin}&description={optional URI-encoded description}" class="pin-it-button" count-layout="horizontal">
    <img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" />
</a> 
```

如果使用 JavaScript 版本的共享按钮会破坏您的页面加载时间，您可以使用异步加载方法来改进您的网站。有关使用 Pinterest 按钮执行此操作的示例，请查看我的[GitHub Pinterest 按钮项目，该项目具有改进的 HTML5 语法](https://github.com/skibblenybbles/PinterestPlus)。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2013-08-21T02:31:03.147

如果你想创建一个简单的超链接而不是 pin it 按钮，

改变这个：

```
http://pinterest.com/pin/create/button/?url= 
```

对此：

```
http://pinterest.com/pin/create/link/?url= 
```

因此，一个完整的**URL**可能看起来像这样：

`<a href="//pinterest.com/pin/create/link/?url=http%3A%2F%2Fwww.flickr.com%2Fphotos%2Fkentbrew%2F6851755809%2F&media=http%3A%2F%2Ffarm8.staticflickr.com%2F7027%2F6851755809_df5b2051c9_z.jpg&description=Next%20stop%3A%20Pinterest">Pin it</a>`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-12T22:12:35.090

我有同样的问题。这在 Wordpress 中效果很好！

```
<a href="//pinterest.com/pin/create/link/?url=<?php the_permalink();?>&amp;description=<?php the_title();?>">Pin this</a> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-06T08:52:50.297

对于这种情况，我发现[共享链接生成器](http://sharelinkgenerator.com/)非常有用，它有助于创建 Facebook、Google+、Twitter、Pinterest、LinkedIn 共享按钮。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-06T15:20:19.263

我找到了一些wordpress的代码：

```
 <script type="text/javascript">

    function insert_pinterest($content) {
        global $post;
        $posturl = urlencode(get_permalink()); //Get the post URL
        $pinspan = '<span class="pinterest-button">';
     $pinurl = '';
     $pinend = '</span>';
        $pattern = '//i';
        $replacement = $pinspan.$pinurl.'$2.$3'.$pindescription.$pinfinish.''.$pinend;
        $content = preg_replace( $pattern, $replacement, $content );
        //Fix the link problem
        $newpattern = '/<span class="pinterest-button"><\/a><\/span><\/a>/i';
     $replacement = '';
     $content = preg_replace( $newpattern, $replacement, $content );
     return $content;
    }
    add_filter( 'the_content', 'insert_pinterest' );

    </script> 
```

然后将以下内容放入您的 PHP 中：

```
<?php $pinterestimage = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'full' ); ?>
<a href="http://pinterest.com/pin/create/button/?url=<?php echo urlencode(get_permalink($post->ID)); ?>&media=<?php echo $pinterestimage[0]; ?>&description=<?php the_title(); ?>">Pin It</a> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-16T08:35:36.697

因此，您希望在不安装按钮的情况下将代码固定在按钮上吗？如果是这样，只需将此代码粘贴到您要固定的页面的 url 的位置。它应该用作没有按钮的 pin it 按钮。

`javascript:void((function(){var%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)})());`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-31T15:27:13.053

您可以使用一个小的 jQuery 脚本创建一个自定义链接，如此[处所述](https://stackoverflow.com/questions/11312923/custom-pinterest-button-for-custom-url-text-link-image-or-both)

```
$('.linkPinIt').click(function(){
    var url = $(this).attr('href');
    var media = $(this).attr('data-image');
    var desc = $(this).attr('data-desc');
    window.open("//www.pinterest.com/pin/create/button/"+
    "?url="+url+
    "&media="+media+
    "&description="+desc,"_blank","top=0,right=0,width=750,height=320");
    return false; 
}); 
```

这将适用于所有具有`linkPinIt`存储在 HTML 5 数据属性中的图像和描述的类的链接，`data-image`以及`data-desc`

```
<a href="https%3A%2F%2Fwww.flickr.com%2Fphotos%2Fkentbrew%2F6851755809%2F" 
   data-image="https%3A%2F%2Fc4.staticflickr.com%2F8%2F7027%2F6851755809_df5b2051c9_b.jpg" 
   data-desc="Title for Pinterest Photo" class="linkPinIt">
    Pin it!
</a> 
```

看到这个[jfiddle 例子](http://jsfiddle.net/grhxs6pb/)

# c# - Windows中公钥和私钥容器的位置？

> ID：10690021
> 
> 赞同：11
> 
> 时间：2012-05-21T17:45:38.233
> 
> 标签：c#, .net, cryptography, private-key, public-key

我正在尝试使用以下代码将我的公钥和私钥存储在容器中：

```
CspParameters cp = new CspParameters();
cp.KeyContainerName = "Test";
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(cp); 
```

我想知道的是容器的位置。容器在文件系统中的位置？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-21T18:10:30.140

您将在以下目录 (*) 中找到密钥文件：

```
Path.Combine(
    Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData), 
    @"Microsoft\Crypto\RSA\MachineKeys") 
```

您可以获取给定键的文件名，如下所示：

```
CspParameters cp = ...;
CspKeyContainerInfo info = new CspKeyContainerInfo(cp);
string fileName = info.UniqueKeyContainerName; 
```

我不相信此信息已记录在案，因此如果您使用它，您将依赖未记录的实现细节，这些细节在未来的 Windows 版本中可能不起作用。不幸的是，有时需要使用它。例如[，如本问题所述](https://stackoverflow.com/questions/7659402/how-to-view-permissions-for-rsa-key-container)，我认为没有其他可靠的方法可以从非特权帐户查看 RSA 密钥容器的权限。

(*) 那是机器键。用户特定的密钥大概在`Environment.SpecialFolder.LocalApplicationData`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-24T17:18:52.813

我使用[Process Monitor](https://technet.microsoft.com/en-us/sysinternals/processmonitor)和[Sn.exe（强名称工具）](https://msdn.microsoft.com/en-us/library/k5b5tt23(v=vs.110).aspx)来了解我的 Windows 7 机器上包含我的关键文件的文件夹的位置，从而确认[Joe's answer](https://stackoverflow.com/a/10690349/1497596)中的信息。

首先，我运行 Process Monitor 并指定以下过滤器：

```
Column    Relation    Value    Action
---------------------------------------
Path      contains    crypto   Include 
```

然后我运行 Strong Name Tool ( `sn.exe`) ^†从容器中的密钥对中提取公钥`VS_KEY_773685D47C32F8C7`并将其导出到`public_key.snk`：

```
sn.exe -pc VS_KEY_773685D47C32F8C7 public_key.snk 
```

这样做之后，我注意到 Process Monitor 指示`sn.exe`对该文件夹提出了几个访问请求：

```
C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys 
```

...以及包含我的容器的公钥和私钥的文件，名为`VS_KEY_773685D47C32F8C7`：

```
C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\74c2c10a37baa69f7969c7144db5805d_c55067c2-4a01-4792-9d70-d7a6e4799447 
```

* * *

^†`sn.exe`可以通过[Visual Studio 的开发人员命令提示符](https://msdn.microsoft.com/en-us/library/ms229859(v=vs.110).aspx)方便地运行。

# java - 运行 Glassfish 的 JVM 在 Garbage-Collection 中崩溃，只留下 hs_err_-File

> ID：10690023
> 
> 赞同：1
> 
> 时间：2012-05-21T17:45:44.447
> 
> 标签：java, crash, garbage-collection, glassfish, jvm-crash

我们的一台新服务器每 2 天左右就崩溃一次，JVM 消失并留下一个 hs_err_pidXYZ.log 文件。

服务器在 jdk 1.6.0_26 上运行 glassfish v2。它具有 32GB 内存和 i7-2600。jvisualvm 中的内存消耗看起来很健康。

我是否在 hs_err 文件中找到了正确的问题？（见下文）我已将 PermGen 的大小调整为 1g，它似乎有点帮助。然后去哪儿？什么是最佳实践？

我将其隔离在 hs_err_files 中：

```
> Stack: [0x00007fd38d559000,0x00007fd38d65a000], 
> sp=0x00007fd38d658550,  free space=1021k Native frames: (J=compiled
> Java code, j=interpreted, Vv=VM code, C=native code) V 
> [libjvm.so+0x69c334]  MarkSweep::follow_stack()+0x74 V 
> [libjvm.so+0x755e14]  PSMarkSweep::mark_sweep_phase1(bool)+0xe4 V 
> [libjvm.so+0x754cc1]  PSMarkSweep::invoke_no_policy(bool)+0x481 V 
> [libjvm.so+0x754803]  PSMarkSweep::invoke(bool)+0x83 V 
> [libjvm.so+0x8608f7]  VM_ParallelGCSystemGC::doit()+0xf7 V 
> [libjvm.so+0x86d7fa]  VM_Operation::evaluate()+0x4a V 
> [libjvm.so+0x86cde2]  VMThread::evaluate_operation(VM_Operation*)+0x82
> V  [libjvm.so+0x86d053]  VMThread::loop()+0x193 V 
> [libjvm.so+0x86cb5e]  VMThread::run()+0x6e V  [libjvm.so+0x710adf] 
> java_start(Thread*)+0x13f 
```

完整文件在这里： http: [//pastebin.com/idW9RBNQ](http://pastebin.com/idW9RBNQ)

谢谢斯蒂芬

# c - 函数的参数是如何执行的？

> ID：10690026
> 
> 赞同：3
> 
> 时间：2012-05-21T17:45:55.073
> 
> 标签：c

> **可能重复：**
> [函数参数评估顺序](https://stackoverflow.com/questions/9566187/function-parameter-evaluation-order)

假设我有一个带有 4 个参数的函数。首先考虑执行哪个参数以及为什么。

我试图了解`,`用于函数原型的运算符的重要性。按照规则，它是首先考虑的最后一个变量吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T17:48:09.557

如果我们有一个具有以下原型的函数：

```
int function(int x, int y, int z); 
```

我们这样称呼它：

```
function( something_a(), something_b(), something_c() ); 
```

我们无法推测 和 的执行`something_a`顺序。`something_b``something_c`

另一方面，我们可以使用逗号运算符，如下所示：

```
int main() {
    int x;
    something_a(), something_b();
    something_c();
} 
```

在这种情况下，我们知道`something_a`将被调用，然后`something_b`，最后`something_c`。

总之，函数调用中的逗号**不是**逗号运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T17:50:40.900

1.  逗号用作分隔参数的一种方式。逗号**不是**运算符。

2.  函数参数的顺序取决于编译器和运行时堆栈的操作方式。该标准将其留给编译器来确定评估参数的顺序，因此您**不应**依赖于保留的特定顺序。

# iphone - 如何在后台iphone定期调用webservice？

> ID：10690027
> 
> 赞同：0
> 
> 时间：2012-05-21T17:46:04.430
> 
> 标签：iphone, objective-c, ios

我有网络服务，我想定期从我的 iPhone 应用程序调用此服务，以便在应用程序运行时每 1 分钟兑现一次数据。

我使用**NSTimer**来调用调用此服务的函数，但我很生气的是，第一次调用确实完成了对第一次调用的数据的解析，然后再进行新的调用。那我该怎么做呢？

```
{
 NSDate *d = [NSDate dateWithTimeIntervalSinceNow: 60.0];
 NSTimer *t = [[NSTimer alloc] initWithFireDate: d
                                      interval: 10
                                        target: self
                                      selector:@selector(calltimer:)
                                      userInfo:nil repeats:YES];

 NSRunLoop *runner = [NSRunLoop currentRunLoop];
 [runner addTimer:t forMode: NSDefaultRunLoopMode];
 [t release];
}

-(void)calltimer :(id)sender
{
    NSLog(@"yessss");

    if(!myQueue)
    {
        myQueue = dispatch_queue_create("supperApp.user1025523.com", NULL);
        dispatch_async(myQueue, ^{
            [self getData]; 
            });
    }    
}

-(void)getData
{
    webserviceCaller* wsCaller = [[webserviceCaller alloc]initWithTarget:self     selector:@selector(parsINVData:)];
    [wsCaller getINventoryData:self.username];
    [wsCaller release];
}

-(void) parsINVData:(InvData*) ret
{
    //save return data in global variable      
} 
```

我使用**NSMutableURLRequest**来启动请求参数和**NSURLConnection**来启动连接，所以为什么对 Web 服务的调用没有触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:43:15.930

您可以添加一个类级别的成员变量，如下所示：

在 .h 文件中

```
{
    BOOL finishedParsing;
}

- (void) nsTimerFunctionCall
{
    if(!finishedParsing)
    {
        //Either return, or recall this same function after some time
        return;
    }

   [self parseCode];
}

- (void) parseCode
{
    finishedParsing = NO;

    //do long processing function
    //....

    finishedParsing = YES;
} 
```

这样，您可以确保在处理对函数的另一个调用时不会调用解析代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:05:02.517

使用串行队列确保一个任务等待下一个任务。

```
- (id)init
{
    self = [super init];
    if( !self ) return nil;

    parsing_queue = dispatch_queue_create("superApp.user1025523.com", NULL);

    // etc.

- (void)timerAction: (NSTimer *)tim
{
    // Enqueue the work. Each new block won't run until the 
    // previous one has completed.
    dispatch_async(parsing_queue, ^{
        // Do the work
    });
} 
```

这也会在后台自动进行。

# perl - 在 Mojolicious 中请求用户代理

> ID：10690028
> 
> 赞同：9
> 
> 时间：2012-05-21T17:46:11.477
> 
> 标签：perl, mojolicious

我正在尝试从请求中读取 UserAgent 并基于它执行操作。谁能告诉我，我如何在 Mojolicious 中获取请求 UserAgent。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T19:26:42.773

我想到了：`$req->headers->user_agent`

# web-services - 从 Excel 2007 调用 Web 服务？

> ID：10690032
> 
> 赞同：3
> 
> 时间：2012-05-21T17:46:37.163
> 
> 标签：web-services, excel, excel-2007, vba

**问题：**
我想从网络服务中提取一些数据并将其放入 Excel。

**例如**：带有参数 X、Y、Z 的 web 服务方法“GetPerformance”将返回一个包含资金及其表现的表格。我想提取特定行并将数据转储到工作表中。

如何使用 VBA 或其他插件实现这样的壮举？

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:56:58.483

您可以在这里查看我的答案：[Excel doc contents to webservice](https://stackoverflow.com/questions/11270839/excel-doc-contents-to-webservice/11298452#11298452)

具体来说，在我的回答中查看名为“SaveNewStaff”的方法（这只是对原始问题作者已经完成的内容的重写）；这是一个很好的例子，说明如何使用 POST 调用 Web 服务。

如果您需要更具体的答案，请提供有关被调用方法的一些详细信息，以及 Web 方法的参数和返回数据。

干杯! :)

# ruby-on-rails - 使用 Paperclip 和 MiniExiftool 抓取照片和视频的 exif 数据

> ID：10690038
> 
> 赞同：1
> 
> 时间：2012-05-21T17:47:07.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用带有 MiniExiftool gem 的 Rails 3.0.7、Ruby 1.9.2 和 Paperclip 2.7 从上传的照片和视频中抓取数据，然后将该数据作为序列化 json 存储在数据库中；最终，我可以根据需要使用 IM/FFMPEG 来旋转照片/视频。

不幸的是，我运气不佳。每当我尝试在原始文件上使用 MiniExiftool.new 实例化 MiniExiftool（使用 model.photo.queued_for_write[:original]）时，MiniExiftool gem 在 lib/mini_exiftool.rb:90:in 'load' 处引发异常，因为文件要么打开以供阅读，要么不在那里。

我把代码放在几个地方：回形针后期处理钩子、回形针处理器和延迟工作。我似乎什么也做不了。我的后备计划是在上传和使用model.photo.to_file下载文件后约15秒运行延迟作业，运行迷你exif，存储exif数据并进行相应处理（即在必要时根据exif旋转数据旋转）。但是，该解决方案到目前为止还没有奏效，因为 MiniExiftool 与通过 model.photo.to_file 下载的文件引发了完全相同的错误。

有没有其他人试图做这个确切的事情或非常类似的事情？在尝试处理照片/视频上传时，这似乎是一种常见需求。

任何帮助表示赞赏！谢谢。

路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-20T00:16:38.763

像这样的东西应该工作：

```
class Picture < ActiveRecord::Base
  after_post_process :save_exif_data

  def save_exif_data
    exif_data = MiniExiftool.new(image.queued_for_write[:original].path)
    self.serialized_json = exif_data.attributes
  end
end 
```

你可以在这里看到它的实现：[http ://listenin.gs/2014/07/18/using-miniexiftool-with-paperclip/](http://listenin.gs/2014/07/18/using-miniexiftool-with-paperclip/)

# javascript - 如何通过javascript更改数组元素的值？

> ID：10690039
> 
> 赞同：3
> 
> 时间：2012-05-21T17:47:09.013
> 
> 标签：javascript, arrays

我想制作一个按钮来更改数组中元素的值。我正在尝试通过以下代码执行此操作，但元素不会更改。作为一个自学初学者，我可能遗漏了一些非常明显的东西，如果有人能向我指出这一点，我将不胜感激。

谢谢您的回答！

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Change Array Value</title>

</head>

<body>
<textarea id="log2"></textarea>
<input type="button" onClick="uClicked();" value="Click!">
<script>
    var fer=[];

    for (i=0; i< 15; i++){
            fer[i]=i+1;
    }

    function uClicked(fer){
        fer[12] = 10; 
        return fer[12];
    }
    log2.value = "fer[12]= " + fer[12];

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T17:48:28.703

```
function uClicked(){ // remove the parameter. 
```

该参数不是必需的，并且隐藏了实际`fer`变量。

因为`fer`是在外部范围内声明的，`uClicked`所以函数可以访问它。

**固定代码：**

```
var fer=[];

for (i=0; i< 15; i++){
        fer[i]=i+1;
}

function uClicked(){
    fer[12] = 10; 
    alert(fer[12]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T18:01:17.993

带有注释的代码

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Change Array Value</title>

</head>

<body>
<textarea id="log2"></textarea>
<input type="button" onClick="uClicked();" value="Click!">
<script>
var fer=[];

for (i=0; i< 15; i++){ //use var i, otherwise you are putting i in the global scope
        fer[i]=i+1;
}

function uClicked(fer){ // fer is undefined because you are not passing argument when you call the function
    fer[12] = 10; 
    return fer[12];
}
log2.value = "fer[12]= " + fer[12]; //log2 is not defined.

</script>
</body>
</html> 
```

工作代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Change Array Value</title>

</head>

<body>

<textarea id="log2"></textarea>
<input type="button" onclick="uClicked();" value="Click!" />
<script type="text/javascript">
var fer = [];
for(var i; i < 15; i++){
        fer[i]=i+1;
}
var log2 = document.getElementById("log2");
function uClicked(){
    fer[12] = 10; 
    log2.value = "fer[12]= " + fer[12];
    return fer[12];
}
</script>
​

​&lt;/body>
</html> 
```

# python - 如何在 Ming ODM 中映射自定义类型？

> ID：10690040
> 
> 赞同：0
> 
> 时间：2012-05-21T17:47:09.873
> 
> 标签：python, mongodb, pymongo, ming

我正在Ming ODM 中设置映射。出现的一个问题是如何将自定义类型映射到字段，以及如何将该自定义类型传递给`.query`

基本上，我有一个代表客户 ID 的对象。我希望 FieldProperty 获取并返回这种类型的对象，而不是内置类型之一。该类型可与 int 相互转换，并且它将在 Mongo 中存储为 int，但在数据模型和其他 Python 代码中，我想将它作为这种特定于域的类型传递。

当直接将 CustomerID 类型的实例作为 kwd 参数传递给 时`.query`，PyMongo 抱怨它不理解该类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:35:20.253

我最近想做类似的事情；通过 Ming 将 IP 地址作为二进制数据存储在 MongoDB 中。（这样做的原因是允许有效的 CIDR 查询。）我正在为在尝试同样的事情时碰巧遇到这个问题的任何其他人提供我的解决方案，即使现在帮助@kbluck 可能为时已晚。

我通过使我的 IP 地址类成为子类的技巧完成了这项工作`bson.Binary`（我使用的是 Python 2；对于 Python 3，`binary`将使用内置类型的子类）。

你会让你`CustomerID`的类成为`int`. 该类`CustomerID`需要有一个多态构造函数，它接受一个`int`（用于从数据库加载时）、一个`CustomerID`实例（复制构造函数）以及应用程序需要使用的任何构造函数（在我的示例中是一个 IP 地址表示字符串）。

这不是您所要求的；FieldProperty 采用 an`int`或您的类型，并返回一个`int`知道如何转换为您的类型的特殊类型。

我已经上传了一个完整的示例（IP 地址）作为要点：[https ://gist.github.com/3854792](https://gist.github.com/3854792)

# xcode - 如何使用通配符修复配置文件错误

> ID：10690045
> 
> 赞同：0
> 
> 时间：2012-05-21T17:47:26.613
> 
> 标签：xcode, wildcard, ios-provisioning, provisioning-profile

*   主要目标：在我的手机上安装两个相同的应用程序。

*   我所做的：将配置文件从“DEV”切换到“通配符”，并将捆绑标识符从“com.mycompany.appname”更改为“com.mycompany.*”。

我运行它，我得到一个错误，上面写着

“（空）：错误：CFBundleIdentifier 'com.mycompany.*' 包含非法字符“*”无效捆绑标识符 'com.mycompany.*'”

有谁知道出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:51:49.683

您不能在 Bundle Identifier 中使用通配符。相反，如果您有一个应用程序 ID com.company.* 和您的配置文件具有该应用程序 ID。使用该配置文件签署您的应用程序并在设备上安装。如果您想在设备上使用另一个应用程序实例，请更改与第一个包标识符不匹配的应用程序包标识符并将其安装在设备上。

# javascript - Javascript 单元测试全栈

> ID：10690049
> 
> 赞同：3
> 
> 时间：2012-05-21T17:47:34.303
> 
> 标签：javascript, unit-testing, node.js, web-application-design

我们正在寻找一个 Javascript 测试框架，它可以在整个应用程序堆栈、客户端和服务器上执行测试。我们在客户端使用 jQuery、RequireJS 和 Backbone.js，在服务器上使用 Node.js 和 express。

Node.js 应该通过使用相同的语言（以及其他目标）为客户端和服务器端开发提供更相似的设置来简化创建 Web 应用程序。但是，我发现很难进行单元测试并提出一套在客户端和服务器上工作的一致技术。

目前，我们在客户端使用 QUnit 进行测试，在服务器上使用 Expresso 和 Should.js 进行测试。它们具有完全不同的接口，这使得测试客户端和服务器之间共享的代码变得非常困难。例如，考虑一个进行验证的模块，客户端和服务器都需要访问它，并且都需要在所有客户端和服务器上进行单元测试。

本质上，我正在寻找一个圣杯，它允许我们以类似于使用 python 和 ruby​​ 等语言开发客户端-服务器应用程序的方式开发 Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:52:13.600

听起来您正在寻找像[BusterJS](http://busterjs.org/)这样具有服务器端和客户端组件的东西。您将对每个部分进行一组单独的测试，但语法将保持一致。您只需在 buster.js 配置中指定您的环境，如下所示：

```
env: "browser", // or "node" 
```

这是目前所有可用框架中我最喜欢的选择。

# c - 轮询锁是实现关键部分的正确方法吗？

> ID：10690051
> 
> 赞同：3
> 
> 时间：2012-05-21T17:47:50.700
> 
> 标签：c, locking, critical-section

如果我有一个临界区，我必须实现一个锁定它的方法。我看到了以下变体：

```
while(lock)
{
    //do nothing
}
lock = true;
// code of critical section
lock = false; 
```

但是，我对此持怀疑态度，因为理论上，多个线程可以执行`while(lock)`（检查并查看它是否为假），并一起进入关键部分，因为`while(lock)`并且`lock = true;`不是在一个连续的块中执行。我错了吗？或者这确实是一种不安全的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T17:51:14.693

你是对的——这不安全。不多说了。

编辑：不，关于这个结构，真的，真的没什么好说的了。这*不是*自旋锁，也不是很像自旋锁。对于自旋锁，你需要一些类似这样的东西：

```
// note: incomplete, not reentrant, not intended for real use
atomic_type spin_lock = 0;

// enter the spin lock:
int prev_value;

while ((prev_value = test_and_set(&spin_lock, 1)) != 0 || spin_lock != 1)
    ;
// code of critical section

// release the spin lock:
test_and_set(&spin_lock, 0); 
```

这里重要的一点是，要进入自旋锁，需要先获取之前的值，然后*原子地*设置新的值。然后您必须验证*您*对锁的写入是否将其从“非拥有”状态更改为“拥有”状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T17:56:59.207

这是“几乎安全的”，即根本不安全。它所缺少的正是您所看到的 - 多个线程可以看到`lock == false`并进入临界区。它需要一个原子操作，它必须得到硬件的支持——一种保证只有一个执行线程可以获得锁的方法。

也就是说，如果您正在编写的系统可以在互斥故障中幸存下来，并且可以正常处理偶尔的故障（可能是日志记录或偶尔损坏的条目不一定会导致完全故障的东西），那么这种模式可能“有点”工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:22:08.607

您尝试实现的称为自旋锁。新的 C 标准 C11 实现了一个原始数据类型，称为`atomic_flag`可以像这样使用。几乎所有现代硬件都支持它，但不幸的是，大多数编译器还没有完全支持它的语法级别，但有自己的扩展。例如 gcc 有内置函数`__sync_lock_test_and_set`和`__sync_lock_release`为此。

# php - PHP 如果 URL 问题

> ID：10690052
> 
> 赞同：0
> 
> 时间：2012-05-21T17:48:00.527
> 
> 标签：php

好的，我对 if php 命令有疑问。

```
{php}
$searchloadpage = "/search/Car/";
$listingloadpage = "/listing/%";
$currentpage = $_SERVER['REQUEST_URI'];
if($searchloadpage==$currentpage) { 
include('searchload.php');
}
if($listingloadpage==$currentpage) { 
include('searchload.php');
} else {

}
{/php} 
```

现在的问题是你如何使用 $listingloadpage = "/listing/HERE" 来制作我需要制作的 HERE 部分，以便列出之后的任何内容。

示例：/listing/1222.html 或 /listing/ 之后的任何内容都会加载我的 searchload.php 文件。我认为它被称为通配符代码，php 会认为 /listing/ 以及此列表目录之后的任何内容。

希望这很清楚。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:52:02.193

您可以使用[`stristr`](http://php.net/manual/en/function.stristr.php)

```
$listingloadpage = "/listing/";
if (stristr($currentpage, $listingloadpage) !== false) {
  ... 
```

`/listing/`如果出现在 url 中的任何位置，这将起作用。如果您一开始就需要它：

```
if (stristr($currentpage, $listingloadpage) === 0) { 
```

请注意，我`%`已从您的字符串中删除了该字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T17:58:28.877

您应该使用正则表达式来验证 /listing/123.html、listing/abc.html、listing/abc...

```
<?php
    $searchloadpage = "/search/Car/";
    $listingloadpage = "/\/listing\/.+/";

    $currentpage = $_SERVER['REQUEST_URI'];

    if($searchloadpage == $currentpage) {
        include('searchload.php');

    } else if (preg_match($listingloadpage, $currentpage)) {
        include('searchload.php');

    // something else
    } else {

    }
?> 
```

而且，例如，如果你只想要 /listing/123.html 而不是 /listing/somethingelse，你会想要：

```
$listingloadpage = "/\/listing\/[0-9]+\.html/"; 
```

# java - 这是在静态方法中使单例映射线程安全的正确有效方法吗

> ID：10690053
> 
> 赞同：0
> 
> 时间：2012-05-21T17:48:06.710
> 
> 标签：java, map, thread-safety

我只想在地图初始化时创建一次锁。这是我正在使用的代码。

```
public static Map<String, String> getOrderStatusInstance() {
    if (orderStatusMap == null) {
        synchronized (Utility.class) {
            orderStatusMap = new HashMap<String, String>();

            orderStatusMap.put("Key1", "Value1");
            orderStatusMap.put("Key2", "Value2");
            orderStatusMap.put("Key3", "Value3");
            orderStatusMap.put("Key4", "Value4");
        }
    }

    return orderStatusMap;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T17:50:51.633

不，这是个坏主意——你返回的是一个可变的、非线程安全的映射。您还*尝试*实现双重检查锁定，但没有正确执行 - 与使用静态初始化相比，正确执行它更难。

我会创建一个不可变映射（使用[Guava](http://guava-libraries.googlecode.com)，作为首选），理想情况下作为类初始化的一部分：

```
private static final ImmutableMap<String, String> STATUS_MAP = ImmutableMap.of(
    "Key1", "Value1",
    "Key2", "Value2",
    "Key3", "Value3",
    "Key4", "Value4");

public static ImmutableMap<String, String> getOrderStatusInstance() {
    return STATUS_MAP;
} 
```

（对于超过 5 个键/值对，使用[`ImmutableMap.Builder`](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/ImmutableMap.Builder.html)。）

你真的*需要*它比这更懒惰吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T17:54:39.777

几乎是正确的......想想一个线程检查 orderStatusMap == null 并得到 true 的情况。然后调度程序切换到另一个执行相同检查的线程。没有两个线程将执行同步块。

通过在同步块中再次检查 null 来防止这种情况：

```
if (orderStatusMap == null) {
    synchronized (Utility.class) {
        if (orderStatusMap == null) {
            Map<String, String> tmp = new HashMap<String, String>();

            tmp.put("Key1", "Value1");
            tmp.put("Key2", "Value2");
            tmp.put("Key3", "Value3");
            tmp.put("Key4", "Value4");

            orderStatusMap = tmp;
        }
    }
}
return orderStatusMap; 
```

是的，可以这样做两次。外部检查仍然有助于提高性能，因为在创建地图之后，无需再执行进入同步块的昂贵步骤。

请记住，这是创建哈希图的线程安全方法。它不会使地图成为线程安全的。

PS：如果你喜欢这个问题，你可能也会喜欢：[如何直接初始化一个HashMap（以字面的方式）？](https://stackoverflow.com/questions/6802483/java-directly-initialize-a-hashmap-in-a-literal-way)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T17:50:37.407

您应该再次检查块`null`内部`synchronized`。

当两个线程调用你的方法时，它们都会发现`orderStatusMap`null，其中一个会进入`synchronized`块，而另一个会阻塞。但最终它将在同步块内部传递并再次初始化映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T18:06:14.237

不，这是不正确的

这里*也不需要*延迟初始化（我相信无论如何都被过度使用了），所以只需执行以下操作：

```
private static final Map<String, String> orderStatusMap;
static{
    orderStatusMap = Collections.synchronizedMap(new HashMap<String, String>());//making it thread safe
    //or use a ConcurrentHashMap

    orderStatusMap.put("Key1", "Value1");
    orderStatusMap.put("Key2", "Value2");
    orderStatusMap.put("Key3", "Value3");
    orderStatusMap.put("Key4", "Value4");
}

public static Map<String, String> getOrderStatusInstance() {
    return orderStatusMap;
} 
```

# opengl - Opengl 布尔减法

> ID：10690055
> 
> 赞同：3
> 
> 时间：2012-05-21T17:48:09.687
> 
> 标签：opengl, operators, shapes

是否可以在多边形之间进行布尔运算？

我想在 OpenGL 中做一个这样的图，我想用一个球体和四个较小的球体做四个减法。

![在此处输入图像描述](../Images/3db4ede231721afe43f63fb246366c69.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T17:55:06.137

不，仅使用 OpenGL 是不可能的。
OpenGL 是一个非常低级的 API。它允许您显示多边形，仅此而已。

您所描述的通常是在 OpenGL 之上的应用程序级别中完成的。
请查看本文底部，以获取有关执行此操作的库的一些参考资料：

[http://en.wikipedia.org/wiki/Boolean_operations_on_polygons](http://en.wikipedia.org/wiki/Boolean_operations_on_polygons)

# xml - 查找 XML 条目号

> ID：10690057
> 
> 赞同：1
> 
> 时间：2012-05-21T17:48:21.647
> 
> 标签：xml, actionscript-3

我需要获取条目的节点号，但我只有 LOG_ID。怎么找出那个号码？

```
<LOG>
<ENTRY LOG_ID="01042012"/>
<ENTRY LOG_ID="03052012"/>
<ENTRY LOG_ID="09052012"/>
</LOG> 
```

谢谢。乌里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:54:40.070

[使用此处](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e72.html)描述的 E4X 处理和[入门文档](http://wso2.org/project/mashup/0.2/docs/e4xquickstart.html)：

```
var myXML:XML = 
 <LOG>
  <ENTRY LOG_ID="01042012"/>
  <ENTRY LOG_ID="03052012"/>
  <ENTRY LOG_ID="09052012"/>
 </LOG>

trace( myXML.ENTRY.(@LOG_ID==09052012).childIndex() ); /* retrieve entire node */ 
```

您还可以将对此节点的引用存储在`XML`对象中：

```
 var index:int = myXML.ENTRY.(@LOG_ID==09052012).childIndex(); 
```

注意：该`childindex`功能（以及其他一些功能）适用于单个节点。但是，如果您的输入示例有多个节点具有相同的属性值用于检索，您将获得节点列表（即 an `XMLList`）而不是单个节点。现在，为了找出这些孩子的索引，您需要执行以下操作：

```
for each ( var selectedNode in myXML.ENTRY.(@LOG_ID==09052012) )
    trace( selectedNode.childIndex() ); 
```

您始终可以通过以下方式检查您的 E4X 查询是否返回了列表：

```
var candidates:XMLList = myXML.ENTRY.(@LOG_ID==09052012) as XMLList;
if (candidates != null) { // a list 
        // do something ...
} 
```

# css - 打印网页和样式乱了

> ID：10690062
> 
> 赞同：0
> 
> 时间：2012-05-21T17:48:46.517
> 
> 标签：css, printing, styles

当我尝试从网站上打印一些东西时，样式变得一团糟。我附上两张图片供参考。任何人都知道如何解决这个问题？

这是页面的外观以及打印时我希望它的外观： [![图像1](../Images/41d6c7d34832a8ae480132dfefdf501f.png)](https://i.stack.imgur.com/me8to.jpg)

这是打印预览，它也以这种方式打印： [![图2](../Images/5885f2e3bd677574984e1b02b15ddbb4.png)](https://i.stack.imgur.com/Hj9wW.jpg)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:20:09.937

大部分 CSS 位于样式表中，即`media="screen"`. 这可能是格式差异的主要来源。也就是说，它是一个 Joomla 站点 - 尝试使用页面右上角的打印图标。它将踢出一个对打印机更友好的不同页面。

# javascript - 如何在网页中显示 .html 文件的内容？

> ID：10690064
> 
> 赞同：1
> 
> 时间：2012-05-21T17:48:55.873
> 
> 标签：javascript, html

我有两个 html 文件 Editor.html 和 Test.html。我想将 Test.html 文件的源代码放入 Editor.html 中的内容可编辑 div 中。我可以简单地使用java脚本来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:57:44.837

在这种情况下，我会尝试使用 iframe。您可以使用 window.frames 完全获取 iframe 内容：

```
window.frames['iframe_name'].document.getElementById('div_in_iframe'); 
```

并且您通常可以替换like的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:13:48.673

通过ajax。

[jquery](http://www.jquery.com)库使 ajax 的工作变得轻松

```
 <script src="/jquery.min.js"></script>

   <div id="myeditable" contenteditable="true"></div>

  <script type="text/javascript">

   /* the simplest method in the library */
    $("#myeditable").load("/test.html");

   </script> 
```

还有其他很棒的 JavaScript 速记库，比如[原型](http://www.prototypejs.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:17:04.847

像这样的东西结合你想要的任何格式都应该这样做。也就是说，如果您正在寻找一种编写代码的方法，然后单击按钮将内容传递给 iframe 以查看结果。

```
<html>
<head><title>Test</title></head>

    <script>
    function writer()
    {
    var page = document.getElementById('box').value
    document.getElementById('realbox').contentWindow.document.body.innerHTML = page
    }
    </script>
<body>

    <textarea rows ="50%" cols="100%" id='editbox'></textarea>
    <iframe style="background-color: red;" id='realbox' height="100%" width="100%">/iframe>
    <input type="button" onclick="writer()" value="write">

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-16T13:59:22.850

您可以使用 an`iframe`加载网页，然后使用 javascript 获取其 HTML 代码

```
<iframe src="test.html" style="display:none;" name="myFrame">
</iframe>
<textarea id="result"></textarea> 
```

和 javascript 是

```
<script>
var frame = window.frames["myFrame"].document;
var data = frame.getElementsByTagName('html')[0].innerHTML;
    document.getElementById("result").innerHTML = data;
</script> 
```

此代码将有助于获取 HTML 文件标记内的所有 HTML 代码（在本例中为 test.html）。

但它不会打印标签本身，所以这样做使用：

```
document.getElementById("result").innerHTML = "<HTML>"+data"</HTML>"; 
```

但如果可能的话，我建议通过使用 Jquery 库来使用 AJAX。

# teradata - 在列表中查找下一个匹配值

> ID：10690065
> 
> 赞同：0
> 
> 时间：2012-05-21T17:48:57.707
> 
> 标签：teradata

只有 Teradata SQL 可供使用。

我正在尝试动态创建作业将在其上运行的日期列表。这是我正在处理的简化版本。

```
Calendar (covers 2012+)
--------
Calender Date
Business Day Flag - 1 = This is a Business Day, 0 = Weekend
Holiday Flag - 1 = This is a Holiday, 0 = Non-Holiday
Year
Month
Day

Schedule (several more fields available, but not relevant)
--------
Day Type - Business Day or Calendar Date
Day Number - Represents either a Business or Calendar Day
Eligible to run on holiday - Yes / No 
```

通过 select 中的 case 语句完成的逻辑

```
when d.day_type = 'BD' and day_num = c.business_day_of_month  then 'Y'
when d.day_type = 'CD' and day_num = c.day_of_month then 'Y'
else 'N' as run_flag 
```

但是，当 run_flag = 'Y' 和 Holiday_Flag = 1 时，应列出作业以在下一个业务/日历日运行（取决于 day_type）。

我想我需要使用领先/滞后，但我不知道我是否可以让它贯穿所涉及的逻辑。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:02:47.033

试试这个：

```
select
    a.calendar_dt,
    min(b.dt) as next_business_dt
from my_calendar a
cross join my_calendar b
where a.calendar_dt < b.calendar_dt
and b.business_day_flag = 1
and b.holiday_flag = 0
group by
    a.calendar_dt 
```

# c# - 如何通过 Facebook C# SDK 使用用户权限

> ID：10690067
> 
> 赞同：0
> 
> 时间：2012-05-21T17:49:00.497
> 
> 标签：c#, .net, facebook, facebook-graph-api

有人知道我们如何使用Facebook [C# SDK的](http://csharpsdk.org/)[权限](https://developers.facebook.com/docs/authentication/permissions/)吗？

我的意思是通过 Facebook C# SDK 传递权限列表？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T17:52:47.827

您只需要权限即可获取令牌。这总是通过客户端 javascript 实现的，而不是 C# 后端代码。看这里 - [http://csharpsdk.org/docs/web/getting-started](http://csharpsdk.org/docs/web/getting-started) - 请参阅**从网站**部分请求访问令牌。它展示了如何从 JavaScript 代码请求具有特定权限的令牌。在授予该令牌并将其传递回后端之后 - 您可以开始使用 C# SDK 使用它 - 执行诸如发布到提要、上传图像等操作 - 但您不会在后端执行任何具有权限的操作。

# string - java6：将字符附加到字符串

> ID：10690071
> 
> 赞同：3
> 
> 时间：2012-05-21T17:49:16.947
> 
> 标签：string, performance, character, java-6

与在 java6.

例如。在以下两行代码中，哪一行执行得更快：

```
String str = "One" + '\"' 
```

或者

```
String str = "One" + """ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:04:29.630

我猜 String 到 String 的连接性能会好一点，因为他们不需要转换为 Character 并在其上调用 toString() 方法。

**Java 语言规范：**
15.18.1.1 字符串转换

任何类型都可以通过字符串转换转换为String类型。
原始类型 T 的值 x 首先被转换为引用值，就好像通过将其作为参数提供给适当的类实例创建表达式：
• 如果 T 是布尔值，则使用 new Boolean(x)。
• 如果T 是char，则使用new Character(x)。
...

# php - 商家帐户/支付网关或简单的 PayPal 与 PHP？

> ID：10690074
> 
> 赞同：1
> 
> 时间：2012-05-21T17:49:41.103
> 
> 标签：php, paypal

我创建了一个网站来宣传我的新书，并接受购买。该站点使用 php、css 和 js。支付领域不是我的强项，因此，我将其链接到我的 PayPal 帐户，以便用户通过任何类型的信用卡支付。是否值得设置商家帐户/支付网关、购买 SSL 证书以进行安全交易等？我采取了我认为是轻松的道路，但不确定这是否是最佳解决方案。PayPal 提供了一个库存图片和页面来生成 JavaScript，因此我对其进行了定制并将其包含在我的网站[www.gofurtherpubs.com](http://www.gofurtherpubs.com/)的“获取图书”页面上。任何帮助，将不胜感激。谢谢，安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T17:55:36.357

我认为这完全取决于您试图在您的网站中描绘的专业水平以及您愿意投入多少时间/金钱。例如，如果您只需要一种简单的方法来处理交易，而不关心用户是否从您的域转移到 paypal.com 域，那么您应该坚持使用简单的解决方案。但是，如果您需要始终将用户留在您的网站上，或者需要构建更定制的购物车实用程序/等，那么也许您应该升级。不过请检查费用，我相信升级将花费您每月或每年的费用。

# google-visualization - 谷歌图表错误？轴不是从 0 开始

> ID：10690075
> 
> 赞同：24
> 
> 时间：2012-05-21T17:49:41.827
> 
> 标签：google-visualization

以下示例来自 Google 使用 Google Charts 创建 ColumnChart

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Year', 'Austria', 'Belgium', 'Czech Republic', 'Finland', 'France', 'Germany'],
    ['2003', 1336060, 3817614, 974066, 1104797, 6651824, 15727003],
    ['2004', 1538156, 3968305, 928875, 1151983, 5940129, 17356071],
    ['2005', 1576579, 4063225, 1063414, 1156441, 5714009, 16716049],
    ['2006', 1600652, 4604684, 940478, 1167979, 6190532, 18542843],
    ['2007', 1968113, 4013653, 1037079, 1207029, 6420270, 19564053],
    ['2008', 1901067, 6792087, 1037327, 1284795, 6240921, 19830493]
  ]);

  // Create and draw the visualization.
  new google.visualization.ColumnChart(document.getElementById('visualization')).
  draw(data, {
    title: "Yearly Coffee Consumption by Country",
    width: 600,
    height: 400,
    hAxis: {
      title: "Year"
    }
  });
} 
```

效果很好，但是，我只想要每列一个值，所以我将其更改为：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Month', 'How many'],
    ['07', 193],
    ['08', 114],
    ['09', 158]
  ]);

  // Create and draw the visualization.
  new google.visualization.ColumnChart(document.getElementById('visualization')).
  draw(data, {
    title: "Yearly Coffee Consumption by Country",
    width: 600,
    height: 400,
    hAxis: {
      title: "Year"
    }
  });
} 
```

现在垂直轴不是从 0 开始，而是接近最低值，在这种情况下是 114 - 这是一个错误吗？我仍然希望它从 0 开始显示，因为像这样快速浏览它非常令人困惑

有任何想法吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-22T09:03:10.977

绘制图表时，您需要传递另一个参数作为选项的一部分。

```
vAxis: {minValue: 0} 
```

这将强制垂直轴从 0 开始，您可以在此处查看其他可能的选项：[https ://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart#Configuration_Options](https://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart#Configuration_Options)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-03-11T19:15:10.093

如果您没有图表上的数据`vAxis: {minValue: 0}`将无济于事。所以你可以使用配置选项`viewWindow`：

```
var options = { 
    vAxis: { 
        viewWindow: {
            min:0
        }
    }
};
var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
chart.draw(dataTable, options); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-03T08:35:14.957

对于仍在寻找使轴从 0 开始的方法的任何人，您可以尝试此选项。

```
vAxes: {
  0: {baseline: 0},
}, 
```

请注意，我使用 vAxes 而不是 vAxis。我不知道为什么，但这成功了。

我在这里得到答案：[https ://groups.google.com/forum/#!topic/google-visualization-api/vRNJUk9aZUI](https://groups.google.com/forum/#!topic/google-visualization-api/vRNJUk9aZUI)

# android - 文本转语音 (TTS)

> ID：10690077
> 
> 赞同：5
> 
> 时间：2012-05-21T17:49:53.627
> 
> 标签：android, text-to-speech

我正在制作一个在点击句子时阅读句子的应用程序，所以我使用 TTS 阅读它们。问题是声音不是那么清晰，有没有办法改变它？或者让它读起来更慢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T17:54:14.080

使用功能`setSpeechRate`使语音更快。

1.0 是正常语速，较低的值会减慢语音（0.5 是正常语速的一半），较大的值会加速（2.0 是正常语速的两倍）。

# c# - 在未安装 Sharepoint 的 VS 2010 中创建 Sharepoint 目录

> ID：10690078
> 
> 赞同：1
> 
> 时间：2012-05-21T17:50:00.893
> 
> 标签：c#, visual-studio-2010, sharepoint, directory

我有一个目前正在生产中的 Winform 应用程序。它运行多个 PDF 报告并将它们放在共享驱动器上。在此过程中，它会创建几个目录并将这些 PDF 放置在适当的目录中。

我可以将文件复制到 SharePoint 位置，但无法创建目录。如何在我的计算机上不安装 SharePoint 的情况下创建 SharePoint 目录？是否可以？

我正在使用 VS2010，从我所阅读的内容来看，我无法在我的机器上安装 SharePoint，因为我在 32 位操作系统上运行

**编辑：**我对 SharePoint 2010 还是很陌生，所以我可能还没有条款。我在我们的网站上设置了一个文档库。当我在 SharePoint 上的 DL 中时，我可以单击页面顶部的库选项卡并转到“使用资源管理器打开”。打开资源管理器后，我可以右键单击并创建一个文件夹。我还可以粘贴我的所有文件及其文件夹结构。所以，也许 EtherDragon 建议使用 dll 可能会奏效，我得看看我是否可以得到它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:05:55.030

我假设“目录”是指 SharepOInt 文档库文件夹？查看 SharePoint 2010[客户端对象模型](http://msdn.microsoft.com/en-us/library/ee537247.aspx)。它具有一整套可用于对远程计算机执行 SharePoint 操作的对象。

这个 M [SDN 帖子](http://social.technet.microsoft.com/Forums/eu/sharepoint2010programming/thread/d2b7021b-1004-47da-9f52-5660bcc9877e)讨论了如何使用它创建文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T21:49:04.817

使用好旧的`WebRequest`解决方案

```
 private string SharePointSite
    {
        get { return @"https://Mysite.com/My Document Library"; }
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        for (int i = 1; i <= 10; i++)
        {
            CreateFolder("Test " + i.ToString());
        }
    }

    private bool CreateFolder(string FolderName)
    {
        string folderURL = SharePointSite + @"/" + FolderName;
        bool _Return = false;
        try
        {
            WebRequest request = WebRequest.Create(folderURL);
            request.Credentials = CredentialCache.DefaultCredentials;
            request.Method = "MKCOL";
            WebResponse response = request.GetResponse();
            response.Close();
            _Return = true;
        }
        catch (WebException)
        {
            _Return = false;
        }

        Console.WriteLine("{0} Created {1}", FolderName, _Return);
        return _Return;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T18:09:29.650

简短的回答，您必须安装 SharePoint 2010 才能再次编写客户端对象模型的代码。

长答案，您必须设置 64 位环境（某种）来安装 SharePoint 2010，以便您的 Visual Studio 可以访问客户端对象模型参考：客户端对象模型[入门](http://zimmergren.net/technical/sp-2010-getting-started-with-the-client-object-model-in-sharepoint-2010)

*可能*只获取这些 DLL 并在 Visual Studio 中引用它们，但使用它们可能仍需要 64 位操作系统。

# jetty - java.lang.NoClassDefFoundError: javax/faces/model/SelectItem

> ID：10690085
> 
> 赞同：1
> 
> 时间：2012-05-21T17:50:36.077
> 
> 标签：jetty, opennms

当我运行部署到 Jety Web 服务器中的 Web 应用程序时，我收到以下异常跟踪。看来我缺少一些 jar 文件。谁能告诉我怎么了？

HTTP 错误 500

访问 /PMCounters/default.jsp 时出现问题。原因：

```
javax/faces/model/SelectItem 
```

造成的：

java.lang.NoClassDefFoundError: javax/faces/model/SelectItem at com.ericsson.dae.pm.dao.VirtualConfigTableDAO.(VirtualDaeConfigTableDAO.java:41) at org.apache.jsp.default_jsp._jspService(org.apache.jsp. default_jsp:162) 在 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:109) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.apache.jasper.servlet.JspServletWrapper .service(JspServletWrapper.java:389) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486) 在 org.apache.jasper.servlet.JspServlet.service(JspServlet.java:380) 在 javax。 servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:547) 在 org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java: 481）在 org.eclipse。jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:520) at org.eclipse.jetty.server.session.SessionHandler.doHandle( SessionHandler.java:227) 在 org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:940) 在 org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:409) 在 org.eclipse .jetty.server.session.SessionHandler.doScope(SessionHandler.java:186) 在 org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:874) 在 org.eclipse.jetty.server.handler.ScopedHandler .handle(ScopedHandler.java:117) 在 org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149) 在 org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110) ) 在组织。eclipse.jetty.server.Server.handle(Server.java:349) at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441) at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete( HttpConnection.java:904) 在 org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:565) 在 org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:217) 在 org.eclipse.jetty .server.AsyncHttpConnection.handle(AsyncHttpConnection.java:46) 在 org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:545) 在 org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run( SelectChannelEndPoint.java:43) 在 org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598) 在 org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533) 在java.lang.线程。运行（线程.java：662）

这是我的 WEB.XML：

```
 <?xml version="1.0" encoding="UTF-8"?>
   <web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
      <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.CONFIG_FILES</param-name>
    <param-value>/WEB-INF/faces-config.xml</param-value>
</context-param>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:15:18.193

通常，该错误是当该类有多个版本可用时，请确保您的应用程序中没有该类的多个版本的 jar，或者应用程序服务器没有为您提供一个版本，而您的 webapp 正在打包另一个版本版本。

# javascript - 如何将 MongoDB 查询捕获为字符串并将其显示在我的 Node JS 页面中（使用 mongojs 驱动程序）？

> ID：10690090
> 
> 赞同：6
> 
> 时间：2012-05-21T17:50:44.457
> 
> 标签：javascript, node.js, mongodb, mongojs

我希望能够查询我的 mongoDB 并在我用 Node 制作的网页上显示这个结果......现在我正在使用 mongojs 驱动程序 - 我发现该驱动程序非常适合将数据放入数据库 -语法与 Mongo shell 相同，我可以将代码直接放在我的 Node 应用程序中。这个任务……仅仅在网页上，甚至在控制台上显示查询的结果，已经证明是非常困难的。这是我的代码的相关部分以及我尝试过的内容。

```
var databaseUrl = "test"; // "username:password@example.com/mydb"
var collections = ["graph1"]
var db = require("mongojs").connect(databaseUrl, collections);

console.log(db.graph1.find()); 
```

我制作了一个名为 graph1 的集合，并在 mongo 提示符中产生了结果。注意...我确实想在 HTML 中显示它...但我想如果我可以让它打印到控制台我可以在我的 HTML 中得到它。

它当前输出：

```
{_oncursor: { get: [Function], put: [Function] } } 
```

我真正想要的某种原型，这是：

```
{ "x" : "0", "y" : "1343725568", "_id" : ObjectId("4fba6....") } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T22:28:34.983

试试这个：

```
 db.graph1.find( {}, function(err, result ){ 
    if (err || !result ) console.log(" an error has occurred" );
    else {
    console.log(result);
    }
    }); 
```

您在那里的控制台日志正在打印 db.graph1.find() 返回值，这是它的函数原型。它不会返回任何有用的东西，因为它是一个异步函数。使用它检索的数据做有用的事情的唯一方法是传递一个回调来处理数据：

```
 db.graph1.find( { //what you want to search for here }, callback);

    function callback(result_from_mongo) {
    // do stuff here with result_from_mongo
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:19:37.513

为了遗产，每个人都应该进一步知道，您可以操纵查询结果的唯一时间是在回调中......所以不要将它设置为一个 var 来愚弄之后，只能在回调中）-=。

使用以下内容使查询结果成为字符串而不会出现问题。这是标准库的东西。：

```
 var results_not_ugly_or_messed_up = (JSON.stringify(result)); 
```

如果你想成为 ghetto 并在回调之外使用你的结果，你总是可以调用 perl/python/sh/bat/whatever 脚本，将你的“字符串化”结果（在本例中，results_not_ugly_or_messed_up）作为参数来存储它一个文件等，读取然后随意使用。

对于一个完整的现实生活示例：

```
db.newguestbook.find({"Name" : /[Aa]/ },[],function(err,p) //newguestbook is a collection I have    
//you will need to change that unless you make a collection called newguestbook
{
    cursor = p;
    console.log(cursor);
    console.log(JSON.stringify(cursor))); //We have a nice string, see?
    var exec = require('child_process').exec;
    exec("perl writetofile.pl " + JSON.stringify(cursor) , function(err, 
    stdout, stderr)
    {
        console.log("Perl run to store this result in a file");
    });

});
} 
```

# matplotlib - 累积直方图的最后一点在 y=0

> ID：10690094
> 
> 赞同：15
> 
> 时间：2012-05-21T17:51:03.427
> 
> 标签：matplotlib, histogram

我正在创建直方图

```
pylab.hist(data,weights,histtype='step',normed=False,bins=150,cumulative=True) 
```

得到（还有其他情节，现在无关紧要）紫线

![直方图](../Images/2d582be146f55dc3f7f896875a1eef79.png)

为什么直方图最后又归零了？累积函数通常应该是非递减的。有没有办法解决这个问题，无论是错误还是功能？

**编辑：解决方案（黑客）：**

```
# histtype=step returns a single patch, open polygon
n,bins,patches=pylab.hist(data,weights,histtype='step',cumulative=True)
# just delete the last point
patches[0].set_xy(patches[0].get_xy()[:-1]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-28T12:51:34.817

如果您不喜欢 OP 不错的简单解决方案，这里有一个过于复杂的解决方案，我们手动构建绘图。如果您只能访问直方图计数并且不能使用 matplotlib 的 hist 函数，那么它可能会很有用。

```
import numpy as np
import matplotlib.pyplot as plt

data = np.random.randn(5000)
counts, bins = np.histogram(data, bins=20)
cdf = np.cumsum(counts)/np.sum(counts)

plt.plot(
    np.vstack((bins, np.roll(bins, -1))).T.flatten()[:-2],
    np.vstack((cdf, cdf)).T.flatten()
)
plt.show() 
```

[![输出](../Images/daaeef17ca7a345ea8cdb9bd83dbc4ae.png)](https://i.stack.imgur.com/gNKGZ.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:10:11.443

这是默认行为。把它想象成柱状图的轮廓作为条形图。至于快速解决方法，我不知道。一种解决方案是自己计算直方图：[python histogram one-liner](https://stackoverflow.com/questions/2870466/python-histogram-one-liner)

# sql - 插入语句+在触发器中组合表数据和变量

> ID：10690096
> 
> 赞同：1
> 
> 时间：2012-05-21T17:51:19.917
> 
> 标签：sql, sql-server-2008

我正在尝试编写一个处理[以下问题](https://stackoverflow.com/questions/10688492/perform-operation-in-response-to-insert)的触发器。我一直试图从插入的表中提取所需的变量，将其与另一个表中的数据结合起来，并将其作为一个插入到所需的表中（我知道这有点模糊/令人困惑，请耐心等待......）

这就是我希望数据库工作的方式：

数据库中的三个表：

1.  用户
    表：用户信息表，包括识别号
2.  Table PlaneGPSCoordinates：
    实时 GPS 坐标表。该表的大小永远不会改变，只是更新了值。
3.  Table MatchingInformation：
    一个有两列的表，用户ID号和平面坐标。

触发器应执行以下操作：

1.  插入表“用户”的新行（即用户注册）
2.  Trigger自动复制PlaneGPSCoordinates中的数据（不包括key列）和新用户的ID号，并将两者插入到Table MatchingInformation中。每 5 行 Coordinates 将有 1 个用户 ID 号 -> 即触发器将向 MatchingInformation 添加 5 行，其中 userID = 新用户的 ID 和坐标均从表 PlaneGPSCoordinates 中复制。

目前，我不完整的代码如下所示：

```
CREATE TRIGGER dbo.Matching
ON dbo.UserInfo
FOR INSERT
AS

DECLARE @userID as INT

BEGIN
SET NOCOUNT ON;

SELECT @userID = inserted.ID FROM inserted

INSERT....

END
GO 
```

我对 SQL 很陌生，所以假设最坏的情况。我不知道现在如何创建 INSERT 语句，它在其中提取 GPS 坐标，并将其与用户 ID 结合，将其推送到匹配表...

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:57:17.447

您不能将触发器视为一次处理一行。如果使用多值子句或嵌套选择发生插入，则触发器将在整个操作中触发一次，这意味着您将只能处理一个任意@UserID。

在这里，我假设您的 PlaneGPSCoordinates 表正好有 5 行，这些是每个新用户获得的坐标。

```
CREATE TRIGGER dbo.Matching
ON dbo.UserInfo
FOR INSERT
AS
BEGIN
  SET NOCOUNT ON;
  INSERT dbo.MatchingInformation(GPS1, GPS2, UserID)
    SELECT p.GPS1, p.GPS2, i.UserID
      FROM dbo.PlaneGPSCoordinates AS p
      CROSS JOIN inserted AS i;
END
GO 
```

但这引出了一个问题，为什么要为每个用户复制相同的坐标？这是他们要经常更新的东西，你只是想在那里放一些默认值开始？

# apache - 重写规则以处理 url 异常

> ID：10690105
> 
> 赞同：0
> 
> 时间：2012-05-21T17:52:07.283
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个服务于许多网站的应用程序，我正在使用 Apache mod-rewrite 来映射这样的 url

```
http://site1.net/controller
http://site2.net/controller2/another_view
http://site3.net/
http://special_case.net/ 
```

映射到：

```
index.php?url=http://site1.net/controller
index.php?url=http://site2.net/controller2/another_view
index.php?url=http://site3.net/
index.php?url=http://special_case.net/hub 
```

我的重写规则是：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

它处理除了最后一种特殊情况之外的所有情况，在处理特定域时，我需要强制使用称为“集线器”的控制器。我在这个项目上与其他人合作，这意味着一旦调用索引文件，我就无法对路由做任何事情。

有人可以修复我的规则，以便解决上述所有情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:31:13.840

您当前的规则似乎没有将主机名添加到 url 获取参数中。所以我将其添加到以下内容：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

RewriteCond %{HTTP_HOST} ^(special_case\.net)$
RewriteRule ^(.*)$ index.php?url=http://%1/hub/$1 [QSA,L]

RewriteCond %{HTTP_HOST} ^(.*)$
RewriteRule ^(.*)$ index.php?url=http://%1/$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T18:03:02.533

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^http://special_case.net index.php?url=http://special_case.net/hub [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

# javascript - 谷歌使用 jQuery 查询数组的元素

> ID：10690109
> 
> 赞同：0
> 
> 时间：2012-05-21T17:52:21.020
> 
> 标签：javascript, jquery, arrays

我有以下数组：

```
var acronyms=["fubar","snafu","gnu"]; 
```

jQuery 是否有一种方法可以让我获取该数组的每个元素，并执行 Google 搜索，以便：

```
https://encrypted.google.com/search?q=i 
```

已发送，**数组**的每个元素在哪里？我知道 XSS 攻击警告可能来自浏览器，但现在这很好，因为这只是一个练习。我将使用它的实际实现与项目的其余部分在同一个域上，不会被误认为是诡计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T17:58:14.983

可以[`$.each`](http://api.jquery.com/jQuery.each/)和[`$.ajax`](http://api.jquery.com/jQuery.ajax/)一起使用。

```
$.each(acronyms, function(index, element){
  $.ajax({
    url: "https://www.domain.com/search?q=" + element
  });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T17:57:38.467

假设您有一个`foo`函数要与数组中的每个元素一起运行

```
var acronyms=["fubar","snafu","gnu"];
$.each(acronyms, function(){
    foo(this);
}); 
```

（答案基于我的理解，即关于如何使用 jQuery 对数组元素执行操作而不是如何使用 XSS 执行禁止操作的问题......）

# jquery - 如何删除最后附加的数据

> ID：10690110
> 
> 赞同：0
> 
> 时间：2012-05-21T17:52:22.863
> 
> 标签：jquery, asp.net, gridview, append

我有一个将数据从 webmethod 附加到 gridview 的 js 文件。我的问题是，每当我再次单击我的按钮时，它都会在 gridview 中使用以前的数据附加并添加新数据。有没有办法删除最后附加的数据并附加一个新数据？另一个问题。在绑定网格视图时，我需要在加载页面时绑定数据源，以便让它显示我想要附加的数据。如何删除尝试附加新数据源时绑定的数据源？对不起，很长很长的问题。谢谢！

```
$.ajax({
   url: "Default.aspx/getDetails",
   data: Data,
   type: "POST",
   dataType: "json",
   contentType: "application/json; charset=utf-8",
   success: function (mydata) {
   for (var i = 0; i < mydata.d.length; i++) {
       $(".rpt").html("<table id=\"tbl\"><tr>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Date Joined</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Memberid</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Member ID</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>User ID</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Username</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Password</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Full Name</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>First Name</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Last Name</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Birth Date</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Address</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Location</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Sponsor ID</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Parent ID</th>" +
                         "<th style='background-color: #75a844' class='tbl_h'>Placement</th>" +
                         "</tr>");

            for (var i = 0; i < mydata.d.length; i++) {
                $("#tbl").append("<tr><td>" + mydata.d[i].datejoined +
                                                                   "</td><td>" + mydata.d[i].memid +
                                                                   "</td><td>" + mydata.d[i].memberid +
                                                                   "</td><td>" + mydata.d[i].userid +
                                                                   "</td><td>" + mydata.d[i].usrname +
                                                                   "</td><td>" + mydata.d[i].pssword +
                                                                   "</td><td>" + mydata.d[i].fullname +
                                                                   "</td><td>" + mydata.d[i].fname +
                                                                   "</td><td>" + mydata.d[i].mname +
                                                                   "</td><td>" + mydata.d[i].lname +
                                                                   "</td><td>" + mydata.d[i].bdate +
                                                                   "</td><td>" + mydata.d[i].address +
                                                                   "</td><td>" + mydata.d[i].location +
                                                                   "</td><td>" + mydata.d[i].sponsorid +
                                                                   "</td><td>" + mydata.d[i].parentid +
                                                                   "</td><td>" + mydata.d[i].placement + "</td></tr>");
            }
            $("#tbl").append("</table>");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T17:56:43.070

> cacheBoolean 默认值：true，对于 dataType 'script' 和 'jsonp' 为 false 如果设置为 false，它将强制浏览器不缓存请求的页面。将缓存设置为 false 还会将查询字符串参数“_=[TIMESTAMP]”附加到 URL。

```
cache : false, 
```

* * *

如果您的`#Grid1D`内部没有其他元素，您也可以执行以下操作：

```
$("#Grid1D").html(
       // ...
); 
```

代替`.append()`

# php - 多维数组的计算

> ID：10690112
> 
> 赞同：0
> 
> 时间：2012-05-21T17:52:31.417
> 
> 标签：php, arrays, multidimensional-array

我正在做一个项目，我无法专注于需要在多维数组上完成的计算。快速背景，这是一个酒店基准测试工具，我需要计算市场渗透指数 (MPI)。我有一个包含 3 个主数组的数组。前 2 个是要比较的酒店，最后一个是 MPI 数组。

每个数组包含用户选择的每个月的数组。在那个数组里面是需要用于计算的数据。这是一个例子：

```
Array
(
 [Competitive set] => Array
    (
        [Sep 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-09-01
                        [maxmonth] => 2011-09-01
                        [nrcheck] => 13
                        [data] => 67.6
                    )

            )

        [Oct 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-10-01
                        [maxmonth] => 2011-10-01
                        [nrcheck] => 13
                        [data] => 63.6
                    )

            )

        [Nov 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-11-01
                        [maxmonth] => 2011-11-01
                        [nrcheck] => 13
                        [data] => 59.2
                    )

            )

        [Dec 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-12-01
                        [maxmonth] => 2011-12-01
                        [nrcheck] => 13
                        [data] => 54.6
                    )

            )

    )

[Test] => Array
    (
        [Sep 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-09-01
                        [maxmonth] => 2011-09-01
                        [nrcheck] => 89
                        [data] => 71.5
                    )

            )

        [Oct 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-10-01
                        [maxmonth] => 2011-10-01
                        [nrcheck] => 89
                        [data] => 67.0
                    )

            )

        [Nov 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-11-01
                        [maxmonth] => 2011-11-01
                        [nrcheck] => 91
                        [data] => 63.1
                    )

            )

        [Dec 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-12-01
                        [maxmonth] => 2011-12-01
                        [nrcheck] => 89
                        [data] => 57.5
                    )

            )

    )

[MPI] => Array
    (
        [Sep 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-09-01
                        [maxmonth] => 2011-09-01
                        [nrcheck] => 89
                        [data] => 71.5
                    )

            )

        [Oct 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-10-01
                        [maxmonth] => 2011-10-01
                        [nrcheck] => 89
                        [data] => 67.0
                    )

            )

        [Nov 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-11-01
                        [maxmonth] => 2011-11-01
                        [nrcheck] => 91
                        [data] => 63.1
                    )

            )

        [Dec 11] => Array
            (
                [0] => Array
                    (
                        [minmonth] => 2011-12-01
                        [maxmonth] => 2011-12-01
                        [nrcheck] => 89
                        [data] => 57.5
                    )

            )

    ) 
```

)

这是一个建议的带有 var_export 的 pastebin（似乎无法在此处正确格式化） [http://pastebin.com/b8hYM7TW](http://pastebin.com/b8hYM7TW) 抱歉，代码块很大，但它必须这么大=（无论哪种方式，目前都是“数据”因为 MPI 是错误的 那需要变成第一个数组的数据除以第二个数组的数据再乘以 100（百分比）。

“Competitive Set”和“Test”键是可变的，在我工作的范围内不可用，因此无法使用这些静态名称。

我读到了递归函数，但我仍然没有得到它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:46:39.467

好吧，您提供的 pastebin 数组在“Dit hotel”数组中没有任何数据，所以我不能真正确认这是否有效，但是你去

```
foreach ($array['Dit hotel'] as $key => $value) {

    $array['MPI'][$key][0]['data'] = $value[0]['data'] / $array['Test'][$key][0]['data'] * 100;
} 
```

[http://codepad.org/m884GMPJ](http://codepad.org/m884GMpJ)

# magento - 如何构建桥梁并双向同步 magento 和 zoho

> ID：10690115
> 
> 赞同：0
> 
> 时间：2012-05-21T17:52:41.960
> 
> 标签：magento, integration, magento-1.6, zoho

我们希望在 magento 1.6 和 zoho crm 中建立一个双向同步数据的桥梁 - 同步潜在客户、报价、发票、客户（为我们的 B2B 网站分配用户 ID 和密码） - 同步产品属性等......

例子 ：

*   每次客户填写要在我的网站上注册的表格时，它都必须像第一次登录表格一样在 magento 上创建一个潜在客户（我已经制作了一个 web to lead 表格，但不适合 magento 设计并且不t在magento中创建帐户...）

*   每次客户在 magento 上要求报价（通过“请求报价”表格）时，它都会创建一个机会或报价（或潜在客户？）。

我想要一些适合magento结构的非常简单的东西，事实上，这是在两个软件（magento和zoho）中推/拉数据库记录的问题。

所以我一直在网上寻找，但如果你用谷歌搜索“Zoho Magento 集成”，它只会让人们愿意为此付费。由于我对magento有点了解，所以我愿意自己做。

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:10:16.387

您必须创建一个 magento 连接器模块来处理 Magento 和 ZOHO CRM API ( [http://zohocrmapi.wiki.zoho.com/](http://zohocrmapi.wiki.zoho.com/) ) 之间的同步。

这不简单。但是如果你有一些 Magento 开发经验并且不知道如何开始，我建议你下载一些类似的模块（例如[http://www.magentocommerce.com/magento-connect/integrations/crm/erply- connector.html](http://www.magentocommerce.com/magento-connect/integrations/crm/erply-connector.html) ) 并查看它是如何构建的。然后尝试开发自己的。

# php - 使用 Wordpress 创建表单并将数据保存在外部数据库中

> ID：10690124
> 
> 赞同：0
> 
> 时间：2012-05-21T17:53:09.583
> 
> 标签：php, wordpress

我需要创建一个包含一些字段的表单，而不是联系表单，然后通过 Wordpress 将这些数据保存到外部数据库中。那可能吗？如何？我是WP的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:23:58.200

使用 WP 的 exec-php 插件在您的页面/表单中编写一些 php 代码，并使其将数据保存到外部数据库...

[http://wordpress.org/extend/plugins/exec-php/](http://wordpress.org/extend/plugins/exec-php/)

# vba - 使用 CMYK 单元格值在 Excel 中为单元格着色

> ID：10690125
> 
> 赞同：1
> 
> 时间：2012-05-21T17:53:22.063
> 
> 标签：vba, colors, excel, cmyk

我正在寻找一种可能使用 VBA 通过查看同一记录中的指定字段来应用单元格填充值的方法。这将是一个以制表符分隔的 Excel 工作表示例：

```
BEGIN_DATA_FORMAT
SampleID    SAMPLE_NAME CMYK_C  CMYK_M  CMYK_Y  CMYK_K  LAB_L   LAB_A   LAB_B

BEGIN_DATA                              
1   1   100 0   0   60  34.16   -19.52  -27.46
2   2   100 100 0   60  22.02   6.27    -23.25
3   3   100 0   0   0   54.56   -31.12  -45.29
END_DATA 
```

字段 3-6 分别包含 CMYK 的值。我想通过解析组合 CMYK 值的每条记录作为起点，将单元格背景填充应用于字段 1。

最初可能需要转换为 RGB 或 HSL，除非有后门方法可以在 Excel/Windows 颜色选择器中设置 CMYK 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:43:23.840

这将为您提供数据中 CYMK 的 RGB：

```
Function CYMK2RGB(c As Integer, y As Integer, m As Integer, k As Integer) As Long
Dim R As Integer
Dim G As Integer
Dim B As Integer
Dim colors As Integer

colors = 255 * (100 - k) / 100
R = colors * (100 - c) / 100
G = colors * (100 - m) / 100
B = colors * (100 - y) / 100

CYMK2RGB = RGB(R, G, B)
End Function 
```

using`range("A1").Interior.Color=cymk2rgb(...)`将设置颜色 - 请注意，它不会完全匹配，因为 CYMK 是减法，而 RGB 是加法。这个网站： http: [//www.printernational.org/rgb-versus-cmyk.php](http://www.printernational.org/rgb-versus-cmyk.php)有更多的细节比较两者。

# jquery - Harveshq 的 jquery 插件问题

> ID：10690128
> 
> 赞同：0
> 
> 时间：2012-05-21T17:53:48.793
> 
> 标签：jquery, html-select, jquery-chosen

在查看使下拉菜单更加用户友好的各种选项时，我遇到了这个解决方案：

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

在他们的第一个示例（所有国家/地区列表）中，如果您想列出名称以“ia”结尾的所有国家/地区，您会得到：没有结果匹配“ia”。我想这对于带有搜索框的东西来说是一个非常普遍的要求。有没有人有类似的要求，解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:13:40.427

来自 Brendan 对[http://davidwalsh.name/jquery-chosen](http://davidwalsh.name/jquery-chosen)的评论显然适用于 0.9.8 版

更改了第 738 行和第 739 行以包含全局的“g”，并且还取出了 regexAnchor。

新线看起来像这样

```
regex = new RegExp(searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), 'gi');
zregex = new RegExp(searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), 'gi'); 
```

我还在我的“无结果”文本中包含了一个锚标记，它使我能够打开一个对话框以将新项目添加到列表中并使用新对象刷新列表。

# hibernate - Hibernate - createEntityManagerFactory 太慢了

> ID：10690132
> 
> 赞同：0
> 
> 时间：2012-05-21T17:53:58.523
> 
> 标签：hibernate, jpa

我对休眠相当陌生。我用 Hibernate 和 JPA 编写了一个程序。问题是当我调用 Persistence.createEntityManagerFactory("name") 时，至少需要 3000 毫秒（甚至 8000 毫秒）才能返回一个 EntityManagerFactory。

我的 PersistenceCtrl 中的代码如下：

```
import javax.persistence.*;

public class PersistenceCtrl {

private EntityManager entityManager;
private EntityManagerFactory entityManagerFactory;

public PersistenceCtrl() {
    startPersistenceCtrl();
}

public EntityManager getEntityManager() {
    return entityManager;
}

public void setEntityManager(EntityManager entityManager) {
    this.entityManager = entityManager;
}

public EntityManagerFactory getEntityManagerFactory() {
    return entityManagerFactory;
}

public void setEntityManagerFactory(EntityManagerFactory entityManagerFactory) {
    this.entityManagerFactory = entityManagerFactory;
}

public void startPersistenceCtrl(){
    this.setEntityManagerFactory(Persistence.createEntityManagerFactory("name"));
    this.setEntityManager(this.getEntityManagerFactory().createEntityManager());        
}

public void closePersistenceCtrl(){
    //EntityTransaction et = this.getEntityManager().getTransaction();
    //et.begin();
    //this.getEntityManager().flush();
    //et.commit();
    this.getEntityManager().close();
    this.getEntityManagerFactory().close();
}

public void saveObject(Object obj){
    EntityTransaction et = this.getEntityManager().getTransaction();
    et.begin();

    this.getEntityManager().persist(obj);

    et.commit();
}

public void removeObject(Object obj){
    EntityTransaction et = this.getEntityManager().getTransaction();
    et.begin();

    this.getEntityManager().remove(obj);

    et.commit();
}

} 
```

我的 persistence.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">
    <persistence-unit name="name">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

    <!-- My classes -->

    <properties>
        <property name="hibernate.validator.apply_to_ddl" value="false"/>
        <property name="hibernate.validator.autoregister_listeners" value="false"/>
        <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>
        <property name="javax.persistence.validation.mode" value="ddl"/>
        <property name="javax.persistence.jdbc.url" value="url"/>
        <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
        <property name="javax.persistence.jdbc.user" value="user"/>
        <property name="javax.persistence.jdbc.password" value="password"/>
        <property name="javax.persistence.jdbc.initialSize" value="2"/>
        <property name="javax.persistence.jdbc.minIdle" value="0"/>
        <property name="javax.persistence.jdbc.maxActive" value="10"/>
        <!-- <property name="hibernate.hbm2ddl.auto" value="update"/> -->
        <!-- <property name="javax.persistence.jdbc.minEvictableIdleTimeMillis" value="120000"/> -->
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
    </properties>
</persistence-unit> 
```

这是正常的吗？

改用 Hibernate 中的 SessionFactory 会更快吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:13:54.950

EntityManagerFactory 是一个线程安全的对象，在应用程序的生命周期内只应创建一次。如果创建需要 3 秒，那应该没什么大不了的。

没有理由像您似乎正在做的那样关闭 EntityManagerFactory 并重新打开它。

# image - 模态灯箱 - 图像重复

> ID：10690134
> 
> 赞同：0
> 
> 时间：2012-05-21T17:54:04.067
> 
> 标签：image, lightbox, modal-dialog, repeat, slimbox

[http://gisave.com/index.php/gisave-purchase](http://gisave.com/index.php/gisave-purchase)

这发生在我网站的其他部分，但请查看此处，进入一个类别并单击产品图片。由于某种原因，图像重复四次或更多次，垂直层叠。检查代码似乎只是重复了图像代码。我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:44:46.397

这可能无关紧要，可能只是我自己的简单疏忽，但是当我的图像不断重复时，这是因为我忘记关闭`<a>`标签了，所以就在关闭 div 标签之前，我放置了关闭`</a>`标签，现在它工作正常.

```
<div id="logo">< a href="index.html">< img src="Website images/logo.png"/>***< /a>***< /div> 
```

# c# - 获取有关 Windows 服务内部状态的信息

> ID：10690141
> 
> 赞同：6
> 
> 时间：2012-05-21T17:54:46.373
> 
> 标签：c#, .net, windows, service, state

我有一个使用 .NET C# 编写的 Windows 服务。该服务将充当文件处理器。它只是监视文件创建事件的目录并将这些文件添加到队列中进行处理。一个单独的线程从队列中提取文件并处理它们。

我的问题是是否有办法查询 Windows 服务以获取其“状态”。我希望能够以某种方式查询服务并查看当前在队列中等待的文件列表等。

我知道这可以通过 /proc 文件系统在 Linux 中完成，我想知道 Windows 是否有类似的东西。任何提示/指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:40:33.017

如果您正在寻找非 UI 方法（例如，将名称写入文件或标准输出），则可以在服务上使用 ExecuteCommand 方法。

```
 ServiceController sc = new ServiceController("ServiceName");
  sc.ExecuteCommand(255); 
```

这只是将此命令传递给您的服务，您的服务将通过 OnCustomCommand 处理它

```
protected override void OnCustomCommand(int command)
{
  base.OnCustomCommand(command);
  if (command == 255
  {
      ... // Your code here
  }
} 
```

您可能需要将队列/服务状态存储在静态变量中，以便您可以从 OnCustomCommand 例程访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:05:22.233

您可以使用访问状态所需的任何方法在 Windows 服务内创建托管 WCF 服务。

[http://msdn.microsoft.com/en-us/library/ms733069.aspx](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:16:17.630

WCF 会很好地做到这一点，尤其是它可以托管在 Windows 服务中。[可能在您的情况下，将XML-RPC 与 WCF](http://vasters.com/clemensv/PermaLink,guid,679ca50b-c907-4831-81c4-369ef7b85839.aspx)一起使用是有意义的

# ruby-on-rails - 如何在 Restclient 生成的 HTML 中搜索？

> ID：10690145
> 
> 赞同：0
> 
> 时间：2012-05-21T17:55:04.377
> 
> 标签：ruby-on-rails, ruby

如何在`Restclient::Response`模块生成的 HTML 中搜索单词？

```
$getresponse = RestClient.get (url)
html=$getadsresponse.body
puts html 
```

我可以看到生成的 HTML，但是如何在该 HTML 中搜索单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:29:05.473

使用 HTML 解析器正确解释 HTML。将 Nokogiri 与 xpath 一起使用，例如：

```
doc = Nokogiri::HTML(html)
found = doc.xpath('//p[@title = "some word"]/a[contains(text(), "some word")]')
found.each do |node|
  puts node.text
end 
```

# ruby-on-rails-3 - ActionDispatch::Routing::RouteSet 间歇性地花费太长时间来路由请求

> ID：10690148
> 
> 赞同：1
> 
> 时间：2012-05-21T17:55:09.447
> 
> 标签：ruby-on-rails-3

我正在开发一个遗留的 Rails 应用程序，其中间歇性地一些请求需要太长时间才能被路由到正确的操作。我们使用 rails 3.0.10

**机架计时器（应用程序操作）——ActionDispatch::Routing::RouteSet: 20506.478548049927 ms**

有什么地方可以开始调试以了解更多信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:56:56.390

我一直想知道它有一段时间了。我一直在跟踪 Graphite 上的中间件时间，并且可以看到整个应用程序运行时和`ActionDispatch::RailsRouting::Routset`. 这些图表几乎是重叠的。

在 Luke Ludwig（编写 Rack Timer 的人）的一篇帖子中找到了可能的解释。

> 它还将打印出实际应用程序操作所经过的时间，该操作与最后一个中间件 Rails 路由相结合。

来源：[http ://pulse.sportngin.com/news_article/show/137153?referrer_id=543230](http://pulse.sportngin.com/news_article/show/137153?referrer_id=543230)

事实证明，Rails 路由包括应用程序花费的总时间，因此运行时间很长。

希望这可以帮助！

# phing - 导入目录中的所有构建文件 - phing

> ID：10690150
> 
> 赞同：3
> 
> 时间：2012-05-21T17:55:20.340
> 
> 标签：phing

我需要在当前`build.xml`使用 ImportTask 的目录中包含所有 xml 文件（我不知道文件的名称和数量）。

这是我的`build.xml`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<project name="New Project" basedir="." default="myimport">
    <target name="myimport" description="dummy to import other build files">
        <if>
            <isset property="file" />
            <then>
                <echo msg="Importing ${file}" />
                <import file="${file}" />
            </then>
        </if>
    </target>

    <if>
        <not>
            <isset property="dummy.property" />
        </not>
        <then>
            <echo msg="Now include all files in ./dev/build directory" />
            <property name="dummy.property" value="true" />
            <foreach param="msg" absparam="file" target="myimport">
                <fileset dir="./dev/build/">
                    <include name="*.xml"/>
                </fileset>
            </foreach>
        </then>
    </if>
</project> 
```

和目标目录中的示例文件：

```
<?xml version="1.0" encoding="utf-8"?>
<project name="test" basedir="." default="dummy">
    <target name="dummy" description="Dummy task">
        <echo msg="Dummy task, just for test" />
    </target>

    <echo msg="Imported!" />
</project> 
```

当我运行 `phing -l`结果是：

```
Buildfile: /home/f0rud/workspace/s/build.xml
     [echo] Now include all files in ./dev/build directory
  [foreach] Calling Buildfile '/home/f0rud/workspace/s/build.xml' with target 'myimport'

New Project > myimport:

     [echo] Importing ./dev/build/test.xml
     [echo] Imported!
Default target:
----------------------------------------------------------------------------
 myimport  dummy to import other build files

Main targets:
----------------------------------------------------------------------------
 myimport  dummy to import other build files 
```

但是没有虚拟（或test.dummy）目标，为什么？

注意：有一个有趣的错误，如果我删除 if 部分，我会得到`Maximum function nesting level of '100' reached, aborting! error`但那不是我的问题（if 解决了那个问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:23:06.783

问题是在全球范围内的进口工作。

当我在目标中调用它时，它在全局上下文中不可用。

因此，我编写了一个简单的 Phing 任务来加载文件集的所有文件，如下所示：

```
class ImportDirTask extends Task {

    /** Array of filesets */
    private $filesets = array();

    /**
     * Nested creator, adds a set of files (nested fileset attribute).
     */
    function createFileSet() {
        $num = array_push($this->filesets, new FileSet());
        return $this->filesets[$num-1];
    }

  /**
   * Parse a Phing build file and copy the properties, tasks, data types and 
   * targets it defines into the current project.
   *
   * @return void
   */
  public function main () {
    // filesets
    foreach ($this->filesets as $fs) {
        $ds       = $fs->getDirectoryScanner($this->project);
        $srcFiles = $ds->getIncludedFiles();
        $srcDirs  = $ds->getIncludedDirectories();
        foreach ($srcFiles as $f)
        {
            $task = new ImportTask();
            $task->setProject($this->project);
            $task->init();
            $task->setFile($this->file = $fs->getDir($this->project) . FileSystem::getFileSystem()->getSeparator() . $f);
            $task->main();
        }

     }
  } //end main

} //end ImportDirTask 
```

它只是工作。

# iphone - 在处理 longPressed 手势时禁用 UIPageViewController 手势识别器

> ID：10690152
> 
> 赞同：0
> 
> 时间：2012-05-21T17:55:29.013
> 
> 标签：iphone, cocoa-touch, uigesturerecognizer

我有一个 UIPageViewController 并且每个页面在页面上包含多个 UIViews，每个 UIView 允许在 longPress 手势后平移手势，我在 contentVC 中使用以下委托，但看起来 pageVC 不关心我下面的限制，它继续翻转这页纸！我在平移时是否必须做任何事情来禁用翻页？（最后的手段是像 canTurn 一样在 PageVC 上设置一个变量，并在平移运行时将其设置为 NO....

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{

    if ([gestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]] &&
        [otherGestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]]) {
        return YES;
    }
    return NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:50:59.840

您应该`-gestureRecognizer:shouldReceiveTouch:`在 PageVC 本身中添加该方法，或者如果您不想在 PageVC 本身中添加它，您可以让委托处理它

像：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
   if(someCase)
   {
      return yes;
   }

   return no;
} 
```

或者

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
   return [delegate shouldHandle:.....];
} 
```

# c# - FitNesse 和 asp.net mvc：前端测试

> ID：10690153
> 
> 赞同：0
> 
> 时间：2012-05-21T17:55:33.933
> 
> 标签：c#, asp.net-mvc, testing, fitnesse

有人告诉我[http://fitnesse.org](http://fitnesse.org)，它是一个非常适合为我的 HTML 和 DOM 开发测试的测试框架。所以，我做了一个概念证明，但它似乎不是合适的工具。它似乎面向文档而不是深度测试。

问题是：它是测试用户将通过我的 asp.net mvc 应用程序导航的不同屏幕的好工具吗？有没有办法通过 FitNesse 表进行测试？在不存在的情况下，什么可能是一个好的选择？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:19:54.827

您是否尝试过[WaitN](http://watin.org/)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:20:55.367

FitNesse 最擅长测试低于 GUI 的级别。它非常适合直接测试您的 ASP.NET 服务（这是我们所做的），但它不适合在 GUI 级别进行测试 - 例如通过自动化浏览器。

要使用 FitNesse 测试您的服务，您需要编写一个“夹具”（在您的情况下可能是一个 .NET 类库），该夹具充当您的服务的精简 UI。

Fixture 有一个公共接口，您可以针对该接口编写 FitNesse 测试。

此级别的自动化测试是有效的，因为您的公共 ASP.NET 服务将是稳定的。这意味着你可以信任你的测试——当它们变红时，可能是因为你的代码被破坏了。

在 GUI 级别进行测试 - 通常通过自动化浏览器和比较屏幕截图 - 可能会适得其反，因为您的客户端可能是不稳定的：

*   稍微改变布局，你的测试就会被破坏；更改您的一种 css 样式并且您的测试被破坏；浏览器或操作系统更新可能会破坏测试。
*   检查标记为红色的测试以查看它们是否真的被破坏可能会花费大量时间并且容易出错。我们使用基于[Ranorex](http://www.ranorex.com/)的自制解决方案以这种方式测试 Windows 桌面应用程序，这些测试的成本效益值得怀疑。

理想情况下，您将拥有 GUI 和服务级别测试的组合——但我们也在为我们的 HTML 客户端寻找正确的解决方案。

# javascript - innerHTML 未按预期工作

> ID：10690157
> 
> 赞同：1
> 
> 时间：2012-05-21T17:55:49.260
> 
> 标签：javascript, innerhtml

我到处寻找解决这个问题的方法，但我无法解释。

这是问题所在，每当我使用javascript的innerHTML注入以下字符串时：

例子：

```
var s = "<div><p><div><p></p></div></p></div>"

document.getElementById("id").innerHTML = s; 
```

在 Firefox 中，使用 firebug，我查看了最新的标记并查看`<div><p></p><div><p></p></div></div>`

有谁知道这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T17:58:43.750

您不能嵌套`p`或`div`在另一个`p`. 关闭`p`是浏览器尝试使您的无效 HTML 有效的方式。

# macos - Macports 的偷偷摸摸的补丁源

> ID：10690159
> 
> 赞同：4
> 
> 时间：2012-05-21T17:56:05.610
> 
> 标签：macos, macports

几乎只要我一直在使用 vim 并且对 C 有足够的了解，我就已经定制了已安装的 vim 以删除一个让我烦恼的“功能”。当我切换到使用带有 macports 的 Mac 时，我通过卸载任何以前的 vim 端口、获取源、手动编辑源然后让 Macports 使用我新定制的源继续安装来实现这一点。

```
sh> sudo port uninstall vim
sh> sudo port fetch vim
sh> sudo /usr/bin/vim /opt/local/wherever/port/put/the/source/file.c
sh> sudo port install vim 
```

现在 [1] 当我尝试这个时，该`port install`命令从服务器重新获取代码，完全忽略我的源编辑，使用“官方”源构建 vim，并且烦人的“功能”仍然存在。

我一直在寻找源的校验和，编辑校验和的方法和命令行开关以忽略它们，但没有运气。

我已经尝试过`port patch`而不是`port install`在编辑代码之前尝试过，但这没有任何区别。

我什至发现自己正在阅读`port`源代码，但我的 tcl 太生疏了，无法走远。

关于如何实现这一目标的任何想法？谢谢你。

[1] 麦克波特 2.0.3。我不知道这曾经适用于哪个版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:19:48.137

我建议为 vim 创建一个本地端口文件，并将您的更改添加为在构建过程中应用的补丁。

1.  创建本地 portfile 存储库：[howto](http://guide.macports.org/#development.local-repositories)
2.  将 vim portfile 目录（一个名为 "vim" 的目录包含文件 "Portfile" 和目录 "files"）复制到本地 portfile 存储库
3.  使用您对 vim 源代码的更改创建一个补丁并将其添加到“文件”目录。
4.  编辑本地 vim Portfile 以包含该行`patchfiles yourpatch.diff`
5.  `portindex`在本地 portfile 存储库中再次运行
6.  安装vim`port install -s vim`

我希望这会有所帮助。

# c# - 用于产生其他任务的任务的任务调度程序

> ID：10690160
> 
> 赞同：0
> 
> 时间：2012-05-21T17:56:09.893
> 
> 标签：c#, .net, task-parallel-library

我正在尝试实现一个屏幕保护程序，每分钟在屏幕上绘制一次形状。对我来说，画一条线是一项任务，创建一个形状也是一项任务。我的要求是：

*   创建形状时，应用程序会随机化组成形状的线数
*   并行运行的任务（任何类型）不应超过 10 个
*   一旦创建了一个形状，那么首先完成该形状而不是同时创建多个形状。（但要同时画4线形和6线形）

知道这个任务调度器的样子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:18:52.873

我认为`TaskScheduler`这不是这项工作的正确工具。实际上，我认为 TPL 根本不是正确的工具。

您不想同时计算不同的任务来获得性能，这就是 TPL 的用途。您希望屏幕上同时发生不同的事情。那是完全不同的东西，你不需要并行性。

你只需要弄清楚什么时候开始绘制新形状的规则，以及它可以是什么形状的规则。

# java - 在 java 中创建简单模型验证的好方法

> ID：10690175
> 
> 赞同：1
> 
> 时间：2012-05-21T17:57:31.740
> 
> 标签：java, validation

我应该使用什么方法和结构在 java 中创建模型验证系统，类似于 C# 中的模型验证？

我希望能够将字段标记或注释为必需的，或者能够设置约束（长度、最大大小等），并能够提供消息。

为了实现这一点，一个好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:12:29.593

看看 bean 验证框架[JSR-303](http://jcp.org/en/jsr/detail?id=303)，这里有一篇文章的链接[http://java.dzone.com/articles/bean-validation-and-jsr-303](http://java.dzone.com/articles/bean-validation-and-jsr-303)

对于 Android，请参阅 Richard Kennards 对本文的评论，
[http://java.dzone.com/articles/jsr-303-and-jvm-web-framework](http://java.dzone.com/articles/jsr-303-and-jvm-web-framework)

> 嗨，马特，
> 
> [Metawidget](http://metawidget.org/)支持 JSR-303。
> 
> 因为 Metawidget 连接了其他框架，这意味着 Metawidget 有效地将 JSR-303 支持添加到 Android、GWT、JSF（不仅是 RichFaces）、JSP、Spring MVC、Struts、Swing 和 SWT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:10:35.353

Java EE 引入了一些内置的[bean 验证](http://docs.oracle.com/javaee/6/tutorial/doc/gircz.html)，如果需要的话`@Null, @NotNull`，肯定可以扩展它以匹配您的自定义验证。

# sql-server - 通过存储过程从 Excel 导入数据

> ID：10690176
> 
> 赞同：2
> 
> 时间：2012-05-21T17:57:31.957
> 
> 标签：sql-server, excel, stored-procedures

我想用 SP 输入我的表名，以便它从 excel 表中导入数据并加载到数据库中。但是，收到以下错误。你能纠正一下吗？谢谢你。

```
create proc Up_Export 
(
@Tablename as varchar(20) = null
)
AS
SET NOCOUNT ON
begin
INSERT INTO @Tablename --Receiving error over here, informs incorrect syntax near @tablename
SELECT * FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
'Excel 8.0;Database=C:\..\..\..\packages\@Tablename.xls', @Tablename)
set nocount off
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T22:48:37.613

我看到有两件事是不对的。

首先你做

```
INSERT INTO @Tablename 
```

你不能在那个地方使用变量。相反，您应该像这样使用动态 sql

```
exec
('
INSERT INTO ' + @Tablename + ' SELECT * FROM OPENROWSET(''Microsoft.Jet.OLEDB.4.0'', 
''Excel 8.0;Database=C:\..\..\..\packages\@Tablename.xls'', ''select * from myTable'')
') 
```

请注意，您必须在字符串中使用双单引号，例如 ''。需要“转义”单引号，因为如果不这样做，它将表示字符串的结尾。

看起来不正确的第二件事是您放置@Tablename 的第二个参数

```
'Excel 8.0;Database=C:\..\..\..\packages\@Tablename.xls', @Tablename) 
```

您应该有类似以下内容作为您的第二个参数

```
'SELECT * FROM [Sheet2$]' 
```

Sheet2 是 Excel 中的工作表

尝试一些变化，并注意 sql 解析器在出错时给你的反馈。祝你好运！

# iis - asp - 浏览器下载文件而不是显示

> ID：10690177
> 
> 赞同：2
> 
> 时间：2012-05-21T17:57:33.173
> 
> 标签：iis, asp-classic

我正在努力学习 ASP。我在我的 Windows 7 机器上设置了 IIS，现在我正在尝试编写一些简单的代码。

```
C:\inetpub\wwwroot\iisstart.htm 
```

显示正常，但是当我请求 C:\inetpub\wwwroot\MyWeb\test1.asp 时，浏览器提示下载文件而不是显示“Hello World” 这是我使用的代码：

```
<html>
<body>
<%
response.write("Hello World!")
%>
</body>
</html> 
```

我不认为代码有问题。我可能搞砸了一些配置吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T20:38:36.593

听起来，当您安装 IIS 时，您没有勾选包含 asp 的可选附加项，例如，当您勾选“Internet 信息服务”时，它不会选择 ASP 等，除非您深入了解“应用程序开发功能”并手动勾选它们：

![在此处输入图像描述](../Images/51c6b14a7a52ff1cdb34990d92088337.png)

另外，需要明确的是，如果你想用经典的 asp（*.asp 文件）开发，你只需要 ASP，但如果你想开始提供 ASP.net（* .aspx）文件，请勾选 ASP.net。

严格来说，安装所有应用程序开发功能并没有什么坏处。

# sql - 使用 MS Access 和 SQL，如何从单个表上的 2 个单独的 SELECT 查询创建一个表和一组列？

> ID：10690179
> 
> 赞同：0
> 
> 时间：2012-05-21T17:57:40.867
> 
> 标签：sql, ms-access

**背景**
我知道这个问题有点奇怪，但这里是解释。

我`TableA`的数据库中有。然后，我有两个单独的查询，其中包含来自其他 2 个主表的连接：

```
SELECT TableA.*
FROM MasterTable_1 INNER JOIN TableA
ON MasterTable_1.ID = TableA.ID
WHERE MasterTabe_1.Field = 'some specific value'; 
```

和

```
SELECT TableA.*
FROM MasterTable_2 INNER JOIN TableA
ON MasterTable_2.ID = TableA.ID
WHERE MasterTabe_2.Field = 'some specific value'; 
```

我现在有来自`TableA`2 个查询、相同列和所有内容的值，但这真的就像有 2 个表，我无法弄清楚如何从所有数据中获取一个表和一组列。

**问题**
所以，我的问题是如何`TableA`将单独的 SELECT/JOIN 查询中的值放入一个包含一组列的表中，我可以`SELECT DISTINCT`在该表中调用该最终表。

如果这需要更多解释，请告诉我。希望我能够很好地解释它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:00:59.447

你会想使用一个 UNION：

```
SELECT TableA.*
FROM MasterTable_1 INNER JOIN TableA
ON MasterTable_1.ID = TableA.ID
WHERE MasterTable_1.Field = 'some specific value';
UNION ALL
SELECT TableA.*
FROM MasterTable_2 INNER JOIN TableA
ON MasterTable_2.ID = TableA.ID
WHERE MasterTable_2.Field = 'some specific value'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:00:59.693

你试过UNION吗？如果您仍需要在单个结果集中进行过滤，您还可以为每个表添加一个具有常量值的附加列。

# php - 仅在主页中显示缩略图的模块/插件

> ID：10690181
> 
> 赞同：-1
> 
> 时间：2012-05-21T17:57:48.450
> 
> 标签：php, joomla

是否有任何模块/插件仅在主页中显示缩略图？在我的文章页面中，我将上传许多图片，但我想在本文显示在主页时显示不同的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:57:43.317

您可以使用应用于缩略图的 CSS 类来做到这一点，例如在首页或类别博客列表中，它在“阅读更多...”链接之前显示文本，我们显示一个小拇指。

在实际的文章页面上，虽然只有主图像是可见的，因为 CSS 隐藏了文章页面上的缩略图。显然取决于你的 Joomla！您将不得不使用适当的选择器，我已经包含了一个来自我们正在开发的站点的示例。

特色/博客页面的 CSS：

```
div.featured .blogthumb, div.blog .blogthumb, #tinymce .blogthumb {
    display: block;
} 
```

*上面的 CSS 包含`#tinymce` **id**`.blogthumb` ，因此在将类应用于图像后，缩略图在编辑器中仍然可见 。*

虽然网站其余部分的 CSS 如下所示：

```
.blogthumb {
    display: none;
} 
```

如前所述，此 CSS 特定于我们正在使用的模板 - 您必须调查模板的等效 ID 或类。

# php - 用 php 解码 GZIP 文件，让它工作只是试图摆脱 E_ALL 输出的错误

> ID：10690184
> 
> 赞同：0
> 
> 时间：2012-05-21T17:58:13.853
> 
> 标签：php, gzip

我有这个功能用于解码 gzipped 文件，

```
// GZIP DECODE
function gzipDecode($d) {
    $f = ord(substr($d, 3, 1));
    $h = 10;
    $e = 0;
    if($f&4) {
        $e = unpack('v', substr($d, 10, 2));
        $e = $e[1];
        $h += 2 + $e;
    }
    if($f&8) {
        $h = @strpos($d, chr(0), $h) + 1;
    }
    if($f&16) {
        $h = strpos($d, chr(0), $h) + 1;
    }
    if($f&2) {
        $h += 2;
    }
    $u = @gzinflate(substr($d, $h));
    if($u == false) {
        $u = $d;
    }
    return $u;
} 
```

它按预期工作，但我打开了错误报告，我得到了这两个错误

**警告：strpos()：偏移量不包含在字符串中**

和

**警告：gzinflate()：数据错误**

这些警告是指上面已被错误抑制的代码位，对如何修复它们有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:59:02.960

您是否尝试过简单地使用[`gzdecode()`](http://php.net/manual/en/function.gzdecode.php)？

您的标头解码看起来正确。您应该通过检查 0x1f、0x8b、8 的前三个字节来检查您的 gzip 流是否真的从您认为的位置开始。

# apache-flex - 有一个来自多个域和 https 远程处理的 flex 应用程序

> ID：10690196
> 
> 赞同：0
> 
> 时间：2012-05-21T17:58:53.720
> 
> 标签：apache-flex, apache, dns, crossdomain.xml

我有一个 Apache 服务器，它为两个虚拟主机[https://www.domain01.com](https://www.domain01.com)和[https://www.domain02.com](https://www.domain02.com)提供服务。Apache 已配置为 domain01 和 domain02 的“文档根”是服务器上的同一目录。因此，在此配置中，这两个域都提供相同的网站和相同的 flex 应用程序 .swf 文件。

这个 flex 应用程序执行 https 远程处理以访问来自[https://www.domain01.com](https://www.domain01.com)的数据。

从[https://www.domain01.com](https://www.domain01.com)加载应用程序时，应用程序的远程处理功能运行良好。但是，当从[https://www.domain02.com](https://www.domain02.com)加载应用程序时，应用程序的远程处理功能将失败。

我有一个跨域文件，它显示在这篇文章的末尾。

从 domain01 或 domain02 加载应用程序时，如何让远程处理始终工作？

```
<?xml version="1.0"?>`  
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">`  
<cross-domain-policy>`  
<allow-access-from domain="*" secure="false"/>`  
<allow-http-request-headers-from domain="*" headers="*" secure="false" />`  
</cross-domain-policy>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:12:59.817

我想到了。我有远程服务调用 domain01.com 并将以下代码添加到我的 flex 应用程序

```
Security.allowDomain( "www.domain02.com" );  
Security.loadPolicyFile( "domain02.com/crossdomain.xml" );    
var request:URLRequest = new URLRequest( "domain02.com/crossdomain.xml" );  
var loader:URLLoader = new URLLoader(); 
loader.load( request ); 
```

# javascript - 表单提交上显示的消息立即消失

> ID：10690198
> 
> 赞同：0
> 
> 时间：2012-05-21T17:58:55.153
> 
> 标签：javascript, jquery, html, css, forms

我为我的 chrome 应用程序制作了一个选项页面。设计了完美运行的表单，除非现在我尝试添加一条消息（通过 jquery/javascipt），当用户单击保存按钮或重置按钮时。

表单html：

```
<body onload="loadOptions();">
    <center>
    <div id="wrapper">
    <div id="status">
        <p id="statusMessage"></p>
    </div>
    <form id="settings" align="left" onsubmit="saveOptions(this);">
        <fieldset>
        <legend>General</legend>
          // settings options go here
        </fieldset>
            <center>
            <button type=submit> Save </button>
            <button id="reset" type=reset onclick="reset();"> Restore Defaults </button>
            </center>
    </form>
    </div>
    </center>
</body> 
```

我想在状态消息 div 中显示消息。所以我写了以下脚本：

```
function saveOptions(form){

    $("#status").hide();

        //code to save settings

        $("#statusMessage").html("Preferences saved");
        $("#status").show();
    }

    function loadOptions(){         
        //code to load options
    }
    function reset(){
        $("#status").hide();

        //code to reset

        $("#statusMessage").html("Preferences reset to default");
        $("#status").show();
    } 
```

的CSS：

```
div#status{

width: 500px;
    text-align: center;
    background: white;
    border: 3px solid orange;
    border-radius: 5px;
    font-weight: bold;

    display: block;
}
div#status h1,p{
    font-size: 20px;
    text-shadow: 1px 1px 1px lightgrey;
} 
```

问题是显示消息，然后 div 再次隐藏！我知道这样做的原因是提交表单时页面会刷新，但找不到解决方法。:(

甚至尝试添加这个

```
$(function() { $("#status").hide(); }); 
```

但没有帮助。

请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:01:29.383

添加`return false`到您的表单标记：

```
<form id="settings" align="left" onsubmit="saveOptions(this); return false;"> 
```

它将阻止提交的表单。

* * *

另一种方法是使用 JQuery[`submit`](http://api.jquery.com/submit/)事件和`preventDefault`方法。

```
$("#settings").on("submit", function(e) {
    e.preventDefault();

    $("#status").hide();
    $("#statusMessage").html("Preferences saved");
    $("#status").show();
}); 
```

# javascript - 如何在负数时显示警报消息

> ID：10690201
> 
> 赞同：0
> 
> 时间：2012-05-21T17:59:00.847
> 
> 标签：javascript, jquery, forms

我是 javascript 的菜鸟，想知道当总值低于 0 时如何显示警报消息。有问题的页面在这里（http://cashmoneypaid.com/order-form-phones-work）和我尝试过的脚本如下。非常感谢帮忙。

```
function checkTotal() {
    document.listForm.total.value = '';
    var sum = 20;
    for (i = 0; i < document.listForm.choice.length; i++) {
        if (document.listForm.choice[i].checked) {
            sum = sum + parseInt(document.listForm.choice[i].value);
        }
    }
    document.listForm.total.value = sum;
}
$("#total").ready(function() {
    if (sum > 0) {
        alert("We are sorry, but at this time we can not offer you any money for your   item");
    }
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:04:28.510

既然你用`jQuery`改变一切！

```
$(function(){
    var sum = 20;
    $('form input[type="checkbox"]').change(function(){
        if (this.checked)
            sum -= parseFloat(this.value);
        else
            sum += parseFloat(this.value);

        if (sum < 0)
            alert('bla bla bla');
    });
}); 
```

[**现场演示**](http://jsfiddle.net/j9SLq/)

你也可以使用这个技巧：

```
$('form input[type="checkbox"]').change(function(){
    var value = parseFloat(this.value) * (this.checked ? -1 : 1);
    sum += value     
    ... 
```

[**现场演示**](http://jsfiddle.net/j9SLq/1)

# bash - 需要从 x 天以前的未知目录中删除 *.xml

> ID：10690202
> 
> 赞同：0
> 
> 时间：2012-05-21T17:59:01.160
> 
> 标签：bash, shell

我们有一个目录：

/home/httpdocs/

在这个目录中可能有目录或者目录的子目录，或者子目录的子目录，等等等等，里面有xml文件（以.xml结尾的文件）——我们不知道哪个目录里面有xml文件，这些目录包含大量文件

我们希望归档所有文件并将它们从实际目录中删除，以便我们在上述目录中仅包含最近 7 天的 xml 文件。

有人向我提到 logrotate 将是一个不错的选择，这是最好的方法吗？如果是这样 - 我们将如何设置它？

此外，如果不使用批次轮换，这可以编写脚本吗？这个脚本可以在生产时间运行还是会阻塞系统？

萨斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:13:42.607

```
find -name "*.xml" -mtime +7 -print0 | tar -cvzf yourArchive.tar.gz --remove-files --null --files-from - 
```

将创建一个 gzip 压缩的 tar 文件“yourArchive.tar.gz”，其中包含当前目录中的所有 *.xml 文件以及在过去 24*7 小时内以及将这些文件添加到 tar 存档后未更改的子目录的任何深度文件被删除。

编辑：

> 这个脚本可以在生产时间运行还是会阻塞系统？

实际上取决于您的系统。这确实会产生大量 I/O 负载。如果您的生产系统使用大量 I/O，而您恰好没有出色的 I/O 子系统（例如使用光纤通道等连接的大型 RAID 系统），那么这将对您的性能产​​生一些显着影响. 不过，这有多糟糕取决于更多细节。

如果系统负载是一个问题，那么您可以创建一个跟踪文件的小型数据库，也许使用 inotify，它可以在后台运行更长的时间，很少被注意到。

您也可以尝试使用 设置上述进程的优先级`renice`，但由于问题是 I/O 而不是 CPU（除非您的 CPU 很糟糕并且您的 I/O 出于某种原因真的很棒），这可能不会导致所需的影响。但是，下一个最佳选择是编写自己的脚本来爬取装饰有 sleep 的文件树。这需要一些时间才能完成，但对您的生产系统的影响较小。除非您真的有采取行动的压力，否则我不会建议您这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:07:33.503

Use `find /home/httpdocs -name "*.xml" -mtime +7 -exec archive {} \;` where `archive` is a program that archives and removes an XML file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:14:51.657

`find`使用 cron 工作可能最容易做到这一点。

查找命令：

```
find /home/httpdocs -name \*.xml -ctime +7 -exec mv -b -t /path/to/backup/folder {} + 
```

这会将 /home/httpdocs 树中任何以 .xml 结尾的文件移动到您提供的备份文件夹中，从而对将被覆盖的任何文件进行备份 ( `-b`)。

现在，要将其设置为 cron 作业，`crontab -e`请以对 httpdocs 和备份文件夹（可能是 root，so ）具有写入权限的用户身份运行`sudo crontab -e`。然后添加如下一行：

```
14    3    *    *    *  find /home/httpdocs -name \*.xml -ctime +7 -exec mv -b -t /path/to/backup/folder {} + 
```

这将在每天凌晨 3:14 运行命令（将 3 和 14 更改为不同的时间）。您也可以将`find`命令放入脚本并运行它，只是为了缩短行。

# javascript - 按钮 JSF 中的绝对 URL

> ID：10690203
> 
> 赞同：2
> 
> 时间：2012-05-21T17:59:14.560
> 
> 标签：javascript, button, jsf-2

我在标题中有这个按钮，我包含在许多页面中：

```
<input type="button" value="My Button" onclick="window.location.href='mypage.xhtml'" 
```

它使用相对路径，如果调用者页面位于同一目录中，它就可以工作。如何使用绝对路径或使用 commandButton 标签？我试过：

```
/mypage.xhtml 
```

不工作（404 错误）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T18:07:09.223

Let EL print the [context path](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getContextPath%28%29) dynamically. It'll become relative to the domain root.

```
<input type="button" value="My Button" onclick="window.location.href='#{request.contextPath}/mypage.xhtml'"> 
```

Or, better, just use JSF's own [`<h:button>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/button.html) component which generates the same HTML anyway wherein you don't need to worry about the context path.

```
<h:button value="My Button" outcome="/mypage.xhtml" /> 
```

If you need to pass any request parameters, you can use `<f:param>` for that.

```
<h:button value="My Button" outcome="/mypage.xhtml">
    <f:param name="foo" value="bar" />
</h:button> 
```

Don't use the `<h:commandButton>`. It doesn't send a normal GET request, but a POST request which you'd need to redirect and thus you effectively end up with two HTTP requests wherein all request parameters are lost in the second one.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:24:58.983

因此，如果您想使用 JSF commandButton 前往项目中的某个页面，您需要使用 action 属性，您甚至可以传递参数：

```
<h:commandButton action="/details.jsf?faces-redirect=true" value="details">
    <f:attribute name="id" value="#{bean.id}" />
</h:commandButton> 
```

如果您想访问应用程序之外的页面，则需要在支持 bean 的某处添加一些额外的 java 代码，然后从前端触发它。

```
FacesContext.getCurrentInstance().getExternalContext().redirect("http://google.com";); 
```

*注意：此任务不需要 javascript*

# java - 对文件使用 PrintWriter

> ID：10690204
> 
> 赞同：0
> 
> 时间：2012-05-21T17:59:16.683
> 
> 标签：java, bufferedreader, printwriter

如果我有以下代码：

```
private PrintWriter m_Writer;
m_Writer = new PrintWriter(new FileWriter(k_LoginHistoryFile)); 
```

我正在写入服务器上的本地文件，名称为`k_LoginHistoryFile`.
现在，当我的程序运行时，它会写入这个文件，那么我怎样才能删除每次写入之间的所有文件内容呢？
我认为这很重要，因为我不想写入一个文件，该文件最终将在其开头包含当前更新的信息 + 在其结尾处不是最新信息。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T18:02:47.993

这个表达式：

```
new FileWriter(k_LoginHistoryFile) 
```

如果存在，将截断您的文件。它不仅会覆盖文件的开头。*目前尚不清楚这段代码执行的频率，但*每次执行时，您都会启动一个新文件（并有效地删除旧内容）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:07:46.257

> I think it is important as I don't want to write to a file which will eventually have current updated information on its beginning + not up to date info at its end.

If you want to keep a running output file (and you can't keep the file open), consider this constructor: [FileWriter(String, boolean)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)

If the boolean is *true*, your updated information *will* be at the end of the file.

# html - 搜索按钮和文本字段不在同一基线上

> ID：10690205
> 
> 赞同：-2
> 
> 时间：2012-05-21T17:59:25.983
> 
> 标签：html, css, forms

为什么蓝色搜索按钮和白色文本字段不是从同一高度开始？我怎样才能解决这个问题？网址是...

问候，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:04:37.027

您的按钮和文本字段上有不同的填充。

将此样式应用于提交按钮时，我有一个好看的搜索栏：

```
.blueButton {
  padding: 1px 0;
} 
```

（编辑：根据 Chrome 的开发者工具，按钮默认应用“2px 6px 3px”填充）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:09:56.943

只需删除它们就可以`font-size: 1em;`让它们为我对齐。因此，您可以调整字体大小或调整高度。

# ios - iOS 开发 --- 如何处理 mms:// 协议

> ID：10690207
> 
> 赞同：-1
> 
> 时间：2012-05-21T17:59:32.330
> 
> 标签：ios, mms, libmms

我想播放彩信协议音频，你知道吗？我听说 libmms 是一种选择。但是我不知道怎么做。任何人都可以分享示例代码吗？最好从头开始介绍。提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:09:04.907

您需要在此处查看 DocumentInteractionController： [https](https://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/DocumentInteraction_TopicsForIOS.pdf) ://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/DocumentInteraction_TopicsForIOS.pdf Document Interaction Controller 是“Apple”的执行方式，可能是您的现在和未来版本的 iOS 中最安全的路径。

如果您拥有捆绑包中的文件，您可以获得默认应用程序来处理来自操作系统的文件类型：

```
NSString *filePath = [documentsDirectory stringByAppendingPathComponent: fileName];

if ([[NSFileManager defaultManager] fileExistsAtPath:[self getFileCompletePath]]){
    NSString *filePath = [[NSString alloc] initWithFormat:@"%@", [self getFileCompletePath]];
    NSURL *url = [[NSURL alloc] initFileURLWithPath:filePath];

    if ([[UIApplication sharedApplication] canOpenURL:url]){
        [[UIApplication sharedApplication] openURL: url];
    } else {
        NSLog(@"Not supported application to open the file %@", filePath);
    }

    [url release];
    [filePath release];
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T12:39:44.437

你基本上有两个选择：

1.  Libmms：这个库只处理 mms 协议。因此，您可以对数据做任何您想做的事情。
2.  FFmpeg：这个库可以处理 mms 协议并且还具有音频/视频解码能力。由于您将使用 mms:// 协议进行音频/视频流传输，因此选择 FFmpeg 将是更好的选择。

# jquery - jQuery 滑动问卷

> ID：10690213
> 
> 赞同：-1
> 
> 时间：2012-05-21T17:59:59.740
> 
> 标签：jquery, drupal-7

我有兴趣做一个有 5 个问题的问卷。每个问题都将在一个视图/页面中（从用户的角度来看）。这些问题将在每页中有 2 到 7 个答案。我希望每个问题都是一个按钮。单击每个按钮时，页面将滚动到下一页/问题。我想过渡到向右滑动。我想记录每个按钮的答案，以便在最后阶段创建查询。

奖励：我希望有一个按钮可以转到最后一页。

我对 JavaScript 相当了解，但我不知道如何开始这样的事情。有没有人有一些示例代码。有没有我应该看的 jQuery 库？任何其他建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:13:15.680

您需要将所有问题加载到同一个 HTML 页面中，并使每个“幻灯片”成为填充浏览器窗口宽度和高度的 div。

每个“下一步”按钮只是指向下一个 div，您可以直接链接到最后一张幻灯片。

您可以使用 jQuery 的 AJAX 功能随时保存数据，如果这是您所追求的，或者只是在最后一次保存全部数据。

你需要 jQuery [localScroll](http://flesler.blogspot.co.uk/2007/10/jquerylocalscroll-10.html)和[scrollTo](http://flesler.blogspot.co.uk/2007/10/jqueryscrollto.html)插件

# objective-c - 从文件夹加载文件

> ID：10690215
> 
> 赞同：-2
> 
> 时间：2012-05-21T18:00:06.950
> 
> 标签：objective-c, ios5

我正在使用此方法加载包含文件的文件夹：

```
NSString  *pngPath = [NSHomeDirectory() stringByAppendingPathComponent:@"GBC/Caras/"];
    fotosJugadores = [[NSFileManager defaultManager] contentsOfDirectoryAtPath: @"/Users/exular/Developer/GBC/exular/GBC/Caras/" error: &error]; 
```

但是一旦应用程序在设备中运行，问题仍然是获得相同的功能，我如何设置一个包含所有图像的文件夹以在设备中可用？是否有任何类似于 contentsOfDirectoryAtPath: 的捆绑方法来从项目捆绑中加载图像，例如 imageNamed: ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:09:24.967

> 有没有捆绑方法...

当你开始这样的问题时，答案通常可以在[`NSBundle`类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)中找到。在这种情况下，答案是肯定的，有这样的方法。如果您阅读文档，您将看到这一点。在寻求帮助之前，您应该**始终检查文档。**

# sql - 在 Case 语句中使用多个 And 而不是子查询

> ID：10690217
> 
> 赞同：2
> 
> 时间：2012-05-21T18:00:26.013
> 
> 标签：sql, sql-server, tsql

我在**Case**语句中使用多个**And时遇到问题。**

 **我的数据库看起来像：

```
Enrollment      Paperless      Validated
0               1              0
1               0              1
0               1              0
1               1              1
0               0              0
0               1              0
0               0              0
0               1              0
1               1              1
0               1              0 
```

所以我的查询看起来像这样：

```
Select
    Count(case when [Enrollment] = 1 and [Paperless] = 1 and [Validated] = 1 then 1 else 0 end) as [Paperless]
    ,Count(case when [Enrollment] = 1 and [Paperless] = 1 and [Validated] = 1 then 1 else 0 end) as [Online_Only]
    ,Count(*) as "Total"
FROM [my_table] 
```

Sql 小提琴：[http ://sqlfiddle.com/#!3/61202/5](http://sqlfiddle.com/#!3/61202/5)

正如您从 sql fiddle 中看到的那样，当它们应该不同时，case 语句中的计数始终为 20。我只是在我的案例陈述中做错了什么，还是我必须在子查询中做错事？

*戴夫*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T18:02:22.673

`COUNT`无论实际值如何，都返回 true。所以使用：

```
SUM(CASE ...) 
```

代替

```
COUNT(CASE ...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:11:35.170

以下是另外两种选择：

(1) 可以使用 COUNT()，但删除 ELSE 子句。这将导致 NULL 而不是 0，因此它们不会被计算在内。

(2) 也可以切换到数学运算：

```
SELECT SUM(Enrollment*Paperless*Validated) as <whatever>,
       SUM(Enrollment*(1-PaperLess)*Validated) as <something else> 
```

Personally, I often like the multiplication form, because the statement is shorter and I can more often see all the conditions without scrolling.**

# iphone - MPMoviePlayerViewController 不会自动旋转

> ID：10690223
> 
> 赞同：22
> 
> 时间：2012-05-21T18:00:49.873
> 
> 标签：iphone, objective-c, ios

我有一些奇怪的行为，当我发生变化时我`MPMoviePlayerViewController`没有`auto`旋转`orientation`。但是，我在一个新项目中重新创建了相同的视图层次结构，当`MPMoviePlayerViewController`播放器启动时，它会旋转到每个方向。我已经搜索了该项目，寻找任何可能明确设置方向的东西，但什么都没有。

我将在这里列出所有相关信息以及到目前为止我尝试过的事情。

当前的视图层次结构如下所示：

*   **导航控制器**
*   **“根”视图控制器**<- 导航控制器的“rootViewController”
*   **“Feed”视图控制器**<- 由 Root VC 推送到导航堆栈
*   **“预览”视图控制器**<- 从 Feed 中呈现为模态 VC
*   **MPMoviePlayerViewController 子类**<- 由 Feed VC 通过“presentMoviePlayerViewControllerAnimated”呈现

视图层次结构中的每个类都以 YES 响应 shouldAutorotateToInterfaceOrientation，仅针对 UIInterfaceOrientationPortrait。

我尝试过的事情：

*   手动将`shouldAutorotateToInterfaceOrientation`向上堆栈从“根”VC 发送到`MPMoviePlayerViewController`
*   覆盖`MPMoviePlayerViewController`子类的实现，`shouldAutorotateToInterfaceOrientation`为横向返回 YES，*为*所有方向返回 YES。
*   在项目的摘要选项卡中设置“支持的设备方向”。
*   `presentMoviePlayerViewControllerAnimated`从 Feed VC 等其他 VC调用

如果电影播放器​​在具有相同视图层次结构的新项目中正确旋转，那么这里可能会出现什么问题。关于方向可能卡在哪里的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T05:15:45.483

我会建议你不要使用`presentMoviePlayerViewControllerAnimated`，而不是添加为子视图。我认为它会很好地解决你的问题。

```
MPMoviePlayerViewController *mpviewController = [[MPMoviePlayerViewController alloc]
                    initWithContentURL:[NSURL fileURLWithPath:self.filePath]];
[self.view addSubview:mpviewController.view];
[self setWantsFullScreenLayout:YES]; 
```

`mpviewController.view`并在检测到时删除`MPMoviePlayerPlaybackDidFinishNotification`。让我看看你的成功...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T13:49:39.763

我发现`MPMoviePlayerViewController`对象将遵循项目的 Info.plist 设置以支持界面方向。在我的一个项目中，我只允许该文件中的横向视图，因此电影播放器​​不会旋转，即使它`YES`在`shouldAutorotateToInterfaceOrientation:`.

编辑：好的，抓住稻草：你在你`automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers`的任何子`UIViewController`类中实现了吗？如果是这样，并且它返回`NO`，则您的子类必须在方向更改时将适当的方法转发给任何子控制器。

否则有什么办法可以看到你的代码？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T07:35:41.300

我知道这可能是一个愚蠢的建议，但请确保`shouldAutorotateToInterfaceOrientation`您的`MPMoviePlayerViewController`子类中的方法被调用。也许那里出了什么问题……

还要确保您没有将 2 个子视图添加到[此处](http://developer.apple.com/library/ios/#qa/qa1688/_index.html)`UIWindow`指定的主视图：

> **问：为什么我的 UIViewController 不随设备旋转？**
> 
> [...]
> 
> *   视图控制器的 UIView 属性嵌入在 UIWindow 中，但与附加的视图控制器并列。

我认为这也可能会给您带来一些问题。您可以在上面的链接中找到有关可能出现问题的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T21:06:13.497

一些想法：

*   该`UINavigationController`集合是`rootViewController`您的应用程序的属性`UIWindow`吗？你没有提到那个。您应该这样做，而不是将导航控制器的视图添加到窗口中。
*   如果您要一次构建整个层次结构，请尝试将其分解。您可以向每个阶段添加一个按钮，将下一个视图控制器添加到层次结构中。
*   尝试从视图控制器层次结构中删除任何动画。同时做多个动画可能会很麻烦。例如，不允许将两个视图控制器一个`UINavigationController`接一个地推送，使用`animated:YES`. 你可能有类似的问题。
*   确保在主线程上构建整个视图控制器层次结构。
*   确保没有其他视图控制器“负责”旋转（正如@MihaiFratu 所写 - 这是旋转问题的常见原因，我不得不重复它:-)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T15:49:10.690

**解决方案：**

对于可能遇到这种情况的任何人，视频没有旋转的原因是我不小心添加了 RootViewController 具有窗口的 rootViewController，而不是 UINavigationController。

```
self.window.rootViewController = navController; 
```

是正确的

`self.window.rootViewController = rootViewController;`

不是

感谢你们一路上的帮助和投入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T21:54:52.810

你在使用故事板吗？在损坏的项目和测试项目之间比较 UIViewControllers 和 UINavigationController 的方向设置。属性检查器上的“方向”设置可能会将您锁定在一个方向上。

你提到`shouldAutorotateToInterfaceOrientation:`和你的 plist 设置，所以我不会进入那个......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-28T06:13:15.850

您的查询背后有一些原因..

***您正在调用`MPMoviePlayerViewController`.. 所以应用 AutoOrientation`"Feed" View Controller`并尝试通过 PushViewController 调用 ..

***使用`MPMoviePlayerController`代替 `MPMoviePlayerViewController`并将子视图添加到`FeedViewController`..

MPMoviePlayerController 的示例代码--

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"filename" ofType:@"type"]];
videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:url]; 
videoPlayer.controlStyle = MPMovieControlStyleNone; 
videoPlayer.view.frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y, self.view.frame.size.height, self.view.frame.size.width);
[videoPlayer prepareToPlay];
videoPlayer.view.center = self.view.center;
videoPlayer.fullscreen = YES;
[self.view addSubview:videoPlayer.view];
[videoPlayer play]; 
```

***检查您的 Xcode 目标设置并应用启用所有方向..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-29T22:09:53.743

你应该试试这个（为我工作）：

在 .h 文件中声明：

```
BOOL landscape; 
```

.m 文件：

```
-(IBAction)PlayMovie:(NSString *)movieName {
    landscape = YES;
    NSBundle *bundle = [NSBundle mainBundle];
    NSString *moviePath = [bundle pathForResource:movieName ofType:@"mp4"];
    NSURL *movieURL = [NSURL fileURLWithPath:moviePath];
    MPMoviePlayerController *theMovie = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
    theMovie.scalingMode = MPMovieScalingModeAspectFill;
    [theMovie play];
    MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
    [self presentMoviePlayerViewControllerAnimated:moviePlayer];
}

-(void)dismissMoviePlayerViewControllerAnimated {
    landscape = NO;
    [self dismissModalViewControllerAnimated:YES];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
// You can change the return for your needs.
    if (landscape == YES) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else { return NO; }
} 
```

我在这里所做的是创建我的电影视图并将“风景”BOOL 设置为 YES。

然后“shouldAutorotateToInterfaceOrientation”将检测到这一点并自动旋转您的视图。

当电影结束时，我将“风景”设置为 NO，以便视图旋转回来。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-27T16:59:01.680

我有一个类似的问题。

解决者：

1.  在支持的界面方向（目标>摘要）中启用所有方向
2.  现在您的应用程序将开始在所有方向上旋转，如果您不希望这样做，请跳过第 1 步，仅在 appDelegate 中添加以下方法

    *   (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{ return UIInterfaceOrientationMaskAll; }
3.  到处删除 shouldAutorotateToInterfaceOrientation

4.  将以下方法添加到视图控制器以支持您的应用所需的方向

    *   (NSUInteger)supportedInterfaceOrientations { return UIInterfaceOrientationMaskPortrait; }
5.  您可以在 MPMoviePlayerViewController 的子类中为视频播放器所需的任何方向添加与步骤 4 中相同的方法

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-15T10:11:50.627

本指南帮助我检查了我缺少的一些步骤，以便只允许以横向方式查看视频播放器，而将应用程序的其余部分固定为纵向模式：

[iOS6 和自转提示](http://geekanddad.wordpress.com/2012/10/20/ios-6-and-auto-rotation-tip/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-12T14:01:52.460

我对 MPMoviePlayerViewController 感到很痛苦，它应该是唯一能够从纵向旋转到横向的控制器，反之亦然。它是带有故事板的 iOS7、iOS8 应用程序。

这是解决方案：

1.  应用程序应启用所有可能的所需方向![如图所示](../Images/12ffe11cee43a29cc6627fd06468600d.png)
2.  每个只需要支持纵向模式的 UIViewController 都应该实现下一个方法，像这样

    ```
    -(BOOL)shouldAutorotate
    {
        return YES;
    }

    -(NSUInteger)supportedInterfaceOrientations
    {
        return UIInterfaceOrientationMaskPortrait;
    } 
    ```

3.  应该扩展 MPMoviePlayerViewController 并且应该像这样覆盖下一个方法

    ```
    -(BOOL)shouldAutorotate
    {
      return YES;
    }

    -(NSUInteger)supportedInterfaceOrientations
    {
      return UIInterfaceOrientationMaskAllButUpsideDown;
    } 
    ```

4.  用于`presentMoviePlayerViewControllerAnimated`显示 MPMoviePlayerViewController

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-07-22T13:52:54.150

在 AppDelegate.m 中添加此方法

-（NSUInteger）应用程序：（UIApplication *）应用程序支持InterfaceOrientationsForWindow：（UIWindow *）window {

```
if(!ISIPAD)

  {

    if ([[self.window.rootViewController presentedViewController]   isKindOfClass:[MPMoviePlayerViewController class]] && ![[self.window.rootViewController presentedViewController] isBeingDismissed])

    {
        return UIInterfaceOrientationMaskAllButUpsideDown;
    }
    else
    {
        return UIInterfaceOrientationMaskPortrait;
    }
}
return UIInterfaceOrientationMaskAllButUpsideDown ; 
```

}

# fractals - 为什么mandelbrot的边界是2？

> ID：10690224
> 
> 赞同：0
> 
> 时间：2012-05-21T18:00:54.000
> 
> 标签：fractals, mandelbrot

我试图理解为什么我们要遍历 Mandelbrot 点直到 |z| < 4\. 为什么是 4？有什么法律吗？还是基于统计测量？

谢谢，伊格尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:33:56.063

考虑沿 y=0 的 Mandelbrot 集，即`z(i) = z(i-1)^2 + c`.

考虑什么时候`c = (x=-2, y=0)`

```
z(0) = 0
z(1) = 0^2 + -2 = -2
z(2) = (-2)^2 + -2 = 4 - 2 = 2
z(3) = 2^2 + -2 = 4 - 2 = 2
z(...) = 2^2 + -2 = 4 - 2 = 2 
```

这个例子 ( `x=-2,y=0`) 是永远不会爆炸的最大量级点。因此，当 时`z^2 > 4`，进一步迭代没有意义，因为您已经知道它会爆炸。

点的大小>= 2 的所有其他点都会爆炸。[ ](https://plus.google.com/102067496227735479162?rel=author)

# eclipse - 如何修复在 Eclipse 中使用“以管理员身份运行”打开的工作区？

> ID：10690229
> 
> 赞同：0
> 
> 时间：2012-05-21T18:00:59.837
> 
> 标签：eclipse, privileges

有一天，我用“以管理员身份运行”打开了 Eclipse IDE，以进行更新和安装新软件。然后我忘记了，继续做我的项目。现在，除非我使用“以管理员身份运行”运行 Eclipse IDE，否则我无法在该工作区中工作，而我不想这样做。有关解决此问题的任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:04:50.143

编辑工作区目录的访问权限，并为您的用户提供完全访问权限。

# python - 检查集合中的值是否在python中的numpy数组中

> ID：10690233
> 
> 赞同：7
> 
> 时间：2012-05-21T18:01:11.050
> 
> 标签：python, numpy

我想检查 NumPyArray 中是否包含一组值，如果是，则将该区域设置为数组 = 1。如果没有设置 keepRaster = 2。

```
numpyArray = #some imported array
repeatSet= ([3, 5, 6, 8])

confusedRaster = numpyArray[numpy.where(numpyArray in repeatSet)]= 1 
```

产量：

```
<type 'exceptions.TypeError'>: unhashable type: 'numpy.ndarray' 
```

有没有办法循环它？

```
 for numpyArray
      if numpyArray in repeatSet
           confusedRaster = 1
      else
           keepRaster = 2 
```

澄清并寻求进一步的帮助：

我正在尝试和目前正在做的是将栅格输入放入数组中。我需要读取二维数组中的值并根据这些值创建另一个数组。如果数组值在集合中，则值为 1。如果不在集合中，则该值将从另一个输入派生，但我现在说 77。这是我目前正在使用的。我的测试输入有大约 1500 行和 3500 列。它总是在第 350 行左右冻结。

```
for rowd in range(0, width):
    for cold in range (0, height):
        if numpyarray.item(rowd,cold) in repeatSet:
            confusedArray[rowd][cold] = 1
        else:
            if numpyarray.item(rowd,cold) == 0:
                confusedArray[rowd][cold] = 0
            else:
                confusedArray[rowd][cold] = 2 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-21T18:43:39.790

在 1.4 及更高版本中，numpy 提供了该[`in1d`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.in1d.html)功能。

```
>>> test = np.array([0, 1, 2, 5, 0])
>>> states = [0, 2]
>>> np.in1d(test, states)
array([ True, False,  True, False,  True], dtype=bool) 
```

您可以将其用作分配的掩码。

```
>>> test[np.in1d(test, states)] = 1
>>> test
array([1, 1, 1, 5, 1]) 
```

以下是 numpy 的索引和赋值语法的一些更复杂的用法，我认为它们将适用于您的问题。请注意使用按位运算符替换`if`基于 - 的逻辑：

```
>>> numpy_array = numpy.arange(9).reshape((3, 3))
>>> confused_array = numpy.arange(9).reshape((3, 3)) % 2
>>> mask = numpy.in1d(numpy_array, repeat_set).reshape(numpy_array.shape)
>>> mask
array([[False, False, False],
       [ True, False,  True],
       [ True, False,  True]], dtype=bool)
>>> ~mask
array([[ True,  True,  True],
       [False,  True, False],
       [False,  True, False]], dtype=bool)
>>> numpy_array == 0
array([[ True, False, False],
       [False, False, False],
       [False, False, False]], dtype=bool)
>>> numpy_array != 0
array([[False,  True,  True],
       [ True,  True,  True],
       [ True,  True,  True]], dtype=bool)
>>> confused_array[mask] = 1
>>> confused_array[~mask & (numpy_array == 0)] = 0
>>> confused_array[~mask & (numpy_array != 0)] = 2
>>> confused_array
array([[0, 2, 2],
       [1, 2, 1],
       [1, 2, 1]]) 
```

另一种方法是使用`numpy.where`，它创建一个全新的数组，使用第二个参数 where`mask`为 true 的值，以及第三个参数 where`mask`为 false 的值。（与赋值一样，参数可以是标量或与 具有相同形状的数组`mask`。）这可能比上述更有效，而且肯定更简洁：

```
>>> numpy.where(mask, 1, numpy.where(numpy_array == 0, 0, 2))
array([[0, 2, 2],
       [1, 2, 1],
       [1, 2, 1]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:17:09.327

这是一种可能的方式来做你想做的事：

```
numpyArray = np.array([1, 8, 35, 343, 23, 3, 8]) # could be n-Dimensional array
repeatSet = np.array([3, 5, 6, 8])
mask = (numpyArray[...,None] == repeatSet[None,...]).any(axis=-1) 
print mask
>>> [False  True False False False  True  True] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-06T21:35:21.767

最近`numpy`，您可以使用[`np.isin`](https://numpy.org/doc/stable/reference/generated/numpy.isin.html)和的组合[`np.where`](https://numpy.org/doc/stable/reference/generated/numpy.where.html)来实现此结果。第一种方法输出一个布尔 numpy 数组，该数组的值`True`等于一个类似数组的指定测试元素（请参阅[doc](https://numpy.org/doc/stable/reference/generated/numpy.isin.html)），而第二种方法可以创建一个新数组，该数组设置一些值，其中指定的条件计算为`True`和另一个值 where `False`。

## 例子

我将用一个随机数组做一个例子，但使用你提供的特定值。

```
import numpy as np

repeatSet = ([2, 5, 6, 8])

arr = np.array([[1,5,1],
                [0,1,0],
                [0,0,0],
                [2,2,2]])

out = np.where(np.isin(arr, repeatSet), 1, 77)

> out
array([[77,  1, 77],
       [77, 77, 77],
       [77, 77, 77],
       [ 1,  1,  1]]) 
```

# php - AJAX/jquery 函数每次页面加载只工作一次

> ID：10690240
> 
> 赞同：0
> 
> 时间：2012-05-21T18:01:56.933
> 
> 标签：php, mysql, ajax, jquery

我正在创建一个动态的待办事项列表。该列表从本地数据库下载并显示在表格中。每个待办事项都有一个提交按钮，您可以按下该按钮，待办事项应该在数据库中注册为“完成”。在我的代码中，这是通过一个名为 status 的变量完成的，其中 1 的值已完成，0 的值已撤消。

我的问题是您可以按任何按钮并且一切正常；新状态被发送到 PHP 脚本，该脚本反过来修改数据库中的状态值。然后网页自动更新显示表。但是，如果您再试一次，在任何其他按钮上，它都不起作用。您必须重新加载网页才能使其他任何按钮起作用。

这是我的 Jquery/AJAX 代码：

```
 $(document).ready( function() {
            $('#todo_display_table input[type="submit"]').click(function(evt) {
               evt.preventDefault();

               var todo_id = $(this).val();
               //document.write(todo_id);//debug
               $.when(changeTodoStatusTo(1, todo_id)).then(updateTodoDisplay);
            });
        });

        function updateTodoDisplay() {
            $.post("./daily_todo_display.php", null, replaceTbodyHTML);
        }

        function replaceTbodyHTML(data) {
            $('#todo_display_table tbody').html(data);
        }

        function changeTodoStatusTo(newStatus, todo_id) {
            //Send til phpscript som lagrer ny status i databasen
            var parameters = {
                todo_id: todo_id,
                newStatus: newStatus
            };

            return $.post("./daily_todo_change_todo_status.php", parameters); //, printDebugInfo);
        } 
```

我也可以发布我的 PHP 脚本，但我已经单独测试过它们，它们似乎可以工作。同样，我页面上的所有功能都可以正常工作，但是在您单击一次后它们似乎停止工作。

我检查了数据库，并且状态值仅在第一次尝试（第一次单击任何按钮）时自行更新，这表明问题出在 click() 函数或 changeTodoStatusTo() 函数中。Thnx 的任何帮助，并毫不犹豫地询问更多信息 =)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:10:09.223

你不应该使用 jQuery 的 live 函数：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。
> 
> 此方法提供了一种将委托事件处理程序附加到页面的文档元素的方法，这在将内容动态添加到页面时简化了事件处理程序的使用。有关更多信息，请参阅 .on() 方法中对直接事件与委托事件的讨论。

[jQuery 实时文档](http://api.jquery.com/live/)

如文档所述，请改用 .on() 。它的工作方式与 .live() 相同:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:05:19.740

更新时是否重新创建提交按钮？？？如果不查看所有代码，很难判断。你有没有试过改变这个：

```
$('#todo_display_table input[type="submit"]').click(function(evt) { 
```

对此：

```
$('#todo_display_table input[type="submit"]').live('click', function(evt) { 
```

如果适用，请参阅：http: [//api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:05:55.780

我猜你在`click`更新`html()`. `#todo_display_table`试试[`live()`](http://api.jquery.com/live/)吧

```
$('#todo_display_table input[type="submit"]').live('click', function(evt) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T18:06:53.233

这是浏览器缓存的经典案例。不久前我也经历过同样的效果。一种方法是调用您的所有帖子：

```
$.post("./daily_todo_change_todo_status.php?id=" + (count++), parameters); 
```

在您的 php 脚本中，只需忽略 id 组件。通过这样做，浏览器每次都会生成一个新字符串，并且它不会认为它正在调用旧的缓存页面。

希望它有所帮助:) 干杯！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T18:08:33.503

听起来您在浏览器缓存 POST 请求的响应时遇到了一些问题。这是某些浏览器的常见问题。您应该知道浏览器缓存基于 URI 的内容，而不是实际的文件。换句话说，包括查询字符串。避免缓存请求的一种解决方法是每次使用略有不同的 URI：

```
$.post("./daily_todo_change_todo_status.php?t="+new Date().getTime(), null, callbackFn); 
```

通过插入当前时间戳，您可以保证始终向服务器发出新请求，而不是浏览器只是拉取缓存数据来代替请求。

此外，在您的第二个 POST 请求中，您正尝试返回数据。此函数旨在返回响应并在回调函数中异步处理它，这样您就不会阻塞页面上的执行。

但是，我看到你有一条评论说它是用于调试信息的，所以希望这是你在生产中删除的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T18:14:58.397

从我可以看到的代码中，您的事件处理似乎很好。`replaceTbodyHTML`但是，当被调用时，您很可能会丢失事件。您可以在更新时再次尝试从 onload 运行代码。例如，

```
function addListeners() {
    $('#todo_display_table input[type="submit"]').click(function(evt) {
        evt.preventDefault();

        var todo_id = $(this).val();
        //document.write(todo_id);//debug
        $.when(changeTodoStatusTo(1, todo_id)).then(updateTodoDisplay);
    });
}

$(document).ready(addListeners); 
```

然后在`replaceTbodyHTML`添加的最后`addListeners();`

# java - 如何使用 JarClassLoader AppletLauncher 将参数传递给我的小程序？

> ID：10690247
> 
> 赞同：0
> 
> 时间：2012-05-21T18:02:43.553
> 
> 标签：java, applet, classloader

JarClassLoader 的 AppletLauncher 类：

```
import javax.swing.JApplet;

public class MyAppletLauncher extends JApplet {

    private JarClassLoader jcl;

    @Override
    public void init() {
        jcl = new JarClassLoader();
        try {
            jcl.initApplet("MyApplet", this);
        } catch (Throwable e) {
            e.printStackTrace();
        }
    }

    @Override
    public void start() {
        jcl.startApplet();
    }

    @Override
    public void stop() {
        jcl.stopApplet();
    }

    @Override
    public void destroy() {
        jcl.destroyApplet();
    } 
```

由此，我将我的小程序命名为 MyApplet，如上所示：

```
jcl.initApplet("MyApplet", this); 
```

从`<Applet> <param>`我将参数传递给这个 MyApplet。如何使用此 JarClassLoader AppletLauncher 将参数传递给此 MyApplet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:00:49.123

这不是一个真正与小程序相关的问题。您要问的问题是“您如何在类加载器之间进行通信？”。

两个类加载器之间的通信很棘手。这是一篇关于这个主题的文章： http: [//surguy.net/articles/communication-across-classloaders.xml](http://surguy.net/articles/communication-across-classloaders.xml)

# javascript - Highcharts：是否可以在分组中的多个堆栈中存在单个系列

> ID：10690249
> 
> 赞同：2
> 
> 时间：2012-05-21T18:02:50.520
> 
> 标签：javascript, highcharts

我有一个堆叠的分组条形图，定义如下：

每个分组指的是一个单独的实体；每个堆栈都引用该实体上的数据子集；每个堆栈上有4个酒吧。

事情是这样的：每个堆栈在组和条形图中基本上是相同的。即使一个组中有 5 个堆栈，从技术上讲，总共只有 4 个柱。然而，在 Highcharts 中，一个系列的名称与它的分组方式无关。如果我有五十个名为“Bar 1”的系列，即使它们有不同的堆栈，我也会在图例中得到五十个“Bar 1”条目。

我想要的是每个条的单个图例/数据条目（例如“条 1”、“条 2”），而不是每个条每个堆栈的单个条目（例如“条 1 - 堆栈 1”、“条 1 - 堆栈2”、“条 1 - 堆栈 3”、“条 2 - 堆栈 1”，令人作呕）。

这可能吗？

（对于困惑：Highcharts 在分组/堆叠方面有点奇怪。虽然“条”是一组堆叠条

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:58:02.703

这不会真正帮助您获得所需的最终结果，但这是我必须做的。

在图表中设置颜色并每次重复。

```
colors: [
                '#3d3d3d' ,
                '#3d3d3d' ,
                '#008000' ,
                '#008000' ,
                '#86B201' ,
                '#86B201' ,
                '#97cb00' ,
                '#97cb00' ,
                '#f79646' ,
                '#f79646' 
    ] 
```

只要您以所需的顺序输出图表，输出看起来就会相同。

第二步是禁用一半系列的图例（重复的系列）。

例如一个系列的样子：

```
{
    name: 'Locked',
    data: [1, 2, 3],
    stack: 'Subitem 1',
    showInLegend: false
} 
```

这将导致一半重复的项目不会显示在您的图例中。但是，这也意味着您将无法通过单击图例中的项目来隐藏/显示项目（如果您[禁用该功能](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-events-legenditemclick/)，它不会混淆用户）。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T21:24:58.863

**解决方案 1**

您可以组合数据而不是进行堆栈，然后使用格式化程序列出锁定、解锁和潜在类别。这是通过将附加数据添加到数据点然后访问它来`this.point.locked`完成的。有关使用您的数据的示例，请参阅[更新的 jsfiddle 。](http://jsfiddle.net/6tc6T/3/)

**解决方案 2**

使用[圆环图](http://www.highcharts.com/demo/pie-donut)显示您的数据。内部部分将是系列标识符，而外环将是*锁定、解锁和潜在的计数。*

**解决方案 3**

[图例](http://www.highcharts.com/ref/#legend)为图表而不是系列启用或禁用。因此，您可以禁用图例。将堆栈中的每个系列设置为某种颜色，然后使用点的[单击](http://www.highcharts.com/ref/#point-events--click)事件来获取系列 id 并调用可以打开或关闭系列的函数[hide()](http://www.highcharts.com/ref/#series-object)。在副标题中，您放置了诸如**Click on Series to Hide**之类的内容。然后您还必须添加另一个按钮来重置/取消隐藏任何隐藏的系列。

# ruby-on-rails - GitLab 电子邮件设置：通过另一个邮件服务器发送

> ID：10690255
> 
> 赞同：32
> 
> 时间：2012-05-21T18:03:36.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, git, smtp, gitlab

默认情况下，gitlab 有以下配置`gitlab.yml`：

```
email:
  from: notify@gitlabhq.com
  host: gitlabhq.com 
```

但是，我需要指定其他变量（主机、端口、用户、密码等）才能使用另一个邮件服务器。

我该怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-05-23T05:50:58.293

现在它在 Gitlab 5.2+ 中完全不同了。

它位于“/home/git/gitlab/config/initializers/smtp_settings.rb.sample”中，我们只需要按照其中的说明进行操作即可。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-09-12T09:32:08.320

**注意**：此方法对旧版本的 Gitlab 很有用。[有关较新版本，请参阅 Girish 的答案](https://stackoverflow.com/a/16706460/1165132)。

* * *

在 config/environments/production.rb 的末尾，您可以添加如下内容：

```
 config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
      :address => 'yourserver.com',
      :port => 25,
      :domain => 'gitlab.yourserver.com',
      :authentication => :plain,
      :user_name => 'gitlab@yourserver.com',
      :password => 'yourPassword',
      :enable_starttls_auto => true
  } 
```

有关可能配置的更详细说明，请参阅 ActionMailer 文档：http: [//api.rubyonrails.org/classes/ActionMailer/Base.html](http://api.rubyonrails.org/classes/ActionMailer/Base.html)

**注意**：您可能需要在 Gitlab 更新后再次编辑文件

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-02T15:05:11.233

这也让我很困惑。但是要更改邮件设置，您可以在 config/environments/production.rb 中编辑它们，只需像常规 rails 应用程序一样添加 config.action_mailer.smtp_settings 即可。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-02-06T15:39:39.773

对于 Gitlab > 7 综合，编辑`/etc/gitlab/gitlab.rb`如下并运行`sudo gitlab-ctl reconfigure`

```
gitlab_rails['smtp_enable'] = true
gitlab_rails['smtp_address'] = "smtp.server"
gitlab_rails['smtp_port'] = 465
gitlab_rails['smtp_user_name'] = "smtp user"
gitlab_rails['smtp_password'] = "smtp password"
gitlab_rails['smtp_domain'] = "example.com"
gitlab_rails['smtp_authentication'] = "login"
gitlab_rails['smtp_enable_starttls_auto'] = true
gitlab_rails['smtp_openssl_verify_mode'] = 'none' 
```

来源：[https ://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/doc/settings/smtp.md](https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/doc/settings/smtp.md)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-27T14:48:24.437

中的`email:host:`配置`gitlab.yml`实际上并不是针对邮件服务器/SMTP 主机的。它用于在电子邮件中构建指向 Gitlab 主机的链接。我们称我们的 gitlab 服务器为 'gitlab.local'（并有一个 DNS 条目），所以我们的配置是`host: gitlab.local`.

这样，当用户收到来自 Gitlab 的电子邮件时，链接将起作用，而不是`http://localhost/`默认链接到 .

那里有一些冗余配置。为了在 Gitlab 中正确显示 git clone URL，您还需要配置`web:host:`和`git_host:host:`使用相同的主机名。

```
web:
  host: gitlab.local
  port: 80
  https: false

email:
   host: gitlab.local
   protocol: http

git_host:
   host: gitlab.local 
```

如果您使用的是 HTTPS，请更改`web:https:`、`web:port:`和`email:protocol:`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-22T13:25:11.697

这是我最后在 /config/environment/production.rb 中的条目，这对我有用。

* * *

注释掉 sendmail 选项并使用外部 SMTP 中继

* * *

```
 # #config.action_mailer.delivery_method = :sendmail ## Comment out this

  # Defaults to:

  # # config.action_mailer.sendmail_settings = {

  # #   :location => '/usr/sbin/sendmail',

  # #   :arguments => '-i -t'

  # # }

  config.action_mailer.perform_deliveries = true

  config.action_mailer.raise_delivery_errors = true

  # # SMTP Settings

  config.action_mailer.delivery_method = :smtp

  config.action_mailer.smtp_settings = {

      :address => '10.146.10.90', ## My SMTP Relay/Gateway

      :port => 25, ## SMTP Port

      :domain => 'gitlab.example.com', ## My Domain

      :authentication => :plain, ## Let it be plain as it is inside my LAN

      ##:user_name => 'gitlab@yourserver.com', ## This is not required as long as 

      ##:password => 'yourPassword', ## SMTP Gateway allows anonymous relay

      ##:enable_starttls_auto => true ## In LAN

      ##:user_name => '',

      ##:password => '',

      :enable_starttls_auto => true
  }
end 
```

* * *

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-02T22:24:06.153

*显然，自从最初提出这个问题以来，这些设置的位置已经改变了（几次）。目前截至 2018 年 11 月 2 日：*

**设置在`gitlab.rb`官方文档中：**

[![在此处输入图像描述](../Images/a3c191c637362895e94474d1110d8979.png)](https://i.stack.imgur.com/b9ZiJ.png)

[https://docs.gitlab.com/omnibus/settings/smtp.html](https://docs.gitlab.com/omnibus/settings/smtp.html)

# javascript - CodeMirror 2：多个缩进正在删除行

> ID：10690256
> 
> 赞同：8
> 
> 时间：2012-05-21T18:03:40.427
> 
> 标签：javascript, codemirror

我已经将 Code Mirror 作为插件实现到 CMS 系统中。

我有一个问题，如果我选择多行并按 Tab，这些行将被删除。

这不会在 Code Mirror 演示网站上发生。我找不到启用或禁用多个缩进的配置选项。

这是我的配置代码：

```
this.CodeArea = CodeMirror.fromTextArea(codeArea, {
    lineNumbers: true,
    mode: { name: "xml", htmlMode: true },
    onChange : function (editor) {
        editor.save();
    }
}); 
```

上下文：[https ://github.com/rsleggett/tridion-mirror/blob/master/src/BuildingBlocks.Tridion2011Extensions.CodeMirror/BuildingBlocks.Tridion2011Extensions.CodeMirror/Scripts/codemirror/codemirror.js](https://github.com/rsleggett/tridion-mirror/blob/master/src/BuildingBlocks.Tridion2011Extensions.CodeMirror/BuildingBlocks.Tridion2011Extensions.CodeMirror/Scripts/codemirror/codemirror.js)

我不确定我错过了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T13:03:24.537

CodeMirror javascripts 在[您的版本](https://github.com/rsleggett/tridion-mirror/blob/master/src/BuildingBlocks.Tridion2011Extensions.CodeMirror/BuildingBlocks.Tridion2011Extensions.CodeMirror/Scripts/codemirror/codemirror.js)和[演示版本](http://codemirror.net/lib/codemirror.js)之间有所不同：

在第 2036 行左右的演示版本中，您的版本中缺少以下代码块：

```
defaultTab: function(cm) {
    if (cm.somethingSelected()) cm.indentSelection("add");
    else cm.replaceSelection("\t", "end");
} 
```

连同一堆与`CodeMirror.keyMap`.

比较两者并合并缺失的位，或者只使用演示版中的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T10:23:11.740

就我而言，发生这种情况是因为我使用了 CodeMirror 官方文档中的自定义片段，该片段映射了 Tab ¡ 以插入空格而不是制表符：

```
editor.setOption("extraKeys", {
  Tab: function(cm) {
    var spaces = Array(cm.getOption("indentUnit") + 1).join(" ");
    cm.replaceSelection(spaces);
   }
}); 
```

删除此自定义片段使块制表再次工作，默认情况下使用空格而不是制表符。

# c# - 使用 javascript 从 listview 获取隐藏字段的值

> ID：10690257
> 
> 赞同：0
> 
> 时间：2012-05-21T18:03:41.410
> 
> 标签：c#, javascript, asp.net, vb.net

**脚本：**

```
$(document).ready(function() {
    //Change these values to style your modal popup
    var align = 'center';                               //Valid values; left, right, center
    var top = 100;                                          //Use an integer (in pixels)
    var width = 500;                                        //Use an integer (in pixels)
    var padding = 10;                                   //Use an integer (in pixels)
    var backgroundColor = '#FFFFFF';                        //Use any hex code
    var source = 'AttractionDetails.aspx?AttractionID=  **HOW_DO_I_GET_THE_VALUE_FROM_HIDDEN_FIELD** ';                                 //Refer to any page on your server, external pages are not valid e.g. http://www.google.co.uk
    var borderColor = '#333333';                            //Use any hex code
    var borderWeight = 4;                                   //Use an integer (in pixels)
    var borderRadius = 5;                                   //Use an integer (in pixels)
    var fadeOutTime = 300;                                  //Use any integer, 0 = no fade
    var disableColor = '#666666';                           //Use any hex code
    var disableOpacity = 40;                                //Valid range 0-100
    var loadingImage = 'lib/release-0.0.1/loading.gif';     //Use relative path from this page

    //This method initialises the modal popup
    $(".modal").click(function() {
        modalPopup(align, top, width, padding, disableColor, disableOpacity, backgroundColor, borderColor, borderWeight, borderRadius, fadeOutTime, source, loadingImage);
    });

    //This method hides the popup when the escape key is pressed
    $(document).keyup(function(e) {
        if (e.keyCode == 27) {
            closePopup(fadeOutTime);
        }
    });

}); 
```

**列表显示：**

```
<ItemTemplate>
                        <td id="Td6" runat="server" style="background-color: #FFFFFF; color: #000000; width: 120px;">
                            <asp:Label ID="AttractionNameLabel" runat="server" Text='<%# Eval("AttractionName") %>' />
                            <br />
                            <a class="modal" href="javascript:void(0);"> Modal Pop Up </a>
                            <asp:HiddenField ID="HiddenField1" runat="server" Value='<%# Eval("AttractionID") %>' />

                        </td>
                    </ItemTemplate> 
```

我想要的只是使用javascript获取`HiddenField`被点击的项目的价值[点击超链接**“Modal Pop Up” ]。**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:11:31.983

您可以在不使用隐藏字段的情况下做到这一点。添加数据属性并将其设置为 AttractionID。此方法不需要使用隐藏字段来保存和传递值。

```
<a class="modal" href="javascript:void(0);" data-AttractionID='<%# Eval("AttractionID") %>'> Modal Pop Up </a> 
```

获取分配给锚标签的吸引ID

```
 $(".modal").click(function() {
        valueofAttractionID = $(this).data('AttractionID');
        modalPopup(align, top, width, padding, disableColor, disableOpacity, backgroundColor, borderColor, borderWeight, borderRadius, fadeOutTime, source, loadingImage);
    }); 
```

# ios - 我可以在 iOS 应用程序中使用下载的字体资源吗？

> ID：10690259
> 
> 赞同：0
> 
> 时间：2012-05-21T18:04:01.893
> 
> 标签：ios

我想在我的应用程序中使用从服务器下载的字体。我可能在某些时候有一个字体，我没有与应用程序捆绑但我想使用；有没有办法下载它（嗯，这很容易）然后加载它并在视图中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:41:02.187

您必须通过将它们添加到 info.plist 文件中的“应用程序提供的字体”条目来“通知”您的应用程序您打算使用的字体。在运行时编辑此文件是不好的做法，并且出于所有意图和目的都是错误的。因此，您的应用程序将使用的所有字体都需要在编译时与其捆绑并随应用程序一起提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:02:46.593

不，字体必须在您的应用程序包中，并在编译时向您的 Info.plist 注册。

如果您真的想使用您下载的字体，您可以尝试将其转换为一系列图像并将它们合成在一起，但这会很麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T06:24:16.873

这是一个古老的问题，但事情发生了变化。从 iOS 6 开始，答案是肯定的。

这是苹果的例子：

[https://developer.apple.com/Library/ios/samplecode/DownloadFont/Introduction/Intro.html](https://developer.apple.com/Library/ios/samplecode/DownloadFont/Introduction/Intro.html)

# java - 具有复杂工作流的开源 UML 模型到代码生成工具

> ID：10690260
> 
> 赞同：0
> 
> 时间：2012-05-21T18:04:10.237
> 
> 标签：java, uml, code-generation, modeling

寻找一个免费的开源 UML 2 Java EE 应用程序生成器 - 所以找到了两个候选者 - Andromda（更好的文档和活跃的论坛）和 WitchcraftMDA（没有很好的文档，但具有非常强大的工作流生成和宁静的服务支持）。

任何人都对这些工具或其他东西有任何经验，可以帮助我们专注于解决业务问题，而不是像屏幕、验证、i18n、持久性等平凡的任务......

我们需要分叉、连接、循环等——整个 JBPM / BPMN 语言集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:23:49.257

AndroMDA 正在从来自类图的结构模型生成 java 代码。生成的代码使用在类图中表示为构造型的 uml 标记。您不能从 JBPM 或 BPMN 生成代码。

# javascript - 正则表达式无效组

> ID：10690267
> 
> 赞同：3
> 
> 时间：2012-05-21T18:04:48.850
> 
> 标签：javascript, regex

谁能看到为什么这会`Invalid regular expression: Invalid group`出错？

```
text.replace(/(?<!br|p|\/p|b|\/b)>/g, "&gt;"); 
```

这个没问题：

```
text.replace(/<(?!br|p|\/p|b|\/b)/g, "&lt;"); 
```

所以，我不确定第一个 ( `&gt;`) 哪里出了问题。

这是一个[例子](http://jsfiddle.net/DP32f/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:02:49.933

JavaScript 不支持lookbehinds。这是获得相同行为的一种方法：

```
text = text.replace(/(br|p|\/p|b|\/b)?>/g, function($0, $1){
    return $1 ? $0 : "&gt;";
}); 
```

这种方法来自以下博客条目：[在 JavaScript 中模仿 Lookbehind](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)

这是一个更新的[小提琴](http://jsfiddle.net/rPqgm/)。

# jquery - 更改两个不同元素的值的 Jquery UI 滑块

> ID：10690269
> 
> 赞同：0
> 
> 时间：2012-05-21T18:04:51.860
> 
> 标签：jquery, jquery-ui

我有一组 jquery 滑块设置，可以改变图像不同层的不透明度。我试图弄清楚如何使用它，以便一个滑块会改变两个 div 的不透明度，但方向相反。因此，当一个人的价值向 0% 移动时，另一个人正在向 100% 移动。

我已经这样设置了，但我不确定如何修改它：

```
$('#slider3').slider({ 
    min: 0, 
    max: 1, 
    step: 0.01, 
    value: 1,
    orientation: "horizontal",
    slide: function(e,ui){
                 $('#nebula').css('opacity', ui.value)

         }                
    }); 
```

非常感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:08:19.270

听起来您只需要使用`1 - ui.value`其他图像不透明度即可。例如，如果您的其他图像的 id 为`inverse`：

```
$('#slider3').slider({ 
    min: 0, 
    max: 1, 
    step: 0.01, 
    value: 1,
    orientation: "horizontal",
    slide: function(e,ui){
        var val = ui.value;
        $('#nebula').css('opacity', val);
        $('#inverse').css('opacity', 1 - val);
    }                
}); 
```

# sql-server-2008 - SSIS - 导入对象名称无效。名称不能为空

> ID：10690280
> 
> 赞同：1
> 
> 时间：2012-05-21T18:06:01.413
> 
> 标签：sql-server-2008, ssis

我正在尝试导入 SSIS 包，但不断收到以下错误消息：

> 对象名称无效。名称不能为空。

以下是完整的技术信息：

> 节目地点：
> 
> 在 Microsoft.SqlServer.Dts.Runtime.Application.LoadPackage（字符串文件名，IDTSEvents 事件）在 Microsoft.DataTransformationServices.Controls.PackageProtectionUtils 的 Microsoft.SqlServer.Dts.Runtime.Application.LoadPackage（字符串文件名，IDTSEvents 事件，布尔 loadNeutral）。 <> *c_DisplayClass4.b*_3（字符串密码，IDTSEvents 事件）在 Microsoft.DataTransformationServices.Controls.PackageProtectionUtils.LoadPackageWithPassword（PackageLoader 加载程序，IWin32Window dialogParent，字符串 packageName，布尔 askOptionalPassword，String& packagePassword，DtsProtectionEventListener errorListener）在 Microsoft.DataTransformationServices.Controls.PackageProtectionUtils.LoadPackageFromFile（字符串文件, IWin32Window dialogParent, Boolean askOptionalPassword, PackageUpgradeOptions packageUpgradeOptions, String& packagePassword, DtsProtectionEventListener errorListener) 在 Microsoft.DataTransformationServices.Controls.PackageLocationControl.LoadPackage(DtsProtectionEventListener errorListener, PackageUpgradeOptions packageUpgradeOptions, String& packagePassword) 在 Microsoft.DataTransformationServices。Microsoft.SqlServer.Dts.ObjectExplorerUI.ImportPackageAsAction.ImportPackage(ImportPackageAsForm dlg) 上的 Controls.PackageLocationControl.LoadPackage(DtsProtectionEventListener errorListener, String& packagePassword)

我不确定为什么会收到此消息。我已经多次导入其他包，没有任何问题。

SQL Server：2008 SSIS 是在 VS 2008 中创建的

文件名或路径中没有点或任何其他特殊字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:53:47.467

对于其他遇到此问题的人，我将为我们发布解决方案。

我在我们的一台合作伙伴服务器上遇到了同样的问题。我们只安装了 SQL Server 2008 R2 和 SSIS。

我们通过安装 BIDS（商业智能开发工作室）解决了这个问题。然后我就可以导入包了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:15:33.993

它似乎与我的机器有关。我能够从不同的工作站导入相同的包。

# python - Django-admin.py 运行服务器不工作

> ID：10690284
> 
> 赞同：4
> 
> 时间：2012-05-21T18:06:09.573
> 
> 标签：python, django, django-admin

我是 python 和 django 的新手，最近遇到了一些问题。Django-admin.py runserver 不起作用（ubuntu 12.04）。

终端错误代码：

```
 linas@ubuntu:~$ django-admin.py runserver
Traceback (most recent call last):
  File "/usr/local/bin/django-admin.py", line 5, in <module>
    management.execute_from_command_line()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/runserver.py", line 8, in <module>
    from django.core.servers.basehttp import AdminMediaHandler, run, WSGIServerException, get_internal_wsgi_application
  File "/usr/local/lib/python2.7/dist-packages/django/core/servers/basehttp.py", line 26, in <module>
    from django.views import static
  File "/usr/local/lib/python2.7/dist-packages/django/views/static.py", line 95, in <module>
    template_translatable = ugettext_noop(u"Index of %(directory)s")
  File "/usr/local/lib/python2.7/dist-packages/django/utils/translation/__init__.py", line 75, in gettext_noop
    return _trans.gettext_noop(message)
  File "/usr/local/lib/python2.7/dist-packages/django/utils/translation/__init__.py", line 48, in __getattr__
    if settings.USE_I18N:
  File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

谢谢你的帮助。

编辑：这是我使用 ./manage.py runserver 时得到的

```
linas@ubuntu:~/Dokumentai/python/FirstBlog$ ./manage.py runserver
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x1148c90>>
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/validation.py", line 103, in get_validation_errors
    connection.validation.validate_field(e, opts, f)
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/mysql/validation.py", line 14, in validate_field
    db_version = self.connection.get_server_version()
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/mysql/base.py", line 411, in get_server_version
    self.cursor()
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/mysql/base.py", line 387, in _cursor
    self.connection = Database.connect(**kwargs)
  File "/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.3-py2.7-linux-x86_64.egg/MySQLdb/__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.3-py2.7-linux-x86_64.egg/MySQLdb/connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (1049, "Unknown database 'FirstBlog'") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T18:13:08.283

`manage.py`从您的项目目录中使用

```
cd project
./manage.py runserver 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:46:38.587

你能发布你的模型吗？您还创建了数据库吗？

跑：

```
python manage.py syncdb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:48:33.747

首先（我希望你已经这样做了）用你的项目名称创建一个目录，然后启动你的 django 项目执行命令： python django-admin.py startproject projname （如果它没有正确执行删除关键字“python”并尝试）现在从同一目录运行 python manage.py runserver 。如果您已正确安装，您将获得： Validating models 。. 发现 0 个错误

# c++ - 调用默认构造函数而不是参数化构造函数

> ID：10690285
> 
> 赞同：-1
> 
> 时间：2012-05-21T18:06:11.677
> 
> 标签：c++, c++11

我为加权方案实现了一个类，并在类中创建了 4 个具有不同数量参数的构造函数。当我尝试使用特定构造函数的参数调用构造函数时，也会调用没有参数的默认构造函数。我无法了解为什么会这样。

构造函数定义：

```
593     UnigramLMWeight(double param_log_,int select_smoothing_,double param_smoothing1_,double param_smoothing2_)
594         : select_smoothing(select_smoothing_), param_log(param_log_), param_smoothing1(param_smoothing1_),
595           param_smoothing2(param_smoothing2_)
596         { 
```

调用构造函数：

```
 79     enquire.set_weighting_scheme(Xapian::UnigramLMWeight(double(322.0),int(2),double(2000.0),double(2.0))); 
```

但我检查了设置的值来自默认构造函数。

任何人都可以帮助我为什么调用这个默认构造函数，或者是每次在参数构造函数之后调用默认构造函数还是将参数强制转换为其他类型并且构造函数尝试找到这样的构造函数但无法找到这样的构造函数并调用默认构造函数最后。

set_weigthing 方案的代码是：

```
 926 Enquire::set_weighting_scheme(const Weight &weight_)
 927 {
 928     LOGCALL_VOID(API, "Xapian::Enquire::set_weighting_scheme", weight_);
 929     // Clone first in case doing so throws an exception.
 930     Weight * wt = weight_.clone();
 931     swap(wt, internal->weight);
 932     delete wt;
 933 } 
```

set_weighing 方案 set 方法是否调用克隆函数，这是克隆调用默认构造函数时的根本问题，是这样吗？这可以是理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:42:50.923

当您制作对象的副本（克隆？）时，会调用复制构造函数。似乎您尚未实现自定义复制构造函数，因此调用了编译器生成的默认构造函数。

```
UnigramLMWeight(const UnigramLMWeight& copy_from)
{
// implement copy here
} 
```

[http://login2win.blogspot.com/2008/05/c-copy-constructor.html](http://login2win.blogspot.com/2008/05/c-copy-constructor.html)可能会有所帮助

# ruby-on-rails - rails 3.1 来自同一模型的记录之间的关系

> ID：10690288
> 
> 赞同：0
> 
> 时间：2012-05-21T18:06:24.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我有一个叫做大众媒体的模型，这个模型属于公司。

**我们有公司：** PRIME、JURNAL、ASMEDIA、MEDIA GROUP

**和大众媒体：** PRIME TV、JURNAL TV、JURNAL FM、PUBLIKA TV

和关系：

```
 Company                        TV Channel                    Company

1\. **PRIME**        owner of   **PRIME TV**

2\. **JURNAL**       owner of   **JURNAL TV**

3\. **ASMEDIA**      owner of   **PUBLIKA TV**    owner of     **PRIME**

4\. **MEDIA GROUP**                               owner of     **PRIME** 
```

现在我遇到了**PRIME**公司归**ASMEDIA**和**MEDIA GROUP**所有的问题，这意味着我必须与之建立联系`company`，`company`我不确定这是否可以做到，即使为两家公司之间的关系创建一个新表也不像我想的那样好需要一个包含 2 列 company_id 的拥有公司的表和一个 hwo 拥有它的 company_id 的表。

任何想法我该如何解决这个问题？谢谢你。

**编辑**

我试图创建一个我试图完成的方案：

MediaGrup 是 Prime 公司的所有者，公司股东 1 和 2 是 MediaGrup 的所有者

所以所有这些：MediaGrup、Shareholder1 和 2 都是公司模式。

![在此处输入图像描述](../Images/efa6a77a9d79727bcad8dfed562da1d4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:28:28.310

您可以在同一类的实例之间建立关系。例如使用`has_one`and `belongs_to`（也可能使用`has_many`，但您的示例显示没有 0..n 关联）：

```
class MassMedia< ActiveRecord::Base   # the table "mass_medias" must have a column 'owner_id'
  belongs_to :owner, :class_name => 'Company', :foreign_key => 'owner_id', :inverse_of => :mass_media
end

class Company < ActiveRecord::Base   # the table "companies" must have a column 'owner_id'
  has_one :mass_media, :inverse_of => :owner

  has_one :company, :inverse_of => :owner      
  belongs_to :owner, :class_name => 'Company', :foreign_key => 'owner_id', :inverse_of => :company
end 
```

# mysql - Rails - postgres 上的 gmaps4rails gem

> ID：10690289
> 
> 赞同：1
> 
> 时间：2012-05-21T18:06:29.753
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, postgresql, gmaps4rails

我在本地 MySQL 机器上成功使用了 gmaps4rails gem。但是，当我在 Heroku 上部署到 PG 时，对于使用 gmaps4rails“near”函数查找所选位置附近的位置的代码，我收到以下错误：

```
2012-05-21T17:58:40+00:00 app[web.1]: ActiveRecord::StatementInvalid (PG::Error: ERROR:  operator does not exist: numeric - character varying
2012-05-21T17:58:40+00:00 app[web.1]:                                                              ^
2012-05-21T17:58:40+00:00 app[web.1]: LINE 1: ...8.755864232 * 2 * ASIN(SQRT(POWER(SIN((30.1926300 - venues.l...
2012-05-21T17:58:40+00:00 app[web.1]: HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
2012-05-21T17:58:40+00:00 app[web.1]: : SELECT  venues.*, 3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((30.1926300 - venues.latitude) * PI() / 180 / 2), 2) + COS(30.1926300 * PI() / 180) * COS(venues.latitude * PI() / 180) * POWER(SIN((-85.8356740 - venues.longitude) * PI() / 180 / 2), 2) )) AS distance, CAST(DEGREES(ATAN2( RADIANS(longitude - -85.8356740), RADIANS(latitude - 30.1926300))) + 360 AS decimal) % 360 AS bearing FROM "venues"  WHERE (3958.755864232 * 2 * ASIN(SQRT(POWER(SIN((30.1926300 - venues.latitude) * PI() / 180 / 2), 2) + COS(30.1926300 * PI() / 180) * COS(venues.latitude * PI() / 180) * POWER(SIN((-85.8356740 - venues.longitude) * PI() / 180 / 2), 2) )) <= 5) ORDER BY distance LIMIT 5):
2012-05-21T17:58:40+00:00 app[web.1]:   app/controllers/venues_controller.rb:22:in `show' 
```

我怀疑这是因为 postgres 中的此查询不支持某些内容，但据说 gem 支持 postgres。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:16:07.507

看起来 PostgreSQL 正在抱怨这个：

```
30.1926300 - venues.latitude 
```

并且错误消息说没有运算符可以让您从数字中减去字符串。我猜你已经将你的`venues.latitude`列创建为 a`:string`当它应该是 a[`:float`或`:decimal`](http://guides.rubyonrails.org/migrations.html#supported-types)。MySQL 试图友好地在你背后做很多隐式类型转换，PostgreSQL 试图友好地让你准确地说出你的意思以避免混淆。

您将不得不将`latitude`列更改为数字类型。如果你要在 Heroku 的 PostgreSQL 上进行部署，那么你应该开始在 PostgreSQL 上进行开发，你还应该在你的开发和部署环境中匹配 PostgreSQL 版本。

AFAIK，您必须使用[ALTER TABLE](http://www.postgresql.org/docs/current/static/sql-altertable.html)手动更改类型，因为迁移中的简单操作`change_column`可能会失败，并出现类似于以下的错误

> 列“纬度”不能转换为双精度类型

像这样的迁移：

```
def up
    connection.execute(%q{
        alter table venues
        alter column latitude
        type float using latitude::float
    })
end 
```

应该为 PostgreSQL 解决问题。大概你也必须修复`venues.longitude`。

# linux - 右键单击和菜单栏菜单如何工作？

> ID：10690290
> 
> 赞同：2
> 
> 时间：2012-05-21T18:06:33.983
> 
> 标签：linux, x11

我创建了监控 X11 的简单应用程序[`_NET_CLIENT_LIST`](http://standards.freedesktop.org/wm-spec/wm-spec-1.3.html#id2687686)。当窗口（包括 conky、tint2、...）打开或关闭时，它会打印我的信息。它工作正常，除非我创建菜单（RMB-click 或 front Menu-Bar）它不会打印任何东西 - 这意味着它们不是新窗口，但它们可以从创建它们的窗口中绘制出来，所以什么是吗？

我想在我的应用程序中创建自己的上下文菜单，我不想使用任何工具包（GTK、QT、...）。所以我需要知道它们是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:57:30.043

添加另一个答案，因为旧答案完全是针对不同的问题:)

弹出菜单（无论是用人民币激活还是从菜单栏）都是完全正常的 X11 窗口。您在监视程序中看不到它们的原因是您正在监视由窗口管理器引起的更改。弹出菜单通常会完全绕过 WM，因此 WM 不知道它们。

这是通过设置`override_redirect`窗口属性`XSetWindowAttributes`结构来实现的。为您的弹出菜单设置它（并且*仅*用于弹出菜单），您应该已经设置好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:52:11.340

菜单不由 WM 管理，也没有任何 WM 特定的属性。

要在根窗口上查看窗口、捕获`XMapNotify`和事件，请使用. 这是一个非常简单的程序，它做了一些事情：`XUnmapNotify``SubstructureNotifyMask`

```
#include <stdio.h>
#include <stdlib.h>
#include <X11/Xlib.h>

int main () {
    Display* d = XOpenDisplay(0);
    if (!d) {
        printf ("Oops...!\n");
        exit (EXIT_FAILURE);
    }

    XSelectInput(d, DefaultRootWindow(d), SubstructureNotifyMask);

    for(;;) {
        XEvent e;
        XNextEvent(d, &e);
        if (e.type == MapNotify) {
            printf ("Window %lx mapped!\n", e.xmap.window);
        }
        if (e.type == UnmapNotify) {
            printf ("Window %lx unmapped!\n", e.xunmap.window);
        }
    }    
} 
```

`Unmap`它报告可以简单地忽略的虚假事件。

一个更完整的程序可能应该监视`SubstructureNotifyMask`和选择的所有事件`SubstructureRedirectMask`。

# gnu-make - Overwiting target directory in catch-all rule in GNU Makefile

> ID：10690291
> 
> 赞同：0
> 
> 时间：2012-05-21T18:06:34.223
> 
> 标签：gnu-make

Consider the following:

```
SRCS = somefile.c util/someother.c ../src/more.c

%.o : %.c
    $(GCC) -MD -c $< -o $@ -Wp,-MD,.deps/$*.d
    @cp .deps/$*.d .deps/$*.P; \
      sed -e 's/#.*//' -e 's/^[^:]*: *//' -e 's/ *\\$$//' \
          -e '/^$$/ d' -e 's/$$/ :/' < .deps/$*.d >> .deps/$*.P; \
      rm -f .deps/$*.d

-include $(SRCS:%.c=.deps/%.P) 
```

How would I change the above so that the .o files end up in ./? Currently they build in the directory the source file exists in and that's bad.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:58:26.683

我会这样做：

```
SRCS = somefile.c someother.c more.c

%.o : %.c
    [same as before]

-include $(SRCS:%.c=.deps/%.P)

vpath %.c util ../src 
```

# java - How to find points of intersection between ellipse and rectangle?

> ID：10690293
> 
> 赞同：1
> 
> 时间：2012-05-21T18:06:38.557
> 
> 标签：java, geometry

Is there a not-too-long way to calculate points of intersection for rectangle and ellipse? I need this for my college project - vector editor with few primitives. I'm using Java, but, as I looked through oracle docs, this problem seems to be possible to solve only through geometrical approach.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:37:07.830

No complete solution, but some hints:

*   A recangle consist of four line segments. If you have to points x1 and x2 of a line seqment, the vector equation is r=x1+t(x2-x1) while t is in (0,1).

*   The equation of an ellipse with focus points f1 and f2 is |r-f1| + |r-f2| = 2a where a is the radius.

*   Intersections of two figures are points r that fulfill the equations of both figures.

# ios - How to create a location autocompletion input field in iOS 5?

> ID：10690294
> 
> 赞同：0
> 
> 时间：2012-05-21T18:06:40.600
> 
> 标签：ios, mapkit, geocoding, reverse-geocoding, mkreversegeocoder

I know iOS offers `MKReverseGeocoder` which translates the user's lat/long into a location like "San Francisco", but is there also the opposite? To create a text field where users type "San F" and it offers locations starting with "San F" to choose from?

Which services are available to return locations and lat/long for a given city name substring search?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:07:07.627

Google Places 有一个新的[Autocomplete API](https://developers.google.com/maps/documentation/places/autocomplete)

# git - Git/GitHub branch merge

> ID：10690295
> 
> 赞同：1
> 
> 时间：2012-05-21T18:06:42.983
> 
> 标签：git, github

I have multiple branches setup for a project.

Does a `git pull` do a pull/merge for my current branch or for all the branches?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:08:38.053

It will fetch everything but only merge the currently active branch.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:09:02.673

它从远程服务器更新本地分支，查看 Github[备忘单](http://help.github.com/git-cheat-sheets/)

# windows-phone-7 - Image Animation: Make Image move left and then back

> ID：10690297
> 
> 赞同：3
> 
> 时间：2012-05-21T18:06:44.763
> 
> 标签：windows-phone-7

I have the following which works for animating the opacity of the image, but what I'd really like to do is have the image move back in forth say 100 pixels to the right then a 100 pixels to the left. But I haven't been able to achieve this effect.

```
<Image Source="MyImage.jpg" Width="2000" Height="800" x:Name="MyAnimatedImageGeometry">
<Image.Triggers>
    <EventTrigger RoutedEvent="Image.Loaded">
        <BeginStoryboard>
            <Storyboard Storyboard.TargetName="MyAnimatedImageGeometry" Storyboard.TargetProperty="Opacity">
                <DoubleAnimation To="0" AutoReverse="True" RepeatBehavior="Forever"/>
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</Image.Triggers> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:04:21.743

这是一张图片：

```
<Image x:Name="image" Source="/filename.png" RenderTransformOrigin="0.5,0.5" >
    <Image.RenderTransform>
        <CompositeTransform TranslateX="0"/>
    </Image.RenderTransform>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseLeftButtonDown">
            <eim:ControlStoryboardAction Storyboard="{StaticResource moveImage}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Image> 
```

渲染转换的初始化是有趣的一点。触发器只是用来演示启动情节提要。您不会在真正的应用程序中执行此操作，因为当您在移动时点击项目以这种方式移动它会变得混乱。（显然这在代码中很容易控制。）

这是另一个有趣的部分，相关的故事板：

```
<Storyboard x:Name="moveImage" AutoReverse="True" RepeatBehavior="1x">
    <DoubleAnimation Duration="0:0:1"
                     To="-100"
                     Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                     Storyboard.TargetName="image"
        <DoubleAnimation.EasingFunction>
            <CubicEase EasingMode="EaseIn"/>
        </DoubleAnimation.EasingFunction>
    </DoubleAnimation>
</Storyboard> 
```

这会将图像向左移动 100 个像素（在一秒内），然后再返回。
我添加了一个缓动函数以使其更有趣。

# css - How to add a margin to a table row

> ID：10690299
> 
> 赞同：236
> 
> 时间：2012-05-21T18:07:00.460
> 
> 标签：css

I have a table containing many rows. Some of these rows are `class="highlight"` and signify a row that needs to be styled differently and highlighted. What I'm trying to do is add some extra spacing before and after these rows so they appear slightly separated from the other rows.

I thought I could get this done with `margin-top:10px;margin-bottom:10px;` but it's not working. Anyone knows how to get this done, or if it could be done? Here's the HTML and I've set the 2nd tr in the tbody to class highlight.

```
<table>
<thead>
  <tr>
     <th>Header 1</th>
     <th>Header 2</th>
  </tr>
</thead>
<tbody>
  <tr>
     <td>Value1</td>
     <td>Value2</td>
  </tr>
  <tr class="highlight">
     <td>Value1</td>
     <td>Value2</td>
  </tr>
  <tr>
     <td>Value1</td>
     <td>Value2</td>
  </tr>
  <tr>
     <td>Value1</td>
     <td>Value2</td>
  </tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-05-21T18:10:43.463

表格行不能有边距值。你能增加填充吗？那会奏效。否则，您可以在行`<tr class="spacer"></tr>`之前和之后插入一个。`class="highlighted"`

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2014-12-12T16:14:36.087

该`border-spacing`属性将适用于这种特殊情况。

```
table {
  border-collapse:separate; 
  border-spacing: 0 1em;
} 
```

**[参考](https://developer.mozilla.org/en-US/docs/Web/CSS/border-spacing)**。

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2012-05-21T18:14:35.817

您`<tr>`不能自己设置 s 的样式，但可以`<td>`在“突出显示” `<tr>`sa 样式中赋予 s ，就像这样

```
tr.highlight td {
  padding-top: 10px; 
  padding-bottom:10px
} 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2014-02-24T21:58:54.673

line-height 可能是可能的解决方案

```
tr
{
    line-height:30px;
} 
```

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2018-05-25T07:39:26.073

尽管我很高兴地发现您*可以**分别*控制水平和垂直[边框间距](https://developer.mozilla.org/en-US/docs/Web/CSS/border-spacing) ，但这并不完美：

 *```
table
{
 border-collapse: separate;
 border-spacing: 0 8px;
} 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2015-07-16T19:23:39.883

我知道这有点老了，但我只是得到了一些相同的东西来工作。你不能这样做吗？

```
tr.highlight {
    border-top: 10px solid;
    border-bottom: 10px solid;
    border-color: transparent;
} 
```

希望这可以帮助。

* * *

## 回答 #7

> 赞同：28
> 
> 时间：2017-12-07T15:30:20.373

首先，不要试图为 a`<tr>`或 a设置边距，`<td>`因为它在现代渲染中不起作用。

*   **解决方案 1**

虽然边距不起作用，但**填充**确实起作用：

```
td{
    padding-bottom: 10px;
    padding-top: 10px;
} 
```

**警告：**这也会将边框推离元素更远，如果您的边框可见，您可能需要使用解决方案 2。

*   **解决方案 2**

要使边框靠近元素并模仿边距，`<tr>`请在每个卷轴表之间放置另一个，`<tr>`如下所示：

```
<tr style="height: 20px;"> <!-- Mimic the margin -->
</tr> 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2017-02-20T10:10:04.967

因为`margin`在 上被忽略`tr`，所以我通常使用一种解决方法，通过设置透明`border-bottom`或`border-top`并将`background-clip`属性设置为，`padding-box`以便`background-color`不会在边框下方绘制。

```
table {
   border-collapse: collapse; /* [1] */
}

th, td {
  border-bottom: 5px solid transparent; /* [2] */
  background-color: gold; /* [3] */
  background-clip: padding-box; /* [4] */
} 
```

1.  确保单元格共享一个共同的边界，但完全是可选的。没有它，解决方案也有效。
2.  该`5px`值代表您想要达到的利润
3.  设置`background-color`行/单元格的
4.  确保`background`没有在下面涂漆`border`

在此处查看演示：[http ://codepen.io/meodai/pen/MJMVNR?editors=1100](http://codepen.io/meodai/pen/MJMVNR?editors=1100)

`background-clip`[所有现代浏览器](https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip#Browser_compatibility)都支持。（和 IE9+）

或者，您可以使用`border-spacing`. 但这不适用于`border-collapse`set to `collapse`。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2017-08-28T15:33:32.920

模拟行上边距的一种方法是使用伪选择器在`td`.

```
.highlight td::before, .highlight td::after
{
  content:"";
  height:10px;
  display:block;
} 
```

这样，任何标有高亮类的东西都将在顶部和底部分开。

[https://jsfiddle.net/d0zmsrfs/](https://jsfiddle.net/d0zmsrfs/)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-01-07T15:37:33.997

您可以尝试使用 CSS 转换来缩进整个 tr：

```
tr.indent {
   -webkit-transform: translate(20px,0);
   -moz-transform: translate(20px,0);
} 
```

我认为这是一个有效的解决方案。似乎在我的 OSX 上的 Firefox 16、Chrome 23 和 Safari 6 中运行良好。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-08-22T21:24:02.687

这是我做的一个巧妙的方法：

```
table tr {
    border-bottom: 4px solid;
} 
```

这将增加`4px`每行之间的垂直间距。如果你不想在最后一个孩子身上得到那个边界：

```
table tr:last-child {
    border-bottom: 0;
} 
```

提醒 CSS3 伪选择器只能在 IE 8 及更低版本中使用 selectivizr。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-08-23T20:47:32.783

让表格行之间的边距外观的一种技巧是给它们一个与背景颜色相同的边框。这在为无法更改 html 标记的 3rd 方主题设置样式时很有用。例如：

```
tr{ 
    border: 5px solid white;
} 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2016-06-24T19:07:18.473

我放弃并插入了一个简单的 jQuery 代码，如下所示。如果你有很多像我这样的 tr，这将在每个 tr 之后添加一个 tr。演示：[https ://jsfiddle.net/acf9sph6/](https://jsfiddle.net/acf9sph6/)

```
<table>
  <tbody>
     <tr class="my-tr">
        <td>one line</td>
     </tr>
     <tr class="my-tr">
        <td>one line</td>
     </tr>
     <tr class="my-tr">
        <td>one line</td>
     </tr>
  </tbody>
</table>
<script>
$(function () {
       $("tr.my-tr").after('<tr class="tr-spacer"/>');
});
</script>
<style>
.tr-spacer
{
    height: 20px;
}
</style> 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-10-18T19:58:13.530

将 div 添加到要添加一些额外间距的单元格中：

```
<tr class="highlight">
 <td><div>Value1</div></td>
 <td><div>Value2</div></td>
</tr>
tr.highlight td div {
margin-top: 10px;
} 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-04-18T22:35:42.053

您可以通过像这样添加一个空的单元格行来在表格行之间创建空间......

```
<tr><td></td><td></td></tr> 
```

然后可以使用 CSS 来定位像这样的空单元格……</p>

```
table :empty{border:none; height:10px;} 
```

注意：只有当您的正常单元格都不会为空/空时，此技术才有效。

即使是不间断的空格也可以避免单元格被上面的 CSS 规则定位。

不用说，您可以使用包含的**height**属性将空间的高度调整为您喜欢的任何值。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-01-08T01:22:01.860

另一种可能性是使用伪选择器 :after 或 :before

```
tr.highlight td:last-child:after
{
  content: "\0a0";
  line-height: 3em;
} 
```

这可能会避免不理解伪选择器的浏览器出现问题，而且背景颜色不是问题。

然而，缺点是它在最后一个单元格之后添加了一些额外的空格。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-03-06T04:09:01.250

值得一提的是，我利用了我已经在使用 bootstrap (4.3)，因为我需要在我的行中添加边距、框阴影和边框半径，这是我不能用表格做的。

```
<div id="loop" class="table-responsive px-4">
<section>
    <div id="thead" class="row m-0">
        <div class="col"></div>
        <div class="col"></div>
        <div class="col"></div>
    </div>
    <div id="tbody" class="row m-0">
        <div class="col"></div>
        <div class="col"></div>
        <div class="col"></div>
    </div>
</section>
</div> 
```

在 css 上，我添加了几行来维护引导程序的表行为

```
@media (max-width: 800px){
    #loop{
        section{
            min-width: 700px;
        }
    }
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-08-19T13:53:04.620

在 class="highlighted" padding-bottom 之前添加此样式，显示为 inline-table*

# r - R nested for loops merge data frames

> ID：10690300
> 
> 赞同：1
> 
> 时间：2012-05-21T18:07:07.887
> 
> 标签：r, for-loop, merge, dataframe

I have a data frame in which each column is a time series of numbers (from 0 to 8) representing different behaviors during animal courtship. I would like to check if there is a pattern such as a given behavior is followed more frequently by another one. I have written a function that allow me to do calculate the frequencies of behaviours that follow a given behavior after a particular time interval:

```
> data[,3]
  [1]  1  1  1  1  7  7  3  3  7  3  1  1  8  1  3  3  3  5  1  1  4 ... 

neighbor <- function(DATA, BEHAVIOR, INTERVAL)
{
total=c(0)
tmp = data.frame(total=c(0:8),Freq=rep(0,9))
number_of_x = which(DATA == BEHAVIOR)

for(i in number_of_x){
              total = append(total,DATA[i+INTERVAL,])
}
tmp = merge(tmp,table(total), by=c("total"), all=T)
tmp[is.na(tmp)] <- 0
subset(tmp, select = ncol(tmp))
} 
```

So I run the function for say the third column, behavior 3, and next behavior in time (1) and I get what I want:

```
> neighbor(as.data.frame(data[,3], 3, 1]
Freq.y
0 0.01
1 0.71
2 0.01
3 0.21
4 0.01
5 0.04
6 0.01
7 0.02
8 0.00 
```

Now I would like to use a similar function to obtain the frequencies for the nine behaviours. Something like:

```
neighborAll <- function(DATA, INTERVAL)
{
total=c(0)
tmp = data.frame(total=c(0:8),Freq=rep(0,9))
for(a in c(0:8)){
number_of_x = which(DATA == a)
for(i in number_of_x){
      total = c(total,DATA[i+INTERVAL,])
}
tmp=merge(tmp, table(total), by = c("total"), all=T)
tmp[is.na(tmp)] <- 0
}
tmp[,3:9]
}

> neighborAll(as.data.frame(data[,3], 1) 
```

I get:

```
Error in merge.data.frame(tmp, table(total), by = c("total"), all = T) : 
  there is already a column named ‘Freq.x’ 
```

Any ideas would be welcomed. Thanks in advance, Jose

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:24:36.613

基本上你想要这个：

```
neighborAll <- function(DATA, INTERVAL, TABLE)
{
    for(i in 1:(nrow(TABLE) - 1))
    {
        neighbors <- DATA[which(DATA == i) + INTERVAL]
        tab <- table(neighbors)
        TABLE[TABLE$behavior %in% names(tab), i + 2] <- tab
    }
    return(TABLE)
}

x<-c(1, 1, 1, 1, 7, 7, 3, 3, 7, 3, 1, 1 ,8, 1, 3, 3, 3, 5, 1, 1, 4)

behavior <- 0:8
n <- length(behavior)
tmp <- matrix(nrow=n, ncol=n)
colnames(tmp) <- paste("freq", behavior, sep="")
freqtab <- data.frame(behavior, tmp)

neighborAll(x, 1, freqtab) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:55:17.583

如果不是为了获得正确的名称，这些名称中的每一个都可能是单行的。

```
neighbor <- function(DATA, BEHAVIOR, INTERVAL) {
  nbins <- 1+max(0, DATA, na.rm = TRUE)
  out <- tabulate(1+DATA[which(DATA==BEHAVIOR)+INTERVAL], nbins=nbins)
  names(out) <- 1:nbins - 1
  out
}

neighborAll <- function(DATA, INTERVAL) {
  out <- sapply(0:max(DATA, na.rm=TRUE), 
         function(BEHAVIOR) neighbor(DATA, BEHAVIOR, INTERVAL))
  colnames(out) <- 0:max(DATA, na.rm=TRUE)
  out
}

> x <- c(1, 1, 1, 1, 7, 7, 3, 3, 7, 3, 1, 1 ,8, 1, 3, 3, 3, 5, 1, 1, 4)

> neighbor(x,3,1)
0 1 2 3 4 5 6 7 8 
0 1 0 3 0 1 0 1 0 

> neighborAll(x,1)
  0 1 2 3 4 5 6 7 8
0 0 0 0 0 0 0 0 0 0
1 0 5 0 1 0 1 0 0 1
2 0 0 0 0 0 0 0 0 0
3 0 1 0 3 0 0 0 2 0
4 0 1 0 0 0 0 0 0 0
5 0 0 0 1 0 0 0 0 0
6 0 0 0 0 0 0 0 0 0
7 0 1 0 1 0 0 0 1 0
8 0 1 0 0 0 0 0 0 0 
```

# java - Reading and storing txt. file content in an array list

> ID：10690302
> 
> 赞同：0
> 
> 时间：2012-05-21T18:07:10.993
> 
> 标签：java, arrays, text

I have a .txt file and wish to read it in and store its content as an array list. Data in .txt file is like this :

```
1984      1   0.20  25.10   4.40  11.20   0.60   4.80   0.10   0.00   5.90  22.50   5.90  12.70   6.00   3.80   0.60  10.70   4.20   0.00   0.00   0.00   7.90   4.00  23.70   3.20   5.80   3.00   0.60   6.00   1.70   7.50   1.20 
```

All in one line, 1984 for year, 1 for months, other values for respective days of months. I wish to store each line (ideally, each variable) in a different slot so its easily accessible by index.

I have written this code in order to read in the file and store the variables in an array list as I am unsure of the size of the array needed.

```
import java.io.*;
import java.util.*;

public class reader {
    public static void main(String[] args) {
        try {
            BufferedReader reader = new BufferedReader(new FileReader(
                    "2RainfallDataLanc.txt"));
            String line = null;
            ArrayList<String[]> rows = new ArrayList<String[]>();
            while ((line = reader.readLine()) != null) {
                String[] row = line.split("/t");
                rows.add(row);
            }
            System.out.println(rows.toString());
        } catch (IOException e) {
        }
    }
} 
```

I receive an error message. Could someone tell me whats wrong with my code please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:31:21.720

尝试使用

```
for (String[] row : rows) {
    System.out.println(Arrays.toString(row));
} 
```

要查看输出。数组上的 ToString 不会产生任何有用的信息

假设您的数据点由空格分隔，您可以尝试使用此行解析它们

```
String[] row = line.split("\\s+"); 
```

+ 表示它前面的符号出现 1 次或多次（\s 是空格的简写，请参阅[Java 中的正则表达式](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#predef)）

# mysql - MySQL SELECT DISTINCT with multiple JOINS

> ID：10690303
> 
> 赞同：0
> 
> 时间：2012-05-21T18:07:21.173
> 
> 标签：mysql, select, join, distinct

I'm trying to SELECT, and get a unique result set, from a MySQL database, as shown below. My problem is, I think, I don't understand LEFT Joins well enough. Or, maybe I need to use a different Join approach.

Here's a description of the database.

tbAdult (Adults) have x number of tbchild (Children) , and uses a cross-ref table called tbadultchildxref. This table has an f-key to both Adult and Child. I have to use an x-ref table, because there's a many-to-many relationship between these two tables, and there's other data that's keep in the x-ref, which I have removed for simplicity.

In turn, each Child belongs to a Program (tblprogram).

Each Program has x number of Cameras (tblCamera). Again, I have to use an x-ref table between tblProgram and tblCamera due to a many-to-many relationship, and other reasons.

What I am trying to get at, is a unique list of Cameras for a given Parent.

For example, Parent 675 has three children, Child ID's 789,788, and 789\. Those three children, in turn, belong to Program ID's 4, 5, and 6\.

Program ID 4 has Camera ID's 1,2,3 Program ID 5 has Camera ID's 4,5,6 Program ID 6 has Camera ID's 1,6,7,8

What I would like the result set to be is 1,2,3,4,5,6,7,8

I have tried different combinations of SELECT DISTINCT, LEFT JOINS on the various x-ref tables, etc. but I just can't seem to get it.

My other problem, along the way, is I need to check the "Active" fields in Adult, Child, and Program to equal = 1 (true) for the result set.

Thanks in advance.

```
CREATE TABLE `tbladult` (
 `pkAdultID` int(11) NOT NULL AUTO_INCREMENT,
 `fldAdultActive` tinyint(1) DEFAULT '1',
 `fldAdultLogin` varchar(30) DEFAULT NULL,
 `fldAdultPassword` varchar(45) DEFAULT NULL,
 `fldAdultFirstName` varchar(60) DEFAULT NULL,
 `fldAdultLastName` varchar(60) DEFAULT NULL,
 PRIMARY KEY (`pkAdultID`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1;

/*Table structure for table `tblchild` */

CREATE TABLE `tblchild` (
 `pkChildID` int(11) NOT NULL AUTO_INCREMENT,
 `fldChildActive` tinyint(4) DEFAULT NULL,
 `fldChildFirstName` varchar(45) DEFAULT NULL,
 `fldChildLastName` varchar(45) DEFAULT NULL,
 `fkChildProgram` int(1) DEFAULT NULL,
 PRIMARY KEY (`pkChildID`),
 KEY `FK_tblchild` (`fkChildProgram`),
 CONSTRAINT `FK_tblchild` FOREIGN KEY (`fkChildProgram`) REFERENCES `tblprogram` (`pkProgramID`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1;

/*Table structure for table `tbladultchildxref` */

CREATE TABLE `tbladultchildxref` (
 `pkAdultChildxRefID` int(11) NOT NULL AUTO_INCREMENT,
 `fldAdultChildxRefActive` tinyint(1) DEFAULT '1',
 `fkAdultID` int(11) DEFAULT NULL,
 `fkChildID` int(11) DEFAULT NULL,
 PRIMARY KEY (`pkAdultChildxRefID`),
 KEY `FK_tbladultchildxref` (`fkAdultID`),
 KEY `FK_tbladultchildxref2` (`fkChildID`),
 CONSTRAINT `FK_tbladultchildxref` FOREIGN KEY (`fkAdultID`) REFERENCES `tbladult` (`pkAdultID`),
 CONSTRAINT `FK_tbladultchildxref2` FOREIGN KEY (`fkChildID`) REFERENCES `tblchild` (`pkChildID`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1;

/*Table structure for table `tblprogram` */

CREATE TABLE `tblprogram` (
  `pkProgramID` int(11) NOT NULL AUTO_INCREMENT,
  `fldProgamActive` tinyint(1) DEFAULT '1',
  `fldProgramName` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`pkProgramID`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=latin1;

/*Table structure for table `tblcamera` */

CREATE TABLE `tblcamera` (
 `pkCameraID` int(11) NOT NULL AUTO_INCREMENT,
 `fldCameraName` varchar(50) DEFAULT NULL,
 `fldCameralocation` varchar(50) DEFAULT NULL,
 `fldCameraURL` varchar(250) DEFAULT NULL,
 PRIMARY KEY (`pkCameraID`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=latin1;

/*Table structure for table `tblprogramcameraxref` */

CREATE TABLE `tblprogramcameraxref` (
 `pkProgramCameraXrefID` int(11) NOT NULL AUTO_INCREMENT,
 `fkProgramID` int(11) DEFAULT NULL,
 `fkCameraID` int(11) DEFAULT NULL,
 PRIMARY KEY (`pkProgramCameraXrefID`),
 KEY `FK_tblprogramcameraxref` (`fkProgramID`),
 KEY `FK_camerasforprograms` (`fkCameraID`),
 CONSTRAINT `FK_camerasforprograms` FOREIGN KEY (`fkCameraID`) REFERENCES `tblcamera`     (`pkCameraID`),
 CONSTRAINT `FK_tblprogramcameraxref` FOREIGN KEY (`fkProgramID`) REFERENCES `tblprogram` (`pkProgramID`) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:20:58.653

不需要左连接：

```
SELECT DISTINCT tblprogramcameraxref.fkcameraid
FROM tblprogramcameraxref
JOIN tblprogram ON tblprogramcameraxref.fkprogramid = tblprogram.pkprogramid
  AND tblprobram.fldProgramActive = 1
JOIN tblchild ON tblprogramcameraxref.fkprogramid = tblchild.fkchildprogram 
  AND tblchild.fldChildActive = 1
JOIN tbladultchildxref ON tblchild.pkchildid = tbladultchildxref.fkchildid
  AND tbladultchildxref.fldAdultChildxRefActive = 1
WHERE tbladultchildxref.fkadultid = 675 
```

此外，您可能需要检查`fkChildProgram int(1) DEFAULT NULL,`in tblchild - 它引用的列定义为`int(11)`

此时，您实际上不需要检查 Adult 是否处于活动状态（因为这是您开始使用的搜索条件），但如果必须 - 只需将其添加到连接列表的末尾：

```
JOIN tbladult ON tbladultchildxref.fkadultid = tbladult.pkadultid
  AND tbladult.fldAdultActive = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:22:23.977

这是一个很长的描述。如果我正确理解了这个问题，这个查询应该可以帮助你 -

```
SELECT DISTINCT pcref.fkCameraID
FROM tbladult adult,
     tblchild child,
     tbladultchildxref acref,
     tblprogram prog,
     tblcamera camera,
     tblprogramcameraxref pcref
WHERE adult.pkAdultID = 675
AND adult.fldAdultActive = TRUE
AND adult.pkAdultID = acref.fkAdultID
AND acref.fkChildID = child.pkChildID 
AND child.fldChildActive = TRUE
AND child.fkChildProgram = prog.pkProgramID 
AND prog.fldProgamActive = TRUE
AND prog.pkProgramID = pcref.fkProgramID 
```

# wpf - How to Pass a Control to a Property in WPF?

> ID：10690306
> 
> 赞同：0
> 
> 时间：2012-05-21T18:07:44.060
> 
> 标签：wpf, xaml, user-controls

I am working on a project on WPF and I have to create some user controls. Right now I am developing a navigation bar which allows me to navigate through a datagrid, so in my XAML file I need to pass the datagrid object to the navigation bar, but it is not working.

My navigation bar is the following:

```
<my:NavigationBar Data="{Binding ElementName=dataGrid1}" HorizontalAlignment="Left" Margin="6,6,0,0" Name="navigationBar1" VerticalAlignment="Top" /> 
```

And my data grid is the following:

```
<DataGrid AutoGenerateColumns="True" Margin="11,46,12,9" Name="dataGrid1" /> 
```

And my code behind my navigation bar is the following:

```
 public static readonly DependencyProperty dataProperty =
        DependencyProperty.Register("Data",
                                    typeof(DataGrid), typeof(NavigationBar));

    private DataGrid dataGrid;
    public DataGrid Data
    {
        get
        { return dataGrid; }
        set
        { dataGrid = value; }
    } 
```

As you can see, I try to send the control to the navigation bar by doing this:

```
Data="{Binding ElementName=dataGrid1}" 
```

But when I try to use the dataGrid variable in my code behind, an exception is raised because the dataGrid variable is pointing to null.

So, am I passing incorrectly the control? What am I doing wrong? Is my approach the most appropiate?

Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:17:20.093

DataGrid 旨在以人类可读的方式显示数据 - 您不应将其作为 DataSource 传递到您的控件中。尝试将导航栏绑定到与 datagrid1 相同的数据源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:24:03.303

虽然我同意 Andriy 的观点，即可能有更好的方法来处理这个问题，但我确实看到您在执行依赖属性的方式中存在问题。

DependencyProperty 的支持属性不正确。你不应该只是获取和设置一个常规值。相反，您应该使用 SetValue 和 GetValue 方法。

应该：

```
public DataGrid Data
    {
        get
        { return (DataGrid) GetValue(dataProperty); }
        set
        { SetValue(dataProperty); }
    } 
```

请参阅： http: [//www.wpftutorial.net/DependencyProperties.html](http://www.wpftutorial.net/DependencyProperties.html)

# vb6 - DAO 3.5 snapshot give me user-defined type not defined in Visual Basic 6

> ID：10690309
> 
> 赞同：0
> 
> 时间：2012-05-21T18:07:58.510
> 
> 标签：vb6, dao, snapshot

i have a problem i want to migrate an application from VB3 to VB6, but some types give me error like the snapshot type.

This is the line that give me the error

```
Dim ssTemp As snapshot 
```

And when i run the application it gives me the error: user-defined type not defined

I already added the reference: Microsoft DAO 3.51 Object Library in the project

¿What can be the cause of the error?

# fancybox - 从 Fancybox 打开 Fancybox 并关闭父级

> ID：10690314
> 
> 赞同：0
> 
> 时间：2012-05-21T18:08:34.073
> 
> 标签：fancybox

我有花式盒子的麻烦。我的产品在fancybox 中打开，我有相关产品的内容。当用户点击相关链接并在新的fancybox中打开产品时，我想关闭fancybox。

谢谢你们的帮助。但它不起作用:(。产品在没有花式框的窗口中打开。

```
 $(document).ready(function() {
$("a#fancy1").fancybox({
        'speedIn'           : 600, 
        'speedOut'          : 200, 
        'overlayShow'       : false,
        'autoDimensions'    : false,
        'width'             : 620,
        'height'            : 'auto',
        'overlayShow'       : true,
        'overlayOpacity'    : 0.8,
        'overlayColor'      : '#ccc'
});
$("a#fancy2").fancybox({
        'speedIn'           : 600, 
        'speedOut'          : 200, 
        'overlayShow'       : false,
        'autoDimensions'    : false,
        'width'             : 620,
        'height'            : 'auto',
        'overlayShow'       : true,
        'overlayOpacity'    : 0.8,
        'overlayColor'      : '#ccc'
}); 
}); 
```

这就是我所拥有的。点击产品打开fancybox“fancy1”。但是在fancybox链接中单击会打开相关产品而不用花哨，我得到：

( **$ 未定义 $(function(){$('#form_2538').validate();});** ) ！

链接到以这种方式完成的产品

```
<a id="fancy1" href="product_url" > 
```

以这种方式链接到相关的

```
<a id="fancy2" href="product_url" > 
```

我已经为此苦苦挣扎了一段时间:(

我已经解决了！！！！！！！！！！！！！！！！！！！

我已经解决了问题！！

请看下文！

```
 $(document).ready(function() {

$("a.fancy1").live("hover",
        function()
        {$("a.fancy1").fancybox({
        'speedIn'           : 600, 
        'speedOut'          : 200, 
        'overlayShow'       : false,
        'autoDimensions'    : false,
        'width'             : 620,
        'height'            : 'auto',
        'overlayShow'       : true,
        'overlayOpacity'    : 0.8,
        'overlayColor'      : '#ccc'

        });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:23:10.217

```
<a href="product_url" id="fancy2">Link</a>

<script>
$('#fancy2').click(function()
{
    $(this).parent().fancybox.close();
});
</script> 
```

或者

```
<script>
$('#fancy2').click(function()
{
    $('a#fancy1').trigger('click');
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T23:43:12.170

您必须分别为每个链接绑定fancybox，例如

```
$("a#fancy1").fancybox({
// options
});
$("a#fancy2").fancybox({
// options
}); 
```

请注意，第二个脚本不在第一个（`onClosed`选项）内。

打开第一个fancybox，如：

```
<a id="fancy1" href="{link to product}">open product</a> 
```

然后在打开的内容中，您应该有一个链接，例如

```
<a id="fancy2" href="{target to related product}">see related product</a> 
```

您实际上不必关闭第一个fancybox，从它内部链接到第二个fancybox 将关闭它。

# android - How to apply Theme-Specific Styles?

> ID：10690318
> 
> 赞同：2
> 
> 时间：2012-05-21T18:08:45.853
> 
> 标签：android, styles, themes

after searching here for some hours and testing this and that, i could neither solve my problem, nor find any question/answers here that apply to my problem - but maybe i only use the wrong search terms - so i'm thankful for any hints in the right direction!

Basically it's about a app using 2 Themes (Dark & Light), where some TextViews show a status - status can be On or Off, and for better recognition of the state, the color of the text should reflect the state: Red for Off and Green for On.

When i did not use any themes or styles, i simply used the TextView's .setColor(#ffff0000) for the red color, and so on...

then i started to make use of the Dark / Light Themes for better visibility in different situations - e.g. outdoors black text on white background is easier to read.

therefore i've defined my 2 themes, overwriting the textAppearance:

```
<style name="Theme.MyApp" parent="Theme.Sherlock">
...
<item name="android:textAppearance">@style/TextNormal</item>
...
</style>

<style name="Theme.MyApp.Light" parent="Theme.Sherlock.Light">
...
 <item name="android:textAppearance">@style/TextNormalLight</item>
...

<style name="TextNormal">
    <item name="android:textColor">#ffffffff</item>
</style>

<style name="TextNormalLight">
    <item name="android:textColor">#ff000000</item>
</style> 
```

This works fine, and the "normal" textviews are displayed in the correct color depending on the theme. So far so good!

Instead of using TextView's setColor, i switched to use .setTextAppearance tv.setTextAppearance(getSherlockActivity(), R.style.TextRed);

and defined some styles (only pasting one, the others are TextGreen,...):

```
<style name="TextRed">
    <item name="android:textColor">#ffff0000</item>
</style> 
```

this also works fine!

and to finally get to my problem:

now i want to have different Colors for "Red" depending on the theme...

so i keep the TextRed style, and add a style to use in Light theme, for testing, i just made a weird color to see if it's working:

```
<style name="TextRedLight">
    <item name="android:textColor">#ffffff00</item>
</style> 
```

this also work's if i put a switch-statement around the TextView's .setTextAppearance, and select the correct style depending on the selected theme - pseudo code:

```
switch (currentheme) {
   case Dark: tv.setTextAppearance(... R.style.TextRed); break;
   case Light: tv.setTextAppearance(... R.style.TextRedLight); break;
} 
```

and the challenge / question now is - how can i avoid the switch statement?

When refering to styles in layout.xml files, we can use the ? references to honour the current theme... (instead of "@")

in this case, i need to set the style at run time *and* honour the theme: so it has to be done by code and not by xml - but setTextAppearance does only accept a id for the style, not a theme-wildcard + id...

and this i where i'm stuck... yes, i could wrap a class around this and keep it to one line in the code and "hide" the theme detection/switch statement in this class, but on the other hand - Android's complex style/theming architecture should have a solution for this problem as well, shouldn't it...?

Using themes and styles seems a bit senseless as long as needing helperclasses or switch/if-statements to get some enhanced stuff done...

Thanks for any hints / ideas!!!

**edit 1 - after Tomáš answer:** updated style.xml:

```
<style name="TextNormal" parent="Theme.ARMoDroid">
    <item name="android:textColor">#ffffffff</item>
</style>
 <style name="TextNormal" parent="Theme.ARMoDroid.Light">
    <item name="android:textColor">#ff000000</item>
</style>
<style name="TextRed" parent="Theme.ARMoDroid">
    <item name="android:textColor">#ffff0000</item>
</style>
 <style name="TextRed" parent="Theme.ARMoDroid.Light">
    <item name="android:textColor">#ffffff00</item>
</style> 
```

The TextViews with TextNormal assigned in the layout.xml, or when referencing TextNormal from both themes with:

```
<item name="android:textAppearance">@style/TextNormal</item> 
```

works as before (with this different approach), also when using red text.

But the initial problem still persists: when i want to change (at runtime) the color of the text to red, using

```
tv.setTextAppearance(getActivity(),R.style.TextRed) 
```

it always uses the last definition of TextRed - so with above definition, the text will be colored #ffffff00 -> in yellow. when i swap the order of the 2 TextRed definitions, it's using the last definition - #ffff0000 - and the text is red.

So when setting the style at runtime, setTextAppearance is not Theme-Aware - it does not distinguish between the current theme and the 2 defined styles.

we can define one style that has different textcolor-values depending on the theme, and depending on the selected theme it's colored correctly - as long as it's style is assigned in the layout.xml, or the theme set's this style as default.

but when switching the styles dynamically in code at runtime, we still need something like the switch-statement above - detect which theme is selected and depending on the theme, apply a different style to the textview.

what i want to achieve is, that it should pick the correct "TextRed" style depending on the current theme. so no need for hardcoding theme awareness... once a new theme is added the mentioned switch-statement has to be updated as well...

**edit 2: my current "solution"**

i thought i might also post the current solution, but that's not really a nice solution - though it's working - but it's a custom code for each style and with another theme it's even more code...

The helper function looks like:

```
 public static int getThemedStyle(int normalStyle) {
     if (prefs==null) { prefs = PreferenceManager.getDefaultSharedPreferences(appContext); }
     int theme = Integer.valueOf(prefs.getString("GUI_Theme","0"));
     if (theme==0) return normalStyle; //dark theme
     else { //return correct  Light-Theme Style
         switch (normalStyle) {
            case R.style.TextNormal: return R.style.TextNormalLight;
            case R.style.TextRed: return R.style.TextRedLight;
            case R.style.TextOrange: return R.style.TextOrangeLight;
            case R.style.TextGreen: return R.style.TextGreenLight;
            case R.style.TextYellow: return R.style.TextYellowLight;
            case R.style.TextBlue: return R.style.TextBlueLight;
            default: return normalStyle;
         } //switch
     } //else theme==0
 } //getThemedStyle 
```

in the fragment i cache the style-reference by calling above function on onCreate:

```
styleRed = preferences.getThemedStyle(R.style.TextRed);
styleOrange = preferences.getThemedStyle(R.style.TextOrange);
styleGreen = preferences.getThemedStyle(R.style.TextGreen); 
```

and finally assign the style using:

```
tv.setTextAppearance(getSherlockActivity(), styleRed); 
```

working, but complicated and if that's the way it's itended to be, it's sad... ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:55:27.060

你试过这个吗？

```
<style name="Theme.MyApp" parent="Theme.Sherlock">
...
</style>

<style name="Theme.MyApp.Light" parent="Theme.Sherlock.Light">
...
</style>

<style name="TextNormal" parent="Theme.MyApp">
    <item name="android:textColor">#ffffffff</item>
</style>

<style name="TextNormal" parent="Theme.MyApp.Light">
    <item name="android:textColor">#ff000000</item>
</style> 
```

layout.xml 中的参考是：

```
<TextView style="@style/TextNormal" .../> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T18:07:45.693

回答我自己的问题：

[发现这个](https://stackoverflow.com/questions/8757764/settextappearance-through-code-referencing-custom-attribute)

所以代替我的 - 工作 - switchstatement，仍然需要一些代码，但它至少不需要对主题 ID 进行硬编码，... -> 用这个片段更新了我的 getThemedStyle

```
public static int getThemedStyle(int normalStyle) {
 Resources.Theme theme = appContext.getTheme();
 TypedValue styleID = new TypedValue();
 if (theme.resolveAttribute(R.attr.TextAppRed, styleID, true)) return styleID.data;
  else return normalStyle;
} //getThemedStyle 
```

# parsing - html解析 - 替换换行符

> ID：10690319
> 
> 赞同：1
> 
> 时间：2012-05-21T18:08:58.083
> 
> 标签：parsing, html-parsing

我创建了一个简单的 html 解析代码，它从给定的 Xpath 获取文本内容。

我的代码：

```
XPathFactory xFactory = XPathFactory.newInstance();
CleanerProperties props  = new CleanerProperties();
props.setNamespacesAware(false);    
XPath xpathi = xFactory.newXPath();
HtmlCleaner cleaner = new HtmlCleaner(props);
TagNode node = cleaner.clean(rawContent);
org.w3c.dom.Document doc = new DomSerializer(props).createDOM(node);
Object[] obj = xpathi.compile("//div[@class='answer']").evaluate(doc, XPathConstants.NODESET); 
```

在这个我得到的 obj 填充了预期的答案。但是答案中的 \n 字符被替换为空字符串。例如）如果答案是这样的，一二三

我要一二三 我要一二三

为此，我需要在 CleanerProperties 中设置任何属性吗？

任何建议请..

# c++ - 从 void* 转换为 char*

> ID：10690320
> 
> 赞同：1
> 
> 时间：2012-05-21T18:09:01.390
> 
> 标签：c++, c

```
#include <stdio.h>
#include <stdlib.h>

int main() {
    void *malloc(size_t size);
    char *ptr, *retval;
    ptr = (char *)calloc(10, sizeof(char));

    if (ptr == NULL)
        printf("calloc failed\n");
    else
        printf("calloc successful\n");

    retval = realloc(ptr, 5);

    if (retval == NULL)
        printf("realloc failed\n");
    else
        printf("realloc successful\n");

    free(ptr);
    free(retval);
} 
```

这是我的代码，错误出现在第 14 行，它说

> 从“void*”到“char*”的无效转换

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T18:12:23.340

您可以像使用 malloc 一样将 realloc 的结果转换为 (char*)。

```
retval = (char*)realloc(ptr, 5); 
```

具有讽刺意味的是，尽管您编写的是完全合法的“C”代码......只是不是您需要强制转换的 C++。因此，您也可以尝试将编译器设置为将代码编译为“C”，因为您没有执行任何 C++，这同样可以解决问题。也就是说，上面的修改也是完全合法的 C ......所以可以在 C++ 和 C 下编译。

编辑：正如softy正确指出你重新分配ptr并将指针位置存储到retval中，这意味着ptr可能指向无效内存，你不应该释放它。最好的情况是两次释放相同的内存，最坏的情况是在已经释放的内存上调用 free（通过 realloc）。无论哪种方式都不好（tm）。实际上，您正在调用一些严重的“未定义行为”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:41:12.593

其他人注意到您的 C 代码正在编译为 C++ 代码。强制转换在 C 中是不必要的，但在 C++ 中是必需的。在 C++ 中，您应该使用向量（或字符串）。

以下是对您的代码的一些观察：

1.  不要重新声明 malloc。包括 stdlib.h 将为您做到这一点。幸好你已经成功地复制了它的声明，所以它只是多余的（并且让其他阅读代码的人感到困惑）。如果你的声明错误，你有未定义的行为。

2.  如果 realloc 成功，不要释放 'ptr'。

3.  有些人可能会指出，在某些深奥的系统中，calloc 可能无法达到您的预期（特别是对于指针和浮点类型）。考虑到无论如何您都希望用合适的值初始化动态分配的空间，调用 calloc 比调用 malloc 是多余的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T18:22:37.077

您不能两次释放指针。这里 retval 和 ptr 都指向同一个位置，添加此代码并在免费调用之前检查：

```
printf("%p \n ",ptr);
printf("%p \n",retval); 
```

realloc 缩小了大小，但指针位置保持不变。你也可以试试这个：

```
if(ptr == retval)

/* delete either ptr or retval - just for sake of this programm , Idealy you shouldnt free the the pointer like this as Rightly Suggested by **Goz** in C++/c*/ 
```

只是为了让它工作。否则它可以通过 gcc 很好地编译，但是如果你运行它会给出一个脏堆栈跟踪，因为你试图释放相同的指针两次。内存分配函数的底层中断调用可能会也可能不会分配相同的指向它的指针。如果您将尺寸扩大到 30 或 50，它可能会给您不同的指针。

rgds，软软的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T18:31:06.917

如果要编译，请使用 C 编译。看起来好像您正在使用 C++ 编译。它是有效的 C 但不是有效的 C++。在大多数使用小写 .c 扩展名的编译器中，编译器会自动使用 C 编译。.cpp 将导致 C++ 编译，.C（大写）也可能导致 C++ 编译（例如在 gcc 中）。

# c++ - c ++：switch语句在右括号前缺少分号

> ID：10690328
> 
> 赞同：3
> 
> 时间：2012-05-21T18:09:26.997
> 
> 标签：c++, visual-studio, compiler-errors, switch-statement

为了将来的读者和我自己以后的理智，我想绝对清楚地`switch`说明，不能省略没有`default`案例（由于涵盖了所有案例）或`if-elseif-else`与不应做任何事情的最终 else连续的语句并包含对此的评论（参见示例）。

但是，每当我`default`在语句中包含 case`switch`并将其留空时，我必须在`default`case 中放置一个分号，否则会出现编译器错误：“ Line [Line of closing Bracket of switch statement]`missing ';' 在 '}'" 发生之前。***为什么？！***

**示例：生成编译器错误**

```
switch(direction) {
    case MOVE_UP:
    //...
    break;
    case MOVE_RIGHT:
    //...
    break;
    case MOVE_DOWN:
    //...
    break;
    case MOVE_LEFT:
    //...
    break;
    default:
        /* DO NOTHING */
} 
```

**示例：不生成编译器错误**

```
switch(direction) {
    case MOVE_UP:
    //...
    break;
    case MOVE_RIGHT:
    //...
    break;
    case MOVE_DOWN:
    //...
    break;
    case MOVE_LEFT:
    //...
    break;
    default:
        /* DO NOTHING */;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T18:11:49.817

因为您需要为您的`default`案件提供一份声明。分号是一个空语句。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-21T18:20:57.250

C++03 中的 6.1/1 给出了标记语句的语法：

```
*标记语句*：
    *标识符*：*语句*
    case*常量表达式*：*语句*
    默认值：*语句*

```

C++11 是一样的，只是你可以在标签之前有属性。

零长度的标记序列不是 C++ 中的*语句*，因此`default:`它本身不是*标记语句*。

也就是说，我不知道为什么*标记语句*的语法不允许的动机是什么。如果是这样，那么如果您写了，则该*语句*是否属于，或者是否没有自己的*语句*，但紧随其后，则会出现语法歧义。仍然毫无疑问它*意味着*什么，但也许人们认为它会弄乱人们的解析器。`default: *statement[opt]*``default : case 1: break;``case 1: break;`*`default:``default:`*

# windows - 如何获取内核模块 nt 和 win32k 的地址？

> ID：10690330
> 
> 赞同：8
> 
> 时间：2012-05-21T18:09:28.013
> 
> 标签：windows, windows-server-2008, windbg, etw, windows-kernel

我需要知道加载 nt 和 win32k 的基地址。我可以通过在启用内核调试的情况下启动系统、启动内核调试会话并运行命令`lm`来获取已加载模块的列表来查找此信息。

我想要做的是以编程方式确定这两个模块的加载位置，而无需启动到调试模式并使用内核调试器。我需要用于解析 Windows 事件跟踪日志文件中的系统调用的基地址。

我正在使用的系统正在运行 Windows Server 2008 R2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T19:30:02.170

加载的内核模块和基地址（包括）的列表存储在符号`ntoskrnl`指向的列表中。`PsLoadedModuleList`或`ZwQuerySystemInformation(SystemModuleInformation)`改为使用。

有关详细信息，请参阅[http://alter.org.ua/docs/nt_kernel/procaddr/](http://alter.org.ua/docs/nt_kernel/procaddr/)

# c# - WPF 弹出窗口和 UI 线程

> ID：10690331
> 
> 赞同：0
> 
> 时间：2012-05-21T18:09:28.730
> 
> 标签：c#, wpf, xaml, popup

**一些背景...**
我试图在单击按钮时提供视觉反馈...基本上是加载弹出消息（使用 wpf 弹出控件）。问题是......因为我在 UI 线程上，并且在同步代码中，按钮单击和逻辑发生，然后弹出窗口出现。我希望弹出窗口显示在按钮单击，运行一些代码，然后消失（弹出窗口应该在代码运行时出现）。

我意识到我可以通过线程来完成它，但现在这不是一个选择。我有时间限制，没有时间“以正确的方式”修复应用程序。

**在我正常抱怨做“正确”之前......**

*   我没有编写应用程序，只是负责在不进行全面检查的情况下尝试提高性能（和/或性能**感知**）。
*   在某个时候，我希望我可以重新设计这个应用程序，现在只需要稍加调整即可。
*   没有 ViewModel ......代码真的，真的耦合到 UI。（就像我说的，我没有正确的应用程序）
*   由于各种原因，我不能在这种情况下使用线程，而不是打破应用程序中的太多其他部分和我的时间限制。

**那么在这种情况下有什么方法可以实现这一点（顺便说一句......没有 ViewModel 并且我现在无法创建一个，因为紧密的 Logic-UI 耦合）？**

**弹出控件**

```
<Popup Name="popLoading" Placement="Center">
            <Border CornerRadius="10" Background="#ffffff">
                <Grid Width="400" Height="200">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Image Grid.Column="0" Name="imgLoading" Source="/foo/Images/loading.png"  />
                    <TextBlock Name="txtLoading" Text="Retreiving data..."/>
                </Grid>
            </Border>
        </Popup> 
```

**按钮点击**

```
private void MyButton_Click(object sender, RoutedEventArgs e)
    {
        popLoading.IsOpen = true;

        //Do Some Stuff hopefully popup is showing up on the screen. 

        popLoading.IsOpen = false;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:15:36.130

为任何长时间运行的进程占用 UI创建一个[后台工作人员](http://www.dotnetperls.com/backgroundworker)真的很麻烦吗？

我在 WinForms 中使用的另一个 UI 技巧是在底部有一个 StatusBar，它会在加载某些内容时显示（回到那个我会做这个程序做错的事情的日子）

# tridion - 在 Tridon 中删除发布目标的步骤是什么？

> ID：10690335
> 
> 赞同：7
> 
> 时间：2012-05-21T18:09:47.960
> 
> 标签：tridion

我们正在尝试取消发布页面，但它们出现“此项目正在使用中”的错误。当我们调查它时，它无法从不再使用的开发人员的本地计算机上取消发布。我们使用“本地文件系统”在他的计算机上创建了发布目标和目标类型。

我们希望取消发布内容并删除此目标。如何删除该发布目标和目标类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T18:22:28.127

您可以将该目标指向一个空的 Deployer，然后发出取消发布指令。Tridion 将报告该操作成功（意思是：没有失败），然后您就可以删除目标。

[编辑：更多内容] 您今天遇到的问题是您的发布目标使用了一个不再存在的目标。该目的地的“远端”是开发人员机器上的一个文件系统，而 Content Delivery Deployer 正在开发人员的机器上运行，监控该位置并成功部署内容。

现在您想从中取消发布内容，但您不能，因为它不再存在（目的地）。因此，您通过将目标更改为指向**确实**存在的目标并告诉 Tridion 取消发布它来欺骗 Tridion。Tridion 的发布关系始终在内容（页面、组件等）和发布目标之间——而不是给定发布目标的实际目的地。因此，通过从链接到目标的另一个目标/部署程序取消发布，您实际上是在告诉 Tridion 内容已从该目标中删除 - 现在可以删除。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:24:47.583

另一种方法是使用旧 TOM 的 SetPublishedTo() 方法告诉 Tridion 项目不再发布。（我认为新 API 中没有等价物——有人知道吗？）

另一件可能有用的事情是尝试使用数据库中的存储过程来查找使用发布目标的位置。换句话说，发布目标确实有完整的“在哪里使用”的支持；它只是没有出现在 API 中。如果您能弄清楚如何调用正确的存储过程，它可能会为您省去一些麻烦，这当然是一个只读操作，因此您不会损坏数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:48:28.187

哪个 Tridion 版本？在 Tridion2009 SP1 之前，有这个超级方便的页面取消发布 PowerTool，它只会将所有页面设置为未发布状态。不清理它，但可以解决那些烦人的“此项目正在使用”错误

# javascript - 如何使用 requireJs 缓存 fetch 调用的结果？

> ID：10690343
> 
> 赞同：1
> 
> 时间：2012-05-21T18:10:05.603
> 
> 标签：javascript, backbone.js, requirejs

我有几个视图，其渲染结果取决于同一个集合，然后是其他模型或集合：

示例：

```
View1 -> model1, commonCollection
View2 -> collection2, commonCollection
View3 -> model3, commonCollection 
```

现在，为了解决这个问题，我为每个视图制作了 commonCollection.fetch ……在渲染页面之前，我等待每个模型/集合都准备好用于每个视图，如[本答案](https://stackoverflow.com/questions/10685673/one-view-connected-to-multiple-models/10688489#10688489)中所述。
但是由于 commonCollection 的结果是相同的，我想缓存结果以将其用于其他视图。

如何在不使用全局变量的情况下缓存 commonCollection 的结果？我正在使用 RequireJs

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:50:09.393

你不能只覆盖`fetch`公共集合来进行缓存吗？

```
Backbone.Collection.extend({
   ...
   fetch: function(options) {
      if (alreadyUpdated) {
         // do nothing
      } else {
          return Backbone.Collection.prototype.fetch.apply(this, arguments);
      }
   }
   ...
}); 
```

这是一个更完整示例的小提琴：http: [//jsfiddle.net/4A8Wu/2/](http://jsfiddle.net/4A8Wu/2/)

# c# - 在 switch 语句中使用对象的字符串变量

> ID：10690345
> 
> 赞同：0
> 
> 时间：2012-05-21T18:10:09.940
> 
> 标签：c#

我试图弄清楚为什么会出现此错误：

```
 switch (token.type.GetName()) 
    {
        case PascalTokenType.BEGIN.name: // ERROR: A CONSTANT VALUE IS EXPECTED
        {
            CompoundStatementParser compoundParser = new CompoundStatementParser(this);
            statementNode = compoundParser.parse(token);
            break;
        }
    } 
```

`GetName()`并且`name`都返回字符串。这是对象的样子：

```
 public static readonly PascalTokenType BEGIN = new PascalTokenType("BEGIN"); 
```

我知道我可以通过将其更改为`if`语句来解决此问题，但是当它完成后，我将至少有 20 个条件，所以我宁愿不这样做。我想这是因为`BEGIN.name`直到运行时才分配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:11:49.143

是的，你有正确的想法。问题是这个值可能会在运行时发生变化，这是编译器不喜欢的。

# php - JavaScript 将多个 jpeg 从 Flash (AS3) 传递到 PHP

> ID：10690348
> 
> 赞同：0
> 
> 时间：2012-05-21T18:10:18.617
> 
> 标签：php, javascript, actionscript-3, flash, image-uploading

我有以下 AS3 代码，可根据用户请求将一堆位图屏幕截图转换为 jepg。（sourceArray 存储原始位图）。

```
for (var i:int=0; i<sourceArray.length; i++)
    {
    var jpgEncoder:JPGEncoder = new JPGEncoder(10);
    var jpgStream:ByteArray = jpgEncoder.encode(sourceArray[i]);
    var header:URLRequestHeader = new URLRequestHeader("Content-type", "application/octet-stream");     
    var jpgURLRequest:String = new String("videoprocess.php?name=drawing" + i +".jpg");
    jpgURLRequest.requestHeaders.push(header);
    jpgURLRequest.method = URLRequestMethod.POST;
    jpgURLRequest.data = jpgStream;
    ExternalInterface.call("openWindow", jpgURLRequest ); 
```

我保存这些 jpeg 的 PHP 代码如下：

```
 <?php
 if ( isset ( $GLOBALS["HTTP_RAW_POST_DATA"] ) && isset ( $_GET['name'] ) ) {

//the image file name
$fileName = time();

// get the binary stream
$im = $GLOBALS["HTTP_RAW_POST_DATA"];

//write it
$fp = fopen($fileName, 'wb');
fwrite($fp, $im);
fclose($fp);
}
?> 
```

使用上面的 externalinterface.call 调用，我试图将单个 jpeg 传递给 PHP 文件，以便在循环的每一轮中保存，但到目前为止，我一直无法将 jpgURLRequest 作为对象传递。有没有人愿意阐明将 jpeg 从 AS3 传递到 PHP 所需的 JS 代码？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:49:52.137

我不明白您为什么要使用 Javascript 将二进制数据从 Flash 传递到 PHP。[您可以使用URLLoader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)和[URLRequest](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html)从 as3 执行此操作，并将方法设置为“发布”。您应该添加的代码如下所示：

```
var urlRequest = new URLRequest(jpgURLRequest);
urlRequest.method = URLRequestMethod.POST;
urlRequest.data = jpgStream;
urlRequest.requestHeaders = new Array(header);
var urlLoader = new URLLoader();
urlLoader.load(urlRequest);
//depending if you want to do something with the response you can add event listeners 
```

希望能帮助到你。

**更新** 如果您想按顺序发送请求，您应该首先定义一个全局变量：`var index:int=0`并定义一个函数：

```
function loadSource() {
var jpgEncoder:JPGEncoder = new JPGEncoder(10);
var jpgStream:ByteArray = jpgEncoder.encode(sourceArray[index]);
//... rest of your code here  
var urlRequest = new URLRequest(jpgURLRequest);
urlRequest.method = URLRequestMethod.POST;
urlRequest.data = jpgStream;
urlRequest.requestHeaders = new Array(header);
var urlLoader = new URLLoader();
urlLoader.load(urlRequest);
urlLoader.addEventListener(Event.COMPLETE,completeEventListener);}

function completeEventListener(e:Event)
{
  index ++;
  if (index<sourceArray.length) loadSource();} 
```

# java - 正则表达式：重复具体数字变量与重复任何数字变量（Java）

> ID：10690356
> 
> 赞同：0
> 
> 时间：2012-05-21T18:10:53.623
> 
> 标签：java, regex, string, pattern-matching

myString.match("[\d]*") 为 12345 和 77777 提供 true

但我正在寻找的内容对于 12345 来说是错误的，对于 7777 来说是真的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:14:02.277

```
(\d)\1*\D 
```

将测试重复的相同数字，然后是非数字。the`\1`指的`(...)`是与第一个数字匹配的值。

（不知道你最后想要什么 - 你可能想要交换`$`（行尾）`\D`- 但你需要一些东西让 778 失败）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:53:18.967

Andrew Cooke 提出的解决方案是一个很好的开始——他捕捉重复数字的表达方式非常有效。尽管如此，为了发现只有重复的数字，我相信您需要使用边界匹配器，如 [http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html](http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html)中所述。

我创建了一小段代码，向您展示如何执行它：

```
public static void main(String[] args) {
  Pattern pattern = Pattern.compile("^(\\d)\\1*$");
  String[] testArray = {"1111", "2111", "1111 ", "1111 2", "1234", "9999"};
  for (int i=0; i&lt;teste.length; i++) {
     Matcher matcher = pattern.matcher(testArray[i]);
     boolean found=false;
     while (matcher.find()) {
         System.out.println("Text " + matcher.group() + " found at " + matcher.start()+" ending at index "+matcher.end());
         found=true;
     }
     if (!found) {
        System.out.println("not found for "+testArray[i]);
     }
  }
} 
```

我希望它有所帮助。

# jquery - jQuery Mobile 单选按钮（显示/隐藏 div）？

> ID：10690361
> 
> 赞同：0
> 
> 时间：2012-05-21T18:11:17.553
> 
> 标签：jquery, jquery-mobile

有没有一种简单的方法可以将锚链接附加到单选按钮或显示/隐藏 div...我目前必须在页面上添加单选选项按钮，并且我希望 a 中的文本在`div`备用选项为选择。这是我目前正在尝试的。到目前为止没有运气

```
<style type="text/css">
    .nutwork { display: none; }
</style>
<script type="text/javascript">
    $(document).ready(function(){ 
        $("input[name=nutwork]").change(function() {
            var test = $(this).val();
            $(".nutwork").hide();
            $("#"+test).show();
        }); 
    });
</script>
    <div data-role="fieldcontain" class="no-field-separator">
        <div class="center_group">
         <fieldset data-role="controlgroup" data-type="horizontal">                  
           <input type="radio" name="nutwork" id="radio1" value="radio1" checked="checked"/>
           <label for="radio1">
            Item 1
           </label>
           <input type="radio" name="nutwork" id="radio2" value="radio2"  />
           <label for="radio2">
            Item 2
           </label>
         </fieldset>
        </div>
     </div>

<div id="radio1" class="nutwork">
Test
</div>

<div id="radio2" class="nutwork">
Test item 2
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:15:27.723

好的，在您更新之后，似乎唯一的问题在于具有相同 ID 的多个元素。请考虑元素的 ID*应该是*唯一的。

`id`从单选按钮中删除属性或更改其值并检查其工作方式。

**演示：http:** [//jsfiddle.net/g4v3P/](http://jsfiddle.net/g4v3P/)

# java - 如何在 android 中获得两个日期之间的差异？，尝试所有事情并发布

> ID：10690370
> 
> 赞同：65
> 
> 时间：2012-05-21T18:11:57.020
> 
> 标签：java, android, date, time

我在这里看到了所有的帖子，但我仍然无法弄清楚两个安卓日期之间的差异。

这就是我所做的：

```
long diff = date1.getTime() - date2.getTime();
Date diffDate = new Date(diff); 
```

我得到：日期是 1970 年 1 月 1 日，两个小时内的时间总是更长……我来自以色列，所以两个小时是 timeOffset。

我怎样才能得到正常的差异？？？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-05-21T18:24:16.067

你接近正确的答案，你得到了这两个日期之间的毫秒差异，但是当你试图从这个差异中构造一个日期时，它假设你想要创建一个新的`Date`对象，该差异值作为它的纪元时间。如果您正在寻找以小时为单位的时间，那么您只需要对其进行一些基本的算术运算`diff`即可获得不同的时间部分。

爪哇：

```
long diff = date1.getTime() - date2.getTime();
long seconds = diff / 1000;
long minutes = seconds / 60;
long hours = minutes / 60;
long days = hours / 24; 
```

科特林：

```
val diff: Long = date1.getTime() - date2.getTime()
val seconds = diff / 1000
val minutes = seconds / 60
val hours = minutes / 60
val days = hours / 24 
```

所有这些数学运算都将简单地进行整数运算，因此它将截断任何小数点

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2016-02-09T13:51:19.703

```
 long diffInMillisec = date1.getTime() - date2.getTime();

    long diffInDays = TimeUnit.MILLISECONDS.toDays(diffInMillisec);
    long diffInHours = TimeUnit.MILLISECONDS.toHours(diffInMillisec);
    long diffInMin = TimeUnit.MILLISECONDS.toMinutes(diffInMillisec);
    long diffInSec = TimeUnit.MILLISECONDS.toSeconds(diffInMillisec); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-06-18T07:10:09.973

**一些补充：** 在这里我将字符串转换为日期，然后比较当前时间。

```
String toyBornTime = "2014-06-18 12:56:50";
    SimpleDateFormat dateFormat = new SimpleDateFormat(
            "yyyy-MM-dd HH:mm:ss");

    try {

        Date oldDate = dateFormat.parse(toyBornTime);
        System.out.println(oldDate);

        Date currentDate = new Date();

        long diff = currentDate.getTime() - oldDate.getTime();
        long seconds = diff / 1000;
        long minutes = seconds / 60;
        long hours = minutes / 60;
        long days = hours / 24;

        if (oldDate.before(currentDate)) {

            Log.e("oldDate", "is previous date");
            Log.e("Difference: ", " seconds: " + seconds + " minutes: " + minutes
                    + " hours: " + hours + " days: " + days);

        }

        // Log.e("toyBornTime", "" + toyBornTime);

    } catch (ParseException e) {

        e.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-01-30T20:28:12.487

## java.time.Duration

使用`java.time.Duration`：

```
 Duration diff = Duration.between(instant2, instant1);
    System.out.println(diff); 
```

这将打印类似

```
PT109H27M21S 
```

这意味着 109 小时 27 分 21 秒的时间段。如果你想要一些更易读的东西——我会先给出 Java 9 版本，它最简单：

```
 String formattedDiff = String.format(Locale.ENGLISH,
            "%d days %d hours %d minutes %d seconds",
            diff.toDays(), diff.toHoursPart(), diff.toMinutesPart(), diff.toSecondsPart());
    System.out.println(formattedDiff); 
```

现在我们得到

```
4 days 13 hours 27 minutes 21 seconds 
```

该类`Duration`是`java.time`现代 Java 日期和时间 API 的一部分。这捆绑在较新的 Android 设备上。在旧设备上，获取 ThreeTenABP 并将其添加到您的项目中，并确保`org.threeten.bp.Duration`从同一个包中导入您可能需要的其他日期时间类。

假设您还没有获得 Java 9 版本，您可以依次减去较大的单位以获得较小的单位：

```
 long days = diff.toDays();
    diff = diff.minusDays(days);
    long hours = diff.toHours();
    diff = diff.minusHours(hours);
    long minutes = diff.toMinutes();
    diff = diff.minusMinutes(minutes);
    long seconds = diff.toSeconds(); 
```

然后你可以像上面那样格式化四个变量。

## 你做错了什么？

A`Date`代表一个时间点。它从来都不是用来代表时间量、持续时间的，也不适合它。试图使这项工作*充其量*只会导致混乱和难以维护的代码。你不想这样，所以请不要。

## 问题：java.time 不需要 Android API 级别 26 吗？

java.time 在较旧和较新的 Android 设备上都能很好地工作。它只需要至少**Java 6**。

*   在 Java 8 及更高版本以及更新的 Android 设备（从 API 级别 26 开始）中，现代 API 是内置的。
*   在非 Android Java 6 和 7 中获得 ThreeTen Backport，现代类的后向端口（ThreeTen 用于 JSR 310；请参阅底部的链接）。
*   在（较旧的）Android 上使用 ThreeTen Backport 的 Android 版本。它被称为 ThreeTenABP。并确保从`org.threeten.bp`子包中导入日期和时间类。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)，解释如何使用`java.time`。
*   [ThreeTen Backport 项目](http://www.threeten.org/threetenbp/)，向后移植`java.time`到 Java 6 和 7
*   [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) , ThreeTen Backport 的 Android 版
*   [问题：如何在Android项目中使用ThreeTenABP](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)，有非常详尽的解释。
*   [Java 规范请求 (JSR) 310](https://jcp.org/en/jsr/detail?id=310)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-04-12T12:44:23.490

[使用Instant](https://developer.android.com/reference/java/time/Instant)怎么样：

```
val instant1 = now()
val instant2 = now()
val diff: Duration = Duration.between(instant1, instant2)
val minutes = diff.toMinutes() 
```

您甚至可以使用 Instant1.toString() 保存 Instant 并使用 parse(string) 解析该字符串。

如果您需要支持 Android API 级别 < 26，只需 在您的项目中添加[Java 8+ API 脱糖支持。](https://developer.android.com/studio/write/java8-support#library-desugaring)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-11T13:24:07.870

如果你使用 Kotlin 语言进行 Android 开发，你可以在这样的日子里获得不同：

```
fun daysDiff(c1: Calendar, c2: Calendar): Long {
    val diffInMillis = c1.timeInMillis - c2.timeInMillis
    return diffInMillis.milliseconds.inWholeDays
} 
```

或者，如果您想获得不同类型的结果，您可以替换`inWholeDays`为`toInt(...)`, `toDouble(...)`, `toString(...)`。

如果您感兴趣的唯一日期差异是天数（假设是 Double 类型的结果），您可以像这样创建运算符扩展方法：

```
operator fun Calendar.minus(c: Calendar): Double {
    val diffInMillis = timeInMillis - c.timeInMillis
    return diffInMillis.milliseconds.toDouble(DurationUnit.DAYS)
} 
```

然后任何类似的操作`calendar2 - calendar1`都会以双倍的天数返回差异。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-07-18T09:02:27.710

这是我基于@Ole VV 回答的回答。

这也适用于单数。

```
private String getDuration(Date d1, Date d2) {
    Duration diff = Duration.between(d1.toInstant(), d2.toInstant());

    long days = diff.toDays();
    diff = diff.minusDays(days);
    long hours = diff.toHours();
    diff = diff.minusHours(hours);
    long minutes = diff.toMinutes();
    diff = diff.minusMinutes(minutes);
    long seconds = diff.toMillis();

    StringBuilder formattedDiff = new StringBuilder();
    if(days!=0){
        if(days==1){
            formattedDiff.append(days + " Day ");

        }else {
            formattedDiff.append(days + " Days ");
        }
    }if(hours!=0){
        if(hours==1){
            formattedDiff.append(hours + " hour ");
        }else{
            formattedDiff.append(hours + " hours ");
        }
    }if(minutes!=0){
        if(minutes==1){
            formattedDiff.append(minutes + " minute ");
        }else{
            formattedDiff.append(minutes + " minutes ");
        }
    }if(seconds!=0){
        if(seconds==1){
            formattedDiff.append(seconds + " second ");
        }else{
            formattedDiff.append(seconds + " seconds ");
        }
    }

    return formattedDiff.toString();
} 
```

它与 StringBuilder 一起工作以将所有内容附加在一起。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-08-01T16:30:11.250

我试过这个方法..但不知道为什么我没有得到正确的结果

```
long diff = date1.getTime() - date2.getTime();
long seconds = diff / 1000;
long minutes = seconds / 60;
long hours = minutes / 60;
long days = hours / 24; 
```

但这有效

```
long miliSeconds = date1.getTime() -date2.getTime();
long seconds = TimeUnit.MILLISECONDS.toSeconds(miliSeconds);
long minute = seconds/60;
long hour = minute/60;
long days = hour/24; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-07T07:35:19.687

使用格鲁吉亚压延机

```
 public void dateDifferenceExample() {

        // Set the date for both of the calendar instance
        GregorianCalendar calDate = new GregorianCalendar(2012, 10, 02,5,23,43);
        GregorianCalendar cal2 = new GregorianCalendar(2015, 04, 02);

        // Get the represented date in milliseconds
        long millis1 = calDate.getTimeInMillis();
        long millis2 = cal2.getTimeInMillis();

        // Calculate difference in milliseconds
        long diff = millis2 - millis1;

        // Calculate difference in seconds
        long diffSeconds = diff / 1000;

        // Calculate difference in minutes
        long diffMinutes = diff / (60 * 1000);

        // Calculate difference in hours
        long diffHours = diff / (60 * 60 * 1000);

        // Calculate difference in days
        long diffDays = diff / (24 * 60 * 60 * 1000);
    Toast.makeText(getContext(), ""+diffSeconds, Toast.LENGTH_SHORT).show();

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-29T06:16:32.750

使用这些功能

```
 public static int getDateDifference(
        int previousYear, int previousMonthOfYear, int previousDayOfMonth,
        int nextYear, int nextMonthOfYear, int nextDayOfMonth,
        int differenceToCount){
    // int differenceToCount = can be any of the following
    //  Calendar.MILLISECOND;
    //  Calendar.SECOND;
    //  Calendar.MINUTE;
    //  Calendar.HOUR;
    //  Calendar.DAY_OF_MONTH;
    //  Calendar.MONTH;
    //  Calendar.YEAR;
    //  Calendar.----

    Calendar previousDate = Calendar.getInstance();
    previousDate.set(Calendar.DAY_OF_MONTH, previousDayOfMonth);
    // month is zero indexed so month should be minus 1
    previousDate.set(Calendar.MONTH, previousMonthOfYear);
    previousDate.set(Calendar.YEAR, previousYear);

    Calendar nextDate = Calendar.getInstance();
    nextDate.set(Calendar.DAY_OF_MONTH, previousDayOfMonth);
    // month is zero indexed so month should be minus 1
    nextDate.set(Calendar.MONTH, previousMonthOfYear);
    nextDate.set(Calendar.YEAR, previousYear);

    return getDateDifference(previousDate,nextDate,differenceToCount);
}
public static int getDateDifference(Calendar previousDate,Calendar nextDate,int differenceToCount){
    // int differenceToCount = can be any of the following
    //  Calendar.MILLISECOND;
    //  Calendar.SECOND;
    //  Calendar.MINUTE;
    //  Calendar.HOUR;
    //  Calendar.DAY_OF_MONTH;
    //  Calendar.MONTH;
    //  Calendar.YEAR;
    //  Calendar.----

    //raise an exception if previous is greater than nextdate.
    if(previousDate.compareTo(nextDate)>0){
        throw new RuntimeException("Previous Date is later than Nextdate");
    }

    int difference=0;
    while(previousDate.compareTo(nextDate)<=0){
        difference++;
        previousDate.add(differenceToCount,1);
    }
    return difference;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-02T01:14:13.253

**用 Kotlin 编写：** 如果您需要两个日期之间的差异并且不关心日期本身（如果您需要在应用程序中做某事，例如基于保存在共享首选项中的其他操作时间的时间）。第一次保存：

```
val firstTime:Long= System.currentTimeMillis() 
```

第二次保存：

```
val now:Long= System.currentTimeMillis() 
```

计算 2 次之间的毫秒数：

```
val milisecondsSinceLastTime: Long =(now-lastScrollTime) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-05T18:10:41.923

获取上午和下午之间的时差

```
private int  getTimeDiff() {
    SimpleDateFormat sdf = new SimpleDateFormat("hh:mm:ss aa");
    Date systemDate = Calendar.getInstance().getTime();
    String myDate = sdf.format(systemDate);
    Date current = null;
    Date Date2 = null;
    try {
        current = sdf.parse(myDate);
        // current = sdf.parse("05:00:00 pm");
        Date2 = sdf.parse("12:00:00 am");
    } catch (ParseException e) {
        e.printStackTrace();
    }
    long millse = Date2.getTime() - current.getTime();
    long mills = Math.abs(millse);
    int Hours = (int) (mills / (1000 * 60 * 60));
    int Mins = (int) (mills / (1000 * 60)) % 60;
    long Secs = (int) (mills / 1000) % 60;
    String diff = Hours + ":" + Mins + ":" + Secs;
    int min = 60-Mins;
    if (Hours >= 12) {
        String requiredTime = 24 - Hours + ":" + Mins + ":" + Secs;
        int minutes= ((24-Hours)*60)-Mins;
        return minutes;

    } else {
        int time = 12 - Hours;
        int hours=time+12;
        int res = (hours*60);
        int minutes = res-Mins;
        return minutes;
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-05T20:09:36.273

当您尝试根据该差异构造日期时，假设您要创建一个新的 Date 对象，该差异值作为其纪元时间。

```
//get time in milliseconds
long diff = date1.getTime() - date2.getTime();
//get time in seconds
long seconds = diff / 1000;
//and so on
long minutes = seconds / 60;
long hours = minutes / 60;
long days = hours / 24; 
```

有关更多信息，您可以使用以下链接：

[Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)，解释如何使用 java.time。

[ThreeTen Backport 项目](http://www.threeten.org/threetenbp/)，java.time 到 Java 6 和 7 的反向移植。

[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) , ThreeTen Backport 的 Android 版本。

问题：[如何在Android项目中使用ThreeTenABP](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)，有非常详尽的解释。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-01-09T05:19:45.120

对我有用的最短答案。以毫秒为单位发送开始和结束日期。

```
public int GetDifference(long start,long end){
    Calendar cal = Calendar.getInstance();
    cal.setTimeInMillis(start);
    int hour = cal.get(Calendar.HOUR_OF_DAY);
    int min = cal.get(Calendar.MINUTE);
    long t=(23-hour)*3600000+(59-min)*60000;

    t=start+t;

    int diff=0;
    if(end>t){
        diff=(int)((end-t)/ TimeUnit.DAYS.toMillis(1))+1;
    }

    return  diff;
} 
```

# javascript - 从控制器 MVC 返回的 JSON 列表中获取值

> ID：10690371
> 
> 赞同：0
> 
> 时间：2012-05-21T18:12:14.857
> 
> 标签：javascript, json, list

我正在返回这样的预订类列表：

```
public JsonResult GetEvents()
    {List<Common.Booking> lst = new List<Common.Booking>();
        Common.Booking b = new Common.Booking();
        b.Id = Guid.NewGuid();
        b.BeginTime = DateTime.Now;
        b.EndTime = DateTime.Now.AddMinutes(40);
        b.Confirmed = false;
        b.ServiceId = Guid.NewGuid();
        b.Username = "Dirett";

        lst.Add(b);

        return Json(lst, JsonRequestBehavior.AllowGet);
    } 
```

然后从 JavaScript 我得到列表并将其存储在一个变量中：

```
var lstServices;
GetServices();
function GetServices() {
    $.ajax({
        type: "GET",
        url: "/Service/GetServices",
        success: function (result) {
            lstServices = result;
        },
        error: function (req, status, error) {
        }
    });
}; 
```

我不确定如何从此列表中获取值，例如从列表中获取用户名、Id、ServiceId 等。我尝试了不同的方法来获取值，但没有成功。请问有人知道怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:17:35.163

由于您的服务器正在返回 json，因此您需要`dataType: "json"`在 jQuery 中添加一个额外的参数。

然后，`result`将在`success`函数中解析为 JSON 对象。我不熟悉您的服务器语言，但您应该可以说`result.Id`（或`lstServices.Id`）。

您可以通过写入成功函数来查看对象包含的内容`console.log(lstServices);`，其结果将显示在浏览器的开发人员工具中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:15:32.993

```
var lstServices;
GetServices();
function GetServices() {
    $.ajax({
        type: "GET",
        url: "/Service/GetServices",
        success: function (result) {
            lstServices = result;

var id = lstServices.Id;
var beginTime = lstServices.BeginTime;

// print out all properties using:
// console.log( lstServices )

        },
        error: function (req, status, error) {
        }
    });
}; 
```

# android - android 3.0 版中是否默认存在操作栏

> ID：10690372
> 
> 赞同：0
> 
> 时间：2012-05-21T18:12:17.147
> 
> 标签：android, android-fragments, actionbarsherlock

我正在开发应用程序，但我想要看起来类似于操作栏的界面，我试图为我的 android 2.2 SDK 手动实现。

但是在这里浏览了一篇文章[http://android.ankara-gtug.org/guide/topics/ui/actionbar.html](http://android.ankara-gtug.org/guide/topics/ui/actionbar.html)。

它说，Android 3.0 及更高版本默认存在操作栏，我们可以直接拖放访问吗？

设备 1.6 android 怎么样？他们支持这个APK吗？请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:19:48.080

如果您正在寻找可以使用到 1.6 的 Action Bar，请尝试[ActionBarSherlock](http://actionbarsherlock.com/)

编辑：

要使用它们，请访问[ActionBarSherlock](http://actionbarsherlock.com/usage.html)使用页面和[Android 操作栏页面](http://developer.android.com/guide/topics/ui/actionbar.html)

> 在创建活动以在所有版本的 Android 上使用操作栏时，您必须声明活动以扩展以“Sherlock”开头的任何活动类（例如，SherlockActivity、SherlockFragmentActivity）。通过调用 getSupportActionBar()（而不是 getActionBar()）来处理与操作栏的交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:11:20.083

[ActionBarSherlock](http://actionbarsherlock.com/)是一个很好的资源，它允许使用`ActionBar`pre-HoneyComb 设备。[您可以在实现页面](https://github.com/JakeWharton/ActionBarSherlock/wiki/Implementations)上找到该库的实际应用程序，并在[示例页面](http://actionbarsherlock.com/samples.html)上找到示例代码和文档。

![在此处输入图像描述](../Images/ff4d06d44af103dd9f7c4d611bd479fe.png)

# javascript - javascript iframe 内容 javascript

> ID：10690388
> 
> 赞同：-1
> 
> 时间：2012-05-21T18:13:29.627
> 
> 标签：javascript, jquery, iframe

> **可能重复：**
> [获取跨域 iframe 的 DOM 内容](https://stackoverflow.com/questions/6170925/get-dom-content-of-cross-domain-iframe)

我想知道如何在 javascript 中从其他网站/其他域名获取数据。我看到很多帖子说这是不可能的，但我认为这不是不可能的，应该有某种我无法找到的方法！是否可以从 iframe 或直接获取数据并将其设置为 div 和其他元素？让我知道。注意：内容/数据来自另一个页面。例如，我的网站是`abc.com`并从中获取数据`xyz.com`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:14:44.057

人们说它不可能的原因是因为它是不可能的。

这是不可能的，这是有原因的。安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:38:33.670

您将需要一些服务器端技术，例如 PHP，与您的 JS 为您下载内容的域相同。

PHP 代理示例：http: [//developer.yahoo.com/javascript/howto-proxy.html](http://developer.yahoo.com/javascript/howto-proxy.html)

或者，您可以在 Apache 的**httpd.conf上使用****mod_proxy**配置反向代理。当您在不同域上使用 API 时，它很有用：

 **```
ProxyPass /app/api http://other_domain:8080/api
ProxyPassReverse /app/api http://other_domain:8080/api 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:16:09.620

您可以使用例如`php`获取链接，然后从 javascript 代理它。**

# c# - AppDomain 隔离问题

> ID：10690390
> 
> 赞同：3
> 
> 时间：2012-05-21T18:13:33.903
> 
> 标签：c#, assemblies, appdomain

我以这样一种方式构建了一个后端，将业务逻辑放置在运行时加载的 dll 中。使用 ShadowCopyFiles = true 和文件系统监控，我能够在不重新启动主机进程的情况下修改业务逻辑。

到现在为止还挺好...

让我们称主机 appdomain A，和其中一个孩子 B。

不幸的是，如果我在由 B 而不是 A 引用的程序集 C 中进行更改，则重新加载 B 时不会反映这些更改。我认为这是因为 A 加载 C 本身。我必须采取哪些步骤来防止 A 加载 C？

这是 A 用来加载 B 的代码：

```
 AppDomainSetup appDomainSetup = new AppDomainSetup();
        appDomainSetup.CachePath = ServiceDLLPath + @"\Shadow";
        appDomainSetup.ShadowCopyFiles = "true";

        ad = AppDomain.CreateDomain(assemblyName, null, appDomainSetup);
        ad.InitializeLifetimeService();
        try
        {
            service = (IService)ad.CreateInstanceFromAndUnwrap(assemblyName, 
                                  "AppName.Services." + typeName);
            service.Start();
        }
        catch (Exception e)
        {
            LogManager.Log("AppDomain load failed: " + e.Message);
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:25:32.820

如果`A`引用`C`并且是“主机”，则在不停止并重新启动进程的情况下 `A`无法重新加载。`C`

一种可能性是制作一个非常薄的 shim AppDomain 来引导`A`AppDomain（并可以重新启动它），但重新启动该过程可能具有相同的性能配置文件。

另一种（看似更明智）的方法是 make`A`并且它的依赖项独立于 所使用的依赖项`C`，并且对于重叠的程序集，只需使它们足够稳定，您就不需要经常更改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:42:44.797

好的，我通过创建一个“接口”程序集来解决它。

因此，如果此程序集称为 X，则链现在是：

A -> X <- B -> C

（原来：A -> B -> C）

我现在可以在 B 或 C 中进行更改，这会在 appDomain B 被 A 销毁并重新启动时反映出来。

**编辑**，应蒂姆的要求，提供更多细节。

appdomain A中的代码没有改变，你可以看到我的问题。唯一需要注意的是 IService 类型定义的位置：

```
 service = (IService)ad.CreateInstanceFromAndUnwrap(assemblyName, 
                              "AppName.Services." + typeName); 
```

一旦将 IService 移至专门构建的程序集，我就能够删除 B 和 A 中的引用，这些引用最终以某种方式将 A 连接到 C。基本上 Chris 所说的一切都是正确的，只是路径并不总是很清楚.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:01:07.957

阅读答案和评论，听起来您最好将业务逻辑包装到 WCF 服务中。您可以使用网络管道来最小化在同一台电脑上运行的开销。您还应该查看 MEF 以构建应用程序可扩展性。不幸的是，MEF 也并非旨在让您在不​​重新启动主机应用程序的情况下即时卸载和替换插件

# matlab - Matlab 中的月份

> ID：10690392
> 
> 赞同：0
> 
> 时间：2012-05-21T18:13:37.410
> 
> 标签：matlab, date

我有一组日期 ['1/7/1993';'4/21/1993';'6/11/1993';'2/7/1994';'5/26/1994';'3/ 15/1995']，并希望将其转换为格式为“mm/yyyy”的日期数组，其中包含最小和最大日期内的所有月份和年份，即 datr = ['1/1993';'2/ 1993';'3/1993';.......;'3/1995']

我该怎么做？另外我如何计算编号。Matlab中两个日期之间的月份？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T18:43:50.920

First, I hope I'm not assuming too much here but MATLAB has built in [Date and Time Operations](http://www.mathworks.com/help/techdoc/ref/f16-42340.html#f16-32430) that if you aren't already using, you should start using.

There are three ways to represent dates (as straight from the doc)

```
Date String:           '24-Oct-2003 12:45:07'
Date Vector:           [2003  10  24  12  45  07]
Serial Date Number:    7.3188e+005 
```

There is a function called [`datevec`](http://www.mathworks.com/help/techdoc/ref/datevec.html), and if you can get your dates into this Date Vector format then it is easy to compute the number of months between two dates:

```
date1 = datevec('17-jun-04', 'dd-mmm-yy')
date2 = datevec('24-oct-03', 'dd-mmm-yy')

% This if/else checks which date is later than the other
if(datenum(date1) > datenum(date2))
    % num months is the number of months left in date2's year (ex. 2 months)+
    % the number of months in date1's year (ex. 6 months) +
    % the number of months in the years between (ex. 0 months).
    num_months = (12 - date2(2)) +  date1(2) + 12*(date1(1)-date2(1)-1)
else
    %just flipped date1 and date2 from the above.
    num_months = (12 - date1(2)) + date2(2) + 12*(date2(1)-date1(2)-1) 
end 
```

The above code uses [`datenum`](http://www.mathworks.com/help/techdoc/ref/datenum.html) to check if date1 is greater than date2 (or vice versa)

Also, if you want to display just the month and years, you can specify how to display a date string with [`datestr`](http://www.mathworks.com/help/techdoc/ref/datestr.html)

```
>> date1

date1 =

        2004           6          17           0           0           0

>> datestr(date1,'mm/yyyy') %Displays just month and year

ans =

06/2004 
```

# haskell - 在haskell中处理输入

> ID：10690395
> 
> 赞同：0
> 
> 时间：2012-05-21T18:13:45.320
> 
> 标签：haskell, input, head

我需要输入一个输入，直到输入空行，当输入空行时，我需要打印每行的所有第一个字符（作为一个单词）。有人可以解释我应该在最后一行写什么吗？

```
inp :: IO String
inp
   = do
      line <- getLine
      if null line
         then return ""
         else do
            lines <- inp
            return lines???? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:40:59.597

我不想破坏一切，但这里有一些提示：

1.  `String`实际上只是`[Char]`.
2.  您可以构造一个与旧列表一样的新列表，但使用`(:) :: a -> [a] -> [a]`函数（尤其是`(:) :: Char -> String -> String`）将新元素附加到前面。您可以将此功能大声朗读为“缺点”。例如，`1:[2,3,4]`与 相同`[1,2,3,4]`，与`'a':"bcd"`相同`"abcd"`。
3.  当您确定列表不为空时，您可以使用`head :: [a] -> a`函数（尤其是`head :: String -> Char`）请求其第一个元素。
4.  作为一种替代策略，您可能希望研究[模式匹配](http://www.haskell.org/tutorial/patterns.html)而不是使用`null`and `if`// `then`; `else`这也消除了对 的需要`head`，这通常是代码异味。

从评论中，您还尝试过这样的最后一行：

```
return head(lines) : [] 
```

这里的主要问题是这`return`不是 Haskell 中的关键字，它只是一个普通的旧函数。所以如果你的论点是一个表达式，你需要给它加上括号（或者使用各种技巧来避免括号）：

```
return (head(lines) : [])
return (head lines : [])
return $ head lines : []
return [head lines]
let answer = head lines : [] in return answer 
```

等等。这应该可以让您进行类型检查和运行；然后您可以开始纠正代码行为中的错误。=)

# jquery - 使用 jQuery 获取整个页面

> ID：10690397
> 
> 赞同：0
> 
> 时间：2012-05-21T18:13:52.577
> 
> 标签：jquery, get, save

我正在使用 jQuery。假设我使用以下方法执行一些搜索：

```
var acronyms=["fubar","snafu","gnu"];

$.each(acronyms, function(index, element){
  $.ajax({
    url: "https://www.domain.com/search?q=" + element,
    success: function() {
    }
  });
});​ 
```

无论如何，我是否可以保存结果页面的内容，以便以后可以操作数据。整个页面内容或页面内容加上 html 都是可以接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:16:32.587

您可以检索全部或部分文档。jQuery 文档有[示例](http://api.jquery.com/load/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:23:00.450

您可以检索每个页面的 HTML，然后对其进行剖析和附加，然后随心所欲地使用它。

```
var acronyms = ["fubar","snafu","gnu"];

$.each(acronyms, function(index, element) {
    $.ajax({
        url: "https://www.domain.com/search?q=" + element,
        dataType: "html",
        success: function(html) {
            var $container = $("#container", html); // look for a specific element in the returned HTML
            $("body").append($container);
        }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T18:44:31.703

尝试：

```
var acronyms=["fubar","snafu","gnu"];

$.each(acronyms, function(index, element){
  $.get('http://www.domain.com/search', {q: element}, function(response){

     //add `response` to some #output div 
     $('#output').html(response);

   });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T18:18:39.983

`$('*').html();`应该为您提供整个页面的 HTML。

# node.js - 当节点 setTimeout 回调变为 null 时会发生什么

> ID：10690398
> 
> 赞同：0
> 
> 时间：2012-05-21T18:13:53.037
> 
> 标签：node.js, callback

我有一个关于回调的问题。我有一个对象，其中一个函数用作 setTimeout 回调，并且可以在回调触发之前删除该对象。当超时发生时节点会知道不调用它还是会保留引用并无论如何调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:32:14.007

做了一些测试，看起来节点保持对对象的引用并触发回调。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T20:18:12.777

在“删除”之后，对象不一定会被删除，你只是在删除你对它的引用。该方法仍然是可调用的。

```
> cat test.js
var a = {                                                                                                                                                                                          
    method: function() {
        console.log('a' + a.property)   
    },
    property: '1'
}
setTimeout(a.method, 1000);
delete a;

> node test.js                                                                                                                                                                        
a1 
```

# javascript - knockout.js：将 { data: xyz } 传递给 foreach 而不仅仅是 xyz

> ID：10690399
> 
> 赞同：0
> 
> 时间：2012-05-21T18:13:54.040
> 
> 标签：javascript, knockout.js, knockout-2.0

我刚刚开始使用 knockout.js。我有一个`foreach`这样的绑定，效果很好：

```
<ul data-bind="foreach: people">
   <li> .... </li>
</ul> 
```

`people`是我传递给的模型的一部分`ko.applyBindings`。根据文档，以下内容也应该起作用：

```
<ul data-bind="foreach: {data: people}"> 
```

但事实并非如此。该列表仍然为空，但我在浏览器的错误窗口中看不到任何错误。任何暗示我可能做错了什么？两个电话之间是否有一些我看不到的细微差别？

我的想法是将处理程序传递给`afterAdd`to `foreach`。因此我需要第二种方式来调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:13:10.973

我相信您实际上是在寻找模板绑定。Foreach 是它的快捷方式，但如果你需要 afterAdd ，你可以使用完整的绑定：

```
<ul data-bind='template: { foreach: people,
                        afterAdd: myPostProcessingLogic }'> </ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:42:07.153

仅作记录：解决方案有点奇怪，问题的根源是我的代码中的另一个错误。`people`通过 初始化`ko.observableArray`。当我从服务器获得新数据时，我像这样更新我的模型：

```
model.people(ko.observableArray(newData)); 
```

现在我知道这是正确的方法：

```
model.people(newData); 
```

无论出于何种原因，第一个版本仍然适用于某些模板绑定规范，但不是全部。第二个在每种情况下都可以正常工作。

# java - Go 通道 vs Java BlockingQueue

> ID：10690403
> 
> 赞同：15
> 
> 时间：2012-05-21T18:14:07.523
> 
> 标签：java, concurrency, go, channel

Go 通道和 Java BlockingQueue 之间有什么区别吗？两者都是具有相似阻塞和内存模型语义的队列。可选地，两者都可以具有容量集。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-21T22:12:57.117

我想说最大的不同是 Go 通道支持`select`语句，它允许你执行一个通道操作。一个例子（从[Go 语言规范](http://golang.org/ref/spec#Select_statements)改变）：

```
select {
case i1 = <-c1:
    print("received ", i1, " from c1\n")
case c2 <- i2:
    print("sent ", i2, " to c2\n")
case i3, ok := (<-c3):  // same as: i3, ok := <-c3
    if ok {
        print("received ", i3, " from c3\n")
    } else {
        print("c3 is closed\n")
    }
} 
```

在此示例中，将执行从 c1 接收、发送到 c2 或从 c3 接收操作中的一个。进入选择时，会随机选择一个就绪通道（如果有）。否则，操作会阻塞，直到其中一个通道准备好。

我不知道使用 Java 实用程序对这个频道选择进行建模的任何简单方法。有人可能会争辩说，这是`select`声明的属性，而不是渠道的设计，但我认为这是渠道设计的基础。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-21T19:26:20.843

另一个非常重要的区别是：您可以关闭 Go 通道以表示没有更多元素即将到来。使用 Java 是不可能的。

示例：goroutine A 读取文件列表。它将每个文件发布到频道中。在最后一个文件之后，它会关闭通道。goroutine B 从通道中读取文件并以某种方式处理它们。通道关闭后，goroutine 退出。

在 Java 中做到这一点并不容易。但是存在一些解决方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T19:50:11.787

它们可以以类似的方式使用。

*   两者都可以在放置/发送或接收/接收时阻止。
*   两者都具有控制发送何时阻塞的能力。

最大的区别可能是 go 通道比 java 对象便宜得多。并且可以将 go 通道限制为仅发送或仅接收，这可以确保有关谁可以发送以及谁可以从通道接收的一些附加类型强制执行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-10T15:24:14.037

要在 java 中执行类似于 golang'select 语句的操作，需要使用 java.nio 包。特别是选择器和通道。在此处查看软件包文档：

[http://docs.oracle.com/javase/6/docs/api/java/nio/channels/package-summary.html#multiplex](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/package-summary.html#multiplex)

它提供与 golang select 语句几乎相同的功能，使用单个线程从多个通道多路读取/写入。

# iphone - 在OpenGL中倾斜一个矩形

> ID：10690410
> 
> 赞同：1
> 
> 时间：2012-05-21T18:14:35.180
> 
> 标签：iphone, opengl-es

我有一个纹理 4 角多边形，我目前正在使用两个三角形和 GL_TRIANGLE_STRIP 绘制它。右侧需要更高，这会使事情变得混乱。三角形在中间相交的地方有一个明显的区别，我该如何清除这样的东西？

我想我需要某种仿射变换，或者细分成更多的三角形，但我不确定。

截图：http: [//i.imgur.com/alYdG.png](http://i.imgur.com/alYdG.png)

示例代码：

```
float x = rect.origin.x;
float y = rect.origin.y;
float w = x + rect.size.width;
float h = y + rect.size.height;
V2fT2f quad[4] = {
    //x  y
    { x, y, 0, 1 },//bottom left
    { w, y-0.2, 1, 1 },//bottom right
    { x, h, 0, 0 },//top left
    { w, h+0.2, 1, 0 },//top right
};
glEnable(GL_TEXTURE_2D);
glEnableClientState(GL_VERTEX_ARRAY);
glBindTexture(GL_TEXTURE_2D,texID);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);glErrorCheck();
glVertexPointer  (2, GL_FLOAT, sizeof(V2fT2f), &quad[0].x);
glTexCoordPointer(2, GL_FLOAT, sizeof(V2fT2f), &quad[0].s);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:37:07.630

无论如何，要通过转换获得这种效果 - 您将需要设置透视投影。

完成后，这是您的顶点（这些顶点形成一个宽度和高度的矩形）

1.  X: centerX - halfWidth, Y: y - HalfHeight, Tu: 0, Tv: 0
2.  X：centerX - halfWidth，Y：y + HalfHeight，Tu：0，Tv：1
3.  X: centerX + halfWidth, Y: y + HalfHeight, Tu: 1, Tv: 1
4.  X: centerX + halfWidth, Y: y - HalfHeight, Tu: 1, Tv: 0

将其包含在 glRotatef(angle, 0, 1, 0) 中 - 围绕 Y 轴旋转角度

这应该给你你所需要的。

# python - 在 Mac Cocoa 应用程序中使用 Tkinter 框架

> ID：10690416
> 
> 赞同：1
> 
> 时间：2012-05-21T18:14:54.400
> 
> 标签：python, macos, cocoa, tkinter, tk

我使用 Tkinter UI 框架在 Python 中编写了一个差异和合并程序。在 OS-X 上运行它有两个问题：

1.  启动它时，除非与其他正在运行的应用程序来回切换，否则不会显示窗口。这里有一个线程推荐 top.call('wm', 'attributes', '.', '-topmost', '1') 这不是解决方案，因为它始终将窗口放在首位。其他人说，当使用 py2app 打包时，这种行为就消失了——我试过了，但没有！
2.  无法更改菜单 - 第一个条目由 TK 指定，因此第一个“关于 xxx”确实会带来 TCL 学分，并且不能用我自己的关于信息的应用程序替换。

所以我的想法是制作一个可可应用程序窗口，它显示在开始和顶部，我可以定义菜单中的内容 - 并以某种方式将 Tk 框架与我的 Python 代码集成。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:13:48.343

试试这个命令的一些变体：

self.createcommand('tkAboutDialog', self.aboutProgram)

并将您的应用程序“关于”对话框代码放在 aboutProgram() 函数中。

# python - 如何以编程方式确定 ndb 属性是否为多值

> ID：10690418
> 
> 赞同：3
> 
> 时间：2012-05-21T18:15:02.497
> 
> 标签：python, google-app-engine, app-engine-ndb

我正在将一个应用程序从 Datastore 转换为 ndb，并且在 xml 导入例程中遇到了问题。问题是我无法以编程方式确定 ndb.model 类的属性是否为多值属性。

我怀疑这是由于缺乏基本的 Python 技能，因为到目前为止我提出的代码表明该值是“可见的”。因此我无法抓住它。请帮忙。

```
from google.appengine.ext import ndb

class House(ndb.Model):
  name = ndb.StringProperty()   
  rooms = ndb.StringProperty(repeated=True) 

print 'Properties:'
for p in House._properties:
  print getattr(House,p)

print '\nRepeated:'
for p in House._properties:
  print getattr(getattr(House,p),'repeated',None) 
```

这导致以下结果：

```
Properties:
StringProperty('rooms', repeated=True)
StringProperty('name')

Repeated:
None
None 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T14:58:09.747

实际上，带下划线前缀的选项*是*官方 API。这是他们没有记录的错误，我会修复它。我在这里解释了一点：[http ://code.google.com/p/appengine-ndb-experiment/issues/detail?id=187](http://code.google.com/p/appengine-ndb-experiment/issues/detail?id=187)

特别是，要获取模型的属性，您应该使用 House._properties，而不是 Nick 建议的代码。（事实上​​，`__dict__`在未来的 NDB 版本中可能会被插槽取代。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T01:03:06.780

NDB 目前不提供任何选项来内省创建的模型；你绝对应该[提交一个](http://code.google.com/p/appengine-ndb-experiment/issues/list)关于这个的错误。与此同时，深入研究对象的内部是解决问题的唯一方法。请注意，这是非常脆弱的，因为内部实现细节可以并且随时会改变。

您可以获得这样的属性列表：

```
properties = [(k, v) for k, v in House.__dict__.items() if isinstance(v, ndb.Property)] 
```

`_repeated`您可以通过访问实例的内部属性来确定属性是否重复- 但请参阅上面的免责声明，了解为什么这可能是一个坏主意：

```
House.rooms._repeated 
```

或者

```
getattr(House, 'rooms')._repeated 
```

# wordpress - 自定义分类的活动菜单条目 - Wordpress

> ID：10690419
> 
> 赞同：1
> 
> 时间：2012-05-21T18:15:06.000
> 
> 标签：wordpress, taxonomy

我有一个自定义帖子类型和一个自定义分类法。每个自定义帖子类型都分配给一个术语。我为自定义分类中的每个术语添加了一个菜单条目。每个菜单条目后面是一个概述页面，其中包含分配给该术语的所有自定义帖子。如果您单击其中一个海关帖子，则会打开一个详细信息页面。但是，如果您在详细信息页面上，分类术语的相应菜单条目将不再标记为活动。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:59:18.413

好的，我为我的问题找到了以下解决方案：

```
add_filter('nav_menu_css_class' , 'special_nav_class' , 10 , 2);

function special_nav_class($classes, $item) {
    global $naventries;
    $naventries[$item->ID] = $item;
    if($item->type == 'taxonomy') {
        global $post;
        $terms = get_the_terms($post->ID, $item->object);

        $currentTerms = array();
        if ( $terms && ! is_wp_error( $terms ) ) {
            foreach($terms as $term) {
                $currentTerms[] = $term->slug;
            }
        }

        if(is_array($currentTerms) && count($currentTerms) > 0) {
            $currentTerm = get_term($item->object_id, $item->object);
            if(in_array($currentTerm->slug, $currentTerms)) {
                $classes[] = 'current-menu-item';
            }
        }
    } 

     return $classes;
} 
```

但是还有一个问题。我还想将类*current-menu-ancestor*添加到父元素。我有父元素的 id，`$item->menu_item_parent`但不知道此时如何使用此 id 更改相应菜单条目的类？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:47:29.930

```
<script type="text/javascript">
    // Active state if you have a pagetitle on the result page
    var currentTitle = $('.header h2').html();
    $('.nav ul.menu li').find(':contains('+currentTitle+')').parent().addClass('current-menu-item');
</script> 
```

因此，如果您的页面标题与您想要添加类的菜单项同名，我的解决方案就可以工作`current-page-item`。

当然，您需要安装 jQuery 才能使其正常工作。

编辑：确保将其放在存档分类页面的循环下方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T09:15:06.270

你可以通过 jquery 来做到这一点：

```
<script type="text/javascript">
    $(document).ready(function(){
        var title = $(document).attr('title');

        $(".maincat-list li a:contains('"+title+"')").css("text-decoration", "underline");

    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-15T17:29:54.500

我已经为此苦苦挣扎了一段时间。这就是我解决问题的方法。

1.  进入wordpress后端->外观->菜单
2.  将一些自定义类添加到您希望在分类或存档页面上激活的菜单项（如果您没有看到 css 类选项，请转到屏幕选项并激活它）。例如，我将“活动”类放在菜单项上。
3.  转到 archive.php 或 taxonomy.php 或您正在使用的任何模板，并为您刚刚添加的 .active 类添加一些样式，例如：

> ```
> <style>
> .menu li.active {
> background-color:#000;
> }
> </style> 
> ```

当然，您可以使用其他方法将 css 注入存档页面。

# wpf - WPF 应用程序的“启用应用程序框架”是什么意思？

> ID：10690420
> 
> 赞同：13
> 
> 时间：2012-05-21T18:15:17.410
> 
> 标签：wpf, vb.net, application-framework

我正在 VB.Net 中创建一个 WPF 应用程序。我正在尝试决定我的启动代码应该去哪里。我似乎有两个选择：

1.  选中“启用应用程序框架”框并从应用程序的窗口中选择“启动 URI”。
2.  取消选中“启用应用程序框架”并选择在我自己的 Sub Main 中启动。

启用或禁用应用程序框架有什么影响，为什么应用程序框架会限制我对启动选项的选择？

-TC

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T19:29:12.060

Visual Studio 杂志有[一篇](http://visualstudiomagazine.com/articles/2007/10/01/enable-the-application-framework-in-vb.aspx)关于此的文章。这是一个摘录。

> Visual Basic 支持“应用程序框架”，可以更轻松地管理应用程序的启动、关闭和异常管理。您可以使用项目属性中的复选框启用或禁用应用程序框架。应用程序框架是 Visual Basic 为使您的开发更容易所做的工作的一部分。

# ruby-on-rails - Heroku 上的 NewRelic：无法找到或读取 /tmp/build_2aqfzcy5zyv4m/config/newrelic.yml

> ID：10690421
> 
> 赞同：1
> 
> 时间：2012-05-21T18:15:18.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, newrelic

我正在尝试为 Heroku 设置 newrelic 插件。我在 Rails 3.2.3 上运行。

我已按照此处的说明进行操作：[https ://devcenter.heroku.com/articles/newrelic#addon_installation](https://devcenter.heroku.com/articles/newrelic#addon_installation)

当我推送到 Heroku 时，我收到一条消息：

```
Cannot find or read /tmp/build_2aqfzcy5zyv4m/config/newrelic.yml 
```

当我访问[https://heroku.newrelic.com/](https://heroku.newrelic.com/)时，它会告诉我设置我的应用程序并将我指向附加安装说明。

知道这里发生了什么以及如何解决它吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:09:12.400

Newrelic gem 应该自动检查 /config/newrelic.yml 中的配置。您可以使用[https://raw.github.com/gist/2253296/newrelic.yml](https://raw.github.com/gist/2253296/newrelic.yml)作为模板。

如果您的应用由于某种原因不会在此位置搜索文件，或者您在其他位置有文件，则可以使用 heroku 配置指定路径。使用 heroku toolbelt，您可以使用命令：

```
heroku config:set NRCONFIG=/config/newrelic.yml 
```

# php - 集成 JS 和 PHP——有没有更好的方法？

> ID：10690422
> 
> 赞同：0
> 
> 时间：2012-05-21T18:15:18.840
> 
> 标签：php, javascript, integration

我正在尝试通过集成自定义 JS 对象来改进 PHP 程序的用户界面。但是，由于两种语言都没有意识到另一种语言，所以我的方法论显得笨拙和尴尬。

以呈现一组数据库记录和一组按钮为例，例如隐藏、删除、编辑等。PHP 调用 mysql 并加载数据集，因此是知道记录 ID 的人。作为格式化记录以供最终显示的一部分，我创建了一些`<table>`结构，其中包含适当的表单 ID、`id="key_part'.$recid.'"`自定义 JS 对象的 HTML 框架等，以及`onclick="'.$jsobj.'.jsRoutine('.$recid.') ;"`对各种 JS 例程的表单调用。

然后我创建 JS 代码以了解各种 id，以便它知道如何使正确的 HTML 代码隐藏、可见、更改颜色、长头发或其他任何东西。

我认为，让这两个不同的代码库保持同步的问题困扰着我。出于显而易见的原因，我一直试图避免这种情况。

有没有更好的方法不涉及第三方图书馆理念的学习曲线，或者我基本上已经达到了集成的实际极限？

提前感谢您的建设性意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:25:09.417

您可以尝试使用 Mustache、dust.js 或 Handlebars 等模板框架之一。通过这种方式，您可以外部化和标准化您可以在 PHP 和 JavaScript 之间共享的模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:54:12.080

我会用一个实际的例子来解释。

你说过你有一堆记录你想要编辑、删除、隐藏等。我已经做过很多次了：将记录列出到一个表中，其中“操作”列包含打开以进行编辑、删除、隐藏等操作/取消隐藏、上移/下移、第一个/最后一个...

当然，这一切都只能通过 PHP 和表单提交或页面重定向的方式来完成，但为什么不做这么多用户友好的数据管理呢？所以我使用了 AJAX 和 JSON，而 jQuery 框架是我最好的朋友来实现我将进一步描述的内容。

所以让我们绕过这个问题：

*   我们有一个存储在数据库中的数据（让我们使用 MySQL）
*   我们有一个用 PHP 编写的服务器端（或者必须编写它）
*   我们有一个前端，允许我们使用 jQuery（AJAX 和 JSON）管理数据
    *   用户执行的每个操作都将通过 AJAX 请求 (jQuery) 发送到服务器 (PHP)，服务器将管理该操作并响应前端
    *   数据本身也由 jQuery 检索和呈现

## 数据检索和呈现

这将通过 PHP 查询 MySQL 数据库来完成。您将准备方法/操作，该方法/操作将采用偏移量和限制等参数来仅查询具体的一组记录。

在前端，AJAX 请求将被发送到 PHP 以检索记录。PHP 可以返回完整的 HTML 标记，您将在表格末尾附加该标记，或者 HTML 标记可以在 jQuery 中从 JSON 格式的数据中设置。我认为第二种方法更好。

您可以创建一个包含复选框的列（是的，所有表都可以在一个表单中，但这不是必须的），该值将带有记录的 ID。然后，您将写下包含您要呈现的数据的其他行以及包含特殊操作链接的“操作”列。

## 管理操作和数据分页

所以我们有一个表，默认为 15 行，第一列带有复选框和记录 ID，数据列和操作列。

用户单击第三行的隐藏操作 - 通过 jQuery，您可以捕获单击事件并从该链接中获取父 tr 元素。然后你找到它的第一个孩子 - td 从中你找到复选框的值 - 记录的 ID。所以我们现在知道我们想要隐藏 ID 为 9 的记录。必须向将管理隐藏操作的服务器执行 AJAX 请求（可能只是在数据库中为该记录设置一些标志），成功后响应是发送回前端 - 这是您隐藏整个 tr 元素（以及其中的所有数据）或只是更改一些显示隐藏/可见标志的图标的时刻。

删除时，你也删除了 tr 元素，移动时，你也移动了 tr 元素。

没有重定向，没有重新加载，没有提交。

这只是一个上下文，代码和所有工作都在你身上。我只是想描绘一下如何使用 PHP + jQuery 使用 JSON 和 AJAX 来实现这一点。

此外，这种方法需要启用 javascript，但您仍然可以编写应用程序，以便在没有 javascript 支持时能够提交、重定向、重新加载...

# opengl - 如何在 Haskell 的 OpenGL 中调整渲染深度？

> ID：10690432
> 
> 赞同：1
> 
> 时间：2012-05-21T18:15:44.010
> 
> 标签：opengl, haskell, glfw

我正在尝试使用 OpenGL 在 Haskell 的 3D 空间中渲染一些对象。不过，我不知道如何在 Z 维度上渲染形状。调整三角形点的值会导致它不渲染。（是否有`glEnable`我缺少的等效项来设置深度缓冲区？）

这是代码（为简洁而编辑）：

```
initGL :: IO ()
initGL = do
            shadeModel $= Smooth
            clearDepth $= 1
            depthFunc $= Just Lequal
            hint PerspectiveCorrection $= Nicest

drawFrame :: WindowRefreshCallback
drawFrame = do
               clear [ ColorBuffer, DepthBuffer ]
               loadIdentity

               renderPrimitive Triangles $ foldl1' (>>) $ map vertex
                   [ Vertex3 0      1  0 -- top
                   , Vertex3 1    (-1) 0 -- bottom right
                   , Vertex3 (-1) (-1) (0 :: GLdouble) -- bottom left
                   ]   

               flush

main :: IO()
main = do
          True <- initialize
          True <- openWindow (Size 800 600) [] Window 

          ... -- Set window title, set up callbacks

          initGL
          clearColor $= toGLColor (Color4 0 175 200 0)

          doWhile (not <$> readIORef isClosed) $ drawFrame >> swapBuffers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:19:50.693

这就是我设置窗口的方法。我正在使用 GLUT 进行设置。

```
main = do
  (progName, _) <- getArgsAndInitialize
  initialDisplayMode $= [DoubleBuffered, WithDepthBuffer]
  createWindow progName
  windowSize $= Size 640 480
  <...code omitted...> 
```

您可能要关注的行是设置窗口的第三行`WithDepthBuffer`

# java - 如何在不重新加载和处理其数据的情况下恢复 Activity？

> ID：10690434
> 
> 赞同：0
> 
> 时间：2012-05-21T18:15:47.597
> 
> 标签：java, android

我有一些列表活动，一个导致另一个。每当我按下返回并返回到上一个列表活动，然后再次返回到此活动时，它都会重新执行整个 onCreate 处理。

如何让它记住加载到列表中的数据？

```
public class Modules extends ListActivity {
    PortalHandler portalHandler;
    Login login;
    ArrayList<String> menuItems;
    Document portal;
    String portalHtml;
    Elements modules;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        menuItems = new ArrayList<String>();
        Bundle extras = getIntent().getExtras().getBundle("extras");
        portalHtml = extras.getString("portalHtml");
        portal = Jsoup.parse(portalHtml);
        modules = portal.select(".courselink ");
        for (int i = 0; i < modules.size(); i++) {
            menuItems.add(modules.get(i).text()
                    .substring(0, modules.get(i).text().indexOf("(")));
        }
        setListAdapter(new ArrayAdapter<String>(this, R.layout.modules,
                menuItems));
        ListView listView = getListView();
        listView.setTextFilterEnabled(true);

        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:43:19.307

Try adding `android:configChanges="keyboardHidden|orientation"` in your Manifest file

Secondly, do nothing in onStart() and onResume(). Call your Activity like this:

```
Intent i = new Intent(Second.this,First.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

Hope this helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:57:01.910

您可以在 Shared 首选项中保存数据，也可以通过[onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)使用保存的实例状态，然后您可以访问作为 onCreate() 方法参数的 savedInstanceState Bundle 上的数据。

# multithreading - 线程暂停自己，然后另一个线程恢复它 - 有时第二个事件首先发生

> ID：10690437
> 
> 赞同：0
> 
> 时间：2012-05-21T18:16:14.053
> 
> 标签：multithreading, parallel-processing, synchronization

我有两个线程；线程 2 为线程 1 提供了必要的数据，并且可以开始处理与线程 1 并行处理的另一块数据，但如果线程 1 较慢（是的，我知道“线程 1读取线程 2 同时写入的内容”，我有两个缓冲区形式的保护，而不是一个）。代码如下：

```
Thread 1:
while(!shouldexit)
{
    // some code
    Thread1_Ready = true;
    SuspendThread (Thread1_Handle);
}

Thread 2:
while(!shouldexit)
{
    while(!Thread1_Ready)
    {
        // do nothing
    }
    // some other code
    ResumeThread(Thread1_Handle);
} 
```

问题是，有时线程 2 中的整个代码发生`SuspendThread`的速度比线程 1 中的要快。结果是线程 1 保持挂起状态，直到线程 2 的另一个循环通过。这会导致线程 1 没有处理一条数据（不是很好，但在我的应用程序中可以接受），更严重的是，当停止按钮触发时`shouldexit = true`，线程 1 只是无限期地处于挂起模式。

我想到的两种可能的解决方案也行不通： 1 - 放在`Thread1_Ready = true;`之后`SuspendThread(Thread1_Handle);`（显然，代码`Thread1_Ready = true;`永远不会执行） 2 - 将`SuspendThread(Thread1_Handle);`线程 1 的行放在线程 2 的开头，就在之前`// some other code`，但这会导致延迟哪个线程 1 可以重新进入主循环，这将是非常不可预测的。

这种情况可以用不同的方式解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:46:10.130

你有一个经典的[生产者-消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)。标准（并且在 99% 的情况下足够）解决方案是互斥保护队列。在您的情况下，队列大小为 1，但队列语义仍然适用。

这将解决您的问题，因为示例运行如下所示：

```
Thread 1: Lock queue, see that queue is empty, wait for queue full signal
Thread 2: Produce data
Thread 2: Lock queue, push data into queue (has now size 1), Unlock queue and wake up Thread 1
Thread 2: Produce data
Thread 2: Lock queue, see that queue is full, wait for queue space signal
Thread 1: Wakes up, gets data, sends queue space signal 
```

# android - 如何在另一个线性布局中在线性布局中创建可扩展列表视图

> ID：10690439
> 
> 赞同：1
> 
> 时间：2012-05-21T18:16:18.627
> 
> 标签：android, expandablelistview, expandablelistadapter

我尝试了很多次，但为什么我做不到我不知道。在我声明可扩展列表后查看：

```
listView =(ExpandableListView)findViewById(R.id.expandableListView1); 
```

我像这样创建我的适配器；

```
public class MyExpandableListAdapter extends BaseExpandableListAdapter {
        // Sample data set.  children[i] contains the children (String[]) for groups[i].
        private String[] groups = { "People Names", "Dog Names", "Cat Names", "Fish Names" };
        private String[][] children = {
                { "Arnold", "Barry", "Chuck", "David" },
                { "Ace", "Bandit", "Cha-Cha", "Deuce" },
                { "Fluffy", "Snuggles" },
                { "Goldy", "Bubbles" }
        };

        public Object getChild(int groupPosition, int childPosition) {
            return children[groupPosition][childPosition];
        }

        public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
        }

        public int getChildrenCount(int groupPosition) {
            return children[groupPosition].length;
        }

        public TextView getGenericView() {
            // Layout parameters for the ExpandableListView
            AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                    ViewGroup.LayoutParams.FILL_PARENT, 64);

            TextView textView = new TextView(ExpandableList1.this);
            textView.setLayoutParams(lp);
            // Center the text vertically
            textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
            // Set the text starting position
            textView.setPadding(36, 0, 0, 0);
            return textView;
        }

        public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
                View convertView, ViewGroup parent) {
            TextView textView = getGenericView();
            textView.setText(getChild(groupPosition, childPosition).toString());
            return textView;
        }

        public Object getGroup(int groupPosition) {
            return groups[groupPosition];
        }

        public int getGroupCount() {
            return groups.length;
        }

        public long getGroupId(int groupPosition) {
            return groupPosition;
        }

        public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
                ViewGroup parent) {
            TextView textView = getGenericView();
            textView.setText(getGroup(groupPosition).toString());
            return textView;
        }

        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }

        public boolean hasStableIds() {
            return true;
        }

    } 
```

然后我将我的适配器设置为 listView。

```
mAdapter = new MyExpandableListAdapter();
        setListAdapter(mAdapter); 
```

但是有很多问题我无法创建；如果你帮助我，我会很高兴。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:31:43.180

除非您发布错误日志但尝试参考这些链接，否则我们找不到错误：

[Android 上的 ExpandableListView](http://techdroid.kbeanie.com/2010/09/expandablelistview-on-android.html)

[简单的 ExpandableListView 演示](http://androidcodesnips.blogspot.com/2011/05/android-expandable-listview.html)

[Android 上的自定义 ExpandableListView](http://android-adda.blogspot.com/2011/06/custom-expandable-listview.html)

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:17:49.943

而不是像你这样设置这个列表适配器：

```
setListAdapter(mAdapter); 
```

你应该这样设置它：

```
listView.setAdapter(mAdapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:42:52.500

行。谢谢大家，我处理了我的问题，所有问题都是不扩展 ExpandableListActivity，只是 Activity 它是我的代码。现在我尝试学习如何在单击按钮时集中注意力。这是代码。

```
public class expandXml extends Activity{

ExpandableListView listView;
ExpandableListAdapter adapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.deneme2);

    listView =(ExpandableListView)findViewById(R.id.expandableListView1);
    listView.setFocusable(true);
     adapter = new ExpandableListAdapter() {

        private String[] groups = { "People Names", "Dog Names", "Cat Names", "Fish Names" };
        private String[][] children = {
                { "Arnold", "Barry", "Chuck", "David" },
                { "Ace", "Bandit", "Cha-Cha", "Deuce" },
                { "Fluffy", "Snuggles" },
                { "Goldy", "Bubbles" }
        };
        public void unregisterDataSetObserver(DataSetObserver observer) {
            // TODO Auto-generated method stub

        }

        public void registerDataSetObserver(DataSetObserver observer) {
            // TODO Auto-generated method stub

        }

        public void onGroupExpanded(int groupPosition) {
            // TODO Auto-generated method stub

        }

        public void onGroupCollapsed(int groupPosition) {
            // TODO Auto-generated method stub

        }

        public boolean isEmpty() {
            // TODO Auto-generated method stub
            return false;
        }

        public boolean isChildSelectable(int groupPosition, int childPosition) {
            // TODO Auto-generated method stub
            return true;
        }

        public boolean hasStableIds() {
            // TODO Auto-generated method stub
            return true;
        }

        public View getGroupView(int groupPosition, boolean isExpanded,
                View convertView, ViewGroup parent) {
             TextView textView = getGenericView();
                textView.setText(getGroup(groupPosition).toString());
                return textView;
        }

        public long getGroupId(int groupPosition) {
            // TODO Auto-generated method stub
            return groupPosition;
        }

        public int getGroupCount() {
            // TODO Auto-generated method stub
            return groups.length;
        }

        public Object getGroup(int groupPosition) {
            // TODO Auto-generated method stub
            return groups[groupPosition];
        }

        public long getCombinedGroupId(long groupId) {
            // TODO Auto-generated method stub
            return 0;
        }

        public long getCombinedChildId(long groupId, long childId) {
            // TODO Auto-generated method stub
            return 0;
        }

        public int getChildrenCount(int groupPosition) {
            // TODO Auto-generated method stub
            return children[groupPosition].length;
        }

        public View getChildView(int groupPosition, int childPosition,
                boolean isLastChild, View convertView, ViewGroup parent) {
             TextView textView = getGenericView();
                textView.setText(getChild(groupPosition, childPosition).toString());
                return textView;
        }

        public long getChildId(int groupPosition, int childPosition) {
            // TODO Auto-generated method stub
            return childPosition;
        }

        public Object getChild(int groupPosition, int childPosition) {
            // TODO Auto-generated method stub
            return children[groupPosition][childPosition];
        }

        public boolean areAllItemsEnabled() {
            // TODO Auto-generated method stub
            return false;
        }

        public TextView getGenericView() {
            // Layout parameters for the ExpandableListView
            AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                    ViewGroup.LayoutParams.FILL_PARENT, 64);

            TextView textView = new TextView(expandXml.this);
            textView.setLayoutParams(lp);
            // Center the text vertically
            textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
            // Set the text starting position
            textView.setPadding(36, 0, 0, 0);

            return textView;
        }

    };
    listView.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {

        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {

            Object x =adapter.getChild(groupPosition, childPosition);

            //Object o = this.getExpandableListAdapter().getChild(groupPosition, childPosition);
            String key =x.toString();
             Toast.makeText(expandXml.this,"Secildi "+key ,Toast.LENGTH_LONG).show();       
            return true;
        }
    });
    Button butex = (Button)findViewById(R.id.button1);
    butex.setOnClickListener(expandgroup);

    listView.setAdapter(adapter);

}
private OnClickListener expandgroup = new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        listView.expandGroup(3);

    }
}; } 
```

# java - 尽可能将变量声明为“final”是一种好习惯吗？

> ID：10690440
> 
> 赞同：32
> 
> 时间：2012-05-21T18:16:22.307
> 
> 标签：java, final

> **可能重复：**
> [什么时候应该使用final？](https://stackoverflow.com/questions/154314/when-should-one-use-final)

`final`除非必要，我倾向于声明所有变量。我认为这是一个很好的做法，因为它允许编译器检查标识符是否按我的预期使用（例如，它没有发生突变）。另一方面，它使代码混乱，也许这不是“Java 方式”。

我想知道是否存在关于非必需使用最终变量的普遍接受的最佳实践，以及是否应该注意此讨论的其他权衡或方面。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T18:27:15.687

“Java 方式”本质上是杂乱无章的。

我说这是一种很好的做法，但我没有遵循。

测试通常可以确保我在做我想做的事，这对我的审美*来说太混乱了。*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-21T18:32:29.090

我经常`final`在我的代码中应用局部变量，并且在首先用关键字标记所有*有效的最终*变量后发现*阅读代码更容易。*我认为这是对代码的真正增强，并在此后立即提交。*`final`*

 *至于代码混乱的问题，当应用于局部变量时，我认为它没有破坏性——事实上，由于语法着色，它使我更容易发现所有声明。

不过，我必须承认，当用于参数、catch 块、增强的 for 循环和除狭义的局部变量之外的所有其他地方时，我*确实*发现它非常混乱。`final`这是非常不幸的，因为在这些情况下重新分配更加令人困惑，并且默认情况下它们确实应该是最终的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-21T18:23:13.647

我认为这是一种很好的做法，对于维护程序员（包括我！），而不是编译器。如果我不需要担心其中的哪些变量可能会发生变化，那么考虑一种方法会更容易。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-21T18:27:18.903

是的，这是一个非常好的主意，因为它清楚地显示了在对象构造时必须提供哪些字段。

我强烈反对它会造成“代码混乱”；这是语言的一个好的和强大的方面。

作为设计原则，如果可以的话，您应该使您的类[不可变](http://en.wikipedia.org/wiki/Immutable_object)（所有最终字段），因为它们可以安全地发布（即自由传递而不必担心它们会被破坏）。虽然请注意，字段本身也需要是不可变对象。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-21T18:24:51.743

它肯定会为您提供更好的代码，很容易看出哪些变量将被更改。

它还通知编译器它不会改变，这可能会导致更好的优化。

除此之外，如果您倾向于犯任何错误，它还允许您的 IDE 向您提供编译时间通知。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-21T18:23:04.147

一些好的分析工具，比如 PMD，建议`final`除非必要，否则总是放。因此，该工具中的约定说这是一个好习惯

但我认为代码中如此多的最终标记可能会使它对人类不那么友好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-21T18:30:37.467

我会说是的，不是为了编译器优化，而是为了可读性。

但我个人不使用它。Java 本身就非常冗长，如果我们遵循所有被认为是“好的做法”，那么代码将无法从所有样板中删除。不过，这是一个偏好问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-21T18:26:02.510

优缺点都总结的差不多了。。。

我可以添加另一个骗局：

代码的读者根本不需要推理最终变量的值（除了罕见的错误代码情况）。

所以，是的，这是一个很好的做法。

在你习惯了它之后，混乱并没有那么糟糕（比如 unix :-P）。另外，典型的 IDE 会自动为您执行此操作...*

# asp.net - ASP.NET 网页翻译和模板概念

> ID：10690453
> 
> 赞同：0
> 
> 时间：2012-05-21T18:17:28.810
> 
> 标签：asp.net, translation, webmatrix, concept

我刚开始玩 WebPages (Razor)，我想出了一些基本概念。首先，我为我构建的每个站点列出了我总是需要的东西：

*   当然是友好的网址（网页为我做）
*   翻译后的网址（网页支持参数，因此易于管理）
*   多模板支持（网页默认不支持，这里需要一些逻辑）
*   每个函数的代码分开以避免重复（WebPages在墙后支持它）

因此，如果您考虑上面的列表，那么好的旧 MVC 模式就会发挥作用。ASP.NET 已经有一个 MVC(3) 框架，它提供了我需要的所有功能。我很清楚。在这个问题上，我试图弄清楚 WebPages 技术是否也是开发大型 MVC（类似）Web 项目的完美平台。

我测试了网页加载行为/网页链，并发现它实际上是由加载的页面和一个或多个嵌套布局构建的链。每个布局页面都有一个指向其加载器（父）页面的指针。

至此，我要理清一些基本概念。由于网页通过物理文件和文件夹（路径）解析 url，因此间接支持翻译的 url，因为我可以使用如下路径创建翻译的文件夹和文件： ..../en/account/register 并且我可以创建另一个路径，例如匈牙利语路径：.../hu/szemelyes/regisztracio。

我所需要的只是分离代码，因为将寄存器逻辑写入两个 .cshtml 文件并不那么优雅。WebPages 支持@helpers 和@functions，因此很容易创建“Account.cshtml”并创建我需要的所有功能。这是对我问题的官方回答。

如果我在某个 .cshtml（帮助程序）文件中写了一个 @function，那么墙后面会发生什么？它为我创建了一个继承 WebPageHelper 的新类。我认为这不太优雅，因为我可以创建自己的类来提供相同的功能。

一些进一步的研究我发现每个页面（和布局页面）默认都继承 WebPage 类。使用@inherits 指令，我可以覆盖默认继承及其完美的方式来创建我自己的从WebPage 派生的类，并且在我的所有.cshtml 文件中，我可以直接从该页面继承。

在这一点上，我可以用比使用@functions 更优雅的方式分离代码（我认为：）。文本翻译呢？我认为这是一种使用资源文件的通用方式，但对于 WebPages，我考虑将文本值存储在普通的 .cshtml 文件中。你怎么看待这件事？

最后是我的 register.cshtml：

```
@inherits Account.Register
@{
     Title = "Please Register"
} 
```

..和我的 regisztracio.cshtml：

```
@inherits Account.Register
@{
    Title = "Kérem regisztráljon"
} 
```

我的 Account.Register 类有一个字符串属性标题：

```
public class Register : WebPage
{
    public String Title { get; set; }
    ...
} 
```

还有一件事我要说。我的 register.cshtml（以及 regisztracio.cshtml）不包含任何 html 标记。我有一个默认布局文件（_Master.cshtml），并且我的“视图”目录下的每个页面都有另一个布局文件（_Register.cshtml）。我的代码通过我加载的“控制器”类的名称自动加载正确的页面布局文件。所以我的注册类自动加载“_Register.cshtml”布局文件。所有页面布局文件都会自动加载 _Master.cshtml（如果访问者使用移动设备，则为 _Mobile.cshtml），这是主要布局。

所以我认为这是为 WebPages 技术实现的 MVC 模式，同时保持 WebPages 强大的功能，如自动 url 解析。

你怎么看？

所以这是我对网页的基本概念

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:46:13.067

我敢肯定，当您更多地接触该框架时，您将结合其他实践。至于语言翻译，您可以使用文化设置以及资源文件。您可以根据查询参数通过 global.asax 设置当前的文化设置。

初始化区域性设置的示例：

```
CultureInfo ci = new CultureInfo("en-US");
Thread.CurrentThread.CurrentCulture = ci;
Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture(ci.Name); 
```

然后，您的解决方案将无缝地使用资源字符串而不是文字字符串，从而使您的代码更清晰和强类型。在您的情况下，它还可以避免有两个单独的注册视图。

```
@inherits Account.Register
@{
    Title = StringsResource.RegisterTitle
} 
```

根据文化设置，Title 变量将包含“请注册”文本或“Kérem regisztráljon”。

祝你好运！

# java - jar 中的类什么时候进入 PermGen

> ID：10690457
> 
> 赞同：5
> 
> 时间：2012-05-21T18:17:47.220
> 
> 标签：java, tomcat, classpath, classloader, permgen

我的理解是 PermGen（在某种意义上）将类代码保存在内存中。通常我们有很多引用我们的类路径的 jar 文件。当一个 jar 文件包含在类路径中（比如在 tomcat 的 lib 目录中）时，所有这些 jar 的所有类是否都会自动加载到 PermGen 中？

在一个类似的问题中，一旦使用了一个 jar 文件的类，PermGen 是加载该 jar 文件中的所有类，还是只加载使用的类（然后在必要时加载其余的类文件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:28:45.420

这在某种程度上取决于类加载器和 JVM 的实现[——Java 虚拟机规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.2)是这样说的：

> 该规范允许在何时发生链接活动（以及由于递归，加载）时实现灵活性，前提是尊重 Java 编程语言的语义，[...]
> 
> 例如，实现可以选择单独解析类或接口中的每个符号引用，仅在使用时（延迟或延迟解析），或者在验证类时一次性解析它们（静态解析）。这意味着在某些实现中，在初始化类或接口之后，解析过程可能会继续。

在实践中，任何合理的实现都不应该仅仅因为加载了文件中的一个类就自动加载 JAR 文件中的所有内容，更不用说仅仅因为它在类路径上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:30:47.860

PermGen 是 HotSpot 的一个实现细节，Oracle 表示他们希望在未来摆脱它 [1]。它不是 Java (VM) 规范的一部分。只有加载的类最终会出现在 PermGen 中。通过链接显式地`ClassLoader#loadClass`或隐式地通过链接。那应该只是使用的类（及其依赖项），除非有人明确加载所有类，例如。对它们进行反思。像 Spring 这样的框架避免了这种情况，而是扫描字节码。

一个很好的起点是[VisualVM](http://visualvm.java.net/)，它允许您观察加载的类 PermGen。

[1] JRockit 没有 PermGen，并且在最近的 HotSpot 版本中，字符串实习生池不再在 PermGen 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:19:41.497

只有需要的类被加载并存储在 permgen 空间中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T18:21:15.163

[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1)保证一个类在第一次被需要时被初始化——并且不早于它。但是，允许实现更早地执行加载和链接。

# java - Java RAF - 如果文件被重命名怎么办

> ID：10690459
> 
> 赞同：0
> 
> 时间：2012-05-21T18:18:07.143
> 
> 标签：java, file-io

如果我针对文件创建一个 java Random Access File 对象。重命名文件时会发生什么？

情况1。假设我针对 test.log 创建了一个 RAF 对象。然后我通过执行类似的操作重命名了 test.log -> test1.log

```
mv test.log test1.log 
```

在这种情况下，我的 RAF 对象会发生什么？

案例2。再次针对 test.log 创建一个 RAF 对象，然后：

```
mv test.log test1.log
touch test.log 
```

在这种情况下，我的对象是指向 test.log 还是 test1.log

案例3。如果我的 RAF 对象指向一个最终将被轮换的日志文件怎么办？

最重要的是，有人可以向我解释一下封面下发生了什么吗？就像 RAF 对象如何指向/引用实际文件，当文件被重命名或删除时它是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:21:47.937

我做了一个小测试：

*   创建了一个随机访问文件，并弹出了一个 joption 窗格。
*   当对话框打开时，我删除了完全允许的文件。
*   然后尝试在文件上写入并关闭它，它默默地发生了。

至少在我的 linux 机器上它的行为就像它。

当我尝试移动文件时，无论成功，内容都会被写入。

对于案例 2，内容将写入您所指向的“test1.log”。

对于 3d 情况，不，文件最终不会旋转。

抱歉之前的疯狂猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:02:47.823

============================

我自己的测试

============================

```
 RandomAccessFile rand = new RandomAccessFile("/tmp/test_log", "rw"); 
    System.out.print("file created"); //======lineA======
    while (true) {
        Thread.sleep(8000);
        System.out.print("finish sleeping");
        int i = (int) rand.length(); //=====lineB=====
        rand.seek(0); // Seek to start point of file
        for (int ct = 0; ct < i; ct++) {
            byte b = rand.readByte(); // read byte from the file
            System.out.print((char) b); // convert byte into char
        }
    } 
```

测试用例1：

在 lineB 之前删除 lineA 之后的 test_log 文件，它完成读取整个文件而没有任何问题/异常。

测试用例 2：

mv /tmp/test_log /tmp/test_log.bk 在 lineA 之后 lineB 之后，它再次完成读取整个文件而没有任何问题/异常。

测试用例 3：

在测试用例 2 之后，开始向 /tmp/test_log.bk 写入额外的行，

```
echo "test line1 bla bla" >> /tmp/test_log.bk
echo "test line2 bla bla" >> /tmp/test_log.bk 
```

它现在读取整个文件的问题，另外，它还读取了 test_log.bk 中添加的新行。

# c# - 当要参数化的类型的目标不是顶级属性时，如何制作泛型函数？

> ID：10690460
> 
> 赞同：0
> 
> 时间：2012-05-21T18:18:08.080
> 
> 标签：c#, function, generics

更一般地说，我想知道当要参数化的类型的目标不是顶级属性时，您如何制作通用例程。

具体来说，我正在努力消除这两个函数的重复：

```
 private static string ExceptionMessage(Exception e)
    {
        string result = string.Empty;
        Exception exception = e;
        while (exception != null)
        {
            if (e.Message != null)
            {
                if (result.Length > 0)
                {
                    result += Separator;
                }
                result += exception.Message;
            }
            exception = exception.InnerException;
        }
        return result;
    }

    private static string Tag(Exception e)
    {
        string result = string.Empty;
        Exception exception = e;
        while (exception != null)
        {
            if (e.TargetSite != null)
            {
                if (result.Length > 0)
                {
                    result += Separator;
                }
                result += exception.TargetSite.Name;
            }
            exception = exception.InnerException;
        }
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:21:46.147

（目前）没有办法通过泛型显式地做到这一点，我认为向你的函数发送一个布尔参数不是你想要的。

您可以通过传入一个闭包来解决此问题，该闭包提取您需要的 Exception 实例的一部分，如下例所示：

```
private static string AggregateException(Exception e, Func<Exception,string> getPart){
        string result = string.Empty;
        Exception exception = e;
        while (exception != null)
        {
            if (e.Message != null)
            {
                if (result.Length > 0)
                {
                    result += Separator;
                }
                result += getPart(exception);
            }
            exception = exception.InnerException;
        }
        return result;
} 
```

示例用法：

```
 string msg = AggregateException(myEx, (ex) => ex.Message);
    string tag = AggregateException(myEx, (ex) => ex.TargetSite.Name); 
```

# backbone.js - _.bindAll 函数

> ID：10690461
> 
> 赞同：0
> 
> 时间：2012-05-21T18:18:26.707
> 
> 标签：backbone.js, backbone-views

我的问题很可能需要一个非常简单的答案，然而，我无法轻易找到。

我正在处理的一个 Backbone 应用程序有几个视图。在定义不同的视图时，我在初始化函数中使用 _.bindAll 将“this”视图对象与视图的渲染函数连接起来。例如：

```
DiscussedItemView = Backbone.View.extend({
    ...
        initialize: function() {
            _.bindAll(this, "render");
        },

        render: function() {    

            this.$el.attr('id', 'li-meeting-task-' + this.model.getId());

            this.$el.html(JST['tasks_sandbox/agenda_task_item']({ 
                taskName    : this.model.getName(),
                taskId      : this.model.getId()
            }));

            return this;
        },
    ...
}); 
```

要创建 DiscusedItemView 的新实例，我执行以下操作：

```
...
        var discussion_agenda_row = new DiscussedItemView({model: task});
        discussion_agenda_row.render();
        this.$( '#meeting-items-list' ).append(discussion_agenda_row.$el); 
... 
```

代码工作正常。尽管如此，我还是不明白为什么需要在讨论议程上显式使用 render() 函数。我以为初始化一个新的 DiscusedItemView 实例会自动调用渲染函数，但是如果我删除该`discussion_agenda_row.render();`行，则不会显示 HTML。我错在哪里？

谢谢你，亚历山德拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:22:16.033

不，`render`不会被 自动调用`initialize`。应用程序中的其他组件（例如路由器或其他视图）将告诉您的视图何时呈现自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:28:51.433

视图响应模型中的变化。在您的代码中，您没有对模型进行更改，因此视图没有响应。您还没有将视图设置为模型更改的侦听器。你可以在你的初始化中做的是这样的：

```
initialize : function() {
    //this will tell the view to render when the model 
    //triggers a "change" event
    this.model.on("change", this.render, this);

    //this will make the model throw the change event
    //and since the view is listening to "change," render will be invoked.
    this.model.fetch();
} 
```

综上所述，如果您不进行任何获取并且数据就在您的模型中，您仍然必须显式调用 view.render()。无论如何，对于好的 MVC，我仍然会让视图监听模型中的变化，以便它会正确地更新自己作为响应。

# html - 如何水平居中 DIV

> ID：10690464
> 
> 赞同：1
> 
> 时间：2012-05-21T18:18:41.543
> 
> 标签：html, forms, css, center

如何使用此 URL 上的文本框和按钮将 DIV 水平居中：http: [//tinyurl.com/d4lpyh5](http://tinyurl.com/d4lpyh5)？

问候，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:23:08.483

在第 10 行，您应该为 div 添加一个宽度：更改

```
<div style="margin-left: auto; margin-right: auto;"> 
```

至

```
<div style="margin-left: auto; margin-right: auto;width: 700px;"> 
```

编辑：如果这样做，则必须将输入元素的宽度更改为固定像素值，而不是`width: 30%;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:09:05.313

尝试这个。

```
<center>
<input type="text" />
</center> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:53:27.910

左边距：自动；和 margin-right: 自动将剩余的宽度分成两半，结果元素居中。这让你更接近，但它不是一切。（不幸的是，即使它是正确的，它也不会改变外观。）

*元素看起来*还没有居中的原因是元素默认情况下是容器/屏幕的整个宽度。因此，要使水平居中工作，您不仅需要指定左右自动边距，还需要进一步明确设置元素的宽度。

希望能够指定诸如“宽度：最小需要；”之类的东西。所以它会自动调整到它包含的任何内容......但CSS中没有这样的东西。我知道的唯一方法是以对您所知道的内容有意义的方式显式指定元素的宽度。

因此，例如，下面是您的代码已修改，因此看起来像我对您想要的东西的理解（此处可能有一个额外的 <div> ，您可能希望将此信息封装在样式表中……但是您明白了） ：

```
<html>
<head>
<title>Page</title>
<link rel="stylesheet" href="http://145.120.12.115/project/css/main.css"></link>
<meta name="viewport" content="width=device-width" />
</head>
<body>
<div class="top"></div>
<div class="search">
    <div style="margin-left: auto; margin-right: auto; width: 40ex;">
      <input type="text" id="q" name="q" value="" style="width: 30ex;"/>
      <input type="submit" class="blueButton button" value="Search" />
    </div>
</div>
</body>
</html> 
```

# asp.net-mvc - 使用“RedirectToAction”从控制器重定向到哈希

> ID：10690466
> 
> 赞同：93
> 
> 时间：2012-05-21T18:19:03.163
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

你好我想从 Mvc 控制器返回一个锚点

控制器名称= DefaultController；

```
public ActionResult MyAction(int id)
{
        return RedirectToAction("Index", "region")
} 
```

因此，指向索引时的 url 是

```
http://localhost/Default/#region 
```

以便

```
<a href=#region>the content should be focus here</a> 
```

我不是在问您是否可以这样做：[如何将锚标记添加到我的 URL？](https://stackoverflow.com/questions/7904835/how-can-i-add-an-anchor-tag-to-my-url)

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-05-21T18:22:29.000

我发现这种方式：

```
public ActionResult MyAction(int id)
{
    return new RedirectResult(Url.Action("Index") + "#region");
} 
```

您也可以使用这种详细的方式：

```
var url = UrlHelper.GenerateUrl(
    null,
    "Index",
    "DefaultController",
    null,
    null,
    "region",
    null,
    null,
    Url.RequestContext,
    false
);
return Redirect(url); 
```

[http://msdn.microsoft.com/en-us/library/ee703653.aspx](http://msdn.microsoft.com/en-us/library/ee703653.aspx)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-29T03:49:24.640

很好的答案gdoron。这是我使用的另一种方式（只是为了在此处添加可用的解决方案）。

```
return Redirect(String.Format("{0}#{1}", Url.RouteUrl(new { controller = "MyController", action = "Index" }), "anchor_hash"); 
```

显然，通过 gdoron 的回答，在这个简单的情况下，可以通过以下方式使这更清洁；

```
return new RedirectResult(Url.Action("Index") + "#anchor_hash"); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-09-13T14:10:39.980

点网核心的简单方法

```
public IActionResult MyAction(int id)
{
    return RedirectToAction("Index", "default", "region");
} 
```

以上产生**/default/index#region**。第三个参数是在# 之后添加的**片段。**

[Microsoft 文档 - ControllerBase](https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase.redirecttoaction?view=aspnetcore-2.1#Microsoft_AspNetCore_Mvc_ControllerBase_RedirectToAction_System_String_System_String_System_String_)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-31T10:51:54.500

扩展 Squall 的答案：使用字符串插值使代码更清晰。它也适用于不同控制器上的操作。

```
return Redirect($"{Url.RouteUrl(new { controller = "MyController", action = "Index" })}#anchor"); 
```

# c# - EntityFramework 多表多对多

> ID：10690467
> 
> 赞同：0
> 
> 时间：2012-05-21T18:19:06.847
> 
> 标签：c#, entity-framework, many-to-many, code-first, multi-table

我正在使用 EF4.1 Code First 并尝试创建一些需要链接表的多对多关系表。请看下面的一小段代码：

```
class Event
{
    int EventId { get; set; }
    ICollection<Contact> Contacts { get; set; }
}

class Contact
{
    int ContactId { get; set; }
    ICollection<Relation> Relations { get; set; }
}

class Relation
{
    int RelationId { get; set; }
    string Name { get; set; }
} 
```

所以Contacts对象可以有很多不同类型的Relationship，比如“Mother”、“Father”、“Brother”等。

**我需要跟踪联系人参加的某种活动，但我想知道他与举办活动的人有什么关系。例如，他是事件者的兄弟、父亲还是丈夫？在另一个事件中，同一个人可能会出现，但会是事件者的姐夫。**

Event to Contact 是多对多的；与联系的关系是一对多的。

在 SQL 中，我们只需要创建一个链接表，并在其中包含所有三个属性 Id（EventId、ContactId、RelationId）；但是，在 Code First 中，**您将如何表示这种关系？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:26:28.153

与数据库相同，您必须创建一个映射实体，就像 ContactEvents 一样，如数据库中的映射表。

```
class Event
{
  int EventId { get; set; }
  ICollection<ContactEvent> ContactEvents { get; set; }
}

class ContactEvent
{
  int EventId {get;set;}
  int ContactId {get;set;}
  public virtual Event Event {get; set;}
  public virtual Contact Contact {get;set;}
}

class Contact
{
   int ContactId { get; set; }
   ICollection<ContactEvent> ContactEvents { get; set; }
   ICollection<Relation> Relations { get; set; }
}

class Relation
{
  int RelationId { get; set; }
  string Name { get; set; }
  public virtual Contact Contact {get; set}
} 
```

# sqlite - 解析 ATCO CIF 文件以生成 CSV 或 XML 输出

> ID：10690468
> 
> 赞同：2
> 
> 时间：2012-05-21T18:19:09.047
> 
> 标签：sqlite, parsing, csv

我有一堆 .cif 文件，总大小约为 33Mb，其中包含有关本地公共汽车及其时间表的信息。每行以不同的标识符开头，以指示该行的全部内容。

示例行：

`QSN319 020S3_20110104219912311111100 S3 LFBUS O`

表示这是一个巴士旅程信息，一些不同的日期和巴士`S3`运行的星期几。您可以查看更详细的示例[http://pastebin.com/3jzp6QL9](http://pastebin.com/3jzp6QL9)

我需要做的是以某种方式将所有（或部分选择，例如我不需要`QSN`在我的数据库中的一部分）数据解析为 CSV 或 XML，以便进一步导入 SQLite。我只需要朝着正确的方向推进，并需要一些我可以使用的工具。awk 和 sed 是否足以做到这一点，或者我应该更多地研究从头开始编写解析器。

任何意见或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:37:14.837

我在 David J. Rice 的[ATCO-CIF 解析器](https://github.com/davidjrice/atco)上取得了相当大的成功。它是用 Ruby 编写的。

# android - 从移动设备上传照片和视频

> ID：10690469
> 
> 赞同：0
> 
> 时间：2012-05-21T18:19:23.103
> 
> 标签：android, ios, windows-phone-7, mobile, mobile-application

请原谅我在移动应用领域缺乏知识。

我们希望我们的用户能够将照片和视频从移动设备（iPhone、Android、Windows、iPad、平板电脑）上传到我们的网络服务器（网站）

我们应该如何着手？

是否已经开发了我们可以购买或定制的应用程序？

我希望我们不必从头开始——模型、需求等

请帮助我快速找到正确的方向。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:23:49.933

您可以尝试在不同的应用市场上进行搜索，尽管您肯定需要一个适用于 Android 的应用、一个适用于 iOS 的应用和一个适用于 WindowsPhone 的应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:55:24.577

您可以使用移动 Web 应用程序上传照片——您不必创建本地应用程序。这意味着您可以创建一个适用于所有平台的 Web 应用程序，而无需为每个平台构建单独的应用程序。需要注意的是，iOS 设备上的股票 Safari 浏览器不支持上传。用户必须使用不同的浏览器，例如 iCab 浏览器。

[这是一个支持照片上传](http://www.crazybikes.com/mrcjava/servlet/CBB2E.M07050s)的移动网络应用程序示例。请记住，该应用程序旨在根据用于访问它的设备显示不同的表示层……因此，如果您在 PC 上，它将看起来像 PC 应用程序，但如果您在智能手机上看起来像一个智能手机应用程序。因此，如果您想查看移动网络版本，您需要在智能手机上访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:22:46.343

您需要将手机或桌子连接到计算机才能从计算机上传照片……如果您在上传照片时遇到问题，只需将照片发送到您的电子邮件并从手机下载！

# ruby-on-rails - Heroku 与自己的 Linux 服务器？

> ID：10690476
> 
> 赞同：0
> 
> 时间：2012-05-21T18:19:53.897
> 
> 标签：ruby-on-rails, ruby, linux, hosting

我知道许多 Rails 开发人员都称赞 heroku，但 imo 非常昂贵。1 Dyno 大约 36 美元，不包括插件。我的问题是管理自己的服务器有多难，比如你需要注意哪些问题。

**我的经验**

我在机架空间云上设置了自己的服务器，其中包括 ubuntu 10.10、apache、passenger、mysql、rails 和需要应用程序的 gem。我不是系统管理员，但我熟悉 linux 和一些命令。虽然我设置了自己的服务器并部署了我的应用程序，但我使用 heroku 而不是设置、部署和使用我自己的服务器的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:33:39.850

优点是 heroku 是为 Rails 部署设置的，而且工作量很小。如果 cost:convenience 对您有利，那么您部署到 heroku。

如果您拥有专业知识并且可以管理自己的服务器，那么您可以自己动手并节省资金。

Heroku 对于低流量站点也可以完全免费，因此它对于为客户会议或演练部署开发版本非常有用

换句话说，购买、准备和烤牛排与在餐馆吃饭相比有什么优势？

# c# - 根据运行安装程序期间输入的值更新 App.config

> ID：10690481
> 
> 赞同：0
> 
> 时间：2012-05-21T18:20:26.303
> 
> 标签：c#, windows-installer, app-config

我正在开发一个桌面应用程序安装程序，我需要在使用自定义操作安装应用程序期间从用户那里获取一些输入。这些值需要更新到`app.config`应用程序中。

我指的是以下文章： [http ://raquila.com/software/configure-app-config-application-settings-during-msi-install/](http://raquila.com/software/configure-app-config-application-settings-during-msi-install/)

但值没有更新。我完全按照上面文章中提到的步骤进行操作，但没有发生任何事情。甚至我的应用程序也没有给出任何错误/异常。此外，我无法在安装程序文件中放置断点。

任何人都可以提出一些建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:23:45.490

作为一种变通方法，在第一次初始化应用程序时，编写一个临时文件并读取/保存这些值。使用标志，以便此过程仅在第一次发生。只是一个建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:09:04.483

您可以尝试将这些值传递给日志文件，以查看是否可以从文本框中实际读取它们（或者是否将它们正确传递给类）。此外，您可以尝试从安装程序类中在 app.config 中编写一些内容（而不从表单中获取某些内容），这样做您将查看您的类是否能够在文件中写入（即创建一个“ Param4" 并将以下内容添加到类中：)`config.AppSettings.Settings["Param4"].Value = "test";`希望这会有所帮助。

# mercurial - 使用基于 GUI 的工具提交 BitBucket

> ID：10690486
> 
> 赞同：6
> 
> 时间：2012-05-21T18:20:42.060
> 
> 标签：mercurial, bitbucket

我正在按照此处列出的步骤操作： [http ://confluence.atlassian.com/display/BITBUCKET/Set+up+Git+and+Mercurial?utm_source=internal&utm_medium=link&utm_campaign=blank_repo](http://confluence.atlassian.com/display/BITBUCKET/Set+up+Git+and+Mercurial?utm_source=internal&utm_medium=link&utm_campaign=blank_repo)

并创建了一个 Mercurial repo 并且还安装了 TurtoiseHG ...但是当教程转到如何从我们的本地机器向这个 repo 添加代码的部分时，仍然可以通过命令行和那些总是吓死我了 :) 所以没有像我们为 TurtoiseSVN 提供的 GUI 工具，只需右键单击工作副本并繁荣！犯罪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:45:30.987

官方 Bitbucket wiki 中甚至还有 TortoiseHG 的说明，在您发布的链接之后的三页。

看看这个：
[分叉一个回购，比较代码，并创建一个拉取请求](http://confluence.atlassian.com/display/BITBUCKET/Fork+a+Repo,+Compare+Code,+and+Create+a+Pull+Request)

是的，该页面首先是关于使用 Bitbucket Web GUI 分叉存储库。
但是一旦你分叉了一个存储库，在你的机器上获取它、更改它并推送回服务器的步骤是完全相同的。

上面链接中的这两个步骤描述了确切的工作流程，包括 TortoiseHG 屏幕截图：

*   步骤 2\. 克隆你的 fork
*   步骤 3\. 更改存储库源

* * *

您还可以在 TortoiseHG官方文档中阅读[TortoiseHg 快速入门指南。](http://tortoisehg.bitbucket.io/manual/2.4/quick.html)
（[步骤 4.8 “从组存储库中获取”](http://tortoisehg.bitbucket.io/manual/2.4/quick.html#fetching-from-the-group-repository)描述了克隆。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:29:21.460

我建议查看[TortoiseHG 文档](http://tortoisehg.bitbucket.io/manual/2.4/commit.html)。您绝对可以从 GUI 执行此操作。

![TortoiseHG 提交屏幕](../Images/a14496f0125c7726634d147a87c0ecb7.png)

如果您要从 SVN 等非 DVCS 迁移，请记住，在将代码发布到 BitBucket 之前，您有一个使用这些工具 (COMMIT/PUSH) 的两步提交过程。第一步（COMMIT）只是将它推送到存储库的本地副本。

如果您不习惯使用命令行语法，[TortoiseHG 工作台](http://tortoisehg.bitbucket.io/manual/2.4/workbench.html?highlight=workbench)将是您最好的朋友。

# iphone - iPad 上的选项卡式表单

> ID：10690487
> 
> 赞同：1
> 
> 时间：2012-05-21T18:20:43.850
> 
> 标签：iphone, ios, forms, uitableview

几周前我刚刚开始在 iOS 上编程，如果这些问题真的很基础，很抱歉。

小故事：我正在设计一个需要捕获大量客户数据的 CRM 应用程序。我正在尝试模拟使用选项卡式表单的桌面应用程序。在 iPad 上实现此功能的最佳方式（技术上和视觉上）是什么？

我需要以下内容：

*   每个选项卡（其中 5-6 个）包含许多不同类型的字段（带有标签），我喜欢使用专门的控件（例如 uidatepicker、uipickerview/uisegmentedcontrol、textarea+stepper、switch 等），而不是只是原始文本字段
*   理想情况下（实际上这是一个非常关键的要求）必须以编程方式生成 UI，这样模型的更改就不需要手动调整 IB 中的表单
*   能够在标签之间切换而不会丢失当前标签中已经输入的数据。

到目前为止，我的进步，重新。整体切换机制：

*   我最初认为将选项卡切换器实现为分段控件，在不同视图之间切换，如 Matthias 的评论中[所述](https://stackoverflow.com/questions/9110567/switching-viewcontrollers-with-uisegmentedcontrol-in-ios5)。然而，按需实例化 VC 意味着丢失已经输入的数据（除非我会实现某种缓存，但我希望有更简单的东西）。

*   我现在正在考虑通过以编程方式显示/隐藏它们来切换视图的更简单的方法，但我担心这可能会占用太多内存（我正在查看总共可能超过 100 个字段）。

至于在每个选项卡中表示表单字段：

*   我可以在 IB 中手动布置它们（或作为 tableview 中的静态单元格），但我真的不想这样做，因为这基本上意味着 UI 是硬编码的并且难以更改
*   我更喜欢以编程方式创建界面，但我不知道处理不同的字段类型、附加弹出窗口（例如用于日期字段的日期选择器）、处理字段事件等有多容易。

如果有人有任何我可以使用的指针，我将不胜感激。

TIA，卢锡安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:50:06.390

我认为您使用一个视图控制器走在正确的轨道上，拥有一个视图，然后具有您根据需要隐藏/显示的子视图。

宽广地：

*   一个顶级 UIView，包含选项卡按钮（为此使用普通 UIButtons），并拥有多个 UIViews
*   每个 UIView 都有每个“选项卡”所需的字段

然后切换选项卡，只需隐藏一个视图并显示另一个视图，一切都会好起来的。

我不会担心内存消耗——iPad 的内存足以容纳 100 多个 UI 控件，因为我不希望你会做很多自定义图形。如果您确实内存不足，您始终可以根据需要为每个选项卡创建控件 - 切换选项卡需要更长的时间，但会起作用。

至于以编程方式布局：这是完全可能的。创建 iPad UI 时有 2 个基本选项 - 使用 XIB 文件（使用 XCode 中的图形设计器设计），或者在代码中进行，通常在`-viewWillAppear`或`-viewDidLoad`. 所有相关的事情都可以完成 - 查看每个 UI 控件的文档以了解如何配置它。

# excel - 如果超过1个匹配的Excel VBA如何查找下一个值

> ID：10690488
> 
> 赞同：0
> 
> 时间：2012-05-21T18:20:44.817
> 
> 标签：excel, vba

如果超过 1 个匹配，我正在尝试使此搜索能够找到下一个值。 ![在此处输入图像描述](../Images/526321d1beca66bd5a1ec35da457de87.png)

现在，它所能做的就是显示第一个匹配的。

基本上，如果我按下按钮“NEXT”然后它只是转到下一个匹配值。

我的逻辑：我认为我必须从当前范围中减去总范围，但我对此有困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T01:25:25.490

可以找到解决办法

[Siddharth Rout 的 VBA 页面](http://www.siddharthrout.com/2011/07/14/find-and-findnext-in-excel-vba/)

![在此处输入图像描述](../Images/e62b7c2c89b8c2675ccc4ecf54b15d3d.png)

我使用列表框来存储值（Listbox1.AddItem aCell.Address）

谢谢Siddharth Rout

# java - 传递 Date 参数以创建日期范围查询

> ID：10690493
> 
> 赞同：1
> 
> 时间：2012-05-21T18:21:09.140
> 
> 标签：java, jsp, postgresql, jdbc

使用下面的代码，我想问一下如何传递来自文本字段的“日期”参数。我打算使用 DAO 和 servlet 创建一个简单的日期范围查询。我可以使用此代码显示所有列，但是我想使用 Date 过滤...

这是我的代码：

```
My Servlet

package source;

import java.io.*;
import java.sql.SQLException;
import java.util.*;
import javax.servlet.ServletException;
import javax.servlet.http.*;

/**
 *
 * @author jaypee.martinez
 */
public class parseServlet extends HttpServlet {

    private parseDAO parseDAO;

    @Override
    public void init() throws ServletException {
        String driver = "org.postgresql.Driver";
        String url = "jdbc:postgresql://localhost5432/mydb";
        String username = "postgres";
        String password = "secret";

        Database database = new Database(driver, url, username, password);
        this.parseDAO = new parseDAO(database);
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

            try {

            List<parseBean> parse_array = parseDAO.results();

            request.setAttribute("parse_array", parse_array);
            request.getRequestDispatcher("results.jsp").forward(request, response);
        }
            catch (SQLException e) {
            throw new ServletException("Cannot retrieve areas", e);
        }
    }

} 
```

和我的 DAO

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package source;

import java.sql.*;
import java.sql.SQLException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.*;

public class parseDAO {

    private Database database;

    public parseDAO(Database database) {
        this.database = database;
    }

    public List<parseBean> results() throws SQLException {
        Connection connection = null;
        PreparedStatement statement = null;
        ResultSet resultSet = null;
        List<parseBean> parse_array = new ArrayList<parseBean>();
        SimpleDateFormat df=new SimpleDateFormat("yyyy-MM-dd");

        try {
            connection = database.getConnection();
            statement = connection.prepareStatement("select * from dateparse");

            resultSet = statement.executeQuery();

            while (resultSet.next()) {
                parseBean parsearray = new parseBean();
                parsearray.setDate(resultSet.getDate("date"));
                parsearray.setName(resultSet.getString("name"));
                parsearray.setAddress(resultSet.getString("address"));
                parse_array.add(parsearray);
            }
        } finally {
            if (resultSet != null) try { resultSet.close(); } catch (SQLException logOrIgnore) {}
            if (statement != null) try { statement.close(); } catch (SQLException logOrIgnore) {}
            if (connection != null) try { connection.close(); } catch (SQLException logOrIgnore) {}
        }

        return parse_array;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:03:40.117

用于[`HttpServletRequest#getParameter()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)收集请求参数。假设输入字段的名称为`date`。

```
String dateString = request.getParameter("date"); 
```

用于[`SimpleDateFormat#parse()`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)将其转换为[`java.util.Date`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)使用特定模式，具体取决于要求最终用户输入日期的方式。

```
Date date = null;

try {
    date = new SimpleDateFormat("yyyy-MM-dd").parse(dateString);
}
catch (ParseException e) {
    // Show error message to enduser about the wrong format and forward back to the JSP with the form.
    request.setAttribute("error", "Invalid format, please enter yyyy-MM-dd");
    request.getRequestDispatcher("search.jsp").forward(request, response);
    return;
} 
```

将此作为方法参数传递给您的 DAO 方法：

```
List<ParseBean> results = parseDAO.search(date); 
```

您需要将其转换为[`java.sql.Date`](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html)，以便您可以[`PreparedStatement#setDate()`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setDate%28int,%20java.sql.Date%29)在 SQL 查询中使用它来设置它：

```
String query = "SELECT * FROM dateparse WHERE date = ?";
// ...
statement.setDate(1, new java.sql.Date(date.getTime())); 
```

您可以使用`WHERE date > ?`搜索比给定日期新的记录，或`WHERE date < ?`搜索比给定日期更旧的记录，或`WHERE date BETWEEN ? and ?`搜索指定日期之间的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:35:15.747

In your `doGet` you will get the value from request

```
String dateFromTxt = request.getParameter("DateFromTxtField"); 
```

Pass this to your dao's `results` method

then your `results` method may look like this :

```
public List<parseBean> results(String filterDate) throws SQLException {

   String query = "select * from dateparse where date = ? ";

   // get connection and prepare statement, also format the incoming date as per your database requirement then say you store this in variable myFormattedDate

   statement.setDate(1, myFormattedDate);

   // Execute query and fetch result.            

} 
```

# php - 用户个人资料内的分页

> ID：10690501
> 
> 赞同：0
> 
> 时间：2012-05-21T18:21:38.547
> 
> 标签：php, sql

我在用户个人资料中有一个分页。

当我在测试配置文件中时，URL 是 profile.php?uid=1

但现在我想使用分页从 SQL 数据库中获取信息。当我在另一个页面上尝试分页时，它工作正常，但正如您所知，分页更改 URL 取决于您在哪一边。

所以我的问题是分页将我的 profile.php?uid=1 更改为 profile.php?page=2

您对如何解决该错误有任何提示吗？

这是我的分页代码。

```
/*pagination */ 
    $per_page = 5;
    //$pages_query = mysql_query("SELECT COUNT('user_id') FROM users");

    $pages_query = mysql_query("SELECT COUNT('file_name') FROM users WHERE  `user_name` = '{$_SESSION['username']}' ") or die(mysql_error()); 
    $pages = ceil(mysql_result($pages_query, 0) /$per_page);

    $page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
    $start = ($page - 1) * $per_page;

    <?php  
 $data = mysql_query("SELECT * FROM users LIMIT $start, $per_page")
 or die(mysql_error()); 
 echo "<table border cellpadding=1>"; 
 while($info = mysql_fetch_array( $data )) 
    { ?><?php
        echo "<tr>"; 
//      echo "<td>".$info['user_id'] . "</td> "; 
        echo "<td>".$info['user_name'] . "</td> ";
    //  echo "<td>".$info['file_name'] . "</td> ";
        ?>
        <td> <a href="download.php?user_id=<?php echo $info['user_id'];?>"> <?php echo $info['file_name']; ?></a></td>
        <?php
        echo "<td>".date('d/m/Y') . "</td>" ;

    }
        echo "</tr>";
        echo "</table>"; 

 if($pages >= 1 && $page <=$pages){

 for ($x = 1; $x<=$pages; $x++){ 

 echo ($x == $page) ? '<strong><a href="?page='.$x.'">' .$x. '</a> </strong>' : '<a href="?page=' .$x. '">' .$x. ' </a> ';

 }

 }

 ?> 
```

/*分页*/

和简介

函数 fetch_user_info($uid){ $uid = (int)$uid;

```
 $sql = "SELECT
    `user_name` AS `username`,
    `user_email` AS `email`
FROM `users`
WHERE `user_id` = {$uid} ";

$result = mysql_query($sql);

return mysql_fetch_assoc($result); 
```

}

```
 $data = mysql_query("SELECT * FROM users") or die(mysql_error()); 

$files = mysql_query("SELECT `file_name` FROM users WHERE  `user_name` = '{$_SESSION['username']}' ") or die(mysql_error()); 
$user_info = fetch_user_info($_GET['uid']); 
```

我真的不知道如何解决这个问题=/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:25:39.667

看起来您没有在寻呼机链接中传递用户 ID，请尝试更改此行...

```
echo ($x == $page) ? '<strong><a href="?page='.$x.'">' .$x. '</a> </strong>' : '<a href="?page=' .$x. '">' .$x. ' </a> '; 
```

到

```
echo ($x == $page) ? '<strong><a href="?uid='.$_GET['uid'].'&page='.$x.'">' .$x. '</a> </strong>' : '<a href="?uid='.$_GET['uid'].'&page=' .$x. '">' .$x. ' </a> '; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:39:13.187

你有`uid`会议吗？

尝试

```
echo ($x == $page) ? '<strong><a href="?page='.$x.'">' .$x. '</a> </strong>' : '<a href="?user_id=' . $_SESSION['uid'] . '&page=' .$x. '">' .$x. ' </a> '; 
```

但是，实际上，如果您为您的`uid`. 你可以改变`fetch_user_info`

```
function fetch_user_info(){ 

    $sql = "SELECT
    `user_name` AS `username`,
    `user_email` AS `email`
FROM `users`
WHERE `user_id` = " . $_SESSION['uid'];

$result = mysql_query($sql);

return mysql_fetch_assoc($result);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:40:33.893

**错字：**

```
 $page = (isset($_REQUEST['page'])) ? 1 : $_REQUEST['page']; 
```

***变成***

```
 $page = (!isset($_REQUEST['page'])) ? 1 : $_REQUEST['page']; 
```

这是一个非常简单的解决方案。您基本上“读取”分页代码中的 URL/查询字符串并自动“将其附加到您的 URL。我为您编写了一些简单的即插即用代码 - 这很容易做到这一点（您只需要多一行代码和一个包含文件 - 'inc_pagination.php'， - 到需要分页的任何页面。不修改现有代码）：

```
/*pagination */  
$per_page = 5; 
include 'inc_pagination.php'; /* FIRST LINE ADDED TO YOUR CODE*/

$pages_query = mysql_query("SELECT COUNT('file_name') FROM users WHERE  `user_name` = '{$_SESSION['username']}' ") or die(mysql_error());  
$pages = ceil(mysql_result($pages_query, 0) /$per_page); 

/* REMOVING THESE TWO LINES */
/*  $page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1; 
    $start = ($page - 1) * $per_page; */

$data = mysql_query("SELECT * FROM users LIMIT $start, $per_page") or die(mysql_error());         
echo "<table border cellpadding=1>";                                    
while($info = mysql_fetch_array( $data ))                                    
{ ?><?php                                   
    echo "<tr>";                                    
    echo "<td>".$info['user_name'] . "</td> ";                                   
    ?>                                   
    <td> <a href="download.php?user_id=<?php echo $info['user_id'];?>"> <?php echo $info['file_name']; ?></a></td>                                   
    <?php                                   
    echo "<td>".date('d/m/Y') . "</td>" ;                                   

}                                   
    echo "</tr>";                                   
    echo "</table>";    

/* 2nd LINE ADDED (Replaces Existing Page Code) - Add this wherever you need page numbers displayed */
echo paginate_me(ceil(mysql_result($pages_query, 0)/$per_page), $per_page); 
```

请注意，您显然需要删除现有的分页代码块：

```
if($pages >= 1 && $page <=$pages){                      

   for ($x = 1; $x<=$pages; $x++){                       
      echo ($x == $page) ? '<strong><a href="?page='.$x.'">' .$x. '</a> </strong>' : '<a href="?page=' .$x. '">' .$x. ' </a> ';                      
   }                      

} 
```

最后是包含文件**'inc_pagination.php'**的代码。请注意，这个具有所有的花里胡哨 - 包括用于悬停/鼠标悬停和其他视觉效果的 javascript - 如果您愿意，我还可以包括一个非常简单的纯文本版本！

```
<?
//The number of page numbers you want displayed accross page in pagination bar
$nav_links_per_row = 35;
$page = (!isset($_REQUEST['page'])) ? 1 : $_REQUEST['page'];
$start = ($page == 1) ? 0 : ($page - 1) * $per_page ;
$per_page = (!$per_page) ? 5 : $per_page;

function paginate_me($no_of_pages, $per_page, $nav_links_per_row = 35) {

    $page = 1;
    $page = $_REQUEST['page'];
    $x_mid_start = 1;
    $x_mid_end = $no_of_pages;

     /* START: Here is the main code that detects all your existing QUERY STRING and AUTOMATICALLY includes them in the Page Links */
    $x_url = urldecode($_SERVER['HTTP_REFERER']);
    parse_str($x_url, $output);
    $qs = explode('?',urldecode($x_url));
     /* END: QUERY STRING DETECT CODE */ 

    $p_me .= "<br><table align = 'Center' width = '90%' cellpadding = '0' border = '0'><tr>";
    if ($no_of_pages > 35)
    {
        // Go Back 5
        if ( $page > 5 ){
            $bg_color = "White";
            $ObjTopBar = '"jTopBar_start"';
            $q_str = $_SERVER['QUERY_STRING'];
            $jump = (int)$page - 5;
            $title = "User Files: Jump Back 5 Pages";
            $this_page = str_replace("page=$page","page=$jump","?".$q_str);
            $p_me .=  "<td><a title='$title' href='".$this_page."'> <div id=".$ObjTopBar." onMouseOver='javascript: onMouseOverOut(".$ObjTopBar.")' onMouseOut='javascript: onMouseOverOut(".$ObjTopBar.")' style='border: 1px solid silver; border-radius: 4px; -moz-border-radius: 3px; width: 20px; height: 15px; text-align: center; background: ".$bg_color."; color: #333333; vertical-align:middle;padding-top: 2px; overflow:auto'>-</div></a></td>";
        }

        //1 to 10
        for ($i = 1; $i <= 8; $i++) 
        {
            if ($i == $page) $bg_color = "orange";
                else $bg_color = "#333333";
            if (!$page) $bg_color = "orange";

            $ObjTopBar = '"jTopBar'.$i.'"';
            $q_str = $_SERVER['QUERY_STRING'];
            $this_page = str_replace("page=$page","page=$i","?".$q_str);
            $title = "User Files: Jump to Page $i";

            $p_me .=  "<td><a title='$title' href='".$this_page."'> <div id=".$ObjTopBar." onMouseOver='javascript: onMouseOverOut(".$ObjTopBar.")' onMouseOut='javascript: onMouseOverOut(".$ObjTopBar.")' style='border: 1px solid silver; border-radius: 4px; -moz-border-radius: 3px; width: 20px; height: 15px; text-align: center; background: ".$bg_color."; color: white; vertical-align:middle;padding-top: 2px; overflow:auto'>".$i."</div> </a></td>";
        }

        //Set Starting Page Numbers for Mid Block If Page Count is > 35
        $p_me .=  "<td> <font color=white>... </td>";
        $x_mid_start = floor($no_of_pages / 2) - 5 ;
        $x_mid_end = floor($no_of_pages / 2) + 5 ;

        //if selected page is between half - 5  to half + 5 SHOW start: selected page, end: selected page + 9
        if (($page > 8) && ($page < $no_of_pages - 8)) {
            $x_mid_start = $page - 5;
            $x_mid_end = $page + 5;
        }
    }

    //Empty Blocks...First Few Spaces...if Page Count < 35
    if ($no_of_pages < 35) {    
        for ($k = 1; $k <= floor((35 - $no_of_pages) / 2); $k++)    
            {
                $ObjTopBarLinks = '"divBEnd_'.$k.'"'; 
                $ObjTopBarEmpty = '"divBStart'.$k.'"';
                $p_me .=  "<td><div id=".$ObjTopBarEmpty." onMouseOver='javascript: onMouseOverOutE(".$ObjTopBarLinks.")' onMouseOut='javascript: onMouseOverOutE(".$ObjTopBarLinks.")' style='cursor: pointer; cursor: hand; border: 1px solid silver;  border-radius: 4px; -moz-border-radius: 3px; width: 20px; height: 15px; text-align: center; background: grey; color: white; vertical-align:middle;padding-top: 2px; overflow:auto'> </div></td>";
            }
    }

    // Print Page Numbers in the Center
    for ($i = $x_mid_start; $i <= $x_mid_end; $i++) 
        {
            if ($i == $page) $bg_color = "orange";
                else $bg_color = "#333333";
            if (!$page) $bg_color = "orange";

            $ObjTopBar = '"jTopBar'.$i.'"';
            $q_str = $_SERVER['QUERY_STRING'];
            $this_page = str_replace("page=$page","page=$i","?".$q_str);
            $title = "User Files: Jump to Page $i";

            $p_me .=  "<td><a title='$title' href='".$this_page."'> <div id=".$ObjTopBar." onMouseOver='javascript: onMouseOverOut(".$ObjTopBar.")' onMouseOut='javascript: onMouseOverOut(".$ObjTopBar.")' style='border: 1px solid silver; border-radius: 4px; -moz-border-radius: 3px; width: 20px; height: 15px; text-align: center; background: ".$bg_color."; color: white; vertical-align:middle;padding-top: 2px; overflow:auto'>".$i."</div> </a></td>";
        }

    //Empty Blocks...Last Few Spaces...If Page Count < 35
    if ($no_of_pages < 35) {    
        for ($k = 1; $k <= ceil(($nav_links_per_row - $x_mid_end)/2); $k++) 
            {
                $ObjTopBarLinks = '"divBStart'.$k.'"';
                $ObjTopBarEmpty = '"divBEnd_'.$k.'"';
                $p_me .=  "<td><div id=".$ObjTopBarEmpty." onMouseOver='javascript: onMouseOverOutE(".$ObjTopBarLinks.")' onMouseOut='javascript: onMouseOverOutE(".$ObjTopBarLinks.")' style='cursor: pointer; cursor: hand; border: 1px solid silver;  border-radius: 4px; -moz-border-radius: 3px; width: 20px; height: 15px; text-align: center; background: grey; color: white; vertical-align:middle;padding-top: 2px; overflow:auto'> </div></td>";
            }
    }
    else
    {   
        //Page Count is > 35
        $p_me .=  "<td> <font color=white>... </td>";
        //no_of_pages-10 to end
        for ($i = $no_of_pages - 8; $i <= $no_of_pages; $i++) 
        {

            if ($i == $page) $bg_color = "orange";
                else $bg_color = "#333333";
            if (!$page) $bg_color = "orange";

            $ObjTopBar = '"jTopBar'.$i.'"';
            $q_str = $_SERVER['QUERY_STRING'];
            $this_page = str_replace("page=$page","page=$i","?".$q_str);
            $title = "User Files: Jump to Page $i";
            $p_me .=  "<td><a title='$title' href='".$this_page."'> <div id=".$ObjTopBar." onMouseOver='javascript: onMouseOverOut(".$ObjTopBar.")' onMouseOut='javascript: onMouseOverOut(".$ObjTopBar.")' style='border: 1px solid silver; border-radius: 4px; -moz-border-radius: 3px; width: 20px; height: 15px; text-align: center; background: ".$bg_color."; color: white; vertical-align:middle;padding-top: 2px; overflow:auto'>".$i."</div> </a></td>";
        }

        // Go Forward 5
        if ( $page < $no_of_pages - 5 ){
            $bg_color = "White";
            $ObjTopBar = '"jTopBar_end"';
            $q_str = $_SERVER['QUERY_STRING'];
            $jump = (int)$page + 5;
            $title = "User Files: Jump Forward 5 Pages";
            $this_page = str_replace("page=$page","page=$jump","?".$q_str);
            $p_me .=  "<td><a title='$title' href='".$this_page."'> <div id=".$ObjTopBar." onMouseOver='javascript: onMouseOverOut(".$ObjTopBar.")' onMouseOut='javascript: onMouseOverOut(".$ObjTopBar.")' style='border: 1px solid silver; border-radius: 4px; -moz-border-radius: 3px; width: 20px; height: 15px; text-align: center; background: ".$bg_color."; color: #333333; vertical-align:middle;padding-top: 2px; overflow:auto'>+</div></a></td>";           }
    }
            $p_me .=  "</tr></table><br>";
    return $p_me;
}   
?>

<script type="text/javascript">

function onMouseOverOut(Obj) {
    setTimeout(function() { onMouseOverOut1(Obj) }, 300);
}

function onMouseOverOut1(x) {

    var ODiv = document.getElementById(x);
    var currBg = ODiv.style.background;

    if (currBg == "orange") return false;
    if (x == "jTopBar_start") return false;
    if (x == "jTopBar_end") return false;

    if (ODiv.style.background.indexOf("red") < 0)
        ODiv.style.background = "red";
    else
    if (ODiv.style.background.indexOf("#333333") < 0)
            ODiv.style.background = "#333333";
}

function onMouseOverOutE(Obj) {
    setTimeout(function() { onMouseOverOutE1(Obj) }, 300);
}       

function onMouseOverOutE1(Obj) {
    var ODiv = document.getElementById(Obj);
    if (ODiv.style.border.indexOf("grey") < 0)
            ODiv.style.border = "1px solid grey";
    else
    if (ODiv.style.border.indexOf("silver") < 0)
            ODiv.style.border = "1px solid silver";

    if (ODiv.style.background.indexOf("white") < 0)
            ODiv.style.background = "white";
    else
    if (ODiv.style.background.indexOf("grey") < 0)
            ODiv.style.background = "grey";
}   
</script> 
```

# mysql - 酒店客房价格：如何管理根据某些条件而变化的折扣

> ID：10690506
> 
> 赞同：2
> 
> 时间：2012-05-21T18:22:21.950
> 
> 标签：mysql, database-design, ruby-on-rails-3.1

我正在编写一个应用程序来管理酒店的房间，我必须设计数据库来管理折扣价。我已经制作了 Room 和 Price 表，现在我必须创建一些表，我可以在其中存储管理员可以根据某些条件应用的折扣。管理员也可以创建新的折扣。例如：

*   如果预订在 9 月开始，用户可以获得 10% 的折扣。
*   如果用户在 2 周内预订房间，则可以获得 10% 的折扣

所以，这是我的简化表格（我省略了与问题无关的字段和关系）：

**房间：**

```
id | name
---|----------------
 1 | Trafalgar Square
 2 | Piccadilly 
```

**价格：**

```
id | room_id  | base | promotion 
---|----------|------|-----------
 1 |    1     | 10   | 8
 2 |    2     | 25   | 20 
```

如何存储上述条件？我正在使用 Rails，我想到的第一个解决方案是创建一个表，我可以在其中存储要应用的折扣以及应用它的条件。我认为字段条件是一个 SQL 片段；之类`Reservation.start_date > [date]`的，因此我可以在 Rails 中应用更多折扣将它们连接起来。但这是一个非常丑陋的解决方案，并且与 DBRMS 相结合，所以我想避免这种选择。

你知道我怎样才能解决这个问题吗？我希望已经清楚地解释了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T21:16:23.213

我强烈建议您调查使用某种类型的规则引擎来处理此问题。

问题在于，与许多行业一样，酒店使用极其灵活的定价方式。其中一些似乎异想天开，另一些与思想几乎没有相似之处，而且所有这些都很难为其创建结构化的方法。

例如，如果预订了一晚，并且客户在晚上 11:00 之后进行预订，则客房可享受 10% 的折扣……除非是周五或周六晚上，或者酒店的客流量为 80% 以上。

如果标准折扣为 15% 的 1 月份，此规则可能会中断。

如果计划在城里举行会议，该规则可能会被打断。届时房价将提高 30%。

* * *

另一种方法是简单地放弃让系统自动计算房价，而是依靠酒店工作人员在预订时进行设置。在这种情况下，您只需显示有关当前“特价商品”的一些指南。

诚然，这并不像自动进行那样性感，但如果有问题的酒店不打算购买已经这样做的 COTS，那么他们可能不会支付适当开发它所需的成本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T21:42:42.053

绝妙的问题。

我从来没有做过酒店预订系统，但做过有折扣策略的电子商务项目，坏消息是这很快就会变得非常复杂。

例如，您可能有多个适用于给定预订的折扣，您需要确定它们是累积的还是互斥的（如果有“每次预订的 10%”折扣，并且预订符合“新-wed 25% offer”，你给 10%、25% 还是 35%？）。如果你必须处理税收，那就更奇怪了——如果总预订中有多种产品，税率不同，你如何在应用折扣后计算税收？

如果您正在构建一个允许用户指定新的（类型的）折扣的系统，以及与之相关的所有规则，那么您的项目将变得相当大，非常复杂，并且痴迷于折扣引擎。

如果这就是您所处的世界，请接受@Chris Lively 的回答。投资一个规则引擎，并准备花下一段重要的时间来解释折扣是如何工作的，“and”、“or”、“xor”等是什么意思。

不过，理想情况下，您可能会花费更多时间来完善当前的实际需求。如果您只需要解决 5 个真实示例，则选项比构建通用折扣引擎要有限得多。查看策略模式和复合模式。如果它不是“通用目的”，那么制定“2012 年夏季”折扣策略并使用硬编码而不是存储在数据库中的有效日期并不可耻。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T21:58:56.477

通常情况下，预订人员有权应用不同的折扣。换句话说，折扣规则只是回顾性的抽查。

让系统自动检查给定折扣的资格将很快变成：

*   太复杂而无法理解（对于试图添加新折扣及其规则的管理员而言）
*   实施系统过于复杂（需要预测不断增长的情况列表）
*   太脆弱（总会有完全合理和适当的“例外”。）
*   一些折扣是不可能的。例如，某人如何“证明”他们正在参加婚礼并因此有资格获得婚礼团体的折扣。

折扣通常是营销问题。在这种情况下，您想知道客户要求的折扣（“琼斯婚礼折扣”），而不是通过规则严格控制折扣的资格。

折扣系统的一个更有用的方面是让登记系统查看折扣是否要求客户出示折扣资格证明，如果需要，则提示登记员。例如，如果在预订中使用公司的合同折扣率，则要求提供员工 ID。

酒店预订和房间管理系统非常复杂。您应该了解酒店为什么不使用 COTS（现成的商业）软件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T20:59:14.550

这是我评论的扩展版本。我同意在数据库中放入 SQL/可执行代码通常是一个坏主意，我认为在这种情况下你可以避免这种情况。

我会这样做：

```
晋升
-------------------------------------------------- ----------
标识 (pk) | 短名称 (uniq) | 参数？| 序列化参数？
1 | 九月促销| ... |
2 | 长期住宿 | ... |
-------------------------------------------------- ----------

room_promotion
-------------------------------------------------- --
room_id (fk) | Promotion_id (fk) | 序列化参数
1 | 1 | {折扣=10；开始日期=x；结束日期=y }
2 | 2 | { 长度=14 }
-------------------------------------------------- --

```

这种方法为您可能想要运行的促销类型提供了最大的灵活性。由于每个促销活动都有许多取决于业务逻辑的参数，我建议在每个房间的情况下，您有一列序列化参数，因此该表中没有大量未使用的列。*请记住，这确实打破了一些关系规则，但谨慎使用并意识到其局限性，这是一种有用的方法*。

您同样可以针对每个促销行设置参数或序列化参数（例如，如果您知道“long_stay”促销的所有使用期限为 14 天）。

请注意，我已经安排了“room_promotion”表，以便可以将多个促销活动应用于一个房间。`(room_id, promotion_id)`如果您确定一个主键*始终*只适用于一次，您可以创建一个主键。

好的，现在您有了一个可以应用“促销规则”的机制。但是，业务逻辑仍然属于您的代码。因此，查找短名称，驼峰式，然后使用 Ruby 中的动态查找机制来应用折扣。我不使用 Ruby，但在 PHP 草图形式中它可能看起来像这样：

```
    获取对象 $Bill（在应用折扣之前）
    $Discount = DiscountFactory::getInstance(
        'september_promo',
        反序列化（$序列化）
    );
    $Bill->applyDiscount($Discount);
    显示修改后的账单

```

在内部，我认为`september_promo`会转换为`SeptemberPromo`，因此这是一个类（对不起，再次是 PHP）：

```
类九月促销扩展促销
{
    // 这里添加抽象方法的具体实现
    公共函数 executeDiscount($Bill) { ... }
}

```

反过来，Promotion 可以有一个抽象方法，用于根据`applyDiscount()`每个房间的价值、每个促销的价值和账单的详细信息来确定要应用的折扣。

只要您保持折扣业务逻辑相当通用，您的酒店经理就可以使用序列化参数对其进行自定义，而不需要为每个新促销活动都需要新的 Ruby 代码（除非他们想要一个新的促销*类型*）。考虑到这一点，*SeptemberPromo*可能过于具体 - 也许*MonthSpecial*？

显然，您需要构建一个 UI 来让酒店经理存储新的`promotion`和`room_promotion`行，但这应该很容易。

# css - 将 span 元素定位在 div 的右侧

> ID：10690507
> 
> 赞同：0
> 
> 时间：2012-05-21T18:22:22.210
> 
> 标签：css

以下 html 显示了一个项目信息。我正在尝试将 avaliation 跨度放在评级 div 的右侧。如果我将评级浮动到左边，它会到达另一个跨度的顶部。我确信这是一个很容易解决的问题，但是我尝试了很多，但没有找到避免脏代码的解决方案。

```
 <div>
                    <h1>name</h1>
                    <span>omg: <a href="#">omg</a></span>
                    <div class="rating">
                        <span class="stars-2">
                            <img src="stars.png" width="86" height="91" title="4 star rating" alt="4 star rating" />
                        </span>
                    </div>
                    <span>x avaliations</span>
                </div> 
```

评级 CSS：

```
 div.rating {
            position: relative;
            width: 84px;
            height: 14px;
            overflow: hidden;
        }

        div.rating span {
            position: absolute;
            left: -1px;
        }

        div.rating span.stars-0 {
            top: -1px;
        }

        div.rating span.stars-1 {
            top: -16px;
        }

        div.rating span.stars-2 {
            top: -31px;
        }

        div.rating span.stars-3 {
            top: -46px;
        }

        div.rating span.stars-4 {
            top: -61px;
        }

        div.rating span.stars-5 {
            top: -76px;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:36:58.957

Add `style="float:left;"` to the rating `div` and the aviliations `span`. (Better yet: add `float:left;` to the CSS file for these elements).

Then, put `<br clear="all" />` before the rating `div` and after the avaliations `span`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:32:22.237

只需添加`display:inline`到评级 div

```
 div.rating {
        position: relative;
        display:inline; /* add this */
        width: 84px;
        height: 14px;
        overflow: hidden;
    } 
```

这里 + 更多样式以使其适合[http://jsfiddle.net/j5mxZ/](http://jsfiddle.net/j5mxZ/) -- 编辑不设置样式[http://jsfiddle.net/j5mxZ/1/](http://jsfiddle.net/j5mxZ/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T18:33:39.447

尝试更改 HTML 中跨度的顺序：

```
<div>
    <h1>name</h1>
    <span>omg: <a href="#">omg</a></span>
    <span>x avaliations</span>
    <div class="rating">
        <span class="stars-2">
            <img src="stars.png" width="86" height="91" title="4 star rating" alt="4 star rating" />
       </span>
    </div>
</div> 
```

# android - Android中的Facebook oAuth“无法读取调用包的签名”

> ID：10690514
> 
> 赞同：0
> 
> 时间：2012-05-21T18:22:41.837
> 
> 标签：android, facebook, authentication

我在使用时遇到了这个问题，

05-22 02:14:56.840: E/Facebook-ProxyAuth(966): 无法读取调用包的签名。

而且它没有调用onActivityResult。

```
 if(!facebook.isSessionValid()) {
       facebook.authorize(this, new String[] {"publish_stream", "offline_access"}, new DialogListener() {
           @Override
           public void onComplete(Bundle values) {
               Log.d(TAG, "onComplete");    
           }

           @Override
           public void onFacebookError(FacebookError error) {
               Log.e(TAG, "onFacebookError" + error.toString());
           }

           @Override
           public void onError(DialogError e) {
               Log.e(TAG, "onError" + e.toString());

           }

           @Override
           public void onCancel() {
               Log.d(TAG, "onCancel");                 
           }
       });
   }

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d(TAG, "onActivityResult");
    super.onActivityResult(requestCode, resultCode, data);
    facebook.authorizeCallback(requestCode, resultCode, data);
} 
```

实际上，我之前成功调用过这个函数。我不知道为什么从什么时候开始，它失败了。我发现了这个问题，我已经重新生成了密钥并更新了我的 facebook 应用程序。问题是一样的。

另一方面，我使用相同的代码重新创建了一个简单的新项目。它可以成功登录。我想知道我做了什么样的设置。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:00:09.403

我有同样的问题。就我而言，我也尝试添加 Twitter，为此我更改了清单。问题是清单中的这一行，在调用该方法的活动中：

```
android:launchMode="singleInstance" 
```

我把它拿出来，它又起作用了。

# php - 一个头文件的多个页面标题

> ID：10690517
> 
> 赞同：2
> 
> 时间：2012-05-21T18:22:48.280
> 
> 标签：php, html, css, header, include

我有一个包含在我所有其他页面上的标题文件。我想知道如何使用相同的页眉有不同的页面标题。我正在使用 PHP 和 MySql。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T18:27:39.170

在每个特定页面上，添加`$pgName = 'Page Title';`每个页面的标题。然后在这段代码之后，`include()`header就正常了。在头文件中，在`<head>`标签中添加：

```
<title><?php if(isset($pgName) && is_string($pgName)){echo $pgName;}else{echo 'Default title';} ?></title> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T18:26:15.067

将标题存储在变量中，例如

```
$title = 'Main title';
if($page == 'this page has a different title') {
  $title = 'A different title';
}
include 'header.php'; 
```

在 header.php 集中

```
<head>
  <title><?php echo $title; ?></title>
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T18:27:50.727

从包含中取出标题标签并将其放在页面中，似乎迫使您做出变通办法

# avcapturesession - 您如何访问由对 AVCaptureSession 的 addInput 和 addOutput 调用形成的 AVCaptureConnections？

> ID：10690528
> 
> 赞同：1
> 
> 时间：2012-05-21T18:23:11.353
> 
> 标签：avcapturesession

如果我实例化一个 AVCaptureSession，并使用 addInput 和 addOutput 添加视频输入和输出，则据称 AVCaptureConnection 的实例正在自动形成，正如 Apple 文档所述，“贪婪”。

我想访问连接，所以我可以更改 videoOrientation 属性。

如何访问连接？我会想到像 captureSession.connections 这样的东西，但没有那种东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-10T20:06:39.073

我像这样改变我的videoOrientation：

```
let stillImageOutput = AVCaptureStillImageOutput()
var previewLayer :AVCaptureVideoPreviewLayer?

let vidConnection :AVCaptureConnection = stillImageOutput.connectionWithMediaType(AVMediaTypeVideo)

stillImageOutput.connectionWithMediaType(AVMediaTypeVideo).videoOrientation = previewLayer!.connection.videoOrientation

stillImageOutput.captureStillImageAsynchronouslyFromConnection 
```

# php - 在 IE 中显示 XML

> ID：10690535
> 
> 赞同：0
> 
> 时间：2012-05-21T18:23:50.247
> 
> 标签：php, xml, internet-explorer

在一个新项目中，我想用 PHP 生成一个 XML 文件（我已经做过很多次了），但现在我面临一个非常奇怪的问题，IE 不能正确显示 XML，但是在旧项目的目录，XML 正确显示，但在新项目的目录中，它不显示 XML。代码是：

```
header('Content-Type: text/xml');
echo '<root><foo a="b">Tada</foo></root>'; 
```

在旧项目的目录中，该程序显示：

```
<?xml version="1.0"?>
-<root>
    <foo a="b">Tada</foo>
</root> 
```

但是在新项目的目录中它只显示：

```
Tada 
```

如果我看到页面的源代码，在两个目录中都会显示：

```
<root><foo a="b">Tada</foo></root> 
```

在 Firefox 中我没有问题。知道发生了什么吗？提前致谢。

马可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:27:43.893

记得添加

```
<?

echo '<?xml version="1.0"?>';

?> 
```

在您吐出 xml 文档的其余部分之前！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T02:27:36.110

我希望这对有同样问题的人有帮助：

我正在使用 PSPad 编辑器创建 PHP 文件，如果在选项中标记为**Ident。UTF-8 编码**中的字节程序会在文件开头生成一些字符，因此 XML 文件格式不正确。感谢大家的评论。

# windows - 在 Windows 上使用 GCC 编译 DLL 的问题

> ID：10690538
> 
> 赞同：0
> 
> 时间：2012-05-21T18:24:03.410
> 
> 标签：windows, gcc, dll, java-native-interface

我正在使用 MinGW（不是 Cygwin）并尝试获取一些已成功移植到 Mac 以在 Windows 上运行的 OSS 代码。所需的最终构建是可用作 JNI 库的 .DLL（这是 Mac 上的 .jnilib），但我无法编译最后一个包装接口的 .cpp 文件。

问题是我的 .cpp 文件中的每个函数在编译时都会生成以下形式的错误：

```
g++ -I/various/such/entries -D_inline=__inline -I/c/java/include -I/c/java/include/win32 -c -o com_me_package_ClassName.o com_me_package_ClassName.cpp
com_me_package_ClassName.cpp:84:31: error: external linkage required for symbol 'void Java_com_me_package_ClassName_Moo(JNIEnv*, jclass)' because of 'dllexport' attribute
// ditto the above for every such function 
```

让我们看看上面显示错误的一个函数：

```
#include <jni.h> // of course this is in here
static JNIEXPORT void JNICALL Java_com_me_package_ClassName_Moo
    (JNIEnv *env, jclass clazz) {
printf("Moo!\n");
} 
```

在谷歌搜索之后，我看到其他人有一个项目，其中“静态”函数是一个问题，所以我尝试在创建错误的任何函数之前将以下 hack 添加到 .cpp 文件中：

```
#ifdef WIN32
#define static 
#endif 
```

然而，虽然这解决了编译问题，但它只让我遇到了一个链接问题，这可能是也可能不是 ifdef 权宜之计的结果（而且很可能只与修改有关）：每个基于 C 的基础函数都去了即使从 -L 指定的静态库（例如 FOO_int2str 如下所示）在 Mac 构建中可靠地找到了它们，它们仍然丢失：

```
g++ -D_inline=__inline -shared -o /output/lib/libfoo_jni.dll   com_me_package_ClassName.o -L/some/number/of/such/things -lz -lzipfile
com_me_package_ClassName.o:com_me_package_ClassName.cpp:(.text+0x84) : undefined reference to `_imp__FOO_int2str' 
```

我有点不知所措。我通过 Google 找到的少数东西中的大多数都与其他构建环境（例如 cygwin 和 Microsoft 提供的编译器）有相当大的上下文联系。我有 gcc 和 MinGW，并希望避免与 dlltool 或 Cygwin 之类的东西相关的答案，因为我正在使用的代码已经通过了很多人的手，并且其中有像笼中闪电一样的黑暗魔法（例如语音识别）。 ..我改变的越多，我运行mac平台上现有功能的风险就越大。

我是makefile写作的新手。我现在拥有这座建筑是一个快乐的意外，因为代码是从一个千兆字节的大型语料库中提取的，该语料库具有非常重的构建格式塔，针对的是移动平台而不是桌面平台；我知道我必须转储并且我已经成功完成的构建上下文（至少对于 Mac）。没有回头路了！

在此先感谢您对 g++（或类似 gcc 的等效项）的显式命令行调用的任何建议，这些建议将使这些函数能够编译和链接。

语气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:37:47.460

你不想让你的功能`static`，因为这给了他们内部联系。正如错误消息告诉您的那样，这与正在导出的函数不兼容。您的 JNI 函数需要有外部链接。这可以通过替换`static`为来实现`extern`。但是，由于外部链接是函数的默认设置，您可以简单地删除`static`链接说明符并省略`extern`。

您还需要指定 C 链接，因为您正在编译为 C++ 而不是 C。使用`extern "C"`. 如果您使用默认的 C++ 链接，那么最终会出现 C++ 名称修改，我怀疑这是导致链接器错误的原因。

所以你的代码应该是这样的：

```
#include <jni.h> 

extern "C"
{

JNIEXPORT void JNICALL Java_com_me_package_ClassName_Moo
    (JNIEnv *env, jclass clazz) 
{
    printf("Moo!\n");
}

} 
```

# java - 带有 Google App Engine 项目参考的 Java NoClassDefFoundError

> ID：10690546
> 
> 赞同：1
> 
> 时间：2012-05-21T18:24:33.863
> 
> 标签：java, eclipse, google-app-engine, ant

我有一个 Java Google App Engine 项目，它引用了另一个项目中的一个类，在运行时，我得到了 NoClassDefFoundError。

我将调用我的 Google App Engine 项目“ **Main** ”和它依赖的项目“ **Sub** ”

看起来运行时错误的原因是在 WEB-INF/lib 中找不到**Sub的 jar。**在 Eclipse 中，当我将**Sub**导出为 jar 并将其复制到 WEB-INF/lib 文件夹中时，一切正常。现在每次更改**Sub**中的文件时都需要这样做吗？

来自 Visual Studio 世界，我习惯于构建到 dll 中的项目，以及那些被复制到依赖于它们的“bin”文件夹中的项目。我认为eclipse会支持类似的东西，但我没有看到。解决这个问题的正确方法是什么？蚂蚁脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:28:05.283

是的 - 当您在 .NET 中看到 .dll 时，想想 Java EE 中的 JAR。

如果依赖 JAR 更改，您必须更新 Web 应用程序的 WEB-INF/lib 的内容。

我不确定 Eclipse 如何处理依赖关系。在 IntelliJ 中，如果我愿意，我可以在两个单独的模块之间创建依赖关系，或者完全按照我上面描述的方式处理依赖的 JAR。

我认为最好的办法是使用 Ant 脚本，特别是如果您已经有一个脚本来创建您的 WAR 文件。

# javascript - 单击链接时，显示警告框？

> ID：10690547
> 
> 赞同：1
> 
> 时间：2012-05-21T18:24:34.367
> 
> 标签：javascript

所以我才开始学习 JavaScript。当我点击“点击我！”时，我的警告框没有弹出！

```
<!DOCTYPE html>

<html lang="en">
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>JAVASCRIPT</title>

</head>
<body>

    <a href="#" id="anchor">Click Me!</a>

    <script type="text/javascript">

        var anchor = getElementById('anchor');
        // or anchor = getElementsByTagName('a') then do ('a')[0]

        anchor.addEventListener('click', doSomething, false);

        function doSomething() {
            alert('clicked');
        }

    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:27:11.770

你忘记`document.`了`getElementById`：

```
 var anchor = document.getElementById('anchor'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:26:53.863

`getElementById`是`document`对象的方法，而不是全局函数。

将其更改为`document.getElementById('anchor');`

`href="#"`（虽然对于真实页面，但确实有更有用的后备）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-11T14:50:08.937

一种更快的游击风格方法是：

```
<a href="javascript:;" onclick="alert('clicked')">Click Me!</a> 
```

一般来说，虽然不鼓励添加内联 JS 代码，因为它会影响可维护性。这会更好。请注意，不必使用 document.getElementById()，因为您可以从“this”获取元素引用。

```
<a href="javascript:;" onclick="my_function(this)">Click Me!</a>

<script>
my_function = function(elem) {
   //elem points to anchor element clicked
}
</script> 
```

# pdf - Coldfusion CFPDF 读取二进制数据库列

> ID：10690548
> 
> 赞同：5
> 
> 时间：2012-05-21T18:24:34.817
> 
> 标签：pdf, coldfusion, binary, cfpdf

cfpdf 可以直接读取二进制数据库列吗？

我目前在运行查询以获取该列的地方拥有它。

使用 cffile 将文件写入目录

然后用 cfpdf 阅读，这样我就可以提取文本了。

是否可以在没有 cffile 直接写入和读取二进制文件的情况下执行此操作？

如果是这样，我可以举个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T21:18:27.383

你用的是什么版本？以下内容适用于我的 CF9 / MS SQL（varbinary 列）

```
<cfquery name="getPdf" ....>
    SELECT Data 
    FROM   someTable
    WHERE  ID = 123
</cfquery>

<cfset pdfBinary = getPdf.data[1]>
<cfpdf action="extractText" source="pdfBinary" name="result">
<cfdump var="#result#"> 
```

**编辑：**`queryName.columnName`为了澄清，当您用作“源”时，cfpdf 会抱怨。我怀疑 cfpdf 将其视为查询列*对象*，而不是自动获取查询第一行中的值，即`queryName.columnName[ 1 ]`. 解决方法是创建对它的引用，并改用其他变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:15:11.530

我不是 100% 确定，但你应该能够做这样的事情：

```
<cfset myPDF = binaryEncode(binaryData,'base64')>

<cfpdf action="read" source="myPDF" name="PDFObj"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:38:56.850

我找到了一个简单的方法来做到这一点：

```
<cfheader name="Content-Disposition" value="inline; filename=test.pdf">
<cfcontent type="application/pdf" variable="#qGetFile.uploaded_file#"> 
```

这已经在我继承的代码中，但它从来没有工作过。我发现问题是数据源而不是代码；它没有设置为接受 BLOB。

# python - 使用 python ftp lib 确定 ftp 文件是否是常规文件或文件夹

> ID：10690558
> 
> 赞同：2
> 
> 时间：2012-05-21T18:23:23.637
> 
> 标签：python, ftp

我一直在研究一个简单的 python 程序，它可以简单地连接到我的 nas 并清理我的一些文件名。我正在使用 python ftp lib 连接到 nas 并做我的事情。

我只是想知道是否有人有一种检查服务器上的文件实际上是文件还是文件夹的好方法？

这就是我正在使用的：

```
try:
     ftp.cwd(line) 
     #If we got here then this "line" is a folder
     # Do my folder stuff
     ftp._ftp.cwd('..') #don't forget to go back after it worked
except ftplib.error_perm:
     #An exception! So this means we are dealing with a file
     #So do some file stuff
except:
     #Sometimes you just can't get in the folder for some reason
     falsepos = falsepos + 1 
```

我可以查看目录列表的输出，但这在不同平台上是不一样的，我正在尝试构建一些即使我出于某种原因更换我的 nas 也能继续工作的东西。

我的代码中还有一个小错误。有时它仍然将文件夹视为常规文件...

你的意见？

（我使用的是 Python 2.7）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:05:28.210

我没有发现平台之间的任何差异。这在哪些平台上不起作用？：

```
isFile = lambda e: e[0][0] != 'd'
for e in ftp.dir('.'):
  if isFile(e):
    foo(e)
  else:
    bar(e) 
```

# android - 如何在 Android 中的 ListView 上方和下方添加边距？

> ID：10690572
> 
> 赞同：4
> 
> 时间：2012-05-21T18:26:35.627
> 
> 标签：android, android-layout, android-listview, android-listfragment

我一直在努力做一些我认为对 android ListView 很常见的请求，在我的具体情况下，这个 ListView 被用作 ListFragment 的一部分。

我希望列表上方和下方有一个空白填充区域，当与列表交互时，它会随着列表项一起上下滚动。

我环顾四周，不仅找不到答案，而且几乎没有人问这个问题，这让我想知道我是否错过了什么。

我的第一次尝试是：

```
 <ListView android:id="@id/android:list"
    android:paddingTop="16dip"
    android:paddingBottom="16dip"
    android:clipToPadding="false"... 
```

这提供了所需的填充，但不幸的是，“clipToPadding”属性并没有按照它在锡上所说的那样做，当滚动列表时，项目从 ListView 的可见区域的顶部和底部被剪掉 16dip，而不是我在看为了。知道为什么它仍然被剪辑吗？

我的第二次尝试涉及通过 ListView api 以编程方式将透明页眉和页脚视图添加到列表中：

```
addHeaderView();
addFooterView(); 
```

这很好地工作，并为我提供了我正在寻找的确切交互。不幸的是，当我的片段从后台堆栈中出来时，它就崩溃了。旧的页眉和页脚视图消失了，当我的片段被推入后台堆栈时，与视图的其余部分一起被丢弃，但是如果我尝试添加新的，我会收到一个错误，指出列表适配器已设置。只能在设置适配器之前设置页眉/页脚视图，不幸的是，这发生在整个组件生命周期循环之前。

我看到的唯一“解决方案”是清空列表适配器，重新添加页脚/页眉，然后将列表适配器设置为原始值。这对我来说是“hack”，让我觉得我一开始就没有正确使用它。

有没有办法让所需的功能以合理的方式工作？扩展 ListFragment 是我的问题的一部分吗？滚动我自己的由 ListView 组成的片段会更好吗？

任何和所有的帮助将不胜感激。

# android - 动画后无法点击Android按钮

> ID：10690576
> 
> 赞同：0
> 
> 时间：2012-05-21T18:26:54.003
> 
> 标签：android, android-animation, android-view, android-button

所以我在我的视图上剪辑按钮单击区域时遇到问题。目前我有一个非常简单的视图，在任何动画之前，视图的宽度被限制为其中包含的按钮的大小，即使我告诉要在宽度和高度上都是 fill_parent。

我的动画绘图与 setClipChildren(false) 一起正常工作，但这仍然阻止了按钮被单击。我也正确地移动了实际按钮的视图，因为当其中一个按钮（我在这个动画中有 5 个都独立移动）直接移动到初始起始位置上方时，它可以被点击，我甚至可以正确接收。

这是我用于最外层视图的代码（我有 2 个来模拟以后如何将此视图添加到更大的项目中）：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <com.tests.FancyBottomTab
            android:id="@+id/fancyBottomTab1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="5dp"
            android:gravity="center_horizontal" 
            android:clipChildren="false">

        </com.tests.FancyBottomTab>

    </RelativeLayout> 
```

那么这里是 FancyBottomTab 用作其布局 xml 的内容：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center_horizontal"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="5dp"
            android:background="@drawable/b1"
            android:paddingBottom="5dp" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="5dp"
            android:background="@drawable/b2"
            android:paddingBottom="5dp"  />

       <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="5dp"
            android:background="@drawable/b3"
            android:paddingBottom="5dp"  />

        <Button
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="5dp"
            android:background="@drawable/b4"
            android:paddingBottom="5dp"  />

        <Button
            android:id="@+id/button5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="5dp"
            android:background="@drawable/b5"
            android:paddingBottom="5dp"  />

        <Button
            android:id="@+id/fancyRedButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:background="@drawable/fancy_red_button"
            android:visibility="visible" />

    </RelativeLayout> 
```

更新：假设动画是宽度为 100dp 的半圆形，并且按钮间隔均匀，视图正确移动。希望这可以解决一些问题并帮助找到解决方案。

再次更新：好的，这次应该有人能帮我找出问题所在，我编辑了背景，使包含按钮的 RelativeLayout 中的 on 是半透明的（下图中的灰色），然后外部 RelativeLayout 的背景是白色的。现在外部的 RelativeLayout 必须保持一个相对布局，以便以后进行布局，但这里是用于它的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/white"
        android:orientation="vertical" >

        <com.dobango.tests.FancyBottomTab
            android:id="@+id/fancyBottomTab1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="5dp"
            android:clipChildren="false"
            android:gravity="center_horizontal" >

        </com.dobango.tests.FancyBottomTab>

    </RelativeLayout> 
```

这是一个添加了颜色的屏幕截图，应该可以清楚地表明出了什么问题，但我根本看不到它。

![在此处输入图像描述](../Images/589cb46bcf8cbd7aa4382dbaa779dd1a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:42:37.143

好的，所以我不知道为什么要让视图正确显示是绝对必要的，特别是因为我已经在 XML 文件中说了同样的事情，但是这一行完全解决了问题：

```
 view.setLayoutParams(new LayoutParams( LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

如果有人知道为什么我必须将此行放在我的自定义相对布局类中，请发表评论并解释。谢谢。

# linux - 复制到不同的用户剪贴板 -Xorg linux

> ID：10690579
> 
> 赞同：3
> 
> 时间：2012-05-21T18:27:02.870
> 
> 标签：linux, clipboard, xorg

我有一个 X 运行的主要用户：username1。我有另一个用户帐户，我在其中做了很多工作，username2。
我如何做到这一点，以便我可以将命令的输出从 userame2 复制到 username1s 剪贴板。

这是一个失败的例子：

```
username2 $ echo "hello" |xclip
    No protocol specified
    Error: Can't open display: :0
```

在网上看，我发现我应该更改 DISPLAY 变量。
这是我进行更改后得到的结果：

```
username2 $ echo "hello" |xclip
    Error: Can't open display: myws:0
```

搜索时，我还发现我可能需要对我的 .Xauthority 文件做一些事情；但是我不熟悉它。我将继续查看文档。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:36:16.240

能够写入另一个用户剪贴板将是一个巨大的安全问题。幸运的是，有一个我们可以信任的用户（或者至少我们应该信任），root。因此，假设您的纯 shell 用户 (username2) 具有 root 权限（如 sudo）。

```
username2 $ export DISPLAY=:0
username2 $ export XAUTHORITY=/home/username1/.Xauthority
username2 $ echo "hello" | sudo xclip 
```

我们将 username2 的`DISPLAY`变量设置为`:0`，以便告诉 X 我们正在处理的屏幕。如果您可以控制 username1，则可以简单`echo $DISPLAY`地查看值，如果没有，则可以运行命令`w`或`who`查看值。

接下来，我们开始`XAUTHORITY=/home/username1/.Xauthority`处理所有授权/安全方面的废话。现在 username2 不能读取这个变量，但 root 肯定可以（或者 username1 可以`chmod a+r ~/.Xauthority`给每个人读取权限）。

注意：在现货 Ubuntu 12.04 LTS 上测试

# iphone - 如何在 UITabbarController 中设置拆分视图控件

> ID：10690582
> 
> 赞同：-1
> 
> 时间：2012-05-21T18:27:17.530
> 
> 标签：iphone, ios, ipad, uitabbarcontroller, uisplitviewcontroller

几天开始iPad开发，我遇到了一些问题，

我创建了一个视图控制器，其中显示了桌面等选项的数量，然后在打开拆分视图控制器之后

流程如下

```
View Controller
   |
   |->Splite view controller(with Tabbar controll)
                |
                |->Left controller(UITableview)
                |
                |->Right Controller(navigation controller) 
```

因此我期望输出如下

![在此处输入图像描述](../Images/cbfe42d95625cd714dab6780a09f9de4.png)

所以任何人都可以指导解决问题。

伙计们有什么想法或解决方法吗？

如果我的问题不清楚，请告诉我。

谢谢并恭祝安康，

塞缪尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:45:47.810

请查看我在应用程序委托中所做的更改。

step1：我拿了一个标签栏导航应用模板：

第 2 步：App Delegate .m 文件中的更改将 UISplitView 控制器对象作为属性。

然后像我下面那样进行更改：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

UIViewController *viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil] autorelease];
UIViewController *viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];

self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.splitController = [[UISplitViewController alloc] init];
[self.splitController setViewControllers:[NSArray arrayWithObjects:viewController1, viewController2, nil]];

self.tabBarController.viewControllers = [NSArray arrayWithObjects:_splitController, nil];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES;
} 
```

它工作正常，请注意内存管理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:10:10.427

请查看以下代码

添加一个用于处理 UISplitViewController 的新视图控制器，称为 MasterVctr
添加两个用于左视图和右视图的新控制器，称为 LeftVCtr 和 RightVctr

在**MasterVCtr**

定义

```
@property(nonatomic, retain) IBOutlet UISplitViewController *splitViewController; 
```

将以下代码添加到**viewDidLoad**

```
splitViewController = [[UISplitViewController alloc] init];

table = [[LeftVCtr alloc] initWithStyle:UITableViewStylePlain];
detail = [[RightVctr alloc] initWithNibName:@"RightVctr" bundle:nil];

UINavigationController *leftNav = [[[UINavigationController alloc] initWithRootViewController:table] autorelease];
UINavigationController *rightNav = [[[UINavigationController alloc] initWithRootViewController:detail] autorelease];

splitViewController.viewControllers = [NSArray arrayWithObjects:leftNav,rightNav, nil];
splitViewController.delegate = self;
self.view = splitViewController.view; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T05:18:31.927

我通过 Cocoa Matter 解决方案解决了这个问题，谢谢

现在形成上述解决方案，我增强了解决方案，现在问题解决了。

以下是解决方案 .h 文件的代码

```
@property(nonatomic,retain)UISplitViewController *splitController; 
```

.m 文件

```
 UIViewController *viewController5 = [[searchDetail alloc] initWithNibName:@"searchDetail" bundle:nil];
    delegate.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, navForLogin, navForContact, viewController5, nil]; 

    SearchVctr *viewController1 = [[SearchVctr alloc] initWithNibName:@"SearchVctr" bundle:nil];
    FavouriteVctr *viewController2 = [[FavouriteVctr alloc] initWithNibName:@"FavouriteVctr" bundle:nil];
    self.splitController = [[UISplitViewController alloc] init];
    [self.splitController setViewControllers:[NSArray arrayWithObjects:viewController1, viewController2, nil]];
    self.splitController.delegate = self;
    viewController5.view=self.splitController.view;

    delegate.tabBarController.selectedIndex = 4;
    delegate.imgV.image=[UIImage imageNamed:[NSString stringWithFormat:@"t4_ipad.png"]];
    delegate.tabBarController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    delegate.self.imgV.frame=CGRectMake(0, 0, 1024, 48);
    [self presentModalViewController:delegate.tabBarController animated:YES]; 
```

谢谢回复，

# java - 在多台远程机器上运行并行 junit 测试

> ID：10690587
> 
> 赞同：6
> 
> 时间：2012-05-21T18:27:36.917
> 
> 标签：java, testing, junit

我正在做一个相当大的项目，junit 测试运行了几个小时。有没有办法将单元测试分发到不同的机器并并行运行这些测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:25:37.087

像 Jenkins 这样的构建运行器和像构建设置这样的 maven 或 gradle 怎么样。

目前可能无法从 gradle 获得类似[http://test-load-balancer.github.com/的分布式测试运行程序](http://test-load-balancer.github.com/)[http://forums.gradle.org/gradle/topics/distributed_testing](http://forums.gradle.org/gradle/topics/distributed_testing)

# ruby-on-rails - 如何将 ruby on rails 项目部署到仅 ruby 的服务器？

> ID：10690588
> 
> 赞同：2
> 
> 时间：2012-05-21T18:27:37.090
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, deployment

我想在没有 rails 的服务器上部署一个 ruby​​ on rails 项目。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T18:35:39.927

您需要在服务器上安装 ruby​​，但如果您无法添加 gem，您可以将供应商 rails 放入您的项目中，这样您就不需要运行 bundle install 或 gem install。您可以从命令行运行`bundle package`以将 Gemfile 中的所有 gem 放入`/vendor`.

在您无法执行 ruby​​ 或无法安装 ruby​​ 的情况下，您很不走运。我会查看[http://www.heroku.com](http://www.heroku.com)或[http://www.engineyard.com](http://www.engineyard.com)以了解优化的 Rails 托管环境等。[在http://rubyonrails.org/deploy](http://rubyonrails.org/deploy)上可以找到更多关于部署的有用信息。

# c++ - 泛化 C++ 模式

> ID：10690591
> 
> 赞同：1
> 
> 时间：2012-05-21T18:27:42.147
> 
> 标签：c++, linux, templates, gcc, c++11

我在一个非常静态的环境中编程，并希望以最好的方式概括问题/代码，使其干净并避免任何样板代码。这是我的情况；我正在开发一个位于*程序*和*扩展*之间的修改系统，其中扩展将被转发 API 调用。当我的修改被程序加载时，我收到一个指向完全由函数指针组成的表的指针。

```
struct APITable
{
 void (*MouseClick)(int, int);
 void (*MouseLeave)(bool);
 int (*MouseRet)(float, int);
 // And about a 200 more
 // ......
}; 
```

在这个函数中，我将回调函数/指针设置为指向我自己的（即`apiTable->MouseClick = &MyMouseClick;`）。我正在尝试扩展这个框架（因为它一次只允许一个修改）以支持多个插件。这是通过加载额外的插件（作为库）然后将所有回调（例如`MouseClick`）转发到加载的插件来完成的。这是一个例子；

```
void MyMouseClick(int x, int y)
{
 bool blockOriginal = false;

 // Iterate over all plugins
 if(plugin_function_is_defined_pre)
  blockOriginal = call_plugin_callback_pre(x, y);

 if(!blockOriginal)
  EngineMouseClick(x, y); // This is the programs "engine" function, which I have to call if I want normal execution flow

 // Iterate over all plugins
 if(plugin_function_is_defined_post)
  call_plugin_callback_post(x, y);
} 
```

这是一个非常简化的程序，但我认为它说明了需要说明的一切。因为我有超过 200 个函数，所以我无法复制和粘贴所有这些样板代码。正常的过程可能是一个`#define`，一个用于`void`函数，一个用于具有返回值的函数。虽然这可行，但我肯定更喜欢另一种解决方案（这可能是不可能的，因为 C++ 是一种静态类型的语言）。

重点是; 我想以一种简洁有效的方式概括这个过程，避免任何样板代码。值得一提的是，在未声明为 void 的回调中，函数可能会*覆盖*原始函数的返回值。

所以要把它剥到骨头上：`Program->MyExtension->Plugins&Engine`

注意：我*不想*使用除 C++ 之外的任何语言，如有必要，我将使用 C++11 功能！

编辑：如果有兴趣，这就是我的修改被程序加载的方式：

```
extern "C" ModLoad(APITable * apiTable)
{
 apiTable->MouseClick = &MyMouseClick;
 apiTable->MouseLeave = &MyMouseLeave;
 // And so on
 // ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:39:10.673

> 这可能是不可能的，因为 C++ 是一种静态类型语言

如果只有 C++ 有一种静态类型的方式来编写可以针对不同参数定制的通用代码，也许是某种模板工具？;-)

注意我不知道您打算如何处理返回值或`blockOriginal`回调的目的是什么，所以这只是一个草图。

```
template<typename Res, typename... Args>
  Res call_plugin_func(Enum funcID, Res (*origFunc)(Args...), Args... args)
  {
    Res res = Res();
    bool blockOriginal = false;

    // Iterate over all plugins, looking for defs of funcID
    if(plugin_function_is_defined_pre)
      blockOriginal = call_plugin_callback_pre(args...);

    if(!blockOriginal)
      res = origFunc(args...);

    // Iterate over all plugins
    if(plugin_function_is_defined_post)
      call_plugin_callback_post(args...);

    return res;
  }

template<typename... Args>
  void call_plugin_func(Enum funcID, void (*origFunc)(Args...), Args... args)
  {
    bool blockOriginal = false;

    // Iterate over all plugins, looking for defs of funcID
    if(plugin_function_is_defined_pre)
      blockOriginal = call_plugin_callback_pre(args...);

    if(!blockOriginal)
      origFunc(args...);

    // Iterate over all plugins
    if(plugin_function_is_defined_post)
      call_plugin_callback_post(args...);
  }

void MyMouseClick(int x, int y)
{
  call_plugin_func(ID_MyMouseClick, &EngineMouseClick, x, y);
} 
```

（需要两个函数模板，因为返回的一个 void 具有不同的主体，它不能声明`res`为 type `void`。）

# javascript - 如何在jquery中同时防止多个帖子到同一页面？

> ID：10690593
> 
> 赞同：0
> 
> 时间：2012-05-21T18:27:46.577
> 
> 标签：javascript, jquery

我有这样的输入搜索：

```
<input type="search" autocomplete="off" name="searchSchools" id="searchSchools" value="" onKeyUp="searchSchools(this.value)" /> 
```

如您所见，每次触发 onKeyUp 事件时，我都会调用一个名为“searchSchools”的函数，在其中搜索与 PHP 中输​​入搜索的当前值匹配的学校，并以 JSON 格式返回它们，问题是如果我快速键入不止一个请求被发送到 PHP 页面，我想防止这种情况发生，我只想在此函数对同一页面没有其他请求时才将发布请求发送到页面。

这是功能：

```
function searchSchools(name){
    $.post("search-schools.php", { name: name },
    function(data) {
        //-> Here i do whatever with data returned
    }, 
    "json"
    );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:30:15.203

添加延迟`$.post`.. 尝试如下，

```
var timer = null, xhrReq = null;
function searchSchools(name){
    if (timer != null) {
       clearTimeout(timer);
    }

    timer = setTimeout(function () {
        if(xhrReq != null) {
           xhrReq.abort(); //to kill all prev request and take the latest
        }

        xhrReq = $.post("search-schools.php", { name: name },
           function(data) {
              //-> Here i do whatever with data returned
           }, 
           "json"
         );
    }, 1000); //will be posted only after 1 second.
} 
```

**编辑：**添加`xhr.abort()`以中止任何旧请求并仅考虑最新的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:31:51.723

```
var request;
function searchSchools(name){
    if (!request) {
       request = $.post("search-schools.php", { name: name },
       function(data) {
           request = false;
           //-> Here i do whatever with data returned
       }, 
       "json"
       );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:43:16.670

假设您不希望我在对 OP 的第一条评论中指出的行为

我喜欢以更浪费的方式处理这类问题：

```
var xhr;
function search(term) {
    if (xhr) {
        xhr.abort();
    }

    xhr = $.post(...);
} 
```

这使得基本逻辑更容易处理，因为中止请求的成功回调不会被调用，并且您始终会获得有关实际输入的最新结果。

如果您对启动和中止可能的许多请求持谨慎态度，请在适当的关键事件上引入限制器 - 从而也实现关注点的分离。

在你的脚本中给出`xhr`正确的上下文——在这个例子中它是全局的。你想避免这种情况。

EDIT1 - 添加：

`xhr`永远不会取消。您可能希望在`complete`jQuery AJAX 设置对象的处理程序中执行此操作。另一方面，调用`abort()`中止或完成的请求实际上是 NOP

# php - 无法通过 Ajax 添加到数据库

> ID：10690598
> 
> 赞同：0
> 
> 时间：2012-05-21T18:28:34.347
> 
> 标签：php, ajax, database

单击提交按钮时，应返回所选奖牌的 ID，并通过 Ajax 将其插入数据库中。但这似乎不起作用。有人知道发生了什么或我做错了什么吗？这是表格：

```
<form action="" method="post">
<?php

            while($medal = $allMedals->fetch_assoc())
                {
                    echo "<img src='" . $medal['imagepath'] . "' />";
                    echo "<input type='radio' name='radio' class='selectmedal' value='" . $medal['medalid'] . "' />";
                }

?>
            <input type='submit' value='Nominate' id='submitknop' onclick='geklikt()'/>
</form> 
```

这是geklikt的功能：

```
function geklikt(){
        alert($("#selectmedal").val());
        var medalid = $(".selectmedal").val();
        var data = { selectmedal:medalid };

        $.ajax({
            type: "POST",
            url: "ajax/medal_save.php",
            data: data
        }).done(function( msg ) {
            $(".feedback").text(msg.message);
        });

        return false; 
```

正在显示警报，但显示与选择的每个奖牌相同的 id (id 3)。这是来自 Medal_save.php 的代码：

```
<?php
    include('../classes/Nomination.class.php');

    if(!empty($_POST['selectmedal']))
    {
        $nomination = new Nomination();
        $nomination->Medal = $_POST['selectmedal'];
        try
        {
            $nominate->Save();
            $feedback ['message'] = "Nomination succes!";
            $feedback ['status'] = "success";
        }
        catch(Exception $e)
        {
            $feedback ['message'] = $e->getMessage();
            $feedback ['status'] = "error"; 
        }   
    }
    else
    {
        $feedback ['message'] = "Please select a medal";
        $feedback ['status'] = "error";     
    }
    header('Content-type: application/json');
    echo json_encode($feedback);
?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:42:03.077

看起来您需要获取**选定**的单选按钮

```
 $('input[name=radioinputname]:checked', '#yourformid').val(); 
```

也就是说，如果您实际上并没有说您想要属性 id (?)，如果是这样，请使用

```
 $('input[name=radioinputname]:checked', '#yourformid').attr("id"); 
```

所以

```
<form action="" method="post" id="myradioform">
   <?php

        while($medal = $allMedals->fetch_assoc())
            {
                echo "<img src='" . $medal['imagepath'] . "' />";
                echo "<input type='radio' name='radioinputname' 
                      class='selectmedal' value='" . $medal['medalid'] . "' />";
            }

      ?>
        <input type='submit' 
         value='Nominate' id='submitknop' onclick='geklikt()'/>
  </form>

<script type="text/javascript">
   function geklikt(){
    alert($("#selectmedal").val());

    /* here */
    var medalid = $('input[name=radioinputname]:checked', '#myradioform').val();

   /* or if you actually meant to you want the attribute id */
   /*
  var medalid =  $('input[name=radioinputname]:checked', '#myradioform').attr("id");
 */

    var data = { selectmedal:medalid };

    $.ajax({
        type: "POST",
        url: "ajax/medal_save.php",
        data: data
    }).done(function( msg ) {
        $(".feedback").text(msg.message);
    });

    return false;
  }
  </script> 
```

# node.js - 在 ubuntu 12.04 上安装 node.js 时出错-“项目未配置（首先运行 'waf configure'）”

> ID：10690602
> 
> 赞同：0
> 
> 时间：2012-05-21T18:28:56.543
> 
> 标签：node.js, ubuntu, installation, waf

因此，我正在遵循 node.js 安装过程（来自存储库），其中包含以下基本步骤。

1.  git 克隆[https://github.com/joyent/node.git](https://github.com/joyent/node.git)

2.  光盘节点

3.  git checkout v0.6.16 #尝试检查 nodejs.org 的稳定版本是什么

4.  。/配置

5.  制作

6.  须藤使安装

尝试在命令行中运行 Makefile（键入 make。）后，我收到以下错误，我不知道如何修复。

**项目未配置（首先运行“waf configure”）错误。制作：****[程序] 错误 1 ​​**

 *我正在尝试在 ubuntu 12.04 上执行此操作。谷歌搜索这个问题并没有看到任何解决方案。不寻求简洁的回应。我想要有关如何解决问题的具体说明。感谢您的帮助，如果您给出良好的回应，我会给您打分！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:45:16.150

You are missing the OpenSSL headers for compiling node.js:

*   To compile without SSL support: Follow all steps from above, but configure with `./configure --without-ssl`
*   Install SSL development packages before configure: `sudo apt-get install libssl-dev`*

# linux - 如何关闭 Linux 系统？

> ID：10690604
> 
> 赞同：-1
> 
> 时间：2012-05-21T18:28:59.453
> 
> 标签：linux, shutdown

Linux 似乎有很多命令，既适用于操作系统，也有 Linux 工具和实用程序，适用于 GUI 和命令行。

我有兴趣了解如何关闭 Linux 系统。另外，想知道shutdown命令的种类和用途。

我有一个适用于 DOS 并且基于 Linux 的工具，所以我假设有一些适用于 Linux 的工具。否则，我无法完成我的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:34:59.050

If by code you mean command, here ya go: `shutdown -h now`

However this question has nothing to do with programming and doesn't belong on Stackoverflow.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:33:01.140

尝试这个：

```
sudo /sbin/shutdown -h now 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T19:01:36.873

自 8.04 以来，我一直在 Ubuntu 上使用它

```
sudo halt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T19:08:20.583

使用初始化命令。最常用的是：

```
init 0 Halt or shutdown
init 1 Single user mode
init 6 Reboot 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T18:32:51.553

这是 linux 的 bash 命令列表。关机命令为“shutdown” 关机或重启linux

[http://ss64.com/bash/](http://ss64.com/bash/)

# php - jQuery DataTable 创建问题

> ID：10690608
> 
> 赞同：0
> 
> 时间：2012-05-21T18:29:32.040
> 
> 标签：php, javascript, jquery, datatable

我需要填充 DIV 容器，即使用[jQuery DataTable](http://datatables.net/release-datatables/examples/basic_init/zero_config.html)创建一个表。问题是这个例子对我不起作用。我看到的不是格式化的表格，而是没有任何 jQuery DataTable 插件元素的未格式化表格。

下面显示的 php 文件位于文件夹中`main/tables`，而所有脚本位于`main/scripts/media`.

那么，我的代码实际上有什么问题？

```
<?php
    include_once 'include/DatabaseConnector.php';
    $query2="SELECT * FROM resources;";
    $result2=DatabaseConnector::ExecuteQueryArray($query2);
?>

<script type="text/javascript" src="../scripts/media/js/jquery.dataTables.min.js"></script>
<script src="../scripts/media/js/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript" src="../scripts/media/js/complete.js"></script>
<script type="text/javascript" src="../scripts/media/jsjquery.dataTables.js"></script>
<script type="text/javascript" src="../scripts/media/js/jquery.dataTables.columnFilter.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#example').dataTable();
} );
</script>

<div>
<h1>Employees</h1>

    <table width="100%">
        <tr>
            <td> 
                <div class="scrollbar">
                <table id="example" border="0" cellspacing="2" cellpadding="2" width = "100%">
                    <thead>
                    <tr>
                        <th scope="col">Reg</th>
                        <th scope="col">Title</th>
                        <th scope="col">Availability</th>
                        <th scope="col">Latitude</th>
                        <th scope="col">Longitude</th>
                        <th scope="col">Average Speed (km/h)</th>
                    </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($result2 as $row):?>
                        <tr class="alternate">
                        <td><?php echo $row['resReg']; ?></td>
                        <td><?php echo $row['resTitle']; ?></td>
                        <td><?php echo $row['resAvailability'] ? 'Yes' : 'No';?></td>
                        <td><?php echo $row['resLatitude']; ?></td>
                        <td><?php echo $row['resLongitude']; ?></td>
                        <td><?php echo $row['resAvgSpeed']; ?></td>
                        </tr>
                        <?php endforeach;?>
                    </tbody>
                </table>
                </div>
            </td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T23:07:14.297

您缺少 css 文件。添加它，您的问题应该得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T06:27:24.620

我认为您需要添加主 jquery 文件。喜欢;

`<script src="js/jquery-1.10.2.min.js"></script>`

*jQuery UI 与 jQuery 库文件不同。并检查这两个文件是否重复。如果是这样，您只需要一个。

`<script type="text/javascript" src="../scripts/media/js/jquery.dataTables.min.js"></script>`

`<script type="text/javascript" src="../scripts/media/jsjquery.dataTables.js"></script>`

# javascript - 试图拆分 javascript 字符串，说未定义

> ID：10690609
> 
> 赞同：1
> 
> 时间：2012-05-21T18:29:39.680
> 
> 标签：javascript, arrays

你能看看这个函数并告诉我错误在哪里吗？Firebug 说“字符串未定义”......感谢任何帮助。（链接在上面声明，console.debug(string) 显示一个逗号分隔的字符串）

```
function adRotate() {
    var id = Math.floor(Math.random()*links.length);
    var string = links[id];
    var item = string.split(',');
    console.debug(item);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:52:13.147

代码应该可以工作。如果控制台“*显示逗号分隔的字符串*”，这应该是字符串或数组。

如果`adRotate(["one,link", "second,link,"])`- 链接是`Array`- 你会得到：

```
function adRotate(links) {
    var id = Math.floor(Math.random()*links.length); // valid index in links
    var str = links[id]; // selects one of the links: str is a String
    var item = str.split(','); // splits the string to an Array
    console.debug(item); // logs the array
} 
```

可能的结果：`["one","link"]`或`["second","link"]`

如果`adRotate("one link, and second")`- 链接是`String`- 你会得到：

```
function adRotate(links) {
    var id = Math.floor(Math.random()*links.length); // valid index in links
    var str = links[id]; // selects one of the chars in the string: str is a String of length 1
    var item = str.split(','); // splits the one-char-string to an Array
    console.debug(item); // logs the array
} 
```

可能的结果：`["o"]`, `["n"]`, `["e"]`, `[" "]`, ..., `["k"]`, `["",""]`（用于逗号字符）, `["i"]`等。

# sql - Hibernate/SQL 将名称/键添加到结果中

> ID：10690613
> 
> 赞同：0
> 
> 时间：2012-05-21T18:29:53.410
> 
> 标签：sql, hibernate, grails

我将 Grails 用于 Web 应用程序，并且必须创建一个数据库查询，在其中我使用一些值进行计算。这些值来自我从和 grails-application 中选择的表。计算的值也应该传递给结果。计算本身并返回所有值就像一个魅力。我得到的结果是这样的（从表中简单地选择所有列）：

```
[[19, 15, false, 49.04757, 8.37106, 1.0, 'some text', false, 0, 0.03360229674009102]] 
```

好吧......我现在要做的是创建我得到的所有结果的对象。因为它是我用来查询数据库的休眠会话，所以我可以选择将“addEntity（className）”添加到查询的执行中 - 如下所示：

```
def list = sessionFactory.currentSession.createSQLQuery(query).addEntity(myClass).list() 
```

更好的是——我不必手动创建对象。但问题是，我丢失了有关计算值的信息（上部代码片段中的最后一个条目）

我可以想象有两种方法可以实现这一点：hibernate 给了我一些选项，比如 addEntity(myClass) - 就像我创建对象一样 - 添加计算的值

另一种方法是在 sql 查询中命名结果，所以我得到如下内容：

```
[[id:19, version:15, some_bool: false, first_double: 49.04757, second_double: 8.37106, some_floatvalue: 1.0, text: 'some text', another_bool: false, calculation_result: 0, 0.03360229674009102]] 
```

无论哪种方式，我什至不知道要搜索什么，因为我对这两种技术都不是很熟悉。

总而言之，我想要的是一种简单而干净的方法来创建我的类的实例/对象，并另外获得计算结果。如果您有进一步的想法来实现这一点 - 我很感激每一个提示和提示

甚至一些流行语也能帮助我实现这一目标。

我希望我清楚我的问题 - 如果不告诉我;）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:30:29.877

而不是`org.hibernate.SQLQuery#addEntity`您想要使用`org.hibernate.SQLQuery#addRoot`which 返回您 a `org.hibernate.SQLQuery.RootReturn`which 可用于进一步定义结果映射。在 3.6 中添加，我很确定这是 Grails 使用的

# c# - 使用 unobtrusiveValidationMode 时重复 jquery

> ID：10690614
> 
> 赞同：2
> 
> 时间：2012-05-21T18:29:57.777
> 
> 标签：c#, validation, webforms, .net-4.5

在已经有 jquery 的页面上使用 unobtrusivevalidationmode 时，jquery 被加载两次。一次在标题中，一次在表单内。你如何防止这种情况发生。

# eclipse - 无法读取 zip 文件条目

> ID：10690617
> 
> 赞同：0
> 
> 时间：2012-05-21T18:30:22.627
> 
> 标签：eclipse, spring, maven

我有一个 Maven 项目，当我尝试运行时，它给了我**BUILD FAILURE**`mvn install`并出现以下错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project core: Compilation failure: Compilation failure:
[ERROR] error: error reading C:\Users\lawson\.m2\repository\org\springframework\spring-beans\3.0.5.RELEASE\spring-beans-3.0.5.RELEASE.jar; cannot read zip file entry 
```

我已经在 Eclipse 的项目中看到了**Maven依赖项下的所有依赖项。**有人可以帮我理解为什么我会收到这个错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:45:34.030

我建议先尝试删除文件夹的内容：C:\Users\lawson.m2\repository\org\springframework，然后重做项目的 mvn clean 包。此外，我建议通过更新 maven-compiler-plugin 版本

```
 <build>
   <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>2.4</version>
        </plugin>
      </plugins>
    </pluginManagement>
 </build> 
```

看起来您已经下载了一个损坏的 jar 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:47:46.793

看起来您的 spring-beans 本地存储库条目在某种程度上已损坏。您可以重新安装它与`mvn install:install-file`目标。请参阅[http://maven.apache.org/plugins/maven-install-plugin/usage.html](http://maven.apache.org/plugins/maven-install-plugin/usage.html)。

# c# - 如何通过 Facebook C# SDK 自动登录 Facebook

> ID：10690618
> 
> 赞同：1
> 
> 时间：2012-05-21T18:30:25.220
> 
> 标签：c#, wpf, facebook, facebook-graph-api

我尝试使用 Facebook C# SDK 获取公共帐户提要**并以某种方式跳过 Facebook 弹出登录窗口阶段。**

所以当我这样做时

[https://graph.facebook.com/my_user_profile_id/feed?access_token=my_token_I_got_from_FBSDK](https://graph.facebook.com/my_user_profile_id/feed?access_token=my_token_I_got_from_FBSDK)

它返回 MYAPPLICATION1 的提要（请看下图。）

但我想获得该帐户的真实信息。（可以通过[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)获得它，但我必须登录！）

所以这是我的问题：如何获取帐户提要？

我登录了吗？如果我有如何在 WFP DLL 中实现它？（我不使用 WebBrowser 控件。没有机会使用 UI 登录。）

谢谢！

![在此处输入图像描述](../Images/2a11a686ff507d148b5d7ecc72786d7e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:12:50.987

我不确定为什么它对你不起作用，但它对我有用：

1.  转到图形 API 资源管理器
2.  在下拉列表中选择您的应用
3.  点击“获取访问令牌”
4.  在“扩展权限”选项卡上选择“read_stream”权限，然后单击“获取令牌”
5.  打开此网址：[https ://graph.facebook.com/my_user_profile_id/feed?access_token=TOKEN_YOU_GOT_JUST_NOW](https://graph.facebook.com/my_user_profile_id/feed?access_token=TOKEN_YOU_GOT_JUST_NOW)

我得到我的反馈。

之后，您可以按照此处所述将令牌延长至 60 天（参见第 4 节）：[https ://developers.facebook.com/roadmap/offline-access-removal](https://developers.facebook.com/roadmap/offline-access-removal)

然后将其写入 WPF dll 中的 DB（或硬编码）中。

**更新**- 另一个想法 - 您是否尝试为您的 APP 获取访问令牌 - 请参阅[https://developers.facebook.com/docs/authentication/applications/](https://developers.facebook.com/docs/authentication/applications/)？如果您的逻辑适用于应用程序的访问令牌 - 那么它将永远是好的。

# ruby - 我可以在 ruby 中设置保护 gem 以在 GNU 屏幕而不是 libnotify 中通知我吗？

> ID：10690623
> 
> 赞同：4
> 
> 时间：2012-05-21T18:31:05.937
> 
> 标签：ruby, gem, guard

我正在关注[Rails](http://ruby.railstutorial.org/)教程，但我正在服务器上进行操作。现在，我正在使用 Guard gem 来监控我的更改并执行测试。据我所知，如果测试失败或成功，它通常会使用 libnotify 通知我。

现在，我希望它在我的 GNU 屏幕实例上通知我。

有没有办法做到这一点？从[这个](http://rubydoc.info/github/guard/guard/master/Guard/Notifier)链接（Guard 的文档）我不确定，但我是一个红宝石初学者，无论如何我都需要问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T22:07:45.347

对于潜在的 Ruby 开发人员来说，编写一个 Guard 通知器将是一个很好的练习。

首先你 fork [Guard](https://github.com/guard/guard)，克隆项目并创建一个新的通知器，`lib/guard/notifiers/screen.rb`如下所示：

```
module Guard
  module Notifier
    module Growl
      extend self

      def available?(silent = false)
      end

      def notify(type, title, message, image, options = { })
      end

    end
  end
end 
```

现在你只需要实现这两种方法：

1.  `available?`用于检查环境、库和外部命令
2.  `notify`进行实际通知

查看API 通知程序的[Growl](https://github.com/guard/guard/blob/master/lib/guard/notifiers/growl.rb)通知程序和外部程序通知程序的[Notifysend 。](https://github.com/guard/guard/blob/master/lib/guard/notifiers/notifysend.rb)如果您仔细查看这些模块，您会发现大部分内容都是文档和初始化，通知代码本身只是很小的一部分。

您可以通过将其添加到您的项目中来尝试使用另一个项目中的 Guard `Gemfile`：

```
group :development do
  gem 'guard', path => '/home/you/code/guard'
end 
```

您还可以在完成之前打开拉取请求，Guard 核心团队将帮助您并指导您完成合并之前需要完成的工作，例如规范和文档。

# django - Django - 对两个不同的域名使用不同的views.py？

> ID：10690625
> 
> 赞同：2
> 
> 时间：2012-05-21T18:31:09.880
> 
> 标签：django, url-routing

我有两个站点共享相同的 models.py 和管理后端，但使用不同的 views.py 和不同的模板文件。

有没有办法让 Django 为两个域名中的每一个使用不同的 views.py 文件？我可以在某种自定义中间件中查看 request.HTTP_HOST 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T19:16:27.100

扩展@jdi的答案。Sites 框架是在 Django 中为此目的而设计的，但是您需要分别为每个域提供服务才能利用它。您所做的是为每个域创建一个单独的 settings.py 文件。不过，您仍然可以拥有一个通用的 settings.py，每个都包含。例如：

## 设置.py

```
# all common settings here 
```

## domain1_settings.py

```
from settings import *

SITE_ID = 1
ROOT_URLCONF = domain1_urls.py 
```

## domain2_settings.py

```
from settings import *

SITE_ID = 2
ROOT_URLCONF = domain2_urls.py 
```

然后，您手动指定启动服务器时要使用的设置文件：

## 发展

```
python manage.py runserver --settings=domain1_settings.py 
```

## 生产（独角兽）

```
python manage.py run_gunicorn --settings=domain1_settings.py 
```

## 生产（uwsgi）

```
uwsgi --env DJANGO_SETTINGS_MODULE=myproject.domain1_settings 
```

显然，您更可能希望将其包含在 gunicorn/uwsgi 的实际配置中；以上仅用于说明目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T18:51:56.830

我相信这是 django 中站点框架的目的：
[https ://docs.djangoproject.com/en/1.4/ref/contrib/sites/](https://docs.djangoproject.com/en/1.4/ref/contrib/sites/)

您定义站点，并有设施在您的项目中检查这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:09:07.213

@jdi 提到的`Sites`框架可能是您正在寻找的，尽管它可能需要您将`django.contrib.sites.models.Site`模型集成到当前模型中。

另一种选择是，如果您已经（或计划拥有）两个 Django 站点在两个不同的服务器进程中运行，那么您可以考虑将两个不同的`settings.py`文件与每个进程相关联。每个`settings.py`文件本质上是相同的，只是引用不同的`urls.py`文件，而不同的文件又会引用不同的`views.py`文件。

如果您将来看到这两个站点的差异更大，则此解决方案可能会更好。

# css - 960格系统，色彩延伸

> ID：10690628
> 
> 赞同：0
> 
> 时间：2012-05-21T18:31:19.383
> 
> 标签：css

我有两个问题

1.  我将如何将网格内的按钮居中？
2.  我如何让颜色溢出以填充页面的范围

    ```
    <title>Virtual Harrogate!</title> 
    ```

    ```
    <header class="container_12 a-new-homepage">
        <nav>
            <div>
                <ul>                                    

                            <div class="grid_12">

                                <li class="grid_2 alpha"> 
                                    <a href="" class="a-button">Login</a>
                                </li>
                                <li class="grid_2">
                                    <a href="" class="a-button">Right Now</a>
                                </li>
                                <li class="grid_2">         
                                    <a href="" class="a-button">Features</a>
                                </li>
                                <li class="grid_2"> 
                                    <a href="" class="a-button">Event</a>
                                </li>
                                <li class="grid_2">
                                    <a href="" class="a-button">About us</a>
                                </li>   
                                <li class="grid_2 omega">
                                    <a href="" class="a-button">Contact Us</a>
                                </li>                                   
                            </div>
                </ul>

            </div>
        </nav>
    </header> 
    ```

这是我的 layout.css，我没有以任何方式更改 960.css 或 text.css

```
/* This is where the Format of every page and its tags are defined -- will be superceeding my styles.css */

.a-new-homepage{
    background: #2a2a2a; /* charcoal grey */
    overflow-x:visible;
    overflow-y:visible;
    bottom-border: 20px;
}

/* Header = define the h elements and the page header
-------------------------------------------------------------------------------------------------------------*/
h1 {
    text-align: center;
    text-transform: uppercase;
    text-decoration: underline;
    background-color: #78679A /* purple */
}

h2 {
}

h3 {
}

h4 {
}

h5 {
}

h6 { 
}

nav ul { /* removes all formatting from the list elements which we will go on to define */
    margin: 0;
    padding: 0; 

}

nav li{
    list-style-type: none;
    float: right;   
    font-size: 12px;
    padding: 0 0 0 0;
    text-transform: uppercase;

}

nav li .a-button { /* sets the width and height of the class a-button locally (first number = top n bottom, second = left n right) */
    padding: 5px 15px;

}

/* buttons
--------------------------------------------------------------------------------------------------------------*/

.a-button {
    -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
    -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
    box-shadow:inset 0px 1px 0px 0px #ffffff;
    background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#CCFE8B), to(#99C757));
    background:-moz-linear-gradient(100% 100% 90deg, #99C757, #CCFE8B);
    background-color:#ededed;
    -moz-border-radius:8px;
    -webkit-border-radius:8px;
    border-radius:8px;
    border:1px solid #6f9a4d;
    display:inline-block;
    color:#777777;
    font-family:arial;
    font-size:15px;
    font-weight:bold;
    padding:10px 15px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ffffff;
    text-align: center;
    text-transform: uppercase;
}

.a-button:hover {
    background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#CCFE8B), to(#99C757));
    background:-moz-linear-gradient(100% 100% 90deg, #99C757, #CCFE8B);
    background-color:#ededed;
}

.a-button:active {
    position:relative;
    top:1px;

/* Tabs = The the inpage tabs
--------------------------------------------------------------------------------------------------------------*/
li.a-tab  {
    list-style-type: none;
    float: center;
    display: inline-block;
    border-top:solid;
    border-right: solid;
    border-left: solid;
    -webkit-border-top-left-radius: 15px;
    -webkit-border-top-right-radius: 15px;
    -moz-border-radius-topleft: 15px;
    -moz-border-radius-topright: 15px;
    border-top-left-radius: 15px;
    border-top-right-radius: 15px;

    font-size: 16px;
    margin:0 10px; 0 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:21:04.877

我不知道您所说的让颜色溢出以填充页面范围是什么意思？你说的是哪种颜色？他们在页面上溢出到哪里？

无论如何，要使您的按钮居中，您可以从 <li> 标签中删除 float:right 属性。然后您可以将这些相同的 <li> 更改为 display:inline 或 display:inline-block。然后，如果您在标签上放置一个 text-align:center ，它会将按钮放在页面的中间顶部。

# php - 数组差异未找到数组

> ID：10690630
> 
> 赞同：0
> 
> 时间：2012-05-21T18:31:22.970
> 
> 标签：php, arrays, array-difference

我有一个应该比较 2 个数组的函数。Array diff 正在发送警告，即第一个参数不是数组......也可以使用任何更好的方法来编写此函数。我只是想在这个上做点什么。谢谢！

```
function changeLog(){
include('../includes/conn.inc.php'); 
//select object and make an array with each current value 
    $stmt = $mysql->prepare ("SELECT * FROM table WHERE id=?");
    $stmt->bind_param("i", $_POST['id']);
    $OK = $stmt->execute();
    $stmt->bind_result(
        $id,
        $name,
        $created,
        $edited,
        $owner
    );
while($row = $stmt->fetch()) {
    $array1 = array(
        'name' => $name,
        'owner' => $owner 
        );}
    $stmt->close(); 

//$array1 now holds current values for each field
//now grab the post values from the update and stick them into array2

        $name= $_POST['name'];
        $owner= $owner;

    $array2 = array(
        'name' => $name,
        'owner' => $owner 
        );

//$array2 now holds post values for each field in the update
//check the arrays and spit out the differences

    $result = array_diff($array1, $array2);
//strip the values and just output the array keys

$dbInput =(array_keys($result));

        foreach($dbInput as $i){
            $owner=  'use'.$_SESSION['i'];
            $sql = 'INSERT INTO history (id, created, edited, owner, parent, body) 
                    VALUES (NULL,NOW(),NOW(),?,?,?)';
            $stmt = $mysql->stmt_init();
            if ($stmt->prepare($sql)) { 
                $stmt->bind_param('sss', $owner, $_POST['id'], $i);
                $OK = $stmt->execute();}
                $stmt->close(); 

        }
}// end changeLog 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:02:35.110

试着把它编码得更像这样，看看它是否能告诉你什么：

```
if($row = $stmt->fetch()) {
   $array1 = array('name' => $name, 'owner' => $owner);
   //$array1 now holds current values for each field 
   //now grab the post values from the update and stick them into array2
   $name= $_POST['name'];
   $owner= $owner;
   $array2 = array('name' => $name,         'owner' => $owner          );
  //$array2 now holds post values for each field in the update 
  //check the arrays and spit out the differences
  $result = array_diff($array1, $array2); 
 // ...
} else {
      echo "no result returned";
} 
```

# asp.net-mvc - 尝试根据 Web 请求实现会话，没有配置当前会话上下文

> ID：10690631
> 
> 赞同：3
> 
> 时间：2012-05-21T18:31:31.880
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate, session-per-request

正如我在标题中所说，我想为每个 Web 请求实现会话。我的会话提供程序是这样配置的（我对更改此配置不感兴趣。）

```
 public class SessionProvider
    {
        public static SessionProvider Instance { get; private set; }
        private static ISessionFactory _SessionFactory;

        static SessionProvider()
        {
            var provider = new SessionProvider();
            provider.Initialize();
            Instance = provider;
        }

        private SessionProvider()
        {

        }

        private void Initialize()
        {
            string csStringName = "ConnectionString";
            var cfg = Fluently.Configure()
                ....ommiting mappings and db conf.
                .ExposeConfiguration(c => c.SetProperty("current_session_context_class", "web"))
                .BuildConfiguration();
            _SessionFactory = cfg.BuildSessionFactory();    
        }

        public ISession OpenSession()
        {
            return _SessionFactory.OpenSession();
        }

        public ISession GetCurrentSession()
        {
            return _SessionFactory.GetCurrentSession();
        }
    } 
```

在 Global.asax.cs 中，我有以下与每个 web req 的会话相关的代码。

```
private static ISessionFactory SessionFactory { get; set; }

    protected void Application_Start()
    {
        SessionFactory = MyDomain.SessionProvider.Instance.OpenSession().SessionFactory;

        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

    }

    protected void Application_BeginRequest(object sender, EventArgs e)
    {
        var session = SessionFactory.OpenSession();
        CurrentSessionContext.Bind(session);
    }

    protected void Application_EndRequest(object sender, EventArgs e)
    {
        var session = CurrentSessionContext.Unbind(SessionFactory);
        session.Dispose();
    } 
```

在调试我的 webapp 时出现错误：**没有配置当前会话上下文。** ErrorMessage 引用 global.asax 行 CurrentSessionContext.Bind(session);

**更新**已 添加`.ExposeConfiguration(c => c.SetProperty("current_session_context_class", "web"))` ，现在我在从我的控制器中检索数据时收到错误消息，如下所示 **错误消息：**会话已关闭！对象名称：'ISession'。

控制器代码：

```
using (ISession session = SessionProvider.Instance.GetCurrentSession())
            {
                using (ITransaction transaction = session.BeginTransaction())
                {
                    data = session.QueryOver<Object>()
                       ...ommiting

                    transaction.Commit();
                    return PartialView("_Partial", data);
                }

            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:05:34.733

## 第一个问题

你需要在你的 nhibernate 配置部分配置它：

```
<property name="current_session_context_class">web</property> 
```

我目前也在做这样的事情：

```
if (!CurrentSessionContext.HasBind(SessionFactory))
{
    CurrentSessionContext.Bind(SessionFactory.OpenSession());
} 
```

## 第二个问题

流畅地修改配置请看下面的文章：[currentsessioncontext fluent nhibernate怎么做？](https://stackoverflow.com/questions/4702703/currentsessioncontext-fluent-nhibernate-how-to-do-it)

## 第三个问题

您将关闭会话两次。

```
using (ISession session = SessionProvider.Instance.GetCurrentSession()) 
```

关闭您的会话。然后你又做了一次`Application_EndRequest`。如果您还有其他问题，请发布一个新问题。

# ruby-on-rails - ActiveRecord ArgumentError：负字符串大小（或大小太大）

> ID：10690640
> 
> 赞同：7
> 
> 时间：2012-05-21T18:32:14.820
> 
> 标签：ruby-on-rails, activerecord

我已经和这个一起工作了几天。这是 ActiveRecord 错误和应用程序跟踪。

```
ArgumentError: negative string size (or size too big): 
EXEC sp_executesql N'SELECT [ops_jobs_join].* FROM [ops_jobs_join] 
WHERE (work_center_id = N''M*1053'' OR work_center_id = N''M*1035'' OR
      work_center_id = N''M*1037'' OR work_center_id = N''M*1036'') AND
      (status != N''C'') AND (start_date != N'''') AND 
      (start_date >= N''20120516'') AND (comp_date <= N''20120527'') AND 
      (work_order NOT LIKE N''LA%'') 
ORDER BY work_center_id ASC, start_date ASC, starting_shift_num ASC, 
      status ASC, priority ASC, comp_date ASC, ending_shift_num ASC, 
      due_date ASC, sequence_number ASC' 
```

事实证明，如果我调用 Op.all 我会收到此错误：

> ActiveRecord ArgumentError：负字符串大小（或大小太大）

如果我忽略使用可能包含 unicode 字符的列，它可以正常工作。所有数据都毫无问题地存储在数据库中，但由于某种原因 rails3 没有它。

一些 where 子句将返回记录，而另一些则导致相同的错误：

> activerecord-sqlserver-adapter (3.2.4) lib/active_record/connection_adapters/sqlserver/database_statements.rb:421:in `fetch_all'

它类似于这两个帖子：

*   [ActiveRecord::StatementInvalid: ArgumentError: 负字符串大小（或大小太大）：SELECT * FROM [shop]](https://stackoverflow.com/questions/9999576/activerecordstatementinvalid-argumenterror-negative-string-size-or-size-too)

*   [ActiveRecord 在一张桌子上不起作用](https://stackoverflow.com/questions/3651954/activerecord-doesnt-work-on-one-table)

第一篇文章中的解决方案似乎是更改我想避免的 gem。

我查看了我的表格，我认为我没有使用任何关键字作为字段名称。

我使用与此类似的其他查询，它们工作正常。唯一的区别是我在 where 子句中使用的值 (work_center_id = N''M*1053'')。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:34:28.687

Rails 对数据进行操作的默认编码是 UTF8，您也需要在数据库中使用这种编码。改变它，一切都会好起来的。

# excel - 返回与vbs excel中的多个条件匹配的行号

> ID：10690642
> 
> 赞同：0
> 
> 时间：2012-05-21T18:32:16.200
> 
> 标签：excel, search, vba, criteria

我需要能够在整个表中搜索匹配多个条件的行。我们使用一个程序以 .csv 文件的形式输出数据。它有分隔数据集的行，这些标题中的每一个都没有任何唯一的列，但是如果我在表中搜索多个值，我应该能够查明每个标题行。我知道我可以使用 Application.WorksheetFunction.Match 根据单个条件返回一行，但我需要搜索两个三个或四个条件。

在伪代码中，它会是这样的：

```
Return row number were column A = bill & column B = Woods & column C = some other data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T10:15:10.500

我们需要使用数组：

有2种数组：

```
 numeric {1,0,1,1,1,0,0,1}
    boolean {TRUE,FALSE,TRUE,TRUE,TRUE,FALSE,FALSE,TRUE} 
```

要在它们之间进行转换，我们可以使用：

```
 MATCH function
    MATCH(1,{1,0,1,1,1,0,0,1},0)  -> will result {TRUE,FALSE,TRUE,TRUE,TRUE,FALSE,FALSE,TRUE}

    simple multiplication
    {TRUE,FALSE,TRUE,TRUE,TRUE,FALSE,FALSE,TRUE}*{TRUE,FALSE,TRUE,TRUE,TRUE,FALSE,FALSE,TRUE} -> will result {1,0,1,1,1,0,0,1} 
```

您可以在 match 函数中检查一个数组，如下图所示输入它，请注意 MATCH 函数会将数组视为“或”函数（一个匹配将导致 true 即：

```
 MATCH(1,{1,0,1,1,1,0,0,1},0)=TRUE
    , YOU MUST CTR+SHIFT+ENTER !!! FOR IT TO GIVE AN ARRAY BACK!!! 
```

在下面的示例中，我表明我想将除管理员之外的所有员工的小时数相加

我们有 2 个选项，长的简单方法，复杂的快速方法：

```
 long simple way
    D2=SUMPRODUCT(C2:C9,(A2=A2:A9)*("admin"<>B2:B9)) <<- SUMPRODUCT makes a multiplication 
```

基本上 A1={2,3,11,3,2,4,5,6}*{0,1,1,0,0,0,0,0} （它必须是 SUMPRODUCT 中向右的数字数组!!!) 即：A1=2*0+3*1+11*1+3*0+2*0+4*0+5*0+6*0

这会导致问题，因为如果您拖动单元格以自动完成其余单元格，它将编辑较低和较高的值，即： D9=SUMPRODUCT(C9:C16,(A9=A9:A16)*("admin"< >B9:B16))，如果你有一个表格并且想以不同的顺序查看结果，则与上述相同

```
 the fast complicated way
    D3=SUMPRODUCT(INDIRECT("c2:c9"),(A3=INDIRECT("a2:a9"))*("admin"<>INDIRECT("b2:b9"))) 
```

它是一样的，除了在自动完成或表格重新排序时我们不想修改的单元格上使用了 INDIRECT 被警告有时会给出 VOLATILE ERROR，我建议不要在单个单元格上使用它或在数组中只使用一次

f* c* 我不能发布图片 :( 表格是：

```
 case    emplyee hours   totalHoursPerCaseWithoutAdmin
    1   admin   2   14
    1   him 3   14
    1   her 11  14
    2   him 3   5
    2   her 2   5
    3   you 4   10
    3   admin   5   10
    3   her 6   10 
```

对于检查数组的函数，打开插入函数按钮（它看起来像和 fx），然后双击 MATCH，然后如果您在 Lookup_array 中输入一个值，例如 A2=A2:A9 对于我们的示例，它将给出 {TRUE,TRUE ,TRUE,FALSE,FALSE,FALSE,FALSE,FALSE} 那是因为只有前 3 行来自 case=1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T22:59:56.120

I would use this array* formula (for three criteria):

```
=MATCH(1,((Range1=Criterion1)*(Range2=Criterion2)*(Range3=Criterion3)),0) 
```

*commit with `Ctrl+Shift+Enter`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T20:23:01.967

像这样的东西？

假设您在 A1:C20 中输入数据

我正在寻找“Bill”中的`A`“Woods”`B`和“其他一些数据”`C`

根据需要进行更改

=IF(INDEX(A1:A20,MATCH("Bill",A1:A20,0),1)="Bill",IF(INDEX(B1:B20,MATCH("Woods",B1:B20,0), 1)="Woods",IF(INDEX(C1:C20,MATCH("其他一些数据",C1:C20,0),1)="其他一些数据",MATCH("Bill",A1:A20,0 ），“未找到”）））

**快照**

![在此处输入图像描述](../Images/1e0bcddf351ca43c63fa6bf4834956a4.png)

# java - jTreeModel 在通过套接字连接发送后不展开

> ID：10690644
> 
> 赞同：0
> 
> 时间：2012-05-21T18:32:24.080
> 
> 标签：java, swing, sockets, jtree

我编写了一个与`sockets`. 服务器是多线程的，可以容纳多个客户端。

现在我在我的客户端应用程序中使用 a `jTree model`，并且在我的服务器上我有一个文件夹，其中包含虚构的项目文件夹和文件。首先，这个应用程序只是客户端与服务器上的数据库，现在我希望它完全通过套接字连接运行。

唯一的问题是 jTree 模型是在服务器上创建的。因此，当程序启动时，客户端要求服务器创建项目文件夹的 jTree 模型，用户将在客户端应用程序中使用其文件。

服务器将发送一个`respone`带有 jTree 模型的文件，客户端将这个模型放入`jTree swing component`. jTree 已成功显示给用户（因此 Tree 模型`succesfully`通过套接字连接发送），但是当用户想要展开第一个项目文件夹映射时：jTree 显示例如：'testProject' 作为文件夹。例如文件夹 testProject 包含一些文件：

*   测试项目.exe
*   斌
    *   测试.java
    *   test2.java
*   源代码

正如您在上面的示例中看到的，当用户双击 jTree 中的“testProject”时，jTree 应该向用户显示上面的树。

**现在我的问题**

我认为问题在于服务器只创建第一个文件夹的模型。就像它只发送一个带有“projectFolder”的模型。但我希望`above structure`发送给用户，以便用户可以使用 jTree 从服务器下载文件。（我稍后会实施）。

我如何`full model`从服务器获取 jTree 可以通过项目文件夹和他的所有文件向用户显示完整模型。

为了让一切更清楚一点：

**我的代码**

我在客户端上使用这段代码来调用在服务器上创建 jTree 模型的方法。

```
public ProjectTreeModel getTreeModel(String projectName) throws ClassNotFoundException {
    try {
        //Creating empty object to invoke te mehod on the server.
        paramObject parameters = new paramObject();
        parameters.string1 = projectName;

        //Creating package to invoke the right method on the server.
        Packet data = new Packet("treemodel.GetModel",parameters);

        //sends in this case an empty object to the server and invokes the treemodel.GetModel method on the server.
        oos.writeObject(data);
        oos.flush();

        ProjectTreeModel model = (ProjectTreeModel) ois.readObject();

        return model;

    } catch (IOException ex) {
        ex.printStackTrace();
    }

    return null;
} 
```

我在服务器上使用这段代码来创建 projectModel 并将其作为对象发送回客户端，以便在前面的代码示例中将其作为 jTree 模型返回。

```
if(data.getMethod().equals("treemodel.GetModel")) 
         { 
             //in this example i don't use this object, just ignore it.
             paramObject parameters = (paramObject) data.getObject();

             //Extract the information from User
             String projectName = parameters.string1;

             ProjectTreeModel treemodel = new ProjectTreeModel();
             treemodel.newRootPath(projectName);

             oos.writeObject(treemodel);
             output.flush();
             form.sendOutput("ProjectTreeModel succesfully sended to: " + Email);
         } 
```

最后这就是我创建 TreeModel 的方式。

```
import java.io.File;
import java.io.Serializable;
import javax.swing.event.TreeModelListener;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreePath;

public class ProjectTreeModel implements TreeModel, Serializable
{
File f;
private static String rootPath = "src/authorsystem/Projects";

public static void newRootPath(String newRoot)
{
    String desktopPath = System.getProperty("user.home") + "\\Desktop";
    desktopPath.replace("\\", "/");
    rootPath = desktopPath + "\\projectfolders";
}

@Override
public Object getRoot() {
    //userName = LogInForm.ingelogt;

    f = new File(rootPath);
    return f;
}

@Override
public Object getChild(Object parent, int index) {
    File pathName = (File) parent;
    String[] fileNames = pathName.list();
    return new File(pathName.getPath(), fileNames[index]);
}

@Override
public int getChildCount(Object parent) {
    File pathName = (File) parent;
    if(pathName.list() != null)
    {
        String[] fileNames = pathName.list();
        return fileNames.length;
    }
    else
    {
        return 0;
    }
}

@Override
public boolean isLeaf(Object node) {
    return ((File)node).isFile();
}

@Override
public void valueForPathChanged(TreePath path, Object newValue) {

}

@Override
public int getIndexOfChild(Object parent, Object child) {
    File pathName = (File) parent;
    File childName = (File) child;
    if(pathName.isDirectory())
    {
        String[] fileNames = pathName.list();
        for (int i = 0; i < fileNames.length; i++) {
            if(pathName.compareTo(childName) == 0)
            {
                return i;
            }
        }
    }
    return -1;
}

@Override
public void addTreeModelListener(TreeModelListener l) {

}

@Override
public void removeTreeModelListener(TreeModelListener l) {

}

} 
```

我希望有人可以帮助我，或者只是帮助我解决这个问题的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:48:18.120

好吧，如果有人发现这个，就关闭这个话题。很久以前我就研究过这个，但这就是我们管理它的方式：

对于 treeModel，我们制作了自定义节点。我们只发送必须在树中显示的数据，而不是通过套接字连接发送 JTreeModel 对象。在客户端从服务器接收到数据后，我们遍历所有数据并检查节点是父节点还是子节点。这基本上可以通过我的问题中上面覆盖的 TreeModel 类代码片段来完成。

# iphone - segue通过后图片不显示

> ID：10690645
> 
> 赞同：2
> 
> 时间：2012-05-21T18:32:27.557
> 
> 标签：iphone, objective-c, ios, xcode, uiimage

正如标题所说，我试图在 UIImageview 中显示 UIImage 问题是它不会显示。就在我展示它之前，我从另一个角度通过了一个segue。当我断点时，我看到 UIImage 已分配但没有图片将显示，我尝试将其设置为静态图片并且效果很好。

相关代码应该是...

在 FirstViewController.m

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{

    UIImage* img = [info objectForKey:UIImagePickerControllerOriginalImage];

    if (picker.sourceType == UIImagePickerControllerSourceTypePhotoLibrary) {
        NSLog(@"Bild hämtad!");
        [self moveImage];
    }
    else
    {
    UIImageWriteToSavedPhotosAlbum(img, self, @selector(image:didFinishSavingWithError:contextInfo:), Nil);
    }

    [picker dismissModalViewControllerAnimated:YES];
    [MBProgressHUD showHUDAddedTo:self.view animated:YES];
}

- (void)image: (UIImage *)image didFinishSavingWithError: (NSError *) error contextInfo: (void *) contextInfo{

    if (!error) {
        NSLog(@"Bild sparad!");
        [self moveImage];
    }
    else{
        NSLog(@"%@",error);
    }
}
-(void)moveImage
{   
    [self performSegueWithIdentifier:@"ImageEdit" sender:self];
    [MBProgressHUD hideHUDForView:self.view animated:YES];
    NSLog(@"Bild Flyttad!");

}
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:self
{
    if ([[segue identifier] isEqualToString:@"ImageEdit"])
    {
        [segue.destinationViewController setMImage:image];
    }

} 
```

在 ImageEditController.m 中

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [imageView setImage:_mImage];
    NSLog(@"Bild Visas!");
} 
```

我知道有很多代码，但我认为发布比发布少更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:58:15.050

你有没有初始化过 imageView？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    imageView = [[UIImageView alloc] init];
    [imageView setImage:_mImage];
    NSLog(@"Bild Visas!");
} 
```

如果它从未被初始化，任何对它的函数调用都会默默地失败（在 nil 指针上调用函数什么都不做）。

# jquery - 一个网页可以处理两个版本的 jQuery 吗？

> ID：10690647
> 
> 赞同：2
> 
> 时间：2012-05-21T18:32:37.207
> 
> 标签：jquery, asp.net

我正在开发一个页面上加载了两个版本的 jQuery（版本 1.5.1 和 1.7.2）的项目。1.5 版本是 jsTree 的实现，1.7 版本是最新版本的 jqGrid。

我了解下载两个版本的 jQuery 对性能的影响以及名称冲突的可能性，但是有没有人遇到过这样的情况，并且页面会因此遇到固有的问题。

目前，该站点运行良好，我没有注意到页面上不同版本的 jQuery 可能导致的任何重大问题。但我无法快速删除一个版本或另一个版本，因为它似乎会导致一个或另一个控件（树或网格）崩溃。

我需要删除一个版本的 jQuery。我正在寻找有关页面上两个版本的 jQuery 会出现哪些潜在问题的建议，以及有关如何删除一个引用的建议。而且，如果有人认为拥有两个版本都很好，那么任何关于为什么我应该独自离开的想法。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:42:53.297

您绝对可以在一个网页上运行两个版本的 jQuery。唯一的缺点是额外的 http 请求。

但是，让 1.5 代码在 1.7 中运行并不是很困难。摆脱 1.5 并确保 1.7 高于所有需要 jquery 的插件，看看有什么问题。在此处或在 jQuery 论坛中发帖，以获得解决这些小问题的支持。

由于 1.6 中的更改，您将不得不做出的最可能的更改是更改几个`.attr()`调用。`.prop()`

编辑：遵循 Robert Harvey 的建议并将 jsTree 升级到最新版本也是明智的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:42:59.690

除了拥有多个库的开销之外，我不知道您会遇到什么重大问题。如果您确实遇到问题，[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)可能会帮助您解决它

这个 SO 线程处理您的主题。[如何在同一页面上运行不同版本的 jQuery？](https://stackoverflow.com/questions/528241/how-do-i-run-different-versions-of-jquery-on-the-same-page)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T09:47:45.593

是的，它可以处理两个版本的 jquery .....在第二个版本中，将变量声明为 $.noConflict(true)。并使用声明的变量代替 jquery 代码中使用的 $ 。请检查以下代码：此代码在声明第二个版本的 jquery 后使用：

```
<script type="text/javascript"> 
```

var jQuery_1_9_1 = $.noConflict(true); 功能页面加载（发件人，参数）{

```
 var $ddl = jQuery_1_9_1("select[name$=drpClassCode]");
        var $ddl1 = jQuery_1_9_1("select[name$=drpSubContractors]");
        $ddl.select2();
        $ddl1.select2();

        $ddl.bind("change keyup", function () {
            $ddl.fadeIn("slow");

        });

        $ddl.bind("change keyup", function () {
            $ddl1.fadeIn("slow");

        });
    } 
```

# python - 在python中连续检查具有许多正则表达式的字符串时缩进太多

> ID：10690654
> 
> 赞同：3
> 
> 时间：2012-05-21T18:33:05.920
> 
> 标签：python, conditional, indentation

当我编写如下代码时，我得到了深深的缩进

```
match = re.search(some_regex_1, s)
if match:
    # do something with match data
else:
    match = re.search(some_regex_2, s)
    if match:
        # do something with match data
    else:
        match = re.search(soem_regex_3, s)
        if match:
            # do something with match data
        else:
            # ...
            # and so on 
```

我试图重写为：

```
if match = re.search(some_regex_1, s):
    # ...
elif match = re.search(some_regex_2, s):
    # ...
elif ....
    # ...
... 
```

但 Python 不允许这种语法。在这种情况下，我应该怎么做才能避免深度压痕？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T18:38:06.740

```
regexes = (regex1, regex2, regex3)
for regex in regexes:
    match = re.search(regex, s)
    if match:
        #do stuff
        break 
```

或者（更高级）：

```
def process1(match_obj):
    #handle match 1

def process2(match_obj):
    #handle match 2

def process3(match_obj):
    #handle match 3
.
.
.
handler_map = ((regex1, process1), (regex2, process2), (regex3, process3))
for regex, handler in handler_map:
    match = re.search(regex, s)
    if match:
        result = handler(match)
        break
else:
    #else condition if no regex matches 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:15:50.220

如果您可以使用`finditer()`而不是`search()`（大多数时候可以），您可以将所有正则表达式合并为一个并使用符号组名称。这是一个例子：

```
import re

regex = """
   (?P<number> \d+ ) |
   (?P<word> \w+ ) |
   (?P<punctuation> \. | \! | \? | \, | \; | \: ) |
   (?P<whitespace> \s+ ) |
   (?P<eof> $ ) |
   (?P<error> \S )
"""

scan = re.compile(pattern=regex, flags=re.VERBOSE).finditer

for match in scan('Hi, my name is Joe. I am 1 programmer.'):
    token_type = match.lastgroup
    if token_type == 'number':
        print 'found number "%s"' % match.group()
    elif token_type == 'word':
        print 'found word "%s"' % match.group()
    elif token_type == 'punctuation':
        print 'found punctuation character "%s"' % match.group()
    elif token_type == 'whitespace':
        print 'found whitespace'
    elif token_type == 'eof':
        print 'done parsing'
        break
    else:
        raise ValueError('String kaputt!') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:40:38.867

```
if re.search(some_regex_1, s) is not None:
    # ...
elif re.search(some_regex_2, s) is not None:
    # ...
elif ....
    # ...
... 
```

如果没有找到匹配项，search() 将返回 None，因此在您的 if 语句中它将继续进行下一个测试。

# javascript - 删除动态添加的表单域

> ID：10690655
> 
> 赞同：0
> 
> 时间：2012-05-21T18:33:06.583
> 
> 标签：javascript

好的，我在这里没有想法。我有一些显然是不久前由某人编写的 JavaScript。简而言之，有一个按钮调用了一个JS函数。该功能是删除之前添加的表单字段。它适用于 IE 8 和更早版本，但不适用于 IE9 或 FireFox。功能是：

```
function remove(salNum) {

    var fld
    fld = document.getElementById('salary' + salNum);
    fld.value = 0;

    document.forms[0].submit();

} 
```

FireBug 控制台中的输出给出了错误：

```
fld is null
fld.value = 0; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:58:43.347

如果您尝试删除的元素已被删除或 html 已被更改，请尝试此操作：

```
function remove(salNum) {

    var fld
    fld = document.getElementById('salary' + salNum);

// check for element existance
if( fld ) fld.value = 0;

    document.forms[0].submit();

} 
```

# android - 我可以将我的 .apk 导出到我的手机进行测试吗？

> ID：10690658
> 
> 赞同：1
> 
> 时间：2012-05-21T18:33:27.963
> 
> 标签：android

> **可能重复：**
> [如何在 android 手机上安装 apk 文件？](https://stackoverflow.com/questions/4756451/how-to-install-apk-file-on-android-phone)

我在 Eclipse 上完成了应用程序，并在 AVD 上对其进行了测试，现在我想将其导出到我的手机中，只是为了测试而不是为了市场，我该怎么做，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:37:16.990

Other suggestion:

Connect your phone to your computer. Run your project and eclipse will deploy it to your phone.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:36:40.320

Look in the bin directory inside your project folders. You can move it to your phone via dropbox or other means. I do it all the time.

You don't need to do the export wizard to just test. As long as you have the "allow unknown" checked in settings. Once the project has been built and run in the emulator there should be an apk file.

I used dropbox as my source control so my entire project is on dropbox which makes it very easy to test on phone. As long as you have dropbox installed on your phone you just navigate to the bin directory on your phone and download the apk from there.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:43:50.470

1.  connect your phone via USB
2.  open a shell and move to the platform-tools folder
3.  sudo ./adb kill-server
4.  sudo ./adb start-server
5.  run your application in Eclipse and go choose your device

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T18:35:58.267

There is an Export wizard, look in your AndroidManifest.xml file, from there you can create your apk, and then install it easily on your device.

Just place your APK file on your device.

# android - 导入 com.google.maps.MapView 不起作用

> ID：10690662
> 
> 赞同：1
> 
> 时间：2012-05-21T18:33:50.437
> 
> 标签：android

尝试做一个地图示例，我在这里找到 [http://codemagician.wordpress.com/2010/05/06/android-google-mapview-tutorial-done-right/](http://codemagician.wordpress.com/2010/05/06/android-google-mapview-tutorial-done-right/)

问题是这段代码。具体来说，编译器似乎不知道 MapView 是什么？其实也适用于android.graphics.drawable.Drawable。我认为 import 语句可以解决这个问题，但必须缺少其他一些设置步骤。

任何帮助表示赞赏。

```
package com.example.HelloGoogleMaps2;
import java.util.List;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class MainMap extends MapActivity
{
 @Override
 public void onCreate(Bundle savedInstanceState)
 {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     **MapView** mapView = (MapView) findViewById(R.id.mapview);
     mapView.setBuiltInZoomControls(true);

     List<Overlay> mapOverlays = mapView.getOverlays();
     **Drawable** drawable = this.getResources().getDrawable(R.drawable.icon);
     HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
     GeoPoint point = new GeoPoint(30443769,-91158458);
     OverlayItem overlayitem = new OverlayItem(point, "Laissez les bon temps rouler!", "I'm in Louisiana!");

     GeoPoint point2 = new GeoPoint(17385812,78480667);
     OverlayItem overlayitem2 = new OverlayItem(point2, "Namashkaar!", "I'm in Hyderabad, India!");

     itemizedoverlay.addOverlay(overlayitem);
     itemizedoverlay.addOverlay(overlayitem2);

     mapOverlays.add(itemizedoverlay);
 }
 @Override
 protected boolean isRouteDisplayed()
 {
 return false;
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:40:10.777

创建新项目时检查您的目标设备。它应该是`Google APIs(Google Inc.)-API Level -`（无论你想要什么）。

正如文档所说：“您必须`AVD`配置使用`Google APIs`目标，或者使用包含`Maps library`“的开发设备。并确保您具有 Internet 权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

并且由于 MapView 不包含在默认的 Android 库中，因此您需要在 AndroidManifest.xml 中指定

```
<uses-library android:name="com.google.android.maps" /> 
```

[这](http://developer.android.com/resources/tutorials/views/hello-mapview.html)是从谷歌地图开始的好地方

你确定你有![选择谷歌API](../Images/e06798855908675115255bb02ee8ad9b.png)

# iphone - HTML textarea covered with Traslucent Black Navigation bar

> ID：10690663
> 
> 赞同：2
> 
> 时间：2012-05-21T18:33:51.130
> 
> 标签：iphone, ios

I have Navigation View controller that contains web view. The top bar of Navigation View is "Traslucent Black Navigation bar"

The web view display html that conatins "textarea" html element. I notice when user try type on the textarea, upper part of "textarea" get covred by the "Traslucent Black Navigation bar".

Is there a way to fix this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:40:04.713

您需要将 UIWebView 的框架向下调整 44 个点（UINavigationBar 的标准高度）

webView.frame = CGRectMake (webView.frame.origin.x, (webView.frame.origin.y + 44), webView.frame.size.width, webView.frame.size.height);

# actionscript-3 - What is the best way to create a slide effect on a canvas?

> ID：10690664
> 
> 赞同：0
> 
> 时间：2012-05-21T18:33:56.263
> 
> 标签：actionscript-3, apache-flex, flex3, mxml

I need to create a slide left and slide right effect. This will be used on a panel when it is added to stage.

Also, the canvas I want to use the effect on has its height determined by the "top" and "bottom" properties, I heard this may cause issues when applying such an effect.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:56:10.443

您可能想查看名为 TweenMax 的东西：http: [//www.greensock.com/tweenmax/](http://www.greensock.com/tweenmax/) 它极大地简化了许多事物的动画，并且它有很多您期望的选项，例如缓入/缓出、onTween 事件/回调，完成回调等。

我不是 100% 确定你想要做什么，但理论上你会想要从屏幕上开始你的画布，然后做这样的事情：

```
TweenMax.to(theCanvas, 1.0, {x:0}); 
```

这行代码将告诉 TweenMax（通过静态函数“to”）开始一个补间（动画）。动画的目标是theCanvas，动画的持续时间是1.0秒，被动画的属性是x。在这种情况下，.x 从它当前的“到”0 开始动画。如果你写：

```
TweenMax.to(theCanvas, 1.0, {x:100}); 
```

然后画布将从当前位置动画到 .x = 100。请注意，如果您为“值”指定字符串

```
TweenMax.to(theCanvas, 1.0, {x:"100"}); 
```

这被视为增量 - 所以画布不会在 x = 100 处结束，而是在 x = originalX + 100 处结束。

就画布的高度而言，应该可以使用顶部和底部样式设置来限制高度，但我不能 100% 确定这一点……但是你会想要明确定义画布的宽度，因为您需要明确（绝对）定义 x 位置。

**编辑**

这是一个例子，我认为它涵盖了基础知识。请注意，滑块画布的高度由顶部和底部定义，没有问题。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas 
    width="500" height="500"
    xmlns:mx="http://www.adobe.com/2006/mxml"
>
<mx:Script>
    <![CDATA[
        import com.greensock.TweenMax;

        private function slideIn():void
        {
            TweenMax.to(theSlider, 1.0, {x:50});
        }

        private function slideOut():void
        {
            TweenMax.to(theSlider, 1.0, {x:300});
        }

    ]]>
</mx:Script>

<mx:Button label="Slide In" click="{slideIn()}"/>
<mx:Button x="80" label="Slide Out" click="{slideOut()}"/>

<mx:Canvas id="theWindow" 
    width="300" height="300"
    verticalCenter="0" horizontalCenter="0"
    borderColor="red" borderThickness="1" borderStyle="solid"
    verticalScrollPolicy="off" horizontalScrollPolicy="off"
>

    <mx:Canvas id="theSlider" 
        width="200"
        x="-200"
        top="10" bottom="10"
        backgroundColor="green" backgroundAlpha="1.0"
        verticalScrollPolicy="off" horizontalScrollPolicy="off"
    />

</mx:Canvas>

</mx:Canvas> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T23:09:37.910

这是我不久前做的一些你可以开始的东西，这是将它移到 4 的 Flex3 版本“滑动画布”。查看源在导出的右键菜单中启用：http: [//www.shaunhusain.com/ImageSlider/](http://www.shaunhusain.com/ImageSlider/)（不要被它的名称混淆，它允许您向其中添加任何 UIComponent 我刚开始使用图像） . 我没有立即意识到通过 top 和 bottom 属性定义其大小的任何问题，但如果您遇到问题将这些问题发布为问题，则可能需要进行调整。

# .net - .net 上的 RC4 用于在 Ruby 中解密

> ID：10690665
> 
> 赞同：0
> 
> 时间：2012-05-21T18:33:56.963
> 
> 标签：.net, ruby, rc4-cipher

我需要使用已知的文本密钥在 .net 应用程序中加密文本字符串，然后使用相同的已知密钥在 Ruby 中对其进行解密......但是我无法做到这一点。我认为这与字符串编码问题有关。.Net 到 Ruby RC4 示例已被证明是难以捉摸的。

我在 Ruby 端接收到无效解密。加密/解密在 .net 实现上运行良好。但是当我将加密的值复制到 Ruby 实现并使用相同的密钥时，我没有得到我的原始值。

下面是我的 .net RC4 实现（这不需要最高级别的安全性，但有些很好）:)

在红宝石方面，我正在使用 ruby​​-rc4 [https://github.com/caiges/Ruby-RC4](https://github.com/caiges/Ruby-RC4)

```
 public string keytext = "thisismykey";
    public Form1()
    {
        InitializeComponent();
    }
    public void RC4(ref Byte[] bytes, Byte[] key)
    {

        Byte[] s = new Byte[256];
        Byte[] k = new Byte[256];
        Byte temp;
        int i, j;

        for (i = 0; i < 256; i++)
        {
            s[i] = (Byte)i;
            k[i] = key[i % key.GetLength(0)];
        }

        j = 0;
        for (i = 0; i < 256; i++)
        {
            j = (j + s[i] + k[i]) % 256;
            temp = s[i];
            s[i] = s[j];
            s[j] = temp;
        }

        i = j = 0;
        for (int x = 0; x < bytes.GetLength(0); x++)
        {
            i = (i + 1) % 256;
            j = (j + s[i]) % 256;
            temp = s[i];
            s[i] = s[j];
            s[j] = temp;
            int t = (s[i] + s[j]) % 256;
            bytes[x] ^= s[t];
        }
    }
    static byte[] GetBytes(string str)
    {
        Byte[] bytes = new byte[str.Length * sizeof(char)];
        System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
        return bytes;
    }
    static string GetString(byte[] bytes)
    {
        char[] chars = new char[bytes.Length / sizeof(char)];
        System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
        return new string(chars);
    }
    private void button1_Click(object sender, EventArgs e)
    {
        Byte[] content = Encoding.ASCII.GetBytes(textBox1.Text);
        RC4(ref content, Encoding.ASCII.GetBytes(keytext));
        textBox2.Text = Encoding.ASCII.GetString(content);
        RC4(ref content, Encoding.ASCII.GetBytes(keytext));
        label1.Text = Encoding.ASCII.GetString(content);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:31:00.437

出现此问题的原因可能是 ASCII 编码是 7 位，并且无法为大于 127 的值重新创建字符。尝试使用 UTF-8 编码或将字节数组转换为 Base64 字符串。

# c# - 反序列化一个安静的 uri

> ID：10690668
> 
> 赞同：0
> 
> 时间：2012-05-21T18:34:17.963
> 
> 标签：c#, rest, serialization, service

我正在尝试反序列化位于[http://ws.geonames.org/countryInfo?lang=it&country=DE](http://ws.geonames.org/countryInfo?lang=it&country=DE)的 rest uri并不断出错（XML 文档 (1, 1) 中有错误）。将[http://ws.geonames.org/countryInfo?lang=it&country=DE](http://ws.geonames.org/countryInfo?lang=it&country=DE)插入浏览器，您可以看到结果。

我有一堂课

```
public class Country
{
    public string CountryName {get;set;}
    public string CountryCode {get;set;}
} 
```

我的控制台应用程序中的方法如下：

```
 static void DeserializeTheXML()
    {

        XmlRootAttribute xRoot = new XmlRootAttribute();
        xRoot.ElementName = "countryName";
        xRoot.IsNullable = true;

        XmlSerializer ser = new XmlSerializer(typeof(Country), xRoot);
        XmlReader xRdr = XmlReader.Create(new StringReader("http://ws.geonames.org/countryInfo?lang=it&country=DE"));
        Country tvd = new Country();
        tvd = (Country)ser.Deserialize(xRdr);

        Console.WriteLine("Country Name = " + tvd.CountryName);
        Console.ReadKey();

    } 
```

关于如何反序列化这个休息服务的任何想法？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:54:20.873

要使序列化成功工作，您需要使用适当的序列化属性装饰您的对象或使用 XmlAttributeOverrides 构造函数。另外不要忘记 XML 区分大小写，并且您的对象必须反映您正在反序列化的 XML 结构：

```
public class GeoNames
{
    [XmlElement("country")]
    public Country[] Countries { get; set; }
}

public class Country
{
    [XmlElement("countryName")]
    public string CountryName { get; set; }

    [XmlElement("countryCode")]
    public string CountryCode { get; set; }
} 

class Program
{
    static void Main()
    {
        var url = "http://ws.geonames.org/countryInfo?lang=it&country=DE";
        var serializer = new XmlSerializer(typeof(GeoNames), new XmlRootAttribute("geonames"));
        using (var client = new WebClient())
        using (var stream = client.OpenRead(url))
        {
            var geoNames = (GeoNames)serializer.Deserialize(stream);
            foreach (var country in geoNames.Countries)
            {
                Console.WriteLine(
                    "code: {0}, name: {1}", 
                    country.CountryCode, 
                    country.CountryName
                );
            }
        }
    }
} 
```

# .net - 从现有的 .NET 用户名/密码配置 CAS

> ID：10690670
> 
> 赞同：0
> 
> 时间：2012-05-21T18:34:33.750
> 
> 标签：.net, hash, forms-authentication, cas

目前，我们的网站使用 .NET Forms 身份验证和存储在 SQL Server 2005 数据库中的加盐 SHA1 密码哈希。我们想改用[CAS 服务器](https://wiki.jasig.org/display/CAS/Home)进行身份验证，但我们不想丢失现有的用户名/密码。

我想我有两个选择...我可以使用 QueryDatabaseAuthenticationHandler 并在 T-SQL 中重新创建散列，或者如果我可以复制 .NET Forms 身份验证使用的确切设置，我可以使用 DefaultPasswordEncoder。[两者都记录在这里。](https://wiki.jasig.org/display/CASUM/JDBC)

**有没有人尝试将 CAS 配置为读取 .NET 密码哈希？** 如果是这样，您是否有使用上述方法之一（或我没有想到的第三种方法）的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:42:28.907

不幸的是，我没有准备好示例，但我确信人们已经通过利用您指出的两个类中的功能来做到这一点。

如果您正在寻找有关如何完成此操作的其他信息和示例，请在@cas-user 邮件列表中发布消息。

# php - 函数的 PDO 错误

> ID：10690673
> 
> 赞同：0
> 
> 时间：2012-05-21T18:34:45.200
> 
> 标签：php, mysql, pdo

您好，我第一次使用 PDO 并出现错误……不，我错在哪里，这是我的代码

```
function student_one_image($student_id){
    $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $STH = $DBH->query("SELECT * from school_students, school_student_one_image where (school_student_one_image.student_id = school_students.student_id) 
    and school_student_one_image.student_id = '$student_id'");
    $STH->setFetchMode(PDO::FETCH_ASSOC);
    $row = $STH->fetch();
    return $row 
```

错误是 Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock

如果我正在尝试使用 mysql 它可以工作

```
function student_one_image($student_id){
    $data= mysql_query("SELECT * from school_students, school_student_one_image where (school_student_one_image.student_id = school_students.student_id) 
    and school_student_one_image.student_id = '$student_id'");
    $result = mysql_fetch_array($data);
    return $result; 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:37:40.857

您的变量`$host`、`$dbname`和超出范围 [1] 因为您在函数中使用它们。您可以像这样传递它们：`$user``$pass`

```
function student_one_image($student_id, $host, $dbname, $user, $pass) { 
```

或者通过将以下行添加到函数顶部来更改它们的范围：

```
global $host, $dbname, $user, $pass; 
```

[1] [http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# c - Pointer set in function returning as correct type

> ID：10690674
> 
> 赞同：1
> 
> 时间：2012-05-21T18:34:52.263
> 
> 标签：c

Let say I have a function where two of the parameters are global arrays. Code would look something like this:

```
/*global variable*/
int    Input_Messages          [Num_Messages ][Num_Elements];

static void Set_Conditions()
{
     PACK(250.0, (unsigned short*)&Input_Messages[0][15], (unsigned short*)&Input_Messages[0][16], 18, 19, -1, 1.0);
}

void PACK(float value, unsigned short *Hi, unsigned short *Lo, long bit, long word, long lsb, float scale)
{
     unsigned long Value32;
     .
     .
     .
     /*last bit of code where *Hi and *Lo are set*/
     *Lo = (unsigned short)(Value32);
     *Hi = ((unsigned short)(((Value32) >> 16) & 0xFFFF));
} 
```

The problem I am facing is as follows:

After `PACK()` is completed, it returns the values of `*Lo` and `*Hi` to the `Input_Messages[0][15]` and `[0][16]` respectively. The issue I am having on a big endian machine is that after all this is complete, if you look at those values for Input_Messages, they have been converted to a long, whereas I need a short. An example is if at the end of `PACK()`, `*Lo` is set to `62 (003E)`, when it returns back into `Set_Conditions()`, if you look at the `Input_Messages[0][16]`, instead of `62`, it would be `4063232 (003E0000)`.

I managed to fix this by changing the `global Input_Messages[][]` from `int`, to `unsigned short`, but in doing that, a lot of other changes are needed in function calls, etc. I guess I am trying to see if there is an easier way to set it so it returns as a short, and stays a short. Some sort of casting or something.

Let me know if more explanation is needed. I tried to explain it best as I could, and post relevant code, but I will answer any questions I can.

# excel - Using For loop to select data from excel_vba syntax

> ID：10690679
> 
> 赞同：0
> 
> 时间：2012-05-21T18:35:22.877
> 
> 标签：excel, vba

I am trying to use vba to do some data mining. I have excel spreadsheet and writing a code to select data from a row. Each column has separate variables but the row represents all the variables for that particular set.

I want to write a for loop for selecting a cell and assigning the value of that cell to a particular variable.

For counter = 7 To 57

Ca = Worksheets("sheet1").Cells(g, counter)

What would be correct syntax to assign value of say cell g7 to variable Ca?

Thank you, AJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:39:26.860

> 将say cell g7的值分配给变量Ca的正确语法是什么？

```
Ca = Worksheets("sheet1").Cells(7, 7)

Syntax : .Cells(Row,Column) 
```

同样`G8`会是`Cells(8,7)`

或者

```
Ca = Worksheets("sheet1").Range("G" & counter)

Where counter is 7 
```

* * *

**将此应用于您的代码**

你可以写你的代码

```
For counter = 7 To 57

Ca = Worksheets("sheet1").Cells(g, counter) 
```

作为

```
For counter = 7 To 57
    Ca = Worksheets("sheet1").Cells(counter,7) 
```

或者

```
For counter = 7 To 57
    Ca = Worksheets("sheet1").Range("G" & counter) 
```

# validation - 如何根据 Symfony2 中表单本身的某些字段仅验证某些验证组

> ID：10690680
> 
> 赞同：4
> 
> 时间：2012-05-21T18:35:30.773
> 
> 标签：validation, symfony

我在一些验证组中组织了一个大表格。对于表单中的每个组，都有一个相应的复选框，告诉服务器保存组数据。

当用户发布表单时，我只需要验证与选中复选框相对应的验证组，因为它们的一些“子”字段是必需的，但前提是您激活了该组。否则验证器必须忽略必填字段。

实际上我在我的控制器中这样做。我跳过 Symfony 的正常验证周期并手动验证每个字段，检查组激活复选框。

如何在 Form 类或实体使用的特定 Constraint 类中移动此验证逻辑？

* * *

编辑：

如下所述在 symfony 2.1 中是可能的，现在我解决了：

```
$request = $this->get('request');

// myEntity knows the business logic to chose validation groups
$myEntity->collectValidationGroups($request);

$form = $this->createForm(new MyEntityType(), $myEntity); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:23:48.847

如果您使用的是 Symfony 2.1，那么您可以根据提交的数据设置验证组。检查[此](http://symfony.com/doc/master/book/forms.html#groups-based-on-submitted-data)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T21:00:19.017

除了 2.1 提供的可能性之外，还有另一种可能性。您可以使用以下`validation_groups`方式在表单上设置属性`$builder->getData()`：

```
// inside buildForm method of a form type:
$builder->setAttribute('validation_groups', $builder->getData()->getValidationGroups()); 
```

# mysql - error 1064 in trigger mysql

> ID：10690684
> 
> 赞同：-1
> 
> 时间：2012-05-21T18:35:49.877
> 
> 标签：mysql

This is my first time using mysql and I am tying to learn how to use trigger.

Im using navicat, i go to table design and then go triggers tab. I create a trigger named testing and in definition I typed:

```
delimiter |
  CREATE TRIGGER lpr.mytesting AFTER INSERT ON lpr.lpr_opt_upload 
    FOR EACH ROW BEGIN
      set new.lpr_text := reverse(new.lpr_text);
    END;
| delimiter ; 
```

All im tying to do is whenever something new is inserted, I reverse the text in lpr_text field. However, i get "1064 - you have an error in your SQL; check the manual that corresponds o your MySql server version for the right syntax to yse 'ON lpr_opt_upload' FOR EACH ROW create trigger testing before insert on lpr_op' at line 1." I dont understand what Im doing wrong, I am just copying an trigger example.

//-------------------------------------------------------------------------//

I figured out the problem. I am using navicat and in navicat trigger tab, you only type the body into the definition, Not the header (ex: CREATE TRIGGER lpr.mytesting AFTER INSERT ON lpr.lpr_opt_upload). There are check box next to the name of your trigger and you use those instead of writing your own header.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:17:10.707

该`DELIMITER`命令是一个客户端命令，并非所有客户端都支持（它根本不会发送到服务器，它只是指示客户端如何区分语句以便将它们正确发送到服务器）。MySQL 手册中对它的引用假定您使用的是“官方”MySQL 客户端，例如`mysql`命令行工具或 MySQL Workbench（两者都支持该`DELIMITER`命令）。

我不知道如何更改 Navicat 中的语句分隔符，但这是您问题的根源。

# image - 跨域资源共享标头不仅适用于 safari

> ID：10690686
> 
> 赞同：5
> 
> 时间：2012-05-21T18:35:53.930
> 
> 标签：image, html, canvas, safari, cors

我正在使用 rackspace 来托管在 html5 画布对象上绘制的图像文件。由于保存画布时的 HTML 安全功能，我必须使用 CORS（跨源资源标头）来进行保存工作。

我已经在**Chrome、带有 Chrome Frame 的 IE 和 Firefox**上测试了我的代码，在我添加到图像请求标头后，它们都没有给我一个安全错误：

```
Access-Control-Allow-Origin: * 
```

我已将以下属性添加到画布上的所有图像

```
crossOrigin = "anonymous" 
```

但是，出于某种原因，Safari 仍然会出现安全错误。

```
SECURITY_ERR: DOM Exception 18: An attempt was made to break through the security policy of the user agent. 
```

关于为什么在 safari（桌面 5.1.7 和 ipad）版本上发生这种情况的任何想法？我检查了文档，我读到的所有内容都说 Safari 4+ 支持 CORS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:44:33.480

Safari 5.2 beta 解决了这个问题。所以看起来 Safari 尚不支持已发布版本中的图像的 cors。iOS Safari 也是如此

# asp.net - Multiplayer without a server on IOS

> ID：10690688
> 
> 赞同：0
> 
> 时间：2012-05-21T18:36:02.823
> 
> 标签：asp.net, ios, web-services, ios5, multiplayer

So I am writing an app for the IOS family. The app needs to find 2 people whom are "looking for an opponent". And save their information so they can communicate later. Is there an APi or framework made for this type of looking, hosted on some universal server doing this for me? Or must I host a server and make a list of people and pair them up myself with some type of webservice? Also If you have a better idea at how to do this please let me know. I am new to the multipler IOS scene so I could be going about this the wrong way.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:41:20.283

您可以使用 IOS 5 [Game Center API](https://developer.apple.com/devcenter/ios/gamecenter/)来帮助匹配运行 IOS 5 及更高版本的玩家。

根据[这个回复](https://stackoverflow.com/a/3479031/141172)，它也可以在 IOS 4.1 中使用，但我无法确认。

# javascript - JavaScript Scope: timer referencing arbitrary new object

> ID：10690694
> 
> 赞同：0
> 
> 时间：2012-05-21T18:36:27.867
> 
> 标签：javascript, scope

Here is the code for what I am basically trying to do:

```
document.body.addEventListener("keypress", f1, false);

function f1(e){
    var span = document.createElement("span");
    window.setInterval(function(){
        ...
            window.clearInterval(this);
            document.body.removeChild(span);
} 
```

So in short, I'm trying to make a new DOM element, and then attach a timer to it that will be able to reference that particular object. The problem is, I don't know how to do the context, so `this` just references `window`, and JavaScript throws an error when I try to reference `span` (which I wasn't expecting to work anyway). How can I set the context of the interval to the DOM element I created in that function?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T18:39:50.207

`setInterval`返回一个整数，它是计时器的 id。因此，您所要做的就是存储它：

```
var interval = setInterval(function(){
// ...
    clearInterval(interval); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T18:38:56.690

为您的区间保留一个变量：

```
document.body.addEventListener("keypress", f1, false);

function f1(e){
    var span = document.createElement("span");
    var myInterval = setInterval(function(){
        ...
            clearInterval(myInterval);
            document.body.removeChild(span);
} 
```

# java - Android regular expression to get links of webpage source

> ID：10690695
> 
> 赞同：4
> 
> 时间：2012-05-21T18:36:35.147
> 
> 标签：java, android, html, regex, href

I am looking for a RegEx to match links from a webpage source. If you have any code samples it would be appriciated.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:46:08.097

要匹配`href`属性值，您可以使用以下方法：

```
final Pattern pattern = Pattern.compile("href=\"(.*+)\"");
Matcher matcher = pattern.matcher(html);
String link = null;
while (matcher.find())
{
    link = matcher.group(1);
    Log.i("my.regex", "Found link: " + link);
} 
```

# .net - Visual Studio 2010 EDMX Designer 是否与 DevArt dotConnect 一起使用？

> ID：10690698
> 
> 赞同：0
> 
> 时间：2012-05-21T18:36:43.453
> 
> 标签：.net, oracle, entity-framework, edmx, dotconnect

我正在尝试切换模型以使用 DevArt dotConnect 驱动程序。它实际上以前有效，但在我重新生成模型后，它似乎恢复为默认的 .NET Oracle 驱动程序。

我所做的是`.edmx`在记事本中打开文件并更改：

```
<Schema Provider="Oracle.DataAccess.Client" ProviderManifestToken="11.2" ...> 
```

到：

```
<Schema Provider="Devart.Data.Oracle" ProviderManifestToken="Ora11g" ...> 
```

但是，当我尝试从数据库中更新模型时，我收到了数百个类似于以下内容的错误：

> 错误 18 错误 40：类型号未使用命名空间或别名进行限定。只有 PrimitiveTypes 可以在没有限定的情况下使用。

这些发生在以下行上：

```
<Property Name="ROLEID" Type="number" Nullable="false" /> 
```

我相信 dotConnect 驱动程序希望我使用 .NET 原语`Decimal`而不是 Oracle 类型`number`。但是，修复这些错误需要我更改数百行，而且下次我更新模型时它就会被清除。

**我的问题：**

内置的VS2010设计器能否与DevArt dotConnect Oracle驱动一起工作？或者是生成正确语法以使用 DevArt 设计器的唯一方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T22:32:50.133

我很确定我解决了这个问题。

该模型被映射到使用`Oracle.DataAccess.Client`ADO.NET 驱动程序而不是 dotConnect 驱动程序的数据源。

我找不到为模型更改底层数据库驱动程序的好方法，因此我删除了数据源并创建了一个具有相同名称的新数据源。这似乎解决了问题，现在数据类型在 EDMX 文件中正确显示。

我现在有很多其他问题，但我相信这与这个问题无关。

# objective-c - NSString constrainedToSize 方法？

> ID：10690701
> 
> 赞同：3
> 
> 时间：2012-05-21T18:37:05.573
> 
> 标签：objective-c, ios, algorithm, cocoa, core-text

不要与`NSString sizeWithFont`返回 a 的方法混淆`CGSize`，我正在寻找的是一个返回 a`NSString`约束到某个的方法`CGSize`。我想这样做的原因是，当用 绘制文本时`Core Text`，我可以在字符串的末尾附加一个省略号 (...)。我知道`NSString's drawInRect`方法为我做这个，但我正在使用`Core Text`, 并`kCTLineBreakByTruncatingTail`截断*每行*的结尾而不是字符串的结尾。

[我发现](http://mobiledevelopertips.com/cocoa/truncate-an-nsstring-and-append-an-ellipsis-respecting-the-font-size.html)有一种方法可以将字符串截断到一定的*宽度*，并且更改它以使其适用于 a 并不难`CGSize`，但是该算法对于长字符串来说速度慢得令人难以置信，并且实际上无法使用。（截断一个长字符串需要 10 多秒）。必须有一种更“计算机科学”/数学算法的方法来更快地做到这一点。有人敢于尝试提出更快的实现吗？

**编辑：**我已经设法把它变成了一个二进制算法：

```
-(NSString*)getStringByTruncatingToSize:(CGSize)size string:(NSString*)string withFont:(UIFont*)font
{
    int min = 0, max = string.length, mid;
    while (min < max) {
        mid = (min+max)/2;

        NSString *currentString = [string substringWithRange:NSMakeRange(min, mid - min)];
        CGSize currentSize = [currentString sizeWithFont:font constrainedToSize:CGSizeMake(size.width, MAXFLOAT)];

        if (currentSize.height < size.height){
            min = mid + 1;
        } else if (currentSize.height > size.height) {
            max = mid - 1;
        } else {
            break;
        }
    }

   NSMutableString *finalString = [[string substringWithRange:NSMakeRange(0, min)] mutableCopy];
   if(finalString.length < self.length)
         [finalString replaceCharactersInRange:NSMakeRange(finalString.length - 3, 3) withString:@"..."];

   return finalString;
} 
```

问题是，当它有空闲空间时，这有时会将字符串剪得太短。我认为这是最后一个条件发挥作用的地方。我如何确保它不会切断*太多*？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T19:02:16.060

好消息！有一种“计算机科学/数学方法”可以更快地做到这一点。

[您链接到](http://mobiledevelopertips.com/cocoa/truncate-an-nsstring-and-append-an-ellipsis-respecting-the-font-size.html)的示例进行线性搜索：它只是从字符串末尾一次切掉一个字符，直到它足够短。因此，它所花费的时间将与字符串的长度成线性比例，而对于长字符串，它会非常慢，正如您所发现的那样。

但是，您可以轻松地将**二进制搜索**技术应用于字符串。与其从末尾开始，一次丢掉一个字符，不如从中间开始：

```
THIS IS THE STRING THAT YOU WANT TO TRUNCATE
                       ^ 
```

您计算“这是那个字符串”的宽度。如果它太宽，则将测试点移动到左侧空间的中点。像这样：

```
THIS IS THE STRING THAT YOU WANT TO TRUNCATE
          ^            | 
```

另一方面，如果它不够宽，则将测试点移动到另一半的中点：

```
THIS IS THE STRING THAT YOU WANT TO TRUNCATE
                       |         ^ 
```

重复此操作，直到找到刚好低于宽度限制的点。因为您每次都将搜索区域分成两半，所以您永远不需要计算超过 log2 N 次的宽度（其中 N 是字符串的长度），即使对于非常长的字符串，它也不会增长得很快.

换句话说，如果将输入字符串的长度加倍，那只是一个额外的宽度计算。

从[Wikipedia 的二分搜索示例](http://en.wikipedia.org/wiki/Binary_search_algorithm#Iterative)开始，这里有一个示例。请注意，由于我们不是在寻找精确匹配（您想要最大的匹配），因此逻辑略有不同。

```
int binary_search(NSString *A, float max_width, int imin, int imax)
{
  // continue searching while [imin,imax] is not empty
  while (imax >= imin)
    {
      /* calculate the midpoint for roughly equal partition */
      int imid = (imin + imax) / 2;

      // determine which subarray to search
      float width = ComputeWidthOfString([A substringToIndex:imid]);
      if      (width < max_width)
        // change min index to search upper subarray
        imin = imid + 1;
      else if (width > max_width )
        // change max index to search lower subarray
        imax = imid - 1;
      else
        // exact match found at index imid
        return imid;
  }
  // Normally, this is the "not found" case, but we're just looking for
  // the best fit, so we return something here.
  return imin;
} 
```

你需要做一些数学或测试来找出底部的正确索引，但它肯定是`imin`or `imax`，加或减一。

# jquery - jQuery 定位在 div 内

> ID：10690705
> 
> 赞同：0
> 
> 时间：2012-05-21T18:37:11.893
> 
> 标签：jquery

我有一个表单，我想在选择一个选项时显示一个输入框。

**问题：**我允许用户动态添加更多表单元素，所以 id 计数，我不确定如何定位当前表单输入，而不是每一个。

**例如，在用户添加第二个表单项后，我有类似的东西：**

```
<div class="option-wrapper">
    <div id="condition-1" class="condition">
      <select id="option-1" class="option">
          <option value="0">Select...</option>
          <option value="1">Option One</option>
          <option value="2">Option Two</option>
      </select>
      <select id="operator-1" class="operator">
          <option value="0">Select...</option>
          <option value="1">greater than</option>
          <option value="2">less than</option>
      </select>
      <div id="input-1" class="form-input" style="display:none;">
          <input id="form-input-1" class="form-input"></input>
      </div>
    </div>
</div>

<div class="option-wrapper">
    <div id="condition-2" class="condition">
      <select id="option-1" class="option">
          <option value="0">Select...</option>
          <option value="1">Option One</option>
          <option value="2">Option Two</option>
      </select>
      <select id="operator-2" class="operator">
          <option value="0">Select...</option>
          <option value="1">greater than</option>
          <option value="2">less than</option>
      </select>
      <div id="input-2" class="form-input" style="display:none;">
          <input id="form-input-2" class="form-input"></input>
      </div>
    </div>
</div> 
```

**尝试**通过使用表单输入来定位 #input-2 以显示它。只想在用户当前正在使用的包装器内为当前选项包装器显示它。

**目前正在尝试：**

```
$('.operator').change(function() {
switch (this.value) {
    case '0':
        break;
    case '1':
        $(this).parents('.form-input').toggle();
        break;
}
}); 
```

我知道这种对父母的使用是错误的，我尝试了很多变体，但都无法达到我想要的那个。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:39:51.270

 ~~那这个呢：？

```
$('.operator').change(function() {
    if (this.value === 1) 
            $('.form-input:last').toggle();
}); 
```

 ~~或者，如果你错了，你可能想要这个：

```
$('.operator').change(function() {
    if (this.value === 1) 
            $(this).parent().find('.form-input').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:41:37.400

这个怎么样：

```
$(this).siblings(".form-input").toggle(); 
```

它使用 class 获取兄弟元素`.form-input`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-21T18:54:54.957

我猜当您选择 .form-input 时，您最终会得到至少 2 个元素：div 和输入。用一个做会显示吗？你能试试这个吗？

```
 $(this).parent().find('.form-input')[0].toggle(); 
```~~~~

# r - How would you translate this into data.table package language in R?

> ID：10690706
> 
> 赞同：5
> 
> 时间：2012-05-21T18:37:16.663
> 
> 标签：r, data.table

I'm trying to learn `data.table` package in `R`. I have a data table named `DT1` and a data frame `DF1`, and I'd like to subset some instances according to a logical condition (disjunction). This is my code for now:

```
DF1[DF1$c1==0 | DF1$c2==1,] #the data.frame way with the data.frame DF1
DT1[DT1$c1==0 | DT1$c2==1,] #the data.frame way with the data.table DT1 
```

On page 5 of ["Introduction to the data.table package in R"](http://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.pdf), the author gives an example of something similar but with a conjuction (replace `|` by `&` in the second line above) and remarks that's a bad use of `data.table` package. He suggests todo it this way instead:

```
setkey(DT1,c1,c2)
DT1[J(0,1)] 
```

So, my question is: How can I write the disjunction condition with the `data.table` package syntax? Is it a misuse my second line `DT1[DT1$c1==0 | DT1$c2==1,]`? Is there an equivalent to the `J` but for disjunction?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T20:11:13.297

该文件表明您可以使用：

```
DT1[c1==0 | c2==1, ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T07:47:18.020

这是另一个解决方案：

```
grpsize = ceiling(1e7/26^2)
DT <- data.table(
  x=rep(LETTERS,each=26*grpsize),
  y=rep(letters,each=grpsize),
  v=runif(grpsize*26^2))

setkey(DT, x)
system.time(DT1 <- DT[x=="A" | x=="Z"])
   user  system elapsed 
   0.68    0.05    0.74 
system.time(DT2 <- DT[J(c("A", "Z"))])
   user  system elapsed 
   0.08    0.00    0.07 
all.equal(DT1[, v], DT2[, v])
TRUE 
```

请注意，我从 data.table 文档中获取了示例。唯一的区别是我不再将字母转换为因子，因为现在允许使用字符键（请参阅v 1.8.0 的[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)）。

一个简短的解释：`J`只是`data.table`. 因此，如果您调用`J(0, 1)`创建`data.table`具有匹配的两列的 a，就像在示例中一样：

```
> J(0,1)
     V1 V2
[1,]  0  1 
```

但是，您希望在一列中匹配两个不同的元素。因此，您需要`data.table`一列。所以只需添加`c()`.

```
J(c(0,1))
     V1
[1,]  0
[2,]  1 
```

# java - Java 密码学扩展和无限强度

> ID：10690710
> 
> 赞同：1
> 
> 时间：2012-05-21T18:37:32.780
> 
> 标签：java, security, cryptography, aes

我是一个完全的密码学新手，正在寻找一个简单的（哈！）`AESEncryption`实用程序类，我可以使用它来读取/写入文件和带有 AES 密钥的字符串。就像是：

```
String toEcnrypt = "This is a secret message!";
AESEcnryption aes = new AESEncryption(); // 256-bit by default
String encrypted = aes.encrypt(toEncrypt);

// Do some stuff

String shouldBeSameAsFirstString = aes.decrypt(encrypted); 
```

这个想法是每次`AESEncryption`实例化 a时，`KeySpec`都会生成 a （并且可以由 API 返回以供后续存储）。这是我在检查了比我聪明*得多的*人的代码后编写的（所以如果你在这里看到你的代码，谢谢！）：

```
public class AESEncryption {

private SecretKeySpec keySpec;

public AESEncryption()
{
    super();
    setKeySpec(AES256Encryption.generateAES256KeySpec());
}

// Uses 256-bit encryption by default.
public static SecretKeySpec generateAES256KeySpec()
{
    // Stack variables
    byte[] byteArray = new byte[16];
    SecretKey oTmpKey = null;
    KeyGenerator oKeyGen;
    try
    {
        oKeyGen = KeyGenerator.getInstance("AES");
        oKeyGen.init(256);
        oTmpKey = oKeyGen.generateKey();
    }
    catch(Throwable oThrown)
    {
        throw new RuntimeException(oThrown);
    }

    byteArray = oTmpKey.getEncoded();

    return new SecretKeySpec(byteArray, "AES");
}

public String encrypt(final String p_strPlaintext)
{
    String strEncrypted = null;

    try
    {
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, keySpec);
        strEncrypted = Base64.encodeBase64String(cipher
            .doFinal(p_strPlaintext.getBytes()));
    }
    catch(Throwable oThrown)
    {
        System.out.println(oThrown.getMessage());
        throw new RuntimeException(oThrown);
    }

    return strEncrypted;
}

} 
```

对于 Base64 En/Decoding，我使用的是 Commons Codec - 为什么？因为就像我说的那样，我是一个加密新手，这是我能找到的唯一似乎可以完成工作的东西！

当我使用此代码时：

```
// This creates a unique key spec for this instance.
AESEncryption aes = new AESEncryption();

String toEncrypt = "blah";

// Throws a Throwable and prints the following to the console:
// "Illegal key size or default parameters"
String encrypted = aes.encrypt(toEncrypt); 
```

我在 SO 上看到了[这个](https://stackoverflow.com/questions/6481627/java-security-illegal-key-size-or-default-parameters)问题，提问者遇到了同样的问题，我发现我可能错过了 JCE。对JCE几乎一无所知，*以下*是我收集的内容：

*   JCE 是 AES 算法在 Java 平台上执行所必需的
*   JCE 以 ZIP 格式下载，但实际上只包含两个 JAR

我将这 2 个 JAR (`US_export_policy`和`local_policy`) 放在项目的构建路径 (Eclipse) 上并重新运行代码。又是同样的问题。我知道链接的文章引用了建议在 JRE 中包含这些 JAR 的安装说明，但在运行时，我的应用程序应该只关心在类路径中找到 JAR - 它不应该关心*在*类路径中找到它们的位置！

我可以从 Elcipse 内部做些什么来确保 JCE 可用于我的运行时类路径吗？或者我是否偏离了基础并且我的代码中有导致这些错误的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:41:33.263

我很确定这些 jar 在运行时类路径中毫无意义。它们*必须*安装在 jre 安装目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:55:29.727

您可以简单地使用 128 位 AES 密钥。它们在 99% 的时间里都足够安全。要么使用 256 位密钥，要么*按照自述文件中的说明*安装无限强度的加密文件。如果您可以简单地将它们放在类路径中，那么每个人都会简单地将内容复制到他们自己的库中并跳过整个保护。它们不包含可运行的代码，只包含资源。

# wcf - 在我已经有网站的 IIS 7 上托管 WCF 服务应用程序

> ID：10690714
> 
> 赞同：0
> 
> 时间：2012-05-21T18:37:41.830
> 
> 标签：wcf, iis-7

有人可以帮助我。

我刚刚在我的电脑上开发了一个 WCF 服务应用程序，当我在 localhost 上运行它时一切正常！

但是现在我想在我已经有一个网站的 IIS7 上托管这个项目。我想在这个网站上托管我的 WCF，因为我想使用相同的主机名和 IP 地址，这可能吗？？我不知道我是否可以在网站中添加应用程序或类似的东西。

如果这是可能的，我该怎么做？？？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:21:59.890

是的，您可以在您的 IIS 网站中托管您的应用程序，即使它上面安装了网站。您需要在该网站中创建一个新应用程序。

首先，您需要确保您的服务有一个`.svc`指向服务位置的文件，将您的`App.Config`（服务配置文件）的内容复制到一个新的`web.config`（在与您的 App.config 相同的物理目录中），并且删除`<host><baseAddresses>`新创建的部分，`web.config`将应用程序的物理路径指向您计算机上此服务的位置。一旦处理完毕，请务必编辑默认网站绑定以启用您的服务使用的特定绑定，例如，如果您的服务`netTcpBinding`随后转到：网站 -> '编辑绑定...' -> '添加.. .' 然后选择适用的协议并为其分配端口。然后在您的应用程序上转到“高级设置”并启用相应的协议，例如您的`netTcpBinding`服务通常具有`http,net.tcp`启用的协议。你已经准备好了。如果您遇到初期错误，请确保默认应用程序池（或您的网站正在使用的任何应用程序池）具有访问和读取服务所在计算机上的物理目录所需的权限。

# c# - 使用 LINQ 对 ListBox ListItems 进行排序？

> ID：10690720
> 
> 赞同：4
> 
> 时间：2012-05-21T18:38:07.447
> 
> 标签：c#, linq

我正在尝试对 ListBox 中的项目进行排序。但是，这样做后，项目值将设置为项目文本。任何帮助，将不胜感激。

```
lbxCustomers.DataSource = lbxCustomers.Items.Cast<ListItem>().Reverse().ToList();
lbxCustomers.DataBind(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:16:32.043

可能首先您应该将列表存储在通用集合中，然后对其进行排序。像这样的东西：

```
List<ListItem> list = new List<ListItem>(lbxCustomers.Items.Cast<ListItem>());
list = list.OrderBy(li => li.Text).ToList<ListItem>();
lbxCustomers.Items.Clear();
lbxCustomers.Items.AddRange(list.ToArray<ListItem>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:52:01.043

设置数据源后尝试重置列表框的`DisplayMember`和`ValueMember`属性。很多时候，如果控件已经绑定并且您再次设置 DataSource，那么它会删除 DisplayMember/ValueMember 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:15:20.340

尝试单独对列表进行排序。在下一步中指向 Text 值和 Data 值。数据绑定控件。

# asp.net - 未在 ASP.NET MVC 3 中设置复选框

> ID：10690723
> 
> 赞同：0
> 
> 时间：2012-05-21T18:38:31.127
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, checkbox

我正在尝试像下面的代码一样在控制器中初始化我的复选框，但是在视图中它没有被选中是真还是假

控制器 ：

```
 foreach (var item in AssignedUsers)
 {
     if (dc.App_UserTasks.Any(u => u.UserId == item.UserId && u.TaskId == ProjectTask.Id))
        {
            Users.Single(u => u.Id == item.Id).IsChecked = true;
        }
     else
        {
             Users.Single(u => u.Id == item.Id).IsChecked = false;
        }
  } 
```

看法：

```
 @for (int i = 0; i < Model.Responsibles.Count; i++)
    {
         @Html.CheckBoxFor(u => u.Responsibles[i].IsChecked)            
    } 
```

将模型从控制器发送到视图：

```
 var EPT = new EditProjectTaskModel
            {
                ProjectId = ProjectTask.ProjectId,
                Title = ProjectTask.Title,
                ProjectName = ProjectTask.App_Project.ProjectName,
                Id = ProjectTask.Id,
                Description = ProjectTask.Description,
                EstimatedTime = ProjectTask.EstimatedTime,
                Status = ProjectTask.Status,
                Responsibles = Users.ToList()
            };
            return PartialView("_EditProjectTask", EPT); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:00:50.167

假设您的用户 ViewModel 看起来像这样

```
public class UserViewModel 
{
  public string Name { set;get;}
  public int UserId { set;get;}
  public bool IsSelected { set;get;}
} 
```

你有你的主视图模型有这个 UserViewModel 的集合

```
public class EditProjectTaskModel 
{
  public List<UserViewModel > Responsibles { set; get; }

  public EditProjectTaskModel()
  {
    if(this.Responsibles ==null)
       this.Responsibles =new List<UserViewModel >();
  }
} 
```

创建一个`Responsibles.cshtml`使用以下内容调用的编辑器模板

```
@model YourNameSpace.UserViewModel 
@Html.CheckBoxFor(x => x.IsSelected)
@Html.LabelFor(x => x.IsSelected, Model.Name)
@Html.HiddenFor(x => x.UserId) 
```

现在像这样在你的主视图中包含它，而不是循环

```
@model EditProjectTaskModel
@using (Html.BeginForm())
{
  //other elements
 @Html.EditorFor(m=>m.Responsibles)
 <input type="submit" value="Save" />
} 
```

如果您想在表单提交上获得选中的复选框。

```
[HttpPost]
public ActionResult Save(EditProjectTaskModel model)
{
  List<int> userIDs=new List<int>();
   foreach (UserViewModel user in model.Responsibles)
   {
     if (user.IsSelected)
     {
       //you can get the selected user id's here
       userIDs.Add(user.UserId);    
     }
   } 
} 
```

# javascript - 有没有办法找到用 window.open 打开的浏览器弹出窗口是否有参数'scrollbars = yes'？

> ID：10690729
> 
> 赞同：0
> 
> 时间：2012-05-21T18:39:06.210
> 
> 标签：javascript, window.open

有没有办法找到用 window.open 打开的浏览器弹出窗口是否有参数'scrollbars = yes'？我需要根据滚动条的打开或关闭来运行特定的代码，这意味着它们可能不会显示但它们仍然处于打开状态。

即使没有通用的浏览器解决方案，对 IE 的任何帮助都会很棒。

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:44:15.273

I would try finding the code that handles the `window.open` and saving a global variable. Then you can access the global variable by using `window.parent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:49:42.620

尝试：

```
window.scrollbars.visible 
```

这应该返回真或假。

请参阅[https://developer.mozilla.org/en/DOM/window.scrollbars](https://developer.mozilla.org/en/DOM/window.scrollbars)

# tridion - 如何在我的 Tridion 页面中包含站点地图面包屑？

> ID：10690736
> 
> 赞同：4
> 
> 时间：2012-05-21T18:39:49.410
> 
> 标签：tridion, tridion-2011

我以前写

```
<asp:SiteMapPath ID="SiteMapPath1" Runat="server" /> 
```

在我的 .net 应用程序中显示导航*站点地图*面包屑。谁能告诉我如何在 Tridion 页面中使用这种类型的功能？或者我应该将其用作用户控件并将其添加到我的页面？

*当您在图片中看到下载 PDF*链接时，还有一件事。如何将此文本链接到放置在构建块文件夹中的相应 PDF 文件？我应该这样写文件（多媒体组件）的tcm id吗？

```
<a href="tcm id of file" > Download PDF </a> 
```

这会是正确的方法吗？

![在此处输入图像描述](../Images/e1de5936c54b001e19bbfb45a0aa693b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T18:46:00.113

好的，您在这里有 2 个问题 - 这些确实应该是 2 个单独的问题。继续。

没有什么可以阻止您从`<asp:SiteMapPath>`使用 Tridion 的网站使用 - 只要您有一个 SiteMap 提供程序并且您创建了所需的 navigation.sitemap（或任何 .NET 调用它）。

或者，您可以在发布时通过确定您的页面在网站中的位置来创建您的面包屑，就像我在[这篇](http://nunolinhares.blogspot.com/2012/01/its-little-things-creating-page.html)文章中解释的那样。

对于您的 pdf 下载，是的，您应该在 Tridion 中有一个模板来生成这些`<a tridion:href="@@Component.ID@@"><img src="images/pdf.png" /></a>`或类似的东西。请不要对您的 TCM Uris 进行硬编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T19:24:07.547

看看这篇解释如何从 Tridion 发布站点地图数据源 XML 的文章。然后，您可以将其与标准 .net 导航用户控件一起使用。： [http ://www.tridiondeveloper.com/web-sitemap](http://www.tridiondeveloper.com/web-sitemap)

# javascript - JavaScript 函数返回范围

> ID：10690740
> 
> 赞同：-1
> 
> 时间：2012-05-21T18:39:56.167
> 
> 标签：javascript, jquery

一个函数触发一个返回一些 Json 的数据库调用。然后使用此 CID 标记新添加的 DOM 元素。

我需要检索/返回存在于 ajax 成功块中的“cid”的值，它将用于更新属性。

错误 **cid 未定义**

```
//Save New Task
$("body").on('click','.icon-facetime-video',function(event){
  var new_entry = $(this).prev().val();
  var thebid = $(this).parents('tbody').prev().find('th').attr('id').split('_')[1];
  $(this).parent().addClass('tk').html('<i class="icon-eye-open"></i> '+new_entry);
  //CALL FUNCTION
  var cid = update_entry('new_tk',new_entry,thebid); //value of cid from update_entry
  $(this).parent().attr('id','cid_'+cid);
});

function update_entry(typeofupdate,new_entry,thebid){

  switch(typeofupdate){
    case 'new_tk': var action = 'new_tk';
    break;
  }

  $.ajax({
        type:'post',
        url: 'posts_in.php',
        dataType: "json",
        data: {cid : thebid, action: action, content: new_entry},
        success: function(data){
            var action = data[0],cid= data[1];
            console.dir(data);
        }
    });

  return cid;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:43:09.287

由于 AJAX 是异步完成的（因此`a`在 AJAX 中），因此您的函数会在 AJAX 调用完成之前返回。您应该将回调函数传递给`update_entry`，并在您的 AJAX 成功处理程序中运行它：

```
var self = this;

update_entry('new_tk', new_entry, thebid, function(cid) {
    $(self).parent().attr('id', 'cid_' + cid);
});

function update_entry(typeofupdate, new_entry, thebid, callback) {

  switch(typeofupdate){
    case 'new_tk': var action = 'new_tk';
    break;
  }

  $.ajax({
        type:'post',
        url: 'posts_in.php',
        dataType: "json",
        data: {cid : thebid, action: action, content: new_entry},
        success: function(data){
            var action = data[0], cid= data[1];
            callback( cid );
            console.dir(data);
        }
    });
} 
```

# android - 是否可以自动单击按钮以在 Android 布局上进行测试？

> ID：10690743
> 
> 赞同：1
> 
> 时间：2012-05-21T18:40:06.153
> 
> 标签：android

我想测试我的应用程序的功能，并希望自动化大多数用户交互。其中之一是按钮（或需要用户交互的地方）。是否有可能使这样的事情自动化还是违反安全性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:43:30.237

这是一个关于 android 的简单自动化 UI 测试的很棒的教程（使用 JUnit）：

[Android UI 的自动化单元测试](http://www.androidacademy.com/1-tutorials/43-hands-on/152-automated-unit-testing-the-android-ui?showall=1)

除其他外，它还有：

```
button.performClick(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T18:49:00.190

最近的 UI 测试框架是 Espresso：

[http://developer.android.com/training/testing/ui-testing/espresso-testing.html](http://developer.android.com/training/testing/ui-testing/espresso-testing.html)

# c# - 使用 DataContractSerializer 序列化对象

> ID：10690748
> 
> 赞同：2
> 
> 时间：2012-05-21T18:40:28.157
> 
> 标签：c#, xml

我需要使用 datacontract 序列化程序序列化一个对象。问题是我没有流或一个字符串中的对象数据。我有一个带有 xml 内容的 XmlElement。

我想要做：

```
DataContractSerializer ser = new DataContractSerializer(Xpto.GetType());
XmlReader = ... //i need the create an XmlReader (or XmlDictionaryReader) from a XmlElement (or XmlDocument)
Xpto x = (Xpto)ser.ReadObject(reader, true); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:56:48.047

您可以使用 an[`XmlNodeReader`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnodereader.aspx)来处理`XmlElement`对象：

```
XmlReader reader = new XmlNodeReader(myElement); 
```

# c# - HttpListener - 在同一地址上无缝启动/停止而无需停机？

> ID：10690751
> 
> 赞同：2
> 
> 时间：2012-05-21T18:40:59.083
> 
> 标签：c#, httplistener

我正在尝试在同一地址上的两个独立 HttpListener 实例之间无缝切换。目前，在停止实例 1 并启动实例 2 之后（显然，如果实例 2 在实例 1 关闭之前启动，我会得到经典的“已经注册 http .sys”错误）。

关于如何在同一地址上无缝切换（不停机）的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:51:59.677

这里的经典答案是外部负载均衡器，例如 HAProxy，它在多台机器、进程、端口、主机等之间分散负载。例如，即使在一台机器上，您也可以在不同的端口上有两个实例（与客户端认为他们正在联系的内容无关），并通过 HAProxy 将负载切换到它们。这会自动处理所有端口/主机重新映射。

如果您想要单个进程（例如服务），那么这里的一个技巧是使用 AppDomain：

*   我们的服务是一个只处理http的shell，但通过...处理请求
*   ... MarshalByRefObject，它是子 AppDomain 中真实对象的代理 ...
*   ...您可以在需要升级时即时创建，只需在新域准备好时交换代理实例...
*   ...然后卸载过时的 AppDomain

有点混乱（您需要担心为每个应用程序版本创建临时位置以执行等），但可能非常有效。

# ios - 如何在 iOS 中制作供个人重用的框架（库？）？

> ID：10690767
> 
> 赞同：1
> 
> 时间：2012-05-21T18:42:11.313
> 
> 标签：ios, cocoa-touch, frameworks, static-libraries

我正在为客户制作一系列图书应用程序。该系列中有很多书籍，每本书都是一个单独的应用程序。我不想在每次想要调整所有应用程序时都对所有应用程序进行更改，例如按钮的位置或其他东西，我想制作一个可以导入到项目中的通用“框架”（库？） ，就像我为 iOS SDK 的框架之一做的那样。该框架将包含应用程序的所有通用组件，其中包括一个控制器类，我将在每个应用程序中子类化以执行特定于应用程序的事情。然后，当我需要对所有这些进行更改时，我可以只更改框架中的代码，它会影响所有使用它的应用程序。我还希望能够包含常见的图像和其他媒体。

我想在 Xcode 中使用“Cocoa Touch 静态库”模板吗？我也在 github 上看到了这个项目：[https](https://github.com/kstenerud/iOS-Universal-Framework) ://github.com/kstenerud/iOS-Universal-Framework ；这会更适合我正在尝试做的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:47:55.913

出于您的目的，最简单的方法是将其设置为静态库项目。然后，对于您要使用的每个应用程序，将项目拖到您的工作区中，并将静态库产品添加为依赖目标。

据我所知，目前在 iOS 上构建框架的主要方法是[Jeff Verkoeyen 的 iOS-Framework](https://github.com/jverkoey/iOS-Framework)。

# php - PHP Regex - 从重写的 URL 获取查询字符串参数

> ID：10690769
> 
> 赞同：-2
> 
> 时间：2012-05-21T18:42:32.577
> 
> 标签：php, regex

我需要一个正则表达式字符串来从不同类型的 url 中提取参数，例如使用`$_SERVER["REQUEST_URI"]`：

> 字符串 1：“/news/page/4”或字符串 2：“/news/weekly/page/4”

我需要在没有 last 的情况下提取字符串`/page/[ID]`，我的意思是只有`/news/page`or`/news/weekly/`等​​。我该怎么做`preg_replace`？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:45:35.960

您可以使用[explode()](http://php.net/explode)代替正则表达式：

```
$delimiter = '/';
$parts     = explode($delimiter, $_SERVER["REQUEST_URI"]);
$whatINeed = $parts[0] . $delimiter . $parts[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:49:32.230

你应该可以使用：[A-Za-z/]+ 但是它会比只使用 substr 慢。编辑：不是 substr，而是爆炸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:52:17.143

正则表达式解决方案：

```
echo preg_replace('/^([\w\W]*)\/page\/\d*/','$1','/news/weekly/page/4'); 
```

输出：

```
/news/weekly 
```

但你应该使用爆炸解决方案：

```
$parts = explode('/', $_SERVER["REQUEST_URI"]);
$url = $parts[0].'/'.$parts[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T18:55:16.380

尝试：

```
$foo = explode('/', $_SERVER["REQUEST_URI"]);
$resultant_url = $foo[0].'/'.$foo[1]; 
```

# xcode - View Stretched in Storyboard iOS

> ID：10690770
> 
> 赞同：1
> 
> 时间：2012-05-21T18:42:34.050
> 
> 标签：xcode, ios5, uistoryboard

can anyone tell me how to get my storyboard back to normal? I'm not sure what I did but all my views seem to be stretched and I can't see the navigation bars at the top of them where I need to make changes to buttons I've put up there.

![enter image description here](../Images/cd975dea80ada418838f16be04cc69e8.png)

[full size screen Shot of Xcode](http://kristinareilly.com/xcodescreenshot.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:08:29.447

我不知道原因，但我前段时间遇到了这个问题。

在我的情况下，我有一个 TabBarController 指向几个导航控制器。为了解决这个问题，我刚刚删除了 TabBarController 并将其替换为新的。

如果您没有 TabBarController，我会尝试替换发生拉伸的第一个 NavigationController，它应该修复所有后续视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T22:11:34.673

这也发生在我身上。正如 Jeremy 的回应，我有一个 tabBarController，但我通过删除与 tabBar 关联的 viewController 来修复，其中 1 个是导致问题的原因，它是一个导航控制器，我已经更改了标题，所以标题有点大而且那做了控制器扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:09:58.773

最简单的解决方案是使用您的版本控制系统回滚。

# c# - Include a filtered set of records

> ID：10690771
> 
> 赞同：0
> 
> 时间：2012-05-21T18:42:45.167
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework-4.1, lazy-loading

Is this possible?

```
var results = (from c in _context.properties
               where c.strap == somevalue
               select c).include("characteristics).where(characteristics.cat_cd != 'DD'); 
```

essentially I want to create this query. I will be include(ing) other tables as the app grows.

```
select * from properties p,characteristics c
where 
p.strap = c.strap
and c.cat_cd <> 'DD' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:47:06.210

您只需`join`声明：

```
var set = from property in _context.Properties
          join characteristic in _context.Characteristcs on property.strap equals characteristic.strap
          select new 
          {
              Property = property,
              Characteristic = characteristic
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T14:01:14.930

这是我学到的。

```
var results = (from c in _context.properties
               where c.Characteristics.Any(c=>c.cat_cd == "DD") select c); 
```

# macos - compare local and remote (FTP/SFTP) files on Mac

> ID：10690774
> 
> 赞同：-1
> 
> 时间：2012-05-21T18:42:54.683
> 
> 标签：macos, ftp

Can you recommend any app/software (FTP client) for MAC OS that does something similar like Total Commander ? Comparing local and remote files and showing the difference. This would be helpful when you work an a local version of the file and want to upload to a remote server and you can make a check before uploading to see if the file was not changed by someone else.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T21:27:25.150

这可能应该移至 apple.stackexchange.com，但我会推荐[BBEdit](http://www.barebones.com/products/bbedit/)。它可以通过FTP打开文件。它将对两个打开的文件进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-28T08:09:57.060

虽然这个问题已经很老了，但这里有一个当前的建议：

[**ForkLift**](https://binarynights.com/)提供了我能找到的最简单的解决方案。它是一个免费的 FTP 客户端（试用版，没有限制），并具有内置的“比较”功能。
比较将在一个新窗口中打开，该窗口使用**Apples Xcode 的File Merge**（免费）或几个高级比较工具： **Kaleidoscope**、 **Araxis Merge**和**BeyondCompare**。

[![在此处输入图像描述](../Images/9a8c300a0be6becdb902bfdb0165d965.png)](https://i.stack.imgur.com/tNIbr.png)

# mysql - 修复 mysql 表中的重复条目

> ID：10690778
> 
> 赞同：1
> 
> 时间：2012-05-21T18:43:02.500
> 
> 标签：mysql, sql

基本上我现在要处理的问题是从 4271 到 4342 开始的 propertyID。有一个重复的 Lat 和 Lng 条目（地理坐标）正在抛出所有坐标。propertyID 4272 的纬度和经度坐标应为 propertyID 4271。它由一个 propertyID 关闭。我基本上需要将 Lat Lng 字段向上移动一个。

使用 SQL 解决此问题的最佳方法是什么？

照片： [http ://bit.ly/KGcRSg](http://bit.ly/KGcRSg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:54:36.690

`propertyID`您可以像这样通过偏移量更新每条记录：

```
UPDATE Coords SET propertyID = propertyID - 1 WHERE propertyID > 4271 
```

# iphone - How to hide an iOS numeric keyboard

> ID：10690785
> 
> 赞同：4
> 
> 时间：2012-05-21T18:43:24.090
> 
> 标签：iphone, ios, uitextfield

I'm using a numeric keyboard for input from a UITextField. I noticed that Interface Builder has a return key property called "Done". When I select "Done" under the return key options, I do not see that a Done button is created on the numeric keyboard. I see the "Done" button on other keyboard types if I change it from a numeric keyboard to something else, but not when using a numeric keyboard.

*   I want to create a "Done" button on the keyboard which will hide the keyboard when pressed
*   I want to do this because of the amount of real estate the keyboard takes up
*   I'm very new to iOS development, so the easiest and least convoluted way to accomplish this goal would be appreciated

Thanks in advance!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T18:53:12.247

执行此操作的典型方法是将包含按钮的工具栏分配给`inputAccessoryView`文本视图的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:07:46.900

我在网上找到了这个解决方案，但这意味着为你的完成按钮制作一个图像：http: [//www.neoos.ch/blog/37-uikeyboardtypenumberpad-and-the-missing-return-key](http://www.neoos.ch/blog/37-uikeyboardtypenumberpad-and-the-missing-return-key)

您也可以使用相同的方法来获取示例中显示的 UIKeyboard 视图，并按照@Jim 的建议执行以下操作：

```
UIToolbar *keyboardViewToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 206, 320, 44)];

UIBarButtonItem *keyboardDoneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneSettingDate)];
UIBarButtonItem *title = [[UIBarButtonItem alloc] initWithTitle:@"Enter Number" style:UIBarButtonItemStylePlain target:nil action:nil];
UIBarButtonItem *spacer1 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                                                                         target:nil 
                                                                         action:nil];
UIBarButtonItem *spacer2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                                                                         target:nil 
                                                                         action:nil];

NSArray *barButtonItems = [[NSArray alloc] initWithObjects:spacer1, title, spacer2, pickerDoneButton, nil];
  [keyboardViewToolbar setItems:barButtonItems]; 
```

并将该视图添加到键盘视图。

另外，作为一个单独的建议，考虑到您刚刚开始。在 iTunes U 上，您可以下载为 iOS 开发应用程序的斯坦福课程，这是一门非常完整的 iOS 开发课程，可在 iTunes Store 上免费获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T13:14:49.957

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        UIToolbar* KeyBoardToolbar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 50)];
        KeyBoardToolbar.barStyle = UIBarStyleBlackTranslucent;
        KeyBoardToolbar.items = [NSArray arrayWithObjects:
                                 [[UIBarButtonItem alloc]initWithTitle:[GlobalSettings GetTextBySelectedLocale:@"Done"] style:UIBarButtonItemStyleBordered target:self action:@selector(DismissKeyBoard)],
                                 [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
                                 nil];
        [KeyBoardToolbar sizeToFit];
        txtMessage.inputAccessoryView = KeyBoardToolbar;
    } 
```

txtMessage**可能**是`UiTextField`或`UITextView`.

```
-(void)DismissKeyBoard{
    [self.view endEditing:YES];
} 
```

# php - 多个变量传递 URL

> ID：10690788
> 
> 赞同：0
> 
> 时间：2012-05-21T18:43:33.900
> 
> 标签：php, mysql, variables

我需要一些帮助！我正在通过 URL 传递多个变量，在登陆页面上我的代码中有这个：

```
str = "
    SELECT
    *
    FROM wp_usermail
    WHERE ID= ".@$_GET['ID']"& Till=".@$_GET['Till']; 
```

我想更准确地从数据库中选择正确的信息，因此 ID 和 Till 都需要正确，否则您将看不到页面上的内容。

现在我得到解析错误：`syntax error, unexpected T_CONSTANT_ENCAPSED_STRING`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:46:30.757

用这个替换它：

```
$str = "
SELECT
*
FROM wp_usermail 
WHERE ID = '" . mysql_real_escape_string ($_GET ['ID']) . "' AND Till = '" . mysql_real_escape_string ($_GET ['Till']) . "'"; 
```

您缺少`$`变量名称中`.`的 s、变量周围的正确引号，并且您没有转义输入，为了安全起见，您应该始终这样做。

还有一件事：您应该停止使用这些`mysql_*`函数并开始使用*mysqli*或*PDO*，因为`mysql_*`现在已弃用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:46:36.410

您缺少`$`in 变量名称。

# c++ - @overrides for C++?

> ID：10690798
> 
> 赞同：6
> 
> 时间：2012-05-21T18:44:21.937
> 
> 标签：c++

Is there a way in C++ to ensure that a virtual method in a subclass is in fact overriding a super class virtual method? Sometimes when I refactor, I forget a method and then wonder why it is not being called but I forgot to change the method signature so it is no longer overriding anything.

Thanks

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T18:46:20.733

在 C++11 中可以使用`override`标识符：

```
struct Base {    
  virtual void foo() const { std::cout << "Base::foo!\n"; }
};

struct Derived : virtual public Base {
  virtual void foo() const override {std::cout << "Derived::foo!\n";}
}; 
```

这使您可以在编译时查明您是否未能覆盖方法。在这里，我们忽略了方法`const`：

```
struct BadDerived : virtual public Base {
  virtual void foo() override {std::cout << "BadDerived::foo!\n";} // FAIL! Compiler finds our mistake.

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:47:19.067

这是使用关键字[的 C++11 的一个特性。](http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final)`override`

如果您使用 Visual C++ 2005 或更新版本，您也可以使用[显式覆盖功能](http://msdn.microsoft.com/en-us/library/z8ew2153%28v=vs.80%29.aspx)，而无需 C++11 支持。

至于跨各种编译器的实现状态，请参考[Apache stdcxx 的站点](http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport)。

GCC 4.7.0 实现了该功能，MSVC 实现了 Visual C++ 11.0 的标准化版本（将随 Visual Studio 2012 发布）。

# c# - Nested SELECT Issue

> ID：10690799
> 
> 赞同：0
> 
> 时间：2012-05-21T18:44:31.280
> 
> 标签：c#, sql, sql-server

I am having a small issue with SqlServerCe. When using the below sqlString to perform a ExecuteNonQuery(); command I get the error below.

```
string sqlString = "INSERT INTO Images (UID, Name) " +
            "VALUES ((SELECT ID FROM Contributors WHERE ID = @UID), @Name);"; 
```

gives this error:

```
There was an error parsing the query. [ Token line number = 1,Token line offset = 41,Token in error = SELECT ] 
```

Any suggestions?

# Method

```
public static void InsertImage(Contributor contObj, string ImageName)
{
    string sqlString = "INSERT INTO Images (UID, Name) " +
        "VALUES ((SELECT ID FROM [Contributors] WHERE ID = @UID), @Name);";
    using (SqlCeConnection sqlConnection =
        new SqlCeConnection(WebConfigurationManager.ConnectionStrings["DefaultSQL"].ConnectionString))
    {
        SqlCeCommand sqlCommand = new SqlCeCommand(sqlString, sqlConnection);
        sqlCommand.Parameters.AddWithValue("@UID", contObj.ID);
        sqlCommand.Parameters.AddWithValue("@Name", ImageName);
        sqlConnection.Open();
        sqlCommand.ExecuteNonQuery();
        sqlConnection.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:48:55.863

为什么在这里使用嵌套选择？由于`@UID`已经引用了您选择的 ID 列，您不能这样做：

```
INSERT INTO Images (UID, Name) 
VALUES (@UID, @Name) 
```

如果您真的必须使用选择，请查看 bluefeet 的答案。他提供了您指定的参数 ( `@Name`) 作为要插入的值之一，所以没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:46:08.877

你会想要使用`INSERT INTO...SELECT..FROM`

```
string sqlString = "INSERT INTO Images (UID, Name) " +
            "SELECT ID, @Name FROM Contributors WHERE ID = @UID;"; 
```

如果您已经知道 的值`@ID`，那么您可以使用`INSERT INTO... VALUES...`查询

```
INSERT INTO Images (UID, Name)
VALUES (@UID, @Name) 
```

编辑，这是您的更新查询代码

```
public static void InsertImage(Contributor contObj, string ImageName)
{
    string sqlString = "INSERT INTO Images (UID, Name) " +
        "VALUES (@UID, @Name)";
    using (SqlCeConnection sqlConnection =
        new SqlCeConnection(WebConfigurationManager.ConnectionStrings["DefaultSQL"].ConnectionString))
    {
        SqlCeCommand sqlCommand = new SqlCeCommand(sqlString, sqlConnection);
        sqlCommand.Parameters.AddWithValue("@UID", contObj.ID);
        sqlCommand.Parameters.AddWithValue("@Name", ImageName);
        sqlConnection.Open();
        sqlCommand.ExecuteNonQuery();
        sqlConnection.Close();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:51:06.673

你可以这样做：

```
string sqlString = @"INSERT INTO Images(UID, Name)
                     SELECT ID, @Name
                     FROM Contributors
                     WHERE ID = @UID" 
```

# javascript - javascript中的睡眠功能 - 不使用递归

> ID：10690801
> 
> 赞同：3
> 
> 时间：2012-05-21T18:44:43.377
> 
> 标签：javascript, jquery, recursion, sleep

首先，我查看了所有的“睡眠”问题（例如[What is the JavaScript version of sleep()?](https://stackoverflow.com/questions/951021/javascript-sleep)），但没有找到可接受的解决方案。

我想为各种算法制作一个视觉教育工具。为了做到这一点，我使用带有 jQ​​uery 的 javascript 来显示数据并很好地绘制它。为了启动它，我想做一个排序示例，其中显示一个数组，打乱然后以视觉上令人愉悦的方式排序。所以我想要发生的是两个单元格被突出显示（容易），可能交换（容易），然后在测试下一对（困难）之前有一个小的延迟。

我知道 javascript 中没有明确的“睡眠”方法。但是，将代码重构为使用 setTimeout 将意味着递归地重写我的所有算法，这是一个巨大的障碍（尽管显然并非不可能）。

作为一个示例问题，请看一个冒泡排序示例：

```
function bubble_sort(arr){
    for(var i=0;i<arr.length;i++){
        for(var j=1;j<arr.length;j++){
            highlight(j-1);
            highlight(j);
            if(arr[j-1] > arr[j]){
                visible_swap(arr, j, j-1);
            }
            sleep(1000);
        }
    }
    exhibit_array(arr);
} 
```

这显然可以递归地重写以使用 setTimeout，但是在我想到的所有算法上这样做会花费大量时间。我错过了什么吗？有没有一种“简单”的方法可以让实现保持原样并随意放置睡眠？

编辑：我找到了两个解决方案：一个漂亮的，一个兼容的。恐怕这个漂亮的只适用于 Firefox，并利用了美妙的产量语义（这里有一些示例解释：[https](https://developer.mozilla.org/en/New_in_JavaScript_1.7) ://developer.mozilla.org/en/New_in_JavaScript_1.7 ）。这实际上完美地解决了我的问题，因此：

```
function bubble_sort(arr){
    for(var i=0;i<arr.length;i++){
        for(var j=1;j<arr.length;j++){
            highlight(j-1);
            highlight(j);
            if(arr[j-1] > arr[j]){
                visible_swap(arr, j, j-1);
            }
            yield true;
        }
    }
    yield false;
}
var bubble = bubble_sort(arr)
function gen(){
    if(bubble.next()){
        setTimeout(gen, 500);
    }
    else{
        alert("Done!");
    }
} 
```

这对我来说非常有用，但确实依赖于目前仅在 firefox 上支持的 yield 功能。请注意，要使其正常工作，您需要使用 <script type="text/javascript;version=1.7">。然而，这是完美的。它也可能适用于无限算法，如果需要，它们会徒劳无功。

根据以下答案，我发现的第二个解决方案也有效：

```
function bubble_sort(arr){
    var q = new Array();
    for(var i=0;i<arr.length;i++){
        for(var j=1;j<arr.length;j++){
            q[q.length] = [ [highlight, j-1 ], [highlight, j] ];
            if(arr[j-1] > arr[j]){
                swap(arr, j, j-1);
                q[q.length] = [ [visible_swap, j, j-1] ];
            }
        }
    }
    return q;
}
function play(q, step){
    if(q.length == 0)
        return;
    clear_highlights();
    cmds = q.shift();

    for(ind in cmds){
        cmd = cmds[ind];
        f = cmd.shift();
        f.apply(null, cmd);
    }
    setTimeout(function(){ play(q, step); }, step);
} 
```

这也有效。这在语法上相当麻烦，但绝对适用于所有浏览器。

尽管如此，似乎有一些javascript“扩展”实现了类似睡眠的语法，这显然比上面所有的都好。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T19:00:49.727

最近我做了一个子回文查找算法的可视化，它使用了 setTimeout 并且不需要以递归形式重写算法。

[请参阅此示例](http://explored.tk/experiments/palindrome/#%5B%5B%22hello%20world%22,%5B%22p%22,0%5D,%5B%22p%22,0.5%5D,%5B%22c%22,0,1,0%5D,%5B%22p%22,1%5D,%5B%22c%22,0,2,0%5D,%5B%22p%22,1.5%5D,%5B%22c%22,1,2,0%5D,%5B%22p%22,2%5D,%5B%22c%22,1,3,0%5D,%5B%22p%22,2.5%5D,%5B%22c%22,2,3,1%5D,%5B%22c%22,1,4,0%5D,%5B%22p%22,3%5D,%5B%22c%22,2,4,0%5D,%5B%22p%22,3.5%5D,%5B%22c%22,3,4,0%5D,%5B%22p%22,4%5D,%5B%22c%22,3,5,0%5D,%5B%22p%22,4.5%5D,%5B%22c%22,4,5,0%5D,%5B%22p%22,5%5D,%5B%22c%22,4,6,0%5D,%5B%22p%22,5.5%5D,%5B%22c%22,5,6,0%5D,%5B%22p%22,6%5D,%5B%22c%22,5,7,0%5D,%5B%22p%22,6.5%5D,%5B%22c%22,6,7,0%5D,%5B%22p%22,7%5D,%5B%22c%22,6,8,0%5D,%5B%22p%22,7.5%5D,%5B%22c%22,7,8,0%5D,%5B%22p%22,8%5D,%5B%22c%22,7,9,0%5D,%5B%22p%22,8.5%5D,%5B%22c%22,8,9,0%5D,%5B%22p%22,9%5D,%5B%22c%22,8,10,0%5D,%5B%22p%22,9.5%5D,%5B%22c%22,9,10,0%5D%5D,%5B%22xxxxxxxxxxx%22,%5B%22p%22,0%5D,%5B%22p%22,0.5%5D,%5B%22c%22,0,1,1%5D,%5B%22p%22,1%5D,%5B%22c%22,0,2,1%5D,%5B%22p%22,1.5%5D,%5B%22c%22,1,2,1%5D,%5B%22c%22,0,3,1%5D,%5B%22p%22,2%5D,%5B%22c%22,1,3,1%5D,%5B%22c%22,0,4,1%5D,%5B%22p%22,2.5%5D,%5B%22c%22,2,3,1%5D,%5B%22c%22,1,4,1%5D,%5B%22c%22,0,5,1%5D,%5B%22p%22,3%5D,%5B%22c%22,2,4,1%5D,%5B%22c%22,1,5,1%5D,%5B%22c%22,0,6,1%5D,%5B%22p%22,3.5%5D,%5B%22c%22,3,4,1%5D,%5B%22c%22,2,5,1%5D,%5B%22c%22,1,6,1%5D,%5B%22c%22,0,7,1%5D,%5B%22p%22,4%5D,%5B%22c%22,3,5,1%5D,%5B%22c%22,2,6,1%5D,%5B%22c%22,1,7,1%5D,%5B%22c%22,0,8,1%5D,%5B%22p%22,4.5%5D,%5B%22c%22,4,5,1%5D,%5B%22c%22,3,6,1%5D,%5B%22c%22,2,7,1%5D,%5B%22c%22,1,8,1%5D,%5B%22c%22,0,9,1%5D,%5B%22p%22,5%5D,%5B%22c%22,4,6,1%5D,%5B%22c%22,3,7,1%5D,%5B%22c%22,2,8,1%5D,%5B%22c%22,1,9,1%5D,%5B%22c%22,0,10,1%5D,%5B%22p%22,5.5%5D,%5B%22c%22,5,6,1%5D,%5B%22c%22,4,7,1%5D,%5B%22c%22,3,8,1%5D,%5B%22c%22,2,9,1%5D,%5B%22c%22,1,10,1%5D,%5B%22p%22,6%5D,%5B%22c%22,5,7,1%5D,%5B%22c%22,4,8,1%5D,%5B%22c%22,3,9,1%5D,%5B%22c%22,2,10,1%5D,%5B%22p%22,6.5%5D,%5B%22c%22,6,7,1%5D,%5B%22c%22,5,8,1%5D,%5B%22c%22,4,9,1%5D,%5B%22c%22,3,10,1%5D,%5B%22p%22,7%5D,%5B%22c%22,6,8,1%5D,%5B%22c%22,5,9,1%5D,%5B%22c%22,4,10,1%5D,%5B%22p%22,7.5%5D,%5B%22c%22,7,8,1%5D,%5B%22c%22,6,9,1%5D,%5B%22c%22,5,10,1%5D,%5B%22p%22,8%5D,%5B%22c%22,7,9,1%5D,%5B%22c%22,6,10,1%5D,%5B%22p%22,8.5%5D,%5B%22c%22,8,9,1%5D,%5B%22c%22,7,10,1%5D,%5B%22p%22,9%5D,%5B%22c%22,8,10,1%5D,%5B%22p%22,9.5%5D,%5B%22c%22,9,10,1%5D%5D%5D)。

一般原则是建立一堆命令，对于冒泡排序，这将是一堆突出显示和交换命令。然后你可以让一个函数每 N 毫秒运行一次，它从堆栈中获取一个命令并将其可视化。

```
commands = [
    ['highlight', 1, 5]
    ['swap', 1, 5]
    ['highlight', 3, 7]
    ...
];

setInterval(function() {
    var cmd = commands.shift();
    visualize(cmd);
}, 1300); 
```

在我的问题中，查找器算法是用 Python 编写的，由用户提供，我无法修改它。幸运的是，Python 允许重载访问和比较运算符，并记录算法执行的每个操作。[RecString 类](https://gist.github.com/09e80036a32cdb3a5af8)。在 JavaScript 中你不能这样做，但在你的情况下这不是问题，因为你可以修改原始算法。

如果您愿意，我可以通过电子邮件将 JS 源代码发送给您，它是匆忙编写的，但无论如何可能会有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T20:04:06.030

另一个想法 - [StratifiedJS](http://onilabs.com/stratifiedjs)。这是一个简单的[jsFiddle 示例](http://jsfiddle.net/RnSgR/)：

```
<script src="http://code.onilabs.com/apollo/0.13/oni-apollo.js"></script>
<script type="text/sjs">
  for (var i = 1; i < 4; i++) {
      alert(i);
      hold(1000);
  }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T18:47:59.517

我将与 合作`setTimeout`，我相信这是您在客户端最接近“睡眠”等效项的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T20:26:39.563

这个答案不能解决一般情况，但也许您可以增加每条指令的间隔，以便它们彼此运行一秒钟。

```
function bubble_sort(arr){
    var interval = 0;  // increases with each loop
    for(var i=0;i<arr.length;i++){
        for(var j=1;j<arr.length;j++){
            (function(i, j) {
                setTimeout(function() {
                    highlight(j-1);
                    highlight(j);
                    if(arr[j-1] > arr[j]){
                        visible_swap(arr, j, j-1);
                    }
                }, interval);
            })(i, j);
            interval += 1000;
        }
    }
    exhibit_array(arr);
} 
```

因此，第一个操作立即运行，下一个操作在一秒后运行，第三个操作在总共两秒后运行，依此类推。

此解决方案提供了代码重写最少的好处：只需将循环内容包装在 a 中`setTimeout`（它与循环变量一起包装在闭包中）并`interval`在每次循环迭代后添加一行以递增。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T19:35:52.607

使用`setTimeout()`不是递归。

您可以使用闭包来跟踪状态。`for`但是，必须将循环更改`while`为才能正常工作：

```
function bubbleSort(arr) {
  (function(i, j) { // <- this closes over i and j
    function nextSortStep() {
      while (i < arr.length) {
        while (j < arr.length) {
          highlight(j - 1);
          highlight(j);
          if (arr[j - 1] > arr[j]) {
            visibleSwap(arr, j, j - 1);
          }
          j++;
          return setTimeout(nextSortStep, 1000);
        }
        i++;
        j = 1;
        return setTimeout(nextSortStep, 1000);
      }
      exhibitArray(arr);
    }
    nextSortStep();
  })(0, 1); // <- loop initialization
} 
```

顺便说一句，JavaScript 不是 PHP，函数名称通常在`camelCase`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T20:13:37.463

按照 Lebedev 的想法，我将存储“数组排序的演变”，然后使用 setInterval() 显示它们。 [http://jsfiddle.net/mari/EaYRZ/](http://jsfiddle.net/mari/EaYRZ/)

# c# - 根级别的数据无效。第 1 行，位置 1

> ID：10690802
> 
> 赞同：1
> 
> 时间：2012-05-21T18:44:54.560
> 
> 标签：c#, xml, windows-phone-7

我正在从 Internet 下载一个 xml 文件并将其保存在隔离存储中。如果我尝试阅读它，我会收到一个错误：

> 根级别的数据无效。第 1 行，位置 1。

```
string tempUrl = "http://xxxxx.myfile.xml"; // changed
WebClient client = new WebClient();
client.OpenReadAsync(new Uri(tempUrl));
client.OpenReadCompleted += new OpenReadCompletedEventHandler(delegate(object sender, OpenReadCompletedEventArgs e) {

StreamWriter writer = new StreamWriter(new IsolatedStorageFileStream("myfile.xml", FileMode.Create, FileAccess.Write, myIsolatedStorage));
 writer.WriteLine(e.Result);
 writer.Close();
}); 
```

这就是我下载和保存文件的方式...

我试着这样读：

```
IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile("myfile.xml", FileMode.Open, FileAccess.Read);
XDocument xmlDoc = XDocument.Load(fileStream); 
```

这是我得到错误的地方......

我没有下载相同的文件并将其保存到隔离存储中没有问题......所以一定有问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T18:51:27.173

这：

```
writer.WriteLine(e.Result); 
```

不做你认为它做的事。它只是调用`ToString()`a `Stream`，并将结果写入文件。

我建议您避免`StreamWriter`完全使用 a，而只需从直接复制`e.Result`到`IsolatedStorageFileStream`：

```
using (var output = new IsolatedStorageFileStream("myfile.xml", FileMode.Create, 
                                    FileAccess.Write, myIsolatedStorage))
{
    CopyStream(e.Result, output);
} 
```

哪里`CopyStream`将是一种仅复制数据的方法，例如

```
public static void CopyStream(Stream input, Stream output)
{
    byte[] buffer = new byte[8 * 1024];
    int read;
    while((read = input.Read (buffer, 0, buffer.Length)) > 0)
    {
        output.Write (buffer, 0, read);
    }
} 
```

# javascript - How can I programmatically set the width of a column in Slickgrid?

> ID：10690805
> 
> 赞同：1
> 
> 时间：2012-05-21T18:45:08.690
> 
> 标签：javascript, slickgrid

I'm using SlickGid 2.0 and I'd like to be able to set the width of each column based on the longest string contained in the column. I'm fine calculating the required width, but I cannot figure out how to set the width of a column outside of faking a drag event. Is there any other way to individually set the widths of columns in SlickGrid?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:49:54.913

根据源码中的注释，可以设置`model[cell].width`调整个别列的宽度。

请参阅此处的评论：

[http://code.google.com/p/slickgrid/source/browse/trunk/slick.grid.js?r=9](http://code.google.com/p/slickgrid/source/browse/trunk/slick.grid.js?r=9)

# mysql - MySQL ODBC with Microsoft Excel 2007 Crash

> ID：10690808
> 
> 赞同：0
> 
> 时间：2012-05-21T18:45:17.427
> 
> 标签：mysql, excel, odbc

Trying to access certain tables/views using Excel causes the executing program, "Microsoft Query", to crash. "Ordinary" tables with only one primary key can be found and exported without any problems.

The table that can't be imported contains two columns which both are primary key and both are foreign keys. One of the views consists of a pair of inner joins and the other view is a grouped table (SUM() and GROUP BY). The table and these two views seem to crash the "Microsoft Query". Any idea of how to solve this?

EDIT: The table looks somewhat like this:

```
CREATE TABLE AccountHolder
(
  Account BIGINT(10),
  Customer INT,
  PRIMARY KEY(Account, Customer),
  CONSTRAINT FKAccountHolderAccount
    FOREIGN KEY AccountHolder (Account)
    REFERENCES Account (AccountNumber),
  CONSTRAINT FKAccountHolderCustomer
    FOREIGN KEY AccountHolder (Customer)
    REFERENCES Customer (ID)
) ENGINE = InnoDB; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:46:02.057

我有类似的问题。当我单击表名前的减号时，Microsoft Query 立即崩溃。

我进行了一些测试，经过反复试验，问题之一似乎是表名的长度。超过 18 个字符的表名导致 Microsoft Query 崩溃。

解决方法是创建一个名称包含 18 个字符或更少字符的视图。我再次尝试并能够查看表格列，选择它们并将它们导入 Excel。

我仔细检查了一个名称为 18 个或更少字符、包含 3M 条记录并组成 147 列的巨大表，并尝试检索数据。我能够选择所有列并设置一些条件，但 Microsoft Query 再次崩溃。我当时想也许列名应该遵守相同的规则，但事实并非如此。

我用相同的列名在有问题的表上创建了另一个视图，并尝试检索完全相同的记录并且它有效......我很困惑，但至少它有效。

希望这会在某种程度上有所帮助。

# c++ - 使用 recv() 接收部分数据，这可能吗？

> ID：10690814
> 
> 赞同：1
> 
> 时间：2012-05-21T18:45:35.543
> 
> 标签：c++, sockets, winsock, recv

我正在使用带有 winsock 的非阻塞套接字，我想知道我是否可以部分接收数据？

我的数据包包含一个“长度”字，我必须先读取它，然后根据“长度”读取整个数据包。

实际上这个问题就像“recv() 是如何工作和结束的？”，我可以在得到所有数据之前使用 recv() 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:48:03.353

这取决于插座的类型。如果它是一个数据报套接字，`recv`将读取一个完整的数据报。如果是 TCP 套接字：

*   `recv`在返回之前将读取至少一个字节
*   `recv`可以读多篇完整的`message`

如果您使用的是 TCP，您可能需要执行以下操作：

*   至少读取包含长度的字节
*   读取`length`字节
*   你现在有一个完整的消息
*   冲洗，重复

你可以从[`readn`函数](http://www.informit.com/articles/article.aspx?p=169505&seqNum=9)开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:49:02.353

对于 TCP 套接字：您可以在循环中使用 recv，直到获得足够的字节。请注意，recv 返回的字节数可能比您请求的少。在这种情况下，请继续拨打电话，直到您收到完整的信息。

# gwt - What is the proper way to use gwt-bootstrap modal with gwt-platform?

> ID：10690816
> 
> 赞同：9
> 
> 时间：2012-05-21T18:45:46.247
> 
> 标签：gwt, twitter-bootstrap, gwt-platform

I am constructiong an webapp with Google Web Toolkit using [GWT-Platform](http://code.google.com/p/gwt-platform/) and [GWT-Bootstrap](http://gwtbootstrap.github.com/) frameworks. Mostly it has been almost flawless until I tried to implement a popup. These frameworks' undestanding of popups seems to be quite different.

GWT-Platform expects a popup widget itself to be an instance of `com.google.gwt.user.client.ui.PopupPanel` when using the GWTP's `RevealRootPopupContentEvent.fire(source, content)` or a presenter's `addToPopupSlot(child)` method.

GWT-Bootstrap's Modal is used like any other widget that is added to the underlying panel but my goal is it to have a separate presenter and view and to possibly fetch it asynchrously with AsyncProvider.

I have tried to make it as a PresenterWidget and using `addToSlot(slot, content)` to reveal it but it doesn't look quite right. Not all of the styles are applied this way and the close icon (×), doesn't work for example.

I think I am not the first one trying to do something like that so maybe someone has figured out a proper way to make it work.

Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T16:34:34.100

您必须创建一个视图：

```
public class MyPopupView extends PopupViewImpl implements MyView {

    protected Widget widget;

    public interface MyPopupViewUiBinder extends
            UiBinder<Widget, MyPopupView> {
    }

    @UiField(provided = true)
    Modal dialogBox;

    private MyPresenter presenter;

    @Inject
    public MyPopupView(final MyPopupViewUiBinder uiBinder,
            final EventBus eventBus) {
        super(eventBus);
        setUpDialog(); // Provides UiField => Before initWidgets
        initWidget(uiBinder.createAndBindUi(this));
    }

    // DialogBox must be overridden to let the presenter handle changes onUnload
    private void setUpDialog() {
        dialogBox = new Modal() {

            @Override
            protected void onUnload() {
                MyPopupView.this.hide();
            }
        };

        dialogBox.setTitle("Some title");
    }

    @Override
    public void setPresenter(final MyPresenter presenter) {
        this.presenter = presenter;
    }

    @Override
    public final void hide() {
        dialogBox.hide();
        presenter.hide();
    }

    @Override
    public void setAutoHideOnNavigationEventEnabled(final boolean autoHide) {
        // TODO Auto-generated method stub
    }

    @Override
    public void setCloseHandler(
            final PopupViewCloseHandler popupViewCloseHandler) {
        // TODO Auto-generated method stub
    }

    @Override
    public void setPosition(final int left, final int top) {
        // TODO Auto-generated method stub
    }

    @Override
    public void show() {
        dialogBox.show();
    }

    @Override
    public void center() {
        dialogBox.show();
    }

    @Override
    public Widget asWidget() {
        return widget;
    }

    protected final void initWidget(final Widget widget) {
        this.widget = widget;
    }

} 
```

还有一个 UIBinder 文件：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g='urn:import:com.google.gwt.user.client.ui'
    xmlns:b='urn:import:com.github.gwtbootstrap.client.ui'>

    <b:Modal title="Some Title" ui:field="dialogBox">
        <!-- Your content -->
    </b:Modal>
</ui:UiBinder> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T12:57:32.850

您的 gwtp popup Presenter 有一个扩展 PopUpViewImpl 的视图，它实现了 PopupView，并使用该接口的许多方法来显示弹出窗口（asPopupPanel()、show()、center() 等）。

我刚刚开始了解gwt-bootstrap（看起来很棒+caalos0），但似乎Modal没有实现PopupView，因此不能以gwtp自动显示的方式传递给addToPopupSlot。

至于 addToSlot() 问题，您使用的是 RootLayoutPanel 还是 RootPanel？这可能是 addToSlot 无法正常工作的原因，因为 gwt-bootstrap Modal 小部件在初始化时附加到 RootPanel，这可能会导致奇怪的布局行为以及使用 RootLayoutPanel 作为基础的应用程序。

我会尝试扩展 Modal 组件，让它实现 PopUpView，将其添加为 PopUpViewImpl 上附加到弹出演示者的字段，并覆盖 PopUpViewImpl asPopupPanel() 函数以返回新的扩展 Modal。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-05T06:46:33.373

根据@dominik 的回答，我做了一些改进，请参阅我的[Gist](https://gist.github.com/svenjacobs/5932373)。它包含一些可用于任何 Modal/PopupView 实现的抽象基类。它有点复杂但也更干净，因为我们不会将整体传递`Presenter`给`View`. 模态关闭时与`View`交互的接口是。`Presenter``HasModalUnbind`

您将按如下方式使用这些类。演示者示例：

```
public class ErrorModalPresenter extends ModalPopupPresenter<ErrorModalPresenter.MyView> {

    public interface MyView extends ModalPopupView {
        DivElement getErrorMessage();
    }

    private final ErrorEvent error;

    @Inject
    public ErrorModalPresenter(final EventBus eventBus,
                               final MyView view,
                               @Assisted final ErrorEvent error) {

        super(eventBus, view);
        this.error = error;
    }

    @Override
    public void unbindModal() {
        ErrorDismissEvent.fire(this, this);
    }

    @Override
    protected void onBind() {
        super.onBind();

        //noinspection ThrowableResultOfMethodCallIgnored
        getView().getErrorMessage().setInnerText(error.getCause().getMessage());
    }
} 
```

示例视图：

```
public class ErrorModalView extends ModalPopupViewImpl implements ErrorModalPresenter.MyView {

    @UiField(provided = true)
    Modal errorModal;

    @UiField
    DivElement errorMessage;

    interface Binder extends UiBinder<Widget, ErrorModalView> {}

    @Inject
    public ErrorModalView(final EventBus eventBus,
                          final Binder uiBinder) {

        super(eventBus);

        errorModal = initModal();
        initWidget(uiBinder.createAndBindUi(this));
    }

    @Override
    public DivElement getErrorMessage() {
        return errorMessage;
    }
} 
```

而 UiBinder XML 只是为了记录：

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
             xmlns:g='urn:import:com.google.gwt.user.client.ui'
             xmlns:b='urn:import:com.github.gwtbootstrap.client.ui'>

    <b:Modal ui:field='errorModal' title='Error'>
        <g:HTML>
            <div ui:field='errorMessage'/>
        </g:HTML>

        <b:ModalFooter>
            <b:Button text='Close' dismiss='MODAL'/>
        </b:ModalFooter>
    </b:Modal>

</ui:UiBinder> 
```

在我触发了一个事件`unbindModal()`，`ErrorModalPresenter`该事件被`ErrorModalPresenter`. 在那里，模态演示者从容器中删除，然后`unbind()`在演示者上调用。当然，任何其他解决方案都是可能的`unbindModal()`。

基类假定模态是一次性模态，一旦它们被隐藏就会被删除。这种行为可以在[initModal()](https://gist.github.com/svenjacobs/5932373#file-modalpopupviewimpl-java-L32) of中改变`ModalPopupViewImpl`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T03:03:48.337

我相信您必须制作一些胶水代码才能使其正常工作。

我从未使用过 GWT-Platform 弹出窗口，所以我不知道具体如何，但我相信您将不得不创建一个扩展 PopupPresenter 的新类，并制作使其工作所需的东西。

另外，几天前我在考虑 GWT-Platform ......而且我很确定当 GWT-Platform 的第一个版本发布时，我将创建一个新项目来制作这些必要的胶水代码。

如果您在这方面需要任何帮助，请与我联系。

谢谢，抱歉 gwt 平台支持不佳。

# c# - 将 URL 重新映射到 MVC 应用程序

> ID：10690817
> 
> 赞同：0
> 
> 时间：2012-05-21T18:45:49.423
> 
> 标签：c#, model-view-controller, asp.net-mvc-routing

我正在重建一个网站，以前是在 DotNetNuke 上构建的。我需要保留数据库，因为旧 URL 可以正常工作。

问题：翻译旧网址

等式。

```
http://localhost:8069/Noticias/tabid/78/language/pt-BR/nid/2267/Palestra-
discute-o-futuro-profissional-das-crianca.aspx 
```

对于新的映射引擎，这将是这样的：

等式。

```
http://localhost:8069/{controller}/{action}/{id}/{title} 
```

其中，在示例中， 2267 是我的*id*，而 78 是我必须为控制器名称“翻译”的模块 id。该操作默认为*查看*。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:06:52.723

只需为您要传输的请求创建一个基本页面处理程序，然后`Response.Redirect`在您的新网站上对适当的 URL 执行一个简单的操作。您的所有页面都继承了这些更改，您可以在配置文件或数据库中提供 URL 列表，以便 URL 动态重定向。

# forms - 提交帖子时出现404；直接调用时发现

> ID：10690818
> 
> 赞同：0
> 
> 时间：2012-05-21T18:45:49.517
> 
> 标签：forms, http, coldfusion

我有一个启用 ColdFusion 的表单（用于验证）提交到单独的页面。提交此表单时，它在操作页面上向我显示 404，但是当我直接将操作 url 加载到地址栏中时，它会显示（出现错误，但没关系）。这是迄今为止我遇到的最奇怪的问题之一。

表格页面： http: [//www.jefferson.edu/population_health/_archive/contact_me.cfm](http://www.jefferson.edu/population_health/_archive/contact_me.cfm)

行动页面： http: [//www.jefferson.edu/population_health/_archive/contact_action.cfm](http://www.jefferson.edu/population_health/_archive/contact_action.cfm)

即使我尝试通过 URL 传递表单变量，它也会给我一个 404。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:45:14.687

我的直觉是，当您提交数据并将其绑定到另一个网络服务器时，该机器上的另一个服务试图接管请求......当然，它无法根据自己的 webroot 找到正确的页面.

如果您单击[http://www.jefferson.edu/population_health/_archive/contact_me.cfm](http://www.jefferson.edu/population_health/_archive/contact_me.cfm)，它会正常加载并以 IIS 作为服务器返回 200 标头，但如果您单击[http://www.jefferson.edu/population_health/ _archive/contact_me2.cfm](http://www.jefferson.edu/population_health/_archive/contact_me2.cfm)正如预期的那样，它会抛出 404，但它已通过自定义 404 正确处理，并且标头响应仍然是 IIS。但是，如果您单击[http://www.jefferson.edu/population_health/_archive/contact_me.cfm?foo=bar](http://www.jefferson.edu/population_health/_archive/contact_me.cfm?foo=bar)，它会返回一个 ApacheSling 默认 404 和标头信息，表明服务器是“Day-Servlet-Engine/4.1.12” .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:32:03.940

您的页面正在发布到页面contact_action.cfm ...在您的问题中，您指出正确的页面应该是“mailaction.cfm”。

如果操作页面实际上是 mailaction.cfm，那么您只需更改 cfform 的操作属性。

# git - 将非标准布局svn导入git

> ID：10690825
> 
> 赞同：1
> 
> 时间：2012-05-21T18:46:17.713
> 
> 标签：git, svn, layout, import, git-svn

我的硬盘驱动器上有一个本地 svn 存储库，其目录结构如下：

```
[root]
Project1/
Project2/
Project3/
Project4/ 
```

正如您所注意到的，这根本不是标准的 SVN 布局。

现在我想**创建一个新的 git repo**来导入所有这些项目。除非所有这些项目都在单个文件夹中，否则我不介意更改目录结构。

我安装了 TortoiseSVN 和 TortoiseGit。

我已经尝试过，但我无法弄清楚这些的内部工作原理，或者我对此太陌生了。

*   [http://www.gitshah.com/2010/11/how-to-use-git-with-non-standard-svn.html](http://www.gitshah.com/2010/11/how-to-use-git-with-non-standard-svn.html)
*   [将具有非标准布局的 Subversion 存储库导入 Git](https://stackoverflow.com/questions/3910237/importing-a-subversion-repository-with-a-non-standard-layout-into-git)
*   [如何使用带有非标准 svn repo 布局的 git-svn 访问 svn 分支？](https://stackoverflow.com/questions/3681080/how-do-i-access-svn-branches-using-git-svn-with-a-non-standard-svn-repo-layout)
*   [将非标准 svn 转换为 git](https://stackoverflow.com/questions/5394335/convert-non-standard-svn-to-git)
*   [使用 Git-Svn 克隆非标准 Svn 存储库](https://stackoverflow.com/questions/572893/cloning-a-non-standard-svn-repository-with-git-svn)

请帮帮我。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:07:21.177

我认为您不应该将不同的项目混合到一个 Git 存储库中。我的建议是为每个项目创建一个 Git 存储库。与 SVN 相比，Git 不允许子树提交和更新。将所有这些项目放在一个存储库中会使 git push/pull/merge 工作流程有点尴尬。

想象一下，您正在处理项目 1。您愉快地添加和提交内容。现在你想推送到服务器，但你不能，因为同事已经推送了对项目 2 的修改。这对我来说没有意义。

如果您希望将所有 4 个项目合并到一个主项目中，您仍然可以创建一个新的 Git 存储库并将这四个项目添加为[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)。

要从一个项目创建 Git 存储库，您只需`git svn clone SVN_REPO`. 我建议将 SVN 忽略提取到 .gitignores 文件中`git svn show-ignore >>.gitignore`。然后创建主项目并用于`git submodule add`添加您的项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T12:07:17.893

我无法找到任何可行的解决方案。

我只是将所有内容导出到一个空的 git repo 中并将其推过去。失去我所有的修订历史。

总之谢谢大家。我希望有人能够解决这个问题。

# java - 当我尝试从文件中读取某些字节时，为什么会出现索引越界？

> ID：10690827
> 
> 赞同：0
> 
> 时间：2012-05-21T18:46:23.310
> 
> 标签：java, fileinputstream

谁能弄清楚为什么我在这里得到索引越界异常？我可以读入第一批数据，但是当我尝试再次循环时，它会出错。我还在 is.read(readBytes, offset, length); 这也是一部分。

```
InetAddress address = packet.getAddress();

int port = packet.getPort();

RRQ RRQ = new RRQ();

int offset = 0;
int length = 512;
int block = 0;

byte[] readBytes = new byte[512];

File file = new File(filename);
FileInputStream is = new FileInputStream(file);

int fileBytes = is.read(readBytes, offset, length);

DatagramPacket outPacket = RRQ.doRRQ(readBytes, block, address, port);
socket.send(outPacket);

block++;

if (fileBytes != -1)
{                   
    socket.receive(packet);

    offset = offset + fileBytes;

    System.out.println(offset);

    Exceptions here:fileBytes = is.read(readBytes, offset, length);

    outPacket = RRQ.doRRQ(readBytes, block, address, port);
    socket.send(outPacket);
    block++;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T18:47:45.243

看看这个调用：

```
fileBytes = is.read(readBytes, offset, length); 
```

当`offset`为 0 时很好 - 但当它*不*为 0 时，您要求将 512 个字节读入一个只有 512 个字节长的数组，但*不是*从数组的开头开始 - 因此没有足够的空间容纳所有 512 个字节你要求的。

我怀疑你想要：

```
fileBytes = is.read(readBytes, offset, length - offset); 
```

...或者，只需将偏移量保留为 0。目前尚不清楚是什么`RRQ.doRRQ`，但您不传入是可疑的`offset`...

# php - How to get server time and update every second?

> ID：10690833
> 
> 赞同：0
> 
> 时间：2012-05-21T18:46:45.620
> 
> 标签：php, javascript, jquery, ajax, date

I am making ajax request to a particular server and getting the response also. I am doing cross domain request so using jsonp. Is there a way to get the server time to which i am making the request. Will it be better to write `php script` or doing just ajax request is good. Suppose if i make the following request :

```
$.ajax({
        dataType: 'jsonp',
        data: 'jsonp=date',
        jsonp: 'jsonp_callback',                
        url: 'http://www.google.com',   
        success: function (data) {                  
        }
}); 
```

How can i get the server time from this request? Please help if any suggestion. Also after getting the time if i use `setInterval` method to update time every second will it be a costly operation or better to make the same ajax request after a particular time to update time. I have real time data to update with the time.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:53:29.810

You can't get the server's time if it doesn't explicitly provide it to you.
You can read its HTTP headers, but that's not a good thing since the headers may not provide this information every time, or their format may not be the same all the time.

Also, I don't see the point of asking it every second.
Ask it one single time, calculate the difference between its time and yours, and here you go: you got the difference of time and you can use it wherever you want.

Keep in mind that even if you get the time, there probably will be a difference between the one you got and the server's real time because of the network's latency.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:51:47.877

The answer to part 1 is that you will need to output the server time in the response in order for your javascript to read it. For part 2, I would wait for the response to load, and then use `setTimeout`. Using `setInterval` means that you might fire the ajax call twice before the first response returns.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:57:35.847

When you suggest server time do you mean the script that is executing the call or the actual time on the server?

What is the need for this, are you trying to figure out time between calls to automate calls every 5 secs for example?

If you are then just simply getting a locale time from javascript and comparing that from when you get a response in ajax would suffice?

Otherwise javascript isn't going to be able to get server time, due to its 'clientside' nature.

# eclipse - Eclipse 3.7 中缺少 Apache Tomcat

> ID：10690835
> 
> 赞同：2
> 
> 时间：2012-05-21T18:47:06.137
> 
> 标签：eclipse, tomcat, eclipse-plugin

我计划在 Eclipse IDE 中使用 Apache Tomcat 进行开发。我创建了一个 web 服务应用程序，为此我需要将已安装的运行时配置为 Tomcat 服务器，以运行该服务。

当我尝试安装它时，我发现它在服务器列表中丢失了。

![Tomcat 服务器丢失](../Images/16e91e929a10d860b8c6f6daf3458856.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:57:50.960

`Window > Show View > Servers`. 从那里，`Right click > New > Server`您应该会看到名为 的第一组`Apache`，其中有很多 Tomcat 可供选择。

这可能取决于您使用的 Eclipse 版本。我确信*Eclipse for Java EE Developers*包含这些服务器，*Eclipse Classic*或*Eclipse for Java Developers*可能不包含它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T18:36:38.457

我遇到了这个问题并找到了这个解决方案，也许它可以帮助你： - 1st：将文件夹中的文件 servlet-api.jar 复制到文件夹 install tomcat:ex:C:\tomcat\common\lib\servlet-api.jar 到文件夹 install java ex: C:\Program Files\java\jdk1.5\jre\lib\ext。-2nd：打开：C:\tomcat\conf\context.xml

添加文字：

<上下文可重新加载=“真”>

WEB-INF/web.xml

……。

*   第三：下载文件tomcatPlugin...。

*   解压到eclipse的“plugin”文件夹

*   启动eclipse，进入Window\preference\

*   在偏好选项卡中：

    *   选择 Tomcat 和配置：

    +Tomcat 版本：你安装的 Tomcat 版本

    +Tomcat home：链接到你解压 tomcat 的文件夹 (C:\Tomcat5.5)

    *   管理器应用用户名：admin

    管理员应用密码：admin

    点击确定

*   重启 Eclipse

好的。祝你好运^^

来源： http: [//maivanha.blogspot.com/2007/11/i.html](http://maivanha.blogspot.com/2007/11/i.html)

# postgresql - 在 JasperReports Server (postgresql) 中运行 iReport 设计的报告时出错

> ID：10690837
> 
> 赞同：1
> 
> 时间：2012-05-21T18:47:11.310
> 
> 标签：postgresql, jasper-reports, ireport, jasperserver

我在*iReport*中设计了一个报表，它有一个直接查询作为主报表和一个带有另一个简单查询的子报表。这两个查询都没有传递任何参数，但是它们都广泛地处理时间戳。

合并的报告在*iReport*中运行良好，如果我删除子查询并将两者加载到*JasperReports 服务器*中，它们将独立运行。但是，当我尝试运行包含子报告的完整报告时，我收到以下错误和堆栈跟踪：

```
The server has encountered an error. Please excuse the inconvenience.
Error Message

net.sf.jasperreports.engine.JRRuntimeException: Parameter "DATABASE_TIMEZONE" does not exist.
Error Trace

net.sf.jasperreports.engine.JRRuntimeException: Parameter "DATABASE_TIMEZONE" does not exist. 
at net.sf.jasperreports.engine.query.JRAbstractQueryExecuter.getValueParameter(JRAbstractQueryExecuter.java:606) 
at net.sf.jasperreports.engine.query.JRAbstractQueryExecuter.getValueParameter(JRAbstractQueryExecuter.java:621) 
at com.jaspersoft.jasperserver.api.engine.jasperreports.util.JRTimezoneJdbcQueryExecuter.getValueParameter(JRTimezoneJdbcQueryExecuter.java:150) 
at com.jaspersoft.jasperserver.api.engine.jasperreports.util.JRTimezoneJdbcQueryExecuter.<init>(JRTimezoneJdbcQueryExecuter.java:134) 
at com.jaspersoft.jasperserver.api.engine.jasperreports.util.JRTimezoneJdbcQueryExecuterFactory.createQueryExecuter(JRTimezoneJdbcQueryExecuterFactory.java:50) 
at net.sf.jasperreports.engine.fill.JRFillDataset.createQueryDatasource(JRFillDataset.java:728) 
at net.sf.jasperreports.engine.fill.JRFillDataset.initDatasource(JRFillDataset.java:629) 
at net.sf.jasperreports.engine.fill.JRBaseFiller.setParameters(JRBaseFiller.java:1159) 
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:802) 
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:746) 
at net.sf.jasperreports.engine.fill.JRFillSubreport.fillSubreport(JRFillSubreport.java:640) 
at net.sf.jasperreports.engine.fill.JRSubreportRunnable.run(JRSubreportRunnable.java:59) 
at net.sf.jasperreports.engine.fill.JRThreadSubreportRunner.run(JRThreadSubreportRunner.java:205) 
at java.lang.Thread.run(Thread.java:619) 
```

据我所知，这是一个[已知的错误，但没有受到太多关注。](http://jasperforge.org/projects/ireport/tracker/view.php?id=5707)有没有人遇到过这个错误并想出一个解决方法或者至少解释一下发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:06:01.653

只是为了让这个问题有答案：

我的解决方案是修改我的 SQL 查询以在一个查询中返回我的所有数据并删除子报告。对于一个相当重要的功能，这似乎是一个愚蠢的解决方法，但与此同时它正在工作。

# macos - Meta Key 取消 Emacs 中的 Ctrl

> ID：10690838
> 
> 赞同：0
> 
> 时间：2012-05-21T18:47:14.430
> 
> 标签：macos, emacs

我正在尝试在 emacs中覆盖`Control`- `Meta`-`Down Arrow`和`Control`- `Meta`- 。`Up Arrow`

我已经尝试了各种组合：`(global-set-key [C-M-down] 'function)`和：`"\C-\M-<down>"`等......但它总是说：`ESC undefined`。这意味着它只考虑到`M-<down>`. 为什么它忽略了`Control`？？我已经为此工作了 3 个小时，并且关于键绑定的 emacs 在线文档令人惊讶地绝对可怕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T20:30:21.703

在终端中使用 Emacs（您在评论中提到）时，您仅限于终端能够执行的键序列。不幸的是，C-down 不是其中之一……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:18:33.257

Mac OS X 上的某些 Emacs 版本在限定符键方面存在问题。尝试将其更新到较新的版本。

我在从源存档构建的 Emacs 上对此进行了测试，它按预期工作。（在这种情况下，它只是说`function`未定义，这是预期的。）

# c - 如何在 C 中获得足以用于统计模拟的伪随机均匀分布整数？

> ID：10690839
> 
> 赞同：3
> 
> 时间：2012-05-21T18:47:15.180
> 
> 标签：c, random

我正在编写蒙特卡罗模拟，并且需要大量随机位来生成均匀分布在 {1,2,...,N} 上的整数，其中 N<40。使用 C 函数的问题在于，使用标准技术`rand`我会浪费很多非常好的位。`rand % N`生成整数的更好方法是什么？

我不需要加密安全的随机数，但我不希望它们扭曲我的结果。另外，我不考虑从 random.org 下载一批位作为解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:51:27.610

`rand % N`不工作；它会扭曲您的结果，除非`RAND_MAX + 1`是`N`.

正确的方法是找出`N`小于的最大倍数`RAND_MAX`，然后生成随机数，直到小于该值。只有这样你才应该做模运算。这为您提供了 50% 的最坏情况拒绝率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:57:01.743

除了奥利的回答：

如果您非常关心位，那么您可以手动管理一个位队列，只检索下一个数字所需的数量（即上（log2（n）））。

但你应该确保你的发电机足够好。简单的线性同余（sp？）生成器在较高位上比较低位更好（请参阅注释），因此您当前的模块化除法方法在那里更有意义。

numeric recipes 在这方面有一个非常好的部分，并且非常容易阅读（不确定它是否提到了保存位，但作为一般参考）。

**如果您不确定是否需要**更新，我现在不会担心这个（除非您从了解您的特定背景的人那里得到更好的建议）。****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:02:06.420

以 base40表示`rand`，并将数字作为数字。删除任何不完整的数字，也就是说，如果第一个数字没有完整范围 [0..39]，则删除第一个数字，如果第一个数字取其最高可能值，则删除整个随机数（例如，如果 RAND_MAX 是 base40 是21 23 05 06，删除所有具有最高基数 40 位 21) 的数字。**

# python - IDLE 在读取 url 时崩溃

> ID：10690840
> 
> 赞同：1
> 
> 时间：2012-05-21T18:47:15.540
> 
> 标签：python, python-2.7, python-idle

我正在尝试为我的 8 年级计算机课程（12-13 岁）创建关于字符串操作的课程。我希望他们从网站上抓取文本，并认为使用战争与和平可能很酷。但是，当我尝试读取 URL 时，IDLE 不断崩溃。它在 Mac 上的终端或 PC 上的命令行中运行良好（运行需要 5-10 秒），但是出于网络安全原因，我的学生无法访问命令行。

我的代码看起来像这样

```
import urllib2
site = urllib2.urlopen('http://www.gutenberg.org/cache/epub/2600/pg2600.txt')
site.read() 
```

有人有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:15:56.803

您是否阅读过有关在 OS X 下使用 IDLE 的[页面？](http://www.python.org/getit/mac/tcltk/)如果您还没有安装更新的 Tcl/Tk 包，则需要先安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:20:00.367

我不得不说在 8 年级教 Python 很酷，战争与和平也很酷 :)

不酷的家伙是IDLE（或者我应该说是Tcl/Tk），在处理大量文本打印时会受到影响，战争与和平对他来说太过分了。

尝试限制您打印的文本数量，如下所示：

```
>>> import urllib2
>>> site = urllib2.urlopen('http://www.gutenberg.org/cache/epub/2600/pg2600.txt')
>>> site.read()[:1024] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:05:24.823

您可以逐行阅读整个内容，如下所示：

```
import urllib2

site = urllib2.urlopen('http://www.gutenberg.org/cache/epub/2600/pg2600.txt')
for line in site:
    # print it or do whatever 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T03:26:49.273

在 shell 中显示长行时，IDLE 会变慢。看看这个[问题](https://stackoverflow.com/questions/2743715/python-idle-freezes)。

您需要 IDLE 的[Squeezer](http://bugs.python.org/issue1529353)扩展。[IdleX](http://idlex.sourceforge.net)项目为 IDLE 提供了Squeezer以及其他有用的扩展。

# algorithm - 在最短的时间内找到素数列表

> ID：10690843
> 
> 赞同：8
> 
> 时间：2012-05-21T18:47:28.307
> 
> 标签：algorithm, primes

我读了很多算法来找到素数，结论是如果一个数字不能被它前面的任何一个素数整除，那么它就是一个素数。

我找不到更准确的定义。基于此，我编写了一个代码，它的性能令人满意，直到我通过的最大数字为 1000000。但我相信有更快的算法来找到所有小于给定数字的素数。

以下是我的代码，我可以有更好的版本吗？

```
 public static void main(String[] args) {
    for (int i = 2; i < 100000; i++) {
        if (checkMod(i)) {
            primes.add(i);
        }
    }
}

private static boolean checkMod( int num) {
    for (int i : primes){
        if( num % i == 0){
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-21T22:01:26.740

素数测试的好处是你只除以素数。

```
private static boolean checkMod( int num) {
    for (int i : primes){
        if( num % i == 0){
            return false;
        }
    }
    return true;
} 
```

坏事是你除以目前找到的*所有*素数，即所有小于候选的素数。这意味着对于低于 100 万的最大素数 999983，您除以 78497 个素数以发现这个数字是素数。这是很多工作。事实上，当达到 100 万时，在这个算法中花费在素数上的工作占所有工作的 99.9% 左右，在更高的限制中占比更大。而且该算法几乎是二次的，要`n`以这种方式找到素数，您需要执行大约

```
n² / (2*(log n)²) 
```

师。

一个简单的改进是提前停止除法。令`n`为合数（即大于 1 且除数不是 1 和的数`n`），令`d`为 的除数`n`。

现在，`d`作为整数的除数`n`，`n/d`也是 : 的`n`除数`n/(n/d) = d`。所以我们可以很自然地将 的除数分组`n`为对，每个除数`d`产生对`(d, n/d)`。

对于这样的一对，有两种可能：

1.  `d = n/d`, 这意味着`n = d²`, 或`d = √n`.
2.  两者不同，然后其中一个比另一个小，比如说`d < n/d`。但这立即转化为`d² < n`or `d < √n`。

因此，无论哪种方式，每对除数都包含（至少）一个不超过`√n`，因此，**如果`n`是一个合数，则其最小除数（除 1 之外）不超过`√n`**。

所以我们可以在达到以下条件时停止试用部门`√n`：

```
private static boolean checkMod( int num) {
    for (int i : primes){
        if (i*i > n){
            // We have not found a divisor less than √n, so it's a prime
            return true;
        }
        if( num % i == 0){
            return false;
        }
    }
    return true;
} 
```

注意：这取决于按升序迭代的素数列表。如果语言不能保证这一点，则必须使用不同的方法，通过索引迭代 an`ArrayList`或类似的东西。

在候选的平方根处停止试除法，对于 100 万以下的最大素数 999983，我们现在只需将其除以 1000 以下的 168 个素数。这比以前少了很多工作。在平方根处停止试除法，并且只除以素数，与试除法一样好，并且需要大约

```
2*n^1.5 / (3*(log n)²) 
```

师，因为`n = 1000000`，这是一个大约 750 的因素，还不错，是吗？

但这仍然不是很有效，找到下面所有素数的最有效方法`n`是筛子。实施简单的是经典[的埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。在 O(n*log log n) 操作中找到下面的素数`n`，通过一些增强（预先排除几个小素数的倍数），它的复杂性可以降低到 O(n) 操作。一种具有更好渐近行为的相对较新的筛子[是阿特金筛子](http://en.wikipedia.org/wiki/Sieve_of_Atkin)，它找到了`n`在 O(n) 操作中，或者在 O(n/log log n) 操作中消除一些小素数的倍数的增强。阿特金筛子的实现更复杂，因此埃拉托色尼筛子的良好实现可能比阿特金筛子的简单实现表现更好。对于类似优化级别的实现，性能差异很小，除非限制变大（大于 10 ^(10); 并且在实践中，由于更好的内存访问模式，Eratosthenes 的 Sieve 比 Atkin 的 Sieve 具有更好的扩展性并不少见）。因此，我建议从 Eratosthenes 筛开始，并且仅当尽管诚实地优化优化但其性能仍不能令人满意时，才深入研究 Atkin 筛。或者，如果您不想自己实现它，请找到其他人已经认真调整过的良好实现。

我在一个稍微不同的设置[的答案](https://stackoverflow.com/a/9704912/1011995)中进行了更详细的介绍，问题是找到第 n 个素数。或多或少有效方法的一些实现与该答案相关联，特别是 Eratosthenes 筛的一个或两个可用（尽管没有多少优化）实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:58:58.233

我总是使用 Eratosthenes 筛子：

```
isPrime[100001] // - initially contains only '1' values (1,1,1 ... 1)
isPrime[0] = isPrime[1] = 0 // 0 and 1 are not prime numbers

primes.push(2); //first prime number. 2 is a special prime number because is the only even prime number.
for (i = 2; i * 2 <= 100000; i++) isPrime[i * 2] = 0 // remove all multiples of 2

for (i = 3; i <= 100000; i += 2) // check all odd numbers from 2 to 100000
    if (isPrime[i]) {
        primes.push(i); // add the new prime number to the solution
        for (j = 2; i * j <= 100000; j++) isPrime[i * j] = 0; // remove all i's multiples
    }

return primes 
```

希望你能理解我的评论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:01:07.903

我理解素数是一个只能被自身和数字 1 整除的数字（没有余数）。见[维基百科文章](http://en.wikipedia.org/wiki/Prime_number)

话虽如此，我在第二条评论中不太了解该算法，但对您的算法的一个小改进是将您的 for 循环更改为：

```
for (int i = 5; i < 100000; i = i + 2) {
    if (checkMod(i)) {
        primes.add(i);
    }
} 
```

这是基于这样的假设：1、2 和 3 都是素数，之后的所有偶数都不是素数。这至少将您的算法减半。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-02T06:46:55.817

我想对上面 Benjamin Oman 建议的 0ne 做一个稍微改进的版本，这只是一个修改，以避免检查所有以数字“5”结尾的数字的素数，因为这些数字肯定不是素数，因为它们是可分的5。

```
for (int i = 7;(i < 100000) && (!i%5==0); i = i + 2) {
    if (checkMod(i)) {
        primes.add(i);
    }
} 
```

这是基于 2,3,5 是素数的假设。上面的小改动会减少5的所有因素并提高。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-30T17:01:02.330

[@Daniel Fischer](https://stackoverflow.com/a/10693261/687692)很好地解释了。

来自他的解释的 C++ 实现：

```
#include<iostream>

using namespace std;

long* getListOfPrimeNumbers (long total)
{
  long * primes;
  primes = new long[total];
  int count = 1;
  primes[0] = 2;
  primes[1] = 3;
  while (count < total)
  {
    long composite_number = primes[count] + 2;
    bool is_prime = false;
    while (is_prime == false)
    {
      is_prime = true;
      for (int i = 0; i <= count; i++)
      {
        long prime = primes[i];
        if (prime * prime > composite_number)
        {
          break;
        }
        if (composite_number % prime == 0)
        {
          is_prime = false;
          break;
      }
      }
      if (is_prime == true)
      {
        count++;
        primes[count] = composite_number;
      }
      else
      {
        composite_number += 2;
    }
  }
  }
  return primes;
}

int main()
{
  long * primes;
  int total = 10;
  primes = getListOfPrimeNumbers(total);
  for (int i = 0; i < total; i++){
    cout << primes[i] << "\n";
  }
  return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-15T17:01:41.243

```
import array , math

print("enter a range to find prime numbers")

a= 0
b= 5000
c=0
x=0
k=1
g=[2]
l=0

for I in range( a , b):
    for k in g:
        x=x+1

        if k>2:
            if k > math . sqrt( I ):

                break

        if( I % k==0):

            c=c+1
            break
    if c==0:
        if I!=1:

            g . append( I )

    c=0    
print g

#this algorithm will take only 19600 iteration for a range from 1-5000,which is one of fastest algorithm according to me 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-12T03:47:41.483

我发现数学家说“那”“3 之后的质数总是 6 的倍数的一侧”。5 ,7 素数更接近 6。11,13 也更接近 6 *2。17,19 也接近 6 3。21,23*也接近6*4。我写的都很正常，像这样最多100万，我发现这个算法也对，而且速度更快。

* * *

```
num=1000000
prime=[2,3]
def test(i):
    for j in prime:
        if(i%j==0):
            break
        if(j*j>i):
            prime.append(i)
            break
    return 0
for i in range (6,num,6):
    i=i-1
    test(i)
    i=i+2
    test(i)
    i=i-1

print(prime) 
```

# mysql - 请解释 select max(...) ... group by in sql 的功能

> ID：10690848
> 
> 赞同：-1
> 
> 时间：2012-05-21T18:47:49.507
> 
> 标签：mysql, sql

我很欣赏这在许多人看来可能是一个愚蠢的问题，但我无法在任何地方找到关于“分组依据”对 SQL 语句中的 select max(...) 的影响的明确解释。

我有以下数据（还有另一个未显示的 mediumblob 类型的列图像）：

```
id  title                      test_id 

1  bomb                             0 
2  Soft watch                       2 
3  Dali                             1 
4  Narciss                          1 
5  The Woman In Green               0 
6  A summer in Vetheuil             0 
7  Artist's Garden                  2 
8  Beech Forest                     2 
9  Claude Monet                     0 
```

我知道我是否表演

```
select max(id) from images 
where image is not null; 
```

我得到 id 的最大值，即：

```
max(id) 

9 
```

但是有人可以解释一下我表演时发生了什么

```
select max(id), title, test_id 
from images 
where image is not null 
group by id; 
```

我发现 max(id) 没有用处（结果如下所示）？

```
 max(id)  title                      test_id 

  1  bomb                              0 
  2  Soft watch                        2 
  3  Dali                              1 
  4  Narciss                           1 
  5  The Woman In Green                0 
  6  A summer in Vetheuil              0 
  7  Artist's Garden                   2 
  8  Beech Forest                      2 
  9  Claude Monet                      0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:56:40.450

在使用子句的情况下，`MAX()`本质`GROUP BY`上是告诉查询引擎如何对项目进行分组，从中确定最大值。在您的第一个示例中，您只选择了一个列，因此不需要分组。但是在您的第二个示例中，您有多个列。因此，您需要告诉查询引擎如何确定要比较哪些以找到最大值。

你告诉它按`id`列分组。这意味着它将比较具有相同记录的记录，`id`并为每个唯一的记录提供最大的记录`id`。由于每条记录都有不同的`id`，因此您基本上没有对该子句做任何事情。

`id`它用of将所有记录分组`1`（这是一条记录），并返回该`id`组中具有最大值的记录（即该记录）。它对 , 等做同样的`2`事情`3`。

对于此处显示的三列，唯一可以对记录进行分组的地方是`test_id`列上。像这样的东西：

```
SELECT MAX(id), title, test_id
FROM images
WHERE image IS NOT null 
GROUP BY test_id 
```

这将按 对它们进行分组`test_id`，因此结果将包括记录 6（0 的最大值`id`）`test_id`、4（1 的最大值`id`）`test_id`和 8（2 的最大值`id`）`test_id`。通过根据列中的三个唯一值将记录分成这三个组`test_id`，它可以有效地找到`id`每个组内的“最大值”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:54:20.857

是的，在您的示例中，它没有任何用处。

您按 ID 分组，然后找到最大 ID。但这没有意义，因为每个 ID 只有一个。通常 MAX() 用于数量，例如价格或商品数量等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:54:22.727

Group by 不用于这种查询 它用于这样的查询

```
OId OrderDate   OrderPrice  Customer

1   2008/11/12  1000    Hansen

2   2008/10/23  1600    Nilsen

3   2008/09/02  700 Hansen

4   2008/09/03  300 Hansen

5   2008/08/30  2000    Jensen

6   2008/10/04  100 Nilsen 
```

现在，如果您想获得每个客户购买的材料总和，您将使用 group by

SELECT Customer,SUM(OrderPrice) FROM Orders GROUP BY Customer

```
customer    SUM(OrderPrice)

Hansen  2000

Nilsen  1700

Jensen  2000 
```

**在上述情况下，id 是唯一的，因此按 id 分组将没有任何意义**

# php - 如何使用 similar_text() 改进 PHP 字符串匹配？

> ID：10690854
> 
> 赞同：2
> 
> 时间：2012-05-21T18:48:31.827
> 
> 标签：php, text, string-matching

我正在使用 PHP 的similar_text() 调用来比较两个字符串，但是，我没有得到足够好的结果，例如，我得到的最好结果是 80.95% 的匹配，我希望看到 100%。

我可以使用哪些其他函数来将字符串深入到核心？

```
<!-- Overcast, Rain or Showers compared Overcast, Rain or Showers is 80.9523809524 -->
<!-- Overcast, Risk of Rain or Showers compared Overcast, Rain or Showers is 86.2068965517 -->
<!-- Overcast, Chance of Rain or Showers compared Overcast, Rain or Showers is 83.3333333333 --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:50:57.723

Levenshtein 距离：[http://php.net/manual/en/function.levenshtein.php](http://php.net/manual/en/function.levenshtein.php)

它与[similar_text()](http://php.net/manual/en/function.similar-text.php)相反，因此 0% 表示没有区别。

```
// <!-- Overcast, Rain or Showers compared Overcast, Rain or Showers is 0 -->
// <!-- Overcast, Risk of Rain or Showers compared Overcast, Rain or Showers is 11 -->
// <!-- Overcast, Chance of Rain or Showers compared Overcast, Rain or Showers is 13 --> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T18:58:36.810

[Levenshtein 距离](http://php.net/manual/en/function.levenshtein.php)是比较字符串的好方法。它比 快`similar_text()`，并且它允许您通过加权算法的不同部分来控制其输出。

要将 Levenshtein 距离转换为可用的“匹配”百分比，您可以将其表示为源字符串平均长度的一小部分：

```
// Assume $src1 and $src2 are your source strings and at least one is non-empty

$avgLength = ( strlen( $src1 ) + strlen( $src2 ) ) / 2;
$matchFraction = 1 - ( levenshtein( $src1, $src2 ) / $avgLength );

//$matchFraction is now between 0 and 1, with 1 being equal strings and 0 being totally different 
```

# powershell - 自动 Outlook 首次打开

> ID：10690855
> 
> 赞同：4
> 
> 时间：2012-05-21T18:48:35.240
> 
> 标签：powershell, scripting, outlook

我想配置一个脚本，该脚本基本上将首次打开 Outlook 2010 对话框并接受默认值。我们有一个当前正在运行的交换服务器，它使用用户的 AD 信息填充第一次字段。基本上我想在powershell中编写一个脚本，接受AD填写的默认值并完成安装。安装完成后，Outlook 将设置用户邮箱的副本，并且他们的所有邮件都将被拉到计算机上。

我一直在尝试并尝试在 powershell 中完成对默认值的接受，但无济于事。是否有任何可能的方法将 powershell 脚本与 Outlook 链接并让它接受 GUI 对话框？

除了 powershell 中的一个小初始化脚本之外，我没有编写任何代码来执行此操作。我也是一个 powershell 新手，所以我知道如何创建一个 com 对象并调用该对象，以便它可以打开 Outlook，但这是我所能做到的。

有人可以给我一些帮助吗？这是我所拥有的，但它确实效果不佳：

 `````
$mail = new-object -com Outlook.Application
$namespace = $mail.GetNamespace("MAPI")
$folder = $namespace.GetDefaultFolder("olFolderInbox")
$explorer = $folder.GetExplorer()
$explorer.Display() 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:55:54.737

我不确定您对 PowerShell 的了解程度，但请查看[此链接](http://msdn.microsoft.com/en-us/magazine/cc163301.aspx)。

考虑其他 Windows GUI 脚本引擎，它们应该很容易解决这个问题 - 比 PowerShell 脚本更容易。

尝试：

*   [自动热键](http://www.autohotkey.com/)
*   [AutoIt](http://www.autoitscript.com/site/autoit/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:30:19.137

我最终在[http://wasp.codeplex.com/](http://wasp.codeplex.com/)使用了 WASP 管理单元。它通过查找寡妇并向这些窗口发送命令来实现 UI 自动化。它易于使用，使像我这样的任务更容易。它只是一个 32 位的 .dll，但它适用于 Powershell >= 2.0。谢谢大家的有用意见。``

# android - 自动总和复选框

> ID：10690863
> 
> 赞同：-3
> 
> 时间：2012-05-21T18:49:29.267
> 
> 标签：android

所以我想要完成的事情应该是这样的：[http ://www.javascriptbank.com/simple-javascript-auto-sum-with-checkboxes.html/en/](http://www.javascriptbank.com/simple-javascript-auto-sum-with-checkboxes.html/en/)

不幸的是，如果那可能的话，我不知道，所以我将不胜感激任何帮助或想法。在此先感谢。到目前为止我所拥有的一些东西：

```
CheckBox chkone;
CheckBox chktwo;
CheckBox chkthree;
TextView tv;
OnClickListener checkBoxListener;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    chkone = (CheckBox)findViewById(R.id.chk1);
    chktwo = (CheckBox)findViewById(R.id.chk2);
    thkthree = (CheckBox)findViewById(R.id.chk3);

checkBoxListener = new OnClickListener() {

        //@Override
        public void onClick(View v) {

            tv = (TextView)findViewById(R.id.tv1);

            if (chkone.isChecked())
            {   
              // something

            }

        }
    };

    chkone.setOnClickListener(checkBoxListener);
    chktwo.setOnClickListener(checkBoxListener);
    chkthree.setOnClickListener(checkBoxListener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:06:32.830

您应该`CompoundButton's` `OnCheckedChangeListener`改为实现该接口，以获取有关复选框状态更改的通知。

假设您没有`CheckBox`通过在某处存储数值来扩展类以简化工作，您需要解析复选框的标签（文本）以访问它的值，并根据选中状态增加/减少总和：

```
private TextView sumText;
private float currentSum = 0;
private final OnCheckedChangeListener checkBoxListener = 
    new OnCheckedChangeListener()
{
    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if (isChecked)
            currentSum += getNumber(buttonView);
        else
            currentSum -= getNumber(buttonView);
        // TODO: you need to initialize this TextView in your
        // onCreate method!
        sumText.setText(Float.toString(currentSum));
    }
};

private float getNumber(final CompoundButton chk)
{
    try
    {
        return Float.parseFloat(chk.getText().toString());
    }
    catch (NumberFormatException e)
    {
        return 0;
    }
} 
```

**请注意**，要使其按预期工作，您应该修改`getNumber`方法以检索实际在该`CheckBox`实例下的值！

# maven - 由于依赖关系，无法在 Netbeans 中构建 Maven 项目

> ID：10690864
> 
> 赞同：2
> 
> 时间：2012-05-21T18:49:30.280
> 
> 标签：maven, netbeans, build, dependencies

在 Netbeans 中构建我的 Maven 项目时遇到问题。在我的固定电脑上它工作得很好，但在我的笔记本电脑上我不能让它工作。我收到以下错误：

无法在项目 SnakeAppWebpage 上执行目标：无法解析项目 se.chalmers.snake:SnakeAppWebpage:war:1.0 的依赖项：无法收集 [org.apache.derby:derbyclient:jar:10.6.1.0（编译）的依赖项，org .eclipse.persistence:eclipselink:jar:2.2.0（提供）、org.eclipse.persistence:javax.persistence:jar:2.0.3（提供）、org.eclipse.persistence:org.eclipse.persistence.jpa.modelgen .processor:jar:2.2.0（提供）、javax:javaee-web-api:jar:6.0（提供）、junit:junit:jar:4.8.2（测试）]：无法读取 org.eclipse 的工件描述符.persistence:eclipselink:jar:2.2.0: 无法将工件 org.eclipse.persistence:eclipselink:pom:2.2.0 从/到 eclipselink (http://ftp.ing.umu.se/mirror/eclipse/rt /eclipselink/maven.repo/)：传输文件时出错：连接超时：连接-> [帮助 1]

要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。

有关错误和可能的解决方案的更多信息，请阅读以下文章：[帮助 1] [http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException](http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException)

我已经手动添加了所有的 jar 文件，但它仍然不起作用。我在两台计算机上都有相同的操作系统和 Netbeans 版本。此外，当我尝试在笔记本电脑上构建项目时，Netbeans 会尝试从指定的存储库下载依赖项，然后再向我显示错误。存储库 URL 是有效的。在我的另一台计算机上构建时，它不执行此操作，它只是启动应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:51:26.947

Maven 只需要在每台机器上下载任何特定的库/依赖项一次。在您的台式计算机上，它可能在过去的某个时间下载了这些存储库，并且它们仍然存储在您的计算机上。但是，在您的笔记本电脑上，似乎无法从远程存储中检索存储库（检查您的互联网连接？“传输文件时出错：连接超时”似乎是相关错误）。如果您手动添加了 jar，请确保将它们添加到正确的 maven 存储库位置并遵循正确的目录结构。

# r - 如何在 R 中运行 shell 脚本并将输出放入表中？

> ID：10690867
> 
> 赞同：6
> 
> 时间：2012-05-21T18:49:32.560
> 
> 标签：r, shell

我知道在**R**中运行 shell 脚本是使用系统命令：

```
my.table <- system(command,intern=TRUE) 
```

但是，如果我的“命令”的结果是打印出一个表，并且我希望 R 将表直接读入它自己的数据结构中。（类似于数据框）有没有简单的方法可以做到这一点？因为“table”中的当前输出是一个字符串表。我想要的是**R**对象作为 read.table()。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T18:54:36.907

如果结果 'table' 有空格分隔符和回车符来标记行，那么您应该将结果传递给 read.table 的 'text' 参数：

```
 inp.tbl <- read.table(text = system(command,intern=TRUE) ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T22:29:44.463

我希望 using`pipe`在内存和时间上比`system`with更有效`intern`

```
inp.tbl <- read.table(pipe(command) ) 
```

# asp.net - 在 ASP.Net gridview 中显示存储过程结果

> ID：10690871
> 
> 赞同：1
> 
> 时间：2012-05-21T18:49:55.023
> 
> 标签：asp.net, sql-server, stored-procedures, gridview

我一直在努力在网格视图中显示一些 SQL Server 存储过程结果。我收到以下错误：

> 在所选数据源上找不到名为“Hora”的字段或属性

我已经彻底检查了任何错别字或拼写错误。但是有一件事：存储过程显示一个表，该表的源是另一个临时表。我认为这个问题与此有关。

这是我的gridview`aspx`代码：

```
<asp:GridView ID="gvPosicion" runat="server" AutoGenerateColumns="False" 
        Width="915px" CellPadding="4" ForeColor="#333333" GridLines="None">
        <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
        <Columns>
            <asp:BoundField DataField="Hora" HeaderText="Hora" SortExpression="Hora" 
                ReadOnly="True" />
            <asp:BoundField DataField="Direccion" HeaderText="Direccion" 
                SortExpression="Direccion" />
            <asp:BoundField DataField="Posicion" HeaderText="Posicion" 
                SortExpression="Posicion" />
        </Columns>
        <EditRowStyle BackColor="#999999" />
        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#E9E7E2" />
        <SortedAscendingHeaderStyle BackColor="#506C8C" />
        <SortedDescendingCellStyle BackColor="#FFFDF8" />
        <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
    </asp:GridView> 
```

这是我对点击事件的代码隐藏：

```
System.Data.DataTable dt = reporte.GetData(int.Parse(ddlChofer.SelectedValue), int.Parse(ddlVehiculo.SelectedValue), Convert.ToDateTime(txtFecha.Text));

if (dt.Rows.Count > 0)
{
   foreach (DataRow dr in dt.Rows)
   {
       string salida = dr["Salida"].ToString();
       string llegada = dr["Llegada"].ToString();

       if (salida != "" && llegada != "")
       {
          DataSetTableAdapters.sp_ChecarVehiculosTableAdapter cv = new DataSetTableAdapters.sp_ChecarVehiculosTableAdapter();
          gvPosicion.DataSource = cv.GetData(int.Parse(ddlVehiculo.SelectedValue), DateTime.Parse(salida), DateTime.Parse(llegada)).ToString();
          gvPosicion.DataBind(); 
```

这是我的存储过程，我认为这是一团糟 LOL，但实际上我只是一个 SQL 初学者。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      <Author,,Name>
-- Create date: <Create Date,,>
-- Description: <Description,,>
-- =============================================
ALTER PROCEDURE [dbo].[sp_ChecarVehiculos]
@carro int,
@f1 datetime,
@f2 datetime
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
SELECT cve_punto_gps,fecha_servidor, latitud, longitud, velocidad,direccion
INTO #temp
FROM [desarrollo].[dbo].[vehiculo_punto_gps]
WHERE cve_vehiculo=@carro
and fecha_servidor>=@f1
and fecha_servidor<=@f2
DECLARE @cve_inicio as int,
    @cve_final as int,
    @fecha_inicio as datetime,
    @fecha_final as datetime,
    @latitud_inicio as decimal(18,15),
    @latitud_final as decimal (18,15),
    @longitud_inicio as decimal (18,15),
    @longitud_final as decimal (18,15),
    @velocidad_inicio as int,
    @velocidad_final as int,
    @direccion_inicio as nvarchar(150),
    @direccion_final as nvarchar(150)
DECLARE VehicleCursor CURSOR FAST_FORWARD FOR 
SELECT  cve_punto_gps, 
    fecha_servidor,
    latitud,
    longitud,
    velocidad,
    direccion
FROM #temp
ORDER BY cve_punto_gps
 OPEN VehicleCursor FETCH NEXT FROM VehicleCursor INTO @cve_inicio, @fecha_inicio,        @latitud_inicio, @longitud_inicio, @velocidad_inicio, @direccion_inicio
FETCH NEXT FROM VehicleCursor INTO @cve_final, @fecha_final, @latitud_final, @longitud_final,@velocidad_final, @direccion_final
create table #tempb(cve int, fecha datetime, posicion nvarchar(60), velocidad int, direccion nvarchar(150) )
WHILE @@FETCH_STATUS = 0 BEGIN
    IF (round(@latitud_inicio,4,1) != round(@latitud_final,4,1))
    BEGIN   
        IF DATEDIFF(MI,@fecha_inicio,@fecha_final) >=3
        BEGIN           
            IF @velocidad_inicio !=0
            BEGIN
                declare @posicion nvarchar(60)=(cast(@latitud_inicio as nvarchar(30)) +' '+ cast(@longitud_inicio as nvarchar(30)))

                insert #tempb values(@cve_inicio,@fecha_inicio, @posicion,@velocidad_inicio, @direccion_inicio)
                --PRINT 'Posición: '+cast(@fecha_inicio as nvarchar(30))+' en '+@direccion_inicio+'('+@posicion+')';
            END     
        END
    END
    SET @cve_inicio = @cve_final
    SET @fecha_inicio = @fecha_final
    SET @latitud_inicio=@latitud_final
    SET @longitud_inicio=@longitud_final
    SET @velocidad_inicio=@velocidad_final
    SET @direccion_inicio=@direccion_final
    FETCH NEXT FROM VehicleCursor INTO @cve_final, @fecha_final, @latitud_final, @longitud_final, @velocidad_final, @direccion_final
END   
CLOSE VehicleCursor 
DEALLOCATE VehicleCursor
select convert(varchar(8),fecha,108) as 'Hora', direccion as 'Direccion', posicion as   'Posicion'  /*into #tempc */from #tempb
/*select * from #tempc*/
END 
```

如果您想知道我为什么制作该存储过程，请查看以下[帖子](https://stackoverflow.com/questions/10625931/how-to-make-a-sql-loop-query-to-check-difference-between-values)。此外，如果我在 SQL 中使用一些参数执行存储过程，我不会收到错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:09:11.777

除了我在评论中提供的建议之外，我*认为*这将给出您所追求的结果，而不需要您的过程中的所有变量、游标和临时表。请尝试一下，如果我对您的任何逻辑的解释有误，请告诉我。

```
ALTER PROCEDURE [dbo].[sp_ChecarVehiculos]
  @carro int,
  @f1 datetime,
  @f2 datetime
AS
BEGIN
  SET NOCOUNT ON;

  ;WITH d AS
  (
    SELECT 
        cve_punto_gps, fecha_servidor, velocidad, direccion, latitud, longitud
        posicion = RTRIM(latitud) + ' ' + RTRIM(longitud),
        rn = ROW_NUMBER() OVER (ORDER BY fecha_servidor)
        FROM [desarrollo].[dbo].[vehiculo_punto_gps]
        WHERE carro = @carro
        AND fecha_servidor >= @f1
        AND fecha_servidor <= @f2
  )
  SELECT 
    Hora = CONVERT(CHAR(8), d.fecha_servidor, 108),
    d.direccion, d.posicion
  FROM d LEFT OUTER JOIN d AS d2
  ON d.rn = d2.rn - 1
  WHERE d.rn = 1
  OR 
  (
    DATEDIFF(MINUTE, d.fecha_servidor, COALESCE(d2.fecha_servidor, GETDATE())) >= 3 
    AND ROUND(d.latitud, 4, 1) <> ROUND(d2.latitud, 4, 1)
    AND d.velocidad <> 0
  )
  ORDER BY d.fecha_servidor;
END
GO 
```

如果它不正确，那么根据您现有的代码纠正我所犯的任何错误都不需要太多的编辑。这不仅在 SQL Server 中效率更高，而且还应该使 C# 代码更容易处理输出。

**显示所选行之间的时间延迟的编辑**示例：

```
ALTER PROCEDURE [dbo].[sp_ChecarVehiculos]
  @carro int,
  @f1 datetime,
  @f2 datetime
AS
BEGIN
  SET NOCOUNT ON;

  ;WITH d AS
  (
    SELECT 
        cve_punto_gps, fecha_servidor, velocidad, direccion, latitud, longitud
        posicion = RTRIM(latitud) + ' ' + RTRIM(longitud),
        rn = ROW_NUMBER() OVER (ORDER BY fecha_servidor)
        FROM [desarrollo].[dbo].[vehiculo_punto_gps]
        WHERE cve_vehiculo = @carro
        AND fecha_servidor >= @f1
        AND fecha_servidor <= @f2
  ), s AS
  (
    SELECT 
      Hora = CONVERT(CHAR(8), d.fecha_servidor, 108),
      d.direccion, d.posicion, d.fecha_servidor,
      rn = ROW_NUMBER() OVER (ORDER BY d.fecha_servidor)
    FROM d LEFT OUTER JOIN d AS d2
    ON d.rn = d2.rn - 1
    WHERE d.rn = 1
    OR 
    (
      DATEDIFF(MINUTE, d.fecha_servidor, 
        COALESCE(d2.fecha_servidor, GETDATE())) >= 3 
      AND ROUND(d.latitud, 4, 1) <> ROUND(d2.latitud, 4, 1)
      AND d.velocidad <> 0
    )
  )
  SELECT s.Hora, delta = DATEDIFF(MINUTE, s.fecha_servidor, s2.fecha_servidor),
    s.direccion, s.posicion
  FROM s LEFT OUTER JOIN s as s2 ON s.rn = s2.rn - 1
  ORDER BY s.rn;
END
GO 
```

# c - 我应该如何从 C 程序内部调用外部程序

> ID：10690875
> 
> 赞同：3
> 
> 时间：2012-05-21T18:50:23.407
> 
> 标签：c

我目前正在将一些 bash 脚本移到 C 中，其中一个调用外部 python 脚本，例如 ./remoteclient01a.py "remotecommand player /something something"

```
./remoteclient01a.py "remotecommand player /something something" 
```

我一直在寻找一种在 C 中执行这个命令的方法，但我不确定我应该使用哪个，因为 System() 似乎是最好的，但是有几页说这是一个糟糕的选择在某些情况下，如果有人可以推荐一种方法来做到这一点，我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:53:05.363

在 C 中执行此操作的唯一可移植方法是`system`和`popen`。该函数`popen`允许您读取命令的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:05:24.237

*   对于 unixish 环境中的简单问题，请尝试 popen()。

从手册页

```
 The popen() function opens a process by creating a pipe, forking and involking the
shell. 
```

*   还有其他方法可以在 C 中调用外部程序。请参阅以下教程，解释所有方法：

    [用 C(Linux) 执行程序](http://www.gidforums.com/t-3369.html)

# html - HTACCESS 从 url 中删除 ext html

> ID：10690876
> 
> 赞同：0
> 
> 时间：2012-05-21T18:50:29.303
> 
> 标签：html, apache, .htaccess, url

我有这样的网址：

```
site.com/user.html?id=2

site.com/user.html 
```

我只需要返回删除“.html”的同一页面，因此：

```
site.com/user 
```

如果在“.html”之后有一些东西，我需要添加反斜杠

```
site.com/user/?id=2 
```

无论如何在htaccess中这样做？

我只使用 js 和 html 页面（没有服务器端语言）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:00:55.047

[从Apache .htacces 重写规则](https://stackoverflow.com/questions/6062537/htacces-rewrite-rule-remove-php-ending)复制、粘贴和编辑以删除 .php 文件扩展名

```
Options +FollowSymlinks -MultiViews
RewriteEngine on

# to make `/path/index.html` to /path/
RewriteCond %{THE_REQUEST} ^GET\s(.*/)index\.html [NC]
RewriteRule . %1 [NE,R=301,L]

RewriteCond %{THE_REQUEST} ^GET\s.+\.html [NC]
RewriteRule ^(.+)\.html$ /$1 [NE,R=301,L,NC]

RewriteCond %{REQUEST_URI} !\.html$ [NC]
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule . %{REQUEST_URI}.html [L] 
```

# iphone - 使用 CGAffineTransform 变换视图坐标

> ID：10690883
> 
> 赞同：1
> 
> 时间：2012-05-21T18:51:21.417
> 
> 标签：iphone, uiscrollview, cgaffinetransform

我在玩[Apple 的 ScrollViewSuite](http://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Introduction/Intro.html)、TapToZoom 应用程序，试图在缩放的图像上放置一个视图。这就是我想要做的：双击，将图像旋转 pi/2，将其缩放 8 倍，然后在转换后的图像顶部的 scrollView 中放置一个子视图。

我知道视图在*原始*坐标系中所需的框架。所以我需要在缩放后将这些坐标转换为新系统......

从 ScrollViewSuite...

```
- (void)handleDoubleTap:(UIGestureRecognizer *)gestureRecognizer {
    // double tap zooms in
    float newScale = [imageScrollView zoomScale] * 8;  // my custom zoom
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [imageScrollView zoomToRect:zoomRect animated:YES];
    [self rotateView:imageScrollView by:M_PI_2];      // then the twist
} 
```

我的轮换代码...

```
- (void)rotateView:(UIView *)anImageView by:(CGFloat)spin {

    [UIView animateWithDuration:0.5 delay: 0.0
                        options: UIViewAnimationOptionAllowUserInteraction 
                     animations:^{
                         anImageView.transform = CGAffineTransformMakeRotation(spin);
                     }
                     completion:^(BOOL finished){}];
} 
```

然后，在缩放完成后，将视图放置在原始坐标系中的已知位置。这是我想我需要帮助的地方...

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)_scale {

    CGFloat coX = scrollView.contentOffset.x;
    CGFloat coY = scrollView.contentOffset.y;

    // try to build the forward transformation that got us here, then invert it
    CGAffineTransform rotate = CGAffineTransformMakeRotation(M_PI_2);
    CGAffineTransform scale = CGAffineTransformMakeScale(_scale, _scale);

    // should these be negative?  some confusion here.
    CGAffineTransform translate = CGAffineTransformMakeTranslation(coX, coY);

    // what's the right order of concatenation on these?  more confusion
    CGAffineTransform aft0 = CGAffineTransformConcat(rotate, scale);
    CGAffineTransform aft1 = CGAffineTransformConcat(aft0, translate);

    // invert it
    CGAffineTransform aft = CGAffineTransformInvert(aft1);

    // this is the fixed rect in original coordinate system of the image
    // the image is at 0,0 320, 300 in the view, so this will only work
    // when the image is at the origin...  need to fix that later,too.
    CGRect rect = CGRectMake(248, 40, 90, 160);
    CGRect xformRect = CGRectApplyAffineTransform(rect, aft);

    // build a subview with this rect
    UIView *newView = [scrollView viewWithTag:888];
    if (!newView) {
        newView = [[UIView alloc] initWithFrame:xformRect];
        newView.backgroundColor = [UIColor yellowColor];
        newView.tag = 888;
        [scrollView addSubview:newView];
    } else {
        newView.frame = xformRect;
    }
    // see where it landed...
    NSLog(@"%f,%f  %f,%f", xformRect.origin.x, xformRect.origin.y, xformRect.size.width, xformRect.size.height);
} 
```

# javascript - 使用 data- 属性会影响应用程序的性能吗？

> ID：10690887
> 
> 赞同：3
> 
> 时间：2012-05-21T18:51:30.693
> 
> 标签：javascript, performance

我计划使用 data- 属性来识别 DOM 中用于 selenium 测试用例的元素。属性的使用会影响应用程序的性能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T18:52:41.983

一点也不，你会很好地使用`data-*`属性。但是，您应该注意，使用 syntax`$.data(theInput, 'someData');`比使用 syntax 快得多`theInput.data('someData');`，如本[jsPerf](http://jsperf.com/jquery-data-vs-attr/2)中所示。

# sockets - websocket客户端程序总是报错

> ID：10690888
> 
> 赞同：1
> 
> 时间：2012-05-21T18:51:32.550
> 
> 标签：sockets, serversocket

我正在尝试在 python 中学习 Web 套接字 API 编程，并且我正在我的计算机上运行服务器代码和客户端代码，但我总是遇到错误。

**我正在运行的服务器代码是：**

```
import socket      

server = socket.socket(socket.AF_INET,socket.SOCK_STREAM)     
host = socket.gethostname()                      
port = 2727                       
server.bind(('', port))             
server.listen(5)            
while True:
    c, addr = server.accept()   
    print 'Got connection from', addr
    data = c.recv(4096)
    if not data: break
    c.send(data)

c.close() 
```

**客户端代码为：**

```
import socket

client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
host = socket.gethostname()
port = 2727
client.connect((host, port))
client.send('helllo')
print client.recv(4096)
client.close 
```

**总是出现的错误是：**

> Traceback（最近一次调用最后一次）：文件“C:\Python27\FILES\simpleclient.py”，第 9 行，打印 client.recv(4096) 错误：[Errno 10054] 现有连接被远程主机强行关闭

任何解决此问题的帮助将不胜感激！

# c++ - 对 void 及其含义的困惑。

> ID：10690891
> 
> 赞同：5
> 
> 时间：2012-05-21T18:51:34.770
> 
> 标签：c++

我对编程非常陌生，并且对 void 的作用感到困惑，我知道当您将 void 放在函数前面时，这意味着“它什么也不返回”但是如果函数什么都不返回，那么编写函数的意义何在？ ? 无论如何，我在作业中遇到了这个问题，并试图回答它，但需要一些关于一般概念的帮助。任何帮助都会很棒，请尽量避免使用技术术语，我是这里的新手。

这个函数有什么作用？

```
void add2numbers(double a, double b) 
    { 
       double sum; 
       sum = a + b; 
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T18:53:28.803

```
void ReturnsNothing() 
{
     cout << "Hello!";
} 
```

如您所见，此函数不*返回*任何内容，但这并不意味着该函数*什么*也不做。

函数只不过是将常用例程组合在一起的代码重构。如果我经常打印“Hello”，我会将打印“Hello”的代码放在一个函数中。如果我正在计算两个数字的总和，我将编写代码来执行此操作并在函数中*返回结果。*这都是关于你想要什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T18:54:53.180

拥有 void 函数的原因有很多，其中一些具有“非纯”副作用：

```
int i=9;
void f() {
    ++i;
} 
```

在这种情况下`i`，可以是全局或类数据成员。

另一个是可观察的效果

```
void f() {
    std::cout <<"hello world" << std::endl;
} 
```

void 函数可以作用于引用或指针值。

```
void f(int& i) {
   ++i;
} 
```

它也可以抛出，尽管不要这样做以进行流量控制。

```
void f() {
   while(is_not_broke()) {
        //...
   }
   throw std::exception(); //it broke
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T18:53:26.643

void函数的目的是实现一个副作用（例如，修改引用参数或全局变量，执行I/O等系统调用等），而不是返回值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T18:56:54.580

在 C/C++ 的上下文中使用术语*函数*相当令人困惑，因为它不同意作为“返回值的东西”的函数的数学概念。C/C++ 调用的*返回 void 的函数*对应于其他语言中的*过程概念。*

函数和过程的主要区别在于函数调用是一个*表达式*，而过程调用是一个*语句*，而函数被调用是为了它们的返回值，而过程是为了它们*的副作用*而调用的（例如产生输出，改变状态，等等）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T18:54:09.990

具有 void 返回值的函数对于它的副作用很有用。例如考虑标准库函数`exit`：

```
void exit(int status) 
```

此函数不会向您返回任何值，但它对于终止进程的副作用仍然很有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-21T18:54:12.247

该功能一无所获-但是如果您编写了

```
void add2numbers(double a, double b, double &sum) 
{        
   sum = a + b; 
} 
```

它会给你总和，是否更容易返回值或使用参数取决于函数

通常，如果有多个结果，您会使用一个参数，但假设您有一个可能无法回答的数学例程。

```
bool sqrt(double value, double &answer)
{
   if value < 0.0 ) {
      return false;
   } else {
      answer = real_sqrt_function(value);
      return true;
   }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-21T18:55:57.437

你在正确的路线上 - 该函数没有完成任何事情，因为它计算了一些东西，但是一些东西然后被扔掉了。

返回 void 的函数可能很有用，因为它们可能具有“副作用”。这意味着发生的事情不是函数的输入或输出。例如，它可以写入文件或发送电子邮件。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-21T19:04:12.413

在这种情况下，函数有点用词不当。也许称它为一种方法更好。您可以调用对象上的方法来更改其状态，即其字段（或属性）的值。因此，您可能有一个具有 x 和 y 坐标属性的对象和一个名为 Move 的方法，该方法采用参数 xDelta 和 yDelta。

使用 2、3 调用 Move 将导致 2 添加到您的 X 属性，并将 3 添加到您的 Y 属性。所以对象的状态已经改变，Move 返回一个值是没有意义的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-21T19:39:05.293

你是完全正确的：计算一个什么都不返回的函数是没有意义的——如果你在谈论数学函数。但与许多数学概念一样，“函数”在许多编程语言中仅与数学函数相关，但行为或多或少有细微的不同。

我相信最好用一种不会弄错的语言来解释它*：*[Haskell](http://www.haskell.org/haskellwiki/Haskell)就是这样一种语言。那是一种纯粹的函数式语言，这意味着 Haskell 函数也是一个数学函数。事实上，您可以编写更数学风格的 Haskell 函数，例如

```
my_tan(x) = sin(x)/cos(x)          -- or (preferred):    tan' x = sin x / cos x 
```

比在 C++ 中

```
double my_tan(double x) { return sin(x)/cos(x); } 
```

但是，在计算机程序中，您不只是想计算函数，对吗？您还想完成一些事情，例如在屏幕上显示某些内容，通过网络发送数据，从传感器读取值等。在 Haskell 中，这些事情与纯函数很好地分开，它们都在所谓的*`IO`monad*中起作用. 例如，[`putStrLn`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3aputStrLn)打印一行字符的函数有 type `String -> IO()`。意思是，它接受 a`String`作为它的参数并返回一个操作，当从函数`IO`调用时打印出该字符串，没有其他内容（括号大致是C++ 中的内容）。`main``()``void`

这种做 IO 的方式有很多好处，但大多数编程语言都比较草率：它们允许*所有*函数做 IO，也可以改变程序的内部状态。因此，在 C++ 中，您可以简单地拥有一个 function `void putStrLn(std::string)`，它还“返回”一个打印字符串的 IO 操作，但没有明确告诉您。这样做的好处是，在考虑 IO monad 的实际含义时，您不需要在大脑中打多个结（它相当迂回）。此外，如果您能够真正告诉机器“现在就执行这个过程序列！”，那么许多算法都可以运行得更快。而不是仅仅在 IO monad 中询问一些计算的结果。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-21T19:10:09.020

我目前使用一个名为[VTK](http://www.vtk.org)的可视化库。我通常编写 void 函数来更新显示在屏幕上的图形的某些部分。我还使用 void 函数来处理 Qt 中的 GUI 交互。例如，如果您单击一个按钮，GUI 上的某些文本会更新。

# r - R 无法写入 csv 或 RData 文件

> ID：10690893
> 
> 赞同：5
> 
> 时间：2012-05-21T18:51:56.033
> 
> 标签：r, csv, save

我正在尝试将数据框的内容写入 RData 文件。

```
> save(collector2, file="collect2.RData")
Error in save(collector2, file = "collect2.RData") : 
  error writing to connection 
```

作为第二个选项，我尝试使用：

```
> write.csv(collector2, file="collect2.csv", row.names=FALSE) 
```

这将执行并创建一个文件，但它是空的。

这是我要编写的数据框：

```
> head(collector2)
          adQuer1     rowid adQueravg
1 2485651|2284211 132000001 0.0000000
2      20888541|7 132000002 0.0152358
3      20888541|7 132987430 0.0152358
4      20888541|7 132595958 0.0152358
5      20888541|7 132621111 0.0152358
6      20888541|7 132464740 0.0152358
> str(collector2)
'data.frame':   17639105 obs. of  3 variables:
 $ adQuer1  : Factor w/ 7241603 levels "1000467|130715",..: 430440 229948 229948 229948 229948 229948 229948 229948 229948 229948 ...
 $ rowid    : num  1.32e+08 1.32e+08 1.33e+08 1.33e+08 1.33e+08 ...
 $ adQueravg: num  0 0.0152 0.0152 0.0152 0.0152 ... 
```

这是我的系统信息：

```
> version
               _                            
platform       x86_64-unknown-linux-gnu     
arch           x86_64                       
os             linux-gnu                    
system         x86_64, linux-gnu            
status                                      
major          2                            
minor          15.0                         
year           2012                         
month          03                           
day            30                           
svn rev        58871                        
language       R                            
version.string R version 2.15.0 (2012-03-30)
nickname 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T04:31:02.373

原来是硬盘问题。我没有空间了，这就是信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T22:32:11.310

那么你试图坚持的对象并不小。

无论如何，我无法重现错误，但对象大小是我能看到的唯一可能来源。

数据框中的中间列*rowid*是*double*类型，它们是 64 位整数，因此该列包含对象大小的大部分。这表明*将此列与*其他两个分开保存 - 即，在两个单独的 RData 对象中，每个对象都保存到自己的文件中。

其次，也许通过传入适当的参数来尝试***压缩以******保存***

使用具有大约的数据框。300K 行和 9 列，我使用***gzip***压缩将 RData 对象的大小减少了*1/2 多一点。*

 *一个有 9 列 x 大约的数据框。300,000 行

```
> dim(FG1)
[1] 282816      9

> dfile = "fg1.RData" 
```

创建大小为 131 KB 的*RData*文件：

> 保存（FG1，文件=dfile）

创建大小为 66 KB 的*RData*文件：

> 保存（FG1，文件=dfile，压缩=真，压缩级别=9）*

# jquery - 单选按钮在选择时更改表格行背景颜色，并在选择另一个单选按钮时恢复正常而没有“悬停”干扰

> ID：10690898
> 
> 赞同：0
> 
> 时间：2012-05-21T18:52:04.397
> 
> 标签：jquery, html, asp.net, html-table, radio-button

我查看了其他类似的问题，但对我没有帮助。当我将单选按钮选择为蓝色时，我想更改表格行的背景颜色。当我单击另一个单选按钮时，我希望另一个恢复正常，而我单击的那个单选按钮变为蓝色。到目前为止，当我选择一个单选按钮时，它就像悬停一样，一旦我将鼠标移开，它就会恢复到原来的颜色。我希望能够悬停并单击：

```
 <script>
    $(document).ready(function () {
    $("tr").not(':first').hover(
      function () {
        $(this).css("background","lightblue");
      }, 
      function () {
        $(this).css("background","");
      }
    );

    $('input:radio').change(function () {
        $(this).closest('tr').siblings().css('background-color', 'white')
                     .end().css('background-color', 'darkblue');
    });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:55:41.527

```
$('input:radio').change(function () {
    var parentTr = $(this).closest('tr');
    parentTr.siblings().css('background-color', 'white');
    parentTr.css('background-color', 'darkblue');
}); 
```

您还可以使用`end`：

```
$('input:radio').change(function () {
    $(this).closest('tr').siblings().css('background-color', 'white')
                         .end().css('background-color', 'darkblue');
}); 
```

但它通常更难阅读和维护。

*   请注意，您最好使用 css 类而不是更改 css 内联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:33:32.883

试试这个：

```
<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

</head>

<body>

<table>
<tr><td><input class="rad" type="radio" name="blah" value="1"/>One</td></tr>
<tr><td><input class="rad" type="radio" name="blah" value="2"/>Two</td></tr>
<tr><td><input class="rad" type="radio" name="blah" value="3"/>Three</td></tr>
</table>

</body>

</html>

<script type="text/javascript">
$("tr").not(':first').hover(
function () {
if($(this).css("background-color") != 'darkblue'){
$(this).css("background","lightblue");
}
}, 
function () {
if($(this).css("background-color") != 'darkblue'){
$(this).css("background","");
}
}
);
$(".rad").unbind("click").click(function(){
$('tr').css('background-color', 'white');
$(this).closest('tr').css('background-color', 'darkblue');
});
</script> 
```

# java - arraylist 并发修改

> ID：10690903
> 
> 赞同：0
> 
> 时间：2012-05-21T18:52:37.080
> 
> 标签：java, arraylist, iterator, concurrentmodification

我正在用java创建一个多线程聊天。当用户 u1 向用户 u2 发送消息但用户 u2 未连接时，用户 u1 将消息发送到服务器，用户 u2 连接到服务器后将收到消息。未发送的消息被添加到 ArrayList。用户连接后，他会检查自己是否是待处理消息的收件人。如果是，则将消息发送给他，然后从待处理消息列表中删除。我就是这样做的：

```
for(Iterator<String> itpendingmsgs = pendingmsgs.iterator(); itpendingmsgs.hasNext();) {
    String pendingmsg = itpendingmsgs.next();
    String dest = pendingmsg.substring(4);              
    if (protocol.author.equals(dest)) {
        sendMsg(msg);
        pendingmsgs.remove(pendingmsg);
    }
} 
```

这就是我得到的：

```
Exception in thread "Thread-3" java.util.ConcurrentModificationException
at java.util.AbstractList$Itr.checkForComodification(Unknown Source)
at java.util.AbstractList$Itr.next(Unknown Source)
at ChatServer$ClientConnection.run(ChatServer.java:383)
at java.lang.Thread.run(Unknown Source) 
```

我如何解决它？是因为我正在使用迭代器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T18:54:00.077

而不是这个

```
pendingmsgs.remove(pendingmsg); 
```

采用

```
itpendingmsgs.remove(); 
```

`Iterator`of**[快速失败](http://en.wikipedia.org/wiki/Fail-fast)**`ArrayList`，因此当您迭代使用if 底层被任何方法修改时，它会抛出并退出。`ArrayList``Iterator``ArrayList``add``remove``Iterator``ConcurrentModificationException`

在您当前的实现中，当您在特定条件下循环遍历列表时，您还通过调用`remove`底层而`ArrayList`不是调用`remove`.`Iterator`

来自 Java 文档：

> 此类的 iterator 和 listIterator 方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间对列表进行结构修改，除了通过迭代器自己的 remove 或 add 方法之外的任何方式，迭代器将抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。
> 
> 请注意，不能保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证。快速失败的迭代器会尽最大努力抛出 ConcurrentModificationException。因此，编写一个依赖于这个异常的正确性的程序是错误的：迭代器的快速失败行为应该只用于检测错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:54:15.990

除非通过`iterator`实例本身，否则在迭代列表时不允许修改列表。你必须打电话`itpendingmsgs.remove()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T18:55:55.660

代替

```
pendingmsgs.remove(pendingmsg); 
```

采用

```
itpendingmsgs.remove(); 
```

看：

> 如果在迭代过程中以除调用此方法之外的任何方式修改了基础集合，则迭代器的行为是未指定的。

来源：[Java API](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#remove%28%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T19:02:24.360

基于文档[ArrayList api](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html) *此类的迭代器和 listIterator 方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间对 list 进行结构修改，除了通过迭代器自己的 remove 或 add 方法之外的任何方式，迭代器将抛出 ConcurrentModificationException。*

迭代时不应从集合中删除。您应该改用迭代器的 remove 方法。

```
for(Iterator<String> itpendingmsgs = pendingmsgs.iterator(); itpendingmsgs.hasNext();) {
String pendingmsg = itpendingmsgs.next();
String dest = pendingmsg.substring(4);              
if (protocol.author.equals(dest)) {
    sendMsg(msg);
    itpendingmsgs.remove();
} 
```

}

# opencv - 稳定时opencv warpPerspective扭曲的结果

> ID：10690907
> 
> 赞同：1
> 
> 时间：2012-05-21T18:52:55.020
> 
> 标签：opencv

我正在使用 calcOpticalFlowPyrLK、findHomography、warpPerspective 来进行视频稳定。

结果是稳定的，这很好，但也有失真。在顶部/底部，您可以看到边缘，因为 warpPerspective 进行了转换，有时中间被压碎了。

我知道这是它所做的一部分，但我想知道我能做些什么来消除这些丑陋的扭曲？

在最坏的情况下，我可以告诉它只转换类似于相位相关的 2D 吗？

更新：链接到示例图像：http: [//i.imgur.com/OuuGU.png](http://i.imgur.com/OuuGU.png)

更新2，代码：

```
calcOpticalFlowPyrLK(baseGray, gray, points[0], points[1], status, err, winSize, 3, termcrit, 0, 0.001);
lastHomography = findHomography(points[0], points[1], CV_RANSAC, 3); 
warpPerspective(image, newImage, lastHomography, image.size(), WARP_INVERSE_MAP, BORDER_TRANSPARENT); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T11:56:40.607

您提供的图像中的伪影看起来像是最近邻插值的结果。

根据文档的默认插值方法应该是线性插值。但是通过使用`WARP_INVERSE_MAP`标志而不明确指定插值方法，opencv 似乎使用最近邻法代替。

因此，您的问题的解决方案是还明确指定插值方法。

```
warpPerspective(image, newImage, lastHomography, image.size(), INTER_LINEAR | WARP_INVERSE_MAP, BORDER_TRANSPARENT); 
```

# javascript - 从 ListView 的 ItemInvoked 事件 [Windows 8 Metro HTML5] 以编程方式设置输入框的焦点

> ID：10690909
> 
> 赞同：18
> 
> 时间：2012-05-21T18:52:56.833
> 
> 标签：javascript, html, input, windows-8, microsoft-metro

**编辑：** 如果您还没有在 Windows 8 上开发，请不要尝试回答这个问题。不要投票。甚至不要阅读它。这不是 Web 应用程序或网站，也不能在浏览器中运行。请停止对您不理解的内容进行投票。这是在 Windows 运行时环境中运行的 Windows 8 METRO HTML5/js 应用程序。

**原始问题：**

我希望光标在输入框中“闪烁”，准备接收输入。我正在使用 javascript 来设置焦点。这不起作用：

```
document.querySelector("#input-box").focus(); 
```

有谁知道为什么？焦点方法不是正确的方法吗？

谢谢你。

**编辑#2：**所以它肯定与我试图将焦点设置到 ListView 的“itemInvoked”事件的输入这一事实有关。事件正确触发，元素可从事件处理程序访问，并且该行在执行时没有错误。我可以从标准按钮单击事件将焦点设置到我的输入标记，但不能从 ItemInvoked 事件。所以问题是，为什么我不能在这个事件处理程序中设置焦点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T06:58:17.833

我创建了这个只有一个文本框的小测试项目，并在 onload 中以与您完全相同的方式设置焦点。我在模拟器和本地机器上都试过了，这两种方法似乎都有效。

如果这个项目在你的机器上为你工作，你能试试吗？您能否给我们一些关于您何时尝试设定焦点的更多见解？现在在你的问题中没有太多关于它何时发生的信息。

您可以在此处下载示例[http://www.playingwith.net/Temp/TestFocusApplication.zip](http://www.playingwith.net/Temp/TestFocusApplication.zip)

**更新**

好的，似乎找到了它，如果您使用将焦点设置到文本框的函数调用 msSetImmediate 函数，它似乎可以工作。我没有上传测试示例的选项，因此您可以在下面找到我附加 ItemInvoked 处理程序并调用 setFocus 函数的代码。

```
 var listView = document.getElementById("basicListView");

                listView.winControl.addEventListener("iteminvoked", function (evt) {
                    if (listView.winControl.selection.count() > 0) {                        
                        msSetImmediate(setFocus);
                    }
                });

function setFocus() {
            //Set focus on input textbox;
            var input = document.querySelector("#input-box")
            input.focus();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:25:38.600

你在哪个版本？消费者预览或其他开发预览？我在 DP6（MS 合作伙伴可用）并且 JS 标准的东西有效。

在我的 default.html 中，我有：

```
<input id="input1" type="text" value="one"/>
<input id="input2" type="text" value="two"/>
<input id="focus_btn" type="button" value="Set focus 1"/>
<input id="focus_btn2" type="button" value="Set focus 2"/> 
```

然后在我的 default.js 中，在 app-launched-loaded 样板函数中，我有：

```
document.querySelector('#focus_btn').addEventListener('click', function () {
    var input1 = document.querySelector('#input1').focus();            
});

document.querySelector('#focus_btn2').addEventListener('click', function () {
    var input1 = document.querySelector('#input2').focus();            
}); 
```

我认为它不起作用的唯一原因是元素在准备好之前就被访问了。那个或更早的构建错误。如果你想看，我有解决方案： [http](http://www.mediafire.com/?ghz49gtfxlgr7en) ://www.mediafire.com/? ghz49gtfxlgr7en 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:55:03.927

尝试使用非 jquery 常规 javascript，例如

`document.getElementById( 'myElementsID' ).focus()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:59:32.733

试试这个看看是否有帮助：

```
if(document.createEvent) 
{
    document.getElementById('input-box').dispatchEvent('DOMFocusIn');
} 
else 
{
    document.getElementById('input-box').fireEvent('DOMFocusIn', event);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-31T09:47:52.033

虽然这个问题很老了。但我努力寻找解决方案。

首先 .focus() 不返回任何值，它只是设置焦点并返回 undefined 。

此外，当我们将焦点设置在某个元素上时，请确保该元素存在 tabindex，否则它不会聚焦（主要在 chrome 中）。

可以使用以下查询：

```
element.querySelector('#label').setAttribute('tabindex','0');
element.querySelector('#label').focus(); 
```

# java - 在 iframe 中打开 URL 的 Java 小程序

> ID：10690911
> 
> 赞同：0
> 
> 时间：2012-05-21T18:53:09.077
> 
> 标签：java, iframe, applet

是否有可能有一个 Java 小程序（*不是 JavaScript*）在浏览器的 iFrame 中打开一个 URL？在 jQuery 中等价的东西：

```
$('<frame />').attr('src', 'http://example.com').attachTo('body') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:04:41.130

Java 小程序可以调用 javascript 方法。这样你就可以实现你喜欢的，这让你可以做你所要求的。

为此，您需要显式地授予小程序访问页面上的脚本的权限。例如，这可以通过将以下行添加到 applet OBJECT 标记来完成。

```
<PARAM NAME="MAYSCRIPT" VALUE="true"> 
```

有关如何使用旧的 APPLET 标记或新的 EMBED 标记执行此操作的示例，请参见此处：[http ://docs.oracle.com/javase/1.4.2/docs/guide/plugin/developer_guide/java_js.html](http://docs.oracle.com/javase/1.4.2/docs/guide/plugin/developer_guide/java_js.html)

之后，您可以通过 JSObject 从小程序访问脚本，如下例所示：

```
import netscape.javascript.*;
import java.applet.*;
import java.awt.*;
class MyApplet extends Applet {
     public void init() {
         JSObject win = JSObject.getWindow(this);
         JSObject doc = (JSObject) win.getMember("document");
         JSObject loc = (JSObject) doc.getMember("location");

         String s = (String) loc.getMember("href");  // document.location.href
         win.call("f", null);                      // Call f() in HTML page
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:05:35.543

是的。

[http://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html)

# assembly - 无效的堆栈指针（即使是暂时的）会导致您丢失数据吗？

> ID：10690912
> 
> 赞同：1
> 
> 时间：2012-05-21T18:53:11.153
> 
> 标签：assembly, x86, stack, interrupt, corruption

假设——出于某种奇怪的原因——`ESP`某个函数的堆栈指针 , 暂时递减，然后再次递增：

```
;; ... we're saving registers ...
push EAX
push EBX
push ECX
push EDX

add ESP, 4        ;; Whoops!
sub ESP, 4        ;; Ah, we're fine; we restored it... or are we? 
```

现在，完全有可能在您的*子*指令之前立即触发*中断。*

 *如果我理解正确，中断会导致 CPU 将一些值压入堆栈。

这是否意味着您的堆栈现在将被损坏？或者操作系统是否以某种方式（如何？）使用不同的堆栈/内存来存储程序的上下文？还是取决于 CPU 的权限级别？（如果有，怎么做？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:19:53.120

减去然后在 x86 上添加就可以了。这就是局部变量的处理方式。但是，如果发生中断，则相反，您可能会损坏数据。add 将释放空间，然后 sub 将再次分配它（不再保证内容相同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:08:51.363

如果上述代码位于 ISR 的开头，其中断描述符被标记为“中断门”而不是“陷阱门”，并且您尚未在 ISR 中手动启用中断（使用`STI`or `POPF`），则不会问题，因为在这种情况下，CPU`FLAGS.IF`在进入 ISR 时会自动清除。

此外，如果中断导致保护级别之间的转换，CPU 将内容（`EFLAGS`、返回地址和 old `SS:ESP`）推送到新堆栈上，旧堆栈保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T20:01:49.060

对于共享堆栈（程序和中断），您绝不希望堆栈指针本身指向您不希望更改或丢失的信息。可能会出现中断并修改该信息。因此，减去，意味着将堆栈指针移离重要数据更远，这很好，当完成该新分配后，您可以返回堆栈指针，同时了解该新数据不再可用。在弄乱堆栈指针本身时，您还需要小心对齐。在这种情况下，一个子然后一个添加是可以的，一个添加然后一个子可能会导致数据丢失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T03:26:18.047

[这篇文章](http://virtualdub.org/blog/pivot/entry.php?id=85)似乎与上面的答案相矛盾，指出这实际上是**安全**的：

> ### 如果发生中断，您不会搞砸吗？
> 
> 那些在 DOS 中编程的人可能在这一点上对中断的可能性感到不安。通常，像这样重用堆栈指针是一个非常糟糕的主意，因为您不知道何时可能发生中断，而当一个中断发生时，CPU 会尽职尽责地将当前程序计数器和标志压入堆栈。如果您重用了 ESP，这将导致随机数据结构被丢弃。在这种环境中，ESP 必须始终指向有效且足够的堆栈空间来服务中断，并且当这不成立时，必须禁用中断。长时间禁用中断运行会降低系统响应能力（丢失中断和不良延迟），并且对于大型例程来说不实用。
> 
> 但是，我们在这里以保护模式运行。
> 
> 在 Win32 的用户空间中运行时，中断不会压入用户堆栈，而是压入内核堆栈。如果您考虑一下，则不可能使用用户堆栈。如果线程超出堆栈空间，或者甚至只是有一个无效堆栈，当 CPU 尝试推送 EIP 和 EFLAGS 时，它会出现页面错误，并且您不能在中断处理程序中出现页面错误。因此，调度程序可以在无堆栈例程运行时进行任意数量的上下文切换，并且任何指向 ESP 的数据结构都不会受到影响。*

# asp.net-mvc - 从 MVC 4.0 ActionFilterAttribute 如何获取当前的 ApiController

> ID：10690916
> 
> 赞同：1
> 
> 时间：2012-05-21T18:53:22.347
> 
> 标签：asp.net-mvc

我正在尝试从 filterContext 获取当前的 ApiController。它公开了一个控制器属性，但 ApiController 实现了一些 httpcontroller 接口并且不存在。

```
 public override void OnActionExecuting(ActionExecutingContext filterContext) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:56:17.280

您会将其转换回您的 ApiController。像这样的东西：

```
var apiController = filterContext.Controller as ApiController;
if (apiController != null)
{
    //Do something with apiController.
} 
```

# java - 我可以在没有 ORM 的情况下将 XML 导入 Postgres 数据库吗？

> ID：10690922
> 
> 赞同：0
> 
> 时间：2012-05-21T18:53:37.873
> 
> 标签：java, xml, postgresql, jdbc, xml-parsing

我需要能够从/向 PostgresQL 数据库导出/导入 XML 数据。我查看了[文档](http://www.postgresql.org/docs/current/static/functions-xml.html#FUNCTIONS-XML-MAPPING "PostgreSQL 9.1.3 文档 - XML 函数和运算符")，并确定我可以使用查询或表轻松导出 XML。将相同的 XML 重新导入同一个数据库的最简单方法是什么？我不喜欢使用第三方工具，但会处理 PG 函数和 Java/JDBC 中的任何编程。

我会投票给任何提供有用信息的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:40:40.663

创建一个“临时”表，其中包含您要导入的每个 XML 的一行。

然后使用 XML 函数（例如 xpath_table）将该 XML 列分割成行和列。像这样的东西：

```
-- make sure xpath_table is available
create extension xml2;

-- create XML staging table
create table xml_test (id integer, xml text);

-- create sample XML document
insert into xml_test  (id, data)
values
(1, '<person-list>
    <person>
        <id>42</id>
        <firstname>Arthur</firstname>
        <lastname>Dent</lastname>
    </person>
    <person>
        <id>43</id>
        <firstname>Zaphod</firstname>
        <lastname>Beeblebrox</lastname>
    </person>
</person-list>'
); 
```

现在，如果您的目标表是例如：

```
create table person 
(
   id integer not null primary key,
   firstname text,
   lastname text
); 
```

您可以使用：

```
insert into person (id, firstname, lastname)
select person_id, firstname, lastname
from xpath_table('id', 'xml', 'xml_test', 
                 '/person-list/person/id|/person-list/person/firstname|/person-list/person/lastname', 'id=1')
as t (docid integer, person_id integer, firstname text, lastname text) 
```

该函数的最后一个参数`id=1`是从包含 XML 列的表中选择的行。如果那里有多个文档，则需要选择与 xpath 表达式匹配的文档

您还可以使用核心 XML 函数在没有 xml2 模块的情况下创建类似的视图。请参阅 user272735 在评论中发布的链接。

# java - 实时刷新frame内容

> ID：10690923
> 
> 赞同：1
> 
> 时间：2012-05-21T18:53:41.807
> 
> 标签：java, swing

> **可能的重复：**
> [什么时候需要在 swing 组件上调用 revalidate() 以使其刷新，什么时候不需要？](https://stackoverflow.com/questions/5769813/when-does-one-need-to-call-revalidate-on-a-swing-component-to-make-it-refresh)

我正在用Java制作一个资源管理器程序，它的工作原理如下
我输入用户的路径，设置用户按下输入路径后的文本框并计算文件夹的列表并创建应该显示的相应标签在窗口上，
但应用程序不显示文件夹的新内容，如果我更改文本，那么它会指向一个新目录，所以当我按下回车键时，它必须显示加载的新目录的内容，但只有在调整大小后窗口是否显示框架的新内容

代码如下

```
package explorer;
import java.io.*;
import java.util.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class Explorer extends JFrame{
    File file;
    Scanner scan;
    String path;
    String [] listOfFiles;
    JTextField txtPath;
    JLabel lblLocation;
    JLabel child[];
    JPanel childPanel;
    JPanel masterPanel;

       public Explorer(){
      lblLocation = new JLabel("Location: ");
      /*
       * the declaration of panels
       */
          masterPanel = new JPanel();
          childPanel = new JPanel();
      JPanel panel = new JPanel();

      /*declaration of other components*/

      txtPath = new JTextField("",20);
      /*addition of components to panel for layout*/
      panel.add(lblLocation);
      panel.add(txtPath);
      /*adding to master panel, for sophisticated layout*/
      masterPanel.add(panel, BorderLayout.NORTH);
      masterPanel.add(childPanel, BorderLayout.SOUTH);  

      getContentPane().add(masterPanel);
      /*this place from where address is fetched like /home/revolution/Desktop etc on ubuntu*/

      txtPath.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent ev){
            childPanel.removeAll();
        path = new String(txtPath.getText());//the absolute path
        file = new File(path);
        File childFiles[];
        String name = path.substring(path.lastIndexOf('/')+1, path.length());//the name of the directory being displayed
        setTitle(name);

          if(!file.isDirectory()){
            JOptionPane.showMessageDialog(null, "Error file is not a directory");
          } else {
            listOfFiles = file.list();
            child = new JLabel[listOfFiles.length];// labels equal to the number fo files and with name of the coresponding file/folder

            childFiles = new File[listOfFiles.length];//references to files
            childPanel.setLayout(new GridLayout(listOfFiles.length/2,listOfFiles.length/2));//setting grid layout

            for(int i=0; i<listOfFiles.length;i++){
                childFiles[i] = new File(listOfFiles[i]);
                child[i] = new JLabel(listOfFiles[i]);
                child[i].setToolTipText(childFiles[i].isFile()?"File":"Folder");
                childPanel.add(child[i]);
            }
          childPanel.setVisible(true);  
          }

        }
      });
}   
} 
```

怎么了？我怎样才能“刷新”窗口的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:56:58.420

我认为你需要[`revalidate()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#revalidate%28%29)面板。

更准确地说，您可以在动作监听器的末尾添加`childPanel.revalidate();`

```
 childPanel.setVisible(true);  
      }
    }
    childPanel.revalidate();
}); 
```

# android-ndk - 如何在运行 openGL ES 2.0 时在 Android 中显示文本输入对话框

> ID：10690929
> 
> 赞同：1
> 
> 时间：2012-05-21T18:54:11.760
> 
> 标签：android-ndk, opengl-es-2.0

我正在使用 NDK 在 Android 上开发一个 openGL ES 2.0 应用程序。我需要输入文本，我希望调出本机虚拟键盘来输入此文本。我怎样才能做到这一点 ？

# php - MySQL复杂的IF语句

> ID：10690939
> 
> 赞同：0
> 
> 时间：2012-05-21T18:54:32.663
> 
> 标签：php, mysql

当然这很容易，但该死的，如果我能让它工作的话。

本质上想要做以下事情：（显然这不是有效的MySQL）

```
IF config.a = 1

THEN
UPDATE users SET something = 1
WHERE userlevel > 2 
```

因此涉及到两个表，但 config 表和 users 表之间没有真正的联系。配置表有两列，值和设置。如果设置为“a”的行的值为“1”，我们只希望查询的其余部分运行。所以这并不像我们正在寻找一个特定的领域那么容易。

询问的原因是我需要在多个数据库中作为单个查询有条件地运行它，这将比 PHP 依次连接到每个数据库更容易。

一如既往地感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:59:21.587

如果您真的想要在单个查询中使用它，那将是：

```
UPDATE  u.users
CROSS JOIN
        (
        SELECT  1 AS r
        FROM    config
        WHERE   setting = 'a'
                AND value = 1
        ) q
SET     u.something = 1
WHERE   u.userlevel > 2 
```

但是，当您需要执行两个查询并一个接一个地运行（或不运行）时，这是其中一种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:57:36.877

```
UPDATE users u, 
(
 SELECT a FROM config
) c 
SET u.something = 1
WHERE 
    u.userlevel > 2 
AND c.a = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:05:50.987

我认为这对你有用。

```
SELECT (
    UPDATE users SET something = 1 WHERE users.id = config.user_id
) AS updated
FROM config
WHERE userlevel > 2 AND config.a = 1 
```

如果 config 具有 userId，这将起作用，然后，您在子查询中使用该 ID。

# android - Android UI 依赖于来自 web 服务的数据 - 数据不会及时返回

> ID：10690940
> 
> 赞同：0
> 
> 时间：2012-05-21T18:54:34.297
> 
> 标签：android, android-asynctask

我的应用程序中有一个屏幕，它只是一堆链接。我被指示从 Web 服务获取 URL，以便可以随时更改它们，并且无需更改 android 代码。我的问题是虽然我从 AsyncTask 请求数据，但在用户访问屏幕之前它没有返回，然后链接要么不存在，要么返回到我输入的硬编码资源。有没有更好的方法来获取数据会影响这样的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:57:43.003

为什么不只是放入一个进度对话框，然后在`onPostExecute`? 这样链接总是存在的，他们无法提前打电话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:04:33.250

缓存链接可能是个好主意，这样屏幕就不会是空白的，至少在您第一次运行应用程序之后是这样。您可以在用户每次打开页面时更新列表。

# linux - blktrace 只能跟踪一个特定的进程吗？

> ID：10690943
> 
> 赞同：1
> 
> 时间：2012-05-21T18:54:42.127
> 
> 标签：linux, io, trace, dump, blktrace

blktrace 只能跟踪一个特定的进程吗？现在 blktrace 将所有 io 活动转储出去，这需要花费大量时间使用 blkparse 来解析它。但是我们只对一个特定的过程感兴趣。有没有办法将 blktrace 配置为仅跟踪该进程？

谢谢，杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:03:38.390

使用 blkparse 的“-o”选项来避免将数据输出到标准输出。这减少了 blkparse 所需的时间。我能够在 30 秒内解析 72MB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:11:15.907

不，blktrace 在设备上工作，因为它是一个 i/o 性能工具，而不是一个进程。我猜你必须配置一个进程来使用一个特定的块设备，但如果你可以的话，没有其他进程可以做类似的事情。

# sql - 安装 SSIS

> ID：10690945
> 
> 赞同：4
> 
> 时间：2012-05-21T18:54:45.597
> 
> 标签：sql, ssis

我已经安装了 Sql server 2008 R2 Express 版本。是否可以使用此设置安装 Sql Server 集成服务？

如果没有，我该如何安装 SSIS？是否获得许可？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T18:55:48.220

**SSIS**已获得许可 - 没有免费版本。您需要 Developer、Standard 或 Enterprise 许可证。有关 SSIS 功能参考，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/cc645993%28v=SQL.110%29.aspx#SSIS)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T22:23:15.823

如果您只想学习，可以使用开发者版。Enterprise 与 Developer 之间的唯一限制或区别是许可证。您不能在开发以外的环境中使用 Developer，或者您违反了您的许可协议。否则，它的功能与企业版完全相同。

# php - php会话在firefox中不起作用

> ID：10690957
> 
> 赞同：2
> 
> 时间：2012-05-21T18:55:22.103
> 
> 标签：php, session

第 1 页的会话：

```
<?php
    session_start('seguimento');
    $_SESSION['seguimento'] = 'lojas';
?> 
```

第 2 页的会话：

```
<?php
    session_start('seguimento');

    if($_SESSION['seguimento']!=='lojas'){
        echo 'some html code'
    }
    else{
        echo 'another html code'
    }
?> 
```

我尝试使用它在会话为空时显示“一些 html 代码”，并在会话为`LOJA`空时显示“另一个 html”。该会话适用于 IE、chrome、opera 和 safari，但不适用于 Firefox。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:08:01.977

检查服务器的日期设置。检查计算机的日期设置。如果您的服务器日期和时间设置关闭，PHP 可能会在过去设置会话 cookie，从而删除会话 cookie。Firefox 对此更敏感。IE 不是。这在过去发生在我身上好几次了。这是某种内容管理系统的一部分吗？

# sharepoint - 第一列作为 SharePoint 视图中的链接

> ID：10690961
> 
> 赞同：2
> 
> 时间：2012-05-21T18:55:33.703
> 
> 标签：sharepoint, sharepoint-2010

我创建了一个包含以下两列的自定义列表。

```
Col 1
Col 2 
```

在默认视图中，“标题”列是查看项目的链接。我已从此视图中删除了此列，但无法将 Col 1 设置为查看项目的链接。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T07:09:32.717

看看这篇[文章](http://kamilmka.wordpress.com/2011/04/20/enable-context-menu-in-a-custom-column/)。这应该可以帮助您更改 SharePoint 列表中的链接项目。

# spring - Spring Pre/Post 方法安全注释不起作用

> ID：10690962
> 
> 赞同：2
> 
> 时间：2012-05-21T18:55:35.593
> 
> 标签：spring, spring-security

我似乎无法让 Spring Pre/Post 方法安全注释起作用。我已阅读有关该主题的所有相关 stackoverflow 问题，主要建议是确保在与您希望保护的 bean 相同的上下文中启用 global-method-security。我的 dispatcher-servlet.xml 有以下内容：

```
 <context:component-scan base-package="com.package.path" />
  <context:annotation-config />
  <security:global-method-security pre-post-annotations="enabled" /> 
```

有问题的 bean 在“com.package.path”中。我知道 Spring 正在正确地创建它们的实例，因为注入工作得很好，并且请求正在由预期的类提供服务。

因此，这是“com.package.path”中的示例服务类：

```
@Controller
@RequestMapping("/article")
public class ArticleServiceImpl extends GWTController implements ArticleService {
    @Autowired
    public ArticleServiceImpl(DataSource ds) {

    }

    @Override
    @PreAuthorize("hasRole('ROLE_BASIC_USER')")
    public Article save(Article article) {

    }

} 
```

保存方法上的注释不起作用。几个重要的注意事项：

*   我正在使用 GWT，尽管从我读过的内容来看，这并不重要。
*   我的方法安全性在另一个类似的项目中运行良好。唯一的区别是在另一个项目中有一个 DAO 层，而在这个项目中没有。正是在这一层，我有注释安全工作。但是，只要 Spring 负责创建 bean，这应该是什么“层”并不重要，对吧？
*   上面的接口“ArticleService”是一个GWT服务接口。我试过把注释放在那里，但这也不起作用。

如果需要，这是上面引用的我的 GWTController 类：

```
package com.areahomeschoolers.baconbits.server.spring;

import javax.servlet.ServletConfig;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.context.ServletConfigAware;
import org.springframework.web.context.ServletContextAware;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.Controller;

import com.areahomeschoolers.baconbits.server.util.ServerContext;

import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

/**
 * Spring controller class that handles all requests and passes them on to GWT. Also initializes server context.
 */
public class GWTController extends RemoteServiceServlet implements ServletConfigAware, ServletContextAware, Controller, RemoteService {

    private static final long serialVersionUID = 1L;

    protected ServletContext servletContext;

    @Override
    public ServletContext getServletContext() {
        return servletContext;
    }

    // Call GWT's RemoteService doPost() method and return null.
    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
        // load our ServerContext with current request, response, session, user, appContext, etc.
        ServerContext.loadContext(request, response, servletContext);
        try {
            doPost(request, response);
        } finally {
            ServerContext.unloadContext();
        }
        return null; // response handled by GWT RPC over XmlHttpRequest
    }

    @Override
    public void setServletConfig(ServletConfig conf) {
        try {
            super.init(conf);
        } catch (ServletException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void setServletContext(ServletContext servletContext) {
        this.servletContext = servletContext;
    }

    @Override
    protected void checkPermutationStrongName() throws SecurityException {
        return;
    }

    @Override
    protected void doUnexpectedFailure(Throwable e) {
        e.printStackTrace();
        super.doUnexpectedFailure(e);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:17:26.210

Spring Security 提供的安全方面继承了 Spring Framework 基于代理的 AOP 支持的所有限制。特别是，方面不适用于发生在对象“内部”的调用（除非您使用 AspectJ 编织），请参阅[7.6.1 了解 AOP 代理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-understanding-aop-proxies)。

因此，如果您想以这种方式使用安全方面，则需要使用从外部调用您的服务的 GWT 集成机制，即不需要您的服务扩展的机制`RemoteServiceServlet`。

[spring4gwt 之](http://code.google.com/p/spring4gwt/wiki/SimpleRPCExample)类的东西应该可以正常工作。

# linq-to-xml - 使用 Linq 将 XML 字符串转换为对象列表

> ID：10690965
> 
> 赞同：1
> 
> 时间：2012-05-21T18:55:46.020
> 
> 标签：linq-to-xml

我正在尝试使用 Linq 将 XML 字符串转换为 .net 对象的常规集合（我讨厌 linq ......主要是因为我没有时间准确地了解它是如何工作的，因此，当事情发生时，我总是很困惑出错）。我希望有一种使用 XSD 之类的简单易用的方法，以及某种反序列化器和再序列化器……但.net 中似乎没有任何本机支持。所以我想，为什么不直接使用 Linq？大错。但无论如何，我想把这个字符串...

```
<?xml version="1.0" encoding="utf-16"?>
  <ArrayOfPopulation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Population>
  <id>3</id>
  <name>CHF</name>
  <description>FR Congestive Heart Failure</description>
  <createdDate>2011-10-25T04:00:00Z</createdDate>
  <createdUserID>WPS_ANEMIA_POP_OWNER</createdUserID>
  <modifiedDate>2011-10-31T04:00:00Z</modifiedDate>
  <modifiedUserID>WPS_ANEMIA_POP_OWNER</modifiedUserID>
  <isActive>true</isActive>
  <owner>
    <type>AD GROUP</type>
  </owner>   
  <owner>
    <type>ACCOUNT</type>
  </owner>
  <type>
    <name>ACO SURVEY</name>
  </type>
  </Population>
  <Population>
  <id>2</id>
  <name>COPD</name>
  <description>FR Chronic Obstructive Pulmonary Disease</description>
  <createdDate>2011-10-25T04:00:00Z</createdDate>
  <createdUserID>WPS_ANEMIA_POP_OWNER</createdUserID>
  <modifiedDate>2011-10-31T04:00:00Z</modifiedDate>
  <modifiedUserID>WPS_ANEMIA_POP_OWNER</modifiedUserID>
  <isActive>true</isActive>
  <owner>
    <domain>1UPMC-ACCT</domain>
    <name>InteropDev</name>
    <type>AD GROUP</type>
  </owner>
  <owner>
    <domain>1UPMC-ACCT</domain>
    <name>ACOPopulationUsers</name>
    <type>AD GROUP</type>
  </owner>
  <owner>
    <domain>1UPMC-ACCT</domain>
    <name>muesml</name>
    <type>ACCOUNT</type>
  </owner>
  <owner>
    <domain>1UPMC-ACCT</domain>
    <name>andersonjm</name>
    <type>ACCOUNT</type>
  </owner>
  <type>
    <name>ACO SURVEY</name>
  </type>
 </Population>
 </ArrayOfPopulation> 
```

进入这些对象的数组...

```
public class PopulationModel
{
    public string populationID { set; get; }

    public string PopName { set; get; }

    public string Description { set; get; }

    public int PopulationType { set; get; }

    public int isActive { set; get; }

    //public List<XSLTACOData> patients { set; get; }
} 
```

哪个看起来像这样......

```
public class PopulationsModel
{
    public List<PopulationModel> Populations { set; get; }
} 
```

我没有使用这个 linq to XML 查询来做到这一点......

```
XDocument xDocument = XDocument.Parse(xmlFromSvc);
XElement elem = xDocument.Element("ArrayOfPopulation");
//client.GetOwnedPopulations();
IEnumerable<PopulationsModel> popModel = (IEnumerable<PopulationsModel>)
     (from templates in elem.Elements("Population")
      select new PopulationModel
      {
          populationID = templates.Attribute("id").Value,
          PopName = templates.Attribute("name").Value,
          Description = templates.Attribute("description").Value,
          PopulationType = int.Parse(templates.Attribute("").Value),
          isActive = int.Parse(templates.Attribute("isActive").Value)
      }).ToList(); 
```

我正式感到困惑。为什么这不起作用？此外，必须有一种更简单的方法来完成这项工作吗？对于 xsd 和所有其他垃圾来说，这似乎是完美的选择。也许我在这里努力工作？

现在得到这个例外......

```
Unable to cast object of type  'System.Collections.Generic.List`1[FocusedReadMissionsRedux.Models.PopulationModel]' to type 'System.Collections.Generic.IEnumerable`1[FocusedReadMissionsRedux.Models.PopulationsModel]'. 
```

这似乎是一个稍微合理的例外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:02:45.750

> 为什么这不起作用？

好吧，让我们看看你在做什么。你有`templates`一个`<Population>`元素，然后你像这样查询它：

```
 populationID = templates.Attribute("id").Value,
  PopName = templates.Attribute("name").Value,
  Description = templates.Attribute("description").Value,
  PopulationType = int.Parse(templates.Attribute("").Value),
  isActive = int.Parse(templates.Attribute("isActive").Value) 
```

请注意您如何在`Attribute`此处使用所有内容。现在查看 XML：

```
<Population>
  <id>3</id>
  <name>CHF</name>
  ...
</Population> 
```

该`Population`元素没有*任何*属性。它有嵌套*元素*。我没有详细检查，但是将所有`Attribute`调用更改为`Element`调用可能会解决所有问题，除了`PopulationType`. （不清楚你想从*哪里得到它。）*

请注意，从`XAttribute`and的显式转换`XElement`通常比`int.Parse`etc更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T19:03:23.613

`Attribute`当它们实际上是元素时，您正在尝试使用方法获得价值。

试试这个（老实说我没有测试过）：

```
XDocument xDocument = XDocument.Parse(xmlFromSvc);
XElement elem = xDocument.Element("ArrayOfPopulation");

var popModel = (from templates in elem.Elements("Population")
                select new PopulationModel
                {
                     populationID = (string)templates.Element("id"),
                     PopName = (string)templates.Element("name"),
                     Description = (string)templates.Element("description"),
                     PopulationType = (int)templates.Element("Type").Element("Name"),
                     isActive = (int)templates.Element("isActive")
                }).ToList(); 
```

# spring - 如果发生任何错误，服务层可以提供什么来告诉控制器部分的最佳方式是什么（异常）

> ID：10690973
> 
> 赞同：1
> 
> 时间：2012-05-21T18:56:25.957
> 
> 标签：spring, exception, service-layer

我正在为我的项目“在线考试”使用 spring3.0.2

将业务逻辑放在服务层，让控制器更容易感受。

如果发生任何错误，服务层可以提供什么来告诉控制器部分的最佳方式是什么（异常）

渴望尽快听到！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:59:57.357

抛出你自己的异常，然后在你的控制器中捕获它们，这样你就可以准确地定义最佳行为

# sql - 数据库设计，表模拟多个表的外键

> ID：10690976
> 
> 赞同：1
> 
> 时间：2012-05-21T18:56:51.370
> 
> 标签：sql, sql-server, database-design, foreign-keys, ddl

我正在尝试解决一个问题，并且很难提出最佳解决方案。我有一个数据库，其中包含（除其他外）以下内容的表：

*   目的地请求
*   支持请求
*   交换请求
*   存款请求

这些表中的每一个都有一个评论列（从最终用户到管理员），但是我被要求添加向所有这些请求添加注释的功能。我希望每组笔记都是分开的，这样我就可以跟踪添加笔记的日期/时间，以及谁编辑了它。这表明我需要将注释存储在表格中，并通过外键链接回请求。问题是每个请求表都有一个自动递增的 id 列，该列在该表中是唯一的，但对于所有其他表来说不是唯一的（这意味着每个表都可以有一个 id 为 200 的请求）。

我意识到我的问题的一个解决方案可能是为每种类型的请求创建一个“Notes”表并相应地创建外键，但这肯定不是解决问题的唯一体面的方法。

我真正想知道的是是否有一种有效的方法可以使用 id 和请求类型（基本上是表名）来创建外键。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T23:04:58.847

作为创可贴，你可以做这样的事情......

![在此处输入图像描述](../Images/6191b10b6c7cb5768b837783c7dcd03b.png)

...具有以下约束`Note`：

```
CHECK (
    (
        “Destination Request Id” IS NOT NULL
        AND “Support Request Id” IS NULL
        AND “Exchange Request Id” IS NULL
        AND “Deposit Request Id” IS NULL
    )
    OR (
        “Destination Request Id” IS NULL
        AND “Support Request Id” IS NOT NULL
        AND “Exchange Request Id” IS NULL
        AND “Deposit Request Id” IS NULL
    )
    OR (
        “Destination Request Id” IS NULL
        AND “Support Request Id” IS NULL
        AND “Exchange Request Id” IS NOT NULL
        AND “Deposit Request Id” IS NULL
    )
    OR (
        “Destination Request Id” IS NULL
        AND “Support Request Id” IS NULL
        AND “Exchange Request Id” IS NULL
        AND “Deposit Request Id” IS NOT NULL
    )
) 
```

这样，您不必更改现有表的 PK（这可能会对模型的其余部分和客户端应用程序产生级联影响），但您可以在不“重复”`Notes`表的情况下获得适当的引用完整性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T23:45:33.867

您可以有一个表 Note( object_id, note )，其中 object_id 引用任何请求表。您实际上不必在数据库中具有外键约束，或者如果您真的想维护约束，您可以使用约束子句（可能是特定于供应商的？）。

要确定注释与哪个请求表相关联，您可以在 Note 中设置一个枚举类型值。一些数据库供应商有一个 Enum 类型，其他你可能只使用一个 Int。它只是像 request_type enum(DESTINATION, SUPPORT, etc....) 这样的列。

如果您的数据库很小或者可以离线一段时间，您可以改为重新创建表，以便它们使用一个生成所有四个 object_id 的序列......这样 ID 在不同的请求表中将是唯一的。我喜欢在这种情况下拥有一个普遍唯一的 object_id 序列。

对于某些供应商（postgres），您可以使用表继承。使用表继承，您可以执行类似 create table destination_request(....) inherits(note); 这将使 note 表中的任何字段可用于对 destination_request 表的查询。从某种意义上说，这确实有效，并且在幕后为您完成了工作。从概念上讲，请求不是注释的子类型，因此这在 OO 设计方面并不理想，并且表继承可能无法移植到其他数据库供应商。这取决于你对这里的纯度有多关注。

如上所述，您可以有四个不同的外键指向每个表，但这会给您留下一个大部分为 Null 值的表......我可能更喜欢拥有四个不同的笔记表而不是拥有一个包含这么多空值的表。

# android - Libgdx 外部存储导致 Android 上的 NullPointerException

> ID：10690982
> 
> 赞同：2
> 
> 时间：2012-05-21T18:57:16.377
> 
> 标签：android, netbeans, storage, external, libgdx

我在使用 Gdx 库访问 Android 上的外部存储时遇到问题。任何帮助，将不胜感激！

简化代码：

```
import android.app.Activity;
import android.os.Bundle;
import com.badlogic.gdx.Gdx;

public class Mp3AndFftTest extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Gdx.files.isExternalStorageAvailable();
    }
} 
```

这导致：

```
ERROR   AndroidRuntime  FATAL EXCEPTION: main
ERROR   AndroidRuntime  java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cmbryan.android/com.cmbryan.android.Mp3AndFftTest}: java.lang.NullPointerException
ERROR   AndroidRuntime      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
ERROR   AndroidRuntime      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
ERROR   AndroidRuntime      at android.app.ActivityThread.access$1500(ActivityThread.java:117)
ERROR   AndroidRuntime      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
ERROR   AndroidRuntime      at android.os.Handler.dispatchMessage(Handler.java:99)
ERROR   AndroidRuntime      at android.os.Looper.loop(Looper.java:123)
ERROR   AndroidRuntime      at android.app.ActivityThread.main(ActivityThread.java:3683)
ERROR   AndroidRuntime      at java.lang.reflect.Method.invokeNative(Native Method)
ERROR   AndroidRuntime      at java.lang.reflect.Method.invoke(Method.java:507)
ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
ERROR   AndroidRuntime      at dalvik.system.NativeStart.main(Native Method)
ERROR   AndroidRuntime  Caused by: java.lang.NullPointerException
ERROR   AndroidRuntime      at com.cmbryan.android.Mp3AndFftTest.onCreate(Mp3AndFftTest.java:17)
ERROR   AndroidRuntime      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
ERROR   AndroidRuntime      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
ERROR   AndroidRuntime      ... 11 more 
```

我在 Android 清单中有正确的权限，并在模拟器和真实设备上进行了测试。我错过了什么？是不是因为我使用的是netbeans，也许？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:27:14.247

第 17 行是：

```
Gdx.files.isExternalStorageAvailable(); 
```

对？ `Gdx.files`一片空白。这是因为你没有运行 GDX 初始化代码来设置全局快捷方式`Gdx`。您需要创建一个`ApplicationListener`并将其传递给`AndroidApplication.initialize(..)`.

按照此处的示例：[http ://code.google.com/p/libgdx/wiki/ProjectSetup](http://code.google.com/p/libgdx/wiki/ProjectSetup)

在您完成所有预期的初始化之前，libGDX 的状态是不明确的。libGDX 不仅仅是一个你可以从中消费的库，它是一个框架，可以处理你的应用程序的完整设置和初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T21:23:58.393

也许不是理想的解决方案。但你也可以使用

```
com.badlogic.gdx.backends.lwjgl.LwjglFiles 
```

直接上课。这是用于创建 Gdx.files 对象的类。

# css - float:right 和相对定位

> ID：10690986
> 
> 赞同：4
> 
> 时间：2012-05-21T18:57:36.407
> 
> 标签：css, image, positioning, css-float

这似乎应该是一个简单的解决方案，但我似乎无法弄清楚。

我需要将图像放置在每一页的同一位置。我需要文字环绕图像的顶部和底部。

[http://jsfiddle.net/4AnsK/](http://jsfiddle.net/4AnsK/)

注意到右上角的图像空间了吗？它不会随着图像向下移动。我理解为什么会发生这种情况，但我不知道如何使它工作。

我尝试过使用相对定位并设置“顶部”值。我试过margin-top，padding-top，把它放在一个绝对的div容器中，等等。我似乎无法弄清楚。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T19:07:20.083

这似乎可行，但它需要一些 HTML hack。基本上，您只需要在图像上方放置一个零宽度的垫片即可将其向下推，而不会影响其他任何内容。

将此添加到 HTML 中，在图像之前：

```
<span id="evilNonSemanticSpacer"></span> 
```

并使用这个 CSS：

```
#evilNonSemanticSpacer {
    float:right;
    display:block;
    height:210px;
}
img
{
    float: right;
    clear:right;
}​ 
```

从图像中删除相对定位，它在正确的位置，文本环绕在它周围。小提琴示例[在这里](http://jsfiddle.net/4AnsK/11/)。

Chrome 的文本换行有点奇怪（上面的行位于图像上方）。不过，它不会出现在 Firefox 中。我可以在 Chrome 中修复它的唯一方法是使用`margin-top: 1.1em`，`img`但这也会导致 Firefox（以及可能其他浏览器）中图像上方的空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:03:37.213

作为替代方案，可以将 img 放在第二段或第三段之后并删除`top: 200px`? 这将产生类似的效果，尽管您不能保证它会正好是 200 像素。否则你运气不好，段落会在原来的位置浮动。

# nhibernate - queryover 中的 NHibernate 视图返回重复记录

> ID：10690992
> 
> 赞同：3
> 
> 时间：2012-05-21T18:58:19.307
> 
> 标签：nhibernate, fluent-nhibernate

我用 NHibernate 映射的一个数据库视图似乎有一个奇怪的问题。我正在为我映射的其中一个视图获取重复记录。我有以下视图对象

```
 WorkDetailView
                       /          \
                      /            \
                     /              \
                    /                \
          PickWorkDetailView    PutWorkDetailView 
```

每个对象都代表数据库中的不同视图，但两者都`PickWorkDetailView`继承`PutWorkDetailView`自，`WorkDetailView`因为它们共享许多相同的字段。

如果我运行以下代码，我会得到 2 个结果，但如果我在 SQL Management Studio 中运行实际的数据库视图，我会得到 1 个结果。

```
List<WorkDetailView> workList = session.QueryOver<WorkDetailView>()
                                       .List<WorkDetailView>().ToList(); 
```

有趣的是，当我查看`workList`上面集合中的所有项目时，我看到一个`WorkDetailView`对象和一个`PickWorkDetailView`对象。此外，如果我查看 NHibernate 正在运行的查询，它会从所有 3 个视图（WorkDetailView、PickWorkDetailView 和 PutWorkDetailView）中进行选择。这听起来根本不对。如果需要，我可以发布 xml 映射或我的流利映射。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T20:20:06.923

NHibernate 支持多态查询。因此，当您查询该基类时，它将查找从该类派生的所有对象。

您可以使用类映射上的[多态属性](http://www.nhforge.org/doc/nh/en/index.html#mapping-declaration-class)来控制此行为。

> 隐式多态性意味着类的实例将由命名任何超类或实现的接口或类的查询返回，并且类的任何子类的实例将由命名类本身的查询返回。显式多态性意味着类实例将仅返回显式命名该类的查询，并且命名该类的查询将仅返回在此`<class>` 声明中映射为 a`<subclass>`或的子类的实例`<joined-subclass>`。对于大多数用途，默认值`polymorphism="implicit"`, 是合适的。当两个不同的类映射到同一个表时，显式多态很有用（这允许“轻量级”类包含表列的子集）。

在您的示例中，您可以设置`polymorphism="explicit"`所有 3 个映射。