# StackOverflow 问答 10138000-10138999

# android - 如何更改android活动标签

> ID：10138007
> 
> 赞同：31
> 
> 时间：2012-04-13T09:00:45.617
> 
> 标签：android, android-manifest, android-activity

我创建了一个活动并在清单文件中声明。但我想将相同的 Activity 重新用于其他目的。

```
 <activity
            android:configChanges="orientation|keyboardHidden"
            android:label="Main Menu"
            android:name=".MainMenu"
            android:theme="@android:style/Theme.Light" >
        </activity> 
```

我需要动态更改标签。提前致谢

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-13T09:06:28.130

采用

```
setTitle(int titleId) 
```

或者

```
setTitle(CharSequence title) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-13T09:07:41.113

```
public class YourActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
      setTitle(R.string.your_title);
      setContentView(R.layout.main);
  }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-13T09:02:57.833

为此，您需要使用**setTitle**：

```
setTitle(R.string.your_title);
//or
setTitle("new title"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-08T07:49:02.593

您可以在 res/string.xml 文件中定义字符串，然后将 android:label 添加到 AndroidMenifest.xml 文件中

```
string.xml code
<string name="string_name">text to display</string>

AndroidMenifest.xml code

<activity android:name=".SomeActivity"
            android:label="@string/string_name"/> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-13T07:43:36.140

我有同样的问题，试试这个`onCreate`对我有用！

```
public class YourActivityName extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    setTitle("Your Title");
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T09:04:02.830

```
if(Condition)
{
    setTitle("Your Title");
}
else
{
    // your Default Title from Manifest
} 
```

尝试使用这条线。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-01T22:02:08.903

*静态的，不是动态的*

转到您的 AndroidManifest.xml 文件并将 android:label 属性添加到您想要的活动标记中，如下所示：

```
<activity android:name=".name" android:label="label"/> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-16T07:39:05.173

在您的清单文件中

最初，您的代码是这样的。

```
 <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".NumbersActivity"  />
    <activity android:name=".FamilyMembersActivity"  />
    <activity android:name=".ColorsActivity"  />
    <activity android:name=".PhrasesActivity" />
    </activity>
</application> 
```

但更改后添加标签。

```
<activity android:name=".NumbersActivity" android:label="Numbers" />
    <activity android:name=".FamilyMembersActivity" android:label="Family Members" />
    <activity android:name=".ColorsActivity" android:label="Colors" />
    <activity android:name=".PhrasesActivity" android:label="Phrases" >
    </activity>
</application> 
```

是更改标签名称的最佳方式。

礼貌。（ryanwaite28）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-06T13:37:29.843

使用这个

```
@Override
  public void onCreate(Bundle savedInstanceState) {
    setTitle("Your Title");
  } 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2018-05-25T19:44:11.620

android:label="你想要的任何单词"/>

# c# - Mono c# TextRenderingHint.SingleBitPerPixelGridFit Windows vs. Linux

> ID：10138012
> 
> 赞同：2
> 
> 时间：2012-04-13T09:01:11.313
> 
> 标签：c#, bitmap, mono

我们在 linux 和 windows 上使用 mono，我们拥有的一个项目是生成带有渲染文本的位图。

因为位图必须是（每像素位格式），我们必须省略任何我们没有得到任何阴影的抗锯齿，所有字母都是黑白的。

为此，我们使用 TextRenderingHint.SingleBitPerPixelGridFit，它在 windows 上为位图值上的每个像素生成 0 或 255，在 linux 上它以某种方式忽略此设置，我们得到一个从 0 到 255 的像素值。

Windows中生成的位图：设置工作

好的位图：（[http://shrani.si/f/2p/Mg/9JkctiS/408b7606-b74e-46cc-a5d9-.png](http://shrani.si/f/2p/Mg/9JkctiS/408b7606-b74e-46cc-a5d9-.png)）（对不起，我不允许张贴图片:)

在 linux 中生成的位图：设置被忽略了？！？（它有它不应该有的阴影！）不OK 位图：（[http://shrani.si/f/3a/ye/1Sn9rQjM/e75ab589-2061-421b-9275-.png](http://shrani.si/f/3a/ye/1Sn9rQjM/e75ab589-2061-421b-9275-.png)）

位图是通过以下方式生成的：

```
 b = new Bitmap(_width, _height, PixelFormat.Format16bppRgb555);
        g = Graphics.FromImage(b);

        g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.None;
        g.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighSpeed;
        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.Low;
        g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.SingleBitPerPixelGridFit; 
```

区别很明显...

知道如何解决这个问题吗？这是某种系统设置还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-02T13:05:37.447

我有同样的问题。我找不到在没有抗锯齿的情况下设置单色打印的方法。但我找到了解决系统级别任务的方法。如果需要，您可以仅为选定的字体和大小自定义设置。使用抗锯齿设置编辑现有文件或创建新文件。 **/etc/fonts/conf.d/10-antialias.conf** 将抗锯齿设置为 false。

```
<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>
<!--  Use the Antialiasing -->
  <match target="font">
    <edit name="antialias" mode="assign"><bool>false</bool></edit>
  </match>
</fontconfig> 
```

# c++ - 在多线程上下文中卸载 Mono 域

> ID：10138015
> 
> 赞同：2
> 
> 时间：2012-04-13T09:01:15.337
> 
> 标签：c++, c, mono, appdomain, embedding

我有一个多线程应用程序，可以从本机代码激活多个 Mono 域。每个域都有自己的线程。我使用以下代码激活域：

```
///Create a new domain.
m_domain = mono_domain_create_appdomain((char*) name.c_str(), NULL);

///Activate the domain.
mono_domain_set(m_domain, 0);

///Register the current thread
mono_thread_attach(m_domain);

///Invoke some code ...
mono_runtime_invoke (m_method, m_objectInstance, NULL, &exception); 
```

但是当我卸载域时，应用程序崩溃：

```
mono_domain_unload(m_domain); 
```

当我在没有线程的情况下执行代码时，应用程序域被正确卸载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:59:39.993

我在 mono_domain_unload 之前调用**了**函数**mono_assembly_close**：

 **```
mono_assembly_close(m_assembly); 
```

所以我删除了这个调用，并为卸载代码创建了一个**关键部分**。**

# java - 将 .jar 文件嵌入到网页/网站

> ID：10138021
> 
> 赞同：0
> 
> 时间：2012-04-13T09:01:40.163
> 
> 标签：java, object, jar, applet, embed

我有一个客户，他有一个基于 java 的游戏，他想在线提供（目前它是桌面版本，他必须安装）。他问我是否可以将其嵌入到网页中。试了几天还是不开心。你能指出我正确的方向吗？它有五个 jar 文件（可执行 jar 文件）和一个名为 lib 的文件夹，其中还有五个 jar 文件。现在我不知道是否可以使用小程序/对象标签嵌入游戏。你能指出我在处理这些 jar 文件时要注意什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:10:39.267

> ..目前是桌面版，他必须安装..

使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从链接启动它。可能需要对罐子进行数字签名（应用程序是做什么的？）。

请注意，“桌面应用程序”通常使用 编码`JFrame`，而用于嵌入的等效顶级容器是`JApplet`. 框架不能简单地嵌入网页中。

正如提到的其他问题一样，您需要更具体地了解您尝试过的内容以及这些尝试的结果，或者找到一些心理帮助者。

# javascript - Javascript html 编辑器光标焦点跟随鼠标

> ID：10138022
> 
> 赞同：2
> 
> 时间：2012-04-13T09:01:52.937
> 
> 标签：javascript, dhtml

我在我的 Web 应用程序中使用 dhtml (midas) 编辑器作为 html 编辑器，我想要做的是在这个 html 编辑器中让光标跟随鼠标，有没有办法做到这一点？

添加示例：我希望 textarea 中的光标跟随鼠标，因此如果您的 textarea 中有一个大文本并且您正在用鼠标遍历它，则光标（文本光标）应该跟随鼠标，如下所示：

“这是一个示例 | 示例文本” - 如果鼠标在“示例”单词上并且在 x 和 a 之间，文本光标 (|) 应该集中在那里，但是当我将鼠标移到例如“文本”光标 | 应该在鼠标当前所在的字母之间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:47:10.913

好的，我使用 Ext.util.TextMetrics 找到了解决方案，首先我在编辑器中获取每个字符的位置，然后将其与鼠标光标位置进行比较，然后根据 charNum 数组中的给定字符更新 midas 选择

```
htmlEditor.getEl().on('mousemove', function(e)
{   
    var charNum = {},
        text = htmlEditor.getValue(),
        fWidth = htmlEditor.getWidth();

    var textMetrics = new Ext.util.TextMetrics(htmlEditor.getEl(), htmlEditor.getWidth());

    for(var n=0;n<text.length;n++)
    {
        var dat = text.substring(0, n)
        var width = textMetrics.getWidth(dat);
        var height = textMetrics.getHeight(dat);

        if(width > fWidth)
        {
            var mult = Math.ceil(width/fWidth)
            var width = width % fWidth;
            height = height*mult;
        }

        charNum[n] = [width, height];
    }

    //console.log("charNum: "+charNum.toSource());

    var mX = e.getX();
    var mY = e.getY();

    var cXY = htmlEditor.getEl().getXY();
    var cX = cXY[0];
    var cY = cXY[1];                    

    var x = mX-cX-20;
    var y = mY-cY;

    //console.log("fin xy: "+x+' '+y);

    var n = -1;
    var z = 0;
    for(key in charNum)
    {
        if(charNum[key][0] > x && charNum[key][1] > y) 
        {
            n = key-1;
            break;
        }
        n++;
        z++;
    }

    if(x < 0 && y < 14) n = -1; 

    if(n == (z-1) && n != -1)
    {
        n++;
    }

    var selection = htmlEditor.win.getSelection();

    range = selection.getRangeAt(0);
    range.selectNodeContents(htmlEditor.getEditorBody());
    range.collapse(true);
    for(var x=0;x<n;x++)
    {
        selection.modify("move", "forward", "character");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T13:16:19.697

[加载时](http://joekuan.wordpress.com/2012/04/02/activates-extjs-htmleditor-textarea-when-it-is-loaded/)尝试激活 ExtJs HtmlEditor textarea和[Sencha Docs](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Component-method-focus)，官方文档说：

```
Note: The focus/blur and validation marking functionality inherited from Ext.form.Field is NOT
supported by this editor. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:25:05.040

我还没有尝试过@dfilkovi 的解决方案，但尽管它可能是正确的，但请记住，将事件绑定到 mousemove 的任何解决方案都肯定会导致 CPU 上的巨大开销。

为了缓解这种症状，您可以首先在处理程序处取消绑定侦听器，然后设置超时以在几毫秒后绑定它；就像是：

```
// assume HandleOriginal as the original function declared by @dfilkovi

// attach the listener
startListener();

// functions
function startListener() {
    htmlEditor.getEl().on('mousemove', HandleAndWait);
}

function stopListener() {
    // maybe this is not the right syntax
    htmlEditor.getEl().on('mousemove', null);
}

function HandleAndWait(e) {
    var C_SLEEP = 50;
    stopListener();

    try { HandleOriginal(e); }
    finally { window.setTimeout(startListener, C_SLEEP); }

} 
```

然后，您可以将 的值微调为`C_SLEEP`最佳用户体验。

# linq - 不支持嵌套查询。Operation1='UnionAll' Operation2='MultiStreamNest'

> ID：10138023
> 
> 赞同：7
> 
> 时间：2012-04-13T09:01:57.957
> 
> 标签：linq, entity-framework

我有以下形式的 Linq to Entities 查询：

```
var x = from a in SomeData
    where ... some conditions ...
    select new MyType
    {
        Property = a.Property,
        ChildCollection = from b in a.Children
                        select new MyChildType
                        {
                            SomeProperty = b.Property,
                            AnotherProperty = b.AnotherProperty
                        }
    };

var y = from a in SomeData
    where ... some other conditions ...
    select new MyType
    {
        Property = a.Property,
        ChildCollection = from b in a.Children
                        select new MyChildType
                        {
                            SomeProperty = b.Property,
                            AnotherProperty = b.AnotherProperty
                        }
    };

var results = x.Concat(y); 
```

（这是一个简化的示例 - 'where' 和 'select' 子句比此处显示的更复杂。我使用单独的查询语句，因为创建单个组合查询语句太复杂，条件太多并且需要很长时间才能编译）

编译正常，但执行失败，但有以下异常：

```
"The nested query is not supported. Operation1='UnionAll' Operation2='MultiStreamNest' 
```

请注意，我正在尝试投影到嵌套类型的结构中。如果我在 Concat() 之前在 x 和 y 上调用 .ToList() 它工作正常。另外一点，我的属性之一是枚举，但我使用整数包装器属性分配给它。

有没有办法我可以做我想做的事而不必将所有数据拉入内存？或者是导致失败的枚举？

谢谢，

吨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:07:19.830

你试过吗

```
 var results = x.Union(y); 
```

?

蒂兹

或者

```
var x = (from a in SomeData
where ... some conditions ...
select new MyType
{
    Property = a.Property,
    ChildCollection = (from b in a.Children
                    select new MyChildType
                    {
                        SomeProperty = b.Property,
                        AnotherProperty = b.AnotherProperty
                    }).ToArray() //or DefaultIfEmpty
}).Concat(
from a in SomeData
where ... some other conditions ...
select new MyType
{
    Property = a.Property,
    ChildCollection = (from b in a.Children
                    select new MyChildType
                    {
                        SomeProperty = b.Property,
                        AnotherProperty = b.AnotherProperty
                    }).ToArray() //or DefaultIfEmpty
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T11:09:50.820

我在尝试将多组导航属性连接或合并为单个 IEnumerable 时遇到了类似的问题，这是代码示例：

```
var requiredDocuments =                
                 (from x in db.RequestTypes where (some condition) select x.RequiredDocuments)
                 .SelectMany(r => r).ToList<DataModel.RequiredDocument>()
                 .Concat(
                 (from c in db.Categories where (some condition) select c.RequiredDocuments)
                 .SelectMany(r => r).ToList<DataModel.RequiredDocument>()
                 )
                 .Concat(
                 (from f in db.Fields where (some condition) select f.RequiredDocuments)
                 .SelectMany(r => r).ToList<DataModel.RequiredDocument>()
                ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T21:49:31.903

如果我正确理解您要做什么，我已经多次遇到同样的问题。底线是，不支持使用嵌套投影进行联合，如果需要这样做，则必须首先使用 ToList 实现结果。

# php - Word XML 到 HTML（带样式）

> ID：10138024
> 
> 赞同：0
> 
> 时间：2012-04-13T09:02:03.277
> 
> 标签：php, html, xml, ms-word

[我有一个 word 模板（msword 2010），我使用PHPWord](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDUQFjAA&url=http://phpword.codeplex.com/&ei=TuuHT7e5OMen0QXZ6Z27CQ&usg=AFQjCNGp-6D-s4fDHLosv1Biw3AFOUy99g)将变量注入其中，并希望将其转换为 PDF。

我的思考过程是将word文档转换为xml（我已经完成了），然后将该xml转换为样式化的html。

到目前为止，我已经设法替换了代表换行符和段落的 xml 元素，但我想知道是否有一些代码可以将其他 xml 元素转换为样式化的 html。我知道它不太可能是完美的，但接近的东西会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:06:35.230

您最好的选择是使用[XSLT](http://en.wikipedia.org/wiki/XSLT)。网上有一些很好的教程。此[页面](http://php.net/manual/en/xsl.examples.php)提供了在 PHP 中执行此操作的代码。

# c# - GetEntryAssembly 返回 null ......如何避免它？

> ID：10138029
> 
> 赞同：1
> 
> 时间：2012-04-13T09:02:33.847
> 
> 标签：c#, wpf, vb.net, vb6, assemblies

我有一个使用第三方库来执行特定任务的 WPF 应用程序；该库在其方法之一中执行语句`Assembly.GetEntryAssembly()`。

如果我在调试时运行 WPF 应用程序（通过运行 .Net exe 进行测试），该库可以正常工作并`Assembly.GetEntryAssembly()`返回对可执行文件程序集的引用，但在生产中我遇到了不同的情况，这会导致我出现一些问题。

在生产中，WPF 应用程序与 VB6 应用程序集成在一起，程序从 VB6 菜单中使用`InteropFormLibrary`；在这种情况下，库会引发异常，因为`Assembly.GetEntryAssembly()`返回`null`（它找不到与程序集关联的可执行文件）。

我的问题是我无法更改库的代码，因为我没有可用的源代码，并且我通过`dll`反编译器找到了引发异常的语句并分析了异常中的方法。

现在我的问题是：有没有办法确保该方法`GetEntryAssembly`不返回`null`？我可以以某种方式分配或“规避”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:19:22.020

最简单的方法是让 dll 的开发人员修复他的代码以支持在本机（如 VB6 或 C/C++）进程中托管。

也就是说，如果不可能，您可以尝试在一个单独的进程中托管您的 .NET 端，基于 .NET exe。由于您正在执行 VB6 互操作，您可能已经在使用 COM 互操作，因此您可以切换到进程外 COM 模型。这样，您的 .NET 组件可以在 .NET exe 中运行并具有入口点程序集。出于类似的原因，我已经这样做了，而且对我来说效果很好。

# teamcity - 如何使用 teamcity 将覆盖率报告从 dotcover 导入到 ndepend？

> ID：10138031
> 
> 赞同：3
> 
> 时间：2012-04-13T09:02:39.210
> 
> 标签：teamcity, ndepend, dotcover

我们使用 teamcity

*   构建
*   代码覆盖率（使用内置的 dotCover）
*   代码分析（使用 NDepend）

这单独工作很好。

但是我想不出一种巧妙的方法来获取 ndepend 格式的覆盖率报告并将其用作 ndepend 与 teamcity 的输入。

我可以使用命令行工具一步一步地手动完成这一切，但每次都需要付出很多努力。我知道我可以做一个 bat / rake 文件并为 dotcover 创建 xml 配置文件并手动调用 exe 和调用 ndpend。但如前所述，我正在寻找一种更加集成和自动化的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T11:48:21.800

关于 NDepend，在 .ndproj 项目文件中，您需要调整 XML 以引用 dotCover 覆盖文件，它可能如下所示：

```
 <CoverageFiles UncoverableAttribute="NDepend.Attributes.UncoverableByTestAttribute">
    <CoverageFile MergeMode="Or">.\CoverageFiles\CoverageFile.xml</CoverageFile>
  </CoverageFiles> 
```

请注意，您可以放置​​多个 < *CoverageFile* > 标签，您需要保留*MergeMode="Or"*。在此示例中，提供了相对于托管 .ndproj 文件的目录的覆盖文件路径，但如果您的项目文件包含绝对路径，您也必须放置绝对文件路径。

在不久的将来版本中，将向 NDepend 用户提供一个 API，以简化 NDepend 项目文件的编程创建和修改。

# c# - 如何以编程方式创建具有多个项目的解决方案？

> ID：10138033
> 
> 赞同：3
> 
> 时间：2012-04-13T09:02:45.460
> 
> 标签：c#, envdte, microsoft.build

我想用多个项目创建解决方案。

我想我有三个选择：

1.  [EnvDTE](http://msdn.microsoft.com/en-us/library/envdte%28v=vs.100%29.aspx)
2.  [微软.Build](http://msdn.microsoft.com/en-us/library/gg145008.aspx)
3.  手动创建 *.sln 和 *.csproj 文件

我用谷歌搜索但没有找到 1 和 2 选项的好例子（*我的意思是如何创建解决方案、添加项目、添加引用、添加新的或现有的项目项等......*）

我认为第三种选择更容易，但如果有好的选择，我不需要手动创建项目。

### 所以我的问题是：

*是否有任何其他选项可以以编程方式创建项目？*

*哪个选项更好*？

 *谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:16:19.930

只需手动手动创建 sln 和 csproj 文件（以及其他所需文件），格式非常简单。您可以通过在 Visual Studio 中创建一个包含两个项目的新解决方案并仅检查 sln 和 csproj 文件的内容来使这项任务变得简单。这里的想法是你只是让自己成为一个模板。*

# silverlight - Silverlight Sharepoint 2010 Web 部件 Windows 身份验证

> ID：10138036
> 
> 赞同：0
> 
> 时间：2012-04-13T09:02:49.757
> 
> 标签：silverlight, sharepoint-2010, windows-authentication

我正在尝试验证我的 silverlight 应用程序以获取 windows 用户名，然后我用它来获取更多信息。已经查过了，但我找到的答案是关于配置 Web 服务来获取它。有没有办法在 Silverlight 中严格获取 Windows 凭据？我找不到.Credentials，我唯一看到的是.ClientCredentials，但显然它没有显示所需的信息。我收到字符串“System.ServiceModel.Security.UserNamePasswordClientCredential”。它实际上允许我设置名称，而不是检索它。还有一个名为 authentication.asmx 的 Web 服务，但和以前一样，它适用于其他目的。我也没有任何可以引用和配置它们的 Web 服务。还是我错过了什么？也许我可以通过 NTLM 或 Kerberos 检索 Windows 凭据？我正在使用带有 Silverlight 5 的 Visual Web Developer 2010 Express。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:35:15.900

我的经验是，存在于 asp.net 世界中的成员资格框架在 silverlight 中不可用。为了实现类似的目标，我必须实现一个针对域的活动目录 (ldap) 服务器的 Web 服务 (WCF)。Silverlight 在互操作性方面是一个非常严格的框架，它有利于安全性，但也有一些限制。

我不确定您对活动目录的了解程度，但这里有一个链接可以处理很多可能的操作，并且有示例 C# 代码可供参考。

[http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#40a](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#40a)

# c# - 如何正确检测 Windows、Linux 和 Mac 操作系统

> ID：10138040
> 
> 赞同：21
> 
> 时间：2012-04-13T09:03:02.017
> 
> 标签：c#, macos, mono, cross-platform

我找不到任何真正有效的方法来正确检测我的 C# 程序在哪个平台（Windows / Linux / Mac）上运行，尤其是在返回 Unix 并且几乎无法与 Linux 平台区分开来的 Mac 上！

所以我根据 Mac 的特殊性做了一些不那么理论化、更实用的东西。

我正在发布工作代码作为答案。请评论它是否也适合您/可以改进。

谢谢 ！

**回复 ：**

这是工作代码！

```
 public enum Platform
    {
        Windows,
        Linux,
        Mac
    }

    public static Platform RunningPlatform()
    {
        switch (Environment.OSVersion.Platform)
        {
            case PlatformID.Unix:
                // Well, there are chances MacOSX is reported as Unix instead of MacOSX.
                // Instead of platform check, we'll do a feature checks (Mac specific root folders)
                if (Directory.Exists("/Applications")
                    & Directory.Exists("/System")
                    & Directory.Exists("/Users")
                    & Directory.Exists("/Volumes"))
                    return Platform.Mac;
                else
                    return Platform.Linux;

            case PlatformID.MacOSX:
                return Platform.Mac;

            default:
                return Platform.Windows;
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T11:50:56.523

也许可以查看Pinta 源代码中的[IsRunningOnMac方法：](https://github.com/jpobst/Pinta/blob/1.6/Pinta.Core/Managers/SystemManager.cs#L125)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-31T23:54:45.943

根据[Environment.OSVersion 属性页面](https://docs.microsoft.com/en-us/dotnet/api/system.environment.osversion?view=netframework-4.7.2)上的注释：

> Environment.OSVersion 属性不提供一种可靠的方法来识别确切的操作系统及其版本。因此，我们不建议您使用此方法。相反：要识别操作系统平台，请使用 RuntimeInformation.IsOSPlatform 方法。

[RuntimeInformation.IsOSPlatform 可以满足](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.runtimeinformation.isosplatform?view=netframework-4.7.2)我的需要。

```
if (RuntimeInformation.IsOSPlatform(OSPlatform.OSX))
{
    // Your OSX code here.
}
elseif (RuntimeInformation.IsOSPlatform(OSPlatform.Linux))
{
    // Your Linux code here.
} 
```

# opengl - OpenGL - 尝试使用 VBO 会导致错误

> ID：10138045
> 
> 赞同：3
> 
> 时间：2012-04-13T09:03:14.370
> 
> 标签：opengl, access-violation, vbo

我在尝试在 OpenGL 中使用 VBO 时遇到问题（使用大量教程） - 每次我调用 glBufferData 时都会弹出“atioglxx.dll 中的访问冲突”错误。我一直在尝试使用不同数据类型的数据、顶点等，但没有成功。伪代码如下：

```
GLDouble[] VertexArray = {1.0, 0.0, 1.0, 0.0, 0.0, -1.0, -1.0, 0.0, 1.0};  
glGenBuffers(1, @VertexList);
glBindBuffer(GL_ARRAY_BUFFER, VertexList);
glBufferData(GL_ARRAY_BUFFER, sizeof(VertexArray), @VertexArray, GL_STATIC_DRAW); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:20:32.330

尝试：

```
glBufferData(GL_ARRAY_BUFFER, sizeof(VertexArray), VertexArray, GL_STATIC_DRAW); 
```

# delphi - 导入系统函数（windows - ntsystem.dll）以用于内联汇编

> ID：10138048
> 
> 赞同：1
> 
> 时间：2012-04-13T09:03:37.317
> 
> 标签：delphi

我需要运行这段代码：

```
asm
 push eax
 mov eax, esp
 push 0
 push 4
 ...
 call NtQueryInformationThread
 ...
end; 
```

但是我收到 NtQueryInformationThread 是“未声明的标识符：'NtQueryInformationThread'”的错误消息。

你能帮我申报吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T09:32:19.620

你缺少的是你需要让你的程序从`ntdll.dll`. 更重要的是，你不需要`asm`它，你真的应该避免使用它，因为它会使你的程序难以维护。

您可以像任何其他 Windows API 函数一样导入该函数：

```
function NtQueryInformationThread(
    ThreadHandle: THandle;
    ThreadInformationClass: THREADINFOCLASS;
    ThreadInformation: Pointer;
    ThreadInformationLength: ULONG;
    ReturnLength: PULONG
): NTSTATUS; stdcall; external 'ntdll.dll'; 
```

您还需要几个类型声明：

```
type
  NTSTATUS = LONG;
  THREADINFOCLASS = DWORD; 
```

# parsing - cxf - 解析soap消息元素的属性

> ID：10138049
> 
> 赞同：0
> 
> 时间：2012-04-13T09:03:40.430
> 
> 标签：parsing, soap, attributes, request, cxf

我收到这样的肥皂请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
        <notifications xmlns="xxxxx">
            <sometags></sometags>
            <Notification>
                <Id>yyyyy</Id>
                <sObject xsi:type="sf:Dog" xmlns:sf="urn:some.enterprise.object.soap.com">
                    <sf:Id>zzzzz</sf:Id>
                </sObject>
            </Notification>
        </notifications>
    </soapenv:Body>
</soapenv:Envelope> 
```

我想知道通知是关于什么样的对象（==我想读取sObject的类型属性，以便我知道谁的sObject类型与**id**标签相关）。

* * *

我希望能够做类似的事情：

if (sObject.type.equals("Dog")) //做某事

if (sObject.type.equals("Cat")) //做其他事情

但我怎样才能在肥皂请求中获得该属性值？

我将 java 与 cxf 库一起使用。

谢谢，

克劳茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:29:55.440

只需使用拦截器并做任何你想做的事。

# pdf-generation - 使用 EvoPDF 生成 PDF/A 无效 PDF/A

> ID：10138052
> 
> 赞同：0
> 
> 时间：2012-04-13T09:03:49.040
> 
> 标签：pdf-generation, pdfa, evopdf

我正在尝试使用 EvoPDF v3.0 从网站生成 PDF/A-1b 文档

当我使用 Adob​​e Preflight 验证输出时，我收到验证错误“子集字体中的 CIDSet 缺失”

有没有办法解决这个问题，或者有人可以建议一个不同的 HTML 到 PDF 生成器，能够生成不使用 IE 进行渲染的 PDF/A-1b？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:30:56.613

我可以自己回答这个问题。

```
pdfConverter.UseCrossRefStreams = false; 
```

# css - LESS 语言和 Less 框架之间的联系是什么？

> ID：10138060
> 
> 赞同：0
> 
> 时间：2012-04-13T09:04:15.833
> 
> 标签：css, less, css-frameworks

我正在研究使用 Less 框架来构建一个新网站，但我对某一点感到好奇。它与 LESS 样式表语言有关吗？Less 甚至使用 LESS 来构建它的 CSS 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:14:29.423

据我所知，[Less 框架](http://lessframework.com)和[LESS 语言](http://lesscss.org)完全不相关。与您所说的相反，该框架似乎甚至没有利用 LESS 的任何语言特性——它的样式表似乎纯粹是用标准 CSS 编写的。[您可以在“入门](http://lessframework.com/#get)”部分的源代码预览中看到它。

# xml - 是否可以在同一个 XML 文件、同一个字段、不同的表中声明？

> ID：10138061
> 
> 赞同：0
> 
> 时间：2012-04-13T09:04:21.690
> 
> 标签：xml, dtd

鉴于下面的 DTD 文件：

```
!ELEMENT hotels (address+)>
<!ELEMENT address (city,street,phone,hotelDetails)>
<!ELEMENT hotelDetails (hotel_code,hotel_rank,hotel_name)>
<!ELEMENT street (#PCDATA)>
<!ELEMENT city (#PCDATA)>
<!ELEMENT hotel_rank (#PCDATA)>
<!ELEMENT phone (#PCDATA)>
<!ELEMENT hotel_code (#PCDATA)>
<!ELEMENT hotel_name (#PCDATA)>

<!ELEMENT guests (id+)>
<!ELEMENT guestDetails (name,city,address,state)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT city (#PCDATA)>
<!ELEMENT address (#PCDATA)>
<!ELEMENT state (#PCDATA)> 
```

如您所见，我有两个不同的表：`hotels`& `guests`，其中两个表都有`city`. 当我尝试保存文件时，`XMLspy`我得到：

```
Element 'city' has already been declared. 
```

有没有办法为两个表声明该字段？

问候

罗恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:08:53.420

你只需要这个元素一次。它可以从 address 和 guestDetails 中引用。

# json - 将 bash 脚本的参数转换为 Web 服务的 JSON 数组

> ID：10138064
> 
> 赞同：2
> 
> 时间：2012-04-13T09:04:49.413
> 
> 标签：json, web-services, bash, arguments

我有一个 Web 服务，它需要 JSON 格式的参数列表。例如，它可以处理的 JSON 是这样的：

```
{
  "args": ["basharg1", "bash arg 2 with spaces", "lastargs"]
} 
```

如何轻松地将参数转换为 bash 脚本以构建包含这种 JSON 的字符串？然后将使用该字符串将`curl`其传递给 Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:08:48.760

这就是我最终如何做到的。随时提出改进建议。

```
#!/bin/bash

ARGS="\"$1\""
shift

while (( "$#" )); do
    ARGS="$ARGS, \"$1\""
    shift
done

ARGUMENTS_JSON="{ \"args\": [$ARGS] }"

echo "$ARGUMENTS_JSON" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-16T15:25:29.333

在 Mac 上，使用 glenn_jackman 方法的较短版本是：

```
ARGS=""; for arg; do ARGS=$(printf '%s"%s"' "$ARGS", "$arg"); done;
ARGS=${ARGS#,}
JSON="{ \"args\": [$ARGS] }"
echo "$JSON" 
```

# web - 为什么我的Common Lisp Web程序执行不了

> ID：10138067
> 
> 赞同：2
> 
> 时间：2012-04-13T09:05:31.317
> 
> 标签：web, lisp

```
; 一些辅助函数
(require :asdf)
(defun loadlib (mod)
  (asdf:oos 'asdf:load-op mod))

(defun reload ()
  (load "web.lisp"))
(defun restart-web ()
  (progn
    (reload)
    (start-web)))

; load 需要的库  
(loadlib :html-template)
(loadlib :hunchentoot)

; 设置 hunchentoot 编码
(defvar *utf-8* (flex:make-external-format :utf-8 :eol-style :lf))
(setq hunchentoot:*hunchentoot-default-external-format* *utf-8*)
; 设置url handler 转发表
(push (hunchentoot:create-prefix-dispatcher "/hello" 'hello) hunchentoot:*dispatch-table*)

; 页面控制器函数
(defun hello ()
  (setf (hunchentoot:content-type*) "text/html; charset=utf-8")
  (with-output-to-string (stream)
    (html-template:fill-and-print-template
     #p"index.tmpl"
     (list :name "Lisp程序员")
     :stream stream)))
; 启动服务器
(defun start-web (&optional (port 4444))
  (hunchentoot:start (make-instance 'hunchentoot:acceptor :port port))) 
```

模板索引.tmpl：</p>

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">  
<html>  
  <head>  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
    <title>Test Lisp Web</title>  
  </head>  
  <body>  
    <h1>Lisp web开发实例&lt;/h1>  
    hi, <!-- TMPL_VAR name -->  
  </body>  
</html> 
```

我访问[http://localhost:4444/hello](http://localhost:4444/hello)时 老是报500错误，怀疑是模板路径，我的操作系统是windows，不知道怎么写这个path.web.lisp跟下面的index.tmpl就一样目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:54:00.037

显而易见的问题是“你评估了`start-web`吗”？这可能是“是”，但请注意，您确实需要调用`start`才能让您的服务器侦听适当的端口。如果您收到 Hunchentoot 错误页面，这不是问题所在。

如何`fill-and-print-template`定义？如果它需要一个绝对路径名，您可能需要做`(merge-pathnames "index.tmpl")`而不是传递相对路径。

一般来说，你可以做一些事情来让 lisp web 开发对你来说更容易。

*   考虑[给自己定义一个包](http://www.gigamonkeys.com/book/programming-in-the-large-packages-and-symbols.html)。这将允许您有选择地导入符号，而不是在每个外部符号前面加上其源包。它还可以让您更轻松地加载自己的项目。

*   考虑使用[quicklisp](http://www.quicklisp.org/beta/)而不是定义自己的`load-lib`. 它使您可以轻松安装和加载外部库（AFAIK，如果您指定的库已经安装，`ql:quickload`无论如何`asdf:load-op`都会失败）

*   看看[cl-who](http://weitz.de/cl-who/)，我发现它比 HTML 模板更友好，就像你正在做的那样

*   考虑使用`hunchentoot:easy-acceptor`and`define-easy-handler`来定义你的页面（它是一种语法糖，让你定义一个处理函数并同时将适当的调度程序推送到`*dispatch-table*`）

*   在调试 Hunchentoot 应用程序时，它有助于`(setf hunchentoot:*catch-errors-p* nil)`（或`(setf hunchentoot:*show-lisp-errors-p* t)`，取决于您的偏好）以获得更好的调试信息。

# string - XSLT - 从文本中过滤单个单词

> ID：10138069
> 
> 赞同：1
> 
> 时间：2012-04-13T09:05:41.810
> 
> 标签：string, xslt

我有像下面这样由 XSLT 解析的字符串

```
boy &quot;happy family&quot; filetype:pdf girl 
```

从上面的字符串中，我只需要过滤掉“boy”和“girl”这两个单词，然后得到另一个字符串

```
boy girl 
```

我该如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:44:25.823

使用 XSLT 2.0，您可以`replace`使用正则表达式的函数，所以这样做`replace('boy &quot;happy family&quot; filetype:pdf girl', '"[^"]*"|\w+:\w+', '')`应该可以工作。对于 XSLT 1.0，我首先会检查您的 XSLT 1.0 处理器是否支持类似的扩展功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T01:49:22.727

**这是一个 XSLT 1.0 解决方案，它使用[FXSL](http://fxsl.sf.net)**提供的标记化（它自己用 XSLT 1.0 编写）和`xxx:node-set()`正在使用的 XSLT 1.0 处理器提供的扩展功能：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common"
 exclude-result-prefixes="ext">
  <xsl:import href="strSplit-to-Words.xsl"/>
  <xsl:output indent="yes" omit-xml-declaration="yes"/>

   <xsl:strip-space elements="*"/>
   <xsl:output indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="/">
      <xsl:variable name="vwordNodes">
        <xsl:call-template name="str-split-to-words">
          <xsl:with-param name="pStr" select="/"/>
          <xsl:with-param name="pDelimiters"
                          select="' '"/>
        </xsl:call-template>
      </xsl:variable>

      <xsl:for-each select=
       "ext:node-set($vwordNodes)/*
         [not(contains(., '&quot;') or contains(.,':'))
        and
          count(preceding-sibling::*[contains(., '&quot;')]) mod 2 = 0
         ]">

        <xsl:value-of select="concat(., ' ')"/>
      </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（提供的文本，包含在单个顶部元素中）时：

```
<t>boy &quot;happy family&quot; filetype:pdf girl</t> 
```

**产生了想要的正确结果**：

```
boy girl 
```

**对于以下更复杂的 XML 文档，会产生相同的正确输出**：

```
<t>boy &quot; very happy family &quot; filetype:pdf girl</t> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:13:45.290

`http://exslt.org/regular-expressions`对于 XSLT 1.0，名称空间中有替换（请参阅[http://exslt.org/regexp/functions/replace/index.html](http://exslt.org/regexp/functions/replace/index.html)），但正如 Martin 指出的那样，您的处理器需要对扩展的支持。

```
<xsl:value-of select="{http://exslt.org/regular-expressions}replace(STRING, '&quot;.*&quot;|\w+:\w+', '')"/> 
```

会给你所要求的。

# c# - edmx 文件中的“实体密钥”是什么？

> ID：10138074
> 
> 赞同：3
> 
> 时间：2012-04-13T09:05:59.003
> 
> 标签：c#, edmx, edmx-designer

在 C# 项目中，首先使用 EF 数据库，我使用 SQL Server Management Studio 将外键添加到表中。

之后，回到 Visual Studio，我已经从数据库中更新了模型，但我看不到两个受影响的表之间的“链接”（即连接 .edmx 图中的两个表的线）。所以在子表的下拉列表中，我看到了这个选项“实体键”，当我点击它时，出现了“链接”。老实说，我不知道也无法理解它的作用，因为我现在可以选中或取消选中它而不会丢失，再说一次“链接”。

你知道为什么会有这种行为吗？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:09:21.510

EntityKey 是（在您的情况下为 SQL）数据库中主键的实体概念。您应该为任何作为主键的列设置它，然后您可以设置实体关联以匹配您的数据库关联。

[使用实体键](http://msdn.microsoft.com/en-us/library/dd283139.aspx)。

设置正确的 EntityKeys 是从 SQL Server[获得正确结果](https://stackoverflow.com/questions/34145074/entityframework-returns-corrupted-swaped-data-from-sql-server-view)的必要条件，因为 EntityKeys 用作内部缓存键。

# ruby - Rails嵌套属性 - 错误的最后输出

> ID：10138077
> 
> 赞同：0
> 
> 时间：2012-04-13T09:06:16.103
> 
> 标签：ruby, ruby-on-rails-3, erb, nested-attributes

我有一个带有嵌套属性 Property 的 Article 对象。现在我想在 show.html.erb 的前面打印它

我可以打印所有属性，但最后我得到一个输出，看起来像一个包含所有对象的地图。我究竟做错了什么？

**显示.html.erb**

```
<p>
  <%= @article.properties.each do |property| %>
      <li>
      <b><%= property.name %></b> <%= property.value %>
      </li>
  <% end %>
</p> 
```

**文章.rb**

```
class Article < ActiveRecord::Base
  has_many :properties
  accepts_nested_attributes_for :properties 
end 
```

**以及浏览器中错误的 html 输出**

```
Property_6588 Value_6588
Property_9390 Value_9390
Property_15367 Value_15367
Property_19710 Value_19710
[#<Property id: 6588, name: "Property_6588", value: "Value_6588", article_id: 4766, created_at: "2012-04-12 13:33:23", updated_at: "2012-04-12 13:33:23">, #<Property id: 9390, name: "Property_9390", value: "Value_9390", article_id: 4766, created_at: "2012-04-12 13:33:29", updated_at: "2012-04-12 13:33:29">, #<Property id: 15367, name: "Property_15367", value: "Value_15367", article_id: 4766, created_at: "2012-04-12 13:33:41", updated_at: "2012-04-12 13:33:41">, #<Property id: 19710, name: "Property_19710", value: "Value_19710", article_id: 4766, created_at: "2012-04-12 13:33:50", updated_at: "2012-04-12 13:33:50">] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:14:35.600

改变

```
<%= @article.properties.each do |property| %> 
```

到

```
<% @article.properties.each do |property| %> 
```

该`=`符号呈现以下语句，在本例中是您正在迭代的集合。

# svn - 使用 hudson 和 svn 需要哪个插件？

> ID：10138082
> 
> 赞同：0
> 
> 时间：2012-04-13T09:06:34.463
> 
> 标签：svn, hudson, hudson-plugins

我是 hudson 的新手，我正在使用 SVN，我想知道将 hudson 与 svn 一起使用是否必须使用任何插件？如果是，哪个插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:13:47.707

完全可以将 SVN 与 Hudson 一起使用，有[SVN 插件](http://wiki.hudson-ci.org/display/HUDSON/Subversion+Plugin)，但正如文档中所说：

> 这个插件向 Hudson 添加了 Subversion 支持（通过 SVNKit）。这个插件捆绑在 hudson.war 中。

所以，你无需添加它，一旦你安装了 hudson，你就有了 SVN 插件。

# python - 如何绘制正态分布

> ID：10138085
> 
> 赞同：145
> 
> 时间：2012-04-13T09:06:41.877
> 
> 标签：python, matplotlib

给定均值和方差，是否有一个简单的函数调用可以绘制正态分布？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-04-13T09:25:09.900

```
import matplotlib.pyplot as plt
import numpy as np
import scipy.stats as stats
import math

mu = 0
variance = 1
sigma = math.sqrt(variance)
x = np.linspace(mu - 3*sigma, mu + 3*sigma, 100)
plt.plot(x, stats.norm.pdf(x, mu, sigma))
plt.show() 
```

![gas 发行版，均值为 0 方差 1](../Images/dff3e4897bd631754bc581d03c865ad0.png)

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-04-13T09:29:36.937

我认为没有一个函数可以在一次调用中完成所有这些。但是，您可以在 中找到高斯概率密度函数`scipy.stats`。

所以我能想到的最简单的方法是：

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.stats import norm

# Plot between -10 and 10 with .001 steps.
x_axis = np.arange(-10, 10, 0.001)
# Mean = 0, SD = 2.
plt.plot(x_axis, norm.pdf(x_axis,0,2))
plt.show() 
```

资料来源：

*   [http://www.johndcook.com/distributions_scipy.html](http://www.johndcook.com/distributions_scipy.html)
*   [http://docs.scipy.org/doc/scipy/reference/stats.html](http://docs.scipy.org/doc/scipy/reference/stats.html)
*   [http://telliott99.blogspot.com/2010/02/plotting-normal-distribution-with.html](http://telliott99.blogspot.com/2010/02/plotting-normal-distribution-with.html)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-08-09T03:43:51.147

使用 seaborn 代替我使用 seaborn 的 distplot，mean=5 std=3 of 1000 个值

```
value = np.random.normal(loc=5,scale=3,size=1000)
sns.distplot(value) 
```

你会得到一个正态分布曲线

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-12-11T23:18:46.590

如果您更喜欢使用逐步的方法，您可以考虑如下解决方案

```
import numpy as np
import matplotlib.pyplot as plt

mean = 0; std = 1; variance = np.square(std)
x = np.arange(-5,5,.01)
f = np.exp(-np.square(x-mean)/2*variance)/(np.sqrt(2*np.pi*variance))

plt.plot(x,f)
plt.ylabel('gaussian distribution')
plt.show() 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-02-07T10:21:31.920

Unutbu 的答案是正确的。但是因为我们的平均值可以大于或小于零，所以我仍然想改变它：

```
x = np.linspace(-3 * sigma, 3 * sigma, 100) 
```

对此：

```
x = np.linspace(-3 * sigma + mean, 3 * sigma + mean, 100) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-06-06T02:09:25.447

我认为设置高度很重要，所以创建了这个函数：

```
def my_gauss(x, sigma=1, h=1, mid=0):
    from math import exp, pow
    variance = pow(sdev, 2)
    return h * exp(-pow(x-mid, 2)/(2*variance)) 
```

哪里`sigma`是标准差，`h`是高度，`mid`是平均值。

这是使用不同高度和偏差的结果：

[![在此处输入图像描述](../Images/c6b09af8336397089c5bd4f780e99ac4.png)](https://i.stack.imgur.com/zRano.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-05T09:34:34.287

我刚刚回到这个问题，我不得不安装 scipy，因为 matplotlib.mlab[`MatplotlibDeprecationWarning: scipy.stats.norm.pdf`](https://stackoverflow.com/questions/49470837/how-to-solve-matplotlibdeprecationwarning-scipy-stats-norm-pdf-warning)在尝试上面的示例时给了我错误消息。所以现在的样本是：

```
%matplotlib inline
import math
import matplotlib.pyplot as plt
import numpy as np
import scipy.stats

mu = 0
variance = 1
sigma = math.sqrt(variance)
x = np.linspace(mu - 3*sigma, mu + 3*sigma, 100)
plt.plot(x, scipy.stats.norm.pdf(x, mu, sigma))

plt.show() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-22T04:36:59.787

您可以轻松获得 cdf。所以pdf通过cdf

```
 import numpy as np
    import matplotlib.pyplot as plt
    import scipy.interpolate
    import scipy.stats

    def setGridLine(ax):
        #http://jonathansoma.com/lede/data-studio/matplotlib/adding-grid-lines-to-a-matplotlib-chart/
        ax.set_axisbelow(True)
        ax.minorticks_on()
        ax.grid(which='major', linestyle='-', linewidth=0.5, color='grey')
        ax.grid(which='minor', linestyle=':', linewidth=0.5, color='#a6a6a6')
        ax.tick_params(which='both', # Options for both major and minor ticks
                        top=False, # turn off top ticks
                        left=False, # turn off left ticks
                        right=False,  # turn off right ticks
                        bottom=False) # turn off bottom ticks

    data1 = np.random.normal(0,1,1000000)
    x=np.sort(data1)
    y=np.arange(x.shape[0])/(x.shape[0]+1)

    f2 = scipy.interpolate.interp1d(x, y,kind='linear')
    x2 = np.linspace(x[0],x[-1],1001)
    y2 = f2(x2)

    y2b = np.diff(y2)/np.diff(x2)
    x2b=(x2[1:]+x2[:-1])/2.

    f3 = scipy.interpolate.interp1d(x, y,kind='cubic')
    x3 = np.linspace(x[0],x[-1],1001)
    y3 = f3(x3)

    y3b = np.diff(y3)/np.diff(x3)
    x3b=(x3[1:]+x3[:-1])/2.

    bins=np.arange(-4,4,0.1)
    bins_centers=0.5*(bins[1:]+bins[:-1])
    cdf = scipy.stats.norm.cdf(bins_centers)
    pdf = scipy.stats.norm.pdf(bins_centers)

    plt.rcParams["font.size"] = 18
    fig, ax = plt.subplots(3,1,figsize=(10,16))
    ax[0].set_title("cdf")
    ax[0].plot(x,y,label="data")
    ax[0].plot(x2,y2,label="linear")
    ax[0].plot(x3,y3,label="cubic")
    ax[0].plot(bins_centers,cdf,label="ans")

    ax[1].set_title("pdf:linear")
    ax[1].plot(x2b,y2b,label="linear")
    ax[1].plot(bins_centers,pdf,label="ans")

    ax[2].set_title("pdf:cubic")
    ax[2].plot(x3b,y3b,label="cubic")
    ax[2].plot(bins_centers,pdf,label="ans")

    for idx in range(3):
        ax[idx].legend()
        setGridLine(ax[idx])

    plt.show()
    plt.clf()
    plt.close() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-02T10:48:55.380

```
import math  
import matplotlib.pyplot as plt
import numpy
import pandas as pd

def normal_pdf(x, mu=0, sigma=1):
    sqrt_two_pi = math.sqrt(math.pi * 2)
    return math.exp(-(x - mu) ** 2 / 2 / sigma ** 2) / (sqrt_two_pi * sigma)

df = pd.DataFrame({'x1': numpy.arange(-10, 10, 0.1), 'y1': map(normal_pdf, numpy.arange(-10, 10, 0.1))})

plt.plot('x1', 'y1', data=df, marker='o', markerfacecolor='blue', markersize=5, color='skyblue', linewidth=1)
plt.show() 
```

[![在此处输入图像描述](../Images/93b68433d85c865d3b532a36007fef33.png)](https://i.stack.imgur.com/CvpBN.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-02T09:11:22.130

对我来说，如果您尝试绘制特定的 pdf，这非常有效

```
theta1 = {
            "a": 0.5,
            "cov" : 1,
            "mean" : 0
        }
x = np.linspace(start = 0, stop = 1000, num = 1000)
pdf = stats.norm.pdf(x, theta1['mean'], theta1['cov']) + theta2['a']   
sns.lineplot(x,pdf) 
```

# android - 测量与特定应用程序相关的功耗

> ID：10138087
> 
> 赞同：3
> 
> 时间：2012-04-13T09:06:46.773
> 
> 标签：android, accelerometer, power-management

作为应用程序测试的一部分，我需要以某种方式测量我的应用程序消耗了多少电池。

在 Android 中，电池设置中有一个图表，我可以在其中看到消耗百分比，以及 CPU 时间或唤醒时间，但是当我的应用程序在运行时连续使用加速度计时会出现问题。

加速器也有最强的待机使用元素，所以我想以某种方式估计它的特定使用情况。

加速器电池使用属于 Android 系统还是 Android 操作系统，或者两者都不属于？

如何准确确定加速器电池使用情况？

注意：我一直在考虑使用万用表和连接在电池和设备电源触点之间的电极来测量实际消耗，但我害怕打破手机。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:10:22.223

取自[如何计算android应用程序的功耗？](https://stackoverflow.com/questions/10074254/how-to-caculate-power-consumption-of-android-app)：

使用 adb 工具可以查看每个正在运行的应用程序的功耗

> adb shell dumpsys cpuinfo

样本输出

> 负载：1.12 / 1.07 / 1.01 CPU 使用率从 11344 毫秒到 1613 毫秒前：10% 122/system_server：5.8% 用户 + 4.5% 内核/故障：989 次要 0% 233/com.htc.android.wallpaper：0% 用户 + 0 % 内核/故障：910 次要 0.8% 271/com.htc.launcher：0.8% 用户 + 0% 内核/故障：832 次要 0% 40/panel_on/0：0% 用户 + 0% 内核 0% 8/挂起： 0% 用户 + 0% 内核 0% 54/synaptics_wq: 0% 用户 + 0% 内核 0.2% 57/w1_bus_master1: 0% 用户 + 0.2% 内核 0% 253/com.android.phone: 0% 用户 + 0% 内核/ 故障：3 次要 0% 13/kondemand/0: 0% 用户 + 0% 内核 0% 56/curcial_wq: 0% 用户 + 0% 内核 0% 2879/com.htc.bg: 0% 用户 + 0% 内核/ 故障：8 次小
> 0% 2904/dhd_dpc: 0% 用户 + 0% 内核 0% 2906/com.google.android.apps.maps:NetworkLocationService: 0% 用户 + 0% 内核

使用

> adb shell dumpsys 电池信息

# objective-c - NSURLRequests 的默认缓存过期时间是多少？

> ID：10138101
> 
> 赞同：8
> 
> 时间：2012-04-13T09:08:21.223
> 
> 标签：objective-c, ios, http, caching, nsurlrequest

我正在使用 NSURLRequest 来检查可用的数据更新。今天我注意到，NSURLRequest 默认缓存请求。即使几个小时后，也没有新的请求发送到服务器。现在我想知道这个缓存的默认行为是什么。缓存的数据什么时候会过时并且新的请求会发送到服务器？数据是静态文件，服务器不发送显式缓存控制标头：

`HTTP/1.1 200 OK
Date: Fri, 13 Apr 2012 08:51:13 GMT
Server: Apache
Last-Modified: Thu, 12 Apr 2012 14:02:17 GMT
ETag: "2852a-64-4bd7bcdba2c40"
Accept-Ranges: bytes
Content-Length: 100
Vary: Accept-Encoding,User-Agent
Content-Type: text/plain`

PS：我的应用程序的新版本设置了明确的缓存策略，因此这不再是问题，但我很好奇默认行为是什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T12:54:47.347

注意：[这里](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html#sec13)详细说明了它应该如何工作

1.  如果没有缓存，则获取数据。

2.  如果有缓存，则检查加载方案

    一个。如果指定了重新验证，请检查更改源

    湾。如果未指定重新验证，则按照 3）从本地缓存中获取）

3.  如果未指定重新验证，则检查本地缓存以查看它是否足够新。

    一个。如果缓存不是陈旧的，那么它会从缓存中提取数据

    湾。如果数据过时，则从源重新验证

从[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Concepts/CachePolicies.html#//apple_ref/doc/uid/20001843-BAJEAIEE)：

> NSURLRequest 实例的默认缓存策略是 NSURLRequestUseProtocolCachePolicy。NSURLRequestUseProtocolCachePolicy 行为是特定于协议的，被定义为协议的最佳一致性策略

从[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Concepts/CachePolicies.html#//apple_ref/doc/uid/20001843-BAJEAIEE)：

> 如果请求的 NSCachedURLResponse 不存在，则从原始源获取数据。如果请求有缓存响应，则 URL 加载系统检查响应以确定它是否指定必须重新验证内容。如果必须重新验证内容，则与原始源建立连接以查看它是否已更改。如果它没有改变，则从本地缓存返回响应。如果已更改，则从原始源获取数据。
> 
> 如果缓存的响应未指定必须重新验证内容，则检查响应中指定的最长期限或过期时间。如果缓存的响应足够新，则从本地缓存返回响应。如果确定响应是陈旧的，则检查原始源是否有更新的数据。如果有更新的数据可用，则从原始源获取数据，否则从缓存中返回。

[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURLRequestUseProtocolCachePolicy)列出的其他选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T08:47:18.167

根据这篇文章：[http](http://blackpixel.com/blog/2012/05/caching-and-nsurlconnection.html) ://blackpixel.com/blog/2012/05/caching-and-nsurlconnection.html ，如果您使用的是 NSURLRequestUseProtocolCachePolicy 并且服务器不返回过期或 max-age，则默认缓存时间间隔是 6 - 24 小时。所以要小心这种情况。使用 NSURLRequestUseProtocolCachePolicy 时设置 max-age 或 expire 是更好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:25:03.690

在我重新启动我的应用程序后，它曾经做一个新的请求。通过重新启动，我通过按两次主页按钮来显示正在运行的应用程序列表，杀死我的应用程序并通过单击应用程序图标重新开始。

如果您愿意，也可以禁用缓存。覆盖 NSURLProtocol 委托的这个方法

//禁用缓存，因为我们的文件存储在多个服务器中，错误的响应缓存可能会导致问题。

```
-(NSCachedURLResponse *)connection:(NSURLConnection *)connection
                 willCacheResponse:(NSCachedURLResponse *)cachedResponse
{
    NSCachedURLResponse *newCachedResponse = cachedResponse;

    //if ([[[[cachedResponse response] URL] scheme] isEqual:@"https"]) 
    {
        newCachedResponse = nil;
    } 
    return newCachedResponse;
} 
```

# java - 如何使用 JMSTemplate 和选择器从 ActiveMQ 接收消息？

> ID：10138103
> 
> 赞同：2
> 
> 时间：2012-04-13T09:08:25.450
> 
> 标签：java, spring, jms, activemq

我正在尝试在持久的 activemq 队列上获取消息。

如果我打电话

```
jmsTemplate.receive("queue.response") 
```

我收到一条消息。但是，如果我打电话

```
jmsTemplate.receiveSelected("queue.response", "JMSCorrelationId='1854044'") 
```

我在等待时超时。

我正在使用 ActiveMQ Web 控制台查看队列，我可以看到消息已准备好被使用。相关 id 在控制台中可见，我还可以在通过直接 receive("queue..") 调用收到的消息中看到它们。

大概我的实际选择器做错了，但是我能找到的每个示例看起来都像我所拥有的。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T01:08:23.590

捂脸！JMSCorrelationID 区分大小写。我试图使用 JMSCorrelationId ...

# html - HTML & CSS 布局流程问题

> ID：10138108
> 
> 赞同：2
> 
> 时间：2012-04-13T09:08:46.067
> 
> 标签：html, css

我有以下两个对齐问题的流程布局

1.  参考图 1：当我更改动物园时，标题信息与徽标重叠。

2.  参考图2：绿色框应位于蓝色框的右侧；目前它正在触底。

我该如何纠正？该代码在[这个小提琴](http://jsfiddle.net/Lijo/L3And/)中可用 。也发在这里。

我确信这是一个非常基本的对齐课程；但是即使经过几个小时我也无法弄清楚？你可以看看它并回答吗？

图 1 ![在此处输入图像描述](../Images/eed218e468c340e05091f77622e0f789.png)

图 2 ![在此处输入图像描述](../Images/1ae502978b41b492db456b1f63c7f518.png)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1">
<title>Support Site </title>
<link href="Styles/MasterStyle.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="wrapper">
    <div id="container">
        <div id="header">
            <div id="logo">
                <img alt="logo" src="Images/Logo.bmp" />
            </div>
            <div id="titleInfo">
                <a href="#">Admin XXXXXXXX Support Site</a>
                <div id="signOut">
                    <a id="logOnStatus" class="signOut" >
                        Logout</a>
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
        <div id="centralContainer">
            <div id="leftNavContainer">
                <div id="subContainerForLeftNav">
                    <div id="adminDiv">
                        <div class="backgroundButton" id="adminButton">
                            <p class="buttonText">
                                The Admin</p>
                        </div>
                    </div>
                    <div class="clear">
                    </div>
                    <div id="vendorDiv">
                        <div class="menuTextHeading">
                            <a class="menuText">The Management</a>
                        </div>
                        <div class="buttonAlign">
                            <div class="backgroundButton" id="connectivityButton">
                                <p class="buttonText">
                                    Test</p>
                            </div>
                            <div class="backgroundButton" id="vendorsButton">
                                <p class="buttonText">
                                    Test</p>
                            </div>
                        </div>
                    </div>
                    <div class="clear">
                    </div>
                    <div id="monitoringDiv">
                        <div class="menuTextHeading">
                            <a class="menuText">Test</a>
                        </div>
                        <div class="buttonAlign">
                            <div class="backgroundButton" id="transactionsButton">
                                <p class="buttonText">
                                    Test</p>
                            </div>
                            <div class="backgroundButton" id="logsButton">
                                <p class="buttonText">
                                    Test</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="mainContainer">
                <div id="transactionContentHolder" class="transactionContentHolder">
                    A
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
    </div>
</div>
</body>
</html> 
```

CSS

```
body
{
   margin: 0px;
   padding: 0px;
   text-align: center;
   background: Yellow;
}

#wrapper
{
   width: 100%;
   height: auto;
   text-align:left;
   margin: 0 auto;
   /*background: #FFBA31;*/
   background: #FFBA31;
}

#container
{
   width: 100%;
   height: auto;
   margin: 0 auto;
   background: white;

}

#header
{
   width: 100%;
   height: 70px;
   background: white;
   padding: 0 0 10px 0;
   border:1px solid Red;

}

#titleInfo
{
font:bold 18pt Arial;
color:#2377D1; 
width:80%;
   height:35px;
   float:right;
   margin:10px 0 0 10px;
   border-bottom:3px solid #fcda55;
   padding: 10px 0 0 0;
   display:inline;

}

#signOut
{
font:bold 9pt Arial;
   float:right;
   border-bottom:none;
   padding: 0px 10px 0 0;
   margin: 0px 0px 30px 0;
   display:inline;
}

#logo
{
  width:15%;
  height:60px;
  float:left;
  margin:0 0 0 20px;
  display:inline;
  padding: 10px 0 30px 0;
}

#centralContainer
{
   width: 100%;
   height:auto;
   margin: 0 auto;
   background: white;
}

#leftNavContainer
{
   width: 20%;
   height: 700px;
   /*float: left;*/
   margin: 0 0 0 10px;
   display: inline;
   background: white;
   border:1px solid Blue;   
}

#subContainerForLeftNav
{
 width: 190px; 
 height: auto;

}

#mainContainer
{
   width: 75%;
   height: 700px;
   float: left;
   margin: 0 0 0 30px;
   display: inline;
   background:white;
   border:1px solid Green;
}

 .menuText
 {
    font:bold 13pt Arial;
   line-height:15pt;
    color:#00A6B5;
 }

.menuTextHeading
{
   height:20px;
   border-bottom:3px solid #fcda55;
   padding:10px 0 10px 0;
   margin:0 0 10px 0;
}

.buttonAlign
{
  height:auto;
  width:auto;
  float: right;
  padding:0 0 0 0;
   margin:0 0 0 0;
}

.backgroundButton
{      
   width:150px;
   height:86px;
   display: block;
    margin: 0px 0px 5px 0px;
   background-image:url('../Images/ButtonBackground.bmp');
}

.buttonText
{

   font:bold 15pt Arial;
   line-height:18pt;
   color:#ffffff;
   padding:40px 15px 0 15px;
   margin:0 0 0 0;
   text-align:center;

}

.clear
{
   clear: both;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:30:53.627

请参阅小提琴的代码和演示

小提琴：http: [//jsfiddle.net/L3And/3/](http://jsfiddle.net/L3And/3/)

演示：http: [//jsfiddle.net/L3And/3/embedded/result/](http://jsfiddle.net/L3And/3/embedded/result/)

截屏：

![在此处输入图像描述](../Images/ed35052a90aa8b374e7f02b841813acd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:33:19.147

```
body {
  margin: 0px;
  padding: 0px;
  text-align: center;
  background: Yellow;
}
#wrapper {
  width: 100%;
  height: auto;
  text-align: left;
  margin: 0 auto;
  /*background: #FFBA31;*/
  background: #FFBA31;
}
#container {
  width: 100%;
  height: auto;
  margin: 0 auto;
  background: white;
}
#header {
  background: none repeat scroll 0 0 white;
  border: 1px solid Red;
  height: 70px;
  margin-bottom: 20px;
  padding: 0 0 10px;
  width: 100%;
}
#titleInfo {
  border-bottom: 3px solid #FCDA55;
  color: #2377D1;
  float: right;
  font: bold 18pt Arial;
  height: 35px;
  margin: 10px 0 0 10px;
  overflow: hidden;
  padding: 10px 0 0;
  width: 55%;
}
#signOut {
  font: bold 9pt Arial;
  float: right;
  border-bottom: none;
  padding: 0px 10px 0 0;
  margin: 0px 0px 30px 0;
  display: inline;
}
#logo {
  border: 1px solid orange;
  float: left;
  height: 32px;
  margin: 03px 0 0 20px;
  padding: 10px 0 30px;
  width: 15%;
}
#centralContainer {
  width: 100%;
  height: auto;
  margin: 0 auto;
  background: white;
}
/*Elements within centralContainer*/

#leftNavContainer {
  background: none repeat scroll 0 0 #CCCCCC;
  border: 1px solid Blue;
  float: left;
  height: 700px;
  margin: 0 0 0 10px;
  width: 20%;
}
#subContainerForLeftNav {
  width: 190px;
  height: auto;
  /*border:1px solid green;*/
}
#mainContainer {
  background: none repeat scroll 0 0 white;
  border: 1px solid Green;
  height: 700px;
  margin: 0 0 0 219px;
  width: 76%;
}
.menuText {
  font: bold 13pt Arial;
  line-height: 15pt;
  color: #00A6B5;
}
.menuTextHeading {
  height: 20px;
  border-bottom: 3px solid #fcda55;
  padding: 10px 0 10px 0;
  margin: 0 0 10px 0;
}
.buttonAlign {
  height: auto;
  width: auto;
  float: right;
  padding: 0 0 0 0;
  margin: 0 0 0 0;
}
.backgroundButton {
  width: 150px;
  height: 86px;
  display: block;
  margin: 0px 0px 5px 0px;
  background-image: url('../Images/ButtonBackground.bmp');
}
.buttonText {
  font: bold 15pt Arial;
  line-height: 18pt;
  color: #ffffff;
  padding: 40px 15px 0 15px;
  margin: 0 0 0 0;
  text-align: center;
}
.clear {
  clear: both;
}
```

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head id="Head1">
  <title>Support Site</title>
  <link href="Styles/MasterStyle.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <div id="wrapper">
    <div id="container">
      <div id="header">
        <div id="logo">
          <img alt="logo" src="Images/Logo.bmp" />
        </div>
        <div id="titleInfo">
          <a href="#">Admin XXXXXXXX Support Site</a>
          <div id="signOut">
            <a id="logOnStatus" class="signOut">
                            Logout</a>
          </div>
        </div>
        <div class="clear">
        </div>
      </div>
      <div id="centralContainer">
        <div id="leftNavContainer">
          <div id="subContainerForLeftNav">
            <div id="adminDiv">
              <div class="backgroundButton" id="adminButton">
                <p class="buttonText">
                  The Admin</p>
              </div>
            </div>
            <div class="clear">
            </div>
            <div id="vendorDiv">
              <div class="menuTextHeading">
                <a class="menuText">The Management</a>
              </div>
              <div class="buttonAlign">
                <div class="backgroundButton" id="connectivityButton">
                  <p class="buttonText">
                    Test</p>
                </div>
                <div class="backgroundButton" id="vendorsButton">
                  <p class="buttonText">
                    Test</p>
                </div>
              </div>
            </div>
            <div class="clear">
            </div>
            <div id="monitoringDiv">
              <div class="menuTextHeading">
                <a class="menuText">Test</a>
              </div>
              <div class="buttonAlign">
                <div class="backgroundButton" id="transactionsButton">
                  <p class="buttonText">
                    Test</p>
                </div>
                <div class="backgroundButton" id="logsButton">
                  <p class="buttonText">
                    Test</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="mainContainer">
          <div id="transactionContentHolder" class="transactionContentHolder">
            A
          </div>
        </div>
        <div class="clear">
        </div>
      </div>
    </div>
  </div>
</body>

</html>
```

这可能会帮助你 [摆弄](http://jsfiddle.net/swamimayank/Bs8AP/)

# python - numpy中的频率波数域和fft2命令

> ID：10138114
> 
> 赞同：0
> 
> 时间：2012-04-13T09:09:12.477
> 
> 标签：python, numpy, frequency

我想使用 numpy 进行双频变换。我有一些时空域的数据，我想在频率波数域中查看它。我认为 numpy 的 ft2 命令可以为我做到这一点，但我有点不确定如何实现它。我的数据在一个二维数组中，`(864000, 2)`第一列是空间数据，第二列是空间数据。我尝试了以下，

```
ft2 = fft2(data)
plot(abs(ft2)) 
```

我得到的东西在中心看起来很平，在角落里爆炸了，我认为这是不对的。任何人都知道如何正确地做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:42:18.490

好的，我误解了用法，对于 fft2，数据需要是 n x m 矩阵，每行应代表不同的时间增量，每列应代表不同的位置。

# iphone - 有没有办法在 iOS 中的应用程序安装和卸载之间保留应用程序数据

> ID：10138115
> 
> 赞同：11
> 
> 时间：2012-04-13T09:09:17.957
> 
> 标签：iphone, ios, ipad

我正在开发一个需要在启动时执行昂贵计算的应用程序。因此，应用程序第一次运行时，应用程序会进行计算并将结果存储在文件中。

如果用户决定卸载应用程序并稍后重新安装，则必须再次进行计算，我想避免重新计算。请注意，我不是在谈论应用程序的更新，而是在谈论卸载/重新安装。

我想知道是否有一种方法可以保留仅对我的应用程序可访问的数据，但可以在卸载后继续存在。

该解决方案可以在设备内部（使用文件/首选项/ ...）或基于服务器。例如，一种可能的解决方案是将设备 ID 与结果一起发送到服务器并将其存储在那里，但由于设备 ID 在 iOS 5 中已被弃用，因此不再是有效的解决方案。

谢谢您的回答。

海梅

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T09:25:54.793

您没有说有多少数据，但以下是选项：

*   iCloud
*   钥匙链
*   投递箱

唯一的“通用”选项，所有设备都将拥有并且不能被禁用，是钥匙串，尽管你受到你可以使用的空间量的限制。

就个人而言，我什么也不做。如果用户删除该应用程序，我认为必须在重新安装时重新计算内容是公平的游戏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T09:28:22.757

迄今为止，我实现这一目标的方法是使用钥匙串。基本上任何符合 NSCoding 的东西都可以存储在钥匙串中。即使仅从“良好的个人实践”的角度来看，谨慎使用钥匙串也是一个好主意。毕竟，一旦它在钥匙串中，它就在那里，直到您专门删除它，并且大概只有您的应用程序会知道用于访问您存储的数据的密钥。

[可以在](http://useyourloaf.com/blog/2010/3/29/simple-iphone-keychain-access.html)Keith Harrison的 Use Your Loaf 博客上找到实现将数据结构存储到钥匙串中的东西的一个非常好的起点。

总之，这是我所知道的唯一一种透明的方法，可以保证卸载后数据的持久性。其他选项，例如 3rd 方存储库 (Dropbox) 或 iCloud，确实依赖于某种程度的用户参与。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T09:41:45.270

请记住，Apple 希望这样：删除应用程序意味着删除该应用程序的所有数据。我更喜欢 iCloud 来保存少量数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:13:03.910

让用户连接到他们的 DropBox 帐户，您可以将数据保存在那里 - 他们的 API 使用起来非常简单，您不必担心 Apple 将来会如何决定实现数据持久性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T14:00:28.473

除了钥匙串和 iCloud 之外的一种选择是 Apple 的 UIPasteboard。[这](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPasteboard_Class/Reference.html)是类参考。有些人认为它不可靠，所以这取决于数据保留对你来说有多重要，我猜。

# sql - 更改 SQL Server 中的列大小

> ID：10138116
> 
> 赞同：340
> 
> 时间：2012-04-13T09:09:20.927
> 
> 标签：sql, sql-server, database, tsql, alter-table

如何将表中`salary`列的列大小`employee`从`numeric(18,0)`更改为`numeric(22,5)`

* * *

## 回答 #1

> 赞同：622
> 
> 时间：2012-04-13T09:12:57.660

```
ALTER TABLE [Employee]
ALTER COLUMN [Salary] NUMERIC(22,5) NOT NULL 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-04-13T09:12:12.687

```
alter table Employee alter column salary numeric(22,5) 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-05-11T11:26:33.287

```
ALTER TABLE [table_name] ALTER COLUMN [column_name] varchar(150) 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-01-05T01:44:11.713

运行`ALTER COLUMN`而不提及属性`NOT NULL`将导致该列被更改为可为空，如果它已经不是。因此，您需要首先检查该列是否可以为空，如果不是，请指定属性`NOT NULL`。或者，您可以使用以下语句预先检查列的可空性并运行具有正确属性的命令。

```
IF COLUMNPROPERTY(OBJECT_ID('Employee', 'U'), 'Salary', 'AllowsNull')=0
    ALTER TABLE [Employee]
        ALTER COLUMN [Salary] NUMERIC(22,5) NOT NULL
ELSE        
    ALTER TABLE [Employee]
        ALTER COLUMN [Salary] NUMERIC(22,5) NULL 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-29T05:59:43.390

右击要修改的表 --> 选择“设计” --> 更改“数据类型”列中的值，如下图所示：

[![数据类型列的屏幕截图，其中列的数据类型值发生更改](../Images/5c661c1c54ba520c94d00a2de32fedd3.png)](https://i.stack.imgur.com/Q2vDV.png)

然后保存完成对表格设计的更改。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-28T20:14:47.337

可以在这里找到有趣的方法：[如何在不停机的情况下扩大您的列，由 spaghettidba](https://spaghettidba.com/2017/11/15/how-to-enlarge-your-columns-with-no-downtime/)

> 如果您尝试使用直接的“ALTER TABLE”命令来扩大该列，**您将不得不等待 SQLServer 遍历所有行并写入新的数据类型**
> 
> ```
> ALTER TABLE tab_name ALTER COLUMN col_name new_larger_data_type; 
> ```
> 
> 为了克服这种不便，您的桌子可以服用一种神奇的列扩大药丸，它被称为**行压缩。**(...) 使用行压缩，您的固定大小的列只能使用实际数据适合的最小数据类型所需的空间。

当表在`ROW`级别压缩时，`ALTER TABLE ALTER COLUMN`只有元数据操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-28T14:51:18.273

您可以使用`ALTER`命令来修改表架构。

修改列大小的语法是

```
ALTER table table_name modify COLUMN column_name varchar (size); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-23T15:39:21.877

ALTER TABLE "Employee" MODIFY ("Salary" NUMERIC(22,5));

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-16T14:25:39.700

对于 Oracle 数据库：

`ALTER TABLE table_name MODIFY column_name VARCHAR2(255 CHAR);`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-06-22T07:18:51.923

在这种情况下，您需要使用 ALTER TABLE 语句来增加列大小。

这是它的语法

ALTER TABLE table_name MODIFY column_name varchar(new_length);

# javascript - 如何在鼠标悬停时在 div 元素周围创建边框

> ID：10138118
> 
> 赞同：7
> 
> 时间：2012-04-13T09:09:39.097
> 
> 标签：javascript, jquery, html, css

我想在一个元素周围创建一个边框，只要鼠标在它上面。我正在尝试使用：

```
$("body").mouseover(function(e){
    var element =  document.elementFromPoint(e.clientX,e.clientY);
    var target = $(e.target);
    if (target.is("div")) {
        element.style.border = "1px solid blue";
        currentElt = target;
    }
    element.onmouseout = function(){
        this.style.border = "0px";
    }
}); 
```

但是会发生什么，**由于边界附近的 DOM 元素位置受到干扰**。所以，我在想的是围绕该元素创建一个透明的 DIV，并在鼠标移出时删除该透明的 div。

请帮我解决这个想法。我无法弄清楚。这该怎么做 ？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-13T09:16:34.950

正如其他答案所建议的那样，您可以使用 CSS 来做到这一点。

> 但是会发生什么，由于边框，接近 DOM 元素的位置会受到干扰。所以，我在想的是围绕该元素创建一个透明的 DIV。和鼠标。删除那个。

在这种情况下，听起来您应该[使用`outline`](https://developer.mozilla.org/en/CSS/outline)而不是`border`.

```
div:hover {
    outline: 1px solid blue;
} 
```

[http://jsfiddle.net/thirtydot/Xuddz/](http://jsfiddle.net/thirtydot/Xuddz/)

轮廓在元素“上方”绘制，因此不会干扰其他元素的位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T09:13:47.670

这不是 JavaScript/jQuery 问题！改用 CSS！

```
div:hover {
    border: 1px solid blue;
} 
```

为了消除干扰相邻元素的效果，在正常状态下在其周围使用透明边框。

```
div {
    border: 1px solid transparent;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T09:14:01.517

只需为此使用 CSS，例如：

```
div { background: red; border: 1px solid transparent; }
div:hover { border: 1px solid green; } 
```

演示：http: [//jsfiddle.net/KQzRh/](http://jsfiddle.net/KQzRh/)

**更新**

请注意，[@thirtydot 的回答](https://stackoverflow.com/questions/10138118/how-to-create-border-around-div-element-on-mouseover/10138165#answer-10138193)将是首选方式，但 IE7 不支持它（我认为 IE6 不支持）。再说一遍：是否支持 IE7 取决于您。

在这种情况下，你会这样做：

```
div:hover { outline: 1px solid green; } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-13T09:16:47.557

您需要有一个白色/透明边框**，该边框等于将出现在悬停时的边框宽度。**

```
.element { border: 1px solid transparent; }
.element:hover { border: 1px solid #000; } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T09:18:13.923

如果您真的想使用 JS / jQuery，您应该将`mouseover`（即悬停）处理程序绑定到 div 而不是正文（为您节省痛苦的上下文设置）。像：

```
$('div').hover(function(){
   $(this).css('border','1px solid blue');
},function(){
   $(this).css('border','1px solid transparent');
}); 
```

看到**[这个小提琴](http://jsfiddle.net/HdQ8b/2/)**。

但话又说回来，这也可以用纯 CSS 来完成（更好更简单）：

```
div:hover{
border: 1px solid blue;
} 
```

看**[另一个小提琴](http://jsfiddle.net/HdQ8b/1/)**

如果使用`border`使您的布局跳跃（因为边框会增加元素的尺寸），您可以`outline`改用（从@thirtydot 的答案中无耻地窃取）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T09:26:20.417

这个很简单，只用css就可以了。试试这个

```
<html xmlns="http://www.w3.org/1999/xhtml">     
  <head>
    <title>Horton Computer Solutions Home</title>
  </head>

  <style type="text/css">
    .some_class:hover{
      color: orange;
      border:2px solid #3300FF;
     }
  </style>
<body>
  <div class="some_class" style="width:290px;"> some text here <br/></div>
 </body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-26T22:46:51.463

我认为[`box-sizing: border-radius`](https://www.w3schools.com/cssref/css3_pr_box-sizing.asp)应该在这里提到，即使这是一个相当古老的问题。

如果您添加了使用过的 CSS 并应用于`box-sizing: border-box`元素，附近的 DOM 元素位置受到干扰不会受到干扰。为什么？因为`box-sizing: border-box`包括边框和填充作为宽度的一部分。

```
section {  overflow: hidden;  }
div {width: 33.333%; float: left;}

.b-r div {
  box-sizing: border-box;
}

div:hover {
  border: 10px blue solid;
}
```

```
<section class="b-r">
  <strong>These divs have border-radius.</strong><br>
  <div>Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.</div>
  <div>Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.</div>
  <div>Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.</div>
</section>

<section class="nob-r">
  <strong>These divs do not have border-radius.</strong><br>
  <div>Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.</div>
  <div>Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.</div>
  <div>Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.</div>
</section>
```

您也可以`box-sizing: border-radius`在您的示例中使用，一切都已修复！

```
$("body").mouseover(function(e) {
  var element = document.elementFromPoint(e.clientX, e.clientY);
  var target = $(e.target);
  if (target.is("div")) {
    element.style.border = "1px solid blue";
    currentElt = target;
  }
  element.onmouseout = function() {
    this.style.border = "0px";
  }
});
```

```
section {
  overflow: hidden; /* Prevent Clearfix */
}

div {
  width: 33.333%;
  float: left;
}

.b-r div {
  box-sizing: border-box;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<section class="b-r">
  <strong>These divs have border-radius.</strong><br>
  <div>
    Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.
  </div>

  <div>
    Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.
  </div>

  <div>
    Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.
  </div>
</section>

<section class="nob-r">
  <strong>These divs do not have border-radius.</strong><br>
  <div>
    Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.
  </div>

  <div>
    Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.
  </div>

  <div>
    Some Text, and more text, and more text, and even more text. Some Text, and more text, and more text, and even more text.
  </div>
</section>
```

# flash - JWplayer透明屏颜色参数

> ID：10138121
> 
> 赞同：2
> 
> 时间：2012-04-13T09:09:57.867
> 
> 标签：flash, transparency, flv, jwplayer

我有用 VP6 flash 8 和 alpha 编码的 FLV 文件。在 JWPlayer 设置中更改 screencolor 参数时，我可以看到不同背景颜色的电影（在透明部分）。但是，我无法使用 JWPlayer 5.9 版将背景配置为完全透明。

将screencolor设置为白色时，背景中有一个白灰色渐变，

这是我的配置代码：

```
<script type="text/javascript">
  jwplayer("container").setup({
    flashplayer: "jwPlayer/player.swf",
    file: "views/stylesheets/images/welocomeMovie.flv",
    autostart: true,
    controlbar: 'over',
    height: 200,
    width: 360,
    screencolor: 'FFFFFF'
    wmode : 'transparent',
  });
</script> 
```

你知道如何使背景透明吗？

谢谢，暗里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:51:08.277

屏幕颜色：'FFFFFF' wmode：'透明'，

你的逗号应该在 screencolor:'FFFFFF' 之后

# perl - 无法使用 WSDL::Generator 运行 Perl Web 服务

> ID：10138127
> 
> 赞同：16
> 
> 时间：2012-04-13T09:10:28.897
> 
> 标签：perl, soap, wsdl

我已经尝试了两个星期在 Perl 中创建一个 Web 服务（使用[`WSDL::Generator`](https://metacpan.org/module/WSDL%3a%3aGenerator)）并使用一个用 Perl 编写的客户端调用它。

现在我尝试使用专门针对 WSDL 的库提供的示例：[`Soap::Lite`](https://metacpan.org/module/Soap%3a%3aLite) 但我得到一个不断出现的错误

```
404 file not found at c.PL at line 7. 
```

你能帮我解决吗？

这是我的代码：

`WorldFunctions.pm`(C:\Perl\SOAP-Lite\WorldFunctions.pm)：类

```
package WorldFunctions;
    sub new { bless {}, shift; }
    sub Hello { my ($s, $name) = @_;
            return 'Hello, ' . $name . "\n";
    }
    sub GoodBye { my ($s, $name) = @_;
            return 'Goodbye, ' . $name . "\n";
    } 
```

`a.pl`(C:\Perl\SOAP-Lite\a.pl)：创建 WorldFunctions.pm 类的 WSDL 文件

```
#!/usr/bin/perl
use WSDL::Generator;
my $init = {
        'schema_namesp' => 'http://localhost/world/WorldFunctions.xsd',
        'services'      => 'WorldFunctions',
        'service_name'  => 'WorldFunctions',
        'target_namesp' => 'http://localhost/world',
        'documentation' => 'Simple Hello World SOAP Service.',
        'location'      => 'http://localhost/world'
};
my $w = WSDL::Generator->new($init);
WorldFunctions->Hello('Joe');
WorldFunctions->GoodBye('Joe');
print $w->get(WorldFunctions); # Returns the WSDL code for a specific class
open(TOTO,"<a.wsdl");
close(TOTO);
open(TOTO,">a.wsdl");
print TOTO $w->get(WorldFunctions);
close(TOTO); 
```

`c.pl`(C:\Perl\SOAP-Lite\c.pl)：perl 客户端 WSDL 文件

```
#!/usr/bin/perl 
use DBI();
use CGI;
use SOAP::Lite;
my $service = SOAP::Lite-> service('file:a.wsdl');   
print "test retour : |".$service-> Hello('Joe')."|"; 
```

知道我使用本地服务器（带有 WAMP 服务器）并将其复制到我的目录 WorldFunctions.pm localhost / world 中。

这是 WSDL 文件：

```
<?xml version="1.0"?>
<definitions name="WorldFunctions" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" targetNamespace="http://localhost/world" xmlns:tns="http://localhost/world" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:xsdl="http://localhost/world/WorldFunctions.xsd">
    <types>
        <xsd:schema targetNamespace="http://localhost/world/WorldFunctions.xsd">
            <xsd:element name="GoodByeRequest" type="xsd:string" />
            <xsd:element name="GoodByeResponse" type="xsd:string" />
            <xsd:element name="HelloRequest" type="xsd:string" />
            <xsd:element name="HelloResponse" type="xsd:string" />
        </xsd:schema>
    </types>
    <message name="GoodByeRequest">
        <part name="GoodByeRequestSoapMsg" element="xsdl:GoodByeRequest"/>
    </message>
    <message name="GoodByeResponse">
        <part name="GoodByeResponseSoapMsg" element="xsdl:GoodByeResponse"/>
    </message>
    <message name="HelloRequest">
        <part name="HelloRequestSoapMsg" element="xsdl:HelloRequest"/>
    </message>
    <message name="HelloResponse">
        <part name="HelloResponseSoapMsg" element="xsdl:HelloResponse"/>
    </message>
    <portType name="WorldFunctionsWorldFunctionsPortType">
        <operation name="GoodBye">
            <input message="tns:GoodByeRequest" />
            <output message="tns:GoodByeResponse" />
        </operation>
        <operation name="Hello">
            <input message="tns:HelloRequest" />
            <output message="tns:HelloResponse" />
        </operation>
    </portType>
    <binding name="WorldFunctionsWorldFunctionsBinding" type="tns:WorldFunctionsWorldFunctionsPortType">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
            <operation name="GoodBye">
                <soap:operation style="document" soapAction=""/>
                <input>
                    <soap:body use="literal"/>
                </input>
                <output>
                    <soap:body use="literal"/>
                </output>
            </operation>
            <operation name="Hello">
                <soap:operation style="document" soapAction=""/>
                <input>
                    <soap:body use="literal"/>
                </input>
                <output>
                    <soap:body use="literal"/>
                </output>
            </operation>
    </binding>
    <service name="WorldFunctions">
        <documentation>
            Simple Hello World SOAP Service.
        </documentation>
        <port name="WorldFunctionsWorldFunctionsPort" binding="tns:WorldFunctionsWorldFunctionsBinding">
            <soap:address location="http://localhost/world"/>
        </port>
    </service>
</definitions> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-13T08:16:52.437

It looks like you are not mapping `http://localhost/world` to the SOAP handler that can handle the request, hence you are getting a 404 for that URL.

You need to configure apache so there is something at that URL.

[http://metacpan.org/pod/SOAP::WSDL::Server::Mod_Perl2](http://metacpan.org/pod/SOAP::WSDL::Server::Mod_Perl2)

# extjs4 - TreeStore 扩展功能无法从服务器加载数据

> ID：10138134
> 
> 赞同：0
> 
> 时间：2012-04-13T09:11:02.240
> 
> 标签：extjs4

我有绑定了 TreeStore 的标准 TreePanel。我创建简单的对话框来添加新的子项。这里列出了点击保存按钮后的代码：

```
 if (wnd.parent)
                    parent = wnd.parent
                else
                    parent = tree.getRootNode();

                parent.data.leaf = false;
                parent.appendChild( rec );

                //tree.selectPath(rec.getPath());
                parent.expand(); 
```

但是在 expand() 调用之后，节点会展开并只显示我用 appendChild 附加的项目。如果在新会话中，我单击此项目，它会开始加载并从服务器获取所有子项目。

问：如何使expand() 正常工作，并从服务器加载所有记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:21:03.760

移至 Ext4.1 后解决

# windows-phone-7 - VS2010上的空引用异常错误

> ID：10138137
> 
> 赞同：2
> 
> 时间：2012-04-13T09:11:08.040
> 
> 标签：windows-phone-7

我遇到了一个空引用异常问题

```
var stream = Application.GetResourceStream(new Uri("/Vid_VGA_Client_.raw", UriKind.RelativeOrAbsolute)).Stream; 
```

我将文件移动到名为 Video 的新解决方案文件夹中。然后，当我调试它时，出现空引用异常错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:13:56.307

调用`Application.GetResourceStream`没有返回任何内容，因此最后的`.Stream`属性访问正在尝试调用空引用上的属性。

当然，这只是一个猜测。

您需要修复资源访问路径以包含我认为的新文件夹，例如：

```
/Video/Vid_VGA_Client_.raw 
```

# xml - 如何在 Powershell 中确定 XML 类型？

> ID：10138138
> 
> 赞同：4
> 
> 时间：2012-04-13T09:11:20.893
> 
> 标签：xml, powershell, types, casting

我正在编写一个脚本，它应该查看文件的内容并确定它是否是（格式正确的）XML。我在 [ss64.com][1] 上找到了一个页面，这很容易做到：

```
>32 -is [int]
True 
```

然而，问题是我只能通过将左侧转换为 XML 文件来测试它：

```
>[xml](Get-Content c:\Path\To\xml_file.xml) -is [xml]
False 
```

...在这种情况下，这将毫无意义：如果文件是 XML，则转换已经证明了这一点，否则抛出异常。因此我想知道：有没有办法以真假方式确定 Powershell 中的 XML 文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T09:20:25.627

试试`-as`运营商：

```
[bool]((Get-Content c:\Path\To\xml_file.xml) -as [xml]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:28:16.887

```
function Is-Valid-XML 
{
    param ([string] $path)

    $xml = New-Object System.Xml.XmlDocument
    try 
    {
        $xml.Load($path)
        $valid = $true
    }

    catch
    {
        $valid = $false
    }

    return $valid
} 
```

# perl - perl 中的“#”问题

> ID：10138141
> 
> 赞同：1
> 
> 时间：2012-04-13T09:11:30.657
> 
> 标签：perl

我遇到了一个我无法通过下面的子程序理解的问题：

```
sub password()
{
$StdIn = new Win32::Console(STD_INPUT_HANDLE);
my $Password = "";

$StdIn->Mode(ENABLE_PROCESSED_INPUT);
print "Enter Password: ";

    while (ord(my $Data = $StdIn->InputChar(1)) !=10) 
    { 

               if("\r" eq $Data )
            {
            last;
        }
         elsif ("\ch" eq $Data)
         {
            if( "" ne chop( $Password ))
             {
                print "\ch \ch";
             }
            next;
        }
    $Password .=$Data;
    print "*";
    }

 return $Password;

} 
```

除非密码包含“#”，否则上述脚本可以正常工作。如果它包含“#”，则调用上述子程序的主子程序没有与工具连接，我需要自动化。尽管该工具没有问题`#`——当我手动使用它时，“它可以很好地使用#”。所以我认为 Perl 本身存在一些问题。你能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:30:09.620

首先，使用[Term::Prompt](http://search.cpan.org/perldoc/Term%3a%3aPrompt)而不是自己弄乱控制台。

```
#!/usr/bin/env perl

use strict; use warnings;
use Term::Prompt;

my $pass = prompt P => 'Password: ', undef, undef;
print "$pass\n"; 
```

至于您的问题，我假设问题出在您未显示的部分。但是，请注意

1.  使用`Win32::Console->new` [而不是间接的对象语法](http://www.modernperlbooks.com/mt/2009/08/the-problems-with-indirect-object-notation.html)。

2.  一定要使用[strict](http://perldoc.perl.org/strict.html)和[warnings](http://perldoc.perl.org/warnings.html)。

3.  在输入密码之前，您正在打印的`*`字符不会出现。如果您坚持用 Perl 编写 C，请`local $| = 1`在您之前使用。`while`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:40:19.967

您是否尝试显示输入？只需编写 print $Data; 看看它是否接受输入。

# excel - excel数据拆分/分配

> ID：10138142
> 
> 赞同：1
> 
> 时间：2012-04-13T09:11:56.477
> 
> 标签：excel, vba

我在 excel 中获得了一个输入文件，该文件仅沿“M2”列向下移动。把输入文件长这样：

```
ru_utime     0.060              
ru_stime     0.140              
ru_maxrss    0                          
ru_ixrss     0                          
ru_ismrss    0                          
ru_idrss     0                          
ru_isrss     0                          
ru_minflt    4124                       
ru_majflt    0                          
ru_nswap     0                          
ru_inblock   0                          
ru_oublock   0                          
ru_msgsnd    0                          
ru_msgrcv    0                          
ru_nsignals  0                          
ru_nvcsw     47174                      
ru_nivcsw    4347                       
================================================== 
```

然后它以相同的格式重复大约 1000 次以上

正如您所看到的，它在同一列中有两位信息，然后下一组由 === 分隔我想要做的是忽略每一位的标题并获取右侧的信息并将它们移动到下面的不同列彼此。

我想要做的是阅读文件并将所有信息放在像 ru_utime : **0.060**这样的不同列下

所以所有数据都在“M2”中，我想获取相应的标题信息并将它们移动到每个标题的 S2、T2、U2 中，然后当它点击时 ======= 为它下面的下一个做. 如果这对任何人都有意义，我将非常感谢您的帮助。

目的是通过单击按钮自动移动，谢谢

添加：

```
Sub incorperate()
sn = Split(Join(Application.Transpose(Sheets("sheet2").Cells(1).CurrentRegion.Columns(1)), "|"), String(62, "=") & "|")
With Sheets("sheet1").Cells(1).CurrentRegion
st = .Rows(1).Offset(.Rows.Count).Resize(UBound(sn) + 1)
End With

For j = 0 To UBound(sn)
sq = Split(sn(j), "|")
For jj = 0 To UBound(sq) - 1
  st(j + 1, jj + 1) = Split(sq(jj))(UBound(Split(Trim(sq(jj)))))
Next
Next

Sheets("sheet1").Cells(Rows.Count, 1).End(xlUp).Offset(1).Resize(UBound(st), UBound(st, 2)) = st
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:50:38.823

```
Sub move()
Dim x, y(), i&, j&, k&, s

x = Range("S1", Cells(1, Columns.Count).End(xlToLeft)).Value
With CreateObject("Scripting.Dictionary")
    .CompareMode = 1
    For i = 1 To UBound(x, 2)
        .Item(x(1, i)) = i
    Next i

    x = Application.Trim(Range("M2", Cells(Rows.Count, "M").End(xlUp)).Value)
    ReDim y(1 To UBound(x), 1 To .Count): j = 1

    For i = 1 To UBound(x)
        If InStr(x(i, 1), "==") = 0 Then
            s = Split(x(i, 1))
            If .Exists(s(0)) Then
                k = .Item(s(0)): y(j, k) = s(UBound(s))
            End If
        Else
            j = j + 1
        End If
    Next i
End With

[s2].Resize(j, UBound(y, 2)).Value = y()
End Sub 
```

# php - 在数据库中存储大量标记的最佳方法是什么？

> ID：10138143
> 
> 赞同：4
> 
> 时间：2012-04-13T09:11:58.553
> 
> 标签：php, javascript, mysql, google-maps, database-design

我想使用谷歌地图、php、mysql 和 javascript 创建一个网站，用户可以在地图上留下带有消息的标记，以便其他用户能够在他们的地图上看到这个标记。所有这些都是实时的。

我想标记的数量会很大，所以我决定使用图块将标记存储在数据库中：

你可以在这里看到解释这个的图片

[http://kunuk.wordpress.com/2011/11/05/google-map-server-side-clustering-with-asp-net/](http://kunuk.wordpress.com/2011/11/05/google-map-server-side-clustering-with-asp-net/)

[http://www.soak.co.uk/blog/server-side-map-marker-clustering/](http://www.soak.co.uk/blog/server-side-map-marker-clustering/)

因此，例如，在开始时确定客户端视口的坐标并计算要从服务器加载的图块，然后服务器确定所请求图块中的标记并将它们发送给客户端。

我的问题是组织将按图块存储标记的数据库的最佳方法是什么？

smn 可以显示一个示例，还是已经有针对此问题的标准解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:22:15.507

我认为你过于复杂了。如果您唯一存储的是标记（纬度和经度），那么单个数据库表就可以了。

就像是：

*   ID
*   用户身份
*   tile_id
*   纬度
*   隆
*   信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:33:14.220

如果您打算使用大量标记，请务必查看 google fusion tables：

[https://developers.google.com/fusiontables/](https://developers.google.com/fusiontables/)

你可以在这里阅读更多关于它的信息：

[https://developers.google.com/maps/articles/toomanymarkers](https://developers.google.com/maps/articles/toomanymarkers)

# c# - 用于查询 Active Directory 的任务并行库（使用 DirectoryServices）

> ID：10138148
> 
> 赞同：4
> 
> 时间：2012-04-13T09:12:36.740
> 
> 标签：c#, .net, active-directory, task-parallel-library, directoryservices

我从 Active Directory 中提取了大约 400 个对象，然后将它们缓存了一个小时。速度取决于流量或我点击的域控制器，但即使在最好的情况下，它仍然有点慢，太慢了，我不喜欢。

我想知道 DirectoryServices 是否是并行库的合理候选者，或者出于某种原因它是否是一个坏主意。有没有人有过

有没有人有这方面的经验？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:08:26.420

据我了解并行库不会改变任何东西。

首先，确保您的 DNS 设置正确。

400 个对象不算多，优化目录请求和最小化网络流量（仅获取所需的属性）将获得最佳结果。

[使用带有System.DirectoryServices.Protocols (S.DS.P)](http://msdn.microsoft.com/en-us/library/bb332056.aspx)的低级（本机 LDAP）协议，您将获得更好的性能。

# windows - 如何实现多 vpn 动态路由表 NDIS 微型端口驱动程序？

> ID：10138152
> 
> 赞同：1
> 
> 时间：2012-04-13T09:13:01.500
> 
> 标签：windows, vpn, ndis, miniport

我想编写一个 NDIS 微型端口驱动程序，作为虚拟适配器映像描述在此处弹出（就像 VMWare 一样）。其目的是将数据包转发到现有连接的 vpn 内部 IP（适配器）。可能有许多现有的 vpn 连接。我的驱动程序通过不同的进程将数据包转发给其中一个（这些进程可能连接到同一个 IP，因此用于区分不同连接的路由表将不起作用）。

我可以参考的任何提示或示例？谢谢。 ![数字](../Images/5af404010509d59ce12c5df7bcef35fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T01:40:23.987

NDIS 驱动程序是低级的。他们不了解用户模式进程；当数据包到达 NDIS 时，所有进程上下文都消失了。由于您的问题陈述似乎非常关心用户模式进程标识，因此 NDIS 驱动程序可能不是该问题的合适解决方案。

听起来您可以使用[WFP](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366510%28v=vs.85%29.aspx)将流量引导到适当的接口。WFP 本质上是一个巨大的规则引擎：有输入规则（例如“进程名称是 'notepad.exe'”或“用户是 'bob'”）和输出操作（例如“将所有流量重新路由到网络接口 42”）。如果您足够幸运能够使用内置规则和操作来表示您的问题，那么您甚至可能根本不需要编写任何内核代码。（想想你会节省的所有时间！）

如果由于某种原因您不能使用 WFP（也许您需要以 Windows XP 为目标），那么您应该研究编写 Winsock LSP。LSP 插入目标进程内的套接字代码，并可以进行某种程度的流量操作。

# android - 为每个项目设置可绘制的列表视图背景

> ID：10138156
> 
> 赞同：1
> 
> 时间：2012-04-13T09:13:28.363
> 
> 标签：android, listview, custom-lists

我有黑色背景的默认列表视图，我希望它是这样的：

![在此处输入图像描述](../Images/9202e63271106cd362df7fde5c2e85fe.png)

或者：

![在此处输入图像描述](../Images/ec6a504eebb17420d74c46bc4f69f20e.png)

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:28:40.337

如果您使用数组适配器，您应该创建两个布局。在其中一个定义列表视图元素的视图中，另一个必须包含`<listview>`标签。

在 onCreate 中：

```
public class ListAction extends Activity {
    private ListView lv1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list);

        lv1 = (ListView) findViewById(R.id.listView);

            ArrayAdapter<CharSequence> adapter = ArrayAdapter
                    .createFromResource(this, some array,
                            R.layout.list_items);
            lv1.setAdapter(adapter);
            cats = getResources().getStringArray(some array);

        lv1.setTextFilterEnabled(true);
        lv1.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> a, View v, int position,
                    long id) {

            }
        });
    }
} 
```

你应该使用`R.array.<name>`而不是 `some array`

list_item.xml 示例：

```
 <?xml version="1.0" encoding="utf-8"?>
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/text1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:paddingBottom="8.0dip"
        android:paddingLeft="12.0dip"
        android:paddingRight="3.0dip"
        android:paddingTop="8.0dip"
        android:textColor="#ffffffff"
        android:textSize="10.0pt"
        android:textStyle="italic"
        android:background="@drawable/list_bg"
        android:text="List Item" /> 
```

list.xml 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/white" >

    <ListView
        android:id="@+id/listView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:divider="@drawable/divider" />

</LinearLayout> 
```

有关更具体的布局，您可以查看此链接[http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

* * *

**补充：** 首先您可以在 list.xml 中更改整个布局的背景，也可以使用自定义分隔符（您应该使用`divider`上面的标签）。

您不能将其他布局添加到 list_item.xml 中，但可以用于`android:background`设置项目背景。我从未使用过，但我知道它有效。要进行更多更改，您应该使用 simplearray 或编写自己的适配器。

示例如何使用渐变（我将它用于按钮）：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
    <corners android:radius="12px" />
    <gradient
        android:angle="90"
        android:endColor="#color2"
        android:startColor="#color1"
        android:type="linear" />
</shape> 
```

# rdf - SPARQL INSERT 使用密码

> ID：10138159
> 
> 赞同：4
> 
> 时间：2012-04-13T09:13:42.283
> 
> 标签：rdf, sparql, endpoint, virtuoso

我目前通过 SPARQL-Endpoint 使用 HTTP-GET/POST 将 RDF 数据存储到 Virtuoso 中。但是对于插入/删除图形内容并在之后撤销它，总是“授予权限”到“SPARQL”有点缺乏安全性。所以，我的问题是：在 SPARQL 查询中使用 INSERT 或 DELETE 是否有更安全的方法？我知道使用 Jena 你没有这个问题，但我想避免使用 Java。

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:03:11.567

由于都是 HTTP，您可以在 SPARQL 端点前面放置一个 HTTP“反向代理”，在本地对 Update 端点进行防火墙，然后公开代理。您可以在代理上设置安全策略。例如，Apache 或 Nginx 可以很容易地用作反向代理。

您可以在各个网站上找到有关如何配置密码安全性的说明。

# ios - 你可以在 Xcode 4.3.2 中拥有具有相同产品名称的 iOS 2 不同目标吗？

> ID：10138164
> 
> 赞同：5
> 
> 时间：2012-04-13T09:13:58.080
> 
> 标签：ios, xcode, lldb

我有一个 iOS 应用程序有 2 个目标的项目：Pro 和 Lite：

它们具有相同的产品名称。他们有不同的图标。他们有不同的捆绑ID。

我以前只能在 Xcode 中切换左上角的方案来运行 Pro 或 Lite 版本，它们可以作为两个完全独立的应用程序在一部手机上共存。

我刚刚更新到 Xcode 4.3.2，现在各种东西都出了问题。有时我会在 iPhone 上看到 2 个应用程序。有时它会用新的目标覆盖先前执行的目标。有时它会显示错误的图标（带有 Lite 代码的 Pro 图标）。

自从我更新 Xcode 以来，我没有更改任何代码。

Xcode 4.3.2 打破了这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T09:56:41.773

事实证明，您需要确保您的 2 个目标具有 unique`bundle ids`和 unique `product names`。

要使应用程序在 iPhone 跳板上具有相同的名称，您可以将 设置`bundle display name`为相同的字符串。

# android - 在不等待响应的情况下将使用日志发送到服务器的最佳方法是什么

> ID：10138168
> 
> 赞同：1
> 
> 时间：2012-04-13T09:14:16.743
> 
> 标签：android, http

我正在通过http post向我的服务器发送使用日志，例如按钮单击或页面导航，现在我正在使用asynctask doInBackground，但我的doInBackground方法在服务器响应之前不会完成。

问题是：有没有更好的方法只是发送 http 帖子并忽略来自服务器的响应。但我需要确保服务器记录日志。

```
private static class Async extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        String url = "server url";
        DefaultHttpClient httpclient = new DefaultHttpClient();
        httpclient.getCredentialsProvider().setCredentials(AuthScope.ANY, new UsernamePasswordCredentials("username", "password"));
        HttpPost httppost = new HttpPost(url);
        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("DeviceOS", "Android"));
            nameValuePairs.add(new BasicNameValuePair("OSVersion", osVersion));
            nameValuePairs.add(new BasicNameValuePair("DeviceManufacturer", manufacturer));
            nameValuePairs.add(new BasicNameValuePair("Model", model));
            // and some more
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String responseBody = httpclient.execute(httppost, responseHandler);

        } catch (ClientProtocolException e) {
            // Error msg will be here = e.getMessage();
        } catch (IOException e) {
            // Error msg will be here = e.getMessage();
        }
        return null;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:16:11.210

尝试这个..

```
Thread r = new Thread(){
public void run(){
  //post request
}

}.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:59:19.640

我整理了一个android的异步http操作库，看看能不能帮到你。您可以从活动或 IntentService 进行异步 http 调用

[https://github.com/nareshsvs/android-libraries](https://github.com/nareshsvs/android-libraries)

# django - 在 django-tastypie 中返回 POST 数据

> ID：10138169
> 
> 赞同：27
> 
> 时间：2012-04-13T09:14:22.657
> 
> 标签：django, post, tastypie

我认为创建对象的函数返回新创建的对象是一个标准。

那么，知道你是如何在美味派中做到这一点的吗？当我发送 POST 请求时，对象被创建，但我没有得到任何响应。我想要的是接收新创建的对象（或至少是 PK）的 JSON 形式。

我尝试覆盖该`dehydrate`方法，但似乎在 POST 时甚至没有调用它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-13T09:55:23.323

不敢相信答案如此简单。

[http://django-tastypie.readthedocs.org/en/latest/resources.html#always-return-data](http://django-tastypie.readthedocs.org/en/latest/resources.html#always-return-data)

只需添加`always_return_data = True`到您的`Meta`.

# javascript - 如何用 JavaScript 中的 DOM 操作函数替换元素内容？

> ID：10138172
> 
> 赞同：3
> 
> 时间：2012-04-13T09:14:39.757
> 
> 标签：javascript, html, css, dom

我有一个元素，看起来像这样：

```
 <div id="test">
    <span>You have
    <em>30</em>
    <span> characters left</span>
 </div> 
```

我想将其替换为：

```
 <div id="test">
    <span>You reached the maximum length</span>
 </div> 
```

或与

```
 <div id="test">
    <span>Your text is </span>
    <em>30</em>
    <span> characters to long</span>
 </div> 
```

有没有办法用一组新元素替换所有子元素？目前我正在使用以下功能首先删除所有元素：

```
function emptyElement(id) {
    while(document.getElementById(id).hasChildNodes()) {
        document.getElementById(id).removeChild(document.getElementById(id).firstChild)
    }
} 
```

之后我再次添加内容：

```
span1 = document.createElement("span");
span1.appendChild(document.createTextNode("You have "));

len = document.createElement("em");
len.appendChild(document.createTextNode(length));

span2 = document.createElement("span");
span2.appendChild(document.createTextNode(" characters left."));

// remove child elements
emptyElement('test');

// Add content
document.getElementById('test').appendChild(span1);
document.getElementById('test').appendChild(len);
document.getElementById('test').appendChild(span2); 
```

我的印象是（1）删除子元素，（2）生成内容和（3）将新元素添加到 div 可能有一种更简单的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T09:17:43.220

1.  删除可以通过使用更轻松地完成`element.innerHTML = '';`
2.  生成内容也可以更容易地完成，既可以使用添加内容`.innerHTML`，也可以缓存元素集合。

    *或者*
3.  `elem.parentNode.replaceChild(new_elem, elem);`在`#test`元素上将是最简单的方法。

## 使用缓存的 DOM 元素

**演示：http: [//jsfiddle.net/aKASN/1/](http://jsfiddle.net/aKASN/1/)**

HTML：

```
<input type="text" id="input">
<div id="test"></div> 
```

JavaScript：

```
window.onload = function() {
    // References
    var limit_reached = document.createElement('div');
    limit_reached.id = 'test';
    limit_reached.innerHTML = 'You reached the maximum length';

    var chars_left = document.createElement('div');
    chars_left.id = 'test';
    chars_left.innerHTML = 'You have <em id="number_of_chars">30</em> characters left';

    document.getElementById('input').onkeyup = function() {
        var char_count = this.value.length;
        var limit = 20;
        var test = document.getElementById('test');

        if ( char_count > limit ) {
            test.parentNode.replaceChild(limit_reached, test);
        } else {
            chars_left.getElementsByTagName('em')[0].innerHTML = limit - char_count;
            test.parentNode.replaceChild(chars_left, test);
        }
    };
}; 
```

## 使用隐藏元素（推荐）

**我推荐**的另一种方法是使用 CSS 将所有元素包含在其中并隐藏未使用的消息。这比 DOM 操作更有效，因为不必一遍又一遍地创建元素。

## 演示：http: [//jsfiddle.net/aKASN/](http://jsfiddle.net/aKASN/)

CSS：

```
.hidden {display:none;} 
```

HTML：

```
<input type="text" id="input">
<div><!-- Original id="test" -->
   <span id="charsleft" class="hidden">
      You have
      <em id="number_of_chars">30</em>
      characters left
   </span>
   <span id="limit_reached" class="hidden">
       You reached the maximum length
   </span>
</div> 
```

JavaScript：

```
window.onload = function() {
    // References
    var chars_left = document.getElementById('charsleft');
    var number_of_chars = document.getElementById('number_of_chars');
    var limit_reached = document.getElementById('limit_reached');
    var input = document.getElementById('input');

    input.onkeyup = function() {
        // Example value:
        var char_count = input.value.length;

        // Example: 20 character limit
        if ( char_count > 20 ) {
            chars_left.className = 'hidden';
            limit_reached.className = '';
        } else {
            chars_left.className = '';
            number_of_chars.innerHTML = 20 - char_count;
            limit_reached.className = 'hidden';
        }
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:17:36.513

这更容易，但丑陋：

```
function emptyElement(id) {
    document.getElementById(id).innerHTML = '';
}
function newContent(id, newHTML) {
    document.getElementById(id).innerHTML = newHTML;
} 
```

用法：

```
newContent('test', '<span>You have </span><em>' + length + '</em><span> characters left.</span>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:18:16.517

尝试

```
document.getElementById(id).innerHTML = 'new html'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T09:19:33.447

如果您的内容不是很多用户 .innerHTML

```
 <div id="test">
    <span>You have
    <em>30</em>
    <span> characters left</span>
 </div> 
```

可以换成

```
<div id="test">
    <span>You reached the maximum length</span>
 </div> 
```

通过使用

```
document.getElementById('test').innerHTML = '<span>You reached the maximum length</span>'; 
```

# jmeter - 指定时间的while循环迭代

> ID：10138179
> 
> 赞同：0
> 
> 时间：2012-04-13T09:15:19.893
> 
> 标签：jmeter

我有一个while循环，对于这个while循环我只想迭代20次并执行子操作，我怎样才能在JMeter中实现这一点。任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:58:02.927

您可以使用[计数器](http://jmeter.apache.org/usermanual/component_reference.html#Counter)。

# c# - 动态选择测试以使用 webdriver 运行

> ID：10138181
> 
> 赞同：1
> 
> 时间：2012-04-13T09:15:45.913
> 
> 标签：c#, selenium, nunit, webdriver

我是一名从事自动化工作的测试人员，最近正在研究 webdriver，我了解了 pageObjects 以及如何使用 Nunit 运行测试的想法。我的问题是我不想以预定义的顺序运行测试。我们目前拥有的 GUI 自动化解决方案使用 ModelBasedTesting 工具 GraphWalker 在执行时生成测试序列，我想继续使用这种方法。

简而言之，它的工作原理如下：一个图表包含操作和验证步骤以及一些逻辑来确定如何“走图表”。每个步骤代表一个要在 webdriver 中执行的方法。

我当然可以做很多方法并一个一个地调用它们，但是那样我就没有像 Nunit 这样的测试框架或 PageObjects 的结构的良好支持。

我（认为）我想要的是：

```
[TestFixture]
public abstract class LoginTest : TestFixtureBase
{
    [Test]
    public void e_test1()
    {
        loginPage = PageBase.GetInstance<Login>(driver, "Title");                
        accountHome = loginPage.MainLogin(username, password);
        Assert.IsTrue(accountHome.UserLoggedIn(),"fail");
    }
    [Test]
    public void v_test1()
    {
        loginPage = accountHome.LogOut();
        Assert.IsTrue(loginPage.UserLoggedOut(), "Fail");
    }
    .
    .
    .
    [Test]
    public void e_testN()
    {
        //Do something
    } 
```

然后，当我运行图表时，它给了我“e_test2”作为第一步，魔术代码运行 e_test2()。下一步是“v_test1”，以便执行测试。任何人都知道如何做到这一点？

更新：我已经尝试了 TestCaseSource 属性并让它工作，但只有当它在测试之前运行图表并返回完整序列时。我正在寻找一种在“在线”时间执行一个步骤的方法。这有效：

```
 [Test, TestCaseSource("RunModel")]
    public void LoginAndOut(string method)
    {
        object obj = this.GetType().InvokeMember(method, BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Public, null, this, null);
    }

    public string[] RunModel()
    {
        List<string> methods = new List<string>();
        while (Model.graphWalker.HasNextStep())
        {
            methods.Add(Model.graphWalker.GetNextStep().ToString());
        }
        return methods.ToArray();
    } 
```

但我想完成类似的事情：

```
 while (Model.graphWalker.HasNextStep())
        {   //Get next method from GraphWalker Soap-service.
            nextMethodToRun = Model.graphWalker.GetNextStep().ToString());
            //handle Method result, if ok continue.
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:45:58.390

放弃 NUnit 并使用 Gallio/MbUtnit 和 DynamicTestFactory 找到了解决方案。按预期工作。

```
 [DynamicTestFactory]
    public IEnumerable<Test> LoginAndOut() 
    {
        string method;
        while (Model.graphWalker.HasNextStep())
        {
            method=Model.graphWalker.GetNextStep().ToString();
            if (method == string.Empty)
                break;
            yield return new TestCase(method, () =>
                {
                    object obj = this.GetType().InvokeMember(method, BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Public, null, this, null);
                });
        }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:03:26.393

您需要在 GraphWalker 和您的代码之间创建一个适配器 - 解析 GraphWalker 创建的路径并相应地启动所需的测试方法，即创建您的测试类的实例（那时它不能是抽象的）并调用所需的方法.

# ldap - 使用 LDAP 链接身份验证

> ID：10138182
> 
> 赞同：1
> 
> 时间：2012-04-13T09:15:46.110
> 
> 标签：ldap, openldap

我有以下两个 ldap (slapd) 服务器：

**公司网**

*   ou=用户，dc=公司，dc=com
    *   uid=员工1
    *   uid=员工2

**opensourceproject.com**

*   ou=users,dc=opensourceproject,dc=com
    *   uid=成员1
    *   uid=成员2

我想要实现的是，客户端（bugzilla、svn 等）可以透明地查询**opensourceproject.com** ldap 以获取两台服务器上的用户。查询可以是：*“check authenticationof uid=employee1”*，由客户端发送到**opensourceproject.com** ldap 服务器。服务器现在应该查看他的列表并查看用户是否可用，如果不链接到**company.com** ldap 并查看那里，如果存在：返回结果。

有可能实现这一目标吗？大多数客户需要一个搜索库来查找成员，所以我可能会在*ou=users,dc=opensourceproject,dc=com上进行搜索，这在***company.com**服务器上不存在，所以我不确定如何连接两棵树。如果我使用空的搜索库，那会起作用吗？我想我可能会遇到各种装订麻烦。

是否可以使用 ldap 进行这项工作？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:34:54.703

至少存在四种可能的解决方案：

*   LDAP客户端必须执行两次搜索，一次使用与用户在一台服务器上的位置相对应的基础对象，另一次以与用户在另一台服务器上的位置相对应的基础对象进行搜索；必须为每台服务器调整要检索的搜索范围、过滤器和属性。此解决方案虽然可行，但形式不佳，因为 LDAP 客户端必须知道两组不同的信息（每个服务器一组），这使得该解决方案无法扩展、脆弱和脆弱。还有一个策略问题：如果两个服务器都存在一个身份验证 ID，应该使用哪个身份验证？
*   使用支持 DN 映射的 LDAP 代理服务器，其中代理服务器可以将查询转换`dc=opensourceproject,dc=com`为`dc=company,dc=com`. 这样的产品可以从[UnboundID](http://www.unboundid.com/products/directory-proxy-server.php)购买。上述政策问题适用。
*   使用同步服务器*将*两台服务器上的数据合并，并将结果存放在第三台服务器中，由 LDAP 客户端查询。然后由同步服务器管理上述策略问题。
*   手动合并两台服务器上的数据。

# java - 使用适配器将类映射到视图的更好方法

> ID：10138185
> 
> 赞同：0
> 
> 时间：2012-04-13T09:16:03.577
> 
> 标签：java, android

我的 android 应用程序中有一组类，它们都是反序列化的`JSON`（不使用 gson 或 jackson）。所有这些类都映射到一些视图。

例如，我有一个项目列表，并且该列表项中应该存在一些类字段。

一旦我有多个这样的列表，我就不想`ListAdapter`为每个班级写一个。所以我正在寻找一种更好的方法来将类字段映射到列表中的视图。

前段时间我写了一个简单的适配器来映射`String[]`.`views`

这是[https://github.com/marwinxxii/ccardstats/blob/master/src/com/github/marwinxxii/ccardstats/gui/TextMappingAdapter.java](https://github.com/marwinxxii/ccardstats/blob/master/src/com/github/marwinxxii/ccardstats/gui/TextMappingAdapter.java)

现在我有了一个想法，让我的所有类都实现，这样我就可以使用**get**和**put**`interface Map`方法轻松访问它们的字段。如果我不需要每次都创建并通过，也更容易从。****`TextMappingAdapter``List<String[]>``List&lt;Map&gt;``deserialize``JSON`****

 ****这是一个好的解决方案还是有更好的方法来做到这一点？我考虑过反射，但它肯定比实现地图接口要慢（不是吗？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:31:24.707

为什么不向序列化对象添加一个接口并创建一个足够通用的适配器来绑定到该新接口****

# jquery - 只有在我开始滚动时才可以调用函数吗？

> ID：10138191
> 
> 赞同：3
> 
> 时间：2012-04-13T09:16:28.133
> 
> 标签：jquery, scroll

> **可能重复：**
> [我可以在 jQuery 上为滚动事件的开始和结束声明逻辑吗？](https://stackoverflow.com/questions/4096429/can-i-declare-logic-on-jquery-for-the-start-and-end-of-a-scrolling-event)

试过这个：

```
$(window).scroll(function() {
    console.log("ciao");
}); 
```

但是在滚动过程中会调用该函数。我只想在开始滚动时打印“ciao”。比没有。好吧，在阻止滚动之后，当我重新启动时，再次打印“ciao”，依此类推。

只有在我开始滚动时才可以调用函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:19:40.850

```
$(window).bind("scrollstart", function() {
console.log("ciao");
}); 
```

您必须首先包含`jquery.scroll.events.js`文件。[你可以在这里](http://code.google.com/p/jquery-scroll-events/wiki/Reference)和[这里](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)寻找更多

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T09:21:46.567

jQuery 没有内置函数可以让您检测滚动开始或停止事件。

有几个插件可以启用这个功能，试试[这个](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)。

然后，您可以将代码更改为：

```
$(window).on('scrollstart', function() {
    console.log("ciao");
}); 
```

# c - malloc 基于现有文件的文件缓冲区大小

> ID：10138192
> 
> 赞同：0
> 
> 时间：2012-04-13T09:16:33.187
> 
> 标签：c, malloc, stdio, fseek

在我的项目中，我需要将共享文件复制到一个名为 share 的目录中。我的想法是使用 fgets 和 fputs 复制此文件的包含：

```
FILE *fp;
int size;
char *fileBuff

fseek(fp,0,SEEK_END );
size=ftell(fp);
printf("Size of %s: %d bytes.\n",path,size); // print correct size 
fileBuff=malloc(size); // mallocate the file buffer
printf("\nsize of file buffer is %d",sizeof(fileBuff)); //always print 4!!
while(!feof(fp)){
    fgets(fileBuff,size,fp); // put into file buffer

}
printf("\nsize of file buffer is %d",sizeof(fileBuff)); // also print 4!! 
```

但是，文件缓冲区不能被分配，这个文件缓冲区的大小总是4。发生了什么？

更新：似乎有一些误解。sizeof() 如果只是为了检查文件缓冲区中是否存储了任何东西。我确实尝试了 strlen(fileBuff)，它总是给我 1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T09:18:00.507

这是错误的：`sizeof(fileBuff)`。这将是指针的大小，在您的系统上为 4。

您不能使用`sizeof`“提取”返回的内存块的大小`malloc()`。您不能使用*任何东西*来提取该大小，这在（标准）C 中根本不可能。您需要使用该`size`值，即`malloc()`.

此外，`[ftell()](http://linux.die.net/man/3/ftell)`returns `long`、 not`int`和 both`malloc()`以及各种 I/O 调用都可能失败，您需要考虑到这一点。

在我看来，使用文件大小的缓冲区进行简单复制并不是一个好主意；最好使用“合理”的缓冲区（其确切的最佳大小取决于很多因素），然后在循环中重复读写对，直到您流式传输整个文件。

*更新*有关您的代码的更多要点：

1.  您谈论使用`strlen()`，但代码也显示`sizeof`在 之后`fread()`。
2.  您谈论使用`sizeof`“检查”缓冲区中是否有任何东西，这是不可能的；任何带有 的表达式`sizeof`总是在编译时评估¹，它不能用于检查这样的动态事物。而且，同样，您不能使用它来计算由`malloc()`.
3.  `strlen()`仅当文件是二进制文件并且在其最后位置包含 '\0' 时，在保存文件数据的缓冲区上使用 才能可靠地工作，否则您将有一个未终止的字符串并`strlen()`可能调用未定义的行为。
4.  正如我所说，您需要检查是否`malloc()`返回`NULL`，如果它未能分配请求的内存块，它将执行此操作。

¹除了 C99 中的[灵活数组](http://en.wikipedia.org/wiki/Sizeof#Using_sizeof_with_arrays)，但让我们忽略它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T09:19:18.400

99 位开发人员现在将回答您正在获取指针的大小。我什至不必看代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:05:00.413

*除了对sizeof()*的不当使用之外，您还可以考虑另外 2 个想法：

如果只是复制文件：不要试图重新发明轮子，只需使用*system()*函数并调用为此设计的操作系统程序（*cp*在 unix 上，在 DOS/Windows上*复制）。*

如果它是出于培训目的，因此您坚持自己做：不要尝试读取整个文件然后再次将其写出，而是逐块读取和写入。使用大缓冲区大小只会导致 CPU 缓存毫无价值。通常匹配文件系统缓冲区大小或它的一小部分是一个好的块大小，所以伪代码应该如下所示：

```
open input file for reading
open output file for writing
as long as read from input file BUFSIZE bytes and read bytes > 0
     do write read data to output file
close input file
close output file 
```

（并且不要忘记在*每次*调用 I/O 例程后检查 I/O 错误！）

最后一点：除非您确定它始终是纯文本文件，否则不要使用*fgets() 。*如果您选择使用*fread()/fwrite()*，即使它是二进制文件（也更快），您也可以保存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:18:12.057

`char *`您（32 位）平台上的指针 ( ) 的大小始终为 4。

您无法`sizeof`确定为缓冲区分配了多少内存。

要检查指针是否已分配，请检查以下的返回值`malloc()`：

```
fileBuff = malloc(size);

if (fileBuff == 0) {
   fprintf(stderr, "Error allocating %d bytes.\n", size);
   abort();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T09:20:15.193

`sizeof`在*编译*时进行评估，因为您要`sizeof`的`filebuf`是`char*`编译器计算它是 4 个字节（因为指针的大小是 4 个字节 ub 您的平台）并打印它。你所做的`malloc`与你无关`sizeof`。

# algorithm - 需要有关设计算法的建议

> ID：10138195
> 
> 赞同：1
> 
> 时间：2012-04-13T09:16:46.353
> 
> 标签：algorithm

我正在设计一个工作原理如下的算法：

假设有 N 个插槽，它们最初是空的，并且每个插槽都有唯一的编号。

随着时间的流逝，物品将到达并存入编号与物品编号匹配的插槽中。但是，假定物品到达的顺序是随机的。

同时，会定期执行合并算法来合并相邻的占用槽，这样槽会随着时间的推移变得越来越“连接”，最终变成一个大的占用槽，此时算法终止。

PS我的算法是串行的。合并部分在新槽位被占用一定数量后定期激活。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:22:42.470

您可能正在寻找基于[**disjoint-set**](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)的东西。

从集合开始`n`，每个集合都有一个空槽，一旦填满两个相邻的槽，就“合并”[联合]它们。这可以通过在每个集合**的每个根中维护“最高”和“最低”字段来完成。**

一旦你输入一个元素，你需要找到它的根[用这个数据结构很容易做到]，并将它与 - 合并，`set[root.highest+1]`如果`set[root.lowest-1]`它们都已经“填充”了。

每次合并还必须修改 root.highest 和 root.lowest 字段，但是`O(1)`一旦你找到了新的根，这可以很容易地在 中完成。

如果将[不相交集实现为 forests](http://en.wikipedia.org/wiki/Disjoint-set_data_structure#Disjoint-set_forests)，则算法的初始化时间为`O(n)`[where`n`是 slot 的数量]，并且每个插入操作是`O(alpha(n))`where`alpha(n)`是 inverse [ackerman function](http://en.wikipedia.org/wiki/Ackermann_function)，它是亚对数的。

# windows-xp - 如何像 Windows XP 一样在桌面图标上绘制带有阴影的文本？

> ID：10138199
> 
> 赞同：4
> 
> 时间：2012-04-13T09:17:06.780
> 
> 标签：windows-xp, gdi, shadow, drawtext

Windows XP 绘制带有漂亮阴影的图标文本，这有助于阅读各种背景上的文本。字体颜色为白色，阴影为黑色（如果桌面背景为白色）或根本没有阴影（如果桌面背景为黑色）。

所以有两个子任务：

1.  阴影是如何绘制的？它不是文本的简单 x,y 偏移；阴影对我来说更像是一种模糊。

2.  如何使阴影的行为方式在白色背景上变得更明显而在黑暗中变得不那么明显？

我需要 GDI（不是 GDI+）的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:27:28.887

请阅读[使用 Windows GDI 的发光和阴影效果](http://www.codeproject.com/Articles/21071/Glow-and-Shadow-Effects-using-Windows-GDI)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:33:39.057

受到[Chris Becke 在此线程中的回答的启发](https://stackoverflow.com/questions/1340166/transparency-to-text-in-gdi)

如果您需要快速且不那么脏的解决方案，您可能还需要执行以下操作：

在黑色位图上绘制文本，然后将其 alpha 混合到主 hdc，但是：将目标矩形 -1 .. 2 移动 x 并将 -1 .. 3 移动 y （即循环中的多个混合）。为了实现阴影淡化效果，相应地修改 SourceConstantAlpha 以用于外部混合（|x| > 1 或 |y| > 1）。

这是一个粗略的方法，请随意尝试细节。

我不确定这种解决方案的性能和视觉质量方面，但在某些情况下可能就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T12:48:37.653

另请参阅此处的 DrawShadowText 函数：[在图像上写入透明文本](https://stackoverflow.com/questions/360476/writing-transparent-text-on-image)

函数原型是这样的：procedure DrawShadowText(aCanvas: TCanvas; CONST Text: string; CONST X, Y, Opacity: Integer; TextColor, ShadowColor: TColor);
它可以使用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-17T06:41:36.873

另一个 DrawShadowText 函数，这次基于 MS Win API。需要 Windows Vista 及更高版本。

来源：[https ://www.delphipraxis.net/66678-drawshadowtext-delphi-commctrl-h-comctl32-dl​​l-3.html](https://www.delphipraxis.net/66678-drawshadowtext-delphi-commctrl-h-comctl32-dll-3.html)

这是英文版：

```
{-------------------------------------------------------------------------------------------------------------
  Unit ShadowText by Matthias G. aka turboPASCAL
  Version 1.0 (VCL)
  Draws text with shadow (This unit provides the function DrawShadowText from the ComCtl32.dll)

  Minimum req:
     Windows Vista
     Comctl32.dll v6

     If running under XP or without Windows XP Manifest, a substitute function is used to display the shadow.
     From the user manual: To use DrawShadowText, specify Comctl32.dll version 6 in the manifest. For more information on manifests, see Enabling Visual Styles.

  Src: https://www.delphipraxis.net/66678-drawshadowtext-delphi-commctrl-h-comctl32-dll-3.html
  API docs: https://docs.microsoft.com/en-us/windows/win32/api/commctrl/nf-commctrl-drawshadowtext
  Tester: c:\Myprojects\Project Testers\gr cGraphUtil.pas\
-------------------------------------------------------------------------------------------------------------}

UNIT ShadowText;

INTERFACE

USES
  Windows, SysUtils, System.Classes, Graphics;

VAR
   // determines whether the alternative shadow should be used if the function from ComCtl32.dll is not available
   UseLQShadow : Boolean = True;

  // Output of a text with shadow by specifying X and Y coordinates
  function DrawShadowText(ACanvas: TCanvas; x, y: Integer; AText: string; TextColor, ShadowColor: TColor; ShadowSpaceX, ShadowSpaceY: Integer): Integer;

  // Output of a text with shadow over a TRect structure with specification of the text formatting (text flags see Delphi help "DrawText")
  function DrawShadowTextR(ACanvas: TCanvas; TextRect: TRect; x, y: Integer; AText: string; TextColor, ShadowColor: TColor; ShadowSpaceX, ShadowSpaceY: Integer; TextFlags: DWord): Integer;

IMPLEMENTATION

TYPE
  TDrawShadowTextI = function(hdc: HDC;
    pszText: LPCWSTR;
    cch: UINT;
    const pRect: PRect;
    dwFlags: DWORD;
    crText: COLORREF;
    crShadow: COLORREF;
    ixOffset: Integer;
    iyOffset: Integer): Integer; stdcall;

VAR
  hComCtl32DLL: THandle = 0;
  DrawShadowTextI: TDrawShadowTextI;
  OldCanvasColor: TColor;
  OldBkModeColor: Integer;

// DrawShadowText as declared in ComCtl32.dll ( requires WindowsXP-Manifest! )
// function DrawShadowText_(hdc: HDC; pszText: LPCWSTR; cch: UINT; const pRect: PRect; dwFlags: DWORD; crText: COLORREF; crShadow: COLORREF; ixOffset: Integer; iyOffset: Integer): Integer; stdcall; external 'ComCtl32.dll' name 'DrawShadowText';

// Determines whether a Windows version from WinXP on is available.
function IsWindowsXPAndUp: Boolean;
begin
  Result := ((Win32MajorVersion = 5) and (Win32MinorVersion >= 1)) or (Win32MajorVersion > 5);
end;

// DrawShadowTextL (L - Low Quality)
function DrawShadowTextL(ACanvas: TCanvas; TextRect: TRect; AText: string;
  TextColor, ShadowColor: TColor; ShadowSpaceX,
  ShadowSpaceY: Integer; TextFlags: DWORD): Integer;
begin
  OldBkModeColor := SetBKMode(ACanvas.Handle, TRANSPARENT);
  OldCanvasColor := ACanvas.Font.Color;

  if UseLQShadow
  then
   begin
    inc(TextRect.Left, ShadowSpaceX);
    inc(TextRect.Top, ShadowSpaceY);
    inc(TextRect.Right, ShadowSpaceX);
    inc(TextRect.Bottom, ShadowSpaceY);

    ACanvas.Font.Color := ShadowColor;

    Result := DrawText(ACanvas.Handle, PChar(AText), length(AText), TextRect, TextFlags);

    dec(TextRect.Left, ShadowSpaceX);
    dec(TextRect.Top, ShadowSpaceY);
    dec(TextRect.Right, ShadowSpaceX);
    dec(TextRect.Bottom, ShadowSpaceY);
   end
  else
    Result := 1;

  ACanvas.Font.Color := TextColor;
  Result := Result AND DrawText(ACanvas.Handle, PChar(AText), length(AText), TextRect, TextFlags);

  ACanvas.Font.Color := OldCanvasColor;
  SetBKMode(ACanvas.Handle, OldBkModeColor);
end;

// DrawShadowText: für einfache Ausgabe
function DrawShadowText(ACanvas: TCanvas; x, y: Integer; AText: string; TextColor, ShadowColor: TColor; ShadowSpaceX, ShadowSpaceY: Integer): Integer;
VAR TextRect: TRect;
begin
  TextRect := RECT(x, y, x + ACanvas.TextWidth(AText), y + ACanvas.TextHeight(AText));

  if @DrawShadowTextI <> nil
  then Result := DrawShadowTextI(ACanvas.Handle, PWideChar(WideString(AText)), length(AText), @TextRect, 0, COLORREF(TextColor), COLORREF(ShadowColor), ShadowSpaceX, ShadowSpaceY)
  else Result := DrawShadowTextL(ACanvas, TextRect, AText, TextColor, ShadowColor, ShadowSpaceX, ShadowSpaceY, 0);
end;

// DrawShadowTextR: for formatted output (R - Text[R]ect)
function DrawShadowTextR(ACanvas: TCanvas; TextRect: TRect; x, y: Integer; AText: string; TextColor, ShadowColor: TColor; ShadowSpaceX, ShadowSpaceY: Integer; TextFlags: DWord): Integer;
begin
  if @DrawShadowTextI <> NIL
  then Result := DrawShadowTextI(ACanvas.Handle, PWideChar(WideString(AText)), length(AText), @TextRect, TextFlags, COLORREF(TextColor), COLORREF(ShadowColor), ShadowSpaceX, ShadowSpaceY)
  else Result := DrawShadowTextL(ACanvas, TextRect, AText, TextColor, ShadowColor, ShadowSpaceX, ShadowSpaceY, TextFlags);
end;

initialization
  if IsWindowsXPAndUp then
   begin
    hComCtl32DLL := LoadLibrary('ComCtl32.dll');
    @DrawShadowTextI := GetProcAddress(hComCtl32DLL, 'DrawShadowText');
   end;

finalization
  if hComCtl32DLL <> 0
  then FreeLibrary(hComCtl32DLL);

end. 
```

# html - HTML/CSS：子元素比相对定位的父元素更宽

> ID：10138202
> 
> 赞同：3
> 
> 时间：2012-04-13T09:17:16.177
> 
> 标签：html, css

所以我有一个像这样的无序列表：

```
<nav id="breadcrumbs">
        <a href="#" id="home"></a>
        <ul id="parent">
            <li><a href="#">Health, Safety and Security</a>
                <ul class="child">
                    <li><a href="#">Getting started</a></li>
                    <li><a href="#">Communication</a></li>
                    <li><a href="#">Personal and people development</a></li>
                    <li><a href="#">Quality</a></li>
                    <li><a href="#">Equality, diversity and rights</a></li>
                    <li><a href="#">Clinical skills</a></li>
                    <li><a href="#">Additional materials</a></li>
                </ul>
            </li>
            <li><a href="#">Infection control</a>
                <ul class="child">
                    <li><a href="#">Record keeping</a></li>
                    <li><a href="#">Confidentiality and consent</a></li>
                    <li><a href="#">Protecting vulnerable people</a></li>
                    <li><a href="#">Workplace safety and security</a></li>
                </ul>
            </li>
            <li><a href="#">Hand hygiene</a></li>
        </ul>
    </nav> 
```

`<ul class="child">`可能需要比它的 parent 更宽`<li>`。但是，父级`<li>`必须具有`position: relative;`原样`<ul class="child">`并`position: absolute`采用一个`left`值来定位其父级。

这是相关的CSS：

```
#breadcrumbs ul#parent {
    height: 39px;
    width: 905px;
    float: right;
    position: relative;
    background: #f38630;
}

#breadcrumbs ul#parent li {
    position: relative;
    height: 39px;
    float: left;
    min-width: 1px; /* required to fix Opera bug */
    padding: 0 47px 0 15px;
    line-height: 39px;
}

#breadcrumbs ul#parent li a {
    display: block;
    height: 42px;
}

#breadcrumbs ul li a:hover {
    color: #ffffff;
    text-decoration: underline;
}

#breadcrumbs ul li a:visited {
    color: #ffffff;
}

#breadcrumbs ul#parent li ul {
    position: absolute;
    width: auto;
    left: -5px;
    top: 42px;
}

#breadcrumbs ul#parent li ul li {
    float: none;
    height: 25px;
    margin: 0 3px 3px 3px;
    padding: 0 15px;
    line-height: 25px;
} 
```

我意识到我可以给`<ul class="child">`一个比它的父级更大的宽度，但我希望它和最大的孩子一样宽，而不是固定的大小。

有谁知道这怎么可能？

可以在此处找到正在使用的代码的实时示例：[http ://rcnhca.org.uk/sandbox/](http://rcnhca.org.uk/sandbox/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T09:30:36.497

绝对 DIV 将参考父母的宽度..

我认为解决方案是通过处理`<li>`元素。如果您希望文本正确呈现，请尝试添加

```
white-space: nowrap; 
```

在`#breadcrumbs ul#parent li ul li`

它将防止文本被错误地呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:39:11.970

将宽度从自动更改为 100%。

```
#breadcrumbs ul #parent li ul {
width: 100%;} /* Change this width to 100% */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:26:27.127

```
#breadcrumbs ul #parent li ul {
margin-left: 0;
padding-left: 0;
top: 42px;
width: auto;}

#breadcrumbs ul#parent li {
float: left;
height: 39px;
line-height: 39px;
min-width: 1px;
position: relative;} 
```

# windows-phone-7 - 将 ScrollViewer 的内容设置为另一个 ScrollViewer 的内容（在 Windows Phone 上使用 C#）

> ID：10138205
> 
> 赞同：0
> 
> 时间：2012-04-13T09:17:35.817
> 
> 标签：windows-phone-7, scrollviewer, stackpanel

我遇到了一个我似乎无法解决的问题......

我需要将 ScrollViewer 的内容设置为另一个（其中包含 StackPanel，其中包含图像和文本）的内容。

我尝试了以下方法，但一直收到错误消息（“参数不正确”）。

```
scrollViewer[1].Content = scrollViewer[2].Content; 
```

和

```
scrollViewer[1].Content = stackPanel[2]; &nbsp;// stackPanel[2] is currently what the content of scrollViewer[2] is set to 
```

我还尝试将 scrollViewer[1] 作为 ContentPanel 的子项删除并创建它的新实例，然后添加它。

我还尝试将 scrollViewer[1].Content 设置为 null，然后再将其设置为其他任何内容。

有谁知道解决这个问题的方法？我错过了什么？任何线索将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:05:49.367

您可能必须使用 StackPanel 作为 ScrollViewers 的内容，然后使用 StackPanels 的 Children 属性，在两者之间传输控件。

```
 <ScrollViewer x:Name="MyScrollViewer">
            <StackPanel x:Name="MyStackPanel">
            <Button x:Name="MyButton" Content="My Button"/>
            </StackPanel>
        </ScrollViewer>
        <ScrollViewer x:Name="MyScrollViewer2">
            <StackPanel x:Name="MyStackPanel2">
            </StackPanel>
        </ScrollViewer>

        UIElement currentElement = MyStackPanel.Children[0];

        MyStackPanel.Children.Remove(currentElement);

        MyStackPanel2.Children.Add(currentElement); 
```

希望这可以帮助。

# php - 停止将 URL 放在地址栏中的 PHP 脚本？

> ID：10138215
> 
> 赞同：0
> 
> 时间：2012-04-13T09:18:03.790
> 
> 标签：php

我有一个从 URL 列表中提取元数据的脚本，但是当我尝试输出太多时，它说 URL 太长并且无法运行。

我的问题是如何阻止这种情况发生？

```
<?php
ini_set( 'default_charset', 'UTF-8' );
error_reporting(E_ALL);
//ini_set( "display_errors", 0);
function parseUrl($url){
    //Trim whitespace of the url to ensure proper checking.
    $url = trim($url);
    //Check if a protocol is specified at the beginning of the url. If it's not,   prepend 'http://'.
    if (!preg_match("~^(?:f|ht)tps?://~i", $url)) {
            $url = "http://" . $url;
    }
    //Check if '/' is present at the end of the url. If not, append '/'.
    if (substr($url, -1)!=="/"){
            $url .= "/";
    }
    //Return the processed url.
    return $url;
}
//If the form was submitted
if(isset($_GET['siteurl'])){
    //Put every new line as a new entry in the array
    $urls = explode("\n",trim($_GET["siteurl"]));
    //Iterate through urls
    foreach ($urls as $url) {
            //Parse the url to add 'http://' at the beginning or '/' at the end if not   already there, to avoid errors with the get_meta_tags function
            $url = parseUrl($url);
            //Get the meta data for each url
            $tags = get_meta_tags($url);
            //Check to see if the description tag was present and adjust output   accordingly
            $tags = NULL;
$tags = get_meta_tags($url);
if($tags)
echo "<tr><td>Description($url)</td><td>" .$tags['description']. "</td></tr>";
else 
echo "<tr><td>Description($url)</td><td>No Meta Description</td></tr>";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:21:33.370

然后发布网址。GET 是[有限](https://stackoverflow.com/questions/3091485/what-is-the-limit-on-querystring-get-url-parameters)的。

# android - Android Huawei Ideos X3 (U8510) : 从 ClockWorkMod 备份恢复静态启动徽标和动画？

> ID：10138216
> 
> 赞同：0
> 
> 时间：2012-04-13T09:18:05.873
> 
> 标签：android, root, recovery, cyanogenmod

我有一个已植根（并解锁）的华为 Ideos X3 (U8510)。我使用安装到 sdcard 的 ClockWordMod 完整备份了库存 ROM。

然后我开始在互联网上玩不同的 ROM。在某些时候，我还用另一个通用库存 ROM 为该设备刷新了该设备。此时，通用 Stock ROM 永久更改了我的静态启动徽标和启动动画。最初它是带有沃达丰动画的静态华为标志（红色沃达丰标志）。取而代之的是静态的华为标志和华为通用的开机动画。这是问题：

```
1\. I need to replace with the original static boot logo and boot animation in the event of a warranty claim. 
2\. I need the assurance that recovering to the stock ROM backup will restore everything to the way it was except the bootlogo and boot animation. 
```

现在，如果我从备份恢复到库存 ROM（通过 ClockWorkMod 恢复），备份中的所有内容都会恢复，除了静态启动徽标和启动动画序列。

我尝试过的事情： 1\. 从已安装的终端，如 su：我尝试将 recovery.img 从备份复制到 sdcard 的根目录。然后作为 su，我执行了以下命令：

```
flash_image recovery /sdcard/recovery.img 
```

上面的命令有效。我重新启动恢复。然后我再次重新启动，但仍然看到通用的静态华为启动徽标和启动动画。

我可以从我的 stock rom 备份中看到以下文件：

```
.android_secure.vfat.tar
boot.img
cache.yaffs2.img
data.yaffs2.img
nandroid.md5
recovery.img   ---> This is the file I copied to the root of the sdcard.
system.yaffs2.img 
```

我也试过在其他论坛上询问从股票ROM中获取启动动画的副本，但没有成功。

问题：

1.  我是否有来自股票 rom 备份的原始启动徽标和启动动画（在文件列表上方）？
2.  如果是这样，有没有办法恢复它？如果没有：是否有已知来源可以获取原始启动动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:55:21.593

有两个位置可以存储启动动画文件：`/data/local`和`/system/media`.

[http://www.addictivetips.com/mobile/how-to-change-customize-create-android-boot-animation-guide/](http://www.addictivetips.com/mobile/how-to-change-customize-create-android-boot-animation-guide/)

# c# - 带有 TextBlock 和 Checkbox 的 LongListSelector - 如何更改 Checkbox 的选中状态

> ID：10138219
> 
> 赞同：1
> 
> 时间：2012-04-13T09:18:13.707
> 
> 标签：c#, .net, xaml, windows-phone-7.1, windows-phone

我的 Windows Phone 应用程序中有一个 LongListSelector 类型的列表。该列表的每个项目都有一个 TextBlock 和一个 Checkbox。

我有一个将复选框标记`isChecked`为填充列表时的绑定，但是`checked`当用户更改选择时如何更改复选框的状态？

我的 XAML 看起来像这样：

```
<toolkit:LongListSelector Name="DictList" Visibility="Visible" Margin="10,98,10,40" SelectionChanged="DictList_SelectionChanged">
    <toolkit:LongListSelector.ItemTemplate>
        <DataTemplate>
            <Grid>
                <TextBlock Text="{Binding Name}" Foreground="Black" FontSize="28" Margin="15,0,0,0" VerticalAlignment="Center"></TextBlock>
                <CheckBox VerticalAlignment="Center" HorizontalAlignment="Right" IsChecked="{Binding Checked}" />
            </Grid>
        </DataTemplate>
    </toolkit:LongListSelector.ItemTemplate>
    <toolkit:LongListSelector.GroupHeaderTemplate>
        <DataTemplate>
            <Border BorderBrush="White" Background="White" Padding="10" Margin="0,15,0,15">
                <TextBlock Text="{Binding Name}" Foreground="Black" FontSize="32"  />
            </Border>
        </DataTemplate>
    </toolkit:LongListSelector.GroupHeaderTemplate>
    <toolkit:LongListSelector.GroupItemTemplate>
        <DataTemplate>
            <Border BorderBrush="White" Background="White" Padding="10" Margin="0,15,0,15">
                <TextBlock Text="{Binding Name}" Foreground="Black" FontSize="32" />
            </Border>
        </DataTemplate>
    </toolkit:LongListSelector.GroupItemTemplate>
</toolkit:LongListSelector> 
```

I have implemented this code when selection changes:

```
private void DictList_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    helpers.parrot.DictionaryItem dictItem = this.DictList.SelectedItem as helpers.parrot.DictionaryItem;

    if (dictItem != null)
    {
        dictItem.Checked = false;
    }
} 
```

如何在代码中做到这一点？有什么建议么？

**更新以匹配评论：**

DictionaryItem 看起来像这样，我在其中实现了 INotifyPropertyChanged 接口

```
namespace Dict.helpers.parrot
{
    public class DictionaryItem : INotifyPropertyChanged 
    {
        public string Name { get; private set; }
        public string DictId { get; private set; }
        public string MethodId { get; private set; }
        private bool checkedValue = true;
        public bool Checked {
            get
            {
                return checkedValue;
            }
            set
            {
                NotifyPropertyChanged("Checked");
                this.checkedValue = value;
            }
        }

        public DictionaryItem(string name, string dictId, string methodId)
        {
            Name = name;
            DictId = dictId;
            MethodId = methodId;
        }

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (null != handler)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }  
    }
} 
```

我的 DictionaryCategory 看起来像这样。此对象包含每个 DictionaryItem。

```
namespace Dict.helpers.parrot
{
    public class DictionaryCategory:System.Collections.ObjectModel.ObservableCollection<DictionaryItem>
    {
        public string Name { get; private set; }

        public DictionaryCategory(string categoryName)
        {
            Name = categoryName;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:18:03.683

好吧 - 现在我让它工作了。

我的选择更改事件现在看起来像这样

```
private void DictList_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    helpers.parrot.DictionaryItem dictItem = this.DictList.SelectedItem as helpers.parrot.DictionaryItem;

    if (dictItem != null)
    {
        dictItem.Checked = !dictItem.Checked;
    }

    LongListSelector _sender = (LongListSelector)sender;
    _sender.SelectedItem = -1;
} 
```

在 DictionaryItem 我更改了以下内容

```
 public bool Checked {
        get
        {
            return checkedValue;
        }
        set
        {
            NotifyPropertyChanged("Checked");
            this.checkedValue = value;
        }
    } 
```

到

```
 public bool Checked {
        get
        {
            return checkedValue;
        }
        set
        {
            this.checkedValue = value;
            NotifyPropertyChanged("Checked");
        }
    } 
```

# java - Java：延迟加载单例和反射攻击？

> ID：10138222
> 
> 赞同：2
> 
> 时间：2012-04-13T09:18:18.820
> 
> 标签：java, reflection, singleton, lazy-loading

如果我通过持有者惯用语或双重检查锁定来实现单例，而不是调用“getInstance()”，而是使用反射来实例化它，然后在其上调用“getInstance()”，这将创建两个实例，从而打破模式.

所以我在类中添加了一个静态“counter”成员，在类的私有构造函数中增加它，如果它越过“1”则抛出异常。但在这种情况下，如果我首先通过反射进行实例化，那么没有人能够在不抛出异常的情况下调用“getInstance()”。

那么我如何延迟加载 Singleton 并防止它受到这种攻击呢？（我知道'Enum'模式，但有些人认为它实际上是一种黑客攻击。检查对这个公认答案的评论：[这个单例对序列化和反射攻击有抵抗力吗？](https://stackoverflow.com/questions/5735797/is-this-singleton-resistant-to-both-serialization-and-reflection-attacks)顺便说一句，我的问题是不同的）。

编辑：我认为在 DCL 的情况下可以通过使用静态计数器字段、基于类的同步构造函数并将“this”分配给静态成员来防止它。但是，不知道在持有人成语的情况下如何防止它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:42:41.883

就我个人而言，我坚持使用 Enums，但也有 Initialization on Demand Holder (IODH) 习惯用法

```
static class SingletonHolder {
  static Singleton instance = new Singleton();    
}

public static Singleton getInstance() {
  return SingletonHolder.instance;
} 
```

这出现在 Effective Java (item 48) 中，但我第一次听说它是从 crazy bob 的帖子中听到的

[http://blog.crazybob.org/2007/01/lazy-loading-singletons.html](http://blog.crazybob.org/2007/01/lazy-loading-singletons.html)

有关许多有趣的讨论，请参阅[http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#dcl](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#dcl)。

# c# - 如何创建报表库？

> ID：10138223
> 
> 赞同：2
> 
> 时间：2012-04-13T09:18:19.237
> 
> 标签：c#, .net, sharepoint

任何想法如何使用 c# for Sp2010 创建报告库？

我一直使用 SPListTemplateType.*mystuff 但报告库没有选项

```
site.Lists.Add("MyLibrary", "MyLibrary", SPListTemplateType.?); 
```

[http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splisttemplatetype%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splisttemplatetype%28v=office.12%29.aspx)它没有作为选项。我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:24:29.430

尝试包含功能 ID 和模板类型的[SPListCollection.Add覆盖：](http://msdn.microsoft.com/en-us/library/ms448694.aspx)

```
site.Lists.Add("MyLibrary", 
    "MyLibrary", 
    "MyLibrary", 
    "{2510d73f-7109-4ccc-8a1c-314894deeb3a}", 
    433, 
    "101"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:17:09.380

Lists.Add 方法具有允许您将模板 ID 指定为整数或模板名称为字符串的覆盖。

[http://msdn.microsoft.com/en-us/library/ms425818.aspx](http://msdn.microsoft.com/en-us/library/ms425818.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T09:21:55.927

SPList.Add() 重载之一采用 SPListTemplate （不是您使用的 SPListTemplateType 枚举）

[http://msdn.microsoft.com/en-us/library/ms477358.aspx](http://msdn.microsoft.com/en-us/library/ms477358.aspx)

首先获取 SPListTemplate，然后使用它来添加列表：

```
SPListTemplate reportTemplate = site.ListTemplates["Report Library"]; // note displayname, so might be different depending on language
Guid listGuid = site.Lists.Add("MyLibrary","MyDescription",reportTemplate); 
```

# jquery - HTML onmouseover 无法显示文本

> ID：10138224
> 
> 赞同：2
> 
> 时间：2012-04-13T09:18:35.230
> 
> 标签：jquery, html, mouseover

当 onmouseover/onmouseout 事件发生时，我试图在图片上显示一些信息。我想要实现的是像[这个网站](http://www.piercedfish.com)一样畅销的东西。

我的代码是这样的：

```
<div class="container" onmouseover="$('#info').css('display','block');" onmouseout="$('#info').css('display','none');">
<img src=...">
    <div id="info" style="display:none">
       ... some text ...
</div>
</div> 
```

所以 div 信息块最初是隐藏的，但是当鼠标在图片上时，我希望信息出现在相应的图片上（图像上的色调背景可以很好地看到文字）。但有点行不通。我很感激任何关于如何解决这个问题的建议。

编辑：我忘了提到css中不存在div id信息。我不确定是否需要动态创建规则并将其附加到正文。另外，我之所以选择使用内联是因为我需要显示/隐藏与用户将鼠标放在/移出的图像（包含唯一的 div id）相对应的文本。这意味着我有很多 div 容器，每个容器都有唯一的 div id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:28:17.320

使用这个代替内联`onmouseover`和`onmouseout`：

```
$('.container').mouseover(function() {
    $('#info').show();
}).mouseout(function() {
    $('#info').hide();
}); 
```

而且最好用`show();`/`hide();`代替`css('display','block');`/`css('display','block');`

所以代码将是：

```
<div class="container">
   ...
   <div style="display:none" id="info">
      ...
   </div>
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $('.container').mouseover(function() {
            $('#info').show();
        }).mouseout(function() {
            $('#info').hide();
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:27:03.943

首先，我建议您制作函数，而不仅仅是在 onMouseOver 标签本身中做一些事情。它使它非常不可读，并且您可以通过使用双引号来简单地出错，并且会出现语法错误。

第二，什么不起作用？它不出现吗？顺便说一句，您也可以使用 $('#info').show() 和 .hide() 。做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:28:08.883

改用这个：

```
 <div class="out overout">
  <span>move your mouse</span>
  <div class="in">
  </div>
</div>

 <script>
  var i = 0;
  $("div.overout").mouseover(function() {
    i += 1;
    $(this).find("span").text( "mouse over x " + i );
  }).mouseout(function(){
    $(this).find("span").text("mouse out ");
  });
</script> 
```

访问这里进行[演示](http://api.jquery.com/hover/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:28:30.350

你应该把它放在一个脚本标签中，如下所示：[http://www.w3schools.com/js/js_howto.asp](http://www.w3schools.com/js/js_howto.asp) 现在你把 jQuery 放在你的 html 中。

如果您将其放在页面底部并这样做：

```
$('#container').mouseenter (function() {
     $('#info').css('display','block');
}); 
```

和

```
$('#container').mouseout (function() {
     $('#info').css('display','none');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T09:29:24.160

你可以试试这个：

```
<script type="text/javascript">
function showdiv() {
$(document).ready(function() {
$('#info').css('display','block');
});
}

function hidediv() {
$(document).ready(function() {
$('#info').css('display','none');
});
}
</script>

<div class="container" onmouseover="showdiv()" onmouseout="hidediv()"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T09:31:02.160

您必须在 div 上创建“onMouseOut”事件才能显示

这段代码工作

```
 <img src="" style="width:50px;height:50px;" onmouseover="testOn();" >
<div onmouseout="testOut();" id="info" style="width:50px;height:50px;display:none;color:white;background-color:black;opacity:0.7; position:relative;top:-50px;">
    bla bla
</div>
<script type="text/javascript">
    function testOn()
    {
        $('#info').css('display','block');
    }

    function testOut()
    {
        $('#info').css('display','none');
    }
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T09:44:03.980

我认为你的方式是错误的

试试这个

```
 <html xmlns="http://www.w3.org/1999/xhtml">

            <head>
                <title>Horton Computer Solutions Home</title>

            </head>
            <style type="text/css">
            .container{
            width:100px;
            }

            </style>
            <script type="text/javascript">
            function over(){

            document.getElementById("info").style.display="block"
            }
            function out(){
            document.getElementById("info").style.display="none"
            }
            </script>
        <body>

            <div class="container">
    <img src="" alt="asdasd" onmouseover="over()" onmouseout="out()">
    <div id="info" style="display:none">
       ... some text ...
        ... some text ...
         ... some text ...
          ... some text ...
           ... some text ...
            ... some text ...
    </div>
    </div>

            </body>
            </html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-13T09:45:13.997

试试这个代码，它会在 onmouseover 事件中替换图像。但不能在 Internet Explorer 中使用。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>onmouseover, onmouseout test</title>
</head>
<body>
<img src="image1.png" alt="" onmouseout="this.src='image1.png'" onmouseover="this.src='image2.png'">&nbsp;
</body>
</html> 
```

# jquery - 如何让表单在隐藏后重新出现以显示成功的 AJAX 消息？

> ID：10138225
> 
> 赞同：1
> 
> 时间：2012-04-13T09:18:54.063
> 
> 标签：jquery, ajax, toggle

我试图在成功的 ajax 调用后显示确认消息。用户单击链接以向另一个用户发送消息，这会打开一个对话框。他们发送消息后，我隐藏表单并显示一条简单的消息，例如“已发送消息”。但是，在用户关闭对话框并重新打开后，表单不会重新出现并且消息仍然存在。

这是弹出对话框和消息表单：

```
 <a href="#MessageStudent" class="popUpLink">Message</a>
    <div class="popUpDialog" id="messageStudentDialog">
        <div id="messageStatus"></div>                                      
        <form class="sendMessageForm" id="studentForm" action="" method="POST">     
            <fieldset>
                <input type="hidden" value="317" name="studentID">
                <textarea rows="3" cols="35" name="message"></textarea>
                <input type="submit" value="Send Message">
            </fieldset>
        </form>
    </div> 
```

这是用于单击链接和对话框的 jQuery 处理程序：

```
function popUpDialogs()
{
    $('.popUpLink').each(function()
    {
         if(!$.data(this, 'dialog')) 
         {
            $divDialog = $(this).next('.popUpDialog');
            $.data(this, 'dialog', $divDialog.dialog(
            {
                autoOpen: false,
                modal: true,
                title: $divDialog.attr('title')

            }));
         }
    }).on('click',function() 
    { 
        $.data(this, 'dialog').dialog('open'); 
        $('form',$divDialog).toggle(); //This is what I'm trying but doesn't work
        return false; 
    });
} 
```

这是我的 AJAX 表单处理程序：

```
$('form.sendMessageForm', '.popUpDialog').on('submit', function()
{
    event.preventDefault();
    var form =  $(this);
    var popUpDialog = form.parent();
    var data = new Array();
    var data = form.serialize();
    $.post('',  { sendMessage : data}, function(response)
    {           
        $(form).toggle();//This is what I'm trying but it doesn't work
        $('div#messageStatus', popUpDialog).html("<p>Message Sent!</p>").hide().fadeIn(3000).animate({opacity: 1.0}, 3000)     //<== wait 3 sec before fading out
          .fadeOut('slow', function()
      {

      });
    });
}); 
```

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:44:50.370

```
$('.popUpLink').each(function()
{
     if(!$.data(this, 'dialog')) 
     {
        $divDialog = $(this).next('.popUpDialog');
        $.data(this, 'dialog', $divDialog.dialog(
        {
            autoOpen: false,
            modal: true,
            title: $divDialog.attr('title')

        }));
     }
}).on('click',function() 
{ 
    $.data(this, 'dialog').dialog('open'); 
    $('form',this).toggle(); //This is what I'm trying but doesn't work
    return false; 
}); 
```

只是一个想法（未经测试）但是...... `$('form',this)`- 我相信“这个”指的是链接`.popUpLink`。而且您的表格不在该链接中。为要再次显示的表单使用正确的选择器（ID 或类）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:14:50.673

这就是我在我的项目中所做的，如果删除成功，我只是从服务器给出响应为 1 或 0，只需隐藏 div，你可以这样做，这是我项目中的代码片段：

```
 $(".deleteDiv").unbind("click").click(function (event) {
        event.preventDefault();

        if ($(".deleteDiv")) {

            var dataString = 'PostId=' + $(this).attr("data-id");
            $.ajax({
                type: 'POST',
                url: "ajax/deletepost.aspx",
                context: this,
                //                data: { TargetId: "" },
                data: dataString,
                success: function (data) { /* do something here */
                    if(data == 1){
                     $(this).parents("div.story_wrapper").addClass("noData");
                     $(".noData").slideUp();
                    }

                },
                error: function (xhr, type, exception) { alert("Error: " + type); }
            })

        }

    return false;

}); 
```

它在我的项目中 100% 有效并且从未失败（希望!!!）

并用于隐藏和显示使用类作为标志，例如我使用 noData。

# mobile - 谷歌地图高度只有 30px

> ID：10138227
> 
> 赞同：1
> 
> 时间：2012-04-13T09:18:56.333
> 
> 标签：mobile, jquery-mobile, google-maps-api-3

我正在使用 jQuery Mobile 创建一个 Web 应用程序。我的地图没有显示我想要的方式。我希望它填满标题下的屏幕。内容 div 的宽度和高度设置为 100%，但只有宽度跟随此参数，高度设置为 30px。

单击按钮时会显示此页面：

```
<div data-role="page" data-theme="b" id="Map">
    <div data-role="header">
        <a href="#Resultaten" data-role="button" data-icon="back" align="left" 
        data-iconshadow="false" data-direction="reverse" data-transition="slide"
        data-iconpos="notext">Terug</a>
        <h1>Kaart</h1>
        <a href="#Home" data-role="button" data-icon="home" 
        data-iconshadow="false" data-direction="reverse" onclick="empty()" 
        data-transition="slide" data-iconpos="notext">Terug</a>
    </div>
    <div data-role="content" id="map_canvas">
    <script>
        var map;
        function create_map(){
            var myOptions = {
            zoom: 15,
            center: new google.maps.LatLng(latitude, longitude),
            mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);    
        }                

    </script>
    </div>
</div> 
```

map_canvas 的 css：

```
.map_canvas{
width: 100%; 
height: 100%; 
padding: 0;
} 
```

![结果](../Images/d59472b4ad5101b4abbb9f6b88378ee8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:01:01.027

`.map_canvas`不会对具有 ID 的元素产生任何影响`map_canvas`，请`#map_canvas`改用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:32:56.827

CSS 需要知道 100% 的*东西*。目前，您尚未指定`div`包含您的地图的高度`div`。在桌面浏览器中，必须将高度一直指定到`<html>`.

`div`由于 API 需要该空间，因此您自己将任何内容放入地图中也不是一个好习惯。您可能会发现 API 在创建地图时会删除您的脚本。

# select - LibreOffice 电子表格：使用特定过滤器选择随机单元格

> ID：10138229
> 
> 赞同：0
> 
> 时间：2012-04-13T09:18:57.957
> 
> 标签：select, random, filter, spreadsheet, libreoffice

直升机。

我在 LibreOffice 电子表格上有以下场景

*   在一张表中，我有特定状态的条目

例如：

```
id   state     name
----------------------------
1    open      OpenState
2    closed    ClosedState
3    resolved  ResolvedState
... 
```

*   在另一个表中，我列出了第一个表中具有*随机*State-ID 的项目列表。这很好用。

例如：

```
id   state   ProjectName
------------------------
1    1       Proj_1
2    1       Proj_2
3    2       Proj_3
... 
```

*   第三张桌子有问题。在此表中，我想生成测试数据。这些条目还具有来自第一个表的状态。现在我需要一个 LibreOffice 函数来为每个条目分配一个来自第二个表的**随机项目，该项目与条目状态具有****相同**的状态

例如：

```
id   state   project   EntryName
--------------------------------
1    1       2         Entry_1
2    1       1         Entry_2
3    1       1         Entry_3
4    2       3         Entry_4
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T16:30:54.540

IMO 这项任务超出了 calc 的可能性。主要问题是似乎没有返回行子集的公式（共享相同状态的项目）。这需要过滤，但似乎没有办法即时应用过滤。因此，如果不准备保存每个项目状态的第二张表，这将无法工作。

因此，IMO 最简单的解决方案是创建三个持久过滤结果，列出具有相同状态的项目。使用这些过滤器结果，您可以使用这些函数`INDEX`并`RANDBETWEEN`随机选择一个项目 ID。

过滤项目可能会导致此工作表：

![项目](../Images/70d05cd16b21cebbf4c0c71096829f3c.png)

将三个过滤器结果中的每一个定义为命名范围（`ProjState1`:`$E$1:$G$4`等），您可以使用以下公式：

```
=IF(($B2=1);INDEX(ProjState1;RANDBETWEEN(2;ROWS(ProjState1));1) ;IF(($B2=2);INDEX(ProjState2;RANDBETWEEN(2;ROWS(ProjState2));1);INDEX(ProjState3;RANDBETWEEN(2;ROWS(ProjState3));1))) 
```

RANDBETWEEN 返回两个整数之间的随机数；第一个是 2（因为我已将标题作为范围的第 1 行包含在内），第二个是范围的最后一行）。INDEX 选择随机返回的行的值。

分成多行：

```
=IF(
    ($B2=1);
    INDEX(
        ProjState1;
        RANDBETWEEN(
            2;
            ROWS(ProjState1)
        );
        1
    );
    IF(
        ($B2=2);
        INDEX(ProjState2;RANDBETWEEN(2;ROWS(ProjState2));1);
        INDEX(ProjState3;RANDBETWEEN(2;ROWS(ProjState3));1)
    )
) 
```

使用此“条目”表：

![参赛作品](../Images/bb3a45bd508075d4a0784f0e43bbb112.png)

# jquery - jQuery应用css不透明度

> ID：10138232
> 
> 赞同：5
> 
> 时间：2012-04-13T09:19:04.313
> 
> 标签：jquery, css, internet-explorer, opacity

我试图让不透明度在 IE 中工作，我目前正在 IE8 中进行测试，Chrome 等工作正常，但 IE8 很糟糕。

我的代码是：

```
$('#mydiv').animate({'opacity': '0.5'}); 
```

和

```
$('#mydiv').css('opacity', 0.5); 
```

不透明度应用于此 div 中保存的图像，但没有文本，这非常令人愤怒 :( 任何人都可以帮助我吗？提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:34:42.330

试试这个：

```
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=75)"; /* IE 8 */
filter: alpha(opacity=75); /* older IEs */ 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T13:58:58.133

> $('#mydiv').fadeTo(0.5);

或者

> $('#mydiv').fadeTo(500,0.5);

或者

> $('#mydiv').fadeTo("slow",0.5);

[http://api.jquery.com/fadeTo/](http://api.jquery.com/fadeTo/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:23:19.913

IE8 不会对没有布局的元素应用不透明度。请参阅此答案[Opacity CSS not working in IE8](https://stackoverflow.com/questions/1948176/opacity-css-not-working-in-ie8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-11T11:55:45.143

[`css("opacity", value)`](http://api.jquery.com/css/#css2)在使用和[`fade*()`](http://api.jquery.com/category/effects/fading/)方法时，jQuery 以兼容 IE ≥ 6 的方式为您处理设置不透明度。但请务必使用与 IE 6、7 和 8 兼容的[**jQuery 1.x**](http://jquery.com/download/#jquery-1-x)**库，而不是不兼容的jQuery 2.x**（两者都与 IE ≥ 9 兼容）。

以下是使用`css("opacity", value)`and的示例`fadeTo(duration, opacity)`：

*   **jQuery 1.x**： http: [//jsbin.com/xabexa/2/edit ?html,js,output](http://jsbin.com/xabexa/2/edit?html,js,output)
*   **jQuery 2.x**： http: [//jsbin.com/xabexa/3/edit ?html,js,output](http://jsbin.com/xabexa/3/edit?html,js,output)

但是，IE ≤ 8 中存在与半透明 PNG 的不透明度相关的问题： [How to solve/hack fading semi-transparent PNG bug in IE8?](https://stackoverflow.com/q/1204457/686534)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-13T09:21:38.110

试试这个

```
filter: alpha(opacity=50); 
```

代替

```
opacity:0.5; 
```

# cordova - 如何使用电话间隙向联系人添加新联系人？

> ID：10138238
> 
> 赞同：5
> 
> 时间：2012-04-13T09:19:25.430
> 
> 标签：cordova

我是电话间隙的新手。任何人请告诉我如何使用电话间隙向联系人添加新联系人？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-10T05:43:08.367

要访问联系人，您需要使用 PhoneGap 的联系人插件。

要将这个插件添加到项目中，我们需要做的就是：

```
cordova plugin add org.apache.cordova.contacts 
```

要配置平台特定的配置设置，我们需要添加以下代码：

对于 Android：在 app/res/xml/config.xml 中：

```
<feature name="Contacts">
    <param name="android-package" value="org.apache.cordova.contacts.ContactManager" />
</feature> 
```

在 app/AndroidManifest.xml 中：

```
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" /> 
```

对于 iOS：在 config.xml 中：

```
<feature name="Contacts">
    <param name="ios-package" value="CDVContacts" />
</feature> 
```

对于 Windows Phone：在 Properties/WPAppManifest.xml 中：

```
<Capabilities>
    <Capability Name="ID_CAP_CONTACTS" />
</Capabilities> 
```

最后通过 JavaScript 添加联系人：

```
var myContact = navigator.contacts.create({"displayName": "The New Contact"});
var name = new ContactName();
name.givenName = "Jane";
name.familyName = "Doe";
myContact.name = name;

var phoneNumbers = [];
phoneNumbers[0] = new ContactField('work', '212-555-1234', false);
phoneNumbers[1] = new ContactField('mobile', '917-555-5432', true); // preferred number
phoneNumbers[2] = new ContactField('home', '203-555-7890', false);
myContact.phoneNumbers = phoneNumbers;

myContact.note = "Example note for the newly added contact";

myContact.save(onSuccessCallBack, onErrorCallBack);

function onSuccessCallBack(contact) {
    alert("Save Success");
};

function onErrorCallBack(contactError) {
    alert("Error = " + contactError.code);
}; 
```

联系人的属性：

*   id：全局唯一标识符。(DOMString)

*   displayName：此联系人的名称，适合显示给最终用户。(DOMString)
*   姓名：包含人名的所有组成部分的对象。（联系人姓名）
*   昵称：用来称呼联系人的随意名称。(DOMString)
*   phoneNumbers：所有联系人电话号码的数组。（联系人字段[]）
*   emails：所有联系人电子邮件地址的数组。（联系人字段[]）
*   地址：所有联系人地址的数组。（联系地址[]）
*   ims：所有联系人的 IM 地址的数组。（联系人字段[]）
*   组织：所有联系人组织的数组。（联系组织[]）
*   生日：联系人的生日。（日期）
*   note：关于联系人的注释。(DOMString)
*   照片：联系人照片的数组。（联系人字段[]）
*   类别：与联系人关联的所有用户定义类别的数组。（联系人字段[]）
*   urls：与联系人关联的网页数组。（联系人字段[]）

更多信息[PhoneGap API 文档 - 联系人](http://docs.phonegap.com/en/3.3.0/cordova_contacts_contacts.md.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T10:17:06.750

参考[**Phonegap 文档 - 创建联系人**](http://docs.phonegap.com/en/1.0.0/phonegap_contacts_contacts.md.html#contacts.create)

以下是创建新联系人的示例代码。

```
var contact = navigator.contacts.create(); 
```

在 ContactField[] 中存储联系电话号码

```
var phoneNumbers = [];
phoneNumbers[0] = new ContactField('work', '212-555-1234', false);
phoneNumbers[1] = new ContactField('mobile', '917-555-5432', true); // preferred number
phoneNumbers[2] = new ContactField('home', '203-555-7890', false);
contact.phoneNumbers = phoneNumbers; 
```

保存联系人

```
contact.save(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-19T13:01:53.657

请查看 [http://coenraets.org/blog/cordova-phonegap-3-tutorial/](http://coenraets.org/blog/cordova-phonegap-3-tutorial/,let) ，如果您需要更多帮助，请告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T10:27:10.077

您可以通过[PHONEGAP FOR CONTCTS](http://docs.phonegap.com/en/1.0.0/phonegap_contacts_contacts.md.html)的帮助。我认为它的良好且足够的文档可用于向联系人添加新联系人。

# android - 活动未通过 AlarmManager 调用。

> ID：10138239
> 
> 赞同：0
> 
> 时间：2012-04-13T09:19:26.087
> 
> 标签：android

这是我用来调用活动 HomeActivity 的代码。但是，即使我将其设置为 1 分钟，通话也不会进行。

```
 protected void onResume() {
            // TODO Auto-generated method stub
            super.onResume();

            int minutes = 1;
            AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
            Intent i = new Intent(this, HomeActivity.class);
            PendingIntent pi = PendingIntent.getService(this, 0, i, 0);
            am.cancel(pi);

            if (minutes > 0) { 
                am.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime() + mi

    > Blockquote

    nutes*60, minutes, pi); }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:24:03.200

首先，如果您尝试通过 启动活动`AlarmManager`，则需要使用`getActivity()`而不是`getService()`创建`PendingIntent`.

其次，周期以`AlarmManager`毫秒为单位，而不是秒。

第三，`setInexactRepeating()`设计用于 AlarmManager 上的预定义周期之一（例如，`INTERVAL_FIFTEEN_MINUTES`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:08:33.780

我猜重复间隔应该以毫秒为单位

你期待吗

Intent i = new Intent(this, HomeActivity.class); 开始您的活动？

试试 normall 看看它是否会启动你的活动

# jakarta-ee - 从战争中部署 DataSource 是否有 JSR？

> ID：10138243
> 
> 赞同：2
> 
> 时间：2012-04-13T09:19:47.677
> 
> 标签：jakarta-ee, tomcat, deployment, glassfish

我正在尝试总结战争部署期间数据源部署的解决方案。老实说，从控制台手动添加它并不方便。

我可以看到，例如 JBoss 有解决方案：http: [//www.mastertheboss.com/jboss-application-server/375-jboss-as-7-deployable-datasources.html](http://www.mastertheboss.com/jboss-application-server/375-jboss-as-7-deployable-datasources.html)

对于 Tomcat，也有 context.xml 可以处理这个问题。

**你知道在 GlassFish 上是否可行吗？**

**是否有 JSR 可以对此进行标准化？可能在 JEE7 中。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:27:50.010

在 Glassfish 中，可以在*glassfish-resources.xml*（以前称为*sun-resources.xml*）文件中定义应用程序范围的资源

来自[Glassfish 应用程序部署指南](http://docs.oracle.com/cd/E18930_01/html/821-2417/index.html)：

> 应用程序范围的资源在 glassfish-resources.xml 部署描述符文件中定义。该文件位于模块或应用程序存档的 META-INF 目录中。对于 Web 应用程序或模块，此文件位于 WEB-INF 目录中。如果企业应用程序存档的任何子模块存档具有自己的 glassfish-resources.xml 文件，则资源定义的范围仅限于这些模块。

示例配置如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC "-//Sun Microsystems, Inc.//DTD Application Server 9.0 Resource Definitions //EN" "http://www.sun.com/software/appserver/dtds/sun-resources_1_3.dtd">
<resources>
  <jdbc-connection-pool name="mysql_rootPool" ...>
    <property name="serverName" value="myServer"/>
    <property name="portNumber" value="3306"/>
    ...
  </jdbc-connection-pool>
  <jdbc-resource enabled="true" jndi-name="jdbc/mydb" object-type="user" pool-name="mysql_rootPool"/>
</resources> 
```

资源定义与Glassfish 域的*domain.xml*中的相同。你可以从那里复制它。

# linq - 使用 LINQ 填充对象列表

> ID：10138246
> 
> 赞同：5
> 
> 时间：2012-04-13T09:19:56.643
> 
> 标签：linq, entity-framework, linq-to-sql, linq-to-entities, linq-to-objects

我有一个我创建的表，我将它插入到

```
var CurrTable; 
```

该表如下所示：

```
SaleID | ProductID | ProductName

  1    |     1     |    Book
  1    |     2     |  Notebook
  2    |     3     |   Guitar
  2    |     4     |   Piano 
```

我有两个类，ProductInfo 和 SaleInfo：

```
public class ProductInfo
{
    int ProductID;
    string ProductName;
}

public class SaleInfo
{
    int SaleID;
    List<ProductInfo> products;
} 
```

我只想`List<SaleInfo>`用数据填充 SaleInfo ( ) 列表...

我写的查询是这样的：

```
List<SaleInfo> results = (from s in CurrTable.AsEnumerable()
                                      group s by new { s.SaleId} into g
                                      select new SaleInfo
                                      {
                                          SaleID = g.Key.SaleId,
                                          Products = (*...*)
                                      }).ToList(); 
```

但是不知道在里面写什么`(*...*)`。我不想再做一次选择，因为我已经有了数据。我只想在产品列表中填写列表，这就是我使用 group 功能的原因。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:22:55.060

我怀疑你希望你的 select 子句是：

```
select new SaleInfo
{
    SaleID = g.Key.SaleId,
    Products = g.Select(x => new ProductInfo { ProductID = x.ProductID,
                                               ProductName = x.ProductName })
                .ToList()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:29:34.220

也许是这样的：

```
select new SaleInfo()
        {
            SaleID=g.Key.SaleId,
            products=g.Select (x =>new ProductInfo(){
              ProductID=x.ProductID,ProductName=x.ProductName}).ToList()
        } 
```

如果您应该能够访问您的属性。我会将课程更改为：

```
public class ProductInfo
{
    public int ProductID;
    public string ProductName;
}

public class SaleInfo
{
    public int SaleID;
    public List<ProductInfo> products;
} 
```

# apache-flex - Actionscript，在 loaderInfo.url 中需要特殊字符的帮助

> ID：10138247
> 
> 赞同：0
> 
> 时间：2012-04-13T09:19:56.893
> 
> 标签：apache-flex, actionscript, special-characters

我在这里面临一个奇怪的问题。我有一个托管在服务器上的 swf 文件，其网络路径看起来像这样

```
http://abc/1/Test-Fåram/img.JPG 
```

但是当我在我的闪光灯中做以下陈述时

动作脚本代码：

```
trace (this.loaderInfo.url); 
```

它会输出

```
http://abc/1/Test-F%E5rram/img.JPG 
```

我几乎要拔头发了，为什么它会在 url 中添加 'AN EXTRA' r

我尝试了 encodeURI、decodeURI 和很多东西，但没有通过。

另一个有趣的事情是，我注意到我在 'å' 之后放置的任何内容都会在它之后重复紧接的字符。例如，如果我将路径更改为

[http://abc/1/Test](http://abc/1/Test) -Fåjam/img.JPG

跟踪的输出将变为

```
http://abc/1/Test-F%E5jjam/img.JPG 
```

任何帮助将不胜感激。

问候

祖拜尔

编辑：

我找到了更多信息，这似乎是浏览器特定的问题，当我在 Internet Explorer 中运行我的 .swf 时，loaderInfo.url 返回有效路径，但在 FireFox 和 Chrome 浏览器上给出无效结果，我的 Flash 播放器版本是

FireFox：11.1.102.63 Chrome：11.2.202.229 Internet Explorer：11.1.102.62

这些是发布时最新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-15T12:05:00.183

我找到了更多信息，这似乎是浏览器特定的问题，当我在 Internet Explorer 中运行我的 .swf 时，loaderInfo.url 返回有效路径，但在 FireFox 和 Chrome 浏览器上给出无效结果，我的 Flash 播放器版本是

FireFox：11.1.102.63 Chrome：11.2.202.229 Internet Explorer：11.1.102.62

# linux - linux内核中TCP-socket和tcp_fin()的关闭/

> ID：10138250
> 
> 赞同：0
> 
> 时间：2012-04-13T09:20:20.967
> 
> 标签：linux, tcp, linux-kernel

我在使用[tcp_fin()](http://lxr.linux.no/linux+v3.2.1/net/ipv4/tcp_input.c#L4139)函数时遇到了问题。它应该处理带有 FIN 标志的传入 TCP 段，但是当我添加跟踪点或只是`printk`在此函数的开头时，此跟踪点处理程序永远不会调用（或没有来自 printk 的任何消息）。

我的行动：

1.  添加跟踪点`printk`或`tcp_fin()`
2.  构建和启动新内核
3.  运行这样的东西：

    ```
    #!/bin/bash

    nflows=50

    on_int()
    {
        echo "$nflows skeeped"
        exit 0
    }

    trap 'on_int' INT

    while [ $nflows -ne 0 ]
    do
        iperf -n 5M -c X.X.X.X
        nflows=$(( $nflows - 1))
        echo "======================"
        echo $nflows
        echo "======================"
    done 
    ```

结果我应该观察电话`tcp_fin()`，但没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:22:13.977

正如我几天前写的，tcp_fin() 处理传入的 FIN 段，但与 RFC-793 相比，不是每个连接都由两个 FIN 段（A->B，B->A）结束。所以在某些情况下，我们只有传出的 FIN 而没有更多。

# android - 如何在android中的html页面上拖放图像？

> ID：10138253
> 
> 赞同：0
> 
> 时间：2012-04-13T09:20:33.183
> 
> 标签：android, html, image, drag-and-drop

我需要在 android 设备上打开一个 html 页面，并在单击按钮后将图像动态添加到页面中。我怎么做 ？是否可以将该图像拖放到 html 页面上？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:35:26.633

这里有一些提示：

*   使用 webview 在您的应用程序中托管网页
*   使用 webview.loadurl 加载您要使用的内容（图片、html、...）
*   如果您不想替换内容，而是将图像添加到已经存在的内容中，请使用 webview.loadurl 中的方案“javascript:”在托管页面上启动 javascript 并使其执行您想要的任何操作。
*   一旦你有一些代码和一些特定的问题，请回到这里并这样做。

祝你好运。

# c# - Telerik RadListBox 不想拖动

> ID：10138254
> 
> 赞同：2
> 
> 时间：2012-04-13T09:20:50.007
> 
> 标签：c#, asp.net, telerik

在我的 asp.net 解决方案中，我正在尝试使用 Listbox 拖放功能（例如在此示例中：http://demos.telerik.com/aspnet-ajax/listbox/examples/functionality/draganddrop/defaultcs.aspx [）](http://demos.telerik.com/aspnet-ajax/listbox/examples/functionality/draganddrop/defaultcs.aspx)。但是我现在遇到的问题是拖放不起作用。而不是拖动它的标记项目...我试图将 html 直接复制到我的页面，但它仍然无法正常工作。有什么想法有什么问题吗？

是因为我想念 CSS 吗？

看法：

```
<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <!-- ## HEAD SECTION ## -->
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="ContentToolbar" runat="server">
<!-- ## SCRIPT MANAGER ## -->
<asp:ScriptManagerProxy ID="ScriptManagerProxy1" runat="server">
 <Scripts>
    <asp:ScriptReference Path= "~/Scripts/jquery-1.2.6.pack.js" />

 </Scripts>
</asp:ScriptManagerProxy>
<%if(false) {%>
  <script src="../../Scripts/jquery-1.2.6-vsdoc.js" type="text/javascript"></script>
<%} %>

<!-- ## AJAX MANAGER ## -->
<!-- ## AJAX MANAGER ## -->
<telerik:RadAjaxManager ID="RadAjaxManager1" OnAjaxRequest="RadAjaxManager1_AjaxRequest" runat="server">
</telerik:RadAjaxManager>
    <!-- ## TOOLBAR ## -->
    <telerik:RadToolBar ID="RadToolBar1" runat="server"
                        OnButtonClick="Toolbar_ButtonClick"
                        EnableEmbeddedSkins="False"
                        OnClientButtonClicked="OnClientButtonClicked"
                        CssClass="pickers_width"
                        Skin="AgendaSkin">
        <Items>
            <telerik:RadToolBarButton   AccessKey="<%$ Resources:Shortcuts, GLOBAL_SAVE %>"
                                        PostBack="false"
                                        Text="<%$ Resources:Language, Generel.Expression.SaveAndClose %>"
                                        CommandName="SAVEANDCLOSE"
                                        Value="SAVEANDCLOSE"
                                        ImageUrl="~/Images/Icons/save_16.png"></telerik:RadToolBarButton>

            <telerik:RadToolBarButton   AccessKey="<%$ Resources:Shortcuts, POPUPS_RETURN %>"
                                        PostBack="False"
                                        Text="<%$ Resources:Language, Generel.Expression.Close %>"
                                        CommandName="CLOSE"
                                        ImageUrl="~/Images/Icons/close_16.png"></telerik:RadToolBarButton>
        </Items>
    </telerik:RadToolBar>

</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="ContentHeader" runat="server">

    <!-- ## HEADER (TITLE BAR) ## -->

</asp:Content>

<asp:Content ID="Content4" ContentPlaceHolderID="ContentWorkspace" runat="server">
  <div class="pickers_workspace_row_margin">
    <!-- ## WORKSPACE ## -->
    <div class="prof_item">
        <asp:Panel ID="pnlRoleList" runat="server" CssClass="prof_item_value_section">

       <telerik:RadAjaxPanel ID="RadAjaxPanel1" runat="server" CssClass="example-panel">
        <telerik:RadListBox ID="RadListBox1" runat="server" Width="200px" Height="200px" 
            SelectionMode="Single" AllowReorder="true"
            EnableDragAndDrop="true" OnDropped="RadListBox1_Dropped">

        </telerik:RadListBox>
    </telerik:RadAjaxPanel>
        </asp:Panel>
    </div>
  </div>
 <asp:HiddenField runat="server" ID="hidRoleInObjectUId" />
 <asp:HiddenField runat="server" ID="hidRoleInObjectName" />
</asp:Content>
<asp:Content ID="Content5" ContentPlaceHolderID="ContentScripts" runat="server">

    <!-- ## SCRIPT SECTION ## -->
    <script type="text/javascript" language="javascript">

        function CloseWindow() {
            // Return userdata to calling window
            if (window.opener != null) {
                window.opener.ClearBlocker();
                window.ReturnFunction();
                window.close();
            }
        }

        function SaveEditedFields(commandName) {
            var ajaxManager = $find("<%= RadAjaxManager1.ClientID %>");
            ajaxManager.ajaxRequest(commandName);
        }

        function OnClientButtonClicked(sender, args) {
            var button = args.get_item();
            var commandName = args.get_item().get_commandName()

            switch (commandName) {
                case "SAVEANDCLOSE":
                    SaveEditedFields(commandName);
                    break;

                case "SAVE":
                    SaveEditedFields(commandName);
                    break;

                case "CLOSE":
                    CloseWindow();
                    break;
            }
        }    

    </script>

</asp:Content> 
```

**CS ：**

```
 private void FillMandatoryItemFirstList(Guid item_guid)
    {
        //MandatoryItems First

        IEnumerable<MandatoryItem> mandatoryFirst = MandatoryItem.GetMandatoryItemByCommitteeAndPos(item_guid, Enums.GetGuidFromEnum(Enums.AgendaElementPositionEnum.PosFirst));
        foreach (var item in CheckCount(mandatoryFirst))
        {
                    RadListBox1.Items.Add(new RadListBoxItem(item.UIdHandlingItemHandlingItem.Title, item.Id.ToString()));

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:28:15.720

您是否尝试过用 RadScriptManager 替换您的标准 ScriptManager？

# iphone - 如何在不使用开放套接字的情况下将数据从服务器推送到客户端？

> ID：10138257
> 
> 赞同：1
> 
> 时间：2012-04-13T09:21:01.427
> 
> 标签：iphone, objective-c, chat, apple-push-notifications, instant-messaging

我正在开发一个聊天应用程序，这是我之前很多人都做过的事情，所以我希望我的问题能得到一个明确的答案，但我在任何地方都找不到。

所以问题是：**如何在不使用开放套接字的情况下将数据从服务器推送到客户端？**
（当我说数据时，我指的是系统的管理员消息）

我可以想到两种方法：

1.  轮询——客户端每隔几秒就会“询问”服务器是否有新数据在等待他。
    这种方法的问题在于它会很快耗尽电池。

2.  APNS（Apple 推送通知服务） - 每当服务器有新数据时，他将向客户端发送推送通知，告知有新数据在等待他（推送本身不携带数据），这将触发“getData”请求从客户端到服务器。

这种方法意味着我需要发送“静默”推送（不向用户显示警报），并且我不确定这是对 APNS 的良好使用。

对此有什么想法吗？也许其他更好的方法？

# java - 加速服务

> ID：10138261
> 
> 赞同：-1
> 
> 时间：2012-04-13T09:21:33.820
> 
> 标签：java, service, acceleo

我必须在一个 Acceleo File 中包装一个 java 函数，它返回我自己的复杂类型......

[查询公共方法测试（arg0：包，arg1：类，arg2：属性）：MyOwnComplexeType = invoke（'org.eclipse.acceleo.module.sample.services.UML2Services'，'methodeTest（org.eclipse.uml2.uml.Package , org.eclipse.uml2.uml.Class, org.eclipse.uml2.uml.Property)', 序列{arg0, arg1, arg2}) /]

但是当我想在我的模板中加入 ta o 属性时它不起作用！

你能帮我吗 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:07:08.630

Acceleo 服务只能返回原始类型（字符串、布尔值、整数等）、当前使用的元模型的元素（在您的情况下为 UML 元素）或这些元素的集合。

问候，

斯蒂芬·贝戈多

# javascript - PHP, javascript, jquery, 仅设置小时

> ID：10138265
> 
> 赞同：1
> 
> 时间：2012-04-13T09:21:42.607
> 
> 标签：javascript, php, jquery, time

我已经在 php 中成功创建了一个我需要在我的网站上的小函数。但是我现在意识到我实际上需要在 javascript 或 jquery 中使用它，因为 PHP 只会在加载时执行此代码。我需要此函数在选择时与 onchange 一起使用。下面的代码是我的函数。任何人都可以指出我从哪里开始将其转换为 js/jquery 之类的代码：

```
function setTrnTime ($hr, $journeyTime){

date_default_timezone_set('GMT');

//convert current hour to time format hour
$currentHour = (date("H", mktime($hr))); 

// Journey time in hours
$journey = $journeyTime
$journey = $journey/60; // Get hours
$journey = ceil($journey); // Round off to next hour i.e. 3 hours 20mins is now 4 hours

// New Hours
$NewHour = (date("H", mktime($journey)));
$Newhour = $NewHour*60*60; // convert to seconds

// Final hour is Current Hour - JourneyTime (Hours)
$trnHour = (date('H', mktime($currentHour-$NewHour)));

return $trnHour;
} 
```

使用上面的代码，如果我传递两个值 06、60：这意味着我的答案是 05。例如 06 是早上 6 点。60 是 60 分钟。所以早上 6 点 - 60 分钟 = 早上 5 点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:27:02.163

您可以使用 Date 对象在 javascript 中执行相同的操作，请参阅此处的信息

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

编辑：添加了一些代码，甚至没有使用 Date 对象。

但是你需要一些复杂的东西吗，下面的步骤不是用更少的步骤完成的。

[http://jsfiddle.net/WWTDc/](http://jsfiddle.net/WWTDc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:35:57.263

如果`hr`是一个[`Date`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)对象，那么它很简单。否则，您可以创建一个 Date 对象并设置其小时：

```
//! \param[in] hr Date object or hour (0--23)
//! \param[in] journeyTime journey time in minutes.
function setTrnTime(hr,journeyTime){
    var end;
    if(typeof(hr) === 'number'){
        end = new Date();
        end.setHours(hr);
    }
    else
        end = hr;

    return (new Date(end - journeyTime*60*1000)).getHours();
} 
```

这将返回小时（[演示](http://jsfiddle.net/hVvne/)）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T09:27:05.783

有关 JavaScript 中 Date 对象的信息，请参见[此处](http://w3schools.com/jsref/jsref_obj_date.asp)。

# .net - IBM-MQ 的 .NET XMS... 和 Mono？

> ID：10138267
> 
> 赞同：1
> 
> 时间：2012-04-13T09:21:42.853
> 
> 标签：.net, mono, ibm-mq

有没有人尝试在 Mono 上使用 IBM 的 .NET Websphere 客户端库（XMS 等）？如果是这样，这是一次很好的（无缝）体验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T11:06:03.507

我刚刚安装了 MonoDevelop IDE 和先决条件 Gtk#2.12.x 工具包。在几分钟内编写了一个示例生产者应用程序，它运行良好，成功地将消息放入队列。

MonoDevelop IDE 的运行速度比 VS2010 IDE 快得多。经验很好。

Mono 是一个软件平台，旨在让开发人员轻松创建跨平台应用程序。您正在寻找任何细节吗？平台兼容性等？

# php - 如何在php5.3中找到php.ini

> ID：10138268
> 
> 赞同：0
> 
> 时间：2012-04-13T09:21:43.427
> 
> 标签：php, apache, sockets

我在创建套接字程序时遇到问题。

```
/* Get the port for the WWW service. */
$service_port = getservbyname('www', 'tcp');

/* Get the IP address for the target host. */
$address = gethostbyname('localhost');

/* Create a TCP/IP socket. */
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
------------------ 
```

当我运行一个程序时，我得到这样的错误

```
1
Fatal error: Call to undefined function socket_create() in /opt/local/apache2/htdocs/php/TCPclient.php on line 14 
```

我认为那个错误是因为我没有启用`extension=php_sockets.dll`

但是当我尝试找到 php.ini 时我没有找到 php.ini 我只是找到了 php.ini-development 和 php.ini-production，我更改了该文件以启用`extension=php_sockets.dll`但是当我再次尝试运行我的程序时'我仍然得到同样的错误，

有谁知道是什么问题？我给了我本地的 phpinfo，我仍然担心 phpinfo 中的配置文件没有，是否丢失了？感谢您的回答。 ![php信息](../Images/7a1010077a3e8a5c65449092485c6d68.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:36:10.340

看起来您正在 Mac OS 上运行 PHP。如果这是使用 macports 安装的，请运行以下命令

```
sudo port install php5-sockets 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:41:04.833

我在这里看到两件不同的事情：

1.  您认为扩展名采用 .dll 格式。其实就是窗户。您没有运行 Windows。

2.  您正在运行一个 UNIXoide 系统 一个常见的事情是接下来有一个配置文件，其中还有包含更多配置文件的文件夹，因此，如果通过所有配置*目录*递归扫描，这将创建一个基于多个文件的配置数据库。是的！摇滚！但是，问题是，你有很多东西要检查你的 phpinfo（如果你到目前为止还没有注意到的话）：

    *   **配置文件 (php.ini) 路径**- 这是配置的主要配置文件。
    *   **加载的配置文件**- 这是实际加载的主要配置文件。
    *   **扫描此目录以获取其他 .ini 文件**- PHP 也在此处查看。
    *   **已解析的其他 .ini 文件**- 这些文件也已实际加载。

所以好好看看所有这些设置，真的，真的要小心不要混在一起。[PHP 配置记录在 PHP 手册](http://www.php.net/manual/en/configuration.php)中。

检查文档扩展是什么，如何安装等。这取决于您的系统和软件管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:31:12.130

这是一个相当公平的假设。我敢肯定，因为在您的机器上找不到 php.ini，您有安装问题。

您使用的是什么网络服务器？您是安装 Apache 还是使用 IIS 来支持 PHP？

您的快照不包含 --enable-sockets 选项，也不包含加载的配置文件 (php.ini)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:32:56.843

由于您在 Mac 上运行，因此无法使用 dlla。您可以使用套接字支持编译 php 或尝试 Xampp

[http://www.apachefriends.org/en/xampp-macosx.html](http://www.apachefriends.org/en/xampp-macosx.html)

# gwt - Gwt-query 不适用于我的 MVP。

> ID：10138269
> 
> 赞同：2
> 
> 时间：2012-04-13T09:21:46.317
> 
> 标签：gwt, user-interface, gwtquery

几个月前我潜入了 gwt 世界，现在正在尝试使用 gwt-query 库。我遵循了本教程：[http](http://code.google.com/p/gwtquery/wiki/GettingStarted) ://code.google.com/p/gwtquery/wiki/GettingStarted 因为我在 Modle-View-Presenter 中工作，所以我尝试在我的视图中实现上述教程（绑定到 .. View.ui.xml），但它似乎工作。

我尝试创建一个标签，然后运行代码：

列出所有GwtLabels = $(".gwt-Label").widgets();

但它什么也没选择！

我想我必须以某种方式指出我希望 qwtQuery 搜索小部件的位置（指向我的特定 ui.xml 文件）

我究竟做错了什么？

提前致谢。下面是我的 Presenter + View + xml 的代码，它可以工作：

```
//================================Presenter=================================:

public class QueryPresenter extends
        Presenter<QueryPresenter.MyView, QueryPresenter.MyProxy> {

    public interface MyView extends View {
    }

    @ProxyCodeSplit
    @NameToken(NameTokens.query)
    public interface MyProxy extends ProxyPlace<QueryPresenter> {
    }

    @Inject
    public QueryPresenter(final EventBus eventBus, final MyView view,
            final MyProxy proxy) {
        super(eventBus, view, proxy);
    }

    @Override
    protected void revealInParent() {
        RevealRootContentEvent.fire(this, this);
    }

    @Override
    protected void onBind() {
        super.onBind();
    }
}

//====================================View============================================:

public class QueryView extends ViewImpl implements QueryPresenter.MyView {

    private final Widget widget;

    public interface Binder extends UiBinder<Widget, QueryView> {
    }

    @Inject
    public QueryView(final Binder binder) {
        widget = binder.createAndBindUi(this);

        List<Widget> allGwtLabels = $(".gwt-Label").widgets(); //Doesn't Work!!

        //Also doesn't work!!
        Label label = new Label("Click on me and I will disappear");
        $(label).click(new Function() {
            @Override
            public void f(Widget w) {
                //fade out the label
                $(w).fadeOut(1000);
            }
        });
        _html.add(label);
        //retrieve all attached gwt labels

    }

    @Override
    public Widget asWidget() {
        return widget;
    }
    @UiField Label _label;
    @UiField HTMLPanel _html;
}

//==================xml file===============================

<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">

<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g='urn:import:com.google.gwt.user.client.ui'
    ui:generateFormat='com.google.gwt.i18n.rebind.format.PropertiesFormat'
    ui:generateKeys='com.google.gwt.i18n.rebind.keygen.MD5KeyGenerator'
    ui:generateLocales='default'>

    <g:HTMLPanel ui:field="_html">
        <script type="text/javascript" language="javascript" src="gquerytest/gquerytest.nocache.js"></script>

    <g:Label text="hey" ui:field="_label"/>
    </g:HTMLPanel>
</ui:UiBinder> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:41:00.383

尝试：列出 allGwtLabels = $(".gwt-Label", widget).widgets();

您必须指定元素的容器，因为当您尝试查询元素时，元素未附加到 dom。

# iphone - ios：字符串到日期的转换

> ID：10138271
> 
> 赞同：1
> 
> 时间：2012-04-13T09:21:52.853
> 
> 标签：iphone, ios, ipad

我正在尝试使用以下代码将我的日期从 NSString 转换为 NSDate

```
NSDateFormatter *dateformatter = [[NSDateFormatter alloc]init];
[dateformatter setDateStyle:NSDateFormatterShortStyle];
[dateformatter setTimeStyle:NSDateFormatterNoStyle];
[dateformatter setDateFormat:@"dd/MM/yyyy"];
NSDate *myDate = [[NSDate alloc] init];

currMonth = 3;
currYear = 2012;
NSString *str = [NSString stringWithFormat:@"01/%2d/%d", currMonth, currYear];
str = [str stringByReplacingOccurrencesOfString:@" " withString:@"0"];
myDate = [dateformatter dateFromString:str];
NSLog(@"myStr: %@",str);
NSLog(@"myMonth: %2d",currMonth);
NSLog(@"myYear: %d",currYear);
NSLog(@"myDate: %@",myDate); 
```

上面的代码给了我错误的日期。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:29:44.750

你的输出是什么？请记住，NSDate 是 UTC。

`2012-03-01 00:00:00 (GMT+1)`是`2012-02-39 23:00:00 (UTC)`

另一个提示：

`%02`用前导零格式化整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:37:43.780

尝试这个：

```
-(NSDate *)dateFromString:(NSString *)string
{
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
[dateFormat setLocale:locale];
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSTimeInterval interval = 5 * 60 * 60;

NSDate *date1 = [dateFormat dateFromString:string];  
date1 = [date1 dateByAddingTimeInterval:interval];
if(!date1) date1= [NSDate date];
[dateFormat release];
[locale release];

return date1;
} 
```

告诉我它是否对你有帮助：]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:37:38.320

尝试

```
NSDateFormatter *dateformatter = [[NSDateFormatter alloc]init];
[dateformatter setDateStyle:NSDateFormatterShortStyle];
[dateformatter setTimeStyle:NSDateFormatterNoStyle];
[dateformatter setDateFormat:@"dd/MM/yyyy"];
NSDate *myDate = [[NSDate alloc] init];

int currMonth = 3;
int currYear = 2012;
NSString *str = [NSString stringWithFormat:@"01/%2d/%d", currMonth, currYear];
str = [str stringByReplacingOccurrencesOfString:@" " withString:@"0"];

//SET YOUT TIMEZONE HERE
dateformatter.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"PDT"];
myDate = [dateformatter dateFromString:str];
NSLog(@"myStr: %@",str);
NSLog(@"myMonth: %2d",currMonth);
NSLog(@"myYear: %d",currYear);
NSLog(@"myDate: %@",myDate); 
```

# multithreading - 在多进程多处理器环境中选择线程数

> ID：10138272
> 
> 赞同：0
> 
> 时间：2012-04-13T09:21:54.530
> 
> 标签：multithreading, multiprocessing

我经历了一些问题，例如[多处理器系统上的](https://stackoverflow.com/questions/9038604/posix-threads-on-a-multiprocessor-system)POSIX 线程和[多处理器机器中 posix 线程的并发性](https://stackoverflow.com/questions/10089552/concurrency-of-posix-threads-in-multiprocessor-machine)以及[线程和进程与多线程和多核/多处理器：它们是如何映射的？](https://stackoverflow.com/questions/1713554/threads-processes-vs-multithreading-multi-core-multiprocessor-how-they-are)

```
基于这些和其他一些 Wiki 文章，我相信对于具有三个基本工作的系统，即输入、处理和输出

```

*   对于 CPU 密集型线程的 CPU 绑定处理数量（应用程序数量 * 每个应用程序的线程数）应该是处理器内核数量的 1 到 1.5 倍。

*   输入和输出线程必须足够大，以消除任何瓶颈。例如对于基于query/query-ack和response/response-ack模型的通信系统，时间不能浪费在I/O等待状态。

*   如果对动态内存的需求很大，最好使用更多的进程而不是线程（以避免内存同步）。

    在确定我们的应用程序中的线程数时，这些参数是否相当一致？我们是否需要查看任何其他参数？

            回答 #1

赞同：1

时间：2012-04-13T10:33:59.933

“核心数量的 1 到 1.5 倍” - 这似乎取决于操作系统/语言。例如，在 Windows/C++ 上，对于大量 CPU 密集型任务，最佳值似乎是内核数量的两倍多，而性能分布非常小。如果是这样的环境，您似乎还不如在一个池上分配 64 个线程，而不用担心内核数量。

'query/query-ack 和 response/response - ack 模型，时间不能浪费在 I/O 等待状态' - 对于大多数网络具有高延迟的此类协议，这是不可避免的。延迟是由“乒乓”协议强制执行的，因此不可避免地会有 I/O 等待。异步 I/O 只是将此等待移入内核 - 它仍然存在！

'对动态内存的大量要求，最好使用更多的进程而不是线程' - 不是真的。“对动态内存的大量需求”通常意味着要移动大数据缓冲区。大缓冲区只能通过引用有效地移动。由于共享内存空间，这在线程之间非常容易和快速。对于进程，您会陷入尴尬且缓慢的进程间通信。

“确定我们的应用程序中的线程数”——嗯，在几个方面都很难。给定一个未知的架构，设计。语言和操作系统，我唯一的建议是尽量让一切都尽可能灵活和可配置。如果您有一个线程池，请将其大小设置为您可以调整的运行时参数。如果您有对象池，请尝试对其进行设计，以便可以更改其深度。有一些适用于您的测试盒的默认值，然后，在安装或运行时，您可以对特定系统进行任何特定的更改和调整。

灵活/可配置设计的另一件事是，您可以在测试时调整并修复建筑师、设计师、开发人员以及最重要的是客户做出的许多错误决策、假设和猜测

```

```

# c# - 创建 python web 服务和 c# 客户端应用程序的最佳方法

> ID：10138275
> 
> 赞同：1
> 
> 时间：2012-04-13T09:22:06.847
> 
> 标签：c#, python, web-services

我正在寻找一种简单可靠的方法来创建 Python Web 服务并从 .Net (c#) 应用程序中使用它。

我发现了很多不同的库，其中一个比另一个更好，但似乎没有人有一个完整的 Python Web 服务和一些简单的 c# 客户端的工作示例。以及配置和运行步骤的合理解释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T07:43:45.977

我建议使用[Tornado](http://www.tornadoweb.org/)。它使用非常简单，用 Python 编写的非阻塞 Web 服务器。我过去一直在使用它，我对学习和使用它的容易程度感到震惊。

我强烈鼓励您在设计 API 时考虑到 REST。它将使您的 API 变得简单，并且易于被任何可用的语言/平台使用。

请看一下“Hello World”示例——它取自 Torando 的主站点：

```
import tornado.ioloop
import tornado.web

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.write("Hello, world")

application = tornado.web.Application([
    (r"/", MainHandler),
])

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

至于客户端部分 - 没有什么复杂的：

```
string CreateHTTGetRequest(string url, string cookie)
{
    WebRequest request = WebRequest.Create(url);
    request.Method = "GET";
    request.Headers.Add("Cookie", cookie);

    WebResponse response = request.GetResponse();
    Stream stream = response.GetResponseStream();
    StreamReader reader = new StreamReader(stream);
    string content = reader.ReadToEnd();
    reader.Close();
    response.Close();
    return content;
} 
```

如果服务器在本地计算机上运行，​​则 URI 为：'http://localhost:8888/'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:34:08.387

您可以通过以下方式开始练习：

1.  安装 ZSI
2.  为您的服务创建 WSDL

完整的[例子](http://www.pha.com.au/kb/index.php/Python_SOAP_Tutorial_-_Creating_a_WEB_Service_with_ZSI)

4.在客户端（C#）按照本[教程](http://documentation.softwareag.com/adabas/asg243/tutorials/acc_dnet.htm)

# java - Java数据库查询语句返回null

> ID：10138279
> 
> 赞同：1
> 
> 时间：2012-04-13T09:22:26.797
> 
> 标签：java, jdbc, javadb

[我在NetBeans](http://en.wikipedia.org/wiki/NetBeans) 7中设置了一个 Java 数据库，并与之连接，但我的查询结果为空。

我的数据库名为`Questioneer`，表名为`QNTABLE`，位于服务选项卡中的 APP 文件夹下。

我使用了查询

```
query = "select QNNAME from QNTABLE"; // (QNNAME is a field name) with the statement: 

Statement st = dbConn.createStatement();
ResultSet rs = st.executeQuery(query); 
```

有了这个，但是`st`并`rs`显示为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:27:03.940

您的代码不会编译，因为 Java 使用 " 表示字符串文字，而不是 ''。

您的诊断肯定是关闭的，好像`st`是 null 然后最后一行将抛出一个`NullPointerException`.

基本上，您不仅应该重新检查您的代码，还应该重新检查您是如何处理它的。弄清楚你是否*真的*在运行你认为的代码，以及你如何检查变量的值。

如果您调用了*实例*变量`st`and`rs`并且它们被称为and的*局部*变量隐藏，这可以解释一些混乱。`st``rs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:26:34.173

检查你的`query`变量。也许您使用的是 double`'`而不是`"`或 single `'`。

# css - 我如何为这种风格编写 Css

> ID：10138281
> 
> 赞同：0
> 
> 时间：2012-04-13T09:22:38.133
> 
> 标签：css

嗨，我尝试编辑 wordpress 主题的 css，但是当我看到这个 DIV 样式时我被卡住了。

```
 <li id="text-3" class="widget sbg_widget Phubadee widget_text">
        <h2 class="widgettitle  sbg_title">Title Header</h2> 
```

当我想要：标题标题：字体大小：1.6em;时如何制作CSS

太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:24:21.397

```
h2.widgettitle.sbg_title { font-size:1.6em } 
```

解释：

`.`是 css 中的类选择器，你`h2`有 class`widgettitle`和`sbg_title`，所以我们想通过使用来选择这两个`.`。

`widgettitle`请注意，和 next之间不能有任何空格`.`，有空格意味着完全不同的事情，即选择具有类的*任何*后代`widgettitle``sbg_title`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T09:25:46.673

有更多的方法可以做到这一点。如果你愿意，你可以将它添加到你的 css

```
h2.widgettitle {font-size:1.6em;} 
```

或者如果你想更具体

```
h2.widgettitle .sbg_tittle 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T09:29:10.713

有很多方法可以做到。这些中的任何一个都可以工作，而且还有更多方法可以做到！

```
li.widget h2 { font-size:1.6em }

li.sbg_widget h2 { font-size:1.6em }

h2 { font-size:1.6em }

h2.widgettitle { font-size:1.6em }

h2.sbg_title { font-size:1.6em }

.widgettitle { font-size:1.6em } 

.sbg_title { font-size:1.6em }

li h2 { font-size:1.6em }

li>h2 { font-size:1.6em }

li#text-3 h2 { font-size:1.6em }

li#text-3 h2.widgettitle { font-size:1.6em }

li#text-3 h2.sbg_title { font-size:1.6em } 
```

如果你想了解 CSS 选择器，[Sitepoint](http://reference.sitepoint.com/css/selectorref)可以很好地分解它们是什么以及它们是如何工作的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:27:30.533

您可以通过多种方式选择该项目，例如

```
li#text-3 h2.sbg_title {
     font-size: 1.6em;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T09:28:16.733

选项 1：
.widgettitle.sbg_title {font-size:1.6em;}

选项 2：
.sbg_title {font-size:1.6em;}

选项 3：
.widgettitle {font-size:1.6em;}

# entity-framework - EntityFramework、AppHarbor 和配置变量

> ID：10138285
> 
> 赞同：1
> 
> 时间：2012-04-13T09:23:03.283
> 
> 标签：entity-framework, appharbor

我在使用 EntityFramework（数据库优先）和 AppHarbor 时遇到了一些问题。

我正在尝试使用 AppHarbor 插入到 web.config 中的配置字符串（我已将元数据添加到网站上的 Sequelizer 配置选项中），并且我正在尝试使用提供的代码添加一些附加值。

目前我是一个非常糟糕的人，将字符串直接嵌入到我的应用程序配置提供程序中 - 如果托管服务提供商在我们身上切换数据库，那就不好了，所以我希望以正确的方式做到这一点并使用 AppHarbor 通过提供的值网络配置。

这是 AppHarbor 提供的字符串（已删除密码和服务器详细信息）：

```
metadata='res://*/MyDataEntities.csdl|res://*/MyDataEntities.ssdl|res://*/MyDataEntities.msl;';provider=System.Data.SqlClient;provider connection string='Server=servername.sequelizer.com;Database=databasename;User ID=username;Password=<snip>;' 
```

如果“按原样”使用，则会产生以下错误：

```
The specified metadata path is not valid. A valid path must be either an existing directory, an existing file with extension '.csdl', '.ssdl', or '.msl', or a URI that identifies an embedded resource. 
```

然后，我使用以下代码（从 AppHarbor 支持讨论之一中窃取）来附加 EF 需要的所需额外内容......

```
 if (String.IsNullOrWhiteSpace(ProductionDatabaseConnectionString))
            {
                // Get it on first read and cache it
                var configuration = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
                var connectionString = configuration.ConnectionStrings.ConnectionStrings["SQLAppHarbor001"].ConnectionString;
                // Add the required extra metadata for EF4.x
                if (!connectionString.Contains("MultipleActiveResultSets=True;"))
                    connectionString += "MultipleActiveResultSets=True;";
                if (!connectionString.Contains("App=EntityFramework;"))
                    connectionString += "App=EntityFramework;";
                configuration.ConnectionStrings.ConnectionStrings["SQLAppHarbor001"].ConnectionString = connectionString;
                configuration.Save();
                ProductionDatabaseConnectionString = connectionString;
            }
            return ProductionDatabaseConnectionString; 
```

这会产生如下连接字符串：

```
metadata='res://*/MyDataEntities.csdl|res://*/MyDataEntities.ssdl|res://*/MyDataEntities.msl;';provider=System.Data.SqlClient;provider connection string='Server=servername.sequelizer.com;Database=databasename;User ID=username;Password=<snip>;'MultipleActiveResultSets=True;App=EntityFramework; 
```

但这会产生错误：

```
Format of the initialization string does not conform to specification starting at index 165. 
```

索引 165 是“提供者连接字符串”的开始。

我使用嵌入的工作连接字符串，目前可以正常工作，是：

```
metadata='res://*/MyDataEntities.csdl|res://*/MyDataEntities.ssdl|res://*/MyDataEntities.msl;';provider=System.Data.SqlClient;provider connection string='Server=servername.sequelizer.com;Database=databasename;User ID=username;Password=<snip>;multipleactiveresultsets=True;App=EntityFramework' 
```

唯一真正的区别是“multipleactiveresultsets=True;App=EntityFramework”条目在“provider connection string”字符串内部而不是外部。

其他人似乎在 AppHarbor 上使用提供的配置变量很好地使用 EntityFramework，那么我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:00:39.567

*Update: Multiple Active Result Sets (MARS) can now be enabled for the injected connection string by using the Sequelizer admin panel. This is the recommended approach since the `web.config` no longer needs to be modified, which causes an `AppDomain` reload during startup*

I came up against this today! I did the following:

```
var configuration = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
var connectionString = configuration.ConnectionStrings.ConnectionStrings["ConnStringAlias"].ConnectionString;
if (!connectionString.Contains("multipleactiveresultsets=True;"))
{
    connectionString = connectionString.TrimEnd('\'');
    connectionString = connectionString += "multipleactiveresultsets=True;\'";
    configuration.ConnectionStrings.ConnectionStrings["ConnStringAlias"].ConnectionString = connectionString;
    configuration.Save();
} 
```

The `MultipleActiveResultSets` property must be inside the `provider connection string`, which is why you received an error regarding the format of your connection string.

I seen a few 'solutions' around but none seemed to work for me, including the solution at the bottom of a [support page](http://support.appharbor.com/kb/add-ons/using-sequelizer) of how to do exactly this on AppHarbor's site. The solution provided even sends the application into an infinite loop as the application will restart every time the `web.config` file is saved, which is every time in the example.

# php - curl_setopt() CURLOPT_FOLLOWLOCATION 问题与 TCPDF

> ID：10138289
> 
> 赞同：3
> 
> 时间：2012-04-13T09:23:08.623
> 
> 标签：php, curl, tcpdf

我已将一个站点移至另一个虚拟主机。当我在 localhost 上测试时一切正常，但是当我在线尝试时，我收到以下信息：

```
curl_setopt() [<a href='function.curl-setopt'>function.curl-setopt</a>]: 
    CURLOPT_FOLLOWLOCATION cannot be activated when safe_mode is enabled or 
    an open_basedir is set 
```

当我尝试使用 TCPDF 生成 PDF 文件时（第 7542 行正在生成错误）

```
7534             if ($imsize === FALSE) {
7535                 if (function_exists('curl_init')) {
7536                     // try to get remote file data using cURL
7537                     $cs = curl_init(); // curl session
7538                     curl_setopt($cs, CURLOPT_URL, $file);
7539                     curl_setopt($cs, CURLOPT_BINARYTRANSFER, true);
7540                     curl_setopt($cs, CURLOPT_FAILONERROR, true);
7541                     curl_setopt($cs, CURLOPT_RETURNTRANSFER, true);
7542                     curl_setopt($cs, CURLOPT_FOLLOWLOCATION, true); 
```

我能做些什么来避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:01:35.743

如果托管公司/部门不愿意关闭安全模式，则解决方法可能是在 php.net [http://php.net/manual/ro/function.curl-setopt.php#71313找到的这个有用的片段](http://php.net/manual/ro/function.curl-setopt.php#71313)

```
function curl_redir_exec($ch)
{
    static $curl_loops = 0;
    static $curl_max_loops = 20;
    if ($curl_loops++ >= $curl_max_loops) {
        $curl_loops = 0;
        return FALSE;
    }
    curl_setopt_array($ch, array(CURLOPT_HEADER => true, CURLOPT_RETURNTRANSFER => true));
    $data = curl_exec($ch);
    list($header, $data) = explode("\n\n", $data, 2);
    $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    if ($http_code == 301 || $http_code == 302) {
        $matches = array();
        preg_match('/Location:(.*?)\n/', $header, $matches);
        $url = @parse_url(trim(array_pop($matches)));
        if (!$url) {  //couldn't process the url to redirect to
            $curl_loops = 0;
            return $data;
        }
        $last_url = parse_url(curl_getinfo($ch, CURLINFO_EFFECTIVE_URL));
        foreach(array('scheme', 'host', 'path') as $component) {
            if (!$url[$component]) {
                $url[$component] = $last_url[$component];
            }
        }
        $new_url = $url['scheme'] . '://' . $url['host'] . $url['path'] 
                 . ($url['query'] ? '?' . $url['query'] : '');
        curl_setopt($ch, CURLOPT_URL, $new_url);
        return curl_redir_exec($ch);
    } else {
        $curl_loops = 0;
        return $data;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:30:49.540

错误消息告诉您出了什么问题：

> `CURLOPT_FOLLOWLOCATION`启用安全模式或设置 open_basedir 时无法激活

*   [安全模式^(*文档*)](http://php.net/safe_mode)
*   [open_basedir^(*文档*)](http://php.net/open_basedir)

您应该能够通过这种方式获取当前配置：

```
var_dump(array_map('ini_get', array('safe_mode', 'open_basedir'))); 
```

要消除错误，请与您的主机支持部门联系，并告诉他们您对 PHP 设置的技术要求。如果托管商无法满足您的要求，那么您为 PHP 脚本选择了错误的托管商。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T10:36:18.057

您应该关闭`safe_mode`并`open_basedir`在您的主机中。您可以向托管支持咨询。如果它不可用，您可以将 的值更改`open_basedir`为 (0)。

例子：

```
 curl_setopt($rConnect, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($rConnect, CURLOPT_FOLLOWLOCATION, 1); 
```

应该改为

```
 curl_setopt($rConnect, CURLOPT_RETURNTRANSFER, 0);
    curl_setopt($rConnect, CURLOPT_FOLLOWLOCATION, 0); 
```

# android - android Mediaplayer 播放速度不快

> ID：10138291
> 
> 赞同：0
> 
> 时间：2012-04-13T09:23:14.130
> 
> 标签：android, media-player

我有一个 MediaPlayer 对象，通过它我在单击按钮时播放声音。声音文件只有 1-2 秒长。当我一个接一个（快速）单击相应的按钮时，它不会播放两次声音（它只播放一次。我尝试了一些这样的代码：

```
public void onClick(View view) {
if(DrawSound.isPlaying()) {
          DrawSound.stop();
         DrawSound.prepareAsync();
        }
      DrawSound.start();
} 
```

这不是工作。搜索很多，但可以使它工作。任何帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:29:00.743

尝试使用 prepare 而不是 prepareAsync

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:31:55.450

这是因为您没有在完成播放声音后释放媒体播放器......媒体播放器方法中的使用`release`和方法......`reset``setOnCompletionListener`

你可以像这样使用它......

```
 if(mp.isPlaying()) {
                    try {
                        mp.stop();
                        mp.reset();
                        mp.prepare();
                    } catch (IllegalStateException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    }
                mp.start();
} 
```

或者你可以使用它...

```
 mp.stop();         
            mp.prepareAsync();  
            mp.setOnPreparedListener(new OnPreparedListener() {

                @Override
                public void onPrepared(MediaPlayer mp) {
                    mp.start(); 
                }
            }); 
```

这对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:13:35.110

嘿伙计们，如果有人可以从中获得帮助：

用一个技巧解决我的问题（毕竟技巧可以解决所有问题：p）

我拿了 2 个 MediaPlayer 对象和一个 MediaPlayer 引用并这样写：

```
soundPlayer = DrawSound.isPlaying() ? DrawSound1 : DrawSound;
soundPlayer.start(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T09:40:23.220

试试这个，看看它是否有效：

```
if(DrawSound.isPlaying()) {         
            DrawSound.stop();         
            DrawSound.prepareAsync();  
            DrawSound.setOnPreparedListener(new OnPreparedListener() {

                @Override
                public void onPrepared(MediaPlayer mp) {
                    DrawSound.start(); 
                }
            });
            } 
```

# mongodb - 从 Mongo 文档中提取数据列表

> ID：10138298
> 
> 赞同：1
> 
> 时间：2012-04-13T09:24:16.393
> 
> 标签：mongodb

作为具有 RDBMS 背景的 mongo/nosql 新手，我想知道最好的方法是什么。

目前，我有大量文档，其中包含一些领域，我认为是“参考数据”。
我需要在搜索界面中显示总结这些“参考字段”的可能值，以进一步对我的文档集进行过滤。

让我们举一个关于营养的非常简单和愚蠢的例子。以下是一些 mongo 文档的摘录：

```
{ "_id": 1, "name": "apple", "category": "fruit"}
{ "_id": 1, "name": "orange", "category": "fruit"}
{ "_id": 1, "name": "cucumber", "category": "vegetable"} 
```

在应用程序中，我希望有一个选择框显示“类别”的所有可能值。在这里它将显示“水果”和“蔬菜”。

最好的方法是什么？

*   从现有文档中提取数据？
*   创建一些列出唯一可能值的参考文档（就像我在 RDBMS 中所做的那样）
*   将参考数据存储在 rdbms 中，并以编程方式链接 mongo 和 rdbms...
*   别的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:27:10.060

第一个选项是最容易实现的，并且如果您正确设置了索引（请参阅[distinct command](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)）应该是有效的，所以我会选择这个。

您还可以选择第二个选项（链接到参考集合 - RDBMS 方式），它以*性能*（您将需要更多查询来获取数据）换取*空间*（您将需要更少的空间）。此外，如果该类别也用于其他集合，则此选项是首选。

在这种情况下，我建议不要使用混合系统（NoSQL + RDBMS），因为其他选项更好。

您还可以将类别值直接存储在应用程序代码中 - 取决于您的用例。有时这是有道理的，尽管如果你告诉他，任何 RDBMS 狂热者都会泪流满面（或更糟）。YMMV。;)

# c# - LINQ 是否适用于索引？

> ID：10138299
> 
> 赞同：5
> 
> 时间：2012-04-13T09:24:21.363
> 
> 标签：c#, arrays, linq

可以说我有一个数组

```
byte[] myarr = {1,4,3,4,1,2,1,2,4,3,1,4,2}; 
```

myarr 的长度为 13（0-12 索引），这也是 int[] val 的长度。

```
int[] val = new int[13]; 
```

我想检查 myarr 的索引，它的值为 4，即 1、3、8、11。

那我想要

```
val[1]++;
val[3]++;
val[8]++;
val[11]++; 
```

一种方法是使用 for 循环

```
for(int i=0; i<myarr.length; i++)
{
   if(myarr[i] == 4)
      val[i]++;
} 
```

我们可以使用 Array.indexof 但它返回该值的第一个索引，这意味着该值必须是唯一的，并且我的 myarr 有很多相同的值。

这可以使用linq完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:31:15.627

这就是我最终在 LINQ 中所做的（包括更新）：

```
myarr.Select((b, i) => b == 4 ? i : -1)
    .Where(i => i != -1)
    .ToList().ForEach(i => val[i]++); 
```

您的非 LINQ 版本显然更加简洁易读，所以我认为您应该使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T09:29:05.330

你可以，但它不会更简单。LINQ 只会在查询部分为您提供帮助，更新部分必须在 foo 循环中完成，但由于数组包含值类型，您需要从 LINQ 查询中获取索引，而不是实际值，因此您一无所获。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T09:28:05.720

您可以使用[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)来存储[索引](http://msdn.microsoft.com/en-us/library/bb534869.aspx)：

```
int[] newIndices = myarr.Select((i, index) => new { Index = index, Value = i })
             .Where (x => x.Value == 4)
             .Select(x => x.Index + 1)
             .ToArray(); 
```

**编辑**：最后我明白了你的问题；）

```
myarr.Select((i, index) => new { Index = index, Value = i })
              .Where(x => x.Value == 4)
              .Select(x => x.Index)
              .ForEach(i => myarr[i]++); 
```

# c# - 与区域设置相关的双重类型问题

> ID：10138301
> 
> 赞同：2
> 
> 时间：2012-04-13T09:24:27.277
> 
> 标签：c#, wcf, double, decimal, regional-settings

在我的应用程序（WCF、REST、.NET）的对象请求中，我得到一个 double 类型的值。我需要这种方法来正确实现带有小数部分“，”和“。”的数字。如何在不求助于字符串类型的情况下安排它。例如：值 "3,25" 或 "3.25" 应该被视为与 double 的类型相同。

示例代码：

这是一个在请求对象中使用的类

```
[DataContract]
public class TripRatesMapped
{
    [DataMember(IsRequired = true)]
    public double Tolls { get; set; }

    [DataMember(IsRequired = true)]
    public double Parking { get; set; }

    [DataMember(IsRequired = true)]
    public double ExtraGr { get; set; }

    [DataMember(IsRequired = true)]
    public double Misc1 { get; set; }

    [DataMember(IsRequired = true)]
    public double Misc2 { get; set; }

} 
```

这是请求对象的一部分

{ "ExtraGr":1.25 , "Misc1":1.26 , "Misc2":1.27, "Parking":1.28, "Tolls":1.29 }

我需要这样我才能以这种形式提出请求：

{ “ExtraGr”：1,25，“Misc1”：1,26，“Misc2”：1,27，“停车”：1,28，“通行费”：1,29 }

不使用字符串类型是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:48:35.343

如果您使用客户端的语言环境，您应该能够将他们键入的内容转换为您可以在内部使用的双精度。打印值时，您需要再次使用区域设置。

使用这个[`TryParse`](http://msdn.microsoft.com/en-us/library/3s27fasw.aspx)重载：

```
string value = "3,25";
NumberStyles style = NumberStyles.Number;
CultureInfo culture = CultureInfo.CreateSpecificCulture("fr-FR");
if (Double.TryParse(value, style, culture, out number))
   Console.WriteLine("Converted '{0}' to {1}.", value, number);
else
   Console.WriteLine("Unable to convert '{0}'.", value); 
```

如果您省略该`CultureInfo`变量，它将使用本地文化来解析文本。

通过包含这些，`CultureInfo`您可以通过依次尝试不同的文化来建立一些弹性，直到您获得有效的替身或用完选项。这样做的主要缺点是，如果有人输入错误或者您以错误的顺序检查文化，您可能会得到错误的数字。如果有人输入“35,500”并且您首先检查法国文化，您会得到`35.5`而不是`35500.0`.

# caching - 当项目移动到其他位置时，如何更新 IntelliJ IDEA 的缓存信息？

> ID：10138302
> 
> 赞同：0
> 
> 时间：2012-04-13T09:24:31.667
> 
> 标签：caching, intellij-idea, metadata, projects-and-solutions

磁盘上的某个路径下有许多 IntelliJ IDEA 项目。它将一些元数据（实际上很多）保存在`home/.IdeaIC11`. 是否有可能以某种方式告诉 IDEA 所有项目都已移动到另一个位置并重建/更新其元数据缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:30:55.377

我不知道如何更新元数据，但最简单的方法（但有点慢）是删除元数据。当您再次打开项目时，IDEA 将重建元数据。

# browser - W3C 地理定位后端实现和扩展

> ID：10138303
> 
> 赞同：2
> 
> 时间：2012-04-13T09:24:37.323
> 
> 标签：browser, geolocation, wifi, w3c-geolocation

有人可以提供一个链接来描述现代浏览器中可用的地理定位 API 的后端实现吗？

具体来说，我需要确保在 Geolocation API 的服务器端注册了一堆 WiFi 点（最好及时更新它们的位置变化），并用于用户位置检测。这可以通过对某些权限的一些请求来完成，还是根据特定的算法自动执行？如果是后者，那么算法是什么，交互的选项是什么？

# c# - 如何在 SharpPcap OnPcapStatistics 事件中获取 SendBytes？

> ID：10138309
> 
> 赞同：2
> 
> 时间：2012-04-13T09:25:12.923
> 
> 标签：c#, .net, winpcap, sharppcap

我正在使用示例：

> [SharpPcap 示例 11：统计](http://sharppcap.git.sourceforge.net/git/gitweb.cgi?p=sharppcap/sharppcap;a=blob;f=Examples/Example11.Statistics/Example11.Statistics.cs;h=c677ac75e1727e011f333bf942bdf48e4d724142;hb=HEAD)

OnPcapStatistics 事件只给我接收到的字节，我怎么能得到上传（发送）字节？

> 总计 += (ulong)e.Statistics.RecievedBytes;

# c++ - 强制 CMake 使用 Visual Studio 对 C 文件使用 C++ 编译器

> ID：10138311
> 
> 赞同：9
> 
> 时间：2012-04-13T09:25:13.990
> 
> 标签：c++, c, visual-c++, cmake

我生成了 .h 和 .c 文件，它们必须使用 Visual Studio 编译为 C++ 文件。我听说我可以做类似的事情`set_source_files_properties( ${SOURCES} PROPERTIES LANGUAGE "CXX" )`。同时，我读到我不应该这样做，因为它应该只在异国情调的情况下使用。

**那么，强制 CMake 生成将 C 文件编译为 C++ 文件的 VS 项目的最佳方法是什么？**

PS：重命名生成的文件不是一种选择。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T09:32:24.873

我一直在使用单个属性（很可能您也可以设置目录属性 - 但这不是细粒度的），没有任何问题。虽然不是为了设置语言（但为什么它应该有所不同？）：

```
SET_SOURCE_FILES_PROPERTIES( file1.c PROPERTIES LANGUAGE CXX ) 
```

这适用于 Linux 和 Windows，并且似乎不会造成任何问题。你听过什么让你犹豫的事？

# recommendation-engine - Eventbrite api 用于推荐事件

> ID：10138317
> 
> 赞同：0
> 
> 时间：2012-04-13T09:25:50.980
> 
> 标签：recommendation-engine, eventbrite

我想知道eventbrite api是否也提供推荐服务。如果没有，是否可以借助api提供的其他数据来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:26:37.773

Eventbrite 目前不为其推荐系统提供公共 API。但是，他们的所有公共事件内容都可以通过他们的[event_search()](http://developer.eventbrite.com/doc/events/event_search/) API 方法获得。您也许可以根据该数据构建自己的建议。

# linux - 启动服务自动失败

> ID：10138319
> 
> 赞同：0
> 
> 时间：2012-04-13T09:26:05.640
> 
> 标签：linux, bash, debian

我目前面临一个奇怪的问题。我在 alix.2d2 上的 linux voyage 下使用 debian 挤压，我正在尝试使用 init.d 在启动时启动自制脚本。

为此，我正在编写一个简单的脚本，将其放入 /etc/init.d/ (/etc/init.d/linknx) 并使用 update-rc.d 配置引导。

```
update-rc.d linknx start 191 12345 
```

在重新启动之前，我正在使用以下命令测试脚本：

```
service linknx start 
```

而且效果很好。系统重新启动时，不会启动脚本。我正在尝试使用 update-rc.d 更改引导配置

```
update-rc.d linknx defaults 
```

同样的问题。

所以在那之后，我正在清理引导配置，并在 /etc/rc.local 中添加两行。

```
> sh -c "logger -p local0.notice [LAUNCHTEST] "rc.local invoking"
> service linknx start 
```

第一行通过，但第二行失败。

有人可以确定问题吗？

谢谢你的帮助 ！问候

* * *

剧本：

```
#!/bin/sh -e1
### BEGIN INIT INFO
# Provides:          linknx
# Required-Start:    $local_fs $remote_fs $network $syslog $nocatsplash
# Required-Stop:
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# X-Interactive:     false
# Short-Description: Start/stop linknx daemon
# Description: Simnet linknx daemond starter.
### END INIT INFO

now=$(date +"%F %k:%M:%S")
port=3671
ip=192.168.2.10
LD_LIBRARY_PATH=/usr/local/lib
knx_config_file=/etc/linknx.xml
knx_write_file=/etc/linknx.xml

log_tag="[LINKNX]"
log_level="-p local0.notice"

case "$1" in
start)
    logger $log_level -t $log_tag -s "Starting linknx and eibd ..."
    ldconfig -l
    eibd -d -D -S -T -i ipt:$ip:$port
    linknx -d --config=$knx_config_file --write=$knx_write_file
    logger $log_level -t $log_tag -s "Done\n"
;;
stop)
;;
reload|restart|force-reload)
;;
test)
    logger $log_level -t $log_tag -s "[$now] - [TEST] - This is a simple test to check  behavior of the program ..."
;;
*)
   logger $log_level -t $log_tag -s "[$now] - [FATAL] - Unknow command, only available are start|stop|restart|reload|force-reload"
;;
esac

exit 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:03:11.190

你应该使用

```
insserv linknx 
```

并不是

```
update-rc.d linknx defaults 
```

从 Debian 6.0 (Squeeze) 开始，**update-rc.d**已被替换为**insserv**（参见[此处](http://wiki.debian.org/LSBInitScripts/DependencyBasedBoot)）。为什么？因为 6.0 引入了一个[新的引导过程](http://www.debian.org/releases/stable/i386/release-notes/ch-whats-new.en.html#dependency-boot)，您已经为它准备了标题（脚本顶部的 INIT INFO 部分）。

# linux - 脚本在不更改linux中的扩展名的情况下更改basename

> ID：10138322
> 
> 赞同：0
> 
> 时间：2012-04-13T09:26:09.670
> 
> 标签：linux, bash, shell, file-rename

我有几个带有`a.dat`, `a.txt`, `a.mp3`, `b.dat`, `b.txt`, `b.mp3`, `b.zip`,`b.rar`等`c.mp3`的文件。我想将所有具有基本名称“a”的文件重命名为基本名称“x”。

这样文件就变成`x.dat`, `x.txt`, `x.mp3`, `b.dat,`b.txt `,`b.mp3 `,`b.zip `,`b.rar `,`c.mp3` 等等。

在 Linux 中，这可以通过终端完成，但需要大量输入。我想要一个脚本来为我完成任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:28:29.677

`rename`当您拥有（或`prename`在某些系统上）命令时，您不需要脚本。

它允许使用任意复杂的 Perl 正则表达式重命名文件组：

```
pax> ll qq*
-rwxr-xr-x 1 pax pax 4574 Apr 13 17:03 qq
-rw-r--r-- 1 pax pax  213 Apr 13 17:03 qq.c
-rw-r--r-- 1 pax pax  804 Apr  6 12:23 qq.cpp
-rw-r--r-- 1 pax pax  258 Apr  5 21:33 qq.m
-rw-r--r-- 1 pax pax  904 Apr  6 10:35 qq.o
-rw-r--r-- 1 pax pax  241 Apr  6 10:50 qq.py
-rw-r--r-- 1 pax pax  769 Apr  7 09:47 qq.txt

pax> rename 's/qq/xyzzy/' qq*

pax> ll qq*
ls: cannot access qq*: No such file or directory

pax> ll xyzzy*
-rwxr-xr-x 1 pax pax 4574 Apr 13 17:03 xyzzy
-rw-r--r-- 1 pax pax  213 Apr 13 17:03 xyzzy.c
-rw-r--r-- 1 pax pax  804 Apr  6 12:23 xyzzy.cpp
-rw-r--r-- 1 pax pax  258 Apr  5 21:33 xyzzy.m
-rw-r--r-- 1 pax pax  904 Apr  6 10:35 xyzzy.o
-rw-r--r-- 1 pax pax  241 Apr  6 10:50 xyzzy.py
-rw-r--r-- 1 pax pax  769 Apr  7 09:47 xyzzy.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:38:26.167

有一个小程序`mmv`可以完成这项工作：

```
$ touch a.dat a.txt a.mp3 b.dat b.txt b.mp3 b.zip b.rar c.mp3
$ mmv "a.*" "x.#1"
$ ls 
b.dat  b.mp3  b.rar  b.txt  b.zip  c.mp3  x.dat  x.mp3  x.txt 
```

`mmv`通常随任何 Linux 发行版一起提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:01:46.407

我会建议一种方法，我认为这可行。我觉得这有点奇怪，不要笑。第十标准数学。

首先，您使用 ls 和 grep 命令的组合 grep 文件夹中的所有名称

*   ls | grep ^a 这将列出所有以 a 作为第一个字母的文件。如果您只需要以 a 作为名称的文件，则可以使用正则表达式。

*   使用 while 循环一一读取文件名

*   将文件名存储到一个变量中（比如 $name1）。然后使用 sed 和 awk，提取文件名的第二部分（即，将点删除到空格中并打印第二列）将其存储在另一个变量中（比如 $extn） .

*   您可以使用存储在变量 ($name1) 中的第一个名称重命名文件以指定哪个文件，并使用第二个变量指定新名称的扩展名 ($extn)...

这是一条很长的路线:) 我相信这会奏效。试试看。将此视为算法和脚本。很抱歉我提供了一个脚本。有点懒惰。

# java - 如何从 linux 服务器读取 geolitecity 文件路径？

> ID：10138324
> 
> 赞同：0
> 
> 时间：2012-04-13T09:26:20.970
> 
> 标签：java, apache, jsp, tomcat, geoip

我的开发环境是`windows`，使用`JSP,Apache server 5.5`. 我在 .geolitecity 提供的帮助下开发了一个应用程序`MaxMind`。我已经上传`geolitecity.dat`到我网站同一个文件夹中的服务器（我不知道它的正确程序，我是第一次这样做）。我用

```
String systemPath=new java.io.File(".").getCanonicalPath(); 
```

获取当前目录路径，以便我可以从中读取。但我没有得到完整的路径。我只是开始`tomcat5.5.3\bin`。是否可以使用此路径读取文件？我对linux没有太多了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:06:16.393

在 Servlet/JSP 中：

```
String path = getServletContext().getRealPath("/yourfilename.txt"); 
```

这将为您提供给定文件名的完整路径。

注意：当您将它部署在 tomcat 中并从外部 eclipse 运行时，它将起作用。由于eclipse在部署Web应用程序时有自己的内部结构[如果没有改变]。

# objective-c - CLGeocoder 多个地址？

> ID：10138325
> 
> 赞同：1
> 
> 时间：2012-04-13T09:26:22.883
> 
> 标签：objective-c, ios, xcode, geocoding, block

我需要对两个不同的地址进行地理编码，但我需要将结果放在相同的范围/方法内。我怎样才能在同一个块内`location1`引导相同的变量。`location2`这是我当前的代码...

```
 - (IBAction)calculateDistance {
    [textFieldDestination resignFirstResponder];
    NSString *origin = [textFieldOrigin text];
    if (origin) {
        CLGeocoder *geoCode = [[CLGeocoder alloc] init];

        [geoCode geocodeAddressString:origin completionHandler: ^(NSArray *placemarks, NSError *error) {
            if (!error) {
                CLPlacemark *place = [placemarks objectAtIndex:0];
                CLLocation *location = place.location;
                CLLocation *location1 = [[CLLocation alloc] initWithLatitude:location.coordinate.latitude longitude:location.coordinate.longitude];
            } else {
                NSString *string = [NSString stringWithFormat:@"%@ - also make sure you have inputted a valid city", [error localizedDescription]];
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:string delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
                [alert show];
            }
        }]; 
    }

    NSString *destination = [textFieldDestination text];
    if (destination) {
        CLGeocoder *geoCode2 = [[CLGeocoder alloc] init];

        [geoCode2 geocodeAddressString:destination completionHandler:^(NSArray *placemarks, NSError *error) {
            if (!error) {
                CLPlacemark *place = [placemarks objectAtIndex:0];
                CLLocation *location = place.location;
                CLLocation *location2 = [[CLLocation alloc] initWithLatitude:location.coordinate.latitude longitude:location.coordinate.longitude];
            } else {
                NSString *string = [NSString stringWithFormat:@"%@ - also make sure you have inputted a valid city", [error localizedDescription]];
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:string delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
                [alert show];
            }
        }]; 
    }

    CLLocationDistance distanceM = [location1 distanceFromLocation:location2];  // obviously error so you can see that I need location1 and location2 in the same block.... but how!?  
    [metreDistance setText:[NSString stringWithFormat:@"%f", distanceM]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:57:06.147

我发现了如何做到这一点。对于每个地理编码块，我都指向了一个具有特定参数的方法。很简单，只需要使用逻辑！

# java - JSR-303 Bean Validation - 一个验证器的自定义约束多个注释

> ID：10138328
> 
> 赞同：1
> 
> 时间：2012-04-13T09:26:36.800
> 
> 标签：java, bean-validation

在编写自定义约束时，一个验证器实现可以验证多个注释。例如，我有几个注释，它们规定了不同的@size 注释，但我希望它们都指向同一个验证器类，该验证器类进行一些全局检查，即所有都必须匹配某个正则表达式。据我所见，该实现采用一种注释类型。

一个注解

```
@Target( { METHOD, FIELD, ANNOTATION_TYPE, TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = {UCNValidator.class})
@Documented
@Size(min = 9, max = 9, message = "{exactlength}")
public @interface UCN {

    String message() default "{invalidFormat}";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};

    String fieldName() default "ucn";

} 
```

验证者

```
public class UCNValidator implements ConstraintValidator<UCN, String>
{

    private String pattern = "[a-zA-Z].*";
    private String fieldName;

    @Override
    public void initialize( UCN constraintAnnotation )
    {
        this.fieldName = constraintAnnotation.fieldName();
    }

    @Override
    public boolean isValid( String value, ConstraintValidatorContext constraintValidatorContext )
    {

        if ( value != null )
        {
            if ( !value.matches(pattern) )
            {
                //do some stuff
                return false;
            }

        }

        return true;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:38:20.977

There doesn't seem to be a way to access other values from an object when validating one of its properties. The solution I use is to put the annotation on the class, then the validator will get the entire object in to validate against, and you can access just the info you need to perform the validation.

Here's one I wrote to compare two different properties of an object against each other:

```
@Target(TYPE)
@Retention(RUNTIME)
@Constraint(validatedBy = LessThanValidator.class)
@Documented
public @interface LessThan {

    String message() default "{com.bullethq.constraints.LessThan}";

    String bigValueProperty();

    String littleValueProperty();

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};
} 
```

Then the validator class is:

```
public class LessThanValidator implements ConstraintValidator<LessThan, Object> {

    private LessThan constraint;

    public void initialize(LessThan constraintAnnotation) {
        constraint = constraintAnnotation;
    }

    public boolean isValid(Object object, ConstraintValidatorContext cvc) {
        Object bigValue = getValue(object, constraint.bigValueProperty());
        Object littleValue = getValue(object, constraint.littleValueProperty());

        // If one of the values is null, then we do not perform validation.
        if (bigValue == null || littleValue == null) {
            return true;
        }

        if (bigValue instanceof Comparable && littleValue instanceof Comparable) {
            boolean valid = ((Comparable<Object>) bigValue).compareTo(littleValue) > 0;
            if (!valid) {
                // If the values are not valid, then build a custom violations which has the correct path in it.
                cvc.buildConstraintViolationWithTemplate(cvc.getDefaultConstraintMessageTemplate())
                        .addNode(constraint.littleValueProperty())
                        .addConstraintViolation().disableDefaultConstraintViolation();
            }
            return valid;
        }
        throw new IllegalArgumentException("Properties " + constraint.bigValueProperty() + " and " + constraint.littleValueProperty() + " both need to be comparable in " + object.getClass());
    }
} 
```

The getValue() method is just a static method using reflection to get the value from the object.

# java - tomcat 战争部署

> ID：10138331
> 
> 赞同：1
> 
> 时间：2012-04-13T09:26:56.907
> 
> 标签：java, tomcat

我正在部署一个名为 tomcat 的战争文件`"myapps.war"`。我已经进入`server.xml`for `docbase`to be `"/callmyapp"`。但是在部署之后，在 tomcat 目录中创建了两个文件夹`webapps`-

1.  我的应用程序

2.  调用myapp

现在我可以使用两个 url 访问我的战争`/myapps`，一个以`/callmyapp`. 我只想`/callmyapp`作为这场战争的上下文根，不想响应请求`/myapps`。有什么帮助吗？

谢谢，查鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:28:51.210

将 myapps.war 重命名为 callmyapp.war。tomcat 会自动将战争解压到同名目录中。设置不同的上下文也会创建第二个目录。

或者您可以定义一个 context.xml 并将其放在您的 /webapps 目录中：

```
<Context path="/callmyapp" docBase="webapps/myapps.war" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:41:13.803

您是否尝试过重命名 app.war ？我认为根是从文件名推断出来的。

# c# - 使用 JKS 和/或 PFX 证书从 C# 客户端调用 Java Web 服务

> ID：10138333
> 
> 赞同：8
> 
> 时间：2012-04-13T09:27:01.743
> 
> 标签：c#, java, ssl, request, certificate

我基本上需要保护我对这项服务的请求。

我得到了一个`JAR`测试客户端和两个文件，`trust.jks`和`Client.pfx`，但我不知道如何使用它们：我知道 X509Certificate2 类以某种方式涉及。

执行测试客户端的命令行如下：

```
java -Djavax.net.ssl.trustStore=trust.jks -Djavax.net.ssl.trustStorePassword=******** -Djavax.net.ssl.trustStoreType=JKS -Djavax.net.ssl.keyStore=Client.pfx -Djavax.net.ssl.keyStoreType=pkcs12 -Djavax.net.ssl.keyStorePassword=******** -jar TestClient.jar https://myServiceurl 
```

它可以工作，所以我既可以看到服务，也应该正确配置服务本身。

我的 C# 客户端（它的目标是 .NET 2.0）使用普通的 Web 引用来执行请求：

```
wsReferenceClient service = new wsReferenceClient();
//certificate code here ?
//maybe service.ClientCertificates.Add(<X509Certificate2 object built somehow>); ?
service.MyRequest(myParameters); 
```

服务器设置应正确设置。

我摸索着这些`X509Certificate2`方法，但我无法得出有意义的东西，所以回答“你试过什么？” 目前的问题是'我真的不知道首先要尝试什么'。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T08:06:12.337

原来我不需要对`JKS`文件做任何事情。

```
wsReferenceClient service = new wsReferenceClient();
X509Certificate2 cert = new X509Certificate2();
cert.Import("Client.pfx", "<the password>", DefaultKeySet);
service.ClientCertificates.Add(cert);
service.MyRequest(myParameters); 
```

这允许我的 HTTPS 请求成功通过。

# xcode - 在 XCode 4 中硬编码的本地化文件路径 - 当项目移动到新文件夹时消失

> ID：10138338
> 
> 赞同：2
> 
> 时间：2012-04-13T09:27:06.190
> 
> 标签：xcode, xcode4, localization, localizable.strings

我们最近使用 Xcode 将一个项目本地化为 15 种语言，但我注意到当我将项目带回家时，一些本地化文件的路径都被硬编码为我工作 mac 的完整路径。

我们只本地化了两个文件：

```
InfoPlist.strings
Localizable.strings 
```

我们使用 Xcode 进行了如下本地化。

```
We added the 15 languages to the whole project.
Then clicked on Localizable.string and in 
File Inspector > Localisation > + 
    clicking + we added it to the 15 languages we set up for the whole project.

Localizable.strings then moved into
en.lproj/Localizable.strings
fr.lproj/Localizable.strings
etc. 
```

我们将 en.lproj/Localizable.strings 发送给翻译人员，并在每次返回时替换每个翻译文件夹中的文件。

这是通过 Finder 完成的，而不是将文件拖到 XCode 中（我想，这是不久前的事了）

为了赶上最后期限，我把项目带回家了，但是当我打开它时，除了英语之外的所有本地化文件在 XCode 中都显示为红色，好像文件丢失了一样。

在 finder 中，它们在那里，但我检查了 File Inspector/Full Path，它被硬编码到我的工作 mac 的路径中。

```
Also the LOCATION drop down was set to ABSOLUTE PATH for the missing files 
but is DISABLED so cant change it to RELATIVE TO GROUP. 
```

我注意到该路径包含一个带有空格的文件夹，因此认为这可能是问题所在，尽管项目中的每个文件都应该有问题。

```
Only way to fix it was tob back up using Finder/Duplicate on each .strings file using Finder.
Then click on Localizable.strings in Xcode (top level/ not individual localization)
Then in File Inspector delete the missing Localizations and re-add it.
This will ask you to replace the existing file (it copies the en.lproj version over it, thats why you need to back up with Duplicate) 
so after you need to go back into Finder and put the Duplicate back. 
```

知道为什么会这样吗？或如何轻松更改（位置下拉菜单已禁用）。知道为什么设置文件相对于组的下拉菜单被禁用。（我认为是因为 XCode 管理本地化）

干杯

# linux - 使用调试符号从源代码编译 glibc

> ID：10138342
> 
> 赞同：6
> 
> 时间：2012-04-13T09:27:23.957
> 
> 标签：linux, gcc, compilation, linker, glibc

我需要使用调试符号从源代码编译 glibc。

1.  我在哪里为此指定“-g”选项
2.  我以后如何创建一个指向这个特定 glibc 的示例代码链接，而不是我系统上安装的那个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T14:01:05.097

> 我需要使用调试符号从源代码编译 glibc

*如果没有*调试符号，您将很难编译 glibc 。默认值`./configure && make` *将*在`-g`编译行。

> 我以后如何创建一个指向这个特定 glibc 的示例代码链接，而不是我系统上安装的那个？

这有点棘手，并[在这里](https://stackoverflow.com/a/851229/50617)回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T11:34:40.867

这可能是一个`configure`技巧问题。首先，尝试`configure --help`，然后，或者`configure --enable-debug`或者也许`configure CC='gcc -g'`，甚至`configure CFLAGS='-g'`

对于您的示例代码，也许考虑玩`LD_LIBRARY_PATH`或`LD_PRELOAD`技巧（假设链接到动态库）。

但要非常小心，因为*Glibc*是 Gnu/Linux 类系统的基石。

# c# - ASP.Net C# Ajax 表单验证和提交按钮状态

> ID：10138343
> 
> 赞同：2
> 
> 时间：2012-04-13T09:27:25.983
> 
> 标签：c#, ajax, validation

我有一个相当复杂的表单，我想在表单以某种漂亮的 ajax 方式提交之前对其进行验证。作为其中的一部分，我还想仅在正确填写表单后启用表单提交按钮。

我正在使用 C#/asp.net/jquery

谢谢卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:56:45.690

您可以使用 ASP.NET 验证组并添加验证摘要。提交按钮将进入定义的验证组，并且只有在表单满足验证要求时才会触发。

```
<asp:Button ValidationGroup="YourGroupName" runat="server" /> 
```

# sql - 附加 mdf 文件时出错

> ID：10138356
> 
> 赞同：3
> 
> 时间：2012-04-13T09:28:15.483
> 
> 标签：sql, sql-server-2005

在 sql server 中附加 mdf 文件时出现`unable to open the physical file name.mdf`错误。如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:50:05.443

我指的是以下 URL 论坛主题，其中讨论了“无法打开物理文件 - 操作系统错误 5：5（未找到错误）Microsoft SQL Server：错误 5120”主题。

[http://social.msdn.microsoft.com/Forums/en/sqldatabaseengine/thread/9e563890-e35f-4524-82b9-3cca08fec5ed](http://social.msdn.microsoft.com/Forums/en/sqldatabaseengine/thread/9e563890-e35f-4524-82b9-3cca08fec5ed)

我希望在这各种解决方案中，并试图通过使用其中任何一个来解决。

# asp.net - IIS 池线程在 malloc 和 free、COM+ 上被阻塞

> ID：10138361
> 
> 赞同：1
> 
> 时间：2012-04-13T09:28:18.857
> 
> 标签：asp.net, iis-7, deadlock, freeze

我正在使用 windows server 2008 server x64 和 IIS 7 处理来自 asp.net 页面逻辑的 COM 对象。通常，工作几个小时后，用户无法访问该站点，因为它被阻止直到 iisreset 没有完毕。

这是来自 DebugDiag 工具的崩溃/挂起报告：

在 w3wp.dmp 中的线程 41 拥有的 0x053901f8 处检测到可能的阻塞或泄漏临界区 此锁的影响 47.13% 的线程被阻塞（大约 20 个线程）

以下函数试图进入这个关键部分

```
ntdll!RtlpAllocateHeap+18c6
ntdll!RtlpFreeHeap+1334 
```

这是管理 com 的时间互操作对象。堆栈跟踪如下：

```
ntdll!NtWaitForSingleObject+a    
ntdll!RtlpWaitOnCriticalSection+ea    
ntdll!RtlEnterCriticalSection+f4    
ntdll!RtlpAllocateHeap+18c6    
ntdll!RtlAllocateHeap+151    
msvcr100!malloc+5b 
```

或者

```
ntdll!NtWaitForSingleObject+a    
ntdll!RtlpWaitOnCriticalSection+ea    
ntdll!RtlEnterCriticalSection+f4    
ntdll!RtlpFreeHeap+1334    
ntdll!RtlFreeHeap+1a2    
kernel32!HeapFree+a    
msvcr100!free+1c 
```

我猜，管理内存中有损坏。站点在 VMware Server 下的虚拟机上工作。

有没有人在这方面有类似的经验？

非常感谢！

# asp.net - ASPXGridView (devexpress) 超链接列排序

> ID：10138363
> 
> 赞同：3
> 
> 时间：2012-04-13T09:28:29.300
> 
> 标签：asp.net, c#-4.0

我有一个 DevExpress ASPx GridView 控件，并试图实现网格列的排序。

gridView 在一列中包含整数值，其余为文本。我还有一个包含超链接的列，并在运行时通过后面的代码添加。

我正在使用该`Aspxgrid_CustomColumnSort`事件对网格进行排序。

我可以成功实现包含整数值和文本的列的排序，但是相同的代码不适用于带有超链接的列。

当我单击列标题时，超链接按升序排序，但是当我第二次单击标题时，网格未按降序排序，超链接按随机顺序排序（既不升也不降）

而且，进一步点击标题不会做任何事情。

任何意见/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:11:04.627

也许这个链接会有所帮助： http: [//www.devexpress.com/Support/Center/p/B145444.aspx](http://www.devexpress.com/Support/Center/p/B145444.aspx)。在此页面中，有人报告了使用`GridViewDataHyperLinkColumn`.

# ruby-on-rails - Heroku 部署问题 - 你能帮我找出错误吗？

> ID：10138367
> 
> 赞同：2
> 
> 时间：2012-04-13T09:28:40.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我的应用程序在本地运行良好，但在部署时崩溃。我的 Heroku 日志如下，我已经修复了一些问题，但现在正在努力寻找罪魁祸首。我知道设计警告，但是，我看不出这些是原因....

任何人都可以发现有问题的错误吗？

```
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/initializable.rb:54:in `each'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/initializable.rb:54:in `run_initializers'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/application.rb:96:in `initialize!'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:240:in `require'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:240:in `block in require'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:223:in `block in load_dependency'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:640:in `new_constants_in'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:223:in `load_dependency'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:240:in `require'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/builder.rb:51:in `instance_eval'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/builder.rb:51:in `initialize'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/builder.rb:40:in `eval'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/builder.rb:40:in `parse_file'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/server.rb:200:in `app'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/commands/server.rb:46:in `app'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/server.rb:301:in `wrapped_app'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/server.rb:252:in `start'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/commands/server.rb:70:in `start'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/commands.rb:54:in `block in <top (required)>'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/commands.rb:49:in `tap'
2012-04-13T09:10:48+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/commands.rb:49:in `<top (required)>'
2012-04-13T09:10:48+00:00 app[web.1]:   from script/rails:6:in `require'
2012-04-13T09:10:48+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-04-13T09:10:49+00:00 heroku[web.1]: Process exited with status 1
2012-04-13T09:10:49+00:00 heroku[web.1]: State changed from starting to crashed
2012-04-13T09:10:49+00:00 heroku[web.1]: State changed from crashed to created
2012-04-13T09:10:49+00:00 heroku[web.1]: State changed from created to starting
2012-04-13T09:10:58+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 48016`
2012-04-13T09:11:08+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.2/lib/action_dispatch/http/mime_type.rb:101: warning: already initialized constant PDF
2012-04-13T09:11:08+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.1.2/lib/action_dispatch/http/mime_type.rb:101: warning: already initialized constant PDF
2012-04-13T09:11:09+00:00 app[web.1]: 
2012-04-13T09:11:09+00:00 app[web.1]: [DEVISE] Devise.case_insensitive_keys is false which is no longer supported. If you want to continue running on this mode, please ensure you are not using validatable (you can copy the validations directly to your model) and set case_insensitive_keys to an empty array.
2012-04-13T09:11:09+00:00 app[web.1]: 
2012-04-13T09:11:09+00:00 app[web.1]: [DEVISE] Devise.use_salt_as_remember_token is false which is no longer supported. Devise now only uses the salt as remember token and the remember_token column can be removed from your models.
2012-04-13T09:11:09+00:00 app[web.1]: 
2012-04-13T09:11:09+00:00 app[web.1]: 
2012-04-13T09:11:09+00:00 app[web.1]: 
2012-04-13T09:11:09+00:00 app[web.1]: [DEVISE] Devise.reset_password_within is nil. Please set this value to an interval (for example, 6.hours) and add a reset_password_sent_at field to your Devise models (if they don't have one already).
2012-04-13T09:11:09+00:00 app[web.1]: 
2012-04-13T09:11:13+00:00 app[web.1]: => Booting WEBrick
2012-04-13T09:11:13+00:00 app[web.1]: => Rails 3.1.2 application starting in production on http://0.0.0.0:48016
2012-04-13T09:11:13+00:00 app[web.1]: => Call with -d to detach
2012-04-13T09:11:13+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-04-13T09:11:13+00:00 app[web.1]: Exiting
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/app/models/press.rb:1:in `<top (required)>'
2012-04-13T09:11:13+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.2/lib/active_record/base.rb:1088:in `method_missing': undefined method `to' for #<Class:0x00000005f87690> (NoMethodError)
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:225:in `load_dependency'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/app/models/press.rb:2:in `<class:Press>'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:240:in `require'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:240:in `block in require'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:240:in `require'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:348:in `require_or_load'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:302:in `depend_on'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:214:in `require_dependency'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/engine.rb:417:in `block (2 levels) in eager_load!'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/engine.rb:416:in `each'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/engine.rb:416:in `block in eager_load!'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/engine.rb:414:in `each'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/engine.rb:414:in `eager_load!'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/application/finisher.rb:51:in `block in <module:Finisher>'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/initializable.rb:30:in `instance_exec'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/initializable.rb:30:in `run'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/initializable.rb:54:in `each'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/initializable.rb:54:in `run_initializers'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/application.rb:96:in `initialize!'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:240:in `require'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:240:in `block in require'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:223:in `block in load_dependency'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:640:in `new_constants_in'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:223:in `load_dependency'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.2/lib/active_support/dependencies.rb:240:in `require'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/builder.rb:51:in `instance_eval'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/builder.rb:51:in `initialize'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/builder.rb:40:in `eval'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/builder.rb:40:in `parse_file'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/server.rb:200:in `app'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/commands/server.rb:46:in `app'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/server.rb:301:in `wrapped_app'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.5/lib/rack/server.rb:252:in `start'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/commands/server.rb:70:in `start'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/commands.rb:54:in `block in <top (required)>'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/commands.rb:49:in `tap'
2012-04-13T09:11:13+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.2/lib/rails/commands.rb:49:in `<top (required)>'
2012-04-13T09:11:13+00:00 app[web.1]:   from script/rails:6:in `require'
2012-04-13T09:11:13+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-04-13T09:11:14+00:00 heroku[web.1]: Process exited with status 1
2012-04-13T09:11:14+00:00 heroku[web.1]: State changed from starting to crashed
2012-04-13T09:11:17+00:00 heroku[router]: Error H10 (App crashed) -> GET gentle-lightning-5246.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:23:25.930

您需要在 config/application.rb 中添加 config.assets.initialize_on_precompile = false。它在 config/environments/production.rb 中不起作用

# java - 通过 SWT Browser / SWT BrowserFunction 从 GWT 应用程序调用 Java 方法

> ID：10138376
> 
> 赞同：0
> 
> 时间：2012-04-13T09:29:21.220
> 
> 标签：java, javascript, gwt, swt, rcp

在 RCP 应用程序中，我在 SWT 浏览器中显示基于 GWT 的 Web 应用程序。

我的目标是从 GWT 应用程序中调用 Java 方法。

据我了解，最简单的方法是使用 SWT BrowserFunction，它注入了一个 java 方法，我可以从 web 应用程序中调用该方法。

由于某种原因，我无法让它工作......

在 RCP 中，我定义了以下内容

```
public class GWTBrowserView extends ViewPart { 
    private GWTBrowser browser; 

    @Override 
    public void createPartControl(final Composite parent) { 
            this.browser = new GWTBrowser(parent, SWT.NONE); 
            this.browser.setUrl("url of gwt app"); 
            new BrowserFunction(this.browser, "onGWTEvent") { 

                    @Override 
                    public Object function(final Object[] arguments) { 
                            // Do something fancy
                            return super.function(arguments); 
                    } 
            }; 
    } 
```

在我的 GWT EntryPoint 作为 onModuleLoad 的一部分，我正在调用方法：

```
private native void fireRCPEvent(String rcpEventJSON) /*-{
try{
    onGWTEvent(rcpEventJSON);
} catch(e) {
    alert(e.message)
} 
```

任何想法如何通过 SWT 浏览器建立 GWT 和 RCP 之间的通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:37:55.380

您从 JSNI 调用错误的函数。它应该是：

```
private native void fireRCPEvent(String rcpEventJSON) /*-{
 try{
    $wnd.onGWTEvent(rcpEventJSON); //notice the usage of $wnd object
 } catch(e) {
    alert(e.message)
 }
}-*/ 
```

GWT 编译的 JS 代码通常运行在一些单独的上下文中（例如 iframe），所以`$wnd`当你需要调用外部函数时，你必须显式指定要从父窗口（对象）调用函数。

# jquery - 使用 jquery datepicker 验证日期范围

> ID：10138379
> 
> 赞同：0
> 
> 时间：2012-04-13T09:29:31.570
> 
> 标签：jquery, jquery-validate, jquery-ui-datepicker

我试图从我的 datepicker 中获取值到一个新脚本中，该脚本应该验证从 datepicker 中选择的第二个值不在第一个选择的 datepicker 之前。

但是，我的脚本不会执行。

这是我的看法：

```
 <div class="editor-field">
        @Html.TextBox("PlannedDate", Model.PlannedDate, new { @class = "date", @readonly = "readonly" })
        @Html.TextBox("CompletedDate", Model.CompletedDate, new { @class = "date", @readonly = "readonly" })
        @Html.ValidationMessageFor(model => model.CompanyName)
    </div>
 <input id="submitfloat" type="submit" value="Go" /> 
```

这是我的脚本

```
 <script>
  $(".date").datepicker();
  $('#submitfloat').submit(function() {
  var fromDate = $('#PlannedDate').val();
  var EndDate = $('#CompletedDate').val();
  if (Date.parse(fromDate) > Date.parse(EndDate)) {
    alert("Date error")
    }
    return false;

}); 
```

但是，当我开始调试 ut Firebug 时，我的行似乎`$('#submitfloat').submit(function() {`不会执行。

有谁知道我的问题是什么以及如何解决？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T19:38:35.443

好吧，我的第一个答案，希望对您有所帮助。

首先我的看法：

```
 <script src="Js/jquery.min.js" type="text/javascript"></script>
    <script src="Js/jquery.validate.min.js" type="text/javascript"></script>
    <script src="Js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>
    <link href="Css/start/jquery-ui-1.8.18.custom.css" rel="stylesheet" type="text/css" /> 
```

我将它用于日期选择器和验证

```
 <form id="custom" action="">
         <input type="text" id="fechaLlegada" name="fechaL" style="color: #4080BF; font: bold 12px verdana; padding: 0 2px 3px 2px;"/> 
         <input type="text" id="fechaSalida" name="fechaS" style="color: #4080BF; font: bold 12px verdana; padding: 0 2px 3px 2px;"/>
         <br />
         <input type="submit"/>
    </form> 
```

现在脚本

```
 <script type="text/javascript">
jQuery.validator.addMethod("isValid", function (value, element) {
    var startDate = $('#fechaLlegada').val();
    var finDate = $('#fechaSalida').val();
    return Date.parse(startDate) < Date.parse(finDate);
}, "* End date must be after start date");

$(function () {
    $('#fechaLlegada,#fechaSalida').datepicker()

    $('#custom').validate({
        rules: {
            'fechaL': { required: true, date: true },
            'fechaS': { required: true, date: true, isValid: true }
        }, messages: {
            'fechaL': { required: 'date required msj!',
                date: 'invalid date format msj'
            },
            'fechaS': { required: 'date required msj!',
                date: 'invalid date format msj',
                isValid: 'End date must be after start date'
            }
        }
    });

});
</script> 
```

我为日期验证添加了一个方法到 jquery validate 然后我将它用作验证脚本中的规则

```
this is working for me, i hope it helps someone 
```

# c# - 检索 XML WP7

> ID：10138384
> 
> 赞同：0
> 
> 时间：2012-04-13T09:29:51.647
> 
> 标签：c#, xml, windows-phone-7, tuples

我想知道为什么当我检索我的 XML 时我无法从中获取任何项目。

所以基本上我用手机连接到我的网络服务。

XML 返回目录信息和文件信息的 TUPLE。

```
<TupleOfArrayOfDirectoryInfoArrayOfFileInfoe_PmhuPqo xmlns="http://schemas.datacontract.org/2004/07/System"      xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
 <m_Item1 xmlns:a="http://schemas.datacontract.org/2004/07/System.IO">
<a:DirectoryInfo>
<OriginalPath xmlns="" xmlns:b="http://www.w3.org/2001/XMLSchema" i:type="b:string">AETN</OriginalPath>
<FullPath xmlns="" xmlns:b="http://www.w3.org/2001/XMLSchema"              i:type="b:string">C:\inetpub\wwwroot\Files\TEST1</FullPath>
 </a:DirectoryInfo>
 <a:DirectoryInfo>
<OriginalPath xmlns="" xmlns:b="http://www.w3.org/2001/XMLSchema" i:type="b:string">BT</OriginalPath>
<FullPath xmlns="" xmlns:b="http://www.w3.org/2001/XMLSchema"     i:type="b:string">C:\inetpub\wwwroot\Files\TEST2</FullPath>
</a:DirectoryInfo>
  <a:DirectoryInfo>
<OriginalPath xmlns="" xmlns:b="http://www.w3.org/2001/XMLSchema" i:type="b:string">Comixology</OriginalPath>
<FullPath xmlns="" xmlns:b="http://www.w3.org/2001/XMLSchema"   i:type="b:string">C:\inetpub\wwwroot\Files\TEST3</FullPath>
</a:DirectoryInfo> 
```

在我的 windows phone 7 应用程序代码中，我在从正确的 url 下载 xml 后使用了这段代码：

```
void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e) 
    { 
        if (e.Error == null) 
        { 
            XDocument xdoc = XDocument.Parse(e.Result, LoadOptions.None); 
            var folders = from query in xdoc.Descendants("DirectoryInfo") 
                          select new Folder 
                          { 
                              Name = (string)query.Element("OriginalPath"), 
                          }; 
            listBox2.ItemsSource = folders; 
        } 
    } 
```

我收到此错误：

```
'System.Collections.IEnumerable' does not contain a definition for 'System' and no extension method 'System' accepting a first argument of type 'System.Collections.IEnumerable' could be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:11:22.547

不知道错误，但是没有返回元素的问题是因为您在`DirectoryInfo`元素上应用了命名空间，因此您必须使用它进行搜索：

```
void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e) 
{ 
    if (e.Error == null) 
    { 
        XDocument xdoc = XDocument.Parse(e.Result, LoadOptions.None);

        XNamespace aNamespace = XNamespace.Get("http://schemas.datacontract.org/2004/07/System.IO");

        var folders = from query in xdoc.Descendants(aNamespace.GetName("DirectoryInfo")) 
                      select new Folder 
                      { 
                          Name = (string)query.Element("OriginalPath"), 
                      }; 
        listBox2.ItemsSource = folders; 
    } 
} 
```

# mysql - MYSQL 从两个表中选择

> ID：10138386
> 
> 赞同：0
> 
> 时间：2012-04-13T09:30:03.067
> 
> 标签：mysql, select

我正在为我的数据库使用mysql，我很好，简单的查询没问题，但现在我必须从两个表中选择，我不知道我该怎么做。

我有两张桌子，一张有供应商，一张有文章。

这是我的粗略架构：

```
supplierdb 
sid,searchname,name,adress 

articlesdb 
aid,quantities,description,price,->sid<- 
```

我的问题是：如何在文章选择查询中选择 sid 的搜索名称而不进行两个单独的查询？

我希望查询返回：

```
aid,description,price,searchname(from supplierdb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:34:06.157

尝试加入

```
SELECT aid,description,price,searchname
FROM supplierdb s
INNER JOIN articledb a ON a.sid = s.sid 
```

# php - 将 href 值加一（Javascript）

> ID：10138387
> 
> 赞同：0
> 
> 时间：2012-04-13T09:30:03.643
> 
> 标签：php, javascript, jquery, html, css

我有一个有序列表

```
<li id="prev">
    <a href="#fragment-1>Next</a>
</li> 
```

我想将`href`值增加到

```
<a href="#fragment-1">...
<a href="#fragment-2">...
<a href="#fragment-3">...
<a href="#fragment-4">... 
```

单击下一个时，它应该从 4 停止并返回到 1 allso 是否可以使用 javascript

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:33:55.153

先给你的链接`id`，使它更容易选择。

然后，

```
document.getElementById('the_id_here').addEventListener('click', function(e) {
    var n = e.target.href.split('-')[1] * 1 + 1;
    if (n > 4)
        n = 1;
    e.target.href = e.target.href.split('-')[0] + '-' + n;
}, false); 
```

示例：http: [//jsbin.com/ajegaf/4#fragment-1](http://jsbin.com/ajegaf/4#fragment-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:16:46.373

使用隐藏字段来保存值，并使用 onclick 函数来增加它并提交表单。请参阅：[如何通过激活按钮来增加数字，以便每次增加按钮时都能够访问功能？](https://stackoverflow.com/questions/10127399/how-can-i-increase-a-number-by-activating-a-button-to-be-able-to-access-a-functi/10127674#10127674)

```
 <?

 if(!isset($_GET['count'])) {
  $count = 0;
  } else {
  $count = $_GET['count'];
  }

  ?>

   <script type='text/javascript'>
   function submitForm(x) {
     if(x == 'prev') {
     document.getElementById('count').value--;
     } else {
     document.getElementById('count').value++;
     }

     document.forms["form"].submit();
   }
   </script>

   <form action='hidfield.php' method='get' name='form'>
   <input type='hidden' name='count' id='count' value='<?php echo $count; ?>'>
   </form>

   <input type='submit' name='prev' value='prev' onclick="submitForm('prev')">
   <input type='submit' name='next' value='next' onclick="submitForm('next')"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:40:48.617

不完全是您想要的，但应该足够接近以将您瞄准正确的方向，请查看[http://jsfiddle.net/pj28v/](http://jsfiddle.net/pj28v/)

```
<ul id="list"></ul>
<a href="#" id="next">Next</a>​

$(function() {

    var $list = $('#list'),
        count = 4,
        i = 0,
        cur = 0;

    for (; i < count; i++) {
        $list.append('<li><a href="#fragment' + i + '">frag' + i + '</a></li>');
    }

    $('a', $list).eq(0).css('color','red');

    $('#next').click(function(ev) {
        ev.preventDefault();
        cur++;
        if (cur >= count) cur = 0;
        $('a', $list).css('color','blue').eq(cur).css('color','red');
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:41:46.097

一个jQuery解决方案：

```
$(document).ready(function(){

    $('#prev a').click(function(){

        var href = $(this).attr('href');
        var num = parseInt(href.substr(href.indexOf('-') + 1));

        if(num == 4)
        {
            num = 1;
        }
        else
        {
            num++;
        }

        $(this).attr('href', '#fragment-' + num)
    });

});​ 
```

[http://jsfiddle.net/UYDdB/](http://jsfiddle.net/UYDdB/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T09:53:53.250

一种类似于 Delan 的解决方案，但使用 jQuery 并且不使用测试。[http://jsfiddle.net/GZ26j/](http://jsfiddle.net/GZ26j/)

```
$('#next').on('click', function(e) {
    e.preventDefault();
    href = $(this).attr('href');
    var n = href.split('-')[1] * 1 + 1;
    n = n%5;
    e.target.href = href.split('-')[0] + '-' + n;
});​ 
```

**编辑：** 此解决方案使计数器从 0 而不是 1 开始

# c# - 数据库的位置？

> ID：10138388
> 
> 赞同：1
> 
> 时间：2012-04-13T09:30:05.323
> 
> 标签：c#, sql-server-2008, linq-to-sql

对于我当前的项目，我想在另一台计算机上测试应用程序并将我的数据库放在服务器上。

在其他项目中，我查看`connectionstring`了数据库的位置，但这次它没有告诉我它的位置。

```
 <add name="Backend.Properties.Settings.autobusConnectionString"
        connectionString="Data Source=.;Initial Catalog=autobus;Integrated Security=True"
        providerName="System.Data.SqlClient" /> 
```

我使用 LINQ-TO-SQL 创建了我的数据库`SQL Server 2008 R2`并使用`Linq-To-SQL Classes`.

所以我的问题是，它在我的计算机上的什么位置，我将如何更改数据库的位置？谢谢你的帮助，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:32:20.567

`Data Source=.`是服务器名称。`.`是本地主机。更改为`Data Source=YourServer`或`Data Source=YourServer\YourInstance`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T09:31:34.993

数据源设置为“.”，这是 localhost 的简写。（即您的计算机）。

服务器名称可能与您的计算机主机名相同。

# ruby-on-rails - RSpec - 如何在模块中测试模块

> ID：10138390
> 
> 赞同：0
> 
> 时间：2012-04-13T09:30:29.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, module, rspec, rspec2

我将模块嵌套在一个模块中

像这样的东西：

```
module Utilities
  extend ActiveSupport::Concern

  module InstanceMethods
    def fix_text(str, params = {})
      str = Iconv.conv('UTF8', 'LATIN1', str)
      str.gsub!(/\\u([0-9a-z]{4})/) { |s| [$1.to_i(16)].pack("U") }
      str.force_encoding("UTF-8")
      str = strip_html(str) unless params[:no_strip_html]
      MojiBake::Mapper.new.recover str
    end

    def strip_html(str)
      Hpricot(str, :xhtml => true).to_plain_text
    end
  end
end 
```

我没有在互联网信息上找到如何在模块中测试模块。

请为此规范编写一些伪代码（描述和模块块的顺序，如何测试模块是否扩展了其他模块等）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:24:52.887

例子：

```
require 'spec_helper'

class Foo
  include Utilities
end

describe Utilities do
  it 'should pass' do
    foo = Foo.new
    foo.strip_text(arg).should == expected
  end
end 
```

你需要改变`arg`和`expected`变量

# xml - Shell 脚本，解析 XML 片段

> ID：10138403
> 
> 赞同：0
> 
> 时间：2012-04-13T09:31:03.277
> 
> 标签：xml, linux, bash, sh

在 shell 脚本（Linux、bash、#!/bin/sh）中，我有一个包含 XML 数据的变量，如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<interface>
    <objects retrieved="0" total="0"/>
</interface> 
```

获取此数据时已经完成了一些错误处理，因此请关注实际问题。问题是：读取“对象”元素的属性数据（名为“检索”）的简单/有效方式。它可以是 0 或 1。（仅此而已）。我想我有两个选择：正则表达式和使用一些外部程序进行 XML 解析。但是我应该选择哪一个？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:39:41.173

您可以使用`xmlstarlet`获取属性：

```
$ xmlstarlet sel -t -m //objects -v @retrieved input.xml
0 
```

或者

```
$ xmlstarlet sel -t -m //objects/@retrieved -v . input.xml 
```

* * *

```
-m or --match <xpath>     - match XPATH expression
-v or --value-of <xpath>  - print value of XPATH expression 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:42:29.803

两者都是不错的选择，如果您想严格选择脚本应该独立于外部程序，我认为使用正则表达式更好。使用正则表达式可以使程序运行比使用外部程序更快。

但是使用正则表达式并不总是一个可行的选择，尤其是当您的时间较少并且您正在制作的正则表达式很复杂时。外部程序是唯一的选择。如果您打算将此脚本移至另一台计算机，则此外部程序可能会导致依赖性或开销。

我会建议正则表达式。这些可能会对您有所帮助。看一看。

[如何使用 shellscript 解析 XML？](https://stackoverflow.com/questions/4680143/how-to-parse-xml-using-shellscript)

*   这真的很有帮助

这在内容上有一些想法。

[http://silveiraneto.net/2010/05/13/substitution-on-a-xml-file-shell-script-snippet/](http://silveiraneto.net/2010/05/13/substitution-on-a-xml-file-shell-script-snippet/)

# oracle - 为范围内的每个日期选择时间最小值并在 oracle 中获取平均值

> ID：10138405
> 
> 赞同：-1
> 
> 时间：2012-04-13T09:31:09.163
> 
> 标签：oracle, time, average

我在 oracle user_transn(userid, resourceid, transid, act_timestamp) 中有一个表，其值如下

```
 (21, 14, 123321, 28-NOV-11 13:30:21)
    (21, 14, 123321, 28-NOV-11 14:29:28)
    (21, 14, 123321, 29-NOV-11 18:44:22)
    (21, 14, 123321, 30-NOV-11 11:30:55)
    (21, 14, 123321, 30-NOV-11 16:56:11)
    (21, 14, 123321, 30-NOV-11 19:32:31)
    (21, 14, 123321, 31-NOV-11 09:22:51)
    (21, 14, 123321, 31-NOV-11 12:22:49)
    (21, 14, 123321, 31-NOV-11 13:11:17)
    (21, 14, 123321, 31-NOV-11 16:41:21) 
```

查询应采用每个不同日期的 act_timestamp 字段的最短时间，并计算给定日期范围内的平均最短时间（在本例中为 11 月 28 日至 31 日）

所以上面的结果应该是：13:30:21 + 11:30:55 + 9:22:51 /3 = 11:27:42 作为平均最短时间

同样对于最大时间。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:47:02.107

选择`min_timestamp`，计算时间部分的平均值，然后添加当前日期以转换回日期：

```
SELECT
  TO_CHAR(TRUNC(SYSDATE) + AVG(min_timestamp - TRUNC(min_timestamp)), 'HH24:MI:SS')
FROM
(
  SELECT MIN(act_timestamp) AS min_timestamp
  FROM user_transn
  GROUP BY TRUNC(act_timestamp)
) 
```

# ios - 如何消除 performTaskWithPathArgumentsTimeout 的 1 秒延迟

> ID：10138407
> 
> 赞同：2
> 
> 时间：2012-04-13T09:31:12.990
> 
> 标签：ios, instruments, ui-automation, ios-ui-automation

我在我的 ios ui 脚本中使用 performTaskWithPathArgumentsTimeout，在执行命令之前似乎引入了隐藏的 1 秒延迟。

```
var target = UIATarget.localTarget();
var host = target.host();

var start = new Date().getTime();
var result = host.performTaskWithPathArgumentsTimeout("/bin/echo", ["Hello World"], 5);
var total = new Date().getTime() - start;

UIALogger.logDebug("duration: " + total); 
```

输出：持续时间：1001

所有命令都一样。从命令行启动时立即生效，但通过 performTask 启动时会有 1 秒的延迟。

关于如何减少这种延迟的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:36:32.077

此延迟与 UI 自动化在内部启动命令的方式有关。从头到尾，我们无能为力。

也就是说，如果您有很多命令要按顺序执行，您可以将它们全部放在一个 shell 脚本中并像这样执行它：

```
host.performTaskWithPathArgumentsTimeout("/bin/bash", ["some_shell_script.sh"], 5); 
```

这将在 bash 中运行给定的 shell 脚本文件，您只需支付 1 秒的进程启动罚金一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T01:05:28.350

[Instruments-without-delay](https://github.com/facebook/instruments-without-delay)项目巧妙地解决了这个问题，该项目更改 Instruments 以消除 UIAHost.performTaskWithPathArgumentsTimeout 中的 1 秒延迟

# objective-c - 重新加载视图控制器后自动旋转不起作用

> ID：10138412
> 
> 赞同：0
> 
> 时间：2012-04-13T09:31:19.450
> 
> 标签：objective-c, ios, uiviewcontroller, reload, autorotate

我正在尝试制作一个 iPhone 应用程序，但我发现重新加载视图控制器后自动旋转不起作用的一些问题。
这是加载应用程序以进行首次运行的代码：

```
//AppDelegate.m:<br />
-(BOOL) application:(UIApplication *)application 
        didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    iPhoneScanViewController = [[iPhoneScan alloc] init];
    iPhoneScanViewController.ENAD = self;
    [window addSubview:iPhoneScanViewController.view];
    [self.window makeKeyAndVisible];
    [[UIApplication sharedApplication] setStatusBarHidden:YES];
} 
```

视图控制器加载，自动旋转正在工作。
然后有时我需要重新加载视图控制器，这就是我使用的：

```
-(void) resetIphoneScan {
    if (iPhoneScanViewController) {
        [iPhoneScanViewController release];
    }
    iPhoneScanViewController = [[iPhoneScan alloc] init];
    iPhoneScanViewController.ENAD = self;

    for (UIView *view in [window subviews])
    {
        [view removeFromSuperview];
    }

    [window addSubview:iPhoneScanViewController.view];
    [self.window makeKeyAndVisible];
} 
```

在我重新加载/resetIphoneScan 后，自动旋转将不起作用。我已经在这个问题上花了几天时间，但我还没有找到解决方案。我真的很感激任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:34:16.397

我建议不要重新加载整个根 VC，而是拥有可以根据需要重置的单独数据类 - 毕竟，VC 真的是用来显示所有内容的。

# visual-studio - Visual Studio 2008 中的智能感知菜单崩溃

> ID：10138417
> 
> 赞同：0
> 
> 时间：2012-04-13T09:31:28.867
> 
> 标签：visual-studio, visual-studio-2008

我正在使用 vs2008 并开发一个 windows 应用程序。突然，智能感知菜单没有提示我在设计页面上设计的控件。我只是重建，即使它不工作也重新启动。在同一个项目中发现其他形式工作正常。我对设计器文件做错了什么吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:17:20.367

[http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=26662](http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=26662)

# c++ - 错误 C2614：“ChildClass”：非法成员初始化：“var1”不是基类或成员

> ID：10138424
> 
> 赞同：15
> 
> 时间：2012-04-13T09:31:44.423
> 
> 标签：c++, inheritance, parent-child

我在 C++ 中收到以下错误：

> 错误 C2614：“ChildClass”：非法成员初始化：“var1”不是基类或成员

```
Class Base 
{
    protected:
    int var1;
public:
    Base()
    {
        var1=0;
    }
}

class Child : public Base
{
    int chld;
    public: 
    Child() : var1(0)
    {
        chld=1;
    }
} 
```

我觉得我所做的是按照 OO 协议。这`var1`是 Base 类的数据成员，以 protected 作为访问说明符。所以它可以被继承，它会在孩子身上变成私有的。

*不明白为什么我会收到错误消息？*

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-13T09:34:15.483

由于错误消息为您提供的确切原因，它不起作用：您只能将初始值设定项列表与直接成员或基类一起使用。

在您的情况下，您甚至不需要初始化`var1`，因为`Base::Base()`将由`Child`的构造函数调用，该构造函数将设置`var1`为`0`.

如果你想要一个不同的值，你必须重载`Base`构造函数并显式调用它：

```
class Base 
{
protected:
     int var1;
public:
     Base() : var1(0)
     {
     }
     Base(int x) : var1(x)
     {
     }
};

class Child:public Base
{
    int chld;
public: 
    Child(): Base(42) , chld(1)
    {
    }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T09:34:46.613

您不能初始化基类的成员，只能初始化当前类的成员。在基类中使用参数化构造函数。

```
Class Base 
{
  protected:
     int var1;
     Base( int var ) : var1(var)
     {}
  public:
     Base()
     {
        var1=0;
     }
};

class Child:public Base
{
      int chld;
   public: 
      Child():Base(0)
      {
         chld=1;
      }
}; 
```

# image - 使用 OpenCV 的感兴趣区域

> ID：10138428
> 
> 赞同：2
> 
> 时间：2012-04-13T09:32:15.653
> 
> 标签：image, image-processing, opencv, face-recognition, opencvdotnet

参考下图，有人可以指导我如何提取所有灯泡（b1、b2、b3、b4、b5）并将它们放在单独的图像中（b1.jpg、b2.jpg、b3.jpg、b4。 jpg，b5.jpg）。

![在此处输入图像描述](../Images/9849887a7fc65071345b7a9c01870100.png)

我可以使用模板，但问题是灯泡的大小和形状各不相同，正如您所看到的那样。（但灯泡的整体外观仍然相同）。

有什么建议如何使用openCV做到这一点？

谢谢并恭祝安康，

赫什舍姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:26:32.917

*   好吧，如果您使用模板，为什么不使用不同的模板？保留一堆模板，将它们与图像匹配。哪个给你最好的匹配就是你的候选人。
*   如果我正确理解了问题，第二种方法是使用 SURF 功能。SURF 对于倾斜、透视、旋转变化非常强大，因此它肯定会帮助您找出灯泡。
*   [这](http://achuwilson.wordpress.com/2011/08/05/object-detection-using-surf-in-opencv-part-1/)是一个使用 SURF 炫耀的链接。简单而优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:32:21.107

如果背景总是像您的示例中那样纯白色，您可以进行简单的基于阈值的分割并按大小过滤结果区域以消除黑色伪影。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:57:23.730

对于 Georg +1，在这种情况下，非常简单的过滤器对您来说应该足够了。

如果您的数据比您显示的更复杂，为了获得更高的准确性，您可能会考虑您肯定会为每个灯泡获得的信息。

我会说一个轮廓和一个黄色的底部。

使用这两个信息，我会考虑区分所有铬元素，并开始在其上方搜索灯泡。区域增长可能是一个正确的解决方案，但时间很长。

# android-layout - 更改应仅反映在平板设备中

> ID：10138436
> 
> 赞同：0
> 
> 时间：2012-04-13T09:32:30.993
> 
> 标签：android-layout, css, tablet, media-queries, android

我已将正文背景颜色（例如：蓝色）应用于我的页面。但是当我在平板电脑上打开这个页面时，移动设备的颜色应该变成橙色。当我调整我的电脑浏览器窗口的大小时，颜色不会改变。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:06:59.420

您可以通过更改 CSS 标签来更改宽度；但这会在所有设备上发生变化。

```
@media only screen and (max-device-width: 1440px) { 
```

要确定它是平板电脑还是用户具体使用的设备，您可以使用 Javascript 来确定设备。然后相应地加载 CSS。

你可以看这里的代码；[链接]http://davidwalsh.name/detect-ipad[/链接]

问题是那里有成千上万的设备。因此，您必须检查每个设备。

```
// For use within normal web clients 
var isiPad = navigator.userAgent.match(/iPad/i) != null;

// For use within iPad developer UIWebView
// Thanks to Andrew Hedges!
var ua = navigator.userAgent;
var isiPad = /iPad/i.test(ua) || /iPhone OS 3_1_2/i.test(ua) || /iPhone OS 3_2_2/i.test(ua); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:36:00.370

您是否尝试过 CSS3 媒体查询？如下所示？

```
/*Common Tablet Width*/
@media only screen and (max-device-width: 1024px) {
    body{
       background-color:blue;
    }
} 
```

# c# - 如何绑定到 DataGrid RowDetailsTemplate 中的“主”行

> ID：10138443
> 
> 赞同：0
> 
> 时间：2012-04-13T09:33:19.840
> 
> 标签：c#, wpf, xaml, data-binding

我有这段 XAML

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525"
    x:Name="Window"
    >
    <Grid DataContext="{Binding ElementName=Window}">
    <DataGrid ItemsSource="{Binding Collection}" AutoGenerateColumns="True" CanUserAddRows="False" IsReadOnly="True">
        <DataGrid.RowDetailsTemplate>
            <DataTemplate DataType="{x:Type local:Master}">
                <ListView ItemsSource="{Binding Details}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="MasterField1"  DisplayMemberBinding="{Binding RelativeSource={????}, Path=MasterField1}" />
                            <GridViewColumn Header="DetailsField1" DisplayMemberBinding="{Binding Field1}"/>
                            <GridViewColumn Header="DetailsField2" DisplayMemberBinding="{Binding Field2}"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </DataTemplate>
        </DataGrid.RowDetailsTemplate>
    </DataGrid>
</Grid> 
```

有了这两个类：

```
public class Master
{
    public string ID { get; set; }
    public string MasterField1 { get; set; }
    public ObservableCollection<Detail> Details { get; set; }
}

public class Detail
{
    public string MasterID { get; set; }
    public string Field1 { get; set; }
    public string Field2 { get; set; }
} 
```

现在我想要完成的是在 RowDetailsTemplate 中我想显示当前的 MasterField1，但是我应该如何进行绑定才能使其工作？那么我应该怎么做：

```
<GridViewColumn Header="MasterField1"  DisplayMemberBinding="{Binding RelativeSource={????}, Path=MasterField1}" /> 
```

为了显示MasterField1？

谢谢

* * *

# 找到了解决方案

我可以这样做：

```
<GridViewColumn Header="MasterField1"  DisplayMemberBinding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGridRow}}, Path=DataContext.MasterField1}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:38:47.187

为什么不在 Detail 类上创建 Master 属性？设置Id时也可以设置：

```
public class Detail
{
    private string _masterID;
    public string MasterID { 
        get {
            return _masterI;
        }
        set {
            _masterID = value;
            Master = FindMasterById(value);
        }
    }
    public Master Master { get ; set ; }
    public string Field1 { get; set; }
    public string Field2 { get; set; }
} 
```

然后只需进行绑定：

```
<GridViewColumn Header="MasterField1"  DisplayMemberBinding="{Binding Path=Master.MasterField1}" /> 
```

# javascript - 如何使用rails在javascript或jquery中获取文件大小

> ID：10138444
> 
> 赞同：0
> 
> 时间：2012-04-13T09:33:22.143
> 
> 标签：javascript, ruby, ruby-on-rails-3, jquery

如何在 javascript 或 jquery 中使用 rails 获取文件大小，这里按字大小表示文件的内容大小，如 100kb。

在这里我有一些方法，如大小或文件大小，但它不适合我

我的红宝石代码是

```
<%= upload_form.file_field  :upload_file_name1,:onchange =>"return         validateFileExtension(this)"%>

 function validateFileExtension(fld) {
alert(fld.value.fileSize);
  if(!/(\.jpg|\.gif|\.png)$/i.test(fld.value)) {
    alert("Invalid file type! Kindly upload in a JPG, GIF or PNG format!");
    fld.parentNode.innerHTML = fld.parentNode.innerHTML;
    fld.focus();
    return false;
  }
  return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:54:11.507

```
<html>
<head>
<script language="JavaScript">
function A()
{
var oas = new ActiveXObject("Scripting.FileSystemObject");
var d = document.a.b.value;
var e = oas.getFile(d);
var f = e.size;
alert(f + " bytes");
}
</script>
</head>
<body>
<form name="a">
<input type="file" name="b">
<input type="button" name="c" value="SIZE" onClick="A();">
</form>
</body>
</html> 
```

# gerrit - 错误：远程gerrit已经存在

> ID：10138445
> 
> 赞同：3
> 
> 时间：2012-04-13T09:33:31.973
> 
> 标签：gerrit

我正在尝试添加远程 gerrit，但出现以下错误：

```
fatal: remote gerrit already exists. 
```

如何删除现有的gerrit？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:59:03.937

您没有列出导致此错误输出的命令，但我认为它类似于：

```
git remote add gerrit <url> 
```

如果您已经有一个名为 gerrit 的遥控器，您将收到此错误。您可以使用以下命令查看存储库中的遥控器

```
git remote -v 
```

要删除遥控器，请使用

```
git remote rm <name> 
```

在您的情况下，名称是“gerrit”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-07T12:23:00.720

一个名为“gerrit”的遥控器已经存在。您可以通过以下方式找到它：

`git remote -v`

所以，删除这个旧遥控器：

`git remote rm gerrit`

然后再次添加：

`git remote add gerrit <url>`

# php - 在 PHP 中跟踪下载进度

> ID：10138447
> 
> 赞同：1
> 
> 时间：2012-04-13T09:33:33.697
> 
> 标签：php, iis, download, progress

全部，

我已经建立了一个表格，如果用户填写表格，我的代码可以确定该用户需要下载哪些（大）文件。我用下载按钮显示每个文件，我想在按钮旁边显示该文件的下载状态（下载正在进行、取消/中止或完成）。因为文件很大（200 MB+），所以我使用一个众所周知的函数来读取要以块下载的文件。我的想法是记录数据库中每个（100 KB）块的读取，这样我就可以跟踪下载进度。我的代码如下：

```
 function readfile_chunked($filename, $retbytes = TRUE) 
    {
          // Read the personID from the cookie 
          $PersonID=$_COOKIE['PERSONID'];
          // Setup connection to database for logging download progress per file
          include "config.php";
          $SqlConnectionInfo= array    ( "UID"=>$SqlServerUser,"PWD"=>$SqlServerPass,"Database"=>$SqlServerDatabase);
          $SqlConnection= sqlsrv_connect($SqlServer,$SqlConnectionInfo);
          ChunckSize=100*1024; // 100 kbyte buffer
          $buffer = '';
          $cnt =0;
          $handle = fopen($filename, 'rb');
          if ($handle === false) 
          {
                return false;
          }
          $BytesProcessed=0;
          while (!feof($handle)) 
          {
                 $buffer = fread($handle, $ChunckSize);
                 $BytesSent = $BytesSent + $ChunckSize;
                 // update database
                 $Query= "UPDATE [SoftwareDownload].[dbo].[DownloadProgress] SET     LastTimeStamp = '" . time() . "' WHERE PersonID='$PersonID' AND FileName='$filename'";
                 $QueryResult = sqlsrv_query($SqlConnection, $Query);
                 echo $buffer;
                 ob_flush();
                 flush();
                 if ($retbytes) 
                 {
                        $cnt += strlen($buffer);
                 }
          }
          $status = fclose($handle);
          if ($retbytes && $status) 
          {
                 return $cnt; // return num. bytes delivered like readfile() does.
          }
          return $status;
    } 
```

奇怪的是，我的下载以恒定的速度平稳运行，但我的数据库会以峰值更新：有时我会在一秒钟内看到几十个数据库更新（所以是几十个 100 KB 块），下一刻我看到没有数据库更新（因此 PHP 没有提供 100 k 块）长达一分钟（此超时取决于可用于下载的带宽）。一分钟内没有写入任何进度的事实使我的代码认为下载已中止。与此同时，我看到 IIS 的内存使用量在增加，因此我认为 IIS 会缓冲 PHP 提供的数据块。我的网络服务器在 FastCGI 模式下运行 Windows 2008 R2 数据中心（64 位）、IIS 7.5 和 PHP 5.3.8。有什么我可以做的（在我的代码中，在我的 PHP 配置或 IIS 配置中）以防止 IIS 缓存 PHP 传递的数据，或者如果生成的数据实际传递到下载客户端，是否有任何方法可以在 PHP 中查看？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:16:42.783

由于没有找到有用的答案，我通过严格使用 Apache 来下载文件创建了一个真正狡猾的解决方法。整个表单、CSS 等仍然通过 IIS 传递，只是下载链接是由 Apache 提供的服务器（反向代理服务器位于中间，所以用户不必摆弄端口号，代理会处理这个）。Apache 不缓存 PHP 输出，因此我在数据库中获得的时间戳是可靠的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:44:24.160

我曾经问过一个**[类似的问题](https://stackoverflow.com/questions/7049303/show-progress-for-php-long-script)**，并在那里得到了很好的答案。

基本上，您使用 APC 缓存来缓存变量，然后使用来自客户端的 Ajax 调用在不同的页面中检索它。

另一种可能性是对数据库做同样的事情。将进度写入数据库并让客户端使用 Ajax 调用对其进行测试（假设每秒）。

# ffmpeg - 使用 Jave 将 wmv 文件转码为 mp4

> ID：10138448
> 
> 赞同：0
> 
> 时间：2012-04-13T09:33:35.280
> 
> 标签：ffmpeg, mp4, transcoding

我正在尝试使用 Jave 将 wmv 文件转换为 h264(mp4)。Jave 创建的最终版本可以在 VLC 播放器中正常播放，但是当我尝试在 HTML5 视频标签中使用它时，它无法播放该文件。

我猜问题出在我为视频属性设置的属性上。

Java 代码：

```
 videoAttributes.setCodec("mpeg4");
    videoAttributes.setTag("mpeg4");
    videoAttributes.setBitRate(new Integer(5000));
    videoAttributes.setFrameRate(new Integer(30));
    videoAttributes.setSize(new VideoSize(512, 384));
    encodingAttributes.setVideoAttributes(videoAttributes);
    encodingAttributes.setFormat("mp4"); 
```

HTML 代码：

```
 <video controls="true" width=400 height=200>
        <source src="path_to_converted_mp4_file" type="video/mp4" />
        Not Supported
    </video> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:53:52.620

不知道 Jave 如何识别编解码器，但如果它使用与 FFmpeg 相同的命名，那么 HTML5 的编解码器应该是`libx264`. 编解码器是“MPEG-4第`mpeg4`2 部分”，根据`ffmpeg -codecs`.

```
 ./ffmpeg -codecs | grep -e mpeg4 -e 264
     D V D  h264            H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10
     EV    libx264         libx264 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10
     EV    libx264rgb      libx264 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 RGB
     DEVSDT mpeg4           MPEG-4 part 2
     DEVSD  msmpeg4         MPEG-4 part 2 Microsoft variant version 3
     D VSD  msmpeg4v1       MPEG-4 part 2 Microsoft variant version 1
     DEVSD  msmpeg4v2       MPEG-4 part 2 Microsoft variant version 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T05:51:10.597

根据 JAVE 文档，格式的名称是“mp4”而不是“mpeg4”

# java - Java：使用 URL 对象作为文件对象

> ID：10138451
> 
> 赞同：0
> 
> 时间：2012-04-13T09:33:40.940
> 
> 标签：java, file, url

我想为我的应用读取一些数据。这是我的代码：

```
 URL url = Myclass.class.getResource("/data/file.txt"); //Myclass is my class name
    File file = new File(url.toString());  //maybe I met error here. 
//File Constructor just receive String object, I don't know how to convert
    FileInputStream reader = new FileIputStream(file); 
```

我不知道如何将 url 更改为 File 来阅读它。请告诉我如何解决。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:37:06.550

您不能像读取文件一样读取资源。以下语法应该有效：

```
InputStream resource = MyClass.class.getResourceAsStream("/data/file.txt"); 
```

为避免相对/绝对路径问题，您还可以使用：

```
InputStream resource = MyClass.class.getClassLoader().getResourceAsStream("/data/file.txt"); 
```

# facebook - 在浏览器中禁用第三方 Cookie 时 Facebook 应用程序无法运行

> ID：10138458
> 
> 赞同：2
> 
> 时间：2012-04-13T09:34:06.810
> 
> 标签：facebook, session-cookies

我开发了一个 facebook 应用程序（iframe）。它工作正常。但是当用户在浏览器中禁用第三方 Cookie 时，应用程序会进入无限重定向循环。

如果您需要更多信息来帮助我，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:31:01.467

你确定你真的需要饼干吗？如果是这样，不幸的是，您对此无能为力。如果您的应用程序需要 cookie 才能工作，您将需要用户支持第三方 cookie。不过，请检查以确保您发送的是 P3P 标头。某些浏览器需要[有效的 P3P 标头](https://stackoverflow.com/a/389458/1144454)才能完全允许第三方 iframe cookie *，*即使启用了第三方 cookie。

例外：

*   如果你只需要一个请求，你可以只依赖signed_request。
*   您可以尝试使用基于 URL 的会话而不是基于 cookie 的会话。PHP 对此有一些[内置支持](http://php.net/manual/en/session.idpassing.php)，但对于其他语言/框架，您可能需要投入更多的工作。

我猜您正在尝试将用户重定向到 OAuth 对话框，然后该对话框将用户发送回您的页面，对吗？对于 OAuth 对话后的第一个请求，您应该尝试从 signed_request 中获取身份验证信息。然后，您可能希望将其存储在服务器端会话中，并在 cookie 或查询参数中传递它的 ID。我相信 PHP 和 Python SDK 都会做这样的事情。正如我上面所说，如果 cookie 不起作用，您将需要找出另一种方法来在用户在您的应用程序中移动时保持状态。

我诚实的建议？尝试检测用户的浏览器是否不允许设置第三方 cookie，如果不允许，则只需抛出一个错误页面，说明他们的安全设置不允许他们使用像您这样的酷应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:17:05.707

如果第三方 cookie 被禁用，会话将无法正常工作，并且 session_id 也被存储为 cookie。

# c# - 在 Linq2SQL 中更新实体的最佳实践是什么？

> ID：10138462
> 
> 赞同：0
> 
> 时间：2012-04-13T09:34:19.133
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, linq-to-sql

只是想了解使用 linq2sql 更新实体的最佳做法是什么？

更多细节可以更好地理解这个问题。

正如我从文章中了解到的那样，我可以有两种情况：实体附加到上下文和从头开始（或从现有实体）构造的实体。我只想有一种方法来更新实体，目前以以下方式实现：

```
 public virtual void Save<T>(T value) where T : class
 {
      Context.GetTable<T>().Attach(value);
      Context.Refresh(RefreshMode.KeepCurrentValues, value);
      Context.SubmitChanges();
 } 
```

当然，当我执行代码时：

```
var orders = GenericRepository.Instance.Find<BuyerOrder>(b => b.ID == 2).FirstOrDefault();
orders.Price = 397809;
GenericRepository.Instance.Save(orders); 
```

该对象已附加到上下文中，但出现异常：

```
Cannot attach an entity that already exists. 
```

我应该在保存之前总是分离对象吗？有没有其他方法可以克服这个问题？

抱歉，如果问题很愚蠢-这是我对 linq2sql 的第一次体验

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:08:08.447

您可以像这样检查实体是否附加：

```
if (!Context.GetTable<T>().IsAttached(value))
{
    Context.GetTable<T>().Attach(value);
}
Context.Refresh(RefreshMode.KeepCurrentValues, value);
Context.SubmitChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:00:50.383

在您的`Save`方法中，不要附加表格。它也不需要采用类型，您只需`Context.SubmitChanges`在 Save 方法中调用即可。就像是：

```
public void Save()
{
    Context.SubmitChanges();
} 
```

然后做：

```
var orders = GenericRepository.Instance.Find<BuyerOrder>(b => b.ID == 2).FirstOrDefault();
orders.Price = 397809;
GenericRepository.Instance.Save(); 
```

有关更多示例，请参见 MSDN：http: [//msdn.microsoft.com/en-us/library/bb386931.aspx](http://msdn.microsoft.com/en-us/library/bb386931.aspx)

# opengl - 如何在 C 中使用 GLX_EXT_texture_from_pixmap 将 X11 Pixmap 用作 OpenGL 纹理？

> ID：10138466
> 
> 赞同：3
> 
> 时间：2012-04-13T09:34:50.130
> 
> 标签：opengl, x11

我对 GLX_EXT_texture_from_pixmap 有疑问。根据[EXT_texture_from_pixmap 规范](http://www.opengl.org/registry/specs/EXT/texture_from_pixmap.txt)和那里提供的示例，我可以使用 GLXPixmap 作为 OpenGL 纹理。但是在链接阶段我得到：

```
$ gcc -Wall -o uwm main.c -lX11 -lXext -lXcomposite -lXfixes -lGL -lGLU
...
main.c:98:2: warning: implicit declaration of function 'glXBindTexImageEXT' [-Wimplicit-function-declaration]
main.c:(.text+0x651): undefined reference to `glXBindTexImageEXT' 
```

我检查过的内容：

*   GL/glx.h 定义 glXBindTexImageEXT...：

    ```
    $ grep -l glXBindTexImageEXT /usr/include/GL/*
    /usr/include/GL/glxext.h
    /usr/include/GL/glx.h 
    ```

*   ...这是`mesa-libGL-devel`Fedora 16 软件包的一部分：

    ```
    $ rpm -qf /usr/include/GL/glx.h
    mesa-libGL-devel-7.11.2-3.fc16.x86_64 
    ```

*   ...还包含 libGL.so （我假设）应该包含 glXBindTexImageEXT 符号：

    ```
    $ rpm -ql mesa-libGL-devel-7.11.2-3.fc16.x86_64 | grep '.so$'
    /usr/lib64/libGL.so 
    ```

*   ...但它不是：

    ```
    $ objdump -T /usr/lib64/libGL.so | grep glXBindTexImageEXT
    $ nm /usr/lib64/libGL.so
    nm: /usr/lib64/libGL.so: no symbols 
    ```

但是**Gnome 3 可以在这台机器**上使用合成**功能**。

我的机器有 GLX_EXT_texture_from_pixmap 扩展：

```
$ glxinfo | grep GLX_EXT_texture_from_pixmap -B 10
name of display: :0.0
display: :0  screen: 0
direct rendering: Yes
server glx vendor string: SGI
server glx version string: 1.4
server glx extensions:
    GLX_ARB_multisample, GLX_EXT_import_context, GLX_EXT_texture_from_pixmap, 
--
    GLX_SGIX_visual_select_group, GLX_INTEL_swap_event
client glx vendor string: Mesa Project and SGI
client glx version string: 1.4
client glx extensions:
    GLX_ARB_get_proc_address, GLX_ARB_multisample, GLX_EXT_import_context, 
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_EXT_framebuffer_sRGB, 
    GLX_MESA_copy_sub_buffer, GLX_MESA_multithread_makecurrent, 
    GLX_MESA_swap_control, GLX_OML_swap_method, GLX_OML_sync_control, 
    GLX_SGI_make_current_read, GLX_SGI_swap_control, GLX_SGI_video_sync, 
    GLX_SGIS_multisample, GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, 
    GLX_SGIX_visual_select_group, GLX_EXT_texture_from_pixmap, 
    GLX_INTEL_swap_event
GLX version: 1.4
GLX extensions:
    GLX_ARB_get_proc_address, GLX_ARB_multisample, GLX_EXT_import_context, 
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_MESA_copy_sub_buffer, 
    GLX_MESA_multithread_makecurrent, GLX_MESA_swap_control, 
    GLX_OML_swap_method, GLX_OML_sync_control, GLX_SGI_make_current_read, 
    GLX_SGI_swap_control, GLX_SGI_video_sync, GLX_SGIS_multisample, 
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group, 
    GLX_EXT_texture_from_pixmap 
```

所以我的问题是：

*   尽管启用了GLX_EXT_texture_from_pixmap（至少在已检查的ScientificLinux 6.2、Fedora 16、Ubuntu 10.04 中），是否**期望**libGL.so**不包含glXBindTexImageEXT？**

*   您能否向我解释一下使用 X11 Pixmap 作为 OpenGL 纹理的可能方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:30:57.663

它是一个扩展，因此访问它的可靠方法是通过扩展机制。glXGetProcAddress 和朋友。我建议使用像 GLEW 这样的即用型扩展加载器。

# googletest - 使测试依赖并在googletest中一起失败？

> ID：10138468
> 
> 赞同：1
> 
> 时间：2012-04-13T09:35:05.780
> 
> 标签：googletest

在 googletest 中，有没有办法让测试相互依赖？我有一个测试（数据库连接），如果它失败，运行某些其他测试（使用数据库）是没有意义的。我想让那些依赖测试快速失败而不执行。

我可以将 DB 连接测试的断言放入测试夹具中，但是由于为每个测试构造了一个新的夹具对象，它会不必要地运行很多次。有没有一种优雅的方法可以让所有使用测试的数据库一起失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:14:30.217

您可以使用[googletest Environment](http://code.google.com/p/googletest/wiki/AdvancedGuide#Global_Set-Up_and_Tear-Down)创建数据库连接。

或者我猜你可以在测试成功建立数据库连接时设置一个全局布尔值，并在每个其他测试开始时检查它。

# iphone - Objective C：Cocoa：2组变量参数？

> ID：10138469
> 
> 赞同：3
> 
> 时间：2012-04-13T09:35:08.863
> 
> 标签：iphone, objective-c, cocoa

有可能以这种方式有一个方法：

```
[obj mergeObjs:obj1,obj2,obj3,nil]; 
```

或者以这种方式有一个方法：

```
[obj mergeObjs:obj1,obj2...obj(n),nil usingBlocks:blk1,blk2,blk3....blk(m),nil]; 
```

其中 n 可能等于或不等于 m。

基本上在单个方法声明中包含**多个变量参数列表。**?

这不是一个潜在的答案：

```
[obj merge:[NSArray arrayWithObjects:[NSArray arrayWithObjects:...,nil],[NSArray arrayWithObjects:...,nil]...,nil]]; 
```

提前致谢。

这是我为单变量参数列表找到的链接：

[http://developer.apple.com/library/mac/#qa/qa1405/_index.html](http://developer.apple.com/library/mac/#qa/qa1405/_index.html) [如何在Objective-C中创建可变参数方法](https://stackoverflow.com/questions/4804674/how-to-create-variable-argument-methods-in-objective-c)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T11:37:49.663

您无法使用可变长度的参数列表来实现这一点，但是您是否考虑过只传递两个数组？

```
[obj mergeObjs:(NSArray*)objs usingBlocks:(NSArray*)blocks]; 
```

现代版本的 clang（最近 Xcode 版本使用的 Objective C 编译器）甚至支持`NSArray`文字

```
[instance mergeObjs:@[obj1, obj2, obj3] usingBlocks:@[^{}, ...]]; 
```

（当然，确保适当地复制您的块以插入到 NSArray 中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T11:29:29.683

不，消息分发归结为对`objc_msgSend()`（或其变体之一）的调用。这遵循 C 调用约定，并且无法在该约定中表达多变量参数列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T06:13:49.727

根据响应和严重脱发得出结论 - 在方法声明中不可能有 2 个变量参数列表。

拥有 mulit-Variable-argument-list 的目的是在我的上下文中提供更多的可读性。

将与阵列凑合...叹息！！。

# asp.net - 改进数据访问类

> ID：10138473
> 
> 赞同：1
> 
> 时间：2012-04-13T09:35:26.150
> 
> 标签：asp.net, sql-server, vb.net, tsql, ado.net

几年前，我们（作为一家公司）面临着让我们的开发人员停止编写经典的 asp 页面并切换到 .net（并反过来使用 system.data 进行数据访问）的场景。

作为一个所谓的“短期”措施，我编写了以下类，以使那些不习惯 system.data 及其所有新对象的人更容易切换：

[http://www.heavencore.co.uk/forum/viewthread.php?thread_id=185](http://www.heavencore.co.uk/forum/viewthread.php?thread_id=185)

此类的主要目的是使用法尽可能与经典 asp 相似并保持用法非常简单（加上添加电子邮件警报以防止错误捕获 yada yada yada）：

```
Public db As New SimpleDataAccess
Public RS As New DataTable

ConnectDatabase()
db.Execute_Query(RS, "SELECT * FROM whatever WHERE IntColumn = " & tools.parseint(EmployeeID, 0) & " or TextColumn = '" & db,Escape("bla'blabla") & "' ORDER BY IntColumn")
For Each DB_Row As DataRow In RS.Rows
    response.Write(DB_Row("IntColumn"))
Next
CloseDatabase() 
```

现在，这门课很烂的两个主要原因：

*   Sql 注入的东西（解析和引号转义）必须在类之外完成 - 容易忘记 - 这里肯定需要引入参数化查询！
*   CloseDatabase() 必须在页面末尾手动调用 - 这通常会被忘记，并且与服务器的连接保持打开状态 - 即使在页面完成渲染等之后

这门课很好的原因：

*   该类的使用非常简单，并且可以很容易地将旧的经典 asp 代码转换为 .net
*   查询和连接错误的电子邮件警报在课程本身中以不可见的方式处理
*   它已经完美运行了 2 年多，没有问题

我的问题：

是否有任何其他类/建议可以让我替换此类但保留非常简单的用法，或者修改 Execute_Query() 和 Execute_NonQuery() 方法以处理参数化查询的最佳方法是什么？

简单是关键！

**PS：**哪里是发布大量代码以用于 SO 问题的好地方？Pastebin等只能保存一个月的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:51:51.463

我想[这](http://www.sharpdeveloper.net/source/SqlHelper-Source-Code-cs.html)可能会对你有所帮助。一大块代码。这几乎可以处理您需要的所有事情。您可以在数组中传递参数。也可以与存储过程一起使用。无需担心连接关闭。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T13:59:51.610

我一直使用来自[http://www.fmstocks.com/（Asp](http://www.fmstocks.com/) Classic MS 应用程序示例）的函数。它非常简单并且可以使用参数

示例用法：

```
set rs = RunSQLReturnRs("Select * from Usuario where UsuarioID = ?", _
                        array(mp("@UsuarioID", adInteger, 0, UsuarioID)))
If not rs.eof then
    UsuarioName = rs("FullName")
end if 
```

DbHelper.ASP 完整代码（多年来略有修改）

```
<!--#include file="../bus/adovbs.inc"-->
<%
Function GetConnectionString()
    GetConnectionString = "file name=c:\udl\miconnstring.udl"
End Function

Function mp(PName , PType , PSize, PValue)
    mp = Array(PName, PType, PSize, PValue)
End Function

Function RunSPReturnRS(strSP, params())
    On Error Resume next

    ' Create the ADO objects
    Dim rs , cmd
    Set rs = server.createobject("ADODB.Recordset")
    Set cmd = server.createobject("ADODB.Command")

    ' Init the ADO objects  & the stored proc parameters
    cmd.ActiveConnection = GetConnectionString()
    cmd.CommandText = strSP
    cmd.CommandType = adCmdStoredProc
    cmd.CommandTimeout = 900 ' 15 minutos

    collectParams cmd, params

    ' Execute the query for readonly
    rs.CursorLocation = adUseClient
    rs.Open cmd, , adOpenForwardOnly, adLockReadOnly

    If err.number > 0 then
        BuildErrorMessage()
        exit function
    end if

    ' Disconnect the recordset
    Set cmd.ActiveConnection = Nothing
    Set cmd = Nothing
    Set rs.ActiveConnection = Nothing

    ' Return the resultant recordset
    Set RunSPReturnRS = rs

End Function

Function RunSP(strSP , params())
    On Error resume next

    ' Create the ADO objects
    Dim cmd
    Set cmd = server.createobject("ADODB.Command")

    ' Init the ADO objects & the stored proc parameters
    cmd.ActiveConnection = GetConnectionString()
    cmd.CommandText = strSP
    cmd.CommandType = adCmdStoredProc
    cmd.CommandTimeout = 900 ' 15 minutos
    collectParams cmd, params

    ' Execute the query without returning a recordset
    cmd.Execute , , adExecuteNoRecords
    If err.number > 0 then
        BuildErrorMessage()
        exit function
    end if

    ' Disconnect the recordset and clean up
    Set cmd.ActiveConnection = Nothing
    Set cmd = Nothing

    Exit Function

End Function

Function RunSQL(strSP , params())
    On Error resume next

    ' Create the ADO objects
    Dim cmd
    Set cmd = server.createobject("ADODB.Command")

    ' Init the ADO objects & the stored proc parameters
    cmd.ActiveConnection = GetConnectionString()
    cmd.CommandText = strSP
    cmd.CommandType = adCmdText
    cmd.CommandTimeout = 900 ' 15 minutos
    collectParams cmd, params

    ' Execute the query without returning a recordset
    cmd.Execute , , adExecuteNoRecords
    If err.number > 0 then
        BuildErrorMessage()
        exit function
    end if

    ' Cleanup
    Set cmd.ActiveConnection = Nothing
    Set cmd = Nothing

    Exit Function

End Function

Function RunSQLReturnRS(sqlstmt, params())
    On Error Resume next

    ' Create the ADO objects
    Dim rs , cmd
    Set rs = server.createobject("ADODB.Recordset")
    Set cmd = server.createobject("ADODB.Command")

    ' Init the ADO objects  & the stored proc parameters
    cmd.ActiveConnection = GetConnectionString()
    cmd.CommandText = sqlstmt
    cmd.CommandType = adCmdText
    cmd.CommandTimeout = 900 ' 15 minutos

    collectParams cmd, params

    ' Execute the query for readonly
    rs.CursorLocation = adUseClient
    rs.Open cmd, , adOpenForwardOnly, adLockReadOnly
    If err.number > 0 then
        BuildErrorMessage()
        exit function
    end if

    ' Disconnect the recordset
    Set cmd.ActiveConnection = Nothing
    Set cmd = Nothing
    Set rs.ActiveConnection = Nothing

    ' Return the resultant recordset
    Set RunSQLReturnRS = rs

End Function

Function RunSPReturnInteger(strSP , params())
    On Error resume next

    ' Create the ADO objects
    Dim cmd
    Set cmd = server.createobject("ADODB.Command")

    ' Init the ADO objects & the stored proc parameters
    cmd.ActiveConnection = GetConnectionString()
    cmd.CommandText = strSP
    cmd.CommandType = adCmdStoredProc
    cmd.CommandTimeout = 900 ' 15 minutos
    collectParams cmd, params

    ' Assume the last parameter is outgoing
    cmd.Parameters.Append cmd.CreateParameter("@retval", adInteger, adParamOutput, 4)

    ' Execute without a resulting recordset and pull out the "return value" parameter
    cmd.Execute , , adExecuteNoRecords
    If err.number > 0 then
        BuildErrorMessage()
        exit function
    end if
    RunSPReturnInteger = cmd.Parameters("@retval").Value

    ' Disconnect the recordset, and clean up
    Set cmd.ActiveConnection = Nothing
    Set cmd = Nothing

    Exit Function
End Function

Private Sub collectParams(cmd , argparams())
    Dim params , v
    Dim i , l , u

    params = argparams

    For i = LBound(params) To UBound(params)
        l = LBound(params(i))
        u = UBound(params(i))

        ' Check for nulls.
        If u - l = 3 Then
            If VarType(params(i)(3)) = vbString Then
                If params(i)(3) = "" then
                    v = null
                else
                    v = params(i)(3)
                end if
            Else
                v = params(i)(3)
            End If

            If params(i)(1) = adLongVarChar Then
                Dim p 'As New Parameter
                Set p = cmd.CreateParameter(params(i)(0), params(i)(1), adParamInput)
                p.Attributes = adParamLong + adParamSigned
                If Not IsNull(v) Then
                    'Seteo para text columns is not null
                    p.AppendChunk v
                    p.Size = Len(v)
                Else
                    'Seteo para text columns is null
                    p.Value = v
                    p.Size = 10000
                End If
                cmd.Parameters.Append p
            Else
                cmd.Parameters.Append cmd.CreateParameter(params(i)(0), params(i)(1), adParamInput, params(i)(2), v)
            End If
        Else
            RaiseError m_modName, "collectParams(...): incorrect # of parameters"
        End If
    Next
End Sub

%> 
```

# c# - 替换某些字符不跟随逗号的字符？

> ID：10138474
> 
> 赞同：0
> 
> 时间：2012-04-13T09:35:26.637
> 
> 标签：c#, .net, regex, string

有没有办法使用通配符来定义以下内容：

当逗号字符之前或之后`"\"`不包含 a 时，我希望 a出现在逗号之前和之后。`"\""`

我有点不确定如何进行否定。

编辑样本数据：

```
"col1,col2,col3" 
```

应该成为

```
"\"col1\",\"col2\",\"col3\"" 
```

其中 "\"" 仅表示引号字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T05:23:08.363

我知道这个线程有点旧，但对于新访问者来说，也可以这样做：

```
string sample = "col1,col2,col3" 
string result = sample.Replace("""","");
result = "\"" + result.replace(",","\",\"") + "\"" 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:48:40.920

使用“负面观察”断言：

```
(?<!\\), 
```

如果没有示例输入/输出，无法给您更好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:44:17.327

使用正则表达式或简单替换：

```
string s = "col1,col2\",\"col3";
// replace all existing quotes and replace all commas with escaped characters again
string r = s.Replace('\"','').Replace(",","\",\"");
// r = "col1\",\"col2\",\"col3" 
```

但这不会像您的示例数据一样：

```
"col1,col2,col3" should become "col1\",\"col2\",\"col3\"" 
```

这不符合您的规则（查看尾随`\"`！）。也许您想包装所有 col，因此您也可以`\"`在开头和结尾添加 a。（假设分隔符总是 just `,`，不包括空格）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:44:27.193

将与以下内容匹配的所有内容替换`^(\\\"),^(\\\")`为：`\",\"`

这意味着除了反斜杠后跟引号，后跟逗号，后跟除反斜杠后跟引号之外的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T09:49:14.663

Try `(?<!\"),(?!\")`，这称为[零宽度断言](http://www.regular-expressions.info/lookaround.html)

我现在很忙，稍后再解释，抱歉。

# wordpress - Wordpress wp 查询以从类别中的第一篇文章中检索和回显特色图像

> ID：10138477
> 
> 赞同：1
> 
> 时间：2012-04-13T09:35:41.127
> 
> 标签：wordpress

我正在尝试创建一个“奇怪”查询来从一个类别中检索第一个帖子并回显特色图像 URL - 包含在 img html 标记中。

不要问我为什么要这样做。我认为我下面的查询理论上应该可以工作，我认为我的 php 中的语法不好，因为它会破坏页面 - 任何人都可以帮我修复吗？

```
<?php

    $featureThumb       = new WP_Query(array(

    'post_type'         => 'post',
    'order'             => 'DESC',
    'orderby'           => 'date',
    'posts_per_page'    => 1,
    'cat'               => 4

));

if ($featureThumb->has_post_thumbnail($post->ID)) {

    $retina  = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'homepage-thumb-retina' );

    echo '<img src="' . $retina[0] . '" alt="' . the_title() . '" width="24" height="24" />' ;

};

endwhile;

unset($featureThumb);

endif; wp_reset_query();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:06:18.543

干得好：

```
<?php
$featureThumb = new WP_Query(array(
    'post_type'         => 'post',
    'order'             => 'DESC',
    'orderby'           => 'date',
    'posts_per_page'    => 1,
    'cat'               => 4
));

while ($featureThumb->have_posts()) : $featureThumb->the_post();
    if (has_post_thumbnail($post->ID)) {
        $retina  = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'homepage-thumb-retina' );
        echo '<img src="' . $retina[0] . '" alt="' . the_title() . '" width="24" height="24" />' ;
    };
endwhile;

unset($featureThumb);

wp_reset_query();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:00:04.247

也许是这样的

```
 $postsQuery       = new WP_Query(array(

    'post_type'         => 'post',
    'order'             => 'DESC',
    'orderby'           => 'date',
    'posts_per_page'    => 1,
    'cat'               => 4

));

while ( $postsQuery->have_posts() ) 
{
        $postsQuery->the_post();
if(has_post_thumbnail($post->ID))
{

    $retina  = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'homepage-thumb-retina' );

    echo '<img src="' . $retina[0] . '" alt="' . the_title() . '" width="24" height="24" />' ;

};
}

unset($postsQuery);

wp_reset_query(); 
```

# c# - 在回发asp.net之间保存变量的最佳方法？

> ID：10138480
> 
> 赞同：10
> 
> 时间：2012-04-13T09:35:42.923
> 
> 标签：c#, asp.net, .net

如何在回发之间将变量保存在 asp.net 中？我正在使用 HttpContext.Current.Items 但它总是在回发后处理有没有其他选项可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T10:36:56.387

如果您的变量不可序列化或者您不希望客户端能够读取其值 => 使用 inProc Session

如果您的变量是可序列化的并且您不希望客户端能够读取其值 => 使用数据库会话

如果您的变量是可序列化的，并且您可以让客户端读取它的值，并且它应该只在页面范围内的回发序列期间存在=>您应该使用 ViewState。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T09:37:47.283

```
ViewState["YourVariable"] = "123"; 
```

ViewState 集合就是为了这个目的，在上面的例子中，YourVariable 是一个变量，你想保存它的值，123 是这个变量的值。

ViewState 在页面范围内是可以访问的。如果你想在不同页面之间有值，你可以使用 ViewState["YourVariable"] = "123"; 这样的会话。

# c# - 如何在 const 字符串中包含枚举值？

> ID：10138481
> 
> 赞同：9
> 
> 时间：2012-04-13T09:35:44.730
> 
> 标签：c#, string, enums, constants

从[这个问题](https://stackoverflow.com/questions/5092470/why-can-i-not-assign-the-concatenation-of-constant-strings-to-a-constant-string)，我知道 a`const string`可以是`const`事物的串联。现在，枚举只是一组连续整数，不是吗？那么为什么不能这样做：

```
const string blah = "blah " + MyEnum.Value1; 
```

或这个 ：

```
const string bloh = "bloh " + (int)MyEnum.Value1; 
```

以及如何在 const 字符串中包含枚举值？

现实生活中的例子：在构建 SQL 查询时，我想拥有`"where status <> " + StatusEnum.Discarded`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T09:38:36.603

作为一种*解决方法*，您可以使用字段初始值设定项而不是 const，即

```
static readonly string blah = "blah " + MyEnum.Value1;

static readonly string bloh = "bloh " + (int)MyEnum.Value1; 
```

至于为什么：对于*enum*的情况，enum 格式化实际上是相当复杂的，尤其是对于这种`[Flags]`情况，所以把它留给运行时是有意义的。对于这种`int`情况，这仍然可能受到文化特定问题的影响，因此再次：需要推迟到运行时。编译器在这里*实际*生成的是一个*框*操作，即使用`string.Concat(object,object)`重载，等同于：

```
static readonly string blah = string.Concat("blah ", MyEnum.Value1);
static readonly string bloh = string.Concat("bloh ", (int)MyEnum.Value1); 
```

将在哪里`string.Concat`执行`.ToString()`. 因此，可以说以下方法效率更高（避免使用框和虚拟调用）：

```
static readonly string blah = "blah " + MyEnum.Value1.ToString();
static readonly string bloh = "bloh " + ((int)MyEnum.Value1).ToString(); 
```

这将使用`string.Concat(string,string)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T09:38:48.160

您需要使用`readonly`or`static readonly`代替`const`.

```
static readonly string blah = "blah " + MyEnum.Value1; 
```

MyEnum.Value1 不被视为的原因`const`是需要调用方法将值转换为字符串，并且即使方法参数是常量，方法调用的结果也不会被视为常量值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T09:39:06.897

你不能这样做，因为`MyEnum.Value1`and`(int)MyEnum.Value1`不是常`string`量值。赋值时会有隐式转换。

使用 a`static readonly string`代替：

```
static readonly string blah = "blah " + MyEnum.Value1; 
```

# excel - 继续保存 CSV 或 Xlsx 文件

> ID：10138487
> 
> 赞同：0
> 
> 时间：2012-04-13T09:36:24.367
> 
> 标签：excel, gridview, csv, xlsx

我想更新我的 gridview，然后将 gridview 内容保存在我的 csv 或 xlsx 文件的 continue 中。之后再次更新我的gridview，然后将内容保存在文件的继续：

例子 ：

网格视图内容1：

保存在：第 1 列 - 255

网格视图内容2：

保存在：第 256 - 500 列

...

我怎样才能保存在同一文件的继续？？？（不要覆盖过去的列）

前我的英语不好:)

我的保存代码：

```
 Microsoft.Office.Interop.Excel.ApplicationClass ExcelApp = new Microsoft.Office.Interop.Excel.ApplicationClass();

        ExcelApp.Application.Workbooks.Add(Type.Missing);

        ExcelApp.Columns.ColumnWidth = 20;

        for (int i = 0; i < dataGridView1.Rows.Count; i++)
        {

            for (int j = 0; j < dataGridView1.Rows[0].Cells.Count; j++)
            {

                ExcelApp.Cells[i + 1, j + 1] = dataGridView1.Rows[i].Cells[j].Value.ToString();

            }

        }

        if (!textBox1.Text.Contains(".xlsx"))
        {
            textBox1.Text = textBox1.Text.Replace(".xls", ".xlsx");
        }

        ExcelApp.ActiveWorkbook.SaveCopyAs(textBox1.Text);

        ExcelApp.ActiveWorkbook.Saved = true;

        ExcelApp.Quit(); 
```

我从 excel 文件导入（选择列范围为 255）：

```
 string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=NO;IMEX=1;""", txtPath.Text);
            string query = String.Format("select * from [CA:DA]", "Sheet1");
            OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);
            DataSet dataSet = new DataSet();
            dataAdapter.Fill(dataSet);
            dataGridView1.DataSource = dataSet.Tables[0]; 
```

这导致了大的excel文件！它有 15000 列！

```
try
        {

            for (int row = 0; row <= dataGridView1.RowCount-1; row++)
            {
                for (int cell = 0; cell <= dataGridView1.Rows[0].Cells.Count-1; cell++)
                {         
                    string cellst = dataGridView1.Rows[row].Cells[cell].Value.ToString();
                    dataGridView1.Rows[row].Cells[cell].Value = Int64.Parse(cellst) + 1;

                    }
                }
            }

        catch
        {
            MessageBox.Show("Data Format Error. Please Review your file for not numeric data!");
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:15:29.227

```
for (int chunk = 0; chunk < TotalColumnsToImport/255; chunk++)             
{
            for (int i = 0; i < dataGridView1.Rows.Count; i++)
            {

                for (int j = 0; j < dataGridView1.Rows[0].Cells.Count; j++)
                {

                    ExcelApp.Cells[i + 1, chunk * 255 + j + 1] = dataGridView1.Rows[i].Cells[j].Value.ToString();

                }

            }
} 
```

我不知道我是否真的了解您的要求，但据我所知，这就是您需要做的一切。您正在以 255 列的块导入数据，因此只需在外部添加另一个循环，跟踪您所在的块，然后按块数乘以 255 来设置列。在您的情况下，循环中使用的 TotalColumnsToImport 变量上限为 15000。

您在导入数据时转置数据并在导出数据时再次转置数据的建议是一个很好的建议。在这种情况下， TotalColumnsToImport 变为 900，就像您说的那样，您只需 4 次迭代即可完成此操作。我希望这有帮助。

编辑：

好的，所以我认为您不应该使用gridview。尝试这个：

```
//Open the worksheet
            Excel.Worksheet ws = (Excel.Worksheet)currentWorkbook.Worksheets["Sheet1"];

            //Convert from interop object to native C# object, indexed 1 to length
            object[,] data = (object[,])ws.UsedRange.Value2; 
```

现在循环遍历数据，而不是导出阶段中的 gridview，并在编写它们之前将每个值加 1：

```
for (int i = 1; i < data.GetLength(0); i++)
    {

        for (int j = 1; j < data.GetLength(1); j++)
        {

            ExcelApp.Cells[i, j] = (int)data[i,j] + 1;

        }

    } 
```

您可能需要对铸件进行一些调整，但它应该可以工作并且速度更快。另请注意， data[,] 是从 1 而不是 0 索引的，这是不寻常的。

# path - CMake 在生成 Makefile 时生成的路径名太长

> ID：10138492
> 
> 赞同：4
> 
> 时间：2012-04-13T09:36:58.360
> 
> 标签：path, windows-xp, cmake

当前项目的结构非常复杂（我无法更改）并且它使用 CMake。但是我很难创建一个可以编译的 Makefile。

主要问题是：如果我的项目存储在`D:\a\b\c\`，一些源代码`D:\a\b\c\src\d\e`和构建文件夹中`D:\a\b\c\build`，cmake 会创建一些文件夹，如`D:\a\b\c\build\SubProjectName\CMakeFiles\DetailedSubPrjectName.dir\D_\a\b\c\src\d\e`. 我想你明白了——结果路径恰好超过 260 个字符。

我无法展平项目结构（不是我的代码）。完成这项工作的唯一方法是将整个项目放在文件夹结构中更高的位置 - （非常）靠近驱动器根目录（我有大约 10-15 个字符可用）。但这并不是真的可以接受，有时需要更多的字符。

有什么方法可以说服 CMake 在构建目录中创建平面结构或使用更长的路径名（在 WinXP 中）？还是别的什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:19:13.677

您可以尝试使用[CMAKE_USE_RELATIVE_PATHS 稍微](http://www.cmake.org/cmake/help/cmake-2-8-docs.html#variable%3aCMAKE_USE_RELATIVE_PATHS)缩短您的路径，但显然它有不工作的记录......</p>

无论如何，问题来自 Windows 而不是 CMake，您最好尝试增加系统上的最大路径长度。不幸的是，我在这里帮不了你。

但是，CMake 可能应该知道 Windows XP 上的路径长度限制，所以我建议您[提交一个错误](http://public.kitware.com/Bug/my_view_page.php)，以便 CMake 开发人员可以做一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-24T07:18:29.667

避免这个问题的最好方法是使用`subst b: c:\my\long\source\dir`新的 B: 驱动器然后在其上工作。您还必须清除构建目录。

# c# - C#/accdb：出现错误“操作必须使用可更新查询。”

> ID：10138493
> 
> 赞同：1
> 
> 时间：2012-04-13T09:37:00.207
> 
> 标签：c#, sql, .net, ms-access

我正在用 C# 编写一个连接到 MS Access 数据库 (.accdb) 的应用程序。该应用程序将由多个工作人员使用，并且他们每个人都会不时连接到数据库 - 以刷新他们的存在（刷新登录时间）。

连接到同一数据库的所有其他功能似乎都可以正常工作，但这个却不行。由于某种原因，我收到以下错误，它表示问题出在我`ExecuteNonQuery()`的位置。命令文本使用字符串*myUpdateNonquery*定义。

```
System.Data.OleDb.OleDbException (0x80004005): Operation must use an updateable query. 
```

功能：

```
public Boolean RefreshSignIn()
{
  Boolean successful = false;
  lock(dbLock)
  {
    try
    {
      string myConnectionString = connectionType + primarydbPath;
      OleDbConnection myConnection = new OleDbConnection(myConnectionString);
      string myUpdateNonquery = "UPDATE AgentSignIn SET signInTime = NOW() WHERE agentName = @p1";
      using(myConnection)
      {
        OleDbCommand myCommand = new OleDbCommand(myUpdateNonquery, myConnection);
        using(myCommand)
        {
          myCommand.Parameters.Add("@p1", OleDbType.Char).Value = appSettings.mynick;

          myConnection.Open();
          int updatedRows = myCommand.ExecuteNonQuery();
          if (updatedRows>0) {successful = true;}
        }
      }
    }
    catch(System.Exception ex)
    {
      MessageBox.Show("Error! Failed to keep you signed in to the database!\n\n"+ex.ToString());
    }
  }
  return successful;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:42:57.647

SQL 看起来不错。这似乎是一个权限问题，下面的文章概述了如何解决这个问题：

[http://www.mikesdotnetting.com/Article/74/Solving-the-Operation-Must-Use-An-Updateable-Query-error](http://www.mikesdotnetting.com/Article/74/Solving-the-Operation-Must-Use-An-Updateable-Query-error)

# html - ajax url中的encodeURI在参数值中&的情况下不起作用

> ID：10138495
> 
> 赞同：0
> 
> 时间：2012-04-13T09:37:14.067
> 
> 标签：html, url, urlencode

我想调用一个 ajax 函数并对 URL 参数进行编码，我使用 java scrit 中的默认 encodeURI 方法，它工作正常。

现在假设我有一个类似的参数值`a&b`。在这种情况下，即使我已经为此参数进行了 URL 编码，它也不会起作用，因为`&`会在 URI 上附加一个附加值，这会使 URI 在那里制动。

那么我该如何避免这种情况。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:19:22.653

问题解决了..我只是替换`&`为`%26`，这是该字符的标准编码

# gwt - 如何使用 GWT 从一个入口点传递到另一个入口点？

> ID：10138497
> 
> 赞同：1
> 
> 时间：2012-04-13T09:37:29.507
> 
> 标签：gwt, entry-point

我想开发一个 Web 应用程序，但我在创建 2 个网页时遇到了问题。我想要一个身份验证页面，然后我想传递给另一个。我创建了 2 个入口点，我想从另一个页面调用一个页面。任何人都知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:25:34.477

如果你问“我如何为我的 GWT 应用程序实现登录页面？”的问题，大家只是将你重定向到这篇半完整的文章：“ **[LoginSecurity FAQ](http://code.google.com/p/google-web-toolkit-incubator/wiki/LoginSecurityFAQ)** ”，它只给了你一半的解决方案。它讨论了 jBCrypt 以及与客户端和服务器之间的每个 RPC 调用通信 sessionID 的需要。但是，它并没有说明解决方案的许多关键方面：

1) 根据作者的说法， checkWithServerIfSessionIdIsStillLegal() 方法旨在在 sessionID 不再合法时显示登录框，否则允许您访问主应用程序。但是你把这个方法放在哪里？“在你的 !EntryPoint 开始执行之后”在哪里？它在单独的 GWT 应用程序中吗？它是同一个 GWT 应用程序中的不同入口点吗？您从哪里实际调用此方法？

2) 与 1 直接相关的是：登录框在此架构中位于何处？同样，它是否与您限制访问的主要部分在同一个 GWT 应用程序中？如果是这样，是否将其指定为单独的入口点？还是 LoginBox 只是一个单独的 GWT 应用程序，仅当其 checkWithServerIfSessionIdIsStillLegal() 方法返回 true 时才负责将访客重定向到主应用程序？

没有可用的示例或解释，这非常令人沮丧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:17:11.410

我假设您已经创建了 2 个带有 2 个模块（2 个入口点）的网页，并且 html 页面包含了特定的模块。从身份验证后的第一页开始，您可以使用

```
Window.Location.replace("your page path to replace"); 
```

它将重定向到第二页。希望它会有所帮助。

# android - 来自数据库和 onitemclicklister 的 autocompletetextview 列表显示

> ID：10138498
> 
> 赞同：0
> 
> 时间：2012-04-13T09:37:35.493
> 
> 标签：android, listview, autocompletetextview, android-cursoradapter

我想实现一个 onclicklister 来自动完成具有数据库表结果的文本视图。
我用谷歌搜索了它，但没有得到我想要的。[堆栈溢出链接](https://stackoverflow.com/questions/9030278/how-to-populate-autocompletetextview-inside-a-listview-from-sqlite-database-effi)。

在我的自动完成文本视图中，我将显示用户的名称，如果您单击所选项目，它应该打开用户详细信息页面，为此我从用户表中获取用户名和 ID，但我必须在自动完成文本视图中仅显示名称该用户 ID 它发送请求并打开用户详细信息屏幕。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:23:46.420

维护两个数组..一个用于用户名，另一个用于id..现在我想你知道如何从数据库中获取任何值...在该edittext下方放置一个edittext字段和一个listview ..结果将显示在那个listview...现在创建一个线程，它将不断检查edittext中的字符串..就像这样..

```
 s1="";
  s2=youredittext.getText().toString();
   new Thread(new Runnable() {
          public void run() {

          while(bool){

              s2=youredittext.getText().toString();
          if(s1!=s2 && s2.length()>=1){

              s1=s2;
                         //here search the database for the name starting with the string in s1 and get the user name and id fields..and populate the arrays...
                            }
                           runOnUiThread(new Runnable() {
                     public void run() {
                         adapter.clear();<--- this will clear the list every time a new letter is added or removed from the edittext.. and add relevent items..
                         for(int z=0;z<namesarray.length;z++){

                             adapter.add(namesarray[z]);
                         }
                         adapter.notifyDataSetChanged();

                    }
                });
     }}).start(); 
```

并且当您单击任何项​​目时，获取该列表中项目的位置.. ids 数组中该索引处的项目将是相应的 id..

# spring - 将 Spring 组件导出为 OSGi 服务

> ID：10138504
> 
> 赞同：5
> 
> 时间：2012-04-13T09:37:49.643
> 
> 标签：spring, service, osgi

是否可以自动将 Spring `@Component`（或其规范之一；例如`@Repository`）注册为 OSGi 服务？所以我可以在一个包中使用自动装配和 Spring 的所有其他好处和 OSGi 服务注册表在包之间进行通信？

更新：从[这个讨论](http://karaf.922171.n3.nabble.com/Aries-and-Spring-Co-Existance-in-Karaf-td3438050.html)来看，使用标准蓝图似乎是不可能的，只能在 Eclipse Gemini 中使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:50:49.570

我假设您熟悉[Eclipse Gemini Blueprint](http://www.eclipse.org/gemini/blueprint/)（以前称为 Spring Dynamic Modules，以前称为 Spring OSGi）？

[`<service>`您使用-tag](http://www.eclipse.org/gemini/blueprint/documentation/reference/1.0.0.RELEASE/html/service-registry.html#service-registry%3aexport)导出您的 bean 。我不确定你是否可以`@Component`自动导出所有等注释的bean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:41:20.003

在没有@AlexeyRomanov 建议的 hack 的情况下支持这一点的可能实现可能是`BeanFactoryPostProcessor`通过片段向 Gemini Blueprint 的扩展包添加一个实现。

该处理器可以在 BeanFactory 中创建所需的 OSGi 导出定义，并且它应该可以正常工作。

一个例子就是[`ServiceReferenceInjectionBeanPostProcessor`](http://static.springsource.org/osgi/docs/1.2.1/api/org/springframework/osgi/extensions/annotation/ServiceReferenceInjectionBeanPostProcessor.html)SpringDM's/Gemini's extension 的形式，它允许您通过`@ServiceReference`注解注入 OSGi-Services。（虽然我链接了 Spring DM 这个类应该仍然存在于 Gemini 中，但我找不到他们的 javadoc 的直接链接）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:45:19.380

讨厌的解决方法，仅适用于单例 bean：将实例存储在构造函数的静态字段中，并使用该字段的 getter 作为 Blueprint/iPOJO 工厂方法。

# php - Symfony2 - 验证不适用于嵌入式表单类型

> ID：10138505
> 
> 赞同：75
> 
> 时间：2012-04-13T09:37:58.400
> 
> 标签：php, symfony

我有一个结合两个实体（用户和个人资料）的表单。

验证似乎适用于来自用户实体的表单的第一部分，并且是表单的基础。

ProfileType 包含在 UserType 中。表单正确呈现并显示正确的信息，因此它似乎已正确连接到 Profile 实体。这只是在 ProfileType 上被破坏的验证。

关于为什么一部分会验证而另一部分不会验证的任何想法？

下面的代码：

验证.yml

```
DEMO\DemoBundle\Entity\User\Profile:
    properties:
        address1:
            - NotBlank: { groups: [profile] }
        name:
            - NotBlank: { groups: [profile] }
        companyName:
            - NotBlank: { groups: [profile] }

DEMO\DemoBundle\Entity\User\User:
    properties:
        username:
            - NotBlank:
                groups: profile
                message: Username cannot be left blank.
        email:
            - NotBlank:
                groups: profile
                message: Email cannot be left blank
            - Email:
                groups: profile
                message: The email "{{ value }}" is not a valid email.
                checkMX: true
        password:
            - MaxLength: { limit: 20, message: "Your password must not exceed {{ limit }} characters." }
            - MinLength: { limit: 4, message: "Your password must have at least {{ limit }} characters." }
            - NotBlank: ~ 
```

用户类型.php

```
namespace DEMO\DemoBundle\Form\Type\User;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\CallbackValidator;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\FormError;

use DEMO\DemoBundle\Form\Type\User\ProfileType;

class UserType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('username');
        $builder->add('email');
        $builder->add('profile', new ProfileType());
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'DEMO\DemoBundle\Entity\User\User',
            'validation_groups' => array('profile')
        );
    }

    public function getName()
    {
        return 'user';
    }
} 
```

配置文件类型.php

```
namespace DEMO\DemoBundle\Form\Type\User;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\CallbackValidator;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\FormError;

class ProfileType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('name');
        $builder->add('companyName', null, array('label' => 'Company Name'));
        $builder->add('address1', null, array('label' => 'Address 1'));
        $builder->add('address2', null, array('label' => 'Address 2'));
        $builder->add('city');
        $builder->add('county');
        $builder->add('postcode');
        $builder->add('telephone');
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'DEMO\DemoBundle\Entity\User\Profile',
        );
    }

    public function getName()
    {
        return 'profile';
    }
} 
```

控制器

```
$user = $this->get('security.context')->getToken()->getUser();

        $form = $this->createForm(new UserType(), $user);

        if ($request->getMethod() == 'POST') {
            $form->bindRequest($request);

            if ($form->isValid()) {
                // Get $_POST data and submit to DB
                $em = $this->getDoctrine()->getEntityManager();
                $em->persist($user);
                $em->flush();

                // Set "success" flash notification
                $this->get('session')->setFlash('success', 'Profile saved.');
            }

        }

        return $this->render('DEMODemoBundle:User\Dashboard:profile.html.twig', array('form' => $form->createView())); 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-06-21T14:29:14.410

我花了很长时间搜索，发现它正在添加`'cascade_validation' => true`到`setDefaults()`修复它的父类型类中的数组中（如线程中所述）。这会导致在表单中显示的子类型中触发实体约束验证。例如

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(            
        ...
        'cascade_validation' => true,
    ));
} 
```

对于集合，还要确保将表单上的集合字段添加`'cascade_validation' => true`到数组中。`$options`例如

```
$builder->add('children', 'collection', array(
    'type'         => new ChildType(),
    'cascade_validation' => true,
)); 
```

这将像在集合中使用的子实体中一样进行 UniqueEntity 验证。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2016-06-14T13:17:51.870

给使用**Symfony 3.0**及更高版本的用户的注意事项：该`cascade_validation`选项[已被删除](https://github.com/symfony/symfony/blob/master/UPGRADE-3.0.md)。相反，将以下内容用于嵌入式表单：

```
$builder->add('embedded_data', CustomFormType::class, array(
    'constraints' => array(new Valid()),
)); 
```

很抱歉在这个旧线程中添加了一个稍微偏离主题的答案（Symfony 3 vs. 2），但是在这里找到这些信息今天可以为我节省几个小时。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-12-20T14:19:27.450

根据[表单类型文档](http://symfony.com/doc/master/reference/forms/types/form.html#cascade-validation)，您还可以使用`Valid`约束而不是`cascade_validation`选项。

```
$builder->add('children', 'collection', array(
    'type'        => new ChildType(),
    'constraints' => array(new Valid()),
)); 
```

来自所有者实体的示例：

```
/**
 * @var Collection
 *
 * @ORM\OneToMany(targetEntity="Child", ...)
 * @Assert\Valid()
 */
private $children 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-16T14:13:37.327

我一直在寻找完全相同的东西，这就是我发现的

[http://symfony.com/doc/master/book/forms.html#forms-embedding-single-object](http://symfony.com/doc/master/book/forms.html#forms-embedding-single-object)

您需要告诉主实体来验证它的子实体，如下所示：

```
/**
 * @Assert\Type(type="AppBundle\Entity\Category")
 * @Assert\Valid()
 */
 private $subentity; 
```

我已经在 symfony 2.8 上对此进行了测试，并且可以正常工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-21T12:49:33.443

属于 Symfony 2.3

使用嵌入式表单和验证组可能会非常痛苦：注释 @Assert\Valid() 对我不起作用（没有组也可以）。在 DefaultOptions 上插入 'cascade_validation' => true 是关键。您无需在 ->add() 上重复此操作。注意：HTML 5 验证不能与验证组一起使用。

例子：

2 个地址的集合。均为 1:1 单向。每个都有不同的 (!) 验证组。

```
 class TestCollection{

//(...)

/**
 * @var string
 * @Assert\NotBlank(groups={"parentValGroup"})
 * @ORM\Column(name="name", type="string", length=255, nullable=true)
 */
protected $name;

/**
 * @var \Demo\Bundle\Entity\TestAddress  
 * @Assert\Type(type="Demo\Bundle\Entity\TestAddress")
 * @ORM\OneToOne(targetEntity="TestAddress",cascade={"persist","remove"},orphanRemoval=true)
 * @ORM\JoinColumn(name="billing_address__id", referencedColumnName="id")
 */
protected $billingAddress;

/**
 * @var \Demo\Bundle\Entity\TestAddress
 * @Assert\Type(type="Demo\Bundle\Entity\TestAddress")
 * @ORM\OneToOne(targetEntity="TestAddress",cascade={"persist","remove"}, orphanRemoval=true)
 * @ORM\JoinColumn(name="shipping_address__id", referencedColumnName="id")
 */ 
protected $shippingAddress;

//(...)
} 
```

地址实体

```
class TestAddress {
/**
 * @var string
 * @Assert\NotBlank(groups={"firstname"})
 * @ORM\Column(name="firstname", type="string", length=255, nullable=true)
 */
private $firstname;

/**
 * @var string
 * @Assert\NotBlank(groups={"lastname"})
 * @ORM\Column(name="lastname", type="string", length=255, nullable=true)
 */
private $lastname;

/**
 * @var string
 * @Assert\Email(groups={"firstname","lastname"}) 
 * @ORM\Column(name="email", type="string", length=255, nullable=true)
 */
private $email; 
```

地址类型 - 更改验证组的能力

```
class TestAddressType extends AbstractType {    
protected $validation_group=['lastname'];//switch group

public function __construct($validation_group=null) {
    if($validation_group!=null) $this->validation_group=$validation_group;
}

public function buildForm(FormBuilderInterface $builder, array $options)
{
    //disable html5 validation: it suchs with groups 

    $builder
        ->add('firstname',null,array('required'=>false))
        ->add('lastname',null,array('required'=>false))
        ->add('email',null,array('required'=>false))
    ;
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Demo\Bundle\Entity\TestAddress',           
        'validation_groups' => $this->validation_group,
    ));
}
(...) 
```

最后是 CollectionType

```
class TestCollectionType extends AbstractType { 

public function buildForm(FormBuilderInterface $builder, array $options)
{   $builder
        ->add('name')           
        ->add('billingAddress', new TestAddressType(['lastname','firstname']))
        ->add('shippingAddress', new TestAddressType(['firstname']))            
    ;
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Demo\Bundle\Entity\TestCollection',
        'validation_groups' => array('parentValGroup'),         
        'cascade_validation' => true
    ));
}

//(...) 
```

希望能帮助到你..

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-09T18:34:54.923

**你用的是 YML 还是注解？**

我尝试`cascade_validation`在我的父表单类上应用该选项，但仍然没有进行验证。在阅读了一些文档后，我去`app/config/config.yml`发现`enable_annotations`under`framework->validation`被设置为**true**。显然，如果这是真的，验证服务不会读取任何validation.yml 文件。所以我只是将其更改为**false**，现在表单验证正常。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-13T10:47:33.297

`validation_groups`您还必须添加`ProfiletType`。根据`data_class`是否存在，分别在每种表单类型中进行验证。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-11T20:21:46.473

从我的控制器：

```
$form = $this->get('form.factory')
        ->createNamedBuilder('form_data', 'form', $item, array('cascade_validation' => true))
        ->add('data', new ItemDataType())
        ->add('assets', new ItemAssetsType($this->locale))
        ->add('contact', new ItemContactType())
        ->add('save', 'submit',
            array(
                'label' => 'Save',
                'attr' => array('class' => 'btn')
            )
        )
        ->getForm(); 
```

::createNamedBuilder 中的第四个参数 -`array('cascade_validation' => true))`

# android - 字符串sqlite视图上的android类型不匹配

> ID：10138506
> 
> 赞同：0
> 
> 时间：2012-04-13T09:38:03.693
> 
> 标签：android, sqlite, list, type-mismatch

任何人都知道为什么这给我一个重量错误？

错误：

> 类型不匹配：无法从元素类型 Object 转换为 String

```
 public void viewWeightHandler(View view) {
    List weights = this.dh.selectAll();
    StringBuilder sb = new StringBuilder();
    sb.append("Previous Weights:\n");
    for (String weight : weights) {
        sb.append(weight + "\n");
    }
    Log.d("WEIGHT", "weight size - " + weights.size());
    output.setText(sb.toString());
} 
```

输出是显示结果的文本视图

重量是用户输入的

weights 是生成的列表。

据我所知，上面应该循环，并且对于每个权重，它应该将其插入权重并显示（如果输入为 1、22、3）

> 1
> 
> 22
> 
> 3

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:43:57.133

我认为您在迭代权重时出错（使用增强的 for 循环）：

```
 for (List weight : weights) {
      sb.append(weight + "\n");
  } 
```

以这种方式声明它意味着权重的每个元素都应该是列表（因此迭代变量也是列表）。但是，我认为情况并非如此。我不完全知道列表存储什么样的元素，我假设它是`String`：

```
 List<String> weights =      this.dh.selectAll();
    StringBuilder sb = new StringBuilder();
    sb.append("Previous Weights:\n");
    for (String weight : weights) {
        sb.append(weight + "\n");
    } 
```

使用原始类型是非常糟糕的做法，没有泛型参数，它更难理解，禁用内容辅助并可能导致像你这样的错误（因此我添加了`<String>`.

但是，我正在纠正的错误不会导致编译错误，而是`ClassCastException`在运行时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:44:42.323

尝试更改您的 for 循环：

```
for (Object weight : weights) {
    sb.append(weight.toString() + "\n");
} 
```

问题是您将权重作为 type 从数据库中取出`Object`。但是你不能在不先进行某种类型转换的情况下将`Object`s 视为s。`String`

# c# - SharpPcap 是否有可能阻止或限制数据包？

> ID：10138509
> 
> 赞同：0
> 
> 时间：2012-04-13T09:38:33.040
> 
> 标签：c#, .net, winpcap, sharppcap

[我想在这个](http://www.netlimiter.com)应用程序中制作一个像带宽限制一样的应用程序，是否可以在 C# 中使用 SharpPcap 来实现这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:43:19.753

据我所知，使用 WinPcap，您只能监视或注入数据包，而不能丢弃或操纵数据包。所以**我会说不**，你不能用 SharpPcap 或 WinPcap 来实现这一点。

# perl - 如何在 Perl 的 LWP::UserAgent 中设置传出 IPv6 地址？

> ID：10138511
> 
> 赞同：1
> 
> 时间：2012-04-13T09:38:37.480
> 
> 标签：perl, ipv6

我知道可以在 LWP::UserAgent 中设置 IPv4 传出 IP，但是是否可以将特定的 IPv6 地址设置为传出 IP？如果是：我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:32:00.667

升级到[Perl 5.14](http://p3rl.org/perl5140delta#Improved-IPv6-support)。它的`IO::Socket::INET`/`Socket`模块支持 IPv6。

# c++ - 在 C++ 或 C 中绘制 igraph 数据？

> ID：10138512
> 
> 赞同：1
> 
> 时间：2012-04-13T09:38:39.413
> 
> 标签：c++, c, igraph

是否有工具或库可以在 C 或 C++ 上绘制图形的顶点和边缘，例如 R 中的“绘图”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T18:39:50.657

[GraphViz](http://www.graphviz.org/)是一个流行的命令行图形绘制工具包，理论上可以用作[C 库](http://www.graphviz.org/pdf/libguide.pdf)——尽管我从未尝试过。

# asp.net - 菜单 asp.net 离线渲染很好，但在线有问题

> ID：10138514
> 
> 赞同：0
> 
> 时间：2012-04-13T09:38:43.313
> 
> 标签：asp.net, visual-studio-2010, menu

我是 asp.net 世界的新手，我正在尝试使用菜单控件（而不是使用 CSS 控件）。Orientation="Horizo​​ntal" 带有一些子菜单项的菜单。当我在本地运行网站时，它似乎是正确的，但当我上传时，它完全不同： - Chrome 呈现子菜单而不是垂直弹出窗口。- Mozzilla 和 IE9 不采用 CssClass 而不是 Horizo​​ntalPadding 和 VerticalPadding。

在线查看其工作原理的链接：[http ://www.symbols.it/prof/default.aspx](http://www.symbols.it/prof/default.aspx)

真的谢谢，

莱昂内尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:15:29.507

`CSS`是的，如上所述，它看起来有些凌乱，并尝试`target Framework`在 web.config 文件中检查您的托管服务提供商配置。

在面向 .NET Framework 4 或更高版本的项目中，Web.config 文件的编译元素包含一个 targetFramework 属性，如下所示：

```
<configuration>
  <configSections>...</configSections>
  <appSettings/>
  <connectionStrings/>
  <system.web>
    <compilation debug="false" 
        targetFramework="4.0">
    ...
    </compilation>
  </system.web>
  ...
</configuration> 
```

# javascript - 车把 - 子串

> ID：10138518
> 
> 赞同：14
> 
> 时间：2012-04-13T09:38:48.383
> 
> 标签：javascript, templates, handlebars.js

我是[Handlebars](http://handlebarsjs.com/)模板系统的新手，这是我使用 Handlebars 开展的第一个项目。我创建了简单的模板：

```
<script id="article_list_template" type="text/x-handlebars-template">
    {{#each this}}
    <div class='article'>
    <a href='article.php?id={{id_news}}' data-article_id='{{id_news}}'>
        <h1>{{title}}</h1>
    </a>
        <p> {{{content}}} </p>
    <div style='clear: both;'> </div>
    </div>
    {{/each}}
</script> 
```

退货`content`时间很长。我希望它更短，例如 150 个字符。我试图使用 JavaScript`substring()`方法如下：

`<p> {{{content.substring(0,150)}}} </p>`

但这显然不起作用。你能给我一些提示如何处理这个问题吗？谢谢

编辑：好的，问题解决了：我已经在 PHP 中完成了，所以返回的内容现在有适当的长度：

```
foreach ($articles as $a) {
    $a->content = cut_text( $a->content, 30);
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-26T21:52:10.383

您将要在 javascript 中创建一个 Handlebars 助手来执行子字符串代码：

```
Handlebars.registerHelper('trimString', function(passedString) {
    var theString = passedString.substring(0,150);
    return new Handlebars.SafeString(theString)
}); 
```

然后，在您的模板中，您可以这样称呼它：

```
<p> {{{trimString content}}} </p> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-09-23T11:01:33.200

我使用值作为选项、起始值以及作为参数表单模板传递的结束值。尝试这个：

```
Handlebars.registerHelper('trimString', function(passedString, startstring, endstring) {
   var theString = passedString.substring( startstring, endstring );
   return new Handlebars.SafeString(theString)
}); 
```

在模板中：

```
<p>{{{trimString value 0 300}}}</p> 
```

它将打印值的前 300 个字符。希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-19T11:55:08.077

对于那些使用 EmberJS 的人，这是我对 substr 助手的解释：

```
Ember.Handlebars.registerHelper('substr', function(property, options) {

    var str = Ember.get(this, property);
    var opts = options.hash;

    var start = opts.start || 0;
    var len = opts.max;

    var out = str.substr(start, len);

    if (str.length > len)
        out += '...';

    return new Ember.Handlebars.SafeString(out);
}); 
```

使用示例：

```
{{substr description start=5 max=20}} 
```

或者

```
{{substr description max=20}} 
```

**编辑：** “绑定”助手甚至更好。

```
Ember.Handlebars.registerBoundHelper('substr', function(value, options) {

    var opts = options.hash;

    var start = opts.start || 0;
    var len = opts.max;

    var out = value.substr(start, len);

    if (value.length > len)
        out += '...';

    return new Ember.Handlebars.SafeString(out);
}); 
```

这也适用于嵌套属性：

```
{{substr view.product.description max=50}} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T15:26:56.240

我用字符串切割定义助手指示

```
Handlebars.registerHelper('trimS', function(passedString, start, length ){
var mlength = length,preS='',tailS='';
if(start>0 && passedString.length>3){
    var preS= '...';
    mlength = length -3;
} ;
if(passedString.length>(start + length )){
    tailS = '...';
    mlength = mlength -3;
};
var theString = preS + passedString.substr(start, mlength) + tailS;
return new Handlebars.SafeString(theString);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-29T10:01:10.753

是的，车把助手绝对是前进的方向；

**这是我的助手，它允许您指定和结束点 + 如果 string.length > end 也放置“...”。**

```
Handlebars.registerHelper('substring', function( string, start, end ) {

    var theString = string.substring( start ,end );

    // attach dot dot dot if string greater than suggested end point
    if( string.length > end ) {
      theString += '...';
    }

    return new Handlebars.SafeString(theString);
}); 
```

**模板内部：**

```
<p>{{{substring myString 0 100}}}</p> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-08T08:39:53.350

```
Handlebars.registerHelper('truncate', function(passedString, startstring, endstring) {
    if(passedString){
        if(!startstring) startstring=0;
        if(!endstring) endstring=30;
        var theString = passedString.substring( startstring, endstring );
        return new Handlebars.SafeString(theString+'...');
    }
});
```

只是对passedString的验证做了一点改进，startString和Endstring的默认值。我在截断字符串的末尾添加 '...' :)

只需使用 {{truncate your_text_variable 0 50}} 调用车把

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-21T12:39:22.053

我正在使用这个助手

```
Handlebars.registerHelper('truncate', (value, options) => {
  const opts = options.hash;
  const max = opts.max || '250';
  const out = value.substring(0, max);
  return new Handlebars.SafeString(value.length > max ? `${out}...` : out);
}); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-17T10:16:33.700

我已经用 PHP 解决了我的问题。我修改了 PHP 脚本，现在返回的内容有适当的长度。

```
foreach ($articles as $a) {
    $a->content = cut_text( $a->content, 30);
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-04-16T07:25:08.807

或者，您可以编写一个车把辅助函数来执行子字符串

# javascript - 使用 tinymce，当我从

> ID：10138525
> 
> 赞同：1
> 
> 时间：2012-04-13T09:39:33.320
> 
> 标签：javascript, jquery, css, tinymce, rte

如果我从 word doc 复制 + 粘贴，那很好，并且它会产生足够接近精确的副本。

如果我在 iframe 中显示内容（以防止 css 干扰），它会与在编辑器中的显示完全相同。

如果我这样做：

```
tinyMCE.execCommand("mceReplaceContent",false, $("#frameBody").contents().find("#txtBody").html()); 
```

它将它复制到 tinyMCE 窗口中，但格式有点不同。项目符号点是空心圆圈而不是常规圆圈，并且有相当多的额外间距。

知道如何解决这个问题吗？

我正在像这样创建我的 tinyMCE：

```
tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,iespell,inlinepopups,insertdatetime,searchreplace,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

        // Theme options
        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,code,|,insertdate,inserttime,|,forecolor,backcolor",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",

        // Skin options
        skin : "o2k7",
        skin_variant : "silver",
});

<textarea name='FishBody' style='width:919px; height:600px' id='txtFishBody'></textarea> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:15:30.200

我已经修复了它，事实证明这是拉取 html 的方式的问题。

本质上，当您保存此 html 时：

```
<div>
Hello
</div> 
```

你最终得到

```
<div>\r\nHello\r\n<div> 
```

我通过替换 \r\n 来反驳这一点，`<br/>`但似乎没有必要 - 额外的`<br>`标签使它感到困惑。我将其更改为`\r\n`用空字符串替换，所有问题都解决了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:46:36.363

像大多数 rte 一样的 tinymce 编辑器使用标准 css 作为其编辑器 iframe。这就是子弹看起来不同的原因。外观不同的另一个原因可能是清理功能删除了无效的 html 元素和属性（您可能希望仔细查看 tinymce 配置设置[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)和[valid_children](http://www.tinymce.com/wiki.php/Configuration%3avalid_children)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-23T19:13:14.837

你可以试试这个选项

**paste_retain_style_properties: all** --OR "color font-size" 无论你想包括什么

示例：复制粘贴具有其他选项的我的代码，以防万一

```
tinymce.init({
            selector: 'textarea',
            width: "100%",
            height : "250",
            encoding: "xml",
            menubar: false,
            statusbar: false,
            color_cols: "5",
            setup: function (ed) {
                ed.on('init', function () {
                    this.getDoc().body.style.fontSize = '10pt';
                    this.getDoc().body.style.fontFamily = 'Arial';
                });
            },
            theme: "modern",
            browser_spellcheck: true,
            plugins:
            [
                "table paste textcolor"
            ],
            paste_retain_style_properties: "all",
            toolbar1: "undo redo | bold italic underline strikethrough | fontsizeselect fontselect | alignleft aligncenter alignright alignjustify",
            toolbar2: "copy cut paste | bullist numlist outdent indent | forecolor backcolor | searchreplace | table"
        }); 
```

参考：[https ://www.tiny.cloud/docs/plugins/paste/](https://www.tiny.cloud/docs/plugins/paste/)

# perl - 如何使用 perl 在远程机器上运行命令？

> ID：10138531
> 
> 赞同：2
> 
> 时间：2012-04-13T09:39:51.233
> 
> 标签：perl

我已经下载了运行下面提到的 perl 脚本所需的所有模块：

```
use Net::SSH::Perl;

my $host = "172.16.170.116";
my $user = "HGamit";
my $password = "";

#-- set up a new connection
my $ssh = Net::SSH::Perl->new($host);
#-- authenticate
$ssh->login($user, $pass);
#-- execute the command
my($stdout, $stderr, $exit) = $ssh->cmd("perl C:/Monitor/ltp.pl C:/monitor"); 
```

但是报错：Can't connect to 172.16.170.116, port 22: No connection could be made because the target machine主动拒绝。在 C:/Perl/site/lib/Net/SSH/Perl.pm 第 206 行。然后我尝试了 telnet，但它不工作。

```
use warnings;
use Net::Telnet;

$telnet = new Net::Telnet ( Timeout=>2, Errmode=>'die');
$telnet->open('172.16.170.116');
$telnet->waitfor('/HGamit\s*/');
$telnet->print('admin');
$telnet->waitfor('/\s*/');
$telnet->print('Blue');

#$telnet->cmd('ver > C:\\log.txt');
$telnet->cmd('perl C:/Monitor/ltp.pl C:/monitor'); 
```

谁能提供一些解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:48:22.780

您可以使用 IO::Socket 编写客户端服务器程序。您还可以实现加密和用户身份验证。该模型使您可以控制发送命令并在完成执行时将数据返回给客户端。您可以通过修改服务器程序中继承的 PATH 变量来限制要在服务器上执行的命令数量，以增加安全性。如果您需要代码方面的帮助。我可以为您发布我的代码。

谢谢，

苏克比尔·迪隆

加泰克

# xcode - Objective-C中的多维数组迭代

> ID：10138534
> 
> 赞同：0
> 
> 时间：2012-04-13T09:40:01.527
> 
> 标签：xcode, multidimensional-array, iteration

我想了解如何在 2D 中使用 for-each 语句`NSMutableArray`。我的代码如下。它在第三个（最里面的）for 语句引发异常。例外是：

```
"Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFNumber count]: unrecognized selector sent to instance"
```

我的代码：

```
NSMutableArray* subTryingSet=[NSMutableArray arrayWithArray:[self genSetNumbers:arrRandoms withSize:4]];

for (NSMutableArray* oneRow in subTryingSet) {
    for (NSMutableArray* w in oneRow) {
        for (int i=0;i<w.count;i++) {
            NSLog(@"%d", [[w objectAtIndex:i] intValue]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:45:16.050

在第一次快速查看您的代码之后：

尝试改变这一点：

```
 NSLog(@"%d", [[w objectAtIndex:i] intValue]); 
```

和：

```
 NSLog(@"%i", [[w objectAtIndex:i] intValue]); 
```

**编辑**

> “它在第 3 个“for 语句”抛出异常，所以它不能去 slog”

嗯……你确定 oneRow 中的所有对象都是 NSMutableArray 吗？

尝试像这样检查：

```
for (NSMutableArray* oneRow in subTryingSet) {
  if ([oneRow.class isSubclassOfClass:[NSMutableArray class]]) {
      for (NSMutableArray* w in oneRow) {
        if ([w.class isSubclassOfClass:[NSMutableArray class]]) {
            for (int i=0;i<w.count;i++) {
                NSLog(@"%d", [[w objectAtIndex:i] intValue]);
            }
        }
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T17:24:10.023

您可以使用此自定义目标 c 方法进行迭代

```
-(void)loopMultArray:(NSArray*)a walk:(void(^)(id node,int index,int zindex))n{

    void(^callback)(id node,int index,int zindex) = Block_copy(n);

    NSMutableArray *l=[[[NSMutableArray alloc] initWithObjects:a,nil] autorelease];
    int c=1;
    //This first loop will loop until the count var is stable//
    for(int r=0;r<c;r++){
        //This loop will loop thru the child element list//
        for(int z=0;z<[[l objectAtIndex:r] count];z++){

            callback([[l objectAtIndex:r] objectAtIndex:z],z,r);

            if([[[l objectAtIndex:r] objectAtIndex:z] isKindOfClass:[NSArray class]]){
                [l addObject:[[l objectAtIndex:r] objectAtIndex:z]];
                c++;
            }//IF
        }//FOR
    }//FOR

    Block_release(callback);

} 
```

# asp.net - ASP.NET 的 HTML 编辑器

> ID：10138535
> 
> 赞同：0
> 
> 时间：2012-04-13T09:40:07.970
> 
> 标签：asp.net, html, text-editor

谁能推荐一个用于 ASP.NET 的 HTML 编辑器？

我不是在谈论 WYSIWYG 编辑器，而是像 Umbraco 或其他内容管理系统那样突出元素和属性的编辑器。

因此，当有人键入 HTML 时，它会突出显示某些项目以使其更具可读性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:44:03.460

语法高亮？我发现[CodeMirror](http://codemirror.net/)很棒。它转换一个文本区域

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:41:02.280

也许您应该尝试使用 html 编辑器。我在我的应用程序中使用它，它们就像一个魅力。

[Obout.Ajax.UI 控件 - HTML 编辑器 - 编辑器控件](http://www.obout.com/Obout.Ajax.UI/HTMLEditor/examples/default.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:43:44.897

如果有帮助，我会使用[MarkdownDeep吗？](http://www.toptensoftware.com/markdowndeep/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:49:10.793

ajaxToolkit:HtmlEditorExtender 最适合这个。

```
 <ajaxToolkit:HtmlEditorExtender ID="HtmlEditorExtender1" 
        TargetControlID="TextBox1" runat="server"/>
        <Toolbar> 
            <ajaxToolkit:Undo />
            <ajaxToolkit:Redo />
            <ajaxToolkit:Bold />
            <ajaxToolkit:Italic />
            <ajaxToolkit:CreateLink />
            <ajaxToolkit:UnLink />
            <ajaxToolkit:RemoveFormat />
            <ajaxToolkit:SelectAll />
            <ajaxToolkit:UnSelect />
            <ajaxToolkit:Delete />
            <ajaxToolkit:Cut />
            <ajaxToolkit:Copy />
            <ajaxToolkit:Paste />
        </Toolbar>
    </ajaxToolkit:HtmlEditorExtender> 
```

访问此处查看演示：[HtmlEditorExtender 演示](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditorExtender/HTMLEditorExtender.aspx)

# android - 如何避免在android中网络断开时应用程序没有响应

> ID：10138539
> 
> 赞同：0
> 
> 时间：2012-04-13T09:40:25.190
> 
> 标签：android

我创建登录页面。此登录页面从服务器数据库验证。如果网络可用意味着单击登录按钮表示它工作正常。如果我禁用网络然后单击登录按钮意味着它显示错误应用程序没有响应..如何使用我的代码避免此错误

```
 i try this code
          login.setOnClickListener(new View.OnClickListener()
    {

        public void onClick(View v)
        {
            name = username.getText().toString();
            pass = password.getText().toString();
            String Str_check2 = app_preferences.getString("checked", "no");
            if(Str_check2.equals("yes"))
            {
                SharedPreferences.Editor editor = app_preferences.edit();
                editor.putString("username", name);
                editor.putString("password", pass);
                 editor.commit();
            }
            if(name.equals("") || pass.equals(""))
            {
                 Toast.makeText(Main.this, "Please Enter Username and Password", Toast.LENGTH_LONG).show();
            }

            else

            try {
                httpclient = new DefaultHttpClient();
                httppost = new HttpPost("url/login.php");
                // Add your data
                nameValuePairs = new ArrayList<NameValuePair>(2);
               nameValuePairs.add(new BasicNameValuePair("UserEmail", name.trim()));
                nameValuePairs.add(new BasicNameValuePair("Password", pass.trim()));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                response = httpclient.execute(httppost);
                inputStream = response.getEntity().getContent();

                data = new byte[256];

                buffer = new StringBuffer();
                int len = 0;
                while (-1 != (len = inputStream.read(data)) )
                {
                    buffer.append(new String(data, 0, len));
                }

                inputStream.close();
            }

            catch (IOException e) {
                 System.out.println(e);

                 //alertDialog.cancel();

            }
            if(buffer.charAt(0)=='Y')
            {

                Intent intent=new Intent(getApplicationContext(),another.class);
                startActivity(intent);
            }
            else
            {
                 System.out.println("Invalid username and password")
            }         

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:47:58.933

首先，您不应该在主线程中执行网络任务，这看起来就像您在 OnClick 中执行的那样。

为避免连接挂起，您需要设置连接超时。为了方便使用 http 操作，我在 github 中整理了一个 http 库，您可以将此代码用作示例参考，也可以将其用作库

[https://github.com/nareshsvs/android-libraries](https://github.com/nareshsvs/android-libraries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:58:41.257

同意 Naresh 不要为您的每项任务使用主线程。使用`Service`或`AsyncTask`执行您长时间运行的网络任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:45:51.400

在这里添加一个空检查..

```
response = httpclient.execute(httppost);

    if(response != null){
    inputStream = response.getEntity().getContent();

                    data = new byte[256]; 
```

因为当服务器连接失败时`execute()`返回 null 并且您需要查看并确保它不为 null .. 就像 Naresh 说的那样，不要在 MainThtread 中进行服务器通信.. 请参阅[AsyncTasks](http://developer.android.com/reference/android/os/AsyncTask.html)这将派上用场..

# android - 安卓平板UI设计问题

> ID：10138541
> 
> 赞同：0
> 
> 时间：2012-04-13T09:40:32.487
> 
> 标签：android

我是 android 平板电脑开发的新手。关于我们需要针对的决议，我几乎没有问题。

1.  我们需要针对 Android 平板电脑定位哪些常见分辨率？
2.  我需要将所有图像放在项目工作区中的哪个文件夹下？

谢谢，吉姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:33:47.067

平板电脑有各种尺寸和屏幕密度 两个从尺寸角度来看很重要的桶。

```
layout-large 
layout-xlarge 
```

您还可以具有特定于屏幕尺寸的布局，例如

```
res/layout-sw600dp/main_activity.xml   # For 7” tablets (600dp wide and bigger)
res/layout-sw720dp/main_activity.xml   # For 10” tablets (720dp wide and bigger) 
```

屏幕密度是 mdpi 或 hdpi，但我没有看到很多应用程序根据屏幕尺寸具有不同的可绘制对象

# android - android中的WebView滚动问题？

> ID：10138547
> 
> 赞同：-1
> 
> 时间：2012-04-13T09:41:07.437
> 
> 标签：android, webview, scroll

我尝试了很多选项，但我的 webview 不会垂直滚动，因为它水平滚动很好。我在我的 android 应用程序中添加了 webview 以在应用程序中显示一些 Web 内容。内容只是文字。但它超过了 webview 的高度，所以我想为用户提供滚动它以观看下一页内容的设施。但是 webview 不会水平滚动。

这是 xml，我只是在其中加载 html 字符串。

```
<WebView 
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="200dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        /> 
```

请帮助我并提供最佳解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:53:25.523

文件显示多长时间？如果它只包含文本，那么文本被换行并因此在宽度上正确适配的概率是多少。所以，它根本不需要任何垂直滚动！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:17:12.877

@sanchitsingh

如果您在侧 Scrollview 中使用 webview，那么您在垂直滚动时遇到问题，因为 scrollview 垂直滚动并且 webview 也有自己的滚动条来水平和垂直滚动，并且当您在滚动视图中使用 webview 时，设备/操作系统无法识别要滚动的视图所以它不能滚动你的 webview

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:23:37.130

其实我错误地把`webview`里面的`scrollview`. 所以它停止垂直滚动。

# java - 如何运行 RCP Maven/Tycho 应用程序

> ID：10138548
> 
> 赞同：3
> 
> 时间：2012-04-13T09:41:07.943
> 
> 标签：java, maven, rcp, tycho

为了在 CI 服务器 (jenkins) 上运行我的应用程序，我正在尝试创建一个无头构建。

为了做到这一点，我遵循 Eclipse Con 教程进行了一些小的更改（使用 Indigo 而不是 Eclipse 4），可以在此处找到：[https ://github.com/jsievers/tycho-demo/tree/master/exercises](https://github.com/jsievers/tycho-demo/tree/master/exercises)

我能够完成第一部分（并不难，mvn clean install）但现在我得到了一个目标文件夹和一个名为我的项目的jar文件：mail-1.0.0-SNAPSHOT.jar 但我很很困惑，因为我无法运行它。

我试过`java -jar mail-1.0.0-SNAPSHOT.jar`了，这会产生以下失败：

> 没有主要清单属性，在 mail-1.0.0-SNAPSHOT.jar

在教程中没有进一步的建议，所以我不确定这一步的目的是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:40:12.253

看来，您尝试运行的文件只是一个 OSGi 包。

RCP 应用程序构建的最终工件应该是一个 ZIP 文件，而不仅仅是一个 JAR。如果您使用 tycho-demo，请尝试查看**tychodemo.product**子项目。在 mvn clean install 之后，您会在其**target/products**文件夹中找到一些 ZIP 文件，例如**tychodemo.product-linux.gtk.x86_64.zip 。**可执行文件与所有必要的依赖关系（即平台相关）打包在其中。

 **要将您的捆绑包包含到您的 Tycho RCP 产品中，只需将其添加到 pom.xml 中，就像使用**tychodemo.bundle 一样**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:49:42.163

我不确定您正在使用该演示代码的哪一部分，但我很确定在运行“mvn clean install”后，它的唯一部分将为您提供一个正常工作的 RCP 应用程序将是名为“Exercise_05_Solution "

从那里，您必须导航到位于 tychodemo.parent 中的 pom.xml 文件，然后在该 pom.xml 文件上运行“mvn clean install”。

Eclipse RCP 应用程序的构建输出将位于

```
.../tychodemo.repository/target/products/*.zip 
```

这些 zip 文件就像 Eclipse 一样工作......只需将它们解压缩到文件系统的任何位置，然后使用里面的可执行文件启动应用程序。

我没有用这个特定的例子尝试过这个，但是我在工作中从事的项目遵循了这个演示几乎完全使用的模式。

祝你好运！**

# iphone - iOS - 处理该单元格中的按钮事件时如何访问自定义单元格？

> ID：10138552
> 
> 赞同：0
> 
> 时间：2012-04-13T09:41:37.027
> 
> 标签：iphone, ios, xcode, cocoa

我有一个自定义单元格，在这个自定义单元格中我有一个按钮和一个标签：

```
#import <UIKit/UIKit.h>

@interface ListCell : UITableViewCell{

}
@property (nonatomic, retain) IBOutlet UIButton* buttonContent;
@property (nonatomic, retain) IBOutlet UILabel* detailContent;

@end 
```

当我处理按钮的点击事件时：

```
- (IBAction)expandListCell:(id)sender{
    UIButton *button = (UIButton *)sender;
    ListCell *cell = (ListCell *)button.superview;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    cell.detailContent.text = @"FALSE"; // It throw an exception   
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"listCell";
    ListCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];   
    cell.buttonContent.tag = indexPath.row;
    return cell;
} 
```

当我尝试从我的自定义单元格（ListCell）访问任何项目时，它会引发异常：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITableViewCellContentView detailContent]: unrecognized selector sent to instance 0x8887ca0' 
```

我认为我获得自定义单元格的方式是错误的。有谁知道如何正确获取它？
预先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T09:55:10.767

你确定你打电话给正确的班级吗？你确定你的按钮的超级视图类是 ListCell 类吗？

试着检查一下：

```
 // (...)
    ListCell *cell = (ListCell *)button.superview;
    if ([cell.class isSubclassOfClass:[ListCell class]]) {
        ///// just a check for indexPath: /////
        NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
        NSLog(@"current indexPath: %@", indexPath );
        ///////////// END CHECK ///////////////
        cell.detailContent.text = @"FALSE"; 
    }else{
        NSLog(@"NOT THE RIGHT CLASS!!!");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:54:10.780

好的，我明白了，抱歉没有正确回答您的问题，您可以做的只是在将其添加到单元格之前为您的标签视图分配一个 teg，然后在检索时使用

```
UILabel *name = (UILabel *)[cell viewWithTag:kLabelTag]; 
```

并设置标签的文本

# android - 如何在android中获取位置对象

> ID：10138553
> 
> 赞同：0
> 
> 时间：2012-04-13T09:41:37.150
> 
> 标签：android

嗨伙计们，我是 android 新手，在使用 LocationManager.GPS_PROVIDER 创建位置对象时我得到了空值。

这是我的 GPSDemoActivity ：

```
 import android.app.Activity;
 import android.content.Context;
 import android.location.Location;
 import android.location.LocationListener;
 import android.location.LocationManager;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.Toast;

public class GPSDemoActivity extends Activity {

    private static final long MINIMUM_DISTANCE = 1;
    private static final long MINIMUM_TIME = 1000;

    protected LocationManager locationManager;

    // private Button showlocationButton;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // showlocationButton = (Button) findViewById(R.id.btn_showlocation);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                MINIMUM_DISTANCE, MINIMUM_TIME, new MyLocationListener());
    }

    public void showLocation(View v) {
        Toast.makeText(this, "Clicked", Toast.LENGTH_LONG).show();
        Location location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);//here getting null.

        if (location != null) {
            String message = String.format(
                    "Current Location: \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude());
            Toast.makeText(this, message, Toast.LENGTH_LONG).show();
        }

    }

    private class MyLocationListener implements LocationListener {

        @Override
        public void onLocationChanged(Location location) {
            String message = String.format(
                    "Your Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude());
            Toast.makeText(GPSDemoActivity.this, message, Toast.LENGTH_LONG);
        }

        @Override
        public void onProviderDisabled(String provider) {

            Toast.makeText(GPSDemoActivity.this, "Provider disabled by the user. GPS turned off", Toast.LENGTH_LONG).show();

        }

        @Override
        public void onProviderEnabled(String provider) {

            Toast.makeText(GPSDemoActivity.this,
                    "Provider disabled by the user. GPS turned on",
                    Toast.LENGTH_LONG).show();

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {

            Toast.makeText(GPSDemoActivity.this,
                    "Provider status changed", Toast.LENGTH_LONG).show();

        }

    }
} 
```

在我的 xml 下方。主.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

   <Button
       android:id="@+id/btn_showlocation" 
       android:layout_height="wrap_content"
       android:layout_width="wrap_content"
       android:text="@string/btn_showlocation"
       android:layout_gravity="center"
       android:onClick="showLocation"
       />

</LinearLayout> 
```

这是我的 manifest.xml。我的清单.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.gps"
    android:versionCode="1"
    android:versionName="1.0" >

   <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".GPSDemoActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:45:46.797

locationManager.getLastKnownLocation 仅当您能够至少检测一次位置时才返回有效值。

您确定在您的设备上启用了使用 gps 进行位置搜索，只有这样位置管理器才能检索位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:56:19.733

@Bhaskar - 在建筑物外测试应用程序，因为 gps 不会在建筑物内定位。你的代码没问题。

# iphone - 时间未正确返回

> ID：10138557
> 
> 赞同：0
> 
> 时间：2012-04-13T09:41:51.577
> 
> 标签：iphone, ios5, nsdate, nsdateformatter

我必须将字符串转换为日期。我正在使用日期格式化程序来做同样的事情。

**代码：**

```
NSString *stringDate = @"2010-06-21";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

[dateFormatter setDateFormat:@"yyyy-MM-dd"];

NSDate *theDate = [dateFormatter dateFromString:stringDate]; 
```

这给了我上**一个日期**，而不是我传递的字符串日期。所以我尝试使用时区。

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]; 
```

这给了我正确的日期但错误的时间。

我只想要**日期**。如何在结果中获得**正确的日期**和**截断时间**。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:48:58.590

尝试这个 -

```
dateOnlyFormatter = [[NSDateFormatter alloc] init];
[dateOnlyFormatter setDateFormat:@"yyyy-MM-dd"];
[dateOnlyFormatter setLocale:enUSPOSIXLocale];
[dateOnlyFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]]; 
```

显然，您要求的任何 NSDate 都将具有时间元素-您需要像这样使用日期格式化程序-

```
NSString *myDateAsString = [dateOnlyFormatter stringFromDate:theDate]; 
```

...然后您可以将字符串反馈给 dateFormatter 以获得零时间的 NSDate -

```
NSDate *myNewDate = [dateOnlyFormatter dateFromString:myDateAsString]; 
```

# wordpress - 我可以使用 wordpress 创建一个“每个人都可以发布”风格的网站吗？

> ID：10138558
> 
> 赞同：0
> 
> 时间：2012-04-13T09:41:54.913
> 
> 标签：wordpress, blogs

我和一个朋友想出了一个非常简单的网站创意。本质上，我们希望人们能够访问该站点并快速发布一段文本，而无需注册或登录等。就像每个人都可以贡献的博客一样。

我注意到 wordpress 允许您在自己的服务器上安装他们的软件，他们只提供传统的博客，还是很容易设置这样的东西？

我可以自己编写服务器读/写的东西，但我对自己设计漂亮网站的能力没有信心，所以最好只使用模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:51:11.783

您需要让人们注册，但您可以将默认帐户设置为贡献者或编辑或类似的东西。听起来你可能会更好地使用一些 wiki 软件来代替？

# java - 如何将另一个测试源文件夹添加到 Maven 并将其编译到单独的文件夹中？

> ID：10138559
> 
> 赞同：44
> 
> 时间：2012-04-13T09:42:02.673
> 
> 标签：java, maven, maven-surefire-plugin

我有`src/test/java`我们的单元测试的默认文件夹。一个单独的文件夹`src/integration/java`可用于集成测试。

我将其配置为`maven-surefire-plugin`在各自的阶段执行单元/集成测试。当编译的类位于正确的目录中时，这非常有用。不幸的是，Maven 只支持一个测试源文件夹和一个测试输出文件夹。

使用 mavens build-helper 插件，我可以添加另一个 test-source 文件夹，但编译后的类将生成到`test-classes`，但我想将类 `src/integration/java`从`target/integration-test-classes`. 这可能吗？

```
src/test/java > target/test-classes
src/integration/java > target/integration-test-classes 
```

PS：我不喜欢这个排除/包含在包基础解决方案中（`**/it/**`从默认测试阶段排除所有文件，并`**/unit/**`从集成阶段排除所有文件。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-13T18:01:15.330

根据您编写的内容，听起来您没有正确命名集成测试，并且您没有使用[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/)进行集成测试。根据[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html#includes)的约定，您应该将集成测试命名为`*IT.java`. 如果您适当地命名了集成测试，您可以使用或多或少的配置来处理它，如下所示：

```
<project ...>
  [...]
  <build>
    [...]
     <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.9.1</version>
        <executions>
          <execution>
            <id>add-test-source</id>
            <phase>generate-test-sources</phase>
            <goals>
              <goal>add-test-source</goal>
            </goals>
            <configuration>
              <sources>
                <source>src/integration/java</source>
              </sources>
            </configuration>
          </execution>
        </executions>
      </plugin>
      [...]
  </build>
  [...]
</project> 
```

有了上面的内容，就可以在同一个模块中进行集成测试。但这不会解决将已编译的集成测试类放入单独的文件夹的想法。

有时最好有一个单独的集成测试模块，它只包含集成测试（这会导致多模块构建）。如果您想离开 Maven 的约定，您可以尝试配置 maven-compiler-plugin 以使用不同的输出路径（例如。`target/integration-tests/classes`），这认为不会真正起作用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-12-01T18:00:33.590

如果您只想更改单元测试源文件夹（而不是添加一个额外的），只需更改`testSourceDirectory`元素：

```
<build>
    <testSourceDirectory>${project.basedir}/src/test/groovy</testSourceDirectory> 
```

如果您的所有单元测试都是用 groovy 编写的，这将非常有用。（但您还需要配置 maven 来编译您的 groovy 代码 - 请参阅[groovy-eclipse-maven-plugin](https://github.com/groovy/groovy-eclipse/wiki/Groovy-Eclipse-Maven-plugin)或[build-helper-maven-plugin](https://confluence.atlassian.com/display/CLOVER/Compiling+Groovy+with+Groovy+Eclipse+Plugin)。）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-13T10:04:08.583

抱歉，即使考虑进行一些黑客攻击，也无法做到这一点。这里的概念是编译类只有一个目标目录，编译测试类只有一个目标目录（即使是单个`<build>`标签也会暴露这一点）。老实说，我真的不认为 Maven 应该有可能。Maven 通过使用精心设计的模块来促进应用程序的直接、干净和易读的设计。

我认为您真正想做的实际上是创建集成测试模块。顺便说一句，这是常见的做法。到目前为止，我一直有单独的集成测试模块，从来没有遇到过任何问题。您应该依赖于运行这些测试所需的所有模块。您甚至可以通过`<type>test-jar</type>`在依赖声明中使用来依赖其他模块的测试类，如下所述：

[http://maven.apache.org/guides/mini/guide-attached-tests.html](http://maven.apache.org/guides/mini/guide-attached-tests.html)

但是，我不喜欢这种方法，并且通常更喜欢使用带有测试支持东西的单独模块，例如 JUnit 测试用例的基类等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-14T15:06:15.353

我无法创建多个测试源文件并让代码在 Eclipse 中运行。我确实理解为什么一个人可能需要多个测试源文件夹的原因有很多，包括以下内容

*   测试应该与正在测试的代码在同一个包中
*   任何非平凡的应用程序都应该包含多种类型的自动化测试，包括单元测试、集成测试、外部资源测试、服务、库等。
*   我们经常继承运行时间很长的代码库，其中混合了需要清理的好和坏/危险的测试。如果我们可以保留这些测试，同时我们可以剔除它们并建立我们新的自动化测试基础，同时仍然能够单独运行旧测试或新测试（作为单独的测试和运行所有测试的能力），那就太好了。每个类别的测试一次）
*   不同类型的测试需要在不同的时间运行（例如代码签入、夜间构建、长时间运行的测试等），具体取决于运行测试所需的资源。通过命名约定来管理这个在大型项目中变得非常混乱
*   测试需要与生产代码分开（即我们不希望将测试类部署为生产版本的一部分）。
*   测试通常需要额外的代码来自动化那些不应该部署到生产环境中的流程（例如，实现非平凡流程以获取资源的类，例如从服务或数据库中的数据构建复杂的数据结构）

我的解决方案是创建一个新项目，然后根据此处编写的内容在新项目中创建多个源文件夹（不是测试源文件夹）：[https ://www.baeldung.com/maven-project-multiple-src -目录](https://www.baeldung.com/maven-project-multiple-src-directories)。

这满足了上面列出的所有要求。

我热切地等待你的叮当，但请让我们知道这方面的不利之处。证明我是错的 ;）

# asp.net-mvc - MVC 中的 Json() 自动将日期时间转换为 UTC

> ID：10138562
> 
> 赞同：0
> 
> 时间：2012-04-13T09:42:33.197
> 
> 标签：asp.net-mvc, jsonserializer

我已经将 UTC 时间存储在 DateTime 对象中。

当我使用 Json() 序列化程序发送它时，这些日期再次转换为 UTC。我不希望这种情况发生。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:40:13.320

检查`Kind`您的对象的属性`DateTime`，也许它们没有被标记为 UTC，然后它们再次被转换。

# java - 退出时是否可以收集有关正在运行的 .jar 文件的信息？

> ID：10138564
> 
> 赞同：0
> 
> 时间：2012-04-13T09:42:38.973
> 
> 标签：java, application-shutdown, shutdown-hook

退出时是否可以收集正在运行的 .jar 文件中所有现有变量的信息？我在各种服务器的 linux 命令行上运行一个应用程序，当 jar 停止在 10% 的系统上运行时，我尝试调试一个问题。

在 Android 中，有一个调用的方法`onDestroy()`可以被覆盖，以便在应用退出时执行任务。在本机 Java 应用程序中是否有类似的可能？即使是这样，我怎么能收集数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:03:42.423

> 在Android中，有一个方法叫`onDestroy()`..

添加[关机钩子](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)。

# javascript - 如何缩短 jquery 语法 if-else 语句？

> ID：10138574
> 
> 赞同：11
> 
> 时间：2012-04-13T09:43:20.763
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用很多这些：

```
$text = $menu.jqmData('menu-text') ? 
           $menu.jqmData('menu-text') : self.options.menuTxt; 
```

它已经是“速记”语法，但我想知道，是否有可能进一步减少上述行。一定有比检查*$menu.jqmData('menu-text')*然后再写整个东西更好的方法。没有吗？

感谢帮助！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-13T09:44:41.233

更短的方法是使用双管。如果第一个是 ，它基本上使用第二个值`falsy`。

```
$text = $menu.jqmData('menu-text') || self.options.menuTxt; 
```

您也可以在同一行中多次使用它。假设您有一个变量`uberMenuTxt`优先于其他两个变量，您可以这样做。

```
$text = uberMenuTxt || $menu.jqmData('menu-text') || self.options.menuTxt; 
```

它基本上会在每次当前值出现时继续运行，`falsy`并且会在第一次出现时停止。

# c# - 人与便士之间的金钱分数划分？

> ID：10138579
> 
> 赞同：1
> 
> 时间：2012-04-13T09:43:32.343
> 
> 标签：c#, math, currency

我有一个 amount `$9558.99`，我需要分配给 4 个人： 40%, 40%, 10%, 10% 。（这只是问题出现的一个例子）

当我计算分数时，我得到以下结果，它们都包含一分钱的分数，这不好，因为显然我不能给一个人半分钱。

```
40%  $3823.5960
40%  $3823.5960
10%  $955.8990
10%  $955.8990
SUM  $9558.99 
```

如果我四舍五入，我会得到一分钱：

```
40%  $3823.60
40%  $3823.60
10%  $955.90
10%  $955.90
SUM  $9559.00 <-- 1 penny over 
```

如果我四舍五入，我会少得到 3 便士（同样没有惊喜）：

```
40%  $3823.59
40%  $3823.59
10%  $955.89
10%  $955.89
SUM  $9558.96 <-- 3 pennies under 
```

所以我的问题是，根据百分比公平分配金额的正确方法是什么？

编辑：这本身可能不是一个编程问题，但我认为它无论如何都与程序员有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:15:22.690

四舍五入，并随机减去多余的一分钱。

要随机减去，请选择`n`随机人，其中`n`= 剩余便士的数量。

直观地说，我相信在这种情况下 n 不会大于 3。

（或者，向下舍入并随机分配剩余的便士）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:37:39.570

无论您使用哪种舍入方法，都会有人失败。

这是一个替代建议

A 人获得总数的 40% - 四舍五入到最接近的一分钱。
B 人得到剩下的 40/60 - 四舍五入到最接近的便士。
人 C 得到剩下的 10/20 - 四舍五入到最接近的便士。
D 人得到了剩下的东西。

A 获得 3823.60 美元
B 获得 3828.59 美元
C 获得 955.90 美元
D 获得 955.90 美元

# c++ - 将windows线程中编写的代码转换为wxwidgets线程

> ID：10138582
> 
> 赞同：-1
> 
> 时间：2012-04-13T09:43:42.717
> 
> 标签：c++, multithreading, winapi, thread-safety, wxwidgets

我有使用多线程的代码但是它是通过使用 windows 我想转换 wxwdigets 中的代码我已经尝试了很长时间但没有成功最终我删除了我所做的并想从头开始

```
#include "windows.h"
#include <iostream>
#include <stdio.h>

DWORD WINAPI ThreadFn(LPVOID vpParam);

int main() {
    using namespace std;

    // Create the thread and pass in the function pointer and counter
    unsigned int uiCounter = 0;
    DWORD qThreadID;
    HANDLE hThread = CreateThread(0, 0, ThreadFn, &uiCounter, 0, &qThreadID);

    // Loop until the user enters 'q'
    char cChar = ' ';
    while (cChar != 'q') {
        cout << uiCounter << endl;
        cChar = (char)getchar();
    }

    // Close the handle to the thread
    CloseHandle(hThread);

    return 0;
}

DWORD WINAPI ThreadFn(LPVOID vpParam)
{
    unsigned int& uirCounter = *((unsigned int*)vpParam);
    // Increment up to the maximum value
    while (uirCounter < 0xFFFFFFFF) {
        ++uirCounter;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:47:03.680

您发布的代码存在一些严重问题。在你做更多事情之前，它们需要被修复。

1.  工作线程是一个“忙循环”。它将消耗所有可用的 CPU 周期并使其他任何事情（例如运行 GUI）变得缓慢且无响应。我建议在 while 循环中添加对 Sleep() 的调用，作为快速修复。

2.  主线程和工作线程都尝试同时访问计数器变量。你运行这个足够长的时间，它会崩溃。您应该使用互斥锁或等效物保护计数器。

让我们稍微重新设计一下，然后移植到 wxWidgets。我们会需要

A. 一个工作线程，它每秒（大约）将计数器递增 10 次（大约）并在其余时间休眠，以便我们可以更新 GUI

B. 每秒检查和显示计数器值两次的 GUI 线程

C. GUI 线程还将监视键盘并在按下“q”时停止计数器。

D. 我们将使用[wxThreadHelper](http://docs.wxwidgets.org/2.9.4/classwx_thread_helper.html)类来管理我们的线程。

关键实现细节如下

定义主框架，包括所有 wxThreadHelper 的优点

```
class MyFrame : public wxFrame, public wxThreadHelper
{
public:
    MyFrame(const wxString& title);

    // worker thread entry point
    wxThread::ExitCode Entry();

    // keyboard monitor
    void OnChar(wxKeyEvent& event );

    // display updater
    void OnTimer(wxTimerEvent& event);

private:

    // the counter
    unsigned int mCounter;

    // protect the counter from access by both threads at once
    wxCriticalSection mCS;

    // display update timer
    wxTimer * mTimer;

    DECLARE_EVENT_TABLE()
}; 
```

注意键盘和计时器事件

```
BEGIN_EVENT_TABLE(MyFrame, wxFrame)
    EVT_CHAR(MyFrame::OnChar)
    EVT_TIMER(-1,MyFrame::OnTimer)
END_EVENT_TABLE() 
```

构建框架

```
MyFrame::MyFrame(const wxString& title)
       : wxFrame(NULL, wxID_ANY, title)
       , mCounter( 0 )
{
    // set the frame icon
    SetIcon(wxICON(sample));

    CreateStatusBar(2);
    SetStatusText("Welcome to Asynchronous Counter!");

    // Create thread and start it going

    CreateThread();
    GetThread()->Run();

   // Create update timer and start it going

    mTimer = new wxTimer(this);
    mTimer->Start(500);
} 
```

工作线程每秒递增计数器 10 次

```
 wxThread::ExitCode MyFrame::Entry()
 {
     // loop, so long as we haven't been asked to quit
    while ( ! GetThread()->TestDestroy()) {
        {
            // increment counter, to a maximum value
             wxCriticalSectionLocker lock( mCS );
             if( mCounter >= 0xFFFFFFFF )
                 break;
            ++mCounter;
        }

        // Let other things happen for 1/10 second
        Sleep(100);

    }

    // Counter is finished, or we have been asked to stop
    return (wxThread::ExitCode)0;

 } 
```

监控键盘以获取退出请求

```
 void MyFrame::OnChar(wxKeyEvent& event )
    {
        event.Skip();
        if( event.GetKeyCode() == (int) 'q' )
            GetThread()->Delete();
    } 
```

定时器触发时更新显示

```
void MyFrame::OnTimer(wxTimerEvent& )
{
    unsigned int current_counter_value;
    {
         wxCriticalSectionLocker lock( mCS );
        current_counter_value = mCounter;
    }
    SetStatusText(wxString::Format("Counter = %d",current_counter_value));
} 
```

# css - 用于@import 的 SASS/SCSS 自定义 css 表

> ID：10138584
> 
> 赞同：0
> 
> 时间：2012-04-13T09:43:49.403
> 
> 标签：css, ruby, compass-sass, sass

我需要做的就是有一个目录，其中包含我的自定义重置表和其他用于导入的 sass 文件。

我一直在玩，我无法获得指南针来阅读我的自定义表格。

1) 我在哪里放置我的自定义 css 表以进行导入？2）我如何@import它们

（我正在使用 sass 缩进，但我怀疑这会有所不同，）（我对 ruby​​ 知之甚少，我只是将它用于指南针）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:27:32.913

查看[Sass 参考中的 @import 部分](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#import)。

您可以在不明确告知文件扩展名的情况下导入 Sass 文件：

```
@import "file"; /*will import file.scss or file.sass. Anyway you could as well use @import "file.scss" or @import "file.sass*/ 
```

要导入 CSS，请提供其扩展名。

```
@import "file.css"; /*will import file.css" 
```

在参考文献中有更多区分它们的方法，但这些是最常用的。

您可以将文件放在您想要的位置，但写入相对于当前目录的路径（您要导入的文件所在的目录）。

# ios - 如何使用 MPMoviePlayer for IOS 更新自定义控制栏？

> ID：10138586
> 
> 赞同：1
> 
> 时间：2012-04-13T09:43:55.850
> 
> 标签：ios, mpmovieplayercontroller

我正在使用 MPMoviePlayer 开发 iOS 应用程序，我使用自定义控件（播放、暂停、停止、搜索...）问题是实时更新我的​​进度时间栏...是否有更新通知？ ? 我想调用一个计时器，但它不会通过苹果的认可......一些想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:00:58.920

只需使用计时器 - Apple 不会拒绝您的应用，因为您正在使用计时器轮询属性。我建议你使用 0.5 秒的延迟。

您也可以尝试 KVO，但 AFAIK`currentPlaybackTime`不符合键值。

# c# - 如何通过 XAML 设置 DataGrid 的 BindingSource？

> ID：10138590
> 
> 赞同：0
> 
> 时间：2012-04-13T09:44:08.937
> 
> 标签：c#, wpf, xaml, datagrid

我在我的用户控件中使用绑定到 List 属性的 DataGrid：

```
<DataGrid x:Name="dataGrid" .... 
      ItemsSource="{Binding ItemSorce, ElementName=UserControl}" 
                            ....> 
```

我的问题是每次更改源时都需要更新它。

我让用户控件实现 INotifyPropertyChanged 并引发 PropertyChanged 事件，但 DataGrid 原始内容保持不变。

我已经读过要更改 DataGrid，我应该在 ItemSorce 和绑定之间设置 BindingSource，但是我看到的所有示例都是通过 c# 源代码执行此操作的。

如何通过 xaml 设置 BindingSource，这是同步 DataGrid 和 ItemSorce 的最佳方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:56:56.527

使用 a`ObservableCollection<>`而不是 a `List<>`，因为它是为绑定而设计的。

# java - 如何在android中获得Web服务的所有权限？

> ID：10138595
> 
> 赞同：1
> 
> 时间：2012-04-13T09:44:20.020
> 
> 标签：java, php, android, mysql

我已经使用`java, php(backend) and mysql(database)`. 我已将后端`php`代码和数据库放在`Linux`托管服务器上。我的问题是我只能从数据库中读取数据，即我的应用程序可以从服务器获取数据，但它无法对获取的数据进行任何更改，并且当我使用服务器运行时出现错误，但是当我将数据库和代码放在本地系统中时，它可以在本地主机上完美运行，但是当放置在服务器中时，它只能读取数据而不能读取`insert, update or delete`数据。我已经为服务器中的数据库授予了完全权限。任何人都可以在这方面帮助我吗？我认为服务器不接受来自移动设备等外来者的请求。所以我的问题是

```
what do we need to do such that the server accepts requests from mobile side? 
```

PS：我已经为服务器中的数据库授予了完全权限，并且我在 android manifest 文件中添加了 Internet 权限。

@Lie Ryan：根据您的要求，这是我连接到服务器的代码：

```
 protected List<List<String>> callWebServer(String queryString, String statement){

    List<List<String>> stringList = null;
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("query", queryString));
    nameValuePairs.add(new BasicNameValuePair("statement", statement));

    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(WEB_SERVICE_URL);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        String responseBody = httpclient.execute(httppost,responseHandler);
        JSONObject json = new JSONObject(responseBody);

        if(statement.equals(DB_SELECT_STATEMENT) || statement.equals(DB_INSERT_STATEMENT)){

            List<String> queryStrings = null;
            // parsing query 
            if(statement.equals(DB_SELECT_STATEMENT)){
                queryStrings = splitQuery(queryString);

            JSONArray jArray = json.getJSONArray("output");

            if(jArray.length() > 0)
                stringList = new ArrayList<List<String>>();

            for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);

                String rowData = json_data.getString("rowData");
                if(rowData.equals("nothing")){
                //  Toast.makeText(getBaseContext(), "No record found", Toast.LENGTH_LONG).show();
                }else{

                    JSONObject getClassNameObject = new JSONObject(rowData);
                    List<String> tempStringList = new ArrayList<String>();

                    for(String valueStr:queryStrings){
                        if(valueStr.contains(".")) valueStr = valueStr.split("\\.")[1];
                        tempStringList.add(getClassNameObject.getString(valueStr));
                    }

                    stringList.add(tempStringList);
                }
            }
            }else{
                JSONArray jArray = json.getJSONArray("output");
                stringList = new ArrayList<List<String>>();
                JSONObject json_data = jArray.getJSONObject(0);

                stringList.add(getList("mn", json_data.getString("rowData")));

            }
        }

        //Toast.makeText(getBaseContext(), "Event Added Successfully", Toast.LENGTH_LONG).show();
    }catch(ArrayIndexOutOfBoundsException e){

    }catch(Exception e){

        Log.e("log_tag", "Error in http connection:"+e.toString());
    } 
```

处理请求的php代码是：

```
 <?php
include "connect.php";

if($_POST["statement"] == "select"){

    $booleanRow = true;
    // for select statements
    $db_output = mysql_query($_POST["query"]));
    while($row=mysql_fetch_array($db_output, MYSQL_ASSOC)){
        $output[] = array('rowData'=>$row);
        $booleanRow = false;            
    }       

    if($booleanRow){
        $row = "nothing";
        $output[] = array('rowData'=>$row);
    }

    print(json_encode(array('output'=>$output)));
}else{

    // for insert, update and delete       
    mysql_query($_POST["query"]);   

    $row = mysql_insert_id();       
    $output[] = array('rowData'=>$row);
    print(json_encode(array('output'=>$output)));
}

 mysql_close($link);
  ?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:36:23.113

要允许应用程序打开网络套接字，您需要在您的 android 清单文件 (AndroidManifest.xml) 中设置“android.permission.INTERNET”权限：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

有关更多权限的列表，请参阅[Manifest.Permission](http://developer.android.com/reference/android/Manifest.permission.html)类。

# android - Android应用程序中VideoView中的RTSP流

> ID：10138603
> 
> 赞同：4
> 
> 时间：2012-04-13T09:44:56.673
> 
> 标签：android, video, streaming, rtsp, playback

我正在尝试编写一个非常简单的应用程序，它只是尝试播放由 RTSP 服务器流式传输的视频。我在某处读到 VideoView 组件能够处理 RTSP 流。所以我用以下方式编写了代码。

```
vv = (VideoView) findViewById(R.id.videoView1);
    mc = new MediaController(getApplicationContext());
    vv.setVideoURI(Uri.parse(url));
    vv.setMediaController(mc);
    vv.requestFocus();

    vv.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {
            vv.start();

        }
    }); 
```

URL 字符串的格式如下 rtsp://192.168.1.136:8554/mercykilling.mkv

我的问题是我不断收到如下错误

V/MediaPlayer(16501): 收到消息 msg=100, ext 1=1, ext2=-18

任何人都可以就这个话题给出任何指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:58:04.713

以前的[常见问题](https://stackoverflow.com/questions/4898774/how-to-play-rtsp-url-in-android)

以前的[背景](http://boardreader.com/thread/Android_2_3_4_0_rtsp_video_streaming_err_oy3hwX5mt6u.html)

一般评论 - RTSP / RTP 支持包含大量底层编码和规范，用于在数据包内打包媒体轨道，我不确定标准的 Android libStageFright 库是否真的支持它的所有排列。

我查看了 API / 媒体 / 视频下 sdk 中的 ICS 示例...

ApiDemos\src\com\example\android\apis\media\MediaPlayerDemo_Video.java

看看你的 SDK 和上面示例中的注释......

```
 case STREAM_VIDEO:
            /*
             * TODO: Set path variable to progressive streamable mp4 or
             * 3gpp format URL. Http protocol should be used.
             * Mediaplayer can only play "progressive streamable
             * contents" which basically means: 1\. the movie atom has to
             * precede all the media data atoms. 2\. The clip has to be
             * reasonably interleaved.
             * 
             */ 
```

这些评论**不**支持 android 4.0 mediaPlayer 将播放 RTSP 流的想法。

如果您想测试通用 RTSP 流，我建议您从 Youtube 获取一个提要并尝试播放格式 = 1 流的 URL，这将是 RTSP 协议。[这里的](https://stackoverflow.com/questions/8716146/rtsp-youtube-link)例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:21:36.650

mkv 仅支持 4.0+ 版本 [看看](http://developer.android.com/guide/appendix/media-formats.html)

始终牢记的一件事是，要支持 rtsp 流，您必须启动 rtsp 服务器。否则，您将无法启动该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-24T22:04:10.470

可以使用库@http: [//net7mma.codeplex.com/](http://net7mma.codeplex.com/)（我是作者）

它可以提供一种简单的方法来允许在 Android 中播放`Rtsp`或播放`Rtp`媒体。

# php - 如何忽略php中的重定向错误

> ID：10138604
> 
> 赞同：0
> 
> 时间：2012-04-13T09:44:57.320
> 
> 标签：php

我在 php 中收到了这个警告：

```
Cannot modify header information - headers already sent by (output started at 
```

当我分别安装 mysql、apache 和 php 时，但是当我使用 Wamp 时，警告不存在并且页面会优雅地重定向。

我已经尝试将错误报告设置为仅显示错误而不显示警告，发生的情况是警告没有显示，但页面也没有重定向。

我知道这已经被认为是不好的做法，但是我的代码库中有很多这样的代码，修改它们都可能会给代码带来新的错误。有什么办法可以完全忽略 php 中的这个警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:54:57.660

避免（而不是忽略）这个问题的经典方法是使用[输出缓冲](http://php.net/manual/en/ref.outcontrol.php)、ob_start() 和 ob_flush()。在任何输出之前开始缓冲，并显式地完成刷新，或者它可以自动完成。这会捕获任何输出而不是打印它，因此输出的任何标题都在任何可见内容之前完成。

从错误消息中的文件名修复输出的错误是解决此问题的最佳方法。`?>`在不需要时从文件中删除关闭的 ' ' 可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:47:03.557

这是一种可怕的做法，但只是设置

```
error_reporting(0); 
```

在脚本的开头。否则在 php.ini 中设置

```
display_errors = Off 
```

编辑 - 可能你在重定向之前输出了一些东西。我曾经花了三天时间对此进行调试，原因有时是文件末尾的空格或您在重定向之前将一些 HTML 输出到浏览器的事实。
我通常从不关闭 php 标签以避免这种情况

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T09:50:40.030

即使你没有显示你的错误，你的应用程序也不会工作。这是因为就像错误所说的标头已经发送。这意味着以下内容：浏览器在服务器上请求您的 php 文件。然后服务器执行此操作并将生成的 html 发回。这个错误告诉你，在你已经发送了你的 php 文件的结果之后，你正在向浏览器发送一些东西。所以我建议你尝试修复你得到的错误，而不是不显示它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T09:51:21.880

您不能“忽略”此警告**并**重定向。警告说得很清楚：

> 无法发送标题！标头已经通过输出发送！

这意味着标头（`Location`标头无法发送，因为输出已经发送。（标头只能在**任何和所有**输出之前发送）。

请**[RTM](https://stackoverflow.com/questions/7049303/show-progress-for-php-long-script)**，您***需要***修复您的**错误**，而不是**忽略**它们。

* * *

该错误是由您在调用函数之前发送某种输出引起的`header()`，其原因可能有很多，当意外时，直接怀疑是某个文件开头或结尾的空格。

```
 <?php //Note the space before the opening tag!
header("Location: this-will-fail.html");
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T09:54:19.610

请注意，此错误准确地指明了您在代码中的哪个位置开始向浏览器输出数据（请参阅`output started at ...1`，查找尾随空格 \r、\n、制表符和空格）。理论上，关闭错误报告不会导致页面重定向，因为标头已经发送，因此无法更改或添加。

如果您需要使用已发送的数据进行重定向，您应该这样做：

```
if ( headers_sent() )    // Check if the headers were already sent
{
    echo( "<script>document.location.href='$url';</script>" );  // Use client side redirect
    die();  // Stop here
}
else
{
    header( "Location: $url" );  // Use server side redirect
} 
```

但最好的办法是找出输出从哪里开始并修复它（如果可能的话）。

# php - firefox11中的2个fckeditor实例

> ID：10138609
> 
> 赞同：0
> 
> 时间：2012-04-13T09:45:17.270
> 
> 标签：php, firefox, fckeditor

在我的管理面板中，我有 2 个 fckeditor (2.6.4) 实例，但在 ff11 中，第二个实例不可见。在其他浏览器（包括ff10）没有这个问题。

```
$oFCKeditor = new FCKeditor('ps_short_description') ;
$oFCKeditor->Width = '600';
$oFCKeditor->Height = '300';
$oFCKeditor->BrowserPath = SHOP_WWW_PATH.'/upload/fck_files';
$oFCKeditor->Value = "";
$oFCKeditor->Create() ; 

$oFCKeditor = new FCKeditor('ps_description') ;
$oFCKeditor->Width = '600';
$oFCKeditor->Height = '500';
$oFCKeditor->BrowserPath = SHOP_WWW_PATH.'/upload/fck_files';
$oFCKeditor->Value = "";
$oFCKeditor->Create() ; 
```

ff11 和 ff9 中的 HTML 代码是相同的（Firebug）。

如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:40:50.203

此时，最简单的做法可能是等待 11 天，直到 Firefox 12 发布。此错误已在 Firefox 12 中修复。

# jquery - 如何阻止我的 jQuery Infinite Carousel 中的最后一个图像消失？

> ID：10138613
> 
> 赞同：0
> 
> 时间：2012-04-13T09:45:31.123
> 
> 标签：jquery, slider, slideshow, carousel, infinite-carousel

我正在使用这个[jQuery Infinite Carousel](http://code.google.com/p/jquery-infinite-carousel/)，但与演示的方式略有不同，您可以在“客户成功案例”标题下查看我的[用法](http://uk.proactis.ed-test.co.uk/customers.aspx)。

正如您将看到的，我已将轮播居中，并允许在轮播滚动时之前的图像仍然可见。当轮播第一次加载时，序列中的最后一张图像不会加载，因此第一张图像的左侧有一个空白区域。一旦轮播返回到第一张图像，最后一张图像也会短暂消失。

我自己尝试过多次修复这个问题，但是我缺乏 jQuery 知识，脚本只是停止响应，有人知道我如何获取序列中的最后一张图像，以显示轮播何时加载，而不是在到达开头时消失再次？谢谢。

这是 jQuery 脚本：

```
 /**
 * @author Stéphane Roucheray 
 * @extends jquery
 */

jQuery.fn.carousel = function(previous, next, options){
    var sliderList = jQuery(this).children()[0];

    if (sliderList) {
        var increment = jQuery(sliderList).children().outerWidth("true"),
        elmnts = jQuery(sliderList).children(),
        numElmts = elmnts.length,
        sizeFirstElmnt = increment,
        shownInViewport = Math.round(jQuery(this).width() / sizeFirstElmnt),
        firstElementOnViewPort = 1,
        isAnimating = false;

        for (i = 0; i < shownInViewport; i++) {
            jQuery(sliderList).css('width',(numElmts+shownInViewport)*increment + increment + "px");
            jQuery(sliderList).append(jQuery(elmnts[i]).clone());
        }

        jQuery(previous).click(function(event){
            if (!isAnimating) {
                if (firstElementOnViewPort == 1) {
                    jQuery(sliderList).css('left', "-" + numElmts * sizeFirstElmnt + "px");
                    firstElementOnViewPort = numElmts;
                }
                else {
                    firstElementOnViewPort--;
                }

                jQuery(sliderList).animate({
                    left: "+=" + increment,
                    y: 0,
                    queue: true
                }, "swing", function(){isAnimating = false;});
                isAnimating = true;
            }

        });

        jQuery(next).click(function(event){
            if (!isAnimating) {
                if (firstElementOnViewPort > numElmts) {
                    firstElementOnViewPort = 2;
                    jQuery(sliderList).css('left', "0px");
                }
                else {
                    firstElementOnViewPort++;
                }
                jQuery(sliderList).animate({
                    left: "-=" + increment,
                    y: 0,
                    queue: true
                }, "swing", function(){isAnimating = false;});
                isAnimating = true;
            }
        });
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:08:29.400

该插件旨在尽可能自动化，因此选项很少。我认为你可以通过修改你的 CSS 来实现你想要的。必须与 3 个项目一样大，`#customersCarousel`并且如果它没有被左侧的渐变部分隐藏，则它必须位于第一个元素左边缘的预期位置。第一项将是列表中的第一项。去掉右边距`#customersCarouselList`（它可能会在自动尺寸和定位处理上发生冲突）。然后更改渐变图像以隐藏第一项的左侧和第三项的右侧。希望这有帮助。

# jquery - 我怎样才能保持在同一页面上？

> ID：10138614
> 
> 赞同：-1
> 
> 时间：2012-04-13T09:45:35.520
> 
> 标签：jquery

我的页面上有复选框，并使用 ajax 从数据库中删除值。问题是当我点击删除时，它会向我发送索引页面，我想要的是留在我删除复选框的位置。

这是我的代码。如果我想留在同一页面上，可能会有什么变化。

```
function deleteData() {
    var artistIds = [];
    $("input[name='artist[]']:checked").each(function () {
        artistIds.push($(this).val());
    });
    alert(artistIds);
    var sitepath = 'http://www.sinemalar.com/';
    $.post('/management/deleteDataAjax2', {
        json: JSON.stringify({
            'artistIds': artistIds
        })
    }, function (response) {
        alert("Başarıyla silindi");
        window.location.replace(window.location.pathname);
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:53:34.910

如果您更改 window.location 那么您将加载一个新网页。

无法更改出现在导航栏中的位置，因为这可能会被恶意使用。

如果您想以某种方式表示导航栏中页面的更改，请考虑使用 window.location.hash 和[history.js](https://github.com/balupton/History.js/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:49:52.667

如果你想留在同一页面上，你应该删除

```
window.location.replace(window.location.pathname); 
```

# iis-7 - 是否可以在 IIS 中为不同的静态文件类型控制 Cache-Control 标头？

> ID：10138615
> 
> 赞同：5
> 
> 时间：2012-04-13T09:45:35.527
> 
> 标签：iis-7

在 IIS 中，我可以将其配置为为同一文件夹中的不同静态文件类型返回不同的缓存控制标头吗？

我知道我可以使用 HTTP 标头功能立即设置过期，但这似乎会影响所有内容。有没有办法为静态内容的特定文件扩展名做这件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-17T17:39:19.947

虽然不是一个理想的答案，但我确实找到了解决方法。在我的应用程序中，我可以控制我的 JS、CSS 和其他类似文件在目录结构中的位置。我所做的是`web.config`在 IIS 根目录中添加了这些行（其中不相关）：

```
<configuration>
  <system.webServer>
     <staticContent>
       <clientCache cacheControlMode="DisableCache" setEtag="true" />
     </staticContent>
  </system.webServer>
</configuration> 
```

这会在 IIS 中设置默认值，即不应缓存任何内容。这是我的单页应用程序 (SPA) 的 HTML 页面 (index.html) 所在的位置，所以这就是我想要的。

然后，在图像、JS、CSS 等的直接子目录中，我有`web.config`以下文件：

```
<configuration>
  <system.webServer>
     <staticContent>
       <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="14.00:00:00" setEtag="true" />
     </staticContent>
  </system.webServer>
</configuration> 
```

您当然可以将年龄设置为任何您想要的。我现在从 14 天开始，直到我确定我一切正常，然后我可能会延长到几个月。

这样，我的 SPA 的 HTML 将永远不会被缓存，但所有的 JS/CSS/图像都会随我的意愿而存在。当我为下一次部署重建项目时，web-pack 将为打包的 JS 和 CSS 生成新的文件名，所以那里没有缓存问题。HTML 文件当然是同名的，但是包含的 JS 文件名会不同。因此，此设置完成了 HTML 文件永远不会被缓存*的关键。*

IIS 确实应该使这更简单。按文件类型缓存的配置可以完美运行，并且不需要严格的目录结构管理，并非所有项目都可以灵活地遵循。

# ios - UIWeb 视图。在 viewDidDisappear 中重新加载时访问错误

> ID：10138618
> 
> 赞同：0
> 
> 时间：2012-04-13T09:45:46.353
> 
> 标签：ios, uiviewcontroller, uiwebview

我正在尝试从 UIViewController 的 viewDidDisappear 中的 UIWebView 本地文件重新加载内容。错误访问被捕获。但如果我在 viewWillDisappear 中编写相同的代码，它就可以工作。可能是什么原因？一旦我听说 UIWebView 在不可见时无法重新加载其内容（不确定）。

我的代码（希望足够了）：

```
@interface WebViewController : UIViewController <UIWebViewDelegate> {
    ExtendedWebView * webView;
}
@property (nonatomic, retain) ExtendedWebView * webView;
@end 
```

* * *

```
//WebViewController implementation
- (void)loadView
{
    [super loadView];
    WebViewCachingSingleton * webViewSingleton = [WebViewCachingSingleton sharedService];
        ExtendedWebView * newWebView = [webViewSingleton getAvailableWebViewResource];//here I get ExtendedWebView. it works =)
    newWebView.frame = CGRectMake(0, 0, 320, 400);
    newWebView.delegate = self;
    [self.view addSubview:newWebView];
    self.webView = newWebView;
} 
```

* * *

```
- (void)viewDidDisappear:(BOOL)animated
{
    [[WebViewCachingSingleton sharedService] makeWebViewUnused:self.webView];
} 
```

* * *

```
//WebViewCachingSingleton:
- (void) makeWebViewUnused : (ExtendedWebView *) aWebView
{
    aWebView.isFree = YES;
    [aWebView reload];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:05:40.180

它不会起作用，因为 viewDidDisappear 在视图消失时被调用，因此所有子视图都被释放。viewWillDisappear 在释放与该视图关联的所有对象之前被调用。

所以你试图调用一个已经发布的 UIWebView 的 reload 方法。这基本上就是它崩溃的原因。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:01:44.160

即使没有显示，也可以执行重新加载。

我试图制作一个代码示例以放入您的状态并且没有任何问题。尝试调试并启用 NSZombieEnabled 以查看您的应用程序实际发生了什么。尝试发布任何可能有助于我们为您提供更多详细信息的代码。

# c - 列出不带“.”的文件 和 ”..”

> ID：10138624
> 
> 赞同：0
> 
> 时间：2012-04-13T09:45:58.857
> 
> 标签：c

我正在尝试获取一个文件列表，其中不包括“。”之类的目录。和 ”..”。我使用以下代码来做到这一点：

```
 DIR *dir;   
   struct dirent *ent;

   dir = opendir(currentDir);

   if (dir != NULL)   
   {
      while ((ent = readdir (dir)) != NULL) 
      {

         if (ent->d_name == "." || ent->d_name == "..")
         {
            continue;
         }
      }
   } 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:47:30.577

您应该`strcmp`用来比较字符串。而不是这样：

```
if (ent->d_name == ".") 
```

你需要这个：

```
if (strcmp(ent->d_name, ".") == 0) 
```

您的代码直接比较指针，而不是比较字符串的内容。

有关更多信息，请参阅[strcmp 文档](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:47:37.223

你需要用来`strcmp`做比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-13T08:31:51.790

如果只需要读取文件（文件夹除外）

```
if (ent->d_type == DT_REG) // DT_REG stands for regular files
{
  printf ("%s\n", ent->d_name);
} 
```

如果您需要读取文件夹名称

```
if (ent->d_type == DT_DIR) // DT_DIR stands for directory
{
  printf ("%s\n", ent->d_name);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:49:01.077

string 不是原生的 c 数据类型，字符串表示为字符的集合。因此，比较字符串没有运算符，而是函数，**strcmp()**以获得更多信息。

# java - Jacob - Word 文件以 32 位而不是 64 位正确打开

> ID：10138630
> 
> 赞同：2
> 
> 时间：2012-04-13T09:46:38.500
> 
> 标签：java, jsp, 32bit-64bit, jacob

我有一个 java web 应用程序，它使用 jacob 库（在 32 位和 64 位中运行）来创建/打开 word 文件。它在我的机器（32位）上正确运行，这意味着启动了word应用程序并打开了word文件。在服务器机器（64位）上加载java项目时出现问题：将启动word应用程序（我在任务管理器窗口看到“WINWORD.EXE * 32”），但文件没有打开。

我不明白我错过了什么。

你能帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:22:32.633

我强烈怀疑正在发生以下事情之一：

1.  安全违规
2.  不满意的链接错误
3.  服务器上未安装 Word
4.  其他一些类加载器错误（**编辑**）

我尝试了一个简单的 jsp，并直接在 try-catch 块中调用了 LibraryLoader：

```
 try {
   LibraryLoader.loadJacobLibrary();
   ActiveXComponent oWord = new ActiveXComponent("Word.Application");
   oWord.setProperty("Visible", new Variant(true));
 } catch (Throwable th) {
   th.printStackTrace(new java.io.PrintWriter(out));
 } 
```

并遇到初始化 JacobObject 类失败 - 由于静态调试初始化程序的安全违规导致：`"true".equalsIgnoreCase(System.getProperty("com.jacob.debug"));`. 一旦我用一个简单的赋值来替换它，并在 jacob.jar 中替换它，我最终得到了：`java.lang.UnsatisfiedLinkError: no jacob-1.16-x64 in java.library.path`

正是在这一点上，事情变得多毛了。您可能必须将替换该方法的 LibraryLoader 代码替换为`loadJacobLibrary`：

```
public static void loadJacobLibrary() {
  System.load("C:/<path to .dll as known on the server>/" + getPreferredDLLName() + ".dll");
} 
```

然后调用`Word.Application`.

**编辑**对于*其他一些类加载器错误*，根本问题是您只能[在服务器](http://wiki.apache.org/tomcat/HowTo#I.27m_encountering_classloader_problems_when_using_JNI_under_Tomcat)中加载 .dll 的一个实例- 这是指使用 tomcat，但问题与所有其他 servlet 容器相似 - 您需要加载 . dll 仅一次，并且为了确保代码在所有 servlet 中可用，需要将其加载到不会因重新加载 Web 应用程序而受到干扰的类加载器中。如果发生这种情况，那么在重新加载服务器应用程序之前，您将无法使用 .dll。

# java - TabHost (Android) 中的“显示更多”选项，就像在 iOs 中一样

> ID：10138632
> 
> 赞同：0
> 
> 时间：2012-04-13T09:46:54.163
> 
> 标签：java, android, ios

当 TabHost 具有大量选项卡并且不适合屏幕（如 iO 中的“更多...”选项）时，是否有任何内置解决方案？

![在此处输入图像描述](../Images/84d9ba4032c7c2f609527be7a5e47b46.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:55:57.210

在android中，您通常使用horizo​​ntalScrollView来保存标签，或者更好地使用像Google+或Google Play应用程序这样的viewpager。

查看[http://viewpagerindicator.com/](http://viewpagerindicator.com/)以查看此功能的实现和库

# r - plm 包中的 pgmm 给出了摘要错误

> ID：10138633
> 
> 赞同：0
> 
> 时间：2012-04-13T09:46:58.170
> 
> 标签：r, plm

我正在尝试将包中的`pgmm`功能用于. 回归运行，我可以调用结果，但是，要求摘要给出以下错误：`plm``R`

```
Error in t(y) %*% x : non-conformable arguments 
```

我使用 WDI 包从世界银行导入了数据：

```
library(plm) # load package
library(WDI) # Load package
COUNTRIES <- c("AGO","BEN","BWA","BFA","BDI") # Specify countries
INDICATORS <- c("NY.GDP.PCAP.KN", "SP.DYN.TFRT.IN", "SP.DYN.CBRT.IN", "SP.POP.TOTL") # Specify indicators
LONG <- WDI(country=COUNTRIES, indicator=INDICATORS, start=2005, end=2009, extra=FALSE) # Load data
PANEL <- pdata.frame(LONG, c("iso2c","year")) # Transform to PANEL dataframe
PANEL$year <- as.numeric(as.character(PANEL$year)) # Encode year
EQ <- pgmm( log(fertility) ~ log(gdp) + lag(log(fertility), 2) | lag(log(fertility), 2), data=PANEL, effect="twoways", model="twosteps", gmm.inst=~log(fertility) ) # Run regression 
```

调用结果如下。

```
EQ 
```

但是摘要（如下）给出了上面提到的错误消息。

```
summary(EQ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T15:14:19.603

我认为发生错误是因为`summary.pgmm`尝试对您的数据进行序列相关性的二阶 Arelland-Bond 测试，但您的数据只有两个点（2008 年和 2009 年），所以它失败了。

要解决此问题，您可以修补该函数，使其检查数据集中是否只有两个点，并仅在您有两个以上点时运行测试。我在下面提供了一个修补功能：

```
summary.pgmm.patched <- function (object, robust = FALSE, time.dummies = FALSE, ...) 
{
    model <- plm:::describe(object, "model")
    effect <- plm:::describe(object, "effect")
    transformation <- plm:::describe(object, "transformation")
    if (robust) {
        vv <- vcovHC(object)
    }
    else {
        vv <- vcov(object)
    }
    if (model == "onestep") 
        K <- length(object$coefficients)
    else K <- length(object$coefficients[[2]])
    Kt <- length(object$args$namest)
    if (!time.dummies && effect == "twoways") 
        rowsel <- -c((K - Kt + 1):K)
    else rowsel <- 1:K
    std.err <- sqrt(diag(vv))
    b <- coef(object)
    z <- b/std.err
    p <- 2 * pnorm(abs(z), lower.tail = FALSE) 
    CoefTable <- cbind(b, std.err, z, p)
    colnames(CoefTable) <- c("Estimate", "Std. Error", "z-value", 
        "Pr(>|z|)")
    object$CoefTable <- CoefTable[rowsel, , drop = FALSE]
    object$sargan <- sargan(object)
    object$m1 <- plm:::mtest(object, 1, vv)

    # The problem line:
    # object$m2 <- mtest(object, 2, vv) 

    if (length(object$residuals[[1]] ) > 2) object$m2 <- plm:::mtest(object, 2, vv) 
    object$wald.coef <- plm:::wald(object, "param", vv)
    if (plm:::describe(object, "effect") == "twoways") 
        object$wald.td <- plm:::wald(object, "time", vv)
    class(object) <- "summary.pgmm"
    object
} 
```

您可能想写信给`plm`包的作者并向他展示这篇文章。作者将能够编写一个不那么“hacky”的补丁。

使用您自己的（稍作修改的）示例数据，您将如何使用该函数：

```
library(WDI) # Load package
library(plm)

COUNTRIES <- c("AGO","BEN","BWA","BFA","BDI") # Specify countries
INDICATORS <- c("NY.GDP.PCAP.KN", "SP.DYN.TFRT.IN", "SP.DYN.CBRT.IN", "SP.POP.TOTL") #     Specify indicators
LONG <- WDI(country=COUNTRIES, indicator=INDICATORS, start=2005, end=2009, extra=FALSE) #     Load data
PANEL <- pdata.frame(LONG, c("iso2c","year")) # Transform to PANEL dataframe
PANEL$year <- as.numeric(as.character(PANEL$year)) # Encode year
names(PANEL) [c(4,5)] = c('gdp','fertility')
EQ <- pgmm( log(fertility) ~ log(gdp) + lag(log(fertility), 2) | lag(log(fertility), 2),     data=PANEL, effect="twoways", model="twosteps", gmm.inst=~log(fertility) ) # Run regression

summary.pgmm.patched(EQ) 
```

# java - 使用参数“Class ”覆盖 Java 方法

> ID：10138636
> 
> 赞同：4
> 
> 时间：2012-04-13T09:47:02.357
> 
> 标签：java

当我尝试覆盖方法时遇到 java 问题，我的代码如下：

```
public abstract class CustomAdapter{
    public abstract Boolean addItem(Class<? extends Object> aObject);
}

public class RainAdapter extends CustomAdapter {
    @Override
    public Boolean addItem(ClassOfRain aRainInfo) {
        // do something
    return true;
    }
} 
```

我可以将“Class”声明为“ClassOfRain”吗？如果是，怎么办？

感谢您的阅读！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:51:13.787

我觉得你有点困惑。你确定你不是想说：

```
public abstract class CustomAdapter<T extends Object> {
    public abstract Boolean addItem(T aObject);
}

public class RainAdapter extends CustomAdapter<Rain> {
    @Override
    public Boolean addItem(Rain aRainInfo) {
        // do something
        return true;
    }
} 
```

在我对您的类结构的解释中，您正在尝试创建一个通用`addItem`方法，因此传递实际的类对象是没有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:50:40.203

这是不可能的。方法覆盖意味着您放置完全相同的方法标头。您唯一可以更改的是给定参数的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:51:11.247

`Class<Rain.class>`将举行`Rain`阶级的反思。但这不起作用，因为被覆盖的方法必须具有相同的形参，所以你必须使用`Class<? extends Object>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:51:35.520

在实现抽象/接口方法和/或覆盖时，方法签名必须匹配......你可以做这样的事情

```
public abstract class CustomAdapter{
    public abstract Boolean addItem( Object o );
}

public class RainAdapter extends CustomAdapter {

    public Boolean addItem( Object o ){
        if ( o.getClassName().equals( "ClassOfRain" ) ){
            return this.addItem( (ClassOfRain) o );
        }
        return false;
    }
    private Boolean addItem(ClassOfRain aRainInfo) {
        // do something
        return true;
    }
} 
```

# java - Guice 使用注释将两个不同的类绑定到同一个接口

> ID：10138639
> 
> 赞同：1
> 
> 时间：2012-04-13T09:47:11.000
> 
> 标签：java, guice

我有一个关于 Guice 绑定的问题。

我有两个类（MyClass1 和 MyClass2）都实现了相同的接口，比如：IMyInteface。

我已将绑定配置为：

bind(IMyInterface.class).annotatedWith(Class1.class).to(MyClass1.class); bind(IMyInterface.class).annotatedWith(Class2.class).to(MyClass2.class);

Class1 和 Class2 是定义的注释。

现在，如果我在客户端使用此代码：

```
 Injector injector = Guice.createInjector(new MyModule());
    IMyInterface c = injector..getInstance(IMyInterface.class); 
```

Guice 不知道我想为 IMyInterface 使用哪种实现。无论如何我可以在这个阶段指定注释来选择性地说：我想要MyClass2的实现？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:51:53.480

我认为你可以这样做：

```
injector.getInstance(Key.get(IMyInterface.class, Class2.class)); 
```

**编辑：** 似乎有一个类似的问题，[这里](https://stackoverflow.com/questions/5118082/how-to-retrieve-annotated-instance-from-guices-injector)有类似的答案。

# algorithm - 存储大量唯一字符串的最快方法是什么？

> ID：10138640
> 
> 赞同：2
> 
> 时间：2012-04-13T09:47:14.760
> 
> 标签：algorithm, storage

我想知道存储大量字符串和检查重复的最佳方法是什么。

我们必须考虑我们的优先事项：

*   重复检查速度
*   插入新字符串时间
*   硬盘上的存储空间
*   随机存取时间

当我们的目标是快速重复检查和插入新字符串时（没有随机访问或存储空间问题），最好的解决方案是什么？我想到了 SQL 数据库，但哪个 DB 最适合这个解决方案？如果我们使用 SQL DB，比如 MySQL，哪个存储引擎是最好的？（当然，由于数据量，我们必须排除内存）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:51:34.383

对输入字符串使用哈希函数。输出哈希将是记录的主键/ID。

然后你可以检查数据库是否有这个哈希/id/主键：

*   如果没有：这是一个新字符串；您添加一条新记录，包括字符串和哈希作为 id。
*   如果是：检查加载记录中的字符串是否与输入字符串相同。
    *   如果字符串相同：它是重复的
    *   如果字符串不同：这是一个冲突。使用[冲突解决](http://en.wikipedia.org/wiki/Hash_table#Collision_resolution)方案来解决。（下面有几个例子）

您将不得不根据速度和预期的字符串数量以及哈希冲突要求/保证来考虑使用哪种哈希函数/方案/强度。

解决冲突的几种方法：

*   使用第二个散列函数在同一个表中产生一个新的散列。
*   标记记录（例如使用 NULL）并在辅助“冲突”表上使用更强的第二散列函数（具有更广泛的域）重复。在查询时，如果字符串被标记为冲突（例如 NULL），则在冲突表中再次进行查找。您可能还想使用[动态完美散列](http://en.wikipedia.org/wiki/Dynamic_perfect_hashing)来确保第二个表没有进一步的冲突。

当然，根据这需要的持久性以及您期望占用多少内存/字符串数量，您实际上可以在没有数据库的情况下直接在内存中执行此操作，这会快得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T01:24:30.027

您可能需要考虑 NoSQL 解决方案：

**[雷迪斯](http://www.redis.io/topics/introduction)**。使用 Redis 解决的一些用例：

*   [http://highscalability.com/blog/2011/7/6/11-common-web-use-cases-solved-in-redis.html](http://highscalability.com/blog/2011/7/6/11-common-web-use-cases-solved-in-redis.html)
*   [http://dr-josiah.blogspot.com/2011/02/some-redis-use-cases.html（Josiah](http://dr-josiah.blogspot.com/2011/02/some-redis-use-cases.html) L. Carlson 是[Redis in Action](http://www.manning.com/carlson/)的作者）
*   [http://www.paperplanes.de/2010/2/16/a_collection_of_redis_use_cases.html](http://www.paperplanes.de/2010/2/16/a_collection_of_redis_use_cases.html)

**[内存缓存](http://memcached.org/)**。memcached 和 Redis 的一些比较：

*   [http://www.quora.com/What-are-the-differences-between-memcached-and-redis](http://www.quora.com/What-are-the-differences-between-memcached-and-redis)
*   [与 Redis 相比，memcached 是恐龙吗？](https://stackoverflow.com/questions/2873249/is-memcached-a-dinosaur-in-comparison-to-redis)
*   [http://coder.cl/2011/06/concurrency-in-redis-and-memcache/](http://coder.cl/2011/06/concurrency-in-redis-and-memcache/)

**[Membase/Couchbase](http://www.couchbase.com/)**将 OMGPOP 的 Draw Something 视为[他们的成功故事之一](http://blog.couchbase.com/how-couchbase-helped-omgpop-break-all-records-draw-something)。Redis 和 Membase 的比较：

*   [Redis 和 Membase 的主要区别是什么？](https://stackoverflow.com/questions/5071588/what-is-the-major-difference-between-redis-and-membase/5588242#5588242)
*   [http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)

一些问题：

*   字符串集有多大？
*   应用程序会读重还是写重？或两者？
*   您希望多久将数据持久化到磁盘？
*   是否有*N 最近的字符串*要求？

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:35:04.067

生成后缀树来存储字符串。Ukkonen 的算法如[http://www.daimi.au.dk/~mailund/slides/Ukkonen-2005.pdf](http://www.daimi.au.dk/~mailund/slides/Ukkonen-2005.pdf)将提供一些有关如何创建后缀树的见解。存储此后缀树的方法有多种。但是一旦生成，查找时间非常短。

# svn - Subversion 添加消息而不提交

> ID：10138641
> 
> 赞同：0
> 
> 时间：2012-04-13T09:47:18.100
> 
> 标签：svn

我正在使用颠覆（目前是 1.6）。有没有办法像缓存提交消息一样继续向源代码文件添加消息而不提交？这背后的原因是我正在编写一个源代码，我将在其中进行大部分更改，其中大部分我必须在提交期间捕获。我不能对每一个改变都承诺。同时，我不记得提交时的所有这些更改。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T09:54:13.623

我建议您创建一个分支并将所有更改一一提交到您的分支。当您完成一个“包”工作时，您将更改合并到主干。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:49:45.710

Another alternative is to use Git-SVN and make local commits to GIT and then push all changes to SVN in one go.

A random tutorial from Google on Git-SVN can be found [here](http://viget.com/extend/effectively-using-git-with-subversion).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:57:35.143

如果你在 Windows 上使用 TortoiseSVN 之类的东西，你可以使用本地预提交挂钩脚本将文本文件的内容添加到提交消息中（当然你必须维护）。使用预提交时，您应该在实际提交之前在评论窗口中看到这些评论......（如果您不希望这样 - 使用提交钩子）

# gps - 当我在 Windows Phone 上在室内时，如何获得正确的纬度和经度？

> ID：10138645
> 
> 赞同：2
> 
> 时间：2012-04-13T09:47:38.843
> 
> 标签：gps, windows-phone

我正在尝试通过[GeoCoordinate Class](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate.aspx)从 Windows Phone 获取纬度和经度信息。当我在室外或直接在天空下时，我能够立即获得值，但是当我在室内或房间内时，我得到的值完全错误。当我在室内时，有没有办法获得我的确切位置？

注意即使打开我的 Wi-Fi，我的坐标也是错误的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:19:37.830

这完全取决于 GPS 硬件，其次取决于服务提供商基于塔跟踪您的设备的能力。所以我怀疑你是否可以做任何事情。要确认这一点，您可以检查默认的地图应用程序。如果这有效，那么您的应用程序中存在一些问题。我在 bada OS 设备上看到过类似的问题，但这是 GPS 硬件问题。

# ios - IOS：在视图中绘制图像

> ID：10138649
> 
> 赞同：4
> 
> 时间：2012-04-13T09:48:04.227
> 
> 标签：ios, xcode, uiimage, png

我有这个代码在视图中着色：

```
UITouch *touch = [touches anyObject];   
    CGPoint currentPoint = [touch locationInView:drawImage];

    UIGraphicsBeginImageContext(drawImage.frame.size);
    [drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width, drawImage.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), size);

      CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), r, g, b, a);

    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

我的问题是我不想用点着色，但我想使用重复的特定图像（作为 png 图像）是否可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T10:46:09.523

加载单个 UIImage 并绘制它很容易：

```
UIImage *brushImage = [UIImage imageNamed:@"brush.png"];
[brushImage drawAtPoint:CGPointMake(currentPoint.x-brushImage.size.width/2, currentPoint.y-brushImage.size.height/2)]; 
```

这将在每个周期仅绘制一次图像，而不是连续的线。如果您想要画笔图片的实线，请参阅[目标 C：使用 UIImage 进行描边](https://stackoverflow.com/q/8290680/1318452)。

这可能会在每次调用此方法时最终加载图像文件，从而使其变慢。虽然结果`[UIImage imageNamed:]`经常被缓存，但我上面的代码可以通过存储画笔以供以后重用来改进。

说到性能，请在旧设备上进行测试。如前所述，它可以在我的第二代 iPod touch 上运行，但任何添加都可能使其在第二代和第三代设备上出现卡顿。@Armaan 推荐的Apple 的[GLPaint](http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html)示例使用 OpenGL 进行快速绘图，但涉及更多代码。

此外，您似乎在一个视图中进行交互（`touchesBegan:`, `touchesMoved:`, `touchesEnded:`），然后将其内容绘制到`drawImage`，大概是 a `UIImageView`。可以存储绘画图像，然后将此视图的图层内容设置为该图像。这不会改变性能，但代码会更干净。如果您继续使用`drawImage`，请通过 a 访问它，`property`而不是使用它的 ivar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:31:13.343

您可以从 APPLE 的示例代码开始：[示例代码：GLPaint](https://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007328)

# installation - XNA - 安装在非管理员电脑上

> ID：10138652
> 
> 赞同：1
> 
> 时间：2012-04-13T09:48:20.283
> 
> 标签：installation, xna, portability

我正在使用 XNA 4.0。有没有办法在没有管理权限的电脑上安装和运行 XNA 游戏？（未安装.Net XNA 框架）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:12:40.470

我不太明白你所说的“没有管理权限的电脑”是什么意思，但如果我理解你的问题，你想要可再发行：

[XNA 4.0 框架可再发行版](http://www.microsoft.com/download/en/details.aspx?id=20914)

您只需要在安装游戏时检查是否安装了框架，如果没有，只需从上面的页面安装文件即可。

# javascript - 如何从 Drupal 7 中的特定内容类型中删除 CSS 和 JS

> ID：10138660
> 
> 赞同：1
> 
> 时间：2012-04-13T09:48:44.937
> 
> 标签：javascript, css, drupal, impress.js

在寻找如何根据视图模式和内容类型有选择地将 CSS 或 JS 添加到给定节点之后，我来到了这里。这个问题在这里得到了非常简单的回答（http://stackoverflow.com/questions/8295498/how-to-add-css-and-js-files-on-node-pages-independent-of-the-theme）。

现在我想澄清一切：我正在寻找一种方法来显示我想要的 CSS 和 JS，但*仅*此而已，没有其他 JS 和 CSS。我正在尝试集成 Impress.js（而且我不喜欢可用的解决方案），它似乎与 Jquery 冲突，因为两个脚本都已正确加载，但最新的 Firefox 和 Chromium 浏览器都会抛出“旧浏览器”消息。

关于如何取消设置每一个 CSS 和 JS 以便我想要使用的 CSS 和 JS 是唯一真正活跃的有什么想法吗？

谢谢！

我尝试了以下方法，但没有成功：

```
$mycss = $vars['styles'];

unset($micss[drupal_get_path('module','system') .'/system.base.css']);

...

unset($micss[drupal_get_path('module','toolbar') .'/toolbar.css']);

$vars['styles'] = $mycss; 
```

（我添加了很多我想摆脱的不同 css，但这解释了这个想法）。但是，它没有用：)

编辑。我很抱歉标记不好，我正在寻找一种清理/标记代码的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:53:37.497

在您的自定义模块中使用：

```
function yourmodule_js_alter(&$js) {
    unset(
        $js['misc/drupal.js'],
        $js['misc/jquery.js']
        .... etc.
    );
} 
```

您说您只想对某些内容类型执行此操作，因此请尝试：

```
if(arg(0) == 'node') {
    $node = node_load(arg(1));
    if($node->type == 'your_content_type') {
        unset(
            $js['misc/drupal.js'],
            $js['misc/jquery.js']
            .... etc.
        );
    }
} 
```

强尼

# asp.net-mvc-3 - 为 HtmlHelper 编写扩展时如何调用 UrlHelper

> ID：10138661
> 
> 赞同：11
> 
> 时间：2012-04-13T09:48:45.330
> 
> 标签：asp.net-mvc-3, extension-methods

我有 ASP.NET MVC3 项目，我正在编写一些返回 HTML 的扩展方法，但我需要 UrlHelper 来呈现它们。为此，我正在扩展 UrlHelper，但我不喜欢语义，因为 UrlHelper 应该使用 URL，而 HtmlHelper 应该使用 HTML。我想用这种方法而不是 UrlHelper 来扩展 HtmlHelper。

我的问题是我现在不知道如何从 HtmlHelper 的扩展方法访问 UrlHelper，这可能吗？或者我必须坚持使用 UrlHelper 扩展。

我知道我可以发送 Url 助手作为参数，但我不太喜欢这个解决方案。

以下代码是我正在谈论的扩展方法的示例：

```
public static HtmlString AnchorLink(this UrlHelper url, string text, string action, string anchor) {
    return new HtmlString(string.Format("<a href=\"{0}#{2}\">{1}</a>", url.Action(action), text, anchor));
} 
```

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-13T09:55:05.410

你可以实例化一个`UrlHelper`自己...

```
public static HtmlString AnchorLink(this HtmlHelper html, string text, string action, string anchor) {
    var urlHelper = new UrlHelper(html.ViewContext.RequestContext);
} 
```

# android - 如何在android中滚动显示多行文本？

> ID：10138663
> 
> 赞同：9
> 
> 时间：2012-04-13T09:48:55.473
> 
> 标签：android, scroll, textview, android-edittext

我想在我的应用程序中的特定范围内显示多行文本，以便用户可以滚动查看其他行。我试过`EditText`了，但它会在上面生成键盘并且不能正确滚动。然后我尝试`TextView`了，它也没有按照我的意愿正确滚动文本。

还有其他选择吗？如果否，那么如何在`TextView`or中垂直滚动文本`EditText`？我想在拖动时滚动文本，如`WebView`. 不自动滚动。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-13T12:28:50.133

您可以限制高度`TextView`以匹配用户想要查看的行数，然后只需将您`TextView`的`ScrollView`

我做了一个简单的例子来证明这一点......

```
<ScrollView android:layout_height="30dp"
        android:layout_width="match_parent">
<TextView 
    android:layout_width="match_parent"
    android:layout_height="30dp"
    android:textSize="16sp"
    android:id="@+id/tv1"
    />
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T10:44:45.140

检查下面的代码

```
 <TextView 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textColor="#000000"
        android:textSize="17dip"
        android:inputType="textMultiLine"
        android:scrollbars="vertical"
    /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T11:47:38.040

可以使用滚动视图创建多行文本视图。我在您的应用程序中使用了以下代码：

```
Txt_VistaRecetasola =  (TextView) findViewById(R.id.txt_vistarectsola);        
Txt_VistaRecetasola.setMovementMethod(ScrollingMovementMethod.getInstance());
Txt_VistaRecetasola.setScrollBarStyle(0x03000000);
Txt_VistaRecetasola.setVerticalScrollBarEnabled(true);
Txt_VistaRecetasola.setTextColor(0xFF000000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T09:54:41.137

尝试使用 Edittext 使其不可编辑，因此在这种情况下它不会允许键盘弹出。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-13T10:38:26.407

`android:windowSoftInputMode="stateAlwaysHidden"`在您拥有 EditText 的活动中的清单文件中。

# windows - 每个 CPU 内核的线程分配（仅限 Windows）

> ID：10138676
> 
> 赞同：1
> 
> 时间：2012-04-13T09:49:58.893
> 
> 标签：windows, multithreading

我是一个业余程序员，所以请多多包涵。我即将为游戏（适用于 Windows 操作系统）编写一个插件，该插件将在游戏期间在后台运行。由于该插件会产生执行 CPU 密集型的线程，并且游戏在不同 CPU 内核上的执行可能会有很大差异，因此该插件只能在负载低于特定限制的多核 PC 上执行。我想出了如何监控每个内核的 CPU 负载，但我仍然有一个问题：插件是否应该将线程分配给负载最低的内核，或者我可以让系统为我处理？第一种解决方案对游戏的性能更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:58:13.573

如果您在 Visual Studio 2010 中为 Windows 开发代码，那么我建议您查看可用的并发运行时。 [Visual C++ 2010 中的并发运行时](http://www.codeproject.com/Articles/80825/Concurrency-Runtime-in-Visual-C-2010)

> 插件应该处理将线程分配给负载最低的内核，还是我可以让系统为我处理？

如果您可以正确设计系统，则可以让系统为您处理。此外，您的代码无需根据内核数进行更改，因为此类详细信息由运行时捕获，并且生成的线程数与内核数成正比。

# magento - 从 getChildrenCategories() 获取缩略图 URL

> ID：10138677
> 
> 赞同：4
> 
> 时间：2012-04-13T09:50:03.643
> 
> 标签：magento

我一直在让自己发疯，试图为我试图在页脚中显示的子类别列表显示缩略图。我已经尝试过在这里找到的解决方案：http: [//www.douglasradburn.co.uk/getting-category-thumbnail-images-with-magento/](http://www.douglasradburn.co.uk/getting-category-thumbnail-images-with-magento/)但没有运气！

这是我目前正在使用的代码。除了 img src 呈现为空之外，一切正常：

```
 <? $artisans = Mage::getModel('catalog/category')->load(9)->getChildrenCategories(); ?>
    <ul class="artists">
    <? $i = 0; foreach($artisans as $artisan):
    ?>
        <li>
            <a href="<?= $artisan->getUrl() ?>" title="<?= $artisan->getName() ?>"><img src="<?= $artisan->getThumbnailUrl() ?>" /></a>
        </li>
    <? if(++$i > 7) break; endforeach; ?>
    </ul> 
```

任何帮助将不胜感激！提前致谢。

解决方案（感谢卢卡斯姆斯！）：

```
 <? $artisans = Mage::getModel('catalog/category')->load(9)->getChildrenCategories(); ?>
    <ul class="artists">
    <? $i = 0; foreach($artisans as $artisan): ?>
        <li>
            <a href="<?= $artisan->getUrl() ?>" title="<?= $artisan->getName() ?>"><img src="<?= Mage::getBaseUrl('media').'catalog/category/'.$artisan->load($artisan->getId())->getThumbnail() ?>" width="96" height="96" /></a>
        </li>
    <? if(++$i > 7) break; endforeach; ?>
    </ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T10:41:16.263

很有可能没有从子类别加载足够的信息。如果您`$artisan->load($artisan->getId());`在从`$artisan`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:11:04.313

如果你尝试`$artisan->getThumbnail()`而不是`$artisan->getThumbnailUrl()`? 我认为这是正确的属性名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:25:28.260

是的，但是 $artisan->getThumbnailUrl() 调用 $artisan->getThumbnail() 那么你为什么不在你的脚本中首先设置一个你知道存在的缩略图值供 getthumbnail() 调用。然后你就会知道这是一个数据库命名问题

# c# - 在 IIS 6.0 或 SMTP 服务中在哪里增加电子邮件的附件大小？

> ID：10138682
> 
> 赞同：2
> 
> 时间：2012-04-13T09:50:18.907
> 
> 标签：c#, asp.net, .net, iis, windows-server-2008

当我的电子邮件附件大于 2 mb 时出现以下错误

```
Exceeded storage allocation. The server response was: 4.3.1 Message size exceeds fixed maximum message size 
```

我想增加这个限制，我搜索并找到了几篇文章（[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/6de966e8-8bcf-4782-95de-466123e59168.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/6de966e8-8bcf-4782-95de-466123e59168.mspx?mfr=true)）表明这可以使用

IIS 或服务中的 SMTP 服务器。我试图在两者中找到该选项，但没有像他们所说的那样，只是我没有找到任何增加电子邮件/附件大小的选项

谁能真正知道如何在 IIS 6.0 中做到这一点

请避免给出诸如压缩附件或减小附件大小或分两块或多块发送附件等答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T09:56:16.053

对于`fix`这个问题，您必须执行以下操作：

打开 IIS 6.0 管理器，展开您的计算机名称，向下滚动到 SMTP 服务器，右键单击它并从上下文菜单中选择“属性”。

![在此处输入图像描述](../Images/fff9aeb3569ce6442415c14567d28f2a.png)

单击“消息”选项卡并设置最大消息大小。或者，您可以通过取消选择“将邮件大小限制为 (KB)：”复选框来允许任何大小的邮件。

![在此处输入图像描述](../Images/b82d1d8c5b12ac5b3730ad10cc724e30.png)

# c# - SaveOrUpdate() 上的集合不能为空

> ID：10138683
> 
> 赞同：0
> 
> 时间：2012-04-13T09:50:27.143
> 
> 标签：c#, .net, nhibernate, exception-handling

当我尝试将新用户保存在数据库中时，我遇到了问题。我的代码：

```
if (!user.ValidateUser(username, password))
{
    using (var session = NHibernateHelper.OpenSession())
    {
        User u = new User();
        u.Name = username;
        u.Email = string.Empty;
        u.Password = "123456";
        using (var transact = session.Transaction)
        {
            session.SaveOrUpdate(u); // I have an exception in this line
            transact.Commit();
        }
    }
} 
```

错误：

> 集合不能为空。参数名称：c

如何在数据库中保存新用户？

PS`session.Save(user1);`也给我这个例外。

**更新：**用户类

```
public partial class User
{
    public User()
    {
        this.CurrentTestings = new HashSet<CurrentTesting>();
        this.ResultsSet = new HashSet<ResultTesting>();
    }

    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual string Password { get; set; }
    public virtual string Email { get; set; }

    public virtual ICollection<CurrentTesting> CurrentTestings { get; set; }
    public virtual ICollection<ResultTesting> ResultsSet { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:29:07.853

也许“用户”类有一些引用，例如：

```
class User
{
  IList<T> T;
} 
```

尝试用构造器初始化这个字段：

```
class User
{
  public User
  {
    T = new List<T>();
  }
  IList<T> T;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T14:17:19.383

在我的情况下，我需要将集合 initzialize 从 Hashset 更改为 Hashedset。

# linq - 将 for-loop Linq 查询重构为单个查询

> ID：10138684
> 
> 赞同：0
> 
> 时间：2012-04-13T09:50:31.357
> 
> 标签：linq, for-loop, refactoring

我有一组需要处理的数据，但我想拆分可用的工作线程。如何将其更改为单个指令，最好删除 for 循环？

```
string[] keysForThread;
IEnumerable<string> allData;
List<string> dataForSingleThreadToProcess;

for (int i = 0; i < keys.length; i++)
    dataForSingleThreadToProcess.AddRange(allData.Where(x => x.StartsWith(keys[i]))); 
```

我不介意将 string[] keysForThread 更改为 List 和/或 List dataForSingleThreadToProcess 更改为 IEnumerable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:56:16.507

听起来你想要：

```
var data = allData.Where(datum => keys.Any(key => datum.StartsWith(key))
                  .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:59:08.420

这是在没有 for 循环的情况下执行代码的直接方法。

```
var data = keys.SelectMany(k => allData.Where(d => d.StartsWith(k)).ToList(); 
```

但是，Jon skeet 的回答可能会更有效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:02:22.890

这应该做的工作：

```
dataForSingleThreadToProcess = allData.Where(x => keys.Any(x.StartsWith)).ToList(); 
```

# objective-c - 在 MasterViewController 使用 Apple SplitView 模板发送的 DetailViewController 中显示图像

> ID：10138688
> 
> 赞同：1
> 
> 时间：2012-04-13T09:50:46.283
> 
> 标签：objective-c, ios5, ipad, master-detail

我正在开发一个应用程序，但我仍然是 ios 编程的初学者。

我正在寻求您的帮助，因为我使用了苹果 MasterDetailView 模板。我正在生成存储在我的应用程序中的文件列表，该列表显示在我的 MasterView(TableView) 中。

当我单击列表中包含的文件之一时，我会生成与该文件相关的图像，并且我想将其显示在我的 DetailView 中。

有没有办法在不破坏我所有应用程序的情况下做到这一点:)

谢谢你们的帮助！！

这是我的代表以及我的控制器的声明方式：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

    MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];
    UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

    self.splitViewController = [[UISplitViewController alloc] init];
    self.splitViewController.delegate = detailViewController;
    self.splitViewController.viewControllers = [NSArray arrayWithObjects:masterNavigationController, detailNavigationController, nil];
    self.window.rootViewController = self.splitViewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:56:37.113

假设它是您的主控制器负责创建图像......您通常会在您的详细控制器中创建一个属性来保存对图像的引用。在 master 的方法`tableView:didSelectRowAtIndexPath:`中，您可以将该引用传递给详细视图控制器。

（或者，传递文件信息并让细节控制器创建图像。）

# ruby-on-rails - Rails 简单表单弃用警告

> ID：10138692
> 
> 赞同：1
> 
> 时间：2012-04-13T09:50:53.620
> 
> 标签：ruby-on-rails, simple-form

简单表格 2.0.1 client_side_validations 3.1.4

问题：

```
"error_class":"DEPRECATION WARNING: [SIMPLE_FORM] SimpleForm.error_class is deprecated and has no effect. (called from error_class at (eval):1)",
"error_tag":"DEPRECATION WARNING: [SIMPLE_FORM] SimpleForm.error_tag is deprecated and has no effect. (called from error_tag at (eval):1)",
"wrapper_error_class":"DEPRECATION WARNING: [SIMPLE_FORM] SimpleForm.wrapper_error_class is deprecated and has no effect. (called from wrapper_error_class at (eval):1)",
"wrapper_tag":"DEPRECATION WARNING: [SIMPLE_FORM] SimpleForm.wrapper_tag is deprecated and has no effect. (called from wrapper_tag at (eval):1)" 
```

怎么解决？

我的观点：

```
<%= simple_form_for @book_item, :validate => true do |f| %>
  <%= f.input :name %>
  <%= f.input :description %>
  <%= f.button :submit %>
  <%= link_to t('.cancel', :default => t("helpers.links.cancel")), book_items_path, :class => 'btn' %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:51:25.883

我假设您正在使用`client_side_validations-simple_form`gem 进行 SimpleForm 集成，但它现在不适用于 SimpleForm 2 - [https://github.com/dockyard/client_side_validations-simple_form/issues/2](https://github.com/dockyard/client_side_validations-simple_form/issues/2)

# rest - FLOW3 休息控制器

> ID：10138694
> 
> 赞同：0
> 
> 时间：2012-04-13T09:50:57.190
> 
> 标签：rest, controller, typo3-flow

我想在 flow3 中设置一个 Rest Controller。我检查了 Restcontroller 类，但实际上我不明白我应该怎么做才能使派生类工作。我是说：

```
class myRestController extends TYPO3\FLOW3\MVC\Controller\RestController{
...
} 
```

我应该如何设置路由？

谢谢！大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:18:35.590

首先，您的控制器应该命名为 MyRestController 而不是 myRestController。（Flow3 代码指南）

其次，在 Routes.yaml（可能在您的包中）文件位置：

```
 name: 'RouteName'                                                                                                                                                                                                                                                     
     uriPattern: 'rest/myrest'
     defaults:
       '@package':    'Your.Complete.Package.Name'
       '@controller': 'MyRest'
       '@format':     'json' 
```

最后实现方法

index - 对于没有资源的 http get show - 对于 http get with resource create - 对于 http post update - 对于 http put delete - 对于 http delete

# junit - 测试集合中的所有元素满足谓词

> ID：10138698
> 
> 赞同：1
> 
> 时间：2012-04-13T09:51:05.797
> 
> 标签：junit, hamcrest

我需要测试返回`List`一些复杂对象的有序方法。简化示例：

```
class MyObject {
    public String foo() { return someString; }
} 
```

我想测试两者：返回集合的可排序（因为现在我正在使用`org.hamcrest.collection.IsIterableContainingInOrder.contains`和实现谓词）。

总结一下。我正在寻找这样的语法：

```
@Test
public void shouldMatchPredicate() {
    List<MyObject> collection = testObject.generate();
    //collection = [myObject#x, myObject#y, myObject#z]
    assertThat(collection, somePredicate("x", "y", "z")
} 
```

默认一个，`contains`方法不起作用，因为第一个参数是`Collection<MyObject>`并且谓词中的参数是`String`s。我需要在它之间架起某种桥梁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:31:03.397

由于`Predicate`是一个 Guava 对象，并且 Hamcrest 不依赖于 Guava，因此它不会有一个 Matcher 需要一个`Predicate`. 此外，由于 Guava 不依赖于 Hamcrest，因此它们也不会提供 Matcher。

我建议编写自己的带有谓词的匹配器。这相对容易做到。获取源代码`IsIterableContainingInOrder`并将其修改为`Predicate`.

另一种选择是执行以下操作：

```
assertThat(Iterables.all(myList, myPredicate), CoreMatchers.is(true)); 
```

这不会为您提供太多有关失败的文档，但它会正确通过/失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:05:04.620

我会使用`MyObjectFactory`in `testObject.generate()`，避免直接`new`声明。 `MyObjectFactory`将是`testObject`. 这样做，我将获得 2 个好处：

1.  `testObject`和`MyObject`(之间的较弱耦合仅在接口方面`testObject`知道`MyObject`
2.  模拟的可能性`MyObjectFactory`，最后，断言 3 个有序调用的可能性`MyObjectFactory.BuildNewWithValue("x")`：`MyObjectFactory.BuildNewWithValue("y")`和`MyObjectFactory.BuildNewWithValue("z")`

您的单元测试将是交互测试。

为了断言返回的集合本身，我会写 3 个断言。

# vb.net - 复制 IsNullable(of T) 值访问

> ID：10138703
> 
> 赞同：0
> 
> 时间：2012-04-13T09:51:20.630
> 
> 标签：vb.net, nullable

使用 Nullable(Of T) 时，您可以通过直接调用 Nullable(Of T).Value 属性或直接访问对象来访问其值，例如：

```
 Dim myValue As Nullable(Of Integer) = 10

    Debug.WriteLine(myValue.Value)
    Debug.WriteLine(myValue) 
```

我将如何在自己的班级中复制第二个示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:55:51.260

您将需要为您的类型和您希望转换为/从的类型编写隐式转换运算符。

这是使用[`Widening`](http://msdn.microsoft.com/en-us/library/hz3wbx3x.aspx)or[`Narrowing`](http://msdn.microsoft.com/en-us/library/4w127ed2.aspx)修饰符完成的。

请参阅MSDN 上[的 Visual Basic 中的类型转换](http://msdn.microsoft.com/en-us/library/hcb26cc8.aspx)主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:53:43.587

例如：

```
If(myValue.HasValue, myValue.Value, 0) 
```

因此，如果没有价值，我们将`0`（或任何适合您的）作为默认值。

# github - Github：权限被拒绝（公钥）

> ID：10138705
> 
> 赞同：12
> 
> 时间：2012-04-13T09:51:31.793
> 
> 标签：github

**更新**

今天再次遇到这个问题 - 当我的工作笔记本电脑被带回家时 - 似乎 Window 域可能是根本问题。在这里找到解决方案：

[SSH 在 Windows 上为公钥/私钥对寻找错误的位置](https://stackoverflow.com/questions/2840871/ssh-is-looking-in-the-wrong-place-for-the-public-private-key-pair-on-windows)

**原始问题**

过去几个月我的 Git 工作正常，今天早上我尝试推送，并要求我确认 IP 的 RSA 证书 - 我仔细检查了 github IP，没关系，所以我添加了证书。但我得到：

```
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

当我尝试推或拉时。

我阅读[了 Git - Permission denied (publickey)](https://stackoverflow.com/questions/2643502/git-permission-denied-publickey)并尝试再次将我的密钥添加到 Github，但有人告诉我：

```
Key is already in use 
```

跑步

```
ssh -vT git@github.com 
```

回报：

```
OpenSSH_4.6p1, OpenSSL 0.9.8e 23 Feb 2007
debug1: Connecting to github.com [207.97.227.239] port 22.
debug1: Connection established.
debug1: identity file /p/.ssh/identity type -1
debug1: identity file /p/.ssh/id_rsa type -1
debug1: identity file /p/.ssh/id_dsa type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.1p1 Debia
n-5github2
debug1: match: OpenSSH_5.1p1 Debian-5github2 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_4.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-cbc hmac-md5 none
debug1: kex: client->server aes128-cbc hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'github.com' is known and matches the RSA host key.
debug1: Found key in /p/.ssh/known_hosts:1
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /p/.ssh/identity
debug1: Trying private key: /p/.ssh/id_rsa
debug1: Trying private key: /p/.ssh/id_dsa
debug1: No more authentication methods to try.
Permission denied (publickey). 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T09:59:25.120

好像你有一堆私钥：

```
debug1: Trying private key: /p/.ssh/identity
debug1: Trying private key: /p/.ssh/id_rsa
debug1: Trying private key: /p/.ssh/id_dsa 
```

你认识这些吗？

您可能会尝试指定要用于的密钥`-i`：

```
ssh -i /path/to/key -vT git@github.com 
```

也许这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T22:53:01.530

我今天遇到了同样的问题。我的私钥不属于我登录的帐户。

对于其他任何人，请确保您的帐户是密钥的所有者。在我的情况下，它不是从另一个帐户复制的。

按照@lum 的说明运行`ssh -i /path/to/key -vT git@github.com`表明我无权访问我的私钥。更改密钥的所有者解决了我的问题。

`debug1: could not open key file '/home/matt/.ssh/id_rsa': Permission denied`

希望这对未来的人有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-25T10:47:18.610

复制 C:\Users{Administrator}.ssh 的 .ssh 文件夹到 git 的工作目录

# internet-explorer - windows phone 模拟器 IE 版

> ID：10138708
> 
> 赞同：0
> 
> 时间：2012-04-13T09:51:48.813
> 
> 标签：internet-explorer, windows-phone, windows-phone-7-emulator

我已经下载了 Windows Phone SDK 7.1.1 更新版本。

我想知道它使用的IE版本。

还想知道如何获取使用 IE9 的 Windows Phone 7.5 模拟器，或者如何在此模拟器上安装 IE9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T14:49:39.653

在 Internet Explorer 上单击 F12 以激活调试器 找到模拟器模式并选择您的版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:36:36.380

Just point the browser at www.WhatBrowser.org and read the version of the page. It is almost certainly going to be IE Mobile 9.

# mysql - 在同一服务器上的 wordpress 中从另一个数据库查询

> ID：10138711
> 
> 赞同：-1
> 
> 时间：2012-04-13T09:51:54.743
> 
> 标签：mysql, database, wordpress

如何在 wordpress 引擎中从另一个数据库中查询帖子。例如，现在我安装了 wordpress，但我无法集成旧站点数据库。旧站点不在 wordpress 中，但我认为这不是问题，因为在 phpmyadmin 中更改旧数据库的结构对我来说没有问题。我认为在这种情况下最好的方法 - 在自定义 wordpress 页面模板上使用自定义查询从另一个数据库查询。有任何想法吗 ？请教我方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:59:57.943

在 MySQL 上做跨数据库查询是没有问题的。

```
SELECT * FROM [database_name].[table_name]; 
```

# port - 端口 -v 自我更新找不到 cc

> ID：10138713
> 
> 赞同：0
> 
> 时间：2012-04-13T09:52:00.543
> 
> 标签：port

MBP (10.7.3) Xcode 4.3.1 工作，它编译 ac 程序。

运行 sudo port -v selfupdate BELOW 是 console.log 的一部分

```
configure:2735: result: i386-apple-darwin11.3.0
configure:2763: checking MacPorts version
configure:2766: result: 2.0.4
configure:2799: checking for sw_vers
configure:2817: found /usr/bin/sw_vers
configure:2829: result: /usr/bin/sw_vers
configure:2839: checking for defaults
configure:2857: found /usr/bin/defaults
configure:2869: result: /usr/bin/defaults
configure:2879: checking for xcode-select
configure:2897: found /usr/bin/xcode-select
configure:2909: result: /usr/bin/xcode-select
configure:2919: checking Mac OS X version
configure:2922: result: 10.7.3
configure:2945: checking Xcode location
configure:2948: result: /Applications/Xcode.app/Contents/Developer
configure:3036: checking for gcc
configure:3063: result: /usr/bin/cc
configure:3292: checking for C compiler version
configure:3301: /usr/bin/cc --version >&5
./configure: line 3303: /usr/bin/cc: No such file or directory
configure:3312: $? = 127
configure:3301: /usr/bin/cc -v >&5
./configure: line 3303: /usr/bin/cc: No such file or directory
configure:3312: $? = 127
configure:3301: /usr/bin/cc -V >&5
./configure: line 3303: /usr/bin/cc: No such file or directory
configure:3312: $? = 127
configure:3301: /usr/bin/cc -qversion >&5
./configure: line 3303: /usr/bin/cc: No such file or directory
configure:3312: $? = 127
configure:3332: checking whether the C compiler works
configure:3354: /usr/bin/cc    conftest.c  >&5
./configure: line 3356: /usr/bin/cc: No such file or directory
configure:3358: $? = 127
configure:3396: result: no
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "MacPorts"
| #define PACKAGE_TARNAME "macports"
| #define PACKAGE_VERSION "2.0.4"
| #define PACKAGE_STRING "MacPorts 2.0.4"
| #define PACKAGE_BUGREPORT "macports-dev@lists.macosforge.org"
| #define PACKAGE_URL ""
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:3401: error: in `/opt/local/var/macports/sources/rsync.macports.org/release/base':
configure:3403: error: C compiler cannot create executables
See `config.log' for more details 
```

我需要做什么？Xcode 链接到 C 编译器，并且端口知道 Xcode 位置。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:16:27.460

Xcode 默认不会安装所有命令行工具，即使您过去安装过它们，您也可能会在 Xcode 升级后发现它们丢失了。

在 Xcode 中，转到 Preferences -> Downloads 并确保已安装“命令行工具”。这是一个额外的 115MB 下载。

# c - 使用 OpenCV 读取/写入 AVI 时的最后一帧异常

> ID：10138714
> 
> 赞同：2
> 
> 时间：2012-04-13T09:52:05.130
> 
> 标签：c, opencv, frame

我已经使用 OpenCV 很长一段时间了，我总是或多或少地忽略了在使用 OpenCV 命令编写 AVI 时发生的奇怪现象。但现在我需要它用于另一个目的，它必须是准确的。

当我使用 cvCaptureFromFile（或 FromAVI）读取 XVID 压缩 AVI，然后使用 cvVideoWriter（从 W32 菜单中选择 XVID 压缩）写入帧时，生成的 AVI 总是缺少原始 vid 的最后一帧。除非输入 vid 是未压缩的 AVI，否则在读取时该帧也会被忽略，但在这种情况下，当我选择未压缩（或编解码器）来保存最后一帧时会出现问题，并且程序中止，不会留下可读的 AVI 文件。

我能做些什么呢，有人知道吗？

干杯斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:48:28.230

1) 升级到可用的最新 OpenCV 并重试。

2）如果这不起作用，您将不得不选择另一个多媒体框架来读取帧：[ffmpeg](http://ffmpeg.org/)或[gstreamer](http://gstreamer.freedesktop.org/)。

这就是我现在能想到的。

# java - Spring MVC 形式的对象绑定

> ID：10138715
> 
> 赞同：2
> 
> 时间：2012-04-13T09:52:10.573
> 
> 标签：java, spring, spring-mvc, controller

我正在使用 Spring MVC 开发一个测试应用程序。我有一个`Person`班级和一个`Group`班级。每个`Person`对象都引用一个`Group`对象。

现在我实现了一个显示 Person 数据并允许编辑的 jsp。在我的表单中，我放置了一个选择控件来选择 pearson 的组：

```
<sf:select path="group">
    <sf:options items="${groupList}" itemLabel="name" itemValue="id" />
</sf:select> 
```

它在我加载页面时显示正确的组，但我无法保存更改，因为在控制器中我只得到表示组**id**的字符串。

所以，我的问题是：如何`Group`在我的控制器中获取一个对象而不是它的 id？

**更新** 这里我的控制器代码：

```
@RequestMapping(value = "/details", params = "save", method = RequestMethod.POST)
public String save(@ModelAttribute("person") Person p,
        BindingResult result) {
    this.personManager.savePerson(p);
    return "redirect:/people/details?id=" + p.getId();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T09:56:31.547

通过扩展 PropertyEditorSupport 创建您自己的 GroupEditor（将正确填充组对象实例）。然后将其绑定到您的控制器中：

```
@InitBinder
protected void initBinder(WebDataBinder binder)     {
      binder.registerCustomEditor(Group.class, new GroupEditor(groupService));
} 
```

你的实际编辑器可能看起来像这样：

```
public class GroupEditor extends PropertyEditorSupport{

    private final GroupService groupService;

    public GroupEditor(GroupService groupService){
        this.groupService= groupService;
    }

    @Override
    public void setAsText(String text) throws IllegalArgumentException {
      Group group = groupService.getById(Integer.parseInt(text));
      setValue(group);
    }
} 
```

[春季文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html#beans-beans-conversion-customeditor-registration)

# cocos2d-x - 将 int 转换为 const char *

> ID：10138716
> 
> 赞同：0
> 
> 时间：2012-04-13T09:52:15.507
> 
> 标签：cocos2d-x

在这段代码中：

```
this->_label = CCLabelTTF::labelWithString(number,"Artial", 32); 
```

`number`是 5，但必须是`const char *`.

如何`number`从 an转换`int`为 required `const char *`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:57:09.147

[此处](http://www.cocos2d-iphone.org/api-ref/0.99.5/interface_c_c_label_t_t_f.html)列出的唯一三个参数调用是：

```
+ (id) labelWithString:  (NSString *)  string
       fontName:         (NSString *)  name
       fontSize:         (CGFloat)     size 
```

这意味着*不*`number`应该是a 但确实应该是 a 。*`int``const char *`*

 *如果要使用*字符串* `"5"`而不是*整数* `5`填充它，则需要先将其转换为字符串。

根据您使用的语言，这可能类似于：

```
char buffer[20];
sprintf (buffer, "%d", number); 
```

（对于 C）或在 C++ 中使用类似字符串流的东西。*

# socialengine - Cometchat 安装到社交引擎 3 的第三个子文件夹中？

> ID：10138717
> 
> 赞同：1
> 
> 时间：2012-04-13T09:52:30.623
> 
> 标签：socialengine

我正在为社交引擎 3 安装 cometchat 3.0，但问题是聊天位于 www.domain.com/folder/social-engine/chat/

因为 cometchat 不在第一个子文件夹中，所以它不起作用并且管理页面是空白的。谁能告诉我需要更改哪些文件才能连接到数据库并开始工作？

我在 config.php 中找到了这个：

/* 软件特定信息（请勿触摸）*/

包括目录名（**文件**）.DIRECTORY_SEPARATOR.'integration.php'；

///////////////////////////////////////// ///////////////////////////////////////// ////////////////////////////////

/* 基本 URL 开始 */

定义('BASE_URL','/chat/');

/* 基本 URL 结束 */

/* 数据库 */

include_once dirname(dirname( **FILE** )).DIRECTORY_SEPARATOR."/include/database_config.php";

问题出在这里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:33:17.367

更改以下行 define('BASE_URL','/chat/'); 如下

定义（'BASE_URL'，'/文件夹/社交引擎/聊天/'）；希望它可以解决任何其他问题，请发送电子邮件至 romeosameul@gmail.com

# html - 奇数展示儿童的风格

> ID：10138720
> 
> 赞同：5
> 
> 时间：2012-04-13T09:52:43.500
> 
> 标签：html, css, css-selectors

我正在寻找一种方法来将一些特定样式应用于显示的奇数（或偶数）子项（因此不包括隐藏的子项）。Optionnaly，如果在隐藏的子项显示时应用该样式，那将是完美的！

这是一个实时沙箱：http: [//jsfiddle.net/zrges/1/](http://jsfiddle.net/zrges/1/)

这是我在视觉上想要的：http: [//jsfiddle.net/qJwFj/](http://jsfiddle.net/qJwFj/)（当然，这只是一个显示示例，不要理会我为此编写的蹩脚代码）

我无法使用好的伪类、css 选择器来处理它。

我希望有一个完整的 css/html 解决方案（不是 js/php 解决方案，这更容易）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:28:32.977

看看这个：http: [//jsfiddle.net/qbXVV/18/](http://jsfiddle.net/qbXVV/18/)

HTML：

```
<button id="toggle">Toggle it!</button>
 <table>
  <tr class="sub"><td>Row 1</td></tr>
  <tr class="tag"><td>Row 2</td></tr>
  <tr class="sub"><td>Row 3</td></tr>
  <tr class="tag"><td>Row 4</td></tr>
  <tr class="sub"><td>Row 5</td></tr>
  <tr class="tag"><td>Row 6</td></tr>
  <tr class="sub"><td>Row 7</td></tr>
 </table>​ 
```

CSS：

```
 tr:nth-of-type(even),.bg {
        background-color: gray;
     }

    .hidden {
        display:none;   
    }​ 
```

JS：

```
$(document).ready(function () {
$('#toggle').click(function () {
    $('.tag').toggleClass("hidden");
    $(".sub:nth-child(4n+1)").toggleClass("bg");
});
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:05:25.627

CSS：

```
tr.sub { display: none; }
​.color { background: blue; }​ 
```

js：

```
$(document).ready(function () {
    $('table tr:visible:even').addClass('color');

    $('#toggle').click(function () {
        $('table tr').removeClass('color');
        $('table tr.sub').toggle();
        $('table tr:visible:even').addClass('color');
    });
});​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T09:57:58.847

对于表，您可以使用

```
tr:nth-child(even) { // your style }
tr:nth-child(odd) { // your style} 
```

或者

```
tr:nth-child(2n+0) { // your style }
tr:nth-child(2n+1) { // your style} 
```

# amazon-ec2 - Amazon ELB 自动运行状况检查有什么作用，它有什么期望？

> ID：10138723
> 
> 赞同：20
> 
> 时间：2012-04-13T09:53:10.943
> 
> 标签：amazon-ec2, amazon-web-services, amazon-elb

事情是这样的：

1.  我们已经实现了一个 C++ RESTful API 服务器，带有内置的 HTTP 解析器，没有像 apache 或任何类似的标准 HTTP 服务器
2.  它已经在亚马逊结构中使用了几个月，使用普通和 SSL 通信，没有发现与亚马逊基础设施相关的问题
3.  我们正在使用 Amazon ELB 部署我们的第一个后端
4.  Amazon ELB 有一个可定制的健康检查系统，但也作为一个自动系统，如此[处所述](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/ts-elb-healthcheck.html)
5.  我们没有发现健康检查系统发送了哪些数据的文档
6.  后端简单挂在套接字读取指令上，最终关闭连接

我不是在寻找问题的解决方案，因为后端不是基于标准的 Web 服务器，只要有人知道 ELB 健康检查系统正在发送什么样的消息，因为我们没有找到关于此的文档，任何地方。

非常感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-13T12:06:49.917

> Amazon ELB 有一个可定制的健康检查系统，但也作为一个自动系统，如此[处所述](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/ts-elb-healthcheck.html)

通过*可自定义*，您可能指的是通过 AWS 管理控制台（请参阅[配置健康检查设置](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/configure-healthcheck.html)）或通过 API（请参阅[ConfigureHealthCheck](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/APIReference/API_ConfigureHealthCheck.html)）配置的健康检查。

[HealthCheck](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/APIReference/API_HealthCheck.html)数据类型文档的字段*Target*中概述了通过这种方式配置的运行状况检查的要求：

> 指定被检查的实例。协议是 TCP、HTTP、HTTPS 或 SSL。有效端口的范围是一 (1) 到 65535。
> 
> **笔记**
> 
> *   TCP 是默认值，指定为 TCP: 端口对，例如“TCP:5000”。在这种情况下，健康检查只是尝试在指定端口上打开与实例的 TCP 连接。**未能在配置的超时时间内连接被认为是不健康的。**
>     
>     
> *   SSL 也被指定为 SSL: 端口对，例如 SSL:5000。
>     
>     
> *   **对于 HTTP 或 HTTPS 协议，情况有所不同。**您必须在字符串中包含一个 ping 路径。HTTP 指定为 HTTP:port;/;PathToPing; 分组，例如“HTTP:80/weather/us/wa/seattle”。在这种情况下，将向给定端口和路径上的实例发出 HTTP GET 请求。**超时时间内除“200 OK”之外的任何回答都被认为是不健康的。**
>     
>     
> *   HTTP ping 目标的总长度需要为 1024 个 16 位 Unicode 字符或更少。
>     
>     
> 
> *[强调我的]*

使用*自动*，您可能是指在[为什么健康检查 URL 与 API 和控制台中显示的 URL 不同的](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/ts-elb-healthcheck.html#ts-elb-healthcheck-different-url)*原因中的段落中描述的健康检查？*：

> **除了您为负载均衡器配置的运行状况检查之外，服务还会执行第二次运行状况检查，**以防止实例在未取消注册的情况下终止而导致的潜在副作用。要执行此检查，负载均衡器会在运行状况检查配置使用的同一端口上打开 TCP 连接，然后在运行状况检查完成后关闭连接。*[强调我的]*

段落*解决方案*在这里澄清了有效负载为零，即类似于上面为可配置的健康检查描述的非 HTTP/HTTPS 方法：

> 这种额外的健康检查不会影响您的应用程序的性能，因为它不会向您的后端实例发送任何数据。您不能禁用或关闭此运行状况检查。

## 总结/解决方案

假设您的*RESTful API 服务器，内置 HTTP 解析器*应该只服务于 HTTP，您将需要处理两个健康检查：

1.  您将自己配置*为 HTTP:port;/;PathToPing*的第一个- 您将收到一个`HTTP GET`请求，并且必须`200 OK`在指定的超时期限内回答才能被认为是健康的。
2.  第二个由服务自动配置——它将在上面配置的 HTTP 端口上打开一个 TCP 连接，不会发送任何数据，然后在健康检查完成后关闭连接。

总之，您的服务器似乎已经表现得非常好，而您只是对第二次健康检查的行为感到恼火——ELB 是否真的认为您的服务器不健康？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:03:06.603

据我所知，这只是一个寻找 200 OK http 响应的 HTTP GET 请求。

# perl - '*{}' 似乎是一个有效的 Perl5 解引用运算符（perldoc：重载）。它取消引用什么？

> ID：10138727
> 
> 赞同：4
> 
> 时间：2012-04-13T09:53:49.440
> 
> 标签：perl, operator-overloading, pragma, dereference

在阅读 Perl5 的编译指示*重载*时，我注意到了 operator [`*{}`](http://perldoc.perl.org/overload.html#Overloadable-Operations)。

我想知道是什么样的印记（如果有的话），或者在参考上下文中`*`的含义是什么。`*`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T09:58:12.413

它指的是[typeglob](http://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles)。它可以引用任何类型。他们现在大多是遗产。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T18:37:43.653

`*foo`是“typeglob”，简称“glob”。glob 是一个结构（如在 C 中`struct`），具有名为`ARRAY`、`HASH`、`IO`等的字段。这些字段要么不包含任何内容，要么包含引用。从 Perl 代码的角度来看，它们看起来像非常特殊的哈希。

glob 的主要目的是作为 Perl 符号表的条目来服务。符号表包含属于一个包的所有符号和所有“真正的全局”变量（例如`STDOUT`、`$1`等）。没有符号，就不会有命名的子例程，`@ISA`也不`@EXPORT`存在，也不存在 ,`@_`等`$$`。 [显然，glob 绝对不是遗留的。]

```
$ perl -E'
    our @foo = qw( a b c );
    our %foo = ( d=>4, e=>5 );
    say @{ *foo{ARRAY} };
    say %{ *foo{HASH} };
'
abc
d4e5 
```

Glob 也用作 IO 对象（文件句柄）的包装器。甚至`open(my $fh, ...)`填充`$fh`了一个球体。

Glob 在 Perl 中很少显式使用。一个例外是旧式文件句柄。例如，`FILE`and`STDOUT`实际上表示`*FILE`and `*STDOUT`（当用作文件句柄时），它在术语中用于获取`*FILE{IO}`and `*STDOUT{IO}`。

```
$ perl -e'open(FILE, "echo foo|") or die; print readline(FILE);'
foo

$ perl -e'open(*FILE, "echo foo|") or die; print readline(*FILE);'
foo

$ perl -e'open(*FILE{IO}, "echo foo|") or die; print readline(*FILE{IO});'
foo 
```

**那么为什么要覆盖`*{}`**？

`*{}`如果您想创建一个看起来像文件句柄但实际上不是文件句柄的对象，则需要覆盖。例如，您可以使用此覆盖来使 IO::Socket 对象基于散列的对象，而不是基于 glob 的对象。

# javascript - 如何在javascript中获取多个复选框的值

> ID：10138732
> 
> 赞同：0
> 
> 时间：2012-04-13T09:54:17.610
> 
> 标签：javascript

我在两个项目中使用了复选框，现在我可以获得第二组复选框的值。我使用的第一组复选框：

```
<input name="option" type="checkbox" value="1" id="option1">option 1
<input name="option" type="checkbox" value="2" id="option2">option 2 
```

然后

```
<input name="choice" type="checkbox" value="1" id="choice1">choice 1
<input name="choice" type="checkbox" value="2" id="choice2">choice 2 
```

如何获取选定复选框的值，在每个组中只允许选择 1 个复选框。

我只需要javascript函数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T09:57:38.100

您想要一个**[单选按钮](http://www.w3.org/wiki/HTML/Elements/input/radio)**，（一次只能选择一个选项）

```
<input name="option" type="radio" value="1" id="option1">option 1
<input name="option" type="radio" value="2" id="option2">option 2 
```

* * *

复选框可以通过将 [] 附加到其名称的末尾来分组为数组：

```
<input name="option[]" type="checkbox" value="1" id="option1">option 1
<input name="option[]" type="checkbox" value="2" id="option2">option 2 
```

这**不会**得到您想要的效果，而是将复选框分组，以便它们的所有输入都将产生一个数组。**仍然可以使用此方法选择多个复选框**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T02:58:18.000

如果您使用多个复选框，则可以使用以下代码获取复选框的值。

$('input[name=option]:checked').val();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:11:29.240

使用 jQuery

```
var checked; 
$("input").each(function () {
   if ($(this).is(':checked'))
     checked[ $(this).attr("name")] = $(this).attr("value")
})
//checked is an array/object with all your checked checkboxs 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T10:09:01.517

并将单选按钮的值检索为 **document.formName.radioboxName.value；**

由于您为单选按钮提供相同的名称，因此只能选择一个值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T02:04:28.347

凯瑟琳，如果你想从两个组中选择一个项目，那么你应该选择收音机，否则你不能限制只选择一个复选框，而且你不必为此编写大量价值较低的代码。

您还必须提到复选框数组。您采用的语法是错误的，正确的是

```
<input name="option[]" type="checkbox" value="1" id="option1">option 1
<input name="option[]" type="checkbox" value="2" id="option2">option 2 
```

和收音机

```
<input name="option" type="radio" value="1" id="option1">option 1
<input name="option" type="radio" value="2" id="option2">option 2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-25T05:52:59.520

**没有 jQuery 纯 Javascript**

```
const checkedArr = Array.from(
    document.querySelectorAll(`input[name=myCheckboxGroup]:checked`)).map(node=>node.value); 
```

# php - 如何使用图形 API 将 Facebook 应用图像替换为个人资料图片？

> ID：10138734
> 
> 赞同：0
> 
> 时间：2012-04-13T09:54:23.147
> 
> 标签：php, facebook-graph-api

我使用此代码，但它不工作

```
$uid =$facebook->getUser(); 
$picture="http://graph.facebook.com/".$uid."/picture?type=large"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:06:26.917

你分享的代码，是一个Graph API调用来获取用户图片，
你可以使用这个函数来获取用户图片：

```
function avatar($id,$size) {
    if ($size) {
        $size = '?type='.$size.'';
    }
    return '<img src="https://graph.facebook.com/'.$id.'/picture'.$size.'" alt="" />';
} 
```

我传递了图片大小的第二个变量，所以你可以像这样使用它：

```
echo avatar($uid,'square'); 
```

# c - sscanf 是否修改传递给它的字符串？

> ID：10138738
> 
> 赞同：0
> 
> 时间：2012-04-13T09:54:50.647
> 
> 标签：c, glibc, scanf

我可以知道 sscanf 是否修改了传递给它的字符串。或者谁能​​指出我在哪里可以找到 sscanf 的源代码？

我下载了 glibc 并发现以下内容：

```
extern int sscanf (__const char *__restrict __s,
               __const char *__restrict __format, ...) __THROW;
extern int sscanf (__const char *__restrict __s,
               __const char *__restrict __format, ...) __THROW; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T09:57:19.947

`sscanf`从不修改您传递给它的字符串；你可以通过`const`限定词来判断。

`sscanf`您可以在其[Gitweb](http://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/sscanf.c;h=0787b59a3f1d421910fcf3866a4997529834cfa5;hb=HEAD)上找到 Glibc 源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:08:33.970

有几个很好的 C 资源。因为`glibc`，[GNU C 库参考手册](http://www.gnu.org/software/libc/manual/)应该是你的圣经。同样，一般来说，查找特定命令的文档，谷歌搜索“man 命令”通常会很快找到你想要的东西。

更具体地说`sscanf()`，GNU C 库手册明确指出，

> 如果复制发生在重叠的对象之间，则此函数的行为是未定义的——例如，如果 s 也作为参数给出以接收在 '%s'、'%S' 或 '%[ 控制下读取的字符串' 转换。

所以，通常它不会做任何事情，但是如果你在你正在读取的字符串和你正在分配的变量之间做一些松鼠式的自引用，它将有未定义的行为。

# swing - 绘制 JPanel 时 java.awt.Window.access$700(Window.java:132) 出现 NullPointerException

> ID：10138741
> 
> 赞同：1
> 
> 时间：2012-04-13T09:55:02.067
> 
> 标签：swing, java-2d

我正在尝试`paint(Graphics)`在`JPanel`. 下面的代码片段工作得很好，`JButton`在我的 a 中画得很好`JPanel`：

```
 @Override
        public void paint(Graphics g) {
            super.paint(g);
            JButton btn = new JButton("hello");
            Dimension dim = btn.getPreferredSize();
            btn.setSize(dim.width, dim.height);
            btn.paint(g);   // paint the button
        } 
```

该代码片段也适用`JLabel`于`JTree`除`JPanel`. 下面的代码会引起很奇怪`NullPointerException at java.awt.Window.access$700(Window.java:132)`。

```
 @Override
        public void paint(Graphics g) {
            super.paint(g);
            JPanel panel = new JPanel();
            panel.setSize(10, 10);
            panel.paint(g);   // paint the panel
        } 
```

这里是完整的堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at java.awt.Window.access$700(Window.java:132)
    at java.awt.Window$1.isOpaque(Window.java:3458)
    at javax.swing.RepaintManager.getVolatileOffscreenBuffer(RepaintManager.java:983)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1395)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:294)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1224)
    at javax.swing.JComponent.paint(JComponent.java:1015)
    at test.paintcontainer.TestPaintContainerMain$TestContentPane.paint(TestPaintContainerMain.java:48)
    at javax.swing.JComponent.paintChildren(JComponent.java:862)
    at javax.swing.JComponent.paint(JComponent.java:1038)
    at javax.swing.JLayeredPane.paint(JLayeredPane.java:567)
    at javax.swing.JComponent.paintChildren(JComponent.java:862)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5131)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:278)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1224)
    at javax.swing.JComponent.paint(JComponent.java:1015)
    at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:21)
    at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:60)
    at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:97)
    at java.awt.Container.paint(Container.java:1780)
    at java.awt.Window.paint(Window.java:3375)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:796)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:713)
    at javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:693)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:125)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

知道如何解决这个问题吗？我需要绘制`JPanel`内部`paint(Graphics)`方法。我编写了一个简单的测试应用程序，您可以复制粘贴它来重现上述异常：

```
package test.paintcontainer;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRadioButton;

public class TestPaintContainerMain extends JFrame {

    public static void main(String[] args) {
        TestPaintContainerMain test = new TestPaintContainerMain();
        test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        test.setBounds(0, 0, 300, 200);
        test.setContentPane(new TestContentPane());
        test.setVisible(true);
    }

    static class TestContentPane extends JPanel {

        JRadioButton paintButtonCheck;

        JRadioButton paintPanelCheck;

        public TestContentPane() {
            paintButtonCheck = createRadioButton("paint button", true);
            paintPanelCheck = createRadioButton("paint panel", false);
            ButtonGroup buttonGroup = new ButtonGroup();
            buttonGroup.add(paintButtonCheck);
            buttonGroup.add(paintPanelCheck);
            add(paintButtonCheck);
            add(paintPanelCheck);
        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);

            g.translate(100, 100);
            if (paintButtonCheck.isSelected()) {
                createButton().paint(g);
            } else {
                createPanel().paint(g);
            }
        }

        private JButton createButton() {
            JButton button = new JButton("button");
            button.setSize(button.getPreferredSize().width, button.getPreferredSize().height);
            return button;
        }

        private JPanel createPanel() {
            JPanel panel = new JPanel();
            panel.setBackground(Color.GREEN);
            panel.add(createButton());
            panel.setSize(panel.getPreferredSize().width, panel.getPreferredSize().height);
            return panel;
        }

        private JRadioButton createRadioButton(String title, boolean selected) {
            JRadioButton radio = new JRadioButton(title, selected);
            radio.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    TestContentPane.this.repaint();
                }
            });
            return radio;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:32:36.910

这很可能**不是**Swing 中的错误，而是更多的问题，因为您正在尝试绘制尚未*实现*的组件，这意味着它没有活动的图形上下文。您可以通过将组件添加到已实现的组件（如 JFrame）来实现组件 - 它本身由`setVisible(true)`.

也可能永远不要`JComponent.paint(Graphics)`手动调用，因为这是 Swing 的工作（更准确地说是 Event Dispatcher Thread）——它甚至在`paint`方法的文档中这么说：

> 应用程序不应直接调用paint，而应使用repaint 方法来安排组件重绘。

您可以调用的是方法`printAll(Graphics g)`，它绘制组件及其所有子组件。同样在 Swing 中，一个也不*应该*覆盖`paint`但是`paintComponent`。

所以这是一个测试代码：

```
 JButton button = createButton();
    JPanel panel = createPanel();

    public TestContentPane() {
        paintButtonCheck = createRadioButton("paint button", true);
        paintPanelCheck = createRadioButton("paint panel", false);
        ButtonGroup buttonGroup = new ButtonGroup();
        buttonGroup.add(paintButtonCheck);
        buttonGroup.add(paintPanelCheck);
        add(paintButtonCheck);
        add(paintPanelCheck);

        //Hack, just prove something (realize both components)
        add(panel);
        add(button);
    }

    ...

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        g.translate(100, 100);
        if (paintButtonCheck.isSelected()) {
            button.paintAll(g);
        } else {
            panel.paintAll(g);
        }
        g.translate(-100, -100);
    } 
```

这应该可以工作（尽管您显然会在屏幕上有两个您不想要的组件）。还要注意“重置”图形对象，因为之后 Swing 仍会使用它。

* * *

所以这是理论，但它还不是一个实际的解决方案。

我对您的问题的解决方案是：“不要这样做”！

组件*不像*图像，因为它们在任何地方看起来都不一样。调用的输出`paintAll`会有所不同，具体取决于实现组件的方式（或位置）。

所以一个建议是展示*实际*的组件。创建您的工具提示框，添加您的面板和按钮，然后**让它们自己绘制**。您甚至可以对这些组件进行子类化并覆盖它们的`paintComponent()`方法，添加透明度等等。这将需要一些工作，但 Swing 从来就不是一件容易的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:33:57.370

我刚刚找到了解决方案。我的问题中对示例代码的唯一修改是我试图绘画时调用`panel.setDoubleBuffered(false)`的那个。`JPanel`

但是，我仍然认为例外是 Swing 错误。如果应按设计关闭双缓冲，则不应得到`NullPointerException`其他更有意义的异常来解释该情况。

这是一个固定的示例应用程序：

```
package test.paintcontainer;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRadioButton;

public class TestPaintContainerMain extends JFrame {

    public static void main(String[] args) {
        TestPaintContainerMain test = new TestPaintContainerMain();
        test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        test.setBounds(0, 0, 300, 200);
        test.setContentPane(new TestContentPane());
        test.setVisible(true);
    }

    static class TestContentPane extends JPanel {

        JRadioButton paintButtonCheck;

        JRadioButton paintPanelCheck;

        public TestContentPane() {
            paintButtonCheck = createRadioButton("paint button", false);
            paintPanelCheck = createRadioButton("paint panel", true);
            ButtonGroup buttonGroup = new ButtonGroup();
            buttonGroup.add(paintButtonCheck);
            buttonGroup.add(paintPanelCheck);
            add(paintButtonCheck);
            add(paintPanelCheck);
        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);

            g.translate(100, 100);
            if (paintButtonCheck.isSelected()) {
                createButton().paint(g);
            } else {
                createPanel().paint(g);
            }
        }

        private JButton createButton() {
            JButton button = new JButton("button");
            button.setSize(button.getPreferredSize().width, button.getPreferredSize().height);
            return button;
        }

        private JPanel createPanel() {
            JPanel panel = new JPanel();
            panel.setBackground(Color.GREEN);
            panel.add(createButton());
            // --------------------------------
            panel.setDoubleBuffered(false);  // <-- TURN OFF DOUBLE BUFFERING
            // --------------------------------
            panel.setSize(panel.getPreferredSize().width, panel.getPreferredSize().height);
            return panel;
        }

        private JRadioButton createRadioButton(String title, boolean selected) {
            JRadioButton radio = new JRadioButton(title, selected);
            radio.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    TestContentPane.this.repaint();
                }
            });
            return radio;
        }
    }

} 
```

# .net - 找不到默认端点元素 .NET 4.0

> ID：10138750
> 
> 赞同：1
> 
> 时间：2012-04-13T09:55:53.727
> 
> 标签：.net, wcf, wcf-binding, endpoint

我已将代理添加到 VS2010/.NET 4solution 的 web 服务。我的机器是windows 7操作系统。构建客户端 .NET 时会引发此错误：

> 在 ServiceModel 客户端配置部分中找不到名称为“FulfilmentServicesSoap”和合同“FulfimentServiceSoap.FulfilmentServicesSoap”的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素。

我在这里找到了一个关于 SO 的类似问题：

[找不到默认端点元素](https://stackoverflow.com/questions/352654/could-not-find-default-endpoint-element)

但是，通读此书并尝试一些答案对我没有用。我已经多次编辑了 app.config 文件，包括：

合同="IFulfimentServiceSoap" 名称="FulfilmentServicesSoap" />

和

contract="FulfimentServiceSoap.FulfilmentServicesSoap" name="FulfilmentServicesSoap" />

和

contract="MYFullNamespace.FulfimentServiceSoap.FulfilmentServicesSoap" name="FulfilmentServicesSoap" />

但是，在每种情况下，当我运行我的 Web 服务时，即使我编辑了配置文件，事件查看器也会显示合同“FulfimentServiceSoap.FulfilmentServicesSoap”。我还必须做些什么来获取 app.config 文件中的更改或有任何其他想法吗？

编辑 - 从 app.config 添加绑定信息

```
<system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="FulfilmentServicesSoap" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost/WLR3.Web.services/FulfilmentServices.asmx"
                binding="basicHttpBinding" bindingConfiguration="FulfilmentServicesSoap"
               contract="FulfimentServiceSoap.FulfilmentServicesSoap"name="FulfilmentServicesSoap" />
        </client>
    </system.serviceModel> 
```

编辑 - 创建客户端的代码。

```
FulfimentServiceSoap.FulfilmentServicesSoap fulfilmentServices = new FulfimentServiceSoap.FulfilmentServicesSoapClient("FulfilmentServicesSoap"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:11:07.320

如果您部署的项目不使用 web.config 或 app.config（例如 Sharepoint Feature），则您的代码块无法读取 web 或应用程序配置，并且可能会出现以下异常。

您可以在调用 Web 服务之前使用以下代码块来操作 Web 或应用程序配置条目。

```
BasicHttpBinding httpBinding = new BasicHttpBinding();
httpBinding.Name = "DMS_WSSoap";
httpBinding.CloseTimeout = new TimeSpan(0, 1, 0);
httpBinding.OpenTimeout = new TimeSpan(0, 1, 0);
httpBinding.ReceiveTimeout = new TimeSpan(0, 10, 0);
httpBinding.SendTimeout = new TimeSpan(0, 1, 0);
httpBinding.AllowCookies = false;
httpBinding.BypassProxyOnLocal = false;
httpBinding.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;
httpBinding.MaxBufferSize = 65536;
httpBinding.MaxBufferPoolSize = 524288;
httpBinding.MaxReceivedMessageSize = 65536;
httpBinding.MessageEncoding = WSMessageEncoding.Text;
httpBinding.TextEncoding = Encoding.UTF8;
httpBinding.TransferMode = TransferMode.Buffered;
httpBinding.UseDefaultWebProxy = true;

httpBinding.ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas();
httpBinding.ReaderQuotas.MaxDepth = 32;
httpBinding.ReaderQuotas.MaxStringContentLength = 8192;
httpBinding.ReaderQuotas.MaxArrayLength = 16384;
httpBinding.ReaderQuotas.MaxBytesPerRead =  4096;
httpBinding.ReaderQuotas.MaxNameTableCharCount =16384;

httpBinding.Security.Mode = BasicHttpSecurityMode.None;
httpBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;
httpBinding.Security.Transport.ProxyCredentialType = HttpProxyCredentialType.None;
httpBinding.Security.Transport.Realm = "";
httpBinding.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.UserName;

//The url of web services.
EndpointAddress endpoint = new EndpointAddress("http://localhost/_layouts/DMS_WS/DMS_WS.asmx");

//one of the example web service which has been referenced in visual studio IDE.
LibraryWatcherWebService.DMS_WSSoapClient lservice = new LibraryWatcherWebService.DMS_WSSoapClient( httpBinding, endpoint); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T13:26:28.353

好吧，无论如何，我都想通了 - 会在这里发布，以防它帮助其他人。创建的 DLL 我复制到了我的 Application/Libraries 文件夹中。（我没有复制创建的 app.config 文件）。在我创建客户端的代码中，我编写了绑定和端点地址详细信息，然后将它们传递给 SoapClient 构造函数。所以我的代码如下所示：

```
BasicHttpBinding binding = new BasicHttpBinding();
EndpointAddress remoteAddress = new EndpointAddress("http://localhost/WLR3.Web.services/FulfilmentServices.asmx");
binding.Name = "FulfilmentServicesSoap";
binding.AllowCookies = false;

FulfimentServiceSoap.FulfilmentServicesSoap fulfilmentServices = new FulfimentServiceSoap.FulfilmentServicesSoapClient(binding, remoteAddress); 
```

# iphone - 无法处理 UIBarButtonItem 事件

> ID：10138753
> 
> 赞同：1
> 
> 时间：2012-04-13T09:56:10.220
> 
> 标签：iphone, events, uibarbuttonitem

我有一个`UIImageView`，我将其添加为 a 的背景`UIBarButtonItem`。我将 UIBarButtonItem 作为导航控制器的右侧 barbuttonitem。我在调试时无法处理`UIBarButtonItem`单击事件，因为控件没有进入方法。这可能是什么原因？

```
UIImageView *myImage = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,32,32)];
    [myImage setImage:[UIImage imageNamed:@"logo.png"]];
    UIBarButtonItem *rightBarButton = [[UIBarButtonItem alloc] initWithCustomView:myImage];
    //rightBarButton.target = self;
    //rightBarButton.action = @selector(onMyMethod);
    if(isRight){
        self.navigationItem.rightBarButtonItem = rightBarButton;
        self.navigationItem.rightBarButtonItem.target = self;
        self.navigationItem.rightBarButtonItem.action = @selector(onMyMethod);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:39:09.200

我认为使用 UIBarButton 的 initWithCustomView 时目标和操作不起作用，因此您可以使用类似的东西-

```
UIImageView *myImage = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,32,32)];
[myImage setImage:[UIImage imageNamed:@"logo.png"]];

UIButton* rightButton = [UIButton buttonWithType: UIButtonTypeInfoLight];
[rightButton addTarget:self 
                action:@selector(onMyMethod:) 
      forControlEvents:UIControlEventTouchDown];

UIBarButtonItem *rightBarButton = [[UIBarButtonItem alloc] initWithCustomView:rightButton]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:06:06.513

编辑您的代码：

```
UIImageView *myImage = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,32,32)];
myImage. userInteractionEnabled = Yes;
[myImage setImage:[UIImage imageNamed:@"logo.png"]];
UIBarButtonItem *rightBarButton = [[UIBarButtonItem alloc] initWithCustomView:myImage];

if(isRight)
{
    self.navigationItem.rightBarButtonItem = rightBarButton;
    self.navigationItem.rightBarButtonItem.target = self;
    self.navigationItem.rightBarButtonItem.action = @selector(onMyMethod:);
} 
```

试试这个谢谢:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T04:18:24.080

按照 RIP 的回答，我更改了`UIBarButtonItem`并创建了一个`UIButton`并将其添加为导航控制器的子视图

```
 UIImage *image = [UIImage imageNamed:@"logo.png"];

        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        [button setBackgroundImage:image forState:UIControlStateNormal];

        [button addTarget:self action:@selector(onMyMethod:)  forControlEvents:UIControlEventTouchUpInside];
        CGRect frame = CGRectMake(260.0, 7.0, 32.0, 32.0);
        button.frame = frame;
        [button setBackgroundImage:image forState:UIControlStateNormal];
        [self.navigationController.navigationBar addSubview:button]; 
```

# php - Magento 从具有名称、图像和描述的特定类别中获取产品

> ID：10138754
> 
> 赞同：1
> 
> 时间：2012-04-13T09:56:10.463
> 
> 标签：php, magento

之前问过这个，但不幸的是这个问题没有答案。

如何从具有名称、图像和描述的特定类别中获取产品？

迈克尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T10:05:50.383

```
$category = Mage::getModel('catalog/category')->load($your_category_id);
$collection = $category->getProductCollection();
$collection->addAttributeToSelect('name');
$collection->addAttributeToSelect('description');
$collection->addAttributeToSelect('image');
$products = $collection->getItems(); 
```

不完全确定图像属性，如果失败，您始终可以为单个产品执行`$product->load($product->getId())`加载所有数据。

# android - PutExtra 在检索器端不起作用

> ID：10138756
> 
> 赞同：2
> 
> 时间：2012-04-13T09:56:13.000
> 
> 标签：android

我想将意图从第一个活动发送到另一个活动。

第一个活动向第二个活动发送一个意图，以便创建一个新的 AlertDialog，从用户那里接收一个数字并将该数字发送回第一个活动，这就是 putExtra 数据失败的地方。

第一个活动的代码：GuessItActivity.java

```
 Intent intent = new Intent(GuessItActivity.this,
                        AlertDialogMessage.class);
                intent.addFlags(Intent.FILL_IN_DATA);
                intent.addFlags(Intent.FILL_IN_CATEGORIES);
                intent.addFlags(Intent.FILL_IN_ACTION);

                intent.putExtra("data1", 15);
                startActivityForResult(
                        intent,
                        getResources().getInteger(
                                R.integer.ALERT_DIALOG_MESSAGE)); 
```

在检索器端，例如 AlertDialogMessage.java 上的第二个活动端

```
 public void onClick(DialogInterface dialog,
                                int which) {
                            // "OK" button pressed
                            int userGuess = Integer.parseInt(input
                                    .getText().toString());
                            Intent intent = getIntent();
                            if (intent == null)
                                return;

                            int data1 = intent.getIntExtra("data1", -1);
                            if (data1 != 15 )
                                return; // data1 ==15 

                            intent.putExtra("data2", 25);           
                            if (getParent() == null) {
                                setResult(Activity.RESULT_OK, intent);
                            } else {
                                getParent().setResult(Activity.RESULT_OK,
                                        intent);
                            }
                            finish(); 
```

第一个活动端：回到GuessItActivity.java

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == getResources().getInteger(
            R.integer.ALERT_DIALOG_MESSAGE)) {
        if (resultCode == RESULT_OK) {
            Intent intent = getIntent();
            if (intent==null)
                return; 

              Bundle extra = getIntent().getExtras();
            if (extra != null) {
                int _data1 = extra.getInt("data1");
                int _data2 = extra.getInt("data2");
            }
               // extra  == null , what am I doing wrong  ? 

            int data1 = intent.getIntExtra("data1",-1);
            int data2 = intent.getIntExtra("data2",-1);
            if ((data1==-1)&&(data1==-1))
                return; 
```

问题是，我收到的 data1 和 data2 等于 -1。

我想收到我放在第二个活动中的数据。例如 data1 == 15 和 data2 == 25

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:09:18.850

尝试

```
Bundle extra=data.getExtras(); 
```

安装在

```
Bundle extra=getIntent().getExtras(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:03:51.057

试试这个方法

```
 int data1,data2;
  Bundle extra=getIntent().getExtras();
  if(extra!=null){
  data1=extra.getInt("data1");
  data2=extra.getInt("data2");
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:57:28.987

在 onActivityResult 你不应该打电话

```
intent = getIntent(); 
```

直接你得到了

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
```

其中 data 对应于从警报框活动发送的数据。直接调用就好了

```
data.getIntExtra("data2", -1); 
```

应该做。希望我足够清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T10:02:15.903

试试这个。

```
 Bundle extras = getIntent().getExtras();
 int a=extras.getInt("data1"); 
```

# groovy - Groovy 每个方法/闭包

> ID：10138762
> 
> 赞同：1
> 
> 时间：2012-04-13T09:56:37.593
> 
> 标签：groovy, closures

使用和使用有什么区别

```
teams.each(){ team->
//iterate through each team
} 
```

和

```
teams.each { team->
//iterate through each team
} 
```

请注意，在第一个之后和关闭之前都有一个括号。我们正在对我们的应用程序进行一些负载测试，并注意到当我们使用第一个时，有一些线程在等待这个调用。但在第二种情况下，一切顺利。

我很想知道这里有什么区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T09:59:56.320

没什么，它们是一样的。在 Groovy 中，如果函数的最后一个参数是闭包，那么它可以出现在大括号之外，例如：

```
[1,2,3].inject( 0 ) { acc, it -> acc + it } 
```

和

```
[1,2,3].inject( 0, { acc, it-> acc + it } ) 
```

是一样的东西。编写 groovy 的常用方法是在您的示例中省略大括号，或者在`inject`上面的示例中将闭包放在大括​​号之外

# wpf - 即使它的子项之一未选中，DataGrid 标头也应未选中

> ID：10138767
> 
> 赞同：1
> 
> 时间：2012-04-13T09:57:06.710
> 
> 标签：wpf, datagrid, checkbox

![在此处输入图像描述](../Images/2da0590d60ddd4b0d99c0f3192021b0b.png)这是我在此的头一篇博文。

我遇到的问题与DataGrid（WPF）中的复选框有关。抱歉，由于我是新用户，因此无法附上屏幕截图以便更好地理解问题。

问题：即使其中一个子项未选中，也会选中 DataHeader 列复选框。我希望解决方案能够解决此问题，以便当用户明确取消选中其中一个孩子时，应该隐式取消选中 ALL(Header)。

请帮助大家...谢谢！

请检查链接。我希望解决方案像这样工作。[http://www.codeproject.com/Articles/42437/Toggling-the-States-of-all-CheckBoxes-Inside-a-Dat#](http://www.codeproject.com/Articles/42437/Toggling-the-States-of-all-CheckBoxes-Inside-a-Dat#)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T14:08:08.863

我建议您有一个绑定到视图模型的视图。在我的代码中，此视图模型具有绑定到 gridview ItemsSource 的元素集合和表示列标题状态的属性 HeaderChecked。每个元素都有一个属性 IsChecked。当然 ViewModel 支持 INotifyPropertyChanged。

这是一段**ViewModel**的代码（DataEventsSource 只是实现了 INotifyPropertyChanged）：

```
public class MainViewModel : DataEventsSource
{
    private ObservableCollection<Element> _elements = new ObservableCollection<Element>
                                                          {
                                                              new Element {IsChecked = false},
                                                              new Element {IsChecked = false},
                                                              new Element {IsChecked = false},
                                                              new Element {IsChecked = false}
                                                          };

    public MainViewModel()
    {
        foreach (var element in _elements)
        {
            element.PropertyChanged += OnElementPropertyChanged;
        }
    }

    private void OnElementPropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == "IsChecked")
        {
            bool? headerChecked = null;
            if (Elements.All(el => el.IsChecked))
            {
                headerChecked = true;
            }
            if (Elements.All(el => !el.IsChecked))
            {
                headerChecked = false;
            }

            HeaderChecked = headerChecked;
        }

    }

    public ObservableCollection<Element> Elements
    {
        get
        {
            return _elements;
        }
        set
        {
            _elements = value;
        }
    }

    private bool? _headerChecked = false;
    public bool? HeaderChecked
    {
        get
        {
            return _headerChecked;
        }
        set
        {
            _headerChecked = value;
            OnPropertyChanged("HeaderChecked");
        }
    }
}

public class Element : DataEventsSource
{
    private bool _isChecked;
    public bool IsChecked
    {
        get
        {
            return _isChecked;
        }
        set
        {
            _isChecked = value;
            OnPropertyChanged("IsChecked");
        }
    }
} 
```

如您所见，当集合元素发生更改时，HeaderChecked 属性在 OnElementPropertyChanged 方法中更新。

这是观点：

**代码隐藏**：

```
public partial class MainWindow
{
    private readonly MainViewModel _viewModel = new MainViewModel();

    public MainWindow()
    {
        InitializeComponent();
        DataContext = _viewModel;
    }

    private void CheckBox_Checked(object sender, RoutedEventArgs e)
    {
        foreach (var element in _viewModel.Elements)
        {
            element.IsChecked = true;
        }
    }

    private void CheckBox_UnChecked(object sender, RoutedEventArgs e)
    {
        foreach (var element in _viewModel.Elements)
        {
            element.IsChecked = false;
        }
    }
} 
```

接下来是**XAML**的主网格（为简单起见，它只包含一列）：

```
<Grid x:Name="LayoutRoot">
    <DataGrid x:Name="dataGrid" CanUserAddRows="False" AutoGenerateColumns="False" ItemsSource="{Binding Elements}">
        <DataGrid.Columns>
            <DataGridCheckBoxColumn x:Name="checkboxColumn" Binding="{Binding IsChecked, Mode=TwoWay}"  IsThreeState="True" Width="50"  >
                <DataGridCheckBoxColumn.HeaderTemplate>
                    <DataTemplate x:Name="dtAllChkBx">
                        <CheckBox Name="cbxAll" Content="Label" IsChecked="{Binding Path=DataContext.HeaderChecked, ElementName=LayoutRoot, Mode=TwoWay}" Checked="CheckBox_Checked"  Unchecked="CheckBox_UnChecked"></CheckBox>
                    </DataTemplate>
                </DataGridCheckBoxColumn.HeaderTemplate>
            </DataGridCheckBoxColumn>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

我希望这段代码对你有帮助，如果我误解了你，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:55:43.970

```
//this event is for **Checked and UnChecked** of up check box (cbxall)
private void UpCheckbox_Checked(object sender, RoutedEventArgs e)
{
    //checkBox1 = cbxall (your up checkbox)
    if (checkBox1.IsChecked == true)
    {
        dataGrid1.Items.OfType<YourClass>().ToList().ForEach(x => x.IsChecked = true);
    }
    else
    {
        dataGrid1.Items.OfType<YourClass>().ToList().ForEach(x => x.IsChecked = false);
    }
}

//this event is for all other check box
//**Checked and UnChecked** of all other check box is this event
private void OtherCheckbox_Checked(object sender, RoutedEventArgs e)
{
    //checkBox1 = cbxall (your up checkbox)
    if (dataGrid1.Items.OfType<YourClass>().All(x => x.IsChecked == true))
    {
        checkBox1.IsChecked = true;
    }
    else if (dataGrid1.Items.OfType<YourClass>().All(x => x.IsChecked == false))
    {
        checkBox1.IsChecked = false;
    }
    else
    {
        checkBox1.IsChecked = null;
    }
} 
```

...

# java - 如何使用具有 POST 请求的 JSOUP 重定向到主页？

> ID：10138781
> 
> 赞同：2
> 
> 时间：2012-04-13T09:58:35.470
> 
> 标签：java, html, post, html-parsing, jsoup

我想`login`进入一个网站，`JSOUP`并`login`使用`post`请求完成。

对于`login`，我写了代码：

```
Document doc = Jsoup.connect("http://www.mysite.com/home")
  .data("username", "myusername")
  .data("pass", "mypassword")
  .userAgent("Mozilla")
  .post(); 
```

我能够重定向到网站的主页，我通过以下代码打印 HTML 来确认这一点。

```
System.out.println(doc.html()); 
```

现在该网站已经增强了安全功能，用户在`login`之后不是将其重定向到主页，而是重定向到要求回答安全问题的页面。

在填写答案`textbox`并单击`submit`按钮后，它将用户重定向到主页。

现在，当我通过 尝试相同的事情时`JSOUP`，上面的相同代码会将我重定向到安全问题页面。

如何填写安全问题的答案并重定向到主页？

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:16:16.893

您可以使用隐藏的 iframe 加载安全问题页面并在页面中使用 js 填写答案，这会有点复杂，因为您必须先从用户那里获得安全答案，然后再尝试登录。这是可能的，但我会说这是一个**糟糕的设计**，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:49:58.123

按照其他人的建议下载 Firebug 并打开（并启用）NET 面板。在您访问的网站上提交安全问题表单，并`POST`在 Firebug 中查看请求。你可以像上面那样复制这个请求，Jsoup 应该返回结果响应。

我从来没有使用过 Jsoup 的 .post() 方法，但是以这种方式连接时我总是成功：

```
Document resultPage;

try {
    resultPage = Jsoup.connect("http://urlHere/")
    .userAgent("Whatever")
    .method(Method.POST)
    .execute()
    .parse();
} catch (IOException e) {
    //Whatever
} 
```

希望能帮助到你！

# wcf - 多次调用后 wcf 服务中的会话为空

> ID：10138785
> 
> 赞同：1
> 
> 时间：2012-04-13T09:58:47.830
> 
> 标签：wcf, session

我有一个完全建立在 wcf 服务上的网站，我所有的 html 都是由 wcf 服务生成的，而且所有事件都在 wcf 服务中。该网站运行良好，但在四五个 wcf 服务调用之后，会话丢失，如果我刷新页面，那么一切都会恢复，但在 4 或 5 次调用之后也会发生同样的事情。最大的问题是，在本地主机上，这只会出现在实时环境中，知道从哪里开始这个问题吗？

这是示例代码：

```
 [OperationContract]
       [WebInvoke(ResponseFormat = WebMessageFormat.Json, Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "GetMemberRank")]
    public string GetMemberRank()
    {
        StringBuilder returnResult = new StringBuilder();
        //a call to fix current culture of this current thread.
        Helper.InitializeServiceCall(null); 
```

这是通话的结束

```
 //Set the http status code
            currentContext.OutgoingResponse.StatusCode = System.Net.HttpStatusCode.OK;
            //set the msg
            currentContext.OutgoingResponse.Headers.Add("Action", messageTypeText); 
```

这是一些javascript

```
 $.ajax({
        url: this.URL,
        dataType: this.DataType,
        type: this.Type,
        processData: false,
        contentType: ContentType,
        data: ContentType == 'application/json' ? JSON.stringify(this.Data) : this.Data,
        success: function (returnedResult, statusText, jqXHR) { 
```

# asp.net - 在 UpdatePanel 中生成了重复的 GridView

> ID：10138786
> 
> 赞同：0
> 
> 时间：2012-04-13T09:58:49.740
> 
> 标签：asp.net, gridview, asp.net-ajax, updatepanel, ajaxcontroltoolkit

我正在使用 ASP.NET 3.5 Webform。通过使用 UpdatePanel，我在 ASP.NET 3.5 页面中遇到了重复不需要的 GridView 渲染的问题。

事实上，我在 UpdatePanel （条件模式）之外有 3 个下拉列表。在 UpdatePanel 内部，有一个 GridView。GridView的数据会根据3DropdownList中SelectedItem的变化自动过滤。

一切正常，除了一个奇怪的行为：

*   当我使用 3 DropDownList 创建无结果过滤器时
*   然后我重新选择了 DropDownList 以生成带有数据的过滤器，但是在 HTML 页面中会生成重复的 GridView，这会引发以下客户端错误：“找到具有相同 ID 'myGridView$SelectedRowPosition' 的多个控件。跟踪要求控件具有唯一的 ID。”

有没有人曾经遇到过这样的问题并提出解决方案？

预先感谢您的帮助，

此致，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:51:28.240

您可能会忘记关闭一些标签。检查页面上未关闭的标签。

# magento - Magento - Solr - 损坏的索引

> ID：10138787
> 
> 赞同：2
> 
> 时间：2012-04-13T09:58:52.413
> 
> 标签：magento, solr

Magento Solr 搜索引擎有问题。我们每晚刷新一次搜索索引。搜索索引更新设置为“手动更新”。每晚更新由 cron 完成。

有时有些产品无法通过搜索找到，主要是 1 次商店浏览（我们有 4 次商店浏览）。这对我们来说（显然）是有问题的，因为它通常是受欢迎的产品。搜索结果（例如来自 magento 中的搜索查询表）清楚地显示商店视图出现了问题：对于相同的查询，所有其他商店视图都有相同数量的结果，有问题的商店视图有 0 个结果。

不是没有产品被索引，很多产品仍然被发现，只是似乎有些子集没有被索引。

奇怪的是，当我们做一个新的（catalogsearch_fulltext 索引的）重新索引时，它又可以完美地工作了。

据我们所知，没有任何不同的设置适用于任何商店/商店视图。我们对 Solr 引擎几乎一无所知。

帮助/想法表示赞赏。

# c - 为什么当我将数组作为函数参数传递时指针会丢失其引用？C

> ID：10138789
> 
> 赞同：-1
> 
> 时间：2012-04-13T09:58:55.330
> 
> 标签：c

我的问题是有这个代码：

```
int size=4384;
char buffer[size];
codifyDHCPmessage(buffer, message, size); 
```

其中 message 是一个仅包含 char[] 的结构，函数在缓冲区中返回结构中的所有字段。

我通过缓冲区数组对其进行测试，并检查所有字段是否正常。

但我的问题是，如果我再次将该缓冲区传递给一个新函数：

```
decodifyDHCPmessage(buffer,messageAux, size); 
```

我在该函数中做的第一件事是检查缓冲区的大小，它只告诉我是 4，而它应该是 4384....我不知道为什么。

我不得不说我不是 C 方面的专家，指针和内存分配问题对我来说很难。

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T10:00:52.613

当作为参数传递给函数时，静态堆栈数组“衰减”为普通的旧指针。然后发生的事情是使用`sizeof`获取指针的大小，而不是数组。您需要将数组大小作为另一个参数传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T10:01:21.127

当一个数组被传递给一个函数时，**实际上指向它的基地址的指针被传递了**。现在，如果你应用`sizeof`它，它只返回 4，即 32 位系统上指针的大小。

如果你真的想要 中的字符数`buffer`，你需要确保它在传递它之前是空终止的，然后在被调用的函数中，使用类似`strlen`计算大小的东西，或者你必须在调用者本身中计算数组大小（其中数组已定义并且`sizeof`可以正常工作）然后将其发送到要调用的函数。

您已经将数组的大小作为参数发送。**但是如果想知道数组中的*实际***字符数，那么你可以做这样的事情 -

```
int size=4384;
char buffer[size];
memset(buffer, 0, size); 
```

然后打电话给你`codifyDHCPmessage`。最后，`decodifyDHCPmessage`你可以在里面做

```
unsigned sz = strlen(buffer); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T10:01:03.787

我怀疑您的函数签名如下所示：

```
void codifyDHCPmessage(char[], message_t, size_t); 
```

（或类似的）

问题是`[]`在函数签名中真的意味着`*`，`char[]`即是真的`char*`。换句话说，数组参数衰减为一个大小为 4 的指针，这并不奇怪。

据我所知（但我可能错了……），C 根本不允许您将数组传递给函数，它只支持指针。这就是为什么您需要将大小作为显式的单独参数传递的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T10:02:42.060

在 C/C++ 中，缓冲区参数作为指针传递给函数==> 它以字节为单位返回 sizeof 指针 - 4。

# php - php写入文件更改字符串外观

> ID：10138791
> 
> 赞同：1
> 
> 时间：2012-04-13T09:58:57.097
> 
> 标签：php, string, file-io, fopen, fwrite

我有一个名为“B-small-practice.in”的文件，其内容如下

```
this is a test
foobar
all your base
class
pony along 
```

我写了一个代码，它的功能是反转每一行中的单词并将它们写入另一个文件 "output.txt" 。
这是代码：

```
$file = fopen("B-small-practice.in", "r");
$lines = array();
while(!feof($file)){
$lines[] = fgets($file); 
}
fclose($file);

$output = fopen("output.txt", "a");

foreach($lines as $v){
    $line = explode(" ", $v);
    $reversed = array_reverse($line);
    $reversed = implode(" ", $reversed);
    fwrite($output, $reversed."\n");
}

fclose($output);
?> 
```

代码的预期输出将写入“output.txt”以下内容：

```
 test a is this
    foobar
    base your all
    class
    along pony 
```

但这就是我得到的：

```
test  
  a is this
foobar  

base  
 your all  
class

along  
 pony 
```

是什么让它看起来像这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:03:41.300

爆炸后的“最后”部分仍然包含换行符，因此在 revertig 和 imploding 之后，换行符在第一个单词的后面。[`trim()`](http://de2.php.net/manual/en/function.trim.php)在爆炸之前只是你的字符串，并`"\n"`在输出时再次添加换行符（）（你已经这样做了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:03:41.813

这些线已经有一个`\n`，你没有剥离。

试试这个：

```
<?php

$file = fopen("B-small-practice.in", "r");
$lines = array();
while(!feof($file)){
$lines[] = fgets($file); 
}
fclose($file);

$output = fopen("output.txt", "a");

foreach($lines as $v){
    $v = trim($v);
    $line = explode(" ", $v);
    $reversed = array_reverse($line);
    $reversed = implode(" ", $reversed);
    fwrite($output, $reversed."\n");
}

fclose($output);
?> 
```

该`trim`功能应该从那里取出额外`\n`的东西。

# wpf - WPF 防止事件在控件外冒泡

> ID：10138799
> 
> 赞同：2
> 
> 时间：2012-04-13T09:59:24.993
> 
> 标签：wpf, events, routed-commands

让我们从元素树开始。最上面的元素是一个 WPF 窗口，它已经注册了`ApplicationCommands.Find`命令。某些子元素具有 KeyBinding，手势键 ENTER 指向此命令。没关系，如果有人按 ENTER，则将执行该命令。其中我有一个自定义控件，带有一个用于搜索和选择某些元素的弹出窗口。不过，在这个地方，我不想让自定义控件之外的键事件冒泡。但是我设置`e.handled = true`了 `KeyDown += new KeyEventHandler (..)`，这应该是一个冒泡路由事件，该自定义控件内的所有控件（文本框等）将忽略任何类型的输入。但我只想在 CustomControl 级别停止冒泡，说：从叶子到最顶层的控件父级，而不是更远！这是为什么？我没有过滤`PreviewKeyDown`，所以事件必须传播到叶子，然后它应该回到父节点，但事实并非如此。

谢谢

编辑：示例代码：

```
<UserControl x:Class="WpfApplication5.TestUserControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    >
    <StackPanel Orientation="Vertical">        
        <TextBox />
        <TextBox />
        <TextBox />
    </StackPanel>
</UserControl>

/* 
 * I want to stop bubbling at this level. Let us say if we click 'enter' on the level of the TextBox leaf, 
 * it should propagate until the TestUserControl is reached and then stop.
 */
public partial class TestUserControl : UserControl
{
    public TestUserControl()
    {
        InitializeComponent();
    }
}

<Window x:Class="WpfApplication5.Window6"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication5"
    Title="Window6" Height="300" Width="300">
    <Window.CommandBindings>
        <CommandBinding Command="ApplicationCommands.Find" Executed="CommandBinding_Executed" />
    </Window.CommandBindings>
    <Window.InputBindings>
        <KeyBinding Gesture="Enter" Command="ApplicationCommands.Find" />
    </Window.InputBindings>
    <Grid>
        <local:TestUserControl />
    </Grid>
</Window>

public partial class Window6 : Window
{
    public Window6()
    {
        InitializeComponent();
    }

    private void CommandBinding_Executed(object sender, ExecutedRoutedEventArgs e)
    {
        MessageBox.Show("Executed");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:10:53.183

您想将事件从您的自定义控件连接到您的窗口，对吗？然后，您必须从 Window 重新启动该事件，以便系统处理它。如果您仅将其标记为已处理，则意味着不会进行进一步的操作。

代码应该是这样的：

```
private void CustomControl_KeyDown(object sender, KeyEventArgs e)
{
    e.Handled = true;
    var relaunchedEvent = new KeyEventArgs(e.KeyboardDevice, e.InputSource, e.Timestamp, e.Key);
    relaunchedEvent.RoutedEvent = Keyboard.KeyDownEvent;
    relaunchedEvent.Source = e.OriginalSource;
    TopMostWindow.RaiseEvent(relaunchedEvent);
} 
```

- 编辑 -

使用以下 xaml 测试上面的代码，以查看在不执行命令的情况下如何在窗口中触发 keydown 事件。

```
<Window x:Class="WpfApplication5.Window6"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication5"
    Title="Window6" Height="300" Width="300"
    x:Name="TopMostWindow">
    <Grid>
        <Grid KeyDown="CustomControl_KeyDown">
            <local:UserControl1/>
        </Grid>
        <Grid.CommandBindings>
            <CommandBinding Command="ApplicationCommands.Find" Executed="CommandBinding_Executed" />
        </Grid.CommandBindings>
        <Grid.InputBindings>
            <KeyBinding Key="Enter" Command="ApplicationCommands.Find" />
        </Grid.InputBindings>
    </Grid>
</Window> 
```

**重要笔记：**

*   命令处于更高级别，因此无论您使用冒泡事件还是隧道事件都没有关系，最终命令将被执行，除非事件被标记为已处理。
*   引发 Keydown 事件实际上并不意味着按下该键，因为不会发生文本合成。

我对您的情况的建议是过滤用户控件中的 keydown 事件，将其标记为已处理 if `e.Key=Key.Enter`，因为 Enter 在文本框上没有太多作用。否则你将不得不模拟按键。

# cakephp - 将数据从 appcontroller 发送到 default.ctp - CakePHP

> ID：10138801
> 
> 赞同：1
> 
> 时间：2012-04-13T09:59:29.130
> 
> 标签：cakephp, controller, cakephp-2.0

我想将以下数据发送到 default.ctp，我想在所有页面中显示菜单，我正在使用 Auth，问题是如果我登录，我会正确获取菜单，但如果我注销，我'我得到错误说变量'$topMenu' not found。
只有登录后才能访问 MenuController。

```
$this->loadModel('Menu');
$this->set('topMenu',$this->Menu->find('all')); 
```

关于如何解决这个问题的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:43:37.137

将 $this->Auth->allowedActions 放入您的控制器中，并为其分配您想要在不登录的情况下访问的操作的值。

```
$this->Auth->allowedActions = array('menu'); 
```

# jquery - 下载 zipfile 时，客户端脚本在 Response.end() 方法后不起作用

> ID：10138803
> 
> 赞同：0
> 
> 时间：2012-04-13T09:59:54.727
> 
> 标签：jquery, asp.net

我的 Web 应用程序出现问题，单击按钮我将从服务器获取数据并将 2 或 3 个数据表导出到 excel 文件并将其保存到我的应用程序内的 Temp 文件夹中。

然后使用 Ionic.Zip dll，我将压缩这些文件并将其下载到客户端机器。大多数情况下，这需要一些时间。问题是在按钮单击（使用 jquery 的客户端）上，我显示了一个 div，它提示加载器图像。稍后在服务器端下载文件时我使用 response.end() 方法。所以之后我无法访问我的任何客户端脚本或函数隐藏包含加载程序图像的 div。所以即使在下载完成后我的加载程序仍然显示。

所以请在我完成下载后帮助我隐藏那个 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:06:34.000

response.end() 抛出 ThreadAbortException。你是在服务器端处理这个吗？

# asp.net - jquery click() + load() 不适用于 Opera？

> ID：10138806
> 
> 赞同：0
> 
> 时间：2012-04-13T10:00:01.883
> 
> 标签：asp.net, jquery, jquery-click-event

我制作了一个 jQuery/javascript，它在单击图片时将页面加载到 div 中。它适用于 IE、Firefox、Chrome 但不适用于**Opera ..**我不知道为什么它不起作用..

请查看此页面并单击产品以查看它如何加载弹出窗口。 [http://www.dev.dressmind.com](http://www.dev.dressmind.com)

这是点击的脚本：

```
function qp(id) { 
    $.ajax({
        method: "get",
        url: "QuickProduct.aspx",
        data: "id=" + id,
        //beforeSend: function() { $('#main').hide('slow').fadeOut(); },
        complete: function() { 
            $('#product-area').show('200').fadeIn(); 
            $("#product-area-overlay").show();
            $(".productbox-hover").hide();
        },
        success: function(result) { 
            $('#product-area').html(result); 
        }
    }); 
} 
```

然后我有一个看起来像这样的链接：

```
<a href="#" id="123123" onClick="qp(123123);return false;"><div></div</a> 
```

所以请，有人可以快速查看并帮助我解决这个问题。

**解决了**

我通过将 onclick-event 移动到内部的 div 而不是将它放在链接上来解决它。

```
< a href="#" id="123123">
    < div **onClick="qp(123123);return false;"**> < /div>
< /a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:03:50.880

除了 id 可能不像@Kanishka 提到的那样以数字开头的事实之外，您没有在使用它时发布代码。

您正在这样调用您的函数：`onclick="qp(id)"`. 与其他浏览器不同，Opera（正确地）考虑`id`了一个未定义的变量。其他浏览器可能会猜测您实际上是指`id`当前元素的属性。你需要`onclick="qp(this.id)"`改用。

要摆脱无效 ID 并重复 onclick 处理程序，您应该考虑一次性分配所有事件处理程序。像这样的东西：

```
<a href="#" data-product-id="123456">...</a>
<a href="#" data-product-id="222222">...</a>
<!-- etc. -->

<script>
  jQuery("[data-product-id]").click(function() {
    qp(jQuery(this).data('product-id')); return false;
  });
</script> 
```

顺便说一句：非 Javascript 用户呢？

还有一件事：您似乎使用了 HTML5 功能，但 XHTML Doctype 会导致许多验证错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:04:17.513

尝试通过 jQuery 本身分配事件处理程序，而不是使用过时的`onclick`属性：

```
<a href="#" id="123123" class="example">[image]</a> 
```

```
$(".example").click(function(e) {
    qp(this.id);
}

function qp(id) { 
  // ... your function...
} 
```

# c# - C# 构造函数基本关键字

> ID：10138809
> 
> 赞同：5
> 
> 时间：2012-04-13T10:00:08.803
> 
> 标签：c#, prism-4

我正在使用反射器进入 Microsoft.Practices.Prism 程序集，并遇到了 DelagateCommand 的构造函数的以下定义：

```
public DelegateCommand(Action executeMethod, Func<bool> canExecuteMethod) 
    : base(action, func)
{
    Action<object> action = null;
    Func<object, bool> func = null;
    if (action == null)
    {
        action = o => executeMethod();
    }
    if (func == null)
    {
        func = o => canExecuteMethod();
    }
    if ((executeMethod == null) || (canExecuteMethod == null))
    {
        throw new ArgumentNullException(
            "executeMethod", 
            Resources.DelegateCommandDelegatesCannotBeNull);
    }
} 
```

此代码无法编译，因为`: base(action, func)`指向 ctor 中的前两个变量。

是否有可能复制这种行为？也许通过使用匿名方法？

预先感谢您的意见。

此方法的反射器 IL：

```
.method public hidebysig specialname rtspecialname instance void .ctor(class [mscorlib]System.Action executeMethod, class [mscorlib]System.Func`1<bool> canExecuteMethod) cil managed
{
    .maxstack 5
    .locals init (
        [0] class [mscorlib]System.Action`1<object> action,
        [1] class [mscorlib]System.Func`2<object, bool> func,
        [2] class Microsoft.Practices.Prism.Commands.DelegateCommand/<>c__DisplayClass6 class2)
    L_0000: ldnull 
    L_0001: stloc.0 
    L_0002: ldnull 
    L_0003: stloc.1 
    L_0004: newobj instance void Microsoft.Practices.Prism.Commands.DelegateCommand/<>c__DisplayClass6::.ctor()
    L_0009: stloc.2 
    L_000a: ldloc.2 
    L_000b: ldarg.1 
    L_000c: stfld class [mscorlib]System.Action Microsoft.Practices.Prism.Commands.DelegateCommand/<>c__DisplayClass6::executeMethod
    L_0011: ldloc.2 
    L_0012: ldarg.2 
    L_0013: stfld class [mscorlib]System.Func`1<bool> Microsoft.Practices.Prism.Commands.DelegateCommand/<>c__DisplayClass6::canExecuteMethod
    L_0018: ldarg.0 
    L_0019: ldloc.0 
    L_001a: brtrue.s L_0029
    L_001c: ldloc.2 
    L_001d: ldftn instance void Microsoft.Practices.Prism.Commands.DelegateCommand/<>c__DisplayClass6::<.ctor>b__2(object)
    L_0023: newobj instance void [mscorlib]System.Action`1<object>::.ctor(object, native int)
    L_0028: stloc.0 
    L_0029: ldloc.0 
    L_002a: ldloc.1 
    L_002b: brtrue.s L_003a
    L_002d: ldloc.2 
    L_002e: ldftn instance bool Microsoft.Practices.Prism.Commands.DelegateCommand/<>c__DisplayClass6::<.ctor>b__3(object)
    L_0034: newobj instance void [mscorlib]System.Func`2<object, bool>::.ctor(object, native int)
    L_0039: stloc.1 
    L_003a: ldloc.1 
    L_003b: call instance void Microsoft.Practices.Prism.Commands.DelegateCommandBase::.ctor(class [mscorlib]System.Action`1<object>, class [mscorlib]System.Func`2<object, bool>)
    L_0040: ldloc.2 
    L_0041: ldfld class [mscorlib]System.Action Microsoft.Practices.Prism.Commands.DelegateCommand/<>c__DisplayClass6::executeMethod
    L_0046: brfalse.s L_0050
    L_0048: ldloc.2 
    L_0049: ldfld class [mscorlib]System.Func`1<bool> Microsoft.Practices.Prism.Commands.DelegateCommand/<>c__DisplayClass6::canExecuteMethod
    L_004e: brtrue.s L_0060
    L_0050: ldstr "executeMethod"
    L_0055: call string Microsoft.Practices.Prism.Properties.Resources::get_DelegateCommandDelegatesCannotBeNull()
    L_005a: newobj instance void [mscorlib]System.ArgumentNullException::.ctor(string, string)
    L_005f: throw 
    L_0060: ret 
} 
```

同样在查看 codeplex 的实际[源代码](http://compositewpf.codeplex.com/SourceControl/changeset/view/65392#1024518)后，方法定义如下：

```
 public DelegateCommand(Action<T> executeMethod, Func<T, bool> canExecuteMethod)
            : base((o) => executeMethod((T)o), (o) => canExecuteMethod((T)o))
        {
            if (executeMethod == null || canExecuteMethod == null)
                throw new ArgumentNullException("executeMethod", Resources.DelegateCommandDelegatesCannotBeNull);

#if !WINDOWS_PHONE
            Type genericType = typeof(T);

            // DelegateCommand allows object or Nullable<>.  
            // note: Nullable<> is a struct so we cannot use a class constraint.
            if (genericType.IsValueType)
            {
                if ((!genericType.IsGenericType) || (!typeof(Nullable<>).IsAssignableFrom(genericType.GetGenericTypeDefinition())))
                {
                    throw new InvalidCastException(Resources.DelegateCommandInvalidGenericPayloadType);
                }
            }
#endif
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T10:03:32.783

我认为这**可能**只是一个反射器错误，试图表示 lambdas 的支持委托被缓存的方式。真正的代码很可能是：

```
: base(o => executeMethod(), o => canExecuteMethod()) 
```

你有IL吗？

* * *

编辑：嗯...我无法复制。但是，还有其他两个选项：在 C++ 和 IL 中，您几乎可以做任何事情。不过，该代码看起来……很时髦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:04:10.960

恕我直言，这是反射器的失败。您为什么不查看 Prism 的源代码？

# iphone - 看不懂崩溃日志？

> ID：10138811
> 
> 赞同：1
> 
> 时间：2012-04-13T10:00:22.930
> 
> 标签：iphone, objective-c, ios, xcode, crash

我正在尝试了解崩溃日志。当我尝试执行该`CLLocationDistance`方法时会发生这种情况`distanceFromLocation`。为了获得两个位置，我需要进行地理编码，但我需要一个块，这样我就可以拥有这两个实例变量。所以我把它指向一个带参数的方法：

```
 - (void)geoCodeSetup:(NSArray *)placemarks :(NSError *)error andIdentifier:(NSString *)string {
CLLocation *location1;
CLLocation *location2;
if ([string isEqualToString:@"Origin"]) {
    if (!error) {
        CLPlacemark *place = [placemarks objectAtIndex:0];
        CLLocation *location = place.location;
        location1 = [[CLLocation alloc] initWithLatitude:location.coordinate.latitude longitude:location.coordinate.longitude];

    } else {
        NSString *string = [NSString stringWithFormat:@"%@ - also make sure you have inputted a valid city", [error localizedDescription]];
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:string delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
    }
}

if ([string isEqualToString:@"Destination"]) {
    if (!error) {
        CLPlacemark *place = [placemarks objectAtIndex:0];
        CLLocation *location = place.location;
       location2 = [[CLLocation alloc] initWithLatitude:location.coordinate.latitude longitude:location.coordinate.longitude];

    } else {
        NSString *string = [NSString stringWithFormat:@"%@ - also make sure you have inputted a valid city", [error localizedDescription]];
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:string delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
    }
}

CLLocationDistance distanceM = [location1 distanceFromLocation:location2];    
[metreDistance setText:[NSString stringWithFormat:@"%f", distanceM]];

}

- (IBAction)calculateDistance {

[textFieldDestination resignFirstResponder];
NSString *origin = [textFieldOrigin text];
if (origin) {
    CLGeocoder *geoCode = [[CLGeocoder alloc] init];

    [geoCode geocodeAddressString:origin completionHandler: ^(NSArray *placemarks, NSError *error) {
        NSArray *p1 = placemarks;
        NSError *e1 = error;
        [p1 retain];
        [e1 retain];
        [self geoCodeSetup:p1 :e1 andIdentifier:@"Origin"];

    }]; 
}

NSString *destination = [textFieldDestination text];
if (destination) {

    CLGeocoder *geoCode2 = [[CLGeocoder alloc] init];

    [geoCode2 geocodeAddressString:destination completionHandler:^(NSArray *placemarks, NSError *error) {
        NSArray *p2 = placemarks;
        NSError *e2 = error;
        [p2 retain];
        [e2 retain];
        [self geoCodeSetup:p2 :e2 andIdentifier:@"Destination"];

    }]; 
} 
```

它在 distanceFromLocation 部分崩溃/给出`EXC_BAD_ACCESS (code =EXC_ARM_DA_ALIGN, address=.....etc....)`。我附上了崩溃日志的屏幕截图。

![崩溃日志](../Images/1efe121486d229eaaa202ab4ffb5a2e9.png)

什么可能导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:06:14.780

我假设 location1 或 location2 未设置，因为您确实将其包装到

```
if ([string isEqualToString:@"Origin"]) {
    if (!error) { 
```

您可以通过将第 2 行和第 3 行链接到：

```
CLLocation *location1 = nil;
CLLocation *location2 = nil; 
```

也许你还需要换行：

```
CLLocationDistance distanceM = [location1 distanceFromLocation:location2]; 
// change to
CLLocationDistance distanceM;
if(location1 && location2) {
  distanceM = [location1 distanceFromLocation:location2];
} 
```

我认为您`distanceFromLocation:`至少使用一个 NULL 参数或对象运行。

# c++ - WinAPI 的 ::WaitMessage 阻止 WM_TIMER 到来

> ID：10138812
> 
> 赞同：1
> 
> 时间：2012-04-13T10:00:27.170
> 
> 标签：c++, winapi, timer, window-messages

在我看来，我遇到了 WinAPI 的奇怪行为。在我的程序中，我正在为窗口设置一个计时器

```
::SetTimer(window_handle, timer_id, 10, NULL); 
```

并在我的窗口过程中处理 WM_TIMER 消息。为了减少所需的 cpu 时间，我还在`::WaitMessage`消息泵中使用了该功能。现在事实证明，只要我在`::WaitMessage`那里有这个功能，WM_TIMER 消息就会在一段时间后停止出现。如果我从我的消息泵中删除它，一切都会按预期工作。

现在我想知道我是否设置了错误的计时器，或者这是否是`::WaitMessage`. 搜索 MSDN 和网络并没有让我知道为什么会这样。

这是我使用的消息泵：

```
while(true) {
    if(GetMessage(&msg, _window_handle, 0, 0) > 0) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    } else { 
        return 0; 
    }

    WaitMessage();
} 
```

希望有人可以为我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T13:10:49.373

是的，这将随机无法处理更多计时器消息。WaitMessage() 的一个非常严格的规则是消息队列在调用之前应该是*空的。*如果它不为空，那么任何留在队列中的消息都被标记为“已看到”并且 WaitMessage() 会忽略它们。

所以失败的场景是队列中有*两条*消息，比如鼠标消息和计时器消息。您会收到鼠标消息，但会留下计时器消息。由于您尚未处理待处理的消息，因此不会生成额外的计时器消息。GetMessage + WaitMessage 的组合很麻烦，你必须使用 PeekMessage 来代替。

只需删除 WaitMessage()，它在这里没有用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-05T16:34:32.353

除了 Hans Passant 所说的之外，您还应该重新编写代码。`WaitMessage`不能很好地与 一起`GetMessage`使用，`PeekMessage`而是使用并`WaitMessage`仅保留在替代代码路径 ( `else`) 中，如下所示：

```
while( true )
{
    if( PeekMessage( &msg, NULL, 0, 0, PM_REMOVE ) )
    {
        TranslateMessage( &msg );
        DispatchMessage( &msg );
    }
    else
    {
        WaitMessage();
    }
} 
```

`WaitMessage`允许线程休眠，直到消息在队列中。

# php - 是否可以只构建某些模型？

> ID：10138819
> 
> 赞同：0
> 
> 时间：2012-04-13T10:01:19.447
> 
> 标签：php, symfony1, propel

`./symfony propel:build-model`尝试构建所有模型。是否有可能，如果可以，如何只指定某个模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:14:24.717

在命令行中使用 Propel 无法实现您想要的。可以以编程方式执行此操作（如果您有兴趣，请参阅*我写的*[这篇文章](http://blog.jondh.me.uk/2011/02/generating-propel-1-5-classes-programmatically/)），但这并不像运行 CLI 命令那么简单。

如果您在内存大小方面遇到问题，只需增加 php.ini 中分配的数量即可。我想你应该用 32-64M 没问题。

# mysql - 将 in 查询转换为 join

> ID：10138822
> 
> 赞同：0
> 
> 时间：2012-04-13T10:01:37.157
> 
> 标签：mysql, join, subquery

我可以获得一些帮助来清理以下查询并可能将其转换为联接。

```
SELECT pd.id, pd.title, pd.vacation_type_ids, pd.auto_vacation_theme
FROM property_details pd
WHERE pd.company_id =247
AND pd.status =  "active"
AND pd.id NOT 
IN (
    SELECT d.property_id
    FROM property_discount d
    WHERE (
    (
    d.start_date <= CAST(  "2012-04-15" AS DATE ) 
    AND d.end_date >= CAST(  "2012-04-15" AS DATE ) 
    AND d.start_date <= CAST(  "2012-04-17" AS DATE ) 
    AND d.end_date >= CAST(  "2012-04-17" AS DATE )
    )
    OR (
    d.start_date >= CAST(  "2012-04-15" AS DATE ) 
    AND d.start_date <= CAST(  "2012-04-17" AS DATE )
    )
    OR (
    d.end_date >= CAST(  "2012-04-15" AS DATE ) 
    AND d.end_date <= CAST(  "2012-04-17" AS DATE )
    )
)
) 
```

我不是 MySQL 专家，如果我做错了什么，我很抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:15:15.653

这整件事对我来说毫无意义。

```
WHERE (
(
d.start_date <= CAST(  "2012-04-15" AS DATE ) 
AND d.end_date >= CAST(  "2012-04-15" AS DATE ) 
AND d.start_date <= CAST(  "2012-04-17" AS DATE ) 
AND d.end_date >= CAST(  "2012-04-17" AS DATE )
)
OR (
d.start_date >= CAST(  "2012-04-15" AS DATE ) 
AND d.start_date <= CAST(  "2012-04-17" AS DATE )
)
OR (
d.end_date >= CAST(  "2012-04-15" AS DATE ) 
AND d.end_date <= CAST(  "2012-04-17" AS DATE )
)
) 
```

第一个块可以减少到基本上`start_date <= '2012-04-17' AND end_date >= '2012-04-17'`。这种情况由基本上`start_date BETWEEN '2012-04-15' AND '2012-04-17'`分别的第二块和第三块处理`end_date BETWEEN '2012-04-15' AND '2012-04-17'`。

你真的想要一个`OR`介于这之间，或者更确切地说是一个`AND`？

您没有提供有关您的数据库设计的信息，所以我只能猜测，如果这两个表之间的以下连接是正确的。

```
SELECT pd.id, pd.title, pd.vacation_type_ids, pd.auto_vacation_theme
FROM property_details pd
INNER JOIN property_discount d ON pd.id = d.property_id
WHERE pd.company_id =247
AND pd.status =  'active'
(
d.start_date BETWEEN '2012-04-15' AND '2012-04-17' /*this is right when start_date is of type date, when it's datetime or timestamp you better write '2012-04-17 23:59:59', otherwise '2012-04-17 00:00:00' is assumed, which is basically not considering this date*/
OR
d.end_date BETWEEN '2012-04-15' AND '2012-04-17'
) 
```

# java - Java 正则表达式

> ID：10138828
> 
> 赞同：1
> 
> 时间：2012-04-13T10:01:49.923
> 
> 标签：java, regex, pattern-matching, matcher

我有以下代码和平：

```
 Pattern p = Pattern.compile("^\\d|^\\W|^\\s");
     Matcher m = p.matcher("stack overflow"); 
```

有人可以解释上述正则表达式模式吗？它能做什么 ？我必须让它在现有功能之间不允许有空格。例如，它不应该允许“堆栈溢出”，因为它包含空格。

**编辑**

我尝试过的以下模式对我来说效果很好。谢谢大家的建议：

```
[a-zA-Z0-9_$#] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T10:05:16.653

您的正则表达式匹配单个数字，或任何不是单词的单个字符或任何作为空白字符的单个字符。

这三个备选方案中的任何一个都必须从主题的开头开始，因为您`^`在每个备选方案中都有。

根据您的描述，我认为您想要这样的表达：

```
^[\w#$]+$ 
```

它将匹配包含一个或多个单词字符`[A-Za-z0-9_]`、散列`#`和美元的任何内容`$`。单词字符不包含空格，因此应该可以。

我添加了锚点`^`，`$`并确保它只匹配整个字符串（这是你想要的吗？）如果你只是希望它在你的示例中的开头匹配，那么删除`$`.

请注意，与您的示例一样，您需要`\`像这样在您的 java 代码中转义：

```
Pattern p = Pattern.compile("^[\\w#$]+$"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T10:08:35.030

添加到其他答案：我认为您正在寻找类似的模式，这意味着：从开头（）到结尾（ ）`"^\\S*$"`匹配任意数量的非空格字符（）。`\\S*``^``$`

# java - 不接受来自外部资源管理器的 Eclipse RCP 放置文件

> ID：10138834
> 
> 赞同：2
> 
> 时间：2012-04-13T10:02:22.163
> 
> 标签：java, drag-and-drop, eclipse-rcp

我有一个 Eclipse RCP 应用程序，它应该通过从 Windows 资源管理器中拖放来打开文件。所以我实现了这个：

```
public class ApplicationWorkbenchAdvisor extends WorkbenchAdvisor {

    @Override
    public WorkbenchWindowAdvisor createWorkbenchWindowAdvisor(IWorkbenchWindowConfigurer configurer) {
        configurer.addEditorAreaTransfer(FileTransfer.getInstance());
        configurer.configureEditorAreaDropListener(editorDropListener);
        return new ApplicationWorkbenchWindowAdvisor(configurer);
    }
[...]
} 
```

`editorDropListener`是类型`DropTargetAdapter`并实现该`drop()`方法。

现在，如果我将文件从资源管理器拖到我的应用程序中，我会看到“Windows 不可用”鼠标图标，并且拖放将不起作用。`editorDropListener.drop()`没有调用。

如果我按下`CTRL`或`ALT`键拖动文件，我会得到“windows copy”鼠标图标。drop 工作并`editorDropListener.drop()`成功调用。

我在哪里可以配置，允许哪种丢弃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T09:11:31.997

看来这个问题还没有从上面解决。我刚刚查找了DND的api并解决了这个问题，消除了Ctrl或Alt键。 [拖放](http://www.eclipse.org/articles/Article-SWT-DND/DND-in-SWT.html) 我们只需要在 EditorAreaDropAdapter 中添加一些代码：

```
 @Override
public void dragEnter(DropTargetEvent event) {
    // TODO Auto-generated method stub
    event.detail = DND.DROP_COPY;
    super.dragEnter(event);
} 
```

event.detail 必须设置为 DND.DROP_COPY 才能接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:36:24.423

它比这更复杂一些，因为编辑器区域不接受 MOVE DND 请求。

看看`org.eclipse.ui.internal.ide.EditorAreaDropAdapter`细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T07:54:38.213

在您的侦听器中使用此代码。它会起作用的。

```
 @Override
        public void dragEnter(final DropTargetEvent event) {

            if (event.detail == DND.DROP_DEFAULT) {
                if ((event.operations & DND.DROP_COPY) != 0) {
                    event.detail = DND.DROP_COPY;
                } else {
                    event.detail = DND.DROP_NONE;
                }
            }
        } 
```

# android - 我找不到连接到我的 PC 的 htc android 设备。

> ID：10138836
> 
> 赞同：0
> 
> 时间：2012-04-13T10:02:23.910
> 
> 标签：android

将我的 android 设备连接到 PC 后，我在命令提示符下尝试下面的代码行。 ***“D:\Android 2.3\android-sdk-windows\platform-tools>adb devices”***我找不到任何设备，因此我无法将我的 android 应用程序部署到我的设备上。如果我忘记了任何步骤，请帮助我并指导我。谢谢马尤尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:31:05.617

首先，这一切都奏效了吗？

其次，您需要为您的操作系统和设备安装 HTC 驱动程序。

第三，您是否将手机设置为`USB debugging`模式？

# java - JPQL 间隔日期

> ID：10138837
> 
> 赞同：1
> 
> 时间：2012-04-13T10:02:26.243
> 
> 标签：java, mysql, database, jpql

我的错误在哪里？

```
SELECT m FROM Message m WHERE m.tabId = :idTab AND BETWEEN :startDate AND :endDate ORDER BY m.id DESC 
```

我有这个错误：

```
Exception Description: Syntax error parsing the query ... , line 1, column 63: unexpected token [BETWEEN].
Internal Exception: NoViableAltException(11@[634:7: (n= NOT )?]) 
```

在我的 Java 代码中，我有：

```
// Exception line
Query query = em.createQuery(queryBuilder.toString());
////
query.setParameter("idTab", idTablet);
if (limit > 0) {
  query.setMaxResults(limit);
}
if (dateFrom != null) {
  query.setParameter("startDate", dateFrom, TemporalType.DATE);
   if (dateTo == null) {
     dateTo = new Date();
   }
   query.setParameter("endDate", dateTo, TemporalType.DATE);
}
messages = (List<MessageEntity>) query.getResultList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:04:50.463

您没有选择任何字段，并且缺少用于日期比较的字段。尝试 -

```
SELECT m.*
FROM Message m
WHERE m.tabId = :idTab
AND date_field BETWEEN :startDate AND :endDate
ORDER BY m.id DESC 
```

# session - 将 Azure Appfabric 缓存服务用作会话状态提供程序时，EF 动态代理问题

> ID：10138839
> 
> 赞同：0
> 
> 时间：2012-04-13T10:02:38.957
> 
> 标签：session, caching, azure, state, azure-appfabric

我们正在尝试将我们的本地 SAAS 应用程序迁移到 Windows azure，并且我们专门为一个模块使用了很多实体框架。作为迁移部分，我们正在尝试分阶段迁移和测试应用程序。我们正在尝试使用 Azure appfabric 缓存服务作为会话状态提供程序。

当我尝试将会话状态配置为 appfabric 缓存时，我们正在运行这些与实体框架相关的问题，请参阅错误 2。首先我们收到此错误 1。要解决此问题，我们将类设置为 [DataContract] 和问题已解决。

错误号 1\. System.Runtime.Serialization.InvalidDataContractException：无法序列化类型“XX.XX.XXX”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

错误 2。无法设置类型“CaXXXXX_9FDDBE5B2C99F9C5DE2E0DCD2E8CC77D2CB59220D1A3413E91AF5A2B6A23026D”上的属性“AdXXXXXX”，因为该集合已设置为 EntityCollection。

我们完全不知道如何解决这些问题，当谷歌搜索时，有几个线程告诉我们需要删除属性的虚拟访问修饰符。但是相同的代码可以在本地运行，不会出现任何类似的问题，并且代码是由 EF 在模型的每次更新时自动生成的。在第二次机会中，我们还有其他选择将 SQLAzure 作为会话状态提供者，但我们希望也可能存在相同的问题，因为数据在会话中存储时需要序列化。

[http://social.msdn.microsoft.com/forums/en/adonetefx/thread/99d8d4a1-5ab1-42dc-b9db-5087be02162d](http://social.msdn.microsoft.com/forums/en/adonetefx/thread/99d8d4a1-5ab1-42dc-b9db-5087be02162d) [https://blog.iannelson.uk/entity-framework-week-part-3-runtime -遇到的问题/](https://blog.iannelson.uk/entity-framework-week-part-3-runtime-issues-encountered/)

我们没有使用延迟加载，当我们从数据库更新模型时，EF 会自动生成类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:44:38.307

您是否可以尝试从所有属性中删除**virtual**关键字，除了用于延迟加载/导航属性的属性（即：从所有本机类型中删除它）？

参考：[代码优先添加到集合？如何在存储库中使用 Code First？](https://stackoverflow.com/questions/3858922/code-first-adding-to-collections-how-to-use-code-first-with-repositories-advic)

# java - SRV 记录的 Java DNS 查找

> ID：10138844
> 
> 赞同：7
> 
> 时间：2012-04-13T10:02:46.040
> 
> 标签：java, dns, srv

在下面的 java 代码中，我正在进行 DNS SRV 记录查找，以解析给定域名（例如 root@1000000000.blubluzone.com）的目标域名和关联端口。*下面用/ HERE* /指示的查找函数以某种方式返回null，我无法获得查询结果（即记录数组为null）。因此，在 for 循环中访问记录数组时会引发空指针异常。

您认为我缺少什么来使以下代码正常工作。我正在使用 dnsjava，相关的 API jar 文件可在[http://www.dnsjava.org/download/](http://www.dnsjava.org/download/) （在页面底部）获得。提前感谢您的建议。

```
 import org.xbill.DNS.Lookup;
     import org.xbill.DNS.Record;
     import org.xbill.DNS.SRVRecord;
     import org.xbill.DNS.TextParseException;
     import org.xbill.DNS.Type;

     public class DNSLookup {

        public static void main(String[] args) {

          if (args.length < 1) {
             System.err.println("Usage: java -jar DNSLookup <hostname>");
             System.exit(1);
          }

          String query = "_ssh._tcp." + args[0];

          try {
            /*****HERE*********/
            Record[] records = new Lookup(query, Type.SRV).run();

            for (Record record : records) {
                 SRVRecord srv = (SRVRecord) record;

            String hostname = srv.getTarget().toString().replaceFirst("\\.$", "");
            int port = srv.getPort();

            System.out.println(hostname + ":" + port);
          }
          } catch (TextParseException e) {
             e.printStackTrace();
          }
       }
      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T08:44:51.737

您的代码很好，除了如果没有找到记录则`Lookup.run()`返回`null`（**不是**空数组）。

例如，如果您替换`_ssh._tcp`为`_nicname._tcp`然后查找，`uk`您将找到 .UK`whois`服务器的 SRV 记录。

如果有问题，则与您的输入参数有关。

# c - 尝试使用 `nlmsg_free(skb_out)` 释放 skb 时内核崩溃

> ID：10138848
> 
> 赞同：3
> 
> 时间：2012-04-13T10:03:00.213
> 
> 标签：c, linux-kernel

我正在开发一个内核模块，它通过 netlink 向用户空间发送消息。

创建消息（要发送的消息）：`skb_out = nlmsg_new(msg_size,0);`。

在发送第一条消息之后，在发送第二条消息之前，我试图释放 skb_out ，`nlmsg_free(skb_out)`但是这个函数会导致内核崩溃。

*   如何解决此崩溃？

或者

*   发送消息后，还有其他替代 fre skb_out 的方法吗？

在源代码之后：

```
 skb_out = nlmsg_new(msg_size,0);
    if(!skb_out)
    {
        printk(KERN_ERR "Failed to allocate new skb\n");
        return;
    }

    nlh=nlmsg_put(skb_out,0,0,NLMSG_DONE,msg_size,0);
    NETLINK_CB(skb_out).dst_group = 0; /* not in mcast group */
    strncpy(nlmsg_data(nlh),msg,msg_size);
    res=nlmsg_unicast(nl_sk,skb_out,pid);
    if(res<0)
    {
        printk(KERN_INFO "Error while sending bak to user\n");
    }

    nlmsg_free(skb_out); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T10:09:42.473

发送后不允许释放 skb。`nlmsg_unicast()`会处理的。

原因很简单：一旦你发送了消息，它可以在 netlink 套接字中排队一段时间，然后才能被任何人阅读。仅仅因为`nlmsg_unicast()`返回它并不意味着套接字的另一端已经收到消息。如果你在收到它之前释放它，你最终会在队列中得到一条释放的消息，这会在内核尝试传递它时导致崩溃。

只需为每条消息分配一个新的 skb。

# javascript - 在不刷新页面的情况下更新json数据？

> ID：10138850
> 
> 赞同：2
> 
> 时间：2012-04-13T10:03:13.833
> 
> 标签：javascript, ajax, json, jquery

我有一个来自 JSON 数据的用户列表。在某个时间间隔后，我想显示必须更新的用户列表，以及是否在 JSON 数据中找到任何新条目，以及是否从 JSON 数据中删除任何条目。

我正在使用该`setInterval()`功能，但用户列表总是闪烁，我不想显示（闪烁所有数据的效果）。

最初我使用`$("#test").html(" ");`然后是 AJAX 调用。

有人对这个问题有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T10:12:44.170

您可以使用[.append()](http://api.jquery.com/append/)将文本附加到 DOM 元素，例如

```
<div id="list">some text</div>
$('#list').append(' some more text'); 
```

`div`在`some text some more text`里面创建一个

[`setInterval`使用和的示例`append`](http://jsfiddle.net/LazfY/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:56:55.870

为什么在 ajax 调用之前清空列表？

如果您只是从通过 ajax 调用收到的 json 数据完全重建新的 html（比如 newListHtml），然后执行

```
$("#test").html(newListHtml); 
```

不会有闪烁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:14:28.347

您可以使用 kcnockout.js 库，该库具有与 JavaScript 对象和可观察行为的数据绑定。这正是您正在寻找的。（它会自动更新更改的数据）

# .net - 如何将多个字符串粘贴到 .net .resx 文件中？

> ID：10138866
> 
> 赞同：5
> 
> 时间：2012-04-13T10:04:14.967
> 
> 标签：.net, localization

我有许多 .resx 文件用于大型网站的翻译。为了完成翻译，我将每个 resx 文件的内容复制并粘贴到电子表格中。电子表格从翻译器返回，新语言作为额外的列附加。我尝试从电子表格中复制列并粘贴到 resx 文件中的值列中，但它不起作用。现在，我只能将电子表格中的数千个单独的短语剪切并粘贴到 resx 文件中。肯定有更好的办法。有没有？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-05-12T16:09:07.427

有办法！

您不能复制/粘贴单个列，但可以复制/粘贴所有列 - 基本上是全有或全无。Sooo ...只需将您的电子表格准确地设置为您想要的 resx 文件，然后清除 resx 文件的所有内容，最后从电子表格中复制所有内容并将整个内容粘贴到 resx 文件中。繁荣！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:09:36.760

我们不使用电子表格，而是使用[ResEx](http://resex.codeplex.com/)。这允许翻译人员直接生成 .resx 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:09:05.497

您可以找到处理 .resx 文件的本地化工具。因此，无需从 .resx 文件中复制/粘贴您的内容，您只需将它们原样发送给翻译人员，他们就会以他们的语言将翻译后的 .resx 文件发回给您。除了生产力，最好这样做，因为您的 .resx 文件可能包含有用的信息，例如注释，以帮助翻译人员理解上下文或向他们传达适用于给定字符串的任何已知限制（例如最大长度）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T10:10:07.567

Resx 只是一个 XML，因此您可以制作简单的脚本从电子表格文件中生成它（另存为 csv 以便于处理）。

# mysql - 我应该创建一个还是两个数据库表？

> ID：10138871
> 
> 赞同：0
> 
> 时间：2012-04-13T10:04:33.967
> 
> 标签：mysql, sql, pdo

我有一个包含数千本书（标题、年份、作者等）的数据库表。用户可以将他们已阅读的书籍添加到列表中。如果数据库中不可用，我想让他们能够添加他们拥有的书籍，并且它们仅适用于该用户。我应该创建一个新表，还是只将他们的书籍添加到带有“is_custom”和“user_id”列的主表中？第二种方式对我来说似乎更容易管理（例如，在搜索方面，加入两个表似乎很愚蠢..），但我问的是因为（我的书和用户的书）都会变得非常大..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:11:30.143

我会首先设计简单性和可维护性，并且只有在您知道有问题时才引入性能改进。

“相当大”对不同的人意味着不同的事情——但如果你必须解决这个问题，如果你将数据拆分到两个表中，你可能需要解决两次，或者——可能更糟——有不同的管理解决方案“books”表比“userBooks”表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:08:08.243

理论上最好的方法是为一个实体使用一个表。所以变体 1.“用户” - 通过链接表（多对多）的另一个表。您自己的书籍归预定义的固定用户所有（更好，或者没有用户链接）。

在 OOP 数据库中，您可以使用父表和两个子表。但乍一看，你的情况甚至不需要。

# ruby-on-rails - 为什么 schema.rb 文件在开发和生产环境之间不同？

> ID：10138872
> 
> 赞同：1
> 
> 时间：2012-04-13T10:04:38.240
> 
> 标签：ruby-on-rails, ruby

我在开发和生产环境中都使用了 mysql Ver 14.14。我有一个数据库迁移文件，例如：

```
class ChangeRoleToNodeTemplate < ActiveRecord::Migration
  def up
    rename_table :roles, :node_templates
  end

  def down
    rename_table :node_templates, :roles
  end
end 
```

当我运行“rake db:migrate”命令时，它生成的 schema.rb 文件是正确的。

但是当我运行“rake db:migrate RAILS_ENV=production”时，它包含具有相同架构的“roles”和“node_templates”表。

任何人都可以给我一个建议吗？谢谢。

我使用 Rails 3.1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:26:50.230

不知道为什么以及如何发生这种情况，但我会尝试首先完全回滚生产数据库，而不仅仅是加载架构并检查

回滚生产数据库：

```
rake db:rollback RAILS_ENV=production STEP=100 
```

加载架构：

```
rake db:schema:load RAILS_ENV=production 
```

# java - 如何不让 setText 崩溃/冻结我的整个应用程序？甚至使用 SwingUtilities 和线程？

> ID：10138873
> 
> 赞同：2
> 
> 时间：2012-04-13T10:04:40.540
> 
> 标签：java, multithreading, swing

我一直在尝试解决我随机按下按钮时发生的 .setText 崩溃问题`num0`。

*   但似乎我只能通过使用来解决它， `new Thread(new Runnable() { __overwrite__swing__textfields___ });`但在这种情况下我无法访问我的`JTextField`.

因此我写了一个`RunnableOutput`类来发送和申请，但也失败了。例子：

可运行输出.java

```
package ui;

import java.awt.ComponentOrientation;
import javax.swing.*;

/**
 * JTextField - Wrapper for thread-safe 
 * 
 * @author root
 */
public class RunnableOutput implements Runnable {
  private JTextField outputArea;
  private String messageToAppend;

  // initialze outputArea and message
  public RunnableOutput(JTextField output, String message) {
    outputArea = output;
    messageToAppend = message;
  }

  @Override
  public void run() {
    outputArea.setText(messageToAppend);
  }

} 
```

菜单.java：

```
public static JTextField nameTextField0 = new JTextField(20);
public void IPpanel(JPanel configPanel) { 

  JPanel Numlock = new JPanel(new GridLayout(0,12));
  JButton num0 = new JButton("0"); 
  num0.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent ae) {

      // Fails: 
      // was expecting this should fixed it but indeed still not
      SwingUtilities.invokeLater(
        new RunnableOutput(nameTextField0, "Unit test: 0"));       

      // Fails: 
      // wont work few times works but when randomly i press the 
      // button it fails
      // Same result with: SwingUtilities.invokeAndWait();
      SwingUtilities.invokeLater(new Runnable() {
        public void run() {
          nameTextField0.setText("Unit test: 1");
        }
      });

      // Works: does not freez but does not change/apply the values
      new Thread(new Runnable() {
        Menu.nameTextField0.setText("Unit test: 2");
      });        

    }
  });
  Numlock.add(num0); 

  configPanel.setLayout(new GridLayout(0,1));
  configPanel.add(Numlock);

} 
```

跟进：

*   使用多态性并修复所有这些

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:29:03.087

1）你必须添加代码行

```
revalidate()
repaint(); 
```

在您添加`JComponents`到已经可见的情况下`Container`

2）添加/删除`JComponents`/到已经可见的`Container`必须在 上完成`EventDispatschTread`，应该被包裹到`invokeLater`/`invokeAndWait`

3）我建议包装（事件被声明为方法`Thread Safe`）`setText()`，调用 from ，或`append()``invokeLater``Runnable#Thread``Executor``util.Timer`

4）[使用 SwingTimer（保证在 EDT 上输出）或 Runnable#Thread（必须包装到 invokeLater/invokeAndWait 中）](https://stackoverflow.com/a/6060678/714968)

5)[对于 Swing GUI，使用 SwingWorker 会更好，也许 Runnable#Thread with/or Executor/util.Timer 更好](https://stackoverflow.com/a/7049095/714968)

6）[不要阻止EDT](https://stackoverflow.com/a/7944388/714968)

[7) 如建议获得更好的帮助，请尽快使用SSCCE](http://sscce.org/)编辑您的问题

编辑

```
 new Thread(new Runnable() {

        public void run() {

            final RunnableOutput a = new RunnableOutput();

            if (SwingUtilities.isEventDispatchThread()) {
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        a.setText(nameTextField0, text);
                    }
                });
            } else {
                try {
                    SwingUtilities.invokeAndWait(new Runnable() {

                        @Override
                        public void run() {
                            a.setText(nameTextField0, text);
                        }
                    });
                } catch (InterruptedException ex) {
                    Logger.getLogger(Menu.class.getName()).log(Level.SEVERE, null, ex);
                } catch (InvocationTargetException ex) {
                    Logger.getLogger(Menu.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    }).start(); 
```

# android - 无法在 Android 应用中启动新活动

> ID：10138874
> 
> 赞同：0
> 
> 时间：2012-04-13T10:04:41.313
> 
> 标签：android, android-activity, android-intent

我通过拍照并将其数据传递给活动来开始一项新活动。由于某种原因，活动没有开始。（或者可能需要很多时间）像这样：

```
 cameraResult = new Intent(Activity.this, ResultActivity.class);

        final Camera.PictureCallback cameraSavePictureCallback = new Camera.PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            // TODO Auto-generated method stub
            cameraResult.putExtra("PictureData", data);
            cameraResult.putExtra("size", "10cm");
            startActivity(cameraResult);
        }
    };

    final ShutterCallback myShutterCallback = new ShutterCallback() {

        @Override
        public void onShutter() {
            // TODO Auto-generated method stub

        }
    };

    final Camera.PictureCallback myPictureCallback_RAW = new Camera.PictureCallback() {

        @Override
        public void onPictureTaken(byte[] arg0, Camera arg1) {
            // TODO Auto-generated method stub

        }
    };

    // Add a listener to the Capture button
    Button captureButton = (Button) findViewById(id.button_capture);
    captureButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // get an image from the camera
            camera.takePicture(myShutterCallback, myPictureCallback_RAW, cameraSavePictureCallback);                
        }
    }); 
```

我在新活动中有一个断点，它没有得到他们的，所以问题不在于活动。

有人可以告诉我可能出了什么问题，这是否是在新屏幕上显示图片的正确方法？

**EDIT1：** 我忘了提到只有当我拍一张根本不是黑色的照片时才会发生这种情况。我的意思是，如果我盖上镜头并拍照，它不会卡住

**EDIT2：**我在 logcat 中有错误

```
04-13 14:09:34.777: ERROR/JavaBinder(13009): !!! FAILED BINDER TRANSACTION !!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:59:01.540

老兄更改为
最终 Camera.PictureCallback cameraSavePictureCallback = new Camera.PictureCallback() {

```
 @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        // TODO Auto-generated method stub
        cameraResult = new Intent(Activity.this, ResultActivity.class);
        cameraResult.putExtra("PictureData", data);
        cameraResult.putExtra("size", "10cm");
        startActivity(cameraResult);
    }
}; 
```

# javascript - 在 Tumblr 中加载更多笔记时运行函数

> ID：10138876
> 
> 赞同：2
> 
> 时间：2012-04-13T10:04:51.143
> 
> 标签：javascript, jquery, tumblr

我制作了一个脚本来处理我的主题中笔记的外观，这对于随页面加载的笔记效果很好。尝试加载更多笔记时会出现问题 - 我需要在它们上重新运行我的脚本 - 我的问题是我该怎么做？

这是 tumblr 在加载更多笔记时运行的脚本（这是一个 onclick 事件）：

```
if (window.ActiveXObject) var tumblrReq=new ActiveXObject('Microsoft.XMLHTTP'); 
else        
if(window.XMLHttpRequest)    var tumblrReq=new XMLHttpRequest();        
else  return false;         
tumblrReq.onreadystatechange = function () {
if (tumblrReq.readyState==4) {      
    var notes_html = tumblrReq.responseText.split('&lt;!-- START '+'NOTES --&gt;')[1].split('&lt;!-- END '+'NOTES --&gt;')[0];
if (window.tumblrNotesLoaded)
    if (tumblrNotesLoaded(notes_html)==false)
        return;         
var more_notes_link=document.getElementById('more_notes_20767443750');
var notes = more_notes_link.parentNode;
notes.removeChild(more_notes_link);
notes.innerHTML+=notes_html;
if (window.tumblrNotesInserted)
    tumblrNotesInserted(notes_html);    
}
};

tumblrReq.open('GET','/notes/20767443750/iRC0TZaQr?from_c=1334227072',true);
tumblrReq.send();
return false; 
```

我要做的是创建一个函数，该函数将在每个加载更多笔记的实例中调用，它将这些新笔记作为变量，在它们上运行一个函数，用符号替换一些文本，然后将它们附加到现有的同位素设置，例如使用无限滚动加载新页面时。

[此链接](http://skandiumsc.tumblr.com/post/20766182759/visualgraphic-candy-number)是我正在处理的博客中的永久链接页面之一，您可以在其中看到我在说什么。[这](http://www.tumblr.com/docs/en/custom_themes#notes)是来自 tumblr 文档的参考资料。

我会很感激**任何**想法，因为它们可能会引导我朝着正确的方向前进！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:52:31.640

好吧，事实证明我自己的方向是正确的，只是编写了一个太乱的代码，但它现在可以工作，所以我将详细说明如何，以便其他人可以使用这些信息：

```
function tumblrNotesLoaded(notes_html){  //this will be called when loading notes

     //code goes here!

}; 
```

我把它放在任何其他函数之外，我认为这个术语是“在全局命名空间中”，所以我对加载新笔记时需要调用的每个函数都做了。

要将其附加到同位素墙（我想它也适用于砌体，只是更改了一些关键字），我将其添加到代码中：

```
var newtmbnotes =  $("li.note:not(.isotope-item)"); 
```

这将选择所有尚未被 Isotope 定位的音符元素（插件将类“isotope-item”添加到它处理的每个项目）。这将只留下新音符的选择。

```
$('ol.notes').isotope( 'appended', newtmbnotes, introNote() ); 
```

最后是这个，它附加了之前定义的新笔记，然后运行一个名为 introNote 的函数，我在它们准备好后将它们淡入。

# sql - 包含来自其他 2 个表的信息的 UPDATE 表

> ID：10138879
> 
> 赞同：0
> 
> 时间：2012-04-13T10:04:59.227
> 
> 标签：sql, ms-access

我有 3 个表，其信息如下：

**注意事项：**

```
NOEUD   TYPE_MAT   NUM_COL
1        PBT         100
2        AMP         
3        REP    
4        PBP         120 
```

**科林福：**

```
NUM_COL    INTEREXTER
100            1
120            2 
```

**铅：**

```
NOEUD     FORFAIT
1           I
3            
4           E 
```

例如，在 colinfo.num_col = 2 中，我想用 E 更新表 PB.forfait。

我正在尝试这样的事情，但仍然没有成功。它是一个 Microsoft Access 数据库。

```
UPDATE pb

inner join (

SELECT noeud, type_mat, n.num_col, c.interexter
FROM noeuds AS n, colinfo AS c
WHERE ((NOEUDS.TYPE_MAT="PBT") Or (NOEUDS.TYPE_MAT="PBP")) 
  And (n.num_col=c.num_col)

) n on pb.noeud=n.noeud

SET (PB.FORFAIT = "E")

WHERE (n.INTEREXTER="2"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:11:45.073

试试这个

```
UPDATE 
(NOEUDS AS n INNER JOIN COLINFO AS ci ON n.NUM_COL = ci.NUM_COL) 
INNER JOIN PB ON n.NOEUD = PB.NOEUD 
SET PB.FORFAIT = "E"
WHERE (n.TYPE_MAT="PBP" Or n.TYPE_MAT="PBT") 
  AND ci.INTEREXTER=2 
```

如果`ci.INTEREXTER`是字符串，则使用

```
AND ci.INTEREXTER = "2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:40:32.600

怎么样：

```
UPDATE (PB 
INNER JOIN Noeuds ON PB.NOEUD = Noeuds.NOEUD) 
INNER JOIN ColInfo ON Noeuds.NUM_COL = ColInfo.NUM_COL 
SET PB.FORFAIT = "E"
WHERE (((ColInfo.INTEREXTER)=2)); 
```

我使用查询设计窗口构建了它，这是 MS Access 中非常有用的工具。

# php - 将大文件 (mp4) 上传到 IIS 7.5 会出现 500 内部服务器错误

> ID：10138881
> 
> 赞同：1
> 
> 时间：2012-04-13T10:05:01.477
> 
> 标签：php, iis, file-upload, iis-7.5

我创建了一个网站，我需要在该网站上上传视频文件，并且已经运行了很长时间。但是过了一会儿它就停止了工作，现在当我上传视频时它会给我以下 IIS 错误消息。图像确实有效（可能是由于它们的尺寸较小）。我使用带有 PHP 服务器端脚本的 html 表单来上传。

![在此处输入图像描述](../Images/39f4c2592108f30a8542dbe97c626bfd.png)

我已经为整个 inetpub 设置了用户权限，以允许 IIS 用户的所有操作。

如果你知道它可能是什么请告诉我，几周来一直在努力解决这个问题。

**PHP 设置：**

upload_max_filesize = 2048M

post_max_size = 2048M

最大输入时间 = 3000

max_execution_time = 3000

文件上传 = 开

default_socket_timeout = 3000

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:44:52.923

在过去的 2 个月里，我尝试了很多东西，但找不到解决这个问题的方法，所以我决定使用[plupload](http://plupload.com/)解决这个问题，这是一个将大文件分块的上传脚本。这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:26:01.497

请设置 upload_max_filesize=size in mb post_max_size=size in mb

在 php ini 文件中

# javascript - 记录 Javascript/Jquery 错误和异常

> ID：10138887
> 
> 赞同：1
> 
> 时间：2012-04-13T10:05:20.723
> 
> 标签：javascript, error-handling

我在 javascript / jquery Web 架构中注意到的一件事是，异常似乎很容易被吞没并被忽视。我在想，如果您的 Web 层有 javascript 异常，有关它的信息通过 AJAX 请求发送回您的服务器，那么至少您可以记录有关它的信息，这将是一件非常好的事情。

我想知道必须有一些框架功能已经做到了这一点，因为我认为这将是一个非常有用的功能。任何人都知道可以做到这一点的任何框架、功能或库吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T10:07:27.617

可能有，但自己实现并不难。只需为事件挂钩一个事件处理程序`window`，`error`并在那里发出 AJAX 请求。

将传递给您的事件处理程序的参数依次是：作为字符串的错误消息，引发错误的 URL，还有一个字符串，引发错误的行号，最后是事件对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T11:57:28.833

在构建自己的解决方案时，您必须考虑很多事情。例如，您会看到插件中的 JavaScript 错误产生的大量噪音，占所有错误的 10-20%。智能地对错误进行分组是一个非常困难的问题，因为对于不同的浏览器和版本，您会收到非常不同的错误消息。此外，如果您在 mousemove 事件中有错误，您也不想记录 1,000 个错误。还有很多其他的东西需要考虑。

我们已经构建了一个 SaaS 解决方案，就像您要求的[Muscula 一样](http://muscula.com)。我们目前处于私人测试阶段，但正在努力发布。我们已经监测了超过 1 亿次的 JavaScript 错误页面浏览量，并且每周记录超过 100 万次 JavaScript 错误。除了我上面提到的问题之外，我们还解决了在缩小的 JavaScript 中显示错误的问题，以及与 Goggle Analytics 的集成等等。

您像 Google Analytics 一样安装 Muscula，只需将脚本复制到您的页面，您就会记录 JavaScript 错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T04:15:23.790

您可以自己制作，但这可能有点棘手，因为您可能会被错误淹没，并且发送许多 ajax 请求会使问题更加复杂。错误日志必须去抖动，上帝禁止你的错误跟踪代码在一些不起眼的浏览器上产生和错误。有几个 SaaS 产品的免费计划值得一看：

[http://errorception.com/](http://errorception.com/)

[http://www.exceptionhub.com/](http://www.exceptionhub.com/)

我会尝试这些，然后如果它们不适合您的需求，那么您可以自己动手。

# ios - 未捕获的异常：-[WebDataSource onGeomagneticModel:]：无法识别的选择器

> ID：10138888
> 
> 赞同：1
> 
> 时间：2012-04-13T10:05:21.257
> 
> 标签：ios, gyroscope

当我的应用程序再次激活时，我收到错误消息。它从后台返回。

我猜它是我的陀螺仪，但还没有找到解决方案。

我的错误：

```
-[WebDataSource onGeomagneticModel:]: unrecognized selector sent to instance 0x37c430
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[WebDataSource onGeomagneticModel:]: unrecognized selector sent to instance 0x37c430' 
```

我的应用程序DidEnterBackground：

```
- (void)applicationDidEnterBackground:(UIApplication *)application{
    NSLog(@"Application moving to background");
    LocationManagerDelegate *locationController = [[LocationManagerDelegate alloc] init];
    [locationController.locationManager stopUpdatingHeading];
    [locationController stopDeviceMotion];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:11:12.793

看起来您创建了另一个 LocationManagerDelegate 实例。所以..你没有打开的“旧”实例。

你应该在你的 .h 文件中添加

```
@property (nonatomic, retain) LocationManagerDelegate *locationController; 
```

然后在.m文件中的@implementaion上面添加

```
@synthesize locationController=locationController_; 
```

在您创建 LocationManagerDelegate 的地方，您需要以某种方式将其更改为（您没有发布那部分代码）：

```
self.locationController = [[[LocationManagerDelegate alloc] init] autorelease]; 
```

然后将您的代码更改为：

```
- (void)applicationDidEnterBackground:(UIApplication *)application{
    NSLog(@"Application moving to background");
    [self.locationController.locationManager stopUpdatingHeading];
    [self.locationController stopDeviceMotion];
} 
```

# jquery - 如何每秒使用 jQuery 进行一次 ajax 调用？

> ID：10138908
> 
> 赞同：1
> 
> 时间：2012-04-13T10:07:15.277
> 
> 标签：jquery, mysql, ajax, load

好的，所以我设法让一切运行起来——最后一件事。基本上，一个 jQuery+ajax 函数将日期增加 15 秒，并在 MySQL 中添加一个新行。我需要放入一个新行，以便获得历史记录的最后 5 行：

```
<?php 
include("inc/dblink.inc");
$itemid = intval($_POST['i']);
$bid = intval($_POST['b']);
$row = mysql_fetch_array(mysql_query("SELECT * FROM test WHERE itemid=$itemid ORDER BY bidid DESC LIMIT 0,1"));
$date = $row['date'];
$newdate = strtotime($date);
$newerdate = ($newdate + 15);
$newestdate = date("Y-m-d H:i:s", $newerdate);
mysql_query("INSERT INTO test (date,bid,itemid) VALUES ('$newestdate','$bid','$itemid')");
?> 
```

第二个脚本每秒刷新一次并显示表中的数据。

```
<script type="text/javascript">
var auto_refresh = setInterval(
function()
{
$('#timeleft').load('gettime.php', { i: <?=$itemid;?> }).show();
$.ajax({
    type: "POST",
    url: "gettime.php",
    data: ({i : <?=$itemid;?>}),
    success: function(data){
        var s = data;
        var t = s.split(/[- :]/);
        var d = new Date(t[0], t[1]-1, t[2], t[3], t[4], t[5]);
        $('#defaultCountdown').countdown({until: d,compact: true, 
        description: ''});
    }
});
}, 1000);
</script> 
```

这是gettime.php

```
<?php 
include("inc/dblink.inc");
$itemid = intval($_POST['i']);
$row = mysql_fetch_array(mysql_query("SELECT * FROM test WHERE itemid='$itemid' ORDER BY bidid DESC LIMIT 0,1"));
$date = $row['date'];
echo $date;
?> 
```

我还使用了[http://keith-wood.name/js/jquery.countdown.js中的 Keith Wood 的 jQuery 倒计时脚本](http://keith-wood.name/js/jquery.countdown.js)

问题：

这条线`$('#timeleft').load('gettime.php', { i: <?=$itemid;?> }).show();`不错。添加 15 秒的新时间显示没有问题。这是我遇到问题的倒计时。它不会为计时器增加 15 秒，但如果我刷新整个页面，我可以看到增加了 15 秒。

我究竟做错了什么？jQuery 相当新。谢谢！

[您可以在这里](http://angkas.ph/testarea/index.php "这里")看到它的实际效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T23:31:09.607

这里有几个主要问题，还有一些小问题。

## 日期格式

使用 unix 时间戳而不是格式化日期要简单得多。PHP 和 javascript 在这方面非常相似。两者都基于相同的“纪元”，即 1970 年 1 月 1 日 00:00。UNIX/PHP 从该日期开始以秒为单位工作，而 javascript 以毫秒为单位工作。因此，无需复杂的字符串处理`Date`即可初始化javascript对象。`new Date(unix_timestamp * 1000);`

## 倒数

Countdown 旨在以 1 秒的分辨率自由运行到零（然后触发可选的回调函数）。如果轮询间隔为 1 秒，则无需每次都重新初始化倒数计时器 - 仅当返回的时间戳发生更改时。

### 效率

使用，在函数`setinterval`之外创建尽可能多的对象/字符串对客户端处理器更友好。`setinterval`这尤其适用于带有（静态）选择器的 jQuery 语句，因为这些选择器会导致（可能很大的）DOM 被搜索。

把所有这些放在一起，我的 javascript 看起来像这样：

```
$(function(){
    var $$ = {//cached jQuery objects
        timeleft: $('#timeleft'),
        defaultCountdown: $('#defaultCountdown')
    };
    var map_1 = {//namespace for setInterval and countdown data
        url: 'gettime.php',
        lastTimeStamp: 0,
        countdown_settings: {until:null, compact:true, description:''},
        itemid: <?=$itemid;?>
    };
    var auto_refresh = setInterval(function() {
        $$.timeleft.load(map_1.url, {i:map_1.itemid}).show();
        $.ajax({
            type: "POST",
            url: map_1.url,
            data: {i:map_1.itemid},
            success: function(unixTimeStamp) {
                unixTimeStamp = parseInt(unixTimeStamp);
                if(unixTimeStamp !== map_1.lastTimeStamp) {
                    map_1.countdown_settings.until = new Date(parseInt(unixTimeStamp) * 1000);
                    $$.defaultCountdown.countdown(map_1.countdown_settings);
                    map_1.lastTimeStamp = unixTimeStamp;
                }
            }
        });
    }, 1000);
}); 
```

当然，要完成这项工作，`echo $date;`需要修改 PHP 语句以回显日期的 unix 时间戳表示。对于存储在数据库中的日期格式的知识，这应该是相当微不足道的。

*编辑：Unix 纪元是 1970 年 1 月 1 日 00:00（午夜），而不是 12:00（中午），呵呵！Javascript 是相同的，因此对代码没有负面影响。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:14:17.770

您的日期对象（即“d”）仅初始化一次，即页面第一次加载时。每次运行倒计时功能时，找到一种重新初始化它的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:16:05.480

我认为您在这一行中的 php 脚本变量只生成一次，这就是为什么它只工作一次（即每次页面刷新）。

```
 $('#timeleft').load('gettime.php', { i: <?=$itemid;?> }).show(); 
```

更新您的 JS 成功代码以更新变量，因此每次调用都会更新页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T18:29:12.153

在ajax中添加：

```
$('#defaultCountdown').countdown('option', {
    format: 'DHMS', until : d
}); 
```

为我工作。

# android - 定期从服务器更新数据设计

> ID：10138916
> 
> 赞同：0
> 
> 时间：2012-04-13T10:08:12.673
> 
> 标签：android, multithreading, timer

我有一个关于如何为我的程序设计更新程序的问题。哪个命令最好从服务器更新数据？（绝对多线程）

```
Thread {
   Timer {
      result = downloaddata(url)
   }
} 
```

或者

```
Timer {
   Thread {
     result = downloaddata(url)
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:16:00.427

谁在第二个解决方案中管理计时器？它应该再次成为主线程吗？我会建议第一个选项。

在 android 中，`Thread`将在`Service`.

另外，想想你是否真的需要定期更新。如果更改相对较少，那么从服务器[推送通知](https://stackoverflow.com/q/1378671/1108032)可能是满足您需求的更好解决方案（它们将大大减少对服务器的调用次数，从而消耗资源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:18:36.047

我建议[BroadCastereciever](http://developer.android.com/reference/android/content/BroadcastReceiver.html) .. 它定期运行以及在后台运行.. 你没有在那里创建 Thrad，.. 不喜欢在计时器中做某事，因为计时器不是那么可靠.. 如果你的应用程序进入后台它可能会在没有任何线索的情况下结束..

# python - 可以自定义 Pylint 错误检查吗？

> ID：10138917
> 
> 赞同：39
> 
> 时间：2012-04-13T10:08:14.707
> 
> 标签：python, pydev, pylint

我在设置 pylint 的地方使用 pydev。问题是即使在评论中，pylint 也会报告警告。我正在寻找禁用任何行或块注释内的任何类型的检查。另外，我希望在我的代码中遵循 camelCase 命名约定而不是下划线来表示变量和参数。有没有办法在不使用任何 pylint 插入我的代码的情况下指定这样的规则：禁用评论？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-13T10:14:21.067

您可以使用全局禁用某个类的警告

```
pylint --disable=W1234 
```

或者使用特殊的 PyLint 配置文件

```
pylint --rcfile=/path/to/config.file 
```

下面给出了一个示例配置文件：

```
[MESSAGES CONTROL]
# C0111 Missing docstring 
# I0011 Warning locally suppressed using disable-msg
# I0012 Warning locally suppressed using disable-msg
# W0704 Except doesn't do anything Used when an except clause does nothing but "pass" and there is no "else" clause
# W0142 Used * or * magic* Used when a function or method is called using *args or **kwargs to dispatch arguments.
# W0212 Access to a protected member %s of a client class
# W0232 Class has no __init__ method Used when a class has no __init__ method, neither its parent classes.
# W0613 Unused argument %r Used when a function or method argument is not used.
# W0702 No exception's type specified Used when an except clause doesn't specify exceptions type to catch.
# R0201 Method could be a function
# W0614 Unused import XYZ from wildcard import
# R0914 Too many local variables
# R0912 Too many branches
# R0915 Too many statements
# R0913 Too many arguments
# R0904 Too many public methods
disable=C0111,I0011,I0012,W0704,W0142,W0212,W0232,W0613,W0702,R0201,W0614,R0914,R0912,R0915,R0913,R0904,R0801 
```

请参阅[Pylint 专用站点上](http://www.pylint.org)的[文档](http://docs.pylint.org)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-13T11:58:06.020

正如 cfedermann 所说，您可以在文件中指定要禁用的消息（请注意，如果您不想使用内联注释，`~/.pylintrc`可以使用生成存根文件。`pylint --generate-rcfile`

您还将在生成的文件中的 [BASIC] 部分中看到“method-rgx”、“function-rgx”等选项，您可以根据需要配置它们以支持驼峰式大小写样式而不是 pep8 下划线样式.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-13T05:30:30.577

虽然这是一个老问题，但应该提到现在可以指定自己[的正则表达式来匹配 names](http://docs.pylint.org/features.html#basic-checker)。

然后你的正则表达式匹配骆驼案例将是这样的：

```
[a-z][a-zA-Z0-9]{2,30}$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-18T01:30:39.207

[这是自定义检查示例](http://%20https://github.com/PyCQA/pylint/blob/63eb8c4663a77d0caf2a842b716e4161f9763a16/pylint/checkers/typecheck.py)，[另一个更容易理解](https://breadcrumbscollector.tech/writing-custom-checkers-for-pylint/)的示例。

我遇到了和你类似的问题。以下代码是我的解决方案。我定制了一个检查器来禁止导入`datetime.now`。大家可以参考一下：</p>

```
class TestChecker(BaseChecker):
    """
    find the check type in the following url:
    https://github.com/PyCQA/pylint/blob/63eb8c4663a77d0caf2a842b716e4161f9763a16/pylint/checkers/typecheck.py
    """
    __implements__ = IAstroidChecker

    name = 'test-checker'
    priority = -1
    msgs = {
        'W0001': (
            'You should not import "%s"',
            'import-datetime-returns',
            'Should not import datetime'
        ),
    }

    def __init__(self, linter):
        super().__init__(linter)
        # I use original pylint's ImportsChecker as a property
        # from  import **
        self.forbidden_import = ['datetime.datetime.now']
        self.forbidden_import_from = ['datetime.now', 'now']
        self.forbidden_import_attribute = ['datetime.now', 'now', 'datetime.datetime.now']

    #the function will be rewrited
    def visit_importfrom(self, node):
        names = [name for name, _alias in node.names]
        for item in names:
            for check in self.forbidden_import_from:
                if item == check:
                    self.add_message('W0001', node=node, args=item)

    def visit_import(self, node):
        names = [name for name, _ in node.names]
        for item in names:
            for check in self.forbidden_import:
                if check == item:
                    self.add_message('W0001', node=node, args=item)

    def visit_attribute(self, node):
        for check_attr in self.forbidden_import_attribute:
            if check_attr == node.as_string():
                self.add_message('W0001', node=node, args=check_attr)

def register(linter):
    linter.register_checker(TestChecker(linter)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-05T17:32:22.937

我有两种自定义方式`pylint`。

## 使用配置文件

第一种方法是你在哪里

*   调用 pylint 生成模板配置文件
*   然后你根据你的需要/想要定制配置文件
*   然后将配置文件放在默认的 pylint 配置文件位置，或者始终调用 pylint 并指定配置文件路径

## 使用包装脚本

第二种方法是创建一个调用 pylint 的包装器脚本，在包装器脚本中你有一堆看起来像这样的行：

```
pylint \
       ${options_here} \
       --disable=xyz1 \
       --disable=xyz_2 \
       ${more_options} \
       --disable=xyz_N \
       --disable=abc \
       $@ 
```

目前我正在使用包装脚本方法，因为我希望按行号对问题进行排序，并且我做了一些 shell 脚本来获得排序顺序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-18T17:10:23.840

除了 pradyunsg 的上述回答之外，这里是 CamelCase 的另一个正则表达式：

```
^([a-z]\w+[A-Z]+\w+) 
```

*（取自 PyLint 的`spelling.py`检查器，位于：`%APPDATA% - Local - Programs - Python - [PythonVersion] - Lib - site-packages - pylint - checkers`文件夹）*

# c++ - 将两个数组复制到一个更大的数组中？

> ID：10138918
> 
> 赞同：0
> 
> 时间：2012-04-13T10:08:25.120
> 
> 标签：c++

我有以下问题：

> 编写一个带有名为“merge”的函数的程序，它将一个数组的数据整数复制到一个更大的数组中，然后将第二个数组的数据整数复制到第一个数组内容之后的更大的数组中

我的功能有问题

如果我为数组 1 输入 {1,2}，为数组 2 输入 {3,4}

那么输出是 1 2 -57574 -658675
应该是 1 2 3 4

```
void merge (int a[], int n, int b[],int m) {

int c[100];
int x=n+m ; //size of merge aray c[] 

for(int i = 0; i < n; i++)
c[i]=a[i];

for(int j = n ; j < x ; j++)
c[j] = b[j];

cout<<endl<<endl;

for(int k = 0; k < x; k++)

cout<<c[k]<<" ";

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T10:11:25.217

问题：

1.  您需要动态创建正确大小的数组 - 可能超过 100 个项目。
2.  您需要从`b[0]`not开始复制`b[n]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T22:36:56.883

这是我的简单代码。修改它以达到您的合并功能目的。

```
int main() {
    int a[5];
    int b[5];
    int c[10];

    cout << "Enter elements for array a[5]:" << endl;
    int i = 0;
    do {
        cin >> a[i];
        i++;
    } while (i <= 4);

    cout << "Enter elements for array b[5]:" << endl;
    i = 0;
    do {
        cin >> b[i];
        i++;
    } while (i <= 4);

    for (register int x = 0; x <= 5; x++) {
        if (x == 5) {
            for (register int h = 0; h < 5; h++) {
                c[x] = b[h];
                x++;
            }
            break;
        }
        c[x] = a[x];
    }

    for (register int x = 0; x < 10; x++) {
        cout << c[x] << " ";
    }
    return (0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:52:18.550

为什么不只使用向量？像这样的东西：

```
std::vector<int> concat(const std::vector<int>& a, const std::vector<int>& b) {
    std::vector<int> c;
    c.reserve(a.size() + b.size());
    c.insert(c.end(), a.begin(), a.end());
    c.insert(c.end(), b.begin(), b.end());
    return c;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T10:11:35.680

```
c[j] = b[j]; 
```

是这里的问题。第一个`j`是正确的，但第二个`j`应该是真的`j - n`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T10:11:51.643

在第二个循环中

```
for(int j = n ; j < x ; j++)
c[j] = b[j];    <---- b[j] not defined, you need to start from b[0] 
```

尝试这个：

```
for(int j = n ; j < x ; j++)
c[j] = b[j-n]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T10:24:53.333

内部循环可以重写为：

```
for(int j=0;k=n;j<m,k<x;j++,k++) 
```

{

```
 c[k]=b[j]; 
```

}

我希望你明白这一点...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T10:13:03.733

```
void merge (int a[], int n, int b[],int m) 
{
  int* c = new int[n+m];

  for(int i = 0; i < n; i++)
    c[i]=a[i];

  for(int j = 0 ; j < m ; j++)
    c[n+j] = b[j]; // <-- there was your fault

  cout<<endl<<endl;
  for(int k = 0; k < n+m; k++)
    cout<<c[k]<<" ";

  delete [] c;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-13T10:54:18.203

```
void merge (int a[], int n, int b[],int m) 
{

    int c = new int[n + m];
    std::copy(a, a + n, c);
    std::copy(b, b + m, c + n);

    cout<<endl<<endl;
    for(int k = 0; k < n+m; k++)
        cout<<c[k]<<" ";    

    delete[] c;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-04-13T10:26:33.333

```
#include<iostream>
#include<assert.h>

void merge(int first[], int nLenFirst, int second[], int nLenSecond, int merged[]) 
{
    int nTotal = nLenFirst + nLenSecond;

    for(int i= 0; i < nLenFirst; ++i)
        merged[i] = first[i];

    for(int i= nLenFirst, j = 0; i < nTotal; ++i,++j)
        merged[i] = second[j];

}

void main()
{
    int a[] = {2, 4, 5, 7};
    int b[] = {3, 7, 11, 19, 25};

    int nLenA = sizeof(a)/sizeof(int);
    int nLenB = sizeof(b)/sizeof(int);

    int c[100] = {0};

    int nTotal = nLenA + nLenB;
    assert(sizeof(c)/sizeof(int) >= nTotal);

    merge(a, nLenA, b, nLenB, c);

    for(int i = 0; i < nTotal; ++i)
    {
        std::cout << c[i] << std::endl;
    }
} 
```

专注于断言！

# web-services - 在 Mule 流中使用基于 SOAP 的 Web 服务

> ID：10138919
> 
> 赞同：0
> 
> 时间：2012-04-13T10:08:31.723
> 
> 标签：web-services, mule, flow

我正在使用 Mule Studio 创建一个使用公共网络服务[http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL&method=GetCityForecastByZIP](http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL&method=GetCityForecastByZIP)的流。为了达到同样的效果，我创建了以下配置 xml。

```
<mule xmlns="http://www.mulesoft.org/schema/mule/core"     xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="CE-3.2.1" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/current/mule-xml.xsd 
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
<spring:beans>
    <spring:bean id="Bean" name="Bean" class="javax.xml.bind.JAXBContext" factory-method="newInstance" doc:name="myJAXBCtx">
        <spring:constructor-arg value="com.practice.data"/>
    </spring:bean>
</spring:beans>
<flow name="webservice" doc:name="webservice">
    <file:inbound-endpoint path="D:\MuleStudio\workspace\transformer\ip" moveToDirectory="D:\MuleStudio\workspace\transformer\processed" doc:name="Input Request File">
        <file:filename-regex-filter pattern="^.*\ws.(xml)$" caseSensitive="true"/>
    </file:inbound-endpoint>
    <mulexml:xml-to-object-transformer returnClass="com.practice.data.GetCityForecastByZIP" doc:name="XML to Object">
        <mulexml:alias name="GetCityForecastByZIP" class="com.practice.data.GetCityForecastByZIP"/>
    </mulexml:xml-to-object-transformer>
    <outbound-endpoint address="wsdl-cxf:http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL&amp;method=GetCityForecastByZIP" exchange-pattern="request-response" doc:name="Generic"/>
    <file:outbound-endpoint path="D:\MuleStudio\workspace\transformer\output" outputPattern="ws-response#[function:dateStamp].xml" doc:name="File"/>
</flow> 
```

在 Mule Studio 中运行流程时，出现以下异常：

```
org.apache.cxf.interceptor.Fault: Marshalling Error: class com.practice.data.GetCityForecastByZIP nor any of its super class is known to this context. 
```

我已经为 GetCityForecastByZIP 提供了正确的注释。参考以下代码：

```
package com.practice.data;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlRootElement(name="GetCityForecastByZIP",namespace="http://ws.cdyne.com/WeatherWS/")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "zip"})
public class GetCityForecastByZIP {

    @XmlElement(name="ZIP",required = true)
    private String zip =  null;

    public GetCityForecastByZIP() {

    }

    public String getZip() {
        return zip;
    }

    public void setZip(String zip) {
        this.zip = zip;
    }
} 
```

有人可以告诉我应该如何纠正这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:04:18.793

您可以尝试将 zip 作为输入传递给服务（例如，实际的字符串，即 02111，而不是 XML）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:16:25.813

[CXF WSDL 连接器](http://www.mulesoft.org/documentation/display/MULE3USER/WSDL+Connectors#WSDLConnectors-GenericWSDLEndpoints)的文档指出：

> CXF WSDL 提供程序的一个限制是它不允许您使用非 Java 原语（不是 String、int、double 等的对象）。

GetCityForecastByZIP 返回一个复杂的对象，而不仅仅是一个简单的值，因此您不能使用 CXF WSDL 连接器与此 Web 服务进行交互。

相反，请使用[CXF JAX-WS 客户端](http://www.mulesoft.org/documentation/display/MULE3USER/Consuming+Web+Services+with+CXF)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T04:48:16.753

您可以尝试使用 Mule Web 服务使用者组件：-`<ws:consumer-config/>`吗？
这是参考：- [https://developer.mulesoft.com/docs/display/current/Web+Service+Consumer](https://developer.mulesoft.com/docs/display/current/Web+Service+Consumer)

# facebook - FB Connect - 第二次登录后弹出空白

> ID：10138923
> 
> 赞同：4
> 
> 时间：2012-04-13T10:08:35.843
> 
> 标签：facebook

我正在使用 JavaScript SDK 函数登录 Facebook。第一次，当用户单击登录按钮时，会显示登录弹出窗口，用户可以登录。然后用户单击注销按钮。在用户尝试再次登录时注销后，在输入凭据并点击弹出窗口的登录按钮后，弹出窗口变为空白。当用户刷新主页时，它会再次工作。

我尝试了以下解决方案（虽然它是针对 IE8），但没有运气：

[Facebook 连接在 Internet Explorer 8 中登录时显示空白弹出窗口](https://stackoverflow.com/questions/5778100/facebook-connect-showing-blank-popup-on-login-in-internet-explorer-8)

我也试过清除FB设置的cookies。但这没有用。有什么我可以尝试的吗？

# java - 如果类返回 -1 调用 System.exit(-1) 在其主

> ID：10138925
> 
> 赞同：2
> 
> 时间：2012-04-13T10:08:47.853
> 
> 标签：java, ant

我发现许多关于处理测试失败的线程，但是如果“java”ant 任务以返回 -1（或任何其他错误值）的类完成，我没有找到停止 ant 的方法。

我不想使用 junit 任务，因为它不是单元测试，因为用户必须输入一些输入。其 main 方法中的类根据输入检查代码并最终返回调用 System.exit(-1) 的错误。

在那种情况下，我需要停止蚂蚁。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T10:23:27.833

您可以使用 java 任务的[failonerror 属性](https://ant.apache.org/manual/Tasks/java.html)。

```
 <java failonerror="true" fork="true" ... /> 
```

**如果返回码不是 0**，这将使您的构建失败（默认为“false”）。

### 注意：您需要使用 fork="true" 运行。

或者使用[条件](https://ant.apache.org/manual/Tasks/conditions.html)[失败](https://ant.apache.org/manual/Tasks/fail.html)

```
 <java resultproperty="result" fork="true" ... />
  <fail>
     <condition>
       <equals arg1="${result}" arg2="-1"/>
     </condition>
   </fail> 
```

# javascript - HTML 元素上的静态与动态事件附件

> ID：10138927
> 
> 赞同：3
> 
> 时间：2012-04-13T10:08:52.627
> 
> 标签：javascript, html, events

由于标题可能有点模糊或不清楚，我将首先解释我的两种方法的含义。在我的 HTML/JS 代码中，我混合了两种将事件附加到我的 html 元素的方式：(1) 我称之为“静态”的方式：

```
<input name="abc" class="def" id="xyz" onclick="do_something"/> 
```

(2) 我所说的“动态”：

```
<input name="abc" class="def" id="xyz" /> 
```

和

```
$(document).ready(function() {
    $('#xyz').click(function() { do_something; })
}); 
```

请注意，这不是真正的代码，只是作为示例呈现的内容。我也不必使用 jquery，同样可以通过简单的方式实现

```
document.onload = function() {
    document.getElementById('xyz').onclick = function() { do_something; }
} 
```

通常，如果逻辑非常简单（例如，在单击另一个元素时启用/禁用元素），我会使用静态方法。如果逻辑更复杂，我会使用动态的。当然，我也可以使用带有`onclick="function_call()"`- 的静态方法，并将所有复杂的逻辑放入这个函数中，尽管这可能是我从旧时代（多年前）遗留在代码中的东西。

现在，我遇到了一些人会发誓其中一种方法并嘲笑任何会使用另一种方法的人，声称另一种方法是错误的/难以阅读/较慢/添加你自己的解释。但是，我还没有找到任何真正好的理由来始终坚持使用一种方法并不断混合这些方法。我是否遗漏了什么，或者真的没有充分的理由坚持使用一种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T10:11:04.280

您***应该***将结构 (HTML)、样式 (CSS) 和行为 (JS) 分开。

事件是页面的***行为***——在 JS 中执行。

***不要***将它们放在其他任何地方，不要放在 HTML 中，不要放在 CSS 中（如果可能的话）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:11:12.747

静止的：

*   将逻辑与内容混合
*   仅支持旧的（未正式指定）“DOM0”事件模型
*   不允许将多个处理程序绑定到一个事件 - 您*应该*使用 DOM2 `addEventListener()`，而不是`.onXXX()`
*   由于引号混合使语法复杂化 - 您可能必须转义引号以避免与`onXXX`属性中的引号发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T11:43:29.317

我的做法是遵循**最小意外规则**。

如果我的页面是 99% 的 HTML 并且只有 1 或 2 行 Javascript，那么我使用内联事件`<div onclick="">`来最小化页面中由于 addEventListener 包袱而产生的绒毛量。

如果我的页面太复杂，元素太多，并且如果行为分离会导致大块`getElementById`或`$('.tree')`部分，这实际上会抑制可读性（因此会增加意外级别），那么我也会使用内联事件。

否则，我使用预期的结构和行为规则分离。

# asp.net - 我的网站出现以下错误

> ID：10138932
> 
> 赞同：0
> 
> 时间：2012-04-13T10:09:21.427
> 
> 标签：asp.net

视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:11:09.547

您是否跨多个服务器对站点进行负载平衡？

[http://forums.iis.net/p/1148193/1864450.aspx](http://forums.iis.net/p/1148193/1864450.aspx)

> machineKey 值在 webfarm 中的所有机器上必须相同。 [https://msdn.microsoft.com/en-us/library/ms998288.aspx](https://msdn.microsoft.com/en-us/library/ms998288.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:12:04.407

在 web.config 中试试这个：

```
<pages enableEventValidation="false" viewStateEncryptionMode="Never"> 
```

# c# - Basecontrol Page.LoadComplete -= 如果子控件被多次加载，Page_LoadComplete 会引发 Object ref 错误

> ID：10138934
> 
> 赞同：0
> 
> 时间：2012-04-13T10:09:41.647
> 
> 标签：c#, asp.net, events, event-handling

我有一个基本控制：

```
public partial class BaseControl : System.Web.UI.UserControl
{
    protected virtual void Page_Load(object sender, EventArgs e)
    {
    }

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        Page.LoadComplete += Page_LoadComplete;
    }

    protected virtual void Page_LoadComplete(object sender, EventArgs e)
    {
        Page.LoadComplete -= Page_LoadComplete;
    }
} 
```

然后我有一个由此派生的控件

```
public partial class MyChildControl : BaseControl 
```

我遇到的问题是，如果我加载`MyChildControl`不止一次，那么我会`Page.LoadComplete -= Page_LoadComplete;`在`BaseControl`. 我有点明白为什么，但我有两个问题：

1.  不应该每个`MyChildControl`引用它自己的版本，`BaseControl`然后注册它自己的版本`PageLoadComplete`吗？
2.  如何检查它是否不为空？我好像做不到`!= null`。

编辑：这似乎`Page`是空的，检查`Page != null`解决了这个问题，但我仍然不明白它是如何`Page`为空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:32:05.273

`Page_LoadComplete`不能为空，它只是为 mehog 创建的委托`Page_LoadComplete`。所以我认为 Page in`Page.LoadComplete`可能是 null 或者页面具有自定义逻辑，用于将处理程序添加到事件 LoadComplete 并且那里有 ref 错误

# python - 关于python中的global关键字

> ID：10138937
> 
> 赞同：3
> 
> 时间：2012-04-13T10:09:46.103
> 
> 标签：python

```
# coding: utf-8

def func():
    print 'x is', x
    #x = 2   #if I add this line, there will be an error, why?
    print 'Changed local x to', x
x = 50
func()
print 'Value of x is', x 
```

1.  我没有添加`global x`in func函数，但它仍然可以找到`x`是50，为什么？
2.  当我`x=2`在func函数中添加该行时，会出现错误（`UnboundLocalError: local variable 'x' referenced before assignment`），为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T10:31:44.417

这里的技巧是**静态检测本地名称**：

*   只要名称`x`未在函数中分配，引用即可`x`解析为全局范围
*   如果该名称在函数中的**任何位置**`x`分配，Python 假定它是函数中任何**地方**的本地名称。结果，第一行成为错误，因为在分配之前使用了本地名称。**`x`**`x`****

 ****换句话说：分配的名称在函数中的任何地方都被视为本地，而不仅仅是在分配点之后。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T10:12:56.437

该`global`关键字只需要写入全局变量。

存在错误，因为分配给未声明为全局的变量会创建该名称的局部变量。您在分配之前在该范围内引用`x`它，因此您试图读取尚未分配的局部变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T10:16:19.070

Python 使用相当典型的[变量作用域](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)。非局部变量在函数中是可见的。

`global`如果要分配给全局范围内的变量，则只需要关键字。您还必须注意全局范围和外部范围之间的区别。考虑影响：

```
x = 'global'
def f():
    x = 'local in f'
    def g():
        global x 
        x = 'assigned in g'
    g()
    print x 
```

执行`f()`上述代码后将打印`local in f`，而`x`在全局范围内设置为`'assigned in g'`.

* * *

从 Python 3 开始，还有一个`nonlocal`关键字，它允许您从外部范围分配给变量。

```
x = 'global'
def f():
    x = 'local in f'
    def g():
        nonlocal x 
        x = 'assigned in g'
    return g
    print(x) 
```

执行`f()`上述代码后，将在全局范围内打印 'assigned in g `(which is the value of`x `in local scope of`f() x'`), while value of`保持不变。

还值得注意的是，Python 使用词法（静态）范围，因此以下代码不会**修改**全局`x`范围内的 ：

```
x = 'global'
def f():
    x = 'local in f'
    def g():
        nonlocal x 
        x = 'assigned in g'
    return g
g = f()
g() 
```****

# iphone - 如何生成带有标头的 JSON 对象？

> ID：10138938
> 
> 赞同：0
> 
> 时间：2012-04-13T10:09:47.680
> 
> 标签：iphone, objective-c, ios5

我是这个 Objective-c 编程的新手。我的问题是我需要创建一个名为“X-FBR-App”的标头，并且该标头的内容是 JSON 字符串。JSON 字符串内容为 5 个参数。参数如下所示：

```
NSString *nid = @":";
    NSString *vocab = @":";
    NSString *inturl = @"testoverview";
    NSString *mail = @"your@fbr.dk";
    NSString *md5pw = @"password"; 
```

我使用 iOS5 和内置的 JSON 库。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:19:35.300

像这样的东西......

```
NSString *nid = @":";
    NSString *vocab = @":";
    NSString *inturl = @"testoverview";
    NSString *mail = @"your@fbr.dk";
    NSString *md5pw = @"password";

NSArray *jsonArray = [NSArray arrayWithObjects:inturl, mail, md5pw, nil]; // create your json array or dict

NSError *error; 

// serialize data
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonArray 
                                                   options:NSJSONWritingPrettyPrinted
                                                     error:&error];

if (! jsonData) {
    NSLog(@"Got an error: %@", error);
} else {
    // get json string
    NSString *jsonString = [[[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding] autorelease];

    // do a Request

    NSString *url = @"your url";
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:30.0];

    [request setValue:jsonString forHTTPHeaderField:@"Field You Want To Set"];

    [[NSURLConnection alloc] initWithRequest:request delegate:self];
} 
```

# java - 如何停止除当前线程之外的所有正在运行的线程？

> ID：10138942
> 
> 赞同：0
> 
> 时间：2012-04-13T10:10:09.520
> 
> 标签：java, multithreading

在我的项目中，我提供了一个保存多个凭据的选项。当用户登录时，他们必须选择他们的凭据。在这两者之间，如果他们想移动到另一个凭据，那么他们将不得不注销并登录到其他凭据。在这里，我没有关闭应用程序。

现在，在我的项目中，当有人单击注销按钮时，所有正在运行的线程都将停止。是否有任何快捷方法可以停止我的应用程序中所有正在运行的线程？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T10:39:45.947

将它们全部放在 ExecutorService 中，并命令它关闭池中的所有线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:37:35.030

只需在所有线程中设置一个停止条件，并在您想要停止它们时设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:16:21.097

`System.exit(n)`将停止所有正在运行的用户线程。

# javascript - SCRIPT1014：无效字符

> ID：10138943
> 
> 赞同：2
> 
> 时间：2012-04-13T10:10:15.997
> 
> 标签：javascript, json, validation, character-encoding, jsonlint

我有一些 JSON 在使用[jsonlint](http://www.jsonlint.org)测试时非常完美，但是`Invalid character`当我尝试将其解析为对象时会出错。我查看了 JSON 字符串，似乎没问题。我如何看到可能隐藏的有趣角色？

这是js小提琴链接。[http://jsfiddle.net/UexKp/](http://jsfiddle.net/UexKp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:57:52.103

这可能不是您确切遇到的问题，但我通过指定响应类型应解释为 json，而不是文本，修复了我的 ajax 调用（当然仅在 Internet Explorer 中）返回的 JSON 中的类似错误. 由于我使用的是 jQuery，因此需要将 ajax 选项中的 dataType 参数设置为“text json”，从而将响应从文本（如 IE 所见）适当地转换为 JSON。

如果这对您不起作用，您还可以尝试直接更改来自服务器的响应类型，假设您可以访问它，以便它正确报告返回的响应是 JSON，而不是文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:34:29.293

JSON 没有问题：http: [//jsfiddle.net/UexKp/2/](http://jsfiddle.net/UexKp/2/)

当可以将`{`and`}`视为块时，它们不会被视为对象文字，因此例如通过变量赋值来修复它。你也可以用`(`和包装它，`)`如小提琴 /1 所示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T10:27:27.073

您可以使用像 Fiddler ( [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/) ) 这样的调试代理，然后检查 JSON-Request 的原始数据以查看响应中是否有一些不需要的字符。

# visual-studio - 如何清除asp.net缓存（卡西尼）

> ID：10138946
> 
> 赞同：0
> 
> 时间：2012-04-13T10:10:38.660
> 
> 标签：visual-studio

我的应用程序每次在 Visual Studio 上执行 f5 时都会从缓存中加载旧的 javascript。我可以从 VS 2010 中清除这个愚蠢的缓存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:14:02.827

缓存可能是*浏览器*缓存 - 与卡西尼无关。如果您也使用 IIS，就会发生这种情况。

您需要通过在浏览器中使用来强制在浏览器中重新加载`Ctrl + F5`。

# wpf - 如何在一个文档中打印多个 WPF 页

> ID：10138948
> 
> 赞同：3
> 
> 时间：2012-04-13T10:10:47.993
> 
> 标签：wpf, vb.net, printing

我想创建一个包含多页的文档，并且每页上都描绘了一个 wpf 窗口。

我设法使用 PrintDialog 和 PrintVisual 打印了一个窗口。然而，这似乎只适用于一页？任何想法如何构建包含多页的文档并打印完整集。

我可以插入该视觉对象（在代码中引用）并将其作为页面插入文档中并在此之后打印吗？

方法真的很糟糕吗？有没有其他方法可以解决这个问题？

```
 Sub Print (Dim ele As FrameWorkElement)
            Dim margin As Double = 30
            Dim titlePadding As Double = 10

            Dim printDlg As PrintDialog = New PrintDialog()
            printDlg.PrintTicket.PageOrientation = PageOrientation.Landscape
            If (printDlg.ShowDialog() <> True) Then Return

            Dim formattedText As FormattedText = New FormattedText(Name, CultureInfo.GetCultureInfo("en-us"),
                                                            FlowDirection.LeftToRight, New Typeface("Verdana"), 25, Brushes.Black)

            formattedText.MaxTextWidth = printDlg.PrintableAreaWidth

            Dim scale As Double = Math.Min(printDlg.PrintableAreaWidth / (ele.ActualWidth + (Margin * 2)),
                                    (printDlg.PrintableAreaHeight - (formattedText.Height + titlePadding)) / (ele.ActualHeight + (Margin * 2)))

            Dim visual As DrawingVisual = New DrawingVisual()
            Using context As DrawingContext = visual.RenderOpen()

                Dim brush As VisualBrush = New VisualBrush(ele)
                context.DrawRectangle(brush, Nothing, New Rect(New Point(margin, margin + formattedText.Height + titlePadding),
                                                            New Size(ele.ActualWidth, ele.ActualHeight)))

                context.DrawText(formattedText, New Point(margin, margin))
            End Using
            visual.Transform = New ScaleTransform(scale, scale)
            printDlg.PrintVisual(visual, "")
     End Sub 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T10:21:46.273

您想创建一个`FixedDocument`具有多个`FixedPages`.

**例子：**

如何创建新文档和单页。

```
var pageSize = new Size(8.26 * 96, 11.69 * 96); // A4 page, at 96 dpi
var document = new FixedDocument();
document.DocumentPaginator.PageSize = pageSize;

// Create FixedPage
var fixedPage = new FixedPage();
fixedPage.Width = pageSize.Width;
fixedPage.Height = pageSize.Height;
// Add visual, measure/arrange page.
fixedPage.Children.Add((UIElement)visual);
fixedPage.Measure(pageSize);
fixedPage.Arrange(new Rect(new Point(), pageSize));
fixedPage.UpdateLayout();

// Add page to document
var pageContent = new PageContent();
((IAddChild)pageContent).AddChild(fixedPage);
document.Pages.Add(pageContent);

// Send to the printer.
var pd = new PrintDialog();
pd.PrintDocument(document.DocumentPaginator, "My Document"); 
```

用 C# 编写，但是您应该能够转换为 VB。

高温下，

# javascript - 我的动态内容需要下一个和上一个

> ID：10138950
> 
> 赞同：0
> 
> 时间：2012-04-13T10:11:03.797
> 
> 标签：javascript, jquery, css

我的页面中有很多链接，我需要在一行中显示所有链接，但空间不够，所以我需要下一个和上一个按钮。

```
<div style="width:400px;">
<ul id="links">
            <li><a href="#7a">1234564544</a></li>
            <li><a href="#7b">1234564544</a></li>
            <li><a href="#7c">1234564544</a></li>
            <li><a href="#8a">1234564544</a></li>
            <li><a href="#8b">1234564544</a></li>
            <li><a href="#8c">1234564544</a></li>
            <li><a href="#9a">1234564544</a></li>
            <li><a href="#9b">IX B</a></li>
            <li><a href="#9c">IX C</a></li>
            <li><a href="#10a">X A</a></li>
            <li><a href="#10b">X B</a></li>
            <li><a href="#10c">X C</a></li>
</ul></div> 
```

请帮我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:14:48.790

[jCarousel](http://sorgalla.com/jcarousel/)是一个插件，可以做你想做的事。

如果您想自己实现它，您可以使用一些 jQuery，并为和按钮调用`animate()`点击事件`<<``>>`

让你开始的东西：

[http://jsfiddle.net/j37RK/6/](http://jsfiddle.net/j37RK/6/)

这样你就可以注入你的动态内容，它应该仍然可以工作，请试一试:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:25:35.523

您可以使用此 JCarousal 来满足您的要求：- [http://www.baijs.nl/tinycarousel/](http://www.baijs.nl/tinycarousel/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:15:27.960

使用[Sweet Pages](http://demo.tutorialzine.com/2010/05/sweet-pages-jquery-pagination-solution/demo.html)，您可以做到这一点。

# android - 从 PointF 数组创建路径

> ID：10138953
> 
> 赞同：0
> 
> 时间：2012-04-13T10:11:08.163
> 
> 标签：android

我有`PointF[]`一条线的坐标。我可以用它来创建一个`Path`对象吗？我的最终目标是拥有两个这样`Path`的 . 然后`Region`使用`Path`对象创建并检查它们是否相交。

```
region1.op(region2, Op.INTERSECT); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:20:47.827

您必须步行完成：

```
PointF[] input = ...;
path = new Path();
path.moveTo(input[0].x, input[0].y);
for(int i = 1; i < input.length; i++) {
    path.lineTo(input[i].x, input[i].y);
} 
```

# serial-port - 摩托罗拉 RS507 的 RS232 接口命令信息

> ID：10138957
> 
> 赞同：0
> 
> 时间：2012-04-13T10:11:16.433
> 
> 标签：serial-port, motorola

有人知道我在哪里可以获得有关[摩托罗拉 RS507 环形扫描仪](http://www.motorola.com/Business/US-EN/Business+Product+and+Services/Mobile+Computers/Wearable+Computers/RS507_US-EN)的 RS232 接口命令的信息吗？

我设法设置了一个串行端口并使用 Putty 进行连接。打开端口时，我得到“^E”查询字符。返回时我得到“Ñþ©”。触发时我得到“ö þåö！þä”

我想在触发器上查找条形码。

干杯

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:46:12.787

找到了！它使用摩托罗拉的标准 SSI 命令

[http://www.motorola.com/web/Business/Products/Bar%20Code%20Scanning/Bar%20Code%20Scanners/Fixed%20Mount%20Scanners/MiniScan%20954/_Documents/Static%20Files/5986003a.pdf](http://www.motorola.com/web/Business/Products/Bar%20Code%20Scanning/Bar%20Code%20Scanners/Fixed%20Mount%20Scanners/MiniScan%20954/_Documents/Static%20Files/5986003a.pdf)

# jquery - Jquery 日期选择器在 Firefox 上工作，但不适用于 chrome 和 safari

> ID：10138960
> 
> 赞同：1
> 
> 时间：2012-04-13T10:11:28.803
> 
> 标签：jquery, jquery-ui, jquery-mobile, webkit, jquery-ui-datepicker

我正在我的移动网站中实现一个 jquery datepicker。它在 FF 上运行良好，而我无法在 chrome 上运行。这些是我为使日期选择器工作而包含的文件。

```
jquery.ui.datepicker.js 
jquery.ui.all.css
jquery.ui.core.css
jquery.ui.datepicker.css
jquery.ui.theme.css
jquery-ui-1.8.13.custom.min.js
jquery.mobile.min.js 
```

我错过了任何文件吗？谁能知道为什么它在 safari 和 chrome 中不起作用？它不适用于任何 webkit 浏览器。感谢期待。

问候， BG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:16:22.170

检查您是否在页面呈现后调用 datepicker。

```
$(document).ready(function(){
   $(".data").datepicker();
}); 
```

# php - 通过 facebook api 发送朋友生日提醒电子邮件的最简单且无成本的方法

> ID：10138961
> 
> 赞同：0
> 
> 时间：2012-04-13T10:11:28.947
> 
> 标签：php, javascript, facebook, facebook-graph-api

我需要制作一个应用程序，在用户朋友的生日那天向用户发送电子邮件..

我正在考虑有一个应用程序将每个注册用户的朋友生日的整个列表保存在数据库中，然后每天在服务器上运行一个 cron 作业，检查生日并向每个有 1 个或多个朋友的用户发送电子邮件那个生日活动。

..或者只有在发送电子邮件之前检索朋友生日列表的cron作业..

顺便说一句..如何为每个用户检索这个生日列表？..打开图表有什么帮助吗？

..另外，您认为有比 cronjob 更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:22:44.573

很简单，Graph API 中的 User 对象有一个`birthday`属性，你只需要确保你`friends_birthday`在 auth 过程中请求了权限。这是用户可能选择退出的扩展权限，因此您需要在 auth 之后进行一些额外的检查，以确保他们允许使用 tha 权限。

我的猜测是你需要分两步做生日的事情，1）获取朋友列表，2）迭代获取生日（你可以用 FQL 做得更好，一次选择多个朋友的生日）。

我会抽象图形 api 的东西，所以它发生在服务器上的工作人员中（看看 Beanstalkd）。您也可以使用 Beanstalkd 作为工作人员处理发送电子邮件，但使用 Cron 将它们排队。

# android - Android webview 去掉蓝色链接边框

> ID：10138968
> 
> 赞同：4
> 
> 时间：2012-04-13T10:11:53.170
> 
> 标签：android, hyperlink, webview, border

在我的应用程序中使用 webview 时，每次单击链接时，蓝色框都会突出显示文本或图像。是否有从 webview 中删除此功能的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-29T13:49:47.170

出于可访问性的原因，您不应该只是将水龙头突出显示颜色设置为透明。

对于您想要完全控制的元素：

1.) 移除 tap-highlight-color

```
.btn {
    ....

    -webkit-tap-highlight-color: transparent;
} 
```

2.) 添加一个新的*:active*状态（在这个例子中设置背景颜色

```
.btn:active {
    background-color: rgba(100, 100, 100, 1.0);
} 
```

3.）在某些元素上，例如您可能会看到蓝色或橙色边框，这只是为了焦点状态，删除边框：

```
.btn {
    ....
    -webkit-tap-highlight-color: transparent;
    outline: 0;
} 
```

4.) 添加*:focus*状态

```
.btn:focus {
    background-color: rgba(200, 200, 200, 1.0);
} 
```

5.) 对于奖励积分，添加一个*:focus:active*状态

```
.btn:focus:active {
    background-color: rgba(150, 150, 150, 1.0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T12:12:06.250

没有 50 声望发表评论。
打击是上述答案中链接的主要内容。

```
 * {
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);  
    } 
```

rgba() 就像 rgb() 一样，但它需要第四个参数来表示不透明度。

# php - POST vars 使用 codeigniter 生成一般错误

> ID：10138970
> 
> 赞同：0
> 
> 时间：2012-04-13T10:12:30.843
> 
> 标签：php, codeigniter

当我尝试使用 post 方法通过表单传递变量时，它会生成以下 codeigniter 错误“GENERAL_ERROR”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:15:34.417

这是一个非常简单的例子

控制器/test_form.php

```
<?php
class Test_form extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        if ($this->input->post())
        {
            print_r($this->input->post());
        }

        $this->load->view('test_form');
    }
} 
```

意见/test_form.php

```
<form action="test_form" method="post">
    <input type="text" name="test_field_one" />
    <button type="submit">Go!</button>
</form> 
```

也许您在代码中的某个地方有错字，尽管我在黑暗中刺伤了东西，但没有看到它。

# html - HTML 表格总是换行？

> ID：10138972
> 
> 赞同：3
> 
> 时间：2012-04-13T10:12:31.317
> 
> 标签：html, html-table, newline

如果我创建一个这样的 HTML 表：

```
text text text
    <table border='0'>
     <TR>
        Table Item
     </TR>
    </table> 
```

这总是会生成一个新行吗？）---------------->

```
text text text
 Table Item 
```

没有机会像这样生成（所以没有新行？） --------->

```
tex text text  Table Item 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T10:15:27.147

```
table{
display:inline-block
} 
```

我想可以帮助你。这也将帮助您 [采样](http://jsfiddle.net/YXQxQ/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-13T10:14:11.953

将`table`'s设置`display`为`inline-block`.

# c# - 从额外线程返回结果

> ID：10138986
> 
> 赞同：1
> 
> 时间：2012-04-13T10:13:42.580
> 
> 标签：c#, multithreading

我想在一个额外的线程中`result`执行后使（重进程的返回结果）可以访问`Heavy Process`，因为它主要是预期不希望在进程 UI 生效后，进程完成后可以玩`result`

*在一些搜索过程中，查看我的文章，我发现有**几种方法**可以实现这一点，请提供您知道或在类似情况下使用的最佳方法*

*这是我想以最佳方法处理的示例：*

```
 public ACollection DoProcess(Document docProcess) 
        {
            ACollection result = new ACollection ();

            ThreadStart threadStart = delegate
            {
                result = MyProcess(docProcess);
            };
            var threadProcess = new Thread(threadStart);
            threadProcess.Start();    

            return result ;
} 
```

其他可能的方法可能是 IAsyncResult、BackgroundWorker、使用计时器和检查状态，而不是将结果返回给处理它的方法并将其报告给 UI，以线程安全的方式直接将其发送到我们的 UI 控件...

请在类似情况下给出您自己的意见和样品，在此先感谢

**编辑 3：方法 - 基于布赖恩的回答**

```
 LenzCollection myResultCollection = new LenzCollection();       

        TaskScheduler ui = TaskScheduler.FromCurrentSynchronizationContext();

        Task.Factory.StartNew(() =>
          {
              myResultCollection = DoCollect(docProcess);
              //Task.WaitAll();

              return myResultCollection;
          }).ContinueWith((task =>
          {
              myResultCollection = task.Result;
          }), ui);

        return myResultCollection; 
```

它仍然没有等待，也不会给出想要的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:18:51.157

只需实现一个事件，在执行方法之前注册它。并让该方法在完成后引发事件。

例如：

```
public delegate void MyEventHandler(string result);
public class MyClass
{
  public event MyEventHandler MyEvent;
  private void Event(string result)
  {
    MyEventHandler handler = MyEvent;
    if(handler != null)
      handler(result);
  }

  public void DoSomethingLong()
  {
    //Do something
    Event("Finish");
  }
} 
```

现在你可以像这样运行

```
MyClass.Event += MyEventHandler(On_Event);
Thread t = new Thread(MyClass.DoSomethingLong);
t.Start();    

void On_Event(string result)
{
  //Get executed when finished;
} 
```

调用 UI 线程的示例

```
void On_Event(string result)
{
  if(this.InvokeRequired)
  {
    MyEventHandler handler = new MyEventHandler(On_Event);
    Invoke(handler, new object[] { result });
    return;
  }
  // At this point you can access your UI without having Cross-Threaded operation!
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T10:21:12.140

在桌面 (WinForms/WPF) 应用程序中，最好和最简单的方法是 BackgroundWorker。它旨在处理这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T10:20:11.400

如果您正在使用`.NET Framework 4.0 or +`，您可以从另一个线程运行该进程并在[Task.ContinueWith](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.continuewith.aspx)中进行进程，例如

```
Process pro = null; 
 Task.Factory.StartNew(() => {
   pro =new Process(..);
   pro.Start(); 
   pro.WaitForExit(); 
}).ContinueWith(..process data recieved from the pro) 
```

*编辑*

不使用`while(...)`，但使用`pro.WaitForExit()`

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T13:31:21.190

**选项1：**

使用`Task`类和`ContinueWith`方法。

```
TaskScheduler ui = TaskScheduler.FromCurrentSynchronizationContext();

Task.Factory.StartNew(() =>
  {
    var result = MyProcess(docProcess);
    return result.ToString();
  }).ContinueWith((task =>
  {
    textBox1.Text = task.Result;
  }, ui); 
```

您必须记住将正确的同步上下文传递到`ContinueWith`方法中。你可以看到我是如何使用`ui`变量做到这一点的。

**选项#2：**

使用 new`async`和`await`关键字。¹

```
private async void SomeButton_Click(object sender, EventArgs args)
{
  textBox1.Text = await Task.Run(() =>
    {
      var result = MyProcess(docProcess);
      return result.ToString();
    });
} 
```

显然，这在视觉上要容易得多，并且可以为您完成所有编组和同步上下文的工作。

* * *

¹*新关键字将在 C# 5.0 中可用，但您现在可以通过[Async CTP](http://www.microsoft.com/download/en/details.aspx?id=9983)使用它们。CTP 使用`TaskEx`而不是`Task`.*

# linux - 如何杀死一个进程并在模块中释放其资源？

> ID：10138989
> 
> 赞同：2
> 
> 时间：2012-04-13T10:13:56.820
> 
> 标签：linux, memory-leaks, module, kill-process

我运行了一个 malloc 炸弹，它不断地调用`malloc()`。然后我写了一个模块来查找并杀死炸弹，我的模块找到并杀死了它`force_sig(SIGKILL, task)`。炸弹实际上被杀死了，但是 gnome-system-monitor 显示炸弹持有的内存没有被释放:(

谁能告诉我为什么，或者如何在模块中完全杀死一个进程？

![](../Images/7a3375ac38919a493777cbf0fec1ae71.png)

在引爆记忆炸弹之前。

![](../Images/56de1814f61fb6c363e422a628a70352.png)

在我的模块杀死炸弹后（by `force_sig()`），内存利用率仍然很高，很奇怪。

# javascript - “this instanceof fNOP？this”在做什么？

> ID：10138998
> 
> 赞同：4
> 
> 时间：2012-04-13T10:14:21.720
> 
> 标签：javascript

```
if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {
        if (typeof this !== "function") {
            // closest thing possible to the ECMAScript 5 internal IsCallable function  
            throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
        }

        var aArgs = Array.prototype.slice.call(arguments, 1),
            fToBind = this,
            fNOP = function () {},
            fBound = function () {
                return fToBind.apply(this instanceof fNOP ? this : oThis || window, aArgs.concat(Array.prototype.slice.call(arguments)));
            };

        fNOP.prototype = this.prototype;
        fBound.prototype = new fNOP();

        return fBound;
    };
} 
```

[这是从绑定 MDC](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)中挑选的，我不明白在`this instanceof fNOP ? this`做什么。请问有人教我吗？我想知道为什么不`oThis || window`直接使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:18:25.150

```
return fToBind.apply(this instanceof fNOP ? this : oThis || window, aArgs.concat(Array.prototype.slice.call(arguments))); 
```

如果`this`是 的实例`fNOP`，则第一个参数将是`this`。如果不是，那么它将是`oThis`“真实的”（不是 null、不是未定义以及任何与 false 同义的东西），或者`window`of`oThis`是 false。

它是此代码的简写：

```
if(this instanceof fNOP){
    firstparameter = this;
} else {
    if(oThis){
        firstParameter = oThis;
    } else {
        firstParameter = window;
    }
} 
```

# c# - 将整数列表转换为 sql binary(8) 列表

> ID：10138999
> 
> 赞同：0
> 
> 时间：2012-04-13T10:14:22.157
> 
> 标签：c#, .net, linq, ado.net, type-conversion

我有一个简单的应用程序，它有richTextBox 和按钮。用户在richTextBox 中输入数字（整数）（每行一个数字）。

当他单击按钮时，我想生成一个 sql 查询。

基本上，如果我将整数传递给这样的查询，它就可以工作：

```
SELECT price from products where ID IN (1, 2, 3, 4) 
```

这是用户在richTextBox 中输入1、2、3、4 作为行的时候。

但我想传递 binary(8) 而不是整数。

这是我原来的代码行：

```
cmdString += " IN (" + string.Join(", ", richTextBox1.Lines) + ") "; 
```

我试图用 LINQ 来改变它，如下所示：

```
cmdString += " IN ("
+ string.Join(", ", richTextBox1.Lines.Select(c => 
    { c = "0x"+Convert.ToString(Convert.ToInt32(c), 16); 
     return c; 
    }).ToArray())
+ ") "; 
```

我想得到什么：

例如转换：

```
 1   to  0x0000000000000001
30   to  0x000000000000001E 
```

我希望你明白这一点。

**更新：**

我已经这样做了：

```
textBox1.Text = string.Join(", ", richTextBox1.Lines.Select(c =>
    {
        c = "0x" + "0000000000000000".Substring(0, (16 - Convert.ToString(Convert.ToInt32(c), 16).Length)) + Convert.ToString(Convert.ToInt32(c), 16);
        return c;
    }).ToArray()); 
```

任何想法如何删除第二次`Convert.ToString(Convert.ToInt32(c))`使用？或者也许以另一种方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:26:36.720

我将在 foreach 循环中执行此操作：

```
var query = "Select ... In( ";

foreach(var item in Lines)
{
   int a = 0;
   if (!int.TryParse(item, out a))
     throw new IllegalInputException();
   query += "0x" + Convert.ToString(a, 16).PadLeft(16, '0');
}
... 
```

或者您可以在您的 linq 查询中执行此操作，但不像 foreach 那样容易阅读：

```
cmdString += " IN (" 
+ string.Join(", ", richTextBox1.Lines.Select(c => 
    { c = "0x"+Convert.ToString(Convert.ToInt32(c), 16)
               .PadLeft(16, '0'); 
     return c; 
    }).ToArray())  

+ ") "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:25:55.033

```
var binaryStrings = richTextBox1.Lines
                    .Select(str => String.Format("'0x{0}'", 
                                   Convert.ToString(int.Parse(str), 16)));
var cmd = String.Format("SELECT price from products where ID IN ({0})", 
                                   String.Join(",", binaryStrings)); 
```

[Convert.ToString 方法（Int32，Int32）](http://msdn.microsoft.com/en-us/library/14kwkz77.aspx)