# StackOverflow 问答 10543000-10543999

# javascript - Rails 3的嵌套集/树javascript渲染器gem，可以在任何地方拖放吗？

> ID：10543008
> 
> 赞同：0
> 
> 时间：2012-05-10T22:23:54.717
> 
> 标签：javascript, ruby-on-rails, gem

在我为 github 上的 Rails 3 外包插件/gem 之前，我想检查是否有任何解决方案可以不重新发明轮子。

所以我的 gem 会为[祖先模型渲染](https://github.com/stefankroes/ancestry)[jsTree](http://www.jstree.com) HTML 和 JavaScript并处理拖放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:23:11.973

我一直在寻找这样的东西。我还没有找到任何接近优雅和简单或定制的东西。

我过去玩过 jsTree。我目前正在使用 jquery treeview，但是是的，肯定没有找到任何 javascript 拖放解决方案来处理交互式嵌套集。祝你好运！在这里发一个链接，我会在你去的时候检查一下。您可能想查看 HTML5 Canvas，我现在正在使用它来呈现一个非常粗糙的树视图。必须让拖放工作。*叹*

# tsql - T-SQL 'AND' 关键字似乎没有短路

> ID：10543010
> 
> 赞同：1
> 
> 时间：2012-05-10T22:24:08.810
> 
> 标签：tsql

下面的存储过程工作正常，除了当我在“where”子句中取消注释日期检查的第二部分时，即使传入的关键字为空或“111”，它也会在日期转换时爆炸。

我愿意接受有关如何以不同方式执行此动态 where 子句的任何建议。

我很感激任何帮助。

```
 ALTER PROCEDURE [SurveyEngine].[GetPageOf_CommentsOverviewRowModel]
        @sortColumn varchar(50),
        @isASC bit,
        @keyword varchar(50)
    AS
    BEGIN

        declare @keywordType varchar(4)
        set @keywordType = null

        if ISDATE(@keyword) = 1
            set @keywordType = 'date'
        else if ISNUMERIC(@keyword) = 1
            set @keywordType = 'int'

        select      c.CommentBatch BatchID, c.CreatedDate DateReturned, COUNT(c.CommentID) TotalComments
        from        SurveyEngine.Comment c 
        where       (@keywordType is null)
        or          (@keywordType = 'date') --and c.CreatedDate = @keyword)
        or          (@keywordType = 'int' and (CONVERT(varchar(10), c.CommentBatch) like  @keyword+'%'))

        group by    c.CommentBatch, c.CreatedDate
        order by    case when @sortColumn = 'BatchID' and @isASC = 0 then c.CommentBatch end desc,
                    case when @sortColumn = 'BatchID' and @isASC = 1 then c.CommentBatch end,
                    case when @sortColumn = 'DateReturned' and @isASC = 0 then c.CreatedDate end desc,
                    case when @sortColumn = 'DateReturned' and @isASC = 1 then c.CreatedDate end,
                    case when @sortColumn = 'TotalComments' and @isASC = 0 then COUNT(c.CommentID) end desc,
                    case when @sortColumn = 'TotalComments' and @isASC = 1 then COUNT(c.CommentID) end
    END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:13:06.423

基于这个家伙的博客：http: [//blogs.msdn.com/b/bartd/archive/2011/03/03/don-t-depend-on-expression-short-circuiting-in-t-sql-not- even-with-case.aspx](http://blogs.msdn.com/b/bartd/archive/2011/03/03/don-t-depend-on-expression-short-circuiting-in-t-sql-not-even-with-case.aspx)看起来您无法保证 where 子句中的操作顺序，即使支持短路也是如此。执行计划可以选择先评估第二条语句。

他建议改用案例结构（如前面提到的 pst ），因为它“更多”得到保证。但是我不认为我可以将您的 where 子句重写为一个案例，因为您使用了三个不同的运算符（为 null、= 和 LIKE）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T01:04:37.323

**编辑**对不起，脑云。事物需要以不同的方式初始化。

将设置更改为：

```
 declare @keywordType varchar(4)
    declare @TargetDate as DateTime = NULL

    set @keywordType = null 

    if ISDATE(@keyword) = 1
        begin
        set @keywordType = 'date'
        set @TargetDate = Cast( @keyword as DateTime )
        end
    else if ISNUMERIC(@keyword) = 1 
        set @keywordType = 'int' 
```

然后改变：

```
and c.CreatedDate = @keyword 
```

到：

```
and c.CreatedDate = Coalesce( @TargetDate, c.CreatedDate ) 
```

如果您不按日期搜索，这将导致 NOP。

# azure - Azure 缓存 - Microsoft Enterprise Library 5.0 如何在 Azure 上缓存应用程序块？

> ID：10543016
> 
> 赞同：0
> 
> 时间：2012-05-10T22:24:49.260
> 
> 标签：azure, enterprise-library, azure-sql-database, enterprise-library-5, azure-caching

[适用于 Windows Azure 的 Microsoft Enterprise Library 5.0 集成包](http://www.microsoft.com/en-us/download/details.aspx?id=28189)

据我了解，缓存将存储在数据库中，并且所有 Web 角色都共享相同的缓存，这与 Azure 的内存中分布式缓存相同。

我想知道是否有人在 Windows Azure 上成功使用了缓存应用程序块，而不是 Azure 缓存。

如果有，速度如何？任何与 Azure 缓存明显不同的地方。

感谢您的评论！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:36:04.947

不推荐使用缓存应用程序块（[请参见此处](http://msdn.microsoft.com/en-us/library/ff664753%28v=PandP.50%29.aspx)）。它被[System.RunTime.Caching](http://msdn.microsoft.com/en-us/library/dd985642)命名空间取代。但是，SQL Azure 不支持 SqlDependency，因此您也不能将缓存命名空间用于数据库驱动的缓存。

因此，您的选择归结为：通过自己从 SQL Azure 读取来实现您自己的本地缓存，使用 Windows Azure 缓存，或者只是按需从 SQL Azure 读取。

本地缓存的性能会更好，因为它是...本地的:)。后台线程（您需要编写）将以特定频率刷新您的缓存。因此访问本地缓存将以内存访问速度进行。但是......它不会在您的 Windows Azure 节点之间完美同步，因为每个节点都有自己的缓存。要解决此问题，您可以对刷新逻辑进行编码，使其在所有节点上同时完成。

从 Azure 缓存读取比访问本地缓存要慢，但所有 Windows Azure 节点都可以同时访问相同的数据。您仍然需要构建一个线程，以特定频率更新 Windows Azure 缓存；它不会自动刷新。

**警告**：请记住，如果您事先知道键/值对缓存条目的键，Azure 缓存会很好地工作。换句话说，您无法从 Azure 缓存中获取密钥列表。例如，如果您存储邮政编码/温度列表，则邮政编码将是您的密钥（这是一个已知集合）。因此，您可以为此目的使用 Azure 缓存。Azure 缓存旨在帮助存储 ASP.NET 会话状态，该状态也具有已知密钥（会话 ID）。

最后，将您的数据保存在 SQL Azure（或其他存储，如 Azure 表）中也可以很好地工作。但是，这取决于您获得多少流量以及您将从数据源读取多少次。请记住，在某些情况下，构建缓存机制是多余的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:04:31.370

我对企业库不是很熟悉。但是 Windows Azure 缓存将缓存数据存储在远程服务器的内存中。当我们请求缓存的数据时，我们会发出一个 Web 请求，服务器将从其内存中返回数据。如果缓存服务器和我们的 Windows Azure 服务器在同一个数据中心（这是推荐的做法），那么 Web 传输速度非常快。如果我们使用 SQL Azure 来存储缓存数据，数据从 SQL Azure 服务器传输到我们的 Windows Azure 服务器大约需要相同的时间。但与从缓存服务器的内存中查询数据相比，从数据库中查询数据需要更长的时间。SQL Azure 可能会做一些优化来增加数据访问，例如，将数据缓存在内存中。但在这种情况下，建议您使用 Windows Azure 缓存而不是 SQL Azure。

最好的祝福，

明旭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T14:48:40.470

缓存应用程序块不提供分布式缓存所需的功能。相反，您应该考虑使用以下技术之一：

*   Windows Azure 缓存。这使您能够在云中配置分布式缓存。有关详细信息，请参阅[Windows Azure 缓存服务](http://msdn.microsoft.com/en-us/library/windowsazure/gg278356.aspx)。
*   维护 Windows Azure 表存储中的状态和值。[Windows Azure 培训工具包](http://go.microsoft.com/fwlink/?LinkID=130354)中包含有关如何实现此功能的示例以及其他有用的资源。
*   .NET Framework 4.0 的 System.Runtime.Caching 命名空间的缓存机制。有关详细信息，请参阅[System.Runtime.Caching 命名空间](http://msdn.microsoft.com/en-us/library/system.runtime.caching%28VS.100%29.aspx)。

与 SQL Azure 兼容且缓存数据库提供程序所需的 SQL 脚本可单独下载。[要获取脚本，请从Microsoft Enterprise Library 5.0 Integration Pack for Windows Azure](http://www.microsoft.com/download/en/details.aspx?id=28189)下载 EnterpriseLibraryIntegrationPack-WindowsAzure-sqlscripts.exe 。

有关在 Windows Azure 应用程序中使用其他经典企业库块的信息，请参阅[此白皮书](http://entlib.codeplex.com/releases/view/75025#DownloadId=309238)。

# c# - C# datagridview - “列超过 MaxLength 限制”

> ID：10543026
> 
> 赞同：0
> 
> 时间：2012-05-10T22:25:35.253
> 
> 标签：c#, datagridview

我有一个主要形式的datagridview，可以将`Datetime`数据类型加载到其中。不幸的是，虽然我看到数据正确显示，但系统将其显示为错误

> 列 PlannedDate 超出 MaxLength 限制

在谷歌搜索了一下之后，我通过创建事件找到了解决方案：

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
        if (e.Control is TextBox)  // To clear the error in display of the cells
        {
            (e.Control as TextBox).MaxLength= 100;
        }
} 
```

问题是，这个事件是在表单的 UPDATE 上调用的（即当我添加另一行时）但不是在加载时，所以虽然最终一切正常，但用户在启动时会被告知列中的错误......

有趣的是，这个问题只有在我必须在 Mac 上迁移时才开始出现，并且在 VirtualBox 上使用 Windows。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-27T12:56:04.413

为什么不直接在表单的 formload 事件中设置 MaxLength？或者只是在datagridview设置中手动设置？

# sql - 为什么这个 LINQ Group 不是聚合 vb.net 中的行？

> ID：10543030
> 
> 赞同：6
> 
> 时间：2012-05-10T22:25:47.680
> 
> 标签：sql, vb.net, linq, entity-framework, linq-to-entities

我有一个有 2 部分键的表；一个 ID 列和一个版本号。我正在尝试选择“仅最新版本”的记录。

我正在尝试使用 LINQ 的表达方式，实现一个 GROUP BY，并拉出 Version 的聚合 MAX 值。 **但是没有发生聚合**。

**总结代码：**

```
From C In Credentials

Group Join ....
Group Join ....

Group C.CredentialID, NE.ClientID, C.Version By 
     NE.ClientID, C.CredentialID Into CGroup = Group
From CG In CGroup

Select New With {
    .ClientID = CG.ClientID,
    .CredentialID = CG.CredentialID,
    .MaxVersion = CGroup.Max(Function(p) p.Version)
} 
```

**实际结果：**

```
ClientID CredentialID MaxVersion
1196     1            3 
1196     1            3 
1196     1            3 
1196     2            1 
```

**期望的结果：**

```
ClientID CredentialID MaxVersion
1196     1            3 
1196     2            1 
```

**也试过了，结果一样：**

```
Group C By Key = New With 
     {Key NE.ClientID, Key C.CredentialID} Into CGroup = Group
From CG In CGroup

Select New With {
     .ClientID = Key.ClientID,
     .CredentialID = Key.CredentialID,
     .MaxVersion = CGroup.Max(Function(p) p.Version)
} 
```

我正在寻找一种解决方案，它不涉及创建具有匹配属性和自定义排序/分组函数的自定义类，并且不使用查询末尾的 lambda 表达式。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T20:23:24.743

```
From CG In CGroup 
```

此行调用 Queryable.SelectMany 并解压缩组。不要打开你的组！

删除该行并以：

```
Select New With {
     .ClientID = CGroup.Key.ClientID,
     .CredentialID = CGroup.Key.CredentialID,
     .MaxVersion = CGroup.Max(Function(p) p.Version)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:49:44.173

问题是为密钥定义的匿名类不会以您喜欢的方式评估相等性。相反，您可以使用 Tuple 作为键：

```
From C In Credentials
... 
Group C.CredentialID, NE.ClientID, C.Version By key = 
       New Tuple(Of Integer, Integer)(NE.ClientID, C.CredentialID) 
       Into CGroup = Group 
Select New With {
       .ClientID = key.Item1, 
       .CredentialID = key.Item2, 
       .MaxVersion = CGroup.Max(Function(p) p.Version)
} 
```

# ruby - Ruby 中的字符串操作

> ID：10543031
> 
> 赞同：0
> 
> 时间：2012-05-10T22:25:49.990
> 
> 标签：ruby, regex, string

给定一个数组：

```
1.9.2p290 :172 >   tags_array = %w[one two]
 => ["one", "two"] 
1.9.2p290 :173 > 
```

如何对其进行操作以返回（确切地）以下 String ？

```
[/^one/i, /^two/i] 
```

...我试试这个：

```
1.9.2p290 :173 > tags_array.collect! {|tag| "/^"+tag+"/i"}
 => ["/^one/i", "/^two/i"] 
1.9.2p290 :174 > 
```

但我真的想要`[/^one/i, /^two/i]`没有双引号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T22:31:42.440

如果您想要一个正则表达式数组，您可以在正则表达式文字中使用字符串插值：

```
%w[one two].map { |tag| /^#{tag}/i } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:30:53.963

你必须映射`Regexp::new`：

```
tag_array.collect! { |tag| Regexp.new("^#{tag}", true) }
=> [/^one/i, /^two/i] 
```

注意`true`作为第二个参数传递给`Regexp::new`: 这意味着生成的正则表达式应该不区分大小写。

# django-models - 如何在管理页面中显示模型的所有字段？

> ID：10543032
> 
> 赞同：61
> 
> 时间：2012-05-10T22:25:49.997
> 
> 标签：django-models, django-admin

[这是模型页面](https://i.imgur.com/dZTIw.png)

在这张图片中，这里只显示了标题，我使用了：

```
def __unicode__(self):
    return self.title; 
```

[这是每个单独的对象](https://i.imgur.com/Vhtzm.png)

如何显示所有这些字段？

**如何显示每个模型页面中的所有字段？**

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-09-12T20:57:19.093

如果您想在不输入所有字段名的情况下包含所有字段，您可以使用

```
list_display = BookAdmin._meta.get_all_field_names() 
```

缺点是，字段按排序顺序排列。

**编辑：**

此方法已在 Django 1.10 中弃用，请参阅[从旧 API 迁移](https://docs.djangoproject.com/en/2.0/ref/models/meta/#migrating-from-the-old-api)以供参考。以下应该适用`Django >= 1.9`于大多数情况 -

```
list_display = [field.name for field in Book._meta.get_fields()] 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-05-11T00:05:42.110

默认情况下，管理布局仅显示从对象的**unicode**函数返回的内容。要显示其他内容，您需要在`app_dir/admin.py`.

见这里：[https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)

您需要添加一个管理表单，并设置该`list_display`字段。

在您的具体示例（**admin.py**）中：

```
class BookAdmin(admin.ModelAdmin):
    list_display = ('title', 'author', 'price')
admin.site.register(Book, BookAdmin) 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2015-01-31T18:51:12.433

如果您想包含除 ManyToManyField 字段名称之外的所有字段名称，并且它们的顺序与 models.py 文件中的顺序相同，您可以使用：

```
list_display = [field.name for field in Book._meta.fields if field.name != "id"] 
```

如您所见，我还排除了 id。

如果您发现自己经常这样做，您可以创建 ModelAdmin 的子类：

```
class CustomModelAdmin(admin.ModelAdmin):

    def __init__(self, model, admin_site):
        self.list_display = [field.name for field in model._meta.fields if field.name != "id"]
        super(CustomModelAdmin, self).__init__(model, admin_site) 
```

然后从那里继承：

```
class BookAdmin(CustomModelAdmin):
    pass 
```

或者你可以将它作为一个 mixin：

```
class CustomModelAdminMixin(object):

    def __init__(self, model, admin_site):
        self.list_display = [field.name for field in model._meta.fields if field.name != "id"]
        super(CustomModelAdminMixin, self).__init__(model, admin_site)

class TradeAdmin(CustomModelAdminMixin, admin.ModelAdmin):
    pass 
```

如果你想从 admin.ModelAdmin 以外的东西继承，mixin 很有用。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-05-31T11:48:27.200

我发现[OBu](https://stackoverflow.com/users/2304092/obu)在这里的回答对我非常有用。他提到了：

> 缺点是，这些字段是按排序顺序排列的。

对他的方法稍作调整也解决了这个问题：

```
list_display  = [f.name for f in Book._meta.fields] 
```

为我工作。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-07-18T06:32:10.903

Django 1.10 打破了许多答案。对于 1.10 或更高版本，这应该是

```
list_display = [f.name for f in Book._meta.get_fields()] 
```

[文档](https://docs.djangoproject.com/en/1.10/ref/models/meta/#migrating-from-the-old-api)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-08-23T00:24:07.370

大多数这些答案的问题是，如果您的模型包含`ManyToManyField`或`ForeignKey`字段，它们将中断。

对于真正懒惰的人，你可以在你的`admin.py`：

```
from django.contrib import admin
from my_app.models import Model1, Model2, Model3

@admin.register(Model1, Model2, Model3)
class UniversalAdmin(admin.ModelAdmin):
    def get_list_display(self, request):
        return [field.name for field in self.model._meta.concrete_fields] 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-06-02T12:11:12.100

这是我的方法，适用于任何模型类：

```
MySpecialAdmin = lambda model: type('SubClass'+model.__name__, (admin.ModelAdmin,), {
    'list_display': [x.name for x in model._meta.fields],
    'list_select_related': [x.name for x in model._meta.fields if isinstance(x, (ManyToOneRel, ForeignKey, OneToOneField,))]
}) 
```

这将做两件事：

1.  将所有字段添加到模型管理员
2.  确保每个相关对象只有一个数据库调用（而不是每个实例一个）

然后注册你的模型：

```
admin.site.register(MyModel, MySpecialAdmin(MyModel)) 
```

注意：如果您使用不同的默认模型管理员，请将“admin.ModelAdmin”替换为您的管理员基类

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-10-31T06:43:18.210

显示所有字段：

```
list_display = [field.attname for field in BookModel._meta.fields] 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-09-29T17:45:32.623

在这里找到的每个解决方案都会引发这样的错误

`The value of 'list_display[n]' must not be a ManyToManyField.`

如果模型包含一个`Many to Many`字段。

对我有用的一个可能的解决方案是：

`list_display = [field.name for field in MyModel._meta.get_fields() if not x.many_to_many]`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-24T18:52:44.420

我喜欢[这个答案](https://stackoverflow.com/a/44328647/615379)，并认为我会发布完整的 admin.py 代码（在这种情况下，我希望所有用户模型字段都出现在管理员中）

```
from django.contrib import admin
from django.contrib.auth.models import User
from django.db.models import ManyToOneRel, ForeignKey, OneToOneField

MySpecialAdmin = lambda model: type('SubClass'+model.__name__, (admin.ModelAdmin,), {
    'list_display': [x.name for x in model._meta.fields],
    'list_select_related': [x.name for x in model._meta.fields if isinstance(x, (ManyToOneRel, ForeignKey, OneToOneField,))]
})

admin.site.unregister(User)
admin.site.register(User, MySpecialAdmin(User)) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-03-20T10:45:32.477

list_display = [Book._meta.get_fields() 中字段的字段名称]

这应该适用于 python 3.9

快乐编码

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-28T12:34:40.210

我正在使用 Django `3.1.4`，这是我的解决方案。

我有模特资格

模型.py

```
from django.db import models

TRUE_FALSE_CHOICES = (
    (1, 'Yes'),
    (0, 'No')
)

class Qualification(models.Model):
    qual_key = models.CharField(unique=True, max_length=20)
    qual_desc = models.CharField(max_length=255)
    is_active = models.IntegerField(choices=TRUE_FALSE_CHOICES)
    created_at = models.DateTimeField()
    created_by = models.CharField(max_length=255)
    updated_at = models.DateTimeField()
    updated_by = models.CharField(max_length=255)

    class Meta:
        managed = False
        db_table = 'qualification' 
```

管理员.py

```
from django.contrib import admin
from models import Qualification

@admin.register(Qualification)
class QualificationAdmin(admin.ModelAdmin):
    list_display = [field.name for field in Qualification._meta.fields if field.name not in ('id', 'qual_key', 'qual_desc')]
    list_display.insert(0, '__str__') 
```

在这里，我显示了 list_display 中的所有字段，不包括“id”、“qual_key”、“qual_desc”并`'__str__'`在开头插入。

当您有大量模式字段时，此答案很有帮助，尽管我建议将所有字段一一编写以获得更好的功能。

# jquery - 如何设置 jquery wysiwyg 更改事件？

> ID：10543037
> 
> 赞同：1
> 
> 时间：2012-05-10T22:26:20.080
> 
> 标签：jquery, wysiwyg, onchange

当编辑控件的内容发生变化时，有没有人成功地使用 jquery 插件 wysiwyg 版本 0.97 来调用事件处理程序？

我这样称呼所见即所得

```
$("#practice_form_text .wysiwyg").wysiwyg({
    events: {
      change: function(event) {
        return alert("changed");
      }
    }
  }); 
```

永远不会显示警报消息。任何尝试的想法将不胜感激。

谢谢，拉斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T22:59:44.073

没有在[文档](https://github.com/akzhan/jwysiwyg/blob/master/README.rst)上找到任何使用**change 事件**的方法，但这是一个有用的方法：

**HTML**

```
<textarea id="wysiwyg" rows="5" cols="103"></textarea> 
```

**查询**

```
// initialize the wysiwyg
$("#wysiwyg").wysiwyg();

// bind the event event
$('#wysiwyg').wysiwyg('document').keypress(function(e) {

    // This will cancel the keypress
    e.preventDefault();

    // alert
    alert('Keypress detected!');
}); 
```

还有一个很好的演示[小提琴在这里！](http://jsfiddle.net/zuul/TsqN3/)

# java - Java 游戏的线程实体或线程扇区哪个内存效率更高？

> ID：10543041
> 
> 赞同：0
> 
> 时间：2012-05-10T22:27:04.190
> 
> 标签：java, multithreading, memory-management

我正在开发射击游戏，我计划用实体（子弹、暴徒等）充斥屏幕。我尝试了一个全局计时器来更新屏幕上的所有内容，但是当我按照我的意愿淹没屏幕时，我的 fps 下降了一些。

所以，我认为自己有两个选择。我可以给每个单独的实体一个计时器线程，或者我可以将关卡分成块并给每个块自己的计时器。

对于第一个场景，实体有自己的计时器线程，我最终会得到数百个实体，每个实体都有自己的线程运行计时器。

在部分选项中，我将拥有地图的多个部分，并带有一个计时器一次更新多个实体，并检测实体何时从一个部分离开到另一个部分。

我不熟悉考虑内存效率的编程，那么哪种方法更适合我使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T03:17:51.937

我正在尝试类似的东西，但没有明确的答案。但也许我从 Java-Gaming.org 获得的一些反馈会有所帮助或感兴趣。

我尝试的是：每个实体都有自己的线程，并且通过非常详细的屏幕地图（基本上是屏幕的第二个版本）来处理冲突。然后，我有另一个线程来处理屏幕的显示。

一个“早期”版本，有超过 500 个动画实体，在线： [http ://hexara.com/pond.html](http://hexara.com/pond.html)

后来的版本使用了更精细的形状和边界（而不是让实体在边缘死亡和冻结）和碰撞逻辑，例如相互反弹和重力。我也在玩精灵方面的东西，比如“萤火虫”闪烁。我在网页上提到了“演员”，但严格来说，代码并非如此。

java-gaming.org 上的一些人强烈认为拥有这么多线程效率不高。他们有很多有趣的反馈，您可能有兴趣探索。我还没有时间。 [http://www.java-gaming.org/topics/multi-threading-and-collision-detection/25967/view.html](http://www.java-gaming.org/topics/multi-threading-and-collision-detection/25967/view.html)

他们正在讨论诸如超线程和 Actor 的 acca 框架之类的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:14:46.443

您可以尝试[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)。

它是[Java 高级并发 API](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)的一部分。您可以决定应该存在多少线程（它为不同的任务重复使用线程以避免每次创建新线程的开销，因此预计比一直创建新线程更有效）或使用缓存线程池（这将创建尽可能多的线程，但一旦线程死亡，它将重新使用它来运行新任务）。

这个 API 的另一个好处是，你不仅可以运行 Runnables，还可以使用 Callables，它可能会返回一个值，供你以后使用（这样你就可以在不同的 Thread 中进行计算，然后将每个 Thread 的结果用于最终结果）。

# c# - lpr 命令在 Win 7 中的 C# 程序中不起作用

> ID：10543052
> 
> 赞同：5
> 
> 时间：2012-05-10T22:27:57.607
> 
> 标签：c#, winapi, lpr

我有使用“lpr”命令将文件发送到打印机的程序。我已经安装了 Windows SDK 7.1。它在 32 位 Windows 7 系统中运行良好，但在 64 位 Windows 7 系统中无法运行。

```
 Process proc = new Process();
            proc.StartInfo.FileName = "lpr";
            proc.StartInfo.WorkingDirectory = GlobalConstants.outBaseDir;
            proc.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            proc.StartInfo.Arguments = " -S " + GlobalConstants.printerIP + " -P RAW " + filePath;
            proc.Start(); 
```

它抛出一个异常。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T15:24:37.823

我终于得到了我的问题的答案。

第 1 步：我必须启用“LPR 端口监视器”。这可以通过“控制面板/程序和功能/打开或关闭 Windows 功能”来完成。在对话框中展开“打印和文档服务”。检查“LPR 端口监视器”。

步骤 2：安装 Windows SDK 7.1 时。它将 lpr.exe 和相关文件复制到“C:\Windows\winsxs\amd64_microsoft-windows-p..ting-lprportmonitor_xxxx...”。将文件 lpr.exe、lprhelp.dll 和 lprmonui.dll 复制到 C:\Windows\sysWOW64 文件夹中。

就是这样！！！

参考：[http ://www.tomshardware.com/forum/240019-44-error-windows](http://www.tomshardware.com/forum/240019-44-error-windows)

# java - Java读取单个文件并写出多个文件

> ID：10543053
> 
> 赞同：1
> 
> 时间：2012-05-10T22:28:02.333
> 
> 标签：java, fileinputstream, fileoutputstream

我想编写一个简单的 java 程序来读取文本文件，然后在检测到空行时写出一个新文件。我已经看到了读取文件的示例，但我不知道如何检测空行并输出多个文本文件。

**文件输入.txt：**

```
line1
line2

line3 
```

**文件输出1.txt：**

```
line1
line2 
```

**文件输出2.txt：**

```
line3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:33:21.280

您可以检测一个空字符串来确定一行是否为空。例如：

```
if(str!=null && str.trim().length()==0) 
```

或者您可以这样做（如果使用 JDK 1.6 或更高版本）

```
if(str!=null && str.isEmpty()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:34:54.077

> 我不知道如何检测空行..

```
if (line.trim().length==0) { // perform 'new File' behavior 
```

> ..并输出多个文本文件。

循环执行对单个文件所做的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T23:15:21.390

万一你的文件有**特殊字符**，也许你应该指定**编码**。

```
FileInputStream inputStream = new FileInputStream(new File("fileIn.txt"));
InputStreamReader streamReader = new InputStreamReader(inputStream, "UTF-8");
BufferedReader reader = new BufferedReader(streamReader);
int n = 0;
PrintWriter out = new PrintWriter("fileOut" + ++n + ".txt", "UTF-8");
for (String line;(line = reader.readLine()) != null;) {
    if (line.trim().isEmpty()) {
        out.flush();
        out.close();
        out = new PrintWriter("file" + ++n + ".txt", "UTF-8");
    } else {
        out.println(line);
    }
}
out.flush();
out.close();
reader.close();
streamReader.close();
inputStream.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T22:37:36.990

```
BufferedReader br = new BufferedReader(new FileReader("test.txt"));
String line;
int empty = 0;
while ((line = br.readLine()) != null) {
if (line.trim().isEmpty()) {
 // Line is empty
 }
} 
```

上面的代码片段可用于检测该行是否为空，此时您可以创建[FileWriter](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)以写入新文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T22:52:35.263

这样的事情应该做：

```
public static void main(String[] args) throws Exception {
        writeToMultipleFiles("src/main/resources/fileIn.txt", "src/main/resources/fileOut.txt");
    }

    private static void writeToMultipleFiles(String fileIn, String fileOut) throws Exception {      

        BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(new File(fileIn))));
        String line;
        int counter = 0;
        BufferedWriter wr = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(new File(fileOut))));

        while((line=br.readLine())!=null){

            if(line.trim().length()!=0){
                wr.write(line);
                wr.write("\n");
            }else{
                wr.close();
                wr = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(fileOut + counter)));
                wr.write(line);
                wr.write("\n");
            }
            counter++;
        }

        wr.close();
    } 
```

# oracle - 记录处理 如果记录存在 PLSQL 中的 UPDATE、INSERT

> ID：10543055
> 
> 赞同：0
> 
> 时间：2012-05-10T22:28:19.877
> 
> 标签：oracle, stored-procedures, plsql, insert

```
I have three tables:

CUSTOMER                   Columns (Tracking)                            
Reference              Columns (Ref_Tracking, Project)
PROJECT                     Columns(Project) 
```

我需要检查 Reference 以查看来自 CUSTOMER 的列 (Tracking) 中的记录是否存在于 Reference (Ref_Tracking) 中。然后检查参考（项目）中的关联记录是否存在于项目（项目）中。

```
If they exist UPDATE PROJECT 
SET PROJECT.NAME = CURSOR VARIABLES 
        ETC
        ETC

If they do not exist
INSERT INTO REFERENCE
VALUES (CURSOR VALUES) 
```

我有一个游标循环遍历客户表的所有变量。

我在下面尝试过，但没有填充数据我不确定我做错了什么，或者是否有更好的方法来做到这一点。我正在学习 pl/sql，所以不确定我是否走在正确的轨道上。

```
 CREATE OR REPLACE PROCEDURE P1
    AS
      V_NAME            CUSTOMER.NAME%TYPE;
      V_TRACKING        CUSTOMER.TRACKING%TYPE;
      V_ADDRESS         CUSTOMER.ADDRESS%TYPE;
      V_CITY            CUSTOMER.CITY%TYPE;
      V_STATE           CUSTOMER.STATE%TYPE;
      V_NUMBER          CUSTOMER.NUMBER%TYPE;
      V_ Ref            Reference.REF_TRACKING%TYPE := NULL;
      V_Project         REFERENCE.PROJECT%TYPE := NULL;
      V_Project_2       PROJECT.PROJECT%TYPE := NULL;

      CURSOR C01
         IS
            SELECT  C.Name,
                    C.Tracking,
                    C.Address,
                    C.City,
                    C.State,
                    C.Number
              FROM  Customer
             WHERE  C.Number = Another_Table;
    BEGIN
      FOR fetchc01 IN C01 
      LOOP
        BEGIN
          Select Ref_Tracking, R.Project, P.Project
            Into V_ Ref, V_Project, V_Project_2
            From Customer C, Reference R, Project P
           Where R.Project = P.Project
             AND Tracking = Ref_Tracking;
        EXCEPTION
           WHEN TOO_MANY_ROWS
           THEN
              NULL;
           WHEN NO_DATA_FOUND
           THEN
              NULL;
        END;

        BEGIN
          IF V_Ref = fetch01.Tracking
          Then 
            Insert Into Sample_Project
              VALUES (V_Name, V_Tracking, V_Location)
        END
     END LOOP;
   END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:04:02.897

这个查询

```
Select Ref_Tracking, R.Project, P.Project
  Into V_ Ref, V_Project, V_Project_2
  From Customer C, Reference R, Project P
 Where R.Project = P.Project
   AND Tracking = Ref_Tracking; 
```

位于循环内，但它不依赖于从循环的一次迭代到另一次迭代的任何变化。这对我来说似乎不太可能。查询应该移到循环之外，或者更可能的是，您缺少一些谓词。也许你想要类似的东西

```
Select Ref_Tracking, R.Project, P.Project
  Into V_ Ref, V_Project, V_Project_2
  From Customer C, Reference R, Project P
 Where R.Project = P.Project
   AND Tracking = Ref_Tracking
   AND tracking = fetchc01.tracking; 
```

此外，您的异常处理程序

```
 EXCEPTION
       WHEN TOO_MANY_ROWS
       THEN
          NULL;
       WHEN NO_DATA_FOUND
       THEN
          NULL; 
```

是说如果您的查询返回 0 或多于 1 个结果以获得局部变量的值，您将`V_Ref`非常`V_Project`高兴`V_Project_2`未定义或为 NULL。这似乎也不太可能。我敢打赌，所写的查询总是返回多行，这实际上是您所期望的，因此您的异常处理程序正在吞噬您的异常。反过来，这意味着您的代码可以运行，不会按照您的预期运行，并且不会引发任何错误。在这种情况下，您可能会更好地完全删除异常处理程序并让您的代码在遇到错误时抛出异常。至少这样，您就有一些信息可用于调试问题。只有当你可以对它们做一些有用的事情或者你真的很高兴忽略错误时，才应该捕获异常。

# java - 安全模式下的 MongoDB 性能

> ID：10543061
> 
> 赞同：2
> 
> 时间：2012-05-10T22:29:15.833
> 
> 标签：java, performance, mongodb

在 java 驱动程序中将 WriteConcern 标志设置为 SAFE 如何影响 MongoDB 性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T00:20:59.700

显着减慢速度（如您所料）。

如果没有“SAFE”标志，MongoDB 驱动程序将在“Fire & Forget”模式下运行。所以`update`命令被发送到服务器，然后驱动程序继续。如果写入发生错误或服务器在更改发生之前死机，则客户端对此一无所知。

使用“SAFE”标志，驱动程序同时执行`update`命令和`getLastError()`命令。在数据库上实际发生更新之前，第二个命令不会完成。至少，您发送的是两个命令而不是一个（*所以它慢了 50%*）。

根据我的经验，它实际上慢了 5 到 20 倍。当然，这是有道理的，因为实际写入数据是整个部分的缓慢部分。

请注意，如果没有 SAFE 标志，某些异常将永远不会发生。例如，您永远不会遇到重复键异常。

如果您打算使用 MongoDB 作为典型的数据库（类似于 MySQL），您 *至少*需要使用“SAFE”模式和副本集。否则，您需要带有单个框的“JOURNAL”模式。如果您使用 JOURNAL 模式，您会注意到性能开始看起来很像常规 SQL。

# ruby-on-rails - Rails 应用程序中的时间字段全部填充为 2000 年 1 月 1 日凌晨 12:00

> ID：10543064
> 
> 赞同：0
> 
> 时间：2012-05-10T22:30:33.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-1.8.7

我正在使用 Time 在我正在处理的事件控制器中保存开始和结束日期。但是，我的应用程序忽略了在浏览器和我的 Rspec 测试中的测试和开发环境中提交时间信息。似乎正在创造一个时间，但在我所有的测试中，围绕这个时间的结果始终是 2000 年 1 月 1 日凌晨 12:00。

任何人都可以帮助确定问题吗？

以下测试由于不同的原因而失败（请不要担心这一点），但它显示了问题的严重程度。测试中提交的 end_time 不是 2000 年 1 月 1 日凌晨 12:00。

> 失败：
> 
> 1) 如果提供了结束日期/时间（可选字段），EventsController GET 在登录时显示 多日事件的显示显示结束日期
> 
> 失败/错误：response.should have_selector("span", :class => "end_time_date"，预期以下输出包含 2000 年 1 月 1 日星期六标签：
> 
> ```
> ...
> [div class="start"] 
>     Starts:
>     Saturday, 01 January 2000 at 12:00 AM
> [/div]
> [div class="end"]
>     Ends
>     [span class="end_time_time"]
>         12:00 AM
>     [/span]
> [/div] 
> ```

上面失败的测试：

> ```
>  describe "display for a multi-day event" do
> 
>       before(:each) do
>         # Turn example event into one that spans multiple days.
>         @event.end_time.advance(:days => 2)
>       end  
> 
>       it "shows an end date" do
>          get :show, :id => @event
>          @human_friendly_end_date = @event.end_time.strftime("%A, %d %B %Y")            
>          response.should have_selector("span", :class => "end_time_date", 
>                         :content => @human_friendly_end_date)
>       end
> 
>       it "shows an end time" do
>          get :show, :id => @event
>          @human_friendly_end_time = @event.end_time.strftime("%I:%M %p")
>          response.should have_selector("span", :class => "end_time_time", 
>                      :content => @human_friendly_end_time)
>       end
>   end 
> ```

您可以在其中看到 start_time 和 end_time 属性的模型非常易于访问，并且（在此时为 start_date 的情况下）需要：

```
class Event < ActiveRecord::Base

  belongs_to :user

    attr_accessible :name, :description, :start_time, :end_time, 
                        :max_attendees, :min_attendees, :event_type_id  

  validates :name, :presence => true, :length => { :minimum => 4, :maximum => 140 }

  validates :description, :length => { :minimum => 4, :maximum => 1000 }

  validates :start_time, :presence => true

  #validates :end_time, :presence => true

    validates :user_id, :presence => true

end 
```

FactoryGirl 事件的生成似乎无关紧要，因为浏览器中也发生了同样的问题，但我也会将其包括在此处以防万一。你可以看到（从这里注释掉的位）我已经尝试硬编码数字来创建日期/时间；这并没有解决任何问题。

```
Factory.define :event do |event|
  event.name                    "Foo bar"
    event.description             "Yada yada"
    event.association             :user
  week_num = (rand(10) +1)
  day_num = (1+rand(30))
  hour_num = (1+rand(12))
  hours_duration_num = (1+rand(4))
  future_date = week_num.weeks.from_now
  #event.start_time             "2012,8,5,6"
  #event.end_time               "2012,8,5,7"
  event.start_time              "#{future_date.year},#{future_date.month},#{day_num},#{hour_num}"
  event.end_time                "#{future_date.year},#{future_date.month},#{day_num},#{hour_num+hours_duration_num}"
end 
```

我的迁移：

> 类 CreateEvents < ActiveRecord::Migration
> 
> def self.up
> 
> ```
> create_table :events do |t|
> 
>   #foreign key first  
> 
>   t.references :event_type
> 
>   t.integer :user_id
>   t.string :name, :null => false
>   t.text :description, :null => false
>   t.time :start_time, :null => false
>   t.time "end_time"
>   t.timestamps
> end 
> ```

呐呐！发生了什么事？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:59:53.217

可能是由于时间字段而不是日期字段。

我会尝试改变：

```
t.time :start_time, :null => false
t.time "end_time" 
```

至

```
t.datetime :start_time, :null => false
t.datetime :end_time 
```

# objective-c - （目标）C并排翻译/与另一种语言比较

> ID：10543066
> 
> 赞同：0
> 
> 时间：2012-05-10T22:30:45.100
> 
> 标签：objective-c, c, language-comparisons

Dart 语言网站上的语言比较/翻译极大地帮助了我学习 javascript，即使我对 Dart 或 Javascript 都不太了解！链接，[http://synonym.dartlang.org/](http://synonym.dartlang.org/)

目标 C 甚至 C 是否有类似的东西？

# scala - 播放 Websocket 示例 - 只有一个 Akka 演员？

> ID：10543068
> 
> 赞同：6
> 
> 时间：2012-05-10T22:30:58.347
> 
> 标签：scala, playframework, playframework-2.0, akka, actor

在播放框架提供的 Websocket 聊天示例中，在我看来，只有一个演员被创建/使用过；它还使用“接收”，如果我理解得很好，它会强制执行角色和线程之间的 1:1 映射，从而有效地使该聊天服务器成为单线程？

在此处检查代码：[https ://github.com/playframework/Play20/blob/master/samples/scala/websocket-chat/app/models/ChatRoom.scala](https://github.com/playframework/Play20/blob/master/samples/scala/websocket-chat/app/models/ChatRoom.scala)

如果这个分析正确？如果是，您是否有关于如何使该服务器具有高度可扩展性的指示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T05:26:59.877

[在http://www.playframework.org/documentation/2.0.1/AkkaCore](http://www.playframework.org/documentation/2.0.1/AkkaCore)有一些关于该示例中使用的 websocket 的默认调度程序配置的详细信息。

> 每个 WebSocket 连接状态都由一个 Agent Actor 管理。为每个 WebSocket 创建一个新的 actor，并在 socket 关闭时被杀死。

该网页还显示了默认配置：

```
websockets-dispatcher = {
  fork-join-executor {
    parallelism-factor = 1.0
    parallelism-max = 24
  }
} 
```

默认情况下，所有调度程序都将在线程池上运行他们的一组actor。因此，对于每个创建 websocket 的客户端，都会创建一个 actor。分配多少线程取决于使用哪个执行器服务。似乎`fork-join-executor`将按需创建线程高达`parallelism-max`.

除此之外，还有参与者来处理行动和承诺。

在 akka 中似乎有很多旋钮可以微调性能。请参阅[http://doc.akka.io/docs/akka/2.0.1/general/configuration.html](http://doc.akka.io/docs/akka/2.0.1/general/configuration.html)。使服务器“高度可扩展”可能涉及大量基准测试和一些硬件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T08:45:39.623

尽管 websocket 连接将有一个参与者池，但 ChatRoom 参与者仍然是唯一一个（单个参与者实例）对消息进行实际处理、管理连接/断开连接并充当套接字的路由器，这可能是此设计的瓶颈消息总是为演员按顺序处理的。我怀疑该示例是否旨在用于可扩展性，而是用于 websockets 的简单演示。

# c# - 最短路径的 C# 图形算法

> ID：10543070
> 
> 赞同：0
> 
> 时间：2012-05-10T22:31:05.000
> 
> 标签：c#, asp.net, shortest-path

这是我的问题。我有一系列建筑物不同部分的照片，我需要将它们链接在一起。之后，我需要按顺序显示每张照片，以显示从 A 点到 B 点的路径……即，从教室到防火梯。

我做了一些研究，我相信无向无权图应该可以解决问题。

因为我在这方面没有太多经验。我想知道如何将照片存储在数据结构中，是否有任何库可以完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:47:24.703

是的，您需要应用一些可以为您解决问题的算法。

你可以使用这个很棒的库：

*   [快速图](http://quickgraph.codeplex.com/)

解决这部分问题。

至于存储数据的方式，您需要定义顶点（照片）和顶点之间的边，例如（照片 A-照片 B）、（照片 A-照片 C）等。

您必须从数据库中恢复该信息并在 quickgraph 中加载相应的结构并让它为您找到路径。

这里有大量的文档和示例：

*   [快速图表文档](http://quickgraph.codeplex.com/documentation)

对于与此类似的东西，我使用了：

*   MyEdges 类，它实现`IEdge<T>`（T 应该是您的照片 ID 类型、int 或其他类型） - 表示照片（地点）之间的边缘
*   Graph 类，它继承`AdjacencyGraph<T,MyRelation>`. 您使用可用的 MyEdges 加载它（这是有向图）
*   PathFinder 算法类：我继承自`FloydWarshallAllShortestPathAlgorithm<T, MyRelation>`

然后你必须：

*   创建边缘（即从数据库中读取它们）
*   实例化一个 Graph 类，并将所有边添加到它
*   使用 PathFinder 构造函数，使用图形作为参数。这会找到路径。

该算法允许您指定可以从给定照片（边缘）到哪些照片，假设它们之间的距离相似，但您必须定义所有路线（从 A 到 B，从 B 到 A 等等） . 那是 OP 的“未加权”部分。如果您的情况不同，则必须阅读文档。

`UnDirected`如果您希望将 A 添加到 B 也将 B 添加到 A，您可以实现一个图形。它可以节省一些代码行，但我通常更喜欢自己添加所有可能性。更容易想到“从图书馆我可以去 A 通道和 B 通道。从 B 通道到图书馆和实验室”等等，试图想到所有的边缘。

您可以在数据库中创建两个表：

*   照片（带身份证）
*   路径（IdFrom 和 IdTo）

这很容易维护和实施。

# soapui - 如何在 SOAPUI 中记录当前线程数？

> ID：10543071
> 
> 赞同：0
> 
> 时间：2012-05-10T22:31:20.677
> 
> 标签：soapui

我需要从 SOAPUI 负载测试中创建一个日志文件，以 1 秒的间隔显示线程数。该文件只需要一个时间戳和线程数，并且可以是 CSV 或任何其他格式。我看不到从预定义的日志文件中获取此信息的方法。

Groovy 脚本步骤是执行此操作的正确方法吗？我该怎么写？我可以有一个测试用例，它只在“真实”用例同时运行时每秒写入日志消息，但我不知道如何编写那个简单的脚本。我发现文档几乎难以理解。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:14:32.590

这运行速度超过每秒一次。如果它对你有用，我可以解释如何缩短时间：

```
if (context.LoadTestContext != null)
{
    log.info("threads = " + testRunner.getRunContext().LoadTestRunner.getRunningThreadCount() )
} 
```

（这是一个 Groovy 脚本）

顺便说一下，SoapUI 中默认情况下负载测试脚本日志记录是关闭的。您需要转到首选项、UI 设置并选中“运行负载测试时不要禁用 groovy 日志”复选框。

# java - 也适用于 Spotify 的跨平台 Java 应用程序

> ID：10543077
> 
> 赞同：0
> 
> 时间：2012-05-10T22:31:50.310
> 
> 标签：java, spotify

我正在编写一个 Java 应用程序，它允许在 Spotify 以及大部分 Web 浏览器和移动操作系统中使用。我对 Spotify API 很陌生。

我正在寻找构建这个的资源和参考。我需要能够检查哪个应用程序正在运行该应用程序，并根据应用程序类型返回适当的函数。

此外，我正在将来自 Web 服务器的外部 JSON 提要加载到应用程序中，并且需要创建一个数组，该数组允许将提要数据缓存到一个对象中，通过该对象可以从中提取数据段并将其传播到 div 中。

我已经开始格式化将执行这些功能的 java。但是，因为我之前没有创建过这样的脚本，所以我应该在多个平台上稳健地运行，所以我有点在黑暗中编码。

有没有人写过类似的 Java 应用程序并可以提供一些反馈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:26:17.860

Spotify Apps API 不支持在 Spotify 应用程序内运行 Java（假设您指的是 Java 而不是 JavaScript）。

如果您正在运行一个独立的 Java 应用程序，您可以开发一个 JNI 包装器来与 libSpotify 对话，从而以这种方式与 Spotify 集成。

# javascript - 如何在 javascript 中运行 javascript

> ID：10543081
> 
> 赞同：-3
> 
> 时间：2012-05-10T22:32:17.253
> 
> 标签：javascript, html

如何运行这个javascript：

```
<script type='text/javascript'>
//<![CDATA[FANS='****'//]]>
</script>
<style>#fblikepop{background-color:#fff;display:none.....</style>
<script src='/facebookpop/jquery.js' type='text/javascript'></script>
<script src='http://connect.facebook.net/en_US/all.js#xfbml=1' type='text/javascript'></script>
<script src='/facebookpop/mbtlikebox2.js' type='text/javascript'></script>
<script language='javascript'>
//<![CDATA[
    $(document).ready(function(){                       
        $().FANS({
            timeout: 30,
            wait: 0,
            url: 'http://www.facebook.com/****',
            closeable: true     });
    });
//]]></script><div id='fbtpdiv'></div> 
```

在这个 JavaScript 的“++++2nd JAVASCRIPT++++”位置？

```
<script type="text/javascript">
if(document.cookie.search(/(^|;)facebookpopc=/) > -1) {
    return false;
} else {

    ++++2nd JAVASCRIPT++++

}
</script> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:34:33.803

```
<script type="text/javascript">
if(document.cookie.search(/(^|;)facebookpopc=/) > -1) {
    return false;
} else {
    $(document).ready(function(){                       
        $().FANS({
            timeout: 30,
            wait: 0,
            url: 'http://www.facebook.com/****',
            closeable: true     });
    });
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:35:31.860

```
<script type="text/javascript">
 $(document).ready(function(){
     if(document.cookie.search(/(^|;)facebookpopc=/) > -1) {
         return false;
      } else {                
        $().FANS({
            timeout: 30,
            wait: 0,
            url: 'http://www.facebook.com/****',
            closeable: true     });
         });
     }
});
</script> 
```

# javascript - 可以使用一些帮助解码此代码

> ID：10543082
> 
> 赞同：3
> 
> 时间：2012-05-10T22:32:35.490
> 
> 标签：javascript, decode

我正在尝试解码我​​在 Raphael.js 的源代码中找到的这段代码（它从 HSL 颜色转换为 RGB 颜色，这只是函数的一部分）：

```
var R, G, B, X, C;
h = (h % 360) / 60;
C = 2 * s * (l < .5 ? l : 1 - l);
X = C * (1 - abs(h % 2 - 1));
R = G = B = l - C / 2;

h = ~~h;
R += [C, X, 0, 0, X, C][h];
G += [X, C, C, X, 0, 0][h];
B += [0, 0, X, C, C, X][h]; 
```

现在，我知道是什么`h = ~~h`（基本上是一个有一些关键差异的数字），但我无法弄清楚这意味着什么：

```
R += [C, X, 0, 0, X, C][h]; 
```

为什么他要创建一个数组然后引用`[h]`它？他是否从一组值中找到变量`h`等于的值？（但如果他已经知道 ' 的价值，他为什么要这样做`h`？）我实际上从未见过这样的事情，如果是这样的话，我认为它非常聪明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:35:14.210

`h`将是数组中的索引。这确实是一个有点复杂的代码，在这种情况下使用 switch 语句或类似的东西可能会更清楚。`h`是一个介于 0 和 5 之间的数字（模 360，除以 60）。

# bash - Bash：在 if 语句中声明值

> ID：10543085
> 
> 赞同：2
> 
> 时间：2012-05-10T22:32:51.573
> 
> 标签：bash, shell

这要么很简单，要么无法完成，但经过几个小时的观察，我被难住了。刚开始将 bash 用于 Apple 脚本。

```
show_name=${BASH_REMATCH[1]} #show_name is declared

test "$show_name" == "Smash" && {show_name="Smash (2012)"} #redeclare the value from 'Smash' to 'Smash (2012) 
```

还尝试了一些变化，例如

```
test "$show_name_temp" == "Smash" && (show_name="Smash (2012)"; exit 1) 
```

但是值 show_name 永远不会被重新声明。if 语句肯定有效，因为如果我输入 echo "hello, world" ，它就会打印出来。

不过我来自 PHP，所以缺少桌面语法。

多谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T22:38:19.937

AFAIK，第一个是语法错误。

第二，圆括号将引入另一个上下文，因此在那里定义的任何变量都不会在它之外可见。在parens中发生的事情留在parens中。

我相信你想要这个：

```
test "$show_name" == "Smash" && show_name="Smash (2012)" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T22:39:01.040

也许括号妨碍了：

```
$ show_name="Smash"
$ test $show_name == "Smash" && show_name="Smash (2012)"
$ echo $show_name
Smash (2012)
$ 
```

请注意，括号开始一个*子shell——*在括号内进行的变量分配不会传播到父shell：

```
$ show_name="Smash"
$ test $show_name == "Smash" && (show_name="Smash (2012)")
$ echo $show_name
Smash
$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T22:45:08.870

大括号不会将字符串分解为单词，因此需要用空格将它们与其内容分开。此外，{} 内的命令必须以分号 (;) 结束。

```
test "$show_name" == "Smash" && { show_name="Smash (2012)"; } 
```

也就是说，大括号是可选的，因为 && 运算符后面只有一个命令，因此首选 Amadan 的答案，sarnold 的答案解释了使用括号的问题。我只是展示了如何使带有大括号的版本起作用。

# facebook - 让 Facebook 喜欢在 https:// 和 http:// 上累积

> ID：10543089
> 
> 赞同：6
> 
> 时间：2012-05-10T22:33:58.580
> 
> 标签：facebook, http, https, facebook-like

我们遇到了一个问题，Facebook 喜欢分别计算为[http://urlhere.com](http://urlhere.com)和[https://urlhere.com](https://urlhere.com)。

有没有办法让这些计数结合起来，只需注册网址 urlhere.com，而不管前缀如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T22:37:41.870

将两个 URL 上的 og:url 元标记指向其中一个（即在 HTTP 和 HTTPS 上，将 og:url 标记指向 HTTP 版本）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T01:22:24.123

Facebook for God 知道是什么原因将这些 URL 视为不同的 URL。如果您将整个站点切换到 https://，由于 Google 最近的公告，人们现在正在这样做，您将失去对 http:// URL 的所有喜欢。Facebook 不会遵循 301 重定向并保留来自 http:// URL 的点赞。

# jquery - on() 事件可以在另一个表中的表中使用吗？

> ID：10543091
> 
> 赞同：0
> 
> 时间：2012-05-10T22:34:31.573
> 
> 标签：jquery, dom, click

好吧，这是代码

```
var $p = $("#tabla_inscripcion");
$p.load("Cursos_Existentes.php"); 
```

据说在一个名称和另一个按钮中收取 2 列的表。后：

```
$p.on('click','#tabla_cursos button.curso_ex',function(){
var curso = $(this).attr("id");
curso = curso.replace('_ver','');
if($(this).val() == 'no'){
$(this).val("si");
$("#"+curso).after('<tr class="cursos_'+curso+'"></tr>');
$('.cursos_'+curso).load("Horarios_Cursos.php?curso="+curso);
}
else{
$(this).val("no");
$(".cursos_"+curso).remove();
}
}); 
```

该按钮将在您单击的行下方添加一行，该行将加载一个包含 3 列的表格，其中一个将有一个按钮。如果你再次点击我被淘汰的那一行。

问题如下：

```
$p.on('click','#tabla_cursos #hor_cur tr td button.inscribir',function(){
$.ajax({
type: post,
url: "inscribir_curso.php",
data: "id_curso="+id, 
success: function(){
$("#tabla_inscripcion").load("Cursos_Existentes.php");
}
}); 
```

应该是点击按钮使用的是ajax做的发送一个变量post，没有错误会再次收费，只是没有按钮所在的表格行，但是按钮什么都不做，这是什么问题？

我正在使用翻译器，如果不理解，请见谅。

更新 2012/05/11

嗯，几乎所有的事情都在这里用 html 完成

```
<div class="tabla_inscripcion" id="tabla_inscripcion" align="center">
</div>

<?php
header("Content-Type: text/html;charset=utf-8");
include 'Conexion.php';

session_start();
$id_alumno = $_SESSION['id_login'];

$sql = "SELECT DISTINCT curso FROM cursos WHERE id_curso NOT IN (SELECT id_curso FROM inscripsion WHERE id_alumno=$id_alumno)";

$result = mysql_query($sql, $conexion);

echo '<table id="tabla_cursos">';
echo '<tr class="encabezado"><td>CURSOS</td></tr>';

if(mysql_num_rows($result) != 0){
    while($count = mysql_fetch_array($result)){
        echo '<tr id="'.str_replace(' ', '_', $count["curso"]).'">';
        echo '<td>'.$count["curso"].'</td>';
        echo '<td><button value="no" class="curso_ex" id="'.str_replace(' ', '_', $count["curso"]).'_ver">ver</button></td>';
        echo '</tr>';
    }
}
else{
    echo '<tr><td>no hay cursos disponibles</td></tr>';
}
echo '</table>';
?> 
```

这是创建三列表的代码

```
<?php
header("Content-Type: text/html;charset=utf-8");
include 'Conexion.php';

$curso = str_replace('_', ' ', $_GET["curso"]);
$i=0;

$sql = "SELECT cursos.id_curso, curso, dias, horario, nombre 
    FROM cursos INNER JOIN instructor 
    ON cursos.id_instructor = instructor.id_instructor 
    AND curso='$curso'";

$result = mysql_query($sql, $conexion);

echo '<td>';
echo '<table id="horarios_cur">';
echo '<tr>
    <td id="dia_cur">Días</td>
    <td id="hor_cur">Horario</td>
    <td id="nom_prof">Profesor</td>
    <td id="but_insc"></td>
  </tr>';
if(mysql_num_rows($result) != 0){
   while ($count = mysql_fetch_array($result)){
  echo '<tr id="'.$curso.'_'.$i.'">';
  echo '<td id="hor_cur">'.$count["dias"].'</td>';
  echo '<td id="hor_cur">'.$count["horario"].'</td>';
  echo '<td id="nom_prof">'.$count["nombre"].'</td>';
  echo '<td id="but_insc"><button class="inscribir" id="'.$count['id_curso'].'">inscribir</button></td>';
  echo '</tr>';
  $i++;
}
}
else{
  echo '<tr><td id="hor_cur">'.$curso.'</td></tr>';
}
echo '</table>';
echo '</td>';
?> 
```

而且我可能不解释，问题不在于代码失败，而是按钮没有反应，因为代码没有找到它

我认为它很长，但我会感谢回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:43:57.703

```
$p.on('click','#tabla_cursos #hor_cur tr td button.inscribir', function(){
    $.ajax({
        type: "POST",
        url: "inscribir_curso.php",
        data: "id_curso="+id, 
        success: function(){
           $("#tabla_inscripcion").load("Cursos_Existentes.php");
        }
    });
}); 
```

不确定这是否只是您在 SO 上的帖子中的拼写错误，但您在“POST”上缺少引号，以及点击功能的结尾。您的选择器似乎过于冗长和复杂，但没有任何 HTML 就很难判断它是否正确。

# git - 是否有支持 Git、Mercurial 和 Subversion（多合一）的 Windows 版本控制客户端

> ID：10543094
> 
> 赞同：1
> 
> 时间：2012-05-10T22:34:42.330
> 
> 标签：git, svn, version-control, mercurial, client

是否有支持 Git、Mercurial 和 Subversion（多合一）的 Windows 版本控制**客户端**（*不是客户端）？*

我不介意安装`^Tortoise(Git|Hg|SVN)$`（*是的，我把它写成正则表达式*），但我的上下文菜单变得难以管理:)

如果有类似[SourceTree](http://www.sourcetreeapp.com/)但适用于 Windows 的东西，那就太好了。
如果它与 Windows 资源管理器集成，则 +1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:13:38.823

[TortoiseHg](http://tortoisehg.bitbucket.io/)支持所有 3 个。您必须安装[hg-git](http://hg-git.github.com/)和[hgsubversion](https://bitbucket.org/durin42/hgsubversion/wiki/Home)插件，但是您可以将所有 3 个 VCS 作为 Hg 存储库工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T05:36:01.070

SmartGit 支持这三个。

[http://www.syntevo.com/smartgit/index.html](http://www.syntevo.com/smartgit/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T05:19:12.940

我不知道支持所有这三个的客户端，但是有支持 Git 和 SVN 的[SmartGit](http://www.syntevo.com/smartgit/documentation.html?page=concepts-git-svn)。

但是，如果您可以使用 Eclipse 作为 IDE，它允许为多个 VCS 系统安装插件，包括 Git、Hg 和 SVN；所以你使用eclipse你可以毫无问题地使用所有这三个......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-03T19:07:06.570

[SourceTree 现在](http://blog.sourcetreeapp.com/2013/09/16/sourcetree-for-windows-1-2-is-here/)也可用于 Windows。[它可以通过hgsubversion](https://bitbucket.org/durin42/hgsubversion/wiki/Home)扩展使用颠覆存储库，但据报道在 Mac 上[可能需要](http://www.third-helix.com/2013/09/using-sourcetree-with-subversion-hint-dont/)这种体验（对同一篇文章的评论表明颠覆桥还不错，而且 SourceTree 有点以 git 为中心，并遗漏了一些有用的 hg选项）。

# actionscript-3 - flash as3 电影剪辑.stop(); 在我的情况下不起作用

> ID：10543099
> 
> 赞同：0
> 
> 时间：2012-05-10T22:35:11.170
> 
> 标签：actionscript-3, movieclip

我的问题：通过内容加载器导入了一个 swf 文件。它有两帧，我想在第一帧停止它。它基本上是一个动画开始按钮，将在 mouse_over 上动画。start_button.stop(); 不起作用。它只是连续播放。我不能使用库中的按钮，因为这是一项大学作业，所有内容都必须从外部加载。

感谢所有帮助。

```
 function Main()
    {
        start_button_ldr.load(new URLRequest("images/start_button.swf"));
        start_button_ldr.contentLoaderInfo.addEventListener(Event.COMPLETE,showMainMenu);
    }

    function showMainMenu($evt:Event):void
    {
        start_button = MovieClip(start_button_ldr.content);
        start_button.x = SCENE_WIDTH / 2;
        start_button.y = SCENE_HEIGHT / 2;
        start_button.buttonMode = true;
        start_button.useHandCursor = true;
        start_button.stop();
        start_button.addEventListener(MouseEvent.MOUSE_DOWN, startGame);
        this.addChild(start_button);

        start_button_ldr.contentLoaderInfo.removeEventListener(Event.INIT, showMainMenu);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:07:53.020

不是问题的确切答案，但 Flash 已内置于您正在创建的内容中：您应该使用**运行时共享库**​​。

转到库中按钮的符号属性。选择' `Export for runtime sharing`'。确保网址是`start_button.swf`. 然后将 .fla 中的按钮拖到应该使用它的位置。在库中，您在链接列中“导入：”，并`Import for runtime sharing`检查符号属性中的“”。运行文件。

使用 http 调试器，您会看到它自动加载 .swf。这非常漂亮，并且提供了处理外部东西的好方法，因为它就像它的本地一样。

# json - JSON 模式验证工具

> ID：10543102
> 
> 赞同：2
> 
> 时间：2012-05-10T22:35:26.940
> 
> 标签：json, spring, maven

我需要在我的项目中验证传入的 POST json。这是我正在开发的 RESTFul json 服务的一部分。这些 json 需要验证

1.  强制属性
2.  无效属性
3.  数据类型

只需阅读有关[json-schema-validator 的](https://github.com/fge/json-schema-validator/wiki)信息，它看起来不错。

有人在 maven/spring 项目中使用过这个吗？我可以使用更好的（ito - API，稳定性）工具吗？

更新 - 我也在看[json 工具](http://developer.berlios.de/project/showfiles.php?group_id=6644)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:32:25.350

Disclaimer: author of [https://github.com/fge/json-schema-validator](https://github.com/fge/json-schema-validator) here...

This library has no dependency on anything web-related, so you can use it in a bare-bones Java application, a servlet-only Java application (I have even [made one](http://json-schema-validator.herokuapp.com/)) or with Spring. It won't be a problem.

Hope this helps!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:21:51.980

查找[http://code.google.com/p/jsonschema/](http://code.google.com/p/jsonschema/)。这可能会解决您的问题。

另请参阅[使用 java 的 JSON 模式验证](https://stackoverflow.com/questions/2499126/json-schema-validation-using-java)

# jquery - 如何使用 jQuery 清除特定 div 中的所有输入字段？

> ID：10543104
> 
> 赞同：59
> 
> 时间：2012-05-10T22:35:47.913
> 
> 标签：jquery

我正在尝试使用 jQuery 做一件简单的事情：每当表单加载或用户更改选择列表时，清除 div 中一组输入字段的输入字段；但我正忙着让选择器工作。

首先，这是我的 onclick 和 onload 触发器：

```
<form name="EditGenotype" action="process_GenotypeMaint.php" method="POST" onsubmit="return false" onload=clear_fetch() > 
```

并在选择列表中：

```
<SELECT multiple size=6 NAME="marker" onchange=show_marker() onclick=clear_fetch() > 
```

接下来，这是我要清除的 div 中的 HTML 输入元素：

```
 <div class=fetch_results>
      <fieldset>
    <LEGEND><b>Edit Genotype, call 1</b></LEGEND>
      <boldlabel>Allele_1</boldlabel><input id=allele_1_1 name=allele_1_1 size=5 >
      <boldlabel>Allele_2</boldlabel><input id=allele_1_2 name=allele_1_2 size=5 >
      <boldlabel>Run date</boldlabel><input id=run_date1 name=run_date1 size=10 disabled=true>
      </fieldset>
      <fieldset>
    <LEGEND><b>Edit Genotype, call 2</b></LEGEND>
      <boldlabel>Allele_1</boldlabel><input id=allele_2_1 name=allele_2_1 size=5 >
      <boldlabel>Allele_2</boldlabel><input id=allele_2_2 name=allele_2_2 size=5 >
      <boldlabel>Run date</boldlabel><input id=run_date2 name=run_date2 size=10 disabled=true>
      </fieldset>
      <fieldset>
    <LEGEND><b>Edit Genotype, call 3</b></LEGEND>
      <boldlabel>Allele_1</boldlabel><input id=allele_3_1 name=allele_3_1 size=5 >
      <boldlabel>Allele_2</boldlabel><input id=allele_3_2 name=allele_3_2 size=5 >
      <boldlabel>Run date</boldlabel><input id=run_date3 name=run_date3 size=10 disabled=true>
      </fieldset>
    </div> 
```

最后，这是我的脚本：

```
 function clear_fetch() {    

    $('#fetch_results:input', $(this)).each(function(index) {
      this.value = "";
    })

  } 
```

但是，什么都没有发生……所以，我不能让选择器正确。有人看到我做错了吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-10T22:56:58.607

**小提琴：http:** [//jsfiddle.net/simple/BdQvp/](http://jsfiddle.net/simple/BdQvp/)

**你可以这样做：**

我在 Fiddle 中添加了两个按钮来说明如何通过按钮在这些输入字段中插入或清除值。您只需捕获*onClick*事件并调用该函数。

```
//Fires when the Document Loads, clears all input fields
$(document).ready(function() {
  $('.fetch_results').find('input:text').val('');    
});

//Custom Functions that you can call
function resetAllValues() {
  $('.fetch_results').find('input:text').val('');
}

function addSomeValues() {
  $('.fetch_results').find('input:text').val('Lala.');
} 
```

**更新：**

在下面查看[Beena 的这个很棒的答案](https://stackoverflow.com/questions/10543104/how-to-clear-all-input-fields-in-a-specific-div-with-jquery/10892768#10892768)，以及更通用的方法。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2012-06-05T06:39:16.680

该函数用于清除表单中的所有元素，包括单选按钮、复选框、选择、多选、密码、文本、文本区域、文件。

```
function clear_form_elements(class_name) {
  jQuery("."+class_name).find(':input').each(function() {
    switch(this.type) {
        case 'password':
        case 'text':
        case 'textarea':
        case 'file':
        case 'select-one':
        case 'select-multiple':
        case 'date':
        case 'number':
        case 'tel':
        case 'email':
            jQuery(this).val('');
            break;
        case 'checkbox':
        case 'radio':
            this.checked = false;
            break;
    }
  });
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-10T22:45:14.370

改变这个：

```
 <div class=fetch_results> 
```

对此：

```
 <div id="fetch_results"> 
```

然后以下应该工作：

```
$("#fetch_results input").each(function() {
      this.value = "";
  })​ 
```

[http://jsfiddle.net/NVqeR/](http://jsfiddle.net/NVqeR/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-25T21:24:46.337

灵感来自[https://stackoverflow.com/a/10892768/2087666](https://stackoverflow.com/a/10892768/2087666)但我使用选择器而不是类，并且更喜欢 if over switch：

```
function clearAllInputs(selector) {
  $(selector).find(':input').each(function() {
    if(this.type == 'submit'){
          //do nothing
      }
      else if(this.type == 'checkbox' || this.type == 'radio') {
        this.checked = false;
      }
      else if(this.type == 'file'){
        var control = $(this);
        control.replaceWith( control = control.clone( true ) );
      }else{
        $(this).val('');
      }
   });
} 
```

这应该处理任何选择器内的几乎所有输入。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-10T22:43:30.157

我看到的几个问题。 `fetch_results`是一个类，而不是一个 Id，并且每个函数看起来都不正确。

```
$('.fetch_results:input').each(function() {
      $(this).val('');
}); 
```

请务必记住，如果您最终使用单选按钮或选中按钮，则必须清除选中的属性，而不是值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-03T21:25:33.263

只需删除 div 中的所有输入并在目标获取大部分内容时使用输入前面的冒号。

```
$('#divId').find(':input').val(''); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-15T04:49:06.747

这是 Beena 在 ES6 Sans JQuery 依赖项中的答案。谢谢 Beena！

```
let resetFormObject = (elementID)=> {
        document.getElementById(elementID).getElementsByTagName('input').forEach((input)=>{
            switch(input.type) {
                case 'password':
                case 'text':
                case 'textarea':
                case 'file':
                case 'select-one':
                case 'select-multiple':
                case 'date':
                case 'number':
                case 'tel':
                case 'email':
                    input.value = '';
                    break;
                case 'checkbox':
                case 'radio':
                    input.checked = false;
                    break;
            }
        }); 
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-10T22:53:26.313

如果你想保留一个类级别的选择器，那么你可以做这样的事情（使用来自 Mahn 的相同 jfiddle）

```
$("div.fetch_results input:text").each(function() {
  this.value = "testing";
})​ 
```

这将仅选择具有 fetch_results 类的 div 中的文本输入框。

与任何 jQuery 一样，这只是一种方法。问 10 个 jQuery 人这个问题，你会得到 12 个答案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-28T12:23:59.177

```
$.each($('.fetch_results input'), function(idx, input){
  $(input).val('');
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-19T15:29:04.230

对于一些想要重置表单的人也可以`type="reset"`在任何表单中使用。

```
<form action="/action_page.php">
Email: <input type="text" name="email"><br>
Pin: <input type="text" name="pin" maxlength="4"><br>
<input type="reset" value="Reset">
<input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-11T22:12:43.167

这是一个对我有用的简单衬里

```
$('input','.container_class_name').val(null).trigger('change'); 
```

`'input'`是您要在容器中清除的元素，& `'container_class_name'`是容器类或 id 名称。

This works for all input's regardless of type (checkbox, radio, text), since the pointer is looking at the `<input>` element itself.

# jquery - JQuery slice() 或 each() 的性能？

> ID：10543111
> 
> 赞同：0
> 
> 时间：2012-05-10T22:36:46.703
> 
> 标签：jquery, performance, each, slice

```
$('.row').slice(0, 3).css('background-color: green');
$('.row').slice(4, 6).css('background-color: yellow');
$('.row').slice(6, 10).css('background-color: green'); 
```

或者

```
x = 0;
$('.row').each(function() {
   if (x >= 0 && x <= 3) {
      $(this).css('background-color: green');
   }
   if (x >= 4 && x <= 6) {
      $(this).css('background-color: yellow');
   }
   if (x >= 6 && x <= 10) {
      $(this).css('background-color: green');
   }
   x++;
}); 
```

一个比另一个快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T22:38:43.037

使用切片。每个都在每次迭代时进行比较。切片将只占用列。加上 slice 更好地表达了意图 - 这将允许更好的优化（如果有的话）并且代码更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T15:37:03.890

完全使用您的示例并主要考虑性能，纯 css 解决方案可能更快：

```
.row:nth-child(-n+10) { background-color: green; }
.row:nth-child(-n+6)  { background-color: yellow; }
.row:nth-child(-n+3)  { background-color: green; } 
```

顺序看起来颠倒了，但它的作用是：首先将前 10 名中的所有 10 项变为绿色，然后将前 6 项变为黄色，然后再次将前 3 项变为绿色。

但这仅适用于静态 html。如果您正在动态更改选择，那么确实使用 jquery.slice。

# javascript - 移动 Safari - focus() 的乐趣

> ID：10543112
> 
> 赞同：1
> 
> 时间：2012-05-10T22:36:55.350
> 
> 标签：javascript, ipad, mobile, safari

我正在开发一个使用 Mobile Safari 浏览器专门提供给 iPad 客户端的 Web 应用程序。我的表单有两个输入字段，它们都将填充来自配对的蓝牙条形码扫描仪的数据。

扫描第一个字段时，以下 javascript 会监视返回键，它会解析传入的字符串，然后将焦点设置为数量字段...

```
 function tabtoquantity(e) {
    keyEntry = event.keyCode; 
    if(keyEntry == '13') {
        var barcode = document.test.barcodefield.value;
        var labeltext = barcode.split("*");
        document.test.itemkey.value = labeltext[0];
        document.test.description.value = labeltext[1];
        document.test.lotno.value = labeltext[2];
        document.test.datercvd.value = labeltext[3];
        document.test.binno.value = labeltext[4];
        document.test.unitwgt.value = labeltext[5];
        document.test.slot.value = labeltext[6];
        document.test.allergens.value = labeltext[7];
        document.test.kosher.value = labeltext[8];

        //document.test.barcodefield.disabled="true";
        //document.test.barcodefield.style.display="none";

        document.test.scanqty.focus();
    }
    else if((keyEntry < '48') || (keyEntry > '57'))  {
        return false;             
    }
} 
```

这一切都很好，除了它没有将焦点设置到我的 scanqty 字段。

奇怪的是，我在 scanqty 字段旁边有一个按钮，onClick 调用以下函数：

```
 function qtyreset() {
    document.test.scanqty.value = '';
    document.test.scanqty.focus();
} 
```

我不知道为什么相同的命令在一个实例中起作用而在另一个实例中不起作用。该功能在常规 Safari 中按预期工作。

也许它是相关的（？）但是移动Safari的表单助手（上一个和下一个按钮）在我加载页面时出现，但在我将数据扫描到第一个字段后消失......我希望它将焦点设置为scanqty字段，但是似乎无处集中注意力。

我感谢任何输入/帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T14:17:50.037

似乎只有在您已将站点添加到主屏幕并使用此链接打开站点时，focus() 才有效。

# javascript - 发生错误时 JS 替换 url 中的参数

> ID：10543114
> 
> 赞同：1
> 
> 时间：2012-05-10T22:37:30.330
> 
> 标签：javascript, jquery, url

我需要一个函数来替换这样的 url 参数

用户/?id=9&op=0?iu=0&t=9

至

用户/?id=9&op=0&iu=0&t=9

有人可以给我看一段代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:39:10.010

```
function fixURL(url){
    return url.replace(/\?/g,'&').replace('&','?');
}
fixURL('users.html?id=9&op=0?iu=0&t=9'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:23:29.017

尝试这个：

```
function fixurl(url) {
   var urlarray = url.split('?');
   var parsed = urlarray[0] + '?' + urlarray[1] + '&' + urlarray[2];

   return parsed;
} 
```

它`users/?id=9&op=0?iu=0&t=9`变成`users/?id=9&op=0&iu=0&t=9`.

并`users.html/?id=9&op=0?iu=0&t=9`进入`users.html/?id=9&op=0&iu=0&t=9`.

# c# - 将 ip 范围转换为带有子网的 ip

> ID：10543117
> 
> 赞同：0
> 
> 时间：2012-05-10T22:37:58.450
> 
> 标签：c#, network-programming, subnet

我需要将 IP 范围转换为其子网的起始 IP。

例如，输入：

```
1.1.1.0 - 1.1.1.255
(255.255.255.0) 
```

输出：

```
1.1.1.0/24 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:56:35.760

使用按位运算符很容易：

```
byte[] ip1 = {1, 1, 1, 0};
byte[] ip2 = {1, 1, 1, 255};
byte[] omask = 
{
    (byte)(ip1[0] ^ ip2[0]), 
    (byte)(ip1[1] ^ ip2[1]), 
    (byte)(ip1[2] ^ ip2[2]),
    (byte)(ip1[3] ^ ip2[3])
};
string mask = Convert.ToString(omask[0], 2) + Convert.ToString(omask[1], 2)
              + Convert.ToString(omask[2], 2) + Convert.ToString(omask[3], 2);
// count the number of 1's in the mask. Substract to 32:
// NOTE: the mask doesn't have all the zeroes on the left, but it doesn't matter
int bitsInMask = 32 - (mask.Length - mask.IndexOf("1")); // this is the /n part
byte[] address = 
{
    (byte)(ip1[0] & ip2[0]), 
    (byte)(ip1[1] & ip2[1]), 
    (byte)(ip1[2] & ip2[2]),
    (byte)(ip1[3] & ip2[3])
};
string cidr = address[0] + "." + address[1] + "." 
    + address[2] + "." + address[3] + "/" + bitsInMask; 
```

cidr 为您提供网络排名。

# php - preg_replace 用于以冒号结尾的单词

> ID：10543118
> 
> 赞同：3
> 
> 时间：2012-05-10T22:38:04.417
> 
> 标签：php

我试过研究 preg_replace，但我对正则表达式没有太多经验。

我想要做的是替换以冒号结尾的部分文本并将其变为粗体，并在之前插入一个换行符，在之后插入 2 个换行符。

IE 转换此文本

```
title1: is some text here. title2: another piece of text. 
```

至

```
**title1:**
is some text here.

**title2:**
another piece of text 
```

我试过做这样的事情......

```
preg_replace("!\*(.*?)\*!$:","\<br \/\>\<strong\>!\*(.*?)\*!\<\/strong\>\<br \/\>",$text); 
```

我似乎无法让它工作。

任何人都可以帮忙吗？

谢谢

和我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T22:54:00.293

`preg_replace`正则表达式需要分隔。所以，首先，尝试用斜杠包裹你的正则表达式。其次，我不明白你的正则表达式。像这样简单的东西`/(\w+):/`应该可以工作。

```
preg_replace("/(\w+):/", "<br><br><b>$1</b><br>", $text); 
```

@AndiLeeDavis 编辑答案以处理多字标题并在开始时摆脱无关的中断：

```
$mtext = preg_replace("/\.?\s*([^\.]+):/", "<br><br><b>$1</b><br>", $text);
if (strcmp(substr($mtext, 0, 8), "<br><br>") == 0) $mtext = substr($mtext, 8); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:59:29.430

```
$text = 'title1: is some text here. title2: another piece of text.';

echo preg_replace('#(\w+:) (.+?\.) ?#', "<b>$1</b><br />$2<br /><br />", $text); 
```

...给出：

```
<b>title1:</b><br />is some text here.<br /><br /><b>title2:</b><br />another piece of text.<br /><br /> 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:07:02.027

```
 $str = 'title1: is some text here. title2: another piece of text.';
   $str = preg_replace("/(\w+:)/", "\n\n**$1**\n", $str);
   echo $str; 
```

# javascript - Jquery在.load（）之前显示图像

> ID：10543121
> 
> 赞同：0
> 
> 时间：2012-05-10T22:38:35.620
> 
> 标签：javascript, jquery, html, load, spinner

我知道这已经被问了很多，但我需要在加载内容之前尽可能简单地显示加载图像，确切地说 Facebook 的注册表单和许多其他网站的情况。

```
 $("#signUpPanel").click(function(){
      $("#headInner").html("<img class='spinner' src='imgs/spinner.gif'>");
        $("#headInner").load("signUp.php");
 }); 
```

这是我迄今为止所拥有的，它显示出来，但几乎不可能看到它。我正在考虑使用 delay() 函数或类似的东西，在此先感谢，如果可以的话，让它尽可能简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:44:01.757

您应该在触发点击之前在某处预加载图像
为什么使用延迟，没有人愿意等待额外的时间只是看到加载图像，如果内容加载速度足够快而看不到加载图像，您应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:42:26.907

```
$("#signUpPanel").click(function(){
  $("#headInner").html("<img class='spinner' src='imgs/spinner.gif'>");
  setTimeout(function(){$("#headInner").load("signUp.php");},1000);  
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:19:26.150

正确的方法：

```
 $("#signUpPanel").click(function(){
     // in this way after image loaded, page will be load ...
     $('<img class='spinner' src='imgs/spinner.gif' />').load(function(){
         $("#headInner").html($(this));
         $("#headInner").load("signUp.php");
     });

 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T23:20:00.263

问题是你正在添加到 dom。你需要这样做。

```
$('#headerInner').addClass('loadingClass');

.loadingClass { background-image: url('imgs/spinner.gif') }

$('#headerInner').removeClass('loadingClass'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T23:26:08.900

```
var img = $('<img/>')[0].src = 'imgs/spinner.gif'; //preload
    img.className = 'spinner'; //add class

$("#signUpPanel").on('click', function(){
    $("#headInner").html(img).load("signUp.php"); //load will remove the image
}); 
```

如果甚至无法看到它，则加载速度足够快，以至于使用微调器通常是个坏主意。

延迟一个功能只是为了展示你的酷炫微调器与增强你的网站相反。

# amazon - 向用户发送下载时绕过 Kindle Fire 上的 Silk？

> ID：10543133
> 
> 赞同：1
> 
> 时间：2012-05-10T22:39:10.090
> 
> 标签：amazon, kindle, kindle-fire, amazon-silk

我们的用户在通过 Kindle Fire 浏览器从我们这里下载内容时遇到问题。我们怀疑丝绸是罪魁祸首。

下载是 Amazon S3 的超时验证 URL。

是否有可能以某种方式告诉 Kindle Fire 浏览器绕过 Silk 并直接访问下载？

# iphone - XMPPFramework 后台 UILocalNotification 支持没有 VoIP plist 键

> ID：10543134
> 
> 赞同：0
> 
> 时间：2012-05-10T22:39:13.910
> 
> 标签：iphone, background, voip, uilocalnotification, xmppframework

我正在尝试使用 XMPPFramework 在应用程序终止之前在“10 分钟窗口”中显示背景通知。似乎所有网络请求都在后台排队，`xmppStream:didReceiveMessage:`直到应用程序回到前台才被调用。

我注意到像动词这样的应用程序支持这种行为。它们显然不是 VoIP 应用程序，所以我很好奇它们是如何实现这种行为的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T20:17:36.083

如果其他人遇到此问题，您可以通过将此代码添加到您的 App Delegate 来解决它。如果您想查看，我的完整源代码在这里：[OTRAppDelegate.m](https://github.com/chrisballinger/Off-the-Record-iOS/blob/master/Off%20the%20Record/OTRAppDelegate.m)。其他相关代码在[OTRBuddy.m](https://github.com/chrisballinger/Off-the-Record-iOS/blob/master/Off%20the%20Record/OTRBuddy.m)的 receiveMessage: 中。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    NSLog(@"Application entered background state.");
    NSAssert(self.backgroundTask == UIBackgroundTaskInvalid, nil);
    self.didShowDisconnectionWarning = NO;

    self.backgroundTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            NSLog(@"Background task expired");
            if (self.backgroundTimer) 
            {
                [self.backgroundTimer invalidate];
                self.backgroundTimer = nil;
            }
            [application endBackgroundTask:self.backgroundTask];
            self.backgroundTask = UIBackgroundTaskInvalid;
        });
    }];

    dispatch_async(dispatch_get_main_queue(), ^{
        self.backgroundTimer = [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(timerUpdate:) userInfo:nil repeats:YES];
    });
}

- (void) timerUpdate:(NSTimer*)timer {
    UIApplication *application = [UIApplication sharedApplication];

    NSLog(@"Timer update, background time left: %f", application.backgroundTimeRemaining);

    if ([application backgroundTimeRemaining] < 60 && !self.didShowDisconnectionWarning) 
    {
        UILocalNotification *localNotif = [[UILocalNotification alloc] init];
        if (localNotif) {
            localNotif.alertBody = EXPIRATION_STRING;
            localNotif.alertAction = OK_STRING;
            [application presentLocalNotificationNow:localNotif];
        }
        self.didShowDisconnectionWarning = YES;
    }
    if ([application backgroundTimeRemaining] < 10) 
    {
        // Clean up here
        [self.backgroundTimer invalidate];
        self.backgroundTimer = nil;
        [application endBackgroundTask:self.backgroundTask];
        self.backgroundTask = UIBackgroundTaskInvalid;
    }
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{

}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */
    NSLog(@"Application became active");
    if (self.backgroundTimer) 
    {
        [self.backgroundTimer invalidate];
        self.backgroundTimer = nil;
    }
    if (self.backgroundTask != UIBackgroundTaskInvalid) 
    {
        [application endBackgroundTask:self.backgroundTask];
        self.backgroundTask = UIBackgroundTaskInvalid;
    }

    application.applicationIconBadgeNumber = 0;
} 
```

# ios - 权利无效？

> ID：10543136
> 
> 赞同：1
> 
> 时间：2012-05-10T22:39:21.400
> 
> 标签：ios, xcode, ios5, entitlements, xcode4.4

我目前正在 Xcode 的开发者预览版上运行。我注意到有一个生成的“权利”文件。每当我构建我的 iOS 应用程序时，我都会收到此错误：

> 可执行文件已使用无效权利进行签名。

为什么我会得到这个？我假设这是因为生成了权利文件。我还查看了其他类似的问题，他们都在谈论 Ad hoc 分发，我没有这样做。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:27:46.397

我最终只是在项目设置中禁用了权利。

# c# - 将背景图像应用到 Menustrip 子菜单项

> ID：10543137
> 
> 赞同：1
> 
> 时间：2012-05-10T22:39:24.423
> 
> 标签：c#, winforms, background, controls, menustrip

我创建了这个表单和一个自定义函数，该函数使用表单背景的深色部分来绘制控件的背景。

![在此处输入图像描述](../Images/a7d6400aec0fab2e0307f2183cfec62f.png)

悬停时，控制区域突出显示，是否有此颜色的访问器？像 menustrip.Highlight 颜色？

![在此处输入图像描述](../Images/caed42187a96eb7465df8036cdd55acd.png)

我也找不到子菜单的访问器。我查看了 msdn 并找到了有关更改整个主题的能力的文章，仅颜色，没有关于如何设置背景图像的信息。我搜索了 SO 并找到了类似的主题，但没有一个可以回答我的问题或足够接近以推断出正确的答案。任何帮助将不胜感激。用 C# 编写。另外，子菜单是否存在时添加到控件列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:30:30.617

您应该使用 ToolStripRenderer 自定义菜单外观。将渲染器分配给菜单并调用无效：

```
menuStrip.Renderer = new ToolStripProfessionalRenderer(new DarkColorTable());
menuStrip.Invalidate(); 
```

如您所见，渲染器需要颜色表。您应该创建自定义一个并覆盖您要自定义的所有颜色：

```
public class DarkColorTable : ProfessionalColorTable
{
    public override Color MenuStripGradientBegin
    {
        get { return Color.FromArgb(128, Color.Black); }
    }

    public override Color MenuStripGradientEnd
    {
        get { return Color.FromArgb(128, Color.Black); }
    }

    public override Color ButtonSelectedHighlight
    {
        get { return Color.FromArgb(64, Color.Black); }
    }

    // etc
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-28T08:57:51.417

```
 Private Sub BackImageToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BackImageToolStripMenuItem.Click
 Me.MenuStrip1.BackgroundImage=Form1.My.Resources.Resources.nature 'where nature is image name
    BackImageToolStripMenuItem.Checked = True
End Sub 
```

# asp.net - MVC3：非字符串的 EditorForModel()

> ID：10543138
> 
> 赞同：0
> 
> 时间：2012-05-10T22:39:24.667
> 
> 标签：asp.net, asp.net-mvc-3, model-validation

我有一个模型，我想在表单中使用`EditorForModel()`. 对于所有非字符串数据类型（如 bool、DateTime 等），即使我没有设置`[Required}`数据注释，创建的表单也会使字段成为必填字段。如何设置`Object.cshtml`文件以识别这不是必填字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:48:36.800

这不是“必需”问题，它是基本的 ModelBinding 组件：不可为空的类型在 DefaultModelBinder 中不能为空。如果 ModelBinding 失败，Model.IsValid = false => 显示此类错误。

您不会收到带有 a `bool?`（可以为空）或带有 a `string`（相同）的“错误”消息，但您会收到带有 a （不是）的“错误”消息`bool`。

（这是基本的“强类型逻辑”：尝试用`DateTime dt = null`c# 编写...）

因此，一种解决方案可能是创建一个新的 ModelBinder（例如，所有“null”布尔值都设置为 false）。**但我真的不确定这是你需要的。默认行为通常很好**

我只是给你一个 CustomModelBinder 的例子：我们使用它来避免在我们的大多数数字字段中键入 0 值：当没有在具有 Int32、UInt32 和 double 值的字段中键入任何值时，它将值设置为 0

```
public class AcceptNullAsZeroModelBinder : DefaultModelBinder
    {
        protected override void SetProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor, object value)
        {
            if (value == null && (
                propertyDescriptor.PropertyType == typeof(Int32) ||
                propertyDescriptor.PropertyType == typeof(UInt32) ||
                propertyDescriptor.PropertyType == typeof(double)
                ))
            {
                base.SetProperty(controllerContext, bindingContext, propertyDescriptor, 0);
                return;
            }

            base.SetProperty(controllerContext, bindingContext, propertyDescriptor, value);
        }
    } 
```

# actionscript-3 - AS3 Collision Process 不断返回 False

> ID：10543140
> 
> 赞同：0
> 
> 时间：2012-05-10T22:39:33.717
> 
> 标签：actionscript-3, collision-detection, side-scroller

```
function ProcessCollisions():void{

//respawn if player died
if(percentHP == 0){
    Player.x = _startMarker.x;
    Player.y = _startMarker.y;
    Gun.x = Player.x;
    Gun.y = Player.y - 45;
    _boundaries.x = 0;
    _boundaries.y = 0;
    Player.vy = 0;
    currentHP = maxHP;
}
//when Player is Falling
if(Player.vy > 0){
    //Otherwise process collisions of boundaires
        var collision:Boolean = false;
        if(_boundaries.hitTestPoint(Player.x, Player.y, true)){collision = true;}
        if(collision == true){
            while(collision == true){
                Player.y -= 0.1;
                Gun.y -= 0.1;
                collision = false;
                if(_boundaries.hitTestPoint(Player.x, Player.y, true)){collision = true;}
            }
            trace("Collision is " + collision);
            currentHP -= Player.vy * .1
            Player.vy = 0;
            Gun.vy = 0;
            JumpCount = 0;
        }
} 
```

}

我的碰撞处理在上面......我有这个问题，即使我与 _boundaries 内的对象发生碰撞，碰撞布尔值也会不断返回为假。当 while 循环不断将玩家拉出边界并且玩家似乎无限陷入其中时，它会在我的玩家身上产生震动效果......有人可以帮忙吗？同样在由 Enter Frame Timer 调用的 Frame 处理程序中，我对 Player.vy 进行了更多更改，如下所示

```
function FrameHandler(e:Event):void{
    //If Statements to slow character
    if(aKeyPressed == false && Player.vx > 0){
        Player.vx -= 1
    }
    else if(dKeyPressed == false && Player.vx < 0){
        Player.vx += 1
    }
    //Gravitates Player
     Player.vy += 1.5;
    //Controls arrays of bullets for Weapons
    //Process Collisions
    ProcessCollisions();
    //Scroll Stage
    scrollStage();
    //Attunes for multiple keypresses
    MultipleKeypresses();
    //Keeps Gun attached to Players Arm
    Gun.x = Player.x
    Gun.y = Player.y - 45;
    if(sKeyPressed){
        Gun.y = Player.y - 13;
        Gun.x = Player.x + 8;
    }
    //Checks Health
    updateHealthBar()
    //move Player and Gun
    Gun.y += Player.vy;
    Gun.x += Player.vx;
    Player.x += Player.vx;
    Player.y += Player.vy;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:55:44.643

(1)`trace("Collision is " + collision);`仅在您离开`while(collision == true)`循环后执行，因此您只会`"Collision is false"`在跟踪中看到。

(2) 当您检测到碰撞时，`Player.y -= 0.1;`以 0.1 的步长将玩家向上移动，因此**您与碰撞对象的距离永远不会超过 0.1**。

然后，设置好`Player.vy=0`后，它会在下一帧重置为 1.5（按`Player.vy += 1.5;`），并`Player.y`以 1.5 递增……这将始终导致另一次碰撞！

编辑：解决这个问题的方法取决于你想要什么效果：如果你想让玩家像蹦床一样从物体上反弹，你可以`Player.vy = 0;`用`Player.vy = -Player.vy;`.

或者，为了让玩家降落在对象上并停留在那里，您可以在更新之前测试潜在的碰撞`Player.y`。像这样的东西：

```
//move Player and Gun, if we're not about to collide
if(_boundaries.hitTestPoint((Player.x+Player.vx), (Player.y + Player.vy), true)==false){
    Player.y += Player.vy;
    Gun.y += Player.vy;
    Player.x += Player.vx;
    Gun.x += Player.vx;
} else {
    // we're about to collide: stop moving
    Player.vy = 0;
    Player.vx = 0;
} 
```

这不是一个完美的解决方案：它可能会使玩家降落在距离物体一定距离的地方，具体取决于`vy`和`vx`，因此改进方法是计算出确切的撞击点，并在停止之前移动到那里。

# less - Less 没有向我展示它的错误

> ID：10543145
> 
> 赞同：19
> 
> 时间：2012-05-10T22:40:07.077
> 
> 标签：less

当使用客户端编译时，如果有错误，Less 不会告诉我这些错误是什么。它应该插入一些 HTML，但似乎没有这样做。Less 运行后页面上的 HTML 如下所示：

```
<html>
  <head>
  <link rel="stylesheet/less" type="text/css" href="/Content/less/all.less">
  <script src="/Content/js/libs/less-1.3.0.min.js" type="text/javascript"></script>
  <style type="text/css" media="screen" id="less:error-message">
   --SNIP--
  }</style>
  </head>
  <body>         
  </body>
</html> 
```

如您所见，生成的错误 css 较少，而不是 html。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-02T06:55:42.250

在你的脑海中包含 less.js 之前添加这个脚本：

```
<script type="text/javascript">less = { env: 'development' };</script> 
```

这告诉 less.js 可以在浏览器中显示错误消息，因为我们仍在开发页面。

# python - 如何在 Python 中执行正则表达式操作时保留行列排列

> ID：10543148
> 
> 赞同：1
> 
> 时间：2012-05-10T22:40:16.097
> 
> 标签：python, python-3.x

我是 Python 和脚本的新手。

我有一个包含 12 列和数千行的表格的巨大 csv 文件，在 Excel 中看起来像这样（注意 5 个连续的管道符号表示一个新单元格，因此此示例由三行和三列组成）：

G",'32','0','0.98%',"1E0 ||||| G”、“32”、“0”、“1%”、“1E0 ||||| A", '48', '47', '97.92%', "7.6145E-27

G”、“32”、“0”、“12%”、“1E0 ||||| G”、“32”、“0”、“3%”、“1E0 ||||| A”、“1”、“47”、“97.9%”、“7.6145E-27

G”、“32”、“0”、“0%”、“1E0 ||||| G", '32', '32', '0%', "1E0 ||||| A”、“1”、“47”、“9.92%”、“7.6145E-27

可以看出，每个单元格由五个逗号分隔的元素组成。我只对倒数第二个元素（具有百分比值的元素）感兴趣。请注意此值如何可以有小数或没有小数。所以这是我编写的代码，用于搜索第四个元素并将其写入一个新文件，其中其他元素被丢弃。

```
import sys
import csv
import re

with open(sys.argv[1],"r") as f_input:
   read_f_input = csv.reader(f_input, delimiter=',')
   with open("f_output.csv", "wt") as f_output:
      f_outputwriter=csv.writer(f_output, delimiter=',')
      for row in read_f_input:
         genotype = re.search(r"[\d+\.]+%", [row[0], row[1], row[2], row[3], row[4], row[5], row[6], row[7], row[8], row[9], row[10], row[11]])
         result= genotype.group(0)
         f_outputwriter.writerow([result]) 
```

由于倒数第三行，此脚本不起作用： genotype = ... 如果我只在单个列上执行此操作（忽略其他 11 列），我已经让脚本工作，但我想执行同时对所有 12 列进行正则表达式操作，并以相同的表格格式写入结果。有谁知道我怎么能做这个棘手的转变？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:39:59.473

你想要的数据不就是`row[3]`,`row[7]`和`row[11]`吗？似乎您*已经知道*您想要哪些列，因为所有行都是相同的，因此无需尝试使用正则表达式查找所需的列。另外，当然，正则表达式不会搜索列表，因此您必须将它们重新加入字符串，但在这种情况下，为什么要在您要加入时使用 CSV 阅读器将其拆分它回来搜索吗？简而言之，我看不出正则表达式与您声明的目标有什么关系，我相信您可能想多了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:00:44.567

如果数字总是与百分号绑定，您可以使用它`re.findall()`来获取元素列表：

```
import csv
import re

fnamein = 'data.csv'
fnameout = 'output.csv'
rex = re.compile(r"'(\d*\.?\d*)%")  # an int/float element with percent sign

with open(fnamein, 'r') as fin, open(fnameout, 'w', newline='') as fout:
    writer = csv.writer(fout)
    for line in fin:
        row = rex.findall(line)         # all elements with percent sign
        row2 = [float(e) for e in row]  # converted explicitly if needed
        writer.writerow(row2)           # write to the output CSV 
```

如果`data.csv`包含问题中的行，则`output.csv`包含以下结果：

```
0.98,1.0,97.92
12.0,3.0,97.9
0.0,0.0,9.92 
```

这适用于 Python 3。对于 Python 2，`open(fnameout, 'wb')`用于打开输出文件（即二进制模式和 no `newline`）。

[稍后编辑]`rex`是编译后的正则表达式，其中百分号前的数字形成一个组 - 请参阅 周围的括号`(\d*\.?\d)*`。医生[说](http://docs.python.org/py3k/library/re.html#re.findall)：

> 如果模式中存在一个或多个组，则返回组列表...

因此，`rex.findall()`返回百分号后面的数字，而不是百分号本身。换句话说，`row`包含数字作为字符串文字（即数字的字符串表示），但不存在百分号。

采用`row2 = [float(e) for e in row]`字符串表示的数字`row`并将每个元素转换`e`为浮点数（即从字符串到实数）。

`writer`接受浮点数并将它们转换为字符串，用逗号分隔子字符串，然后将它们写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T22:50:10.670

不知道大家有没有找到自己喜欢的解决方案，不过我用了大约 10 分钟就写好了下面的代码。您应该能够立即运行它，如下所示：

python process_data.py --file=data.txt

**输出**

G",'32','0','1.960000.2%',"1E0 ||||| G", '32', '0','2.000000.2%', "1E0 ||||| A”、“48”、“47”、“195.840000.2%”、“7.6145E-27 G”、“32”、“0”、“24.000000.2%”、“1E0 ||||| G", '32', '0','6.000000.2%', "1E0 ||||| A”、“1”、“47”、“195.800000.2%”、“7.6145E-27 G”、“32”、“0”、“0.000000.2%”、“1E0 ||||| G", '32', '32','0.000000.2%', "1E0 ||||| A"、'1'、'47'、'19.840000.2%'、"7.6145E-27

我只是将代码打印出来，但您可以在遍历每一行时轻松使用 csv.writer 或 file.writeline。下面代码的好处在于，只要您知道单元格分隔符和所需值的位置，一行上有多少个单元格并不重要，您可以在一行上放置任意数量的单元格单行。

删除 % 有点小技巧，但是如果您知道数据格式，那么您应该是安全的。您还可以在转换为 float() 的过程中抛出异常块，并跟踪您运行时遇到的错误数。

```
#!/usr/bin/python

import os, sys, pdb, re
# NOTE: This has been deprecated you should use ArgumentParser
from optparse import OptionParser

__version__ = '$Id$'

DEFAULT_CELL_SEP = '|||||'
DEFAULT_CELL_COL_SEP = ','

parser = OptionParser(version=__version__, usage='Usage: %prog --fille=data_file [--      csep=cell_seperator --ccsep=cell_col_seperator]')
parser.add_option('-f','--file',dest='data_file', 
              help='File to process')
parser.add_option('--csep',dest='cell_sep', default=DEFAULT_CELL_SEP,
              help='Cell Separator')
parser.add_option('--ccseip', dest='cell_col_sep', default=DEFAULT_CELL_COL_SEP,
              help='Column Separator for each cell')

def process_col_four(cell, cell_col_sep=DEFAULT_CELL_COL_SEP, suffix='%'):
    cols = cell.split(cell_col_sep)
    # Do what you need to do...
    # pdb.set_trace()
    col_4 = cols[3].replace(' ','')
    col_4 = float(col_4[1:-2])
    col_4 = col_4 *2
    cols[3] = "'%f.2%s'" % (col_4, suffix)
    return ','.join(cols)
    # return cols

def main(data_file, cell_sep=DEFAULT_CELL_SEP, cell_col_sep=DEFAULT_CELL_COL_SEP):
    data_dir = os.path.dirname(data_file)
    output_file, ext = os.path.splitext(os.path.basename(data_file))
    output_file = output_file + '_recode' + ext
    output_path = os.path.join(data_dir, output_file)

    with open(data_file, 'r') as data_reader:
        for line in data_reader:
            cells = line.strip().split(cell_sep)
             new_cells = map(process_col_four, cells)
             # pdb.set_trace()
             new_line = cell_sep.join([cell for cell in new_cells])
             print new_line

if __name__ == '__main__':
    (options, args) = parser.parse_args()
    if not options.data_file:
        parser.print_usage()
        sys.exit(1)

    main(options.data_file, options.cell_sep, options.cell_col_sep) 
```

# parsing - 在 Groovy 中解析字符串？

> ID：10543152
> 
> 赞同：4
> 
> 时间：2012-05-10T22:41:26.243
> 
> 标签：parsing, groovy

我是 Groovy 的新手，我正在尝试从我的 REST 服务响应中解析标头。字符串如下：

> [http://localhost:4545/third-party-web?code=IVJZw1]

我正在尝试编码`IVJZw1`。

这很容易，我希望我能尽快得到帮助。

阿祖

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T00:11:10.030

如果你想要快速而肮脏的东西，你可以使用正则表达式：

```
def str = '[http://localhost:4545/third-party-web?code=IVJZw1]'
def code = (str =~ /code=(\w*)/)[0][1]
assert code == 'IVJZw1' 
```

我假设“代码”参数由字母数字字符 ( `\w`) 组成。

但是，如果您发现自己经常从 URL 中提取参数值，那么这个解决方案很快就会变得非常肮脏。像ataylor 这样的[建议](https://stackoverflow.com/a/10543332/581845)可能更合适，特别是如果您可以提取在单独函数上获取URL 参数的逻辑。甚至可能是 URL 类本身的一个方法：D

```
import java.net.*

// Retrieves the query parameters of a URL a Map.
URL.metaClass.getQueryParams = { ->
    delegate.query.split('&').collectEntries { param -> 
        param.split('=').collect { URLDecoder.decode(it) }
    }.asImmutable()
}

// Then that method can be used directly on URLs :)
def str = '[http://localhost:4545/third-party-web?code=IVJZw1]'
def code = new URL(str[1..-2]).queryParams.code
assert code == 'IVJZw1' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T23:07:05.223

如果去掉方括号，它只是一个 URL。你可以尝试这样的事情：

```
import java.net.*
def str = '[http://localhost:4545/third-party-web?code=IVJZw1]'
def url = new URL(str.replaceFirst('^\\[', '').replaceFirst(']$', ''))
def paramMap = url.query.split('&').collectEntries { param -> 
    param.split('=').collect { URLDecoder.decode(it) }
}
assert paramMap['code'] == 'IVJZw1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T09:19:43.413

Commons Http Client 是 java 中的 HTTP 代理实现，支持客户端身份验证、HTTP 状态管理和 HTTP 连接管理。这需要库 httpclient-4.1.2.jar、httpcore-4.1.2.jar、httpmime-4.1.2.jar、httpclient-cache-4.1.2.jar、commons-codec.jar 和 commons-logging-1.1。 1.jar 在类路径中。以下示例显示如何解析 URI 查询参数。

API

[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html)

是一个众所周知的库，您可以使用

```
String url = "http://www.example.com/something.html?one=11111&two=22222&three=33333";
List<NameValuePair> params = URLEncodedUtils.parse(new URI(url), "UTF-8");

for (NameValuePair param : params) {
  System.out.println(param.getName() + " : " + param.getValue());
} 
```

输出

> 一：11111
> 
> 二：22222
> 
> 三：33333

# xslt - Xslt 通过 XSLT 按属性匹配元素

> ID：10543154
> 
> 赞同：0
> 
> 时间：2012-05-10T22:41:45.487
> 
> 标签：xslt

我有一个 XSLT 文件

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:param name="vrtfDoc2">
  </xsl:param>

  <xsl:variable name="vDoc2" select="$vrtfDoc2/*"/>

  File 1 TO File 2 MATCH

  <xsl:template match="node()|@*" name="identity">
    <xsl:param name="pDoc2"/>
    <xsl:copy>
      <xsl:apply-templates select="node()|@*">
        <xsl:with-param name="pDoc2" select="$pDoc2"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/">
    <xsl:apply-templates select="Topic/SubTopic/*">
      <xsl:with-param name="pDoc2" select="$vDoc2"/>
    </xsl:apply-templates>

    -----------------------

    File 2 TO File 1 MATCH

    <xsl:apply-templates select="$vDoc2">
      <xsl:with-param name="pDoc2" select="/*"/>
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="Topic/SubTopic/*">
    <xsl:param name="pDoc2"/>
    <xsl:variable name="guid" select="../@Guid" />
    <table border="1" style="width:100%">
      <thead>
        <td>Current Element</td>
        <td>Left Guid</td>
        <td>Left</td>
        <td>Right</td>
        <td>Right Guid</td>
        <td>Diff Type</td>
      </thead>

      <xsl:if test="not(. = $pDoc2/*/*[name()=name(current())])">
      <tr>
        <td>
          <xsl:value-of select="name()"/>
        </td>
        <td>
          <xsl:value-of select="$guid"/>
        </td>
        <td>
          <xsl:value-of select="."/>
        </td>
        <td>
          <xsl:value-of select="$pDoc2/*/*[name()=name(current())]"/>
        </td>
        <td>

        </td>
        <td>Diff</td>
      </tr> 
    </xsl:if>
    <xsl:if test=". = $pDoc2/*/*[name()=name(current())]">
      <tr>
        <td>
          <xsl:value-of select="name()" />
        </td>
        <td>
          <xsl:value-of select="../@Guid"/>
        </td>
        <td>
          <xsl:value-of select="."/>
        </td>
        <td>
          <xsl:value-of select="$pDoc2/*/*[name()=name(current())]"/>
        </td>
        <td>
          <xsl:value-of select="$pDoc2/*/*[name()=name(current())]"/>
        </td>
        <td>Same</td>
      </tr>
    </xsl:if>
    </table>
  </xsl:template>
</xsl:stylesheet> 
```

本质上，转换文件检查从左到右然后从右到左的相等性。唯一的问题是我的 xml 文件有类似于

```
 <SubTopic Guid="462AF46304694D4785EF3B7E642AD8A2">
    <Description xmlns="http://www.authorit.com/xml/authorit" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Modification History</Description>
    <Text xmlns="http://www.authorit.com/xml/authorit" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <p id="4">Not Applicable</p>
    </Text>
  </SubTopic> 
```

xslt 按从上到下的顺序为我提供了匹配元素的差异，但不保证它匹配**正确**的元素。它是`<SubTopic Guid="462AF46304694D4785EF3B7E642AD8A2">`从左侧比较 xml 到`<SubTopic Guid="462AF46304694D4785EF3B7E642AD8A2">`比较右侧 xml 进行比较。

线

```
<xsl:variable name="guid" select="../@Guid" /> 
```

给了我左侧 xml 文件中的父 guid，这是正确的，但我尝试了以下变体

```
<xsl:if test="not(. = $pDoc2/*/*[name()=name(current())][@Guid=$guid])"> 
```

但是那个过程好像'[@Guid=$guid]' 不存在。

简而言之，xslt 必须比较正确的元素并且它必须有 t

I know my xslt skills are low but I am sure that I am missing something obvious.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:01:42.730

I see that `$guid` variable is built using the `../@Guid` (thus the `parent` axes) and then the XPath expression is looking for an equality of names and guids but expect both to match on the same level. maybe it should be converted to `[name() = name(current())][../@Guid = $guid]`? if this is not the case then maybe you can post a simplified version of your input and the expected result? this would help us help you debug the transform. also as a note, the `. =` comparison will test for the equality of the string values of the two nodes. If you expect it to test for the *existence* of a node with the same name and parent Guid then you would need to shorten it to `not($pDoc2/*/*[name()=name(current())][../@Guid=$guid]`

# extjs - 创建一个复选框以在 ExtJS 4 图表中隐藏或显示标签

> ID：10543162
> 
> 赞同：2
> 
> 时间：2012-05-10T22:42:38.730
> 
> 标签：extjs, checkbox, extjs4, label, axes

我创建了一个如下代码所示的图表，还有一个带有处理函数的复选框，我想根据其状态显示或隐藏图表标签。我的问题是，如何在不隐藏实际图表值的情况下隐藏标签？

```
// checkbox handler code
handler: function() {
    if(Ext.getCmp('chk_showLabels').getValue()) {
        // function to show labels here
    } else {
        // function to hide labels here
    }
} 
// Chart code
{
xtype : 'chart',
animate : true,
id : 'chart',
width : 996,
height : 432,
shadow : false,
store : volumes,
theme : 'Category1',
axes : [{
        type : 'Numeric',
        position : 'right',
        fields : ['participacao'],
        title : 'Percentual',
        label : {
            renderer : Ext.util.Format.numberRenderer('0.00%')
        }
    }, {
        type : 'Numeric',
        position : 'left',
        grid : true,
        fields : ['volume'],
        title : 'Volume',
        label : {
            renderer : Ext.util.Format.numberRenderer('0./i')
        }

    }, {
        type : 'Category',
        position : 'bottom',
        fields : ['data'],
        label : {
            rotate : {
                degrees : 270
            }
        }
    }
],
series : [{
        type : 'column',
        axis : 'right',
        xField : 'data',
        yField : ['participacao']
    }, {
        type : 'line',
        axis : 'right',
        xField : 'data',
        yField : ['participacao'],
        smooth : true,
        fill : true,
        style : {
            opacity : .1
        },
        label : {
            renderer : Ext.util.Format.numberRenderer('0./i')

        },
        markerConfig : {
            type : 'circle',
            size : 5
        },
        tips : {
            trackMouse : true,
            width : 148,
            height : 36,
            renderer : function (storeItem, item) {
                this.setTitle('Participação: ' + Ext.util.Format.number(storeItem.get('participacao'), "0.00") + '% \n Volume: ' + storeItem.get('volume'));
            }
        }
    }
]
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:10:32.623

这是一种奇怪的方式，但它以某种方式起作用。

为您希望它显示/隐藏的标签提供一个 ID，如下所示：（所有标签都将具有相同的 ID。据我所知，我们不能在这里给它们 Class 属性。但它适用于 ID。也许是因为它们是 SVG）

```
label: {
    renderer : Ext.util.Format.numberRenderer('0.00%'),
    id: 'myLabel'
} 
```

还有你的复选框处理程序：

```
handler: function(obj) {
    if( obj.checked ) {
        Ext.select('#myLabel').each(function(item){
            item.setVisible(false);
        });
    } else {
        Ext.select('#myLabel').each(function(item){
            item.setVisible(true);
        });
    }
} 
```

# python - sqlalchemy：同一类的多个基础

> ID：10543164
> 
> 赞同：0
> 
> 时间：2012-05-10T22:42:42.293
> 
> 标签：python, sqlalchemy

这可能非常简单，但仍然使用 sqlalchemy 并且似乎找不到答案。我有一个基本模块 sometable.py

```
import config
class SomeTable(config.Base):
    __tablename__ = 'bla'
    def __init__(self, name):
        self.name = name 
```

现在，我想在这个模块上写一个测试：基本上添加几个测试行，使用 SomeTable 的其他函数进行一些计算，然后检查结果。但我不想在我的主数据库中进行这些操作。如何将不同的 Base 对象传递给 sometable 模块中定义的类？还是有更好的方法来实现这一目标？

例如，我的 test_sometable.py 目前看起来像这样：

```
import sometable, config
class TestSomeTable(unittest.TestCase):

    def setUp(self):
        engine = create_engine('sqlite:///:memory:')
        self.Base = declarative_base(config.Base.metadata, engine)

    def test_some_functionality(self):
        tbl = sometable.SomeTable('name1')
        # if i create a session and add a row here, 
        # it will add it to my main database, rather than the in-memory one 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:12:12.523

`SomeTable`用作基础，在测试类中`config.Base`定义一个新的并不重要。`Base`你的实体应该如何知道它应该是另一个基地？

我认为如果你首先导入它应该可以工作`config`，然后用`config.Base`你想要使用的基础替换，并且只有在导入之后`sometable`。否则，在运行单元测试时，您必须找到另一种方法来使用测试配置而不是生产配置。

# sql - 如何优化此重复删除查询？

> ID：10543165
> 
> 赞同：0
> 
> 时间：2012-05-10T22:42:49.563
> 
> 标签：sql, sql-server, sql-server-2000

我正在使用 SQL 2000。我已经到了可以根据一组复杂的条件删除所有不需要的重复项的地步，但是现在查询需要几个小时才能完成，而过去只需要大约 3.5 分钟才能获得包含重复项的数据。

为了清晰：我可以有一个重复的 rpt.Name 字段，只要 rpt.HostName 或 rpt.SystemSerialNumber 字段也不同。此外，我必须根据四个不同列的时间戳来确定要保留的条目，因为其中一些列缺少时间戳。

任何帮助是极大的赞赏！

```
SELECT 
rpt.[Name],
rpt.LastAgentExecution,
rpt.GroupName,
rpt.PackageName,
rpt.PackageVersion,
rpt.ProcedureName,
rpt.HostName,
rpt.SystemSerialNumber,
rpt.JobCreationTime,
rpt.JobActivationTime,
rpt.[Job Completion Time]
FROM DSM_StandardGroupMembersProcedureActivityViewExt rpt
WHERE
(
  (
      rpt.GroupName = 'Adobe Acrobat 7 Deploy'
   OR rpt.GroupName = 'Adobe Acrobat 8 Deploy'
  )
  AND
  (
      (rpt.PackageName = 'Adobe Acrobat 7' AND rpt.PackageVersion = '-1.0')
   OR (rpt.PackageName = 'Adobe Acrobat 8' AND rpt.PackageVersion = '-3.0')
  )
)
AND NOT EXISTS
(
  SELECT *
  FROM   DSM_StandardGroupMembersProcedureActivityViewExt rpt_dupe
  WHERE
  (
    (
     rpt.GroupName = 'Adobe Acrobat 7 Deploy'
      OR rpt.GroupName = 'Adobe Acrobat 8 Deploy'
    )
    AND
    (
     (rpt.PackageName = 'Adobe Acrobat 7' AND rpt.PackageVersion = '-1.0')
      OR (rpt.PackageName = 'Adobe Acrobat 8' AND rpt.PackageVersion = '-3.0')
    )
    AND
    (
      (rpt_dupe.[Name] = rpt.[Name])
      AND
      (
       (rpt_dupe.SystemSerialNumber = rpt.SystemSerialNumber)
    OR (rpt_dupe.HostName = rpt.HostName)
      )
      AND
      (
       (rpt_dupe.LastAgentExecution    < rpt.LastAgentExecution)
    OR (rpt_dupe.JobActivationTime     < rpt.JobActivationTime)
    OR (rpt_dupe.JobCreationTime       < rpt.JobCreationTime)
    OR (rpt_dupe.[Job Completion Time] < rpt.[Job Completion Time])
      )
    )
  )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:43:29.567

沿着这些思路尝试：

```
SELECT t_main.columns
FROM table as t_main
LEFT JOIN 
(
SELECT name, MAX(lastAgentExecution)..... FROM table GROUP BY name,serialnumber, hostname
)
as t_joinSerial
ON t_main.name=t_joinSerial.name,lastAgentExecution etc.
where (t_main.AdobeStuff and t_joinSerial is NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:53:17.553

原因是不存在子句。

一个建议是将其重写为左外连接：

```
 from <big query> left outer join
      <dups query>
      on <all the fields that constitute a match>
 where <dups query>.<some field> is null 
```

我发现不存在并且通常优化不佳。

另一个建议是将此查询更改为更直接的实现：

```
with t as (
    SELECT rpt.[Name], rpt.LastAgentExecution, rpt.GroupName, rpt.PackageName,
           rpt.PackageVersion, rpt.ProcedureName, rpt.HostName, rpt.SystemSerialNumber, 
            rpt.JobCreationTime, rpt.JobActivationTime, rpt.[Job Completion Time]
    FROM DSM_StandardGroupMembersProcedureActivityViewExt rpt
    WHERE rpt.GroupName in ('Adobe Acrobat 7 Deploy', 'Adobe Acrobat 8 Deploy') AND
          ((rpt.PackageName = 'Adobe Acrobat 7' AND rpt.PackageVersion = '-1.0') OR
           (rpt.PackageName = 'Adobe Acrobat 8' AND rpt.PackageVersion = '-3.0')
          )
 )
 select t.*
 from t join
      (select name, ..., max(id)
       from t
       group by name, ...
      ) tsum
      on t.id = tsum.id 
```

也就是说，按您想要区分的列汇总表。选择其中一行。在这里，我假设有一个“id”字段来唯一标识每一行。您可能必须使用字段组合，例如名称和日期。如果没有 id，这将更具挑战性。在较新版本的 SQL Server 中，您可以使用 row_number()。

# objective-c - 如何在 Objective C 中声明一个全局变量

> ID：10543167
> 
> 赞同：1
> 
> 时间：2012-05-10T22:43:18.980
> 
> 标签：objective-c, ios, global-variables

我已经查看了此处发布的大多数问题，但没有一个答案非常清楚，足以让我对全局变量充满信心。

我在想一个全局变量，只是一个在

```
 @interface HelloWorldLayer : CCLayer
{
   //global variable goes here
    NSString *string;
} 
```

现在我可以在任何方法中使用这个变量。

这是正确的还是我错了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T22:48:34.523

这不是一个“全局”变量。它是一个变量，仅可用作 HelloWorldLayer 对象的实例成员变量。对于 xcode 中的全局变量，请参阅此解决方案[Global variable in Objective-C program](https://stackoverflow.com/questions/7081245/global-variables-in-xcode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-16T21:48:22.250

要在 C# 中创建一个全局变量，如何做到这一点的答案在 Stackoverflow 上的另一篇文章中：[Objective-C 程序中的全局变量](https://stackoverflow.com/questions/7081245/global-variables-in-xcode/7081703#7081703)

它指出：

对于标准全局变量，在应用程序终止和重新启动时不持久，将其添加到您选择的头文件 (*.h) 中：

```
extern NSInteger MYGlobalVariable; 
```

然后将其放入实现文件（*.m、*.c、*.cpp）中：

```
MYGlobalVariable = 0; // Or ny other default value. 
```

这就是你如何做一个面包和黄油全局变量。

祝你的项目好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T22:46:24.247

这不称为全局变量。它是一个实例变量。但是，是的，您可以在 HelloWorldLayer 实现中的每个实例方法中访问它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T22:48:55.920

请看[这里](https://stackoverflow.com/questions/3139947/global-variables-in-objective-c)

您创建一个静态变量并通过静态访问器使用它。`#import "staticVarClass.h"`PS您必须在需要使用它的任何地方导入存储静态变量的类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T22:50:21.427

如果你想在 HelloWorldLayer 之外访问它，你应该像这样创建一个属性

HelloWorldLayer.h

```
@interface HelloWorldLayer : CCLayer
{
    NSString *string;
}
// Declare variable to be used outside the layer here
@property(nonatomic, copy) NSString* string;
@end 
```

HelloWorldLayer.m

```
@implementation HelloWorldLayer
@synthesize string; // This matches the property "string" with the variable "string"
...
@end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T23:34:06.373

If you want a C global variable (accesible throughout the entire application), you should declare it outside any interface declaration or .h file, and in exactly one implementation or .c file. You will have to declare it extern in other files to make it visible in other files. Make sure to initialize it in the declaration, since it won't be by default.

Note that declaring an Objective C object pointer (such as an NSString *) as a C global variable in this manner increases the chances of ending up with un-reusable or hard-to-debug code.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-17T05:51:30.557

实际上，根据我的研发，我通过使用 extern 我们必须创建一个实例，但最后一件事是#define 你的变量，并且可以访问你想要的任何地方，而无需创建任何实例和其他东西，只需按其名称直接使用变量……

# android - 你如何注释掉 Proguard.cfg 中的规则？

> ID：10543174
> 
> 赞同：10
> 
> 时间：2012-05-10T22:45:07.520
> 
> 标签：android, proguard

使用什么语法注释掉 Proguard.cfg 中的 proguard 规则？谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T22:48:20.283

哈希符号。

```
# This is a comment.  The 3 lines below are not.
-keepclassmembers class * extends android.app.Activity { 
       public void *(android.view.View); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-14T15:43:44.137

从手册

> 您可以在配置文件中添加注释，以 # 字符开始并一直持续到行尾。

例子

```
# This is a comment 
```

手动链接在这里

[http://proguard.sourceforge.net/manual/usage.html](http://proguard.sourceforge.net/manual/usage.html)

# jquery - 扩展 Jquery：渲染部分

> ID：10543175
> 
> 赞同：0
> 
> 时间：2012-05-10T22:45:08.643
> 
> 标签：jquery, html, extend

我正在尝试编写一个扩展 jquery 的函数。它似乎正在工作，但在尝试使用它时出现此错误。

> XMLHttpRequest 无法加载文件：.../WebstormProjects/JQuery.FormHelpers/_partial.html。Access-Control-Allow-Origin 不允许 Origin null。

js

```
$.fn.partial = ($,function partial(source){
    $.get(source,function(data){
        if(!data){
            return false;
        }
        else{
            $(this).append(data);
        }
    });

}); 
```

测试.html

```
<!DOCTYPE HTML>
<html>
<head>
    <title>Helper Demo</title>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="JQuery.FormHelpers.js"></script>
</head>
<body>
<div class="partial"></div>
<script type="text/javascript">
    $(".partial").partial("_partial.html");
</script>
</body>
</html> 
```

_partial.html

```
<ul>
    <li>Home</li>
    <li>About</li>
    <li>Contact</li>
    <li>Help</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:26:41.523

请参阅此问题的答案：

[XMLHttpRequest Origin null 不允许使用 Access-Control-Allow-Origin for file:/// 到 file:///（无服务器）](https://stackoverflow.com/questions/4208530/xmlhttprequest-origin-null-is-not-allowed-access-control-access-allow-for-file)

基本上，您的问题是您在本地运行它，访问一个文件，这违反了大多数浏览器的同源策略。你的代码很好。

# python - 某些网站内容导致 BeautifulSoup（和 lxml）重新启动 Python 会话

> ID：10543177
> 
> 赞同：0
> 
> 时间：2012-05-10T22:45:14.190
> 
> 标签：python, html, screen-scraping, beautifulsoup, lxml

我正在获取和解析大量的网页。我注意到我的脚本以 Python 会话重新启动而自发结束。到目前为止，似乎只有当我尝试从 nasa.gov 页面制作汤时才会发生这种情况。IE：

```
import urllib2
from bs4 import BeautifulSoup

page=urllib2.urlopen('http://www.nasa.gov')
soup=BeautifulSoup(page)

=====================================RESTART======================================= 
```

有谁知道为什么会发生这种情况以及我是否可以避免它？它不会抛出异常或任何东西，会话只是重新启动。这发生在两台不同的机器上，但如果其他人无法重现它我会很感兴趣（我使用的是 Python 2.7.2 - Enthought Distribution）

编辑/更新：

我刚刚尝试用lxml 代替BeautifulSoup，但它会导致同样的自发重启。IE

```
from lxml import html
page=html.parse('http://www.nasa.gov')

============================== RESTART ================================= 
```

一旦 Python 打开并尝试解析页面，会话就会重新启动。有趣的是，阅读页面并将其打印到控制台可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T01:36:46.050

该 url 的 Doctype 错误。试试这个：

```
page=urllib2.urlopen('http://www.nasa.gov/').read().replace("<!DOCTYPE \"xmlns:xsl='http://www.w3.org/1999/XSL/Transform'\">", "<!DOCTYPE html>")

soup=BeautifulSoup(page) 
```

# ios - AVCaptureSession 的奇怪错误

> ID：10543180
> 
> 赞同：2
> 
> 时间：2012-05-10T22:45:27.803
> 
> 标签：ios, avcapturesession

我使用下面的代码来设置一个 AVCaptureSession，录制一个视频文件并播放它： 有时这工作得很好，而其他时候我在播放时会出现黑屏。据我所知，这完全是随机的。

当错误发生时，如果我尝试快速打开文件，我会收到“文件无法打开，格式无法识别”的消息。这让我相信这是一个录制问题而不是播放问题。

此外，如果注释掉添加麦克风输入的代码部分，则不会发生错误（但我的视频文件当然没有音轨）......所以音频馈送可能会随机损坏文件原因？

```
- (void)viewDidLoad {
[super viewDidLoad];

....

captureSession = [[AVCaptureSession alloc] init];
[captureSession setSessionPreset:AVCaptureSessionPresetHigh];

NSArray *devices = [AVCaptureDevice devices];
AVCaptureDevice *frontCamera;
AVCaptureDevice *mic = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];

for (AVCaptureDevice *device in devices) {

    NSLog(@"Device name: %@", [device localizedName]);

    if ([device hasMediaType:AVMediaTypeVideo]) 
    {
        if ([device position] == AVCaptureDevicePositionFront) {
            NSLog(@"Device position : front");
            frontCamera = device;
        }
    }
}

NSError *error = nil;

AVCaptureDeviceInput * microphone_input = [AVCaptureDeviceInput deviceInputWithDevice:mic error:&error];

AVCaptureDeviceInput *frontFacingCameraDeviceInput = [AVCaptureDeviceInput deviceInputWithDevice:frontCamera error:&error];

if (!error) 
{
    if ([captureSession canAddInput:frontFacingCameraDeviceInput])
    {
        [captureSession addInput:frontFacingCameraDeviceInput];
    }

    if([captureSession canAddInput:microphone_input])
    {
        [captureSession addInput:microphone_input];
    }

}
[captureSession startRunning];
} 
```

当按下录制时，我录制到一个“movie.mov”文件：

```
movieOutput = [[AVCaptureMovieFileOutput alloc]init];
[captureSession addOutput:movieOutput];
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *pathString = [documentsDirectory stringByAppendingPathComponent:@"movie.mov"];
NSURL *pathUrl = [NSURL fileURLWithPath:pathString];

[movieOutput startRecordingToOutputFileURL:pathUrl recordingDelegate:self]; 
```

当按下播放时，我播放电影文件：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *pathString = [documentsDirectory stringByAppendingPathComponent:@"movie.mov"];
NSURL *pathUrl = [NSURL fileURLWithPath:pathString];

mPlayer = [AVPlayer playerWithURL:pathUrl];

[self.video setPlayer:self.mPlayer];
[video setVideoFillMode:@"AVLayerVideoGravityResizeAspectFill"];
[self.mPlayer play]; 
```

我已经有一段时间了，现在无法弄清楚，这真的很随机​​。任何帮助表示赞赏！

编辑：如果 movie.mov 文件已经存在，我会在开始新录制之前将其删除。

EDIT2：它是否与该行有关： `[movieOutput startRecordingToOutputFileURL:pathUrl recordingDelegate:self];` Xcode 在此行上给我一个“发送 ViewController *const_strong 'to parameter of in compatible type 'id'”警告

EDIT3：问题已解决，将很快发布答案。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T07:48:23.537

我想我已经弄清楚了：

AVCaptureMovieFileOutput 类有一个movieFragmentInterval 变量，默认值为10。因此，每10 秒，“样本表”就会写入quicktime 文件。如果没有示例表，则该文件是不可读的。

当我对此进行测试时，我的所有记录都非常短，因此每当没有将示例表写入文件时，似乎就会发生错误。这很奇怪，因为我假设当我调用 [movieOutput stopRecording] 时这会写出示例表，但我猜它没有。当我将 fragmentInterval 降低到 5 秒时：

```
CMTime fragmentInterval = CMTimeMake(5,1);

[movieOutput setMovieFragmentInterval:fragmentInterval];
[movieOutput startRecordingToOutputFileURL:pathUrl recordingDelegate:self]; 
```

这个错误似乎已经消失了。我仍然不确定为什么只有在将麦克风添加为输入设备时才会发生错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T23:13:30.587

在录音之前调用这个，

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryRecord error:nil]; 
```

在播放之前，

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

我认为这应该有助于考虑到除非尝试录制音频，否则您不会遇到任何问题。

由于您每次都使用相同的 URL，因此您应该先将其删除

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *pathString = [documentsDirectory stringByAppendingPathComponent:@"movie.mov"];
NSURL *pathUrl = [NSURL fileURLWithPath:pathString];
[[NSFileManager defaultManager] removeItemAtURL:pathUrl error:nil];
[movieOutput startRecordingToOutputFileURL:pathUrl recordingDelegate:self]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-23T14:07:49.857

您应该将 的`fragmentInterval`属性设置`AVCaptureMovieFileOutput`为更高的限制。默认为 10 秒。

我也遇到了同样的问题，即使用`AVCaptureSession`10 秒以上的任何视频录制都没有录制音频。当我将片段间隔设置为 300 秒时，这是我允许拍摄视频的最大秒数，并记录了音频。

```
AVCaptureMovieFileOutput *aMovieFileOutput = [[AVCaptureMovieFileOutput alloc] init];
CMTime fragmentInterval = CMTimeMake(300,1);

[aMovieFileOutput setMovieFragmentInterval:fragmentInterval]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-26T09:11:05.983

它是一个重复的答案，但是添加它是为了帮助像我这样从 ios 开始的人，我尝试**了 KCMTimeInvalid**但它对我不起作用。一小时后，我意识到我在调用 startRecordingToOutputFileURL 后设置了movieFragmentInterval。

所以对于像我一样盲目打字的新手 -记住*逻辑和非常明显*的顺序

```
videoFileOutput.movieFragmentInterval = kCMTimeInvalid
videoFileOutput.startRecordingToOutputFileURL(filePath, recordingDelegate: recordingDelegate) 
```

# php - mysql 查询最新的 10 个结果在单个查询中

> ID：10543182
> 
> 赞同：2
> 
> 时间：2012-05-10T22:45:31.247
> 
> 标签：php, mysql

好吧，我的问题比标题所说的要难一些...

我有一个带有消息的表，我使用 while 循环将所有这些消息加载到 php 中。

我的 sql 查询目前看起来像这样：

```
"SELECT * 
 FROM messages 
 WHERE thread_id = '" . $thread_id . "'
 ORDER BY date_sent" 
```

工作正常并且一个接一个地返回所有消息，所以我在底部有最新消息（这很重要，因为我的消息模块像 facebook 一样工作，底部有一个小的回复字段，让用户直接聊天）

现在，我想要的是一个查询，它只会在一个查询中给我最新的 10 个结果。

我已经有了想要的结果数（$number_of_results = 10;）

如果我不必先计算结果的行数，而是在单个查询中请求结果，那就太好了。

就像是：

```
"SELECT * 
 FROM messages 
 WHERE thread_id = '" . $thread_id . "'
 ORDER BY date_sent 
 LIMIT TOTAL_NUMBER_OF_ROWS_WHERE_THREAD_ID_IS_MY_THREAD_ID-$number_of_results, $number_of_results" 
```

有没有办法做这样的事情......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T22:47:59.280

```
"SELECT * 
 FROM messages 
 WHERE thread_id = '" . $thread_id . "' 
 ORDER BY date_sent DESC 
 LIMIT 10"; 
```

确保你有这个索引

```
ALTER TABLE messages 
ADD INDEX threadid_datesent_ndx( thread_id, date_sent ); 
```

如果您想再次反转 10，请执行以下操作：

```
"SELECT * 
 FROM
 (
     SELECT * 
     FROM messages 
     WHERE thread_id = '" . $thread_id . "' 
     ORDER BY date_sent DESC LIMIT 10
 ) A
 ORDER BY date_sent"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T22:53:50.813

LIMIT 限制了结果集，而 SQL_CALC_FOUND_ROWS 计算没有 LIMIT 会返回的行数。

```
SELECT SQL_CALC_FOUND_ROWS *
FROM messages
WHERE thread_id = :thread_id
ORDER BY date_sent DESC
LIMIT 10 
```

然后用于[`mysql_num_row()`](http://php.net/manual/en/function.mysql-num-rows.php)获取计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:48:41.357

让我们完全避免循环：

```
$threadIds = array(100,101,102); // etc

$result = mysql_query("SELECT * FROM messages WHERE thread_id IN (".implode(',', $threadIds).") ORDER BY date_sent DESC LIMIT 10"); 
```

那应该行得通。请注意，这*可能*会降低效率，具体取决于您的数据模型和您正在使用的数据量。

**编辑**

这将为您提供 OVERALL 最近的 10 个。如果您需要每个最近的 10 个`thread_id`，请查看 RolandoMySQLDBA 的答案。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T22:54:46.110

罗兰多是对的。您必须在此限制结果之后向后排序记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T22:57:19.520

就像是

```
Select * From 
  (Select top(10) * From Messages Where threadid = ? order by date_sent desc) dummyName
Order By date_sent asc 
```

我认为。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T22:51:35.533

以相反的方式订购日期？

"SELECT * FROM messages WHERE thread_id='".$thread_id."' ORDER BY date_sent DESC LIMIT ".$number_of_results

# visual-studio - Visual Studio 中的俄语

> ID：10543189
> 
> 赞同：1
> 
> 时间：2012-05-10T22:46:53.217
> 
> 标签：visual-studio, cyrillic

我需要知道如何在我的 VS10 中启用俄语西里尔文脚本以进行评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:51:42.713

只需用键盘输入即可。
默认情况下，Visual Studio 在任何地方都使用 Unicode。

# arrays - 循环缓冲区（开始值被删除，会发生什么？）

> ID：10543190
> 
> 赞同：0
> 
> 时间：2012-05-10T22:46:55.490
> 
> 标签：arrays, queue, circular-buffer

我试图让我的头脑围绕循环/环形缓冲区，我有点卡在一个问题上。

如果我有一个线性队列，如下所示：

66、20、30、40、19，空槽
0 1 2 3 4 5

**正面：0（66），背面：5，长度：5**

如果一个值被删除（考虑到 0 是第一个被添加的，我相信 0（即 66）将被删除。

**我的问题：**那么 20 会成为队列中的第一个吗？之后的布局会如何？有什么东西会移动吗，例如索引/指针，或者任何类似的东西？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:50:30.053

是的。你会有类似下面的东西：

```
__   20   30   40   19   __
0    1    2    3    4    5 
```

**正面：1，背面：5，长度：4**

请注意，您甚至可以将 '66' 留在位置 0（无需“擦除”它），这是大多数实现所做的。队列中的**第一**项是“前”索引所指向的项，不一定是支持队列的数组中的第一项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:50:31.097

是的，然后 20 将在队列中。您的其他问题取决于实施。如果以这种方式编码，事情可能会发生变化；然而，这基本上违背了循环缓冲区的目的。在最正常的实现中，只有头部和尾部指针会移动。

# java - 使用带有 Java 7 的 HTTPs 协议访问时，Java 小程序无法加载

> ID：10543198
> 
> 赞同：6
> 
> 时间：2012-05-10T22:48:15.620
> 
> 标签：java, https, applet

我们的网站上有一个运行了很长时间的 Java 小程序。然后 Java 7 出来了，人们安装了它。当 Java 7 用户使用 HTTPS 访问我们的网站时，小程序无法加载 (ClassNotFoundException)。相同的站点和相同的小程序，当使用常规 HTTP 访问时，它工作正常。

使用以前版本的 Java (1.6.x) 的人可以使用 HTTP 或 HTTPS 毫无问题地查看小程序。

对于使用 Java 7 并喜欢使用 HTTPS 的人，我们可以做些什么来解决这个问题？

谷歌搜索并没有看到任何相关结果。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T21:14:54.457

问题解决了。长话短说，原因是 Java 7 中的 JSSE（Java 安全套接字扩展）实现默认启用了 SNI（服务器名称指示），这需要在 SSL（安全套接字层）服务器上设置服务器名称.

对于 Apache，我们需要执行以下操作：

```
<VirtualHost default:443>

# General setup for the virtual host
DocumentRoot "/opt/apache/2.2.21/htdocs"
ServerName your.servername.com:443 
```

以前我们将这一行注释掉，它适用于所有浏览器和所有 Java Applet，直到 Java 7 发布。

我在下面的 Java 开发者论坛上也有同样的讨论

[https://forums.oracle.com/forums/message.jspa?messageID=10330444#10330444](https://forums.oracle.com/forums/message.jspa?messageID=10330444#10330444)

# r - 拼接加权指数并获得平滑值

> ID：10543199
> 
> 赞同：0
> 
> 时间：2012-05-10T22:48:17.537
> 
> 标签：r, time-series

前段时间我问过[这个](https://stackoverflow.com/questions/9867225/splicing-weighted-index)问题，提供的答案让我很满意。但是，现在我重新运行了代码，我遇到了一个新问题。

这是数据：

```
a=1:50
b=14:63
c=rep(1,50)
wa=c(rep(2,5),rep(6,5),rep(5,5),rep(2,15),rep(0,10),rep(1,10))
wb=c(rep(5,5),rep(2,5),rep(1,5),rep(6,15),rep(5,10),rep(0,10))
wc=c(rep(3,5),rep(2,5),rep(4,5),rep(2,15),rep(5,10),rep(9,10))
z=data.frame(a,b,c,wa,wb,wc)
z$ind=rowSums(z[,1:3]*z[,4:6])/rowSums(z[,4:6]) 
```

然后我们运行这两个函数：

```
changeWeight<-function(x){
  test <- NA
  for(i in 2:NROW(z)) {
    test[i] <- if(z$wa[i]-z$wa[i-1]==0) 0 else 1
  }
  return(test)
}

z$test<-changeWeight() 
```

和：

```
spliceValue <- function(x) {
  splice <- 0
  for(i in 2:NROW(z)) {
    splice[i] <- if(z$test[i]==1) (rowSums(z[i,1:3]*z[i-1,4:6])/rowSums(z[i-1,4:6]))/z$ind[i] else splice[i-1]
  }
  return(splice)
}
z$splice<-spliceValue() 
```

所以这就是问题所在。我运行这个：

```
z$spind=ifelse(z$splice==0,z$ind,z$splice*z$ind) 
```

并获得以下数据框：

```
 a  b c wa wb wc  ind test    splice    spind
1   1 14 1  2  5  3  7.5   NA 0.0000000  7.50000
2   2 15 1  2  5  3  8.2    0 0.0000000  8.20000
3   3 16 1  2  5  3  8.9    0 0.0000000  8.90000
4   4 17 1  2  5  3  9.6    0 0.0000000  9.60000
5   5 18 1  2  5  3 10.3    0 0.0000000 10.30000
6   6 19 1  6  2  2  7.6    1 1.4473684 11.00000
7   7 20 1  6  2  2  8.4    0 1.4473684 12.15789
8   8 21 1  6  2  2  9.2    0 1.4473684 13.31579
9   9 22 1  6  2  2 10.0    0 1.4473684 14.47368
10 10 23 1  6  2  2 10.8    0 1.4473684 15.63158
11 11 24 1  5  1  4  8.3    1 1.3975904 11.60000
12 12 25 1  5  1  4  8.9    0 1.3975904 12.43855
13 13 26 1  5  1  4  9.5    0 1.3975904 13.27711
14 14 27 1  5  1  4 10.1    0 1.3975904 14.11566
15 15 28 1  5  1  4 10.7    0 1.3975904 14.95422
16 16 29 1  2  6  2 20.8    1 0.5432692 11.30000
17 17 30 1  2  6  2 21.6    0 0.5432692 11.73462
18 18 31 1  2  6  2 22.4    0 0.5432692 12.16923
19 19 32 1  2  6  2 23.2    0 0.5432692 12.60385
20 20 33 1  2  6  2 24.0    0 0.5432692 13.03846
21 21 34 1  2  6  2 24.8    0 0.5432692 13.47308
22 22 35 1  2  6  2 25.6    0 0.5432692 13.90769
23 23 36 1  2  6  2 26.4    0 0.5432692 14.34231
24 24 37 1  2  6  2 27.2    0 0.5432692 14.77692
25 25 38 1  2  6  2 28.0    0 0.5432692 15.21154
26 26 39 1  2  6  2 28.8    0 0.5432692 15.64615
27 27 40 1  2  6  2 29.6    0 0.5432692 16.08077
28 28 41 1  2  6  2 30.4    0 0.5432692 16.51538
29 29 42 1  2  6  2 31.2    0 0.5432692 16.95000
30 30 43 1  2  6  2 32.0    0 0.5432692 17.38462
31 31 44 1  0  5  5 22.5    1 1.4577778 32.80000
32 32 45 1  0  5  5 23.0    0 1.4577778 33.52889
33 33 46 1  0  5  5 23.5    0 1.4577778 34.25778
34 34 47 1  0  5  5 24.0    0 1.4577778 34.98667
35 35 48 1  0  5  5 24.5    0 1.4577778 35.71556
36 36 49 1  0  5  5 25.0    0 1.4577778 36.44444
37 37 50 1  0  5  5 25.5    0 1.4577778 37.17333
38 38 51 1  0  5  5 26.0    0 1.4577778 37.90222
39 39 52 1  0  5  5 26.5    0 1.4577778 38.63111
40 40 53 1  0  5  5 27.0    0 1.4577778 39.36000
41 41 54 1  1  0  9  5.0    1 5.5000000 27.50000
42 42 55 1  1  0  9  5.1    0 5.5000000 28.05000
43 43 56 1  1  0  9  5.2    0 5.5000000 28.60000
44 44 57 1  1  0  9  5.3    0 5.5000000 29.15000
45 45 58 1  1  0  9  5.4    0 5.5000000 29.70000
46 46 59 1  1  0  9  5.5    0 5.5000000 30.25000
47 47 60 1  1  0  9  5.6    0 5.5000000 30.80000
48 48 61 1  1  0  9  5.7    0 5.5000000 31.35000
49 49 62 1  1  0  9  5.8    0 5.5000000 31.90000
50 50 63 1  1  0  9  5.9    0 5.5000000 32.45000 
```

`z$spind`直到第 10 条记录都可以，但在第 11 条记录中，权重 (wa,wb,wc) 发生变化时没有平滑过渡。这样做的原因是因为我的函数在记录的第一个拼接之后`spliceValue`除以它与 . 的平滑索引不匹配。因此，该函数的任何后续运行都将返回错误的数字。我为权重的第二个和所有后续更改创建了一个解决方法。`z$ind``6``z$spind``spliceValue`

```
splicetValue <- function(x) {
  splicet <- 0
  for(i in 2:NROW(z)) {
    splicet[i] <- if(z$test[i]==1&z$splice[i-1]!=0) (rowSums(z[i,1:3]*z[i-1,4:6])/rowSums(z[i-1,4:6]))*z$splice[i-1] else if(z$test[i]==1&z$splice[i-1]==0) (rowSums(z[i,1:3]*z[i-1,4:6])/rowSums(z[i-1,4:6])) else z$spind[i]
  }
  return(splicet)
}
z$splicet<-splicetValue()

spliceiValue <- function(x) {
  splice <- 0
  for(i in 2:NROW(z)) {
    splice[i] <- if(z$test[i]==1) (z$splicet[i])/z$ind[i] else splice[i-1]
  }
  return(splice)
}
z$splice<-spliceiValue()

z$spind=ifelse(z$splice==0,z$ind,z$splice*z$ind) 
```

我现在唯一的问题是整个代码需要运行的次数比运行次数少一倍`z$test==1`。

`z$test==1`所以我通过输入来获得次数`xx=sum(z$test,na.rm=T)`。现在我不知道如何将上面的代码包装在一个迭代循环中，以便我的最终结果如下所示：

```
 a  b c wa wb wc  ind test   splice    spind  splicet
1   1 14 1  2  5  3  7.5   NA 0.000000  7.50000  0.00000
2   2 15 1  2  5  3  8.2    0 0.000000  8.20000  8.20000
3   3 16 1  2  5  3  8.9    0 0.000000  8.90000  8.90000
4   4 17 1  2  5  3  9.6    0 0.000000  9.60000  9.60000
5   5 18 1  2  5  3 10.3    0 0.000000 10.30000 10.30000
6   6 19 1  6  2  2  7.6    1 1.447368 11.00000 11.00000
7   7 20 1  6  2  2  8.4    0 1.447368 12.15789 12.15789
8   8 21 1  6  2  2  9.2    0 1.447368 13.31579 13.31579
9   9 22 1  6  2  2 10.0    0 1.447368 14.47368 14.47368
10 10 23 1  6  2  2 10.8    0 1.447368 15.63158 15.63158
11 11 24 1  5  1  4  8.3    1 2.022828 16.78947 16.78947
12 12 25 1  5  1  4  8.9    0 2.022828 18.00317 18.00317
13 13 26 1  5  1  4  9.5    0 2.022828 19.21687 19.21687
14 14 27 1  5  1  4 10.1    0 2.022828 20.43056 20.43056
15 15 28 1  5  1  4 10.7    0 2.022828 21.64426 21.64426
16 16 29 1  2  6  2 20.8    1 1.098940 22.85796 22.85796
17 17 30 1  2  6  2 21.6    0 1.098940 23.73711 23.73711
18 18 31 1  2  6  2 22.4    0 1.098940 24.61626 24.61626
19 19 32 1  2  6  2 23.2    0 1.098940 25.49541 25.49541
20 20 33 1  2  6  2 24.0    0 1.098940 26.37457 26.37457
21 21 34 1  2  6  2 24.8    0 1.098940 27.25372 27.25372
22 22 35 1  2  6  2 25.6    0 1.098940 28.13287 28.13287
23 23 36 1  2  6  2 26.4    0 1.098940 29.01202 29.01202
24 24 37 1  2  6  2 27.2    0 1.098940 29.89118 29.89118
25 25 38 1  2  6  2 28.0    0 1.098940 30.77033 30.77033
26 26 39 1  2  6  2 28.8    0 1.098940 31.64948 31.64948
27 27 40 1  2  6  2 29.6    0 1.098940 32.52863 32.52863
28 28 41 1  2  6  2 30.4    0 1.098940 33.40778 33.40778
29 29 42 1  2  6  2 31.2    0 1.098940 34.28694 34.28694
30 30 43 1  2  6  2 32.0    0 1.098940 35.16609 35.16609
31 31 44 1  0  5  5 22.5    1 1.602011 36.04524 36.04524
32 32 45 1  0  5  5 23.0    0 1.602011 36.84625 36.84625
33 33 46 1  0  5  5 23.5    0 1.602011 37.64725 37.64725
34 34 47 1  0  5  5 24.0    0 1.602011 38.44826 38.44826
35 35 48 1  0  5  5 24.5    0 1.602011 39.24926 39.24926
36 36 49 1  0  5  5 25.0    0 1.602011 40.05027 40.05027
37 37 50 1  0  5  5 25.5    0 1.602011 40.85127 40.85127
38 38 51 1  0  5  5 26.0    0 1.602011 41.65228 41.65228
39 39 52 1  0  5  5 26.5    0 1.602011 42.45328 42.45328
40 40 53 1  0  5  5 27.0    0 1.602011 43.25429 43.25429
41 41 54 1  1  0  9  5.0    1 8.811059 44.05530 44.05530
42 42 55 1  1  0  9  5.1    0 8.811059 44.93640 31.04697
43 43 56 1  1  0  9  5.2    0 8.811059 45.81751 31.65573
44 44 57 1  1  0  9  5.3    0 8.811059 46.69861 32.26450
45 45 58 1  1  0  9  5.4    0 8.811059 47.57972 32.87326
46 46 59 1  1  0  9  5.5    0 8.811059 48.46082 33.48202
47 47 60 1  1  0  9  5.6    0 8.811059 49.34193 34.09079
48 48 61 1  1  0  9  5.7    0 8.811059 50.22304 34.69955
49 49 62 1  1  0  9  5.8    0 8.811059 51.10414 35.30832
50 50 63 1  1  0  9  5.9    0 8.811059 51.98525 35.91708 
```

注意当权重改变时 z$spind 没有巨大的峰值。所以这是一个正确拼接的索引。这需要上述代码的 4 次迭代，因为权重改变了 5 次。我想将该代码包装在某种迭代循环中，这就是我想出的，但这是徒劳的尝试，因为我的 R 技能有限：

```
xx=sum(z$test,na.rm=T)

fixValue = function(y) {
  for(q in 1:xx-1) {

    splicetValue <- function(x) {
      splicet <- 0
      for(i in 2:NROW(z)) {
        splicet[i] <- if(z$test[i]==1&z$splice[i-1]!=0) (rowSums(z[i,1:3]*z[i-1,4:6])/rowSums(z[i-1,4:6]))*z$splice[i-1] else if(z$test[i]==1&z$splice[i-1]==0) (rowSums(z[i,1:3]*z[i-1,4:6])/rowSums(z[i-1,4:6])) else z$spind[i]
      }
      return(splicet)
    }
    z$splicet<-splicetValue()

    spliceiValue <- function(x) {
      splice <- 0
      for(i in 2:NROW(z)) {
        splice[i] <- if(z$test[i]==1) (z$splicet[i])/z$ind[i] else splice[i-1]
      }
      return(splice)
    }
    z$splice<-spliceiValue()

    z$spind=ifelse(z$splice==0,z$ind,z$splice*z$ind)

  }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:09:45.240

您的代码可以进一步改进，但您唯一错过的就是让它工作：

```
xx=sum(z$test,na.rm=T)

fixValue = function() { ## argument is not needed
  for(q in 1:xx-1) {

    splicetValue <- function(x) {
      splicet <- 0
      for(i in 2:NROW(z)) {
        splicet[i] <- if(z$test[i]==1&z$splice[i-1]!=0) (rowSums(z[i,1:3]*z[i-1,4:6])/rowSums(z[i-1,4:6]))*z$splice[i-1] else if(z$test[i]==1&z$splice[i-1]==0) (rowSums(z[i,1:3]*z[i-1,4:6])/rowSums(z[i-1,4:6])) else z$spind[i]
      }
      return(splicet)
    }
    z$splicet<-splicetValue()

    spliceiValue <- function(x) {
      splice <- 0
      for(i in 2:NROW(z)) {
        splice[i] <- if(z$test[i]==1) (z$splicet[i])/z$ind[i] else splice[i-1]
      }
      return(splice)
    }
    z$splice<-spliceiValue()

    z$spind=ifelse(z$splice==0,z$ind,z$splice*z$ind)

  }
return(z) ## this one
}
fixValue() 
```

# delphi - StretchDIBits 问题

> ID：10543203
> 
> 赞同：2
> 
> 时间：2012-05-10T22:48:30.283
> 
> 标签：delphi, blend, stretchdibits

我想在 32 位位图（或 Bitmap32）上传输 32 位图像（带 alpha 通道的 PNG）。

我不知道如何告诉函数混合图像而不是 bliting 它。就像使用 AlphaBlend 而不是 BitBlt 一样，我需要让这个函数混合图像而不是简单的 blit。

这是我的例子：

ABitmap 是 TBitmap32 (GR32) 的类型，但对于带有 32 位调色板的常规 TBitmap，结果相同。

```
 ABitmap.SetSize(GetWidth, GetHeight);
    SetStretchBltMode(ABitmap.Handle, COLORONCOLOR);//HALFTONE);
    ABitmap.Clear($FFFFFFFF);  { Here I try to erase background with white color, so that new image is blit over white surface }
    StretchDIBits(
      ABitmap.Handle,
      0, 0,
      GetWidth, GetHeight,
      0, 0,
      GetWidth, GetHeight,
      FreeImage_GetBits(Dib),
      FreeImage_GetInfo(Dib)^,
      DIB_RGB_COLORS,
      SRCCOPY);    // --- SRCAND etc. produce not good results 
```

FreeImage_GetBits 和 FreeImage_GetInfo 是 FreeImage 库函数，它们指向位数组的开头并指向结构。

我所做的 StretchDBit 不允许混合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T02:26:15.943

`StretchDIBits()`没有任何阿尔法混合的概念。您必须首先将您的 PNG 传输到一个临时的 32 位位图，确保根据需要设置其 alpha 通道，然后`AlphaBlend()`将临时位图放到您的目标位图上。`AlphaBlend()`或者，如果 PNG 已经使用 32 位位图在内存中布局，您可以直接将 PNG 放到目标位图。

# python - 使用 django-ckeditor 在 django 中避免恶意 js

> ID：10543209
> 
> 赞同：1
> 
> 时间：2012-05-10T22:48:52.370
> 
> 标签：python, html, django, ckeditor

我目前正在使用`django-ckeditor`允许用户为其个人资料输入丰富的描述。

然而，这为试图进行 XSS 和其他代码注入的恶意用户打开了大门。

我想知道解决这个问题的最佳方法是什么？

我查看了[Python HTML sanitizer / scrubber / filter](https://stackoverflow.com/questions/699468/python-html-sanitizer-scrubber-filter)，但似乎这些解决方案摆脱了诸如“style =”之类的属性，这与使用`ckeditor`例如彩色文本或其他依赖于这些的东西完全矛盾属性。

我应该使用其他工具代替`ckeditor`吗？或者我能做什么？

我的主要目标是允许用户在他们的“个人资料”中显示图片、彩色文本等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:08:55.733

您应该决定并编写允许发布内容的“白名单”。然后，彻底解析发布的数据并清理不在该白名单中的所有内容。如果是某种样式 - 解析样式属性并删除除白名单之外的所有内容。

例如，您可以使用古老的 BeautifulSoup 来做到这一点。

当然，不要将`<script>`标签或`onSOMETHING`处理程序列入白名单 - 它们通常带来的痛苦多于收获。

# javascript - socket.io 游戏开发算法

> ID：10543212
> 
> 赞同：1
> 
> 时间：2012-05-10T22:49:17.020
> 
> 标签：javascript, algorithm, socket.io

我试图在socket.io上创建一个带有字母和单词的简单多人游戏算法如下，mu问题是。像我想的那样可能吗？![算法](../Images/9a291f8431ea4e3f1ab0f91e75651304.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:58:41.907

您的计时器逻辑似乎对游戏至关重要。它应该在服务器端处理，以避免来自可能伪造空字符串请求的玩家 2 的任何技巧。

# java - 从 mysql 数据库解析 XML 文件时出错

> ID：10543214
> 
> 赞同：0
> 
> 时间：2012-05-10T22:49:34.273
> 
> 标签：java, mysql, encoding, escaping

我正在使用 jsp 服务器、mysql 数据库和 xsl 转换。我有一个来自存储到我的电脑的 xml 文件的链接，以便用 xslt 翻译它。如果我这样做并且一切都很好：

```
String url="c:\\xampp\\tomcat\\webapps\\examples\\sakias.xml";
Document doc = builder.parse(new File(url)); and so on as usual... 
```

问题是，如果我将 url 链接 ( `c:\\xampp\\tomcat\\webapps\\examples\\sakias.xml`) 存储在 mysql 数据库的列中，然后获取它，我会收到以下错误：

```
org.xml.sax.SAXParseException; systemId: file:///c:/xampp/; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog 
```

编码是否有问题；转义字符；这真的很奇怪。

PS1：是否有另一种将xml直接存储到sql数据库中的解决方案；我的版本不支持xml字段。我可以将它存储为字符串吗？

PS2：我将 url 链接更改为此表单（http://localhost:8080/examples/jsp/jsp2/loginrecord/link_error.xml），但仍然是同样的错误。我打印它，它很好，但仍然是同样的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:29:21.540

您在数据库中的 URL 不应`\`转义。它应该看起来像`c:\xampp\tomcat\webapps\examples\sakias.xml`

另外，是的，您可以将 XML 存储在 SQL 数据库中。您不必担心将其转义以进行存储（如果您在 Java 中构造字符串，则可能需要对其进行转义），但您应该担心列大小。您可以选择将其存储为 TEXT 而不是 VARCHAR（没有 String SQL 类型之类的东西）。

# google-maps - 将标记链接在一起？

> ID：10543221
> 
> 赞同：1
> 
> 时间：2012-05-10T22:50:28.333
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

你能以某种方式引用标记内的其他标记吗？将标记链接在一起，即使它们在地图上的位置不同。

假设我对每个人都有两种类型的标记：第一个标记是该人居住的位置，第二个标记是该人工作的位置。

假设我的地图上有很多这样的标记。您将鼠标悬停在一个上。您将鼠标悬停在上面的那个和链接到该标记（与同一个人关联）的第二个标记被突出显示。

理论上你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:19:16.853

我有一个例子，想法是保留一个对象（散列）或各种人的数组，并在创建标记时分配它属于谁（`marker.owner`）。稍后当它被选中时，检索它是谁的标记，并根据此信息更改其他标记。下面的代码可以缩短，但它保持打开的方式你可以一步一步地看到发生了什么。

[http://jsfiddle.net/afTLh/](http://jsfiddle.net/afTLh/)

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
      var map;
      var mapOptions = { center: new google.maps.LatLng(40.0, -90.0), zoom: 5,
        mapTypeId: google.maps.MapTypeId.ROADMAP };

      var people = {};

      function initialize() {
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        addPerson("Joe",40,-88,41,-86);
        addPerson("Tina",42,-92,43,-93);
        addPerson("Ken",39,-94,39.5,-96);
      }

      function addPerson(name, homelat, homelng, worklat, worklng) {
        people[name] = {};

        homemarker = new google.maps.Marker({
          map: map,
          position: new google.maps.LatLng(homelat, homelng),
          icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png'
        });

        workmarker = new google.maps.Marker({
          map: map,
          position: new google.maps.LatLng(worklat, worklng),
          icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png'
        });

        homemarker.owner = name;
        workmarker.owner = name;

        google.maps.event.addListener(homemarker, 'mouseover', function() {
          var name = this.owner;
          this.setIcon("http://labs.google.com/ridefinder/images/mm_20_red.png");
          people[name].work.setIcon("http://labs.google.com/ridefinder/images/mm_20_red.png");
        });

        google.maps.event.addListener(homemarker, 'mouseout', function() {
          var name = this.owner;
          this.setIcon("http://labs.google.com/ridefinder/images/mm_20_green.png");
          people[name].work.setIcon("http://labs.google.com/ridefinder/images/mm_20_blue.png");
        });

        google.maps.event.addListener(workmarker, 'mouseover', function() {
          var name = this.owner;
          this.setIcon("http://labs.google.com/ridefinder/images/mm_20_red.png");
          people[name].home.setIcon("http://labs.google.com/ridefinder/images/mm_20_red.png");
        });

        google.maps.event.addListener(workmarker, 'mouseout', function() {
          var name = this.owner;
          this.setIcon("http://labs.google.com/ridefinder/images/mm_20_blue.png");
          people[name].home.setIcon("http://labs.google.com/ridefinder/images/mm_20_green.png");
        });

        people[name].home = homemarker;
        people[name].work = workmarker;
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T03:35:54.300

这是一种不同的方法，它使用所有 MVCObjects 的内置`bindTo`方法。这不需要哈希来跟踪哪些标记属于彼此。

在标记对的鼠标悬停事件中，您只需将某些属性设置为 true，然后将其设置为 false on `mouseout`。然后通过此属性将标记绑定在一起，并使用此属性的更改事件来设置图标。

[http://jsfiddle.net/afTLh/1/](http://jsfiddle.net/afTLh/1/)

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
      var map;
      var mapOptions = { center: new google.maps.LatLng(40.0, -90.0), zoom: 5,
        mapTypeId: google.maps.MapTypeId.ROADMAP };

      function initialize() {
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        addPerson("Joe",40,-88,41,-86);
        addPerson("Tina",42,-92,43,-93);
        addPerson("Ken",39,-94,39.5,-96);
      }

      function addPerson(name, homelat, homelng, worklat, worklng) {

        homemarker = new google.maps.Marker({
          map: map,
          position: new google.maps.LatLng(homelat, homelng),
          icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png'
        });

        workmarker = new google.maps.Marker({
          map: map,
          position: new google.maps.LatLng(worklat, worklng),
          icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png'
        });

        google.maps.event.addListener(homemarker, 'mouseover', function() {
            this.set('current', true);
        });

        google.maps.event.addListener(homemarker, 'mouseout', function() {
            this.set('current', false);
        });

        google.maps.event.addListener(workmarker, 'mouseover', function() {
            this.set('current', true);
        });

        google.maps.event.addListener(workmarker, 'mouseout', function() {
            this.set('current', false);
        });

        //Use the 'current_changed' event to set the correct markers
        google.maps.event.addListener(workmarker, 'current_changed', function() {
            if(this.get('current')){
                this.setIcon("http://labs.google.com/ridefinder/images/mm_20_red.png");
            }else{
                this.setIcon("http://labs.google.com/ridefinder/images/mm_20_blue.png");
            }
        });

        google.maps.event.addListener(homemarker, 'current_changed', function() {
            if(this.get('current')){
                this.setIcon("http://labs.google.com/ridefinder/images/mm_20_red.png");
            }else{
                this.setIcon("http://labs.google.com/ridefinder/images/mm_20_green.png");
            }
        });

        //Bind the markers together by the 'current' property
        homemarker.bindTo('current', workmarker);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
  </body>
</html> 
```

# python - 使用正则表达式按字符拆分

> ID：10543226
> 
> 赞同：1
> 
> 时间：2012-05-10T22:50:51.247
> 
> 标签：python, regex

我想用字符分割一个字符串`'-'`以及它左右两边的空格。我怎样才能做到这一点？

我尝试了几件事：

```
a.split('[\s]-[\s]')
a.split( *- *)
a.split(\s-\s) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:55:20.940

如果要删除“-”周围的所有空格，请使用此正则表达式。

```
\s*-\s* 
```

如果您只想要任一侧的一个可选空间，请使用这个。

```
\s?-\s? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T23:00:48.603

```
import re
s = 'abc-abc- abc -abc - abc'
r = re.compile('\s*-\s*')
r.split(s) 
```

会给

```
['abc', 'abc', 'abc', 'abc', 'abc'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T00:56:21.903

```
s='one - two - three - four'

print re.split(r'\s*-\s*',s) 
```

印刷：

```
['one', 'two', 'three', 'four'] 
```

# c++ - 在 C/C++ 中将数据从一个文件复制到另一个文件的最快方法？

> ID：10543230
> 
> 赞同：3
> 
> 时间：2012-05-10T22:51:40.050
> 
> 标签：c++, c, file-io, fwrite, fread

在我的代码中，我需要将数据从一个文件复制到另一个文件。我想出的解决方案如下所示：

```
const int BUF_SIZE = 1024;
char buf[BUF_SIZE];

int left_to_copy = toCopy;
while(left_to_copy > BUF_SIZE)
{
    fread(buf, BUF_SIZE, 1, fin);
    fwrite(buf, BUF_SIZE, 1, fout);
    left_to_copy -= BUF_SIZE;
}

fread(buf, left_to_copy, 1, fin);
fwrite(buf, left_to_copy, 1, fout); 
```

我的主要想法是可能有类似 memcpy 的东西，但用于文件中的数据。我只是给它两个文件流和字节总数。我搜索了一下，但我找不到任何这样的东西。

但是如果这样的东西不可用，我应该使用什么缓冲区大小来使传输最快？更大意味着更少的系统调用，但我认为它可能会弄乱系统上的其他缓冲或缓存。我应该动态分配缓冲区以便它只进行一对读/写调用吗？在这种特殊情况下，典型的传输大小从几 KB 到十几 MB 不等。

编辑：对于特定于操作系统的信息，我们使用的是 Linux。

编辑2：

我尝试使用 sendfile，但它没有用。它似乎写入了适量的数据，但它是垃圾。

我将上面的示例替换为如下所示：

```
fflush(fin);
fflush(fout);
off_t offset = ftello64(fin);
sendfile(fileno(fout), fileno(fin), &offset, toCopy);
fseeko64(fin, offset, SEEK_SET); 
```

我添加了同花顺、offest 和一次寻找一个，因为它似乎不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T22:56:32.077

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T23:00:28.200

您可以做的一件事是增加缓冲区的大小。如果您有大文件，这可能会有所帮助。

另一件事是直接调用操作系统，无论您的情况如何。`fread()`和_`fwrite().`

如果您可以使用无缓冲例程并提供自己的更大缓冲区，您可能会看到一些明显的性能改进。

我建议从返回值中获取写入的字节数，`fread()`以跟踪您何时完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T23:08:01.237

为您的目标操作系统考虑内存映射文件 I/O 可能是值得的。对于您正在谈论的文件大小，这是一种可行的方法，并且操作系统将比您做得更好。但是，如果您想编写可移植操作系统代码，这可能不是最好的方法。

这需要一些设置，但是一旦你设置好了，你就可以忘记循环代码了，它基本上看起来就像一个 memcpy。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T05:18:07.590

只要考虑快速阅读，您还可以选择文件映射 - 使用 mmap 的内存映射 I/O（请参阅 mmap 手册页）。与传统的 I/O 相比，它被认为更有效，尤其是在处理大文件时。

mmap 实际上并不读取文件。它只是将其映射到地址空间。这就是它如此之快的原因，在您实际访问该地址空间区域之前，没有磁盘 I/O。

或者您可以先查看块大小，然后您可以继续阅读，这也被认为是有效的，因为编译器在这种情况下增强了优化。

# android - Android：如果放置在不同的可绘制文件夹中，相同大小的图像会呈现不同的效果吗？

> ID：10543233
> 
> 赞同：0
> 
> 时间：2012-05-10T22:52:04.833
> 
> 标签：android, drawable, render, assets, android-image

drawable-hdpi 中相同像素尺寸的图像在 drawable-mdpi 文件夹中呈现相同还是不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:19:18.467

是的，它们会以不同的方式呈现。

每次您提供更高密度的图像时，这些图像都需要具有更大的像素尺寸以说明密度，但以相同的 dp 尺寸显示。要将 dp 转换为像素，请将 dp 中的值乘以设备的密度乘数。mdpi 为 1.0，hdpi 为 1.5，xhdpi 为 2.0。因此 hdpi 中的 100dp 实际上是 150px。

在 drawable-mdpi/foo.png 中具有 100x100 像素图像的应用程序将在 drawable-hdpi/foo.png 中以 150x150 像素提供相同图像的更高密度版本。

如果图像为 100x100 像素，则当放置在 -mdpi 目录中时，它将被解释为具有中等密度。在中等密度设备上，它将以 1:1 呈现。这同样适用于高密度设备上的 -hdpi 资产等。当系统使用来自与设备自身密度不同的密度桶的资产时，就会出现差异。当设备的本机密度的资产不可用时，就会发生这种情况。

如果图像是 100x100 像素并放置在 -hdpi 目录中，它将被解释为具有高密度。如果中等密度设备上没有该图像的对应 -mdpi 版本，则中等密度设备将缩小图像。mdpi 的密度乘数为 1，hdpi 的密度乘数为 1.5。1/1.5 = 0.66。图像将缩小到其原始大小的 2/3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T23:17:17.463

你真的需要阅读[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)。特别是[设计替代布局和可绘制](http://developer.android.com/guide/practices/screens_support.html#DesigningResources)对象（特别是替代可绘制对象）部分。

如果您提供一个可绘制对象，Android 将对其进行缩放以匹配标准化屏幕（ldpi、mdpi、hdpi 等），但最好创建您自己的具有相关像素密度的可绘制对象并将它们放置在相关的可绘制文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T22:59:53.643

事实上，代码会寻找最适合手机容量的文件夹。

# c# - Propertygrid 显示多个对象的公共属性

> ID：10543234
> 
> 赞同：1
> 
> 时间：2012-05-10T22:52:12.983
> 
> 标签：c#, winforms, propertygrid

我有一个问题，propertygrid 没有显示多个对象的可扩展属性的父值（使用 propertygrid.SelectedObjects）

```
[Browsable(true), TypeConverter(typeof(ExpandableObjectConverter))]
 public class MyNestedClass {
    private int a;
    private int b;

   [Browsable(true), 
    ReadOnly(false), 
    RefreshProperties(RefreshProperties.Repaint),
    NotifyParentProperty(true)]
   public int A {
      get { return this.a; }
      set { this.a = value; }
   }

   [Browsable(true), 
    ReadOnly(false), 
    RefreshProperties(RefreshProperties.Repaint),
    NotifyParentProperty(true)]
   public int B {
      get { return this.b; }
      set { this.b = value; }
   }

   public MyNestedClass(int a, int b) {
      this.a = a;
      this.b = b;
   }

   public override string ToString() {
      return this.a.ToString() + “; “ + this.b.ToString();
   }
} 
```

该类是另一个类 myClass 的一部分，其中 myNestedClass 被定义为其中的可浏览属性。

```
public class MyClass {
   …
   private MyNestedClass myNestedClassObject;
   …
   [Browsable(true),
    ReadOnly(false), 
    MergableProperty(true),
    RefreshProperties(RefreshProperties.Repaint)]
   public MyNestedClass MyNestedClassObject {
      get { return myNestedClassObject; }
      set { myNestedClassObject = value; }
   }
   …
} 
```

当属性网格中只显示一个类 myClass 的实例时，一切正常。属性网格显示：

```
…
MyNestedClassObject | 1; 2
   A                | 1
   B                | 2
… 
```

在我试图显示 MyClass 实例数组（通过 propertygrid.SelectedObjects）的情况下，其中 myNestedClass 对象确实具有相同的 a 和 b 值，我只在 propertygrid 中看到类似这样的内容：

```
…
MyNestedClassObject |
   A                | 1
   B                | 2
… 
```

我知道 propertygrid 旨在仅显示多个对象的公共属性，子属性 a 和 b 是正确的。但是为什么可扩展属性的所谓“类型转换器”（或父）行确实有一个空值部分，尽管子属性 a 和 b 对于所有对象都是相同的？

任何人都可以对此有所了解和/或可以帮助我解决这个问题吗？

提前谢谢了

约臣

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-12T12:38:32.233

在对该问题进行更多研究之后，我找到了解决方案，这要归功于另一篇 stackoverflow 文章：

[PropertyGrid 多。控件选择，属性集上的空异常？](https://stackoverflow.com/questions/9619769/propertygrid-mult-controls-select-null-exception-on-property-set)

The author had the same issue with expandable properties when multiple objects are selected where all properties are common to all instances. “typeconverter”（或父）行保持空白，另一方面显示子属性。

他注意到在其实例显示在属性网格中的类中覆盖方法 Equals。是的，就是这样。

非常感谢 greggorob64 ！

亲切的问候

# ruby-on-rails - 铁路资产管道和页面特定文件

> ID：10543235
> 
> 赞同：1
> 
> 时间：2012-05-10T22:52:15.573
> 
> 标签：ruby-on-rails, asset-pipeline

在我的 rails 3.1 应用程序中，我有要为每个控制器中的每个操作加载的特定文件，例如 users#index 需要和 index.js 和 index.css 文件，而 users#show 需要 show.js 和 show.css 文件等.

但是，当我运行 rake assets:precompile 时，所有内容都会被合并到一个大的 application.css 和 application.js 文件中，这让我的观点大打折扣。除了在使用 rake assets:precompile 时执行“config.assets.precompile += %w(index.js show.css)”方法来避免这种行为之外，还有其他方法吗？我必须以不同的方式组织和命名我的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:09:26.453

我通过在我的 CSS 和 JavaScript 中应用适当的范围解决了这个问题。例如，我的布局文件的主体标签以下列方式被赋予一个动态 id：

```
<body id="<%= "#{params[:controller]}-#{params[:action]}" %>" data-controller=<%= params[:controller] %> data-action=<%= params[:action] %>> 
```

在我的 users_index.css 文件中，该操作的范围和样式使用：

```
body#users-index { .. } 
```

因此，我的 CSS 清单如下所示：

```
/*
 *= require self
 *= require jqueryUi
 *= require_tree .
*/ 
```

至于 JavaScript，我执行以下操作：

```
APP = { init: function() { ... }, 
        users = { 
                  index: function() { 
                           //jQuery bindings here; 
                  }, 
                  show: function() {  
                        //More jQuery bindings here for this action;
                  }
         } 
       } 
```

现在，当页面加载时，我执行以下操作：

```
(function() {
    action = $("body").data("action");
    controller = $("body").data("controller");
    APP.init();
    APP[controller][action]();
          })(); 
```

有点解决方法，但我看到 Paul Irish 和他的伙伴们做 JavaScript 的事情，我看到 RailsCasts 的 Ryan Bates 做 CSS 方法，所以我想这不可能是 100% 的坏习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T01:56:55.023

我猜我会说包含文件的顺序搞砸了。

您通常需要的是首先在您的 mamisfest 中的任何样板代码，然后是您自己的站点范围的工作表，最后是操作表。

所以你的 application.css 可能看起来像这样：

```
/*
 *= require reset
 *= require formtastic
 *= require jquery-ui
 *= require formtastic_overrides
 *= require site
 *= require_tree . 
*/ 
```

可能会搞砸的另一件事是`p{color:green}`在关联文件中应用广泛的规则（例如 ），并期望仅针对该操作提供该规则。

这不是管道的工作方式，如果这是您想要实现的目标，您将需要为这些视图应用更具体的规则。

就个人而言，我不使用所有这些生成的文件。我更喜欢将我的 CSS 放在几个文件中，这样我就可以在（大部分）一个地方看到它。我发现这更容易管理，但 YMMV！

# html - Youtube Iframe Embed 是否已停止为某些视频工作？

> ID：10543238
> 
> 赞同：2
> 
> 时间：2012-05-10T22:52:40.630
> 
> 标签：html, iframe, youtube, embed, youtube-api

我在这里为此创建了一个 JS 小提琴：

[http://jsfiddle.net/lindseymysse/6C65Y/1/](http://jsfiddle.net/lindseymysse/6C65Y/1/)

错误：

从昨天晚上开始，我正在处理的网站上的一些视频停止为用户加载。我们正在使用 iframe 嵌入，并尝试使用 html5 做尽可能多的事情。

要重现此错误：

如果用户是

1.  未注册/尚未决定打开 html5 视频或

2.  用户已开启 html5 试用，视频将无法在 MacBook Chrome、Firefox 或 Safari 上播放。

如果用户打开然后关闭 html5 试用版，或者（如果他们已经注册了 html5 试用版）只是关闭，嵌入将起作用

一些线索：

来自损坏视频的调试如下所示：

*   调试播放质量=小
*   斯科维尔=1
*   cfps=0
*   pd=0
*   MOS=0
*   调试 flashVersion=MAC 11%2C2%2C202%2C235
*   fs=0
*   hl=en 美国
*   调试日期 = 2012 年 5 月 10 日星期四 14%3A40%3A14 GMT%2D0700
*   iframe=1
*   乳酸=空
*   视频帧率=0
*   vq=自动
*   h=355
*   阶段FPS=24
*   **调试错误=未指定**
*   tpmt=0
*   成帧器=http%253A%252F%252Ffiddle%2Ejshell%2Enet%252FunPrz%252F5%252Fshow%252F
*   体积=100
*   丢弃帧=0
*   w=473
*   el=详情页
*   屏幕=1440
*   屏幕 = 900
*   调试 videoId=
*   玩家w=640
*   调试源数据=

**多一点：**

*   Mozilla 给出错误：-- Unexpected value align parsing preserveAspectRatio 属性。
*   我们发现这个嵌入被破坏的视频是即使在 html5 试用版中也可以作为 Flash 视频播放的视频。

请查看我的 jsFiddle 以重现该错误。

这是什么原因造成的？此错误不会在 youtube api onError 调用中引发错误，有没有办法发现它以便我们处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T03:20:34.310

YouTube 确实在过去**几天**更改了他们的 API，并且他们的 HTML5 视频播放器的 flash 回退失败了。其他用户报告一个黑色或空白的 YouTube 播放器屏幕和 0:00 的视频持续时间，这是该错误的其他症状，一旦出现 SWF 播放器。

我用一种解决方法更新了您的 jsfiddle.net，以仅从最初开始使用 flash 播放器，这样可以防止 flash 问题的回退，直到它得到解决。

它保留您的 /embed/ 方案，因此使用的任何自定义 API 仍然有效。

变通方法是添加没有其他视频值和逗号的播放列表参数，通常用于分隔播放列表中的视频，从而实现**播放列表为 1**。

当然，如果您已经在使用播放列表，那么您将不会受到此错误的影响，因为播放列表是目前唯一强制 Flash 播放器在 /embed/ URL 中正确呈现的 Flash 专有项目。

这是更新：

[http://jsfiddle.net/6C65Y/3/](http://jsfiddle.net/6C65Y/3/)

状态报告：这个 YouTube API 错误不再是问题。

# actionscript-3 - 禁用上下文菜单 - Flash Professional 导出 (Flash 11.2 - CS6)

> ID：10543240
> 
> 赞同：2
> 
> 时间：2012-05-10T22:53:01.517
> 
> 标签：actionscript-3, flash, right-click

Flash 11.2 添加了将右键单击鼠标事件附加到 MovieClip 的功能。
前任：

```
var mc:MovieClip = new MovieClip
mc.addEventListener(MouseEvent.RIGHT_MOUSE_DOWN, myFunction); 
```

附加此侦听器后，右键单击此对象时应该不可能弹出上下文菜单。Flash 禁用该功能。

当我从 Flash Professional (CS6 Mac) 导出新的 SWF 并且该 SWF 嵌入在浏览器中时，它可以按预期工作。右键单击不会产生上下文菜单。

但是，Flash Professional 中的 Flash 播放器并非如此。导出后在 Flash Professional 中显示的 Flash 播放器不会隐藏上下文菜单。 ![不正确的行为](../Images/336e0c0cd2168fe2558200198e41913b.png)

虽然我可以通过简单地导出 SWF 并在浏览器中对其进行测试来进行开发，但我失去了 Flash Professional 提供的所有调试功能。

我该如何解决这个问题？

# 更新 1

这个问题与导出到 11.2 无关——我已经可以做到了。[本教程](https://blogs.adobe.com/rgalvan/2011/11/adding-fp11-support-to-flash-pro-cs5-and-cs5-5.html)中提到的所有更改都已通过 Flash Professional CS6 的基本安装进行。

跑步：

```
trace(flash.system.Capabilities.version) 
```

结果是：

> MAC 11,2,202,228

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:11:05.103

有趣的是，我原以为会包含 11.2，但无论如何您都可以在 Flash Professional 中添加新的 Flash Player 版本。

以下是执行此操作的一些说明（向下滚动到手动安装）：

[https://blogs.adobe.com/rgalvan/2011/11/adding-fp11-support-to-flash-pro-cs5-and-cs5-5.html](https://blogs.adobe.com/rgalvan/2011/11/adding-fp11-support-to-flash-pro-cs5-and-cs5-5.html)

这些说明适用于 CS5 或 CS5.5，但可能与 CS6 大致相同。确保更改需要更改的内容 - 例如 playerglobal 应该是[https://fpdownload.macromedia.com/pub/flashplayer/updaters/11/playerglobal11_2.swc](https://fpdownload.macromedia.com/pub/flashplayer/updaters/11/playerglobal11_2.swc)而不是他们链接到的 11.0。

# c++ - 为 windows mobile 项目编译 winnt.h、winbase.h 和 excpt.h 中的错误

> ID：10543242
> 
> 赞同：1
> 
> 时间：2012-05-10T22:53:18.700
> 
> 标签：c++, windows, mobile

我有一个编译成功的桌面项目，但是在我为项目添加新配置以支持 Windows Mobile 平台后，我收到以下错误：

```
error C2146: syntax error : missing ';' before identifier 'ContextRecord' winnt.h
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int winnt.h

error C2146: syntax error : missing ';' before identifier 'LPCONTEXT'   winbase.h
error C2040: 'PCONTEXT' : '_CONTEXT *' differs in levels of indirection from 'int'  excpt.h 
```

该项目不包含winnt.h，但包含windows.h、windbase.h。我在谷歌上搜索我必须更改项目属性->配置属性->C/C++->预处理器->定义以添加像_MBCS，或添加$（*ARCHFAM*），$（ARCHFAM）。或者通过将 windows.h 放在其他头文件的顶部来更改我也这样做过的头文件的顺序，但都不能修复错误。

有什么建议可以解决这些问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:22:03.543

`#include<windows.h>`在所有这 3 个中，windows.h 将它们全部拖入。这是您需要的唯一包含。它涵盖了所有 windows api 的 80%，减去操作系统的一些专门的离散方面（例如直接 2d、加密等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T11:16:27.727

我也遇到了这些错误。我的问题是我忘记了一个“;” 在我的一个头文件中的类定义后面。

代替：

```
class myClass
{
   ...
}; 
```

我有：

```
class myClass
{
    ...
} 
```

也许它可以帮助某人...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-10T22:56:30.810

有必要手动更正文件 winnt.h 中的语法错误

行： typedef void *POINTER_64 PVOID64;

我们更正： typedef void *POINTER_64, *PVOID64;

或两个： typedef void *POINTER_64; 类型定义无效*PVOID64；

错误消失

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-01T01:20:50.487

我的 dll 头文件中有 windows.h。
将其从头文件中移出并仅放入需要 windows.h 的 .cpp 项目中并且它可以工作。

DLL 的控制台测试应用程序在尝试包含一堆 Windows 内容时发疯了。

# ruby-on-rails - 为什么我的 html 没有出现在我的 ruby on rails 应用程序中

> ID：10543245
> 
> 赞同：0
> 
> 时间：2012-05-10T22:53:32.967
> 
> 标签：ruby-on-rails

所以我正在尝试添加对此应用程序中的微博的回复 [https://github.com/railstutorial/sample_app_2nd_ed](https://github.com/railstutorial/sample_app_2nd_ed)

我想我弄清楚了所有的模型和控制器的东西，但这不是重点。

当我尝试向 app/views/microposts/_micropost.html.erb 添加回复链接时。它永远不会起作用。

```
<li>
  <span class="content"><%= micropost.content %></span>
  <p>this text doesnt show up!</p>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method:  :delete,
                                     confirm: "You sure?",
                                     title:   micropost.content %>
  <% end %>

  <%= link_to "reply", new_comment_path(:micropost_id => comment) %> |

  <p> why isnt this working!!?</p>
</li> 
```

如您所见，我已尝试在第 3 行、第 13 行和第 15 行添加基本文本或回复链接。它永远不会出现。我做错了吗？我应该以什么格式放置回复链接/甚至是我想要显示的基本文本？

这是我的微柱控制器代码

```
class MicropostsController < ApplicationController
  before_filter :signed_in_user
  before_filter :correct_user,   only: :destroy

  def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
      flash[:success] = "Micropost created!"
      redirect_to root_path
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end

  def destroy
    @micropost.destroy
    redirect_back_or root_path
  end

  private

    def correct_user
      @micropost = current_user.microposts.find_by_id(params[:id])
      redirect_to root_path if @micropost.nil?
    end
end 
```

这是我的评论控制器

```
class CommentsController < ApplicationController 
  def create 
    @comment = @micropost.comments.new(params[:comment]) 
    if @comment.save 
      redirect_to @user
    else 
      redirect_to @user
    end 
  end 

  def destroy
    @comment.destroy
    redirect_back_or root_path
  end
end 
```

同样根据要求，这里是显示微帖子部分的 show.html.erb 文件

```
<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.name %>
      </h1>
    </section>
  </aside>
  <div class="span8">
    <%= render 'follow_form' if signed_in? %>
    <% if @user.microposts.any? %>
      <h3>Microposts (<%= @user.microposts.count %>)</h3>
      <ol class="microposts">
        <%= render @microposts %>
      </ol>
      <%= will_paginate @microposts %>
    <% end %>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T15:55:39.550

在 show.html.erb 中，您必须添加以下行以在显示视图中呈现您的“微帖子”部分。

**<%= 渲染“微博”%>**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:23:19.700

你能发布你的控制器代码吗？通常，您在控制器中设置成员变量，因此您的 erb 如下所示：

```
<%= @micropost.content %> 
```

你的控制器是这样的：

```
def show  
  @micropost = Micropost.find(params[:id])  
end 
```

# c# - 随机偏移的异步 IO

> ID：10543252
> 
> 赞同：1
> 
> 时间：2012-05-10T22:54:46.853
> 
> 标签：c#, .net, file-io, asynchronous

我们有一个 20 GB 的文件，我们想以随机偏移量从中读取数据，因此它不是顺序读取。我打算使用异步 IO，但是我注意到了这个限制——

正如我所说，我的要求是以随机偏移量读取。但是 BeginRead API 不会在文件中使用偏移量，它只会在正在读取的缓冲区中使用偏移量 (http://msdn.microsoft.com/en-us/library/zxt5ahzw)

所以我唯一的选择是使用 FileStream.Seek 。但是，问题在于如果我使用的是异步 IO

FileStream fs = Foo.txt 被两个线程使用

```
Thread 1                               Thread 2

fs.Seek(offset1)                       
(Thread 1 gets preempted)              
                                       fs.Seek(offset2)        
                                       fs.BeginRead
fs.BeginRead 
```

如您所见，如果线程 1 在 Seek 到偏移 1 之后被抢占，那么线程 1 最终会从 offset2 读取，这不是本意。

这是否意味着我必须使用锁？这会破坏异步 IO 的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:42:26.400

完全不清楚这是否适用于您的情况，但看看[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)，它可能会给您一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:39:11.553

如果您不希望线程彼此等待，那么**每个线程都需要一个 Stream**，即使这些访问是异步发生的。

现在，如果您的线程大部分时间都在做其他事情，那么**您可以按需打开流并在完成后关闭它**。流封装了原生资源、文件句柄，所以你当然不应该有数百个它们，什么都不做。

最后一个选项是**管理开放流池**。每当线程需要从文件中读取时，将其中一个流分发给线程。完成后，应将流返回到池中以供其他线程使用。您当然必须**同步对池的访问**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T23:08:01.790

每个文件流都有自己的偏移量，所以这应该可以工作 - 请参见下面的示例（完全同步）。

```
public class StackOverflow_10543252
{
    public static void Test()
    {
        byte[] bytes = Enumerable.Range(0, 256).Select(i => (byte)i).ToArray();
        File.WriteAllBytes("a.bin", bytes);
        FileStream fs1 = File.OpenRead("a.bin");
        fs1.Seek(40, SeekOrigin.Begin);
        FileStream fs2 = File.OpenRead("a.bin");
        fs2.Seek(120, SeekOrigin.Begin);
        Console.WriteLine(fs1.ReadByte()); // should be 40
        Console.WriteLine(fs2.ReadByte()); // should be 120
        fs1.Close();
        fs2.Close();
        File.Delete("a.bin");
    }
} 
```

**更新**：发布此答案后看到了编辑。如果您只需要 1 个`FileStream`指针（可能需要也可能不需要），那么您需要使用一些锁定来防止两个并发操作相互重叠。但是如果您可以使用多个 FileStream 指针，那么您的生活会更轻松。

顺便说一句，您可以使用同步调用进行非顺序读取 - 它不必是异步的（上面的示例就是这样做的）。添加异步操作通常会带来额外的复杂性，因此您应该看看它是否真的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T01:18:03.517

您可以使用共享文件访问选项进行读取。

如果您不需要读/写共享并且它只是读取，则可以减少 FileAccess/FileShare 属性。

```
Using f As FileStream = mTransferFile.Open(FileMode.OpenOrCreate, 
    FileAccess.ReadWrite, FileShare.ReadWrite)
    Dim newPosition As Long = t.ID * mTransferInfo.BlockSize
    f.Position = newPosition

    'Do stuff here. Open another filestream etc.

End Using 
```

# regex - 如何在代码文件的代码构造（foreach 循环）中查找字符串？

> ID：10543256
> 
> 赞同：0
> 
> 时间：2012-05-10T22:55:35.480
> 
> 标签：regex, visual-studio, visual-studio-2010, code-analysis

我四处寻找类似的问题，但找不到。

在我的代码文件中的 Visual Studio 中，我想找到包含特定代码字符串的所有 foreach 循环？我可以轻松地查找所有 foreach，但结果是数百个，双击每个进行手动检查太难了？

例如。

```
foreach(var foo in foos)
{
Console.WriteLine("I need search for the string 'Console' inside the foreach.");
} 
```

我想到了正则表达式，但我不知道如何写。不确定是否有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:00:09.640

嗯...我想一个正则表达式将是一个好方法。我不是 Visual Studio 用户，但这是您可以使用的正则表达式：

```
foreach\([^\)]+\)[^}]+(YOUR SEARCH STRING HERE)[^}]+} 
```

# javascript - 如何使用javascript选择视口中两点之间的所有内容？

> ID：10543258
> 
> 赞同：0
> 
> 时间：2012-05-10T22:56:09.933
> 
> 标签：javascript, dom

我需要找到一种方法来选择视口中两点之间的所有内容。我也需要该选择来跨越 HTML 元素。

考虑一个带有两个可移动框的页面。这些框由用户围绕内容移动。它们绝对位于屏幕上所有内容的前面。移动框时，我需要选择它们之间的所有内容。有没有人遇到过类似的事情？我基本上想做的是模仿智能手机选择句柄。

我知道有一个 javascript 函数 document.elementFromPoint(x, y)。在这种情况下这不起作用，因为这些框将被选为该点的最顶部元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:22:42.690

```
var leftBound = Math.min(point1.x, point2.x);
var rightBound = Math.max(point1.x, point2.x);
var topBound = Math.min(point1.y, point2.y);
var bottomBound = Math.max(point1.y, point2.y);

$(".").filter(function(x) {
    var offset = $(this).offset();
    var top=offset.top, bottom=top+$(this).height;
    var left=offset.left, right=left+$(this).width;
    var corners = [[left,top], [left,bottom], [right,top], [right,bottom]];

    function inBox(point) {
        var x=point[0], y=point[1];
        return (leftBound<=x && x<=rightBound) && (topBound<=y && y<=bottomBound)
    }

    // overlap-based selection policy
    //   selects if one or more corners is in selection
    return corners.some(inBox);

    // overlap-based selection policy #2
    //   selects if any part of element is in selection
    return corners.some(inBox) //|| ... slightly more complicated logic

    // only-wholly-enclosed selection policy
    //   selects only if entire element is in selection
    return corners.every(inBox);
}) 
```

`$(".")`如果您不想要 jQuery，请替换为您最喜欢的基于递归回调的 DOM 遍历方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:29:09.247

对于 WebKit 和 Opera，您可以这样做：

*   获取拖动手柄的坐标
*   隐藏拖动手柄
*   调用[`document.caretPositionFromPoint(dragHandleX, dragHandleY)`](http://www.w3.org/TR/cssom-view/#dom-document-caretpositionfrompoint)每个拖动手柄
*   从上一步中获得的两个插入符号位置（每个位置由一个节点和该节点内的偏移量组成）创建一个新范围
*   选择这个范围
*   取消隐藏拖动手柄

在 Firefox 中，鼠标事件`rangeParent`和`rangeOffset`属性可能会有所帮助，但我认为您需要在事件触发之前以某种方式隐藏拖动句柄。

在 IE 中，您可以执行以下操作：

*   获取拖动手柄的坐标
*   隐藏拖动手柄
*   使用为每个拖动手柄创建一个 TextRange`document.body.createTextRange()`
*   调用[`moveToPoint(dragHandleX, dragHandleY)`](http://msdn.microsoft.com/en-us/library/ie/ms536632%28v=vs.85%29.aspx)每个 TextRange
*   使用以下命令将第一个 TextRange 扩展到第二个 TextRange 结束[`setEndPoint()`](http://msdn.microsoft.com/en-us/library/ms536745%28v=vs.85%29.aspx)：`firstTextRange.setEndPoint(secondTextRange)`
*   选择这个范围：`firstTextRange.select()`
*   取消隐藏拖动手柄

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:36:37.730

从它的声音来看，最好自己跟踪元素位置并计算在您的 javascript 代码中将触摸哪个元素。这将减少您与 DOM 的交互。

如果不是我听说过或用于从他人背后获取元素的唯一方法，请参见此处：http: [//www.vinylfox.com/forwarding-mouse-events-through-layers/](http://www.vinylfox.com/forwarding-mouse-events-through-layers/)

它本质上涉及隐藏暂时接收原始元素的元素，然后使用 elementFromPoint() 查找下面的元素。在您的情况下，您可以在两个框之间执行此操作并重复，直到您点击包含元素。如果您有大面积和大量元素，这可能会占用大量资源。

我只在无论如何都想隐藏顶部元素的情况下使用它，但是您可以对其进行测试以查看是否存在可见的显示失真。

# join - 使用 VB.net 2010 在测试文件中加入备用行

> ID：10543271
> 
> 赞同：0
> 
> 时间：2012-05-10T22:57:59.023
> 
> 标签：join

我有以下文件：

```
Arijit
Ghosh.1.100.0
Arindam
Roy.3.4.678 
```

现在我想要下面的输出

```
Arijit.Ghosh.1.100.0
Arindam.Roy.3.4.678 
```

我正在使用 Vb.net 2010。我正在使用流阅读器读取文件并使用流写入器进行写入。我不想使用数据表请帮助。很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:40:41.343

说您的输入文件`file.txt`具有以下值

```
Arijit
Ghosh.1.100.0
Arindam
Roy.3.4.678 
```

你有一个`output.txt`要写的

```
 Using writer As StreamWriter = New StreamWriter("D:\output.txt")
            Using reader As StreamReader = New StreamReader("D:\file.txt")
                Dim isSecondLine As Boolean = False
                Dim line As String = String.Empty
                While Not reader.EndOfStream
                    If Not isSecondLine Then
                        line = reader.ReadLine()
                        isSecondLine = True
                    Else
                        line = line + "." + reader.ReadLine()
                        isSecondLine = False
                        writer.WriteLine(line)
                    End If
                End While
            End Using
        End Using 
```

# java - 对话框关闭后java swing按钮无法正确重绘

> ID：10543273
> 
> 赞同：5
> 
> 时间：2012-05-10T22:58:03.770
> 
> 标签：java, swing, awt, modal-dialog, repaint

我有一个 JButton 并按下它会打开一个模式对话框。当我关闭对话框时，按钮看起来仍然处于按下状态，直到我移动鼠标。我认为这是因为 JDialog 在 AWT 组件之上打开（它是使用 AWT Canvas 的第 3 方组件，我无法更改）。如果我打开对话框并在一个摆动组件上关闭它，那么它可以正常工作。

我尝试在对话框中添加一个窗口侦听器并在对话框关闭时重新绘制整个框架（使用 repaint 和 paintImmediately），但这不起作用。对于如何解决这个问题，有任何的建议吗？

这是一个 SSCCE 示例。按下按钮，然后关闭对话框。请注意焦点边框仍在按钮周围，直到将鼠标移到绿色部分上。

```
import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class DialogExample
{

    public static void main(String[] args) throws Exception
    {

        final JFrame jf = new JFrame("AWT/Swing Dialog Test");
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JButton button = new JButton("show dialog");
        final Canvas canvas = new Canvas() {
            @Override
            public void paint(Graphics g)
            {
                g.setColor(Color.RED);
                g.fillRect(0, 0, getWidth(), getHeight());
            }
        };
        canvas.setPreferredSize(new Dimension(200,200));

        button.setAction(new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                JDialog dlg = new JDialog(jf,"modal");
                dlg.add(new JLabel("hello"));
                dlg.setModal(true);
                dlg.pack();
                dlg.setLocationRelativeTo(canvas);
                dlg.setVisible(true);
            }            
        });
        button.setText("press me");
        button.setFocusable(false);
        JPanel panel = new JPanel();
        panel.setBackground(Color.GREEN);        
        panel.setPreferredSize(new Dimension(200, 200));
        jf.setLayout(new BorderLayout());
        panel.add(button);
        jf.add(panel, BorderLayout.NORTH);
        jf.add(canvas, BorderLayout.SOUTH);
        jf.setSize(new Dimension(400,400));
        jf.setVisible(true);
    }    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T01:12:45.607

作为权宜之计，您可以在对话框返回时清除翻转状态`actionPerformed()`：

```
@Override
public void actionPerformed(ActionEvent e) {
    JDialog dlg = new JDialog(jf, "modal");
    dlg.add(new JLabel("hello"));
    dlg.setModal(true);
    dlg.pack();
    dlg.setLocationRelativeTo(canvas);
    dlg.setVisible(true);
    button.getModel().setRollover(false);
} 
```

# ios - 使用 Simperium 构建 iOS 应用程序时出现链接器错误

> ID：10543277
> 
> 赞同：1
> 
> 时间：2012-05-10T22:58:38.400
> 
> 标签：ios, simperium

将 Simperium 集成到我的应用程序时出现链接器错误：

> ld：/Users/zulfi_shah/Documents/ContactsJournal-TestSimperium/SimpleList/Simperium.framework/Simperium(DDASLLogger.o) 和 /Users/zulfi_shah/Library/Developer/Xcode/DerivedData/SimpleList-cxdtxuubxyczhgcyxbixtjtvzctBuild 中的重复符号 _OBJC_CLASS_$_DDASLLogger /Intermediates/SimpleList.build/Debug-iphonesimulator/SimpleList.build/Objects-normal/i386/DDASLLogger.o for architecture i386 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

问题似乎出在 CocoaHTTP 包中包含的 DDASLLogger 上。我之前也看到了与可达性类相同的问题。如何确保 Simperium 框架与我的二进制文件中的其他库配合得很好？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:32:17.147

我们正在更新我们的库以避免这些名称冲突。这应该很快得到解决。

同时，如果您遇到此问题（使用 Simperium 或任何其他库），您可以从目标中删除您自己的冲突库版本。您可以通过以下几种方式执行此操作：

1.  选择冲突库的每个对应文件，打开右侧的浏览器，然后取消选中目标名称旁边的框。

2.  选择您的项目，然后选择您的目标，转到 Build Phases | 编译源，并删除冲突库的源文件。

这不是很友好，因此我们会尽快修复它。

# python - Python simplejson没有转换为真

> ID：10543278
> 
> 赞同：-1
> 
> 时间：2012-05-10T22:58:48.310
> 
> 标签：python, json, simplejson

为什么这不起作用？我正在阅读 simplejson JsonDecoder，true 应该是可解析的并翻译为 True。

```
% python
>>> import simplejson as json
>>> print json.loads({"bool":true})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'true' is not defined
>>> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T23:15:57.940

的输入`loads`应该是一个字符串：

```
>>> json.loads('{"bool":true}')
{u'bool': True} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T23:00:24.297

`json.loads`接受一个字符串，它必须用引号括起来，像这样：

```
o = json.loads(u'{"bool":true}')
print(o) # outputs  {u'bool': True} 
```

请注意，`u`（在 Python 2.x 中使字符串成为*字符串*）对于此输入是可选的，并且仅当您使用非 ASCII 字符（例如 ü、é、编或 ℝ）时才需要。

# objective-c - 日期格式问题

> ID：10543283
> 
> 赞同：0
> 
> 时间：2012-05-10T22:59:15.590
> 
> 标签：objective-c, ios5

我正在尝试格式化由包含此格式日期的数组给出的 NSString：

日/月/年

我正在尝试使用以下代码对其进行格式化：

```
NSDate *fechaDescuento = [[NSDate alloc] init];

        NSDateFormatter *dateformater = [[NSDateFormatter alloc] init];

        NSString *baddate = [[NSString alloc] initWithString:[NSString stringWithFormat:@"%@",  descuento.fechaDescuento]];

        [dateformater setDateFormat:@"dd/MM/yyyy"];

        [dateformater setLocale:[NSLocale currentLocale]];

        fechaDescuento = [dateformater dateFromString:baddate]; 
```

例如，如果错误的日期值是 11/05/2012，则 fechaDescuento 的格式为：

2012-05-10 22:00:00 +0000

总是在前一天使用另一种格式。

拜托，你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:14:02.747

我认为如果您在通话`[dateformatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];`之前添加`dateFromString:`，我认为它会显示您更接近您的期望。

# jquery - 是否可以在 CSS3 中的同一元素上链接动画

> ID：10543290
> 
> 赞同：1
> 
> 时间：2012-05-10T23:00:11.127
> 
> 标签：jquery, html, animation, css, webkit

我有任何想在 CSS3 中旋转和从右到左移动的图像。经过短暂的延迟后，我想将图像从其新的当前状态向上移动并将其淡出容器。

我可以很容易地使用关键帧和一些 jQuery 来触发动画来实现第一个动画，但是每当我尝试添加第二个动画时，图像都会返回到它的初始状态，然后执行第二个动画。这是我到目前为止所拥有的

```
@-webkit-keyframes image-slide-right-to-left {
    0%   { opacity: 1; }
100% { opacity: 1;  -webkit-transform: translate(-400px, 60px) rotate(-55deg);}
}

@-webkit-keyframes image-slide-up-and-out {
        0%   { opacity: 1; }
        100% { opacity: 1;  -webkit-transform: translate(400px, 260px) rotate(-55deg);}
    }

.image-slide-right-to-left{
        -webkit-animation: image-slide-right-to-left 3s, image-slide-up-and-out 3s;
        -moz-animation:    image-slide-right-to-left 3s, image-slide-up-and-out 3s;
        -ms-animation:     image-slide-right-to-left 3s, image-slide-up-and-out 3s;

        -webkit-animation-fill-mode: forwards;
        -moz-animation-fill-mode: forwards;
        -ms-animation-fill-mode: forwards;

        -webkit-animation-delay: 4s, 8s;
        -moz-animation-delay: 4s, 8s;
        -ms-animation-delay: 4s, 8s;

        animation-timing-function: ease-in-out;
    }

<script>
    $(window).load(function() {
        $('.feature1 .implant').addClass('image-slide-right-to-left');
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:15:36.610

是的，可以在同一个元素上链接动画：

**例子：**

```
.animate-this {
   -webkit-animation:
      first-animation 2s infinite,
      another-animation 1s;
} 
```

[谷歌先生](https://www.google.com/search?client=safari&rls=en&q=webkit%20animation&ie=UTF-8&oe=UTF-8)的简单搜索！

您可以在此处阅读有关[动画语法的好教程！](http://css-tricks.com/snippets/css/webkit-keyframe-animation-syntax/)

来自[Stacker 同事的文章！](http://css3.bradshawenterprises.com/)

一些元素被[链接动画](http://www.the-art-of-web.com/css/css-animation/)的一个很好的例子。

* * *

**已编辑**

添加了一个[简单的 Fiddle 示例](http://jsfiddle.net/zuul/Ctpym/)，其中 div 使用动画 gif 设置为背景进行动画处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:16:46.987

我有我正在寻找的解决方案。不确定这是否是最好的方法，但无论如何都在这里

```
<cfsavecontent variable="tempHeadCode">
<style type="text/css">
    sup{font-size:0.5em;}

    #featureAnimation {
        height: 350px;
        overflow: hidden;
        position: relative;
        margin: 0 0 -30px -96px;
        width: 960px;
        color:#434343;          
    }

    .feature1 .title {
        position: absolute;
        top: 20px;
        left: 5%;
        font-size:3em;
        line-height:.8em;       
        letter-spacing:-2px;
        word-spacing:-1px;  
    }

    .feature1 .title2 {
        position: absolute;
        top: 150px;
        left: 5%;
        font-size:2em;
        line-height:.8em;       
        letter-spacing:-2px;
        word-spacing:-1px;  
    }

    .feature1 .copy {
        position: absolute;
        bottom: 0px;
        right: 5%;
        font-size:1.4em;
        width:30%;
        opacity:0;
    }

    .implant{
        position: absolute;
        right: 1%;
        bottom: 0;
    }

    .image-slide-right-to-left{

        transform: translate(-400px, 70px) rotate(-60deg);
        -ms-transform: translate(-400px, 70px) rotate(-60deg);
        -moz-transform: translate(-400px, 70px) rotate(-60deg);
        -o-transform: translate(-400px, 70px) rotate(-60deg);
        -webkit-transform: translate(-400px, 70px) rotate(-60deg);

        transition-delay: 2s;
        -ms-transition-delay: 2s; 
        -moz-transition-delay: 2s;          
        -o-transition-delay: 2s; 
        -webkit-transition-delay: 2s; 

        transition-timing-function: ease-in-out;
        -ms-transition-timing-function: ease-in-out;
        -moz-transition-timing-function: ease-in-out; 
        -webkit-transition-timing-function: ease-in-out; 
        -o-transition-timing-function: ease-in-out;

        transition-duration: 2s;
        -ms-transition-duration: 2s;
        -moz-transition-duration: 2s;
        -webkit-transition-duration: 2s;
        -o-transition-duration: 2s;
    }       

    .title-fly-out-top-left{

        -transform: translate(-200px, -200px) rotate(0deg);
        -moz-transform: translate(-200px, -200px) rotate(0deg);
        -ms-transform: translate(-200px, -200px) rotate(0deg);
        -o-transform: translate(-200px, -200px) rotate(0deg);
        -webkit-transform: translate(-200px, -200px) rotate(0deg);

        transition-delay: 2s;
        -ms-transition-delay: 2s; 
        -moz-transition-delay: 2s;          
        -o-transition-delay: 2s; 
        -webkit-transition-delay: 2s; 

        transition-timing-function: ease-in-out;
        -ms-transition-timing-function: ease-in-out;
        -moz-transition-timing-function: ease-in-out; 
        -webkit-transition-timing-function: ease-in-out; 
        -o-transition-timing-function: ease-in-out;

        transition-duration: 3s;
        -ms-transition-duration: 3s;
        -moz-transition-duration: 3s;
        -webkit-transition-duration: 3s;
        -o-transition-duration: 3s;

        opacity: 0;
    }

    .sub-title-fly-out-left{        

        -transform: translate(-400px, 0px) rotate(-10deg);
        -moz-transform: translate(-400px, 0px) rotate(-10deg);
        -ms-transform: translate(-400px, 0px) rotate(-10deg);
        -o-transform: translate(-400px, 0px) rotate(-10deg);
        -webkit-transform: translate(-400px, 0px) rotate(-10deg);

        transition-delay: 2s;
        -ms-transition-delay: 2s; 
        -moz-transition-delay: 2s;          
        -o-transition-delay: 2s; 
        -webkit-transition-delay: 2s;           

        transition-duration: 2.5s;
        -ms-transition-duration: 2.5s;
        -moz-transition-duration: 2.5s;
        -webkit-transition-duration: 2.5s;
        -o-transition-duration: 2.5s;

        transition-timing-function: ease-in-out;
        -ms-transition-timing-function: ease-in-out;
        -moz-transition-timing-function: ease-in-out; 
        -webkit-transition-timing-function: ease-in-out; 
        -o-transition-timing-function: ease-in-out;

        opacity: 0;
    }

    .image-slide-down-and-out{

        transform: translate(-400px, 450px) rotate(-60deg);
        -ms-transform: translate(-400px, 450px) rotate(-60deg);
        -moz-transform: translate(-400px, 450px) rotate(-60deg);
        -o-transform: translate(-400px, 450px) rotate(-60deg);
        -webkit-transform: translate(-450px, 400px) rotate(-60deg);

        transition-delay: 6s;
        -ms-transition-delay: 6s; 
        -moz-transition-delay: 6s;          
        -o-transition-delay: 6s; 
        -webkit-transition-delay: 6s; 

        transition-duration: 3s;
        -ms-transition-duration: 3s;
        -moz-transition-duration: 3s;
        -webkit-transition-duration: 3s;
        -o-transition-duration: 3s;

        transition-timing-function: ease-in-out;
        -ms-transition-timing-function: ease-in-out;
        -moz-transition-timing-function: ease-in-out; 
        -webkit-transition-timing-function: ease-in-out; 
        -o-transition-timing-function: ease-in-out;

        opacity: 0;
    }

    .copy-fade-in-bottom-mid {

        -transform: translate(0px, -100px) rotate(0deg);
        -moz-transform: translate(0px, -100px) rotate(0deg);
        -ms-transform: translate(0px, -100px) rotate(0deg);
        -o-transform: translate(0px, -100px) rotate(0deg);
        -webkit-transform: translate(0px, -100px) rotate(0deg);

        transition-delay: 3s;
        -ms-transition-delay: 3s; 
        -moz-transition-delay: 3s;          
        -o-transition-delay: 3s; 
        -webkit-transition-delay: 3s; 

        transition-duration: 3s;
        -ms-transition-duration: 3s;
        -moz-transition-duration: 3s;
        -webkit-transition-duration: 3s;
        -o-transition-duration: 3s;

        transition-timing-function: ease-in-out;
        -ms-transition-timing-function: ease-in-out;
        -moz-transition-timing-function: ease-in-out; 
        -webkit-transition-timing-function: ease-in-out; 
        -o-transition-timing-function: ease-in-out;

        opacity: 1 !important;
        display:block;
    }

    .copy-fade-out-mid-top {

        transform: translate(0px, -400px) rotate(0deg);
        -moz-transform: translate(0px, -400px) rotate(0deg);
        -ms-transform: translate(0px, -400px) rotate(0deg);
        -o-transform: translate(0px, -400px) rotate(0deg);
        -webkit-transform: translate(0px, -400px) rotate(0deg);

        transition-delay: 6s;
        -ms-transition-delay: 6s; 
        -moz-transition-delay: 6s;          
        -o-transition-delay: 6s; 
        -webkit-transition-delay: 6s; 

        transition-duration: 2s;
        -ms-transition-duration: 2s;
        -moz-transition-duration: 2s;
        -webkit-transition-duration: 2s;
        -o-transition-duration: 2s;

        transition-timing-function: ease-in-out;
        -ms-transition-timing-function: ease-in-out;
        -moz-transition-timing-function: ease-in-out; 
        -webkit-transition-timing-function: ease-in-out; 
        -o-transition-timing-function: ease-in-out;

        opacity: 0;
    }

</style>

<script>
    $(window).load(function() { 

        $('.feature1 .title').addClass('title-fly-out-top-left');
        $('.feature1 .title2').addClass('sub-title-fly-out-left');

        $('.feature1 img').addClass('image-slide-right-to-left').bind("webkitTransitionEnd", function() {
            $(this).addClass('image-slide-down-and-out');
            $('.feature1 .copy').addClass('copy-fade-out-mid-top');
        });

        $('.feature1 .copy').addClass('copy-fade-in-bottom-mid').bind("webkitTransitionEnd", function() {
            $(this).addClass('copy-fade-out-mid-top');              
        });
    });
</script>

</cfsavecontent>
<cfhtmlhead text="#tempHeadCode#">

<div id="featureAnimation">
<div class="feature1">
    <cfoutput>
        <img src="#attributes.imageDirectory#/01implant.png" class="implant"     />
        <p class="title">Blah blah blah</p>
        <p class="title2">Blah blah blah</p>
        <p class="copy">Blah blah blah</p>
    </cfoutput>
</div> 
```

# c - 进程间共享数据队列

> ID：10543293
> 
> 赞同：1
> 
> 时间：2012-05-10T23:00:25.963
> 
> 标签：c, multithreading, process, queue, ipc

我有一个当前使用多个线程来处理数据的 C 程序。我为生产者线程使用 glib GAsyncQueue 将他们的数据发送到消费者线程。现在我需要将线程移动到独立的进程中，我不确定如何继续在它们之间推送数据。使用管道似乎不太适合我的任务，因为被推送的数据量相当大。另一种选择是获得一块共享内存，但由于计算共享数据量的上限有点困难，所以这个选择没有吸引力。

你知道像 GAsyncQueue 这样可以与多个进程一起使用的东西吗？因为我已经在使用 glib，所以我更喜欢使用它的工具，但如果其他库提供了我需要的东西，我也愿意使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:17:16.623

POSIX 指定了一个`msgsnd(2)`,`msgget(2)`接口，尽管消息和队列的大小可能比您希望的要小。`/proc/sys/kernel/msgmax`（Linux 允许您使用和可调文件修改大小`/proc/sys/kernel/msgmnb`；默认值为 8k 和 16k。）

由于消息总线是一种相当普遍的需求，您可能希望选择[RabbitMQ 之](http://www.rabbitmq.com/devtools.html)类的东西，它提供了对多种语言的预先编写的绑定，并且可能使未来的开发更容易。

# html - 如果用户正在运行 adblock，如何制作一个显示消息的广告包装器？

> ID：10543295
> 
> 赞同：3
> 
> 时间：2012-05-10T23:00:28.990
> 
> 标签：html, css, background-image, adblock

我有一个网站，每个页面都有广告。

我想显示一条消息，“请考虑禁用您的广告屏蔽，它对我们有很大帮助。” 如果用户启用了 AdBlock。

这是我的尝试：

```
<div id="ad-wrapper">
    <!-- Ad script here. It works fine. -->
</div> 
```

还有我的 CSS：

```
#ad-wrapper {
    background-color: #1D1D1D;
    border: 1px solid #232323;
    float: right;
    height: 90px;
    margin-right: 4px;
    width: 728px;
    overflow:hidden;
    background-image: url('/Public/images/disabled-ad.jpg');
} 
```

当我关闭 AdBlock 时，广告可以正确显示而没有问题。

当我打开它时，AdBlock 完全使`#ad-wrapper`隐形。我认为它只会删除广告，将我的背景图像消息留在那里供我的用户查看。

我怎样才能完成这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T23:03:43.767

我假设 Ad Block 阻止了您的包装，因为它包含“广告”一词。尝试使用类似的东西：

```
<div id="disabled-wrapper">
    <!-- Ad script here. It works fine. -->
</div> 
```

# python - 列表中大于特定数量的值的数量

> ID：10543303
> 
> 赞同：78
> 
> 时间：2012-05-10T23:01:31.157
> 
> 标签：python, list

我有一个数字列表，我想获取一个数字出现在满足特定条件的列表中的次数。我可以使用列表推导（或函数中的列表推导），但我想知道是否有人有更短的方法。

```
# list of numbers
j=[4,5,6,7,1,3,7,5]
#list comprehension of values of j > 5
x = [i for i in j if i>5]
#value of x
len(x)

#or function version
def length_of_list(list_of_numbers, number):
     x = [i for i in list_of_numbers if j > number]
     return len(x)
length_of_list(j, 5) 
```

有没有更精简的版本？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-05-10T23:03:22.310

你可以这样做：

```
>>> j = [4, 5, 6, 7, 1, 3, 7, 5]
>>> sum(i > 5 for i in j)
3 
```

`True`以这种方式添加最初可能看起来很奇怪`True`，但我认为这不是不合常规的；毕竟，它是自 2.3 以来所有版本`bool` [的子类](https://stackoverflow.com/a/3175293/577088)：`int`

```
>>> issubclass(bool, int)
True 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-10T23:08:36.557

您可以像这样创建一个较小的中间结果：

```
>>> j = [4, 5, 6, 7, 1, 3, 7, 5]
>>> len([1 for i in j if i > 5])
3 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-10T23:08:28.333

如果您以其他方式使用 numpy，则可以节省一些笔画，但我认为它不会比 senderle 的答案更快/更紧凑。

```
import numpy as np
j = np.array(j)
sum(j > i) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-10T23:15:52.123

一种（有点）不同的方式：

`reduce(lambda acc, x: acc + (1 if x > 5 else 0), j, 0)`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-12-07T11:18:18.683

如果您使用的是 NumPy（如 ludaavic 的回答），对于大型数组，您可能希望使用 NumPy 的`sum`函数而不是 Python 的内置函数来`sum`显着加速——例如，我的笔记本电脑上的 1000 万个元素数组的加速 > 1000 倍：

```
>>> import numpy as np
>>> ten_million = 10 * 1000 * 1000
>>> x, y = (np.random.randn(ten_million) for _ in range(2))
>>> %timeit sum(x > y)  # time Python builtin sum function
1 loops, best of 3: 24.3 s per loop
>>> %timeit (x > y).sum()  # wow, that was really slow! time NumPy sum method
10 loops, best of 3: 18.7 ms per loop
>>> %timeit np.sum(x > y)  # time NumPy sum function
10 loops, best of 3: 18.8 ms per loop 
```

（以上使用 IPython 的`%timeit`“魔术”进行计时）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-08T08:08:24.610

使用 bisect 模块的不同计数方式：

```
>>> from bisect import bisect
>>> j = [4, 5, 6, 7, 1, 3, 7, 5]
>>> j.sort()
>>> b = 5
>>> index = bisect(j,b) #Find that index value
>>> print len(j)-index
3 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-10T16:42:52.850

我将添加地图和过滤器版本，因为为什么不呢。

```
sum(map(lambda x:x>5, j))
sum(1 for _ in filter(lambda x:x>5, j)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-01T17:06:45.290

你可以这样做使用函数：

```
l = [34,56,78,2,3,5,6,8,45,6]  
print ("The list : " + str(l))   
def count_greater30(l):  
    count = 0  
    for i in l:  
        if i > 30:  
            count = count + 1\.  
    return count
print("Count greater than 30 is : " + str(count)).  
count_greater30(l) 
```

# sql - 在 SQL Server 2008 中填充表时在两列上使用 SUM 函数时返回 NULL 值

> ID：10543304
> 
> 赞同：0
> 
> 时间：2012-05-10T23:01:34.483
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2005

`INSERT INTO table`正在为返回的记录集生成一个`NULL`值。我正在尝试从用户库表中添加`SUM(m.earnings + m.fpearn) from pfinancial`表和用户 ID 和 minpay。

我究竟做错了什么？还有没有更好的方法通过 id's 的临时表来重申？

`publsher_monthly`从下面的表格中，我应该用每个用户 ID 一个唯一的 id填充表格，表格中的`minpay`数量和列`userbase`的总和`m.earnings + m.fpearn``pfinancial`

`publisher_monthly`桌子

```
pmuseris   pmminpay   pmearnings
5          20         75
6          30         27 
```

`userbase`桌子

```
userid  minpay
5       20
6       30 
```

`pfinancial`桌子

```
userid  earnings   fpearn
5       10         30
5       20         15
6       15         12 
```

我的查询：

```
DECLARE @realuserid bigint

CREATE TABLE #tmppmuserids(
   idx bigint Primary Key IDENTITY(1,1),
   tmppmuserid bigint NULL
)

INSERT INTO #tmppmuserids
  SELECT DISTINCT userid FROM pfinancial

DECLARE @i bigint
DECLARE @numrows bigint

SET @i = 1
SET @numrows = (SELECT COUNT(*) FROM #tmppmuserids)

IF @numrows > 0

WHILE (@i <= (SELECT MAX(idx) FROM #tmppmuserids))
BEGIN
   SET @realuserid = (SELECT tmppmuserid FROM #tmppmuserids WHERE idx = @i)

  --PROBLEM HERE
  INSERT INTO publisher_monthly (pmearnings, pmuserid, pmminpay)

    SELECT  
        SUM(m.earnings + m.fpearn), MAX(@realuserid), MAX(u.minpay) 
    FROM pfinancial m 
    INNER JOIN userbase u on u.userid = m.userid 
    WHERE 
       m.userid = @realuserid AND 
       (m.created >= DATEADD(MONTH, DATEDIFF(MONTH, -1, GETDATE()),0)) AND
       (m.created < DATEADD(MONTH, DATEDIFF(MONTH, -1, GETDATE()) + 1, 0))
  --END PROBLEM

  SET @i = @i + 1
END

SELECT * FROM #tmppmuserids
SELECT * FROM publisher_monthly

DROP TABLE #tmppmuserids 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:04:09.420

在它们周围放置一个`IsNull`：

```
SELECT SUM(IsNull(m.earnings, 0) + IsNull(m.fpearn, 0)) 
```

甚至围绕整个事情：

```
SELECT IsNull(SUM(m.earnings + m.fpearn), 0) 
```

# java - CXF ClientProxy getClient“不是代理实例”

> ID：10543306
> 
> 赞同：3
> 
> 时间：2012-05-10T23:01:42.013
> 
> 标签：java, cxf, wsdl2java

我正在尝试将 WS-security 与我的 Apache CXF 客户端一起使用。我需要获取客户端端点，以便添加 WSS4J 拦截器。但是，当我打电话时，`ClientProxy.getClient()`我收到`IllegalArgumentException`以下消息：

> 不是代理实例

代码：

```
MailingService_ServiceLocator serviceLocator = new MailingService_ServiceLocator();
MailingService_PortType port = serviceLocator.getMailingServicePort();

Client client = ClientProxy.getClient(port);  // throws exception

...

// Create client interceptor
AuthenticationInterceptor authenticationInterceptor =
  new AuthenticationInterceptor(schemaNS, outprops, organizationName, null);

client.getEndpoint().getOutInterceptors().add(authenticationInterceptor); 
```

痕迹：

```
java.lang.IllegalArgumentException: not a proxy instance
    at java.lang.reflect.Proxy.getInvocationHandler(Unknown Source)
    at org.apache.cxf.frontend.ClientProxy.getClient(ClientProxy.java:93) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:03:54.880

事实证明我使用了错误的代码生成工具。我使用的是 org.codehaus.mojo axistools-maven-plugin，它为您提供了扩展 java.rmi.Remote 的服务。但是，我需要使用 org.apache.cxf cxf-codegen-plugin，它为您提供了一个实现 Proxy 的服务。

新代码：

```
MailingService_Service mss = new MailingService_Service();
MailingService service = mss.getMailingServicePort();

ClientImpl client = (ClientImpl) ClientProxy.getClient(service); 
```

新的 pom：

```
<plugins>
  <plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>2.6.0</version>
    <executions>
      <execution>
    <id>generate-sources</id>
    <phase>generate-sources</phase>
    <configuration>
      <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
      <wsdlOptions>
        <wsdlOption>
              <wsdl>${basedir}/src/main/wsdl/myWsdl.wsdl</wsdl>
            </wsdlOption>
      </wsdlOptions>
        </configuration>
    <goals>
      <goal>wsdl2java</goal>
    </goals>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

# javascript - 移动网站：隐藏“点击确认框”

> ID：10543308
> 
> 赞同：0
> 
> 时间：2012-05-10T23:02:12.673
> 
> 标签：javascript, mobile

当我在 Android 手机的网络浏览器中单击按钮或链接时，我会看到一个彩色框，确认我单击了某些内容。

我正在设计一个移动网站，我想隐藏这个“点击确认”——因为它没有必要并且会破坏我网站的总体印象。

有没有办法在 JavaScript 中制作一个按钮或链接，单击时不返回此彩色框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:09:32.517

您可以在您不希望出现这种行为的任何元素（或所有元素）上使用 css。

```
 -webkit-tap-highlight-color: rgba(0,0,0,0); 
```

因此，要停止您可以使用的所有链接：

```
a {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
} 
```

# c++ - C++ - 程序在函数调用中丢失

> ID：10543315
> 
> 赞同：2
> 
> 时间：2012-05-10T23:03:21.527
> 
> 标签：c++

在这里，我有一段代码，它是名为*Sistema*的类的一部分（所有声明都在一个单独的文件中）。第一个函数应该调用下一个函数，它是一个读取一些树的递归函数（*Arbre*是 tree 的自定义实现*）*。

运行程序时，输出显示“进入函数”行，就在函数调用之前，但我从来没有得到“新节点”行。所以我的程序在函数调用和函数本身之间的某个地方丢失了，甚至在任何递归调用之前。我以前从来没有遇到过这样的问题。关于发生了什么的任何线索？

这是代码：

```
#include "Sistema.hpp"

    ............

  list<int> Sistema::proc_peticion(int pelicula, int tiempo, int tamano){
    list<int> srv;
    Arbre<int> arb = estructura;
    bool unidad_tmp = false;
    int dist = 0, bw = 0;
    cout << "entering function" << endl;
    camino(srv, arb, pelicula, tiempo, tamano, unidad_tmp, dist, bw);
    return srv;
  }

    ............

  void Sistema::camino(list<int>& srv, Arbre<int>& arb, const int& pel, const int& tmp, const int& size, bool& unidad_tmp, int& dist, int& bw){
    cout << "new node ";
    if (not arb.es_buit()){

        ..................

    }
 } 
```

我试图只留下可能有用的代码部分，以使其更具可读性。如果您需要更多内容，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T23:07:22.293

您应该在 camino 函数中写入一个 endl，当您在 C/C++ 中写入文件时，数据不一定写入文件，而是位于内存缓冲区中，直到其填满或显式写入（刷新）到磁盘.

这里可能发生的是写入正在发生，程序继续并挂在函数内。如果您不想编写 endl （执行写入），您可以`cout.flush()`稍后调用。

# c# - 为什么从一个时区转换到另一个时区如此困难？

> ID：10543319
> 
> 赞同：2
> 
> 时间：2012-05-10T23:03:45.917
> 
> 标签：c#, datetime, timezone, datetimeoffset

我已经阅读了这里的多个帖子，直到我的头准备好爆炸，地图集上到处都是小线条。

这是我想做的事情：

1.  我有一个充满约会的日历来显示一个企业。
2.  公司位于纽约 (EDT)
3.  我的开发机器在 PST
4.  生产服务器位于加利福尼亚 (PST)
5.  日历数据以 UTC 格式存储在数据库中

我想要做的就是在 EDT 中指定一个时间范围（比如 5 月 15 日上午 9 点到下午 5 点）并在日历上显示所有约会。

所以，我的日历控件告诉我“我想要从 5/15/12 上午 9 点 EDT - 5/15/12 下午 5 EDT”我说好的，我将调用一个 db proc 并以 UTC 传递日期值，即（5 /15/12 13:00 UTC - 5/15/12 21:00 UTC）。然后，当我拿到它们时，我会将它们转换回 EDT，然后再交给你。

但是，我几乎不知道 .NET 会发现这个简单的任务让我绊倒。

通过使用，我得到了 TimeZoneInfo：

```
TimeZoneInfo zoneInfo = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time") 
```

但这只是事情的结果。

这是我接下来尝试的：

```
DateTime rangeStartUTC = TimeZoneInfo.ConvertTimeToUtc(rangeStart, zoneInfo);

EXCEPTION: Kind is not properly specified. 
```

（WTF 是 Kind 吗？）我告诉过你我想转换的时间，我告诉过你它是 EDT，我告诉过你我想将它转换为 UTC。你还想要什么？我可以用手做。他妈的已经这样做了。

所以我尝试设置 Kind，但它只有两个值！本地或UTC。但我的时间既不是本地时间，也不是 Utc。那你到底为什么要我提供时区信息？您不能通过询问系统时钟来判断当地时区吗？可以预见的是，两者都没有奏效。（是的，根据文档有未指定，但再次根据文档，它并没有真正做任何事情，是的，我也尝试过）。

然后，我尝试了：

```
TimeZoneInfo.ConvertTime(rangeStart, zoneInfo, TimeZoneInfo.Utc) 
```

同样蹩脚的借口！

是时候阅读更多 St. Jon Skeet 的文章了。

你知道吗，有一个新的类 DateTimeOffset。它会解决你所有的问题。上帝保佑所有美好而仁慈的 .NET 4.0 赏金......

```
DateTimeOffset offStartTime = new DateTimeOffset(rangeStart, zone.GetUtcOffset(rangeStart));
rangeStartUTC = offStartTime.UtcDateTime;

EXCEPTION: "Offset should be 0 for Utc dates" 
```

啊啊啊！你到底是怎么断定 rangeStart 是 Utc 的？我有告诉过你吗？

一堆人引用 TimeZoneInfo.ConvertTime(rangeStart, zone) 作为解决方案，它如何“善良”足以为他们工作？除非他们的源时区恰好与他们的本地时区相同。

那么，一个可怜的 .NET C# 开发人员该怎么办呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:55:31.730

在或`DateTime.SpecifyKind(rangeStart, DateTimeKind.Unspecified)`之前尝试。它不应该对时间本身进行任何转换，只需更改.`DateTimeOffset``TimeZoneInfo``Kind`

据我了解，`Kind`on`DateTime`应该是`Unspecified`或者对应于私有`TimeZoneInfo.GetCorrespondingKind()`方法的结果，该方法返回`Local`for `TimeZoneInfo.Local`和`Utc`for `TimeZoneInfo.Utc`。

更新：对不起，原来的答案错了，现在应该一切都好。

# facebook-opengraph - Facebook 时间线：您如何创建对自定义属性进行分组的聚合？

> ID：10543320
> 
> 赞同：0
> 
> 时间：2012-05-10T23:03:57.103
> 
> 标签：facebook-opengraph, aggregation

我想在“类别”的自定义属性上对时间线操作进行分组。

什么有效：

*   我能够将“类别”字符串属性添加到我的时间线“对象”类型
*   我也要求
*   我确保添加的时间线确实获得了新的类别属性。

但是现在当我去配置聚合时，它不会让我对那个“类别”属性进行分组。它给我的唯一选项是“项目”——我可以删除它，但我不能选择新的分组属性。很奇怪！！欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:46:49.270

您只能按具有 URL 的事物进行分组（因此我们可以将它们设为链接）。所以制作一个“Category”对象类型而不是让它成为一个字符串。那么它应该是可分组的。

# html - 为 CSS 菜单项设置固定大小

> ID：10543321
> 
> 赞同：0
> 
> 时间：2012-05-10T23:04:05.560
> 
> 标签：html, css

我正在尝试为 CSS 驱动的水平菜单导航中的所有项目分配相同的大小（宽度）。正如您从链接示例中看到的那样，“li”大小是根据内部字符串的长度呈现的。现在我的问题是如何为项目设置固定大小（例如：全部为 80 像素）？你能看看下面的例子：http: [//jsfiddle.net/Behseini/hBDv9/](http://jsfiddle.net/Behseini/hBDv9/)

我也想知道如何在 box(div) 中将菜单栏居中

感谢您的时间和评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:09:51.667

设置“a”元素的宽度。

[http://jsfiddle.net/hBDv9/2/](http://jsfiddle.net/hBDv9/2/)

如果需要，您还可以应用以“a”为中心的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T23:09:06.750

添加`width: 80px;`到`#nav li a`和`#nav li a:hover`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T23:10:37.600

要使 li 元素具有相同的大小，您需要使用：

```
#nav li {
  display:inline-block;
  width:80px;
} 
```

要将一个元素置于另一个元素的中心：

```
div.wrapper { width:100%;}
div.wrapper .centered {
  display:inline-block;
  width:80%; // or whatever you want it to be
  margin: 0 auto;
} 
```

这有帮助吗？

# sql-server-2008 - 无法连接到 SQL Server Management Studio 2008 上的服务器

> ID：10543325
> 
> 赞同：8
> 
> 时间：2012-05-10T23:05:01.877
> 
> 标签：sql-server-2008, sql-server-2008-express

当我打开 Management Studio 并尝试使用 [PCNAME]/SQLEXPRESS 进行连接时，它会显示以下错误：

> “无法连接到 [PCNAME]\SQLEXPRESS”

* * *

附加信息：

错误信息：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）（Microsoft SQL Server，错误：-1）
> 
> 如需帮助，请单击： http: [//go.microsoft.com/fwlink](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=-1&LinkId=20476) ?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=-1&LinkId=20476 "

我也试过“localhost”、“local”和“。” 在 [PCNAME] 的位置，但无济于事。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T23:09:03.960

确保 SQL Server (SQL Express) 服务正在运行。

在 powershell 提示符下输入：

```
Get-Service -Name 'MSSQL$SQLEXPRESS' 
```

服务“状态”属性应报告为“正在运行”

如果不是，请键入（您需要在提升的提示符下，即“以管理员身份运行”）：

启动服务-名称“MSSQL$SQLEXPRESS”

或者

单击开始 > 键入 cmd 并键入

```
sc query MSSQL$SQLEXPRESS 
```

状态应报告为“正在运行”

如果不是，请键入（您需要在提升的提示符下，即“以管理员身份运行”）：

```
sc start MSSQL$SQLEXPRESS 
```

如果您收到无法找到服务的错误：打开 SQL Server 配置管理器并确保您已安装 SQL Server Express： ![在此处输入图像描述](../Images/8579e8b8622908923e6deb7b15283897.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T03:04:23.593

打开你的sqlserver配置管理器启用你的tcpip sqlserver和express以及客户端协议anf尝试关闭你的防火墙这将允许远程连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-19T20:43:45.147

首先检查 sql server 是否正在运行，如果不是从 services.msc 启动它，然后添加 .\SQLEXPRESS 它将解决问题

# internet-explorer - JSF 2.0 在 Internet Explorer/iPhone 中的导航错误，但不是 Chome

> ID：10543329
> 
> 赞同：1
> 
> 时间：2012-05-10T23:06:18.090
> 
> 标签：internet-explorer, jsf, google-chrome, compatibility

我最近将我的第一个 JSF 2.0 站点部署到了 openshift。它在 Chrome 下运行良好，并且 index.xhtml 页面在其他浏览器中加载良好，但只要我点击：

```
<h:commandLink id="aboutUs" action="aboutUs"> 
```

或任何其他 commandLink 我收到以下错误：

```
javax.faces.application.ViewExpiredException: viewId:/index.xhtml - View /index.xhtml could not be restored.
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:205)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
at java.lang.Thread.run(Thread.java:679) 
```

这发生在 Internet Explorer 和我的 iPhone 上，但不在 Chrome 上。

尽管该站点具有 Java Script 和 CSS，但它链接到的某些页面只有头部和主体 JSF 标记，没有 JS。出于这个原因，我真的很困惑为什么会发生这种情况，因为我看不到它是 JS 或 CSS 问题。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:03:02.680

我相信那是因为您正在使用`h:commandLink`导航。您正在进行回发，然后从一种视图更改为另一种视图。

使用`h:outputLink`or`h:link`代替，甚至是直接的 HTML 链接`<a href="/index.html">Index</a>`进行导航，它应该可以在任何地方工作。

另外，请查看此问答：

[“此链接已停用，因为它未嵌入 JSF 表单中。”](https://stackoverflow.com/questions/6002884/how-to-write-right-jsf-commandlink)

[什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

# java - java中的递归函数用字典填充二叉树

> ID：10543330
> 
> 赞同：2
> 
> 时间：2012-05-10T23:07:01.467
> 
> 标签：java, recursion, reference, binary-tree

我试图在java中编写一个递归函数，它需要一个按字母顺序排列的充满单词的arraylist，并尽可能地填充树。据我所知，我遇到的问题是java没有通过引用传递，所以在我的递归函数中，我从来没有真正更新左右分支指向的位置，这意味着树的顶部永远不会指向任何东西。有没有更好的（工作）方法来做到这一点？我是否在尝试首先填充树时完全错过了标记？

```
public void saveNode(BinaryTreeNode parent, int left, int right)
{
    int middle = (int) Math.ceil(((double)(right-left))/2.0);
    int curIndex;
    curIndex = middle+left;

    parent = new BinaryTreeNode(words.get(curIndex));

    if(middle != 1)
    {
        saveNode(parent.left, left, curIndex);
        saveNode(parent.right, curIndex, right);
    }
} 
```

PS：我对java比较陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:00:46.233

你的问题是当你执行

```
parent = new BinaryTreeNode(words.get(curIndex)); 
```

就调用者而言，这*不会*为调用分配值`parent`，因此它不会传播回调用堆栈。

您希望编码看起来像这样（取出与问题无关的代码）：

```
public static void main(String[] args) {
    // keep a reference to the root node so you can access the tree after loading
    BinaryTreeNode root = new BinaryTreeNode();
    // pass the root node into the first call to the recursive method
    saveNode(root, left, right);
}

public void saveNode(BinaryTreeNode parent, int left, int right) {
    // keep building your tree as you descend into it
    parent.left = new BinaryTreeNode();
    parent.right = new BinaryTreeNode();
    // pass the (new) branches into deeper calls     
    saveNode(parent.left, left, curIndex);
    saveNode(parent.right, curIndex, right);
} 
```

# jquery - 如何捕捉 MobiScroll onClose 事件

> ID：10543335
> 
> 赞同：1
> 
> 时间：2012-05-10T23:07:31.160
> 
> 标签：jquery, mobiscroll

我正在使用 Mobiscroll jquery 插件，我似乎无法捕捉到他们的 onClose 事件。有人可以给我一个如何捕获此事件的代码示例。没有它的文档。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T09:09:03.223

```
$('input[type=date]').scroller({
    onShow:function(html,inst) {
                //Personally I'd like to use events here                   
           }
}); 
```

应该这样做

# java - ant javac任务使用哪个javac.exe？

> ID：10543336
> 
> 赞同：3
> 
> 时间：2012-05-10T23:07:33.547
> 
> 标签：java, ant, compilation, javac

我面临一个问题。我`javac.exe`在我的机器上重命名并注意到 ant`javac`任务仍然可以正常工作。

有人知道它从哪里得到 javac.exe 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T23:30:29.753

实际上，我相信，默认情况下，Ant 会尝试使用以下代码直接执行 java 编译器类：

```
try {
        Class c = Class.forName ("com.sun.tools.javac.Main");
        Object compiler = c.newInstance ();
        Method compile = c.getMethod ("compile",
            new Class [] {(new String [] {}).getClass ()});
        int result = ((Integer) compile.invoke
                      (compiler, new Object[] {cmd.getArguments()}))
            .intValue ();
        return (result == MODERN_COMPILER_SUCCESS);

    } catch (Exception ex) {
        if (ex instanceof BuildException) {
            throw (BuildException) ex;
        } else {
            throw new BuildException("Error starting modern compiler",
                                     ex, location);
        }
    } 
```

代码来自[这里](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.ant/ant/1.8.3/org/apache/tools/ant/taskdefs/compilers/Javac13.java#Javac13)。

这意味着如果库 tools.jar 在 Ant 的当前类路径上，它将拾取该类并启动它。这导致 javac.exe 可以重命名为您想要的任何内容，它仍然可以工作。因此，要回答您的问题，它实际上不执行任何“javac.exe”。

Javac 任务还有其他实现，但我认为这是所有编译器 1.3+ 的默认实现

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T23:22:29.723

您可以尝试从[这里](http://ant.apache.org/manual/Tasks/javac.html)开始并检查全局`build.compiler`属性中配置的内容，它可能指向其他地方

# c# - 为什么在返回 null 和非 200 状态结果时会遇到内存泄漏？

> ID：10543337
> 
> 赞同：1
> 
> 时间：2012-05-10T23:07:36.333
> 
> 标签：c#, .net, asp.net-mvc, mono

在运行 fastcgi-mono-server4 时，当返回 null 和非 200 状态代码时，我遇到了 MVC 2.0 和 Mono .NET 4.0 (mono 2.10.9) 的内存泄漏。我在控制器中使用返回非 200 状态的方法，这会导致严重的内存泄漏，如下所示。

```
Response.StatusCode = 404;
Response.StatusDescription = "This is a bad request";
return null; 
```

我发现在使用以下方法时，我可以避免内存泄漏，至少在先前方法所展示的程度上是这样。

```
throw new System.Web.HttpException(404, "This is a bad request"); 
```

有谁知道这背后的原因吗？这可能在 MVC3 中修复了吗？

# cakephp - 在 bluehost 上设置 cakephp 2.0

> ID：10543350
> 
> 赞同：1
> 
> 时间：2012-05-10T23:08:51.257
> 
> 标签：cakephp, installation, bluehost

嗨，我只是想我会在这里分享这个我是 cakephp 新手，我刚刚在本地完成了我的网站，想把它推送到我的生产服务器@bluehost

在我推它之后，我收到了一个 500 错误经过 2 天的“无骰子”，我让它在这里工作，这就是我所做的：

1）将webroot文件夹的内容剪切并粘贴到根文件夹然后我打开新的index.php文件并更改以下内容：

```
if (!defined('ROOT')) {
    define('ROOT', dirname(dirname(dirname(__FILE__))).DS.'public_html'.DS.'my-site');
} 
```

和

```
if (!defined('APP_DIR')) {
    define('APP_DIR',DS.'app');
} 
```

完毕！希望这可以帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T04:50:08.360

我相信您在[高级安装](http://book.cakephp.org/2.0/en/installation/advanced-installation.html)下的 CakePHP 书中指定的内容。

# c# - 以窗口形式和 c# 更新数据库

> ID：10543352
> 
> 赞同：0
> 
> 时间：2012-05-10T23:09:03.367
> 
> 标签：c#, database, winforms

我正在通过 Windows 窗体将记录添加到我的数据库中。但是，当我添加新记录时，它不会更新，直到我关闭应用程序然后重新开始。即使我认为我是在告诉它更新（我不是！！）

我需要一个新的变量来更新数据库吗？我有点卡住了。

编辑：关于这个的所有代码..

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace MediaManagementSystem
{
public partial class AddMedia : Form
{
    //database var
    OleDbConnection m_cnADONetConnection = new OleDbConnection();
    OleDbDataAdapter m_daDataAdapter;
    OleDbDataAdapter m_cbCommandBuilder;
    DataTable m_dtMedia = new DataTable();
    int m_rowPosition = 0;

    public AddMedia()
    {
        InitializeComponent();
    }

    private void BrowseButton_Click(object sender, EventArgs e)
    {
        //load up file dialog and find media
        if (addFileDialog.ShowDialog() == DialogResult.OK)
        {
            //add media file name to file path text box
            txtFilePath.Text = addFileDialog.FileName;
        }
    }

    private void CancelButton_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void AddButton_Click(object sender, EventArgs e)
    {
        //add the new record to the database
        DataRow drNewRow = m_dtMedia.NewRow();
        drNewRow["FilePath"] = txtFilePath.Text;
        drNewRow["Subject"] = txtSubject.Text;
        drNewRow["Title"] = txtTitle.Text;
        drNewRow["Keywords"] = txtKeywords.Text;
        drNewRow["MediaType"] = AddComboBox.Text;
        m_dtMedia.Rows.Add(drNewRow);

        m_daDataAdapter.Update(m_dtMedia);
        m_rowPosition = m_dtMedia.Rows.Count - 1;
        this.ShowCurrentRecord();
        this.Close();
    }

    private void AddMedia_Load(object sender, EventArgs e)
    {
        //link to the database and conect to database
        m_cnADONetConnection.ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\Max\Documents\Visual Studio 2010\Projects\MediaManagementSystem\MediaManagementSystem\bin\Debug\MediaDB.mdb";
        m_cnADONetConnection.Open();
        OleDbConnection objConnection = new OleDbConnection(m_cnADONetConnection.ConnectionString);

        m_daDataAdapter = new OleDbDataAdapter("Select * From Media", m_cnADONetConnection);

        OleDbCommandBuilder m_cbCommandBuilder = new OleDbCommandBuilder(m_daDataAdapter);
        m_daDataAdapter.Fill(m_dtMedia);
        m_daDataAdapter.Update(m_dtMedia);
    }

    public void ShowCurrentRecord()
    {
        m_daDataAdapter.Update(m_dtMedia);   

        if (m_dtMedia.Rows.Count == 0)
        {
            txtFilePath.Text = "";
            txtSubject.Text = "";
            txtTitle.Text = "";
            txtKeywords.Text = "";
            AddComboBox.Text = "";
            return;
        }
        txtFilePath.Text = m_dtMedia.Rows[m_rowPosition]["FilePath"].ToString();
        txtSubject.Text = m_dtMedia.Rows[m_rowPosition]["Subject"].ToString();
        txtTitle.Text = m_dtMedia.Rows[m_rowPosition]["Title"].ToString();
        txtKeywords.Text = m_dtMedia.Rows[m_rowPosition]["Keywords"].ToString();
        AddComboBox.Text = m_dtMedia.Rows[m_rowPosition]["MediaType"].ToString();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:50:54.577

从主表单打开 AddMedia 表单后，您需要再次 RALOAD 所有记录。查看表单在打开时的执行方式，并在您打开 AddMedia 表单后执行相同的操作；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:57:02.297

最好使用 DataSet 然后更新其中的记录。最后，您需要在 update() 命令之后调用 AcceptChanges() 以使用数据集提交更改，如下所示，还需要在输入后重新加载数据以获取最近的数据信息： dataset.AcceptChanges()

# vb6 - 基于 Windows 8 ARM 的平板电脑上的 VB6

> ID：10543357
> 
> 赞同：3
> 
> 时间：2012-05-10T23:09:34.387
> 
> 标签：vb6, arm, windows-8, tablet

随着宣布将在 Windows 8 上支持 VB6，我的问题是：

微软有没有说过（是或否）VB6 应用程序将在基于 ARM 的平板电脑上运行的地方？

如果没有，是否有任何 ARM 模拟器，以便我们可以在 Windows 8 ARM 平板电脑上测试我们的 VB6 应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T01:15:49.170

我的理解是：不会。Windows 8 将支持 2 种不同的 API：Win32（以及最重要的 .NET）和 WinRT。Windows 8 ARM 版本将仅支持 WinRT。VB6 是针对 Win32 API 编译的，它不适用于 ARM 平板电脑。

正如 Adam Mihalcin[在这个答案中](https://stackoverflow.com/a/9356950/17635)所解释的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T01:38:04.937

在 ARM 上，没有 3rd 方桌面应用程序、VB6 或其他。而且你不会看到新的 Metro 框架对 VB6 的支持，因为……嗯…… VB6 就像 10 年前一样被弃用了。

是时候投资重写了。

# ruby-on-rails-3 - 指定 :class 嵌入式 ruby 表单

> ID：10543359
> 
> 赞同：-1
> 
> 时间：2012-05-10T23:09:38.187
> 
> 标签：ruby-on-rails-3

如果我想为我的嵌入式 ruby​​ 表单分配一个类，像这样？：

```
<%= form_for(User.new) do |f|, :class => "form-horizontal"  %> 
```

我该怎么做呢？我不断收到语法错误。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:14:27.910

来自[http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for)

```
form_for(record, options = {}, &proc) 
```

意义：

```
<%= form_for(User.new, { :class => 'form-horizontal' }) do |f|  %> 
```

# java - Java 浏览器库

> ID：10543360
> 
> 赞同：5
> 
> 时间：2012-05-10T23:09:40.933
> 
> 标签：java, browser, proxy, webview, gecko

我需要用java实现一个简单的浏览器。我一直在研究几种可能性，包括 JxBrowser、JBrowser、JavaFX (WebEngine + WebView) 等等。JxBrowser 有潜力，但它是一个付费库，我想避免。

此浏览器需要能够处理所有 Web 功能，包括 JavaScript 和 HTML5，同时能够通过代理进行连接。因此，最好的解决方案可能是使用像 Gecko 这样的网络引擎。

所以我想要一些关于能够实现 Gecko 引擎（包括 XULRunner）并可能改变核心 Gecko 偏好的库的建议。此外，如果您知道任何其他不包括 Gecko 的可能解决方案，请随时讨论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:25:21.493

你试过[SWT 浏览器小部件](http://www.eclipse.org/articles/Article-SWT-browser-widget/browser.html)吗？

对于 SWT 浏览器中的代理，请参阅[如何设置浏览器使用的代理？](http://www.eclipse.org/swt/faq.php#browserproxy),

# singleton - Autofac SingleInstance 不工作

> ID：10543363
> 
> 赞同：7
> 
> 时间：2012-05-10T23:10:03.577
> 
> 标签：singleton, autofac

我正在尝试让 Singleton 实例与 Autofac 一起使用。我有点用 Winforms 做一个 quasi-mvvm 类型的事情，只是一个实验，所以不要挂断电话。但我试图让我的模型成为一个在命令中引用的单个实例（这里的 ICommand 不是 WPF 变体）：

我有以下容器设置：

```
var cb = new ContainerBuilder();
cb.RegisterType<CalculateCommissionCommand>().As<ICommand<TradeEntry>>().SingleInstance();
cb.RegisterType<CalculationsModel>().As<ICalculationsModel>().SingleInstance();
cb.Register(c => new CalculationsView() { Model = c.Resolve<ICalculationsModel>() }).SingleInstance();
cb.Build(); 
```

现在，Command 将 ICalculationsModel 作为构造函数参数。但是，当我在传递给命令的模型中设置一个值时，该值不会出现在已经使用 CalculationsView 设置的模型中。尽管调用了“singleInstance”方法，但似乎命令和视图正在传递 CalculationsModel 的不同实例。我错过了什么吗？为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-16T00:32:37.060

我们今天遇到了类似的问题，这似乎是唯一一个提出这个问题的帖子，所以我想我会分享我们的经验，希望它能帮助别人。最后它就在我们眼前，当然它们通常是最难解决的问题:-)。

在我们的场景中，我们是：

1.  注册配置提供程序的特定实现
2.  在程序集中自动注册某些类型。

这些方面的东西：

```
var cb = new ContainerBuilder();
cb.RegisterType<FileBasedConfigurationProvider>()
    .As<IConfigurationProvider>()
    .SingleInstance();

cb.RegisterAssemblyTypes(typeof(MailProvider).Assembly)
    .Where(t => !t.IsAbstract && t.Name.EndsWith("Provider"))
    .AsImplementedInterfaces(); 
```

愚蠢的是，我们没有想到/意识到 和`FileBasedConfigurationProvider`是在同一个程序集中`MailProvider`，所以第二个注册调用基本上覆盖了第一个；因此，`SingleInstance`“没有工作”。

希望能帮助别人！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T00:14:10.723

从您的代码中不清楚您如何存储/使用容器。您可能已经创建了多个容器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-06T16:38:36.227

在我的情况下，问题是生成第二个实例的方法的参数被定义为类而不是接口，即

```
SomeMethod(ClassName parameter) 
```

代替

```
SomeMethod(**I**ClassName parameter) 
```

明显的错误，但花了几分钟才看到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-13T06:59:34.907

在我的例子中，我为一个类注册了两个不同的接口，声明每个都是单个实例。我假设会有一个类的单个实例......没有每个注册都有一个实例。

例如

```
builder.RegisterType<MyClass>().As<IMyFirstInterface>().SingleInstance();  // 1st instance 
builder.RegisterType<MyClass>().As<IMySecondInterface>().SingleInstance(); // 2nd instance 
```

正确的做法是......

```
builder
    .RegisterType<MyClass>()
    .As<IMyFirstInterface>()
    .As<IMySecondInterface>()
    .SingleInstance(); 
```

# ios - 如何更改 MFMailComposeViewController 中的电子邮件正文？

> ID：10543364
> 
> 赞同：-1
> 
> 时间：2012-05-10T23:10:05.573
> 
> 标签：ios, email

我想放一些类似订购相同数据包的东西，如果我完成了我的订单，我想发送电子邮件；如何修改此代码以更改电子邮件的正文？

inappemailViewController.h

```
#import <UIKit/UIKit.h>
#import <MessageUI/MFMailComposeViewController.h>

@interface inappemailViewController :
UIViewController <MFMailComposeViewControllerDelegate> {
}

-(IBAction)email;
@end 
```

inappemailViewController.m

```
-(IBAction)email {

    MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];

    [composer setMailComposeDelegate:self];

    if ([MFMailComposeViewController canSendMail]) {

        [composer setToRecipients:[NSArray arrayWithObjects:@"123@abc.com", nil]];

        [composer setSubject:@"subject here"];

        [composer setMessageBody:@"message here" isHTML:NO];

        [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];

        [self presentModalViewController:composer animated:YES];

        [composer release];

    }

    else

        [composer release];

}

-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {

    if (error) {

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"error"

message:[NSString stringWithFormat:@"error %@", [error description]]

delegate:nil cancelButtonTitle:@"dismiss" otherButtonTitles:nil, nil];

        [alert show];

        [alert release];

        [self dismissModalViewControllerAnimated:YES];

    }

    else {

        [self dismissModalViewControllerAnimated:YES];

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T23:38:12.500

消息正文设置在这一行：

```
[composer setMessageBody:@"message here" isHTML:NO]; 
```

因此，只需将“此处的消息”更改为您希望电子邮件说的任何内容。你也可以让它成为你在别处设置的 NSString 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T22:00:37.893

您可以修复此代码。您的消息正文设置在此行：

```
 [composer setMessageBody:@"message here" isHTML:NO]; 
```

希望这可以帮助。

# aem - 使用 CQ5 模板创建响应式设计

> ID：10543365
> 
> 赞同：1
> 
> 时间：2012-05-10T23:10:16.407
> 
> 标签：aem

我正在研究 Adob​​e CQ5，并希望获得有关如何集成其拖放 UI 以创建响应式网站的任何建议。似乎它适用于相当平淡的模板概念，其组件几乎可以放在任何地方，包括“三列控件”之类的东西 - 这将使设计响应式网格结构非常困难（因为这很难以防止用户放入可能破坏布局的控件）。

有没有人对此有任何经验或建议？我真的在寻找有关模板与组件（段落）结构以及在何处/如何管理 CSS 的深入技术细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T17:06:14.447

CQ5 提供了控制可以在模板中完成的操作的方法，因此认为组件“几乎可以放在任何地方”可能会产生误导。页面模板的设计和配置使您可以控制可以将哪些组件添加到页面的特定区域。这允许您*仅*使那些将与模板布局一起使用的组件可用，不包括会破坏布局的组件。然后作者只被允许使用可行的东西。如果他们试图将一个组件拖到该组件尚未配置为可用的段落 (parsys) 上，则 UI 将不允许他们在那里使用它。因此，CQ 实际上可以很*容易*地防止用户将控件放置在会破坏布局的地方。

这里稍微概述一下：

*   [http://dev.day.com/docs/en/cq/current/howto/components_develop.html#Adding%20a%20new%20component%20to%20the%20paragraph%20system%20%28design%20%20%20% 20%20mode%29](http://dev.day.com/docs/en/cq/current/howto/components_develop.html#Adding%20a%20new%20component%20to%20the%20paragraph%20system%20%28design%20%20%20%20%20mode%29) 指出

> “可以激活（或停用）组件以确定在编辑页面时向作者提供哪些组件。”

对于 CSS 和 JavaScript，您可以创建一个客户端库，然后在页面上包含相关的客户端库。后端 CQ 功能将负责将多个 CSS（或 JavaScript）文件合并到一个缩小的文件中，以允许对优化文件的单个 HTTP 请求。它在这里概述了一点：

*   [http://dev.day.com/docs/en/cq/current/developing/widgets.html#Including%20the%20Client-Sided%20Code%20in%20a%20Page](http://dev.day.com/docs/en/cq/current/developing/widgets.html#Including%20the%20Client-Sided%20Code%20in%20a%20Page)以及
*   [http://dev.day.com/docs/en/cq/current/howto/taglib.html#%3Ccq:includeClientLib%3E](http://dev.day.com/docs/en/cq/current/howto/taglib.html#%3Ccq:includeClientLib%3E)

因此，您可能会开发多个共享客户端库的组件，然后当任何组件添加到段落中时，客户端库将包含在页面中。您可能还需要一个适用于所有模板的 CSS 库，以提供通用的外观和感觉，同时允许组件在使用时添加自己的组件。

这些使用模板和组件的指南概述了您如何提供控制和灵活性：

*   [http://dev.day.com/docs/en/cq/5-5/developing/developing_guidelines_bestpractices.html#Guidelines%20for%20Using%20Templates%20and%20Components](http://dev.day.com/docs/en/cq/5-5/developing/developing_guidelines_bestpractices.html#Guidelines%20for%20Using%20Templates%20and%20Components)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:32:02.950

我将记录我们在 RWD 和 CQ5 方面成功的 WIP 经验

**假设：** 一个有据可查的风格指南。

**我们的第一步：** 修改现有的列控制组件 css 以利用 twitter 引导网格 css。创建一个基本页面属性，允许子页面设置和继承网格容器上的两个不同类。（容器||容器流体）。尽可能利用开箱即用的组件。所有组件宽度都继承其父容器的宽度，允许将组件拖放到模板中的任何位置。

**问题：** 开箱即用的列控件组件无法嵌套。我们正在研究构建一个自定义列控件组件。

**要点：**这是一个进化项目，我们不断迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-26T07:08:59.900

随着最近 AEM 6.0 的推出，他们有了一个名为**Geomatrixx Media**的示例网站。这个网站是响应式的。

您可以将此示例作为参考，并在此基础上开始构建。

# model-view-controller - 精简 Symfony2 控制器并保持逻辑

> ID：10543366
> 
> 赞同：7
> 
> 时间：2012-05-10T23:10:31.023
> 
> 标签：model-view-controller, design-patterns, symfony, doctrine-orm

从 MVC 模式和 Symfony2 的角度来看，我可以稍微精简一下我的**控制器代码，去掉一些****持久化逻辑**吗？例如，给定一个像这样的标准新动作：

```
public function newAction(\Symfony\Component\HttpFoundation\Request $request)
{

    // Create a new entity and a new form type for managing
    $entity = $this->createNewEntity();
    $form   = $this->createForm($this->createNewFormType(), $entity);

    // If it's GET just return the view
    if('GET' == $request->getMethod())
        return array('form' => $form->createView());

    // It's POST request so bind the form
    $form->bindRequest($request);

    // ... and if it's valid just persist the entity
    if($form->isValid()) :

        $em = $this->getEntityManager(); // Should be carried by controller?
        $em->persist($entity);           // Should be carried by controller?
        $em->flush();                    // Should be carried by controller?

        // Redirect the user to the default page
        return $this->redirect($this->getOnNewSuccessRedirectUrl($entity));

    endif;

    // Return the view plus errors
    return array(
        'errors' => $this->getValidator()->validate($entity),
        'form'   => $form->createView()
    );

} 
```

**将该逻辑移至存储库**是否正确？一个例子（警告：可能不起作用）：

```
class BaseRepository extends \Doctrine\ORM\EntityRepository
{

    /**
     * Persist the entity (either new or existent)
     *
     * @param object $entity
     */
    public function save($entity)
    {
        $em = $this->_em;
        $em->persist($entity);
        $em->flush();
    }

    /**
     * Delete the entity.
     *
     * @param object $entity
     */
    public function delete($entity)
    {
        $em = $this->_em;
        $em->remove($entity);
        $em->flush();
    }

} 
```

控制器代码将是：

```
if($form->isValid()) :

    $this->getRepository()->save($entity);

    // Redirect the user to the default page
    return $this->redirect($this->getOnNewSuccessRedirectUrl($entity));

endif; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T00:08:56.777

我认为将持久化并从控制器中删除逻辑是一个好主意，但存储库不是它的正确位置。

来自 Symfony2 文档（[http://symfony.com/doc/current/book/doctrine.html#fetching-objects-from-the-database](http://symfony.com/doc/current/book/doctrine.html#fetching-objects-from-the-database)）：

> 您可以将存储库视为一个 PHP 类，它的唯一工作是帮助您获取某个类的实体。

您应该只使用您的存储库类从数据库中获取数据。

我会将您的持久/删除逻辑移动到服务中（请参阅[http://symfony.com/doc/current/book/service_container.html](http://symfony.com/doc/current/book/service_container.html)），因此您的控制器代码将类似于

```
if($form->isValid()) :

    $this->get('service.entity')->save($entity);

    // Redirect the user to the default page
    return $this->redirect($this->getOnNewSuccessRedirectUrl($entity));

endif; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T01:06:40.197

克里斯是绝对正确的。

但顺便说一句：

为什么要以这种方式再次验证您的实体：

'错误' => $this->getValidator()->validate($entity)?

您将请求绑定到表单，因此错误将在 viewhelpers 'form_errors(...)' 中创建的视图中处理。

# jquery - jQuery live() 函数在 css 转换后停止触发

> ID：10543371
> 
> 赞同：0
> 
> 时间：2012-05-10T23:11:15.260
> 
> 标签：jquery, events, html, static, absolute

这是我所拥有的：

```
<div id="wrapper">
    <div id="container">

    </div>
</div>

#container
{  
    transition: opacity .2s ease-in-out;
    -webkit-transition: opacity .2s ease-in-out;
    -moz-transition: opacity .2s ease-in-out;
    -o-transition: opacity .2s ease-in-out;
    -ms-transition: opacity .2s ease-in-out;
    top: 0%;
    z-index: 0;
    width: 100%;
    height: 100%;

}
#wrapper
{
     width: 2048px;
     height: 1536px;
     position: absolute;
} 
```

容器 div 包含带有点击事件的热点内容。包装器用于通过 css 动画左右移动内容。但是，在应用此动画后，动画效果很好：

```
$('#wrapper').css('-webkit-transition','-webkit-transform 0s ease-out').css('-webkit-transform','translate3d(' + '2048px,0px,0)'); 
```

容器 div 内的热点事件没有响应....我认为静态定位的热点现在已关闭。有没有更好的方法来实现这一目标？

* * *

@Connor：这是一个小提琴链接，但它不是一个工作副本，但希望它足以让您了解它的设置方式...... [http://jsfiddle.net/dTVqx/](http://jsfiddle.net/dTVqx/)

* * *

## 另一个更新：我为热点添加了边框，热点确实出现在正确的位置和顶部，所以似乎在执行 css 动画后事件可能以某种方式被禁用？

这是我当前的 live() 调用：

```
$('.modal').live('tap',function(event) 
{
  ...
}

I ALSO DID TRY on()

$(".modal").on("tap", function()
{
...
}

but on() does not work at all, even before the transition 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T17:04:36.440

我在你的小提琴中没有看到 live() 调用，但从 1.7 开始，live() 已被弃用。尝试改用 on() 和 off() 函数，看看是否能产生您正在寻找的功能？

# c# - MVC 3 中的自定义集合模型绑定器问题

> ID：10543373
> 
> 赞同：1
> 
> 时间：2012-05-10T23:11:39.513
> 
> 标签：c#, asp.net-mvc-3, model-binding, modelbinders

我在 MVC 中创建模型绑定器时遇到问题。

我所针对的操作如下所示：

```
public ActionResult GetAccounts (ICollection<Account> accounts ){} 
```

我创建了一个自定义模型绑定器并使用以下代码注册它：

```
ModelBinders.Binders.Add(typeof(ICollection<Account>),new CollectionModelBinder()); 
```

附加调试器后，我可以看到`CollectionModelBinder's CreateModel`正在调用该方法。但是，当执行到达控制器的 action 方法时，accounts 参数为空。

有什么问题？

我的模型活页夹看起来像：

```
public class CollectionModelBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        return new List<Account> {
            new Account {Id = 1}, 
            new Account {Id = 2}, 
            new Account {Id = 3}};
    }
} 
```

**更新：**

这是`DefaultModelBinder.` After`CreateModel`被调用的问题，另一个内部方法`UpdateCollection`被调用，它有效地取消了由创建的集合`CreateModel.`解决方案是推出我自己的实现`IModelBinder.` 唯一缺少的参数`IModelBinder.BindModel`是`modelType,`容易获得的：

```
public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    var type = bindingContext.ModelType;
    //...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:36:25.723

这是`DefaultModelBinder.` After`CreateModel`被调用的问题，另一个内部方法`UpdateCollection`被调用，它有效地取消了由创建的集合`CreateModel.`解决方案是推出我自己的实现`IModelBinder.` 唯一缺少的参数`IModelBinder.BindModel`是`modelType,`容易获得的：

```
public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    var type = bindingContext.ModelType;
    //...
} 
```

# php - 页面标签应用程序中的 Facebook Like 按钮

> ID：10543374
> 
> 赞同：0
> 
> 时间：2012-05-10T23:11:44.737
> 
> 标签：php, html, facebook

我似乎在这里遇到了一个问题。我在 Facebook 特定页面的选项卡上有一个投票/图库应用程序。

因此，为了向用户提供指向图库中图像的直接链接（在 Paget 选项卡应用程序中），我生成了一个带有 APP_DATA 的 URL，因此我可以将数据（图像文件名）传递给`iframe`. 所以基本上我的链接看起来有点像这样：

> [https://www.facebook.com/pages/xxxxxx/xxxxxxxxx?sk=app_xxxxxxx&app_data=showimage.php%3Ffilename%3D1336314789stevakralj%2Ejpg](https://www.facebook.com/pages/xxxxxx/xxxxxxxxx?sk=app_xxxxxxx&app_data=showimage.php%3Ffilename%3D1336314789stevakralj%2Ejpg)

现在，当我尝试为此链接创建一个赞按钮时，我什么也得不到。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:14:23.750

Facebook 似乎不允许直接链接到标签页，因此会从 URL 中删除您的应用 ID。没有办法解决这个问题，除非链接到一个反弹回 Facebook 的外部网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:44:48.753

我有完全相同的问题......在我的应用程序中，它由页面选项卡托管，每个项目的“Like”按钮正确显示，每个“like”按钮的“data-href”属性具有相同的格式你的，但每个点赞按钮都指向托管应用程序的 Facebook 页面，而不是单个项目......所以，对于我画廊中的每个项目，它下面的“点赞”信息完全相同（托管应用程序的页面），如果我“不喜欢”任何项目，我“不喜欢”整个页面。我尝试了相同的格式，但参数不在 facebook 页面上......然后它可以工作......我看不出有什么不同，但是： [https ://www.facebook.com/pages/xxxxxx/xxxxxxxxx?sk= app_xxxxxxx&app_data=abc](https://www.facebook.com/pages/xxxxxx/xxxxxxxxx?sk=app_xxxxxxx&app_data=abc)（不工作， [https://www.mytestweb.com/test.aspx?sk=app_xxxxxxx&app_data=abc](https://www.mytestweb.com/test.aspx?sk=app_xxxxxxx&app_data=abc)（适用于每个具有 app_data 不同的项目）

# wpf - 如何将 ObservableCollection 绑定到 ComboBox？

> ID：10543378
> 
> 赞同：0
> 
> 时间：2012-05-10T23:12:21.313
> 
> 标签：wpf, vb.net, combobox, observablecollection, vb.net-2010

如何让基本绑定在 a`ComboBox`和a 之间工作`ObservableCollection`？除了错误消息，我什么也得不到。

VB：

```
Class MainWindow
    Dim Units As New ObservableCollection(Of String)

    Private Sub Window_Loaded(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles MyBase.Loaded
        Units.Clear()
        Units.Add("in")
        Units.Add("mm")
        Units.Add("cm")
    End Sub
End Class 
```

XAML：

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="350" Width="525">
<Grid>
    <ComboBox Height="59" HorizontalAlignment="Left" Margin="136,96,0,0" Name="ComboBox1" VerticalAlignment="Top" Width="319"
              ItemsSource="{Binding Units}"/>
</Grid> 
```

无论我做什么，`ComboBox`似乎总是空的，并且控制台中有一条错误消息：

> System.Windows.Data 错误：40：BindingExpression 路径错误：在 'object' ''MainWindow' (Name='')' 上找不到 'Units' 属性。绑定表达式：路径=单位；数据项='主窗口'（名称=''）；目标元素是'ComboBox'（名称='ComboBox1'）；目标属性是“ItemsSource”（类型“IEnumerable”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:15:31.780

在 XAML 中，仅更改为 {Binding}，或等效地更改为 {Binding Path=.}：

```
<ComboBox Height="59" HorizontalAlignment="Left" Margin="136,96,0,0" Name="ComboBox1" VerticalAlignment="Top" Width="319" ItemsSource="{Binding}"/> 
```

在 *Window_Loaded* 事件处理程序中，从后面的代码中将数据上下文显式设置为对象：

```
ComboBox1.DataContext = Units; 
```

# php - 不推荐使用拆分（）

> ID：10543382
> 
> 赞同：5
> 
> 时间：2012-05-10T23:12:48.140
> 
> 标签：php

> **可能重复：**
> [PHP 拆分替代方案？](https://stackoverflow.com/questions/2813241/php-split-alternative)

```
 // Successful geocode
$geocode_pending = false;
$coordinates = $xml->Response->Placemark->Point->coordinates;
$coordinatesSplit = split(",", $coordinates);
// Format: Longitude, Latitude, Altitude
 $lat = $coordinatesSplit[1];
$lng = $coordinatesSplit[0]; 
```

大家好，这是我的地理位置代码的一部分。我尝试将存储的地址更改为纬度/经度，然后将经度/经度保存回数据库中。他们使用 split 函数将字符串放入数组中，但从 php 5.3.0 开始，该函数已被弃用。有人对此有解决方案吗？

谢谢

编辑：

当我使用这个

```
$coordinatesSplit = preg_split(",", $coordinates); 
```

我收到以下错误

> preg_split() [function.preg-split]：没有结束分隔符

**上次编辑** 当我向数据库添加内容时，长/迟会自动保存到。但是当我想在数据库中添加例如第 6 个地址时，生成纬度/经度的脚本会自动对数据库中的所有记录执行此操作。是否有可能仅在最后添加时执行此操作？---->[数据库中的地理位置 LONG/LAN](https://stackoverflow.com/questions/10543719/geolocation-long-lan-in-database)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T23:39:46.760

您可以通过以下方式获得更简单的代码：

```
list($lat,$lng) = explode(",",$coordinates); 
```

这直接将结果分配给`explode`您的两个变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T23:32:17.030

如评论中所述，请[`explode()`](http://www.php.net/manual/en/function.explode.php)改用：

```
$coordinatesSplit = explode(",", $coordinates); 
```

# asp.net - 页面加载 ASP.net 时文本框未更新

> ID：10543383
> 
> 赞同：0
> 
> 时间：2012-05-10T23:12:55.487
> 
> 标签：asp.net, viewstate, page-lifecycle

我在网页的页面加载上有一个动态构建的表格，其中包含用户可以更改的默认文本框。对用户输入值也有一些验证（例如，输入不能小于零）。当用户提交表格时，只存储有效的输入，并刷新页面，在重建时提取存储的值以填充表格。由于某种原因，文本框在提交和重新加载页面后仍会显示无效输入，即使它们不是持久的，并且标签不会发生此问题。

文本框控件中是否有专门内置的东西导致此问题？是否有存储状态的地方，也许（我尝试将`ViewState`标志设置为 false）？这只是页面生命周期的一部分吗？

文本框是在从 Page_Load 事件调用的方法中构建的

```
void Page_Load(object sender, EventArgs e)
{
//page initialization...
ValidateData(); //This is where the current data is verified, and stored if valid
BuildTable(); //This takes that stored value for the text
}

void BuildTable
{ 
tbTable = new Table();  
tbRow = new TableRow();
tbCell = new TableCell();
TextBox tb = new TextBox();
tb.text = some stored value;
tbCell.Controls.Add(tb);
tbRow.Cells.Add(tbCell);
tbTable.Rows.Add(tbRow);
divFromPage.Controls.add(tbTable);
} 
```

如果需要更多信息来帮助解决此问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:41:54.563

编辑：重现您的问题后，我得出以下结论。
我相信问题不在于视图状态，而是 asp 只是重新填充这些值，因为您提交的表单数据与您返回的输入元素具有相同的名称。
即使您动态生成它们，因为您将它们添加到同一个 div 中，结果总是相同的。这导致我有 2 个解决方案 :) ：
我的解决方案 nr 3 仍然有效，我试了一下，按钮点击重定向按预期工作，没有发布的数据爬回我的文本框。
该声明负责：

```
Response.Redirect("~/test.aspx"); 
```

或者，您可以生成一个随机 ID，以确保您返回的输入字段名称与提交的名称不同。您不必更改所有名称，但如果表 ID 不同，则整个表将不再填充提交的数据。

请注意，您可能需要在页面加载中使用 if(IsPostBack)，因为您的数据将在页面加载后立即丢失（除非您在此之前处理保存）

* * *

如果您正在执行回发，asp.net 使用它的视图状态来维护所有文本框、文本字段和所有其他表单元素（包括隐藏的输入类型）。
我目前看到 3 个解决您的问题的方法：
您可以执行 ivowiblo 建议的操作，然后从数据库加载数据（我假设您这样做），您可以擦除所有文本字段。在第一次访问时，这将是毫无意义的，因为它们是空白的。但是在回发之后，它实际上会擦除文本字段。

您可以禁用这些文本框上的视图状态，以便 asp 不会保留该状态。我不确定为什么您的测试不起作用，但它应该起作用。如果您选择这种方法，请随时使用一些实际代码编辑您的问题

我个人最喜欢的：重定向页面。不只是返回结果并导致回发到页面，请执行以下操作：用户点击保存按钮后，您可以保存数据，然后执行 Response.Redirect 到当前页面。浏览器将被重定向到页面并且不涉及视图状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:35:00.710

刚刚想通了，有点 D'oh 时刻，我只是在 PreRender 事件中填充了数据，它工作得很好，感谢所有的输入。

# c# - 创建用户后的事件 - ASP.NET 成员资格

> ID：10543384
> 
> 赞同：0
> 
> 时间：2012-05-10T23:13:01.430
> 
> 标签：c#, asp.net

我将使用创建用户向导来让用户为该公司网站创建他们的帐户。创建新帐户后，我想再添加一个步骤，但找不到方法。我想做的是验证作为这家公司的现任员工的用途。这不是对所有人开放的网站，因此只有当前员工可以在此网站上创建用户帐户。这是我需要实施的步骤。

1.  询问员工 ID 和姓名以验证他或她是否是当前员工。
2.  如果是，则创建用户向导步骤将开始。我将在此向导的顶部显示员工 ID。
3.  成功创建用户帐户后，我需要将 aspnet_Users 表中的 UserID 和 Employee ID 插入到附加表中作为参考。

我不知道在哪里可以进行第 3 步进行编码。

我猜我需要在“创建用户”按钮事件上执行此操作，但我还需要知道用户帐户是否成功创建。

请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:28:51.203

您应该实现自己的表单，要求提供所需的信息。在您的情况下，ID 和名称。

一旦您验证 ID 和名称是正确的，您可以使用`Membership.CreateUser` [（此处的文档）](http://msdn.microsoft.com/en-us/library/system.web.security.membership)重载之一来创建用户。

如果您需要任何额外的功能，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T02:57:26.527

当我最后一次这样做时，我刚刚订阅了 CreatedUser，它对我来说非常有用。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx)

# php - 用于分形生成的 PHP 类？

> ID：10543385
> 
> 赞同：2
> 
> 时间：2012-05-10T23:13:11.730
> 
> 标签：php, imagemagick, gd, image-manipulation, fractals

我只是好奇（这是在大量搜索之后）是否有任何 PHP 和 GD/ImageMagick 类用于在 Gumowski-Mira、Fractal Flame 等不同算法下生成分形图像。这将为我节省大量可笑的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:34:41.787

Nat McHugh在 Sheffield PHP 小组就该主题发表演讲后，在[github上发布了一些用于分形的 PHP 脚本](https://github.com/natmchugh/PHP-Fractals)

# sql - 为什么这不是按最新消息排序在顶部

> ID：10543387
> 
> 赞同：0
> 
> 时间：2012-05-10T23:13:30.913
> 
> 标签：sql, asp.net-mvc-3, sql-server-2008

```
SELECT TOP (100) PERCENT MsgCount.msgcount
    , c.userid
    , c.aspnet_guid
    , c.fname
    , c.lname
    , c.profileimagepath
    , c.profilealbumid
    , p1.msgdate
    , SUBSTRING(p1.msgcontent, 0, 50) AS msgcontent
    , p1.msgtouser
FROM dbo.userprofile AS c 
INNER JOIN dbo.usermessages AS p1 
    ON c.userid = p1.msgfromuser 
LEFT OUTER JOIN dbo.usermessages AS p2 
    ON c.userid = p2.msgfromuser 
    AND (p1.msgdate < p2.msgdate 
          OR p1.msgdate = p2.msgdate 
          AND p1.msgid < p2.msgid) 
LEFT OUTER JOIN  
(
    SELECT msgfromuser
        , COUNT(msgfromuser) AS msgcount
    FROM dbo.usermessages
    GROUP BY msgfromuser
) AS MsgCount 
    ON MsgCount.msgfromuser = p1.msgfromuser
WHERE     (p2.msgid IS NULL)
ORDER BY p2.msgdate DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T02:49:31.670

我不确定您的表中的数据是什么样的，但是因为您有一个与 p2 的左外连接，所以我假设您期望某个时候没有值并且 p2.msgdate 为空。通过仅按 p2.msgdate （可能为空的列）排序，您将无法获得通过按始终具有值的列进行排序所获得的一致结果。也许按 p1.msgdate 甚至 coalesce(p2.msgdate,p1.msgdate) 排序可能会给您更一致的结果。

```
SELECT TOP (100) PERCENT MsgCount.msgcount
    , c.userid
    , c.aspnet_guid
    , c.fname
    , c.lname
    , c.profileimagepath
    , c.profilealbumid
    , p1.msgdate
    , SUBSTRING(p1.msgcontent, 0, 50) AS msgcontent
    , p1.msgtouser
FROM dbo.userprofile AS c 
INNER JOIN dbo.usermessages AS p1 
    ON c.userid = p1.msgfromuser 
LEFT OUTER JOIN dbo.usermessages AS p2 
    ON c.userid = p2.msgfromuser 
    AND (p1.msgdate < p2.msgdate 
          OR p1.msgdate = p2.msgdate 
          AND p1.msgid < p2.msgid) 
LEFT OUTER JOIN  
(
    SELECT msgfromuser
        , COUNT(msgfromuser) AS msgcount
    FROM dbo.usermessages
    GROUP BY msgfromuser
) AS MsgCount 
    ON MsgCount.msgfromuser = p1.msgfromuser
WHERE     (p2.msgid IS NULL)
ORDER BY p1.msgdate, p2.msgdate DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:22:13.450

也许尝试通过以下方式订购：

```
p1.msgdate 
```

代替：

```
p2.msgdate 
```

这只是一个建议:)

# .net - 记录/审核 403 请求

> ID：10543391
> 
> 赞同：1
> 
> 时间：2012-05-10T23:13:50.137
> 
> 标签：.net, asp.net-mvc, logging

我正在尝试建立使用 .net mvc 记录对控制器/操作的未授权访问尝试的最佳方法，基本上要求是：

1.  如果他们没有登录，那么我们想将他们重定向到登录页面
2.  如果他们已登录但没有页面的正确凭据，那么我们想要记录有关请求的信息、他们是谁、一些 HttpRequest 内容等，然后将它们重定向到特定的未经授权的访问页面。

1 显然是默认使用 .net mvc [Authorize] 属性过滤器处理的。2 我已经部分实现，我创建了一个特定的 Authorization 属性，它扩展了 Authorize 操作过滤器，该过滤器覆盖了默认的 HandleUnauthorizedRequest 方法来检查一些额外的东西并返回一个带有响应代码 403 的 HttpResult。

我无法实现另一部分，将信息记录到数据库中。当然有从自定义属性本身记录它的简单解决方案，但这感觉不对，感觉就像我正在让属性本身变得更聪明，然后它应该是，在一天结束时它应该知道关于限制访问，而不是关于将信息记录到数据库。

当它到达未经授权的页面本身时，还有另一种记录它的解决方案，它感觉不那么糟糕，但仍然感觉不太正确。

就我个人而言，我希望能够在请求链中的某个地方处理它，但据我所知，没有地方可以访问所有正确的信息。我试过在这里四处寻找，但没有找到任何非常适合我们想要的解决方案的东西。

有没有人实现了与我们的目标类似的东西，或者对应该在哪里实现它有任何想法。

谢谢，医学博士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:05:50.477

创建一个新的 IHttpModule 并将作弊黑客记录在 EndRequest 事件中......

例如

```
public class UnAuthorizedLoggerHttpModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.EndRequest += ContextOnEndRequest;
    }

    private void ContextOnEndRequest(object sender, EventArgs eventArgs)
    {
        var app = sender as HttpApplication;

        if (app == null) return;

        if (app.Response.StatusCode == (int)HttpStatusCode.Forbidden)
        {
            //Log the error
            //All the user info should be in app.Request
        }
    }
} 
```

# jquery - 淡出+清空一个div，然后放入新的内容

> ID：10543392
> 
> 赞同：11
> 
> 时间：2012-05-10T23:14:00.743
> 
> 标签：jquery, fadeout, jquery-effects

什么是淡出div**内容**的好方法，但保持 div 为新内容做好准备？

和

```
$('#info').html('').fadeOut(500);
or
$('#info').fadeOut(500).html('').show(); 
```

div内容刚刚消失，新内容不显示

和

```
 $('#info').fadeOut(500); 
```

div 会按照应有的方式淡出，但不会显示任何新内容

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T23:23:00.517

```
$('#info').fadeOut(500, function() {
   $(this).empty().show();
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T23:17:06.577

```
$('#info').fadeOut(500, function() {
   $(this).html('').show();
}); 
```

将等到 div 淡出后再将其清空！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T23:16:31.227

使用fadeOut的回调：

```
$('#info').fadeOut(500, function() {
  $('#info').html("New Content").show();
}); 
```

# php - 使用 time() 在 php 中计算未来日期

> ID：10543393
> 
> 赞同：0
> 
> 时间：2012-05-10T23:14:01.290
> 
> 标签：php, datetime, date, time

我试图显示 10 天后的时间。

```
$now = time();

$est = ($now - (60 * 60 * 4)); // subtract 4 hours

$later = ($est + (60*60*24*10));

$show_now = date('M m, Y h:i:s A', $est); // correct

$show_later = date('M m, Y h:i:s A', $later); // showing same as above...WHY!?

echo "now: ".$show_now."<br />later: ".$show_later; 
```

两者同时回响。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:16:26.810

```
$show_now = date('M m, Y h:i:s A', $est); // correct
$show_later = date('M m, Y h:i:s A', $later); // showing same as above...WHY!? 
```

应该

```
$show_now = date('M d, Y h:i:s A', $est); // correct
$show_later = date('M d, Y h:i:s A', $later); // NOT showing same as above 
```

否则你不显示**日期**，导致每个月 20 日之前的输出相同

# php - php DOMNode->nodeValue 无法正常工作

> ID：10543397
> 
> 赞同：1
> 
> 时间：2012-05-10T23:14:36.283
> 
> 标签：php, dom, encoding

我正在使用 DOM 来解析一些网站。我正在解析这个：

```
<option value="A26JUYT14N57PY">Aleksander&#39;s Kindle Cloud Reader</option>
<option value="A13400OMTGFDRH">Aleksander&#39;s Kindle for PC</option>
<optgroup label="----OR----" style="color:#999;font-style:normal;font-weight:normal"> </optgroup>
<option value="add-new">Register a new Kindle</option> 
```

我的脚本是：

```
$dom->getElementsByTagName('option');
foreach($options as $option)
{
    $attr = $option->getAttribute('value');
    $value = $option->nodeValue;
} 
```

在我的装有 PHP 5.3.9 的电脑上，它可以正常工作：

```
$attr1 = "A26JUYT14N57PY";
$value1 = "Aleksander&#39;s Kindle Cloud Reader";

$attr2 = "A13400OMTGFDRH";
$value2 = "Aleksander&#39;s Kindle for PC";

$attr3 = "add-new";
$value3 = "Register a new Kindle"; 
```

但是当我在服务器上上传脚本时，这不再起作用（我不确定它是什么 PHP 版本，但它 < 5.3.0）。结果是：

```
$attr1 = "A26JUYT14N57PY";
$value1 = "'";

$attr2 = "A13400OMTGFDRH";
$value2 = "'";

$attr3 = "add-new";
$value3 = ""; 
```

所以nodeValues中的字符串只剩下撇号 - 我认为这是编码的东西，但我不确定......奇怪的是只有nodeValues是错误的并且值属性是好的......

- - - - - - - 编辑

这是代码解析网页（它使用的类的来源在上面）。 `$page`是 CURL 返回的网页的 html 源代码 - 我不能给你直接的 url，因为它是在登录亚马逊之后。

```
$dom = HtmlDomParser::getDomFromHtml($page);    
            $form = FormDomParser::getFormByName($dom,$this->amazon_config->buy_form_name);

            if($form===false)
            {
                throw new AmazonParseException("Couldn't parse buy form");
            }

            $select = FormDomParser::getSelectByName($dom,$this->amazon_config->buy_deliveryoptions_name);
            if($select === false)
            {

                    throw new AmazonParseException("Couldn't parse options select");

            }

            $options = FormDomParser::getOptions($select);

            $result = array();
            foreach($options as $option)
            {
                //$value = $option->childNodes->item(0)->nodeValue;
                //print_r($value);

                $device_id = $option->getAttribute('value');
                $device_name = $option->nodeValue;

                echo $device_id.' = '.$device_name.'</br>';

            } 
```

HtmlDomParser

```
// simples class for parsing html files with DOM
    class HtmlDomParser
    {
        // converts html (as string) to DOM object
        public static function getDomFromHtml($html)
        {
            $dom = new DOMDocument;
            $dom->loadHTML($html);
            return $dom;
        }

        // gets all occurances of specified tag from dom object
        // these tags must contain specified (in attributes array) attributes
        public static function getTagsByAttributes($dom,$tag,$attributes = array())
        {
            $result = array();
            $elements = $dom->getElementsByTagName($tag);

            foreach($elements as $element)
            {
                $attributes_ok = true;
                foreach($attributes as $key => $value)
                {
                    if($element->getAttribute($key)!=$value)
                    {
                        $attributes_ok = false;
                        break;
                    }
                }

                if($attributes_ok)
                {
                    $result[] = $element;
                }
            }
            return $result;
        }
    } 
```

FormDomParser

```
class FormDomParser
    {
        // gets form (as dom object) with specified name
        public static function getFormByName($dom,$form_name)
        {
            $attributes['name'] = $form_name;
            $forms = HtmlDomParser::getTagsByAttributes($dom,'form',$attributes);
            if(count($forms)<1)
            {
                return false;
            }
            else
            {
                return $forms[0];
            }
        }

        // gets all <input ...> tags from specified DOM object
        public static function getInputs($dom)
        {
            $inputs = HtmlDomParser::getTagsByAttributes($dom,'input');
            return $inputs;
        }

        // internal / converts array of Dom objects into assiosiative array
        public static function convertInputsToArray($inputs)
        {
            $inputs_array = array();
            foreach($inputs as $input)
            {
                $name = $input->getAttribute('name');
                $value = $input->getAttribute('value');

                if($name!='')
                {
                    $inputs_array[$name] = $value;
                }
            }   
            return $inputs_array;
        }

        // gets all <select ...> tags from DOM object
        public static function getSelects($dom)
        {
            $selects = HtmlDomParser::getTagsByAttributes($dom,'select');
            return $selects;
        }

        // gets <select ...> tag with specified name from DOM object
        public static function getSelectByName($dom,$name)
        {
            $attributes['name'] = $name;
            $selects = HtmlDomParser::getTagsByAttributes($dom,'select',$attributes);
            if(count($selects)<1)
            {
                return false;
            }
            else
            {
                return $selects[0];
            }
        }

        // gets <option ...> tags from DOM object
        public static function getOptions($dom)
        {
            $options = HtmlDomParser::getTagsByAttributes($dom,'option');
            return $options;
        }

        // gets action value from form (as DOM object)
        public static function getAction($dom)
        {
            $action =  $dom->getAttribute('action');
            if($action == "")
            {
                return false;
            }
            else
            {
                return $action;
            }
        }
    } 
```

- - - - - 编辑

这是我要解析的 http 标头 od 站点（由 curl 返回）：

```
HTTP/1.1 200 OK Date: Fri, 11 May 2012 08:54:23 GMT Server: Server x-amz-id-1: 
0CHN2KA4VD4FTXF7K62J p3p: policyref=&quot;http://www.amazon.com/w3c/p3p.xml&quot;,CP=&quot;CAO 
DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN 
COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC &quot; x-frame-options: SAMEORIGIN 
x-amz-id-2: fFWynUQG0oqudmoDO+2FEraC2H+wWl0p9RpOyGxwyXKOc9u/6f2v8ffWUFkaUKU6 
Vary: Accept-Encoding,User-Agent Content-Type: text/html; charset=ISO-8859-1 
Set-cookie: ubid-main=190-8691333-9825146; path=/; domain=.amazon.com; 
expires=Tue, 01-Jan-2036 08:00:01 GMT Set-cookie: session-id-time=2082787201l; 
path=/; domain=.amazon.com; expires=Tue, 01-Jan-2036 08:00:01 GMT Set-cookie: 
session-id=187-8097468-1751521; path=/; domain=.amazon.com; expires=Tue, 
01-Jan-2036 08:00:01 GMT Transfer-Encoding: chunked 
```

- - - - - - - - - - - - 编辑

我刚刚使用了[http://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net)，效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:30:11.540

问题一定是'。DOM 对 XML 文档进行操作，您需要一个 CDATA 部分才能在值中包含 & 字符。

删除 ' 并检查它是否有效。如果是这样，那么您需要 CDATA

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:34:18.480

尝试获取`nodeValue`文本节点本身的 ：

```
$value = $option->firstChild->nodeValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:02:38.583

我会说（猜想）它的配置差异比 PHP 版本更大。那是因为有时 DOMDocument 会替换实体，有时则不会（在[*如何使用 PHP 的各种 XML 库来获得类似 DOM 的功能并避免 DoS 漏洞，例如 Billion Laughs 或 Quadratic Blowup*](https://stackoverflow.com/q/10212752/367456)？ .

一个有趣的配置设置是[`LIBXML_NOENT`](http://php.net/manual/libxml.constants.php)：

```
$doc->loadXML($src, LIBXML_NOENT); 
```

您还没有共享任何代码，所以我不知道这是否适用于您的。

您应该看看的另一件事（正如我所经历的那样）是文档的编码。重新保存文档/将其正确转换为 UTF-8 可能会有所帮助。如果在保存 HTML 时可以替换实体，它们通常是。

第三种选择是您自己编写一些代码，用文本节点替换实体元素，然后再次规范化文档以组合可以组合的文本节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:54:54.863

你可以尝试几件事。并在上传到您的服务器后全部尝试。不在你自己的机器上。

1.  用`$dom->loadXML()`和`$dom->loadHTML()`方法测试。
2.  检查Kolink的答案或这个`$value = $option->childNodes->item(0)->nodeValue;`
3.  `$array = simplexml_load_string($dom->saveXML($option))`看看数组是否有你需要的东西。
4.  做一个 $dom->loadHTML(html_entity_decode($html));

# c# - 有没有办法让 _ 出现在没有 Alt 键的热键上？

> ID：10543398
> 
> 赞同：7
> 
> 时间：2012-05-10T23:14:37.203
> 
> 标签：c#, .net, wpf, hotkeys

在 WPF 中，当您制作这样的标签时：

```
<Label Content="_My Label"/> 
```

然后，当您运行应用程序并按下`Alt`键时，它将显示带下划线的“M”。

我们有自己的自定义热键附加属性，允许我们`Ctrl`使用`Alt`.

问题是只会`Alt`显示下划线。

有没有办法在`Ctrl`按下键时显示下划线？

注意：我不想在按下`Alt`时在后台发送编程 KeyPress 。`Ctrl`那只会混淆我的快捷方式系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:59:36.443

行！我有一个解决方案可以在不按下但按下`_`的情况下显示热键。`Alt``Ctrl`

## 这是如何做到的：

* * *

**动态按下键盘键的小代码：**

```
//<summary>
//Function to Perform a Keyboard KeyPress.
//</summary>
void PressKey(Key KeyboardKey)
{
    KeyEventArgs args = new KeyEventArgs(Keyboard.PrimaryDevice,
    Keyboard.PrimaryDevice.ActiveSource, 0, Key.LeftAlt);
    args.RoutedEvent = Keyboard.KeyDownEvent;
    InputManager.Current.ProcessInput(args);
} 
```

* * *

**追加和删除代码`HotKeyChar`：**

```
//<summary>
//Function to Append a HotKeyChar to a Content of a Control.
//</summary>
void AppendHotKeyChar(ContentControl Ctrl, int KeyIndex)
{
    if (Ctrl.Content.ToString().Substring(KeyIndex, 1) != "_")
    {
        Ctrl.Content = "_" + Ctrl.Content;
    }
}
//<summary>
//Function to Remove a HotKeyChar to a Content of a Control.
//</summary>
void RemoveHotKeyChar(ContentControl Ctrl, int KeyIndex)
{
    if (Ctrl.Content.ToString().Substring(KeyIndex, 1) == "_")
    {
        Ctrl.Content = Ctrl.Content.ToString().Remove(KeyIndex, 1);
    }
} 
```

* * *

**XAML 代码`Button Bt1`：**

```
<Button x:Name="Bt1" Content="Button" HorizontalAlignment="Left" Margin="169,97,0,0" VerticalAlignment="Top" Width="75"/> 
```

* * *

**（例如）`Window.Loaded`事件的代码：`MainWindow``MainWindow1_Loaded`**

```
PressKey(Key.LeftAlt); 
```

* * *

**（例如）`Window.KeyDown`事件的代码：`MainWindow``MainWindow1_KeyDown`**

```
if (e.Key == Key.LeftCtrl)
{
    AppendHotKey(Bt1, 0);
} 
```

* * *

**（例如）`Window.KeyUp`事件的代码：`MainWindow``MainWindow1_KeyUp`**

```
if (e.Key == Key.LeftCtrl)
{
    RemoveHotKey(Bt1, 0);
} 
```

* * *

现在，当您启动应用程序时，`Alt`将动态按下一次。

现在每次你按`Ctrl`，你的`Control.Content`遗嘱都会附加一个`_`，所以`HotKey`会出现下划线！但要注意的是，您应该`Control.Content`在不添加`HotKeyChar '_'`但保留`Index`您`_`将附加的位置的情况下创建。

但请记住，如果`Alt`在您的应用程序中再次按下，代码将不再工作。因此，您必须`Alt`再次按下才能使代码正常工作！

添加和删​​除 a 的最佳方法`HotKeyChar`：

*   创建一个实例`List<KeyValuePair<int, Control>>`来存储`Index`的`HotKeyChar`和`Control`。
*   现在在`KeyDown`事件中只需循环`KeyValuePair<...>`..`List<...>`附加`_`.
*   在这种情况`KeyUp`下，只需遍历..removing 中`KeyValuePair<...>`的.`List<...>``_`

希望对您有所帮助！

# php - mysql 查询根据 3 个高级标准提取结果并在 php 中回显

> ID：10543401
> 
> 赞同：1
> 
> 时间：2012-05-10T23:14:57.770
> 
> 标签：php, mysql

我需要有关 php 的 mysql 查询的帮助...

我有一个名为“表”的表，其结构如下：

```
ID  EMAIL   GLOBAL_ID   VENDOR_ID   REVENUE USER
1   email1@email.com    123 7822    5   Bill
2   email1@email.com    123 90786   5   Paul
3   email1@email.com    123 17622   5   Mary
4   email2@email.com    124 1908    2   Eric
5   email3@email.com    125 189782  6   Jon
6   email3@email.com    125 11123   6   Paul
7   email4@email.com    126 11862   5   Dick
8   email4@email.com    126 271 5   Sue
9   email4@email.com    126 289871  5   George
10  email4@email.com    126 2211    5   Jack
11  email5@email.com    127 17771   10  Mary
12  email6@email.com    128 20891   5   Bill
13  email6@email.com    128 298981  5   Gary 
```

我需要一个查询来提取 EMAIL 和 GLOBAL_ID 一起唯一的记录（即从不包含相同的 EMAIL/GLOBAL_ID 组合两次）并且不包括是否有 3 个或更多记录具有相同的 EMAIL 和 GLOBAL_ID 组合，并且我不'不想提取 USER = Jon 的任何记录。所以，从上面的数据和使用php回显，应该会显示以下结果：

```
EMAIL   GLOBAL_ID
email2@email.com    124
email5@email.com    127
email6@email.com    128 
```

*注意我只需要回显 EMAIL 和 GLOBAL_ID

任何有关查询以在 php 中回显以完成此操作的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:21:22.067

```
SELECT DISTINCT
   EMAIL,GLOBAL_ID
FROM `table`
WHERE USER<>'Jon'
GROUP BY CONCAT(EMAIL,'@@',GLOBAL_ID)
HAVING COUNT(*)<3 
```

# iphone - 从以分钟为单位的数字中检索月、日、小时、分钟

> ID：10543411
> 
> 赞同：0
> 
> 时间：2012-05-10T23:16:22.823
> 
> 标签：iphone, objective-c, ios

我想创建一个计数器，以分钟为单位从给定数字中检索月、日、小时、分钟数，例如我知道：

```
60 minutes in an hour
24 hours in a day = 60 x 24 = 1440 minutes
31 days per month 
1 month = 24 x 60 x 31 = 44,640 minutes 
```

因此，如果我给例如数字 44640 我想要 1 个月 0 天 0 小时 0 分钟，或者例如如果我给 44700 我想要 1 个月、0 天 0 小时 60 分钟或 1 个月 0 天 1 小时 0 分钟

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:30:41.103

```
int total_minutes = 44640; 
int total_hours   = total_minutes / 60;
int minutes = total_minutes % 60;
int total_days = total_hours / 24;
int hours = total_hours % 24;
int months = total_days / 31;
int days = total_days % 31;

printf("%d months, %d days, %02d:%02d\n", months, days, hours, minutes); 
```

但这具有误导性，因为月份并非都是 31 天。平均而言，公历中的一个月是 30.436875 天（43829.1 分钟），因此您可以使用该数字。对于许多应用程序，此类计算只是假设一个月总是 30 天。但是，如果您的时间间隔固定在特定的时间点，最好使用两端的日期来确定它们之间有多少整月。

# sql - SQL Group by Query with join

> ID：10543413
> 
> 赞同：0
> 
> 时间：2012-05-10T23:16:27.060
> 
> 标签：sql, group-by, pivot

**[请点击此处查看示例表格和说明。](http://www.dbasupport.com/forums/attachment.php?attachmentid=588&d=1336691473)**

根据附加图像，我有三个表“PROJECTS”、“PROJECTMANAGER”和“MANAGERS”。

我需要一个查询，它可以列出由“产品”类型管理器管理的项目，这些管理器与项目状态分组。如果 STATUS=2 则显示为 Completed Projects 或 In Progress Projects。

结果表应如附图所示。期望的结果：[http ://www.dbasupport.com/forums/attachment.php?attachmentid=588&d=1336691473](http://www.dbasupport.com/forums/attachment.php?attachmentid=588&d=1336691473)

我需要的查询应该是通用的，以便可以在任何数据库（MySQL/Oracle/MSSQL/DB2）中使用

请帮忙。

顺便说一句，这不是作业......！！！！我使用了示例表。

我尝试过 case when 语句，但不知道如何加入并同时使用 group by。

```
CREATE TABLE PROJECTS 
(       
    PROJECT_ID  varchar(20), 
    PROJECT_NAME  varchar(30),
    STATUS int
);

CREATE TABLE PROJECTMANAGER
(
    PROJECT_ID  varchar(20), 
    MANAGER_ID varchar(20)
);

CREATE TABLE MANAGERS
(           
    MANAGER_ID  varchar(20), 
    MANAGER_NAME  varchar(20), 
    TYPE varchar(20)
);

INSERT INTO PROJECTS (PROJECT_ID, PROJECT_NAME, STATUS) VALUES
    ('project_001', 'Project 001', 0),
    ('project_002', 'Project 002', 1),
    ('project_003', 'Project 003', 2),
    ('project_004', 'Project 004', 0),
    ('project_005', 'Project 005', 2),
    ('project_006', 'Project 006', 0),
    ('project_007', 'Project 007', 1);

INSERT INTO PROJECTMANAGER (PROJECT_ID , MANAGER_ID) VALUES
    ('project_001', 'mgr_001'),
    ('project_002', 'mgr_001'),
    ('project_001', 'mgr_002'),
    ('project_002', 'mgr_003'),
    ('project_001', 'mgr_003'),
    ('project_005', 'mgr_001'),
    ('project_004', 'mgr_002');

INSERT INTO MANAGERS (MANAGER_ID, MANAGER_NAME, TYPE) VALUES
    ('mgr_001', 'Manager 001', 'PRODUCT'),
    ('mgr_002', 'Manager 002', 'HR'),
    ('mgr_003', 'Manager 003', 'PRODUCT'),
    ('mgr_004', 'Manager 004', 'FINANCE'),
    ('mgr_005', 'Manager 005', 'PRODUCT');

Resulted Table:

MANAGER_ID  | MANAGER _NAME | COMPLETED_PROJECTS |  IN_PROGRESS_PROJECTS |
 mgr_001    | Manager 001   |        1       |            2          |
 mgr_003    | Manager 003   |        0       |            1          |
 mgr_005    | Manager 005   |        0       |            0          | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:24:07.790

由于我看不到您想要的最终结果（没有发布图片），因此您可以执行以下操作：

```
select p.project_id
  , p.project_name
  , m.manager_name
  , case when p.status = 2 then 'completed' else 'in progress' end as projectstatus
from projects p
left join projectmanager pm
  on p.project_id = pm.project_id
left join managers m
  on pm.manager_id = m.manager_id
WHERE m.type = 'Product' 
```

[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/5b49e/14)

我认为您想要以下内容：

```
SELECT *
  FROM
  (
    select m.manager_id
      , m.manager_name
      , status
      , case when status = '2' then 'Completed' else 'in progress' end as pstatus
    from projects p
    left join projectmanager pm
      on p.project_id = pm.project_id
    left join managers m
      on pm.manager_id = m.manager_id
    WHERE m.type = 'Product'
  ) x
  pivot
  (
    count(status)
    for pstatus in ([completed], [in progress])
  ) p 
```

[演示](http://sqlfiddle.com/#!3/5b49e/50)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:22:01.247

您需要使用 INNER JOIN 将表连接在一起（使用 project_id 的项目到 Projectmanager，使用 manager_id 的 projectmanager 到经理）。

然后将它们与 GROUP BY 组合在一起

还阅读了 T-SQL CASE 语句。您需要它（或 IF）将 STATUS 字段转换为“已完成”或“未完成”。

# c# - 删除所有 CDATA 节点并替换为编码文本

> ID：10543421
> 
> 赞同：2
> 
> 时间：2012-05-10T23:18:01.897
> 
> 标签：c#, xml, cdata, url-encoding

所以，我有一个巨大的 XML 文件，我想删除所有 CDATA 部分并用安全的 html 编码文本节点替换 CDATA 节点内容。

只是用正则表达式去除 CDATA 当然会破坏解析。是否有 LINQ 或 XmlDocument 或 XmlTextWriter 技术将 CDATA 替换为编码文本？

我还不太关心最终的编码，只是如何用我选择的编码替换这些部分。

原始示例

```
 ---
  <COLLECTION type="presentation" autoplay="false">
    <TITLE><![CDATA[Rights & Responsibilities]]></TITLE>
    <ITEM id="2802725d-dbac-e011-bcd6-005056af18ff" presenterGender="male">
      <TITLE><![CDATA[Watch the demo]]></TITLE>
      <LINK><![CDATA[_assets/2302725d-dbac-e011-bcd6-005056af18ff/presentation/presentation-00000000.mp4]]></LINK>
    </ITEM>
  </COLLECTION>
  --- 
```

灵魂成为

```
 <COLLECTION type="presentation" autoplay="false">
            <TITLE>Rights &amp; Responsibilities</TITLE>
            <ITEM id="2802725d-dbac-e011-bcd6-005056af18ff" presenterGender="male">
              <TITLE>Watch the demo</TITLE>
              <LINK>_assets/2302725d-dbac-e011-bcd6-005056af18ff/presentation/presentation-00000000.mp4</LINK>
            </ITEM>
          </COLLECTION> 
```

我想最终目标是转向 JSON。我试过这个

```
 XmlDocument doc = new XmlDocument();
            doc.Load(Server.MapPath( @"~/somefile.xml"));
            string jsonText = JsonConvert.SerializeXmlNode(doc); 
```

但我最终得到了丑陋的节点，即“#cdata-section”键。重新开发前端以接受这一点需要 WAAAAY 很多小时。

```
"COLLECTION":[{"@type":"whitepaper","TITLE":{"#cdata-section":"SUPPORTING DOCUMENTS"}},{"@type":"presentation","@autoplay":"false","TITLE":{"#cdata-section":"Demo Presentation"},"ITEM":{"@id":"2802725d-dbac-e011-bcd6-005056af18ff","@presenterGender":"male","TITLE":{"#cdata-section":"Watch the demo"},"LINK":{"#cdata-section":"_assets/2302725d-dbac-e011-bcd6-005056af18ff/presentation/presentation-00000000.mp4"} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T23:38:37.057

使用仅将输入复制到输出的 XSLT 处理 XML - C# 代码：

```
 XslCompiledTransform transform = new XslCompiledTransform();
  transform.Load(@"c:\temp\id.xslt");
  transform.Transform(@"c:\temp\cdata.xml", @"c:\temp\clean.xml"); 
```

**id.xslt：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T23:56:44.537

使用 LINQ to XML，您可以这样做：

```
XDocument doc = …;

var cDataNodes = doc.DescendantNodes().OfType<XCData>().ToArray();

foreach (var cDataNode in cDataNodes)
    cDataNode.ReplaceWith(new XText(cDataNode)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:47:47.577

我认为您可以将 xml 加载到一个`XmlDocument`类中。然后递归处理每个`XmlNode`并寻找`XmlCDataSection`节点。该`XmlCDataSection`节点应替换为`XmlTextNode`相同的值。

# c# - Windows 窗体、循环和线程

> ID：10543422
> 
> 赞同：1
> 
> 时间：2012-05-10T23:18:05.500
> 
> 标签：c#, winforms, multithreading

我想做服务器应用程序。一开始它应该创建线程来组织每个连接并在 Listbox 中写入日志。我有问题，因为我不知道在哪里可以创建可以访问 Form1.Listbox1 的新线程。这是我尝试过的：

```
public class ServerLoop
{
    Form1 form1;
    public ServerLoop(Form1 f)
    {
        form1 = f;
    }
    public void loop()
    {
        form1.addConsoleMessage("test");
    }
} 
```

和 Form1 类：

```
public partial class Form1 : Form
{
    public Thread tServerLoop;
    public ServerLoop serverLoop;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        console.Items.Clear();
        players.Items.Clear();
        players.Items.Add("Witaj w serwerze");
        addConsoleMessage("test");
        serverLoop = new ServerLoop(this);
        tServerLoop = new Thread(serverLoop.loop);
        tServerLoop.Start();
    }

    private void connectButton_Click(object sender, EventArgs e)
    {

    }

    public void addConsoleMessage(String msg)
    {
        console.Items.Add(msg);
    }
} 
```

任何人都知道我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T04:09:42.797

好吧，您可以使用`Invoke`将委托编组回`ListBox`可以安全访问的 UI 线程。

```
public void loop() 
{
  form1.Invoke(new Action(
    () =>
    {
      form1.addConsoleMessage("test");
    }));
} 
```

但是，唉，这个选项是次要的。实际上，这些编组技术通常很糟糕。别弄错我的意思。（等等）有时间和地点`Invoke`，但这和许多情况一样，不是其中之一。

*   代码很丑陋，因为你必须`Invoke`到处调用。
*   它迫使您进入 UI 线程和工作线程紧密耦合的设计。
*   工作线程决定 UI 的更新频率。
*   这是低效的。
*   它可以淹没 UI 消息队列（至少它可以`BeginInvoke`）。
*   工作线程必须等待 UI 线程的响应才能继续（`Invoke`无论如何它都会继续）。

那么我将如何解决这个问题呢？好吧，当然是无聊的旧东西`System.Windows.Forms.Timer`和花哨的新`ConcurrentQueue<T>`东西。

```
public partial class Form1 : Form                    
{
  private ConcurrentQueue<string> queue = new ConcurrentQueue<string>();

  public Form1()                    
  {                    
    InitializeComponent();                    
  }                    

  private void Form1_Load(object sender, EventArgs e)                    
  {                    
    console.Items.Clear();                    
    console.Items.Add("test");
    players.Items.Clear();                    
    players.Items.Add("Witaj w serwerze");                    
    Task.Factory.StartNew(
      () =>
      {
        while (GetSomeCondition())
        {
          string value = GetSomeValue();
          queue.Enqueue(value);
        }
      });
  }                    

  private void YourTimer_Tick(object sender, EventArgs e)                    
  {                    
    string value;
    while (queue.TryDequeue(out value)
    {
      console.Items.Add(value);
    }
  }                                        
} 
```

那么我们现在有什么。

*   它看起来很优雅。
*   我们的后台任务只知道一个队列。紧密耦合已被破坏。
*   UI 线程现在决定更新频率……它应该是这样的。
*   它的效率要高得多。
*   UI 消息队列不可能被淹没。
*   最后，worker 可以愉快地加速，完全不知道 UI 线程在做什么。

但是，该解决方案并非完全没有缺点。现在我们的工作线程正在加速，它可能会为队列产生更多的项目，然后是 UI 线程可以消耗的项目。这通常不是问题，但有一些技术可以解决这个问题。

# java - 从外部生成线程检测另一个线程的实例

> ID：10543424
> 
> 赞同：1
> 
> 时间：2012-05-10T23:18:55.593
> 
> 标签：java, multithreading

我有一个线程，它在循环`A`内执行周期性动作。`while(running)`然后我有另一个线程，`B`，它侦听用户输入。当用户按下按钮时，线程`B`会生成一个新线程来执行任务（我们称其为 Thread 的实例`C`）。此任务涉及通过 Internet 发送信息，最多可能需要 20 秒。一次可以有多个`C`active 实例。

我遇到的问题是这个。`A`如果当前没有“C”类型的线程处于活动状态，我希望线程只运行它的代码。更清楚地说，线程 A 看起来像这样：

```
 class ThreadA extends Thread{

      public void run(){
            while(running){
                performAction();
                Thread.sleep(1000);
            }
      }
 } 
```

如果检测到一个实例`C`，那么显然我不想`performAction()`被调用。如果线程当前正在执行`performAction()`，那么我想在当前进度处停止它的执行。

我不确定如何继续，因为我不确定如何从线程 A 中获取生成线程的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:26:11.060

使用`java.lang.ThreadGroup`. 通过使用静态 ThreadGroup 构造 ThreadC 的所有实例，您可以维护 ThreadC 的所有实例并使用`ThreadGroup#activeCount()`. 只需在 ThreadA 中添加一个条件，仅当您的`public static ThreadC.threadGroup`字段在调用 activeCount() 时返回 0 时才调用 performAction()。

# magento - Magento - MultiSite - 共享购物车？

> ID：10543425
> 
> 赞同：0
> 
> 时间：2012-05-10T23:18:58.163
> 
> 标签：magento

我正在尝试在 1 个 magento 安装下设置 2 个站点。我使用了以下指南并创建了 2 个根类别： [http ://www.terranetwork.net/blog/2011/11/magento-multi-store-on-shared-cpanel-hosting-with-parked-domains/](http://www.terranetwork.net/blog/2011/11/magento-multi-store-on-shared-cpanel-hosting-with-parked-domains/)

指南的 .htaccess 部分中缺少的代码是： SetEnvIf Host 。*例子。*MAGE_RUN_CODE=示例 SetEnvIf 主机。*例子。*MAGE_RUN_TYPE=网站

它运行良好，但是两个站点之间不共享购物车。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:45:14.627

您是如何在 Magento 开设商店的？必须以特定方式设置它们才能协同工作。

我相信必须将这两家商店创建为在同一个网站上分开才能共享同一个购物车。

# haskell - GHC 编译库 undefined "main"

> ID：10543426
> 
> 赞同：2
> 
> 时间：2012-05-10T23:19:01.227
> 
> 标签：haskell, ghc

> **可能重复：**
> [如何将 Haskell 编译为静态库？](https://stackoverflow.com/questions/5131182/how-to-compile-haskell-to-a-static-library)

有人在使用链接到另一个库的 GHC 编译库时遇到问题吗？

文件：

```
module TestLib where
foreign export ccall test_me :: IO (Int)
foreign import "mylib_do_test" doTest :: IO ( Int )
test_me = doTest 
```

输出：

```
> ghc --version
The Glorious Glasgow Haskell Compilation System, version 7.0.4
> ghc TestLib.hs -o test -no-hs-main -L../libmylib -lmylib
Linking test ...
Undefined symbols:
  "_main", referenced from:
      start in crt1.10.6.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
> 
```

我使用“ar -r -s ...”制作了“libmylib.a”库文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:23:18.517

从 ghc-7 开始，默认模式是`--make`. 你想创建一个库，所以你必须用`-c`标志告诉 GHC。你不需要那个`-no-hs-main`时候。

```
 ghc -c TestLib.hs -o test.o 
```

作品。

一个例子：

### clib.h：

```
int doTest(void); 
```

### clib.c：

```
#include "clib.h"

int doTest(void){
    return 42;
} 
```

### 测试库.hs：

```
{-# LANGUAGE ForeignFunctionInterface #-}
module TestLib where

foreign export ccall test_me :: IO (Int)
foreign import ccall "clib.h" doTest :: IO ( Int )
test_me = doTest 
```

### libtest.c：

```
#include <stdio.h>
#include "TestLib_stub.h"

int main(int argc, char *argv[])
{
    hs_init(&argc, &argv);
    printf("%d\n", test_me());
    hs_exit();
    return 0;
} 
```

### 编译和执行：

```
$ ghc -c -o clib.o clib.c
$ ar -r -s libclib.a clib.o
ar: creating libclib.a
$ ghc TestLib.hs -c -o tlib.o
$ ar -r -s libtlib.a tlib.o
ar: creating libtlib.a
$ ghc -o nltest libtest.c -no-hs-main -L. -ltlib -lclib
$ ./nltest
42 
```

注意：这适用于 ghc >= 7.2; 对于 ghc-7.0.*，您还必须编译生成的`TestLib_stub.c`文件并使用`TestLib_stub.o`.

重要的一点是告诉 ghc在创建库时**不要**链接，只有在最终创建可执行文件时才链接。

# python - 如何在 Python 中访问模块级名称？

> ID：10543432
> 
> 赞同：1
> 
> 时间：2012-05-10T23:19:22.220
> 
> 标签：python

我有以下代码：

```
import m

def f(m=None):
    if m is None:
        k = m.M() # I want this m to refer to the imported module, not the parameter 
```

我真的更喜欢保持参数名称和模块名称相同。有没有办法明确引用模块 m？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:21:37.383

如果您不介意仅在导入模块中更改模块名称，您可以这样做：

```
import m as m_

def f(m=None):
    if m is None:
        k = m_.M() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T23:22:51.010

*如果您需要与通常*的模块名称相同的参数以提高代码的可读性，但可以容忍模块在此范围内临时重命名，您可以执行以下操作：

```
import m as _m

def f(m=None):
    if m is None:
        k = _m.M() 
```

不理想，但可能是你能得到的最接近的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T23:23:06.463

python 中的模块只是另一个对象，所以`globals()`-builtin 可以正常工作：

```
import m

def f(m=None):
    if m is None:
        k = globals()['m'].M() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T23:43:19.560

如果只是在这个函数中发生名称冲突，您总是可以在函数范围内重新导入模块并重命名它以避免歧义。

```
import m

def f(m=None):
    import m as the_real_m
    if m is None:
        k = the_real_m.M() 
```

`m`in`import m as the_real_m`可能有点令人困惑，但这里它不是*变量*引用，所以它解决错误的问题没有问题。

就个人而言，我宁愿重命名函数参数，但我意识到使用关键字参数，参数的名称可以是暴露给系统其他部分的接口的一部分，并且尽可能使用最清晰的名称可能更重要。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-10T23:25:01.417

您可以将参数 m 的默认值设置为模块的属性，如下所示：

```
import m

def f(m=m.M):
    m() 
```

但是，使用参数隐藏全局（模块名称）并不是最 Pythonic 的方法。更 Python 地，您可以将参数命名为 M，它与将要充当的方法 M 匹配。

```
import m

def f(M=m.M):
    M() 
```

这样，如果需要，您仍然可以引用模块的其他属性。

# text - TextLayout框架防止按下菜单按钮时取消选择

> ID：10543434
> 
> 赞同：0
> 
> 时间：2012-05-10T23:19:28.060
> 
> 标签：text, actionscript, flash, tlf

例如，我们创建一个 TextFlow 元素，其中包含一些文本。我们使它可编辑。按下粗体按钮时如何防止文本取消选择。

```
var text:String = "<b>hallo</b><ol><li>1</li><li>2</li></ol>";  
var textFlow:TextFlow;  
    textFlow = TextConverter.importToFlow(text, TextConverter.TEXT_FIELD_HTML_FORMAT);
var containerController:ContainerController = new ContainerController(this, 400, 400);           

textFlow.flowComposer = new StandardFlowComposer();
textFlow.flowComposer.addController(containerController);
textFlow.format = new TextLayoutFormat();
textFlow.interactionManager = new EditManager();                    
textFlow.flowComposer.updateAllControllers(); 
```

当按下添加到容器本身或另一个容器上的另一个按钮（Sprite）时，如何防止 EditManager（扩展 SelectionManager）取消选择文本。

**如果您在选择之外单击，它将取消选择当前选择。如何防止这种行为？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:45:26.550

selectionstate 不会仅重置执行蓝色格式的焦点。

```
textFlow.focus() 
```

行得通。

# python - 合并 gtk subpixbufs

> ID：10543435
> 
> 赞同：1
> 
> 时间：2012-05-10T23:19:38.017
> 
> 标签：python, gtk, gdkpixbuf

我目前在 python 中玩 gtk.pixbuf。在 API 中， subpixbuf 函数被描述为返回一个与原始 pixbuf 共享数据的 pixbuf ：

> subpixbuf() 方法创建一个新的 gtk.gdk.Pixbuf，它表示 pixbuf 的一个子区域。新的 pixbuf 与原始 pixbuf 共享其像素，因此写入其中一个会影响两者。

但...

当我试图在 subpixbuf 列表中划分一个 pixbuf 并为每个项目分配一个值时，原始 pixbuf 保持不变。

```
animation.subpixbuf=[]
animation.pixbuf.fill(self.LIGHT_SQ_COLOR)
for i in range(64) :
   animation.subpixbuf += [animation.pixbuf.subpixbuf((7-i%8)*self.sq_width (i/8)*self.sq_width,w,w)]
   animation.subpixbuf[i]=self.squares[63-i] 
```

关于如何从一堆 subpixbufs 组成一个 pixbuf 的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:04:27.370

当您这样做时`animation.subpixbuf[i]=self.squares[63-i]`，您将分配`subpixbuf[i]`给一个新的 Pixbuf 对象。您不会更改以前存储在`subpixbuf[i]`.

要做你想做的事，你应该看看`copy_area`Pixbuf 类的方法。

# r - 如何在R中绘制标准正态分布

> ID：10543443
> 
> 赞同：16
> 
> 时间：2012-05-10T23:20:46.903
> 
> 标签：r, plot, distribution, draw

> **可能重复：**
> [在 R 中制作标准正态分布](https://stackoverflow.com/questions/10488988/making-a-standard-normal-distribution-in-r)

> 使用 R，绘制标准正态分布。在 (10) 平均值之上和之下标记平均值和 3 个标准差。在 x 和 y 轴上包含信息标题和标签。

这是一个家庭作业问题。我不确定如何使用代码。我应该如何开始？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-10T23:35:40.033

我很确定这是[重复](https://stackoverflow.com/a/10489547/1317221)的。不管怎样，看看下面这段代码

```
x <- seq(5, 15, length=1000)
y <- dnorm(x, mean=10, sd=3)
plot(x, y, type="l", lwd=1) 
```

我相信你可以自己解决剩下的问题，因为你可能想要寻找名为的标题`main=`和`y-axis`标签也取决于你。

如果您想查看更多分布的尾部，为什么不尝试使用该`seq(5, 15, )`部分？最后，如果您想了解更多有关`dnorm`正在做什么的信息，我建议您看[这里](http://ww2.coastal.edu/kingw/statistics/R-tutorials/prob.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-11T10:04:18.097

顺便说一句，除了自己生成*x*和*y*坐标之外，您还可以使用`curve()`函数，该函数旨在绘制与函数对应的曲线（例如标准法线函数的密度）。

看

```
help(curve) 
```

及其示例。

如果您想添加 som 文本以正确标记均值和标准差，您可以使用该`text()`函数（另请参阅`plotmath`，以获取带有数学符号的注释）。

看

```
help(text)
help(plotmath) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T23:40:59.770

大概是这样的？

```
x<-rnorm(100000,mean=10, sd=2)
hist(x,breaks=150,xlim=c(0,20),freq=FALSE)
abline(v=10, lwd=5)
abline(v=c(4,6,8,12,14,16), lwd=3,lty=3) 
```

# c - 使用 SINGLESTEP 通过 ptrace 获取返回值

> ID：10543444
> 
> 赞同：4
> 
> 时间：2012-05-10T23:21:07.733
> 
> 标签：c, linux, ptrace

我正在 Linux 64 位下开发一个小调试器，但在寻找系统调用的返回值时遇到了麻烦，

我正在测试 RIP 值，我的意思是我做一个 PEEK_USERDATA 和 ptrace 给我操作码以返回没有 RIP 地址，直接这样（其中 0x050f 是 SYSCALL 的操作码）：

```
if (rip & 0x0000ffff == 0x050f) 
```

然后获取系统调用名称参数等

问题是我如何获得这些系统调用的返回值，我知道 ptrace 提供 PTRACE_SYSCALL 来警告我们进入/离开内核模式，但我想直接检查 RIP 值，所以我使用 SINGLESTEP，我检查了如果我的 rip 匹配 SYSLEAVE 和 SYSEXIT 操作码，但它永远不会。我可以检查返回值的唯一方法实际上是检查我的 orig_rax 但我不会以这种方式获得 exit_group retval。

我知道 Linux ABI 希望将返回值存储在 RAX 中，但我不知道如何见证返回用户空间。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:33:50.297

您无法 ptrace 内核，因此如果您在 SYSCALL 处停止后执行另一个 PTRACE_SINGLESTEP 或 PTRACE_SYSCALL，它将执行系统调用并在返回后在下一条指令处停止。此时，您可以检查寄存器以查看系统调用的返回值是什么。

# c# - OOP，为什么对象初始化不正确？

> ID：10543448
> 
> 赞同：0
> 
> 时间：2012-05-10T23:21:22.433
> 
> 标签：c#, .net

我在以 OO 方式编码时遇到了一点问题。

这是我的代码：

```
 public class BasicEngine
{
    public    string name = null;
    public  string id = null;

    public BasicEngine()
    {
        name = "Name of basic engine type";
        id = "Basic engine id here";
    }

}

public class SuperEngine: BasicEngine  
{
    public  string name = null;
    public  string address = null;

    public SuperEngine()
    {
        name = "Name of super engine here";
        address  = "Super engine  address here";
    }

} 
```

我通过以下方式制作这些类的对象：

```
 BasicEngine e1 = new BasicEngine();
       MessageBox.Show("e1 type is " + e1.GetType().ToString());

       SuperEngine e2 = new SuperEngine();
       MessageBox.Show("e2 is " + e2.GetType().ToString());

       BasicEngine e3 = new SuperEngine();
       MessageBox.Show("e3 is " + e3.GetType().ToString());

       SuperEngine e4 =BasicEngine(); // error An explicit conversion exist (are you missing cast ?) and if I try to cast it like    SuperEngine e4 =(SuperEngine ) new BasicEngine(); it give run time error. 
```

e1 应该是 BasicEngine 。e2 应该是 SuperEngine。

以下是我的困惑和问题：

1.  e3 是 BasicEngine 类型，它显示了它的数据，我希望它是 SuperEngine 类型，为什么会这样？

2.  e4 给出错误：错误`An explicit conversion exist (are you missing cast ?)`，如果我尝试像 `SuperEngine e4 =(SuperEngine ) new BasicEngine();`它一样投射它会给出运行时错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:28:28.680

Q1：这是因为`e3`被声明为 type `BasicEngine`。因为`SuperEngine`继承自`BasicEngine`和`e3`IS a `BasicEngine`，所以它将运行`BasicEngine`构造函数。

Q2：您的语法是错误的。您需要这样做`SuperEngine e4 = new BasicEngine();`，但这仍然会引发错误。这是因为`BasicEngine`构造函数不知道如何创建 a `SuperEngine`，因此不会。父类不知道他们的派生孩子，但派生孩子知道他们的父母。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T23:56:36.463

Q1：它是一个SuperEngine，但是e3.name是“基本引擎类型的名称”，因为name是

1.  一个领域
2.  并且不是虚拟的（并且字段不能是虚拟的）

但是如果你调用 ((SuperEngine)e3).name 你会看到“这里的超级引擎名称”。

Q2：用现实世界的例子来解释：所有的卡车都是汽车，但不是所有的汽车都是卡车。如果您假装任何汽车是卡车 - 当您尝试“转储（）”或“运输（）”时，您将失败，因为并非所有汽车都使用卡车齿轮进行初始化。

# php - 说服电子邮件客户端不要内联显示 html 附件？

> ID：10543451
> 
> 赞同：1
> 
> 时间：2012-05-10T23:21:42.480
> 
> 标签：php, phpmailer

问题：我发送了一封包含复杂 html 附件的电子邮件（使用 phpmailer 和 sendmail）。我不希望电子邮件客户端尝试显示附件，因为它太复杂而无法在邮件阅读器中查看。

据我所知，这样做的方法是设置`content-Disposition`为`attachment`. phpmailer 中的默认设置是`attachment`无论如何设置。然而，Thunderbird（迄今为止我测试过的唯一客户端）确实会尝试显示 html。如果我在 Thunderbird 中查看标题，我看不到`Content-Disposition`，但如果我保存邮件，我可以看到：

```
--b1_420d367a26870bbc3bae73fb1de31f49
Content-Type: application/octet-stream; name="chart.html"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="chart.html" 
```

Thunderbird 为附件提供了正确的名称，因此它可能理解`Content-Disposition`. 我可以用 phpmailer 做些什么来阻止客户端显示 html 附件，或者客户端可以做他们想做的事吗？

发送压缩文件并不是一个真正的选择——用户可能不够成熟，不知道如何处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:09:25.837

> David :Bienvenu 2006-04-07 12:49:31 PDT 由于历史原因，这是故意这样做的，并且自 Netscape 2.0 和 Mozilla 1.0 以来一直如此......我们显示内联附件，我们知道如何显示，除非你关闭视图 | 内联附件。也许我们可以添加一个首选项来尊重所有附件类型的内容配置。

[https://bugzilla.mozilla.org/show_bug.cgi?id=147461](https://bugzilla.mozilla.org/show_bug.cgi?id=147461)

至少自 2002 年以来，这一直是一种已知行为。就强制它不内联显示而言，我不确定它是否可以完成，除非用户设置了 bug 报告中提到的首选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T01:22:42.003

将其另存为pdf怎么样？

你可以看看《[用 PHP 将 HTML + CSS 转换成 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)》

# cocoa - 从 IB 中创建的对象访问属性 - Cocoa

> ID：10543458
> 
> 赞同：0
> 
> 时间：2012-05-10T23:22:16.767
> 
> 标签：cocoa, properties

我有一个`NetworkSection`用 IB 中创建的相应对象调用的类。在界面中，我有一个名为 的 NSMatrix 属性`IVBSpecificationMenu`。我想通过 ResultSection 类访问该 NSMatrix 对象，该类也在 IB 中初始化。

看来我做错了什么。我创建了属性，将插座链接到 NetworkSection 对象，导入了 NetworkSection.h 文件，但在 ResultSection 实现中，IVBSpecificationMenu 对象似乎不可用。

**节.h：**

```
#import <Foundation/Foundation.h>

@interface NetworkSection : NSObjectController { 

    IBOutlet NSTextField *IVBhostPerNetwork;
    IBOutlet NSTextField *IVBamountOfNetworks;
}

@property (retain) IBOutlet NSMatrix *IVBSpecificationMenu;

- (IBAction)enableSpecificationTextField:(id)sender;

@end 
```

**结果节.h：**

```
#import <Foundation/Foundation.h>
#import "NetworkSection.h"

@interface ResultSection : NSObjectController{

    IBOutlet NetworkSection *NetworkSection;

}

- (IBAction)CalculateResults:(id)sender;
- (void)SpecificationSection;
- (void)subnetMaskSection;
@end 
```

这是从另一个类访问属性的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:41:07.393

我不确定这是否有帮助......但让我尖叫的是接口文件行`IBOutlet NetworkSection *NetworkSection;`中变量的名称。`ResultSection`

也许变量名 ( `NetworkSection`) 与类型名 (also `NetworkSection`) 冲突。尝试将变量名称更改为类似`networkSection`or `_networkSection`。

# sql - 如何在按 column1 分组的每个组中收集 column2 的所有不同值？

> ID：10543460
> 
> 赞同：0
> 
> 时间：2012-05-10T23:22:37.180
> 
> 标签：sql, select, group-by, distinct

```
SELECT DISTINCT property1, property2, SUM(property3) FROM t GROUP BY property1; 
```

这给

```
p11 p211 sum(p311, p312, ...)
p12 p221 sum(p321, p322, ...) 
```

但我想要

```
p11 (p211, p212, ...) sum(p311, p312, ...)
p12 (p221, p222, ...) sum(p321, p322, ...) 
```

或包含等效信息的东西。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:38:16.277

MySQL 提供了一个`GROUP_CONCAT`功能，可以完全满足您的需求：

```
SELECT property1, GROUP_CONCAT(property2), SUM(property3) FROM t GROUP BY property1; 
```

我不知道其他 RDBMS 中的等价物是什么。

# javascript - 将 iscroll.js 与 timesheet.js 幻灯片音频同步相结合

> ID：10543461
> 
> 赞同：3
> 
> 时间：2012-05-10T23:22:39.810
> 
> 标签：javascript, audio, slideshow, sync, smil

我希望能够使用 iscroll.js 的向左/向右滑动功能到 timesheet.js SMIL Timing 幻灯片引擎与音频同步。

向左或向右滑动可推进幻灯片/音频。

iscroll.js：[http ://cubiq.org/iscroll](http://cubiq.org/iscroll)

timesheet.js 音频同步演示：[http ://wam.inrialpes.fr/timesheets/slideshows/audio.html](http://wam.inrialpes.fr/timesheets/slideshows/audio.html)

# matlab - 将数据与 Matlab 函数句柄一起传递

> ID：10543470
> 
> 赞同：1
> 
> 时间：2012-05-10T23:23:43.343
> 
> 标签：matlab

```
for i = 2:6
    exp.pico_list(i).config(@configSlave,0); % 0 indicates non-terminal slave node
end 
```

上面的代码在 Matlab 中不起作用。它抱怨我向 exp.pico_list(i).config 传递了太多输入参数，这是真的。Config 只需要一个函数句柄。但是，函数 configSlave 有两个参数。第一个由 config 函数提供，而第二个是常量（在本例中为 0）。将零与函数句柄一起传递的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:31:17.700

如果要为通常需要两个输入的函数创建一个接受一个输入的函数句柄，则使用匿名函数：

```
fh = @(x)configSlave(x,0) 
```

Now`fh`是一个接受一个输入参数的函数的句柄。此参数将用作 的第一个参数`configSlave`，而 的第二个参数`configSlave`固定为零。

# ruby-on-rails - 从 Ruby 哈希中提取数组

> ID：10543471
> 
> 赞同：0
> 
> 时间：2012-05-10T23:23:46.517
> 
> 标签：ruby-on-rails, ruby

我有以下哈希 -

`{ result: [ {id: 378, name: 'Pete'}, {id: 567, name: 'Pete'} ] }`

我想从这个哈希中提取 id 的数组，像这样 -

`[378, 567]`

除了遍历结果数组之外，最短的方法是什么。有一个 map 方法，但我不太确定如何使用它。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:28:08.250

这个[`map`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)方法很方便。如果您的输入如下所示：

```
input = { :result => [ {:id => 378, :name => 'Pete'}, {:id => 567, :name => 'Pete'} ] } 
```

您可以像这样提取`ids`：

```
ids = input[:result].map{ |obj| obj[:id] }

puts ids.inspect 
```

[检查出来](http://codepad.org/WCHqAaI4)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T10:46:21.277

我没有使用 map 来获取这些值。您可以使用以下技术：

```
 a = { result: [ {id: 378, name: 'Pete'}, {id: 567, name: 'Pete'} ] }
    i= [0,1]
    output_value  = []
    for b in i 
            output_value  << a.values[0][b][:id]
    end 

    output_value 
```

# matlab - Matlab（或 Octave）中网格网格的矢量化

> ID：10543472
> 
> 赞同：6
> 
> 时间：2012-05-10T23:23:47.923
> 
> 标签：matlab, parallel-processing, octave, vectorization

Matlab 中的矢量化代码比 for 循环运行得快得多（请参阅[单台机器上的 Octave 中的并行计算——Octave](https://stackoverflow.com/questions/10520495/parallel-computing-in-octave-on-a-single-machine-package-and-example/10543033#10543033)中具体结果的包和示例）

话虽如此，有没有办法对接下来在 Matlab 或 Octave 中显示的代码进行矢量化？

```
x = -2:0.01:2;
y = -2:0.01:2;
[xx,yy] = meshgrid(x,y);
z = sin(xx.^2-yy.^2); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T07:08:31.360

正如@Jonas 所指出的，MATLAB 中有几个可用的选项，哪个效果最好取决于几个因素，例如：

*   你的问题有多大
*   你有多少台机器可用
*   你有GPU吗
*   MATLAB 是否已经对操作进行了多线程处理

现在，MATLAB 中的许多元素操作都是多线程的 - 在这种情况下，使用 PARFOR 通常没有什么意义（除非您有多台机器和 MATLAB 分布式计算服务器许可证）。

真正需要多台机器内存的大问题可以从[分布式阵列](http://www.mathworks.co.uk/help/toolbox/distcomp/bquvksw.html)中受益。

如果您的问题具有适合 GPU 计算的大小和类型，则使用 GPU 可以超越单台机器的多线程性能。矢量化代码往往最适合通过 GPU 进行并行化。例如，您可以`gpuArray`像这样使用 Parallel Computing Toolbox 中的 s 编写代码，并让所有内容都在 GPU 上运行。

```
x = parallel.gpu.GPUArray.colon(-2,0.01,2);
y = x;
[xx,yy] = meshgrid(x,y); % xx and yy are on the GPU
z = arrayfun( @(u, v) sin(u.*u-v.*v), xx, yy ); 
```

我将那里的最后一行转换为调用，因为使用s`arrayfun`时效率更高。`gpuArray`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-06T13:58:24.093

# 和的矢量`meshgrid`化`ndgrid`

如果您仍然有兴趣找到一个矢量化实现以使`meshgrid`问题中的基于代码更快，让我建议一个矢量化方法，`bsxfun`它是 GPU 移植版本。我坚信人们必须将其`vectorization with GPUs`视为加快`MATLAB`代码速度的有希望的选择。使用`meshgrid`or`ndgrid`并且其输出将通过一些元素操作进行操作`bsxfun`的代码为这些代码提供了完美的基础。除此之外，将 GPU 与 结合使用`bsxfun`，使其能够独立处理具有成百上千个可用 CUDA 内核的元素，使其非常适合 GPU 实现。

对于您的具体问题，输入是 -

```
x = -2:0.01:2;
y = -2:0.01:2; 
```

接下来，你有 -

```
[xx,yy] = meshgrid(x,y);
z = sin(xx.^2-yy.^2); 
```

随着`bsxfun`，这变成了一个单行 -

```
z = sin(bsxfun(@minus,x.^2,y.^2.')); 
```

# 基准测试

GPU 基准测试技巧取自[Measure and Improvement GPU Performance](http://www.mathworks.in/help/distcomp/measure-and-improve-gpu-performance.html)。

```
%// Warm up GPU call with insignificant small scalar inputs
temp1 = sin_sqdiff_vect2(0,0);

N_arr = [50 100 200 500 1000 2000 3000]; %// array elements for N (datasize)
timeall = zeros(3,numel(N_arr));

for k = 1:numel(N_arr)
    N = N_arr(k);
    x = linspace(-20,20,N);
    y = linspace(-20,20,N);

    f = @() sin_sqdiff_org(x,y);%// Original CPU code
    timeall(1,k) = timeit(f);
    clear f

    f = @() sin_sqdiff_vect1(x,y);%// Vectorized CPU code
    timeall(2,k) = timeit(f);
    clear f

    f = @() sin_sqdiff_vect2(x,y);%// Vectorized GPU(GTX 750Ti) code
    timeall(3,k) = gputimeit(f);
    clear f
end

%// Display benchmark results
figure,hold on, grid on
plot(N_arr,timeall(1,:),'-b.')
plot(N_arr,timeall(2,:),'-ro')
plot(N_arr,timeall(3,:),'-kx')
legend('Original CPU','Vectorized CPU','Vectorized GPU (GTX 750 Ti)')
xlabel('Datasize (N) ->'),ylabel('Time(sec) ->') 
```

**相关功能**

```
%// Original code
function z = sin_sqdiff_org(x,y)
[xx,yy] = meshgrid(x,y);
z = sin(xx.^2-yy.^2);
return;

%// Vectorized CPU code
function z = sin_sqdiff_vect1(x,y)
z = sin(bsxfun(@minus,x.^2,y.^2.')); %//'
return;

%// Vectorized GPU code
function z = sin_sqdiff_vect2(x,y)
gx = gpuArray(x);
gy = gpuArray(y);
gz = sin(bsxfun(@minus,gx.^2,gy.^2.')); %//'
z =  gather(gz);
return; 
```

# 结果

![在此处输入图像描述](../Images/8ac591c21663372173768d0e23fcfa5a.png)

# 结论

结果表明，使用 GPU 的矢量化方法显示出良好的性能改进，这`4.3x`与矢量化 CPU 代码和`6x`原始代码相比。请记住，GPU 必须克服设置所需的最小开销，因此至少需要一个合适大小的输入才能看到改进。希望人们会探索更多`vectorization with GPUs`，因为它的压力不够大！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T01:16:44.927

在 Matlab 中，将内置向量化函数用于多线程的唯一方法是等待 MathWorks[实现它们](http://www.mathworks.com/support/solutions/en/data/1-4PG4AN/?solution=1-4PG4AN)。

或者，您可以将矢量化计算编写为一个循环，并使用`parfor`.

最后，许多函数都[支持 GPU](http://www.mathworks.com/help/toolbox/distcomp/bsic4fr-1.html#bsloua3-1)，因此通过访问并行处理工具箱，您可以并行化这些操作，包括减法和逐元素运算。

# ios - 如何将自定义项目添加到导航栏

> ID：10543473
> 
> 赞同：0
> 
> 时间：2012-05-10T23:23:50.107
> 
> 标签：ios, cocoa-touch, uibarbuttonitem

我已经使用不同类型的代码为我的导航栏添加自定义项而奋斗了几个小时。不幸的是它失败了，并且没有调试错误。现在我只能更改栏的标题。

代码添加到特定 ViewController 的 viewDidLoad 方法中：

```
UIBarButtonItem *gotoNext = [[UIBarButtonItem alloc] initWithTitle:@"Goto next" style:UIBarButtonItemStylePlain target:self action:@selector(gotoNextAction)];

self.navigationItem.rightBarButtonItem = gotoNext; 
```

我尝试了以下代码，但不幸的是没有任何运气：

```
UIView* container = [[UIView alloc] init];
UIButton * button = [[UIButton alloc] init];

[button setTitle:@"Test" forState:UIControlStateNormal];

[container addSubview:button];

UIBarButtonItem* item = [[UIBarButtonItem alloc] initWithCustomView:container];

self.navigationItem.rightBarButtonItem = item; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:50:03.930

我唯一能看到您的代码有问题的是您的选择器名称末尾缺少冒号。它应该是：

```
UIBarButtonItem *gotoNext = [[UIBarButtonItem alloc] initWithTitle:@"Goto next" style:UIBarButtonItemStylePlain target:self action:@selector(gotoNextAction:)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T05:33:17.737

为此，您必须在导航栏项目中添加自定义视图

```
UIBarButtonItem *bi = [[UIBarButtonItem alloc]
                       initWithCustomView:myButton]; 
```

有关更多详细信息，请参阅以下链接

[在导航栏中添加栏按钮项](https://stackoverflow.com/questions/6120001/adding-bar-button-item-in-navigation-bar)

[如何将几个 UIBarButtonItems 添加到 NavigationBar？](https://stackoverflow.com/questions/8431435/how-to-add-several-uibarbuttonitems-to-a-navigationbar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-13T07:16:02.617

您可以为 UIBarButtonItem 编写一个类别。

```
+ (instancetype)itemWithImage:(UIImage *)buttonImage
              buttonTitle:(NSString *)title
              buttonFrame:(CGRect)frame
                   target:(id)target
                   action:(SEL)action{
    UIButton *button = [[UIButton alloc]initWithFrame:frame];
    [button setTitle:title forState:UIControlStateNormal];
    [button setImage:buttonImage forState:UIControlStateNormal];
    [button addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];
    return [[UIBarButtonItem alloc]initWithCustomView:button];
  } 
```

# sql-server - SQL Server 索引 - 索引中要包含哪些列？

> ID：10543474
> 
> 赞同：6
> 
> 时间：2012-05-10T23:23:55.400
> 
> 标签：sql-server

*Q1*：在 SQL Server 数据库中为外键列创建索引是否值得？

*Q2*：如果我在 SQL Server 数据库中有两个相关的表，并且我想在外键列上创建索引以提高性能，我需要在索引中包含哪些列以及哪种类型的索引最适合？

例如...

`Table1`

Table1ID int（主键）

`Table2`

Table2ID int（主键）
Table1ID int（外键）

..我是只使用 Table1ID 为 Table2 创建一个索引，还是还需要包含主键（Table2ID）。

*Q3*：如果我扩展示例以包含与 Table1 和 Table2 相关的第三个表，我是为每一列创建一个索引还是为两列创建一个索引？

`Table3`

Table3ID int（主键）
Table1ID int（外键）
Table2ID int（外键）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T23:34:44.993

Q1。**是**的。（如果您发现它们没有被经常使用，您可以随时删除它们）。

Q2。我会只使用 Table1ID 为 Table2 创建一个索引吗？**是**的。假设索引的主要用途是帮助优化器连接这两个表。（而不是满足作为整体查询工作负载一部分的其他查询）。

Q3。**是**的。每个带有外键的列都应该有一个指向其父键表的单独索引。

（假设你有一个 OLTP 数据库而不是 OLAP 数据库）

这篇文章提供了 TSQL，它将生成数据库中所有缺失的外键索引的脚本：[TSQL：生成缺失的外键索引](http://mitch-wheat.blogspot.com.au/2011/09/tsql-generate-missing-foreign-key.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:53:59.320

您正在考虑创建的索引都不是一个坏主意。但是，如果您正在寻找性能度量，则需要查看最常使用表的方式。WHERE 子句中的哪些列最多；并将您的索引建立在这些基础上。

还要寻找最佳基数并将其放在 WHERE 子句的顶部。还要考虑分区。

# python - 使用正则表达式在 Python 中进行字符串拆分

> ID：10543480
> 
> 赞同：11
> 
> 时间：2012-05-10T23:25:05.180
> 
> 标签：python, regex

我正在尝试在 Python 中拆分一个字符串，以便在某个正则表达式之前获得所有内容。

示例字符串：`"Some.File.Num10.example.txt"`

我需要这部分之前的所有内容：`"Num10"`，正则表达式：（`r'Num\d\d'`数量会有所不同，可能会发生什么）。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T23:40:34.670

```
>>> import re
>>> s = "Some.File.Num10.example.txt"
>>> p = re.compile("Num\d{2}")
>>> match = p.search(s)
>>> s[:match.start()]
'Some.File.' 
```

这将比进行拆分更有效，因为搜索不必扫描整个字符串。它在第一场比赛中中断。在您的示例中，由于字符串很短，因此不会有所不同，但是如果您的字符串很长并且您知道匹配将在开头，那么这种方法会更快。

我刚刚写了一个小程序来分析 search() 和 split() 并确认了上述断言。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-10T23:34:30.570

```
>>> import re
>>> text = "Some.File.Num10.example.txt"
>>> re.split(r'Num\d{2}',text)[0]
'Some.File.' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T23:29:13.513

你可以使用 Python 的[`re.split()`](http://docs.python.org/library/re.html#re.split)

```
import re

my_str = "This is a string."

re.split("\W+", my_str)

['This', 'is', 'a', 'string', ''] 
```

# ios - 具有共享依赖项的多个静态库 - iOS

> ID：10543481
> 
> 赞同：3
> 
> 时间：2012-05-10T23:25:15.107
> 
> 标签：ios, xcode, linker, static-libraries

我正在开发几个 iOS 项目，这些项目将有很多共享代码，所以我在静态库中收集这些代码。

现在假设我正在使用 3 个静态库：

1.  Lib A 包含通用实用程序函数
2.  Lib B 包含一组类
3.  Lib C 包含第二组类

（并且 A 是 B 和 C 的依赖项）

现在，我的最终项目需要利用所有三个库的功能。我知道 A 可以与 B、C 和我的最终项目静态链接，但那时我会收到链接器错误，因为相同类有多个实现。

这样的情况应该如何处理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T15:22:21.550

对于其他对此感到疑惑的人，我发现您可以通过在每个库中包含头文件来获得我想要的行为，但只能与一个库链接。

在我在问题中概述的示例中，我的主要项目将链接到 A、B 和 C。但是，要在库 B 和 C 中使用 A，您可以在 B 和 C 中包含 A 的头文件，但只能链接到A 在根项目中。

如果有人有更好的建议，请随时分享。

顺便说一句，有一个名为[Cocoapods](http://cocoapods.org/)的项目，它是一个 iOS 依赖管理器。似乎值得关注。

# php - 如何同时使用 Google Drive API 和 chrome 网络支付许可 API

> ID：10543483
> 
> 赞同：3
> 
> 时间：2012-05-10T23:25:26.287
> 
> 标签：php, google-docs-api, google-drive-api, chrome-web-store

更新以澄清问题...

在尝试 google drive example app Dr edit for php 在我们已经成功实现许可 API [https://developers.google.com/chrome/web-store/docs/samples#php](https://developers.google.com/chrome/web-store/docs/samples#php)的测试应用程序中工作时，我们得到了一个'错误保存”消息和来自 dredit.js 尝试将错误记录到控制台的语法错误。

我们意识到我们需要用一些需要的信息来更新现有的应用程序 manifest.json，将 CONTAINER 设置为 GOOGLE_DRIVE 和来自 API 控制台的 id。

然而，这带来了来自开发人员仪表板的警告，这让我们感到难过，因为我们的任务似乎是不可能的：

> *   在清单中指定 CHROME 以外的容器的应用可能不会使用 Chrome 网上应用店付款。

Catch22：对容器使用 CHROME（显然是默认值）或 GOOGLE_DRIVE？

所以这就是我们的问题：我们想在 php 中合并驱动器和 chrome 网上商店支付，我不确定驱动器和许可 API 的教程如何协调容器。我们是否没有读到启用 GDrive 的应用程序必须是免费的？

注意：更复杂的是，现在似乎很多通过文档列表 API 访问文档的解决方案已被弃用，例如 authsub 和 oauth 1.0 解决方案。理想情况下，我们不希望编写一个在 2015 年停止工作的 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:05:09.150

Google Drive API 目前是全新的。Google 已确定这是一个错误，并将修复该问题。谢谢各位！

在那之前，我们可以为我们的应用程序收费并通过文档列表 api 访问相同的数据。

# android - 如何在 osm/mapsfrge 上绘制位图

> ID：10543485
> 
> 赞同：-1
> 
> 时间：2012-05-10T23:25:41.447
> 
> 标签：android, osmdroid

我正在为 android 开发一个小应用程序，用位图显示 GPS 位置。我在谷歌地图中使用了一些示例代码，但我必须使用地图伪造。不幸的是，我还没有找到任何示例代码或任何有关如何编写此绘图操作的信息。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:29:08.837

查看 ItemizedOverlay 类的来源，特别是它的 draw() 和 onDrawitem() 方法：[ItemizedOverlay.java](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/views/overlay/ItemizedOverlay.java)。

该类在画布上绘制一个可绘制**标记。**

您可以使用类似的代码来绘制自己的 Drawable。或者您可以实现 ItemizedIconOverlay 类，将一个或多个 OverlayItem 的集合添加到 ItemizedIconOverlay 并使用[OverlayItem](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/views/overlay/OverlayItem.java) setMarker 方法将 Drawable 设置为图标。

# opengl - 如何将模型/纹理分配给 GLUT 形状？

> ID：10543490
> 
> 赞同：0
> 
> 时间：2012-05-10T23:26:25.783
> 
> 标签：opengl, 3d, glut

我在 glut 绘制的 openGL 中有一个简单的 3D 立方体：

```
glLoadIdentity();
glTranslatef(0.0f,0.0f,-5.0f);
glutWireCube(2.0f); 
```

现在，如果我使用一个非常简单的模型/纹理（比如在 photoshop 中绘制的 RAW 文件），那么我该如何分配这些纹理（对于一个立方体，我可能会制作一个“面”模型并简单地将其显示在 6立方体的面）到代码中的形状，这样当我操纵形状时 - 调整大小，平移等 - 纹理/模型会随着形状而变化？

# sql-server - 如何在现有 FK 的父级上添加唯一约束？

> ID：10543494
> 
> 赞同：0
> 
> 时间：2012-05-10T23:26:53.687
> 
> 标签：sql-server, foreign-keys, constraints

考虑这些表格：

联赛 [ id,name ]

球队 [id,name,leaguesid]
FK: (leaguesid) -> (leagues.id)
AK: (leaguesId) UNIQUE /*球队可以在一个联赛*/

玩家 [id,name]

player_teams [playersid,teamsid]
FK: (playersid) -> player.id, teamsid -> teams.id
AK: (playersid,teamsid) UNIQUE /*玩家不能在同一队两次*/

这很好用，但我需要一个约束来防止同一名球员多次出现在同一个联赛中。这可以在不创建players_league 表或将leagueid 添加到该表的情况下完成吗？这些选项似乎增加了非规范化/开销，因为我已经可以根据他们的球队确定球员所在的任何联赛。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:38:53.483

解决此类问题的一种好（？）方法是添加一个检查约束，可能在 player_teams 表上，基于用户定义的函数，例如返回一个 bool 值。

微软

[http://msdn.microsoft.com/en-US/library/ms188258%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-US/library/ms188258%28v=sql.105%29.aspx)

或者也

[http://sqlblogcasts.com/blogs/tonyrogerson/archive/2008/02/07/using-a-udf-in-a-check-constraint-to-check-validity-of-history-windows-start-end-日期-windows.aspx](http://sqlblogcasts.com/blogs/tonyrogerson/archive/2008/02/07/using-a-udf-in-a-check-constraint-to-check-validity-of-history-windows-start-end-date-windows.aspx)

或在这里

[http://connectsql.blogspot.com/2011/01/sql-server-function-based-check.html](http://connectsql.blogspot.com/2011/01/sql-server-function-based-check.html)

或... google 检查约束 udf sql server

# ruby-on-rails - 在 Rails 中创建预留

> ID：10543495
> 
> 赞同：1
> 
> 时间：2012-05-10T23:26:54.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, associations

我有一个应用程序，允许用户创建负载并对它们进行投标。

我想要一种方法来完成应用程序并保留投标，然后将处理信用卡，但我在设置保留模型时遇到问题。这是设置：

模型及其关联：

```
class Reservation < ActiveRecord::Base
  belongs_to :load
  belongs_to :bid

  validates :load_id, presence: true
  validates :bid_id, presence: true
end

class Load < ActiveRecord::Base
  has_many :bids, :dependent => :delete_all
  has_one :reservation
end

class Bid < ActiveRecord::Base
  belongs_to :load
  has_one :reservation
end 
```

预留迁移仅包括对这两个表的引用。在我的预订控制器中，我有以下代码：

```
class ReservationsController < ApplicationController

  before_filter :find_load
  before_filter :find_bid 

  def new
    @reservation = @load.build_reservation(params[:reservation])
  end

  def create
    @reservation = @load.build_reservation(params[:reservation].merge!(:bid_id => params[:bid_id])) 
    if @reservation.save
      flash[:notice] = "Reservation has been created successfully"
      redirect_to [@load, @bid]
    else
      render :new
    end
  end

  def find_load
    @load = Load.find(params[:load_id])
  end

  def find_bid
    @bid = Bid.find(params[:bid_id])
  end
end 
```

在我的配置路由文件中，我有以下内容：

```
resources :loads do 
  resources :bids do 
    resources :reservations
  end
end 
```

预留模型的迁移如下所示：

```
def change
  create_table :reservations do |t|
    t.references :load
    t.references :bid
    t.timestamps
  end
end 
```

查看代码：

```
<h4>Reserve this bid: </h4>
  <dl>
    <dt>Carrier</dt>
    <dd><%= @bid.user.email %></dd>
    <dt>Bid Amount:</dt>
    <dd><%= @bid.bid_price %></dd>
 </dl>

<%= form_for [@load, @bid, @reservation], :html => {:class => 'payment_form'} do |f| %>
  <%= f.error_messages %>
<fieldset>
  <div class="field">
    <%= label_tag :card_number, "Credit Card Number" %>
    <%= text_field_tag :card_number, nil, name: nil %>
  </div>
  <div class="field">
    <%= label_tag :card_code, "Security Code on Back of Card (CVV)" %>
    <%= text_field_tag :card_code, nil, name: nil %>
  </div>
  <div class="field">
    <%= label_tag :card_month, "Card Expiration" %>
    <%= select_month nil, { add_month_numbers: true }, { name: nil, id: "card_month" } %>
    <%= select_year nil, { start_year: Date.today.year, end_year: Date.today.year+15 },
  { name: nil, id: "card_year" } %>
 </div>
</fieldset> 
```

当我提交表单时，我收到以下验证错误：“投标不能为空”。看起来表单提交的投标是`nil`，我不确定它为什么这样做。我不相信第一行代码在我的控制器创建操作中是正确的，我已经尝试了所有我能想到的排列，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T00:23:22.250

由于您的表单不包含您要保存的任何数据，您可以简单地执行以下操作：

```
@reservation = @load.build_reservation(:bid_id => @bid.id) 
```

如果您添加将来要保存的预订字段，`params[:reservation]`则不会`nil`，您将能够：

```
@reservation = @load.build_reservation(params[:reservation].merge(:bid_id => @bid.id)) 
```

另一种方法是在包含 的表单中添加一个隐藏字段`bid_id`，但由于您已经在 URL 中拥有它，这可能不是最好的方法。

# html - 用户代理样式表覆盖表？

> ID：10543499
> 
> 赞同：0
> 
> 时间：2012-05-10T23:27:17.077
> 
> 标签：html, css, wordpress

我正在对 wordpress 主题进行一些修改，但我在删除表格的顶部边框时遇到了挑战。如下例所示，它添加了一些奇怪的细节：

![边界线](../Images/4744ed88610f5a8538f8dd63c5b1c8c4.png)

```
table {    (user agent stylesheet)
display: table;
border-collapse: separate;
border-spacing: 2px;
border-color: gray;
} 
```

然后我的：

```
table {  
border: none;
border-collapse: separate;
border-spacing: 0;
border-color:#FFFFFF;
} 
```

然而，奇怪的是这只是显示的顶部边框。可能是我在这里遗漏了一些东西。或者，很明显……

示例网站： http: [//friknektene.no/wordpress/?page_id=2](http://friknektene.no/wordpress/?page_id=2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:30:17.123

`border-top`来自第`style.css`815 行：

```
.entry-content td,
.comment-content td {
    border-top: 1px solid #ddd;
    padding: 6px 10px 6px 0;
} 
```

如您所见，`border-top`正在应用于 a `td`，而不是 a `table`。这就是为什么您尝试覆盖不起作用的原因。

试试这个：

```
.entry-content td, .comment-content td {
    border-top: 0;
} 
```

您可能希望也可能不想保留`.comment-content td`在上面的选择器中。

# c# - Visual Studio 自动命名空间更改

> ID：10543505
> 
> 赞同：4
> 
> 时间：2012-05-10T23:28:55.230
> 
> 标签：c#, .net, visual-studio

在 VS2010SP1 中，我注意到将项目中的文件从“根”移动到文件夹 ABC 会将命名空间从 MyNameSpace.XY 更改为 MyNameSpace.XYABC

是否有任何选项/调整来防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:05:19.820

实体框架从 T4 模板构建实体模型（即动态创建 .cs 文件），这就是命名空间在移动后更改的原因。如果您移动简单的 .cs 文件，它不会更改命名空间。

要解决此问题，请右键单击文件夹（在解决方案资源管理器中）并将属性“命名空间提供程序”设置为 false。

祝你好运！

# ssas - 执行查询时出现 SSAS 错误：“文件系统错误：记录 ID 不正确。”

> ID：10543507
> 
> 赞同：0
> 
> 时间：2012-05-10T23:29:09.893
> 
> 标签：ssas

我有一个使用 SSAS 执行 MDX 查询的 ASP Web 应用程序。我已经开始在某些查询中收到以下错误。

> 文件系统错误：记录 ID 不正确。物理文件：\?\C:\Program Files\Microsoft SQL Server\MSAS10_50.MSSQLSERVER\OLAP\Temp\NLevelDecodeStore_{E81C53D3-9A74-11E1-B75A-00155D1E7701}.tmp。逻辑文件：.

奇怪的是它现在才开始发生，因为我以前从未遇到过问题。该错误也只发生在我的 Web 应用程序下，如果我在 SSMS 下运行它，查询会立即返回结果。

Web 应用程序在网络服务帐户下运行，因此认为这可能是一个安全问题，我尝试在管理员帐户下运行该应用程序，查询成功完成。我还发现，如果我将网络服务帐户添加到服务器管理员列表中（右键单击 SSMS 中的服务器，属性，然后是安全选项卡），那么查询也将完成。但是由于安全风险，我宁愿不这样做。

编辑：上述解决方案的问题是 SSAS 角色安全性不适用于服务器管理员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T02:39:41.827

事实证明，我在某些情况下使用了 Dimension Data 允许的成员集表达式

```
[Customer].[Customer].AllMembers 
```

AllMembers 函数包括计算成员，这是导致看似不相关的错误的原因。更改为 .Members 以排除 calc 成员解决了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-29T09:33:59.860

我收到了这条消息：

> 文件系统错误：记录 ID 不正确。物理文件：. 逻辑文件：

当您的维度文件增长超过 4GB 时，就会发生这种情况。并且您选择 PROCESS UPDATE 方法来处理尺寸。我在谷歌搜索上发现了错误，解决问题的方法是 FULL Process Cube。而且我没有解决这个问题的永久解决方案。

修复了这个解决方案：

[http://mssqlbase.blogspot.com/2010/04/process-olap-dimensions-error-file.html](http://mssqlbase.blogspot.com/2010/04/process-olap-dimensions-error-file.html)

[http://geekswithblogs.net/darrengosbell/archive/2007/04/29/SSAS-ProcessUpdate---Too-much-of-a-good-thing.aspx](http://geekswithblogs.net/darrengosbell/archive/2007/04/29/SSAS-ProcessUpdate---Too-much-of-a-good-thing.aspx)

# java - 为 Google App Engine 列出 Java 中的属性 - 这是最有效和性能最好的 JDO 代码吗？

> ID：10543510
> 
> 赞同：1
> 
> 时间：2012-05-10T23:29:31.127
> 
> 标签：java, google-app-engine, jdo

我正在尝试通过列表属性对我的 Java 应用程序引擎对象进行建模，以实现快速高效的查询。我可以改进这段代码吗？

我真的不想迁移到 Objectify。

这是检索它的代码：

```
query = persistenceManager.newQuery(HuddleCreatorIndex.class, ":p.contains(creator)");
List<HuddleCreatorIndex> myCreatorIndexList = (List<HuddleCreatorIndex>) query.execute(KeyFactory.createKey(Contact.class.getSimpleName(), fbUserId));
if (myCreatorIndexList.size() > 0) {
    Set<Long> huddles = myCreatorIndexList.get(0).getHuddles();
    //THIS FOR LOOP DID THE TRICK, why is this necessary?  Never saw it in any examples
    for (Long huddleKey : huddles)
        alist.add(persistenceManager.newObjectIdInstance(Huddle.class, huddleKey));
    Collection<Huddle> huddlesICreated = persistenceManager.getObjectsById(huddles);
    allMyHuddles.addAll(huddlesICreated);
} 
```

以下是显示对象最初存储方式的其余支持代码，以及相关的模型类。

此代码在创建 Huddle 时调用（这会正确设置数据存储中的所有对象）

```
txn.begin();
//First, create the Huddle, this main model class
newHuddle.setInvitees(inviteeList);
newHuddle = pm.makePersistent(newHuddle);
huddleId = newHuddle.getId();

//Now create the first index
HuddleIndex newIndex = new HuddleIndex();               
newIndex.setParent(KeyFactory.createKey(Huddle.class.getSimpleName(), newHuddle.getId()));
newIndex.setInvitees(inviteeList);
pm.makePersistent(newIndex);

//And finally, create the other index
Query query = pm.newQuery(HuddleCreatorIndex.class);
query.setFilter(":p.contains(creator)");
List<HuddleCreatorIndex> list = (List<HuddleCreatorIndex>) query.execute(creator.getId());
if (list != null && list.size() > 0) {
    HuddleCreatorIndex thisIndex = list.get(0);
    Set<Key> huddles = thisIndex.getHuddles();
    huddles.add(KeyFactory.createKey(Huddle.class.getSimpleName(), newHuddle.getId()));
    thisIndex.setHuddles(huddles);
} else {
    HuddleCreatorIndex newCreatorIndex = new HuddleCreatorIndex();
    newCreatorIndex.setCreator(creator.getId());
    Set<Long> huddleSet = new HashSet<Long>(1);                   
    huddleSet.add(newHuddle.getId());
    newCreatorIndex.setHuddles(huddleSet);
    pm.makePersistent(newCreatorIndex);
}
txn.commit(); 
```

这是我的实际模型对象与真实数据

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable="true")
public class Huddle {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long id; 

    private Key creator;
    private String name;
    private Date whenTimeStamp;
    private Date creationTimeStamp;
    private String userIdType;
    private Set<Key> invitees;
    private String status;
    private Set<Key> choices;
    private List<Vote> votes;

    //setters, getters, and constructor omitted
} 
```

我的索引对象使列表属性魔术发生

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable="true")
public class HuddleCreatorIndex {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key id; 
    private Key creator;
    private Set<Long> huddles;
    //setters, getters, and constructor omitted
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:21:04.273

代码有什么问题？

您在整个地方都贴满了@Persistent（诚然，谷歌文档暗示，但最好不要相信它们），您不需要...所有标准类型默认情况下都是持久的（根据 JDO 规范，实际上由 Google 自己的代码扩展，以使其 Key 类等默认为持久）。使课堂看起来更加正常。

您正在调用*makePersistent*，但被持久化的对象处于什么“状态”？*JDOHelper.getObjectState(obj)*告诉你。如果它已经被管理，那么就没有必要这样做了......那个字节码增强过程的重点是检测变化。显然，非事务性更新不会立即发生。你不会说是否使用围绕它的交易。

在日志中查找检索，比这里的任何人都告诉你更多。

可能也没有使用 GAE JDO 插件的 v2.0；早于此的任何东西都非常陈旧且未维护。

# c# - 如何通过 JObject 进行枚举？

> ID：10543512
> 
> 赞同：131
> 
> 时间：2012-05-10T23:30:16.193
> 
> 标签：c#, json, json.net

我正在尝试确定如何访问我的 JObject 中的数据，但我无法确定如何使用它。

```
JObject Object = (JObject)Response.Data["my_key"]; 
```

我可以将它打印到控制台执行 Console.WriteLine(Object) 并且我看到数据，它看起来像：

```
{
 "my_data" : "more of my string data"
...
} 
```

但我不知道如何迭代/枚举它，有人有什么想法吗？我现在很茫然。

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-05-10T23:35:38.353

如果您查看[的文档`JObject`](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_Linq_JObject.htm)，您将看到它实现了`IEnumerable<KeyValuePair<string, JToken>>`. 因此，您可以简单地使用 a 对其进行迭代`foreach`：

```
foreach (var x in obj)
{
    string name = x.Key;
    JToken value = x.Value;
    …
} 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2015-12-24T17:13:06.900

[JObjects](http://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Linq_JObject.htm)可以通过[JProperty](http://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Linq_JProperty.htm)对象通过将其转换为[JToken](http://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Linq_JToken.htm)来枚举：

```
foreach (**JProperty** x in (JToken)obj) { // if 'obj' is a JObject
    string name = x.Name;
    JToken value = x.Value;
} 
```

如果您在另一个 JObject 中有一个嵌套的 JObject，则不需要强制转换，因为访问器将返回一个 JToken：

```
foreach (JProperty x in obj["otherObject"]) { // Where 'obj' and 'obj["otherObject"]' are both JObjects
    string name = x.Name;
    JToken value = x.Value;
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-04-12T03:35:47.900

答案对我不起作用。我不知道它是如何获得这么多票的。尽管它有助于为我指明方向。

这是对我有用的答案：

```
foreach (var x in jobj)
{
    var key = ((JProperty) (x)).Name;
    var jvalue = ((JProperty)(x)).Value ;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-12-12T15:13:19.677

对于像我这样的人，**linq** addicts ，并且基于 [svick 的回答](https://stackoverflow.com/a/10543553/842935)，这里有一个 linq 方法：

```
using System.Linq;
//...
//make it linq iterable. 
var obj_linq = Response.Cast<KeyValuePair<string, JToken>>(); 
```

现在您可以制作 linq 表达式，例如：

```
JToken x = obj_linq
          .Where( d => d.Key == "my_key")
          .Select(v => v)
          .FirstOrDefault()
          .Value;
string y = ((JValue)x).Value; 
```

要不就：

```
var y = obj_linq
       .Where(d => d.Key == "my_key")
       .Select(v => ((JValue)v.Value).Value)
       .FirstOrDefault(); 
```

或者这个遍历所有数据：

```
obj_linq.ToList().ForEach( x => { do stuff } ); 
```

# php - 收到此错误：警告：session_start() [function.session-start]：

> ID：10543520
> 
> 赞同：-5
> 
> 时间：2012-05-10T23:30:34.207
> 
> 标签：php, mysql, session, header

> **可能重复：**
> [PHP 中的“标头已发送”错误](https://stackoverflow.com/questions/8028957/header-already-sent-error-in-php)

我有一个托管在互联网上的网站。在此页面上，我需要一个会话才能开始。我得到错误

警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由 /home/content/58/home/content/58/9335458/html/ourgames.php:15 中的 /home/content/58 发送/9335458/html/ourgames.php 第 7 行

警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 已在 /home/content/58 中发送标头（输出开始于 /home/content/58/9335458/html/ourgames.php:15） /9335458/html/ourgames.php 第 7 行

我的代码有什么问题？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<?php
session_start ();
?>

<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>site</title>
<meta name="description" content="Web Application" />
<meta name="keywords" content="web, application" />
<link href="css/main.css" rel="stylesheet" type="text/css" />
</head>
<body>

<div id="header">
<div id="phapsy">
    <h1><a href="index.html">site</a></h1>
    </div>

<div id="menuholder">
    <ul id="menu">
        <li><a href="index.html">home</a></li>
        <li class="active"><a href="ourgames.php">our games</a></li>
        <li><a href="register.php">register</a></li>
        <li><a href="aboutus.php">about us</a></li>
        <li><a href="contact.html">contact us</a></li>
    </ul>
    </div>

    <?php

if (isset($_SESSION['username']));
else
echo"        <div id='login'>  
<form action='login.php' method='POST'>
<table>
<tr><td>Username: </td><td><input type='text' name='username'/></td><td>Password: </td>    <td><input type='password' name='password'/></td> <td><input type='submit' name='submit'     value='Login'/></td></tr>
</table>
</form>
</div>";

?>

</div>

<div id="teaser">
    <div class="wrap">
        <div id="image"></div>
        <div class="box">

<?php

if (isset($_SESSION['username']))
echo "<h2>Welcome to the page about the app!</h2>
<p>Information about the application will go here</p>";
else
    echo("<h2>You must be logged in to view this page. <br>
<a href='register.php'>Register</a> to gain access and learn more about <br>the     application.</h2>

");
?>

        </div>

    </div>
</div>

<div id="bar">
    <div class="wrap">

    </div>
</div>

<?php

if (isset($_SESSION['username']))
echo "
<div class='wrap'>
    <div class='col'>
        <h3>Data</h3>

        <p>More info </p>

    </div>
    <div class='col'>
        <h3>Value</h3>

        <p>More info</p>

    </div>
    <div class='col last'>
    <h3>Goal</h3>

        <p>More info</p>

    </div>
</div>

<div id='footer'>

</div>
";
else
echo("
<div id='footer'>

</div>  

");
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T23:33:05.873

```
<?php session_start(); ?> 
```

需要在第一行的页面顶部:)

# asp.net - (asp.net) 在会话超时后可能在 SQL Server 中保留一些会话变量？

> ID：10543522
> 
> 赞同：0
> 
> 时间：2012-05-10T23:31:16.630
> 
> 标签：asp.net, sql-server, session

我是 asp.net 的新手。所以请帮帮我。我试图通过使用此链接上的说明将会话模式更改为 SQLServer 来保留一些会话变量：

[http://blogs.msdn.com/b/akshayns/archive/2008/10/04/how-to-configure-sql-server-to-store-a-session-state.aspx](http://blogs.msdn.com/b/akshayns/archive/2008/10/04/how-to-configure-sql-server-to-store-a-session-state.aspx)

我读过一些帖子说即使在会话超时后将会话存储在 SQL Server 数据库中也会保留会话。但在我的情况下，会话超时后，aspstateTempSessions 表中的会话也会被删除。有没有办法告诉 asp.net 保留一些我想在超时后保留的会话变量？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T01:01:27.417

Session 是一个易失性存储系统，设计为仅在会话处于活动状态时才存在。如果您需要值在会话中存活，您应该继续并将它们存储在单独的持久结构中，例如与用户（而不是会话）绑定的 SQL 表。

**编辑：** 如果你能想出一个对象结构来存储向导的“状态”（完成的步骤、选择的选项等），你可以序列化对象并将它们作为 XML BLOB 存储在 SQL Server 中，使用用户的login 和 ProductID 作为主键。这样你就可以反序列化状态，并且用户可以从他们离开的地方继续。

正如我在评论中所说，您需要设置一个放弃超时期限，之后该对象的所有编辑都将被删除并被视为丢失。

# windows - 如何使用 Windows 电脑作为蓝牙隐藏？

> ID：10543526
> 
> 赞同：4
> 
> 时间：2012-05-10T23:31:31.997
> 
> 标签：windows, bluetooth, hid, emulation

如何将我的电脑变成蓝牙 HID。我想将键（例如蓝牙键盘隐藏）发送到仅使用带蓝牙适配器的计算机的移动设备。

我可以将我的 PC 配置文件更改为蓝牙键盘吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:17:36.197

我得到了这个问题的答案。为了将您的电脑用作蓝牙 HID，您必须拥有可以实现 HID 配置文件的特殊硬件。我没有找到任何可以实现这一点的设备。唯一的方法是使用 RN-42 等特定硬件构建一个。无论如何，没有办法通过软件和你电脑上的默认蓝牙硬件来做到这一点。

# c# - 基于时间的 C# 自定义事件

> ID：10543533
> 
> 赞同：2
> 
> 时间：2012-05-10T23:33:38.283
> 
> 标签：c#, events, delegates, timer, eventargs

我有一个`OnCreate()`每秒运行一次的函数。`OnCreate`根据当前时间（当前秒）调用其他函数。但是不必在内部单独编写每个函数`OnCreate`，我希望能够将函数组合在一起，即在`OnCreate`10 秒标记处我想调用一个函数`CreateFiveX`，它从现在开始创建一个新的 X，并继续这样做每隔一秒持续 5 秒。然后在我想要的 20 秒标记处`OnCreate`再次调用相同的函数。

我想使用事件和代表来解决这个问题。我想在一开始`OnCreate`我想触发一个事件，该事件需要当前时间并将其发送给所有订阅者，如果一个匹配（即他们应该触发的时间与当前时间匹配）他们触发并从订阅中删除列表。

问题是，经过太多时间我仍然无法弄清楚如何做到这一点，并且更难，我想将额外的参数传递给`OnCreate`调用的函数。任何和所有的帮助都会很好，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T02:18:15.623

也许您正在尝试[重新发明反应轮](http://msdn.microsoft.com/en-us/data/gg577609)？

确保您已安装并引用了响应式扩展，并且这些命名空间在范围内：

```
System.Reactive
System.Reactive.Linq 
```

然后，您可以使用（作为示例）将以下组合器连接在一起：

*   **`Observable.Interval(timespan)`**每创建一个事件`timespan`
*   **`Observable.Take(number)`**将那些（或其他事件）限制在特定的`number`
*   **`Observable.Timer()`**在特定时间或时间偏移（从现在或未来/过去时间）创建单个事件
*   **`Observable.Do(action)`**并**`Observable.Subscribe(action)`**根据流执行副作用或其他类型的操作
*   **`Observable.Repeat(number)`**多次重复上述其中一项
*   **`Observable.Generate()`**从状态生成可观察序列

然后还有许多其他的，包括那些[从可枚举或从](http://msdn.microsoft.com/en-us/library/ff707500%28v=vs.92%29.aspx)[事件模式](http://msdn.microsoft.com/en-us/library/ff707753%28v=vs.92%29)之类的东西创建可观察的，[等等](http://msdn.microsoft.com/en-us/library/ff708323%28v=vs.92%29)。

如果你有一个具体的例子，我们可以向你展示如何使用 Rx 完成它。您还可以浏览[StackOverflow 的相关部分](https://stackoverflow.com/questions/tagged/system.reactive)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:28:22.127

使用事件和参数化处理程序的代码示例：

```
public class TheTimer
{
    // define delegate with desired parameters
    public delegate void TimerDelegate(int param1, string param2);

    // expose the event
    public event TimerDelegate OnTimer;

    // This is the handler of a regular Timer tick:or your OnCreate() function
    Timer1_Tick()
    {
        if (OnTimer != null) // if susbcribed handlers
        {
            OnTimer(1, "value"); // raise your cutom event, passing the params
        }
    }
}

// Implement classes with functions that can handle the event
public class HandlerFunctions
{
    public void HandleTimer(int p, string p2)
    {
       // do whatever   
    }
}

// Use your classes
public class TimerUserClass
{
    public static void UseTimers()
    {
        // Create objects
        TheTimer theTimer = new TheTimer();
        HandlerFunctions handler1 = new HandlerFunctions();
        HandlerFunctions handler2 = new HandlerFunctions();
        // SUbscribe events
        theTimer.OnTimer += handler1.HandleTimer;
        theTimer.OnTimer += handler2.HandleTimer;
        // un-susbcribe
        theTimer.OnTimer -= handler1.HandleTimer;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T00:50:10.513

根据您的逻辑变得多么复杂，您可能需要考虑使用状态机实现。我[自己的状态机](http://blog.abodit.com/2012/04/building-a-better-net-state-machine/)实现了时间事件，因此您可以说，例如：

```
 machine.Every(new TimeSpan(hours: 0, minutes:0, seconds:5), eScheduledCheck); 
```

`.At`或者您可以使用该方法连续安排 5 个事件。

每秒对该方法的简单调用`Tick()`将导致状态机根据需要前进，或者更好的是，您可以休眠或设置一个计时器，以便下次它显示需要执行操作。

如果您需要对其他触发器进行编程以取消预定的事件、安排新的事件或只是像普通状态机一样运行，您也可以这样做。它还支持分层状态。

如果您需要能够保存状态和恢复并让所有计划的事件正常进行，那么它也是为这种情况而设计的（例如，需要在重新启动后幸存的 NT 服务）。

您可以从[Nuget](http://nuget.org/packages/AboditStateMachine)获取源代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T00:55:52.427

我认为这是一个有趣的问题，虽然我不太明白你对每秒执行一次但调用另一个运行五秒钟的函数的解释，但在我看来，你缺少的部分是如何封装一个方法调用。所以我创建了这个示例，它使用了一个计时器和`Action`在预定计时器滴答声中调用的委托。如果您正在寻找它，您应该能够将其推断到您的设计中。

```
class TimedFunction
{
    public Action<TimedFunction, object> Method;
    public int Seconds = 0;

    public TimedFunction() {
    }

}

class Program
{

    static int _secondsElapsed = 0;
    static List<TimedFunction> _funcs = new List<TimedFunction>();
    static int _highestElapsed = 0;
    static Timer _timer;

    static void Main(string[] args) {

        var method = new Action<TimedFunction, object>((tf, arg) => Console.WriteLine("{0}: {1}", tf.Seconds, arg));

        _funcs.Add(new TimedFunction() { Seconds = 5, Method = method });
        _funcs.Add(new TimedFunction() { Seconds = 8, Method = method });
        _funcs.Add(new TimedFunction() { Seconds = 13, Method = method });
        _funcs.Add(new TimedFunction() { Seconds = 10, Method = method });

        _highestElapsed = _funcs.Max(tf => tf.Seconds);

        _timer = new Timer(1000);
        _timer.Elapsed += new ElapsedEventHandler(t_Elapsed);
        _timer.Start();

        Console.WriteLine();
        Console.WriteLine("----------------------");
        Console.WriteLine("Hit any key to exit");
        Console.ReadKey(true);
    }

    static void t_Elapsed(object sender, ElapsedEventArgs e) {
        _secondsElapsed++;
        foreach (TimedFunction tf in _funcs) {
            if (tf.Seconds == _secondsElapsed) {
                tf.Method(tf, DateTime.Now.Ticks);
            }
        }

        if (_secondsElapsed > _highestElapsed) {
            Console.WriteLine("Finished at {0} seconds", _secondsElapsed - 1);
            _timer.Stop();
        }
    }
} 
```

这是输出：

```
----------------------
Hit any key to exit
5: 634722692898378113
8: 634722692928801155
10: 634722692949083183
13: 634722692979496224
Finished at 13 seconds 
```

（这是因为在控制台等待按键时计时器仍在运行）

请注意，虽然我`Action`对所有对象都使用了相同的委托实例`TimedFunction`，但没有什么可以阻止您使用不同的委托实例。虽然您确实需要定义委托将采用的参数类型，但您始终可以使用`object`或其他一些类型并传入您需要的任何内容。

此外，没有错误检查，您没有提到您正在执行此操作的应用程序类型；例如，您可能想要使用单独的线程。哦，计时器分辨率并不是那么好，所以要小心。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T23:52:22.963

您可以为所需的每个间隔创建多个计时器。或者`OnCreate()`可以检查系统时间并执行 a`Math.Mod()`并将输出放入`switch`在特定时间调用正确函数的语句中。如果你想要一些示例代码，我可以为你写一些。

# django - 在 Django 1.3 中获取 grouped_by 对象列表

> ID：10543537
> 
> 赞同：0
> 
> 时间：2012-05-10T23:34:09.460
> 
> 标签：django, group-by

我正在使用 Django 1.3，并希望使用“分组依据”类型的查询来获取对象数组。这是一些简化的代码：

```
class Product(models.Model):
    id       = models.IntegerField(primary_key=True)
    active   = models.BooleanField()
    name     = models.CharField(blank=True, max_length=500)
    slug     = models.SlugField(blank=True, max_length=500)
    program  = models.CharField(blank=True, max_length=500)
    number   = models.CharField(blank=True, max_length=500)
    image    = ...
    url      = ... 
```

在外壳中：

```
>>> p = Product.objects.all().some_group_functions('slug')
>>> p
[<Product: Abelly Hat>, <Product: Abelt Bracelet>, <Product: Abigail Earrings>, <Product: Abigail Earrings>'...(remaining elements truncated)...'] 
```

如何在我的变量 p 中仅获取具有唯一 slug 的对象？

有没有办法将*Product 对象*作为列表获取？

**编辑：可能的解决方法** 虽然它可以满足我的要求，但如果您有更好的解决方案，请告诉我：

在我看来，逻辑得到一个对象 QuerySet：

```
products   = Product.objects.filter(*whatever filter you like*)
products   = remove_duplicates(products, 'slug') 
```

和 remove_duplicates 功能

```
def remove_duplicates(seq, attr=None):
    seen   = {}
    result = []
    for item in seq:
       if attr:
           tmpattr = getattr(item, attr)
       else:
           tmpattr = item

       if tmpattr in seen: continue
       seen[tmpattr] = 1
       result.append(item)
return result 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T23:08:45.713

由于没有人回答了，我想没有比升级到支持功能 distinct([fields]); 的 django 1.4 更简单的方法了。django 1.3 只支持函数 distinct()，没有参数。

我尝试升级，但是 django-cms 直到今天还不支持 django 1.4。我将不得不坚持这里解释的删除重复功能:(

# windows-7 - Eclipse Indigo Marketplace 问题——权限被拒绝（？）

> ID：10543540
> 
> 赞同：3
> 
> 时间：2012-05-10T23:34:20.553
> 
> 标签：windows-7, eclipse-indigo, marketplace

全部，

我正在尝试从市场上获取插件，但我感到非常沮丧。最初，我遇到了异常（通过另一个堆栈溢出帖子解决 - 谢谢），但现在我看到了： *强调文本*

**(X) org.eclipse.equinox.p2.core.ProvisionException Unable to read repository at [http://download.eclipse.org/releases/indigo/content.xml](http://download.eclipse.org/releases/indigo/content.xml)**

我不明白下面错误日志中的“权限被拒绝”。并且错误日志显示如下：

eclipse.buildId=M20120208-0800 java.version=1.7.0_03 java.vendor=Oracle Corporation BootLoader 常量：OS=win32, ARCH=x86_64, WS=win32, NL=en_US 框架参数：-product org.eclipse.epp.package .cpp.product 命令行参数： -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.cpp.product

***警告 Thu May 10 19:15:51 EDT 2012 Connection to [http://download.eclipse.org/releases/helios/p2.index](http://download.eclipse.org/releases/helios/p2.index)因权限被拒绝：连接而失败。重试尝试 0 开始***

java.net.SocketException：权限被拒绝：在 java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source) 在 java.net.AbstractPlainSocketImpl.doConnect(Unknown Source) 在 java.net.AbstractPlainSocketImpl.doConnect(Unknown Source) 在 java.net.DualStackPlainSocketImpl.waitForConnect(Native Method) 连接.AbstractPlainSocketImpl.connectToAddress(Unknown Source) at java.net.AbstractPlainSocketImpl.connect(Unknown Source) at java.net.PlainSocketImpl.connect(Unknown Source) at java.net.SocksSocketImpl.connect(Unknown Source) at java.net.Socket .connect(Unknown Source) at org.eclipse.ecf.provider.filetransfer.events.socket.SocketEventCreateUtil.createSocket(SocketEventCreateUtil.java:43) at ... snip ....

我在 VMware/linux 下的同一台笔记本电脑上可以正常/正常工作，但是这个 Windows 7 版本并不好。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T23:48:47.587

这是你的问题，但我没有看到任何明确的解决方案：

*   [http://groups.google.com/group/google-appengine-java/browse_thread/thread/d0e8117be5091add](http://groups.google.com/group/google-appengine-java/browse_thread/thread/d0e8117be5091add)

根据链接，请*检查*防火墙。

还：

*   [http://www.java.net/node/703177](http://www.java.net/node/703177)

    考虑将此添加到您的 eclipse.ini 中： `-Djava.net.preferIPv4Stack=true`

PS：便便太湿了：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T22:26:59.650

如果您使用 VPN，则需要在更新前断开 VPN。

还在这里找到了这个：http: [//developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

如果您在防火墙后面（例如公司防火墙），请确保您已在 Eclipse 中正确配置了代理设置。在 Eclipse 中，您可以从 Window（在 Mac OS X、Eclipse 上）> Preferences > General > Network Connections 中的 Eclipse 主菜单配置代理信息。

# python - 如何编译一个python程序？

> ID：10543545
> 
> 赞同：-1
> 
> 时间：2012-05-10T23:34:48.853
> 
> 标签：python, compiler-construction

> **可能重复：**
> [编译 Python](https://stackoverflow.com/questions/1434144/compiling-python)

我想知道是否可以用 Python 编写程序并将其编译成可执行文件？

我的意思是实际编译，而不是解释。

主要原因是这将是一个商业产品，因此需要“隐藏”源代码。

所以基本上我想把一个 .py 文件变成一个 .exe 文件。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:37:46.443

您可以分发已编译的 .pyc 文件而不是 .py 源代码文件。.pyc 是在 Python 程序运行时动态生成的。.pyc 文件是字节码（想想 Java .class 文件），并抵制对它们进行逆向工程的尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:38:14.560

你应该使用[py2exe](http://www.py2exe.org/)。

# android - 动态实例化和添加复合控件时未调用 onFinishInflate

> ID：10543547
> 
> 赞同：2
> 
> 时间：2012-05-10T23:35:21.547
> 
> 标签：android, android-widget

我有一个自定义控件，它作为继承RelativeLayout 的其他复合控件（BaseControl）的基础。此 BaseControl 旨在简化在每个控件上扩展 XML 并在此之后对其进行初始化。一切都在构造函数中完成：

```
abstract class BaseControl extends RelativeLayout {

    public BaseControl(Context context) {
        super(context);
        this.baseInitializeControl(context, null);
    }

    public BaseControl(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.baseInitializeControl(context, attrs);
    }

    public BaseControl(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        this.baseInitializeControl(context, attrs);
    }

    private void baseInitializeControl(Context context, AttributeSet attrs) {
        int layoutId = this.getControlLayoutId();
        if(layoutId != 0) {
            LayoutInflater inflater = LayoutInflater.from(getContext());
            inflater.inflate(layoutId, this);
        }

        this.initializeControl(context, attrs);
    }

    protected abstract int getControlLayoutId();
    protected abstract void initializeControl(Context context, AttributeSet attrs);
} 
```

实际的问题是我将 OnItemClickedListener 设置为控件的内部 ListView 但它不响应任何点击，这是我在抽象 BaseControl 类之前没有的问题。我在 onFinishInflate 中调用 ListView 的 setOnItemClickedListener 方法解决了这个问题。

所以我有CustomList1和CustomList2，都继承了BaseControl。在 CustomList1 我有：

```
@Override
protected int getControlLayoutId() {
    return R.layout.custom_list_1;
}

@Override
protected void initializeControl(Context context, AttributeSet attrs) {
    this.mListView = this.findTypedViewById(R.id.listView);

    CustomAdapter adapter = new CustomAdapter(getContext());
    this.mListView.setAdapter(adapter);
}

@Override
protected void onFinishInflate() {
    super.onFinishInflate();

    this.mListView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parentView, View childView, int position, long id) {
            HistoryGroupList.this.onListItemClicked(parentView, childView, position, id);
        }
    });
}

private void onListItemClicked(AdapterView<?> parentView, View childView, int position, long id) {
    CustomAdapter adapter = (CustomAdapter) this.mListView.getAdapter();
    CustomData data = adapter.getItem(position);

    CustomList2 list = new CustomList2(getContext(), data); // CustomList2 should query more data here.

    this.addView(list); // The new View is added in front of the current one
} 
```

到目前为止一切顺利，第一个 CustomList 响应单击的项目，创建一个新控件（其中包含第二个列表视图）并将其显示在前面。

第二个控件 (CustomList2) 几乎是相同的代码，它只在 getControlLayoutId() 中返回不同的 id，在 onListItemClicked(...) 中显示一个 Toast，并使用其构造函数的第二个参数来创建不同的适配器。问题是这第二个控件没有执行 onFinishInflate()，尽管它正在膨胀 BaseControl 中的 xml。如果我将此控件作为 XML 标记添加到另一个布局中，则 onFinishInflate() 方法将正常执行。

你知道为什么这个方法没有被执行吗？或者也许是解决 setOnItemClickedListener 方法问题的解决方法。

谢谢！麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:44:30.960

在创建监听器后尝试调用 super.onFinishInflate()。这似乎很奇怪，但我从过去的经验中注意到，有时该方法会在超级调用之后终止。

```
@Override
protected void onFinishInflate() {
    this.mListView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parentView, View childView, int position, long id) {
            HistoryGroupList.this.onListItemClicked(parentView, childView, position, id);
        }
    });

    super.onFinishInflate();    
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-22T20:01:58.347

类似的问题只是`setOnItemClickListener`在调用`Inflate`（对我来说很好）之后提出的。

# c# - C# 中的单例线程安全 - 为什么要添加双重检查？

> ID：10543549
> 
> 赞同：4
> 
> 时间：2012-05-10T23:35:27.270
> 
> 标签：c#, design-patterns, locking, thread-safety, singleton

```
using System;

public sealed class Singleton
{
   private static volatile Singleton instance;
   private static object syncRoot = new Object();

   private Singleton() {}

   public static Singleton Instance
   {
      get 
      {
         if (instance == null) 
         {
            lock (syncRoot) 
            {
               if (instance == null) 
                  instance = new Singleton();
            }
         }

         return instance;
      }
   }
} 
```

我不明白为什么要双重检查！我读到这个双重检查是为了解决线程并发问题 - 但是......

1.  锁会解决它 - 那么为什么我们需要先“如果”

2.  如果这个单例没有第一个'if'，它仍然是线程安全的——对吗？

3.  如果第一个 'if' 为 false - 那么 thread1 将初始化 'instance' 对象 => 现在，'instance' 不为 null 并且 thread1 仍在锁定块中 ===>> 现在，thread2 检查第一个' if' 并且会得到 false => 所以他不会到达'lock' 并且很快就会返回实例，并且 thread2 能够更改 'instance' => 所以 thread1 && thread2 在同一个'instance'上'工作' ' object => 那么线程安全在哪里......或者我在这里缺少什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T23:41:32.367

> 1.锁会解决它 - 那么为什么我们需要先“如果”

因此，除非您需要创建 Singleton 的新实例，否则您不会锁定 thred。
`lock`是一项**非常昂贵的操作**，因此值得进行额外检查。

> 2.如果这个单例没有第一个'if'，它仍然是线程安全的——对吗？

是的，但速度要慢得多。

> 3.Thread1 && thread2 在同一个“实例”对象上“工作”=> 那么线程安全在哪里

这就是单例的全部意义，所有线程只有一个实例。那是线程安全的事情...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T23:42:46.697

我假设如果 ThreadA 在`lock`;之前被中断 ThreadB 成功完成了单例的创建，然后当 ThreadA 恢复时，它会在释放锁后尝试重新创建单例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:42:25.580

if 检查单例是否已经实例化，如果没有，则创建一个新实例。和锁确保线程安全。

如果没有 if 它会在每次调用时创建一个新实例（不是单例的想法）。如果没有锁，两个线程可以同时创建一个实例，因此可能存在两个实例。

如果您只使用单线程，则可以擦除锁。否则（在 mt 上）强烈建议使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T23:45:37.647

这是来自马里兰大学的一篇很好的论文，关于为什么推荐它（以及为什么它在现代优化编译器中并不总是有效）如果你有时间，这是一本很好的读物。

[http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)

# javascript - 在一个文件中使用 JavaScript 格式化 XML 数据

> ID：10543551
> 
> 赞同：0
> 
> 时间：2012-05-10T23:35:32.503
> 
> 标签：javascript, css, xml, xslt

我想通过 JavaScript 将单个 XML 文件转换为人类可读的格式。原因如下：

1.  需要生成一个可以在任何地方工作的人类可读文档。（Windows、Mac、Linux、iPhone、Android、黑莓等）
2.  这些信息来自我定义的 C++ 数据结构。
3.  需要能够包含图片。
4.  此文档将在创建后作为电子邮件附件发送。

我调查过：

*   XSLT：可以作为单个文件工作，但仅在最新的移动设备上受支持。
*   CSS：我认为格式不够复杂，无法满足我的需求。
*   PDF：必须将开源库包含在环境中。如果有一个好的选择，我宁愿不这样做。

所以这就是我关注 JavaScript 的原因。但第一个问题是，JavaScript 能否格式化/显示存在于同一文件中的 XML 数据？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:45:44.837

它认为服务器端选项（例如服务器端 XSLT）会更可取，但如果它不可用，那么您可以在 Javascript 或 JQuery 中解析 XML 文档。有关如何使用 JQuery 执行此操作的简单示例，请参见此处： [http](http://api.jquery.com/jQuery.parseXML/) ://api.jquery.com/jQuery.parseXML/ 。此示例从 XML 中获取“title”元素并将其添加到 ID 为“someelement”的 HTML 元素中。

```
var xml = "";  // TODO get your xml here
var xmlDoc = $.parseXML(xml);
var $xml = $(xmlDoc);
var title = $xml.find("title");
$("#someelement").text(title); 
```

如果您使用的是纯 Javascript，那么您可以像解析 HTML 一样解析 XML。例如，假设您有这样的 XML：

然后您可以像这样解析 XML 文档：

```
var items = myXml.getElementsByTagName('item');
var text = items[0].getAttribute('text');
$("#someelement").text(text); 
```

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:47:13.323

你想做一些奇怪的事情。您不能将单个 JavaScript 或 CSS 文件用作带有图像的可读文档。这是不可能的。为什么不只使用 HTML？您可以在 HTML 页面上包含 CSS 和 JavaScript，并获得几乎任何您想要的外观和行为。HTML 可以用作单个文件。可以使用 data:uri 将图像包含在 HTML 页面中。

# postgresql - PostGIS 2.0.0 安装 GEOS 问题

> ID：10543552
> 
> 赞同：3
> 
> 时间：2012-05-10T23:35:36.433
> 
> 标签：postgresql, postgis

尝试在 Ubuntu 11.10 上安装 PostGIS 2.0.0。我基本上遵循了此处的 OSGeo 说明：http: [//trac.osgeo.org/postgis/wiki/UsersWikiPostGIS20Ubuntu1110src](http://trac.osgeo.org/postgis/wiki/UsersWikiPostGIS20Ubuntu1110src)。我构建了 GEOS 3.3.3。如果我`geos-config --version`在终端中输入，我会被退回`3.3.3`。

我可以毫无问题 `./configure`地运行。以。。结束：`make``./configure`

```
 PostGIS is now configured for x86_64-unknown-linux-gnu 

-------------- Compiler Info -------------  
 C compiler:           gcc -g -O2 
 C++ compiler:         g++ -g -O2 

-------------- Dependencies --------------  
 GEOS config:          /usr/local/bin/geos-config 
 GEOS version:         3.3.3 
 GDAL config:          /usr/local/bin/gdal-config 
 GDAL version:         1.9.0 
 PostgreSQL config:    /usr/bin/pg_config 
 PostgreSQL version:   PostgreSQL 9.1.3 
 PROJ4 version:        47 
 Libxml2 config:       /usr/bin/xml2-config 
 Libxml2 version:      2.7.8 
 JSON-C support:       no 
 PostGIS debug level:  0 
 Perl:                 /usr/bin/perl 

--------------- Extensions ---------------  
 PostGIS Raster:       enabled 
 PostGIS Topology:     enabled 

-------- Documentation Generation --------  
 xsltproc:             /usr/bin/xsltproc 
 xsl style sheets:      
 dblatex:               
 convert:               
 mathml2.dtd:          http://www.w3.org/Math/DTD/mathml2/mathml2.dtd 
```

一切看起来都不错，对吧？但这就是问题所在。当我运行`make test`时，构建在最后失败：

```
Creating spatial db postgis_reg
createlang: language "plpgsql" is already installed in database "postgis_reg"
Preparing spatial db postgis_reg

 Something went wrong during db initialization (core module).
 For details, check /tmp/pgis_reg/regress_log

make[1]: *** [check] Error 1
make[1]: Leaving directory `/home/anthony/Downloads/postgis-2.0.0/regress'
make: *** [check] Error 1 
```

里面`/tmp/pgis_reg/regress_log`是：

```
SET
BEGIN
psql:/home/anthony/Downloads/postgis-2.0.0/regress/00-regress-install/share/contrib/postgis/postgis.sql:69: ERROR:  could not load library "/home/anthony/Downloads/postgis-2.0.0/regress/00-regress-install/lib/postgis-2.0.so": /home/anthony/Downloads/postgis-2.0.0/regress/00-regress-install/lib/postgis-2.0.so: undefined symbol: GEOSRelatePatternMatch 
```

我试图忽略这个问题并继续运行，`sudo make install`但是当我开始设置我的数据库时，`psql -d infinitydb -f postgis.sql`我遇到了类似的问题：

```
SET
BEGIN
psql:postgis.sql:69: ERROR:  could not load library "/usr/lib/postgresql/9.1/lib/postgis-2.0.so": /usr/lib/postgresql/9.1/lib/postgis-2.0.so: undefined symbol: GEOSRelatePatternMatch 
```

我在网上环顾四周，发现另一个人有`GEOSRelatePatternMatch`问题，但他是由于多次安装 GEOS。据我所知，我只有一个。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:48:36.037

我认为这是由于 postgis 认为这些库在您的服务器上的位置与实际位置不同。我从 Ubuntu GIS 获得的软件包也有同样的错误。它们被安装到 /usr/lib，但由于某种原因 postgis 在 /usr/local/lib 中寻找它们。无论哪种方式，我都运行了“ldconfig”并再次运行了测试，它工作得很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T11:52:28.187

PostGIS 正在尝试从不同的地理库加载符号，然后是编译它的那个。在您的系统上搜索*地理*，将它们全部删除并重新编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T08:17:41.113

我在写这些说明时遇到了这个问题，并为此[提交了一个错误](https://trac.osgeo.org/postgis/ticket/1685)。我已经尝试修复它，但放弃了，因此`make test`. （我很想找出测试的问题并重新打开票，那里有任何指针。可能与 Makefile 有关，因为它正在将 GEOS 的版本与 GDAL 混合。）

尽管 失败`make test`，但您的安装应该不会出现此问题，因此我将继续执行下一步并安装。

# opengl - openGL：在 glrotate 后获取坐标

> ID：10543554
> 
> 赞同：0
> 
> 时间：2012-05-10T23:35:38.463
> 
> 标签：opengl, coordinate-transformation

我正在尝试确定 glRotate 之后的坐标。

假设我们最初在

```
 View.x = 0;
 View.y = 0;
 View.z = 10.0f; 
```

我们做一个 glRotate

我如何获得新的更新坐标？

```
 View.x = ?;
 View.y = ?;
 View.z = ?; 
```

这似乎不起作用（我有什么问题？）：

```
 glRotatef(angle, x, y, z);

    GLfloat theMatrix[16];
    glGetFloatv(GL_MODELVIEW_MATRIX, theMatrix);

    viewX  = View.x * theMatrix[0] + View.y * theMatrix[4] + View.z * theMatrix[8];
    viewY = View.x * theMatrix[1] + View.y * theMatrix[5] + View.z * theMatrix[9];
    viewZ = View.x * theMatrix[2] + View.y * theMatrix[6] + View.z * theMatrix[10]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:02:35.253

glRotate modifies current modelView matrix... but all the transformations are performed inside the OpenGL pipeline, so you cannot easily get the updated results.

the simplest way is to multiply your vertex data by your rotation matrix. You can use glm library, some other library, or create own code for vector/vertex transformation.

if you want to get updated values for all the vertices you want to draw, then you can use some more advanced stuff like transform feedback

# linux - Unix命令删除了每个目录，即使没有指定

> ID：10543556
> 
> 赞同：5
> 
> 时间：2012-05-10T23:35:44.727
> 
> 标签：linux, bash, unix, xargs, rm

我对unix很陌生。我运行了以下命令。

```
ls -l | xargs rm -rf bark.* 
```

以上命令删除了文件夹中的每个目录。

谁能解释我为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T23:41:41.360

该`-r`参数的意思是“递归删除”（即下降到子目录）。该`-f`命令的意思是“强制”（换句话说，不要求确认）。`-rf`意思是“递归地下降到子目录而不要求确认”

`ls -l`列出目录中的所有文件。`xargs`获取输入`ls -l`并将其附加到您传递给的命令`xargs`

最终执行的命令如下所示：

```
rm -rf bark.* <output of ls -l> 
```

这基本上删除了当前目录中`bark.*` **的**所有文件。故事的寓意：要非常小心`rm -rf`。（您可以使用`rm -ri`在删除文件之前询问）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T23:42:55.487

`rm(1)`删除了当前工作目录中的每个文件和目录，因为您要求它这样做。

要大致了解发生了什么，请运行以下命令：

```
cd /etc ;  ls -l | xargs echo 
```

注意输出。

我强烈建议在构建命令行时使用`echo`代替。`rm -rf`只有当输出看起来不错时，您才应该使用`rm -rf`. 如有疑问，也许只是使用`rm -r`，以免意外吹走太多。`rm -ir`如果您对命令行*非常*怀疑。（我从 1994 年开始使用 Linux，在构建稍微复杂的命令行来选择性地删除一堆文件时，我*仍然*使用这个技巧。）`echo`

顺便说一句，我会避免`ls(1)`以任何方式解析输出——文件名可以包含除 ASCII和字符之外的*任何*字符——包括换行符、制表符和*看起来*像输出的输出。尝试使用诸如此类的工具来*解析*它可能很危险。`NUL``/`*`ls -l`*`xargs(1)`**

 **相反，`find(1)`用于这些事情。要删除所有名为 的目录中的所有文件`bark.*`，我将运行如下命令：

```
find . -type d -name 'bark.*' -print0 | xargs -0 rm -r 
```

同样，我会在第一次执行时使用`echo`代替`rm -r`- 如果它看起来不错，那么我会重新运行`rm -r`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T23:56:12.160

该`ls -l`命令列出了当前工作目录 (PWD) 中的所有子目录。

`rm`如果您将它们作为列表传递给它，该命令可以删除多个文件/目录。

例如：`rm test1.txt test2.txt myApp`将删除所有三个具有以下名称的文件：

```
test1.txt
test2.txt
myApp 
```

此外，您使用的命令的标志`rm`在许多愚蠢行为中很常见。
`rm -f`- 在不询问或确认的情况下强制删除文件
`rm -r`- 递归到所有子目录并删除其所有内容和子目录

因此，假设您在 /home/user 中，目录结构如下所示：

```
 /home/user
|->dir1
|->dir2
`->file1.txt 
```

该`ls -l`命令将提供包含 的列表`"dir1 dir2 file1.txt"`，该命令的结果`ls -l | xargs rm -rf`将如下所示：
`rm -rf dir1 dir2 file1.txt`

如果我们使用上面的示例扩展您的原始问题，传递给系统的最终命令将变为： `rm -rf di1 dir2 file1.txt bark.*`

因此，当前目录中的所有内容都会被清除，因此`bark.*`是多余的（您实际上是告诉机器无论如何都要销毁当前目录中的所有内容）。

我认为您的意思是删除当前目录中的所有文件以及所有以开头的子目录（递归）`bark.`，您只需执行以下操作：
`find -iname bark.* | xargs rm`

上述命令的意思是“查找此目录和子目录中的所有文件，忽略大写/小写/mIxEdCaSe，以字符“bark.”开头，并删除它们”。如果您有拼写错误，这仍然可能是一个错误的命令，因此可以肯定的是，您应该始终在执行这样的批量删除之前进行测试。

将来，首先执行以下操作以获取您将首先删除的所有文件的列表，以确认它们是您要删除的文件。
`find -iname bark.* | xargs echo`

然后，如果您确定，请通过以下方式删除它们
`find -iname bark.* | xargs rm`

希望这可以帮助。

作为一个幽默的注释，可以在这里找到最著名的“rm -rf”实例之一： [https ://github.com/MrMEEE/bumblebee-Old-and-abbandoned/commit/a047be85247755cdbe0acce6f1dafc8beb84f2ac](https://github.com/MrMEEE/bumblebee-Old-and-abbandoned/commit/a047be85247755cdbe0acce6f1dafc8beb84f2ac)

自动脚本运行类似`rm -rf /usr/local/.........`，但由于意外插入空格，命令变为`rm -rf /usr /local/......`，因此这实际上意味着“删除所有以 usr 或 local 开头的根文件夹”，有效地破坏了使用它的任何人的系统。我为那个开发者感到难过。

您可以通过引用字符串来避免此类错误，即： `rm -rf "/usr/ local/...."`会提供错误消息并避免此错误，因为引号意味着它们之间的所有内容都是完整路径，而不是单独路径/文件的列表（即：您告诉 rm 文件/文件夹的名称中有空格字符）。**

# php - PHP - 简单地将商品添加到购物车并显示结果

> ID：10543557
> 
> 赞同：0
> 
> 时间：2012-05-10T23:36:11.437
> 
> 标签：php, mysql, html, forms, cart

我想使用会话来计算添加到购物车中的商品数量。下面我有一个提交按钮，它从数据库中提取 product_id 以及标题和描述：

```
$query = 'SELECT * FROM products ORDER BY date_added DESC'; 

    // Run the query:
    if($r = mysql_query($query,$dbc)) {
        while ($row = mysql_fetch_array($r)) {   
            // Print out the returned results:
            print "<p><h3>{$row['title']}</h3> {$row['description']}<br />
                <form action='add_to_cart.php' method='get'>
                    <input type='hidden' name='add2cart' value='{$row['product_id']}' />
                    <input type='submit' value='Add to Cart' />
                </form>
           </p><hr />\n";
        }     
    } 
```

提交添加到购物车按钮时，如何将以下内容转换为处理我的表单的会话。我创建的这个脚本只是在每次调用或刷新页面时计算 cookie，因此它不准确。我想发送唯一的产品 ID 并使用会话将项目添加到购物车，这样购物车中的项目只有在单击添加到购物车按钮时才会上升。

```
<?php
if(!isset($_COOKIE['countItems'])){
    $Items = 0;
    setcookie('countItems', $Items); 
}
else{
    $Items = ++$_COOKIE['countItems'];  
    setcookie("countItems", $Items);
} 
define('TITLE' , 'Items in cart'); 
include('templates/header.html');
?>
<div id="main">
<?php
require_once('config.php');
$dbc = mysql_connect(DB_HOST , DB_USER , DB_PASSWORD);
mysql_select_db(DB_DATABASE, $dbc);

if(isset($_COOKIE['countItems'])){
    print "<p>You have $Items items in your shopping cart </p>";
    print "<p><a href='store.php'>Continue Shopping</a></p>";
}  
else{
    print "You have not added any items into your cart.";
}  

?> 
```

我只需要它来输出您所看到的，它不需要逐项列出或任何东西，只需要计算购物车中有多少物品以及有什么 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:49:22.763

```
session_start();
if (! isset($_SESSION['countItems']))$_SESSION['countItems'] = 0;
else $_SESSION['countItems']++;
$Items = $_SESSION['countItems']; 
```

然后继续 define('TITLE' , 'Items in cart');

# vim - 我如何用 vim 解决这个小缩进问题？

> ID：10543559
> 
> 赞同：8
> 
> 时间：2012-05-10T23:36:53.360
> 
> 标签：vim, macvim

如果我`:setf html`在下面的示例中一切正常（缩进匹配）。

但是说，我有以下代码（注意代码前的缩进），除了我有它`:setf php`。

的| 是光标

```
 <div class="sig">|</div> 
```

如果我按 Enter，它会执行此操作

```
 <div class="sig">
|</div> 
```

因为 99% 的时间我在编辑 php，模板文件中都有 html，所以我觉得切换有点烦人。

我觉得 vim 必须有一种方法来读取标记，并且可能在一个文档中有多个文件类型（就像`setf=html`它可以读取样式标签或内联样式标签并“知道”“”中的那个小片段是css 文件类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:50:30.227

这有帮助吗？

```
:setfiletype html.php 
```

# c# - 在 OnChange 事件中查找附加属性所附加到的控件

> ID：10543560
> 
> 赞同：0
> 
> 时间：2012-05-10T23:37:00.203
> 
> 标签：c#, .net, wpf, binding

假设我有以下代码：

```
 public static DependencyProperty LabelProperty =
        DependencyProperty.RegisterAttached(
            "Label",
            typeof(Label),
            typeof(HotKeyHelper),
            new FrameworkPropertyMetadata(default(Label), OnLabelChanged)
        );

    public static void SetLabel(DependencyObject obj, Label value)
    {
        obj.SetValue(LabelProperty, value);
    }

    public static Label GetLabel(DependencyObject obj)
    {
        return (Label)obj.GetValue(LabelProperty);
    }

    private static void OnLabelChanged(DependencyObject obj,
         DependencyPropertyChangedEventArgs e)
    {
        Label label = obj as Label;

        // Question is for Right Here!
    } 
```

OnLabelChanged 事件中有没有办法获取它附加到的对象？

例如，假设我这样使用：

```
 <TextBox Controls:HotKeyHelper.Label="{Binding ElementName=SomeLabel}"/> 
```

有没有办法在我的 OnLabelChanged 事件中获取对 SomeLabel 标签的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:39:38.803

[`e.NewValue`](http://msdn.microsoft.com/en-us/library/system.windows.dependencypropertychangedeventargs.newvalue.aspx)?

obj 应该是设置附加属性的对象，我怀疑您是否要将其强制转换为 Label 因为它可以是任何东西...

# php - 未识别的偏移错误php

> ID：10543561
> 
> 赞同：0
> 
> 时间：2012-05-10T23:37:00.507
> 
> 标签：php, error-handling

我使用 PHP 做了一个简单的测验评分，但它出现了无法识别的偏移错误，但它工作正常。

错误：

```
Notice: Undefined offset: 0 in C:\Users\scorequiz1.php on line 17
Notice: Undefined offset: 1 in C:\Users\scorequiz1.php on line 18
Notice: Undefined offset: 2 in C:\Users\scorequiz1.php on line 19
Notice: Undefined offset: 3 in C:\Users\scorequiz1.php on line 20
Notice: Undefined offset: 4 in C:\Users\scorequiz1.php on line 21

Notice: Undefined offset: 0 in C:\Users\scorequiz1.php on line 52
Question 1\. Correct.

Notice: Undefined offset: 1 in C:\Users\scorequiz1.php on line 52
Question 2\. Incorrect.

Notice: Undefined offset: 2 in C:\Users\scorequiz1.php on line 52
Question 3\. Correct.

Notice: Undefined offset: 3 in C:\Users\scorequiz1.php on line 52
Question 4\. Correct.

Notice: Undefined offset: 4 in C:\Users\scorequiz1.php on line 52
Question 5\. Incorrect. 
```

第 17 至 21 行：

```
$data[0] = $_POST["a"];
$data[1] = $_POST["b"];
$data[2] = $_POST["c"];
$data[3] = $_POST["d"];
$data[4] = $_POST["e"]; 
```

第 50-56 行：

```
for($i = 0; $i < 5; $i++)
{
     if($answer[$i] == 1)
         echo "Question " . ($i+1) . ". " . "Correct.<br/>";
     else
         echo "Question " . ($i+1) . ". " . "Incorrect.<br/>";
} 
```

我的测验就是这样。问题的选项具有名称“a”到“e”以及检查正确答案的值

```
<!-- question 1---->
<INPUT TYPE="radio" NAME="a" VALUE="1">10 days<BR>
<INPUT TYPE="radio" NAME="a" VALUE="1">40 days<BR>

<!-- question 2---->
<INPUT TYPE="radio" NAME="b" VALUE="1">True<BR>
<INPUT TYPE="radio" NAME="b" VALUE="1">False<BR> 
```

我不确定有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:43:12.547

上半年最可能的问题是`$data`可能已经设置为其他内容。尝试这个：

```
$data = Array($_POST['a'],$_POST['b']...); 
```

下半场，你确定你定义`$answer`正确吗？看起来你的意思是`$data`在那里。

旁注：我可以通过以下方式立即在您的测试中获得满分：

```
(function() {
    var qsa = document.querySelectorAll("input[type=radio]"), l = qsa.length, i;
    for( i=0; i<l; i++) if( qsa[i].value == "1") qsa[i].checked = true;
})(); 
```

只需将其粘贴在控制台中，测试将自动填写正确答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:31:44.930

你的代码看起来有两个可能的问题

1.  您正在为`$data`变量设置值并使用`$answer`变量来检查正确性。如果两个变量是有意的，则意味着您必须使用某个数据库检查它并`$answer`在其他地方创建您未显示的数组 - 也共享该代码。
2.  您共享的示例 HTML 已`value="1"`写入问题的所有选项。如果这正是您在代码中的方式，则意味着即使选择了任何答案，您也会得到 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T00:25:06.753

在数组中引用它们之前先尝试验证值
我通常先使用空来检查，所以在你的情况下，只有在它们不为空时才继续运行代码

```
 if (!empty($data[0])) 
    if (!empty($answer[$i])) 
```

# objective-c - nsdictionary vs nsarray 的读取性能

> ID：10543564
> 
> 赞同：4
> 
> 时间：2012-05-10T23:37:44.077
> 
> 标签：objective-c, c, xcode, performance, benchmarking

继续这篇文章：[使用 NSMutableDictionary 与 NSMutableArray 产生的性能损失>](https://stackoverflow.com/questions/1098174/performance-hit-incurred-using-nsmutabledictionary-vs-nsmutablearray)

我正在尝试进行一个小测试，看看性能差距是否对于 NSArray 和 NSDictionary 以及它们的可变 coutnerparts 之间的读写有那么大...

但是，我很难找到“平衡”测试......因为字典有 2 个（或 3 个，取决于你如何看待这个）对象来循环获取所寻求的值（不是键），而数组只有一...

有什么建议么？

--**如果你想要更多细节：** 我的意思是通过例子更容易解释；

对于数组：（对于数组中的 NSString *str）{ 用字符串做 smth }

对于字典

```
(for NSString *str in [dictionary allValues]) { string } 
```

或者

```
(for NSString *str in [dictionary allKeys]) { [dictionary valueForKey:key] } 
```

或者

```
(for NSString *str in [dictionary allKeys]) { string } 
```

甚至

```
NSArray *valuesOrKeys = [dictionary allKeys/allValues];

(for NSString *str in valuesOrKeys) {string } 
```

为字典做的“最公平”的测试是什么？

--编辑（评论）

正如你们都指出（并问我为什么想要那样），当使用字典时，这是因为它比数组更适合模型......

好吧，我问的原因是我正在构建的应用程序非常缓慢，所以我试图弄清楚使用不同的数据类型是否会改变其中的任何一个，我正在考虑使用基本的 c 数组......在这一点上我有选择权，所以我可以改变内部运作以适应我想要的任何类型......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T04:14:33.783

我想向您指出以下文章：“[数组](http://ridiculousfish.com/blog/posts/array.html)”，作者是 Apple 的工程师[荒谬的_fish。](http://twitter.com/ridiculous_fish)Cocoa 数组不一定是如您所想的那样实现良好的朴素数组，字典也不是简单的哈希表。它们的表现是非常间接的，并且取决于它们持有的对象的数量（以及它们的值等）。这可能不会直接影响答案，但需要考虑（`NSDictionary`当然，性能会随着散列函数的速度和可靠性而变化，等等）。

此外，如果您正在寻找“平衡”测试，则必须寻找一种方法让两个类的行为尽可能接近。您想排除通过字典中的键访问值的可能性，因为这 - 无论维护的底层数据结构的查找时间有多快`NSDictionary`- 都比简单地从数组中拉出对象要慢，因为您正在执行更多操作来做到这一点. `O(1)`对于哈希表，从数组访问是`O(1)`最好`O(n)`的和最坏的（取决于实现，在中间的某个地方）。

如上所述，有几种方法可以枚举字典和数组。您将希望使用在实现方面彼此最接近的方法，这些方法要么是基于块的枚举（`enumerateObjectsUsingBlock:`for`NSArray`和`enumerateKeysAndObjects:`for `NSDictionary`），要么是快速枚举（使用`allKeys`or 或`allValues`for the `NSDictionary`）。因为这些算法的性能主要是经验性的，所以我进行了几次测试来记录访问时间（每个都有 10000 个`NSNumber`对象）：

```
NSArray, Block Enumeration:
1\. 10.5s
2\.  9.1s
3\. 10.0s
4\.  9.8s
5\.  9.9s
   -----
    9.9s Avg

NSArray, Fast Enumeration:
1\.  9.7s
2\.  9.5s
3\.  9.3s
4\.  9.1s
5\. 10.5s
   -----
    9.6s Avg

NSDictionary, Block Enumeration
1\. 10.5s
2\. 10.6s
3\.  9.9s
4\. 11.1s
5\. 11.0s
   -----
   10.6s Avg

NSDictionary, allKeys -> Fast Enumeration
1\. 10.0s
2\. 11.2s
3\. 10.2s
4\. 10.8s
5\. 10.8s
   -----
   10.6s Avg

NSDictionary, allValues -> Fast Enumeration
1\. 10.7s
2\. 10.3s
3\. 10.5s
4\. 10.5s
5\.  9.7s
   -----
   10.3s Avg 
```

从这个人为测试的结果中可以看出，`NSDictionary`明显慢于`NSArray`（使用块枚举慢约 7%，使用快速枚举慢 7-10%）。然而，这种比较是相当没有意义的，因为无论如何使用最快的枚举`NSDictionary`只是将它转移到一个数组中。

所以最大的问题是，你为什么要考虑使用字典？数组和哈希表不能完全互换。你有什么样的模型可以直接替换`NSArray`with `NSDictionary`？无论人为设计的示例给出的时间以某种方式证明性能优势，您都应该始终以一种*有意义*的方式实现您的模型——如果需要，您可以稍后优化性能。我看不出您将如何互换使用这些数据结构，但无论如何，`NSArray`这是赢家，特别是考虑到您尝试访问值的顺序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T08:50:43.197

这是使用快速枚举的“平衡”测试：

```
[arr enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    // do something with objects    
}];
[dict enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
    // do something with objects    
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T12:21:36.857

> 我正在尝试进行一个小测试，看看性能差距是否对于 NSArray 和 NSDictionary 以及它们的可变 coutnerparts 之间的读写有那么大...

为什么？如果只是为了满足你的好奇心，那是一回事。但通常如果你需要字典，数组真的不行，反之亦然。因此，在给定的操作中，哪一个更快并不重要——这并不是说一个是另一个的好选择。

> 但是，我很难找到“平衡”测试......因为字典有 2 个（或 3 个，取决于你如何看待这个）对象来循环以获取所寻求的值（而不是键），而数组只有一...

您在这里做出了一些不太可能有效的假设。访问任何一种容器的元素可能并不涉及很多循环。

# android - Android 中的超级用户命令输出

> ID：10543570
> 
> 赞同：0
> 
> 时间：2012-05-10T23:38:19.940
> 
> 标签：android, su, root

我正在尝试使用 SuperUser 命令来创建位于某个位置的文件列表。我正在使用这篇文章中列出的方法：

[Android 使用超级用户权限？允许访问](https://stackoverflow.com/questions/3653504/android-using-super-user-permissions-allowing-access)

我的具体代码如下所示：

```
try {
            Process process = Runtime.getRuntime().exec("su");
            DataOutputStream outputStream = new DataOutputStream(process.getOutputStream()); 
            DataInputStream inputStream = new DataInputStream(process.getInputStream());

            outputStream.writeBytes("cd " + baseDirectory + "/system/app" + "\n");
            outputStream.flush();

            outputStream.writeBytes("ls" + "\n");
            outputStream.flush();

            outputStream.writeBytes("exit\n"); 
            outputStream.flush(); 
            process.waitFor();
        }  catch (IOException e) {

        }  catch (InterruptedException e) {

        } 
```

它运行没有任何错误。我的问题是我不知道如何产生任何输出。

请注意，在代码中我试图获取应用程序列表（我知道我可以用不同的方式做到这一点）但我需要它在一般情况下工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:51:57.277

您不需要使用 su 来获取已安装软件包的列表

[如何获取已安装的 android 应用程序列表并选择一个运行](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)

但是在您的代码中，您说它不输出任何内容。但是您究竟希望它输出什么（以及在哪里）？你从来没有告诉它显示任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:41:16.800

刷新退出命令后，尝试读取 DataInputStream：

```
BufferedReader reader = new BufferedReader(
        new InputStreamReader(process.getInputStream()));
int read;
char[] buffer = new char[4096];
StringBuffer output = new StringBuffer();
while ((read = reader.read(buffer)) > 0) {
    output.append(buffer, 0, read);
}
String result = output.toString(); 
```

# orchardcms - 人们为 Orchard CMS 和多个站点使用什么设置？

> ID：10543573
> 
> 赞同：1
> 
> 时间：2012-05-10T23:38:39.250
> 
> 标签：orchardcms

我刚刚加入了 Orchard CMS 运动，但我对设置有一些重大的崩溃。他们的网站上有太多关于我不想要的文档的文档，而且很难弄清楚这一点。

我计划在一台 web/sql 服务器上运行大约 15 个全新的网站，并且我有一台单独的开发机器。我计划制作一些自定义主题和模块，以适应每个网站的共同和特定需求。我想在生产服务器上使用 IIS 7 和 MS-SQL 2008。

那么，我应该：

1.  只需在生产服务器本身（使用 Web 平台安装程序）上创建 Orchard 站点并根据需要移植任何主题和模块？
2.  还是在开发机器上创建站点并使用 WebMatrix 和 WebDeploy 发布到生产环境？

我讨厌在生产服务器上创建 hello world 站点，并在开发它们时添加内容、主题、模块等是在开发机器的 SQL 服务器上创建的，并且 WebMatrix 在 Web 部署期间不处理 db 模式中的移植（是吗？）。似乎选项 2 使它变得更加复杂。

在这种情况下，其他人在做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T02:05:15.113

绝对是第二种选择。WebMatrix 应该可以很好地处理数据库部署。您可能希望将遇到的任何问题提交给 WebMatrix 支持或论坛。我经常将站点从我的开发箱部署到生产环境，fwiw。

# ruby-on-rails - 用户控制器中这两种创建方法之间的区别

> ID：10543576
> 
> 赞同：1
> 
> 时间：2012-05-10T23:39:09.013
> 
> 标签：ruby-on-rails

有没有区别

```
def create
  @user = User.new(params[:user])
  if @user.save
    redirect_to root_url, :notice => "Signed up!"
  else
    render :new
  end
end 
```

和

```
 def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to(:users, :notice => 'Registration successfull. Check your email for activation instructions.') }
        format.xml { render :xml => @user, :status => :created, :location => @user }
      else
        format.html { render :action => "new" }
        format.xml { render :xml => @user.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

忽略错误和注意问题，我的主要问题是使用 xml 格式和不使用它之间的区别，他们似乎做了确​​切的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:46:54.880

使用`respond_to`与 html 不同的格式使您能够以指定格式获得响应（对 Web 服务有用）。

在那种情况下（用户创建）我不认为它真的有用，但这完全取决于你！

不像你的第一个例子那样使用`respond_to`只会渲染html。

关于这里的更多信息`respond_to`：

[http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)

# html - 重新创建此滚动页面效果

> ID：10543577
> 
> 赞同：2
> 
> 时间：2012-05-10T23:39:10.127
> 
> 标签：html, css, scroll

这完全让我感到困惑，我已经多次尝试这样做，但我做不到。我确信解决方案很简单，而且我已经看过了。

所有帮助表示赞赏。

[http://techgnotic.deviantart.com/journal/Earth-Day-The-Inspiration-of-the-Natural-World-297767607?utm_source=elnino&utm_medium=messagecenter&utm_campaign=042212_MKT_EarthDay&utm_term=button](http://techgnotic.deviantart.com/journal/Earth-Day-The-Inspiration-of-the-Natural-World-297767607?utm_source=elnino&utm_medium=messagecenter&utm_campaign=042212_MKT_EarthDay&utm_term=button)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:55:02.907

`background-attachment: fixed`在连续的 s 上设置`div`：

```
div {
    background-attachment: fixed;
    background-position: 50% 60%;
    height: 500px;
    width: 100%;
} 
```

[**jsFiddle**](http://jsfiddle.net/VrQB9/)

如果您`height`的内容将决定`div`. 我已经包含了一个容器`div`来在 jsFiddle 的范围内显示效果；在实践中，`body`它将工作得很好。

# java - Spring @Configuration 的属性

> ID：10543578
> 
> 赞同：3
> 
> 时间：2012-05-10T23:39:14.353
> 
> 标签：java, spring, configuration, properties, dependency-injection

如果我有一个`PropertyPlaceholderConfigurer`XML 文件，是否可以让我的 Spring`@Configuration`使用它作为它处理的所有 bean 的属性源？

```
@Configuration
@ComponentScan(value = { "x.y.z })
@ImportResource({ "classpath:remote-properties/applicationContext.xml",})
public class CoreConfiguration implements TransactionManagementConfigurer {

    @Resource(name = "com.c.h.c.PropertyPlaceholderConfigurer")
    public PropertyPlaceholderConfigurer pp;

   @Bean
    public PropertyPlaceholderConfigurer propertiesFactoryBean() {
        return pp;
    }
} 
```

有了以上内容，它永远不会在`pp`. 如果我删除`@Bean`and 方法，我可以验证它`pp`是否已填充。那么我怎样才能将它注册到配置中呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:29:02.557

我觉得很愚蠢。`@Value`我的一个注释上缺少一个右花括号。我无法想象我看了多少次却错过了它。

因此，`PropertyPlaceHolderConfigurer`在应用程序上下文中，您`@ImportResource`可以毫无问题地工作。您甚至不需要将其作为`@Resource`.

# c# - 如何让 LinqToXSD 正确输出命名空间前缀声明？

> ID：10543583
> 
> 赞同：8
> 
> 时间：2012-05-10T23:39:39.927
> 
> 标签：c#, .net-3.5, xml-serialization, xsd, linq-to-xsd

我正在尝试使用[LinqToXSD](http://linqtoxsd.codeplex.com/)和包含许多导入模式的 XML 模式创建 XML 数据绑定类。所有模式都**[位于此处。](http://www.spiraltechinc.com/Tmats/)**

为此，我使用了以下根模式文档：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:TmatsG="http://www.spiraltechinc.com/tmats/106-13/TmatsG" elementFormDefault="unqualified">
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon" schemaLocation="TmatsCommonTypes.xsd"/>
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsC" schemaLocation="TmatsCGroup.xsd"/>
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsD" schemaLocation="TmatsDGroup.xsd"/>
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsG" schemaLocation="TmatsGGroup.xsd"/>
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsH" schemaLocation="TmatsHGroup.xsd"/>
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsM" schemaLocation="TmatsMGroup.xsd"/>
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsP" schemaLocation="TmatsPGroup.xsd"/>
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsR" schemaLocation="TmatsRGroup.xsd"/>
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsS" schemaLocation="TmatsSGroup.xsd"/>
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsT" schemaLocation="TmatsTGroup.xsd"/>
    <xs:import namespace="http://www.spiraltechinc.com/tmats/106-13/TmatsV" schemaLocation="TmatsVGroup.xsd"/>
    <xs:element name="Tmats" type="TmatsG:Tmats">
        <xs:annotation>
            <xs:documentation>Tmats Root</xs:documentation>
        </xs:annotation>
    </xs:element>
</xs:schema> 
```

我使用 Linq to XSD 创建了类。然后我写了以下测试：

```
[TestMethod()]
public void TmatsXmlExample4()
{
    Tmats tmats = new Tmats
    {
        ProgramName = "My Program",
        OriginationDate = DateTime.Now,
    };
    tmats.PointOfContact.Add(new PointOfContactType
    {
         Address = "12345 Anywhere Street",
         Agency = "My Agency",
         Name = "Robert Harvey",
         Telephone = "111-222-3333"
    });
    Debug.Print(tmats.ToString());
} 
```

我期望的输出看起来像这样：

```
<Tmats>
  <TmatsG:ProgramName>My Program</TmatsG:ProgramName>
  <TmatsG:OriginationDate>2012-05-09-07:00</TmatsG:OriginationDate>
  <TmatsG:PointOfContact>
    <TmatsCommon:Name>Robert Harvey</TmatsCommon:Name>
   <TmatsCommon:Agency>My Agency</TmatsCommon:Agency>
    <TmatsCommon:Address>12345 Anywhere Street</TmatsCommon:Address>
    <TmatsCommon:Telephone>111-222-3333</TmatsCommon:Telephone>
  </TmatsG:PointOfContact>
</Tmats> 
```

相反，我得到的是：

```
<Tmats>
  <ProgramName xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsG">My Program</ProgramName>
  <OriginationDate xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsG">2012-05-09-07:00</OriginationDate>
  <PointOfContact xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsG">
    <Name xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon">Robert Harvey</Name>
    <Agency xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon">My Agency</Agency>
    <Address xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon">12345 Anywhere Street</Address>
    <Telephone xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon">111-222-3333</Telephone>
  </PointOfContact>
</Tmats> 
```

有没有办法让 LinqToXSD 产生预期的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:24:00.147

您应该映射每个导入的模式：

```
<?xml version="1.0"?>
    <xs:schema 
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:TmatsCommon="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon"
        xmlns:TmatsC="http://www.spiraltechinc.com/tmats/106-13/TmatsC"
        xmlns:TmatsD="http://www.spiraltechinc.com/tmats/106-13/TmatsD"
        xmlns:TmatsG="http://www.spiraltechinc.com/tmats/106-13/TmatsG"
        xmlns:TmatsH="http://www.spiraltechinc.com/tmats/106-13/TmatsH"
        xmlns:TmatsM="http://www.spiraltechinc.com/tmats/106-13/TmatsM"
        … 
        elementFormDefault="unqualified"> 
```

**elementFormDefault**仅适用于它所在的架构，并且不会覆盖任何包含或导入中的设置。

如果要隐藏命名空间，则所有模式都必须指定**elementFormDefault=" *unqualified* "。**同样，如果要公开命名空间，每个模式都必须指定**elementFormDefault=" *qualified* "**

**查看单元测试后**更新：****

 ***您的输入：*

```
<Tmats 
    xmlns:TmatsG="http://www.spiraltechinc.com/tmats/106-13/TmatsG"
    xmlns:TmatsCommon="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon">
    <TmatsG:ProgramName>My Project</TmatsG:ProgramName> 
    <TmatsG:OriginationDate>2012-05-15</TmatsG:OriginationDate> 
```

*你的输出：*

```
<Tmats> 
    <Tmats 
        xmlns:TmatsG="http://www.spiraltechinc.com/tmats/106-13/TmatsG"
        xmlns:TmatsCommon="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon">
        <TmatsG:ProgramName>My Project</TmatsG:ProgramName> 
        <TmatsG:OriginationDate>2012-05-15</TmatsG:OriginationDate> 
```

突出的问题是标签的重复——在我看来一切正常，但仍在努力理解为什么会发生这种情况。

**周一更新：**

我认为 LinqToXSD 工具中存在一个错误 - 我已经完成了我能想到的所有组合，并且无法始终如一地解决您的问题，但是......我已经设法解决了`<Tmats>`重复问题：

在您的 XmlHelper 文件中，更改 return 语句：

```
System.Xml.Linq.XDocument xd = System.Xml.Linq.XDocument.Parse(sb.ToString());
return xd.Root.FirstNode.ToString(); 
```

我知道这是一个**hack**，但它解决了问题并且您的 LoopbackTest 通过了。

如果你使用 Tmats 类创建元素，你不会得到任何前缀，我尝试了各种属性组合，我能做的最好的就是重新附加命名空间。如果您正在与外部系统交换信息，那么我确实有一个**修复**：

1.  在您的代码中使用您的 Tmats 对象，
2.  用命名空间序列化它，
3.  通过 XSLT 运行它以将 ns 映射到前缀。

我知道这很笨拙，但我认为这是您在实际修复 LinqToXSD 代码时最好的方法。

XSLT 将命名空间映射到前缀（您需要在“样式表”声明和“映射器”中维护一组命名空间：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:mapper="http://mapper"
    xmlns:TmatsCommon="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon"
    xmlns:TmatsC="http://www.spiraltechinc.com/tmats/106-13/TmatsC"
    xmlns:TmatsD="http://www.spiraltechinc.com/tmats/106-13/TmatsD"
    xmlns:TmatsG="http://www.spiraltechinc.com/tmats/106-13/TmatsG"
    xmlns:TmatsH="http://www.spiraltechinc.com/tmats/106-13/TmatsH"
    xmlns:TmatsM="http://www.spiraltechinc.com/tmats/106-13/TmatsM"
    xmlns:TmatsP="http://www.spiraltechinc.com/tmats/106-13/TmatsP"
    xmlns:TmatsR="http://www.spiraltechinc.com/tmats/106-13/TmatsR"
    xmlns:TmatsS="http://www.spiraltechinc.com/tmats/106-13/TmatsS"
    xmlns:TmatsT="http://www.spiraltechinc.com/tmats/106-13/TmatsT"
    xmlns:TmatsV="http://www.spiraltechinc.com/tmats/106-13/TmatsV">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>
  <mapper:namespaces>
    <ns prefix="TmatsCommon" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon"/>
    <ns prefix="TmatsC" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsC"/>
    <ns prefix="TmatsD" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsD"/>
    <ns prefix="TmatsG" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsG"/>
    <ns prefix="TmatsH" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsH"/>
    <ns prefix="TmatsM" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsM"/>
    <ns prefix="TmatsP" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsP"/>
    <ns prefix="TmatsR" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsR"/>
    <ns prefix="TmatsS" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsS"/>
    <ns prefix="TmatsT" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsT"/>
    <ns prefix="TmatsV" uri="http://www.spiraltechinc.com/tmats/106-13/TmatsV"/>
  </mapper:namespaces>
  <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*[namespace-uri()=document('')/*/mapper:namespaces/*/@uri]">
  <xsl:variable name="vNS" select="document('')/*/mapper:namespaces/*[@uri=namespace-uri(current())]"/>
  <xsl:element name="{$vNS/@prefix}:{local-name()}" namespace="{namespace-uri()}" >
   <xsl:copy-of select="namespace::*[not(. = namespace-uri(current()))]"/>
   <xsl:copy-of select="@*"/>
   <xsl:apply-templates/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

产生：

```
<Tmats>
  <TmatsG:ProgramName xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsG">My Program</TmatsG:ProgramName>
  <TmatsG:OriginationDate xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsG">2012-05-09-07:00</TmatsG:OriginationDate>
  <TmatsG:PointOfContact xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsG">
    <TmatsCommon:Name xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon">Robert Harvey</TmatsCommon:Name>
    <TmatsCommon:Agency xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon">My Agency</TmatsCommon:Agency>
    <TmatsCommon:Address xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon">12345 Anywhere Street</TmatsCommon:Address>
    <TmatsCommon:Telephone xmlns="http://www.spiraltechinc.com/tmats/106-13/TmatsCommon">111-222-3333</TmatsCommon:Telephone>
  </TmatsG:PointOfContact>
</Tmats> 
```

好的，所以这远非理想，但是只有当您需要与需要修复 xml 输出的其他人进行交互时，您的代码在项目内部才能正常工作（请记住更改**elementFormDefault="qualified"**（或删除它）在您的 XSD 中） - 如果您将 XSLT 缓存为`XslCompiledTransform`您几乎不会注意到它发生。**

# javascript - 使用 javascript 放置画布

> ID：10543585
> 
> 赞同：0
> 
> 时间：2012-05-10T23:39:53.693
> 
> 标签：javascript, html, canvas, onresize

我正在尝试在画布元素上绘制 2 个箭头，并将它们放在屏幕的左侧和右侧，位于其高度的中间。在这里小提琴：http: [//jsfiddle.net/Wzt5j/9/](http://jsfiddle.net/Wzt5j/9/)

在我正在尝试这个的网站（[http://bit.ly/JV5I0Z](http://bit.ly/JV5I0Z)）中，图像被绘制，但是当我调整窗口大小时“placeArrows”函数不会被调用。在小提琴窗口中，它们甚至没有被绘制，我不确定是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:51:16.647

调整大小时出现 JS 错误。thumdList（第 150 行）和 marginDiv（第 156 行）为空。

这会停止您的脚本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T23:48:05.990

小提琴不起作用的原因是因为 JSFiddle 很愚蠢。您定义的函数仅在其包装函数内部定义，因此不能被其他任何东西访问。通过将函数声明为`myfunction = function() {...}`.

至于无法调整大小，我没有看到任何监听`onresize`. 添加这个：`window.onresize = placeArrows;`。

# google-app-engine - 任务队列没有运行我所有的任务——应用引擎后端

> ID：10543588
> 
> 赞同：2
> 
> 时间：2012-05-10T23:40:32.517
> 
> 标签：google-app-engine, task-queue

我有一个在后端实例上运行的应用程序。它有 11 个任务。第一个由 /_ah/start 启动，然后它又启动另外十个工作任务。工作任务具有以下结构：

```
done = False
while not done:
    do_important_stuff()
    time.sleep (30)
    if a_long_time_has_passed():
        done = True 
```

应用引擎上的执行行为每次都是一样的。调度任务运行并将 10 个工作任务排入队列。前七个工作任务开始运行并正确执行。最后三个坐在队列中，从不跑步。任务队列应用程序控制台显示队列中的所有十个任务，其中七个正在运行。

该应用程序还停止响应 HTTP 请求，返回 503 状态代码，日志未显示我的 http 处理程序正在被调用。

worker 任务队列配置最大速率为 1/s 和 2 个桶。奇怪的是，管理控制台显示强制速率为 0.1 秒。由于任务永远运行，它们不会返回不成功的完成状态代码。而且cpu负载可以忽略不计。工作人员主要进行 URL 获取，然后等待 30 秒再进行一次。

日志没有帮助。我不知道在哪里可以找到可以帮助我解决问题的诊断程序。我正在使用免费帐户进行测试。一次执行是否有 8 个任务的限制？我在文档中没有看到类似的内容，但我已经没有想法了。最终，我想并行运行更多任务。

谢谢你能给我的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T03:53:04.030

后端实例将同时处理多少个请求是有限制的，听起来您正在遇到这个限制。

替代方案包括：

*   使用常规任务队列而不是针对后端的任务队列
*   启动多个后端实例
*   使用线程从启动请求自己启动线程，而不是依赖任务队列为你做

请注意，如果您的任务受 CPU 限制，您不会从运行 10 个任务超过 5 个、2 个甚至 1 个任务中获得任何额外的好处。

# jquery - 如何为具有 Jquery 的 aspx 页面中的列表实现“带到前面”

> ID：10543592
> 
> 赞同：0
> 
> 时间：2012-05-10T23:40:41.657
> 
> 标签：jquery, asp.net, css, z-index, swfobject

以上是我在这篇文章中提到的页面的顶部。在此图像中，表中具有“第一步”的所有内容都是使用 javascript 从 SWF 文件加载的。这个 javascript 使用 Jquery 和像“swfobject.js”这样的文件。

问题是当页面加载时，“Shop by”控件有一个值列表，但在此页面中，当用户单击“Shop by”时，它不会显示。内容已显示，但即​​将出现。我试图设置'zindex'，'absoulte postioning'但没有成功。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:59:53.500

我想这`wmode="transparent"`与您的 swf 中的事情有关。因为我在这里看不到你的 html，你怎么称呼你的 swf，检查这个[http://www.flashdesignerzone.com/tutorials/t1026.php](http://www.flashdesignerzone.com/tutorials/t1026.php)也许它有帮助

# c++ - 逐行检查图像的像素

> ID：10543603
> 
> 赞同：1
> 
> 时间：2012-05-10T23:42:36.460
> 
> 标签：c++, image-processing, computer-vision

我取了视频的两个连续帧的差异。除了移动的物体，我得到的（如你所知）一个黑框。移动的物体是白色的。我想计算帧中白色像素的数量。我的意思是，我想逐行浏览图像，如果第 i 个像素的值大于指定的数字（比如 50），那么它们必须存储在一个数组中。稍后我将使用这个数组来检查是否真的有一个物体或只是一个噪音。例如，如果汽车在视频中移动，那么在帧差分之后，我将逐行检查包含汽车的帧的每个像素，以检测该汽车。因此，当视频中有一辆移动的汽车时，帧差分后的像素值大于 0。知道如何将移动汽车的所有像素求和，这将使我能够确定它是汽车还是噪音。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T05:01:02.793

您可以使用斑点检测：[http](http://www.labbookpages.co.uk/software/imgProc/blobDetection.html) ://www.labbookpages.co.uk/software/imgProc/blobDetection.html 来检测每个“差异图像”中的一团白色像素。一旦你有了斑点，你可以通过找到它们的像素位置的平均值来找到它们的中心。然后，您可以找到这些中心扫过的路径，并根据某些标准对其进行检查。

在不了解您的图像的更多信息的情况下，我无法提出标准，但例如，如果您正在观看它们沿着笔直的道路移动，您可能会期望所有点大致共线。在这种情况下，您可以获取梯度和发现 blob 的点，并使用直线的点梯度形式获得直线方程：

```
y - y_1 = m(x - x_1) 
```

例如给定一个点 (4, 2) 和梯度 3 你会得到

```
y - 2 = 3(x - 4)
y = 3x - 2 
```

然后，您可以对照这条线检查所有点，看看它们是否位于这条线上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:11:10.953

您可能会发现差异并非微不足道。例如，您可能会发现最大的差异在汽车边缘附近，垂直于汽车的运动。这两个边缘之一将具有负值，一个正值。因此，“差异图像”的最大优点是限制了您的搜索区域。单独来看它不是很有用。

那你该怎么办？好吧，在正常图像上使用边缘检测算法，并将在那里找到的边缘与在差异图像中找到的 2 个边缘进行比较。属于汽车的边缘将连接来自差异图像的 2 个边缘。

# git - git smudge/clean 关键字扩展产生错误的结果

> ID：10543613
> 
> 赞同：1
> 
> 时间：2012-05-10T23:43:48.583
> 
> 标签：git

我正在尝试将一些信息放入已提交的文件中（我是 CVS 切换器），但结果似乎总是针对上一次提交。

我尝试使用 Progit.pdf 的关键字扩展中的 $Date$ 示例，结果相似。这是我的脚本，它们应该用提交 SHA1 和日期替换 $Log$，然后在返回的路上恢复 $Log$：

## 弄脏

```
#! /usr/bin/env ruby
#
data = STDIN.read
info = `git log --pretty=format:"%h on %ad " -1`
puts data.gsub(/\$Log.*\$/, '$Log: ' + info.to_s + ' $') 
```

## 干净的

```
#! /usr/bin/env ruby
#   
#
data = STDIN.read.tr("\r","\n")
data.sub!(/\$Log.*\$/,"$Log$")     # Replace expanded string, if any, with $Log$
puts data 
```

感谢您的任何建议。

# mysql - 下拉菜单在页面处理后始终显示第一个选项而不是已处理选项

> ID：10543615
> 
> 赞同：0
> 
> 时间：2012-05-10T23:44:18.693
> 
> 标签：mysql, drop-down-menu

我的下拉菜单在查询方面工作得很好，但有两个问题：

1-当我选择一个选项并点击提交按钮时，查询返回正常，但不是下拉菜单显示已处理的选项，它实际上总是显示第一个选项，而不管已处理的选项如何。

2-当我进入我的页面时，在我从下拉菜单中选择一个选项并点击提交之前，不会显示任何数据。我希望页面在第一次输入时默认处理第一个选项。

```
<form action="http://localhost/xampp/mydomain.com/?page_id=2283" method='post'>
<select name="selected_date">
    <option value="2012-05-01">01.05.2012</option>
    <option value="2012-04-01">01.04.2012</option>
    <option value="2012-03-01">01.03.2012</option>
    </select>
    <input type="submit" VALUE="Go"/>
    </form>

$date=$_POST['selected_date'];

$query = " SELECT * from table1 WHERE
 `drop_date` > '$date' AND
 `drop_date` <= DATE_ADD('$date', INTERVAL 1 YEAR)"; 
```

欢迎任何帮助，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:11:54.513

我从您的问题中假设访问者在选择日期后点击“开始”按钮时被重定向回同一页面。要让他们的选择显示在下拉列表中，您必须在元素之前先阅读他们的选择。

```
 <select name="selected_date">
      <?php
        if (isset($_POST['selected_date'])){
          $selected_date = $_POST['selected_date'];
          echo "
            <option selected value=\"".$selected_date."\">".$selected_date."</option>
          "; 
        }
      ?>
      <option value="2012-05-01">01.05.2012</option>
      <option value="2012-04-01">01.04.2012</option>
      <option value="2012-03-01">01.03.2012</option>
    </select> 
```

本质上，它所做的只是检查表单是否已发布并获取所选日期，将选项添加到您的选择元素，该日期作为值并已选择它，以便在页面加载时在下拉列表中选择它。

至于您在第一个页面加载时页面没有显示任何选择的问题，我相信您的问题是您的选择元素中的所有选项都没有“选定”属性。

我希望这对您有所帮助...让我们保持最新状态！

比利时外星人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:32:32.493

好吧，为此努力奋斗，我将回答我自己的问题：

```
<?php
$date=$_POST['selected_date']; //retrieves submitted option
?>

<form action="file.php" method='post'> As of :
<select name="selected_date">
<option value="2012-05-01" <?php if ( $date == '2012-05-01' ) {echo " selected";}?> >01.05.2012</option>
<option value="2012-04-01" <?php if ( $date == '2012-04-01' ) {echo " selected";}?> >01.04.2012</option>
<option value="2012-03-01" <?php if ( $date == '2012-03-01' ) {echo " selected";}?> >01.03.2012</option>
</select>
<input type="submit" VALUE="Get Data"/>
</form>

<?php
if($_POST['selected_date'])
$date=$_POST['selected_date'];
else
$date="2012-05-01"; // assigns a default option to be processed until user submits another one (to avoid empty feedback on 1st page load)
?> // 
```

使用 BelgianAlien 的答案，我最终添加了第一个检索提交选项的代码，以便可以在以下选项的 IF 语句中识别它

我还添加了最后的代码行，这些代码行允许在第一页加载时处理默认选项，从而避免来自服务器的空反馈。

# jquery - 使用 jQuery Ajax 调用放置 CSV 数据

> ID：10543617
> 
> 赞同：1
> 
> 时间：2012-05-10T23:44:45.590
> 
> 标签：jquery, ajax, rest

我正在尝试通过 api 使用 jQuery ajax 调用更新网站上的电子表格。我正在使用的其余 API 要求我使用[带有 csv data 的 PUT 请求](https://www.socialtext.net/st-rest-docs/%2Fdata%2Fworkspaces%2F%3Aws%2Fsheets%2F%3Asheetname)。当我执行下面的脚本时，我创建了一个 204 内容，但是当我访问该页面时，我的内容没有被添加。

```
$.ajax({
    url:'/data/workspaces/yada/sheets/yada',
    type:'PUT',
    data:'a,b,c;d,e,f'
}) 
```

如何正确包含我的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:52:07.967

我认为您需要设置 contentType：

```
$.ajax({
    url:'/data/workspaces/yada/sheets/yada',
    contentType: "text/csv",
    type:'PUT',
    data:'a,b,c;d,e,f'
}) 
```

# jquery - jQuery - 在向表格添加一行后对表格进行排序

> ID：10543618
> 
> 赞同：11
> 
> 时间：2012-05-10T23:45:05.177
> 
> 标签：jquery

我有 2 个表，一个表有 2 列，另一个表有 1 列。当您单击一行时，该行将从表中删除，并将一个新的 TR 添加到对面表的末尾。现在我想按字母顺序排序。

像 tablesorter 这样的 jQuery 插件对于我想做的事情来说完全是矫枉过正。有没有一种简单的方法可以对表格进行排序？

编辑：[小提琴](http://jsfiddle.net/nvJve/)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-11T00:06:48.363

在这里，您有一个简单的表格排序器，[这里有一个 Fiddle 演示](http://jsfiddle.net/zuul/EsyhJ/)：

## HTML

```
<table id="sort-table">
    <tbody>
        <tr><td>he</td></tr>
        <tr><td>stackoverflow</td></tr>
        <tr><td>by</td></tr>
        <tr><td>vote</td></tr>
        <tr><td>post</td></tr>
        <tr><td>And</td></tr>
        <tr><td>clicking</td></tr>
        <tr><td>up</td></tr>
        <tr><td>did</td></tr>
    </tbody>
</table>
<br>
<button class="sort-table asc">sort ASC</button>
<button class="sort-table desc">sort DESC</button> 
```

## 查询

```
$('.sort-table').click(function(e) {
    e.preventDefault();                    // prevent default behaviour

    var sortAsc = $(this).hasClass('asc'), // ASC or DESC sorting
        $table  = $('#sort-table'),        // cache the target table DOM element
        $rows   = $('tbody > tr', $table); // cache rows from target table body

    $rows.sort(function(a, b) {

        var keyA = $('td',a).text();
        var keyB = $('td',b).text();

        if (sortAsc) {
            return (keyA > keyB) ? 1 : 0;  // A bigger than B, sorting ascending
        } else {
            return (keyA < keyB) ? 1 : 0;  // B bigger than A, sorting descending
        }
    });

    $rows.each(function(index, row){
      $table.append(row);                  // append rows after sort
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-21T10:37:00.557

我没有足够的声誉来评论 Zuul 的答案，但它并不总是有效。检查这个小提琴：

```
$('.sort-table').click(function(e) {
    e.preventDefault();                        // prevent default button click behaviour

    var sortAsc = $(this).hasClass('asc'),     // ASC or DESC
        $table  = $('#sort-table'),            // cache the target table DOM element
        $rows   = $('tbody > tr', $table);     // cache all rows from the target table body

    $rows.sort(function(a, b) {

        var keyA = $('td',a).text();
        var keyB = $('td',b).text();

        if (sortAsc) {
            return (keyA > keyB) ? 1 : 0;     // A bigger than B, sorting ascending
        } else {
            return (keyA < keyB) ? 1 : 0;     // B bigger than A, sorting descending
        }
    });

    $rows.each(function(index, row){
      $table.append(row);                    // append rows after sort
    });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<table id="sort-table">
    <tbody>
<tr><td>Text 2003-01-27.pdf</td></tr>
<tr><td>Text 2004-03-23.pdf</td></tr>
<tr><td>Text 2004-04-01.pdf</td></tr>
<tr><td>Text 2004-12-31.pdf</td></tr>
<tr><td>Text 2010-04-14.pdf</td></tr>
<tr><td>Text 2011-02-07.pdf</td></tr>
<tr><td>Medic 2004-08-24.pdf</td></tr>
<tr><td>Bank 2009-10-06.pdf</td></tr>
<tr><td>Family 2010-10-19.pdf</td></tr>
<tr><td>Statement 2002-03-06.pdf</td></tr>
<tr><td>Statement 2002-03-06.pdf</td></tr>
<tr><td>Statement 2004-06-30.pdf</td></tr>
<tr><td>Statement 2010-03-31.pdf</td></tr>
<tr><td>Next.pdf</td></tr>
<tr><td>School 2002-03-04.pdf</td></tr>
<tr><td>School 2003-06-23.pdf</td></tr>
<tr><td>School 2010-06-10.pdf</td></tr>
<tr><td>Deal 2002-03-04.pdf</td></tr>
<tr><td>Deal 2002-06-03.pdf</td></tr>
<tr><td>Deal 2003-06-03.pdf</td></tr>
<tr><td>Vacation 2009-08-10.pdf</td></tr>
<tr><td>Vacation 2007-03-26.pdf</td></tr>
<tr><td>Vacation 2009-08-10.pdf</td></tr>
<tr><td>Vacation 2008-03-19.pdf</td></tr>
<tr><td>Vacation 2009-03-23.pdf</td></tr>
<tr><td>Vacation 2012-09-21.pdf</td></tr>
<tr><td>Vacation 2012-09-17.pdf</td></tr>
<tr><td>Vacation 2014-09-25.pdf</td></tr>
<tr><td>Vacation 2014-10-23.pdf</td></tr>
<tr><td>Work 2004-06-21.pdf</td></tr>
<tr><td>Work 2009-09-09.pdf</td></tr>
<tr><td>Work 2010-05-01.pdf</td></tr>
<tr><td>AGR 2002-03-05.pdf</td></tr>
<tr><td>AGR 2004-10-28.pdf</td></tr>
<tr><td>AGR 2005-11-22.pdf</td></tr>
<tr><td>AGR 2011-01-20.pdf</td></tr>
    </tbody>
</table>
<br>
<button class="sort-table asc">sort ASC</button>
<button class="sort-table desc">sort DESC</button>
```

[JS小提琴](https://jsfiddle.net/ukf288vL/)

# django - django 子域 a la craigslist.com

> ID：10543620
> 
> 赞同：4
> 
> 时间：2012-05-10T23:45:34.073
> 
> 标签：django

我有兴趣设置我的应用程序，以便我可以提供特定位置的内容。

类似于 craigslist，miami.craigslist.org 仅显示迈阿密的帖子。

假设我有一个具有 City 字段的模型，那么实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T00:19:05.407

Banjer 建议使用 Sites 框架，但我觉得它可能不是 100% 适合您的情况。站点框架适用于共享同一数据库的不同站点。但在你的情况下，它都是同一个网站，你基本上只是想通过一个论据来表达你对城市的看法。

您可以通过将通配符指向`*.domain.com`您的 django 站点来做一些更简单的事情，然后`request.get_host()`在视图中使用来解析子域：
[https ://docs.djangoproject.com/en/1.4/ref/request-response/#django .http.HttpRequest.get_host](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpRequest.get_host)

因此，如果域是：“losangeles.domain.com”，并且您解析出“losangeles”，则可以在查询中将其用作您的城市“标签”。当您创建新内容时，您只需将其标记为城市即可。

```
Post.objects.filter(city_tag="losangeles") 
```

我想这取决于您在站点中需要的“位置”结构的稳健程度。它很可能是一个`City`具有各种元数据字段的模型，包括`tag`字段。然后，您会将其与内容关联为外键。它有点与站点框架相同的一般概念，但在这种情况下，您并没有真正创建不同的站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:01:44.000

您应该查看[“站点”框架](https://docs.djangoproject.com/en/dev/ref/contrib/sites/)。如果您曾经使用过内置的 Django 管理员，那么您可能已经看到了站点部分，其中 example.com 是默认列出的唯一站点。

真实世界的例子，来自我提供的链接：

> 将内容与多个站点相关联
> 
> 由 Django 提供支持的网站 LJWorld.com 和 Lawrence.com 由同一个新闻机构运营——位于堪萨斯州劳伦斯的 Lawrence Journal-World 报纸。LJWorld.com 专注于新闻，而 Lawrence.com 专注于本地娱乐。但有时编辑想在这两个网站上发表一篇文章。
> 
> 解决这个问题的脑残方法是要求网站制作者两次发布相同的故事：一次发布给 LJWorld.com，另一次发布给 Lawrence.com。但这对于网站制作者来说效率很低，并且在数据库中存储同一故事的多个副本是多余的。
> 
> 更好的解决方案很简单：两个站点使用相同的文章数据库，并且一篇文章与一个或多个站点相关联。

因此，您可以在 Site 模型中添加一个字段，而不是 City 字段，例如：

```
sites = models.ManyToManyField(Site) 
```

您基本上拥有一个所有城市都使用的数据库。方便，但我想知道它会如何缩小道路。我自己开始了一个类似的项目，并将使用 Django 站点框架来启动该项目。不过，我有兴趣从数据库人员那里听到一个更具可扩展性的解决方案。

# c++ - 如何在参数非const中传递const指针

> ID：10543624
> 
> 赞同：1
> 
> 时间：2012-05-10T23:45:45.063
> 
> 标签：c++, pointers, constants, param

我在给定的一段代码中有两个指针（const Vec* a 和 const Vec b），我需要将这两个值传递给没有参数的函数（const Vec *），它们是在代码期间实例化的但只有 (Vec *)。我怎么能在不移动函数定义的情况下做到这一点，但如果有必要，我应该采取什么程序？

```
//const Vec* from;
//const Vec* at;
Vec* viewVec; 
viewVec = Vec::sub( view->at, view->from);

//static Vec* sub(Vec*, Vec*);
Vec* Vec::sub(Vec* a, Vec* b) {
    return new Vec(a->x - b->x, a->y - b->y, a->z - b->z);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:51:07.277

最简单的答案可能是：“不要”。如果您需要使用 a`Vec *`而不是 a `Vec const *`，那么首先以这种方式声明它。

如果这是某个承诺不会修改它但由于某种原因`const`对`const_cast`.

如果`std::vector`你所指向的指针实际上不是`const`（在它的声明点），而你恰好有一个指向它的指针`std::vector const *`，那么在它上面使用它是“安全的”（但通常仍然是不明智的）`const_cast`。但是，如果您修改任何最初声明为 is 的变量`const`，则它是未定义的行为。例如，编译器可能会看到您`std::vector const`多次执行一些昂贵的操作，并且可以自由缓存结果的某些部分，因为它可以假设它总是在处理相同的事情，所以如果您更改它，您可能会得到不正确（甚至不一致）的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T23:48:17.087

您可以`const_cast`为此使用，例如

```
viewVec = Vec::sub(const_cast<Vec*>(view->at), const_cast<Vec*>(view->from)); 
```

你要不要是另一回事。如果你真的不能改变函数的签名（这可能是最简单的修复），你总是可以编写一个包含狡猾转换的包装器 - 这样，至少调用者不需要自己做任何转换：

```
Vec *Vec::sub(const Vec *a, const Vec *b) {
    return sub(const_cast<Vec*>(view->at), const_cast<Vec*>(view->from));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T23:48:08.950

`const_cast<type>(value)`你去吧；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T00:53:02.530

正如人们所提到的，您可以使用`const_cast`. 您必须小心执行此操作的原因是您最终可能会修改不应修改的内容。例如，如果某个对象按原样声明一个指针，`const`因为它想确保该指针不能更改。如果您然后`const_cast`将指针传递给另一个函数，则另一个函数可以使其指向新的东西，从而与试图保护它的原始对象发生冲突。

特别是，如果对象 A 分配了一些 const 指针指向的内存怎么办。如果你将指针传递给一个函数，`const_cast`并且这个函数`delete`是内存，或者重新存储`alloc`它，那么原始内存块将存在且未被删除。

希望这可以帮助。

# android - 当上下文设置为 WebView 时，VideoView 不会播放

> ID：10543625
> 
> 赞同：0
> 
> 时间：2012-05-10T23:45:56.520
> 
> 标签：android, multithreading, webview, android-videoview

基本上，当我在 webview 中显示 .gif 时，我正在设置一个 VideoView 来播放音乐（比 MediaPlayer 更多的功能）。我不确定我是否需要多个线程或其他东西，但是每当我尝试同时运行这两个线程时，它要么崩溃，要么不播放音乐。是不是因为我的“内容视图”设置为 Web 视图，所以我无法访问 main.xml 上的对象（如视频视图）？

代码：setContentView(R.layout.main);

```
 musicPlayer = (VideoView)findViewById(R.id.player);

   //run gif
    view = new GifWebView(this, "file:///android_res/raw/kk.gif");
    setContentView(view);

  //start player

    musicPlayer.setVideoURI(Uri.parse("android.resource://" + getPackageName() + "/" + musicList[0]));
    musicCounter =0;

    musicPlayer.setOnCompletionListener(TrackRepeater);
    musicPlayer.requestFocus();
    musicPlayer.start(); 
```

如果我不明显将上下文更改为 WebView，则播放器可以工作，不知道在这里做什么。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:55:18.187

请详细说明您使用 VideoView 播放音乐的原因。

> 比 MediaPlayer 更多的功能

VideoView 本质上是 SurfaceView 和 MediaPlayer 的包装器。VideoView 中的额外功能应该只是与在屏幕上播放视频相关的东西，您没有使用这些功能。您在 MediaPlayer 上使用它的具体原因是什么？

但我认为你是对的，通过改变你的活动内容你打破了 VideoView。您需要找到一种无需多次调用 setContentView() 的方法。这里有很多可能性有两种：

获取对 main.xml 布局的父视图的引用并在其上调用 .addView() 以添加 GifWebView，而不是使用它调用 setContentView()。

将 GifWebView 的声明添加到您的 xml 布局中，并以与拥有 VideoView 相同的方式获取对它的引用。

# c# - 在不知道类型的情况下将值设置为 Object

> ID：10543636
> 
> 赞同：0
> 
> 时间：2012-05-10T23:47:27.287
> 
> 标签：c#, reflection, .net-4.0

通常，如果对象是类实例，我会使用反射为其成员设置值。考虑以下：

```
class Foo
{
  public Control _tCtrl { get; set; }
  public Object _tObj { get; set; }

  public void Set()
  {
    // How do I give tObj the converted value of _tCtrl.ToString() ?

    // var val = Convert.ChangeType( _tCtrl.ToString(), tObj.GetType() );
    // _tObj.SetValue( val );
  }
} 
```

调用它就像：

```
Class Bar
{
  public Int32 _i { get; set; }
}

Bar bar = new Bar();   
Foo foo = new Foo();

foo._tCtrl = new TextBox() { Text = "100" };
foo._tObj = bar._i;    
foo.Set(); 
```

或者：

```
Foo foo = new Foo();
Int32 i;

foo._tCtrl = new TextBox() { Text = "100" };
foo._tObj = i;

foo.Set(); 
```

任何东西都可以传递给 Set()。假设我可以从 a 转换`String`为`tObj.GetType()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:15:45.740

我认为这归结为将字符串转换为任何其他类型。那有问题。您如何将字符串转换为 a `Form`、 a`List<>`或 a `Random`？它需要您为 .NET Framework 中的每种类型（或者可能是 Universe 中的每种现有类型）编写一个转换器。

你不应该尝试这样做。我不知道您要达到什么目的，但几乎可以肯定有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:02:01.570

没有办法允许这种语法，但您可以执行以下操作：

```
foo.Set(bar, "_i"); 
```

在哪里`Set`使用以下内容：

```
type.GetProperty(propertyName, Type.EmptyTypes).SetValue(tObj, value, Type.EmptyTypes); 
```

其中`propertyName`、`tObj`和`value`在别处定义。

# bash - 如何使用 bash 脚本重命名当前目录及其子目录中的文件？

> ID：10543637
> 
> 赞同：6
> 
> 时间：2012-05-10T23:47:35.653
> 
> 标签：bash, shell, command-line, rename, subdirectory

我可以使用“重命名”命令将缺少的字符添加到当前目录中的所有文件名中，如下所示：

```
echo "Renaming files..."
rename -v "s/^abcd124(.+)/abcd1234$1/" *.wav.gz;
echo "Done." 
```

但是，我想对当前目录**及其**所有子目录执行此操作。我试过这个：

```
echo "Renaming files..."
for dir in $(find ./ -type d); do
    rename -v "s/^$dir\/abcd124(.+)/$dir\/abcd1234$1/" *.wav.gz;
done;
echo "Done." 
```

但是，如果`$dir`变量包含这些特殊字符中的任何一个：`{}[]()^$.|*+?\`那么它们不能用 \ 正确转义，我的脚本会失败。

解决这个问题的最佳方法是什么？另外，你们认为用什么`awk`来解决这个问题（优点/缺点？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T18:11:46.253

你也可以试试：

```
find . -name "*.wav.gz" | xargs rename -v "s/abcd124*/abcd1234$1/" 
```

它适用于具有“xargs”命令的较新的 Unix 系统。请注意，我稍微编辑了正则表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T00:17:33.103

尝试：

```
find ./ -type d -execdir rename -v "s/^abcd124(.+)/abcd1234\1/" *.wav.gz ";" 
```

Find 确实已经为您的文件提供了一个迭代器 - 您不需要`for`around it 或`xargs`behind ，这很常见。好吧 - 在极少数情况下，它们可能会有所帮助，但通常不会。

在这里，-execdir 很有用。Gnu-find 有它；我不知道你的发现是否也有。

但是您需要确保在您启动此命令的目录中没有 *.wav.gz 文件，因为否则您的 shell 将扩展它，并将扩展的名称交给重命名。

注意：我从重命名中收到警告，我应该在正则表达式中将 \1 替换为 $1，但如果这样做，则不会捕获该模式。我必须使用 \1 才能使其工作。

这是另一种方法。如果我们搜索 wav.gz 文件，为什么还要搜索目录？

```
find . -name "*.wav.gz" -exec rename -v "s/^abcd124(.+)/abcd1234\1/" {} ";" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T18:46:43.990

在`bash`4:

```
shopt -s globstar
rename -v "s/^$dir\/abcd124(.+)/$dir\/abcd1234$1/" **/*.wav.gz; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T16:49:55.350

请注意，Gentoo Linux 的重命名实用程序指向

[http://developer.berlios.de/project/showfiles.php?group_id=413](http://developer.berlios.de/project/showfiles.php?group_id=413)

通过它的 ebuild

[http://sources.gentoo.org/cgi-bin/viewvc.cgi/gentoo-x86/sys-apps/rename/rename-1.3.ebuild?view=markup](http://sources.gentoo.org/cgi-bin/viewvc.cgi/gentoo-x86/sys-apps/rename/rename-1.3.ebuild?view=markup)

对于 Debian 或者 Ubuntu，

`rename`is `/usr/bin/prename`，这是一个 perl 脚本

搬家前先看看`rename --help`。

# c# - 进入屏幕的一侧并从另一侧出来？

> ID：10543638
> 
> 赞同：0
> 
> 时间：2012-05-10T23:47:38.427
> 
> 标签：c#, xna

有人能给我建议如何让玩家通过屏幕的一侧，然后在 XNA C# 中从另一侧出来吗？

如果你需要一个例子，看看《超级马里奥兄弟 2》，例如，如果你进入右侧，你会从左侧出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:57:59.217

我将在最高级别做出回应，这比我说的要多得多。

通常你会阻止角色移动通过屏幕的屏障，如果你使用这样的系统，你需要在视口之外跟踪它们，并知道何时将它们包裹起来。这可能是角色完全从屏幕上消失的时候，或者是他的任何部分从屏幕上消失的那一刻。

然后它会处理当他部分离开屏幕时绘制的特殊情况，并在过渡完成后将他移动到另一侧（或者如果这对您的实现有意义，则可以在两者之间的任何时间，例如角色可能是一旦 50% 移出屏幕，则考虑在另一侧）。

另请注意，我专注于角色，但任何可见元素都必须了解这些情况，即使它们不能以相同的方式旅行。例如，如果你两边都是一半，你可能在两边都很脆弱。所有这些都是您需要做出的设计决策。

至于技术上的实现，这超出了我们在这里能为你做的，细化是我们可以做的，但创造应该来自你。（并且严重依赖您的其他代码，我们所做的任何东西都只是一个示例，不能直接使用）。

# orchardcms - 用于多个网站的单个 Orchard CMS 站点或为每个站点安装

> ID：10543641
> 
> 赞同：4
> 
> 时间：2012-05-10T23:47:56.267
> 
> 标签：orchardcms

由于 orchard 是数据库驱动的，似乎一个 orchard 安装可以托管在具有多个域绑定的 IIS 中，并且每个域都可以提取它自己的内容。但情况似乎并非如此。我必须为每个果园安装创建新的 IIS 网站。让所有这些网站都具有完全相同的基础内容似乎是非常多余的。

我如何在 IIS 中设置一个 Orchard 网站并让许多指向它的域具有独特的内容和主题？

如果它是公然的，请原谅我的无知，但我刚刚完成了为期一周的冒险评估 WordPress 并遇到了同样的问题。所以我对果园的导火索有点短。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T00:00:29.243

看起来可以在多租户配置中设置 Orchard 站点：

[http://docs.orchardproject.net/Documentation/Setting-up-a-multi-tenant-orchard-site](http://docs.orchardproject.net/Documentation/Setting-up-a-multi-tenant-orchard-site)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T01:09:21.637

即使不使用多个 Orchard 租户，*重写规则*模块也可用于将不同的域或子域重定向到站点内的不同地址。

在站点配置中，我能够添加以逗号分隔的主机列表（因为我启用了多租户，所以我在 Tenancy/Default/Host 中执行了此操作）。

安装重写规则模块后，我添加了规则

```
RewriteCond %{HTTP_HOST} ^((www\.)?shooting\-?coach\.de)$ [NC]
RewriteRule ^/+.*$ http://harald-muehlhoff.de/fotograf/ [R=302,L] 
```

将所有流量从*[www.]shooting[-]coach.de[/something]*重定向到*harald-muehlhoff.de/fotograf/*忽略初始请求 uri。显然，您的要求可能会有所不同，但希望这个示例可以帮助您入门！

# javascript - 检查客户端是否已接受安全异常

> ID：10543645
> 
> 赞同：1
> 
> 时间：2012-05-10T23:48:32.963
> 
> 标签：javascript, jquery, ssl, https, certificate

我们有一些用于内部测试/开发的暂存环境，它们不使用“真正的”SSL 证书。老实说，我对细节有点模糊，但最重要的是，当访问这些环境中的子域时，浏览器会提示您添加安全例外，例如*“您已要求 Firefox 安全地连接到 example.com 但我们无法确认您的连接是否安全”*：

![您已要求 Firefox 安全连接到 ***，但我们无法确认您的连接是否安全](../Images/c6f62cbadbf707b39bbcf12528800a2f.png)

这是否可以通过例如向有问题的 url 发出请求并处理错误代码/它可能返回的任何其他相关信息来检测？我找不到任何规范来说明浏览器是如何处理的。

## 编辑：

我不介意登陆页面本身发生的错误，用户很清楚。然而，一些请求在后台失败（从不同的子域中提取 css/js/其他静态内容）但你不知道它们会失败，除非你去 firebug 中的网络面板并在新选项卡中打开它并查看错误.. .

目的不是为了规避这一点，而是为了检测问题并说出类似*“嘿，这些请求失败，您可以通过直接访问这些 url 来添加安全异常：[bunch of links]”*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T00:29:24.687

检查证书的有效性完全是客户的责任。只有它可以知道它必须使用 HTTPS，并且它必须针对对该主机有效的证书使用它。

如果用户不进行这些检查，因此将自己置于可能发生 MITM 攻击的位置，您不一定能够知道它。活跃的 MITM 攻击者可以回答执行您用来尝试检查用户是否正确执行任务的任务，但合法用户甚至可能不知道它。这与想要使用从[to的](https://webmasters.stackexchange.com/a/28443/11628)[重定向`http://``https://`](https://webmasters.stackexchange.com/a/28443/11628)非常相似：只要没有活动的 MITM 攻击降级连接，它就可以工作。

（对此有一个例外，以确保客户端看到与您相同的握手：使用客户端证书时。在这种情况下，您至少会知道已使用证书进行身份验证的客户端会看到您的服务器证书而不是 MITM 证书，因为握手结束时的签名。不过，这并不是你真正想要的。）

JavaScript 机制通常不会让您自己检查证书。话虽这么说，对不受信任的网站（带有此类警告）的 XHR 请求将以一种或另一种方式失败（通常通过异常）：这可能是一种检测后台请求是否可以访问登录页面以外的其他页面的方法（尽管您肯定会遇到有关同源策略的问题）。

与其使用自签名证书进行测试/开发，不如部署一个测试证书颁发机构 (CA)，您将处于更好的位置。有许多工具可以帮助您做到这一点（使用哪一种取决于您需要的证书数量）。然后，您必须将自己的 CA 证书导入这些浏览器（或其他客户端），但整体测试会更加现实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:52:27.377

不。

这种接受（或拒绝）只会修改客户端浏览器中的行为（每个浏览器以不同的方式）。它不向服务器确认任何内容，并且页面尚未加载，因此没有机会捕获该事件。

# mysql - 用于为论坛索引选择数据的二阶相关表中的 SQL COUNT

> ID：10543646
> 
> 赞同：0
> 
> 时间：2012-05-10T23:48:41.410
> 
> 标签：mysql, sql

尼亚斯

我在查询接收数据以生成包含所有信息的经典论坛索引时遇到问题，例如 phpBB。

我的表如下所示：

```
categories:
  gategory varchar(50)  -> primary key

forums:
  id int -> primary key
  name varchar(255)
  description text
  category varchar(50)  -> foreign key to category

topics:
  id int -> primary key
  forum_id int -> foreign key to forums
  subject varchar(255)

posts:
  id int -> primary key
  topic_id int -> foreign key to topics
  user_id int -> foreign key to users
  post text
  create_date datetime
  modify_date timestramp, on_update(current_time)

users:
  id int -> primary key
  username varchar(32)
  password varchar(32) 
```

这非常简单。然后我开始构建查询，它变得非常复杂（在我的世界中）非常快。我想得到：

```
catories:
  forums:
    name,
    description,
    count(topics)
    count(posts)
      last_post user_id
      last_post username
      last_post create_date 
```

我最终得到了一个如下所示的工作查询：

```
SELECT
  f.id              as fid,
  f.name            as name,
  f.description     as description,
  f.category        as category,
  ( SELECT COUNT(*)
    FROM forum_topics
    WHERE forum_id = f.id
  )                 as topics,
  ( SELECT COUNT(*)
    FROM forum_posts fp
    WHERE fp.topic_id IN (
      SELECT id
      FROM forum_topics
      WHERE forum_id = f.id
    )
  )                 as posts,
  lp.user_id        as lp_userid,
  u.username        as lp_username,
  lp.create_date    as lp_date
FROM forums f
LEFT OUTER JOIN (
  SELECT p.create_date, p.user_id, t.forum_id
  FROM forum_topics t
  INNER JOIN forum_posts p ON ( t.id = p.topic_id )
  ORDER BY p.create_date DESC
) lp ON (lp.forum_id = f.id)
LEFT OUTER JOIN users u ON ( u.id = lp.user_id )
GROUP BY category, f.order 
```

没关系; 它有效，但表现非常糟糕。所以我想知道你们这里的一些聪明人，可以给我一些关于如何优化查询的建议，也许可以在一些智能的地方放入一些索引，或者以更智能的方式重建模式。

// 非常感谢你提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:39:39.413

基本查询是将所有表沿其性质维度连接在一起。除了最后一篇文章之外，这将为您提供一切。

以下查询使用标准 SQL，并且应该在 mysql 和 SQL Server 中都可以使用（拼写错误除外）。

```
SELECT
  f.category,
  f.id,
  f.name,
  f.description,
    count(distinct t.id) AS topics,
    count(distinct p.id) AS posts,
    min(lastuser.id),
    min(lastuser.username),
    min(p.create_date)
FROM posts p
JOIN users u ON p.user_id = u.id
JOIN topics t ON p.topic_id = t.id
JOIN forums f ON t.forum_id = f.id
JOIN (SELECT
        t.forum_id,
        u.id,
        u.username,
        p.create_date
        FROM posts p
        JOIN topics t ON p.topic_id = t.id
        JOIN users u ON p.user_id = u.id
        JOIN (SELECT
               t.forum_id, max(p.id) AS max_postid
              FROM posts p
              JOIN topics t ON p.topic_id = t.id
              GROUP BY t.forum_id
              ) lastpost ON p.id = lastpost.max_postid
             AND t.forum_id = lastpost.forum_id
       ) lastuser on lastuser.forum_id = f.id
GROUP BY f.category, f.id, f.name, f.description 
```

它通过另一组复杂的连接获得最后一个用户。该查询假定帖子是单调分配的，因此最近的帖子具有最高的帖子 ID。

还有其他方法。特别是，SQL Server 支持窗口函数，这将简化查询。

# ios - Xcode - 使用导航栏按钮项和情节提要更改视图

> ID：10543650
> 
> 赞同：1
> 
> 时间：2012-05-10T23:49:09.700
> 
> 标签：ios, xcode, storyboard

我正在使用导航控制器制作具有多个视图的应用程序。我可以通过 ctrl 从一个按钮拖动到另一个视图来轻松地更改视图，但它不能通过做同样的事情来工作，而是在导航栏中使用一个按钮。

起初，我对按钮的样式有一个警告，所以我将它从 Plain 更改为 Bordered。我现在没有任何警告，但是当我点击按钮时，什么也没有发生。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:48:16.427

再试一次，但使用 UIBarButton，然后将推送操作链接到它，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T01:23:45.300

右键单击按钮并将 Storyboard Segues 下“Push”旁边的圆圈拖到您希望按钮导航到的视图上。

# html - pre中的单个水平滚动行？

> ID：10543653
> 
> 赞同：0
> 
> 时间：2012-05-10T23:49:42.383
> 
> 标签：html, css

我有一个非常简单的 HTML，我正在尝试（并且惨遭失败）正确格式化。我基本上有以下元素：

```
<pre>http://myserver.com:9000/something/REQUEST/124125125125?username=username&password=password</pre> 
```

我基本上需要模仿你在我上方看到的东西。如果需要，我需要将单行文本显示为 pre 中的单行文本，并带有水平滚动。

到目前为止，所有这样做的尝试都失败了。作为 a的`<pre>`孩子存在`<td>`：

```
<table>
    <tbody>
        <tr>
            <td>
                Behold some incredible, glowy sample text, and then a URL:
                <pre>...</pre>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:54:38.370

StackOverflow 使用

```
overflow: auto;
width: auto; 
```

在父容器上具有显式宽度 (730px)`<pre>`

# mercury - 什么是表示任意二进制数据的好数据类型？

> ID：10543654
> 
> 赞同：3
> 
> 时间：2012-05-10T23:49:44.977
> 
> 标签：mercury

我想从磁盘读取二进制数据并将其存储在 Mercury 变量中。根据字符串库，字符串不允许嵌入空字节并使用 UTF-8 编码存储内容，所以我认为这不会起作用。到目前为止，我发现的最好的是位图库中的一行，上面写着“访问位图，就好像它们是一个八位字节的数组一样特别有效”

位图是存储任意二进制数据的好方法吗？有更好的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T02:21:47.617

是的，位图是读/写/存储二进制数据的推荐方式。

# javascript - 替代 jQuery replaceAll()？

> ID：10543656
> 
> 赞同：0
> 
> 时间：2012-05-10T23:50:54.270
> 
> 标签：javascript, jquery, jquery-ui, html-table

我有一些代码从动态构建的表中删除一个 tr 作为 jQuery 对象（每个 tr 都有一个唯一的 id：trid）：

```
tri = $("#"+trid+"");
var newrow = '<tr id="newr"><td colspan="4" align="center"><div id="nrow"> </div></td></tr>';
tri.after(newrow);
tri.detach(); 
```

然后，我使用 innerHTML 在 div 'nrow' 中放置了一个表单......表单中有一个 jQuery ui datepicker，这是第一次工作。

取消表格后，我将列表恢复为原来的状态：

```
setTimeout("tri.replaceAll( $('#newr') )", 400); 
```

这一切都很好，除了如果我尝试在此之后编辑该（或任何）行，它会杀死表单中的 jquery ui datepicker。我很难将其归结为 replaceAll 线。如果我把它拿出来并通过再次构建它来替换列表，它就可以正常工作（它也不是超时）。

那么是否有另一种方法可以在不使用replaceAll的情况下用jquery对象'tri'替换tr'newr'（replaceWith也不起作用）？

编辑：

好的，这就是我将表单从页面其他位置的 div 移动的方式：

```
eP = $('#eP');
eP.replaceAll( $('#nrow') );
$("#editPast").show('blind','',500,''); 
```

eP 包含隐藏的 div editPast...

然后在取消功能中我把 eP 放回去：

```
setTimeout(function() {eP.appendTo($('#ePreplace')); }, 500);  (thanks adeneo!) 
```

在我 tri.replaceAll 之前，尽管使用 setTimeout 它发生在......

所以我想我的问题是eP在#nrow中使用后不携带日期选择器状态，只是html。

* * *

固定的！

更改`eP.appendTo`为`$('#eP').appendTo`以便从 dom 而不是原始变量中获取它。哎呀！感谢您的评论让我重新思考这一点`just detach()`！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:07:03.173

固定的！

将 eP.appendTo 更改为 $('#eP').appendTo 以便它从 dom 而不是原始变量中获取它。哎呀！感谢 adeneo 让我用你的“just detach()”评论重新思考这个问题！

感谢 NiftyDude 建议我也这样做......

# php - 从 Mysql 和 php 中选择 Sum

> ID：10543666
> 
> 赞同：0
> 
> 时间：2012-05-10T23:51:51.193
> 
> 标签：php, mysql

我正在尝试从给定用户那里获取每个月的总小时数并且遇到代码问题。需要帮忙。

到目前为止我所拥有的：

> $sql = "SELECT sum(hours) AS total_Hours FROM flight WHERE month = 3 and username='$myname'";

这甚至不起作用，但我真正需要的是每个月用户的总小时数。可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:55:55.457

这是询问每个月总和的查询：

```
SELECT SUM(`hours`) AS total_Hours, `month` FROM flights 
WHERE `username`='some_user'
GROUP BY `month` 
```

您还应该知道，在传入查询之前，您的`$myname`变量必须使用[mysql_real_escape_string进行转义。](http://php.net/manual/en/function.mysql-real-escape-string.php)

@Robbie 说得对 escaping `month`。这似乎是您查询的唯一问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:55:23.063

你需要一个`GROUP BY`子句：

```
SELECT user, month, SUM(hours) AS total_hours
FROM flights
GROUP BY user, month
ORDER BY user, month 
```

# ios - iOS Storyboard segue 动作错误地改变方向

> ID：10543667
> 
> 赞同：1
> 
> 时间：2012-05-10T23:51:51.863
> 
> 标签：ios, xcode

好的，所以我对 iOS 5 中的整个故事板功能很陌生。我有一个用于 iPad 的应用程序，它被锁定为横向模式。只是为了测试 seguing 功能，我使用了我的初始视图控制器，添加了一个按钮，在它旁边拖动了一个新的视图控制器（它在设计器上以横向模式显示），然后将 segue 操作绑定到按钮。我把一切都默认了。

点击初始视图控制器上的按钮可以毫无问题地启动 segue，并且新屏幕会加载，但始终处于纵向模式。

我究竟做错了什么？我缺少一些切换吗？我想如果通过项目摘要，我将其锁定为左右横向，除非另有说明，否则它会假设我总是想要那个方向？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T23:13:01.040

我遇到了同样的问题，并通过在新场景中添加一个新的 ViewControllerClass 来管理它。在以下自动创建的方法中，您可以将方向限制为仅横向。这对 Main Scene ViewController 也很有帮助：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (UIInterfaceOrientationIsLandscape(interfaceOrientation));
} 
```

干杯，丹尼尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T01:20:17.003

> 我有一个锁定为横向模式的 iPad 应用程序。

你如何在应用程序范围内锁定它？只是想确保你做得正确。

要在 Storyboard 模式下锁定方向，请选择您的 ViewController 并在 Attributes 检查器上将 Orientation 从 Inferred 更改为您希望将其锁定到的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:27:41.470

你在方向委托方法中放了什么？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T20:59:47.450

在您的应用程序的属性文件 (YOURAPPNAME-Info.plist) 中，位于“支持文件”组中，有一个名为“支持的界面方向”的数组。从数组中删除两个横向值，您的应用程序将被锁定为纵向。

# ruby-on-rails-3 - 通过设置变量进行预加载

> ID：10543668
> 
> 赞同：0
> 
> 时间：2012-05-10T23:51:56.187
> 
> 标签：ruby-on-rails-3

对于这个非常简单的问题，提前抱歉，但是在检查条件的同时设置变量的最佳方法是什么。例如，我有：

```
@friends = []
@user.facebook_friends.each do |key,value|
  if test = Authorization.includes(:user).find_by_uid(key) != nil
    @friends << {"name" => test.user.name, "facebook_image_url" => test.user.facebook_image_url}
  end
end 
```

当我拉入授权记录时，我试图拉入用户记录，以最小化我的数据库查询。我知道我不会写

```
test = Authorization.includes(:user).find_by_uid(key) != nil 
```

为了设置测试变量。编写此代码以使其正常运行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:56:59.850

你只需要括号：

```
(test = Authorization.includes(:user).find_by_uid(key)) != nil 
```

这里还有一种更可靠的方式来做到这一点：

```
unless (test = Authorization.includes(:user).find_by_uid(key)).nil?
    @friends << {"name" => test.user.name, "facebook_image_url" => test.user.facebook_image_url}
end 
```

# android - Android MediaController seekbar章节标记？

> ID：10543672
> 
> 赞同：4
> 
> 时间：2012-05-10T23:53:16.567
> 
> 标签：android, video, android-mediaplayer

我目前正在 Android OS 2.3.3 上开发一个简单的视频播放器，我使用 a`VideoView`来显示电影并使用`MediaController`来控制视频。

我想在搜索栏上添加一些章节标记，想知道是否有人对如何执行此操作有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-11T09:25:11.330

只需使用水平`SeekBar`而不是`MediaController`.

把它`RelativeLayout`放在 SeekBar 后面设置一些视图，这些视图将成为章节标记。如果这些标记比 SeekBar 高度稍大一点，则该标记将可见。您可以在需要时以编程方式添加此视图，方法是根据视频持续时间和搜索栏长度计算它们的位置。

当然布局可以稍微复杂一点。

![在此处输入图像描述](../Images/d4863042973d4110df5aaddf3855df1c.png)

# javascript - 将溢出但仅在 3 边上受限的元素的绝对布局

> ID：10543673
> 
> 赞同：3
> 
> 时间：2012-05-10T23:53:36.420
> 
> 标签：javascript, css, html

我需要创建一个布局，其中作为滚动容器的 div 绝对位于三个侧面（左侧、右侧和底部），但其大小与上面的同级容器一起动态调整。滚动容器和兄弟容器都在一个固定尺寸的容器中。我制作了一个 jsfiddle 来演示我的问题。

[http://jsfiddle.net/HKu4j/4](http://jsfiddle.net/HKu4j/4)

如果您按照那里的单击说明进行操作，您将看到当您在单击第二个容器后单击顶部容器时，它会调整大小，理想情况下会将 div.myscroll 的顶部向下推。这不会发生，因为 div.myscroll 已将 top 设置为 20px；新的 CSS3 灵活的盒子布局有什么方法可以使这个工作吗？我正在寻找一种使用 CSS 的解决方案，而不是像过去那样使用 javascipt 显式设置几何尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:59:21.073

我不确定单独使用 css 是否可行。

试试这个 jQuery 动态宽度设置示例：[jQuery/CSS：按内容设置动态宽度，避免继承](https://stackoverflow.com/questions/7666183/jquery-css-set-dynamic-width-by-content-avoid-inheritance)

# select - 如何编写自己的生产 Web 服务器？

> ID：10543676
> 
> 赞同：1
> 
> 时间：2012-05-10T23:54:33.977
> 
> 标签：select, pthreads, client-server, fork

我正在制作一个 unix ssl 服务器/客户端。到目前为止，我已经`FD_SET`使用 select 实现了在一个主服务器进程中同时处理所有连接。但是由于`__FD_SETSIZE`客户端的数量只能是1024。我需要增加客户端的数量和服务器的效率。改变`__FD_SETSIZE`有潜在的问题（显然？）所以我被卡住了。

到目前为止，网络包括：errno.h 检测、信号检测 -> 原子处理、fd_set -> select()、基于流套接字的成功通信。

如果有人能告诉我该怎么做，我将不胜感激？我`fork()`应该在 1024 之后（这会带来自己的问题，如果它甚至可行吗？）我是实现线程来处理每个客户端请求，还是只处理客户端数据或两者兼而有之？

您认为最好的网络架构是什么？请记住，它是一个基于套接字流的连接，旨在处理尽可能多的惩罚并允许尽可能多的客户端访问服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:52:41.377

不要编写自己的生产 Web 服务器。

有太多的[开源服务器](http://en.wikipedia.org/wiki/Comparison_of_web_server_software)都是由比你更了解高连接性和 SSL 的人编写的。它们还具有经过测试的优势，这是您使用自制服务器永远无法完成的。

# vtd-xml - VTD-XML 异常：命名空间限定异常：前缀属性未限定

> ID：10543680
> 
> 赞同：1
> 
> 时间：2012-05-10T23:55:03.203
> 
> 标签：vtd-xml

我通过 Web 服务接收 XML，并且正在使用旧代码（使用 dom4j）来执行一些 xml 转换。将原始 XML 加载/解析为 VTD-XML (VTDGen) 工作正常，没有抛出异常。但是，在将 xml 加载到 dom4j 后，我注意到一些元素名称空间声明和属性被重新排列。显然，这种重新安排会导致 VTD-XML 抛出以下异常：

异常：命名空间限定异常：前缀属性未限定

行号：101 偏移量：1827

这是原始 XML 中此行号处的元素：

<RR_PerformanceSite:PerformanceSite_1_4 RR_PerformanceSite:FormVersion="1.4" xmlns:NSF_ApplicationChecklist="http://apply.grants.gov/forms/NSF_ApplicationChecklist-V1.1" xmlns:NSF_CoverPage="http://apply.grants.gov/forms /NSF_CoverPage-V1.1" xmlns:NSF_DeviationAuthorization="http://apply.grants.gov/forms/NSF_DeviationAuthorization-V1.1" xmlns:NSF_Registration="http://apply.grants.gov/forms/NSF_Registration-V1 .1" xmlns:NSF_SuggestedReviewers="http://apply.grants.gov/forms/NSF_SuggestedReviewers-V1.1" xmlns:PHS398_CareerDevelopmentAwardSup="http://apply.grants.gov/forms/PHS398_CareerDevelopmentAwardSup_1_1-V1.1" xmlns :PHS398_Checklist="http://apply.grants.gov/forms/PHS398_Checklist_1_3-V1.3" xmlns:PHS398_CoverPageSupplement="http://apply.grants.gov/forms/PHS398_CoverPageSupplement_1_4-V1.4" xmlns:PHS398_ModularBudget="http://apply.grants.gov/forms/PHS398_ModularBudget-V1.1" xmlns:PHS398_ResearchPlan="http://apply.grants.gov/forms/ PHS398_ResearchPlan_1_3-V1.3" xmlns:PHS_CoverLetter="http://apply.grants.gov/forms/PHS_CoverLetter_1_2-V1.2" xmlns:RR_Budget="http://apply.grants.gov/forms/RR_Budget-V1\. 1" xmlns:RR_KeyPersonExpanded="http://apply.grants.gov/forms/RR_KeyPersonExpanded_1_2-V1.2" xmlns:RR_OtherProjectInfo="http://apply.grants.gov/forms/RR_OtherProjectInfo_1_2-V1.2" xmlns: RR_PerformanceSite="http://apply.grants.gov/forms/PerformanceSite_1_4-V1.4" xmlns:RR_PersonalData="http://apply.grants.gov/forms/RR_PersonalData-V1.1" xmlns:RR_SF424="http ://apply.grants.gov/forms/RR_SF424_1_2-V1.2" xmlns:RR_SubawardBudget="http://apply.grants.gov/forms/RR_SubawardBudget-V1.2" xmlns:SF424C="http://apply.grants.gov/forms/SF424C-V1.0" xmlns:att="http ://apply.grants.gov/system/Attachments-V1.0" xmlns:codes="http://apply.grants.gov/system/UniversalCodes-V2.0" xmlns:globlib="http://apply .grants.gov/system/GlobalLibrary-V2.0">

这是加载到 dom4j 后的相同元素：

<RR_PerformanceSite:PerformanceSite_1_4 xmlns:RR_PerformanceSite="http://apply.grants.gov/forms/PerformanceSite_1_4-V1.4" xmlns:NSF_ApplicationChecklist="http://apply.grants.gov/forms/NSF_ApplicationChecklist-V1.1" xmlns:NSF_CoverPage="http://apply.grants.gov/forms/NSF_CoverPage-V1.1" xmlns:NSF_DeviationAuthorization="http://apply.grants.gov/forms/NSF_DeviationAuthorization-V1.1" xmlns:NSF_Registration= "http://apply.grants.gov/forms/NSF_Registration-V1.1" xmlns:NSF_SuggestedReviewers="http://apply.grants.gov/forms/NSF_SuggestedReviewers-V1.1" xmlns:PHS398_CareerDevelopmentAwardSup="http:// /apply.grants.gov/forms/PHS398_CareerDevelopmentAwardSup_1_1-V1.1" xmlns:PHS398_Checklist="http://apply.grants.gov/forms/PHS398_Checklist_1_3-V1.3" xmlns:PHS398_CoverPageSupplement="http://apply.grants.gov/forms/PHS398_CoverPageSupplement_1_4-V1.4" xmlns:PHS398_ModularBudget="http://apply.grants.gov/forms/PHS398_ModularBudget-V1.1" xmlns:PHS398_ResearchPlan="http ://apply.grants.gov/forms/PHS398_ResearchPlan_1_3-V1.3" xmlns:PHS_CoverLetter="http://apply.grants.gov/forms/PHS_CoverLetter_1_2-V1.2" xmlns:RR_Budget="http://apply .grants.gov/forms/RR_Budget-V1.1" xmlns:RR_KeyPersonExpanded="http://apply.grants.gov/forms/RR_KeyPersonExpanded_1_2-V1.2" xmlns:RR_OtherProjectInfo="http://apply.grants.gov /forms/RR_OtherProjectInfo_1_2-V1.2" xmlns:RR_PersonalData="http://apply.grants.gov/forms/RR_PersonalData-V1.1" xmlns:RR_SF424="http://apply.grants.gov/forms/RR_SF424_1_2 -V1.2" xmlns:RR_SubawardBudget="http://apply.grants.gov/forms/RR_SubawardBudget-V1.2" xmlns:SF424C="http://apply.grants.gov/forms/SF424C-V1.0" xmlns:att="http://apply.grants.gov/系统/附件-V1.0" xmlns:codes="http://apply.grants.gov/system/UniversalCodes-V2.0" xmlns:globlib="http://apply.grants.gov/system/GlobalLibrary- V2.0" RR_PerformanceSite:FormVersion="1.4">

问题在于新 XML 元素中的属性（偏移 1827，元素末尾）：RR_PerformanceSite:FormVersion="1.4"

以下是删除异常的内容： 1\. 将此元素的 RR_PerformanceSite xmlns 声明添加到 XML 文档的根元素。2.用原来的元素替换新元素。这似乎让我相信属性/ns 声明的顺序会在解析时影响 VTD。

注意：我使用两个 xml 文档（原始和后 dom4j xml）将 ns 感知的 xml 文档设置解析为“真”。此外，还会为每个 xml、original 和 post-dom4j 创建新的 VTD 对象。

我尝试像原始元素一样将 'RR_PerformanceSite:FormVersion="1.4"' 放在元素的开头，但这并没有消除异常。由于属性位置的变化，错误消息中的偏移量不同。xmlns 声明的顺序是否会影响 VTD？

我查看了 VTDGen 源代码，但无法弄清楚为什么会引发此异常。

为什么 dom4j 会解析新文档而 vtd 无法解析？任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:22:20.693

这似乎是 VTD-XML 上的一个错误，与命名空间声明顺序有关。

使用以下 Java 代码始终可重现

```
public class SchemaTester {

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {

        String bad = "C:/Temp/VTD_bad.xml"; // XML files to test
        String good = "C:/Temp/VTD_good.xml";

        StringBuilder sb = new StringBuilder();

        char[] buf = new char[4*1024];
        FileReader fr = new FileReader(bad);
        int readed = 0;

        while ((readed = fr.read(buf, 0, buf.length)) != -1) {
            sb.append(buf, 0, readed);
        }

        fr.close();

        String x = sb.toString();

        //instantiate VTDGen
        //and call parse 
        VTDGen vg = new VTDGen();
        vg.setDoc(x.getBytes("UTF-8"));
        vg.parse(true);  // set namespace awareness to true
        VTDNav vn = vg.getNav();

        AutoPilot ap = new AutoPilot (vn);
        ap.selectXPath("//*/@*");

        int i= -1;
        while((i=ap.evalXPath()) != -1) {
            // i will be attr name, i+1 will be attribute value
            System.out.println("\t\tAttribute ==> " + vn.toNormalizedString(i));
            System.out.println("\t\tValue ==> " + vn.toNormalizedString(i+1));
        } 

    }
} 
```

OP 已将 XML 上传到[https://gist.github.com/2696220](https://gist.github.com/2696220)

# jquery-plugins - Javascript 中的直方图滑块

> ID：10543681
> 
> 赞同：4
> 
> 时间：2012-05-10T23:55:09.233
> 
> 标签：jquery-plugins, svg, javascript, d3.js

我正在尝试构建一个滑块过滤器，它使用户能够选择过滤器的数值范围。我想添加一个直方图图像（即 svg）作为滑块的背景。目前我正在考虑 d3.js 或 jQuery Sparkline，以及一个 jQuery 滑块或 HTML5 原生滑块元素。有人可以对Javascript库提出任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:14:01.550

比较：

*   **`<input type="range">`:** [native](https://developer.mozilla.org/en-US/docs/HTML/Element/Input#Attributes)，不需要额外的库。
*   **jQuery滑块：** [跨浏览器](http://jqueryui.com/slider/)，可以对外观有很大的控制。
*   **Sparkline：** [一个 jQuery 插件](http://omnipotent.net/jquery.sparkline/)，*更多*的控制（从来不用它，说不出来）

最重要的是，根据您的使用方式，选择最适合您的用途的一种。有时一个简单的 jQuery 滑块就足够了，但在某些情况下，插件可能做得更多。

# terminal - 如何清除 Tmux 中的回滚缓冲区？

> ID：10543684
> 
> 赞同：222
> 
> 时间：2012-05-10T23:55:27.663
> 
> 标签：terminal, tmux

仅供参考，我正在通过 Mac OS X 终端应用程序使用 Tmux。

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-05-11T15:06:36.573

同样的问题已经困扰了我很长一段时间。这是我想出的最好的。把它放到你的 .tmux.conf 文件中：

```
bind -n C-k clear-history 
```

这将 ctrl-k 绑定到 tmux clear-history 命令。绑定后的 -n 使您不必发出 tmux 命令前缀（默认为 ctrl-b）。我使用 bash，所以 ctrl-l 已经相当于在命令行输入“clear”。使用这两个键，我得到了一个不错的 ctrl-l、ctrl-k 组合，它将所有滚动缓冲区移出屏幕（“清除”），然后删除所有历史记录（tmux“清除历史”命令）。

它不如 Terminal、iTerm 或 Konsole 的 1 键组合清除它好，但它比一直输入清除历史要好。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2018-02-06T15:00:03.373

这里的每个答案都谈到添加新的键绑定。

如果你只是想偶尔做一次，你根本不需要映射......

前缀默认为`<Ctrl-b>`

只需在相关窗格中键入`<prefix>`+ `:`，然后键入`clear-history`并按 Enter。

如果您在命令行上，则可以`tmux clear-history`在相关窗格中运行以获得相同的效果。

关于 tmux 的一个很酷的事情是你可以运行任何这样的命令......或者在 shell/脚本中运行它们`tmux command`......或者为它们制作键盘快捷键。

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2012-07-17T14:49:10.513

正如@juanpaco 正确指出的那样，`clear-history`是清除回滚缓冲区的命令。
我要补充一点，我还想在同一命令中清除屏幕上的内容。发出`send-keys -R`重置（清除）屏幕，所以我在我的`.tmux.conf`

`bind-key b send-keys -R \; clear-history`

这将清除屏幕和回滚缓冲区。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-11-18T21:29:00.423

如果您想结合`CTRL-L`加上清除历史，请将其添加到您的`~/.tmux.conf`：

```
bind u send-keys C-l \; run-shell "sleep .3s" \; clear-history 
```

例如，如果您在 MySQL shell 中，这甚至可以工作。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2012-10-25T09:27:10.917

我发现使用`send-keys -R`起来有点慢 - 这是另一种使用单个命令清除屏幕和历史记录的方法

```
bind-key C send-keys "clear && tmux clear-history" \; send-keys "Enter" 
```

嵌套的 tmux 调用被用作更明显的

`bind-key C send-keys "clear" \; send-keys "Enter" \; clear-history`

**无法**从历史记录中清除屏幕的当前文本 - clear-history 命令似乎在单独的线程中运行以发送密钥。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2017-10-07T08:02:53.960

发现这在 TMUX 2.6 中效果最好，清除屏幕、回滚，但之后显示提示。

使用 Ctrl-L

```
bind-key -n C-l send-keys C-l \; send-keys -R \; clear-history 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-06-16T18:48:10.773

比大多数都简单，我刚刚创建了一个名为 的 shell 脚本`cls`，并在我想清除屏幕和回滚缓冲区时运行它。

就是这样：

**分类**

```
clear;
tmux clear-history; 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-10-20T07:01:34.637

Ctrl-L 在控制台应用程序中用于重绘屏幕。我发现绑定到`send-keys -R`它会导致箭头键在某些应用程序（例如 vim、mc）中不再正常工作。

为了在控制台应用程序中保留重绘功能，我使用了：

```
bind-key -n C-l if-shell -F '#{alternate_on}' 'send-keys C-l' 'send-keys -R C-l; clear-history' 
```

这需要打开 tmux 选项`alternate-screen`（默认情况下）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-01-02T06:15:42.657

我已经使用了上面的一些以及其他来源来提出：

```
bind k send-keys C-u \; send-keys C-k \; send-keys " clear && tmux clear-history" \; send-keys "Enter" \; run-shell "sleep .3s" \; send-keys "Up" \; send-keys C-u 
```

“clear && tmux clear-history”中的前导空格可防止将命令写入历史文件（前提是您已将 shell 设置为以这种方式处理前导空格；谷歌“hist ignore space”+您的 shell 名称以获取更多信息信息）。我希望这个命令不会出现在我的历史记录中，因为它更符合终端中的 ctrl-k。

第一个发送键 Cu 和发送键 Ck 将清除当前在提示符下键入的任何内容，以确保“clear && tmux clear-history”成功（例如，如果您在提示符下键入了“ABCDEFG”并且你的光标在 D 和 E 之间，这样可以确保“ABCD clear && tmux clear-historyEFG”不会发送到 shell，这会失败）。

发送键“向上”和最后一个发送键 Cu 清除了 shell 内部历史记录中的最后一项。即使有上面​​提到的尾随空格，shell 的内部历史也将包括“clear ...”行。发送和 Ctrl-u 摆脱了这个。

最后，在 iTerm 中，我将 ctrl-k 设置为映射到 ctrl-ak（我的 tmux 前缀设置为 ctrl-a），所以我可以输入 ctrl-k，这是我多年以来想做的事情所以。我这样做是通过转到 iTerm > Preferences > Profiles > Keys 并添加一个快捷方式来发送十六进制代码“0x01 0x6B”。这里有一篇很棒的文章，它提供了更多关于在 tmux 和 iTerm 中使用十六进制代码的信息：http: [//tangledhelix.com/blog/2012/04/28/iterm2-keymaps-for-tmux/](http://tangledhelix.com/blog/2012/04/28/iterm2-keymaps-for-tmux/)

这几乎给了我 tmux 的 ctrl-k 。唯一让我感到烦恼的是，如果您当前在提示符下输入了某些内容，那么没有 tmux 的真正 ctrl-k 不会有问题，并且会在清除屏幕时保留您输入的内容。如前所述，这种方法需要清除输入的内容，这样“clear ...”命令才不会失败。但它非常接近！

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-10-22T11:21:34.863

要快速修复以清除单个 tmux 窗格，您可以设置别名...

```
# Tmux Clear pane
alias tc='clear; tmux clear-history; clear' 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-12-01T00:21:30.777

如果您使用 清除屏幕`clear`，您可以检查是否`TMUX`已设置，并相应地创建别名。

把它放在你的 .bashrc 中：

```
if [[ $TMUX ]]; then
  alias clear='clear && tmux clear-history'
fi 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-12-08T17:20:06.657

所以，我[从上面使用](https://stackoverflow.com/questions/10543684/how-can-i-clear-scrollback-buffer-in-tmux/20058328#20058328)[plu](https://stackoverflow.com/users/936204/plu)的方法已经有一段时间了，但是我厌倦了它的局限性（基本上，除非通过管道传递给理解它的程序，否则传递是没有意义的。）`⌃L`

所以我在这个线程的不同答案中改进了各种方法；虽然复杂，但这种方法适用于**shell*和*其他命令**：

```
# ⌃K: Clears the current pane (from <https://stackoverflow.com/a/34162098>)
bind-key -n C-k \
   if-shell "test \"$(printf '#{pane_current_command}' | tail -c 2)\" = sh" \
      "send-keys C-l ; run-shell 'sleep .3s' ; clear-history" \
      "split-window -vp 100 ; clear-history -t ! ; kill-pane" 
```

试试看`tail -f /private/var/log/system.log`什么的！

* * *

### 注意事项：

这里有一个重要的注意事项：如果它不是外壳，这是在无形地*调整被清除的窗格的大小。*`SIGWINCH`这可能会在某些侦听es的命令行应用程序中触发调整大小行为；*但我的理由是这不是一个大问题，因为这些程序你很可能无论如何*都不会试图“清除” 。

另外，shell-quoting 的情况已经很乱了，嵌入的时候很容易变成*一个*，`#{pane_current_command}`所以要小心，你可能需要根据你的`default-command`设置来修改它。

这同样适用于我对该命令匹配结束的测试`"sh"`；如果你有类似`default-command`的东西`/bin/bash --login`或复杂的东西`exec`，*实际的命令*`"sh"`可能不会以;结尾。如果您想查看正在测试的内容，请使用`⌃B :`执行。`display-message '#{pane_current_command}'`

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-10-09T18:09:34.563

经过大量的研究和花费时间。我在 zsh 和 terminal.app 上找到了最适合我的方法

我`prefix-c`用来清除屏幕并`prefix-C`清除历史记录和滚动缓冲区并且上面没有留下任何线条，因为我觉得它很烦人。

# 没有 Vim

```
# clear screen
bind c send-keys 'C-l'
# clear screen and history
bind C send-keys -R \; send-keys C-l \; clear-history \; send-keys 
```

# 使用 Vim

```
# check if the pane is running vim
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \ | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"

# clear screen
bind c if-shell "$is_vim" "send-keys c" "send-keys 'C-l'"
# clear screen and history
bind C send-keys -R \; send-keys C-l \; clear-history \; send-keys 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-02-20T16:58:52.847

为什么不？`bind -n C-l send-keys C-l`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-06-03T07:10:31.900

如果您想要完全清除窗格，另一种选择是将窗格临时调整为一行，清除历史记录，然后重新调整大小。这应该可以通过一个 tmux 命令链实现无闪烁。优点是无论窗格中正在运行什么程序，它都能正常工作。当然，这会使 shell 脚本逻辑更复杂一些。

```
bind-key -n F11 run "
    if [[ #{window_panes} == "1" ]] ; then
        tmux send-keys C-l; sleep 0.1 ; tmux clear-history ;
    else
        restored_height=$((#{pane_height} + #{pane_at_bottom}));
        tmux resize-pane -y 1 \\; clear-history \\; resize-pane -y \${restored_height} ;
    fi
" 
```

# asp.net-mvc-3 - REST Routes & Verbs - 处理没有参数的路由

> ID：10543685
> 
> 赞同：1
> 
> 时间：2012-05-10T23:55:31.010
> 
> 标签：asp.net-mvc-3, api, http, rest, routes

### 背景

我为一个简单的博客应用程序编写了一个类似 REST 的 API 服务控制器。我使用两条路线来处理基本的 CRUD：

```
// Actions should handle: GET, POST, PUT, DELETE
routes.MapRoute("Api-SingleThing", "thing/{id}",
    new { controller = "ThingService", action = "SingleThing" });

// Action should handle: GET
routes.MapRoute("Api-AllThings", "things",
    new { controller = "ThingService", action = "AllThings" }); 
```

匹配的控制器代码如下所示：

```
[HttpGet]
public ActionResult AllThings() {}

[HttpGet]
[ActionName("SingleThing")]
public ActionResult Get(string id) {}

[HttpPost]
[ActionName("SingleThing")]
public JsonResult Create(Thing thing) {}

[HttpPut]
[ActionName("SingleThing")]
public ActionResult Update(Thing thing) {}

[HttpDelete]
[ActionName("SingleThing")]
public ActionResult Delete(int id) {} 
```

该`[ActionName()]`属性用于避免路由约束，因此触发时路由始终调用控制器上的“SingleThing”操作 - 无论 HTTP 动词如何。这让共享名称的控制器操作方法可以根据`[HttpVerb]`属性决定谁处理请求。

在我的博客应用程序中，这就像一个魅力，但只是因为`{id}`路由参数（又名 slug）始终存在，即使在`POST`和`PUT`请求时也是如此。

使用上面显示的这个新 API，`POST`and`PUT`动作不会触发顶部路由（例如，没有`{id}`值），并且当它们触发第二条路由时，由于动词，没有方法来处理它们。

### 问题

维护这种 REST-ful URL 架构和动词处理并确保触发我的 POST 和 PUT 操作的最佳方式是什么？

# ruby-on-rails - Rails ActionMailer 编码

> ID：10543694
> 
> 赞同：5
> 
> 时间：2012-05-10T23:56:45.873
> 
> 标签：ruby-on-rails, encoding, actionmailer

设置：

```
Ruby 1.9.2
Rails 3.2.2 
```

我的电子邮件编码遇到了一些问题。

注意：我对编码和类似的东西不太熟悉。

使用 ActionMailer 发送电子邮件时，电子邮件中的 html 发生了一些奇怪的事情。

所有等号（=）符号都变为`=3D`. 例子：

```
<table border=3D"0" cellpadding=3D"0" cellspacing=3D"0" width=3D"=440">
  <tbody>
    <tr>
      <td height=3D"10">   </td>
    </tr>
  </tbody>
</table> 
```

特殊字符如下所示：`ä`-> `Ã¤`。

在本地开发中看起来很棒，但是在生产服务器上使用[SendGrid](http://sendgrid.com/)时，特殊字符不起作用。

我确定这是因为我缺乏了解。

这是邮件标题：

```
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-SMTPAPI: {"filters": {}} 
```

有什么关系`Content-Transfer-Encoding`吗？还是应该这样？

也许这是 SendGrid 的问题，而不是我的设置？

SendGrid 的一位员工告诉我：`you need to make sure your equals signs are URI-encoded`，这是什么意思？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:34:17.870

这对我来说不是问题，它是 SendGrid。通过 SendGrid 发送的带有“åäö”等字符的邮件在 yahoo/outlook/MacMail 等邮件客户端中不起作用。

在 SendGrid 的一名员工提供几个小时的支持后，问题仍然存在。他们说问题出在我的设置上。我现在已经切换到具有完全相同设置的 mailgun，并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T15:30:20.740

我通过将默认值添加`'Content-Transfer-Encoding' => '7bit'` 到我的`ActionMailer`.

查看[API 文档](http://apidock.com/rails/ActionMailer/Base)。

# javascript - Javascript代码执行顺序

> ID：10543695
> 
> 赞同：0
> 
> 时间：2012-05-10T23:56:50.130
> 
> 标签：javascript, google-maps

只是想知道是否有人可以帮助我了解 Javascript 原则。如果我想将函数作为参数传递，我猜这是非常核心的。我对 Javascript 知之甚少，但我承认它的微妙之处可能还不够。

因此，调用 codeAddress，然后到达我的第一个警报 (HERE2)，代码传递回我的 showOnMap 函数，然后到达我的第二个警报 (HERE3)。为什么我的 HERE3 警报显示在我的 HERE2 警报之前？我能做些什么来告诉 Javascript 等待吗？

提前致谢

```
function showOnMap() {
    var inputStart = document.getElementById('CurrentHitch_StartDescription').value;
    var inputEnd = document.getElementById('CurrentHitch_EndDescription').value;
    codeAddress(inputStart, true); //HERE1*************
    codeAddress(inputEnd, false);
    var bounds2 = new google.maps.LatLngBounds(this.markerStart.getPosition());
    bounds2.extend(this.markerEnd.getPosition());
    map.fitBounds(bounds2);
    alert('showOnMap'); //HERE3*************
}

function codeAddress(address, isStart) {
    geocoder.geocode({ 'address': address }, function (results, status) {
        alert('codeAddress'); //HERE2*************
        if (status == google.maps.GeocoderStatus.OK) {
            if (isStart) {
                markerStart.setPosition(results[0].geometry.location);
            }
            else {
                markerEnd.setPosition(results[0].geometry.location);
            }
        } else {
            alert("Sorry, couldn't find your destination: " + status);
        }
    });
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:01:38.323

这是因为`geocode`异步发生（**非阻塞**代码，意味着将来的某个时间，完成后我会告诉你）。*可能*可以告诉 Google 的 api 同步工作（作为阻塞代码），但您最好将取决于结果的代码放在`geocode`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:01:04.667

Welcome to the `ajax`world...
`geocode`是 google 提供的一个 ajax 服务。

您发送一个**异步**请求，您不等待它返回，继续执行代码，“第三个”警报触发，异步请求返回，您触发“第二个”警报。

想想这段代码：

```
alert('1');
setTimeout(function(){ 
    alert('2');
}, 1000); // fire the function after one second.
alert('3'); 
```

[**现场演示**](http://jsfiddle.net/gdoron/2272Q/)

输出顺序：

> 1,3,2

# android - Android：在 MapView 中突出显示一条街道

> ID：10543696
> 
> 赞同：1
> 
> 时间：2012-05-10T23:56:57.580
> 
> 标签：android, android-mapview, gis

使用 MapView，我们需要应用一个图层，其中一条线出现在道路上。

我们可以对地址进行反向地理编码并固定位置，但我们无法获取纬度/经度点的集合以沿着街道画线。

这有可能吗？

# java - 枚举作为存储？

> ID：10543699
> 
> 赞同：1
> 
> 时间：2012-05-10T23:57:33.207
> 
> 标签：java, enums

我在课堂上声明了一个大型枚举

```
public enum CarMaker{
        Honda,
        Toyota,
        Sony,
        ...;

        public CarMaker at(int index){ //a method to retrieve enum by index
                CarMaker[] retval = this.values();
                return retval[index];
        }
        public final SomeObj val; //a value associated with each enum
            //.. more custom functions if needed
    } 
```

由于只需要每个 CarMaker 的一个实例，如果我想将此枚举用作存储（如数组但使用索引访问每个元素，我可以使用更直观的名称，我可以使用自定义函数），这是一种不好的做法对于每个元素）

```
CarMaker A = CarMaker.Honda;
CarMaker B = CarMaker.at(1); 
//Error above b/c 'at' is not a static member, can I make at a static member?

A.val = 5; 
B.val = 6; 
//Here I want A to be share data with B since both are "Honda"
//but it doesn't seem to do that yet
 System.out.println(A)
 System.out.println(B)

//Expected output:
//A: 6
//B: 6 
```

现在 A 和 B 似乎创建了他们自己的“Honda”实例，但我希望它们被共享。可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T00:00:53.537

`enum`s 应该是不可变的常量。给他们一个公共的、可修改的字段是一个可怕的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T00:07:12.443

使用您的枚举，但通过组合：创建一个品牌名称枚举，然后构建需要名称来保存枚举字段的对象。

例子

```
public enum CarMaker {
   Honda,
   Toyota,
   Sony,
   Olympus,
   Facebook,
   Google,
   ...
}

public class Car {
   CarMaker carMaker;
   //... etc....

   Car(CarMaker carMaker) {
      this.carMaker = carMaker;
      // ... more code
   }

   //.... 
```

# c# - c# 中整分钟的时间偏移量

> ID：10543701
> 
> 赞同：-1
> 
> 时间：2012-05-10T23:57:36.127
> 
> 标签：c#

我有一种方法可以计算两次之间的分钟数。像这样的东西：

```
DateTime UserLocalTime = DateTime.UtcNow.ConvertToUserTime(UserTimezoneID);

double TheOffset = (UserLocalTime - DateTime.UtcNow).TotalMinutes;

return TheOffset.ToString(); 
```

问题是它返回类似 119.83723 的东西，因为它正在计算分钟和秒等。

我怎样才能解决这个问题？恐怕有时它也会返回 120.11233 所以四舍五入也可能不会完全有帮助。

感谢您的建议。

*Update1: (int)(Math.Round((UserLocalTime - DateTime.UtcNow).TotalMinutes)); 返回 119。*

更新2：我试过这个，看起来它可以工作，但是当偏移量很奇怪时会失败（有时可能是5:30，答案应该是330分钟）

```
int TheOffset = (int)(Math.Round((UserLocalTime - DateTime.UtcNow).TotalHours));
TheOffset = TheOffset * 60; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:59:13.210

*   你想只得到分钟而不是别的吗？只需使用`Minutes`而不是`TotalMinutes`.
*   你想得到总分钟数，但不是低于它的任何度量吗？使用`(int)TotalMinutes`. 它会四舍五入。

> 恐怕有时它也会返回 120.11233 所以四舍五入也可能不会完全有帮助。

你能澄清一下吗？四舍五入`120.11233`将导致`120`......我认为这就是你想要的，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:08:19.547

你可以使用：

*   [Math.Round()](http://msdn.microsoft.com/es-es/library/wyk4d9cy%28v=vs.95%29.aspx)获取最接近的整数
*   [Math.Floor()](http://msdn.microsoft.com/es-es/library/e0b5f0xb%28v=vs.95%29)获取小于或等于指定数字的最大整数。
*   [Math.Ceiling()](http://msdn.microsoft.com/es-es/library/zx4t0t48%28v=vs.95%29)获取大于或等于指定数字的最小整数值。

*   119,895 -> 地板 = 119，天花板 = 120，圆形 = 120

*   119,175 -> 地板 = 119，天花板 = 120，圆形 = 119

将所需的功能应用于您的 TheOffset。

如果您需要天花板或地板，您可能应该反转使用的函数，如果负偏移或正偏移。

所以，你决定你想得到什么。

# mysql - mysql数据库错误Your4Vidz

> ID：10543703
> 
> 赞同：0
> 
> 时间：2012-05-10T23:58:00.383
> 
> 标签：mysql

> **可能重复：**
> [警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果](https://stackoverflow.com/questions/795746/warning-mysql-fetch-array-supplied-argument-is-not-a-valid-mysql-result)

我的数据库有问题：

> 警告：mysql_fetch_object()：提供的参数不是第 63 行 /home/face911/public_html/fbvideos.uni.me/index.php 中的有效 MySQL 结果资源

你能帮我解决这个问题吗？在`database.txt`我发现这个：

```
CREATE TABLE IF NOT EXISTS `videos` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `videoid` varchar(50) CHARACTER SET latin1 NOT NULL,
  `views` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=32 ; 
```

我需要做什么才能使这个脚本工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:08:24.627

哦。似乎您为此查询运行了 mysql_fetch_object() 。这是错误的。仅获取选择查询。请遵循以下。

```
mysql_connect("hostname","username","password");
mysql_select_db("db_name");
$q = "CREATE TABLE IF NOT EXISTS `videos` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `videoid` varchar(50) CHARACTER SET latin1 NOT NULL,
  `views` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=32 ";

$result = mysql_query($q);
if($result)
echo "Done"; 
```

这肯定会奏效。

# javascript - 改变 JavaScript 的价值

> ID：10543706
> 
> 赞同：5
> 
> 时间：2012-05-10T23:58:39.293
> 
> 标签：javascript, jsf, jsf-2, primefaces

有没有办法`<p:commandButton>`用 Javascript 改变一个值？

我试图在其中设置 a`widgetVar`但`<p:commandButton>`它没有任何`setValue()`功能或类似的东西。由于我的 XHTML 的其他特定问题，我无法将它绑定到托管 bean。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T04:27:46.497

JSF 生成 HTML。JavaScript 适用于 HTML。在编写 JavaScript 代码时，如果您已经无法从头到尾告诉您它将生成哪些 HTML 代码，请不要过多地查看 JSF 源代码。

在您喜欢的浏览器中打开 JSF 页面，右键单击并*查看源代码*。生成的 HTML 输出`<p:commandButton value="foo" />`如下所示：

```
<button id="formId:buttonId" name="formId:buttonId" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="PrimeFaces.ab({formId:'formId',source:'formId:buttonId',process:'@all'});return false;" type="submit">
    <span class="ui-button-text">foo</span>
</button> 
```

看，按钮有一个`<span>`子元素，其中包含值。

所以，这块 JS 改变按钮的值`bar`应该这样做：

```
document.getElementById("formId:buttonId").firstChild.innerHTML = "bar"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-15T06:28:47.860

这是使用 widgetVar 的更好方法：

假设我们将 confirmWgt 设置为 <p:commandButton> widgetVar，设置其值的 javascript 代码将是：

```
PF('confirmWgt').jq.text("New Value"); 
```

使用这种方式，您可以确定将来 primefaces 应用的 html 代码中的任何更改都不会导致更新其版本时出现任何问题。

# javascript - JavaScript中多项选择测验的最佳数据结构

> ID：10543708
> 
> 赞同：3
> 
> 时间：2012-05-10T23:58:49.290
> 
> 标签：javascript, arrays, object, data-structures, multidimensional-array

我目前有这个数据集用于测验应用程序（它有多糟糕？）：

```
 var questions =
        [
        'Question 1 text', 
        'Question 2 text'
        ]

    var answers =
        // Question 0
        [
            ['Choice 0', // Right answer
            'Choice 1',
            'Choice 2']
        ]
        // Question 1
        [
            ['Choice 0',
            'Choice 1', // Right answer
            'Choice 2']
        ]

    var correctChoice = 
        [
        '0', // Question 0, choice 0
        '1' //  Question 1, choice 1
        ] 
```

所以我依靠“隐形索引”将它们链接在一起，这有点难以维护。有没有更好的方法来解决这个问题？对象更好吗？建议或一般的最佳实践？

我一直在考虑 JSON - 这是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T00:05:33.837

这样的事情应该做：

```
var quiz = [
  {question: 'Question 1 text', answers: ['answer 1', 'answer 2'], correct: 0},
  {question: 'Question 2 text', answers: ['answer 1', 'answer 2'], correct: 1}
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:02:15.633

```
var quiz = {
    questions: [
        'Question 1 text', 
        'Question 2 text'
    ],
    answers: [
        [//Question 0
            'Choice 0', // Right answer
            'Choice 1',
            'Choice 2'
        ],
        [//Question 1
            'Choice 0',
            'Choice 1', // Right answer
            'Choice 2'
        ]
    ],
    correctChoice: [
        '0', // Question 0, choice 0
        '1' //  Question 1, choice 1
    ]
} 
```

# mysql - mysql - 使用 csv 样式数据查询字段

> ID：10543709
> 
> 赞同：0
> 
> 时间：2012-05-10T23:58:59.257
> 
> 标签：mysql

我在 mysql 表中有一个字段，其中包含一组逗号分隔的数字（例如 1、2、3、4、5）。我试图找出以最少的 cpu 使用率快速查询表（特别是如果有数百万行）的最佳方法。

我可以很容易地做到以下几点：

```
select * from table where field like '%60,%'; 
```

但是我认为这不是最优的，它也会返回字段值的匹配项，例如 1,2,3,4,160。我确实考虑在字符串的开头和结尾放置一个逗号，例如 ,1,2,3,4,160，然后以下查询将起作用：

```
select * from table where field like '%,60,%'; 
```

有人对最好的方法有任何想法吗？

# c - 新线程的pid

> ID：10543710
> 
> 赞同：15
> 
> 时间：2012-05-10T23:59:06.543
> 
> 标签：c, linux, pthreads

我有一个关于 pthread_create() 创建的新线程的快速问题：

当我打印主线程和子线程的pid（从getpid（）获取）时，它们是相同的，而当我使用htop linux实用程序显示pid时，它们是不同的。谁能给我解释一下？？谢谢！！

```
kai@kai-T420s:~/LPI$ ./pthr_create
--------------------------------------
main thread: pid: 4845, ppid: 3335
child thread: pid: 4845, ppid: 3335 
```

htop 显示： ![显示进程列表的 htop 应用程序的屏幕截图。](../Images/3be30962869ab68733a795617dcb070d.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-11T09:05:31.390

Linux 实现`pthreads()`为轻量级进程，因此它们获得分配的 PID。

更多信息可以在[http://www.linuxforu.com/2011/08/light-weight-processes-dissecting-linux-threads/找到](http://www.linuxforu.com/2011/08/light-weight-processes-dissecting-linux-threads/)

还有一个示例如何为您的线程获取 LWP-Pid。

```
#include <stdio.h>
#include <syscall.h>
#include <pthread.h>

int main()
{
     pthread_t tid = pthread_self();
     int sid = syscall(SYS_gettid);
     printf("LWP id is %d\n", sid);
     printf("POSIX thread id is %d\n", tid);
     return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T00:03:53.363

线程既有从 getpid() 系统调用返回的进程 ID，也有由 gettid() 返回的线程 ID。对于在 main() 下执行的线程，这些将是相同的。我不知道哪个 htop 正在报告，您应该查看文档。

# android - Mono for Android：无法打包 Unicode 资产文件名

> ID：10543713
> 
> 赞同：2
> 
> 时间：2012-05-10T23:59:18.030
> 
> 标签：android, unicode, mono, monodevelop, xamarin.android

当资产在文件名中包含 unicode 字符时，例如中文或阿拉伯文，该文件无法部署到包中，它会出错。

将文件重命名为 ANSI 字符可以修复它。

有没有办法让 MonoDevelop + MonoDroid 部署 unicode 资产？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T20:20:10.993

我在任何地方都找不到此文档，但资产文件名*必须*是 ASCII，因为这是该[`aapt`工具所需要](https://github.com/android/platform_frameworks_base/blob/master/tools/aapt/AaptAssets.cpp#L27)的：

```
/*
 * Names of asset files must meet the following criteria:
 *
 *  - the filename length must be less than kMaxAssetFileName bytes long
 *    (and can't be empty)
 *  - all characters must be 7-bit printable ASCII
 *  - none of { '/' '\\' ':' }
 *
 * Pass in just the filename, not the full path.
 */
static bool validateFileName(const char* fileName)
{
    const char* cp = fileName;
    size_t len = 0;

    while (*cp != '\0') {
        if ((*cp & 0x80) != 0)
            return false;           // reject high ASCII
        if (*cp < 0x20 || *cp >= 0x7f)
            return false;           // reject control chars and 0x7f
        if (strchr(kInvalidChars, *cp) != NULL)
            return false;           // reject path sep chars
        cp++;
        len++;
    }

    if (len < 1 || len > kMaxAssetFileName)
        return false;               // reject empty or too long

    return true;
} 
```

我不知道为什么 Android/`aapt`有这个要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T20:42:43.310

我从 MonoDroid 团队那里得到了这个（感谢 jonp），它可以工作：

由于 Android 不支持 Unicode 资产文件名，您可以改为将文件的 Build 操作设置为 EmbeddedResource 并使用 .NET 资源来访问资源：

```
 using (var s = new StreamReader (typeof (Activity1).Assembly
       .GetManifestResourceStream ("Úñîćödę.txt")))
   button.Text = s.ReadToEnd (); 
```

（您可能需要更改文件的 Resource ID 属性以匹配传递给 Assembly.GetManifestResourceStream() 的值。）

# jquery - 在维护绑定事件处理程序的同时用 jQuery 交换两个 div

> ID：10543715
> 
> 赞同：1
> 
> 时间：2012-05-10T23:59:35.120
> 
> 标签：jquery, html, swap, attr

我有两个 div，#content 和 #contentSwap。我正在将一些数据加载到#contentSwap，对其执行一些操作，然后将其与#content 交换。我正在使用 html() 函数来交换两者，但我刚刚意识到这导致了一个问题：我使用 click() 分配给 #contentSwap 中的锚点的函数丢失了。以下是代码示例：

```
$('#contentSwap').html(data);

$('#contentSwap a').each(function(){
 $(this).click(function(){
  // Do whatever
 });
});

$('#content').html($('#contentSwap').html());
$('#contentSwap').html(""); 
```

在此之后，使用 click() 分配的函数在 #content 中不起作用。

但是，如果我使用 attr() 函数来修改每个 div 的 id，那么 click() 函数会一直存在。但这并非每次都有效，并且会导致各种错误，包括#content和#contentSwap的多个副本等。这是代码：

```
$('#content').attr("id", "contentSwap1");
$('#contentSwap').attr("id", "content");
$('#contentSwap1').attr("id", "contentSwap");
$('#contentSwap').html(""); 
```

如何有效地交换 #content 和 #contentSwap 而不会丢失我分配给它的 click() 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:34:48.387

我认为你需要的是：

```
$('#contentSwap').contents().appendTo('#content'); 
```

**见：http:** [//jsfiddle.net/thirtydot/jHSwY/](http://jsfiddle.net/thirtydot/jHSwY/)

[`.contents()`](http://api.jquery.com/contents/)用于获取`#contentSwap`. 然后孩子们被移动到里面`#content`，使用[`.appendTo()`](http://api.jquery.com/appendTo/)（参见包含“它将被移动到目标中”的句子）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:13:53.713

不确定您要做什么，但是分配给的单击处理程序`#contentSwap`不会突然开始为`#content`.

如果您以后不将该`#contentSwap`元素用于其他用途，则可以将整个元素移动到内部`#content`，并使用委托的事件处理程序来确保它可以正常工作，例如：

```
$('#contentSwap').html(data);

$('#contentSwap a').each(function(){
   $(document).on('click', this, function(){
       //document should be replace with nearest non dynamic parent
       //do your thing
   });
});

$('#content').empty().append($('#contentSwap')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T00:23:40.337

这称为事件委托。基本上，您正在以编程方式/动态生成该内容，因此默认事件绑定不再有效。 `.live`已弃用，但您可以使用：

```
 $(#contentSwap a).on("click", function(){
  // Do whatever
 }); 
```

此外，该`each`功能似乎没有做任何事情，我很确定您可以跳过它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T14:05:38.163

想出了这个！我提供的第二个代码块工作正常，但#contentSwap div 与#content div 不在同一个地方。我把它移到了正确的空间，结果一切都很好。

[http://www.tylergerard.com](http://www.tylergerard.com)

# matlab - MATLAB：当有多个最大值时，如何不从“max”中获取第一个元素而是随机索引？

> ID：10543716
> 
> 赞同：4
> 
> 时间：2012-05-10T23:59:37.590
> 
> 标签：matlab

我有以下代码：

```
[~,ind]=max(Defender.Q,[],6); 
```

`Defender.Q`是一个巨大的多维矩阵。

当 的第 6 维中有多个最大值时`Defender.Q`，该`max`函数将给我这些多个最大值中的第一个的索引。我想获得一个在多个最大值之间随机化的索引。有任何想法吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T01:11:27.053

好的，这有点涉及，但是您可以获取所有最大值的索引，然后使用`randi`and随机选择一个`accumarray`：

```
%# (1) Find the maxima

%# if you are interested in the global maximum
%# that may occur multiple times along dimension 6
[maxVal,maxIdx] = max(Defender.Q(:));

%# ALTERNATIVELY

%# if you are interested in local maxima along dimension 6
maxVal = max(Defender.Q,[],6);
maxIdx = find(bsxfun(@eq,Defender.Q,maxVal));

%# (2) pick random maximum for each 5D subarray

%# this assumes that there is no dimension #7 etc
%# In case there is, you need to add a column of ones
%# and then d7 etc to second input of accumarray

%# find row, col, etc subscripts of the maxima
[d1,d2,d3,d4,d5,d6] = ind2sub(size(Defender.Q),maxIdx);

%# create a 5-d array, containing one random index
%# from the maxima along dimension 6, or NaN
randIdx = accumarray([d1,d2,d3,d4,d5],d6,[],@(x)x(randi(length(x))),NaN); 
```

# android - 无法弄清楚是什么导致 IE、Android 和 IOS 中出现此显示错误

> ID：10543723
> 
> 赞同：1
> 
> 时间：2012-05-11T00:01:10.773
> 
> 标签：android, html, css, ios, mobile

所以首先我在其中包含 IE 的唯一原因是它是我唯一可以呈现问题的浏览器。我的想法是，如果我能解决 IE 中的显示问题，它就会在移动设备上自行解决。

问题是单选按钮需要向左对齐。我面临的头痛是我必须使用 CSS 进行这项工作，因为我没有能力更改代码的 HTML 结构，因为我正在针对移动设备进行优化，对 HTML 的任何更改都会影响其他数百个页面，因此我被告知不要更改页面的 HTML 结构。哪种会抛出语义。如果有人可以帮助我了解这段代码到底发生了什么，它会在大多数桌面浏览器上正确显示，但不能在 IE、Android 或 iOS 上显示。

![问题](../Images/7bb3a0fc82bfd7dce5467ca672127839.png)

唯一影响输入和跨度的 CSS 在这里：

```
.mobile .formBound span {
  display: block;
 }

.mobile form span, .mobile form input {
  margin: 0 auto;
}

.mobile .formBound input {
  float: left;
} 
```

这是元素的 HTML 结构：

```
<div class="g3 group_3" id="tabindex_11">
    <div style="width:inherit;">
        <span class="field_label" id="field_label_donateCharity">How much would you normally be willing to donate to charity every year?:</span>
        <span class="requiredField">*</span>
    </div>
    <input type="radio"  name="donateCharity" id="donateCharity" class="offerRadioButton {required:true}" value="Less than $10">
    <span class="radioCaption">Less than $10</span>
    <input type="radio"  name="donateCharity" id="donateCharity" class="offerRadioButton {required:true}" value="$10-$100">
    <span class="radioCaption">$10-$100</span>
    <input type="radio"  name="donateCharity" id="donateCharity" class="offerRadioButton {required:true}" value="$101-$200">
    <span class="radioCaption">$101-$200</span>
    <input type="radio"  name="donateCharity" id="donateCharity" class="offerRadioButton {required:true}" value="$201-$500">
    <span class="radioCaption">$201-$500</span>
    <input type="radio"  name="donateCharity" id="donateCharity" class="offerRadioButton {required:true}" value="$501 or more">
    <span class="radioCaption">$501 or more</span>
</div> 
```

在这一点上，我相当确定问题与代码的 HTML 结构有关。

关于如何才能让它在移动设备上正确显示的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:14:31.157

问题是由这种风格引起的：

```
.mobile .formBound input {
  float: left;
} 
```

这将很难修复，因为您无法修改标记。我建议尝试使用 ":after" 伪选择器来清除浮动。像这样的东西：

```
span.radioCaption:after {
   content: " ";
   clear: both;
} 
```

如果您包含一个在 IE 中重现您的问题的 JSFiddle，将会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:12:37.527

很难说没有看到更多的结构/ CSS 规则。您是否尝试过将 !important 添加到您的输入浮动规则中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T23:17:19.427

这里的解决方案最终是一个小脚本，可以找到元素并
在每个元素之后设置一个标签

# mysql - 选择从表中区分以对另一个表中的值求和

> ID：10543727
> 
> 赞同：1
> 
> 时间：2012-05-11T00:01:48.077
> 
> 标签：mysql

我有两张桌子

```
 table1                   table2
    numID|counts|date        numID|net|tax|date
    1        1   xy            1    2   1   xy
    2        1   xy            2    2   1   xy
    3        1   xy            3    2   1   xy
    3        1   xy            4    1   1   xy
    4        0   xy 
```

因此，对于具有相同日期、numID 和计数 = 1 的行，我需要在 table2 上求和（净 + 税）。我尝试使用 where 子句，但 numID 3 将被添加两次，但我只需要它求和一次。numID 4 应该被省略，因为它的 counts=0。我的选择：

```
SELECT 
    SUM(`net`+`tax`) 
FROM table1 AS d, `table2` AS c
WHERE d.date=c.date
    AND d.numID=c.numID
    AND `it_counts` = 1 
```

这将 numID 3 添加了两次，但应该是`DISTINCT`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:12:43.647

尝试使用相关`exists`查询重写此语句：

```
SELECT
    SUM(`net`+`tax`) 
FROM `table2` AS c
WHERE EXISTS (
    SELECT 1 FROM table1 AS d
    WHERE d.date=c.date
        AND d.numID=c.numID
        AND `it_counts` = 1) 
```

# java - 使用 build.xml 从源文件夹创建 jar 文件

> ID：10543728
> 
> 赞同：10
> 
> 时间：2012-05-11T00:01:49.573
> 
> 标签：java, ant, jar

我已经下载了一个具有以下结构的 API：

在该文件夹中，有一个源文件夹和一个 build.xml 文件。我将如何用这个创建一个罐子？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T00:16:28.287

如果 build.xml 文件还没有创建 jar 文件的目标，您可以在此处阅读有关*ant jar 命令*的信息：

*   [http://ant.apache.org/manual/Tasks/jar.html](http://ant.apache.org/manual/Tasks/jar.html)

但是，构建文件很可能已经为您完成了这项工作。

在包含 build.xml 文件的目录中（解压 jar 之后），您可以通过键入*ant来运行构建脚本。*

只是为了好玩，这里有一个*简单*的ant 目标示例，它编译一些代码并创建一个 jar。

此目标将编译任何名为报告的文件夹中的每个 .java 文件。

如您所见，大多数值都使用脚本中其他地方定义的变量，但希望您能理解...

```
<target name="create-funky-jar" depends="some-other-funky-targets">
    <javac
      srcdir="${src.dir}"
      includes="**/reports/*.java"
      destdir="${build.classes.dir}"
      deprecation="${javac.deprecation}"
      source="${javac.source}"
      target="${javac.target}"
      includeantruntime="false">
      <classpath>
        <path path="${javac.classpath}:${j2ee.platform.classpath}"/>
      </classpath>
    </javac>

    <jar destfile="${dist.dir}/SomeFunkyJar.jar"
         basedir="${build.classes.dir}"
         includes="**/reports/*.class"/>
  </target> 
```

以上只是通过修改 NetBeans 生成的构建脚本创建的。

You can run the above target by adding it to a build.xml file and typing the following from the command line:

```
ant create-funky-jar 
```

Note: You'll have to define all the variables for it to actually work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:14:58.973

`build.xml`是 ant 使用的文件，它可以包含 Ant 应该遵循的过程来构建适当类型的文件（如 a `jar`）。

我建议阅读类似[本指南的内容（称为](http://www.allapplabs.com/ant/installing_ant.htm)*安装*和*运行*的章节）。另一种选择可能是使用 Netbeans，因为它已经有了 Ant，并且可以选择从现有的`build.xml`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T00:14:59.997

在 build.xml 文件所在的目录中，键入

```
ant -p 
```

也许您需要先安装ant。

如果有创建 jar 的目标，请选择该目标，例如

```
ant jar 
```

# php - PHP会话未知错误

> ID：10543731
> 
> 赞同：0
> 
> 时间：2012-05-11T00:01:57.900
> 
> 标签：php

我有一个包含登录名的网站，当用户登录时，我希望它在主页上显示一条消息并继续进行会话。

我收到错误：

```
Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by.. 
```

和

```
Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent 
```

当我未登录时，它会显示错误，但一旦我登录并返回页面，它就会消失，但不会显示“您已登录！” 就像它应该...

这是我在检查数据库是否匹配后的身份验证代码：

```
if ($result["userName"] == $_POST[txtUsername] && $result["password"] ==$_POST[txtPassword])
    {
        ?>
        <script type="text/javascript">;
        alert("successfully logged in, <?php echo $result['userName'];?>!");
        window.location.href='http://manning3.jcu.edu.au/~jc192699/index.html';
        </script>
        <?php
        session_start();
        $_SESSION["access"] = 'granted';
    } 
```

我的 index.php 中的代码似乎导致了错误：

```
 <?php
    session_start();
    if ($_SESSION["access"] == 'granted'){
        ?>
        <p>You are logged in!</p>
        <?php
    }
    else{
    ?>
    <p>You are not logged in!</p>
    <?php
    }
    ?> 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:05:56.030

`session_start()`必须在任何输出打印到浏览器之前调用。因为您在开始会话之前打印了一个 javascript 脚本，所以已经设置了标头，因此无法启动会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:04:25.473

看起来您`<?php`在第 1 行的声明之前有一个空格。这将导致之前发送标头，`session_start()`并可能导致您收到错误。

# group-by - Case When + Join + Group By + 有 SQL 查询

> ID：10543734
> 
> 赞同：0
> 
> 时间：2012-05-11T00:03:02.967
> 
> 标签：group-by, left-join, case-when, having-clause

**[请点击此处查看示例表格和说明。](http://www.dbasupport.com/forums/attachment.php?attachmentid=588&d=1336691473)**

根据附加图像，我有三个表“PROJECTS”、“PROJECTMANAGER”和“MANAGERS”。

我需要一个查询，它可以列出由“产品”类型管理器管理的项目，这些管理器与项目状态分组。如果 STATUS=2 则显示为 Completed Projects 或 In Progress Projects。

结果表应如附图所示。期望的结果：[http ://www.dbasupport.com/forums/attachment.php?attachmentid=588&d=1336691473](http://www.dbasupport.com/forums/attachment.php?attachmentid=588&d=1336691473)

我需要的查询应该是通用的，以便可以在任何数据库（MySQL/Oracle/MSSQL/DB2）中使用

请帮忙。

顺便说一句，这不是作业......！！！！我使用了示例表。

我尝试过 case when 语句，但不知道如何加入并同时使用 group by。

```
CREATE TABLE PROJECTS 
(       
    PROJECT_ID  varchar(20), 
    PROJECT_NAME  varchar(30),
    STATUS int
);

CREATE TABLE PROJECTMANAGER
(
    PROJECT_ID  varchar(20), 
    MANAGER_ID varchar(20)
);

CREATE TABLE MANAGERS
(           
    MANAGER_ID  varchar(20), 
    MANAGER_NAME  varchar(20), 
    TYPE varchar(20)
);

INSERT INTO PROJECTS (PROJECT_ID, PROJECT_NAME, STATUS) VALUES
    ('project_001', 'Project 001', 0),
    ('project_002', 'Project 002', 1),
    ('project_003', 'Project 003', 2),
    ('project_004', 'Project 004', 0),
    ('project_005', 'Project 005', 2),
    ('project_006', 'Project 006', 0),
    ('project_007', 'Project 007', 1);

INSERT INTO PROJECTMANAGER (PROJECT_ID , MANAGER_ID) VALUES
    ('project_001', 'mgr_001'),
    ('project_002', 'mgr_001'),
    ('project_001', 'mgr_002'),
    ('project_002', 'mgr_003'),
    ('project_001', 'mgr_003'),
    ('project_005', 'mgr_001'),
    ('project_004', 'mgr_002');

INSERT INTO MANAGERS (MANAGER_ID, MANAGER_NAME, TYPE) VALUES
    ('mgr_001', 'Manager 001', 'PRODUCT'),
    ('mgr_002', 'Manager 002', 'HR'),
    ('mgr_003', 'Manager 003', 'PRODUCT'),
    ('mgr_004', 'Manager 004', 'FINANCE'),
    ('mgr_005', 'Manager 005', 'PRODUCT');

Resulted Table:

MANAGER_ID  | MANAGER _NAME | COMPLETED_PROJECTS |  IN_PROGRESS_PROJECTS |
 mgr_001    | Manager 001   |        1       |            2          |
 mgr_003    | Manager 003   |        0       |            1          |
 mgr_005    | Manager 005   |        0       |            0          | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:30:48.333

尝试这样的事情：

```
SELECT
  m.manager_id,
  m.manager_name,
  SUM(CASE WHEN p.status = 2 THEN 1 ELSE 0 END) as completed,
  SUM(CASE WHEN p.status != 2 THEN 1 ELSE 0 END) as in_progress
FROM managers m
LEFT JOIN projectmanager pm ON (m.manager_id = pm.manager_id)
LEFT JOIN projects p ON (p.project_id = pm.project_id)
WHERE m.type = 'product'
GROUP BY m.manager_id 
```

# winapi - 可以在每个窗口的基础上更改 DWM 航空色调颜色吗？

> ID：10543735
> 
> 赞同：1
> 
> 时间：2012-05-11T00:03:12.263
> 
> 标签：winapi, aero

是否可以在每个窗口的基础上设置航空色调颜色？
如果是这样，执行此操作的 Win32 函数是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:46:42.223

不，没有每个窗口的色调。

# html - HTML 5 画布图像特效

> ID：10543736
> 
> 赞同：0
> 
> 时间：2012-05-11T00:03:20.177
> 
> 标签：html, graphics, canvas, 2d, html5-canvas

我正在开发一个基于 2d 平铺的 HTML5 画布应用程序，我想知道在绘制图像时可以对图像应用什么样的特殊效果（ context.drawImage(...) ）。我遇到的唯一技巧是修改 canvas.globalAlpha 值。这会从之前的帧中留下一些颜色，如果画布对象上的东西在帧之间移动，则会产生模糊或眩晕的效果。

是否有一些渲染图像的方法可以与将 context.fillStyle 设置为原始形状的 ARGB 值相媲美？

有乘法模式吗？即：将图像像素颜色乘以目标颜色。这可以用于原始照明。（我玩弄了 context.globalCompositionOperation 但没有发现任何有趣的东西）

你还遇到过其他很酷的效果吗？

注意：我不想在这个应用程序中使用 WebGL，它是一个游戏。这意味着它是实时的，我不能用 javascript 代码修改每个像素，因为这需要很长时间。（尽管当玩家死亡并且屏幕上没有任何内容时我可能会这样做）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:35:24.413

Canvas 不提供任何预定义的效果。要操纵图像形状，您可以使用矩阵变换。
要操作图像像素和颜色，您应该使用 getImageData 方法 - [http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#pixel-manipulation](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#pixel-manipulation)。然后使用谷歌查找算法来应用一些效果，如漩涡、模糊、浮雕等。

# android - 多点触控 Android - 一根手指使用一半屏幕，另一根手指使用一半

> ID：10543737
> 
> 赞同：3
> 
> 时间：2012-05-11T00:03:34.627
> 
> 标签：android, multi-touch

嗨，我正在制作一个分屏游戏，但我不知道如何关闭控件。现在，如果只有一个人触摸屏幕，它们就可以正常工作，但是一旦多人触摸，第一个触摸的人就是唯一可以控制的人。所以我需要实现多点触控。我不知道该怎么做，所以一旦一根手指向下控制屏幕上半部分的对象，另一根手指就可以控制屏幕的下半部分。我该怎么做？

编辑：我改变了它，它仍然不起作用，但有人可以告诉我为什么

我的尝试不起作用：

```
 public boolean onTouch(View v, MotionEvent event){
      //needs multitouch
      if(checkInGame()){

                if(event.getY() < this.getMeasuredHeight() / 2){  
                    pointerId1 = event.getPointerId(event.getActionIndex());
                }else{
                    pointerId2 = event.getPointerId(event.getActionIndex());    
                }

                switch(event.getAction() & MotionEvent.ACTION_MASK){

                    case MotionEvent.ACTION_MOVE:{

                        if(event.getPointerId(event.getActionIndex()) == pointerId1){  
                            Log.d("Touch","Move1");
                              int pointerIndex = event.getActionIndex();
                          int moveX = 0;
                          int moveY = 0;
                          moveX = (int) event.getX(pointerIndex) - sX;
                          moveY = (int) event.getY(pointerIndex) - sY;

                          ship1.setLoc(moveX, moveY);
                          sX = sX + moveX;
                          sY = sY + moveY;
                        }else if(event.getPointerId(event.getActionIndex()) == pointerId2){
                              int pointerIndex = event.getActionIndex();
                            Log.d("Touch","Move2");
                              int moveX = 0;
                              int moveY = 0;
                              moveX = (int) event.getX(pointerIndex) - sX2;
                              moveY = (int) event.getY(pointerIndex) - sY2;

                              ship2.setLoc(moveX, moveY);
                              sX2 = sX2 + moveX;
                              sY2 = sY2 + moveY;
                        }
                          return true;

                    }
                      case MotionEvent.ACTION_DOWN: {

                            if(event.getPointerId(event.getActionIndex()) == pointerId1){
                                Log.d("Touch","Top1");
                                int pointerIndex = event.getActionIndex();
                                sX = (int) event.getX(pointerIndex);
                                sY = (int) event.getY(pointerIndex);
                            }else if(event.getPointerId(event.getActionIndex()) == pointerId2){
                                int pointerIndex = event.getActionIndex();
                                Log.d("Touch","Bottom1");
                                 sX2 = (int) event.getX(pointerIndex);
                                 sY2 = (int) event.getY(pointerIndex);
                            }
                            return true;
                        }

                      case MotionEvent.ACTION_POINTER_DOWN:{
                            if(event.getPointerId(event.getActionIndex()) == pointerId1){
                                Log.d("Touch","Top2");
                                int pointerIndex = event.getActionIndex();
                                sX = (int) event.getX(pointerIndex);
                                sY = (int) event.getY(pointerIndex);
                            }else if(event.getPointerId(event.getActionIndex()) == pointerId2){
                                int pointerIndex = event.getActionIndex();
                                Log.d("Touch","Bottom2");
                                 sX2 = (int) event.getX(pointerIndex);
                                 sY2 = (int) event.getY(pointerIndex);
                            }
                            return true;
                      }

                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T00:11:38.070

您可能希望通过其 ID 跟踪每个指针。在指针向下时，检查 ID，以便您知道 ID 为 1 的指针正在控制对象 1。阅读此 Android 博客文章，它可能会有所帮助：[http ://android-developers.blogspot.co.uk/2010/06/ multitouch.html 的意义](http://android-developers.blogspot.co.uk/2010/06/making-sense-of-multitouch.html)

# windows-phone-7 - 如何在 Windows Phone 上更新 ScheduledActionService 中的现有警报？

> ID：10543738
> 
> 赞同：1
> 
> 时间：2012-05-11T00:03:45.760
> 
> 标签：windows-phone-7, windows-phone-7.1, alarm, scheduledactionservice

在我的应用程序中，我有一个`Alarm`计划在上午 8:00 ( `BeginTime`) 开始。我面临的问题是我不确定更新其`BeginTime`.

我试图在其中找到`Alarm`，`ScheduledActionService`然后从那里更新它。不幸的是，它似乎不起作用，`Alarm`永远不会被触发。

```
 var schedule = ScheduledActionService.Find(alarmModel.Name);

        if (schedule != null)
        {
            var alarm = (Alarm)schedule;

            if (alarm.BeginTime != alarmModel.BeginTime)
            {
                alarm.BeginTime = alarmModel.BeginTime;
            }
        } 
```

如果我从 中删除它`ScheduledActionService`然后添加一个新的，那么它就可以工作了。

但这看起来很丑……这是我可以“更新”的唯一方法吗`Alarm`？？？！

谢谢，

辛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:36:13.387

不，正确的方法必须是调用[Replace](http://msdn.microsoft.com/en-us/library/microsoft.phone.scheduler.scheduledactionservice.replace%28v=vs.92%29.aspx) () 。

```
 var schedule = ScheduledActionService.Find(alarmModel.Name);

    if (schedule != null)
    {
        var alarm = (Alarm)schedule;

        if (alarm.BeginTime != alarmModel.BeginTime)
        {
            alarm.BeginTime = alarmModel.BeginTime;
            ScheduledActionService.Replace(alarm);
        }
    } 
```

# rest - Box API 2.0：无法下载

> ID：10543743
> 
> 赞同：0
> 
> 时间：2012-05-11T00:05:01.343
> 
> 标签：rest, curl, pycurl, box-api

我正在测试新的 API，但下载测试图像文件时运气不佳。该文件存在，可通过 Web UI 访问，并可使用 v1.0 API 检索。

我可以使用命令行 curl 和 pycurl 访问元数据（“https://api.box.com/2.0/files/{fileid}”）。但是，对“https://api.box.com/2.0/files/{fileid}/data”的调用什么也没带回来。较早的帖子 (5/1) 收到的答案是下载功能存在错误，并且“https://www.box.com”应在此期间用作基本 URL。但是，这只会引发 404。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:08:49.497

您应该可以通过...下载`http://api.box.com/2.0/files/<fildID>/content`...看起来我们在后端某处有错误。希望尽快修好。

2012 年 11 月 13 日更新——这个问题至少在一个月前得到了修复。刚刚将 URL 更新为我们的新格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:16:29.313

对我来说，当它的 /content 而不是 /data... python 代码如下

```
import requests
    fileid = str(get_file_id(filenumber))
    url = https://api.box.com/2.0/files/1790744170/content
    r = requests.get(url=url, headers=<HEADERS>, proxies=<PROXIES>)
    infoprint("Downloading...")
    filerecieved = r.content
    filename = uni_get_id(fileid, "name", "file")
    f = open(filename, 'w+')
    infoprint("Writing...")
    f.write(filerecieved)
    f.close() 
```

# java - 如何查找是否在 JApplet 中单击了图像？

> ID：10543745
> 
> 赞同：2
> 
> 时间：2012-05-11T00:05:07.520
> 
> 标签：java, swing, applet, japplet

它是支持图像拖动。如何查看图片是否被点击`JApplet`？

我确信有一种简单的方法可以做到这一点，但我到处寻找，似乎找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T00:08:10.337

选项：

*   使用 JLabel 来保存图像，并给它一个 MouseListener。简单的。
*   或者创建一个 JButton 并将 Image 用作按钮的 ImageIcon。应该比较简单吧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T00:15:45.150

请参阅本教程 的[拖放和数据传输课程。](http://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html)

如果拖动的目的是更改幻灯片或类似内容中的顺序，请查看[`JList`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html). 有关更多详细信息，请参阅[`setDragEnabled(true)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setDragEnabled%28boolean%29)&[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)。

对于显示组件，我会推荐`JLabel`@Hover 所建议的。 `JList`默认使用 a`JLabel`作为渲染组件。

# php - 在 Magento 中获取自定义产品图像标签？

> ID：10543746
> 
> 赞同：0
> 
> 时间：2012-05-11T00:05:24.260
> 
> 标签：php, image, magento, label

我的首页上有一个块，它使用名为 的自定义产品图像抓取两个最新产品`image_feature_front_right`。

我使用此代码作为查询：

```
$_helper = $this->helper('catalog/output');
$_productCollection = Mage::getModel("catalog/product")->getCollection();
$_productCollection->addAttributeToSelect('*');
$_productCollection->addAttributeToFilter("image_feature_front_right", array("notnull" => 1));
$_productCollection->addAttributeToFilter("image_feature_front_right", array("neq" => 'no_selection'));
$_productCollection->addAttributeToSort('updated_at', 'DESC');
$_productCollection->setPageSize(2); 
```

我能够得到：

*   图片：`echo $this->helper('catalog/image')->init($_product, 'image_feature_front_right')->directResize(230,315,4)`
*   产品网址：`echo $_product->getProductUrl()`
*   产品名称：`$this->stripTags($_product->getName(), null, true)`

我唯一无法获得的是自定义图像标签。我试过`echo $this->getImageLabel($_product, 'image_feature_front_right')`了，但这似乎无济于事。

谁能指出我正确的方向？

谢谢！

特雷

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:56:20.447

我想这是某种 magento 错误。问题似乎是 Magento 核心没有设置 custom_image_label 属性。而对于默认的内置图像 [image, small_image, thumbnail_image] 它确实设置了这些属性 - 因此您可以执行以下操作：

```
$_product->getData('small_image_label'); 
```

如果您查看`Mage_Catalog_Block_Product_Abstract::getImageLabel()`它，只需将“_label”附加到`$mediaAttributeCode`您作为第二个参数传入的那个并调用`$_product->getData()`.

如果您打电话`$_product->getData('media_gallery');` ，您会看到自定义图像标签可用。它只是嵌套在一个数组中。所以使用这个功能：

```
function getImageLabel($_product, $key) {
    $gallery = $_product->getData('media_gallery');
    $file = $_product->getData($key);
    if ($file && $gallery && array_key_exists('images', $gallery)) {    
        foreach ($gallery['images'] as $image) {
            if ($image['file'] == $file)
                return $image['label'];
        }
    }
    return '';
} 
```

扩展 Magento 核心代码是谨慎的（理想情况下`Mage_Catalog_Block_Product_Abstract`，但我不认为 Magento 允许您覆盖抽象类），但如果您需要快速破解 - 只需将此函数粘贴到您的 phtml 文件中，然后调用：

```
<?php echo getImageLabel($_product, 'image_feature_front_right')?> 
```

# ajax - 如何在我的 TYPO3 Extbase 扩展中获得 AJAX 调用？

> ID：10543748
> 
> 赞同：-1
> 
> 时间：2012-05-11T00:05:32.833
> 
> 标签：ajax, typo3, fluid, extbase

我在这样做时遇到了麻烦，我一直在寻找一些手册，但它们似乎对我不起作用（它们要么不够详细，要么我太愚蠢，可能两者兼而有之）。

所以我想通过某个事件从我的 Fluid View HTML 文件开始一个 AJAX 调用，然后它应该在某个控制器中执行操作并返回一些值（目前任何值都可以，我似乎无法得到当涉及到 Extbase 中的 AJAX 时，任何可以在这里工作的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:07:09.593

*没有细节我只能猜测你的问题是什么*

首先也是最重要的事情是......使用 FireBug 检查 AJAX 调用的问题是什么。它可能只是错误的 URL（操作、控制器等），也可能是您的操作中的一些问题，它没有返回所需的输出。FireBug 将允许您检查它的堆叠位置。

**但最有可能...**

在将 JS/CSS 代码直接写入 Fluid 视图时要记住非常重要的事情，不幸的是，它几乎从未被提及：

Fluid 使用大括号表示字符串是一个变量：`{someVar}`，因此如果您将 AJAX 或其他 JavaScript 函数放入 Fluid 模板，它很可能被视为 Fluid 变量。此示例粘贴到模板：

```
$.ajax({
  url: "index.php"
  data: "tx_myextension_plugin[controller]=MyController&tx_myextension_plugin[action]=getData&type=89657201"
  success: function(result) {
    alert(result);
  }
}); 
```

将呈现为：

```
$.ajax(Array); 
```

**解决方案：**

直接在模板中转义它很困难，因此将所有 JavaScript 保存到`Resources/Public`扩展目录下的单独文件中肯定更容易，并将其包含在通用 HTML 标记中：

```
<script type="text/javascript" src="typo3conf/ext/yourext/Resources/Public/ajaxFunctions.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T12:41:38.753

```
$("#searchFach").change(function(){
        $.ajax({
              type: 'POST',
              url:"fragen/controller/Question/searchQuestions",      
              data: {mainCategoryId:$("#searchFach").val()},
              success: function(response) { $("#searchCategory").html(response);                         
              },   
        });
    });` 
```

# sql-server - 使用 cfqueryparam 在包含哈希的索引列上搜索慢速查询

> ID：10543755
> 
> 赞同：4
> 
> 时间：2012-05-11T00:06:20.540
> 
> 标签：sql-server, performance, coldfusion, coldfusion-9, cfqueryparam

我有以下查询在 16 毫秒 - 30 毫秒内运行。

```
<cfquery name="local.test1" datasource="imagecdn">
    SELECT hash FROM jobs WHERE hash in(
        'EBDA95630915EB80709C69089315399B',
        '3617B8E6CF0C62ECBD3C48DDF8585466',
        'D519A38F09FDA868A2FEF1C55C9FEE76',
        '135F94C3774F7719CFF8FF3A275D2D05',
        'D58FAE69C559273D8427673A08193789',
        '2BD7276F209768F2FCA6635659D7922A',
        'B1E3CFBFCCFF6F5B48A849A050E6D424',
        '2288F5B8A797F5302E8CA24323617236',
        '8951883E36B5D38A4643DFAA0396BF13',
        '839210BD564E30BE1355D1A6D4EF7081',
        'ED4A2CB0C28B608C29576819CF7BE19B',
        'CB26925A4874945B810707D5FF0B91F2',
        '33B2FC229F0CC797A02AD163CDBA0875',
        '624986E7547DBAC0F47B3005CFDE0A16',
        '6F692C289BD805CEE41EF59F83F16F4D',
        '8551F0033C617BD9EADAAD6CEC4B3E9E',
        '94C3C0A74C2DE085FF9F1BBF928821A4',
        '28DC1A9D2A69C2EDF5E6C0E6368A0B3C'
    )
</cfquery> 
```

如果我执行相同的查询但使用 cfqueryparam，它会在 500 毫秒 - 2000 毫秒内运行。

```
<cfset local.hashes = "[list of the same ids as above]">
<cfquery name="local.test2" datasource="imagecdn">
    SELECT hash FROM jobs WHERE hash in(
        <cfqueryparam cfsqltype="cf_sql_varchar" value="#local.hashes#" list="yes">
    )
</cfquery> 
```

该表大约有 60,000 行。“散列”列是 varchar(50) 并且具有唯一的非聚集索引，但不是主键。数据库服务器是 MSSQL 2008。Web 服务器运行的是最新版本的 CF9。

知道为什么 cfqueryparam 会导致性能爆炸吗？无论我刷新页面多少次，它每次都以这种方式运行。如果我将列表配对到只有 2 或 3 个哈希，它在 150-200 毫秒时仍然表现不佳。当我消除 cfqueryparam 时，性能符合预期。在这种情况下，存在 SQL 注入的可能性，因此使用 cfqueryparam 肯定会更好，但从索引列中查找 2 条记录不应该花费 100 毫秒。

**编辑：**

1.  我们使用`hash()`不是 UUIDS 或 GUIDS 生成的哈希值。哈希由 a 生成，`hash(SerializeJSON({ struct }))`其中包含要在图像上执行的一组操作的计划。这样做的目的是让我们在插入之前和查询之前知道该结构的确切唯一 ID。这些散列充当了已经存储在数据库中的结构的“索引”。除了散列，相同的结构将散列到相同的结果，这对于 UUIDS 和 GUIDS 是不正确的。

2.  该查询正在 5 个不同的 CF9 服务器上执行，它们都表现出相同的行为。对我来说，这排除了 CF9 正在缓存某些东西的想法。所有服务器都连接到完全相同的数据库，因此如果发生缓存，它必须是数据库级别。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T16:28:05.200

您的问题可能与 VARCHAR 与 NVARCHAR 有关。这 2 个链接可能有助于 在 SQL Server 中从 ColdFusion和 [nvarchar 与 varchar](http://blog.brianhartsock.com/2008/12/14/nvarchar-vs-varchar-in-sql-server-beware/)[查询 MS SQL Server G/UUID ，请注意](http://jochem.vandieten.net/tag/nvarchar/)

可能发生的情况是 ColdFusion 管理员中有一个设置是否`cfqueryparam`将 varchars 作为 unicode 发送。如果该设置与列设置不匹配（在您的情况下，如果启用了该设置），则 MS SQL 将不会使用该索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T05:04:23.840

正如马克指出的那样，缓存中可能有一个错误的执行计划。cfqueryparam 的优点之一是，当您传入不同的值时，它可以重用它为该语句提供的缓存计划。这就是为什么当您尝试使用较小的列表时您看不到任何改进的原因。当您不使用 cfqueryparam 时，SQL Server 每次都必须制定执行计划。这通常是一件坏事，除非它在缓存中有一个次优计划。[尝试按照此处http://www.devx.com/tips/Tip/14401](http://www.devx.com/tips/Tip/14401)的说明清除缓存，希望这意味着下次您使用 cfqueryparam 运行语句时，它会缓存更好的计划。

有道理？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T05:26:27.563

我认为 cfqueryparam 不会引起问题。正如您提到的执行中的大幅提升，在尝试使用 cfqueryparam 时，索引可能不会用于您的查询。我在我的开发计算机上创建了相同的场景，但是在使用和不使用 cfqueryparam 的情况下我得到了相同的执行时间。使用列表可能会有一些开销，因为在第一个查询中您直接将其作为测试传递，而在第二个冷融合中需要从提供的列表中的查询参数创建，但这也不应该那么多。我会建议启动“SQL Server Profiler”并监控在服务器上执行的查询，这会让你更好地花费另外 500 毫秒。

# grails - Grails Web 流中的重定向

> ID：10543757
> 
> 赞同：3
> 
> 时间：2012-05-11T00:07:01.603
> 
> 标签：grails, spring-webflow, grails-2.0, grails-controller

我对 Grails 网络流中的重定向有疑问。我处于允许用户输入问题答案的视图状态。在 2 次错误尝试中，我应该能够重新引导用户从不同的控制器查看页面。我的意思是

```
challengeQuestionOne{
            onRender() {
                //Display question
            }
            on('next') {BuildQuestion command ->
                bindData(flow.recovery,command)
                [return the model to flow]
                if(command.hasErrors()) {
                    flow.command = command
                    return error()
                }
                if(check for status. If doesnot pass){
                    flash.message=message(code:'loginForm.account.locked', default: 'Please Contact Admin.')
                    redirect(controller : "login",action: "login")//how to redirect from here to diff controller
                }                    
                if (//compare answer entered) {

                }
                else{
                   //set status not active
                }

            }.to("challengeQuestionTwo")
            on(Exception).to("error")
            on('cancel').to('finish')                
        } 
```

我试图从 onRender 重定向。它正在重定向到页面。但是如何在重定向页面上显示错误消息。如何将错误消息从一个控制器转发到另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:12:46.390

Ivo Houbrechts 写了一篇关于 grails webflow 的优秀教程：

> Webflow 定义了自己的 flash 范围。尽管它与标准 grails flash 范围具有相同的语义（主要目的是只存储对象直到下一个请求之后），但它是不同的范围。这意味着存储在 webflow 的 flash 范围内的对象在标准 grails 操作中不可见。

```
import org.springframework.web.context.request.RequestContextHolder
....
RequestContextHolder.currentRequestAttributes().flashScope.message = "YourMessage" 
```

你可以在这里阅读更多：

[http://livesnippets.cloudfoundry.com/docs/guide/](http://livesnippets.cloudfoundry.com/docs/guide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:04:01.623

在这种情况下，Flash 示波器将无法按预期工作。尝试使用另一种方法来显示错误。例如，您可以通过重定向传递参数。或者您可以抛出一些异常并在呈现的页面上检查它，如下所示：

```
<g:if test="${flowExecutionException}">
    <div class="error"><g:message code="loginForm.account.locked"/></div>
</g:if> 
```

# mysql - 我应该如何管理用于注册/登录 Facebook 和 Twitter 的数据库

> ID：10543759
> 
> 赞同：2
> 
> 时间：2012-05-11T00:07:14.530
> 
> 标签：mysql, database, facebook, twitter, database-management

我正在创建一个 iOS 应用程序，用户将能够通过他在我们网站（内部）的帐户或通过 Facebook 或 Twitter 登录。

我想知道的是我应该如何管理数据库，以便用他在我网站上的内部帐户验证他的 Facebook / Twitter 帐户？

即当用户通过他的内部帐户登录时，我只需运行一个简单的身份验证检查以查看他的用户名和密码是否有效。但是对于 Facebook 和 Twitter，我显然不能这样做，因为我无权访问用户的密码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T22:39:20.813

我的建议是您将为每种登录类型创建一个新表并将其连接到您的用户/成员表。

例如 - 对于 facebook 登录，您将有一个`facebook_users`表格来保存用户的数据（例如姓名、图片和最重要的 - fbid），而不是`facebook_user_id`在现有`members`表格中添加一个名为的列。

为了从 facebook 获取登录用户，您不需要访问他的密码...您应该使用 Facebook JS SDK，特别是`FB.getLoginStatus`and`FB.login`功能...

当然，我的建议只是完成任务的众多适用方法之一

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T22:51:13.227

在您的内部登录表中保存用户的 fbid 而不是 fb-login user_name（您可以保留两者） - 存在唯一映射（我确信 twitter 也存在类似的东西）。为什么需要fb密码呢？此外，您在内部表上运行检查以验证用户帐户，但是当使用从 fb 或 twitter 登录时，用户不是已经通过身份验证了吗？

# python - Matlab的findpeaks函数的Numpy等价物？

> ID：10543760
> 
> 赞同：9
> 
> 时间：2012-05-11T00:07:52.933
> 
> 标签：python, numpy

> **可能重复：**
> [Python/SciPy 的寻峰算法](https://stackoverflow.com/questions/1713335/peak-finding-algorithm-for-python-scipy)

我正在寻找浮点数向量中的局部最大值，正如 Matlab 的 findpeaks 函数所做的那样。

numpy 有类似的功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T00:11:25.847

怎么样`scipy.signal.find_peaks_cwt`

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.find_peaks_cwt.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.find_peaks_cwt.html)

或者：

[https://gist.github.com/1178136](https://gist.github.com/1178136)

# objective-c - 在 Xcode 中将对象从一个 xib 声明到另一个？

> ID：10543768
> 
> 赞同：0
> 
> 时间：2012-05-11T00:09:37.767
> 
> 标签：objective-c, xcode, viewcontroller, declare

我有一个项目，它有一个与主 ViewController 分开的 xib 的开关。我正在努力做到这一点，以便当您将 UISwitch 切换为 OFF 时，ViewController 中的按钮会被隐藏。我试图在 xib 的 .m 文件中声明 AppDelegate 但仍然没有运气。我的代码是：

```
- (void)viewDidAppear:(BOOL)animated {

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

}

我究竟做错了什么？我正在尝试做

```
if (switch.on) {
     myButton.hidden = YES;
   } else {
     myButton.hidden = NO;
} 
```

我也在第二个 xib 的 .m 文件中完成了此操作（没有主 ViewController 的那个）

```
#import "AppDelegate.h"
#import "ViewController.h" 
```

但还是什么都没有！所以基本上，我只是想在一个 xib 中声明一个按钮。而已。请帮忙 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:59:10.200

首先，请参阅[有关在视图控制器之间传递数据的](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)内容以及[有关 UISwitch](http://www.xprogress.com/post-30-uiswitch-tutorial-example-how-to-use-the-switch-in-xcode-for-iphone-sample-included/)的内容。

一旦你理解了这一点，就可以像这样设置你的代码——

FirstViewController.h：

```
@interface FirstViewController : UIViewController
{
  ...
}
@property IBOutlet UISwitch *theSwitch;

- (IBAction)switchToggled;

@end 
```

SecondViewController.h：

```
@interface SecondViewController : UIViewController
{
  ...
}
@property IBOutlet UIButton *button;
@property UIViewController *theFirstViewController;

@end 
```

确保`theFirstViewController`以某种方式设置 - 再次，请参阅[在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)。然后`switchToggled`你可以这样做：

```
- (IBAction)switchToggled
{
  theFirstViewController.button.hidden = YES;
} 
```

要记住的重要一点是，您的视图控制器不会神奇地相互了解。即使您像尝试那样使用 AppDelegate 做某事。`SecondViewController`需要参考`FirstViewController`。

# php - PHP MySQL分页结果

> ID：10543769
> 
> 赞同：0
> 
> 时间：2012-05-11T00:09:47.317
> 
> 标签：php, mysql, sql, database, pagination

我一直在摆弄分页并设法获得一个基于脚本工作的版本，php cook book 中的代码不起作用。

我工作的分页示例来自此站点： [http ://www.developphp.com/view_lesson.php?v=289](http://www.developphp.com/view_lesson.php?v=289)

我注意到有 2 个查询，首先获取总行数然后显示行，我不确定我是否应该有 2 个查询，本网站上的另一个示例也显示 2 个查询： [http ://www.phpeasystep.com/ phptu/29.html](http://www.phpeasystep.com/phptu/29.html)

对比网络和书籍中的信息，我应该使用 1 或 2 个查询来获取分页结果吗？不想再继续染别人的坏习惯所以想问问高手的感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:15:18.983

我不知道使用一个查询获取结果总数和当前结果页面的任何方法，但可以使用更简单的方法。

```
SELECT SQL_CALC_FOUND_ROWS *
FROM ...; 
```

接着

```
SELECT FOUND_ROWS(); 
```

它返回在上一个查询中找到的行数（但如果有 a 则不返回`LIMIT`）。

# mysql - 用于获取同事的 Mysql 选择查询

> ID：10543772
> 
> 赞同：0
> 
> 时间：2012-05-11T00:10:15.703
> 
> 标签：mysql, select, join

我在一些工作和一些工人之间有多对多的关系。
每个工人都有一个像年龄这样的属性。我想获得与 22 岁的工人（例如）合作的所有工作和工人，包括 22 岁的工人。

例如，如果 A 和 B 是两个从事工作 X 的工人，其中一个是 22 岁，我想要一个查询来返回 A 和 B（与 X 及其属性连接）

我有三个表：
Job
1 JobI
2 JobII

Workers：
A Smith 22
B John 21
C Jack 23

JW 关系
1 A
1 B
2 B
2 C

在这个例子中，我想要 A 和 B 的信息以及 Job I，因为 A 是 22 岁，并且在 Job I 中与 B 合作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:26:57.737

就像是

```
Select * From Workers 
join (Select Distinct WorkerID From WorkerJobs Join Workers on Worker.WorkerID = WorkerJobs.WorkerID and Worker.Age = 22) worker22 on worker22.workerid = worker.workerid
join Jobs on jobs.jobid = workerjobs.jobid
join WorkerJobs on Workerjobs.workerid = workers.workerid
and WorkerJobs.JobId = Jobs.JobID 
```

即与一个 22 岁的工人一起获得所有工作，然后加入工作和工人以获取详细信息。

任何有超过一份工作的 22 岁的人都会重复，但任何有超过一名 2 岁工人的工作也会重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:21:20.763

你的问题有点令人困惑。你想要所有 22 岁的工人的工作还是想要返回 A 和 B？我仍然会尝试回答这两个问题。

假设在您的工作表中您有 job_id,worker_id,job_description.... 并在您的工作表中说您有 worker_id,age,other description

为了获得所有年龄为 22 岁的工作和工人，请运行以下查询。

```
SELECT jobs.*,workers.* FROM jobs,workers WHERE jobs.worker_id = workers.worker_id AND workers.age=22; 
```

这将返回与 22 岁工人相关的所有工作数据和工人数据。希望这能回答您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T00:29:57.667

假设您的架构如下所示：

```
Table workers {
    id,
    age,
    ...
}
Table jobs {
    id,
    worker_id,
    ...
} 
```

要回答您的问题，您需要一个带有子查询的查询。

内部查询

```
select jobs.id 
from jobs 
left join workers on workers.id = jobs.worker_id 
where age = 22 
```

返还所有有 22 岁工人的工作。

外部查询

```
select * 
from jobs, workers 
where jobs.worker_id = workers.id 
  and jobs.id in (INNER QUERY) 
```

选择在内部查询中有工作的所有工作和工作人员。

最终结果：

```
select * 
from jobs, workers 
where jobs.worker_id = workers.id 
  and jobs.id in (select jobs.id 
                  from jobs 
                  left join workers on workers.id = jobs.worker_id 
                  where age = 22) 
```

# c - 如何编辑字符串（在 C 结构中）

> ID：10543776
> 
> 赞同：1
> 
> 时间：2012-05-11T00:10:55.090
> 
> 标签：c, string, struct

我正在模拟 C 中的继承，但我对该语言不太熟悉。下面是部分代码。Visual Studio 有一条错误消息，`emp.name=n`其中显示：

> 表达式必须是可修改的左值。

如何更改它以便可以修改它？

```
typedef struct {    
        char name[20]; 
        double salary;  
        } Employee;

Employee newEmployee(char n[], double s)
{
    Employee emp;
    emp.name=n;
    emp.salary=s;
    return emp;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T00:13:05.820

您需要将数据从复制`n`到`Employee.name`：

```
strncpy(emp.name, n, 20); 
```

但是，如果`n`不是以 NULL 结尾的，则会遇到问题。使用以下代码来保证`emp.name`它将是一个以 NULL 结尾的字符串：

```
strncpy(emp.name, n, 19);
emp.name[19] = '\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:13:27.173

您必须使用`strcpy()`或相对 ( `strncpy()`, `memmove()`, `memcpy()`, ...) 来复制 C 中的字符串。

```
strcpy(emp.name, n); 
```

这假定字符串 in`n`的长度比`name`Employee 结构中的字符串的长度短。如果不是，那你就有问题了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T00:47:19.067

其他海报正确引导您使用 strncpy。

出现有关 strcpy 与 strncpy 的评论是因为 strcpy 要求其 src 字符缓冲区为空终止，即。最后一个字符**必须**是 '\0' 字符。不遵循此约定会导致程序意外终止并出现分段错误。只是遇到这种情况就尴尬了。

您收到的错误消息指出，通过尝试*将*char[] 分配给 emp.name 您正在尝试*修改 struct 中 name 元素的地址*。无法修改内存地址；所以你的问题的确切答案是*emp.name 永远不会被修改，因为它是内存中的一个地址，你不能改变它。*

所以在你的脑海里，你想我想*修改*emp.name 为 char 数组 n 中的数据，但是 emp.name 的**地址**是不可修改的。strncpy 会将 char 数组 n 中包含的数据复制到 emp.name 地址*指向的 20 个字节中。*

我可能没有很好地解释这一点，请多问问题。其他发帖人可以更正或完善此答案。

这是学习 C 的棘手部分；学习一些汇编语言是很有用的，并记住，当你用 C 编码时，你是编写汇编程序之上的一层薄薄的 C 语言关键字，这就是为什么它闪电般快速且容易出错的原因。

# css - ">" 的可靠性如何？

> ID：10543780
> 
> 赞同：1
> 
> 时间：2012-05-11T00:11:12.727
> 
> 标签：css, cross-browser, css-selectors

该`>`字符可以与 CSS 一起使用以选择具有特定父级的元素。我在这里看到的好处是，例如，我只能将样式应用于列表的某个级别。像菜单一样 - 第一级是横向的，并且与第二级+具有不同的规则。所以我不需要担心重置 lvl 2+ 的属性

无论如何，我可以依靠`>`吗？所有浏览器都支持它并且没有错误行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T00:12:08.663

`>`IE7 及更高版本完全支持子选择器，而 IE6 及更早版本则完全不支持。当然，今天使用的所有其他主要浏览器的所有版本也完全支持它。

所有 CSS2.1 选择器都受到 IE8 及更高版本的良好支持，因此[您现在可以使用它们](http://caniuse.com/css-sel2)，除非您正在编写需要迎合 IE6 的遗留代码，在这种情况下尽可能避免使用它们。

SitePoint[参考](http://reference.sitepoint.com/css/childselector)确实提到了一个与影响 IE7 的评论相关的模糊解析错误，但它只会在评论存在时破坏选择器。您通常不会将注释放在选择器的中间，除非您这样做是出于 hack，因此您不必担心这个错误。

相关：[CSS 子选择器是 W3C 标准吗？](https://stackoverflow.com/questions/4831134/are-css-child-selectors-a-w3c-standard)（当然是！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T00:12:20.740

它是 CSS2 标准的一部分：[http](http://www.w3.org/TR/CSS2/selector.html#child-selectors) ://www.w3.org/TR/CSS2/selector.html#child-selectors ，所以现代浏览器应该支持它。

根据这个[quirksmode.org](http://www.quirksmode.org/css/contents.html)，主要浏览器中只有 IE6 和更早版本没有。我只看到在非常特殊的情况下使用 IE6（例如不接收软件补丁的专用机器）。

# jquery - jQ 图像选择器的问题

> ID：10543781
> 
> 赞同：0
> 
> 时间：2012-05-11T00:11:19.713
> 
> 标签：jquery, html, css, jquery-ui

我在这里遇到了类似的问题： 我解决[的特定类的 jQuery 函数。](https://stackoverflow.com/questions/10463971/jquery-function-for-specific-class)但是它困扰了我，因为它有太多的 div 并且看起来不是很好，所以我重写了我的 HTML 代码并重写了选择器脚本。现在脚本可以很好地加载图像（它将它们全部淡入）但选择根本不起作用。我尝试使用最接近和兄弟姐妹功能，但无济于事。

我该如何解决这个问题？您可以在以下网址找到相关页面：http: [//baldino.rs/baby-program/](http://baldino.rs/baby-program/)

提前感谢

```
$(document).ready(function(){

var picture = $('.post-cipela').each(function(index, element) {
$(this).find('.cipela-bg img:eq(0)').fadeIn(500);

$('.colorwrap a').click(function(){
  var index = $(this).find(".colorwrap a").index(this);
    $('.cipela-bg img').fadeOut(200);
    $('.cipela-bg img:eq('+index+')').fadeIn(500);
    });
}); 
```

EDIT-1：我修改了我的脚本。现在我遇到了一个问题，因为我的图像多次消失。我该如何解决？- 这是修改后的脚本，可以看到问题的页面在这里： [http ://baldino.rs/baby-program](http://baldino.rs/baby-program)

```
$(document).ready
(
function()
{
$(".cipela-1").fadeIn(200);
$(".colorwrap a").click
(
    function()
    {
        var item = $(this);
        var a = item.attr("rel");
        item.closest(".post-cipela").find(".cipela-1, .cipela-2, .cipela-3, .cipela-
        4").fadeOut(200);
        item.closest(".post-cipela").find("."+a).first().fadeIn(200);

    }
);
} 
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:50:53.527

你粘贴的代码被诽谤了，`});`最后你有一个额外的。

此外，您将 $('.colorwrap a') 选择器包装在`.each`函数循环中，我不确定您是否是这个意思。

此外，您在确定 this 变量的范围时遗漏了一些内容。

你的这条线`each`很好。

```
$(this).find('.cipela-bg img:eq(0)').fadeIn(500); 
```

但是然后你实例化一个点击处理程序

```
$('.colorwrap a').click(function(){
  var index = $(this).find(".colorwrap a").index(this); 
```

该处理程序中的 $(this) 指的是匹配`a`的 within `.colorwrap`。然后，您会在其下方找到另一个实例，`.colorwrap a`该实例可能不存在，因此您的选择器找不到任何东西。

如果您确实打算在每个 .each 迭代中包装此单击处理程序，则应分配`$(this)`给循环中的一个变量，并像这样在单击处理程序中使用它

```
var picture = $('.post-cipela').each(function(index, element) {
    var that =$(this);
    that.find('.cipela-bg img:eq(0)').fadeIn(500);

    $('.colorwrap a').click(function(){
        var index = that.find(".colorwrap a").index(this);
        $('.cipela-bg img').fadeOut(200);
        $('.cipela-bg img:eq('+index+')').fadeIn(500);
    });
}); 
```

# c# - 过滤 datagridview 行

> ID：10543782
> 
> 赞同：1
> 
> 时间：2012-05-11T00:11:22.697
> 
> 标签：c#, text, datagridview, filter

您好，我有一个 datagridview 已经添加了很多很多行。我还有一个文本框，如果它们不匹配，我想从 datagridview 行中过滤掉它们。我想以某种方式将文本框连接到一列以显示和隐藏行。该表使用以下内容填充：

```
public void readExcelFile()
{
    string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0; Data Source = " + Properties.Settings.Default.excelFilePath + "; Extended Properties = \"Excel 8.0;HDR=Yes;IMEX=1\";";

    string query = String.Format("select * from [{0}$]", "Batch Export");

    OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);

    DataSet dataSet = new DataSet();
    dataAdapter.Fill(dataSet);

    resultsGrid.DataSource = dataSet.Tables[0];                
} 
```

现在，当我开始在文本框中输入“John”并且第一列是“Name”时，我想要名称单元格不以“J”开头的所有行，然后是“Jo”等。当我删除字符时，我希望行回来。这可能吗？在对数据库使用 SQL 查询之前，我已经这样做了，但是这个来源是不同的。而且我必须在每个 textChanged 事件上清除表格。这里大约有 20k 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:58:40.487

在将 Table 分配给 resultGrid.DataSource 之前，您可以使用 DataTable.Select：

```
var strExpr = "CustomerFirstName = 'John' AND OrderCount > 2";
var strSort = "OrderCount DESC";

// Use the Select method to find all rows matching the filter.
foundRows = ds.Table[0].Select(strExpr, strSort); 
```

或者您可以使用数据视图：

```
ds.Tables[0].DefaultView.RowFilter = strExpr; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:17:11.407

我们可以使用绑定源来过滤数据。

```
 private BindingSource dashBoardBindingSource = new BindingSource();
 dashBoardBindingSource.DataSource= dataSet.Tables[0]; 
 resultsGrid.DataSource=dashBoardBindingSource;

 string filterCriteria = "CustomerFirstName={0}";
 dashBoardBindingSource.Filter=string.Format(CultureInfo.CurrentCulture, filterCriteria, textboxName.text); 
```

# .htaccess - RewriteCond HTTP:Accept-Language 所有子文件夹

> ID：10543784
> 
> 赞同：0
> 
> 时间：2012-05-11T00:11:29.593
> 
> 标签：.htaccess, redirect

目前我已将以下代码添加到 .htaccess 中。此代码检测浏览器语言并将西班牙访问者转发到 /es/

当使用西班牙语的用户访问 mysite.com 时，他们会自动发送到 mysite.com/es/

```
RewriteEngine On
RewriteCond %{HTTP:Accept-Language} ^(es.*) [NC]
RewriteCond %{REQUEST_URI} !(^/images/.*)  
RewriteCond %{REQUEST_URI} !(^/es/.*) [NC]
RewriteRule ^(.*)$ /es/$1 [L,R=301] 
```

这工作正常，但不适用于子文件夹。例如，如果同一用户访问 mysite.com/page/ 他们不会发送到 mysite.com/es/page/

如何更改代码以便适用于所有子文件夹？

就像 www 重定向一样

```
rewriteCond %{HTTP_HOST} !site.com
rewriteRule ^(.*)$ site.com/$1 [R=301,L] 
```

如果您访问 site.com/page/test/ 您将被自动重定向到 www.site.com/page/test/ 但是这样的东西似乎不适用于从 www.site.com/page/test 去的语言/ 到 www.site.com/es/page/test/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T02:35:53.843

如果您的布局是包含内容的子文件夹，而不是 Web 应用程序，那么您将需要在每个子文件夹中都有这样的 .htaccess 文件。放置在 es 目录中的相同文件应该可以解决问题。

至于区分西班牙-西班牙和秘鲁-西班牙，可以试试es-ES和es-PE。

# c# - 如果其中一个停止，如何取消对等长时间运行的任务

> ID：10543790
> 
> 赞同：1
> 
> 时间：2012-05-11T00:12:02.890
> 
> 标签：c#, .net, task-parallel-library

我有几个长期运行的任务对象。我希望他们都无限期地继续运行。其中一项任务的工作是自我监控系统。如果在正常操作条件之外发生某些事情，我希望它能够停止运行并以某种方式发出其他任务也停止运行的信号。仅使用 Task.WaitAny()，停止一个线程而其他线程将停止就足够了，还是那些其他任务会无限期地继续运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T00:15:42.633

除非您明确处理取消，否则这些任务将继续运行。

处理此问题的首选方法是使用 .NET 4 中新的[协作取消支持](http://msdn.microsoft.com/en-us/library/dd997364.aspx)。

正常的方法是在任务失败/故障时对运行的每个任务进行延续。然后它可能`CancelationTokenSource`会被取消。每个任务可以偶尔检查它是否应该因为请求取消而中止。

# sql - 在没有游标的情况下总结 SQL 中的层级

> ID：10543799
> 
> 赞同：0
> 
> 时间：2012-05-11T00:13:13.100
> 
> 标签：sql, sql-server-2008, tsql

我有一个如下所示的 SQL 服务器表：

```
CREATE TABLE foo(
PlayerID BIGINT NOT NULL
UpdatedAt DATETIME NOT NULL
CurrencyBal MONEY NOT NULL) 
```

该表包含 30 条记录：

```
1,2012-05-10,300
2,2012-05-10,1100
3,2012-05-10,10000 
```

我想创建一个查询，该查询将返回玩家总数、查询运行日期以及货币层的细分，因此输出应该始终只有 1 行，如下所示：

```
Date: 2012-05-10
Total Players: 3
100 - 900 : 1
999 - 1500 : 1
9000 - MAX : 1 
```

我知道如何用光标对层级进行总计，我只是想知道是否有办法在没有光标的情况下做到这一点。当我尝试使用 SELECT CASE 时，每条记录得到 1 行。我试过按 UpdatedAt 分组并返回相同的东西。任何帮助，将不胜感激。

将解决方案 1 与以下查询一起使用：

```
SELECT 
'0 - 10000' = COUNT(CASE WHEN CreditBalance >= 0 AND CreditBalance <= 10000  THEN 1 ELSE 0 END), 
'10001 - 20000' = COUNT(CASE WHEN CreditBalance >= 10001 AND CreditBalance <= 20000 THEN 1 ELSE 0 END),
'20001 - 30000' = COUNT(CASE WHEN CreditBalance >= 20001 AND SUM(CreditBalance) <= 30000 THEN 1 ELSE 0 END), 
'30001 - 60000' = COUNT(CASE WHEN CreditBalance >= 30001 AND SUM(CreditBalance) <= 60000 THEN 1 ELSE 0 END),
'60001 - 100000' = COUNT(CASE WHEN CreditBalance >= 60001 AND SUM(CreditBalance) <= 100000 THEN 1 ELSE 0 END),
'100001 - 150000' = COUNT(CASE WHEN CreditBalance >= 100001 AND SUM(CreditBalance) <= 150000 THEN 1 ELSE 0 END), 
'150001 - 200000' = COUNT(CASE WHEN CreditBalance >= 150001 AND SUM(CreditBalance) <= 200000 THEN 1 ELSE 0 END), 
'200001 - 500000' = COUNT(CASE WHEN CreditBalance >= 200001 AND SUM(CreditBalance) <= 500000 THEN 1 ELSE 0 END),
'500001 - 1000000' = COUNT(CASE WHEN CreditBalance >= 500001 AND SUM(CreditBalance) <= 1000000 THEN 1 ELSE 0 END),
'1000001 - Max' = COUNT(CASE WHEN CreditBalance >= 1000001 THEN 1 ELSE 0 END),
CONVERT(DATE,LastUpdateDate) AS [Day],
SUM(CreditBalance) AS TotalDailyCurrency, 
COUNT(PlayerID) AS DailyActiveUsers,
AVG(CreditBalance) AS AverageCreditsPerMAU
FROM dbo.PlayerBalances
WHERE CONVERT(DATE,LastUpdateDate) = CONVERT(DATE,GETUTCDATE())
GROUP BY LastUpdateDate 
```

我得到：消息 130，级别 15，状态 1，第 7 行无法对包含聚合或子查询的表达式执行聚合函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:59:04.017

有另一种选择和小提琴给你。让我知道你的想法。

[http://sqlfiddle.com/#!3/eed70/2](http://sqlfiddle.com/#!3/eed70/2)

和你的另一种选择，这可能会更好地扩展我一开始并没有注意到你有多少案例。

[http://sqlfiddle.com/#!3/eed70/4](http://sqlfiddle.com/#!3/eed70/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:26:31.673

看起来我所要做的就是从 case 语句中删除 ELSE 0 。最终解决方案如下所示：

```
SELECT  COUNT(CASE WHEN CreditBalance >= 0
                    AND CreditBalance <= 10000 THEN 1
          END) AS '0-10000' ,
COUNT(CASE WHEN CreditBalance >= 10001
                    AND CreditBalance <= 20000 THEN 1
          END) AS '10001 - 20000' ,
COUNT(CASE WHEN CreditBalance >= 20001
                    AND CreditBalance <= 30000 THEN 1
          END) AS '20001 - 30000' ,
COUNT(CASE WHEN CreditBalance >= 30001
                    AND CreditBalance <= 60000 THEN 1
          END) AS '30001 - 60000' ,
COUNT(CASE WHEN CreditBalance >= 60001
                    AND CreditBalance <= 100000 THEN 1
          END) AS '60001 - 100000' ,
COUNT(CASE WHEN CreditBalance >= 100001
                    AND CreditBalance <= 150000 THEN 1
          END) AS '100001 - 150000' ,
COUNT(CASE WHEN CreditBalance >= 150001
                    AND CreditBalance <= 200000 THEN 1
          END) AS '150001 - 200000' ,
COUNT(CASE WHEN CreditBalance >= 200001
                    AND CreditBalance <= 500000 THEN 1
          END) AS '200001 - 500000' ,
COUNT(CASE WHEN CreditBalance >= 500001
                    AND CreditBalance <= 1000000 THEN 1
          END) AS '500001 - 1000000' ,
COUNT(CASE WHEN CreditBalance >= 1000001 THEN 1
          END) AS '1000001 - MAX'
FROM    dbo.PlayerBalances
GROUP BY CONVERT(DATE, LastUpdateDate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T00:18:42.777

```
SELECT COUNT(CASE WHEN CurrencyBal >= x_1 and CurrencyBal < x_2 THEN 1 ELSE END),
      COUNT(CASE WHEN CurrencyBal >= x_2 and CurrencyBal < x_3 THEN 1 ELSE END)
     ...., 
     UpdatedAt,
     Count(*)
     FROM Table t
     WHERE UpdatedAt = <yourdate>
     GROUP BY UpdatedAt 
```

或者如果您想在表层中定义层级（min_range，max_range），这是一种更好的方法

```
SELECT COUNT(CASE WHEN CurrencyBal >= min_range and CurrencyBal < max_range THEN 1 ELSE END),
     min_range,
     UpdatedAt
     FROM Table t INNER JOIN Tier ti ON CurrencyBal >= min_range and CurrencyBal < max_range 
     WHERE UpdatedAt = <yourdate>
     GROUP BY min_range,UpdatedAt 
```

# mysql - MySQL 在大型数据集上的匹配查询性能

> ID：10543801
> 
> 赞同：0
> 
> 时间：2012-05-11T00:13:24.187
> 
> 标签：mysql

有没有人有查询表格的经验

```
select * from TableX where columnY = 'Z' limit some_limits 
```

例如：

```
select * from Topics where category_id = 100 
```

这里 columnY 被索引，但它不是主键。ColumnY = Z 可能会返回不可预测的行数（从零到几千）。

我只是想知道数据集相当大的情况，例如 TableX 中超过 1000 万个项目。这种查询的性能如何？

关于性能的一些细节应该很好（例如，我的意思是特定的大 O 分析）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:29:08.620

这取决于找到的记录。如果您的查询返回大量记录，则加载浏览器可能需要一些时间。甚至更大的回报可能会使您的浏览器无响应。但这就是您执行查询的方式。对于此类问题，更好的解决方案可能是像使用相关限制一样限制查询。此外，除了手动限制之外，您还可以将限制与循环一起使用，直到某个索引，然后在编程的情况下再次从以下索引开始。我用编程的上下文来回答。希望这能回答你的问题

# javascript - 寻找图像 onLoad 的替代品

> ID：10543803
> 
> 赞同：2
> 
> 时间：2012-05-11T00:13:27.827
> 
> 标签：javascript, events, onload, dom-events

> **可能重复：**
> [jQuery 或 JavaScript：确定图像何时完成加载](https://stackoverflow.com/questions/4494437/jquery-or-javascript-determine-when-image-finished-loading)

问题是已知的，但我找不到任何简单的解决方案：

```
var img = new Image();

img.onLoad = function() {
  console.log("load");         // this event doesn't fire
};

img.src = "img/domino/21.png";

console.log(img.complete);     // false

setTimeout(function() {
  console.log(img.complete);   // sometimes true, sometimes false
}, 10); 
```

我一直在寻找 onComplete 事件的实现，但我找不到任何东西。你会帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T00:20:36.170

事件处理程序属性的正确拼写是全部小写`.onload`，而不是`.onLoad`.

```
var img = new Image();

img.onload = function() {
  console.log("load");         // works every time
};

img.src = "img/domino/21.png"; 
```

Javascript 区分大小写，因此您必须为所有对象属性使用正确的大小写。

* * *

除此之外的替代方案`.onload`是使用：

```
img.addEventListener("load", function(e) {...}); 
```

或（在旧版本的 IE 中）：

```
img.attachEvent("onload", function(e) {...}); 
```

如果您只使用一个事件处理程序并且您没有使用已经为您抽象事件处理程序的跨平台库，那么使用`.onload`是最简单的。

而且，这是添加事件处理程序的简单跨浏览器方法：

```
// add event cross browser
function addEvent(elem, event, fn) {
    if (elem.addEventListener) {
        elem.addEventListener(event, fn, false);
    } else {
        elem.attachEvent("on" + event, function() {
            // set the this pointer same as addEventListener when fn is called
            return(fn.call(elem, window.event));   
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T00:16:58.217

```
var img = new Image();
img.onload = function() {
    console.log("load");
};
img.src = "img/domino/21.png";
console.log(img.complete);     // false
setTimeout(function() {
  console.log(img.complete);   // sometimes true, sometimes false
}, 10); 
```

在 Chrome、Firefox 和 Safari 中

```
var img = new Image();
img.addEventListener('load',function() {
    console.log("load");
});
img.src = "img/domino/21.png";
console.log(img.complete);     // false
setTimeout(function() {
  console.log(img.complete);   // sometimes true, sometimes false
}, 10); 
```

或者在 IE 或 Opera 中

```
var img = new Image();
img.attachEvent('onload',function() {
    console.log("load");
});
img.src = "img/domino/21.png";
console.log(img.complete);     // false
setTimeout(function() {
  console.log(img.complete);   // sometimes true, sometimes false
}, 10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T00:15:56.367

你确定你的图像`img/domino/21.png`存在吗？以下代码适用于[Firebug](http://getfirebug.com/)的控制台。

```
var img = new Image();

var onload = function() {
    console.log('load');
}

img.onload = onload;

img.src = "http://img.gawkerassets.com/img/17m7otdiw6n8fjpg/original.jpg?" + (new Date()).getMilliseconds(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T00:16:24.160

如果你可以使用 jQuery，它可以很简单：

```
$('img').load(foo).error(foo); 
```

或使用香草 javascript：

```
img.onload = img.onerror = foo; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T00:21:53.710

```
var img = new Image();

//blah blah...

img.addEventListener("load",function() {
    console.log("Loaded!");
}); 
```

# sql - 导入表和存储过程

> ID：10543811
> 
> 赞同：0
> 
> 时间：2012-05-11T00:14:37.797
> 
> 标签：sql, import, sql-server-2008-r2

我正在尝试将 SQL Server 2008 R2 中的表 [大约 40 个] 和存储过程 [大约 120+] 从开发服务器导出到产品服务器。

我创建了一个`.sql`文件 [右键单击 SSMS 中的数据库，选择`Tasks -> Generate Scripts`]，但是当我尝试将表和存储过程导入产品服务器时 [右键单击 SSMS 中的数据库，`New Query`然后复制内容] 它是给我一长串错误

大多

> `There is already an object named 'tblMyTable' in the database`
> `Violation of PRIMARY KEY constraint 'PK_MyTable'. Cannot insert duplicate key in object 'dbo.tblMyTable'`

知道我做错了什么或应该做什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T01:15:11.713

您当前技术的问题是假设您的目标是一个空数据库。因此，它将重新插入所有内容，而不会尝试合并数据，这就是导致重复主键的原因。如果您使用 Management Studio，您必须自己完成所有数据合并。

我的建议是首先查看 redgate 它不是免费的，但您将一直保存它是值得的。您将需要同时使用 SQL 比较和数据比较 ( [http://www.red-gate.com/products/sql-development/sql-data-compare/](http://www.red-gate.com/products/sql-development/sql-data-compare/) )。

另一种选择是使用 Visual Studio 2010 高级版（如果有的话）（[http://msdn.microsoft.com/en-us/library/aa833435.aspx](http://msdn.microsoft.com/en-us/library/aa833435.aspx)和[http://msdn.microsoft.com/en-us/library/ dd193261.aspx](http://msdn.microsoft.com/en-us/library/dd193261.aspx)）。这提供了数据比较和模式比较选项。它不如redgate，但我发现它大部分时间都有效。

如果您正在寻找免费的替代品，请查看此堆栈帖子[https://stackoverflow.com/questions/377388/are-there-any-free-alternatives-to-red-gates-tools-like-sql-compare](https://stackoverflow.com/questions/377388/are-there-any-free-alternatives-to-red-gates-tools-like-sql-compare)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T01:23:58.383

如果您要将整个数据库导入到生产环境中，您还不如通过替换来恢复生产数据库。

120 个 SP 和 20 个表似乎是整个数据库。所以应该用替换来恢复。

# jquery - 用文字制作“波浪”效果，需要修复bug

> ID：10543812
> 
> 赞同：0
> 
> 时间：2012-05-11T00:14:51.650
> 
> 标签：jquery, wave

[这就是我所做](http://jsbin.com/ezuzep/5)的。
如您所见，当您快速将鼠标悬停在文本上时，会出现非常混乱的情况。我希望“波浪”效果不会在第二次立即悬停后搞砸，只有在“波浪”效果可以再次完成之后。
提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:34:13.427

[http://jsbin.com/aqorip/3/](http://jsbin.com/aqorip/3/)

您应该添加`running`在动画处理时必须为真的变量。如果这个变量为真，我们将不会开始新的动画。动画结束后会调用动画的回调。我们可以检查它是否是最后一个字母，`running`如果是，则设置为 true。

```
$(function() {
  $('h1').lettering();
  $('h1 span').css('position','relative');
  var running = false;
  $('h1').hover(function(){
    if (running) return;
    running = true;
    var childs = $(this).children("span");
    childs.each(function(i){
      $(this).delay(i*50).animate({ top:'-10px' }, 100, function(){
        $(this).animate({top: 0}, function() {
          if ($(this).is(childs.last())) {
            running = false;
          }
        });
      });
    });
    setTimeout(function() {
      running = false;      
    }, children.count * 150);
  }, function(){
    $(this).children('span').animate({ top: 0 }, 100);
  });
}); 
```

请注意，您有未使用的变量`i`。你不应该声明它，因为你有`i`一个函数的参数。所以首先`i`在你的代码后面会隐藏参数`i`。

# html - 需要帮助在 HTML/CSS 中复制这个相当简单的框效果

> ID：10543813
> 
> 赞同：0
> 
> 时间：2012-05-11T00:14:52.367
> 
> 标签：html, css

我试图复制边缘使用的评级框的基本效果（你可以在这里看到它：http [://www.theverge.com/2012/5/9/3002183/airplay-speaker-review-iphone](http://www.theverge.com/2012/5/9/3002183/airplay-speaker-review-iphone)底部），但我的文本对齐一直存在问题。现在我有这个：

```
 <div class="product-score-box">
                <div class="score"> 
                    <span class="totalscore">
                        <?php echo aff_the_rating();?>
                    </span>
                    <span class="ourscore">Our Score</span> 
                </div>
                <a href="#" class="product-score-cta">Leave Review</a>
            </div> 
```

CSS：

```
 .product-score-cta { right:0; left: 0; bottom:5px; color:white;}
            .ourscore {bottom:8px;}
            .totalscore {top:10px; font-size:70px; line-height:70px;}
            .ourscore,.totalscore,.product-score-cta {position:absolute;  }
            .score {
                height:115px;
                color:white;
                background:#f48b1b;
                position:relative;
                }

            .product-score-box {
                display: block;
                position: absolute;
                top:20px;
                right:10px;
                color: white;
                font-family: 'DINCond-MediumRegular';
                background: black;
                text-align: center;
                z-index: 20;
                overflow: hidden;
                font-size: 16px;
                line-height: 100%;
                width:130px;
                height:140px;
                } 
```

在 Firefox 上，.score 中的文本没有与中心对齐，而在 Chrome 中，它的对齐方式很奇怪（好像它是合理的？或其他东西）。我在绝对定位方面绝对糟糕！如果有人可以帮助我获得类似的效果，我将永远感激不尽。

编辑：http: [//jsfiddle.net/wQrZr/](http://jsfiddle.net/wQrZr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:46:57.480

因此，鉴于您的标记和标准字体选择，我已经在多大程度上复制了它，但布局应该是正确的。

为框内的元素设置绝对宽度并给它们一个`left: 0;`似乎可以直接完成，并且在离开评论元素中添加了一些额外的样式使其更接近边缘

*   [Jsfiddle 示例](http://jsfiddle.net/mikeymagic/8qDsw/1/)

的CSS：

```
* { font-family: Tahoma; }   

.product-score-cta { right:0; left: 0; bottom:5px; font-size: 14px; text-decoration: none; color: #EEE;}
            .ourscore {bottom:12px; font-size: 18px; font-style: italic;}
            .totalscore {top:10px; font-size:70px; line-height:70px;width:130px; position: absolute;}
            .ourscore,.totalscore,.product-score-cta {position:absolute; width: 130px; left: 0px;}
        .score {
            height:115px;
            color:white;
            background:#f48b1b;
            position:relative;
            }

        .product-score-box {
            display: block;
            position: absolute;
            top:20px;
            right:10px;
            color: white;
            font-family: 'DINCond-MediumRegular';
            background: black;
            text-align: center;
            z-index: 20;
            overflow: hidden;
            font-size: 16px;
            line-height: 100%;
            width:130px;
            height:140px;
            }   ​ 
```

**参考：**

*   [css定位](http://webdesign.about.com/od/advancedcss/a/aa061307.htm) ​</li>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T01:46:33.523

1) 移除 .totalscore 和 .ourscore 的绝对定位 2) 相对定位得分 3) 绝对定位“ourscore”标签

这是：http: [//jsfiddle.net/hammerbrostime/PGKNU/](http://jsfiddle.net/hammerbrostime/PGKNU/)

# c - 为什么我的程序执行后不输出信息

> ID：10543816
> 
> 赞同：0
> 
> 时间：2012-05-11T00:15:05.677
> 
> 标签：c, file-io

我目前正在用 C 语言编写一个日志解析程序，在几个人的推荐下，我决定用 fgets 和 scanf 的组合替换 fscanf，而不是像以前那样返回日志文件的最后一行，程序只会产生一个空白行然后退出，我对C相对较新（几周前开始自学）所以我可能只是忽略了一些愚蠢的错误，但如果有人能帮助我解决这个问题，我将不胜感激它，谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define _GNU_SOURCE
void main(int argc, char *argv[], char *envp[])
{
  FILE *fd;
  char *name;
  name = getenv("MCEXEC_PLAYERNAME");
  char *filename;
  filename = malloc(sizeof "/home/minecraft/freedonia/playerdata/deathlog-.txt" - 1 +     strlen(name) + 1);
  if (!filename) exit(EXIT_FAILURE);
  sprintf(filename,"/home/minecraft/freedonia/playerdata/deathlog-%s.txt",name);
  char *buff;
  buff = malloc(1024);
  char *finbuff;
  finbuff = malloc(1024);
  if ((fd = fopen(filename, "r")) != NULL)
  {
    fseek(fd, 0, SEEK_SET);

    while(!feof(fd))
  {
      memset(buff, 0x00, 1024);
      memset(finbuff, 0x00, 1024);
     // fscanf(fd, "%[^\n]\n", buff);
      fgets(buff, 1024, fd);
      sscanf(buff, "%[^\n]\n", finbuff);
   }
    printf("%s\n", finbuff);
  }
  else
  printf( "fail" );
} 
```

对于有效的版本，它几乎只是 while 循环中被注释掉的部分，以及 finbuff 不包含在程序中

```
 while(!feof(fd))
    {
      memset(buff, 0x00, 1024);
      fscanf(fd, "%[^\n]\n", buff);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T04:28:00.163

如果您只想坚持使用当前代码，请检查此行一次

memset(buff, 0x00, 1024);

我认为这里有一些问题，如果你可以将“buff”定义为静态分配而不是动态分配，那么试试（char buff[256] = {0}）。

或者

如果你可以选择这个来获得最后一行：

```
int main(){
const char *file = "in";
FILE *in = fopen(file, "r");
if (in != NULL){
int bytes = 0;
int nl = 0;
while(fseek(in, --bytes, SEEK_END) == 0){
if (fgetc(in) == '\n' && ++nl > 2){
break;
}
}
char line[ARG_MAX];
fgets(line, sizeof line, in);
fputs(line, stdout);
fclose(in);
}
return 0;
} 
```

希望这会有所帮助。

# c# - 在 ASP.NET 中压缩文件而不使用免费的第三方解决方案

> ID：10543824
> 
> 赞同：4
> 
> 时间：2012-05-11T00:16:17.827
> 
> 标签：c#, asp.net, visual-studio-2010, zip

C# 是否支持在不使用免费的第三方解决方案的情况下压缩多个文件。我知道有一些第三方解决方案，如 DotNet zip、SharpZipLib 等......这样做了，但我想创建一个不使用上述任何一个的解决方案。

我看到使用 J# (vjslib.dll) 我们可以使用 GZip，但 J# 目前已停用并且不包含在 VS2010 中。

你能指出这个实现的正确位置吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T00:30:04.287

[System.IO.Compression](http://msdn.microsoft.com/en-us/library/3z72378a)总是有一个名为[GZipStream](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream%28v=vs.100%29)的类。编写真正的 *.zip 文件的能力只会在 .NET 4.5 中添加（[请参阅 System.IO.Compression in 4.5](http://msdn.microsoft.com/en-us/library/3z72378a%28v=vs.110%29)）。

因此，现在您可以尝试编写自己的实现（不推荐）或使用第三方组件。根据组件的许可证，您可能能够将其代码复制到您的项目中（使组件的补丁有点麻烦）。例如，GPL 仅要求您在分发衍生作品时发布源代码。但是对于一个实际上没有提供代码或二进制文件的 Web 应用程序，使用 GPL 版本的库没有任何后果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T01:14:32.713

如果您在任何时候改变主意并且想要免费的第三方选项，我想这是您能得到的最好的选择。

[http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)

# ios - ios按钮无法点击 - 菜鸟问题

> ID：10543825
> 
> 赞同：0
> 
> 时间：2012-05-11T00:16:19.823
> 
> 标签：ios, xcode

所以我是一名新的 ios 开发人员，正在开发我的第一个应用程序。我有一个统一的 3d 游戏，我导出为一个 xcode 项目，我的目标是在访问游戏之前添加一个 ios 菜单。我只想说，我正在为此苦苦挣扎。我看过一些斯坦福教程（太棒了！），并阅读了一些我认为适用的教程，但我被卡住了。这是我所拥有的：

我劫持了 main.m 文件来加载 myAppDelegate（而不是 Unity 制作的那个）。myAppDelegate 然后加载 myViewController 的一个实例并将其作为子视图添加到窗口中。在 myViewController 中，我有：

```
-(IBAction) displayView:(id) sender{
 UIAlertView *alert = [[UIAlertView alloc] 
 initWithTitle:@"Button Pressed" 
 message:@"You have pressed the Button view."
 delegate:nil
 cancelButtonTitle:@"OK" 
 otherButtonTitles:nil];
 [alert show];
 [alert release];   
} 
```

我只是想在单击按钮时发出警报。我在 .h 文件中定义了函数`-(IBAction) displayView:(id) sender;`

在事物的视图方面，我在我的 plist 文件中添加了一个条目，我将 Main Nib File Base Name 设置为 MainWindow。

然后在 Interface Builder 的 MainWindow.xib 中，我从库中添加了 myAppDelegate 和 myViewController。对于 myAppDelegate，我添加了 myViewController 作为 viewController 委托，window 是 Window，引用 outlet 是文件所有者。对于 myViewController，引用出口是 myAppDelegate。（说实话，这部分让我很困惑。它对我的 php web 应用程序背景没有太多的推论。）

在 myViewController.xib 中，文件所有者是 myViewController。收到的操作显示了从我的函数 (displayView) 到按钮的链接。然后对于视图，我将其打开，将其涂成红色并用一般的 ios 小部件（按钮、日期选择器等）乱扔垃圾。我连接了其中一个按钮以在 displayView 内部进行修饰。

所以这就是我所做的一切，我在我的设备上加载了应用程序，我可以准确地看到我在视图中布置的内容。但没有什么是棘手的。我希望点击我的按钮来显示上面定义的警报。但这不会发生。事实上什么也没发生。所以我怀疑所有这些的挂钩是不正确的。但是按钮甚至没有按下？当我点击它时，我希望白色按钮闪烁蓝色（向下状态）。此外，我希望日期选择器（未连接到功能）在我与之交互时旋转。

就好像我的触摸没有被发送到视图。有谁知道我可能做错了什么？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-01T22:50:32.143

试试这个代码：

```
-(IBAction) displayView:(id) sender{

UIAlertView * myAlert;

myAlert = [[UIAlertView alloc]initWithTitle:@"Button Pressed" 
  message:@"You have pressed the Button view."
  delegate:nil
  cancelButtonTitle:@"OK" 
  otherButtonTitles:nil];

 [myAlert show]; 
 /* And make sure to have this action connected to your button in xib           
 file */

} 
```

# actionscript-3 - 关于删除动态添加的孩子的一些问题

> ID：10543838
> 
> 赞同：0
> 
> 时间：2012-05-11T00:19:51.710
> 
> 标签：actionscript-3, flash

我有这个函数，我想在其中获取一个影片剪辑（函数目标）并将其更改为另一个。问题是它显然会在加载新剪辑之前删除影片剪辑。

```
var changePeca:Loader = new Loader;
var changeLoad:URLRequest = new URLRequest(e.target.name.substr(0,4)+".png");
changePeca.load(changeLoad);

e.target.removeChildAt(0);
e.target.addChild(changePeca); 
```

我知道我必须使用这个`Event.COMPLETE`东西，但是我怎么说要删除哪个影片剪辑，因为我不能再使用`e.target`了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:19:26.120

> “问题在于它显然会在加载新剪辑之前删除影片剪辑。”

因为你的代码说这样做！:) 您需要添加事件侦听器来检查是否已加载内容。

```
private var holderMC:Sprite;
private var imageLoader:Loader;

private  function load(e:Event):void
{
    holderMC = e.target as Sprite // or something else you have there, just store it.
    imageLoader = new Loader ();
    imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, handleLoadComplete)
    imageLoader.load(new URLRequest(e.target.name.substr(0, 4) + ".png"));
}

private function handleLoadComplete(e:Event):void 
{
    if(holderMC.numChildren > 0)
        holderMC.removeChildAt(0);

    holderMC.addChild(imageLoader.content)
} 
```

# ruby - 有没有更通用的方式来声明这个数组？

> ID：10543840
> 
> 赞同：2
> 
> 时间：2012-05-11T00:20:19.657
> 
> 标签：ruby, arrays

我目前正在学习 Ruby，我看到了这个声明：

```
 the_count = [1, 2, 3, 4, 5] 
```

但是，我觉得有一种更聪明的方法可以用预先存在的函数声明这个数组。我想知道这个特定数组是否有一个术语，其内容随着其索引上升 1 而上升 1。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T00:21:24.847

使用范围。

```
the_count = [*1..5] 
```

...或者...

```
the_count = (1..5).to_a 
```

...或者...

```
the_count = *(1..5) 
```

（感谢[Meagar](https://stackoverflow.com/users/229044/meagar)。）

# iphone - 将减号按钮添加到 uikeyboardtypenumpad

> ID：10543848
> 
> 赞同：0
> 
> 时间：2012-05-11T00:21:34.740
> 
> 标签：iphone, keyboard, ios5.1, uikeyboardtype

我正在尝试使用附件视图向 UIKeyboardTypeNumPad 添加减号按钮。我的问题是我希望它在键盘上（左侧到“0”键）。

```
- (UIView *)inputAccessoryView {
if (!inputAccessoryView) {
        CGRect accessFrame = CGRectMake(0, 219, 106, 53);
        inputAccessoryView = [[UIView alloc] initWithFrame:accessFrame];
        inputAccessoryView.backgroundColor = [UIColor blueColor];
        UIButton *compButton = [UIButton buttonWithType:UIButtonTypeCustom];
        compButton.frame = CGRectMake(0, 219, 106, 53);
        [compButton setTitle: @"Word" forState:UIControlStateNormal];
        [compButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        [compButton addTarget:self action:@selector(minusButtonTouched:)
         forControlEvents:UIControlEventTouchUpInside];
        [inputAccessoryView addSubview:compButton];
    }
return inputAccessoryView;
} 
```

我可以使用键盘黑客来做到这一点，但我担心苹果可能会拒绝我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T01:16:22.407

这种类型的键盘黑客可能会让您的应用程序被 Apple 拒绝。如果您需要额外的按键，最好设计整个键盘，而不是在系统键盘上添加一个按钮。这将更容易实现并且看起来很整洁。

例如，如果您希望用户输入数值和一些特殊字符（如 + 或 -），您可以设计一个只有数字和这些特殊字符的新键盘。

资料来源：appstore 上的众多应用程序（包括我的）。

# javascript - jQuery 产品过滤器使用复选框和 :contains() 显示/隐藏

> ID：10543854
> 
> 赞同：1
> 
> 时间：2012-05-11T00:22:52.807
> 
> 标签：javascript, jquery, hide, show-hide, contains

我正在尝试为商店组合一个简单的 jQuery 产品过滤器，该商店在一个页面上列出了一个类别的所有产品。由于商店的设置方式，这无法通过 AJAX 实现。

简而言之，该类别的所有产品都在一个页面上。他们有不同的品牌产品名称和团队名称。标记看起来像这样（最后的表格是我打算如何进行过滤器）。

```
<div id="CategoryContent">
<ul>

<li class="product">Brand1 PRODUCT1 TeamA</li>
<li class="product">Brand1 PRODUCT2 TeamB</li>
<li class="product">Brand2 PRODUCT3 TeamB</li>
<li class="product">Brand2 PRODUCT4 TeamC</li>
<li class="product">Brand3 PRODUCT5 TeamA</li>
<li class="product">Brand3 PRODUCT6 TeamD</li>
<li class="product">Brand4 PRODUCT7 TeamD</li>
<li class="product">Brand1 PRODUCT8 TeamA</li>
<li class="product">Brand1 PRODUCT9 TeamA</li>
<li class="product">Brand1 PRODUCT10 TeamB</li>
<li class="product">Brand4 PRODUCT11 TeamD</li>
<li class="product">Brand2 PRODUCT12 TeamA</li>
</ul>

<div style="clear:both;"></div>
<div class="filter">
<form id= "brandfilter" action="">
    <h2>Brands:</h2>
<input type="checkbox" name="brand" value="Brand1"/>Brand1 </br>
<input type="checkbox" name="brand" value="Brand2"/>Brand2 </br>
<input type="checkbox" name="brand" value="Brand3"/>Brand3 </br>    
<input type="checkbox" name="brand" value="Brand1"/>Brand4 </br>
</form>
<form id="teamfilter" action="">
<input type="checkbox" name="team" value="TeamA"/>TeamA </br>
<input type="checkbox" name="team" value="TeamB"/>TeamB </br>
<input type="checkbox" name="team" value="TeamC"/>TeamC </br>
<input type="checkbox" name="team" value="TeamD"/>TeamD </br>
</form> 
```

我发现这个过滤器可以按我的意愿工作。在控制台中，将 hide 替换为 show 并将 Brand1 替换为 Brand2、TeamA 等工作得很好。

```
$("#CategoryContent li").not(
$("#CategoryContent li:contains(Brand1)")
).hide(); 
```

下一步是获得一个同样有效的双过滤器：

```
$("#CategoryContent li").not(
$("#CategoryContent li:contains(Brand1):contains(TeamA)")
).hide(); 
```

我让这个工作的问题是双重的。1 用变量替换 Brand1 / Team A（因此是formids）。

第二个是在单击复选框时尝试运行脚本。如果单击任何一个并且同时单击两者，它应该可以工作（这意味着对于上面的脚本，它需要通过显示全部然后隐藏来重置）。

目前要启动它，我正在运行这个脚本，但我遇到了问题，所以我只使用了 1 个过滤器。

```
$("input:checkbox[name='brand']").click(function() {
    var brandfilter = $(this).val();
    alert (brandfilter);
    $("#CategoryContent li:contains('  + brandfilter + ')").parent().hide();
}); 
```

弹出的警报是我想要的（即 Brand1），但之后的隐藏功能不起作用，当我`alert (brandfilter)`再次在控制台中时，我得到`[object HTMLFormElement]`. 所以我认为变量没有正确存储或什么？

这是简单的工作基本脚本[http://jsfiddle.net/7gYJc/](http://jsfiddle.net/7gYJc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:00:28.633

假设您要显示与任何当前选中的框匹配的项目，您可以使用以下命令：

```
$('input:checkbox').change(showHideProducts);

function showHideProducts()
{
    var checked = $('input:checked');
    var products = $('.product');

    // If all the boxes are unchecked, show all the products.
    if (checked.length == 0)
    {
        products.show();
    }
    else
    {
        products.hide();
        checked.each
        (
            function()
            {
                $('.product:contains("' + $(this).val() + '")').show();
            }            
        );
    }
}​ 
```

**编辑：**由于您希望在未选中任何内容时显示所有框，因此只需添加一个 if (length = 0) 检查并显示其中的所有内容（见上文）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:31:08.763

我不知道问题出在哪里，但您可以尝试使用`filter()`而不是`:contains`选择器。`filter()`您可以创建自己的自定义过滤规则，因为它需要一个函数作为参数。

```
var myProducts = function (brand, team) {

    brand = brand || '';
    team = team || '';

    return $('.product').filter(function () {
        var re = new RegExp(brand + '.+' + team, 'i');
        return re.test($(this).text());
    });

};

myProducts('Brand1', 'TeamA').hide();
myProducts('Brand2').hide(); 
```

示例：http: [//jsfiddle.net/elclanrs/hYZcW/](http://jsfiddle.net/elclanrs/hYZcW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T00:53:44.557

我想出了以下方法：

从选中所有复选框开始，因为您要显示所有产品。如果用户取消选中一个复选框，那么它应该隐藏与该品牌/团队匹配的产品。

这是我的代码：

```
var $filters = $("input:checkbox[name='brand'],input:checkbox[name=team]").prop('checked', true); // start all checked
var $categoryContent = $('#CategoryContent li'); // cache this selector
$filters.click(function() {
    // if any of the checkboxes for brand or team are checked, you want to show LIs containing their value, and you want to hide all the rest.
    $categoryContent.hide();
    $filters.filter(':checked').each(function(i, el) {
        $categoryContent.filter(':contains(' + el.value + ')').show();
    });
});​ 
```

[jsFiddle 链接](http://jsfiddle.net/3WcDC/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T01:06:22.367

本周我在多项选择中遇到了同样的问题。选择器工作正常，但隐藏不起作用。我能够使用

```
.css('visibility', 'hidden'); // instead of .hide() and 
.css('visibility', ''); // instead of .show() 
```

我不明白，但它奏效了。

# matlab - 在 MATLAB 中使用 PCA 和 scatter3 可视化大型监督学习数据集

> ID：10543855
> 
> 赞同：0
> 
> 时间：2012-05-11T00:22:52.803
> 
> 标签：matlab, machine-learning, data-visualization

如何在 matlab 中使用 scatter3 plot 可视化具有大量特征的数据集。我已经使用 PCA 将其减少到三个功能，但是如何根据相应行的 y 值（或标记值）是 1 还是 0，让它以不同的颜色显示？PS PCA 返回一个 [675 x 3] 矩阵，它是数据集中的 675 个示例，具有前 3 个主成分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:42:00.100

```
% Create some data to represent the results of PCA
x = rand(675,3); y = randi([0,1],675,1);

% Plot with markers of size 10
scatter3(x(:,1),x(:,2),x(:,3),10,y) 
```

比其他地方建议的循环和 if 语句方法要容易一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:34:42.420

我的 matlab 不是最新的，但我相信你可以通过首先设置`hold on`然后循环并使用 plot3 绘制矩阵的每一行，并根据标签设置颜色来做到这一点。例如

```
hold on
for i=1:675,
    if (label == 1)
        plot3(mat(i,1), mat(i,2), mat(i,3), '-xr');
    elseif (label == 2)
        plot3(mat(i,1), mat(i,2), mat(i,3), '-og');
    elseif (label == 3)
        plot3(mat(i,1), mat(i,2), mat(i,3), '-b');
    end
end
hold off 
```

不过，这可能需要一些调整，因为我使用 Matlab 已经有一段时间了。希望能帮助到你 ：-）

# c# - 未显示嵌套的自定义 ContentControl

> ID：10543856
> 
> 赞同：1
> 
> 时间：2012-05-11T00:23:15.820
> 
> 标签：c#, wpf, contentcontrol

我有嵌套的自定义 ContentControls，我很难让内部控件在外部控件内部呈现。这是两个控件如何组成的示例：

```
<Window ...>
    <StackPanel>
        <local:Outer> <!-- Nothing in here gets displayed -->
            <local:Inner>
                <TextBlock>Fahrvergnügen</TextBlock>
            </local:Inner>
        </local:Outer>
        <local:Inner> <!-- This is displayed just fine -->
            <TextBlock>some text</TextBlock>
        </local:Inner>
    </StackPanel>
</Window> 
```

内部和外部的样式定义如下：

```
<ResourceDictionary ...>

    <Style TargetType="{x:Type local:Outer}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:Outer}">
                    <ContentPresenter />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:Inner}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:Inner}">
                    <ContentPresenter />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary> 
```

另一个问题是 Outer 使用了指向 List 的 ContentPropertyAttribute：

```
[ContentPropertyAttribute("InnerItems")]
public class Outer : ContentControl
{
    private List<Inner> innerItems = new List<Inner>();

    static Outer()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(Outer), new FrameworkPropertyMetadata(typeof(Outer)));
    }

    public List<Inner> InnerItems { get { return this.innerItems; } }
} 
```

为了完整起见，这是 Inner 的定义，这是微不足道的：

```
public class Inner : ContentControl
{
    static Inner()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(Inner), new FrameworkPropertyMetadata(typeof(Inner)));
    }
} 
```

我猜问题是 Outer 的内容不能用简单的方式显示，`<ContentPresenter />`但我不确定用什么替换它。建议？

# fuelphp - FuelPHP如何在测试中加载模型？以及如何加载和测试控制器？

> ID：10543857
> 
> 赞同：0
> 
> 时间：2012-05-11T00:23:21.857
> 
> 标签：fuelphp

如何在测试中加载模型？以及如何加载和测试控制器？

致命错误：找不到模型！

这在控制器中有效：#but 在测试中不起作用

```
<?php

# PATH app\modules\adm\classes\model

namespace Adm\Model;

class Medico extends \Orm\Model
{
  protected static  $_primary_key = array('id');
  protected static  $_table_name  = 'medico';
}

# PATH app\modules\adm\classes\controller
# WORKS!!!
namespace Adm;

use Adm\Model\Medico; # <- WORKS!!!

class Controller_Medicos extends \Controller_Template
{ 
  public function action_index()
  {
    $data['medicos'] = Medico::find()->select('id','segundo_nome')->limit(1)->get_one();

    print_r($data['medicos']->segundo_nome);

    $this->template->content = \View::forge('medicos/index');
  }
}

# app\modules\tests\adm\classes\model
# DOES NOT WORK!!

namespace Adm;
use Adm\Model\Medico; # <- Adm\Model\Medico NOT FOUND why ?
class Test_Model_Medico extends \TestCase
{
  public function test_autocomplete()
  {
    $medico = Medico::find(1);

    $this->assertEquals(2,2);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:54:02.617

当你通过 URL 请求控制器时，路由引擎会自动加载模块。

当您通过 oil 运行测试时不会发生这种情况，因此您可以在测试类的 setup 部分手动加载它：

```
\Module::load('adm'); 
```

# php - 根据 unix 时间戳和当前日期选择 7 天后的所有行

> ID：10543860
> 
> 赞同：-1
> 
> 时间：2012-05-11T00:23:44.890
> 
> 标签：php, mysql, date, time

我有一个包含以下字段的表：

```
id - int
name - int
the_date - int 
```

`the_date`是添加行时的 unix 时间戳

现在我正在尝试编写一个查询，它将选择从现在起 7 天后的所有行。我不是在谈论选择 >= 7 天后的行`time()`，我需要使用 抓取当天`time()`，然后运行一个 SELECT 来抓取在 7 天后插入的所有行`time()`。

我知道如何做到这一点，因此它在 7 天内`time()`使用简单的 >= SELECT，但我不知道如何做到这一点，因此它会选择所有 unix 时间戳在该特定日期的行（从现在起 7 天）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:39:40.833

```
$todayParts = getdate();    
$startToday = mktime(0, 0, 0, $todayParts['mon'], $todayParts['mday'], $todayParts['year']);
$sevebDaysFromNow = 60 * 60 * 24 * 7;
$seventhStart = $startToday + $sevebDaysFromNow;
$seventhEnd = $seventhStart + 60 * 60 * 24;
$sql = "SELECT * FROM <table> WHERE the_date BETWEEN $seventhStart AND $seventEnd"; 
```

这将从您现在的一天开始计算 7 天。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:43:02.597

```
SELECT * FROM `dbname1`.`test`
  WHERE 
    date(FROM_UNIXTIME(`the_date`)) = ADDDATE(DATE(NOW()), INTERVAL 7 DAY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T00:50:54.323

这里的兴趣点，

*   我使用 curdate() 来获取当前日期，而不是日期时间。
*   我添加 7 天并转换为 unix 时间，这会产生当天的开始时间
*   第二天我也这样做
*   我将 where 子句构造为 >= 或等于目标日期，但 < 是第二天的开始。这给出了完全覆盖目标日期的秒数范围。
*   我不使用列本身的任何功能。这很重要，因为如果我这样做了，mysql 将无法使用列上存在的任何索引来完成查询。

* * *

```
where the_date >= unix_timestamp(curdate() + interval 7 day)
  and the_date < unix_timestamp(curdate() + interval 8 day) 
```

# android - 为什么android会忘记一些资产？

> ID：10543861
> 
> 赞同：1
> 
> 时间：2012-05-11T00:24:27.640
> 
> 标签：android, image, loading, assets

我的问题：**实际上只有一张图片会从 assets 文件夹中加载。**我那里有所有图像，当我尝试访问其中**任何一个**时，**我都没有收到错误消息。**通过实际加载，我的意思是它在屏幕上显示图像。当我加载其他图像时，整个屏幕变白。

在每种情况下，我都会将整个图像加载到整个屏幕上。

如果我将图像作为其大小的四分之一放在屏幕中间，那么那里会有一个白色矩形。图像应该在 .apk 中，因为我没有得到游戏试图找到它的错误。但是，如果我要加载这张图片，那么一切都很好。

可以找到的一个图像是 .png 图像，我尝试将其他图像加载为 .png 但它不起作用。

关于从哪里开始的任何建议？

* * *

我通过 AssetManager.readAsset() 加载图像作为输入流，然后使用位图工厂将图像作为位图获取。之后我将位图加载到 open gl 并绘制我想要的区域。但是，问题只是我目前开始使用作品的第一张图像。eclipse生成的文件可能有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:29:27.247

一些png错误android。

只需尝试打开它们并用 gimp 保存它们。有时它可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:46:53.343

终于找到了解决办法。

结果发现，一张有效的图像的位深度为 32，而另一张图像的位深度仅为 24 位。

解决方案是在 gimp 中打开图像，添加一个 alpha 通道（使其成为 32 位），然后将其保存为 .png 文件。然后阅读详细信息，它应该说它是 32 位的。

谢了，兄弟们！:)

* * *

另请注意，图像必须是 2 的幂。例如，它必须是 1024 x 1024。

# html - 什么 DOCtype 在 IE9 中加载 Google 字体？

> ID：10543864
> 
> 赞同：0
> 
> 时间：2012-05-11T00:24:48.103
> 
> 标签：html, fonts, doctype

使用 google [webfont loader](https://developers.google.com/webfonts/docs/webfont_loader%22)字体显示在 IE9 中，但是当我在开始时在 DOCtype 声明时

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

还

!DOCTYPE html 打破它

字体不再加载。将其排除在外会破坏自动边距。目前还没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:35:20.400

`<!DOCTYPE HTML>`是我用过的所有东西了。它加载字体对我来说很好。

如果失败，请添加此元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

如果这也失败了，请检查 F12 开发人员工具控制台中的错误消息。

# javascript - 用其他数组中的对象填充数组

> ID：10543870
> 
> 赞同：3
> 
> 时间：2012-05-11T00:26:07.650
> 
> 标签：javascript

我有三个数组：

```
var arrayOne=[{obj1}, {obj2}, {ob3}];
var arrayTwo=[{obj4}, {obj5}, {obj6}];
var arrayThree=[{obj7}, {obj8}, {obj9}]; 
```

而且我需要知道如何用这些数组中的值填充新数组，如下所示：

```
var arrayFINAL=[{obj1}, {obj2}, {ob3}, {obj7}, {obj8}, {obj9}, {obj4}, {obj5}, {obj6}]; 
```

我以为是这样的：

```
var arrayFINAL = new Array(arrayOne, arrayTwo, arrayThree); 
```

但它似乎创建了一个数组，一个数组的数组而不是一个对象数组。任何人都知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T00:28:33.313

```
var combinedArray = arrayOne.concat(arrayTwo, arrayThree); 
```

[**MDN**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/concat)

> **语法**
> array.concat(value1, value2, ..., valueN)

[**现场演示**](http://jsfiddle.net/gdoron/yUDgM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:29:01.903

您正在寻找数组连接

```
arrayFinal = arrayOne.concat(arrayTwo, arrayThree); 
```

有关文档，[请参见此处](http://www.w3schools.com/jsref/jsref_concat_array.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T00:30:13.570

```
var arrayFinal = arrayOne.concat(arrayThree,arrayTwo); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T00:31:06.200

你的代码...

```
var arrayFINAL = new Array(arrayOne, arrayTwo, arrayThree); 
```

将创建一个`arrayFINAL`包含三个成员的数组，每个成员都是另一个数组，就像一个多维数组。

如果要创建一个包含所有三个的新数组，请使用`concat()`运算符...

```
var arrayFinal = arrayOne.concat(arrayTwo, arrayThree); 
```

[js小提琴](http://jsfiddle.net/nkEuu/)。

如果要将它们全部推送到原始阵列上，请使用...

```
arrayOne.push.apply(arrayOne, arrayTwo.concat(arrayThree)); 
```

[js小提琴](http://jsfiddle.net/kHhzq/)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-11T00:29:09.030

您可能对[`array_merge`PHJS](http://phpjs.org/functions/array_merge:326)感兴趣- 您正在寻找的行为与 PHP 的行为相同`array_merge`，而 PHPJS 版本在 JavaScript 中的行为相同。

# jquery - jquery ui 版的jquery mobile 翻转切换？

> ID：10543873
> 
> 赞同：3
> 
> 时间：2012-05-11T00:26:44.800
> 
> 标签：jquery, jquery-ui, jquery-mobile

是否有[jquery mobile 翻转切换](http://jquerymobile.com/test/docs/forms/switch)的 jquery ui 版本？

```
<label for="flip-a">Select slider:</label>
<select name="slider" id="flip-a" data-role="slider">
   <option value="off">Off</option>
   <option value="on">On</option>
</select> 
```

我真的很喜欢翻转开关，并且打算在我的移动网站上使用，但我也想在主网站上保持相同的外观和感觉。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:51:11.637

[jQuery-checkbox 插件](http://code.google.com/p/jquery-checkbox/)可以做到这一点，尽管它很丑陋。

# sql - JSP PreparedStatement 设置错误？在 SQL 查询中

> ID：10543874
> 
> 赞同：0
> 
> 时间：2012-05-11T00:26:51.190
> 
> 标签：sql, jsp, variables, prepared-statement

我有下面的一段代码。请参见：

```
Workload workload;
     ArrayList<Workload> workList = null;
     System.out.print("first");
     try{
         System.out.print("first");
         ConnectionFactory myFactory = ConnectionFactory.getFactory();
         Connection conn = myFactory.getConnection();
         int i = 0;

         PreparedStatement pstmt = conn.prepareStatement("SELECT * FROM WORKLOAD WHERE datestart LIKE '? %'");
         PreparedStatement pstmtMember = conn.prepareStatement("SELECT * FROM MEMBER WHERE memberid = ? and deletestatus = 0");
         PreparedStatement pstmtLeader = conn.prepareStatement("SELECT * FROM LEADER WHERE leaderid = ? and deletestatus = 0");
         pstmt.setString(i++, startdate);

         ResultSet rs = pstmt.executeQuery();

         workList = new ArrayList<Workload>(); 
```

我的代码问题是，一旦到达 pstmt.setString 部分，它就会“消失”。我放一个LIKE'的原因是什么？%' 是因为我只需要从查询中获取日期。不是整个时间戳。基本上它忽略了像“2012-04-05”这样的日期之后会发生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:32:12.003

你不能把单引号放在它周围，你只能对待 ? 就像它是一个写在过程中的变量

```
Like '@yourVar %' 
```

这相当于你写的。

仅当日期存储在字符字段中时，以下内容才有效

```
String startDateWithPercent = startdate + " %"    
PreparedStatement pstmt = conn.prepareStatement("SELECT * FROM WORKLOAD WHERE datestart LIKE ?");
pstmt.setString(i++, startDateWithPercent); 
```

如果数据库中 datestart 上的数据类型是 datetime，您将需要针对您的数据库平台（这是 sql server）执行类似的操作。只替换那个单独的 prepareStatement 行。

```
PreparedStatement pstmt = conn.prepareStatement("SELECT * FROM WORKLOAD WHERE CONVERT(datestart,DATE) LIKE ?"); 
```

# android - Android背景图片错误

> ID：10543877
> 
> 赞同：0
> 
> 时间：2012-05-11T00:27:18.590
> 
> 标签：android, android-image

在加载背景图像之前加载背景图像时出现错误。logcat 指向内存错误，但背景大小只有 17kb。

这里是事件序列中的代码

```
package com.firm.armouredassault;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.graphics.Bitmap;
import android.os.Bundle;

public class StartNewGame extends Activity {

    MyGame ourView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);    
    //setContentView(R.drawable.canvas);

        ourView = new MyGame(this);
        setContentView(ourView);

    }

} 
```

MyGame.java：

```
package com.firm.armouredassault;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.view.View;

public class MyGame extends View {

    Bitmap BTank, TShell;

    public MyGame(Context context) {
        super(context);
        // TODO Auto-generated constructor stub

    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);

        canvas.drawBitmap(BitmapFactory.decodeResource(getResources(),
                R.drawable.bluetanksm), 10, 200, null);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:32:41.910

如果调用 BitmapFactory.decodeResource 时选项不变，难道不能将结果放在字段中，并在每次调用 onDraw 时重用该值。

我不认为这是一个答案，也不会解决你的问题，但我想你的应用程序会感觉好多了，不必每次你想在屏幕上显示它时都解压缩 jpeg。

# c++ - 使用相机采集方法时无法使用 wxWidgets 加载 tiff 图像

> ID：10543878
> 
> 赞同：3
> 
> 时间：2012-05-11T00:27:28.187
> 
> 标签：c++, visual-c++, wxwidgets, tiff

我正在编写（或者更确切地说是接管）一个用 Visual C++ 编写的小型网络摄像机捕获程序。相机是 Allied Vision Technologies 的，使用的是`PvAPI.h`，而 GUI 是用`wxwidgets`. 当他们无法在 wxWidgets 下加载 tiff 图像时，该项目被放弃了。我已将问题追溯到一条线，可悲的是它是从相机捕获帧的线

```
if( !ImageWriteTiff(GCamera.Filename,pFrame) ) 
```

如果我注释掉这一行，则以下行可以正常工作

```
image = new wxStaticBitmap(mainPanel, wxID_ANY, wxBitmap("C:\\path-to\\horse.tif",
    wxBITMAP_TYPE_TIF), wxPoint(244,64)); 
```

出于某种原因，如果我使用`ImageWriteTiff`is 不允许 wxWidgets 导入 tiff。我还确保导入所有图像处理程序

```
wxInitAllImageHandlers(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T22:32:01.423

他们可能构建了不支持压缩的 TIFF 库。IIRC，默认情况下未打开。

作为测试，尝试将 TIFF 加载到像 Gimp 这样的免费绘图程序中，然后将其保存为未压缩的状态，然后查看 wx 加载代码是否有效。

如果这是问题所在，那么您需要使用 zlib 作为 tiff 库的一部分来重建 wx 库。由于这是依赖于操作系统/编译器的，你需要用谷歌搜索。另外，可能是 wx 的版本过时了。

# javascript - 他们是一种无需实际单击即可单击标签的方法吗？

> ID：10543879
> 
> 赞同：0
> 
> 时间：2012-05-11T00:27:39.230
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T00:37:53.573

在[jQuery](http://api.jquery.com/click/)中：

```
$('a.theOne').click(); 
```

[Selenium](http://seleniumhq.org/)是一个服务器端测试工具，它模拟客户端的点击以进行测试。

此外，如果 jQuery 做到了，那么可以使用常规 javascript，但我不确定如何。浏览[源代码](https://github.com/jquery/jquery/blob/master/src/event.js)应该会发现其中的秘密。

根据[这篇文章](http://www.randomsnippets.com/2008/03/05/simulate-a-button-click-via-javascript/)，您只需要调用：

```
document.getElementById('theSubmitButton').click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:36:18.043

您可以获取链接 href 并通过`window.location.assign()`

# java - 视口适合屏幕宽度和大图像

> ID：10543880
> 
> 赞同：10
> 
> 时间：2012-05-11T00:27:45.123
> 
> 标签：java, android, html, webview

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T21:08:25.297

我认为默认情况下，您的图像最终仍然大于视口。尝试这个

```
<html>
<head>
<meta
    name="viewport"
    content="width=device-width, user-scalable=yes"
/>

</head>
<body
    style="margin: 0; padding: 0">
    <img
        alt="image"
        src="http://www.deviantart.com/download/165022929/Wallpaper_2010_by_scrumen.png"
        id="theImage"
        style="width:100%"
    >
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T10:59:48.457

实际上，我通过做一些违反直觉的事情来在 ICS 上工作。虽然其他人建议添加`style="width:100%"`到`img`标签中，但我的解决方案是实际添加`style="height:100%"`。

这适用于我的 Android 4.0+ 设备，但不幸的是，它在我的旧设备上开始部分放大（因此图像高度填充视图）。

1.  它避免了我测试的所有设备上的空白问题。
    *   ICS 在初始完全缩小的视图中显示空间，但当您放大时，它会完全按照您的意愿消失。
    *   在较旧的设备上，由于初始缩放级别，下方永远不会有空白区域。
2.  变焦并不完美，但要好得多。
    *   在 ICS 上，您得到的正是您想要的（匹配宽度）。
    *   在较旧的设备上，缩放比您在问题的第二个示例中得到的更易于管理。

简而言之，我已经满足了您对 ICS 的要求，并让您在旧设备上更接近它们。如果我想出其他任何东西，我会编辑我的答案，但这似乎值得分享，即使不完美。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T13:59:18.217

不知道正确答案，但可能的 walkarround 可以将**img max-width**设置为“非非常高的值”，例如加载页面时 2*screen.width

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T23:11:21.267

我更喜欢网络开发人员，这是适用于 android ics 浏览器的代码，这在 webview 中应该是一样的：

```
<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="user-scalable=yes, initial-scale=1.0, width=device-width">
<style>
    html,body{
        width:100%;
        height:100%;
        margin:0;
        padding:0;
    }
    #my-image{
        width:100%;
        margin:0;
        padding:0;
    }
</style>

</head>
<body>
    <img id="my-image" src="http://gachie.blog.com/files/2011/06/tour_eiffel.jpg"/>
</body> 
```

我也尝试了更大的图像（[http://macjacart.ca/admin/Product_Images/8UhBphVEae.jpg](http://macjacart.ca/admin/Product_Images/8UhBphVEae.jpg)）并且运行顺利。

希望能帮助到你！

[编辑]

由于我没有足够的空间在评论中发布它，我将它放在那里：

您想要的基本上是在图像高度占据全屏时立即切断视口的底部。您需要一些 javascript 来做到这一点，并且由于 javascript 没有缩放事件，因此不需要一些 hack。由于 android 支持 flash，您可以尝试[此](http://blog.sebastian-martens.de/2009/12/how-to-detect-the-browser-zoom-level-change-browser-zoo/)解决方案来获取缩放事件。一旦缩放达到一定水平，这取决于图像比例，您将图像的 css 更新为 height:100%，并将宽度设置为 auto。

您基本上可以根据哪一个是 100% 来限制宽度或高度。您可能还希望在用户缩放时将高度逐渐设置为 100%，无论哪种方式，您都会在某个时候看到“跳跃”。

也看看[这篇](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)文章，这可能会对你有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-18T19:31:18.070

这个怎么样：（撤回 - 仍然无法正常工作）

```
<html>
<head>
<meta
    name="viewport"
    content="width=device-width, user-scalable=yes"
/>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>
<body
    style="margin: 0; padding: 0">
    <img onload="view = new Viewport(this.width, this.height)"
        alt="image"
        src="http://orbitingeden.com/orrery/textures/stars.jpg"
        id="theImage"
    >
<script>
    Viewport = function(width, height){
        var theImage = document.getElementById('theImage');
        this.width = width;
        this.height = height;
        this.set = function(){
            var metas = document.getElementsByTagName('meta');
            for(i=0; i<metas.length; i++){
                if(metas[i].name == 'viewport'){
                    metas[i].setAttribute('content','width=' + width + 
                                ', height='+ height + ', user-scalable=yes');
                    theImage.style.width = '100%';
                }
            }
        }
        this.set();
    }
    $('body').bind("gesturechange", function(event) {
        view.set();
    });

</script>
</body>
</html> 
```

# java - 调试 VisualVM 远程连接

> ID：10543882
> 
> 赞同：9
> 
> 时间：2012-05-11T00:28:07.067
> 
> 标签：java, tomcat, jmx, visualvm

我在亚马逊云中的 Linux 服务器上运行 Tomcat 6。我正在尝试通过我办公室的 Mac 上的 VisualVM 连接到它。我已经允许打开我的桌面和服务器之间的所有 TCP 端口，但我无法让 VisualVM 做任何事情。

在 linux 机器上，我启动了 Tomcat：

```
-Dcom.sun.management.jmxremote
-Dcom.sun.management.jmxremote.port=9191
-Dcom.sun.management.jmxremote.ssl=false
-Dcom.sun.management.jmxremote.authenticate=false 
```

在我的 Mac 上，我启动 VisualVM 并选择 File -> New JMX Connection...

我在框中输入 amazonhostname.com:9191。它说“正在添加 amazonhostname.com:9191 ...”并在超时前坐在那里几分钟。

在我的 Mac 上，我可以“telnet amazonhostname.com 9191”就好了，我尝试了其他一些随机端口，它们都可以正常工作。我很确信这不是防火墙问题，除非我需要打开 UDP 或 ICMP 或类似的东西。（真的？？）

服务器上的 catalina.log 或我的 Mac 上的系统控制台中没有任何与 jmx 相关的内容。服务器上的 netstat 显示 9191 和所有接口上打开的其他一些端口。

远程服务器上没有 jstatd。这是 JMX 的先决条件吗？（我对 Java 完全陌生，我什至不确定这些东西是什么意思，但我在某处的博客文章中看到了它。我现在正抓着稻草。）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-29T10:47:12.567

在 VM 启动之前设置主机名属性：

```
java -Dcom.sun.management.jmxremote \
     -Dcom.sun.management.jmxremote.port=9191 \
     -Dcom.sun.management.jmxremote.authenticate=false \
     -Dcom.sun.management.jmxremote.ssl=false \
     -Djava.rmi.server.hostname=the.public.ip \
     -jar program.jar 
```

将相关规则添加到您的安全组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-14T18:48:48.307

在 RHEL7 环境中对我有用的是使用文档中提供的示例在 Tomcat 上实现 JmxRemoteLifecycleListener。我还在防火墙上开放了 10001 和 10002 端口。 [JMX 远程生命周期监听器](http://tomcat.apache.org/tomcat-8.0-doc/config/listeners.html#JMX_Remote_Lifecycle_Listener_-_org.apache.catalina.mbeans.JmxRemoteLifecycleListener)

# php - 计算两个日期之间的天数

> ID：10543883
> 
> 赞同：1
> 
> 时间：2012-05-11T00:28:21.787
> 
> 标签：php, mysql, date, days

我有一个 mySQL 数据库。

我需要计算两个日期之间的天数。

我的客户将通过 php 表单填写 1979 年 1 月 1 日的输入`hm_date`以创建新记录。

我需要一个字段`total_days`来计算从`hm_date`今天到现在的总天数。我需要这个字段每天都在更新自己。

如何使`hm_date`总天数显示并始终更新？

我想这可以在服务器端实现吗？

我应该使用`strototime()`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T00:31:08.913

你会想要使用 MySQL 的[`DATEDIFF()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)

> DATEDIFF() 返回 expr1 – expr2，表示为从一个日期到另一个日期的天数。expr1 和 expr2 是日期或日期和时间表达式。计算中仅使用值的日期部分。

```
mysql> SELECT DATEDIFF('2007-12-31 23:59:59','2007-12-30');
        -> 1
mysql> SELECT DATEDIFF('2010-11-30 23:59:59','2010-12-31');
        -> -31 
```

根据您的问题，我认为您会想要`DATE_DIFF(hm_date, CURRENT_DATE)`. 只要确保`hm_date`是`YYYY-MM-DD`格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T00:33:33.077

使用 PHP：

```
$daydiff = floor( ( strtotime( $endDate ) - strtotime( $startDate ) ) / 86400 ); 
```

$startDate 和 $endDate 可以是此处解释的任何有效日期格式： [http ://www.php.net/manual/en/datetime.formats.date.php](http://www.php.net/manual/en/datetime.formats.date.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T00:36:48.707

它很容易但很长..请遵循以下代码

```
<?php

  // Set timezone
  date_default_timezone_set("UTC");

  // Time format is UNIX timestamp or
  // PHP strtotime compatible strings
  function dateDiff($time1, $time2, $precision = 6) {
    // If not numeric then convert texts to unix timestamps
    if (!is_int($time1)) {
      $time1 = strtotime($time1);
    }
    if (!is_int($time2)) {
      $time2 = strtotime($time2);
    }

    // If time1 is bigger than time2
    // Then swap time1 and time2
    if ($time1 > $time2) {
      $ttime = $time1;
      $time1 = $time2;
      $time2 = $ttime;
    }

    // Set up intervals and diffs arrays
    $intervals = array('year','month','day','hour','minute','second');
    $diffs = array();

    // Loop thru all intervals
    foreach ($intervals as $interval) {
      // Set default diff to 0
      $diffs[$interval] = 0;
      // Create temp time from time1 and interval
      $ttime = strtotime("+1 " . $interval, $time1);
      // Loop until temp time is smaller than time2
      while ($time2 >= $ttime) {
    $time1 = $ttime;
    $diffs[$interval]++;
    // Create new temp time from time1 and interval
    $ttime = strtotime("+1 " . $interval, $time1);
      }
    }

    $count = 0;
    $times = array();
    // Loop thru all diffs
    foreach ($diffs as $interval => $value) {
      // Break if we have needed precission
      if ($count >= $precision) {
    break;
      }
      // Add value and interval 
      // if value is bigger than 0
      if ($value > 0) {
    // Add s if value is not 1
    if ($value != 1) {
      $interval .= "s";
    }
    // Add value and interval to times array
    $times[] = $value . " " . $interval;
    $count++;
      }
    }

    // Return string with times
    return implode(", ", $times);
  }

?> 
```

现在试试这个，看看它如何显示差异......

```
echo dateDiff("2010-01-26", "2004-01-26") . "\n";
echo dateDiff("2006-04-12 12:30:00", "1987-04-12 12:30:01") . "\n";
echo dateDiff("now", "now +2 months") . "\n";
echo dateDiff("now", "now -6 year -2 months -10 days") . "\n";
echo dateDiff("2009-01-26", "2004-01-26 15:38:11") . "\n"; 
```

# javascript - 如何限制jquery搜索范围

> ID：10543897
> 
> 赞同：25
> 
> 时间：2012-05-11T00:29:33.110
> 
> 标签：javascript, jquery

看起来在使用选择器时`JQuery`会在当前搜索。`document`

如何仅在元素内部搜索`div`元素？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-11T00:30:55.153

jQuery 选择器的工作方式与您可能更熟悉的 CSS 选择器非常相似。

首先，选择 div，然后从该 div 下降：

```
$('#my-div').find('some-selector'). 
```

或构建您的选择器以匹配相关元素的子元素：

```
$('#my-div some-selector') 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-02-03T11:48:47.503

老问题，但似乎每个人都错过了*作用域*jQuery 选择器（使用你想要的作用域，即你的 div 选择器，作为第二个参数）

例如使用

```
var $matches = $('.adiv', '#mydiv'); 
```

这是一个较短的等价物：

```
var $matches = $('#mydiv').find('.adiv'); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-11T00:31:54.327

```
var elems = jQuery(".foo", jQuery("#divYourWantToLimitTo") );  //BAD
//or
var elems = jQuery("#divYourWantToLimitTo .foo");  //Better
//or
var elems = jQuery("#divYourWantToLimitTo").find(".foo");  //BEST 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T00:35:10.907

jQuery 提供了几种搜索特定元素的方法：

```
$("#your_div").find(".your_things");        //Find everything inside
  //-or-
$("#your_div").filter(".your_things");      //Find only the top level
  //-or-
$("#your_div .your_things");                //Easiest 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T00:30:52.390

```
var elements = $('div ' + yourSearch); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T00:32:34.957

```
$('div-selector').find('the selector-you-are-looking-for'); 
```

# python - 通过 Python 的 subprocess.Popen 在 Ubuntu 服务器上使用 wkhtmltopdf 进行编码问题

> ID：10543901
> 
> 赞同：1
> 
> 时间：2012-05-11T00:30:09.813
> 
> 标签：python, character-encoding, debian, wkhtmltopdf

我遇到了`debian`/ `django`/ `python`/ `subprocess.Popen`/的编码问题`wkhtmltopdf`（不确定是哪个部分导致了问题）。

该问题与`wkhtmltopdf`通过 Python`subprocess.Popen`在 Amazon Ubuntu 服务器实例上传递 unicode 字符串有关。

编码：

```
popen = subrocess.Popen(
    ['wkhtmltopdf', '--header-right',  u'Copyright © 2012 Sité Náme', 'file.html', '-'],
    stdout=subprocess.PIPE) 
```

在我的 OSX Lion 开发机器上，页面标题正确显示版权符号和重音字母。在我们的生产和测试服务器上，没有那么多。

Django 在上面一行返回这个错误：'execv() arg 2 must contain only strings'。如果我去掉非 ascii 字符，它确实可以工作。

服务器是 Debian GNU/Linux 6.0.4。Python 版本是 Python 2.6.6。我认为相关， `sys.getfilesystemencoding()`在服务器上返回“ANSI_X3.4-1968”，但在 OSX 上返回“UTF-8”。

我尝试添加 .encode('utf-8') 和其他各种组合，但是，虽然我可以删除错误，但它只是用乱码替换了非 ascii 字符。

任何帮助将不胜感激。

# debian - 在 Debian 上使用 SLIME 在 Common Lisp 中加载外部包

> ID：10543906
> 
> 赞同：5
> 
> 时间：2012-05-11T00:30:33.903
> 
> 标签：debian, common-lisp, packages, slime, sbcl

我在 Debian Squeeze 上使用 SBCL 1.0.56，带有 cl-swank/slime 1:20120420-2（Debian 版本号）。这些都是当前不稳定的版本。

我在加载第三方 CL 包时遇到了问题。在 Debian 上使用 CL 的文档（实际上是在 Linux 上更通用的 CL 使用文档）是粗略的、矛盾的和过时的，所以我将总结一下我所知道的。这就是我所在的地方。

Debian 在 `/usr/share/common-lisp/source`. 在拆分序列的情况下，这是 `/usr/share/common-lisp/source/cl-split-sequence`.

.asd 文件（这里 `/usr/share/common-lisp/source/cl-split-sequence/split-sequence.asd`），据我了解，它为 CL 实现提供有关版本和依赖项的说明，看起来像

```
;;; -*- Lisp -*- mode
(defpackage #:split-sequence-system (:use #:cl #:asdf))
(in-package :split-sequence-system)

(defsystem :split-sequence
    :version "20011114.1"
    :components ((:file "split-sequence"))) 
```

现在，在运行 slime 时，在 REPL 中输入以下两行可以正常工作

```
(require :split-sequence)
(split-sequence:SPLIT-SEQUENCE  #\, "foo,bar") 
```

调用（我认为）SBCL 内的 ASDF的`(require :split-sequence)`内置副本，它可能看起来是`split-sequence.asd`. 这可能是特定于 SBCL 的，请参阅[Debian 手册第 3 章 -Libraries 中的 Common Lisp](http://pkg-common-lisp.alioth.debian.org/clid/clid.html/chlibs.html)。值得注意的是，这个页面和我遇到的任何东西一样有用和详细，它经常提到 CLC（Common Lisp Controller），但似乎 Debian 正在远离这个。请参阅 [Redesign of Common Lisp Controller](http://article.gmane.org/gmane.linux.debian.alioth.common-lisp/2431)，我不完全理解。无论如何，没有一个记录在案的使用 CLC 的命令对我有用。但是，CLC 在 Debian 上仍然可用。此外，用户邮件列表已失效 - 请参阅[Clc-users 档案](http://lists.alioth.debian.org/pipermail/clc-users/)

第一次`(require :split-sequence)`被调用，它被编译，并且（在我的系统上，可能是 Debian 特定的）结果`fasl`被放置在

`~/.cache/common-lisp/sbcl-1.0.56.0.debian-linux-x86/usr/share/common-lisp/source/cl-split-sequence/split-sequence.fasl`

即文件被放置在文件系统中的缓存下，镜像原始源的位置。显而易见的问题是，系统如何知道去哪里寻找包裹？这是我不确定的一件事。看起来搜索路径应该在 `/etc/common-lisp/source-registry.conf.d`ASDF Debian 软件包的一部分中给出，但最接近的 `01-common-lisp-controller.conf`是

```
(:directory  #p"/usr/share/common-lisp/systems/") 
```

也许这在某个地方是硬连线的，但我想知道。

无论如何，一旦这个 ASDF 文件在缓存中，它就不会再次编译，但是 REPL 在 slime 启动后看不到它，除非 `require`再次编译。

现在，如果我把线

```
(require :split-sequence)
(split-sequence:SPLIT-SEQUENCE  #\, "foo,bar") 
```

在一个文件中，比如说`seq.lisp`，并用 Cc Ck 将它加载到 REPL 中，我得到一个错误和回溯，从

```
The name "SPLIT-SEQUENCE" does not designate any package.
   [Condition of type SB-KERNEL:SIMPLE-PACKAGE-ERROR] 
```

所以我得出结论，包没有正确加载。我尝试了类似的变化

```
(asdf:oos 'asdf:load-op :split-sequence) 
```

和

```
(asdf:load-system :split-sequence) 
```

但没有骰子。奇怪的是，假设我们只有这条线

```
(require :split-sequence) 
```

在一个文件中 -`require.lisp`为清楚起见调用它。然后加载 `require.lisp`不报错，然后输入

```
(split-sequence:SPLIT-SEQUENCE  #\, "foo,bar") 
```

在 REPL 工作！但是，如果不加载`require.lisp`，则在 REPL 中键入前一行是行不通的。

因此，总而言之，如何在脚本中成功加载包？我也对上面提到的问题感兴趣，关于 ASDF 如何找到`/usr/share/common-lisp/source/`位置，但这更多是一个附带问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T06:30:51.253

`C-c` `C-k`编译源文件，然后加载编译后的文件。

Lisp 源文件包含定义和调用。文件编译器遍历文件并为其创建代码。但它不执行它。

如果您的文件包含对 的调用`REQUIRE`，则它不会在编译期间执行。如果您稍后加载已编译的文件，它将被执行。如果文件中的下一个 Lisp 表单正在使用调用后可用的某个包`REQUIRE`，则它在编译期间不存在，因为`REQUIRE`尚未执行 - 因此在编译时读取错误。

基本上有两种解决方案：

*   `REQUIRE`在使用所需功能编译特定文件之前执行所有必要的操作。
*   `REQUIRE`在编译期间执行语句。这就是`EVAL-WHEN :COMPILE-TOPLEVEL`告诉编译器在编译期间执行子表单的地方。

`#+:sbcl(foo)`表示 (foo) 仅`:SBCL`在 list 中存在符号时才被读取`CL:*FEATURES*`。使用它是为了让编译器仅在它是 SBCL 时才能看到此代码。

Common Lisp 代码的编译需要更仔细的准备，因为：

*   可以在文件编译期间执行 Lisp 代码，从而改变文件编译器的行为。

*   文件编译器的读者需要知道源代码中使用的包（它们是符号的命名空间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:19:06.877

我遇到了以下帖子，[Zach Beane 的博客 - 制作一个小型 Common Lisp 项目](http://xach.livejournal.com/130040.html)，其中包含指向[http://common-lisp.net/~loliveira/ediware/ediware.lisp的链接](http://common-lisp.net/~loliveira/ediware/ediware.lisp)

复制该文件顶部的代码是可行的。所以在这个文件上运行 Cc Ck 在 slime 中`split-sequence`，并运行代码`int (split-sequence:SPLIT-SEQUENCE #\, "foo,bar"))`

```
#+:sbcl
(eval-when (:compile-toplevel :load-toplevel :execute)
  (require :asdf))

(eval-when (:compile-toplevel :load-toplevel :execute)
  (asdf:oos 'asdf:load-op :split-sequence))

(defpackage #:seq
  (:use #:cl #:split-sequence))
(in-package #:seq)

(print (split-sequence:SPLIT-SEQUENCE  #\, "foo,bar")) 
```

但是，我不知道这些神奇的咒语是做什么的。有人愿意解释一下吗，也许在另一个答案中？我把它放在一个答案中，因为它是问题的答案，但它并不完整，因为我不明白它为什么起作用。我很乐意接受对此脚本的解释。

# c - How to create an array in C to hold 2 similar types of Structs?

> ID：10543915
> 
> 赞同：1
> 
> 时间：2012-05-11T00:31:20.807
> 
> 标签：c, inheritance, struct

I'm simulating inheritance in C, but not sure the exact way to go. I created 2 structs, Employee and Director, where Director is supposed to 'inherit' from Employee. How do I create an array that will be able to hold both regular Employees and Directors? This did not work:

```
Employee workers[3] 
```

Below is my code for the Director struct:

```
typedef struct {
    Employee employee;   
    int bonus;
} Director; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T00:33:59.067

Make an `union` that can contain either Directors or Employees, and a flag stating which part of the `union` you're using. Then declare an array of that `union` type.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T00:37:39.910

You are missing one crucial part - a flag by which you are going to distinguish directors from employees at runtime; this flag goes into `struct Employee`.

Now you can declare an array of *pointers* to `Employee` (it cannot be an array of `Employee` because directors are not going to fit). You can cast a pointer to `Director` back to `Employee`, because the pointer to the `struct` is *always* the same as the pointer to its first member.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T00:34:34.900

You... can't, at least, not like that. Even if it were allowed, what would happen? From what I can tell, `sizeof(Employee) != sizeof(Director)`, so how should the memory be allocated? What happens if I grab an `Employee` from the array and attempt to access the `employee` field of a `Director` object? It just won't work, and for good reason.

You can however use a union as a type which can hold either an `Employee` or a `Director` and create an array of those.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T00:52:51.523

You could make an array of pointers to Employee. Let's say that Employee is 64 bytes long, so if you create an array of 3 that array would be 192 bytes long, and if you would need an array of three Director that would be 2 extra bytes per struct, so your whole array would be 198 bytes long and that is the cause that you can't have the array as you want it. If you create the array as pointers to Employee, that's what the array will contain, pointers only, so it would be three spaces of 4 bytes = 12 bytes, and as the pointer always is the same size you will be able to store pointers to structures of different sizes. You will only have to take some considerations:

*   Each item will need to be de-referenced.
*   You'll need to ask for some dynamic memory for each item (malloc) or your items will be lost when the function ends.
*   Be very careful to free that memory when you don't need it anymore.
*   Verify that the pointer isn't null before de-referencing it or your program will crash.

I hope this is useful, good luck!

# ruby-on-rails - 如何在 Rails 3 中制作自定义助手？

> ID：10543924
> 
> 赞同：1
> 
> 时间：2012-05-11T00:34:24.097
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, variables, methods

我对 Rails 还很陌生，我对如何在 if...else 语句之外传递局部变量感到困惑。看起来在帮助文件中创建一个方法是执行此操作的常规方法，但我不确定如何执行此操作。

所以我想找到任务的作者。如果任务的作者不存在，我想使用其父教学大纲的作者（任务属于教学大纲）。然后我想打印出那个作者的用户名。当我只处理一个任务时，我能够做到这一点，比如：

```
//controller
@mission = Mission.first
if !@mission.author.blank?
  @author = @mission.author
else
  @author = @mission.syllabus.author
end

//view
<%= @author.username %> 
```

但是在处理 foreach 循环时我不确定如何执行此操作：

```
//controller
@mission = Mission.all

//view 
<% @mission.each do |mission| %>
..(where do I put the logic of finding author? I can't put it in my controller anymore and it won't pass the @author variable outside the if else statement if I put the logic here in the view)..
<%= @author.username %>
<% end %> 
```

我徒劳的尝试是创建一个助手：

```
def author_getter(mission_id)
  @mission = Mission.find(params[:mission_id])
  if !@mission.author.blank? 
    @author = @mission.author 
    return @author
  else
    @author = @mission.syllabus.author  
    return @author
  end 
end 
```

并将以下内容放入循环中

```
<%= author_getter(mission) %> 
```

然而，这并没有奏效。在 if...else 语句之外传递变量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T01:01:17.407

您的辅助方法有点混乱。助手不应该在 中四处寻找`params`，他们应该只是用他们被调用的参数来做事。您正在传递 a但不使用它，当参数名称指示而不是请求 ID 时`mission_id`，您还使用（显然）一个对象调用它。`mission`此外，您不需要在助手中处理实例变量，只需简单的旧变量即可。

调整界面以请求任务对象，然后使用该对象：

```
def author_of(mission)
  mission.author.present?? mission.author : mission.syllabus.author
end 
```

或者，既然`mission.author`应该存在`nil`或存在，您可以利用以下错误`nil`：

```
def author_of(mission)
  mission.author || mission.syllabus.author
end 
```

然后在你的 ERB 中：

```
<!-- Note that you should use the plural @missions for a collection, you'll have to fix your controller as well. -->
<% @missions.each do |mission| %>
    <%= author_of(mission).username %>
<% end %> 
```

当然，一旦我们简化并更正了您的助手，您可能会认为它太小而不值得打扰；如果是这样，那么您可以放弃助手并在 ERB 中完成所有操作：

```
<% @mission.each do |mission| %>
    <%= (mission.author || mission.syllabus.author).username %>
<% end %> 
```

但是，我认为您在错误的地方有这个逻辑：这应该在 Mission 本身内部，以便所有东西（其他模型、JSON 构建器......）都可以利用它。所以，这样的方法是有意义的：

```
class Mission
  def real_author
    author || syllabus.author
  end
end 
```

那么你可以在你的 ERB 中这样说：

```
<% @missions.each do |mission| %>
    <%= mission.real_author.username %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:47:42.603

除非我误解了您的问题，否则您可以在循环中执行此操作而无需使用 find。

```
//view 
<% @mission.each do |mission| %>
   <%= mission.author.username %>
<% end %> 
```

请记住，您正在遍历所有任务对象。一旦你有了一个任务对象，你就可以像往常一样访问作者。

# ruby - 这些 for 循环是否默认枚举数组的所有内容？

> ID：10543929
> 
> 赞同：0
> 
> 时间：2012-05-11T00:34:56.547
> 
> 标签：ruby, arrays, for-loop

如果我只想要它的特定部分，我试图弄清楚是否应该避免以这种方式循环遍历数组。

```
the_count = [1, 2, 3, 4, 5]     
fruits = ["apples", "oranges", "pears", "apricots"]

for number in the_count
  puts "This is count #{number}"
end

fruits.each do |fruit|
  puts "A fruit of type: #{fruit}"
end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:51:26.503

您描述的两个循环确实会遍历数组中的所有元素。他们还会做什么？如果您只想要数组中的单个项目，请使用`fruits[2]`，或者如果您只想要数组的一部分，请使用`fruits.slice(1,3)`or `fruits.slice(1..3)`（第一个返回从元素 1 开始的 3 个元素（即第二个），第二个返回元素 1 到 3 ）。

# asp.net - “BlogEngine.Core.BlogSettings”的类型初始化程序引发异常

> ID：10543935
> 
> 赞同：0
> 
> 时间：2012-05-11T00:35:40.110
> 
> 标签：asp.net, blogengine.net

前几天突然我在我托管在 Godaddy 的 BlogEngine 网站的以下行中的 web.config 中收到以下错误。

我已经好几个星期没碰过这个网站了，但 Godaddy 说这是我的代码的问题。我已经尽我所能来修复错误，但没有任何效果。我检查了我的权限，确保 XML 文件没有损坏，从我的角度来看，没有任何改变。

我什至将整个站点上传到了一个新目录，但收到了同样的错误，整个站点在我的计算机上本地运行良好。

```
<add name="XmlMembershipProvider" type="BlogEngine.Core.Providers.XmlMembershipProvider, BlogEngine.Core" description="XML membership provider" passwordFormat="Hashed"/> 
```

有谁知道这里可能出了什么问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:59:02.653

快速的解决方案是，在 MVC 中完全重新构建，花了我非常紧张的四天时间，它对用户来说看起来完全一样，但它都是我的！

在建立网站的 15 年中，我收集了一项非常重要的知识。“永远不要使用别人的代码！” 它可能会在短期内为您节省时间，但会导致您遇到问题。

# networking - 在网络层工作的工具

> ID：10543936
> 
> 赞同：0
> 
> 时间：2012-05-11T00:35:41.063
> 
> 标签：networking, tcp, ip, binutils, osi

我最近一直在使用`telnet`很多东西来测试许多不同类型的 tcp 连接（基本 TCP、标准 HTTP、通过 HTTP 的 Bayeux 等）作为了解事物如何工作的一种手段。

我想通过使用一种工具来学习网络层发生的事情，进一步了解 OSI 模型中的下一层是如何工作的。

就像 telnet 允许在 TCP 层发送消息以了解它上面的层发生了什么一样，我想使用一个允许我发送 IP 数据包消息的工具来查看 TCP 层做了什么。

有人对我可以使用什么工具有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:40:06.683

尝试[hping](http://wiki.hping.org/) 和[ncat](http://nmap.org/ncat/)

用于嗅探[wireshark](http://www.wireshark.org/)，[tcpdump](http://www.tcpdump.org/tcpdump_man.html)

如果你喜欢 python 看[scapy](http://trac.secdev.org/scapy)

# c# - 当 bjqueryui 为 true 时，JQuery 数据表分页按钮一起挤压

> ID：10543937
> 
> 赞同：0
> 
> 时间：2012-05-11T00:35:49.253
> 
> 标签：c#, jquery, asp.net-mvc-3, jquery-ui, datatable

这是我的数据表...

```
 oTable = $('#example').dataTable({
       "sDom": 'T<"clear">lfrtip',
        //"sDom": 'R<"H"Tlfr>t<"F"ip>',
        // "bServerSide": true,
        "sAjaxSource": '@Url.Action("GetAllDonors", "Person")',
        /* Reduced data set */
        "bProcessing": true,
         "sScrollX": "100%",
        "sScrollXInner": "100%",
        "bScrollCollapse": true,
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "iDisplayLength": 10,
        "fnInitComplete": function (oSettings) {
            $(oTable.fnGetNodes()).click(function () {
                var iPos = oTable.fnGetPosition(this);
                var aData = oSettings.aoData[iPos]._aData;
                location.href = '/Person/Details?id=' + aData[0];
                //alert('Data at index 0: '+aData[0]);
            });
        },
        "aoColumns": [
        { "bVisible": false },
        { "sTitle": "Name" },
        { "sTitle": "Address" },
        { "sTitle": "Phone" },
        { "sTitle": "Email" },
        { "sTitle": "Company" }
    ]

    });
}); 
```

当我启用 ui 主题时，分页按钮会被推到一起，因此有些按钮重叠/无法单击它们。有什么想法吗？

这是它的屏幕截图：![在此处输入图像描述](../Images/24521a7c1846b2f488b4806e7f2493da.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:10:41.493

将 jquery.ui javascript 和 css 文件的脚本 src 添加到您的文档中。

# scala - Scala：最有效的简单迭代集合

> ID：10543938
> 
> 赞同：4
> 
> 时间：2012-05-11T00:36:15.337
> 
> 标签：scala, scala-collections

通常我会按需生成一个集合以节省实例数据的大小。消费者在收集垃圾之前可能只迭代一次集合。消费者不关心集合的顺序，不需要对其进行排序，当然也不需要改变它，或者它的任何元素。Scala 中最有效的类型安全集合是什么？- 数组？

后期编辑：我突然想到，在很多情况下我可以使用 Sets。尽可能使用 Sets 好还是只在真正需要 set 功能时使用它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T00:47:55.323

是的，在所有集合数据结构中，**如果事先知道数组的大小，****数组**的开销最少。

 **如果您不提前知道大小，我仍然会选择**ArrayBuffer***。用于在空间不足时扩展底层数组的算法尽可能高效。

不要*****使用（链接的）**列表**或**流**，因为这些类涉及*每个元素一个堆分配*。现代 JVM 垃圾收集器很好，但它们不是免费工作的。

*：但请参阅[@user unknown](https://stackoverflow.com/users/312172/user-unknown)对问题的评论以获取一些微基准的链接。当前的`ArrayBuffer`实现可能不是最理想的。

也看看**`.view`**。通常您不需要实际存储中间结果。相反，您可以使用`.map`,`.filter`和其他人来构建集合的“描述”。操作（映射、过滤器等）只会在您迭代集合时执行，通常是在`O(1)`空间中。不利的一面是，每次查询这些视图时都会重新计算它们。（尽管使用简单的过滤器和庞大的底层集合可能仍然更有效）

另外，对可变数据结构的视图要格外小心。视图不捕获底层数据结构的状态。当它改变时，视图也会改变。然而，关于不可变数据结构的视图表现得非常好。最后，视图显然包含对底层数据结构的引用，这意味着当您的程序保留视图时，它不会被垃圾收集。

*（更新）* **向量**似乎在存储效率和灵活性之间取得了很好的平衡，特别是对于大序列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T21:52:54.440

你*需要*存储元素吗？你不能按需计算它们吗？如果您可以按需计算值而不是存储它们，您可以创建一个`Traversable`或 an`Iterable`来完成这项工作，几乎不需要任何内存（`Traversable`除了类本身之外，没有任何内存）。**

# python - 检查图像的 URL 是否已启动并在 Python 中存在

> ID：10543940
> 
> 赞同：9
> 
> 时间：2012-05-11T00:36:35.133
> 
> 标签：python, http, url

我正在做一个网站。我想从服务器检查用户提交的链接是否实际上是存在的图像。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-02-21T15:31:12.533

这是适用于我的应用程序的最佳方法，也是基于以前的评论：

```
def is_url_image(image_url):
   image_formats = ("image/png", "image/jpeg", "image/jpg")
   r = requests.head(image_url)
   if r.headers["content-type"] in image_formats:
      return True
   return False 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-11T00:40:29.593

这是一种快速的方法：

它并没有真正验证这真的是一个图像文件，它只是根据文件扩展名进行猜测，然后检查 url 是否存在。如果您确实需要验证从 url 返回的数据实际上是图像（出于安全原因），那么此解决方案将不起作用。

```
import mimetypes, urllib2

def is_url_image(url):    
    mimetype,encoding = mimetypes.guess_type(url)
    return (mimetype and mimetype.startswith('image'))

def check_url(url):
    """Returns True if the url returns a response code between 200-300,
       otherwise return False.
    """
    try:
        headers = {
            "Range": "bytes=0-10",
            "User-Agent": "MyTestAgent",
            "Accept": "*/*"
        }

        req = urllib2.Request(url, headers=headers)
        response = urllib2.urlopen(req)
        return response.code in range(200, 209)
    except Exception:
        return False

def is_image_and_ready(url):
    return is_url_image(url) and check_url(url) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-15T04:52:03.497

You can read the header of the http request, it contains some meta-data like the content-type.

On python 3:

```
from urllib.request import urlopen
image_formats = ("image/png", "image/jpeg", "image/gif")
url = "http://localhost/img.png"
site = urlopen(url)
meta = site.info()  # get header of the http request
if meta["content-type"] in image_formats:  # check if the content-type is a image
    print("it is an image") 
```

You can also get other info like the size of the image and etc. The good news about this is that it doesn't download the image. It could fail if the header says that it is an image and it is not, but you can still do a last check and download the image if it pass the first filter.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T00:51:09.277

看看[imghdr](http://docs.python.org/library/imghdr.html)

这是一些示例代码：

```
import imghdr
import httplib
import cStringIO

conn = httplib.HTTPConnection('www.ovguide.com', timeout=60)
path = '/img/global/ovg_logo.png'
conn.request('GET', path)
r1 = conn.getresponse()

image_file_obj = cStringIO.StringIO(r1.read())
what_type = imghdr.what(image_file_obj)

print what_type 
```

这应该返回“png”。如果它不是图像，它将返回 None

希望有帮助！

-布莱克

# c++ - Linux 和 C/C++：通过链接 libc-2.11 并尝试在具有 libc-2.5.so 的 Linux 机器上运行创建的应用程序

> ID：10543941
> 
> 赞同：2
> 
> 时间：2012-05-11T00:36:41.617
> 
> 标签：c++, c, linux

尝试运行时出现以下错误。

lib/libc.so.6：（test.so）未找到版本“GLIBC_2.7”

为了解决这个问题，在编译时静态链接到 libc-2.11.a 是否安全，这样在运行时就不会依赖 libc.so。

任何意见表示赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T02:08:33.290

Have you ever installed the GLIBC, if so, make sure the version is 2.7, and try again.

# list - Floyd/Warshall 算法重建路径，保存到列表中

> ID：10543943
> 
> 赞同：0
> 
> 时间：2012-05-11T00:36:49.020
> 
> 标签：list, path, shortest-path, floyd-warshall

两个简单的问题，我的大脑不工作了。我正在使用弗洛伊德算法并尝试重建从顶点 U 到顶点 V 的路径。这是我重建路径的代码。

```
public List<Integer> findCheapestPath(int u, int v)
{
    if (u >= adjMatrix.length || v >= adjMatrix.length || u < 0 || v < 0)
    {
        throw new IllegalArgumentException("Error--Illegal Arugment Exception: One of the verticies are not valid.");
    }
    int intermediate;

    intermediate = path[u][v];
    if (intermediate == -1)
    {
        pathList.add(u);
        return pathList;
    } else
    {
        findCheapestPath(u, intermediate);
        findCheapestPath(intermediate, v);
    }
    return pathList;
} 
```

举个例子，让 u = 0 和 v = 3，并让从 0 到 3 的最短路径为 0,1,2,3。但是我有两个问题。我的 pathList 是该类的实例变量，并且：

1.  我希望列表返回“0,1,2,3”，但它只返回“0,1,2”，或者如果我用 pathList.add(v) 替换 pathList.add(u)，那么它只返回“ 1,2,3" 我不知道如何让它返回整个路径，包括两个末端顶点。尝试放置 pathList.add(other vertex) 将导致它复制每个中间顶点。
2.  当我再次调用该方法时，让 u = 3 和 v = 0，并让从 3 到 0 的最短路径为“3,0”（已经是最短路径），它只是添加到我之前的列表中，导致*我的错误从上面的* “0,1,2,3”或“1,2,3,0”当它应该只是“3,0”时

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:39:26.697

不要使用类变量，并制作一个包装函数。

更详细地说，将您的函数更改为此签名：

```
private List<Integer> findCheapestPathInner(int u, int v, pathList) 
```

（显然还更改了其中的递归调用以适应新签名），并创建另一个函数：

```
public List<Integer> findCheapestPath(int u, int v) {
  List<Integer> pathList = new ArrayList<Integer>();
  pathList.add(u);
  return findCheapestPathInner(u, v, pathList);
} 
```

# java - 多次重复广播永远不会有新的额外内容

> ID：10543945
> 
> 赞同：2
> 
> 时间：2012-05-11T00:37:02.687
> 
> 标签：java, android, broadcastreceiver, alarmmanager, android-pendingintent

我有一个应用程序可以在给定时间或设定的时间间隔安排推文。我使用重复的广播意图来发送推文。我包括消息、用户名等的附加内容。我使用用户名+消息的 md5sum 作为唯一标识符，以便每个意图都是唯一的。该代码适用于一条推文，但当我添加另一条推文时，新推文包含与第一条相同的附加内容。

```
private void setupTimedTweet(int position, Context c, String username,
                String message, String day, String mentions, String timeValue){
    Bundle b = new Bundle();
    b.putString("username", username);
    Toast.makeText(c, "New tweet saved, "+ message, Toast.LENGTH_LONG).show();
    b.putString("message", message);
    b.putString("mentions", mentions);
    b.putString("day", day);
    Intent myIntent = new Intent(c, TweezeeReceiver.class);
    myIntent.putExtras(b);
    PendingIntent pendingIntent =
              PendingIntent.getBroadcast(c, md5(username+message), myIntent, 0);
    AlarmManager alarmManager =
                        (AlarmManager)c.getSystemService(Context.ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.setTimeZone(TimeZone.getDefault());
    calendar.set(Calendar.HOUR_OF_DAY,Integer.parseInt(timeValue.split(":")[0]));
    calendar.set(Calendar.MINUTE, Integer.parseInt(timeValue.split(":")[1]));
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
            calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent;
} 
```

该方法中的吐司具有正确的信息。设置新警报时，没有问题。然而，接收者永远不会获得新推文的更新附加内容。如果我安排了一条推文“test1”，然后是另一个推文“test2”，则 setupIntervalTweet() 方法具有正确的信息，但是当接收者收到它时，它具有来自“test1”推文的相同信息。

```
@Override
public void onReceive(Context c, Intent i) {
    Log.d("RECERIVER", "TWEET RECIEVED!");
    Bundle tweetInfo = i.getExtras();
    message = tweetInfo.getString("message");
    username = tweetInfo.getString("username");
    day = tweetInfo.getString("day");
    prefs = PreferenceManager.getDefaultSharedPreferences(c);
    ctx = c;
    mHandler = new Handler();
    sendTweet();
} 
```

为什么我的接收器没有得到正确的附加功能？

完整的源代码可以在这里找到。[https://github.com/T3hh4xx0r/TweeZee/](https://github.com/T3hh4xx0r/TweeZee/)

编辑：我已经可以更新推文了，但是我无法让新的附加功能在新推文上工作以保存新的附加功能。我正在使用`FLAG_UPDATE_CURRENT`更新我的待处理意图。我听说要使用，`FLAG_CANCEL_CURRENT`开始新的，但我不想取消一个，我只想开始一个新的。我找不到新的或类似的标志。

这是更新的代码。

```
private void setupIntervalTweet(int position, Context c, String username,
                                String message, String wait, String day,
                                String mentions, boolean updating, String og) {
    Bundle b = new Bundle();
    b.putString("username", username);
    b.putString("message", message);
    b.putString("mentions", mentions);
    b.putString("day", day);
    Toast.makeText(c, "New tweet saved, "+message, Toast.LENGTH_LONG).show();
    Intent myIntent = new Intent(c, TweezeeReceiver.class);
    myIntent.putExtras(b);
    PendingIntent pendingIntent;
    if (updating) {
        pendingIntent = PendingIntent.getBroadcast(c, md5(username+og), myIntent,
                                PendingIntent.FLAG_UPDATE_CURRENT);
    } else {
        pendingIntent = PendingIntent.getBroadcast(c, md5(username+message),
                                                                    myIntent, 0);
    }
    AlarmManager alarmManager =
                        (AlarmManager)c.getSystemService(Context.ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),
                                    Integer.parseInt(wait)*60000, pendingIntent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:35:32.267

该行：

```
pendingIntent = PendingIntent.getBroadcast(c, md5(username+message), myIntent, 0); 
```

不会改变额外的东西 - 见[这里](https://stackoverflow.com/a/15043482/281545)。此外，您还依靠s`requestCode`来区分`PendingIntent`未记录的 s - 请参见[此处](https://stackoverflow.com/a/10538554/281545)。你让它工作了吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T02:09:50.247

Try using:

```
intent.putExtra("message", message); 
```

and then

```
message = intent.getStringExtra("message"); 
```

instead of the `Bundle`.

# c++ - 在哪里建立连接是否重要？

> ID：10543946
> 
> 赞同：0
> 
> 时间：2012-05-11T00:37:18.590
> 
> 标签：c++, qt, signals-slots

我想知道在对象上建立连接的位置是否重要。例如，通常我在发出可能发出信号的调用之前执行此操作，但有时如果它的节点位于（例如在调用之前不存在的 QNetworkReply）上，我必须在之后执行此操作。也许在建立连接之前我还必须进行一些检查。

在建立连接以将此信号连接到插槽之前，是否有可能发出信号？

例如：

```
ClassA::function() {

   ClassB b;

   b.someCall();

   connect(&b, SIGNAL(finished()), this, SLOT(someSlot()));
}

ClassB::someCall() {

    emit finished();

} 
```

插槽会在这里调用吗？这可能不是一个非常实际的示例，因为在这种情况下您可能只使用返回值。但在某些情况下，我会这样做，例如，如果“someCall”是一个您可以跳过的例程并且它可能会失败，或者如果该例程中的网络请求失败，或者如果我们在一开始就遇到了一些错误。无论哪种方式，都应该发出“failed()”信号并有一个槽来处理任何类型的故障。例如;

```
ClassB::someCall() {

   allocate "something"

   if(something == NULL) emit finished();

   QNetworkReply *reply = someNetworkAccessManager.put(something);

   connect(reply, SIGNAL(finished()), this, SIGNAL(finished())); 

} 
```

所以在这里我们有一个调用，它可以立即或在一段时间后发出finished()。如果我在拨打此电话后创建连接，是否会捕获第一个 finished() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:05:02.050

不，moc 处理 QT 的连接宏，并创建所有必要的基础来实现信号和插槽的魔力。只要 moc 在尝试解析函数调用时，将代码添加到项目的位置的可见性在编译器的范围内，一切都会好起来的。在实践中，我们尽可能早地将这些连接调用，即在声明对象之后，在使用它之前，在标头中。

# javascript - 更新显示在 HTML5 画布上的 javascript 变量的值

> ID：10543948
> 
> 赞同：1
> 
> 时间：2012-05-11T00:37:33.847
> 
> 标签：javascript, html5-canvas

我正在制作一个基于网络的游戏，使用 HTML5 画布和 JavaScript 教用户一些基本的威尔士语。目前，我的游戏有一个数字 1-10 的图像列表，以及一个数字 1-10 的威尔士语单词列表。当用户开始游戏时，图像列表中的随机图像和单词列表中的随机单词会显示在画布上。还显示了一个勾号和一个叉号，并且要求用户通过单击勾号或叉号来指示所显示的单词是否与所显示的数字正确。

我有一个 JavaScript 变量“currentScore”，它显示在画布顶部的“得分栏”中，每次用户正确选择图像和显示的单词是否代表相同的号码。但是，我无法弄清楚如何做到这一点。

目前，我有以下代码，它在画布上显示分数，但在错误的位置 - 它位于分数栏下方。它还以某种“气泡”字体显示它，而不是我想要使用的字体 Calibri。

此外，当用户多次单击勾号或叉号时，会在用户的分数中添加另一个点，尽管 currentScore 的值已更新，并写入画布（在同一个错误的位置），但它不会清除之前写在那里的乐谱，所以我最终在画布上写了几个乐谱，这使得实际乐谱不清楚，因为很难阅读。

这是我的功能的代码：

```
/*Add an event listener to the page to listen for a click on the tick or the cross, if the user clicks
            the right one to indicate whether the image and word relate to the same number or not, increase the
            user's score*/
        myGameCanvas.addEventListener('click', function(e){
            console.log('click: ' + e.pageX + '/' + e.pageY);
            var mouseX = e.pageX - this.offsetLeft;
            var mouseY = e.pageY - this.offsetTop;
            /*If the tick is clicked, check whether or not the image and word represent the same number, if they do,
                increase the score, if not, leave the score as it is*/
            if((mouseX > 250 && mouseX < 300) && (mouseY > 200 && mouseY < 250) && (drawnImage == drawnWord)){ 
                currentScore = currentScore + 5;
                var scorePositionX = currentScorePositionX;
                var scorePositionY = currentScorePositionY;
                context.clearRect(scorePositionX, scorePositionY, 30, 30); /*Clear the old score from the canvas */
                context.strokeText(currentScore, 650, 50); /*Now write the new score to the canvas */
                console.log('Current Score = ' + currentScore);
            } else if((mouseX > 250 && mouseX < 300) && (mouseY > 200 && mouseY < 250) && (drawnImage != drawnWord)){
                currentScore = currentScore; 
                console.log('Current Score = ' + currentScore);

            /*If the cross is clicked, check whether or not the image and word represent the same number, if they 
                don't, increase the score, otherwise, leave the score as it is*/
            } else if((mouseX > 350 && mouseX < 400) && (mouseY > 200 && mouseY < 250) && (drawnImage != drawnWord)){
                currentScore = currentScore + 5;
                context.clearRect(currentScorePositionX, currentScorePositionY, 20, 20); /*Clear the old score from the canvas */
                context.strokeText(currentScore, 500, 50); /*Now write the new score to the canvas */
                console.log('Current Score = ' + currentScore);
            } else if ((mouseX > 350 && mouseX < 400) && (mouseY > 200 && mouseY < 250) && (drawnImage == drawnWord)){
                currentScore = currentScore; 
                console.log('Current Score = '+ currentScore); 
            } else {
                console.log('The click was not on either the tick or the cross.');
            }
        }, false); 
```

有人可以向我指出我做错了什么，以及如何让当前分数显示在我的分数栏中，并在每次用户通过单击勾选或正确选项注册分数时更新那里十字？

我的分数条的代码是：

```
function drawGameElements(){

            /* Draw a line for the 'score bar'. */
            context.moveTo(0, 25);
            context.lineTo(700, 25);
            context.stroke();

            /* Draw current level/ total levels on the left, and current score on the right. */
            context.font = "11pt Calibri"; /* Text font & size */
            context.strokeStyle = "black"; /* Font colour */
            context.strokeText(currentLevel + "/" + totalLevels, 10, 15);
            context.strokeText(currentScore, currentScorePositionX, currentScorePositionY);
        } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:43:39.233

1.  分数条被绘制为 700 像素长，但是当分数条被清除时，clearRect 使用 20 或 30 像素的长度来清除它。这应该清除整个得分栏吗？

    *   此外，在为当前分数执行 strokeText 时，每次调用时 x/y 值都不同（500 或 650）。
    *   我们没有您设置（或更改）currentScorePositionX 和 Y 变量的代码，因此也可能值得检查这些值 - 它们是否一致，是否设置正确等
2.  我不确定字体问题发生了什么。同样，我们没有所有的代码，所以我们必须做出一些假设。我假设上下文存储在全局变量中。stackoverflow 上的另一个线程在忽略字体的画布上存在问题： [HTML 5 画布字体被忽略](https://stackoverflow.com/questions/3349947/html-5-canvas-font-being-ignored)
    ，他们发现他们正在调用 getContext，它正在重置画布状态。这也可能值得研究您的代码。

希望这会有所帮助

# asp.net-mvc - 为 JsonResult 调用 @Html.Action 会更改我在父模板中的响应类型

> ID：10543953
> 
> 赞同：11
> 
> 时间：2012-05-11T00:38:39.537
> 
> 标签：asp.net-mvc, content-type, jsonresult

我有以下控制器：

```
public class HelloController
{
    public ActionResult Index()
    {
        return View()
    }

    public ActionResult Hello()
    {
        return Json(new{ greeting = "hello, world!" }, JsonRequestBehavior.AllowGet);
    }
} 
```

然后，在里面`Index.cshtml`：

```
...html stuffs
<script type="text/javascript">
    alert("@Html.Action("Hello")");
</script> 
```

我发现，当在我的浏览器中访问这个 url 时，响应内容类型会`application/json; charset=utf-8`导致浏览器将 html 呈现为字符串而不是...网页。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T01:51:48.877

只需使用的重载`Json(...)`来设置正确的内容类型。

```
public class HelloController
{
    public ActionResult Index()
    {
        return View()
    }

    public ActionResult Hello()
    {
        return Json(new{ greeting = "hello, world!" }, "text/html", JsonRequestBehavior.AllowGet);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T05:13:33.590

原因是所有`Html.Action`调用都是直接执行的。就像是：

1.  索引被称为
2.  查看结果执行
3.  执行hello动作，set的ContextType
4.  返回索引视图结果
5.  浏览器显示页面

你有两个选择：

1.  打破生成“Hello world！”的逻辑 进入常规 C# 类并直接在 Index 控制器操作中调用它
2.  通过 ajax 加载 Hello 动作，然后显示`alert`.

### 选项1

```
public class HelloController
{
    YourBusiness _yb;

    public HelloController(YourBusiness yb)
    {
        _yb = yb;
    } 
    public ActionResult Index()
    {
        return View(yb.GenerateHello())
    }

    // used for everything but Index
    public ActionResult Hello()
    {
        return Json(new{ greeting = yb.GenerateHello() }, JsonRequestBehavior.AllowGet);
    }
}

public class YourBusiness
{
    public string GenerateHello()
    {
        return "Hello wolrd!";
    }
} 
```

### 选项 2

```
<script type="text/javascript">
    $.get('@Url.Action("Hello")', function(response) {
        alert(response.greeting);
    }
</script> 
```

### 边注

Internet Explorer 在缓存方面非常激进。JSON 响应将被更改。因此，我建议您也不要为 JSON 操作指定缓存：

```
[OutputCache(Duration = 0, NoStore = true)]
public ActionResult Hello()
{
    return Json(new{ greeting = "hello, world!" }, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T01:38:21.260

如果通过调用 Json() 方法返回 JsonResult，它不会返回网页。要返回一个页面，您需要通过调用 View 方法返回一个 ViewResult。你的方法应该有一个对应的视图模板

查看[此](http://goo.gl/cIT6y)链接或[此](http://www.pluralsight-training.net/microsoft/players/PSODPlayer?author=scott-allen&name=mvc3-building-views&mode=live&clip=0&course=aspdotnet-mvc3-intro)链接

# javascript - 控制文本在 iframe 中对齐和浮动（同域）

> ID：10543959
> 
> 赞同：0
> 
> 时间：2012-05-11T00:39:17.120
> 
> 标签：javascript, html

我有一个宽度为内部文本的 iframe，我想将此文本对齐在 iframe 的右侧。iframe 的 src 在同一个域上。是否可以使用 JavaScript，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T00:55:59.120

您可以为 iframe 中显示的页面调用创建一个 javascript 函数来设置文本的位置。然后您可以从 iframe 外部调用该函数

```
document.getElementById('myiframe').contentWindow.setTextToRightHandSide(); 
```

里面的html可以是这样的

```
<html>
<head>
    <title>inside html</title>
    <script>
        function setTextToRightHandSide() {
            var div = document.getElementById('textBlock');

            div.style.position = "absolute";
            div.style.right = "0px";
        }
    </script>
</head>

<body>
    <div id="textBlock">some text here</div>
</body>
</html> 
```

# php - 解释php输出

> ID：10543960
> 
> 赞同：3
> 
> 时间：2012-05-11T00:39:23.317
> 
> 标签：php, casting

谁能用 PHP 解释下面的输出？

```
$num1 = (1.65 - 1.00);
echo "<br><br>num1 = " . $num1;   // Output: int = 0.65

$num_int1 = $num1 * 100;
echo "<br><br>int = " . $num_int1;   // Output: int = 65

$num_int2 = (int) $num_int1;
echo "<br><br>int = " . $num_int2;   // Output: int = 64 
```

为什么 $num_int2 是 64？

感谢帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T00:41:08.940

从[我为 Authorize.Net 写的一篇文章中](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Precision-Math-with-PHP/ba-p/8368)（在你的具体情况下`$num_int1`是一个浮点数，即使它看起来像一个整数）：

一加一等于二，对吧？0.2 加上 1.4 乘以 10 怎么样？那等于16，对吧？如果您使用 PHP（或大多数其他编程语言）进行数学运算，则不会：

```
echo floor((0.2 + 1.4) * 10); // Should be 16\. But it's 15! 
```

这是由于浮点数是如何在内部处理的。它们以固定的小数位数表示，并且可能导致数字加起来不像您期望的那样。在内部，我们的 0.2 加 1.4 乘以 10 示例计算大约为 15.9999999998 左右。当处理不需要像百分比这样精确的数字时，这种数学方法很好。但是，当处理货币精度问题时，这里或那里丢失的一分钱或一美元很快就会加起来，没有人喜欢在任何丢失的钱中亏本。

**BC 数学解决方案**

幸运的是，PHP 提供了[BC Math 扩展](http://us2.php.net/manual/en/book.bc.php)，“用于任意精度数学 PHP 提供了二进制计算器，它支持任何大小和精度的数字，以字符串表示。” 换句话说，您可以使用此扩展对货币价值进行精确的数学运算。[BC Math 扩展包含](http://us2.php.net/manual/en/ref.bc.php)允许您精确执行最常见操作的函数，包括[加法](http://us2.php.net/manual/en/function.bcadd.php)、[减法](http://us2.php.net/manual/en/function.bcsub.php)、[乘法](http://us2.php.net/manual/en/function.bcmul.php)和[除法](http://us2.php.net/manual/en/function.bcdiv.php)。

**一个更好的例子**

这是与上面相同的示例，但使用 bcadd() 函数为我们进行数学运算。它需要三个参数。前两个是我们希望添加的值，第三个是我们希望精确到的小数位数。由于我们使用的是金钱，我们将精度设置为小数点后两位。

```
echo floor(bcadd('0.2', '1.4', 2) * 10); // It's 16 like we would expect it to be. 
```

# android - context.openFileOutput() 与 file.createNewFile()？

> ID：10543963
> 
> 赞同：2
> 
> 时间：2012-05-11T00:39:35.913
> 
> 标签：android

我已使用 File 对象和各种 FileReaders/Writers 和 BufferedReaders/Writers 将我的应用程序的所有数据放在 SD 卡上的目录和子目录中。

我突然想到并非所有设备都有 SD 卡，所以我现在有 4 个问题。

1.  有谁知道目前运行Android的手机中有多少百分比不支持SD卡？

2.  有没有一种方法可以让我自己操作手机内存（应用程序目录）的文件结构，就像我可以在 SD 卡上一样？

    *   或者 -
3.  我是否必须重新实现我的所有代码才能使用 openFileOutput() 而不是 createNewFile() 在我的应用程序中复制 SD 卡文件行为？

4.  为什么 SD 与应用程序目录的文件访问首先存在差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T03:38:15.157

> 1）有人知道目前运行Android的手机中有多少百分比不支持SD卡？

即使手机**可以**支持 SD 卡，但这并不意味着它**在**给定的时刻支持它，因为 SD 卡可以被移除或安装以供 PC 访问或有数百个其他原因。所以，不要把重要的东西放在那里。

> 2）有没有一种方法可以让我自己操作手机内存（应用程序目录）的文件结构，就像我可以在 SD 卡上一样？

内存文件不能有任何层次结构，`openFileOutput()`如果您的文件名内部有路径分隔符，则会给您例外。`/data/data/com.your.app/files`除此之外，您可以在目录中放置多少个文件没有限制。而且您不需要任何特定权限即可在那里创建/打开文件。

> 3) 我是否必须重新实现我的所有代码才能使用 openFileOutput() 而不是 createNewFile() 在我的应用程序中复制 SD 卡文件行为？

我不会。基本上，应用程序的所有小文件和/或对生命至关重要的文件都进入内存，所有大的和非必要的文件（图像、视频？）都进入 SD 卡。不会有冲突，您的应用程序可以完美启动，如果 SD 卡不可用，请抱怨。

# php - 使用正则表达式对物化路径结构化数据进行 Mysql 更新

> ID：10543970
> 
> 赞同：0
> 
> 时间：2012-05-11T00:40:41.583
> 
> 标签：php, mysql, materialized-path-pattern

如何在 mysql 中执行更新查询，其中匹配字符串的开头并将匹配的部分替换为另一个字符串？

我的问题的背景是我正在使用物化路径来构造我的分层数据，并且需要这种类型的查询来将一个节点及其所有子节点移动到另一个节点。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T01:13:45.450

尝试类似：

```
SELECT REPLACE(column, "search","replace") FROM table WHERE column LIKE "search%"; 
```

干杯!

# javascript - NodeJS套接字IO停止随机发射？

> ID：10543977
> 
> 赞同：27
> 
> 时间：2012-05-11T00:43:22.127
> 
> 标签：javascript, node.js, socket.io

我正在运行 Node 0.6.16，并且所有模块至少根据 npm (win7 x64) 是最新的。我可以注意到，即使我没有断开连接，但由于某种原因，过了一段时间，我无法判断，可能是 1 小时，浏览器没有收到任何数据。在 FF 上似乎比在 Chrome 上更频繁。

```
socket.on('disconnect', function (){console.log('disconnected')}); 
```

这永远不会针对该特定事件触发（我的意思是它可能发生，但随后我得到日志并且 socket.io 自动重新连接 - 在这种情况下，什么都没有发生，它只是停止工作，这是最常见的事件）。

所以我不知道在哪里看。NodeJS 仍然记录心跳，但由于某种原因，连接没有通过。我怀疑，在（任何？）浏览器的选项卡更改时，一段时间后，由于窗口/选项卡不再具有焦点，socket.io 停止接收数据？我可能是错的，它可能与焦点无关，但这是我的主要线索。其他人有任何想法吗？

**编辑**：客户端非常简单：

```
socket = io.connect('http://xxx.xxx.xxx.xxx:8081', {secure:false, 'reconnect': true, 'reconnection delay': 500, 'max reconnection attempts': 10});      
            socket.on('connect', function(){console.log('connected')});
            socket.on('message', function(data){//do something);        

            socket.on('disconnect', function (){console.log('disconnected')}); 
```

**Edit2**：更新到最新版本的 socket.io (1.2.1) 和节点 v0.10.35 后，我仍然遇到同样的问题。更令人惊讶的是，我在客户端中添加了以下代码：

```
function checkSocket(){
    if(socket){
        if(!socket.connected){
            console.log('socket disconnected');
            clearInterval(intv);
        }
    }       
}

intv = setInterval(checkSocket, 1000); 
```

虽然该函数每秒运行一次，但它永远不会记录套接字已断开连接，即使它不再接收任何内容并且仍在发送心跳。

**Edit3：**好的，这是在我的服务器端代码上，一些套接字被破坏了。还更新到 v1.x 并强制重新连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-26T22:51:16.867

因此，既然我似乎没有更多问题，我想我会分享我的后端代码。我相信我的问题是我正在覆盖套接字。

```
var clients = {};
var app = require('https').createServer(options),
io = require('socket.io').listen(app);  
app.listen(8081);

io.sockets.on('connection', function(__socket) {
    var id = __socket.id;
    var ip = __socket.request.connection.remoteAddress;
    clients[id] = {socket:__socket, ip:ip}; 
    clients[id].socket.on('disconnect', function() {
        delete clients[id];     
   });
}); 
```

# selenium - Selenium 2 Webdriver - 当我尝试执行 sendKeys 时，Div 标签向上移动

> ID：10543978
> 
> 赞同：0
> 
> 时间：2012-05-11T00:43:22.900
> 
> 标签：selenium, selenium-webdriver

几天后我开始学习 selenium 2，当我尝试自动化测试时，出现以下错误。问题：我有一个由 3 个 div 标签组成的页面 - 第一个是水平的标题，然后我有 2 个相邻的 div 标签 div2 是左侧， div3 是右侧。当我尝试使用像 element.sendKeys("test") 这样的硒输入数据时，它会向上移动整个 Div 标签并扰乱页面布局。我发现的唯一选择是使用 Javascript 执行器并使用 jquery 输入数据，但我不能对所有元素都这样做，因为网站到处都有相同的布局。

你能帮我解决这个问题吗？

我可以通过将 padding-top 更改为更高的值来拉低 div。

当我们自动化和重放时，这很好用， div 标签不会受到干扰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:07:38.323

您可以尝试通过以下方式在 div 中输入文本：

```
element.Text = "Your text"; 
```

我不确定为什么要移动您的 div，但我想这可能是 Web 布局问题而不是硒问题。您是否尝试过在 div 中添加文本框或其他内容来显示文本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:12:58.633

我刚刚遇到了一个类似的问题，这是由使用 javascript 更改“div”的“样式”引起的。

因为 div 的原始样式包括它在页面上的位置，所以覆盖它会导致它移动。

我解决这个问题的方法是在更改样式时，我添加了样式，而不是完全替换它。

希望这可以帮助。

# jquery - Bootbox 确认对话框问题

> ID：10543979
> 
> 赞同：13
> 
> 时间：2012-05-11T00:43:40.910
> 
> 标签：jquery, twitter-bootstrap, bootbox

不幸的是，文档 Bootbox（[http://paynedigital.com/2011/11/bootbox-js-alert-confirm-dialogs-for-twitter-bootstrap](http://paynedigital.com/2011/11/bootbox-js-alert-confirm-dialogs-for-twitter-bootstrap)）没有教如何调用确认对话框。因为它在页面加载时总是出现在文档窗口中，所以当通过单击删除按钮调用时应该出现错误。这是尝试失败的代码。

```
// show "false" does not work, the confirm window is showing when page is loaded.
$(function () {
bootbox.confirm("Confirm delete?", "No", "Yes", function(result) {
show: false
});     
});

// need show the confirm window when the user click in a button, how to call the confirm window?

<td><a class="icon-trash" onclick="bootbox.confirm();" href="{% url 'del_setor' setor.id %}" title="Delete"></a></td> 
```

如何设置此引导框仅在单击删除按钮时出现？谢谢！

编辑 - 解决方案：

```
$(function () {
$("a#confirm").click(function(e) {
    e.preventDefault();
    var location = $(this).attr('href');
    bootbox.confirm("Confirm exclusion?", "No", "Yes", function(confirmed) {
        if(confirmed) {
        window.location.replace(location);
        }
    });
});     
}); 
```

现在，当我单击“是”时，删除工作。我要求插件的开发人员将完整的示例放在文档中，这样用户就不需要创建关于如何在单击“是”时删除对象的帖子。问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T13:18:44.273

您可能需要在本页“基本用法”下的“确认”链接上查看来源：http: [//bootboxjs.com/](http://bootboxjs.com/)

这是一个片段：

```
$("a.confirm").click(function(e) {
    e.preventDefault();
    bootbox.confirm("Are you sure?", function(confirmed) {
        console.log("Confirmed: "+confirmed);
    });
}); 
```

假设 jQuery 在您正在处理的 UI 中可用，我会避免`onClick`在锚标记中使用属性。只是我的两分钱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-19T15:14:21.017

我也需要那个，但我改变了一些东西......看看......

将此函数添加到您的全局“jQuery Ready”函数中，如下所示：

```
$(document).on("click", "[data-toggle=\"confirm\"]", function (e) {
    e.preventDefault();
    var lHref = $(this).attr('href');
    var lText = this.attributes.getNamedItem("data-title") ? this.attributes.getNamedItem("data-title").value : "Are you sure?"; // If data-title is not set use default text
    bootbox.confirm(lText, function (confirmed) {
        if (confirmed) {
            //window.location.replace(lHref); // similar behavior as an HTTP redirect (DOESN'T increment browser history)
            window.location.href = lHref; // similar behavior as clicking on a link (Increments browser history)
        }
    });
}); 
```

只需将一些“数据-* 属性”添加到您的按钮或链接中，如下所示：

```
<a class="btn btn-xs btn-default" data-toggle="confirm" data-title="Do you really want to delete the record 123?" href="/Controller/Delete/123"><span class="fa fa-remove"></span> </a> 
```

所以......这样你就可以有一个个性化的问题......这对你的用户来说更直观......

你喜欢吗？！

见演示：[jsfiddle](http://jsfiddle.net/rodolphobrock/s3zmxeg8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T11:54:45.173

```
$(document).on("click", ".confirm-modal", function(e) {
    e.preventDefault();
    bootbox.confirm("Are You sure?", function(result) {
        if(result) {
            top.location.href = e.target.href;
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-14T22:18:31.873

**网格链接按钮的 Aspx 侧：**

```
<asp:LinkButton ID="LinkButton2" runat="server" CommandName="DELETE"  
    OnClientClick="javascript:return DeleteConfirm(this,'Are you Sure?');" CausesValidation="False" Text="Delete" > Delete
</asp:LinkButton> 
```

```
 function DeleteConfirm(btn, msg) 
    { 
            if(msg==''){msg='Are You Sure ? ';}

            if ($(btn).attr('confirmOK')=='1'){return true;}

              bootbox.confirm({
                    title: 'Confirm Popup',
                    message: msg,                   
                    callback: function(result) {
                             if (result) 
                             { 
                                $(btn).attr('confirmOK', '1');
                                 btn.click();
                             }
                             else{
                               $(btn).attr('confirmOK', '0');
                             }
                    }
                });

            return false;
     }; 
```

# css - 清除前在不同 div 中多次浮动

> ID：10543981
> 
> 赞同：1
> 
> 时间：2012-05-11T00:44:11.633
> 
> 标签：css, css-float, google-closure

长话短说，我正在使用 Closure goog.ui.TabBar 基础 CSS 来装饰遵循设计模式的 div。主要的“tabBar” div 应该包含您的选项卡按钮（也是 div），它们都彼此相邻浮动。我似乎无法让内容 div（在这些下面）排队。:after clearing 关闭 CSS（包括）正在清除我的侧边栏。想法？

[http://jsfiddle.net/hvMaf/2/](http://jsfiddle.net/hvMaf/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:21:41.893

为了更好地衡量，解决方案是添加：溢出：隐藏；到#bodycontent 容器（并删除margin-left 以解决某些浏览器兼容性问题。

完成的解决方案：http: [//jsfiddle.net/hvMaf/7/](http://jsfiddle.net/hvMaf/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T02:51:37.370

鉴于您的描述，我已经设法复制了我认为您想要的东西，但这是一种黑客行为，因此不推荐它，[但无论如何都是这样](http://jsfiddle.net/XGuJy/)。我更改了版权的位置并增加了内容框的大小，并在顶部添加了两条新规则。作为参考，我确实尝试了 100% 的宽度，但它没有用。

# input - RubyMine 中的语言特定输入

> ID：10543982
> 
> 赞同：1
> 
> 时间：2012-05-11T00:44:15.467
> 
> 标签：input, character, rubymine

我刚开始使用 RubyMine，但遇到了一些非常烦人的问题。女巫是，我无法输入一些特定于语言的字符。例如。我的默认语言是拉脱维亚语，女巫有一些特殊的字符，英语没有，比如 => (ā, č, ķ, ļ)。而且，看起来，RubyMine 不允许我在编辑器中使用这些字符。如果我将它们写入，例如，记事本并在 RubyMine 中复制/粘贴，它可以工作..但我不能直接用我的键盘输入它们..

注意：这些字符采用 UTF-8 编码 :)

希望有人能帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:40:22.297

它似乎是一个特定于拉脱维亚语输入的错误`AltGr`（右`Alt`），我们[为它创建了一个新问题](http://youtrack.jetbrains.com/issue/IDEA-85942)，星号/投票以接收有关进度的通知。

# ios - iOS - 检测当前设备的电话号码/电子邮件地址？

> ID：10543983
> 
> 赞同：0
> 
> 时间：2012-05-11T00:44:26.327
> 
> 标签：ios, email, detection, phone-number

如果我有用户使用应用程序并且我需要知道他们的 iPhone 电话号码，或者他们用于 iMessages 的电子邮件（如果它是 iTouch 或其他东西），我可以检测到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T05:35:04.023

目前的sdk是不可行的。如果您可以使用私有 API 执行此操作，Apple 将拒绝您的应用程序。愿您可以将其与越狱设备一起使用。

# templates - Magento 通过代码获取电子邮件模板

> ID：10543986
> 
> 赞同：9
> 
> 时间：2012-05-11T00:45:05.620
> 
> 标签：templates, magento

我为自定义模块创建了一个电子邮件模板，将文件放入`app/locale/en_US/template/email`并在我的模块配置 XML 文件中进行了配置。现在我想通过代码在控制器中检索该模板。我试过了 ：

```
$emailTemplate  = Mage::getModel('core/email_template')->loadByCode('custom_template'); 
```

但它会返回一个`NULL`电子邮件模板。我的模块电子邮件模板配置是：

```
<global>
    <template>
        <email>
            <custom_template>
                <label>Some custom email template</label>
                <file>custom_template.html</file>
                <type>html</type>
            </custom_template>
        </email>
    </template>
</global> 
```

我错过了什么？

****编辑****

我找到[了这段](http://blog.decryptweb.com/email-templates-in-magento/)代码，但是这条线

```
$template_collection =  Mage::getResourceSingleton('core/email_template_collection'); 
```

返回一个空集合。我试图查看 Magento 的管理源代码，发现`Mage_Adminhtml_Block_System_Email_Template_Grid`它*也*使用同一行来获取集合，显然，它适用于 Magento，但不适用于我的代码。为什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-11T03:24:19.643

您发布的 PHP

```
$emailTemplate  = Mage::getModel('core/email_template')->loadByCode('custom_template'); 
```

**将从数据库**中加载电子邮件模板。具体来说，从`core_email_template`表。您放置在文件系统上的模板是默认模板。您应该能够使用该`loadDefault`方法加载它。

```
$emailTemplate  = Mage::getModel('core/email_template')->loadDefault('custom_template'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-05T16:02:42.793

如果有人正在寻找如何根据现有的 Magento 电子邮件模板发送 Magento 电子邮件的完整示例代码，那么下面的代码效果很好。它不需要任何 XML 配置。

```
// This is the name that you gave to the template in System -> Transactional Emails
$emailTemplate = Mage::getModel('core/email_template')->loadByCode('My Custom Email Template');

// These variables can be used in the template file by doing {{ var some_custom_variable }}
$emailTemplateVariables = array(
'some_custom_variable' => 'Hello World'
);

$processedTemplate = $emailTemplate->getProcessedTemplate($emailTemplateVariables);

$emailTemplate->setSenderName('Joe Bloggs');
$emailTemplate->setSenderEmail('test@test.com');
$emailTemplate->setTemplateSubject("Here is your subject");

$emailTemplate->send('recipient@test.com', 'Joanna Bloggs', $emailTemplateVariables); 
```

# c++ - 内存管理不好？类成员（布尔）值大于 1，在递归函数中

> ID：10543987
> 
> 赞同：1
> 
> 时间：2012-05-11T00:45:08.150
> 
> 标签：c++, memory, memory-leaks, recursion

我正在研究子图匹配问题（匹配分子内的化学官能团）。原始代码是由另一个学生编写的（在 Visual C++ 下，没有特定于 MS 的库），它**在 Windows 上运行良好**。然后我在程序中添加了新函数，但没有改变子图匹配的算法，新程序在 gcc4.2/Mac OS X 下编译得很好。但是我在运行时遇到了奇怪的问题！

此处相关的对象及其成员：

1.  Atom：包含 ID、Element、Bond 列表（指向 Bond 对象的指针向量）、search_mark (bool)。获取变量并将 search_mark 设置为 true 或 false 的函数。

2.  Bond：包含一个由 2 个指向原子 A 和 B 的指针组成的数组，以及一个在使用参数 atom* B 调用时返回 atom* A 的函数，反之亦然。

3.  分子：包含指向原子的指针向量，以及使用原子 ID 或向量内的位置获取原子*的函数。

4.  Atom 的子类：HammettAtom。它包含的额外成员是指向相关分子原子的原子指针。

这是递归函数的算法：对于数组 A 中的每个原子，与数组 B 中的一个原子（Hammett 群，通常大小约为 10-20 个原子）进行比较。如果元素相同，则获取每个元素的连接原子列表，然后重复。测试的原子沿途被标记，因此在某一时刻将不再有未标记的连接原子。

这是**代码（未更改**，我只添加了 cout 位进行测试）。当函数第一次被调用时，第一个向量是来自测试分子的单个原子，第二个向量是哈米特组分子的第二个原子。（Hammett 中的第一个原子的 ID 为“X”，可以是任何东西。）

```
bool HammettCheck::checkSubproblem(vector<Atom*> bonded_atoms, vector<Atom*> my_list) 
{
unsigned int truth=0;
vector<Atom*> unmarked_bonded;
vector<Atom*> unmarked_list;
cout << "\n size of Hammett array: " <<my_list.size()<< " size of mol array: "<< bonded_atoms.size() << endl; //for testing
//If number of connected atoms is different, return false.
if( bonded_atoms.size() != my_list.size() ){
    return false;
}

//Create new lists.
for(unsigned int i=0; i < bonded_atoms.size() ; i++){

    //Create list of unmarked connected atoms in molecule.
    if( !bonded_atoms[i]->isMarked() ){
        unmarked_bonded.push_back(bonded_atoms[i]);
    }

    //Create list of unmarked connected atoms in hammett.
    if( !my_list[i]->isMarked() ){
        unmarked_list.push_back( my_list[i] );
    }
}
cout << "size of unmarked Hammett array: " << unmarked_list.size() << " size of unmarked mol array: "<< unmarked_bonded.size() <<endl; //for testing
//If number of unmarked connected atoms is different, return false.
if( unmarked_bonded.size() != unmarked_list.size() ){
    return false;
}

//Check each unmarked atom connected in the molecule against possible atoms it could be in the hammett group.
for(unsigned int i=0; i < unmarked_bonded.size(); i++){
  cout<< "atom in um_mol array considered ID: " << unmarked_bonded[i]->getID() << " Ele: " << unmarked_bonded[i]->getEle()<< endl;
    /*Unmarked hammett assigned in reverse order so that the undefined "X" atom is only 
      assigned if a connected atom can not possibly be any other atom.*/
    for(int j=(unmarked_list.size()-1); j > -1; j--){
      cout << "atom in um_h_array considered ID: " << unmarked_list[j]->getID() << endl;
        //If hammett atom has already been assigned to a connected atom, it cannot be assigned to another
        if(!unmarked_list[j]->isMarked()){
          cout << unmarked_list[j]->getID() << "is unmarked" <<endl;
            /*If connected atom could only be hammett group's connection 
              to the rest of the molecule, assign it as such.*/
            if( !strcmp(unmarked_list[j]->getEle().c_str(), "X") ){
                unmarked_bonded[i]->mark();
                unmarked_list[j]->mark(unmarked_bonded[i]);
                truth++;
                cout<< "mol atom ID "<< unmarked_bonded[i]->getID() <<" marked as X, current truth: "<< truth << endl;
                cout << unmarked_list[j]->getID() << "is now marked(1)/unmarked(0) " << unmarked_list[j]->isMarked() << " and break loop "<<endl;
                break;
            }

            /*If connected atom is the same element as a possible hammett atom,
              check that atoms connections by running them through the subproblem.*/
            if( !strcmp(unmarked_bonded[i]->getEle().c_str(), unmarked_list[j]->getEle().c_str()) ){
                unmarked_bonded[i]->mark();
                unmarked_list[j]->mark(unmarked_bonded[i]);
                cout<<"found same ele between mol_id "<< unmarked_bonded[i]->getID() <<" and ham_id " << unmarked_list[j]->getID() <<endl;
                vector<Atom*> new_bonded = getAttachedAtoms( unmarked_bonded[i] );
                vector<Atom*> new_list = getAttachedAtoms( unmarked_list[j] );
                if( checkSubproblem( new_bonded, new_list ) ){
                  cout<<"found same atom"<<endl;
                    truth++;
                    break;

                /*If only the elements are the same do not assign 
                  the hammett atom to this connected atom.*/
                }else{
                    unmarked_bonded[i]->demark();
                    unmarked_list[j]->demark();
                }
            }
        }
    }
}

//Return true if all connected atoms can be assigned atoms of the hammett group.
if( truth == unmarked_bonded.size() ){
    return true;
}else{
    return false;
}
} 
```

我用 29 个原子的测试分子运行编译程序，并将其与两个 Hammett 组进行比较。它应该包含第 2 组，但不包含第 1 组。但是，当我从 2 个具有相同元素的原子开始时，它返回了 true。下面是一个输出样本（分子实际上不包含该原子的哈米特基团）

```
 currently at molecule atom ID 1

 size of Hammett array: 1 size of mol array: 1
 size of unmarked H array: 1 size of unmarked mol array: 1
 atom in um_mol array considered ID: 1 Ele: N
 atom in um_h_array considered ID: N1
 N1is unmarked
 found same ele between mol_id 1 and ham_id N1

 size of Hammett array: 3 size of mol array: 3
 size of unmarked H array: 3 size of unmarked mol array: 3
 atom in um_mol array considered ID: 2 Ele: H
 atom in um_h_array considered ID: O2
 O2is unmarked
 atom in um_h_array considered ID: O1
 O1is unmarked
 atom in um_h_array considered ID: X
 X is unmarked
 mol atom ID 2 marked as X, current truth: 1
 X is now marked(1)/unmarked(0) 128 and break loop 
 atom in um_mol array considered ID: 8 Ele: C
 atom in um_h_array considered ID: O2
 O2is unmarked
 atom in um_h_array considered ID: O1
 O1is unmarked
 atom in um_h_array considered ID: X
 X is unmarked
 mol atom ID 8 marked as X, current truth: 2
 X is now marked(1)/unmarked(0) 160 and break loop 
 atom in um_mol array considered ID: 17 Ele: C
 atom in um_h_array considered ID: O2
 O2is unmarked
 atom in um_h_array considered ID: O1
 O1is unmarked
 atom in um_h_array considered ID: X
 X is unmarked
 mol atom ID 17 marked as X, current truth: 3
 X is now marked(1)/unmarked(0) 128 and break loop 
 found same atom
 Hammet group 2 checkSubproblem true
 Hammett added to atom 1 
```

对不起，如果那很长。**但问题是，在我标记了“X”原子（Hammett 分子中的第一个原子）并尝试获取 search_mark 布尔值之后，它的值大于 1。**因此，X 被错误地“标记”了几次，并且'truth' 计数器上升，直到达到条件 truth == unmarked_bonded.size()。

我不确定实际的问题是什么？值 128 表明存在一些混淆的内存/指针问题，但我不确定如何找出它。我什至不确定它是否与递归函数有关！

如果有人能提出一些我可以尝试的建议，我将不胜感激。提前致谢！

PS Atom 类函数的代码。

```
 string Atom::getID()
{
return id;
}

string Atom::getEle()
{
return ele;
}
void Atom::mark()
{
search_mark = true;
}

void Atom::demark()
{
search_mark = false;
}
void HammettAtom::mark(Atom* assigned)
{
search_mark = true;
related_mol_atom = assigned;
}
bool Atom::isMarked()
{
return search_mark;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:30:18.293

感谢所有的建议。在 Valgrind 下运行程序后，很明显问题与内存泄漏有关。我在确定的“绝对丢失”问题中移动了分配器的位置，并且似乎删除了 search_mark 问题。该程序现在按预期运行，但存在内存泄漏。我还没有设法解决内存泄漏问题，我在[这里](https://stackoverflow.com/questions/10550362/)发布了一个新问题。

# xml - 如何在 AS3 中检索具有特定属性的 XML 元素的索引？

> ID：10543988
> 
> 赞同：0
> 
> 时间：2012-05-11T00:45:32.877
> 
> 标签：xml, indexing, actionscript

有谁知道是否有办法在 ActionScript 中检索具有特定 a 属性的 XML 子元素的索引？

说...

```
foo.child.@attribute //index of 
```

我尝试使用这样的方法：

```
foo.child.@attribute.childIndex() 
```

但它返回`-1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:38:58.273

使用[hasOwnProperty](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XMLList.html#hasOwnProperty%28%29)方法对我有用：

```
foo.child.(hasOwnProperty("@attribute")).childIndex() 
```

但是如果元素 with`@attribute`不是唯一的，那么正确的代码是：

```
foo.child.(hasOwnProperty("@attribute"))[0].childIndex() 
```

# ruby - MongoMapper 返回的时间日期中的 T 和 Z 是什么？

> ID：10543989
> 
> 赞同：0
> 
> 时间：2012-05-11T00:45:39.810
> 
> 标签：ruby, mongodb

当我从 MongoMapper 返回 created_at 和 updated_at 的 JSON 格式时，这是我看到的一个示例

`"updated_at\":\"2012-04-25T16:25:05Z\"`

最后的 T（时间？）和 Z 是什么？

```
 irb(main):009:0> Story.last.created_at
  DEBUG - MONGODB (0ms) prototype_development['stories'].find({}).limit(-1)
=> 2012-04-25 16:24:26 UTC
irb(main):010:0> Story.last.created_at.to_s
  DEBUG - MONGODB (0ms) prototype_development['stories'].find({}).limit(-1)
=> "2012-04-25 16:24:26 UTC"
irb(main):011:0> JSON.parse(Story.last.to_json)['created_at']
  DEBUG - MONGODB (0ms) prototype_development['stories'].find({}).limit(-1)
=> "2012-04-25T16:24:26Z" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T00:51:19.160

这是一种标准化的时间格式 - [ISO8601](http://en.wikipedia.org/wiki/ISO_8601)。

打这个`irb`：

```
> require 'time' #=> true
> Time.now.utc.iso8601 #=> "2012-05-11T01:28:51Z" 
```

来自[维基百科](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)：

> UTC 时区有时用字母 Z 表示——参考等效航海时区 (GMT)，自 1950 年左右以来一直用 Z 表示。该字母还指零小时的“区域描述”，即自 1920 年以来一直使用（参见时区历史）。由于 Z 的 NATO 拼音字母和业余无线电单词是“Zulu”，因此 UTC 有时也称为 Zulu 时间。在航空领域尤其如此，祖鲁语是通用标准。这可确保所有飞行员无论身在何处都使用相同的 24 小时制，从而避免在不同时区之间飞行时出现混淆。请参阅军事时区列表，了解除格林威治以外的合格时区中使用的 Z 以外的字母。

# c# - UIWebView 内容中的 html 按钮可以加载新的 ViewController 吗？

> ID：10543990
> 
> 赞同：3
> 
> 时间：2012-05-11T00:45:41.817
> 
> 标签：c#, ios, uiwebview, xamarin.ios, uiwebviewdelegate

我正在开发一个单点触控应用程序，需要`UIWebView`占用整个屏幕（不显示导航控制器），但在 WebView 内容上有一个按钮能够加载新的 ViewController 来进行条形码扫描。我不太确定如何通过按钮在实际 HTML 内容中而不是在本机端来实现这一点。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T02:59:49.927

> 这甚至可能吗？

应该是因为它听起来类似于：[response UIWebView click action to call up native code page](https://stackoverflow.com/q/8425604/220643)

除了您将使用 MonoTouch / C# 而不是 Objective-C。您可以使用`UIWebViewDelegate`或（更好地）使用更 .NET 风格的[UIWebView.ShouldStartLoad](http://docs.go-mono.com/?link=P:MonoTouch.UIKit.UIWebView.ShouldStartLoad)轻松转换代码。

后面有一个示例：[当 UIWebView 请求开始加载时未调用自定义 UIWebViewDelegate 的 ShouldStartLoad](https://stackoverflow.com/q/5404152/220643)

# python - python中的ctypes有多快？

> ID：10543992
> 
> 赞同：1
> 
> 时间：2012-05-11T00:46:06.083
> 
> 标签：python, python-2.7, ctypes

我刚开始研究 ctypes，对它们的工作原理有点好奇。它与常规 C 实现相比在速度方面如何？在 python 程序中使用 ctypes 会加快还是减慢它基本上是我想知道的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T01:21:28.800

在大多数情况下，没有“常规 C 实现”。Python 数据结构要高一到三个数量级。

要回答您的问题“python 中的 ctypes 有多快？” - 答案是“相当快”。

看看 numpy 的想法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T02:35:47.003

如果只关心速度，请不要使用 Python、PHP、Perl 或其他脚本语言。用 C 或汇编写任何东西。由于这些脚本语言的速度足以构建 Google、Facebook 和 Amazon，因此您会发现它们对于您正在考虑的任何事情都足够快。

# javascript - 创建仪表板和警报的框架

> ID：10543994
> 
> 赞同：0
> 
> 时间：2012-05-11T00:46:07.167
> 
> 标签：javascript, analytics, dashboard, bigdata

我正在写我公司的一个大数据项目。我们正在编写收集大量数据的软件（如数据的点击流）。目前我们将这些数据存储在 HBase 中。我们计划在此基础上构建分析。我们研究了 OBIEE 和一个可能的解决方案，其中聚合的 HBase 数据可以加载到 Oracle 实例并让 OBIEE 位于 Oracle 数据的前面。这可能是一个可行的解决方案，但它有很多依赖关系，我们将受到 Oracle 能力的限制（我们的数据非常庞大）。

如果我们要编写自己的分析门户，主要是创建丰富的用户界面（定期报告仪表板、自定义仪表板）和业务警报，是否有任何框架可以让我轻松做到这一点。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:26:23.670

我是 InfoCaptor 的开发人员，我们刚刚在[https://my.infocaptor.com上发布了我们的仪表板和 BI 免费平台](https://my.infocaptor.com)

您可能想查看它，因为它包含您正在寻找的警报的声音警报

您的反馈总是很感激

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:50:32.327

Since you are using HBase (open source/Cloud db), I do not see the reasoning of using oracle (proprietary / RDBMS). Its sort of one step back in my view. I think irrespective of complexity, scale of requirements all analytic data can be gathered by using a set of MapReduce jobs on Hadoop with help of HBase coprocessors and this data can be stored on hbase itself. For faster reads you can use a caching front end tool such as Redis / memcached.

For realtime analytic data you can use Hadoop pipeline capability.

Hope this helps. We have been using this combination since a while and the results are astounding.

# r - 绘制 x 的列与 y 中的另一列，按 R 中的某个索引分组

> ID：10543995
> 
> 赞同：1
> 
> 时间：2012-05-11T00:46:07.487
> 
> 标签：r, group-by, plot, ggplot2

我正在用 R 编写一个程序。我有一个这样的数据集：

```
 category  x-value y-value 
         1        2       5
         1        3       1
         1        4       10
         1        5       23
         2        2       12
         2        3       15
         2        4       21
         2        5       29
         3        2       34
         3        3       45
         3        4       7
         3        5       9 
```

我想找到一种简单的方法来按“类别”对数据进行分组，并将这 3 组数据绘制在一个 xyplot 上。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T01:26:46.390

使用`ggplot2`? 像这样的东西？

```
df = read.table(text = "
category  x-value y-value 
     1        2       5
     1        3       1
     1        4       10
     1        5       23
     2        2       12
     2        3       15
     2        4       21
     2        5       29
     3        2       34
     3        3       45
     3        4       7
     3        5       9", header = TRUE, sep = "")

library(ggplot2)
ggplot(df, aes(x.value, y.value, colour = factor(category))) + geom_point() +
  geom_path() 
```

![在此处输入图像描述](../Images/f21ca929e908e38b30c7397ace037ae9.png)

或这个？

```
ggplot(df, aes(x.value, y.value, shape = factor(category), 
colour = factor(category))) + geom_point(size = 5) 
```

![在此处输入图像描述](../Images/7e138689859259acd3c62f92e10e82ca.png)

# python - 刮痧。开始抓取后如何更改蜘蛛设置？

> ID：10543997
> 
> 赞同：7
> 
> 时间：2012-05-11T00:46:42.483
> 
> 标签：python, web-scraping, scrapy

我无法在解析方法中更改蜘蛛设置。但这绝对是一种方式。

例如：

```
类SomeSpider（BaseSpider）：
    名称 = '我的蜘蛛'
    allowed_domains = ['example.com']
    start_urls = ['http://example.com']
    settings.overrides['ITEM_PIPELINES'] = ['myproject.pipelines.FirstPipeline']
    打印设置['ITEM_PIPELINES'][0]
    #printed 'myproject.pipelines.FirstPipeline'
    def 解析（自我，响应）：
        #...一些代码
        settings.overrides['ITEM_PIPELINES'] = ['myproject.pipelines.SecondPipeline']
        打印设置['ITEM_PIPELINES'][0]
        # 打印'myproject.pipelines.SecondPipeline'
        项目 = Myitem()
        item['mame'] = 'SecondPipeline 的名称'  

```

但！项目将由 FirstPipeline 处理。新的 ITEM_PIPELINES 参数不起作用。开始抓取后如何更改设置？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-26T21:23:39.040

如果您希望不同的蜘蛛具有不同的管道，您可以为蜘蛛设置一个管道列表属性，该属性定义该蜘蛛的管道。比在管道中检查是否存在：

```
class MyPipeline(object):

    def process_item(self, item, spider):
        if self.__class__.__name__ not in getattr(spider, 'pipelines',[]):
            return item
        ...
        return item

class MySpider(CrawlSpider):
    pipelines = set([
        'MyPipeline',
        'MyPipeline3',
    ]) 
```

如果您希望不同的项目由不同的管道处理，您可以这样做：

```
 class MyPipeline2(object):
        def process_item(self, item, spider):
            if isinstance(item, MyItem):
                ...
                return item
            return item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-26T20:48:33.753

基于这个信息丰富的[问题​​#4196](https://docs.scrapy.org/en/latest/topics/telnetconsole.html#telnet-console-usage-examples)与[远程登录控制台](https://docs.scrapy.org/en/latest/topics/telnetconsole.html)相结合，可以做到这一点，甚至是在执行后。

将 telnet 客户端附加到*端口*（例如`1234`）和启动命令时记录的*密码*`scrapy crawl`，并发出以下交互式 Python 语句来修改当前运行的`downloader`：

```
$ telnet  127.0.0.1  6023  # Read the actual port from logs.
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
Username: scrapy
Password: <copy-from-logs> 
```

```
>>> engine.downloader.total_concurrency
8
>>> engine.downloader.total_concurrency = 32
>>> est()
Execution engine status

time()-engine.start_time                        : 14226.62803554535
engine.has_capacity()                           : False
len(engine.downloader.active)                   : 28
engine.scraper.is_idle()                        : False
engine.spider.name                              : <foo>
engine.spider_is_idle(engine.spider)            : False
engine.slot.closing                             : False
len(engine.slot.inprogress)                     : 32
len(engine.slot.scheduler.dqs or [])            : 531
len(engine.slot.scheduler.mqs)                  : 0
len(engine.scraper.slot.queue)                  : 0
len(engine.scraper.slot.active)                 : 0
engine.scraper.slot.active_size                 : 0
engine.scraper.slot.itemproc_size               : 0
engine.scraper.slot.needs_backout()             : False 
```

# html - HTML5 视频无法验证

> ID：10543999
> 
> 赞同：0
> 
> 时间：2012-05-11T00:46:54.023
> 
> 标签：html, validation, video, embed

我最初在我正在从事的这个项目中使用嵌入式 Youtube 视频；但是，我无法让验证工作，所以我想我会尝试 HTML5 视频的东西。我似乎也遇到了麻烦：如果您尝试验证此代码，则会收到一些奇怪的错误：

> [http://pastie.org/3892548](http://pastie.org/3892548)

我把代码放在那里。我收到如下错误：

*   “没有属性“宽度”
*   “没有属性“身高”
*   “没有属性”控制“
*   “元素”视频“未定义”

不过，我认为您自己会更好地看到它。谢谢大家，我真的很挣扎，所以任何关于为什么会发生的帮助，我也许可以解决它！谢谢！

编辑谢谢伙计们，它是文档类型，但是为了获得最高分数，我不需要错误或警告，我不明白为什么会发生这些；[http://puu.sh/u7O1](http://puu.sh/u7O1)

我尝试重新添加字符编码行，但没有任何乐趣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T00:51:46.513

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

如果您尝试使用 HTML5 视频验证代码，那么将其设为 HTML5 会有所帮助。摆脱它并替换为

```
<!doctype html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T00:51:54.137

您没有使用 html5 文档类型：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">` 
```

如您所见，该文档类型是 XHTML 1.0 Transitional。html5 文档类型要短得多

```
<!doctype html> 
```