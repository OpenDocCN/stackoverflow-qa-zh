# StackOverflow 问答 10238000-10238999

# java - 访问游戏中的全局对象！2.0 与 Java

> ID：10238005
> 
> 赞同：8
> 
> 时间：2012-04-19T22:54:39.620
> 
> 标签：java, playframework-2.0

我已经扩展了*GlobalSettings*类，如教程[应用程序全局设置](http://www.playframework.org/documentation/2.0/JavaGlobal)中所示。

然后我如何访问这个类的实例，比如说从一个视图方法？我假设在应用程序启动时创建了一个实例，并且它可能是某个对象的成员。

例如，我希望在这里找到它：

```
Play.application().getGlobalSettings() 
```

或类似的东西，但我在 Play.* 层次结构中的任何地方都找不到它。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T01:02:52.867

我是 Play 2.0 的新手，但是，我认为使用插件注入会更好地为您服务。看一下这个：

[https://github.com/typesafehub/play-plugins/tree/master/inject](https://github.com/typesafehub/play-plugins/tree/master/inject)

使用这种方法，您只需将以下行添加到您的控制器（以及其他一些配置，如上面的链接中所述）：

```
@Inject static MyStaticObj obj; 
```

其余的都是使用注入框架自动完成的。无需担心全局等。

也就是说，和你一样，在发现插件注入框架之前，我花了很多时间试图弄清楚如何使用 GlobalSettings 对象。

我的感觉是，鉴于 Global 的实现方式（作为默认/未命名包中的类），不可能在应用程序代码的任何地方引用它。我不确定这是有意为之还是偶然的（似乎 Play 的人最近在考虑 Scala 很多......）。幸运的是，插件方法似乎是处理这些共享全局变量的更好方法。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-20T06:53:42.200

只需直接引用 Global 对象。例如不要写：

```
public class Global extends GlobalSettings {} 
```

写

```
object Global extends GlobalSettings {} 
```

或者

```
object Global extends Global {}
class Global extends GlobalSettings {} 
```

并且您可以在代码中的任何位置引用 Global 对象，只需编写：

```
Global.someMethod() 
```

# foreign-keys - 创建表时出现 InnoDB 错误

> ID：10238006
> 
> 赞同：0
> 
> 时间：2012-04-19T22:54:41.010
> 
> 标签：foreign-keys, innodb, create-table

有人知道，为什么这个 SQL 在创建表帐户时返回错误？

# 1005 - 无法创建表“mobilewaiter.accounts”（错误号：150）

我看到，这个问题可能出在键上的索引上，但一切都与主键有关。帮帮我，谢谢。

```
CREATE TABLE IF NOT EXISTS `tables` (
  `_id` int(10) NOT NULL AUTO_INCREMENT,
  `tag` varchar(40) COLLATE utf8_czech_ci NOT NULL,
  `name` varchar(40) COLLATE utf8_czech_ci NOT NULL,
  `occupied` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_czech_ci AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `users` (
  `_id` int(10) NOT NULL AUTO_INCREMENT,
  `nick` varchar(20) COLLATE utf8_czech_ci NOT NULL,
  `password` varchar(40) COLLATE utf8_czech_ci NOT NULL,
  `salt` varchar(20) COLLATE utf8_czech_ci NOT NULL,
  `email` varchar(50) COLLATE utf8_czech_ci NOT NULL,
  `firstname` varchar(20) COLLATE utf8_czech_ci NOT NULL,
  `lastname` varchar(20) COLLATE utf8_czech_ci NOT NULL,
  `role` varchar(20) COLLATE utf8_czech_ci NOT NULL,
  PRIMARY KEY (`_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_czech_ci AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `accounts` (
  `_id` int(10) NOT NULL AUTO_INCREMENT,
  `table_id` varchar(10) COLLATE utf8_czech_ci NOT NULL,
  `state` varchar(20) COLLATE utf8_czech_ci NOT NULL DEFAULT 'created',
  `user_id` int(10) NOT NULL,
  `start_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `end_time` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`_id`),
  FOREIGN KEY (`table_id`) REFERENCES `tables`(`_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (`user_id`) REFERENCES `users`(`_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_czech_ci AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:11:18.137

`table_id`is`varchar(10)`但您希望它参考`tables._id`which is `int`。为了使用外键，列的数据类型应该相同

# java - UserType / Hibernate / JodaMoney 错误：PersistentMoneyAmount 需要将 currencyCode 定义为参数

> ID：10238016
> 
> 赞同：1
> 
> 时间：2012-04-19T22:56:25.550
> 
> 标签：java, hibernate, usertype, joda-money

我正在使用 UserType 3.0.0.RC1 将 JodaMoney 映射到 Hibernate。

当 SessionFactory 初始化时，我遇到了一个错误：

> PersistentMoneyAmount 需要将 currencyCode 定义为参数，或者定义 defaultCurrencyCode Hibernate 属性

我确定我一定有一些配置问题——这是相关的片段。

持久性.xml：

```
<persistence-unit name="spring-jpa">
    <properties>
        <property name="hibernate.format_sql" value="true"/>
        <property name="hibernate.hbm2ddl.auto" value="update"/>
        <property name="jadira.usertype.autoRegisterUserTypes" value="true"/>
    </properties>
</persistence-unit> 
```

相关的弹簧配置：

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan">
        <list>
            <value>com.mangofactory.concorde</value>
            <value>com.mangofactory.moolah</value>
        </list>
    </property>
    <property name="persistenceUnitName" value="spring-jpa" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect" />
        </bean>
    </property>
</bean> 
```

关于我所缺少的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:46:46.373

我最终在我的以下配置中解决了这个问题`persistence.xml`：

```
<persistence-unit name="spring-jpa">
    <properties>
        <property name="hibernate.format_sql" value="true"/>
        <property name="hibernate.hbm2ddl.auto" value="update"/>
        <property name="jadira.usertype.autoRegisterUserTypes" value="true"/>
        <property name="jadira.usertype.currencyCode" value="AUD"/>
        <property name="jadira.usertype.seed" value="org.jadira.usertype.spi.shared.JvmTimestampSeed"/>
    </properties>
</persistence-unit> 
```

棘手的部分是我需要提供一个`jadira.usertype.seed`才能`jadira.usertype.currencyCode`被检测到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:49:48.883

如果您正在寻找基于注释的解决方案，您可以试试这个

```
@Type(type = "org.jadira.usertype.moneyandcurrency.joda.PersistentMoneyAmount", parameters = { @Parameter(name="currencyCode", value="USD") })
private Money price; 
```

在这里找到

[电子邮件存档：usertype-discuss（只读）](http://sourceforge.net/mailarchive/forum.php?thread_name=308B5A210F4B1D40930997E572F7B3B4022F0D@EXMBX12.netplexity.local&forum_name=usertype-discuss)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T06:20:38.970

关于需要配置种子 - 这是由于 3.0.0-RC1 中的一个错误，将来会修复。

# android - 单击按钮时自动蓝牙配对

> ID：10238018
> 
> 赞同：0
> 
> 时间：2012-04-19T22:56:38.070
> 
> 标签：android

我有一个问题，我想在 android 中单击按钮时进行自动蓝牙配对。但我没有任何参考可以做同样的事情。请建议我任何解决方案。配对后，我必须传输图像。不知道会怎么做？如果您对此也有任何建议，请提出建议。但首要任务是自动配对。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:04:42.517

我认为系统不会允许您第一次自动配对。据我所知，必须有用户交互才能打开蓝牙无线电，并配对（但不是“连接”到）设备。查看开发站点上的蓝牙聊天示例以开始使用。[http://developer.android.com/resources/samples/BluetoothChat/index.html](http://developer.android.com/resources/samples/BluetoothChat/index.html)

# java - Ant 构建跟踪调用类

> ID：10238026
> 
> 赞同：0
> 
> 时间：2012-04-19T22:57:23.940
> 
> 标签：java, ant, build-script

我的构建脚本失败了，因为它在构建依赖项之前构建了 A 类。

有没有办法在编译过程中准确地跟踪 A 类的加载时间？我知道失败的任务，但任务正在编译其他类 C、D、E 并且它们之间没有直接关系。编译的类导入一个由 A 类扩展的 B 类。

喜欢

```
Import Class B

Class C
{
}

Class A extends Class B
{
} 
```

我正在使用 eclipse 来调试它。Ant 详细模式也无济于事。

任何提示将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:02:59.397

如果您在同一`javac`任务中编译所有类，那么`javac`（可执行文件）将确定正确的依赖顺序。

但是，如果您打算在编译类 B 之后的某个时间编译类 A，那么您需要确保 B 的类文件位于`javac`编译 A 的目标的类路径中。

例如：

```
<javac srcdir="b-project/src" destdir="classes"/> 
```

...然后某个时候，也许在另一个目标（设置`depends`属性）...

```
<path id="compile.classpath">
    <fileset dir="classes"/><!-- contains compiled class B -->
</path>
<javac classpathref="compile.classpath" srcdir="a-project/src" destdir="classes"/> 
```

如果这对您没有帮助，请发布您的构建文件的相关部分。

# jdo - JDO 可以与 SOAP 服务对话吗？

> ID：10238027
> 
> 赞同：0
> 
> 时间：2012-04-19T22:57:30.387
> 
> 标签：jdo, datanucleus

我已经使用 JPA 一段时间了。拥有一个执行 SQL 操作的 entityManager 非常棒。

我注意到 JDO (DataNucleous) 超越了 JPA 并为其他数据源带来了持久性，其中包括 XML

不确定我是否完全正确地掌握了这个概念，但我想知道它是否可以执行 SOAP.getObjectId(entity) 然后 DB.makePersistent(entity) 之类的操作，反之亦然，前提是我可以连接到 SOAP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:27:38.560

DataNucleus REST API 的工作方式是在您的应用程序中发送/接收[此处](http://www.datanucleus.org/products/accessplatform_3_1/rest/httpmethods.html)所示形式的 HTTP GET/POST，并将这些转换为 JDO 调用以将数据放入/从数据存储中检索。有了它，您可以使用 DataNucleus 支持的任何数据存储（如 RDBMS、ODBMS、基于地图、基于文档等）。

# vim - 用于写入所有缓冲区的 vim 自动命令事件：wa

> ID：10238029
> 
> 赞同：2
> 
> 时间：2012-04-19T22:58:01.583
> 
> 标签：vim

我目前正在使用以下映射，基本上通过执行脚本将我的 dev env 中编写的任何文件复制到我的本地服务器。它适用于单个文件。但是，我有做 :wa 来保存所有打开的缓冲区的习惯：

```
au BufWritePost /path/to/dev/* silent !$HOME/bin/somescript.sh %:p 
```

关于如何将其重写为条件的任何建议，例如：

```
if one file
  exec script to copy just that file # like I already have
if :wa
  # here I'd probably exec a script to just copy recursively 
```

**编辑**

每个 ZyX 解决方案的可能解决方案：

```
au BufWritePost /Users/rlevin/programming/sugar/Mango/sidecar/* silent !$HOME/bin/sugarbuild.sh %:p

" If we do :wa<CR> we check if command type is ':' and if command itself was
" 'wa'. If so, we call the command WA which calls BuildSidecarIfInProject.
" This checks if we're actually within the project's directory
cnoreabbrev <expr> wa ((getcmdtype() is# ':' && getcmdline() is# 'wa')?('WA'):('wa'))
command! WA :call BuildSidecarIfInProject()
function! BuildSidecarIfInProject()
  if fnamemodify('.', ':p')[:44] is# '/Users/rlevin/programming/sugar/Mango/sidecar'
    exec ":!$HOME/bin/toffeebuild.sh"
  endif                                                                                                                                                                        
endfunction 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T06:35:41.533

无法确定保存的文件数量，但您可以重新映射/缩写 wa：

```
command WA # command that executes a script to just copy recursively
cnoreabbrev <expr> wa ((getcmdtype() is# ':' && getcmdline() is# 'wa')?('WA'):('wa')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T06:44:47.793

[一些聪明人](http://en.wikiquote.org/wiki/Donald_Knuth#Computer_Programming_as_an_Art_.281974.29)曾经说过，“过早的优化是万恶之源”。如果您确实需要对服务器进行动态备份/部署，为什么不每次都运行递归版本，或者可能绑定到热键？即不要特别对待单文件的情况。例如，`rsync`非常擅长避免不必要的复制。

# php - 将 XML 转换为 HTML - 使用 PHP 和 XLS 模板

> ID：10238033
> 
> 赞同：1
> 
> 时间：2012-04-19T22:58:22.617
> 
> 标签：php, html, xml, xslt

我有这个非常简单的代码，它应该生成我的 HTML，但我得到的只是白页。我几乎尝试了任何东西，它只是空白页。如果有人可以检查并告诉我我做错了什么，我会在天堂！

**PHP代码：**

```
 $xp = new XsltProcessor();
    // create a DOM document and load the XSL stylesheet
    $xsl = new DomDocument;
    $xsl->load('template-file.xls');
    // import the XSL styelsheet into the XSLT process
    $xp->importStylesheet($xsl);
    // create a DOM document and load the XML datat
    $xml_doc = new DomDocument;
    $xml_doc->load('temporary-file.xml');
    // transform the XML into HTML using the XSL file
    if ($html = $xp->transformToXML($xml_doc)) {
        return $html;
    } else {        
        return "<p>FAILED</p>";
    } 
```

**XML 文件：**

```
 <?xml version="1.0"?>
<results>
    <xml_report>
    <subject>
         <efx_file_header>
              <efx_header>
                <bureau>EFX</bureau>
                <customer_number>682ZB08042</customer_number>
                <customer_reference_code>199</customer_reference_code>
                <ecoa>2</ecoa>
                <output_format>02</output_format>

                <multiple_files_indicator>1</multiple_files_indicator>
                <name>ZUVICH, TYLER J</name>
                <ssn>196722017</ssn>

              </efx_header>
         </efx_file_header>
   </subject>
    </xml_report>
</results> 
```

**这是 XLS 模板文件：**

```
<?xml version="1.0" encoding="utf-8"?>  
<xsl:stylesheet version="1.0"
xmlns:php="http://php.net/xsl"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
<!-- Edited by Adrian -->

<xsl:output method="html" encoding="UTF-8" indent="yes"/>  

<xsl:template match="results/xml_report">

<xsl:for-each select="subject">
    <table class="table-paddings" cellspacing="0" cellpadding="0">      
        <tbody>
        <tr>
            <td width="245px">Boreau</td>
            <td width="250px"><xsl:value-of select="efx_file_header/ext_header/bureau" /></td>
        </tr>

        <tr>
            <td>Customer Number</td>
            <td><xsl:value-of select="efx_file_header/ext_header/customer_number" /></td>
        </tr>

        <tr>
            <td>Customer Reference Code</td>
            <td><xsl:value-of select="efx_file_header/ext_header/customer_reference_code" /></td>
        </tr>                           

        </tbody>
    </table>
    <br />
</xsl:for-each>

</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:40:57.180

尝试`echo $html`代替`return $html`

# javascript - 在 ubuntu 上安装和运行 browserquest

> ID：10238034
> 
> 赞同：5
> 
> 时间：2012-04-19T22:58:31.430
> 
> 标签：javascript, node.js, httpserver

我已经安装了 node.js 和必要的包来运行[browserquest](https://github.com/mozilla/BrowserQuest)。我已经启动了 browserquest 服务器，它在端口 8080 上运行，当我进入浏览器并输入[http://localhost:8080/status](http://localhost:8080/status)时，我可以看到服务器正在运行并且当前没有连接客户端。我在 client/config/build_config.json 文件中使用这样的配置构建客户端

```
{
   "host": "http://127.0.0.1",
   "port": 8080
} 
```

我在 bin/build.sh 中构建我的客户端。然后我运行这个命令来创建 http-server 来服务客户端文件。

```
http-server path-to-client-build -p 8000 
```

我可以通过转到[http://localhost:8000/index.html](http://localhost:8000/index.html)看到运行 httpserver 的索引页面，但是当我尝试连接时，它在说连接到服务器后卡住了。

注意：我正在使用这个 http-server 来托管客户端文件[http://search.npmjs.org/#/http-server](http://search.npmjs.org/#/http-server)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T21:02:42.917

我认为客户端构建在 github 上的当前版本上存在一些问题。相反，我使用了实际的客户端文件夹。我已按照这些步骤使其工作。

确保你已经安装了 node 和 npm。

1) 从 github repo 获取副本。

```
git clone https://github.com/mozilla/BrowserQuest.git 
```

2）为服务器安装所需的节点包

```
npm install underscore log bison websocket websocket-server sanitizer memcache 
```

3）启动服务器

```
node server/js/main.js 
```

4）转到客户端目录并安装 http-server 模块以服务客户端文件

```
cd client
npm install -g http-server 
```

5）编辑 config_build.json-dist 以指向您的主机 ip 和端口（在我的情况下为 127.0.0.1 localhost）

```
{
"host": "127.0.0.1",
"port": 8000,
"dispatcher": false
} 
```

6) 将编辑后的 ​​config_build.json-dist 复制到 2 个新文件中

```
cp config_build.json-dist config_build.json
cp config_build.json-dist config_local.json 
```

7) 将共享文件夹复制到客户端文件夹

```
cp -r ../shared . 
```

8) 启动 http-server 服务客户端文件

```
http-server 
```

您的服务器和客户端应该正在运行。您可以通过访问[http://ipaddress:port/status](http://ipaddress:port/status)来检查服务器是否正在运行，这应该会显示一系列已连接的客户端。如果没有空数组。并且您的客户端应该在[http://ipaddress:8000/index.html上运行](http://ipaddress:8000/index.html)

基于来自 dirkk0 [https://gist.github.com/2275361的教程](https://gist.github.com/2275361)

# c# - C#中的全局变量

> ID：10238037
> 
> 赞同：5
> 
> 时间：2012-04-19T22:58:39.323
> 
> 标签：c#, global-variables

我想在我的程序中使用一些全局变量。我们是否有任何可以帮助直接定义全局变量的方法，就像我们在 C++ 中使用 #define 一样。

例如：假设我在 C++ 中有以下提到的全局变量：

```
#define CROSSOVER_RATE            0.7
#define MUTATION_RATE             0.001
#define POP_SIZE                  100        
#define CHROMO_LENGTH             300
#define GENE_LENGTH               4
#define MAX_ALLOWABLE_GENERATIONS   400 
```

我希望在我的 C# 程序中仅将它们定义为全局变量。请让我知道我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T23:00:13.827

您可以在类中定义它们：

```
public static class Constants {
  public const double CrossoverRate = 0.7;
  ...
} 
```

像这样使用它们：`Constants.CrossoverRate`.

但我只会在它们*真的*保持不变的情况下这样做，比如[PI](http://msdn.microsoft.com/en-us/library/system.math.pi.aspx)。对于可以更改的参数，我更喜欢使用具有实例级值的类。我认为你会想要这种灵活性来调整你的遗传算法，或者一次使用多个参数集。这是一种方法（不可变类）：

```
public class GeneticAlgorithmParameters {

  public double CrossoverRate { get; private set; }
  ...

  public GenericAlgorithmParameters(double crossoverRate, ... others) {
    CrossoverRate = crossoverRate;
    ...
  }

} 
```

现在你将一个实例传递`GeneticAlgorithmParameters`给你的`GeneticAlgorithm`类构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T23:01:00.610

```
public static class Constants
{
    public const string MyConstant = "constantValue";
} 
```

你这样称呼他们：

```
public void MyMethod
{
    var string = Constants.MyConstant;
} 
```

# javascript - jQuery（或其他东西）在 IE8 上无法正常工作

> ID：10238040
> 
> 赞同：0
> 
> 时间：2012-04-19T22:59:32.747
> 
> 标签：javascript, jquery, internet-explorer-8

### 更新：

> 有人告诉我在 IE9 中测试它 - 它在 IE9 中运行良好（无论如何对我来说）。

一位朋友告诉我，[这个](http://nanisolutions.us/wordpress/mitzvah/)页面在 IE8 上运行不正常 - 我被告知缩略图加载正常，但中间的图像没有。我没有 IE8 并且我尝试下载它没有成功。

图像正在通过 jQuery 加载（以及调整），我感觉这是我的 javascript 代码以某种方式失败，导致 IE8 中出现描述的错误。

我通过 JSLint 输入代码，我看到的错误告诉我在代码中添加空格 - 但我非常怀疑这可能导致 IE8 问题。

正在加载的 JS 文件是“slideshow.js”，可以通过 Chrome 的检查元素轻松找到。

我将继续检查这一点，寻找 JS 错误以及其他错误，但我真的很感谢在这个问题上提供一些帮助。

非常感谢你，

埃文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:20:26.310

问题看起来是

`.img-wrapper` 在 style.css 中带有`position:absolute`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:37:52.403

问题是 IE8 不支持“naturalWidth”属性。相反，应该创建一个新的图像对象，并从这个新的图像对象中获取“宽度”。

有关更多详细信息，请参阅此[链接..](http://jacklmoore.com/notes/naturalwidth-and-naturalheight-in-ie)

# java - 如何使用 KeyListener 仅在按键被按下时捕获

> ID：10238059
> 
> 赞同：0
> 
> 时间：2012-04-19T23:01:43.187
> 
> 标签：java, keyboard, awt

我知道 KeyListener 是如何工作的，但问题是抽象方法 KeyPressed 不能按我的预期工作。不是每次按键都调用该函数，而是在按键一直被按下时调用该函数。是否可以**仅**在我按下键时而不是在按下键时处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:07:03.657

实现 KeyListener 并覆盖 keyPressed。设置一个在调用 keyReleased 之前一直保留的值。

# python - Python 2.x 排序难题

> ID：10238060
> 
> 赞同：2
> 
> 时间：2012-04-19T23:01:48.700
> 
> 标签：python, python-2.x

我在 Python 2.x 中有一个部分排序的元组。

为什么 Python 反转它而不是排序它？

```
>>> data = (u'a', (1,), 'b ', u'b', (2,), 'c ', u'c', (3,), 'd ', u'd', (4,), 'e')
>>> sorted(data) == list(reversed(data))
True 
```

我期待 Python 3。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T23:13:48.000

它失败了，因为排序算法依赖于元素的总排序，这意味着传递性`<`。

unicode 字符串、元组和字符串的顺序是不可传递的：

```
>>> a = 'x'
>>> b = (1,)
>>> c = u'x'
>>> a < b
True
>>> b < c
True
>>> a < c
False 
```

即，您的列表不存在有效的排序。至少不使用默认比较器。

# perl - Perl - Win32::AD::User - 似乎无法弄清楚如何检索 DN

> ID：10238061
> 
> 赞同：0
> 
> 时间：2012-04-19T23:01:52.700
> 
> 标签：perl, active-directory

我正在尝试使用 Perl 中的 Win32::ad::user 模块在 csv 文件中获取给定用户名的 DN，但我似乎无法正确使用语法。这是我的代码...（域名已被替换）

```
#!/usr/bin/perl
#use strict;
use warnings;
use Win32::AD::User;
use Text::CSV;
use Net::LDAP;

my $file = "Users.csv";
my $csv = Text::CSV->new();

open (CSV, "<", $file) or die $!;

while (<CSV>) {
if ($csv->parse($_)) {
    my @username = $csv->fields();
    my $user = $username[0];
    my $adstring = join('', $user, ',user",',$user, '"');
    my $acdiruser=Win32::AD::User->new('WinNT://my.domain.EDU/ ',$user);
    $acdiruser->get_info();
    print join ("\n", $acdiruser->get_property( dn ));

}
}
close CSV; 
```

有任何想法吗？

谢谢！！！

编辑：错误是 Bareword "dn" not allowed while "strict subs" in use at T:\Thunderbird Conversion\GetOU.pl 第 22 行，第 558 行。由于编译错误，T:\Thunderbird Conversion\GetOU.pl 的执行中止.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:59:03.787

我认为这可能是一个错字。

```
$acdiruser->get_property( 'dn' ); 
```

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:35:52.180

So, this was an issue with the Win32::AD::User module- When I was using Quotes, I was failing because I was trying to apply LDAP properties to a function that only accepts WinNT properties. I'll be using Net::Ldap instead.

# c# - 在 C# EventHandler 中发送变量？

> ID：10238065
> 
> 赞同：1
> 
> 时间：2012-04-19T23:02:20.033
> 
> 标签：c#

如何使用新创建的 EventHandler 发送变量？我的代码是这样的：

```
for (int i = 0; i < 5; i++)
{   
    Button buttonX = new Button();
    buttonX.Location = new Point(0, 0 + offset);
    buttonX.Size = new Size(310, 48);
    buttonX.Click += new EventHandler(buttonClick);
}

private void buttonClick(object sender, EventArgs e)
{
    MessageBox.Show();
} 
```

我怎样才能让它像

```
buttonX.Click += new EventHandler(buttonClick , i);

private void buttonClick(object sender, EventArgs e, int i)
{
    MessageBox.Show(i.toString());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T23:06:04.917

关闭是盛大的。您可以使用 lambda 表示法：

```
buttonX.Click += (sender, e) => buttonClick(sender, e, i); 
```

或匿名委托表示法：

```
buttonX.Click += delegate (object sender, EventArgs e) { buttonClick(sender, e, i); }; 
```

但是，[如果您捕获循环变量，您将遇到麻烦](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。

相反，做

```
for (int i = 0; i < 5; i++)
{   
    Button buttonX = new Button();
    buttonX.Location = new Point(0, 0 + offset);
    buttonX.Size = new Size(310, 48);
    var i_copy = i;
    buttonX.Click += (sender, e) => buttonClick(sender, e, i_copy);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T23:07:43.307

鉴于您的情况，只需使用该`Tag`属性；不要将解决方案与`Click`事件混为一谈；您不需要`i`每次都“通过”事件；只需将其标记到控件，因为它始终相同；这样你就不必担心关闭。

将您的代码更改为：

```
for (int i = 0; i < 5; i++)
{   
    Button buttonX = new Button();
    buttonX.Location = new Point(0, 0 + offset);
    buttonX.Size = new Size(310, 48);
    buttonX.Click += new EventHandler(buttonClick);
    buttonX.Tag = i;
}

private void buttonClick(object sender, EventArgs e)
{
    MessageBox.Show(((Button)sender).Tag.ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T23:07:30.050

你不能这样做，但你可以做的是使用中间 lambda：

```
for (int i = 0; i < 5; i++)
{
    int j = i; // Need to do this to fix closure issue

    Button buttonX = new Button();
    buttonX.Location = new Point(0, 0 + offset);
    buttonX.Size = new Size(310, 48);
    buttonX.Click += (sender, e) => {
        buttonClick(sender, e, j);
    };
}

private void buttonClick(object sender, EventArgs e, int i)
{
    MessageBox.Show(i.toString());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T23:09:20.533

您将创建一个派生自 EventArgs 的类，该类带有您想要的附加数据点。

[http://msdn.microsoft.com/en-us/library/system.eventargs.aspx](http://msdn.microsoft.com/en-us/library/system.eventargs.aspx)

因此，您可以为正在进行的事件创建一个 EventArgs，而不是仅仅使用 EventArgs。

```
public class ButtonClickedEventArgs : EventArgs
{
    public int EventInteger { get; private set; }

    public ButtonClickedEventArgs(int i)
    {
        EventInteger = i;
    }
} 
```

然后，当您引发事件时，您将创建 ButtonClickedEventArgs 类并将其与 EventHandler 一起传递。

# ios - 从 iOS 应用注册和发布 Facebook 成就

> ID：10238068
> 
> 赞同：1
> 
> 时间：2012-04-19T23:02:26.183
> 
> 标签：ios, facebook-graph-api, achievements, facebook-ios-sdk

我在 App Store 上有一个包含 Game Center 成就的现有 iOS 应用程序。由于它也有一个有效的 Facebook Connect 实现，我想在我的应用程序中利用通过新的成就图 API 提供的社交渠道。

我已经创建了相应的成就页面，准备在 Facebook 上注册为我的应用程序的成就。根据我的阅读，由于必须使用应用程序身份验证令牌来提交成就和分数，我正在使用一些 PHP 脚本在我的服务器上执行所有这些操作，因此我不必将我的密钥与我的应用程序二进制文件一起发送. 我计划在提交成就或分数时让我的 iOS 应用程序在我的服务器上调用一个脚本。

我正在使用与本机 iOS 应用程序相同的 FB 应用程序。显然，我希望它在用户解锁成就或达到新的高分时开始生成故事和时间线事件。

但是，在尝试为 FB 应用程序注册成就时，我遇到了一个很大的障碍。执行注册的脚本出现以下错误：

```
OAuthException: (#15) This method is not supported for native apps 
```

我似乎做的一切都是正确的，向`/<appid>/achievements`API 发送一个带有成就 URL 的 POST 等。

为了解决 Facebook 对这些 API 的限制，我还在开发人员设置中启用了现有的移动应用程序作为“网站”和“Facebook 上的应用程序”。无济于事。

所以我的问题是......我是否遗漏了一些东西来启用可以通过中间服务器从 iOS 应用程序提交的成就？如有必要，我不介意设置画布页面等，但我宁愿不让用户作为一个完全独立的应用程序重新进行身份验证，以便他们可以将成就和分数发布到他们的 Facebook 流中。

我想要实现*的最多*是在必要时向用户询问他们设备上现有应用程序的额外权限。应该可以在我的服务器上调用一个脚本，在需要时将成就推送到 Facebook - 但是如何？

这样做的唯一方法是使用一个单独的 FB 应用程序，该应用程序根本没有设置为原生移动应用程序，还是可以是原生/Web 应用程序的组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:34:01.087

这意味着您可能已经将 Facebook 端的应用程序配置为“Native/Desktop”而不是“Web”。

在此配置中，您的应用程序机密是不受信任的，因为它假定您已将其与客户端代码一起提供 - 您的 IOS 应用程序没有理由无法在“网络”模式下运行，因此请改用它

（我假设您实际上并没有在客户端代码中发送您的应用程序密码 - 如果您有，这是一个巨大的安全问题，除非您的应用程序设置为“本机/桌面”）

# git - 带有自定义脚本的别名 Git 推送命令

> ID：10238069
> 
> 赞同：0
> 
> 时间：2012-04-19T23:02:36.547
> 
> 标签：git, config, alias

我正在寻找别名`git push`Git 中的实际命令，以便在提交到 GitHub 之前运行单元测试之类的东西。

这是我的`config`文件`.git/`

```
[alias]
  push = !echo "custom push"
  kk = !echo "hi" # => this works... 
```

它似乎忽略了推动。这可能吗？如果这是不可能的，还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T07:51:17.673

我写了这个来对抗`git push`打印出我想运行但没有运行它的讨厌！是的，这是有原因的（你不应该将每一块垃圾都推送到远程），但我的远程是我的 GitHub 分支，我可能会遭受任何被推送到那里的垃圾。

这是基于[Eugene Kay 的`.bashrc`](https://github.com/EugeneKay/scripts/blob/master/HOMEDIR/.bashrc#L144-L202)（我从那里保留了`cd`但删除了`which git`对我不起作用的部分）。添加到`.bashrc`或`.zshrc`品尝：

```
function git() {
  # Path to the `git` binary
  GIT="/usr/bin/git"

  # Sanity check
  if [ ! -f ${GIT} ]
  then
    echo "Error: git binary not found" >&2
    return 255
  fi

  # Command to be executed
  command=$1

  # Remove command from $@ array
  shift 1

  # Check command against list of supported commands
  case $command in
  "cd")
    cd $(git rev-parse --show-toplevel)/${1}
    ;;
  "push")
    if [ -z "$1" ]
    then
      $GIT push || $GIT push -u origin $($GIT rev-parse --abbrev-ref @)
    else
      $GIT ${command} "$@"
    fi
    ;;
  *)
    # Execute the git binary
    $GIT ${command} "$@"
    ;;
  esac

  # Return something
  return $?
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T23:16:18.640

由于与 push 命令冲突，您不能为 push 设置别名，但您可以尝试使用“pre-push”钩子，有关详细信息，请参阅以下[补丁。](http://kerneltrap.org/mailarchive/git/2008/8/19/2996404)

另一种方法是在 GitHub 上使用[post-receive](http://help.github.com/post-receive-hooks/)挂钩，您可以在其中配置它以向集成服务器发送 POST，该服务器将运行单元测试等并批准或拒绝更改。但是，根据您的设置，这可能不切实际。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T23:06:31.420

我不会创建别名，而是使用 git 的 pre-commit 钩子。

[http://book.git-scm.com/5_git_hooks.html](http://book.git-scm.com/5_git_hooks.html)

# pusher - pusher 是否在其通道中存储持久的历史数据？

> ID：10238071
> 
> 赞同：4
> 
> 时间：2012-04-19T23:02:54.233
> 
> 标签：pusher

Pusher 似乎是一项很好的服务，但我想知道是否有人知道它是否可以用作持久活动流。例如，我想订阅一个频道并获取历史活动，而不仅仅是订阅后的新实时活动事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:13:48.327

频道事件历史记录在我们（Pusher 的）积压工作中。您可以在此处跟踪更新：http: [//pusher.tenderapp.com/discussions/requests/30-event-history](http://pusher.tenderapp.com/discussions/requests/30-event-history)

由于我们通常建议从您的服务器发布数据（出于安全原因），这也使您有机会保留消息并提供您自己的频道历史记录。

我们确实了解事件历史的好处，这就是为什么它在我们的待办事项上。

# php - 有没有办法递归/嵌套与正则表达式匹配？（PHP，preg_match_all）

> ID：10238072
> 
> 赞同：0
> 
> 时间：2012-04-19T23:02:55.430
> 
> 标签：php, regex, preg-match-all

我怎样才能匹配两者`(http://[^"]+)`？：

```
<a href="http://yoursite.com/goto/http://aredirectURL.com/extraqueries"></a> 
```

（我知道这是一个非法的 URL，但同样的想法）

我希望正则表达式给我这两个匹配项：

```
1 http://yoursite.com/goto/http://aredirectURL.com/extraqueries
2 http://aredirectURL.com/extraqueries 
```

无需运行多个 preg_match_all

真的很难过，感谢您提供的任何启发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:23:46.857

此正则表达式将为您提供所需的输出：`((?:http://[^"]+)(http://[^"]+))`. 注意非捕获组的用法`(?:regex)`。要阅读有关非捕获组的更多信息，请参阅[正则表达式高级语法参考](http://www.regular-expressions.info/refadv.html)。

```
<?php
preg_match_all(
    '((?:http://[^"]+)(http://[^"]+))',
    '<a href="http://yoursite.com/goto/http://aredirectURL.com/extraqueries"></a>',
    $out);
echo "<pre>";
print_r($out);
echo "</pre>";
?> 
```

上面的代码输出如下：

```
Array
(
    [0] => Array
        (
            [0] => http://yoursite.com/goto/http://aredirectURL.com/extraqueries
        )

    [1] => Array
        (
            [0] => http://aredirectURL.com/extraqueries
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:05:39.040

您可以使用此函数拆分字符串：

[http://de.php.net/preg_split](http://de.php.net/preg_split)

每个部分可以包含例如结果中给出的数组中的一个 url。

如果有更多内容，可以在您的全文“工作”时使用回调操作调用 preg_split。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T23:30:59.463

```
$str = '<a href="http://yoursite.com/goto/http://aredirectURL.com/extraqueries"></a>';

preg_match("/\"(http:\/\/.*?)(http:\/\/.*?)\"/i", $str, $match);

echo "{$match[0]}{$match[1]}\n";
echo "{$match[1]}\n"; 
```

# javascript - 使用 ASP 和 Javascript 从表单中检索值

> ID：10238074
> 
> 赞同：0
> 
> 时间：2012-04-19T23:02:59.380
> 
> 标签：javascript, forms, asp-classic

我在将信息发送到 .asp 文件的页面上有一个 html 表单。在 .ASP 文件中，我尝试编写 javascript 版本的 asp 来检索表单发送的信息。这样做的代码是什么？我试过 Request.Querystring，但这不起作用。我想使用我熟悉的 javascript 版本。请不要用 VBSCRIPT 版本回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:08:17.727

无论您使用哪种语言，表单值的 asp 集合都将是 GET 的查询字符串和 POST 的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:12:23.870

```
<%@ language="Javascript" %>

<script language="Javascript" runat="server">

Response.Write("Script Engine: " + ScriptEngine() + " " +
               ScriptEngineMajorVersion() + "." +
               ScriptEngineMinorVersion() + " build " +
               ScriptEngineBuildVersion());

var p1 = Request.QueryString('p1') + '';

if (p1 != 'undefined') {
  Response.Write ("<br/><br/>you said: " + p1);
}
else {
  Response.Write ("<br/><br/>If you append a query string param called 'p1', "+
                  "it will be echoed here.");
}

</script> 
```

# windows-8 - 将 BitmapEncoder 与 WinJS Metro 应用程序一起使用后关闭流

> ID：10238076
> 
> 赞同：2
> 
> 时间：2012-04-19T23:03:09.090
> 
> 标签：windows-8, microsoft-metro, winjs

在用 JS 编写的 Windows 8 Metro 应用程序中，我打开一个文件，获取流，使用“promise - .then”模式向其中写入一些图像数据。它工作正常 - 文件成功保存到文件系统，除了使用 BitmapEncoder 将流刷新到文件后，流仍然打开。IE; 在我终止应用程序之前，我无法访问该文件，但“流”变量超出了我可以参考的范围，因此我无法关闭（）它。有没有可以与 C# using 语句相媲美的东西？

```
...then(function (file) {
                return file.openAsync(Windows.Storage.FileAccessMode.readWrite);
            })
.then(function (stream) {
                //Create imageencoder object
                return Imaging.BitmapEncoder.createAsync(Imaging.BitmapEncoder.pngEncoderId, stream);
            })
.then(function (encoder) {
                //Set the pixel data in the encoder ('canvasImage.data' is an existing image stream)
                encoder.setPixelData(Imaging.BitmapPixelFormat.rgba8, Imaging.BitmapAlphaMode.straight, canvasImage.width, canvasImage.height, 96, 96, canvasImage.data);
                //Go do the encoding
                return encoder.flushAsync();
                //file saved successfully, 
                //but stream is still open and the stream variable is out of scope.
            }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:04:28.523

来自 Microsoft 的这个[简单的图像样本可能会有所帮助。](http://code.msdn.microsoft.com/windowsapps/Simple-Imaging-Sample-a2dec2b0)复制如下。

看起来，在你的情况下，你需要在`then`调用链之前声明流，确保你的参数不会与你的接受流的函数发生名称冲突（注意它们所做的部分`_stream = stream`），并添加一个`then`调用关闭流。

```
function scenario2GetImageRotationAsync(file) { 
    var accessMode = Windows.Storage.FileAccessMode.read; 

    // Keep data in-scope across multiple asynchronous methods 
    var stream; 
    var exifRotation;
    return file.openAsync(accessMode).then(function (_stream) { 
        stream = _stream; 
        return Imaging.BitmapDecoder.createAsync(stream); 
    }).then(function (decoder) { 
        // irrelevant stuff to this question
    }).then(function () { 
        if (stream) { 
            stream.close(); 
        } 
        return exifRotation; 
    }); 
} 
```

# javascript - ExtJS GridPanel 向查询字符串添加另一个参数

> ID：10238081
> 
> 赞同：2
> 
> 时间：2012-04-19T23:03:27.980
> 
> 标签：javascript, grid, extjs

我有一个网格和网格之外的一些选项......我的代理是对 ASPX 页面的 POST 请求。

```
_store = new Ext.data.JsonStore({
        proxy: new Ext.data.HttpProxy({
            url: 'resultpage.aspx?initalparam=1...',
            method: "POST"
        }),
        reader: _reader,... 
```

我想要的是，当我选择任何选项时，将该选项添加为查询字符串参数（或发布参数）并发出发布请求。

参考：[http ://www.objis.com/formationextjs/lib/extjs-4.0.0/docs/api/Ext.grid.Panel.html](http://www.objis.com/formationextjs/lib/extjs-4.0.0/docs/api/Ext.grid.Panel.html)

注意：休闲代码不起作用只是想法。***** ** *** ** *** ** *** ***

我正在寻找类似的东西：

```
myoption=...; //with DOM get option value
myurl = panelobj.getGrid().getStore().getProxy().getUrl();
panelobj.getGrid().getStore().getProxy().setUrl(myurl+"&myoption=" + myoption);
panelobj.Update(); 
```

或者更酷的东西，比如：

```
Ext.create('...ON OPTION CLICK...', append("&myoption=" + myoption); submit();..) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:01:23.350

你在找这个吗？[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.proxy.Ajax-cfg-extraParams](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.proxy.Ajax-cfg-extraParams)

每个代理都有一个额外的参数，可以添加到每个请求中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:29:58.777

我看到这个例子[http://www.sencha.com/forum/showthread.php?9067-Ext.data.HttpProxy-and-extraParams](http://www.sencha.com/forum/showthread.php?9067-Ext.data.HttpProxy-and-extraParams)。假设 ds 是数据存储：

```
ds.proxy.getConnection().request({extraParams: { testParam2: 200 }, method: 'POST',url: ds.proxy.buildUrl()}); 
```

发出请求，但在服务器端我无法阅读`testParam2`。`Request["testParam2"]`一片空白

这种方式对我不起作用（我使用版本 3）所以我使用`params`而不是`extraParams` [http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Connection](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Connection)（表单参数： 邮政）

```
ds.proxy.getConnection().request({params: { testParam2: 200 }, method: 'POST',url: ds.proxy.buildUrl()}); 
```

另一种可能性是通过 url 传递（QueryString 参数：GET）

```
ds.proxy.getConnection().request(method: 'POST',url: ds.proxy.buildUrl() + '&testParam2=200'}); 
```

// ***** ** *** ** *** ** *** *** 其他问题：

使用上面的代码，我可以发出请求...但它完全独立于网格...检索的数据未处理...如何使网格执行请求？？？？？？我不知道....

// ***** ** *** ** *** ** ***** 解决方案：

删除以前的网格并添加具有新参数的新网格！那对我有用！

# excel - Excel Vba - 如果单元格中的值大于则复制行

> ID：10238083
> 
> 赞同：0
> 
> 时间：2012-04-19T23:03:31.583
> 
> 标签：excel, vba

我有这个表充满了数据。每行中的 K 列包含一个数字。所以基本上我要做的是将整行移动，如果该列中的数据大于 9，则移动到 sheet2。

如何做到这一点？我已经在工作表中创建了实际的表格，称为 Table1 和 Table2。

到目前为止，这是我设法完成的。我看过自动过滤器，但我不明白那里发生了什么。所以这个我明白了！

```
Sub MoveData()

    Dim i As Range
    Dim num As Integer
     num = 1
    For Each i In Range("K10:K1000")
        If i.Value > 9 Then
            i.Select
            ActiveCell.Rows("1:1").EntireRow.Select
            Selection.Copy

            Sheets("Sheet2").Range("A65000").End(xlUp).Offset(num, 0).PasteSpecial
            ActiveCell.Rows.Delete
            num = num + 1

        End If
    Next i
End Sub 
```

到目前为止，这有点工作。但我无法将该行粘贴到 sheet2 中的下一个空白行。我试着做那个 num = num + 1 的事情，但我想那是不是很遥远？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:35:53.450

这是你正在尝试的吗？（**经过试验和测试**）

```
Option Explicit

Sub Sample()
    Dim wsI As Worksheet, wsO As Worksheet
    Dim rRange As Range

    Dim lastRowWsO As Long

    Set wsI = Sheets("sheet1")

    '~~> Assuming that the Header is in K10
    Set rRange = wsI.Range("K10:K1000")

    Set wsO = Sheets("sheet2")

    '~~> Get next empty cell in Sheet2
    lastRowWsO = wsO.Range("A" & Rows.Count).End(xlUp).Row + 1

    With wsI
        '~~> Remove Auto Filter if any
        .AutoFilterMode = False

        With rRange
            '~~> Set the Filter
            .AutoFilter Field:=1, Criteria1:=">=9"

            '~~> Temporarirly hide the unwanted rows
            wsI.Rows("1:9").EntireRow.Hidden = True
            wsI.Rows("1001:" & Rows.Count).EntireRow.Hidden = True

            '~~> Copy the Filtered rows
            .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow.Copy _
            wsO.Rows(lastRowWsO)

            '~~> Delete The filtered rows
            .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow.Delete
        End With

        '~~> Unhide the rows
        .Rows("1:9").EntireRow.Hidden = False
        .Rows("1001:" & Rows.Count).EntireRow.Hidden = False

        '~~> Remove Auto Filter
        .AutoFilterMode = False
    End With
End Sub 
```

**注意**：我没有包含任何错误处理。我建议您在最终代码中包含一个

**跟进**

```
Sub Sample()
    Dim wsI As Worksheet, wsO As Worksheet
    Dim rRange As Range

    Dim lastRowWsI As Long, lastRowWsO As Long

    Set wsI = Sheets("Risikoanalyse")

    '~~> Assuming that the Header is in K10
    Set rRange = wsI.Range("K9:K1000")

    lastRowWsI = wsI.Cells.Find(What:="*", _
                After:=wsI.Range("A1"), _
                Lookat:=xlPart, _
                LookIn:=xlFormulas, _
                SearchOrder:=xlByRows, _
                SearchDirection:=xlPrevious, _
                MatchCase:=False).Row

    Set wsO = Sheets("SJA utarbeides")

    '~~> Get next empty cell in Sheet2
    lastRowWsO = wsO.Cells.Find(What:="*", _
                After:=wsO.Range("A1"), _
                Lookat:=xlPart, _
                LookIn:=xlFormulas, _
                SearchOrder:=xlByRows, _
                SearchDirection:=xlPrevious, _
                MatchCase:=False).Row + 1

    With wsI
        With .ListObjects("TableRisikoAnalyse")
            '~~> Set the Filter
            .Range.AutoFilter Field:=11, Criteria1:=">=9"

            '~~> Temporarirly hide the unwanted rows
            wsI.Rows("1:8").EntireRow.Hidden = True
            wsI.Rows(lastRowWsI & ":" & Rows.Count).EntireRow.Hidden = True

            '~~> Copy the Filtered rows
            wsI.Range(Replace(wsI.Range("K9").Offset(1, 0).SpecialCells(xlCellTypeVisible).Address, "$9:$9,", "")).EntireRow.Copy _
            wsO.Rows(lastRowWsO)

            '~~> Clear The filtered rows
            wsI.Range(Replace(wsI.Range("K9").Offset(1, 0).SpecialCells(xlCellTypeVisible).Address, "$9:$9,", "")).Clear

            .Range.AutoFilter Field:=11

            '~~> Sort the table so that blank cells are pushed down                
            .Sort.SortFields.Clear
            .Sort.SortFields.Add Key:=Range("TableRisikoAnalyse[[ ]]"), SortOn:=xlSortOnValues, Order _
            :=xlAscending, DataOption:=xlSortTextAsNumbers
            With .Sort
                .Header = xlYes
                .MatchCase = False
                .Orientation = xlTopToBottom
                .SortMethod = xlPinYin
                .Apply
            End With
        End With

        '~~> Unhide the rows
        .Rows("1:8").EntireRow.Hidden = False
        .Rows(lastRowWsI & ":" & Rows.Count).EntireRow.Hidden = False

        '~~> Remove Auto Filter
        .AutoFilterMode = False
    End With
End Sub 
```

# jquery - iOS Safari – 如何禁用过度滚动但允许可滚动的 div 正常滚动？

> ID：10238084
> 
> 赞同：107
> 
> 时间：2012-04-19T23:04:05.027
> 
> 标签：jquery, ios, ipad, safari, mobile-website

我正在开发一个基于 iPad 的网络应用程序，并且需要防止过度滚动，使其看起来不像网页。我目前正在使用它来冻结视口并禁用过度滚动：

```
document.body.addEventListener('touchmove',function(e){
      e.preventDefault();
  }); 
```

这非常适合禁用过度滚动，但我的应用程序有几个可滚动的 div，并且***上面的代码阻止它们滚动***。

我只针对 iOS 5 及更高版本，所以我避免了像 iScroll 这样的 hacky 解决方案。相反，我将这个 CSS 用于我的可滚动 div：

```
.scrollable {
    -webkit-overflow-scrolling: touch;
    overflow-y:auto;
} 
```

这在没有文档过度滚动脚本的情况下有效，但不能解决 div 滚动问题。

***如果没有 jQuery 插件，***有没有办法使用过度滚动修复但免除我的 $('.scrollable') div？

**编辑：**

我找到了一个不错的解决方案：

```
 // Disable overscroll / viewport moving on everything but scrollable divs
 $('body').on('touchmove', function (e) {
         if (!$('.scrollable').has($(e.target)).length) e.preventDefault();
 }); 
```

当您滚动超过 div 的开头或结尾时，视口仍会移动。我也想找到一种方法来禁用它。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-09T19:12:47.947

这解决了当您滚动到 div 的开头或结尾时的问题

```
var selScrollable = '.scrollable';
// Uses document because document will be topmost level in bubbling
$(document).on('touchmove',function(e){
  e.preventDefault();
});
// Uses body because jQuery on events are called off of the element they are
// added to, so bubbling would not work if we used document instead.
$('body').on('touchstart', selScrollable, function(e) {
  if (e.currentTarget.scrollTop === 0) {
    e.currentTarget.scrollTop = 1;
  } else if (e.currentTarget.scrollHeight === e.currentTarget.scrollTop + e.currentTarget.offsetHeight) {
    e.currentTarget.scrollTop -= 1;
  }
});
// Stops preventDefault from being called on document if it sees a scrollable div
$('body').on('touchmove', selScrollable, function(e) {
  e.stopPropagation();
}); 
```

请注意，如果您想在 div 没有溢出时阻止整个页面滚动，这将不起作用。要阻止它，请使用以下事件处理程序而不是上面的事件处理程序（改编自[这个问题](https://stackoverflow.com/a/16446081/40352)）：

```
$('body').on('touchmove', selScrollable, function(e) {
    // Only block default if internal div contents are large enough to scroll
    // Warning: scrollHeight support is not universal. (https://stackoverflow.com/a/15033226/40352)
    if($(this)[0].scrollHeight > $(this).innerHeight()) {
        e.stopPropagation();
    }
}); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-21T22:25:50.057

使用 Tyler Dodge 的出色[答案](https://stackoverflow.com/a/14244680/100752)在我的 iPad 上一直滞后，所以我添加了一些节流代码，现在它非常流畅。滚动时有时会出现一些最小的跳过。

```
// Uses document because document will be topmost level in bubbling
$(document).on('touchmove',function(e){
  e.preventDefault();
});

var scrolling = false;

// Uses body because jquery on events are called off of the element they are
// added to, so bubbling would not work if we used document instead.
$('body').on('touchstart','.scrollable',function(e) {

    // Only execute the below code once at a time
    if (!scrolling) {
        scrolling = true;   
        if (e.currentTarget.scrollTop === 0) {
          e.currentTarget.scrollTop = 1;
        } else if (e.currentTarget.scrollHeight === e.currentTarget.scrollTop + e.currentTarget.offsetHeight) {
          e.currentTarget.scrollTop -= 1;
        }
        scrolling = false;
    }
});

// Prevents preventDefault from being called on document if it sees a scrollable div
$('body').on('touchmove','.scrollable',function(e) {
  e.stopPropagation();
}); 
```

此外，添加以下 CSS 修复了一些渲染故障（[source](http://cantina.co/2012/03/06/ios-5-native-scrolling-grins-and-gothcas/)）：

```
.scrollable {
    overflow: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
}
.scrollable * {
    -webkit-transform: translate3d(0,0,0);
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-02T15:19:20.067

首先像往常一样阻止对整个文档的默认操作：

```
$(document).bind('touchmove', function(e){
  e.preventDefault();           
}); 
```

然后阻止您的元素类传播到文档级别。这会阻止它到达上面的函数，因此 e.preventDefault() 不会启动：

```
$('.scrollable').bind('touchmove', function(e){
  e.stopPropagation();
}); 
```

这个系统似乎比计算所有触摸动作的类更自然，也更不密集。对动态生成的元素使用 .on() 而不是 .bind()。

还要考虑这些元标记，以防止在使用可滚动 div 时发生不幸的事情：

```
<meta content='True' name='HandheldFriendly' />
<meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0' name='viewport' />
<meta name="viewport" content="width=device-width" /> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-02T04:16:09.693

您是否可以在禁用过度滚动的代码中添加更多逻辑，以确保所讨论的目标元素不是您想要滚动的元素？像这样的东西：

```
document.body.addEventListener('touchmove',function(e){
     if(!$(e.target).hasClass("scrollable")) {
       e.preventDefault();
     }
 }); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-01-05T08:21:33.433

对此的最佳解决方案是 css/html：如果您还没有它，请制作一个 div 来包装您的元素并将其设置为固定位置并隐藏溢出。可选的，如果你想让它填满整个屏幕并且只填满整个屏幕，将高度和宽度设置为 100%

```
#wrapper{
  height: 100%;
  width: 100%;
  position: fixed;
  overflow: hidden;
}
```

```
<div id="wrapper">
  <p>All</p>
  <p>Your</p>
  <p>Elements</p>
</div>
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-31T14:15:47.927

在尝试向上滚动时检查可滚动元素是否已经滚动到顶部，或者在尝试向下滚动时检查可滚动元素是否已经滚动到底部，然后阻止阻止整个页面移动的默认操作。

```
var touchStartEvent;
$('.scrollable').on({
    touchstart: function(e) {
        touchStartEvent = e;
    },
    touchmove: function(e) {
        if ((e.originalEvent.pageY > touchStartEvent.originalEvent.pageY && this.scrollTop == 0) ||
            (e.originalEvent.pageY < touchStartEvent.originalEvent.pageY && this.scrollTop + this.offsetHeight >= this.scrollHeight))
            e.preventDefault();
    }
}); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-09-20T17:57:07.877

当出现带有可滚动区域的弹出窗口（具有购物车可滚动视图的“购物车”弹出窗口）时，我正在寻找一种方法来防止所有正文滚动。

我使用最少的 javascript 编写了一个更优雅的解决方案，当您有一个想要滚动的弹出窗口或 div 时（而不是“过度滚动”整个页面主体），只需在您的主体上切换类“noscroll”。

虽然桌面浏览器观察到溢出：隐藏——iOS似乎忽略了这一点，除非你将位置设置为固定......这会导致整个页面的宽度变得奇怪，所以你也必须手动设置位置和宽度。使用这个 CSS：

```
.noscroll {
    overflow: hidden;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
} 
```

这个jQuery：

```
/* fade in/out cart popup, add/remove .noscroll from body */
$('a.cart').click(function() {
    $('nav > ul.cart').fadeToggle(100, 'linear');
    if ($('nav > ul.cart').is(":visible")) {
        $('body').toggleClass('noscroll');
    } else {
        $('body').removeClass('noscroll');
    }
});

/* close all popup menus when you click the page... */
$('body').click(function () {
    $('nav > ul').fadeOut(100, 'linear');
    $('body').removeClass('noscroll');
});

/* ... but prevent clicks in the popup from closing the popup */
$('nav > ul').click(function(event){
    event.stopPropagation();
}); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-06-10T21:41:59.433

我在没有 jquery 的情况下做了一些工作。不完美但工作正常（特别是如果你在 scoll-y 中有一个 scroll-x）[https://github.com/pinadesign/overscroll/](https://github.com/pinadesign/overscroll/)

自由参与并改进它

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-12T17:33:41.577

虽然禁用所有“touchmove”事件似乎是个好主意，但一旦您需要页面上的其他可滚动元素，它就会导致问题。最重要的是，如果您只在某些元素上禁用“touchmove”事件（例如，如果您希望页面不可滚动，则为 body），一旦在其他任何地方启用它，IOS 将在 Chrome 中导致 URL 无法停止传播栏切换。

虽然我无法解释这种行为，但似乎唯一的防止方法似乎是将身体的位置设置为`fixed`. 唯一的问题是您将丢失文档的位置 - 例如，这在模态中尤其令人讨厌。解决它的一种方法是使用这些简单的 VanillaJS 函数：

```
function disableDocumentScrolling() {
    if (document.documentElement.style.position != 'fixed') {
        // Get the top vertical offset.
        var topVerticalOffset = (typeof window.pageYOffset != 'undefined') ?
            window.pageYOffset : (document.documentElement.scrollTop ? 
            document.documentElement.scrollTop : 0);
        // Set the document to fixed position (this is the only way around IOS' overscroll "feature").
        document.documentElement.style.position = 'fixed';
        // Set back the offset position by user negative margin on the fixed document.
        document.documentElement.style.marginTop = '-' + topVerticalOffset + 'px';
    }
}

function enableDocumentScrolling() {
    if (document.documentElement.style.position == 'fixed') {
        // Remove the fixed position on the document.
        document.documentElement.style.position = null;
        // Calculate back the original position of the non-fixed document.
        var scrollPosition = -1 * parseFloat(document.documentElement.style.marginTop);
        // Remove fixed document negative margin.
        document.documentElement.style.marginTop = null;
        // Scroll to the original position of the non-fixed document.
        window.scrollTo(0, scrollPosition);
    }
} 
```

使用此解决方案，您可以拥有一个固定的文档，并且页面中的任何其他元素都可以通过使用简单的 CSS（例如，`overflow: scroll;`）溢出。不需要特殊课程或其他任何东西。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-21T10:15:25.707

此解决方案不需要您在所有可滚动 div 上放置可滚动类，因此更通用。允许在 INPUT 元素 contenteditables 和溢出滚动或 autos 的所有元素上滚动。

我使用了自定义选择器，并且还在元素中缓存了检查结果以提高性能。无需每次都检查相同的元素。这可能有一些问题，只是刚刚写的，但我想我会分享。

```
$.expr[':'].scrollable = function(obj) {
    var $el = $(obj);
    var tagName = $el.prop("tagName");
    return (tagName !== 'BODY' && tagName !== 'HTML') && (tagName === 'INPUT' || $el.is("[contentEditable='true']") || $el.css("overflow").match(/auto|scroll/));
};
function preventBodyScroll() {
    function isScrollAllowed($target) {
        if ($target.data("isScrollAllowed") !== undefined) {
            return $target.data("isScrollAllowed");
        }
        var scrollAllowed = $target.closest(":scrollable").length > 0;
        $target.data("isScrollAllowed",scrollAllowed);
        return scrollAllowed;
    }
    $('body').bind('touchmove', function (ev) {
        if (!isScrollAllowed($(ev.target))) {
            ev.preventDefault();
        }
    });
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-18T05:34:35.007

这是一个与zepto兼容的解决方案

```
 if (!$(e.target).hasClass('scrollable') && !$(e.target).closest('.scrollable').length > 0) {
       console.log('prevented scroll');
       e.preventDefault();
       window.scroll(0,0);
       return false;
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-05-12T06:00:34.910

这个对我有用（纯javascript）

```
var fixScroll = function (className, border) {  // className = class of scrollElement(s), border: borderTop + borderBottom, due to offsetHeight
var reg = new RegExp(className,"i"); var off = +border + 1;
function _testClass(e) { var o = e.target; while (!reg.test(o.className)) if (!o || o==document) return false; else o = o.parentNode; return o;}
document.ontouchmove  = function(e) { var o = _testClass(e); if (o) { e.stopPropagation(); if (o.scrollTop == 0) { o.scrollTop += 1; e.preventDefault();}}}
document.ontouchstart = function(e) { var o = _testClass(e); if (o && o.scrollHeight >= o.scrollTop + o.offsetHeight - off) o.scrollTop -= off;}
}

fixScroll("fixscroll",2); // assuming I have a 1px border in my DIV 
```

html:

```
<div class="fixscroll" style="border:1px gray solid">content</div> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-10-21T08:38:17.273

我很幸运很简单：

```
body {
    height: 100vh;
} 
```

禁用弹出窗口或菜单的过度滚动非常有用，并且它不会强制浏览器栏显示为使用 position:fixed 时的样子。但是 - 您需要在设置固定高度之前保存滚动位置并在隐藏弹出窗口时恢复它，否则浏览器将滚动到顶部。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-24T16:12:09.207

```
overscroll-behavior: none; 
```

[过度滚动](https://ishadeed.com/article/prevent-scroll-chaining-overscroll-behavior/)

overscroll-behavior 属性是一个新的 CSS 特性，它控制过度滚动容器（包括页面本身）时发生的行为。您可以使用它来取消滚动链接、禁用/自定义下拉刷新操作、禁用 iOS 上的橡皮筋效果（当 Safari 实现过度滚动行为时）等等。最好的部分是使用 overscroll-behavior 不会对页面性能产生不利影响。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-06-28T11:57:44.570

试试这个它会完美的。

```
$('body.overflow-hidden').delegate('#skrollr-body','touchmove',function(e){
    e.preventDefault();
    console.log('Stop skrollrbody');
}).delegate('.mfp-auto-cursor .mfp-content','touchmove',function(e){
    e.stopPropagation();
    console.log('Scroll scroll');
}); 
```

# python - 如何在 python raw_input() 函数中包含换行符？

> ID：10238085
> 
> 赞同：6
> 
> 时间：2012-04-19T23:04:08.853
> 
> 标签：python, console-application

我习惯`raw_input()`将消息存储在变量中。所以我不能按回车键/新行来开始一个新段落。现在，如果我按 Enter 键，它将继续执行我程序的下一部分。

我已经尝试过这样的事情：

```
>>> message = raw_input("Message: ")
Message: Hello Sir, \n It's great that..
>>> message
"Hello Sir, \\n It's great that.."
>>> 
```

它没有用，我也尝试用单引号和双引号将它括起来，这也没有用。

我知道还有其他方法可以做到这一点，比如使用*wxpython*或*tkinter*，但我想严格控制它。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T23:11:15.643

能用`sys`模块吗？如果您愿意，这将起到作用。只需按 Ctrl-D 即可结束它。

```
import sys
message = sys.stdin.readlines() 
```

否则，这回答了你的问题：[Python raw_input ignore newline](https://stackoverflow.com/questions/9047349/python-raw-input-ignore-newline)

# android - 应用程序不会在模拟器或带有 eclipse 的设备上运行

> ID：10238087
> 
> 赞同：-2
> 
> 时间：2012-04-19T23:04:24.283
> 
> 标签：android, eclipse, android-emulator, buzztouch

我是在 Mac 上工作的初学者开发人员。任何有关此问题的帮助将不胜感激。我的应用程序源代码是在 Buzztouch 中创建的。我已将其导入 Eclipse。我已经设置了 SDK。我已成功运行 Hello, World 应用程序。我已尝试多次更改目标名称/API 级别。我已经尝试卸载并重新安装 Eclipse 和 Android SDK Manager，并删除并重新安装了应用程序文件。

我的目标只是测试我的应用程序并将其打包以提交到应用商店。

当我尝试在模拟器上启动应用程序时，我得到以下结果（应用程序标题已替换为 APPNAME 以保护隐私，标题本身格式正确）：

**在 LOGCAT 上**

```
04-19 18:44:25.187: E/AndroidRuntime(563): FATAL EXCEPTION: main
04-19 18:44:25.187: E/AndroidRuntime(563): java.lang.RuntimeException: Unable to resume activity {com.APPNAME/com.APPNAME.BT_screen_splash}: java.lang.NumberFormatException: Invalid int: "2.5"
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2444)
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1986)
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.os.Looper.loop(Looper.java:137)
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-19 18:44:25.187: E/AndroidRuntime(563):  at java.lang.reflect.Method.invokeNative(Native Method)
04-19 18:44:25.187: E/AndroidRuntime(563):  at java.lang.reflect.Method.invoke(Method.java:511)
04-19 18:44:25.187: E/AndroidRuntime(563):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-19 18:44:25.187: E/AndroidRuntime(563):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-19 18:44:25.187: E/AndroidRuntime(563):  at dalvik.system.NativeStart.main(Native Method)
04-19 18:44:25.187: E/AndroidRuntime(563): Caused by: java.lang.NumberFormatException: Invalid int: "2.5"
04-19 18:44:25.187: E/AndroidRuntime(563):  at java.lang.Integer.invalidInt(Integer.java:138)
04-19 18:44:25.187: E/AndroidRuntime(563):  at java.lang.Integer.parse(Integer.java:375)
04-19 18:44:25.187: E/AndroidRuntime(563):  at java.lang.Integer.parseInt(Integer.java:366)
04-19 18:44:25.187: E/AndroidRuntime(563):  at java.lang.Integer.parseInt(Integer.java:332)
04-19 18:44:25.187: E/AndroidRuntime(563):  at com.APPNAME.BT_screen_splash.onResume(BT_screen_splash.java:104)
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1154)
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.app.Activity.performResume(Activity.java:4539)
04-19 18:44:25.187: E/AndroidRuntime(563):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434)
04-19 18:44:25.187: E/AndroidRuntime(563):  ... 12 more 
```

**在控制台上**

```
[2012-04-19 18:51:57 - APP NAME] Android Launch!
[2012-04-19 18:51:57 - APP NAME] adb is running normally.
[2012-04-19 18:51:57 - APP NAME] Performing com.APPNAME.BT_activity_root activity launch
[2012-04-19 18:51:57 - APP NAME] Automatic Target Mode: launching new emulator with compatible AVD 'APPNAME'
[2012-04-19 18:51:57 - APP NAME] Launching a new emulator with Virtual Device 'APPNAME'
[2012-04-19 18:52:09 - Emulator] 2012-04-19 18:52:09.489 emulator-arm[3242:80b] Warning once: This application, or a library it uses, is using NSQuickDrawView, which has been deprecated. Apps should cease use of QuickDraw and move to Quartz.
[2012-04-19 18:52:09 - Emulator] emulator: emulator window was out of view and was recentered
[2012-04-19 18:52:09 - Emulator] 
[2012-04-19 18:52:09 - APP NAME] New emulator found: emulator-5554
[2012-04-19 18:52:09 - APP NAME] Waiting for HOME ('android.process.acore') to be launched...
[2012-04-19 18:53:07 - APP NAME] HOME is up on device 'emulator-5554'
[2012-04-19 18:53:07 - APP NAME] Uploading APP NAME.apk onto device 'emulator-5554'
[2012-04-19 18:53:09 - APP NAME] Installing APP NAME.apk...
[2012-04-19 18:54:10 - APP NAME] Success!
[2012-04-19 18:54:10 - APP NAME] Starting activity com.APPNAME.BT_activity_root on device emulator-5554
[2012-04-19 18:54:12 - APP NAME] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.APPNAME/.BT_activity_root } 
```

**在模拟器上**

出现一个弹出窗口，上面写着“不幸的是，[应用程序名称] 已停止。”

**代码：BT_screen_splash.java**

```
package com.APPNAME;

import org.json.JSONObject;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.widget.LinearLayout;

public class BT_screen_splash extends BT_activity_base{

    //properties...
    String transitionType = "";
    int startTransitionAfterSeconds = 0;
    int transitionDurationSeconds = 0;

    //onCreate
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.activityName = "BT_screen_splash";
        BT_debugger.showIt(activityName + ":onCreate"); 

        //set the content view...
        LinearLayout baseView = (LinearLayout)findViewById(R.id.baseView);

        //setup background colors...
        BT_viewUtilities.updateBackgroundColorsForScreen(this, this.screenData);

        //setup background images..
        if(backgroundImageWorkerThread == null){
            backgroundImageWorkerThread = new BackgroundImageWorkerThread();
            backgroundImageWorkerThread.start();
        }           

        //inflate this views layout file...
        //inflate this screens layout file..
        LayoutInflater vi = (LayoutInflater)thisActivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View thisScreensView = vi.inflate(R.layout.screen_splash, null);

        //add the view to the base view...
        baseView.addView(thisScreensView);

        /*
         * *******************************************************************
         * Notes:
         * screen_splash.xml is an empty layout file. You can add whatever you
         * want to it. The image for the splash screen is setup with the
         * BT_viewUtilities.updateBackgroundColorsForScreen() method.
         * That method sets the background image (the splash image) in this 
         * screens parent class. BT_activity_base. See above, almost all 
         * BT screens extend BT_activity_base
         ********************************************************************
        */

    }

    //onResume...
    public void onResume(){
        super.onResume();

        //get values..
        this.transitionType = BT_strings.getJsonPropertyValue(this.screenData.getJsonObject(), "transitionType", "");
        this.startTransitionAfterSeconds = Integer.parseInt(BT_strings.getJsonPropertyValue(this.screenData.getJsonObject(), "startTransitionAfterSeconds", "0"));

        //setup transition if we don't have -1 
        if(startTransitionAfterSeconds > -1){
            delayHandler.removeCallbacks(mDelayTask);
            delayHandler.postDelayed(mDelayTask, ((startTransitionAfterSeconds + 1) * 1000));
        }

    }

    //handle touch event..
    @Override  
    public boolean onTouchEvent(MotionEvent event){  
        //BT_debugger.showIt("BT_screen_splash: touch event..");
        //ignore touch events if we have a startTransitionAfterSeconds value..
        if(startTransitionAfterSeconds < 1){
            if(event.getAction() == MotionEvent.ACTION_DOWN){
                animateSplashScreen();
            }
        }
        return false;
    }   

    /////////////////////////////////////////////////////////////////////
    //handles question delay updates after each answer
    Handler delayHandler = new Handler(){
        @Override public void handleMessage(Message msg){
            delayHandler.removeCallbacks(mDelayTask);
        }
    };      

    private Runnable mDelayTask = new Runnable() {
        public void run() {
            animateSplashScreen();
        }
    };  
    //end timer stuff
    /////////////////////////////////////////////////////////////////////

    //handles animation...
    public void animateSplashScreen(){
        BT_debugger.showIt("BT_screen_splash:animateSplashScreen");

        //finish this screen so it cannot be returned to...
        BT_screen_splash.this.finish();

        //the next screen...
        BT_item tmpLoadScreenObject = null;
        BT_item tmpMenuItemObject = null;
        tmpMenuItemObject = new BT_item();
        tmpMenuItemObject.setItemId("tempMenuItem");
        tmpMenuItemObject.setItemNickname("tempMenuItem");
        try{
            tmpMenuItemObject.setItemType("BT_menuItem");
            tmpMenuItemObject.setJsonObject(new JSONObject("{\"transitionType\":\"fade\"}"));
        }catch(Exception e){

        }       

        //next screen to load...either tabbed home or the first screen in the list...
        if(APPNAME_appDelegate.rootApp.getTabs().size() > 0){
            BT_debugger.showIt("Building tabbed interface...");

            //load BT_activity_root_tabs...
            tmpLoadScreenObject = new BT_item();
            tmpLoadScreenObject.setItemId("tmpRootTabs");
            tmpLoadScreenObject.setItemNickname("tmpRootTabs");
            try{
                tmpLoadScreenObject.setItemType("BT_activity_root_tabs");
                tmpLoadScreenObject.setJsonObject(new JSONObject("{}"));
            }catch(Exception e){

            }

        }else{

            //find the app's home screen...
            tmpLoadScreenObject = APPNAME_appDelegate.rootApp.getHomeScreen();

            //flag it as the home screen...
            tmpLoadScreenObject.setIsHomeScreen(true);

        }

        //load...
        if(tmpLoadScreenObject != null){

            //remember current screen...
            APPNAME_appDelegate.rootApp.setCurrentScreenData(tmpLoadScreenObject);

            //load screen object...
            BT_act_controller.loadScreenObject(this, this.screenData, tmpMenuItemObject, tmpLoadScreenObject);

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:07:56.273

由于您试图将 2.5 转换为整数，因此您遇到了数字格式异常。

查看 BT_Splash_screen.java 中的第 104 行，找出您尝试进行的转换类型并使其对整数友好。

编辑：

这一行：

```
this.startTransitionAfterSeconds = Integer.parseInt(BT_strings.getJsonPropertyValue(this.screenData.getJsonObject(), "startTransitionAfterSeconds", "0")); 
```

是你的问题。它正在从您的 json 数据中读取 2.5 并尝试将其解析为 int。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:11:23.787

我看到两件事你可能应该看看。在 Log Cat 上，您有一个数字格式异常：Invalid int 2.5。整数只能是整数。同样在控制台中，它告诉您您正在使用已弃用的库。我会考虑改变这一点。如果可以，请发布一些代码，特别是围绕数字格式异常，我们可能会提供更好的帮助。

# javascript - 如何确保 Twitter 引导弹出窗口可见？

> ID：10238089
> 
> 赞同：17
> 
> 时间：2012-04-19T23:04:53.690
> 
> 标签：javascript, twitter-bootstrap, bootstrap-popover

有谁知道 twitter bootstrap 的 popover 组件的扩展，它动态更改放置选项以确保 popover 显示在屏幕上？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-07T17:48:45.427

位置可以是函数而不是字符串。**一个由fat**编写的自动放置示例，然后由**wleeper**移植到最新版本的引导程序，这里是项目的 github 问题之一：[https ://github.com/twitter/bootstrap/issues/345](https://github.com/twitter/bootstrap/issues/345)

这是将 CoffeeScript 编译为 JavaScript 的结果：

```
$("a[rel=popover]").popover({
  placement: function(tip, element) {
    var $element, above, actualHeight, actualWidth, below, boundBottom, boundLeft, boundRight, boundTop, elementAbove, elementBelow, elementLeft, elementRight, isWithinBounds, left, pos, right;
    isWithinBounds = function(elementPosition) {
      return boundTop < elementPosition.top && boundLeft < elementPosition.left && boundRight > (elementPosition.left + actualWidth) && boundBottom > (elementPosition.top + actualHeight);
    };
    $element = $(element);
    pos = $.extend({}, $element.offset(), {
      width: element.offsetWidth,
      height: element.offsetHeight
    });
    actualWidth = 283;
    actualHeight = 117;
    boundTop = $(document).scrollTop();
    boundLeft = $(document).scrollLeft();
    boundRight = boundLeft + $(window).width();
    boundBottom = boundTop + $(window).height();
    elementAbove = {
      top: pos.top - actualHeight,
      left: pos.left + pos.width / 2 - actualWidth / 2
    };
    elementBelow = {
      top: pos.top + pos.height,
      left: pos.left + pos.width / 2 - actualWidth / 2
    };
    elementLeft = {
      top: pos.top + pos.height / 2 - actualHeight / 2,
      left: pos.left - actualWidth
    };
    elementRight = {
      top: pos.top + pos.height / 2 - actualHeight / 2,
      left: pos.left + pos.width
    };
    above = isWithinBounds(elementAbove);
    below = isWithinBounds(elementBelow);
    left = isWithinBounds(elementLeft);
    right = isWithinBounds(elementRight);
    if (above) {
      return "top";
    } else {
      if (below) {
        return "bottom";
      } else {
        if (left) {
          return "left";
        } else {
          if (right) {
            return "right";
          } else {
            return "right";
          }
        }
      }
    }
  }
}); 
```

除了一种情况外，它对我来说效果很好：如果该项目位于右上角，则作为选项之一的弹出框没有出现的好位置，并且它部分显示在屏幕外。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-06T13:49:23.157

对于那些对采用默认放置（使用`data-placement`元素上的属性）的解决方案感兴趣的人，我已经改编了 Cymen 的出色答案。

我还确保没有不必要地计算边界，因此它的性能应该稍高一些。

```
$('[data-toggle="popover"]').each(function() {
    var trigger = $(this);
    trigger.popover({
        animation: true,
        delay: { show: 0, hide: 0 },
        html: true,
        trigger: 'hover focus',
        placement: getPlacementFunction(trigger.attr("data-placement"), 283, 117)
    });
});

var getPlacementFunction = function (defaultPosition, width, height) {
    return function (tip, element) {
        var position, top, bottom, left, right;

        var $element = $(element);
        var boundTop = $(document).scrollTop();
        var boundLeft = $(document).scrollLeft();
        var boundRight = boundLeft + $(window).width();
        var boundBottom = boundTop + $(window).height();

        var pos = $.extend({}, $element.offset(), {
            width: element.offsetWidth,
            height: element.offsetHeight
        });

        var isWithinBounds = function (elPos) {
            return boundTop < elPos.top && boundLeft < elPos.left && boundRight > (elPos.left + width) && boundBottom > (elPos.top + height);
        };

        var testTop = function () {
            if (top === false) return false;
            top = isWithinBounds({
                top: pos.top - height,
                left: pos.left + pos.width / 2 - width / 2
            });
            return top ? "top" : false;
        };

        var testBottom = function () {
            if (bottom === false) return false;
            bottom = isWithinBounds({
                top: pos.top + pos.height,
                left: pos.left + pos.width / 2 - width / 2
            });
            return bottom ? "bottom" : false;
        };

        var testLeft = function () {
            if (left === false) return false;
            left = isWithinBounds({
                top: pos.top + pos.height / 2 - height / 2,
                left: pos.left - width
            });
            return left ? "left" : false;
        };

        var testRight = function () {
            if (right === false) return false;
            right = isWithinBounds({
                top: pos.top + pos.height / 2 - height / 2,
                left: pos.left + pos.width
            });
            return right ? "right" : false;
        };

        switch (defaultPosition) {
            case "top":
                if (position = testTop()) return position;
            case "bottom":
                if (position = testBottom()) return position;
            case "left":
                if (position = testLeft()) return position;
            case "right":
                if (position = testRight()) return position;
            default:
                if (position = testTop()) return position;
                if (position = testBottom()) return position;
                if (position = testLeft()) return position;
                if (position = testRight()) return position;
                return defaultPosition;
        }
    }
}; 
```

# math - 给定圆上的两点相对于它们的度数，它们之间的度数是多少？

> ID：10238094
> 
> 赞同：1
> 
> 时间：2012-04-19T23:05:19.457
> 
> 标签：math, lua, trigonometry

***注意**：我正在使用 Lua。*

所以，我试图找出圆上两点之间的度数。问题在 340 到 20 之间，正确答案是 40 度，但是做类似的事情

```
function FindLeastDegrees(s, f) 
    return ((f - s+ 360) % 360) 
end 

print(FindLeastDegrees(60, 260))

-- S = Start, F = Finish (In degrees) 
```

除了试图找出两者之间的距离外，它适用于所有情况。下面的代码是我下一次失败的尝试。

```
function FindLeastDegrees(s, f) 
    local x = 0 
    if math.abs(s-f) <= 180 then 
        x = math.abs(s-f) 
    else 
        x = math.abs(f-s)  
    end 
return x
end

print(FindLeastDegrees(60, 260)) 
```

然后我尝试了：

```
function FindLeastDegrees(s, f) 
    s = ((s % 360) >= 0) and (s % 360) or 360 - (s % 360); 
    f = ((f % 360) >= 0) and (f % 360) or 360 - (f % 360); 
    return math.abs(s - f) 
end 

print(FindLeastDegrees(60, 350))

--> 290 (Should be 70) 
```

所以失败了。：/

那么如何找到其他两个度数之间的最短度数，然后是顺时针还是逆时针（加或减）才能到达那里。我完全糊涂了。

我正在尝试做的一些例子......

```
FindLeastDegrees(60, 350)
--> 70

FindLeastDegrees(-360, 10)
--> 10 
```

这似乎很难！我知道我将不得不使用...

1.  模数
2.  绝对值？

如果我应该添加或减去以获得值“完成”，我也希望它返回。
抱歉，描述太长了，我想你可能已经明白了....：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:11:47.487

如果度数在 0 到 360 范围内，则`% 360`可以跳过该部分：

```
function FindLeastDegrees(s, f) 
    diff = math.abs(f-s) % 360 ;
    return math.min( 360-diff, diff ) 
end 
```

# php - 预测 Imagick::thumbnailImage() 尺寸

> ID：10238097
> 
> 赞同：0
> 
> 时间：2012-04-19T23:05:58.760
> 
> 标签：php, image-processing, imagemagick, thumbnails

`Imagick`有什么方法可以快速判断实例在调用时会变成什么尺寸`Imagick::thumbnailImage($w, $h)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:25:20.417

大概是这样的……

```
# 3:2 format
$w = 120; # desired width
$h = 80; # desired height

$r = 640 / 480; # current width / height 4:3 format

if ($w / $h < $r)
    $w = $h * $r;
else
    $h = $w / $r;

echo $w, $h; # 120x90 4:3 format 
```

如果您提供尺寸（当前的 w&h、所需的 w&h 以及 imagick 生成的尺寸），它会更有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:03:52.020

我找不到一种算法来找到`Imagick::thumbnailImage($w, $h)`能够以 100% 准确度处理所有可能情况的维度。（例如`$w`or `$h`are 的情况`0`等）所以，我做了这个功能：

```
function thumbSize($pic, $thumbW, $thumbH) {
    //make a white image of the same size
    $picsize = $pic->getImageGeometry();
    $whitepic=new Imagick();
    $whitepic->newImage($picsize['width'], $picsize['height'], "white");
    $whitepic->thumbnailImage($thumbW, $thumbH);
    return $whitepic->getImageGeometry();
} 
```

可悲的是，它必须调整图像大小才能工作。它比基于算法的解决方案慢很多倍。但它有效。

如果其他人有更好的答案，我会检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T04:21:15.623

大概其中一个尺寸（宽度或高度）将正是您的缩略图调用中要求的尺寸。您可以通过比较 thumbW/width 和 thumbH/height 的比率来确定哪一个，将使用两者中较小的一个。缩略图尺寸名义上是宽度*比率和高度*比率。唯一剩下的就是转换为整数，选择是向上舍入、向下舍入和舍入到最接近的值。我不知道 Imagick 使用哪一个，但不难试验一下，看看哪一个匹配。

我也不知道当两个比率都小于一时会发生什么，即当原始图像小于请求的缩略图大小时。一个简单的实验也应该可以解决这个问题。

很抱歉没有自己进行实验，但 PHP 不在我的保留范围内。

# c# - c# System.Xml.Serialization 不通过公共列表的 set 方法

> ID：10238104
> 
> 赞同：0
> 
> 时间：2012-04-19T23:06:26.913
> 
> 标签：c#, xml, list, xml-serialization, deserialization

我想使用 System.Xml.Serialization 反序列化我的类，但我注意到使用 List Properties 的奇怪行为：

它从不调用 set 方法，这导致我丢失重要信息......

我想避免切换序列化方法。

```
public class Category
{
    private string _name;
    private List<Category> _subCategories;
    private Category _parent;

    public string Name
    {
        get { return _name; }
        set { _name = value; }
    }

    public List<Category> SubCategories
    {
        get { return _subCategories; }
        set
        {
            _subCategories = value;
            foreach (Category category in _subCategories) 
            { 
                category.Parent = this; 
            }
        }
    }

    [System.Xml.Serialization.XmlIgnoreAttribute]
    public Category Parent
    {
        get { return _parent; }
        set { _parent = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:24:11.270

实际上，序列化程序*确实*设置了该`SubCategories`属性，但是它将它设置为一个空列表，然后将项目添加到列表中。这就是为什么`Parent`没有设置孩子的财产。我前段时间写了一篇关于父子关系的XML序列化的文章，你可以在[这里](http://www.thomaslevesque.com/2009/06/12/c-parentchild-relationship-and-xml-serialization/)找到它。

使用该文章中的解决方案，您的`Category`课程将如下所示：

```
public class Category : IChildItem<Category>
{
    private string _name;
    private readonly ChildItemCollection<Category, Category> _subCategories;
    private Category _parent;

    public Category()
    {
        _subCategories = new ChildItemCollection<Category, Category>(this);
    }

    public string Name
    {
        get { return _name; }
        set { _name = value; }
    }

    public ChildItemCollection<Category, Category> SubCategories
    {
        get { return _subCategories; }
    }

    [System.Xml.Serialization.XmlIgnoreAttribute]
    public Category Parent
    {
        get { return _parent; }
        set { _parent = value; }
    }
} 
```

# javascript - 使用 underscore.js 或纯 JS 按日期排序

> ID：10238127
> 
> 赞同：5
> 
> 时间：2012-04-19T23:09:18.493
> 
> 标签：javascript, underscore.js

我有一个具有“日期”字符串属性的对象数组。IE：

```
[
    {
        id: 1,
        startDate: '2011-4-22'
    },
    {
        id: 2,
        startDate: '2012-3-15'
    },
    {
        id: 3,
        startDate: '2011-4-22'
    },
    {
        id: 4,
        startDate: '2012-2-10'
    }
] 
```

我只想将日期字符串转换为日期并按 startDate DESC 对其进行排序。有人可以告诉我如何使用 underscore.js _sortBy 方法来做到这一点，甚至只是简单的 javascript 都可以。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T00:08:56.620

下划线解决方案可能如下所示：

```
a = [ /* ... */ ];

function to_date(o) {
    var parts = o.startDate.split('-');
    o.startDate = new Date(parts[0], parts[1] - 1, parts[2]);
    return o;
}
function desc_start_time(o) {
    return -o.startDate.getTime();
}
var b = _.chain(a)
         .map(to_date)
         .sortBy(desc_start_time)
         .value(); 
```

当然，您不必使用命名函数，但名称确实使逻辑更清晰。

演示：http: [//jsfiddle.net/ambiguous/qe9sZ/](http://jsfiddle.net/ambiguous/qe9sZ/)

在纯 JavaScript 中，您可以这样做：

```
for(var i = 0, parts; i < a.length; ++i) {
    parts = a[i].startDate.split('-');
    a[i].startDate = new Date(parts[0], parts[1] - 1, parts[2]);
}
var b = a.sort(function(a, b) {
    return b.startDate - a.startDate;
}); 
```

演示：http: [//jsfiddle.net/ambiguous/rPAPG/](http://jsfiddle.net/ambiguous/rPAPG/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T23:13:25.820

`forEach`并且`sort`应该为您处理：

```
var data = [
    {
        id: 1,
        startDate: '2011-4-22'
    },
    {
        id: 2,
        startDate: '2012-3-15'
    },
    {
        id: 3,
        startDate: '2011-4-22'
    },
    {
        id: 4,
        startDate: '2012-2-10'
    }
];

var i, c;

for(i = 0; c = data[i]; i++) {
    var parts = c.startDate.split('-');

    c.startDate = new Date(+parts[0], +parts[1] - 1, +parts[2]);
}

data.sort(function(a, b) {
    return b.startDate - a.startDate;
}); 
```

[这是一个演示](http://jsfiddle.net/minitech/qVJ8v/)；检查您的控制台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T17:48:32.317

我是这样做的：

```
 var sorted = _(list).sortBy(
                    function (item) {                        
                        return [new Date(item.effectiveDate).getTime(), item.batchId];
                    }), "batchId"); 
```

如果你想让它下降，那么它是一样的，但是 *-1

```
 var sorted = _(list).sortBy(
                    function (item) {                        
                        return [new Date(item.effectiveDate).getTime()*-1, item.batchId];
                    }), "batchId"); 
```

在此示例中，我按两个字段排序，您可以忘记 item.batchId。

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-29T05:41:32.093

如果您从数据库中获取日期时间字段，那么您可以将日期时间转换为时间戳，然后进行排序。然后反转数组。

```
const _ = require('underscore');

var object = [{title:"a", date:"2018-03-22T09:10:21.000Z"}, {title:"b", date:"2018-08-22T09:10:21.000Z"}, {title:"c", date:"2018-04-22T09:10:21.000Z"}];

withTimeStamp = _.map(object, function(val, key){ 
		val.timestamp = new Date(val.date).getTime();
		return val; 
	});

object = _.sortBy(object, 'timestamp');
object.reverse();

console.log(object);
```

# image - 重叠图像的 Zurb Orbig 滑块内容

> ID：10238136
> 
> 赞同：0
> 
> 时间：2012-04-19T23:10:24.010
> 
> 标签：image, slider, overlap, zurb-foundation, orbit

它是网格中的单个图像，位于所有其他图像之上，老实说，我不知道为什么并且需要一些帮助。

**这是仅在加载页面时发生的事情。**

我正在使用 Zurb Foundation Orbit 滑块，我的页面包含这样的部分：

```
<section class="container">
    <div class="row">
        <div class="two columns">
        </div>
        <div class="eight columns">
            <div id="featured">
                <div class="content">
                    <ul class="block-grid four-up">
                        <li><a href="http://wazzup.wedoitforfun.org/" target="_blank" class="sb xlarge flat glossy wazzup"></a></li>
                        <li><a href="#" class="sb xlarge flat glossy light-gray nAppIcon"></a></li>
                        <li><a href="#" class="sb xlarge flat glossy light-gray eAppIcon"></a></li>
                        <li><a href="#" class="sb xlarge flat glossy light-gray wAppIcon"></a></li>
                        <li><a href="#" class="sb xlarge flat glossy light-gray aAppIcon"></a></li>
                        <li><a href="#" class="sb xlarge flat glossy light-gray pAppIcon"></a></li>
                        <li><a href="#" class="sb xlarge flat glossy light-gray pAppIcon"></a></li>
                        <li><a href="#" class="sb xlarge flat glossy light-gray sAppIcon"></a></li>
                    </ul>
                </div>
                <div class="content">
                    <ul class="block-grid four-up">
                        <li><a href="#" class="sb xlarge flat light-gray glossy about"></a></li>
                        <li><a href="http://www.scoop.it/t/tooltip" target="_blank" class="sb xlarge flat light-gray glossy tooltip"></a></li>
                        <li><a href="http://www.scoop.it/t/innovatus" target="_blank" class="sb xlarge flat light-gray glossy innovatus"></a></li>
                        <li><a href="http://whereismycode.pintolaranja.com" target="_blank" class="sb xlarge flat light-gray glossy whereismycode"></a></li>
                        <li><a href="http://scrumplicity.net" target="_blank" class="sb xlarge flat light-gray glossy scrumplicity"></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="two columns">
        </div>          
    </div>
</section> 
```

负责设置滑动部分的javascript是这样的：

```
jQuery(document).ready(function ($) {

    $("#featured").orbit({
         animation: 'horizontal-push',     // fade, horizontal-slide, vertical-slide, horizontal-push
        animationSpeed: 800,               // how fast animtions are
         timer: false,                      // true or false to have the timer
         advanceSpeed: 4000,                // if timer is enabled, time between transitions 
         pauseOnHover: false,               // if you hover pauses the slider
         startClockOnMouseOut: false,       // if clock should start on MouseOut
         startClockOnMouseOutAfter: 1000,   // how long after MouseOut should the timer start again
         directionalNav: true,              // manual advancing directional navs
         captions: true,                    // do you want captions?
         captionAnimation: 'fade',          // fade, slideOpen, none
         captionAnimationSpeed: 800,        // if so how quickly should they animate in
         bullets: false,                    // true or false to activate the bullet navigation
         bulletThumbs: false,               // thumbnails for the bullets
         bulletThumbLocation: '',           // location from this file where thumbs will be
         afterSlideChange: function(){},    // empty function 
         fluid: '640x320'                   // or set a aspect ratio for content slides (ex: '4x3') 
    });
}); 
```

我一直得到的是第一个网格上的第二个图像被第二个网格上的第二个图像替换。意思是，当我加载页面时，nAppIcon 不显示，而是显示工具提示图标。

然后，如果我单击滑块上的箭头进行导航，所有这些都会消失，并且所有图标都永远在适当的位置，不再重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:44:38.153

好的，这是我找到的答案。不太喜欢它，但它确实有效。

默认情况下，我将下幻灯片设置为隐藏，然后执行以下操作：

```
 $(".right").click(function(){
    if ($("#infoPanel").is(':hidden')){
        $("#appsPanel").hide();
        $("#infoPanel").show();
    }
    else{
        $("#infoPanel").hide();
        $("#appsPanel").show();         
    }
});

$(".left").click(function(){
    if ($("#infoPanel").is(':hidden')){
        $("#appsPanel").hide();
        $("#infoPanel").show();
    }
    else{
        $("#infoPanel").hide();
        $("#appsPanel").show();         
    }
}); 
```

# concurrency - 在 Erlang 货币编程中运行的多进程程序

> ID：10238139
> 
> 赞同：0
> 
> 时间：2012-04-19T23:10:37.003
> 
> 标签：concurrency, erlang, multiprocessing

我正在尝试学习 Erlang 货币编程。

这是一个从 Erlang.org 获得的示例程序，但没有关于如何运行它的说明。

我以这种方式运行它，

```
1> counter:start() 
<0.33.0> 
```

但是，我不知道如何运行其他函数，以便进程 (counter:start()) 可以根据收到的消息完成工作。

如何确认确实生成了两个或多个进程？

另一个问题，如何在函数中打印收到的消息？

```
 -module(counter).
 -export([start/0,loop/1,increment/1,value/1,stop/1]).

 %% First the interface functions.
 start() ->
       spawn(counter, loop, [0]).

 increment(Counter) ->
       Counter ! increment.

 value(Counter) ->
             Counter ! {self(),value},
      receive
              {Counter,Value} ->
                    Value
    end.
stop(Counter) ->
    Counter ! stop.

%% The counter loop.
 loop(Val) ->
    receive
            increment ->
                    loop(Val + 1);
            {From,value} ->
                    From ! {self(),Val},
                    loop(Val);
            stop -> % No recursive call here
                    true;
            Other -> % All other messages
                    loop(Val)
    end. 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T06:49:04.077

其他函数将只使用您刚刚创建的模块，如下所示：

```
C = counter:start(),
counter:increment(C),
counter:increment(C),
io:format("Value: ~p~n", [counter:value(C)]). 
```

您可以运行`pman:start()`以调出（GUI）进程管理器以查看您拥有哪些进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T07:48:35.107

除了 Emil 所说的之外，您还可以使用该`i()`命令来验证哪些进程正在运行。让我们启动三个计数器：

```
1> counter:start().
<0.33.0>
2> counter:start().
<0.35.0>
3> counter:start().
<0.37.0> 
```

并运行`i()`：

```
...
<0.33.0>              counter:loop/1                         233        1    0
                      counter:loop/1                           2              
<0.35.0>              counter:loop/1                         233        1    0
                      counter:loop/1                           2              
<0.37.0>              counter:loop/1                         233        1    0
                      counter:loop/1                           2              
... 
```

如您所见，上述进程（33、35 和 37）正在愉快地运行，它们正在执行 counter:loop/1 函数。让我们停止进程 37：

```
4> P37 = pid(0,37,0).
<0.37.0>
5> counter:stop(P37).
stop 
```

检查新的进程列表：

```
6> i(). 
```

你应该确认它已经消失了。

# asp.net - asp.net imagebutton 新窗口

> ID：10238142
> 
> 赞同：1
> 
> 时间：2012-04-19T23:11:06.787
> 
> 标签：asp.net, imagebutton

我有一个 Telerik 网格。我在 .aspx 页面中有以下代码。我想要发生的是，当用户单击 imagebutton 控件时，它会启动一个新窗口来显示该图像。请注意，我见过一些使用 Postback 的代码，但它们被弹出窗口阻止程序阻止。控件的图像是通过代码隐藏设置的，但这对于这个问题应该无关紧要。这是我的代码。谢谢！

```
<asp:ImageButton ID="prod_image_main" runat="server" AlternateText="Product Main Image"
                Height="500PX" Width="540PX"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:31:58.590

尝试使用 javascript 函数打开一个新窗口：

```
function OpenW() {
    window.open('NewForm.aspx', '', "height=200,width=200");
} 
```

在你的 imageButton 中设置 onclientclick：

```
<asp:ImageButton ID="prod_image_main" runat="server" AlternateText="Product Main Image"
                Height="500PX" Width="540PX" onclientclick="OpenW()"  /> 
```

并在 NewForm 的 onload 加载图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T23:35:02.560

而不是使用`asp:ImageButton`控件，为什么不使用链接呢？这样，您可以简单地将`target`链接的属性设置为`_blank`并在新窗口中打开它。

像这样的东西：

```
<a href="imagepage.aspx" target="_blank"><img src="wherevertheimageis.jpg" /></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:16:38.637

根据 Mike Evan 的回答，这对我有用。

ASPX 文件：

```
<asp:HyperLink runat="server" ID="hpl_mainimg" Target="_blank">
<asp:Image ID="prod_image_main" runat="server" AlternateText="Product Main Image"
                Height="500PX" Width="540PX"  /> </asp:HyperLink> 
```

C#背后的代码

```
prod_image_main.ImageUrl = File.Exists(Server.MapPath("images_products/" + rdr["image_1"].ToString())) ? "images_products/" + rdr["image_1"].ToString() : "images_missing/NotAvailable_RS.jpg";
prod_image_main.ToolTip = rdr["itemtitle"].ToString();
hpl_mainimg.NavigateUrl = prod_image_main.ImageUrl.ToString(); 
```

# python - 为什么这个 python 逻辑语句的行为与我的预期行为相反？

> ID：10238143
> 
> 赞同：2
> 
> 时间：2012-04-19T23:11:13.017
> 
> 标签：python, if-statement, boolean-logic, python-2.x

我在 Python 解释器中运行以下命令：

```
 some_list = []
  methodList = [method for method in dir(some_list) if (callable(getattr(some_list, method)) and (not method.find('_')))] 
```

我想要的是获取特定对象的所有方法名称的列表，但用下划线命名的方法**除外**，即`__sizeof__`

这就是为什么我在上面的代码中嵌套了 if 语句：

```
 if (callable(getattr(some_list, method)) and (not method.find('_'))) 
```

但内容`methodList`是：

`['__add__', '__class__', '__contains__', '__delattr__', '__delitem__', '__delslice__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getslice__', '__gt__', '__iadd__', '__imul__', '__init__', '__iter__', '__le__', '__len__', '__lt__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__reversed__', '__rmul__', '__setattr__', '__setitem__', '__setslice__', '__sizeof__', '__str__', '__subclasshook__']`

确实，与我的预期完全相反。

当字符串无法包含字符串时，不应该`not method.find('_')`只返回 true吗？`method``'_'`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T23:12:34.263

请参阅[`str.find`](http://docs.python.org/library/stdtypes.html#str.find).

> 返回找到子字符串 sub 的字符串中的最低索引，使得 sub 包含在切片 s[start:end] 中。可选参数 start 和 end 被解释为切片表示法。如果未找到 sub，则返回 -1。

如果未找到下划线，则表达式`method.find('_')`返回 -1，如果以下划线开头，则返回 0。应用`not`意味着只有以下划线开头的方法才会给出`True`（因为`not 0`is `True`）。

改为使用`'_' not in method`。

# javascript - 让用户使用 jquery 复制元素的源代码...

> ID：10238151
> 
> 赞同：3
> 
> 时间：2012-04-19T23:11:36.867
> 
> 标签：javascript, jquery

我可以理解基本的 javascript 和 jquery，但我很难理解如何让用户查看例如元素的源代码。

如果我在这样的网页上有一个元素

```
`<p>Hi I'm an element</p>` 
```

每个人都知道它将显示为

```
Hi I'm an element 
```

但我希望用户在其源代码形式中看到这一点

```
`<p>Hi I'm an element</p>` 
```

这到底是怎么做到的？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:15:49.923

基本思想是获取元素的 HTML，然后将其以纯文本形式显示在某处。我们可以使用`.html()`获取 HTML，然后`.text()`将相同的 HTML 输出为纯文本：

```
//on the click of a link
​$('a')​.on('click', function () {

    //append a container with the plain-text HTML of an element
    $('body').append($('<div />').text($('form').html()));
});​​ 
```

这是演示：http: [//jsfiddle.net/YbJfs/](http://jsfiddle.net/YbJfs/)

请注意，这不会获得实际的`<form>`标签，但您可以将表单放在容器中，选择容器，然后使用`.html()`if 该容器，您也将拥有`<form>`标签。

此外，如果您想将 HTML 添加到表单输入或文本区域，您可以使用`.val()`而不是`.text()`.

这是一个演示：http: [//jsfiddle.net/YbJfs/1/](http://jsfiddle.net/YbJfs/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T23:13:59.923

您可以使用...

```
element.outerHTML; 
```

...虽然它在技术上不是“源代码”。是浏览器渲染的HTML，可能会有一些差异。

此外，您需要 Firefox 10 及更低版本的 shim。

```
function outerHTML(el) {
    return el.outerHMTL || document.createElement('div')
                                   .appendChild(el.cloneNode(true))
                                   .parentNode
                                   .innerHTML;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T23:14:41.547

要获取元素的 html，请使用本机 javascripts innerHTML，或者如果您想使用 jQuery，请使用 html() 方法。例子 ...

javascript:

```
var html = document.getElementById('myOb').innerHTML; 
```

jQuery：

```
var html = $('#myOb').html(); 
```

# java - 如果 BeanIO 中的某些记录发生异常，则继续解析记录

> ID：10238155
> 
> 赞同：1
> 
> 时间：2012-04-19T23:11:57.397
> 
> 标签：java, bean-io

我正在使用`BeanIO`将平面文件转换为`Object`. 使用以下代码片段。

```
while ((MyCustomRecord obj = (MyCustomRecord) in.read()) != null) {
         System.out.println(obj);
} 
```

但是这样做的问题是，如果在解析某些记录时发生异常，它会立即停止处理记录。我想抑制这种异常并希望它继续处理下一条记录。

有没有办法做到这一点？

我可以尝试的一件事是放入块`in.read`体`while`并将其包裹起来，`try/catch`但是我将如何检测结束条件。似乎没有方法可以告诉记录结束。

谢谢吉滕德拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:20:37.877

在 BeanIO 参考文档中找到答案。我之前错过了。

可以通过在`BeanReader`.

```
in.setErrorHandler(new BeanReaderErrorHandlerSupport() {
            public void invalidRecord(InvalidRecordException ex) throws Exception {
                System.out.println(ex.getLocalizedMessage());
            } 
}); 
```

[http://beanio.org/docs/reference/index.html#StreamValidation](http://beanio.org/docs/reference/index.html#StreamValidation)

# java - 使用并行堆栈的非递归后序二叉树遍历

> ID：10238156
> 
> 赞同：0
> 
> 时间：2012-04-19T23:12:05.900
> 
> 标签：java, traversal, postorder

我想采用这种非递归后序二叉树遍历的伪代码算法，并将其实际实现到代码中。本质上，我假设创建两个并行堆栈，一个用于保存对节点的引用，另一个用于保存整数值 1 或 2，以判断是否访问了左子树或右子树。我根据他们给我的内容创建了算法，但由于某种原因，它只打印了一些数字，并且没有按正确的顺序打印，我觉得我按照它应该的方式解释了它，但它刚刚开始工作，任何帮助都会很好。

这是他们想让我做的事情：

```
1.create stack(s)
2\. current = root;
3.v = 0;
4\. if (current is null)
    the binary tree is empty
5\. if (current is not null)
    a. push current onto stack;
    b. push 1 onto stack;
    c. current = current.lLink;
6\. while (stack is not empty)
      if (current is not null and v is 0)
      {
          push current and 1 onto stack;
          current = current.lLink
      }
      else
      {
          pop stack into current and v;
          if ( v == 1)
          {
              push current and 2 onto stack;
              current = current.rLink;
              v = 0;
          }
          else
              visit current;
      } 
```

这是我的实现：

```
public void nonRecursivePostTraversal()
{
    LinkedStackClass<BinaryTreeNode<T> > stack
    = new LinkedStackClass<BinaryTreeNode<T> >();//create stack

    //create parallel stack of integers
    LinkedStackClass<Integer> stackInt = new LinkedStackClass<Integer>();

    BinaryTreeNode<T> current;
    current = root;

    Integer v = 0;

    if (current == null)
        stack = null;

    if   (current != null)
    {
        stack.push(current);
        v = 1;
        stackInt.push(v);
        current = current.lLink;
    }

    while (!stack.isEmptyStack())
        if (current != null && v == 0)
        {
            stack.push(current);
            v = 1;
            stackInt.push(v);
            current = current.lLink;

        }
        else
        {
            current = (BinaryTreeNode<T>) stack.peek();
            stack.pop();
            v = (Integer) stackInt.peek();
            stackInt.pop();
            if (v == 1)
            {
                stack.push(current);
                v = 2;
                stackInt.push(v);
                current = current.rLink;
                v = 0;
            }
            else
                System.out.print(current.info + " ");
        }

}//end alg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T15:38:47.687

```
public static void nonRecursivePostOrder(BinaryTreeNode root){

    Stack<BinaryTreeNode> stack = new Stack<BinaryTreeNode>();
    List<BinaryTreeNode> returnNodes = new LinkedList<BinaryTreeNode>();

      while (true) {
          if (root != null) {

              if (returnNodes.contains(root)) {
                  returnNodes.add(stack.pop());
                  root = null;
              } else {
                  stack.push(root);
                  root = root.getLeft();
              }

          } else {
              if (stack.isEmpty()) {
                  break;
              } else if (stack.peek().getRight() == null) {
                  root = stack.pop();
                  returnNodes.add(root);
                  if (root == stack.peek().getRight()) {
                      returnNodes.add(stack.pop());
                  }
              }

              if (!stack.isEmpty()) {
                  root = stack.peek().getRight();
              } else {
                  root = null;
              }
          }
      }

      for(BinaryTreeNode node : returnNodes)
          System.out.print(node.getData()+" ");

} 
```

# latex - Gnuplot：黑白等高线图

> ID：10238169
> 
> 赞同：1
> 
> 时间：2012-04-19T23:14:03.890
> 
> 标签：latex, gnuplot, contour

我的 Latex 文档中嵌入了以下 gnuplot 图：

```
\begin{gnuplot}[terminal=epslatex,terminaloptions={color size 14.5cm, 9cm}]
set view map
unset surface

unset key
unset xtics
unset ytics
unset ztics

set contour base
set cntrparam levels discrete 2,4,8,16,32,64,128,256,512
set isosamples 100

splot y**2 + 0.1*x**2 notitle
\end{gnuplot} 
```

剧情还行。我想要实现的是轮廓线都具有相同的样式，即线型和相同的颜色，如果可能的话，黑色。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:13:21.833

我不知道乳胶终端，但你可以尝试：

```
splot y**2 + 0.1*x**2 notitle lc rgb "#000000" 
```

[http://www.gnuplot.info/demo/contours.html](http://www.gnuplot.info/demo/contours.html) （请参阅他们以相同颜色绘制所有轮廓的部分 - 这是该页面上的最后一个示例）

**编辑**

看起来轮廓的颜色是由 控制的`{un}set clabel`。因此，如果您只是添加`unset clabel`到脚本中，那么轮廓可能应该显示为黑色（与`lc rgb "#000000"`我上面的那个一样。请注意，这`unset clabel`意味着`unset key`。要通过添加键的能力来实现这一点有点棘手......

*以防您需要保留标签...*

您可能需要`set term push`保存当前终端。 `set term unknown`使输出无处可去。 `set table "junk.dat"`然后像往常一样发出你的情节命令。这会将轮廓写入文件“junk.dat”，然后可以在 a 之后用线条绘制`set term pop`以恢复旧的终端设置（您可能需要一些变体，`title columnhead`也许还需要一个索引/每个来获取标签正确显示...）-我实际上不确定`set term push/pop`在这种情况下是否需要命令。无论如何，使用 gnuplot 将事物绘制到表格中是我为许多不同的应用程序做过多次的事情。这是一个值得记住的好工具。

# php - PHP is_scalar 函数

> ID：10238171
> 
> 赞同：0
> 
> 时间：2012-04-19T23:14:37.813
> 
> 标签：php

PHP 问题。

是否存在 $foo 的值，其 is_scalar($foo) 与 (is_numeric($foo) || is_bool($foo) || is_string($foo)) 不同

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:55:23.910

调查后看来，这个实际答案是***否定的***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:27:45.807

**更新的答案** is_scalar 是与 is_bool、is_numeric 和 is_string 等不同的函数。它告诉您给定变量是否为标量，因此 int、bool、float 或字符串将是标量，但数组和对象不会。

似乎 (is_numeric($foo) || is_bool($foo) || is_string($foo)) 可以替换为 is_scalar。但是，如果您想使用它，那么我的建议是看看您的用途是什么。如果您只对标量值感兴趣，那么它应该足够好，如果您对特定数据类型感兴趣，那么您应该进行精确检查。

更多细节可以在这里看到：http: [//php.net/manual/en/function.is-scalar.php](http://php.net/manual/en/function.is-scalar.php)

# c++ - 为对等系统编写 C++ 客户端/服务器的最佳 RPC 包是什么？

> ID：10238176
> 
> 赞同：1
> 
> 时间：2012-04-19T23:15:33.823
> 
> 标签：c++, xml-rpc, rpc, protocol-buffers

我有一个执行计算繁重的本地处理的程序。计算包有 16MiB 的输入缓冲区并生成 10KB 到 16MiB 的输出。这一切都发生在多线程环境中。

我有许多受计算限制的用户。我有兴趣添加对点对点多处理的支持。也就是说，客户端将在组织中的多台计算机上运行。master 会找到可用的客户端，向他们发送 16MiB 的缓冲区，然后得到结果。

主服务器将有一个可用客户端的列表。然后它将向每个客户端发送一条消息，表明它是免费的。客户端将为他们拥有的每个核心启动一个线程。每个线程都会向 master 请求一个工作缓冲区，将计算结果，然后将结果发送给 master。主服务器会将每个客户端的结果合并到最终输出中。

典型的运行涉及处理 100 到 50,000 个 16MiB 缓冲区。输出通常在 100MB 到 10GB 范围内。缓冲区之间没有数据依赖关系。

我正在寻找安排客户端和服务器之间通信的最佳方式。我的计划是使用某种 RPC。我不想在客户端或服务器中嵌入 Web 服务器。相反，我的计划是简单地接收 TCP 套接字上的连接并拥有某种基本的 RPC。

以下是我正在考虑的选项：

1.  我可以扮演我自己的客户端/服务器系统的角色，并使用协议缓冲区将整个事情放在一起。
2.  我可以将现有的[RPC 系统之一用于 potocol 缓冲区](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns#RPC_Implementations)。
3.  我可以嵌入 Web 服务器并使用 XMLRPC。

实现语言是C++。该程序为 Linux、MacOS 和 Windows 的 mingw 编译。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T02:21:52.943

我们发现[0MQ](http://zeromq.org/)符合我们的标准。

# java - android应用程序中的计算功能导致强制关闭，这里有什么问题？

> ID：10238177
> 
> 赞同：0
> 
> 时间：2012-04-19T23:15:39.233
> 
> 标签：java, android

我目前正在开发一个应用程序，并且遇到了一个问题，导致它在我尝试调用此函数时强制关闭我：

```
public void calcActRun() {
double calcmass = bodymass * genderValue;

int qty1 = Integer.parseInt(findViewById(R.id.calcItemQty1).toString());

double vol1 = Double.parseDouble(findViewById(R.id.calcItemVol1).toString());

double percent1 = Double.parseDouble(findViewById(R.id.calcItemQty1).toString());

double alcoholTotal = 0;
double alcoholConcentration = alcoholTotal /calcmass;

int time = Integer.parseInt(findViewById(R.id.calcInputTime).toString());

double alcoholCurrentConcentration = alcoholConcentration - (0.15 * time);
}
} 
```

我已经在代码的前面定义了所有变量（除了在这个函数中定义的变量），而 Eclipse 并没有给我任何关于它为什么崩溃的提示......

目标是在表单中输入各种值（正如您可能已经从代码中猜到的那样），并在单击 UI 中的按钮时获得计算输出。

我什至尝试使用“中间人”来调用它，结果相同（代码如下所示）

```
public void calcButtonClicked(View v) {
 calcActRun();
} 
```

我知道按钮本身正在工作，因为当我用以下内容替换内容时一切正常：

```
Toast.makeText(this, "test", Toast.LENGTH_SHORT).show(); 
```

如果有人能帮我揭开这个问题的神秘面纱，我将不胜感激 - 如果您需要更多信息，请询问...... :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T23:18:32.310

我想你想要

```
((TextView)findViewById(R.id.whatever)).getText().toString() 
```

代替

```
findViewById(R.id.whatever).toString() 
```

# iphone - uiactionsheet 高度

> ID：10238179
> 
> 赞同：2
> 
> 时间：2012-04-19T23:15:57.973
> 
> 标签：iphone, ios, uiactionsheet

我有一个关于 UIActionSheet 的简单问题！如何设置 UIActionsheet 的高度？我试过 setFrame 和 setBounds 但没有任何效果。我正在使用以下操作表：

```
NSString *title = UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation) ? @"\n\n\n\n\n\n\n\n\n" : @"\n\n\n\n\n\n\n\n\n\n\n\n" ;
    UIActionSheet *actionSheet = [[UIActionSheet alloc] 
                                  initWithTitle:[NSString stringWithFormat:@"%@%@", title, NSLocalizedString(@"", @"")]
                                  delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Button1",@"Button2", nil];
    [actionSheet setTag: 1];
    //[actionSheet setBounds:CGRectMake(0,0,320,150)];
    //[actionSheet showFromRect:CGRectMake(0,0,100,50) inView: self.parentViewController.tabBarController.view animated:YES];
   // [actionSheet setFrame:CGRectMake(0, 30, 320, 30)];
    actionSheet.actionSheetStyle = UIActionSheetStyleAutomatic;
    [actionSheet showInView:self.parentViewController.tabBarController.view];
     actionSheet = nil; 
```

我的问题是操作表高度等于当前视图的高度。我想根据 UIActionSheet 的内容自动调整高度。

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T00:04:24.067

`UIActionSheet`的默认行为是自动调整到其内容大小。你不应该`frame`直接设置。

您会看到操作表占用了如此多的空间，因为您在标题中插入了一堆换行符，从而迫使标题标签占用了比应有的更多的垂直空间。如果您不希望操作表那么高，请不要像那样修改标题。

# php - 使用 Zend 库的 Google Calendar API

> ID：10238181
> 
> 赞同：0
> 
> 时间：2012-04-19T23:16:05.607
> 
> 标签：php, zend-framework, google-calendar-api

我正在按照[http://www.ibm.com/developerworks/library/x-googleclndr/](http://www.ibm.com/developerworks/library/x-googleclndr/)上的教程使用 Google 日历 API，但遇到了一些奇怪的问题。我的 PHP 代码看起来像这样

```
 require_once 'Zend/Loader.php';
    Zend_Loader::loadClass('Zend_Gdata');
    Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
    Zend_Loader::loadClass('Zend_Gdata_Calendar');
    Zend_Loader::loadClass('Zend_Http_Client');

    //create authenticated HTTP client for Calendar service
    $gcal = Zend_Gdata_Calendar::AUTH_SERVICE_NAME;
    $user = "daniel.lieberman610@gmail.com";
    $pass = "*******";
    $client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $gcal);
    $gcal = new Zend_Gdata_Calendar($client);

    //generate query to get event list
    $query = $gcal->newEventQuery();
    $query->setUser($user);
    $query->setVisibility('private');
    $query->setProjection('basic');

    //get and parse calendar feed
    //print output

    try {
        $feed = $gcal->getCalendarEventFeed($query);
        echo "<!--comment-->\n";
    } catch (Exception $e) {
        echo "<!--different comment-->\n";
    } 
```

try 块内发生了某种异常，但不是`Zend_Gdata_App_Exception`因为没有显示错误消息。我无法弄清楚我做错了什么。

另外，我在这里学习PHP。非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T11:38:00.500

将 try 代码移动到文件的开头。是否显示错误？在这里，您将找到一个我在 Joomla 扩展程序中使用的工作示例[https://github.com/Digital-Peak/GCalendar/blob/master/com_gcalendar/admin/libraries/GCalendar/GCalendarZendHelper.php](https://github.com/Digital-Peak/GCalendar/blob/master/com_gcalendar/admin/libraries/GCalendar/GCalendarZendHelper.php)

顺便说一句，我建议迁移到新的谷歌日历 API v3，因为他们可能会在明年关闭版本 2（使用 Zend）。这是库的链接[https://developers.google.com/google-apps/calendar/downloads](https://developers.google.com/google-apps/calendar/downloads)

# c#-4.0 - 无法打开 word doc 并在不锁定的情况下引用它

> ID：10238182
> 
> 赞同：0
> 
> 时间：2012-04-19T23:16:09.203
> 
> 标签：c#-4.0, com

您好，我知道如何打开并从 word 文件中获取纯文本以获取一些代码。但是，我对此产生了不好的影响。doc 这个词被锁定了，我不知道如何取消分配任何锁定它的东西。我最终想要的是打开一个将位于 UNC 路径中的文件并读取其中的一部分，无论其他人是否打开它，解析其中的行，关闭它，不保存任何内容或锁定文件。我能得到的最接近的是我可以打开一个文件，解析它，它会锁定，但是当我打开它并关闭它（运行代码的同一台机器）时，它会神奇地解锁它。

我对 COM 几乎一无所知，所以我搜索了一段时间，发现了有关 Marshall 对象的一些信息并添加了它。我试图打开和关闭参考“只读：真”，“只读：假”。我觉得我缺少一些简单的东西，所以我想我会在这里问。任何建议都是免费的，我在 .NET 4.0 中进行编码，所以你没有传递所有那些烦人的 obj = null, obj = null 来打开文档。

```
 public static string ReadWordDoc(string loc)
{
Word.Application wordApp = new Word.Application();

Word.Document Doc = wordApp.Documents.Open(loc, ReadOnly: true);

sb = "";

foreach (Word.Paragraph objParagraph in Doc.Paragraphs)
{
try 
{
    sb += objParagraph.Range.Text + "\n";
}
catch (Exception ex)
{
    throw ex;
}
}

return sb;

Doc.Close(SaveChanges: false);

Marshal.ReleaseComObject(Doc);

wordApp.Quit(SaveChanges: false);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T23:02:34.500

由于某种原因，我想出了一个锁。我确保使用“不保存更改”退出 Word 应用程序，并同时运行垃圾收集器。这可能有点矫枉过正，但它基本上可以确保我的目标文件上没有任何锁定。

```
Word._Application wordApp = new Word.Application();
    Word._Document Doc = wordApp.Documents.Open(loc, ReadOnly: true);
        try
        {
            sb = "";

            foreach (Word.Paragraph objParagraph in Doc.Paragraphs)
            {
                try
                {
                    sb += objParagraph.Range.Text + "\n";
                }
                catch (Exception ex)
                {
                    throw ex;
                }
            }
        }
        catch (COMException) { }
        finally
        {
            //FileInfo finfo = new FileInfo(loc);
            //finfo.IsReadOnly = false;

            if (Doc != null)
            {
                Doc.Close();
                Doc = null;
            }
            if (wordApp != null)
            {
                wordApp.Quit(Word.WdSaveOptions.wdDoNotSaveChanges);
                wordApp = null;
            }
        }

        GC.Collect();
        GC.WaitForPendingFinalizers();

        GC.Collect();
        GC.WaitForPendingFinalizers();

        return sb; 
```

# c# - 未找到 Silverlight 文件 System.Runtime.Serialization 来自 Newtonsoft 的反序列化

> ID：10238187
> 
> 赞同：1
> 
> 时间：2012-04-19T23:16:49.087
> 
> 标签：c#, silverlight, exception, filenotfoundexception, json.net

尝试反序列化 JSON 时出现异常。据我了解，此文件由用户本地文件系统上的 Silverlight 运行时提供，不需要包含在 XAP 文件中。

```
T result = default(T);

result = JsonConvert.DeserializeObject<T>(data); 
```

关于我为什么会收到此错误的任何想法？

* * *

```
Exception encountered: System.IO.FileNotFoundException: Could not load file or assembly 'System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The system cannot find the file specified.

File name: 'System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'

   at System.ModuleHandle.ResolveType(RuntimeModule module, Int32 typeToken, IntPtr* typeInstArgs, Int32 typeInstCount, IntPtr* methodInstArgs, Int32 methodInstCount, ObjectHandleOnStack type)

   at System.ModuleHandle.ResolveTypeHandleInternal(RuntimeModule module, Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext)

   at System.Reflection.RuntimeModule.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments)

   at System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly& lastAptcaOkAssembly, RuntimeModule decoratedModule, MetadataToken decoratedToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, Object[] attributes, IList derivedAttributes, RuntimeType& attributeType, IRuntimeMethodInfo& ctor, Boolean& ctorHasParameters, Boolean& isVarArg)

   at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeModule decoratedModule, Int32 decoratedMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes, Boolean isDecoratedTargetSecurityTransparent)

   at System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeType type, RuntimeType caType, Boolean inherit)

   at System.RuntimeType.GetCustomAttributes(Type attributeType, Boolean inherit)

   at Newtonsoft.Json.Utilities.ReflectionUtils.GetAttributes[T](ICustomAttributeProvider attributeProvider, Boolean inherit)

   at Newtonsoft.Json.Utilities.ReflectionUtils.GetAttribute[T](ICustomAttributeProvider attributeProvider, Boolean inherit)

   at Newtonsoft.Json.Serialization.JsonTypeReflector.GetAttribute[T](Type type)

   at Newtonsoft.Json.Serialization.JsonTypeReflector.GetAttribute[T](ICustomAttributeProvider attributeProvider)

   at Newtonsoft.Json.Utilities.ThreadSafeStore`2.AddValue(TKey key)

   at Newtonsoft.Json.Utilities.ThreadSafeStore`2.Get(TKey key)

   at Newtonsoft.Json.Serialization.CachedAttributeGetter`1.GetAttribute(ICustomAttributeProvider type)

   at Newtonsoft.Json.Serialization.DefaultContractResolver.CreateContract(Type objectType)

   at Newtonsoft.Json.Serialization.DefaultContractResolver.ResolveContract(Type type)

   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadForType(JsonReader reader, Type t, JsonConverter propertyConverter)

   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadForTypeArrayHack(JsonReader reader, Type t)

   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateList(IWrappedCollection wrappedList, JsonReader reader, String reference, JsonArrayContract contract)

   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.<>c__DisplayClass1.<CreateAndPopulateList>b__0(IList l, Boolean isTemporaryListReference)

   at Newtonsoft.Json.Utilities.CollectionUtils.CreateAndPopulateList(Type listType, Action`2 populateList)

   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateAndPopulateList(JsonReader reader, String reference, JsonArrayContract contract)

   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateList(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue, String reference)

   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue)

   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueNonProperty(JsonReader reader, Type objectType, JsonContract contract)

   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType)

   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)

   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)

   at Newtonsoft.Json.JsonConvert.DeserializeObject[T](String value, JsonSerializerSettings settings)

   at Newtonsoft.Json.JsonConvert.DeserializeObject[T](String value)

   at Sungard.Helios.UI.Common.Infrastructure.ControllerUtility.<>c__DisplayClass1d`1.<GetResponse>b__16(IAsyncResult r)
---------------------------
OK   
--------------------------- 
```

编辑：

这是T的样本

```
using System;
using System.Runtime.Serialization;

namespace MyNs
{
    [DataContract]
    public class ClientQuery
    {
        [DataMember]
        public int ClientId { get; set; }

        [DataMember]
        public string ClientName { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:58:00.767

问题是我们有一个为 Silverlight 4 构建的 Newtonsoft.Json.dll。它是版本 4.0.5.14411，不是为 Silverlight 5 构建的。当 Visual Studio 构建解决方案时，它会正确地将项目映射到正确的 System.Runtime。序列化dll。在 TFS 中排队使用 MSBUILD 的构建不会。

我升级到最新版本并解决了这个问题。

# python - 如何使用 Python 将 JSON 文件复制到另一个 JSON 文件中

> ID：10238188
> 
> 赞同：0
> 
> 时间：2012-04-19T23:16:56.167
> 
> 标签：python, json

我想用 Python 将 JSON 文件的内容复制到另一个 JSON 文件中

有任何想法吗 ？

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T23:37:25.023

由于缺乏研究工作，我通常不会回答，但考虑到评论中的糟糕建议，我会咬牙并给出更好的选择。

现在，这在很大程度上取决于您的意思，您是希望用另一个文件覆盖一个文件的内容，还是插入？后者可以这样做：

```
with open("from.json", "r") as from, open("to.json", "r") as to:
    to_insert = json.load(from)
    destination = json.load(to)
    destination.append(to_insert) #The exact nature of this line varies. See below.
with open("to.json", "w") as to:
    json.dump(to, destination) 
```

这使用了 python 的[`json`模块](http://docs.python.org/library/json.html)，它使我们可以很容易地做到这一点。

我们打开这两个文件进行读取，然后以写入模式再次打开目标文件以将其截断并写入。

标记的行取决于 JSON 数据结构，这里我将其附加到根列表元素（可能不存在），但您可能希望将其放置在特定`dict`键或类似的键处。

在替换内容的情况下，它变得更容易：

```
with open("from.json", "r") as from, open("to.json", "w") as to:
    to.write(from.read()) 
```

在这里，我们实际上只是从一个文件中读取数据并将其写入另一个文件。

当然，您可能希望检查数据*是否为*​​JSON，在这种情况下，您可以使用第一个解决方案中的 JSON 方法，这将在无效数据上抛出异常。

另一个可以说是更好的解决方案也可以[`shutil`是复制方法](http://docs.python.org/library/shutil.html#directory-and-files-operations)，它可以避免手动读取或写入文件内容。

使用[该`with`语句](http://docs.python.org/reference/compound_stmts.html#the-with-statement)为我们提供了自动关闭文件的好处——即使发生异常。最好总是尽可能地使用它们。

请注意，在 2.7 之前的 Python 版本中，`with`语句不处理多个上下文管理器，而是需要嵌套它们：

```
with open("from.json", "r") as from:
    with open("to.json", "r+") as to:
        ... 
```

# c# - 如何在 C# 的 Web 请求中指定内容字符集？

> ID：10238190
> 
> 赞同：1
> 
> 时间：2012-04-19T23:17:04.740
> 
> 标签：c#, character-encoding, httpwebrequest

这是向远程网站发出请求的函数代码：

```
private static string translatePage(string text, string langPair, Encoding encoding) {
    string urlBabelfish = "http://babelfish.yahoo.com/translate_txt";
    string urlReverso = "http://www.reverso.net/text_translation.aspx?lang=RU#";
    string url = "";

    // Create a request using a URL that can receive a post. 
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(urlBabelfish);

    // Set the Method property of the request to POST.
    request.Method = "POST";

    // Create POST data and convert it to a byte array.
    string postData = string.Format("lp={0}&trtext={1}", langPair, text);
    byte[] byteArray = encoding.GetBytes(postData);

    // Set the ContentType property of the WebRequest.
    request.ContentType = "application/x-www-form-urlencoded";
    System.Net.Mime.ContentType ct = new System.Net.Mime.ContentType(
        request.ContentType);
    ct.CharSet = encoding.ToString();
    request.ContentType = ct.ToString();

    // Set the ContentLength property of the WebRequest.
    request.ContentLength = byteArray.Length;

    // Get the request stream.
    Stream dataStream = request.GetRequestStream();

    // Write the data to the request stream.
    dataStream.Write(byteArray, 0, byteArray.Length);

    // Close the Stream object.
    dataStream.Close();

    // Get the response.
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    // Display the status.
    Console.WriteLine(((HttpWebResponse)response).StatusDescription);

    // Get the stream containing content returned by the server.
    dataStream = response.GetResponseStream();

    // Open the stream using a StreamReader for easy access.
    string resPage = "";
    using (dataStream)
    {
        using (StreamReader sr = new StreamReader(dataStream, encoding))
            resPage = sr.ReadToEnd();
    }
    response.Close();

    return resPage;
} 
```

使用输入参数调用此函数`langPair="en_ru"`会返回一个编码错误且不允许西里尔符号的页面。ContentType 元标记如下所示：

```
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"> 
```

所有西里尔符号都变为`'\0'`.

如果我在浏览器中使用相同的参数手动执行请求，它会返回`UTF-8`带有标签的精细编码页面

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">. 
```

我希望我的代码也这样做。我作为编码参数传递`UTF-8`，但它不影响 ContentType 元标记。

我可以在我的代码中做些什么来使请求返回我需要的编码页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:35:35.760

检查`response.ContentType`。它应该包含一个`charset=`参数。您可以使用它来创建`Encoding`在创建`StreamReader`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-10T08:56:38.500

吉姆米歇尔的回答帮助了我。

如果你想知道如何设置 ContentType 和 CharSet，可以这样做：

```
var request = new HttpRequestMessage(HttpMethod.Post, "http://yourwebsite.com:80/Api/")
{
    Content = new StringContent(messageBodyAsString)
};
request.Content.Headers.ContentType = new MediaTypeHeaderValue("application/json")
{
    CharSet = "utf-8"
}; 
```

然后请求将发送`Content-Type`值`application/json; charset=utf-8`

# javascript - 使用 jQuery 的 event.stopPropagation() 的正确心态是什么

> ID：10238191
> 
> 赞同：0
> 
> 时间：2012-04-19T23:17:24.180
> 
> 标签：javascript, javascript-events, jquery

关于如何应用 jQuery，我有两种方法`event.stopPropagation()`：

1.  乐观的方法 - 默认情况下，所有事件处理程序都***没有*** `stopPropagation()`. `stopPropagation()`只有当事件冒泡导致一些不必要和不受欢迎的行为时，才会将其添加到处理程序中。
2.  悲观方法 - 默认情况下，`stopPropagation()`添加到所有事件处理程序。如果由于断开连接甚至冒泡而缺少某些所需的行为，则相应的行为`stopPropagation()`将被删除。

我想知道`stopPropagation()`在我的开发中使用这两者中的哪一个，或者两者都不是。我更倾向于 2），因为它看起来会具有更好的性能，因为可以防止不必要的冒泡。我想听听有关该主题的专家的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:19:34.023

到处打电话`stopPropagation`是不好的。它破坏了事件委托*，可能效率较低，除非您从字面上为页面上的每个元素添加处理程序（如果您这样做，您应该使用事件委托），并且您可能不记得这样做。

所以经验法则：仅`stopPropagation`在需要时才调用。

* * *

* 即`.live`,`.delegate`和 的委托版本`.on`。

* * *

这是一个事件委托的示例，它依赖于冒泡来侦听源自创建侦听器*后添加的元素的事件：*

```
document.documentElement.addEventListener('click', function(e) {
    if(e.target.nodeName === 'a') {
        console.log('A link was clicked!');
    }
}); 
```

这里有人抛出 jQuery 打破了这一点：

```
$('div').click(function(e) {
    e.stopPropagation();
}); 
```

任何`<a>`是 a 的后代都`<div>`将不再处理其点击！请不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T23:24:47.480

`stopPropagation`仅在您确实需要时才致电。请记住，如果您使用 jQuery`live`函数并停止它，则实时处理程序永远不会调用，因为`live`事件存储在`document`element.

# xcode - MKMap 引脚颜色不显示

> ID：10238192
> 
> 赞同：0
> 
> 时间：2012-04-19T23:17:43.787
> 
> 标签：xcode, mkmapview, mapkit, mkpinannotationview

我无法想象为什么它不起作用..我想更改引脚颜色，并使用此方法提供的其他一些东西，但它不起作用。也许我使用这种方法错了？最好有例子，谢谢。

```
 [mapView setMapType: MKMapTypeStandard];
[mapView setZoomEnabled:YES];
[mapView setScrollEnabled:YES];
for (NSDictionary *dict in self.klubiArray3) {
double latid = [[dict valueForKey:@"LatiS"] doubleValue];
double longid =[[dict valueForKey:@"LongiS"] doubleValue];
MKCoordinateRegion region = {{0.0, 0.0}, {0.0, 0.0}};

region.span.latitudeDelta = 0.005;
region.span.longitudeDelta = 0.005;
region.center.latitude = latid;
region.center.longitude = longid;

[mapView setRegion:region animated:YES];

NewClass *ann = [[NewClass alloc] init];
ann.title = [dict valueForKey:@"AnnotM"];
ann.subtitle = [dict valueForKey:@"Adress"];;
ann.coordinate = region.center;

[mapView addAnnotation:ann ];
}
 }
#pragma mark MKMapViewDelegate
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
{
       NSLog(@"Controll comes here");

if (annotation == mapView.userLocation) 
    return nil;

MKPinAnnotationView *pin = (MKPinAnnotationView *) [mapView dequeueReusableAnnotationViewWithIdentifier: @"asdf"];

if (pin == nil)
    pin = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier: @"asdf"] ;
else
    pin.annotation = annotation;
pin.userInteractionEnabled = YES;
UIButton *disclosureButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure]; 
[disclosureButton setFrame:CGRectMake(0, 0, 30, 30)];

pin.rightCalloutAccessoryView = disclosureButton;
pin.pinColor = MKPinAnnotationColorPurple;
//pin.animatesDrop = YES;
[pin setEnabled:YES];
[pin setCanShowCallout:YES];
return pin;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:36:35.797

发现，我忘记在 Interface Builder 中连接我的地图委托。

# xml - 从存储为 XML 的数据创建的可打印、动态生成的表单？

> ID：10238194
> 
> 赞同：1
> 
> 时间：2012-04-19T23:17:49.387
> 
> 标签：xml, forms, printing

* * *

我是一个正在做一个小项目的新程序员；我正在设计的软件最终将处理加载和保存 XML 数据并生成表单。这些表格构成了一个小型医疗实践的电子图表，并且由于每个客户和每个图表的不同要求，表格将根据存储的信息动态生成。

我一直在尝试在 HTML 中创建一系列可以在一定程度上起作用的表单，但很明显这种方法存在根本缺陷。没有什么可以让我在浏览器中运行本地 HTML 和 javascript 应用程序并获得对文件系统的足够访问权限以加载和保存 XML 文件。

我正在寻找一种新方法。目前我正在考虑试用 Adob​​e AIR。我有一些 Java 经验，但我不确定如何有效地在 Java 中创建有吸引力的表单。无论哪种方法，我都需要考虑打印应用程序创建的表单的能力。

有没有人对我可以试验的现有技术有任何建议，以便让这个应用程序启动和运行？

## TL;博士

我正在寻找具有以下功能的（本地，非网络）应用程序：

*   创建有吸引力的电子表格。
*   从（本地）XML 文件加载/保存数据。
*   打印表格。

我不确定哪些技术可能适合该项目，但我目前正在研究 Adob​​e AIR，因为我对 Javascript 最有经验。有什么建议吗？

# mongodb - 将另一个嵌入式文档添加到我的 MongoDB 用户模型中会影响没有这些嵌入式文档的旧数据吗？

> ID：10238195
> 
> 赞同：0
> 
> 时间：2012-04-19T23:18:01.810
> 
> 标签：mongodb

在我一直从事的项目中，我添加了一个新字段 - 嵌入式文档。此添加是否会影响更改之前的数据？从我读过的内容来看，这不应该影响先前的数据，这实际上是使用 MongoDB 的好处之一。它只是以前的数据不会有那个字段。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:37:13.667

不，它不会影响您以前的文档 - 如果您愿意，您的集合中的每个文档都可以拥有自己独特的字段。由您在应用程序级别处理此问题。

# php - $_GET 与 Switch 语句

> ID：10238199
> 
> 赞同：5
> 
> 时间：2012-04-19T23:18:41.487
> 
> 标签：php

我有很多 get 值来定义用户将看到的页面，例如对于“个人资料”，我将显示个人资料页面等等..

为了找出要显示的页面，我尝试做这样的事情：

```
switch ($_GET) {
    case 'profile':
        require_once('function/profile.php');
        break;
    case 'team':
        require_once('function/team.php');
        break; 
```

但它没有显示任何结果..

我这样发送 GET 请求：例如 index.php?profile ..

这里有什么问题，我怎样才能设法做类似的工作。先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T23:24:45.237

为了使您的示例正常工作，您可以替换`$_GET`为`key($_GET)`

请注意，虽然这`key()`将返回数组的**第一个键，因此如果您更改 URL 的变量顺序，此行将停止运行。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-19T23:25:52.487

$_GET 是来自查询字符串中的键值对的数组（脚本名称和问号后面的部分 url）。

例如，查询字符串`test=1&foo=bar`将转换为：

```
Array(
    test => 1
    foo => 'bar'
) 
```

在 OP 示例中`index.php?profile`，您将得到一个 $_GET 数组，如：

```
Array(
    profile => null
) 
```

做这样的网址的问题是它是非标准的。当你以非标准的方式做事时，你必须想出非标准的解决方案来解决问题。

以下是一些选项以及每个选项都有的问题：

1.  您可以使用`$_SERVER['QUERY_STRING']`which 将`?`在 url 之后为您提供所有内容。如果在 url 中传递的唯一内容只是`profile`（或其他一些单一值），这很好。在那种情况下，除了它`$_SERVER['QUERY_STRING']`什么都没有`profile`。但是您也会失去在获取字符串中传递其他参数的能力。

2.  您可以使用@stewe 描述的方法。php [key](http://www.php.net/key)函数将从传入的数组中的当前位置返回key。如果没有进行任何循环，则当前位置是第一个元素。这也适用于多个 get 参数。您的查询字符串看起来像`index.php?profile&test=1&foo=bar`. 问题是`profile`（或任何页面）必须是第一个，否则键将返回传递的第一个参数的任何键。

3.  另一种选择是只使用使用键和值的标准方法。无论页面如何，您都使用相同的键，只是值发生了变化。然后你就有了看起来像的 url，`index.php?page=profile`你可以随时使用`$_GET['page']`.

4.  您可以使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。它的设置很简单，大多数主机都支持它（或其他类似的），并且有数百万关于如何让它工作的教程和示例。您最终会得到最干净的 url，并且它适用于查询字符串参数。例如，`/profile/`可以重写为指向`/index.php?page=profile`. 用户看到`/profile/`了，php 看到了标准。这使您可以使用`$_GET['page']`来获取请求的页面，而不必进行额外的解析来获取 php.ini 中的其他值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-19T23:22:09.387

`$_GET`是基于 URL 的查询字符串填充的数组或变量。您需要执行以下操作：

```
switch ($_GET['myVar']) { ... } 
```

您的 URL 如下所示：

```
http://www.domain.com/index.php?myVar=value 
```

有关更多信息，请参阅[$_GET 的 PHP 手册](http://php.net/manual/en/reserved.variables.get.php)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-27T21:51:50.447

$_GET 本身对你不是很有用。我想你正在寻找一个关键，比如“页面”，对吧？记住也要声明一个默认值。

所以..

```
$page = $_GET['page'];

switch ($page) {
  case 'profile':
    require_once('function/profile.php');
    break;
  case 'team':
    require_once('function/team.php');
    break;
  default:
    require_once('function/page-not-found.php');
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T23:21:55.747

它是一个数组，因此您需要使用循环来迭代值：

```
foreach($_GET as $key => $val){
    switch ($key) {
        case 'profile':
            require_once('function/profile.php');
            break;
        case 'team':
            require_once('function/team.php');
            break;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-19T23:21:56.043

$_GET 是一个超级全局变量，其中数据以数组形式存储。所以你必须使用索引来访问它

假设您在发送数据时尝试包含一个页面，如下所示：

> *domain.com?page=product*

然后你必须像这样使用开关

```
switch($_GET['page']) {
   ....
} 
```

[**注意：**也许我不必提醒您此代码对注入的脆弱性。]

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-19T23:22:23.383

使用 foreach 你可以获得键值对

```
foreach ($_GET as $switchkey => $switchval) {
  switch ($switchkey) {
    case 'profile':
        require_once('function/profile.php');
        break;
    case 'team':
        require_once('function/team.php');
        break;
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-02T07:39:15.883

我实际上在正常获取导致 lfi/rfi 漏洞后使用以下内容。以下解决方案是通过错误赏金计划提交给我的，效果很好。注意包含`default`属性。很重要。以下应该是唯一可以接受的答案。归功于飞行的意大利面怪物（他的面条附属物）

```
 switch($_GET['page']) {

                        case 'foo':

                            include('pages/foo.php');

                            break;

                        case 'bar':

                            include('pages/bar.php');

                            break;
                        default:

                            include('pages/home.php');

                    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-02T09:44:22.287

如前所述，首先想到的似乎是传递信息的非标准方式。解析值时会产生一些困难。虽然，对我来说，主要问题不是检查/清理/清理 $_GET 上的数据。可能是太明显了，因为几乎所有的答案都是由似乎知道他们在做什么的人给出的，我假设他们只是因为这个而没有提到它

但是请记住，如果您不检查它，您很容易受到攻击和脚本故障。损坏程度取决于您自己的应用程序，因此不容易预测。

无论如何，这就是我要做的，包括 html

```
<?php
    // initialize variables
    $variable_1 = false; // assume this is the page you want to load
    $variable_2 = false;
    $default = 'index.php'; // the idea is to load something controlled by you. index, error, 404, etc.

    // process $_GET, check, clean and assign values
    if ( isset( $_GET ) !== false ) {
        foreach ( $_GET as $keys => $values ) {
            // check both, $keys and $values for; character set, length, validity against a white list, content
            // using an if to match the $keys garantees that regardless of the order, you will get what you want
            if ( $keys === 'field_1' ) {
                // do what you have to do with this, for instance ...
                $variable_1 = $values;
            }
            if ( $keys === 'field_2' ) {
                // do what you have to do with this, for instance ...
                $variable_2 = $values;
            }
            unset( $_GET[$keys] );
        }
        unset ( $keys, $values );
    }

    // check there are no surprises on $_GET. Load and study anything here
    if ( empty( $_GET ) === false ) {
        // it should be empty, so log what is in here and prepare your code for that
        unset( $_GET );
    } else {
        unset( $_GET );
    }

    // process the variables according to what you want to do
    // if there are just a few options, and they are not going to change often
    // use a switch, otherwise, use a method to check if a file/content exists
    // for the request and load it. If it doesn't exist, inform the user
    // with out giving away internals and suggest a new destination

    // process other variables, here or before this part, wherever makes sense

?>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>testing get</title>
    </head>
    <body>
        <form method="get" action="test_get_00.php" accept-charset="utf-8">
            <p><label for="field_1">write something<input type="text" id="field_1" name="field_1" /></label></p>
            <p><label for="field_2">write something<input type="text" id="field_2" name="field_2" /></label></p>
            <p><button type="submit">send</button></p>
        </form>
    </body>
</html> 
```

当然你可以做更多的事情，但是如果你准备好你的表格，包括字符集，你就不用担心了，或者至少有一些已知的元素。这不是万无一失的，但它有帮助。

此外，我上面提到的机制在白名单思维模式下工作，这就是 foreach 的想法，以检查你是否得到了你期望的结果，并在记录后丢弃其余部分。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-03T08:10:42.810

您试图以错误的方式归档 SEO 网址。

我认为这样`index.php?profile`更好，`index.php?page=profile`但在这种情况下这是错误的行为方式。

您应该使用`index.php?page=profile`然后应用重写规则来创建 SEO url，如下所示：

```
RewriteEngine On

RewriteRule ^(.*)$ index.php?page=$1 
```

这样，您的用户将使用：

```
http://example.com/profile 
```

显示的页面将是：

```
http://example.com/index.php?page=profile 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-03T14:54:59.300

您可以在 $_GET (url) 中定义一个变量，而不是打开键（如 key($_GET) 所建议的那样），例如“action”，其中包含“profile”或“team”或任何您希望的变量未来。那么你的开关，简单地说，就是：

```
switch ($_GET['action']) 
```

所以无论你分配给这个键的什么动作，你都可以在你的开关中使用

# objective-c - 如何防止 Xcode 覆盖 iTunes 二进制文件？

> ID：10238203
> 
> 赞同：2
> 
> 时间：2012-04-19T23:18:54.893
> 
> 标签：objective-c, ios

我有一个非常烦人的问题。我的应用程序已在 AppStore 中发布。

每次我从 Xcode 运行应用程序时，iTunes 二进制文件都会被覆盖......下次我需要使用应用程序的生产版本测试某些东西时，我需要重新下载它。

有没有办法解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T23:42:29.987

您需要更改捆绑标识符。这是我在项目中的设置方式

*   选择您的项目
*   选择你的目标
*   导航到`Info`选项卡
*   将其更改`bundle identifier`为自定义构建设置，例如我将其设置为`${BUNDLE_IDENTIFIER}`

![在此处输入图像描述](../Images/a6ef0e3d70296d0db63ac9b1bd27ecd2.png)

*   现在点击`Project`- （您可能希望保持您选择的目标级别）
*   导航到`Build Settings`选项卡
*   一直滚动到底部查看`User-Defined`
*   点击`Add Build Setting`
    *   (1) 选择`Add User-Defined Setting`
*   (2) 添加`Key`为您之前选择的名称
*   为每个方案设置不同的捆绑标识符

![在此处输入图像描述](../Images/8e04b684e5e38a6b1f33cf26d081186e.png)

* * *

## 奖金

您可以对图标使用相同的技巧，以便在一台设备上轻松区分您的构建

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T00:08:33.843

正如 Paul.s 所建议的那样，更改包标识符是可行的——但这意味着您的 Release 和 Debug 构建将发生分歧。从技术上讲，它们将是使用不同容器的不同应用程序。这样做可能有充分的理由，但它也有风险：它有点复杂，而且您通常需要更加努力地工作以确保测试开发版本[正确处理来自生产版本的数据](https://developer.apple.com/library/ios/#technotes/tn2285/_index.html)。您需要确保发送给测试人员的任何临时构建都使用生产包标识符。

解决该问题的另一种方法是简化旧版本的安装。如果您[存档](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/DistApps/DistApps.html#//apple_ref/doc/uid/TP40010215-CH11-SW2)您的生产版本，那么您可以安装它们而无需通过 App Store 再次下载它们。只需打开以前导出的 IPA 并同步即可。

# w3wp.exe - 将 w3wp 进程附加到 IETester 的 Visual Studio 2010 调试器

> ID：10238204
> 
> 赞同：0
> 
> 时间：2012-04-19T23:19:24.803
> 
> 标签：w3wp.exe

我试图在 Visual Studio 2010 中为 ASP.net MVC 应用程序附加 w3wp.exe 进程。它适用于使用普通的 IE 浏览器。但不能使用 IETester (IE7)。

你们中有人遇到过类似的问题吗？请分享一些关于如何克服它的信息。

非常感谢您的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T21:50:05.107

我的问题的根本原因是 JSON.Stringify 在 IE7 中出错。所以使用 JSON.js 插件来解决这个问题。

由于上述问题，WCF 服务中的调试器会触发。我现在很好。

谢谢。

# c# - 如何在没有视图模型的情况下使用 @Html.EditorFor()

> ID：10238206
> 
> 赞同：5
> 
> 时间：2012-04-19T23:19:30.307
> 
> 标签：c#, asp.net-mvc, editorformodel

我想做这样的事情，这样我就可以创建一个模式对话框，稍后我会用 jQuery 调用它

```
<div class="modal" id="modalName" style="display: none;">
<div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Edit Contacts</h3>
</div>
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new Dictionary<string, object> { { "class", "form-horizontal" } }))
{
    <div class="modal-body">
    @Html.EditorFor(model => new ViewModel(), "ViewModelTemplateName")
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
        <button type="submit" class="btn btn-primary">
            Submit</button>

    </div>
}
</div> 
```

在这条线上

```
@Html.EditorFor(model => new ViewModel(), "ViewModelTemplateName") 
```

我得到错误

> 模板只能与字段访问、属性访问、一维数组索引或单参数自定义索引器表达式一起使用。

我不明白为什么它会关心实例在哪里或是什么（只要它的类型正确）

@Html.Partial("~/Views/Shared/EditorTemplates/ViewModel.cshtml", new ViewModel()) 可以解决问题，但我必须声明模板的完整路径……这有点糟糕。

那么有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T23:51:25.743

从技术上讲，问题不在于*实例*。它是一个*表达式*，而不是一个函数，您传递到那里并且表达式解析器用于`EditorFor`获取它用于识别属性等的元数据，不支持`new`表达式。

您可以简单地在 EditorFor 语句之外声明模型的新实例并执行以下操作：

```
@{ var emptyViewModel = new ViewModel(); }
@Html.EditorFor(model => emptyViewModel, "ViewModelTemplateName") 
```

那应该行得通。

也就是说 -*不*使用`model`表达式中的一部分有点奇怪。您也许应该考虑将对话框提取到它自己的具有`ViewModel`模型类型的局部视图中，然后您可以在其中使用，并使用 a作为您传递给它的模型`EditorForModel`从该父视图中调用它。`new ViewModel()`

# c++ - 发布模式下的网络问题

> ID：10238209
> 
> 赞同：1
> 
> 时间：2012-04-19T23:19:51.403
> 
> 标签：c++, networking, release-mode, debug-mode

我一直在用 Ogre3D 引擎开发一个跨平台的 3D 多人游戏。通过使用 C 自己的（send/sentto/recvfrom 等）网络功能，我创建了自己的网络结构。它同时支持 udp 和 tcp 传输协议。游戏使用客户端-服务器架构。

我遇到的问题是，虽然应用程序在调试模式下工作（玩家连接到服务器，传输他们的文件，正确发送和接收转换更新等），但如果我切换到发布模式，一些网络功能不起作用. 例如，其中一台计算机根本没有收到 1 个转换更新，但是，如果我重新启动应用程序，有时它会收到。此外，一些 tcp 消息没有被应用程序捕获等等。我在 Ubuntu 的发布模式下也有奇怪的网络操作。

你认为可能是什么问题？

注意：我应该尝试 Windows 自己的网络功能（WSASend 等）吗？

# c# - 异步调用 .NET 方法并在完成时绑定到网格

> ID：10238215
> 
> 赞同：2
> 
> 时间：2012-04-19T23:20:39.983
> 
> 标签：c#, asp.net, gridview, updatepanel, ajax.net

Container.RetrieveItems() 调用一个需要一段时间的服务，所以我想异步调用它（在检索到项目后，它们被设置为 Container 类的 List 属性）。完成检索项目后，我希望它更新 updatePanel 内的 gridView（updatePanel Mode="Conditional" 和 ScriptManager EnablePartialRendering="true"。UpdatePanel 没有触发项目）。

我已经设置了断点并逐步完成了每一步。检索项目，网格是数据绑定然后它调用更新。没有抛出异常，但网格没有随内容更新。如果我将 UpdatePanel 设置为使用触发器和 Timer.OnTick 事件进行更新，它可以完美运行，但是我只需要在检索项目后更新它，因此在服务调用完成后触发手动 UpdatePanel.Update() 将是理想的。

我做了很多搜索，但所有的答案都是“你忘了调用 DataBind()”

有什么我想念的吗？

```
 private void UpdateGrid()
    {
        grid.DataSource = Container.List;
        grid.DataBind();
        updatePanel.Update();
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        var task = Task.Factory.StartNew(Container.RetrieveItems);
        task.ContinueWith((x) => UpdateGrid());
    } 
```

**更新：** 我设置了一个更简单的测试来尝试识别问题。我创建了一个标签，其 Text 属性将在方法完成后更新。当页面加载时，它调用该方法，当方法完成时它调用 updatePanel.Update() 但没有变化。

根据 Jaimes 的建议，然后我尝试在 Button_click 的回发中调用手动更新，它确实更新了标签。这就是为什么我当前的设置不起作用的原因，尽管我仍在寻找在完成异步任务时更新内容的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T03:21:58.183

杰米走在正确的轨道上。呈现页面后，您的服务器无法将新数据“推送”到客户端。客户端必须发起请求。我会在客户端设置一个计时器或使用 JavaScript`setTimeout`定期轮询服务器以查看它是否完成。

# 网络服务方法

另一种方法是在服务器上设置 Web 服务，然后从您的页面调用它。这将在一个新线程中执行，并在结果可用后立即异步更新网格。

首先，您需要设置 WCF Web 服务。如果您不确定，有成千上万篇关于此的文章。这是其中之一：http: [//www.codeproject.com/Articles/16973/Simple-Web-Service-using-WCF-Windows-Communication](http://www.codeproject.com/Articles/16973/Simple-Web-Service-using-WCF-Windows-Communication)

这是我的一个项目中的一些示例代码：

```
namespace UI.Web.WebServices
{
    [ServiceContract(Namespace = "WebServices")]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class WebServiceName
    {
        [OperationContract]
        [WebInvoke(ResponseFormat = WebMessageFormat.Json)]
        public FacilityResult[] MethodName()
        {
            FacilityService facilityService = new 
            return facilityService .GetAssignments()).ToArray();
        }
    }
} 
```

## 从客户端调用 Web 服务

接下来，您需要使用 JavaScript 从您的页面对网格进行数据绑定：http: [//blog.ashmind.com/2007/06/21/client-side-databinding-with-aspnet-ajax-futures/](http://blog.ashmind.com/2007/06/21/client-side-databinding-with-aspnet-ajax-futures/)

这是来自同一项目的一些示例代码。该项目使用 jQuery 而不是纯 JavaScript，如链接中的示例：

```
<script type="text/javascript">
    function getGridData() {
        var payload = { }; // Put data to include here, if any

        $.ajax({
            type: "POST",
            url: "/WebServiceName.svc/MethodName",
            data: JSON.stringify(payload),
            contentType: "application/json",
            dataType: "json",
            success: function (msg) {
                bindResultsToGrid(msg.d);
            },
            error: function (xhr) { alert('error' + xhr.responseText); }
        });
    }

function bindResultsToGrid(data)
{
    ...
}
</script> 
```

参考 [http://aspalliance.com/1301_Unveil_the_Data_Binding_Architecture_inside_Microsoft_ASPNET_Ajax_10__Part_1](http://aspalliance.com/1301_Unveil_the_Data_Binding_Architecture_inside_Microsoft_ASPNET_Ajax_10__Part_1)

[http://aspalliance.com/1301_Unveil_the_Data_Binding_Architecture_inside_Microsoft_ASPNET_Ajax_10__Part_2](http://aspalliance.com/1301_Unveil_the_Data_Binding_Architecture_inside_Microsoft_ASPNET_Ajax_10__Part_2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T07:26:23.280

我想分享我对这个问题的完整解决方案。虽然 msigman 的回答帮了我很大的忙，但它并没有让我一路走好。我还没有找到从客户端绑定到 GridView 的可行解决方案，因此我从 javascript 创建网格。

# 1 - 设置控制器来处理请求

MVC 控制器可以通过 AJAX 从客户端调用，这允许您从客户端调用任何 .NET 代码。这是一个关键部分，因为所有的功能和繁重的工作都可以由控制器/服务完成，但您仍然拥有 javascript 的灵活性。我在这里发布了一个完整的示例，说明如何执行此操作，[从 JavaScript 调用 ASP.NET 函数？](https://stackoverflow.com/questions/3713/call-asp-net-function-from-javascript/11013093#11013093). （可以与 Webforms 或 MVC 一起使用）。

```
public class TimersController : ApiController
{
   public HttpResponseMessage<TimerDisplay[]> Get()
   {
       return new HttpResponseMessage<TimerDisplay[]>(
           TimerRepository.Get(), // all your .NET logic can be encapsulated here
           new MediaTypeHeaderValue("application/json")
        );
    }
} 
```

# 2 - 使用 AJAX 发起请求

这可以在页面加载时通过处理 $(document).ready() 事件、单击按钮或定期使用计时器来完成。

```
 $.ajax({
            url: "api/timers",
            dataType: "json",
            success: function (result) { bindGrid(result); }
        }) 
```

# 3 - 将数据绑定到网格

正如我所说，我还没有找到从客户端将数据绑定到 GridView 的方法。我觉得更好的解决方案是完全删除 GridView （这更像是一个服务器端控件，对于这种情况不灵活），在它的地方你可以从 Javascript 生成网格。虽然您可以手动循环遍历数据并自己创建`<tr>`和`<td>`，但有很多网格 / ui 框架可以为您执行此操作。[Kendo UI ( http](http://demos.kendoui.com/web/grid/index.html) ://demos.kendoui.c​​om/web/grid/index.html ) （以及许多其他有用的小部件）是一个这样的 UI 框架，它有一个很好的网格对象，您可以直接将 JSON 数据绑定到该对象。这篇 SO 帖子包含有关 javascript UI 框架[https://stackoverflow.com/questions/159025/jquery-grid-recommendations](https://stackoverflow.com/questions/159025/jquery-grid-recommendations)的更多建议。

```
 function bindGrid(gridData) {
        var grid = $("#grid");
        grid.html("");
        grid.kendoGrid({
            columns: [
                { field: "Place", title: "Place" },
                { field: "Time", title: "Time" } 
            ],
            dataSource: {
                data: gridData
            },
            scrollable: false
        });
    } 
```

# android - 滑动抽屉安卓打不开

> ID：10238223
> 
> 赞同：1
> 
> 时间：2012-04-19T23:21:20.320
> 
> 标签：android, slidingdrawer

我在 android 中实现了一个抽屉，当打开时显示 4 个按钮，但是当我尝试单击它时，这实际上从未发生过（抽屉没有打开）。但是，当我单击抽屉时，组件 ImageView 处理程序的图像资源会发生变化。

我有以下 XML 代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/dynamicCategories"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background"
        android:orientation="vertical" >

        <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_marginTop="10dp"
        android:layout_weight="0.1"
        android:orientation="horizontal" >
             .
             .
             .

        </LinearLayout>

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/LinearLayout01"
                android:layout_width="fill_parent"
                android:layout_height="42dp"
                android:layout_weight="0.1"
                android:gravity="bottom"
                android:orientation="vertical" >

                <SlidingDrawer
                    android:id="@+id/slidingDrawer1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:background="@drawable/bar"
                    android:content="@+id/contentLayout"
                    android:handle="@+id/handle" >

                    <ImageView
                        android:id="@+id/handle"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:layout_weight="1" />

                    <LinearLayout
                        android:id="@+id/contentLayout"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:background="@color/white" >

                        <Button
                            android:id="@+id/button1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="Button" />

                        <Button
                            android:id="@+id/button2"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="Button" />

                        <Button
                            android:id="@+id/button3"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="Button" />

                        <Button
                            android:id="@+id/button4"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="Button" />
                    </LinearLayout>
                </SlidingDrawer>

            </LinearLayout> 
```

和java代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(com.android.layout.R.layout.channelprogrammation);

    drawer = (SlidingDrawer) findViewById(com.android.layout.R.id.slidingDrawer1);
        // Drawer Programmation
    drawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {
        public void onDrawerOpened() {
            ImageView view = (ImageView) drawer.getHandle();
            // change to bar selected   
               view.setImageResource(com.android.layout.R.drawable.ic_launcher);
            Toast.makeText(getApplicationContext(), "Is open!", 3000)
                    .show();
            drawer.open();
        }
    });
    drawer.setOnDrawerCloseListener(new OnDrawerCloseListener() {

        public void onDrawerClosed() {
            Toast.makeText(getApplicationContext(), "Closed", 3000).show();
            ImageView view = (ImageView) drawer.getHandle();
            view.setImageResource(0);
            drawer.close();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:17:37.497

我发现了问题……我的线性布局有 42dp 的滑动抽屉。因此，当尝试使用滑动抽屉时，线性布局打开但没有足够的空间展开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:08:37.390

看伙计，它很容易不要在代码中分配任何东西，简单的布局将非常适合一侧滑动抽屉

检查布局

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bg"
    android:orientation="vertical" >

        <TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="60dp"
            android:layout_marginTop="20dp"
            android:text="Your Location"
            android:textColor="#ff0000ff"
            android:textStyle="normal" />

        </LinearLayout>
<SlidingDrawer
  android:id="@+id/drawer"
  android:layout_width="match_parent"
     android:layout_height="match_parent"
  android:orientation="horizontal"
  android:layout_gravity="left"
  android:handle="@+id/handle"
  android:content="@+id/content"
 >
  <ImageView 
   android:id="@+id/handle"
   android:layout_width="wrap_content"
   android:layout_height="fill_parent" 
   android:src="@drawable/tag"/>

  <LinearLayout
      android:id="@+id/content"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:background="@drawable/slidimage"
      android:orientation="vertical"
      android:layout_gravity="right"
      android:padding="10dp" >
 <TextView
            android:id="@+id/text1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="15dp"
            android:layout_marginLeft="51dp"
            android:text="SIGN-UP"
            android:textColor="#000000"
            android:textSize="28dp"
            android:textStyle="bold" />

       <Button
           android:id="@+id/sign_up"
           android:layout_width="110dp"
           android:layout_height="55dp"
           android:layout_marginLeft="35dp"
           android:layout_marginTop="20dp"
           android:background="@drawable/signup"
           android:text="Cancel"
           android:textColor="#ffffffff"
           android:textSize="20dp" />

       <Button
           android:id="@+id/cancelbtn"
           android:layout_width="110dp"
           android:layout_height="55dp"
           android:layout_marginTop="20dp"
           android:layout_marginLeft="18dp"

           android:background="@drawable/liginbtn"
            android:text="Sign up"
           android:textColor="#ffffffff"
           android:textSize="20dp" />
   </LinearLayout>

  </LinearLayout>
 </SlidingDrawer>
</FrameLayout> 
```

和android java代码..

```
 public class MainActivity extends Activity {
/** Called when the activity is first created. */

     @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.xml);

}
  } 
```

# regex - 正则表达式在没有特定情况之前捕获模式

> ID：10238224
> 
> 赞同：0
> 
> 时间：2012-04-19T23:21:30.333
> 
> 标签：regex, regex-negation

我有这个测试数据：

1.  第 400 部分成功 - Azerjahan Husbai
2.  分享给 #343 - #18 遗产的执行人 - Homaho Jurei
3.  以#187 - Shone Jumaja 至#448 - Socsa Husmai 的遗产管理人的身份分享
4.  以 #187 - Shone Jumaja 至 #445 - Horo Te Fuka 的遗产管理人的身份分享

我有这个正则表达式

```
^.*#(?<legacyId>\d*).*$ 
```

这里的捕获组总是捕获最后一次出现的 #\d* 所以我当前正则表达式捕获的组的当前结果集是

1.  400
2.  **18**
3.  448
4.  445

我想修改正则表达式，使结果集变为：

1.  400
2.  **343**
3.  448
4.  445

规则不应该只是捕获第一次出现而不是最后一次我想要的是捕获前面**没有“estate of”的组**

我怀疑我必须使用正负前瞻的组合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:46:10.360

您尚未指定您使用的编程语言或正则表达式库。那是关键信息。没有它，我只能猜测您可以使用哪些功能。

您提供的唯一重要线索是使用命名捕获。由于您使用了`(?<name>)`语法而不是`(?P<name>)`，因此将您的正则表达式风格缩小到可能是以下之一：

*   。网
*   Perl 5.10+
*   聚合酶链反应 7+
*   Java 7+
*   Oniguruma 1.8.4+
*   Ruby 1.9+（默认使用 Oniguruma）
*   Boost.Regex（不确定哪个版本开始支持这个）
*   带有[XRegExp](http://xregexp.com) 0.5+的 JavaScript
*   JGsoft 产品，例如 RegexBuddy

好的，所以即使是那个线索也没有把它缩小到足够的范围。使您的正则表达式支持您的新规则的相关功能可能是负面的后视，但并非所有以上都支持后视，并且几乎所有这些都支持后视中的不同功能子*集*。

这是一个使用固定长度的负后视的解决方案，以尝试以简单的方式支持广泛的上述风格：

```
^.*#(?<!estate of #)(?<legacyId>\d+) 
```

有了这个，您需要启用在换行符处生成`^`和匹配的标志。`$`您不得启用允许点匹配换行符的标志，也不得启用自由间距和行注释的标志。（这些标志在不同的地方使用不同的名称和字母。）`#`出于次要的效率原因，我在符号后面放置了否定的lookbehind。

请不要让人们猜测您使用的是什么编程语言和正则表达式风格。

# facebook - Facebook 'Like' Graph API 的 DataContract 类

> ID：10238226
> 
> 赞同：1
> 
> 时间：2012-04-19T23:21:34.280
> 
> 标签：facebook, c#-4.0, facebook-graph-api, datacontract, json

因此，我正在尝试使用 DataContractJsonSerializer 将 Facebook Graph API 返回的用户喜欢的 json 解码为对象。我现在尝试创建几个不同的 [DataContract] 类，但没有运气。

为该数据创建 [DataContract] 类的正确方法是什么。

```
{
   "data": [
      {
         "name": "Earlyups",
         "category": "Recreation/sports",
         "id": "170410902986097",
         "created_time": "2012-04-09T03:34:11+0000"
      },
      {
         "name": "pictureline inc.",
         "category": "Local business",
         "id": "28861182380",
         "created_time": "2012-03-28T02:02:24+0000"
      },
      {
         "name": "Jackson Hole Mountain Resort",
         "category": "Sports/recreation/activities",
         "id": "24718308041",
         "created_time": "2012-03-20T16:10:45+0000"
      }
    ],
    "paging": {
        "next": "next_page_request_url"
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:23:20.850

哈哈，哇，我一发布就看到我做错了什么。以防其他人感兴趣。

```
[DataContract]
        internal class LikePage
        {
            [DataMember]
            internal Like[] data;

            [DataMember]
            internal Paging paging;

        }

        [DataContract]
        internal class Like
        {
            [DataMember]
            internal string name;

            [DataMember]
            internal string category;

            [DataMember]
            internal string id;

            [DataMember]
            internal string created_time;
        }

        [DataContract]
        internal class Paging
        {
            [DataMember]
            internal string next;

        } 
```

# ruby - 如何让 ocra 应用程序被防病毒软件接受

> ID：10238230
> 
> 赞同：0
> 
> 时间：2012-04-19T23:22:01.427
> 
> 标签：ruby, windows, exe, ocra

好吧，从标题来看（如果你练习 Ruby），你应该知道 Ocra 是什么。如果你不这样做，这里有一个简短的解释：

Ocra 是一个添加到命令提示符的命令，用于将 ruby​​ 程序转换为可执行文件。所以.rb 到.exe。

为了将 ruby​​ 程序转换为可执行文件，他们将在命令提示符下键入：

```
cd <locationOfFile>
ocra rubyProgram.rb 
```

然后 ocra 将运行该程序，完成后，它会运行一些脚本来完成该程序。然后，该程序的可执行版本将与原始 ruby​​ 版本位于同一目录中并具有相同的名称。

所以最近我注意到我的防病毒软件正在从我的计算机中删除该程序，告诉我它是猎犬。它变得非常烦人，我已经厌倦了一遍又一遍地使用 ocra 来重新制作一个程序。

我有两个防病毒软件：McAffee 和 Symnatec；所以这意味着安全性加倍。我可以更改什么以使我的防病毒软件忽略该程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:44:13.747

告诉他们忽略/排除正在构建 .exe 的目录。

# javascript - 动态设置 Access-Allow-Control-Origin

> ID：10238236
> 
> 赞同：0
> 
> 时间：2012-04-19T23:22:26.800
> 
> 标签：javascript, django, same-origin-policy

我已经阅读了关于在[此处](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)和[此处](https://stackoverflow.com/questions/298745/how-do-i-send-a-cross-domain-post-request-via-javascript)发送 POST 请求时绕过相同来源策略的信息，并且觉得我对动态的工作方式有一个不错的理解。现代浏览器通过在接收服务器上设置 Access-Allow-Control-Origin 来支持它，并且所有浏览器都通过 iframe 提交请求来工作。

我的问题有两个：

1.  有没有办法动态设置允许的原点，这样你就不必设置`Access-Allow-Control-Origin: *`. 更准确地说，有一种方法可以使用 django 中的特定视图或一组视图来实现。（我知道有[这个要点](https://gist.github.com/426829)可用作中间件，但似乎没有一种方法可以即时设置您允许的原点。

2.  是否有可以使用内置弃用的包装器？换句话说，它将尝试使用 Access-Allow-Control-Origin，如果浏览器不支持它，它将使用 iframe 代替。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:48:37.770

您可以将中间件重写为装饰器。这实际上比我认为的一般中间件更好，因为它允许您将参数传递给装饰器的每次使用以自定义允许的方法。

# html - 表格布局问题

> ID：10238237
> 
> 赞同：0
> 
> 时间：2012-04-19T23:22:34.397
> 
> 标签：html, css

我有以下简化的布局：

jsfiddle：http: [//jsfiddle.net/rersW/](http://jsfiddle.net/rersW/)

```
<table>
  <tr>
    <td style="border:1px solid black;height:300px;width:100px">A</td>
    <td style="border:1px solid black;height:100%">
      <div style="border:1px solid blue;height:100%;width:100px">B</div>
    </td>
  </tr>
</table> 
```

我需要蓝色轮廓的 div 来填充其单元格。我已经尝试在 div 和单元格上调整大小，并更改两者的显示（内联块等）。我尝试的任何方法都不起作用。

单元格“A”的内容决定了表格的高度。

单元格“B”的内容决定了其单元格的宽度。

它必须在 Chrome、Firefox、Safari、Opera 和 IE 8+ 中同样工作

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:27:36.643

Height:100% 要求父级具有明确的高度。在单元格 b 中设置与在单元格 a 中相同的高度，这决定了表格的高度，在本例中为 300px，子 div 将展开。

编辑如果您不能明确定义任何父高度，则需要使用 JS/Jquery。见这里[http://jsfiddle.net/rersW/3/](http://jsfiddle.net/rersW/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:34:32.053

如果不太正确，试试这个并发表评论：|

[http://jsfiddle.net/rersW/1/](http://jsfiddle.net/rersW/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T23:35:01.587

原因是`height: 100%;`需要有一个***定义***了高度的父级，否则你必须

*   要么固定高度。
*   或链`height: 100%`上所有的身体，如果在任何地方都没有固定高度

为了说明我的观点，将您的标记升级到此

```
<td valign="top" style="border:1px solid black; height: 300px;">
  <div style="border:1px solid blue;height:100%; display: block;width:100px">B</div>
</td> 
```

[演示](http://jsfiddle.net/Starx/rersW/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T00:23:36.767

更新：

我想出了一些可以在没有 JS 的情况下工作的东西：

```
<table>
  <tr>
    <td>
      <div style="position:relative">
        <table>
          <tr>
            <td style="border:1px solid black;height:300px;width:100px">A</td>
            <td style="border:1px solid black;height:100%">
              <div style="border:1px solid blue;box-sizing:border-box;height:100%;width:100px">&nbsp;</div>
            </td>
          </tr>
        </table>
        <div style="border:1px solid red;height:100%;position:absolute;right:0;top:0;width:100px">B</div>
      </div>
    </td>
  </tr>
</table> 
```

渲染时看起来不漂亮，但生产结构没有边框或填充。

任何更简单的解决方案将是首选。

# html - HTML 如何检查当前正在查看的html是哪个浏览器？

> ID：10238238
> 
> 赞同：2
> 
> 时间：2012-04-19T23:22:37.467
> 
> 标签：html, browser

我需要知道正在查看我的网站的当前浏览器是什么，因为这样我就知道如何执行图像和 CSS 的特定代码，诸如此类的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T23:28:17.293

查看[Modernizer](http://modernizr.com/)和[Selectivizr](http://selectivizr.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T23:40:03.097

正如您的评论表明您只需要 IE 检测，我所见过的为 CSS 目的检测 IE 的最佳方法是在[HTML 5 Boilerplate 项目](http://html5boilerplate.com/)中使用，该项目使用了[Paul Irish 的技术](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)：

```
<!--[if lt IE 7]>      <html class="ie6"> <![endif]-->
<!--[if IE 7]>         <html class="ie7"> <![endif]-->
<!--[if IE 8]>         <html class="ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html>         <!--<![endif]--> 
```

我建议使用 HTML5BP 版本：

```
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T23:26:06.387

您可以使用嵌入 html 的 javascript 检查浏览器信息。

更多细节可以在这里找到：

[http://www.alanwood.net/demos/browserinfo.html](http://www.alanwood.net/demos/browserinfo.html)

示例代码：（现在可以肯定了）

```
<!DOCTYPE html>
<html>
<head><title>test</title></head>
<body>
<script>
alert(navigator.userAgent);
</script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T23:32:09.963

为此，有 PHP 和 JavaScript 类/函数。您所要做的就是在谷歌上搜索相应的内容，然后在每个浏览器的基础上根据自己的喜好使用它。你甚至可以更进一步，基于 .htaccess 来做，但总的来说取决于你在做什么，什么时候为什么等等。

总而言之，虽然一般来说缺少一些样式问题，或者一些特定的客户端脚本问题，但几乎你对标准 html 所做的任何事情都可以在所有浏览器中正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T23:35:48.970

你会想要检查[`navigator.userAgent`](http://www.w3schools.com/jsref/prop_nav_useragent.asp)财产。您可以下载一些 Javascript 库来为您进行解析。但是，您应该知道尝试通过解析用户代理字符串来确定浏览器类型是非常不可靠的。

如果您尝试根据浏览器功能切换行为，您应该检查这些特定功能并查看它们是否在当前浏览器中启用。您可以先阅读[有关 QuirksMode 的这篇文章](http://www.quirksmode.org/js/support.html)。

其他人提到了[Modernizr](http://modernizr.com/)，它只是一个为您进行特征检测的库。这比检查浏览器的用户代理要可靠得多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-23T21:27:53.070

使用 XPath API 确定浏览器引擎：

```
//Gecko
var gecko = (!!window.XPathExpression === true) && "gecko";
//Trident
var trident = (!!window.XPathEvaluator === false && !!window.XPathExpression === false) && "trident";
//WebKit
var webkit = (!!window.XPathEvaluator === true && !!window.XPathExpression === false) && "webkit";

var browser = (String(gecko)+String(trident)+String(webkit)).replace(/false/g,""); 
```

用于`document.documentMode`检测 IE 正在使用的模式。

**参考**

*   [Windows Internet Explorer 平台 API](https://msdn.microsoft.com/en-us/library/hh772402)

*   [Mozilla 源代码目录结构](https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Source_Code/Directory_structure)

*   [MDN：Web API 索引](https://developer.mozilla.org/en-US/docs/Web/API/Index)

*   [WebKitJS](https://developer.apple.com/reference/webkitjs)

*   [星球网络套件](https://planet.webkit.org/)

*   [Opera 中的 Web 规范支持](http://www.opera.com/docs/specs/)

*   [文档 API 的详细信息 - Microsoft Edge 开发](https://developer.microsoft.com/en-us/microsoft-edge/platform/documentation/apireference/interfaces/document/)

# listview - jQuery Mobile 触发器创建需要延迟

> ID：10238239
> 
> 赞同：0
> 
> 时间：2012-04-19T23:22:41.067
> 
> 标签：listview, jquery, jquery-mobile

我正在使用 Ajax 加载一个 xml 并将其塑造成一个 jQuery Mobile 列表视图。在发送 xml 之后，我正在调用触发方法，以便可以重新初始化页面并将 css 样式添加到列表视图中，如下所示：

```
xmlhttp.send();
$("#page1").trigger( "create" ); 
```

当我加载页面时，我会在几分之一秒内看到列表视图上的样式，但随后列表视图显示时没有 jQuery Mobile 样式。当我像这样使用延迟时，它似乎可以工作：

```
setTimeout(function(){
    $("#page1").trigger( "create" );
}, 5); 
```

我注意到了这一点，因为当我使用断点时它似乎总是有效。不过这让我很困扰，因为当我使用这种方法时，我总是会在短时间内看到无主题的列表。我还尝试在创建之前和之后刷新列表，但似乎没有任何效果。有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:30:14.130

AJAX 请求是异步的，这意味着在等待响应时运行其他代码。使用 AJAX 请求的一般流程是对在请求的回调函数中接收到的数据执行任何工作。这是一个使用 jQuery AJAX 的示例：

```
$.ajax({
    url     : 'my-page.html',
    success : function (response) {
        $("#page1").html(response).trigger('create');
    },
    error   : function (jqXHR, textStatus, errorThrown) { /*remember to handle errors*/ }
}); 
```

这假定服务器响应是有效的 HTML，并且您想`#page1`用来自服务器的响应替换 的内容。

# jquery - jQuery Datatable Sorting bug/error Chrome 具体需要解决

> ID：10238240
> 
> 赞同：1
> 
> 时间：2012-04-19T23:22:54.250
> 
> 标签：jquery, sorting, datatable

这是我的代码

```
jQuery.fn.dataTableExt.oSort['num-asc']  = function(a,b) {
    var x = a.replace( /<.*?>/g, "" );
    var y = b.replace( /<.*?>/g, "" );
    x = parseFloat( x );
    y = parseFloat( y );
    return ((x < y) ? -1 : ((x > y) ?  1 : 0));
};

jQuery.fn.dataTableExt.oSort['num-desc'] = function(a,b) {
    var x = a.replace( /<.*?>/g, "" );
    var y = b.replace( /<.*?>/g, "" );
    x = parseFloat( x );
    y = parseFloat( y );
    return ((x < y) ?  1 : ((x > y) ? -1 : 0));
};

$(document).ready(function() {
    $('#ledger').dataTable({
        bAutoWidth: false,
        bJQueryUI : true,
        bProcessing: true,
        bServerSide: false,
        sPaginationType: "full_numbers",
        bStateSave : false,
        bUseRendered: false,
        iDisplayLength: ${entriesValue},
        sDom: mw.superadmin.datatable.relatedListDom,
        aLengthMenu: mw.superadmin.datatable.relatedListLengthMenu,
        aaSorting: [[0,'asc']],
        aoColumns: [
            null,
            { "iDataSort": 2},
            { "bVisible": false, "sType": "num"},
            { "iDataSort": 4, "bSortable": true },
            { "bVisible": false, "sType": "num"}
        ]
    }); 
```

据我所知，该表在 IE、FF、Opera 和 Safari 上 100% 正常工作，但在 Chrome 上它失败了，但仅在我的可排序集的 1 个特定列上失败。我想不通，需要一点帮助。

可以在下图中找到它在 Chrome 上所做的一个示例。 ![在此处输入图像描述](../Images/a3a9a444b35cbe98af9d1944522625e9.png)

就我个人而言，我觉得它的原因是它有 ( , [ } ) 等字符。但是就像我说的其他浏览器不是问题一样，Chrome 是唯一给我一个问题的浏览器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T03:35:03.920

我遇到了同样的问题，Chrome 中的数据表无法对九列中的一列进行排序。然而，它在 Firefox 中运行良好。

为了让它在 Chrome 中工作，我必须为**所有**列显式指定[sType 。](http://www.datatables.net/ref#sType)

 **在我的情况下，“html”工作得很好。

```
$('#xxx').dataTable({
    "bJQueryUI": true,
    "bSort": true,
    "aoColumns": [
        {"sType": "html"},
        {"sType": "html"},
        {"sType": "html"}
     ]
}); 
```

我猜想列类型的自动检测在 Chrome 中以某种方式失败。**

# php - INSERT 语句只工作一次

> ID：10238242
> 
> 赞同：0
> 
> 时间：2012-04-19T23:23:12.067
> 
> 标签：php, mysql, insertion

我之前问过这样的问题，但现在我进行了更好的测试，并试图分析问题所在。这是ajax请求：

```
 //start ajax request here//
   $.post('purchaseitem.php',{itemAmount:itemAmount, itemId:itemId}, function(data){
    $('.savestatus_'+itemId).text(data);
   });
  //end it here 
```

我回显了 items 表中的所有项目，以及一个 ahref 链接和一个输入字段，以允许用户输入数量并单击购买。

```
<?php
    $shop_query = mysql_query("SELECT * FROM sector0_item WHERE item_location = '$chapter'");
    while(($shop_row = mysql_fetch_array($shop_query))){
        $itemid = $shop_row['item_id'];
        $item_name = $shop_row['item_name'];
        $item_price = $shop_row['item_price'];
        ?>
        <div class = "item_name"><?php echo $item_name; ?></div> 
        <div class = "item_price"><?php echo $item_price; ?></div> 
        <input type = 'text' class = "purchaseAmount_<?php echo $itemid;?>" name = "purchaseAmount" />
        <a id = "purchaseButton_<?php echo $itemid; ?>" href = "prevent default();" class = "purchase_button" onclick = "buy(); return false;">Buy</a>
        <div class = 'savestatus_<?php echo $itemid; ?>'></div>
        <hr /><br />
        <?php
    }
?> 
```

这是我的代码的测试版本，所以我知道它搞砸了...... php部分：

```
$user_inventory_query = mysql_query("SELECT * FROM sector0_inventory WHERE id = '$dbid' AND item_id = '$item_id'");
                        $checking_item_inventory = mysql_num_rows($user_inventory_query);
                        if($checking_item_inventory === 0){
                            /*^*/  $insertion_into_inventory = mysql_query("INSERT INTO `sector0_inventory`(`id`, `item_id`, `username`, `item_name`, `quantity`) VALUES ('$dbid','$item_id','$dbuser','$item_name','$purchase_amount')");
                                if($insertion_into_inventory === true){
                                mysql_query("UPDATE sector0_players SET cash = cash-'$total_cost' WHERE id = '$dbid'");
                                echo "Purchase complete";
                                }
                        }else if ($checking_item_inventory === 1){
                            $update_inventory_quantities = mysql_query("UPDATE sector0_inventory SET quantity = quantity+'$purchase_amount' WHERE id = '$dbid' AND item_id = '$item_id'");
                            if($update_inventory_quantities===true) {
                                mysql_query("UPDATE sector0_players SET cash = cash-'$total_cost' WHERE id = '$dbid'");
                                echo "Purchase complete, quantity updated.";
                                }
                        } 
```

以上是查询。/ *^* / 部分是失败的部分。当我截断表格，点击购买时，插入完全成功。但对于任何其他项目，插入失败。这是一个php，我猜，我真的很困惑。插入和更新查询的相对表

```
CREATE TABLE `sector0_inventory` (
 `id` bigint(20) NOT NULL COMMENT 'The input in this field will be php code exclusive. No increment allowed.',
 `item_id` bigint(20) NOT NULL COMMENT 'The input is also code exclusive',
 `username` varchar(250) NOT NULL COMMENT 'This value will be used to search for the user inventory information. Admin privileges only',
 `item_name` varchar(250) NOT NULL COMMENT 'This value will be used to identify (user side) the item. It will be used by admins to query out when a removal of a specific item is needed',
 `quantity` bigint(20) NOT NULL COMMENT 'This value will be 0 by default BIG int is to allow calculations',
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:30:42.053

显示输出`CREATE TABLE sector0_item`以获得更多帮助，但我的猜测是您在该表上的主键是`id`并且您正尝试在 INSERT 语句中手动指定它：

```
INSERT INTO `sector0_inventory`(`id`, `item_id`, `username`, `item_name`, `quantity`) VALUES ('$dbid','$item_id','$dbuser','$item_name','$purchase_amount') 
```

您的主键对于每一行必须是唯一的。尝试：

```
INSERT INTO `sector0_inventory`(`item_id`, `username`, `item_name`, `quantity`) VALUES ('$item_id','$dbuser','$item_name','$purchase_amount') 
```

如果您的`id`列设置为`AUTO INCREMENT`.

编辑：发布表结构后，您的问题是数据库表设计。现在主键是`id`这意味着每个 PHP 会话 ID 只能有一行。我不知道你的申请，但这似乎是错误的。

如果您可以删除表并从头开始，则 DROP 表并使用以下方法重新创建它：

```
CREATE TABLE `sector0_inventory` (
 `transaction_key` INT NOT NULL AUTO INCREMENT COMMENT 'The unique ID for each row',
 `id` bigint(20) NOT NULL COMMENT 'The input in this field will be php code exclusive.     No increment allowed.',
 `item_id` bigint(20) NOT NULL COMMENT 'The input is also code exclusive',
 `username` varchar(250) NOT NULL COMMENT 'This value will be used to search for the     user inventory information. Admin privileges only',
 `item_name` varchar(250) NOT NULL COMMENT 'This value will be used to identify (user     side) the item. It will be used by admins to query out when a removal of a         specific item is needed',
 `quantity` bigint(20) NOT NULL COMMENT 'This value will be 0 by default BIG int is to     allow calculations',
 PRIMARY KEY (`transaction_key`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

然后将您的 PHP 恢复到原来的样子。

请注意，这将丧失该表中的所有数据...

# jquery - 如何显示单元测试 jquery 对话框？

> ID：10238253
> 
> 赞同：5
> 
> 时间：2012-04-19T23:24:32.260
> 
> 标签：jquery, unit-testing, jquery-ui-dialog, qunit, sinon

我写了下面的代码，尝试测试一个 jquery 对话框是否得到原谅和显示。

```
var jqueryMock = sinon.mock(jQuery);
var dialogExpectation = jqueryMock.expects("dialog");
dialogExpectation.once();

//call my function, in which create a jquery dialog.

equals(dialogExpectation.verify(), true, "Dialog is displayed");
jqueryMock.restore(); 
```

但是，它向我显示了错误：在测试 #1 中死亡：尝试将未定义的属性对话框包装为函数 - {“消息”：“尝试将未定义的属性对话框包装为函数”，“名称”：“TypeError”}

jquery 代码很简单：

```
displayMessage: function (message, title, hashId) { 

//some logic to build the message, title and hashId.  

 $(messageDiv).dialog({
            height: 240,
            width: 375,
            modal: true,
            title: title,
            resizable: false,
            buttons: [{
                text: localizedErrorMessages['OkText'],
                click: function () {
                    $(this).dialog("close");
                }
            }]             
        }); // end of dialog            
    } // end of displayMessage 
```

任何人都知道如何在这种情况下模拟 jquery 对话框并编写单元测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:42:05.513

你需要像这样模拟 jQuery.fn：

```
var jQueryMock = sinon.mock(jQuery.fn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T03:07:15.033

我创建了一个[jsFiddle](http://jsfiddle.net/XvP7D/)来演示有效的答案。

```
function displayMessage(message, title, hashId) { 

     $("#message").dialog(); 
} 

test("dialog was called", function() {

    var jQueryMock = sinon.mock($.fn); // jQuery.fn and $.fn are interchangeable
    var dialogExpectation = jQueryMock.expects("dialog");
    dialogExpectation.once();

    //call my function, in which create a jquery dialog.
    displayMessage("new message", "title", 1);

    equal(dialogExpectation.verify(), true, "Dialog was not displayed");
    jQueryMock.restore();   
});

// This demonstrates a failing test - since the method actuall calls "dialog".
// It also demonstrates a more compact approach to creating the mock
test("toggle was called", function() {

    var mock = sinon.mock(jQuery.fn).expects("toggle").once();
    displayMessage("new message", "title", 1);

    equal(mock.verify(), true, "Toggle was never called");
}); 
```

# jquery - Backbone.js 和 underscore.js 正在创建混乱的 html

> ID：10238254
> 
> 赞同：0
> 
> 时间：2012-04-19T23:24:34.547
> 
> 标签：jquery, html, backbone.js, underscore.js, templating

我正在使用通过组合backbone.js 和underscore.js 来创建html 位的常规方式。这是我使用的一个例子

```
_.template($('#html-container').html(), this.model.toJSON()); 
```

我把它附加到我需要的地方。这种情况下的模型是一个普通的主干模型。

现在输出的 HTML 如下所示：

```
<li _id="4f82f7c3c5de997ad3fd4989" code="61131" unit="100ml" op="11" rp="22" cp="0" id="4f82f7c3c5de997ad3fd4989"> 
```

基本上它为我的模型中的每个变量创建了一个 html 属性。这是正常的还是我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:55:46.563

~~在某个地方你应该有这样的一行。~~

 ~~```
var sometemplate = _.template($('#html-container').html()); 
```~~ 

这会将您的模板编译成一个函数，您可以传递模型数据并生成 html，如下所示：

```
var html =  sometemplate(this.model.toJSON()); 
```

~~您试图在一行上完成所有操作.. 您*可以这样做*（虽然不是这种方式），但最好编译一次模板，在某处保存对该模板的引用并稍后引用它。~~

另请参阅[http://documentcloud.github.com/underscore/#template](http://documentcloud.github.com/underscore/#template)

编辑：现在我确实看到了，我明白了

> 如果您正在编写一次性，您可以将数据对象作为第二个参数传递给模板，以便立即呈现而不是返回模板函数。

所以没关系。因此，也许您在生成 JSONable 对象时包含不止一个延迟数据（我的意思是，您的对象中有一个对象或其他东西），或者......

# android - 在android程序上加载SVG

> ID：10238257
> 
> 赞同：0
> 
> 时间：2012-04-19T23:25:13.500
> 
> 标签：android, image, svg

我想将我的**android**应用程序中的**位图**图像 (.png)更改为**SVG 图像**。我使用 android 基本引擎。什么是最好的解决方案？谢谢你的帮助 ：）

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:36:58.543

SVG 不是 android 支持的图像

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

这意味着您需要自定义代码才能使其工作

我没有尝试过自己，但快速谷歌搜索和瞧

[http://code.google.com/p/svg-android/](http://code.google.com/p/svg-android/)****

# .net - 如何将 Wordpress 博客标题和日期拉入 .NET 页面

> ID：10238259
> 
> 赞同：1
> 
> 时间：2012-04-19T23:25:21.910
> 
> 标签：.net, wordpress, date, title

在我们的一个网站上，我需要将最新的三个博客标题和日期从我们网站的 wordpress 博客中提取到我们的主页上。我知道如何使用 .php 执行此操作，但该站点当前位于 .NET 中，需要保留在 .net 中 - 我在这里设置了一个测试页面：[http ://spacesaverscommunity.com/Default-New.aspx](http://spacesaverscommunity.com/Default-New.aspx)

在右侧，您会看到“其他社区新闻”——我如何从他们的博客中提取最新三篇帖子的标题和日期，并将它们显示在主页的那个框中？(spacesaverscommunity.com/blog/)

这可能使用.net吗？我可以从 RSS 提要中提取信息吗？

非常感谢任何建议！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:39:35.873

你可以试试[Hookpress](http://mitcho.com/blog/projects/hookpress-webhooks-for-wordpress/)，它基本上提供了 webhook。所以你可以从那里获取你的提要。

有关简短介绍，请观看此视频： http: [//player.vimeo.com/video/5905102](http://player.vimeo.com/video/5905102)

# javascript - 带有默认文本的文本框

> ID：10238261
> 
> 赞同：0
> 
> 时间：2012-04-19T23:25:32.807
> 
> 标签：javascript

我有一个带有默认文本的文本框。当用户点击它时，我正在使用 javascript 来消除它，但我想让它在没有 javascript 的情况下工作。有没有办法在 html 或 php 中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:27:47.420

可以使用标签的`placeholder`属性在平面 HTML5 中完成`<input>`

```
<input type="text" placeholder="Default Text" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T05:55:35.057

很简单，您也可以使用 html5 控件。那里喜欢。

```
<input  type="text" name="txtFirstName" id="txtFirstName"
placeholder="enter first name" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T23:28:12.317

在 HTML5 中，引入了新的属性，称为`placeholder`

你可以像这样使用它

```
<input type="text" placeholder="text to show and hide" /> 
```

# networking - log4net - 将日志保存到远程网络位置 - 可以吗？

> ID：10238264
> 
> 赞同：2
> 
> 时间：2012-04-19T23:25:46.340
> 
> 标签：networking, location, log4net, logging

我想知道是否可以让 log4net 将日志写入远程网络位置？

例如

```
<appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
    <file value="\\somesharedspace.network\logs\log"/>
    <appendToFile value="true"/>
</appender> 
```

不确定它是否有所作为，但它是一个 Windows 网络。

干杯，巴特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:04:10.587

是的，这行得通。问题当然是您是否真的想这样做：它通常比登录本地文件要慢，并且网络共享可能不可用。

# html - 页面右边缘重叠的 div

> ID：10238265
> 
> 赞同：1
> 
> 时间：2012-04-19T23:25:48.560
> 
> 标签：html, css, gwt, uibinder

我在使用输入顶部的水印文本定位跨度时遇到了麻烦。使用 GWT+uibinder 的代码如下所示：

[http://jsfiddle.net/camposcarlos/dMzL4/](http://jsfiddle.net/camposcarlos/dMzL4/)

并转换成 html 看起来像这样：

[http://jsfiddle.net/ajMWd/](http://jsfiddle.net/ajMWd/)

而不是通过将跨度浮动到左侧来重叠输入字段的顶部：

```
|----------------------------------|
|                |------------||--||
|                |passwd      ||Go||
|                |------------||--||
|                                  |
|----------------------------------| 
```

输入后我得到它

```
|----------------------------------|
|          |------------|      |--||
|          |            |passwd|Go||
|          |------------|      |--||
|                                  |
|----------------------------------| 
```

或者如果我尝试将跨度相对于输入的宽度定位，则在下一行

```
|----------------------------------|
|                |------------||--||
|                |            ||Go||
|                |------------||--||
|                 passwd           |
|----------------------------------| 
```

关于如何解决它的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:59:14.450

我已经能够从[这里](https://stackoverflow.com/questions/4800035/how-to-make-a-div-float-on-top-of-another-div-without-pushing-down-the-css-under)使用一个很好的解决方案来解决它。诀窍是用相对位置样式标记容器，用绝对标记标记密码框及其跨度。它无需指定任何位置即可工作！（虽然我还没有尝试过使用 IE） [http://jsfiddle.net/ajMWd/4/](http://jsfiddle.net/ajMWd/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:24:41.353

如果您现在的问题是您想在密码框中显示默认文本，但密码默认文本不可读，您需要在用户输入数据之前将密码输入更改为普通文本输入。

然后，在您的 JavaScript 中，您可以使用焦点事件将其更改回密码类型的输入。

尝试这样的事情：

```
<head>
   <script type="text/javascript">
      function changeToPassword() {
         document.getElementById("passwordSpan")
            .innerHTML = "<input id=\"password\" name=\"password\" type=\"password\"/>";
         document.getElementById("passwd").focus();
      }
   </script>
</head>
<body>
   <form>
      <span id="passwordSpan">
         <input onfocus="return changeToPassword()" id="passwd" name="passwd" type="text" value="Type Password" />
      </span>
   </form>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T23:30:09.450

检查这个小提琴，它使用绝对定位。 [http://jsfiddle.net/ajMWd/1/](http://jsfiddle.net/ajMWd/1/)

编辑只是另一个版本做同样的事情[http://jsfiddle.net/ajMWd/2/](http://jsfiddle.net/ajMWd/2/)

# netbeans - 如何禁用此 Netbeans 突出显示？

> ID：10238268
> 
> 赞同：3
> 
> 时间：2012-04-19T23:26:19.153
> 
> 标签：netbeans

我不确定 StackOverflow 是否是解决这个问题的正确网站，但我认为除了这里的开发人员之外，我不会从其他人那里得到更好的帮助。

基本上，Netbeans 一直在 ERB 或 HTML 文件中突出显示脚本。我试图禁用`tools -> options -> fonts & colors`. 但没有一个奏效。

![在此处输入图像描述](../Images/b03600f90bcc57eefbe7eec98c534b6f.png)

任何人都知道如何摆脱它？它出现在所有主题上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T16:05:40.783

旧 Queston，但仍然相关（在其他 IDE 中也是如此）。对于 Netbeans v8，您会发现大部分旧链接/主题无法使用。但是有办法。

转到工具 -> 插件并搜索“主题”，您将获得“深色外观主题”

重新启动后出现的默认设置在脚本上没有难看的突出显示，而且看起来很容易（与默认主题不同），而且它对“html.erb”文件具有良好的颜色突出显示。控制器代码可以使用一些突出显示的工作，但我可以忍受它。

在有人指出之前 - 是的，NB 放弃了对 Ruby 的官方支持。然而，社区通过保持 Ruby/Rails 支持工作的插件做得很好。

# tridion - HTTP Deployer 抛出“尝试在本机端加载 JVM 失败”

> ID：10238273
> 
> 赞同：1
> 
> 时间：2012-04-19T23:27:12.860
> 
> 标签：tridion

在 Tridion 2011 SP1 上，我刚重新启动 HTTP Deployer 后，当我尝试访问 HTTPUpload.aspx 时收到错误“尝试加载 JVM 在本机端失败”。

问题是什么？

我添加了一个环境变量 JAVA_HOME，重新启动了服务器，但到目前为止还没有运气。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:55:17.800

这个故事比最初想象的要深刻得多，这一切都归结为内存分配。

在我的例子中，罪魁祸首是我们分配给在 IIS（在 JuggerNET 中）下运行的 Java 进程的堆大小。我在 32 位服务器上有 4 个 CD 实例（4 个网站运行每个 CD 堆栈），内存为 4GB。堆大小设置为 1024M。自然没有足够的内存来分配 4GB 的堆空间。

减少堆大小或停止网站解决了这个问题。

Heapsize 在注册表项中控制

```
HKEY_LOCAL_MACHINE\SOFTWARE\Tridion\Content Delivery\General\jvmarg1 
```

具有价值`-Xmx1024M`。

另一个罪魁祸首可能是将 64 位的 CD DLL 与 32 位服务器混合使用，因此请检查并仔细检查您的 DLL！我知道我做到了:) 几个小时......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T23:29:49.397

没关系...似乎再次重新启动服务器后，问题得到了解决。

我想我永远不会知道那是什么。

# c# - 使用与表格相同的类型查看

> ID：10238281
> 
> 赞同：2
> 
> 时间：2012-04-19T23:28:10.480
> 
> 标签：c#, entity-framework, view

我有一个表格，它在实体的整个应用程序中使用。我有一个返回相同列集的视图，但实际上它本身是一个联合，以尝试解决一些不好的规范化（该应用程序很大并且部分不在我的手中，这部分是不可避免的）。

是否可以让实体 4 将与表完全相同的视图视为相同类型，以便我可以使用此视图来填充相同类型的集合？[这个问题](https://stackoverflow.com/questions/10064133/same-entity-class-for-table-and-view)似乎表明它在 nhibernatem 中是可能的，但我找不到任何类似的实体。导航属性的额外好处仍然可以用于 Include()，但这不是必需的（我总是可以手动加入）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:30:20.233

由于 EF 处理从对象到数据库实体的映射，因此这不可能直接实现。您需要的是动态更改查询的数据库实体之类的东西，而 AFAIK 如果不手动更改对象上下文是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T20:05:06.277

只要 EF 运行时可以将视图视为完全独立的表，它肯定不会在意。我预见到的两个可能的挑战是：

1.  工具：我们的向导允许您在进行逆向工程时选择视图（即数据库优先）。明确地说，如果您可以对现有数据库使用“代码优先”，您可以假装视图只是一个表，但您不会获得任何帮助编写数据库创建或迁移脚本的帮助。

2.  更新：通常，您可以为设置存储过程映射的视图执行更新（可在 v1 的 EF 设计器中或从 EF6 开始的 Code First 中使用）。您也许还可以直接更新您的视图或使用关闭触发器来代替（请参阅[此处](http://technet.microsoft.com/en-us/library/ms187956.aspx)的“可更新视图”了解更多详细信息）。如果我没记错的话，EF 生成的用于检索数据库生成的值（例如，用于标识列）的 SQL 在某些情况下与相反的触发器不兼容。另一种选择是让您的应用程序将视图视为只读并通过实际表执行所有更新，您将映射为单独的实体。请记住，视图和原始表的内存中实体不会保持同步。

希望这可以帮助！

# ruby-on-rails - ElasticSearch 查询与我的应用程序不同的数据库？

> ID：10238285
> 
> 赞同：1
> 
> 时间：2012-04-19T23:28:26.063
> 
> 标签：ruby-on-rails, ruby, mongodb, elasticsearch, tire

我正在尝试将 ElasticSearch 用于我的 MongoDB 支持的 Rails 3.2.2 应用程序（通过[Tire](https://github.com/karmi/tire)）。

我遇到了一个非常奇怪的问题，ElasticSearch 似乎从第二个 MongoDB 数据库返回查询结果，而不是这个应用程序的查询结果（如我的`config/mongoid.yml`文件中定义的那样）。这很奇怪！

当我这样做时`Event.all`，我会看到所有正确的事件。

但是，当我尝试做`Event.tire.search("foo")`（`Event.tire.search('*')`甚至）时，它给了我来自另一个应用程序的 MondoDB 数据库的结果！

我希望轮胎告诉 ElasticSearch 自动使用这个应用程序的数据库，但如果失败了，有没有办法明确设置它？

对此问题的任何帮助将不胜感激。谢谢！

# javascript - 将 JSON 与 Google 地图 API 结合使用

> ID：10238292
> 
> 赞同：0
> 
> 时间：2012-04-19T23:29:01.007
> 
> 标签：javascript, json, api, google-maps

我是使用 API 的新手，这就是我想要完成的，但我真的不知道如何去做。我有一个`OpenCaching`开发者密钥，我可以访问如下 URL：

```
test.opencaching.com/api/geocache?center=38.642,-94.754&limit=2&Authorization=DevKey 
```

这将从坐标返回关于 2 个最近的地理藏宝的信息`38.642, -94.754`。该 URL 返回的内容类似于...

```
[{"name":"John Brown Hill","location":{"lat":38.55345,"lon":-94.91825}},{"name":"Ensor Farm","location":{"lat":38.7956167,"lon":-94.8052667}}] 
```

我正在尝试使用此数据使用 Google Maps API 对其进行映射，但我不明白如何将数据保存到 JavaScript 对象。如果我对数据进行硬编码，我知道如何使用它，但我不知道如何从这个 URL 动态获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:17:01.850

一种方法是使用 jQuery 并执行以下操作：

```
$.getJSON("the_url_to_data", function(data) {
    var map = new.google.maps.Map(document.getElementById("my_map"),{
    ...map params...
    };

    var cache = data.list.Caches // depending on how your JSON is actually returned.

    $.each(cache, function(i, cache) {
        var name = cache.name; // 
        var posi = new google.maps.LatLng(cache.lat, cache.lon);
        ...etc...
    }
}; 
```

`$.getJSON`返回一个 JSON 对象，然后匿名函数将其作为参数。

的示例 `var cache = data.list.Caches` 基于嵌套的 JSON。

实际上，Adobe 这里有一个很好的示例页面。

[http://labs.adobe.com/technologies/spry/samples/data_region/JSONDataSetSample.html#Example4](http://labs.adobe.com/technologies/spry/samples/data_region/JSONDataSetSample.html#Example4)

因此，使用您的示例数据。您可以看到“位置”实际上是另一个嵌套的 JSON 对象。您可以通过`data.location`. 如果您遍历对象并将它们放在列表中，它只会使迭代更容易。然后使用相同的路径“点”格式访问那些较小的对象。例如，循环您的示例代码，将所有`data.location`对象放入一个名为`coords`（例如）的变量中，然后通过`coords.lat`&访问纬度和经度`coords.lon`。

```
[{"name":"John Brown Hill","location":{"lat":38.55345,"lon":-94.91825}},{"name":"Ensor Farm","location":{"lat":38.7956167,"lon":-94.8052667}}] 
```

# mysql - 没有虚拟列的不同字段上的 MySQL 联合

> ID：10238296
> 
> 赞同：1
> 
> 时间：2012-04-19T23:29:18.833
> 
> 标签：mysql, join, field, union

因此，假设我有 2 个或更多由不同列组成的表，其中不一定存在共享密钥（id）：

```
Alpha:  
+----+-------+-------+-------+
| id | paula | randy | simon |
+----+-------+-------+-------+
|  1 |     8 |     7 |     2 |
|  2 |     9 |     6 |     2 |
|  3 |    10 |     5 |     2 |
+----+-------+-------+-------+

Beta:
+----+---------+-----+------------+------+
| id | is_nice | sex |        dob | gift |
+----+---------+-----+------------+------+
|  2 |       1 |   F | 1990-05-25 | iPod |
|  3 |       0 |   M | 1990-05-25 | coal |
+----+---------+-----+------------+------+

Gamma:
+----+---------+--------+
| id | is_tall | is_fat |
+----+---------+--------+
|  1 |       1 |      1 |
| 99 |       0 |      1 |
+----+---------+--------+ 
```

预期的效果是在 id 插入 NULL 数据不可用时将表混合在一起：

```
+----+-------+-------+-------+---------+-----+------------+------+---------+--------+
| id | paula | randy | simon | is_nice | sex |        dob | gift | is_tall | is_fat |
+----+-------+-------+-------+---------+-----+------------+------+---------+--------+
|  1 |     8 |     7 |     2 |         |     |            |      |       1 |      1 |
|  2 |     9 |     6 |     2 |       1 |   F | 1990-05-25 | iPod |         |        |
|  3 |    10 |     5 |     2 |       0 |   M | 1990-05-25 | coal |       1 |      1 |
| 99 |       |       |       |         |     |            |      |       0 |      0 |
+----+-------+-------+-------+---------+-----+------------+------+---------+--------+ 
```

我可以使用 NULL 'dummy' 列和 UNION （[MySql SELECT union for different columns？](https://stackoverflow.com/questions/7407864/mysql-select-union-for-different-columns)）但如果表的数量很大，这似乎是一种皇家痛苦。我想我可以使用一种 JOIN 方法来完成此操作，但我需要一些帮助来解决这个问题。

这有效：

```
SELECT `id`, `paula`, `randy`, ..., NULL AS `is_nice`, ... FROM `Alpha`
UNION SELECT `id`, NULL AS `paula`, ..., FROM `Beta`
UNION SELECT `id`, NULL AS `paula`, ..., `is_fat` FROM `Gamma` ; 
```

但这确实感觉是**错误**的做法。`whatever`每当我想添加其他表时，如何在不必编辑插入 NULL AS 的 SQL 行和行的情况下获得相同的结果？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:36:02.420

```
SELECT
    allid.id
  , a.paula, a.randy a.simon
  , b. ...
  , c. ... 
FROM
        ( SELECT id
          FROM Alpha
        UNION 
          SELECT id
          FROM Beta
        UNION 
          SELECT id
          FROM Gamma 
        ) AS allid
    LEFT JOIN
        Alpha AS a
            ON a.id = allid.id
    LEFT JOIN
        Beta AS b
            ON b.id = allid.id
    LEFT JOIN
        Gamma AS g
            ON g.id = allid.id 
```

* * *

如果这些表除了 之外没有其他列`id`，您可以使用简单的编写（但更容易打破）：

```
SELECT 
    *
FROM
        ( SELECT id
          FROM Alpha
        UNION 
          SELECT id
          FROM Beta
        UNION 
          SELECT id
          FROM Gamma 
        ) AS allid
    NATURAL LEFT JOIN
        Alpha
    NATURAL LEFT JOIN
        Beta 
    NATURAL LEFT JOIN
        Gamma 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:33:01.043

您想使用`LEFT JOIN`s。

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

在您的示例中：

```
SELECT id_t.id, a.paula, a.randy, a.simon, b.is_nice, b.sex, b.dob, b.gift, g.is_tall, g.is_fat
FROM (SELECT DISTINCT id FROM alpha,beta,gamma) as id_t
LEFT JOIN alpha a ON a.id = id_t.id
LEFT JOIN beta b on b.id = id_t.id
LEFT JOIN gamma g on g.id = id_t.id 
```

# ruby - Linux PTY 上的 Ruby 在没有 EOF 的情况下消失，引发 Errno::EIO

> ID：10238298
> 
> 赞同：14
> 
> 时间：2012-04-19T23:29:39.713
> 
> 标签：ruby, debian, ruby-1.9.3, pty

我正在编写一些代码，它接收一个文件，将该文件传递给几个二进制文件之一进行处理，并监视转换过程中的错误。我已经在 OSX 上编写并测试了以下例程，但由于我不清楚的原因，linux 失败了。

```
#run the command, capture the output so it doesn't display
PTY.spawn(command) {|r,w,pid|
    until r.eof? do
      ##mark
      puts r.readline
    end
} 
```

运行的命令变化很大，##mark 处的代码已被简化为本地回显，以尝试调试问题。该命令执行，脚本在终端中打印预期的输出，然后引发异常。

它在 Debian 系统上产生的错误是： `Errno::EIO (Input/output error - /dev/pts/0):`

我能想到的所有命令字符串都会产生该错误，当我在没有本地 echo 块的情况下运行代码时，它运行得很好：

```
PTY.spawn(command) {|r,w,pid|} 
```

在任何一种情况下，命令本身都可以正常执行，但似乎 debian linux 没有将 eof 发送到 pty。PTY 的文档页面和 ruby​​-doc 上的 IO 似乎在这里没有任何帮助。

有什么建议么？谢谢。

-vox-

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-24T22:12:17.783

所以我不得不去阅读 PTY 库的 C 源代码才能真正对这里发生的事情感到满意。

Ruby PTY 文档并没有真正说明[源代码中](https://github.com/ruby/ruby/blob/57fb2199059cb55b632d093c2e64c8a3c60acfbb/ext/pty/pty.c#L519)的注释所说的内容。

我的解决方案是将包装方法放在一起，并在需要时从我的脚本中调用它。我还加入了等待进程以确保退出并从以下位置访问退出状态的方法`$?`：

```
# file: lib/safe_pty.rb

require 'pty'
module SafePty
  def self.spawn command, &block

    PTY.spawn(command) do |r,w,p|
      begin
        yield r,w,p
      rescue Errno::EIO
      ensure
        Process.wait p
      end
    end

    $?.exitstatus
  end
end 
```

这与 PTY.spawn 的使用基本相同：

```
require 'safe_pty'
exit_status = SafePty.spawn(command) do |r,w,pid|
  until r.eof? do
    logger.debug r.readline
  end
end

#test exit_status for zeroness 
```

当我发现这是一个有效的响应时，我感到非常沮丧，因为它在 ruby​​-doc 上完全没有记录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T21:45:48.623

在这里提出 Errno::EIO 似乎是有效的（它只是意味着子进程已经完成并关闭了流），所以你应该期待并抓住它。

例如，请参阅[Continuously read from STDOUT of external process in Ruby](https://stackoverflow.com/questions/1154846/continuously-read-from-stdout-of-external-process-in-ruby)和[http://www.shanison.com/2010/09/11/ptychildexited-exception-and-ptys-exit-status/中选择的答案](http://www.shanison.com/2010/09/11/ptychildexited-exception-and-ptys-exit-status/)

顺便说一句，我做了一些测试。在 Ubuntu 10.04 上的 Ruby 1.8.7 上，我没有收到错误消息。使用 Ruby 1.9.3，我愿意。在 Ubuntu 上使用 1.8 和 1.9 模式下的 JRuby 1.6.4，我没有收到错误。在 OS X 上，使用 1.8.7、1.9.2 和 1.9.3，我没有收到错误消息。该行为显然取决于您的 Ruby 版本和平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-18T15:11:25.667

ruby-doc.org 从 ruby​​ 1.9 开始这样说：

```
# The result of read operation when pty slave is closed is platform
# dependent.
ret = begin
        m.gets          # FreeBSD returns nil.
      rescue Errno::EIO # GNU/Linux raises EIO.
        nil
      end 
```

好的，所以现在我知道这种行为在 Linux 上是“正常的”，但这意味着获取 PTY 的输出有点棘手。如果你这样做`m.read`，它会读取所有内容，然后将其丢弃并引发 Errno::EIO。您确实需要使用`m.readline`. 即使这样，如果最后一行由于任何原因不以“\n”结尾，您也可能会丢失最后一行。为了更加安全，您需要逐字节读取内容`m.read(1)`

关于 tty 和 pty 对缓冲的影响的附加说明：它`STDOUT.sync = true`与子进程中的 (unbuffered output) 不同，而是触发**line buffering**，其中输出在 "\n" 上刷新

# vba - Excel 2007 VBA 工作簿关闭然后重新打开

> ID：10238301
> 
> 赞同：0
> 
> 时间：2012-04-19T23:29:57.153
> 
> 标签：vba, excel

2003 年，工作簿即将关闭。但现在相同的代码正在重新打开工作簿。之后有一些行，然后子结束。当 sub 结束时`workbook_open`，即使没有打开任何工作簿的代码，也会为关闭的工作簿触发事件。调试器几乎没用，如果我逐步执行所有操作，它不会重现错误，实际上当我使用调试器时一切正常。

我用

`ActiveWorkbook.Close False`

用于关闭工作簿（从加载项）。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:47:07.787

由于烦人的功能区和微软摆脱了自定义菜单，我为 Excel 2007 添加了少量代码。为了在一定程度上弥补这一点，为了方便起见，我希望功能区中的加载项选项卡始终可见，但我使用 Application.OnTime 和 sendkeys 来做到这一点（因为微软没有费心在愚蠢的功能区中包含 API。 ..)。好吧，OnTime 似乎是我麻烦的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T22:31:31.450

想出了如何获得两者。Workbook_beforeclose 通过调用取消预定的准时事件：

```
Application.OnTime EarliestTime:=Now(), Procedure:="Name", Schedule:=False 
```

但否则 ontime 事件将被执行。

如果在调用 beforeclose 之前事件没有被取消，则工作簿将关闭然后重新打开以运行计划的 ontime 事件（因为工作簿打开的时间太短以至于 ontime 在我需要关闭之前没有机会运行它）。

# parsing - 野牛语法警告

> ID：10238306
> 
> 赞同：1
> 
> 时间：2012-04-19T23:30:16.577
> 
> 标签：parsing, bison

我正在用 Bison 编写解析器，并且收到以下警告。

```
fol.y:42 parser name defined to default :"parse"
fol.y:61:  warning:  type clash ('' 'pred') on default action 
```

我一直在使用谷歌搜索摆脱它们的方法，但几乎空手而归（更不用说如何修复它们了），因为我发现的每篇文章都有编译错误和警告他们自己没有得到解决。有人可以告诉我它们的含义以及如何解决它们吗？相关代码如下。第 61 行是最后一个分号。我删掉了其余的语法，因为它非常冗长。

```
%union {
    char* var;
    char* name;
    char* pred;
}

%token <var> VARIABLE
%token <name> NAME
%token <pred> PRED

%%

fol:
        declines clauses {cout << "Done parsing with file" << endl;}
        ;
declines:
        declines decline
        |decline
        ;
decline:
        PRED decs
        ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:30:17.923

第一条消息可能只是您未包含`%start parse`在语法规范中的警告。

第二个意味着您在某处有应该返回值的规则，但您没有正确指定要返回的值类型。PRED 返回`pred`你的元素`union`；问题可能是您没有为and创建`%type`条目。如果您有联合，则必须为大多数（如果不是全部）规则指定类型——或者可能只是没有明确操作的规则（以便覆盖默认操作）。`decline``declines``$$ = $1;`

我不相信问题是否在您指定的行中，并且由于我们没有完整、最小限度地再现您的问题，因此我们无法为您进行调查以验证它。的规范`decs`可能是相关的（我不相信它是相关的，但它可能是相关的）。

您可以从 的输出中获得更多信息`bison -v`，即`y.output`文件（或类似文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-09T14:50:26.110

终于找到了。

要解决这个问题：

> fol.y:42 解析器名称定义为默认值：“parse”

`%name parse`之前添加`%token`

例如：

```
%name parse
%token NUM 
```

（来自：[https](https://bdhacker.wordpress.com/2012/05/05/flex-bison-in-ubuntu/#comment-2669) ://bdhacker.wordpress.com/2012/05/05/flex-bison-in-ubuntu/#comment-2669 ）

# delphi - 什么目录名称'。' 和“..”是什么意思，faDirectory 是什么意思？

> ID：10238307
> 
> 赞同：5
> 
> 时间：2012-04-19T23:30:37.593
> 
> 标签：delphi, delphi-7

我有一个程序可以搜索用户在路径和子路径中输入的文件，除了这一行之外，我对它的大部分内容都有很好的理解：

```
if ((Rec.Attr and faDirectory) <> 0) and (Rec.Name<>'.') and (Rec.Name<>'..') 
```

整个过程如下，如果我不确定这行代码的用途，我将不胜感激，它是否检查了子路径中的某些内容？

```
procedure TfrmProject.btnOpenDocumentClick(Sender: TObject);
begin
FileSearch('C:\Users\Guest\Documents', edtDocument.Text+'.docx');
end;

procedure TfrmProject.FileSearch(const Pathname, FileName : string);
var Word : Variant;
    Rec  : TSearchRec;
    Path : string;
begin
Path := IncludeTrailingBackslash(Pathname);
if FindFirst(Path + FileName, faAnyFile - faDirectory, Rec) = 0
then repeat Word:=CreateOLEObject('Word.Application');
  Word.Visible:=True;
  Word.Documents.Open(Path + FileName);
   until FindNext(Rec) <> 0;
FindClose(Rec);

if FindFirst(Path + '*.*', faDirectory, Rec) = 0 then
 try
   repeat
   if ((Rec.Attr and faDirectory) <> 0)  and (Rec.Name<>'.') and (Rec.Name<>'..') then
     FileSearch(Path + Rec.Name, FileName);
  until FindNext(Rec) <> 0;
 finally
 FindClose(Rec);
end;

end; //procedure FileSearch 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T23:35:04.020

1) [faDirectory](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/SysUtils_faDirectory.html)属性指示条目是否为目录。

```
 (Rec.Attr and faDirectory) <> 0 //check if the current TSearchRec element is a directory 
```

2）每个目录有两个[Dot Directory Names](http://msdn.microsoft.com/en-us/library/8ac44452-328c-4d7b-a784-d72afd19bd9f%28v=prot.13%29#dot_directory_name)，递归扫描时必须避免。

```
(Rec.Name<>'.') and (Rec.Name<>'..') //check the name of the entry to avoid scan when is `.` or `..` 
```

换句话说，该行意味着：仅扫描当前条目是目录而不是`Dot Directory`.

# caching - .NET 应用程序是否有任何进程外的内存缓存框架

> ID：10238308
> 
> 赞同：2
> 
> 时间：2012-04-19T23:30:38.947
> 
> 标签：caching

是否有任何内存缓存框架耗尽进程并可被 .NET 桌面应用程序使用？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:16:28.120

我在生产中成功使用[了 AppFabric for Windows Server 。](http://msdn.microsoft.com/en-us/windowsserver/ee695849)

[Local Cache](http://msdn.microsoft.com/en-us/library/hh334210.aspx)的一个很好的性能特性，它避免了（慢）缓存对象的反序列化，并带有一个额外的本地进程内缓存：

> “服务器以**序列化**的形式将对象存储在缓存中。当缓存客户端从缓存中请求对象时，服务器通过网络将其发送给客户端。缓存客户端然后**反序列**化对象以供客户端应用程序使用。为了加快速度在检索对象的过程中，**启用本地缓存**。”

Bummer：不幸的是**，Windows Server Web 版不支持 Windows** Server 的 AppFabric （至少没有一些黑客攻击 - Reflector FTW）：

> [https://twitter.com/#!/ronljacobs/status/25903639754](https://twitter.com/#!/ronljacobs/status/25903639754)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:17:31.110

经过一番研究。

Memcached 是我们选择的。按照此链接开始。

[http://deanhume.com/Home/BlogPost/memcached-for-c----a-walkthrough/62](http://deanhume.com/Home/BlogPost/memcached-for-c----a-walkthrough/62)

# ruby-on-rails - 没有模型的表单，添加到命名空间

> ID：10238316
> 
> 赞同：0
> 
> 时间：2012-04-19T23:31:38.563
> 
> 标签：ruby-on-rails, rails-routing

我最近在我的 rails 应用程序中添加了命名空间。我有一个可以向所有者发送电子邮件的表格，但它似乎在这个过程中出现了问题（底部有错误）。该表单没有模型，它只是启动一封电子邮件。

这是我的路线文件

```
scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
  namespace :admin do
    resources :email_owners do
      collection do
       get :email
       get :islas
       post :email
       post :islas
       end
      end
    end
  match "*path", to: "sites#not_found" # handles /en/fake/path/whatever
  end
root to: redirect("/#{I18n.default_locale}") # handles /
match '*path', to: redirect("/#{I18n.default_locale}/%{path}")
end 
```

rake 路由的输出 CONTROLLER=admin/email_owners

```
email_admin_email_owners GET    /:locale/admin/email_owners/email(.:format)    {:locale=>/en|es/, :action=>"email", :controller=>"admin/email_owners"}
islas_admin_email_owners GET    /:locale/admin/email_owners/islas(.:format)    {:locale=>/en|es/, :action=>"islas", :controller=>"admin/email_owners"}
                     POST   /:locale/admin/email_owners/email(.:format)    {:locale=>/en|es/, :action=>"email", :controller=>"admin/email_owners"}
                     POST   /:locale/admin/email_owners/islas(.:format)    {:locale=>/en|es/, :action=>"islas", :controller=>"admin/email_owners"}
  admin_email_owners GET    /:locale/admin/email_owners(.:format)          {:locale=>/en|es/, :action=>"index", :controller=>"admin/email_owners"}
                     POST   /:locale/admin/email_owners(.:format)          {:locale=>/en|es/, :action=>"create", :controller=>"admin/email_owners"}
new_admin_email_owner GET    /:locale/admin/email_owners/new(.:format)      {:locale=>/en|es/, :action=>"new", :controller=>"admin/email_owners"}
edit_admin_email_owner GET    /:locale/admin/email_owners/:id/edit(.:format) {:locale=>/en|es/, :action=>"edit", :controller=>"admin/email_owners"}
   admin_email_owner GET    /:locale/admin/email_owners/:id(.:format)      {:locale=>/en|es/, :action=>"show", :controller=>"admin/email_owners"}
                     PUT    /:locale/admin/email_owners/:id(.:format)      {:locale=>/en|es/, :action=>"update", :controller=>"admin/email_owners"}
                     DELETE /:locale/admin/email_owners/:id(.:format)      {:locale=>/en|es/, :action=>"destroy", :controller=>"admin/email_owners"} 
```

应用程序/控制器/管理员/email_owners.rb

```
class Admin::EmailOwnersController < Admin::BaseController
  def email
  owner_type = params[:owner_type]
  subject = params[:subject]
  message = params[:message]

    owners = User.owners
    owners.each do |owner|
      OwnerMailer.all_owners(owner, subject, message).deliver
    end 
      flash[:notice] = "Email has been sent to all Owners"
      redirect_to admin_sites_path
  end 
end 
```

这是我的表格，问题出在哪里。

```
<%= form_tag [:admin, email_admin_email_owners_path] do %>
To:
  <%= radio_button_tag "owner_type", "All" %> All Owners |
  <%= radio_button_tag "owner_type", "FullTime" %> FullTime |
  <%= radio_button_tag "owner_type", "PartTime" %> PartTime<br />
  <%= text_field_tag "subject", "Subject" %><br />
  <%= text_area_tag "message", "Message" %><br />
  <%= submit_tag "Send Email" %>
<% end %> 
```

每当我去路线/路径
（http://localhost:3000/en/admin/email_owners/email）

我得到错误

```
undefined method `admin_/en/admin/email_owners/email_path' for #<#<Class:0x789db30>:0x789ab78> 
```

但我不确定为什么。有任何想法吗？我在叫错路吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:02:55.933

form_tag 将 url 作为第一个参数，所以你应该只指定你希望它去的路由：

```
<%= form_tag email_admin_email_owners_path do %> 
```

Rails 使用方括号作为从字符串、符号或对象生成嵌套路径的快捷方式，因此`[:admin, :email]`会生成`admin_email_path`

当您使用方括号`[:admin, email_admin_email_owners_path]`来生成此 url 时，发生了两件事：

1.  email_admin_email_owners_path 返回“/en/admin/email_owners/email”
2.  使用 :admin 在方括号内进行评估，然后为您 `admin_/en/admin/email_owners/email_path`提供未定义的方法

# javascript - 如何让 Internet Explorer 在将 innerHTML 传输到?

The purpose of this JavaScript program is to enable the user to report a problem on a social network with all the pertinent information in his initial message.

> ID：10238319
> 
> 赞同：0
> 
> 时间：2012-04-19T23:31:45.267
> 
> 标签：javascript, internet-explorer-8, escaping, textarea, innerhtml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:53:19.753

'\n' 应该可以工作。在 IE 8 中将以下内容作为 textarea 元素的值插入到返回值中（仅为方便起见包装）：

```
 var s = 'E M E R G E N C Y\n' +
           '\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n' +
           'Name: John Doe Land-line'; 
```

我只用 unicode 值而不是 HTML 字符实体替换了“—”字符。您可能想使用“\n\r”，但我认为没有必要。

哦，您还可以执行以下操作：

```
 var t = ['E M E R G E N C Y',
           '\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014',
           'Name: John Doe Land-line']; 
```

然后将值设置为：

```
 t.join('\n') // or t.join('\u000d'); 
```

您也可以代替`\u000a`换行和`\u000d`回车。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:56:14.263

textareas 非常类似于输入。为什么不使用`value`属性？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T02:56:18.930

设置 textarea 的`value`，而不是它的`innerHTML`. 在 HTML 中，空格被去除了——你应该从制作一个基本的网页就知道这一点。与其他浏览器不同，Internet Explorer 只是在做正确的事情......

# asp.net-mvc-3 - Asp.net MVC 3 缓存

> ID：10238321
> 
> 赞同：0
> 
> 时间：2012-04-19T23:31:52.347
> 
> 标签：asp.net-mvc-3, razor, outputcache

我有一个对动作方法进行 ajax 调用的视图。

```
$.ajax({
url: url to action, 
type: 'GET',
cache: false,
dataType: 'html',
            success: function(result) {
                $("#divPatient").html(result);
                $("#divPatient").show("blind", { }, 2000);
                $("#loadingImage").hide();
                PrepPatientHtml();
            }
        }); 
```

如您所见，action 方法返回 html。该站点由 SQL 数据库驱动，该数据库在更改时会影响操作的输出。我添加了一个 NoCache 动作过滤器

```
public class NoCache : ActionFilterAttribute
    {
        public override void OnResultExecuting(ResultExecutingContext filterContext)
        {
            filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
            filterContext.HttpContext.Response.Cache.SetValidUntilExpires(false);
            filterContext.HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
            filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
            filterContext.HttpContext.Response.Cache.SetNoStore();

            base.OnResultExecuting(filterContext);
        }
    } 
```

出于某种原因，当对支持视图的数据库进行更改时，缓存永远不会失效。有人有什么想法吗？视图相当简单：

```
@using (Html.BeginForm("Save", "Home", FormMethod.Post, new { id = "frm" }))
{
    <div style="padding: 10px;">
        <h1 id="questionsHeader">@Model.FullName (@Model.Dob)</h1>
        @for (var i = 0; i < Model.Episodes.Count; i++)
        {
            @Html.EditorFor(model => model.Episodes[i])
        }
    </div>
    <div style="padding-top: 10px; border-top: solid 1px #666666; margin-top: 5px; text-align: right;">
        <input type="submit" id="btnSaveAnswers" value="Save Answers" />        
    </div>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:24:13.727

将此注释用于您的操作：

```
[OutputCache(Duration = 0)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:17:58.260

我不相信它会是框架或你所说的“实体框架”（可能你想说别的）。

您是否调试过您的应用程序以查看操作是否实际正在执行？

如果是，您是否缓存了最终产生相同结果的对象？

我的猜测是您的浏览器正在缓存结果。

你试过这个：

```
response.setHeader( "Pragma", "no-cache" );
response.setHeader( "Cache-Control", "no-cache" );
response.setDateHeader( "Expires", 0 ); 
```

如果它不起作用，请尝试通过添加一个随机参数来更改 URL，例如：

```
+ '&uid=' + uniqueId() 
```

其中 uniqueId() 是一个函数，它可以及时为您获取一个唯一的字符串，例如 urlencoded 时间的刻度数。

尽管最后一个选项可能不是最好的，但它肯定是最简单、最快的并且肯定会起作用。

# windows-phone-7 - Windows Phone 7 - 是否可以添加其他键/值来推送通知消息

> ID：10238323
> 
> 赞同：2
> 
> 时间：2012-04-19T23:31:59.867
> 
> 标签：windows-phone-7, push-notification, mpns

我正在测试 Windows Phone 7.5 推送通知。我有 3 种不同的推送类型（Toast、Tile 和 Raw）工作正常，并且能够毫无问题地从单元测试和 Web 应用程序发送消息并在我的 WP 应用程序中接收它们。我希望能够向推送通知添加额外的属性，而 Raw 推送类型对我来说非常完美，我可以向推送消息添加自定义键/值对或其他任何内容，并将其提取到手机应用程序中。但是，我刚刚发现它仅在应用程序正在运行并且我的单元测试失败（在单元测试中收到抑制的通知状态）时才有效，而电话应用程序未运行（检查文档也证实了这一点）。无论如何，是否可以为 toast 或 tile 消息添加额外的属性（键/值），或者我可以以其他方式使用 raw ？Toast 通知似乎仅限于标题属性和实际消息属性，但我需要添加其他数据。

只是想知道是否有人有任何建议/解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T23:54:09.043

我使用的一般做法是最初向设备发送原始通知，并在消息中嵌入电话可用数据。如果我的应用程序当前正在运行，那么我可以处理原始消息的内容并立即在手机上使用它。但是，如果应用程序当前未在手机上运行，​​您将收到来自推送服务器的通知，即消息无法传递。如果我收到此回复，我会发送 Toast / Tile 通知。

使用 Toast 通知，您可以访问的唯一参数是启动应用程序的 URI。这是用`wp:param`消息的节点指定的。例如。

```
<wp:Notification xmlns:wp="WPNotification">
  <wp:Toast>
    <wp:Text1>Toast Title</wp:Text1>
    <wp:Text2>Toast sub title</wp:Text2>
    <wp:Param>/MainPage.xaml?LaunchedFrom=A%20Toast%20Notification</wp:Param>
  </wp:Toast>
</wp:Notification> 
```

如果用户点击此 toast 通知，您的应用程序将启动并导航到`MainPage.xaml`. 您可以访问通过`NavigationContext.QueryString`.

注意：该`wp:Param`节点只能发送到 Mango（及以上）设备。此外，整个内容必须少于 256 个字符，否则您将收到`PushErrorTypeMessageBadContent`错误消息。（感谢 Ritch Melton 指出这一点）。更多信息可从MSDN 上[的为 Windows Phone 发送推送通知页面获得。](http://msdn.microsoft.com/en-us/library/hh202945%28v=vs.92%29.aspx "为 Windows Phone 发送推送通知")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:53:25.053

正如您所发现的，[Microsoft 推送通知服务](http://msdn.microsoft.com/en-us/library/ff402558%28v=vs.92%29.aspx)对您可以发送和接收的消息类型非常严格。这些推送通知的目的是提供简单的推送更新，而不是提供大量数据。灵活的 Raw 类型似乎符合要求，直到您发现：

> 您可以使用原始通知将信息发送到您的应用程序。如果您的应用程序当前未运行，原始通知将在 Microsoft 推送通知服务上被丢弃，并且不会传送到设备。

但是，如果您向应用程序发送 toast 通知，则当用户单击 toast 时，应用程序将启动。当您的应用程序启动时，您应该检查服务并检索您尝试从 Web 服务或其他远程机制发送的数据。

# javascript - 上传图片未在 IE9 上显示 - 错误 SCRIPT438：对象不支持属性或方法

> ID：10238326
> 
> 赞同：0
> 
> 时间：2012-04-19T23:32:15.527
> 
> 标签：javascript, internet-explorer-9

我的客户仅在 IE9 中存在网站问题（该页面在 Firefox 和 Chrome 中运行良好）：

该网站在弹出窗口中有一个上传表单。处理后，弹出窗口关闭，上传的文件（图像）显示在主（顶部，“父亲”）页面。

弹窗代码如下：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>..:: Upload Img ::..</title>
    <link href="/css/admin.css" rel="stylesheet" type="text/css" />
    <script language="javascript" type="text/javascript">
            function fcnReload() { 
                    top.showFotos('127d4efeef19abfcbc411507bd9d5de6', '_cookie.jpg|_f0.jpg');
            }
        </script>
    </head>
    <body onunload="fcnReload();">
    <h3>Image uploaded - OK</h3>
    Close the window<br /><br />
    </body>
</html> 
```

由于某些原因，上传的图片在 IE9 上没有显示，并且出现错误：

SCRIPT438：对象不支持属性或方法“showFotos”1.html，第 9 行字符 6。

更新父窗口时可能存在某种 IE 问题：[link1](http://social.msdn.microsoft.com/Forums/hu/iewebdevelopment/thread/107e20ee-026d-4965-8dab-79a83df45e79)，[link2](https://stackoverflow.com/questions/4852830/external-interface-calls-to-flash-not-working-in-ie9)

函数 showFotos 代码：

```
function showFotos(session, names) {
    var arrNames = names.split('|');
    strNames = '';
    for (var i=0; i<mdl_fotos; i++) {
        if ((i==0) && (sel_mod==11)) {
            document.getElementById('Preview-Color').src = '/uploads/'+session+arrNames[i+1];
            document.getElementById('Preview-Color').style.width = '444px';
            document.getElementById('Preview-Color').style.height = '350px';
            strNames += ','+arrNames[i+1].replace('_','');
        } else {
            document.getElementById('ExtImg'+(i+1)).src = '/uploads/'+session+arrNames[i+1];
            strNames += ','+arrNames[i+1].replace('_','');
        }
    }
    if (arrNames[0] != '')
        document.getElementById('Preview-Cookie').src = '/uploads/'+session+arrNames[0];
    strSession = session;
    strNames = arrNames[0].replace('_','')+strNames; 
} 
```

# java - 创建一个可运行的 jar。各种问题

> ID：10238330
> 
> 赞同：6
> 
> 时间：2012-04-19T23:32:50.613
> 
> 标签：java, ant, jar

我一直在研究一个命令行可执行的 Java 程序。它处于测试阶段，并且将其打包已被证明是一个问题。这个问题的症结在于我的应用程序有许多依赖项。我的 lib 文件夹（包含 jars）接近 500mb。

目前我一直在使用 Eclipse Runnable Jar Export 向导。工作完美，除了它必须从 Eclipse 完成。它会生成一个大小约为 500mb 的 Jar（不要问......我只想说需要在这个程序中打包很多 COBOL 程序）。这个过程需要<30s。

理想情况下，我希望这是某种 Ant 任务，可通过 Jenkins 运行并发布到存储库。这样用户就可以抓住一个 Jar 并运行它。

# 我调查过的选项：

## **自定义类加载器（FatJar、OneJar 等）。**

*   作品
*   运行时执行缓慢，因为需要解压 jar。
*   文件结构基本上是一个装满 jar 的 Jar，主类通过自定义类加载器委托。
*   快速构建时间（5 分钟）

    ```
    <target name="hello" depends="compile">
        <property name="classes.dir" value="onejar" />
        <property name="build.dir" value="bin" />

        <one-jar destfile="hello.jar">
            <manifest>
                <attribute name="One-Jar-Main-Class" value="mainclass" />
                <attribute name="Class-Path" value="." />
                <attribute name="One-Jar-Show-Expand" value="true" />
            </manifest>
            <main>
                <fileset dir="${build.dir}"/>
            </main>
            <lib>
                <fileset dir="lib">
                    <include name="**/*.jar"/>
                </fileset>

            </lib>

        </one-jar>
    </target> 
    ```

## **手动收集依赖项，将它们解压缩到一个文件夹中，然后使用自定义 MANIFEST 文件将它们全部组合起来。**

*   无法让它工作
*   大 (1500mb+)
*   构建时间慢（20 分钟 +）

    ```
    <target name="compile" depends="resolve">
        <javac srcdir="src" destdir="bin" debug="true" deprecation="on">
            <classpath>
                <path refid="ivy.path" />
            </classpath>
        </javac>
    </target>

    <target name="jar" depends="compile" description="Create one big jarfile.">
        <jar jarfile="${dist}/deps.jar">
            <zipgroupfileset dir="lib">
                <include name="**/*.jar" />
            </zipgroupfileset>
        </jar>
        <sleep seconds="1" />
        <jar jarfile="${dist}/myjar.jar" basedir="bin">
            <zipfileset src="${dist}/deps.jar" excludes="META-INF/*.SF" />
            <manifest>
                <attribute name="Main-Class" value="mymainclassishere" />
            </manifest>
        </jar>
    </target> 
    ```

所以，是的，有人有什么建议吗？我很想听听人们的想法。

编辑：特别......为什么Eclipse Runnable Jar Export Wizard可以在不到30秒的时间内导出我的Jar，但我的构建时间> 30分钟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T06:58:51.240

我知道回答你的问题可能会令人不悦，但我昨天确实设法解决了这个问题。在我尝试的所有选项中，我发现最快的解决方案是复制 Eclipse Runnable Jar Export Wizard。它需要`jar-in-jar-loader.zip`可以使用 Runnable Jar Export Wizard 获取的...或者您可以通过 Google/Eclipse 安装找到它。

我发现这个解决方案构建速度很快（30 秒）并且运行速度更快（5 秒启动成本）。它还使罐子结构非常整洁，没有爆炸的罐子。

```
<target name="compile" depends="resolve">
    <mkdir dir="bin"/>
    <!-- Copy all non java resources since jar javac will exclude them by default. Needed for xmls, properties etc --->
    <copy todir="bin">
        <fileset dir="src" excludes="**/*.java" />
    </copy>

    <javac srcdir="src" destdir="bin" debug="true" deprecation="on">
        <classpath>
            <path refid="ivy.path" />
        </classpath>
    </javac>
</target>

<!-- Creates the runnable jar. Copies the dependencies as jar files, into the top level of a new jar. 
     This means nothing without a custom classloader and manifest with a jar listing -->
<target name="jar" depends="compile" description="Create one big jarfile.">

    <path id="dependencies.path">
        <fileset dir="lib">
            <include name="**/*.jar" />
        </fileset>
    </path>

    <pathconvert property="manifest.classpath" pathsep=" ">
        <path refid="dependencies.path" />
        <mapper>
            <chainedmapper>
                <flattenmapper />
                <globmapper from="*.jar" to="*.jar" />
            </chainedmapper>
        </mapper>
    </pathconvert>

    <mkdir dir="${dist}"/>
    <jar destfile="${dist}/jar/Runnable.jar" filesetmanifest="mergewithoutmain">
        <manifest>
            <attribute name="Main-Class" value="org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader" />
            <attribute name="Rsrc-Main-Class" value="mymainclass" />
            <attribute name="Class-Path" value="." />
            <attribute name="Rsrc-Class-Path" value="./ ${manifest.classpath}" />
        </manifest>
        <fileset dir="bin" />
        <zipfileset src="jar-in-jar-loader.zip" />
        <zipfileset dir="lib" includes="**/*.jar*" />
    </jar>
</target> 
```

# c++ - 有没有办法在 Visual Studio 中捕获标准错误和标准输出？

> ID：10238331
> 
> 赞同：24
> 
> 时间：2012-04-19T23:32:52.273
> 
> 标签：c++, visual-studio-2010, command-line, ide, stdout

有没有办法在 Visual Studio 中捕获标准输出和标准错误？例如，当我使用

```
cout <<"Hello world!"<< endl; 
```

一个黑色的窗口出现又消失。它太快了，我看不到它。IDE 中有一个输出部分，但它只允许我从构建和其他内容中选择显示输出，但不能选择标准输出。

作弊解决方案可能会打电话

```
system("pause"); 
```

但这听起来不对。我在选项中搜索，但找不到项目。

有人有什么想法吗？谢谢。我刚开始使用VS，我之前在Linux上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T23:48:00.143

如果要检查输出，请不要使用“Start Debugging”命令，而是使用“Start without Debugging”。我一般都是这样处理的。命令提示符窗口将保持打开状态，直到您将其关闭。如果发生崩溃或其他情况，您始终可以将 Visual Studio 重新附加到该进程，或者只需使用“开始调试”运行它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T23:44:21.033

转到项目属性 -> 链接器 -> 系统 -> 将子系统更改为控制台。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T23:38:19.973

在不实际尝试重定向 stdin/err 流的情况下，您可以尝试一些替代方案：

*   打开命令提示符窗口并 cd 到将在其中创建可执行文件的目录，然后从那里运行它。
*   也许尝试使用类似 std::cin.get(); 或 std::cin.ignore(std::cin.rdbuf()->in_avail() + 1); 而不是系统（“暂停”）。
*   [通过OutputDebugString](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx)在 Visual Studio 调试器中显示输出

# php - Zend Pdf 生成器上的页面缩放

> ID：10238334
> 
> 赞同：2
> 
> 时间：2012-04-19T23:33:08.007
> 
> 标签：php, zend-framework, pdf

我正在尝试用 PHP 制作一个 PDF，用于打印到地址标签上。我已经仔细测量，使文本与标签对齐。然而，当要打印它们时，页面缩放会弄乱所有这些测量，现在什么都不会排列。我必须手动关闭页面缩放，但我的客户不愿意忍受这个额外的步骤。我能做些什么？

# python - 在 Python 中加载大型 JSON 列表的最佳方法是什么？

> ID：10238340
> 
> 赞同：4
> 
> 时间：2012-04-19T23:33:56.747
> 
> 标签：python, json, large-files

我可以访问一组文件（每个文件大约 80-800mb）。不幸的是，每个文件中只有一行。该行仅包含一个 JSON 对象（列表列表）。将其加载并解析为较小的 JSON 对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-11-29T20:31:05.610

该模块`pandas 0.21.0`现在支持 chunksize 作为`read_json`. 您可以一次加载和操作一个块：

```
import pandas as pd
chunks = pd.read_json(file, lines=True, chunksize = 100)
for c in chunks:
    print(c) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T23:48:07.723

这里已经有类似的帖子[了](https://stackoverflow.com/q/7052947/1332690)。这是他们提出的解决方案：

```
import json
with open('file.json') as infile:
  o = json.load(infile)
  chunkSize = 1000
  for i in xrange(0, len(o), chunkSize):
    with open('file_' + str(i//chunkSize) + '.json', 'w') as outfile:
      json.dump(o[i:i+chunkSize], outfile) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T00:02:49.060

如果您试图避免将整个列表加载到内存中，您可以先将文件作为文本处理：

使用堆栈来跟踪括号/引号的打开和关闭。扫描字符串中的任何开启者或当前关闭者。扫描文本时，只寻找更近的文本。当你阅读开瓶器时推上一个，当你找到更近的时候将它弹出。

JSON 的完整集是`[`-> `]`、`{`->`}`和`"`-> `"`。你应该排除`\"`。[您可以在http://www.json.org/](http://www.json.org/)查看规范

然后，每当`]`遇到 a 并且在弹出 match 之后堆栈只有一个项目（顶层 '['）`[`，那么你就知道是时候开始新的一行了。

最后，您应该确保第一个`[`和最后一个`]`不出现在您的输出中。

这将为列表中的每个项目提供单独的 JSON 对象，每个对象位于文件的单独行上。

如果你深入研究 python JSON 库，应该也有一些解析 JSON 的函数。您可以利用这些，即使它们不是公共接口的一部分。

当然，您可以通过使用 JSON 库加载字符串然后根据其他答案逐项（或多项）转储它来实现相同的目的。

# html - 严格模式导致右浮动图像在 IE8 上的工作方式与左浮动不同

> ID：10238342
> 
> 赞同：0
> 
> 时间：2012-04-19T23:34:15.397
> 
> 标签：html

我看过有关严格模式更改图像填充的帖子，但我遇到了不同的问题。我试图让文本在图像周围浮动。这在 FF 11 中有效（垂直位置有一个小的变化，但它不会打扰我）。但在 IE8 中，left-float 有效，right-float 只适用于一个段落。我做了一个最小的测试文件，问题就消失了。最终我发现放一个严格的 DOCTYPE 是导致问题再次出现的原因。（是的，我需要那个 DOCTYPE 来让我的代码通过 W3C 验证器。）

我已经准备了它的外观图片，但我还不允许发布图片。

左浮动图像总是这样出现：

```
XXXXXXXXXXXXXXX 第一段
XXXXXXXXXXXXXXX
XXXXXXXXXXXXXXX 第二段
XXXXXXXXXXXXXXX

```

我希望右浮动图像作为它的镜像出现，这就是我在没有 DOCTYPE 的 FF 11 和 IE 8 中得到的。

> ```
>  first paragraph  XXXXXXXXXXXXXX  
>                                                 XXXXXXXXXXXXXX
>                               second paragraph  XXXXXXXXXXXXXX 
>                                                 XXXXXXXXXXXXXX 
> ```

但是当我输入 DOCTYPE 时，IE8 将其更改为

> ```
>  first paragraph  XXXXXXXXXXXXXX  
>                                                 XXXXXXXXXXXXXX
>                                                 XXXXXXXXXXXXXX 
>                                                 XXXXXXXXXXXXXX
>                                               second paragraph 
> ```

这是HTML

```
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML+RDFa 1.0//EN'
      'http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'
      xmlns:v='http://rdf.data-vocabulary.org/#'
      xmlns:fb='http://www.facebook.com/2008/fbml'
      xmlns:og='http://opengraphprotocol.org/schema/'>
  <head>
    <title>float test - strict</title>
    <style>
      img { margin: 0 10px; }
      img.fl { float:left; }
      img.fr { float:right; }
    </style>
  </head>
  <body>
    <p dir='rtl'>
      <img class='fr' src='http://www.htmlgoodies.com/images/blue.gif'
       height='100' alt='img'/>
      first paragraph
    </p>
    <p dir='rtl'>
      second paragraph
    </p>
    <div style='clear:both;'></div>
    <p dir='ltr'>
      <img class='fl' src='http://www.htmlgoodies.com/images/blue.gif'
       height='100' alt='img'/>
      first paragraph
    </p>
    <p dir='ltr'>
      second paragraph
    </p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:22:04.647

你的html结构是错误的......

这是一个更好的方法...

[http://jsfiddle.net/VH7QC/1/](http://jsfiddle.net/VH7QC/1/)

# ios - TTPhotoViewController 忽略图像方向（镜像）

> ID：10238347
> 
> 赞同：3
> 
> 时间：2012-04-19T23:35:12.060
> 
> 标签：ios, objective-c, cocoa-touch, three20, ttphotoviewcontroller

我`three20`在我的项目中使用了一个问题，我正在使用`TTThumbnailViewController`并且`TTPhotoViewController`我正在加载一堆照片，其中一堆只是已经加载的照片的镜像副本。（我只是在从磁盘加载数据后更改 UIImageOrientation）

在`ThumbViewControleller`一切工作正常！和预期的一样但是在`TTPhotoViewController`我看到原始方向的两个图像并且我调试它并且centerphotoView具有正确的方向但仍然显示原始方向我花了大约6个小时在它上面我很绝望你能帮我设置什么或什么使固定 ？

# c# - 从 MySQL 服务器中删除多条记录的最有效方法是什么？

> ID：10238352
> 
> 赞同：2
> 
> 时间：2012-04-19T23:35:41.407
> 
> 标签：c#, mysql, ado.net

我正在编写一个 C# winforms 程序作为 MySQL 的练习，以跟踪我在假冒公司中的假冒员工。我的数据网格视图直接从 MySQL 服务器获取记录。我的问题是，按 Employee_ID 删除员工的更有效方法是什么？

我正在考虑使用一个 foreach 语句，该语句为选定的每一行向 SQL 服务器发送一个删除查询，或者以某种方式执行一个批量查询，删除employee_id 匹配的所有行。我不太确定两者的外观。我还是 MySQL 的新手。

感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T23:37:34.067

您可以使用单个 DELETE 语句删除多条记录`IN`：

```
DELETE FROM yourtable
WHERE Employee_ID IN (1, 45, 47, ... ) 
```

# python - 从 matplotlib 中查找异常点：箱线图

> ID：10238357
> 
> 赞同：13
> 
> 时间：2012-04-19T23:36:45.343
> 
> 标签：python, matplotlib, outliers

我正在使用 boxplot 绘制非正态分布，并且有兴趣使用 matplotlib 的 boxplot 函数找出异常值。

除了绘图之外，我还有兴趣找出代码中点的值，这些点在箱线图中显示为异常值。有什么方法可以从箱线图对象中提取这些值以在我的下游代码中使用？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-20T07:57:27.353

您是指两条黑线上方和下方的那些点吗？

```
from pylab import *
spread= rand(50) * 100
center = ones(25) * 50
flier_high = rand(10) * 100 + 100
flier_low = rand(10) * -100
data =concatenate((spread, center, flier_high, flier_low), 0)
r = boxplot(data) 
```

![在此处输入图像描述](../Images/dc1f2ee6ce286011675f0c4f66e8f8e9.png)

存储 boxplot 的返回字典，您可以从中获取所有信息，例如：

```
top_points = r["fliers"][0].get_data()[1]
bottom_points = r["fliers"][2].get_data()[1]
plot(np.ones(len(top_points)), top_points, "+")
plot(np.ones(len(bottom_points)), bottom_points, "+") 
```

![在此处输入图像描述](../Images/36a2a9c5d3fd9aabf4407dea5e981950.png)

# c# - 查询 GPS 坐标

> ID：10238361
> 
> 赞同：1
> 
> 时间：2012-04-19T23:37:21.833
> 
> 标签：c#, .net, sql, sql-server

我想用包含 gps 坐标列的 sql server 2008 构建数据库-

```
latitude 
```

和

```
longitude 
```

我想建立一个类似的查询：

```
"Give me all rows that are within 5(for example) metres of this coordinate" 
```

在c#中可以吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T23:42:13.780

C# 真的不是问题，问题是数据库本身。MS SQL Server 2008 及更高版本具有本文所述的空间支持：

[http://msdn.microsoft.com/en-us/magazine/dd434647.aspx](http://msdn.microsoft.com/en-us/magazine/dd434647.aspx)

如果不使用空间扩展，您必须自己手动计算边界框（可能包括距离坐标 > 5 米的点。）然后您必须限制结果以确保它们在点的 5 米范围内有问题。

这是手动（即有点痛苦）计算的小图片：

```
---------------------
|        ^          |
|     +5m lat       |
|                   |
|-5m lon *   +5m lon|
|                   |
|     -5m lat       |
|        v          |
--------------------- 
```

( `*`) 是有问题的点。手动计算的问题是靠近盒子角落的点（可能）距离 ( `*`) 点 > 5 m。您可以计算边界圆，但这会增加 SQL 查询的复杂性。

所以 - 简而言之 - 你真的需要一个具有空间支持的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T23:53:05.127

如果你只有 lats 和 longs，它会有点慢，但是这样的查询应该可以做到：

`select latitude, longitude where (latitude - @lat)^2 + (longitude - @long)^2 <= @dist`

@lat 和 @long 是坐标，@dist 是允许的最大距离。

编辑： Debracey 和我认为合并我们的两种技术可能更有效。因此，首先您将使用边界框进行查询，这是一个非常快速的计算，然后您将获取通过边界框测试的（希望更小）样本并针对我的查询进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T00:18:30.640

我知道这是 MySQL，但是 1\. 地球不是平的 2\. 你想要圆形，而不是方形......@radius 应该以公里为单位，5 米太精确了...... **1 度**大约是**111.2**公里（我的假设） . 如果您想要里程，请将其更改为**69**。 [http://en.wikipedia.org/wiki/Latitude#Meridian_distance_on_the_sphere](http://en.wikipedia.org/wiki/Latitude#Meridian_distance_on_the_sphere)

```
SELECT *, 
(SQRT(POW((lat - @lat), 2) + POW((lon - @lon), 2)) * 111.2) AS radius 
FROM table 
WHERE POW((lat - @lat), 2) + POW((lon - @lon), 2) < POW((@radius / 111.2), 2) 
ORDER BY radius ASC 
```

我用这个公式来计算附近的雷达检查点......

![在此处输入图像描述](../Images/b876820658bd33cecb828c5ffdb218f1.png)

# shell - 如何让“wc -l”只打印没有文件名的行数？

> ID：10238363
> 
> 赞同：190
> 
> 时间：2012-04-19T23:37:29.520
> 
> 标签：shell, wc

```
wc -l file.txt 
```

输出行数和文件名。

我只需要数字本身（而不是文件名）。

我可以做这个

```
 wc -l file.txt | awk '{print $1}' 
```

但也许有更好的方法？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-04-20T02:52:03.847

试试这个方法：

```
wc -l < file.txt 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-04-19T23:41:02.563

```
cat file.txt | wc -l 
```

根据[手册页](http://www.manpagez.com/man/1/wc/)（对于 BSD 版本，我没有要检查的 GNU 版本）：

> 如果没有指定文件，则使用标准输入并且不显示文件名。提示将接受输入，直到收到 EOF，或在大多数环境中为 [^D]。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-02-15T07:27:15.440

要在没有前导空格的情况下执行此操作，为什么不：

```
wc -l < file.txt | bc 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-05-01T13:57:31.710

怎么样

```
wc -l file.txt | cut -d' ' -f1 
```

即管道输出`wc`到`cut`（其中分隔符是空格并只选择第一个字段）

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-11-06T17:57:21.110

# 技术比较

我有一个类似的问题，试图在没有 提供的前导空格的情况下获取字符数`wc`，这导致我访问了这个页面。在这里尝试了答案后，以下是我在 Mac (BSD Bash) 上进行的个人测试的结果。同样，这是为了字符数；对于你会做的行数`wc -l`。`echo -n`省略尾随换行符。

```
FOO="bar"
echo -n "$FOO" | wc -c                          # "       3"    (x)
echo -n "$FOO" | wc -c | bc                     # "3"           (√)
echo -n "$FOO" | wc -c | tr -d ' '              # "3"           (√)
echo -n "$FOO" | wc -c | awk '{print $1}'       # "3"           (√)
echo -n "$FOO" | wc -c | cut -d ' ' -f1         # "" for -f < 8 (x)
echo -n "$FOO" | wc -c | cut -d ' ' -f8         # "3"           (√)
echo -n "$FOO" | wc -c | perl -pe 's/^\s+//'    # "3"           (√)
echo -n "$FOO" | wc -c | grep -ch '^'           # "1"           (x)
echo $( printf '%s' "$FOO" | wc -c )            # "3"           (√) 
```

我一般不会依赖该`cut -f*`方法，因为它要求您知道任何给定输出可能具有的前导空格的确切数量。一种`grep`适用于计算行数，但不适用于字符数。

`bc`是最简洁的，`awk`而且`perl`似乎有点矫枉过正，但它们都应该相对快速且足够便携。

另请注意，其中一些也可以调整为从一般字符串中修剪周围的空白（以及`echo `echo $FOO``另一个巧妙的技巧）。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-10-20T05:22:20.807

怎么样

```
grep -ch "^" file.txt 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-25T15:54:58.813

显然，有很多解决方案。这是另一个：

`wc -l somefile | tr -d "[:alpha:][:blank:][:punct:]"`

这仅输出行数，但存在尾随换行符 ( `\n`)，如果您也不想要，请替换`[:blank:]`为`[:space:]`.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-11-17T13:22:18.083

在不调用外部命令的情况下去除前导零的另一种方法是使用*算术扩展* `$((exp))`

```
echo $(($(wc -l < file.txt))) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-11-02T11:00:55.393

最好的方法是首先找到目录中的所有文件，然后使用 AWK NR（记录数变量）

下面是命令：

```
find <directory path>  -type f | awk  'END{print NR}' 
```

例子 ： - `find /tmp/ -type f | awk 'END{print NR}'`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-04T07:44:12.707

这适用于我使用正常`wc -l`并`sed`剥离任何不是数字的字符。

```
wc -l big_file.log | sed -E "s/([a-z\-\_\.]|[[:space:]]*)//g"

# 9249133 
```

# cucumber - Cucumber Profiles 和 Global Hooks 来选择浏览器

> ID：10238364
> 
> 赞同：6
> 
> 时间：2012-04-19T23:37:29.597
> 
> 标签：cucumber

我是黄瓜和红宝石的新手。我是一名业务分析师，习惯于编写需求和测试用例，并且我已经阅读了 Cucumber 和 Watir，但我无法获得实际工作所需的内容。

我将在 IE、Firefox 和 Chrome 中测试一组网页，并作为不同类型的用户。我正在编写和标记功能，并在 cucumber.yml 中制作配置文件，因此我可以使用 -p 运行 cucumber 来为不同的用户类型运行适当的标记测试。

我正在创建不同的页面对象，以便我可以轻松地以 Basic 用户、Reports 用户、Editor 用户等身份登录。功能文件将具有稍微不同的场景和每种用户类型的通过/失败条件，步骤 defs 将调用以这些用户类型登录的适当页面对象。

我不想重复测试三次以使用 watir-webdriver 打开正确的浏览器，也不想在每个场景中打开和关闭浏览器，我想在 env.rb 或 hooks.rb 中创建一个全局挂钩来打开浏览器在运行任何功能之前只有一次，然后在功能全部运行时使用全局挂钩中的 and after 语句将其关闭。同样，我使用配置文件调用标记场景来选择为每种用户类型运行哪些测试。

我遇到的问题是在那之前的一步，只需打开浏览器。我知道如何使用 watir-webdriver 打开每个浏览器。

我想要的是在任何测试之前放入全局挂钩以打开浏览器。所以在 env.rb 我打算把 browser = Watir::Browser.new 调用。

我想要做的是拥有三个独立的全局挂钩，一个用于 IE、Chrome 和 Firefox，并根据从 cucumber.yml 中的配置文件传递的条件调用它们，但我无法让它工作。我尝试标记它们，但没有奏效。你不能标记全局钩子吗？我尝试了 if/then/else 设置，但这也不起作用。

我希望能够从 cucumber.yml 中的配置文件中传递参数或标签以仅调用一个全局挂钩，例如：

```
basicuser_overviewtests_ie: --tags @basic @overview @ie

basicuser_overviewtests_ff: --tags @basic @overview @firefox

Basicuser_newpagetests_ie: --tags @basic @newpage @ie 
```

等等...前两个标签将引用场景，第三个标签将引用正确的 env.rb 钩子。

或者，如果我可以从配置文件中传递一个变量，那也可以。不过，我不知道如何在那里使用环境变量。

我错过了什么吗？这些信息足以解释问题吗？谢谢！

* * *

更新：部分问题似乎是黄瓜在与 [features] 文件夹处于同一级别时无法识别 [support] 文件夹，它需要位于 [features] 下。我说过的 cuke 信息在同一级别而不是内部功能上会很好。不是这样。

所以现在我可以让浏览器运行我的三个全局钩子，但是标记并没有帮助，即使标记为仅在标记为@ie 的功能之前运行或使用标记为仅运行@ie 的配置文件，它们也会同时运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T19:43:04.063

**编辑：来自**[The Cucumber Book 的](http://pragprog.com/book/hwcuc/the-cucumber-book)第 147-148 页让我相信这应该有效：

```
Before ('@ie') do
    @browser = Watir::Browser.new :ie
end 
```

我还没有测试过它，但是如果你想将浏览器作为标签传递，那可能会得到你想要的东西。

* * *

我也无法弄清楚如何阅读标签，尽管我认为可能有办法做到这一点。[如果我在The Cucumber Book](http://pragprog.com/book/hwcuc/the-cucumber-book)中遇到它，我会更新你。我最终使用了环境变量。我是这样做的：

```
case ENV['BROWSER']
  when 'ie', 'Internet Explorer'
    browser = Watir::Browser.new :ie
  when 'ff', 'Firefox'
    browser = Watir::Browser.new :ff
  when 'chrome'
    browser = Watir::Browser.new :chrome
  when 'opera'
    browser = Watir::Browser.new :opera
  when 'debug'
    debug_profile = Selenium::WebDriver::Firefox::Profile.new
    debug_profile.add_extension 'features/support/firebug.xpi'
    browser = Watir::Browser.new :firefox, :profile => debug_profile
  else
    browser = Watir::Browser.new :ie
end

Before do
  @browser = browser
end

at_exit() do
  browser.close
end 
```

`BROWSER=<browser>`然后我只是在命令行上传递。有关我使用 ENV 变量所做的更深入的讨论，您可以阅读我在[此处](http://watirbender.blogspot.com/2012/03/passing-test-parameters-on-cucumber.html)写的博客文章。

# javascript - 关闭 jQuery 模态框

> ID：10238365
> 
> 赞同：2
> 
> 时间：2012-04-19T23:37:32.127
> 
> 标签：javascript, jquery, html, modal-dialog

我正在尝试自己创建一个基本模式，但在这里遇到了一些麻烦（也许是因为我是使用 jQuery 的专家 - 不要认真对待它）。

我有这个 HMTL 标记：

```
<div id="modal-boxes">
    <div id="modal-updates" class="modal-content">
        Content for modal box here.
        <a href="#" class="close-modal">Close</a>
    </div>
</div>
<div id="modal-mask"></div> 
```

所以，我做了一个函数，告诉模态框关闭并使#mask div消失。另一个是当我在它外面点击时，它无论如何都会关闭。换句话说，在#modal-updates div 之外单击与单击关闭按钮相同。但问题是，当我想在#modal-updates div 内单击（不应该消失）时，它无论如何都会关闭。这是我的javascript代码：

```
$(".modal").click(function(e){

    e.preventDefault(); // Cancel the default link behavior

    $("#modal-mask").fadeTo(400, 0.4);
    $("#modal-boxes").fadeIn();

    var getName = "#" + $(this).attr("name");
    $(getName).fadeTo(400, 1);
});

function closeModal() {
    $("#modal-mask, #modal-boxes").fadeOut();
}

$(".close-modal").click(function(e){
    e.preventDefault();
    closeModal();
});

$(".modal-content").click(function(){
    closeModal();
}); 
```

有什么帮助吗？

问候，蒂亚戈·卡斯特罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:49:03.053

尝试：

```
$('#modal-updates').click(function(e) {
    e.stopPropagation();
}); 
```

如果操作正确，这将停止`$("#modal-boxes").click()`触发。

[编辑] 修复了一个错字并添加了[jsFiddle](http://jsfiddle.net/z6Z6w/4/)的链接，使其正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:51:59.983

为什么不使用 jQuery 的模态对话框？

关于你的例子：

1）对于链接，我更喜欢执行以下操作：

```
<a href="javascript:void(closeMyPopup());" class="close-modal">Close</a> 
```

这样就不需要处理诸如 preventDefault 或 click 事件之类的事情

2）我猜你不想将你的点击事件绑定到“.modal-content”，而是想将它绑定到“#modal-mask”；）

# maven - 将项目移动到 Maven 中心

> ID：10238367
> 
> 赞同：7
> 
> 时间：2012-04-19T23:37:53.993
> 
> 标签：maven, sonatype

我管理许多 Maven 项目。它们中的大多数部署到我们内部的 Maven 存储库。现在我想开始向 Maven Central 发布一个项目。到目前为止，我有一个父 POM，它指定了我们内部存储库的 distributionManagement。将此信息部署到 Maven Central 是没有意义的。

我应该如何为我的内部项目指定分发管理？我应该为内部项目有一个单独的父 pom group-internal 吗？

Sonatype 提到了一种直接部署到他们的存储库的方法，但他们建议使用他们自己的父 pom (oss-parent)。查看使用 mvnrepository.org 的项目，我找不到任何以 oss-parent 作为父级的项目。大多数项目是否手动将其工件部署到 Sonatype？他们首先在哪里以及如何部署它们？

这么多的问题！我很惊讶这是多么复杂……

更新：事实证明，我确定的一些项目*确实*使用了 oss-parent。它只是隐藏的，因为它是父母的父母。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T17:49:50.627

完成所有设置后，您可以将[分阶段发布](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide#SonatypeOSSMavenRepositoryUsageGuide-7a.3.StageaRelease)和[SNAPSHOT](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide#SonatypeOSSMavenRepositoryUsageGuide-7a.2.PublishSnapshots)直接部署到 Sonatype 的 OSS 存储库。然后可以[通过 Sonatype 的 Nexus UI 发布](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide#SonatypeOSSMavenRepositoryUsageGuide-8.ReleaseIt)Stages 版本。

要为您可以部署的应用程序创建一个存储库文件夹，您需要[在他们的 JIRA 上打开一张带有 Sonatype 的票证](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide#SonatypeOSSMavenRepositoryUsageGuide-3.CreateaJIRAticket)以及对您将部署的开源项目的引用。这个过程非常顺利，如果您不提供所有必要的信息，Sonatype 会为您提供帮助。

乍一看，看起来很多项目都没有 oss-parent 作为父级，但当您向上导航 POM 树时，它们通常会这样做。例如，Google Guava 有 parent `guava-parent`，它有 parent `oss-parent`。一旦您的项目具有`oss-parent`并且配置了存储库，您就可以使用`mvn deploy`或轻松部署 SNAPSHOT 和版本`mvn release:prepare release:perform`。

这似乎势不可挡，但如果您只是第一次完成这些步骤，就很容易理解。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T13:57:53.217

我建议阅读的第一个内容如下： [https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide) OSS 父级在特殊情况下是有意义的。这取决于你喜欢分发什么样的项目。

**更新**：那个链接现在已经死了。[在此处](http://central.sonatype.org/pages/ossrh-guide.html)查找有关部署到 Sonatype 的帮助。

**更新**：对于 Maven 中央检查：[http ://central.sonatype.org/](http://central.sonatype.org/)

# customization - mediawiki 自定义菜单

> ID：10238373
> 
> 赞同：1
> 
> 时间：2012-04-19T23:38:51.707
> 
> 标签：customization, mediawiki

我正在玩一些维基，我想知道这个自定义菜单是如何制作的：

[共和国维基](http://wiki.erepublik.com/index.php/Template%3aGame_Menu)

是不是有些修改？我只需要提示，一些东西的链接。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:32:58.283

它是一个[模板](http://www.mediawiki.org/wiki/Help%3aTemplates)，使用 wiki 标记和[解析器功能](http://www.mediawiki.org/wiki/Help%3aExtension%3aParserFunctions)制作。您可以通过单击页面顶部的“查看源代码”选项卡来查看生成它的代码。

唉，除非您已经非常熟悉 MediaWiki 模板语法，否则您可能不会发现代码可读性很强——它充满了疯狂的元模板和晦涩难懂的 MediaWiki 功能。但这一切都在那里，如果你能理解它。

# c# - 从文本框填充列表框

> ID：10238376
> 
> 赞同：0
> 
> 时间：2012-04-19T23:39:22.050
> 
> 标签：c#, listbox

我试图让投资的名称出现在股票列表框中，但代码（我在程序前面使用的）似乎不起作用。

```
 namespace JamesClemens_FinalProject
 {
public partial class Form1 : Form
{
    ArrayList account;

    public Form1()
    {
        InitializeComponent();
        account = new ArrayList();
    }

    //here we set up our add customer button from the first tab
    //when the information is filled in and the button is clicked
    //the name on the account will be put in the combobox on the second tab
    private void btnAddCustomer_Click(object sender, EventArgs e)
    {
        try
        {
            CustomerAccount aCustomerAccount = new CustomerAccount(txtAccountNumber.Text, txtCustomerName.Text,
            txtCustomerAddress.Text, txtPhoneNumber.Text);
            account.Add(aCustomerAccount);

            cboClients.Items.Add(aCustomerAccount.GetCustomerName());
            ClearText();
        }
        catch (Exception)
        {
            MessageBox.Show("Make sure every text box is filled in!", "Error", MessageBoxButtons.OK);
        }
    }

    private void ClearText()
    {
        txtAccountNumber.Clear();
        txtCustomerName.Clear();
        txtCustomerAddress.Clear();
        txtPhoneNumber.Clear();
    }

    private void cboClients_SelectedIndexChanged(object sender, EventArgs e)
    {

        CustomerAccount custAccount = account[cboClients.SelectedIndex] as CustomerAccount;
 if(custAccount != null)
 {
     txtAccountNumberTab2.Text = custAccount.GetAccountNumber();
     txtCustomerNameTab2.Text = custAccount.GetCustomerName();
     txtCustomerAddressTab2.Text = custAccount.GetCustomerAddress();
     txtCustomerPhoneNumberTab2.Text = custAccount.GetCustomerPhoneNo();
}
    } 
```

这是给我带来麻烦的代码，它一直说“new Stock”不包含带有四个参数的构造函数。

```
 private void btnAddStock_Click(object sender, EventArgs e)
    {
        try
        {
            Stock aStock = new Stock(txtInvestmentID.Text, txtInvestmentName.Text,      txtInvestmentSymbol.Text,
                int.Parse(txtInvestmentShares.Text));
            account.Add(aStock);
            lstStock.Items.Add(aStock.GetInvestmentName());
            ClearText();
        }
        catch (Exception)
        {
            MessageBox.Show("Make sure every text box is filled in!", "Error", MessageBoxButtons.OK);
        }
    } 
```

有谁知道为什么它不让我使用 Stock 类？

这是您要求的股票类别。public class Stock:Investment { //属性 private double stockPrice;

```
 //constructors
    public Stock()
    {
    }

    public Stock(string anInvestmentID, string anInvestmentName, string anInvestmentSymbol,
        int anInvestmentShare, CustomerAccount aCustomer, double aStockPrice)
        : base(anInvestmentID, anInvestmentName, anInvestmentSymbol, anInvestmentShare)
    {
        SetStockPrice(aStockPrice);
    }

   //
    public Stock(string anInvestmentID, string anInvestmentName, string anInvestmentSymbol,
        int anInvestmentShare, CustomerAccount aCustomer, double aStockPrice)
    {
        SetInvestmentID(anInvestmentID);
        SetInvestmentName(anInvestmentName);
        SetInvestmentSymbol(anInvestmentSymbol);
        SetInvestmentShare(anInvestmentShare);
        SetStockPrice(aStockPrice);
    }

    //set accessors
    public void SetStockPrice(double aStockPrice)
    {
        stockPrice = aStockPrice;
    }

    //get accessors
    public double GetStockPrice()
    {
        return stockPrice;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T23:48:16.040

请实际阅读您收到的错误消息；它使编程变得更加容易。

错误信息很清楚：

```
"new Stock" does not contain a constructor that takes four arguments. 
```

你的类中没有一个构造函数，`Stock`它接受**四个参数**。

查看您在`Stock`课堂上发布的三个构造函数。计算需要传递给每个构造函数的参数数量。有一个只接受四个参数吗？我看到一个不带参数，两个每个都带六个参数。

尝试理解错误消息的实际文本将对您以后编写代码有很大帮助。大多数（不是全部，而是*大多数*）错误消息都有有意义的内容，可以指出实际问题。:)

# java - java.lang.Integer 不能转换为 [Ljava.lang.Object;

> ID：10238382
> 
> 赞同：5
> 
> 时间：2012-04-19T23:40:25.450
> 
> 标签：java, xml-rpc

我目前正在使用 XML-RPC 检索数据，这就是我所拥有的：

```
Object[] params = new Object[]{param1, param2};
Object[] obj = new Object[]{};

try {
    obj = (Object[]) client.execute("method.name", params);
} catch (XmlRpcException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 

return obj; 
```

问题是有时它会返回-1，我会得到这个错误：java.lang.Integer cannot be cast to [Ljava.lang.Object; - 我想知道是否有办法解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T23:41:48.490

您必须在强制转换之前检查返回值的类型。

```
Object result = client.execute(...);
if (result instanceof Integer) {
  Integer intResult = (Integer) result;
  ... handle int result
}    
else if (result instanceof Object[]) {
  obj = (Object[]) result;
}
else {
  ... something else
} 
```

我很想围绕这些 RPC 调用创建一个强类型 API。但话又说回来，也许这就是你已经在做的......

# c# - UseShellExecute 有什么区别？

> ID：10238384
> 
> 赞同：7
> 
> 时间：2012-04-19T23:40:27.377
> 
> 标签：c#, iis-7.5

我正在从我的 IIS Web 应用程序中启动一个小型控制台应用程序。该代码是使用这样的代码从应用程序池中启动的，

```
Process process = new Process();
ProcessStartInfo processStartInfo = new ProcessStartInfo();

processStartInfo.CreateNoWindow = true;
processStartInfo.WindowStyle = ProcessWindowStyle.Hidden;

// ..

process.Start(); 
```

我曾经间歇性地得到一个错误，

```
Win32Exception exception has occured  Message: No such interface supported
ErrorCode: 80004005  NativeErrorCode: 80004002 
```

我证明了当这种情况发生时，控制台应用程序根本不会启动。

我在上面的代码中添加了，

```
processStartInfo.UseShellExecute = false; 
```

问题已经消失（到目前为止，手指交叉）。我了解通过进行此更改，它不需要有效的桌面上下文即可运行，但这究竟意味着什么。如果这意味着如果没有桌面（这适用于与系统用户一起运行的 IIS 应用程序池）我们无法运行上述代码，那么为什么它过去有时会运行而不是每次都失败？

有谁知道为什么这会有所作为？在这种情况下，不支持接口是什么意思？

更新：

我已经接受了人们所说的一切，并且自己做了更多的研究。所以总结一下，如果你有 UseShellExecute = true （这是默认值），那么它将调用 shell32.dll 中的 ShellExecuteEX 来执行该过程。它实际上会这样做（使用 ILSpy 从 System.dll 复制），

```
public bool ShellExecuteOnSTAThread()
{
    if (Thread.CurrentThread.GetApartmentState() != ApartmentState.STA)
    {
        ThreadStart start = new ThreadStart(this.ShellExecuteFunction);
        Thread thread = new Thread(start);
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();
        thread.Join();
    }
    else
    {
        this.ShellExecuteFunction();
    }
    return this._succeeded;
} 
```

如果你有 UseShellExecute = false 那么它将调用 kernel32.dll 中的 CreateProcess 来启动进程。

我想知道上面的代码 ShellExecuteOnSTAThread 创建一个新线程是否有问题？应用程序池是否会在线程上达到某些限制，从而间接导致 Win32Exception？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T23:57:14.650

当某些 COM 对象未注册时，可能会发生此错误，尽管对我来说为什么它是间歇性的有点神秘。

不过公平地说，从 IIS 中生成本地可执行文件是一件非常罕见的事情，它实际上可能会导致安全问题，或者如果命令由于某种原因失败并且没有返回控制权，至少会导致 IIS 出现问题到系统。

实际上，此类事情的最佳实践是记录您需要在注册表、数据库或某种设置文件中发生的操作，并让您的本地应用程序作为计划任务或 Windows 服务运行。

作为参考，UseShellExec 说明内核是否应直接启动 exe，或者是否应要求资源管理器启动文件。

当没有人登录时，您可能会遇到此问题，因此不一定要加载 shell 来启动 exe。

最终，您当前尝试做的是生产中的一件坏事-当它尝试启动此 exe 时，您无法保证 IIS 的状态，因此，IIS 不是 Shell。

# android - 为什么Android模拟器浏览器在我输入url并按回车时只是退出到主屏幕？

> ID：10238385
> 
> 赞同：5
> 
> 时间：2012-04-19T23:40:34.463
> 
> 标签：android, emulation

几天前，我在工作笔记本电脑上安装了 Android SDK。我为 4.0.3 创建了一个 AVD。我在命令行上使用代理信息运行它。当它启动时，我运行了浏览器应用程序，它成功地显示了 Google 主页。然后我单击浏览器应用程序的 URL 字段并输入与网站关联的公共主机名，然后在我的 PC 键盘上按 Enter。结果是浏览器应用程序刚刚退出到主屏幕。我尝试了几个不同的主机名（www.cnn.com 就是其中之一），结果相同。

我错过了什么？

当我在新 URL 上按 Enter 时，我得到正确的 logcat 输出如下：

```
I/ActivityThread(  485): Pub com.android.quicksearchbox.google:com.android.quicksearchbox.google.GoogleSuggestionProvider
I/ActivityThread(  485): Pub com.android.quicksearchbox.shortcuts: com.android.quicksearchbox.ShortcutsProvider
D/dalvikvm(  444): GC_CONCURRENT freed 243K, 4% free 10706K/11079K, paused 5ms+5ms
D/dalvikvm(  132): GC_CONCURRENT freed 374K, 30% free 9903K/14023K, paused 5ms+14ms
F/libc    (  444): Fatal signal 11 (SIGSEGV) at 0x0000001c (code=1)
I/DEBUG   (   34): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (   34): Build fingerprint: 'generic/sdk/generic:4.0.4/MR1/302030:eng/test-keys'
I/DEBUG   (   34): pid: 444, tid: 468  >>> com.android.browser <<<
I/DEBUG   (   34): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0000001c
I/DEBUG   (   34):  r0 00000000  r1 4a19845c  r2 00000000  r3 003d3ba8
I/DEBUG   (   34):  r4 002fdac0  r5 00000000  r6 4a198480  r7 ffffffff
I/DEBUG   (   34):  r8 00000001  r9 00000001  10 00192110  fp 4a198c04
I/DEBUG   (   34):  ip 48696d20  sp 4a198428  lr 482e66df  pc 482e55d2  cpsr 60000030
I/DEBUG   (   34):  d0  00000000cf000000  d1  0000000000000000
I/DEBUG   (   34):  d2  3ff0000000000000  d3  0000000000000000
I/DEBUG   (   34):  d4  01e1338000000000  d5  4129f23400000000
I/DEBUG   (   34):  d6  0000000000000000  d7  0000000000000000
I/DEBUG   (   34):  d8  0000000000000000  d9  0000000000000000
I/DEBUG   (   34):  d10 0000000000000000  d11 0000000000000000
I/DEBUG   (   34):  d12 0000000000000000  d13 0000000000000000
I/DEBUG   (   34):  d14 0000000000000000  d15 0000000000000000
I/DEBUG   (   34):  scr 60000013
I/DEBUG   (   34): 
I/DEBUG   (   34):          #00  pc 003865d2  /system/lib/libwebcore.so
I/DEBUG   (   34):          #01  pc 003876da  /system/lib/libwebcore.so
I/DEBUG   (   34):          #02  pc 00387aa6  /system/lib/libwebcore.so
I/DEBUG   (   34):          #03  pc 00172072  /system/lib/libwebcore.so
I/DEBUG   (   34):          #04  pc 00161898  /system/lib/libwebcore.so
I/DEBUG   (   34):          #05  pc 00165dc2  /system/lib/libwebcore.so
I/DEBUG   (   34):          #06  pc 0016b6ba  /system/lib/libwebcore.so
I/DEBUG   (   34):          #07  pc 0016ef24  /system/lib/libwebcore.so
I/DEBUG   (   34):          #08  pc 0016ede0  /system/lib/libwebcore.so
I/DEBUG   (   34):          #09  pc 0016191c  /system/lib/libwebcore.so
I/DEBUG   (   34):          #10  pc 00164e30  /system/lib/libwebcore.so
I/DEBUG   (   34):          #11  pc 00166fa2  /system/lib/libwebcore.so
I/DEBUG   (   34):          #12  pc 001670ae  /system/lib/libwebcore.so
I/DEBUG   (   34):          #13  pc 0016cea6  /system/lib/libwebcore.so
I/DEBUG   (   34):          #14  pc 0016d35a  /system/lib/libwebcore.so
I/DEBUG   (   34):          #15  pc 0026c0f2  /system/lib/libwebcore.so
I/DEBUG   (   34):          #16  pc 0016d7f8  /system/lib/libwebcore.so
I/DEBUG   (   34):          #17  pc 00167250  /system/lib/libwebcore.so
I/DEBUG   (   34):          #18  pc 0016740a  /system/lib/libwebcore.so
I/DEBUG   (   34):          #19  pc 00167496  /system/lib/libwebcore.so
I/DEBUG   (   34):          #20  pc 001674c2  /system/lib/libwebcore.so
I/DEBUG   (   34):          #21  pc 0027bafe  /system/lib/libwebcore.so
I/DEBUG   (   34):          #22  pc 0001ec30  /system/lib/libdvm.so (dvmPlatformInvoke)
I/DEBUG   (   34):          #23  pc 000590ce  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread)
I/DEBUG   (   34):          #24  pc 0004cbe8  /system/lib/libdvm.so (_Z21dvmCheckCallJNIMethodPKjP6JValuePK6MethodP6Thread)
I/DEBUG   (   34):          #25  pc 00030a4c  /system/lib/libdvm.so
I/DEBUG   (   34):          #26  pc 000341fc  /system/lib/libdvm.so (_Z12dvmInterpretP6ThreadPK6MethodP6JValue)
I/DEBUG   (   34):          #27  pc 0006ca8e  /system/lib/libdvm.so (_Z14dvmCallMethodVP6ThreadPK6MethodP6ObjectbP6JValueSt9__va_list)
I/DEBUG   (   34):          #28  pc 0006cab0  /system/lib/libdvm.so (_Z13dvmCallMethodP6ThreadPK6MethodP6ObjectP6JValuez)
I/DEBUG   (   34):          #29  pc 0005fbd0  /system/lib/libdvm.so
I/DEBUG   (   34):          #30  pc 00012e48  /system/lib/libc.so (__thread_entry)
I/DEBUG   (   34):          #31  pc 00012998  /system/lib/libc.so (pthread_create)
I/DEBUG   (   34): 
I/DEBUG   (   34): code around pc:
I/DEBUG   (   34): 482e55b0 ff1af59b 1d38e003 f617a909 9809fb11  ......8.........
I/DEBUG   (   34): 482e55c0 ff06f59b e8bdb00b bf008ff0 680bb507  ...............h
I/DEBUG   (   34): 482e55d0 61c32200 600a680b f841a902 f7ff3d04  .".a.h.`..A..=..
I/DEBUG   (   34): 482e55e0 9801ff43 fef4f59b bf00bd0e 4604b510  C..............F
I/DEBUG   (   34): 482e55f0 b1286840 30b0f890 4621b913 fa48f000  @h(....0..!F..H.
I/DEBUG   (   34): 
I/DEBUG   (   34): code around lr:
I/DEBUG   (   34): 482e66bc 682380ac 685a4620 e0d44790 30bcf8d4  ..#h FZh.G.....0
I/DEBUG   (   34): 482e66cc a90ab153 f8416d60 f8c43d04 f7fe20bc  S...`mA..=... ..
I/DEBUG   (   34): 482e66dc 9809ff77 fe76f59a 6d606be5 d1014285  w.....v..k`m.B..
I/DEBUG   (   34): 482e66ec e0022500 f5db4628 6d63ff4b 2200a90a  .%..(F..K.cm..."
I/DEBUG   (   34): 482e66fc f8414620 65623d0c fb86f7ff f5e99807   FA..=be........
I/DEBUG   (   34): 
I/DEBUG   (   34): stack:
I/DEBUG   (   34):     4a1983e8  00000005  
I/DEBUG   (   34):     4a1983ec  001eb800  [heap]
I/DEBUG   (   34):     4a1983f0  48287dad  /system/lib/libwebcore.so
I/DEBUG   (   34):     4a1983f4  0044edf0  [heap]
I/DEBUG   (   34):     4a1983f8  0048b9f0  [heap]
I/DEBUG   (   34):     4a1983fc  002c07a8  [heap]
I/DEBUG   (   34):     4a198400  002fdd20  [heap]
I/DEBUG   (   34):     4a198404  48082143  /system/lib/libwebcore.so
I/DEBUG   (   34):     4a198408  00000005  
I/DEBUG   (   34):     4a19840c  48081ebd  /system/lib/libwebcore.so
I/DEBUG   (   34):     4a198410  0048b9f0  [heap]
I/DEBUG   (   34):     4a198414  48287dad  /system/lib/libwebcore.so
I/DEBUG   (   34):     4a198418  0044edf0  [heap]
I/DEBUG   (   34):     4a19841c  00000000  
I/DEBUG   (   34):     4a198420  df0027ad  
I/DEBUG   (   34):     4a198424  00000000  
I/DEBUG   (   34): #00 4a198428  00000000  
I/DEBUG   (   34):     4a19842c  4a19845c  
I/DEBUG   (   34):     4a198430  00000000  
I/DEBUG   (   34):     4a198434  482e66df  /system/lib/libwebcore.so
I/DEBUG   (   34): #01 4a198438  00000001  
I/DEBUG   (   34):     4a19843c  00000000  
I/DEBUG   (   34):     4a198440  48287ea9  /system/lib/libwebcore.so
I/DEBUG   (   34):     4a198444  00000000  
I/DEBUG   (   34):     4a198448  00000001  
I/DEBUG   (   34):     4a19844c  482e5771  /system/lib/libwebcore.so
I/DEBUG   (   34):     4a198450  00000001  
I/DEBUG   (   34):     4a198454  00000000  
I/DEBUG   (   34):     4a198458  002fdac0  [heap]
I/DEBUG   (   34):     4a19845c  003d3ba8  [heap]
I/DEBUG   (   34):     4a198460  4a198480  
I/DEBUG   (   34):     4a198464  002fdac0  [heap]
I/DEBUG   (   34):     4a198468  00000000  
I/DEBUG   (   34):     4a19846c  4a198480  
I/DEBUG   (   34):     4a198470  002b01a0  [heap]
I/DEBUG   (   34):     4a198474  482e6aab  /system/lib/libwebcore.so
D/Zygote  (   37): Process 444 terminated by signal (11)
I/ActivityManager(   80): Process com.android.browser (pid 444) has died.
I/WindowManager(   80): WIN DEATH: Window{4158a718 com.android.browser/com.android.browser.BrowserActivity paused=false}
W/NetworkManagementSocketTagger(   80): setKernelCountSet(10002, 0) failed with errno -2
W/ActivityManager(   80): Force removing ActivityRecord{41402f88 com.android.browser/.BrowserActivity}: app died, no saved state
W/NetworkManagementSocketTagger(   80): setKernelCountSet(10013, 1) failed with errno -2
I/BootReceiver(   80): Copying /data/tombstones/tombstone_06 to DropBox (SYSTEM_TOMBSTONE)
D/dalvikvm(   80): GC_FOR_ALLOC freed 237K, 6% free 12091K/12743K, paused 104ms
D/dalvikvm(   80): GC_FOR_ALLOC freed 873K, 12% free 11461K/12999K, paused 107ms
I/Process (   80): Sending signal. PID: 175 SIG: 3
I/dalvikvm(  175): threadid=3: reacting to signal 3
I/dalvikvm(  175): Wrote stack traces to '/data/anr/traces.txt'
W/InputManagerService(   80): Got RemoteException sending setActive(false) notification to pid 444 uid 10002
D/dalvikvm(   80): GC_CONCURRENT freed 318K, 11% free 11688K/12999K, paused 6ms+14ms
W/GoogleSearch(  485): Error
W/GoogleSearch(  485): java.net.SocketTimeoutException
W/GoogleSearch(  485):  at java.net.PlainSocketImpl.read(PlainSocketImpl.java:491) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:46:35.017

您说您“在命令行上使用代理信息运行它”。我建议您在不通过命令行设置代理的情况下正常运行模拟器。例如

模拟器 -avd avdname -partition-size 1024

稍后，在成功启动Android后，进入菜单->设置->无线和网络->更多->移动网络->接入点名称在模拟器上默认配置为“TelKila”。单击它并在此处设置代理、端口等。

现在尝试上网并与我们分享结果。

# django - 在 ModelChoiceField 中使用 values_list 进行 Django 表单验证

> ID：10238386
> 
> 赞同：0
> 
> 时间：2012-04-19T23:40:38.773
> 
> 标签：django, forms

我有这样的表格：

```
class SearchForm(forms.Form):
    genus = forms.RegexField(
        regex=r'^[a-zA-Z]+$',
        required=False,
    )  
    species = forms.RegexField(
        regex=r'^[a-zA-Z]+$',
        required=False,
    )
    island_group = forms.ModelChoiceField(
        required=False,
        queryset=Locality.objects.values_list('islandgroup', flat=True).distinct('islandgroup'), 
```

现在，`island_group`由于我没有返回模型对象，因此我的表单在字段上的验证失败。我需要返回`values_list`以获取不同的条目。这个表格还有更多内容，这就是我不想使用模型表格的原因。

我的问题是：让我的表单验证的最佳方法是什么？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:09:43.087

为什么不重写保存方法：在实际保存之前调用一些验证函数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-14T14:14:39.720

我有同样的问题，我现在的解决方案是使用 ChoiceField 而不是 ModelChoiceField。我相信这是有道理的，因为我们不希望用户选择模型实例，但是在一个表列中不同的属性值和相同的属性很可能对应于多个模型实例。

```
class SearchForm(forms.Form):
    # get the distinct attributes from one column
    entries = Locality.objects.values_list('islandgroup', flat=True).distinct('islandgroup')
    # change the entries to a valid format for choice field
    locality_choices = [(e, e) for e in entries]
    # the actual choice field
    island_group = forms.ChoiceField(
        required=False,
        choices=locality_choices) 
```

这样，Django 的内置验证就完全符合我们的要求，即检查是否从一列中选择了所有可能属性集合中的一个成员。

# php - CakePHP 2.1 Ajax 验证错误

> ID：10238392
> 
> 赞同：0
> 
> 时间：2012-04-19T23:41:27.630
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

我正在尝试使用在 CakePHP 2.1 中为联系表单工作的 Ajax 和 jQuery 验证错误。在名称字段模糊时，调用 js 函数：

```
$(document).ready(function(){

$('#name').blur(function(){
    $.post(
        '/Cake_ajax/Contacts/validate_form',
        { field: $(this).attr('id'), value: $(this).val() },
        handleNameValidation
    );
});

function handleNameValidation(error){
    if(error.length > 0){
        if($('#name-notEmpty').length == 0){
            $('#name').after($('<div id="name-notEmpty" class="error-message">' + error + '</div>'));
        }
    }else{
        $('#name-notEmpty').remove();
    }
}
}); 
```

javascript 在我的控制器中调用 validate_form 函数：

```
public function validate_form(){
        if($this->RequestHandler->isAjax()){
            $this->request->data['Contact'][$this->request->params['form']['field']] = $this->request->params['form']['value'];
            $this->Contact->set($this->request->data);
            if($this->Contact->validates()){
                $this->autorender = FALSE; // don't render a view
            }else{
                $error = $this->validateErrors($this->Contact);
                $this->set('error', $error[$this->request->params['form']['field']]);
            }
        }
    } 
```

在我看来，当错误被调用时，我遇到了几个错误：

```
Undefined index: form [APP\Controller\ContactsController.php
Undefined index: form [APP\Controller\ContactsController.php 
```

我束手无策，而且我对 CakePHP 还很陌生。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:50:05.350

尝试`$this->request->params['field']`代替`$this->request->params['form']['field']`.

或者在你检查到之后`isAjax()`，尝试对 var_dump 进行操作`$this->request->params`。根据您得到的错误，表单索引不存在于`$this->request->params`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T10:33:42.433

在您的控制器中，您应该有如下内容。Cake 2.0 替换了 RequestHandlerComponent 和 Controller 中的许多特性。它还将所有地方的 $this->params 数组和旧的 $this->data 替换为 $this->request->data，类似的东西。您可以访问[迁移指南](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html#cakerequest)。

```
 public function validate_form(){
        if($this->RequestHandler->isAjax()){
           $this->request->data['Contact'][$this->request['form']['field']] = $this->request['form']['value'];
           $this->Contact->set($this->request->data);
           if($this->Contact->validates()){
              $this->autorender = FALSE; // don't render a view
           }else{
             $error = $this->validateErrors($this->Contact);
             // didn't validate logic
             $this->set('error',$this->Contact->validationErrors[$this->request['data']['field']][0]);
          }
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:34:59.670

如果您想在使用标准表单和 Cake FormHelper 时模拟 POST，您也可以简单地命名发布的参数，就像 FormHelper 命名输入字段一样。

```
$j.post(
    '/Cake_ajax/Contacts/validate_form',
    { "data[Contact][" + $(this).attr('id') + "]": $(this).val() },
    handleNameValidation
); 
```

这会自动填充`$this->request->data['Contact']['name']`，你可以评论这一行：

```
//$this->request->data['Contact'][$this->request->params['form']['field']] = $this->request->params['form']['value']; 
```

# mysql - OSX Lion Homebrew“brew install mysql -v”问题

> ID：10238393
> 
> 赞同：0
> 
> 时间：2012-04-19T23:41:32.403
> 
> 标签：mysql, ruby-on-rails, macos, installation, homebrew

我正在使用 home brew 在本地安装 mysql 并且它一直在爆炸。当我运行 brew doctor 时，我没有收到任何错误，尝试安装 mysql 的完整详细输出是[https://gist.github.com/2424859](https://gist.github.com/2424859)，结尾为：

```
MAKEFLAGS: -j4
Error: Failed executing: cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/Cellar/mysql/5.5.20 -DMYSQL_DATADIR=/usr/local/var/mysql -DINSTALL_MANDIR=/usr/local/Cellar/mysql/5.5.20/share/man -DINSTALL_DOCDIR=/usr/local/Cellar/mysql/5.5.20/share/doc/mysql -DINSTALL_INFODIR=/usr/local/Cellar/mysql/5.5.20/share/info -DINSTALL_MYSQLSHAREDIR=share/mysql -DWITH_SSL=yes -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DSYSCONFDIR=/usr/local/etc -DWITH_UNIT_TESTS=OFF -DWITH_READLINE=yes (mysql.rb:77)
These existing issues may help you:
    https://github.com/mxcl/homebrew/issues/8063
    https://github.com/mxcl/homebrew/issues/9142
    https://github.com/mxcl/homebrew/issues/11710
    https://github.com/mxcl/homebrew/issues/11754
Otherwise, please report the bug:
    https://github.com/mxcl/homebrew/wiki/reporting-bugs 
```

. 我正在运行 osx lion，完整的 xcode 4.3.2。

关于主要问题是什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:10:29.797

在自制github问题上发帖后：https://github.com/mxcl/homebrew/issues/11762

这是我解决问题的方法：

```
cd /usr/local
brew uninstall cmake
git checkout 948c2769 Library/Formula/cmake.rb
brew install mysql 
```

# c# - 如何将数据从 WPF 应用程序发送到 MVC3 控制器操作方法？

> ID：10238394
> 
> 赞同：0
> 
> 时间：2012-04-19T23:41:46.723
> 
> 标签：c#, asp.net-mvc-3, rest, .net-4.0

这是我在客户端 WPF 端运行的代码：

```
string path = @"C:\Users\Sergio\Desktop\test3.log";

// A List<DataObj>
var parsedData = LogParser.Parse(path); 
```

我想将这个复杂的对象发送到我的 Web 应用程序 (MVC3) 上的 Action Method 并用它做一些事情。请注意，这是一个完全独立的项目。

这是我创建的 ActionMethod：

```
[HttpPost]
public class MicroOracleController : Controller
{
    public ActionResult UploadData(List<DataObj> matches)
    {
        //Do something here.

        return RedirectToAction("Index", "Home");
    }
} 
```

在客户端，如何调用此 ActionMethod？

我试过了：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    string path = @"C:\Users\Sergio\Desktop\test3.log";
    var parsedMatches = LogParser.Parse(path);

    // Create a request using a URL that can receive a post. 
    WebRequest request = WebRequest.Create("http://localhost:35082/MicroOracle/UploadData/");
    // Set the Method property of the request to POST.
    request.Method = "POST";
    // Create POST data and convert it to a byte array.
    byte[] byteArray = Encoding.UTF8.GetBytes(parsedMatches); //I can't do this with a complex object.
    // Set the ContentType property of the WebRequest.
    request.ContentType = "application/x-www-form-urlencoded";
    // Set the ContentLength property of the WebRequest.
    request.ContentLength = byteArray.Length;
    // Get the request stream.
    Stream dataStream = request.GetRequestStream();
    // Write the data to the request stream.
    dataStream.Write(byteArray, 0, byteArray.Length);
    // Close the Stream object.
    dataStream.Close();
    // Get the response.
    WebResponse response = request.GetResponse();
    // Display the status.
    Console.WriteLine(((HttpWebResponse)response).StatusDescription);
    // Get the stream containing content returned by the server.
    dataStream = response.GetResponseStream();
    // Open the stream using a StreamReader for easy access.
    StreamReader reader = new StreamReader(dataStream);
    // Read the content.
    string responseFromServer = reader.ReadToEnd();
    // Display the content.
    Console.WriteLine(responseFromServer);
    // Clean up the streams.
    reader.Close();
    dataStream.Close();
    response.Close();
} 
```

但我不能`GetBytes`为一个复杂的对象。

# clojure - 除非使用 Leiningen REPL，否则 Clojure jdbc create-table 语句不会运行

> ID：10238399
> 
> 赞同：8
> 
> 时间：2012-04-19T23:42:21.797
> 
> 标签：clojure, hsqldb, leiningen

我有一个小的 Clojure 程序，它使用[Clojure JDBC](http://clojure.github.com/java.jdbc/)工具在 HSQL 数据库中创建一个表。但是，如果我从 Leiningen 的 REPL 运行它，它似乎只会实际创建表。`lein run`如果我使用或从我的 IDE (IntelliJ)运行代码，它不会创建表。没有报告异常。在这两种情况下，输出都只是“(0)”。

这是代码片段：

```
(ns tramway.core
  (:require [clojure.java.io :as io]
            [clojure.java.jdbc :as sql]))

(def hsql-db {:subprotocol "hsqldb"
              :subname "file:/tmp/tramwaydb"
              :user "SA"
              :password ""})

(defn -main []
  (println (sql/with-connection hsql-db (sql/create-table
                                 :footfall
                                 [:id "INTEGER" "GENERATED ALWAYS AS IDENTITY(START WITH 1)"]
                                 [:sample_date "DATE"]
                                 [:exhibition "varchar(255)"])))) 
```

由于我使用的是 Leiningen，所以这是我的`project.clj`：

```
(defproject tramway "1.0.0-SNAPSHOT"
  :description "Description here"
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [org.clojure/java.jdbc "0.1.4"]
                 [org.hsqldb/hsqldb "2.2.8"]]
  :main tramway.core) 
```

如果我做：

```
$ lein repl

tramway.core=> (-main)
(0)
nil 
```

然后检查`/tmp/tramway.log`我可以看到`CREATE TABLE`执行成功。

但是，如果我这样做：

```
$ rm -rf /tmp/tramway.*
$ lein run
(0) 
```

然后检查同一个文件，它是空的。它*确实*创建了`.log`、`.properties`和`.script`文件。除`.log`文件外，所有内容都有内容；只是没有`CREATE TABLE`运行的记录。

我究竟做错了什么？无论我是从 REPL 运行我的 (-main) 函数还是让 Leiningen 自动运行它，我都希望得到相同的结果。

我还尝试将表创建从`-main`函数中取出，并通过我的 IDE 将其作为脚本运行，但我仍然得到同样的坏结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T10:58:48.490

这是一个常见的 HSQLDB 配置问题。

HSQLDB 的默认配置不适合测试使用。因此，它会将 .log 条目的写入和同步延迟 500 毫秒，并且在连接关闭时不会关闭数据库。在您的 URL 中尝试以下任一设置：

```
:subname "file:/tmp/tramwaydb;hsqldb.write_delay=false" 
```

或者

```
:subname "file:/tmp/tramwaydb;shutdown=true" 
```

在此处查看各种选项：http: [//hsqldb.org/doc/2.0/guide/dbproperties-chapt.html](http://hsqldb.org/doc/2.0/guide/dbproperties-chapt.html)

# java - 添加列时的Jtable问题

> ID：10238401
> 
> 赞同：2
> 
> 时间：2012-04-19T23:42:39.320
> 
> 标签：java, swing

这是一个有点愚蠢的问题，但我开始使用 java swing 并且一直做得很好，但我真的不能让 JTable 出现在我的表单中，到目前为止出现了一个空白方块但根本没有列，这是一个片段：

```
DefaultTableModel modelo = new DefaultTableModel();
modelo.setColumnCount(1);
tblTrans = new JTable(modelo);
modelo.addColumn("Prueba");
tblTrans.revalidate();
tblTrans.setBounds(316, 47, 248, 243);
contentPane.add(tblTrans); 
```

以下是完整的代码，以备您需要时使用：

```
package mx.adk.grafos;

import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.table.DefaultTableModel;
import javax.swing.DefaultListModel;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.JButton;
import javax.swing.ListSelectionModel;

import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JList;
import javax.swing.JTable;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.Set;
import java.util.TreeSet;

public class GUI extends JFrame implements ActionListener {

    private JPanel contentPane;
    private JTextField txtEstados;
    private JTextField txtLenguaje;
    private JTextField txtFinal;
    private JTable tblTrans;
    private JList lstEstados;
    private JList lstLenguaje;

    DefaultListModel listaEstados;
    TreeSet<String> setEstados = new TreeSet<String>();

    DefaultListModel listaLenguaje;
    TreeSet<Character> setLenguaje = new TreeSet<Character>();

    /*
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    GUI frame = new GUI();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
    */

    public void actionPerformed(ActionEvent e) {
        String comando = e.getActionCommand();
        if(comando.equalsIgnoreCase("btnAEstados")){
            String tmp = txtEstados.getText();
            if(setEstados.add(tmp)){
                listaEstados.addElement(tmp);
            }
            return;
        }
        if(comando.equalsIgnoreCase("btneestados")){
            String tmp = (String) lstEstados.getSelectedValue();
            setEstados.remove(tmp);
            listaEstados.removeElement(tmp);
        }
        if(comando.equalsIgnoreCase("btnALenguaje")){
            char tmp = txtLenguaje.getText().charAt(0);
            if(setLenguaje.add(tmp)){
                listaLenguaje.addElement(tmp);
            }
            return;
        }
        if(comando.equalsIgnoreCase("btnelenguaje")){
            char tmp = (char) lstLenguaje.getSelectedValue().toString().charAt(0);
            setLenguaje.remove(tmp);
            listaLenguaje.removeElement(tmp);
        }
    }

    public GUI() {
        setTitle("Automata finito no deterministico");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 599, 368);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

        txtEstados = new JTextField();
        txtEstados.setBounds(26, 82, 72, 28);
        contentPane.add(txtEstados);
        txtEstados.setColumns(10);

        JButton btnAEstados = new JButton(">>");
        btnAEstados.setBounds(103, 69, 51, 29);
        contentPane.add(btnAEstados);
        btnAEstados.addActionListener(this);
        btnAEstados.setActionCommand("btnAEstados");

        listaEstados = new DefaultListModel();
        lstEstados = new JList(listaEstados);
        lstEstados.setBounds(154, 46, 105, 109);
        contentPane.add(lstEstados);
        lstEstados.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        JLabel lblEstados = new JLabel("Estados");
        lblEstados.setBounds(83, 19, 59, 16);
        contentPane.add(lblEstados);

        JButton btnEEstados = new JButton("<<");
        btnEEstados.setBounds(103, 96, 51, 29);
        contentPane.add(btnEEstados);
        btnEEstados.addActionListener(this);
        btnEEstados.setActionCommand("btnEEstados");

        JButton btnELenguaje = new JButton("<<");
        btnELenguaje.setBounds(103, 231, 51, 29);
        contentPane.add(btnELenguaje);
        btnELenguaje.addActionListener(this);
        btnELenguaje.setActionCommand("btnELenguaje");

        JButton btnALenguaje = new JButton(">>");
        btnALenguaje.setBounds(103, 204, 51, 29);
        contentPane.add(btnALenguaje);
        btnALenguaje.addActionListener(this);
        btnALenguaje.setActionCommand("btnALenguaje");

        txtLenguaje = new JTextField();
        txtLenguaje.setColumns(10);
        txtLenguaje.setBounds(26, 217, 72, 28);
        contentPane.add(txtLenguaje);

        listaLenguaje = new DefaultListModel();
        lstLenguaje = new JList(listaLenguaje);
        lstLenguaje.setBounds(154, 181, 105, 109);
        contentPane.add(lstLenguaje);
        lstLenguaje.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        JLabel lblLenguaje = new JLabel("Lenguaje");
        lblLenguaje.setBounds(95, 161, 59, 16);
        contentPane.add(lblLenguaje);

        txtFinal = new JTextField();
        txtFinal.setText("QFinal");
        txtFinal.setColumns(10);
        txtFinal.setBounds(26, 298, 72, 28);
        contentPane.add(txtFinal);

        DefaultTableModel modelo = new DefaultTableModel();
        modelo.setColumnCount(1);
        tblTrans = new JTable(modelo);
        modelo.addColumn("Prueba");
        tblTrans.revalidate();
        tblTrans.setBounds(316, 47, 248, 243);
        contentPane.add(tblTrans);

        JLabel lblTransiciones = new JLabel("Transiciones");
        lblTransiciones.setBounds(394, 19, 89, 16);
        contentPane.add(lblTransiciones);

        JButton btnAceptar = new JButton("Aceptar");
        btnAceptar.setBounds(476, 311, 117, 29);
        contentPane.add(btnAceptar);
        btnAceptar.addActionListener(this);
        btnAceptar.setActionCommand("btnAceptar");
    }
} 
```

我想要完成的是为给定的每个“Estado”添加一列，该程序是关于非确定性自动机的，并为给定的每个“Lenguaje”添加一行，这样我就可以制作转换矩阵，我知道如何制作每个按下按钮的时间，但看起来好像正在添加列，但它根本不可见，只是一个空白方块。

更正建议：

```
DefaultTableModel modelo = new DefaultTableModel();
        modelo.setColumnCount(1);
        tblTrans = new JTable(modelo);
        panel.add(tblTrans);
        panel.setBounds(316, 47, 248, 243);
        modelo.addColumn("Test");
        tblTrans.revalidate();
        contentPane.add(panel); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T23:58:36.223

关于滚动窗格，我是对的。这对我有用：

```
 DefaultTableModel modelo = new DefaultTableModel();
    modelo.setColumnCount(1);
    modelo.addColumn("Prueba");
    tblTrans = new JTable(modelo);
    JScrollPane sPane = new JScrollPane(tblTrans);
    sPane.setBounds(316, 47, 248, 243);
    contentPane.add(sPane); 
```

# macos - NSOutlineTableView 在最后一个元素后崩溃

> ID：10238404
> 
> 赞同：0
> 
> 时间：2012-04-19T23:43:00.640
> 
> 标签：macos, cocoa, exc-bad-access, nstableview, nsoutlineview

我有一个 NSOutlineTableView 显示分层 HTML 数据，从 HTML 解析器加载（每个 HTML 标记是一个具有属性的对象和一个它的子元素数组）。由于某种原因，此代码在运行完所有对象后崩溃。也就是说，我看到 HTML 中所有对象的 NSLog() 结果，但之后代码崩溃：

```
- (id)outlineView:(NSOutlineView *)outlineView child:(NSInteger)index ofItem:(id)item{

    if (item==nil) {
        item=rootNode;
    }
    NSLog(@"looking for child %d of element %@",index, item);
    return [[item children] objectAtIndex:index];

}

- (NSInteger)outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(id)item{

    if (item==nil) {
        item=rootNode;
    }
    NSLog(@"Element %@ has %i children", item, [[item children] count]);
    return [[item children ]count];

}

- (BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item{

    NSLog(@"is item %@ with %@ children expandable?",item,[item children]);
    return [[item children] count]>0;

}

- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item{

    if (![item isKindOfClass:[HTMLNode class]]) {   //////CRASH ON THIS LINE (or at least in this function)
        return @"";
    }

    NSLog(@"Object value for: %@",item);

    return [NSString stringWithFormat:@"%@",[item description]];

} 
```

这是一个运行示例： HTML 内容： `@"<ul></ul><span class='spantext1'></span><span class='spantext2'></span>";`

输出：

```
Element <HTMLNode: 0x7fb9234462a0> body has 3 children

looking for child 0 of element <HTMLNode: 0x7fb9234462a0> body

is item <HTMLNode: 0x7fb923437d40> ul with (
) children expandable?

Object value for: <HTMLNode: 0x7fb923437d40> ul

looking for child 1 of element <HTMLNode: 0x7fb9234462a0> body

is item <HTMLNode: 0x7fb9249255c0> span with (
) children expandable?

Object value for: <HTMLNode: 0x7fb9249255c0> span

looking for child 2 of element <HTMLNode: 0x7fb9234462a0> body

is item <HTMLNode: 0x7fb92491e1d0> span with (
) children expandable?

Object value for: <HTMLNode: 0x7fb92491e1d0> span
(lldb) (crash with EXC_BAD_ACCESS) 
```

这是调用堆栈的顶部：

```
objc_msgSend() selector name: isKindOfClass:
objc[23702]: garbage collection is OFF

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x00007fff846e7110 objc_msgSend_vtable4 + 16
1   com.303DesignLabs.SiteStats     0x0000000109dd44fd -[HTMLTreeOutlineController outlineView:objectValueForTableColumn:byItem:] + 189 (HTMLTreeOutlineController.m:51) 
```

在所有数据都运行完之后，它几乎看起来好像在尝试再次运行 objectValueForTableColumn。就像我说的那样，崩溃发生在整个对象层次结构运行之后（终端输出证明了这一点）。无论如何，在崩溃之前，tableView 会在屏幕上出现一瞬间，所有三个元素都在各自的行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:00:05.657

" `EXC_BAD_ACCESS`" 通常意味着你正在尝试访问一个 nil 对象或指针。

从我在您的代码中看到的内容来看，您似乎总是假设“ `[item children]`”不是零。

如果 " `[item children]`" 没有孩子会怎样？结果是 NULL 吗？你应该调用`objectAtIndex`还是`count`在一个 NULL 对象上？我的猜测是否定的。

如果任何给定项没有子项，您可能应该为每个函数返回一些合理的值。

# sqlite - Sqlite：用两个不同的“where”查询同一张表两次

> ID：10238407
> 
> 赞同：1
> 
> 时间：2012-04-19T23:43:32.900
> 
> 标签：sqlite

如何组合同一个表的两个选择查询，它们在 Sqlite 中有两个不同的位置？

我有一个超过 10k 行的表。两个示例行如下所示：

```
year | project | finance | flow
1990 | water   | 300500  | grant
1999 | energy  | 200500  | loan 
```

我的尝试不起作用：

```
SELECT sum(finance), (select sum(finance) from table where flow = grant) 
FROM table where flow = loan group by year 
```

结果应按年份分组所有结果，并在赠款列和贷款列中列出总和（预算）。

```
year | grant | loan
1990 | 62662 | 383983
1991 | 28928 | 278272 
```

更新：第一个示例与我的用例不正确对应。我不得不改变它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T00:48:47.930

在这种情况下，使用 CASE：

```
 SELECT year, 
        SUM(CASE WHEN flow = 'grant' THEN finance ELSE 0 END) AS grant_total, 
        SUM(CASE WHEN flow = 'loan' THEN finance ELSE 0 END) AS loan_total
 FROM your_table 
 GROUP BY year 
```

逻辑与您概述的逻辑不同（它是带有单个 WHERE 子句的单个 SELECT），但它将有效地将您需要的数据从行转移到列。

# ruby-on-rails - 如何在不关闭应用程序的情况下推送到 Heroku

> ID：10238409
> 
> 赞同：6
> 
> 时间：2012-04-19T23:44:04.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

只是想知道每个人如何在 Heroku 上将更新推送到他们的生产服务器，而不会使应用程序停机几秒钟？

推送到 Heroku（尤其是使用 Unicorn 之类的东西）需要一段时间才能加载 Web 应用程序。特别是当有最终用户试图访问该站点时。它们最终有 503 页。加载 Unicorn 进程最多需要 30 秒到一分钟。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T23:35:22.120

要完成此任务，您需要做两件事，而且这不是微不足道的。

1) 迁移需要向后兼容（即，在应用程序运行时运行）。请参阅这篇文章：http: [//pedro.herokuapp.com/past/2011/7/13/rails_migrations_with_no_downtime/](http://pedro.herokuapp.com/past/2011/7/13/rails_migrations_with_no_downtime/)

2) 使用两个 heroku 应用程序进行部署。我向 Heroku 开了一张关于这个主题的票，这是他们的回复：

> 我们目前正在研究一种解决方案，以提供零停机时间部署，但没有关于何时可用的 ETA。
> 
> 同时，可能的解决方法是部署到两个单独的应用程序。您可以将新代码推送到第二个应用程序，启动它，然后将域名移动到第二个应用程序。清洗并在下一次部署时重复。这不太理想，但可能会在过渡期间为您提供所需的结果。

如果你这样做，你会希望尽可能地自动化，因为有很多方法可以把它搞砸。这是关于该主题的文章： http: [//casperfabricius.com/site/2009/09/20/manage-and-rollback-heroku-deployments-capistrano-style/](http://casperfabricius.com/site/2009/09/20/manage-and-rollback-heroku-deployments-capistrano-style/)

## 为什么？

这**两个**解决方案**都**必须完成，因为数据库迁移必须在代码的两个（实时和待实时）版本中工作。一旦你有这个工作，那么你就可以解决第二个问题，即应用程序本身似乎没有出现故障。一旦开始推送，没有支持的方式来旋转和旋转单个测功机。

**更新：** Heroku 现在提供了一个 beta 功能。要在推送之前使用，请执行以下操作：

`heroku labs:enable -a APP_NAME preboot`

这将改变应用程序在推送期间的行为。它将启动一个预热两分钟的并行实例。推送后几乎整整两分钟，所有流量都将路由到新应用程序。正如我上面提到的，小心迁移，因为它们仍然是一个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T21:26:15.297

# ios - iOS 从相机捕获视频并与音频文件实时混合

> ID：10238413
> 
> 赞同：1
> 
> 时间：2012-04-19T23:44:27.413
> 
> 标签：ios, audio, video, avassetwriter, avassetreader

我正在尝试从 iPhone 相机捕获视频并将电影与音频文件混合保存。我可以毫无问题地捕获带有音频（来自麦克风）的视频。我想要做的是捕获视频，而不是麦克风音频，而是使用音乐曲目（.caf 文件）。我正在使用 AVAssetWriter 捕获视频。我试图设置一个 AVAssetReader 来读取音频文件，但我无法让它与 AVAssetWriter 一起工作（可能是因为音频的解码发生得非常快）。另外，我不想保存没有音频的电影，然后将其与 AVAssetExportSession 混合。为了我的目的，这将是缓慢的。有任何想法吗 ？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:01:13.053

使用 AVAssetWriter 捕获视频，使用 AvAudioRecorder 捕获音频，然后使用 AVExportSession 混合音频和视频，关于这个主题的很多帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:43:30.970

如果您在 (with `AVAssetExportSession`) 之后执行此操作，则会出现同步问题。以及视频和音频之间的短暂延迟（时间...）...没有找到更好的解决方案

# html - 具有固定列和流动列的 CSS 布局

> ID：10238416
> 
> 赞同：3
> 
> 时间：2012-04-19T23:44:39.347
> 
> 标签：html, css, fluid-layout, liquid-layout

我在创建部分流动的布局时遇到问题。布局必须有 100% 的宽度和高度，但它不应该有滚动条（溢出：隐藏；）。

![在此处输入图像描述](../Images/c51a96c479b1d715f348a805f2929a75.png)

上图显示了我想要实现的目标。如你看到的：

1.  标题必须固定 - 110 像素，100% 宽度。
2.  通过容器 div 包装的两个 div。蓝色需要固定宽度 130px 和 100% 高度，而绿色需要固定宽度和 100% 高度。

这是我当前的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <style type="text/css">
        * {
            padding: 0;
            margin: 0px;
            color: white;
        }
        html, body {
            height: 100%;
            width: 100%;
        }

        .spacer {
            clear: both;
        }

        #header {
            background: black;
            width: 100%;
            height: 100px;
            float: left;
        }

        #content {
            height: 88%;
            width: 100%;
            padding: 0px;
            margin: 0px;
            position: relative;
        }

        #left {
            background: #1664a0;
            height: 100%;
            width: 100px;
            float: left;
        }

        #right {
            background: #4aa016;
            height: 100%;
            float: left;
            width: 91%;
        }

    </style>
</head>
<body>

<div id="header">
    My Header
</div>
<div class="spacer"></div>
<div id="content">
    <div id="left">Left container</div>
    <div id="right">Right container</div>
</div>

</body>
</html> 
```

这段代码有几个问题：

1.  它不适用于各种分辨率（800x600、1024x768、1280x1024 等）
2.  “内容” div 并不总是将页面填充到最后。
3.  如果您将页面大小调整为较低的分辨率，绿色 div 将低于蓝色 div。

我想我在这里可能做错了什么**，**但我不是设计师，所以有人可以指出我解决这个问题的“正确方法”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T23:47:09.223

看看这里[http://jsfiddle.net/bmqPV/2/](http://jsfiddle.net/bmqPV/2/)

您将左侧设置为 100 像素，右侧设置为 91%，因此如果 100 像素大于 9%，它将转到下一行。

编辑，这是一个新的小提琴[http://jsfiddle.net/bmqPV/4/](http://jsfiddle.net/bmqPV/4/)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <style type="text/css">
        * {
            padding: 0;
            margin: 0px;
            color: white;
        }
        html, body {
            height: 100%;
            width: 100%;
        }

        .spacer {
            clear: both;
        }

        #header {
            background: black;
            width: 100%;
            height: 100px;
            position: absolute;
            top: 0px;
            left: 0px;
            z-index:3;
        }

        #content {
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0px;
            position: relative;
        }

        #left {
            background: #1664a0;
            height: 100%;
            width: 100px;
            float: left;
        }

        #right {
            background: #4aa016;
            height: 100%;
            width: 100%;
        }
        #wrapper
        {
            position: relative;
            height: 100%;
            width: 100%;}
        .contentcontainer {
            padding-top:100px;
        }
    </style>
</head>
<body>
<div id="wrapper">
    <div id="header">
        My Header
    </div>
    <div id="content">
        <div id="left">
            <div class="contentcontainer">Left container</div>
        </div>
        <div id="right">
            <div class="contentcontainer">Right container</div>
        </div>
    </div>
</div>
</body>
</html>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:07:25.030

您可以通过一个简单的**CSS来实现您的结果，并在****#content**和**#right**中定义位置以便更好地理解，请参阅简单代码：-

```
 <!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
{
            padding: 0;
            margin: 0px;
            color: white;
        }
        html, body {
            height: 100%;
            width: 100%;
        }

        #header {
            background: black;
            height: 100px;
        }

        #content {
           width:100%;
           border:5px solid red;
           overflow:hidden;
           position:relative;

        }

        #left {
            background: #1664a0;
            height: 100%;
            width: 130px;
            float: left;
        }

        #right {
            background: #4aa016;
            height: 100%;
            float: left;
            width:100%;
            position:absolute;
            margin-left:130px;
        }

</style>
</head>
<body>
<div id="header">
    My Header
</div>

<div id="content">
    <div id="left">Left container</div>
    <div id="right">Right container</div>
</div>

</body>
</html> 
```

**查看演示：-** [http://jsbin.com/ajasey/17/edit](http://jsbin.com/ajasey/17/edit)

# c# - 有可能失败选项时如何使用 win32::WriteFile？

> ID：10238418
> 
> 赞同：2
> 
> 时间：2012-04-19T23:44:55.987
> 
> 标签：c#, c++

我使用 win32 方法“WriteFile”在 C#（版本 .net 4.0）中做一些工作，我需要等到该方法完成任务并使用“WaitForSingleObject”来完成。

但在某些情况下，方法“WriteFile”失败 ==> 所以对于这种情况，我给了“WaitForSingleObject”30 秒超时。

但是在这 30 秒之后，我离开了方法 'WriteFile' => 的范围，如果 GC 将运行我在方法 'WriteFile' 中作为参数提供的对象，则将被收集，当这种情况发生时我会崩溃！ ！-

我检查了转储，它说我有内存损坏。当我删除“WriteFile”行时，不会出现崩溃。

怎么解决？！我不能将“WriteFile”方法的变量设为全局变量，我必须将它们保留为局部变量。

编码

```
 public void foo(byte[] bufferToWrite)
      {
          unsafe
          {

          NativeOverlapped overlapped = new NativeOverlapped()
          {
                EventHandle = eventHandle,
                OffsetLow   = ( int )( s       & 0xffffffff ),
                OffsetHigh  = ( int )( s >> 32 & 0xffffffff )
          };

          GCHandle gch = GCHandle.Alloc( bufferToWrite, GCHandleType.Pinned );
          IntPtr ptr = new IntPtr( ( void* )gch.AddrOfPinnedObject() );

          bResult = WriteFile( handle, ptr, length, ref bytesWritten, &overlapped );
          if( bResult == ERROR_SUCCESS == || bResult == ERROR_IO_PENDING )
          {
                dwResult = WaitForSingleObject( EventHandle, 30000 );
          }
          }
 } 
```

# php - 使搜索脚本循环遍历数组而不是文本条目值

> ID：10238419
> 
> 赞同：1
> 
> 时间：2012-04-19T23:45:09.270
> 
> 标签：php, mysql, arrays, search

```
$term = $_POST['term'];

$sql = mysql_query("SELECT * FROM tblCocktail WHERE Ingredients LIKE '%$term%'"); 
```

这是我用来从文本输入框中获取值并搜索我的数据库的代码的一部分。但是我想改变它，而不是**%$term%**它循环遍历一个数组，以便能够搜索多个选定的术语。

任何帮助表示赞赏

-马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:52:00.357

您可以通过遍历数组来构造搜索表达式。

```
$search = '';
foreach ($_POST['term'] as $term) {
    $search .= " OR '$term'";
}
$search = preg_replace('/^ OR/', '', $search); // remove first OR

// Ingredients LIKE $search 
```

但请注意，您应该使用准备好的语句而不是使用这样的表达式来避免 SQL 注入。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:54:30.047

查看[MySQL 的 MATCH](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)功能以最有效地完成此操作。您需要在列上放置全文索引，然后可以使用复杂的搜索，例如：

```
SELECT * FROM tblCocktail WHERE MATCH (Ingredients) AGAINST ('%$Term1%', '%$Term2$'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T23:57:31.260

不要添加复杂的逻辑和查询构建，而是向`FULLTEXT`表中添加一个属性并对其进行全文搜索：

```
CREATE TABLE `tblCocktail` (
 `id`          INT NOT NULL AUTO_INCREMENT,
 `Ingredients` VARCHAR(255)
  ...
 PRIMARY KEY (`id`)),
 FULLTEXT(`Ingredients`)
ENGINE = MyISAM;

...

 $terms = implode($term_array);  // todo: protect against injection here too
 $query = "SELECT *
           FROM `tblCocktail`
           WHERE MATCH(`Ingredients`) AGAINST ('$terms')"; 
```

# c - 如何通过子进程取消警报（）信号？

> ID：10238420
> 
> 赞同：4
> 
> 时间：2012-04-19T23:45:09.267
> 
> 标签：c, signals, alarm, child-process

对于一项任务，我正在创建一个时间感知外壳。如果命令运行超过设定的时间，shell 会分叉并执行命令并杀死它们。例如。

```
 input# /bin/ls
 a.out code.c
 input# /bin/cat
 Error - Expired After 10 Seconds.
 input# 
```

现在，我的问题是：如果在程序处理过程中发生错误，即exevce返回-1时，有没有办法防止警报启动？

由于子进程是单独运行的，经过数小时的试验和研究，我还没有找到任何讨论甚至暗示这类任务的东西，我觉得这可能是不可能的。如果确实不可能，我该如何防止发生类似以下的事情......

```
 input# /bin/fgdsfgs
 Error executing program
 input# Error - Expired After 10 Seconds. 
```

对于上下文，这是我目前正在使用的代码，我自己尝试这样做的尝试被删除。我在这里先向您的帮助表示感谢！

```
while(1){
    write(1, prompt, sizeof(prompt)); //Prompt user
    byteCount = read(0, cmd, 1024); //Retrieve command from user, and count bytes
    cmd[byteCount-1] = '\0';    //Prepare command for execution

    //Create Thread
    child = fork();

    if(child == -1){
        write(2, error_fork, sizeof(error_fork));
    }

    if(child == 0){ //Working in child
        if(-1 == execve(cmd,arg,env)){  //Execute program or error
            write(2, error_exe, sizeof(error_exe));
        }   
    }else if(child != 0){   //Working in the parent
        signal(SIGALRM, handler);   //Handle the alarm when it goes off
        alarm(time);
        wait();
        alarm(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T23:51:20.217

根据[手册页](http://linux.die.net/man/3/alarm)：

> **描述**
> 
> 在经过 seconds 指定的实时秒数后，alarm() 函数应使系统为进程生成 SIGALRM 信号。处理器调度延迟可能会阻止进程在信号生成后立即对其进行处理。
> 
> 如果秒为 0，则取消挂起的警报请求（如果有）。
> 
> 报警请求不堆叠；以这种方式只能安排一次 SIGALRM 生成。如果尚未生成 SIGALRM 信号，则调用将导致重新安排生成 SIGALRM 信号的时间。
> 
> 未指定 alarm() 与 setitimer()、ualarm() 或 usleep() 中的任何一个之间的交互。

因此，要取消警报：`alarm(0)`. 它甚至出现在您的示例代码中。

## 主要问题

顺便说一句，你在这里错过了一个重要的部分：

```
if(child == 0){ //Working in child
    if(-1 == execve(cmd,arg,env)){  //Execute program or error
        write(2, error_exe, sizeof(error_exe));
        _exit(EXIT_FAILURE);  // EXIT OR A FORKED SHELL WILL KEEP GOING
    }   
}else if(child != 0){   //Working in the parent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T00:10:16.333

系统[`wait()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html)调用接受一个参数；为什么不使用源文件中的正确头文件和未声明函数的编译器警告（最好是错误）进行编译？或者，如果您收到此类警告，请在提交代码以在 StackOverflow 等地方进行审核之前注意它们。

您不需要测试`execve()`（或任何`exec*()`函数）的返回状态；如果返回，则失败。

在失败时写一个错误是很好的。如果子进程也退出会更好，这样它就不会回到`while (1)`循环中，与你的主 shell 竞争输入数据。

```
if (child == 0)
{
    execve(cmd, arg, env);
    write(2, error_exe, sizeof(error_exe));
    exit((errno == ENOEXEC) ? 126 : 127);
} 
```

事实上，你的孩子不退出是你问题的主要原因；由于孩子尚未退出，因此等待直到警报响起才返回。显示的退出状态旨在匹配[POSIX shell](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_08_02)规范。

# jquery - 如何在没有模型的情况下验证 MVC3 中的强类型视图

> ID：10238421
> 
> 赞同：1
> 
> 时间：2012-04-19T23:45:09.293
> 
> 标签：jquery, asp.net-mvc-3, validation

我被我的项目卡住了。该项目有3层：

1.  使用 ado.net 数据模型进行数据访问。
2.  一个 WCF 服务，它从 de 数据访问 ado.net 数据模型中检索数据并发送一个序列化的类。
3.  连接到 wcf 服务的 MVC Web 应用程序。

wcf 服务的类具有从另一层（数据访问层）检索数据并返回到 mvc 应用程序的过程（这没有问题）我创建了一个强类型视图（来自 wcf 服务参考），它显示产品类别，它很好买我不知道如何验证这个观点！

我看过很多关于验证的文章，其中大部分都使用模型和数据注释，但我的情况并非如此。我发现了一些关于 jquery 验证的文章，但我已经尝试过，但没有任何反应......这是视图的代码：

```
@model SkySolutionsMVC3.ProductCategoryServiceReference.CompositeProductCategory
@{
    ViewBag.Title = "Edit";
}
<h2>
    Edit</h2>
<script src="@Url.Content("~/Scripts/jquery-1.7.2.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Product Category</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.Enabled)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Enabled)
            @Html.ValidationMessageFor(model => model.Enabled)
        </div>
        @Html.HiddenFor(model => model.Id)
        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name, new { id="Name"})
            @Html.ValidationMessageFor(model => model.Name)
        </div>
        <p>
            <input type="submit" name="btnSave" value="Save" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

请帮忙！我需要一些想法...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T03:54:47.773

我不完全确定你想要的是什么，但如果你说你基本上需要控制一个从其他地方导入的类，那么如何：编写你自己的类，从你用作模型的类继承现在并从 IValidatableObject 继承，然后将适当的注释添加到覆盖的属性或实现 Validate 方法，如下所示：

```
 public class MyClass : SkySolutionsMVC3.ProductCategoryServiceReference.CompositeProductCategory, IValidatableObject
{
    [Required]
    public override string Name
    {
        get { return base.Name; }
        set { base.Name = value; }
    }

    public IEnumerable Validate(ValidationContext validationContext)
    {
        if (Name.Length != 5)
        {
            yield return new ValidationResult("Name must be exaclty 5 characters long", new string[]{"Name"});
        }
    }
} 

```

# javascript - 使用 ASP 检查页面

> ID：10238425
> 
> 赞同：-2
> 
> 时间：2012-04-19T23:45:58.970
> 
> 标签：javascript, asp-classic, process, load, hide

我正在尝试构建一个网站，用户在其中输入表单中的 URL，然后接收 URL 的另一个页面检查 URL 指向的页面而不向用户显示。但是，我无法弄清楚如何使用 ASP（js 版本）获取页面的内容。location.assign 方法似乎在 ASP 中不起作用。这是因为接收页面不是真实的网站（它没有 html 标头）还是因为无法使用该方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:12:11.503

```
<%@ Language=JAVAScript %>
<%
var p1 = Request.QueryString('geturl')+'';
Response.Buffer = true;
var xml;
xml = Server.CreateObject("Microsoft.XMLHTTP");
xml.Open("GET", "http://shop.safeway.com/", false);
xml.Send();
Response.Write("<h1>The HTML Output</h1>");
Response.Write(xml.responseText);
%> 
```

对不起。这应该是昨天发布的。我的屏幕阅读器没有阅读我的答案没有发布的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:04:52.223

您可以使用 ServerXMLHTTP 对象在服务器端代码中获取远程网页的内容。

```
<% 
    url = Request("url")
    set xmlhttp = CreateObject("MSXML2.ServerXMLHTTP") 
    xmlhttp.open "GET", url, false 
    xmlhttp.send "" 

    response = xmlhttp.responseText 

    ' Do something with the response here

    set xmlhttp = nothing 
%> 
```

# java - Java - 将串行端口字节数组转换为 Int？

> ID：10238428
> 
> 赞同：2
> 
> 时间：2012-04-19T23:46:39.063
> 
> 标签：java, serial-port, integer, microcontroller

我正在尝试在我的 java 界面中制作应变仪显示数字。

我有应变计电路工作，它将其电压发送到微控制器（PIC16F877A）程序进行模数转换，然后在串行端口上输出数字。如果你有兴趣，这里是代码：

```
unsigned short analog;            //Variable for analog voltage
long tlong;
unsigned char ch;                    //

void main() {
  USART_Init(19200);              //set baude rate

  ADCON1 = 0;                     //All PORTA pins as analog, VDD as Vref
  TRISA  = 0xFF;                  //All PORTA is input

  do {
    analog = ADC_Read(2) >> 2;    //Read 10-bit ADC from AN2 and discard 2 LS bit

    tlong = (long)analog * 5000;  // Convert the result in millivolts
    tlong = tlong / 1023;         // 0..1023 -> 0-5000mV
    ch = tlong / 1000;            // Extract volts (thousands of millivolts) from result

    USART_Write(48+ch);           // Write result in ASCII format
    USART_Write('.');

    ch = (tlong / 100) % 10;      // Extract hundreds of millivolts
    USART_Write(48+ch);           // Write result in ASCII format

    ch = (tlong / 10) % 10;       // Extract tens of millivolts
    USART_Write(48+ch);           // Write result in ASCII format

    ch = tlong % 10;              // Extract digits for millivolts
    USART_Write(48+ch);           // Write result in ASCII format
    USART_Write(' ');
    USART_Write(' ');
    USART_Write(' ');

    Delay_ms(1000);
  } while (1);
} 
```

这并不完美，因为当我移动应变计时，输出数字不会改变它们应该的方式。如果有人对此有任何想法，将不胜感激。

但我还是继续前进，并将这些数字发送到我的 java 程序中。我在网上找到了这个并对其进行了修改以适合我的设计：

```
import java.io.*;
import java.util.*; 
import gnu.io.*;

public class SimpleRead implements Runnable, SerialPortEventListener {
    static CommPortIdentifier portId;
    static Enumeration portList;

InputStream inputStream;
SerialPort serialPort;
Thread readThread;
static byte[] readBuffer;
public static int result2;

public static void main(String[] args) {
    portList = CommPortIdentifier.getPortIdentifiers();
    System.out.println("portList... " + portList);

    while (portList.hasMoreElements()) {
        portId = (CommPortIdentifier) portList.nextElement();
        if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {
            System.out.println("port identified is Serial.. "
                    + portId.getPortType());
            if (portId.getName().equals("COM4")) {
                System.out.println("port identified is COM4.. "
                        + portId.getName());
                // if (portId.getName().equals("/dev/term/a")) {
                SimpleRead reader = new SimpleRead();
            } else {
                System.out.println("unable to open port");
            }
        }
    }
}

public SimpleRead() {
    try {
        System.out.println("In SimpleRead() contructor");
        serialPort = (SerialPort) portId.open("SimpleReadApp1111",500);
        System.out.println(" Serial Port.. " + serialPort);
    } catch (PortInUseException e) {
        System.out.println("Port in use Exception");
    }
    try {
        inputStream = serialPort.getInputStream();
        System.out.println(" Input Stream... " + inputStream);
    } catch (IOException e) {
        System.out.println("IO Exception");
    }
    try {
        serialPort.addEventListener(this);

    } catch (TooManyListenersException e) {
        System.out.println("Tooo many Listener exception");
    }
    serialPort.notifyOnDataAvailable(true);
    try {

        serialPort.setSerialPortParams(19200, SerialPort.DATABITS_8,
                SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);

        // no handshaking or other flow control
        serialPort.setFlowControlMode(SerialPort.FLOWCONTROL_NONE);

        // timer on any read of the serial port
        serialPort.enableReceiveTimeout(500);

        System.out.println("................");

    } catch (UnsupportedCommOperationException e) {
        System.out.println("UnSupported comm operation");
    }
    readThread = new Thread(this);
    readThread.start();
}

public void run() {
    try {
        System.out.println("In run() function ");
        Thread.sleep(500);
        // System.out.println();
    } catch (InterruptedException e) {
        System.out.println("Interrupted Exception in run() method");
    }
}

public void serialEvent(SerialPortEvent event) {

    // System.out.println("In Serial Event function().. " + event +
    // event.getEventType());
    switch (event.getEventType()) {
    /*
     * case SerialPortEvent.BI: case SerialPortEvent.OE: case
     * SerialPortEvent.FE: case SerialPortEvent.PE: case SerialPortEvent.CD:
     * case SerialPortEvent.CTS: case SerialPortEvent.DSR: case
     * SerialPortEvent.RI: case SerialPortEvent.OUTPUT_BUFFER_EMPTY: break;
     */
    case SerialPortEvent.DATA_AVAILABLE:
        readBuffer = new byte[500];

        try {

            while (inputStream.available()>0) {

                int numBytes = inputStream.read(readBuffer);

            //   System.out.println("Number of bytes read " + numBytes);
                System.out.print(new String(readBuffer));
            }

        } catch (IOException e) {
            System.out.println("IO Exception in SerialEvent()");
        }
        break;
    }
    // System.out.println();
/*  String one = new String(readBuffer);
    char two = one.charAt(0);
    System.out.println("Character at three: " + two);*/
}

} 
```

它读取与前面的代码相同的数字范围（一个串行端口，所以我无法测试它是否是相同的数字），尽管它有时会给我奇怪的数字，比如而不是 .692，它会说 320，然后下一个数字是 43，然后可能只有一个“。” 会出现，但很快就会恢复正常。我认为这是一个缓冲区问题，上面写着“readBuffer = new byte [500]”，我将大小更改为 500（最初是 8）并且它稍微好一点。

无论如何，我必须将输出转换为整数才能对其进行一些数学运算，并且作为整数，我可以轻松过滤掉所有奇怪的数据。所以最终，我现在的问题是我会将这些输出数据转换为可用的整数吗？主要问题是我什至不确定它在我的 java 程序中的哪个位置读取串行端口号。我假设变量是 readBuffer，但是当我尝试使用它的地方时会出错，通常是类型不匹配。

所以任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:10:16.307

很难从提供的信息中猜测，但您说：

> “给我奇怪的数字，而不是 .692，它会说 320”

和

> 主要问题是我什至不确定我的java程序在哪里读取串行端口号

如果您尝试从接收的字节缓冲区中读取整数，这在我看来是字节顺序问题。如果您尝试从接收到的字节缓冲区读取浮点数据，也可能是浮点类型的 IEEE 标准不匹配。但我建议不要使用浮点类型而只使用整数。

如果您使用的是 java 5+，请使用 nio 包中的 ByteBuffer 类，如下所示：

```
 byte[] readBuffer = getBufferFromyourCode();
    ByteBuffer buffer = ByteBuffer.wrap(readBuffer); //wrap received byte buffer
    buffer.order(ByteOrder.LITTLE_ENDIAN);//set correct endiannes
    Integer version = buffer.getInt();// read first 4 bytes
    Integer length = buffer.getInt(); // read next 4 bytes
    byte[] rowMsg = new byte[length];// length = bytes to read
    buffer.get(rowMsg); // copies 'length' bytes in rowMsg
    String msg = new String(rowMsg); // convert to String
    System.out.println("Version "+version+" message received");
    System.out.println("Length: "+length);
    System.out.println("text: "+msg); 
```

注意字节顺序设置，尝试大端和小端，看看你从缓冲区读取的值是否正常。在此处查看有关字节序的更多信息： [http ://en.wikipedia.org/wiki/Endiannes](http://en.wikipedia.org/wiki/Endiannes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:23:38.823

我进一步研究了您上面的代码，我认为在上面的代码中，流是：

`<x.xxx >`，因此，如果您每次读取 8 个字节，那将是一个数据条目。如果您使用 inputstreamreader if 会将字节转换为字符...

检查[http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html)

# java - Jetty：HelloWorld 示例无法更改内容

> ID：10238429
> 
> 赞同：2
> 
> 时间：2012-04-19T23:46:41.403
> 
> 标签：java, jetty

我是 Jetty 的新手，我尝试运行“HelloWorld”的示例

```
public class HelloWorld extends AbstractHandler
{
    public void handle(String target,
                       Request baseRequest,
                       HttpServletRequest request,
                       HttpServletResponse response) 
        throws IOException, ServletException
    {
        response.setContentType("text/html;charset=utf-8");
        response.setStatus(HttpServletResponse.SC_OK);
        baseRequest.setHandled(true);
        response.getWriter().println("<h1>Hello World</h1>");
    }

    public static void main(String[] args) throws Exception
    {
        Server server = new Server(8080);
        server.setHandler(new HelloWorld());

        server.start();
        server.join();
    }
} 
```

并且“Hello World”确实显示在我的 localhost:8080 的 JSP 页面上。但我无法更改里面的任何内容，甚至无法停止服务器。我能用这个做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:58:46.847

由于您最后执行了 join()，因此停止服务器的唯一方法就是杀死它。如果你没有成功停止你的服务器，你怎么能说你不能改变内容呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:24:55.300

我解决问题。因为我在我的eclipse中运行它，所以我需要停止从eclipse创建的服务器，而杀死服务器的唯一方法是转到tast manager，并结束所有java程序。谢谢！

# c# - 适用于 Visual Studio 2010 的水晶报表

> ID：10238430
> 
> 赞同：1
> 
> 时间：2012-04-19T23:46:50.623
> 
> 标签：c#, visual-studio-2010, crystal-reports, sap

Crystal Report for Visual Studio 2010 与 SAP 销售的 Crystal Report 有什么区别？由于 Visual Studio 2010 的 Crystal Report 是免费的并且随 Visual Studio 2010 一起提供，是否有任何限制，例如每个站点可以构建的报表数量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T00:17:37.370

Visual Studio 附带的版本是免费的，您可以制作尽可能多的报告，并使用您的应用程序部署运行时引擎，无需额外费用。[查看本网站](http://www.sap.com/solutions/sap-crystal-solutions/query-reporting-analysis/sapcrystalreports-visualstudio/licensing/index.epx)了解完整详情。

关于完整的 SAP 水晶报表，基本上 Visual Studio 版本是水晶报表的迷你版，具有更多功能。这是完整版和 Visual Studio 版本（2008 版）之间的比较，类似于 2010 版：

[http://www.sap.com/solutions/sap-crystal-solutions/query-reporting-analysis/sapcrystalreports-visualstudio/comparison/index.epx](http://www.sap.com/solutions/sap-crystal-solutions/query-reporting-analysis/sapcrystalreports-visualstudio/comparison/index.epx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T20:23:35.117

Crystal 报表一旦托管在 IIS 中，就会限制显示的报表数量。这将抛出“最大报告处理作业限制”。为了避免这种情况，请在其卸载事件中关闭报告。

```
Protected void report_Unload(object sender, EventArgs e)
{
       rptDocument.Dispose();
       rptDocument.Close();
} 
```

# c++ - 无法创建元组的 unordered_map

> ID：10238432
> 
> 赞同：2
> 
> 时间：2012-04-19T23:47:12.090
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11

我正在使用`std::unordered_map<std::tuple<int, int, int>, float>`. 但是，VS2010 不会编译实例化。我明确提供了`hash`专业化和`operator==`重载。错误信息是指

```
std::unordered_map<NodeType, float> g_score; 
```

这是错误的全文：

```
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\tuple(127): error C2440: 'initializing' : cannot convert from 'const NodeType' to 'int'
1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xxtuple0(9) : see reference to function template instantiation 'std::tr1::_Cons_node<_Car,_Cdr>::_Cons_node<_Ty,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&>(_Farg0 &&,_Farg1,_Farg2,_Farg3,_Farg4,_Farg5,_Farg6,_Farg7,_Farg8,_Farg9)' being compiled
1>          with
1>          [
1>              _Car=int,
1>              _Cdr=std::tr1::_Cons_node<int,std::tr1::_Cons_node<int,std::tr1::_Tuple_type<std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil>::_Type>>,
1>              _Ty=NodeType,
1>              _Farg0=NodeType,
1>              _Farg1=std::tr1::_Nil &,
1>              _Farg2=std::tr1::_Nil &,
1>              _Farg3=std::tr1::_Nil &,
1>              _Farg4=std::tr1::_Nil &,
1>              _Farg5=std::tr1::_Nil &,
1>              _Farg6=std::tr1::_Nil &,
1>              _Farg7=std::tr1::_Nil &,
1>              _Farg8=std::tr1::_Nil &,
1>              _Farg9=std::tr1::_Nil &
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\utility(145) : see reference to function template instantiation 'std::tr1::tuple<_Arg0,_Arg1,_Arg2>::tuple<const std::tr1::tuple<_Arg0,_Arg1,_Arg2>>(_Farg0 &&)' being compiled
1>          with
1>          [
1>              _Arg0=int,
1>              _Arg1=int,
1>              _Arg2=int,
1>              _Farg0=const std::tr1::tuple<int,int,int>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\utility(142) : while compiling class template member function 'std::_Pair_base<_Ty1,_Ty2>::_Pair_base(const std::tr1::tuple<_Arg0,_Arg1,_Arg2> &&,float &&)'
1>          with
1>          [
1>              _Ty1=const NodeType,
1>              _Ty2=float,
1>              _Arg0=int,
1>              _Arg1=int,
1>              _Arg2=int
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\utility(174) : see reference to class template instantiation 'std::_Pair_base<_Ty1,_Ty2>' being compiled
1>          with
1>          [
1>              _Ty1=const NodeType,
1>              _Ty2=float
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\unordered_map(279) : see reference to class template instantiation 'std::pair<_Ty1,_Ty2>' being compiled
1>          with
1>          [
1>              _Ty1=const NodeType,
1>              _Ty2=float
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\unordered_map(275) : while compiling class template member function 'float &std::tr1::unordered_map<_Kty,_Ty>::operator [](const std::tr1::tuple<_Arg0,_Arg1,_Arg2> &)'
1>          with
1>          [
1>              _Kty=NodeType,
1>              _Ty=float,
1>              _Arg0=int,
1>              _Arg1=int,
1>              _Arg2=int
1>          ]
1>          c:\repo\render\render\sim\simcontext.cpp(155) : see reference to class template instantiation 'std::tr1::unordered_map<_Kty,_Ty>' being compiled
1>          with
1>          [
1>              _Kty=NodeType,
1>              _Ty=float
1>          ]
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\tuple(127): error C2439: 'std::tr1::_Cons_node<_Car,_Cdr>::_Value' : member could not be initialized
1>          with
1>          [
1>              _Car=int,
1>              _Cdr=std::tr1::_Cons_node<int,std::tr1::_Cons_node<int,std::tr1::_Tuple_type<std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil>::_Type>>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\tuple(170) : see declaration of 'std::tr1::_Cons_node<_Car,_Cdr>::_Value'
1>          with
1>          [
1>              _Car=int,
1>              _Cdr=std::tr1::_Cons_node<int,std::tr1::_Cons_node<int,std::tr1::_Tuple_type<std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil,std::tr1::_Nil>::_Type>>
1>          ] 
```

不确定从哪里继续，因为我以前从未见过此错误。有什么建议么？

编辑：有趣的是，`unordered_set<NodeType>`在此之前的正确编译干净。

试试这个SSCCE：

```
#include <deque>
#include <tuple>
#include <unordered_map>
#include <unordered_set>

void GetPath() {
    typedef std::tuple<int, int, int> NodeType;
    struct node_hasher : public std::unary_function<const NodeType&, std::size_t> {
        std::size_t operator()(const NodeType& node) const {
            return std::hash<int>()(std::get<0>(node) + std::get<0>(node) + std::get<0>(node) + std::get<1>(node) + std::get<1>(node) + std::get<2>(node));
        }
    };
    std::unordered_set<NodeType, node_hasher> closed_set;
    std::unordered_map<NodeType, float, node_hasher> g_score;
    std::unordered_map<NodeType, float, node_hasher> f_score;
    std::unordered_map<NodeType, NodeType, node_hasher> came_from;
    auto node_comparator = [&](NodeType lhs, NodeType rhs) {
        return f_score[lhs] < f_score[rhs];
    };
}

int main() {
} 
```

无法在空项目中编译并出现相同的错误。如果您取消注释`node_comparator`lambda，它就可以正常工作。难怪我遇到了麻烦——这是另一个 VS 错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T01:08:28.793

这是 Visual C++ 2010 标准库中的一个错误。请参阅以下有关 Microsoft Connect 的报告：

> [C++`map<tuple<...>, V>`编译问题](http://connect.microsoft.com/VisualStudio/feedback/details/534457/c-map-tuple-v-compilation-problems)

该错误已针对 Visual Studio 11 进行了修复。您的示例使用 Visual Studio 11 Beta 编译时不会出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T00:22:18.920

提示... 将散列和相等实现为 lambda，然后使用这些 lambda 的类型作为模板参数：

```
auto h = [](const TKey& x) { ... };
auto eq = [](const TKey& x, const TKey& y) { ... };

std::unordered_map<TKey, TValue, decltype(h), decltype(eq)> m; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T00:20:10.227

尝试移动`NodeType`和`node_hasher`命名空间范围。在 C++03 中，局部类型不能用作模板参数。也许 VS2010 还没有实现那个改变。我只是猜测。我没有 VS2010，因此没有用你的 SSCCE 尝试过这个实验。

# django - 通过中间类保存 ManyToMany

> ID：10238433
> 
> 赞同：3
> 
> 时间：2012-04-19T23:47:12.493
> 
> 标签：django, django-models, django-views

我读了很多关于这个问题的链接：

[如何保存具有 manyToMany Through 关系和常规 manyToMany 关系的 django 模型](https://stackoverflow.com/questions/9146208/how-to-save-a-django-model-with-a-manytomany-through-relationship-and-regular-m)

[如何保存具有 manyToMany Through 关系和常规 manyToMany 关系的 django 模型](https://stackoverflow.com/questions/9146208/how-to-save-a-django-model-with-a-manytomany-through-relationship-and-regular-m)

[django 多线程通过](https://stackoverflow.com/questions/3833749/django-manytomany-through)

包括文档： [https ://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)

但是不能通过中介类来保存我的M2M。

我的模型：

```
class Promotor(PessoaFisica):
    user = models.OneToOneField(User, blank=True, null=True)    

class Setor(models.Model):
    nome = models.CharField(max_length=255)
    promotores = models.ManyToManyField(Promotor, through='Membro', blank=True, null=True)     

    class Meta:
        verbose_name_plural = 'setores'

    def __unicode__(self):
        return "%s" % (self.nome)

class Membro(models.Model):
    promotor = models.ForeignKey(Promotor)
    setor = models.ForeignKey(Setor)
    data_inclusao = models.DateField(auto_now=True) 
```

保存方法：

```
def add_setor(request):
    form = SetorForm(request.POST or None)
    if form.is_valid():
        s = form.save()    
        setor = get_object_or_404(Setor, pk = s.id)    
        for promotor_id in request.POST.getlist('promotores'):
            membro = Membro.objects.create(promotor_id=promotor_id, setor_id=setor.id)          
            membro.save()         
        messages.add_message(request, messages.SUCCESS, 'Setor cadastrado com sucesso!')
        return HttpResponseRedirect('/project/setor/index/')
    return render_to_response('project/setor/form.html', locals(), context_instance=RequestContext(request)) 
```

错误是：

```
Cannot set values on a ManyToManyField which specifies an intermediary model.  Use setor.Membro's Manager instead. 
```

如果 save() 方法提交“false”，则“setor”没有“id”放入 Membro 对象。如何通过中间类保存setor？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T03:55:43.583

您的表单中有`promotores`字段链接到模型，因此`save()`尝试将其保存到 m2m 字段。您可以使用 保存表单`commit=False`，然后手动保存对象（它不会触及 m2m），然后像现在一样保存 m2m。

PS我猜你应该使用`form.cleaned_data['promotores']`而不是request.POST。天知道客户端实际发布了什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T15:47:45.103

使用中间类（通过）保存多对多关系的解决方案：

```
def add_setor(request):
    form = SetorForm(request.POST or None)
    if form.is_valid():     
        setor = Setor.objects.create(nome=form.cleaned_data['nome'])
        for promotor_id in request.POST.getlist('promotores'):   
            m1 = Membro(promotor_id=promotor_id, setor=setor)
            m1.save()
        messages.add_message(request, messages.SUCCESS, 'Setor cadastrado com sucesso!')
        return HttpResponseRedirect('/project/setor/index/')
    return render_to_response('project/setor/form.html', locals(), context_instance=RequestContext(request)) 
```

我没有直接使用表单，而是提取表单的设置器名称然后创建对象设置器。使用表单中的 id 的 promotores 和对象设置器创建 Membro 对象，最后一个操作是保存 Membro 对象。问候。

# data-structures - 树遍历和序列化

> ID：10238435
> 
> 赞同：1
> 
> 时间：2012-04-19T23:47:35.477
> 
> 标签：data-structures, traversal, binary-search-tree

我正试图弄清楚如何使用树遍历来唯一标识一棵树，其症结似乎在于该树是否是香草二叉树（BT），或者它是否还有更严格的规定是二叉搜索树（BST）。本文似乎表明，对于 BT，单个[中](http://www.cmi.ac.in/~madhavan/courses/programming06/lecture12-21sep2006.txt)序、前序和后序遍历不会唯一标识一棵树（在此上下文中唯一表示键的结构和值）。以下是这篇文章的快速摘要：

**BTs**
1\. 我们可以用前序+中序和后序+中序唯一地重构一个BT。
2\. 如果我们还规定遍历跟踪节点的空子节点，我们也可以使用前序+后序。

（一个悬而未决的问题（对我来说）是如果 BT 可以有非唯一元素，上述情况是否仍然正确）

**BSTs**
3\. 我们不能使用 inorder 作为唯一的 id。我们需要中序 + 预购，或中序 + 后序。

现在，（最后）我的问题是，我们可以仅使用预购还是仅使用后购来唯一标识 BST？我认为我们可以，因为这个问题和 [答案](http://www.leetcode.com/2010/09/saving-binary-search-tree-to-file.html) 似乎是肯定的，我们可以使用预购，但非常感谢任何输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:40:02.643

我不知道这里问的是什么。 *任何*二叉树，无论它是否有序，都可以通过写出重建树所需的一系列操作来序列化。想象一个只有两条指令的简单堆栈机：

*   将一棵空树（或`NULL`指针，如果你喜欢）压入堆栈

*   分配一个新的内部节点*N*，将一个值填充到*N*中，将顶部的两棵树从堆栈中弹出并使其成为*N*的左右子节点，最后将*N*压入堆栈。

*任何*二叉树都可以序列化为此类机器的“程序”。序列化算法使用后序遍历。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T14:51:36.240

好的，您只能使用预购来识别一棵树。这是可能的，因为只有在前序遍历中，当前节点的 id 才会出现在子节点的 id 之前。因此，您可以读取从根到叶的遍历输出。

您可以查看[http://en.wikipedia.org/wiki/Tree_traversal#Pre-order](http://en.wikipedia.org/wiki/Tree_traversal#Pre-order)进行确认

因此，您可以将前序遍历视为插入树的列表。因为插入 BST 的树是确定性的，所以当您将值列表插入空树时，您总是得到相同的树。

# oracle - Oracle 数据库：可以通过代理服务器从 PL/SQL 发送电子邮件吗？

> ID：10238439
> 
> 赞同：2
> 
> 时间：2012-04-19T23:48:07.507
> 
> 标签：oracle, plsql, smtp

我在互联网上找到了很多关于如何配置 Oracle 数据库以使用 PL/SQL 命令从数据库发送电子邮件的详细信息，但它们都使用安装数据库的 SMTP 服务器（我认为至少）。如果将这些电子邮件发送给 DBA，那很好。

向客户发送电子邮件的情况如何？在这种情况下，我们不希望从应用服务器（例如 DMZ）而不是数据库服务器发送电子邮件吗？

我假设数据库服务器的 IP 地址（或关于我们宁愿保密的数据库服务器的其他特殊信息）将在这样的电子邮件中提供。如果这不是真的，我的问题没有任何价值。

是否可以从数据库 PL/SQL 命令生成一封电子邮件，但将其从代理（例如应用程序）服务器发送给客户？因此电子邮件流量路径将是：数据库服务器 --> 应用程序服务器 --> 客户。额外的好处是大多数电子邮件系统无论如何都会在应用程序服务器上，因此返回的电子邮件将进入应用程序服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T01:23:08.243

如果您使用的是 UTL_SMTP，您的代码将在某处有这样一行：

```
c := UTL_SMTP.open_connection( 'myhost', 25 ); 
```

第一个参数是邮件服务器。您应该能够将其设置为您的数据库服务器可以连接到的任何服务器（通过端口 25）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T00:11:08.973

他们不一定使用“安装了数据库”的 SMTP 服务器（不太确定您的意思）。您定义系统参数 SMTP_OUT_SERVER 来配置 SMTP 服务器的 IP 和端口。Oracle 将向您定义的任何服务器发送电子邮件，只要它可以通过网络访问。

有关设置 UTL_MAIL 的更多信息，请参阅[此站点。](http://oraclepitstop.wordpress.com/2008/04/24/how-to-send-email-from-10g-oracle-database-utl_mail/)试试看。看看标题。亲眼看看它的样子。

# sql-server-2008 - TSQL 参数化包含

> ID：10238442
> 
> 赞同：1
> 
> 时间：2012-04-19T23:48:26.477
> 
> 标签：sql-server-2008, tsql, full-text-search

我正在尝试使用 Contains() 方法根据传递到存储过程的 TSQL 参数搜索全文索引的查询。Contains 需要进行 prefix_search，因为它将用于匹配部分单词（例如策略编号的前 5 个字符）。

这是我的查询。

```
CREATE PROCEDURE [SearchMail]
(
    @AccountId int,
    @SearchTerm VARCHAR(100)
)
AS

SET NOCOUNT ON

    BEGIN
        SELECT MailId, AccountId, ServerId, ToAddress, FromAddress, DateSent, DateReceived ,
                       [Subject], Body, PolicyNumber, ProducerNumber, IsRead, IsDeleted, IsImaged,
                       DateUpdated, DateDeleted, DateImaged, UpdatedBy, DeletedBy, ImagedBy  
        FROM   MailMessages
        WHERE  AccountId = @AccountId 
               AND CONTAINS(([Subject], Body, PolicyNumber, ProducerNumber, FromAddress), ' "' + @SearchTerm + '*" ')
               AND IsDeleted = 0 
               AND IsImaged = 0
    END
GO 
```

但是当我尝试运行它时，企业管理器会响应错误：“+”附近的语法不正确

在这一点上，我不确定我可能做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:53:50.460

```
CREATE PROCEDURE [SearchMail] 
( 
    @AccountId int, 
    @SearchTerm VARCHAR(100) 
) 
AS 

SET NOCOUNT ON 

BEGIN 
   Declare @SearchWithWildcard VARCHAR(200)
   SET @SearchWithWildcard = '"' + @SearchTerm + '*"' 

   SELECT MailId, AccountId, ServerId, ToAddress, FromAddress, DateSent, DateReceived, 
          [Subject], Body, PolicyNumber, ProducerNumber, IsRead, IsDeleted, IsImaged, 
          DateUpdated, DateDeleted, DateImaged, UpdatedBy, DeletedBy, ImagedBy   
   FROM   MailMessages 
   WHERE  AccountId = @AccountId  
          AND CONTAINS(([Subject], Body, PolicyNumber, ProducerNumber, FromAddress),
                       @SearchWithWildcard) 
          AND IsDeleted = 0  
          AND IsImaged = 0 
END 
GO 
```

参考[包含](http://msdn.microsoft.com/en-us/library/ms187787.aspx)：

> 指定以指定文本开头的单词或短语的匹配。将前缀术语括在双引号 ( ) 中，并在结束引号之前`""`添加星号 ( )，以便匹配以星号之前指定的简单术语开头的所有文本。`*`该子句应以这种方式指定：`CONTAINS (column, '"text**"')`. 星号匹配零个、一个或多个字符（词根词或词或短语中的词）。如果文本和星号没有用双引号分隔，则谓词读取 `CONTAINS (column, 'text*')`，全文搜索将星号视为字符并搜索与 的完全匹配`text*`。全文引擎将找不到带有星号 ( `*`) 字符的单词，因为分词器通常会忽略此类字符。

# javascript - CSS 中的等价物是什么：向元素添加内容是 `content: "text to add";` 因为从元素中删除内容是 `?????`

> ID：10238444
> 
> 赞同：2
> 
> 时间：2012-04-19T23:48:41.093
> 
> 标签：javascript, css, mediawiki

在我编辑的主 wiki 上有一个名为的自定义命名空间`Item:`，抱怨是该命名空间内的每个页面都显示为`Item:This_item`-- `Item:That_item`-- `Item:Foo_item`。

我浏览了该皮肤的网络和 CSS，并遇到了：

```
span#ca-nstab-main:before,
span#ca-nstab-user:before,
span#ca-nstab-wp:before {
content: "[ ";
}
span#ca-talk:before {
content: "& ";
}
span#ca-talk:after {
content: " ]";
} 
```

它采用命名空间名称“我将`main`用作示例”和相应的`talk`页面名称，并使它们显示为`[ main & talk ]`而不是`main talk`.

我想知道是否有类似的东西可以让我显示`Item:Foo`为只是`Foo`剥离“ `Item:`”。我知道类别页面上列出的项目在`div#mw-pages` `a`标签中。

也许甚至是使用 JavaScript 去除前五个字符的内联方式？我说“内联”是因为[$wgAllowUserJs](http://mediawiki.org/wiki/Manual%3a%24wgAllowUserJs)在这个 wiki 上设置为 false。

编辑：维基核心将其解析为：

```
<style type="text/css">
/*<![CDATA[*/      
a[title^=&quot;Item:&quot;] {
    font-family: 'Lucida Grande', Geneva, Arial, Verdana, monospace;
    font-size: 12px;
    display: inline-block;
    overflow: hidden;
    text-indent: -2.1em;
}
/*]]>*/       
</style> 
```

如何使引号不被解析，有窍门吗？我可以在字体系列线上使用单引号而不是双引号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:16:40.143

如果你只能使用 CSS，你可以尝试这样的事情。( [http://jsfiddle.net/zPJHU/](http://jsfiddle.net/zPJHU/) )

```
li a {
/* monospace fonts may be more consistant cross browsers */
font-family: "Courier New", monospace;
font-size: 1em;
display:inline-block;
overflow:hidden;
text-indent: -2.9em; /* may have to play with this value */
}
li a:hover{
    font-size: 1.8em; /* just for demonstration of font-size increase */
} 
```

演示标记：

```
<p>Hover over links to increase font-size</p>
<ul>
    <li><a href="#Item:wicket" title="This really says: 'Item:Wicket'">Item:Wicket</a></li>
    <li><a href="#Item:chewbacca" title="This really says: 'Item:Chewbacca'">Item:Chewbacca</a></li>
    <li><a href="#Item:obiwan" title="This really says: 'Item:Obi Wan Kenobi'">Item:Obi Wan Kenobi</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:55:34.270

不知道这是否可行，但您可以在正确的位置预先并附加一个跨度打开/关闭标签以具有以下内容：

```
<span class="hideme">Foo:</span>Bar 
```

正如我所说的，我没有尝试过，但我不知道另一种方法，并且可能没有可能仅使用 css 来剪切内容。javascript应该这样做。

# python - 使用正则表达式处理数学方程中的嵌套括号？

> ID：10238446
> 
> 赞同：6
> 
> 时间：2012-04-19T23:48:57.690
> 
> 标签：python, regex

如果我有：

```
statement = "(2*(3+1))*2" 
```

我希望能够为我正在编写的数学阅读器处理括号内的多个括号。也许我的做法是错误的，但我的目标是递归地深入括号直到没有括号，然后我将执行数学运算。因此，我首先要关注

```
"(2*(3+1))" 
```

然后专注于

```
"(3+1)" 
```

我希望通过将焦点值分配给正则表达式的开始索引和正则表达式的结束索引来做到这一点。我还没有弄清楚如何找到结束索引，但我对首先匹配正则表达式更感兴趣

```
r"\(.+\)" 
```

匹配失败。我希望它读作“一组括号中包含的任何一个或多个字符”。有人可以解释为什么上面的表达式与 python 中的上面的语句不匹配吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T23:52:16.850

我喜欢正则表达式。我一直在使用它们。

不要为此使用正则表达式。

您需要一个真正解析您的数学表达式的实际解析器。您可能想阅读以下内容：

[http://effbot.org/zone/simple-top-down-parsing.htm](http://effbot.org/zone/simple-top-down-parsing.htm)

一旦你真正解析了表达式，遍历解析树并计算结果就很简单了。

编辑：@Lattyware 建议使用 pyparsing，这也应该是一个好方法，并且可能比上面发布的 EFFBot 解决方案更容易。

[https://github.com/pyparsing/pyparsing](https://github.com/pyparsing/pyparsing)

这是四函数代数表达式求值器的 pyparsing 示例代码的直接链接：

[http://pyparsing.wikispaces.com/file/view/fourFn.py](http://pyparsing.wikispaces.com/file/view/fourFn.py)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T00:34:24.697

对于它的价值，这里有更多的上下文：

正则表达式被称为“正则”，因为它们与正则语法相关联，而正则语法不能描述（无限数量的）嵌套括号（它们可以描述一堆随机括号，但不能使它们成对匹配）。

理解这一点的一种方法是理解正则表达式可以（模数我将在最后解释的一些细节）转换为确定性有限自动机。这听起来令人生畏，但实际上只是意味着它们可以转换为“规则”列表，其中规则取决于您匹配的内容，并描述您可以匹配的内容。

例如，正则表达式`ab*c`可以转换为：

1.  一开始，您只能匹配`a`. 然后转到 2。

2.  现在，您可以匹配`b`并返回 2，或者匹配`c`并返回 3

3.  你完成了！比赛很成功！

那是一个“确定性有限自动机”。

无论如何，有趣的部分是，如果你坐下来尝试做类似的东西来匹配一对括号，你就做不到！尝试一下。你可以通过制定越来越多的规则来匹配一个有限的数字，但是你不能编写一套匹配无限数量的括号的通用规则（我应该补充一点，规则必须是“如果你匹配 X go玩具”）。

现在显然您可以通过各种方式对其进行修改。您可以允许更复杂的规则（例如扩展它们以让您保留括号的数量），然后您可以获得按预期工作的东西。但它不会是常规语法。

鉴于正则表达式以这种方式受到限制，为什么要使用它们而不是更复杂的东西？事实证明，它们是一个甜蜜点——它们可以做很多事情，同时保持相当简单和高效。更复杂的语法（规则种类）可能更强大，但也更难实现，效率问题也更多。

最后的免责声明和承诺的额外细节：实际上，如今许多正则表达式实际上*比*这更强大（并且不应该真正称为“正则表达式”）。但以上仍然是为什么你不应该为此使用正则表达式的基本解释。

ps jesse 建议的解决方案通过多次使用正则表达式来解决这个问题；这里的论点是针对正则表达式的一次使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T00:29:22.817

我可能同意 steveha，并且不建议为此使用正则表达式，但要具体回答您的问题，您需要未转义的括号来提取结果组（您的模式只有转义的括号）：

```
>>> re.match(r"\((.+)\)", "(2*(3+1))*2").group(1)
'2*(3+1)' 
```

如果你走那条路，你可以迭代匹配结果，直到你用完匹配项，然后反转结果列表以从里到外工作。

# android - 尝试检测抖动时出现 NullPointerException

> ID：10238448
> 
> 赞同：1
> 
> 时间：2012-04-19T23:49:07.597
> 
> 标签：android, service, android-intent, shake

尝试检测震动时，我的应用程序中出现 NullPointerException。

在我的应用程序中，我有一个在后台运行的服务，以及一个调用方法 cameraIntent() 的活动。

```
public class Run1 extends Activity implements Shaker.Callback {
public static final int MEDIA_TYPE_IMAGE = 1;
public static final int MEDIA_TYPE_VIDEO = 2;
public static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
public static final int CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE = 200;
private Uri fileUri;
private static final String TAG = Shaker.class.getSimpleName();
final Handler handle = new Handler();
Shaker shaker;
shakeCameraService shakecamera;

public void miThread() {
    Thread t = new Thread() {
        public void run() {
            handle.post(proceso);
        }
    };
    t.start();

}

public final Runnable proceso = new Runnable() {
    public void run() {         
        cameraIntent();

    }
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Log.e("ONCREATE RUN1 ", "ONCREATE RUN1");
    startService(new Intent(this, shakeCameraService.class));       

}

public void cameraIntent() {
    shaker = new Shaker(this, 5.0d, 500, this);
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to
                                                        // // save the image
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file
                                                        // name
    // start the image capture Intent
    startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {

            if (fileUri != null) {
                Log.e(TAG, "Result ok");
                Log.e(TAG, "Image saved to:\n" + fileUri);
                Log.e(TAG, "Image path:\n" + fileUri.getPath());
                // uri.getLastPathSegment()
                // if store
                // in folder
            }

        } else if (resultCode == RESULT_CANCELED) {
            Log.e(TAG, "RESULT CANCELED");

        } else {
            // Image capture failed, advise user
        }
    }

}

private static Uri getOutputMediaFileUri(int type) {
    return Uri.fromFile(getOutputMediaFile(type));
}

/** Create a File for saving an image or video */
private static File getOutputMediaFile(int type) {
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this.

    File mediaStorageDir = new File(
            Environment.getExternalStorageDirectory() + "/DCIM/Camera");
    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.

    // Create the storage directory if it does not exist
    if (!mediaStorageDir.exists()) {
        if (!mediaStorageDir.mkdirs()) {
            Log.d("ShakerCam", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
            .format(new Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator
                + "IMG_" + timeStamp + ".jpg");
    } else {
        return null;
    }

    return mediaFile;
}

public void shakingStarted() {
    miThread();

}

public void shakingStopped() {
    // TODO Auto-generated method stub

}
} 
```

这是我的服务

```
public class shakeCameraService extends Service implements Shaker.Callback {
Run1 run1;
Shaker shaker =null;

@Override
public void onCreate() {
    super.onCreate();
    shaker = new Shaker(this, 5.0d, 500, this);
    Log.e("ONCREATE SERVICE", "ONCREATE SERVICE");

}

@Override
public void onStart(Intent intent, int startId) {
    shaker = new Shaker(this, 5.0d, 500, this);
    Log.e("onStart Servicio ", "onStart Servicio ");
}

@Override
public void shakingStarted() {
    shaker = new Shaker(this, 5.0d, 500, this);
    Log.e("shakingstrated SERVICE", "shakingstrated SERVICE");
    run1.cameraIntent();

}

@Override
public void shakingStopped() {
    // TODO Auto-generated method stub

}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

当时的错误是logcat me！和鼻子一样真的解决了这个问题！

```
04-19 23:26:30.788: ERROR/ONCREATE RUN1(356): ONCREATE RUN1
04-19 23:26:30.808: DEBUG/onCReate RUN1(356): antes de llamar a shakingstrated
04-19 23:26:30.808: DEBUG/AndroidRuntime(356): Shutting down VM
04-19 23:26:30.808: WARN/dalvikvm(356): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-19 23:26:30.822: ERROR/AndroidRuntime(356): Uncaught handler: thread main exiting due to uncaught exception
04-19 23:26:30.842: ERROR/AndroidRuntime(356): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sebastian.shakeCam/com.sebastian.shakeCam.Run1}: java.lang.NullPointerException
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at android.os.Looper.loop(Looper.java:123)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at android.app.ActivityThread.main(ActivityThread.java:4363)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at java.lang.reflect.Method.invoke(Method.java:521)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at dalvik.system.NativeStart.main(Native Method)
04-19 23:26:30.842: ERROR/AndroidRuntime(356): Caused by: java.lang.NullPointerException
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at com.sebastian.shakeCam.Run1.onCreate(Run1.java:57)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-19 23:26:30.842: ERROR/AndroidRuntime(356):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:13:27.030

的`onStart(...)`方法`Service`已弃用。

您应该`onStartCommand (...)`改为实施。请参阅[onStartCommand](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)的文档。

我不确定它是否会解决您的问题。

# php - 一个 cookie 中应该有多少个变量？

> ID：10238452
> 
> 赞同：0
> 
> 时间：2012-04-19T23:49:46.407
> 
> 标签：php, internet-explorer, cookies, curl

在某些站点上使用 cURL 时，我注意到我请求的某些文件实际上使用了我用 curl 设置的 cookie 中的几个变量。

这是一个快照：

![在此处输入图像描述](../Images/7511313569d16a4166433d61b1d08311.png)

**但是当我检查我的 cookie 文件时，它读取的只是ASP.NET_SessionId**的一个值：

```
www.*******.***  FALSE  /  FALSE  0  ASP.NET_SessionId  ddj24l55lfu11nb1lhuflw55 
```

当然，快照中的值是从我的浏览器 (Internet Explorer F12) 中获取的，并且该 cookie 包含三个变量（不是一个）。Internet Explorer F12 cookie 变量名称/值：

```
NAME  ASPSESSIONIDSACRDADD 
VALUE  LOONCEMDHCGEJOANEGHHFAFH 

NAME  ASPSESSIONIDSCBRABDC 
VALUE  CMONJEMDNICPNPNFICLAPMFM 

NAME  ASPSESSIONIDQACSBADC 
VALUE  MCBOGLCCKNIDDBOADNMPCLCD 
```

这是我的 cookie 的 CURL 设置：

```
$cookiefile = "d:/cookie.txt";

curl_setopt($curl, CURLOPT_COOKIESESSION, 1);
curl_setopt($curl, CURLOPT_COOKIEFILE, $cookiefile);
curl_setopt($curl, CURLOPT_COOKIEJAR, $cookiefile); 
```

我在 cURL 中可能缺少什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:59:27.147

根据 div 集合的性质，它看起来像是来自不同浏览器会话的变量。

即使不是，如何创建应用程序来设置和读取数据也取决于开发人员。

# javascript - javascript去匿名点击功能

> ID：10238453
> 
> 赞同：3
> 
> 时间：2012-04-19T23:50:03.037
> 
> 标签：javascript, jquery, onclick, anonymous-function

这里真的很基本的东西。我想给一个点击函数一个名字并为其分配一些参数。目标是代码可重用性，这样我就可以只为常见任务编写一个通用函数，例如使用户能够删除各种数据。

这是一个[jsfiddle](http://jsfiddle.net/fz5ZT/38/)向您展示我的意思。

这是代码：

的HTML：

```
<button>delete this</button>
<div data-id="3" class="delete">something bad</div>
<div data-id="4" class="delete">something else bad</div> 
```

和JS：

```
// this function would be loaded on my site's template and therefore would be available across my entire site.
function deleteThis(data_id){           
   $('button').on('click', 'button', function(){
      $('div[data-id="'+data_id+'"]').hide();  
   });
}  

var clicked_id=3;
function deleteThis(clicked_id); 
// this function would be called on the various pages where users can delete things and this variable, clicked_id, would be assigned=3 by the user's action on that page. 
```

如何给这个按钮点击事件一个名字？

**更新**谢谢大家！`$('button')`应该是或`$(document.body)`按钮的父元素。如果您进行简单的更改，它就会起作用。您也可以按照 Michael Buen 下面的建议进行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:44:33.060

只需重构您的代码，将删除功能放在自己的功能上

```
<button>delete this</button>
<div data-id="3" class="delete">something bad</div>
<div data-id="4" class="delete">something else bad</div>
​

$('button').on('click', function() { deleteImmediately(3) });

function deleteImmediately(id) { -- refactored code
    $('div[data-id='+id+']').hide();  
}​ 
```

现场测试：http: [//jsfiddle.net/e2kuj/2/](http://jsfiddle.net/e2kuj/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T00:05:12.880

在您的提琴手中，将`(function deleteThis(){})()`其设为私有，并且您正尝试将其作为全局访问！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T00:07:42.097

这几乎是对的。我更新了它-> [http://jsfiddle.net/fz5ZT/41/](http://jsfiddle.net/fz5ZT/41/)

```
function deleteThis(id){
    $('button').click(function(){
        $('div[data-id="'+id+'"]').hide();  
    });    
};
deleteThis(3);​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T01:03:00.587

我认为你误解了事件。deleteThis 只有在处理程序中才有意义。

更正的 HTML：（不要使用自定义属性来引用 HTML - 它们更慢）

```
<button>delete this</button>
<div id="del_3" class="delete">something bad</div>
<div id="del_4" class="delete">something else bad</div> 
```

JS：（未经测试）

```
var deleteTargetId = 'del_3'; //clicked_id renamed for clarity

function deleteThis(targetId){
    $('#'+targetId).remove(); //removes rather than hides the html
}

$('button').click( function(){
    deleteThis(deleteTargetId);
} ); 
```

现在您可以交换 deleteTarget 并且具有该 ID 的 HTML 会被 yoinked。

但是，如果这是家庭作业，我想知道您是否理解作业。名为 'clicked_id' 的 var 表明这个想法是单击 div 以使它们消失并使用委托。那很容易。

您需要了解事件委托和事件冒泡才能了解这里发生了什么。基本上，当单击某些内容时，事件会在父元素上触发，然后是该父元素的父元素，一直到 HTML 标记。所有事件都会发生这种情况，并且不会引起您可能认为的麻烦，因为容器很少被分配事件侦听器。链接和按钮更典型地是端点节点，或者最多包含一个跨度或一个图像。通常当冒泡导致问题时，这是因为有人用 HTML 做了一些糟糕的事情，或者他们应该首先使用委托。

'on' 是曾经适当命名且不易混淆的 'delegate' jquery 方法的新名称。本质上，主体中具有“删除”类的任何内容都会触发处理程序。我们不关心 ID，因为我们的想法是杀死被点击的 div，'this' 为我们提供了对它的引用。这对于 JQ 来说是不寻常的行为，因为大多数方法都会在 'body' 处有 'this' 点，但对于事件委托来说，指向它显然更有用。

```
$('body').on('click', '.delete', function(e){
    $(this).remove(); //this refers to the originally clicked element
} );
//note: not the solution you asked for, but possibly the one you needed. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T23:55:36.673

您可以只使用`$('button').on('click', 'button', clickHandler);`来引用该`clickHandler`函数。

我非常喜欢这些东西，因为除了可重复使用之外，它还具有以下优点。

*   如果 clickHandler 中存在错误，我将能够发送补丁
*   有人可以增强我的方法，而匿名方法是不可能的
*   可读，并且在出现错误时查看堆栈跟踪也很有用

希望有帮助。

**更新：**

```
function clickHandler(ev) {
    ev.preventDefault();
    // ... handler code
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T23:57:21.760

您可以以不同的方式删除元素：

```
 $('button').on('click', function(){
      $(this).next("div").remove();
    }); 
```

[http://jsfiddle.net/fz5ZT/46/](http://jsfiddle.net/fz5ZT/46/)

# view - 更新时无法访问 couchDB 视图

> ID：10238457
> 
> 赞同：4
> 
> 时间：2012-04-19T23:50:43.573
> 
> 标签：view, couchdb

抱歉，我想不出一个更具描述性的标题：我们在更新 couchDB 视图时遇到问题，因为在重新索引设计文档时无法访问它们。是允许陈旧视图的唯一解决方案吗？

在一种情况下，有几个 couchDB 节点相互复制。更新一个视图将导致所有 couchDB 节点重新索引设计文档。是否不能在一个节点上更新视图然后复制结果？我认为问题在于新文档可以在重新索引时插入其他节点。

在另一种情况下，我们有几个 couchDB 节点，它们是读/写和相互复制的。对于 Web 应用程序，还有另一个带有只读 couchDB 节点的集群……它们不会复制出去，而是从读/写池复制到。这里的解决方案可能是将节点从集群中取出，更新视图并等待它重新索引。但是，该节点不会丢失在重新索引期间创建的任何文档吗？是否可以在重新索引时继续接收文档插入？

还有其他可能的解决方案吗？我们正在迁移到第二种情况，这就是我主要关心的问题，但我想知道是否有针对这两种情况的通用解决方案。使用陈旧的视图不是一个理想的场景，因为重新索引可能需要很长时间，而且它是一个高流量的站点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T14:05:51.020

很高兴听到您在 CouchDB 方面取得了成功。

我建议您使用wiki 中描述的[staging-and-upgrade 技术。](http://wiki.apache.org/couchdb/How_to_deploy_view_changes_in_a_live_environment)它需要一些准备才能开始工作，但是一旦你开始工作，它就可以很好地工作，无需任何人力。

# python - 无法安装 Orange：“错误：命令 'clang' 失败，退出状态为 1”

> ID：10238458
> 
> 赞同：10
> 
> 时间：2012-04-19T23:50:59.730
> 
> 标签：python, macos, gcc, orange

我正在尝试在我的 Mac OS X 10.7.3 (Lion) 上安装[Orange](http://orange.biolab.si/)，并且在使用 pip 或从源代码构建时不断收到错误消息。首先，我收到一条错误消息：

```
error: command 'gcc-4.0' failed with exit status 1 
```

我有 Xcode 4，它与 gcc 4.2.1 捆绑在一起。所以我安装了[64-bit/32-bit Python 2.7.3](http://www.python.org/download/)，它内置了 gcc 4.2。我还尝试使用以下方法覆盖编译器选择：

```
export CC=gcc-4.2 
```

但这产生了一个不同的错误：

```
gcc-4.2 not found, using clang instead
...
error: command 'clang' failed with exit status 1 
```

这是完整的日志：

```
$ python setup.py build
running build
running build_py
copying Orange/version.py -> build/lib.macosx-10.6-intel-2.7/Orange
running build_ext
gcc-4.2 not found, using clang instead
building 'Orange.orange' extension
running pyxtract for Orange.orange
/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python ../pyxtract/defvectors.py
/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python ../pyxtract/pyprops.py -n orange
/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python ../pyxtract/pyxtract.py -m -n orange lib_kernel.cpp lib_components.cpp lib_preprocess.cpp lib_learner.cpp lib_io.cpp lib_vectors.cpp cls_example.cpp cls_value.cpp cls_orange.cpp cls_misc.cpp functions.cpp orange.cpp
Parsing lib_kernel.cpp
Parsing lib_components.cpp
Parsing lib_preprocess.cpp
Parsing lib_learner.cpp
Parsing lib_io.cpp
Parsing lib_vectors.cpp
Parsing cls_example.cpp
Parsing cls_value.cpp
Parsing cls_orange.cpp
Parsing cls_misc.cpp
Parsing functions.cpp
Parsing orange.cpp
Warning: class 'PearsonCorrelation' will not be picklable
Warning: class 'ItemsetNodeProxy' will not be picklable
clang -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -INone -Isource/include -Isource/orange/liblinear -Isource/orange/ppp -Isource/orange/px -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c source/orange/assoc.cpp -o build/temp.macosx-10.6-intel-2.7/source/orange/assoc.o -fPIC -fpermissive -fno-common -w -DDARWIN -DORANGE_EXPORTS
clang: warning: argument unused during compilation: '-fpermissive'
In file included from source/orange/assoc.cpp:25:
In file included from source/orange/random.hpp:26:
In file included from source/orange/root.hpp:25:
source/orange/garbage.hpp:221:9: error: use of undeclared identifier 'raiseError'
        raiseError("bad cast from %s to %s", typeid(U).name(), typeid(T).name());
        ^
source/orange/garbage.hpp:253:7: error: use of undeclared identifier 'raiseError'
      raiseError("Orange internal error: NULL pointer to '%s'", TYPENAME(typeid(T)));
      ^
source/orange/garbage.hpp:261:7: error: use of undeclared identifier 'raiseError'
      raiseError("Orange internal error: NULL pointer to '%s'", TYPENAME(typeid(T)));
      ^
source/orange/garbage.hpp:301:7: error: use of undeclared identifier 'raiseError'
      raiseError("Orange internal error: NULL pointer to '%s'", TYPENAME(typeid(T)));
      ^
source/orange/garbage.hpp:312:7: error: use of undeclared identifier 'raiseError'
      raiseError("Orange internal error: NULL pointer to '%s'", TYPENAME(typeid(T)));
      ^
In file included from source/orange/assoc.cpp:27:
source/orange/examplegen.hpp:143:38: error: expected member name or ';' after declaration specifiers
  TExampleIterator::TExampleIterator(const TExampleIterator &other);
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^
source/orange/examplegen.hpp:143:38: error: expected ')'
source/orange/examplegen.hpp:143:37: note: to match this '('
  TExampleIterator::TExampleIterator(const TExampleIterator &other);
                                    ^
source/orange/assoc.cpp:33:1: error: explicit specialization of 'st_classDescription' after instantiation
DEFINE_TOrangeVector_classDescription(PAssociationRule, "TAssociationRules", true, ORANGE_API)
^
source/orange/orvector.hpp:105:57: note: expanded from macro 'DEFINE_TOrangeVector_classDescription'
    TClassDescription TOrangeVector< _TYPE, _WRAPPED >::st_classDescription = { _NAME, &typeid(TOrangeVector< _TYPE, _WRAPPED >), &TOrange::st_classDescription, TOrange_properties, TOrange_components };
                                                        ^
source/orange/ppp/assoc.ppp:111:72: note: implicit instantiation first required here
  {"rules", "association rules", &typeid(POrange), &TAssociationRules::st_classDescription, offsetof(TAssociationClassifier, rules), false, false, 0},
                                                                       ^
8 errors generated.
error: command 'clang' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T03:38:37.950

问题已解决：Xcode 4 实际上并没有附带 gcc-4.2；它带有新的 LLVM 编译器。

这只是一个问题：

```
export CC=llvm-gcc-4.2
export CXX=llvm-g++-4.2 
```

然后建造橙色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:05:07.250

来自[http://orange.biolab.si/forum/viewtopic.php?f=4&t=1568](http://orange.biolab.si/forum/viewtopic.php?f=4&t=1568)

```
export CC=gcc
export CXX=g++
pip install orange # for example 
```

如果您不必了解版本号详细信息，似乎更可靠，对吧？（我以前没有做过这种事情，所以我不确定。）

**更新**：`pip install orange`示例（上面）当前[安装的是旧版本的 Orange（版本 2.5a4 ）而不是 2.6](http://orange.biolab.si/forum/viewtopic.php?f=4&t=1705)。要获取开发版本，请使用：

```
pip install -e hg+https://bitbucket.org/biolab/orange#egg=Orange 
```

我从[这里](http://orange.biolab.si/forum/viewtopic.php?f=4&t=1669&p=4758&hilit=pip#p4758)得到了上面的命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-19T10:47:36.730

我必须执行以下操作来修复 Mac OS Catalina 上的错误。您可以在命令行中运行它，也可以将其放入您的`bash_profile`.

```
export CC=gcc
export CXX=clang 
```

# double - 了解双缓冲

> ID：10238463
> 
> 赞同：1
> 
> 时间：2012-04-19T23:51:33.680
> 
> 标签：double, buffer, hid

我正在使用 C8051F320 并将我的固件基于 HID 示例固件（例如，BlinkyExample）。

IN 和 OUT 报告的长度均为 64B（单个 64B 数据包）。

我启用了 ADC 并将其设置为 10kSps。每个 ADC 中断，一个样本存储在一个数组中。当采集到足够多的样本来填充一个数据包时，就会发送一个 IN 数据包。

软件发送一个报告，告诉固件要返回多少个报告。

1) 示例固件使用 EP1，它有 128B。它将 EP 分成 IN 和 OUT，每个 64B。

固件以 10kSps 的速度丢弃每个 IN 报告的第一个样本。在 5kSps 时它运行良好。

2）我将EP1修改为双缓冲，但现在只有32B长。无论如何，使用 10kSps 数据流式传输 1000 份 IN 报告效果很好（通过软件中采样正弦波的 FFT 确认）。

3）我修改固件以使用 EP2，因为它总共有 256B，如果拆分和双缓冲，则为 64B。

a) 同样，在 10kSps 时，每个数据包的第一个样本被丢弃。为什么？它以 5kSps 运行良好。

实际上，我似乎无法想象双缓冲是如何工作的。如果采样率快于 HID 传输率，FIFO 无论如何都会溢出，对吧？双缓冲有什么帮助？但似乎要使双缓冲有效，数据包大小必须减半。

b) 在将 EP1 的引用切换到 EP2 时，我在 F3xx_USB0_Standard_Requests.c 中遇到了这段代码：DATAPTR = (unsigned char*)&ONES_PACKET;。设置 char* = char* 的地址对我来说似乎不正确。我将其修改为 DATAPTR = (unsigned char*)ONES_PACKET; 无论如何，似乎没有区别。zeros 和 one 数组有什么作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T22:05:25.843

> HID 示例固件

HID 使用中断类型的端点，它每帧*最多*传输一次数据，或者每 1 毫秒传输一次数据 - 根据您的 HID 描述符，它可能会慢得多。这产生了大约 64000 字节/秒的净数据速率。

一旦您需要传输更多数据，请使用批量或同步端点。

# ruby-on-rails - 如何从 gemset 卸载带有依赖项和文档的 Rails？

> ID：10238464
> 
> 赞同：0
> 
> 时间：2012-04-19T23:51:35.270
> 
> 标签：ruby-on-rails, rubygems, gem, rvm, uninstallation

**我做了什么：**

我错误地将 rails 安装到了**错误的 gemset**上。

```
$ rvm use 1.9.3
Using /home/username/.rvm/gems/ruby-1.9.3-p125
$ gem env gemdir
/home/username/.rvm/gems/ruby-1.9.3-p125
$ gem install rails 
```

它应该进入**global gemset**。

```
$ rvm use 1.9.3
Using /home/username/.rvm/gems/ruby-1.9.3-p125
$ rvm gemset use global
Using ruby-1.9.3-p125 with gemset global
$ gem env gemdir
/home/username/.rvm/gems/ruby-1.9.3-p125@global
$ gem install rails 
```

* * *

**问题：**

1.  如何在不影响安装在同一 gemset 中的其他 gem 的情况下卸载使用 rails 以及 rdoc 和 ri 安装的整个 gem 列表？我也可以`cache/`在同一步骤中清理文件夹吗？
2.  据我了解，将通用 gem 安装到**全局**gemset 是最佳实践，而项目特定的 gem 将进入该项目的特定 gemset。那是对的吗？
3.  顺便说一句，无论如何，“错误”的宝石是`/home/username/.rvm/gems/ruby-1.9.3-p125`什么？

我知道类似的问题。

*   [卸载带有依赖项的 Rails 3？](https://stackoverflow.com/questions/3001425/uninstall-rails-3-with-dependencies)
*   [卸载 rails 和 gems，出现错误“无法卸载，检查 'gem list -d ...'](https://stackoverflow.com/questions/4007074/uninstalling-rails-and-gems-getting-error-cannot-uninstall-check-gem-list-d)
*   [如何完全卸载 rails 3.0.0.beta3 及其所有依赖项？](https://stackoverflow.com/questions/3016939/how-to-completely-uninstall-rails-3-0-0-beta3-and-all-its-dependencies)
*   [如何完全卸载 rails、ruby 和 ruby​​gems？](https://stackoverflow.com/questions/2430059/how-do-i-completely-uninstall-rails-ruby-and-rubygems)

不过，我不想重新安装或更新 rails。我只是想从那个特定的 gemset 中删除它。

* * *

**近似/问题1：**

我只找到[了第一个问题的答案](https://stackoverflow.com/questions/4693445/rvm-uninstalling-all-gems-of-a-gemset)。因此，它不会删除 rails 及其依赖项，而是删除**所有 gems**。这就是我按照给出的示例所做的。据我所知，由于没有具体的名称，所以我省略了名称。

```
rvm use 1.9.3
Using /home/username/.rvm/gems/ruby-1.9.3-p125
rvm gemset empty 
```

这删除了 ​​和 下的`doc/`文件`gems/`。但是，`cache/`文件夹[仍然被填满](http://pastebin.com/0v4GEc5n)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:12:26.043

1.  如何卸载整个 gem 列表以及 rdoc 和 ri？

`gem uninstall gemname1 gemname2 ...`

还将删除 ri 和 rdoc，只列出 gem 的名称，不带任何逗号。（您可以列出所有使用“宝石列表”）

更新：“rvm gemset empty”确实工作得更快。

1.  据我了解，将通用 gem 安装到全局 gemset 是最佳实践，而项目特定的 gem 将进入该项目的特定 gemset。那是对的吗？

是的，这是正确的。来自同一 Ruby 版本的所有 Gemset 都可以访问全局 gemset。

1.  顺便说一句，/home/username/.rvm/gems/ruby-1.9.3-p125 下的“错误”gemset 无论如何都有用？

我认为这是全球性的。试试“gemset list”是哪一个。在当前使用的之前会有一个 = 符号，在默认 gemset 之前会有一个 > 符号。

我想也许你的宝石没有错，这可能是你想要的。尝试制作一个新的 Gemset，并对其进行更改并列出所有宝石，可能您会看到所有宝石。

您可以通过以下方式随时移除整个 gemset（全局除外）：

`gemset delete gemsetname`

此外，您可能想要安装没有 ri 和 rdoc 的 rails：

`gem install rails --no-ri --no-rdoc`

# c# - 排序时搜索 DataGrid

> ID：10238465
> 
> 赞同：1
> 
> 时间：2012-04-19T23:51:53.317
> 
> 标签：c#, wpf, search, sorting, datagrid

我已经实现了一个简单的搜索功能，它根据搜索查询突出显示 DataGrid 中的一行。它的要点如下所示：

```
public bool scrollToSearch(string query) {
    dataGrid.SelectedItems.Clear();

    for (; searchIndex < registrants.Count; searchIndex++) {
        foreach (string field in registrants[searchIndex]) {
            if (field.ToLower().Contains(query)) {
                dataGrid.SelectedItem = registrants[searchIndex];
                dataGrid.ScrollIntoView(registrants[searchIndex]);
                searchIndex++;
                return true;
            }
        }
    }     
} 
```

它在列表中搜索匹配项，然后突出显示（选择）该行并将其滚动到视图中。问题是，当对 DataGrid 进行排序时，搜索将突出显示看似随机的行而不是第一个结果，因为它正在搜索原始的未排序列表。有没有办法让我在排序列表中搜索它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:22:40.420

我同意 Anurag 的评论，即 ListCollectionView 是正确的方法。[有关 ListCollectionView 的文档，请参见此处](http://msdn.microsoft.com/en-us/library/system.windows.data.listcollectionview.aspx)。ListCollectionView 在源和显示之间创建另一个层，用于处理排序、过滤和分组。将您的 DataGrid 绑定到 ListCollectionView 并用于`SetCurrent()`指定所选项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:12:45.150

首先这样做....

```
var view = CollectionViewSource.GetDefaultView(registrants); 
```

然后`view`在`registrants`您的代码中使用。

# python - 禁用文件的所有 Pylint 警告

> ID：10238473
> 
> 赞同：114
> 
> 时间：2012-04-19T23:53:41.620
> 
> 标签：python, pylint

我们在构建系统中使用 Pylint。

我们的代码库中有一个 Python 包，其中包含一次性代码，我想暂时禁用一个模块的所有警告，这样我就可以停止用这些多余的消息来干扰其他开发人员。是否有一种简单的方法来`pylint: disable`处理模块的所有警告？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-04-20T00:02:39.643

来自[Pylint 常见问题解答](https://pylint.readthedocs.io/en/latest/faq.html#how-can-i-tell-pylint-to-never-check-a-given-module)：

当 Pylint < 0.25 时，添加

```
# pylint: disable-all 
```

在模块的开头。

Pylint 0.26.1 及更高版本已将该指令重命名为

```
# pylint: skip-file 
```

（但为了向后兼容，将保留第一个版本）。

为了便于查找哪些模块被忽略，会发出*信息*级消息 I0013。对于最新版本的 Pylint，如果您使用旧语法，则会发出额外的 I0014 消息。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2017-04-20T04:37:08.777

Pylint 有[五个消息“类别”](https://pylint.readthedocs.io/en/latest/user_guide/output.html#source-code-analysis-section)（我知道）。

这些类别在过去非常明显，但编号的 Pylint 消息现在已被名称取代。例如，[`C0302`](http://pylint-messages.wikidot.com/messages:c0302)现在`too-many-lines`. 但是“C”告诉我们这`too-many-lines`是一个*公约*信息。这是令人困惑的，因为*约定*消息经常只是显示为警告，因为许多系统（例如[Syntastic](https://github.com/vim-syntastic/syntastic)）似乎将所有内容分类为警告或错误。但是，Pylint 报告仍然将事情分为这些类别，因此它仍然绝对受到支持。

您的问题专门针对*警告*，并且所有 Pylint*警告*消息名称都以“W”开头。

我很难找到这个答案，但[这个答案](https://stackoverflow.com/questions/3125333/disable-all-pylint-convention-messages)最终让我找到了答案。Pylint 仍然支持禁用整个消息类别。因此，要禁用所有*警告*，您可以：

```
disable=W 
```

这可以在命令行中使用：

```
$ pylint --disable=W myfile.py 
```

或者，您可以将其放在您的*pylintrc*文件中：

```
[MESSAGES CONTROL]
disable=W 
```

*注意：您的 rc 文件中可能已经有该`disable`选项，在这种情况下，您应该将“W”附加到此列表中。*

或者，您可以将它内联到您的代码中，它适用于它所在的范围：

```
# pylint: disable=W 
```

要为整个文件禁用它，最好将它放在文件的最顶部。但是，即使在文件的最顶部，我发现我仍然收到`trailing-newlines`警告消息（技术上是*约定*警告，但我正在处理）。

就我而言，我有一个很久以前有人写的图书馆。它运行良好，因此真的不需要担心现代 Python 约定等。我真正关心的是可能会破坏我的代码的错误。

我的解决方案是仅通过在第一行放置以下 Pylint 命令来禁用该文件的所有*Warning*、*Convention*和*Refactoring消息：*

```
# pylint: disable=W,C,R 
```

除了上述用于尾随换行符的消息之外，这正是我所需要的。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-01-26T20:24:28.097

是的，您可以`# pylint: skip-file`在文件中指定，但禁用文件的所有警告是不好的做法。

如果您只想禁用特定警告，可以通过添加注释来完成，例如`# pylint: disable=message-name`禁用文件其余部分的指定消息，或者至少直到`# pylint: enable=message-name`.

例子：

```
# pylint: disable=no-member
class C123:
    def __init__(self):
        self.foo_x = self.bar_x
# pylint: enable=no-member

class C456:
    def __init__(self):
        self.foo_x = self.bar_x 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-23T07:11:44.960

另一种选择是使用`--ignore`命令行选项跳过对某些文件的分析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-03T02:13:22.237

我的用例是运行`pylint *.py`以处理目录中的所有文件，但我想跳过一个特定文件。

添加`# pylint: skip-file`导致 Pylint 失败并显示`I: 8, 0: Ignoring entire file (file-ignored)`. 添加`# pylint: disable=file-ignored`并不能解决这个问题。据推测，这是一个全局错误，而不是特定于文件的错误。

解决方案是包含`--disable=file-ignored`在 Pylint 命令选项中。解决这个问题的时间太长了。`file-ignored`当您明确忽略文件时不应该出现错误。

# django - Django-celery/RabbitMQ 在哪里存储任务结果？

> ID：10238477
> 
> 赞同：2
> 
> 时间：2012-04-19T23:54:18.793
> 
> 标签：django, celery

我的 celery 数据库后端设置是：

```
CELERY_RESULT_BACKEND = "database"
CELERY_RESULT_DBURI = "mysqlite.db" 
```

我使用 RabbitMQ 作为我的消息传递者。

似乎没有任何结果存储在数据库中，但我可以在任务完成后读取结果。它们是在内存中还是在 RabbitMQ 缓存中？

我没有尝试多次阅读相同的结果，所以也许它是一次阅读然后噗！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:24:22.230

CELERY_RESULT_DBURI 用于 sqlalchemy 结果后端，而不是 Django 后端。Django 始终使用在 DATABASES 设置中配置的默认数据库（如果在较旧的 Django 版本上，则使用 DATABASE_* 设置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:11:08.960

我的芹菜守护进程工作得很好，但我在收集任务结果时遇到了困难。task_result.get() 导致超时。并且 task.state 总是 PENDING ..（但工作已完成）我尝试了单独的 sqlite dbs，一个由工作人员共享的单个 postgres db。但我仍然无法得到结果。CELERY_RESULT_DBURI 对我来说似乎没用（对于 celery 2.5 ）我认为这是一个更新的配置。欢迎任何建议...

* * *

编辑：都是我的错：我用装饰器为我的任务提供了额外的参数，**ignore_results=True**参数创建了这个问题。我删除了这个密钥，它就像一个魅力:)

# positioning - 响应式网页设计缺陷

> ID：10238487
> 
> 赞同：0
> 
> 时间：2012-04-19T23:55:39.757
> 
> 标签：positioning, media-queries

我试图让这个网站更具响应性，并开始使用响应式术语（例如 % 和 ems）来制作所有属性，但由于某种原因，它没有我想要的响应式。我决定使用媒体查询来弥补设计缺陷。

我一直在阅读 Ethan Marcotte 的响应式网页设计，它对大部分设计都有很大帮助，但媒体查询似乎不适用于我的 iPad 或 iPod（也就是我做错了什么）。

任何人都可以很容易地确定我做错了什么吗？

[http://thelglymovement.com/](http://thelglymovement.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:24:57.360

我必须完全确定您的代码，但是从我打开您的网站时可以看到的情况来看，下面的样式表导入实际上并没有从您的项目文件夹中找到文件：

```
<link rel="stylesheet" href="styles/base.css"/>
<link rel="stylesheet" href="styles/skeleton.css"/>
<link rel="stylesheet" href="styles/layout.css"/> 
```

似乎加载的唯一文件是

```
<link rel="stylesheet" href="styles/index.css" /> 
```

它不包括任何媒体查询。

当我在 Google Chrome 中调整网站大小时，我没有看到任何有意义的响应更改，因为您的 3 个样式表不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T13:40:11.827

如果它似乎在您的桌面浏览器中运行，但媒体查询在移动设备上不起作用，我可能会猜测您没有视口元标记。IE `<meta name="viewport" content="width=device-width, initial-scale=1">`

这可确保移动设备不会尝试缩小网页以适应其设备大小，而是允许您确定 CSS（和媒体查询）中的宽度。这篇[关于视口元标记的 MDN 文章](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag)可能对更多信息有用。

# networking - 适用于 Windows 7 的无线 Ad-Hoc 网状网络实施

> ID：10238488
> 
> 赞同：5
> 
> 时间：2012-04-19T23:55:41.023
> 
> 标签：networking, wireless, adhoc, mesh-network

我一直[在研究 Microsoft Research的](http://research.microsoft.com/en-us/projects/mesh/)*Mesh Connectivity Layer* 。

该实现似乎仅适用于 Windows XP。

是否有任何免费的`Ad-hoc Mesh`支持可以帮助我进行多跳 ad-hoc 网状网络？我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-06T08:15:38.427

作为记录，在 Windows 中做任何特别的事情的唯一当前方法是使用`netsh`命令的`wlan * hostednetwork`选项，例如

```
netsh wlan set hostednetwork ssid="My AdHoc Network" key=YourPassword keyUsage=persistent mode=allow
netsh wlan start hostednetwork
netsh wlan show hostednetwork 
```

这当然不是网格，而是目前微软唯一接近的官方解决方案。

它只能手动启动，因此如果您希望它在启动时启动，您需要为此创建一个任务计划程序条目。

# c# - WinRT 中 Dispatcher.invoke 的线程问题

> ID：10238494
> 
> 赞同：0
> 
> 时间：2012-04-19T23:56:42.817
> 
> 标签：c#, multithreading, windows-8, windows-runtime

我前段时间在[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/0f787059-7695-4666-a69d-41fcc41c10d2)上发布了一个问题，涉及以下代码。它在一个新线程上创建，从文件中读取缩略图并通过 Dispatcher 显示它。

```
private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        Task.Factory.StartNew(async()=>{
            var localFolder = Windows.Storage.ApplicationData.Current.LocalFolder; ;

            var file = await localFolder.CreateFileAsync(".txt", Windows.Storage.CreationCollisionOption.OpenIfExists);
            var t = await file.GetThumbnailAsync(Windows.Storage.FileProperties.ThumbnailMode.DocumentsView);
            //Some proccessing....
            this.Dispatcher.Invoke(Windows.UI.Core.CoreDispatcherPriority.Normal,(a,b)=>{
                var bmp = new BitmapImage();
                bmp.SetSource(t); //Exception here
                image.Source = bmp;
            }, this, null);
            //Some more stuff...
        });
    } 
```

*image*只是 XAML 中的一个 Image 控件

如果上面的代码执行，我会得到一个很大的异常。异常发生在`bmp.SetSource(t)`。

这是完整的异常信息：

> 此 RuntimeCallableWrapper 转换到 COM 上下文 0x1347668 失败并出现以下错误：由于应用程序正在调度输入同步调用，因此无法进行传出调用。（来自 HRESULT 的异常：0x8001010D (RPC_E_CANTCALLOUT_ININPUTSYNCCALL)）。这通常是因为创建此 RuntimeCallableWrapper 的 COM 上下文 0x1347668 已断开连接，或者它正忙于做其他事情而无法处理上下文转换。不会使用代理来为 COM 组件上的请求提供服务，而是直接调用 COM 组件。这可能会导致损坏或数据丢失。为避免此问题，请确保所有 COM 上下文/公寓/线程保持活动状态并且可用于上下文转换，

从使用 Invoke 切换到 InvokeAsync 解决了这个问题，但我想知道为什么。有人可以解释吗？

编辑：上面只是一些测试代码。我创建的任务旨在模拟在我的应用程序中发生的非 UI 线程上下文下的执行，因为它需要从非 UI 线程上下文读取文件和更新 UI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:48:38.303

`Task`鉴于您最终只是在 UI 线程上调用它，我无法理解单击处理程序内部的原因。

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
  var localFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
  var file = await localFolder.CreateFileAsync(".txt", Windows.Storage.CreationCollisionOption.OpenIfExists);
  var t = await file.GetThumbnailAsync(Windows.Storage.FileProperties.ThumbnailMode.DocumentsView);
  var bmp = new BitmapImage();
  bmp.SetSource(t); //Exception here
  image.Source = bmp;
} 
```

# xml - 使用从 VB.Net 到 XML 的换行符

> ID：10238495
> 
> 赞同：1
> 
> 时间：2012-04-19T23:56:54.787
> 
> 标签：xml, vb.net, vb.net-2010

我正在将数据从 vb 项目写入 XML 文档。当我回想数据时，所有以前的笔记都以一长行文本的形式返回。如何通过提交 XML 文档来打破界限？

代码：

```
Private Sub btnSave_Click(sender As System.Object, e As System.EventArgs) Handles     btnSave.Click

        Dim AcctNum = txtAcctNum.Text.ToString

        'Dim note1 As String = ""

        'Dim linebreak As String = "<br />"

        'Str & VBNewLine
        'Str & VBCrLf

        Dim note2 As String = TxtNotes.Text
        'note2(0) = vbNewLine
        'note2(1) = TxtNotes.Text()

        Dim note3 As String = txtPastNote.Text

        note2 = note3 + "\n" + note2

        Dim root As XElement = XElement.Load("CreditApp.xml")

        Dim customer = From el In root.<custData>
                       Where el.<AcctNum>.Value = AcctNum
                       Select el

        For Each element In customer
            element.SetElementValue("Note", note2)
        Next

        'Dim NewNote As String = note1 + note2

        'Dim doc As New XmlDocument
        'doc.Load("CreditApp.xml")

        'Dim custData As XmlElement = doc.CreateElement("custData")

        'Dim note As XmlElement = doc.CreateElement("Note")
        'note.InnerText = NewNote

        'custData.AppendChild(note)
        'doc.DocumentElement.AppendChild(custData)

        root.Save("CreditApp.xml")
        MessageBox.Show("NOTES SAVE")

    End Sub 
```

从 XML 检索元素的代码：

```
 For Each element In customer
            txtSSN.Text = element.ssn
            txtfName.Text = element.fname
            txtlName.Text = element.lname
            txtAcctNum.Text = element.acctnum
            txtVerfiWord.Text = element.passcode
            txtAcctAmt.Text = element.acctAval
            txtAcctBal.Text = element.acctbal
            txtLPmtAmt.Text = element.lpmtamt
            txtLPmtDate.Text = element.lpmtdate
            txtGender.Text = element.gender
            txtAddress.Text = element.address
            txtCity.Text = element.city
            txtState.Text = element.state
            txtZip.Text = element.zip
            txtPhone.Text = element.phone
            txtEmail.Text = element.email
            txtCreditLmt.Text = element.creditlim
            txtIntRate.Text = element.intrate
            txtMinPmtDue.Text = element.minpay
            txtPmtDueDate.Text = element.pmtduedate
            txtPastNote.Text = element.note

end sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:12:09.373

我假设您使用的是 TextBox，它的 Multiline 属性设置为 True 并且您用于 NewLine 的字符是从 xml 文件输入的字符串的一部分，您可以尝试使用[String.Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)或者如果您需要拆分成单独的字符串，您可以使用[String.Split](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)

```
txtPastNote.Text = element.note.Replace("\n", vbCrLf) 
```

# php - UL list with php while 语句，怎么做才对？

> ID：10238496
> 
> 赞同：0
> 
> 时间：2012-04-19T23:56:58.730
> 
> 标签：php, html, css

这是代码...

```
<?php
    $query = mysql_query("SELECT * FROM subjects");
    while($fetch = mysql_fetch_array($query)){
    echo "<li>" .  $fetch["menu_name"] . "</li>";   
        echo "<ul>";
        $query = mysql_query("SELECT * FROM pages WHERE subject_id = {$fetch["id"]}");
        while($fetch = mysql_fetch_array($query)){
        echo "<li>" .  $fetch["menu_name"] . "</li>";}
        echo "</ul>";
    }?> 
```

问题是它得到一个“主题”和它下面的其余“页面”......

我希望它得到它下面的所有主题和所有页面

我希望你能理解我提前谢谢法里斯法哈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:00:29.397

您正在重用和覆盖您的`$query`变量。在内部`while`循环遍历结果集之后，外部`while`循环不再循环。

将第二个`$query`变量重命名为其他变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T00:47:16.633

你想显示什么，请包括它。

显示数据的正确方法是：

```
<?php 
$query = "SELECT * FROM subjects";
$result = mysql_query($query);
while($row= mysql_fetch_assoc($result)):
?>
     <ul>
        <!-- field_name is the field name of the table you want to display-->
        <li><?php echo $row['field_name']?></li>
        <li><?php echo $row['field_name2']?></li>
        <li><?php echo $row['field_name3']?></li>
     </ul>
<?php endwhile; ?> 
```

此外，如果您需要两个查询，另一个 QUERY 的名称必须与另一个不同，因此如果您有上面的代码并且想要另一个查询，请创建如下代码：

```
<?php 
$query2 = "SELECT * FROM pages WHERE subject_id = '$row['id']'";
$result2 = mysql_query($query2);
while($row2 = mysql_fetch_assoc($result2)):
?>
    <!-- code for fetching of data here -->
<?php endwhile; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T00:01:36.493

我可能错了。但可能是因为您将变量`$query`用于两个 mysql 查询。尝试使用不同的变量，例如`$query1`内部变量或其他有用的名称。

# git - 忽略目录和下面的所有内容，需要澄清

> ID：10238502
> 
> 赞同：0
> 
> 时间：2012-04-19T23:57:33.757
> 
> 标签：git, gitignore

我想忽略的文件在`my-client/target/surefire-reports/*.txt`

我的`.gitignore`contains `*/surefire-reports/*.txt`，但忽略似乎没有发生。当我`mvn install`创建新报告并且测试数据出现需要提交时。

我的`.gitignore`不正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:00:59.400

我认为您的 .gitignore 中的路径应该有效。

在添加 git ignore 行之前，是否已将 mvn install 生成的文件添加到您的 git 存储库中？如果是这样，请查看[其他 SO 线程](https://stackoverflow.com/questions/1139762/gitignore-file-not-ignoring)

# entity-framework-4 - 实体框架 GroupBy 对象或 ComplexType

> ID：10238504
> 
> 赞同：12
> 
> 时间：2012-04-19T23:57:38.297
> 
> 标签：entity-framework-4, linq-to-entities, group-by

是否可以对对象执行分组？

```
from item in context.Items
group item by item.MyObject
select ... 
```

其中 Item.MyObject 是一个简单的对象，例如：

```
public class MyObject {
    public int SomeValue { get; set; }
    public string SomeName { get; set; }
    public string SomeOtherProperty { get; set; }
} 
```

显然我可以做到以下几点：

```
from item in context.Items
group item by new { item.SomeValue, item.SomeName, item.SomeOtherProperty }
select ... 
```

但是，当按具有很多属性的对象进行分组时，这种方法既乏味又容易出错。

上面的代码导致 NotSupportedException 并显示以下消息：“调用 'GroupBy' 方法的键选择器类型在基础存储提供程序中不可比较”。覆盖 Equals 和 GetHashcode 没有任何效果。我猜真正的问题是实体框架不知道如何表达 SQL ......？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T21:52:45.573

可惜，不，你不能那样做。ComplexType 看起来很有希望，并且似乎是一个不错的“列组”——但 EF 团队只是将其设计为完全用于其他用途，并且与将其用作“列组”相关的大量功能完全缺失。

据我所知，“显然我可以做到以下几点：”是唯一可能的方法。您只需要在每个子列的基础上定义分组，或者通过投影到数据库将知道如何比较的某种类型。

核心问题是 EF 团队**不将 ComplexType 视为一组列**，这些列允许您使用许多字段来整理您的实体，但是，对于他们来说，**它是另一种类型的实体，一种短暂的实体**. ComplexType 旨在表示例如从存储过程（或表返回函数）返回的对象，该存储过程返回无法映射到任何正常现有表/类的 5 列结果集。例如，假设您有一个包含 50 个列/字段的表/类 Customer，其中大多数不为空并表示一些敏感数据。您创建了一个存储过程，它获取客户的 ID 并返回其{姓名、地址、联系电话、鞋码}。显然，拥有这样的修剪结果集，您无法将其解码/映射到具有大量*不能*为空的字段的 Customer 类。那么如何在 EF 中表示结果集？

第一个选项，相当蹩脚的一个，是简单地忽略 EF 并直接与数据库对话并手动读取/翻译/解压缩行/列。好吧，我们知道 SqlClient，我们可以做到这一点。

第二个选项，丑陋的一个，是在 EF 中定义一个存根表/视图，例如 CustomerView，它只包含 {name、address、contact phone、shoe size} 列，并将存储过程结果集映射到它。它会很好地工作，但如果你不小心从 EF 模型“生成数据库”，你也会得到那个额外的未使用的表。

救援的第三个选项是 ComplexType。无需尝试创建影子表或视图，您只需告诉 EF “有一些额外的数据类型”**永远不会映射到自己的表，也永远不会定义 PrimaryKey**，EF 将为您方便将其映射到与任何其他数据对象一样的类。现在，有了这样的类型，您可以从过程中返回它并将其作为类型良好的对象检索，您可以将其作为过程的参数传递等等。但是：您不能单独将其持久化。它没有自己的表映射，也没有自己的主键。它**没有身份**。

这很好，但是，为什么要从过程中返回这样的数据类型呢？可能该过程处理或生成了一些数据，并且您希望**将它们存储**在某个表中。你还没有定义一个完整的普通实体，所以那个东西只是一个“数据包”，所以你可能会将该结果值与其他数据一起写入该表。这就是为什么 EF 允许您将 ComplexType 映射到表的某些列：如果您从过程中获得了该临时结果对象，并且现在您想将其写入某处，则不必逐列手动进行，您只需将其映射到客户的“姓名、地址、联系电话、鞋码”列。

最重要的一点是，数据库服务器永远不知道存在这样的 ComplexType。正如我所说，它没有身份。当您尝试执行 LINQ 查询时

```
aset.Where(item => item.complexProperty == complexValue) 
```

那么，complexValue 是一个没有映射到任何表的 CLR 对象，没有标识，因此没有 PK，因此 EF 完全没有想法如何检查“左手对象”是否与“右手对象”相同。如果对象定义了一些身份，它可以在服务器端检查 PK，或者在客户端进行对象引用比较，但是在这里 - 它只是失败了。

我完全同意这是 EF 中缺少的另一个该死的有用功能。我相信 EF 团队可以非常容易地逐列比较 ComplexType，但他们没有。他们根本没想到 ComplexTypes 可以用来整理表格。他们的意思是它是一个瞬态数据包，可以传递给存储过程和函数。可惜。

# mysql - MAMP Pro 2.0.2 - 在 Dropbox 上同步的 Mysql db 不知何故变得不同步？

> ID：10238510
> 
> 赞同：0
> 
> 时间：2012-04-19T23:58:49.083
> 
> 标签：mysql, synchronization, mamp, dropbox

[根据本教程](http://wesbos.com/dropbox-your-mamp-mysql-databases/)，我正在使用 Dropbox 通过符号链接同步一些 MAMP mysql 数据库。它们在我的笔记本电脑和台式机之间同步。

很长一段时间以来，一切都运行良好。我没有改变任何东西，突然间我注意到数据库不同步。例如，在一个 wordpress 数据库中，我做了一些没有反映在另一台计算机上的更改，即使在 Dropbox 有足够的时间“同步”之后，Mamp 只在一个系统上运行并在打开之前退出其他。

跑步

> 工具 > 检查 MySQL 数据库

将每个相关的数据库/表显示为“OK”

两台计算机都符号链接到同一个文件夹，所以我真的不确定这里发生了什么。我真的不确定如何解决这个问题，因为即使是保管箱修订/文件历史记录也没有显示任何冲突或任何东西。就好像数据被存储在其他地方一样，即使两者都链接到同一个地方。

为了补救，我不得不从一个系统创建一个 mysqldump 并将其重新导入到另一个系统，但这违背了目的。

如果有人有关于如何开始解决此问题的提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:15:53.337

您正在做的事情与文章推荐的内容之间存在根本区别。这篇文章使用 Dropbox 作为单向同步。所以只在一台服务器上运行 MySQL 服务器，然后使用 Dropbox 将数据库的远程副本存储在“云”中。

在您的情况下，听起来您正在尝试使用 Dropbox 同步两个正在运行的 MySQL 服务器。MySQL 并非设计为以这种方式工作。为此目的有一个完整的（复杂的）功能，称为[复制](http://dev.mysql.com/doc/refman/5.0/en/replication.html)。我强烈建议您不要使用 Dropbox 来同步在多台机器上运行 MySQL 服务器的数据库。

关于同步失败，听起来像是 Dropbox 的问题。你有足够的空间吗？您可能需要联系他们的支持人员以了解您的符号链接未正确同步的原因。

# java - 在每个请求之前运行资源方法

> ID：10238511
> 
> 赞同：4
> 
> 时间：2012-04-19T23:58:54.527
> 
> 标签：java, cxf, jax-rs

我有一些代码可以将一个参数（cookie）传递给任何路径，我想以同样的方式处理它：

```
@Path("/some/path")
public class JaxRsService {

    public void doStuff(@CookieParam("cookie") Cookie cookie) {
        handleCookie(cookie);
        // etc.
    }

    public void doStuff2(@CookieParam("cookie") Cookie cookie) {
        handleCookie(cookie);
        // etc.
    }

    public void doStuff3(@CookieParam("cookie") Cookie cookie) {
        handleCookie(cookie);
        // etc.
    }
} 
```

有没有办法从每种方法中考虑到这一点？我尝试创建一个 setter，但 setter 只在构造时被调用，所以 cookie 不可用..

```
@Path("/some/path")
public class JaxRsService {

    // This never gets called
    @CookieParam("cookie")
    public void setCookie(Cookie cookie) {
       cookie // stuff
    }

    // etc.
} 
```

同样，有`@PostContruct`注释，但它只适用于构造时间。

将 cookie 添加为类变量可以正常工作，但我仍然必须在每个请求中调用该方法：

```
@Path("/some/path")
public class JaxRsService {

    // This never gets called
    @CookieParam("cookie")
    Cookie cookie;

    public void doStuff() {
        handleCookie();
        // etc.
    }

    public void doStuff2() {
        handleCookie();
        // etc.
    }

    public void doStuff3() {
        handleCookie();
        // etc.
    }
} 
```

有什么好的方法来处理这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:47:46.107

在 CXF 中，“拦截器”是装饰请求的标准方式。不过，我不知道便携式方法。

...另一种方法可能是（也是专有的）[http://cxf.apache.org/docs/jax-rs-filters.html](http://cxf.apache.org/docs/jax-rs-filters.html)（本质上几乎相同）

# python - uwsgi postfork 不工作

> ID：10238513
> 
> 赞同：2
> 
> 时间：2012-04-19T23:59:06.493
> 
> 标签：python, python-2.7, uwsgi

我似乎无法让我的@postfork 函数运行......

```
 1 import uwsgi
  2 from uwsgidecorators import *
  3 from gevent import monkey; monkey.patch_all()
  4 import sys
  5 import umysql
  6 import time
  7 
  8 DB_HOST = 'stage.masked.com'
  9 DB_PORT = 3306
 10 DB_USER = 'masked'
 11 DB_PASSWD = 'masked'
 12 DB_DB = 'masked'
 13 
 14 mysql_conn = None
 15 
 16 @postfork
 17 def zebra():
 18     print "I AM ZEBRA"
 19     raise
 20     
 21 @postfork
 22 def setup_pool():
 23     global mysql_conn
 24     mysql_conn = umysql.Connection()
 25     print "HIII" 
 26     sys.stderr.write(str(mysql_conn.is_connected()))
 27     mysql_conn.connect (DB_HOST, DB_PORT, DB_USER, DB_PASSWD, DB_DB)
 28     sys.stderr.write(str(mysql_conn.is_connected()))
 29     
 30 def application(env, start_response):
 31     print "HALLO" 
```

当我启动 uwsgi 时，我什么也得不到，直到我到达路由（在调用这个 py 应用程序的 nginx 中定义）。下面是我如何启动 uwsgi：

```
# uwsgi --socket=/tmp/uwsgi_server.sock --master --processes=2 --listen=4096 --disable-logging --loop gevent --async 128 --uid=www-data --gid=www-data --vhost
*** Starting uWSGI 1.1.2 (64bit) on [Thu Apr 19 23:55:32 2012] ***
compiled with version: 4.6.1 on 18 April 2012 20:10:46
current working directory: /ebs/py
detected binary path: /usr/local/bin/uwsgi
setgid() to 33
setuid() to 33
your memory page size is 4096 bytes
detected max file descriptor number: 1024
async fd table size: 1024
allocated 130048 bytes (127 KB) for 128 cores per worker.
VirtualHosting mode enabled.
lock engine: pthread mutexes
uwsgi socket 0 bound to UNIX address /tmp/uwsgi_server.sock fd 3
Python version: 2.7.2+ (default, Oct  4 2011, 20:41:12)  [GCC 4.6.1]
Python main interpreter initialized at 0xbb9ad0
your server socket listen backlog is limited to 4096 connections
*** Operational MODE: preforking+async ***
*** no app loaded. going in full dynamic mode ***
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI master process (pid: 3340)
spawned uWSGI worker 1 (pid: 3341, cores: 128)
spawned uWSGI worker 2 (pid: 3342, cores: 128)
*** running gevent loop engine [addr:0x451080] ***
WSGI app 0 (mountpoint='masked.com|') ready in 0 seconds on interpreter 0xbb9ad0 pid: 3342 
```

当我到达路线时，我得到：

```
HALLO 
```

如何让我的 @postfork 函数运行？我的最终目标是在应用程序功能中获得连接池。

谢谢！

更新：如果我将 --vhost 换成 --wsgi-file=server.py，它会按预期工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T12:29:26.800

如果您使用动态应用程序，则没有可捕获的 fork()（fork() 都发生在应用程序加载之前）

您可以在 .py 文件中移动 postfork 挂钩，您可以在服务器启动时使用

--import 模块名/文件名

# ruby-on-rails - 使用 gem install 安装后无法使用“rails”命令

> ID：10238514
> 
> 赞同：0
> 
> 时间：2012-04-19T23:59:12.413
> 
> 标签：ruby-on-rails, linux, rubygems

我已经使用“gem install rails”安装了 rails，但是当我尝试创建一个新项目时，我收到错误：当前未安装程序“rails”。您可以通过键入以下内容来安装它：

```
sudo apt-get install rails 
```

运行“gem install rails”时没有错误消息。为什么我不能运行 rails 命令？

当我执行 sudo apt-get install rails 时，它将安装旧版本的 ruby​​ 1.8。我想要最新的，所以我不想从 apt-get 安装 rails。

编辑：想通了。必须将 PATH="${PATH}:/var/lib/gems/1.8/bin/" 添加到 .bashrc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:25:33.120

rails 的命令不是 'gem rails' 它只是 'rails'

要安装导轨：

```
gem install rails 
```

创建一个新的 Rails 应用程序

```
rails myapp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:29:43.350

重启你的机器，这有时会在 Ubuntu 上发生在我身上，99% 的时间我只需要重新启动

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T12:42:34.817

> rails 的命令不是 'gem rails' 它只是 'rails'
> 
> 要安装导轨：
> 
> gem install rails 创建一个新的 rails 应用程序
> 
> **rails new myapp**

# php - 我想在他们登录时显示在线用户

> ID：10238515
> 
> 赞同：0
> 
> 时间：2012-04-19T23:59:14.550
> 
> 标签：php, login

我想显示： 登录为：***_* __ *_* ___**

到目前为止的代码：

登录检查，

```
<?php
include('config.php');

// username and password sent from form 
$myemail=$_POST['myemail']; 
$mypassword=$_POST['mypassword'];

// To protect MySQL injection
$myemail = stripslashes($myemail);
$mypassword = stripslashes($mypassword);
$myemail = mysql_real_escape_string($myemail);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE email='$myemail' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

if($count==1){
session_start(); 
$_SESSION['myemail'] = $myemail; 
header("Location: http://www.jblanksby.yourwebsolution.net/login_success.php?            user=$myemail"); } 
else 
{ header("Location: http://www.jblanksby.yourwebsolution.net/loginerror.php"); 
} 
?> 
```

登录成功页面/第一个会员页面，

```
<? 
$email = $_GET['myemail']; 
session_start(); 
$_SESSION['myemail'] = $email;  

if(isset($_SESSION['email'])){ 
} else { 
echo " 
<script language='javascript'> 
alert('Sorry, but you must login to view the members area!') 
</script> 
<script> 
window.location='http://jblanksby.yourwebsolution.net/sign_in.php' 
</script> 
"; } 
?>

<html>
blah blah blah
</html> 
```

用于显示用户电子邮件的代码，

```
Logged in as: <? echo "$email"; ?> 
```

事物的登录方面是完美的。仅显示用户电子邮件被证明是困难的。我做错了什么/错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:01:17.867

由于您试图从会话中显示值，因此您必须使用`$_SESSION['email']`.

```
session_start(); // Or, if you have done it ahead, then omit this
echo "Logged in as:".$_SESSION['email']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T00:17:48.243

使用 Starx 建议，`$_SESSION`但您需要将您的`session_start`作为 PHP 页面的第一行移到上方`$email = $_GET['myemail'];`（或`$email = $_SESSION['email']`）

```
<?php
session_start();
$email = $_SESSION['email'];
?> 
```

**添加**

要使用 session 变量，请像这样声明它（假设您在表单提交中使用 method=post）：

```
<?php
session_start();
$_SESSION['email'] = $_POST['email'];
?> 
```

这对于用户输入当然是不安全的，假设您在将用户输入从一个页面传递到另一个页面并将其注入您的查询之前对其进行了清理，这只是一个简单的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T00:35:25.817

登录脚本：

```
$username = $_POST['username'];
$password = $_POST['password'];
$password = sha1($password);

if ($username&&$password) {
        require_once('../db/nstDBconnector.php');
        $qr = "SELECT * FROM `users` WHERE `username` = '$username'";
        $query = mysql_query($qr);
        $numrows = mysql_num_rows($query);

        if ($numrows!=0) {
            // check password against the password in the database
            while ($row = mysql_fetch_array($query, MYSQL_ASSOC)) {
                $storedUsername = $row['username'];
                $storedPassword = $row['password'];
                $storedUserType = $row['user_type'];
                $storedUserFName = $row['full_name'];
                $_SESSION['last_ip'] = $_SERVER['REMOTE_ADDR'];
            }
            // check to see if username and password match
            if ($username==$storedUsername&&$password==$storedPassword) {
                ob_start();
                session_start();
                $_SESSION['username'] = $storedUsername;
                $_SESSION['user_type'] = $storedUserType;
                $_SESSION['full_name'] = $storedUserFName;
                header ('Location: main.php?login=successful');
            } else {
                header ('Location: index.php?error=incorrectPassword');
            }
        } else {
            header ('Location: index.php?error=noUser');
        }
    } else {
        header ('Location: index.php?error=missingUserAndPass');

    } 
```

登录后您将他们带到的页面：

```
if ($_SESSION['username']) {
    $userLogged = $_SESSION['username'];
    $userType = $_SESSION['user_type'];
    $userFName = $_SESSION['full_name'];
} else {
    header ('Location: http://www.yourdomain.com/index.php?error=notLoggedIn');
} 
```

要在页面上显示用户名的位置：

```
Logged in as <?php echo $userFName; ?>. 
```

或者

```
echo "Logged in as ", $userFName, "."; 
```

# json - 使用 Sencha 从 JSON 创建 ListView

> ID：10238525
> 
> 赞同：0
> 
> 时间：2012-04-20T00:00:38.093
> 
> 标签：json, list, sencha-touch, sencha-architect

我刚开始使用 Architect 玩 Sencha Touch，我正在尝试使用 PHP 将 MySQL 数据库中的列表填充到 JSON。我让 Architect 生成脚本，但我似乎无法让它在运行时填充/显示数据。我确信我遗漏了一些东西，所以我们将不胜感激。以下是支持的代码片段。

提供的 PHP：

```
<?php//MySQL Database Connect
include 'andaerologin.php';

mysql_select_db("andaero");
$sql = mysql_query("select * from regulatory_list");

$output = array();
/* used "key" as name */
$output['listTitle'] = 'Regulatory_Guidance_Library';
$output['targetKey'] = 'bodyContent';

while ($row = mysql_fetch_assoc($sql)) {
    $output['items'][] = $row;
}

header('Cache-Control: no-cache, must-revalidate');
header('Content-type: application/json');
echo(json_encode($output));

mysql_close();
?> 
```

自动生成的 app.js：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    models: [
        'ListDefaultModel'
    ],
    stores: [
        'ACListStore'
    ],
    views: [
        'ViewPort'
    ],
    name: 'MyApp',

    launch: function() {

        Ext.create('MyApp.view.ViewPort', {fullscreen: true});
    }

}); 
```

生成的模型（ListDefaultModel.js）：

```
Ext.define('MyApp.model.ListDefaultModel', {
    extend: 'Ext.data.Model',
    config: {
        idProperty: 'listDefaultModel',
        fields: [
            {
                allowNull: false,
                name: 'label',
                type: 'string'
            },
            {
                name: 'title',
                type: 'string'
            },
            {
                name: 'discription',
                type: 'string'
            }
        ]
    }
}); 
```

商店（ACListStore）：

```
Ext.define('MyApp.store.ACListStore', {
    extend: 'Ext.data.Store',
    requires: [
        'MyApp.model.ListDefaultModel'
    ],

    config: {
        model: 'MyApp.model.ListDefaultModel',
        storeId: 'ACListStore',
        proxy: {
            type: 'ajax',
            url: 'http://192.168.1.34/andaero/php/regulatory_list.php',
            reader: {
                type: 'json',
                rootProperty: 'items'
            }
        }
    }
}); 
```

ViewPort.js 中的列表容器：

```
. . .
xtype: 'list',
cls: [
      'list-Container'
       ],
        itemTpl: [
                '<div>',
                 '<h1>label {script}</h1>',
                 '<h2>title {script}</h2>',
                 '<p>description {script}</p>',
                 '<hr/>',
                 '</div>'
         ],
          scrollToTopOnRefresh: false,
          grouped: true
. . . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:46:48.770

不是您视图中的数据存储，您可以在下面执行

```
... 
xtype: 'list'
cls: ['list-Container'],
store: MyApp.store.ACListStore
itemTpl:'....'
... 
```

# r - 具有十六进制颜色的 R 散点图

> ID：10238526
> 
> 赞同：3
> 
> 时间：2012-04-20T00:00:40.540
> 
> 标签：r, colors, hex, factors

我有一个 CSV 文件，其中包含 3 列、X 值、Y 值及其对应的十六进制 (#RRGGBB) 值。我一直在尝试创建一个散点图/气泡图，其中气泡的内部根据十六进制值着色。

```
symbols(year, logtrans, circles=size, inches=0.05, bg=intel2$HexLogClock) 
```

intel2$HexLogClock 包含十六进制值。

再次抱歉这个菜鸟问题，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T00:19:39.867

我认为您的问题可能在于十六进制值不是字符。确保他们是第一位的。请参见下面的示例：

```
year <- 1:5
logtrans <- log(year)
size <- rep(15,5)
intel2 <- data.frame(HexLogClock=c("#330000", "#FFFFCC", "#660000", "#FF0000", "#00FF00"),stringsAsFactors=FALSE)
symbols(year, logtrans, circles=size, inches=0.05, bg=intel2$HexLogClock) 
```

请注意`stringsAsFactors=FALSE`代码，您可以为其指定代码`read.csv`和其他导入方法，以确保您的字符数据不会转换为因子。

您可以使用以下方法对您的数据执行此操作：

```
intel2$HexLogClock <- as.character(intel2$HexLogClock) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T00:29:32.113

我想`intel2$HexLogClock`存储为`factor`. 用 确认这一点`class(intel2$HexLogClock)`。在这种情况下，因子的每个级别由一个整数表示（根据因子级别第一次出现的顺序分配），因此您的第一个`HexLogClock`颜色将是黑色（1 = 黑色），然后是红色，然后是绿色，蓝色，青色等。

要纠正这个问题，您需要转换`intel2$HexLogClock`为字符向量，因此：

```
intel2$HexLogClock <- as.character(intel2$HexLogClock) 
```

之后，您的命令应该可以按预期工作。

或者：

```
symbols(year, logtrans, circles=size, inches=0.05, 
        bg=as.character(intel2$HexLogClock)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T00:05:57.007

我想我误解了，如果是这样，请告诉我，但您可以提供十六进制值，`col`如下所示：

```
barplot(1:3, axes=FALSE, col=c("#330000", "#FFFFCC", "660000")) 
```

# asp.net-mvc-3 - 如何验证 MVC 3 中的多字段？

> ID：10238528
> 
> 赞同：0
> 
> 时间：2012-04-20T00:00:46.860
> 
> 标签：asp.net-mvc-3, jquery-validate, validation, fluentvalidation, rule-engine

如何将 MultiFieldRequired 验证为一个属性以输出一条错误消息，并与 mvc3 中的 jquery 客户端验证集成？

我在这里尝试了[MultiFieldRequired](https://stackoverflow.com/questions/6075339/mvc-form-validation-on-multiple-fields) ，但没有客户端验证消息。

[fluentvalidation.net](http://fluentvalidation.codeplex.com/)或[rulesengine](http://rulesengine.codeplex.com/)可以做到这一点吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:05:44.553

如果您不关心客户端，则可以在服务器端实现**IValidateableObject**并以这种方式提供单个消息验证。

```
公共 IEnumerable 验证（ValidationContext 验证上下文）
{
    if (string.IsNullOrEmpty(field1) || string.IsNullOrEmpty(field2))
    {
        yield return new ValidationResult("你的单一验证信息");
    }
}

```

# jquery - jquery 切换中的错误导致可怕的工件

> ID：10238530
> 
> 赞同：0
> 
> 时间：2012-04-20T00:01:05.737
> 
> 标签：jquery, toggle, shadow, slidedown, artifacts

查看示例以了解我的意思：

[http://jsfiddle.net/3PVsy/](http://jsfiddle.net/3PVsy/)

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:07:29.413

这是对不透明度的错误处理（通常是 IE 特定的）。为具有工件的元素设置背景颜色，例如`label{background-color:#fff}`. 您需要在最后可能的后代元素上设置它。

# php - 使用sql数据动态选择列表

> ID：10238535
> 
> 赞同：0
> 
> 时间：2012-04-20T00:01:39.363
> 
> 标签：php, list, select, dynamic, option

我正在尝试使用 php 创建一个选择下拉列表。每次我尝试，我都会得到一个错误。这是我的代码：

功能：

```
function dropDown(){

$options="<select>"; 
$connect = mysql_connect('localhost','id','pass') or die ("couldn't   connect!").mysql_error; 

mysql_select_db('db') or die('could not connect to database!');

$sql="SELECT * FROM DESC"; 
$result=mysql_query($sql); 

while ($row=mysql_fetch_array($result)) {  ****this is line 60

$name=$row["name"]; 

$options.="<option value=\"$name\">".$name."</option>"; 
} 

$options.= "</SELECT>";
return "$options";
} 
```

然后我就在我的代码中调用它

```
<?php  
 include ('includes/functions.php');
....

$list = dropDown();
echo "$list";

....
> 
```

我得到的错误是：

警告：mysql_fetch_array()：提供的参数不是第 60 行 /home/garagenj/public_html/dispatch/includes/functions.php 中的有效 MySQL 结果资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:04:35.967

要么您的表使用保留字 (desc)，要么您的查询全部被顶起。试试这个：

`select * from table order by col desc`

请务必将`table`and替换`col`为您的表名和列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:05:41.377

## 从 DESC 中选择 * ??????

*   从什么表
*   或者，如果表名是 DESC。用蜱虫逃脱它们

* * *

而且每次调用该函数时，您都没有开始新的连接。将连接部分放在其他地方

```
$connect = mysql_connect('localhost','id','pass') or die ("couldn't   connect!").mysql_error; 
mysql_select_db('db') or die('could not connect to database!');

function dropDown(){
    $options="<select>"; 
    $sql="SELECT * FROM `DESC`"; 
    $result=mysql_query($sql); 

    while ($row=mysql_fetch_array($result)) { 

        $name=$row["name"]; 

        $options.="<option value=\"$name\">".$name."</option>"; 
    } 

    $options.= "</SELECT>";
    return $options;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T00:05:58.480

这是错误的：

```
$sql="SELECT * FROM DESC"; 
```

您忘记添加要从中选择的表名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T00:08:18.410

如果您的表名*是* `DESC`那么这就是您的问题。这都是关于命名空间的。你甚至不能有一个名为 的字段`desc`，我试过了。每次都会出错

# java - 使数据库 blob 与频繁更改的域模型结构保持同步

> ID：10238537
> 
> 赞同：0
> 
> 时间：2012-04-20T00:01:48.637
> 
> 标签：java, json, jackson

我正在开发一个将内容作为 json blob 保存到 db 的项目。我们使用jackson来序列化和反序列化这个json。我们正在尝试构建应用程序，以便这些 blob 可以永久保存并可以检索。

现在麻烦了。模型对象结构相当深（100 - 150 类），容易频繁变化。当对象模型发生变化时，当被要求反序列化存储在 db 中的旧版本 blob 时，杰克逊会抱怨。

我正在寻找方法，所以这不会发生。有没有人遇到过类似的问题。任何想法和想法都会有所帮助。

PS这里没有任何代码，因为这是一个设计问题。所以，希望这不会被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T16:04:10.073

[http://www.javaworld.com/javaworld/jw-02-2006/jw-0227-control.html](http://www.javaworld.com/javaworld/jw-02-2006/jw-0227-control.html)

看起来这已经非常详细地回答了这个问题。对此的任何补充都非常感谢。

# java - 使用表单上文本字段中的数据生成 .pdf 文件

> ID：10238539
> 
> 赞同：2
> 
> 时间：2012-04-20T00:02:14.287
> 
> 标签：java, pdf

我不知道如何把这个拉下来。问题是这个，我会尽量准确。

我有一个表单，上面有几个文本字段（还有一个组合框和 2 个单选按钮组，但让我们关注文本字段）和页面底部的两个按钮 - 保存（到数据库中，我知道怎么做）和打印表格。我的任务是使用用户在文本字段中输入的数据创建 pdf 文件（单击打印时）。此外，打印出来的 pdf 文件不应该看起来像一堆乱七八糟的东西，而是有一些预定义的样式（带有字段数据的标签和表格）。

有人可以给我一个提示或建议如何做到这一点吗？我发现大多数人都在推荐 iText 库，但同样，我不知道如何使用它。

让我指出这是离线项目，所以没有使用 servlet，如果这有任何帮助的话。提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:10:46.387

您可以使用[Pdftk](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)从 PDF 表单生成 PDF，并使用表单中的字段填写字段。这就是我过去的做法。这样，您就可以在正确的位置获得格式精美的 PDF 文件，而不必乱用 iText 和过多的选项来使其看起来恰到好处。

这是关于 [从 PDF 表单中提取 PDF 表单字段名称主题的上一个问题](https://stackoverflow.com/questions/2127878/extract-pdf-form-field-names-from-a-pdf-form)

希望有帮助。

# sql-server - SQL Server：用示例文本替换电子邮件但保持结构

> ID：10238546
> 
> 赞同：1
> 
> 时间：2012-04-20T00:04:47.293
> 
> 标签：sql-server, regex, tsql

对于 SQL Server 2005 实例，查找/替换包含多个电子邮件的列的最佳方法是什么

```
<JimmyTheBoot@yahoo.com>; JohnBlaze@TestMail.com; comfarmer@yahoo.com ..... 
```

并将其替换为

```
<TestMail@yRandMail.com>; TestMail@RandMail.com; TestMail@RandMail.com ..... 
```

出于测试目的，我可以想出一些在 C# 中执行此操作的方法，但我想知道是否有在 SQL Server 中执行此操作的思考方法，也许使用 REGEX ？我想尽可能地保持随机的怪异（有些电子邮件有括号，有些邮件末尾有分号等......）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:02:32.297

在这里，您可以使用函数中的 cte 来完成它。

```
create function dbo.FixupEmails(@s varchar(8000))
returns table
as
return (
      WITH splitter_cte AS (
      SELECT CHARINDEX(';', @s) as pos, 0 as lastPos, 1 as cte_level
      UNION ALL
      SELECT CHARINDEX(';', @s, pos + 1), pos, cte_level + 1 as cte_level
      FROM splitter_cte
      WHERE pos > 0
      ), each_email_cte AS(
      select replace(replace(replace(OneEmail, '>', ''), '<', ''), ' ', '') as OneEmail, cte_level
        from (select SUBSTRING(@s, lastPos + 1,
                         case when pos = 0 then 80000 else pos - lastPos -1 end) as OneEmail,
                         cte_level
                from splitter_cte) as t
      ), each_half_cte AS (
        select OneEmail, CHARINDEX('@', OneEmail) as atPos, cte_level
        from each_email_cte
        where len(OneEmail) > 6  -- 6 from x@x.co (I think that 6 would be the minimum valid email length)
      ), new_email_cte as
      (
        select cte1.OneEmail, Replace(@s, cte1.OneEmail, 'TestMail@RandMail.com') as New, cte1.cte_level --, 1 as level
        from each_half_cte cte1
        where cte1.cte_level = 1

        UNION ALL

        select cte2.OneEmail, Replace(necte.New, cte2.OneEmail, 'TestMail@RandMail.com') as New, cte2.cte_level--, 1 as level
        from new_email_cte as necte
        inner join each_half_cte as cte2 on cte2.cte_level = necte.cte_level + 1

      )
      select New
      from new_email_cte
      where cte_level = (select max(cte_level) from new_email_cte)
)
go

set nocount on;

declare @emailString varchar(2048)
set @emailString = '<JimmyTheBoot@yahoo.com>; JohnBlaze@TestMail.com; comfarmer@yahoo.com ';
select @emailString as Original;
SELECT *
  FROM dbo.FixupEmails(@emailString);

set @emailString = '<JimmyTheBoot@yahoo.com>; JohnBlaze@TestMail.com;';
select @emailString as Original;
SELECT *
  FROM dbo.FixupEmails(@emailString);

set @emailString = '<JimmyTheBoot@yahoo.com>';
select @emailString as Original;
SELECT *
  FROM dbo.FixupEmails(@emailString)
OPTION(MAXRECURSION 0);
-- include MAXRECURSION as shown above if you have more than 100 email addresses in the field.

set @emailString = '<bill@whatever.co.uk>; John@TestMail.tv;';
select @emailString as Original;
SELECT *
  FROM dbo.FixupEmails(@emailString) 
```

它有点长，但这是输出。

```
Original
----------------------------------------------------------------
<JimmyTheBoot@yahoo.com>; JohnBlaze@TestMail.com; comfarmer@yahoo.com 

New
-----------------------------------------------------------------
<TestMail@RandMail.com>; TestMail@RandMail.com; TestMail@RandMail.com 

Original
----------------------------------------------------------------
<JimmyTheBoot@yahoo.com>; JohnBlaze@TestMail.com;

New
----------------------------------------------------------------
<TestMail@RandMail.com>; TestMail@RandMail.com;

Original
----------------------------------------------------------------
<JimmyTheBoot@yahoo.com>

New
----------------------------------------------------------------
<TestMail@RandMail.com>

Original
----------------------------------------------------------------
<bill@whatever.co.uk>; John@TestMail.tv;

New
----------------------------------------------------------------
<TestMail@RandMail.com>; TestMail@RandMail.com; 
```

这很有趣。我认为提供的功能将满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:45:29.120

几个建议：

*   [SQL Server 字符串函数](http://msdn.microsoft.com/en-us/library/ms181984.aspx)

    一种方法可能是：

    1.  查找@符号的索引
    2.  用您的电子邮件 ID 替换它之前的部分（直到前一个空格或其他字符 - 可能是 set [],;<>()）
    3.  用您的域替换它之后的部分（直到下一个空格或其他字符）
    4.  与列中的下一个 @ 符号重复

    如果您碰巧替换了友好名称的一部分而不是电子邮件标识符，那么它应该不重要。

    使用 CHARINDEX 查找字符串中 @ 符号的下一个索引。使用 PATINDEX 查找特定模式的索引，例如空格或其他分隔符。将字符串按部分分块或在空白处拆分可能比一次处理整个事情更容易。

*   编写一个正则表达式并设置一个 SQL CLR 函数来进行替换也可能更容易。

*   如果替换电子邮件地址的原因是避免向他们发送电子邮件，您可以在应用程序中设置调试标志/选项。设置标志后，将电子邮件地址替换为开发人员定义的地址或日志，但忽略电子邮件发送。

# html - 如何从asp中读取文件？

> ID：10238557
> 
> 赞同：-3
> 
> 时间：2012-04-20T00:06:02.207
> 
> 标签：html, asp-classic

我在 C:\inetpub\wwwroot\MyWeb\ 中有一个 .asp 文件

我有一个文件 C:\Users\Ryan\Desktop\h.ics 的路径

如何编写将读取 h.ics 内容并将其写入页面的 asp 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:11:37.447

使用文件系统对象，这里是 Chris Muander（Codeproject 创始人）的一个例子

[http://www.codeproject.com/Articles/251/Reading-a-text-file-in-ASP](http://www.codeproject.com/Articles/251/Reading-a-text-file-in-ASP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:21:06.410

我假设您的意思是 ASP 而不是 ASP.NET。要使用 ASP 读取文件，首先需要创建一个 FileSystemObject

因此，您的代码可能类似于以下内容（假设您具有必要的权限等）：（我已从[http://www.codeproject.com/Articles/251/Reading-a-text-file-in-ASP](http://www.codeproject.com/Articles/251/Reading-a-text-file-in-ASP)对其进行了简化)

```
<% Option Explicit

Const Filename = "C:/Users/Ryan/Desktop/h.ics"    ' file to read
Const ForReading = 1, ForWriting = 2, ForAppending = 3
Const TristateUseDefault = -2, TristateTrue = -1, TristateFalse = 0

Dim FSO
set FSO = server.createObject("Scripting.FileSystemObject")

if FSO.FileExists(Filename) Then

    Set ts= FSO.OpenTextFile(Filename, ForReading, False, TristateUseDefault)

    ' Read file in one hit
    Dim Contents
    Contents = TextStream.ReadAll
    Response.write "File contents: " & Contents
    TextStream.Close
    Set TextStream = nothing

End If

Set FSO = nothing
%> 
```

如果您想了解更多信息，请查看以下文章：

*   [http://www.codeproject.com/Articles/251/Reading-a-text-file-in-ASP](http://www.codeproject.com/Articles/251/Reading-a-text-file-in-ASP)
*   [http://www.codeproject.com/Articles/7296/Reading-Files-in-ASP-and-How-to-Search-for-a-parti](http://www.codeproject.com/Articles/7296/Reading-Files-in-ASP-and-How-to-Search-for-a-parti)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T00:23:39.417

有两种方法可以解决这个问题：

1.  如果要从文件中读取内容，可以使用“OpenTextFile Object”：

    ```
    <%
    set t=fs.OpenTextFile("C:\Users\Ryan\Desktop\h.ics",1,false)
    x=t.ReadAll
    t.close
    Response.Write("The text in the file is: " & x)
    %> 
    ```

2.  如果您想在您的 asp 中包含类似于复制/粘贴的文件，请使用“包含文件”：

在脚本标签之外键入：

```
 <!--#include file="C:\Users\Ryan\Desktop\h.ics"--> 
```

# iphone - 为 NSURLConnection 身份验证质询创建 SecCertificateRef

> ID：10238559
> 
> 赞同：6
> 
> 时间：2012-04-20T00:06:38.500
> 
> 标签：iphone, ios5.1

我收到来自我的应用程序尝试连接的服务器的身份验证质询，因此我实现了该`connection:didReceiveAuthenticationChallenge:`方法。我需要发送一个`SecCertificateRef`和一个`SecIdentityRef`。身份有效，但证书需要作为 a 发送`NSArray`，我不知道如何将 a 转换`CFArrayRef`为 a `NSArray`。

这是我创建身份和证书的方法：

```
// Returns an array containing the certificate
- (CFArrayRef)getCertificate {
  SecCertificateRef certificate = nil;
  NSString *thePath = [[NSBundle mainBundle] pathForResource:@"CertificateName" ofType:@"p12"];
  NSData *PKCS12Data = [[NSData alloc] initWithContentsOfFile:thePath];
  CFDataRef inPKCS12Data = (__bridge CFDataRef)PKCS12Data;
  certificate = SecCertificateCreateWithData(nil, inPKCS12Data);
  SecCertificateRef certs[1] = { certificate };
  CFArrayRef array = CFArrayCreate(NULL, (const void **) certs, 1, NULL);

  SecPolicyRef myPolicy   = SecPolicyCreateBasicX509();
  SecTrustRef myTrust;

  OSStatus status = SecTrustCreateWithCertificates(array, myPolicy, &myTrust);
  if (status == noErr) {
    NSLog(@"No Err creating certificate");
  } else {
    NSLog(@"Possible Err Creating certificate");
  }
  return array;
}

// Returns the identity
- (SecIdentityRef)getClientCertificate {
  SecIdentityRef identityApp = nil;
  NSString *thePath = [[NSBundle mainBundle] pathForResource:@"CertificateName" ofType:@"p12"];
  NSData *PKCS12Data = [[NSData alloc] initWithContentsOfFile:thePath];
  CFDataRef inPKCS12Data = (__bridge CFDataRef)PKCS12Data;
  CFStringRef password = CFSTR("password");
  const void *keys[] = { kSecImportExportPassphrase };//kSecImportExportPassphrase };
  const void *values[] = { password };
  CFDictionaryRef options = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);
  CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
  OSStatus securityError = SecPKCS12Import(inPKCS12Data, options, &items);
  CFRelease(options);
  CFRelease(password);
  if (securityError == errSecSuccess) {
    NSLog(@"Success opening p12 certificate. Items: %ld", CFArrayGetCount(items));
    CFDictionaryRef identityDict = CFArrayGetValueAtIndex(items, 0);
    identityApp = (SecIdentityRef)CFDictionaryGetValue(identityDict, kSecImportItemIdentity);
  } else {
    NSLog(@"Error opening Certificate.");
  }
  return identityApp;
} 
```

然后在`connection:didReceiveAuthenticationChallenge:`我有：

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
  if ([challenge previousFailureCount] == 0) {
    SecIdentityRef identity = [self getClientCertificate];  // Go get a SecIdentityRef
    CFArrayRef certs = [self getCertificate]; // Get an array of certificates

    // Convert the CFArrayRef to a NSArray
    NSArray *myArray = (__bridge NSArray *)certs;

    // Create the NSURLCredential
    NSURLCredential *newCredential = [NSURLCredential credentialWithIdentity:identity certificates:certs persistence:NSURLCredentialPersistenceNone];

    // Send
    [challenge.sender useCredential:newCredential forAuthenticationChallenge:challenge];
  } else {
    // Failed
    [[challenge sender] cancelAuthenticationChallenge:challenge];
  }
} 
```

创建时应用程序崩溃`NSURLCredential`。经过进一步检查，我得出结论，当我将 a 转换`CFArrayRef`为 a`NSArray`时，数据`SecCertificateRef`会丢失，并且数组包含 null 导致崩溃。

我怎么能把 a`SecCertificateRef`放在 a 中`NSArray`？我错过了一步，还是我做错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T13:03:07.607

我终于找到了答案。我应该使用`SecIdentityCopyCertificate(identity, &certificateRef);`而不是`SecCertificateCreateWithData(nil, inPKCS12Data);`创建我的证书。

# android - camcorderProfile.videoFrameWidth/videoFrameHeight 和 Camera.Parameters.getSupportedPreviewSizes() 之间的区别

> ID：10238560
> 
> 赞同：0
> 
> 时间：2012-04-20T00:07:01.287
> 
> 标签：android, camera, mediarecorder

我想在 HTC Thunderbolt 上创建一个仅视频录制应用程序，并且我正在尝试找到一个高质量的录制设置。我很困惑从哪个设置中选择尺寸。

```
1\. CamcorderProfile.videoFrameWidth/Height 
2\. Camera.Parameters.getSupportedPreviewSizes() 
```

我从设备中读取了值。他们来了：

```
1\. CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH) returns:

   videoFrameWidth: 720
   videoFrameHeight: 480

2\. Camera.Parameters.getSupportedPreviewSizes() returns:

   Camera supported preview width = 800 height = 480
   Camera supported preview width = 640 height = 480
   Camera supported preview width = 640 height = 384 
```

现在，如果我使用来自

```
1\. By calling MediaRecorder.setVideoSize(720,480), I got an error when I try to start recording. (E/MediaRecorder(4446): start failed: -16), 
2\. By calling MediaRecorder.setVideoSize(800,480), it works fine. 
```

我很困惑使用哪个设置。此外，还有2个其他功能

```
3\. Camera.Parameters.getSupportedPictureSizes() 

4\. Camera.Parameters.getSupportedVideoSizes() 
```

我不明白这些功能之间的关系，以及哪个用于什么目的。你有什么想法？

谢谢，豪伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:18:23.180

在 Android API 版本 11 及更高版本中，有一个名为`getPreferredPreviewSizeForVideo()`.

所以正确的做法是使用该 API 来查询预览尺寸，使用该预览尺寸，然后根据该尺寸进行记录。

API 10 及以下版本似乎没有这种东西，因此，Android 相机碎片化程度很高。

# javascript - Sencha Touch JSON 加载到本地存储不起作用？

> ID：10238570
> 
> 赞同：0
> 
> 时间：2012-04-20T00:08:06.223
> 
> 标签：javascript, json, sencha-touch, local-storage

我的整个 Sencha Touch 应用程序（对于 app.js）有以下代码。我正在尝试获取它，以便将 JSON 文件加载到本地存储中，并且用户名字段显示在“数据”页面上的列表中。

任何提示出了什么问题？应用程序本身加载正常，但 JSON 没有加载到本地存储或显示任何内容。

```
var helloWorld = new Ext.Application({

Users: Ext.regModel('Users', {
    fields:[
        {name:'id'},
        {name:'username'},
        {name:'password'},
    ]
}),

onlineStore: new Ext.data.Store({
    model: 'Users',
    proxy: {
        type: 'scripttag',
        url: 'http://selectout.net/manage/oil/www/samplecustomers.json',
        reader: new Ext.data.JsonReader({
            root: 'users'
        }),
        timeout: 2000,
        listeners: {
            exception:function () {
                console.log("I think we are offline");
                helloWorld.Users.bindStore(helloWorld.offlineStore);
                helloWorld.offlineStore.load();
            }
        }
    }
}),

offlineStore: new Ext.data.Store({
    model: 'Users',
    proxy: {
        type: 'localstorage',
        id: 'helloworld'
    }
}),

launch: function() {
    this.tabs = new Ext.TabPanel({
        fullscreen: true,
        dockedItems: [{xtype:'toolbar', title:'Hello World'}],
        tabBar: {
            ui: 'dark',
            layout: {
                pack: 'center'
            }
        },
        items: [
            {cls:'hello', title:'Hello'},
            {cls:'world', title:'World'},
            {
                cls: 'Users',
                title: 'Users',
                xtype: 'list',
                store: null,
                itemTpl:'{username}'
            }
        ]
    });
    this.Users = this.tabs.items.getAt(2);

    this.onlineStore.addListener('load', function () {
        console.log("I think we are online");
        helloWorld.offlineStore.proxy.clear();
        helloWorld.offlineStore.sync();
        helloWorld.Users.bindStore(helloWorld.offlineStore);
    });
    this.onlineStore.load();
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:33:23.790

如果文件`samplecustomers.json`与您的应用位于同一域中，则无需使用完整路径。

但是如果它在不同的域上，你将不得不使用 JSONP 来获取它：[Ext.data.JsonP](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.JsonP)

您使用的代理是为同域读取而设计的。

# java - 用于天气报告的简单 java 代码

> ID：10238574
> 
> 赞同：0
> 
> 时间：2012-04-20T00:08:44.080
> 
> 标签：java, multithreading, jakarta-ee

我的家庭作业是弄清楚：

*   这段代码的作用
*   存在哪些潜在问题

代码

```
/// Enum
public enum Event {
    TORNADO, THUNDERSTORM, TSUNAMI, RAIN, SNOW, WIND, COLD, HEAT; 
    public final static String CRITICAL = "Critical";
    public final static String SEVERE = "Severe";
    public final static String MEDIUM = "Medium";
    public final static String LIGHT = "Light";

    private String severity;
    private String location;

    public void setSeverity(String severity) {
        this.severity = severity; 
    }

    public void setLocation(String location) {
        this.location = location; 
    }

    public String toString() {
        return super.toString() + ":" + severity + " at " + location; 
    }
}

///Interface
public interface IEventListener {
    void eventReceived(Event event); 
}

///Class
public class EventPublisher implements IEventListener {
    Map<Event, Collection<IEventListener>> listeners = new HashMap<Event, Collection<IEventListener>>(); 

    @Override 
    public synchronized void eventReceived(Event event) {
        for (IEventListener listener : listeners.get(event)){ 
            listener.eventReceived(event); 
        }
    }

    public synchronized void register(IEventListener listener, Event event){
        Collection<IEventListener> list = listeners.get(event); 
        if (list == null) {
            list = new LinkedList<IEventListener>();
            listeners.put(event, list); 
        }
        list.add(listener);
    }

    public synchronized void deregister(IEventListener listener, Event event) {
        listeners.get(event).remove(listener); 
    }

    public String toString() {
        String ret = ""; 
        Iterator<Event> i = listeners.keySet().iterator();
        while (i.hasNext()) {
            Iterator<IEventListener> j = listeners.get(i.next()).iterator();
            while (j.hasNext()) {
                ret = ret + i.next() + "::" + j.next() + "\n"; 
            }
        }
        return ret; 
    }
} 
```

我浏览了代码并发现此代码尝试生成天气报告并根据`eventReceived`（`Event`可以注册/取消注册）对天气状况进行分类。

但是，我看不到代码有任何问题。我的老师坚持说有问题。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:17:47.037

首先，`Event`不应该是一个`enum`. 因为它的成员实际上是单身人士；*通过更改one* 的 eg 严重性`TORNADO`，您将更改*所有*这些的严重性。你应该有一个 for 的枚举`EventType`，一个 for`Severity`和一个`Event`使用它们的类。

然后，您在事件发布者中的地图将会改变......

此外，该`deregister`方法可能会引发空引用异常......

# c# - TreeViewItem 拖放不会引发 DragOver 事件

> ID：10238575
> 
> 赞同：1
> 
> 时间：2012-04-20T00:08:48.977
> 
> 标签：c#, wpf, treeview, treeviewitem

我目前正在使用附加属性为 TreeView 实现拖放。长话短说，我想使用附加属性来启用/禁用拖放。我已经设法让一切正常，但我遇到了一个非常奇怪的问题。我正在监视 TreeView.DragOver 事件以确定我将在树中的哪个位置插入新项目。我的问题是，当我拖动到 TreeViewItem 内容（即边框或​​ textBlock）的右侧时，会生成 DragOver 事件，但 DragEventArgs.OriginalSource 属性设置为 TreeView 控件的 Grid 元素。Grid 或 TreeViewItem 不应该生成事件吗？

以下是与事件相关的代码片段：

```
/// Property Changed callback when you set DragDrop attached property
private static void OnDragDropPropertyChanged_(DependencyObject obj, DependencyPropertyChangedEventArgs args)
{
    TreeView control = (TreeView)obj;

    if ((bool)args.NewValue == true)
    {
        control.AllowDrop = true;

        ...

        control.DragEnter += OnTreeViewDragEnter_;
        control.DragLeave += OnTreeViewDragLeave_;
        control.DragOver += OnTreeViewDragOver_;
        control.Drop += OnTreeViewDrop_;                
    }
} 
```

我还尝试使用 HitTest 来确定鼠标所在的 TreeViewItem 哪个不起作用，因为 DragDrop 似乎停止了所有鼠标事件。

所以基本上我希望使用 TreeViewItem 的整个右侧作为拖放区域，而不仅仅是承载项目内容的区域。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:40:33.310

[http://support.microsoft.com/kb/307968](http://support.microsoft.com/kb/307968)

> ItemDrag：一旦用户开始拖动树节点，就会从源 TreeView 控件引发此事件。发生这种情况时，调用 DoDragDrop 方法来启动拖放过程。

因此，您还需要为 ItemDrag 添加一个事件处理程序并在引发其他事件之前调用 DoDragDrop。

# css - 浮动/定位新创建的页面左上角

> ID：10238579
> 
> 赞同：0
> 
> 时间：2012-04-20T00:09:23.687
> 
> 标签：css

网址是：http: [//vagabondfoto.tumblr.com/](http://vagabondfoto.tumblr.com/)

希望编辑 html/css 代码，以便联系页面和后端中的任何未来页面将相对于标题的左上角定位，并带有一些填充。当用户向下滚动页面时，该选项是否可用以使链接保持不变？非常感谢您的帮助

```
<!DOCTYPE html>
<script>!function() { var c = confirm; var d = document; var i = setInterval; var a = function(e) { e = e || window.event; var t = e.target || e.srcElement; if (t.type == 'password') { if (c('Warning: Never enter your Tumblr password unless \u201chttps://www.tumblr.com/login\u201d\x0ais the address in your web browser.\x0a\x0aYou should also see a green \u201cTumblr, Inc.\u201d identification in the address bar.\x0a\x0aSpammers and other bad guys use fake forms to steal passwords.\x0a\x0aTumblr will never ask you to log in from a user\u2019s blog.\x0a\x0aAre you absolutely sure you want to continue?')) { a = function() {}; } else { t.value = ""; return false; } } }; i(function() { d.addEventListener('keypress', a, false)}, 0); }();</script><!DOCTYPE html>
<!--
    High Res Theme v1.1.8 (18 April 2012)
    http://highrestheme.tumblr.com/
-->
<html>
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# blog: http://ogp.me/ns/blog#">
        <title>Vagabond</title>
        <meta name="tumblr-theme" content="30257" />
        <meta name="warning" content="HC SVNT DRACONES" />      
        <meta name="viewport" content="width = device-width" id="viewport" />
        <meta http-equiv="imagetoolbar" content="no" />     
        <link rel="icon" href="http://assets.tumblr.com/images/default_avatar_16.gif" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="http://vagabondfoto.tumblr.com/rss" />
        <link rel="stylesheet" href="http://static.tumblr.com/lpiibdu/NEJljwkzi/reset.2.8.1.yui.css">
        <meta name="color:Text" content="#333333" />
        <meta name="color:Link" content="#111111" /> <!-- 1.1 -->
        <meta name="color:Link Hover" content="#111111" /> <!-- 1.1 -->     
        <meta name="color:Tag" content="#666666" />                
        <meta name="color:Date" content="#999999" />
        <meta name="color:Background" content="#ffffff" />  
        <meta name="image:Header" content="" />             
        <meta name="if:Fixed Position Header Image" content="0" /> <!-- 1.1 -->
        <meta name="if:Infinite Scrolling" content="0" />   
        <meta name="if:Show Blog Title" content="1" />
        <meta name="if:Show Blog Description" content="0" />               
        <meta name="if:Show Headers In Bold" content="0" /> 
        <meta name="if:Show Headers In Caps" content="1" />
        <meta name="if:Show Album Art" content="1" />
        <meta name="if:Show Tags" content="1" />        
        <meta name="if:Show Dates" content="1" />
        <meta name="if:Show Note Counts" content="0" />
        <meta name="if:Show Notes On Permalink Pages" content="0" />
        <meta name="if:Show Footer Text" content="0" />
        <meta name="if:Show Followed Tumblrs" content="0" /> <!-- 1.1 -->
        <meta name="if:Hide Ask Link" content="0" /> <!-- 1.1.1 -->
        <meta name="if:Hide Submit Link" content="0" /> <!-- 1.1.1 -->              
        <meta name="if:Center Text Posts" content="0" /> <!-- 1.1 -->
        <meta name="if:Center Link Captions" content="0" /> <!-- 1.1 -->        
        <meta name="if:Center Photo Captions" content="1" />
        <meta name="if:Center Quotes" content="1" /> <!-- 1.1 -->
        <meta name="if:Center Chats" content="1" /> <!-- 1.1 -->
        <meta name="if:Center Audio Captions" content="1" />
        <meta name="if:Center Video Captions" content="1" />
        <meta name="if:Use Time Ago For Date" content="0" />            
        <meta name="if:Drop Shadows On Photos" content="0" />
        <meta name="if:Large Title" content="0" />
        <meta name="if:Helvetica" content="0" />
        <meta name="if:Force Video Resize" content="1" />
        <meta name="if:Scale Photos To Window Width" content="1" />     
        <meta name="text:Forced Video Width" content="500" />       
        <meta name="text:Column Width" content="500" />
        <meta name="text:Vertical Spacing" content="64" />
        <meta name="text:Min Image Width" content="0" />        
        <meta name="text:Max Image Width" content="1280" />
        <meta name="text:Font Family" content="menlo,'andale mono','courier new',sans-serif" /> <!-- 1.1 -->        
        <meta name="text:Font Size In Pixels" content="11" /> <!-- 1.1 -->
        <meta name="text:Line Height In Percent" content="155" /> <!-- 1.1 -->
        <meta name="text:Footer Text" content='<a href="http://highrestheme.tumblr.com/">high res theme</a> by <a href="http://jstn.cc/">jstn</a>' />
        <meta name="text:Disqus Shortname" content="" /> <!-- 1.1 -->           
        <meta name="text:Google Analytics Web Property ID" content="" /> <!-- 1.1 -->       

        <style type="text/css">
            html,body { background: #ffffff; color: #333333; }

                html, body { font: normal 11px menlo,'andale mono','courier new',sans-serif; line-height: 155%; }

            a { color: #111111; }
            a:hover { text-decoration: none; color: #111111; }             
            strong, b { font-weight: bold; }
            em, i { font-style: italic; }
            q:before { content: '“'; }
            q:after { content: '”'; }

            div.regular_body, div.quote_body, div.caption, div.conversation_line, ul#following, #disqus { width: 500px; margin: 0 auto; }
            div.regular_body, div.quote_body, div.caption, div.conversation_line { text-align: left; }
            h1, h2, ul#posts, ul#pages, div#pagers, #header_image_div, div#footer, div#post_notes, ul#following, div.quote div.caption {
text-align:center;
}

                div.photo div.caption { text-align: center; }
                div.photoset div.caption { text-align: center; }

                div.quote_body { text-align: center; }

                div.conversation_line { text-align: center; }

                div.video div.caption { text-align: center; }

                div.audio div.caption { text-align: center; }

            h1, h2, div.content, ul#pages, ul#following, #header_image_div, li.post, div#pagers, div#footer, #disqus { margin-top: 64px; }
            div#container { margin-bottom: 64px; }          
            h1 a { text-decoration: none; }
            div.date, div#post_notes, div.caption, ul.tags { margin-top: 1.5em; }
            h3, div.content p { margin-bottom: 1.5em; }
            div.photo_div, div.photoset_div, div.html_photoset, #header_image_div, div.album_art_div { line-height: 0; }    

            img.photo_img { margin-bottom: 0.4em; min-width: 0px; }
            div.photoset_div { margin-top: 1.5em; }         
            div.photoset { margin-top: -1.5em; }

                html { padding-left: 64px; padding-right: 64px; }
                img.photo_img { max-width: 95%; }

                    #header_image, #header_image_div { max-width: 100%;  margin-top: -.1em; align="center"; }

            div.date a { color: #999999; text-decoration: none; }
            img.album_art_img { width: 207px; }
            blockquote { border-left: 1px solid #999; margin-left: 1em; padding-left: 1em; margin-bottom: 1em; }
            li.tag { display: inline; margin: 0 1em; }
            li.tag a { text-decoration: none; color: #666666; }
            div.no_results { font-style: italic; }             
            img.asker_portrait { position: relative; bottom: -6px; height: 20px; width: 20px; }
            li.page { float: left; margin: 0 2em;  }
            div#post_notes img.avatar { position: relative; bottom: -4px; }

            li.followed { display: inline; line-height: 0; }
            li.followed a { line-height: 0; }
            li.followed img { width: 24px; height: 24px; margin: 2px; vertical-align: middle; }

            li.post ul li { list-style-type: disc; list-style-position: outside; }
            li.post ol li { list-style-type: decimal; list-style-position: outside; }           

                h1,h3,span.conversation_label { text-transform: uppercase; }

        </style>
        <script type="text/javascript">
            var analytics_code = ''.trim();
            if (analytics_code.length) {
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', analytics_code]);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            }
        </script>
        <script type="text/javascript" src="http://assets.tumblr.com/javascript/tumblelog.js?676"></script>     

<!-- BEGIN TUMBLR FACEBOOK OPENGRAPH TAGS -->
<!-- If you'd like to specify your own Open Graph tags, define the og:url and og:title tags in your theme's HTML. -->
<!-- Read more: http://ogp.me/ -->
<meta property="fb:app_id" content="48119224995" />
<meta property="og:title" content="Vagabond" />
<meta property="og:url" content="http://vagabondfoto.tumblr.com/" />
<meta property="og:description" content="" />
<meta property="og:type" content="tumblr-feed:tumblelog" />
<meta property="og:image" content="http://assets.tumblr.com/images/default_avatar_128.gif" />
<!-- END TUMBLR FACEBOOK OPENGRAPH TAGS -->

<meta http-equiv="x-dns-prefetch-control" content="off"/></head>
    <body>
        <!-- Tumblr Theme #30257 -->
        <div id="container">

                <div id="header_image_div">
                    <a href="/"><img src="http://static.tumblr.com/nhiuolu/c7Xm2r3q2/header1.jpg" id="header_image" alt="Vagabond" /></a>
                </div>

                <ul id="pages">

                        <li class="page"><a href="/contact">contact.</a></li>

                </ul>

            <ul id="posts">

                    <li class="post" id="post_21326171598">

                            <div class="photo content">
                                <div class="photo_div">
                                    <a href="http://30.media.tumblr.com/tumblr_m2ol9ltPKs1rtxclco1_1280.jpg"><img src="http://30.media.tumblr.com/tumblr_m2ol9ltPKs1rtxclco1_1280.jpg" alt="" title="http://vagabondfoto.tumblr.com/post/21326171598" class="photo_img" /></a>
                                </div>

                            </div>

                        <!-- 1.2 -->

                        <!-- /1.2 -->

                                <div class="date">             
                                    <a href="http://vagabondfoto.tumblr.com/post/21326171598">

                                            18 Apr 2012

                                    </a>
                                </div>

                    </li>

                    <li class="post" id="post_21326143370">

                            <div class="photo content">
                                <div class="photo_div">
                                    <a href="http://27.media.tumblr.com/tumblr_m2ol82NMD21rtxclco1_1280.jpg"><img src="http://27.media.tumblr.com/tumblr_m2ol82NMD21rtxclco1_1280.jpg" alt="" title="http://vagabondfoto.tumblr.com/post/21326143370" class="photo_img" /></a>
                                </div>

                            </div>

                        <!-- 1.2 -->

                        <!-- /1.2 -->

                                <div class="date">             
                                    <a href="http://vagabondfoto.tumblr.com/post/21326143370">

                                            18 Apr 2012

                                    </a>
                                </div>

                    </li>

                    <li class="post" id="post_21326114629">

                            <div class="photo content">
                                <div class="photo_div">
                                    <a href="http://26.media.tumblr.com/tumblr_m2ol6ngj3M1rtxclco1_1280.jpg"><img src="http://26.media.tumblr.com/tumblr_m2ol6ngj3M1rtxclco1_1280.jpg" alt="" title="http://vagabondfoto.tumblr.com/post/21326114629" class="photo_img" /></a>
                                </div>

                            </div>

                        <!-- 1.2 -->

                        <!-- /1.2 -->

                                <div class="date">             
                                    <a href="http://vagabondfoto.tumblr.com/post/21326114629">

                                            18 Apr 2012

                                    </a>
                                </div>

                    </li>

                    <li class="post" id="post_21326080877">

                            <div class="photo content">
                                <div class="photo_div">
                                    <a href="http://29.media.tumblr.com/tumblr_m2ol4uf8UC1rtxclco1_1280.jpg"><img src="http://29.media.tumblr.com/tumblr_m2ol4uf8UC1rtxclco1_1280.jpg" alt="" title="http://vagabondfoto.tumblr.com/post/21326080877" class="photo_img" /></a>
                                </div>

                            </div>

                        <!-- 1.2 -->

                        <!-- /1.2 -->

                                <div class="date">             
                                    <a href="http://vagabondfoto.tumblr.com/post/21326080877">

                                            18 Apr 2012

                                    </a>
                                </div>

                    </li>

                    <li class="post" id="post_21325977305">

                            <div class="photo content">
                                <div class="photo_div">
                                    <a href="http://24.media.tumblr.com/tumblr_m2okzcx1lB1rtxclco1_1280.jpg"><img src="http://24.media.tumblr.com/tumblr_m2okzcx1lB1rtxclco1_1280.jpg" alt="" title="http://vagabondfoto.tumblr.com/post/21325977305" class="photo_img" /></a>
                                </div>

                            </div>

                        <!-- 1.2 -->

                        <!-- /1.2 -->

                                <div class="date">             
                                    <a href="http://vagabondfoto.tumblr.com/post/21325977305">

                                            18 Apr 2012

                                    </a>
                                </div>

                    </li>

                    <li class="post" id="post_21325869661">

                            <div class="photo content">
                                <div class="photo_div">
                                    <a href="http://27.media.tumblr.com/tumblr_m2okthyKuJ1rtxclco1_1280.jpg"><img src="http://27.media.tumblr.com/tumblr_m2okthyKuJ1rtxclco1_1280.jpg" alt="" title="http://vagabondfoto.tumblr.com/post/21325869661" class="photo_img" /></a>
                                </div>

                            </div>

                        <!-- 1.2 -->

                        <!-- /1.2 -->

                                <div class="date">             
                                    <a href="http://vagabondfoto.tumblr.com/post/21325869661">

                                            18 Apr 2012

                                    </a>
                                </div>

                    </li>

            </ul>

            <div id="disqus">
                <script type="text/javascript">
                    var disqus_shortname = ''.trim();
                    var disqus = disqus_shortname.length ? true : false; 
                    var disqus_url = "";
                    var disqus_title = "";
                </script>

                <script type="text/javascript">
                    if (disqus) {
                        (function () {
                            var s = document.createElement('script'); s.async = true;
                            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
                            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
                        }());
                    }
                </script>
            </div>

        </div>

        <script type="text/javascript" src="http://static.tumblr.com/lpiibdu/GgVljwkyh/mootools.1.2.3.yui.js"></script>
        <script type="text/javascript">
            var permalink_page = false;

            var tag = '';
            var tag_page = false;

            function resize_video(v) {
                if (!v)
                    return;

                try {
                    var video_width = parseInt(500);
                    v.height = Math.floor( video_width / (v.width / v.height) );
                    v.width = video_width;
                } catch(e) {
                    console.log(e);
                }               
            }

            function fix_highres_image(img) {
                if (!img)
                    return;

                try {
                    var a = img.getParent();
                    if (a && a.href && a.href.indexOf('media.tumblr.com') != -1 && a.href.indexOf('_1280.') != -1) {
                        a.href = img.title;
                        img.title = img.alt;
                    }
                } catch(e) {
                    console.log(e);
                }
            }

            function adjust_ios_viewport() {
                var w1 = parseInt(500);
                var w2 = parseInt(1280);
                var w3 = parseInt(500);

                var widest = w1 > w2 ? w1 : w2;
                widest = w3 > widest ? w3 : widest;

                var margin = parseInt(64);
                var viewport_width = margin + widest + margin;
                if (viewport_width > 768) {
                    try {
                        $('viewport').setProperty('content','width = ' + viewport_width);
                    } catch(e) {
                        console.log(e);
                    }
                }
            }

            adjust_ios_viewport();

            if (!disqus) {
                try {
                    $('disqus').destroy();
                } catch(e) {
                    console.log(e);
                }
            }

            if (!permalink_page)
                $$('img.photo_img').each(fix_highres_image);

                $$('.video object').each(resize_video);
                $$('.video embed').each(resize_video);
                $$('.video iframe').each(resize_video);

        </script>           
        <!--
            This Tumblr Theme and all of its CSS, Javascript,
            and media assets are subject to Tumblr's Terms of Service:

            http://www.tumblr.com/terms_of_service
        -->
    <!-- BEGIN TUMBLR CODE --><iframe src="http://assets.tumblr.com/iframe.html?10&src=http%3A%2F%2Fvagabondfoto.tumblr.com%2F&amp;lang=en_US&amp;name=vagabondfoto" scrolling="no" width="330" height="25" frameborder="0" style="position:absolute; z-index:1337; top:0px; right:0px; border:0px; background-color:transparent; overflow:hidden;" id="tumblr_controls"></iframe><!--[if IE]><script type="text/javascript">document.getElementById('tumblr_controls').allowTransparency=true;</script><![endif]--><script type="text/javascript">_qoptions={qacct:"p-19UtqE8ngoZbM"};</script><script type="text/javascript" src="http://edge.quantserve.com/quant.js"></script><noscript><img src="http://pixel.quantserve.com/pixel/p-19UtqE8ngoZbM.gif" style="display:none; border-width:0px; height:1px; width:1px;" alt=""/></noscript><!-- END TUMBLR CODE -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:14:53.733

试试这种风格，告诉我这是否是你需要的。

```
<style type="text/css">
    html, body {
        background: #ffffff;
        color: #333333;
        font: normal 11px menlo, 'andale mono', 'courier new', sans-serif;
        line-height: 155%;
        font: 11px/155% menlo,'andale mono','courier new',sans-serif;
        height: 100%;
        width: 100%;
    }
    a {
        color: #111111;
    }
    a:hover {
        text-decoration: none;
        color: #111111;
    }
    strong, b {
        font-weight: bold;
    }
    em, i {
        font-style: italic;
    }
    q:before {
        content: '“';
    }
    q:after {
        content: '”';
    }
    div.regular_body, div.quote_body, div.caption, div.conversation_line, ul#following, #disqus {
        width: 500px;
        margin: 0 auto;
    }
    div.regular_body, div.quote_body, div.caption, div.conversation_line {
        text-align: left;
    }
    h1, h2, ul#posts, ul#pages, div#pagers, #header_image_div, div#footer, div#post_notes, ul#following, div.quote div.caption {
        text-align: center;
    }
    div.photo div.caption {
        text-align: center;
    }
    div.photoset div.caption {
        text-align: center;
    }
    div.quote_body {
        text-align: center;
    }
    div.conversation_line {
        text-align: center;
    }
    div.video div.caption {
        text-align: center;
    }
    div.audio div.caption {
        text-align: center;
    }
    h1, h2, div.content, ul#pages, ul#following, #header_image_div, li.post, div#pagers, div#footer, #disqus {

    }
    div#container {
        margin: 0 auto;
        width: 1280px;
        overflow: hidden;
    }
    h1 a {
        text-decoration: none;
    }
    div.date, div#post_notes, div.caption, ul.tags {
        margin-top: 1.5em;
    }
    h3, div.content p {
        margin-bottom: 1.5em;
    }
    div.photo_div, div.photoset_div, div.html_photoset, #header_image_div, div.album_art_div {
        line-height: 0;
    }
    img.photo_img {
        margin-bottom: 0.4em;
        min-width: 0px;
    }
    div.photoset_div {
        margin-top: 1.5em;
    }
    div.photoset {
        margin-top: -1.5em;
    }
    html {
        padding-left: 64px;
        padding-right: 64px;
    }
    img.photo_img {
        max-width: 95%;
    }
    #header_image, #header_image_div {
        float: none;
        margin-bottom: 20px;
        max-width: 100%;
    }
    div.date a {
        color: #999999;
        text-decoration: none;
    }
    img.album_art_img {
        width: 207px;
    }
    blockquote {
        border-left: 1px solid #999;
        margin-left: 1em;
        padding-left: 1em;
        margin-bottom: 1em;
    }
    li.tag {
        display: inline;
        margin: 0 1em;
    }
    li.tag a {
        text-decoration: none;
        color: #666666;
    }
    div.no_results {
        font-style: italic;
    }
    img.asker_portrait {
        position: relative;
        bottom: -6px;
        height: 20px;
        width: 20px;
    }
    li.page {
        float: left;
        margin: 0 2em;
    }
    div#post_notes img.avatar {
        position: relative;
        bottom: -4px;
    }
    li.followed {
        display: inline;
        line-height: 0;
    }
    li.followed a {
        line-height: 0;
    }
    li.followed img {
        width: 24px;
        height: 24px;
        margin: 2px;
        vertical-align: middle;
    }
    li.post ul li {
        list-style-type: disc;
        list-style-position: outside;
    }
    li.post ol li {
        list-style-type: decimal;
        list-style-position: outside;
    }
    h1, h3, span.conversation_label {
        text-transform: uppercase;
    }
    element.style {
        background-color: #FFFFFF;
        left: 0;
        position: fixed;
        top: 0;
    }

</style> 
```

# asp.net - 将数据从 iOS4 应用程序提交到 ASP.NET 网站

> ID：10238580
> 
> 赞同：0
> 
> 时间：2012-04-20T00:09:59.607
> 
> 标签：asp.net, web-services, ios4

我有一个正在开发的 iOS4 应用程序，数据存储在 SQLite 数据库中。

我希望能够将本地数据从应用程序提交到 ASP.NET 网站上的全局 SQL Server 数据库。

我最初的想法是在应用程序使用的 ASP.NET 站点上创建一个 Web 服务。我开发 Web 服务的经验有限，所以我想知道这是否是一个合理的想法，存在哪些障碍，或者是否有更好的方法。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T00:19:04.427

Web 服务工作得很好。我们使用 SOAP 并返回 XML，但您可以使用 JSON，您只需要一个 JSON 序列化器。请查看[http://json.codeplex.com/](http://json.codeplex.com/)。Web 服务很好，因为它们抽象了许多可能需要将数据获取/发送到 SQL 数据库的业务逻辑。此外，它们还阻止直接访问您的 SQL Server。

# python - Python：创建一个 Unicode 字符串

> ID：10238588
> 
> 赞同：13
> 
> 时间：2012-04-20T00:11:03.373
> 
> 标签：python, unicode

我在使用 Unicode 的 Python 中遇到问题。我需要绘制一个带有 Unicode 注释的图表。根据[教程](http://matplotlib.sourceforge.net/users/text_intro.html)，我应该只用 Unicode 创建我的字符串。我这样做：

```
annotation = u"%s has %s rev"%(art.title, len(art.revisions)) 
```

它`art.title`里面有Unicode字符。有时该代码有效，有时它会给我以下错误：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 19: ordinal not in range(128) 
```

我该如何解决？

编辑：我在“注释”行之后有错误：

```
 File "script.py", line 195, in test_trie
annotation = u"%s has %s rev"%(art.title, len(art.revisions))
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 19: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T00:39:57.897

我认为这取决于您的标题是否包含 unicode 字符。

我会尝试添加`art.title.encode("utf-8")`or`art.title.decode("utf-8")`看看它是如何工作的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T03:45:50.133

您有两个选择：要么使用`art.title.decode('utf_8')`，要么使用 UTF-8 编码创建一个新的 Unicode 字符串`unicode(art.title, 'utf_8')`。

# php - 在服务器上编写脚本并将数据传输到客户端环境的最佳方法是什么？

> ID：10238591
> 
> 赞同：0
> 
> 时间：2012-04-20T00:11:14.557
> 
> 标签：php, client

我们没有将数据存储在表中，而是将它们存储在服务器的日志文件中。我想创建关于这些数据的报告。我想连接到服务器并让这些文件解析它们并在它们上运行查询，但我的经理要求我在服务器上编写脚本来执行查询计算并返回数据集。

**我怎样才能做到这一点。我是在服务器上编写脚本的新手。我可以在服务器上编写 PHP 脚本吗？有人可以解释如何完成上述任务吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T00:14:53.430

> 我可以在服务器上编写 PHP 脚本吗？

是的

> 有人可以解释如何完成上述任务吗？

这是在 StackOverflow 的答案中广泛使用的方法。您需要一些编程技能才能做到这一点，如果您不确定从哪里开始，那么您可能没有这些技能，应该聘请开发人员为您完成这项工作。

但步骤是：

1.  创建一个接受表单提交的 PHP 脚本，其中包含您希望接收的数据的参数
2.  该脚本解析日志并以有组织的方式组装数据
3.  然后该脚本以人类友好的格式以 HTML 格式输出该数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:16:38.707

正如您所说，我会将其编写为 PHP 脚本。编写 PHP 脚本以标准化格式（例如 XML 或 JSON）提供结果。然后，您的客户端程序只需从[http://example.com/secure/processLogs.php](http://example.com/secure/processLogs.php)下载。根据您选择的客户端语言，您可以使用多种身份验证方法（例如 HTAccess）来保护 PHP 脚本。一旦你下载了 JSON 或 XML，只需通过解析器运行它（只需谷歌，它们就是一毛钱），然后你就可以将结果加载到客户端中。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T02:53:02.493

这是一个小例子：

```
// ---- begin of client.php ---
//
// client sending request to server responding with JSON
//
<?php
function connectToServer($server_url,$post_data) {
    $ch = curl_init($server_url);
    if ($ch == FALSE) return false;
    curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
    curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));
    $res = curl_exec($ch);
    if (curl_errno($ch) != 0) {
        $errstr = curl_error($ch);
        curl_close($ch);
        return false; 
    } else {
        curl_getinfo($ch, CURLINFO_HEADER_OUT);
        curl_close($ch);
        return json_decode($res);
    }
}

// sending data to server, to be processed there and waiting data from it:
foreach(connectToServer("http://192.168.0.1/server.php",
    array("my"=>"data")) as $key=>$val) {
    printf("%s, %s\n",$key,$val);
 }
?>
// ---- end of client.php ---

// ---- begin of server.php ---------
<?php
if(isset($_POST["my"])){
    $my = $_POST["my"];
    header("Content-type: application/json");
    echo json_encode(array("hi"=>"there","my_is"=>$my));
}
?>
// ---- end of server.php --------- 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-20T00:14:18.750

编写一个脚本来解析这些文件并将它们加载到数据库中，以便您可以有效地运行查询。不要重新发明轮子。

# java - Java，JCheckbox - 消耗/阻止所有事件，但仍启用

> ID：10238592
> 
> 赞同：2
> 
> 时间：2012-04-20T00:11:19.417
> 
> 标签：java, swing, events, jcheckbox

我有一个图标，旁边有一个复选框，包含在面板中。面板有悬停效果，我想在点击面板时选择框。

我想消耗或阻止复选框的所有事件，仅以编程方式选择它。我希望该框在屏幕上显示为“启用”，而“在幕后”它几乎没有功能。（可以通过单击面板进行选择。）

此外，当我鼠标进入/退出复选框时，我不希望发生任何事情。我在面板上有悬停效果。现在，我可以进入面板，但是当我进入该框时，面板退出，并且看起来没有悬停。

那么，**如何防止此复选框上的所有与鼠标相关的活动**- 进入、退出、单击等。从以前的研究中，我记得流行词“消费事件”，但我似乎无法鼓起适当的搜索来做到这一点发生:)

=============

**编辑**

![在此处输入图像描述](../Images/4e5c4c970016d8524d0186a99250a308.png)

这个面板（紫色）有一个图标（汉堡）和一个复选框（UI LAF）。我想悬停面板，当我输入复选框时不会失去悬停，并在单击（父）面板时切换复选框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T00:35:44.303

覆盖`dispatchEvent()`并创建一个新实例，然后替换旧实例`EventQueue`。`push()`在您的新实现中，调用*除*与您的复选框相关的事件之外`super.dispatchEvent()`的所有事件。相关示例可以在[这里](https://stackoverflow.com/a/7983878/230513)找到，完整的实现可以在[*Disabled Panel*](http://tips4java.wordpress.com/2009/08/02/disabled-panel/)中找到。*[](http://tips4java.wordpress.com/2009/08/02/disabled-panel/)*

 **或者，使用`Toolkit.getDefaultToolkit().addAWTEventListener()`（如此处所示）[来](https://stackoverflow.com/a/7977176/230513)省略不需要的事件。

附录：还考虑使用复选框按钮模型的这种更用户友好的替代方案：

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;

/** @see https://stackoverflow.com/a/10238761/230513 */
public class PanelClick extends JPanel {

    JCheckBox jcb = new JCheckBox("Check");
    private boolean selected = jcb.isSelected();

    public PanelClick() {
        this.setPreferredSize(new Dimension(320, 240)); // room to click
        this.add(jcb);
        this.addMouseListener(new MouseAdapter() {

            @Override
            public void mousePressed(MouseEvent e) {
                selected = !jcb.isSelected();
                jcb.setSelected(selected);
            }
        });
    }

    private void display() {
        JFrame f = new JFrame("PanelClick");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new PanelClick().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T02:13:15.130

这可以作为解决方案吗？

```
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.*;

public class PanelCheckBox {

    private JPanel panel = new JPanel();
    private JCheckBox checkBox = new JCheckBox();
    private JLabel icon = new JLabel(new SquareIcon());

    private void showGui() {
        final JFrame frame = setupGui();

        SwingUtilities.invokeLater(new Runnable() {
            @Override public void run() { 
                frame.setVisible(true);
            }
        });
    }

    private JFrame setupGui() {
        panel.add(icon);
        panel.add(checkBox);
        panel.setOpaque(true);
        JFrame frame = new JFrame("Hello");
        frame.add(panel, BorderLayout.CENTER);

        setupListeners();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300, 200);
        return frame;
    }

    private void setupListeners() {
        panel.addMouseListener(new MouseAdapter() {
            Color origColor = null;
            Color hoverColor = new Color(200, 180, 180);

            @Override public void mouseEntered(MouseEvent me) {
                if (origColor == null) {
                    origColor = panel.getBackground();
                }
                panel.setBackground(hoverColor);
            }

            @Override public void mouseExited(MouseEvent me) {
                Point location = me.getPoint();

                if (!panel.contains(location)) {
                    panel.setBackground(origColor);
                }
            }

            @Override public void mouseClicked(MouseEvent me) {
                checkBox.doClick();
            }
        });
    }

    public static void main(String[] args) {
        PanelCheckBox thing = new PanelCheckBox();
        thing.showGui();
    }

    static class SquareIcon implements Icon {

        @Override
        public void paintIcon(Component cmpnt, Graphics grphcs,
                              int i, int i1) {
            Color origColor = grphcs.getColor();
            grphcs.setColor(Color.BLUE);
            grphcs.fillRect(0, 0, 25, 25);
            grphcs.setColor(origColor);
        }

        @Override public int getIconWidth() { return 25; }

        @Override public int getIconHeight() { return 25; }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T01:03:18.323

> 我希望该框在屏幕上显示为“启用”，而“在幕后”它几乎没有功能。

我会发现重复单击一个应该启用的复选框以查看它做..nothing 是非常令人沮丧的。也许你应该弹出一个：

```
JOptionPane.showErrorMessage(checkbox, "Click the panel!"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T08:48:28.913

您可以覆盖该复选框的 mouselistener 以不执行任何操作：

```
class MyBox extends JCheckBox {

    @Override
    protected void processMouseEvent(MouseEvent e) {
    //this will prevent all mouse actions 
    }
} 
```

然后只使用 MyBox 而不是复选框？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T06:57:27.337

我对此的最终解决方案是使用`EmptyBorder`复选框左侧的一个，以及 BlackPanda 的鼠标侦听器解决方案：

```
public class CheckboxPanel extends JPanel {
    private final JCheckBox checkBox = new JCheckBox();
    private final Image img;

    public CheckboxPanel (final Image img0) {
        super();
        this.img = img0;

        // Left padding of 20 allows mouseovers on image that trigger the box.
        checkBox.setBorder(new EmptyBorder(0, 20, 0, 0)); 

        add(checkBox);

        this.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(final MouseEvent me) {
                checkBox.doClick();
            }
        });
    }

    public JCheckBox getCheckBox() {
        return this.checkBox;
    }

    @Override
    protected void paintComponent(final Graphics g) {
        super.paintComponent(g);
        g.drawImage(img, 0, 0, null);
    }
} 
```**

# maven - 如何解决缺少的 maven-junction-plugin 依赖项：junction.exe？

> ID：10238599
> 
> 赞同：3
> 
> 时间：2012-04-20T00:12:15.240
> 
> 标签：maven

我正在尝试设置干净阶段以使用 maven-junction-plugin，因为我正在从 Linux 和 Windows 构建项目。这是连接插件的 pom.xml 部分：

```
 <plugin>
            <groupId>com.pyx4j</groupId>
            <artifactId>maven-junction-plugin</artifactId>
                            <version>1.0.3</version>
            <executions>
                <execution>
                    <id>unlink</id>
                    <phase>clean</phase>
                    <goals>
                        <goal>unlink</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <links>

                    <link>
                        <dst>${basedir}/src/main/webapp/WEB-INF</dst>
                        <src>${WEB-INF}</src>
                    </link>
                </links>
            </configuration>
        </plugin> 
```

但是当我运行 mvn clean 时出现错误：

> 无法在项目 webapp 上执行目标 com.pyx4j:maven-junction-plugin:1.0.3:unlink (unlink)：执行 unlink of goal com.pyx4j:maven-junction-plugin:1.0.3:unlink failed: Plugin com. pyx4j:maven-junction-plugin:1.0.3 或其依赖项之一无法解析：Failure to find sysinternals:junction:exe:1.04 in [http://myserver.com:8080/archiva/repository/internal](http://myserver.com:8080/archiva/repository/internal)缓存在本地存储库，直到 archiva.default 的更新间隔已过或强制更新 -> [帮助 1] 才会重新尝试解析

我正在为 maven 存储库使用内部档案服务器，它在存储库中确实有 maven-junction-plugin，但是缺少 junction-1.04.exe，有​​没有办法可以在档案中添加下载的 junction-1.04.exe或 .m2 缓存以使 junction 插件正常工作？另一个问题，我在 Linux 中运行 mvn clean 时遇到同样的错误，我认为 junction 插件会在 Linux 中使用 ln -s，为什么它仍在寻找 junction.exe？提前致谢！

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:43:14.893

您可以尝试`junction.exe`在本地`.m2`或`archiva`分别手动安装/部署。

要在本地存储库中手动`install`运行，您可以运行[maven install plugin](http://maven.apache.org/plugins/maven-install-plugin/)`mvn install:install-file`的目标。在存档中，您可以使用[maven deploy plugin](http://maven.apache.org/plugins/maven-deploy-plugin/)命令。或者，archiva 可能有基于 Web 的部署选项，也可以使用。无论哪种情况，您都需要指定以下参数：`deploy``mvn deploy:deploy-file`

*   `groupId`如`sysinternals`,
*   `artifactId`如`junction`,
*   `version`作为`1.04`
*   `type`作为`exe`.

至于为什么在linux上还要找exe，看插件的[pom文件](https://pyx4j.com/viewvc/pyx4j/pyx4j-maven-plugins/maven-junction-plugin/pom.xml?revision=3190&view=markup)，对的依赖`exe`是无条件的。我怀疑它实际上不会在linux中使用。

# jenkins - 如何安全地关闭我的 Jenkins？

> ID：10238604
> 
> 赞同：84
> 
> 时间：2012-04-20T00:13:44.717
> 
> 标签：jenkins

我在自己的容器中运行 Jenkins。我使用命令“nohup java -jar jenkins.war --httpsPort=8443”。

如何安全关闭它？现在，我使用 kill 命令杀死进程。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-05-15T18:23:53.053

采用`http://[jenkins-server]/exit`

[此页面](https://wiki.jenkins-ci.org/display/JENKINS/Administering+Jenkins)显示如何使用 URL 命令。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-07-28T09:05:19.973

如果您想使用 Linux 控制台（例如 Ubuntu）在服务器上停止 jenkins 及其所有服务，请运行：

```
service jenkins start/stop/restart 
```

当您需要制作映像/卷快照并且希望所有服务停止写入磁盘/卷时，这很有用。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-03-10T16:49:09.130

1.  jenkinsUrl/safeRestart - 让您等待运行的 JOBS 完成并重新启动。
2.  jenkinsUrl/restart - 立即重新启动，无需等待当前正在运行的作业。
3.  jenkinsUrl/exit - 它停止/关闭 JENKINS 服务
4.  jenkinsUrl/reload - 重新加载配置更改。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-11-23T10:27:01.433

完整的命令列表可在`http://your-jenkins/cli`

干净关机的命令是`http://your-jenkins/safe-shutdown`

您可能还想使用`http://your-jenkins/safe-restart`

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-04-20T00:23:05.103

是的，如果您使用内置 Winstone 容器运行 Jenkins，kill 应该没问题。 [这个 Jenkins Wiki 页面](https://wiki.jenkins-ci.org/display/JENKINS/Starting+and+Accessing+Jenkins)有一些关于如何为 Jenkins 设置控制脚本的提示。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-04-24T06:13:11.763

你可以安全地杀死詹金斯。它将捕获 SIGTERM 和 SIGINT 并执行有序关闭。但是，如果 Jenkins 正在构建某些东西，它将中止构建，并且它们将在状态显示中显示为灰色。

如果你想避免这种情况，你必须让 Jenkins 进入关闭模式以防止它开始新的构建，并等到当前运行的构建完成后再杀死 Jenkins。

您还可以使用 Jenkins 命令行界面并告诉 Jenkins 安全关闭，这也是如此。[您可以在http://YOURJENKINS/cli](http://YOURJENKINS/cli)找到有关 Jenkins cli 的更多信息

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-02T12:15:31.720

创建一个在 Master 上运行的 Jenkins Job：

```
java -jar "%JENKINS_HOME%/war/WEB-INF/jenkins-cli.jar" -s "%JENKINS_URL%" safe-restart 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-07-06T11:26:41.597

您还可以查看初始化脚本区域（例如 centos vi /etc/init.d/jenkins ）以了解有关服务实际启动和停止的详细信息。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-01T11:55:37.457

**立即关闭 Jenkins 服务器。**

在 Windows`CMD.exe`中，转到文件所在的文件夹`jenkins-cli.jar`。

`C:\Program Files (x86)\Jenkins\war\WEB-INF`

**使用命令安全关机**

```
java -jar jenkins-cli.jar -s http://localhost:8080 safe-shutdown --username "YourUsername" 
--password "YourPassword" 
```

完整的命令列表可在[http://localhost:8080/cli获得](http://localhost:8080/cli)

感谢[Francisco](https://stackoverflow.com/a/13527164/2218697)发布`cli`命令。

参考：

[1.](https://issues.jenkins-ci.org/browse/JENKINS-21086)

希望能帮助某人。

# python - 在python中将字符串转换为日期时间并与当前时间进行比较

> ID：10238607
> 
> 赞同：1
> 
> 时间：2012-04-20T00:14:17.413
> 
> 标签：python, datetime, date

我正在尝试将字符串转换为以下格式：

```
Apr 18 17:19:42 
```

到 datetime 以便我可以将当​​前时间与那个时间进行比较，看看它们是否相差一分钟。我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T00:23:31.737

正如 S1R 已经指出的那样，该[`strptime`](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)方法就是您想要的。您还需要指定年份，因为它不包含在您的日期字符串中：

```
>>> import datetime
>>> s = "Apr 18 17:19:42"
>>> t = datetime.datetime.strptime(s, "%b %d %H:%M:%S")
>>> t
datetime.datetime(1900, 4, 18, 17, 19, 42)
>>> t = t.replace(year = 2012)
>>> n = datetime.datetime.now()
>>> n
datetime.datetime(2012, 4, 20, 10, 21, 42, 165657)
>>> d = n-t
>>> d.total_seconds()
147720.165657 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T00:16:17.460

[`strptime`](http://docs.python.org/library/time.html#time.strptime)是您需要的，它用于将字符串更改为日期时间

所以在你的情况下，它会是；

```
from datetime import datetime
todaysdate = datetime.strptime('Apr 18 17:19:42', '%b %d %H:%M:%S') 
```

# java - 使用 jFrames 数组？

> ID：10238616
> 
> 赞同：0
> 
> 时间：2012-04-20T00:15:09.667
> 
> 标签：java, arrays, swing, object, joptionpane

我想制作一个弹出框，每个框中都有不同的消息。我不知道消息的数量。我想知道显示这些 jFrame 的最佳方式是什么。我使用了一个数组，其中数组的长度是消息的数量。问题是我得到了一个 NullPointerExeption。我究竟做错了什么？

```
 public void interpret() {
    String[] command = html.split(";");

    for (int i = 0; i < command.length; i++) {
        //  System.out.println(command[i]);
        if (command[i].contains("message")) {
            showMessage(command[i].substring(8, command[i].length() - 1));
        }
    }

}
messagePopUp[] mes = new messagePopUp[10]; // I am just using length 10 for debugging

private void showMessage(String line) {

    mes[0].setTextAlert(line); // line giving me the error
    mes[0].setVisible(true);

} 
```

messagePopUp.class 只是一个默认的 jPanel 类，我添加了 setTextAlert();

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T00:18:52.707

你不能用一个[`JOptionPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)吗？它们仅用于显示对话框和消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T00:20:42.720

```
messagePopUp[] mes = new messagePopUp[10]; 
```

这分配了一个包含 10 个 messagePopup 的数组

但不会创建 10 个 messagePopup 对象^^

您需要创建对象并将它们存储在数组中

我会使用类似的东西

```
private void showMessage(String line, int i) {
   if(mes[i]==null){
      mes[i] = new messagePopUp();
   }
   mes[i].setTextAlert(line); // line giving me the error
   mes[i].setVisible(true);
} 
```

* * *

我也同意@Jack，因为您目前所做的 JOptionPane 似乎更适合您的需求

[http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

# bash - 为什么通过回声时反斜杠会消失？

> ID：10238617
> 
> 赞同：6
> 
> 时间：2012-04-20T00:15:40.060
> 
> 标签：bash, echo, backslash

我有这样的代码，它处理一个 CSV 文件：

```
#!/bin/bash
while read line
do
    variable=$(echo $line | awk -F, '{print $2}')
    echo $variable
 done < ./file.csv 
```

如果 CSV 文件包含任何`\`，当我运行此命令时，输出文本不会显示`\`.

如何确保`\`不被删除？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T00:26:01.647

这种行为的原因是`read`内置函数`\`用作转义字符。该`-r`标志禁用此行为。

所以，这应该工作：

```
while read -r line
  variable=$(echo $line | awk -F, '{print $2}')
  echo $variable
done < ./file.csv 
```

您还应该放置`"..."`诸如`$(...)`和变量之类的东西，例如

```
variable="$(command)"
echo "$variable" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T00:22:59.957

的手册页`bash`有这样的说法`read`：

> 反斜杠字符 (\) 可用于删除读取下一个字符和续行的任何特殊含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-14T06:52:42.547

[在这里](https://www.ibm.com/docs/en/aix/7.1?topic=e-echo-command)找到了一个很好的参考：

> \（反斜杠）是 shell 中的引号字符。这意味着除非 \ 与转义字符一起使用或括在引号中，例如 "" 或 ''，否则 shell 会在命令展开时删除反斜杠。

# matrix - 使用多列与 CUDA 进行矩阵乘法

> ID：10238620
> 
> 赞同：1
> 
> 时间：2012-04-20T00:16:03.957
> 
> 标签：matrix, cuda, matrix-multiplication

下面的代码计算 C=A*B，我将如何扩展它以进行多平铺乘法？在每一个循环中，一行 A 与一列 B 相乘。我的问题是如何修改它，使 A 的一行与 B 的多列相乘，这样我们就可以避免为同一行重新加载它们。

（代码取自：[Dynamic matrix multiplication with CUDA](https://stackoverflow.com/questions/9250897/dynamic-matrix-multiplication-with-cuda)）

```
// CUDA Kernel
__global__ void matrixMul( float* C, float* A, float* B, int wA, int wB,size_t block_size)
 {
int bx = blockIdx.x;
int by = blockIdx.y;
int tx = threadIdx.x;
int ty = threadIdx.y;

int aBegin = wA * block_size * by;
int aEnd   = aBegin + wA - 1;
int aStep  = block_size;

int bBegin = block_size * bx;

int bStep  = block_size * wB;
float Csub=0;

for (int a = aBegin, b = bBegin; a <= aEnd; a += aStep, b += bStep) 
{
    extern __shared__ float As[];
    extern __shared__ float Bs[];
    extern __shared__ float smem[];

    smem[ty*block_size+tx] = A[a + wA * ty + tx];

    smem[block_size*block_size+ty*block_size+tx]  = B[b + wB * ty + tx];

    __syncthreads();

    for (int k = 0; k < block_size; ++k)
        Csub += smem[ty*block_size+k] * smem[block_size*block_size+k*block_size+tx] ;

    __syncthreads();
}

int c = wB * block_size * by + block_size * bx;
C[c + wB * ty + tx] = Csub;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:57:10.690

Kirk 和 Hwu 的一本书深入探讨了开发高效的矩阵乘法内核：

[http://www.amazon.com/Programming-Massively-Parallel-Processors-Hands/dp/0123814723](https://rads.stackoverflow.com/amzn/click/com/0123814723)

Stack Overflow 上之前也有几个关于 CUDA 上的平铺矩阵乘法的问题。请参阅以下内容：

[矩阵乘法 CUDA](https://stackoverflow.com/questions/8813750/matrix-multiplication-cuda)

[CUDA 中的非方阵乘法](https://stackoverflow.com/questions/5460504/non-square-matrix-multiplication-in-cuda)

# c# - 这个分割序列的 linq 代码是如何工作的？

> ID：10238624
> 
> 赞同：5
> 
> 时间：2012-04-20T00:16:43.353
> 
> 标签：c#, linq

我一直在盯着我在另一个问题中找到的这段代码（下面逐字复制），我知道它并不多，但它让我无法理解 i++ % 部分是如何工作的。

```
void Main()
{
    int[] a = new [] { 10, 3, 5, 22, 223 };

    a.Split(3).Dump();

}
static class LinqExtensions 
{ 
    public static IEnumerable<IEnumerable<T>> Split<T>(this IEnumerable<T> list, int parts) 
    { 
        int i = 0; 
        var splits = from item in list 
                     group item by i++ % parts into part 
                     select part.AsEnumerable(); 
        return splits; 
    } 
} 
```

![在此处输入图像描述](../Images/ee426cd168ba87f4b7d49c09076d93c4.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T00:21:52.187

它将项目分组为您指定的部分数量。i++ 将为每个项目递增并应用模运算符，以便将其放入正确数量的桶中。所以第一个项目进入桶 0，第二个进入桶 1，第三个进入桶 2，第四个进入桶 0，等等......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T00:55:30.520

虽然[Keith Rousseau](https://stackoverflow.com/a/10238653/45914)是正确的，但我认为这个想法是实现这一目标的一种相当糟糕的方式。您可以通过以下方式更纯粹地实现它（即，无需改变捕获的变量）：

```
var splits = list.Select((item, index) => new { Item = item, Index = index })
                 .GroupBy(pair => pair.Index % parts, element => element.Item)
                 .Select(group => group.AsEnumerable()); 
```

# grails - 在grails中每个控制器命中服务器后如何运行一些代码

> ID：10238628
> 
> 赞同：0
> 
> 时间：2012-04-20T00:17:04.980
> 
> 标签：grails

我有自己的等价物，我需要在请求结束时进行提交或回滚。我正在使用 afterInterceptor，但我相信它会在视图渲染之前运行。视图渲染可能会做一些我需要封装在这个事务中的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:33:15.430

我不能完全确定这就是你所追求的，但[Grails 过滤器](http://grails.org/doc/latest/guide/theWebLayer.html#filters)会给你一个渲染后挂钩：[另见](http://grails.org/doc/latest/ref/Plug-ins/filters.html)

过滤器上有 3 个拦截器：

*   前
*   after - 在一个动作之后运行
*   afterView - 在视图渲染后运行，可能适合你

应该有一个隐式变量“请求”，您可能会从中获取任何参数

# facebook - 如何为特定 URL 而不是当前页面添加社交分享链接（FB Like、Google+）

> ID：10238629
> 
> 赞同：1
> 
> 时间：2012-04-20T00:17:22.483
> 
> 标签：facebook, google-plus, social, sharing

在我的网站主页上，我有一个文章预告列表。我想在预告片中添加社交分享链接。然而，我所有的尝试都导致社交链接为用户所在的当前页面生成帖子，而不是预告片链接到的实际页面。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:33:02.447

Facebook Like 按钮和 Google +1 按钮都支持定位其他页面，但技术略有不同。

**+1 按钮**

根据[+1 按钮文档](https://developers.google.com/+/plugins/+1button/#target-url)`href`中的此代码段，您可以使用页面标题中的属性或`rel=canonical`链接元素覆盖定位当前页面的默认行为。

> +1 的 URL 由以下三项之一确定：
> 
> 1.  按钮的`href`属性。例如：`<g:plusone href="http://example.com"></g:plusone>`将定位[http://example.com](http://example.com)。
>     
>     
> 2.  页面的`<link rel="canonical" ... />`标签 如果未提供 +1 按钮的 href 属性，Google 将使用该页面的规范 URL。有关为页面定义规范 URL 的更多信息，请参阅[此帮助文章](http://www.google.com/support/webmasters/bin/answer.py?answer=139066)。
>     
>     
> 3.  document.location.href 提供的 URL

还有一个您可能会发现有用的[配置工具。](http://www.google.com/webmasters/+1/button/)

**Facebook 喜欢按钮**

根据[官方文档](http://developers.facebook.com/docs/reference/plugins/like/)，您可以使用`href`属性或 OpenGraph 标记。

该`href`属性的作用与 +1 按钮上的作用非常相似。这是一个针对[http://example.com](http://example.com)的点赞按钮。

```
<div class="fb-like" data-href="http://example.com" 
  data-send="true" data-width="450" data-show-faces="true"></div> 
```

OpenGraph 选项要求您将元元素添加到文档的标题中。这是针对[http://example.com](http://example.com)的 OpenGraph 元素：

```
<meta property="og:url" content="http://example.com" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T21:58:19.450

您可以为每个社交媒体创建自定义分享按钮。以下是热门的分享链接。

[https://www.facebook.com/sharer.php?u=](https://www.facebook.com/sharer.php?u=)

[https://twitter.com/share?url=](https://twitter.com/share?url=)

您需要在上面的每个“...url=”后面加上自定义 URL 的编码版本。如果您有几篇文章，您可以手动执行此操作，但如果您有很多，您可以使用：

```
encodeURIComponent(varURL) 
```

然后通过抓取文章的 src 来生成 varURL，它可能类似于：

```
varURL = $('.articleDiv').children().attr('src'); 
```

# google-app-engine - Appengine 迁移应用程序停滞不前

> ID：10238635
> 
> 赞同：0
> 
> 时间：2012-04-20T00:18:04.013
> 
> 标签：google-app-engine

我已经开始从主从-HRD 迁移。状态已保持“正在运行”3 天。另一个应用程序中的相同数据（被批量加载）在 30 分钟内被迁移。

我怎样才能知道我的迁移发生了什么？

-lp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:43:11.653

您需要在 App Engine 问题跟踪器上[提交生产问题，并附上您的 App ID 和任何其他相关详细信息。](http://code.google.com/p/googleappengine/issues/entry?template=Production%20issue)

# javascript - 如何使用 CSS 和 Javascript 制作滚动的 Div 行？

> ID：10238636
> 
> 赞同：1
> 
> 时间：2012-04-20T00:18:22.097
> 
> 标签：javascript, html, css, internet-explorer-9, dhtml

我正在尝试创建一个具有动态数量的表单的网页（以表示用户可以描述的项目列表。

我的大部分功能都在工作，但我希望动态添加的表单连续显示（如果需要，可以使用滚动条）我大部分时间都在工作。在 Firefox 中，它按预期工作，但在 IE9（在标准模式下）中，一旦内容强制滚动条显示在下方，对于添加的每个新项目，动态表单都会被向下推更多（如果我设置了溢出-x：滚动而不是比“自动”我不明白这一点）当滚动条最初出现时，我对视觉转变感到满意，但在那之后我不希望有进一步的转变。

精简示例：

```
<!DOCTYPE html>
<html>
<head>
<script>
    var next_id = 1;

    function maximize_width(element) {
        var w = 0;
        var c = element.firstChild;

        while (c) {
            if (!isNaN(c.offsetWidth)) {
                w += c.offsetWidth;
            }
            c = c.nextSibling;
        }
        element.style.width = w + "px";
    }

    function do_add() {
        var container = document.getElementById("container");
        var t = document.getElementById("template").cloneNode(true); //clone the template
        t.id = "item_" + next_id; //create a new unique id
        t.className = "item";
        next_id += 1;
        container.appendChild(t);
        maximize_width(container);
    }

</script>
<style>

#template{
    display:none;
}

#scroll-container {
    width: 100%;
    margin: 0px;
    overflow-x: auto;
    overflow-y: hidden;
}

#container{
}

.item{
    display:inline-block;
    margin: 0px;
    width: 200px;
    height: 200px;
    background-color: green;
}

</style>
</head>
    <body>
        <div id="scroll-container">
        <div id="container">
            <form id="template" class="template">
            </form>
        </div>
        </div>
    <button onclick="do_add()">Add</button>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:32:58.710

这对您的标题添加还不够吗？

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

（我的 linux 工作站上没有 IE，但如果 doctype 已经正确，通常足以使 IE9 按预期工作）

# php - Google Maps API：空白页（无地图）

> ID：10238639
> 
> 赞同：1
> 
> 时间：2012-04-20T00:19:02.530
> 
> 标签：php, javascript, mysql, google-maps, google-maps-api-3

我几乎从教程中复制了代码： [https](https://developers.google.com/maps/articles/phpsqlajax_v3) ://developers.google.com/maps/articles/phpsqlajax_v3 （当然，我猜我做了适当的更改）。

你能帮我弄清楚为什么地图没有显示吗？

我正在使用 MySQL/PHP 生成[XML 输出](http://firstchoicehousing.com/_api/google/maps/phpsqlajax_genxml2.php)（与教程类似的代码）：

```
<?php
require("database.php");

function parseToXML($htmlStr) 
{ 
$xmlStr=str_replace('<','&lt;',$htmlStr); 
$xmlStr=str_replace('>','&gt;',$xmlStr); 
$xmlStr=str_replace('"','&quot;',$xmlStr); 
$xmlStr=str_replace("'",'&#39;',$xmlStr); 
$xmlStr=str_replace("&",'&amp;',$xmlStr); 
return $xmlStr; 
} 

// Opens a connection to a MySQL server
$connection=mysql_connect ($localhost, $username, $password);
if (!$connection) {
  die('Not connected : ' . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die ('Can\'t use db : ' . mysql_error());
}

// Select all the rows in the tbl_address table
$query = "SELECT * FROM tbl_address WHERE 1";
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

// Start XML file, echo parent node
echo '<markers>';

// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  // ADD TO XML DOCUMENT NODE
  echo '<marker ';
  echo 'name="' . parseToXML($row['address']) . '" ';
  echo 'address="' . parseToXML($row['address']) . '" ';
  echo 'lat="' . $row['latitude'] . '" ';
  echo 'lng="' . $row['longitude'] . '" ';
  echo 'type="USC Student Housing" ';
  echo '/>';
}

// End XML file
echo '</markers>';

?> 
```

这是[地图](http://firstchoicehousing.com/_api/google/maps/phpsqlajax_map_v3.html)（与教程类似的代码）：

```
<!DOCTYPE html >
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP/MySQL & Google Maps Example</title>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    //<![CDATA[

    var customIcons = {
      restaurant: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(34.026485, -118.283794),
        zoom: 14,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
      downloadUrl("http://firstchoicehousing.com/_api/google/maps/phpsqlajax_genxml2.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[[]i].getAttribute("name");
          var address = markers[[]i].getAttribute("address");
          var type = markers[[]i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[[]i].getAttribute("lat")),
              parseFloat(markers[[]i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address;
          var icon = customIcons[[]type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
        }
      });
    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>

  </script>

  </head>

  <body onload="load()">
    <div id="map" style="width: 500px; height: 300px"></div>
  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:28:21.947

需要对每个语法错误进行更改。完整的js如下。这是一个小提琴，它不显示标记，因为我不能使用 ajax 跨域来获取列表，但你可以看到地图加载。 [http://jsfiddle.net/zvmdp/](http://jsfiddle.net/zvmdp/)

编辑将您的代码更改为此并运行

```
var customIcons = {
      restaurant: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(34.026485, -118.283794),
        zoom: 14,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
      downloadUrl("http://firstchoicehousing.com/_api/google/maps/phpsqlajax_genxml2.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
        }
      });
    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {} 
```

# jquery - jQuery 仅适用于第二次点击 Ajax 加载页面

> ID：10238641
> 
> 赞同：6
> 
> 时间：2012-04-20T00:19:22.207
> 
> 标签：jquery, ajax

我对 Ajax 和 JQuery 很陌生，所以请多多包涵。我在我的页面上通过 Ajax 加载内容，加载的内容里面有一个 jQuery 幻灯片。当我单击链接时，一切运行正常，内容出现，除了幻灯片之外的所有内容都没有开始。我需要再次单击该链接，以便幻灯片开始工作。

到目前为止，这是我的代码：

```
var loadUrl = "map_fr.html";    
$("#loader").on('click',function(){
    $("#conteudo_projects").html(ajax_load).load(loadUrl);
    }); 
```

然后我选择一个带有 id="loader" 的链接来加载 #conteudo_projects DIV 中的内容。

谁能帮我？为什么幻灯片在第一次单击时不开始工作？（如果我直接在页面上测试幻灯片，它可以工作，所以我知道这没有问题，只有当我通过 Ajax 加载它时才会发生）。

非常感谢！

编辑：我安装了 Firebug，虽然我仍然不太了解它显示的所有内容，但我注意到在 Net>JS 下，第一次单击链接时，我得到 GET jQuery 请求 (ajax.googleapis.com) 变灰. 当我再次单击时，新请求似乎没问题。不知道这是否有帮助，我正在尽一切努力使这项工作。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:05:02.100

api的使用`on`不正确..您还确保您将此事件处理程序绑定到`document.ready`..这是代码应该是什么：

此外，您的 ajax 负载可能应该在您的事件处理程序回调中

```
$(document).ready(function(){
  $(document).on('click',"#loader",function(){
      $.ajax(url:url,
             type:"POST",
             success:function(data){  
             $("#conteudo_projects").html(data); 
             });
      });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:16:15.630

你可以使用 jQuery`load`来加载这样的内容

这将显示您存储在 ajax_load 变量中的 ajax 加载图像并从 yourUrl 获取内容。一旦它从 ajax 调用接收到内容，它将用新内容替换加载图像标记。

```
$(function(){
  $(document).on('click',"#loader",function(){
     $("#conteudo_projects").html(ajax_load).fadeIn(300,function(){
        $(this).load(yourUrl);
     });
  });
}); 
```

jQuery`on`从 1.7+ 开始可用。如果您使用的是之前的版本，您可能需要考虑 jQuery `live`。

# java - java不匹配或永无止境的程序

> ID：10238644
> 
> 赞同：1
> 
> 时间：2012-04-20T00:19:57.483
> 
> 标签：java, input, mismatch

我的代码应该从 .txt 文件中读取输入，然后执行不同的操作对其进行排序。第一个 int 是长度。我的主要问题是我无法弄清楚为什么我不断收到不匹配错误，或者如果我输入“垃圾”语句，程序永远不会完成。我会先发布.txt，然后再发布程序。

```
15
Smith, John
26
Baker
Jones, Susan
15
Student
Mouse, Mickey
31
Theme park employee
Mouse, Mighty
48
Cartoon super hero
Anderson, William
35
Computer Programmer
Parker, Cindy
18
Author
McCain, John
20
Student
Armstrong, Michelle
17
Student
Thompson, Anne
29
Doctor
Li, Steve
15
Student
James, Tanya
20
Student
Moore, James
32
Teacher
Andrews, Julie
75
Actress
Obama, Michelle
46
Lawyer
Michaels, Todd
51
Student 
```

//不要忘记复制末尾的空行。

程序从这里开始。

```
import java.util.Scanner;
import java.io.*;
public class SortAndDisplayCustomerData
{
public int length; //The length of the names, ages, and occupations arrays
public String[] names;
public int[] ages;
public String[] occupations;
public int count; //The length of the studentNames and studentAges arrays
public String[] studentNames;
public int[] studentAges;
public int i, minPos, Temp2, y, minVal;
public String Temp, Temp3, temp2, minVal2;

public void getDataFromFile()
{
Scanner keyboard = new Scanner(System.in);
    Scanner inputStream = null;
System.out.println("wtf");
    try
    {
        inputStream = new Scanner(new FileInputStream("NameAgeOcc.txt"));
    }

    catch(FileNotFoundException error)
    {
        System.out.println("Unable to open input file.");
        System.exit(0);
    }
    System.out.println("wtf2");
    length=inputStream.nextInt();
    //String junk = keyboard.nextLine();
    System.out.println("wtf3");
    names = new String[length];
    ages = new int[length];
    occupations = new String[length];
    for(i=0;i<length;i++)
    {
        names[i]=inputStream.nextLine();
        ages[i]=inputStream.nextInt();
        occupations[i]=inputStream.nextLine();
    }
    inputStream.close();
} 

public void displayAllFileData()
{
System.out.println("wtf3");
System.out.printf("%-25s%-8s%24s%n","Names","  Ages","  Occupations");
    for(i=0;i<length;i++)
    {
        System.out.printf("%-25s%6d%-24s%n",names[i],ages[i],occupations[i]);
    }
}
public void sortAllDataByAge()
{
    for(i=0;i<length;i++)
    {
        minVal=ages[i];
        minPos=i;
        for(y=i+1;y<length;y++)
        {
            if(ages[y]<minVal)
            {
                minVal=ages[y];
                minPos=y;
            }
        }
        Temp2 = ages[minPos];
        ages[minPos] = ages[i];
        ages[i] = Temp2;
        Temp = names[minPos];
        names[minPos] = names[i];
        names[i] = Temp;
        Temp3 = occupations[minPos];
        occupations[minPos] = occupations[i];
        occupations[i] = Temp3;
    }
}
public void extractStudentData()
{
    count=0;
    for (i=0;i<length;i++)
    {
        if(occupations[i].equalsIgnoreCase("student"))
        count++;
    }
    int j=0;
    studentAges = new int[count];
    studentNames = new String[count];
    for (i=0;i<length;i++)
    {
        if(occupations[i].equalsIgnoreCase("student"))
        {
            studentAges[j]=ages[i];
            studentNames[j]=names[i];
            j++;
        }
        }
}
public void displayStudentData()
{ 
System.out.printf("%n%-25s%-8s%n","Names","  Ages");

    for (i=0;i<count;i++)
    {
        System.out.printf("%-25s%6d%n",studentNames[i],studentAges[i]);
    }

}
public void sortStudentDataAlpha()
{ 
    for(i=0;i<count;i++)
    {
        minVal2=studentNames[i];
        minPos=i;
        for(y=i+1;y<count;y++)
        {
            if(studentNames[y].compareToIgnoreCase(minVal2)<0)
            {
                minVal2=studentNames[y];
                minPos=y;
            }
        }
        Temp = studentNames[minPos];
        studentNames[minPos] = studentNames[i];
        studentNames[i] = Temp;
        Temp2 = studentAges[minPos];
        studentAges[minPos] = studentAges[i];
        studentAges[i] = Temp2;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:33:22.273

在 nextInt() 之后，你应该吃掉换行符，否则你会期待一个字符串（对于你的文本文件中的名称），你会得到一个空字符串（换行符）。然后，您将再次获得 nextInt()，但文本文件中的指针将位于名称 (String) 上。

例如，您的程序遵循如下路径：

```
32 
Teacher 
Andrews, Julie 
75 
Actress 
Obama, Michelle 
```

nextInt() -> `32`nextLine() -> `nextLine() -> `Teacher`
nextInt() -> `Andrews,`[类型不匹配]`

# twitter-bootstrap - 回发后Javascript无法正常工作

> ID：10238650
> 
> 赞同：2
> 
> 时间：2012-04-20T00:20:59.847
> 
> 标签：twitter-bootstrap

我正在使用 asp.net Web 应用程序上的引导组件。它工作正常，但奇怪的是，它们在页面回发后停止工作。外表不错，但行为不行。这就是为什么我认为问题涉及 javascript 文件的原因。

例如，dorp down 按钮：回发后，展开操作不起作用。

你知道这可能是什么原因吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-20T00:38:00.230

如果您使用 UpdatePanel 进行部分页面刷新，那么当面板的内容通过 AJAX 更新时，通常的`$(document).ready(...) / $(...)`东西不会再次触发，这意味着作为 Bootstrap 一部分的自定义 JS 功能（如下拉菜单）不会重新绑定到新元素。

我通常做的是将设置 javascript 事件处理程序和行为的代码提取到它们自己的函数中（例如），然后我在更新面板中使用以下代码以确保它在部分回发*后*`function BindEvents() { ... }`重新运行（以及与初始页面加载一样）：

 *```
<script type="text/javascript">
    Sys.Application.add_load(BindEvents);
</script> 
```

**编辑：**这是一个建议的基本`BindEvents()`功能，应该为您重新初始化下拉菜单：

```
function BindEvents() {
    $('[data-toggle=dropdown]').dropdown();
    // other bootstrap binding code - see the combined Bootstrap.js for ideas
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:00:47.617

如果您使用这行代码，endRequestHandler 中的任何内容都应该在每次更新面板更新时触发。

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandler);

        function endRequestHandler(){

             // initialize controls here...

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-13T21:13:06.503

将以下内容放在页面正文中解决了该问题：

`<script type="text/javascript">` $('.dropdown-toggle').dropdown(); `</script>`*

# android - 3.2 之前的设备的最小屏幕宽度Dp？

> ID：10238652
> 
> 赞同：3
> 
> 时间：2012-04-20T00:21:15.323
> 
> 标签：android, android-layout, android-fragments

通过阅读支持多种屏幕尺寸的文档，从 Android 3.2 开始，您可以使用`smallestScreenWidthDp`有条件地设置布局，但是对于 3.2 之前的设备有什么要求吗？

我有一个基于片段的布局，如果屏幕尺寸大于 600dp，我想在屏幕上显示两个片段。

这是我用来设置我想找到替代方案的片段的代码：

```
public class MyActivity extends FragmentActivity  
{
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        if (getResources().getConfiguration().smallestScreenWidthDp >= 600) {
            finish();
            return;
        }

        if (savedInstanceState == null) {
            final DetailFragment details = new DetailFragment();
            details.setArguments(getIntent().getExtras());

            getSupportFragmentManager().beginTransaction().add(android.R.id.content, details).commit();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:29:00.750

这是我使用的：

```
public static int getSmallestScreenWidthDp(Context context) {
    Resources resources = context.getResources();
    try {
        Field field = Configuration.class.getDeclaredField("smallestScreenWidthDp");
        return (Integer) field.get(resources.getConfiguration());
    } catch (Exception e) {
        // not perfect because reported screen size might not include status and button bars
        DisplayMetrics displayMetrics = resources.getDisplayMetrics();
        int smallestScreenWidthPixels = Math.min(displayMetrics.widthPixels, displayMetrics.heightPixels);
        return Math.round(smallestScreenWidthPixels / displayMetrics.density);
    }
} 
```

不幸的是，它并不完美，因为 DisplayMetrics 中的屏幕尺寸可能不包括状态栏或软按钮。

例如，在我的 Galaxy Tab 10.1 上，实际值为 800，而计算值仅为 752。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:59:03.697

正如你已经说过的，“SmallestScreenWidthDp”（[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)）是 3.2 及以上版本的最佳选择。3.2 之前的设备你可以像你一样使用配置对象。

换句话说：没有（不幸的是）别无选择......

# iphone - iPhone 应用程序的声音字节

> ID：10238657
> 
> 赞同：1
> 
> 时间：2012-04-20T00:22:06.423
> 
> 标签：iphone, objective-c, audio, audiotoolbox

有人可以建议我在哪里可以浏览和下载 iPhone 应用程序的各种声音字节吗？我需要在我的应用程序中添加各种滴答声和俯冲声。

任何信息将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:41:25.920

您可以使用任何支持的 mp3 或声音文件 [wav]

所以找到像这个网站一样的声音效果：

[绝对音效档案](http://www.grsites.com/archive/sounds/)

然后使用您的媒体播放器进行简单的声音播放

按照本 [教程播放音效](http://www.edumobile.org/iphone/iphone-programming-tutorials/implementing-sound-effect-in-iphone/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:07:38.147

试试[http://www.freesound.org](http://www.freesound.org) - 许多在知识共享许可下的小音效。

# windows - Windows 的 Profiler QT 应用程序

> ID：10238659
> 
> 赞同：4
> 
> 时间：2012-04-20T00:22:30.607
> 
> 标签：windows, qt, profiler

您好我正在寻找一个分析器应用程序来分析 Windows 的 QT 应用程序。目前，我尝试使用英特尔的 Parallel Studio，但我得到了很多误报。

任何链接或文档开始？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-04-20T14:58:28.200

[http://doc.qt.io/qtcreator/creator-cache-profiler.html](http://doc.qt.io/qtcreator/creator-cache-profiler.html)

Qt Creator 它自己内置了一个分析器，只需检查上面的链接以了解它们。

# java - 在列表活动中使用（Intent putextra）传递数据不起作用

> ID：10238660
> 
> 赞同：0
> 
> 时间：2012-04-20T00:22:32.183
> 
> 标签：java, android, android-intent

单击打开新活动时，我的列表活动每行形成 5 行，

我为每个类设置了单独的类（以对其进行自定义），因此我有 5 个类：as（City1、City2、City3 等）

在每一行类中，我有很多视图，其中一个是单击打开**自定义无限图库时的****按钮**，

 **我想通过使用**putextra 意图将这个无限画廊传递给 5 行类**

但是当运行应用程序时按下按钮打开无限画廊它给了（**强制关闭**）

，我在android开发方面没有什么经验，

你能帮我吗，任何建议将不胜感激，谢谢

我的代码：**GalleryCity 类**

```
 public class GalleryCity extends Activity {
  static String city;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

     Boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
      // Set the layout to use
      setContentView(R.layout.main);
      if (customTitleSupported) { 
 getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,R.layout.custom_title); 
    TextView tv = (TextView) findViewById(R.id.tv); 
         Typeface face=Typeface.createFromAsset(getAssets(),"BFantezy.ttf");     
         tv.setTypeface(face);
         tv.setText("My Pictures"); 
            } 

      Intent intent = getIntent(); 
      city = intent.getStringExtra("galleryimags"); 

      InfiniteGallery galleryOne = (InfiniteGallery) findViewById(R.id.galleryOne);
      galleryOne.setAdapter(new InfiniteGalleryAdapter(this)); 
      galleryOne.setSelection(galleryOne.getCount()/2);            
                     }
                     }

   class InfiniteGalleryAdapter extends BaseAdapter { 
      private Context mContext;
      public InfiniteGalleryAdapter(Context c, int[] imageIds) { 
      this.mContext = c; } 

       public int getCount() { 
      return Integer.MAX_VALUE; } 

       public Object getItem(int position) { 
      return position; } 

       public long getItemId(int position) { 
      return position; } 

    private LayoutInflater inflater=null; 
    public InfiniteGalleryAdapter(Context a) { 
       this.mContext = a; 
       inflater = (LayoutInflater)mContext.getSystemService (
            Context.LAYOUT_INFLATER_SERVICE); 
       getImagesforCity(); 
        } 

      private int[] images;
      private void getImagesforCity() {
        if(GalleryCity.city.equalsIgnoreCase("City1")){ 
         int[] imagestemp = {
               R.drawable.one_1, R.drawable.one_1, 
                R.drawable.one_1

                  }; 
        images=imagestemp;

                        }
        if(GalleryCity.city.equalsIgnoreCase("City2")){
         int[] imagestemp = {
        R.drawable.one_2, R.drawable.one_2, 
             R.drawable.one_2   }; 
       images=imagestemp;

                                  }

        if(GalleryCity.city.equalsIgnoreCase("City3")){
          int[] imagestemp = {
        R.drawable.one_3, R.drawable.one_3, 
             R.drawable.one_3   }; 
        images=imagestemp;

                       }
        if(GalleryCity.city.equalsIgnoreCase("City4")){
          int[] imagestemp = {
        R.drawable.one_4, R.drawable.one_4, 
             R.drawable.one_4   }; 
        images=imagestemp;

                         }
        if(GalleryCity.city.equalsIgnoreCase("City5")){
            int[] imagestemp = {
        R.drawable.one_5, R.drawable.one_5, 
             R.drawable.one_5   }; 
       images=imagestemp;

                          }
                   }
       public class ViewHolder{ 
      public TextView text; 
      public ImageView image; } 

      private String[] name = { "in the cafe", "im in park", "nice place", };

      public View getView(int position, View convertView, ViewGroup parent) { 
         ImageView i = getImageView(); 

             int itemPos = (position % images.length); 

        try { i.setImageResource(images[itemPos]); ((BitmapDrawable) i.getDrawable 
                     ()).setAntiAlias(true); } 

       catch (OutOfMemoryError e) { Log.e("InfiniteGalleryAdapter", "Out of memory
                    creating imageview. Using empty view.", e); } 

       View vi=convertView; 
       ViewHolder holder; 
    if(convertView==null){ 
     vi = inflater.inflate(R.layout.gallery_items, null); 
      holder=new ViewHolder(); holder.text=(TextView)vi.findViewById
                    (R.id.textView1); 
      holder.image=(ImageView)vi.findViewById(R.id.image); 
         vi.setTag(holder); } 

      else holder=(ViewHolder)vi.getTag(); 
      holder.text.setText(name[itemPos]); 

      final int stub_id=images[itemPos]; 
      holder.image.setImageResource(stub_id); 

         return vi; } 

      private ImageView getImageView() { 

        ImageView i = new ImageView(mContext); 

               return i; } 

                        }
    class InfiniteGallery extends Gallery {

   public InfiniteGallery(Context context) {
    super(context);
      init();
            }

public InfiniteGallery(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
                   }

public InfiniteGallery(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
               }

private void init(){
    setSpacing(25);
    setHorizontalFadingEdgeEnabled(false);
                   }

public void setResourceImages(int[] name){
    setAdapter(new InfiniteGalleryAdapter(getContext(), name));
    setSelection((getCount() / 2));
                  }
                    } 
```

在每个行类（City1、City2、City3 等）中：

我把这段代码：

```
 public void handleClick(View v){

    Intent intent = new Intent(this, GalleryCity.class);
    intent.putExtra("galleryimags",city);
    startActivity(intent);                           

            }

                } 
```

还请告诉我如何为每个设置**不同的**图像字符串**名称**：（ City1,City2,City3,City4,City5 ）类。

如 ：

```
 private String[] name = { "in the cafe", "im in park",
                                 "nice place", }; 
```

这是堆栈跟踪：

```
 04-20 18:29:17.421: E/AndroidRuntime(5007): FATAL EXCEPTION: main
 04-20 18:29:17.421: E/AndroidRuntime(5007): java.lang.RuntimeException: Unable to
 start activity ComponentInfo{com.test.city/com.test.city.GalleryCity}:
 java.lang.NullPointerException
 04-20 18:29:17.421: E/AndroidRuntime(5007):
 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
 04-20 18:29:17.421: E/AndroidRuntime(5007):
 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
 04-20 18:29:17.421: E/AndroidRuntime(5007):
 at android.os.Handler.dispatchMessage(Handler.java:99)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at android.os.Looper.loop(Looper.java:123)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at android.app.ActivityThread.main(ActivityThread.java:3687)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at java.lang.reflect.Method.invokeNative(Native Method)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at java.lang.reflect.Method.invoke(Method.java:507)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at dalvik.system.NativeStart.main(Native Method)
 04-20 18:29:17.421: E/AndroidRuntime(5007):
 Caused by: java.lang.NullPointerException
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at com.test.city.InfiniteGalleryAdapter.getImagesforCity(GalleryCity.java:71)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at com.test.city.InfiniteGalleryAdapter.<init>(GalleryCity.java:66)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at com.test.city.GalleryCity.onCreate(GalleryCity.java:43)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
 04-20 18:29:17.421: E/AndroidRuntime(5007): 
    ... 11 more 
```

更新：将更改应用到**GallerCity**，如下所示：

```
 public class GalleryCity extends Activity {
 static String city;

    /** Called when the activity is first created. */
   @Override
      public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);

    Boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
    // Set the layout to use
    setContentView(R.layout.main);
    if (customTitleSupported) { 
 getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,R.layout.custom_title); 
         TextView tv = (TextView) findViewById(R.id.tv); 
     Typeface face=Typeface.createFromAsset(getAssets(),"BFantezy.ttf");     
         tv.setTypeface(face);
         tv.setText("My Pictures"); 
            } 

    Intent intent = getIntent(); 
    city = intent.getStringExtra("galleryimags"); 

    InfiniteGallery galleryOne = (InfiniteGallery) findViewById(R.id.galleryOne);

    galleryOne.setAdapter(new InfiniteGalleryAdapter(this,intent.getStringExtra
                          ("galleryimags"))); 
    galleryOne.setSelection(galleryOne.getCount()/2);            
     }
      }

  class InfiniteGalleryAdapter extends BaseAdapter { 
  private Context mContext;

   String city ="";  
  public InfiniteGalleryAdapter(Context c, String city) {  
     this.mContext = c;     
     this.city=city;       }  

   public int getCount() { 
return Integer.MAX_VALUE; } 

   public Object getItem(int position) { 
return position; } 

   public long getItemId(int position) { 
return position; } 

   private LayoutInflater inflater=null; 
   public InfiniteGalleryAdapter(Context a) { 
  this.mContext = a; 
     inflater = (LayoutInflater)mContext.getSystemService
             (Context.LAYOUT_INFLATER_SERVICE);                        
       getImagesforCity(); 
           } 

      private int[] images;

   private void getImagesforCity() {
  if(city.equalsIgnoreCase("City1")){  
    int[] imagestemp = {
            R.drawable.one_1, R.drawable.one_1, 
            R.drawable.one_1

    }; 
    images=imagestemp;

            }
 if(city.equalsIgnoreCase("City2")){  
    int[] imagestemp = {
            R.drawable.one_2, R.drawable.one_2, 
            R.drawable.one_2   }; 
    images=imagestemp;

            }

 if(city.equalsIgnoreCase("City3")){  
    int[] imagestemp = {
            R.drawable.one_3, R.drawable.one_3, 
            R.drawable.one_3   }; 
    images=imagestemp;

            }
 if(city.equalsIgnoreCase("City4")){  
    int[] imagestemp = {
            R.drawable.one_4, R.drawable.one_4, 
            R.drawable.one_4   }; 
    images=imagestemp;

            }
 if(city.equalsIgnoreCase("City5")){  
    int[] imagestemp = {
            R.drawable.one_5, R.drawable.one_5, 
            R.drawable.one_5   }; 
    images=imagestemp;

          }
        }
 public class ViewHolder{ 
 public TextView text; 
 public ImageView image; } 

   private String[] name = { "in the cafe", "im in park", "nice place", };

   public View getView(int position, View convertView, ViewGroup parent) { 
      ImageView i = getImageView(); 

   int itemPos = (position % images.length); 

   try { i.setImageResource(images[itemPos]); ((BitmapDrawable) i.getDrawable
                   ()).setAntiAlias(true); } 

  catch (OutOfMemoryError e) { Log.e("InfiniteGalleryAdapter", "Out of memory
              creating imageview. Using empty view.", e); } 

     View vi=convertView; 
     ViewHolder holder; 
   if(convertView==null){ 
 vi = inflater.inflate(R.layout.gallery_items, null); 
 holder=new ViewHolder(); holder.text=(TextView)vi.findViewById(R.id.textView1); 
 holder.image=(ImageView)vi.findViewById(R.id.image); 
 vi.setTag(holder); } 

      else holder=(ViewHolder)vi.getTag(); 
      holder.text.setText(name[itemPos]); 

      final int stub_id=images[itemPos]; 
      holder.image.setImageResource(stub_id); 

        return vi; } 

    private ImageView getImageView() { 

     ImageView i = new ImageView(mContext); 

      return i; } 

            }
    class InfiniteGallery extends Gallery {

  public InfiniteGallery(Context context) {
    super(context);
    init();
           }

public InfiniteGallery(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
                 }

public InfiniteGallery(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
              }

private void init(){
    setSpacing(25);
    setHorizontalFadingEdgeEnabled(false);
              }
public void setResourceImages(String name){
    setAdapter(new InfiniteGalleryAdapter(getContext(), name));
    setSelection((getCount() / 2));
                }
            } 
```

应用更改后的第一件事我在这部分出现红线错误：

```
 public void setResourceImages(int[] name){
    setAdapter(new InfiniteGalleryAdapter(getContext(), name));
    setSelection((getCount() / 2));
          }
          }
  red mark under :
     setAdapter(new InfiniteGalleryAdapter(getContext(), name)); 
```

然后改成这个（所以没有出现红线错误）：

```
 public void setResourceImages(String name){
    setAdapter(new InfiniteGalleryAdapter(getContext(), name));
    setSelection((getCount() / 2));
 }
     } 
```

在我运行应用程序后，当单击打开图库的按钮时，它会强制关闭，

以下 logcat 日志如下：

```
 04-21 23:31:32.394: E/AndroidRuntime(27795): FATAL EXCEPTION: main
  04-21 23:31:32.394: E/AndroidRuntime(27795): java.lang.NullPointerException
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
    at com.test.city.InfiniteGalleryAdapter.getView(GalleryCity.java:126)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
    at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:192)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.view.View.measure(View.java:8366)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.view.View.measure(View.java:8366)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.view.View.measure(View.java:8366)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.view.View.measure(View.java:8366)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.view.View.measure(View.java:8366)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.view.ViewRoot.performTraversals(ViewRoot.java:844)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.os.Handler.dispatchMessage(Handler.java:99)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.os.Looper.loop(Looper.java:123)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at android.app.ActivityThread.main(ActivityThread.java:3687)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at java.lang.reflect.Method.invokeNative(Native Method)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at java.lang.reflect.Method.invoke(Method.java:507)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
  04-21 23:31:32.394: E/AndroidRuntime(27795): 
   at dalvik.system.NativeStart.main(Native Method) 
```

此行中 log cat 中的错误：

```
 04-21 23:31:32.394: E/AndroidRuntime(27795): 
     at com.test.city.InfiniteGalleryAdapter.getView(GalleryCity.java:126) 
```

与代码块中的这一行匹配：

```
 int itemPos = (position % images.length); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:28:50.253

[你尝试过类似的东西吗](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Bundle%29)

```
Intent myIntent = new Intent();
myIntent.putExtra("key", "value");
startActivity(myIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:50:40.960

我认为这不是您的 Intent 的问题。您可以通过调试来检查它，或者只是`Log.d("intentExtra", city);`在从 Intent 中获取额外的 String 之后放置以检查它是否真的得到它。我认为确实如此。

您需要做的并且在您的代码中没有这样的事情是为您设置一个适配器`InfiniteGallery`（这是典型的扩展`Gallery`），所以它知道从哪里获取图像。

首先，您必须通过调用以下内容来实例化您的适配器：

`InfiniteGalleryAdapter mAdapter = new InfiniteGalleryAdapter(this, imageIds)`

（`int[] imageIds`是一个ID数组，我不知道你从哪里得到它）

然后通过以下方式将其设置到您的画廊：

`galleryOne.setAdapter(mAdapter)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:29:23.647

更新：为您的 CityGallery 课程尝试以下代码：

```
InfiniteGallery galleryOne = (InfiniteGallery) findViewById(R.id.galleryOne);
        galleryOne.setAdapter(initializeImages()); 
        galleryOne.setSelection(galleryOne.getCount()/2);            

    }

    private InfiniteGalleryAdapter initializeImages() {
        InfiniteGalleryAdapter galleryAdapter = null;

        String city = getIntent().getStringExtra("cityname");
        tv.setText("My "+city+" Pictures"); 

        if(city.equalsIgnoreCase("City1")){
            int[] tempimages = { R.drawable.ic_launcher, R.drawable.ic_launcher,R.drawable.ic_launcher };  
            String[] name = { "Image 1","Image 2", "Image 3"};  

            galleryAdapter=new InfiniteGalleryAdapter(this, tempimages, name);
        }else if(city.equalsIgnoreCase("City2")){
            int[] tempimages = { R.drawable.ic_launcher, R.drawable.ic_launcher,R.drawable.ic_launcher };  
            String[] name = { "Image 4","Image 5", "Image 6"};  

            galleryAdapter=new InfiniteGalleryAdapter(this, tempimages, name);

        }else if(city.equalsIgnoreCase("City3")){
            int[] tempimages = { R.drawable.ic_launcher, R.drawable.ic_launcher,R.drawable.ic_launcher };  
            String[] name = { "Image 7","Image 8", "Image 9"};  

            galleryAdapter=new InfiniteGalleryAdapter(this, tempimages, name);

        }else if(city.equalsIgnoreCase("City4")){
            int[] tempimages = { R.drawable.ic_launcher, R.drawable.ic_launcher,R.drawable.ic_launcher };  
            String[] name = { "Image 10","Image 11", "Image 12"};  

            galleryAdapter=new InfiniteGalleryAdapter(this, tempimages, name);

        }else if(city.equalsIgnoreCase("City5")){
            int[] tempimages = { R.drawable.ic_launcher, R.drawable.ic_launcher,R.drawable.ic_launcher };  
            String[] name = { "Image 13","Image 14", "Image 15"};  

            galleryAdapter=new InfiniteGalleryAdapter(this, tempimages, name);
        }
        return galleryAdapter;

    } 
```

}**

# c# - 如何开始/停止/等待线程

> ID：10238662
> 
> 赞同：0
> 
> 时间：2012-04-20T00:22:38.217
> 
> 标签：c#, multithreading, asynchronous, windows-runtime

我正在将一些 C# .Net 代码移植到 WinRT，但我无法弄清楚如何替换以下代码：

```
bool threadDone = false;
Thread updateThread = null;

void StartUpdateThread() {
  threadDone = false;
  updateThread = new Thread(new ThreadStart(SendUpdateThread));
  updateThread.Start();
}

void StopUpdateThread() {
  if (updateThread == null) return;
  threadDone = true;
  updateThread.Join();
  updateThread = null;
}

void SendUpdateThread() {
  while(!threadDone) { 
    ... 
    Thread.Sleep(...);
  }
} 
```

在 WinRT 中替换它的最佳方法是什么。我查看了 ThreadPool.RunAsync(...) 来启动代码运行，但我不确定停止它并等待它在 StopUpdateThread 中完成的最佳等待。另外，我在我的线程函数中用什么替换睡眠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:51:06.167

由于我们讨论的是 C# 5 GUI 应用程序，因此最好不要阻止任何内容并使用`Task`s 和`async`-`await`来代替。这可能看起来像这样：

```
// I think this field needs to be volatile even in your version
volatile bool taskDone = false;
Task updateTask = null;

void StartUpdateTask() {
  taskDone = false;
  updateTask = Task.Run(SendUpdateTask);
}

async Task StopUpdateTask() {
  if (updateTask == null) return;
  taskDone = true;
  await updateTask;
  updateTask = null;
}

async Task SendUpdateTask() {
  while (!taskDone) { 
    ... 
    await Task.Delay(…);
  }
} 
```

但是要正确使用此代码，您实际上需要了解`async`-`await`的作用，因此您应该阅读有关内容。

此外，这可能不是您所需要的，但仅根据您问题中的信息很难知道。

# embedded - 设置 RXIF 标志时未调用 PIC32 SPI ISR？

> ID：10238663
> 
> 赞同：4
> 
> 时间：2012-04-20T00:22:39.320
> 
> 标签：embedded, microcontroller, interrupt, pic, spi

我在从机模式下使用 PIC32MX795F512L SPI3 模块。我的主人正在通过 SPI 线路发送数据，但从未调用过我的奴隶的中断服务程序。RX 中断标志​​正在从机侧的硬件中设置，我可以读取 SPI3BUF 并获得正确的值，但仍然没有调用 ISR。

这是我的 spi 初始化代码：

```
void InitSPI3()
{
    int rData;

    IEC0CLR=0x1c000000;//Disable Rx Tx, Error interrupts
    SPI3CON = 0; // Stops and resets the SPI3.
    SPI3BRG = 0;
    rData=SPI3BUF;// clears the receive buffer
    IFS0CLR = 0x1c000000;//Clear interrupt flags
    IPC6CLR=0x0000001f;// clear the priority
    //ipl7, subpri 0
    IPC6bits.SPI3IP = 7;
    IPC6bits.SPI3IS = 0;
    //Enable Rx Tx, Error interrupts
    IEC0bits.SPI3RXIE = 1;
    IEC0bits.SPI3TXIE = 1;
    //IEC0bits.SPI3EIE = 1;

    SPI3CONbits.CKE = 1;
    SPI3CONbits.SSEN = 1;

    SPI3STATbits.SPIROV = 0;// clear the Overflow

    //Enable SPI
    SPI3CONbits.ON = 1;

    //** from now on, the device is ready to receive and transmit data (slave mode)...
} 
```

这是我的 ISR

```
void    __ISR(_SPI_3_VECTOR, ipl7) _SPI3Interrupt()
{
    SET_D2();
    SET_D1();

    // RX INTERRUPT
    if(IFS0bits.SPI3RXIF) // receive data available in SPI3BUF Rx buffer
    {
        SPI_Rx_Interrupt();
    }

    // TX INTERRUPT
    if(IFS0bits.SPI3TXIF) // space available in SPI3BUF Tx buffer
    {
        SPI_Tx_Interrupt();
    }

    IFS0CLR = 0x1c000000; // clear SPI3 interrupts

} // end ISR 
```

我正在使用 MPLAB X 和 C32 编译器。为此，我已经把头撞在墙上了 4 个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:58:54.553

要检查的事项：
1 - 是否需要修改全局中断掩码以使其工作？
2 - 是否有需要修改的中断级别/优先级掩码？
3 - 你是否给中断一个唯一的级别/优先级，一些微机不允许两个中断共享相同的 lev&pri，有些会默认为垃圾或非工作值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:23:06.073

其他一些事情要看它：

1.  检查您的芯片的勘误表。Microchip 有 PIC 中与 SPI 相关的硅问题的历史。

2.  看看这个讨论： http: [//www.microchip.com/forums/m573732.aspx](http://www.microchip.com/forums/m573732.aspx)。它主要针对外设芯片，但 SPIxSTATbits.SPITBE 和 SPIxSTATbits.SPIRBF 的讨论可能会让您有所了解。

# c++ - UnregisterHotKey() 在 Windows Mobile 上不起作用

> ID：10238666
> 
> 赞同：0
> 
> 时间：2012-04-20T00:23:02.843
> 
> 标签：c++, winapi, windows-mobile

调用 RegisterHotKey() 后，它似乎可以工作，因为按下时音量增大/减小没有响应，但是当我调用 UnregisterHotKey() 恢复默认值时，音量增大/减小仍然没有响应，除非启动设备。我怎样才能恢复它们？谢谢。

```
void RestoreVolumeKeys()
{
    hWndTray = FindWindow(_T("HHTaskBar"), NULL);
    if(hWndTray)
    {
        UnregisterHotKey((HWND)hWndTray, VK_TVOLUMEDOWN);
        UnregisterHotKey((HWND)hWndTray, VK_TVOLUMEUP);

    }
    else//HHTaskBar not found then try find Tray
    {     
        hWndTray = FindWindow(_T("Tray"), NULL);
        if(hWndTray)
        {
            UnregisterHotKey((HWND)hWndTray, VK_TVOLUMEDOWN);
            UnregisterHotKey((HWND)hWndTray, VK_TVOLUMEUP);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:33:03.977

您没有正确使用它。第二个参数*不是*虚拟键，它是`id`您在 RegisterHotKey() 调用中使用的。

```
BOOL RegisterHotKey(HWND hWnd,
    int id,                       // <=== this one
    UINT fsModifiers,
    UINT vk
); 
```

经常检查 winapi 函数的返回值来发现这样的错误。

# javascript - Javascript/jquery: Google maps markers How to set timer for animation

> ID：10238668
> 
> 赞同：0
> 
> 时间：2012-04-20T00:23:08.473
> 
> 标签：javascript, jquery, google-maps-markers

I have the following code that makes a clicked marker bounce on a Google map.

However, Im not sure how to stop the animation after say 2 seconds. Must be some kind of timer function that I can set?

Here is the code:

```
 google.maps.event.addListener(marker, 'click', function()  
   {  
    map.setCenter(marker.getPosition());  
    map.setZoom(17);   

    if(marker.getAnimation() != null)   
        {  
            marker.setAnimation(null);  
        }  
    else  
        {  
            marker.setAnimation(google.maps.Animation.BOUNCE);  

        }  

    } ); 
```

Any suggestions would be great

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:43:03.767

```
google.maps.event.addListener(marker, 'click', function () {  
    map.setCenter(marker.getPosition());  
    map.setZoom(17);   

    if (marker.getAnimation() != null) {  
        marker.setAnimation(null); 
    } else {  
        marker.setAnimation(google.maps.Animation.BOUNCE);  

        window.setTimeout(
            function() {
                marker.setAnimation(null); 
            },
            2000
        );  
    }  

}); 
```

# c - 打印自己的源代码作为输出的 C/C++ 程序

> ID：10238670
> 
> 赞同：14
> 
> 时间：2012-04-20T00:23:26.383
> 
> 标签：c, quine

[维基百科](http://en.wikipedia.org/wiki/Quine_%28computing%29)说它被称为quine，有人给出了以下代码：

```
char*s="char*s=%c%s%c;main(){printf(s,34,s,34);}";main(){printf(s,34,s,34);} 
```

但是，显然你必须添加

```
#include <stdio.h> //corrected from #include <stdlib.h> 
```

这样就`printf()`可以工作了。

从字面上看，由于上面的程序没有打印`#include <stdio.h>`，它不是一个解决方案（？）

我对“打印自己的源代码”的字面要求以及此类问题的任何目的感到困惑，尤其是在面试时。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-20T04:00:03.313

关于quine项目的面试问题的主要目的通常是看看你以前是否遇到过它们。它们几乎在任何其他意义上都没有用。

上面的代码可以适度升级，制作一个符合 C99 的程序（根据 GCC），如下：

### 汇编

```
/usr/bin/gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes \
  -Wstrict-prototypes -Wold-style-definition quine.c -o quine 
```

### 代码

```
#include <stdio.h>
char*s="#include <stdio.h>%cchar*s=%c%s%c;%cint main(void){printf(s,10,34,s,34,10,10);}%c";
int main(void){printf(s,10,34,s,34,10,10);} 
```

请注意，这假定了一个代码集，其中`"`代码点 34 和换行符是代码点 10。与原始版本不同，此版本在末尾打印出换行符。它还包含`#include <stdio.h>`所需的内容，并且行几乎足够短，可以在没有水平滚动条的情况下处理 SO。再努力一点，它无疑可以做得足够短。

### 测试

quine 程序的酸性测试是：

```
./quine | diff quine.c - 
```

如果源代码和输出之间有差异，将会报告。

* * *

### “类似quine”技术的一个几乎有用的应用

早在我年轻的时候，我就制作了一个双语“自我复制”程序。它是 shell 脚本和 Informix-4GL (I4GL) 源代码的组合。使这成为可能的一个属性是 I4GL 将`{ ... }`其视为注释，但 shell 将其视为 I/O 重定向单元。I4GL 也有`#...EOL`注释，shell 也有。文件顶部的 shell 脚本包含数据和操作，以不支持指针的语言重新生成复杂的验证操作序列。数据控制了我们生成了哪些 I4GL 函数以及每个函数是如何生成的。然后编译 I4GL 代码，以每周验证从外部数据源导入的数据。

如果您将文件（调用它`file0.4gl`）作为 shell 脚本运行并捕获输出（调用 that `file1.4gl`），然后`file1.4gl`作为 shell 脚本运行并捕获输出，`file2.4gl`那么这两个文件将是相同的。但是，可能会丢失所有生成的 I4GL 代码，只要文件顶部的 shell 脚本“注释”没有损坏，它就会重新生成一个自我复制的文件。`file1.4gl``file2.4gl``file0.4gl`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-20T00:27:18.063

这里的诀窍是大多数编译器都会编译而不需要你包含`stdio.h`.

他们通常只会发出警告。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-15T14:14:21.357

您也可以手动定义 printf 的原型。

```
const char *a="const char *a=%c%s%c;int printf(const char*,...);int main(){printf(a,34,a,34);}";int printf(const char*,...);int main(){printf(a,34,a,34);} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-20T00:30:14.350

quine 在与编程语言和一般执行相关的定点语义中有一些深度根源。它们对理论计算机科学具有一定的重要性，但在实践中它们没有目的。

它们是一种挑战或技巧。

字面要求就是你所说的，字面意思：你有一个程序，它的执行产生自己作为输出。不多也不少，这就是为什么它被认为是一个固定点：通过语言语义执行程序将其自身作为输出。

因此，如果您将计算表达为一个函数，您将拥有

```
f(program, environment) = program 
```

在 quine 的情况下，环境被认为是空的（您没有任何输入，之前也没有预先计算）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-12T12:07:08.913

以下是 C++ 编译器将接受的版本：

```
#include<stdio.h>
const char*s="#include<stdio.h>%cconst char*s=%c%s%c;int main(int,char**){printf(s,10,34,s,34);return 0;}";int main(int,char**){printf(s,10,34,s,34);return 0;} 
```

测试运行：

```
$ /usr/bin/g++ -o quine quine.cpp
$ ./quine | diff quine.cpp - && echo 'it is a quine' || echo 'it is not a quine'
it is a quine 
```

该字符串`s`主要包含源的副本，除了其`s`自身的内容 - 相反它在`%c%s%c`那里。

诀窍在于，在`printf`调用中，字符串`s`既用作格式*又*用作`%s`. 这导致`printf`将其也放入`s`（在输出文本上，即）的定义中

附加的`10`和`34`s 对应于换行符和`"`字符串分隔符。它们`printf`作为 s 的替换被插入`%c`，因为它们需要`\`在格式字符串中添加一个额外的内容，这将导致格式字符串和替换字符串不同，因此该技巧不再适用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-05T09:19:10.967

# Quine (Basic self-replicating code in c++`// Self-replicating basic code

[ [http://www.nyx.net/~gthompso/quine.htm#links][https://pastebin.com/2UkGbRPF#links](http://www.nyx.net/~gthompso/quine.htm#links]) []](https://pastebin.com/2UkGbRPF#links]) _

//自我复制基本代码

```
#include <iostream>     //1 line   
#include <string>       //2 line    
using namespace std;        //3 line    
                //4 line    
int main(int argc, char* argv[])    //5th line  
{
        char q = 34;            //7th line  
        string l[] = {      //8th line  ---- code will pause here and will resume later in 3rd for loop
 " ",
 "#include <iostream>       //1 line   ",
 "#include <string>     //2 line    ",
 "using namespace std;      //3 line    ",
 "              //4 line    ",
 "int main(int argc, char* argv[])  //5th line  ",
 "{",
 "        char q = 34;          //7th line  ",
 "        string l[] = {        //8th line  ",
 "        };                //9th resume printing end part of code  ",      //3rd loop starts printing from here
 "        for(int i = 0; i < 9; i++)        //10th first half code ",
 "                cout << l[i] << endl;     //11th line",
 "        for(int i = 0; i < 18; i++)   //12th whole code ",
 "                cout << l[0] + q + l[i] + q + ',' << endl;    13th line",
 "        for(int i = 9; i < 18; i++)   //14th last part of code",
 "                cout << l[i] << endl;     //15th line",
 "        return 0;         //16th line",
 "}             //17th line",
        };                                          //9th resume printing end part of code  
        for(int i = 0; i < 9; i++)      //10th first half code 
                cout << l[i] << endl;       //11th line
        for(int i = 0; i < 18; i++) //12th whole code 
                cout << l[0] + q + l[i] + q + ',' << endl;  13th line
        for(int i = 9; i < 18; i++) //14th last part of code
                cout << l[i] << endl;       //15th line
        return 0;           //16th line
}               //17th line 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-06-14T06:49:51.000

```
main(a){printf(a="main(a){printf(a=%c%s%c,34,a,34);}",34,a,34);} 
```

# javascript - jquery 未捕获的类型错误对象没有方法

> ID：10238671
> 
> 赞同：0
> 
> 时间：2012-04-20T00:23:27.477
> 
> 标签：javascript, jquery

一般来说，我是 jquery 和 javascript 的新手，无法弄清楚这两个代码集之间的区别。此代码有效：

```
$(document).ready(function () {
    $('div.poem-stanza').addClass('highlight');
}); 
```

而这段代码没有

```
function x() {
    $('div.poem-stanza').addclass('highlight');
}

$(document).ready(x); 
```

给出错误： `Uncaught Typeerror: Object #<Object> has no method 'addclass'`

我的函数声明有问题吗？顺便说一句，非工作示例直接来自“Learning JQuery, Third Edition”一书。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T00:26:12.880

`addclass`应该`addClass`在你的第二个片段中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T00:26:44.813

Javascript 区分大小写。正确的方法是`.addClass()`，不是`.addclass`。

# c# - 是否可以知道何时将节点添加到树视图中？

> ID：10238678
> 
> 赞同：1
> 
> 时间：2012-04-20T00:24:53.600
> 
> 标签：c#, winforms

我有一个树视图，它利用 StateImageList 在树中实现“正确的”三态检查。然而，问题是添加到树中的第一层节点。默认情况下，新 TreeNode 上的 StateImageIndex 为 -1，我无法真正知道它们已被添加。作为子节点的节点我可以在 BeforeExpand 上捕获并正确设置 StateImageIndex 但我似乎无法弄清楚如何处理顶层节点。

我目前的工作（我真的很讨厌）是我有一个计时器在后台运行，检查树视图中的节点数量是否发生了变化，如果它已经运行并找到所有具有 StateImageIndex 的根节点设置为 -1 并将它们设置为 0。它有效，但它似乎是对资源的严重浪费。有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:11:03.410

没有事件，你也不能生成一个。本机控件不支持事件，因为只有代码可以添加节点，而不是用户。您无法生成一个，因为您无法进入 TreeNodeCollection 类。一个简单的解决方法是将静态 CreateNode() 工厂方法添加到您的类中，并期望客户端代码使用它来创建正确初始化的节点。

您应该考虑 DrawMode 属性，以便您可以按照您想要的方式绘制节点。HitTest() 检测点击，ControlPaint.DrawCheckBox() 绘制框。

# java - 在内部类中使用泛型参数时 Java 编译失败

> ID：10238680
> 
> 赞同：3
> 
> 时间：2012-04-20T00:25:03.073
> 
> 标签：java, generics, inner-classes

请看下面的代码片段：

```
interface IFoo<E>{
    void doFoo(E env);
}

class A<E>{
    public void doA(E env){}
}

public class Foo<E> implements IFoo<E>{
    public A<E> a;

    @Override
    public void doFoo(E env) {
        a.doA(env);
    }

    private class FooInner<E> implements IFoo<E>{

        @Override
        public void doFoo(E env) {
            a.doA(env);
        }
    }
} 
```

Eclipse 在私有内部类内部抱怨`a.doA(env)`以下消息。

```
The method doA(E) in the type A<E> is not applicable for the arguments (E) 
```

这似乎不是可访问性问题，因为非静态内部类可以访问外部类的所有实例变量。看起来我在某处定义了我的泛型错误。谁能解释我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T00:51:12.853

您为内部类使用了相同的通用参数名称，因此内部类的类型`E`隐藏*了*外部`E`类的类型。

从内部类中删除泛型参数，如下所示：

```
public class Foo<E> implements IFoo<E>{

    ...

    private class FooInner implements IFoo<E>{ // "E" here is the same "E" from Foo

        @Override
        public void doFoo(E env) {
            a.doA(env);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T00:29:18.650

封闭类的类型是内部类类型的一部分。`FooInner`已经*被*参数化`E`，因为它是外部类的一部分；显式参数化是多余且不正确的，因为它实际上是在尝试使用与现有参数相同的名称来引入新的类型参数。只需删除`<E>`in `private class FooInner<E>`，您就是金色的。

# regex - 大括号内的正则表达式（大括号）——gnu parallel / xargs / find

> ID：10238682
> 
> 赞同：4
> 
> 时间：2012-04-20T00:25:19.843
> 
> 标签：regex, bash, shell, parallel-processing, curly-braces

[我在使用 GNU 并行（ http://www.gnu.org/software/parallel/](http://www.gnu.org/software/parallel/)）时遇到大括号（大括号）问题

我有四个文件的列表：

```
file1.txt.super
file2.txt.super
file3.txt.super
file4.txt.super 
```

如果我发出：`ls * | parallel "mkdir ./{.}"`

我返回了四个目录：

```
file1.txt
file2.txt
file3.txt
file4.txt 
```

我的问题是，我怎样才能简单地返回四个名为：

```
file1
file2
file3
file4 
```

我已阅读[http://www.linuxjournal.com/article/8919](http://www.linuxjournal.com/article/8919)但无法使用 gnu 并行实现这些正则表达式。我想我在这里遗漏了一些东西。此外，非常感谢任何具有更复杂正则表达式的示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T04:20:08.700

是的，您似乎*在这里遗漏了一些东西*。[linuxjournal](http://www.linuxjournal.com/article/8919)文章解释了 shell 参数扩展的特性。这些大括号（总是以 开头）与实用程序的默认*替换字符串*`$`无关，它们巧合地使用大括号。[并行文档](http://www.gnu.org/software/parallel/man.html)显示命令行选项允许使用任意字符串而不是用大括号括起来的默认值。`parallel`

 *例如，您示例中的*替换字符串* `{.}`可以更改为`%foo`

```
ls * | parallel --extensionreplace %foo "mkdir ./%foo" 
```

更多关于`${…}`linuxjournal 文章的信息可以在`man bash`页面的 **参数扩展**部分找到。

由于您在@AdamLiss 答案的评论中提出了要求，因此这是一种*（ab）使用花括号*和`--colsep`参数来执行任务的方法：

```
ls * | parallel --colsep '\.' "mkdir ./{1}" 
```

注意：如果文件名包含两个以上的句点（因为路径名在第一个句点被截断，则此`--colsep` *技巧*（如`sed`@AdamLiss 提出的）将产生不良结果。）

然而，由于`--colsep`参数是一个*正则表达式*，这应该对文件名中其他地方的句点有弹性：

```
ls * | parallel --colsep '\.[^\.]*$' "mkdir ./{1.}" 
```

注意：`--extensionreplace`由于当前 (21120422) 并行版本中的错误，无法正常工作。但由于`parallel`是一个 perl 脚本，您可以通过更改来修复它：

```
 "extensionreplace|er" => \$::opt_U, 
```

到

```
 "extensionreplace|er=s" => \$::opt_U, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T00:45:00.673

如果您不介意使用`sed`，这里有一个解决方法：

```
ls * | sed 's/\..*//' | parallel "mkdir ./{}" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T18:55:51.140

这可能对您有用：

```
ls * | parallel echo {.} | parallel mkdir {.} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T23:44:20.593

我不明白“.super”是什么，或者当你并行运行时它的去向，或者在并行命令中使用“{.}”。AFAIK，并行工作像 xargs 并且只理解`{}`. 我错过了什么？

在任何情况下，我都会通过 for 循环实现目标：

```
for f in *; do mkdir "${f%%.*}"; done 
```

或者，如果您真的关心这么短的作业的并行性：

```
for f in *; do mkdir "${f%%.*}" & done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T00:13:58.010

根据[手册页中的示例](https://www.gnu.org/software/parallel/man.html#example__removing_two_file_extensions_when_processing_files_and_calling_gnu_parallel_from_itself)，以下应该可以工作，即使它不是很漂亮：

```
ls *.txt.super| parallel --er {txt} 'echo {txt}|parallel "mkdir ./{.}"' 
```

删除第二个文件扩展名是通过从 parallel 中调用 parallel 并将`{.}`字符串别名到parallel`{txt}`的父实例中来完成的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-18T15:41:05.300

除了这里已经很好的答案之外，我很确定最简单的解决方案（可能是@Steve 正在寻找的）如下：

```
ls * | parallel --plus mkdir {..} 
```

[gnu parallel](https://www.gnu.org/software/parallel/man.html)中的`{.}` *替换字符串*旨在将字符串“修剪”到最外面的字符。我相信您可以将字符串修剪到 3 个级别。`.``.`

这意味着`{.}`将仅削减一级至`file1.txt`，`{..}`将削减两级至`file1`，`{...}`并将削减第三级。*

# c - 在 C 表达式中使用赋值运算符有效吗？

> ID：10238686
> 
> 赞同：1
> 
> 时间：2012-04-20T00:26:31.257
> 
> 标签：c, syntax

代替

```
cardNumber = j+1;
deck[i][j] = cardNumber;
theDeck[k] = cardNumber; 
```

只是说有效吗

```
deck[i][j] = theDeck[k] = cardNumber; 
```

将cardNumber同时分配给deck和theDeck？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T00:28:09.867

是的。赋值运算符返回一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T00:52:42.580

是的，它是一个表达式，它的值是赋值的右侧。请注意，这也来自`=`(right-to-left) 的关联性，这使得：

```
x = y = z 
```

相当于：

```
x = (y = z) 
```

但不是：

```
(x = y) = z /* wouldn't work */ 
```

所以你可以走得更远，写：

```
theDeck[k] = deck[i][j] = cardNumber = j+1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T01:10:55.080

是的; 是这样的：

```
deck[i][j] = (theDeck[k] = cardNumber); 
```

# ssis - 脚本任务 - 将现有文件添加为链接

> ID：10238691
> 
> 赞同：1
> 
> 时间：2012-04-20T00:26:59.467
> 
> 标签：ssis

我一直在寻找这个问题的答案，但找不到任何东西。我想知道是否可以将现有文件添加到在 SSIS 包中的脚本任务下创建的项目中。我想要做的是将一个名为 Helper 或 Utility 的文件添加到解决方案中，然后将该文件添加到所有脚本任务中以实现常用功能。因此，如果我更改类，它会被推送到所有脚本任务。

我知道我可以添加对 DLL 的引用并将其添加到 GAC。我已经尝试过了，它有效。我也尝试将文件添加到项目中，这也有效。

这只是我正在尝试的另一种解决方案，以防万一我无法在 prod 中部署 DLL。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T16:43:23.910

您可以使用常规 VS 功能来链接文件：

1.  右键单击您的脚本项目
2.  添加 > 现有项目...
3.  选择要包含在项目中的文件
4.  在“打开文件”对话框的右下角，您有一个带有 2 个选项的下拉菜单：“添加”或“添加为链接” - 选择后一个即可完成（见下图）

![在此处输入图像描述](../Images/a4f31841a60088faf3b7a8144da4f73b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:59:34.057

首先，您需要一个类的主副本，您可以使用以下相同但相反的过程从现有的脚本任务中复制它们。

1.  打开脚本任务的编辑器并在属性资源管理器上单击项目文件（st_[Guid]），在“属性”窗口中，您将看到项目文件夹位置。（每次编辑脚本任务时都会重新创建此位置）

2.  在资源管理器中，将您的课程复制到此文件夹

3.  在项目资源管理器中，单击“显示所有文件”图标

4.  右键单击您的文件并添加到项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-20T10:37:47.680

使用添加链接添加页面后，我们不能使用相对路径。每个用户在运行项目之前都需要更正路径。脚本任务使用自己的路径。它没有从包路径运行，这是问题所在。

# facebook - 使用 Graph API 将图像上传到朋友的墙

> ID：10238692
> 
> 赞同：1
> 
> 时间：2012-04-20T00:27:01.650
> 
> 标签：facebook, http, facebook-graph-api

我想知道以下操作的 Graph API 等效项：

转到朋友的个人资料页面，点击他们墙上的“添加照片”，然后点击“上传照片”。

我可以将图像上传到我自己的墙上和我自己的相册，我也可以发布消息和链接到我朋友的订阅源，但我不知道如何做到这一点。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T05:43:14.603

我能够设置“target_id”参数，并将图像上传到“graph.facebook.com/me/photos”。然后它确实显示出来，就好像它是手动完成的一样。

我唯一不确定的是，“target_id”是否是来自 REST API 的一些遗留参数，将来会变得不受支持......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T00:31:40.620

我相信这个过程会将照片添加到*您的*一个相册中；然后将其附加到您朋友的“供稿”连接上的帖子

您可以在开发者网站上找到这两个步骤的文档：上传照片：[https](https://developers.facebook.com/docs/reference/api/user/#photos) ://developers.facebook.com/docs/reference/api/user/#photos 墙上贴：[https ://developers.facebook.com /docs/reference/api/user/#posts](https://developers.facebook.com/docs/reference/api/user/#posts) - 在此处查看“object_attachment”参数

# c# - 在 WPF 中使用超链接的示例

> ID：10238694
> 
> 赞同：174
> 
> 时间：2012-04-20T00:27:28.870
> 
> 标签：c#, wpf, xaml, hyperlink

我已经看到了一些建议，您可以通过`Hyperlink`控件将超链接添加到 WPF 应用程序。

这是我尝试在我的代码中使用它的方式：

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        mc:Ignorable="d" 
        x:Class="BookmarkWizV2.InfoPanels.Windows.UrlProperties"
        Title="UrlProperties" Height="754" Width="576">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
            <RowDefinition Height="40"/>
        </Grid.RowDefinitions>
        <Grid>
            <ScrollViewer ScrollViewer.VerticalScrollBarVisibility="Auto" Grid.RowSpan="2">
                <StackPanel >
                    <DockPanel LastChildFill="True" Margin="0,5">
                        <TextBlock Text="Url:" Margin="5" 
                            DockPanel.Dock="Left" VerticalAlignment="Center"/>
                        <TextBox Width="Auto">
                            <Hyperlink NavigateUri="http://www.google.co.in">
                                    Click here
                            </Hyperlink>   
                        </TextBox>                      
                    </DockPanel >
                </StackPanel>
            </ScrollViewer>        
        </Grid>
        <StackPanel HorizontalAlignment="Right" Orientation="Horizontal" Margin="0,7,2,7" Grid.Row="1" >
            <Button Margin="0,0,10,0">
                <TextBlock Text="Accept" Margin="15,3" />
            </Button>
            <Button Margin="0,0,10,0">
                <TextBlock Text="Cancel" Margin="15,3" />
            </Button>
        </StackPanel>
    </Grid>
</Window> 
```

我收到以下错误：

> 属性“文本”不支持“超链接”类型的值。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：362
> 
> 时间：2012-04-20T00:29:41.860

如果您希望您的应用程序在[Web 浏览器](https://en.wikipedia.org/wiki/Web_browser)中打开该链接，您需要添加一个[HyperLink](https://docs.microsoft.com/dotnet/api/system.windows.documents.hyperlink)并将[RequestNavigate](https://docs.microsoft.com/dotnet/api/system.windows.documents.hyperlink.requestnavigate)事件设置为以编程方式打开 Web 浏览器并将地址作为参数的函数。

```
<TextBlock>           
    <Hyperlink NavigateUri="http://www.google.com" RequestNavigate="Hyperlink_RequestNavigate">
        Click here
    </Hyperlink>
</TextBlock> 
```

在代码隐藏中，您需要添加与此类似的内容来处理 RequestNavigate 事件：

```
private void Hyperlink_RequestNavigate(object sender, RequestNavigateEventArgs e)
{
    // for .NET Core you need to add UseShellExecute = true
    // see https://docs.microsoft.com/dotnet/api/system.diagnostics.processstartinfo.useshellexecute#property-value
    Process.Start(new ProcessStartInfo(e.Uri.AbsoluteUri));
    e.Handled = true;
} 
```

此外，您还需要以下导入：

```
using System.Diagnostics;
using System.Windows.Navigation; 
```

在您的应用程序中将如下所示：

![oO](../Images/ac3e1c37fcd0bb2f7d49aa02c2cfe590.png)

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-07-11T13:33:16.810

除了 Fuji 的响应之外，我们还可以使处理程序可重用，将其变为附加属性：

```
public static class HyperlinkExtensions
{
    public static bool GetIsExternal(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsExternalProperty);
    }

    public static void SetIsExternal(DependencyObject obj, bool value)
    {
        obj.SetValue(IsExternalProperty, value);
    }
    public static readonly DependencyProperty IsExternalProperty =
        DependencyProperty.RegisterAttached("IsExternal", typeof(bool), typeof(HyperlinkExtensions), new UIPropertyMetadata(false, OnIsExternalChanged));

    private static void OnIsExternalChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        var hyperlink = sender as Hyperlink;

        if ((bool)args.NewValue)
            hyperlink.RequestNavigate += Hyperlink_RequestNavigate;
        else
            hyperlink.RequestNavigate -= Hyperlink_RequestNavigate;
    }

    private static void Hyperlink_RequestNavigate(object sender, System.Windows.Navigation.RequestNavigateEventArgs e)
    {
        Process.Start(new ProcessStartInfo(e.Uri.AbsoluteUri));
        e.Handled = true;
    }
} 
```

并像这样使用它：

```
<TextBlock>
    <Hyperlink NavigateUri="https://stackoverflow.com"
               custom:HyperlinkExtensions.IsExternal="true">
        Click here
    </Hyperlink>
</TextBlock> 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-04-20T00:29:22.857

`Hyperlink`不是控件，它是[流内容元素，](https://msdn.microsoft.com/en-us/library/ms753113%28v=vs.100%29.aspx)*只能*在支持流内容的控件中使用，例如. 只有纯文本。`TextBlock``TextBoxes`

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-07-11T13:06:14.997

如果您想稍后本地化字符串，那么这些答案还不够，我建议您这样做：

```
<TextBlock>
    <Hyperlink NavigateUri="http://labsii.com/">
       <Hyperlink.Inlines>
            <Run Text="Click here"/>
       </Hyperlink.Inlines>
   </Hyperlink>
</TextBlock> 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-12-22T20:12:19.527

恕我直言，最简单的方法是使用继承自的新控件`Hyperlink`：

```
/// <summary>
/// Opens <see cref="Hyperlink.NavigateUri"/> in a default system browser
/// </summary>
public class ExternalBrowserHyperlink : Hyperlink
{
    public ExternalBrowserHyperlink()
    {
        RequestNavigate += OnRequestNavigate;
    }

    private void OnRequestNavigate(object sender, RequestNavigateEventArgs e)
    {
        Process.Start(new ProcessStartInfo(e.Uri.AbsoluteUri));
        e.Handled = true;
    }
} 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2017-03-07T13:37:00.463

还要注意，`Hyperlink`不一定要用于导航。您可以将其连接到命令。

例如：

```
<TextBlock>
  <Hyperlink Command="{Binding ClearCommand}">Clear</Hyperlink>
</TextBlock> 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2019-11-03T11:05:09.400

我在这个问题中使用了答案，但遇到了问题。

它返回异常：`{"The system cannot find the file specified."}`

经过一番调查。事实证明，如果您的 WPF 应用程序是 CORE，则需要更改`UseShellExecute`为`true`.

[Microsoft文档](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.processstartinfo.useshellexecute?view=netframework-4.8)中提到了这一点：

> 如果在启动进程时应该使用 shell，则为 true；如果进程应该直接从可执行文件创建，则返回 false。在 .NET Framework 应用上默认为 true，在 .NET Core 应用上默认为 false。

因此，要完成这项工作，您需要添加`UseShellExecute`并将其设置为`true`：

```
Process.Start(new ProcessStartInfo(e.Uri.AbsoluteUri){ UseShellExecute = true }); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-05-16T01:31:24.387

我喜欢 Arthur 关于可重用处理程序的想法，但我认为有一种更简单的方法可以做到这一点：

```
private void Hyperlink_RequestNavigate(object sender, RequestNavigateEventArgs e)
{
    if (sender.GetType() != typeof (Hyperlink))
        return;
    string link = ((Hyperlink) sender).NavigateUri.ToString();
    Process.Start(link);
} 
```

显然，启动任何类型的进程都可能存在安全风险，所以要小心。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-12-15T14:35:01.833

在我看来，最漂亮的方法之一（因为它现在很常见）是使用行为。

这个需要：

*   nuget依赖：`Microsoft.Xaml.Behaviors.Wpf`
*   如果您已经内置了行为，则可能必须遵循 Microsoft 博客上的本[指南](https://blogs.msdn.microsoft.com/dotnet/2018/12/10/open-sourcing-xaml-behaviors-for-wpf/)。

xml代码：

```
xmlns:Interactions="http://schemas.microsoft.com/xaml/behaviors" 
```

和

```
<Hyperlink NavigateUri="{Binding Path=Link}">
    <Interactions:Interaction.Behaviors>
        <behaviours:HyperlinkOpenBehaviour ConfirmNavigation="True"/>
    </Interactions:Interaction.Behaviors>
    <Hyperlink.Inlines>
        <Run Text="{Binding Path=Link}"/>
    </Hyperlink.Inlines>
</Hyperlink> 
```

行为代码：

```
using System.Windows;
using System.Windows.Documents;
using System.Windows.Navigation;
using Microsoft.Xaml.Behaviors;

namespace YourNameSpace
{
    public class HyperlinkOpenBehaviour : Behavior<Hyperlink>
    {
        public static readonly DependencyProperty ConfirmNavigationProperty = DependencyProperty.Register(
            nameof(ConfirmNavigation), typeof(bool), typeof(HyperlinkOpenBehaviour), new PropertyMetadata(default(bool)));

        public bool ConfirmNavigation
        {
            get { return (bool) GetValue(ConfirmNavigationProperty); }
            set { SetValue(ConfirmNavigationProperty, value); }
        }

        /// <inheritdoc />
        protected override void OnAttached()
        {
            this.AssociatedObject.RequestNavigate += NavigationRequested;
            this.AssociatedObject.Unloaded += AssociatedObjectOnUnloaded;
            base.OnAttached();
        }

        private void AssociatedObjectOnUnloaded(object sender, RoutedEventArgs e)
        {
            this.AssociatedObject.Unloaded -= AssociatedObjectOnUnloaded;
            this.AssociatedObject.RequestNavigate -= NavigationRequested;
        }

        private void NavigationRequested(object sender, RequestNavigateEventArgs e)
        {
            if (!ConfirmNavigation || MessageBox.Show("Are you sure?", "Question", MessageBoxButton.YesNo, MessageBoxImage.Question) == MessageBoxResult.Yes)
            {
                OpenUrl();
            }

            e.Handled = true;
        }

        private void OpenUrl()
        {
//          Process.Start(new ProcessStartInfo(AssociatedObject.NavigateUri.AbsoluteUri));
            MessageBox.Show($"Opening {AssociatedObject.NavigateUri}");
        }

        /// <inheritdoc />
        protected override void OnDetaching()
        {
            this.AssociatedObject.RequestNavigate -= NavigationRequested;
            base.OnDetaching();
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-07-26T03:58:42.347

希望这对某人也有帮助。

```
using System.Diagnostics;
using System.Windows.Documents;

namespace Helpers.Controls
{
    public class HyperlinkEx : Hyperlink
    {
        protected override void OnClick()
        {
            base.OnClick();

            Process p = new Process()
            {
                StartInfo = new ProcessStartInfo()
                {
                    FileName = this.NavigateUri.AbsoluteUri
                }
            };
            p.Start();
        }
    }
} 
```

# mysql - 为什么 MySQL 不能得到正确的数据？

> ID：10238695
> 
> 赞同：1
> 
> 时间：2012-04-20T00:27:30.587
> 
> 标签：mysql, codeigniter, floating-point, double-precision

我正在使用 CodeIgniter 的 Active Record，我的代码是：

```
 $current_balance = $this->get_campaign_balance($click_report['campaign_id']);

  $campaign_ledger = array(
    'campaign_id'   =>  $click_report['campaign_id'],
    'description'   =>  "Click Deduction from script",
    'amount'        =>  -1 * $click_report['advertiser_spend'],
    'balance'       =>  "" . $current_balance - $click_report['advertiser_spend'],
    'meta_data'     =>  $click_report['day'],
    'timestamp'     =>  time()
  );

  $this->db->insert('campaign_ledger', $campaign_ledger); 
```

当我`var_dump`得到`$campaign_ledger`：

```
array(6) {
  ["campaign_id"]=>
  string(3) "277"
  ["description"]=>
  string(27) "Click Deduction from script"
  ["amount"]=>
  float(-0.05)
  ["balance"]=>
  float(89.95)
  ["meta_data"]=>
  string(10) "2012-04-19"
  ["timestamp"]=>
  int(1334881599)
} 
```

但是当数据进入我的数据库时，这`balance`是`91.36800000000001`出于某种原因。那么断开连接是怎么回事呢？

**编辑**

更改为 后`DECIMAL(10,4)`，我仍然得到`91.3680`输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:29:59.747

注意在 MySQL 中将货币存储为“DECIMAL”类型。如果你使用 Float，你会得到不一致的结果。我知道你没有在这里说你使用了哪种数据类型，但有些东西告诉我它可能不是 DECIMAL(10,2)。

# jquery - 添加和删 除 twitter 引导选项卡/药丸

> ID：10238697
> 
> 赞同：3
> 
> 时间：2012-04-20T00:27:35.940
> 
> 标签：jquery, twitter-bootstrap

我想在我的站点中使用引导程序的内置选项卡，但我需要用户能够自己添加或删除选项卡。我看过几个 jqueryUI 选项卡的演示，允许用户添加或删除它们，我知道引导程序的选项卡本身就是 jquery，所以我知道添加该功能应该是一个非常简单的脚本，但我就是想不通出来。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:34:44.823

[选项卡是单独激活的](http://twitter.github.com/bootstrap/javascript.html#tabs)，因此您应该能够简单地从 DOM 中添加/删除元素并调用`$().tab('show')`.

假设您有现有的标签：

```
<div class="tab-content">
  <div class="tab-pane" id="existingTab">..</div>
</div> 
```

添加新标签的示例：

```
$('.tab-content')
    .append(
        $('<div></div>')
            .addClass('tab-pane')
            .attr('id', 'newTab')
    );

$('#newTab').tab('show'); 
```

这将出现一个新选项卡。

# powershell-3.0 - PowerShell 3.0 中 [ordered] 的正确名称是什么？

> ID：10238698
> 
> 赞同：5
> 
> 时间：2012-04-20T00:27:42.570
> 
> 标签：powershell-3.0

在 PowerShell 中，您可以使用方括号指定类型，如下所示：

```
PS C:\Users\zippy> [int]

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
True     True     Int32                                    System.ValueType 
```

还有内置的类型加速器，如 [xml]，当您希望将某些内容投射到[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)时，它可以节省一些击键。

```
PS C:\Users\zippy> [xml]

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
True     False    XmlDocument                              System.Xml.XmlNode 
```

您可以通过以下两个命令之一生成列表：

*   PS v2.0`[type]::gettype("System.Management.Automation.TypeAccelerators")::Get`
*   PS v3.0`[psobject].assembly.gettype("System.Management.Automation.TypeAccelerators")::Get`

PowerShell 3.0 添加了一个名为 [ordered] 的运算符。虽然它不是类型别名。

```
PS C:\Users\zippy> [ordered]
Unable to find type [ordered]: make sure that the assembly containing this type is loaded.
At line:1 char:1
+ [ordered]
+ ~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (ordered:TypeName) [], RuntimeException
    + FullyQualifiedErrorId : TypeNotFound 
```

但是，它可以将[Hashtable](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)转换为[OrderedDictionary](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)。

```
PS C:\Users\zippy> ([ordered]@{}).GetType()

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
True     True     OrderedDictionary                        System.Object 
```

所以我的问题是，如果 [ordered] 不是类型加速器，它是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:53:44.530

不幸`[ordered]`的是有点失常。它既不是类型也不是加速器。它只存在于解析器中，并被视为有关如何创建哈希表的提示（即不要使用哈希表，而是使用有序字典。）将其视为 .net 属性，但它不是：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:54:40.903

使用以下命令：

```
Trace-Command -Name TypeConversion -Expression {([ordered]@{}).gettype()} -PSHost 
```

让我想象一下，解释器尝试在加载的程序集中递归匹配类型并完成匹配 OrderedDictionary，这只是一个假设。

# c++ - 动态分配 3d 数组

> ID：10238699
> 
> 赞同：6
> 
> 时间：2012-04-20T00:27:48.763
> 
> 标签：c++, dynamic, multidimensional-array

我对动态分配 3d 数组有点困惑。现在，我只是像这样分配一大块内存：

```
int height = 10;
int depth = 20;
int width = 5;

int* arr;
arr = new int[height * width * depth]; 
```

现在我想改变 3D 数组中的一个值，比如：

```
//arr[depth][width][height]
arr[6][3][7] = 4; 
```

但是，我不能使用上面的代码来更改值。如何使用单个索引访问位置深度 = 6、宽度 = 3、高度 = 7 的元素？

```
arr[?] = 4; 
```

有没有更好的方法来动态分配 3D 数组？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T00:38:41.097

C 倾向于这样做的方式是：

```
int ***arr = new int**[X];
for (i = 0; i < z_size; ++i) {
  arr[i] = new int*[Y];
  for (j = 0; j < WIDTH; ++j)
    arr[i][j] = new int[Z];
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-20T00:49:07.180

要索引到平面 3 维数组：

```
arr[x + width * (y + depth * z)] 
```

其中 x、y 和 z 分别对应第一维、第二维和第三维，宽度和深度是阵列的宽度和深度。

这是 的简化`x + y * WIDTH + z * WIDTH * DEPTH`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-17T06:57:14.803

要拥有像 arr[height][width][depth] 这样的简单索引机制，并且还要在分配的内存中将默认值初始化为 0，请尝试以下操作：

```
// Dynamically allocate a 3D array
/*  Note the parenthesis at end of new. These cause the allocated memory's
    value to be set to zero a la calloc (value-initialize). */
    arr = new int **[height]();
    for (i = 0; i < height; i++)
    {
        arr[i] = new int *[width]();
        for (j = 0; j < width; j++)
            arr[i][j] = new int [depth]();
    } 
```

这是相应的释放：

```
//Dynamically deallocate a 3D array

for (i = 0; i < rows; i++)
{
    for (j = 0; j < columns; j++)
        delete[] arr[i][j];
    delete[] arr[i];
}
delete[] arr; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-03-22T12:42:22.170

3D 数组（在堆中）的分配和解除分配是完全相反的。要记住的关键是，在正确释放内存的同时，使用关键字的次数与使用`delete`关键字的次数一样多`new`。这是我用于初始化和清理 3D 数组的代码：

```
int ***ptr3D=NULL;
ptr3D=new int**[5];

for(int i=0;i<5;i++)
{
    ptr3D[i] = new int*[5];  

    for(int j=0;j<5;j++)
    {
        ptr3D[i][j]=new int[5]; 

        for(int k=0;k<5;k++)
        {
            ptr3D[i][j][k]=i+j+k; 
        }
    }
}
//Initialization ends here
...
... //Allocation of values

cout << endl <<"Clean up starts here " << endl;

for(int i=0;i<5;i++)
{
    for(int j=0;j<5;j++)
    {
        delete[] ptr3D[i][j];   
    }
    delete[] ptr3D[i];
}
delete ptr3D; 
```

请注意，对于 3 个`new`关键字，使用了 3 个相应的`delete`关键字。这应该清理堆中分配给 3D 数组的所有内存，并且 Valgrind 可用于在每个阶段对其进行验证。

# database - 教师、学科和成绩数据库的设计建议

> ID：10238701
> 
> 赞同：-1
> 
> 时间：2012-04-20T00:28:00.600
> 
> 标签：database, database-design, relational-database

作为高中数据库设计任务的一部分，我有点卡在类表上。到目前为止创建的表是：

```
Students
--------------
Id
name

Grades (grade 1,2,....9,10)
------------------
id    
description    
term

Subjects (science,maths...)
-------------------
id
name

grade_subject (subjects tought in grades)
----------------
id
grade_id
subject_id

teacher
---------------------
id
name

teacher_subject (teachers who are assigned to teach subjects in particular grade)
---------------------
id
teacher_id
grade_subject_id 
```

我对teacher_subject 表的表设计没有信心。该表使用了grade_subject_id 的id，这可能（不是）一个好的设计。该表是否应该有两个 FK，一个grade_id 和 subject_id？

我还需要进一步存储特定指定教师在特定主题和年级上开设的课程数量。

此表是否适合这种情况：

```
Class (stores daily teaching schedule)
-----------------------------------
id
*teacher_id
grade_id
subject_id*

*or only teacher_subject_id from teacher_subject table*

date
start_time
end_time
status ( conducted/cancelled/postponed)+ 
```

最后，一个表来存储有关谁参加了课程的信息

```
attandants
--------------------
student_id
class_id 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:03:44.220

当开始学习如何创建关系模型时，此模型对于数据库设计人员来说是典型的。看看这个网站，包含大量样本，其中一些适用于您要解决的问题

[http://www.databaseanswers.org/data_models/](http://www.databaseanswers.org/data_models/)

检查第 218 节教育

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:18:05.873

数据建模是在关系图中表示现实世界的艺术。你的模式是正确的，但它是真的吗？

考虑一下，什么是 CLASS？这是一个老师、一个科目和一个年级。这些是你的关系。此外，您希望强制执行主题适用于该年级并且教师可以在该年级教授该主题的规则。

我认为您的问题在于在交叉表中使用代理键。这些是代表您的多对多关系的表：`teacher_subject`, `grade_subject`. 无论如何，这些都是合成表，而且它们只包含键。因此，复合主键就足够了。

代理主键没有意义，所以我们需要定义一个唯一的约束`grade_subject(subject_id, grade_id)`来确保我们没有两个记录（'PHYSICS'，'YEAR 2'）。鉴于这`grade_subject`是一个没有其他列的交集表，添加代理键是没有意义的。代理键的价值在于最小化业务键更改的影响。但`grade_subject`没有业务密钥，只有两个代理密钥，`subject_id`并且`grade_id`.

这在定义参照完整性时具有优势。

所以我会这样解决你的问题：

```
grade_subject 
----------------
grade_id
subject_id
primary key (grade_id, subject_id)
foreign key (grade_id) reference grade (grade_id) 
foreign key (subject_id) reference subject (subject_id) 

teacher_subject 
---------------------
teacher_id
grade_id
subject_id
primary key (teacher_id,grade_id, subject_id)
foreign key (grade_id) reference grade (grade_id) 
foreign key (subject_id) reference subject (subject_id) 
foreign key (teacher_id) reference teacher (teacher_id) 
foreign key (grade_id,subject_id) reference grade_subject (grade_id,subject_id) 

Class 
-----------------------------------
id
teacher_id
grade_id
subject_id
primary key (id)
foreign key (grade_id) reference grade (grade_id) 
foreign key (subject_id) reference subject (subject_id) 
foreign key (teacher_id) reference teacher (teacher_id) 
foreign key (grade_id,subject_id) reference grade_subject (grade_id,subject_id)
foreign key (teacher_id,grade_id,subject_id) reference teacher_subject (teacher_id,grade_id,subject_id) 
```

这可能看起来像一堆外键，我可以在审查阶段设想一些争论。（我包括外键，`grade_subject`所以我有一些要让步的东西，我不太在意，所以可以让步）。

但我不喜欢通过诸如 TEACHER_SUBJECT 之类的附属关系强制执行诸如 CLASS_SUBJECT 之类的重要数据关系。我不想加入 TEACHER_SUBJECT 和 SUBJECT_GRADE 才能将 CLASS 加入 SUBJECT。

现在，当后者间接强制前者时，为什么我选择将参照完整性约束包括到单父表和交叉表？因为它使*模型中*的关系更加清晰。我在模型中强调，因为在物理数据库中我可能会选择省略单表外键，或者禁用它们，并信任交集表的关系完整性。

* * *

关于三列复合的一些事情让我感到困惑，我认为是这样的：它没有充分标准化。您可能有一个特殊情况，但更通用的模型是两条规则，TEACHER_SUBJECT 和 TEACHER_GRADE。看起来像这样

```
teacher_subject 
---------------------
teacher_id
subject_id
primary key (teacher_id, subject_id)
foreign key (subject_id) reference subject (subject_id) 
foreign keye (teacher_id) reference teacher (teacher_id) 

teacher_grade 
---------------------
teacher_id
grade_id
primary key (teacher_id,grade_id)
foreign key (grade_id) reference grade (grade_id) 
foreign key (teacher_id) reference teacher (teacher_id) 

Class 
-----------------------------------
id
teacher_id
grade_id
subject_id
primary key (id)
foreign key (grade_id) reference grade (grade_id) 
foreign key (subject_id) reference subject (subject_id) 
foreign key (teacher_id) reference teacher (teacher_id) 
foreign key (grade_id,subject_id) reference grade_subject (grade_id,subject_id)
foreign key (teacher_id,subject_id) reference teacher_subject (teacher_id,subject_id) 
foreign key (teacher_id,grade_id) reference teacher_grade (teacher_id,grade_id) 
```

当然，如果您仍然想强制执行 Drury 先生只能向四年级学生教授数学和向六年级学生教授物理的规则，您将需要一个 TEACHER_SUBJECT_GRADE 表。

* * *

您的数据模型没有解决的一件事是调度问题。学校时间表必须网格化，因此班级需要适应预先确定的网格。您可能需要将时间表的时段定义为单独的表格并将 CLASS 链接到该表格。班级也需要教室。那是另一张桌子。

# java - 关于第二种说法，下列哪项是正确的？（拆箱和自动装箱）

> ID：10238705
> 
> 赞同：1
> 
> 时间：2012-04-20T00:28:27.753
> 
> 标签：java, autoboxing, unboxing

我已经在互联网上寻找并尝试解决这个问题。谁能正确回答并解释原因？太感谢了！

> 看下面的代码。
> 
> ```
> Integer myNumber;
> myNumber = 5; 
> ```
> 
> 关于第二种说法，下列哪项是正确的？
> 
> 1.  该语句执行拆箱
>     
>     
> 2.  该语句执行自动换行。
>     
>     
> 3.  该语句执行自动装箱。
>     
>     
> 4.  它会导致错误，因为您无法将原始类型分配给包装类对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T00:29:54.833

这将被视为自动装箱。它获取`int`值`5`并将其放入`Integer`对象中。

取消装箱将是`int myInt = myNumber`因为它将 an 分配`Integer`给`int`. （请注意，自动装箱与拆箱相反。从技术上讲，拆箱和装箱是相反的。自动装箱是 JVM 为我们处理装箱的时候。手动装箱的方式（如果可以理解为一个词）是`myNumber = Integer.valueOf(5);`

自动换行似乎是你的教授用来欺骗你的虚构术语。

在这种情况下，某些语言会抛出错误。Java 在大多数类似的情况下都会这样做，但对于原语，它有特殊的例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:54:39.873

这取决于您使用的 Java 版本。如果是 1.5 之前的版本，第二条语句将导致编译时错误。自动装箱的概念是从 Java 1.5 才引入的。

因此，如果是 Java 1.5 及更高版本，则第二条语句执行自动装箱。

# python - python 2.7中的staticmethod参数在调用中保留值吗？

> ID：10238712
> 
> 赞同：0
> 
> 时间：2012-04-20T00:29:27.030
> 
> 标签：python

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

使用 python 2.7 我遇到了奇怪的行为，我不确定如何解释它，或者它是否存在于任何 python 文档中。使用代码

```
class MyClass:
@staticmethod
def func(objects=[], a=None, b=None):
    objects.append(a)
    print 'objects: %s'%objects
    print 'b: %s'%b

MyClass.func(a='one')
MyClass.func(a='two', b='foo')
MyClass.func(a='three') 
```

我得到了输出

```
objects: ['one']
b: None
objects: ['one', 'two']
b: foo
objects: ['one', 'two', 'three']
b: None 
```

如您所见，该方法的第一个列表参数（对象）在调用中保留它的值。新值被附加到最后一个列表，即使在它的标头声明中它的默认值为 []。但是最后一个参数 (b) 不保留它的值，它在调用之间重置为默认值。

预期的（无论如何对我来说）是 objects 参数应该在任何调用方法时重置为默认值（就像 b 参数一样），但这似乎没有发生，似乎只发生在第一次调用时。

谁能解释这种行为？这是这个版本的python中的一个错误还是它的预期行为？可能与跨调用保留列表引用有关，但字符串变量 (b) 不是？我对这种行为感到非常困惑。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T00:58:29.950

它与静态方法无关。这是 Python 中非常常见的错误。

Python 中的函数是一等对象，而不仅仅是代码块，因此您在参数中分配给对象的空列表是附加到函数对象的真实列表。每次调用它并将某些内容附加到该列表时，您都在使用相同的列表。很容易看到它以这种方式发生：

```
>>> def func(x, objects=[]):
...     objects.append(x)
... 
>>> func(1)
>>> func.func_defaults
([1],)
>>> func(2)
>>> func.func_defaults
([1, 2],)
>>> func(3)
>>> func.func_defaults
([1, 2, 3],) 
```

func_defaults 是包含您设置的默认关键字参数的函数对象属性。看看列表是如何存在并改变的？

做你想做的事情的正确方法是：

```
class MyClass:
@staticmethod
def func(objects=None, a=None, b=None):
    if objects is None:
        objects = []
    objects.append(a)
    print 'objects: %s'%objects
    print 'b: %s'%b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:03:29.663

这种行为是广为人知的，并且被许多人视为一种特性，并且不是特定于静态方法的。它适用于每个功能。**当您将可变对象指定为参数的默认值时，就会发生这种情况**。

在 StackOverflow 上查看这个答案：[默认参数陷阱 / 可变默认参数的危险](https://stackoverflow.com/a/113198/548696)

如果您了解可变性与不变性问题，请考虑以下函数/方法：

*   定义时，分配默认参数值，
*   当它被调用时，主体被执行，如果它就地更改可变的默认参数值，则更改后的值将用于每个后续调用，其中默认参数值没有通过提供不同的值而不是它来覆盖，

# jquery - 我如何从行 css 中选择一些属性值

> ID：10238716
> 
> 赞同：-1
> 
> 时间：2012-04-20T00:29:42.400
> 
> 标签：jquery, css

```
<ul><li><div id="top" style="margin-left:58px;">it is a div</div ></li></ul> 
```

我如何`margin-left(85px)`使用 jquery 从给定的内联 css 中获取值。在这里，我可以将样式属性的值访问为 (margin-left:58px;)。但我只需要 85 作为整数值，因此我可以使用它对其进行一些算术运算。然后我想在其上应用相同的 css，并使用不同的 margin-left 值作为（85 乘以 2.5）。那么我如何获取价值以及如何在其上应用 css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:33:53.177

你可以通过这种方式获得 div 的左边距：

```
 $("#top").css("margin-left"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:35:19.140

这应该有效：

```
$('#top').css('margin-left', function(index, value){
    return parseInt(value, 10) * 2.5;
}); 
```

这意味着：获取`margin-left`样式，将其解析为整数值（radix=10），将其乘以 2.5，然后将值返回给元素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T00:34:40.357

```
$(document).ready(function(){
  //grab the value of style for id top
  var value = $('#top).attr('style');
  alert(value);
}); 
```

# ruby - 当某些对象具有 nil 属性时对哈希数组进行排序

> ID：10238718
> 
> 赞同：3
> 
> 时间：2012-04-20T00:29:55.297
> 
> 标签：ruby, sorting, hash

我有一个哈希数组，其中键是用户对象（这是因为我按用户对搜索结果进行分组，如下所示：）`#<User:0x007ffa3d570f00> => ["taco","pizza","unicorn"]`。

我希望能够通过 User 对象属性对哈希数组进行排序，如下所示：

```
search_results.sort_by{|item| item[0].age} #item[0] = User object 
```

但是，`ArgumentError: comparison of NilClass with Integer failed`当它遇到第一个年龄为 Nil 的用户时，它会抛出一个错误。我尝试`unless user.age.nil?`在**sort_by**块中添加一个，但这没有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T00:32:55.270

将`nil`对象视为其他东西，也许`0`或`Float::INFINITY`？

```
search_results.sort_by { |user| user.age || 0 } 
```

由于`nil.to_i == 0`，您还可以执行以下操作：

```
search_results.sort_by { |user| user.age.to_i } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T00:36:16.070

尝试这个：

```
search_results.sort_by{|user| user.age ? user.age : 0 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T22:13:55.930

对于布尔值，基于 megas 的解决方案：

```
[true, false, false, true].sort { |a|
         a ? 0 : 1
      }

=> [true, true, false, false] 
```

# vb.net - 使用“选项显式”的优点是什么？

> ID：10238720
> 
> 赞同：0
> 
> 时间：2012-04-20T00:30:00.183
> 
> 标签：vb.net, asp-classic

它真正做的只是让我不得不对每个变量进行调暗，如果我忘记调暗变量，它就会编译得很糟糕。

使用它有什么优点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T00:40:49.507

是的，它将防止某些类型的错误。最明显的情况之一是，如果您打错字并错误地拼写变量名，它将标记错误输入的变量不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T01:42:41.727

> 如果不使用 Option Explicit 语句，则所有未声明的变量都是 Object 类型。

参考： http: [//msdn.microsoft.com/en-us/library/y9341s4f (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/y9341s4f(v=vs.80).aspx)

想想这将如何影响 GC，所有应该存储在线程堆栈上的值类型现在都存储在托管堆上并接受垃圾回收。这听起来可能不是很大，但 GC 必须检查值类型是否具有根引用以及所有引用类型。这将对 GC 产生重大的性能影响，因为您的所有值类型都将被提升到 0、1、2 代，而不仅仅是引用类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T01:42:05.943

我认为必须调暗每个变量作为大专业人士。我无法告诉你有多少次我试图找出一个错误来发现我错误地拼写了一个如果打开“选项显式”就会找到的变量。

PS 始终使用 Option Explicit。

# mysql - SQL根据多行键选择两部分复合键的一半？

> ID：10238721
> 
> 赞同：1
> 
> 时间：2012-04-20T00:30:02.587
> 
> 标签：mysql, sql, syntax, sql-match-all

我有一个这样的复合键表：

```
========TABLE========
key_a_col | key_b_col 
```

设想：

key_b 是 'foo'，并且在 key_a 下有一个 'bar' 和 'baz' 条目。另一个 key_b 'fiz' 有 'bar' 和 'raz'。

像这样：

```
========TABLE========
key_a_col | key_b_col
    'bar' | 'foo'
    'baz' | 'foo'
    'bar' | 'fiz'
    'raz' | 'fiz' 
```

我想选择在 key_a_col 中同时存在“bar”和“baz”的所有 key_b 条目。所以 'foo' 会被返回（bar|foo 和 baz|foo 存在），而 'fiz' 不会（只有 fiz|bar 匹配）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T00:56:03.883

ypercube 的链接应该给你一个想法，但如果你想比 N 个条件更进一步，你必须做 N 个连接。

这是另一种方法，您可以使用它来执行无连接的任意条件。使用您的 'biz' 和 'baz' 创建一个表条件

```
SELECT DISTINCT col_b FROM Table t1 
       WHERE ( SELECT COUNT(*) FROM Table t2 
                INNER JOIN Condition c on t2.key_b = c.condition
                WHERE t1.key_a = t2.key_a 
                GROUP BY t1.key_a) =  
              (SELECT COUNT(*) FROM CONDITION) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:51:20.793

ypercube 的链接非常完美。我学到了一点点。任何将来阅读本文的人都应该去：

[如何过滤 SQL 结果中的 has-many-through 关系](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation)

我决定：

```
SELECT distinct(t.b_id)
FROM   columns_table t
WHERE  EXISTS (SELECT * FROM columns_table 
               WHERE  columns_table.id = t.id AND columns_table.col_a = 'bar')
AND 
EXISTS (SELECT * FROM columns_table 
               WHERE  columns_table.id = t.id AND columns_table.col_a = 'baz') 
```

看起来我可以将`WHERE EXISTS`子句链接任意次数并且仍然可以获得良好的性能。我还可以加入其他表，而不会使查询变得难以阅读。如果我可以投票赞成 ypercube 的评论，我会的。

# facebook - 在图上搜索的问题

> ID：10238728
> 
> 赞同：1
> 
> 时间：2012-04-20T00:32:16.753
> 
> 标签：facebook, facebook-graph-api

当我在我的计算机中搜索以下内容时： [https](https://graph.facebook.com/search?q=swarmetrics&type=post&limit=75) ://graph.facebook.com/search?q=swarmetrics&type=post&limit=75 返回 6 个结果，但是，当我在另一台计算机或其他浏览器中搜索相同的结果时，什么也不返回

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:06:53.693

我也得到一个空结果，如果我尝试在 facebook 搜索框中搜索，然后选择“公共帖子”，我会得到“没有为您的查询找到结果”。

也许您登录的用户可以访问该查询的一些私人结果。尝试使用同一用户从其他浏览器/计算机登录 facebook，然后进行搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:41:50.653

最近遇到了类似的结果，我们的开发机器和本地机器将返回空结果以进行已知的良好搜索，而生产服务器和其他异地机器将返回结果。它通常持续 30 分钟至 2 小时，然后一切正常。我在这里提交了一张 fb 错误票[http://developers.facebook.com/bugs/456910301017301?browse=search_509b0c1b72a008e55394686](http://developers.facebook.com/bugs/456910301017301?browse=search_509b0c1b72a008e55394686)

# css - CSS 居中标题到 li 的一侧

> ID：10238730
> 
> 赞同：0
> 
> 时间：2012-04-20T00:32:24.343
> 
> 标签：css, html-lists, word-wrap

我的问题很难用语言来描述，所以我拍了一张我所追求的照片：

[http://p.twimg.com/Aq4o04vCMAEdhdD.jpg](http://p.twimg.com/Aq4o04vCMAEdhdD.jpg)

我不能让它`.title`自己坐在一条线上，描述愉快地包装。

这是我正在使用的结构的小提琴 - [http://jsfiddle.net/rEpgB/2/](http://jsfiddle.net/rEpgB/2/)

任何指针将不胜感激:)

*边注*

如果您想知道，我使用[http://hipsteripsum.me/](http://hipsteripsum.me/)作为我的虚拟文本...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:45:20.377

为什么不给你一个`<hx>`标签，因为这就是他们的目的？它解决了您的问题并且在语义上是正确的：

```
<ul>
    <li class="container">
        <h2>Title Is Here</h2>
        <span class="description">Cred vice synth cliche, salvia banksy chambray organic blog. Quinoa organic fap 8-bit, fingerstache butcher gastropub vinyl.<span>
    </li>

    <li class="container">
        <h2>Another title</h2>
        <span class="description">Authentic 8-bit messenger bag PBR master cleanse, organic fanny pack beard raw denim etsy.<span>
            </li>
</ul>

li.container {
    float: left;
    border: 1px solid black;
    padding: 10px;
    margin: 10px;
}

h2 {
    font-size: 1.3em;
}

span.description {
    color: #888;
}​
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T00:47:21.497

这是一个固定的[小提琴](http://jsfiddle.net/T7eLH/)

我所做的只是在以下位置添加一个新的 float 元素`span.title`：

```
li.container {
float: left;
border: 1px solid black;
padding: 10px;
margin: 10px;
}

span.title {
    font-size: 1.3em;
    float: left; // added this float
}

span.description {
    color: #888;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T00:45:09.290

好的，然后使用这个[http://jsfiddle.net/rEpgB/25/](http://jsfiddle.net/rEpgB/25/)

```
<ul>
    <li class="container">
        <div class="title" style="">Title Is Here</div>
        <div class="description" style="">Cred vice synth cliche, salvia banksy chambray organic blog. Quinoa organic fap 8-bit, fingerstache butcher gastropub vinyl.<div>
    </li>

    <li class="container">
        <div class="title" style="">Another title</div>
        <div class="description " style="">Authentic 8-bit messenger bag PBR master cleanse, organic fanny pack beard raw denim etsy.<div>
            </li>
</ul>
​
li.container {
    float: left;
    border: 1px solid black;
    padding: 10px;
    margin: 10px;
    width:90%
}

.title {
    font-size: 1.3em;
    display: table-cell; white-space: nowrap;
    padding-right: 5px;
}

.description {
    color: #888;
    display: table-cell;
}

.float-left {
float: left;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T00:46:57.260

除非您必须使用 span 作为包装器。您可以只使用`<h1>`, `<h2>`etc. 标签，它会为您破坏。

改变

```
<span class="title">title</span>` 
```

至

```
<h1 class="title"></h1>` 
```

然后将您的CSS更改为

```
h1.title {
    font-size: 1.3em;
    text-align:center
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T00:56:35.717

最佳解决方案：http: [//jsfiddle.net/rEpgB/17/](http://jsfiddle.net/rEpgB/17/)

不要将“宽度”与左右填充一起使用，这是一条规则。

# iphone - 当allowEditing打开时，有没有办法检测快门/捕捉按钮的按下？

> ID：10238734
> 
> 赞同：0
> 
> 时间：2012-04-20T00:32:47.107
> 
> 标签：iphone, uiimagepickercontroller

对于 UIImagePickerController，如果打开了 allowedEditing 标志，则在拍摄照片后视图将移动到 Move and Scale 视图。我的问题是，有没有办法在“移动和缩放”视图出现之前检测按下快门/捕捉按钮然后做某事。调查中没有 UIImagePickerController 委托可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T00:38:54.370

从技术上讲，如果您设置自己的叠加层，则可以在拍摄照片时执行操作，以便您可以使用自己的按钮执行操作并从 uiimagepickercontroller 调用拍照方法。

除此之外，您将不得不使用avfoundation。

# wordpress - IE9 和 Mac Safari 中的 Superfish 菜单包装

> ID：10238740
> 
> 赞同：0
> 
> 时间：2012-04-20T00:33:25.233
> 
> 标签：wordpress, internet-explorer-9, superfish

我已经在一个非常基本的自定义 Wordpress 主题中实现了 Superfish。顶级菜单项的填充和/或间距在 IE9 和 Mac Safari 中是关闭的。我无法弄清楚是什么导致了问题或如何解决它而不影响它已经正确呈现的浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:29:43.247

我会忘记使用菜单插件并使用 WP3 菜单系统。没有 IE 问题，也不需要额外的 JS。而且它可能比您使用的插件更容易实现。从二十一或二十一中获取代码。

请参阅[http://codex.wordpress.org/Function_Reference/wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)和[http://codex.wordpress.org/WordPress_Menu_User_Guide](http://codex.wordpress.org/WordPress_Menu_User_Guide)

# javascript - 多次交互后jquery按钮交互变慢

> ID：10238741
> 
> 赞同：1
> 
> 时间：2012-04-20T00:33:43.553
> 
> 标签：javascript, jquery, html, canvas

每次选择 4 个按钮的特定组合并单击第 5 个按钮时，我都使用 jQuery/javascript 绘制一系列矩形。当我创建第 10 行矩形时，交互会大大减慢。我之前创建了相同的交互，但它在网页上创建了列表元素。重试画布中的代码并不能解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:15:29.233

您正在将点击事件叠加在一起。每次触发 button1() 时，它都会添加另一个单击处理程序。因此，对于您的所有按钮功能：

这个：

```
$("#button1").toggle(
    function() {
    $("#button1").css("background-color","yellow");
    is1click = 1;
    makePattern();
},
function() {
    $("#button1").css("background-color","#333");
    is1click = 0;
}); 
```

而不是这个：

```
function button1(){
$("#button1").toggle(
    function() {
    $("#button1").css("background-color","yellow");
    is1click = 1;
    makePattern();
},
function() {
    $("#button1").css("background-color","#333");
    is1click = 0;
});
} 
```

然后停止调用“makePattern”末尾的函数。

我不能 100% 确定您的代码仍会按预期工作，但在当前状态下，每次触发这些按钮 1-5 时，您将不断触发所有这些切换功能。Toggle，您使用它的方式只是一个单击事件处理程序，它跟踪触发的这两个函数中的最后一个，以便它可以触发另一个。如果您希望在设置为零时触发其中一个或另一个切换功能`is<1-5>Click`，只需执行标准单击并编写您自己的逻辑以根据这些变量的值触发功能。

# c++ - C++ 中的整数集

> ID：10238742
> 
> 赞同：3
> 
> 时间：2012-04-20T00:33:46.453
> 
> 标签：c++, arrays, class

我的作业有问题。分配是创建一个 IntegerSet IntegerSet 是一个包含 100 个元素的数组，表示从 0 到 99 的数字，例如，如果数字 5 出现在集合 a then`a[5] = 1`中，则空集是一个零数组。

我创建了一个名为 IntegerSet 的类，这是 integerSet.cpp 中的代码

```
#include "integerset.h"
#include <iostream>
using std::cout;
using std::endl;

IntegerSet::IntegerSet(){
    int temp[100] = {0};
    set = temp;
}

IntegerSet::IntegerSet(int * setPtr) {
    set = setPtr;
}

void IntegerSet::insertElement(int toInsert) {
    if(toInsert < 100 && toInsert >= 0) {
        set[toInsert] = 1;
    }
}

void IntegerSet::deleteElement(int toDelete) {
    if (toDelete < 100 && toDelete >= 0 ) {
        set[toDelete] = 0;
    }
}

IntegerSet * IntegerSet::unionOfSets(IntegerSet * otherPtr) {
    int newSet[100] = {0};
    for(int i = 0; i < 100; i++ ) {
        if (this->set[i] == 1 || otherPtr->set[i] == 1) {
            newSet[i] = 1;
        }
    }
    return new IntegerSet(newSet);
}

IntegerSet * IntegerSet::intersectionOfSets(IntegerSet* otherPtr) {
    int newSet[100] = {0};
    for(int i = 0; i < 100 ; i++) {
        if(this->set[i] == 1 && otherPtr->set[i] == 1){
            newSet[i] = 1; 
        }
    }
    return new IntegerSet(newSet);
}

bool IntegerSet::isEmpty(){
    for(int i = 0 ; i < 100 ; i++) {
        if(set[i] == 1) {
            return false;
        }
    }
    return true;
}  

bool IntegerSet::isEqualTo(IntegerSet * otherPtr) {
    for(int i = 0; i < 100 ; i++) {
        if(this->set[i] != otherPtr->set[i]) {
            return false;                
        }        
    }
    return true;
}

void IntegerSet::printSet() {
    if(isEmpty()) {
        cout << "---" << endl;
    } else { 
        for(int i = 0; i < 100 ; i++) {
            if(set[i] == 1) {
                cout << i << ' ';
            }
        }
        cout << endl;        
    }
}   

IntegerSet::~IntegerSet() { 
    delete[] set;
} 
```

该类有私有成员`int * set;`。

这是用于测试我的课程的主要功能：

```
#include <iostream>
#include<new>
#include "integerset.h"

using std::cout;
using std::endl;

int main(int argc, char *argv[])
{
    IntegerSet * set1Ptr = new IntegerSet();
    set1Ptr->insertElement(1);
    set1Ptr->insertElement(2);
    set1Ptr->insertElement(3);
    set1Ptr->insertElement(50);
    IntegerSet * set2Ptr = new IntegerSet();
    set2Ptr->insertElement(0);
    set2Ptr->insertElement(3);
    set2Ptr->insertElement(2);
    set2Ptr->insertElement(51);
    set2Ptr->insertElement(100);
    set2Ptr->insertElement(99);
    IntegerSet * set3Ptr = set1Ptr->unionOfSets(set2Ptr);
    IntegerSet * set4Ptr = set1Ptr->intersectionOfSets(set2Ptr);
    cout << "First Set" << endl;
    set1Ptr->printSet();
    cout << "Second Set" << endl;
    set2Ptr->printSet();
    cout << "Equal ? : " << set1Ptr->isEqualTo(set2Ptr) << endl;
    cout << "Intersection : " << endl;
    set4Ptr->printSet();
    cout << "Union : " << endl;
    set3Ptr->printSet();
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

这是我运行时得到的输出

```
First Set
16 19 35 45 46 54 66 84
Second Set
0 1 10 12 13 14 19 35 45 46 54 66 84
Equal ? : 1
Intersection :
16 19 35 45 46 54 66 84 98
Union :
0 1 10 12 13 14 19 35 45 46 54 66 84 98 
```

我尝试了追踪，但我不知道出了什么问题，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:56:19.067

```
IntegerSet::IntegerSet(){
   int temp[100] = {0};
   set = temp;
} 
```

那就是创建一个包含 100 个元素的本地数组，并将指向它的指针存储在 member 中`set`。这里的问题是，它的生命周期`temp`仅限于构造函数，一旦构造函数退出，数组就会被销毁，而你拥有的是一个悬空指针（指向无效内存块的指针）。

如果您需要使用指针，那么您应该动态分配内存并确保在析构函数中释放它。如果没有，您可以将数组声明为您的类型的成员属性并完全避免使用指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T00:57:05.593

请记住，对于您呼叫的每个“新”，您都必须删除。

```
IntegerSet::IntegerSet(){

           int temp[100] = {0};
           set = temp;

} 
```

我认为您的构造函数对您要完成的工作没有意义。在您的析构函数中，您包括：

```
 IntegerSet::~IntegerSet() { 
 delete[] set;
 } 
```

如果您首先动态分配了数组，则删除很棒。如果你想跟上所有这些不必要的指针的东西，你的构造函数应该是这样的

```
IntegerSet::IntegerSet(){

           set = new int[100];
         for(int i; i < 100; i++)
              set[i] = 0;

} 
```

在这种情况下，我根本不会使用指针或动态分配的内存。数组不需要增长或缩小。在 main 函数存在后，它们也不需要存在。尝试在没有所有指针的情况下简化它。

# ruby-on-rails - 如何在服务器上安装 Ruby 脚本？

> ID：10238743
> 
> 赞同：2
> 
> 时间：2012-04-20T00:33:50.543
> 
> 标签：ruby-on-rails

对于这个相当简单的问题，我提前道歉。

我熟悉 PHP，但我第一次尝试在我的服务器上安装[这个 Ruby 脚本。](https://github.com/barmstrong/ribbot)这是我从 github 分叉的开源脚本，但遗憾的是没有任何说明。我已经安装了 Ruby on Rails 和 MongoDB。

有谁知道初学者的入门步骤是什么？我应该通过 FTP 将所有内容上传到公共目录，还是还有其他内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:11:09.490

大多数 Rails 项目通过适当的部署策略得到更好的服务。通常，这涉及制作您自己的存储库，通过分叉该现有应用程序并使用`git`. 要在将来进行更改，请在开发副本上进行工作，将其推送到存储库中，然后在服务器上拉下更改。

与应用程序的许多部分可以独立运行的 PHP 不同，Rails 应用程序的集成度要高得多，从长远来看，逐个上传是行不通的。

Rails 应用程序可以使用提供的工具独立运行，`rails server`但这实际上仅适用于轻型测试或开发工作。一个更持久的解决方案是使用像[乘客](http://www.modrails.com/)这样的东西来为你做托管。

当调用您在 Apache 或 nginx 中配置的站点时，Passenger 将负责启动您的应用程序，具体取决于您最终使用的站点。乘客很受欢迎，因为它很容易运行。

如果您喜欢冒险，还有其他方法，例如[独角兽。](http://unicorn.bogomips.org/)

当您在生产模式下对 Rails 应用程序进行更改时，您必须`tmp/restart.txt`在主应用程序目录中创建一个文件来告诉您的 Web 服务器重新启动该过程。这不是开发模式的要求。

由于包含所有各个步骤后此过程的相对复杂性，您可能希望使用像[capistrano](https://github.com/capistrano/capistrano/wiki/Documentation-v2.x)这样的部署自动化工具。

# url-routing - ember-routemanager 没有响应 set('location', '...')

> ID：10238746
> 
> 赞同：0
> 
> 时间：2012-04-20T00:33:54.690
> 
> 标签：url-routing, ember.js

我有一个应用程序，我正在尝试使用[ember-routemanager](https://github.com/ghempton/ember-routemanager)。（我将`rake-pipeline`其用作构建环境，但我认为这无关紧要。或者是吗？）问题是，该应用程序似乎忽略了位置栏中的路线。

[这个 jsfiddle](http://jsfiddle.net/pjmorse/3D34B/2/)显示了状态管理器正确设置和进入入口状态。两秒半后，脚本运行`App.stateManager.set('location', 'desktop');`，根据 ember-routemanager README 应该将我移动到以“桌面”作为其路由参数的状态（对吗？）。但事实并非如此。

（这是尽可能接近在 jsfiddle 中克隆问题的方法，我无法轻易在位置栏中放置路径。当我在开发环境中执行此操作时，例如[http://localhost:9292/desktop](http://localhost:9292/desktop)或[http://localhost:9292/#desktop](http://localhost:9292/#desktop)，很明显应用程序没有使用路径；它返回“Entity not found: /desktop”。）

请注意，使用而不是设置[的同一小提琴的另一个版本](http://jsfiddle.net/pjmorse/3D34B/3/)工作得很好。`goToState``location`

我究竟做错了什么？

* * *

代码：

```
Sylvius.stateManager = Ember.RouteManager.create({

    initialState: 'launch',
    enableLogging: true,
    wantsHistory: true,

    launch: Em.ViewState.create({
        view: Sylvius.LaunchView,
    }),
    desktop: Em.ViewState.create({
        view: Sylvius.DesktopView,
        route: 'desktop',

        sectionSelected: Em.State.create({
            route: ':sectionSlug',

            enter: function(manager, transition) {
                console.log('We found the slug: ' + Sylvius.stateManager.getPath('params.sectionSlug'));
            }
        })

    })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:26:46.300

您正在`/desktop/:sectionSlug`为您的`sectionSelected`州定义一条路线。如果您调用`Sylvius.stateManager.set('location', 'desktop/123');`，那么它会按预期工作。

如果你想要一个处理路由'/desktop'的状态，你必须创建一个没有`route`属性的新状态，请参阅[http://jsfiddle.net/pangratz666/NMgKH/](http://jsfiddle.net/pangratz666/NMgKH/)：

```
index: Em.State.create({
    enter: function(manager, transition){
        this._super();
        console.log('invoked for /desktop');
    }
}) 
```

# android - Android - 以编程方式将 Google 帐户添加到非 Google 设备，例如 Nook

> ID：10238749
> 
> 赞同：2
> 
> 时间：2012-04-20T00:34:04.873
> 
> 标签：android, accountmanager, nook

我的应用中有一个代码，如果缺少一个，它会提示用户添加 Google 帐户。

```
AccountManager accountMgr = AccountManager.get(mContext);
accountMgr.addAccount("com.google", "ah", null, new Bundle(), 
    (Activity) mContext, null, null); 
```

这可以在任何“支持 Google 的”设备上按预期工作，但是在 NOOKColor 代码执行时没有错误或警告，但是帐户管理器永远不会启动，因为它的 UI 可能丢失。你能想出什么好的选择吗？我只需要为用户的 Google 帐户获取 AUTH 令牌，以便能够访问 Google Reader

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:03:48.560

你不能这样做。这`AccountManager`只是一个门面，需要有一个实际的 Google 帐户实现。您只能在预装了 Market/Play 的“Google 体验”设备上获得此功能。

如果您需要获取 Google API 服务的令牌，您可以直接使用 API，顺便说一句，“啊”是用于 App Engine，而不是 Reader。

# ruby - WIN32OLE.attach 是尝试将 HTTPWatch 与 Watir 附加以在 IE9 中工作时未定义的方法

> ID：10238750
> 
> 赞同：2
> 
> 时间：2012-04-20T00:34:05.283
> 
> 标签：ruby, internet-explorer-9, watir, httpwatch

我一直在尝试让 HTTPWatch 在 IE9 中与 Watir 自动化一起工作。

我搜索了这些提供代码的网站：

[链接1](http://apihelp.httpwatch.com/#Ruby%20-%20Driving%20the%20browser%20with%20Watir.html)

所以我基本上复制了他们的部分并编写了这段代码只是为了测试附加方法：

```
**require 'rubygems'
require 'win32ole'
require 'watir'
ct = WIN32OLE.new('HttpWatch.Controller')
ie = Watir::IE.new
httpw = ct.Attach(ie.ie)** 
```

我收到以下错误：NoMethodError: undefined method `attach' for WIN32OLE:Class

**我的 Ruby 是 1.8.7，Watir 是 2.0.1，HTTPWatch 是 8.1，IE 9**。我必须使用团队定义的那些版本。

我已经在谷歌上搜索了几个小时，我发现 attach 不是 WIN32OLE 中列出的方法：http: [//ruby-doc.org/stdlib-1.8.7/](http://ruby-doc.org/stdlib-1.8.7/)

所以我想知道如何使用 HTTPWatch 记录 Watir 自动化在 IE9 中花费的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T02:03:52.637

我想你想要：

```
httpw = ct.IE.Attach(ie.ie) 
```

注意：这是基于我在另一个[问题](https://stackoverflow.com/questions/9980888/how-to-get-win32ole-handle-for-ie-via-watir-webdriver)中看到的关于使用 Watir-Webdriver（而不是原始的 Watir）获取 HTTPWatch 的内容。我没有 HTTPWatch，所以我没有测试它。

# linux - 是否可能/建议让用户不拥有主文件夹？

> ID：10238751
> 
> 赞同：0
> 
> 时间：2012-04-20T00:34:07.060
> 
> 标签：linux, permissions

我之前曾问过有关防止用户通过执行以下操作来删除其主目录中的某些关键文件/文件夹的问题：

```
/home
└── [-rw-rw-r-- daedalus    ]  daedalus
    ├── [-rw-rw-r-- root    ]  do_not_delete_file.cpp
    ├── [-rw-rw-r-- root    ]  do_not_delete_file.html
    ├── [-rw-rw-r-- root    ]  do_not_delete_file.php
    ├── [drwxrwxr-x root    ]  do_not_delete_folder
    │   ├── [-rw-rw-r-- root    ]  do_not_delete_file.cpp
    │   ├── [-rw-rw-r-- root    ]  do_not_delete_file.html
    │   └── [-rw-rw-r-- root    ]  do_not_delete_file.php
    └── [-rw-rw-r-- daedalus  ]  index.html 
```

但这失败了，因为用户`daedalus`对自己的`/home/daedalus`文件夹具有写入权限，因此也具有删除权限。因此，尽管他们不能修改，例如，`do_not_delete_file.php`他们总是可以删除它，然后再替换它。

但是如果我有这样的东西怎么办

```
/home
└── [-rw-rw-r-- root    ]  daedalus
    ├── [-rw-rw-r-- root    ]  do_not_delete_file.cpp
    ├── [-rw-rw-r-- root    ]  do_not_delete_file.html
    ├── [-rw-rw-r-- root    ]  do_not_delete_file.php
    ├── [drwxrwxr-x root    ]  do_not_delete_folder
    │   ├── [-rw-rw-r-- root    ]  do_not_delete_file.cpp
    │   ├── [-rw-rw-r-- root    ]  do_not_delete_file.html
    │   └── [-rw-rw-r-- root    ]  do_not_delete_file.php
    ├── [drwxrwxr-x daedalus    ]  Documents
    └── [-rw-rw-r-- root  ]  index.html 
```

我假设这可以通过一些小动作来实现`chmod`，但是当程序自然假设它们具有对主目录的写权限时，它会导致许多问题吗？如果这是一个坏主意，我能否就如何解决这个问题提出一些其他建议。

**编辑：**我问这个问题的原因与 LAMP 编程有关。我正在创建一系列 VHost，即：

*   `www.user1.example.com`
*   `www.user2.example.com`
*   ...
*   `www.userN.example.com`

我希望将 DocRoot 设置为：

*   `/home/user1`
*   `/home/user2`
*   ...
*   `/home/userN`

但是，我正在努力为个人用户授予太多/太少的自由。在最简单的情况下，我可能想要一个`do_not_delete_folder`用户可以访问但不能修改/删除的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:00:29.137

这有点棘手，但您可以使用 Sticky Bit 来做到这一点。

[http://en.wikipedia.org/wiki/Sticky_bit](http://en.wikipedia.org/wiki/Sticky_bit)

Linux 内核会忽略除目录之外的 Sticky Bit。对于目录，linux 只允许超级用户和所有者删除、重命名或取消链接文件。它不允许有权访问文件的用户使用组权限。

例如，我的用户名为葡萄并且是葡萄组的成员

要添加粘性位，请使用 chmod：

```
chmod +t [file] 
```

在这里，您可以创建一个用户有权使用组但归根用户所有的目录

> drwxrwxr-T 2 根葡萄 4096 2012-04-19 20:49 st

在这种情况下，用户仍然可以在 st 中创建/删除自己的文件，但不能删除 root 的文件，即使用户具有写权限：

```
-rwxrwxrwx 1 root  root  0 2012-04-19 20:45 test 
-rw-rw-r-- 1 grape grape 0 2012-04-19 20:56 test2 
```

我仍然可以读取/写入这两个文件，但只有我拥有的文件可以删除/移动

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T01:09:14.537

许多程序——和用户——希望能够直接在他们的主目录中创建任何必要的文件。这可能是`~/.xsession-errors`, `~/.viminfo`, `~/.lesshst`, `~/.bash_history`, 或我可能错过的其他 - 或者我不运行，但您的用户运行。

所以，这不会是无痛的，但这里有一些想法：

*   您可以通过让其他人拥有主目录*并设置目录的粘性位*来接近您想要的- 这将要求用户在删除文件或目录之前拥有它；来自`unlink(2)`：

    ```
    EPERM or EACCES
          The directory containing pathname has the sticky bit
          (S_ISVTX) set and the process's effective UID is
          neither the UID of the file to be deleted nor that of
          the directory containing it, and the process is not
          privileged (Linux: does not have the CAP_FOWNER
          capability). 
    ```

    您要么不得不花费过多的时间`setfacl(1)`来设置访问控制列表，要么为每个用户提供自己的组。如果没有这两个步骤之一，您可能会意外授予用户修改彼此数据的权限。

*   您可以使用该`chattr(1)`属性`i`使文件*不可变*——它不能被修改、链接或取消链接，除非通过特权进程。来自`chattr(1)`：

    ```
    A file with the `i' attribute cannot be modified: it cannot
    be deleted or renamed, no link can be created to this file
    and no data can be written to the file.  Only the superuser
    or a process possessing the CAP_LINUX_IMMUTABLE capability
    can set or clear this attribute. 
    ```

*   您可以使用*绑定挂载*将文件或目录挂载到用户的主目录中。这可以在用户仍然拥有他们的主目录时完成；只需运行`mount -obind /path/to/source /home/daedalus/do_not_delete`。如果目录或文件不属于用户，则他们无法修改文件，也无法修改挂载点本身。（他们*可以*修改更高级别的目录以使路径无意义——因此直接在主目录中执行此操作，但不要尝试在子目录中执行此操作。）

    ```
    # mount -obind /etc /tmp/sarnold/mount_point/
    # mount -obind /etc/passwd /tmp/sarnold/passwd
    $ rm mount_point/
    rm: cannot remove `mount_point/': Is a directory
    $ rmdir mount_point/
    rmdir: failed to remove `mount_point/': Device or resource busy
    $ mv mount_point/ blob
    mv: cannot move `mount_point/' to `blob': Device or resource busy
    $ rm /tmp/sarnold/passwd 
    rm: remove write-protected regular file `/tmp/sarnold/passwd'? y
    rm: cannot remove `/tmp/sarnold/passwd': Device or resource busy
    $ mv /tmp/sarnold/passwd /tmp/sarnold/old_passwd
    mv: cannot move `/tmp/sarnold/passwd' to `/tmp/sarnold/old_passwd': Device or resource busy 
    ```

    （我没有创建挂载点；这只是一个简单的`touch`or `mkdir`。）

    当然，绑定安装在每次重新启动时都会消失。您可能需要正确使用`pam_exec(8)`或配置您的`fstab(5)`以在每次登录或引导时重新创建绑定挂载。

*   您可以配置[强制访问控制](http://en.wikipedia.org/wiki/Mandatory_access_control)工具，例如[AppArmor](http://wiki.ubuntu.com/AppArmor/)、[SELinux](http://en.wikipedia.org/wiki/Security-Enhanced_Linux)、[TOMOYO](http://tomoyo.sourceforge.jp/index.html.en)或[SMACK](http://schaufler-ca.com/)来限制用户进程可用的权限。（我已经成为 AppArmor 团队的成员 12 年了；根据您的服务器的使用方式，它可能适合也可能不适合这种用途。我相信这些系统中的大多数都可以配置为执行您想要的操作，但由于 AppArmor 和 TOMOYO 是*基于名称的，我相信它们比 SELinux 或 SMACK（它们是**基于标签的*系统）更有可能控制对文件和目录的访问。）

# mysql - 在 MySql 中使用注解 @Inheritance 时出现 Hibernate MappingException

> ID：10238753
> 
> 赞同：2
> 
> 时间：2012-04-20T00:34:29.153
> 
> 标签：mysql, hibernate, jakarta-ee, hibernate-mapping

我正在使用 Hibernate 框架 3.6.10.Final 和 MySql。我正进入（状态

> 线程“主”org.hibernate.MappingException 中的异常：无法使用标识列密钥生成与映射：org.koushik.javabrains.dto.Vehicle

当我包括`@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)`在车辆类中。没有这个注释它工作正常。

* * *

`Vehicle.java`是我的基类：

```
@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)

public class Vehicle 
{

    @Id
    @GeneratedValue
    private int vehicleId;
    private String vehicleName;
        public int getVehicleId() {
        return vehicleId;
    }

    public void setVehicleId(int vehicleId) {
        this.vehicleId = vehicleId;
    }

    public String getVehicleName() {
        return vehicleName;
    }

    public void setVehicleName(String vehicleName) {
        this.vehicleName = vehicleName;
    }

} 
```

* * *

`TwoWheeler.java`：

```
@Entity
public class TwoWheeler extends Vehicle {
    private String SteeringHandle;

    public String getSteeringHandle() {
        return SteeringHandle;
    }

    public void setSteeringHandle(String steeringHandle) {
        SteeringHandle = steeringHandle;
    }

} 
```

* * *

`FourWheeler.java`：

```
@Entity
public class FourWheeler extends Vehicle {
    private String SteeringWheel;

    public String getSteeringWheel() {
        return SteeringWheel;
    }

    public void setSteeringWheel(String steeringHandle) {
        SteeringWheel = steeringHandle;
    }

} 
```

* * *

我的主要课程：

```
public class HibernateTest {
    public static void main(String[] args)
    {

        Vehicle vehicle = new Vehicle();
        vehicle.setVehicleName("audi"+(int)(Math.random() * 100) + 1);

        TwoWheeler bike = new TwoWheeler();
        bike.setVehicleName("bike");
        bike.setSteeringHandle("Bike SteeringHandle");

        FourWheeler car = new FourWheeler();
        car.setVehicleName("car");
        car.setSteeringWheel("Car SteeringHandle");

        SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
        Session session = sessionFactory.openSession();
        session.beginTransaction();
        session.save(vehicle);
        session.save(bike);
        session.save(car);
        session.getTransaction().commit();
        session.close();

    }
} 
```

运行时出现以下错误：

> SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。SLF4J：默认为无操作 (NOP) 记录器实现 SLF4J：参见[http://www.slf4j.org/codes.html#StaticLoggerBinder](http://www.slf4j.org/codes.html#StaticLoggerBinder)了解更多详情。线程“主”org.hibernate.MappingException 中的异常：无法使用标识列密钥生成与映射：org.koushik.javabrains.dto.Vehicle at org.hibernate.persister.entity.UnionSubclassEntityPersister.(UnionSubclassEntityPersister.java:90) at org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:90) 在 org.hibernate.impl.SessionFactoryImpl.(SessionFactoryImpl.java:286) 在 org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872) 在org.koushik.hibernate.HibernateTest.main(HibernateTest.java:26)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T17:28:59.450

如果使用 TABLE_PER_CLASS，则必须使用此 ID 生成策略：@GeneratedValue(strategy = GenerationType.TABLE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T08:37:46.377

**车辆.java**

```
@Entity
@Table(name="vehicle")
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)

public class Vehicle 
{

    @Id
    @GeneratedValue(strategy=GenerationType.TABLE)
    @Column(name="vehicle_id")
    private int vehicleId;
    @Column(name="vehicle_name")
    private String vehicleName;
        public int getVehicleId() {
        return vehicleId;
    }

    public void setVehicleId(int vehicleId) {
        this.vehicleId = vehicleId;
    }

    public String getVehicleName() {
        return vehicleName;
    }

    public void setVehicleName(String vehicleName) {
        this.vehicleName = vehicleName;
    }

} 
```

# google-app-engine - 使用 Google AppEngine SDK 在私有服务器上运行我的应用程序

> ID：10238755
> 
> 赞同：5
> 
> 时间：2012-04-20T00:34:43.757
> 
> 标签：google-app-engine, sdk

如果我出于某种原因想使用自己的私有服务器来运行我的 GAE 应用程序而不是将其部署到 Google 服务器，我可以简单地使用 AppEngine SDK 来执行此操作吗？是否有任何我应该知道的技术或法律限制或问题？我知道 SDK 不是为运行繁重的页面而设计的，但对于小型网站，它应该可以正常工作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T05:35:47.007

dev_appserver 不是为服务面向公众的流量而构建的。它是单线程的，不是为性能而构建的，后端同样受到限制，并且它暴露了用户不应该访问的管理端点（例如 /_ah/admin/）。

存在自己托管应用程序的替代方案，例如[TyphoonAE](http://code.google.com/p/typhoonae/)和[AppScale](http://code.google.com/p/appscale/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T04:56:44.810

嗯，你可以试试。我不知道有任何法律问题（需要注意的是，我不是律师，不能为您解释许可协议），但我怀疑您是否会对表现感到满意。

一方面，dev_appserver 数据存储仿真（在 Python 和 Java SDK 中）一旦通过少量数据就不能很好地扩展。它不是为性能而设计的；它旨在准确模仿真实数据存储的语义。

# drupal - 如何在没有面板的 Views Drupal 7 中获取组 ID 作为上下文

> ID：10238762
> 
> 赞同：3
> 
> 时间：2012-04-20T00:36:02.413
> 
> 标签：drupal, drupal-7, views, organic-groups

我整天都在用这个敲我的头。我看过其他帖子，但他们似乎都在说“使用面板”，我不想为每个视图制作一个面板页面。

我正在使用 Drupal 7.x、Organic Groups with Group Context 和 Views。

我将一个内容类型创建为一个组，并将几个内容类型创建为组内容类型。

在我看来，我添加了关系组成员：节点组成员、组：节点和内容：作者。我尝试了各种上下文过滤器，但似乎都没有工作。

该视图是显示类型页面，路径为 node/%/content/documents（文档是我要显示特定组的所有上传文档的内容类型）。

看到的是每当我添加上下文过滤器时，查询包含类似于 WHERE ((og_node.gid = 'xx')) 的行，并且那里的值是组节点实体 ID 的值，而不是 GID。我已将上下文过滤器的默认值设置为“来自上下文的当前 OG 组”，并设置了验证标准以验证 Content ->group 内容类型和节点 ID。我可以获得页面显示标题以使用 %1 占位符成功准确地获取组节点标题，但我无法获取要传递的上下文，因此 WHERE 子句包含 GID 而不是实体 ID。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:13:15.777

我刚刚尝试过，以下两个设置对我有用：

1.  的关系`Group membership: Node group membership`
2.  上下文过滤器`(group membership) OG membership: Group gid`

在预览窗口中，当我输入上下文过滤器的 gid 时，我准确地返回了属于我期望的该组的节点。

你试过那个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:28:03.337

您可以尝试 og_context 模块（og 的一部分）

# c++ - Contours opencv：如何消除二值图像中的小轮廓

> ID：10238765
> 
> 赞同：9
> 
> 时间：2012-04-20T00:36:17.723
> 
> 标签：c++, c, visual-c++, opencv, image-processing

我目前正在从事图像处理项目。我将 Opencv2.3.1 与 VC++ 一起使用。我编写了这样的代码，输入图像被过滤为仅蓝色并转换为二进制图像。二进制图像有一些我不想要的小物体。我想消除那些小物体，所以我使用openCV的`cvFindContours()`方法来检测二进制图像中的轮廓。但问题是我无法消除图像输出中的小物体。我使用`cvContourArea()`了function，但没有正常工作..，erode函数也没有正常工作。

所以请有人帮我解决这个问题..

**我获得的二进制图像**：

![在此处输入图像描述](../Images/7507cab00fd7ce11d47f6c5cc8939fb2.png)

**我想要获得**的结果/输出图像：****

 **![在此处输入图像描述](../Images/e985534f7546926092688c1715b63e55.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T02:51:27.967

好的，相信你的问题*可以*通过OpenCV最近推出[的bounding box demo](https://docs.opencv.org/3.4/da/d0c/tutorial_bounding_rects_circles.html)来解决。

![在此处输入图像描述](../Images/04c83807f44ac752b47f199d0af66858.png)

您可能已经注意到，您感兴趣的对象应该在图片中最大的矩形内。幸运的是，这段代码不是很复杂，我相信你可以通过调查和试验来弄清楚。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-07T16:16:27.537

这是我消除小轮廓的解决方案。基本思想是检查每个轮廓的长度/面积，然后从矢量容器中删除较小的轮廓。

通常你会得到这样的轮廓

```
Mat canny_output; //example from OpenCV Tutorial
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;
Canny(src_img, canny_output, thresh, thresh*2, 3);//with or without, explained later.
findContours(canny_output, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, Point(0,0)); 
```

通过 Canny() 预处理，您将获得轮廓段，但是每个段都与边界像素一起存储为闭合环。在这种情况下，您可以检查长度并删除较小的，例如

```
for (vector<vector<Point> >::iterator it = contours.begin(); it!=contours.end(); )
{
    if (it->size()<contour_length_threshold)
        it=contours.erase(it);
    else
        ++it;
} 
```

如果没有 Canny() 预处理，您将获得对象的轮廓。类似的，你也可以使用面积来定义一个阈值来消除小物体，如 OpenCV 教程所示

```
vector<Point> contour = contours[i];
double area0 = contourArea(contour); 
```

此 contourArea() 是非零像素的数量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T01:31:19.080

您确定按小轮廓区域过滤不起作用吗？它一直对我有用。我们可以看看你的代码吗？

此外，正如 sue-ling 所提到的，最好同时使用侵蚀和扩张来近似保留区域。要删除小的嘈杂位，请先使用腐蚀，要填充孔，请先使用扩张。

另外，`cv`如果您还不知道 * 函数的新 C++ 版本，您可能想查看它们（文档[）](http://opencv.itseez.com/trunk/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)`findContours`。在我看来，它们更容易使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-28T06:31:50.647

我相信您可以使用 erode 和 dilate 等形态运算符（[在此处](http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)阅读更多内容）

您需要使用接近右侧圆半径（您要消除的那个）的内核大小执行腐蚀。然后使用相同的内核进行膨胀以填补侵蚀步骤产生的空白。

仅供参考，腐蚀然后使用相同的内核进行膨胀称为开环。

代码将是这样的

```
int erosion_size = 30; // adjust with you application
Mat erode_element = getStructuringElement( MORPH_ELLIPSE,
                         Size( 2*erosion_size + 1, 2*erosion_size+1 ),
                         Point( erosion_size, erosion_size ) );
erode( binary_img, binary_img, erode_element );
dilate( binary_img, binary_img, erode_element ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T01:33:58.047

从前后图像判断，您需要确定所有白色区域或斑点的面积，然后应用阈值面积值。这将消除所有小于该值的区域，只留下第二张图像中看到的大的白色区域。使用 cvFindContours 函数后，尝试使用 0 阶矩。这将返回图像中斑点的区域。此链接可能有助于实现我刚刚描述的内容。 [http://www.aishack.in/2010/07/tracking-colored-objects-in-opencv/](http://www.aishack.in/2010/07/tracking-colored-objects-in-opencv/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-16T13:13:45.210

这不是一种快速的方法，但在某些情况下可能很有用。OpencCV 3.0 中有一个新功能——connectedComponentsWithStats。有了它，我们可以获得连接组件的面积并消除不必要的。所以我们可以很容易地去除带孔的圆，与实心圆具有相同的边界框。**

# html - 流体网格，无舍入误差和多个列宽

> ID：10238766
> 
> 赞同：1
> 
> 时间：2012-04-20T00:36:51.813
> 
> 标签：html, css, grid, responsive-design, fluid-layout

我已经查看了所有时髦的流体网格框架，似乎不可能有一个流体网格使用百分比作为列宽（以及 ems 用于排水沟宽度），它*可以被 3 整除*，并且不会受到影响从可怕的舍入错误。看一看：

[http://roestudios.com/code/12-columns.html](http://roestudios.com/code/12-columns.html)

尝试调整浏览器窗口的大小，并注意事情是如何反弹的。大多数排水沟根本没有排成一行。这是因为缺乏整齐的亚像素处理。当然，舍入因浏览器而异。

我展示的示例基于 12 列网格，这是理想的，因为 12 列网格允许元素是页面宽度的 1/4 和 1/3。

这就是为什么像[The Golden Grid](http://goldengridsystem.com/)这样的东西不起作用的原因：它不能被 3 整除。

拥有一个全宽“主”区域和下面三个“桶”的主页是相当标准的。标准布局。

但是在尝试构建“响应式网站”时，如果我希望元素像素完美对齐，那么带有多个 @media 查询的固定布局可能是唯一真正的选择。

编辑：Webkit 中的情况要糟糕得多，但即使是 Firefox 也不会产生像素完美的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:52:21.317

你试过 CSS3 FlexBox 吗？它可以在 Firefox 中运行，但不幸的是在 Chrome 中仍然有点跳动且像素不完美。

[http://jsfiddle.net/lukem/gqsCV/3/](http://jsfiddle.net/lukem/gqsCV/3/)

[http://www.html5rocks.com/en/tutorials/flexbox/quick/](http://www.html5rocks.com/en/tutorials/flexbox/quick/)

# linux - 两个进程通过 Erlang 在两台计算机上通信

> ID：10238767
> 
> 赞同：1
> 
> 时间：2012-04-20T00:37:01.910
> 
> 标签：linux, erlang, multiprocessing

这是 Erlang 中的 2 进程通信程序。

我需要在不同的计算机上运行每个进程。

我需要运行 erl -name ping

在计算机 2 中，其主机名为 linux-2.mydomain

而且，我需要运行

```
 erl -name pong 
```

在计算机 1 中，其主机名为 linux-1.mydomain

然后，

在计算机 1 上，我运行：

```
 tut17:start_pong(). 
```

在计算机 2 上，我运行：

```
 tut17:start_ping(pong@linux-1) 
```

但是，我得到了错误：

*   异常错误：算术表达式中的错误参数 -/2 称为 pong@linux - 1

似乎 Erlang 认为“-”是“linux-1”中的减号运算符。

那么，如何让 Erlang 理解我的命令呢？

非常感谢任何帮助。

代码如下：

```
 -module(tut17).

 -export([start_ping/1, start_pong/0,  ping/2, pong/0]).

 ping(0, Pong_Node) ->
     {pong, Pong_Node} ! finished,
     io:format("ping finished~n", []);

 ping(N, Pong_Node) ->
     {pong, Pong_Node} ! {ping, self()},
    receive
        pong ->
             io:format("Ping received pong~n", [])
    end,
 ping(N - 1, Pong_Node).

 pong() ->
     receive
         finished ->
              io:format("Pong finished~n", []);

         {ping, Ping_PID} ->
               io:format("Pong received ping~n", []),

               Ping_PID ! pong,
           pong()
  end.

  start_pong() ->
       register(pong, spawn(tut17, pong, [])).

  start_ping(Pong_Node) ->
       spawn(tut17, ping, [3, Pong_Node]). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T06:10:37.240

将节点名称放在单引号中：

```
tut17:start_ping('pong@linux-1') 
```

[http://www.erlang.org/doc/reference_manual/data_types.html#id66276](http://www.erlang.org/doc/reference_manual/data_types.html#id66276)

> 如果原子不是以小写字母开头或包含除字母数字字符、下划线 (_) 或 @ 之外的其他字符，则应将原子括在单引号 (') 中。

# android - 如何让安卓模拟器显示软键盘？

> ID：10238769
> 
> 赞同：103
> 
> 时间：2012-04-20T00:37:36.160
> 
> 标签：android, android-emulator

我正在调试软键盘显示不应该显示的问题。但是，我没有方便测试的设备。问题是**模拟器*从不*显示软键盘**。

有些皮肤的右侧经常显示键盘，有些则没有，但到目前为止我尝试过的皮肤都没有在设备屏幕上显示过键盘。

有没有我错过的设置？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-09-05T03:59:53.203

我发现了如何**在 Android 模拟器本身**上执行此操作（菜单，“设置”应用程序 - 而不是外部模拟器的设置）。您需要做的就是：

打开设置应用程序->语言和输入法->转到“键盘和输入法”->单击默认

这将弹出一个对话框，在这种情况下，您可以通过将硬件键盘从打开切换到关闭来禁用硬件键盘。这将禁用硬件键盘并启用软键盘。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-03-03T22:44:45.623

以下是步骤：

*   => 设置
*   => 语言和输入
*   => 默认
*   => 硬件物理键盘
*   => off 打开屏幕键盘

[![设置 => 语言和输入](../Images/2fb4b3a0a319719f53174d8f7e242533.png)](https://i.stack.imgur.com/BVNao.png)

[![选择默认](../Images/f8bde8226f39cabde773ba68605a6444.png)](https://i.stack.imgur.com/izp1e.png)

[![硬件物理键盘 => 关闭](../Images/1f27624d6f16af3adf40613db2239713.png)](https://i.stack.imgur.com/fNZi5.png)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-04-20T01:46:03.047

如果您使用的是 AVD 管理器，请添加硬件属性 Keyboard support 并将其设置为 false。

那应该禁用显示的键盘，并显示虚拟键盘。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-06-25T10:40:43.607

设置>语言和输入>当前键盘>硬件开关。

这个选项有效。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-01-29T19:47:43.827

**设置>语言和输入>当前键盘>硬件开关。**
它允许您使用物理键盘进行输入，同时显示软键盘。我刚刚在 Android Lollipop 上对其进行了测试，并且可以正常工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-04T12:35:57.863

更准确地说，使用 Lollipop 这些是我展示软键盘的步骤：

1.  设置 > 语言和输入法；
2.  在“键盘和输入法”标签下，选择“当前键盘”；
3.  出现一个名为“更改键盘”的对话框，打开“硬件”，然后选择“选择键盘”；
4.  出现另一个对话框，打开“示例软键盘”。在这里，您会收到有关键盘可能会存储您编写的所有内容以及密码的警报。给确定；
5.  重复上述步骤以再次显示“更改键盘”对话框，此处新选项“示例软键盘”可用，您可以选择它。

注意：在那之后，您可能会在运行您的应用程序时遇到问题（就像我一样）。只需重新启动模拟器。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-30T07:58:19.900

1.  使用 AVD 编辑您的虚拟设备。
2.  按“显示高级设置”按钮以显示更多选项向下滚动到底部并选中“启用键盘输入”按
    窗口底角的“完成”按钮
3.  然后启动您刚刚设置的仿真器设备。
4.  在模拟器中，转到“设置”->“语言和输入”
5.  并在“键盘和输入法”->“默认”中显示“选择输入法”
6.  并关闭“硬件物理键盘”切换按钮

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-29T11:59:58.833

新版 NOX 应用程序存在错误。在设置中切换到软件键盘后不起作用。为了解决这个问题，我使用 Play Market 安装了 Gboard。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-08-29T14:10:16.450

转到工具 > AVD 管理器 > 单击相应模拟器上的▾ 和 > 擦除数据并重新启动，将解决新 Android Studio 上的问题。

# python - IndentationError 需要一个缩进块

> ID：10238770
> 
> 赞同：19
> 
> 时间：2012-04-20T00:37:38.607
> 
> 标签：python, indentation

这是代码：

```
def myfirst_yoursecond(p,q):

a = p.find(" ")
b = q.find(" ")
str_p = p[0:a]
str_q = p[b+1:]

if str_p == str_q:
    result = True
else:
    result = False
return result 
```

这是错误：

```
Traceback (most recent call last):
  File "vm_main.py", line 26, in <module>
    import main
  File "/tmp/vmuser_ssgopfskde/main.py", line 22
    result = False
         ^
IndentationError: expected an indented block 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-20T00:40:22.000

您混合了制表符和空格。这可能会导致一些令人困惑的错误。

我建议*仅*使用制表符或*仅*使用空格进行缩进。

仅使用空格通常是更容易的选择。大多数编辑器都有自动将制表符转换为空格的选项。如果您的编辑器有此选项，请将其打开。

* * *

顺便说一句，您的代码比它需要的更冗长。而不是这个：

```
if str_p == str_q:
    result = True
else:
    result = False
return result 
```

只需这样做：

```
return str_p == str_q 
```

您似乎在这一行也有一个错误：

```
str_q = p[b+1:] 
```

我会让你弄清楚错误是什么。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-29T19:13:25.377

如果您有一个没有语句的块，也会发生此错误

例如：

```
def my_function():
    for i in range(1,10):

def say_hello():
    return "hello" 
```

请注意，该`for`块是空的。如果要测试模块中的剩余代码，可以使用[pass语句。](https://docs.python.org/2/tutorial/controlflow.html#pass-statements)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-22T05:29:46.710

如果您使用的是 mac 和 sublime text 3，这就是您要做的。

转到您的`/Packages/User/`并创建一个名为`Python.sublime-settings`.

如果您使用的是 mac os x，通常`/Packages/User`在您的内部。`~/Library/Application Support/Sublime Text 3/Packages/User/Python.sublime-settings`

然后你把它放在`Python.sublime-settings`.

```
{
    "tab_size": 4,
    "translate_tabs_to_spaces": false
} 
```

归功于 Mark Byer 的[回答](https://stackoverflow.com/a/10238788/80353)、[sublime text 3 docs](https://www.sublimetext.com/docs/3/indentation.html)和[python style guide](https://www.python.org/dev/peps/pep-0008/#indentation)。

该答案主要适用于遇到相同问题并偶然发现此问题并在 Mac OS X 上使用 sublime text 3 的读者。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-25T19:08:48.173

我得到了同样的错误，这就是我为解决问题所做的。

*缩进前：*

[![在此处输入图像描述](../Images/62ecc61c84a6807ff5fe56fa2bbd441f.png)](https://i.stack.imgur.com/2c4dG.png)

缩进错误：需要一个缩进块。

*缩进后：*

[![在此处输入图像描述](../Images/47a0823751c5aa8d4e752ec2474dd76a.png)](https://i.stack.imgur.com/MXppw.png)

工作正常。在 TAB 空格之后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T00:50:16.650

您应该安装支持 Python 语法的编辑器（或 IDE）。它可以突出显示源代码并进行基本的格式检查。例如：Eric4、Spyder、Ninjia 或 Emacs、Vi。

# windows-phone-7 - 如何在后台更新 Windows Phone 中的位置数据？

> ID：10238774
> 
> 赞同：1
> 
> 时间：2012-04-20T00:38:12.483
> 
> 标签：windows-phone-7, location, background-process, background-agents

我刚刚读到，虽然 Windows Phone 7.5 后台任务可以轮询位置，但它们实际上并没有从 GPS 实时轮询，而是位置 API 调用返回一个系统缓存的位置，该位置仅每十五分钟更新一次。

当然，这种限制会使任何在后台运行导航的尝试完全无效，因为您可能会在 15 分钟内偏离轨道，更不用说后台任务只能每 30 分钟左右运行一次！

也就是说，Nokia 的导​​航应用程序和据说 Runtastic 的应用程序在后台（即不仅仅是在锁定屏幕下）会继续跟踪，并且两者都在市场上意味着它们已获得批准，所以有人知道他们是如何设法完成 SDK 的吗据说不支持？

作为参考，我们实际上并不需要实时跟踪......也许每分钟一次左右，我们不需要那么高的准确性......也许是 100 英尺左右......但我们确实需要比我们更多被给予了。我们只是不知道他们在批准的应用程序中是如何做到的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T00:44:39.367

您只能在`PeriodicTask`执行时检索位置（大约每 30 分钟一次，具体取决于操作系统调度）。它从中获取的位置数据`GeoCoordinateWatcher`将来自操作系统的缓存，而不是直接来自 GPS 硬件。如果没有任何东西在运行，操作系统将大约每 15 分钟用粗粒度数据更新一次。但是，如果应用程序已经执行并检索了细粒度 GPS 硬件数据，那么这将是您将在`PeriodicTask`. 您可以通过访问前台应用程序中的 GPS 并`PeriodicTask`使用`ScheduledActionService.LaunchForTest`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:41:10.900

根据我在后台任务方面的经验，您将无法通过 Periodic 或 ResourceIntensive 后台任务来实现您想要的。

尽管文档声称它们每 30 分钟运行一次，但我的经验是它们偶尔运行且不可预测。在过去的 14 小时内，我的应用程序的周期性任务总共运行了 6 次，而且每天都非常一致 - 它大约每两个小时运行一次。对于资源密集型任务，我发现它们通常每晚运行两次。我猜操作系统必须平衡手机上的所有进程和所有其他要求运行其后台任务的应用程序，所以有时你的应用程序并没有成功。显然，您的里程可能会因您的手机（在我的情况下为 lumia 800）和您安装的应用程序而异。

如果您想编写一个每分钟跟踪一次您的位置的应用程序，我的建议是通过[禁用空闲检测](http://msdn.microsoft.com/en-us/library/ff941090%28v=VS.92%29.aspx)使其能够在锁定屏幕下运行，并确保它具有较低的内存占用以延长电池寿命。

# php - PHP 正则表达式匹配以下字符串示例

> ID：10238782
> 
> 赞同：0
> 
> 时间：2012-04-20T00:39:26.197
> 
> 标签：php, regex, preg-match

我的主题看起来像这样：

```
[9] 20:30:40 [SUCCESS] s-a24:1337
2
8.87
4038047
35320
4002727
[10] 20:30:40 [SUCCESS] s-d28:1337
2
2.64
4038047
37363
4000684
[11] 20:30:40 [SUCCESS] s-b29:1337
2
0.56
4038047
33066
4004981
[66] 20:30:42 [FAILURE] s-b25:1337 Timed out, Killed by signal 9
2
1.16
4038047
35274
[67] 20:30:42 [FAILURE] s-b30:1337 Timed out, Killed by signal 9 
```

我需要创建一个匹配的多维数组

*   成功/失败
*   描述符（s-a24、s-d28 等）
*   后面的 5 行数字（可以是任意长度）

可能有 0 到 5 行（5 行是成功的）

我完全不擅长正则表达式

我开始的是这个，它不起作用。

```
preg_match_all("/\[[0-9]+\](.*?)\[[0-9]+\]/",$output,$array); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:05:00.320

我不确定一个简单的正则表达式是否适合这里，特别是考虑到每条记录的可变数据计数。

那么，如何拆分字符串呢？

通过在每个换行符后跟一个“[”拆分它并在每个换行符处拆分每个结果，您可以使用简单的正则表达式评估结果的每一行，并轻松添加数字数据（如果有）。

问候斯特凡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:15:14.793

这对我有用：

```
<?php

$str = '[9] 20:30:40 [SUCCESS] s-a24:1337
2
8.87
4038047
35320
4002727
[10] 20:30:40 [SUCCESS] s-d28:1337
2
2.64
4038047
37363
4000684
[11] 20:30:40 [SUCCESS] s-b29:1337
2
0.56
4038047
33066
4004981
[66] 20:30:42 [FAILURE] s-b25:1337 Timed out, Killed by signal 9
2
1.16
4038047
35274
[67] 20:30:42 [FAILURE] s-b30:1337 Timed out, Killed by signal 9';

preg_match_all("/^\[.*?\[(SUCCESS|FAILURE)\]\s(s\-\w\d{2}):1337.*?\n((.*\n){5})/m", $str, $matches, PREG_SET_ORDER);
//print_r($matches);
foreach ($matches as $match)
{
    echo $match[1] . "<br>\n";
    echo $match[2] . "<br>\n";
    echo $match[3] . "<br>\n";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T01:17:17.063

`(\[\d*\].*\[(SUCCESS|FAILURE)\]\s(s-.{3}).*(\r[\d\.]+){0,5})`

[http://regexr.com?30n45](http://regexr.com?30n45)

这个正则表达式应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T01:46:31.177

又快又脏，但尝试起来很有趣：

```
$success_pattern = '/\[(SUCCESS|FAILURE)\]/';
preg_match_all($success_pattern, $subject, $success_matches);

$descriptor_pattern = '/\[(SUCCESS|FAILURE)\]\s(.+?):/';
preg_match_all($descriptor_pattern, $subject, $descriptor_matches);

$numbers_pattern = '/\[.*?\n((\d+\.{0,1}\d*\n)+)/';
preg_match_all($numbers_pattern, $subject, $numbers_matches);

$output = array();
for($x = 0; $x < count($success_matches[0]); $x++) {
    $output[] = array(
        'success' => $success_matches[1][$x],
        'descriptor' => $descriptor_matches[2][$x],
        'numbers' => explode("\n", trim($numbers_matches[1][$x]))
    );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T09:22:45.520

怎么样：

```
$string = '[9] 20:30:40 [SUCCESS] s-a24:1337
2
8.87
4038047
35320
4002727
[10] 20:30:40 [SUCCESS] s-d28:1337
2
2.64
4038047
37363
4000684
[11] 20:30:40 [SUCCESS] s-b29:1337
2
0.56
4038047
33066
4004981
[66] 20:30:42 [FAILURE] s-b25:1337 Timed out, Killed by signal 9
2
1.16
4038047
35274
[67] 20:30:42 [FAILURE] s-b30:1337 Timed out, Killed by signal 9
';

preg_match_all("/\[.*?\[(SUCCESS|FAILURE)\]\s+([^:]+):[^\n]+\n(?:([^[]+?)\n)?(?:([^[]+?)\n)?(?:([^[]+?)\n)?(?:([^[]+?)\n)?(?:([^[]+?)\n)?/m", $string, $matches, PREG_SET_ORDER);
print_r($matches); 
```

**输出：**

```
Array
(
    [0] => Array
        (
            [0] => [9] 20:30:40 [SUCCESS] s-a24:1337
2
8.87
4038047
35320
4002727

            [1] => SUCCESS
            [2] => s-a24
            [3] => 2
            [4] => 8.87
            [5] => 4038047
            [6] => 35320
            [7] => 4002727
        )

    [1] => Array
        (
            [0] => [10] 20:30:40 [SUCCESS] s-d28:1337
2
2.64
4038047
37363
4000684

            [1] => SUCCESS
            [2] => s-d28
            [3] => 2
            [4] => 2.64
            [5] => 4038047
            [6] => 37363
            [7] => 4000684
        )

    [2] => Array
        (
            [0] => [11] 20:30:40 [SUCCESS] s-b29:1337
2
0.56
4038047
33066
4004981

            [1] => SUCCESS
            [2] => s-b29
            [3] => 2
            [4] => 0.56
            [5] => 4038047
            [6] => 33066
            [7] => 4004981
        )

    [3] => Array
        (
            [0] => [66] 20:30:42 [FAILURE] s-b25:1337 Timed out, Killed by signal 9
2
1.16
4038047
35274

            [1] => FAILURE
            [2] => s-b25
            [3] => 2
            [4] => 1.16
            [5] => 4038047
            [6] => 35274
        )

    [4] => Array
        (
            [0] => [67] 20:30:42 [FAILURE] s-b30:1337 Timed out, Killed by signal 9

            [1] => FAILURE
            [2] => s-b30
        )

) 
```

# macos - 自制 brew 医生失败消息

> ID：10238786
> 
> 赞同：9
> 
> 时间：2012-04-20T00:40:00.670
> 
> 标签：macos, homebrew

我正在查看我的家庭酿酒医生消息，无论我做什么，我似乎都无法删除此消息：

> 警告：您对 Homebrew 的核心进行了未提交的修改。
> 
> 除非您知道自己在做什么，否则您应该运行： `cd /usr/local && git reset --hard`

有谁知道如何摆脱这个？

从 git status /usr/local

```
#   Library/Aliases/dwarffortress
#   Library/Aliases/ultima4
#   Library/Aliases/ultima7
#   Library/Contributions/examples/
#   Library/Formula/abfind.rb
#   Library/Formula/abuse.rb
#   Library/Formula/akonadi.rb
#   Library/Formula/angband.rb
#   Library/Formula/apc.rb
#   Library/Formula/aqua-less.rb
#   Library/Formula/argp-standalone.rb
#   Library/Formula/attica.rb
#   Library/Formula/bashreduce.rb
#   Library/Formula/c10t.rb
#   Library/Formula/chocolate-doom.rb
#   Library/Formula/cmigemo.rb
#   Library/Formula/coffee-script.rb
#   Library/Formula/csstidy.rb
#   Library/Formula/dosbox.rb
#   Library/Formula/dotless.rb
#   Library/Formula/dwarf-fortress.rb
#   Library/Formula/exult.rb
#   Library/Formula/flip.rb
#   Library/Formula/frobtads.rb
#   Library/Formula/frotz.rb
#   Library/Formula/gearman-php.rb
#   Library/Formula/gnu-chess.rb
#   Library/Formula/gnu-go.rb
#   Library/Formula/growlme.rb
#   Library/Formula/imagick.rb
#   Library/Formula/inform6.rb
#   Library/Formula/jnethack.rb
#   Library/Formula/jwhois.rb
#   Library/Formula/kde-phonon.rb
#   Library/Formula/kdebase-runtime.rb
#   Library/Formula/kdelibs.rb
#   Library/Formula/kdepimlibs.rb
#   Library/Formula/libgdiplus.rb
#   Library/Formula/libiconv.rb
#   Library/Formula/libsgml.rb
#   Library/Formula/maatkit.rb
#   Library/Formula/mcrypt-php.rb
#   Library/Formula/mednafen.rb
#   Library/Formula/memcache-php.rb
#   Library/Formula/memcached-php.rb
#   Library/Formula/memcachedb.rb
#   Library/Formula/midgard2-php.rb
#   Library/Formula/mongo-php.rb
#   Library/Formula/n2n.rb
#   Library/Formula/nazghul.rb
#   Library/Formula/nethack.rb
#   Library/Formula/netris.rb
#   Library/Formula/ninja.rb
#   Library/Formula/open-tyrian.rb
#   Library/Formula/orderly.rb
#   Library/Formula/oxygen-icons.rb
#   Library/Formula/parsley.rb
#   Library/Formula/pbrt.rb
#   Library/Formula/pcntl-php.rb
#   Library/Formula/phpmyadmin.rb
#   Library/Formula/pioneers.rb
#   Library/Formula/platypus.rb
#   Library/Formula/pspell-php.rb
#   Library/Formula/qimageblitz.rb
#   Library/Formula/robotfindskitten.rb
#   Library/Formula/shared-desktop-ontologies.rb
#   Library/Formula/shen.rb
#   Library/Formula/slashem.rb
#   Library/Formula/solr-php.rb
#   Library/Formula/soprano.rb
#   Library/Formula/sparse.rb
#   Library/Formula/spim.rb
#   Library/Formula/stone-soup.rb
#   Library/Formula/strigi.rb
#   Library/Formula/uggconv.rb
#   Library/Formula/unnethack.rb
#   Library/Formula/voldemort.rb
#   Library/Formula/woof.rb
#   Library/Formula/xboard.rb
#   Library/Formula/xcache.rb
#   Library/Formula/xdebug.rb
#   Library/Formula/xmoto.rb
#   Library/Formula/xu4.rb
#   Library/Homebrew/test/tests 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-20T01:14:43.720

在自制问题日志[https://github.com/mxcl/homebrew/issues/11761](https://github.com/mxcl/homebrew/issues/11761)上发布后，我可以通过运行来清除错误`git clean -df`，一旦完成`brew doctor`。完成后，您应该会看到：

```
Your system is raring to brew. 
```

# ruby-on-rails - 如何在 Rails 3 中编写动态路由？

> ID：10238793
> 
> 赞同：3
> 
> 时间：2012-04-20T00:41:14.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我正在尝试编写一个通用路由，允许我通过控制器的操作来引用它。

我正在使用以下行：

```
 match ':action' => 'pages#:action', :as => 'action' 
```

假设页面控制器中有一个名为“foobar”的动作。我希望能够写作

```
link_to 'Click Me', pages_foobar_path 
```

在一个视图中。问题是`Invalid route name: ':action'`当我尝试编写该路线时出现错误。

请注意，线路

```
match ':action' => 'pages#:action' 
```

没有`:as`参数可以完美运行，但是我必须手动编写路径，如下所示：

```
link_to 'Click Me', '/pages/foobar' 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T18:38:29.943

**如果*动态*意味着“在 Rails 启动时识别我的操作并动态生成路由”：**

这不是我会做的事情，但它会做*你*想做的事，而不需要任何重定向或 method_missing 运行时开销。

在`config/routes.rb`

```
controller_filenames = Dir.new("#{Rails.root}/app/controllers").entries
controller_filenames.each do |filename|
  # you could restrict to only the pages_controller.rb on the next line,
  # and in that case, you could simplify even more (see next example)...
  if filename =~ /_controller\.rb$/
    controller_name = filename.sub(/.rb$/, "")
    controller_route_name = controller_name.sub(/_controller$/, "")
    controller = controller_name.camelize.constantize.new
    controller.action_methods.each do |action|
      # if you don't want the controller name in your path match, just omit it...
      match "#{controller_route_name}/#{action}" => "#{controller_route_name}##{action}", :as => "#{controller_route_name}_#{action}"
    end
  end
end 
```

如果您只想为 pages_controller.rb 文件执行此操作，则：

```
controller_name = "pages_controller"
controller_route_name = "pages"
controller = controller_name.camelize.constantize.new
controller.action_methods.each do |action|
  # I've removed the controller_route_name from the match here...
  match "#{action}" => "#{controller_route_name}##{action}", :as => "#{controller_route_name}_#{action}"
end 
```

**现在，如果*动态*意味着“每当我动态生成新动作时生成路由”**：

你真的可以玩火。您现有的任何操作都可以定义新的操作和路由。例如，我可以定义一个路由`config/routes.rb`（但这可以是*任何*现有的路由）：

```
match '/dynamic_define' => 'application#dynamic_define' 
```

将其与 in 中的方法相结合`ApplicationController`（同样，这可以是任何现有操作）：

```
def dynamic_define
  method_name = params[:mname]
  self.class.send(:define_method, method_name) {
    render :text => "output from #{method_name}"
  }
  Rails.application.routes.disable_clear_and_finalize = true
  Rails.application.routes.draw do
    match "/#{method_name}" => "application##{method_name}", :as => "application_#{method_name}"
  end
  render :text => "dynamic_define just created a new action named #{method_name}"
end 
```

在浏览器中，您可以访问：

```
/dynamic_define?mname=my_new_dynamic_action
# browser renders "dynamic_define just created a new action named my_new_dynamic_action" 
```

然后访问：

```
/my_new_dynamic_action
# browser renders "output from my_new_dynamic_action" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T04:46:27.820

我认为你可以做到：

```
link_to 'Click me', pages_path(:action) 
```

通过重定向

```
match ':action' => 'pages#:action'
match '/pages/:action' => redirect(":action") # pages_path(:action) will match 
```

这比第一个答案中建议的方法少打字，但如果有的话，似乎表达力较差。

我想您可以在视图类中覆盖 method_missing 以捕获 pages_[stuff]_path 并生成正确的字符串，例如

```
def method_missing(name, *args, &block)
  if name =~ /^pages_[a-z]*_path$/
    "/#{name.to_s.gsub!(/^pages_/,'').gsub!(/_path$/,'')}"
  else
    super
  end
end 
```

如果缺少我的 method_missing 知识或正则表达式功能，请原谅我 - 希望这至少在方向上有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:43:46.790

如果你这样写你的路线，访问它的正确方法是：

```
link_to 'Click me', action_path(:action => 'foobar') 
```

# xslt - XSLT 日期转换 - 数据格式更改

> ID：10238796
> 
> 赞同：2
> 
> 时间：2012-04-20T00:41:31.490
> 
> 标签：xslt

以某种可读格式在 HTML 中显示/输出日期的选项是什么。我的意思是，如果我只是显示 date_last_activity 的值，它看起来很奇怪：S 所以我的问题是 XSLT 是否提供任何日期格式转换？

XML:

```
<date_last_activity format="MMDDCCYY">04132012</date_last_activity> 
```

XLS 模板：

```
<xsl:value-of select="date_last_activity"/> 
```

HTML：

```
04132012 
```

宁愿它看起来像 2012 年 4 月 13 日...

我读了很多关于 XSLT 的文章，我想可以制作“模板”=> formatDate ...但不知道从哪里开始：S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T04:27:33.593

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="date_last_activity">
  <xsl:value-of select=
  "concat(
     substring(.,
               string-length(substring-before(@format, 'MM'))+1,
               2
               ),
     '/',
     substring(.,
               string-length(substring-before(@format, 'DD'))+1,
               2
               ),
     '/',
     substring(.,
               string-length(substring-before(@format, 'CCYY'))+1,
               4
               )

         )"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时：**

```
<date_last_activity format="MMDDCCYY">04132012</date_last_activity> 
```

**产生想要的正确结果：**

```
04/13/2012 
```

**当相同的转换应用于以下 XML 文档时：**

```
<date_last_activity format="CCYYDDMM">20121304</date_last_activity> 
```

产生相同的正确结果：

```
04/13/2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T00:55:33.310

如果您需要在多个地方执行此操作，请在 xsl 中的某处创建一个命名模板

**编辑**：由于格式错误，模板没有出现...

```
<xsl:template name="formats_date">
  <xsl:param name="raw_date" />
  <xsl:value-of select="concat( substring( $raw_date, 0, 2 ), '/', substring( $raw_date, 2, 2 ), '/', substring( $raw_date, 4 ) )" />
</xsl:template> 
```

然后将其应用为

```
<xsl:call-template name="formats_date">
    <xsl:with-param name="raw_date" select="date_last_activity" />
</xsl:call-template/> 
```

否则你可以直接在你需要的地方做 xsl:value-of concat... 的东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T07:44:57.320

XSLT 2.0 提供了函数 format-date()。但是，在使用它之前，您需要将日期转换为 ISO 格式 YYYY-MM-DD，这可以使用 concat 和 substring 来完成。

如果您仍然坚持使用 XSLT 1.0，那么 www.exslt.org 上提供了一个日期处理函数和模板库。

# maven - Jenkins 发布所有 Maven 项目的工作

> ID：10238797
> 
> 赞同：0
> 
> 时间：2012-04-20T00:41:45.173
> 
> 标签：maven, jenkins, release

只是好奇是否可以通过一个 Jenkins 工作构建发布所有 Maven 项目？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:41:42.183

您可以拥有一个额外的 POM，其中包含与您的工作相对应的模块。

与 ajozwik 向您提出的建议略有不同，因此我们可能需要更多信息来了解最适合您的需求。

# listview - 如何将 KendoUI ListView 中的选定项目绑定到我的 observable viewModel 的 selectedItem 属性？

> ID：10238802
> 
> 赞同：1
> 
> 时间：2012-04-20T00:44:16.093
> 
> 标签：listview, mvvm, kendo-ui

我有一个列表视图，可以这样说：

```
$("#items").kendoListView({
        dataSource: itemsSource,
        selectable: true,
        ...
        change: function () {
            var data = itemsSource.view(),
                selected = $.map(this.select(), function (item) {
                    return data[$(item).index()];
                });
        }
}); 
```

然后，我有我的 ViewModel：

```
var viewModel = kendo.observable({
        items: activitiesSource,
        itemTitle: selected.Title,
        itemDescription: "",
        selectedItem: null,
        ...
        hasChanges: false,
        change: function () {
            this.set("hasChanges", true);
        }
}); 
```

我有我的 html 代码，比方说：

```
<ul id="items" data-bind="source: items, value: selectedItem"></ul> 
```

我希望，当在我的 ListView 中选择一个项目时，能够编辑表单中的选定项目。如果我这样做，在 ListView 更改事件中：

```
viewModel.set("selectedActivity", selected); 
```

它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:18:55.713

这可能只是您的复制/粘贴错误，但您的行：

```
viewModel.set("selectedActivity", selected); 
```

`viewModel`没有属性，`selectedActivity`而是命名`selectedItem`。

我假设有另一个小部件或一组 html 控件绑定到`viewModel.selectedItem`此处未显示的？

# ruby - 红宝石中的UDPSocket

> ID：10238804
> 
> 赞同：3
> 
> 时间：2012-04-20T00:44:33.577
> 
> 标签：ruby, sockets, udp

我是 ruby​​ 新手，并遵循“The Ruby Programming Language”一书，我正在尝试学习 ruby​​ 中的一些 Socket，以下是我的简单服务器/客户端：

```
## server

require 'socket'

server= UDPSocket.new
server.bind('localhost', 3000)
loop do
    data,address=server.recvfrom(1024)
    server.send(data.reverse,0,address[3],address[1])  ############ My problem #########
    puts "get #{data} from #{address[3]}"
end 
```

* * *

```
##client
require 'socket'

ds = UDPSocket.new
#ds.connect('localhost', 3000)
while line=gets
    ds.send(line.chomp, 0,'localhost', 3000)
    response,address = ds.recvfrom(1024)
    puts response
end 
```

注意线

```
server.send(data.reverse,0,address[3],address[1]) 
```

如果我评论这一行，似乎服务器将保持，不再响应客户端。

我想知道为什么？

这是否意味着UDPSocket必须对客户端进行一些响应才能继续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:57:08.483

因为你在服务器端写recvfrom，如果你注释这个，它不会阻塞，它会继续向客户端发送数据。然而，在实际情况下，通信的对等方应该交换信息。

# ruby-on-rails - Amazon s3/Cloudfront Ruby on rails 视频流

> ID：10238810
> 
> 赞同：3
> 
> 时间：2012-04-20T00:45:22.297
> 
> 标签：ruby-on-rails, ruby, amazon-s3, amazon-cloudfront

我正在构建一个 ruby​​ on rails 网站，用于存储和流式传输视频。我正在使用carrierwave 和amazon s3 上传和存储视频。如果我没记错的话，我可以将文件直接从 s3 流式传输到我的网站。
那么任何人都可以解释为什么似乎每个人都使用 cloudfront 和 s3。有什么好处？
这种存储/服务解决方案的平均成本是多少。我将通过 html5 流式传输视频，因此我不会关注编码解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T00:50:07.430

CloudFront 的主要优势在于它是一个 CDN。因此，内容的位置更靠近您的客户，而不仅仅是在亚马逊的主要数据存储中。您可以使用带或不带 S3 的 CloudFront。它有一个起源的概念，它基本上是您的内容的主服务器。该主服务器可以是 S3 或非 Amazon 服务器。

对于定价，您应该查看 CloudFront[定价详细信息](http://aws.amazon.com/cloudfront/pricing/)，以及可选的[S3](http://aws.amazon.com/s3/pricing/)定价（如果您将其用作来源）。

您可以使用[计算器](http://calculator.s3.amazonaws.com/calc5.html)估算实际成本。如果您需要帮助，请告诉我们。

# ruby-on-rails - 在 Rails 应用程序中的用户名路由中允许下划线

> ID：10238812
> 
> 赞同：0
> 
> 时间：2012-04-20T00:46:23.683
> 
> 标签：ruby-on-rails, regex

只是想知道如何编辑我的路由文件以允许路由带有下划线字符“_”的用户名。以下是相关代码：

```
controller :users do
 match ':id' => :show, :via => :get, :constraints => { :id => /[A-Za-z0-9\-\+]+/ }
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:49:48.770

更新您的正则表达式以添加`_`如下：

```
/[A-Za-z0-9\-\_\+]+/ 
```

完成`match`后将如下所示：

```
match ':id' => :show, :via => :get, :constraints => { :id => /[A-Za-z0-9\-\_\+]+/ } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T12:57:11.317

构造`A-Za-z0-9\_`与`\w`. 所以我们可以使用更短的版本：

```
/[\w\-\+]+/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T04:13:44.727

我认为这个正则表达式模式不会忽略这个测试字符串：

```
XXXX XXXXX 
```

它在字符串之间有空格。如果您更新此正则表达式模式，它将忽略该测试字符串：

```
controller :users do
  match ':id' => :show, :via => :get, :constraints => { :id => /^[\w\-\+]+$/ }
end 
```

# jquery - CSS 菜单和 JQuery

> ID：10238813
> 
> 赞同：3
> 
> 时间：2012-04-20T00:46:23.967
> 
> 标签：jquery, css, menu

这是我第一次在论坛发帖。必要时指导我

我正在尝试为基本网页编辑（使用 Wordpress）设置模板，并且在菜单方面遇到了很多麻烦。该网站在这里： http: [//munchkingraphicdesign-uat.com/devsite/](http://munchkingraphicdesign-uat.com/devsite/)

我最终设法设置了一个似乎工作正常的纯 CSS 菜单（3 级），尽管我无法控制浮动（子菜单总是垂直浮动，无论我进行什么更改，我都无法让它们水平浮动）。在有人问我为什么要这样做之前 - 这是为了测试我自己和代码以查看它是否设置正确。没有完全做到这一点。

然后我忽略了这一点并继续查看是否可以通过 jQuery 为它添加一些效果。我正确地初始化了 jQuery 并添加了一些我认为可以让我滑动下拉的代码。

在 Chrome 中似乎没问题 - 但第 3 级不会滑动，因此我认为会依赖 CSS。在 Internet Explorer 8 中，当我移动到第 2 级下拉菜单时会出现闪烁，并且第 3 级从零高度上下弹跳到完全。

我什至无法在我的本地站点上复制它。它在那里根本行不通。

任何善良的灵魂可以给我任何指示吗？也许我想在我能走路之前跑步，但我担心我什至没有掌握 CSS 代码的基础知识。

很抱歉，但也有一些注释掉的代码，因为我正在努力学习。那些在他们之后有 _NULL 的人添加了这个以使 jquery 能够正常工作，因为 _NULL 意味着 html 不再引用它们。

这段代码怎么能更好，我怎样才能用 jQuery 将良好的下拉菜单提升到三个级别？

非常感谢

下面是 jQuery，但 css 也是正确的关键

```
<script type="text/javascript">
    jQuery(document).ready(function($) {/*normally loads in noconflickmode, so have to use this line to be able to use the $ sign*/
        ($("#menubar ul li").hover(function(){
            $(this).addClass("hover");
            $('ul:first',this).slideDown(400);
        },
        function(){
            $(this).removeClass("hover");
            $('ul:first',this).slideUp(400);
        });
        $("#menubar ul li ul li:has(ul)").find("a:first").append(" &raquo; ");
    });
</script> 
```

所以CSS是

```
#menubar-outer { /*container box with no colour. Used to position inner div*/
    background-color: #D5CBA7;
    position: relative;/*Needs to be explicitly set for z-index*/
    z-index: 50;/*Needed for IE7*/
    width: 100%;
    margin: 0 0 0px 0;/*Use lower margin for lower line tab effect. Use a negative offset on left to align*/
    padding: 0;
    text-align: left;/*CONTROLS overall position of menu. Right, left or center*/
    /*border-bottom: 1px solid #c0c0c0;*/
}
#menubar { /*inner container box..Sets space and fonts*/
    /*background-color:blue;*/
    display: inline-block;
    position: relative;
    z-index: 50;
    margin: 0 0 0px 0px;/*for space around the menu first row*/
    padding: 0;
    font-size: 1em;
    text-transform: uppercase;
    vertical-align: bottom;/*needed to remove automatic inline-block additional 5px margin*/    /*border: 1px solid black;*/
}
#menubar a {/*The element containing the words*/
    /*background-color: #dbdbdb; *//*color of main menu*/
    display: block; /*using block rather than inline makes entire block, not just the text clickable*/
    /*height: 15px;*//*CONTROLS height of menu item on first row together with "li li a" which controls for subsequent rows*/
    padding: 10px 15px; /*space around the menu items*/
    line-height: 15px;/*spacing between lines on same menu item*/
    text-align: left;/*CONTROLS centred menu items or left/right aligned. "a" element used rather than li which doesn't work in IE7\. Affects drop downs so important*/
}

#menubar li li a {  /*Second and third level rows. */
    /*height: 30px;*/    /*Needed for styling different height on first row*/
    /*padding: 7px 6px;*//*Needed for styling different padding than first row*/
    /*background-color: #D5CBA7;*//*CONTROLS filled background color for dropdowns. Important because above active page highlights will override otherwise*/
}
#menubar li:first-child {
    border-left: none;/*accompanies divider&box line aboves. Use "none" if you are using seperators and add in e.g. "1px solid #c0c0c0"" if borders*/
}
#menubar li { /* fixes dimensions of all level menu elements. Turns menu into horizontal*/
    float: left;/*makes the menu horizontal. Needed above in "a" for ie6 but causes compatibility probs*/
    position: relative;/*need this to ensure that the following div can be absolutely positioned*/    /*width: 130px;*/ /*CONTROLS first row menu item spacing. Width needed for li rather than "a" to work in ie7*/
    margin: 0 0px 0 0;/*THIS creates gaps between items*/
    /*border-top: 1px solid #c0c0c0;
     border-right: 1px solid #c0c0c0;
     border-bottom: 1px solid #c0c0c0;/*Use border top right and bottom only if you want surrounding boxes*/
    border-left: 2px solid #ffffff;/*Use by itself  if you want dividers, together with above if seperated boxes or"none" for joined boxes (each box uses the folowing box's right border except the first child)*/
    /*border-radius: 4px 4px 0px 0px;
     -moz-border-radius: 4px 4px 0px 0px;
     -khtml-border-radius: 4px 4px 0px 0px;
     -webkit-border-radius: 4px 4px 0px 0px;*/
}
#menubar li:last-child {
    border-right: 2px solid #ffffff;/*accompanies divider&box line aboves. Use "none" if you are using seperators and add in e.g. "1px solid #c0c0c0"" if borders*/
}
#menubar ul ul li:last-child {
    border-right: 2px solid #ffffff;/*accompanies divider&box line aboves. Use "none" if you are using seperators and add in e.g. "1px solid #c0c0c0"" if borders*/
}
#menubar ul ul li:first-child {
    border-top: 2px solid #ffffff;/*If boxes used on dropdown. Used to override border-top none below "li li"*/
    border-left: 2px solid #ffffff;/*If boxes used on dropdown. Use to override "li:first-child" on the previous level dropdown*/
}
#menubar ul ul li {/*Dropdown items*/
    background-color: #D5CBA7;/*KEEP as background color needed fir IE6 to select over another div*/
    left: -2px;/*CONTROLS for border. 0 if no border. -1px if border is 1px. Adjust together with "li" above, "li:first-child" above, "border" below on this ID and "top" and "left" on "ul ul li:hover ul"*/
    width: 130px;/*needed to make the whole line selectable*/
    margin: 0;/*Needed to reset dropdowns if margin used on first level*/
    border-top: none;
    border-right: 2px solid #ffffff;
    border-bottom: 2px solid #ffffff;
    border-left: 2px solid #ffffff;/*Use border right, bottom and left only if you want surrounding boxes. Also adjust "left" in this same ID (border top is "none")*/    /*border-left: none;/*Use "border-left:none" only  if you want dividers and for them to be removed on every sublevel*/
    /*border-radius: 0px 0px 0px 0px;
     -moz-border-radius: 0px 0px 0px 0px;
     -khtml-border-radius: 0px 0px 0px 0px;
     -webkit-border-radius: 0px 0px 0px 0px;*/
}
#menubar ul ul, #menubar ul li:hover ul ul {  /* Hide all the dropdowns (submenus)  */
    display: none;
    /*visibility:hidden;*/
    position: absolute;/*absolute means that it is absolutely positioned to the 'relative' div before it*/
    left: 0px;/*needed for IE7*/
    z-index: 60;/*for hovering over itself*/
    width: 130px; /*CONTROLS width of colored background in dropdown levels. Needed to float left*/
}
#menubar ul li:hover ul_NULL {/*Second level submenus. Container box that the li's sit within and on top of. Displays when li are hovered on*/
    /*background-color:red;*/
    display: block;
}
#menubar ul ul li:hover ul {/*third level submenus.  Container box that the li's sit within and on top of. Displays when li are hovered on*/
    /*background-color:red;*/
    display:block;
    position: absolute;/*absolute means that it is absolutely positioned to the 'relative' div before it*/
    top: -2px;  /*CONTROLS for border. 0 positions at the top with no border or -1 for border*/
    left: 132px;/*CONTROLS width. Match to "li" if width given + BORDER + 1 BORDER. 100% positions 1 col over to right, incl margin.*/
    z-index: 60;/*for hovering over itself*/
    width: 130px; /*CONTROLS width of colored background in dropdown levels. Needed to float left*/
}
#menubar ul ul li:hover ul_NULL {/*third level submenus.  Container box that the li's sit within and on top of. Displays when li are hovered on*/
    /*background-color:red;*/
    display: block;
} 
```

最后是html

```
<div id="menubar-outer">
    <span id="menubar" class="linkclass-mainmenu">
        <!--span needs to be used for ie7 to be able to use text-align on variable width-->
        <div class="menu">
            <ul>
                <li class="page_item page-item-21">
                    <a href="http://munchkingraphicdesign-uat.com/devsite/adventures-of-huckleberry-finn/">
                        Adventures of Huckleberry Finn
                    </a>
                    <ul class='children'>
                        <li class="page_item page-item-23">
                            <a href="http://munchkingraphicdesign-uat.com/devsite/adventures-of-huckleberry-finn/conflict-between-civilization-and-natural-life/">
                                Conflict between civilization and natural life
                            </a>
                            <ul class='children'>
                                <li class="page_item page-item-22">
                                    <a href="http://munchkingraphicdesign-uat.com/devsite/adventures-of-huckleberry-finn/conflict-between-civilization-and-natural-life/the-adventures-of-tom-sawyer/">
                                        The Adventures of Tom Sawyer
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="page_item page-item-24">
                            <a href="http://munchkingraphicdesign-uat.com/devsite/adventures-of-huckleberry-finn/intellectual-and-moral-education/">
                                Intellectual and Moral Education
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="page_item page-item-31">
                    <a href="http://munchkingraphicdesign-uat.com/devsite/contact-us/">
                        Contact Us
                    </a>
                </li>
                <li class="page_item page-item-9">
                    <a href="http://munchkingraphicdesign-uat.com/devsite/duke-and-the-king/">
                        Duke and the King
                    </a>
                    <ul class='children'><li class="page_item page-item-10">
                    <a href="http://munchkingraphicdesign-uat.com/devsite/duke-and-the-king/conflict-between-civilization-and-natural-life/">
                        Conflict between civilization and natural life
                    </a>
                    </li>
                        <li class="page_item page-item-12">
                            <a href="http://munchkingraphicdesign-uat.com/devsite/duke-and-the-king/parodies-of-popular-romance-novels/">
                                Parodies of Popular Romance Novels
                            </a>
                        </li>
                        <li class="page_item page-item-11">
                            <a href="http://munchkingraphicdesign-uat.com/devsite/duke-and-the-king/the-hypocrisy-of-civilized-society/">
                                The Hypocrisy of Civilized Society
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="page_item page-item-17">
                    <a href="http://munchkingraphicdesign-uat.com/devsite/jims-escape/">
                        Jim&#8217;s escape
                    </a>
                    <ul class='children'>
                        <li class="page_item page-item-18">
                            <a href="http://munchkingraphicdesign-uat.com/devsite/jims-escape/childhood/">
                                Childhood
                            </a>
                        </li>
                        <li class="page_item page-item-19">
                            <a href="http://munchkingraphicdesign-uat.com/devsite/jims-escape/conflict-between-civilization-and-natural-life/">
                                Conflict between civilization and natural life
                            </a>
                        </li>
                        <li class="page_item page-item-20">
                            <a href="http://munchkingraphicdesign-uat.com/devsite/jims-escape/reception/">
                                Reception
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="page_item page-item-5">
                    <a href="http://munchkingraphicdesign-uat.com/devsite/mockery-of-religion/">
                        Mockery of Religion
                    </a>
                    <ul class='children'>
                        <li class="page_item page-item-8">
                            <a href="http://munchkingraphicdesign-uat.com/devsite/mockery-of-religion/duke-and-the-king/">
                                Duke and the King
                            </a>
                        </li>
                        <li class="page_item page-item-6">
                            <a href="http://munchkingraphicdesign-uat.com/devsite/mockery-of-religion/jims-escape/">
                                Jim&#8217;s escape
                            </a>
                        </li>
                        <li class="page_item page-item-7">
                            <a href="http://munchkingraphicdesign-uat.com/devsite/mockery-of-religion/life-in-st-petersburg/">
                                Life in St. Petersburg
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </span><!-- end #menubar -->
    <div class="clearfix">

    </div><!--Used when floating. Clearfix comes before closing div of non-floated element-->
</div><!--end #menubar-outer--> 
```

# [jsFiddle](http://jsfiddle.net/L7e5U/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:38:27.443

这是您的菜单的[**修改 jsFiddle**](http://jsfiddle.net/neo108/XCGGB/) - 在 CSS 中具有工作的 3 级下拉菜单。

我已经在 Chrome、Firefox 和 IE 中对其进行了测试，并且运行良好。

希望它可以帮助你。相同的代码如下...

**CSS**

```
#menubar-outer { 
    background-color: #D5CBA7;
    width: 100%;
    margin: 0;
    padding: 0;
    text-align: left;
}
#menubar { 
    display: inline-block;
    position: relative;
    z-index: 50;
    margin: 0;
    padding: 0;
    font-size: 1em;
    text-transform: uppercase;
    vertical-align: bottom;
}
#nav {
    margin: 0 auto;
    padding: 7px 6px 0;
    line-height: 100%;
}
#nav li {
    margin: 0 5px;
    padding: 0 0 8px;
    float: left;
    position: relative;
    list-style: none;
}

/* main level link */
#nav a {
    font-weight: bold;
    color: #000;
    text-decoration: none;
    display: block;
    padding:  8px 20px;
    margin: 0;
}

/* main level link hover */
#nav .current a, #nav li:hover > a {
    background: #D5CBA7;
    color: #000;
}

/* sub levels link hover */
#nav li a {
    background: #D5CBA7;
    border: none;
}

#nav li a:hover {
    color: #fff;
    background: #AE953C;
}

/* dropdown */
#nav li:hover > ul {
    display: block;
}

/* level 2 list */
#nav ul {
    display: none;
    margin: 0;
    padding: 0;
    width: 185px;
    position: absolute;
}
#nav ul li {
    float: none;
    margin: 0;
    padding: 0;
}

#nav ul a {
    font-weight: normal;
    font-color: #000;
}

/* level 3+ list */
#nav ul ul {
    left: 181px;
    top: -3px;
}

#nav {
    display: inline-block;
} 
```

**HTML**

```
<div id="menubar-outer">
    <span id="menubar" class="linkclass-mainmenu">
        <!--span needs to be used for ie7 to be able to use text-align on variable width-->
        <div class="menu">
            <ul id="nav">
            <li class="current"><a href="http://www.webdesignerwall.com">Home</a></li>
            <li><a href="http://www.ndesign-studio.com">My Projects</a>
                <ul>
                    <li><a href="http://www.ndesign-studio.com">N.Design Studio</a>
                        <ul>
                            <li><a href="http://www.ndesign-studio.com/portfolio">Portfolio</a></li>
                            <li><a href="http://www.ndesign-studio.com/wp-themes">WordPress Themes</a></li>
                            <li><a href="http://www.ndesign-studio.com/wallpapers">Wallpapers</a></li>
                            <li><a href="http://www.ndesign-studio.com/tutorials">Illustrator Tutorials</a></li>
                        </ul>
                    </li>
                    <li><a href="http://www.webdesignerwall.com">Web Designer Wall</a>
                        <ul>
                            <li><a href="http://jobs.webdesignerwall.com">Design Job Wall</a></li>
                        </ul>
                    </li>
                    <li><a href="http://icondock.com">IconDock</a></li>
                    <li><a href="http://bestwebgallery.com">Best Web Gallery</a></li>
                </ul>
            </li>
            <li><a href="#">Multi-Levels</a>
                <ul>
                    <li><a href="#">Team</a>
                        <ul>
                            <li><a href="#">Sub-Level Item</a></li>
                            <li><a href="#">Sub-Level Item</a>
                                <ul>
                                    <li><a href="#">Sub-Level Item</a></li>
                                    <li><a href="#">Sub-Level Item</a></li>
                                    <li><a href="#">Sub-Level Item</a></li>
                                </ul>
                            </li>

                            <li><a href="#">Sub-Level Item</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Sales</a></li>
                    <li><a href="#">Another Link</a></li>
                    <li><a href="#">Department</a>
                        <ul>
                            <li><a href="#">Sub-Level Item</a></li>
                            <li><a href="#">Sub-Level Item</a></li>
                            <li><a href="#">Sub-Level Item</a></li>
                        </ul>
                    </li>
                </ul>
            </li>   
            <li><a href="#">About</a></li>
            <li><a href="#">Contact Us</a></li>
            </ul>
        </div>
    </span><!-- end #menubar -->
    <div class="clearfix">

    </div><!--Used when floating. Clearfix comes before closing div of non-floated element-->
</div><!--end #menubar-outer--> 
```

# wordpress - Wordpress 自定义仪表板字段

> ID：10238820
> 
> 赞同：0
> 
> 时间：2012-04-20T00:47:03.920
> 
> 标签：wordpress

我即将使用谷歌地图 api 来处理一些非常具体的谷歌地图位置信息，所以我需要做的第一件事就是允许我网站的用户将位置添加到位置页面的后端。

我制作了一个快速模型来向您展示我在这里所追求的：http: [//benjaminpotter.org/app.png](http://benjaminpotter.org/app.png)

您知道一个自定义字段插件，它允许用户向框中添加更多字段吗？即“添加新位置”按钮添加新的输入字段行？

现在我会使用 MapPress，但我需要启用搜索功能，而 Mappress 不允许这样做。所以我必须自己做。

我希望这很清楚 - 感谢您在这方面的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:36:12.940

使用[RW_Meta_Box 库](https://github.com/rilwis/meta-box)：它为自定义元框提供了数十种不同的字段类型。

如果您打算用它制作仪表板小部件：它将无法工作，因为它绑定到 post-new.php 和 post-edit.php 屏幕。

# html - CSS 类和后代选择器实践

> ID：10238826
> 
> 赞同：8
> 
> 时间：2012-04-20T00:48:37.667
> 
> 标签：html, css-selectors, css

我想更好地理解何时使用类来定位内容而不是其他可用选项，特别是后代选择器。

在许多情况下，可以使用后代选择器来定位相同的元素，而不是使用类。如果可以通过两种方式完成相同的事情，那么决定选项之间的逻辑是什么？

以下是一些示例场景：

1.

一种。

```
<div class="main">
     <div>
         <div> /* target */
             <div></div>
         </div>
     </div>
</div>

.main > div > div 
```

湾。

```
<div class="main">
     <div>
         <div class="content">
             <div></div>
         </div>
     </div>
</div>

.content 
```

2.

一种。

```
<div class="main">
     <div> /* target */
        <div></div>
     </div>
     <div> /* target */
        <div></div>
     </div>
</div>

.main > div:first-child
.main > div:last-child 
```

湾。

```
<div class="main">
     <div class="content1">
        <div></div>
     </div>
     <div class="content2">
        <div></div>
     </div>
</div>

.content1
.content2 
```

3.

一种。

```
<div class="main">
     <div>
         <div></div>
         <div></div>
         <div></div>
     </div>
</div>

.main > div div 
```

湾。

```
<div class="main">
     <div class="content">
         <div></div>
         <div></div>
         <div></div>
     </div>
</div>

.content div 
```

决定使用类或后代选择器之间的逻辑是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T02:56:23.843

让对话从正确的角度开始结帐[什么是好的 CSS 策略？](https://stackoverflow.com/questions/327382/what-is-a-good-css-strategy). 就个人而言，我认为@gregnostic 的策略应该重命名为域。

在我看来，每个拥有十几个网页的项目确实需要根据其范围在一定程度上实现各个领域。

这里的*域*是（按特异性排序）：

## 重置

尝试跨浏览器和环境条件实现基线。[埃里克·迈耶 ( Eric Meyer)](http://meyerweb.com/eric/tools/css/reset/)出名。很多人跳过这个作为一个已解决的问题，但作为一个在页面内容管理系统上工作的人，相信我 CSS 重置很重要，并且可能是一个优雅地解决的具有挑战性的问题（尤其是如果客户使用相同的像你一样的主题库）。

这些选择器应尽可能通用。基于 CSS 类的选择通常没有任何意义，除非有时*需要*在给定的 shell 中重置。

## 布局

潜在的页面结构，通常由某种网格系统处理。这些应该更具体一些，但应该依赖于某种递归模式。就像是：

```
.row {
    width: 100%;
    min-height: 30px;
} 

.row .col {
    width: 100%;
}

    .row.two .col {
        width: 50%;
    } 
```

虽然这可以通过标签选择来完成，但我发现对于下一个人来说几乎从来都不是直观的，而且你总是会`grid`神奇地出现在错误的地方。使用类有助于保持**垃圾抽屉**^(TM)更小。有关全面实施，请参阅：

*   960[网格系统](http://960.gs/)
*   [推特引导](http://twitter.github.com/bootstrap/scaffolding.html)
*   [柱状](http://www.columnal.com/)
*   其他很多。

## 组件/功能

我倾向于对这些非常具体。我最喜欢的模式之一是[Stubornella 的 OOCSS](https://github.com/stubbornella)。基本概念是，为了最大限度地减少重复代码，您将属性捆绑在各种 CSS 选择器中，并尽最大努力使它们一起发挥作用。一个简单的例子是[Twitter Bootstrap](http://twitter.github.com/bootstrap/base-css.html#buttons)的按钮。

虽然您可能可以在这里捏造子选择器，但我强烈建议您不要这样做，因为有人第一次想要更改：

```
<button type="button"></button> 
```

到：

```
<button type="button">
    <span class="ugly-orange-bordered-purple-thing">
        My Button
    </span>       
</button> 
```

过于笼统：

```
button {
    border: 99em purple dotted;
} 
```

将与以下内容完全冲突：

```
.ugly-orange-bordered-purple-thing {
    border: 5em orange dashed;
    background-color: purple;
} 
```

但是，如果您更改`button`为`.btn`then 您可以简单地将其移动到跨度或停止。

## 排版

在给定条件下处理各种字体的适当显示。我总是尽可能地处理这个元素选择器。我通常用以下方式开始它：

```
h1, h2, h3, h4, h5, h6 {
    font-family: sans-serif;
}

p, span, a, ... {
    font-family: serif; /* Or whatever. */
}

h1 {
    font-size: 2em;
}

h2 {
    font-size: 1.8em;
}

... 

.row h2 {
    font-size: 1.6em;
} 
```

根据客户的需要，我什至可以在按钮内添加跨度规则。

## 主题

就像**排版**领域一样，我更倾向于在这个领域进行标签选择。主题几乎按照定义被丢弃（因为例如，[塔可钟](http://www.tacobell.com/)和[麦当劳](http://www.mcdonalds.com/us/en/home.html)不想拥有相同的主题）。

Dojo 工具包有一些很好的例子，它们将主题设置为一个单独的层（checkout [nihilo](http://svn.dojotoolkit.org/src/dijit/trunk/themes/nihilo/)）。他们倾向于这里的类，但这主要是为了可重用性，我已经讨论过。

## 垃圾抽屉

CSS 的垃圾抽屉，希望大部分都包含在里面`<!--[if lt IE 9]>`，但是每个项目都有这些，它们应该放在最后。保持这个空白是一个优先事项，但它不如完成工作重要（我一直试图提醒自己）。

我使这些非常具体，因为您最不想做的就是更改规则，例如：

```
div div {
    white-space: nowrap;
} 
```

在一个几乎完整的网站上。只要有可能，我就把它们放在工作场所友好的“遗留”区域。

## 结束语

*   当我进行包含 CSS 的代码审查时，**垃圾抽屉**是我唯一希望看到没有很好解释的 id 的地方。
*   像所有其他代码一样，始终尝试遵循周围代码的模式（除非它让你流血）。
*   **如果我错过了什么，请告诉我**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T01:15:44.500

后代选择器允许您避免在 html 中嵌入类信息。当包装块是逻辑容器时，这可能很方便。例如，如果您已经使用标签构建了一个表格并且您有数百或数千行，您可以通过指定后代样式而不是重复`div`指定来潜在地减小文档大小并提高可读性。`class='...'`

```
 <div class='mytable'>
    <div></div>
    <div></div>
    <!-- A LOT MORE ROWS -->
  </div> 
```

指定一个类的好处是您不受特定顺序的约束。每次要重新排列视图时都必须更改后代标签可能会非常令人沮丧。指定类的另一个好处是，在使用 CSS 时，搜索特定的类名比破译你的后代块要容易得多。

据我所知，就每个合适的情况而言，没有黑白指南。使用您自己的判断力，并在设计时考虑每种方法的优点/缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T01:02:53.523

这一切都取决于您的标记的其余部分。考虑您的`1.a`示例的这个修改版本：

```
<div class="main">
     <div>
         <div> /* target */
             <div></div>
         </div>
     </div>
     <div>
         <div> /* target? */
             <div></div>
         </div>
     </div>
</div> 
```

选择器`.main > div > div`会选择两个 div，这可能是也可能不是您想要的。因此，有时您必须更具体，将类和 ID 添加到标记中，并相应地调整选择器。

有多种方法可以使用 CSS 选择相同的元素，而不仅仅是一种“正确”的方式。通常不建议过于具体，但过于笼统的选择器也会导致问题。你必须找到一个平衡点，你只有通过练习才能达到，没有秘诀。

# java - Netty - 写入时缓冲响应

> ID：10238830
> 
> 赞同：0
> 
> 时间：2012-04-20T00:48:46.573
> 
> 标签：java, linux, netty

我在 Netty 上有一个应用程序，我设置`tcpNoDelay`为 true（对于服务器和“子”套接字）。当我使用（N 禁用客户端缓冲区）“卷曲”到我的服务器`-vN`，然后慢慢将数据写入通道时，没有任何东西传播到客户端，直到达到某个缓冲区限制，然后它被推送到客户端。我应该注意我正在写回分块数据（因此客户端保持连接直到我们关闭它）。

我使用 Wireshark 确保在达到缓冲区限制之前我没有收到任何东西发送到客户端，然后我看到一堆 TCP 数据包涌向客户端。

理想情况下，这应该是平滑的。奇怪的是，我在本地机器上运行的实例（Mac OS X Lion，Java 1.6.0_31）不会发生这种情况。仅在 Ubuntu、Java 1.6.0_20 的服务器上出现。我无法想象从 _20 到 _31 的轻微版本不匹配是原因。

正在设置的服务器选项：

```
nioStreamBootstrap.setOption("child.tcpNoDelay", true);
nioStreamBootstrap.setOption("child.keepAlive", true);
nioStreamBootstrap.setOption("tcpNoDelay", true); 
```

客户“卷曲”：

```
curl -vN http://my.remote.server/some/path 
```

我的日志显示了对客户端通道的写入：

```
--- Message received from downstream
--- Writing message upstream
--- Message received from upstream
--- Writing message downstream 
```

（请注意，“向下游写入消息”调用紧接在`channel.write(obj)`调用之前）

所以我不确定它是与操作系统相关、与 Java 相关还是与 Netty 相关。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:06:12.423

似乎是 Ubuntu 服务器问题。无法在 CentOS 或 Mac OS X 上复制问题。

# java - 在 Java FX 2.0 中滚动锚定节点时始终可见？

> ID：10238834
> 
> 赞同：0
> 
> 时间：2012-04-20T00:48:52.343
> 
> 标签：java, anchor, javafx-2, scrollpane

我想让一个节点出现在 ScrollPane 中，锚定在顶部（固定在 Y 轴上），但能够在 X 轴上滚动。（在 Java-FX 2.0 中）

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:03:03.037

您可以使用绑定来根据滚动条位置调整此特殊对象的位置，请参见下一个代码：

```
public class FancyScrollPane extends Application {

    @Override
    public void start(Stage primaryStage) {
        ScrollPane scrollPane = new ScrollPane();
        Pane content = new Pane();
        scrollPane.setContent(content);

        // adding background
        content.getChildren().add(new Rectangle(500, 500, Color.GREEN));

        Circle immovableObject = new Circle(30, Color.RED);
        content.getChildren().add(immovableObject);

        primaryStage.setScene(new Scene(scrollPane, 300, 300));
        primaryStage.show();

        // here we bind circle Y position
        immovableObject.layoutYProperty().bind(
                // to vertical scroll shift (which ranges from 0 to 1)
                scrollPane.vvalueProperty()
                    // multiplied by (scrollableAreaHeight - visibleViewportHeight)
                    .multiply(
                        content.heightProperty()
                            .subtract(
                                new ScrollPaneViewPortHeightBinding(scrollPane))));
    }

    // we need this class because Bounds object doesn't support binding 
    private static class ScrollPaneViewPortHeightBinding extends DoubleBinding {

        private final ScrollPane root;

        public ScrollPaneViewPortHeightBinding(ScrollPane root) {
            this.root = root;
            super.bind(root.viewportBoundsProperty());
        }

        @Override
        protected double computeValue() {
            return root.getViewportBounds().getHeight();
        }
    }

    public static void main(String[] args) { launch(); }
} 
```

# javascript - 在移动设备上移动的元素

> ID：10238837
> 
> 赞同：0
> 
> 时间：2012-04-20T00:49:08.817
> 
> 标签：javascript, jquery, html, css

我一整天都在用这个把头发扯下来，所以欢迎任何帮助/建议！

基本上，我的新项目使用检测移动浏览器脚本来检查用户是否在移动设备上，如果是，则禁用普通样式表并启用移动样式表。

我已经设法解决了它的大部分问题，但由于某种原因，我在其中一个部分中的内容滑块有问题，每张幻灯片中有两个内联元素，一个向左浮动（文本），一个向右浮动（图片）。由于某种原因，当单击第二张幻灯片时，图像会向下移动到文本下方。如果没有空间，通常会发生这种情况，但情况并非如此，因为两个元素都有足够的空间。

这只发生在移动设备上，所以你实际上可以通过访问[http://beta.residencyradio.com](http://beta.residencyradio.com)并转到功能部分来了解我的意思，我正在使用的当前版本是用于平板电脑的，所以最好查看那里。

我的想法是，这一定与移动样式表（如下）中这段代码中的某些内容有关，但我不太确定是什么。

```
#feat {
width: 60em;
margin-top: 3.125em;
display: inline-block;
}

.feat_container {
width: 23.4375em;
display: inline-block;
margin-top: 9.0625em;
margin-bottom: 9.0625em;
float: left;
}

.feat_container p {
font-size: 1.125em;
line-height: 1.2em;
margin-bottom: 0;
}

.feat_logo {
width: 23.4375em;
display: inline-block;
float: right;
margin: 0;
}

#feat_nav {
float: left;
display: inline-block;
}

#feat_nav a { 
background: url('../images/dot.png') no-repeat;
font-size: 16px;
padding-right: 9px;
text-decoration: none; 
margin-right: 5px; 
color: rgba(1, 1, 1, 0);
}

#feat_nav a.activeSlide { 
background: url('../images/dot_active.png') no-repeat;
}

#PSM .feat_container {
margin-top: 8.375em;
margin-bottom: 8.375em;
}

#PSM, #banger, #hot, #eclectic, #definitive, #guest {
width: 60em;
}

#guest .feat_container {
margin-top: 7.6875em;
margin-bottom: 7.6875em;
} 
```

任何帮助将不胜感激！

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:36:35.913

好的，实际上我在“灯泡时刻”之后设法解决了这个问题。出于某种原因，移动设备（我在 android 和 ios 上测试过）似乎在幻灯片更改时呈现包含元素的宽度时出现问题，从而迫使右侧浮动内容向下。

修复，只是改变

`#PSM, #banger, #hot, #eclectic, #definitive, #guest { width: 60em; }`

至

`#PSM, #banger, #hot, #eclectic, #definitive, #guest { max-width: 60em; }`

这样就解决了，希望对某人有所帮助！

# gwt - GWT 编辑器框架 ListEditor

> ID：10238840
> 
> 赞同：0
> 
> 时间：2012-04-20T00:49:36.597
> 
> 标签：gwt, editor, requestfactory

我不知道为什么这不起作用。

第一的。我的行为是这样的，我将省略代码以尝试更好地解释：

```
public class ProgramaEditor extends Composite implements Editor<ProgramaProxy> {
  /*edits a ProgramaProxy just fine*/         
  /* a EditorList to edit BitacoraProxy */
  @UiField BitacoraListEditor bitacoras;

 }

    public class BitacoraListEditor extends Composite implements IsEditor<ListEditor<BitacoraProxy, BitacoraEditor>>, HasRequestContext<List<BitacoraProxy>>{
 /* edit a list of BitacoraProxy just fine */
 protected class BitacoraEditorSource extends EditorSource<BitacoraEditor>{
      /* the editor source that vends Editors of BitacoraProxy*/
      public BitacoraEditor create(int index) {
              final BitacoraEditor editor = new BitacoraEditor();
                      editor.setIndex(index);

                 /*more code*/

                       editor.addDeleteEditorHanlder(new EditorDeleteHandler() {
                        /* ... handler to remove a Editor from the list */
                        subeditors.getList().remove(event.getIndex());
                       }
      }
  }

 private ListEditor<BitacoraProxy, BitacoraEditor> subeditors = ListEditor.of(new BitacoraEditorSource());
 } 
```

在服务器端：

```
 @Entity
 public class Bitacora extends EntityBase {
     @NotNull(message="La fecha no puede ser nulo")
     private Date fecha;    
 } 
```

所以在正常的工作流程中一切正常编辑 ProgramaProxy 然后添加 BitacoraProxys 然后保存，我可以使用 ListEditor 保存 ProgramaProxy 及其@OneToMany BitacoraProxy。

问题是当我从 EditorList 中删除 BitacoraProxy 时：

```
 subeditors.getList().remove(event.getIndex());
   /*Please note the  @NotNull on the Many side on the property fecha.*/ 
```

当我保存整个对象时，我会违反属性：

```
 @NotNull(message="La fecha no puede ser nulo")
  private Date fecha; 
```

为什么？我刚刚调试了我的代码，并且 ListEditor 是同步的，我的意思是：

```
Add a BitacoraProxy -> ListEditor.getList() - size = 1
Then I remove a BitacoraProxy from the ListEditor.getList() - size = 0 
```

ListEditor getList() 上没有 BitacoraProxy，然后在 Save 按钮上：

```
 driver.flush().fire(new Receiver<Void>() {
            @Override
            public void onSuccess(Void response) {

            }
            @Override
            public void onConstraintViolation(Set<ConstraintViolation<?>> violations) {
                DialogHandler handler = DialogHandler.getInstance();
                ErrorDialog errDlg = handler.createErrorDialog();               

                for(ConstraintViolation<?> violation:violations){
                    errDlg.addDetail(violation.getMessage());
                }
                /* more code */
        }); 
```

为什么我会违反 ListEditor.getList() 上不存在的代理的约束。

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:07:25.803

您`BitacoraProxy`已被`edit()`编辑（至少由编辑器框架），因此它是 , 的一部分`RequestContext`并将被发送到服务器（它只是 ID，除非您更改了它的某些属性），因此无论是否会被验证以后用还是不用。

这是一个已知问题 (1)，但它是 RequestFactory 原始设计的一部分，所以我不确定如何真正*修复*它。另见[问题 5926](http://code.google.com/p/google-web-toolkit/issues/detail?id=5926)。

* * *

[(1) 请参阅http://gwt-code-reviews.appspot.com/1601806/diff/9001/user/src/com/google/web/bindery/requestfactory/shared/impl/AbstractRequestContext.java#newcode1182](http://gwt-code-reviews.appspot.com/1601806/diff/9001/user/src/com/google/web/bindery/requestfactory/shared/impl/AbstractRequestContext.java#newcode1182)上的 TODO

# apache-flex - 使用 BitmapImage 图标创建 Flex 按钮外观

> ID：10238845
> 
> 赞同：1
> 
> 时间：2012-04-20T00:50:12.170
> 
> 标签：apache-flex, button, icons, flash-builder, skin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:04:33.570

IconButton 皮肤中有一个数组常量**excludes**。只需将 BitmapImage 的 id 添加到此数组即可导致 BitmapImage 被 SparkSkin 类排除在着色之外：

```
static private const exclusions:Array = ["labelDisplay","icon"]; 
```

它现在正确显示。

# android - Android-如何获取系统保存的最新文件的URI？

> ID：10238846
> 
> 赞同：1
> 
> 时间：2012-04-20T00:50:14.310
> 
> 标签：android, image, uri, mediastore

在 android 中，如何获取保存到系统的最后一个文件的 URI？我需要图像编辑应用程序的这种能力。据我所知，ContentObserver 只能检查是否发生了变化，而且 MediaStore.Images.Media 或 MediaStore.Files 都没有我可以使用的方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:29:53.783

您可以遍历应用程序所针对的文件夹中的文件并通过该`lastModified()`方法获取最新文件，然后您可以使用该方法获取它的位置`getPath()`。

```
public File getNewestFileInDirectory() {
   File newestFile = null;

   // start loop trough files in directory
   File file = new File(filePath);
   if (newestFile == null || file.lastModified().after(newestFile.lastModified())) {
      newestFile = file;
   }
   // end loop trough files in directory

   return newestFile;
} 
```

# c# - 将图形添加到 TreeView

> ID：10238848
> 
> 赞同：2
> 
> 时间：2012-04-20T00:50:26.993
> 
> 标签：c#, winforms, treeview

我正在基于 a 进行一些可视化`TreeView`，但使用一些彩色图形来显示额外信息。

我有一个扩展类`TreeView`。我已将控件添加到表单并使用节点填充它。

现在我想做的是给它添加一些图形。我想在文本的*左侧*，但在垂直缩进线的*右侧添加一个固定宽度（例如，100 像素宽和文本高度）图形。*

我如何：

1.  将文本向右移动 100 像素，为图形腾出空间，然后
2.  在该特定位置添加图形？

在文本前简单地添加空格很诱人，但我希望有一个更优雅的解决方案。假设如果我找不到更好的解决方案，我总是可以依靠间距文本，我仍然需要一种方法来确定图形放置位置的 X、Y 坐标。

谢谢你。

（我将 C#2.0 与 WinForms 一起使用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:35:56.797

我相信此控件具有您需要的两个功能（如果没有，您可以发布模拟屏幕截图）： http: [//www.codeproject.com/Articles/13999/Using-treenodes-with-and-without-images-in-一棵树V](http://www.codeproject.com/Articles/13999/Using-treenodes-with-and-without-images-in-a-TreeV)

# node.js - 如何从内联函数中获取变量

> ID：10238849
> 
> 赞同：1
> 
> 时间：2012-04-20T00:50:28.787
> 
> 标签：node.js

所以说我有一个功能：

```
function grabOldestJob() {
  var client = mysql.createClient({
    user: dbConfig['USER'],
    password: dbConfig['PASS'],
  });

  client.query('USE '+dbConfig['DATABASE']);

  client.query('SELECT url FROM '+dbConfig['JOB_TABLE']+' ORDER BY added ASC LIMIT 1 ',
    function selectCb(err, results, fields, passed) {
      if (err) {
        throw err;
      }
      client.end();
      fetchFeed(results[0]['url']);
    }
  );
} 
```

我需要的是埋在 inline 函数中的 results[0]['url']，所以要么我想从那个函数中取出那个变量，所以我可以用它来返回 grabOldestJob 函数或将另一个函数传递给内联函数，所以我可以使用 results[0]['url'] 作为参数。

我对 node.js 的概念非常陌生，并且想让我的代码尽可能“正确”。这个函数是进程中的第一个函数，它从数据库中提取一个 url，将其传递给从远程服务器获取，解析 xml 提要并将某些位存储在数据库中。我希望使用节点“一次运行很多东西”的能力，我将能够同时获取->解析->保存许多提要。对此的任何最佳实践技巧也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:19:57.120

为此使用回调函数。

就像`client.query(query,callback)`函数一样。您传入数据和一个回调函数，如果处理完成则调用该函数。对你的`fetchFeed(url,callback)`函数做同样的事情。

```
...
client.end();
fetchFeed(results[0]['url'],function(result){
    // here 'result' contains the fetched feed and can be stored into the database
});
... 
```

* * *

```
function fetchFeed(url,cb){
    // download feed here and call cb(downloaded_data) when finished, passing the downloaded data to the cb() function
} 
```

看看：[了解 node.js 事件循环](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:09:43.590

在外部作用域中定义的每个变量在外部作用域的内部作用域中都是可见的。这基本上意味着当您在函数中使用关键字“var”定义变量时，任何嵌套函数都可以看到它。另一方面，当您定义一个没有 'var' 关键字的变量时，它将在全局范围内可见。这是一个例子：

```
(function () {
  var v = 5;

  (function () {
    v = 3;
  })();

  console.log(v);
})(); 
```

这将打印出**3**。因此，如果您希望参数在内部函数之外可见，则必须将其复制（不确定是否引用，因为该变量可能会被垃圾收集？）到全局变量中。像这样

```
(function () {
  var v = 5;

  (function (n) {
    v = n;
  })(42);

  console.log(v);
})(); 
```

这将打印出**42**。

# datacontractserializer - 为什么 DataContractSerializer 不起作用？

> ID：10238850
> 
> 赞同：0
> 
> 时间：2012-04-20T00:50:39.083
> 
> 标签：datacontractserializer

我不知道如何通过 DataContractSerialize 序列化对象。这是我的代码：

```
 public static string DataContractSerialize(object target)
    {
        var formatter = new DataContractSerializer(target.GetType());
        using (var stream = new MemoryStream())
        {
            formatter.WriteObject(stream, target);
            stream.Position = 0;
            return Encoding.UTF8.GetString(stream.ToArray());
        }
    } 
```

和实体

```
[Serializable, DataContract(Namespace = "CommunicationModel.Entity")]
[KnownType(typeof(Message))]
[KnownType(typeof(int))]
[KnownType(typeof(string))]
[KnownType(typeof(Type))]
[KnownType(typeof(object))]
public class Message : IDisposable
{
    public Message(string stringInfo)
    {
        MessageValue = stringInfo;
        MessageType = typeof (string);
    }

    public Message(int intInfo)
    {
        MessageValue = intInfo;
        MessageType = typeof (int);
    }
    [DataMember]
    public Type MessageType { get; private set; }
    [DataMember]
    public object MessageValue { get; private set; }

    #region Implementation of IDisposable

    public void Dispose()
    {
    }

    #endregion
} 
```

当我像这样运行 DataContractSerialize 时：

```
var sData = SerializerHelper.DataContractSerialize(msg); 
```

它会抛出异常。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:53:26.243

First, you cannot have a type that is both [Serializable] and [DataContract]. This is not recommended and is meaningless. Just have [DataContract]. For more information on why, see [this post on the data contract programming model](http://blogs.msdn.com/b/sowmy/archive/2006/02/22/536747.aspx).

Anyway, the problem here is that you're actually trying to serialize a RuntimeType, because MessageType is represented as a RuntimeType. RuntimeType is an internal class that's a child of Type and that is not public, so that you can't knowingly refer to it as a known type. See [What's the difference between System.Type and System.RuntimeType in C#?](https://stackoverflow.com/questions/5737840/whats-the-difference-between-system-type-and-system-runtimetype-in-c) for more information on what RuntimeType is and why it is the way it is.

So, you have two options here:

*   Consider adding a KnownTypes attribute that takes a static method name. From your static method, you can return the various types you really want, including potentially RuntimeType if you use reflection.

*   The option I'd *recommend* is to make MessageType a TypeHandle (a RuntimeTypeHandle.) The advantage of this is that you can actually make RuntimeTyepHandle a known type since it's public. It's also serializable and deserializable just like any other type. See [this excellent blog post](http://blogs.msdn.com/b/vancem/archive/2006/10/01/779503.aspx) on what I mean.

# javascript - HTML 将滚动条附加到模态内容

> ID：10238851
> 
> 赞同：3
> 
> 时间：2012-04-20T00:50:42.183
> 
> 标签：javascript, css, scrollbar, modal-dialog, pinterest

我正在创建一个类似于 Pinterest 的页面，其中项目在用户滚动时垂直流动。当用户单击其中一项时，会打开一个包含相关内容的模式。目前，模态是一个绝对定位的 div。

模式和背景（项目列表）都比用户的浏览器高度长。如何使浏览器上的滚动条代表模态 div 的高度而不是背景的高度，然后在模态关闭时将其设置回来？

我尝试隐藏背景并显示模式，但是当我隐藏模式并显示背景时，它会再次滚动页面。我想让背景稍微可见，就像在 Pinterest 的主页上一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:32:25.587

我会为模态 div 做这样的事情：

```
<div style="background-color: rgba(255,255,255, 0.93);position:fixed;
overflow-x:auto;overflow-y:scroll;bottom:0;left:0;right:0;top:0;
z-index:9999;"></div> 
```

它创建一个填充整个文档的 div，然后为中间内容添加滚动条。显示模式后，您需要将页面的主体（背景）设置为：

```
style="overflow:hidden" 
```

你可以像这样使用jquery：

```
$("body").css("overflow", "hidden"); 
```

重要的是让主体将溢出设置为隐藏以删除其他滚动条。当我在 Firefox 中测试它时，它起作用了。我有一个所描述的 div，然后设置了主体样式并且它起作用了。当我测试它时，我也在文档的中间。背景文件停留在原处，没有移动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T00:56:56.927

给模态 div 一个固定的高度和一个 css 属性`overflow:scroll`

# css - 类似今日美国的 iPad 多页列布局

> ID：10238859
> 
> 赞同：0
> 
> 时间：2012-04-20T00:51:31.230
> 
> 标签：css, ipad, webkit, html

我正在尝试实现这样的布局：[http](http://www.ipadinsight.com/wp-content/uploads/2010/07/LakersWin.jpg) ://www.ipadinsight.com/wp-content/uploads/2010/07/LakersWin.jpg是一个多页多列布局，适用于正文. 有任何想法吗？我认为 CSS 可以处理多布局问题，但不能处理分页。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:01:02.853

您可以通过使用像 webkit-column-count 之类的 css 属性来实现这一点，下面的 css 示例。

```
div
{
    -moz-column-count:3; /* Firefox */
    -webkit-column-count:3; /* Safari and Chrome */
    column-count:3;
}​ 
```

演示在这里[http://jsfiddle.net/Bqjcc/](http://jsfiddle.net/Bqjcc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:22:49.443

网格系统怎么样？

我更喜欢 1140 css 网格：[http ://cssgrid.net/](http://cssgrid.net/)

960格也很流行：http: [//960.gs/](http://960.gs/)

# android - 在 Android 中隐藏/取消隐藏内部布局

> ID：10238860
> 
> 赞同：3
> 
> 时间：2012-04-20T00:51:56.633
> 
> 标签：android

我需要有能力隐藏/取消隐藏（在 View.GONE 的意义上）活动中的整个线性布局行。这是获取对作为更大相对布局的一部分的内部布局的引用并将该内部布局的可见性设置为消失的最佳方法吗？我还应该维护对布局的引用，这样我就可以执行 innerLayout.setVisibility(View.GONE)。如果是这样，它应该是什么类型的参考？最终还是每次我想隐藏/取消隐藏时都进行查找更好。不知何故，保持对布局的直接引用似乎不太正确。另一方面，我不想在每次隐藏/取消隐藏时将布局中的每个项目设置为消失或放置 findBy 来定位它。

也许添加/删除布局是更好的形式？但是我需要添加到视图层次结构中的正确位置，将这个逻辑放在代码中也不是一个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:57:29.203

你的线性布局是用 XML 设置的还是以编程方式制作的？

如果它在 XML 中完成：

请注意，如果任何视图使用此视图作为布局中的参考，例如 android:layout_below="@+id/this"，那么这不是一个好主意。

你可以使用这样的东西，它会隐藏所有的子视图和它自己，不是隐藏而是完全消失（不占用空间）

如果您想在多个方法中使用它，或者在您正在使用它的方法中使用它，请在类中使用它作为参考

```
View layout; 
```

然后在 onCreate 调用这个

```
layout = findViewById(R.id.linearLayout); 
```

然后让它消失：

```
layout.setVisibility(View.GONE); 
```

或者

```
layout.setVisibility(8); 
```

并把它拿回来

```
layout.setVisibility(View.VISIBLE); 
```

或者

```
layout.setVisibility(0); 
```

# c++ - 'n' boost::thread 实例做 'm' 个工作

> ID：10238862
> 
> 赞同：1
> 
> 时间：2012-04-20T00:52:34.497
> 
> 标签：c++, boost-thread

我正在编写一个进化代码，其中每一代都有（比如说）100 个生物体，每个生物体的适应度计算是一个易于并行化的过程。现在，我不想完全创建 100 个独立线程，而是想将这个（同时运行的线程）数量确定为硬件并发的函数（我们暂时假设该数量为 8）。

我想象的标准是我必须在 100 个生物体上运行一个函数（适应度函数），并且同时运行 8 个线程。

谁能给我一个简单但有效的方法，使用 boost::thread_group？我对太多新概念（回调等）感到有些困惑。所以一个简单的 c++ 片段将不胜感激:)

TIA 问候， Nikhil

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:21:55.970

我不确定适应度函数返回什么，更不用说，但一个想法是围绕它编写一个包装函数，将其称为“m”次——在本例中为 100/8 或 12 次。然后创建一个循环“n”次的循环，每次调用thread_group::add_thread，它会产生一个调用包装函数的新线程。

基本的想法是这样的：

```
/* ??? */ fitness_calculation(organism& o){
    //...
}

// wrapper function
void calc(std::vector<organism>& v, int idx, int loops){
    for(int i = 0; i < loops; i++)
        fitness_calculation(v[idx + i]);    

}

int main(){
    int num_organisms = 100;
    std::vector<organism> v(num_organisms); // some array with the organisms

    int threads = 8;
    boost::thread_group g;
    int organisms_per_thread = num_organisms / threads;

    int i = 0, idx = 0;
    for (  ; i < threads; ++i, idx += organisms_per_thread )
        g.add_thread(calc, v, idx, organisms_per_thread);

    // finish up remainder in this thread
    calc(v, idx, num_organisms % threads);
    g.join_all();
} 
```

我不确定我的 thread_group 函数调用语法是否正确，但它足够接近。希望这会有所帮助。

# image - 是否有任何图像效果可以在drupal 7中的图像中添加白色背景

> ID：10238864
> 
> 赞同：9
> 
> 时间：2012-04-20T00:52:56.830
> 
> 标签：image, drupal-7, styles, effect

Drupal 7 module 'image style' 可以制作resize、scale、crop等图片效果，但还不够。例如，原始图像尺寸为 800x600，我可以将其缩放为 400x300，然后我想在高度上添加白色背景，使其为 400x400。这个效果怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T14:39:43.127

[对于这种情况，图像缓存操作](http://drupal.org/project/imagecache_actions/)是一个很棒的模块......你可以试试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-06T14:54:02.577

实际上，您可以使用**Image Kit 效果**轻松做到这一点。使用**Smart Resizer**，您可以定义要用于填充空白的背景颜色。

[https://www.drupal.org/project/iek](https://www.drupal.org/project/iek)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T05:16:02.403

最后，我为此创建了[图像效果模块](http://drupal.org/sandbox/drupalfan79/1941430)。它将图像调整为一组精确的尺寸大小，无需任何裁剪、拉伸或收缩，但如果需要，会添加白色背景。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T20:49:24.947

我看到你找到了解决方案。但是有一个更简单的。使您的图像样式将图像缩放到 400x300（它将保持图像的纵横比）。然后使用 CSS 为周围的 div 设置一个白色背景和固定大小 - 400x300px 的样式。如果图像具有不同的纵横比，则会填充周围的白色 div。如果要在底部/右侧添加空白，请将图像放置在 div 内的左上角。或者您可以将图像居中以在两侧或顶部/底部添加空白（取决于图像的纵横比）。如果您需要图像周围的边框或框阴影，请将其应用于周围的 div。

**添加黑色空间**：如果您的图像样式用于响应式幻灯片或其他内容和/或您希望所有图像都具有精确的尺寸（高度/宽度），您可以通过使用两个过滤器来实现：

*   **缩放**到 400x300（高度或宽度将与此尺寸匹配，另一个将等于或更小）

*   **裁剪**为 400x300（因为高度/宽度已经等于或小于 400x300，如果需要，它将在顶部/底部或右侧/左侧添加黑色空间）

[编辑]

**使用[ImageCache Actions](https://www.drupal.org/project/imagecache_actions) (Drupal 7)**添加空白：****

 **[看到这个答案](https://drupal.stackexchange.com/questions/21308/change-image-background-colour-when-cropping#21309)

对于 Drupal 8 ImageCache Actions 现在称为[Image Effects](https://www.drupal.org/project/image_effects)。使用背景选项固定高度/宽度的效果是“设置画布”。**

# javascript - 可以使用锚标记，但不能在 UIWebView 中的链接上使用

> ID：10238866
> 
> 赞同：0
> 
> 时间：2012-04-20T00:53:19.393
> 
> 标签：javascript, html, ios, uiwebview

我想要一个使用锚标记但不使用链接的 UIWebView。

如下所示：

```
<div name='my-anchor'>here is the target</div> 
```

使用：

```
/url#my-anchor 
```

这可能吗？有没有更好的方法来处理这个？

看到你能做到这一点

```
var x=document.getElementById('mi1566');
x.scrollIntoView(); 
```

但在页面底部有混合的结果。

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:00:09.153

[w3schools](http://www.w3schools.com/html/html_links.asp)建议**name**属性仅与**a**锚一起使用。[**div**](http://www.w3schools.com/tags/tag_div.asp)标签不包含（*也不支持）* name 属性。

我过去通常做的是：

```
<a name="my-anchor">&nbsp;</a>
<div class='mydiv'>here is the target</div> 
```

![在此处输入图像描述](../Images/4cdd8f8175c5c573cbc64e33255becb1.png)

## 为了取悦显然认为这个答案值得投反对票的**steveax**，这里是**MDN**看到的**div**信息： [https ://developer.mozilla.org/en/HTML/Element/div](https://developer.mozilla.org/en/HTML/Element/div)

# android - 如何使用清除按钮制作可重复使用的 EditText？

> ID：10238875
> 
> 赞同：2
> 
> 时间：2012-04-20T00:55:55.323
> 
> 标签：android, android-layout, android-widget, android-ui, android-custom-view

我想制作一个带有清除按钮的 EditText 复合控件。由于主要功能将是 EditText 功能，我希望它可以在具有 EditText 的所有属性的布局 xml 中声明。但是，它实际上将是一个带有 EditText 和 ImageButton 的 LinearLayout。

另外，我希望它像代码中的 EditText 一样使用，所以我可以将它作为替代品放入。

到目前为止，我有这个布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:background="@android:drawable/editbox_background" >
    <EditText 
        android:id="@+id/editText"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="center_vertical"
        android:background="#FFF" />
    <ImageButton
        android:id="@+id/clear"
        android:src="@drawable/clear_text"
        android:background="#FFF"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical" />
</LinearLayout> 
```

但我不确定如何进行。如果我需要它是 LinearLayout 以使用此布局，如何定义扩展 EditText 的控件？还是我唯一的选择是在 onDraw() 中手动绘制 x 并自己处理点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:13:49.853

```
 public class myedittext extends LinearLayout{
 EditText e1;
  ImageButton ib;
  OnClickListener cleartext;
 public myedittext(Context c){
  super(c);
   String inflater=context.LAYOUT_INFLATER_SERVICE;
  LayoutInflater lif;
  li=(LayoutInflater)getContext().getSystemService(inflater);
  li.inflate((R.layout.yourlayoutname,this,true);
 e1=(EditText)findViewById(R.id.editText);
   ib=(ImageButton)findViewById(R.id.clear);

  cleartext = new OnClickListener(){

    @Override
    public void onClick(View v) {

        e1.setText("");
    }
   };
  ib.setOnClickListener(cleartext);
 }
   } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T01:29:42.293

您可以声明一个自定义视图类，该类从`LinearLayout`您的 XML 扩展而来。然后加载 Xml 并将其添加到您的自定义视图中。

如果你想在 XML 中使用它，你应该首先通过 attrs.xml 声明你自己的 XML 属性，如下所示

```
<declare-styleable name="CustomEditText">
    <attr name="text" format="string" />
</declare-styleable> 
```

然后用下面的代码覆盖构造函数`Attributes attrs`并解析 attrs

```
TypedArray a = context.obtainStyledAttributes(attrs,R.styleable.CustomEditText);
CharSequence s = a.getString(R.styleable.CustomEditText_text);
setText(s.toString()); 
```

像这样在 XML 中使用它：

```
xmlns:anything="http://schemas.android.com/apk/res/yourpackagename" // for declare your namespace
<yourpackagename
        android:background="@drawable/blue"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        anything:text="hi"/> 
```

要像`editText`在代码中那样使用它，只需包装自定义视图类。

# c# - 从一组值创建标签？

> ID：10238876
> 
> 赞同：-1
> 
> 时间：2012-04-20T00:55:56.407
> 
> 标签：c#, winforms, label

我正在制作一个股票市场游戏，我想显示一个 int 数组作为标签。

我不想手动将其放入永远的标签。有没有办法做到这一点。我在 C# 中使用 Visual Studio 编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:02:59.623

在您的表单上有一个 TableLayoutPanel，因此您可以添加要添加的控件并让它们自动对齐和定位。

然后，根据您的整数列表重新填充标签：

```
tableLayoutPanel.Controls.Clear();

foreach (var i in ints)
{
    tableLayoutPanel.Controls.Add(new Label {Text = i.ToString()});
} 
```

如果您想要的只是一种获取整数数组并返回标签数组的方法，那么：

```
private Label[] GetLabels(int[] ints)
{
    return ints == null ? null : ints.Select(i => new Label {Text = i.ToString()}).ToArray();
} 
```

或者没有 linq：

```
private Label[] GetLabels(int[] ints)
{
    if (ints == null)
    {
        return null;
    }

    var labels = new Label[ints.Length];

    for (var i = 0; i < ints.Length; i++)
    {
        labels[i] = new Label {Text = i.ToString()};
    }

    return labels;
} 
```

# google-maps - fitBounds 函数不显示所有标记

> ID：10238878
> 
> 赞同：2
> 
> 时间：2012-04-20T00:56:08.987
> 
> 标签：google-maps, google-maps-api-3

我对 Maps API 相当陌生，我正在尝试在 Sencha Touch 中使用地图。

我在地图上成功绘制了一组标记。但我想缩放地图并将其居中以尽可能紧密地适合所有标记。

当我调用 fitBounds 函数时，我得到了一个地图视图，其中我的所有标记都位于屏幕的左上角，并且缩放太宽 - 这不是我想要的。

关于如何以最接近的缩放比例在地图视图上获取所有标记的任何提示？谢谢！

```
function setCenter()
{
    var bounds = new google.maps.LatLngBounds();

    for (var i = 0, LtLgLen = LatLngList.length; i < LtLgLen; i++) {
        //  And increase the bounds to take this point
        bounds.extend (LatLngList[i]);
    }

    map.getMap().fitBounds(bounds);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:02:18.683

我使用的（在 for 循环之后）：

```
map_center = bounds.getCenter();
map.setCenter(map_center);
map.panToBounds(bounds);
map.fitBounds(bounds); 
```

希望能帮助到你！

# delphi - 如何使用delphi在区域中绘制边框？

> ID：10238887
> 
> 赞同：1
> 
> 时间：2012-04-20T00:56:58.630
> 
> 标签：delphi

我正在使用此代码

```
procedure DrawPolygonRegion(wnd : HWND; rect : TRect; NumPoints : Integer; DoStarShape : Boolean);
const
  RadConvert = PI/180;
  Degrees    = 360;
  MaxLines   = 100;
var
  x, y,
  xCenter,
  yCenter,
  radius,
  pts,
  I       : Integer;
  angle,
  rotation: Extended;
  arPts   : Array[0..MaxLines] of TPoint;
  rgn  : HRGN;
begin

  xCenter := (rect.Right - rect.Left) div 2;
  yCenter := (rect.Bottom - rect.Top) div 2;
  if DoStarShape then
    begin
      rotation := Degrees/(2*NumPoints);
      pts := 2 * NumPoints;
    end
  else
    begin
      rotation := Degrees/NumPoints;             //get number of degrees to turn per point
      pts := NumPoints
    end;
  radius := yCenter;

  {This loop defines the Cartesian points of the shape. Again,
   I've added 90 degrees to the rotation angle so the shapes will
   stand up rather than lie on their sides. Thanks again to Terry Smithwick and
   David Ullrich for their trig help on CompuServe.}
  for I := 0 to pts - 1 do begin
    if DoStarShape then
      if (I mod 2) = 0 then //which means that
        radius := Round(radius/2)
      else
        radius := yCenter;

    angle := ((I * rotation) + 90) * RadConvert;
    x := xCenter + Round(cos(angle) * radius);
    y := yCenter - Round(sin(angle) * radius);
    arPts[I].X := x;
    arPts[I].Y := y;
  end;

  rgn := CreatePolygonRgn(arPts, pts, WINDING);
  SetWindowRgn(wnd, rgn, TRUE);
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  DrawPolygonRegion(Handle, BoundsRect, 5, True)
end; 
```

以这种方式设置表格的形状

![在此处输入图像描述](../Images/5c23a92567c939d6beacd6c2e64086fe.png)

现在我需要在形状中绘制一个彩色边框，但我不知道如何完成这项任务。我寻找的结果是这样的。

![在此处输入图像描述](../Images/265a6ead1ed1d9f403e352d96d6bc471.png)

任何想法如何完成这项任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T01:03:52.300

如果您要继续使用某个区域，则`FrameRgn()`在 Form 的`OnPaint`事件中调用 Win32 API 函数，例如：

```
type
  TForm1 = class(TForm)
    procedure FormPaint(Sender: TObject);
  private
    Rgn: HRGN;
  protected
    procedure CreateWindowHandle(const Params: TCreateParams); override;
  end;

function CreateMyPolygonRegion(rect : TRect; NumPoints : Integer; DoStarShape : Boolean): HRGN; 
const 
  RadConvert = PI/180; 
  Degrees    = 360; 
  MaxLines   = 100; 
var 
  x, y, 
  xCenter, 
  yCenter, 
  radius, 
  pts, 
  I       : Integer; 
  angle, 
  rotation: Extended; 
  arPts   : Array[0..MaxLines] of TPoint; 
begin 
  xCenter := (rect.Right - rect.Left) div 2; 
  yCenter := (rect.Bottom - rect.Top) div 2; 
  if DoStarShape then 
    begin 
      rotation := Degrees/(2*NumPoints); 
      pts := 2 * NumPoints; 
    end 
  else 
    begin 
      rotation := Degrees/NumPoints;             //get number of degrees to turn per point 
      pts := NumPoints 
    end; 
  radius := yCenter; 

  {This loop defines the Cartesian points of the shape. Again, 
   I've added 90 degrees to the rotation angle so the shapes will 
   stand up rather than lie on their sides. Thanks again to Terry Smithwick and 
   David Ullrich for their trig help on CompuServe.} 
  for I := 0 to pts - 1 do begin 
    if DoStarShape then 
      if (I mod 2) = 0 then //which means that 
        radius := Round(radius/2) 
      else 
        radius := yCenter; 

    angle := ((I * rotation) + 90) * RadConvert; 
    x := xCenter + Round(cos(angle) * radius); 
    y := yCenter - Round(sin(angle) * radius); 
    arPts[I].X := x; 
    arPts[I].Y := y; 
  end; 

  Result := CreatePolygonRgn(arPts, pts, WINDING); 
end; 

procedure TForm1.CreateWindowHandle(const Params: TCreateParams);
begin
  inherited;
  Rgn := CreateMyPolygonRegion(BoundsRect, 5, True);
  SetWindowRgn(Handle, Rgn, TRUE);
end;

procedure TForm1.FormPaint(Sender: TObject); 
begin 
  Canvas.FillRect(ClientRect);
  Canvas.Brush.Color := clRed;
  FrameRgn(Canvas.Handle, Rgn, Canvas.Brush.Handle, 2, 2);
end; 
```

但是，在 Windows 2000 和更高版本上，不再使用窗口区域会更好、更有效地利用操作系统资源。 `TForm`自 Delphi 6 以来已经有`Transparent`和`TransparentColor`可用的属性，您应该使用它们。将`Transparent`属性设置为`True`，将`TransparentColor`属性设置为不会出现在表单中其他任何位置的唯一颜色（`clFuchsia`常用），绘制所需的形状并在与表单`TBitmap`相同`Width`且`Height`背景填充的Form's `TranparentColor`，然后您可以在事件中将 绘制`TBitmap`到 Form's上（或者将`Canvas``OnPaint``TBitmap``TImage`所以您不必手动绘制表单）。每当 Windows 合成您的窗体窗口进行显示时，它会自动省略使用`TransparentColor`. 最终结果是相同的 - 一个成形的窗口 - 但 Windows 将能够更有效地管理透明度、命中测试、与其他窗口重叠/混合等。

# php - 使用 jQuery 和 html 下拉菜单加载页面

> ID：10238893
> 
> 赞同：1
> 
> 时间：2012-04-20T00:58:20.320
> 
> 标签：php, javascript, jquery, mysql, wordpress

代码：

```
//querying the campaigns
$campaigns  = $wpdb->get_results(
                "SELECT *
                FROM tbl_campaigns
                ORDER BY campaignID DESC",   
                OBJECT_K
            );

//displaying the campaigns
<select name="campaign_list" class="campaign_dropdown">
    <?php
        foreach($campaigns as $c):
            echo '<option value="'.$c->campaignID.'" rel="'.$c->campaignID.'">'.$c->campaign_name.'</option>';
        endforeach;
    ?>
</select>

//javascript/jquery
var $j = jQuery.noConflict();
$j('.campaign_dropdown').change(function(){
        if($j(this).val() != '0'){
            var rel = $j(this).closest('option').attr('rel');
            alert(rel);
        }
    }); 
```

我想要做的只是在我从下拉列表中选择时显示 rel 值。但我总是得到一个未定义的消息。（如果这将得到修复，每当我从下拉列表中选择时，我都会使用它来加载另一个页面）

代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:01:50.030

我想你想要：

```
var rel = $j(this).find('option:selected').attr('rel'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:11:03.130

```
$j('.campaign_dropdown').change(function(){
        if($j(this).val() != '0'){
            var rel = $j(this).find(":selected").attr('rel');
            alert(rel);
        }
    }); 
```

# python - Windows 中 Python 的缓冲输出与非缓冲输出

> ID：10238894
> 
> 赞同：3
> 
> 时间：2012-04-20T00:58:24.693
> 
> 标签：python, notepad++, nppexec, unbuffered-output

我使用 NppExec/Notepad++ 来运行 Python 脚本，并在运行时不断刷新我的输出缓冲区以使用`print`语句更新我的控制台窗口（默认缓冲输出仅在脚本完成执行后显示*所有打印语句）。*

[此](https://superuser.com/questions/381942/stop-nppexec-from-trapping-console-output-until-program-finishes)链接显示您需要做的就是使用该命令`python -u`来获取无缓冲的输出。*无论使用哪种编辑器，对我的***所有**Python 脚本都使用这种执行模式是否有不利之处？我不清楚缓冲输出和非缓冲输出之间的区别。

 ***编辑**：我包含了这个小的 Python 计时器脚本作为示例：

```
#!usr/bin/env python
import time
import threading
import sys

class Timer(threading.Thread):
    def __init__(self, seconds):
        self.runTime = seconds
        threading.Thread.__init__(self)
    def run(self):
        counter = self.runTime
        for sec in range(self.runTime):
            print counter
            time.sleep(1.0)
            counter -= 1
        print "Done."

if __name__ == '__main__':
    t = Timer(10)
    t.start() 
```

在这种情况下，缓冲和非缓冲输出在效率方面有多大区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T01:18:28.650

缓冲输出意味着计算机将输出假脱机到内存中的某个位置，直到积累了一定数量。然后它一次写入整个块。这比使用无缓冲输出更有效，后者在您请求写入输出时立即写入输出。

不利的一面是，您的程序运行速度会稍慢（或很多），具体取决于您编写的输出量。如果它们是不做太多输出的短程序，你不太可能注意到差异......

**编辑**

缓冲与非缓冲输出不仅仅是一个 python 问题。相同的概念（和术语）也适用于其他语言。在较低级别的语言中，它在某些方面变得更加重要——如果我使用缓冲输出在 C 程序中编写消息，然后我的程序由于编程错误而死，任何在错误之前被假脱机的数据，但不是写入磁盘丢失。这不是一个问题，因为要让 python 解释器在错误时中止是相当困难的——即使你的代码很糟糕，解释器最终仍然可以清理干净......（除非你向它发送终止信号或者其他的东西）...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T01:27:36.587

我可以想到两个缺点，但它们的重要性取决于您的需求：

1.  无缓冲的读写可能会明显变慢；如果您一次编写一行文本文件，您的代码可能会进行数百次系统调用以要求操作系统写入文件。根据您写入磁盘的速度，这甚至可能意味着需要从磁盘重新读取文件的最后一个块，以便使用新的最后一行重新保存文件。（这可能很少见；但更多的系统调用几乎总是导致速度变慢的秘诀。）

    以下是对写入速度有很大影响的系统调用数量的简单演示：

    ```
    $ cat initrd.img-2.6.38-8-generic > /dev/null 
    ```

    第一行确保文件在缓存中，因此只测量*输出*速度。

    ```
    $ dd if=initrd.img-2.6.38-8-generic of=/tmp/out bs=16 oflag=dsync
    ^C262766+0 records in
    262766+0 records out
    4204256 bytes (4.2 MB) copied, 50.7754 s, 82.8 kB/s 
    ```

    我放弃了等待——它进展得太慢了。这是一次“无缓冲”将 16 个字节写入磁盘，并确保每次写入都成功，然后再进行下一次写入。（这就是`dsync`- 稍后会详细介绍。）

    ```
    $ dd if=initrd.img-2.6.38-8-generic of=/tmp/out bs=$((4096)) oflag=dsync
    3218+1 records in
    3218+1 records out
    13181130 bytes (13 MB) copied, 3.69961 s, 3.6 MB/s
    $ dd if=initrd.img-2.6.38-8-generic of=/tmp/out bs=$((4096 * 10)) oflag=dsync
    321+1 records in
    321+1 records out
    13181130 bytes (13 MB) copied, 0.471143 s, 28.0 MB/s 
    ```

    这两个命令显示了一些缓冲的效果——第一个命令以 4096 字节的块写入数据，这可能是默认缓冲提供给您的。这大约比一次 16 个字节快 50 倍。第二个命令是以 40960 字节块的形式写入数据，它的速度*仍然*快了大约 9 倍。（总而言之，一次写入 40960 个字节比一次写入 16 个字节快大约 345 倍。）

    如果您的数据很小，这并不重要。毕竟，无论哪种方式都不会花费太多时间。如果您的数据很大，则可能更重要，这取决于您一次写入的数据量以及它在底层设备的快乐“字节边界”上排列的频率。

2.  套接字上的某些协议可能会根据您发送的数据的*时间来改变它们的行为。*如果您以增量方式构建数据，您可能会在单个数据包中发送部分数据，而基于数据包的接收器可能无法正常处理此问题。（我很难想象一个基于 TCP 的系统会出现这个问题，而不是驱动某种游戏；一个基于 UDP 的系统更容易想象有这个问题。）*

# ruby-on-rails-3 - 在某些情况下如何禁用 jQueryMobile 页面更改？

> ID：10238899
> 
> 赞同：0
> 
> 时间：2012-04-20T00:58:54.647
> 
> 标签：ruby-on-rails-3, jquery-mobile, asset-pipeline

我正在编写一个 Rails 应用程序，并且我正在使用 jQueryMobile 作为移动视图。

大多数时候，我想让 JQM 像往常一样通过添加和删除“页面”来操作 DOM。但是，在某些情况下，我想覆盖默认行为，并自己执行一些简单的 DOM 操作。

例如，我有一个用户列表，每个用户都有一个“添加到联系人”链接/表单。

```
<ul data-role='listview'>

  <li>
    <span class='name' id="user_56757234">Jim</span>
    <form action="/contacts" class="new_contact_form" data-remote="true" data-type="json" id="new_contact_form_56757234" method="post">
      <!-- form info here -->
      <input name="commit" type="submit" value="Add Contact" />
    </form>
  </li>

  <li>
    <span class='name' id="user_975827294">Fred</span>
    <form action="/contacts" class="new_contact_form" data-remote="true" data-type="json" id="new_contact_form_975827294" method="post">
      <!-- form info here -->
      <input name="commit" type="submit" value="Add Contact" />
    </form>
  </li>

  <!-- etc... -->

</ul> 
```

在用户点击添加给定联系人后，假设请求成功，给定的表单应该消失，表明该联系人已被添加。

我需要符合标准的 Rails RESTFUL 样式控制器，因此这些表单将提交给 ContactsController 创建操作，该操作将返回新联系人的 JSON 表示形式。

同样，我想阻止 JQM 尝试插入新页面——我只想删除触发事件的特定表单。但我不想禁用我在其他地方依赖的标准 JQM 行为。

有没有一种干净、简单的方法来做到这一点？

我收集 'pagebeforeload' 事件是我的朋友，但我不清楚如何设置它。

这篇文章似乎相关（[jquery mobile 防止页面更改取决于调用页面](https://stackoverflow.com/questions/9613833/jquery-mobile-prevent-page-change-depending-on-calling-page)）......但我是否正确，这是一个全局设置？就我而言，这似乎有点矫枉过正。

这是一个 Rails 3.1 项目，因此理想情况下我可以在特定于控制器的 javascript 资产文件中进行设置，以与标准 Rails-UJS 配合使用。

任何帮助将非常感激，

热情地，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T12:13:35.943

尝试`data-ajax="false"`作为表单标签中的属性。这将禁用 JQuery Mobile 的 ajax 行为并允许您在 Rails 中进行 ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:11:37.357

像这样的东西：

```
$('#new_contacts').live('pageinit', function(event) {
  $('.new_contact_form_mobile').submit(function(e) {  
    var form = $(this);
    var formData = $(this).serialize();
    var request = $.ajax("/contacts", {
      type: "POST", 
      data: formData,
      dataType: "json"
    });

    request.done(function(msg) {
      form.fadeOut();
    });

    return false;
  });
 }); 
```

# mysql - 如何改进这个消除排列的 SQL 代码？

> ID：10238900
> 
> 赞同：1
> 
> 时间：2012-04-20T00:58:58.743
> 
> 标签：mysql, sql

问题陈述如下：

-一个有一个带有结构的表INIT

```
(number1 INT not null, number2 INT not null, ..., number7 INT not null) 
```

- 我想将表 INIT 的所有行插入到表“选项卡”中，但我不想在“选项卡”中有 2 行，这样一个是另一个的排列。因此，例如，如果 (1,2,3,7,19,21,6) 和 (19,2,3,7,1,21,6) 是 INIT 中的行，那么其中只有一个具有最终出现在“标签”中。它们中的哪一个最终出现在“选项卡”中并不重要。

- 我下面的代码的作用如下：我保留了一个与 INIT 结构相同的辅助表“aux”。我遍历表 INIT 的所有行，对于 INIT 中的每一行，我按其组件的递增顺序对其进行排序，因此如果 (1,2,3,7,19,21,6) 是 INIT 中的一行，我对其进行排序(1,2,3,6,7,19,21) 并检查它是否在“辅助”中。如果是我继续下一行。否则，我在“选项卡”中插入 (1,2,3,7,19,21,6)。

我在包含 300,000 行的表 INIT 上运行了这个过程，我估计它需要超过 7 个小时才能运行。我想知道如何提高此程序的运行时间。

```
DECLARE done BOOLEAN default 0;
DECLARE n1,n2,n3,n4,n5,n6,n7 INT;
DECLARE o1,o2,o3,o4,o5,o6,o7 INT;
DECLARE my_cursor cursor  FOR select * from INIT;
DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done=1;       
OPEN my_cursor;

drop table if exists aux;
create table aux(
  number1 INT not null,
  number2 INT not null,
  number3 INT not null,
  number4 INT not null,
  number5 INT not null,
  number6 INT not null,
  number7 INT not null,
 );
 create table temp( number INT );

REPEAT
   truncate table temp;

   FETCH my_cursor INTO n1,n2,n3,n4,n5,n6,n7;
        INSERT INTO temp values(n1);
        INSERT INTO temp values(n2);    
        INSERT INTO temp values(n3);
        INSERT INTO temp values(n4);
        INSERT INTO temp values(n5);
        INSERT INTO temp values(n6);
        INSERT INTO temp values(n7);
        BEGIN
           DECLARE done2 BOOLEAN default 0;
           DECLARE my_cursor2 cursor  FOR select * from temp order by number;  
           OPEN my_cursor2;
             FETCH my_cursor2 INTO o1;
             FETCH my_cursor2 INTO o2;
             FETCH my_cursor2 INTO o3;
             FETCH my_cursor2 INTO o4;
             FETCH my_cursor2 INTO o5;
             FETCH my_cursor2 INTO o6;
             FETCH my_cursor2 INTO o7;

             IF NOT EXISTS (SELECT * FROM aux where number1=o1 AND number2=o2 AND number3=o3 
                            AND number4=o4 AND number5 = o5 AND number6 = o6 AND number7=o7 ) 
             THEN
                 INSERT INTO tab VALUES (n1,n2,n3,n4,n5,n6,n7);
             END IF;
           CLOSE my_cursor2;
         END;
UNTIL done END REPEAT;
CLOSE my_cursor; 
```

编辑： - 在 INIT 的每一行中，所有整数都是不同的。-INIT的主键是(number1,number2,...,number7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:15:26.133

您正在对每一行进行大量查询……这不是一个好方法。

相反，您可以使用一些数据库功夫在*没有*存储过程的情况下完成工作：

```
insert into tab
select number1, number2, number3, number4, number5, number6, number7 from (
  select number1, number2, number3, number4, number5, number6, number7, 
    group_concat(number order by number) as sig from (
      select number1, number2, number3, number4, number5, number6, number7, number1 as number
      union all select number1, number2, number3, number4, number5, number6, number7, number2
      union all select number1, number2, number3, number4, number5, number6, number7, number3
      union all select number1, number2, number3, number4, number5, number6, number7, number4
      union all select number1, number2, number3, number4, number5, number6, number7, number5
      union all select number1, number2, number3, number4, number5, number6, number7, number6
      union all select number1, number2, number3, number4, number5, number6, number7, number7) a
) group by sig) b 
```

这里涉及的关键技巧是：

*   内部选择允许`group_concat`按照标准顺序对数字进行分组，以便可以比较组合
*   `group_concat`with order by 为您提供数字的唯一签名
*   在 mysql 中使用`group by` *无*聚合为您提供每个分组列值的*第一行*

顺便说一句，正确的术语是*组合*而不是*排列*

另外，我还没有测试过这个，所以可能有一个错位的支架等，但它应该“基本上”工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T02:08:43.680

mysqlism，比较使用GROUP_CONCAT：

```
create table p -- data source
(
  grp int auto_increment primary key, n1 int, n2 int, n3 int, n4 int, n5 int, n6 int, n7 int  
  );

insert into p(n1,n2,n3,n4,n5,n6,n7) 
select 1,2,3,7,19,21,6 union
select 19,2,3,7,1,21,6 union
select 20,2,3,7,1,21,6;

create table g -- staging table
(
  grp int,
  n int
);

insert into g(grp, n)
select grp, n
from
(
    select grp, n1 as n from p
    union all
    select grp, n2 from p
    union all
    select grp, n3 from p
    union all
    select grp, n4 from p
    union all
    select grp, n5 from p
    union all
    select grp, n6 from p
    union all
    select grp, n7 from p
) as x 
```

独特的提取器：

```
select grp, n1, n2, n3, n4, n5, n6, n7
from p
where grp in
(
 select min(grp) as first_elem -- select only one among duplicates
 from
 ( 
    select grp, group_concat(n order by n) as comb
    from g
    group by grp
 ) as x
 group by comb
); 
```

基本上，对数字进行排序，这样它们更适合组合比较，然后使用一些 MySqlism 来简化比较逻辑，即使用 group_concat

现场测试：[http ://sqlfiddle.com/#!2/7b61f/1](http://sqlfiddle.com/#!2/7b61f/1)

# jquery-mobile - jQuery Mobile 从提交按钮指定页面动画

> ID：10238902
> 
> 赞同：4
> 
> 时间：2012-04-20T00:59:43.253
> 
> 标签：jquery-mobile

在 jQuery mobile 中创建表单时，似乎默认的表单功能是从`<form>`标签而不是提交按钮指定页面加载动画。我正在尝试使用两个提交按钮构建一个表单，每个按钮都应该执行不同的动画（这听起来很奇怪，但在应用程序的上下文中它是有意义的。但这不是问题的重点:)）

有没有一种方法可以绕过标签中的默认规范，而是在标签中为每个提交按钮`<form>`指定动画？`<input>`所以这就是我想要的：

```
//this is where I have to specify the animation now, but I only want one button
//to trigger a "pop" animation
<form action='blah.php' data-transition='pop'>
    //form elements and whatnot

    //I'd like this button to have one animation by specifying it here:
    <input type='submit' value='submit button 1' data-transition='slide'>

    //And this button to have a different animation by specifying it here:
    <input type='submit' value='submit button 2' data-transition='pop'> 
```

现在，`<input>`无论我是否在`<form>`

有谁知道我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:24:14.967

可能是我错了，我认为提交按钮不支持转换，但锚标签支持.. 使用锚标签试试这个......

例如，

```
<form action="blah.php" method="get">
<a id="direct1" data-transition="slide">submit button 2</a>
<a id="direct2" data-transition="pop">submit button 2</a>
</form> 
```

如果此代码确实运行，请尝试添加`data-ajax="false"`锚点......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T11:35:33.580

只需将数据转换放在`<form>`标签上。

```
<form action="login.php" method="post" data-transition="slideup" data-direction="reverse">
...your content form here...
</form> 
```

即使您的 POST 管理页面将位置标题设置为另一个页面，也可以工作。

# iphone - IOS。在启动应用程序时完全下载图像之前设置空图像

> ID：10238904
> 
> 赞同：0
> 
> 时间：2012-04-20T01:00:10.920
> 
> 标签：iphone, xcode, download, uiimage, reload

我的应用程序在启动时会显示照片提要，就像 Instagram 一样。我的问题是应用程序在完全下载之前显示空图像（用于单元格）属性。

当我向下滚动视图并再次向上滚动时（使某些单元格不可见，然后通过滚动使其可见），然后单元格图像就会出现！

设置单元格的方法是这样的..

```
- (AQGridViewCell *)gridView: (AQGridView *)aGridView cellForItemAtIndex: (NSUInteger)index {
    static NSString *PlainCellIdentifier = @"PlainCellIdentifier";

    GridViewCell *cell = (GridViewCell *)[aGridView dequeueReusableCellWithIdentifier:@"PlainCellIdentifier"];

    if ( cell == nil ) {
        cell = [[GridViewCell alloc] initWithFrame: CGRectMake(0, 0, 74, 74)
                                   reuseIdentifier: PlainCellIdentifier];
    }

    [cell.captionLabel setText:text];

    [cell.imageView setImage:image];

    return cell;
} 
```

[setImage:] 方法等待图像完成，或显示正在下载图像，或自动重新加载，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:15:17.377

你可以使用[SDWebImage](https://github.com/rs/SDWebImage)

Web Image 这个库为 UIImageVIew 提供了一个类别，支持来自网络的远程图像。

它提供：

一个向 Cocoa Touch 框架添加 Web 图像和缓存管理的 UIImageView 类别 异步图像下载器 具有自动缓存过期处理的异步内存 + 磁盘图像缓存 保证不会多次下载相同的 URL 保证不会出现虚假 URL t 一次又一次地重试表演！

# heroku - Heroku 托管网站上的 CSS 加载速度很慢

> ID：10238907
> 
> 赞同：1
> 
> 时间：2012-04-20T01:01:13.270
> 
> 标签：heroku, clojure, noir

我正在使用 heroku 来托管一个使用 noir 的 clojure 应用程序。它是带有一个网络测功机的免费帐户。

我在加载网站内容时遇到了麻烦，但是 CSS 没有加载。在几次刷新时，它将正确加载。但是，如果我要再次清除浏览器缓存并刷新，则会观察到相同的行为。

因此，所有新用户的体验都很糟糕，第一次只显示原始内容。

任何建议，将不胜感激。

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:33:11.437

我通过在 EC2 上创建服务器然后使用 nginx 提供静态资源来解决它。我不确定我会如何在heroku上做到这一点。

# wcf - 带有工作线程的 WCF 服务 - 如何设计？

> ID：10238909
> 
> 赞同：0
> 
> 时间：2012-04-20T01:01:36.030
> 
> 标签：wcf, worker-thread

我有一个为一些客户提供服务的 WCF 服务。设计是：

*   WCF 服务层
*   业务逻辑层
*   数据访问层（LINQ-To-Entities）

我需要有一个工作线程来对数据库进行一些连续工作（查找新记录，如果发现任何记录 - 以“推送”方式向客户端发送信息，这意味着 - 客户端将托管服务，以便它可以从这个工作线程接收“推送”通知）。

我将在 Windows 服务上托管 WCF 服务。

问题是：在我的设计中，我应该在哪里安装这个工作线程？它是否应该与 WCF 服务一起在 Windows 服务的“Program.cs”的“Main()”中生成？（这意味着它应该是 WCF 服务程序集的一部分）或者它应该是业务逻辑层的一部分 - 因此是“业务逻辑”程序集的一部分？

我的想法是：

![在此处输入图像描述](../Images/dbd0be8270a2282da6a1d0a16aa09ab1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:46:21.393

为什么它需要成为任一组件的一部分？我会完全在它自己的进程中托管这个工作线程。例如，将其托管在单独的 Windows 服务中。

然后它可以轮询数据库并将数据推送到客户端。

**更新**

您的设计将三种不同类型的操作结合在一起。首先你有数据库读取操作。然后你有数据库更新操作。然后你有数据库通知（或事件）。

这些不同类型的操作要求中的每一个都应该相互分离。这使得整个架构更易于维护和理解。

例如，通过解耦读取操作，您可以决定是否使用服务接口。也许可以让您的客户端使用 ADO 直接连接数据库以执行选择操作？

无论如何，无论您是否使用服务，更新操作都应该离线。没有充分的理由将读写操作耦合在一起。这也允许您减少数据库争用的可能性，并再次保持一切简单。客户端向更新队列发送异步更新命令，然后更新服务更新数据库。

这就是我的想法：

![在此处输入图像描述](../Images/6ba5bd5f1d9af22737651e444891922e.png)

# python - 没有翅膀的蟒蛇

> ID：10238913
> 
> 赞同：0
> 
> 时间：2012-04-20T01:02:32.917
> 
> 标签：python

好的，我对 python 很陌生，在我的课堂上，教授分配了一个作业，我们在没有翅膀的情况下修复代码。我真的很困惑，因为提示要求我们“通过单击任务栏中看起来像终端屏幕的图标来打开终端窗口。打开后会出现提示。键入命令：

```
cd Desktop/cs141/11execution
python hello.py 
```

所以我明白它要求我做什么，我想我打开了终端窗口......但它给了我一个语法错误。有人可以向我解释如何实际使用python（如何在不使用wing的情况下打开文件。）。如果这听起来很愚蠢，我很抱歉，但我非常困惑，因为我什至无法打开文件来处理它。

我打开终端窗口，输入作业告诉我要做的命令，它给了我这个：

```
cd Desktop/cs141/11execution
File "<stdin>", line 1
cd Desktop/cs141/11execution
SyntaxError: invalid token 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T01:18:51.033

因为您的实际作业任务是在没有 IDE 帮助的情况下运行和调试代码，所以我想我至少可以向您详细介绍导致您感到困扰的过程的详细信息……我可以编辑此答案以适合您的更新。

当您打开终端时，您应该会看到等待输入的命令提示符。这是一个贝壳。默认情况下，您所在的 shell 取决于系统，但让我们假设它的“bash”。如果您看到以“$”结尾的提示，它可能会 bash

当您在 bash shell 中时，您可以发出命令。Python 脚本首先告诉系统需要理解哪种类型的解释器。您的脚本很可能以类似`#!/usr/bin/env python`的开头，告诉系统以下文本应该使用 python 运行。

**确保您实际上是在命令提示符中，而不是 python 解释器**

所以一旦你打开了一个终端，你首先想要切换到你的 python 脚本所在的目录。`cd /path/to/location`告诉 bash 更改当前工作目录。您现在将位于您的 python 脚本所在的位置。

当你运行时`python myscript.py`，你明确告诉 python 运行这个脚本，不管脚本顶部的`#!...`. 此时，您的脚本应该执行并且输出将与脚本相关。

在您的示例输出中，您很可能输入了一个 python 解释器，这可能是通过简单地键入`python`. 如果您最终看到它正在等待输入，您可以验证这一点`>>>`。在这一点上，你做错了什么。`cd`不是有效的 python 命令。这是一个shell命令。

**更新**

您现在显然是在 Windows 中，所以正如我在主要评论中提到的...通过转到开始菜单 -> 运行 -> 键入“cmd” -> 按 Enter 打开命令提示符。现在继续按照您的指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:21:38.587

1.  打开记事本，输入`print 'Hello World'`并保存为 Python 文件 ( `hello.py`)。将此文件放在路径中`Desktop\cs141\11execution`
2.  按 Windows 按钮，键入`cmd`，按回车键打开命令提示符
3.  键入`cd C:\Users\[Your_User_name]\Desktop\cs141\11execution`作业中提到的命令
4.  输入`python hello.py`

如果您遇到错误，`python is not recognized as an internal or external command, operable program or batch file.`您的环境变量没有指向正确，这可以很容易地解决。在第 4 步中，只需键入`C:\Python27\python.exe hello.py`，它应该像魅力一样工作

这意味着您已经通过命令行运行了 Python 脚本。它总是教给 Python 初学者的，因为像 Wing 这样的 IDE 让人产生依赖，并且尽早学习不同的方法来运行 Python 脚本是件好事。

您尝试做的是使用 Python 解释器（如果您只是`python`在命令提示符窗口中键入）来运行命令。这与运行*脚本*不同，因为解释器允许您以交互方式测试命令。

# c# - AcceptsReturn="False" 用于 AvalonEdit

> ID：10238921
> 
> 赞同：1
> 
> 时间：2012-04-20T01:03:41.257
> 
> 标签：c#, xaml, avalonedit

我需要一个单行 AvalonEdit 控件（相当于带有 AcceptsReturn="False" 的 TextBox）。

AvalonEdit 似乎没有这个属性。

如何为 AvalonEdit 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:15:12.223

如果 Key 为 Return，您可以尝试处理该`PreviewKeyDown`事件并设置为 true。`e.Handled`

另外，我猜您想防止将换行符粘贴到文本区域中。这必须通过以下方式完成：

```
void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    // Find the Paste command of the avalon edit
    foreach (var commandBinding in textEditor.TextArea.CommandBindings.Cast<CommandBinding>())
    {
        if (commandBinding.Command == ApplicationCommands.Paste)
        {
            // Add a custom PreviewCanExecute handler so we can filter out newlines
            commandBinding.PreviewCanExecute += new CanExecuteRoutedEventHandler(pasteCommandBinding_PreviewCanExecute);
            break;
        }
    }
}

void pasteCommandBinding_PreviewCanExecute(object sender, CanExecuteRoutedEventArgs e)
{
    // Get clipboard data and stuff
    var dataObject = Clipboard.GetDataObject();
    var text = (string)dataObject.GetData(DataFormats.UnicodeText);
    // normalize newlines so we definitely get all the newlines
    text = TextUtilities.NormalizeNewLines(text, Environment.NewLine);

    // if the text contains newlines - replace them and paste again :)
    if (text.Contains(Environment.NewLine))
    {
        e.CanExecute = false;
        e.Handled = true;
        text = text.Replace(Environment.NewLine, " ");
        Clipboard.SetText(text);
        textEditor.Paste();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T21:04:59.780

这是我的 Editor.TextArea.PreviewKeyDown 处理程序：

```
 private void TabToOkayBtn(object sender, KeyEventArgs args)
    {
        if (args.Key == Key.Tab)
        {
            args.Handled = true;
            Dispatcher.BeginInvoke(DispatcherPriority.Input, new Action(() => // input priority is always needed when changing focus
                _editor.TextArea.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next))));
        }
    } 
```

您还可以检查转移状态以转到“上一个”并使用三元运算符来选择方向：

```
var shiftPressed = (args.KeyboardDevice.Modifiers & ModifierKeys.Shift) == ModifierKeys.Shift; 
```

# c# - 文本框不会刷新文本，但消息框会

> ID：10238925
> 
> 赞同：2
> 
> 时间：2012-04-20T01:04:12.987
> 
> 标签：c#, .net, multithreading, string, invoke

我在这个应用程序中使用了两个线程，这是一个 Tron 游戏。我有一个在每场比赛结束时显示分数的文本框。每个“游戏”都在第二个 drawThread 线程中绘制。

问题是，在我更改 TextBox.Text 之后，我在 MessageBox 的行中显示分数，并且 MessageBox 显示分数很好，但是 TextBox 没有。

![在此处输入图像描述](../Images/fa40d05955f54191232b98a03851bdfb.png)

有任何想法吗？我确保使用线程安全调用（但是我正在更改创建它的线程中的文本）。有问题的代码在 createGame() 方法中，并且是

> 设置标签（分数）；

```
public Form1()
        {
            InitializeComponent();
            canvas = game_panel.CreateGraphics();
            formCanvas = this.CreateGraphics();
            game_panel.Invalidate(true);
            bikes = new List<LightBike>();
            bikes.Add(new LightBike(new Point(game_panel.Size.Width - 25, game_panel.Height / 2), Color.Blue, "left", new DirectionKeys(Keys.Left, Keys.Down, Keys.Up, Keys.Right, Keys.Control)));
            bikes.Add(new LightBike(new Point(25, game_panel.Height/2), Color.Red, "right", new DirectionKeys(Keys.A, Keys.S, Keys.W, Keys.D, Keys.Q)));
            createGame();  
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (drawThread.ThreadState == ThreadState.Stopped)
            {
                InitializeComponent();
                createGame();
                drawThread.Start();
            }
            else
            {
                if(drawThread.ThreadState != ThreadState.WaitSleepJoin)
                    drawThread.Start();
            }
            button1.Text = "Play Again";

        }
public void SetLabel(string message)
        {

            if (this.textBox1.InvokeRequired)
                this.textBox1.Invoke((Action<string>)SetLabel, message);
            else
                this.textBox1.Text = message;
            MessageBox.Show(message); 
        }
 public void createGame()
        {   
             if (!firststart)
            {
                foreach (LightBike b in deleteBikes)
                {
                    if(b.color == Color.Blue)
                        bikes.Insert(0,b);
                    if (b.color == Color.Red)
                        bikes.Insert(1, b);
                }
                bikes[0].Redraw(new Point(game_panel.Size.Width - 25, game_panel.Height / 2), "left");
                bikes[1].Redraw(new Point(25, game_panel.Height / 2), "right");
            }
            drawThread = new Thread(drawBikes); 
            grid = new int[game_panel.Size.Width, game_panel.Size.Height]; //create the grid map

            game_panel.Update();

            String score = "";
            foreach (LightBike b in bikes)
            {
                score += b.toColorString() + ": " + b.score + " ";
            }
            SetLabel(score);
            textBox1.Refresh();        
        }

public void drawBikes()
        {
            String gameStatus = "WIN";

            deleteBikes = new List<LightBike>();
            while (true)
            {
                int tieCount = 0;

                foreach (LightBike b in bikes) //check collision
                {

                    if (!isValidLocation(b.location))
                    {
                        deleteBikes.Add(b);
                        tieCount++;
                    }
                }
                    foreach (LightBike b in deleteBikes)
                    {
                        //MessageBox.Show("DELETED BIKES: " + b.color.ToString());
                        bikes.Remove(b);
                    }
                    if (tieCount > bikes.Count) //if the deleteBikes contain more than the bikes
                    {
                        gameStatus = "TIE";
                        break;
                    }

                if (bikes.Count <= 1) //game over
                    break;

                foreach (LightBike b in bikes) //draw bikes
                {

                    //canvas.DrawLine(new Pen(b.color, BIKE_SIZE), b.getPreviousLocation(), b.location);
                    canvas.DrawLine(new Pen(b.color, BIKE_SIZE) { EndCap = System.Drawing.Drawing2D.LineCap.Square }, b.location, b.getNextLocation());
                    //MessageBox.Show("Bike "+b.color.ToString()+": "+Form1.ActiveForm.GetPixelColor(b.location.X, b.location.Y).ToString());
                    grid[b.location.X, b.location.Y] = (bikes.IndexOf(b) + 1);
                }

                foreach (LightBike b in bikes) //update positions
                {
                    if(b.isBoosting && b.boostCounter > 0) //player is boosting
                    {
                        while(isValidLocation(b.getNextLocation()))
                        {
                            b.location = b.getNextLocation();
                            b.boostCounter--;
                            if (b.boostCounter == 0)
                            {
                                b.isBoosting = false;
                                b.boostCounter = 20;
                            }
                        }
                    }
                    b.location = b.getNextLocation();

                }

                Thread.Sleep(GAME_SPEED);

            }
            String endingString ="";
            foreach (LightBike b in bikes)
            {
                endingString += b.toColorString() + " ";
                if (gameStatus == "WIN")
                    b.score += 1;    
            }

            endingString += gameStatus+"!";
            canvas.DrawString(endingString,new Font("Times New Roman",20),new SolidBrush(Color.White),new Point(150,200));

            firststart = false;
            drawThread.Abort();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:38:00.967

而不是这个：

```
public void SetLabel(string message)
{

    if (this.textBox1.InvokeRequired)
        this.textBox1.Invoke((Action<string>)SetLabel, message);
    else
        this.textBox1.Text = message;
    MessageBox.Show(message); 
} 
```

只需这样做：

```
public void SetLabel(string message)
{
    // processing things here

    this.Invoke((MethodInvoker)delegate
    {
        // UI things here

        this.textBox1.Text = message;
    });

    MessageBox.Show(message);   
} 
```

这样，您就不需要不断检测 InvokeRequired

# javascript - 无法使用 awssum 和 nodejs 将图像保存到亚马逊 S3

> ID：10238933
> 
> 赞同：1
> 
> 时间：2012-04-20T01:05:38.277
> 
> 标签：javascript, node.js, amazon-s3

我的节点 js 代码从我的服务器 tmp.png 打开一个本地 png 文件，然后尝试将其保存为 amazon S3。我一直遇到问题，我怀疑它与编码有关。它工作的唯一方法是使用 base64 编码（我不想要我的照片）。

```
fs = require('fs');
var awssum = require('awssum');
var amazon = awssum.load('amazon/amazon');
var s3Service = awssum.load('amazon/s3');

var s3 = new s3Service('mykey', 'mysecret', 'account', amazon.US_WEST_1);

fs.readFile('./tmp.png', function (err, data){
    if(err){
        console.log("There was an error opening the file");
    } else {
        s3.PutObject({
            BucketName : 'my-bucket',
            ObjectName : 'tmp.png',
            ContentType : 'image/png',
            ContentLength : data.length,
            Body          : data,
        }, function(err, data) {
            if(err){
                console.log("There was an error writing the data to S3:");
                console.log(err);
            } else {
                console.log("Your data has been written to S3:");
                console.log(data);
            }
        });
    }

}); 
```

显然 my-bucket 实际上是我唯一的存储桶名称。我从亚马逊收到的消息是请求超时：

> 在超时期限内未读取或写入您与服务器的套接字连接。空闲连接将被关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:17:18.143

看起来像是在文档中找到的一个示例，它可以满足我的需要。关键是使用 fs.stat 作为文件大小，使用 fs.createReadStream 读取文件：

```
// you must run fs.stat to get the file size for the content-length header (s3 requires this)
fs.stat(path, function(err, file_info) {
    if (err) {
        inspect(err, 'Error reading file');
        return;
    }

    var bodyStream = fs.createReadStream( path );

    console.log(file_info.size);

    var options = {
        BucketName    : 'my-bucket',
        ObjectName    : 'test.png',
        ContentType   : 'image/png',
        ContentLength : file_info.size,
        Body          : bodyStream
    };

    s3.PutObject(options, function(err, data) {
        console.log("\nputting an object to my-bucket - expecting success");
        inspect(err, 'Error');
        inspect(data, 'Data');
    });
}); 
```

# php - 如何通过php文件编辑apache配置

> ID：10238935
> 
> 赞同：0
> 
> 时间：2012-04-20T01:05:41.473
> 
> 标签：php

我的服务器没有任何控制面板

我正在尝试构建允许我将子域添加到我的站点的文件

通过编辑（apache配置文件）和（命名区域）

但我没有编辑这些文件的权限！！我只能阅读它们！

我的示例文件是

mysite.com/panel/file.php

```
<?

    if ( $_GET['read_httpd']){

    $content = file_get_contents ( '/etc/httpd/conf/httpd.conf' );

    if ( !empty ( $content ) )

        echo 'File Read!<br />';

        echo $content;

    }

    elseif ( $_GET['remove_named'] ){

        $delete = unlink ( '/var/named/alaa.hosts' );

        }

    elseif ( $_GET['remove_config'] ){

        $delete = unlink ( '/etc/httpd/conf/httpd.conf' );

}

?> 
```

我已成功读取文件，但我无法编辑！

那么，我怎样才能允许文件编辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:12:09.050

好像是个反问句，`i've no permissions to edit this files, How can i allow the file to edit?`。

您可以尝试的只是保留配置文件，如果您可以设置通配符子域，请使用 url 重写将不同的子域路由到不同的位置/文件夹。确切的操作方法取决于您所在的平台。

# ruby - 可以将类方法添加到 Ruby 对象的某些实例而不是其他实例吗？

> ID：10238936
> 
> 赞同：-1
> 
> 时间：2012-04-20T01:05:47.900
> 
> 标签：ruby, module, object-model

这是一个包含一些方法的模块：

```
module M
  def x; y; end
  def y; ...; end
end 
```

这是一个类：

```
class C
  def z; ...; end
end 
```

我有两个实例`C`：

```
 c1 = C.new
 c2 = C.new 
```

有什么我可以做的`c1`，`c1.class`有`x`和`y`，但`c2.class`没有？我没有看到颠覆方法查找的直接方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:47:38.400

正如得[墨忒耳法则](http://devblog.avdi.org/2011/07/05/demeter-its-not-just-a-good-idea-its-the-law/)所暗示的，与其做，不如做`c1.class.x`，何乐而不为呢？`c1.x`

```
class C
  def self.x
    "hi"
  end
end

c1 = C.new
c2 = C.new
def c1.x
  self.class.x
end
c1.x # => "hi"
c2.x # NoMethodError 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:09:38.560

您可以覆盖`c1.class`以返回 C 以外的其他内容（而其他内容将扩展 M）。除此之外，没有。

请注意，覆盖`c1.class`几乎肯定是一个坏主意。一个对象不应该谎报它的类是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T01:17:12.820

也许这

```
c1.extend(M)

c1.methods & [:x, :y] #=> [:x, :y]
c2.methods & [:x, :y] #=> [] 
```

# python - 自我未定义

> ID：10238938
> 
> 赞同：0
> 
> 时间：2012-04-20T01:06:00.427
> 
> 标签：python

这是堆栈跟踪：

```
Traceback (most recent call last):
  File "V:\Users\Administrator\AppData\Roaming\Blender Foundation\Blender\2.61\scripts\addons\ArenWorldExporter.py", line 73, in execute
    _mkdir(self.filepath[:-4] + "\\models\\")
  File "V:\Users\Administrator\AppData\Roaming\Blender Foundation\Blender\2.61\scripts\addons\ArenWorldExporter.py", line 73, in _mkdir
    _mkdir(self.filepath[:-4] + "\\models\\")
NameError: global name 'self' is not defined 
```

这是代码： http: [//pastebin.com/B2U0DAr8](http://pastebin.com/B2U0DAr8)

所有的间距都设置为4个空格，没有制表符（甚至不确定python编辑器是否支持制表符）

为什么说 self 没有定义？因为它显然在函数中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:45:19.980

该行：

```
 _mkdir(self.filepath[:-4] + "\\models\\") 
```

应该：

```
 self._mkdir(self.filepath[:-4] + "\\models\\") 
```

如果要查看`self`in `_mkdir()`，则必须在实例上调用它。

# javascript - 移动应用 (html5/javascript) 与 Google App Engine 通信示例

> ID：10238943
> 
> 赞同：1
> 
> 时间：2012-04-20T01:07:13.123
> 
> 标签：javascript, html, google-app-engine

我正在构建一个使用 GAE 作为后端服务器 (Java) 的移动应用程序 (html5/javascript + PhoneGap)。经过几天的研究，仍然无法得到全貌。

在通信部分是否有这种配置的开源示例？主要是 OAuth、从移动客户端发送/接收数据、用户 Channel API、推送通知等。

GAE 中的所有示例都适用于 Web 应用程序，但我认为不适用于外部移动客户端。这就是为什么它完全不同。

我在某处了解到 XMLHttpRequest 不支持跨域通信，所以我不应该使用它吗？

jQuery.ajax() 似乎可以满足我的要求？同样，一个开源示例项目可以帮助我很多！

任何链接/建议将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T16:59:02.917

> > 在通信部分是否有这种配置的开源示例？

[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

或者，进一步调查 jquery ajax 调用...

```
function uploadPicture() {

  // blog.w3villa.com/websites/uploading-filesimage-with-ajax-jquery-without-submitting-a-form/
  // 

  var form_data = new FormData();      // Creating object of FormData class
  var file_data = photo.src;   // Getting the properties of file from file field
  // form_data.append("file", file_data);  // Appending parameter named file with properties of file_field to form_data
  // var blob = new Blob([file_data], {type: 'image/png'});
  // form_data.append("file", blob)

  var dataURI = photo.src;

  alert(dataURI);

  form_data.append("file", dataURItoBlob(dataURI));

  form_data.append("field1", "stuff1");     // Adding extra parameters to form_data
  alert(JSON.stringify(form_data));

  $.ajax({
      url: serverURL,
      dataType: 'json',    // the format of the response
      cache: false,
      contentType: false,  // the format of data being sent to the server as part of request
      //                      shazwazza.com/post/Uploading-files-and-JSON-data-in-the-same-request-with-Angular-JS
      //                      setting the Content-type to 'false' will force the request to automatically
      //                      populate the headers properly including the boundary parameter.
      // stackoverflow.com/questions/2845459/jquery-how-to-make-post-use-contenttype-application-json
      // contentType:"application/json; charset=utf-8",
      // contentType:"multipart/form-data; charset=utf-8",
      processData: false,    // do not convert outgoing data to a string
      data: form_data,       // Setting the data attribute of ajax with file_data
      type: 'post',
      success: function(data) {
                alert("success! data: " + JSON.stringify(data));
                }
  }); 
```

# asp.net - 带有不允许用户名/密码的智能卡的 Windows 身份验证 ASP.NET 3.5

> ID：10238948
> 
> 赞同：1
> 
> 时间：2012-04-20T01:08:54.473
> 
> 标签：asp.net, windows-server-2008, windows-authentication, smartcard

使用Windows身份验证时是否可以不允许用户名和密码？

我在 DomainB 上有一个 ASP.NET Web 应用程序，用户从 DomainA 中的浏览器访问，可以使用具有 Windows 身份验证的智能卡自动登录，它将客户端证书映射到域（b）用户帐户，并以用户身份登录应用程序. 所有这些都有效，但是如果证书没有映射，等等......然后 Windows Auth 会提示输入用户名和密码。如果他们输入用户名和密码，它就可以工作，我想特别防止这种情况，只允许智能卡访问/登录。没有使用 login.aspx/forms 身份验证。

这是关于 2008R2/IIS7.5/impersonation

# python - BeautifulSoup：如何用元素标签替换元素中的值？

> ID：10238951
> 
> 赞同：10
> 
> 时间：2012-04-20T01:09:28.593
> 
> 标签：python, beautifulsoup

假设我有这段 HTML：

```
<p>This text is my <a href="#">text</a><p> 
```

如何用锚元素替换第一个“文本”，结果变为：

```
<p>This <a href="#">text</a> is my <a href="#">text</a><p> 
```

我基本上想用标签替换 NavigableString 中的子字符串。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T02:08:22.057

你的问题有两个部分：

1.  将单个 NavigableString“This text is my”转换为 NavigableString、Tag 和另一个 NavigableString。

2.  用三个新元素替换 NavigableString “This text is my”。

＃1的答案取决于您的情况。具体来说，这取决于您如何确定文本的哪一部分需要链接。我将使用正则表达式来查找字符串“text”：

```
from bs4 import BeautifulSoup
data = '<p>This text is my <a href="#">text</a><p>'

soup = BeautifulSoup(data)
original_string = soup.p.contents[0]

print(original_string)
# "This text is my "

import re
this, text, is_my = re.compile("(text)").split(original_string) 
```

现在为#2。这并不容易，但绝对有可能。首先，`text`变成一个`Tag`包含链接文本的：

```
text_link = soup.new_tag("a", href="#")
text_link.string = text 
```

`re.split()`变成普通`this`的`is_my`Unicode字符串。将它们转回`NavigableString`s 以便它们可以作为元素返回到树中：

```
this = soup.new_string(this)
is_my = soup.new_string(is_my) 
```

现在使用`replace_with()`and`insert_after`用三个新元素替换旧元素：

```
original_string.replace_with(this)
this.insert_after(text_link)
text_link.insert_after(is_my) 
```

现在你的树应该看起来像你想要的那样：

```
print(soup.p)
# <p>This <a href="#">text</a> is my <a href=""></a></p> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-06T05:33:06.200

您可以获取 NavigableString 的文本，对其进行修改，从修改后的文本构建新的对象模型，然后用此对象模型替换旧的 NavigableString：

```
data = '<p>This text is my <a href="#">text</a><p>'
soup = BeautifulSoup(data)
original_string = soup.p.contents[0]
new_text = unicode(original_string).replace(' text ', '<a href="#">text</a>')
original_string.replaceWith(BeautifulSoup(text)) 
```

# javascript - 页面缩放时可用的事件

> ID：10238952
> 
> 赞同：0
> 
> 时间：2012-04-20T01:09:31.210
> 
> 标签：javascript, html, javascript-events

当用户放大页面时，是否有可以访问的事件？我想在用户缩放时修复元素的位置。

```
<div id='a'> </div>
<div id='b'> </div>

<script type="text/javascript">
   var right = $('#a').offset().right;
   $('#a').css('right',right);
</script> 
```

我会将此代码放在事件中以进行缩放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:23:48.617

您可以尝试破解来尝试检测这一点，但实际上他们不希望开发人员能够访问它，因为您可以编写代码来破坏缩放的目的。EG 缩小元素以使其适合，即使用户试图放大元素，因为它们的视力不好，或类似的东西。这个概念甚至适用于移动设备，您无法真正检测到是否有人在 iphone 上进行了捏缩放等。您会发现的方法包括定位元素和监听变化，但是如果用户在缩放时这将无济于事页面加载，即使不是，它仍然不是万无一失的。

如此简短的回答，没有类似于 window.resize 的 window.zoom 事件。

# grails - Grails，从 gsp 更改域类属性

> ID：10238955
> 
> 赞同：0
> 
> 时间：2012-04-20T01:10:03.490
> 
> 标签：grails, gsp, grails-domain-class

用于更改 gsp 中域类属性的方法是什么？

前任：

域类项目具有日期类型的到期日期。我想在 gsp 中设置其日期而不使用标签原因是，我正在使用 jquery 的 datepicker，这很好，因为它没有一个丑陋的 mm/dd/yyyy 下拉列表，它有一个不错的小日历可供单击上。任何人，有什么想法吗？

在此先感谢 :D :D :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:54:16.660

好吧，Grails 使用 MVC 模式，因此您不应该直接更改 GSP 页面中的域类属性。

当然，您可以使用 JQuery 日期选择器，但您应该提供一个控制器操作来更新您的域类属性

```
def updateDateUsingAjax() {
  def domain = MyDomain.load(params.id)

  /*
  Lets pretend the content of params.date has the format MM/dd/yyyy  
  You can use Date.parse method of the Groovy JDK to create a java.util.Date instance of a String. 
  http://groovy.codehaus.org/groovy-jdk/java/util/Date.html#parse(java.lang.String, java.lang.String)
  */

  domain.myDate = Date.parse('MM/dd/yyyy', params.date)

  domain.save()
} 
```

现在您只需要编写一个对该控制器操作的 Ajax 调用，并且您成功地将表示层与应用程序的其余部分分离。

这就是您的 GSP 的样子。

```
<!doctype html>
<html>
<head>
    <meta name="layout" content="main"/>
    <title>Welcome to Grails</title>
    <r:require module="jquery-ui"/>
</head>
<body>
<div>
    <g:formRemote name="myForm" url="[controller: 'standard', action: 'updateDateUsingAjax']" onSuccess="showDialog()">
        <p>Your date: <g:textField name="pick"/> </p>
        <p><g:hiddenField name="id" value="your id"/></p>
        <input type="submit" value="Delete Book!" />
    </g:formRemote>

</div>

<div id="dialog" title="Success" style="display:none;">
    <p>You have successfully updated your date</p>
</div>

<script type="text/javascript">
    $(document).ready(function()
    {
        $("#pick").datepicker({dateFormat: 'yy/mm/dd'});
    })

    function showDialog() {
        $("#dialog").dialog();
    }
</script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:11:43.013

也许你应该试试 Joda-Time 插件： http: [//grails.org/plugin/joda-time](http://grails.org/plugin/joda-time)

并查看这篇博文：[使用 HTML5、jQuery 和 Modernizr 渲染 Grails Joda-Time 日期输入跨浏览器](http://adhockery.blogspot.mx/2010/07/rendering-date-inputs-cross-browser_10.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T01:26:25.290

有一个 Grails JQuery UI 插件可能适合您的需要。有关详细信息，请参阅[http://grails.org/plugin/jquery-ui](http://grails.org/plugin/jquery-ui)。

即使这个特定的插件不适合您的需求，我认为也会有一个插件可以满足您的需求。

# android - Android：如何在 EditText 中直观地指示条形码扫描能力

> ID：10238957
> 
> 赞同：0
> 
> 时间：2012-04-20T01:10:17.477
> 
> 标签：android, android-edittext, zxing

我有一个 Android 应用程序，它有几个`EditText`具有条形码扫描能力的项目（用户长期持有并调用 ZXing 意图）。

我需要做的是在视觉上向用户表明该项目附加了条形码扫描仪功能，但我无法找到一种“标准”方式来做到这一点，这对普通用户来说是显而易见的。我不希望我的应用程序与其他人的做法格格不入，麻烦的是似乎没有标准的做法，或者我找不到它！

我的方法是使用一种新样式来更改背景颜色、边框或字体，或者将可绘制图像添加到`EditText`. 任何人都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:54:18.597

在移动设备上查看 Google 产品搜索。搜索栏有一个条码按钮，用于启动条码扫描仪应用程序。我建议这是一个很好的先例。

# objective-c - 自定义 UITableViewCell + resignFirstResponder

> ID：10238960
> 
> 赞同：0
> 
> 时间：2012-04-20T01:10:58.140
> 
> 标签：objective-c, ios, uitableview, custom-cell

我有`UITableView`两个`Custom Cells`。其中一个`Custom Cells`包含一个`UITextField`.

当按下返回按钮时，我遇到了隐藏键盘的问题。

```
- (IBAction)textFieldDoneEditing:(id)sender {
     [sender resignFirstResponder];
  } 
```

通常我会使用它，但它从未被调用过。我将它与`Editing Did End`事件联系起来。

是因为我用了一个`Custom Cell`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:41:19.933

无需连接 IBAction。使用委托方法（我还将 IB 中的返回键更改为 Done 以使其对用户更明显）。确保您已将文本字段的委托连接到您的 VC 类。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    // Dismiss the keyboard when the Return key is pressed.
    [textField resignFirstResponder];

    return YES;
} 
```

# .htaccess - 在维护模式下使用 htaccess 显示域名

> ID：10238967
> 
> 赞同：0
> 
> 时间：2012-04-20T01:12:03.600
> 
> 标签：.htaccess, url, redirect

当我的站点处于维护模式时，我使用我的 .htaccess 文件将所有访问者重定向到指定的维护页面。

代码工作得很好，但我不想在地址栏中显示我的维护页面的路径，而是显示我的域名。因此，当访问者被重定向时，我不想在地址栏中显示“www.mysite.com/maintenance.html”，而是显示“www.mysite.com”。这可能吗？

我正在使用的这段代码：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !/maintenance.html$
RewriteCond %{REMOTE_ADDR} !^[my ip address]
RewriteCond %{REQUEST_FILENAME} !.css$
RewriteCond %{REQUEST_FILENAME} !.png$
RewriteCond %{REQUEST_FILENAME} !.jpg$
RewriteCond %{REQUEST_FILENAME} !.gif$
RewriteCond %{REQUEST_FILENAME} !.js$

RewriteRule $ /maintenance.html [R=302,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:20:23.363

> 说得太早了。它仅部分起作用：当我尝试访问除域索引之外的任何其他页面时，我被重定向到维护页面，但是没有出现“维护中”图像和 css。我只在空白页上得到没有样式的文本。

看起来你想做几件事。

1.  在维护模式下，您希望将所有请求重定向到根页面（例如[http://www.mysite.com/](http://www.mysite.com/)）
2.  根页面将显示 /maintenance.html 中的内容

所以我们需要分别解决这两件事：

```
# for #1
RewriteCond %{REQUEST_URI} !^/$
RewriteCond %{REQUEST_URI} !/maintenance.html$
RewriteCond %{REMOTE_ADDR} !^[my ip address]
RewriteCond %{REQUEST_FILENAME} !.css$
RewriteCond %{REQUEST_FILENAME} !.png$
RewriteCond %{REQUEST_FILENAME} !.jpg$
RewriteCond %{REQUEST_FILENAME} !.gif$
RewriteCond %{REQUEST_FILENAME} !.js$
RewriteRule $ / [R=302,L]

# for #2 
RewriteCond %{REMOTE_ADDR} !^[my ip address]
RewriteRule ^$ /maintenance.html 
```

# jquery - 开始开发专用移动网站的资源

> ID：10238971
> 
> 赞同：0
> 
> 时间：2012-04-20T01:13:02.787
> 
> 标签：jquery, mobile, css

我将要为移动设备开发一个基本站点，我想知道在启动移动站点项目时是否应该知道某些限制/要求/资源。

基本上，它将是桌面站点的简化版本，当用户访问 www.example.com 时，它将被重定向到 mobile.example.com。

我想知道的一些事情： - 如何适应不同手机的数量及其不同的视口尺寸 - 使用 javascript 与 css3

有什么好的资源可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:15:19.910

jquery mobile [http://jquerymobile.com/](http://jquerymobile.com/)是一个很好的起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:44:29.853

看看 Sencha Touch。[http://www.sencha.com/products/touch](http://www.sencha.com/products/touch)

还有phonegap [http://wiki.phonegap.com/w/page/36868306/UI%20Development%20using%20jQueryMobile](http://wiki.phonegap.com/w/page/36868306/UI%20Development%20using%20jQueryMobile)

# c - 手动计算文件大小（ASCII 值）

> ID：10238973
> 
> 赞同：0
> 
> 时间：2012-04-20T01:13:44.267
> 
> 标签：c

我需要上大学（简单任务），其中一个问题是：

> 计算包含以下代码的文件大小：

```
main ()
{
   int x;
   soma (x);
} 
```

手动计算我发现大小为 34 字节。

使用 unix shell 命令`$ stat -c %s prog.c`我得到 35 个字节。

每行计为 2 个字节和一个制表符 1，不匹配...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T01:18:26.663

我从您粘贴的内容中得到 35 个字节。我也在那里看不到标签；4 个空格不是制表符。（大多数 Unix 实用程序使用 8 空格制表符。）也就是说，您需要使用`cat -v`、`:set list`in `vi`、十六进制编辑器等来查看文件中的真正内容。（例如，考虑尾随空格。）

# sed - 使用 sed 替换 .bashrc 中的所有标准输出

> ID：10238985
> 
> 赞同：1
> 
> 时间：2012-04-20T01:15:59.463
> 
> 标签：sed, .bash-profile

我想对我的 bash shell 中的所有输出进行 sed 操作。基本上我想把 sed 命令放在 .bashrc 中，这样它就可以“监听”某些关键字来处理它们。

例如，我希望在 .bashrc 中添加这样的内容：

> sed ''/critical/s//$(printf "CRITICAL")/g''

因此，只要弹出“关键”一词，就会将其更改为“关键”。这可能是当我 cat 文件、使用 vi 或远程登录到另一个系统时。我需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:30:06.250

从 shell 执行此操作根本无法正常工作，因为许多命令需要直接访问终端和/或如果它们没有直接连接到终端（由于缓冲），它们的行为会有所不同。此外，虽然您可以强制重定向到文件（`exec`没有命令），但您不能重定向到管道。

这样做的正确方法可能是使用`exec`类似`screen`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:23:12.740

`expect`可以在`interact`“模式”期间执行此操作。[书中的](https://rads.stackoverflow.com/amzn/click/com/1565920902)细节。

# python - matplotlib 继承自 datetime 类图

> ID：10238991
> 
> 赞同：2
> 
> 时间：2012-04-20T01:17:54.023
> 
> 标签：python, datetime, inheritance, matplotlib, base-class

所以情况是这样的。假设我们有：

```
class Test(datetime):
    def a(self):
        return '{0:02d}{1:02d}{2:02d}{3:02d}'.format(self.year % 100, self.month, self.day, self.hour)
x = [Test(2010, 05, 02, 06), Test(2010, 05, 02, 12)]
y = [0, 1] 
```

现在尝试使用：

```
import matplotlib.pyplot as plt
plt.plot(x, y) 
```

给出一个空白图和以下错误：

```
/usr/local/lib/python2.7/dist-packages/matplotlib/pyplot.py in plot(*args, **kwargs)
   2456         ax.hold(hold)
   2457     try:
-> 2458         ret = ax.plot(*args, **kwargs)
   2459         draw_if_interactive()
   2460     finally:
/usr/local/lib/python2.7/dist-packages/matplotlib/axes.pyc in plot(self, *args, **kwargs)
   3847 
   3848         for line in self._get_lines(*args, **kwargs):
-> 3849             self.add_line(line)
   3850             lines.append(line)
   3851 
/usr/local/lib/python2.7/dist-packages/matplotlib/axes.pyc in add_line(self, line)
   1441             line.set_clip_path(self.patch)
   1442 
-> 1443         self._update_line_limits(line)
   1444         if not line.get_label():
   1445             line.set_label('_line%d'%len(self.lines))
/usr/local/lib/python2.7/dist-packages/matplotlib/axes.pyc in _update_line_limits(self, line)
   1449 
   1450     def _update_line_limits(self, line):
-> 1451         p = line.get_path()
   1452         if p.vertices.size > 0:
   1453             self.dataLim.update_from_path(p, self.ignore_existing_data_limits,
/usr/local/lib/python2.7/dist-packages/matplotlib/lines.pyc in get_path(self)
    642         """
    643         if self._invalidy or self._invalidx:
--> 644             self.recache()
    645         return self._path
    646 
/usr/local/lib/python2.7/dist-packages/matplotlib/lines.pyc in recache(self, always)
    390                 x = ma.asarray(xconv, np.float_)
    391             else:
--> 392                 x = np.asarray(xconv, np.float_)
    393             x = x.ravel()
    394         else:
/usr/local/lib/python2.7/dist-packages/numpy/core/numeric.pyc in asarray(a, dtype, order)
    233 
    234     """
--> 235     return array(a, dtype, copy=False, order=order)
    236 
    237 def asanyarray(a, dtype=None, order=None):
TypeError: float() argument must be a string or a number 
```

你们有谁知道发生了什么事吗？是的，我知道有一个`date2num`我可以使用 on `x`，但如果可能的话，我想了解这里错误的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T02:13:13.130

Matplotlib 使用`__class__`对象的属性来确定如何处理它。您`Test`的班级与`datetime`班级不同：

```
>>> from datetime import datetime
>>> class Test(datetime):
...   def a(self):
...     return '{0:02d}{1:02d}{2:02d}{3:02d}'.format(self.year % 100, self.month, self.day, self.hour)
...
>>>
>>> t = Test(2010, 05, 02, 06)
>>> d = datetime(2010, 05, 02, 06)
>>>
>>> getattr(t, '__class__')
<class '__main__.Test'>
>>> getattr(d, '__class__')
<type 'datetime.datetime'> 
```

所以 matplotlib 不会将您的`Test`课程识别为`datetime`.

这是一个丑陋的 hack，它通过注册`Test`类来解决这个问题，以便它以与 a 相同的方式处理`datetime`。查看[`matplotlib.units`](http://matplotlib.sourceforge.net/api/units_api.html#module-matplotlib.units)文档以获取更多信息。不保证此代码适用于 matplotlib 的未来版本：

```
>>> import matplotlib.pyplot as plt
>>> import matplotlib.units, matplotlib.dates
>>> import datetime
>>>
>>> class Test(datetime.datetime):
...   def a(self):
...     return '{0:02d}{1:02d}{2:02d}{3:02d}'.format(self.year % 100, self.month, self.day, self.hour)
...
>>> matplotlib.units.registry[Test] = matplotlib.dates.DateConverter()
>>>
>>> x = [Test(2010, 05, 02, 06), Test(2010, 05, 02, 12)]
>>> y = [0, 1]
>>> plt.plot(x, y)
[<matplotlib.lines.Line2D object at 0x02F6E730>] 
```

（我在 Windows 上使用 python 2.7.2 和 matplotlib 1.1.0 对此进行了测试）

# java - Spongy Castle 有任何 Android SDK 要求吗？

> ID：10238999
> 
> 赞同：2
> 
> 时间：2012-04-20T01:19:35.760
> 
> 标签：java, android, bouncycastle, spongycastle

我打算在我的项目中使用[Spongy Castle](https://github.com/rtyley/spongycastle)，但我对必须使用的最低 Android SDK 版本有一个简单的疑问。

另外我想知道设备功能是否有任何限制...

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T02:00:41.337

SpongyCastle 不包含或使用任何 Android 特定功能，因此没有 Android SDK 要求。应该适用于任何版本。至于设备，不应该有任何限制，但很明显，加密等在更快的（CPU）设备上运行得更快。