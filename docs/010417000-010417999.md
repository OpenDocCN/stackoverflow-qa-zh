# StackOverflow 问答 10417000-10417999

# python - 在 Python 服务中执行 Py 文件

> ID：10417000
> 
> 赞同：1
> 
> 时间：2012-05-02T15:35:54.010
> 
> 标签：python, windows, python-2.7

[我使用此处](http://ryrobes.com/stuff/py_service.py)找到的代码片段创建了一个 Windows 服务

我已经安装并启动了它，但没有任何反应，它必须调用另一个 py 文件但从未发生过，这是 SvcDoRun 循环中的代码：

```
while 1:

     rc = win32event.WaitForSingleObject(self.hWaitStop, self.timeout)
     # Check to see if self.hWaitStop happened
     if rc == win32event.WAIT_OBJECT_0:
        servicemanager.LogInfoMsg("SomeShortNameVersion - STOPPED!")  #For Event Log
        break
     else:
             try:
                 win32api.WinExec("python cdrDB_Collect.py")
             except:
                 pass 
```

我尝试了 os.system() 和 execfile()。同样的结果，即使我尝试了 win32api.WinExec("notepad.exe") 以确保这不是我的 py 文件的问题，没有工作，我的桌面上没有花哨的记事本......

# php - PHP If 语句被覆盖

> ID：10417001
> 
> 赞同：0
> 
> 时间：2012-05-02T15:36:02.530
> 
> 标签：php, if-statement

我正在搜索页面上，其中一个结果信息是位置。要搜索的内容之一是音乐专辑（没有位置信息）。

[http://www.flcbranson.org/freedownloads-search.php](http://www.flcbranson.org/freedownloads-search.php)

如果你搜索“rock”，你会看到 The Peace Of God - Pt. 3 - 带有位置信息的 My Rock（这不是应该的方式）。如果您搜索“my rock”，您会注意到没有为同一记录列出位置信息（应该是这样）。如果另一个结果确实有位置信息，就好像 if 语句被覆盖。

音乐专辑有`$row["Number"]`Music01、Music02 等......所有其他记录应该为空或数字（应该都小于 Musicxx。据我所知，此代码应该只显示位置信息，如果它不是音乐专辑。

```
<?php
foreach ($stmt as $row) {
    if ($row["Number"] < "Music01") {
        if ($row["Location"]) $location = $row["Location"];
        else $location = "Faith Life Church";
        if ($row["City"]) $city = $row["City"];
        else if ($row["Sarasota"]) $city = "Sarasota";
        else $city = "Branson";
        if ($row["State"]) $state = $row["State"];
        else if ($row["Sarasota"]) $state = "FL";
        else $state = "MO";
    }
    if ($location) {
?>
<li><?php echo $location; ?></li>
<?php
    }
}
?> 
```

我在这里错过了什么吗？

JJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:40:58.730

当你以这种方式比较一个字符串时，你实际上是在说任何不等于的字符串`Music01`。它可能会变得复杂。见[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

获取一个真正的整数，然后进行比较以获得更可预测的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:43:14.717

你这样做是错的。首先初始化变量，然后在需要时覆盖它们。这将防止您可能丢失案例并且未定义变量的任何奇怪情况。

```
$location = "Faith Life Church";
$city = "Sarasota";
/*...*/
foreach ($stmt as $row) {
    foreach ($row as $variable => $value) {
        $variable = strtolower($variable); //Location => location
        $$variable = $value; //$location = $value
    }

} 
```

除此之外，您正在将数字与字符串进行比较。从字符串中删除数字，然后进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:42:25.330

问题是您将字符串与小于的字符串进行比较，每次`<`都会返回。`true`您只需要检查数组键中的“音乐”一词对吗？

```
if (strpos($row["Number"], 'Music') !== false) {

} 
```

# android - 使用 sax 解析从可绘制文件夹中的 XML 文件中获取数据？

> ID：10417002
> 
> 赞同：0
> 
> 时间：2012-05-02T15:36:03.450
> 
> 标签：android, android-parser

我在可绘制文件夹中有一个 XML 文件。我想使用 XML 解析（sax 解析）解析 XML 文件。
我为此使用了以下代码：

```
private void getDataFromFile(int mntFile) throws SAXException, IOException {
        // TODO Auto-generated method stub
        SAXParserFactory factory = SAXParserFactory.newInstance();
        System.out.println("in method");
        try {
            saxParser = factory.newSAXParser();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        DefaultHandler handler = new DefaultHandler() {

        boolean id = false;
        boolean name = false;
        boolean dep = false;

        public void startElement(String uri, String localName,String qName, 
                    Attributes attributes) throws SAXException {
            //System.out.println("in start");
            if (localName.equals("DOCTORID")) {
                id = true;
            }

            if (localName.equals("NAME")) {
                name = true;
            }

            if (localName.equals("DEAPRTMENT")) {
                dep = true;
            } 
        }

        public void endElement(String uri, String localName,
            String qName) throws SAXException { 
        }

        public void characters(char ch[], int start, int length) throws SAXException {

            if (id) {
                id = false;
            }

            if (name) {
                System.out.println("Name : " + new String(ch, start, length));
                mArryLstDoctorNames.add(new String(ch, start, length));
                Log.d("doctor","---"+mArryLstDoctorNames);
                name = false;
            }

            if (dep) {
                dep = false;
            }

        }

         };
           saxParser.parse(R.drawable.myxml, handler);
    } 
```

但是这里`saxParser.parse(R.drawable.myxml, handler);`显示编译错误。
它与适用于 sdcard 上的 XML 文件的代码相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:11:08.517

您不能将其存储到可绘制文件夹，它是您的包的一部分，将其存储在其他地方，您的包/数据或 SD 卡。
R.drawble.xml 不使用输入源。

首先你需要读取文件，然后将它传递给一个字符串，然后你可以解析它。

这是如何：

```
FileInputStream fis = openFileInput(yourfilepath);
        InputStreamReader isr = new InputStreamReader(fis);
        char[] inputBuffer = new char[reasonableLenght];
        // Fill the Buffer with data from the file
        isr.read(inputBuffer);
        String xml_data = new String(inputBuffer);
     //then you can do
saxParser.parse(new InputSource(new StringReader(xml_data)), handler); 
```

# r - 使用ggplot2的带有误差线的堆叠条形图

> ID：10417003
> 
> 赞同：4
> 
> 时间：2012-05-02T15:36:05.843
> 
> 标签：r, ggplot2

我正在尝试使用 ggplot2 创建带有 errorbars* 的堆叠条形图，类似于下图： ![我试图复制的情节](../Images/e62aac0695de7b4c15ab98c10b1dfb36.png)

我使用了以下代码：

```
df <- data.frame(substrate = gl(6, 2, 12, labels=letters[1:6]),
                 depth = gl(2, 1, 12, labels=c("surf", "deep")),
                 mean = 10 * runif(12),
                 err = runif(12))
p <- ggplot(df, aes(x=depth, y=mean, fill=substrate)) + geom_bar(stat="identity") + coord_flip()
p + geom_errorbar(aes(x=depth, ymin=mean-err, ymax=mean+err)) 
```

这给了我这个： ![在此处输入图像描述](../Images/c53bd667e9c651ebc4022497511a10e3.png)

它看起来像平均值位置的误差条中心，而不是平均值 +“先前”基板的平均值。也就是说，误差条 a 的中心应该在 a 的平均值处，误差条 b 的中心应该在平均值 a + 平均值 b 处，等等。

有谁知道如何在 ggplot2 中实现这一点？

*我意识到不以这种方式显示数据有很好的理论理由 - 但我们并不总是自己决定如何呈现我们的数据！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:51:45.710

我想你可以用 来做到这一点`geom_segment`，但你的例子只有一个方向的酒吧，这似乎更聪明。所以我一起破解了一些东西`geom_segment`：

```
df <- data.frame(substrate = gl(6, 2, 12, labels=letters[1:6]),
                 depth = gl(2, 1, 12, labels=c("surf", "deep")),
                 mean = 10 * runif(12),
                 err = runif(12))
df <- ddply(df,.(depth),transform,ystart = cumsum(mean),yend = cumsum(mean) + err)
p <- ggplot(df, aes(x=depth, y=mean, fill=substrate)) + 
        geom_bar(stat="identity")
p + geom_segment(aes(xend = depth,y = ystart,yend = yend)) + 
        geom_point(aes(x = depth,y = yend),shape = "|",show_guide = FALSE) +
        coord_flip() 
```

![在此处输入图像描述](../Images/449d78fd3323ffc6915c0eb1c89b4e4e.png)

# ios - 安排 iOS 自动续订订阅在未来开始，如 Netflix

> ID：10417005
> 
> 赞同：1
> 
> 时间：2012-05-02T15:36:09.207
> 
> 标签：ios, app-store, in-app-purchase, storekit

iOS 上的 Netflix App 未来如何启动自动续订订阅？他们有 30 天的免费试用期（我认为这超出了我的问题范围），但它变成了订阅，您可以在注册后立即从商店设置应用程序管理（即禁用）。

我想支持一个类似的模型，这样我可以生成立即有效的特定于应用程序的许可证，还可以安排在未来 1 个月开始的自动续订订阅。在 iTunesConnect 中定义产品时，我没有看到任何选项……似乎所有购买都会立即处理。

![在此处输入图像描述](../Images/2a4b619c2d297525ecf502fb3f14cf06.png)

提前致谢。

# java - 在 Eclipse RCP 中使用导航历史

> ID：10417009
> 
> 赞同：5
> 
> 时间：2012-05-02T15:36:20.407
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我喜欢在我的 RCP 应用程序中使用 Eclipse 提供的导航历史。不幸的是，这个功能没有很好的记录。事实上，我只找到了这个 Wiki 条目：[http ://wiki.eclipse.org/FAQ_How_do_I_hook_my_editor_to_the_Back_and_Forward_buttons%3F](http://wiki.eclipse.org/FAQ_How_do_I_hook_my_editor_to_the_Back_and_Forward_buttons%3F)

它提到可以在导航历史记录中标记每个编辑器，而无需指定位置。这正是我想要的。

> 无论特定的编辑器是否支持导航历史，markLocation 都可以工作。如果编辑器没有实现 INavigationLocationProvider，将添加一个历史条目，允许用户跳回该编辑器，但不返回任何特定位置。

我在我的应用程序中添加了以下代码行，以便在每次打开新编辑器时添加一个导航条目。

```
IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
IEditorPart editor = page.openEditor( input, MyEditor.ID );
page.getNavigationHistory().markLocation( editor ); 
```

我的问题是代码不起作用。命令的工具栏图标`org.eclipse.ui.navigate.backwardHistory`并`org.eclipse.ui.navigate.forwardHistory`保持灰色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:41:56.790

我找到了解决方案。为了在 Eclipse RCP 应用程序中使用*Navigation History*，您必须将以下代码行添加到您的`ApplicationActionBarAdvisor`.

```
/**
 * Fills the cool bar with the main toolbars for the window.
 * <p>
 * The default implementation does nothing. Subclasses may override.
 * </p>
 * 
 * @param coolBar
 *            the cool bar manager
 */
protected void fillCoolBar( ICoolBarManager coolBar ) {
    IToolBarManager navigation = new ToolBarManager( SWT.FLAT );

    IAction backward = getAction( IWorkbenchCommandConstants.NAVIGATE_BACKWARD_HISTORY );
    IAction forward = getAction( IWorkbenchCommandConstants.NAVIGATE_FORWARD_HISTORY );

    navigation.add( backward );
    navigation.add( forward );

    coolBar.add( navigation );
}

/**
 * Instantiates the actions used in the fill methods. Use
 * {@link #register(IAction)} to register the action with the key binding
 * service and add it to the list of actions to be disposed when the window
 * is closed.
 * 
 * @param window
 *            the window containing the action bars
 */
protected void makeActions( IWorkbenchWindow window ) {
    IAction backward = ActionFactory.BACKWARD_HISTORY.create( window );
    backward.setId( IWorkbenchCommandConstants.NAVIGATE_BACKWARD_HISTORY );
    IAction forward = ActionFactory.FORWARD_HISTORY.create( window );
    forward.setId( IWorkbenchCommandConstants.NAVIGATE_FORWARD_HISTORY );

    register( backward );
    register( forward );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:51:53.780

您必须在编辑器中实现[INavigationLocationProvider](http://kickjava.com/src/org/eclipse/ui/texteditor/AbstractTextEditor.java.htm)接口。

您可以看到 Eclipse 小组如何在他们的[AbstractTextEditor](http://kickjava.com/src/org/eclipse/ui/texteditor/AbstractTextEditor.java.htm)中实现接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:07:24.213

谢谢，我已经研究了 AbstractTextEditor 的实现。由于我只想在编辑器之间导航，而不是在编辑器内的不同位置之间导航，我发现最简单的实现应该如下所示：

```
public class MyEditor extends EditorPart implements INavigationLocationProvider {
public static final String ID = "MyEditor";

...

    @Override
    public INavigationLocation createEmptyNavigationLocation() {
        return new MyNavigationLocation( this );
    }

    @Override
    public INavigationLocation createNavigationLocation() {
        return new MyNavigationLocation( this );
    }
} 
```

* * *

```
public class MyNavigationLocation extends NavigationLocation {

    public MyNavigationLocation( IEditorPart part ) {
        super( part );
    }

    @Override
    public boolean mergeInto( INavigationLocation location ) {
        return false;
    }

    @Override
    public void restoreLocation() {

    }

    @Override
    public void restoreState( IMemento memento ) {

    }

    @Override
    public void saveState( IMemento memento ) {

    }

    @Override
    public void update() {

    }
} 
```

我的问题是它仍然不起作用。我预计失败一定在其他地方。也许我在 Eclipse 命令配置中遗漏了一些东西。有任何想法吗？

编辑：

问题在于 NavigationHistory 类的 markLocation() 方法。它调用私有方法 addEntry()。在我的例子中，私有变量 ignoreEntries 设置为 1。这就是为什么我不能在历史记录中标记位置。不幸的是，我还没有弄清楚，为什么 ignoreEntries 设置为 1。Eclipse 文档对此只字未提： [http ://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc .isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2FINavigationHistory.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2FINavigationHistory.html)

```
/*
 * Adds a location to the history.
 */
private void addEntry(IEditorPart part) {
    if (ignoreEntries > 0 || part == null) {
        return;
    }

    ...
} 
```

第二次编辑：

我发现每次打开一个新编辑器时，都会通过 NavigationHistory 的 markEditor() 方法添加一个历史条目。标记在显示线程中完成，在标记过程完成之前您无法添加更多标记。如果要在打开编辑器后直接标记位置，则必须在显示线程中调用 markLocation()。尽管如此，我的问题仍然存在。NavigationHistory 中的后退和前进 NavigationHistoryAction 为空。这就是为什么我的 UI 图标一直显示为灰色的原因。有人可以将指定导航命令的 plugin.xml 部分发送给我吗？然后我可以将它与我的配置进行比较。

# oracle - 在使用 oracle 数据库链接时出现错误“ORA-12154 TNS 无法解析指定的连接标识符”

> ID：10417010
> 
> 赞同：0
> 
> 时间：2012-05-02T15:36:20.733
> 
> 标签：oracle, database-link

我正在尝试在 oracle 10.2 上定义一个数据库链接，其连接标识符会在问题标题中引发错误。我的 tnsnames.ora 文件中有连接标识符（服务名称）。我可以使用此服务名称连接 sqlplus。没问题。这是创建sql：

创建数据库链接 dev1.REGRESS.RDBMS.DEV.US.ORACLE.COM 使用“dev1”连接到 pass1 标识的 user1；

使用链接选择：select * from t_users@dev1;

我得到：ORA-12154：TNS：无法解析指定的连接标识符

使用 sqlplus 连接到 oracle 到“未识别”服务（没有问题）：sqlplus user1/pass1@dev1

我定义了另一个链接到我正在使用的同一个数据库（环回） - 工作正常。

我阅读并尝试了我能找到的关于该主题的任何内容，但没有解决这个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:39:27.237

尝试：

```
create database link dev1 connect to user1 identified by pass1 using 'dev1'; 
```

另请注意，`dev1`您要链接的数据库服务器上必须存在 tnsnames.ora 条目。

# core-location - 如何从 CLGeocoder 获取多个地标

> ID：10417022
> 
> 赞同：7
> 
> 时间：2012-05-02T15:36:53.413
> 
> 标签：core-location, clgeocoder

无论我给地理编码器的地址是什么（[geocoder geocodeAddressString:completionHandler:)，它总是只将一个对象放在地标数组中。

我有什么方法可以获得多个结果（例如在地图应用程序中），用户可以从中选择一个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T21:16:04.657

Apple 的本地地理编码服务由[**MapKit 框架**](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html)提供。该框架中的重要对象是`MKLocalSearch`，它可以对地址进行地理编码并返回多个结果。

MKLocalSearch 返回 10 个`mapItems`类型的结果`MKMapItem`。每个 MKMapItem 都包含一个`MKPlacemark`对象，它是`CLPlacemark`.

这是一个使用 MapKit 的示例`MKLocalSearch`：

```
MKLocalSearchRequest* request = [[MKLocalSearchRequest alloc] init];
request.naturalLanguageQuery = @"Calgary Tower";
request.region = MKCoordinateRegionMakeWithDistance(loc, kSearchMapBoundingBoxDistanceInMetres, kSearchMapBoundingBoxDistanceInMetres);

MKLocalSearch* search = [[MKLocalSearch alloc] initWithRequest:request];
[search startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {
   yourArray = response.mapItems; // array of MKMapItems
   // .. do you other logic here  
 }]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T17:34:59.187

我对数据包做了一些嗅探，似乎 CLGeocoder 没有连接到 Google 的地理编码服务，而是连接到 Apple 的。我还注意到我每次只从那里得到一个地标。

如果你想要更复杂的东西，你应该使用谷歌或其他地理编码。我使用[SVGeocoder (https://github.com/samvermette/SVGeocoder)](https://github.com/samvermette/SVGeocoder)，它具有与 CLGeocoder 非常相似的 API。

# c# - OpenFileDialog - InitialDirectory 打开一个远程目录

> ID：10417023
> 
> 赞同：2
> 
> 时间：2012-05-02T15:36:54.427
> 
> 标签：c#

我一直在尝试在远程服务器上使用 InitialDirectory，但没有成功。我想做的是：（comboBox1 有服务器名称）

```
OpenFileDialog ofLogFile = new OpenFileDialog();
ofLogFile.Title = "Log for server: " + comboBox1.text;
OpenFileDialog.InitialDirectory = "\\\\" + comboBox1.text + "\\c$";
ofLogFile.RestoreDirectory = true; 
```

然后有一个if检查..

但它不起作用。我得到的只是本地机器目录。问题是，当我进入 InitialDirectory-

```
 OpenFileDialog.InitialDirectory = @"\\server_name\c$"; 
```

它工作得很好。我试图提出的另一件事是：

```
OpenFileDialog.InitialDirectory = "\\\\" + ((System.Data.DataRowView)
(this.comboBox1.SelectedItem)).ToString + "\\c$"; 
```

它也不起作用。

我正在以适当的权限启动程序，所以它不应该是一个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:11:34.750

不应该是：

```
ofLogFile.InitialDirectory = "\\\\" + comboBox1.text + "\\c$"; 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:06:41.697

如果

```
ofLogFile.InitialDirectory = @"\\server_name\c$"; 
```

工作，但是

```
ofLogFile.InitialDirectory = @"\\" + comboBox1.Text + @"\c$"; 
```

不起作用，答案似乎很明显：

`comboBox1.Text`不包含正确的字符串。

确保组合框文本不包含容易遗漏的字符，例如前导或尾随空格。

# c# - 计算百分比时抛出 OverflowException

> ID：10417029
> 
> 赞同：4
> 
> 时间：2012-05-02T15:37:10.327
> 
> 标签：c#, exception, overflow

我有将字典作为参数并返回字典的代码。

该代码计算所有双精度值的总和，并使用总和来计算每个值占总和的百分比。它返回一个新的字典，其中百分比连接到键上。

我的 Web 服务器的事件查看器中记录了一些溢出异常。日志记录异常发生在以下代码上`Decimal percentage = (Decimal) (pDataPoints[key] / sum * 100);` 它说将值转换为小数时发生异常。

我可能会错过什么边缘情况？

```
public static Dictionary<string, double> addPercentagesToDataPointLabels(Dictionary<string, double> pDataPoints)
{
Dictionary<string, double> valuesToReturn = new Dictionary<string, double>();

// First, compute the sum of the data point values
double sum = 0;
foreach (double d in pDataPoints.Values)
{
    sum += d;
}

// Now, compute the percentages using the sum and add them to the new labels.
foreach (string key in pDataPoints.Keys)
{
    string newKey = key;
    Decimal percentage = (Decimal) (pDataPoints[key] / sum * 100);
    percentage = Math.Round(percentage, ChartingValues.DIGITS_AFTER_DECIMAL_POINT);
    newKey += " " + percentage.ToString() + "%";
    valuesToReturn.Add(newKey, pDataPoints[key]);
}

return valuesToReturn;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T15:50:17.780

干得好：

```
addPercentagesToDataPointLabels(new Dictionary<string, double>(){{"a", 0}}); 
```

就像 gdoron 说的那样，你除以 0。但它只对整数抛出异常。对于浮点数，它会导致`Double.Infinity`. 然后它尝试将无穷大转换为十进制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T15:42:36.627

```
pDataPoints[key] / sum * 100 
```

此计算为您提供的结果太小或太大而无法以十进制存储。您可以捕获此异常并检查此表达式的值是什么。我的建议（因为我无法说出您期望的值）：

```
double percentageValue = pDataPoints[key] / sum * 100;
try
{
    Decimal percentage = (Decimal) percentageValue;
}
catch (OverflowException exception)
{
    //log percentageValue
    throw;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:41:17.717

a 的最大值`decimal`为 79,228,162,514,264,337,593,543,950,335。a `double`（您的输入值）的最大值是 1.7976931348623157E+308。大概您的某些输入值（或至少是 的结果`pDataPoints[key] / sum * 100`）导致的值大于最大十进制值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:55:56.450

由于您实际上只是在计算一个百分比，因此很难得出一个使该百分比计算超出范围的真实数字`decimal.MinValue < v < decimal.MaxValue`。

然而，有一个值总是会导致这个错误`double.NaN`。

如果您将此字典传递给您的方法：

```
var d = new Dictionary<string,double>(){
            {"A",2},
            {"B",2}
        }; 
```

你完全正确地得到了结果：

```
Key:A 50% Value:2
Key:B 50% Value:2 
```

但是将其更改为此输入：

```
var d = new Dictionary<string,double>(){
            {"A",double.NaN},
            {"B",2}
        }; 
```

结果是：

> System.OverflowException：对于 Decimal，值太大或太小。

这可能是你的边缘案例吗？生成输入字典的任何内容都会生成`NaN`.

您可以在这里演示上述内容的一个活生生的例子：[http ://rextester.com/RRQT60265](http://rextester.com/RRQT60265)

# c++ - 在匿名命名空间中使用命名空间安全吗？

> ID：10417032
> 
> 赞同：4
> 
> 时间：2012-05-02T15:37:18.363
> 
> 标签：c++, namespaces, using-directives

在[匿名命名空间内的“使用命名空间”语句中](https://stackoverflow.com/q/8775563/484230)，询问以下内容是否合法

```
//file.cpp
//....
namespace
{
    using namespace std;
}

int a(){
 cout << "bla";
} 
```

答案是“是”。[此外，即使将命名空间指令插入到 cpp 文件中，通常也会鄙视使用命名空间指令，因为自从引入统一构建 ( https://stackoverflow.com/a/6474774/484230](https://stackoverflow.com/a/6474774/484230) )以来，头文件和实现文件之间的范围差异并不是坚如磐石。

我的问题：匿名命名空间是否使我免于此类问题，或者 using 指令仍然可以传播文件边界？在[https://stackoverflow.com/a/2577890/484230](https://stackoverflow.com/a/2577890/484230)中提出了类似的方法。它也适用于匿名命名空间吗？它真的安全吗？当然`std`是一个不好的例子，但例如`using namespace boost::assign;`在某些 cpp 文件中会非常方便。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T15:41:49.703

将其放入匿名命名空间和将其置于匿名命名空间之外没有任何区别。任何一个都会产生相同的效果，即将整个`std`命名空间带入文件的顶级命名空间。这不好，应该避免。

至于“传播文件边界”，如果你把它放在匿名命名空间之外，它也不会这样做。它唯一可以感染其他文件的情况是它`#include`位于其他文件中的文件中，例如标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:51:15.850

> 我的问题：匿名命名空间是否使我免于此类问题，或者 using 指令仍然可以传播文件边界？

该指令传播文件边界的唯一方法是其他文件是否具有`#include "file.cpp"`预处理器指令。这也是完全合法的，但是哇哦，那很臭。包含源文件而不是标头非常违反标准做法。

仅仅因为某件事是合法的，并不意味着它是好的。

`using`使用将其他命名空间带入当前命名空间的情况几乎相同。`using namespace <name>;`即使在源文件中，通常也被认为是错误的形式。

# bash - 在 bash 中定义变量时出错

> ID：10417034
> 
> 赞同：2
> 
> 时间：2012-05-02T15:37:21.373
> 
> 标签：bash, shell, scripting

我正在编写简单的家政脚本。该脚本包含以下代码行。这是我从实际代码中提取的示例代码，因为它是一个大文件。

```
 #!/bin/bash

 ARCHIVE_PATH=/product/file

 FunctionA(){
    ARCHIVE_USER=user1  # archive storage user name (default)
    ARCHIVE_GROUP=group1    # archive storage user group (default)

    functionB
 }

 functionB() {
    _name_Project="PROJECT1"
    _path_Componet1=/product/company/Componet1/Logs/
    _path_Component2=/product/company/Componet2/Logs/

     ##Component1##
     archive "$(_name_Project)" "$(_path_Componet1)" "filename1" "file.log" 
 }

 archive(){
     _name= $1
     _path=$2
     _filename=$3
     _ignore_filename=$4
     _today=`date + '%Y-%m-%d'`
     _archive=${ARCHIVE_PATH}/${_name}_$(hostname)_$(_today).tar
     if [ -d $_path];then
        echo "it is a directory"
     fi
 }

 FunctionA 
```

当我运行上述脚本时，出现以下错误

```
@localhost.localdomain[] $ sh testScript.sh
testScript.sh: line 69: _name_Component1: command not found
testScript.sh: line 69: _path_Component2: command not found
date: extra operand `%Y-%m-%d'
Try `date --help' for more information.
testScript.sh: line 86: _today: command not found
it is a directory 
```

有人可以解释一下我在这里做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:43:21.103

我看到这条线：_today=`date + '%Y-%m-%d'`

我发现的一个错误是通过删除 + 和 ' 之间的空格来解决的，如下所示：

_今天=`date +'%Y-%m-%d'`

我看不到 _name_Component1 和 _name_Component2 变量的声明位置，所以无能为力:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:40:37.037

您的变量扩展不正确-您正在使用`$()`它来执行子shell替换。你想要`${}`，即：

```
 archive "${_name_Project}" "${_path_Componet1}" "filename1" "file.log" 
```

至于`date`错误，后面没有空格`+`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:44:13.307

一些事情......你使用 $(variable) 当它应该是 ${variable} 在 date 命令时，确保 + 和格式之间没有空格并且你有 name= $1，你不想要那里的那个空间

# c# - 从列表中获取类型 T 的属性名称和不同值 有反射

> ID：10417037
> 
> 赞同：2
> 
> 时间：2012-05-02T15:37:36.567
> 
> 标签：c#, reflection, propertyinfo

我有一个具有一组属性的类产品：

```
public class Product
{
     public string Id { get; set; }
     public string Name { get; set; }
     public string Categories { get; set; }
} 
```

从一个组件中，我获得了一个`List<Product>`，并且出于多种原因，我需要使用**反射**来获取属性，`Product`然后获取每个属性的`Distinct`值及其值 。`Count()`

是否有可能通过反思来实现我的目标？如果没有，还有其他方法吗？谢谢！

**更新**

问题是我事先不知道我必须使用哪些属性以及类中有哪些**属性**`Product`。这就是为什么我认为反思是最好的选择。

我可以通过使用一个`Switch - Case`结构来实现相同的结果，其中开关比较从类中提取的**Property Name**并且每个`Case`对应于一个特定的**Property Name**。但是这个解决方案的灵活性不足以解决我的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:42:08.487

所以听起来你要求的东西与我们其他人之前认为的略有不同。您不是在寻找不同值的数量，或者您在寻找每个不同值的重复数，这本质上是一个分组，每个组的计数。

```
private static Dictionary<string, Dictionary<object, int>> 
    getDistinctValues<T>(List<T> list)
{
    var properties = typeof(T).GetProperties();

    var result = properties
        //The key of the first dictionary is the property name
        .ToDictionary(prop => prop.Name,
            //the value is another dictionary
            prop => list.GroupBy(item => prop.GetValue(item, null))
                //The key of the inner dictionary is the unique property value
                //the value if the inner dictionary is the count of that group.
                .ToDictionary(group => group.Key, group => group.Count()));

    return result;
} 
```

有一次我把它分成两种方法，但我把它浓缩到我认为不需要它的地步。如果您无法理解此查询的所有嵌套级别，请随时要求进一步澄清。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T15:48:12.163

```
private static int DistinctCount<T>(IEnumerable<T> items, string property)
{
    var propertyInfo = typeof(T).GetProperty(property);

    return items.Select(x => propertyInfo.GetValue(x, null)).Distinct().Count();
} 
```

用法：

```
List<Product> prods = GetProductsFromSomeplace();

int distinctCountById = DistinctCount(prods, "Id");
int distinctCountByName = DistinctCount(prods, "Name");
int distinctCountByCategories = DistinctCount(prods, "Categories"); 
```

如果你想为属性允许一个自定义的 IEqualityComparer，你可以有一个重载：

```
private static int DistinctCount<TItems, TProperty>(IEnumerable<TItems> items,
                                                    string property,
                                                    IEqualityComparer<TProperty> propertyComparer)
{
    var propertyInfo = typeof(TItems).GetProperty(property);

    return items.Select(x => (TProperty)propertyInfo.GetValue(x, null))
                                 .Distinct(propertyComparer).Count();
} 
```

并像这样使用：

```
List<Product> prods = GetProductsFromSomeplace();

int distinctCountById = DistinctCount(prods, "Id", new MyCustomIdComparer()); 
```

MyCustomIdComparer 实现的地方`IEqualityComparer<TProperty>`（在这种情况下`IEC<int>`）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T15:47:05.240

*我在下面提出了一个解决方案 - 但理想情况下，您应该考虑打破为这个问题创建一个抽象，该抽象允许返回 的对象`IEnumerable<T>`提供 的“可过滤”属性列表`T`，以及要使用的值。这样，无论从数据源返回数据的任何东西都可以在充分了解的情况下做到这一点。它将更多的工作推回您的数据源/服务/任何东西，但它使您的 UI 更简单。*

由于您*不*知道属性 - 那么您可以这样做（我假设一个，`IEnumerable`因为我假设一个通用解决方案已经出来 - 因为您说您*需要*反射）。如果你确实有一个类型化的表达式（即你实际上有一个`List<Product>`），那么一个通用的解决方案会更好，因为它可以消除获取第一项的需要：

```
public Dictionary<string, IEnumerable<object>> 
  GetAllPropertyDistincts(IEnumerable unknownValues)
{
  //need the first item for the type:
  var first = unknownValues.Cast<object>().First(); //obviously must NOT be empty :)
  var allDistinct = first.GetType()
    .GetProperties(BindingFlags.Public | BindingFlags.Instance)
    .Select(p => new 
      { 
        PropName = p.Name,
        Distinct = unknownValues.Cast<object>().Select(
          o => property.GetValue(o, null)
        ).Distinct() 
      }).ToDictionary(v => v.PropName, v => v.Distinct);
} 
```

现在你有一个字典，由你的无类型枚举中每个对象的每个属性的每个不同值的属性名称作为键（好吧 - 假设它们都是相同的类型或基数）。`IEqualityComparer`注意 - 某些类型的属性和扩展方法使用的默认值可能存在一些问题`Distinct`- 因为它是一种通用方法，目前它将使用[`EqualityComparer<object>.Default`](http://msdn.microsoft.com/en-us/library/ms224763.aspx)- 这不一定适用于某些类型。

要将其转换为通用解决方案，您只需将前四行更改为：

```
public Dictionary<string, IEnumerable<object>> 
  GetAllPropertyDistincts<T>(IEnumerable<T> unknownValues)
{
  var allDistinct = typeof(T) 
```

使用以下`.GetProperties(BindingFlags.Public | BindingFlags.Instance)`行，然后将内部调用更改`unknownValues.Cast<object>().Select(`为 just `unknownValues.Select(`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:50:20.593

如果列表没有使用`Product`但确实使用开放的泛型参数键入，`T`并且此参数没有限制 ( `where T : Product`)，则强制转换可以提供帮助

```
int count = list
    .Cast<Product>()
    .Select(p => p.Id)
    .Distinct()
    .Count(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T16:10:53.817

好的，所以我的回答稍微有点执行了，但这里是......一个*完全*成熟的不同值计数器。这并不能完全回答您的问题，但应该是计算给定对象上的属性的一个好的开始。使用它，结合循环遍历对象的所有属性，应该可以解决问题：p

```
/// <summary>
/// A distinct value counter, using reflection
/// </summary>
public class DistinctValueCounter<TListItem>
{
    /// <summary>
    /// Gets or sets the associated list items
    /// </summary>
    private IEnumerable<TListItem> ListItems { get; set; }

    /// <summary>
    /// Constructs a new distinct value counter
    /// </summary>
    /// <param name="listItems">The list items to check</param>
    public DistinctValueCounter(IEnumerable<TListItem> listItems)
    {
        this.ListItems = listItems;
    }

    /// <summary>
    /// Gets the distinct values, and their counts
    /// </summary>
    /// <typeparam name="TProperty">The type of the property expected</typeparam>
    /// <param name="propertyName">The property name</param>
    /// <returns>A dictionary containing the distinct counts, and their count</returns>
    public Dictionary<TProperty, int> GetDistinctCounts<TProperty>(string propertyName)
    {
        var result = new Dictionary<TProperty, int>();

        // check if there are any list items
        if (this.ListItems.Count() == 0)
        {
            return result;
        }

        // get the property info, and check it exists
        var propertyInfo = this.GetPropertyInfo<TProperty>(this.ListItems.FirstOrDefault(), propertyName);
        if (propertyInfo == null)
        {
            return result;
        }

        // get the values for the property, from the list of items
        return ListItems.Select(item => (TProperty)propertyInfo.GetValue(item, null))
            .GroupBy(value => value)
            .ToDictionary(value => value.Key, value => value.Count());
    }

    /// <summary>
    /// Gets the property information, for a list item, by its property name
    /// </summary>
    /// <typeparam name="TProperty">The expected property type</typeparam>
    /// <param name="listItem">The list item</param>
    /// <param name="propertyName">The property name</param>
    /// <returns>The property information</returns>
    private PropertyInfo GetPropertyInfo<TProperty>(TListItem listItem, string propertyName)
    {
        // if the list item is null, return null
        if (listItem == null)
        {
            return null;
        }

        // get the property information, and check it exits
        var propertyInfo = listItem.GetType().GetProperty(propertyName);
        if (propertyInfo == null)
        {
            return null;
        }

        // return the property info, if it is a match
        return propertyInfo.PropertyType == typeof(TProperty) ? propertyInfo : null;
    }
} 
```

用法：

```
var counter = new DistinctValueCounter<Person>(people);
var resultOne = counter.GetDistinctCounts<string>("Name"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-02T15:41:50.567

如果我理解目标，您应该可以只使用 LINQ：

```
List<Product> products = /* whatever */
var distinctIds = products.Select(p=>p.Id).Distinct();
var idCount = distinctIds.Count();
... 
```

# r - R检查参数已定义

> ID：10417039
> 
> 赞同：4
> 
> 时间：2012-05-02T15:37:41.200
> 
> 标签：r, function, parameter-passing

我正在寻找如何检查函数中定义的参数的一般做法。我提出了这三个想法。哪一种是正确的做法？

不幸的是，第三个不起作用。替代（）在函数中的工作方式不同，我无法弄清楚如何正确使用它。

```
file.names <- list(
                   cov.value <- "cov.rds",
                   plot.name <- "plot.pdf"
)

test1 <- function(file.names){
  is.save <- !missing(file.names)
}

test2 <- function(file.names = NULL) {
  is.save <- !is.null(file.names)
}

test3 <- function(file.names = NULL) {
  is.save <- exists(as.character(substitute(file.names)))
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:59:26.327

我个人认为使用默认值的第二种方法更易于使用和理解。（第三种方法真的很糟糕）

...尤其是当您编写需要向其传递参数的包装函数时。如何传递“缺失”值并不明显！

```
wraptest1 <- function(n) {
    file.names <- if (n > 0) sample(LETTERS, n) 
      else alist(a=)[[1]] # Hacky way of assigning 'missing'-value
    print(test1(file.names))
}
wraptest1(2) # TRUE
wraptest1(0) # FALSE

wraptest2 <- function(n) {
    file.names <- if (n > 0) sample(LETTERS, n) 
      else NULL # Much easier to read & understand
    print(test2(file.names))
}
wraptest2(2) # TRUE
wraptest2(0) # FALSE 
```

[当然，还有其他方法可以解决传递缺失值的问题，但关键是使用默认值更容易......]

要考虑的一些默认值是`NULL`, `NA`, `numeric(0)`,`''`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:03:44.800

从经验丰富的程序员那里查看代码通常是一个好主意——R 本身在 R 源代码中有大量示例。

我已经看到你的第一个和第二个例子都被使用了。第一个非常地道。我个人仍然习惯性地更频繁地使用第二个。第三个我觉得太晦涩了。

# javascript - Google 转换不起作用 - 脚本无法加载

> ID：10417042
> 
> 赞同：18
> 
> 时间：2012-05-02T15:37:59.487
> 
> 标签：javascript, google-ads-api

我有一个已设置转化跟踪的 AdWords 广告系列。谷歌生成了一些我放在开始正文标签之后的代码：

```
 <!-- Google Code for Sign Up Conversion Page -->
<script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 999999999;
    var google_conversion_language = "en";
    var google_conversion_format = "3";
    var google_conversion_color = "ffffff";
    var google_conversion_label = "redacted";
    var google_conversion_value = 0;
    /* ]]> */
</script>
<script type="text/javascript" src="http://www.googleadservices.com/pagead/conversion.js"></script>
<noscript>
    <div style="display:inline;">
        <img height="1" width="1" style="border-style:none;" alt="" src="http://www.googleadservices.com/pagead/conversion/999999999/?label=redacted&amp;guid=ON&amp;script=0"/>
    </div>
</noscript> 
```

它似乎适用于 Safari 和 IE。但它在 Firefox 和 Chrome 中，加载`conversion.js`失败。在 Firefox 中，状态为`aborted`，在 Chrome 中`failed`。没有状态码。

我试过把这段代码放在不同的地方，包括头部和底部。

想法？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-04T15:42:57.913

您是否安装了 Adblock Plus 或类似的广告拦截软件？Adblock Plus 将阻止 conversion.js 的下载，因此您需要在您的网站上禁用广告拦截以进行测试。

# sql - 当 X 存在时排除

> ID：10417050
> 
> 赞同：1
> 
> 时间：2012-05-02T15:38:25.800
> 
> 标签：sql, sql-server-2012, exists

我有一个 ID 列表，每个 ID 都有一个代码和一个日期。每个 ID 可以有多个代码和日期。我需要找到仅包含代码 X 和代码 Y（（X，Y）中的代码）以及早于 540 天前的日期的 ID `(Date <= DATEADD(dd, -540, CURRENT_TIMESTAMP))`。

由于一个 ID 可以有多个代码和日期，我需要排除那些不符合上述条件的 ID。下面是一个例子。

```
 ID   Code Date

  5525  X   2010-10-07 
  5525  Y   2010-11-25 
  5525  Y   2010-11-29 
  5525  Y   2010-10-06 
**5525  X   2011-01-14** 
**5525  X   2011-01-31**
  5525  Y   2010-12-09
  5525  Y   2010-10-15 
  5525  X   2010-10-18 
  5525  Y   2010-12-08 
  5525  X   2010-12-09 
```

* * *

因为两个突出显示的 ID 的日期大于 -540 天前，我需要排除所有 ID，即使它符合我的原始标准。

我需要包含符合我的条件的 ID `(code in (X,Y) and Date <= DATEADD(dd, -540, CURRENT_TIMESTAMP))`，但如果具有相同值的另一个 ID 不符合此条件，则不需要。

```
select ID from table
where code in (X,Y)
and date <= DATEADD(dd, -540, CURRENT_TIMESTAMP) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:59:59.643

我猜你在追求这样的事情：

```
SELECT t1.ID FROM table_x t1
 WHERE 
    t1.Date <= DATEADD(dd, -540, CURRENT_TIMESTAMP) AND
    -- you can add other criterias here as well, like t1.Code in (X,Y)
    t1.ID NOT IN (
       SELECT ID FROM table_x t2
        WHERE 
          t2.Date > DATEADD(dd, -540, CURRENT_TIMESTAMP)
          -- you can add other criterias here as well, like t2.Code in (Z,F) 
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:57:24.573

将该`NOT IN`子句与子查询一起使用：

```
SELECT *
FROM table1
WHERE id NOT IN (
    SELECT id 
    FROM table1
    WHERE Date <= DATEADD(dd, -540, CURRENT_TIMESTAMP)    
)
AND code in ('X','Y') 
```

这有帮助吗？

`ID`PS 当一个字段在整个表中不是唯一的时调用它是相当“反标准”的。我承认这确实让我有点困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:59:27.977

为了检查给定 ID 是否满足所有实例的条件，请使用`WHERE NOT EXISTS`与您的条件相反的条件执行 a。像这样：

```
SELECT ID, Code, [Date]
FROM tablename t
WHERE NOT EXISTS (
    SELECT *
    FROM tablename
    WHERE ID = t.ID AND NOT (
        Code IN ('X','Y')
        AND [Date] <= DATEADD(dd, -540, CURRENT_TIMESTAMP))
) 
```

# javascript - 在谷歌地图上添加加载覆盖

> ID：10417053
> 
> 赞同：2
> 
> 时间：2012-05-02T15:38:47.080
> 
> 标签：javascript, google-maps, overlay, loading

嗨，伙计们，我们有一个谷歌地图 v3，它在通过 ajax 拖动时加载标记 - 我对此很好 - 我只是想知道如何在我的地图上添加一个加载栏 - 我已经在使用

```
container.style.filter = "alpha(opacity=60);";
                container.style.opacity = 0.6; 
```

以及其他停止拖动的东西。

最好的方法是什么 - 如果可能，我想使用一些 html 而不是图像。

谢谢理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:58:00.287

我遇到了同样的问题并通过在地图上添加一个图层来解决它（在我的情况下，我只需要加载，我没有任何其他理由添加另一个插件）：

HTML：

```
<div id="holder" style="position: relative;">
    <div class="overlay standard hidden">&nbsp</div>
    <div id="map"></div>
</div> 
```

CSS：

```
div#holder {
    position: relative;
}

.hidden {
    display: none;
}

div.overlay {
    position: absolute;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: #fff;
    opacity: 0.7;
    z-index: 1;
}

div.overlay.standard { background: #fff url(/image/loading.gif) no-repeat 50% 50%; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:07:58.273

1.  如果您只想在地图上放置一个包含文本的矩形，本质上是一个标签，您可能需要考虑：[InfoBox](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#InfoBox)
2.  如果您想要动态显示进度的东西，您可能需要使用：[ProgressBarControl](http://www.basicslabs.com/Projects/progressBar/)

# jquery - 使用 jquery 隐藏和显示动态创建的段落

> ID：10417054
> 
> 赞同：0
> 
> 时间：2012-05-02T15:38:55.707
> 
> 标签：jquery

我有一个 Sharepoint 站点，它从列表中动态获取名称和描述。

```
var name = $(this).attr('ows_Title');  //This is the internal storage name in SP
var comments = $(this).attr('ows_MetaInfo').match(/^_Comments:SW\|(.*)$/m); 
```

然后我将这些变量输入到我页面上的一个空 div 中（该 div 称为“docList”）

```
 var item = "<a class='docLinks' href='http:path/to/the/doc/" + name + "'>" 
+ title + "</a><br><p><span class='description' id='para_" + i + "'>"
    + comments + "</span></p><br>";
        $('#docList').append(item); 
```

我正在尝试使“评论”（即项目的描述）出现在项目名称下方的悬停上。

我在这个主题上尝试了各种迭代：

```
 $('#docList a').hover(function(){
          $(this).child().css({'display':'block'})},
          function(){
              $(this).child().css({'display':'none'});
         }); 
```

我知道我可以访问悬停事件，因为我编写了一些简单的警报，它们很好。

最初，我尝试为每个“评论”赋予其 ownid（如您所见），但在获取索引值时被绊倒了。然后我决定尝试使用

```
 $(this).children('.description').css({'display':'block'}); 
```

但没有运气。我接近了吗？我在哪里搞砸了语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:44:59.703

```
$(this).nextUntil('p').next().find('.description').hide()

$(this).nextUntil('p').next().find('.description').show() 
```

你不需要`id`这个

# jquery - 使用 jquery 解析 xml 文档

> ID：10417055
> 
> 赞同：0
> 
> 时间：2012-05-02T15:38:55.757
> 
> 标签：jquery, xml-parsing

我想用 jquery 解析一个 xml 文档，但它不返回任何内容：这是我的代码：

```
<script type="text/javascript">
     $(document).ready(function(){
        $(#envoi_search).click(function{
            $.get("http://localhost/music.xml", { titre: "Pourtant" }, function (data){
                    alert("Yoo !!") ;}, "xml" );
        });
    });
</script> 
```

错误：

> 未捕获的 ReferenceError：未定义 ajaxget
> 
> XMLHttpRequest 无法加载 file:///home/mehdi/Bureau/music.xml?titre=Pourtant。Access-Control-Allow-Origin 不允许 Origin null。
> 
> XMLHttpRequest 无法加载[http://localhost/music.xml?titre=Pourtant](http://localhost/music.xml?titre=Pourtant)。Access-Control-Allow-Origin 不允许 Origin null。

你对此有什么想法吗？谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:52:39.103

假设您的网站也在运行`localhost`，请尝试使用相对路径来获取您的 XML。此外，选择器需要像其他人提到的那样用引号引起来。试试这个：

```
$("#envoi_search").click(function {
    $.get(
        "/music.xml", 
        { titre: "Pourtant" }, 
        function (data) {
            alert("Yoo !!");
        }, 
        "xml" 
    );
}); 
```

如果您不在本地主机下运行，那么您将无法从此 URL 获取 XML，因为它将被浏览器同源策略阻止。如果你有谷歌的话，有很多关于它的文章。

# css - 最后一个孩子 CSS3

> ID：10417059
> 
> 赞同：1
> 
> 时间：2012-05-02T15:39:11.967
> 
> 标签：css, pseudo-class, css-selectors

我需要删除列表中第一项的左边框和第四项的右边框，而不会影响这些项的任何子列表。我怎样才能做到这一点？

我的菜单列表代码是：

```
<div id="menu">
  <ul><li><a href="#">First Item</a><ul>
  <li><a href="#">First Sub Item</a></li>
  <li><a href="#">Second Sub Item</a></li>
  </ul></li></ul>

  <ul>
    <li><a href="#">Second Item</a>
      <ul>
        <li><a href="#">First Sub Item</a></li>
        <li><a href="#">Second Sub Item</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#">Third Item</a>
      <ul>
        <li><a href="#">First Sub Item</a></li>
        <li><a href="#">Second Sub Item</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#">Fourth Item</a>
      <ul>
        <li><a href="#">First Sub Item</a></li>
        <li><a href="#">Second Sub Item</a></li>
      </ul>
    </li>
  </ul>
</div> 
```

那是我添加边框的代码

```
#menu ul li a { padding: 10px; display: inline-block; border-right-width: 1px; border-left-width: 1px; border-right-style: solid; border-left-style: solid; border-right-color: #CCC; border-left-color: #000; } 
```

我用这段代码删除了第一个孩子的边框

```
#menu ul:first-child a { border-left: 0px; } 
```

它工作得很好，但是当我从最后一个孩子中删除时，它会影响子项目 ul li ul li a 而不是 ul li a

我无法手动将类添加到最后一个孩子，因为它是动态出现的，所以我不知道管理员将来会添加多少项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:24:59.917

```
#menu ul:first-child { border-left: 0; }
#menu ul:last-child { border-right: 0; } 
```

请注意，直到 IE9，IE 才支持 last-child。第一个孩子应该在 IE7 及更高版本中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:50:51.780

试试这个

```
#menu  ul li a { padding: 10px; display: inline-block; border-right-width: 1px; border-left-width: 1px; border-right-style: solid; border-left-style: solid; border-right-color: #CCC; border-left-color: #000; color:#000; }

#menu > ul:first-child > li > a { border-left: 0px;} 

#menu > ul:last-child > li > a { border-right: 0px} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:24:15.847

第一项：

`#menu ul:first-child`

最后一项：

`#menu ul:last-child`

为了完全兼容浏览器，向第一个和最后一个元素添加另一个类

```
 <ul class="first-list">
  <li><a href="#">First Item</a><ul>
  <li><a href="#">First Sub Item</a></li>
  <li><a href="#">Second Sub Item</a></li>
  </ul></li></ul>

  <ul>
    <li><a href="#">Second Item</a>
      ...

  <ul class="last-list">
    <li><a href="#">Fourth Item</a>
      <ul>
        <li><a href="#">First Sub Item</a></li>
        <li><a href="#">Second Sub Item</a></li>
      </ul>
    </li>
  </ul>

.first-list {}
.last-list {} 
```

大多数语言都支持查询或数组中的第一个和最后一个条目的检测器。

**或者**

如果您使用的是 jquery，您可以像这样选择：

`$('#menu ul:first').addClass('first-list')`

# java - 将 2 个 txt 文件中的一些元素添加到第三个文件中

> ID：10417061
> 
> 赞同：2
> 
> 时间：2012-05-02T15:39:16.537
> 
> 标签：java, file

我已经完成了文件的读取和写入，但是我遇到了问题。我不知道为什么它只显示文件的最后一行。在从 Person.txt 读取行的部分中，当我退出 while 循环时，我想显示每一行的 p.getName()，它只显示最后一行。我怎样才能解决这个问题？

这是我的代码：

```
import java.io.*;
import java.util.*;
import java.util.ArrayList;

public class ListaHobby {

 String line="";
 Hobby h = new Hobby();
 Persoana p = new Persoana();
 BufferedWriter bw = null;
 ArrayList<Persoana> listOfPersons;
 ArrayList<Hobby> listOfHobbies;
  public void writeListaHobbies(){
    try{
      listOfPersons = new ArrayList<Persoana>();
      FileReader  file1 =new FileReader("Persoane.txt");

      listOfHobbies = new ArrayList<Hobby>();
      FileReader file2 = new FileReader("Hobby.txt");

      BufferedReader br1 = new BufferedReader(file1);
      BufferedReader br2 = new BufferedReader(file2);

      while((line1 = br1.readLine()) != null){

         if(!line1.trim().contains("ID")){
          String[] attributes = line1.split(";");// split it at every ";"

            //Person person = new Person();           // make a new person
            p.setNume(attributes[1]);
            p.setPrenume(attributes[2]);
            p.setDataNasterii(attributes[3]);
            p.setProfesie(attributes[4]);

             listOfPersons.add(p);
         }
      }

     System.out.println(p.getNume());
      while((line2 = br2.readLine()) != null){

          if(!line2.trim().contains("ID")){
            String[] attributes = line2.split(";");  // split it at every ";"

                      // make a new person
            h.setNume(attributes[1]);
            h.setDescriere(attributes[2]);
            h.setNrPers(attributes[3]);
            h.setElemNecesar(attributes[4]);

            listOfHobbies.add(h);

          }

      }
     System.out.println(h.getNume());

      FileWriter fw = new FileWriter("PersHobby.txt");
      bw = new BufferedWriter(fw);

     for(int i = 0;i < listOfPersons.size(); i++) {

        //for(int j = 0 ; j < listOfHobbies.size();j++) {

             if((p.getId())== (h.getId()))
                 p.addHobby(h);

             String s = p.getNume() + " " +p.getPrenume() +
                     ": " + h.getNume() + ", " + h.getNume();
             System.out.println(s);
             bw.write(s);
             bw.newLine();
     }
      bw.close();
    }
    catch(IOException ex){
        System.out.println("Error opening file.");
        System.exit(1);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:57:21.987

您需要在读取输入文件的每一行时添加人员和爱好，并在写入文件时遍历人员和爱好。

```
import java.io.*;
import java.util.*;
import java.util.ArrayList;

public class ListaHobby {

 String line="";
 Hobby h;
 Persoana p;
 BufferedWriter bw = null;
 ArrayList<Persoana> listOfPersons;
 ArrayList<Hobby> listOfHobbies;
  public void writeListaHobbies(){
    try{
      listOfPersons = new ArrayList<Persoana>();
      FileReader  file1 =new FileReader("Persoane.txt");

      listOfHobbies = new ArrayList<Hobby>();
      FileReader file2 = new FileReader("Hobby.txt");

      BufferedReader br1 = new BufferedReader(file1);
      BufferedReader br2 = new BufferedReader(file2);

      while((line1 = br1.readLine()) != null){

         if(!line1.trim().contains("ID")){
          String[] attributes = line1.split(";");// split it at every ";"

            p = new Persoana();           // make a new person
            p.setNume(attributes[1]);
            p.setPrenume(attributes[2]);
            p.setDataNasterii(attributes[3]);
            p.setProfesie(attributes[4]);

             listOfPersons.add(p);
         }
      }

     System.out.println(p.getNume());
      while((line2 = br2.readLine()) != null){

          if(!line2.trim().contains("ID")){
            String[] attributes = line2.split(";");  // split it at every ";"

            h=new Hobby();
            h.setNume(attributes[1]);
            h.setDescriere(attributes[2]);
            h.setNrPers(attributes[3]);
            h.setElemNecesar(attributes[4]);

            listOfHobbies.add(h);

          }

      }
     System.out.println(h.getNume());

      FileWriter fw = new FileWriter("PersHobby.txt");
      bw = new BufferedWriter(fw);

     for(int i = 0;i < listOfPersons.size(); i++) {
        p=listOfPersons.get(i);
        for(int j = 0 ; j < listOfHobbies.size();j++) {
             h=listOfHobbies.get(j);
             if(p.getId())== h.getId()))
                 p.addHobby(h);

             String s = p.getNume() + " " +p.getPrenume() +
                     ": " + h.getNume() + ", " + h.getNume();
             System.out.println(s);
             bw.write(s);
             bw.newLine();
         }
     }
      bw.close();
    }
    catch(IOException ex){
        System.out.println("Error opening file.");
        System.exit(1);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:52:59.130

您正在使用 和 的单个实例`Person`添加`Hobby`到各自的列表中。`new Person`相反，对于找到的每个（唯一？）ID ，创建`new Hobby`并使用它们添加到列表中。

```
p = new Person();  
p.setXXX...  
... 
```

爱好也是如此。

```
h = new Hobby();
h.setXXX...   
... 
```

除非您这样做，否则您只会将最新发现的数据添加到相同的数据中，`person`并将`hobby`对象添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:42:06.823

您不断将同一个人添加到您的列表中。您需要通过取消注释行来在每次迭代中创建一个新对象。完成此操作后，您可以删除类成员 (p)，因为不再需要它，因为您将人员存储在 ArrayList 中。

同样的评论适用于爱好列表。

```
 while((line1 = br1.readLine()) != null){

     if(!line1.trim().contains("ID")){
      String[] attributes = line1.split(";");// split it at every ";"

        Persoana p = new Persoana();  // <~~~ you need to create a new person for each line
        p.setNume(attributes[1]);
        p.setPrenume(attributes[2]);
        p.setDataNasterii(attributes[3]);
        p.setProfesie(attributes[4]);

         listOfPersons.add(p);
     }
  } 
```

# .net - 使用逻辑将一对多 CSV 文件移至 SQL

> ID：10417062
> 
> 赞同：1
> 
> 时间：2012-05-02T15:39:17.297
> 
> 标签：.net, sql, csv, ssis

我搜索了很多地方，很少使用论坛发帖......所以我相信我在这里遇到了一个罕见的问题。我有一个包含一对多关系的 csv 文件。比如说，前 10 个字段包含一条记录。这继续到一个空白字段，然后在每个附加字段中是另一个分隔符，它是一个包含字段的管道。这实际上是与单个呼叫相关的事件的日志文件。

例如。

ID;MACHINEID;AN​​I;; **命令|参数|20120112.06:15:32**

粗体文本可以重复多次或几次。这是 SQL 连接的多方面。我需要把它恢复到 SQL 中。我在想 SSIS 脚本块。我在其中循环并从一侧添加到带有 ID 的多个表中。使用管道作为分隔符拆分内部字段。我只是想知道是否有人以前见过这个并且有一个我可能不知道的简单解决方案。我想这会更好地用 XML 创建，但事实并非如此。

任何帮助表示赞赏。如果它主要是建设性的，我什至会接受批评。提前非常感谢。

展示餐桌妆容

```
CREATE TABLE [dbo].[tblIVRCalls](
    [CALLID] [char](50) NOT NULL,
    [MACHINEID] [char](50) NOT NULL,
    [CHANNEL] [char](50) NOT NULL,
    [DNIS] [char](50) NOT NULL,
    [ANI] [char](50) NOT NULL,
    [STARTTIME] [smalldatetime] NOT NULL,
    [TRUNK] [char](50) NOT NULL,
    [APPLICATION] [char](50) NULL,
    [PLANID] [char](50) NULL,
    [DERIVEDID] [char](50) NULL,
    [TOTALTIME] [smalldatetime] NOT NULL,
 CONSTRAINT [PK_tblIVRCalls] PRIMARY KEY CLUSTERED 

CREATE TABLE [dbo].[IVRCallActions](
    [pk] [bigint] IDENTITY(1,1) NOT NULL,
    [fkCALLID] [char](50) NOT NULL,
    [SequenceNumber] [bigint] NOT NULL,
    [Command] [char](50) NOT NULL,
    [Arguments] [varchar](max) NOT NULL,
    [ExecutionTime] [datetime] NOT NULL,
 CONSTRAINT [PK_IVRCallActions] PRIMARY KEY CLUSTERED 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:28:46.330

一种选择是将数据导入临时表，其中重复的元素存储为 varchar(max)（或纯粹主义者的 nvarchar(max)）。

然后执行以下操作：

1.  将非重复字段插入表 1。
2.  使用@@Identity 捕获刚刚插入的行的标识
3.  循环遍历重复字段，首先提取行（由某个分隔符定义），然后是行的组成部分（由“|”定义）。
4.  将每一行插入表 2，其标识来自 (2)。

我承认步骤（3）不是最简单的事情。但是，如果您编写存储过程并使用拆分函数（http://stackoverflow.com/questions/2647/split-string-in-sql），那么它是可行的。

以我的经验，复杂的字符串操作在数百兆字节内都可以正常工作。如果您需要一次处理多个 GB，那么您可能需要自定义代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:09:49.223

我建议创建一个控制台程序（使用 C#、vbs 或您可以使用的任何东西）从原始文件中获取 2 个文件。

然后你可以在 SSIS 中处理这两个文件，它非常擅长管理空字段、更改数据类型等等。

该程序将简单地逐行读取原始文件，对其进行处理以获取父行和相关子行，并将父行写入一个文件，将子行写入另一个文件。这些文件将是 SSIS 包的条目。

不该做什么：

*   在 T-SQL 中进行这种处理要困难得多，因为它没有太多允许处理字符串的函数。
*   在 SSIS 中进行此操作是不可能的。没有任何组件可以将一行分解为几行。更不用说它应该产生两种不同类型的行。（一个自定义的 SSIS 组件可以做到这一点，但它不值得努力）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:49:47.180

根据在[SSIS 设计模式：加载可变长度行](http://sqlblog.com/blogs/andy_leonard/archive/2010/05/18/ssis-design-pattern-loading-variable-length-rows.aspx)中找到的信息，我能够创建以下过程。SSIS 脚本块可以做任何你可以用 C# 做的事情，并且可以安装到 SQL Server 以按设定的时间间隔运行。为处理创建了 2 个输出。您通过此脚本为每个缓冲区填充。因此，一个平面文件包含一列。2个输出和这个脚本之间。

```
 public override void Input0_ProcessInputRow(Input0Buffer Row)
    {
        IVRCallsBuffer.AddRow();
        string[] splitEntireRow = null;
        var byteRow = Row.Column0.GetBlobData(0,(int)Row.Column0.Length);
        var entireRow = System.Text.Encoding.ASCII.GetString(byteRow);
        splitEntireRow = entireRow.Split(';');
        int fieldPosition = 0;
        string CallID = "";
        while (splitEntireRow[fieldPosition] != "")
        {
            var splitIVRCall = splitEntireRow[fieldPosition].Split('=');
            switch (splitIVRCall[0])
            {
                case "CALLID":
                    IVRCallsBuffer.CALLID = splitIVRCall[1];
                    CallID = splitIVRCall[1];
                    break;
                case "MACHINEID":
                    IVRCallsBuffer.MACHINEID = splitIVRCall[1];
                    break;
                case "CHANNEL":
                    IVRCallsBuffer.CHANNEL = splitIVRCall[1];
                    break;
                case "DNIS":
                    IVRCallsBuffer.DNIS = splitIVRCall[1];
                    break;
                case "ANI":
                    IVRCallsBuffer.ANI = splitIVRCall[1];
                    break;
                case "STARTTIME":
                    IVRCallsBuffer.STARTTIME = DateTime.ParseExact(splitIVRCall[1], "yyyyMMdd.HH:mm:ss.fff", System.Globalization.CultureInfo.CurrentUICulture);
                    break;
                case "TRUNK":
                    IVRCallsBuffer.TRUNK = splitIVRCall[1];
                    break;
                case "APPLICATION":
                    IVRCallsBuffer.Application = splitIVRCall[1];
                    break;
                case "PLANID":
                    IVRCallsBuffer.PLANID = splitIVRCall[1];
                    break;
                case "DERIVEDID":
                    IVRCallsBuffer.DERIVEDID = splitIVRCall[1];
                    break;
                case "TOTALTIME":
                    IVRCallsBuffer.TOTALTIME = DateTime.ParseExact(splitIVRCall[1],"mm:ss.fff",System.Globalization.CultureInfo.CurrentUICulture);
                    break;   
            }
            fieldPosition++;
        }
        fieldPosition++;
        uint sequence = 1;
        while (splitEntireRow.GetUpperBound(0) -1 > fieldPosition)
        {
            IVRCallActionsBuffer.AddRow();
            var splitIVRCallAction = splitEntireRow[fieldPosition].Split('|');
            IVRCallActionsBuffer.fkCALLID = CallID;
            IVRCallActionsBuffer.SequenceNumber = sequence;
            IVRCallActionsBuffer.Command = splitIVRCallAction[0];
            IVRCallActionsBuffer.Arguments = splitIVRCallAction[1];
            IVRCallActionsBuffer.ExecutionTime = DateTime.ParseExact(splitIVRCallAction[2],"yyyyMMdd.HH:mm:ss.fff", System.Globalization.CultureInfo.CurrentUICulture);
            fieldPosition++;
            sequence++;
        }

    }
} 
```

# android - Android 按钮作为较大 png 图形的一部分

> ID：10417070
> 
> 赞同：0
> 
> 时间：2012-05-02T15:39:47.127
> 
> 标签：android, layout, button

我有一个大 png，上面有一些按钮“绘制”为图像。我可以以一种可以作为背景和按钮共享的方式使用它吗？

例如，我可以将它加载为背景，其中将在位置 X 5 Y 5 到位置 X 100 Y 100 中具有“按钮”，在位置 X 110 Y 110 到 X 200 Y 200 中具有“按钮”。

如果这是可能的，我也可以有“两个状态”按钮吗？“按下”等的不同图像。

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:25:31.423

根据您所说，听起来不错的解决方案可能是将按钮与 png 的其余部分分开。将无按钮图像设置为父布局的背景，然后在其上添加按钮。如果按钮无法与背景的其余部分分离，您可能需要使用完全透明的按钮。

需要记住的是，由于屏幕尺寸不同，您打算通过以编程方式添加按钮并设置它们相对于当前屏幕尺寸的尺寸和位置可能最好地实现。另外要记住的是，由于这种碎片化，使用该`android:background`属性设置图像可能会调整图像大小和扭曲图像，从而更改按钮的目标位置。

至于多状态按钮，这是开发指南中可以帮助您的部分：（您需要的是`android:state_pressed`属性）

[http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

如果您需要进一步的帮助，如果您自己尝试一下并查看出现了什么问题，可能会更容易，这样您就可以集中您的问题，发布一些代码并获得更详细的响应。你问的范围很广。祝你好运！

# javascript - 立即调用匿名函数的两种方式（function(d){ }() ）；和（函数（x）{}）（）；

> ID：10417071
> 
> 赞同：1
> 
> 时间：2012-05-02T15:39:55.960
> 
> 标签：javascript

> **可能重复：**
> [“(function ( ) { } ) ( )” 和 “(function ( ) { } ( ) )” 在 JavaScript 中的功能是否相同？](https://stackoverflow.com/questions/5938802/are-function-and-function-functionally-equal-i)

我的问题有这些特殊字符，我找不到一个好的答案。（有人知道如何用他们搜索吗？）

我已经看到了两种立即调用匿名函数的模式[http://jsfiddle.net/ukqS8/1/](http://jsfiddle.net/ukqS8/1/)

```
(function(d) {
    document.write(d*2);
})(3); 
```

和

```
(function(x) {
    document.write(x*2);
}(3)); 
```

不同之处在于 (3) 的放置位置：在右括号的内部或外部。

我在这里找到了第二种情况的一个很好的解释：

[javascript 函数与 (function() { ... } ());](https://stackoverflow.com/questions/4806150/javascript-function-vs-function)

我理解为`function(x) {...}`创建一个函数对象， (3) 成为它的参数，并且封闭的 () 告诉解释器里面的内容是一个语句。

在第一种情况下，它似乎做`(function(d) {...})`了一个以某种方式也是一个函数的语句，然后将 (3) 应用于这个语句/函数。

因此，它们似乎都以相同的方式执行。这里真的有区别吗？范围（我怀疑）？任何一个选项都更可取吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:42:46.833

你的理解是不正确的。

这些都是函数表达式；括号的位置在这里没有区别。

但是，[可能存在细微差别](https://stackoverflow.com/a/5938845/34397)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:42:29.793

它们执行完全相同。区别仅在于语法。

# javascript - jquery .html 不处理某些标签和功能

> ID：10417072
> 
> 赞同：2
> 
> 时间：2012-05-02T15:39:56.640
> 
> 标签：javascript, jquery, html, forms

目前，我正在开发一个将页面存储在本地数据库中的移动网站。底部是一些导航到其他页面的基本按钮，当您按下它们时，我想使用 jquery 的 .html 函数将正文内容替换为数据库中的其他 html 字符串。我发现的问题是，当我们进入联系表单页面时，用户无法真正使用表单字段。它们出现了，但它们不可点击。我还注意到您无法执行通过 .html 函数加载的 javascript 函数。

希望您能帮助我解决这个问题或提出解决方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:02:12.033

一些 jQuery 函数去除了脚本和样式标签（例如`.replace()`）。这不是错误，而是记录在某处——不幸的是，我现在找不到该文档。

但这在表单字段的情况下应该没有问题。他们应该毫无问题地插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:21:15.377

这是一个说明您的问题的[示例。](http://jsfiddle.net/ztrsX/)

说明：jQuery html 似乎不处理某些标签，尽管它确实如此。问题是当尝试在**不在 DOM 内的元素上执行 jQuery UI 相关函数时，上面的示例显示了在将元素附加到 DOM 之后和之前调用****按钮**jqueryUI 函数
之间的区别 ，解决此问题的通用解决方法是：

 **```
var div = $('<div></div>').hide().appendTo('body'); 
```

**然后用div**做任何你想做的事**

# asp.net - ASP.Net CollapsiblePanelextender 控件

> ID：10417073
> 
> 赞同：0
> 
> 时间：2012-05-02T15:40:06.303
> 
> 标签：asp.net, .net, visual-studio-2010, asp.net-controls, collapsiblepanelextender

下午所有，

我想知道是否可以在表格中的 ASP.net 中配置和使用 collapsiblePanelextender。我希望将其用于我正在创建的会议系统的会议记录。我有以下代码，并认为如果我将 pnlPresenter 和 pnlTime 与 pnlHeader 一起添加到 CollapseControlID 中，我将能够使其正常工作，但我不能。

有没有人有任何其他建议？

```
 <table width="100%">
    <tr>
           <td class="style3">Topic</td>
            <td class="style2">Presenter</td>
            <td>Time Alloted</td>
    </tr>
    <tr >
           <td class="style1" colspan="3">
            <asp:Panel ID="pnlHeader" runat="server" CssClass="cpHeader" Width="228%" Height="18px">
                1\.   Agenda Item 1
            <asp:Image ID="ImgToggle" runat="server"  ImageUrl="~/Images/collapse.jpg" ImageAlign="Middle" />
            </asp:Panel>
            </td>
     </tr>
     <tr>
            <td class="style3">
            <asp:Panel ID="pnlInfo" runat="server" CssClass="cpBody" >
                The Agenda topic details goes within here, The Agenda topic details goes within here, 
                The Agenda topic details goes within here, The Agenda topic details goes within here,.
            </asp:Panel>
            </td> 
            <td class="style2"> 
            <asp:Panel ID="pnlPresenter" runat="server" CssClass="cpBody" Width="107px">
                Presenters Name
            </asp:Panel>
            </td>
            <td class="style2"> 
            <asp:Panel ID="pnlTime" runat="server" CssClass="cpBody" Width="107px">
                Time
            </asp:Panel>
            </td>
      </tr>
</table> 
```

提前谢谢了

问候贝蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:08:53.683

目前尚不*完全*清楚您想要在这里实现什么，特别是因为您发布的标记中没有 CollapsiblePanelExtender，所以我写这篇文章的假设是您希望显示一个会议页面，其中每个议程项目都是可扩展的/可折叠。

我建议您使用中继器构建您的表格，而不是将其硬编码到您的页面中，然后对于每个议程项目，中继器可以为您呈现一个新行。在中继器呈现的行内，您可以将议程主题作为标题，议程项目详细信息作为使用扩展器展开/折叠的面板：

```
<asp:Repeater runat="server" ID="AgendaRepeater" DataSourceID="AgendaDataSource">
    <HeaderTemplate>
        <table border="1">
            <tr>
                <td>
                </td>
            </tr>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <asp:Label runat="server" ID="AgendaTopicLabel" Text='<%# Eval("Topic") %>' />
                <asp:ImageButton runat="server" ID="PanelExpandContractImageButton" ImageUrl="~/images/zoom_in_16x16.gif" />
                <asp:Panel runat="server" ID="AgendaItemDetailsPanel" Height="0px">
                    <asp:Label runat="server" ID="TopicDetailsLabel" Text='<%# Eval("Details") %>' /><br />
                    <asp:Label runat="server" ID="PresenterLabel" Text='<%# Eval("Presenter") %>' /><br />
                    <asp:Label runat="server" ID="TimeLabel" Text='<%# Eval("Time") %>' />
                </asp:Panel>
                <ajaxToolkit:CollapsiblePanelExtender runat="server" TargetControlID="AgendaItemDetailsPanel"
                        Collapsed="true" ExpandControlID="PanelExpandContractImageButton" CollapseControlID="PanelExpandContractImageButton"
                        ImageControlID="PanelExpandContractImageButton" CollapsedImage="~/images/zoom_in_16x16.gif"
                        ExpandedImage="~/images/zoom_out_16x16.gif" ExpandedSize="100" ExpandDirection="Vertical"
                        ScrollContents="true" />
           </td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

# linux - Linux Single Instance Kill 如果运行时间过长

> ID：10417074
> 
> 赞同：0
> 
> 时间：2012-05-02T15:40:07.640
> 
> 标签：linux, bash, daemon

我正在使用以下内容来保持在我的服务器上运行的单个脚本实例。我有一个 cronjob 每分钟运行一次。

[如何在 unix 中守护任意脚本？](https://stackoverflow.com/questions/525247/how-do-i-daemonize-an-arbitrary-script-in-unix)

```
#!/bin/bash

if [[ $# < 1 ]]; then
    echo "Name of pid file not given."
    exit
fi

# Get the pid file's name.
PIDFILE=$1
shift

if [[ $# < 1 ]]; then
    echo "No command given."
    exit
fi

echo "Checking pid in file $PIDFILE."

#Check to see if process running.
PID=$(cat $PIDFILE 2>/dev/null)
if [[ $? = 0 ]]; then
    ps -p $PID >/dev/null 2>&1
    if [[ $? = 0 ]]; then
        echo "Command $1 already running."
        exit
    fi
fi

# Write our pid to file.
echo $$ >$PIDFILE

# Get command.
COMMAND=$1
shift

# Run command
$COMMAND "$*" 
```

现在我发现我的脚本由于某种原因挂起，因此被卡住了。我想要一种方法来检查它`$PIDFILE`是否“旧”，如果是，则终止该进程。我知道这是可能的（检查文件上的时间戳），但我不知道语法，或者这是否是个好主意。此外，当此脚本运行时，CPU 应该会被大量使用。如果它挂起（很少见，但到目前为止至少发生过一次），CPU 使用率下降到 0%。如果我可以检查该进程是否真的挂起/未激活，那就太好了，但我不知道是否有一种简单的方法可以做到这一点（而且我不想在它被杀死的地方出现很多误报，但它是运行良好）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:10:34.657

要回答标题中与您的问题完全不同的问题，请使用[`timeout`](http://manpages.ubuntu.com/manpages/precise/man1/timeout.1.html).

现在，对于你的问题，我看不出它会挂在哪里，除非你给它一个 pid 文件的 fifo 队列。现在，要运行和重生，您只需在启动时运行此脚本一次：

```
#!/bin/bash

while /bin/true; do
    "$@"
    wait
done 
```

这会在您从另一个问题中获得的代码中带来另一个错误：`"$*"`将所有参数作为*单个*参数传递给脚本；如果没有引号，它将用空格分割参数。`"$@"`将单独传递它们并正确处理空白。

用 调用`/path/to/script command [argument]...`。

# java - 查找匹配的谓词。谓词的谓词？

> ID：10417075
> 
> 赞同：2
> 
> 时间：2012-05-02T15:40:08.857
> 
> 标签：java, guava

我有一个集合`Predicates`，比如说`List<Predicate<File>>`。然后我有一个`File`，我需要获取与文件匹配的谓词（如果有的话）。我正在考虑使用的思路，`Iterables.find()`但当然这需要 a`Predicate`不是一个值才能传递给 a `Predicate`。我想过实现以下但不知道是否已经存在机制。

```
public static <T> Predicate<Predicate<? super T>> createInversePredicate(
        final T value) {
    return new Predicate<Predicate<? super T>>() {

        @Override
        public boolean apply(Predicate<? super T> input) {
            return input.apply(value);
        }
    };
} 
```

这将允许我执行以下操作：

```
private List<Predicate<File>> filters = ...;

@Nullable
Predicate<File> findMatching(File file){
    return Iterables.find(filters, createInversePredicate(file), null);
} 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:44:17.617

Guava 团队成员在这里。

我就是这样做的。没有更好的办法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T22:56:20.387

我会避免创建“逆”谓词的复杂性，而只需使用命令式代码：

```
private List<Predicate<File>> filters = ...;

@Nullable
Predicate<File> findMatchingFilter(File file){
    for (Predicate<File> filter : filters) {
        if (filter.apply(file)) {
            return filter;
        }
    }
    return null;
} 
```

它更直接，下一个程序员不需要花 1 分钟来理解这个“逆”谓词业务:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T00:22:14.853

Java 8 用户可以这样做：

```
Predicate<File> findMatching(File file) {
  List<Predicate<File>> matchingFilters = filters.stream().filter(predicate -> predicate.test(file)).collect(Collectors.toList());
  return matchingFilters.isEmpty()? null : matchingFilters.get(0);
} 
```

在这里，我假设只有一个谓词与文件匹配。

您也可以在 Java 8 中使用`Optional<Predicate<File>>`而不是。`@Nullable`

# css - 使用 ERB 的 Sinatra 不提供背景图片

> ID：10417076
> 
> 赞同：0
> 
> 时间：2012-05-02T15:40:10.827
> 
> 标签：css, ruby, sinatra, background-image, erb

我创建了一个简单的 Sinatra 程序，用于从存储卡上复制照片以用于朋友的婚礼。我正在将 ERB 文件（CSS 或 HTML）用于 Web 前端。我可以显示图像，但无法加载背景图像。我尝试过使用静态文件位置、完整路径和 url。具有相对路径的 URL 会导致 404 错误。完整路径不会导致 404 错误，但不会提供背景图像。

来自 erb 文件 css 的背景示例：

```
body {
    background-color:white;
    background-image: url('siteback.jpg') !important;
    background-repeat:no-repeat;
    background-position:top center;
    margin:0;
    padding:0;
} 
```

示例 sinatra 代码：

```
require 'sinatra'

get '/' do
   erb :frontpage
end 
```

# java - Guice：如何创建 HttpSessionProvider

> ID：10417083
> 
> 赞同：1
> 
> 时间：2012-05-02T15:40:41.767
> 
> 标签：java, guice, provider

我有一个模块，它被定义为 Servlet 的内部类。

```
private static abstract class TestModule extends AbstractModule 
implements Provider<HttpSession> {

    @Override 
    protected void configure( ) {
     bind(HttpSession.class).toProvider( TestModule.class );
    }
    @Override public abstract HttpSession get( );
} 
```

在 Servlet 的 doGet() 中，我创建了注入器，如下所示：

```
@Override 
protected void doGet( final HttpServletRequest req,
        HttpServletResponse resp ) throws ServletException, IOException {

    Injector injector = Guice.createInjector( new TestModule( ) {
        @Override 
        public HttpSession get( ) {
            return req.getSession( );
        } 
    });      
} 
```

我得到错误：

> 1) 没有绑定 javax.servlet.http.HttpSession 的实现。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:44:15.240

问题是你这样配置：

```
bind(HttpSession.class).toProvider( TestModule.class ); 
```

但 HttpSession 的实际提供者是您在创建注入器时创建的匿名内部类。

要解决这个问题，只需使用 Guice 的 ServletModule：[http ://code.google.com/p/google-guice/wiki/ServletModule](http://code.google.com/p/google-guice/wiki/ServletModule)

# html - HTML 代码 .. 名称与数字

> ID：10417089
> 
> 赞同：1
> 
> 时间：2012-05-02T15:41:00.517
> 
> 标签：html

这似乎是一个愚蠢的问题，但我一直想知道。使用 HTML 代码名称与 HTML 代码编号相比有什么优势。每个版本都有正确的地方还是错误的地方？

通过 HTML 代码，我指的是这个..

[http://ascii.cl/htmlcodes.htm](http://ascii.cl/htmlcodes.htm)

我知道出于验证目的，应该使用代码，例如 using**`&amp;`**或**`&#38;`**vs using **&**。但是我不知道什么时候可以使用**`&#38;`**over **`&amp;`**... 或者它根本没有区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:42:57.697

没有什么不同的。例如，创建它的原因`&amp;`是为了让编码人员更容易记住并使代码更易于阅读。

归根结底，我们（人类）更容易阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:10:08.557

一些术语：像“&”这样的代码 被恰当地称为[字符实体引用](http://en.wikipedia.org/wiki/Character_entity_reference)；像“&”这样的代码 是[数字字符引用](http://en.wikipedia.org/wiki/Numeric_character_reference)。

我们可以将它们统称为“HTML 实体”。对于给定的代码点，有时会有一个字符实体引用，但总是有一个数字字符引用，它可以由字符的 Unicode 编码形成。例如，ℛ 具有数字字符引用“ℛ”。

通常，具有字符实体引用的是 ASCII 字符，但并非总是如此。

字符实体引用通常更易于阅读，但在特定上下文中，一组数字字符引用可能更容易阅读。例如，如果您正在编写一个正则表达式来匹配某个 Unicode 字符块。

当您说“应使用验证目的代码”时，我想您想到的规则是[裸 & 号不是有效的 HTML](https://stackoverflow.com/questions/275150/xhtml-and-ampersand-encoding)。这是特定于这个角色的。

**更新**

~~必须使用数字字符实体的示例：单引号字符“'”没有字符实体引用。一段从字符串中清除引号字符的 JavaScript 必须使用数字字符实体。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:46:57.867

使用名称总是更可取的，因为它总是更具可读性。考虑以下相同的代码：

```
$location = "Faith Life Church";
$city = "Sarasota";
/*...*/
foreach ($stmt as $row) {
    foreach ($row as $variable => $value) {
        $variable = strtolower($variable);
        $$variable = $value;
    }

} 
```

和

```
$v073124 = "Faith Life Church";
$v915431 = "Sarasota";
/*...*/
foreach ($v3245 as $v9825) {
    foreach ($v9825 as $v85423 => $v8245631) {
        $v85423 = strtolower($v85423);
        $$v85423 = $v8245631;
    }

} 
```

您认为哪个更具可读性？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T15:43:45.457

这是你的选择。代码可能比字母更容易让人记住。

**但**我认为 HTML 5 要求您尽可能使用字母作为标准。真的不确定这一点。

# asp.net - 是否需要在 web.config 中保护连接字符串？

> ID：10417096
> 
> 赞同：16
> 
> 时间：2012-05-02T15:41:24.133
> 
> 标签：asp.net, .net, web-config, database-connection, connection-string

所以我使用 SQL 身份验证在我的 web.config 中使用连接字符串。

当然人们说这可能是一个漏洞，因为您以明文形式存储密码。

但是，据我所知，IIS 从不为 web.config 提供服务，而且 web.config 无论如何都应该只有管理员和 IIS 的读取权限。因此，如果黑客已经获得了对网络服务器的访问权限，那么我使用什么加密都无关紧要，因为私钥将在网络服务器上。

通过混淆加密连接字符串不会被归类为安全吗？

是否值得加密 web.config 连接字符串并将私钥存储在网络服务器上？

此外，当然，如果我不使用 SSL，我将通过 HTTP 以明文形式传输连接字符串。如果我使用 SSL，那么这个问题也应该得到缓解。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-06T22:58:24.687

我不会说在 Web.config 中存储明文密码本身就是一个安全漏洞。但是加密密码*是*一种有用的纵深防御措施，而不仅仅是通过默默无闻的安全性：

1.  如果 IIS 配置错误以提供 Web.config 服务怎么办？
2.  如果在 ASP.NET 中发现了允许任何人下载 Web.config的安全漏洞（如[padding oracle 漏洞）怎么办？](http://technet.microsoft.com/en-us/security/bulletin/MS10-070)
3.  对 Web 服务器有不同程度的访问，从完全管理权限到服务器端代码注入。如果攻击者只能设法做到后者，他可能能够读取 Web.config 但可能无法访问机器密钥，尤其是当您的应用程序在部分信任下运行时。

最后，由您决定在 Web.config 中存储明文密码的风险是否可接受。当然，如果 Windows 身份验证是一个选项，那么您可能需要考虑使用它而不是 SQL 身份验证。

**更新：**在谈论安全性时，识别*资产*和*威胁*是个好主意。在这种情况下，资产是数据库中的敏感数据（如果数据不重要，那为什么还要用密码保护它呢？），威胁是攻击者可能以某种方式获得对 Web.config 和数据库的访问权限也是。一种可能的*缓解*方法是在 Web.config 中加密数据库密码。

> 有多大的风险？我们真的必须为这种天文数字般罕见的事件做好计划吗？

这种缓解已经一次证明了它的价值：当发现 ASP.NET padding oracle 漏洞时。任何在 Web.config 中存储明文密码的人都处于危险之中；任何加密密码的人都不是。您有多大把握在未来几年内不会发现 ASP.NET 中的另一个类似漏洞？

> 我们是否还应该加密源代码并在运行时解密？对我来说似乎太过分了。

那么，如果攻击者*确实*可以访问您的源代码怎么办？您要保护的资产是什么，您担心的威胁是什么？我认为在很多情况下，源代码的价值远低于数据。（我在这里考虑的是任何人都可以获得的现成的商业和开源软件。）如果您的源代码*很有*价值，那么可能需要考虑混淆。

> 我觉得如果他们已经对您的盒子进行了有限的访问，那么您的主机已经失败或者您已经安装了易受攻击的服务。

ASP.NET 或您的代码中的安全漏洞怎么样？它们*确实*不时弹出。

> 我关心的是标准做法。是标准吗？

Microsoft[建议](http://msdn.microsoft.com/en-us/library/ff650037.aspx#pagpractices0001_conhowtoencryptsensitivedatainmachineconfigandwebconfig)对连接字符串进行加密。

您应该做的是评估存储明文密码带来的风险：

*   攻击者能够发现和利用暴露 Web.config 的安全漏洞的可能性有多大？根据过去的历史，我会说可能性很低（但不是“天文数字”低）。
*   您的数据有多有价值或有多敏感？如果您存储的只是猫的照片，那么攻击者是否获得您的数据库密码可能并不重要。但是，如果您要存储[个人身份信息](http://en.wikipedia.org/wiki/Personally_identifiable_information)，那么从法律的角度来看，我会说您应该采取一切可能的措施来保护您的应用程序，包括加密您的连接字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T15:58:51.083

我认为这不是来自“外部”保护，而是来自“内部”。

有时，SQL 管理员/用户和操作系统管理员是不同的人。但是操作系统管理员可以访问所有文件，因此他可以轻松读取 web.config 文件中的 SQL 凭据。但是这些凭据可以以某种方式加密，即使是操作系统管理员也无法解密。

而且它几乎不是“通过默默无闻的安全性”，因为如果没有正确的用户证书，就无法解密加密的连接字符串，而且通常只有 IIS“用户”拥有该证书。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T16:01:32.870

考虑一下，如果 web.config 文件中存在生产密码，那么任何有权访问该文件的开发人员都可以访问生产数据库。当连接字符串中的用户名具有对数据库的读/写访问权限时，这尤其是一个问题。然后，开发人员可以在没有“修复”发生过的记录的情况下“修复”事物。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T16:11:37.260

我曾经在 IHackStuff 在线博客上阅读过一些文章。这个人解释了一些使用谷歌搜索引擎在搜索框中输入内容的方法来获取真正有趣的信息，例如：

```
filetype:config web.config -CVS 
```

这产生了与生产服务器上缓存的 web.config 文件相关的多个结果，这些文件的所有信息都可供公众查看。考虑到这种可能性，只要此类信息足够有价值，我仍然建议加密 web.config 数据库访问信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T16:26:47.207

你说得对，`web.config`ASP.NET 不会为浏览器提供服务。但是开发人员很谨慎，所以当他们发布新版本时，有时他们会将已知好的 web.config 复制到 web.config.old 或 web.config.bak 之类的东西中。而且由于开发人员很懒惰，发布后他们忘记删除旧的 web.config，或者将其挂起几天以防他们需要回滚发布。

现在，.old 和 .bak 文件*将*提供给浏览器，这意味着很容易编写脚本或工具来扫描这些文件并将它们下载给攻击者，然后攻击者可以在闲暇时通过它们来寻找连接带有用户名和密码的字符串，以及突然从*你的*数据库中提取的信用卡号码在互联网上流传......

如果您不想使用命令行和 RSA 密钥（坦率地说，您为什么要这样做？），请查看[这个](http://hugoware.net/projects/nkrypt)用于加密 web.config 的工具。

# authentication - 使用相同的身份验证通过 Lotus 连接访问 XPages 中的应用程序

> ID：10417097
> 
> 赞同：0
> 
> 时间：2012-05-02T15:41:37.893
> 
> 标签：authentication, lotus-notes, xpages

我正在尝试通过指向 iNotes 的链接通过 Lotus 连接访问电子邮件，但是当我单击该链接时，会重定向到 iNotes 的登录页面，并且不会在 lotus 连接处进行相同的身份验证。我该如何防止这种情况？如果我使用 iNotes 而是使用需要身份验证的 XPages 应用程序，还有一个解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:59:50.793

这是一个服务器管理问题。

您需要确保在 Domino 服务器和 IBM Connections 服务器上都设置了 Single SignOn。一旦从 IBM Connections 导出 LTPA 密钥，然后将其导入 Domino 并且两台服务器都在同一个域中，那么认证是自动的。

当用户登录到 Connections 并单击将他们带到 Domino 服务器的链接时，LTPA SSO 将启动并自动验证他们，反之亦然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:29:17.417

如果您想在服务器端 XPages 代码和 IBM Connections 之间使用 SSO，除了 Declan 所写的内容之外，他还提供了一些信息：[http ://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-8TY9EV](http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-8TY9EV)

# jquery - 使用 jQuery 相对移动可滚动内容

> ID：10417106
> 
> 赞同：0
> 
> 时间：2012-05-02T15:41:55.460
> 
> 标签：jquery, jquery-plugins, scrollto, scrolltop

我有一个包含可滚动内容的容器，我需要将滚动的位置*相对*于其当前位置移动，例如向下移动 20 像素。我想使用[ScrollTo](http://archive.plugins.jquery.com/project/ScrollTo)插件，或者`scrollTop()`jQuery 函数。

因此，如果我一次又一次地运行所需的命令，容器滚动应该会继续移动直到结束。伪代码：

> $(myContainer).scrollTo( { delta: '+20px' } );

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:52:09.067

scrollTop 应该这样做：

```
$('#myContainer').scrollTop($('#myContainer').scrollTop() + delta); 
```

[在 jsfiddle 上试试](http://jsfiddle.net/XHKTz/)

# python - 所有这些 OpenCV Python 接口之间有什么不同？

> ID：10417108
> 
> 赞同：96
> 
> 时间：2012-05-02T15:42:01.980
> 
> 标签：python, opencv

有

*   [`opencv`](http://opencv.willowgarage.com/documentation/python/introduction.html)（来自 OpenCV 家伙的库），
*   [`cv`](http://opencv.willowgarage.com/documentation/python/cookbook.html)（来自 OpenCV 家伙的旧库）和
*   [`pyopencv`](https://code.google.com/p/pyopencv/)与其前身[`ctypes-opencv`](http://code.google.com/p/ctypes-opencv/)。

主要区别是什么，我应该使用哪一个？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-05-03T05:16:31.807

OpenCV 正式发布了两种 Python 接口，`cv`和`cv2`.

**简历：**

我开始研究`cv`. 在此，所有 OpenCV 数据类型都被保留。例如，加载时，图像是 format `cvMat`，与 C++ 中的相同。

对于数组操作，有几个函数，如`cvSet2D`,`cvGet2D`等。有些讨论说，它们速度较慢。

对于 imageROI，您需要特殊功能，例如`cvSetImageROI`.

如果您找到轮廓，`cvSeq`则返回与 Python 列表或 NumPy 数组相比不太适合使用的结构。

（而且我认为，它的开发很快就会停止。之前，只有`cv`. 后来，OpenCV 附带了`cv`和`cv2`。现在，在最新版本中，只有`cv2`模块，并且`cv`里面是一个子类`cv2`。你需要调用`import cv2.cv as cv`访问它。）

**简历2：**

而最新的是`cv2`. 在这种情况下，所有内容都以`NumPy`对象`ndarray` 和`native Python`对象的形式返回，如`lists`, `tuples`,`dictionary`等。因此，由于对 NumPy 的支持，您可以在此处执行任何 numpy 操作。`NumPy`是一个高度稳定和快速的阵列处理库。

例如，如果您加载图像，`ndarray`则会返回 an。

`array[i,j]`为您提供 (i,j) 位置的像素值。

此外，对于 imageROI，可以使用数组切片，如`ROI=array[c1:c2,r1:r2]`. 不需要单独的功能。

要添加两个图像，不需要调用任何函数，只需执行`res = img1+img2`. （但 NumPy 加法是对像图像这样的 uint8 数组进行模运算。请参阅文章*[OpenCV 中的矩阵算术与 Numpy 之间的差异](http://opencvpython.blogspot.in/2012/06/difference-between-matrix-arithmetic-in.html)*以了解更多信息。

返回的轮廓是 Numpy 数组的列表。*[您可以在Contours-1: Getting Started](http://opencvpython.blogspot.in/2012/06/hi-this-article-is-tutorial-which-try.html)*中找到关于 Contours 的详细讨论。

***简而言之，使用 cv2 一切都被简化并且非常快。***

`cv2`在 Stack Overflow 问题*[OpenCV-Python 接口 cv 和 cv2 的性能比较中](https://stackoverflow.com/questions/9357696)*简单讨论了 NumPy 如何加速。

**pyopencv**：

我对这个了解不多，因为我没有使用过。但它似乎已经停止了进一步的发展。

我认为坚持使用官方图书馆会更好。

***总之，我会推荐你​​使用 cv2！***

编辑：您可以在*[Install OpenCV in Windows for Python 中查看](http://opencvpython.blogspot.in/2012/05/install-opencv-in-windows-for-python.html)*`cv2`模块的安装过程。

# php - 为什么我的查询结果重复了 3 次？

> ID：10417109
> 
> 赞同：0
> 
> 时间：2012-05-02T15:42:03.510
> 
> 标签：php, validation, match, friend

我下面的代码基本上就像一个朋友搜索引擎，如果你的帐户上没有他们，你可以在其中添加某人。所以我正在尝试执行以下操作：如果存在，它应该只显示朋友，如果不存在，那么它应该说添加朋友。

我让它工作，但查询的结尾（请参阅此评论“//问题代码 - 当我在此下方使用此回显时，它重复 3 次”）在重复添加 3 次时给我带来麻烦。

```
<?php
$num_rows1 = mysql_num_rows($result);
if ($result == "") {
    echo "";
}
echo "";

$rows = mysql_num_rows($result);
if ($rows == 0) {
    print("<div id=norequests>No results for <strong>$q
                 </strong></div>");

}
elseif ($rows > 0) {
    while ($row = mysql_fetch_array($query))
    {

        $person  = htmlspecialchars($row['full_name']);
        $linksys = htmlspecialchars($row['name']);
        $pid     = htmlspecialchars($row['system_id']);
    }

    print("");
}

}

else{
    echo '<div id="error">No results.</div>';
}

$sql    = "SELECT `Friend_id` from `friends_container` 
                 WHERE `System_id` = '$sid'";
$result = mysql_query($sql);
$query = mysql_query($sql) or die("Error: " . mysql_error());

if ($result == "") {
    echo "";
}
echo "";

$rows = mysql_num_rows($result);
if ($rows == 0) {
    print("");

}
elseif ($rows > 0)
{
    while ($row = mysql_fetch_array($query))
    {
        $existing = htmlspecialchars($row['Friend_id']);
        if ($existing == $pid) {
            echo("<img src=$linksys />$person - Already Existing");
        }

        else
            //Problem code - when i use this echo below this where it repeats 3 times
        {
            echo("Add $person");
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:46:21.657

您必须`3 images`为每个`account`.

您的查询将始终导致多个结果。您应该做的是使用 php 将其转换为可以产生更好选择的东西，或者为了方便将结果转换为数组。

# hibernate - 在 XML 映射中出现休眠错误：实体映射中的重复列？

> ID：10417110
> 
> 赞同：1
> 
> 时间：2012-05-02T15:42:04.720
> 
> 标签：hibernate, hibernate-mapping

我知道列表中有几个类似的问题，但我没有成功地将它们扭曲成针对我的特定问题的解决方案。

我正在为我的 hibernate3 配置使用 XML 映射文件。我需要在基础对象和多个附件对象之间创建一组单向关系。（附件可以连接到基础对象上的多个站点，并且每个附件点可以包含许多附件。我需要单独跟踪附件列表。）但是，这样做我得到一个“实体映射中的重复列”异常。

```
org.hibernate.MappingException: Repeated column in mapping for entity: ATTACHMENT column: attachmentID (should be mapped with insert="false" update="false") 
```

令我困惑的部分是基础对象映射仅使用“attachmentID”作为列表索引，而不是选择键。

谁能告诉我如何设置这些映射文件以避免异常？我在这个论坛上找到的其他类似问题都使用注释，但我需要使用 XML。

这是我的附件对象。它标识了 3 种不同类型的连接点。一种基础对象类型有两个可能的附着点，而另一种只有一个。当它附加到其中一个基点时，它会在适当的对象 ID 中获取该基础对象的 ID，其余的设置为 -1（这是一个特殊的基本记录）。

（当然，这些映射从根本上减少了，但我想我捕获了所有的导入功能。）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>

  <class name="attachment" table="ATTACHMENT">
      <id column="attachmentID" name="attachmentID" type="int">
          <generator class="identity"></generator>
      </id>

      <property name="idBase1"></property>
      <property name="idBase2"></property>
      <property name="idAltBase1"></property>

  </class>
</hibernate-mapping> 
```

这是基础对象的映射文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>

  <class name="base" table="BASE">
      <id column="IDBASE" name="idBase" type="int">
          <generator class="identity"></generator>
      </id>

    <property name="type"></property>

    <list name="attachment1" cascade="all">
        <key column="idBase1" not-null="true" />
        <list-index column="attachmentID" base="0" />
        <one-to-many class="ATTACHMENT"/>
    </list>

    <list name="attachment2" cascade="all">
        <key column="idBase2" not-null="true"/>    
        <list-index column="attachmentID" base="0" />
        <one-to-many class="ATTACHMENT"/>
    </list>
  </class>
</hibernate-mapping> 
```

这是备用基础对象的映射文件。它看起来与主要基础对象相同，但只有一个附件列表。而且，我认为这个还可以。或者，至少，此映射不会引发异常。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>

  <class name="altBase" table="BASE">
      <id column="IDBASE" name="idBase" type="int">
          <generator class="identity"></generator>
      </id>

    <property name="type"></property>

    <list name="idAltBase1" cascade="all">
        <key column="idBase1" not-null="true" />
        <list-index column="attachmentID" base="0" />
        <one-to-many class="ATTACHMENT"/>
    </list>
  </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:56:50.390

由于附件维护外键，因此您必须在一对多方面设置逆来告诉 H 附件将维护它

```
<list name="idAltBase1" cascade="all" inverse="true"> 
```

此外，当您想查看附件中的外键时，为什么不将其映射为引用。

```
 <many-to-one name="base1" column="idBase1"/>
  <many-to-one name="base2" column="idBase2"/>
  <many-to-one name="altBase1" column="idAltBase1"/> 
```

注意：getBase1().getId() 不会为 Base1 行发出选择。

# apache - 使用 cURL / WebDAV 锁定 PUT UNLOCK

> ID：10417112
> 
> 赞同：0
> 
> 时间：2012-05-02T15:42:06.817
> 
> 标签：apache, curl, locking, webdav, cadaver

我的想法是`LOCK`在 apache/WebDAV 服务器上创建一个文件，在服务器`PUT`上更新它的版本，然后在`UNLOCK`它之后。

我刚刚用尸体尝试了以下操作：

1.  创建一个`A.txt`包含内容的文件`a file`
2.  `GET``A.txt`产生的文件`a file`
3.  编辑`A.txt`并`updated file`保存（在尸体中）
4.  `GET`产生的文件`A.txt`仍然产生`a file`
5.  尸体中的关闭编辑（VIM）
6.  `GET``A.txt`产生的文件`updated file`

我猜在内部 cadaver `LOCK`s 文件，`GET`s 它并在本地更改它。然后它`PUT`就是`UNLOCK`它。

**问题**：我怎样才能用 curl 做到这一点？

**问题**：当连接速度很慢并且我`PUT`为一个尚未完全上传的文件做一个时，我只得到尚未上传的部分。我想买旧的，只要新的不完整。

**尝试**：我尝试了以下手动锁定文件（即使用 cURL）：

```
curl -v -X LOCK --user "user:password" http://myServer/newFile 
```

我得到的是：

```
* About to connect() to myServer port 80 (#0)
*   Trying xx.xx.xxx.xxx... connected
* Connected to myServer (xx.xx.xxx.xxx) port 80 (#0)
* Server auth using Basic with user 'user'
> LOCK /newFile HTTP/1.1
> Authorization: Basic xxxxxxxxxxxxxxxxx
> User-Agent: curl/7.21.6 (x86_64-pc-linux-gnu) libcurl/7.21.6 OpenSSL/1.0.0e zlib/1.2.3.4 libidn/1.22 librtmp/2.3
> Host: myServer
> Accept: */*
> 
< HTTP/1.1 400 Bad Request
< Date: Wed, 02 May 2012 15:20:55 GMT
< Server: Apache/2.2.3 (CentOS)
< Content-Length: 226
< Connection: close
< Content-Type: text/html; charset=iso-8859-1
< 
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html>
* Closing connection #0 
```

查看 apache 日志文件，我发现：

```
[Wed May 02 15:20:55 2012] [error] [client xx.xx.xxx.xxx] The lock refresh for /newFile failed because no lock tokens were specified in an "If:" header.  [400, #0]
[Wed May 02 15:20:55 2012] [error] [client xx.xx.xxx.xxx] (20)Not a directory: No locktokens were specified in the "If:" header, so the refresh could not be performed.  [400, #103] 
```

感谢您的任何提示！

**更新**：我添加了我的问题描述..干杯！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:59:45.743

该`LOCK`方法需要一个正文，其中包含您要取出的锁的 XML 描述。您的 cURL 测试不包括此正文，因此 400 错误响应。

但是，如果我正确理解您的问题，您希望：

1.  锁
2.  放
3.  开锁

如果那是真的，你为什么还要为 LOCK 和 UNLOCK 烦恼呢？只需执行 PUT！仅当您想在持有锁时执行多个操作并避免让另一个客户端看到处于部分修改状态的对象或（可能更糟）与您同时修改对象时，锁才会有用。

锁定有用的典型情况是读-修改-写循环：您想要获取对象，在本地对其进行修改，然后将其放回，但不允许另一个客户端在您获取对象和时间你把它。然而，为了处理这种特殊情况，HTTP 提供了一种不同的解决问题的方法，而不使用锁（这不适合 HTTP 等无状态协议）：

1.  获取对象
2.  本地修改
3.  使用包含在步骤 1 中返回的原始 ETag的[If-Match](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)标头将对象放回原处
4.  如果 PUT 导致 412 错误，请返回步骤 1。否则，您已完成。

**更新**：根据您更新的问题，如果您同时执行 GET 与 PUT，我看到您会看到新文件的部分截断或半上传版本。这是不幸的。服务器应将 PUT 视为相对于其他请求的原子。其他客户端应该看到旧版本或新版本，而不是介于两者之间的状态。您不需要从客户端做任何事情来实现这一点。它应该在服务器中修复。

# javascript - javascript preg_match 等价

> ID：10417115
> 
> 赞同：0
> 
> 时间：2012-05-02T15:42:11.417
> 
> 标签：javascript, regex

> **可能重复：**
> [JavaScript 中的 preg_match？](https://stackoverflow.com/questions/3291289/preg-match-in-javascript)

我有一个这样的网址：

```
http://localhost/nafham/?selection/12/24/122 
```

使用 PHP 我可以做到：

```
preg_match("#(\d+)/(\d+)/(\d+)#", $_SERVER['REQUEST_URI'], $regs)
$edu_year = $regs[1];
$semester = $regs[2];
$subject = $regs[3]; 
```

我怎样才能在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:45:02.150

字符串`.match`是您要查找的内容或 regex.exec

阅读[http://www.w3schools.com/jsref/jsref_match.asp](http://www.w3schools.com/jsref/jsref_match.asp)

和[http://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

# android - Android获取WebView高度

> ID：10417120
> 
> 赞同：1
> 
> 时间：2012-05-02T15:42:28.080
> 
> 标签：android, android-layout, android-webview

我在我的 XML 中定义了一个 WebView：

```
<WebView
    android:id="@+id/streetview_webview"
    android:layout_width="match_parent"
    android:layout_height="164dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/header" /> 
```

现在我想在我的代码中获取这个 WebView 的高度，以排除滚动我的 CustomViewPager 的 webview 滚动

```
@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    if (childId > 0) {
        View webv = findViewById(R.id.webView1);
        if (webv != null) {
            int x = webv.getLeft();
            int x2 = x + webv.getLayoutParams().width;

            int y = webv.getTop();
            int y2 = y + webv.getMeasuredHeight();

            int targetx = (int) event.getX();
            int targety = (int) event.getY();

            if (targetx > x && targetx < x2 && targety > y && targety < y2) {
                return false;
            }
        }
    }
    return super.onInterceptTouchEvent(event);
} 
```

我努力了

`webv.getHitRect`但这会获得父级的高度（整个屏幕）

```
webv.getLayoutParams().width; // <- working
webv.getLayoutParams().height; // -1 
```

和

```
webv.getHeight 
```

但他们都没有让我达到 164dp 的高度。

**编辑：**谢谢大家 Akos Cz 是对的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:55:44.033

尝试[getMeasuredHeight()](http://developer.android.com/reference/android/view/View.html#getMeasuredHeight%28%29)方法。在布局过程的测量通过后，它可用于所有视图对象。

查看以下 URL 中的文档以获得更详细的说明，特别是以下部分：

*   大小、填充和边距
*   布局

[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-21T14:25:57.897

要在加载内容后获取高度，`webview`那么这行代码可以帮助您。

```
ViewTreeObserver viewTreeObserver  = webview.getViewTreeObserver();
viewTreeObserver.addOnPreDrawListener(new OnPreDrawListener() {
    @Override
    public boolean onPreDraw() {                                
     int height = webview.getMeasuredHeight();
     LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(webview.getLayoutParams());

     if( height != 0 ){
 Toast.makeText(DesignTemplateView.this,"height:"+height,Toast.LENGTH_SHORT).show();
 webview.getViewTreeObserver().removeOnPreDrawListener(this);
    }
      return false;
}
}); 
```

# github - jekyll 前面有问题，如何找到损坏的文件？

> ID：10417122
> 
> 赞同：5
> 
> 时间：2012-05-02T15:42:33.990
> 
> 标签：github, jekyll

当我在前面的问题中出现语法错误时，我收到以下错误：

```
 /.../psych.rb:203:in `parse': (<unknown>): could not find expected
 ':' while scanning a simple key at line 6 column 1
 (Psych::SyntaxError)
        from /.../psych.rb:203:in `parse_stream'
        from /.../psych.rb:151:in `parse'
            from .... 
```

你知道一种方法来判断是什么文件导致了问题吗？

我知道我可以按如下方式使用 DTrace：

```
dtrace -n 'syscall::open*:entry { printf("%s %s",execname,copyinstr(arg0)); }'| grep _posts 
```

但我正在寻找更直接的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:26:32.040

似乎 jekyll 在 ruby​​ 1.9.3 上不能很好地工作。引入了更具限制性的 yaml 解析器：Psych 可能具有不同的异常层次结构，因此 jekyll 无法正确处理它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T15:27:05.227

**You may find that this is caused by faulty formatting**

If your front matter looks like this:

```
---
menu:
- text: Home
url: /en/index.html
- text: Overview
url: /en/overview.html
--- 
```

instead of

```
---
menu:
- text: Home
  url: /en/index.html
- text: Overview
  url: /en/overview.html
--- 
```

then the YAML parser will throw it out.

# .net - F# 中的线程安全普通随机数生成器

> ID：10417123
> 
> 赞同：5
> 
> 时间：2012-05-02T15:42:34.810
> 
> 标签：.net, random, f#

需要一个从正态（高斯）分布返回样本的随机数生成器，我已将[John D. Cook 的 C# 生成器](http://www.codeproject.com/Articles/25172/Simple-Random-Number-Generation)的一部分移植到 F# ：

```
let mutable m_w = 521288629u
let mutable m_z = 362436069u

let private getUint () =
    m_z <- 36969u * (m_z &&& 65535u) + (m_z >>> 16)
    m_w <- 18000u * (m_w &&& 65535u) + (m_w >>> 16)
    (m_z <<< 16) + m_w

let private setSeed () =
    let dt = System.DateTime.Now
    let x = dt.ToFileTime ()
    m_w <- uint32 (x >>> 16)
    m_z <- uint32 (x % 4294967296L)

let private getUniform () =
    let u = getUint ()
    (float u + 1.) * 2.328306435454494e-10

let private randomNormal () =
    let u1 = getUniform ()
    let u2 = getUniform ()
    let r = sqrt (-2\. * (log u1))
    let theta = 2\. * System.Math.PI * u2
    r * sin (theta)

/// Returns a normal (Gaussian) random sample with mean 0 and standard deviation 1
let randn () =
    setSeed ()
    randomNormal ()

/// Returns an array of normal (Gaussian) random samples
let randns n m =
    setSeed ()
    [| for i in 0 .. n - 1 -> randomNormal () |] 
```

此实现工作正常，但不是线程安全的。鉴于依赖于它的代码广泛使用了线程并行库，我需要使其成为线程安全的。

这对我来说并不明显，因为该方法的核心是两个可变成员，它们几乎是不可或缺的。有没有其他方法可以在不使用锁的情况下实现线程安全？

有没有其他方法可以仅使用不可变成员来实现普通的伪随机生成器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T16:09:15.933

使用可变成员，您别无选择，只能使用锁。

但是，您最好使用包含的不可变记录[并将](http://msdn.microsoft.com/en-us/library/dd233184.aspx)`m_w`其`m_z`传递给您的随机函数。他们可以返回您的随机值的元组和包含更新的随机成员的新​​记录。更好的是，您可以创建一个[计算表达式](http://msdn.microsoft.com/en-us/library/dd233182.aspx)来处理生成随机数，这样您就不必担心传递随机记录。

此外，`setSeed`从您的随机函数中调用是不好的。多个后续调用将返回相同的值。您只想设置一次种子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T16:27:04.097

这是一个使用 System.Random 的简单线程安全解决方案，如果有帮助的话：

```
let random =
  let rand = System.Random()
  let locker = obj()
  fun () -> lock locker rand.Next 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T17:06:21.157

最好将所有`m_w`/`m_z`和相关函数放入一个类中。像这样：

```
type Random = 
    let setSeed() = ...
    let randomNormal() = ... 
```

之后至少有两种解决方案：启动每个线程并使用它自己的`Random`对象实例；或者使用`ThreadLocal<Random>`类来做同样的事情——保证每个线程都有自己的`Random`类实例。

编辑：另外，`MailboxProcessor`with`PostAndReply`方法是在线程之间共享单个生成器的好方法。无需担心同步。

# sql-server - 在存储过程中引用时，动态命名的临时表返回“无效的对象名称”

> ID：10417126
> 
> 赞同：3
> 
> 时间：2012-05-02T15:42:41.673
> 
> 标签：sql-server, sql-server-2008, tsql

当我运行以下代码时，我收到“无效的对象名称”错误，知道为什么吗？

我需要创建一个动态命名的临时表以在存储过程中使用。

```
 DECLARE @SQL NVARCHAR(MAX)
 DECLARE @SessionID NVARCHAR(50)
 SET @SessionID = 'tmp5l7g9q3l1h1n5s4k9k7e'
 ;
 SET        
 @SQL = N'      CREATE TABLE #' + @SessionID + ' ' +
         N'     (' +
    N'      CustomerNo NVARCHAR(5), ' +
    N'      Product NVARCHAR(3), ' + 
    N'      Gross DECIMAL(18,8) ' +
    N'      )'
 ;
 EXECUTE sp_executesql @SQL
 ;
 SET        
 @SQL = N'      SELECT * FROM #' + @SessionID
 ;
 EXECUTE sp_executesql @SQL 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:16:31.180

**为什么要乱用名字？**让 SQL Server 为您管理：

[SQL Server 中的临时表](http://www.simple-talk.com/sql/t-sql-programming/temporary-tables-in-sql-server/)

从上面的链接：

> If the same routine is executed simultaneously by several processes, the Database Engine needs to be able to distinguish between the identically-named local temporary tables created by the different processes. It does this by adding a numeric string to each local temporary table name left-padded by underscore characters. Although you specify the short name such as #MyTempTable, what is actually stored in TempDB is made up of the table name specified in the CREATE TABLE statement and the suffix. Because of this suffix, local temporary table names must be 116 characters or less.
> 
> If you’re interested in seeing what is going on, you can view the tables in TempDB just the same way you would any other table. You can even use sp_help work on temporary tables only if you invoke them from TempDB.

```
USE TempDB
go
execute sp_Help #mytemp 
```

> or you can find them in the system views of TempDB without swithching databases.

```
SELECT name, create_date FROM TempDB.sys.tables WHERE name LIKE '#%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:47:48.293

你这样做是不对的！

尝试：

```
exec(@SQL) 
```

代替：

```
EXECUTE sp_executesql @SQL 
```

* * *

要使用`sp_executesql`变量必须在`@SessionID`引号内，并且必须提供输入参数。检查[此](http://msdn.microsoft.com/en-us/library/ms175170%28v=sql.100%29.aspx)以获取完整示例！

* * *

你必须知道动态 SQL 是一个很好的 SQL 注入端口！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T16:30:25.667

此语法有效

```
CREATE TABLE #SessionID (CustomerNo NVARCHAR(5),  Product NVARCHAR(3),  Gross DECIMAL(18,8));
Select COUNT(*) from #SessionID;
Drop Table #SessionID; 
```

# playframework - 长轮询是否有连接限制？

> ID：10417131
> 
> 赞同：1
> 
> 时间：2012-05-02T15:42:53.587
> 
> 标签：playframework, jmeter, long-polling, playframework-1.x

我正在使用长轮询开发 Play 1.2.4 应用程序，类似于聊天示例。我一直在使用 JMeter 进行负载测试，当我有 300 多个侦听器时，我的服务器需要超过 4 秒的时间来回答，这对我的需求来说太多了，或者侦听器永远不会收到答案。我需要在不到一秒的时间内得到所有回复。

长轮询是否有连接限制？我需要特殊的配置或服务器吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:36:48.470

听起来您在 Play 服务器上没有达到长轮询的连接限制。相反，您可能会遇到某种形式的瓶颈，这会导致响应时间降低。

一个很大的可能性是您在执行 JMeter 测试的机器上达到了限制，如果您在 GUI 模式下运行，这种可能性会增加。您可以通过使用多台机器重复测试来验证是否是这种情况，只需在两台机器上同时执行相同的测试，如果它们都显示与仅运行一个测试时相同的结果，那么逻辑上问题是不是您的 Play 服务器，而是测试本身。但是，如果您在运行两个测试时看到更糟糕的结果，那么问题出在您的服务器上。请记住使用加速时间，这将有助于确定事情开始减速的点，这对调整很有用。

如果您达到 JMeter 限制，请尝试从命令行运行，这会更有效，或者，如果您真的想要界面，请尝试使用更少的侦听器，这些都是导致问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:20:28.967

不需要特殊配置，这只是服务器上的 CPU/RAM 加上处理控制器调用需要多长时间（对 DB 的请求数等）的问题。

由于 Play 是无状态的，如果您遇到超时，只需尝试在负载均衡器后面添加第二台服务器，这应该可以解决问题。

**编辑评论：**

您遇到的主要问题是 Play 需要很长时间才能将事件传播给 300 个用户。这是意料之中的，因为 Chat 示例使用内存系统进行传播，将消息按顺序传递给每个订阅者。

Chat 方法还有另一种方法：如果您要使用第二台服务器，则消息不会在它们之间共享，因为 ArchivedEventStream 本地存储在 Play 实例 JVM 中。

如果您想要更高的性能，您需要将发布/订阅步骤移至外部消息队列工具，例如 Redis。这将有利于让您添加额外的实例，同时在它们之间共享相同的消息。

# vb.net - 采用 VB 或 VB.NET 项目时出现的问题

> ID：10417134
> 
> 赞同：1
> 
> 时间：2012-05-02T15:43:05.007
> 
> 标签：vb.net, visual-studio, visual-studio-2008, vb6

很抱歉我缺乏VB知识（我不是VB或.net开发人员），我采用了一个非常古老且简单的插件软件，可能是用VB或VB.NET编写的，源代码包括文件带有流动的后缀。

```
.dsx; .frm; .frx; msi; ,res; .sln; .vbp; .wip; .Dsr; .cls; .frm; 
```

这是 .sln 文件的内容：

```
Microsoft Visual Studio Solution File, Format Version 1.00
Project("{73393D18-DAC4-11D1-88FC-0000F8064EBB}") = "Agile Plugin", "AgilePlugin.wip", "    {17DC5F11-9B32-47FE-9F12-71923EC1C0DC}"
EndProject
Global
GlobalSection(LocalDeployment) = postSolution
    StartupProject = {00000000-0000-0000-0000-000000000000}
EndGlobalSection
GlobalSection(BuildOrder) = postSolution
    0 = {17DC5F11-9B32-47FE-9F12-71923EC1C0DC}
EndGlobalSection
GlobalSection(DeploymentRoot) = postSolution
EndGlobalSection
EndGlobal 
```

这是 .cls 文件的一部分内容：

```
VERSION 1.0 CLASS
BEGIN
  MultiUse = -1  'True
  Persistable = 0  'NotPersistable
  DataBindingBehavior = 0  'vbNone
  DataSourceBehavior  = 0  'vbNone
  MTSTransactionMode  = 0  'NotAnMTSObject
END
Attribute VB_Name = "EventClassModule"
Attribute VB_GlobalNameSpace = False
Attribute VB_Creatable = True
Attribute VB_PredeclaredId = False
Attribute VB_Exposed = True
Option Explicit
Option Base 1

Public WithEvents App As Application
Attribute App.VB_VarHelpID = -1
Public WithEvents Proj As Project
Attribute Proj.VB_VarHelpID = -1

Dim NewTaskIDs() As Long
Dim NumNewTasks As Long 
```

有人可以告诉我该程序是由 VB 还是 VB.NET 编写的？哪个 Visual Studio 可以编辑它？我尝试了 VS 2008，但收到一条错误消息：“无法打开，因为此版本的 Visual Studio 不支持其项目类型（.wip）”。

非常感谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:44:51.013

那是带有基于[Visual Installer](http://www.devx.com/vb2themax/Article/19893)的安装项目的 VB6。

它们不再受支持。

# meteor - 访问数据库查询的内容

> ID：10417135
> 
> 赞同：2
> 
> 时间：2012-05-02T15:43:05.000
> 
> 标签：meteor

我一定遗漏了一些重要的东西，但这是我的问题。我有一个包含“标题”和“内容”字段的文档集合。

当我导航到特定的网址时，比如说，

```
http://localhost:3000/document/33ea5676-4f8f-4fe4-99d5-fe094556933d 
```

我从 url 中获取文档 _id，通过存储它`Session.set('docID',_id)`，然后想要显示文档的标题。我有一个模板：

```
<template name='document'>
  <h2>My document is called {{document.title}}</h2>
</template> 
```

然后在我的 client.js 文件中，我有：

```
Template.document.document = function() {
  doc = Documents.findOne({'_id':Session.get('docID')});
  return doc;
} 
```

但这不起作用：我收到如下错误：

```
Cannot read property 'title' of undefined 
```

因为，当然，在可以访问该字段之前，必须从数据库中检索文档。如果我打电话，

```
Template.document.document().title 
```

从控制台，我检索标题。我尝试制作特定于标题的功能，

```
Template.document.title = function() {
  doc = Documents.findOne({'_id':Session.get('docID')});
  return doc.title;
} 
```

但这也存在同样的问题。`doc.title`数据库检索条目与同时调用引发错误之间似乎存在延迟。

我必须在这里忽略一些基本的东西。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:50:10.120

尝试在模板中使用“with”：

```
Template.document.document = function() {
  return Documents.findOne({'_id':Session.get('docID')});
}

<template name='document'>
  {{#with document}}
    <h2>My document is called {{title}}</h2>
  {{/with}}
</template> 
```

# android - 播放 flv 安卓

> ID：10417143
> 
> 赞同：0
> 
> 时间：2012-05-02T15:43:30.343
> 
> 标签：android

我们可以在不使用 WebView 的情况下在 Android 中播放 flv 流视频吗，它太慢了？我的意思是直接从 url 播放 .flv 视频。有任何想法吗？VideoView 现在可以使用 .flv 链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:57:15.577

我让它使用这个代码工作。您可以从您的设备本地播放它或从在线流式传输它。您必须在电影中拖动 FLV 组件的一个实例，然后将其从舞台上删除，使其保留在您的库中。

```
var myVideo:FLVPlayback = new FLVPlayback();
myVideo.source = "content/video/BeauIntro.flv"; // CHANGE THIS TO YOUR FLV 
myVideo.autoPlay = true;

// I am choosing to load the flv into an empty movie but you don't have to. 
var my_mc:MovieClip = new MovieClip(); 
addChild(my_mc); 

/// These are important because it can mess up position with out it.
myVideo.align = StageAlign.TOP_LEFT;
myVideo.scaleMode = VideoScaleMode.EXACT_FIT;

// Setting the video to the screen size of device
myVideo.width = stage.stageWidth;
myVideo.height = stage.stageHeight;

// Adding my FLV into my empty movie.
my_mc.addChild(myVideo);

//Setting the empty Movie Clip for the video to the screen size of device
my_mc.width = stage.stageHeight;
my_mc.height = stage.stageHeight;

/// This will run when the video stops 
myVideo.addEventListener(fl.video.VideoEvent.COMPLETE, VideoStopped);
function VideoStopped(e:Event):void
    {
    myVideo.stop();
    myVideo.visible = false; /// I wanted it to not be seen after playing.
    trace("stopped");
    myVideo.removeEventListener(fl.video.VideoEvent.COMPLETE, VideoStopped);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T16:03:43.833

试试这个：String url=你的网址；意图意图 = new Intent();
意图.setAction（意图.ACTION_VIEW）；intent.setDataAndType(Uri.parse(url), "flv-application/octet-stream"); 开始活动（意图）；

# javascript - 按下 ENTER 时提交表单的 Javascript

> ID：10417144
> 
> 赞同：0
> 
> 时间：2012-05-02T15:43:30.587
> 
> 标签：javascript, submit, onkeydown

我有一个按钮，其代码如下所示：

```
<a href="javascript:document.forms['ContactForm'].submit();" onClick="return ValidateContactForm();" class="button"><span>Submit</span</a> 
```

我需要什么 JavaScript 代码才能在我按下键盘上的“Enter”键时提交表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:32:43.077

只是好奇，你为什么不使用`<input type="submit" />`元素？当按下 Return 键时，该 HTML 元素会自动提交其嵌套的表单，而无需 JavaScript。就像任何其他元素一样，您还可以使用 CSS 将其设置为您喜欢的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:19:15.210

您需要使用“onkeypress”事件。取决于您在听 Enter 按键时希望焦点所在的位置。

```
document.onkeypress = function keypressed(e){
  var keyCode = (window.event) ? e.which : e.keyCode;
  if (keyCode == 13) {
    if(ValidateContactForm())
      document.forms['ContactForm'].submit();
  }      
} 
```

（针对 IE 更新，每个[JavaScript KeyCode 值在 Internet Explorer 8 中为“未定义”](https://stackoverflow.com/questions/1750223/javascript-keycode-values-are-undefined-in-internet-explorer-8)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T19:54:11.257

Re: **ltiong_sh**的建议 以上不适用于 Internet Explorer，至少 IE8 及以下。
对于 IE8 及更低版本，以下将起作用：

```
document.onkeypress = function keypressed(){
  if (window.event.keyCode == 13) {
    // Sumbit code
  }      
} 
```

然而，这不是最重要的。重要的是这种方法非常糟糕：
1）当您在输入文本区域内或在页面中时（取决于使用的方法），每次按键都会被监控！（这可能会占用 CPU 时间）
2) 使用相同 URL 按下 Enter（或其他热键）会发出一个新页面！也就是说，每次按 Enter 时，页面都会在历史记录中堆积！！！
3）回车后输入区域内的文字恢复为默认（原来的）！！4) 提交的文本被添加到地址区的 URL 中，如 ?

直到现在我还没有找到任何方法来克服这些缺点......（这是我今天第一次搜索如何按 Enter 提交文本（作为单击按钮的替代方法）。

有没有人提出更有效的方法？

# ruby - 是否有 Ruby Timeout 模块的 Groovy 等价物？

> ID：10417146
> 
> 赞同：3
> 
> 时间：2012-05-02T15:43:33.363
> 
> 标签：ruby, groovy, timeout

在 Ruby 中，我会使用 Timeout 模块，它会在其中执行一个块，如果超过超时，它将停止执行代码。

```
require 'timeout'
status = Timeout::timeout(5) {
  # Something that should be interrupted if it takes too much time...
} 
```

Groovy 有这样的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:48:38.020

有`TimedInterrupt` [注释](http://groovy.codehaus.org/gapi/groovy/transform/TimedInterrupt.html)，但我还没有尝试过......

给它一个快速测试，这个（糟糕的例子）：

```
@groovy.transform.TimedInterrupt( 5L )
def loopy() {
  int i = 0
  try {
    while( true ) {
      i++
    }
  }
  catch( e ) {
    i
  }
}

println loopy() 
```

`i`在 groovy 控制台中运行并在 5 秒后打印出来。

我得到：

```
47314150 
```

# sql - SQL - 将表传递给选择中的 UDF

> ID：10417148
> 
> 赞同：4
> 
> 时间：2012-05-02T15:43:35.637
> 
> 标签：sql, sql-server, sql-server-2008, parameters, user-defined-functions

我有一个 UDF，它接受一个表作为参数（一个 2 列的表）并输出一个字符串，就像这篇[文章](https://stackoverflow.com/questions/1609115/pass-table-as-parameter-into-sql-server-udf)一样。我有一个表，我想将 UDF 应用于多个列，如下所示：

```
Date   Unit   Line   Revenue   Orders
4/1/12 D      R      20.00     3
4/2/12 D      R      25.00     4
4/1/12 H      W      33.00     1
4/2/12 H      W      35.00     3 
```

我想在该表中具有最新日期的每一行上调用我的 UDF，并向 UDF 传递一个表，其中包含每个不同单位和行的日期和收入列。而且我还想调用 UDF 并为每个不同的单元和行传递日期和订单。这是一份报告，UDF 将始终通过 Date 列和我想对其应用一些计算并存储和报告的另一列。所以我看了很多东西，包括 CROSS APPLY，我想做这样的事情：

```
SELECT        T.unit
              , T.line
              , dbo.fn_myUDF((SELECT T2.Date, T2.Revenue FROM #Table T2)) as UDFRevenueResult
              , dbo.fn_myUDF((SELECT T2.Date, T2.Orders FROM #Table T2)) as UDFOrderResult
FROM          #Table T
WHERE         T.Date = @ReportDate 
```

这给了我错误“当 EXISTS 未引入子查询时，选择列表中只能指定一个表达式。” 我查看了 CROSS APPLY 但这似乎只适用于您返回表变量时。因此，我可能可以通过使用游标和循环来回答我自己的问题，并在每次循环迭代中构造我想传递给 UDF 的每个表，但这似乎并不正确。谁能告诉我如何在 SQL Server 2008 中做我想做的事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:57:22.673

不能像这样使用子查询在查询的 SELECT 部分返回表变量。它们只能返回一个值。如：

```
set @myParam = (select myvalue from table where primarykey = 1) 
```

或者

```
set @myParam = (select top 1 myvalue from table) 
```

但是，考虑到您的子查询与被选择的行没有任何关系，您可以这样做。

```
declare @t1 table (DateTime c1, float c2)
insert @t1
SELECT Date, Revenue 
FROM #Table 

declare @t2 table (DateTime c1, int c2) -- not sure on data type of 'Orders'
insert @t2
SELECT Date, Orders FROM #Table

SELECT T.unit               
     , T.line               
     , dbo.fn_myUDF(@t1) as UDFRevenueResult               
     , dbo.fn_myUDF(@t2) as UDFOrderResult 
FROM #Table T 
WHERE T.Date = @ReportDate 
```

# xpages - 有什么方法可以从 CCSJ 或 SSJS 触发 enableModifiedFlag 背后的代码？

> ID：10417149
> 
> 赞同：4
> 
> 时间：2012-05-02T15:43:36.940
> 
> 标签：xpages

如果我在自定义控件上将 enableModifiedFlag 属性设置为 true；我在生成的页面源代码的底部看到以下代码。

当用户离开更改的页面时，一切正常；他们收到“未保存的数据”的警报消息

```
<script type="text/javascript"> 

function view__id1__id2__id95__id98__id105_clientSide_onclick(thisEvent) {
return validateForm();

}

XSP.attachDirtyUnloadListener("This document may contain unsaved changes.");

XSP.addOnLoad(function() {
XSP.attachEvent("view:_id1:saveActionEventHandler", "view:_id1", "ondirtysave", null, true, 2);
XSP.attachEvent("view:_id1:_id2:_id95:_id98:_id105", "view:_id1:_id2:_id95:_id98:link1", "onclick", view__id1__id2__id95__id98__id105_clientSide_onclick, true, 2);
XSP.attachEvent("view:_id1:_id2:_id95:_id98:_id106", "view:_id1:_id2:_id95:_id98:link2", "onclick", null, true, 2);
XSP.attachDirtyListener("view:_id1:_id2:_id95:_id98:businessName11");

XSP.attachDirtyListener("view:_id1:_id2:_id95:_id98:businessName21");

XSP.attachDirtyListener("view:_id1:_id2:_id95:_id98:address11");

XSP.attachDirtyListener("view:_id1:_id2:_id95:_id98:address21");

XSP.attachDirtyListener("view:_id1:_id2:_id95:_id98:city1");

XSP.attachDirtyListener("view:_id1:_id2:_id95:_id98:cbState");

XSP.attachDirtyListener("view:_id1:_id2:_id95:_id98:zipCode1");

XSP.attachDirtyListener("view:_id1:_id2:_id95:_id98:phoneNumber1");

}); 

</script> 
```

我有一个带有 SSJS 的退出按钮，如果文档被锁定，它会解锁并生成 context.redirectToPage。问题是这个按钮没有触发 enableModifiedFlag 逻辑后面的代码，因此用户离开页面时不会被提示是否要离开未保存的数据。

有没有办法使用 CCSJ 或 SSJS 从这个按钮触发 enableModifiedFlag 后面的代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T09:44:45.010

通过使用from CSJS，如果任何字段被修改，`XSP._isDirty()`您可以获得**true** ，如果没有对表单进行任何更改，则可以获得**false 。**

所以我将这段代码添加到我在 CSJS 下的按钮中，以显示来自 XPages 的相同默认警报：

```
if (XSP._isDirty()){
    if (confirm ("Are you sure you want to navigate away from this page?" + "\n" + "\n" +
    "This document may contain unsaved changes." + "\n" + "\n" +
    "Press OK to continue, or Cancel to stay on the current page.")){
        return true;
    }else{
        return false;
    }
} else {
    return true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T17:38:23.010

单击按钮后，在 CSJS 下方使用：`XSP._setDirty(false,"")` 这将使文档不脏，并让用户导航到其他页面。

# pdf - PDF - 删除白边

> ID：10417151
> 
> 赞同：13
> 
> 时间：2012-05-02T15:43:59.707
> 
> 标签：pdf, pdf-generation, itext, ghostscript, pypdf

我想知道一种从 PDF 文件中删除白边距的方法。就像 Adob​​e Acrobat X Pro 一样。我知道它不适用于每个 PDF 文件。

我猜想这样做的方法是获取文本边距，然后从该边距中裁剪出来。

PyPdf 是首选。

iText 根据以下代码查找文本边距：

```
public void addMarginRectangle(String src, String dest)
    throws IOException, DocumentException {
    PdfReader reader = new PdfReader(src);
    PdfReaderContentParser parser = new PdfReaderContentParser(reader);
    PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(RESULT));
    TextMarginFinder finder;
    for (int i = 1; i <= reader.getNumberOfPages(); i++) {
        finder = parser.processContent(i, new TextMarginFinder());
        PdfContentByte cb = stamper.getOverContent(i);
        cb.rectangle(finder.getLlx(), finder.getLly(),
            finder.getWidth(), finder.getHeight());
        cb.stroke();
    }
    stamper.close();
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T17:25:54.210

我对 PyPDF 不太熟悉，但我知道 Ghostscript 可以为您做到这一点。以下是类似问题的其他答案的链接：

1.  [**将 PDF 每页 2 面转换为每页 1 面**](https://superuser.com/a/189109/40894)(SuperUser.com)
2.  [**将pdf页面从中间拆分的免费软件？**](https://superuser.com/a/235401/40894)（超级用户.com）
3.  [**使用 Ghostscript 9.01**](https://stackoverflow.com/a/6184547/359307) (StackOverflow.com)

第三个答案可能是让您说“*我知道它不适用于每个 PDF 文件*”的原因。它使用 *pdfmark*命令尝试设置`/CropBox`PDF 页面对象。

前两个答案的方法很可能在第三个答案失败的情况下成功。此方法使用 PostScript 命令片段`<</PageOffset [NNN MMM]>> setpagedevice`来移动 PDF 页面并将其放置在由`-gNNNNxMMMM`参数定义的（较小的）媒体尺寸上（以像素为单位定义设备宽度和高度）。

如果您了解前两个答案背后的概念，您将能够轻松地调整那里使用的方法来裁剪 PDF 页面所有 4 个边缘的边距：

在 4 个边缘的每一个上将字母大小的 PDF (8.5x11in == 612x792pt) 裁剪半英寸 (==36pt) 的示例命令（该命令适用于 Windows）：

```
gswin32c.exe ^
    -o cropped.pdf ^
    -sDEVICE=pdfwrite ^
    -g5400x7200 ^
    -c "<</PageOffset [-36 -36]>> setpagedevice" ^
    -f input.pdf 
```

生成的页面大小将为 7.5x10in (== 540x720pt)。要在 Linux 或 Mac 上执行相同操作，请使用：

```
gs \
    -o cropped.pdf \
    -sDEVICE=pdfwrite \
    -g5400x7200 \
    -c "<</PageOffset [-36 -36]>> setpagedevice" \
    -f input.pdf 
```

* * *

**更新：如何使用 Ghostscript 确定“边距”**

一条评论要求“自动”确定白边。您也可以为此使用 Ghostscript。它的`bbox`设备可以确定每页上（虚拟）墨水覆盖的区域（因此，间接确定画布每个边缘的空白）。

这是命令：

```
gs \
  -q -dBATCH -dNOPAUSE \
  -sDEVICE=bbox \
   input.pdf 
```

输出（示例）：

```
 %%BoundingBox: 57 29 562 764
 %%HiResBoundingBox: 57.265030 29.347046 560.245045 763.649977
 %%BoundingBox: 57 28 562 667
 %%HiResBoundingBox: 57.265030 28.347046 560.245045 666.295011 
```

设备在内存中`bbox`呈现每个 PDF 页面（不将任何输出写入磁盘），然后将 BoundingBox 和 HiResBoundingBox 信息打印到`stderr`. 您可以像这样修改此命令以使结果更易于解析：

```
gs \
    -q -dBATCH -dNOPAUSE \
    -sDEVICE=bbox \
     input.pdf \
     2>&1 \  
  | grep -v HiResBoundingBox 
```

输出（示例）：

```
 %%BoundingBox: 57 29 562 764
 %%BoundingBox: 57 28 561 667 
```

这会告诉你...

*   **...第 1 页**内容矩形的左下角位于与右上角的坐标`[57 29]`处`[562 741]`
*   **...第 2 页**内容矩形的左下角位于与右上角的坐标`[57 28]`处`[561 667]`

这表示：

*   **第 1 页**`72pt == 1in == 25,4mm`在左边缘 ( )使用 57pt 的空白。
*   **第 1 页**在底部边缘使用 29pt 的空白。
*   **第 2 页**在左边缘使用 57pt 的空白。
*   **第 2 页**在底部边缘使用 28pt 的空白。

正如您已经从这个简单的示例中看到的那样，每个页面的空格并不完全相同。根据您的需要（您可能希望多页 PDF 的每一页都具有相同的大小，不是吗？），您必须计算出文档所有页面上每个边缘的最小边距是多少。

现在右边和上边空白呢？要计算它，您需要知道每页的原始页面大小。确定这一点的最简单方法：`pdfinfo`实用程序。5 页 PDF 的示例命令：

```
pdfinfo \
  -f 1 \
  -l 5 \
   input.pdf \
| grep "Page " 
```

输出（示例）：

```
Page    1 size: 612 x 792 pts (letter)
Page    2 size: 612 x 792 pts (letter)
Page    3 size: 595 x 842 pts (A4)
Page    4 size: 842 x 1191 pts (A3)
Page    5 size: 612 x 792 pts (letter) 
```

这将帮助您确定每个新 PDF 页面的顶部和右侧边缘所需的画布大小和所需的（最大）白边距。

当然，这些计算也都可以编写脚本。

但是，如果您的 PDF 都是 uniq 页面大小，或者它们是 1 页文档，那么这一切都更容易完成......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-04T15:36:58.763

尝试[pdfcrop](http://www.ctan.org/pkg/pdfcrop)。它需要ghostscript。

# c - 为什么我不能将此指针设置为 NULL？

> ID：10417154
> 
> 赞同：0
> 
> 时间：2012-05-02T15:44:02.697
> 
> 标签：c, pointers, structure

我在将结构中的指针设置为 NULL 时遇到了一些问题。我遇到了分段错误。是什么原因造成的，我该如何解决？

```
typedef struct data_{
  void *data;
  struct data_ *next;
}data_el;

typedef struct buckets_{
  char *key;
  data_el *head_data_p;
}buckets;

typedef struct hash_table_ {
  /* structure definition goes here */
  int (*hash_func)(char *);
  int (*comp_func)(void*, void*);
  buckets **buckets_array;
} hash_table, *Phash_table;

int i,size;
size = 10;

table_p -> buckets_array = (buckets **)malloc(sizeof(buckets)*(size+1));

for(i = 0; i < size; i++){
/*Getting segmitation falut here*/
table_p -> buckets_array[i] -> key = NULL;
table_p -> buckets_array[i] -> head_data_p = NULL; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:48:26.750

因为你没有初始化`buckets_array`. 所以指针还没有指向任何东西，当你尝试修改它们指向的东西时你会得到一个错误。

您需要初始化指针数组以及每个单独的指针：

```
table_p -> buckets_array = malloc(sizeof(buckets *) * (size+1));

for(i = 0; i < size; i++) {
    table_p -> buckets_array[i] = malloc(sizeof(bucket));
    table_p -> buckets_array[i] -> key = NULL;
    table_p -> buckets_array[i] -> head_data_p = NULL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:47:55.927

你应该更换：

```
buckets **buckets_array; 
```

和：

```
buckets *buckets_array; 
```

和：

```
(buckets **)malloc(sizeof(buckets)*(size+1)); 
```

和：

```
(buckets *)malloc(sizeof(buckets)*(size+1)); 
```

并且：

```
table_p -> buckets_array[i] -> key = NULL;
table_p -> buckets_array[i] -> head_data_p = NULL; 
```

和：

```
table_p -> buckets_array[i] . key = NULL;
table_p -> buckets_array[i] . head_data_p = NULL; 
```

# algorithm - 基于字典的关键字检测

> ID：10417156
> 
> 赞同：4
> 
> 时间：2012-05-02T15:44:09.603
> 
> 标签：algorithm, ocr, levenshtein-distance, error-correction

我想从扫描文档中识别可能存在 OCR 错误的关键字。基于关键字列表和每个字符的置信度值及其扫描文档的替代项，我如何开发一种算法来可靠地识别关键字？

对于 OCR，我使用的是 Tesseract，它为每个字符及其最佳选择提供置信度值。因此，对于每个单词，我都有一个这样的列表：

```
 Word=order
 [0] o (93%) [alts: 0 (90%), c (83%), e (82%)]
 [1] r (96%)
 [2] d (96%)
 [3] e (90%) [alts: a (75%)]
 [4] r (95%) 
```

另一个包括 OCR 错误的示例：

```
 Word=PaYmeHI (Payment would be correct)
 [0] P (81%) [alts: p (78%), D (68%)]
 [1] a (76%) [alts: 3 (73%), e (63%), ö (61%)]
 [2] Y (87%) [alts: V (86%)]
 [3] m (83%) 
 [4] E (71%) [alts: € (79%), 9 (72%), % (67%), e (65%), B (64%), G (64%)]
 [5] H (76%) [alts: n (83%), D (74%), N (70%), ü (69%)]
 [6] I (75%) [alts: t (69%), { (67%), 1 (65%), i (61%)] 
```

如您所见，tesseract 并不总是选择百分比最高的结果 (4, 5)。

从浏览结果来看，大多数具有 90% 以上值的字符都是正确的。但是，坏结果不一定包含替代列表中的正确字符（请参阅 [2]，它应该是小写的`y`.

目前我正在通过使用 Levenshtein 距离和字符串长度来获取候选人列表。此外，我排除了关键字 where `lev2 > 3`。这只是硬编码，因为我仍在寻找确定阈值的好方法。

```
 int lev = getLevenshteinDistance(keyword, s);
      int lev2 = getLevenshteinDistance(keyword.toLower(), s.toLower());
      int len = Math.abs(keyword.length - s.length); 
      int x = lev + lev2 + len; 
```

我正在对关键字列表进行排序`x`，以获得最可能的结果。

所以首先，我正在寻找一种方法来根据 OCR 结果和字符串长度确定一个好的阈值。短字符串需要比大字符串更低的阈值和可靠的 OCR 结果。以上面的例子为例：对于单词 order `lev2 <= 1`，就足够了，而 for `payment`at least`lev2 <= 3`应该计算。

其次，我怎样才能确定剩下的候选人之一是否真的与这个词匹配？如果`lev == 0`所有字符的置信度值都是`>= 90`显而易见的。但是考虑到糟糕的 OCR 结果，我可以开发什么算法来包括替代 OCR 选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:51:18.523

I have been thinking about something similar for a project of mine; I haven't got any good answers yet, but here are some thoughts:

I think the question we're trying to answer is this:

Does this document (the OCR result) contain the term 'order'?

**Idea 1**

The OCR documents contains terms with some 'score' ...

So in your example, the document contains:

*   order with score = sum(93,96,96,90,95)/5 = 94
*   0rder with score = sum(90,96,96,90,95)/5 = 93
*   crder with score = sum(83,96,96,90,95)/5 = 92
*   erder with score = sum(82,96,96,90,95)/5 = 91
*   ordar with score = sum(93,96,96,75,95)/5 = 91
*   0rdar with score = sum(90,96,96,75,95)/5 = 90
*   crdar with score = sum(83,96,96,75,95)/5 = 89
*   erdar with score = sum(82,96,96,75,95)/5 = 88

Now that we have a score for each candidate, we can get a score for document, given some query (using levenshtein distance for now...)

score for doc given keyword "order" is the average of

*   (3-min(lev(order, order),3)*0.33) * 94,
*   (3-min(lev(0rder, order),3)*0.33) * 93,
*   (3-min(lev(crder, order),3)*0.33) * 92,
*   ...,
*   ...

If this score is higher than some threshold the document is deemed to match 'order'

**Idea 2**

We can improve the OCR results with some language models

Compute score for each term as follows:

```
term        | ocr_score   |ngram score            |combined score
------------+-------------+-----------------------+---------------
order   | 94          |score(ord, rde, der)   |ocr*ngram
0rder   | 93          |score(0rd, rde, der)   |ocr*ngram
crder   | 92          |score(crd, rde, der)   |ocr*ngram
erder   | 91          |score(erd, rde, der)   |...
ordar   | 91          |score(ord, rda, der)   |...
0rdar   | 90          |score(0rd, rda, der)   |...
crdar   | 89          |score(crd, rda, der)   |...
erdar   | 88          |score(erd, rda, der)   |... 
```

Where score(ord) = trigram probability of 'ord'

Google Books for example gives trigram probability for any trigrams (see: [http://books.google.com/ngrams/chart?content=ord&corpus=0&smoothing=3&year_start=1970&year_end=2000](http://books.google.com/ngrams/chart?content=ord&corpus=0&smoothing=3&year_start=1970&year_end=2000))

We could also compute unigram, bigram, quadgrams ...; then we can compute score based on "unigram" probability of words themselves; bigrams of words and so on...; then we could also apply some purely analytic language models

So we now have more scores for each 'candidate term' and we combine them all with some weights for each score to get a combined score for the term

**Idea 3**

Ok, so the above leads to an explosion of terms / scores ... which is compute intensive; so we use some magic to build a probabilistic DFA for each term based on ideas 1 & 2\. The document now contains probabilistic DFAs rather than terms. The Lucene guys have done some work to build Levenshtein DFAs and allow checking if DFA1 and DFA2 match quickly...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T18:59:17.030

首先，我认为你的程序给你的是 P(observation|symbol)，而不是 P(symbol|observation)。P(symbol|observation) \proportional P(observation|symbol)*P(symbol) 。

例如，对于支付中的那个 e，虽然观察到的模式给出符号的概率对于欧元最高，但观察到欧元的概率非常小。因此，它很可能是“e”，而不是欧元。

因此，我的建议是对所有可能的单词求和 log( P(observation|symbol)*P(symbol) ) 并选择使该值最大化的单词。

此外，您可以通过使用上下文来使用更准确的估计，而不是使用 P(symbol)。

# php - 有人知道任何好的 PHP Codeigniter 自动表单生成器吗？

> ID：10417161
> 
> 赞同：2
> 
> 时间：2012-05-02T15:44:15.460
> 
> 标签：php, mysql, forms, codeigniter

我已经用谷歌搜索了这个，但想看看堆栈溢出的普遍共识是什么。

有人知道任何好的 PHP Codeigniter 自动表单生成器吗？

我希望能够基于 mysql 数据库表创建一些表单。

有谁知道好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:58:15.680

如果您正在寻找某种 CRUD 功能 - 看看这个 [http://www.grocerycrud.com/](http://www.grocerycrud.com/)

[http://www.grocerycrud.com/examples/the-simplest-example](http://www.grocerycrud.com/examples/the-simplest-example)

> 只有一行代码……即使你无聊写了set_table函数，库也会搜索函数名是否作为表名存在
> 
> ```
> function offices()
> {
>     $output = $this->grocery_crud->render();
> 
>     $this->_example_output($output);
> } 
> ```
> 
> 你的 CRUD 已经准备好了 :-)
> 
> 在此示例中，我设置了表名 (offices)，并通过添加-编辑和删除 (create-update-delete) 获得了默认 Crud。所有的视图都准备好了，你不需要其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:28:41.860

我使用了以下火花-它们都很好用-只是个人喜好

[http://getsparks.org/packages/autoform/versions/HEAD/show](http://getsparks.org/packages/autoform/versions/HEAD/show)

[http://getsparks.org/packages/formgenlib/versions/HEAD/show](http://getsparks.org/packages/formgenlib/versions/HEAD/show)

[http://getsparks.org/packages/FluentForm/versions/HEAD/show](http://getsparks.org/packages/FluentForm/versions/HEAD/show)

# regex - 带有正则表达式选择的骆驼路线

> ID：10417166
> 
> 赞同：2
> 
> 时间：2012-05-02T15:44:23.430
> 
> 标签：regex, apache-camel, apache-servicemix

我是 servicemix/camel 的新手，不是最擅长正则表达式的人，但任何帮助都将不胜感激。

我有一个分割文件并通过 bindy 将每一行转换为一个类的路由。这工作正常。但是，我只想要匹配正则表达式的行。

使用[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)我检查了我的正则表达式是否匹配测试数据，但是当我运行路由时，所有行都转到“不匹配正则表达式”。

```
<split>
<tokenize token="\n"/>
<choice>
    <when>
        <!-- Regex: Matches on A, U or D followed by pipe | then ANYTHING, i.e.: A|azz454... -->
        <simple>${body} regex '^[AUD]\|.*'</simple>
        <unmarshal ref="bindyMasterProduct" />
        <log message="OUTPUT: ${body}"/>
    </when>
    <otherwise>
           <log message="Didnt match regex: ${body}"/>
       </otherwise>
</choice>
</split> 
```

正则表达式：

```
^[AUD]\|.* 
```

匹配：

```
A|AZZ709256|Cheryl 
```

不要匹配：

```
Mode|Ref|Name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:26:52.733

您的正则表达式是正确的，但您需要转义反斜杠，例如`'^[AUD]\\|.*'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:14:29.613

我意识到我以错误的方式解决问题。我不需要在行级别拆分文件，我可以让 bindy 为我做这一切。

我在我的类中添加了“skipFirstLine”注释，并将整个拆分 xml 替换为：

```
<unmarshal ref="bindyMasterProduct" /> 
```

# c# - Roslyn SyntaxNodes 是否被重用？

> ID：10417169
> 
> 赞同：126
> 
> 时间：2012-05-02T15:44:25.097
> 
> 标签：c#, expression-trees, roslyn

我一直在看[Roslyn CTP](http://msdn.microsoft.com/en-us/roslyn)，虽然它解决了与[Expression tree API](http://msdn.microsoft.com/en-us/library/bb397951.aspx)类似的问题，但两者都是不可变的，但 Roslyn 以完全不同的方式这样做：

*   `Expression`节点没有对父节点的引用，使用 a 进行修改`ExpressionVisitor`，这就是可以重用大部件的原因。

*   `SyntaxNode`另一方面，Roslyn 的具有对其父级的引用，因此所有节点实际上都变成了一个无法重用的块。`Update`提供了,`ReplaceNode`等方法来进行修改。

这在哪里结束？`Document`? `Project`? `ISolution`? API 促进了树的逐步更改（而不是向上按钮），但是每个步骤都会制作完整的副本吗？

他们为什么会做出这样的选择？我错过了一些有趣的技巧吗？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-05-02T16:05:29.800

更新：这个问题是[我 2012 年 6 月 8 日博客的主题](https://ericlippert.com/2012/06/08/red-green-trees/)。谢谢你的好问题！

* * *

好问题。我们就您提出的问题进行了很长时间的辩论。

我们希望有一个具有以下特征的数据结构：

*   不可变。
*   树的形状。
*   从子节点廉价访问父节点。
*   可以从树中的节点映射到文本中的字符偏移量。
*   **持之以恒**。

*持久性*是指在对文本缓冲区进行编辑时*重用树中大多数现有节点的能力。*由于节点是不可变的，因此重用它们没有障碍。我们需要这个来提高性能；每次您按键时，我们都无法重新解析大量文件。我们只需要重新分析和重新解析树中受编辑影响的部分。

现在，当您尝试将所有这五件事放入一个数据结构中时，您会立即遇到问题：

*   首先如何构建节点？parent 和 child 都是相互引用的，并且是不可变的，那么先构建哪个？
*   假设你设法解决了这个问题：你如何让它持久化？您不能在不同的父节点中重新使用子节点，因为这将涉及告诉子节点它有一个新的父节点。但是孩子是不变的。
*   假设您设法解决了这个问题：当您将一个新字符插入编辑缓冲区时，*映射到该点之后某个位置的每个节点*的绝对位置都会发生变化。这使得制作持久数据结构变得非常困难，因为任何编辑都可以更改大多数节点的跨度！

但在 Roslyn 团队，我们经常做不可能的事情。实际上，我们通过保留*两棵*解析树来完成不可能的事情。“绿色”树是不可变的，持久的，没有父引用，是“自下而上”构建的，每个节点都跟踪它的*宽度*而不是它的*绝对位置*。当编辑发生时，我们只重建受编辑影响的绿树部分，这通常约为树中总解析节点的 O(log n)。

“红”树是围绕绿树建造的不可变*外观；**它是根据需要*“自上而下”构建的，并且在每次编辑时都被丢弃。*当您从顶部向下穿过树时，它通过按需制造*父引用来计算父引用。当您下降时，它再次通过宽度计算绝对位置来制造绝对位置。

你，用户，只看到红树；绿树是一个实现细节。如果您查看解析节点的内部状态，您实际上会看到其中存在对不同类型的*另一个解析节点的引用；*那是绿树节点。

顺便说一下，这些被称为“红/绿树”，因为这些是我们在设计会议中用来绘制数据结构的白板标记颜色。颜色没有其他意义。

这种策略的好处是我们得到了所有这些伟大的东西：不变性、持久性、父引用等等。代价是这个系统很复杂，如果“红色”外墙变大，会消耗大量内存。我们目前正在做实验，看看我们是否可以在不损失收益的情况下降低一些成本。

# php - strtotime() 的结果是否根据时区而改变？

> ID：10417179
> 
> 赞同：5
> 
> 时间：2012-05-02T15:45:02.710
> 
> 标签：php

我`strtotime($datetime)`在 PHP 中使用将文本日期时间描述转换为 Unix 时间戳（参见下面的代码）。

```
$datetime = '2012-04-17 00:00:00';
$timestamp = strtotime($datetime); 
```

但是，`$timestamp`时区（**伦敦**）的结果是**1334617200**，时区（**北京**）的结果是**1334620800**。

谁能解释我为什么会这样？`strtotime()`是否根据时区更改结果？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T15:46:35.390

从文档中：

> 此函数的每个参数都使用默认时区，除非在该参数中指定了时区。注意不要在每个参数中使用不同的时区，除非是有意的。有关定义默认时区的各种方法，请参阅 date_default_timezone_get()。

所以是的，它基于时区，除非您在`$datetime`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:47:08.290

对，那是正确的。时区被考虑在内。

另请参阅： [PHP - strtotime，指定时区](https://stackoverflow.com/q/3569014/362536)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:50:30.380

您可以使用：date_default_timezone_set 设置默认时区，否则使用默认系统时区。

参考：

[http://www.php.net/manual/en/function.date-default-timezone-get.php](http://www.php.net/manual/en/function.date-default-timezone-get.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-12T19:08:05.157

要使用 GMT，请使用[time()](http://php.net/manual/en/function.time.php)作为第二个参数：

```
strtotime($datetime, time()) 
```

# php - PDO插入错误php

> ID：10417184
> 
> 赞同：-1
> 
> 时间：2012-05-02T15:45:12.400
> 
> 标签：php, insert, pdo

我正在尝试使用以下脚本将从隐藏表单中获取的值插入到数据库中

```
 /detect user session
 if (!isset($_SESSION['user']))
 {
//if no session take to login page
header('location:login_main.php');
 }

 //if session detected connect to database using pdo
 $db = getConnection();

 //get holiday infor from hidden form
$user = $_SESSION['user'];
$title = $_POST['title'];
$link = $_POST['link'];
$date = $_POST['date'];
$description = $_POST['description'];

 //insert the values in to favorties table
 $sql = "INSERT INTO saved_holidays (subscriberID, link, pubDate, title, description, dateSaved) 
VALUES (:subscriberID, :link, :pubDate, :title, :description, now())";

$stmt = $db->prepare($sql);
$stmt->bindParam(':subscriberID', $user);
$stmt->bindParam(':link', $link);
$stmt->bindParam(':pubDate',$date);
$stmt->bindParam(':title', $title);
$stmt->bindParam(':description', $description);
$stmt->execute();

echo 'you have sucessfully saved the holiday offer.<meta http-equiv="refresh" content="2; url=index.php" />'; 
```

但是，当我运行脚本时，出现以下错误

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[23000]: Integrity     constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails     (`unn_w11023553/saved_holidays`, CONSTRAINT `holidays_ibfk_1` FOREIGN KEY (`subscriberID`)     REFERENCES `subscriber` (`email`) ON UPDATE CASCADE)' in [OMISSIS] 
```

谁能告诉我做错了什么，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:48:32.933

这可能不是 PHP 问题：也许您只是违反了[外键约束](http://en.wikipedia.org/wiki/Foreign_key)。如果您不了解外键约束，请立即停止编写您的应用程序，并通读我链接的 Wikipedia 文章。

一些问题：

*   您是自己设计数据库，还是只是在使用它？你能告诉我们`CREATE TABLE`你要插入东西的表的语句吗？
*   您是否通过-ing检查`$user`变量是否设置正确？`echo`
*   您是否尝试通过硬编码`$title`、`$link`、`$date`和`$description`值来执行准备好的语句？

题外话：你的脚本中有一个巨大的安全漏洞。`header("Location: ...")` [**不会退出脚本的执行**](http://kristofmattei.be/2009/04/14/php-code-security-problem-with-header%E2%80%9Clocation-%E2%80%A6%E2%80%9D/)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:50:50.913

似乎您`subscriberID`在`saved_holidays`表中的字段引用了`email`您`subscriber`表中的字段。

你能给我们展示一些数据样本吗？

我猜您没有在该`subscriberID`字段中插入现有订阅者的电子邮件。

# objective-c - 如何在没有相同数量的属性或插座的情况下访问许多 Cocoa 控件？

> ID：10417190
> 
> 赞同：2
> 
> 时间：2012-05-02T15:45:34.740
> 
> 标签：objective-c, cocoa

我正在构建一个主从应用程序，其中详细视图可能包含近 100 个字段。模型对象使用外部库来访问文件中的元数据，不需要 100 个属性；从文件中检索数据并用结构表示。这些字段由枚举标识，并使用 Find(Enum) 方法或使用由 lib 提供的迭代器访问，该迭代器迭代元数据中存在的所有字段。

我想利用库中的枚举/查找/迭代器，而不必使用带有 getter/setter 的 100 个属性和 UI 中文本字段和其他控件的 100 个出口。

类似于我在使用这个库的程序中看到的一种方法，我希望有一个 getter 和一个 setter，以及一个基于元数据的枚举 FieldId 的 switch()。在 getter 和 setter 中，我想以编程方式访问 UI 中的相应文本字段或其他控件，以根据需要获取或设置值。

当用户在主视图中选择一个文件时，getter 将遍历所有详细字段并显示相关元数据字段的值。当用户保存文件时，我需要遍历更改的字段并使用适当的 FieldId 枚举调用设置器。

我是 Cocoa/Obj-C 的新手，我能想到的只是绑定——但我可以将字段绑定到方法吗？我可以使用绑定将适当的元数据 FieldId 传递给 getter/setter 吗？

在这种情况下，拥有 100 个网点真的合适吗？我是否应该考虑另一种程序架构，其中字段/出口在逻辑上分组并划分为多个类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:25:15.597

如果您想遍历相同类型的多个视图（或者，具有相同的*基本*类型，例如`UIControl`），您可以使用 an并在它提供`IBOutletCollection`的单个视图上进行迭代。`NSArray`或者，如果您从代码中调用 100 个字段（这实际上更有意义），您为什么不自己将视图推送到`NSMutableArray`or`NSMutableDictionary`并通过它们访问它们？更好的是，如果字段应该出现在同一个容器视图中，那么要求它的子视图`myContainerView.subviews`获取一个数组就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T02:35:29.847

考虑制作[一个矩阵](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Matrix/)。它是一种单独的控件，提供单一类型单元格的二维矩阵。文本字段单元格可能是最常见的。

要在 nib 编辑器中创建矩阵，请从单个文本字段开始。然后，按住选项并调整其大小。Xcode 会将其转换为文本字段单元格的矩阵；您通过拖动确定每个维度中有多少。

一旦你有一个矩阵并连接了一个出口，你可以通过 x 和 y 索引向它询问单元格，然后你可以像处理独立字段一样对这些单元格进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T00:45:20.847

如我随后的一个问题所述，[如何绑定到 Cocoa 中 NSDictionary 子词典的值？](https://stackoverflow.com/questions/13294964/how-can-i-bind-to-values-of-nsdictionary-sub-dictionaries-in-cocoa)，我最终将元数据预加载到一组嵌套数据结构中。

然后我在每个字段中使用绑定来访问/显示适当的元数据。如果元数据被修改（例如，通过在文本字段中编辑其值），我将有一个方法来使用外部库的 API 处理修改后的数据结构。

最初让我问这个问题的原因是我想我想直接使用外部API的内部数据结构或方法来获取或设置每个文件内的数据。我从错误的角度看待事物 - 以编程方式访问我的 GUI 中的字段，而不是让 GUI 绑定到我的应用程序中的数据。我应该知道的更好:)

感谢您的建议。

# c# - Razor (Web Pages) 布局页面在 RenderBody 之前执行

> ID：10417191
> 
> 赞同：2
> 
> 时间：2012-05-02T15:45:52.913
> 
> 标签：c#, asp.net, razor

我正在使用 Razor 网页（所以*不是*MVC）。我有一个在我的 Web 应用程序中使用的 Razor 布局页面。

我有一个代码执行顺序问题。通常，您在子页面上设置 Page.Title（例如），然后在运行布局页面时填充此变量，以便您可以将标题放在布局中的页面上。没关系。但我需要倒着做。我想在子页面上的代码执行之前为所有页面运行一些代码。

我希望能够运行一段代码，我不必在每个子页面中引用它，并且我需要在子页面运行任何代码之前执行它。我确信有一种非常简单和明显的方法可以做到这一点，因为我是 Razor 网页生命周期的新手......

**示例：** 我在布局页面中设置了我的站点名称。但由于某种原因，我想在我的子页面、子子页面等的一堆地方显示站点名称。我最好怎么做呢？

我知道**_PageStart.cshtml**可以在一个文件夹一个文件夹的基础上在其他任何东西之前运行代码，设置 Page.Whatever 我可能需要的变量等，这适用于我的目的。但是我很难理解这是否是正常过程，或者这是否是一种不好的方法。网络上似乎没有太多关于 Razor 网页的这方面的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:37:51.797

只需设置布局：

```
@{
  Layout="~/Master.cshtml";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:53:00.377

Web 用户控制就是您想要的。

# .net - Outlook 约会功能区按钮事件

> ID：10417192
> 
> 赞同：4
> 
> 时间：2012-05-02T15:45:59.180
> 
> 标签：.net, outlook, vsto, add-in

我将尝试具体举个例子，但我可能会谈论 Outlook 2010 中的任何功能区按钮事件。当您创建约会时，新约会对话框将打开，顶部有一个功能区，您可以在其中保存、邀请与会者等. 还有一个按钮，您可以创建重复模式。我想知道是否可以实现一个事件处理程序来响应重复按钮单击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:25:24.910

您将需要更换该`GroupAppointmentMoreOptions`组。您应该下载[包含现有 Outlook 2010 控件 ID 的 XLS 电子表格](http://www.microsoft.com/en-us/download/details.aspx?id=6627)（*请参阅 OutlookApppointmnentItemControls.xlsx*）。

要替换功能区组，请参阅[此网站，该网站描述了如何正确修改现有功能区组](http://www.rondebruin.nl/xmlribbongroups.htm)。

# objective-c - 在 UIAlertView 上设置延迟

> ID：10417198
> 
> 赞同：1
> 
> 时间：2012-05-02T15:46:15.427
> 
> 标签：objective-c, ios, animation, uialertview

我有一个在我的代码中运行的检查。如果检查返回 true，我将执行动画并向用户显示 UIAlertView。我的问题是我不知道如何延迟 UIAlertView 直到动画完成。因此，当前显示 UIAlertView 并看到动画在后台运行。我很感激这方面的任何帮助。以下是相关代码：

```
BOOL isComplete = [self checkJigsawCompleted:droppedInPlace withTag:tag];
        if (isComplete) {

            [stopWatchTimer invalidate];
            stopWatchTimer = nil;
            [self updateTimer];

            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:1];
            imgGrid.alpha = 0;
            imgBackground.alpha = 0;
            [UIView commitAnimations]; 
            NSString *completedMessage = [NSString stringWithFormat:@"You completed the puzzle in: %@", lblStopwatch.text];

            UIAlertView *jigsawCompleteAlert = [[UIAlertView alloc]   //show alert box with option to play or exit
                                  initWithTitle: @"Congratulations!" 
                                  message:completedMessage 
                                  delegate:self 
                                  cancelButtonTitle:@"I'm done" 
                                  otherButtonTitles:@"Play again",nil];
            [jigsawCompleteAlert show];
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:48:13.897

切换到[基于块的动画方法](https://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html)：

```
if (isComplete) {

    [stopWatchTimer invalidate];
    stopWatchTimer = nil;
    [self updateTimer];

    [UIView animateWithDuration:1.0f animations:^{
        imgGrid.alpha = 0;
        imgBackground.alpha = 0;
    } completion:^(BOOL finished) {
        NSString *completedMessage = [NSString stringWithFormat:@"You completed the puzzle in: %@", lblStopwatch.text];
        UIAlertView *jigsawCompleteAlert = [[UIAlertView alloc]   //show alert box with option to play or exit
                                            initWithTitle: @"Congratulations!" 
                                            message:completedMessage 
                                            delegate:self 
                                            cancelButtonTitle:@"I'm done" 
                                            otherButtonTitles:@"Play again",nil];
        [jigsawCompleteAlert show];
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:50:55.097

您可以简单地为动画完成添加一个处理程序：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
... 
```

当然，您应该为`animationDidStop:finished:context:`显示对话框的位置提供一个实现。

请记住，`beginAnimations`从 iOS 4.0 开始不鼓励使用它及其方法系列，基于块的动画是首选方式。但是如果你想支持iOS 3.x，以上就是你的问题的解决方案。

# android - 警报对话框和小部件

> ID：10417204
> 
> 赞同：0
> 
> 时间：2012-05-02T15:46:53.070
> 
> 标签：android

我即将开始开发一个小部件，并想知道单击小部件是否可以创建 AlertDialog？

无论如何，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:51:20.057

您无法在主屏幕小部件中创建警报对话框

# ios - 在 xcode 4.2 上将 iPhone 应用程序转换为通用应用程序

> ID：10417218
> 
> 赞同：0
> 
> 时间：2012-05-02T15:47:35.973
> 
> 标签：ios, ios-universal-app

我使用 xcode 4.2 复制目标功能创建 iPad 目标，它还创建了包含所有 iPad xib 文件的 Resources-iPad 文件夹。

现在我有两个目标：

*   我的应用程序
*   myApp-iPad

两个资源：

*   资源
*   资源-iPad

我还设置了 myApp 项目文件设置：

```
 Targeted Device Family - iPhone/iPad 
```

**问：** 当我运行针对 iPad 模拟器的应用程序时，它使用 iPhone 资源文件。我是否缺少使用 iPad 资源的任何设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:56:53.720

![在此处输入图像描述](../Images/50a77b4a3cd1cb35b2e1b468a4af6ac2.png)如果我正确理解您的操作，您没有将目标转换为通用应用程序；相反，您创建了一个新的仅 iPad 版本的目标。

您想要的更简单：单击您的目标，然后使用“目标设备系列”下拉菜单选择“iPhone/iPad”。

在 Interface Builder 中，您会找到相应的命令来转换 xib，但似乎在创建 iPad 目标时已经为您完成了这项工作。

希望这可以帮助。

编辑：

如果 iPhone 的 xib 文件名为“MainWindow.xib”，则应为 iPad 提供名为“MainWindow-iPad.xib”的 xib 文件。这样，当应用程序在 iPad 设备上运行时，它将被使用而不是以前的。

您还应该确保 iPad xib 存在于目标的“构建阶段”选项卡下的“复制捆绑资源”部分中。

# visual-studio-2010 - 如何防止 VS2010 自动将新的 SharePoint 模块添加到随机功能

> ID：10417221
> 
> 赞同：6
> 
> 时间：2012-05-02T15:47:44.393
> 
> 标签：visual-studio-2010, sharepoint-2010, sharepoint-feature

我在 Visual Studio 2010 中有一个相当大的 SharePoint 项目，其中包含许多功能。每次我向项目中添加一个新模块或空元素时，Visual Studio 似乎都会随机选择一个特性来添加它，我非常讨厌。

幸运的是，我的项目已连接到源代码管理，因此我可以通过检查哪个功能为我自动签出来轻松查看哪个功能被修改。如果它没有源代码控制支持，我将不得不打开每个功能并检查它以查看它的去向。

我已经搜索但找不到任何设置来关闭 Visual Studio 的这个“有用”功能。我怎样才能让它停止？我希望只有在我准备好并准备好时才能将其添加到功能中...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:45:02.773

我可能只是迷信，但是当我所针对的功能（并且只有该功能）在当前文档中打开时，我已经很幸运了。当我这样做时，我想不出一个新项目被添加到不同功能的时间。

# java - 在android中重新安排计时器

> ID：10417227
> 
> 赞同：1
> 
> 时间：2012-05-02T15:47:55.643
> 
> 标签：java, android, timer

我正在尝试使用一个 Timer 来安排 TimerTask 以进行连续执行。我不知道它会工作多少次。在用户单击时，计时器将停止，而在另一个用户单击时，它将再次运行。一切正常，直到停止，当我重新安排时，我收到异常说计时器已取消或已安排。如何让它停止并再次运行？我已经尝试了我能想到的一切，但仍然无法正常工作。

这是我正在尝试的最新代码：

```
 Timer myTimer;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    cameraTimedTask = new camera(this);

        myTimer = new Timer("cameraTimer");

        Button b=(Button)findViewById(R.id.b);
        b.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                myTimer.purge();
                myTimer.scheduleAtFixedRate(cameraTimedTask, 1000, 5000);
            }
        });

        Button bb=(Button)findViewById(R.id.button);
        bb.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                myTimer.cancel();
                myTimer.purge();
                myTimer = null;
                myTimer = new Timer("camerasTimer");
                Log.i("Check","[main]"+" timer stopped");
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:51:51.257

您不能重新安排 TimerTask。你每次都需要一个新的。此外，建议在 android 中使用 Handlers 和 postDelayed。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T09:32:52.457

在我看来，尝试使用倒数计时器而不是计时器

快速使用：

```
 new CountDownTimer(30000, 1000) {

 public void onTick(long millisUntilFinished) {
     mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
 }

 public void onFinish() {
     mTextField.setText("done!");
 }
}.start(); 
```

或者如果你想要更复杂的东西：

```
 public class MyCountDownTimer extends CountDownTimer {
   public MyCountDownTimer(long startTime, long interval) {
    super(startTime, interval);

  }
  @Override
   public void onFinish() {
   text.setText("Time's up!");
  }

  @Override
 public void onTick(long millisUntilFinished) {
 text.setText("" + millisUntilFinished / 1000);

 }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T09:28:19.817

对您来说完美的解决方案是使用 Handler

```
private Runnable runnable;
private Handler handler;

@Override
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   handler = new Handler();
   runnable = new Runnable() {

    @Override
    public void run() {
          // run code delayed code in here once
    }
}; 
```

然后在您的多次重复代码中，您必须删除发布的回调，然后重新安排执行。

```
handler.removeCallbacks(runnable);
handler.postDelayed(runnable, 200); 
```

# java - BitmapRegionDecoder 的极限思考

> ID：10417232
> 
> 赞同：1
> 
> 时间：2012-05-02T15:48:06.063
> 
> 标签：java, android, graphics, skia

最近我开始遇到 BitmapRegionDecoder 的内存问题。奇怪，是的，因为它设计为只读取部分，而我想要的那些部分通常是 100-200 像素 x 100-200 像素。

我的问题是：可以与 BitmapRegionDecoder 一起使用的图像大小限制在哪里？例如，我遇到了 50,000x30,000 JPEG 的问题，总大小约为 500 MB。（这是一个高分辨率地图，因此大小。）

# hibernate - 使用注释休眠多对任意删除

> ID：10417236
> 
> 赞同：1
> 
> 时间：2012-05-02T15:48:22.973
> 
> 标签：hibernate, annotations, many-to-many

我在使用休眠删除时遇到问题。我尝试了很多“解决方案”，但都没有奏效。我想在不删除比赛 (campeonato) 的情况下删除球队 (equipo)

所以，我有这个 ER

```
Equipo   -->    Equipo_Campeonato  <--  Campeonato
 id               Equipo                 id
 nombre           Campeonato             nombre 
```

我的实体是：

表装备：

```
@Entity
@Table(name="equipo"
    ,catalog="sistemafutbol"
)
public class Equipo  implements java.io.Serializable {

 private Integer id;
 private String nombre;
 private Set<Campeonato> campeonatos = new HashSet<Campeonato>(0);

@ManyToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY)
@JoinTable(name="equipoxcampeonaato", catalog="sistemafutbol", joinColumns = { 
    @JoinColumn(name="Equipo", nullable=false, updatable=false) }, inverseJoinColumns =      { 
    @JoinColumn(name="Campeonato", nullable=false, updatable=false) })
public Set<Campeonato> getCampeonatos() {... 
```

Tabla Campeonato

```
Entity
@Table(name="campeonato"
    ,catalog="sistemafutbol"
)
public class Campeonato  implements java.io.Serializable {

   private Integer id;
   private String nombre;
   private Set<Equipo> equipos = new HashSet<Equipo>(0);

   @ManyToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY)
    @JoinTable(name="equipoxcampeonaato", catalog="sistemafutbol", joinColumns = { 
    @JoinColumn(name="Campeonato", nullable=false, updatable=false) },  inverseJoinColumns = { 
    @JoinColumn(name="Equipo", nullable=false, updatable=false) })
     public Set<Equipo> getEquipos() {... 
```

我一直在尝试的代码是：

```
Session session = HibernateUtil.getSessionFactory().openSession();
session.beginTransaction();
equipo.getCampeonatos().remove(campeonato);
campeonato.getEquipos().remove(equipo);
session.delete(equipo); // or session.merge(equipo); or session.saveOrUpdate(equipo);
session.getTransaction().commit(); 
```

所以我希望你能帮助我。

更新

这是 danny.lesnik 告诉我集成到我的代码中的代码。

```
Campeonato campeonato = ControladorCampeonato.obtenCampeonato(idCampeonato);
//this is where I get the tournament
    if(listaEquiposSeleccionados.length>0){
        for(int i=0;i<listaEquiposSeleccionados.length;i++){
            int idEquipo = listaEquiposSeleccionados[i].getId().intValue();
            Equipo equipo= ControladorEquipo.obtenEquipo(idEquipo);            
            this is where I get the team.
            try{
                Session session = HibernateUtil.getSessionFactory().openSession();
                session.beginTransaction();
                campeonato.getEquipos().remove(equipo);
                session.update(campeonato);
                session.getTransaction().commit();
                listaEquiposAgregados.add(equipo);
            } 
```

我正在做一个网页，我可以在其中选择一场比赛，我可以选择多支球队。我正在调试，异常就在 session.update(campeonato); 行中。例外是“非法尝试将集合与两个打开的会话相关联”。:S 解决方案由[danny-lesnik](https://stackoverflow.com/users/225396/danny-lesnik)

```
if(listaEquiposSeleccionados.length>0){            
        for(int i=0;i<listaEquiposSeleccionados.length;i++){
            int idEquipo = listaEquiposSeleccionados[i].getId().intValue();
                Session session = HibernateUtil.getSessionFactory().openSession();
                session.beginTransaction();
                Equipo equipo= (Equipo)session.load(Equipo.class, idEquipo);
                Campeonato campeonato = (Campeonato)session.load(Campeonato.class, idCampeonato);
                campeonato.getEquipos().remove(equipo);
                session.update(campeonato);
                session.getTransaction().commit(); 
                session.close();
        }
} 
```

我认为问题在于在不同的会话中加载“Campeonato”和“Equipo”。希望这可以帮助其他有同样问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:13:48.867

如果我理解正确，您只想从一场特殊比赛中删除一支特殊球队。在您的情况下，删除它之间的连接就足够了。

```
 String equepoId = "xxx"; // 
    String campeonatoId = "yyy";
    Session session = HibernateUtil.getSessionFactory().openSession();
    session.beginTransaction();
    Campeonato campeonato = (Campeonato)session.load(Campeonato.class,campeonatoId);
    Equipo equipo = (Equipo)session.load(Equipo.Class,equapoId);
    campeonato.getEquipos().remove(equipo);
    session.update(campeonato);
    session.getTransaction().commit(); 
```

# css - 图像反射 CSS 在 IE9 中不起作用？

> ID：10417243
> 
> 赞同：1
> 
> 时间：2012-05-02T15:48:59.383
> 
> 标签：css, internet-explorer-9, cross-browser

这是我必须实现图像反射的当前 CSS（尽管应用于包含图像超链接的 div 标签 - fb 和 twitter），它适用于 Chrome 和 Safari。我将如何在 IE9 中实现相同的效果？

```
.SocialIconStyle
{

 width:27px; float:left;

-webkit-box-reflect: below 0
-webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(0.5, transparent), to(white)); 
} 
```

![图像反射](../Images/738c514ac46f3f86de4f9d39e51a3178.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:04:12.947

IE9s 对 webkit 风格线性渐变的支持至少可以说是很差。看看这里

[IE9 是否支持 CSS 线性渐变？](https://stackoverflow.com/questions/4961651/does-ie9-support-css-linear-gradients)

您也许可以使用此站点使用 svg。只需检查 IE9 支持框。

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# jquery - jquery - 点击时打印元素（）

> ID：10417244
> 
> 赞同：0
> 
> 时间：2012-05-02T15:49:00.927
> 
> 标签：jquery, events, jquery-plugins, printing

我正在尝试使用 jquery printElement 打印颜色框。问题是这段代码不起作用。如果我没有在颜色框加载打印机的打印对话框打开时立即将 on() 包裹起来。

否则它不会在点击时打印。我在控制台中收到错误 **$("#toprint").printElement is not a function**

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.printElement.js"></script>
<link href="css/print.css" rel="stylesheet" type="text/css" media="print" />
<script type="text/javascript">
    $(document).ready(function(){
        $("#print-invoice").on("click", function(event){
            $('#toprint').printElement();
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:25:23.583

尝试

```
$("#print-invoice").click(function(){
            $('#toprint').printElement({printMode: 'popup'});
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T07:13:24.913

您没有给出 jquery.printelement.js 的正确路径。你必须像这样给出你的js的完整路径

```
<script type="text/javascript" src="${pageContext.servletContext.contextPath}/resources/js/jquery.printElement.js"></script> 
```

# weblogic - 将 WebLogic 11g 域连接到 WebLogic 12c NodeManager

> ID：10417245
> 
> 赞同：0
> 
> 时间：2012-05-02T15:49:03.830
> 
> 标签：weblogic, weblogic11g, weblogic12c

我的系统将同时在同一个机器上运行 WebLogic 11g 和 WebLogic 12c 域。但是，传统上只有一个 NodeManger 为机器运行。如果我尝试将 11g 域连接到 12c NodeManager，它会返回错误。如果我尝试从 12c 域连接到 11g NodeManager，我会收到 SSL 错误。

在此过渡期间，如何配置 11g 域以连接到 12c NodeManager？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-08T17:27:03.790

启动 Weblogic 12c，您可以为每个域启动一个 NodeManager，您应该为 11g 保留现有的 NodeManager，并为 12c 域启动一个新的特定于域的 NodeManager。

[https://blogs.oracle.com/imc/entry/weblogic_server_12c_perdomain_node](https://blogs.oracle.com/imc/entry/weblogic_server_12c_perdomain_node)

# php - php下拉菜单从数据库中删除

> ID：10417246
> 
> 赞同：-1
> 
> 时间：2012-05-02T15:49:08.637
> 
> 标签：php, mysql

我试图通过从下拉菜单中选择新闻事件来从数据库中删除新闻事件。当用户选择新闻标题并按下提交按钮时，应从相关表中删除新闻项目。无论我尝试什么，我都无法让它正常工作。对不起，我是 PHP 新手。有人可以帮忙吗？这是下拉菜单：

```
 $sql="SELECT newstitle FROM $tbl_name";
    $result=mysql_query($sql);
    ?>

    <select name="select1">
    <?php
    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    ?>
    <option value="<?php echo $row['newstitle'];?>"> <?php echo $row['newstitle'];?>         </option>

    <?php
    }
    ?>
    </select>

    <td><center><input type="submit" name="delete" value="delete"></center></td> 
```

按下按钮时，我还有要从数据库中删除的代码吗？

```
 $delete=$_POST['delete'];
    $delete = mysql_real_escape_string($delete);

    mysql_query ("DELETE FROM $tbl_name WHERE newstitle='$delete'") or die ("Error- news has not been deleted");
        echo "News has been deleted";
        header("Location: newsdeleted.php"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:28:33.293

```
// Your check for the "delete" submit value goes here
// Submit name and value are both 'delete'
if (isset($_POST['delete']) && $_POST['delete'] == 'delete') {
  // This is the value passed from the form (use select element's name)
  $selected_newstitle = $_POST['select1'];
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:53:49.993

*   `$tbl_name`未在您的删除脚本上设置。
*   请阅读有关 SQL 注入、过滤输入、转义查询的信息
*   你应该使用[PHP PDO](http://php.net/manual/en/book.pdo.php)而不是旧的 mysql funcs
*   除非您正在缓冲，否则您的标题行将不起作用，因为您已经输出到标准输出。
*   您的选择输入被称为`select1`不`delete`

# ios - 核心数据和 JSON

> ID：10417247
> 
> 赞同：0
> 
> 时间：2012-05-02T15:49:14.777
> 
> 标签：ios, objective-c, core-data

我是第一次使用 SBJSON 和 Core Data。我有一个这样的实体：

```
myEntity {
NSString *contenu;
NSString *first;
NSString *previous;
} 
```

我想`JSON`用这个实体创建我的，第二个问题，我想`JSON`在我的实体核心数据中存储一个？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:52:03.020

不确定“将 a 存储`JSON`在我的 Entity Core Data 中”是什么意思。

要将实体转换为 JSON 结构以进行发送，您可以将实体转换为`NSDictionary`. 从那里你可以`SBJSON`用来把它`NSDictionary`变成一个`JSON`字符串。

在[这个问题](https://stackoverflow.com/questions/2362323/json-and-core-data-on-the-iphone/2363996#2363996)中，我详细说明了如何做到这一点。这是示例代码，但它解释了如何让一切正常工作。

# silverlight - 组合框项目源在 silverlight 数据网格中不起作用

> ID：10417249
> 
> 赞同：0
> 
> 时间：2012-05-02T15:49:23.083
> 
> 标签：silverlight

我想为 silverlight 数据网格中的组合框绑定 ItemSource。它不显示绑定值。我有一个来自数据库的动态 ItemSource 值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:02:22.477

我也有同样的问题。对于 SL4，我能找到的最好方法是使用静态资源。

见这里：[http ://blog.digitaltools.com/post/2011/05/06/Binding-a-Datagride28099s-ComboBox.aspx](http://blog.digitaltools.com/post/2011/05/06/Binding-a-Datagride28099s-ComboBox.aspx)

或者，通过在 xaml 中创建静态资源：[http ://forums.silverlight.net/post/370135.aspx](http://forums.silverlight.net/post/370135.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:04:27.323

目前，您的组合框可以`t find the value coz it trying to find it in item`s（DataGrid 绑定到的）名为“AndOrs”的字段。如果您想将列绑定到整体上独立于 DataGrid，您应该使用完整路径/rel。在 DataContext 中搜索所需属性并绑定到它的源。例如，如果用于 DataGrid 的 ItemsSource 的集合在 AndOrs 附近定义：

```
<ComboBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=sdk:DataGrid}, Path=DataContext.AndOrs}"/> 
```

PS我猜AndOrs属性未在您用于DataGrid绑定的项目中定义。

# mysql - MySQL aes_encrypt 填充方案？

> ID：10417250
> 
> 赞同：3
> 
> 时间：2012-05-02T15:49:23.223
> 
> 标签：mysql, encryption, aes, padding

有谁知道 mysql 为他们的 aes_encrypt 使用什么填充方案？

我做了很多谷歌搜索，我发现的只是“字节填充”。但这太笼统了！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:59:29.533

数据填充是按照 RFC3369/PKCS#5 完成的。键是零填充的。不幸的是，这些都没有记录，但我从这个错误报告中得到了信息：

[http://bugs.mysql.com/bug.php?id=16713](http://bugs.mysql.com/bug.php?id=16713)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:11:02.113

这是一个[很好的解释，其中包含演示填充如何工作的代码](http://polarssl.org/trac/wiki/MysqlAesEncryption)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-13T10:32:16.363

这个答案让我走上了正确的轨道：

[https://stackoverflow.com/a/19692724](https://stackoverflow.com/a/19692724)

所以它确实是 PKCS7，正如 Marcus Adams 所指出的那样。

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T16:21:54.667

如果您不知道正在使用什么填充，则使用“NoPadding”解密。查看最后一个块末尾添加的内容，这将告诉您正在使用哪种填充样式。

# wpf - 将事件重新连接到 WPF TabControl 中的选定 TabItem

> ID：10417251
> 
> 赞同：0
> 
> 时间：2012-05-02T15:49:26.313
> 
> 标签：wpf, charts, event-handling, wpf-controls

我开发了一个 WPF 应用程序，它在 2D 图表上绘制文件中的数据。用户可以使用鼠标进行缩放和平移。可以将多个图形加载到 WPF TabControl 的不同选项卡中。绘图本身由 TabItem 中的 Grid 保存。

每次我读取文件并生成相应的图表时，我还将鼠标事件连接到保存图表的网格。

碰巧鼠标事件转而连接到最后加载的图表，当我选择返回任何其他 TabItem 时，我无法控制（缩放/平移）它。

我没有找到将鼠标事件重新连接到我切换回的 TabItem 中的网格的方法。

我会很感激任何提示。

莫蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:11:00.663

也许您可以将处理程序连接到网格的 MouseEnter 事件。之后，您可以连接鼠标事件。

在创建网格时：

```
grid.MouseEnter="Grid_MouseEnter" 
```

MouseEnter 处理程序：

```
private void Grid_MouseEnter(object sender, MouseEventArgs e)
{
    var grid = sender as Grid;
    if (grid == null)
        return;

    grid.MouseWheel += a1_MouseWheel;
} 
```

MouseWheel 处理程序

```
private void a1_MouseWheel(object sender, MouseWheelEventArgs e)
{
    var grid = sender as Grid;
    System.Diagnostics.Debug.WriteLine(grid.Name + " " + e.Delta);
} 
```

我猜你从网格的 mouseevents 中删除了处理程序！？

# excel - Excel 2007 - 如何确定列是否计算

> ID：10417252
> 
> 赞同：1
> 
> 时间：2012-05-02T15:49:27.843
> 
> 标签：excel, excel-2007

我有以下情况：

我有一个工作表，其中包含估计小时数的工作列表。可以使用 C 列将这些时间分配给用户（列在 D 和 E 列中）。现在我想在 DE 和 F 列中计算每个用户的分配时间。

我可以使用以下函数填写未计算字段的值：我已经在使用以下函数（为了便于阅读，删除了 $ 符号，并且我使用记录 3 作为示例，因为它不是计算的）

*   分配时间的计算：`=IF(C3=D1;B3;0)`。因此，如果用户的名称等于分配的用户的名称，则将使用该值，否则为 0。
*   未分配时间的计算：`=SUM(D3:E3) - B3`。因此，如果指定的用户在列中不存在，则不会指定小时数。
    *   ***编辑***我已经编辑了未分配时间的计算。以前的版本是：`=IF(AND(C3<>D1; C3<>E1);B3;0)`

这两个计算工作正常，但当然不适用于计算字段。

**我想要完成的**

现在我想填写关于问号的计算。如果您知道计算字段的放置位置，这很容易，但可以无处不在。所以我需要一个函数来做以下事情：

```
if: The value of columns B is calculated
then: calculate all values for the certain user until the next calculated row 
else: use one of the two calculations I have already described 
```

使用样品表要求的结果：

*   `?1?`：`SUM(D3;D6)`
*   `?2?`：`SUM(E3;E6)`
*   `?3?`：`SUM(F3;F6)`
*   `?4?`：`SUM(D8;D9)`
*   `?5?`：`SUM(E8;E9)`
*   `?6?`：`SUM(F8;F9)`

**示例表**

```
 A          B            C           D            E           F
1|   Tasks   |   Hours   |Assigned To|   User1   |   User2   |Not Assigned|
2|Main Task  |=SUM(A3:A6)|           |    ?1?    |    ?2?    |     ?3?    |
3|  Sub Task |    10     |   User1   |    10     |           |            |
4|  Sub Task |    25     |   User2   |           |    25     |            |
5|  Sub Task |    14     |   User2   |           |    14     |            |
6|  Sub Task |    17     |   User1   |    17     |           |            |
7|Main Task  |=SUM(A8:A9)|           |    ?4?    |    ?5?    |     ?6?    |
8|  Sub Task |    22     |   User2   |           |    22     |            |
9|  Sub Task |    43     |           |           |           |     43     | 
```

说明：
列`A`：与父任务相比，每个子任务都有一个额外的缩进（使用![缩进](../Images/9d3ab8fa60f69b3ab05d732035ffd771.png)按钮）。

Column `B`：如果item包含子item，将计算此列中的值

```
Task 1        Calculated because contains subtasks (Task 1.1 and Task 1.2)
 Task 1.1     Calculated because contains subtasks (Task 1.1.1 and Task 1.1.2)
  Task 1.1.1  Not calculated because no subtasks
  Task 1.1.2  Not calculated because no subtasks
 Task 1.2     Not calculated because no subtasks
Task 2        Not calculated because no subtasks
Task 3        Calculated because contains subtasks (Task 3.1)
 Task 3.1     Not calculated because no subtasks 
```

Column `C`：只能将未计算的列分配给用户

列`D - E`：标题包含可以分配任务的用户的名称

列`F`：包含每个任务未分配的小时数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:23:20.230

您可以确定哪些单元格具有如下公式：

```
Range formulaCells = range.SpecialCells(XlCellType.xlCellTypeFormulas); 
```

[为 VBA 编辑]

您可以创建一个用户定义的函数，如在Excel VBA中的[单元格是否具有公式中的函数，然后像这样使用它：](http://www.ozgrid.com/VBA/ExcelIsFormula.htm)

> =IsFormula(A1)

# android - phonegap 本机标头

> ID：10417256
> 
> 赞同：0
> 
> 时间：2012-05-02T15:50:11.103
> 
> 标签：android, ios, jquery-mobile, cordova, header

我正在为我的客户构建一个 Phonegap 应用程序，所有页面都是使用 jquerymobile 创建的。对于使用`data-role=header`和类似页脚的应用程序，我有一个一致的页眉和页脚。但是，在页脚上，我有诸如常见问题解答、联系我们之类的链接，这些链接指向我无法控制的公司标准网页。

问题：当用户点击一个链接（例如FAQ）时，它会从公司加载FAQ页面并且它没有我创建的标准页眉和页脚。在 iPhone 上，由于没有返回按钮，用户无法返回上一页。

有没有办法创建或使用我拥有的标题并在标题中有一个后退按钮，以便用户可以返回上一个屏幕？我的限制：由于客户的政策，希望尽可能避免使用本地代码，无权修改客户的常见问题解答/联系我们页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:03:19.483

单击链接，将在您的 web 视图中加载一个新页面。这是默认行为。相反，您可以捕获链接上的点击事件（防止默认）并添加 Ajax 调用以检索常见问题解答页面。然后您可以在自定义 div 中显示结果。就像是：

```
$.get('faq.html', function(data) {
            $('#yourcontainer').html(data);    
} 
```

# .net - Visual Studio 11 beta 中的转换失败

> ID：10417257
> 
> 赞同：0
> 
> 时间：2012-05-02T15:50:14.643
> 
> 标签：.net, visual-studio, visual-studio-2012

我正在将一个用 VS 2010 (MVC 3) 编写的现有项目添加到 VS 11 解决方案中。它尝试将项目添加到解决方案并给出此错误：

`Operation cannot be completed. The project file xxx cannot be converted. See the conversion report for more details.`

我在哪里可以找到转换报告？一般是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:07:51.400

首先，**请记住**Visual Studio 2011 是 beta 格式，出现错误是正常的，*例如*我无法运行我在 MVC 4 中制作的项目，但在 Visual Studio 2010 中运行良好...

至于您的问题，您可以从 MSDN Library 中阅读有关转换的信息：

> 将创建一个名为**ConversionReport.txt 的报告并将其存储在转换后的 Web 项目的根目录中**。此报告文件列出了对您的 Web 项目所做的所有更改，它可能包含在转换过程中发现的信息性注释、警告和错误。如果您在转换向导中选择选项以在向导完成后显示转换日志，您将在 Visual Studio 2005 中看到一个转换报告。有关此报告格式的详细信息，请参阅迁移转换报告格式。

有更多的资源

*   [http://msdn.microsoft.com/en-us/library/60z6y467(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/60z6y467%28v=vs.90%29.aspx)
*   [http://msdn.microsoft.com/en-us/library/c4c218a0-8f31-49a2-ba78-c9c4188be5b3(v=vs.90)](http://msdn.microsoft.com/en-us/library/c4c218a0-8f31-49a2-ba78-c9c4188be5b3%28v=vs.90%29)

它们适用于旧版本的 Visual Studio，但过程保持不变......

# python - 如何从 nsis 创建控制台单个文件可执行文件

> ID：10417262
> 
> 赞同：1
> 
> 时间：2012-05-02T15:50:32.673
> 
> 标签：python, console, executable, nsis, py2exe

我有 python 程序，我已经使用 py2exe 程序转换为可执行文件。我的程序是控制台应用程序，它有多种使用选项。

```
For Example:
            c:\>program.exe -h 
                 usage: For help option 
```

当我使用py2exe转换为exe文件时它工作正常但是当我使用nsis并使单个文件可执行时，每次我从命令提示符打开“example.exe”时它都会弹出控制台窗口并结束，有什么办法我可以在我的程序中通过争论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:52:55.973

问题是当您单击它时，exe 正在 shell 中执行，并且当程序完成时 shell 正在退出。为了保持持久性，您需要打开一个 shell，然后从 shell 运行命令。如果这工作量太大或太复杂（是的，我从经验丰富的开发人员那里听到这些评论是关于他们自己而不是目标用户），那么你需要以某种方式让它在你的程序中休眠以等待退出之前用户的输入，但您仍然需要快捷方式来传递选项。

最终，最好的解决方案是在所需的环境中运行命令或构建一个 gui 来获取选项并显示输出，而不是在 cli 中完成所有操作。

# javascript - Javascript选择文本并格式化textarea

> ID：10417264
> 
> 赞同：0
> 
> 时间：2012-05-02T15:50:35.273
> 
> 标签：javascript, text, format, textarea

我试图让用户在评论系统（穷人的文本编辑器）中使用的 textarea 中对文本进行简单的格式化。希望允许他们用光标选择文本，然后单击按钮对其进行格式化。我的问题是如何让 javascript 抓取并返回选定的文本。想象一下它应该是这样的：

```
<script>
function formatText(field) {
//gets text
var text;
text = field.value.substring(field.selectionStart, field.selectionEnd);
//formats it
var text = '<b'>+text+'</b>';
//returns it
field.value.substring(field.selectionStart, field.selectionEnd); = text;
}
</script>

<body>
<textarea id="field"></textarea><button onclick="formatText('field')">Make bold</button>
</body> 
```

更新：以下代码获取选定的文本，对其进行格式化，然后将其发送回 textarea——但是，它会替换 textarea 中的所有文本......所以我只需要替换 textarea 中选定文本的方法——而不是全部——我'将完成：

```
<head>
    <script type="text/javascript">
        function GetSelection () {
            var selection = "";

            var textarea = document.getElementById("field");
            if ('selectionStart' in textarea) {
                    // check whether some text is selected in the textarea
                if (textarea.selectionStart != textarea.selectionEnd) {
                    selection = textarea.value.substring  (textarea.selectionStart, 

textarea.selectionEnd);
                }
            }
            else {  // Internet Explorer before version 9
                    // create a range from the current selection
                var textRange = document.selection.createRange ();
                    // check whether the selection is within the textarea
                var rangeParent = textRange.parentElement ();
                if (rangeParent === textarea) {
                    selection = textRange.text;

                }
            }

            if (selection == "") {
                alert ("No text is selected.");
            }
            else {
                selection = "<b>"+selection+"</b>";
        document.getElementById('field').value = selection;

            }
        }
    </script>
</head>
<body>
    <textarea id="field" spellcheck="false">Select some text within this field.</textarea>
    <button onclick="GetSelection ()">Get the current selection</button>
</body> 
```

我认为有一种方法可以指定 document.getElementByID.value.substr 可能会这样做，但我不知道语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:06:55.477

这是：穷人的​​文本编辑器。使用应用于 textarea 中的文本的 SelectionStart 和 SelectionEnd 来获取选定的文本。然后在重新格式化后，将 textarea 文本从三个部分重新组合在一起，选择文本之前，选择文本和选择文本之后。使用 document.getElementById('textareaid').value = 组装文本放回 textarea。

```
<html>
<head><script>
function format () {
    // code for IE
    var textarea = document.getElementById("textarea");

    if (document.selection)
    {
    textarea.focus();
    var sel = document.selection.createRange();
    // alert the selected text in textarea
    alert(sel.text);

    // Finally replace the value of the selected text with this new replacement one
    sel.text = '<b>' + sel.text + '</b>';
    }

    // code for Mozilla

    var textarea = document.getElementById("textarea");

    var len = textarea.value.length;
    var start = textarea.selectionStart;
    var end = textarea.selectionEnd;
    var sel = textarea.value.substring(start, end);

    // This is the selected text and alert it
//    alert(sel);

    var replace = '<b>' + sel + '</b>';

    // Here we are replacing the selected text with this one
    textarea.value = textarea.value.substring(0,start) + replace + textarea.value.substring(end,len);

var formatted = textarea.value;
document.getElementById('field').value = formatted;
}

</script></head>
<body>
<textarea id="textarea">One two three four five six seven eight</textarea><button onclick="format 

()">Format selected text</button>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:00:14.810

在您的代码中存在以下问题：

1.  `var text`

每行必须以`;`

1.  `<button onclick="formatText("field")">`

开始一个引号必须以引号结尾，如果你需要引号，即对于像“这是我要处理的文本”这样的字符串，那么里面的那些引号需要是单引号

```
onclick="formatText('field')" 
```

1.  `text = field.value.substring(field.selectionStart, field.selectionEnd);`

该代码将一个字符串传递给该函数，该函数没有值属性\方法。我们想要文本字段中的文本，所以我们使用持有它的“元素”`document.getElementById('field')`

然后，我们只需设置该元素的样式即可。

如果您需要替换文本，只需将值分配给

```
document.getElementById('field').value = ... 
```

这是一个例子..

```
<script type="text/javascript" >
  function formatText() {
      //gets text
      //text = document.getElementById('field').value;
      //formats it
      document.getElementById('field').style.fontWeight = "bold";
  }
</script>

</head>
<body>
<textarea id="field"></textarea><button onclick="formatText()">Make bold</button>
</body> 
```

在这里查看[http://jsfiddle.net/YcpUs/](http://jsfiddle.net/YcpUs/)

# groovy - 如何在 Groovy 中执行引用等于？

> ID：10417265
> 
> 赞同：41
> 
> 时间：2012-05-02T15:50:39.960
> 
> 标签：groovy

Groovy 将 == 映射到 eq​​uals() 通常很方便，但是当我想按身份进行比较时该怎么办？例如，GPathResult 通过调用 text() 来实现 equals，这对于大多数内部节点来说是空的。我正在尝试识别根节点，但使用该实现是不可能的。如果我可以按身份进行比较，那将是可能的。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-02T15:57:18.083

你使用`is`方法。IE：

```
a.is( b ) 
```

有关更多说明，请参阅[文档](http://groovy-lang.org/gdk.html#is%28java.lang.Object%29)

## 编辑

从 groovy 3 开始，[您可以使用](https://docs.groovy-lang.org/latest/html/documentation/core-operators.html#_relational_operators) `===`（或`!==`相反）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-02T15:57:00.910

用于`is`测试对象身份：

```
groovy:000> class Foo { }
===> true
groovy:000> f = new Foo()
===> Foo@64e464e4
groovy:000> g = new Foo()
===> Foo@47524752
groovy:000> f.is(g)
===> false
groovy:000> g.is(f)
===> false
groovy:000> f.is(f)
===> true 
```

# javascript - 为什么要使用“文本/javascript”？

> ID：10417267
> 
> 赞同：0
> 
> 时间：2012-05-02T15:50:53.660
> 
> 标签：javascript

> **可能重复：**
> [我是否应该在我的 SCRIPT 标签中包含 type=“text/javascript”？](https://stackoverflow.com/questions/985408/should-i-include-type-text-javascript-in-my-script-tags)
> [带类型的 <script> 标记和不带类型的 <script> 之间的区别？](https://stackoverflow.com/questions/9659029/difference-between-script-tag-with-type-and-script-without-type)

这：

```
<script type="text/javascript">
    alert("Hello world!");
</script> 
```

还有这个：

```
<script>
    alert("Hello world!");
</script> 
```

似乎完成了同样的事情（至少在chrome，firefox，ie中），那么，有什么区别？我为什么要放那些额外的 25 个字符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:55:05.593

在编写 HTML 4 规范时，假设人们将使用各种脚本语言（[规范](http://www.w3.org/TR/html4/interact/scripts.html)中有 VBscript 和 TCL 的示例）。这要求作者确定使用的语言。

结果不是那样的，JavaScript 确实赢了。HTML 5 草案将属性设为可选，并将 JavaScript 设为默认语言（这反映了浏览器多年来的假设）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:54:57.560

[根据 HTML4 规范](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.1)，它们是必需的，但[根据 HTML5 规范](http://www.w3.org/TR/html5/the-script-element.html#attr-script-type)不再需要

我猜这个想法是支持不同类型的脚本 - 它从未被实现并且已根据 HTML5 的要求被删除

# objective-c - CoreData，在我的对象 coredata 中获取我的元素

> ID：10417271
> 
> 赞同：0
> 
> 时间：2012-05-02T15:51:04.080
> 
> 标签：objective-c, core-data, nspredicate

我想预测我的元素的名称。请你帮助我好吗

这是我的代码：

```
NSNumber *min = [NSNumber numberWithInteger:30];
NSNumber *max = [NSNumber numberWithInteger:100];
NSPredicate *predi;
predi = [NSPredicate predicateWithFormat:@"number BETWEEN %@", [NSArray arrayWithObjects:min, max, nil]];

NSArray  *BoxWithPriceBetween = [array filteredArrayUsingPredicate:predi]; 

NSLog(@"Box %@", BoxWithPriceBetween); 
```

这是我的结果：

```
2012-05-02 17:42:28.019 CoreDataTuto[2690:fb03] Box (
    "<Phone: 0xba68790> (entity: Phone; id: 0xba687c0 <x-coredata:///Phone/t73E15BA0-90CA-4AEA-91B4-93BD8FD328737> ; data: {\n    name = NAME6;\n    number = 40;\n})",
    "<Phone: 0xba64dc0> (entity: Phone; id: 0xba64df0 <x-coredata:///Phone/t73E15BA0-90CA-4AEA-91B4-93BD8FD328735> ; data: {\n    name = NAME4;\n    number = 33;\n})",
    "<Phone: 0xba572a0> (entity: Phone; id: 0xba571e0 <x-coredata:///Phone/t73E15BA0-90CA-4AEA-91B4-93BD8FD328733> ; data: {\n    name = NAME2;\n    number = 33;\n})",
    "<Phone: 0xba64d20> (entity: Phone; id: 0xba64d50 <x-coredata:///Phone/t73E15BA0-90CA-4AEA-91B4-93BD8FD328734> ; data: {\n    name = NAME3;\n    number = 43;\n})"
) 
```

我想预测所有的名字。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:39:24.883

最简单的方法

```
NSArray *names = [BoxWithPriceBetween valueForKey:@"name"]; 
```

来自[NSArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)文档

> **valueForKey：**
> 返回一个数组，其中包含调用 valueForKey 的结果：对数组的每个对象使用键。

* * *

## 边注

变量通常以小写字母开头，然后是驼峰式命名。例如`BoxWithPriceBetween`应该是`boxWithPriceBetween`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:43:02.013

我不确定我是否理解你的问题，但如果你想从每个对象中获取 name 属性，那么试试这样的......

```
for (NSManagedObject *object in BoxWithPriceBetween) {
    NSString *name = [object valueForKey:@"name"];
} 
```

# jquery - 使用 jQuery 单击时显示相对于悬停元素的隐藏 div

> ID：10417273
> 
> 赞同：1
> 
> 时间：2012-05-02T15:51:10.520
> 
> 标签：jquery

我试图让一个隐藏的 div 显示相对位置（直接在悬停的 div 的右侧。）

在小提琴上，当光标悬停在 div 上时，它会放大并重新定位。我想要实现但无法弄清楚......是如何仅显示'this'元素的div详细信息，相对于悬停的div。

我遇到的问题是：

1.  让子 div (.details) 成为唯一一个不显示所有 .details 元素的元素。一种。让它相对于悬停的元素显示，而不是在绝对位置。
2.  取消点击时的悬停功能，以便可以导航到div详细信息而不会消失。

小提琴：http: [//jsfiddle.net/pssuT/1](http://jsfiddle.net/pssuT/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:01:46.137

要将细节绝对定位在包含元素的右侧，您可以添加`position:relative`到父元素和`position:absolute; left:100%`子元素。

要使单击后状态保持不变，您可以在单击时添加一个类并在悬停函数中检查它。

查看解决方案：http: [//jsfiddle.net/pssuT/2/](http://jsfiddle.net/pssuT/2/)

# wpf - 当其任何属性发生更改时更改对象实例 propertyChanged

> ID：10417274
> 
> 赞同：0
> 
> 时间：2012-05-02T15:51:13.463
> 
> 标签：wpf

我有一个简单的课程。我可以更改它的属性并得到通知。但是当我更改它的任何属性时，更改的对象实例属性不会改变。如何更改已更改的对象实例属性以启用以下事件？

```
public class A : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public int _id;
    public int Id
    {
        get { return _id; }
        set
        {
            if (_id == value)
            {
                return;
            }

            _id = value;
            OnPropertyChanged("Id"); 
        }
    }

    public string _name;
    public string Name
    {
        get { return _name; }
        set
        {
            if (_name == value)
            {
                return;
            }

            _name = value; 
            OnPropertyChanged("Name"); 
        }
    }
}

foreach (INotifyPropertyChanged item in new ObservableCollection<A>() )
         item.PropertyChanged += new PropertyChangedEventHandler(Item_PropertyChanged);

    private void Item_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:14:35.403

[ObservableCollection 没有注意到其中的项目何时更改（即使使用 INotifyPropertyChanged）](https://stackoverflow.com/questions/1427471/observablecollection-not-noticing-when-item-in-it-changes-even-with-inotifyprop)

这个问题在 simon 的答案 2 中给出了一个可能的解决方案。他从 ObservableCollection 继承并将集合事件处理程序挂钩到每个项目的 PropertyChanged 事件。

# java - 字符串的外部文件，而不是硬编码它们

> ID：10417275
> 
> 赞同：6
> 
> 时间：2012-05-02T15:51:14.103
> 
> 标签：java, eclipse, file, hard-coding

我有开发一些 Android 应用程序的经验，这些应用程序很容易拥有可以存储字符串的 XML 字符串文件。上次我开发桌面 Java 应用程序时，我硬编码了字符串（例如按钮标题、标签等）。从那以后我了解到这是不好的做法，我应该将字符串存储在文件中。

我不知道该怎么做。

*   我目前正在 Eclipse 中开发。我应该在我的项目文件夹中粘贴一个文本文件吗？
*   这是标准吗？
*   如何在代码中找到文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T15:54:11.190

Eclipse 有一个内置的重构，您可能会发现它很有用。

```
Source->Externalise Strings 
```

这将创建一个属性文件，其中的字符串存储为键/值对。

它在幕后使用`ResourceBundle`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T15:54:08.757

是的，您应该使用`.properties`文件并使用[`ResourceBundle`](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T15:57:41.140

我认为如果您这样做，它不会特定于任何 IDE：请参阅[通过资源文件加载资源以](http://www.rgagnon.com/javadetails/java-0135.html)获取概述。第一个 URL 说明了这个类在哪里查找属性文件。

见[`ResourceBundle`](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html) 课堂。

将`ResourceBundle`首先查找类，如果未找到，它将查找属性文件。我们不必指定文件名，`ResourceBundle`将使用与类相同的机制构造文件名。该文件必须具有扩展名`.properties`.

`ResourceBundle`尝试从当前类路径加载属性文件。

如果属性存储在子目录中，请使用`.`而不是`/`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T15:54:24.653

查看用于. [_](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html) `ResourceBundle`API 提供了一种获取特定于语言环境的资源的字符串的方法。

# php - php延长会话到期

> ID：10417283
> 
> 赞同：1
> 
> 时间：2012-05-02T15:51:43.637
> 
> 标签：php, session, session-timeout

因此，我通常在这里和网络上进行了查看，但找不到任何我需要的东西。我看过一堆关于强制它在一段时间后过期的帖子，但我只是想延长我的会话寿命。

我不确定它是基于不活动还是仅基于一段时间，但似乎它会丢失存储的任何会话数据。例如购物篮上的购物车数据。

我只是希望能够将产品数据保留在其中超过 30 分钟，所以我在每个脚本的顶部都包含以下内容，但它肯定不会持续 10 小时。

```
ini_set("session.cookie_lifetime","36000");
ini_set("session.gc_maxlifetime","36000");

session_start(); 
```

我的印象是浏览器关闭时会话过期，而 cookie 根据时间过期，我不使用 cookie，只使用会话。

**所以我的问题**是，如何延长会话的寿命？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:55:02.370

如果您想要更长的会话，您可能需要考虑使用 cookie（仅用于安全变量！切勿将未加密的私人信息存储在 cookie 中！）。

假设用户稍后想要查看他的购物车，您最好的选择是：

1.  强制进行帐户注册，并将每个用户的购物车保存在数据库中。
2.  使用 cookie 将购物车本地存储在用户的机器上。

请注意，某些用户可能会禁用 cookie，因此请显示一个很大的警告，如果不启用 cookie，您的网站将失败。

见**[手册](http://il.php.net/cookies)**

# git - 来自给定程序员的 GIT 报告

> ID：10417286
> 
> 赞同：0
> 
> 时间：2012-05-02T15:51:53.340
> 
> 标签：git, report

对于法律问题的代码文档，我需要以某种方式记录哪些文件被更改，以及 git 存储库中的给定程序员在源代码中究竟更改了什么。有什么方法可以让它变得非常简单和美观吗？也许有一些工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:54:25.613

好吧，在最简单的情况下，您只需显示该开发人员的所有提交差异：

```
git log -p --author='name of author' --full-history --all 
```

要将`git log`' 的输出限制在某个时间范围内，请指定`--since`/`--after`和`--until`/`--before`选项：

```
git log -p --author='name of author' --since=... --until=... --full-history --all 
```

# java - KeyEvent.getKeyText() 在 OSX 中返回特殊字符（例如“VK_ENTER”），但在 Windows XP 中没有，有什么解决方案吗？

> ID：10417288
> 
> 赞同：4
> 
> 时间：2012-05-02T15:52:01.537
> 
> 标签：java, text, awt, keyevent

我正在使用 KeyEvents 和

```
KeyEvent.getKeyText(KeyEvent.VK_...) 
```

以获取KeyEvent对应的文本。

在 OSX (Lion) 中，当我请求特殊键的文本时，例如 TAB 或 ENTER (KeyEvent.VK_ENTER)，我得到相应的符号（例如，对于 Enter，我得到弯曲的箭头）。在 Windows XP 系统中，同样给我的是键名（例如“Enter”）而不是符号。

是否也有解决方案来获取 XP 中的特殊字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:05:38.110

MAC有不同的实现：

> 这些是有意更改的，以便在 Swing 中为窗口内菜单栏的菜单快捷方式提供正确的符号。我们现在实际上返回系统菜单栏显示的 unicode 符号，而不是使用单词“Meta”或“Command”。

在这种情况下，您可以使用该键的常量`VK_ENTER`，例如

```
if (evt.getKeyCode() == KeyEvent.VK_DOWN || evt.getKeyCode() == KeyEvent.VK_KP_DOWN) {} 
```

或者您可以将键映射到其字符串名称`Map`

```
map.put(KeyEvent.VK_ENTER, '\u21b5'); \\ ↵ 
```

# c++ - 使用命令行参数创建快捷方式

> ID：10417290
> 
> 赞同：0
> 
> 时间：2012-05-02T15:52:04.620
> 
> 标签：c++, windows, command-line-arguments, shortcut

使用链接上提供的代码：http: [//msdn.microsoft.com/en-us/library/aa969393.aspx](http://msdn.microsoft.com/en-us/library/aa969393.aspx)

```
HRESULT CreateLink(LPCWSTR lpszPathObj1, LPCSTR lpszPathLink, LPCWSTR lpszDesc) 
{ 
    HRESULT hres; 
    IShellLink* psl; 

    // Get a pointer to the IShellLink interface. It is assumed that CoInitialize
    // has already been called.
    hres = CoCreateInstance(CLSID_ShellLink, NULL, CLSCTX_INPROC_SERVER, IID_IShellLink, (LPVOID*)&psl); 
    if (SUCCEEDED(hres)) 
    { 
        IPersistFile* ppf; 

        // Set the path to the shortcut target and add the description. 
        psl->SetPath(lpszPathObj1); 
        psl->SetDescription(lpszDesc); 

        // Query IShellLink for the IPersistFile interface, used for saving the 
        // shortcut in persistent storage. 
        hres = psl->QueryInterface(IID_IPersistFile, (LPVOID*)&ppf); 

        if (SUCCEEDED(hres)) 
        { 
            WCHAR wsz[MAX_PATH]; 

            // Ensure that the string is Unicode. 
            MultiByteToWideChar(CP_ACP, 0, lpszPathLink, -1, wsz, MAX_PATH); 

            // Add code here to check return value from MultiByteWideChar 
            // for success.

            // Save the link by calling IPersistFile::Save. 
            hres = ppf->Save(wsz, TRUE); 
            ppf->Release(); 
        } 
        psl->Release(); 
    } 
    return hres; 
} 
```

我正在尝试在桌面上创建一个快捷方式，其目标（exe）采用命令行参数。我尝试通过以下方式设置目标：

```
LPCWSTR lpszPathObj1 = L"C:/Folder1/Folder2/SomeApp.exe 690080776072629&734078"; 
```

使用 Target 创建快捷方式：

```
"C:/Folder1/Folder2/SomeApp.exe 690080666072629&782078" 
```

和

```
LPCWSTR lpszPathObj1 = L"C:/Folder1/Folder2/SomeApp.exe\" 690080776072629&734078"; 
```

使用空白目标创建快捷方式。

我尝试了更多选择，但没有工作。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:06:17.273

我假设您提到的字符串已传递给 psl->setPath()。它只是传递将由链接调用的可执行文件，您不应该将参数放在同一个字符串中。相反，在此之后调用 psl->setArguments() ，只需使用参数。字符串中的双引号没有任何区别，只有当您有其中一个带有空格的参数时才需要它们。

# json - RESTful json 响应在 tomcat 上失败，但在 GlassFish 中有效

> ID：10417292
> 
> 赞同：1
> 
> 时间：2012-05-02T15:52:07.197
> 
> 标签：json, spring, jakarta-ee, tomcat, spring-mvc

这是我使用 JSON 响应返回的方法。此代码适用于 GlassFish，但在 tomcat 7.0.27 上运行时出现错误

HTTP 状态：406

此请求标识的资源只能生成具有根据请求“接受”标头（）不可接受的特征的响应。

```
@RequestMapping(value = "/test", headers="Accept=application/json", method = RequestMethod.POST)
public @ResponseBody
Map<String, ? extends Object> getAuthPOST(@RequestBody String jsonBody) throws JSONException {                        
    JSONObject j = new JSONObject(jsonBody);
    System.out.println(j.keys());
    Iterator i = j.keys();
    Map<String, Object> result = new HashMap<String, Object>();
    while (i.hasNext()) {            
        String key = (String) i.next();
        result.put(String.valueOf(key), String.valueOf(j.getString(key)));
    }        
    return result;

} 
```

更新：

这是我收到请求时的标头

HTTP/1.1 406 不可接受 内容长度：1070 服务器：Apache-Coyote/1.1 内容类型：text/html;charset=utf-8 日期：2012 年 5 月 2 日星期三 15:47:24 GMT 连接：关闭

它将 Content-Type 更改为 text/html。

这是我的请求标头：

POST /SpringMVC/login/test HTTP/1.1 接受：application/json 内容类型：application/json

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:19:15.330

您还没有提到您使用的是哪个版本的 spring-mvc，但是如果您使用的是 3.1，您可以将“produces”参数添加到您的 @RequestMapping。 `produces="application/json"`

# javascript - 根据链接文本的内容添加类

> ID：10417293
> 
> 赞同：0
> 
> 时间：2012-05-02T15:52:12.283
> 
> 标签：javascript, jquery, text, replace

我在 Stack 上找到了一个不错的[片段，它从链接中获取文本并将其作为类附加到 a 标签：](https://stackoverflow.com/a/1624014/819276)

```
$('a.nav').each(function() {

    // add class with name of the link's text
    $(this).addClass($(this).text());
}); 
```

它工作得很好，除了我有一个`(numbers), e.g. (19)`在链接文本之后输出的链接搜索结果列表。

所以应用上面的 JQuery 之后我的 HTML 的结构是这样的：

```
<li><a class="Basic page (1)" href="#">Basic page (1)</a></li>
<li><a class="Blog (19)" href="#">Blog (19)</a></li>
<li><a class="News (4)" href="#">News (4)</a></li> 
```

如您所见，这并不理想。如果可能的话，我想至少去掉括号中的数字，例如`(1)`，`(19)`等等……然后加上破折号，加上文字和小写字母。请注意，这是针对多面搜索结果的，因此链接永远不会全部在一起或以相同的顺序排列。我只是尝试基于链接文本名称应用动态类，以便我可以在主题领域中做其他事情。

所以这：

```
<li><a class="Basic page (1)" href="#">Basic page (1)</a></li> 
```

...会变成这样：

```
<li><a class="basic-page" href="#">Basic page (1)</a></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:59:49.333

一些基本的正则表达式将获得您正在寻找的格式。

```
$('a.nav').each(function() {

    // add class with name of the link's text
    $(this).addClass($(this).text()
        .toLowerCase()
        .replace(/(\s\(\d+\))/, '') // replaces ' ([digit(s)])'
        .replace(/\s+/g, '-')); // replaces spaces with dashes
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:05:18.847

试试下面的东西，

[**演示**](http://jsfiddle.net/ZFXcg/)

```
$(function() {
    $.each($('ul li a'), function() {
        var text = $(this).text();
        this.className = $.trim(text.replace(/\(\d*\)/g, '').toLowerCase()).replace(/\s/, '_');
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T15:59:42.500

[我在这里](http://dense13.com/blog/2009/05/03/converting-string-to-slug-javascript/)找到了一个小功能。在它的帮助下，我猜下面的代码对你有用；

HTML：

```
<ul>
  <li><a href="#" class="nav">Basic page (1)</a></li>
  <li><a href="#"class="nav">Blog (19)</a></li>
  <li><a href="#"class="nav">News (4)</a></li>
</ul> 
```

Javascript：

```
function string_to_slug(str) {
  str = str.replace(/^\s+|\s+$/g, ''); // trim
  str = str.toLowerCase();

  // remove accents, swap ñ for n, etc
  var from = "àáäâèéëêìíïîòóöôùúüûñç·/_,:;";
  var to   = "aaaaeeeeiiiioooouuuunc------";
  for (var i=0, l=from.length ; i<l ; i++) {
    str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));
  }

  str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars
    .replace(/\s+/g, '-') // collapse whitespace and replace by -
    .replace(/-+/g, '-'); // collapse dashes

  return str;
}

jQuery(function($) {
    $('a.nav').each(function() {

        // add class with name of the link's text
        $(this).addClass(string_to_slug($(this).text()));
    });
}); 
```

示例：http: [//jsfiddle.net/CjdsG/](http://jsfiddle.net/CjdsG/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T16:03:00.430

```
$('a.nav').each(function() {
    var oSelf = $(this);
    var sClass = oSelf.html()
        .toLowerCase()
        .replace(/(\w)(\W\([0-9]+\))/, '$1')
        .replace(' ', '-');
    oSelf.addClass(sClass);
}); 
```

# windows-8 - 如何为 Windows 8 应用程序提供 3 种初始屏幕尺寸？

> ID：10417294
> 
> 赞同：14
> 
> 时间：2012-05-02T15:52:20.770
> 
> 标签：windows-8, splash-screen, windows-runtime, winrt-xaml

我正在尝试创建一个 Windows 8 C#/XAML 应用程序，我想做的第一个任务是设置启动画面。

如何提供[启动画面元素](http://msdn.microsoft.com/en-us/library/windows/apps/br211467.aspx)文档中引用的 100%、140% 和 180% 版本？

该链接指的是[Tiles 概述](http://msdn.microsoft.com/en-us/library/windows/apps/hh779724.aspx)，然后链接到[Tile 图像大小](http://msdn.microsoft.com/en-us/library/windows/apps/hh781198.aspx)，然后链接到[Globalizing tile 和 toast 通知](http://msdn.microsoft.com/en-us/library/windows/apps/hh831183.aspx)，它提供了文件夹命名约定和文件命名约定，这两者似乎都不适用于启动画面。

为什么它不是一个不错的 appxmanifest 条目？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T20:44:26.713

如果您的基本项目模板在 Assets 文件夹中有一个名为 SplashScreen.png 的文件 - 您无需更改 Package.appxmanifest。只需将 SplashScreen.png 重命名为 SplashScreen.scale-100.png 并将 SplashScreen.scale-140.png 和 SplashScreen.scale-180.png（分别为 868x420 和 1116x540 分辨率）添加到 Assets 项目文件夹中，系统将选择它们取决于应用程序启动时的当前规模。在模拟器中测试很容易（项目/属性/调试/模拟器，然后在模拟器中点击更改分辨率并重新运行应用程序以查看不同的初始屏幕图像）。我认为 Package.appxmanifest 编辑器不允许选择不存在的启动屏幕文件，因此如果您没有 SplashScreen.png，但 SplashScreen.scale-100.png - 您将无法选择它,

我认为这就是他们在[文章](http://msdn.microsoft.com/en-us/library/windows/apps/br211467.aspx)中所说的“闪屏图像可以作为**图像文件**的直接路径或**资源**”的意思。

# hsqldb - HSQL：如何获取存储过程中 UPDATE 语句更新的行数

> ID：10417296
> 
> 赞同：1
> 
> 时间：2012-05-02T15:52:22.660
> 
> 标签：hsqldb, rowcount

我有一个存储过程，它调用 UPDATE（或 INSERT，或 DELETE）语句，我想将此语句更新的行数存储在语言环境变量中。

这不起作用，因为 INSERT 是一个语句，不能作为表达式求值：

```
CREATE PROCEDURE f()
MODIFIES SQL DATA
BEGIN ATOMIC
  DECLARE rows_updated INT;
  SET rows_updated = (INSERT INTO my_table VALUES(1,2));
  ...
END; 
```

其他 SQL 引擎似乎有一个名为“@@rowcount”的“元变量”来检索事务的最后一个 UPDATE/INSERT/DELETE 语句更新的行数。我在 HSQL 中没有找到等价物。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:00:22.210

HSQLDB 遵循 SQL:2008 标准。您可以使用 GET DIAGNOSTICS 语句设置 rows_updated 变量。还有一个函数可以模仿这种说法。

看这里：

[http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_diagnostics_state](http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_diagnostics_state)

# php - 验证后Javascript不会停止提交到服务器

> ID：10417297
> 
> 赞同：0
> 
> 时间：2012-05-02T15:52:28.050
> 
> 标签：php, javascript, html, validation

我正在尝试使用 javascript 进行表单验证。如果发现错误，javascript 应该停止将表单发送到服务器。

我通过编写以下语句确保 javascript 返回 false：return false;

并且表单仍然被发送到服务器。

脚本标签：

```
<script language="javascript" src="validations.js" type="text/javascript"></script> 
```

我的表单标签：

```
FORM id="frm" name="newCustomer" METHOD="POST" ACTION="register.php" onsubmit="return validateNewCustomer()"> 
```

JavaScript 函数：

```
function validateNewCustomer() {
    var name = document.getElementById('f_name').value;

    var okCustomer = true;

    if (name.value == "") {
        document.getElementById('f_name').value="kossetak";
        document.getElementById('errfname').innerHTML = "Error Name";
        okCustomer = false;
    } else {
        document.getElementById('errname').innerHTML = "";
        okCustomer = true;
    }

    return okCustomer;
} 
```

我感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T16:00:38.053

你总是从你的函数中返回 true，因为`name.value == ""`总是 false，所以你输入 else 子句。

请注意，您已经`.value`在这条线上：

```
var name = document.getElementById('f_name').value 
```

因此，当您说`name.value`您正在访问`document.getElementById('f_name').value.value`which will be时`undefined`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:01:39.613

也许您应该考虑在 JavaScript 函数中提交表单，而不是使用 HTML 操作参数。

这方面的一个例子是：

```
<form id="frm" name="newCustomer" onsubmit="return validateNewCustomer()">...</form> 
```

JavaScript：

```
function validateNewCustomer() {
    var name = document.getElementById('f_name').value;

    var okCustomer = true;

    // name.value replaced to name
    if (name == "") {
        document.getElementById('f_name').value="kossetak";
        document.getElementById('errfname').innerHTML = "Error Name";
        okCustomer = false;
    } else {
        document.getElementById('errname').innerHTML = "";
        // Submit the document here
        document.forms["newCustomer"].submit();
        // Still supply a return value in case you need it later
        okCustomer = true;
    }

    return okCustomer;
} 
```

# css - 试图完成一个设计，却无法解决一个小小的 CSS 问题

> ID：10417302
> 
> 赞同：1
> 
> 时间：2012-05-02T15:52:52.357
> 
> 标签：css, css-float

我有一个几乎完成的设计，但我无法让 CSS 做我想做的事。我想做的是这样的：

![图 1，它的外观](../Images/36eb132f38fd355d64ea7a645f1bb471.png)

但是，当页面生成时，输出如下所示：

![图 2，它在做什么](../Images/c25d5314a0dab9e1d4df1f107af88808.png)

我怎样才能让第三个盒子漂浮在第一个盒子下面和第二个盒子旁边？我已经尝试了我知道的每一个技巧，但无法让它发挥作用。我还应该提到，每个块都是通过从数据库中提取的 PHP 循环添加到页面中的，所以我有点受限于没有静态内容，并且无法提前知道特定块的高度成为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:00:37.820

如果列数是可变的，CSS 就不能真正做到（如果你希望它在所有常见的浏览器中工作），所以改为使用旨在解决这个问题的[jQuery Masonry 。](http://masonry.desandro.com/)

这是我说的同样的话，但有更多的话：[CSS two columns with known children width](https://stackoverflow.com/questions/6003171/css-two-columns-with-known-children-width/6003261#6003261)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:28:41.580

对于第二种布局，一个不错的选择是使用三个主要列。有几个可用的网格系统，包括[Twitter Bootstrap](http://twitter.github.com/bootstrap/)和[960 Grid](http://960.gs/)，它们将帮助您快速布局基本框架并且没有怪癖。当 div（块元素）位于三列中的任何一列时，它们会自然地从上到下堆叠起来。

关于 div 的底部完美排列，您将能够使用 JavaScript 计算列的父级的总高度（自然会继承最高列的高度），计算块元素的总高度在每一列中，并使用 javascript 将高度差异添加到每个列的最低块元素。

请务必在 JS 高度计算中考虑填充和边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:01:31.687

尝试将 div 放入 3 列，而不是按照它们出现的顺序堆叠它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:01:55.980

这种行为是因为`float`规则。浮动元素的顶部不能超过页面正常流程中位于它之前的另一个元素的顶部。我不确切知道你如何定位你的元素，但你可能想调查一下。

这是浮动的 Css 规范：http: [//www.w3.org/TR/CSS2/visuren.html#float-rules](http://www.w3.org/TR/CSS2/visuren.html#float-rules)（它是 css2，但规则仍然适用）查看规则 5 和 6

# c - 必须将 ELF 文件的哪一部分加载到内存中？

> ID：10417312
> 
> 赞同：17
> 
> 时间：2012-05-02T15:53:17.400
> 
> 标签：c, linux, memory, elf

可执行文件的 ELF 文件有一个程序（段）头和一个节头，可以通过 看到`readelf -a`，这里是一个例子：

![在此处输入图像描述](../Images/da8a770a6ad244f945c466f58a7064e5.png)

![在此处输入图像描述](../Images/50743c6c61f8832afe656701e0a92d58.png)

上面两张图分别是节头和程序（段）头。可以看出，一个段头是由几个段头组成的，用于将程序加载到内存中。

是否只需要将 .text、.rodata、.data、.bss 部分加载到内存中？

段中的所有其他部分（例如，第 3 段中的 .ctors、.dtors .jcr）是否都用于对齐？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T16:33:06.120

部分和段完全是两个不同的概念。节与存储在那里的数据的语义有关（即它将用于什么），并且一旦链接程序或共享库，除了调试目的之外，它们实际上是无关紧要的。您甚至可以完全删除节标题（或用随机垃圾覆盖它们）并且程序仍然可以工作。

段（即程序头加载指令）是内核和/或动态链接器在加载程序时实际查看的内容。例如，在您的情况下，您有两个加载指令。第一个导致文件的前 4k（1 页）映射到地址 0x08048000，并表示实际上只使用此映射的前 0x4b8 个字节（其余为对齐）。第二个导致文件的前 8k（2 页）映射到地址 0x08049000。其中绝大多数是对齐。前 0xf14 字节不是加载指令的一部分（只是对齐），将被浪费。从 0x08049f14 开始，实际使用从文件映射的 0x108 字节，另外 0x10 字节（以达到 0x118 的 MemSize）由加载器（内核或动态链接器）填充零。这最多跨越 0x0804a02c（在第二个映射页面中）。`malloc`可能能够恢复它以用作堆的一部分）。

最后，虽然根本不会使用节标题，但程序运行时可能会使用许多不同节的内容。注意 和 的地址范围`.ctors`位于`.dtors`第二个加载映射的开头，因此它们在运行时被程序映射和访问（运行时启动/退出代码将使用它们来运行全局构造函数和析构函数，如果 C++ 或“GNU使用了具有 ctor/dtor 属性的 C" 代码）。另请注意，它`.data`从第二个映射页面中的地址 0x0804a00c 开始。这允许在应用重定位后以只读方式保护第一页（程序头中的 RELRO 指令）。

# c++ - 具有多个构造函数的 C++ 初始化成员变量

> ID：10417314
> 
> 赞同：4
> 
> 时间：2012-05-02T15:53:25.343
> 
> 标签：c++

通常构造函数应该是这样的：

```
//ctor1
SmallSim::SmallSim()
:mSimInit(false)
,mServersCreated(false)
,mTotalCPUTime(0)
{
    ...
} 
```

如果我有多个构造函数会怎样？

在我看来，如果我从第二个构造函数调用第一个构造函数，则第一个中的成员 vars 不会被初始化。

```
//ctor2
SmallSim::SmallSim(bool ImmediateExecution, bool Report)
{
    SmallSim();

    ...
} 
```

那么我需要在我拥有的每个构造函数上重复 :mSimInit(false) ,mServersCreated(false) ,mTotalCPUTime(0) 吗？

据我所知，使用 InitClassVars() 并不是最好的方法......

```
//ctor1
SmallSim::SmallSim()
{
    InitClassVars();

    ...
}

//ctor2
SmallSim::SmallSim(bool ImmediateExecution, bool Report)
{
    InitClassVars();

    ...
}

//Common function for init of member vars for multiple constructors
void SmallSim::InitClassVars(void)
{
    mSimInit = false;
    mServersCreated = false;
    mTotalCPUTime = 0;
} 
```

是否有正确的方法来初始化成员变量而不在每个构造函数上重复初始化？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T15:57:44.787

如果你这样做：

```
SmallSim::SmallSim(bool ImmediateExecution, bool Report)
{
    SmallSim(); // 1

    ...
} 
```

标有 1 的行创建了一个新的`SmallSim`临时对象，该对象很容易被销毁，因为它没有被使用。它对当前正在初始化的对象没有任何影响。要在同一个对象上调用另一个构造函数，你可以这样做：

```
SmallSim::SmallSim(bool ImmediateExecution, bool Report)
: SmallSim() {
    ...
} 
```

（这是 C++11 的一个特性。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T15:56:34.313

C++03 中有两个选项：

*   使用从每个 ctor 调用的 init 函数
*   为所有 ctor 提供初始化列表

在 C++11 中，您可以使用委托 ctor，以便您可以从所有其他 ctor 中调用一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T15:57:06.130

没有正确的方法来做到这一点。如果将初始化委托给函数，则默认初始化数据一次，然后分配值。如果您想从初始化列表构造中受益，那么您必须重复自己。偏好不同。

幸运的是，C++11 允许委托构造函数，请参见[此处](http://www2.research.att.com/~bs/C++0xFAQ.html#delegating-ctor)。

C++11 还允许在声明点进行初始化，这可能会有所帮助：

```
struct Foo {
  int i{0};
  double x{0.}:
}; 
```

在这里，构造函数不必对`i`or做任何事情`x`，除非他们想改变值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:43:37.083

正如@juanchopanza 所提到的，没有“正确”或“完美”的方式来处理构造函数，有几种方法可以分配一个对象，并初始化它的字段/属性。

我不建议一个构造函数调用另一个构造函数，在同一个类上，它可能会一团糟。

抱歉，我没有很好地理解您的示例，我将使用一个简单的示例。假设有一家为旅行推销员准备的商务酒店，里面有一家自动化餐厅。

有一些机器接单，一些食物准备好了，如咖啡、面包或蛋糕、果汁，而其他食物如华夫饼、鸡蛋，则需要时间准备。

顾客可以到达餐厅去机器，然后按一些按钮来点菜。他（她）可能会在等待其他食物时要求提供一些已经准备好的食物，例如咖啡。他也可以拿一个空盘子，等着，一起上菜。

他可以稍后以相同的价格返回，以获取更多的任何东西。

这个例子将定义一个代表接受订单的机器的类。

请忽略次要语法、错误和错误，并检查这个想法以处理构造函数和字段初始化。

* * *

```
// note: good idea to add an empty value to enumerations:

enum BeveragesEnum {
  none,
  water,
  orangejuice,
  milk,
  coffe,
  cocoa
}; // enum BeveragesEnum

enum BreadsEnum {
  none,
  donut,
  bagel,
  cherrypie,
  applepie,
  cake
}; // enum BreadsEnum

enum FoodEnum {
  none,
  ScrambledEggs,
  OverEggs,
  Chicken,
  Waffles,
  Pancakes,
  Beef
}; // enum FoodEnum

class AutomatedCafeteriaClass
  protected: 
    BeveragesEnum Beverage;
    BreadsEnum Bread;
    FoodEnum Food;

    public:
      /* constructor*/ AutomatedCafeteriaClass();
      /* destructor*/ ~AutomatedCafeteriaClass();

    public:
      void quickGiveMeCoffe();
      void wantCoffeAndBread
        (
          BreadsEnum aBread
        );
      void onlyBeverage(BeveragesEnum aBeverage);
      void BeverageBreadFirstFoodLater
        (
          BeveragesEnum aBeverage;
          BreadsEnum aBread;
          FoodEnum aFood;
        );
      void waitForEverything
        (
          BeveragesEnum aBeverage;
          BreadsEnum aBread;
          FoodEnum aFood;
        );
      void wantFood
        (
          FoodEnum aFood;
        );

    public:
      void prepare();
}; // class AutomatedCafeteriaClass

/* constructor*/ AutomatedCafeteriaClass::AutomatedCafeteriaClass()
{
  // first assign empty values
  this.Beverage = BeveragesEnum.none;
  this.Bread    = BreadsEnum.none;
  this.Food     = FoodsEnum.none;
} // constructor AutomatedCafeteriaClass

/* destructor*/ AutomatedCafeteriaClass::~AutomatedCafeteriaClass()
{
  // clear by assigning empty values
  this.Beverage = BeveragesEnum.none;
  this.Bread    = BreadsEnum.none;
  this.Food     = FoodsEnum.none;
} // constructor AutomatedCafeteriaClass

void AutomatedCafeteriaClass::quickGiveMeCoffe()
{
  this.Beverage = BeveragesEnum.Coffe;
  prepare();
}

void AutomatedCafeteriaClass::wantCoffeAndBread
(
BreadsEnum aBread
)
{
  this.Beverage = BeveragesEnum.Coffe;
  this.Bread    = aBread;
  prepare();
}

void AutomatedCafeteriaClass::onlyBeverage(BeveragesEnum aBeverage)
{
  this.Beverage = aBeverage;
  prepare();
}

void AutomatedCafeteriaClass::BeverageBreadFirstFoodLater
(
BeveragesEnum aBeverage;
BreadsEnum aBread;
FoodEnum aFood;
)
{
  this.Beverage = aBeverage;
  this.Bread    = aBread;
  this.Food     = aFood;
  prepare();
}

void AutomatedCafeteriaClass::waitForEverything
(
  BeveragesEnum aBeverage;
  BreadsEnum aBread;
  FoodEnum aFood;
)
{
  this.Beverage = aBeverage;
  this.Bread    = aBread;
  this.Food     = aFood;
  prepare();
}

void AutomatedCafeteriaClass::wantFood
(
  FoodEnum aFood;
)
{
  this.Food     = aFood;
  prepare();
}

void AutomatedCafeteriaClass::prepare();
{
  // prepare the food
} 
```

* * *

请注意，所有这些函数，不是直接构造函数，而是像构造函数一样初始化字段，也称为“postconstructors”或“initialiazers”。

也可以将所有这些函数转换为真正的构造函数，但是可能会有些混乱，所以每个函数都有自己的标识符更容易。

干杯。

# android - 无法使用 startService 从活动中启动服务

> ID：10417322
> 
> 赞同：0
> 
> 时间：2012-05-02T15:54:02.453
> 
> 标签：android

所有教程都告诉我这样做：

```
startService(new Intent(this, MyService.class)); 
```

但是没有构造函数接受 Activity、Class，所以我得到语法错误

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

我正在尝试以这种方式生成服务，

```
startService(new Intent(getApplicationContext(), MyService.class)); 
```

但我的服务永远不会执行。

```
public class MyService extends IntentService {                                                                                                                                                                     

    public MyService() {                                                                                                                                                                                           
        super("MyService");                                                                                                                                                                                        
    }                                                                                                                                                                                                                  

    @Override                                                                                                                                                                                                          
    protected void onHandleIntent(Intent intent) {                                                                                                                                                                     
        //do stuff                                                                                                                                                                                                     
    }                                                                                                                                                                                                                  

} 
```

我怎样才能产生服务？

答案：我的 android manifest 没有特定的包

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:58:59.717

**此处添加的实际问题（如评论中所示）：**

该服务位于不同的包中，因此在清单中它必须是完全合格的，例如`<service android:name="actual.package.of.MyService"/>`

**老答案：**

1.  如果您尝试在内部类中启动服务，则不应编写：

    ```
    startService(new Intent(this, MyService.class)); 
    ```

    但：

    ```
    startService(new Intent(ActivityName.this, MyService.class)); 
    ```

2.  确保您的服务出现在清单中。

3.  在内部添加调试打印`onHandleIntent`以查看它是否启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:59:51.030

服务不是可见的

可能您尚未在清单文件中声明该服务。

我不认为代码有任何问题。覆盖 onstartCommand 和 oncreate 方法，只需放置一条日志语句并检查 logcat

# php - Tumblr API 文件获取内容

> ID：10417324
> 
> 赞同：0
> 
> 时间：2012-05-02T15:54:09.820
> 
> 标签：php, api, file-get-contents, tumblr

我正在尝试使用 Tumblr API，我相信它的 JSON。我正在尝试使用 Php 在下面的 URL 中获取“posts-total”并将其回显。我该怎么做？

[http://example.tumblr.com/api/read/json?num=0](http://example.tumblr.com/api/read/json?num=0)

谢谢

```
Update: 
```

我试图使用

```
$result = json_decode(file_get_contents('http://example.tumblr.com/api/read/json?num=0'));
$print_r($result); 
echo $result[1]; 
```

我收到 500 错误。当我试图回显 $result 时，我什么也得不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:25:51.670

我遇到了类似的问题，并认为我解决了。

```
var tumblr_api_read = {"tumblelog":{"title":"Ex-Sample","description":"A sample document used to provide examples of the various [and <i>varying<\/i>] HTML tags Tumblr puts out. Quote, specifically, has a lot of variants.","name":"example","timezone":"US\/Eastern","cname":false,"feeds":[]},"posts-start":0,"posts-total":"20","posts-type":false,"posts":[]}; 
```

看起来被发回的 json 有利于 javascript，而不是纯 json。因此 json_decode 函数在尝试解析它时遇到问题。看来您可以将 debug=1 参数添加到 url 并接收 PHP 可以处理的 json 字符串。

```
$result = json_decode(file_get_contents('http://example.tumblr.com/api/read/json?num=0&debug=1'));
$print_r($result); 
echo $result[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:06:11.227

简单的php-

```
$result = json_decode(file_get_contents('http://example.tumblr.com/api/read/json?num=0'));
print_r($result); //will show contents return in an araay format
echo $result[1]; //or whatever the element is 
```

# wcf - 正确映射的 Unity Exception 解析类型。为什么？

> ID：10417326
> 
> 赞同：1
> 
> 时间：2012-05-02T15:54:15.357
> 
> 标签：wcf, interface, unity-container, resolve

我在尝试使用 Unity 实现示例 WCF 依赖注入时遇到此错误。

```
Resolution of the dependency failed, type = "SampleServiceUsingUnity.ExampleService", name = "(none)".
Exception occurred while: while resolving.
Exception is: InvalidOperationException - The current type,    ExampleServiceUsingUnity.IExampleManager, is an interface and cannot be constructed. Are you missing a type mapping?
-----------------------------------------------
At the time of the exception, the container was:
Resolving SampleServiceUsingUnity.ExampleService,(none)
Resolving parameter "exampleManager" of constructor     SampleServiceUsingUnity.ExampleService(SampleServiceUsingUnity.IExampleManager exampleManager)
Resolving SampleServiceUsingUnity.IExampleManager,(none) 
```

问题是，我什至尝试显式映射类型......当我调试代码时，我会转到即时窗口并查看注册。见下文：

```
**DependencyFactory.Container.Registrations.ToList()[2]**

{Microsoft.Practices.Unity.ContainerRegistration}
buildKey: {Build Key[SampleServiceUsingUnity.IExampleRepository, null]}
LifetimeManager: {Microsoft.Practices.Unity.ContainerControlledLifetimeManager}
LifetimeManagerType: {Name = "ContainerControlledLifetimeManager" FullName = "Microsoft.Practices.Unity.ContainerControlledLifetimeManager"}
MappedToType: {Name = "ExampleRepository" FullName = "SampleServiceUsingUnity.ExampleRepository"}
Name: null
RegisteredType: {Name = "IExampleRepository" FullName = "SampleServiceUsingUnity.IExampleRepository"} 
```

所以映射看起来是正确的，但是当服务尝试使用 Resolve 实例化该接口时，我得到了错误。

代码示例位于：http: [//msdn.microsoft.com/en-us/library/hh323725.aspx](http://msdn.microsoft.com/en-us/library/hh323725.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:38:50.790

例外是关于 IExampleManager，而注册是关于 IExampleRepository。您是否有可能错过了管理器的映射，而是为存储库提供了一个映射？

# python - 通用 Python 模块

> ID：10417335
> 
> 赞同：2
> 
> 时间：2012-05-02T15:54:41.293
> 
> 标签：python, module

我看到以前有人问过这个问题，但我仍在努力解决使用 python 模块的问题。我的应用程序有一个非常基本的结构：

```
app/
   __init__.py
   driver.py
   dbloader/
     __init__.py
     loader.py 
```

两个`__init__.py`文件都是空的。`driver.py`只有一个类 Driver() 并且`loader.py`只有一个类 Loader()

所以，要测试这个设置，`cd`到 app/ 目录里面。从这里我开始一个 python shell。然后我尝试：

`import dbloader`哪个有效（即没有错误）。但是，我已经尝试了所有排列以在内部实例化 Loader()`loader.py`无济于事。我尝试过的一些是：

```
from dbloader import loader
from dbloader.loader import Loader 
```

我也试过

只导入 dbloader 然后尝试实例化如下：

```
import dbloader
l = dbloader.Loader() 
```

一切都无济于事。我相信在其他地方读到当前目录和子目录在执行 python shell 时会自动包含在 pythonpath 中（这是真的吗？）

无论如何，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:05:43.647

`dbloader`本身没有对`Loader`类的任何引用。不管你怎么做，你都需要通过`loader`命名空间。所以，两种可能的方式：

```
from dbloader import loader
l = loader.Loader() 
```

或者

```
from dbloader.loader import Loader
l = Loader() 
```

它有助于考虑命名空间，而不是模块或类。`Loader`位于`dbloader.loader`命名空间中，并且要访问该类，您需要将类本身或包含它的模块导入当前命名空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:05:23.030

`import X`添加`X`到您的命名空间。

`import dbloader`- 这添加了[模块](http://docs.python.org/tutorial/modules.html) `dbloader`。你会和你一起上课`dbloader.loader.Loader`

`from dbloader import loader`- 这会将模块添加`loader`到您的命名空间。您可以使用`loader.Loader`.

`from dbloader.loader import Loader`- 这会将类导入`Loader`您的命名空间。你只需要`Loader()`在这里使用。

尝试在 python shell 中使用`dir`and `help`，你应该能够更好地理解结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:20:30.433

除了使用 Daenyth 和 Daniel Roseman 提出的解决方案外，如果你在 dbloader 中 from-import Loader ，你可以`Loader`直接访问 from ：`dbloader`

```
# app/dbloader/__init__.py
from dbloader.loader import Loader 
```

然后，在您的外壳中：

```
import dbloader
l = dbloader.Loader()

# or...

from dbloader import Loader
l2 = Loader() 
```

这是清理命名空间的一个很好的解决方案。

# eclipse - 当开发人员在他们的项目构建路径中使用不同版本的 JBoss 时，如何最好地处理 Git 中的 .classpath 文件？

> ID：10417337
> 
> 赞同：6
> 
> 时间：2012-05-02T15:54:45.593
> 
> 标签：eclipse, git, jboss, classpath, egit

我是 Git 新手，我很难弄清楚这一点。

我们在 Eclipse 中使用 JBoss Application Server 5.1。有些人已经下载了 JBoss Tools Eclipse 插件，因此他们可以将 JBoss 5.1 运行时服务器作为“JBoss AS 5.1”添加到他们的 Eclipse 工作区。这会产生如下所示的类路径行：

```
<classpathentry kind="con" path="org.eclipse.jst.server.core.container/org.jboss.ide.eclipse.as.core.server.runtime.runtimeTarget/JBoss 5.1 Runtime"/> 
```

其他人看不到下载和安装 JBoss Tools 插件的价值，所以他们只是使用 Eclipse 内置的 JBoss 服务器适配器，它只升级到 JBoss v.50。他们有一个类路径行，如下所示：

```
<classpathentry kind="con" path="org.eclipse.jst.server.core.container/org.eclipse.jst.server.generic.runtimeTarget/JBoss v5.0"/> 
```

我不想将 .classpath 添加到我的 .gitignore 文件中，因为：

1.  这些文件已经被推送到我的原点，删除它们是一个非常痛苦的过程，我过去曾尝试过但未能理解。
2.  我希望正在设置新工作空间的人能够从 Git 导入项目并立即开始工作。

到目前为止，我们只是尝试了每次修改工作目录中的 .classpath 文件，但从未提交过。这很烦人，不仅因为它们不断出现在我们的 git 状态中，而且有时它们不允许我们在 Egit 中合并或切换分支——抱怨未提交的更改。

我已经在互联网上阅读了有关使用类路径变量的信息，但我似乎根本找不到 JBoss 库的正确路径。我上面列出的类路径行似乎指向 Eclipse/plugins 目录中的某个地方？但我找不到它。我还尝试将一些变量指向我的 C:\jboss-5.1.0.GA\ 目录，但这似乎也没有任何作用。

有没有办法将 .classpath 文件保留在存储库中，因为它现在处于当前状态，以便克隆存储库的新用户仍然可以获得它们，但是然后忽略任何开发人员对文件所做的所有未来更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-16T17:54:28.100

[来自Pagebakers](http://blog.pagebakers.nl/2009/01/29/git-ignoring-changes-in-tracked-files/)和[git](https://www.kernel.org/pub/software/scm/git/docs/)的简单的、每个开发人员一次的解决方案是

```
git update-index --assume-unchanged <file> 
```

要撤消它，只需使用

```
git update-index --no-assume-unchanged <file> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T05:59:18.967

另一个答案可以是使用[内容过滤器驱动程序](https://stackoverflow.com/questions/6031800/how-to-keep-different-content-of-one-file-in-my-local-and-github-repository/6031981#6031981)，即您在`.gitattribute`文件中声明的脚本。

![过滤器驱动程序](../Images/bea061bd930b0d2868c01399c0b067d3.png)

在签出您的存储库时，涂抹脚本将负责分析本地环境，检测 JBoss 并`classpathentry`相应地进行调整。
这样，您可以保留该文件中最有用的内容已经版本化，同时适应少数`classpathentry`不正确的特殊情况。

# iphone - 在核心数据后台填充期间处理应用程序终止

> ID：10417342
> 
> 赞同：2
> 
> 时间：2012-05-02T15:55:18.353
> 
> 标签：iphone, objective-c, ios, ipad, core-data

我已经查看了有关在后台执行核心数据保存的问题的答案，但我发现没有一个直接解决了以下情况：

我已经设置了核心数据，这样当我的应用程序第一次启动时，核心数据会从 plist 中填充，然后保存到持久存储中（全部在后台线程上）。在此期间，应用程序会显示一个带有动画活动指示器的“请稍候”弹出窗口。这似乎工作得很好，并且通常即使用户在填充期间点击主页按钮，应用程序也会完成填充，将应用程序推到后台。但是，该应用程序*可能*会在此人口完成之前完全终止（我已经成功地通过点击主页，双击主页并从多任务托盘中删除应用程序*非常非常快*）。在这种情况下，应用程序退出而不将数据保存到商店。在应用程序的下一次启动时，应用程序识别出商店已经存在，因此它不会填充，从而给用户留下一个完全空的数据库。所以问题是/是：

*   如果人口尚未完成，有没有办法在应用程序终止时完全删除商店？我尝试执行此操作，`-applicationWillTerminate:`但似乎无法正确识别应用程序是否正在填充。

*   或者，是否有更好的方法来识别商店何时需要人口？例如，我可以在启动时确定商店是否是空的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:59:42.983

我建议您使用这种通用方法来解决您的问题：

1.  在填充阶段结束时，将标志写入您的核心数据库或应用程序默认值（NSUserDefaults）；

2.  （现在，当应用程序在完成填充阶段之前终止时，将不会存储标志）；

3.  在启动时，检查该标志；如果它在那里，你就知道填充阶段已经完成，否则你就知道出了点问题。

当然，在填充阶段完成*后*和存储标志*之前应用程序终止的可能性很小；*除了这个事件不太可能发生之外，无论如何，如果发生这种情况，它只会迫使您的应用程序在下次启动时再次填充数据，但不会导致任何数据一致性问题。

更具体的方法是基于使用`beginBackgroundTaskWithExpirationHandler:`

> 您的应用委托的`applicationDidEnterBackground:`方法有大约 5 秒的时间来完成任何任务并返回。在实践中，此方法应尽快返回。如果该方法在时间用完之前没有返回，您的应用程序将被终止并从内存中清除。如果您仍然需要更多时间来执行任务，请调用该`beginBackgroundTaskWithExpirationHandler:`方法以请求后台执行时间，然后在辅助线程中启动任何长时间运行的任务。无论您是否启动任何后台任务，该`applicationDidEnterBackground:`方法仍必须在 5 秒内退出。

这将使您有更多时间在应用程序在任何“非病态”情况下终止之前完成填充阶段（即，如果用户像您在测试中所做的那样杀死应用程序，它将不起作用，并且不会安全，以防应用程序本身出现问题并且在后台线程执行填充时崩溃）。

希望这可以帮助。

# c# - 关于 log4net 1.2.11 冲突的另一个问题

> ID：10417344
> 
> 赞同：14
> 
> 时间：2012-05-02T15:55:40.317
> 
> 标签：c#, log4net, gac

在过去的 2 个小时里，我一直在研究 SO 上的这些问题，但似乎没有任何效果。

我有一个通过 NuGet 使用 log4net 1.2.11 的解决方案。它在我运行 Windows 7 的 32 位开发工作站上运行良好。它不能在我的 64 位 Windows 2008 R2 测试系统上运行。我得到的错误是：

> 未处理的异常：System.IO.FileLoadException：无法加载文件或程序集“log4net，版本=1.2.11.0，Culture=neutral，PublicKeyToken=669e0ddf0bb1aa2a”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。

我正在查看我的测试系统上的应用程序目录。该`log4net.dll`文件的版本为 1.2.11。

GAC 中的版本是 1.2.10 版。我已将其删除。我的开发服务器上有一个版本又是别的东西；我也删除了它。我已经重建；我已经重新部署。我已经添加了

```
<dependentAssembly>
    <assemblyIdentity name="log4net" publicKeyToken="669E0DDF0BB1AA2A" culture="neutral"/>
    <bindingRedirect oldVersion="0.0.0.0-1.2.10.0" newVersion="1.2.11.0"/>
</dependentAssembly> 
```

到我的配置文件。似乎没有什么不同。我的部署项目显示了正在部署的 log4net 程序集的正确版本和签名。

我不知道我还能做什么，但我对日志库阻止我的应用程序运行感到非常沮丧。

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T01:04:38.030

我在通过 NuGet 升级 log4net 后遇到了这个问题，却发现新版本是用不同的密钥签名的。叹。出于某种原因，这只有在我部署到实时服务器时才变得明显，它并没有在开发中出现。

[您可以从apache log4net 站点](http://logging.apache.org/log4net/download_log4net.cgi)获取“oldkey”版本。只需从项目文件中删除您的引用并引用 oldkey 版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T00:00:38.623

这是我的解决方案：我从 log4net 更改为 Common.Logging 到 NLog。它没有花费太多的努力，我认为它不应该是必要的，但它奏效了，而且效果很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T04:18:55.137

我们遇到了完全相同的问题。代码库深处的一个依赖项是将 1.2.10 放入 GAC，而 NuGet 正在尝试使用 1.2.11。我们放弃了将 NuGet 用于 log4net，太让人头疼了。似乎 NuGet 有点全有或全无。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-16T20:30:28.127

有时您必须真正深入了解项目依赖项。在我的例子中，它是实际服务堆栈项目的引用，它引用了不同版本的 Log4Net。

为了修复它，我将最新版本的 Log4Net 从 nuget 添加到 ServiceStack 项目。我还确保直接引用使用的是最新版本，这解决了这个问题。

您可以使用依赖工具快速查找哪些引用使用了冲突的版本，但如果您没有此工具，您可以自行编译项目的引用并查看将哪个版本的 log4net.dll 复制到目录中。

# java - 将 Eclipse 附加到远程进程

> ID：10417348
> 
> 赞同：3
> 
> 时间：2012-05-02T15:56:04.407
> 
> 标签：java, eclipse, ide, intellij-idea

在 Intellij Idea 中，可以让它监听远程进程，执行以下操作：

运行 -> 编辑配置 -> 添加新配置 -> 远程。

我想知道是否可以在 Eclipse IDE 中做同样的事情......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:57:56.540

可以在此处附加远程调试过程是[process](http://javarevisited.blogspot.com/2011/02/how-to-setup-remote-debugging-in.html)。您的问题不确定您希望在应用程序中使用哪种情况，但您可以尝试将此作为起点（如果不是出于调试目的）。

# php - 在 php 自提交表单中显示加载消息

> ID：10417352
> 
> 赞同：2
> 
> 时间：2012-05-02T15:56:17.893
> 
> 标签：php, jquery, form-submit

我有任何上传视频的表格，这使用 PHP / MySQL 并提交**`PHP_SELF`**操作。如果上传视频 = TRUE，我打印视频成功，如果上传视频 = FALSE，我打印错误消息。

现在我需要在单击提交按钮后显示显示加载消息或加载 gif 动画器（使用 jQuery）并在显示 TRUE/FALSE 上传消息后隐藏加载消息。有什么方法可以创建这个吗？

我的表格：

```
<?PHP
if (isset($_POST['submit']) && $_POST['submit'] == 'uploadvideo')
     {
      //CHECK TRUE OR FALSE .....
     }
if (isset($uploaded) && $uploaded == TRUE){?>
     <div class="successbox">success upload!!!</div>
<?PHP } 
if (isset($uploaded) && $uploaded == FALSE)
    {?>
     <div class="errorbox">error upload!!!</div>
<?PHP } ?>

    <form action="<?PHP echo URL . '/video.php?id=' . int($_GET['id']);?>" method="POST" enctype="multipart/form-data">
      <table width="100%" cellpadding="5" cellspacing="0" border="0">
      <input type="file" size="40" name="video_file" maxlength="50">
      <input type="Submit" name="submit" value="uploadvideo">
      </table>
      </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:55:09.880

最简单最快捷的解决方案是在表单中添加一个隐藏`<div>`元素，其中包含加载消息或动画 gif，当您单击提交按钮时，您会`<div>`使用 jQuery 显示标签：

```
<form action="..." method="POST" enctype="multipart/form-data" onsubmit="$('#loading').show();">
  <div id="loading" style="display:none">Uploading...</div>

  <table width="100%" cellpadding="5" cellspacing="0" border="0">
    <input type="file" size="40" name="video_file" maxlength="50">
    <input type="Submit" name="submit" value="uploadvideo">
  </table>
</form> 
```

如果您想要更花哨的东西（例如实际的进度条），则需要研究 Flash 解决方案（例如[swfupload](http://www.swfupload.org/)）。

从 PHP 5.4 开始，您还可以在 _SESSION 中找到上传进度（[此处有更多详细信息](http://php.net/manual/en/session.upload-progress.php)），但由于 PHP 5.4 刚刚发布，您不会找到很多已经拥有此功能的虚拟主机。

# ios - 如何处理多用户数据库

> ID：10417353
> 
> 赞同：12
> 
> 时间：2012-05-02T15:56:19.843
> 
> 标签：ios, database, core-data, persistence, user-data

我的应用程序和很多应用程序一样——它有一个登录屏幕，用户可以在其中输入用户名和密码，还有一个登录按钮.

我还有一个退出按钮来启用切换用户。这不会发生很多，但它仍然是必要的）。

现在，如果其他用户登录，我需要获取他的特定数据。但是我该怎么做呢？
我不想在用户退出时删除用户的数据库，即使其他用户从设备登录，我也想保存它。

我唯一能想到的就是为我通过 Core Data 保存的每个实体添加一个“ownerId”属性，并在我获取对象时使用这个属性作为谓词。
但这似乎太混乱了。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-02T16:02:01.300

iOS 并没有真正的多用户概念，因此“登录”的范围仅限于您的应用程序。最简单的解决方案是为每个用户的持久存储使用不同的文件名。这仅在一个地方派生（无论您在哪里设置核心数据堆栈），因此实现起来非常简单。

在标准核心数据模板中，持久存储位置是`persistentStoreCoordinator`在应用程序委托的方法中设置的。就是这一行：

```
 NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"coreDataTemplate.sqlite"]; 
```

这基本上意味着数据将存储在文档目录中的 sqlite 数据库文件中，该文件将被称为`coreDataTemplate.sqlite`.

假设在执行此代码之前，您已经让用户登录，并根据一些列表检查了他们的用户 ID，并为他们提供了一个唯一标识符。进一步假设标识符已存储在用户默认值中。

将上面的行更改为：

```
NSString *userIdentifier = [[NSUserDefaults standardUserDefaults] stringForKey:@"loggedOnUserID"];     
NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:[NSString stringWithFormat:@"%@_coreDataTemplate.sqlite",userIdentifier]]; 
```

现在，这将为您的用户提供一个唯一的文件名。

如果更改用户，则需要保存当前托管对象上下文，然后将持久存储协调器和应用委托的托管对象上下文设置回 nil。当他们被重新访问时，它将在新的用户 ID 下。

# c# - 无法对我的 log4net 包装类进行 nunit 测试

> ID：10417354
> 
> 赞同：2
> 
> 时间：2012-05-02T15:56:22.830
> 
> 标签：c#, unit-testing, tdd, nunit, log4net

我为 log4net 编写了一个包装类。此包装类与 asp.net Web 应用程序一起正常工作。现在我正在尝试使用 NUNIT 测试我的包装类方法。在包装类项目中，我将 log4net DLL 的“复制本地”设置为 True。NUNIT 项目和包装类都使用 log4net 1.2.10.0。

这个包装类可以在我单独的 asp.net web 项目中正常工作，但有些方法不适用于我的 nunit 测试项目。

当我尝试运行基本测试时，出现以下异常

> System.BadImageFormatException：无法加载文件或程序集“log4net，版本=1.2.10.0，文化=中性，PublicKeyToken=692fbea5521e1304”或其依赖项之一。试图加载格式不正确的程序。

我在 Resharper for VS2010 中运行这些测试

**更新**

刚刚用 log4net.dll 版本 1.2.11.0 更新了我的包装器和测试项目，一切都开始神奇地工作了！！！我不知道这个最新版本如何解决 1.2.10.0 一直失败的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:02:56.197

您似乎在 64 位系统上加载 32 位 DLL。您应构建针对 32 位架构的测试 DLL。

现有问题中描述了过程： [Using a 32 bit dll on a 64 bit machine](https://stackoverflow.com/questions/5711748/using-a-32-bit-dll-on-a-64-bit-machine)

# ruby-on-rails - 从另一个控制器重新加载 rails 视图

> ID：10417355
> 
> 赞同：0
> 
> 时间：2012-05-02T15:56:27.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

假设我的 rails 应用程序中有以下视图

```
<% if is_subscriber? %>
<%= render :partial => 'subscriber_page' %>
<% else %>
<%= render :partial => 'payment_form' %>
<% end %> 
```

付款表单向控制器显示页面提交请求后请求。在我的路线文件中，我有：

```
 match ':users(/:id)', :to => 'users#submit_payment', :via => :post 
```

我的提交付款助手方法是：

```
def submit_payment
    current_user.is_subscriber = true
    show
end 
```

但是，当我运行它时，我得到一个`submit_payment`模板丢失错误。如何确保在辅助方法完成后简单地重新加载用户显示页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:09:49.493

您似乎正在尝试重定向到显示页面。尝试这个：

```
redirect_to user_path(@user) # Note you need to send the show page an :id param 
```

如果您只想渲染特定的部分，请执行以下操作：

```
render :partial => 'show' 
```

但是，如果您想要更无缝的东西，例如提交表单 VIA Ajax，它会返回一个部分，然后在成功时将其转储到等待的 DIV 或其他东西，您也可以这样做，尽管有点复杂。

# javascript - 画布幻灯片动画

> ID：10417357
> 
> 赞同：1
> 
> 时间：2012-05-02T15:56:32.420
> 
> 标签：javascript, animation, html5-canvas

下面是我在网上找到的[益智游戏](http://www.sitepoint.com/image-manipulation-with-html5-canvas-a-sliding-puzzle-2/#fbid=iPtXjVMYhCA)代码。我稍微修改了代码以使其与 jQuery 一起使用，并且一切正常。

我希望能够为单击的图块设置动画，以便它滑动到空图块而不是立即被绘制到那里。

我相当确定它是我需要更改的绘图功能，但我不确定如何更改。我希望你们能引导我朝着正确的方向前进，或者给我一些提示。

提前感谢您花时间阅读我的问题。

```
var context = puzzle.getContext('2d');

var img = new Image();
img.src = 'images/images.jpg';
img.addEventListener('load', drawTiles, false);

var puzzle = $('#puzzle')[0];

var scale = $('#scale')[0];
var boardSize = puzzle.width;
var tileCount = scale.value;

var tileSize = boardSize / tileCount;

var clickLoc = new Object;
clickLoc.x = 0;
clickLoc.y = 0;

var emptyLoc = new Object;
emptyLoc.x = 0;
emptyLoc.y = 0;

var solved = false;

var boardParts = new Object;
setBoard();

scale.onchange = function() {
  tileCount = this.value;
  tileSize = boardSize / tileCount;
  setBoard();
  drawTiles();
};

puzzle.onmousemove = function(e) {
  clickLoc.x = Math.floor((e.pageX - this.offsetLeft) / tileSize);
  clickLoc.y = Math.floor((e.pageY - this.offsetTop) / tileSize);
};

puzzle.onclick = function() {
  if (distance(clickLoc.x, clickLoc.y, emptyLoc.x, emptyLoc.y) == 1) {
    slideTile(emptyLoc, clickLoc);
    drawTiles();
  }
  if (solved) {
    setTimeout(function() {alert("You solved it!");}, 500);
  }
};

function setBoard() {
  boardParts = new Array(tileCount);
  for (var i = 0; i < tileCount; ++i) {
    boardParts[i] = new Array(tileCount);
    for (var j = 0; j < tileCount; ++j) {
      boardParts[i][j] = new Object;
      boardParts[i][j].x = (tileCount - 1) - i;
      boardParts[i][j].y = (tileCount - 1) - j;
    }
  }
  emptyLoc.x = boardParts[tileCount - 1][tileCount - 1].x;
  emptyLoc.y = boardParts[tileCount - 1][tileCount - 1].y;
  solved = false;
}

function drawTiles() {
  context.clearRect ( 0 , 0 , boardSize , boardSize );
  for (var i = 0; i < tileCount; ++i) {
    for (var j = 0; j < tileCount; ++j) {
      var x = boardParts[i][j].x;
      var y = boardParts[i][j].y;
      if(i != emptyLoc.x || j != emptyLoc.y || solved == true) {
        context.drawImage(img, x * tileSize, y * tileSize, tileSize, tileSize,
            i * tileSize, j * tileSize, tileSize, tileSize);
      }
    }
  }
}

function distance(x1, y1, x2, y2) {
  return Math.abs(x1 - x2) + Math.abs(y1 - y2);
}

function slideTile(toLoc, fromLoc) {
  if (!solved) {
boardParts[toLoc.x][toLoc.y].x = boardParts[fromLoc.x][fromLoc.y].x;
boardParts[toLoc.x][toLoc.y].y = boardParts[fromLoc.x][fromLoc.y].y;
boardParts[fromLoc.x][fromLoc.y].x = tileCount -1;
boardParts[fromLoc.x][fromLoc.y].y = tileCount -1;
toLoc.x = fromLoc.x;
toLoc.y = fromLoc.y;
checkSolved();
    }
}

function checkSolved() {
  var flag = true;
  for (var i = 0; i < tileCount; ++i) {
    for (var j = 0; j < tileCount; ++j) {
      if (boardParts[i][j].x != i || boardParts[i][j].y != j) {
        flag = false;
      }
    }
  }
  solved = flag;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:31:48.040

首先，您需要创建一个`update`由`setTimeout`or调用`setInterval`并可以访问您的`puzzle`对象的函数。这将允许您控制每秒绘制的帧数，这将决定您的动画看起来有多快。此`update`方法将要调用`drawTiles`并且可能是修改后的`slideTile`.

接下来，您需要进行修改`slideTile`以缓慢移动磁贴，而不是快速移动它。您可能还希望有一个标志来防止用户在一个瓷砖滑动时点击另一个瓷砖。

[这](https://developer.mozilla.org/en/Canvas_tutorial/Basic_animations)是基本画布动画的一个很好的起点。

# eclipse - Eclim 正在减慢从 vim 中打开和写入所有文件的速度

> ID：10417359
> 
> 赞同：1
> 
> 时间：2012-05-02T15:56:51.567
> 
> 标签：eclipse, vim, eclim

Eclim 正在减慢 vim 中所有文件的打开、写入和关闭速度。我在 Cygwin 中使用带头的 Eclipse 和控制台 VIM。仅打开一个 .vimrc 文件需要 5 秒。写它也需要5秒。关闭它不需要时间，如果它已经写好了。

也许我需要告诉 eclim/eclipse 只“弄乱” .java 文件？

# php - 如何更新每行条件匹配的表的第一行

> ID：10417361
> 
> 赞同：0
> 
> 时间：2012-05-02T15:56:54.480
> 
> 标签：php, mysql

嗨，我正在使用更新查询来更新表的第一行，我正在使用条件将行与 product_id 匹配。这是查询

```
UPDATE `product_option` SET `input_value`='$color_a',`input_price`='$color_price_a' WHERE `product_id`='$_REQUEST[pid]' and `input_type`='option' LIMIT 0,1 
```

这是桌子

![在此处输入图像描述](../Images/13328b082a7e26f4f047da001fe50c72.png)

这里 where 条件与 product_id=38 的 7 行匹配，当我无限制地更新它时，它将更新所有具有 product_id=38 的行，但我只想更新第一行。我怎样才能做到这一点。如果有人以前遇到过这个问题，请回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:59:21.057

设置`LIMIT`为升序`1`并按`id`升序排序。像这样：

```
UPDATE `product_option`
SET `input_value`='$color_a',
    `input_price`='$color_price_a'
WHERE `product_id`='$_REQUEST[pid]'
  and `input_type`='option'

ORDER BY `id` ASC

LIMIT 0,1 
```

虽然请注意，您应该**真正**使用准备好的语句来解决这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:01:38.940

您应该定义 FIRST 的含义。然后您可以按此排序并 LIMIT 1 或显式匹配您的 where 子句中的 MIN 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:15:13.950

好的，所以我终于解决了这个问题。更新查询不适用于 LIMIT OFFSETS，例如如果您将 LIMIT 0,1 设置为它将不起作用。它可以在没有 LIMIT 的情况下工作，或者如果您将 LIMIT 放入，那么只有当您必须使用 LIMIT 2 或更多更改多行时才能使用......

就我而言，我只想更新我使用过的特定行

```
<input type="hidden"> 
```

在这个隐藏类型中，我调用了行的值和我想要更新的行，我已经从这个隐藏的输入中调用了值，如下所示

```
"UPDATE `product_option` SET `input_value`='$weight_d',`input_price`='$weight_price_d' WHERE `product_id`='$_REQUEST[pid]' and `input_type`='checkbox' and `input_value`='$_POST[hide_weight_d]' and `input_price`='$_POST[hide_weight_price_d]'" 
```

在此查询中 $_POST[hide_weight_d] 与 $weight_d 的隐藏值相同，因此它与表上的值匹配并更新它。

# ios - 使用擦洗将视频渲染到 iOS 中的 OpenGL 纹理

> ID：10417363
> 
> 赞同：4
> 
> 时间：2012-05-02T15:56:58.733
> 
> 标签：ios, opengl-es

我使用了以下方法[iOS4：如何将视频文件用作OpenGL纹理？](https://stackoverflow.com/questions/5621627/ios4-how-do-i-use-video-file-as-an-opengl-texture)成功在openGL中渲染视频帧。

但是，当您要擦洗（跳转到播放中的某个点）时，此方法似乎会失败，因为它仅按顺序为您提供视频帧。

有谁知道这种行为可以成功实现的方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-21T03:07:26.610

实现此目的的一种简单方法是将视频导出到一系列帧，将每个帧存储为 PNG，然后通过查看特定偏移量的 PNG 来“擦洗”。这使您可以在图像流中进行随机访问，但代价是首先解码整个视频并将所有数据保存在磁盘上。这还涉及在访问每个帧时对其进行解码，这会占用 CPU，但只要您不做太多其他事情，现代 iPhone 和 iPad 就可以处理它。

# c# - 将 CodeFile 转换为 CodeBehind

> ID：10417365
> 
> 赞同：5
> 
> 时间：2012-05-02T15:57:03.747
> 
> 标签：c#, .net, code-behind, page-directives

所以我似乎在将我的 CodeFile 引用到 CodeBehind 时遇到了一些困难。在你问之前，我没有 Visual Studio，而且我不在 Windows 上。该代码托管在我有权访问的 IIS 服务器上。

```
<% @Page Language="C#" Inherits="corn.cheese.pies.CasLogin" CodeFile="anon.cs" %> 
```

此代码完美运行，但是将其更改为：

```
<% @Page Language="C#" Inherits="corn.cheese.pies.CasLogin" CodeBehind="anon.cs" %> 
```

页面返回错误：

```
Parser Error Message: Could not load type 'corn.cheese.pies.CasLogin'. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T16:08:58.190

您确定您了解 CodeFile 和 CodeBehind 之间的区别吗？例如，参见 [CodeFile vs CodeBehind](https://stackoverflow.com/questions/73022/codefile-vs-codebehind)（忽略接受答案，但两个链接都是 dea）或[这篇](http://www.ashchuan.com/blog/2011/03/31/codefile-and-codebehind-in-net-what-the-heck-is-the-difference/)关于差异的文章。

简而言之：

假定一个`CodeBehind`文件被编译成一个程序集，该程序集部署在`bin`您网站的文件夹中。当 ASP.NET 引擎加载您的`aspx`文件时，它使用该`Inherits`指令来尝试查找该类。该`CodeBehind`文件主要用于帮助编译（和工具，例如“查看源代码”），但工作是在编译时完成的。

`CodeFile`文件由 ASP.NET 在运行时根据需要定位和编译。您可以“预编译”您的网站以使用旧模型，如果您不想将源代码部署到每个网站，这很有用。但默认情况下，您`CodeFile`的文件`.cs`是部署到站点的文件，并且类是在 ASP.NET 临时存储文件夹中生成的。（从技术角度来看：`CodeFile`页面是`partial class`定义，只有类的自定义代码隐藏部分实际部署在 C# 文件中；这就是`CodeFile`最初不存在的原因，因为 C# 编译器最初无法执行部分类。）

通过从更改`CodeFile`为`CodeBehind`您告诉 ASP.NET 忽略 C# 文件的存在，并且只在编译的程序集中查找它。反过来，ASP.NET 会告诉您编译的程序集实际上并不包含您告诉它要查找的类。

# html - 在电子邮件中呈现 html 元素

> ID：10417371
> 
> 赞同：0
> 
> 时间：2012-05-02T15:57:20.567
> 
> 标签：html, email, html-email

我正在尝试在电子邮件中呈现 html，即使在搜索了网络之后，我仍然有点困惑.. 基本上我想在电子邮件中说一个带有背景颜色显示的框（div）。我正在使用 php mail() 函数发送电子邮件，并尝试将消息正文设置为字符串，例如：`"<div style='background:black;'>Test</div>"`，但电子邮件不是呈现 html，而是仅显示 html 文本。有没有一种简单的**呈现**方法的HTML？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:02:00.747

我认为您需要在标题中使用它：

$headers .= "内容类型：文本/html\r\n";

此 URL 显示了如何执行此操作：

[http://www.webhostingtalk.com/showthread.php?t=416467](http://www.webhostingtalk.com/showthread.php?t=416467)

（我相信您已经知道这一点 - 您还必须确保您的客户端可以显示 HTML 电子邮件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:04:32.027

您应该首先查看的地方是 php 文档。

[http://php.net/manual/en/function.mail.php#example-3146](http://php.net/manual/en/function.mail.php#example-3146)

他们提供了一个关于如何使用 mail() 函数发送 html 电子邮件的示例。

您可能还想阅读发送 html 电子邮件的最佳实践，因为每个电子邮件客户端都会以不同的方式呈现 html。CSS 支持非常少，我也不推荐使用 div。你真的只想使用最基本的 html 标签，比如`<p>, <a>, <table> and <img />`标签。你所有的css也应该是内联的。

这是css支​​持的一个很好的参考。 [http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

如果您计划发送大量电子邮件，那么您可能需要研究类似[http://mailchimp.com](http://mailchimp.com)的服务，因为邮件功能并不是真正用于处理大量电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:00:23.587

您需要先设置标题，然后才能使用在电子邮件中发送 HTML`mail();`

**例如：**

```
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$headers .= 'From: <email@email.com>' . "\r\n";

mail($to,$subject,$message,$headers); 
```

显然，您需要小心如何使用新发现的 HTML 电子邮件功能，因为并非所有电子邮件客户端都会以相同的方式呈现它（您认为交叉测试浏览器很痛苦）。这里有一个很好的指南-> [http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

这里还有一个很棒的网站，它不仅看起来很棒，而且还为您提供了您需要的所有信息，了解哪些内容可以工作 -> [http://www.emailology.org/](http://www.emailology.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:00:36.710

您必须通过将 Content-type 设置为 text/html 来正确编码您的电子邮件以表明它是 HTML。

有关可靠的背景信息，请参阅[http://en.wikipedia.org/wiki/MIME](http://en.wikipedia.org/wiki/MIME)。

根据您的平台，几乎可以肯定有一个工具集可以简化此操作。例如，在 Microsoft ASP.Net 上，我使用[MvcMailer](http://www.hanselman.com/blog/NuGetPackageOfTheWeek2MvcMailerSendsMailsWithASPNETMVCRazorViewsAndScaffolding.aspx)。如果您指定您的平台，我将提出具体建议。

对于 PHP，这里有一篇关于[发送格式良好的 HTML 电子邮件的好文章](http://css-tricks.com/sending-nice-html-email-with-php/)

```
$to = 'bob@example.com';

$subject = 'Website Change Reqest';

$headers = "From: " . strip_tags($_POST['req-email']) . "\r\n";
$headers .= "Reply-To: ". strip_tags($_POST['req-email']) . "\r\n";
$headers .= "CC: susan@example.com\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

mail($to, $subject, $message, $headers); 
```

# zend-framework - Zend Framework 字母列表，新条目未按字母顺序排列

> ID：10417377
> 
> 赞同：0
> 
> 时间：2012-05-02T15:57:39.047
> 
> 标签：zend-framework

我有一个从数据库中获取的俱乐部列表，然后使用以下代码对它们进行字母排序，并在它们上方添加第一个字母的标题。

```
<?php
$previousLetter = false;
?>
<?php 
$i=1; // have a counter variable
foreach($this->clubs as $clubs) : ?>
    <?php
$firstLetter = substr($clubs->club_name, 0, 1);
if ($firstLetter != $previousLetter) {
if($i==1){
    echo "<div class='left_class'>"; // open left div
}
?>
    <h3 id="club-link-header"><u><?php echo $firstLetter; ?></u></h3>
<?php } ?>
    <a id="club-link" href="<?php echo $this->url(array('controller' => 'club-description', 'action' => 'index', 'club_id' => $clubs->id));?>"><br />
    <?php echo $this->escape($clubs->club_name);?></a>
    <?php $previousLetter = $firstLetter; ?>
<?php 
    if($i==25){
        echo "</div>"; //close left div
        echo "<div class='right_class'>"; // open right div
        }

    if($i==50){
        echo "</div>"; //close right div
}

$i++; // increment the counter variable for each loop
endforeach; 
?> 
```

问题是当我在数据库中添加一个新条目时，它没有按字母顺序排列，它被添加到列表的末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:29:52.347

问题在于[您如何获取数据](http://pastebin.com/XrPMEQD0)：

```
$this->view->clubs = $clubs->fetchAll(); // Fetches the clubs ordered by ID
$select = $clubs->select(); // Does nothing
$select->order('club_name ASC'); // Does nothing 
```

你可以这样做：

```
$this->view->clubs = $clubs->fetchAll(null, 'club_name ASC'); 
```

# regex - 如何在咖啡脚本中设置修饰符？

> ID：10417380
> 
> 赞同：3
> 
> 时间：2012-05-02T15:57:43.607
> 
> 标签：regex, coffeescript

我在coffeescript中有这个heregex试图捕捉网址：

```
regex = /// (
  ((f|ht){1}tp(s)?://)
  [-a-zA-Z0-9@:%_\+.~?&//=]+
  )
/// 
```

但是如何设置全局和忽略大小写标志？我试过这个：

```
 newregex = regex.compile(regex,"gi") 
```

但这也不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:08:28.663

Coffeescript 将您的 heregex 转换为单行正则表达式：

```
//Generated by CoffeeScript 1.3.1
var regex;

regex = /(((f|ht){1}tp(s)?:\/\/)[-a-zA-Z0-9@:%_\+.~?&\/\/=]+)/; 
```

并且 javascripts 正则表达式语法`/regex/mods`是 regex.compile("regex","mods") 的简写，所以你不需要编译它。您可以将修饰符添加到 heregex：

```
regex = /// (
  ((f|ht){1}tp(s)?://)
  [-a-zA-Z0-9@:%_\+.~?&//=]+
  )
///gi 
```

# javascript - 使用 url 参数请求时，Android 应用程序请求 url 两次

> ID：10417382
> 
> 赞同：1
> 
> 时间：2012-05-02T15:57:48.583
> 
> 标签：javascript, android, mobile, webview

我正在编写一个加载webview的android应用程序，（bootstrap）中的javascript立即将位置（window.location ='blah'）更改为远程文件（application_loader），然后加载构成应用程序的javascript和其他资源从远程位置。

我遇到的问题是，当引导文件加载 application_loader 文件时，我看到请求在我的服务器中发出两次，一次是 /application_loader.html，一次是 /application_loader.html?device=android。第二个是我正在加载的实际 url，那么它怎么会在没有 url 参数的情况下请求资源呢？

# android - 将约会添加到 android 日历

> ID：10417386
> 
> 赞同：1
> 
> 时间：2012-05-02T15:58:02.170
> 
> 标签：android, android-intent

我需要在 android 手机的日历中添加约会。我正在使用以下代码在我的 android 手机上添加和预约本机日历。Android API 级别为 7

```
Intent nativeIntent = new Intent(Intent.ACTION_EDIT);
nativeIntent.setType("vnd.android.cursor.item/event");

nativeIntent.putExtra("beginTime", getDateInMs("05/14/2012"+" "+"05:00 AM"));           
nativeIntent.putExtra("rrule", "FREQ=YEARLY");
nativeIntent.putExtra("endTime", getDateInMs("05/22/2012"+" "+"05:00 AM"));
nativeIntent.putExtra("title", "Test Appt"); 

((DroidGap)myactivity).startActivityForResult(this, nativeIntent, NATIVE_ACTIVITY_REQ_CODE);

private Long getDateInMs(String stringDateTime) throws ParseException {
    DateFormat formatter = new SimpleDateFormat("MM/dd/yyyy hh:mm a");
    Date date = formatter.parse(stringDateTime);
    long dateInLong = date.getTime();
    return dateInLong;
} 
```

这将打开日历，但结束日期显示为`Mon, May 14, 2012 6:00 AM`。开始日期和时间显示正确。如果我做得正确，你能告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:02:01.680

查看使用日历内容提供程序的开发人员文档[http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-insert](http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-insert)

# c# - 我们如何使用序列化的私有字段？

> ID：10417387
> 
> 赞同：2
> 
> 时间：2012-05-02T15:58:15.530
> 
> 标签：c#

```
class Program
{
    static void Main(string[] args)
    {
        var ball = new Ball();
        ball.MyApple.Name = "ramro apple";

        XmlSerializer ser = new XmlSerializer(typeof(Ball));
        var sb = new StringBuilder();
        var writer = new StringWriter(sb);

        ser.Serialize(writer, ball);

        XmlDocument doc = new XmlDocument();
        doc.LoadXml(sb.ToString());

        XmlNodeReader reader = new XmlNodeReader(doc.DocumentElement);
        object meroBall = ser.Deserialize(reader);
        Ball myBall = (Ball)meroBall;
    }
}

public class Apple
{
    public string Name
    {
        get;
        set;
    }
}

public class Ball
{
    public Ball()
    {
        _apple = new Apple();
    }

    public Apple MyApple
    {
        get { return _apple; }
    }

    private Apple _apple;
} 
```

在这里，我在 Ball 类中定义了私有字段 Apple _apple。它给了我 MyApple 的空值。但是，如果我将 Apple _apple 设置为公共字段，它会将值设为“ramro apple”。有没有办法通过使用私有字段来获得该值？我试试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:06:46.213

这是因为 XmlSerializer 仅适用于同时具有公共获取和设置的成员...如果您为 MyApple 提供公共设置器，它将起作用：

```
public class Ball
{
    public Ball()
    {
        _apple = new Apple();
    }

    public Apple MyApple
    {
        get { return _apple; }
        set { _apple = value; }
    }

    private Apple _apple;
} 
```

当然，这也假设 Ball 和 Apple 这两个类都有一个不带参数的公共构造函数。

# javascript - 比其 div 短的 jscrollpane

> ID：10417389
> 
> 赞同：0
> 
> 时间：2012-05-02T15:58:17.777
> 
> 标签：javascript, html, css, scroll, jscrollpane

我有一个带有 jscrollpane 的 div。目前滚动条是 div 的大小。即如果 div 是 100 像素高，那么滚动条也是 100 像素高。我想要的是在滚动条的上方和下方有一个间隙，这样我就可以放置不同的按钮。因此，如果 div 的高度为 100 像素，则 jscrollpane 的高度可能为 60 像素，上下有 20 像素的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:09:22.360

经过一些研究，我发现你可以，对于其他有这个问题的人，这里有一些很棒的信息：http: [//jscrollpane.kelvinluck.com/caps.html](http://jscrollpane.kelvinluck.com/caps.html)

# permissions - Alfresco 在引导程序中为节点设置权限

> ID：10417399
> 
> 赞同：2
> 
> 时间：2012-05-02T15:59:08.687
> 
> 标签：permissions, alfresco, bootstrapping

我在为现有节点（“站点”文件夹）设置权限时遇到问题。我有一个组，我需要授予她对“站点”文件夹的完全控制权限。我为此使用了下一个 xml

```
<cm:folder view:childName="cm:Sites">
    <view:acl>
        <view:ace view:access="ALLOWED">
            <view:authority>GROUP_NOTEBOOK_PROJECT_CREATOR_GROUP</view:authority>
            <view:permission>FullControl</view:permission>
        </view:ace>
    </view:acl>
    <view:properties>
        <cm:name>Sites</cm:name>
        <sys:node-uuid>1e6f0610-a018-4966-ab37-c71e809dc6ed</sys:node-uuid>
    </view:properties>
</cm:folder> 
```

和下一个配置上下文

```
<bean id="com.agilent.datastore.notebook.server.systemBootstrap" class="org.alfresco.repo.module.ImporterModuleComponent"
parent="module.baseComponent">
<property name="moduleId" value="${artifactId}" />
<property name="name" value="${name}" />
<property name="description" value="${description}" />
<property name="sinceVersion" value="${noSnapshotVersion}.${buildNumber}" />
<property name="appliesFromVersion" value="${noSnapshotVersion}.${buildNumber}" />
<!-- Uncomment next line if you want to execute bootstrap again -->
<!-- property name="executeOnceOnly" value="false" / -->
<property name="importer" ref="spacesBootstrap" />
<property name="bootstrapViews">
  <list>
    <props>
      <prop key="uuidBinding">UPDATE_EXISTING</prop>
      <prop key="path">/${spaces.company_home.childname}</prop>
      <prop key="location">alfresco/extension/agilent/sites.acp</prop> 
```

但是当我引导这个文件夹时，我遇到了异常`Cannot insert duplicate key row in object 'dbo.alf_child_assoc' with unique index 'parent_node_id'.; nested exception is java.sql.SQLException: Cannot insert duplicate key row in object 'dbo.alf_child_assoc' with unique index 'parent_node_id'.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T20:08:21.777

实现你想要的最好的方法是编写一个补丁，这是一个扩展 alfresco AbstractPatch.java 类的 java 类。

在 applyInternal 方法中，您首先使用 xpath-search 获取站点文件夹，因为它在后台使用 nodeService。由于补丁是在引导期间运行的，因此在执行此代码期间 Solr 将不可用。

像这样声明你在 spring 上下文文件中打补丁：

```
<bean id="patch.setPermissionsOnSitesFolderPatch"     class="org.yourdomain.alfresco.patch.SetPermissionOnSitesFolderPatch" parent="basePatch">
<property name="id">
  <value>patch.patch.setPermissionsOnSitesFolderPatch</value>
</property>
<property name="description">
  <value>patch.setPermissionsOnSitesFolderPatch.description</value>
</property>
<property name="fixesFromSchema">
  <value>0</value>
</property>
<property name="fixesToSchema">
  <value>${version.schema}</value>
</property>
 <property name="targetSchema">
   <value>10000</value>
  </property>
  <property name="force" value="true" />

  <property name="repository" ref="repositoryHelper"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-12T20:53:37.113

要完成@billerby 的答案，您还需要一个 Java 类来配合该片段。Alfresco[文档](https://docs.alfresco.com/content-services/latest/develop/repo-ext-points/patches/)包含一个很好的例子。使用它是我为我的用例提出的：

*注意我使用的是 Lombok，但这只是为了方便*

```
public class UpdatePermissionsPatch extends AbstractPatch {

    /**
      * The Alfresco Service Registry that gives access to all public content services in Alfresco.
      */
    @Setter private ServiceRegistry serviceRegistry;

    /* Properties */
    @Setter private String path;
    @Setter private String authority;
    @Setter private String permission;
    @Setter private boolean allowed;

    /** This will clear permissions for the specified authority if set to true */
    @Setter private boolean clearPermissions;

    private String getSuccessId() {
        return getId() + ".result";
    }

    private String getErrorId() {
        return getId() + ".error";
    }

    @Override
    protected String applyInternal() throws Exception {
       log.info("Starting execution of patch: {}", I18NUtil.getMessage(getId()));

       // Get the store reference for the Repository store that contains live content
       StoreRef store = StoreRef.STORE_REF_WORKSPACE_SPACESSTORE;

       // Get root node for store
       NodeRef rootRef = serviceRegistry.getNodeService().getRootNode(store);

       // Do the patch work
       setPermissions(getWipNodeRef(rootRef));

       log.info("Finished execution of patch: {}", I18NUtil.getMessage(getId()));

       return I18NUtil.getMessage(getSuccessId());
    }

    private void setPermissions(NodeRef nodeRef) {
        PermissionService permsService = serviceRegistry.getPermissionService();

        if (clearPermissions) {
            permsService.clearPermission(nodeRef, authority);
        }

        permsService.setPermission(nodeRef, authority, permission, allowed);
    }

    private NodeRef getWipNodeRef(NodeRef rootNodeRef) {
        NamespaceService nsService = serviceRegistry.getNamespaceService();
        List<NodeRef> refs = searchService.selectNodes(rootNodeRef, path, null, nsService, false);
        if (refs.size() != 1) {
            throw new AlfrescoRuntimeException(I18NUtil.getMessage(getErrorId(),
                String.format("Node could not be found, XPATH query %s returned %i nodes.", path, refs.size())
            ));
        }

        return refs.get(0);
    }
} 
```

您的引导上下文 xml 将需要包含以下内容：

```
<bean
    id="org.tutorial.folderUpdateWipPermissions"
    class="org.tutorial.patch.UpdatePermissionsPatch"
    parent="basePatch"
>
    <property name="id" value="org.tutorial.bootstrap.patch.folderUpdateWipPermissions" />
    <property name="description" value="org.tutorial.bootstrap.patch.folderUpdateWipPermissions.description" />
    <property name="fixesFromSchema" value="0" />
    <property name="fixesToSchema" value="${version.schema}" />
    <property name="targetSchema" value="100003" />
    <property name="serviceRegistry">
        <ref bean="ServiceRegistry"/>
    </property>
    <property name="path" value="/${spaces.company_home.childname}/cm:Work_x0020_In_x0020_Progress" />
    <property name="authority" value="GROUP_MyGroup" />
    <property name="permission" value="Consumer" />
    <property name="allowed" value="true" />
    <property name="clearPermissions" value="true" />
</bean> 
```

# mongodb - ZF2 with Doctrine Mongo ODM

> ID：10417400
> 
> 赞同：0
> 
> 时间：2012-05-02T15:59:20.927
> 
> 标签：mongodb, doctrine-orm, zend-framework2

我关注 [了如何将 ZF2 与 Doctrine Mongo ODM 集成？](https://stackoverflow.com/questions/10273130/how-to-integrate-zf2-with-doctrine-mongo-odm?answertab=active#tab-top) 使用 Doctrine Mongo ODM 设置 ZF2，

我可以将文档保存到 mongodb，但是我无法使用以下代码找到文档

```
$dm = $this->getLocator()->get('mongo_dm');
$result = $dm->find('Item', '4f9ea557eabc88e96f000000');
print_r($result); 
```

这是错误日志

```
PHP Warning:  class_parents(): Class Item does not exist and could not be loaded in /var/www/vendor/DoctrineMongoODMModule/vendor/mongodb-odm/lib/Doctrine/ODM/MongoDB/Mapping/ClassMetadataFactory.php on line 347
PHP Warning:  array_reverse() expects parameter 1 to be array, boolean given in /var/www/vendor/DoctrineMongoODMModule/vendor/mongodb-odm/lib/Doctrine/ODM/MongoDB/Mapping/ClassMetadataFactory.php on line 347
PHP Warning:  Invalid argument supplied for foreach() in /var/www/vendor/DoctrineMongoODMModule/vendor/mongodb-odm/lib/Doctrine/ODM/MongoDB/Mapping/ClassMetadataFactory.php on line 347 
```

我已经尝试使用生成文档

```
./vendor/DoctrineModule/bin/doctrine odm:generate:documents ./module/Application/src/Application/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:26:49.843

```
$dm = $this->getLocator()->get('mongo_dm');
$result = $dm->find('Application\Document\Item', '4f9ea557eabc88e96f000000'); 
```

应该解决这些问题

# android - AndEngine - 如何使用独立着色器

> ID：10417406
> 
> 赞同：0
> 
> 时间：2012-05-02T15:59:34.247
> 
> 标签：android, graphics, opengl-es-2.0, shader, andengine

我找到了具有模糊效果的 andengine 示例，它工作正常，我发现我可以使用 ShaderProgram 类，并且在 Sprite 的 PreDraw 中使用一些着色器（setShaders）。

我可以使用相同的类 ShaderProgramm 并使用着色器而不附加到精灵吗？

例如，在 onDraw 中使用仅在场景上绘制 grenn 三角形的着色器（如在 android opengl 示例中）。有没有以这种方式使用 ShaderProgram 的简单方法（如何将着色器从 Sprite 的 PreDraw 中附加出来）？

我试过这样：

```
BrushShaderProgram bs = BrushShaderProgram.getInstance();
bs.link(pGLState);
GLES20.glUseProgram(bs.getId());
GLES20.glVertexAttribPointer(bs.maPositionHandle, 3, GLES20.GL_FLOAT, false, 12, triangleVB);
GLES20.glEnableVertexAttribArray(bs.maPositionHandle);
GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 3); 
```

着色器很简单：

```
public static final String VERTEXSHADER =  
                "attribute vec4 vPosition; \n" +
                "void main(){              \n" +
                " gl_Position = vPosition; \n" +
                "}                         \n";

public static final String FRAGMENTSHADER = "precision mediump float;  \n" +
                "void main(){              \n" +
                " gl_FragColor = vec4 (0.63671875, 0.76953125, 0.22265625, 1.0); \n" +
                "}                         \n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:46:22.730

为什么不创建一个 Triangle 类，就像 Rectangle 类一样？

# eclipse - 在 Eclipse 中自动生成的 getter/setter 之间放置空间

> ID：10417407
> 
> 赞同：13
> 
> 时间：2012-05-02T15:59:40.393
> 
> 标签：eclipse, methods, setter, space, getter

我正在使用 Eclipse EE IDE - Indigo。我填写了我所有的类变量，然后右键单击页面并选择 -> 源 -> 生成 Getter 和 Setter。这很好用，但它将方法放在彼此之上，例如：

```
public String getValue1() {  
    return value1;  
}  
public void setValue1(String value1) {  
    $this.value1 = value1  
}  
public String getValue2() {  
    return value2;  
}  
public void setValue2(String value2) {  
    $this.value2 = value2
} 
```

有没有办法告诉 Eclipse 在自动生成时在方法之间放置一个空格？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-22T09:32:10.633

创建 getter 和 setter 后，选择新创建的方法并“格式化”代码 (Ctrl+Shift+F)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-09T07:33:31.467

生成的 getter/setter 方法之间的空行取决于属性 itselt 之间是否存在空行。

所以如果我选择这个：

```
    私人int foo；
    私人国际酒吧；

```

getter/setter 之间没有空格，但是如果我选择这个：

```
    私人int foo；

    私人国际酒吧；

```

方法之间会有一个空行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-12T03:58:45.307

假设您有这样的字段：

```
private int first;
private int second;
private int third; 
```

如果要在第三个字段之后添加 getter 和 setter，请在第二个和第三个字段之间留一个空格，如下所示：

```
private int first;
private int second;

private int third; 
```

现在你可以走了。生成它，然后删除您添加的空行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T16:14:28.310

是的。我在 Eclipse 3.7 上试过这个。这有点笨拙，但它确实有效。

*   使用右键单击选项 Source -> Generate Getters and Setter生成**一个**getter 或 setter 方法。

*   在方法后手动添加两个空行。

*   在第二个空白行，使用右键单击选项 Source -> Generate Getter and Setter 来生成其余的 getter 和 setter。

# jsf-2 - Primefaces 3.2 中的 DefaultLabel 等价物

> ID：10417410
> 
> 赞同：-1
> 
> 时间：2012-05-02T15:59:45.587
> 
> 标签：jsf-2, richfaces, primefaces

请问，它是否相当于 Primefaces 3.2 中的 DefaultLabel（丰富面孔的组合框）？

问候 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:24:09.100

**SelectOneMenu** (http://www.primefaces.org/showcase/ui/selectOneMenu.jsf) 在 primefaces 中是等价的。primefaces 提供的所有组件都可以在[http://www.primefaces.org/showcase/ui/home.jsf 查看](http://www.primefaces.org/showcase/ui/home.jsf)

# itextsharp - 使用 itext 在流中添加页码并创建横向 A4

> ID：10417419
> 
> 赞同：1
> 
> 时间：2012-05-02T16:00:01.457
> 
> 标签：itextsharp, itext

我有以下代码在流中生成pdf。这很好用，但我现在有以下要求。

1）制作页面横向：查看其他示例，他们将属性添加到文档对象。但我正在做这个instream。那么我将如何添加此属性？

2) 添加页码。我需要将项目放入网格中，以便每页有 x 行。在页脚处带有页码。Itext sharp如何实现这种功能。

```
public static void Create(ICollection<Part> parts, string path)
{
    PdfReader reader = new PdfReader(path);

    var pageWidth = 500;
    byte[] bytes;
    using (MemoryStream ms = new MemoryStream())
    {
        using (PdfStamper stamper = new PdfStamper(reader, ms))
        {
            PdfContentByte cb = stamper.GetOverContent(1);

                  //Flush the PdfStamper's buffer
            stamper.Close();
            //Get the raw bytes of the PDF
            bytes = ms.ToArray();
            var now = String.Format("{0:d-M-yyyy}", DateTime.Now);
            var pdfName = string.Format("{0}_factory_worksheet", now).Replace("%", "").Replace(" ", "_");

            var context = HttpContext.Current;
            context.Response.ContentType = "application/pdf";
            context.Response.AddHeader("content-disposition", "attachment;filename=" + pdfName);
            context.Response.Buffer = true;
            context.Response.Clear();
            context.Response.OutputStream.Write(ms.GetBuffer(), 0, ms.GetBuffer().Length);
            context.Response.OutputStream.Flush();
            context.Response.End();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:30:58.450

我真的不知道你如何处理它 C# 但逻辑流程将是这样的：
使用**PdfDictionary**将阅读器中的内容旋转到 90 度。假设你的 pdf 包含多个页面， **PdfReader reader = new PdfReader(path);
for (int pgCnt=1; pgCnt <= reader.getNumberOfPages(); pgCnt++) {
//实现旋转和添加页码的逻辑
}**
获取当前旋转（假设您使用的是纵向模式并尝试在横向模式下转换）使用
**int rttnPg = reader.getPageRotation(pgCnt);**
还获取该页面的
**PdfDictionary pgDctnry=reader.getPageN(i);** （我将该变量命名为 pgDctnry）
现在将其旋转 90 度使用
**pgDctnry.put(PdfName.ROTATE, new PdfNumber(rttnPg+90));**
现在使用 PdfStamper 进行
**绑定
rctPgSz = rdrPgr.getPageSizeWithRotation(pgCnt);
pgCntntBt.beginText();
bfUsed=//用于显示文本的基本字体。同时设置字体大小
pgCntntBt.setFontAndSize(bfUsed,8.2f); txtPg=String.format(pgTxt+" %d/%d",pgCnt,totPgCnt);
pgCntntBt.showTextAligned(2,txtPg,//放置宽度,//放置高度,//旋转);
pgCntntBt.endText();**
其实我不明白你的意思：**“我需要将项目放入网格中，以便每页有 x 行。页脚处有页码”**。现在关闭压模以将其刷新到输出流中。

# apache - 除非 Solr 停止 3 秒以上，否则不会获取 Solr 架构更改

> ID：10417422
> 
> 赞同：2
> 
> 时间：2012-05-02T16:00:15.337
> 
> 标签：apache, solr

当我对 Solr (3.4) 架构进行更改然后重新启动该过程时，不会立即找到我的更改。我必须停止服务器，等待几秒钟（过去`ps aux`显示 Java 进程已终止），然后重新启动它。为什么是这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T15:04:11.877

架构更改需要重新启动 solr 服务器，因为架构已加载到内存中。[Solr Wiki](http://wiki.apache.org/solr/FAQ#How_can_I_rebuild_my_index_from_scratch_if_I_change_my_schema.3F)提供了有关架构更改的更多信息。然而，有一种方法可以解决这个问题。如果您在[多核](http://wiki.apache.org/solr/CoreAdmin)环境中运行 Solr，您可以动态地创建、重新加载、重命名、加载和交换内核。

一个不错的选择可能是将 Solr 核心移动到 Multi-core 目录并在 multi-core home 中启动 Solr。然后，当您需要更改架构时，使用新架构创建一个新核心，在后台索引您的内容，然后将您的主核心与新核心交换。

祝你好运！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-09T00:05:40.170

您的浏览器可能正在显示缓存的结果。我发现在重新加载 solr 配置后，在我的浏览器中使用`Shift`++[强制刷新而不使用缓存](https://superuser.com/questions/89809/how-to-force-refresh-without-cache-in-google-chrome)`Cmd`对我有用。`R`

# android - 如果不推荐使用 AbsoluteLayout，如何绘制无尽的 2D 板/地图？

> ID：10417424
> 
> 赞同：0
> 
> 时间：2012-05-02T16:00:25.520
> 
> 标签：android, css-position, world-map

我想画出无尽的棋盘，比如无尽单元格的游戏世界地图。用户可以滚动它，但数据将存储在内存中，而不是屏幕上。即，当它们出现在屏幕上时，我将填充单元格并在隐藏时删除它们。

如何在 Android 中实现这一点？

在 javascript 和 java 中，我将使用 2 个嵌套的绝对窗格或 div，没有剪辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:57:44.010

最好的方法是重写 View 子类的 onDraw(Canvas canvas) 方法并绘制要显示的区域。将您的游戏角色放在中心并使用 invalidate() 重新绘制视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:32:07.307

您可以通过更改视图的左边距和上边距来对 RelativeLayout 执行相同的操作，就好像它是 x 和 y 坐标一样。

# php - 让一个类总是为方法存在返回 true

> ID：10417430
> 
> 赞同：1
> 
> 时间：2012-05-02T16:00:46.007
> 
> 标签：php

我有一个类，我想在调用 method_exists() 等时返回 true，以便我可以通过 __call() 处理它。

我偶然发现了这个关于删除行为和 __call() [https://bugs.php.net/bug.php?id=32429的链接](https://bugs.php.net/bug.php?id=32429)

希望这是有道理的。谢谢。

这是我不够清楚的评论。

```
class MyClass {
  public function __call($method, $args) {
    if($method === 'something') {
      // do something
    }
  }
} 
```

然后在别的地方

```
$my_class = new MyClass();
if(method_exists($my_class, 'something')) {
  // do something
  // But does not because method exists returns false
  // I would like it to return true if possible
} 
```

有什么我不明白的复杂之处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:22:07.997

`method_exists`不会检测到`__call`，因为您传递给它的未定义方法*实际上*并不存在。如果确实如此，它将被视为错误，如您的问题中所链接。

做到这一点的唯一方法（没有像[runkit](http://pecl.php.net/package/runkit)这样的 PECL 扩展或修改 PHP 源代码）是使用一些命名空间*黑魔法*来覆盖以下行为`method_exists`：

```
namespace Foo;

function method_exists($object, $method) {
    return \method_exists($object, '__call') ?: 
           \method_exists($object, $method);
}

class Bar {
    public function __call($n, $a) { }
}
class Baz { }

var_dump(method_exists('Foo\Baz', 'hello')); // false
var_dump(method_exists('Foo\Bar', 'hello')); // true 
```

我不会推荐它，但是，嘿，你要求它。

# php - ManyToMany自引用关系-如何优化此代码？

> ID：10417431
> 
> 赞同：0
> 
> 时间：2012-05-02T16:00:50.267
> 
> 标签：php, optimization, orm, symfony, doctrine-orm

我该如何优化这段代码。我发现更新相关文档的唯一方法是删除所有旧关系并设置新关系。这使得许多无用的删除/插入查询未更改的关系

**控制器动作：**

```
 foreach ($entity->getRelatedDocuments() as $document) {
        $oldRDs[] = $document;
    }
    if ($editForm->isValid()) {
        // filter $originalTags to contain tags no longer present
        $newRDs = $entity->getRelatedDocuments();

        // assign old and new relations
        if (!isset($oldRDs)) {
            $addRDs = $newRDs;
        } else {
            $delRDs = $oldRDs;
            $addRDs = $newRDs;
        } 
        // if there are old one remove them
        if (isset($delRDs)) {
            foreach ($delRDs as $document) {
                $document->removeDocument($entity);
            }
        }
        // if there are new one store them
        if (isset($addRDs)) {
            foreach ($addRDs as $document) {
                $document->addDocument($entity);
            }
        }       

        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('document_edit', array('id' => $id)));
    } 
```

**实体类：**

```
/**
 * @var string $relatedDocuments
 *
 * @ORM\ManyToMany(targetEntity="Document")
 * @ORM\JoinTable(name="nb_link_documents_documents",
 *               joinColumns={@ORM\JoinColumn(name="document1_id", referencedColumnName="id")},
 *               inverseJoinColumns={@ORM\JoinColumn(name="document2_id", referencedColumnName="id")})
 */
private $relatedDocuments;

public function __construct()
{
    $this->relatedDocuments = new \Doctrine\Common\Collections\ArrayCollection();
}

public function addDocument(\NF\FundBundle\Entity\Document $relatedDocuments)
{
    $this->relatedDocuments[] = $relatedDocuments;
}

public function removeDocument(\NF\FundBundle\Entity\Document $relatedDocuments)
{
    foreach ($this->relatedDocuments as $key => $document) {
        if ($document->getId() == $relatedDocuments->getId())
            unset ($this->relatedDocuments[$key]);
    }
} 
```

# c++ - cout 输入流带和不带 (void*)

> ID：10417432
> 
> 赞同：0
> 
> 时间：2012-05-02T16:00:52.580
> 
> 标签：c++, input, stream, void, cout

我有一个输入流 IPCimstream，它使用 dataBuf() 函数返回指向其流的字符缓冲区的指针。

假设我有
IPCimstream ims；

1.印刷有什么区别
。

```
cout << ims.dataBuf() << endl; 
```

和
2。

```
cout << (void*)ims.dataBuf() << endl; 
```

如果可能，请举例说明。假设 ims.dataBuf() 具有“Hello world\n”等或其他您认为可以很好地解释差异的示例。抱歉，我是输入流的新手，如果有的话，我想不出更多有趣的例子。

此外，如果 IPCimstream 是字符流与二进制流，会有什么区别。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:04:51.077

好吧，不同之处在于`char*`重载`cout::operator<<`将指针视为以零结尾的 C 字符串（好吧，C 字符串无论如何*都*只是 char 指针），因此它会输出字符串本身。如果您的缓冲区不是以零结尾的字符串，则`cout`' 的猜测是错误的，因此它将输出一些随机垃圾直到第一个`\0`.

同一个操作符的`void*`版本不知道指针后面的对象是什么，所以它所能做的只是输出指针值。

你看，这种行为与类**无关**`IPCimstream`，它只是如何`cout`工作。（查看[http://ideone.com/1ErtV](http://ideone.com/1ErtV)上的示例）。

编辑：
如果`dataBuf`包含版本`"Hello world\n"`，`char*`则将指针解释为以零结尾的字符串。所以它会输出字符“Hello world”，输出换行符，然后是所有碰巧在内存中的字符，`\n`直到下一个`\0`。如果内存中没有这样的字符，程序可能会崩溃。（对于语言纯粹主义者：你会得到*未定义的行为*。）

该`void*`版本不知道如何处理指针指向的值——所以它自己输出指针值（即地址）。

编辑2：
字符流和二进制流之间的区别可能仅在于它们持有的数据。在任何情况下，如果`dataBuf()`返回 a `char*`，`cout`则将输出缓冲区中找到的所有字符（可能超出它）直到第一个字符`\0`（或者如果在开头则什么都没有`\0`），并且通过强制转换，您将只获得缓冲区的地址输出为字符串。

# android - 适用于 Android 的停靠设置按钮覆盖

> ID：10417433
> 
> 赞同：0
> 
> 时间：2012-05-02T16:00:54.010
> 
> 标签：android, button

我正在 Galaxy Nexus 上开发，我希望主 Dock 上的设置图标打开一些按钮窗口。我该如何处理这个按钮按下？就是那个看起来像垂直“...”的按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:10:14.810

那个按钮：

*   只会出现在没有 MENU 按钮的设备上
*   只有在溢出菜单中有操作栏项目时才会出现
*   不能直接用于其他用途

欢迎您在操作栏中添加一个操作项，该操作项将“打开一些按钮窗口”。您可以为此操作项选择所需的任何图标。我强烈建议您**不要**使用与操作溢出菜单相同的图标。有数百万个可能的图标，因此您当然可以选择与“按钮窗口”相关的一个，并且不会与用户对操作栏溢出的外观和工作方式的期望相冲突。

# ajax - 链接的 _escaped_fragment 版本的操作链接

> ID：10417438
> 
> 赞同：1
> 
> 时间：2012-05-02T16:01:10.737
> 
> 标签：ajax, facebook, action, facebook-timeline

我致力于在我的网络应用程序中集成 Facebook 时间线，但我的操作链接有问题。

我的 Web 应用程序是 Ajax Web 应用程序，URL 格式是 example.com/#!123456789。对于 Facebook 爬虫，我制作了一个静态版本 example.com/?_escapade_fragment=123456789。

当我想发布一个动作时，我向这个 URL = [https://graph.facebook.com/](https://graph.facebook.com/) '.$facebookId.'/video.watches?access_token=...&movie='.urlencode('example.com /#!123456789').'

Facebook 将我发回给我，并将此操作发布到我的墙上。但是当我点击链接（在我的墙上）时，我被重定向到 _escaped_fragment URL，为什么？为什么 Facebook 不将用户重定向到 #! 网址的版本？

# android - 客户端-服务器：从 Android 到通过套接字连接的 PC 的文件传输

> ID：10417442
> 
> 赞同：15
> 
> 时间：2012-05-02T16:01:27.927
> 
> 标签：android, sockets, client, transfer

我正在尝试发送从手机图库中选择的图片，然后将该图片从手机发送到我的 PC，当我单击按钮时，它应该采用图片的路径并将其放入文件中，然后传输到我的电脑。我已经检查了我的 PC 上的代码 - 双方 - 它工作得很好。

当我测试它时，没有任何反应！

这是代码：

服务器端：

```
 import java.io.*;
import java.net.*;

public class FileServer {

    public static void main(String[] args) throws IOException {
        int filesize=6022386; // filesize temporary hardcoded

        long start = System.currentTimeMillis();
        int bytesRead;
        int current = 0;

        // create socket
        ServerSocket servsock = new ServerSocket(1149);
        while (true) {
          System.out.println("Waiting...");

          Socket sock = servsock.accept();
          System.out.println("Accepted connection : " + sock);

       // receive file
            byte [] mybytearray  = new byte [filesize];
            InputStream is = sock.getInputStream();
            FileOutputStream fos = new FileOutputStream("C:\\Users\\Arwa\\Documents\\WebOffice.jpg"); // destination path and name of file
            BufferedOutputStream bos = new BufferedOutputStream(fos);
            bytesRead = is.read(mybytearray,0,mybytearray.length);
            current = bytesRead;

            // thanks to A. Cádiz for the bug fix
            do {
               bytesRead =
                  is.read(mybytearray, current, (mybytearray.length-current));
               if(bytesRead >= 0) current += bytesRead;
            } while(bytesRead > -1);

            bos.write(mybytearray, 0 , current);
            bos.flush();
            long end = System.currentTimeMillis();
            System.out.println(end-start);
            bos.close();

          sock.close();
          }
    }

} 
```

* * *

客户端（安卓）：

```
 package com.arwa.file.send;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class SendfileActivity extends Activity {
    /** Called when the activity is first created. */

    private static final int SELECT_PICTURE = 1;

    private String selectedImagePath;
    private ImageView img;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        System.out.println("34");
        img = (ImageView) findViewById(R.id.ivPic);
        System.out.println("36");
        ((Button) findViewById(R.id.bBrowse))
                .setOnClickListener(new OnClickListener() {
                    public void onClick(View arg0) {
                        System.out.println("40");
                        Intent intent = new Intent();
                        intent.setType("image/*");
                        intent.setAction(Intent.ACTION_GET_CONTENT);
                        startActivityForResult(
                                Intent.createChooser(intent, "Select Picture"),
                                SELECT_PICTURE);
                        System.out.println("47");
                    }
                });
        ;
        System.out.println("51");
        Button send = (Button) findViewById(R.id.bSend);
        final TextView status = (TextView) findViewById(R.id.tvStatus);

        send.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Socket sock;
                try {
                    sock = new Socket("MY_PCs_IP", 1149); 
                    System.out.println("Connecting...");

                     // sendfile
                          File myFile = new File (selectedImagePath); 
                          byte [] mybytearray  = new byte [(int)myFile.length()];
                          FileInputStream fis = new FileInputStream(myFile);
                          BufferedInputStream bis = new BufferedInputStream(fis);
                          bis.read(mybytearray,0,mybytearray.length);
                          OutputStream os = sock.getOutputStream();
                          System.out.println("Sending...");
                          os.write(mybytearray,0,mybytearray.length);
                          os.flush();

                        sock.close();
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });
    }
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
                TextView path = (TextView) findViewById(R.id.tvPath);
                path.setText("Image Path : " + selectedImagePath);
                img.setImageURI(selectedImageUri);
            }
        }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }
} 
```

XML 代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvStatus"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <TextView
        android:id="@+id/tvPath"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Path: " />

    <Button
        android:id="@+id/bBrowse"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Browse" >
    </Button>

    <Button
        android:id="@+id/bSend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Send" />

    <ImageView
        android:id="@+id/ivPic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ImageView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:09:13.833

你只需要添加权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

它会完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T04:20:11.913

与其在 PC 上的模拟器中尝试它，不如尝试在移动设备上运行它。此外，我已将端口号更改为 8000，而不是使用 1149 端口。

通过这些更改，代码对我来说效果很好。请检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T10:30:38.230

它无法正常工作，因为您没有将变量 current 重新初始化为 0 似乎您正在后续循环中追加而不重置该值。因此，在我的猜测中，它可能会在您执行的第二次迭代中引起问题。

# sinatra - Scss/Sass 不能与 sinatra-assetpack 一起使用

> ID：10417451
> 
> 赞同：1
> 
> 时间：2012-05-02T16:01:50.177
> 
> 标签：sinatra, sass, sinatra-assetpack

我正在编写一个[经典风格的 sinatra app](http://www.sinatrarb.com/extensions.html)，并尝试使用[sinatra-assetpack](http://ricostacruz.com/sinatra-assetpack/)打包我的 scss 文件，但它不起作用。

这是我的主要网络文件：

```
require 'rubygems'
require 'sinatra'
require 'haml'
require 'sass'
require 'compass'
require 'sinatra/assetpack'

set :root, File.dirname(__FILE__)
set :environment, ENV["RACK_ENV"] || "development"

configure do
  Compass.configuration do |config|
    config.project_path = File.dirname(__FILE__)
    config.sass_dir = 'views/stylesheets'
  end

  set :haml, { :format => :html5 }
  set :scss, Compass.sass_engine_options

  assets {
    serve '/javascripts', from: 'public/javascripts'
    serve '/stylesheets', from: '/stylesheets'

    # The second parameter defines where the compressed version will be served.
    # (Note: that parameter is optional, AssetPack will figure it out.)
    js :lib, '/javascripts/script.js', [
      '/javascripts/lib/modernizr-2.5.3.js',
      '/javascripts/lib/underscore-min.js',
      '/javascripts/lib/slides.min.jquery.js',
      '/javascripts/lib/jquery.scrollTo-1.4.2-min.js'
    ]

    css :app, '/stylesheets/screen.css', [
      '/stylesheets/screen.css',
      '/fonts/meta.css'
    ]

    js_compression  :jsmin
    css_compression :sass
  }
end 
```

我在我的布局文件中使用它：

```
= css :app, :media => 'screen' 
```

该`screen.scss`文件存储在 中`/views/stylesheets/screen.scss`，并且`meta.css`位于`/public/fonts/meta.css`. 引用`screen.css`不正确吗？是否应该从不同的目录提供它们？

我的主网络文件中也有这个

```
get '/stylesheets/screen.css' do
  content_type 'text/css', :charset => 'utf-8'
  scss :'stylesheets/screen'
end 
```

放入或移除它并没有解决任何问题 - 这条路线是否必要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:09:52.817

你不应该再保留你的`get '/stylesheets/screen.css'`路线了。

我还注意到您的 Gemfile / app 文件中有指南针。Sinatra AssetPack 指出它与 compass 不兼容。您可以[在此处](https://github.com/rstacruz/sinatra-assetpack/tree/master/examples/compass)`sinatra/support`包括使用它，例如他们的示例应用程序。

更改您的`serve '/stylesheets', from: '/stylesheets'`声明以`serve '/stylesheets', from: '/views/stylesheets'`反映您希望从何处提供 sass 文件。

毕竟，您应该能够提供您的 javascript 和 scss，如下所示：

```
= css :app, :media => 'screen'
= js :lib 
```

# php - php 代码不在数组中

> ID：10417452
> 
> 赞同：0
> 
> 时间：2012-05-02T16:01:51.367
> 
> 标签：php

我需要一点帮助，作为 php 的新手。

```
if($catname != 'used-cars' && $currentpage IS NOT 1,2,3.....100){
} 
```

我怎样才能正确地写这个？也许将数字放入数组中？

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:05:02.640

使用`!`和`in_array()`

```
$array = array(1, 2, 3... , 100);

if($catname != 'used-cars' && !in_array($currentpage, $array)){

} 
```

[http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:04:25.190

```
if($catname != 'used-cars' && !in_array($currentpage, range(1, 100)) 
```

或者：

```
if($catname != 'used-cars' && ($currentpage < 1 || $currentpage > 100)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:03:41.953

```
if($catname != 'used-cars' && !in_array($currentPage, array(1, 2, 3, ..., 100)))
{} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:05:25.780

假设您希望所有数字都在 1-100 的范围内，您可以`in_array()`像`range()`这样使用：

```
if (($catname != "used-cars") && (!in_array($currentPage, range(1,100))) {
   //Do Stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T16:07:01.020

也许这样的事情可能会奏效？

```
if($catname != 'used-cars' && $currentpage > 100)
{
    //Code here
} 
```

# c++ - 在 C++ 中的 main 之后添加附加函数时未声明的标识符？

> ID：10417463
> 
> 赞同：-2
> 
> 时间：2012-05-02T16:02:20.327
> 
> 标签：c++, arrays, function, constants

```
#include "stdafx.h"
#include <iomanip>
#include <ostream>
#include <fstream>
using namespace std;

void FillArray(int x[ ], const int Size);
void PrintArray(int x[ ], const int Size);

int main() 
{
    const int SizeArray = 10;
    int A[SizeArray] = {0};
    FillArray (A, SizeArray);
    PrintAray (A, SizeArray);

    return 0;
}
void FillArray (int x[ ], const int Size)
{
    for( int i = 0; i < Size; i++);
    {
        cout << endl << "enter an integer"; //cout undeclared here
        cin >> x[i]; //cin and i undeclared here
    } 
```

“cout”、“cin”和“i”都得到错误“ `error C2065: 'cin' : undeclared identifier`”。我不知道如何解决它们。我必须有三个函数：主函数、填充数组和打印数组。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T16:09:56.327

1.  而不是`<ostream>`，您很可能想要包括`<iostream>`，因为这包括`cin`和`cout`。
2.  for 循环末尾的分号结束在循环中执行的语句。因此，您的代码块与该循环是分开的，并且`i`不再在范围内。

[为了支持更有用的问题/答案格式，将来请将您的代码发布为文本，而不是屏幕截图。]

* * *

![在此处输入图像描述](../Images/e4a9f457b72c9028ebc878262504ed41.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T16:12:27.723

1) 你必须`include <iostream>`, 对于 和 的`cin`定义`cout`。
2）你的 for 循环后面有一个分号，这将防止它重复。它还定义了`i`end 的范围，因此您也不能在大括号中使用它。
3) 不要`using namespace`无故使用。

4）不要使用代码图片。
5) 总是给出完整的错误信息。在“输出窗口”而不是“错误窗口”中的 Visual Studio 中。例如“标识符未识别”不是错误消息。
6)总是在发布之前将您的代码缩减为[SSCCE 。](http://sscce.org/)95% 的时间你会自己发现问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T16:10:21.193

`std::cout`并`std::cin`在 iostream 中定义，因此您必须`#include<iostream>`在文件顶部添加。

# php - 使用 PHP 检测历史变化？

> ID：10417466
> 
> 赞同：1
> 
> 时间：2012-05-02T16:02:32.163
> 
> 标签：php, javascript

这是我在 JavaScript 中要做的事情。有没有办法在php中做到这一点？我正在开发一个需要此功能但不能使用 JavaScript 的项目。

```
setInterval ( "checkHistory()", 1000 );

function checkHistory() {
   if (oldHistLength != history.length) {
      removegateway();
      oldHistLength = history.length;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:22:20.260

很抱歉，使用 PHP 无法做到这一点。您唯一的选择是在某处使用 JavaScript。

但是，您可以使用另一种技术实现我认为您正在尝试做的事情 - PHP 会话和请求 URI。

这涉及将用户访问的 URL 存储到一个变量（或者您可以使用 MySQL）中，该变量可以在当前会话中网站的任何位置引用。

这是一个（未经测试的）示例：

```
<?php
session_start();

// Retrieve/create the current list
if( isset($_SESSION['history']) ) {
    $history = $_SESSION['history'];
} else {
    $history = new array();
}

// Add the current URL to the history array
array_push($history, $_SERVER['REQUEST_URI']);

// Do anything else you want to here

// Store the array again
$_SESSION['history'] = $history;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:22:56.563

在您的代码中，您可以保留一个包含 $_SERVER['php_self'] 值的数组`serialize()`，并将其存储在会话变量中。但是，这对于您尝试做的事情可能还不够。我不确定是什么`removegateway()`，但这段代码是否试图阻止使用后退按钮？

如果您阻止页面被缓存，您可以将数组中的第二个到最后一个值与当前页面进行比较，如果它们匹配，则您检测到一个后退按钮。这只有在无法返回前端的上一页时才有可能。

阻止返回按钮通常被认为是一件坏事，因此最好重新考虑您做事的方式并提出更好的解决方案。

# postgresql - 无法使用 rebar generate epgsql 开始发布

> ID：10417469
> 
> 赞同：0
> 
> 时间：2012-05-02T16:02:46.907
> 
> 标签：postgresql, erlang, rebar

当我使用钢筋生成发布应用程序并尝试使用密钥控制台启动它时出现错误

**{"init 终止于 do_boot",{'cannot load',pgsql,get_file}}。**

在所有文件 app.src 和 reltool.config 中，我添加了 epgsql 应用程序。

应用程序.src：

```
{application, leasing,
 [
  {description, ""},
  {vsn, "1"},
  {registered, []},
  {applications, [
              kernel,
              stdlib,
              crypto,
              ssl,
              public_key,
              epgsql,
              amqp_client,
              rabbit_common
            ]},
{mod, { leasing_app, []}},
{env, []}
]}. 
```

reltool.config

```
{sys, [
   {lib_dirs, ["../deps", "../apps"]},
   {erts, [{mod_cond, derived}, {app_file, strip}]},
   {app_file, strip},
   {rel, "leasingnode", "1",
    [
     kernel,
     stdlib,
     sasl,
     crypto,
     ssl,
     public_key,
     epgsql,
     amqp_client,
     rabbit_common,
     leasing
    ]},
   {rel, "start_clean", "",
    [
     kernel,
     stdlib
    ]},
   {boot_rel, "leasingnode"},
   {profile, embedded},
   {incl_cond, exclude},
   {excl_archive_filters, [".*"]}, %% Do not archive built libs
   {excl_sys_filters, ["^bin/.*", "^erts.*/bin/(dialyzer|typer)",
                       "^erts.*/(doc|info|include|lib|man|src)"]},
   {excl_app_filters, ["\.gitignore"]},
   {app, sasl,   [{incl_cond, include}]},
   {app, stdlib, [{incl_cond, include}]},
   {app, kernel, [{incl_cond, include}]},
   {app, crypto, [{incl_cond, include}]},
   {app, ssl, [{incl_cond, include}]},
   {app, public_key, [{incl_cond, include}]},
   {app, epgsql, [{incl_cond, include}]},
   {app, amqp_client, [{incl_cond, include}]},
   {app, rabbit_common, [{incl_cond, include}]},
   {app, leasing, [{incl_cond, include}]}

  ]}.

{target_dir, "leasingnode"}.

{overlay, [
       {mkdir, "log/sasl"},
       {copy, "files/erl", "\{\{erts_vsn\}\}/bin/erl"},
       {copy, "files/nodetool", "\{\{erts_vsn\}\}/bin/nodetool"},
       {copy, "files/leasingnode", "bin/leasingnode"},
       {copy, "files/leasingnode.cmd", "bin/leasingnode.cmd"},
       {copy, "files/start_erl.cmd", "bin/start_erl.cmd"},
       {copy, "files/install_upgrade.escript", "bin/install_upgrade.escript"},
       {copy, "files/sys.config", "releases/\{\{rel_vsn\}\}/sys.config"},
       {copy, "files/vm.args", "releases/\{\{rel_vsn\}\}/vm.args"}
      ]}. 
```

当我从 erl shell 启动它时一切正常，但是当我生成发布时我有错误。当我关闭 epgsql 应用程序启动正常并且我看到所有应用程序（加密、ssl、public_key 已加载），但如果再次添加 epgsql 有错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:57:01.397

我自己也在努力解决同样的问题。我发现即使我将 epgsql 依赖项放入应用程序文件中，但不在代码中使用它的任何模块，那么 epgsql 应用程序也不会包含在发行版中。事实证明，这不是钢筋的问题。引擎盖下的钢筋使用 reltool。这是实际生成版本的 reltool，在我看来，它使用了来自光束文件的一些信息，并且它本身会剥离未使用的应用程序。

所以为了解决这个问题，我想出了两种方法：

*   一个。在代码中使用任何 epgsql 的模块，即使 pgsql:yyy() 也可以 :)
*   湾。将 {app, epgsql, [{incl_cond, include}]} 添加到 reltool.config 中。

事实上，这是一个普遍的问题，并不是 epgsql 特有的。

# mysql-workbench - 如果 MySQL 工作台中的另一个字段是“PK”，“UQ”如何工作？

> ID：10417473
> 
> 赞同：1
> 
> 时间：2012-05-02T16:03:07.427
> 
> 标签：mysql-workbench

我正在使用 MySQL 的工作台为数据库创建模式。我的一张表包含 personId 字段，以及国民身份证号码（如果有的话）（他们可能没有）。

personId 字段是整个架构中用作唯一标识符的字段，因此我为它勾选了“PK”和“NN”选项。现在，我希望能够确保系统不会允许具有不同 personId 的新插入，如果它与已经存在的实体具有相同的国家 ID。但是，国家 ID 不是主键，实际上可能为空。

我一直在查看“UQ”选项，但我找不到关于它实际作用的明确文档。我担心当我真正希望用户插入数字或将其保留为空时，它会自动创建数字。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:23:19.820

UQ 将字段标记为[唯一键](http://en.wikipedia.org/wiki/Unique_key)。这会强制给定字段的唯一性，但 NULL 除外。这正是我的国民身份证字段所需要的。

从[http://dev.mysql.com/doc/refman/5.5/en/create-table.html](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)：

> UNIQUE 索引创建一个约束，使得索引中的所有值都必须是不同的。如果您尝试使用与现有行匹配的键值添加新行，则会发生错误。对于所有引擎，UNIQUE 索引允许包含 NULL 的列有多个 NULL 值。

# python - 比较两个字典的效率

> ID：10417474
> 
> 赞同：0
> 
> 时间：2012-05-02T16:03:12.953
> 
> 标签：python, dictionary

以下程序已在两个文件（txt，约 10MB ea.）上运行了约 22 小时。每个文件大约有 100K 行。有人可以告诉我我的代码效率有多低，也许是一种更快的方法。输入 dict 是有序的，并且保持顺序是必要的：

```
import collections

def uniq(input):
  output = []
  for x in input:
    if x not in output:
      output.append(x)
  return output

Su = {}
with open ('Sucrose_rivacombined.txt') as f:
    for line in f:
        (key, val) = line.split('\t')
        Su[(key)] = val
    Su_OD = collections.OrderedDict(Su)

Su_keys = Su_OD.keys()
Et = {}

with open ('Ethanol_rivacombined.txt') as g:
    for line in g:
        (key, val) = line.split('\t')
        Et[(key)] = val
    Et_OD = collections.OrderedDict(Et)

Et_keys = Et_OD.keys()

merged_keys = Su_keys + Et_keys
merged_keys =  uniq(merged_keys)

d3=collections.OrderedDict()

output_doc = open("compare.txt","w+")

for chr_local in merged_keys:
    line_output = chr_local
    if (Et.has_key(chr_local)):
        line_output = line_output + "\t" + Et[chr_local]
    else:
        line_output = line_output + "\t" + "ND"
    if (Su.has_key(chr_local)):
        line_output = line_output + "\t" + Su[chr_local]
    else:
        line_output = line_output + "\t" + "ND"

    output_doc.write(line_output + "\n") 
```

输入文件如下：并非每个键都存在于两个文件中

```
Su:
chr1:3266359    80.64516129
chr1:3409983    100
chr1:3837894    75.70093458
chr1:3967565    100
chr1:3977957    100

Et:
chr1:3266359    95
chr1:3456683    78
chr1:3837894    54.93395855
chr1:3967565    100
chr1:3976722    23 
```

我希望输出如下所示：

```
chr1:3266359    80.645    95
chr1:3456683    ND        78 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:11:24.657

用这个替换`uniq`，因为输入是可散列的：

```
def uniq(input):
  output = []
  s = set()
  for x in input:
    if x not in s:
      output.append(x)
      s.add(x)
  return output 
```

这会将一个几乎`O(n^2)`过程减少到几乎`O(n)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:43:24.537

**你不需要你独特的功能。**

伪代码如：

1.  将文件 2 读取为 OrderedDict
2.  处理文件 1 写出它的项目（已经正确订购）
3.  pop，在输出行的最后一部分使用文件 2 中的默认值
4.  在文件一被消耗后，处理来自文件 2 的 Ordered dict

此外，爱情列表推导......您可以阅读该文件：

```
OrderedDict(line.strip().split('\t') for line in open('Ethanol_rivacombined.txt')) 
```

只有一个有序的 dict 和 'Sucrose_rivacombined.txt' 甚至从未进入内存。应该超级快

**编辑**完整代码（不确定您的输出行格式）

```
from collections import OrderedDict

Et_OD = OrderedDict(line.strip().split('\t') for line in open('Ethanol_rivacombined.txt'))

with open("compare.txt","w+") as output_doc:
    for line in open('Sucrose_rivacombined.txt'):
        key,val = line.strip().split('\t')
        line_out = '\t'.join((key,val,Et_OD.pop(key,'ND')))
        output_doc.write(line_out+'\n')

    for key,val in Et_OD.items():
        line_out = '\t'.join((key,'ND',val))
        output_doc.write(line_out+'\n') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:13:42.813

你`output`是一个列表，但你的输入是字典：它们的键是唯一的，但你`not in output`需要与列表中的*每个*元素进行比较，这是组合的。`not`（由于该检查，您正在进行 n^2 比较。）

您可能完全可以将 uniq 替换为：

```
Su_OD.update(Et_OD) 
```

这对我有用：

```
from collections import OrderedDict

one = OrderedDict()
two = OrderedDict()

one['hello'] = 'one'
one['world'] = 'one'

two['world'] = 'two'
two['cats'] = 'two'

one.update(two)

for k, v in one.iteritems():
    print k, v 
```

输出：

```
 hello one
    world two
    cats two 
```

# c++ - C++11 constexpr 字符串实现

> ID：10417478
> 
> 赞同：7
> 
> 时间：2012-05-02T16:03:24.077
> 
> 标签：c++, c++11, constexpr

有没有办法实现字符串在编译时和运行时都可以工作？

AFAIK 对于要构造的 constexpr 类，它需要有一个微不足道的析构函数。然而，当我们处理字符串时，这被证明是困难的。如果字符串不是 constexpr，那么它需要释放内存。但是，如果它是 constexpr，那么它是静态分配的，不应该被删除，从而允许一个微不足道的析构函数。

但是，不可能说“嘿，编译器！如果我是 constexpr，你就不需要破坏我！” 或者是吗？

这将类似于以下内容：

```
class string {
private:
    char * str;
public:
    template<std::size_t l>
    constexpr string(const char (&s)[l]) : str(&(s[0])) {}
    string(const char * s) { str = strdup(s); }
    static if (object_is_constexpr) {
        ~string() = default;
    }
    else {
        ~string() { free(str); }
    }
}; 
```

我能做到的最接近的是有两种不同的类型，string 和 constexpr_string，一个用户定义的文字 _string 返回 constexpr_string，以及一个用户定义的从 constexpr_string 到 string 的隐式转换。

虽然这不是很好，但可以`const auto s = "asdf"_string;`正常工作但`const string s = "asdf"_string;`不能。此外，指向 constexpr_string 的引用/指针不会转换。无论哪种方式的继承都会导致不直观的“陷阱”，并且不能解决第一个问题。

这似乎应该是可能的，只要编译器相信程序员不需要破坏 constexpr。

如果我有误解，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T16:18:58.167

这不仅仅是破坏的问题。

一个`constexpr`操作应该只调用其他`constexpr`操作`new`，`malloc`等等...*不是* `constexpr`。请注意，这是一个静态检查的属性，不依赖于运行时参数，因此对此类函数的调用必须完全不存在，而不仅仅是隐藏在（假定）未采用的分支中。

因此，永远不可能获得`constexpr` `string`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T08:35:55.997

在某种程度上，有可能看到[这个页面中的代码示例](http://en.cppreference.com/w/cpp/concept/LiteralType)。您可以创建 constexpr`conststr`对象并对它们调用一些操作，但不能将它们用作非类型模板参数。

# continuous-integration - 如何在 Bamboo 中找到当前工作目录？

> ID：10417486
> 
> 赞同：10
> 
> 时间：2012-05-02T16:04:02.513
> 
> 标签：continuous-integration, bamboo

这在当时似乎是个好主意

```
public static final String MY_CONFIG_FILE = System.getenv("APP_HOME") 
                                              + "/cfg/app.properties"; 
```

当将代码推送到 Bamboo 时，一些测试失败了

```
java.io.FileNotFoundException: ./cfg/app.properties (No such file or directory) 
```

我确实将 Bamboo 中的 EnvironmentVariable 设置为`APP_HOME=.`

然而，Bamboo 似乎仍然找不到该文件。请问我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T20:22:53.780

如果有人感兴趣，**为了引用当前工作目录**， `APP_HOME`应该设置为：

```
APP_HOME=${bamboo.build.working.directory} 
```

# asp.net-mvc-3 - 主页中的 Orchard CMS 渲染模块视图

> ID：10417487
> 
> 赞同：0
> 
> 时间：2012-05-02T16:04:04.870
> 
> 标签：asp.net-mvc-3, orchardcms

我正在尝试在主站点主页（〜/）中呈现在模块中定义的视图，因为它是主要内容。如果用户未通过身份验证，我需要显示登录/注册视图。

登录视图位于一个模块（产品模块）中，登录/注册视图位于另一个模块（帐户模块）中。登录视图需要一个服务调用来获取基于用户产品的数据。我目前正在使用标准 mvc 来呈现这些视图并在其控制器中获取它们所需的数据。

这可以通过将这些视图视为形状模板来实现吗？如果是这样，有没有像这样将视图拉到主页的例子？还是有更好的方法来实现这一目标？

我尝试实现 IHomePageProvider 以在 Product 模块中返回我自己的主页 ViewResult，但没有任何成功。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:03:37.527

首先，您可能想要查看小部件和图层。您可以为经过身份验证的用户定义一个层，为匿名用户定义一个层，并将小部件附加到这些层以实现您想要的。这可能是您完成此任务的最佳方式。查看 Orchard 文档以获取有关如何执行此操作的示例。

在使用自定义控制器和大量自定义逻辑之前，我做过类似的事情。由于我的特定要求，小部件和图层不适用于此。页面上的所有内容都需要根据某些输入进行更改，而小部件和图层将不太适合此操作。我所做的是创建一个自定义控制器，以及一个具有高优先级的相应 Route（因此 Route 优先于任何其他想要成为主页的人）。我根本没有弄乱 IHomePageProvider 。

在控制器操作中，我提取了必要的数据，并创建了我想要的形状，然后返回如下结果：`return new ShapeResult(this, homePageShape);`

`homePageShape`在 return 语句之前是这样构造的：

```
 // Create personalized home page shape: 
        var homeShape = _orchardServices.New.CustomHome(
            SomeShape1: someShape1
            , SomeShape2: someShape2
            , SomeModel1: someModel1
            ...
        ); 
```

这将创建一个名为 CustomHome 的形状，并且 orchard 将自动在模块的 views 文件夹中查找名为 CustomHome.cshtml 的模板。

我创建了几个形状（您在上面看到的所有“someShapeX”变量）。大多数情况下，它们是通过 BuildDisplay() 方法从内容部分创建的。使用 IContentManager 查询内容部分，并像这样创建形状（此示例用于幻灯片放映形状）：

```
 dynamic sliderShape = _contentManager.BuildDisplay(sliderPart, "Detail"); 
```

您可以将逻辑放入控制器中，以根据用户是否登录来构建所需的形状。在 CustomHome.cshtml 中，您将呈现如下形状：

```
 @Display(Model.SomeShape1) 
```

# activerecord - JRuby ActiveRecord/ActiveModel 没有为表列创建方法和属性（未定义的方法）

> ID：10417491
> 
> 赞同：0
> 
> 时间：2012-05-02T16:04:20.143
> 
> 标签：activerecord, jruby, activemodel

我正在使用 JRuby 1.6.7、ActiveRecord 3.2.3、activerecord-jdbc-adapter 1.2.2、activerecord-jdbcsqlanywhere-adapter-1.1.1 和当前的 Sybase JDBC4 驱动程序。目前还不能选择使用完整的 Ruby On Rails 应用程序。运行单元测试时出现以下错误。

```
    NoMethodError：未定义的方法“find_by_configuration_name”用于#
      org/jruby/RubyBasicObject.java:1687 处的方法缺失
      /home/lynchcs/.rvm/gems/jruby-1.6.5.1/gems/activerecord-3.2.3/lib/active_record/dynamic_matchers.rb:27 的方法缺失

```

我能够在正确识别表的单元测试中执行模式转储。这是表的架构。

```
 create_table "THE_CONFIGURATION", :primary_key => "CONFIGURATION_ID", :force => true do |t|
        t.string "CONFIGURATION_GROUP", :limit => 32
        t.string "CONFIGURATION_TYPE",  :limit => 32
        t.string "CONFIGURATION_NAME",  :limit => 32
        t.string "CONFIGURATION_TEXT",  :limit => 7168
      end 
```

这是我为它构建的模型。

```
 require 'rubygems'
    require 'active_record'

    class Configuration < ActiveRecord::Base
      self.table_name = 'SOART_CONFIGURATION'
      self.primary_key = 'configuration_id'
    end 
```

这是我用来管理连接的课程。此类确实成功连接到数据库并执行查询。

```
 require 'java'
    require 'rubygems'
    require 'active_record'

    class ConnectionMaster
      def test_object
        "ARBITRARY"
      end

      def set_connection
        ActiveRecord::Base.establish_connection(
        :adapter => 'jdbc' ,
        :driver => 'com.sybase.jdbc4.jdbc.SybDriver' ,
        :url => 'jdbc:sybase:Tds:192.168.137.137:1111/MYAPP' ,
        :username => 'noneya' ,
        :password => 'noneya'
        )
        ActiveRecord::Base.connection.execute("SELECT 'ARBITRARY' AS ARBITRARY")
      end

      def clear_connections
        ActiveRecord::Base.clear_active_connections!
      end

    end 
```

执行“config = Configuration.find_by_configuration_name('test')”时会出错。如果您注释掉这一行，它将在“config.configuration_text”行中出错。

```
 public void testRubyDatabaseQuery() {
        String theValue = "test";
        String jrubyCode =
        "require 'connection_master' \n"
        + "require 'configuration' \n"
        + "cm = ConnectionMaster.new \n"
        + "cm.set_connection \n"
        + "puts 'black cow of revenge' \n"
        + "config = Configuration.find(:all,:conditions => ['configuration_name=?','test']) \n"
        + "config = Configuration.find_by_configuration_name('test') \n"
        + "puts 'red cow of revenge' \n"
        + "cm.clear_connections \n"
        + "config.configuration_text \n";
        String executeValue = (String)JRubyMaster.execute(jrubyCode);
        this.assertEquals("executeValue and theValue do not match.", theValue, executeValue);
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:51:58.137

在构建问题时，我找到了自己的答案:) 我觉得继续发布问题和答案很有趣。

在我的第一次尝试中，我使用了activerecord-jdbc-adapter，问题是我使用的是“Configuration.find_by_configuration_name”，而它正在构建的是“Configuration.find_by_CONFIGURATION_NAME”，与“config.configuration_text”相同。数据库中大写的列名和 activerecord-jdbc-adapter 创建了大写的方法。一旦进行了更改，由于使用“LIMIT”，它开始抛出无效的 sql 错误。

然后我切换到使用activerecord-jdbcsqlanywhere-adapter，它与“Configuration.find_by_configuration_name”和“config.configuration_text”一起工作，但单元测试失败了。这是因为它构建了“returnValue[0]['arbitrary']”而不是“returnValue[0]['ARBITRARY']”，尽管我的查询是“SELECT 'ARBITRARY' AS ARBITRARY”。activerecord-jdbcsqlanywhere-adapter 强制所有内容为小写。

# sql-server-2008 - join子句和where子句条件的区别

> ID：10417493
> 
> 赞同：2
> 
> 时间：2012-05-02T16:04:29.983
> 
> 标签：sql-server-2008

我想知道以下两个 SELECT 语句之间的区别（视觉上）是最好的。

```
SELECT P.* and X.* 
FROM Table1 P
LEFT OUTER JOIN 
    Table2 X ON
    and  p.B=x.B
and  p.C=x.C
and  p.F=x.F
and  p.D=x.D 

WHERE X.F= 1 and X.E=4 
```

和

```
SELECT P.* and X.* 
FROM Table1 P
LEFT OUTER JOIN 
    (SELECT * FROM Table2 WHERE X.F= 1 and X.E =4) X
    and  p.B=x.B
and  p.C=x.C
and  p.F=x.F
and  p.D=x.D 
```

它们返回的行数不同。假设 Table1 有 5000 行，Table2 也有 5000 行。第一条`select join`语句返回约 40000 行（特定于我在工作中的查询），然后当应用该`where`子句时，它返回大约 2000 行。

第二条`select join`语句返回 5000 行（原始数字）。这是我想要的号码。

但我似乎无法理解为什么会这样。我的知识和可视化连接有点薄弱。

示例数据：请更改临时表的名称，它们是相同的。此外，我无法提供正确的列名，但已编辑我的代码以指示我想要匹配的列这是 TABLE1：

```
 SELECT * INTO #tmp_GridResults_1
FROM (
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'1' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'1' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'1' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'1' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'1' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'1' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'1' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'1' AS [E], N'2' AS [F] ) t;
SELECT [ID], [B], [C], [D], [E], [F]
FROM #tmp_GridResults_1

DROP TABLE #tmp_GridResults_1
GO 
```

这是表 2： --------------- #tmp_GridResults_1 ---------------

```
SELECT * INTO #tmp_GridResults_1
FROM (
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'0' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'0' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'0' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'0' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'0' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'0' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'0' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'0' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'-1' AS [D], N'1' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'-1' AS [D], N'1' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'-1' AS [D], N'1' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'-1' AS [D], N'1' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'1' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'1' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'1' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'1' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'1' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'1' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'1' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'1' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'-1' AS [D], N'2' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'-1' AS [D], N'2' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'-1' AS [D], N'2' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'-1' AS [D], N'2' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'2' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'2' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'2' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'2' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'2' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'2' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'2' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'2' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'-1' AS [D], N'3' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'-1' AS [D], N'3' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'-1' AS [D], N'3' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'-1' AS [D], N'3' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'3' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'3' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'3' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'3' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'3' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'3' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'3' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'3' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'-1' AS [D], N'4' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'-1' AS [D], N'4' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'-1' AS [D], N'4' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'-1' AS [D], N'4' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'4' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'4' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'4' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'4' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'4' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'4' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'4' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'4' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'-1' AS [D], N'98' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'-1' AS [D], N'98' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'-1' AS [D], N'98' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'-1' AS [D], N'98' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'98' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'98' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'0' AS [D], N'98' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'0' AS [D], N'98' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'98' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'98' AS [E], N'1' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'1' AS [C], N'1' AS [D], N'98' AS [E], N'2' AS [F] UNION ALL
SELECT N'0' AS [ID], N'P' AS [B], N'2' AS [C], N'1' AS [D], N'98' AS [E], N'2' AS [F] ) t;
SELECT [ID], [B], [C], [D], [E], [F]
FROM #tmp_GridResults_1

DROP TABLE #tmp_GridResults_1
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:11:21.433

如果您将过滤条件放在 WHERE 子句中，并且该条件规定了针对联接的“外部”表的条件，那么您实际上可以将该外部联接转变为内部联接。针对外部连接表的过滤条件属于连接，而不是位置。

这个版本产生多少行？

```
SELECT P.*, X.* 
FROM Table1 P
LEFT OUTER JOIN Table2 X
    on P.Id = X.id 
    and P.name = X.name 
    and P.age = X.age 
    AND X.bar = 1 
    and X.name ='value'; 
```

从理论上讲，这应该产生 >= 您的第一个语句中的行数，并且 = 您的第二个语句中的行数。

如果您想将此与现有结果进行比较，您可以执行以下操作：

```
SELECT P.*, X.* 
FROM Table1 P
LEFT OUTER JOIN Table2 X
    on P.Id = X.id 
    and P.name = X.name 
    and P.age = X.age 
    AND X.bar = 1 
    and X.name ='value'
EXCEPT
SELECT P.* and X.*
FROM Table1 P
LEFT OUTER JOIN 
    (SELECT * FROM Table2 WHERE X.bar = 1 and X.name ='value') X
    on P.Id = X.id 
    and P.name = X.name 
    and P.age = X.age; 
```

如果你没有得到结果，它们是相同的。你也可以用相反的方式来做：

```
SELECT P.*, X.* 
FROM Table1 P
LEFT OUTER JOIN Table2 X
    on P.Id = X.id 
    and P.name = X.name 
    and P.age = X.age 
    AND X.bar = 1 
    and X.name ='value'
INTERSECT
SELECT P.* and X.*
FROM Table1 P
LEFT OUTER JOIN 
    (SELECT * FROM Table2 WHERE X.bar = 1 and X.name ='value') X
    on P.Id = X.id 
    and P.name = X.name 
    and P.age = X.age; 
```

如果您获得 5000 行（或者后一个查询本身的确切行数），那么结果集是相同的。

# coordinates - 如何使用 Kinect 从不同对象获取真实世界坐标（x、y、z）

> ID：10417495
> 
> 赞同：10
> 
> 时间：2012-05-02T16:04:38.360
> 
> 标签：coordinates, kinect

我必须使用 Kinect 获取真实世界坐标 (x, y, z)。实际上，我想要 Kinect 的 x、y、z 距离（以米为单位）。我必须从场景中的一个独特对象（例如一个小黄色框）中获取这些坐标，并以不同的颜色着色。

在这里你可以看到一个场景的例子

![在此处输入图像描述](../Images/7c7f702a6eaa3014acfdc830b1807094.png)

我想要架子上黄色物体的距离（x，y，z，以米为单位）。

请注意，场景中不需要人（骨架）。

首先，我想知道这样做是否可行且简单？因此，如果您发送一些可以帮助我完成此任务的链接/代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-24T07:41:10.663

您需要同时使用[Color Stream](http://msdn.microsoft.com/en-us/library/jj131027.aspx)和[Depth Stream](http://msdn.microsoft.com/en-us/library/jj131028.aspx)。

首先，使用 ，`Color Stream`您需要收集与您正在寻找的颜色相匹配的像素数组，然后从`Depth Stream`这些像素中查找深度数据以获得与相机的平均距离。这给了你`Z`.

要获得`X`and`Y`你会使用[这个](https://stackoverflow.com/a/18199938/771466)答案中的数学。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:27:43.090

从特定关节的 Position.Z 获得的 Z 距离（从对象到 kinect）。所以得到它是没有问题的。X 和 Y。这取决于您想要从关节到关节还是从关节到 Kinect 的距离。你可以计算一下。使用数学。您需要拍摄 kinect 的视角和距离

# c# - 检查通过 ajax 方法提交的用户输入

> ID：10417497
> 
> 赞同：0
> 
> 时间：2012-05-02T16:04:42.587
> 
> 标签：c#, .net, validation

我创建了一个通用处理程序 (.ashx) 来处理来自 html 页面中某些下拉列表的一些简单输入。我知道我应该检查数据以确保它有效，所以我创建了以下代码

```
string ProjectNumber = context.Request.Form["JobNumber"];
string ProjectShare = context.Request.Form["ProjectShare"];

if (ProjectNumber == null || ProjectNumber == string.Empty) {
     throw new Exception("Project number cannot be empty or null");
}

if (ProjectShare == null || ProjectShare == string.Empty) {
      throw new Exception("Project Share cannot be empty or null");
} 
```

有没有更好的方法来处理这个输入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:17:50.080

您可以使用该`System.String.IsNullOrEmpty()`方法并确保在将数据传递给处理程序之前执行客户端/js 验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:17:34.803

您应该对输入值强制执行更多验证规则（不仅仅是“空/空”字符串检查）。这取决于值的用途。一些基本验证如*数据类型、数据范围、格式*等检查。您可以定义单独的验证类来验证用户输入，以便您可以在其他地方重用验证代码；例如：

```
public class DataValidator
{
    public ValidationResult ValidateProjectNumber(string projectNumber)
    {
        //ProjectNumber validation rules...
        if (string.IsNullOrWhiteSpace(projectNumber))
            return new ValidationResult("Project number is requried.");

        int projectId;//say your project number is int.
        if (int.TryParse(projectNumber, out projectId))
            return new ValidationResult(string.Format("Project Number '{0}' is not a valid number."));

        // more checks....

        return ValidationResult.Success;
    }

    public ValidationResult ValidateProjectShare(string projectShare)
    {
        //projectShare validation rules...

        return ValidationResult.Success;
    }
} 
```

我还建议，不要为无效输入抛出异常。而是将验证结果作为 JSON/xml 发送到客户端，并以用户友好的方式显示错误消息。

# css - 多背景图片定位

> ID：10417501
> 
> 赞同：39
> 
> 时间：2012-05-02T16:05:09.853
> 
> 标签：css, background, background-image, background-position

我有三个背景图像，宽度均为 643 像素。我希望它们像这样排列：

*   ***顶部图像****（12px 高度）无重复*

*   ***中间图像****重复-y*

*   ***底部图像****（12px 高度）无重复*

如果不让它们重叠，我似乎无法做到这一点（这是一个问题，因为图像是部分透明的），这样的事情可能吗？

```
background-image:    url(top.png),
                     url(bottom.png),
                     url(middle.png);

background-repeat:   no-repeat,
                     no-repeat,
                     repeat-y;

background-position: left 0 top -12px,
                     left 0 bottom -12px,
                     left 0 top 0; 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-12T18:49:09.143

您的问题是，`repeat-y`无论您最初将其放置在何处，它都会填满整个高度。因此，它与您的顶部和底部重叠。

一种解决方案是将重复背景推入位于容器`12px`顶部和底部的伪元素中。[结果可以在这里看到](http://jsfiddle.net/TdgjU/8/)（演示中的不透明度只是为了表明没有重叠发生）。没有不透明度，[请参见此处](http://jsfiddle.net/TdgjU/9/)。相关代码（在CSS3浏览器中测试：IE9、FF、Chrome）：

**CSS**

```
div {
    position: relative;
    z-index: 2;
    background: url(top.png) top left no-repeat, 
                url(bottom.png) bottom left no-repeat;
}

div:before {
    content: '';
    position: absolute;
    z-index: -1; /* push it to the background */
    top: 12px; /* position it off the top background */
    right: 0;
    bottom: 12px; /* position it off the bottom background */
    left: 0;
    background: url(middle.png) top left repeat-y;
} 
```

如果您需要或想要 IE8 支持（不支持多个背景），那么您可以将顶部背景放在主 div 中，并使用`div:after`位于容器底部的伪元素将底部背景放入。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-12T20:41:55.177

如果您可以将填充/边框添加到等于您要定位的背景而不与其他块重叠的块中，您可以使用`background-clip`&`background-origin`将顶部和底部背景定位在填充/边框上，并将重复背景定位在内容/填充上+内容。

这是一个例子：[http ://dabblet.com/gist/2668803](http://dabblet.com/gist/2668803)

对于您的代码，您可能需要添加如下内容：

```
padding: 12px 0;
background-clip: padding-box, padding-box, content-box;
background-origin: padding-box, padding-box, content-box; 
```

或者

```
border: solid transparent;
border-width: 12px 0;
background-clip: border-box, border-box, padding-box;
background-origin: border-box, border-box, padding-box; 
```

你会得到你需要的。如果您无法获得填充/边框，那么提到的 ScottS 之类的伪元素将完美运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T16:09:21.700

尝试这样做：

```
 background: url(PICTURE.png) left top no-repeat, url(PICTURE2.png) right bottom no-repeat, url(PICTURE3.jpg) left top no-repeat;
    } 
```

**编辑：只是一个例子，但这是你的 css 的 css：**

```
background: url(top.png) left 0px top -12px no-repeat, url(middle.png) left 0px top 0px repeat-y, url(bottom.png) left 0px bottom -12px no-repeat;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-27T20:24:20.390

我实际上找到了一个更简单的解决方法，因为我在水平导航中遇到了同样的问题。

而不是像其他答案一样添加代码，您只需在 CSS 中以不同的方式列出它。重复的中心图像需要最后列出，而不是第一个或第二个。

在我的代码中，它看起来像这样：

```
background-image: url(../images/leftNav.gif), url(../images/rightNav.gif), url(../images/centerNav.gif);
background-position: left, right, center;
background-repeat: no-repeat, no-repeat, repeat-x; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-10T12:08:41.983

如果：

1.  您想将不重叠的背景应用到 ":before"
2.  ":before" 元素作为已知的最大高度

* * *

```
&:before {
    background: url('vertical-line.png') no-repeat 0px,
                url('vertical-line-repeat.png') no-repeat 140px,
                url('vertical-line-repeat.png') no-repeat 200px,
                url('vertical-line-repeat.png') no-repeat 260px,
                url('vertical-line-repeat.png') no-repeat 320px,
                url('vertical-line-repeat.png') no-repeat 380px,
                url('vertical-line-repeat.png') no-repeat 440px,
                url('vertical-line-repeat.png') no-repeat 500px,
                url('vertical-line-repeat.png') no-repeat 560px,
                url('vertical-line-repeat.png') no-repeat 620px,
                url('vertical-line-repeat.png') no-repeat 680px,
                url('vertical-line-repeat.png') no-repeat 740px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T23:31:55.037

**这是一种对Top**、**Middle**和**Bottom**图像使用 3 个 div 的方法，这些图像透明地应用于您的网页。

背景壁纸是可选的。

在现代浏览器中测试并且是 IE8 友好的。

此方法允许您按应处理的方式处理**正文**元素，即您的网页标记不需要**位于**包装器或包含元素中。

[jsFiddle 示例](http://jsfiddle.net/kyUUY/1/)
[居中填充的 jsFiddle 示例](http://jsfiddle.net/kyUUY/2/)

由于上面的示例对顶部和底部图像使用了不透明的图像占位符内容，因此您可以使用此 jsFiddle 在重复模式[HERE](http://jsfiddle.net/kyUUY/)中使用迷你透明图标来验证标记是否具有透明度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-31T01:36:41.517

我认为`z-index`会解决此问题，因为`z-index`仅影响 CHILD 元素，这意味着您不能在使用`z-index`.

顶部和底部图像`z-index:3;`

中间图像`z-index:2;` `background-repeat:repeat-y;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-19T16:03:09.627

我看到的唯一（实用的，不威胁头发的）方法是在 Javascript 中执行此操作，当页面加载时，当它被调整大小时，画布大小适合 innerHeight 和 3 个图像：绘制第一个在顶部，根据需要绘制第二个以覆盖画布的其余部分，并在画布底部绘制第三个。将画布定位在 0,0 处，z-index 为负值。

我尝试了 3 张图像（643 x 12、100 和 12），当然我看到的第一个问题是第三张图像是在第二张图像的最后一次迭代的一部分上绘制的——除非你有一个窗口高度正好是 12+12+(p2.height*X)，你会有一些重叠。但这是意料之中的，对吧？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-09T11:56:16.690

to use backgroud-position with 2 arguments, must to Write in extended writing `backgroud-position-x` and `backgroud-position-y`

```
background-position-x: left 0;
background-position-y: top -12px, bottom -12px, top 0; 
```

# arraylist - Antlr Stringtemplate V4 ArrayList 迭代的问题

> ID：10417507
> 
> 赞同：0
> 
> 时间：2012-05-02T16:05:25.400
> 
> 标签：arraylist, loops, stringtemplate

这是我在java中的测试

```
public class person
{
    public String name;
    public int age;
    public String getName() { return name; }
    public int getAge() { return age; }
} 
```

在我的函数中，我创建了一些人员对象并将其添加到列表中

```
ArrayList<person> arr = new ArrayList<person>()
arr.add(person1);
arr.add(person2); etc etc 
```

在我得到的字符串模板组文件中

```
test(arr) ::= <<
 <table>
 $arr: {a|
 <tr><td>$a.name$</td><td>$a.age$</td></tr>
 }$
 </table>
>> 
```

这是从我的列表模板中调用的

```
list (arr) ::= <<

$test(arr)$

... and other page details etc
>> 
```

在 version4 中，我收到带有一些堆栈跟踪的模板未找到消息，如下所示

```
Caused by: java.lang.ClassCastException: java.util.ArrayList
at org.antlr.runtime.tree.RewriteRuleTokenStream.nextNode(RewriteRuleTokenStream.java:58)
at org.stringtemplate.v4.compiler.STParser.subtemplate(STParser.java:1563)
at org.stringtemplate.v4.compiler.STParser.mapTemplateRef(STParser.java:3692) 
```

但我可以按如下方式列出一个数组，并以字符串格式打印对象表示（我也可以使用映射 - 即键值对也可以）

在字符串模板中

```
test(arr) :: =<<
 <p>
 $arr; seperator="</br>"$
 </p>
>> 
```

我们如何迭代对象列表以使用 V4 中的字符串模板 grop 打印字段值我是否以错误的格式/语法使用它？

任何帮助/点都会很棒

注意：我们使用 new STGroupString("", templateGroup, '$', '$'); 将 $ 设置为分隔符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:26:26.257

您缺少表达式中的终止 $： $a.age 应该是 $a.age$

# iphone - iOS 短信预审批

> ID：10417509
> 
> 赞同：-1
> 
> 时间：2012-05-02T16:05:28.363
> 
> 标签：iphone, ios, sms

尽管 Apple 不允许应用程序在未经用户明确许可的情况下发送短信（与 Android 不同，它只要求您在安装应用程序时请求这样的权限），但我想知道是否有人对解决此问题的其他方法有任何想法问题。具体来说：

*   是否可以允许用户预先批准特定的短信，并将其延迟发送到所需的时间？
*   可以使用外部客户端吗？例如，ping 一个服务器来为用户做发送短信的工作？不过，这似乎会很快变得丑陋（因为需要提供提供商信息），并且需要用户能够访问互联网，而不仅仅是手机信号。但是，也许应用程序可能需要初始化文本。

这里的目标是在用户自己无法发送特定文本消息时为他们发送特定的文本消息，因此自然而然地，让他们预先批准该消息是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:19:03.207

您不能直接从设备发送短信。

但是我认为从网络服务器发送它们没有问题，但是您的应用程序需要有互联网连接才能执行此操作，而且我不知道有一项服务可以让您免费发送短信，因此您需要付费向您的用户提供此服务（我不能说 Apple 是否可以向您的用户收取此类服务的费用）。此解决方案的另一个缺点是，文本消息的发送者可能不是用户号码。

# wcf - 通过 WCF 中的 WSHttpBinding 上传大文件

> ID：10417514
> 
> 赞同：1
> 
> 时间：2012-05-02T16:05:47.990
> 
> 标签：wcf, file-upload, wcf-binding

我正在使用 WSHttpBinding 开发 WCF 文件上传器。我希望上传大约 10 mb 的文件（不是在那个游戏上玩精确的游戏，但不会让文件变得更大）。一切都很好，最高可达 5mb。之后，我开始收到 HTTP 500 错误。

我的绑定设置如下：

```
wsBinding.ReaderQuotas = System.Xml.XmlDictionaryReaderQuotas.Max;
wsBinding.MaxBufferPoolSize = 52428800;
wsBinding.MaxReceivedMessageSize = 13631488;
wsBinding.ReceiveTimeout = new TimeSpan(0, 3, 0); 
```

我的 httpRuntime maxRequestLength 在 web.config 中是 20480kb

我的请求如下所示：

```
POST http://mywebsite/FileUploader.svc HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: application/soap+xml;charset=UTF-8;action="http://namespace/UploadPhoto"
Content-Length: 13979476
Host: mywebsite
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:fil="http://namespace">
   <soap:Header xmlns:wsa="http://www.w3.org/2005/08/addressing"><wsa:Action>http://namespace/IFileUploaderSvc/UploadPhoto</wsa:Action></soap:Header>
   <soap:Body>
      <fil:UploadPhoto>
         <fil:AuthorizationToken>(Password)</fil:AuthorizationToken>
         <fil:ProgramName>AProgram</fil:ProgramName>
         <fil:FileName>bigolefile.jpg</fil:FileName>
         <fil:File>(base 64 file data)</fil:File>
      </fil:UploadPhoto>
   </soap:Body>
</soap:Envelope> 
```

我使用 WSHttpBinding 而不是 WebHttpBinding 非常重要。在此先感谢，安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:05:56.923

尝试将 TextMessageEncodingBindingElement 或 MtomMessageEncodingBindingElement 用于 WSHttpBinding 绑定中的 messageEncoding 属性。

例如，以下代码段使用 TextMessageEncodingBindingElement。**messageEncoding="文本"** [http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

```
 <wsHttpBinding>
    <binding name="wsHttpWithMessageSecurity" messageEncoding="Text"
             closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00"
             sendTimeout="00:01:00" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"  textEncoding="utf-8"
                useDefaultWebProxy="true"
                allowCookies="false">

      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" 
                    maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" /> 
```

# pdf-generation - 在线创建和编辑文档

> ID：10417515
> 
> 赞同：0
> 
> 时间：2012-05-02T16:05:48.407
> 
> 标签：pdf-generation, documents

我需要什么语言或技术才能在线创建文档？我希望能够添加文本和图像并将它们移动到位置、调整大小等，类似于[this](http://www.vistaprint.co.uk/vp/ns/easypath/studio.aspx?pf_id=A42&combo=143708.142.1.176554|176554|137|0&uei=190187&icparts=yes&ag=true&combo_id=195274&ssc=1&ag_category_id=1631&filter=9%3a10013||1%2c24%3a10073||1%2c24%3a10074||1%2c24%3a10075||1%2c24%3a10076||1%2c24%3a10351||1%2c24%3a10352||1%2c3%3a10077||1%2c4294938004%3a4294937413%3a4294937409||2&xnav=previews&xnid=button&rd=2&ref=1&referer=http%3a%2f%2fwww.vistaprint.co.uk%2fgallery.aspx%3fpg%3d39%26category_id%3d1631%26xnav%3dTsrItem)。

然后完成后，从它们创建一个 PDF。

抱歉，如果这有点模糊，我只需要知道从哪里开始研究。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:55:52.627

您需要决定您的基本技术：Flash、Silverlight、Canvas、客户端 SVG、服务器端 SVG 或服务器端位图。还有一些商业解决方案适用于 Adob​​e InDesign 文档（可能还有许多其他专有格式），但我希望这些解决方案不会便宜。

Flash/Silverlight 需要插件，并且被一些人认为是一种垂死的技术——尽管我确信这是有争议的。Canvas 是“非常 HTML5”，本质上是在客户端构建/渲染的位图，但如果您最终渲染为 PDF，它可能无法提供您需要的分辨率。同样的限制也会影响构建图像服务器端 - 您可能应该处理矢量元素和位图，而不是随时将所有内容渲染为像素。

这将 SVG 留在我的列表中，无论是在客户端（请参阅 RaphaelJS）还是在服务器（请参阅 Inkscape）。我目前正在做一些关于服务器端 SVG 渲染的工作，而且很有希望；尽管比客户端受到更多的可扩展性问题，但它不会受到浏览器兼容性问题或浏览器渲染限制的影响。

浏览器 SVG 渲染中最大的问题是在路径中/路径上流动的段落文本和文本 - 我不确定这些在现代浏览器中的实现情况如何，或者它们之间有多少协议。考虑到其中一些需要 SVG1.2，而浏览器（afaik）在多年后才刚刚适应 SVG1.1，情况尤其如此。但是，如果您只想制作标准的文本块、位图和矢量元素，那么基于浏览器的 SVG 应该适合您。

您给出的示例使用服务器端技术（SVG，或者可能是商业格式）并在客户端呈现为低分辨率 PNG。

在您的情况下，一旦您考虑了如何“进行编辑”，您将需要考虑如何渲染为 PDF，这将在服务器上完成。您可以使用 FPDF 之类的底层工具，使用 Jasper 之类的报告渲染器，或者使用 GhostScript、Inkscape、Scribus、ps2pdf、svg2pdf 等图形系统。

*旁白：我通常不会在没有明显的事先研究的情况下回答问题。但是，既然您已经表明您确实会执行此操作，我很乐意帮助您开始。*

# ruby-on-rails - 在模型中使用设计助手

> ID：10417520
> 
> 赞同：3
> 
> 时间：2012-05-02T16:06:10.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

有没有办法在模型中使用设计的控制器助手，即 user_signed_in？我尝试将以下行添加到我的用户模型中，但这似乎不起作用：

```
include Devise::Controllers::Helpers 
```

更具体地说，我希望允许在没有密码的情况下创建用户，为此我正在实施方法“password_required？”。在该方法中，我想检查（在创建用户之前）是否另一个用户正在创建该用户，或者他/她正在注册的天气。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-02T19:00:34.190

您无法在模型中访问控制器助手。但是，您可以在用户之间建立一种关联，允许您代表彼此创建用户

看看如何实现它的 rbates 截屏视频

[http://railscasts.com/episodes/163-self-referential-association](http://railscasts.com/episodes/163-self-referential-association)

# javascript - 为什么这段 JavaScript 代码不能为窗口设置动画？

> ID：10417522
> 
> 赞同：0
> 
> 时间：2012-05-02T16:06:13.043
> 
> 标签：javascript, dom

我是 JavaScript 新手，刚开始学习窗口方法。我想写这个方法来让一个新窗口从屏幕的左端移动到右端。但是，代码不起作用。

有人可以告诉我哪里出错了。

```
 <!doctype html>
<html>
<title>Avoid Window</title>
<head>
<script type="text/javascript">
    var MovingWindow;   

    function CreateWindow()
    {
        MovingWindow = window.open('','MovingWindow','width=100,height=100,menubar=0,toolbar=0,location=0,resizeable=0,status=0');
        window.MovingWindow.moveTo(0,0);
        while( window.MovingWindow.screenX < window.screen.width - window.MovingWindow.width)
        {

            window.MovingWindow.moveBy(1,0);
        }

    }
</script>
</head>
<body>
<h1>Avoid Window</h1>
<p> Click on the button below to create a window which moves from one end of the screen to the other end of the screen</p>
<input type="Button" onClick="CreateWindow();" value="Create Window"/>
<input type="Button" onClick="MoveWindow();" value="Move Window"/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:13:37.690

您不能循环制作动画。只要函数正在运行，用户界面就不会更新。您的函数将更改窗口的坐标，当函数结束时，窗口将在最终位置重绘。

使用该`window.setInterval`方法开始一个可以移动窗口的间隔：

```
var timer = window.setInterval(function(){
  if (window.MovingWindow.screenX < window.screen.width - window.MovingWindow.width) {
    window.MovingWindow.moveBy(1,0);
  } else {
    window.clearInterval(timer);
  }
}, 100); 
```

然而，正如 Daniel A. 所指出的，一些浏览器不允许客户端脚本移动窗口。如果它在您的浏览器中不起作用，您可以更改设置以测试该`setInterval`方法是否有效。

# python - 为什么 Photoimage put() 慢？

> ID：10417524
> 
> 赞同：6
> 
> 时间：2012-05-02T16:06:14.873
> 
> 标签：python, tkinter

操作`PhotoImage`对象时：

```
import tkinter as tk

img = tk.PhotoImage(file="myFile.gif")
for x in range(0,1000):
  for y in range(0,1000):
    img.put("{red}", (x, y)) 
```

该`put`操作需要很长时间。有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T01:00:57.503

使用边界框：

```
from Tkinter import *
root = Tk()
label = Label(root)
label.pack()
img = PhotoImage(width=300,height=300)
data = ("{red red red red blue blue blue blue}")
img.put(data, to=(20,20,280,280))
label.config(image=img)
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-23T22:19:01.263

只需使用命令的`to`可选参数`put()`就足够了，无需创建复杂的字符串：

```
import tkinter as tk
root = tk.Tk()

img = tk.PhotoImage(width=1000, height=1000)
data = 'red'
img.put(data, to=(0, 0, 1000, 1000))
label = tk.Label(root, image=img).pack()

root_window.mainloop() 
```

* * *

# 进一步的观察

我在 PhotoImage 的文档中找不到太多内容，但该`to`参数比标准循环更有效地缩放数据。这里有一些我会觉得很有帮助的信息，这些信息似乎没有在网上得到很好的记录。

该`data`参数接受一串以空格分隔的颜色值，这些颜色值要么命名为（[官方列表](https://www.tcl.tk/man/tcl8.5/TkCmd/colors.htm)），要么是一个 8 位颜色十六进制代码。该字符串表示每个像素要重复的颜色数组，其中具有多种颜色的行包含在花括号中，而列仅以空格分隔。行必须具有相同数量的列/颜色。

```
acceptable:
3 column 2 row: '{color color color} {color color color}'
1 column 2 row: 'color color', 'color {color}'
1 column 1 row: 'color', '{color}'

unacceptable:
{color color} {color} 
```

如果使用包含空格的命名颜色，则必须用大括号括起来。IE。'{道奇蓝}'

这里有几个示例来说明上述操作，其中需要一个冗长的字符串：

```
img = tk.PhotoImage(width=80, height=80)
data = ('{{{}{}}} '.format('{dodger blue} ' * 20, '#ff0000 ' * 20) * 20 +
        '{{{}{}}} '.format('LightGoldenrod ' * 20, 'green ' * 20) * 20)
img.put(data, to=(0, 0, 80, 80)) 
```

[![在此处输入图像描述](../Images/cab18581da0bfcbc52d5f6b6f5f556f1.png)](https://i.stack.imgur.com/WpfWO.png)

```
data = ('{{{}{}}} '.format('{dodger blue} ' * 20, '#ff0000 ' * 10) * 20 +
        '{{{}{}}} '.format('LightGoldenrod ' * 20, 'green ' * 10) * 10) 
```

[![在此处输入图像描述](../Images/97a9c73ee31e2f5b11916602f814a1a5.png)](https://i.stack.imgur.com/Rbjk0.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T17:20:16.447

尝试构造一个二维颜色数组并`put`使用该数组作为参数进行调用。

像这样：

```
import tkinter as tk

img = tk.PhotoImage(file="myFile.gif")
# "#%02x%02x%02x" % (255,0,0) means 'red'
line = '{' + ' '.join(["#%02x%02x%02x" % (255,0,0)] * 1000) + '}'
img.put(' '.join([line] * 1000)) 
```

# iphone - 在块内调用 tableview 方法

> ID：10417528
> 
> 赞同：-1
> 
> 时间：2012-05-02T16:06:29.643
> 
> 标签：iphone, xcode, uitableview, objective-c-blocks

我有一个调用块的方法，然后块重新加载tableviewcontroller重新加载数据的方法的tableview。但是诀窍是该块在不同的类中被调用。我的问题是如何做到这一点，当我调用 [self.tableview reload data] 时，它会调用父类的函数：

```
[pro refreshMatchesWithCallback:^ 
    {
        if ([pro.matches count] > 0) {
        //[self.tableView reloadData];
        NSLog(@"the count of a lifetime is %@", [pro.matches objectAtIndex:0]);
        }
    }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:08:20.113

使用`NSNotificationCenter`并将父类设置为侦听器，或者您可以使用委托方法并将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:15:22.657

所以基本上这个问题更简单，因为这些块是无关紧要的。

简单的问题是：如何在另一个控制器中执行方法。 [简单的答案就在这里](https://stackoverflow.com/a/9731162/312312)

# forms - MS Access 表单事件，VBA

> ID：10417530
> 
> 赞同：1
> 
> 时间：2012-05-02T16:06:42.807
> 
> 标签：forms, ms-access, vba

我在访问表单中有 3 个字段。

*   字段 1 - 是一个预先填充了一些数据的文本字段。没有空记录
*   字段 2 - 是一个预先填充了一些数据的文本字段。它可以有一个值或为空。
*   字段 3 - 是一个文本字段。用户将在该字段中输入信息。

有一个规则。如果字段 2 中有空值，则字段 3 将等于字段 1 的值，因此我希望它自动从字段 1 填充字段 3。如果值不为空，则用户将手动填充字段记录.

我已经设置了一个表单加载事件：

```
If Me.field2 = "" Then
   Me.field3 = Me.field1 
```

我遇到的问题是，用户可能想要更改字段 1 的预填充值，如果相应的字段 2 记录为空白，我希望使用用户在字段 1 中更改的相同值更新字段 3。我不想一直重新加载表单才能进行此更新。我在 After_Update 事件和 change 事件中尝试了上述语法，但它没有更新。

谁能建议我做错了什么？

谢谢，迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:26:59.717

对空字符串或 null 的另一个测试是

```
if len(field1 & "")=0 then 'do null stuff 
```

将空字符串附加到 null 或空字符串会产生一个空字符串，然后您可以测试它的长度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:47:32.137

迈克已经得到了他的答案，但我会以解释的形式给出更完整的答案。

这里的问题是您正在尝试将一个字段`null`与一个空字符串进行比较。就像你已经完成了

```
if null = "" then
    'do stuff
end if 
```

问题是在`null`比较中使用时，结果始终为空 - 这导致`if`评估为假。你甚至不能这样做：

```
if not(null) then
    'do stuff
end if 
```

或者

```
if not (null <> "") then
    'do stuff
end if 
```

传统的解决方案是我们`isnull(x)`，它评估为`true`if `x`is `null`。

正如蒂姆威廉姆斯所说，您可以使用：

```
IsNull(x) or x="" 
```

如果只能为空字符串返回 null，有些人可能会认为`x=""`是多余的。`x`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-10T08:05:17.860

这也有效：

```
if Nz(Field1, "") <> "" then 'do null / empty stuff 
```

# tsql - Tsql 唯一记录分组

> ID：10417535
> 
> 赞同：0
> 
> 时间：2012-05-02T16:06:57.603
> 
> 标签：tsql, group-by, ssms

我正在使用 SSMS 2008 R2，我正在尝试将此查询的输出压缩为一行/全名。我该怎么做呢？这是我的查询：

```
select top 500
CASE when pv.conversion_id_no is not null then pv.conversion_id_no else prv.id_no end as id_number,
eiev.full_name,
eiev.dob,
ep.start_date as yvdoa,
ep.end_date as yvdod,
e4pv.actual_date,
test_header_x.OUTCM_FLWUP_SRVY_PERIOD,
l.description as Call_Location,
case when tqav.question_caption like 'Custody at Follow-up%' then answer_caption end as Custody,
case when tqav.answer_caption like 'Residential Treatment Center%' then answer_is_selected end as RTC,
case when tqav.answer_caption like 'Psychiatric Hospital%' then answer_is_selected end as PsychHosp,
case when tqav.answer_caption like 'Juvenile Detention/Corrections or Adult Jail%' then answer_is_selected end as Corrections,
case when tqav.question_caption like 'Has the youth been attending school?%' then answer_caption end as AttendingSchool,
case when tqav.question_caption like 'Why is the youth not attending school%' then answer_caption end as SchoolStatus,
case when tqav.question_caption like 'Has youth been in trouble with the law/legal system%' then answer_caption end as TroubleLaw

from dbo.rpt_events_4people_view as e4pv 
    JOIN dbo.rpt_test_questions_answers_view as tqav on e4pv.event_log_id = tqav.event_log_id
    left JOIN dbo.enrollment_info_expanded_view as eiev on eiev.people_id = e4pv.people_id
    JOIN dbo.rpt_episod_of_care_program_view as ep on eiev.people_id = ep.people_id  and ep.program_info_id = eiev.program_info
    JOIN dbo.people_reports_view as prv on e4pv.people_id = prv.people_id
    JOIN evolv_cs.dbo.test_details_answers_expanded_view as tdaev on tdaev.event_log_id = e4pv.event_log_id
    JOIN evolv_cs.dbo.user_defined_lut as l ON tdaev.picklist_value = l.user_defined_lut_id
    left outer JOIN dbo.people_rv as pv on eiev.people_id = pv.people_id
    left JOIN [evolv_reports].[dbo].[test_header_rv] With (NoLock) ON  e4pv.[event_log_id] = [test_header_rv].[event_log_id]  
    left JOIN evolv_cs.dbo.Test_header_x With (NoLock) ON  test_header_x.test_header_id = test_header_rv.test_header_id

where e4pv.event_name = 'Outcome Follow-up Survey' 
    and e4pv.actual_date between '10/01/2011' and '03/31/2012'
    and ep.program_name in ('In-Home Services - Intercept')
    and (tqav.question_caption like 'Custody at Follow-up%' or
        tqav.answer_caption like 'Residential Treatment Center%' or
        tqav.answer_caption like 'Psychiatric Hospital%' or
        tqav.answer_caption like 'Juvenile Detention/Corrections or Adult Jail%' or
        tqav.question_caption like 'Has the youth been attending school?%' or
        tqav.question_caption like 'Why is the youth not attending school%' or
        tqav.question_caption like 'Has youth been in trouble with the law/legal system%' )

    and ((eiev.profile_name like '%Lic.# NH%' and ep.start_date >= '02/01/2011') 
            or (eiev.profile_name like '%Lic.# MA%' and ep.start_date >= '02/01/2011') 
            or (eiev.profile_name like '%Lic.# DC%' and ep.start_date >= '05/01/2011')
            or (eiev.profile_name like '%Lic.# NC%' and ep.start_date >= '05/01/2011')
            or (eiev.profile_name like '%Lic.# FL%' and ep.start_date >= '07/18/2011')
            or (eiev.profile_name like '%Lic.# TX%' and ep.start_date >= '07/18/2011')
            or (eiev.profile_name like '%Lic.# AL%' and ep.start_date >= '02/01/2012')
            or (eiev.profile_name like '%Lic.# GA%' and ep.start_date >= '02/01/2012')
            or (eiev.profile_name like '%Lic.# OR%' and ep.start_date >= '03/01/2012'))

    and DATEDIFF (dd,ep.start_date, ep.end_date) >= 60 
```

现在我的输出看起来像：

```
id_number   full_name   dob yvdoa   yvdod   actual_date OUTCM_FLWUP_SRVY_PERIOD Call_Location   Custody RTC PsychHosp   Corrections AttendingSchool SchoolStatus    TroubleLaw
10169613    Anderson, Mason 1996-02-06 00:00:00.000 2011-02-07 12:00:00.000 2011-09-04 23:59:00.000 2012-03-30 00:00:00.000 28094354-A0B4-428C-B38A-B90835DAF896    No Response Not available   NULL    NULL    NULL    NULL    NULL    NULL
10169613    Anderson, Mason 1996-02-06 00:00:00.000 2011-02-07 12:00:00.000 2011-09-04 23:59:00.000 2012-03-30 00:00:00.000 28094354-A0B4-428C-B38A-B90835DAF896    No Response NULL    NULL    NULL    NULL    NULL    NULL    NULL
10169613    Anderson, Mason 1996-02-06 00:00:00.000 2011-02-07 12:00:00.000 2011-09-04 23:59:00.000 2012-03-30 00:00:00.000 28094354-A0B4-428C-B38A-B90835DAF896    No Response NULL    NULL    NULL    NULL    NULL    NULL    NULL
10169613    Anderson, Mason 1996-02-06 00:00:00.000 2011-02-07 12:00:00.000 2011-09-04 23:59:00.000 2012-03-30 00:00:00.000 28094354-A0B4-428C-B38A-B90835DAF896    No Response NULL    NULL    NULL    0   NULL    NULL    NULL
10169613    Anderson, Mason 1996-02-06 00:00:00.000 2011-02-07 12:00:00.000 2011-09-04 23:59:00.000 2012-03-30 00:00:00.000 28094354-A0B4-428C-B38A-B90835DAF896    No Response NULL    NULL    0   NULL    NULL    NULL    NULL
10169613    Anderson, Mason 1996-02-06 00:00:00.000 2011-02-07 12:00:00.000 2011-09-04 23:59:00.000 2012-03-30 00:00:00.000 28094354-A0B4-428C-B38A-B90835DAF896    No Response NULL    0   NULL    NULL    NULL    NULL    NULL 
```

所以你会看到答案字段可以是 VARCHAR 值，这就是为什么我不能简单地对所有答案求和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:32:52.713

鲜为人知的事实：您实际上可以用来从结果集中`MAX()`挑选出非空值。`varchar`

假设您有以下架构：

```
TABLE A:
a_id name
1    fruit
2    names

TABLE Vals:
a_id value_type value
1    a          apple
1    b          banana
1    c          carrot
2    a          alice
2    b          bob
2    c          carol 
```

然后，您可以使用`MAX`and`GROUP BY`来获取 A 中每个项目的一行，列出每种值类型。

```
SELECT A.a_id,
  A.name,
  MAX(CASE WHEN V.value_type = 'a' then value end) as "a",
  MAX(CASE WHEN V.value_type = 'b' then value end) as "b",
  MAX(CASE WHEN V.value_type = 'c' then value end) as "c"
FROM A
  INNER JOIN Vals V on V.a_id = A.a_id
GROUP BY A.a_id, A.name 
```

在 sqlfiddle 上查看：http://sqlfiddle.com/#!3/aba0a/ [1](http://sqlfiddle.com/#!3/aba0a/1)

# java - iPOJO：@ServiceProperty 和 @Property 之间的区别

> ID：10417539
> 
> 赞同：4
> 
> 时间：2012-05-02T16:07:26.197
> 
> 标签：java, osgi, ipojo

[http://felix.apache.org/site/how-to-use-ipojo-annotations.html#HowtouseiPOJOAnnotations-@ServiceProperty](http://felix.apache.org/site/how-to-use-ipojo-annotations.html#HowtouseiPOJOAnnotations-@ServiceProperty)上的“服务属性”和“属性”有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:14:12.590

@ServiceProperty 与组件提供的 (OSGi) 服务一起发布。另一方面，@Property 是保密的。

例如：

```
@Component
@Provides
public class MyComponent implements MyService {

    @Property
    private String hidden;

    @ServiceProperty
    private String shown;

    [...]

} 
```

此组件发布具有“显示”属性的 MyService“服务”。“隐藏”未发布。

# javascript - Douglas Crockford 的“Javascript：好的部分”第 5.5 章

> ID：10417540
> 
> 赞同：3
> 
> 时间：2012-05-02T16:07:32.713
> 
> 标签：javascript

[这与这个问题](https://stackoverflow.com/questions/6173780/douglas-crockfords-javascript-the-good-parts-chapter-5-5)非常相似

我的问题更多关于示例代码。

代码：

```
var eventuality = function (that) {
    var registry = {};
    that.fire = function (event) {
// Fire an event on an object. The event can be either
// a string containing the name of the event or an
// object containing a type property containing the
// name of the event. Handlers registered by the 'on'
// method that match the event name will be invoked.
        var array,
            func,
            handler,
            i,
            type = typeof event === 'string' ?
                    event : event.type;
// If an array of handlers exist for this event, then
// loop through it and execute the handlers in order.
        if (registry.hasOwnProperty(type)) {
            array = registry[type];
            for (i = 0; i < array.length; i += 1) {
                handler = array[i];
// A handler record contains a method and an optional
// array of parameters. If the method is a name, look
// up the function.
                func = handler.method;
                if (typeof func === 'string') {
                    func = this[func];
                }
// Invoke a handler. If the record contained
// parameters, then pass them. Otherwise, pass the
// event object.
                func.apply(this,
                    handler.parameters || [event]);
            }
        }
        return this;
    };
    that.on = function (type, method, parameters) {
// Register an event. Make a handler record. Put it
// in a handler array, making one if it doesn't yet
// exist for this type.
        var handler = {
            method: method,
            parameters: parameters
        };
        if (registry.hasOwnProperty(type)) {
            registry[type].push(handler);
        } else {
            registry[type] = [handler];
        }
        return this;
    };
    return that;
} 
```

在代码中，我不明白这一行，`func = handler.method;`。

这怎么能行？我的意思是 handler.method 应该是未定义的，对吧？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:11:42.357

`handler.method`在这里定义（当然它必须作为参数传入）：

```
that.on = function (type, method, parameters) {
    var handler = {
        method: method,   // defines the method property of the handler object
        parameters: parameters  // defines the parameters property of the handler object
    }; 
```

[阅读 MDN 上的 Working with Objects](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects) -`.method`正在引用对象的`method`属性`handler`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:11:41.847

`handler`是存储在 中的对象`registry`：

```
 array = registry[type];
    for (i = 0; i < array.length; i += 1) {
        handler = array[i]; 
```

它被添加到`that.on`方法中：

```
 var handler = {
        method: method,
        parameters: parameters
    };
    if (registry.hasOwnProperty(type)) {
        registry[type].push(handler);
    } else {
        registry[type] = [handler];
    } 
```

它显然具有该`method`属性。

# php - 在 SQL 中连接两个表的正确方法是什么？

> ID：10417541
> 
> 赞同：3
> 
> 时间：2012-05-02T16:07:34.327
> 
> 标签：php, mysql, sql

我有两张桌子。第一个表包含简单的用户数据并具有列

```
$username, $text, $image 
```

（这称为“用户数据”）。

第二个表包含有关哪些用户“关注”其他用户的信息，这些信息由列设置

```
$username and $usertheyfollow 
```

（这称为“跟随”）。

我需要做的是单独向每个用户显示数据，以便与他们相关。这意味着 userABC 例如，需要能够查看他/她关注的所有用户的输入`$text`和输入。`$image`为此，我相信我需要编写一个 sql 查询，首先检查谁是登录用户（在本例中为 userABC），然后选择`$usertheyfollow`表 FOLLOWS 上具有相应值的所有实例，`"userABC."` 然后需要返回到我的`USERDATA`表并选择`$text`，`$image`它的对应值为`$usertheyfollow`. 然后我可以使用 echo 命令或类似命令来显示它...

我将如何编写这个 SQL 查询？我是否以正确的方式讨论数据库架构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:18:27.137

像这样的表：

`userdata`桌子

```
 ______________________________
| id | username | text | image |
|------------------------------|
| 1  | jam      | text | image |
+------------------------------+
| 2  | sarah    | text | image |
+------------------------------+
| 3  | tom      | text | image |
+------------------------------+ 
```

`follows`桌子

```
 _____________________
| userId | userFollow |
|---------------------|
|   1    |     2      |
+---------------------+
|   1    |     3      |
+---------------------+ 
```

并使用以下 SQL：

```
SELECT userdata.text, userdata.image FROM follows LEFT JOIN userdata ON follows.userFollow = userdata.id WHERE follows.userId = 1 
```

将获得 id 为 '1' 的用户关注的所有文本和图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:56:42.407

事实证明，这些答案都不是正确的。@jam6459 最接近。

正确答案如下：

```
SELECT userdata.text, userdata.image, follows.userFollow
  FROM userdata
  LEFT JOIN follows ON follows.userFollow = userdata.username
  WHERE follows.userId = $username 
```

我还发现没有用户名对应于 Jam 表格示例中的 Id 更容易。这是因为同一用户可以在“USERDATA”中有多个条目。我改为使用用户名作为 ID。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T16:34:18.623

```
function get_text_image($username)
{
     $sql = "SELECT * FROM USERDATA where username='".$username."'";  
     $result = mysql_query($sql);

     while($row = mysql_fetch_array($result))
     {
         echo $row['text'];
         echo $row['image'];
     }
}

function display_data_of_followers($userid)
{
     $sql = "SELECT usertheyfollow FROM follow WHERE userid = ".$userid."";
     $result = mysql_query($sql);

     while($row = mysql_fetch_array($result))
     {
          get_text_image($row['usertheyfollow']);
     }
}

display_data_of_followers($userid); 
```

# sql - 创建基于云的 SQL 数据库最简单/最便宜的方法是什么？

> ID：10417546
> 
> 赞同：13
> 
> 时间：2012-05-02T16:07:52.830
> 
> 标签：sql, database, sqlite, cloud

我有一个我已经构建的网站（托管在 Amazon S3 上）并且效果很好。唯一的问题是所有数据都是静态的。我想在云中创建一个 SQL 数据库，允许我在用户提交表单后存储他们的基本文本数据。我仍然是一个新手 Web 开发人员，但我已经将 sqlite3 用于我的几个 Java 桌面应用程序，并且我想使用这些 SQL 知识来创建这个在线数据库。我想我要问的是（在我的无知中）：如何创建一个存储在云中并且可以使用 javascript 查询的 sqlite 类型的数据库？

我从哪里开始？有没有像 Amazon AWS 或 Azure 这样的服务，或者我可以创建这个数据库，然后使用某种 jQuery/Javascript API 从中查询数据？我不需要大量的存储空间，我的查询将是非常基本的 SQL 类型的东西。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T04:27:19.940

为了获得更大的灵活性、更少的服务锁定和更便宜的可扩展性：我建议使用[CouchDB](http://couchdb.apache.org)（尽管您可能仍会使用像[Cloudant](https://cloudant.com)这样的托管服务）。CouchDB 可以托管您的网站，并提供用于存储数据的 HTTP API，您的客户端 JavaScript 可以对其进行 REST 调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T23:43:13.403

StackMob 有一个你可以使用的免费包。您可以使用 JS SDK 编写您的 HTML5 应用程序并将内容保存到 StackMob DB。您可以免费在 StackMob 上托管您的 HTML5，也可以将您自己的域指向它。还有 S3 集成。

一些参考资料：

[JS SDK](http://www.stackmob.com/devcenter/docs/Javascript-SDK-API)

[JS SDK 教程](http://www.stackmob.com/devcenter/docs/JS-SDK-Tutorial)

[托管您的 HTML5](http://www.stackmob.com/devcenter/docs/StackMob-Hosted-HTML5%3a-GitHub)

[自定义域](http://www.stackmob.com/devcenter/docs/Deploying-your-HTML5-App#a-setting_up_custom_domains)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-27T06:14:32.557

免费在 Heroku 上创建 Postgres 数据库。

[https://devcenter.heroku.com/articles/heroku-postgres-plans#hobby-tier](https://devcenter.heroku.com/articles/heroku-postgres-plans#hobby-tier)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T05:28:27.227

由于您已经熟悉 AWS 的一些产品，因此您应该查看：

1.  [Amazon RDS](http://aws.amazon.com/rds/) - 适用于 MySQL 或 Oracle 的托管关系数据库服务
2.  [Amazon DynamoDB](http://aws.amazon.com/dynamodb/) - 快速、可预测、高度可扩展的 NoSQL 数据存储

但要执行您的要求（通过 JavaScript 访问数据），请查看[www.stackmob.com](http://www.stackmob.com)。您可以通过 StackMob 上的主干（基于 JavaScript 的框架）托管具有数据访问权限的 HTML5 应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T22:06:00.847

正如您提到的，您的网站托管在 Amazon S3 上，我确信它是一个包含大量 JavaScript 嵌入 HTML 文件的静态网站。由于有一个静态网站，我可以理解您对使用可以从您的静态网站连接的数据库的要求，老实说，您没有很多选择。静态网站被认为不依赖于数据库，所以老实说，您的选择非常有限，因为您正在寻找的是“可通过 HTTP 访问的数据库，您可以使用 HTML 脚本语言调用它”

如果您有能力直接从您的 JavaScript 代码写回 S3，您可以在您的静态站点中创建一个基于 JavaScript 的数据库，这很复杂，但可以考虑选择。

在我看来，您最好在 Windows Azure 中拥有一个超小型实例（或您选择的云服务）并连接一个基于云的数据库，这将比较便宜并且适合您的要求。

或者，除非 Amazon 可以提供可从 S3 状态内容访问的数据库，否则您在这里真的没有什么*好的*选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-16T21:17:40.230

在 Vultr.com 上创建一个虚拟专用服务器。这不是最简单的方法，但它是您了解数据库安全性的最佳方法，并且如果您的服务器开始需要更多存储空间，它将比其他解决方案便宜得多。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-02T18:08:30.443

由于其扩展问题，SQLite 对于面向 Web 的应用程序来说并不是一个好的选择。

AWS 和 Azure 都支持 SQL 数据库。它们还各自支持 MongoDB 和 Redis 等替代方案。对于像您描述的那样基本的东西，唯一真正的区别是成本。

# c# - Visual Studio 数据集设计器表达式 - 如何转换数据时间？

> ID：10417548
> 
> 赞同：0
> 
> 时间：2012-05-02T16:07:59.663
> 
> 标签：c#, sql-server, dataset

我正在尝试使用 Visual Studio 的设计器在数据集中添加一个基于“表达式”的列。检索的数据是 Datatime 格式，它将与另一列中的字符串连接。

我设法进行连接并在我的代码中使用此字段，但是，我希望能够使用以下模式“YY-MM-DD”重新格式化日期。

[http://i49.tinypic.com/11rtzki.jpg](http://i49.tinypic.com/11rtzki.jpg)

知道我怎么能做到这一点吗？

PS。不要打扰任何涉及数据集之外的代码操作的方法，考虑使用这个新的表达式字段是不值得的）。

非常感谢任何提示！

（抱歉英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:28:00.973

我最终编辑了 SQL 查询以添加一个符合我要求的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:47:52.577

我可能是错的，但尝试这样的事情：

```
string myDate = "20120101" //January 1st, 2012
DateTime date = Convert.ToDateTime(myDate);
string myFormattedDate = string.Format("{0:yy-MM-dd}", date) 
```

# sencha-touch - 有没有办法为列表中的每个项目制作多个复选框？

> ID：10417549
> 
> 赞同：0
> 
> 时间：2012-05-02T16:08:02.470
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我想要实现的是在轮播页面之一中放置一个列表，并且在列表中，每行必须有一个复选框和一个标签，当然列表中有多个项目，而我只搜索示例代码找到单行复选框代码，我不知道应该如何修改列表中多个项目的代码。那么有什么建议或代码示例可以做到这一点吗？

# perforce - P4Eclipse 统一 Diff

> ID：10417551
> 
> 赞同：0
> 
> 时间：2012-05-02T16:08:09.207
> 
> 标签：perforce, unified-diff, p4eclipse

与 Perforce for Eclipse 中的 depot 相比，我如何获得关于本地更改的统一格式的 .patch 文件？

我已经习惯了 CVS 的这个特性，事实上任何其他 Diff 格式都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:01:31.490

转到团队同步透视图，右键单击挂起的更改，然后创建补丁

# jsf-2 - 如何在模糊上验证复合组件？

> ID：10417554
> 
> 赞同：1
> 
> 时间：2012-05-02T16:08:27.887
> 
> 标签：jsf-2, composite-component

我有一个包含两个 inputText 组件的复合组件。复合组件管理一个包含两个整数的 bean。

```
class valueBean {
  private Integer valueA;
  private Integer valueB;
  //getters, setters.
}

<composite:interface componentType="valueBeanUI">
  <composite:attribute name="value">
</composite:interface>

<composite:implementation>
  <h:inputText id="inputA"/>
  <h:inputText id="inputB"/>
</composite:implementation> 
```

在我的 valueBeanUI 中，我实现了 getConvertedValue 和 encodeBegin。

一切都按预期工作 - 当我单击提交时，调用 getConvertedValue 中的代码，如果用户在整数字段中输入字符，如果转换值，我可以抛出错误消息。

我想做的是能够在两个字段中都要求一个有效值，如果不满足这个条件，则显示一条错误消息。当用户单击提交时，我有这个工作，但我想在任一字段（inputA 或 inputB）的模糊时触发它。当任一字段模糊时，我无法弄清楚如何验证支持组件。任何人都可以提出一种方法来实现这一目标吗？我不想提交整个表单——我只想通过 ajax 来完成这个组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:12:21.303

只需添加`<f:ajax event="blur">`到输入。

```
<h:inputText id="inputA">
    <f:ajax event="blur" execute="@this inputB" render="messageForInputA messageForInputB" />
</h:inputText>
<h:inputText id="inputB">
    <f:ajax event="blur" execute="@this inputA" render="messageForInputA messageForInputB" />
</h:inputText> 
```

`messageForInputA`应该指向`<h:message id="messageForInputA">`一个.

# gcc - gcc：如何删除未使用的未定义符号？

> ID：10417558
> 
> 赞同：1
> 
> 时间：2012-05-02T16:08:35.930
> 
> 标签：gcc

这是一些 C++ 测试代码：

```
__attribute__((visibility("hidden"))) void foo()
{
   int fd = fopen("data1", "rb");
   printf ("%d", fd);
} 
```

并且所有其他代码不调用函数'foo'和函数'fopen'

然后我使用 gcc 选项 -ffunction-sections 将代码编译为 so 文件。

我认为，函数 foo 符号和 foo 二进制代码没有包含在 so 文件中。

但问题是，我认为符号“fopen”不应该是符号表。ps：我可以确保只有函数'foo'使用'fopen'。实际上并非如此，当我使用命令 nm 时，我发现了 'fopen' 的 'U' 型符号。

gcc 是如何工作的？并有 gcc 其他编译选项发现，符号 'fopen' 没有使用，并删除 'fopen' 符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:43:29.407

问题是，编译器不知道以后是否使用这些符号。

你可以在编译时告诉他你给了他整个程序，所以如果你的程序没有调用这个函数，没有人会。

编译选项是`-fwhole-program`.

# iphone - 创建通用应用程序。当前用户是否支付两次？

> ID：10417562
> 
> 赞同：3
> 
> 时间：2012-05-02T16:08:58.847
> 
> 标签：iphone, ipad, in-app-billing

我正在将 iphone 应用程序升级为通用 iphone/ipad 应用程序。几个问题...

1) 如果用户购买了 iphone 版本（两者都可用），然后在发布时想要 ipad/universal 版本，他是否需要为 ipad 版本再次付费？2) iphone和ipad的inapp购买是一样的吗....那么，他会再次付款吗？

谢谢

适合

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:19:01.763

不，用户不会再次付款。可以这样想：它的行为就像您有一个仅限 iPhone 的应用程序，用户安装在一部 iPhone 上，然后安装在新的 iPhone（或 iPod）上。它现在是 iPad 的事实是无关紧要的。它只是同一应用程序的第二台设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:45:51.793

回答您的第二个问题：是的，iPhone 和 iPad 之间的应用内购买是相同的。如果您无论如何都没有恢复用户的应用内购买的按钮，则用户可以简单地尝试再次购买该应用内内容，然后它将被下载并且无论如何用户都不会为此付费。

# visual-studio - ReportViewer 控件版本冲突

> ID：10417563
> 
> 赞同：3
> 
> 时间：2012-05-02T16:09:00.823
> 
> 标签：visual-studio, visual-studio-2010, sql-server-2005, reporting-services, reportviewer

我遇到了 ReportViewer 控件的版本问题。我正在使用 Visual Studio 2010，但我认为我需要使用 2005 报表查看器，因为我使用的是 SQL 2005。因此，我将 webconfig 文件设置为指向 2005 ReportViewer .dll，一切正常，然后 VS 编辑网络.config 指向 2010 版本的 dll。这是相关的网络配置文件部分设置了我认为正确的内容：

```
<httpHandlers>
  <add path="elmah.axd" verb="POST,GET,HEAD" type="Elmah.ErrorLogPageFactory, Elmah" />
  <add path="Reserved.ReportViewerWebControl.axd" verb="*" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    validate="false" />
</httpHandlers>

<compilation>
  <assemblies>
    <add assembly="Microsoft.ReportViewer.WebForms, Version=8.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
    <add assembly="Microsoft.ReportViewer.Common, Version=8.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
  </assemblies>
  <buildProviders>
    <add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.WebForms, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </buildProviders>
</compilation>

<system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<handlers>
  <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" 
       type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</handlers> 
```

因此，在运行它并运行几次后，它会自动将 http 处理程序的版本更改为 10.0.0.0。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:38:15.713

写入 web.config 的内容由您在项目中使用的引用定义。

在我的 Visual Studio 2008 项目中，我有以下参考资料：

*   Microsoft.ReportViewer.Common.dll（版本 9.0.0.0）
*   Microsoft.ReportViewer.WebForms.dll（版本 9.0.0.0）

所以在我的配置中我看到：

```
<system.web>
  ...
  <compilation>
    ...
    <buildProviders>
      <add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.Common, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />        
    </buildProviders>
  </compilation>
  ...
  <httpHandlers>
    <add verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false"/>
  </httpHandlers> 
```

当我查看可用的项目参考资料时，我有三个：

*   版本 8.0.0.0
*   版本 9.0.0.0
*   版本 10.0.0.0

我认为这是因为我安装了 Visual Studio 2005、2008 和 2010，但安装单独的报表查看器可再发行组件可能会提供相同的选择：

*   [MS 报告查看器 2005](http://www.microsoft.com/en-us/download/details.aspx?id=21916)（版本 8.0.0.0）
*   [MS 报告查看器 2005 SP1（升级）](http://www.microsoft.com/en-us/download/details.aspx?id=3814)（版本 8.0.50727.42）
*   [MS Report Viewer 2005 SP1（完全安装）](http://www.microsoft.com/en-us/download/details.aspx?id=6219)（版本 8.0.50727.42）
*   [MS 报告查看器 2008](http://www.microsoft.com/en-us/download/details.aspx?id=6576)（版本 9.0.0.0）
*   [MS 报告查看器 2008 SP1](http://www.microsoft.com/en-us/download/details.aspx?id=3841)（版本 9.0.0.0）
*   [MS 报告查看器 2010](http://www.microsoft.com/en-us/download/details.aspx?id=6442)（版本 10.0.0.0）

注意我对版本号做了最好的猜测；如果你知道得更好，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:26:21.933

这不是您问题的确切答案，但可能是解决方案。
无需使用旧版本的报表查看器。它独立于服务器。特别是使用 .rdlc（客户端报告）时，您只提供数据，而报告不知道服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-03T14:17:59.510

可以使用 win forms 应用程序访问 SQL 报告。使用 VS2010 开发，ReportViewer 组件版本=9.0.0.0。

以下是步骤：

要访问 SQL 2005 报告，您必须使用报告查看器组件的 Version=9.0.0.0，如上所述。因此，您将需要在要呈现报表的 .aspx 页面或它继承的母版页中使用它：

注册程序集="Microsoft.ReportViewer.WebForms, 版本=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb"

和这个

```
 <form id="foo" runat="server">
    <div>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <rsweb:ReportViewer ID="ReportViewer1" runat="server" ProcessingMode="Remote" Width="950px"
                    Height="600" BorderColor="Gainsboro" BorderStyle="Solid" BorderWidth="1px">
        <ServerReport ReportPath="/foo/foo/FooReport"
                ReportServerUrl="http://foo/ReportServerSQL2005" />
    </rsweb:ReportViewer>
… 
```

您可能还必须更改对 web.conig 中任何其他版本的 ReportViewer 组件的引用，因为 VS2010 和更高版本将默认使用新版本的 ReportViewer 组件

例如

```
<add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" /> 
```

改成

```
<add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> 
```

只需在整个解决方案中搜索 Version=8.0.0.0 和 Version=10.0.0.0 等，并对 Version= 和 PublicKeyToken= 进行更改

您还需要在项目中从 .net 选项卡中引用 reportviewer 组件 9.0.0.0，并删除对任何其他版本的任何引用。

值得注意的是，在 VS 中使用同时具有源视图和设计视图的 .aspx 页面时，在设计视图中会显示 Error Creating Contol – ReportViewer1。根据我的阅读，这是该组件的一个错误，但它在所有主要浏览器中都可以正常工作。

此外，如果您要将组件从工具拖到设计图面上，您很可能需要添加 9.0.0.0 版本并确保它是您使用的版本。

我之前在这里回答过这个问题：

[http://forums.asp.net/p/1985629/5691326.aspx?VS2010+ReportViewer+with+SQL+2005](http://forums.asp.net/p/1985629/5691326.aspx?VS2010+ReportViewer+with+SQL+2005)

但是，我的应用程序是 .NET 3.5 MVC2 应用程序，但经过一些相当大的努力，我仍然能够让它呈现 SQL2005 报告。

理想情况下，您应该将 2005 年的 SQL 报告服务更新到 2008 年，但是，通过首先创建副本/备份来确保一切正常，因为没有回头路。一旦你实现了这一点，以上所有这些都变得不必要了，对我们来说这只是一个临时解决方案。

# javascript - 如何在 Flash中使用标签？

> ID：10417565
> 
> 赞同：0
> 
> 时间：2012-05-02T16:09:13.867
> 
> 标签：javascript, html, actionscript-3

我有一个来自 adcloud 的跟踪标签。现在，如果我可以依赖 js，那么从我的 Flash 应用程序调用它就可以了。但是，我的老板希望我在禁用 js 时发送相同的信息。

我得到了一个跟踪像素图像：

```
<img src="https://a.adcloud.net/retargeting/?keywords=dpsmapp_ordered" width="1" height="1" border="0" alt=""> 
```

我将如何在我的 Flash 应用程序中使用/调用它？首先想到的是简单地执行 a `load(url)`，但这给了我一个`401: Denied`错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:37:26.393

正常的方法是使用`Loader`或加载它`URLLoader`，但这要求托管跟踪器的人已经在他们的服务器上设置了一个跨域 xml 文件。

像这样的东西；

```
var loader:Loader = new Loader();
loader.load(new URLRequest(url)); 
```

您甚至不需要听完整事件，因为您不会使用文件本身。

编辑：另一种解决方案可能是在某个地方（使用 PHP 或其他）设置您自己的 Web 服务，其中设置了所有跨域文件等，这将下载跟踪像素。然后从闪存调用该服务，而不是直接访问跟踪器。您还可以向该服务发送一个推荐 URL，并将其设置为“假”标题。

# javascript - CSS 和 JavaScript 在源代码中内联出现

> ID：10417569
> 
> 赞同：0
> 
> 时间：2012-05-02T16:09:40.927
> 
> 标签：javascript, html, css

我有一个运行平稳的网站，但我刚刚看到，当我在 Chrome 和 IE9 中查看源代码时，它显示了我的 css 和 javascript 内联，而不是文件的链接。`<style type="text/css" style="display:none">[my css]</style>`而不是`<link rel="stylesheet" type="text/css" href="style.css" />`我在我的 PHP 编辑器中看到的并且是我故意编码的。我在其他网站上看不到这样的东西，只有在我的网站上。

这怎么可能？服务器设置有一定的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:13:28.523

将 CSS 添加到 HTML 页面有 3 种不同的方式：内联、外部和基于属性。

**内联 CSS**就是您现在所拥有的。当 CSS 代码直接嵌入到您的 HTML 中时。

**外部 CSS**是当您引用 CSS 文件时，例如您的第二个示例。

**基于属性的 CSS**是当您直接在 HTML 文件中设置属性时。前任：

```
<div style="CSS HERE"></div> 
```

所有 3 种方法的工作方式相同，但出于抽象目的，建议使用外部样式表。

在您的情况下，PHP 编辑器可能会将 CSS 直接注入您的代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:18:10.850

浏览器工具只是内联它以使您的调试更容易。这只是为了方便向您展示页面的流程。这些文件仍然是外部的，并且在许多页面之间共享。

# avaudiorecorder - 长时间录制一个小时左右，如何减少avaudio录制文件？

> ID：10417570
> 
> 赞同：0
> 
> 时间：2012-05-02T16:09:43.680
> 
> 标签：avaudiorecorder, avaudiosession

***问题描述：***当我以大约 1 小时的时间间隔录制音频文件时，我得到它的**大小约为 600MB**，所以它太大了，我希望它应该被压缩到更小的大小，但我怎么不知道....？进行压缩的原因是，***当我将其转换为 NSData 时，保存该文件需要花费大量时间***。所以请任何帮助或指导我如何解决这个问题.....:(

任何建议都应该非常感激......！

提前致谢.....！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:29:14.250

您必须选择正确的编码格式以减少录制的音频文件大小。请参阅链接：[在 iPhone 上以最小文件大小录制音频](https://stackoverflow.com/questions/7279643/record-audio-on-iphone-with-smallest-file-size)

如果仍然超过预期大小，那么您可以将文件分成多个小块。 [http://sspbond007.blogspot.in/2012/01/objective-c-filesplitter-and-joiner.html](http://sspbond007.blogspot.in/2012/01/objective-c-filesplitter-and-joiner.html)

# php - 使用具有不同间隔的 javascript 计时器更改 div 样式

> ID：10417571
> 
> 赞同：1
> 
> 时间：2012-05-02T16:09:45.663
> 
> 标签：php, javascript, timer, styles

目前我有以下代码创建我的计时器：

```
<script type="text/javascript">
var interval;
var minutes = 8;
var seconds = 10;

function countdown(element) {
    interval = setInterval(function() {
        var el = document.getElementById(element);
        if(seconds == 0) {
            if(minutes == 0) {
                alert(el.innerHTML = "countdown's over!");                    
                clearInterval(interval);
                return;
            } else {
                minutes--;
                seconds = 60;
            }
        }
        if(minutes > 0) {
            var minute_text = minutes + (minutes > 1 ? ' minutes' : ' minute');
        } else {
            var minute_text = '';
        }
        var second_text = seconds > 1 ? 'seconds' : 'second';
        el.innerHTML = minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
        seconds--;
    }, 1000);
}
</script> 
```

我使用以下按钮来触发它：

```
<input type="button" onclick="countdown('countdown');" value="Start" />
<input type="button" onclick="clearInterval(interval);" value="Pause" /> 
```

随着时间的推移，如何跟踪计时器并更改页面样式？

例如，当我单击开始时，我想突出显示一个 div，5 秒后我想突出另一个 div 并取消突出第一个，20 秒后我想再次更改突出显示，10 秒后我再次更改突出显示，等等。

间隔应该可以是不同的时间，但大多数情况将遵循上述模式（0、5、5、20、10、20、10、20、10...），所以这是一个很好的起点。计时器的总长度始终为 8 分钟，因此可以对间隔进行硬编码，我可以使用 PHP 来选择正确的代码（虽然效率低，但可能是最简单的）。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:18:12.840

在经过的时间上放入 switch 语句。

对于每个指定的间隔，设置有问题的 div，并取消设置其他的。

```
//at the beginning of the script
var origtime = minutes*60+seconds;

//...snip to countdown function

var timeleft = minutes*60+seconds;
switch(origtime - timeleft)
{
case 0: highlightfirstdiv(); break;
case 5: highlightseconddiv(); break;
case 10: highlightthirddiv(); break;
...
case x: highlightfinaldiv(); break;
} 
```

# ruby - 如何在 ruby 中安装、要求和使用 gem

> ID：10417574
> 
> 赞同：3
> 
> 时间：2012-05-02T16:09:51.770
> 
> 标签：ruby, gem, jruby

我正在尝试`rake`在我的 ruby​​ 脚本中使用...（Ruby 1.8.6，JRuby 1.6.5）

使用 rake 下载`gem install --remote rake`，安装时看起来不错...

```
Fetching: rake-0.9.2.2.gem (100%)
Successfully installed rake-0.9.2.2
1 gem installed 
```

我有一个简单的 ruby​​ 脚本，它工作正常，但是当我导入`rake`使用以下任何一个时`require`，它开始抱怨......

```
require 'rake'
LoadError: no such file to load -- rake
  or
require '/lib/rake'
LoadError: no such file to load -- lib/rake 
```

经过一番搜索，我发现在解决问题`require 'rubygems'`之前添加...`rake`

```
require 'rubygems'
require 'rake' 
```

尽管它有效，但我有一些问题......

1.  上的宝石规格`rake`显示`require_path`as `lib`，那为什么不起作用`require '/lib/rake'`？我是否误解了 的重要性`require_path`？

2.  为什么一定要放在`require 'rubygems'`前面`require 'rake'`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:23:13.740

是的，你误解了它的意义。规范中的是*该 gem 安装目录的子目录*`require_paths`数组，应该搜索属于该 gem 的文件。

 *要找出 rake 的真正位置，试试这个：

```
 $ gem which rake 
```

您会看到它实际上安装在与`/lib`;完全无关的地方。在我的系统上，它在`/var/lib/gems`. 一般来说，Ruby gems 存在于它们自己的目录结构中；`$:`标准 Ruby 包含路径 ( )中的唯一文件就是`rubygems`它本身，您过去必须明确地使用它`require`才能使任何实际的 gem 可见。（从 Ruby 1.9 开始，就没有必要了。）

Gems 不仅仅是要加载的库；您可以安装同一个 gem 的多个版本，并一次指定您想要的版本，并执行如果 gem 只是转储到标准 Ruby 包含路径中将不起作用的其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:29:02.033

1.  gemspec`require_path`中的 告诉 ruby​​ 这个 gem 的文件在 gem 中的位置。它使您能够键入`require 'rake'`，然后 ruby​​ 知道它需要`/lib/rake`在 gem 安装文件夹中查找。
2.  在 Ruby 1.8 中，rubygems（负责为您的应用程序提供 gem 的机制）默认不加载，并且默认的 ruby​​ 不知道您系统上的任何 gem。您需要先加载 ruby​​gems，然后才能使用任何其他 gem。Ruby 1.9 不再是这种情况。*

# mysql - 重新排序数字列

> ID：10417580
> 
> 赞同：0
> 
> 时间：2012-05-02T16:10:04.670
> 
> 标签：mysql

我正在将 PHP/MySQL 用于 Web 应用程序。用户可以为不同的工作输入行项目。订单项的顺序很重要。为此，我有一个“订单号”字段。插入新行很容易；我只是在当前最高订单号上加一。但是对于删除和插入行，它变得很棘手。现在，我使用查询在每次删除后更新所有订单号。但是，有时在同一个请求中可能会有很多删除。我在想有一个更简单的方法。例如，如果表中的订单号是

```
1, 2, 5, 8, 9, 10 
```

是否有一个更新查询我可以运行来更新它们

```
1, 2, 3, 4, 5, 6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:13:09.107

删除行时：

```
update mytable
set ordernumber = ordernumber-1
where ordernumber > {number deleted} 
```

是否有多个删除无关紧要，因为这是相对更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:31:35.617

更新整个序列：（这适用于 SQL Server - 也许您可以将其调整为 MySQL！）

```
while exists (
    select *
    from mytable mt1
    where not exists (
        select *
        from mytable mt2
        where mt2.ordernumber = mt1.ordernumber - 1
        )
    and mt1.ordernumber > 1
    )
begin
    update mytable
    set ordernumber = (
        select isnull( max( mt3.ordernumber ), 0) + 1
        from dbo.mytable mt3
        where mt3.ordernumber < mytable.ordernumber
    )
end 
```

# django - Django - 更改 CharField TextInput 上的 max_length 错误消息

> ID：10417585
> 
> 赞同：0
> 
> 时间：2012-05-02T16:10:16.240
> 
> 标签：django, django-forms

我正在尝试自定义当用户输入的文本长度超过模型中 CharField 的最大长度时显示的错误消息。模型定义字段如下：

```
name = models.CharField(max_length=200) 
```

我有一个用于该模型的 ModelForm，它定义了表单字段，如下所示：

```
name = forms.CharField(widget=forms.TextInput(attrs={'class':"span8", 'placeholder':'e.g. How do I setup a wi-fi network? How to sync my iPhone with iCloud?'}),
                            error_messages={'required': 'Please enter a question.', 'max_length': 'Your question is too long.'}) 
```

这对于 'required' 错误消息很有效，但 'max_length' 错误消息仍然使用 Django 的默认消息。我做错了什么还是应该以其他方式自定义此文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:26:32.723

由`'max_length'`进行检查`'django.core.validators.MaxLengthValidator'`，其中包含硬编码的错误消息。您可以通过以下方式将其替换为您自己的版本：

```
# after the name or ModelForm definition
name.validators[-1].message = 'Your question is too long.' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-18T15:25:38.607

我不确定它从哪个版本开始工作，但现在你可以这样做：

```
class YouForm(forms.ModelForm):

     def __init__(self, *args, **kwargs):
         self.fields['you_field'].error_messages = {'max_length': 'Ensure this value has at most %(limit_value)d character (it has %(show_value)d).'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-16T20:33:59.443

您可以创建子类`'django.core.validators.MaxLengthValidator'`

```
from django.core.validators import MaxValueValidator

class MyValidator(MaxValueValidator):
    message = 'Your question is too long.' 
```

# c++ - Haxe C++ 目标中的 Neko Dlls

> ID：10417589
> 
> 赞同：3
> 
> 时间：2012-05-02T16:10:26.060
> 
> 标签：c++, haxe

我正在尝试将 Neko dll（用 C++ 编写）与 Haxe 的 C++ 目标一起使用。我可以在 haxe 中调用函数，但不能传递值。

这是 C++ 代码 -

```
value Hello(value h)
{
    cout << val_int(h);
    return val_int(1);
}DEFINE_PRIM(Hello, 1); 
```

这是 Haxe 代码 -

```
class Main
{
     var load = cpp.Lib.loadLazy( "ndll" , "Hello", 1 );
     static function main()
     {
          load(1);
     }
 } 
```

它仅在函数不带参数时执行。此外，从 C++ 函数返回给 Haxe 的值是`null`.

当我为 neko 目标编译时，这段代码实际上工作得很好，但它似乎不适用于 cpp 目标。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T07:30:53.703

这是完全更正的 C++ 代码：

```
#define IMPLEMENT_API

/* Will be compatible with Neko on desktop targets. */
#if defined(HX_WINDOWS) || defined(HX_MACOS) || defined(HX_LINUX)
    #define NEKO_COMPATIBLE
#endif

#include <hx/CFFI.h>
#include <stdio.h>

/* Your hello function. */
value hello(value h)
{
    printf("%i\n", val_int(h));
    return alloc_int(1);
}
DEFINE_PRIM(hello, 1);

/* Main entry point. */
extern "C" void mylib_main()
{
    // Initialization code goes here
}
DEFINE_ENTRY_POINT(mylib_main); 
```

重要的是，作为原语的参数给出或由原语返回的每个值都必须是 type `value`。这就是为什么您的参数和返回不起作用的原因。

`val_int`用于将 a`value`转换为本机 C 类型，因此您的打印代码是正确的。`int`但是您的返回是错误的：当函数希望您将 a 返回`value`给 Haxe时，您不能返回 C类型。您需要创建一个新的 Haxe`Int`类型并将其返回。这是在 的帮助下完成的`alloc_int`。

这是代码的 Haxe 部分作为参考：

```
class Main
{
    static var hello = cpp.Lib.load("myLib", "hello", 1);

    static function main()
    {
        var myReturnedInt:Int = hello(1);
    }
} 
```

一些有用的链接：

*   [Neko C FFI](http://nekovm.org/doc/ffi)
*   [Neko FFI 教程](http://haxe.org/doc/neko/ffi)
*   [CPP FFI 注释](http://haxe.org/doc/cpp/ffi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:42:53.903

为了使它工作，您必须添加到您的 cpp 文件的标题中：

```
#define IMPLEMENT_API
#include <hx/CFFI.h> 
```

（而不是 neko 的标头）如果您希望 ndll 在 neko 和 hxcpp 上运行，您还应该添加

```
#define NEKO_COMPATIBLE 
```

在 hx/CFFI.h 包括之前。

您可以使用最适合您的任何方式进行编译，但我建议使用 Build.xml 来生成您的 ndll，因为它会自动为 hxcpp 的标头正确添加包含和 lib 路径。您可以在这里看到一个非常简单的 Build.xml 示例：http: [//pastebin.com/X9rFraYp](http://pastebin.com/X9rFraYp)

您可以在此处查看有关 hxcpp 的 CFFI 的更多文档：http: [//haxe.org/doc/cpp/ffi](http://haxe.org/doc/cpp/ffi)

# visual-studio-2010 - 如何在选项/字体和颜色对话框中找到一行的格式？

> ID：10417590
> 
> 赞同：1
> 
> 时间：2012-05-02T16:10:31.770
> 
> 标签：visual-studio-2010, fonts, colors, resharper, resharper-6.0

我正在使用带有 VS2010 的 Resharper 6.x。其中一个特点是，如果您双击一个变量，它会突出显示，然后该变量的其他用法会突出显示，如下所示：

![在此处输入图像描述](../Images/b21a45ea05bff5bdffdb092522a18586.png)

突出显示的变量的背景色和前景色太接近了，我正在尝试在“选项/字体和颜色”对话框中更改它。它有一个小的样本窗口（下图）。我浏览了整个显示项目列表，但找不到与我在编码窗口中看到的内容匹配的项目。

![在此处输入图像描述](../Images/dfba436ea04e8fcc41c2895fa8fa3d3e.png)

所以2个问题：

1.  我应该更改哪个显示项目以影响突出显示变量的后/前颜色？
2.  是否有一些工具可以将我指向任何代码段的相关显示项？

PS 我使用[Ragnarok](http://winterdom.com/2007/10/ragnarokavs2005colorscheme)作为我的基色主题。

PPS 这可能与 Resharper 无关。我把它关掉了，颜色还在。我想我最初的问题仍然存在 - 如何影响突出显示的变量的颜色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T09:02:21.197

# Visual Studio 2010 参考高亮

正如您已经推测的那样：当前选择的参考突出显示不是 ReSharper 功能，而是***VS 2010***功能。*所以你需要在字体和颜色*对话框中查看 VS 项目。
右侧显示项是***Highlighted Reference***。

![在此处输入图像描述](../Images/333c645ee901e2bc6398ee4689b527b0.png)

# ReSharper 参考突出显示

ReSharper 的等效项是通过按***Shift+Alt+F11****突出显示文件中的用法*。

 **   然后所有读取引用都有浅蓝色背景色（*字体和颜色*对话框中的相关显示项是***ReSharper Read Usage***）。
*   *并且所有写引用都有玫瑰背景色（字体和颜色*对话框中的相关显示项是***ReSharper Write Usage***）。

但是 ReSharper 的参考高亮的缺点是需要按下快捷键。VS 会自动突出显示。*

# ant - Liferay SDK portlet插件：创建后使用ant target修改.war文件

> ID：10417594
> 
> 赞同：1
> 
> 时间：2012-05-02T16:10:50.043
> 
> 标签：ant, jar, liferay, war

在 liferay portlet 中，自动生成的 build.xml（在 eclipse 中使用 SDK 创建，由向导自动生成）总是如下所示

```
<?xml version="1.0"?>

<project name="my-service-portlet" basedir="." default="deploy">
    <import file="../build-common-portlet.xml" />

</project> 
```

是否建议为此添加自定义目标？我想在创建 .war 文件后对其进行修改。像这样： [Apache Ant 有没有办法在构建 jar 文件后更新它？](https://stackoverflow.com/questions/2721888/is-there-a-way-with-apache-ant-to-update-a-jar-file-after-its-been-built)

我的战争文件很大，因为它是由 Liferay 的服务构建器自动创建的，并且似乎需要一些优化。我想删除*也在 WEB-INF/lib/* .jar 中的 WEB-INF/src/.java 文件（以及 .war 中的那些 WEB-INF/classes/.class 文件）。它们似乎是重复的。我可以这样做以在部署期间节省空间并简化和加快部署过程。

这样的蚂蚁目标会是什么样子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:08:29.260

当然，这完全有可能：

```
<project name="MyPortlet" basedir="." default="updateWarAndDeploy">
    <import file="../build-common-portlet.xml" />

    <target name="updateWarAndDeploy">
        <antcall target="war"/>
        -- modify war file --
        <copy file="${plugin.file}" todir="${auto.deploy.dir}" />
    </target>
</project> 
```

# mysql - 有条件的mysql加入？

> ID：10417603
> 
> 赞同：1
> 
> 时间：2012-05-02T16:11:29.667
> 
> 标签：mysql

我有两张表，一张是给用户的，另一张是 user_interested_in_who 表。

这个想法是，如果一个用户对另一个用户感兴趣，我会将这两个用户的 id 插入到 user_interested_in_who 表中

我的表的架构是：

```
Users               user_interested_in_who
  id                id
  name              this_user (id from the users table)
                    interested_in_this_user (id from the users table)
                    interested_or_not (1 = yes, 0 = no) 
```

所以我想通过将它们连接在一起来查询我的表，我的查询是这样的：

```
SELECT users.id, users.name, user_interested_in_who.interested_or_not
FROM users
LEFT JOIN user_interested_in_who
ON user_interested_in_who.this_user = 1 *//1 is the id of the current log in user*
GROUP BY users.id 
```

这个查询的问题是interested_or_not 列都有1。即使interested_or_not 列在记录中有0

我的问题是，如果在 user_interested_in_who 表上找不到记录，我如何查询它以返回 NULL，如果记录为 0，我如何查询它以在 user_interested_or_not 列中返回 0

* * *

编辑：

我怎样才能让它返回这种表：

```
table:
id | name | interested_or_not
1    jess   NULL
2    erika  1
3    jil    0
4    adrian NULL
....
1050 mich   1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:24:46.490

您需要使用 LEFT OUTER JOIN 但在您的 ON 子句中没有文字值。

这将返回第一个表中的所有条目以及它们在第二个表中的匹配项或 NULL。

```
SELECT users.id, users.name, user_interested_in_who.interested_or_not
FROM users 
LEFT OUTER JOIN user_interested_in_who 
   ON user_interested_in_who.this_user = users.id 
```

不需要 GROUP，并且您的示例案例不需要 WHERE（您已经显示了所有值？）。如果您确实想限制为用户 ID，请进行如下修改：

```
SELECT users.id, users.name, user_interested_in_who.interested_or_not
FROM users 
LEFT OUTER JOIN user_interested_in_who 
   ON user_interested_in_who.this_user = users.id 
WHERE users.id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:21:09.790

你`JOIN`不需要`LEFT JOIN`。`JOIN`将只返回两个表中的记录您还需要一个 where 子句，而不是使用用户的登录 id 来创建连接。

你不需要对任何东西进行分组，这就是为什么你总是得到 1。

这应该做你想要的。

```
SELECT users.id, users.name, user_interested_in_who.interested_or_not
FROM users
JOIN user_interested_in_who
ON user_interested_in_who.this_user = users.id
WHERE users.id=1; 
```

# php - 如果提交不成功，如何防止 html 复选框、radiogroups 和 textarea 重置

> ID：10417605
> 
> 赞同：-1
> 
> 时间：2012-05-02T16:11:33.080
> 
> 标签：php, html, checkbox, radio-button, reset

我正在使用一种表格在我的网站上注册用户，并且上面有验证码安全性。一切都运行良好，但我面临的唯一问题是，如果我输入了错误的验证码或以某种方式刷新页面，用户输入的所有数据都会被清除。

我现在知道如何防止文本字段被重置，但我仍然需要知道如何为复选框、radiogroups 和 textarea 做同样的事情。

我希望实现的是，即使输入的验证码错误并且提交了表单，表单也应该具有复选框、radiogroups 和 textarea 作为用户填写的内容，不包括验证码字段，以节省用户重新填写表单的时间.

如何才能做到这一点？我的表单是html，处理页面是php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:54:28.557

像这样的东西应该工作。

```
<input type="checkbox" name="agree" value="yes" <?php echo ($_POST['agree']=='yes' ? 'checked="checked"' : '');?> /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:37:48.270

一些输入的示例，脚本顶部的监视器应该为其他输入提供线索：

```
<?php
/*monitor the POST request, delete in production*/
echo "<pre>";
print_r($_POST);
echo "</pre>";

if($_SERVER['REQUEST_METHOD'] === 'POST')
{
    //check things like captcha / empty fields first, 
    //if something fails: fill variables
    $postedText     = isset($_POST['textInput']) ? $_POST['textInput'] : null;
    $postedCheckbox = isset($_POST['checkboxInput']) ? 1 : 0;
    $postedRadio    = isset($_POST['radioInput']) ? $_POST['radioInput'] : null;
    $postedSelect   = $_POST['selectInput'];
    $postedTextarea = isset($_POST['textareaInput']) ? $_POST['textareaInput'] : null;
}
?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <form method="post">
            <label for="textInput">Name:</label>
            <input type="text" 
                   id="textInput" 
                   name="textInput" 
                   value="<?php echo (isset($postedText) ? $postedText : 'text') ;?>"
                   />
            <br />
            <label for="checkboxInput">Checkbox:</label>
            <input type="checkbox" 
                   id="checkboxInput" 
                   name="checkboxInput" 
                   <?php echo (isset($postedCheckbox) && $postedCheckbox === 1 ? "checked='checked'" : '') ;?>
                   />
            <br />
            <label for="rbInput">Radio:</label>
            <input type="radio" 
                   id="rbInputMale" 
                   name="rbInput" 
                   value="male"
                   <?php echo (isset($postedRadio) && $postedRadio === 'male' ? "checked='checked'" : '') ;?>
                   /> male
            <input type="radio" 
                   id="rbInputFemale" 
                   name="rbInput" 
                   value="female"
                   <?php echo (isset($postedRadio) && $postedRadio === 'female' ? "checked='checked'" : '') ;?>
                   /> female
            <br />
            <label for="selectInput">Select</label>
            <select name="selectInput"
                    id="selectInput">
                <?php
                $options    = array(
                    'one'   => 'one',
                    'two'   => 'two',
                    'three' => 'three'
                );
                foreach ($options as $key => $value)
                {
                    ?>
                <option value="<?php echo $value;?>"
                        <?php 
                        if(isset($postedSelect))
                        {
                            echo ($value === $postedSelect ? "selected='selected'" : '');
                        }
                            ?>
                        >
                            <?php echo $key;?>
                </option>
                <?php
                }
                ?>
            </select>
            <br />
            <label for="textareaInput">textarea</label>
            <textarea name="textareaInput" id="textareaInput"><?php echo (isset($postedTextarea) ? $postedTextarea : '');?></textarea>
            <br />
            <input type="submit" value="submit" />
        </form>
    </body>
</html> 
```

# ios - 将 UIView 添加到单元格的子视图中，UITableViewController

> ID：10417606
> 
> 赞同：0
> 
> 时间：2012-05-02T16:11:33.553
> 
> 标签：ios, uitableview, uilabel

我将 2 个文本添加到表格的单元格中。我正在做的是

> UITableViewCell *cell =nil;
> 
> NSString *CellIdentifier = @"Cell";
> 
> 单元格 = [aTableView dequeueReusableCellWithIdentifier:CellIdentifier];
> 
> 如果（细胞 == 零）{
> 
> 单元格 = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
> reuseIdentifier:CellIdentifier];
> 
> [[UILabel alloc] initWithFrame:CGRectMake(80.0, 0.0, 220.0, 10.0)];
> 
> mainLabel.tag = 1003;
> 
> mainLabel.text = @"文本 1";
> 
> mainLabel.textAlignment = UITextAlignmentLeft;
> 
> mainLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin| UIViewAutoresizingFlexibleHeight; [cell.contentView addSubview:mainLabel];
> 
> }

我做同样的事情将 secondLabel 添加到单元格中。模拟器上显示的是 ![在此处输入图像描述](../Images/bd3fcc9f88e83ceddf6e0d60905941ed.png)

现在的问题是2 UILabel的背景与单元格的背景不一样（我的单元格在表格视图中分组）

有谁知道如何解决这个问题。

这里欢迎任何意见谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:16:11.043

像上面的答案一样，您应该为两个视图设置相同的颜色。

```
cell.backgroundColor = [UIColor clearColor]; 
```

或者您可以设置您设置的视图的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:56:35.880

如果我很好地理解了这个问题，您需要**删除**背景，`UILabel`因为您想显示`UITableViewCell`背景。所以我认为你只需要这样做：

```
 mainLabel.backgroundColor = [UIColor clearColor]; 
```

# c++ - C++ 从文件中读取三个奇怪的字符

> ID：10417613
> 
> 赞同：4
> 
> 时间：2012-05-02T16:11:42.097
> 
> 标签：c++, file-io, byte-order-mark

当我逐个字符串读取文件字符串时，>> 操作获取第一个字符串，但它以 "ï»¿i" 开头。假设第一个字符串是“street”，而不是“ï»¿itreet”。

其他字符串没问题。我尝试了不同的txt文件。结果是一样的。第一个字符串以“ï»¿i”开头。问题是什么？

这是我的代码：

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
using namespace std;

int cube(int x){ return (x*x*x);}

int main(){

int maxChar;
int lineLength=0;
int cost=0;

cout<<"Enter the max char per line... : ";
cin>>maxChar;
cout<<endl<<"Max char per line is : "<<maxChar<<endl;

fstream inFile("bla.txt",ios::in);

if (!inFile) {
    cerr << "Unable to open file datafile.txt";
    exit(1);   // call system to stop
}

while(!inFile.eof()) {
    string word;

    inFile >> word;
    cout<<word<<endl;
    cout<<word.length()<<endl;
    if(word.length()+lineLength<=maxChar){
        lineLength +=(word.length()+1);
    }
    else {
        cost+=cube(maxChar-(lineLength-1));
        lineLength=(word.length()+1);
    }   
}

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T16:13:18.587

您会看到一个 UTF-8[字节顺序标记 (BOM)](http://en.wikipedia.org/wiki/Byte_order_mark)。它是由创建文件的应用程序添加的。

要检测并忽略标记，您可以尝试这个（未经测试的）功能：

```
bool SkipBOM(std::istream & in)
{
    char test[4] = {0};
    in.read(test, 3);
    if (strcmp(test, "\xEF\xBB\xBF") == 0)
        return true;
    in.seekg(0);
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-20T16:58:54.313

参考上面 Mark Ransom 的出色回答，添加此代码会跳过现有流上的 BOM（字节顺序标记）。打开文件后调用它。

```
// Skips the Byte Order Mark (BOM) that defines UTF-8 in some text files.
void SkipBOM(std::ifstream &in)
{
    char test[3] = {0};
    in.read(test, 3);
    if ((unsigned char)test[0] == 0xEF && 
        (unsigned char)test[1] == 0xBB && 
        (unsigned char)test[2] == 0xBF)
    {
        return;
    }
    in.seekg(0);
} 
```

要使用：

```
ifstream in(path);
SkipBOM(in);
string line;
while (getline(in, line))
{
    // Process lines of input here.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:59:01.650

这是另外两个想法。

1.  如果您是创建文件的人，请将它们的长度与它们一起保存，并且在读取它们时，只需使用以下简单计算删除所有前缀：trueFileLength - savedFileLength = numOfByesToCut
2.  在保存文件时创建自己的前缀，在阅读时搜索并删除之前找到的所有内容。

# crystal-reports - 带有详细数据和超链接的 Crystal Reports 图表

> ID：10417615
> 
> 赞同：1
> 
> 时间：2012-05-02T16:11:50.077
> 
> 标签：crystal-reports

我正在使用 Crystal Reports 2008，我不确定最终用户想要的东西是否可以实现。而且，如果可以完成，我不知道该怎么做。

我创建了一份报告，其中包含患者及其医生的名单。详细信息提供患者信息。如果病人遵守医生的命令，那么他们就遵守了，如果他们不遵守，他们就不遵守了。我被要求提供一张图表，医生可以快速浏览一下，看看有多少患者合规，有多少患者出院。然后，他希望能够单击图表并了解详细信息，并能够查看那些不合规的患者的列表。

我已经设法在报告标题中创建了图表，但是由于我希望该报告一次为所有医生运行，而不是一次运行一个，所以我不确定如何只为一个医生制作图表。我尝试为医生添加一个组，但这不起作用。它仍然把它们放在一起。接下来，我什至找不到为他们添加超链接以便能够向下钻取的方法。我确定我设置不正确，所以也许我需要重新开始。

任何想法都会很棒，因为我真的不知道如何设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:31:14.653

如果您只想一次报告一位医生，请在医生的姓名或 ID 上添加选择公式。

如果您想报告所有医生，并为每个医生使用单独的图表，则为医生添加一个组并将图表移动到组标题中。

为了能够在下钻中列出所有患者，请将相关字段添加到详细信息部分，然后**隐藏**（不隐藏）详细信息部分。用户应该能够通过双击组标题中的几乎任何位置（至少在 CR10 中的图表*除外）来深入了解详细信息部分。*

如果您只希望不合规的患者在钻取中可见，则有条件地抑制患者合规的详细信息部分。

|  |  |  |  |
|  |  |  |  |

Note that the WWW server (lighttpd) has been configured to serve .xhtml as "application/xhtml+xml". Given the page works off-line, I'm guessing this is a MIME issue of some kind. The total absence of meaningful documentation or error messages or anything one might consider an intuitive solution is INCREDIBLY ANNOYING. The SVG is generated by GnuPlot and is quite long. The head looks like this; <svg width="320" height="256" viewBox="0 0 320 256" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Gnuplot</title> <desc>Produced by GNUPLOT 4.6 patchlevel 0</desc> Any help deeply appreciated. My psychic debugging powers tell me that because you tagged this as C++ you're compiling C++ code. I also guess that you used slightly different options to compile libraries A and B, causing their name decoration and/or ABI to be incompatible, and thus the method(s) can't be found. Have you considered just letting the linker apply all the shared objects to your application rather than using dlopen? Then you'd know straight away that there was a problem because the linker couldn't match the symbols. Alternately perhaps Linux just doesn't like your circular library references: can you refactor your libraries to eliminate the circular dependency? htmlfirefoxsvg 4 1 回答 1 This answer is useful 3 我找到了答案。 尽管在 标记中指定了 MIME 类型，您还必须配置 HTTP 服务器以为 .svg 提供该 MIME 类型。 我当然几乎在一开始就看到了这一点，但我认为 - 哈！- 因为我实际上是在指定类型，所以浏览器会知道该怎么做。 如果浏览器忽略它，type 属性的意义何在？ 于 2012-05-02T16:18:53.503 回答 Related 4 c# - How to get the location of a file located within a Windows application folder 3 opencv - 为什么KeyPoint“检测器”和“提取器”操作不同？ 1 php - PHP/CI 将 SQL 查询传递给数组 1 java - Java - 如何最好地将值循环和存储到 ArrayList 3 ruby - 如何在没有主键的数据库中使用 ActiveRecord（没有 Rails） 2 javascript - 异步加载谷歌地图V3时将数据传递给回调 1 android - android自定义对话框imageButton onclicklistener 3 php - 在分页中保持变量 3 java - 有没有办法通过套接字发送带有 DataOutputStream 的 Point 数组？ 1 regex - 将正则表达式规则合并为一个？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet"></svg> 

# html - 如何使用 Firefox 在 Firefox 中显示 SVG? I'm trying to display SVG, using , in Firefox. If I load the index.xhtml locally, rather than through a HTTP server, the page loads correctly. However, if I load throu 问问题 user82238 问问题 2012-05-02T16:12:03.897 1442 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm trying to display SVG, using , in Firefox. If I load the index.xhtml locally, rather than through a HTTP server, the page loads correctly. However, if I load through a HTTP server, Firefox displays nothing, but rather informs me a plugin is required. I've spent about two hours looking for and trying different solutions, to no avail. I'm now extraordinarily annoyed and frustrated. This is the page; <title>Daily Agera Stats</title>

|  |  |  |  |
|  |  |  |  |

Note that the WWW server (lighttpd) has been configured to serve .xhtml as "application/xhtml+xml". Given the page works off-line, I'm guessing this is a MIME issue of some kind. The total absence of meaningful documentation or error messages or anything one might consider an intuitive solution is INCREDIBLY ANNOYING. The SVG is generated by GnuPlot and is quite long. The head looks like this; <svg width="320" height="256" viewBox="0 0 320 256" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Gnuplot</title> <desc>Produced by GNUPLOT 4.6 patchlevel 0</desc> Any help deeply appreciated. My psychic debugging powers tell me that because you tagged this as C++ you're compiling C++ code. I also guess that you used slightly different options to compile libraries A and B, causing their name decoration and/or ABI to be incompatible, and thus the method(s) can't be found. Have you considered just letting the linker apply all the shared objects to your application rather than using dlopen? Then you'd know straight away that there was a problem because the linker couldn't match the symbols. Alternately perhaps Linux just doesn't like your circular library references: can you refactor your libraries to eliminate the circular dependency? htmlfirefoxsvg 4 1 回答 1 This answer is useful 3 我找到了答案。 尽管在 标记中指定了 MIME 类型，您还必须配置 HTTP 服务器以为 .svg 提供该 MIME 类型。 我当然几乎在一开始就看到了这一点，但我认为 - 哈！- 因为我实际上是在指定类型，所以浏览器会知道该怎么做。 如果浏览器忽略它，type 属性的意义何在？ 于 2012-05-02T16:18:53.503 回答 Related 4 c# - How to get the location of a file located within a Windows application folder 3 opencv - 为什么KeyPoint“检测器”和“提取器”操作不同？ 1 php - PHP/CI 将 SQL 查询传递给数组 1 java - Java - 如何最好地将值循环和存储到 ArrayList 3 ruby - 如何在没有主键的数据库中使用 ActiveRecord（没有 Rails） 2 javascript - 异步加载谷歌地图V3时将数据传递给回调 1 android - android自定义对话框imageButton onclicklistener 3 php - 在分页中保持变量 3 java - 有没有办法通过套接字发送带有 DataOutputStream 的 Point 数组？ 1 regex - 将正则表达式规则合并为一个？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</svg>

> ID：10417618
> 
> 赞同：4
> 
> 时间：
> 
> 标签：html, firefox, svg

I'm trying to display SVG, using <object>, in Firefox.

If I load the index.xhtml locally, rather than through a HTTP server, the page loads correctly.

However, if I load through a HTTP server, Firefox displays nothing, but rather informs me a plugin is required.

I've spent about two hours looking for and trying different solutions, to no avail. I'm now extraordinarily annoyed and frustrated.

This is the page;

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:svg="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink">
  <head>
    <title>Daily Agera Stats</title>
  </head>

  <body>
    <table cellpadding="4" style="margin-left:auto; margin-right:auto">
      <tr>
        <td><object data="clicks_with_data_per_day_all_sources.svg" type="image/svg+xml"></object></td>
        <td><object data="clicks_with_data_per_day_criteo_only.svg" type="image/svg+xml"></object></td>
        <td><object data="impressions_per_day_with_data.svg" type="image/svg+xml"></object></td>
        <td><object data="impressions_per_day_with_data_from_clickers.svg" type="image/svg+xml"></object></td>
      </tr>

      <tr>
        <td><object data="referrer_urls.svg" type="image/svg+xml"></object></td>
        <td><object data="conversions_per_day_with_data.svg" type="image/svg+xml"></object></td>
        <td><object data="conversions_per_day_with_data_from_clickers.svg" type="image/svg+xml"></object></td>
        <td></td>
      </tr>
    </table>
  </body>
</html> 
```

Note that the WWW server (lighttpd) has been configured to serve .xhtml as "application/xhtml+xml".

Given the page works off-line, I'm guessing this is a MIME issue of some kind. The total absence of meaningful documentation or error messages or anything one might consider an intuitive solution is INCREDIBLY ANNOYING.

The SVG is generated by GnuPlot and is quite long. The head looks like this;

```
<?xml version="1.0" encoding="utf-8"  standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg 
 width="320" height="256" 
 viewBox="0 0 320 256"
 xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink"
>

<title>Gnuplot</title>
<desc>Produced by GNUPLOT 4.6 patchlevel 0 </desc> 
```

Any help deeply appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:18:53.503

我找到了答案。

尽管在 <object> 标记中指定了 MIME 类型，您还必须配置 HTTP 服务器以为 .svg 提供该 MIME 类型。

我当然几乎在一开始就看到了这一点，但我认为 - 哈！- 因为我实际上是在指定类型，所以浏览器会知道该怎么做。

如果浏览器忽略它，type 属性的意义何在？

# jquery - Simple loop/repeat on hover in jQuery?

> ID：10417622
> 
> 赞同：0
> 
> 时间：2012-05-02T16:12:07.780
> 
> 标签：jquery

I have a function that animates when a div is hovered on:

```
$('.left_scroll_button').hover(function(){
        $(".scrolling_list").stop().animate({scrollLeft: '-=5px'}, 1);
 }); 
```

This just animates the thing once. I want to repeat the animation continuously.. Is there some easy way to loop this? I tried to do this:

```
$('.left_scroll_button').hover.everyTime(10,function(){
    $(".scrolling_list").stop().animate({scrollLeft: '-=5px'}, 1);
 }); 
```

But this didn't work. If anyone can hep, that would be great!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:33:20.300

您是否尝试过使用 setInterval 来建立动画循环？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:37:23.233

[使用animate](http://api.jquery.com/animate/)方法的 Complete Function进行递归调用呢？可能会被清理一下，但像这样：

```
$(function () {
  $('.left_scroll_button').hover(
    function(){
       var element = $(".scrolling_list");
          (function(){
              element
               .stop()
               .animate({left: '+=5px'}, 100, arguments.callee);
          }());
       }, 
      function(){
         $(".scrolling_list").stop();
      });
 });​ 
```

这是我[在 jsfiddle 中汇总的示例](http://jsfiddle.net/743qY/)

# performance - 遍历 FileSystemObject 集合时的性能调整

> ID：10417624
> 
> 赞同：0
> 
> 时间：2012-05-02T16:12:11.887
> 
> 标签：performance, filesystemobject, fso

我不知道系统在这一行的内存中存储了多少，`For Each objFile in objFolder.Files`以及使用类似的东西进行迭代是否`objFile.Files.Count`会更有益。有谁知道使用以下代码是否会产生任何重大的性能问题？

```
Dim objFSO
Set objFSO = Server.CreateObject("Scripting.FileSystemObject")

'Get the folder object associated with the directory
Dim objFolder
Set objFolder = objFSO.GetFolder("C:\InetPub\wwwroot")

Response.Write "The files found in " & objFolder.Name & ":<br>"

'Loop through the Files collection
Dim objFile
For Each objFile in objFolder.Files
  Response.Write objFile.Name & "<br>"
Next

'Clean up!
Set objFolder = Nothing
Set objFile = Nothing
Set objFSO = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:17:56.603

> 我不知道系统在这行 For Each objFile in objFolder.Files 在内存中存储了多少

不知道你的意思，但这只会循环一个不会使用大量内存的 File**对象的集合。**如果这是您的问题，此调用显然不会加载内存中文件的内容。

# javascript - 在循环中获取单选按钮值

> ID：10417627
> 
> 赞同：3
> 
> 时间：2012-05-02T16:12:20.303
> 
> 标签：javascript, html, radio-button

我正在使用一个 javascript 函数，该函数使用 YES 或 NO 的 RadioButtons 获取一些问题的值。为了得到一个问题（Q1）的价值，我做了这样的事情：

```
for (i=0; i<document.form1.Q1.length; i++){
   if(document.form1.Q1[i].checked)
       Array[0] = document.form1.Q1[i].value;
} 
```

我必须对每个问题都这样做，所以代码变得很长。所以我试图制作一个函数或一个循环，其中问题的名称正在改变。我唯一的问题是我不知道如何在`document.form1.VARIABLE.value`. 我已经尝试了一些方法，但没有奏效。

谁能帮我这个？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:10:58.750

采用

```
document.forms['form-name']['radio-button-name'].value 
```

并给出单选按钮名称，`que_1` `que_2`这样您就可以`i`使用字符串连接来更改它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:31:36.503

这是一个循环，它将遍历您的单选按钮并使用这些值构建一个数组。在代码和示例中，它设置为测试三个问题（名为 Q1、Q2 和 Q3）。完成后，数组“aux”包含检查值列表：

```
var max = 3;
var aux = new Array();
function getCheckedValue(groupName) {
    var radios = document.getElementsByName(groupName);
    for (i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            return radios[i].value;
        }
    }
    return null;
}
function check() {
    for(var i=1;i<=max;i++) {
        //console.log(i,getCheckedValue('Q'+i));
        aux[i-1] = getCheckedValue('Q'+i);
    }
    console.log(aux);
} 
```

​jsFiddle **[示例](http://jsfiddle.net/j08691/PpqDm/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T16:54:58.567

~~不要使用单选按钮，而是使用复选框（选中=是，未选中=否）。然后你可以自由地迭代你的复选框，看看哪些是检查的，哪些是未检查的。~~删除后，OP 需要区分“是”、“否”和“否”。

* * *

经过一些广泛的编码（我的 JS 生锈了），我想出了以下内容：

```
<form name=form1 id=form1 action="index.php">
    <p>Question 1</p>
    <label><input type="radio" name="Q1" value="yes">Yes</label>
    <label><input type="radio" name="Q1" value="no">No</label>

    <p>Question 2</p>
    <label><input type="radio" name="Q2" value="yes">Yes</label>
    <label><input type="radio" name="Q2" value="no">No</label>

    <p>Question 3</p>
    <label><input type="radio" name="Q3" value="yes">Yes</label>
    <label><input type="radio" name="Q3" value="no">No</label>

    <button id="go">Go!</button>
</form>

<script type="text/javascript">
    check = function (e) {
        e.preventDefault(); //Don't submit!
        var result = [];
        var form = document.getElementById("form1");
        for (var i = 1; typeof(form["Q" + i]) != "undefined"; i++) {
            for (var j = 0; j < form["Q" + i].length; j++) {
                if (form["Q" + i][j].checked) {
                    result.push(form["Q" + i][j].name + " " + form["Q" + i][j].value);
                }
            }
        }
        console.log(result);
    }

    button = document.getElementById("go");
    button.onclick = check;

</script> 
```

通过点击“Go！”触发 按钮。

* * *

关键是使用“Q”和 i 的字符串连接来获得“Q1”“Q2”等。

# iphone - 远程html文件完成加载时的iOS webview事件

> ID：10417630
> 
> 赞同：1
> 
> 时间：2012-05-02T16:12:32.417
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

当我使用以下方法将 .html 文件加载到 webview 并完成加载时，`-(void)webViewDidFinishLoad:(UIWebView *)webView {`会触发一个事件。

```
[webView1 loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"/files/myFile" ofType:@"html"]isDirectory:NO]]]; 
```

但是，如果我远程加载相同的文件，则不会触发该事件！为什么？我怎么能做到？谢谢你。

```
[webView1 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[urlBase stringByAppendingString:@".html"]]]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:14:23.057

最可能的原因是加载期间出现错误。

尝试定义委托方法`– webView:didFailLoadWithError:`，看看会发生什么（如果它被调用而不是 didFinish）......

# android - 如何在 Actionbar sherlock 中完全删除标题和图标？

> ID：10417631
> 
> 赞同：17
> 
> 时间：2012-05-02T16:12:33.110
> 
> 标签：android, actionbarsherlock

我使用操作栏 Sherlock，但我需要从栏中删除标题和图标。

我用了

```
getSupportActionBar().setDisplayShowHomeEnabled(false);
getSupportActionBar().setDisplayShowTitleEnabled(false); 
```

它起作用了，图标和标题消失了，但我的物品仍然出现在正确的位置。有没有办法完全删除标题和图标而不是隐藏它们。我在堆栈溢出中发现了一个类似的问题，但没有人回答。

编辑

```
 Before my bar look like:   -- Icon Title MenuItem1 MenuItem2--
     After my bar look like:    --            MenuItem1 MenuItem2--
     I want my bar look like:   -- MenuItem1 MenuItem2 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T17:30:54.523

您的“菜单项”将永远不会左对齐。它们将向右对齐。左边是您的标题和图标（目前已删除）和导航（选项卡、列表等）。如果您有足够的操作栏项目，它们将流向左侧，但它们将始终从右侧开始。这不能通过 Android SDK 更改。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T10:40:54.237

您可以参考此代码，然后您可以获得解决方案......只需根据您的要求申请......

```
ActionBar actionBar = getActionBar();
          actionBar.setDisplayShowTitleEnabled(false);
          actionBar.setDisplayShowHomeEnabled(false);
          actionBar.setDisplayShowCustomEnabled(true);

RelativeLayout relative = new RelativeLayout(getApplicationContext());

TextView tv1 = new TextView(this);
         tv1.setText("Test1");
         tv1.setTextColor(Color.GREEN);
         tv1.setPadding(3,13,3, 12);
         tv1.setId(1);
         tv1.setOnClickListener(this);

TextView tv2 = new TextView(this);
         tv2.setText("Test2");
         tv2.setTextColor(Color.GREEN);
         tv2.setPadding(3,13,3,12);
         tv2.setId(2);
         tv2.setOnClickListener(this);

TextView tv3 = new TextView(this);
         tv3.setText("Test3");
         tv3.setTextColor(Color.GREEN);
         tv3.setPadding(3,13,3, 12);
         tv3.setId(3);
         tv3.setOnClickListener(this);

TextView tv4 = new TextView(this);
         tv4.setText("Test3");
         tv4.setTextColor(Color.GREEN);
         tv4.setPadding(3,13,3, 12);
         tv4.setId(4);
         tv4.setOnClickListener(this);

LinearLayout ll = new LinearLayout(this);
             ll.addView(tv1);
             ll.addView(tv2);
             ll.addView(tv3);
             ll.addView(tv4);

relative.addView(ll);
actionBar.setCustomView(relative); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-13T09:29:27.773

```
getSupportActionBar().setIcon(android.R.color.transparent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T12:36:40.907

您可以通过使用操作栏上的上下文菜单来执行此操作。查看 Sherlock ABS Demos，有一个 Activity：ActionModes，它显示了一个非常简单的示例，可能对您有用。

# javascript - toDateString 与 getDay 不一致？

> ID：10417633
> 
> 赞同：0
> 
> 时间：2012-05-02T16:12:42.880
> 
> 标签：javascript

我有一个日期对象：

```
var thedate = new Date("2012-05-02T11:00:00.000+0000"); 
```

什么时候`getMonth()`我得到4，但什么时候`getDay()`我得到3？我想这样做，以便当我调用 时`getDay`，我得到原始字符串 (2) 中反映的内容。我可以从 中减去 1 `getDay()`，但我不确定这是否是正确的方法，以及它是否适用于所有日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:16:04.730

According to [MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date), `getMonth` will return a number in the range 0-11 (so 0 is for January), and `getDay` will return the day of the week in the range 0-6 (so 0 is for Sunday). If you want to get the day in month, you should use `getDate`, which will return a number in the range 1-31.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:16:24.740

`getDay`/`getMonth`将返回当天的索引，从 0 开始，因此 +1。

> getDay() 返回星期几（从 0 到 6）

在这里阅读：http: [//www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

# javascript - 允许用户将内容添加到站点标题的安全漏洞

> ID：10417634
> 
> 赞同：2
> 
> 时间：2012-05-02T16:12:47.683
> 
> 标签：javascript, security, google-analytics

在我的应用程序中，我让注册用户创建他们自己的个人网站，并且我想让他们将分析代码添加到网站标题中。我了解让他们添加自己的内容存在风险，因此我仅限于让他们添加 Google Analytic 代码。

1.  如果我让他们将自己的 JavaScript 输入到网站的标题中，可能会发生更糟糕的情况。

2.  我怎样才能限制只添加谷歌分析代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T16:15:26.830

Don't let them add the whole JavaScript. You add the JavaScript and let them set their Google Analytics ID which you can validate as being in a proper format. That way they can't add any code to your site and you can easily weed out bad values.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T16:17:09.267

1.  哦，让我们看看……他们可以将用户重定向到网络钓鱼或恶意软件站点；尝试设置路过式下载；完全重写整个页面内容并从用户那里窃取会话、登录凭据和其他信息或以其他方式破坏网站；当他们在您的网站上时，将键盘记录器安装到用户的浏览器中......

2.  编写检查以确保提供的 ID 字符串符合所有分析 ID 必须遵循的模式。仅允许可能出现在分析 ID 中的字符。自己生成其余的周围 js 代码。在评论中，@yahelc 提供了`^UA-\d+-\d+$`验证 UA ID 的正则表达式。

# c# - C# 打开一个新的 WinForm 并关闭创建它的窗体

> ID：10417636
> 
> 赞同：1
> 
> 时间：2012-05-02T16:12:56.573
> 
> 标签：c#, winforms

这是我的代码

表格1

```
TicketDetails td = new TicketDetails(getTicketID());
td.Show(); 
```

我想在显示 td 时关闭 Form1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:17:13.793

如果`Form1`是您作为参数传递的表单，`Application.Run`则您无法关闭它，否则您的应用程序将退出。您可以做的是在`td`显示时隐藏表单。

```
TicketDetails td = new TicketDetails(getTicketID());
td.Show();

// Hide the main form
form1.Hide(); 
```

如果`Form1`不是您的应用程序的主窗体，那么您可以简单地调用`Close()`.`form1`

编辑@评论，

```
public class Form1 : Form
{
    private override OnLoad(object sender, EventArgs e) {
        DoWork();
    }

    public void DoWork() {
        // your code
    }
} 
```

然后是一个例子。

```
TicketDetails td = new TicketDetails(getTicketID());
td.Show();

form1.Hide();

// example, maybe you need to call your work method
form1.DoWork(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T16:17:06.357

如果要在显示第二个表单后关闭第一个表单，请使用以下[`Form.Shown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)事件：

```
td.Shown += (o, e) => { this.Close(); }
td.Show(); 
```

对于其他可能有趣的事件，请查看[Windows 窗体中的事件顺序](http://msdn.microsoft.com/en-us/library/86faxx0d.aspx)。当然也可以立即关闭当前表单：

```
this.Close();
td.Show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T16:16:59.557

我做了这样的事情：

```
TicketDetails td = new TicketDetails(getTicketID());
td.Show();
this.Hide();
td.Close += (object sender, EventArgs e) =>
{
    td.Parent.Close();
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:19:44.380

只要 TicketDetails 不是模态的，那么 td.show() 之后的任何代码都会运行。

我还假设 Form1 是您项目的启动表单。如果是这种情况，那么使用 .close 将停止您的应用程序。

你试过这个：

```
TicketDetails td = new TicketDetails(getTicketID());
td.Show();
Form1.Hide(); 
```

这显然隐藏了 Form1

谢谢

保罗

# java - Eclipse中的Maven依赖错误

> ID：10417637
> 
> 赞同：7
> 
> 时间：2012-05-02T16:13:08.603
> 
> 标签：java, maven

我有一个战争文物，我需要从一个罐子里使用他们的一些类。我无法将这些类移动到另一个项目，然后我使用以下配置将包含在我的 webapp 中的类和资源部署为“附加”工件：

```
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.1.1</version>
    <configuration>
        <attachClasses>true</attachClasses>
    </configuration>
</plugin> 
```

这将导致部署两个工件：mywebapp-1.0-SNAPSHOT.war 和 mywebapp-1.0-SNAPSHOT-classes.jar。

要使用这些类，我引用工件如下：

```
 <dependency>
        <groupId>mygroup</groupId>
        <artifactId>mywebapp</artifactId>
        <version>${project.version}</version>
        <classifier>classes</classifier>
    </dependency> 
```

当我从 Jenkins 编译时一切正常，但是当我从 Eclipse 本地运行测试时找不到参考类。(java.lang.NoClassDefFoundError)

我认为这可能是 maven eclipse 插件中的一个错误，有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-19T09:26:43.440

[http://wiki.eclipse.org/M2E-WTP_FAQ](http://wiki.eclipse.org/M2E-WTP_FAQ)上描述了解决方法：

> 但是存在一种解决方法，无论项目是否在 Eclipse 中构建，我们都需要更改依赖关系。在您的依赖项目中，您可以配置以下内容：

```
<dependencies>
 ...
 <dependency>
   <groupId>com.company</groupId>
   <artifactId>mywebapp</artifactId>
   <version>1.0.0-SNAPSHOT</version>
   <classifier>${webClassifier}</classifier>
 </dependency>
 ...
</dependencies>
...
<properties>
 ...
 <webClassifier>classes</webClassifier>
</properties>
...
<profiles>
 <profile>
   <id>m2e</id>
   <activation>
     <property>
       <name>m2e.version</name>
     </property>
   </activation>
   <properties>
     <webClassifier></webClassifier>
   </properties>
 </profile>
</profiles> 
```

> 当使用 m2e 构建项目时，m2e 配置文件会自动激活，在其他情况下会被忽略。仅在这种情况下，依赖项目将使用空分类器来引用 Web 项目，这将按预期添加到类路径中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T17:06:26.353

我的简单答案是 Eclipse 的错误跟踪系统的以下链接：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=365419](https://bugs.eclipse.org/bugs/show_bug.cgi?id=365419)

看看里面的答案。

是的，这是 Eclipse 本身的问题..

Eclipse 中的解决方案只是在您的工作空间中手动将项目添加到您需要从您的战争项目中取出类的适当项目中。

# facebook - 响应代码 200，但对象调试器没有抓取任何内容

> ID：10417640
> 
> 赞同：1
> 
> 时间：2012-05-02T16:13:18.803
> 
> 标签：facebook, https, facebook-opengraph

我正在通过 Object Debugger 运行一个 URL，但似乎没有为[这个 URL](https://developers.facebook.com/tools/debug/og/object?q=https://www.propellerheads.se/shop/index.cfm?fuseaction=product_detail&ID=10726&Cat=1000 "这个网址")抓取任何内容。我收到以下错误消息：

```
Could not retrieve data from URL. 
```

查看[抓取的数据](https://developers.facebook.com/tools/debug/og/echo?q=https://www.propellerheads.se/shop/index.cfm?fuseaction=product_detail&ID=10726&Cat=1000 "抓取的数据")，只抓取了一行，甚至与抓取页面中的内容没有对应关系。

**编辑：**

这是由初始 <html> 标记之前的空格引起的。删除任何前导空格可以解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:59:20.600

检查您是否在页面中使用 gzip，禁用它并重试。那为我修好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:17:51.780

试试这个 URL，Facebook 会尝试下载，但您的服务器没有返回任何数据。当我们看到这个网址时，您会发现

```
http://developers.facebook.com/tools/debug/og/echo?q=https%3A%2F%2Fwww.propellerheads.se%2Fshop%2Findex.cfm%3Ffuseaction%3Dproduct_detail

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> 
```

# bash - 从 Bash 脚本中的函数写入泄漏文件描述符

> ID：10417642
> 
> 赞同：1
> 
> 时间：2012-05-02T16:13:31.387
> 
> 标签：bash, unix, ubuntu-10.04, file-descriptor

我们有一个由 cron 调用并以 root 身份运行的 shell 脚本。

此脚本输出日志记录和调试信息，并且在某一时刻失败了。这一点取决于脚本创建的输出量（例如，如果我们启用更多调试输出，它会更快地失败）。

但是，如果以用户身份直接调用脚本，则它可以正常工作。

我们已经创建了一个简化的测试用例来演示这个问题。

脚本是：

```
#!/bin/bash
function log_so () {
  local msg="$1"
  if [ -z "${LOG_FILE}" ] ; then warn_so "It's pointless use log_so() if LOG_FILE variable is undefined!" ; return 1 ; fi
  echo -e "${msg}"
  echo -e "${msg}" >> ${LOG_FILE}
  (
    /bin/true
  )
}

LOG_FILE="/usr/local/bin/log_bla"

linenum=1
while [[ $linenum -lt 2000 ]] ; do
  log_so "short text: $linenum"
  let linenum++
done 
```

死亡前达到的最高值是 244（当通过 cron 调用时）。

其他一些搜索建议使用函数中的 no-op 子 shell 并调用 /bin/true ，但这不仅不起作用，而且 subshel​​l 选项在主脚本中也不可行。

我们还尝试更改 root 的文件描述符限制，但这没有帮助，并尝试将 #!/bin/sh 和 #!/bin/bash 用于脚本。

我们在 Ubuntu 10.04 LTS 上使用 bash 4.1.5(1)-release。

任何解决方法的想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:58:29.317

手动打开fd然后清理它怎么样？我没有要测试的 bash 4.1，但它可能会有所帮助。

```
LOG_FILE="/usr/local/bin/log_bla"

exec 9<> "$LOG_FILE"

function log_so () {
    local msg="$1"
    if [ -z "${LOG_FILE}" ] ; then warn_so "It's pointless use log_so() if LOG_FILE variable is undefined!" ; return 1 ; fi
    echo -e "${msg}"
    echo -e "${msg}" >&9
    return 0
}

linenum=1
while [[ $linenum -lt 2000 ]] ; do
  log_so "short text: $linenum"
  let linenum++
done

exec 9>&- 
```

# jquery - 仅在 Safari 中出现的 setTimeout 问题

> ID：10417659
> 
> 赞同：3
> 
> 时间：2012-05-02T16:15:02.327
> 
> 标签：jquery, safari, settimeout

*我有一个仅*在 Safari中出现的奇怪问题（我使用的是 5.1.4）。我有以下代码来提交登录表单：

```
 $('#login-submit').click(function(e) {
        e.preventDefault();
        xDomainUtils.setIframeProxy('showLoginLoader');
        setTimeout(function() { 
            $('#login-form').submit();
        }, 1000);
    }); 
```

登录永远不会在 Safari 中发生。加载 gif 只是旋转和旋转。我已经使用 Safari 开发人员工具单步执行代码，并且在行后似乎失败了`}, 1000);`。它不会抛出任何 JavaScript 错误——就好像 JavaScript 在那之后停止运行一样。

我知道当你看不到整个代码库时很难提供反馈——我只是想知道这是否是 Safari 的一个已知问题。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-02T16:54:45.197

我的猜测是您的调用`xDomainUtils`在 Safari 中未定义。这里有一个提示：转到 Safari 首选项 > 高级并勾选“在菜单栏中显示开发菜单”。然后转到 Develop > Show Web Inspector（或输入 command-option-i）。在控制台选项卡下（或通过点击转义键），您可以看到您的 javascript 生成的所有错误和警告。

# php - PHP mvc 中可以有太多模型吗？

> ID：10417661
> 
> 赞同：0
> 
> 时间：2012-05-02T16:15:11.970
> 
> 标签：php, model-view-controller, oop

我目前正在为我运行的站点创建自己的 PHP mvc，以便它只包含所需的代码，尽可能轻巧快速。

该站点具有相当多的功能和用户特性，因此确定哪些操作在哪些控制器控制的模型中开始变得相当复杂。

**例子**

假设我有以下会员功能

*   收藏夹
*   朋友们
*   历史

这些中的每一个都可以由**成员**控制器控制，但我的问题是是将它们全部放在一个模型中还是每个模型中。

这三个中的每一个都有许多动作，例如：

*   加入“最喜欢的
*   删除收藏夹
*   显示收藏夹
*   添加到历史记录
*   删除历史
*   显示历史
*   加为好友
*   删除好友
*   留言好友

...ETC

目前我认为为每个人（最爱、朋友、历史）建立一个模型可能是最好的方法，但它会达到一个模型太多的地步吗？

目前整个站点有6个控制器，17个模型和25个视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:22:37.390

我建议你让`ModelController`处理以某种方式修改的操作`Model`。

即`FavoritesController`处理添加、删除和显示收藏夹（存储在 上`FavoritesModel`）。使您的控制器保持精简/苗条，更容易测试（更少的方法）并将逻辑应用程序部分保持在一起。

此外，您可以将应用程序划分为较小的应用程序，每个应用程序处理：

*   验证/登录
*   社交/分享
*   添加/阅读/显示文章（主应用程序）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:13:30.347

是的，从技术上讲，您可以拥有太多模型，PHP 中可以存在多少类（一如既往）是有限制的。但它相当大，所以继续前进。您不仅可以同时拥有许多模型，而且还可以拥有不同类型的模型。因此，请继续前进，不要通过认为可能存在迄今为止您看不到的限制来限制您的编码。

所以不是文件的数量，而是你的代码写得有多好，例如所有属于一起的东西是否正确分组？参见[领域模型](http://en.wikipedia.org/wiki/Domain_model)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:19:54.847

在这种情况下，没有“正确”的答案，所以我只能给你我自己的解释。我会使用一项服务将一个或多个模型绑定在一起。因此，用户服务将使用用户模型和收藏模型来操作和显示用户收藏。

# java - 将 Spring 服务 bean 注入 JSF ManagedBean 时出现 NullPointerException

> ID：10417665
> 
> 赞同：1
> 
> 时间：2012-05-02T16:15:16.113
> 
> 标签：java, spring, jsf-2, dependency-injection

雄猫 7、JSF 2、弹簧 3、Java 6

错误：访问 jsf 页面时，UserBean.java 中的 userService.checkUser(getLogin()) 上出现 NullPointerException（userService 为 null）。

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
           version="2.5">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

面孔-config.xml

```
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
              version="2.0">
    <application>
       <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
        <resource-bundle>
            <base-name>i18n</base-name>
            <var>msg</var>
        </resource-bundle>
        <locale-config>
            <default-locale>en</default-locale>
            <supported-locale>ru</supported-locale>
        </locale-config>
    </application>
</faces-config> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Services Beans -->
    <bean id="userService" class="service.UserServiceImpl">
        <property name="userDao" ref="userDao"/>
    </bean>

    <!-- DAOs -->
    <bean id="userDao" class="dao.UserDaoImpl">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <!-- Hibernate session factory -->
    <bean id="sessionFactory"
          class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="configLocation">
            <value>classpath:/hibernate.cfg.xml</value>
        </property>
    </bean>

    <tx:annotation-driven/>
    <bean id="transactionManager"
          class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
</beans> 
```

用户Bean.java

```
package beans;

import service.UserService;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.SessionScoped;
import java.io.Serializable;

@ManagedBean(name="usersBean")
@SessionScoped
public class UsersBean implements Serializable{
    private String login;
    private String password;
    @ManagedProperty(name = "userService", value = "#{userService}")
    private UserService userService;

    ...Getters, setters for every field...

    public void checkRegistred(){
        userService.checkUser(getLogin());
    }
} 
```

.xhtml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <title>Simple JSF Facelets page</title>
</h:head>

<h:body>
    <ui:composition template="layout.xhtml">
        <ui:define name="content">
            <h:link value="First page" outcome="index.xhtml"></h:link>
            <br/>
            <h:link value="Third page" outcome="third.xhtml"></h:link>
            <br/>
            Hello #{usersBean.login} with pass #{usersBean.password}
            <br/>
            You are #{usersBean.checkRegistred()}
        </ui:define>
    </ui:composition>
</h:body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:04:01.580

看看[这个问题](https://stackoverflow.com/q/8925170/980472)及其答案。在您的情况下，当您使用 XML 配置时，为了使用 @autowired 注释，您还需要修改您的 userServide 声明，如下所示：

```
<bean id="userService" class="service.UserServiceImpl" autowire-candidate="true">
    <property name="userDao" ref="userDao"/>
</bean> 
```

将`autowire-candidate`属性设置为 true，`userService`将可用于自动装配。

**更新：**

```
package beans;

import ...

@SessionScoped
public class UsersBean implements Serializable {

    private String login;

    private String password;

    @Autowired
    private UserService userService;

    ...Getters, setters for every field...

    public void checkRegistred(){
        userService.checkUser(getLogin());
    }

} 
```

此外，在您的 XML 中它应该找到：

```
<context:component-scan base-package="beans.*" />
<context:annotation-config /> 
```

# .net - 如何扩展（展平）数据表中其中一列包含数组的行？

> ID：10417667
> 
> 赞同：1
> 
> 时间：2012-05-02T16:15:25.337
> 
> 标签：.net, powershell, datatable, system.array

有没有办法如何扩展/展平数据表中的行？我在有 2 列的变量 $table 中有数据。在第一列中存储了 [string] 值，而在第二列中存储了 [string[]] 数组值，其中至少包含 2 个值。这是这样一行的示例：

```
DistinguishedName                       GroupNames
-----------------                       ----------
Applications/FarmName/Notepad           {Domain\Group1, Domain\Group2} 
```

我希望将其展平并导出为例如 CSV 格式，而第一列保留“键值” DistinguishedName，所有其他列都填充了从 GroupNames 列扩展的特定值。所需输出的示例如下：

```
Applications/FarmName/Notepad; Domain\Group1; Domain\Group2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:33:23.963

如果您打算导出到 csv，可能的解决方案可能是创建自己的 PSObject 并动态填充它的属性。

像这样的东西：

```
$expandedObjects = @()
$table | % {
    #assuming $_ reffers to actual row

    $obj = new-object PSObject
    $obj | Add-Member -MemberType NoteProperty -Name "DistinguishedName" -Value $_.DistinguishedName

    $i = 0 # for dynamic property naming
    $_.GroupNames | % {
        # assuming $_ reffers to actual GroupName value
        $obj | Add-Member -MemberType NoteProperty -Name $("GroupName{0}" -f $i++) -Value $_
    }
    $expandedObjects += $obj
}
$expandedObjects | export-csv .. 
```

我没有测试代码，所以可能会有一些错误。另外我不知道您的 $table veriable 到底是什么类型。但这个想法应该很清楚。

# email - Outlook 2010 email fixed width issue

> ID：10417670
> 
> 赞同：1
> 
> 时间：2012-05-02T16:15:33.360
> 
> 标签：email, outlook, width, installation

I have an html email .oft (Outlook File Template) created in Outlook 2010 with a table layout width set to 600px. This ecard template is distributed to others at the company who might want to add a few lines of texts and signature to the bottom after the table. However all the added text appears on the top right next to the table. How can I either block any content on the right of the table or set the width of the email to be only 600px so any new additions will appear correctly at the bottom after the table? I know that floats and clear css don't work reliably across in html emails. Thanks, Attila

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T23:13:51.033

您最好的选择是创建一个 100% 宽度的表格。在该表中，创建两个单元格，一个宽度为 600，另一个宽度为“auto”。然后，这将跨越电子邮件窗口的全部剩余宽度。

这不是一个理想的情况，但正如您所提到的，在 MS Outlook 2010 中可实现的功能存在非常严格的限制，更不用说 2007 年了。

像这样的东西：

```
<table><tr>
<td width="600">Enter details here</td>
<td> &nbsp; (space character so no client disregards this cell) </td>
</tr></table> 
```

您可能需要尝试最后一个单元格的宽度，您可以尝试将其设置为 100% 或其他东西以强制占用右侧所有额外空间，但这将归结为您的代码和电子邮件，以及什么最适合该组织。

如果这不起作用，请考虑在第一个表中放置一个嵌套表以确保...

```
<table width="100"><tr>
   <td width="100%">
     <table width="600"><tr>
       <td width="600">Enter details here</td>
     </tr></table>
   </td>
   <td>&nbsp;(space character so no client disregards this cell) </td>
</tr></table> 
```

作为指南 - 我使用 Campaign Monitor 参考来了解兼容性： http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/) - 在该页面上下载 XLS 文件。

祝你好运。

# jquery - jQuery Mobile 在动态创建后没有增强标题？

> ID：10417672
> 
> 赞同：0
> 
> 时间：2012-05-02T16:15:44.257
> 
> 标签：jquery, jquery-mobile

我正在尝试使用 jQuery mobile 创建一个带有动态生成标题的新页面。但是，当我这样做时，我的标题永远不会增强。

我的javascript如下：

```
var create_new_page = function(){
    var new_page = jQuery('<div>').attr('class', 'mypage').attr('id', 'new-page').data('role','page'); 
    var nav_bar = jQuery(<div data-role="navbar"><h1>THIS SHOULD BE A NAVBAR</h1></div>
    new_page.appendTo(jQuery('body')).trigger("create");
    new_page.ready(function(){
        jQuery.mobile.changePage(new_page);
    });
}
jQuery( document ).delegate("#loading", "pageinit", function() {
   create_new_page();
}); 
```

[您可以在http://jsfiddle.net/KAWtE/2/](http://jsfiddle.net/KAWtE/2/)上使用我正在使用的确切代码

如果您不建议在随机元素上调用 .page() 或 .trigger("create") 而不在 fiddler 中对其进行测试，我将不胜感激。我试图在元素和容器的每种组合上调用这些函数，但无济于事。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:47:34.013

不`data('role','page')`工作。如果你更换

```
var new_page = jQuery('<div>').attr('class', 'mypage').attr('id', 'new-page').data('role','page'); 
```

和

```
var new_page = jQuery('<div data-role="page">').attr('class', 'mypage').attr('id', 'new-page'); 
```

有用。（它在小提琴[http://jsfiddle.net/KAWtE/3/](http://jsfiddle.net/KAWtE/3/)上）

# javascript - sprockets dont want to compile valid coffee script

> ID：10417673
> 
> 赞同：0
> 
> 时间：2012-05-02T16:15:46.530
> 
> 标签：javascript, coffeescript, sprockets, middleman

```
@element.stop().animate
  scrollLeft: @left
  scrollTop:  @top
, @options.duration, "linear" 
```

it compiles in online interpreter (coffeescript.org) to:

```
this.element.animate({
  scrollLeft: this.left,
  scrollTop: this.top
}, this.options.duration, "linear"); 
```

But middleman (it uses sprockets) throws an exception about "." in "@options.duration":

```
Uncaught Error: ExecJS::ProgramError: Error: Parse error on line 131:
Unexpected '.' (in */source/javascripts/views/scene.js.coffee) application.js:1
(anonymous function) 
```

I am new to coffee script. Does it look like bug in sprockets?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:02:22.400

如果您不小心在 CoffeeScript 中混合了制表符和空格，则可能会发生该错误。您可能无法用眼睛看到问题，并且您在 coffeescript.org 上检查您的工作所做的复制/粘贴可能会将制表符转换为您背后的空格。

# android - my jsoup can not selcet elements by some classes

> ID：10417674
> 
> 赞同：0
> 
> 时间：2012-05-02T16:15:54.683
> 
> 标签：android, jsoup

I try to parse the source file of a website called dgtle.com In order to get the top news, I coded as :

```
 Document doc = Jsoup.connect("http://www.dgtle.com").get();
    Elements blocks = doc.getElementsByClass("listcs1"); 
```

I got nothing but NullPointerExecption while doing this. But the Div with the class of　"listcs1" really exists. This troubles me and I'm wondering whether anybody can help me deal with this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:25:17.280

使用 doc.select 而不是 getElementsByClass..

前任。

```
Elements blocks = doc.select("div.listcs1"); 
```

这将获得所有具有“listcs1”类的div

Jsoup 在这里列出了所有的选择组合：http: [//jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)

# python - Compare only object references in numpy

> ID：10417681
> 
> 赞同：0
> 
> 时间：2012-05-02T16:16:10.263
> 
> 标签：python, numpy, equality

I have a numpy array of Python object. I want to compare the array against a python object and I don't want the comparison with `==` operator, but just a reference comparison is enough for my requirements.

```
import numpy as np
a = np.array(["abc", "def"], dtype="object")
a == "abc" 
```

I am sure about my array that reference copy is enough. Let's say all strings, I have in my array are interned.

This is primarily to improve the performance when comparing zillion values. Python object comparisons are really slow.

a is "abc" won't do what I want because

```
In [1]: import numpy as np

In [2]: a = np.array(["abc", "def"], dtype="object")

In [3]: a == "abc"
Out[3]: array([ True, False], dtype=bool)

In [4]: a is "abc"
Out[4]: False 
```

I want the result of `a == "abc"` but I don't Python's `__eq__` method be used for the same but just the `is` operator.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:18:15.047

> 参考比较足以满足我的要求

要比较对象身份，请使用`is`代替`==`：

```
if a is b:
   ... 
```

从[文档](http://docs.python.org/reference/expressions.html#not-in)中：

> 对象身份的运算符`is`和测试：当且仅当和是同一个对象时为真。产生逆真值。`is not``x is y``x``y``x is not y`

**编辑：**要应用于`is`数组的每个元素，您可以使用：

```
In [6]: map(lambda x:x is "abc", a)
Out[6]: [True, False] 
```

或者简单地说：

```
In [9]: [x is "abc" for x in a]
Out[9]: [True, False] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:51:20.893

[np.vectorize](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)怎么样：

```
vector_is = np.vectorize(lambda x, y: x is y, otypes=[bool]) 
```

然后你有

```
>>> a = np.array(["abc", "def"], dtype="object")

>>> vector_is(a, "abc")
array([ True, False], dtype=bool) 
```

不幸的是，我不知道你是否可以`operator.is_`在这里使用，因为我得到

```
ValueError: failed to determine the number of arguments for <built-in function is_> 
```

* * *

这似乎比列表理解稍慢（可能是因为`lambda`调用），尽管它的优点是在它接受的参数方面更加灵活：

```
python -mtimeit -s 'import numpy as np' -s 'import random, string' -s 'a = np.array(["".join(random.choice(string.ascii_lowercase) for x in range(4)) for e in range(100000)])' -s 'vector_is = np.vectorize(lambda x,y: x is y, otypes=[bool])' 'vector_is(a, "abcd")'
10 loops, best of 3: 28.3 msec per loop

python -mtimeit -s 'import numpy as np' -s 'import random, string' -s 'a = np.array(["".join(random.choice(string.ascii_lowercase) for x in range(4)) for e in range(100000)])' -s 'vector_is = np.vectorize(lambda x,y: x is y, otypes=[bool])' '[x is "abcd" for x in a]'
100 loops, best of 3: 20 msec per loop

python -mtimeit -s 'import numpy as np' -s 'import random, string' -s 'a = np.array(["".join(random.choice(string.ascii_lowercase) for x in range(4)) for e in range(100000)])' -s 'vector_is = np.vectorize(lambda x,y: x is y, otypes=[bool])' 'np.fromiter((x is "abcd" for x in a), bool, len(a))'
10 loops, best of 3: 23.8 msec per loop 
```

最后`np.fromiter((x is "abcd" for x in a), bool, len(a))`一种方法是从列表理解方法中获取 numpy 数组的一种方法。

不幸的是，所有这些都比仅使用要慢得多`==`：

```
python -mtimeit -s 'import numpy as np' -s 'import random, string' -s 'a = np.array(["".join(random.choice(string.ascii_lowercase) for x in range(4)) for e in range(100000)])' -s 'vector_is = np.vectorize(lambda x,y: x is y, otypes=[bool])' 'a == "abcd"'                                        
1000 loops, best of 3: 1.42 msec per loop 
```

# c# - Missing column parsing Excel file with OpenXml

> ID：10417682
> 
> 赞同：0
> 
> 时间：2012-05-02T16:16:12.520
> 
> 标签：c#, openxml

I discovered that using OpenXml my columns don't always line up. For instance look at this example

This is the header row column 37 = "Exchange Only" column 38 = "Qty On Hand" column 39 = "Cost Method" column 40 = "Cost Method Amount"

Now, in the next row - the one that has actual data in both 37 and 38 are blank but it omits column 38\. so my data looks like this.

column 37 = "" (should be blank) column 38 = "Set Amount" (Should be blank cause it should line up with 'Qty On Hand') column 39 = 0

Notice that it dropped out the real column / cell 38 and now my parser no longer lines up. both 37 and 38 are blank but it doesn't lose 37\.

Here is some code to show how I am getting to the string array - it's really just a modified example from MSDN.

```
public InventoryItemLoadProxy CreateInventoryItemFromSpreadsheetRow(Row row, SharedStringTable sharedStrings)
     {
         var invItem = new InventoryItemLoadProxy();
         var theCells = row.Descendants<Cell>();

         var textValues =
             from cell in row.Descendants<Cell>()
             select(cell.CellValue == null ? string.Empty : ((cell.DataType != null
                             && cell.DataType.HasValue
                              && cell.DataType == CellValues.SharedString) ? sharedStrings.ChildElements[int.Parse(cell.CellValue.InnerText)].InnerText : cell.CellValue.InnerText));

          if(textValues.Any(x => x != string.Empty))
          {
             var textArray = textValues.ToArray();

             invItem.PartNumber = textArray[0].ToStrippedPartNumber();
             invItem.DisplayPartNumber = textArray[0];
             //More parsing...
         }
    } 
```

You can see I am saying if it's null just make it string.empty (yeah - that crazy linq statement will get refactored at some point).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:34:49.580

事实证明，其他人已经回答了这个问题。请参阅[阅读 Excel Open XML 忽略空白单元格](https://stackoverflow.com/questions/3837981/reading-excel-open-xml-is-ignoring-blank-cells)。我使用了更多的“蛮力和无知”方法，尽管一旦我有机会对来自其他答案的代码进行单元测试，我可能会进行重构。不过，这可以满足我目前的需求。

```
private int GetIndexFromCellRef(Cell cell)
        {
            var colname = cell.CellReference.Value;
            colname = Regex.Replace(colname, "[0-9]", "");
            var indexList = new Dictionary<string, int>
                {
                    {"A", 0},
                    {"B", 1},
                    {"C", 2},
                    {"D", 3},
                    {"E", 4},
                    {"F", 5},
                    {"G", 6},
                    {"H", 7},
                    {"I", 8},
                    {"J", 9},
                    {"K", 10},
                    {"L", 11},
                    {"M", 12},
                    {"N", 13},
                    {"O", 14},
                    {"P", 15},
                    {"Q", 16},
                    {"R", 17},
                    {"S", 18},
                    {"T", 19},
                    {"U", 20},
                    {"V", 21},
                    {"W", 22},
                    {"X", 23},
                    {"Y", 24},
                    {"Z", 25},
                    {"AA", 26},
                    {"AB", 27},
                    {"AC", 28},
                    {"AD", 29},
                    {"AE", 30},
                    {"AF", 31},
                    {"AG", 32},
                    {"AH", 33},
                    {"AI", 34},
                    {"AJ", 35},
                    {"AK", 36},
                    {"AL", 37},
                    {"AM", 38},
                    {"AN", 39},
                    {"AO", 40},
                    {"AP", 41},
                    {"AQ", 42},
                    {"AR", 43},
                    {"AS", 44},
                    {"AT", 45},
                    {"AU", 46},
                    {"AV", 47},
                    {"AW", 48},
                    {"AX", 49},
                    {"AY", 50},
                    {"AZ", 51},
                    {"BA", 52},
                    {"BB", 53},
                    {"BC", 54},
                    {"BD", 55},
                    {"BE", 56},
                    {"BF", 57},
                    {"BG", 58},
                    {"BH", 59},
                    {"BI", 60},
                    {"BJ", 61},
                    {"BK", 62},
                    {"BL", 63},
                    {"BM", 64},
                    {"BN", 65},
                    {"BO", 66},
                    {"BP", 67},
                    {"BQ", 68}
                };

            if (indexList.ContainsKey(colname))
                return indexList.First(x => x.Key.Equals(colname)).Value;
            return -1;
        } 
```

# php - Loading PHP results after form submit on same page using Ajax

> ID：10417684
> 
> 赞同：0
> 
> 时间：2012-05-02T16:16:19.780
> 
> 标签：php, javascript, ajax, forms, submit

I have a form that i want to submit comments to a database containing film information. In the same div tag as the form as i have a php script that loads the comments from the database relating to the film_id people are commenting on.

The form code is this

```
<p>Add a Comment</p>
<form id="addCommentForm" method="post">
<div>
<input type="hidden" name="hidden" id="hidden" value="54">
<label for="name">Your Name</label>
<input type="text" name="name" id="name" />

<label for="body">Comment Body</label>
<textarea name="comment" id="comment" cols="20" rows="5"></textarea>

<input type="submit" id="comment" class="button" value="Submit" />
</div>
</form> 
```

The hidden value contains an id number for the film the people are commenting on. I have this javascript -

```
<script type="text/javascript">
                                    $(".button").click(function() {

        var name = $("input#name").val();
        var comment = $("input#comment").val();
        var filmnumber = $("input#hidden").val();

        var dataString = 'name='+ name + '&comment=' + comment + '&filmnumber=' + filmnumber;

    $.ajax({
      type: "POST",
      url: "comment.php",
      data: dataString,
      success: function() {

        $('#<?php echo $row['Films_ID'] ?>').fadeOut('slow');
    document.getElementById(<?php echo $row['Films_ID'] ?>).innerHTML=xmlhttp.responseText;
    $('#<?php echo $row['Films_ID'] ?>').fadeIn('slow');
      }
     }); 
```

I want it to send the data to my php page called comment and then refresh the div (the div number is the film_id relating to the comment).

My php page that i want it to send to is this -

```
<?php

    $comment_name =  $_POST["name"];
    $comment_body =  $s_POST["comment"];
    $film_no =  $s_POST["filmnumber"];

    // Connects to your Database 
     mysql_connect("localhost", "****", "****") or die(mysql_error()); 
     mysql_select_db("ignitet1_CheckFilm") or die(mysql_error()); 

    $query1 = "INSERT INTO film_comments (comment_id,Films_ID,name,comment) 
    VALUES ('','$film_no', '$comment_name','$comment_body')";
    $runquery1 = mysql_query($query1)or die(mysql_error()); 

?> 
```

Thanks for your help guys!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:18:28.517

像添加条目一样使用 AJAX，或者在添加新条目的同一调用中获取更新的列表，或者在之后进行第二次调用，并使用此结果来填充页面上的评论。

# c# - 在 .NET 中释放 COM 对象的“所有权”

> ID：10417686
> 
> 赞同：6
> 
> 时间：2012-05-02T16:16:25.093
> 
> 标签：c#, vb.net, com

我有一个客户/合作伙伴试图使用我们公开的 COM 功能将他们的应用程序与我们的应用程序链接起来。到目前为止，他们已经有了一个 COM 对象，它代表我们的软件包的一个实例，然后使用我们的 COM 方法根据他们在应用程序中所做的事情以编程方式为用户构建一些东西。它本质上是一个“导出”功能。

他们要求我做的是让用户决定何时关闭实例，但我不知道该怎么做。我的意思是当我们的软件包被加载时，它是可见的并且可以被用户交互。完成后，他们自然会单击右上角的叉号退出软件。这不起作用，因为 COM 对象在他们的应用程序中仍然是“活动的”。我们的软件包只能通过在任务管理器中终止进程来关闭，而通过 COM 加载它的应用程序保持打开状态。一旦他们的应用程序退出，我们的应用程序将自动关闭。由于 COM 调用，他们的应用程序似乎“拥有”了我们的应用程序。

我在 C# 中制作了一个快速演示应用程序，尝试使用`Marshal.FinalReleaseComObject(myObject)`无济于事的东西。

我意识到将 COM 用于这种事情并不是它的真正用途，但希望有某种解决方法？客户/合作伙伴使用的是 VB.NET，但 C# 很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:23:32.110

您遗漏了一些关于您自己的应用程序的关键信息，包括最重要的是您如何实现向客户端应用程序公开的 COM 接口。您的描述对我来说是一个危险信号的一个方面是您的应用程序的实例化。您说客户端应用程序是“使用 VB 通过引用我们的 exe 来启动新进程”。如果您已正确实施并注册了您的 COM 服务器，则不需要这样做。让我告诉你我将用来完成你所要求的架构，希望这对你有用。

首先，如果您想在单独的进程中提供 COM 对象，正确的方法是实现 COM 进程外服务器。使用进程外服务器，当客户端通过 COM 请求您的接口之一时，COM 将自动启动您的应用程序。进程外服务器的部分实现要求是在最后一个 COM 客户端释放其最后一个接口指针时自动关闭。

为了从进程外服务器公开用户界面，您需要使用消息循环生成一个单独的单线程单元 (STA) 线程。这将允许您关闭 STA 线程上的任何窗口，包括主窗口，而不会终止您的 COM 服务器。这是因为 COM 服务器实现将运行它自己的多线程单元 (MTA) 消息循环线程，以支持 COM 进程外调用。MTA线程是主应用线程，当最后一个客户端接口被释放时，服务器会关闭它。

*当接口保持未释放时，不应*关闭COM 服务器。这意味着客户端应用程序有责任正确发布接口。但是您的 .NET 测试框架应该已经完成​​了这项工作，因此您的实现似乎有些问题。

假设您遵循本指南，您将需要一个计划来处理最后一个客户端界面已发布但您仍然有打开的 UI 窗口的情况。一旦您正确设置了所有内容，这应该不是主要问题。例如，您可以在 UI 打开时简单地引用您自己的界面之一，这将防止 MTA 关闭。

# java - 关于通过反射的工厂设计模式

> ID：10417688
> 
> 赞同：0
> 
> 时间：2012-05-02T16:16:27.123
> 
> 标签：java, design-patterns

我正在对工厂模式进行研发我已经开发了下面的代码，现在我知道子类是 Dog 和 Cat，但是如果我想通过在 main 中传递类名来通过反射实现同样的事情，请告诉我该怎么做。爪哇

```
 public abstract class Animal {
    public abstract String makeSound();
}

public class Dog extends Animal {

    @Override
    public String makeSound() {
        return "Woof";
    }

}

public class Cat extends Animal {

    @Override
    public String makeSound() {
        return "Meow";
    }

}

public class AnimalFactory {

    public Animal getAnimal(String type) {
        if ("canine".equals(type)) {
            return new Dog();
        } else {
            return new Cat();
        }
    }

}

public class Main {

    public static void main(String[] args) {
        AnimalFactory animalFactory = new AnimalFactory();

        Animal a1 = animalFactory.getAnimal("feline");
        System.out.println("a1 sound: " + a1.makeSound());

        Animal a2 = animalFactory.getAnimal("canine");
        System.out.println("a2 sound: " + a2.makeSound());
    }

} 
```

请告知我如何向其中添加反射功能，这样我什至不需要确定类型，只需在主 java 中传递类名并创建该子类的对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:20:09.693

为此，您的`Cat`和`Dog`类必须在包中它们自己的文件中`your.package`并具有默认构造函数：

```
public class AnimalFactory {
    public Animal getAnimal(String type) {
        return (Animal) Class.forName("your.package." + type).newInstance();
    }
} 
```

# php - 如何满足内置读取操作的开放图要求

> ID：10417690
> 
> 赞同：0
> 
> 时间：2012-05-02T16:16:43.723
> 
> 标签：php, facebook-opengraph

我想知道如何让用户能够在需要时关闭时间轴上的操作共享，因为 Facebook 希望在提交操作之前实现此功能。我浏览了一些相关问题，但没有找到任何解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:26:47.187

以下文档描述了如何删除已发布的操作。

[https://developers.facebook.com/docs/opengraph/actions/#delete](https://developers.facebook.com/docs/opengraph/actions/#delete)

# php - 如何通过 http post 将 xml 文件从服务器发送到设备

> ID：10417692
> 
> 赞同：0
> 
> 时间：2012-05-02T16:16:46.477
> 
> 标签：php, xml, http, post

服务器将运行 php，设备可以是 iphone 或 android，具有自己的应用程序来解析发送的 xml。我将发送 xml 作为对来自应用程序的不同请求的响应：登录、登录等，但我不知道从哪里开始。我用谷歌搜索和搜索，答案是关于 CUrl。有人可以在这里指出我正确的方向吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:50:25.063

我想这就是你要找的。您必须自己将其放入 XML 内容中，但这是您可以从 PHP 发布的方式。

[http://www.php.net/manual/en/function.stream-context-create.php#74795](http://www.php.net/manual/en/function.stream-context-create.php#74795)

或者你可以使用 curl，但我还没有使用太多。

[http://www.php.net/manual/en/book.curl.php](http://www.php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:02:44.793

正如其他人指出的那样，如果您想从服务器发布某些内容，则设备还必须运行 HTTP 服务器。考虑这可能对设备意味着的资源使用情况：如果它总是必须响应 POST，这可能会影响其低功耗模式，因为必须始终运行一个后台任务来监控端口并唤醒设备上的服务器来处理它。

如果这是为了支持“推送”式通知，请考虑查看[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)规范。

# ruby - Watir-webdriver：我无法单击 iframe 中的可见 div

> ID：10417696
> 
> 赞同：0
> 
> 时间：2012-05-02T16:16:55.410
> 
> 标签：ruby, facebook, watir

我有一个 facebook 应用程序，我想使用 Watir 进行测试。问题是我无法访问它的 div。位于 iframe 内。我能找到它，它甚至说它是可见的。问题是我不能点击它（它说它在尝试时是不可见的）

你能帮忙吗？我使用 XXX 而不是用户名和 Facebook 的不同应用发布了我的代码。

非常感谢。

```
require "watir-webdriver"

browser  = Watir::Browser.new
browser.goto "http://www.facebook.com"

sleep(2)
if browser.text_field(:id => 'pass').exists?
   browser.text_field(:id => 'email').set 'XXXXXXXXX'
   browser.text_field(:id => 'pass').set 'ZZZZZZZ'
   browser.button(:value => 'Log In').click
end
sleep(2)
browser.text_field(:id => 'q').set 'World Of Fun'
browser.send_keys :enter
sleep (2)

browser.goto "https://www.facebook.com/dialog/oauth?client_id=277448022299830&redirect_uri=http%3A//apps.facebook.com/worldoffun/%3Fref%3Dts&canvas=1&fbconnect=0&scope=email,publish_actions"
sleep (2)

if browser.button(:name => 'grant_clicked').exists?
  browser.button(:name => 'grant_clicked').click
  sleep(3)
end
sleep(1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:09:16.273

那是因为您尝试识别的元素不在该页面上，请尝试以下操作：

```
 if browser.label(:id => 'grant_clicked').exists?
  browser.label(:id => 'grant_clicked').click
  sleep(3) 
```

我还注意到该应用程序在 Flash 中，因此 Watir 将无法处理其中的 Flash 元素，我建议将[AutoIt](http://www.autoitscript.com/site/autoit/)或[Project Sikuli](http://sikuli.org/)与 Watir-Webdriver 一起使用。

# ruby-on-rails - Rails 3 视图中是否接受查询？

> ID：10417697
> 
> 赞同：4
> 
> 时间：2012-05-02T16:16:55.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

我对 MVC 的理解是 SQL（或任何与持久性相关的）查询只能在模型/控制器对象中执行。因此，[关于控制器的 Rails 3 文档](http://guides.rubyonrails.org/action_controller_overview.html#what-does-a-controller-do)指出：

> [控制器] 使模型数据可用于视图，以便它可以向用户显示该数据。

但是，文档也有[直接在 View (HTML helper) 代码中使用查询的](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)示例：

```
select("post", "person_id", Person.all.collect {|p| [ p.name, p.id ] })
# Note the model query -----^ 
```

在 Rails 3 中，在 Views 中执行查询通常是可以接受的，还是有令人信服的理由将此类查询严格委托给 Model 或 Controller 对象？文档只是说明性的还是举例说明了最佳实践？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:20:30.960

我认为这只是示范性的，一般来说并不是一个很好的例子。它与我们可以在 PHP 中找到的 SQL Spaghettis 代码非常接近。

我目前正在阅读[Rails 反模式书](https://rads.stackoverflow.com/amzn/click/com/0321604814)，他们建议在模型中确定所有这些查询的范围。然后，控制器将有权访问模型中定义的方法，将结果暴露给视图。

但是，如果您不注意，您很快就会发现自己有胖模型，为了避免这种情况，您可以使用对这种模式有很大帮助的[命名范围。](http://railscasts.com/episodes/108-named-scope)另一个需要注意的关键规则是适用于 Rails[的 Demeter 法则，](http://en.wikipedia.org/wiki/Law_of_Demeter)这意味着一个模型不应该过多了解其他模型的实现细节。因此，如果有与关联模型相关的查询，您应该在此关联模型中进行范围。

最后，以下[文章](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)（由 Jamis Buck 撰写）（*Skinny Controller，Fat Model*）是该主题的好读物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:21:00.690

在视图中执行查询通常是不可接受的，即使它们非常简单。为了避免使控制器变得沉重，一个好的做法（如文档所述）是创建一个 Helper 并将查询放在那里。

当然，如果你想重用查询，最好把它放在模型中，也许使用范围。

# php - 如何从其他两个表创建派生表？

> ID：10417703
> 
> 赞同：3
> 
> 时间：2012-05-02T16:17:32.007
> 
> 标签：php, mysql, sql

我有 2 个基表 TABLE_1 和 TABLE_2。我想派生一个包含两个表的 ID 的新表。

我需要 SQL 查询来创建第三个表调用 NEW_TABLE，其中 ID_1 和 ID_2 组合形成主键。如果 TABLE_1 或 TABLE_2 中的任何 ID 被更新或删除，它也应该反映在 NEW_TABLE 中。例如：

```
TABLE_1          TABLE_2
ID    XXX        ID     ZZZ
100   A          200     P
101   B          201     Q  
102   N          202     R 
103   F          203     S

NEW_TABLE
ID_1   ID_2
100    200
100    201
100    203
101    200
101    202
103    200
103    201
103    203 
```

请帮助我......在此先感谢...... :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:20:29.950

您可以使用 SELECT INTO 从某些表中进行选择并将数据插入到新表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:19:50.087

您可以对上述情况使用视图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T16:21:02.363

最好的方法是使用视图

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:23:57.417

为什么不只使用查询而不是表

```
SELECT
TABLE_1.ID,TABLE_2.ID
FROM TABLE_1,TABLE_2 
```

# google-plus - 将 Google+ 整合到网站中

> ID：10417704
> 
> 赞同：0
> 
> 时间：2012-05-02T16:17:34.980
> 
> 标签：google-plus

在谷歌上搜索时，我注意到很多网站在网站链接下都有“作者：约翰史密斯”。这将链接到 google+ 帐户。一个例子是，如果你在谷歌搜索中输入“CSS Tricks”，你会看到一张 Chris Coyier 的照片，并且有类似“更多由 chris coyier”之类的东西。有人知道这是怎么工作的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:29:26.113

您感兴趣的主题是作者身份。有几种方法可以在 Google 建立作者身份。

**个人资料徽章**

如果您将个人资料徽章添加到您的域，它将帮助 Google 将您的 Google+ 个人资料与您在该域上创建的内容相关联。您可以通过将此代码添加到您的网站来添加个人资料徽章。

```
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<g:plus href="https://plus.google.com/{profileId}" rel="author"></g:plus> 
```

或者，您可以使用[配置工具](https://developers.google.com/+/plugins/badge/personal-config)来生成特定于您需要的代码。

**验证您的电子邮件和链接**

您还可以通过验证您的电子邮件并从您的 Google+ 个人资料链接到该内容来确定您的作者身份。[您可以在此处](https://plus.google.com/authorship)找到电子邮件验证表和更详细的说明。

# java - Java 修改 run()，通过添加循环并删除对 display() 的调用！

> ID：10417705
> 
> 赞同：2
> 
> 时间：2012-05-02T16:17:37.990
> 
> 标签：java, arrays, while-loop

所以我在使用 Java 代码时遇到了很多困难，我应该修改 ContactList.java 以便它循环提示用户输入整数键。如果键为非负数，则在数组中搜索具有该键的 Person。如果找到此人，则显示此人。如果找不到 Person，则显示一条消息。如果用户输入否定键，程序应该终止。但不确定在哪里实现 while 循环。目前 run() 也会抛出 IOException。我正在尝试更改 run() 以使其捕获 IOException，如果捕获到异常，则显示描述性消息并终止。

```
import java.io.IOException;
import java.net.URL;
import java.util.Scanner;

public class ContactList {

    private Person[] theList;
    private int n;            // the number of Persons in theList

    // Returns a Scanner associated with a specific text-based URL
    // online.
    private Scanner makeScanner() throws IOException {
        final String source = 
          "http://userpages.umbc.edu/~jmartens/courses/is247/hw/05/05.txt";
        final URL src = new URL(source);
        return new Scanner(src.openStream());
    } // makeScanner()

    // Return a Person instance based upon data read from the given
    // Scanner.
    private Person getPerson(final Scanner in) throws FileFormatException {
        if (!in.hasNextLine())
          return null;

        String line = in.nextLine().trim();
        int key = Integer.parseInt(line);
        String name = in.nextLine().trim();
        String mail = in.nextLine().trim().toLowerCase();
        if (in.hasNextLine()) {
          String empty = in.nextLine().trim(); // skip blank line
          if (empty.length() > 0)
            throw new FileFormatException("missing blank line");
        } // if

        return new Person(key, name, mail);
    } // getPerson()

    // Display the array contents.
    private void display() {
        for (int i = 0; i < n; ++i)
          System.out.println(theList[i]);
    } // display()

    // Example code to display the contents of the contact list file.
    private void run() throws IOException {
        theList = new Person[1024];
        Scanner in = makeScanner();

        int index = 0; 
        Person p = getPerson(in);
        while (p != null) {
          theList[index++] = p;
          p = getPerson(in);
        }
        n = index;

        display();
    } // run()

    public static void main(String[] args) throws IOException {
        ContactList cl = new ContactList();
        cl.run();
    } // main()

} // class ContactList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:22:40.553

在方法中读取整个列表后，您可以放置​​它`run()`：

```
 private void run() throws IOException {
    theList = new Person[1024];
    Scanner in = makeScanner();

    int index = 0; 
    Person p = getPerson(in);
    while (p != null) {
      theList[index++] = p;
      p = getPerson(in);
    }
    n = index;

    display();

    int key = 0;
    do {
      System.out.print("Enter a key: ");
      try {
        Scanner userInput = new Scanner(System.in);
        key = userInput.nextInt();
      } catch (InputMismatchException e) {
        System.out.println("> Invalid key");
        continue;
      }

      Person found = search(key);
      if (found == null)
        System.out.println("> Person not found");
      else
        System.out.println("> Person found => " + found);
    } while(key >= 0);
  } // run() 
```

该`search`方法是一个简单的循环，将列表中每个的 id`Person`与提供的键进行比较。

对于`run`不抛出的方法`IOException`，请按照*小册子*的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:23:04.643

你知道try/catch吗？

```
private void run() {
    try {
        // Loop, etc.
    } catch (IOException e) {
        // Handle exception
    }
} 
```

# c# - 使用 LINQ 查询数据表

> ID：10417720
> 
> 赞同：0
> 
> 时间：2012-05-02T16:18:38.903
> 
> 标签：c#, asp.net, linq

我的 C# linq 查询有点麻烦，希望您能提供帮助。

我想做的是从数据库中获取货币、日期和汇率的列表，然后将记录转换为 GBP、EUR 或 USD 并转换为单独的表格。我知道我可以用多个 foreach/for 循环来做到这一点，但我想在没有这些多次迭代的情况下做到这一点。

我目前获得 gbpConvertedRates 的美元和欧元汇率（这很好），eurConvertedRates 的美元汇率（也需要英镑）以及除欧元和英镑的 usdConvertedRates 以外的所有其他汇率（也需要这两个汇率）

这是我的代码：

```
foreach (string curr in ConfigTemplate.WantedCurrencies)
{         
    temp = new DataTable();
    cmd = new SqlCommand();
    cmd.CommandText = "GetLast5Rates";
    cmd.CommandType = CommandType.StoredProcedure;
    SqlParameter param = new SqlParameter();
    param.ParameterName = "@curr";
    param.Value = curr;
    cmd.Parameters.Add(param);
    temp = dbConn.ExecuteQuery(cmd);
    MaxDate = DateTime.Parse(temp.Compute("MAX(Date)", string.Empty).ToString());
    MinDate = DateTime.Parse(temp.Compute("MIN(Date)", string.Empty).ToString());
    OtherDate = MaxDate.AddDays(-1);
    //Populate the base rates for EUR, GBP and USD
    for (int i = 0; i < temp.Rows.Count; i++)
    {
        if (curr == "EUR")
        {
            if (log.IsInfoEnabled) log.Info("Populate EUR DataTable");
            row = eurRateDt.NewRow();
            row[1] = DateTime.Parse(temp.Rows[i].ItemArray[0].ToString());
            row[0] = temp.Rows[i].ItemArray[1].ToString();
            row[2] = Convert.ToDecimal(temp.Rows[i].ItemArray[2]);
            eurRateDt.Rows.Add(row);
        }
        if (curr == "GBP")
        {
            if (log.IsInfoEnabled) log.Info("Populate GBP DataTable");
            row = gbpRateDt.NewRow();
            row[1] = DateTime.Parse(temp.Rows[i].ItemArray[0].ToString());
            row[0] = temp.Rows[i].ItemArray[1].ToString();
            row[2] = Convert.ToDecimal(temp.Rows[i].ItemArray[2]);
            gbpRateDt.Rows.Add(row);
        }
        if (curr == "USD")
        {
            if (log.IsInfoEnabled) log.Info("Populate USD DataTable");
            row = usdRateDt.NewRow();
            row[1] = DateTime.Parse(temp.Rows[i].ItemArray[0].ToString());
            row[0] = temp.Rows[i].ItemArray[1].ToString();
            row[2] = Convert.ToDecimal(temp.Rows[i].ItemArray[2]);
            usdRateDt.Rows.Add(row);
        }
    }
    //Linq query that converts the rates in the temp table
    //to that of the GBP rates 
    var gbpConversion = from myRow in temp.AsEnumerable()
                        join gbpRow in gbpRateDt.AsEnumerable() 
                            on myRow["Date"] equals gbpRow["Date"]
                        where myRow["Currency"].ToString() == "USD"
                            || myRow["Currency"].ToString() == "EUR"
                        select new
                               {
                                   Currency = myRow["Currency"],
                                   Date = myRow["Date"],
                                   Rate = myRow.Field<Decimal>("Rate") / gbpRow.Field<Decimal>("Rate")
                               };

    var eurConversion = from myRow in temp.AsEnumerable()
                        join eurRow in eurRateDt.AsEnumerable() 
                            on myRow["Date"] equals eurRow["Date"]
                         //join gbpRow in gbpRateDt.AsEnumerable() on myRow["Date"] equals gbpRow["Date"]
                        where myRow["Currency"].ToString() == "GBP"
                            || myRow["Currency"].ToString() == "USD"
                        select new
                               {
                                   Currency = myRow["Currency"],
                                   Date = myRow["Date"],
                                   Rate = myRow.Field<Decimal>("Rate") / eurRow.Field<Decimal>("Rate")
                               };

    var usdConversion = from myRow in temp.AsEnumerable()
                        join usdRow in usdRateDt.AsEnumerable() 
                            on myRow["Date"] equals usdRow["Date"]
                        where myRow["Currency"].ToString() != "USD"
                        select new
                               {
                                   Currency = myRow["Currency"],
                                   Date = myRow["Date"],
                                   Rate = myRow.Field<Decimal>("Rate") / usdRow.Field<Decimal>("Rate")
                               };
    usdConvertedRates = usdConversion.CopyToDataTable(usdConvertedRates, LoadOption.PreserveChanges);
    gbpConvertedRates = gbpConversion.CopyToDataTable(gbpConvertedRates, LoadOption.PreserveChanges);
    eurConvertedRates = eurConversion.CopyToDataTable(eurConvertedRates, LoadOption.PreserveChanges);
} 
```

# javascript - 有没有办法让我通过重新呈现页面上的特定元素来强制浏览器修复无效标记？

> ID：10417726
> 
> 赞同：2
> 
> 时间：2012-05-02T16:19:10.383
> 
> 标签：javascript, html, webkit, gecko

我有一种情况，即通过特定组件动态更改元素。这个组件改变了这些元素的innerHTML，但实际上并没有重新渲染元素，而只是重新渲染了它的内容。这会导致最终的 DOM 与最初出现在页面上的情况不同——这对我来说是个问题。

**这种混淆的一个例子是：** 如果我们采用以下标记：

```
<h1 id="foo">Hi there stranger!</h1> 
```

我添加了以下 JS 代码：

```
document.getElementById('foo').innerHTML = "Hi <h2>there</h2> stranger!"; 
```

我们将得到以下标记：

```
<h1 id="foo">Hi <h2>there</h2> stranger!</h1> 
```

它将像上面看到的一样呈现（H2 在 H1 中），但是如果这个标记首先出现在页面上，它将被呈现为：

```
<h1>Hi</h1> <h2>there</h2> <h1>stranger!</h1> 
```

这显然会导致不同的文档。

**所以，我的问题是：** 如何强制浏览器重新呈现这个标记？我希望能够参考上面的 H1 并告诉它以与最初渲染**相同的方式**重新渲染。如何在所有主要引擎（Gecko、Webkit、IE）中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:31:29.490

我认为这样做的一般过程是：

1.  找到 html 节点 X
2.  创建新的内容节点并在[原始](https://developer.mozilla.org/en/DOM/Node.insertBefore)节点 X之前插入
3.  删除节点 X

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:35:10.363

我称之为“尝试修复无效标记”，而不是“重新渲染”。无论如何，您应该将 html 分配给层次结构中高于相关节点的节点。作为最后的手段，重新加载整个`<body>`应该可以工作：

```
 document.body.innerHTML = document.body.innerHTML 
```

另一种选择是使用`outerHTML`，即：

```
document.getElementById('foo').outerHTML = "<h1>Hi <h2>there</h2> stranger!</h1>"; 
```

至少在 FF 中，这似乎按预期工作。

# javascript - JS中对数字字面量调用函数的规则是什么？

> ID：10417730
> 
> 赞同：5
> 
> 时间：2012-05-02T16:19:40.783
> 
> 标签：javascript

自从我开始使用 JS 以来，我一直认为在数字文字上调用函数的唯一方法是通过用括号将其包装在表达式位置，如下所示：

```
1.toString();
// SyntaxError: identifier starts immediately after numeric literal

(1).toString();
// "1" 
```

今天突然想试试这个：

```
0.1.toString();
// "0.1" 
```

为什么这行得通？指向官方规范的指针会很棒。

**编辑**歧义是我的第一个想法，但后来决定两者都没有歧义`1.toString()`。它比我最初想象的要深，但我仍然认为我是对的。原因如下：

**属性名称*可以*以数字开头**

```
var obj = { "1" : 1, "2" : 2 }; 
```

**以数字开头的属性名只能用方括号引用**

```
obj.1;
// SyntaxError: Unexpected token ILLEGAL
obj['1'];
// 1 
```

还：

```
1['toString']();
// '1' 
```

因此，`1.`后面跟任何非数字将始终是方法调用或属性访问，而不是十进制数字。同样，`1.`后面的任何数字始终是十进制数，绝不是方法调用或属性访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T16:21:00.583

一旦在 中看到第一个`.`，`0.1`则后续`.` *不能*是数字的一部分。

这都是关于模棱两可的。

*编辑*——规范的第 7.8.3 节明确坚持这一点：

> 紧跟 NumericLiteral 的源字符不能是*IdentifierStart*或*DecimalDigit*。

I'm not sure exactly what that's trying to prevent, but the JavaScript lexer is pretty gnarly, mostly thanks to the regex literal grammar and the need for a weird parser-lexer hack to deal with that.

# php - 使用 oop 连接的简单问题数据库

> ID：10417735
> 
> 赞同：2
> 
> 时间：2012-05-02T16:19:50.920
> 
> 标签：php, mysql, oop

这是 dbconnect.class.php：

```
<?php  

class Connect 
{ 
    public $error; 
    protected $db; 
    public function __construct() 
    { 
        $link = mysql_connect("localhost","root","1") or $this->error = mysql_error(); 
        $db = mysql_select_db("tarih",$link); 
        $this->db = $db; 
    } 
} 
?> 
```

这是主要的 php 文件：

```
<?php
//header.class.php 
require_once 'dbconnect.class.php'; 

class Header extends Connect 
{ 
    public $headers = array(); 
    private $baglan; 
    public function __construct() 
    { 
        /* 
        * Bu sınıf sayfaların header bilgilerini işler. 
        */ 
        $baglan = $this->db; 
    } 

    public function sayfaHeader($sayfa = true) 
    { 
        $sql = "SELECT * FROM header WHERE id='" . $sayfa . "'"; 
        $query = mysql_query($sql,$this->baglan); 
    } 

} 

Header::sayfaHeader(); 
?> 
```

当我运行主 php 文件时，我看到此错误：

```
Fatal error: Using $this when not in object context in C:\AppServ\www\ilk\class\header.class.php on line 19 
```

第 19 行：

```
$query = mysql_query($sql,$this->baglan); 
```

哪里有问题？我看不到问题，因为我很久没有写 php 代码了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:23:20.447

```
Header::sayfaHeader(); 
```

它调用方法而不创建对象。你必须这样做

```
Header obj = new Header();
obj->sayfaHeader(); 
```

如果要调用类的方法，则将方法声明为`static`. 但是你不能使用`$this`引用，因为静态方法和成员没有引用类对象。

**更新：**
`mysql_select_db`返回`bool`值。您必须使用`$link`变量进行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:24:38.180

您没有数据库问题，

你的代码是错误的。

```
Header::sayfaHeader(); 
```

那是针对静态方法的。但是您需要一个实例来实际调用该方法。

尝试：

```
Header obj = new Header();
obj->sayfaHeader(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T16:45:36.390

我认为您需要构造父级来实例化数据库类

```
public function __construct() 
{ 
    parent::__construct();
    $baglan = $this->db; 
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T17:03:51.437

```
public function __construct() 
{ 
    // if you do this, add a $this-> to baglan to acces it in the class
    $this->baglan = $this->db; 
} 

public function sayfaHeader($sayfa = true) 
{ 
    $sql = "SELECT * FROM header WHERE id='" . $sayfa . "'"; 

    // or, since you inherit the $this->db
    $query = mysql_query($sql,$this->db); 
} 
```

# oracle - Oracle 11g 客户端 jars 对 Oracle 10g 服务器的性能影响

> ID：10417739
> 
> 赞同：0
> 
> 时间：2012-05-02T16:20:07.123
> 
> 标签：oracle, oracle10g, oracle11g

我们计划在使用 Oracle 版本 10.2.0.4 的 Oracle 服务器上使用 Oracle 11g 客户端 jar。

由于我们数据库中的大量记录，我们在过去几年中已经看到了一些性能问题。您能告诉我将客户端 jar 升级到 11g 会提高还是降低性能？

问候，肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:46:47.033

您需要检查是否实际支持您计划使用的客户端和服务器的确切版本组合。查看描述兼容性矩阵的 metalink 文档 [ID 207303.1]。

# ruby-on-rails-3 - 安装 Phusion 乘客时出错“在 [] (Gem::LoadError) 中找不到乘客 (>= 0)”

> ID：10417740
> 
> 赞同：11
> 
> 时间：2012-05-02T16:20:17.427
> 
> 标签：ruby-on-rails-3, rvm, passenger, cpanel

我正在按照[这些](http://blog.davejamesmiller.com/2011/12/installing-rails-3-1-ruby-1-9-on-a-cpanel-11-30-server#comment-43034)说明在我的 WHM/cPanel VPS 上安装 Rails 3。我做的唯一改变是使用 Ruby 1.9.3 和 Rails 3.2.3

但是，当我收到运行“passenger-install-apache2-module”的命令时，我遇到了问题。

首先，由于 PATH 问题，我需要进入正确的目录来运行命令。

更重要的是，一旦我执行命令，我就会收到错误“在 [] (Gem::LoadError) 中找不到乘客 (>= 0)”（下面的完整错误）。

方括号是空的，所以我通过“gem list --local”验证了宝石在那里，并且列出了乘客。

系统规格：

CENTOS 5.8、WHM 11.32、具有 root 访问权限的 VPS

完整错误：

```
/home/tekruby/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find passenger (>= 0) amongst [] (Gem::LoadError)
    from /home/tekruby/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /home/tekruby/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /home/tekruby/ruby/gems/bin/passenger-install-apache2-module:22:in `<main>' 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-19T19:24:58.277

您正在 Rails 应用程序路径中执行此操作，请尝试：

```
cd .. 
```

接着

```
passenger-install-apache2-module 
```

我想它有效

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-19T17:37:11.283

我刚刚经历了这个，你可以试试：

```
rvmsudo passenger-install-apache2-module 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T05:59:22.413

由于路径问题而发生此问题。

如果您使用的是 rvm，请使用以下命令修复它。

rvm 列表（这将显示您系统中的所有 ruby​​ 版本列表）

然后

rvm 使用 ruby​​-1.9.3-p194（无论你想要哪个版本）。

我希望这可以帮助您解决问题

欢呼山

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-27T10:57:07.700

你可以试试这个：

```
sudo  apt-get install libcurl4-openssl-dev 
```

# c# - ZedGraph - 折线图的一部分未显示

> ID：10417741
> 
> 赞同：0
> 
> 时间：2012-05-02T16:20:18.213
> 
> 标签：c#, zedgraph

我正在使用 ZedGraph 绘制一个非常大的数据集（范围从 500,000 个数据点到多达 3000 万个数据点）。图表样式是折线图。在数据集通过不同的过滤器后，总共有 3 个数据集的独立图。从本质上讲，这意味着这 3 个地块将彼此略有不同。

我的问题是：其中两个图从图表的左边缘渲染到图表的右边缘非常好，但第三个图（下图中的绿线）从图表的左边缘开始，然后中途停了下来。当我缩小时，第三个图（绿色图）会随着绘制更多点而变大。

谁能提供有关为什么会发生这种情况的详细信息，以及如何使第三个图绘制在整个图表中？

![三个地块](../Images/605d4d90022372287a18422d87c3b594.png)

（**注意，在图片中，第二个图 - 红线 - 绘制在第一个图上，因为这些数据集的结果几乎相同。**）

编辑：我仍然遇到这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:09:17.173

解决方案：更新到最新的 ZedGraph。我一直在使用 5.0.2 版本。更新到 5.1.5 解决了这个问题。

# delphi - Delphi中有很多可移动的方块

> ID：10417746
> 
> 赞同：2
> 
> 时间：2012-05-02T16:20:34.707
> 
> 标签：delphi

我想出了一个练习，可以让我更好地理解 Delphi。它包含了我必须想知道的所有事情。我正在使用 Graphics32 组件（TRect、TPaintBox32 等）和 Borland Delphi 7。

锻炼。编写一个 Square 类（最好在与程序的主要形式不同的 .pas 文件中），它允许在程序的主要形式上绘制正方形（具有先前在构造函数中设置的屏幕上的颜色、大小、位置等参数）。双击某个正方形应将其颜色更改为随机颜色。当我们单击并按住某个方块时，我们应该能够用鼠标移动这个方块，直到我们释放单击。

我的看法：在程序的主要形式中，我将创建 Square 数组，然后其余的将由 Square 类的方法完成。但我不知道这是否可能？绘制正方形，处理点击在我看来是非常有问题的。Square 类是否需要单独的表格（.dfm 文件）？

我将非常感谢您的帮助。

编辑：正方形的中心和它的边界应该是不同的颜色。此外，最好在正方形中间添加一条边框颜色的水平线。

EDIT2：我不知道如何将您的提示应用到我的程序中。也许在一些代码上会更容易帮助我。

在这里，我有一个 Box 类，它代表应该能够模拟布朗运动的正方形：

```
unit Unit2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, GR32, GR32_Image, ExtCtrls, StdCtrls;

type
  Box = class

  private
    speed:TTimer;
    liveTime:TTimer;
    isAlive:boolean;
    rect:TRect;
    live:integer;
  public
    //procedure PaintBox321PaintBuffer(Sender: TObject);
    procedure liveTimeTimer(Sender: TObject);
    procedure speedTimer(Sender: TObject);
    function color():TColor32;
    constructor Create();
  end;

implementation

  constructor Box.Create();
    var x,y:integer;
  begin
    x:=random(900); y:=random(420);
    rect:=MakeRect(x,y,x+30,y+30);
   isAlive:=true; live:=random(26)+5;

    liveTime := TTimer.Create(nil);
    speed := TTimer.Create(nil);
    liveTime.interval:=1000;
    speed.interval:=live*100;
    liveTime.OnTimer := liveTimeTimer;
    speed.OnTimer := speedTimer;
  end;

  {
  procedure Box.PaintBox321PaintBuffer(Sender: TObject);
  begin
    if isAlive then begin
      PaintBox321.Buffer.Clear(Color32(255,255,255,125));
      PaintBox321.Buffer.FillRectS(rect, color());
    end;
  end;
  }

  procedure Box.liveTimeTimer(Sender: TObject);
  begin
    if isAlive then begin
      live:=live-1;
      if live=0 then isAlive:=false;
    end;
  end;

  procedure Box.speedTimer(Sender: TObject);
  begin
    if isAlive then begin
      OffsetRect(rect, 3*(random(3)-1), 3*(random(3)-1));
      speed.interval:=live*100;
      //PaintBox321.Repaint;
    end;
  end;

  function Box.color():TColor32;
  begin
    color:=Color32(255-live*5,255-live*5,255-live*5,125);
  end;
end. 
```

及主要形式代号：单元Unit1；

```
interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, GR32, GR32_Image, ExtCtrls, StdCtrls, Unit2;

type
  TForm1 = class(TForm)
    PaintBox321: TPaintBox32;
    Button1: TButton;
    procedure FormCreate(Sender: TObject);
    procedure PaintBox321PaintBuffer(Sender: TObject);
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1:TForm1;
  Boxes:array of Box;
  BoxesNumber:integer;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  randomize;
  BoxesNumber:=-1;
end;

procedure TForm1.PaintBox321PaintBuffer(Sender: TObject);  
begin
  PaintBox321.Buffer.Clear(Color32(255,255,255,125));
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  BoxesNumber:=BoxesNumber+1;
  SetLength(Boxes, BoxesNumber+1);
  Boxes[BoxesNumber]:=Box.Create();
end;

end. 
```

请阅读它，它非常简单。我评论了负责绘图的片段，我不知道如何编码。我真的很想知道如何在这里应用处理点击和绘图框。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:54:30.977

一些帮助您入门的建议：

*   问问自己，广场需要什么样的控制。回答需要对 VCL 有一点了解，但请考虑最明显的控制并在编辑器中按住 ctrl-click 以找到匹配的祖先来解决问题。（提示：`TShape`这幅画已经画好了，但我不会使用它。）
*   您是对的，使用*Square 数组，然后其余部分将通过 Square 类的方法完成*。
*   不，`TSquare`课程不需要任何形式的意识，也不应该是一种形式。分配这样一个正方形的父级就可以了。
*   所有控件（即 TControl 类的祖先）都支持鼠标事件/处理。（提示：覆盖`MouseMove`和`DblClick`。）
*   您不一定需要 Graphics32 库。
*   尽管您的`TSquare`类不需要注册为组件，但我强烈建议（部分）阅读 Delphi 帮助中的*Component Writer's Guide*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:33:09.507

好的，因为您似乎是初学者，这就是您可以绘制矩形（正方形）的方法

[http://docwiki.embarcadero.com/CodeSamples/en/Rectangle_%28Delphi%29](http://docwiki.embarcadero.com/CodeSamples/en/Rectangle_%28Delphi%29)

如何移动它

[http://docwiki.embarcadero.com/CodeSamples/en/OnMouseMove_%28Delphi%29](http://docwiki.embarcadero.com/CodeSamples/en/OnMouseMove_%28Delphi%29)

这是开始，我不认为你应该重新发明轮子，当你有可以为你做这件事的课程时。相反，您可以研究已经定义的这些类的行为。

从 Delphi 中的图形开始 - [http://delphi.about.com/od/graphics/Delphi_Graphics_Programming.htm](http://delphi.about.com/od/graphics/Delphi_Graphics_Programming.htm)。

我还建议您使用 Embarcadero wiki 或其他初学者材料以了解基础知识（什么是 dfm 文件等）

因为您的大问题似乎是如何创建事件这个问题可能会帮助您 [处理 Delphi 事件，如何创建自己的事件](https://stackoverflow.com/questions/5786595/delphi-event-handling-how-to-create-own-event)

# c# - C# - 与 UI 交互时应用程序随机锁定

> ID：10417748
> 
> 赞同：0
> 
> 时间：2012-05-02T16:20:38.933
> 
> 标签：c#, visual-studio-2010, krypton-toolkit

所以我对 C# 很陌生，但我正在开发一个相当大的线程应用程序，该应用程序已经决定锁定。

我要么点击一个按钮来启动一个新表单，要么尝试调整表格的大小，它会被锁定，我必须退出程序。

有人对我如何调试有任何想法吗？如果我只是单击 Break All 它会将我带到 Application.Run(Forms.AllForms.MainForm); 这不是很有帮助。

对 Visual Studio 来说有点新（我是 Obj-C 开发人员），但是是否有调试器选项可以让我退后一步查看可能表明为什么会发生这种情况的调用堆栈？

我也在使用 Krypton Components，不确定这是否重要。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:23:15.580

您可能在主线程上做了一些繁重的工作，而不是某个地方的单独线程。

简单的方法是在按钮单击事件上放置一个断点并按下它，然后慢慢浏览代码，看看是否有任何应该线程化的东西，或者某种无限循环。

如果您不介意，请发布您的一些代码并解释该程序，以便我们可以更好地帮助您。

# ffmpeg - 使用 FFMPEG 分割媒体文件

> ID：10417749
> 
> 赞同：0
> 
> 时间：2012-05-02T16:20:45.000
> 
> 标签：ffmpeg, http-live-streaming

在较新的 FFMPEG 版本中，应该可以对媒体文件进行分段。我检查了SVN

```
svn checkout svn://svn.ffmpeg.org/ffmpeg/trunk ffmpeg 
```

但是，在构建并尝试使用以下命令进行分段后，我收到错误：

```
Unrecognized option 'segment_time' 
```

是否需要特定的 ./configure 选项或特定的分支？FFMPEG 手册中没有提到任何内容（哪个版本都不支持）。如果可能的话，我更愿意使用预构建的生产版本。

用于测试的命令：

```
ffmpeg -v 9 -loglevel 99 -re -i test.mov -an -c copy -b:v 128k -flags -global_header -map 0 -f segment -segment_time 4 -segment_list test.m3u8 -segment_format mpegts stream%05d.ts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:52:23.257

FFmpeg 不再使用 SVN 并已迁移到 Git。对 SVN 的最后一次提交是在 2011 年 1 月 19 日，我认为这对于您的目的来说太旧了。有关访问 FFmpeg Git 存储库的更多信息和说明，请参阅[FFmpeg 下载](http://ffmpeg.org/download.html)页面。

此外，请记住显示完整的 ffmpeg 控制台输出，以了解有关 ffmpeg 命令的任何问题。它提供了有用的信息，例如 ffmpeg 版本和 ./configure 选项，并且提供它可以更快地得到答案。

# iphone - 当我单击按钮时，UIButton @selector 从未采取行动

> ID：10417750
> 
> 赞同：1
> 
> 时间：2012-05-02T16:20:55.077
> 
> 标签：iphone, objective-c, uibutton, selector

我有一个 UIbutton 调用同一个类中的方法，我正在使用 @selector 并传递了方法名称，我设置了一个断点并注意到该方法根本没有到达，我编写了这段代码，我认为它工作正常，但它永远不会到达方法体：

```
- (IBAction)setEndTime:(id)sender {
[self performSegueWithIdentifier:@"showEndTimePicker" sender:sender];
UIViewController *TimePickerVC=[self.storyboard instantiateViewControllerWithIdentifier:@"setEndTime"];
packtimePicker=(UIDatePicker*)[TimePickerVC.view  viewWithTag:2];
NSLog(@"PickerTag%i",packtimePicker.tag);
self.finishedTime=packtimePicker.date;
//     NSLog(@"Date returned is ---> %@",finishedTime);
UIButton *btn=(UIButton*)[TimePickerVC.view viewWithTag:3];
NSLog(@"Button Tag%i",btn.tag);
[btn addTarget:self action:@selector(setSelectedValueToAttr:)  forControlEvents:UIControlEventTouchUpInside]; 
```

方法：

```
-(void)setSelectedValueToAttr:(UIButton *) sender{
finishedTime=packtimePicker.date;
NSLog(@"Time returned----> %@",finishedTime);}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:30:09.223

你检查过你是否得到了正确的按钮吗？你的日志显示什么？应该是`ButtonTag3`——是这样的吗？

类中的方法是否被`setSelectedValueToAttr:`引用`self`？

如果所有这些都是正确的，那么您的按钮可能只是因为您的视图结构而没有任何接触。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:18:05.677

您肯定分配了错误的标签号。查看下面的示例，我在将其转换为 UIButton 之前检查了类的类型。

```
 UIView *someView = [self.view viewWithTag:5];

    if([someView isKindOfClass:[UIButton class]])
    {
        UIButton *button = (UIButton *) someView; 

        NSLog(@"uibutton");
    }
    else 
    {
        // some other control 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:06:50.083

尝试更改按钮的标题以确认您确实获得了所需的按钮。

```
[btn setTitle:@"test" forState:UIControlStateNormal]; 
```

我不相信标签记录来确认您正在取回您认为您正在获得的确切按钮。这应该缩小问题的范围。

此外，确认按钮及其父视图的 userInteractionEnabled 设置为 YES。

# lotus-notes - Lotus Domino 脚本

> ID：10417752
> 
> 赞同：0
> 
> 时间：2012-05-02T16:20:59.057
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我最近编写了一个 Windows 服务，它使用 Exchange Web 服务来监听特定邮箱，然后当该邮箱收到新消息时，应用程序会向一组完全不同的用户发送电子邮件。我通过订阅服务做到了这一点，以便可以不断地运行。

除了将它与 Lotus Domino/Notes 集成之外，我想重新创建这个应用程序。我做了一些研究，并且知道 Lotus C API（可能）以及 Lotus Domino Designer（这似乎不是我想要的）和 LotusScript（可能）。

我的问题：

1.  这甚至可以使用 Lotus Domino/Notes
2.  如果有的话，我应该对以上哪一项进行更多研究？如果没有，我最好使用什么？

谢谢

编辑：

我忘了补充一点，在收到消息后，应用程序还会解析收到的电子邮件以提取正文和收件人，并将 POST 消息发送到运行 REST 服务的单独服务器。

上述功能是我第一次不只是在 Exchange 中设置规则的原因

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:36:32.010

> 收听特定邮箱，然后当该邮箱收到新消息时，应用程序将电子邮件发送给完全不同的一组用户。

有多种方法可以做到这一点。

1.邮件文件中的邮件规则。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes.help.doc/DOC/H_USING_RULES_TO_FILTER_NEW_MESSAGES_STEPS.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes.help.doc/DOC/H_USING_RULES_TO_FILTER_NEW_MESSAGES_STEPS.html)

2\. 在邮件文件中创建一个响应“新邮件到达时”的代理并对其进行编码（Java / LotusScript / SimpleAgent）。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_WRITING_SCRIPTS_AND_FORMULAS_FOR_AGENTS.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_WRITING_SCRIPTS_AND_FORMULAS_FOR_AGENTS.html)

3.服务器邮件规则（我没玩过，最好在ServerAdmin上问）。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.help.domino.admin.doc/DOC/H_FILTERING_OUT_UNWANTED_EMAIL_OVER.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.help.domino.admin.doc/DOC/H_FILTERING_OUT_UNWANTED_EMAIL_OVER.html)

拥有一个单独的应用程序来监视邮箱似乎有点愚蠢，除非该应用程序需要在 Domino 之外执行其他操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:42:51.110

您可以使用Domino 中的 LotusScript 或 Java 代理来[使用 Web 服务](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_INCORPORATING_WEB_SERVICES_LIBRARY.html)并发出 POST 请求（[LotusScript/Windows](http://www.codestore.net/store.nsf/unid/DOMM-4ZPHD5)或[Java ）。](http://searchdomino.techtarget.com/tip/Send-data-through-HTTP-post-requests-with-Java-agent)

编辑：

我假设您想要/需要将邮箱留在 Exchange 中。如果不是这种情况，请使用其他任何建议，它们都很好。但如果它确实需要留在 Exchange 中，代理（无论是 LotusScript 还是 Java）比 C API 更容易创建和维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T20:27:48.147

It would be easiest if the mail file were in Notes/Domino itself. If it were, you'd simply set up an agent that would run when new mail is received in that mail file that generates the message to the other users. Doing it in a solely Notes environment would be child's play.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T23:19:25.533

根据正在进行的其他答案的问答，我相信您需要使用 Notes C API。特别是，您应该使用 API 的 Extension Manager 功能。我部分基于您在其中一个答案中使用“拦截”一词。要真正做到这一点，您需要做的是在 Domino 服务器的路由器邮箱文件中挂钩事件。但实际上，这有两个原因：

*   这就是大多数合规性和安全产品倾向于在消息传递*之前*拦截它们的方式。

*   要挂接的路由器邮箱文件总是比用户邮件文件少。因此，即使您没有在传递之前捕获消息的技术要求，集中而不是在许多用户邮箱中的许多代理之间分配工作仍然是一个更好的主意，或者在许多用户中自行挂钩传递邮箱。

此类事情的常用技术涉及一个占用空间小的 DLL，该 DLL 挂钩事件并将消息置于“等待”状态，然后向另一段作为服务器任务运行的代码发出信号。这样，路由器不会尝试处理消息的传递，直到您的代码完成了它需要做的所有事情（如果您在发布到 REST 服务时必须等待响应，这可能需要几个周期）。服务器任务也是使用 C API 编写的。（Java 也是服务器任务的一个潜在选择。IBM 有用 Java 编写的服务器任务，但是当我直截了当地询问此接口是否已记录并支持 3rd 时，我总是得到 IBM 员工的空白凝视党用！

现在，这是另一个想法。您已经拥有一个使用 Exchange Web 服务的 Windows 服务，并且其中包含您真正需要的所有逻辑。为什么要重复这个逻辑？Domino 支持部署您自己的 Web 服务，因此正确的方法可能是使用扩展管理器将消息“搁置”，但您可以创建一个 Domino Web 服务来传递，而不是由服务器任务进行处理数据返回到您的 Windows 服务，与您已经用于与 Exchange 对话的界面非常相似。我不熟悉 Exchange Web 服务，也不知道您如何使用它来让您的 Windows 服务“监听”，所以我不确定这是否真的可以使用 Domino 的 Web 服务概念。也许你可能不得不“投票” 而不是听。无论如何，这只是一个想法。

# windows-services - 日志记录不适用于由 Windows 服务启动的 exe 文件

> ID：10417754
> 
> 赞同：0
> 
> 时间：2012-05-02T16:21:01.740
> 
> 标签：windows-services, log4net, logging, console-application

**强文本**我有一个启动 .Net 控制台应用程序（.exe 文件）的 Windows 服务。此控制台应用程序已启用日志记录，我正在使用 log4Net 进行日志记录。如果我单独运行控制台应用程序，则会创建日志文件。但是，如果我从 Windows 服务启动此控制台应用程序，它不会创建日志文件。

我的日志记录设置如下所述：

**App.config 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<configSections>
  <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,     log4net" />
</configSections>
<log4net>
 <root>
  <level value="DEBUG" />
  <appender-ref ref="LogFileAppender" />
</root>
<appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender" >
  <file type="log4net.Util.PatternString" value="%envFolderPath{CommonApplicationData}\LOGS\MyLog.log" />
  <appendtofile value="true" />
  <rollingStyle value="Size" />
  <maxSizeRollBackups value="10" />
  <maximumFileSize value="10MB" />
  <staticLogFileName value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – IDCC.%C{1}.%M - %m%n" />
  </layout>
</appender>
</log4net>
</configuration> 
```

**装配信息.cs**

```
[assembly: log4net.Config.DOMConfigurator(Watch = true)] 
```

如果我运行控制台应用程序，则此设置有效，但如果我将其集成到服务中并将其作为进程运行，它不会创建日志文件。我在服务中包含了应用程序的发布版本、App.config 文件和 log4Net.dll。

请告诉我如何解决这个问题。提前致谢。

**更新：**

经过一些测试，我才意识到日志文件是由 Windows 服务正确创建的。问题是我正在创建一个安装程序，它会在安装时自动启动此服务。那是没有创建日志文件的时候。我正在使用 WiX 创建安装程序。安装程序包含控制台应用程序 exe、App.config 和运行控制台应用程序的服务。我肯定遗漏了一些东西，请指教。

# maven - 发布：在标记之前准备与 SCM url 混淆

> ID：10417757
> 
> 赞同：4
> 
> 时间：2012-05-02T16:21:14.157
> 
> 标签：maven, maven-release-plugin

我使用 SVN 对源文件进行版本控制，并使用 maven 发布插件来创建和标记发布。我的项目是一个多模块项目。

**短篇故事**

release:prepare 目标会在我的 SCM 中同时标记主干和标签。

**很长的故事**

我的项目是一个多模块项目：

```
 bar
    module1
    module2
    ...
    pom.xml 
```

SCM 标签在我的项目父 POM bar/pom.xml 中配置如下：

```
<scm>
  <connection>scm:svn:http://svn.mycompany.local/svn/foo/projects/bar/trunk</connection>
  <url>http://svn.mycompany.local/svn/foo/projects/bar/trunk</url>
</scm> 
```

当我运行时：

```
mvn release:prepare -DskipTests=true -DautoVersionSubmodules=true -DdevelopmentVersion=1.1 -DdryRun=true 
```

pom.xml.tag 中的 SCM 标记已修改但不例外：

```
<scm>
    <connection>scm:svn:http://svn.mycompany.local/svn/foo/projects/bar/tags/bar-1.0/trunk</connection>
    <url>http://svn.mycompany.local/svn/foo/projects/bar/tags/bar-1.0/trunk</url>
</scm> 
```

如果我执行发布：

```
 mvn release:clean release:prepare release:perform -DautoVersionSubmodules=true -DdevelopmentVersion=1.1 
```

目录主干和标签在标签文件夹中被标记。我在存储库中得到了这个结构：

```
bar
   /trunk/
        [...]
   /tags
        /bar-1.0
            /trunk
            /tags 
```

然后执行目标失败：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.0:perform (default-cli) on project bar: Error executing Maven. 
Working directory "C:\projects\foo\bar\target\checkout\bar" does not exist! -> [Help 1] 
```

事实上，我在我的 target\checkout 目录中有这个：

```
tags\
trunk\ 
```

我还有其他几个项目在使用相同类型的配置时没有问题。

我检查的内容： - 我的颠覆结构遵循传统的分支/主干/标签，因此这里不必提及 tagBase - 有效的 POM 显示正确的 SCM 配置（当然是在标记之前） - 当然检查了 SCM url正确并指向 pom.xml 的位置

所以我真的不知道在哪里看。有没有人有同样的问题或有想法？我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:02:02.380

首先，我建议在 bar-pom 中使用比 2.0 更新的版本配置发布插件（因为目前是 2.2.2）并将信息 autoVersinSubmodules 也放入配置中（这让生活更轻松）。给定的选项 -DdevelopmentVersion=1.1 没有意义，因为开发版本必须以“-SNAPSHOT”为后缀，否则它是发布版本而不是开发版本。此外，还要添加 developerConnection 并在“trunk”的末尾添加一个“/”，如下所示 ../trunk/ maven-release-plugin 与您正在使用的 Maven 版本相关。Maven 的 super-pom 定义了一组插件及其适当的版本。

# php - 获取系统文件夹外目录中所有文件的列表

> ID：10417759
> 
> 赞同：0
> 
> 时间：2012-05-02T16:21:19.733
> 
> 标签：php, yii

我是 yii 的新手，我需要在系统文件夹之外的目录中获取文件列表。我试过了

```
 $fileListOfDirectory = array();
        $pathTofileListDirectory = Yii::app()->request->baseUrl.'/path/to/files';
        foreach( new DirectoryIterator($pathTofileListDirectory) as $file) {
            if( $file->isFile() === TRUE && $file->getBasename() !== '.DS_Store' && substr(strrchr($file->getPathname(), '.'), 1) == 'txt') {
                array_push($fileListOfDirectory, $file->getBasename());
            }
        } 
```

但我总是得到错误

> DirectoryIterator::__construct(/myYiiInstallation/system/path/to/files) [directoryiterator.--construct]: 无法打开 dir: 没有这样的文件或目录

从线

```
foreach( new DirectoryIterator($pathTofileListDirectory) as $file) { 
```

那么有没有另一种方法来获取文件列表或者我应该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:59:13.550

我认为您应该尝试[http://www.yiiframework.com/doc/api/1.1/CApplication#basePath-detail](http://www.yiiframework.com/doc/api/1.1/CApplication#basePath-detail)而不是在文件系统中使用 baseUrl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:47:57.260

你可以用这个....

```
$fileListOfDirectory = array ();
$pathTofileListDirectory = Yii::app()->request->baseUrl.'/path/to/files' ;

if(!is_dir($pathTofileListDirectory ))
{
    die(" Invalid Directory");
}

if(!is_readable($pathTofileListDirectory ))
{
    die("You don't have permission to read Directory");
}

foreach ( new DirectoryIterator ( $pathTofileListDirectory ) as $file ) {
    if ($file->isFile () === TRUE && $file->getBasename () !== '.DS_Store') {

        if ($file->getExtension () == "txt") {
            array_push ( $fileListOfDirectory, $file->getBasename () );
        }
    }
} 
```

# javascript - 如何将 jQuery maphilight 集成到 MVC3 Razor C# 项目中

> ID：10417763
> 
> 赞同：0
> 
> 时间：2012-05-02T16:21:29.900
> 
> 标签：javascript, asp.net-mvc-3, razor, imagemap, visual-web-developer-2010

我一直在尝试为我的网站创建一个精美的图像映射，它是使用 ASP.Net MVC2 Razor C# 构建的。我遇到了这个页面：[http](http://davidlynch.org/projects/maphilight/docs/) ://davidlynch.org/projects/maphilight/docs/ ，它基本上非常适合我需要的东西。教了我很多关于如何在我不熟悉的 HTML 中设置等的知识。

问题是我似乎无法让它在我的 MVC 网站上工作。注意：本网站是使用 Visual Web Developer 2010 中的 Microsoft 模板构建的。

我已经下载了 jquery.maphilight.min.js 和 jquery.maphilight.js 脚本并添加到我的脚本文件夹中。我还将它们添加到我的主 _Layout.cshtml 文件中：

```
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/lightbox.css")" rel="stylesheet" type="text/css" />

    <script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")"     type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/lightbox.js")"             type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.maphilight.js")"    type="text/javascript"></script>
</head> 
```

然后我尝试在我的视图中调用脚本：

```
@{
    ViewBag.Title = "Course Map";
}
<fieldset>
    <legend>Course Map </legend>
    <div id="course_map">
        <img src="../../images/cmap.gif" width="500" height="421" alt="Insert Alt"     usemap="#image_map"
            border="0">
        <map name="image_map" id="image_map">
            <area href="#" title="SC" shape="poly" coords="348,213, 340,207, 338,204, 338,200, 340,196, 338,192, 335,190, 336,183, 338,178, 342,176, 347,175, 348,170, 355,170, 361,174, 362,184, 362,194, 366,200, 366,206, 369,212, 371,217, 368,222, 367,228, 369,234, 367,241, 361,243, 356,240, 352,236, 348,236, 345,231, 344,225, 346,221, 349,216" />
        </map>
    </div>
    <script type="text/javascript">        $(function () {
            $('.map').maphilight({ fade: false });
        });
    </script>
</fieldset> 
```

Image map coords 工作正常，但我没有像 David 的网站中演示的那样得到任何花哨的突出显示。我很确定我已经搞定了我如何调用 Javascript 等，但不确定我做错了什么。

感谢任何帮助-谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:16:38.050

未能正确配置 maphilight JS 文件以便实际显示高亮灯。

确保从 _Layout.cshtml 文件中的标记正确调用 JS：

```
<script src="@Url.Content("~/Scripts/jquery.maphilight.js")"    type="text/javascript"></script> 
```

然后去视图调用函数：

```
<script type="text/javascript">        $(function () {
            $('.map').maphilight({ fade: false });
        });
    </script> 
```

如上所述，我的问题是愚蠢地没有正确配置 JS 选项来高亮 .

# osgi - iPOJO @Bind/@Unbind 方法允许的签名

> ID：10417764
> 
> 赞同：0
> 
> 时间：2012-05-02T16:21:31.227
> 
> 标签：osgi, ipojo, blueprint-osgi

在我见过的所有 iPOJO 示例中，`@Bind`和`@Unbind`回调仅将服务实例作为参数，即

```
// @Requires
// private Foo foo;

@Bind
public void bindFoo(Foo foo) { ... }

@Unbind
public void unbindFoo(Foo foo) { ... } 
```

蓝图[还允许您拥有](http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.osgifep.multiplatform.doc/topics/ca_blueprint_dynamism.html)

```
public void bindFoo(ServiceReference reference) { ... }

public void bindFoo(Foo foo, Map<String, Object> properties) { ... } 
```

iPOJO 回调也可以访问服务属性`ServiceReference`吗？还是应该为此使用[白板处理程序？](http://felix.apache.org/site/white-board-pattern-handler.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:19:31.447

回调可以具有以下签名之一：

1.  没有任何参数：方法只是一个通知（method()）
2.  使用服务对象：该对象是隐含的服务对象（方法（Service svc））
3.  使用 OSGi 服务引用：服务引用出现或消失（方法（ServiceReference ref））
4.  使用服务对象和 OSGi 服务引用（方法（Service svc, ServiceReference ref））
5.  使用地图内的服务对象和服务属性（方法（服务 svc，地图属性））
6.  使用字典中的服务对象和服务属性（方法（服务 svc，字典属性））

因此，支持：

```
@Bind
public void bind() { ... }

@Bind
public void bind(Service svc) { ... }

@Bind
public void bind(ServiceReference ref) { ... }

@Bind
public void bind(Service svc, ServiceReference ref) { ... }

@Bind
public void bind(Service svc, Map properties) { ... }

@Bind
public void bind(Service svc, Dictionary properties) { ... } 
```

所以访问服务属性没有问题。除非您确实需要 ServiceReference，否则最好不要使用此 OSGi 特定对象（降低可测试性）。

# objective-c - 完成和最小化按钮的 iPad 键盘按钮之间的区别

> ID：10417767
> 
> 赞同：2
> 
> 时间：2012-05-02T16:21:49.573
> 
> 标签：objective-c, ios, xcode, ipad

系统是否检测到“Editing Did End”的键盘完成键和键盘最小化按钮之间的差异？

我注意到当我按下“最小化键盘”按钮（右下角）时，用于编辑的代码确实结束了仍然运行。

区分“最小化键盘”按钮和“完成”按钮的正确方法是什么？我需要在委托上使用代码吗？我该如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:25:47.980

您想在退出时使用 Did End。这将触发键盘完成按钮，但不会触发最小化键盘按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:30:35.683

我假设您使用的是`UITextField`. 您需要为文本字段分配一个代表。“完成”键将`textFieldShouldReturn:`消息发送给其代表。“关闭键盘”键没有。

如果您使用的是`UITextView`，则发送“完成”键`textView:shouldChangeTextInRange:replacementText:`，您必须检查`'\n'`替换文本中的换行符 ( )。

# java - newFixedThreadPool 在对象池中没有按预期工作

> ID：10417773
> 
> 赞同：3
> 
> 时间：2012-05-02T16:22:17.700
> 
> 标签：java, connection-pooling, object-pooling

我正在努力弄清楚如何汇集资源，我开始怀疑我的线程可能是问题（不是 100%，但一直在试验它）。我要做的事情的要点是创建一个到服务器的通道池，然后查看线程是否正在使用它们。我已经成功地获得了为我上传的尽可能多的项目创建的频道数量（即它没有汇集，只是在每个线程中创建新频道）并且成功地只创建了一个频道（即没有汇集或创建新的频道）频道根据需要）。

我在想也许线程与池交互的方式是问题，所以我尝试创建`newCachedThreadPool`这样线程就不会死，只要有工作，但是当我这样做时，我收到错误说正在使用的通道已关闭。我的池中有一个`destroyObject`方法，但我从不调用它，所以我不明白它为什么被触发（如果我将它注释掉，那么它可以工作，但只创建一个通道，上传速度非常慢，大约 300 次操作/秒，而没有线程池我得到 30k/秒）。我怀疑它的终止，有什么方法可以验证这一点，如果它终止，我可以使用替代方法吗？

这是代码（忽略所有rabbitmq的东西，它只是为了让我可以监控结果）：

```
import org.apache.commons.pool.BasePoolableObjectFactory;
import org.apache.commons.pool.ObjectPool;
import org.apache.commons.pool.PoolableObjectFactory;
import org.apache.commons.pool.impl.GenericObjectPool;

import java.io.IOException;
import java.util.NoSuchElementException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.LinkedBlockingDeque;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

import com.rabbitmq.client.ConnectionFactory;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.Channel;
import com.rabbitmq.client.MessageProperties;

public class PoolExample {

    private static ExecutorService executor_worker;

    static {
        final int numberOfThreads_ThreadPoolExecutor = 20;
        executor_worker = Executors.newCachedThreadPool();
        executor_worker = new ThreadPoolExecutor(numberOfThreads_ThreadPoolExecutor, numberOfThreads_ThreadPoolExecutor, 1000, TimeUnit.SECONDS,
                                           new LinkedBlockingDeque<Runnable>());
    }

    private static ObjectPool<Channel> pool;

    public static void main(String[] args) throws Exception {
        System.out.println("starting..");           
        ObjectPool<Channel> pool =
                new GenericObjectPool<Channel>(
                new ConnectionPoolableObjectFactory(), 50);
        for (int x = 0; x<500000000; x++) {
            executor_worker.submit(new MyRunnable(x, pool));
        }
        //executor_worker.shutdown();
        //pool.close();
    }
}

 class ConnectionPoolableObjectFactory extends BasePoolableObjectFactory<Channel> {
     Channel channel;
     Connection connection;

    public ConnectionPoolableObjectFactory() throws IOException {
        System.out.println("hello world");
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        Connection connection = factory.newConnection();
        channel = connection.createChannel(); 
    }

    @Override
    public Channel makeObject() throws Exception {  
        //channel = connection.createChannel(); 
        return channel; 
    }

    @Override
    public boolean validateObject(Channel channel) {
        return channel.isOpen();
    }

    @Override
    public void destroyObject(Channel channel) throws Exception {
        channel.close();
    }

    @Override
    public void passivateObject(Channel channel) throws Exception {
        //System.out.println("sent back to queue");
    }
}

class MyRunnable implements Runnable{  
    protected int x = 0;
    protected ObjectPool<Channel> pool;

    public MyRunnable(int x, ObjectPool<Channel> pool) {
        // TODO Auto-generated constructor stub
        this.x = x;
        this.pool = pool;
    }

    public void run(){
        try {
                Channel channel = pool.borrowObject();
                String message = Integer.toString(x);
                channel.basicPublish( "", "task_queue", 
                        MessageProperties.PERSISTENT_TEXT_PLAIN,
                        message.getBytes());
                pool.returnObject(channel);
        } catch (NoSuchElementException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }
} 
```

ps 我基本上问了几个问题并阅读了文档并试图弄清楚这一点，在此过程中我可能完全走错了方向，所以如果您看到任何问题或提示，请按我的方式发送。

**情节变厚：**

在 main 方法的 for 循环中（我将工作提交给线程），我添加了：

```
 Set<Thread> threadSet = Thread.getAllStackTraces().keySet();
    System.out.println(threadSet.size()); //number of threads
    System.out.println(pool.getNumActive()); 
```

它向我显示了 25 个线程（尽管我说的是 20 个）和池中的 20 个项目。但是当我查看 rabbitmq UI 时，我看到一个连接只有一个通道。如果我创建频道并提交给可运行的，那么它会创建许多频道（但它永远不会关闭它们）。我不明白发生了什么以及为什么结果不符合预期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:09:54.230

我认为问题在于您的 ConnectionPoolableObjectFactory 只创建了一个 Channel 对象。`makeObject`似乎每次调用它都应该创建一个新的 Channel 。

所以也许它应该像这样实现：

```
public class ConnectionPoolableObjectFactory
        extends BasePoolableObjectFactory<Channel> {

    private final Connection connection;

    private ConnectionPoolableObjectFactory() {
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        connection = factory.newConnection();
    }

    @Override
    public Channel makeObject() throws Exception {
        return connection.createChannel();
    }

    @Override
    public boolean validateObject(Channel channel) {
        return channel.isOpen();
    }

    @Override
    public void destroyObject(Channel channel) throws Exception {
        channel.close();
    }

    @Override
    public void passivateObject(Channel channel) throws Exception {
        //System.out.println("sent back to queue");
    }
} 
```

这假设每个工厂从单个连接创建多个通道。

# java - 如何在android上创建放大镜

> ID：10417777
> 
> 赞同：3
> 
> 时间：2012-05-02T16:22:37.470
> 
> 标签：java, android, user-interface

大家好！
我正在尝试实现放大镜。它应该使它下面的内容看起来更大。

几个小时后，我只有一个解决方案。

在我的 xml 文件中，声明如下内容（伪代码）：

```
<ZoomView>
    some other content views

    <View 
        android:id="@+id/magnifier
    />
</ZoomView> 
```

在这段代码中，ZoomView 是一个自定义视图扩展了 RelativeLayout。View with magnifier id 是一个实际的放大镜，可以放大内容。

这是它的样子：

[![放大镜](../Images/ec7ff907d05ed6cdbf8b4e56decebae8.png)](https://i.stack.imgur.com/JNwp8.png)

那么代码中会发生什么。

在 ZoomView 的 onDraw 方法中，我做这些事情。

```
@Override
protected void onDraw(android.graphics.Canvas canvas)
{
    Bitmap  bitmap = Bitmap.createBitmap(canvas.getWidth(), canvas.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas bitmapCanvas = new Canvas(bitmap);
    super.onDraw(bitmapCanvas);

    // some code that detects magnifier view position and size, 
    // than gets 1 area image, scale it to make in 2x bigger.
    // And then replace 2 area with this scaled image.

    // draw result on canvas
    canvas.drawBitmap(bitmap, new Matrix(), null);
} 
```

这段代码运行良好，但速度太慢。谁能给我其他解决方案，或者我该如何优化这个解决方案？

抱歉，如果有问题，这是我的第一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:50:16.617

您走在正确的轨道上，但我认为可以通过从 onDraw 方法中提取一些处理来提高性能。如果原始大小的图像/内容是静态的，您可以在 onCreate 期间轻松创建内容的放大版本（或者更好的是，在 AsyncTask 中），然后当放大镜移动时，您所要做的就是计算内容的哪个区域应该显示放大版本，而不是每次都尝试生成它。

如果内容是动态的，您仍然可以通过拥有 2 个内容的恒定副本来执行类似的处理，一个是正常大小，一个是放大的，并且两者都不断保持最新。

否则，您的解决方案就在正确的轨道上。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-07T05:54:06.250

我不知道你是否需要这个，但其他一些可能。

```
View view = findViewById(R.id.view);
Magnifier magnifier = new Magnifier(view);
magnifier.show(view.getWidth() / 2, view.getHeight() / 2); 
```

如果您想进行用户交互，请尝试以下操作：

```
imageView.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getActionMasked()) {
            case MotionEvent.ACTION_DOWN:
                // Fall through.
            case MotionEvent.ACTION_MOVE: {
                final int[] viewPosition = new int[2];
                v.getLocationOnScreen(viewPosition);
                magnifier.show(event.getRawX() - viewPosition[0],
                               event.getRawY() - viewPosition[1]);
                break;
            }
            case MotionEvent.ACTION_CANCEL:
                // Fall through.
            case MotionEvent.ACTION_UP: {
                magnifier.dismiss();
            }
        }
        return true;
    }
}) 
```

使用此放大镜，您可以放大您想要的视图。

仅供参考 - [https://developer.android.com/guide/topics/text/magnifier](https://developer.android.com/guide/topics/text/magnifier)

# sql - 在 tsql 中 tablename(1) 是什么意思

> ID：10417778
> 
> 赞同：6
> 
> 时间：2012-05-02T16:22:41.560
> 
> 标签：sql, tsql

我正在尝试分析查询以提取逻辑，并且看到几个使用语法 SELECT FROM tableName(1) 的选择语句。下面是使用此语法的几个示例。这是一个相当大的插入语句，因此我无法发布整个查询。

```
select nh.firm_code, nh.acct_num, nh.sub_code, b.amt
from nav_hist nh(1), breakpoints b
where nh.sales_load_id = b.schedule_id

select sum(weekdays.factor)
from calc_hist weekdays(1)
where weekdays.sys_date >= dateadd(dd, f.usr_num_days - 7, f.sys_date)
      and weekdays.sys_date < f.sys_date
      and c.firm_code = weekdays.firm_code 
```

有谁知道 from 语句中的 (1) 是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T17:14:41.490

我已经进行了一些挖掘，我认为这里发生的事情是您实际上正在使用一个查询提示，即“（1）”。[这被解释为 INDEX 查询提示，您可以在此处](http://msdn.microsoft.com/en-us/library/ms187373.aspx)阅读有关这些的更多信息。

根据使用此格式但未指定 WITH 的文档，我在 2008 年无法执行此操作，但可能您使用的是不同的特定版本或使用了一些会影响此的兼容模式。

如果您可以为包含这些语法的查询提供更多资源，我将能够继续挖掘。

这是我在服务器上运行时得到的结果：

```
select * from sysobjects WITH (1)
--Warning: Index hints supplied for view 'sysobjects' will be ignored. 
```

**编辑**
我对此进行了进一步研究，假设我的假设是正确的，并且

```
SELECT 1 FROM TABLENAME(1) 
```

等于

```
SELECT 1 FROM TABLENAME WITH (1) 
```

那么下面就证明了一点，当指定一个整数大于表中可用索引的个数时会导致异常。看一看：

```
--Table sysjobs has 4 indexes
select * from msdb..sysjobs with (4)
--1 row affected
select * from msdb..sysjobs with (5)
--Msg 307, Level 16, State 1, Line 2
--Index ID 5 on table 'msdb..sysjobs' (specified in the FROM clause) does not exist. 
```

# powershell - 使用 PowerShell 从文件中提取模式

> ID：10417780
> 
> 赞同：1
> 
> 时间：2012-05-02T16:22:44.613
> 
> 标签：powershell, pattern-matching

[我是 PowerShell 的初学者]

我想使用 PowerShell 从某个目录下的所有文件中提取特定模式。我怎么做？

例如，让文件内容为：

```
<node1>Hello World ignore</node1> 
<wantedNode>Hello World extract
this text </wantedNode> 
```

我只想提取包含“hello world”类型的节点（不区分大小写）：

```
"Hello World extract this text" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:53:51.647

如果文件是正确的 XML 文档，那么这很容易，例如：

```
Get-ChildItem *.xml | Select-Xml '//wantedNode' | Format-List Path, @{n="Text";e={$_.Node.InnerText}} 
```

如果 XML 文档有默认命名空间，这会有点棘手，但并不多。如果您需要进行正则表达式搜索，那么因为感兴趣的文本跨越多行，您需要将文件作为单个字符串读取，例如：

```
[IO.File]::ReadAllText("$pwd\test.xml") | 
    Select-String '(?s)(?<=\<wantedNode\>)(.*?)(?=\</wantedNode\>)' | 
    Format-List Matches 
```

在 PowerShell v3 中，这变得有点简单：

```
Get-Content .\test.xml -Raw | 
    Select-String '(?s)(?<=\<wantedNode\>)(.*?)(?=\</wantedNode\>)' | 
    Format-List Matches 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T19:55:02.837

试试这个，我添加了一个根节点：

```
[xml]$xml=@"
<root>
<node1>Hello World ignore</node1> 
<wantedNode>Hello World extract this text</wantedNode>
</root>
"@

$xml.SelectNodes("//wantedNode[contains(.,'Hello World')]") | foreach {$_.'#text'} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T22:38:47.693

谷歌搜索了一段时间后，我想出了一个解决方案：

```
$files = gci -Recurse
foreach ($file in $files)
{
    $x = [xml] (Get-Content $file.FullName)
    foreach ($node in $x.SelectNodes("//wantedNode")) 
    {       
        if ($node.InnerText -like "*Hello World*" ) 
            { 
                Write-Host $node.InnerText
            } 
    }
} 
```

# c# - 视图不会因冗长的请求而呈现，但控制器代码已执行

> ID：10417782
> 
> 赞同：0
> 
> 时间：2012-05-02T16:22:51.827
> 
> 标签：c#, .net, asp.net-mvc, iis-7

我有一个复杂的动作，可能需要很长时间才能运行。

如果它针对一小部分数据运行，它可以完美运行并生成所需的页面。

如果我处理大量数据并且处理时间超过几分钟，则页面似乎仍在客户端计算机上被请求，但我们知道（通过堆栈跟踪）我正准备“返回 View(模型）;”。

任何想法为什么会发生这种情况？我完全不知所措。我已经尝试将每个超时时间延长到几个小时（包括任何可用于应用程序池的时间）。

这不可能是浏览器问题，因为它已在 Chrome、IE、Safari 和 Firefox 的几个不同 Windows 电脑上进行了尝试。

**编辑**

这发生在应用程序中不止一个地方发生了完全不同的事情。但是所有代码都是为两者执行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:42:18.137

在您调用 View(model) 之前，您的模型实际上是否具有所有预期数据？

如果您在任何 IQuerable 或 IEnumerable 属性上调用 ToList()，它会返回预期的数据吗？

您必须发布更多代码才能更进一步。

* * *

编辑：

仍然没有足够的信息继续下去，但这里有一些调试技巧。

您的路径是浏览器 -> Web 服务器 -> 数据库

如果您确定在调用 View(model) 之前所有数据都已在模型对象中具体化，那么您可以假设问题不在网络服务器 -> 数据库连接中。

因此，如果问题出在浏览器 - > Web 服务器之间，这里还有更多可能性：

*   您提到了一个大型企业系统：是否涉及任何代理？可以直接连接测试吗？

*   是否有任何内容返回到浏览器？您可以远程登录到 Web 服务器的 80 端口并发出请求吗？你有什么要回来的吗？

*   如果您监视浏览器进程，它是否在做任何事情？使用 procexp，您可以看到每个线程在做什么 - 浏览器是空闲的，还是在使用 CPU 并占用内存？

*   是否有任何其他进程可能会拦截请求？某些防病毒产品可能会阻止某些页面呈现。您可以禁用防病毒软件并查看是否有任何变化吗？

*   您是否尝试过监视服务器以查看发生了什么？处理是否正在发生（并且可能内存使用量也会增加）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:41:49.923

您可能会考虑完全不同的设计：

1.  客户端向服务器提交作业
2.  服务器启动长时间运行操作的后台处理
3.  服务器返回作业 ID 给客户端
4.  客户端使用job id定期向服务器查询job状态
5.  作业完成后，客户端以 HTML 或数据（例如 JSON）的形式请求结果，然后呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:39:24.557

IIS 有一个处理超时。一旦达到这一点，无论请求在处理管道的哪个阶段，处理线程都会终止。尝试增加 web.config 中指定的处理超时：

```
<httpRuntime executionTimeout="90"  /> 
```

有关详细信息，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/e1f13641.aspx)请注意，此限制适用于所有页面，因此如果您沿着这条路线走，请小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T18:51:40.833

虽然我还没有看到你的代码，但我有根据的猜测是尝试使用异步控制器（无论是否通过 ajax 发出请求 :-)，因为显然，这是一项长期运行的任务，也许你也可以优化处理一些并行处理以减少时间：这是一个很好的起点 [http://msdn.microsoft.com/en-us/library/ee728598.aspx](http://msdn.microsoft.com/en-us/library/ee728598.aspx)

# api - 发布到 /PROFILE_ID/links 只接受链接和消息参数

> ID：10417785
> 
> 赞同：2
> 
> 时间：2012-05-02T16:22:56.733
> 
> 标签：api, facebook-graph-api, hyperlink, posting

根据文档，链接端点将图片、名称和描述作为参数。来自发布部分下的[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

```
Method                  Description                         Arguments

/PROFILE_ID/links   Publish a link on the given profile     link, message, picture, name, caption, description 
```

但是，当我尝试这些参数时，它们会被忽略。下面的 Python 示例。

```
res = requests.post("https://graph.facebook.com/me/links", 
                    data = {'access_token':t.auth_payload,
                            'message':'testing',
                            'link':'http://percolate.com',
                            'picture':'http://i.zdnet.com/blogs/facebook_news_feed.png',
                            'caption':'this is a caption', 
                            'description':'this is a description', 
                            'name':'this is a name'}) 
```

结果是：

![这是结果](../Images/5edbbfe6e004312293a54ec3254ae8ec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:34:16.893

有关为用户创建链接的文档仅说明以下内容：

> 您可以使用 publish_stream 权限和以下参数向 PROFILE_ID/feed 发出 HTTP POST 请求，代表用户发布链接。
> 
> **参数**：链接和消息

其他字段取自“链接”参数中给出的页面 URL 的元数据。

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:10:06.167

跟进这个问题。链接端点变得越来越无用，而 /feed 端点终于拥有了我需要的功能。/feed 用于在发布链接时丢失共享操作。此后，该问题已得到解决。

如果您对链接端点有疑问。切换到 /feed 看看它是否适合您的需求。

# workflow - 具有工作副本（迭代）和工作流的敏捷内容类型

> ID：10417792
> 
> 赞同：1
> 
> 时间：2012-05-02T16:23:17.560
> 
> 标签：workflow, plone, dexterity

我正在尝试将正式的工作流程应用于我们定制的灵巧对象。Buildout 有 plone.app.versioningbehavior、collective.cmfeditionsdexteritycompat、collective.dexteritydiff plone.app.stagingbehavior、plone.app.referenceablebehavior。

我发现当我单击结帐时，它确实创建了对象的副本（copy_of_object），但对工作副本（对象）的引用被损坏了？此时如果我回到我的工作副本（对象），它会给出以下错误：

```
attributeError('getBRefs',) (Also, the following error occurred while attempting to render the standard error message, please see the event log for full details: getBRefs) 
```

任何帮助都会很棒。这是我的完整引用

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module grokcore.view.components, line 100, in __call__
  Module grokcore.view.components, line 104, in _render_template
  Module five.grok.components, line 134, in render
  Module zope.pagetemplate.pagetemplate, line 113, in pt_render
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 888, in do_useMacro
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 852, in do_condition
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 742, in do_insertStructure_tal
  Module Products.PageTemplates.Expressions, line 218, in evaluateStructure
  Module zope.tales.tales, line 696, in evaluate
    - URL: file:c:\web\panda\buildout\src\rcseng.theme\rcseng\theme\skins\rcseng_theme_custom_templates\main_template.pt
    - Line 101, Column 12
    - Expression: <StringExpr u'plone.abovecontent'>
    - Names:
       {'args': (),
        'container': <Course at /riz/new-course>,
        'context': <Course at /riz/new-course>,
        'default': <object object at 0x0121E7F0>,
        'here': <Course at /riz/new-course>,
        'loop': {},
        'nothing': None,
        'options': {},
        'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0x09DEED80>,
        'request': <HTTPRequest, URL=http://localhost:8070/new-course/view>,
        'root': <Application at >,
        'static': <five.grok.components.ZopeTwoDirectoryResource object at 0x0989FD90>,
        'template': <Products.Five.browser.pagetemplatefile.ViewPageTemplateFile object at 0x0934B850>,
        'traverse_subpath': [],
        'user': <PropertiedUser 'admin'>,
        'view': <rcseng.contenttypes.course.Course_View object at 0x0989BCB0>,
        'views': <Products.Five.browser.pagetemplatefile.ViewMapper object at 0x09201BF0>}
  Module zope.contentprovider.tales, line 80, in __call__
  Module plone.app.viewletmanager.manager, line 154, in render
  Module plone.app.viewletmanager.manager, line 85, in render
  Module ilrt.formalworkflow.browser.info, line 9, in render
  Module plone.memoize.instance, line 51, in memogetter
  Module plone.app.iterate.browser.info, line 107, in working_copy
AttributeError: getBRefs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T12:10:06.743

如果我在其中创建文件夹并创建对象，它工作正常。站点根级别它给出了这个错误

# android - 重用堆栈中的现有活动（以避免内存中的重复活动）

> ID：10417794
> 
> 赞同：0
> 
> 时间：2012-05-02T16:23:32.440
> 
> 标签：android, android-activity, android-lifecycle

有没有办法以编程方式查看堆栈中是否已经存在活动并重新使用它而不是重新创建它？

出现这样的情况，用户可以通过多条路线进入活动，也可以通过多条路线继续前进。但是，在其他活动中单击几下后，可以再次访问相同的活动。当我知道它已经存在于堆栈中时，我想避免应用程序创建一个新的活动。

这可能只是我糟糕的设计（这是我的第一个应用程序）。但只是想知道如何管理？有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:28:16.360

好吧，这种自由形式的活动访问在 android UI 指南中有点不受欢迎，但你可以[`FLAG_ACTIVITY_REORDER_TO_FRONT`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)在你的 Intent 中使用将你的活动重新洗牌到前面。

或者，您也可以使用[`FLAG_ACTIVITY_CLEAR_TOP`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)清除活动顶部的堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:29:09.287

认为所有活动都保存在堆栈中，例如，如果您放置主要活动，然后调用第二个活动，当您完成第二个活动时，主要活动将被放在前面。因此，如果您知道活动在哪里，是的，您可以重复使用它；）

希望有用:)

# qt - 从 QTextEdit 中删除一行/块

> ID：10417795
> 
> 赞同：6
> 
> 时间：2012-05-02T16:23:40.457
> 
> 标签：qt, qtextedit, qtextdocument

我正在努力从`QTextEdit`. 下面的代码应该（？）工作，但由于某些我不知道的原因，它最终进入无限循环。如果正在编辑，我怀疑`next()`并且`previous()`不受欢迎。`QTextDocument`

```
QTextBlock block = document()->begin();
while (block.isValid()) {
    if (to_do_or_not_to_do(block)) {
        QTextCursor cursor(block);
        cursor.select(QTextCursor::BlockUnderCursor);
        cursor.removeSelectedText();
    }
    block = block.next();
} 
```

`QTextDocument::findBlockByNumber()`以与上述相同的方式迭代使用和删除块也不起作用。

如果有人能指出我如何迭代所有块并在需要时删除它们，我将不胜感激。

*PS
在我的特殊情况下，一个块 = 一行。
Qt 4.6.2，Ubuntu 10.04 x64*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T17:03:54.170

稍微改变一下对我有用：

```
while (block.isValid()) {
    if (to_do_or_not_to_do(block)) {
        QTextCursor cursor(block);
        block = block.next();
        cursor.select(QTextCursor::BlockUnderCursor);
        cursor.removeSelectedText();
    }
    else
        block = block.next();
} 
```

# html - 在 Firefox 上隐藏 HTML5 中 iFrame 的滚动条而不编辑 SRC

> ID：10417796
> 
> 赞同：2
> 
> 时间：2012-05-02T16:23:45.497
> 
> 标签：html, firefox, scrollbar, hide

我已经阅读了有关隐藏垂直滚动条的所有类似问题。

下面的技巧在 IE 和 Chrome 中有效，但在 Firefox 中无效，这似乎是一个反复出现的问题。

例如：

*   `overflow:hidden`在 iframe 上没有工作。

*   在 iframe 周围添加`div`with无效。`overflow:hidden`

*   对 iframe使用`seamless`html5 类没有奏效。

*   `scrolling="yes"`没有`overflow:hidden`奏效。

*   `scrolling="no"`有`overflow:hidden`（和没有）没有工作。

*   `iframe::-moz-scrollbar {display:none;}`没有奏效。

*   ...

是否有任何适用于 Firefox 的 HTML/CSS 标签？我必须切换到JS吗？

注意：我无法编辑 SRC 文件。我正在 Twitter Bootstrap 2.0.3 中构建我的页面。

这是 SRC 的主要 html：

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html id="ctl00_Html1" lang="en-us" dir="ltr" __expr-val-dir="ltr" xmlns:o="urn:schemas-microsoft-com:office:office"> <head id="ctl00_Head1"> <body class="v4master" onload="if (typeof(_spBodyOnLoadWrapper) != 'undefined') _spBodyOnLoadWrapper();" scroll="no"> </html>`

谢谢你的帮助！亚当

* * *

就像@hobberwickey 说的...

我无法隐藏滚动条，因为无法编辑的页面内容溢出。

如果有办法改变这一点……全神贯注。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:20:32.220

不知道你的 HTML 和 CSS 到底是什么样子很难说，但我敢打赌你会想要应用这些样式，

位置：相对或绝对；最大宽度：100%；最大高度：100%；溢出：隐藏；

到 html 和 body 元素到 iframe 内的 CSS 文件，而不是父窗口内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T14:52:00.203

滚动条显示的原因是因为有东西要滚动。因此，不要为此感到困难并删除滚动内容。换句话说，使您的内容比必须显示的 iframe 更小。使正文与显示的内容保持一致，并使 iframe 大一点。并且不会有滚动条，因为没有什么可以滚动的。如果没有标签/属性，则不得为使用标签/属性创建理由。

罗伯托·菲利波。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T23:33:12.073

实际上对我来说它适用于： width="100%" height="1000px" scrolling="yes" style=" display:inline;overflow-y:hidden;"

# android - Android：我应该以哪种方式将代码与样式分开？

> ID：10417806
> 
> 赞同：0
> 
> 时间：2012-05-02T16:24:23.853
> 
> 标签：android, styles

从 html/php/css 开始 Android 编程，我在网上搜索了一种简单的方法来将我的代码与我的风格分开 - 现在我需要在列表或表格视图中显示来自数据库的数据。

简单地说，我从数据库中获取一个游标，遍历它，在代码中动态创建每个列表项作为 TextViews。然后我想将外部 xml 布局文件中的样式应用于每个项目。

**伪代码：**

*样式.xml：*

//mystyle：粗体，12pt

//你的风格：斜体，11pt

*活动：*

```
for (each cursor-entry)
{
  tv1 = new TextView();
  applyStyle(tv, mystyle);

  tv2 = new TextView();
  applyStyle(tv, yourstyle);

  //Apply content to textviews from the cursor...
}
mainLayout.setView(tv1);
mainLayout.setView(tv2); 
```

我在网上找到的代码示例使用多行代码或多个 xml 文件（使用 inflate 或 cursorAdapters），IMO 很快变得臃肿。我只想要一种巧妙的方式将样式应用于动态创建的代码。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:44:23.250

如果您使用的是 ListView，那么拥有一个用于行的 XML 文件非常简单。您唯一需要的是一个 XML 文件和一个 Adapter 类。看看这个简单的例子：

要从数据库中读取数据，请创建一个这样的辅助类：

```
public class MessagingDatabaseAdapter {
    protected SQLiteDatabase database;  

    public MessagingDatabaseAdapter(Context context) {
        MessagingDatabaseHelper databaseHelper = new MessagingDatabaseHelper(context, "message_history_db");
        database = databaseHelper.getWritableDatabase();        
    }

    public void close() {
         database.close();
    }

    public void Entity[] getAllEntities() {
        Entity[] values = null;
        String query = "select * from TABLE_NAME";
        Cursor cursor = null;
        try {
            cursor = database.rawQuery(query, null);
            if( cursor.moveToFirst() ) {
                int s = cursor.getCount();
                values = new Entity[s];
                do {
                    Entity entity = new Entity();
                    entity.setSomeProperty(cursor.getInt(cursor.getColumnIndex(SOME_PROPERTY_COLUMN)));
                    values[i++] = entity;
                } while( cursor.moveToNext() ); 
            }
        } catch(Exception ex) {
        } finally {
            if( cursor != null ) {
                cursor.close();
            }               
            return values;
        }
    }

    protected class MessagingDatabaseHelper extends SQLiteOpenHelper {

        public MessagingDatabaseHelper(Context context, String name) {
            super(context, name, null, 1);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        db.execSQL("Your SQL to create Tables");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }
    }
} 
```

在您的活动课程中：

```
MessagingDatabaseAdapter db = new MessagingDatabaseAdapter();
values = db.getAllEntities();
db.close();

list_view = (ListView) findViewById(R.id.list_view);
ListAdapter adapter = new ListAdapter(this, values); 
list_view.setAdapter(adapter); 
```

和 ListAdapter 类：

```
public class ListAdapter extends ArrayAdapter<Entity> {
    final Context context;
    final Entity[] values;      

    public ListAdapter(Context context, Entity[] values) {
        super(context, R.layout.list_screen, values);
        this.values = values;
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.list_view_item, parent, false);

        TextView datetimeTextView = (TextView) rowView.findViewById(R.id.list_view_datetime_text_view);
        datetimeTextView.setTypeface(someTypeFace);
        return rowView;
    }       
} 
```

和行布局 XML 文件 (list_view_item.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/BorderedFrame" >

    <TextView
        android:id="@+id/inbox_list_view_datetime_text_view"
        style="@style/MediumText"
        android:layout_width="wrap_content" >
    </TextView>

</RelativeLayout> 
```

# c# - 动态添加带有相应组合框的文本框

> ID：10417813
> 
> 赞同：0
> 
> 时间：2012-05-02T16:24:59.853
> 
> 标签：c#, winforms, dynamic, custom-controls, add

我正在创建一个具有以下目标的 Windows 窗体应用程序：

从用户那里获取一个产品列表，每个产品都有一个唯一的名称和一个类别（来自一个枚举列表）（然后做一些事情，但这与问题无关）。

这个想法是我想让用户通过在文本框中输入一个值来指定他们想要配置“n”个产品。我有文本框的事件处理程序调用一个将变量设置为此值 n 的方法。这个值“n”将用作循环计数器，或者你有什么 - 关键是它将创建要创建的框数的界限。

然后，我想在表单中添加（基于 n 动态）、n 个（文本框/组合框）对。如果没有空间在最后一个创建的下方添加另一个（文本框/组合框）对，它应该创建另一列。

n 是无界的，但实际上可能永远不会超过 20。无论如何，如果产品数量比这更多，我希望能够处理它。

组合框中的选项将从运行时传入的字符串列表中填充，但每个框、每个表单应用程序的实例都是一致的。

我试图输入一个模拟图像，但堆栈溢出不会让我获得一些声誉积分:(

我了解如何使用类似下面的代码来创建多个框，但它是我坚持的更好点。任何人都可以帮忙吗？

谢谢！

```
`        private void Method1()
        {
            int boxes = Int32.Parse(NumProducts.Text);
            for (int i = 0; i < boxes; i++)
            {
                TextBox tb = new TextBox();
                tb.Location = new System.Drawing.Point(40, i * 20);
                tb.Name = "TextBoxName" + i.ToString();
                tb.Size = new System.Drawing.Size(184, 20);
                tb.TabIndex = i + 2;
                tb.Text = String.Empty;
                panel1.Controls.Add(tb);

            }
        }

        private void NumProducts_TextChanged(object sender, EventArgs e)
        {
            Method1();
        }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:29:07.533

从可用性的角度来看，提前向用户询问行数并不是很好。

您应该创建一个界面，在用户输入内容时不断创建新框，或者通过在用户输入内容时激活“新行”行（未保存空行）或通过“新行”行”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:36:21.553

要实现布局，请使用[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)控件，并将控件添加到此控件中，而不是像您已经在做的那样添加到面板中。这应该透明地处理列问题，并在用户超出您预期的最大编辑框数量时添加滚动条。[此处](http://en.csharp-online.net/FlowLayoutPanel)有关 FlowLayoutPanel 的一般信息（以及许多其他信息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:37:32.293

对我来说听起来像[DataGridView](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)会是更好的选择。您可以使用 DataGridViewTextBoxColumn 作为第一列和 DataGridViewComboBoxColumn 作为第二列进行配置。它支持将“新行”作为最后一项。

阅读文档。将一个放在表格上并使用它。

# jquery - 将数组项附加到具有相应索引的 DOM 元素（jQuery）

> ID：10417815
> 
> 赞同：1
> 
> 时间：2012-05-02T16:25:00.527
> 
> 标签：jquery, arrays, for-loop, append

假设我`divs`的 HTML 中有三个

```
<div>
    <h2>This is div 1</h2>
</div>
<div>
    <h2>This is div 2</h2>
</div>
<div>
    <h2>This is div 3</h2>
</div> 
```

另外，我有一个由三个嵌套数组组成的 JavaScript 数组：

```
var array = [ 
    [ "<p>Bla bla</p>", "<p>Other stuff</p>"], 
    [ "<p>Another paragraph</p>"], 
    [ "<p>Yet another</p>", "<p>yes</p>", "<p>yes</p>" ] 
    ]; 
```

我确信这个数组总是有三个成员，就像`divs`.

我想要做的是将主数组的每个嵌套数组的内容附加到具有相应编号的 div 中。

就像是：

```
for ( var i = 0; i < array.length; i++ ) {
    $('div').eq( i ).append( array[i] );
} 
```

上面的代码不起作用，但我认为我的意图很明确。

您可以在这里找到一个工作示例 => [http://jsfiddle.net/G8BsK/](http://jsfiddle.net/G8BsK/)

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T16:28:58.333

改变这个...

```
.append( array[i] ); 
```

对这个……

```
.append( array[i].join('') ); 
```

尽管我强烈建议将 DOM 选择排除在循环之外，并将其缓存。

```
var divs = $('div');
for ( var i = 0; i < array.length; i++ ) {
    divs.eq( i ).append( array[i].join('') );
} 
```

...或者只是这样做...

```
$('div').append(function(i) {
    return array[i].join('');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:33:02.210

你应该做

```
var array = [
    ["<p>Bla bla</p>", "<p>Other stuff</p>"],
    ["<p>Another paragraph</p>"],
    ["<p>Yet another</p>", "<p>yes</p>", "<p>yes</p>"]
    ];

for (var i = 0; i < array.length; i++) {
    var arr = array[i];
    for (var m = 0; m < arr.length; m++) {
        $('div').eq(i).append(arr[m]);
    };
} 
```

[http://jsfiddle.net/G8BsK/2/](http://jsfiddle.net/G8BsK/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:42:29.340

这是因为附加的数组值是数组本身，而不是 html 字符串。你必须加入他们。

```
 for ( var i = 0; i < array.length; i++ ) {
        $('div').eq( i ).append( array[i].join('') );
    } 
```

将工作。唯一的区别是 'array[i].join('')

# file - 如何从文件中保存和检索哈希表？

> ID：10417817
> 
> 赞同：1
> 
> 时间：2012-05-02T16:25:18.433
> 
> 标签：file, input, save, hashtable

我创建了一个程序，它将计算一些东西并将信息存储到一个哈希表中。我希望它在下次运行时恢复存储在 hashTable 中的先前值并恢复。所以我问如何将对象保存到文件中？

在我的代码中，我使用的是 FileInputStream 和 FileOutputStream。到目前为止，这是我的代码的一个片段：

```
@SuppressWarnings("unchecked")
private void obtainSaveFile(){
    String file = new String("./saveFile.txt");
    try{
        //Create the file if it doesn't exist
        if( !( (new File(file)).exists() ) ){

            //Create new empty file
            (new File(file)).createNewFile();

            //Creates a fresh new hashTable
            hashTable = new QuadraticProbingHashTable<TicTacToeBoard>();
        }
        else{
            //Obtain the hashTables saved config.txt file
            FileInputStream fis = new FileInputStream(file);
            ObjectInputStream ois = new ObjectInputStream(fis);

            //Obtain the previously saved hashTable
            //-----------------------------------
            //This line of code gives me an error
            //-----------------------------------
            hashTable = (QuadraticProbingHashTable<TicTacToeBoard>)ois.readObject();
            ois.close();
        }

        //Create save file configs.txt
        FileOutputStream fos = new FileOutputStream(file);
        saveFile = new ObjectOutputStream(fos);     

    }catch(Exception e){
        e.printStackTrace();

        //Creates a fresh new hashTable
        //This line of code gives me an error
        hashTable = new QuadraticProbingHashTable<TicTacToeBoard>();
    }
} 
```

最初，当没有文件时，它运行良好。但在那之后，它一直给我错误。当我从文件中获取一个对象并将其转换为 QuadraticProbingHashTable 并将其设置为等于 hashTable 时，它​​不喜欢。

此外，这是作为错误输出的内容：

```
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: proj4.QuadraticProbingHashTable$HashEntry
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readArray(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at proj4.TicTacToeSolver.obtainSaveFile(TicTacToeSolver.java:308)
    at proj4.TicTacToeSolver.solve(TicTacToeSolver.java:120)
    at proj4.Main.main(Main.java:41)
Caused by: java.io.NotSerializableException: proj4.QuadraticProbingHashTable$HashEntry
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeArray(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at proj4.TicTacToeSolver.solve(TicTacToeSolver.java:246)
    ... 1 more
Exception in thread "main" java.lang.NullPointerException
    at proj4.TicTacToeSolver.solve(TicTacToeSolver.java:246)
    at proj4.Main.main(Main.java:41) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:30:43.680

好吧，问题似乎是，您正在尝试序列化不实现 Serializable 的东西。你可以在这里看到：

```
java.io.NotSerializableException: proj4.QuadraticProbingHashTable$HashEntry 
```

你有两个选择：

1.  如果可能的话，你让 HashEntry 实现 Serializable
2.  您将其标记为瞬态，因此它不会被序列化（可能不是您想要的）。

有关更多详细信息，您可以发布课程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:33:18.550

问题是即使您的表可能是可序列化的，但您已向不可序列化的哈希表添加了键或值。所有对象都可以进入 Hashtable，但并非所有对象都可以序列化。你在你的哈希表中放入了什么样的对象？

# c++ - 构造函数比较

> ID：10417818
> 
> 赞同：2
> 
> 时间：2012-05-02T16:25:27.783
> 
> 标签：c++

> **可能重复：**
> [在构造函数中初始化，最佳实践？](https://stackoverflow.com/questions/702185/initializing-in-constructors-best-practice)

我是 C++ 新手。

假设我们有这个类定义：

```
Class MyClass {
  int a;
  int b;

  //....
} 
```

我想知道两个类构造函数之间的区别是什么：

```
public: 
    MyClass(int a, int b) : a(a), b(b) {} 
```

和（我会说Java风格）：

```
MyClass(int a, int b) {

this->a = a;
this->b = b;
} 
```

我想第一个在 C++ 中更好；正确的？为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T16:26:26.473

第一个（使用初始化列表）将数据成员初始化为给定值。第二个首先初始化它们，然后为它们分配值。这就是首选第一个的原因。那里没有不必要的赋值操作。

当您的数据成员的构建和/或分配成本很高时，这一点尤其重要。还要记住，某些类型不是默认可构造的，因此必须使用初始化列表。

# parsing - 在解析期间对不同类型的术语进行分区

> ID：10417821
> 
> 赞同：3
> 
> 时间：2012-05-02T16:26:17.550
> 
> 标签：parsing, haskell, parsec

我有两个用于不同类型术语的解析器。

```
a :: Parser A
b :: Parser B 
```

我有一个表示这些术语序列的数据类型。

```
data C = C [A] [B] 
```

如果我的输入是一系列*混合*术语，那么将s 与s`c :: Parser C`分开并保留它们的顺序的好方法是什么？例如，给定这些定义：`A``B`

```
data A = A Char
data B = B Char
a = A <$> oneOf "Aa"
b = B <$> oneOf "Bb" 
```

`"abAbBBA"`将解析为序列`aAA`和`bbBB`. 我有一种需要使用的感觉`StateT`，但不确定具体细节，只需要朝着正确的方向推进。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T16:41:01.870

一个简单的解决方案是首先将其解析为一个列表，`Either A B`然后将[`partitionEithers`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Either.html#v:partitionEithers)其拆分为两个列表，然后将`C`构造函数应用于这些列表。

```
c :: Parser C
c = uncurry C . partitionEithers <$> many ((Left <$> a) <|> (Right <$> b)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T16:43:43.167

为了解决您的问题，我将使用 Data.Either 中的 partitionEithers，代码未选中，但应该不会太远......

```
c :: Parser C
c = (post . partitionEithers ) <$> many1 aORb
  where
    post (as,bs) = C as bs

aORb :: Parser (Either A B)
aORb = (Left <$> a) <|> (Right <$> b) 
```

编辑 -

> 折断！

# c# - 带循环的asp.net web用户控件

> ID：10417825
> 
> 赞同：0
> 
> 时间：2012-05-02T16:26:34.457
> 
> 标签：c#, asp.net, user-controls

对于如何创建用户控件并在其上填充一些数据，我对 webforms 用户控件完全陌生，我有点困惑。

```
for(int i = 0; i < Price.EpList.Count(); i++)
                        {

                            Price.EpList[i].Amount.ToString();
                            Price.EpList[i].Code.ToString();
                            Price.EpList[i].Desc.ToString();
                            Price.EpList[i].ID.ToString();

                        } 
```

EpList 是一个列表，其中包含我想在网页中以表格格式显示的信息，每行都有复选框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:31:35.263

看看中继器控件。您不必遍历列表，只需将列表绑定到转发器并为每个重复项定义所需的 html 模板。

[http://www.w3schools.com/aspnet/aspnet_repeater.asp](http://www.w3schools.com/aspnet/aspnet_repeater.asp)

* * *

编辑：那篇文章使用 Visual Basic，所以这里是 C# 翻译：

假设这个中继器：

```
<asp:Repeater runat="server" ID="uxEpList">
<ItemTemplate>
<%--Html goes here--%>
<%# Eval("Amount")%>
<%# Eval("Code")%>
<%# Eval("Desc")%>
<%# Eval("ID")%>   
</ItemTemplate>
</asp:Repeater> 
```

在后面的代码中：

```
uxEpList.DataSource = Price.Eplist;
uxEpList.DataBind(); 
```

* * *

如果您需要将转发器嵌套在另一个转发器中（使用评论中的 Desc 属性），您可以这样做，通过以声明方式设置 DataSource 属性（注意单引号）：

```
<asp:Repeater runat="server" ID="uxEpList">
<ItemTemplate>
    <asp:Repeater Datasource='<%# Eval("Desc")%>' runat="server">
    <ItemTemplate>
    //etc... 
```

# cakephp - 在 CakePHP 中自动加载命名空间 (PSR-0) 的类目录？

> ID：10417827
> 
> 赞同：2
> 
> 时间：2012-05-02T16:26:39.020
> 
> 标签：cakephp, import, autoload

我正在尝试导入 Assetic ( [https://github.com/kriswallsmith/assetic](https://github.com/kriswallsmith/assetic) ) 类。

设法做丑陋的事情：

```
App::import('Vendor', 'LessphpFilter', array('file' => 'assetic' . DS . 'src' . DS . 'Assetic' . DS . 'Filter' . DS . 'LessphpFilter.php')); 
```

但它在一个子需要的文件上崩溃。

知道如何以干净的方式实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:05:04.767

几周前我遇到了类似的问题，但还没有找到一种真正干净/令人满意的方法来做到这一点。但是我设法通过在导入之前将路径添加到包含路径来解决子所需文件的问题。像这样：

```
$pathExtra = APP.'Vendor'.DS.PATH_SEPARATOR.APP.'Vendor'.DS.'pear'.DS;
$path = ini_get('include_path');
$path = $pathExtra . PATH_SEPARATOR . $path;
ini_set('include_path', $path);
App::import('Vendor', 'consumer', array('file' => 'Auth'.DS.'OpenID'.DS.'Consumer.php')); 
```

# sql-server-2008 - SQL右外连接在右表中没有匹配

> ID：10417828
> 
> 赞同：4
> 
> 时间：2012-05-02T16:26:40.303
> 
> 标签：sql-server-2008

是否有可能进行 SQL 查询，从左表中获取一些信息，从右表中获取与条件匹配的所有信息。但是如果右表中没有符合条件的记录，它应该仍然显示完整的记录，但是填充了很多 *NULL*s

此刻，我来到了这个：

```
select
 u.id, u.fullname,
 r.*
from
 users as u
right outer join
 rapports as r
on
 u.id = r.userid
where
 u.active = 1
 and (r.closed = 0 or CONVERT(varchar, r.periodstart, 112) = convert(varchar, GETDATE(), 112))
order by
 u.fullname 
```

但这仅显示`user-table`是否有`rapports-table`匹配条件的记录`WHERE`。

这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:38:57.100

注意外部表 (r) 的条件去哪里 - 不是在 WHERE 子句中（它将您的外连接转换为内连接），而是在 ON 子句中。

```
select
 u.id, u.fullname,
 r.*
from
 users as u
left outer join
 rapports as r
on
 u.id = r.userid
 and (r.closed = 0 
   or CONVERT(varchar, r.periodstart, 112) = convert(varchar, GETDATE(), 112))
where
 u.active = 1
order by
 u.fullname; 
```

但是，这要好得多：

```
select
 u.id, u.fullname,
 r.*
from
 users as u
left outer join
 rapports as r
on
 u.id = r.userid
 and (r.closed = 0 or CONVERT(DATE, r.periodstart) = CONVERT(DATE, GETDATE()))
where
 u.active = 1
order by
 u.fullname; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:27:47.903

**是的！**

更改：`right outer join`_`left outer join`

```
select
 u.id, u.fullname,
 r.*
from
 users as u
left outer join
 rapports as r
on
 u.id = r.userid
where
 u.active = 1
 and (r.closed = 0 or CONVERT(varchar, r.periodstart, 112) = convert(varchar, GETDATE(), 112))
order by
 u.fullname 
```

* * *

> 左外连接逻辑运算符返回满足第一个（顶部）输入与第二个（底部）输入连接的每一行。它还从第一个输入返回第二个输入中没有匹配行的任何行。第二个输入中的不匹配行作为空值返回。如果 Argument 列中不存在连接谓词，则每一行都是匹配行。

考虑到这一点，这`join`是有限制的`u.id = r.userid`。所以，如果`where`限制不存在，结果将是`u.id, u.fullname, r.*`万能的`users`！

由于有一个`where`子句，一些行可能被放在外面，如果你不想要，使用这个查询：

```
select
 u.id, u.fullname,
 r.*
from
 users as u
left outer join
 rapports as r
on
 u.id = r.userid and u.active = 1
where
 and (r.closed = 0 or CONVERT(varchar, r.periodstart, 112) = convert(varchar, GETDATE(), 112))
order by
 u.fullname 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-03T16:26:18.933

```
SELECT  *
FROM    #temp_table_name

SELECT DISTINCT
        b.NAME ,
        q.valueI
FROM    #temp_table_name q
        RIGHT OUTER JOIN ( SELECT   NAME
                           FROM     ( SELECT    NAME ,
                                                valueI
                                      FROM      #temp_table_name
                                      INTERSECT
                                      SELECT    NAME ,
                                                valueI
                                      FROM      #temp_table_name
                                    ) a
                           GROUP BY a.name
                           HAVING   COUNT(*) = 1
                         ) b ON q.NAME = b.NAME 
```

# java - 在外部类中创建 JTabbed 窗格

> ID：10417838
> 
> 赞同：1
> 
> 时间：2012-05-02T16:27:13.410
> 
> 标签：java, swing

我正在玩一些摇摆图形，并试图创建一个基本程序。该程序将有一个选项卡式窗格，其中包含不同数量的选项卡，具体取决于数组的大小。（我的最终目标是让用户更改数组中的项目数量，从而更改选项卡的数量）。

每个选项卡都将具有完全相同的组件、文本区域、表格以及一些按钮和标签。我想做的不是单独编码这些选项卡并一遍又一遍地重写我的代码，我想做的是创建一个类来放入我的所有组件。

然而，我有点难过。这是我创建标签的课程：

```
public class LocaleTab {

public LocaleTab(){
    JPanel tab = new JPanel();
    JLabel label = new JLabel();
    label.setPreferredSize(new Dimension(300, 300));

    tab.add(label);
}
} 
```

这是我试图用它调用的代码：

```
 LocaleTab tab1 = new LocaleTab();
    JTabbedPane localesTabPane = new JTabbedPane();

    localesTabPane.add(tab1); 
```

当我尝试编译它时出现错误。我在想我的方法可能是完全错误的。

```
The method add(Component) in the type JTabbedPane is not applicable 
    for the arguments (LocaleTab) 
```

我担心的一个问题是，当我尝试使用每个选项卡中的表格和文本区域中的数据时（我认为我将使用事件侦听器？我还没有到那个阶段！）我将如何针对各个选项卡组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:29:47.740

改成：

```
public class LocaleTab extends JPanel {
    public LocaleTab(){
        JLabel label = new JLabel();
        label.setPreferredSize(new Dimension(300, 300));
        add(label);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:45:53.387

可能您正在寻找接近此的东西：

```
public class LocaleTab {

    private JPanel tab;

    public LocaleTab() {
        tab = new JPanel();
        JLabel label = new JLabel();
        label.setPreferredSize(new Dimension(300, 300));

        tab.add(label);
    }

    public JPanel getTabPanel() {
        return tab;
    }
} 
```

并如下图使用`LocaleTab`。

```
LocaleTab tab1 = new LocaleTab();
JTabbedPane localesTabPane = new JTabbedPane();

localesTabPane.add(tab1.getTabPanel()); 
```

另外要了解 JTabbedPane 的工作原理，请查看此处：[如何使用选项卡式窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)

# asp.net-mvc-3 - MVC 模型与列表绑定

> ID：10417839
> 
> 赞同：1
> 
> 时间：2012-05-02T16:27:15.983
> 
> 标签：asp.net-mvc-3, model-binding

我有这个模型：

```
 public class ReservationViewModel
 {        
  public Flight InboundFlight { get; set; }
  public Flight OutboundFlight { get; set; }
 }

 //Flight
 public class Flight
 {
  public List<ISeat> Seats { get; set; }
 }

 //Seats
  public interface ISeat 
  {
    ECabin Cabin { get; }
    int NumberOfSeatsAvailable { get; }
    int SeatsChosen { get; set; }
    string PropertyName { get; }
 } 
```

我的 HTML 包含以下内容：

```
<select id="OutboundFlight__0__Seats_SeatsChosen" name="OutboundFlight.[0].Seats.SeatsChosen" class="valid"><option...
<select id="OutboundFlight__0__Seats_SeatsChosen" name="OutboundFlight.[1].Seats.SeatsChosen" class="valid"><option...
<select id="OutboundFlight__0__Seats_SeatsChosen" name="OutboundFlight.[2].Seats.SeatsChosen" class="valid"><option... 
```

我的行动：

```
 [HttpPost]
    public ActionResult Index(ReservationViewModel model, FormCollection form)
    {            
        return View();
    } 
```

提交后，我尝试绑定回模型，但每个航班的座位返回 null... 帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:35:48.617

生成的 HTML 不正确，无法将其绑定到列表 - 字段名称必须与从 c# 访问属性的内容相匹配：

这应该有效：

```
name="OutboundFlight.Seats[0].SeatsChosen" 
```

# ruby-on-rails - 设计不生成 rails 标准 URL

> ID：10417840
> 
> 赞同：2
> 
> 时间：2012-05-02T16:27:31.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我有这个设计的设置

```
devise_for :users, :controllers => {
  :confirmations => "confirmations", 
  :registrations => "registrations"} do
     put "confirm_user", :to => "confirmations#confirm_user" 
  end 
```

当我跑步时

```
rake route 
```

我得到了registrations_controller 的奇怪路线，特别是edit_path

```
 edit_user_registration GET    /users/edit(.:format)             registrations#edit
                        PUT    /users(.:format)                  registrations#update
                        DELETE /users(.:format)                  registrations#destroy 
```

问题是例如为第一个用户编辑 url。

我期望

```
/users/1/edit 
```

但我得到了

```
/users/edit.1 
```

我希望这条路线行不通，但确实可行。现在我不确定我是否犯了一些错误，或者该设计是否以这种方式生成路线。

如果它以那种方式生成路由，请求的格式会去哪里？

我不敢相信 URL 可能看起来像这样。

```
/users/edit.1.js 
```

谢谢你的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:03:43.480

该问题与编辑网址无关，而是取决于链接到编辑网址的页面。您可能有此表单的链接

```
link_to "Settings", edit_user_registration_path(@user) 
```

指向编辑 url，它会生成意外的 url

```
/users/edit.id 
```

您只需替换省略@user 的链接，如

```
link_to "Settings", edit_user_registration_path 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:35:03.130

`.`显示格式时始终存在。这与 Devise 无关，也没有任何问题。你们都很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:00:27.933

我将 id 传递给编辑路线，但它不需要 id。

edit_user_registration_path 仅适用于 current_user，因此 user.id 是不必要的。

这个问题可能也有帮助。

[设计：允许管理员编辑其他用户 - Rails](https://stackoverflow.com/questions/5578182/devise-allow-admins-to-edit-other-users-rails/5582660#5582660)

# xcode - NSTimer 无效 - 重复的计时器

> ID：10417841
> 
> 赞同：0
> 
> 时间：2012-05-02T16:27:36.860
> 
> 标签：xcode, nstimer, invalidation

一组简化的方法来演示正在发生的事情：

```
- (void)timerDidFire {
    NSLog(@"fire");
}

- (void)resetTimer:(NSTimer *)timer {
    if (timer) [timer invalidate]; // timer = nil; here doesn't change anything
    NSLog(@"%@", timer);
    timer = [NSTimer ...Interval:1 ... repeats:YES];
}

- (IBAction)pressButton {
    [self resetTimer:myTimer];
} 
```

清除我做错了什么，但是什么？为什么每次按下都会有一个额外的计时器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:52:01.890

每次`resetTimer:`调用该方法时，您都会创建一个新`NSTimer`实例。不幸的是，在此方法执行完成后，您丢失了对新实例的所有引用，因为它已分配给局部变量。
您在方法内创建的计时器未分配给 myTimer 变量。无论 myTimer 是什么，它都不是新创建的计时器。

您可以转储所有这些局部变量并简单地使用如下内容：

```
- (void)resetTimer {
    [myTimer invalidate]; // calls to nil are legal, so no need to check before calling invalidate
    NSLog(@"%@", myTimer);
    myTimer = [NSTimer ...Interval:1 ... repeats:YES];
}

- (IBAction)pressButton {
    [self resetTimer];
} 
```

# regex - 通过 htaccess 更改 url

> ID：10417842
> 
> 赞同：1
> 
> 时间：2012-05-02T16:27:39.103
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我在 htaccess 文件中有以下代码。我想通过站点重定向到另一个 url。例如`http://abc.com/index.php`_`http://abc.com/beta/index.php`

```
<IfModule mod_rewrite.c>
     RewriteEngine On
  RewriteBase /
 RewriteRule ^index\.php$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L]
 </IfModule>

RewriteRule ^mp/?$ /mp/index.php [L] 
```

我怎样才能重定向它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:53:48.723

您只需要这样一条规则：

```
RewriteRule (?!^beta(/.*|)$)^.*$ beta%{REQUEST_URI} [R,L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:45:11.547

尝试将以下规则添加到块的底部：

```
RewriteCond %{REQUEST_URI} !^beta
RewriteRule ^(.*)$ /beta/$1 [L] 
```

# java - Android-Java.io.Exception：内容长度错误预期 x 内存量得到 y 量

> ID：10417844
> 
> 赞同：4
> 
> 时间：2012-05-02T16:27:43.923
> 
> 标签：java, android, http, post

我一直在尝试使用 Android 和[BioJava查询](http://biojava.org/wiki/Main_Page)[NCBI 爆炸网站](http://blast.ncbi.nlm.nih.gov/)。我正在使用带有 Android 模拟器的 Eclipse。当我将代码作为 Android 应用程序运行时，出现以下错误：

`W/System.err(533): java.io.IOException: An error occured submiting sequence to BLAST server. Cause: content-length promised 2000 bytes, but received 214`

当我采用相同的代码并将其作为常规 Java 应用程序运行时，它可以完美运行。关于它可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T06:52:28.280

当我尝试在 Android 中发出 POST 请求时，我也发生了这种情况。**如果您在标头中设置 Content-Length 并且实际内容具有不同的长度**，它将`IOException`在 Android 中抛出一个（在普通的 JDK 中它可以工作，尽管它是错误的）

您可以使用以下代码重现异常：

```
try {
    URL oracle = new URL("http://oasth.gr/tools/lineTimes.php");
    HttpURLConnection yc = (HttpURLConnection) oracle.openConnection();

    yc.setRequestProperty("User-Agent",
            "Mozilla/5.0 (X11; Linux i686; rv:2.0b12) Gecko/20110222 Firefox/4.0b12");
    yc.setRequestProperty("Referer",
            "http://oasth.gr/tools/lineTimes.php");
    yc.setRequestProperty("Accept-Language",
            "el-gr,el;q=0.8,en-us;q=0.5,en;q=0.3");
    yc.setRequestProperty("Accept-Charset",
            "ISO-8859-7,utf-8;q=0.7,*;q=0.7");

    // content length should be 29 !!
    yc.setRequestProperty("Content-Length", "1000");

    // content length is 29 !
    String parames = "bline=63&goes=a&lineStops=886";

    yc.setDoOutput(true);

    OutputStreamWriter wr = new OutputStreamWriter(yc.getOutputStream());

    wr.write(parames);
    wr.flush();
    Log.d(TAG, "" + yc.getResponseCode());

    BufferedReader in = new BufferedReader(new InputStreamReader(
            yc.getInputStream()));
    String inputLine;

    StringBuilder sbu = new StringBuilder();

    while ((inputLine = in.readLine()) != null)
        sbu.append(inputLine);

    wr.close();
    in.close();

} catch (IOException e) {
    e.printStackTrace();
    Log.e("getLinesArrival Exception", e.getMessage());
} 
```

所以如果你删除线

```
yc.setRequestProperty("Content-Length", "1000"); 
```

它会工作的！

# database - 身份验证数据库字段

> ID：10417845
> 
> 赞同：1
> 
> 时间：2012-05-02T16:27:45.393
> 
> 标签：database, database-design

我正在将身份验证系统实施到现有的数据库系统中。目前，数据库有一个“Person”表，其中包括：名字、姓氏、出生日期、电子邮件（用户名）等。这是用户的主表。

我需要添加以下字段进行身份验证：Password、IsLocked、LockDate、LastLoginDate。

您建议将这些字段放在 Person 表中，还是将它们放在新的 Authentication 表中？我最初的计划是让“Person”简单地包含关于那个人的数据，而不一定是关于身份验证的数据。

另一种方法可能是将密码与电子邮件一起存储在 Person 中，然后将身份验证数据放在单独的表中。这样，用户名和密码将位于同一位置，但元数据将位于其自己的实体中。

有人有什么想法吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:36:47.927

将它们分开，以便用户可以查询系统以获取有关 a 的信息，`Person`而不必访问他们的帐户凭据。

这也有一个很好的副作用，即并非所有`Person`实体都可能有帐户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:49:23.450

将帐户信息分开。您当前的业务需求可能是每个人只有一个帐户，但将来可能会出现一个人需要拥有多个帐户，甚至您需要一个由多个人共享的帐户。拥有单独的身份验证表意味着**未来的此类更改将对**您的代码产生较小的影响。

此外，从**保护身份验证信息**的角度来看，可以访问帐户数据的人员/进程越少，您的情况就越好。实现表级访问比实现列级访问容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:35:50.857

我认为为身份验证数据创建单独的表没有多大意义。据我所知，身份验证不能独立于 Person 存在 - 而且似乎没有一种方法可以将一个 Person 合理地与两个身份验证相关联（反之亦然）。

换句话说：Person 和 Authentication 之间存在 1:1 的关系，那么为什么要把它分开呢？

# c# - 保持表单焦点

> ID：10417846
> 
> 赞同：0
> 
> 时间：2012-05-02T16:27:46.593
> 
> 标签：c#, wpf, windows, winforms, user-interface

好的，这可能看起来像以前提出的问题，但我已经用谷歌搜索并在这里搜索，但没有找到任何答案。

我希望通过按下按钮打开一个子表单，并且在打开时，我想阻止对容器的访问，直到关闭。还有一种情况，当我从容器中打开一个表单 (F1) 时，我可以从 F1 打开另一个 (F2)。思路是一样的，F2打开时，容器被阻塞，F1也被阻塞，直到我关闭它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:29:03.903

显示对话框（）？

[http://msdn.microsoft.com/en-us/library/39wcs2dh(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/39wcs2dh(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T16:32:45.730

使用`Form.ShowDialog`而不是`Form.Show`.

# .net - 在 app.manifest 中指定准确的参考版本

> ID：10417849
> 
> 赞同：0
> 
> 时间：2012-05-02T16:27:59.583
> 
> 标签：.net, reference, manifest, gac, publisher-policy

在我们的应用程序中实现 ODP.Net 的使用时，我遇到了版本的潜在问题，所以我敲开了一个快速测试应用程序，看看它是否会影响我们，确实如此。

我们有客户在 Oracle 上拥有或想要我们的应用程序，但他们使用不同的版本，并且他们通常在其工作站上部署的 Oracle 客户端版本具有企业标准。我们的想法是使用我们的应用程序（在程序目录中）部署一个固定版本的 ODP 以及适当的即时客户端，因为 Oracle 保证任何给定客户端版本的任何一方都具有 2 个主要版本的兼容性，这意味着我们可以使用，比如 Oracle通过使用部署 ODP 和客户端 11.1，从 10.1 到理论上的 Oracle 12。

这很好，但是如果我们的客户随后部署更高版本的 Oracle 客户端，该客户端在 GAC 中注册更新版本的 ODP 以及告诉应用程序无论如何都使用新版本的发布者策略，那么问题就来了。我们正在使用来自 EntlibContrib（ODP 包装器）的一个库的自定义实现，该库使用我们使用的特定版本的 EL5 和 ODP 构建，并且将更新版本部署到 GAC 会导致此失败，正如测试应用程序所证明的那样。

为了测试这一点，我使用了一个安装了 Win 7 x86 的干净 VM，然后添加了 Oracle Client 10.2（它在 GAC 中注册了 ODP 10.2）并让我的测试应用程序使用 ODP 和 Client 11.1。这工作得很好，所以我安装了客户端 11.2，在 GAC 中注册了 ODP，它也添加了发布者策略，这证明测试应用程序会失败。

为了解决这个问题，我向 app.manifest 添加了一个依赖项，如下所示：

```
 <dependency>
    <dependentAssembly>
      <assemblyIdentity
          type="win32"
          name="Oracle.DataAccess"
          version="2.111.7.20"
          processorArchitecture="x86"
          publicKeyToken="89b483f429c47342"
       />
    </dependentAssembly>
  </dependency> 
```

这与我们正在部署的 ODP 二进制文件的版本和公钥相匹配，因此我希望测试应用程序能够使用它。但是在启动应用程序时出现以下错误：

`The application has failed to start because its side-by-side configuration is incorrect.`

事件日志包含以下内容：

`Activation context generation failed for "C:\Program Files\OPT\OPT\OraclePerformanceTester.exe". Dependent Assembly Oracle.DataAccess,processorArchitecture="x86",publicKeyToken="89b483f429c47342",type="win32",version="2.111.7.20" could not be found. Please use sxstrace.exe for detailed diagnosis.`

使用 sxstrace，我得到以下输出：

```
Begin Activation Context Generation.
Input Parameter:
    Flags = 0
    ProcessorArchitecture = x86
    CultureFallBacks = en-US;en
    ManifestPath = C:\Program Files\OPT\OPT\OraclePerformanceTester.exe
    AssemblyDirectory = C:\Program Files\OPT\OPT\
    Application Config File = C:\Program Files\OPT\OPT\OraclePerformanceTester.exe.Config

INFO: Parsing Application Config File C:\Program Files\OPT\OPT\OraclePerformanceTester.exe.Config.
INFO: Parsing Manifest File C:\Program Files\OPT\OPT\OraclePerformanceTester.exe.
INFO: Manifest Definition Identity is OraclePerformanceTester.exe,version="1.0.0.0".
INFO: Reference: Oracle.DataAccess,processorArchitecture="x86",publicKeyToken="89b483f429c47342",type="win32",version="2.111.7.20"
INFO: Resolving reference Oracle.DataAccess,processorArchitecture="x86",publicKeyToken="89b483f429c47342",type="win32",version="2.111.7.20".
INFO: Resolving reference for ProcessorArchitecture x86.
    INFO: Resolving reference for culture Neutral.
        INFO: Applying Binding Policy.
            INFO: No publisher policy found.
            INFO: No binding policy redirect found.
        INFO: Begin assembly probing.
            INFO: Did not find the assembly in WinSxS.
            INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Oracle.DataAccess\2.111.7.20__89b483f429c47342\Oracle.DataAccess.DLL.
            INFO: Attempt to probe manifest at C:\Program Files\OPT\OPT\Oracle.DataAccess.DLL.
            INFO: Attempt to probe manifest at C:\Program Files\OPT\OPT\Oracle.DataAccess.MANIFEST.
            INFO: Attempt to probe manifest at C:\Program Files\OPT\OPT\Oracle.DataAccess\Oracle.DataAccess.DLL.
            INFO: Attempt to probe manifest at C:\Program Files\OPT\OPT\Oracle.DataAccess\Oracle.DataAccess.MANIFEST.
            INFO: Did not find manifest for culture Neutral.
        INFO: End assembly probing.
ERROR: Cannot resolve reference Oracle.DataAccess,processorArchitecture="x86",publicKeyToken="89b483f429c47342",type="win32",version="2.111.7.20".
ERROR: Activation Context generation failed. 
```

引用的文件 (Oracle.DataAccess.dll) 存在于可执行文件旁边的程序目录中，具有所有其他依赖项，但由于某种原因它不会拾取它。我之前必须使用的唯一清单是对运行良好的 exe 进行 UAC 检查，据我所知，我已按照步骤指定应该覆盖发布者策略的确切版本。我做错了什么？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:29:40.913

我要添加一个答案，因为 Hans Passant（他给了我答案）没有添加官方答案，而且我想扩展它，因为 Hans 的答案与我发现的其他答案相似，但并不太清楚因为他们只讲述了故事的一部分。

添加`<publisherPolicy apply="no" />`app.config 确实有效，但我发现几乎所有地方都说这并不能解释它应该在 app.config中的*位置。*您需要将其添加到这样的`<runtime>`部分：

```
<configuration>
    <!--Other Sections-->
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
             <!--Ensures Oracle Publisher Policies don't override the version of ODP being used.-->
                <assemblyIdentity name="Oracle.DataAccess" publicKeyToken="89B483F429C47342"/>
                <publisherPolicy apply="no"/>
              </dependentAssembly>
        </assemblyBinding>
    </runtime>
    <!--Other Sections-->
</configuration> 
```

当然，您必须根据需要更改程序集名称和公钥。就是这样。我从一个通常可靠的来源获得了有关使用清单文件的信息，因此这里的课程是在最后花费大量时间之前仔细检查您的信息。尝试一些东西的时间 - 这可能会浪费时间。

# objective-c - 在 ARC 下，当通过属性分配给 ivar 时，块是否会自动复制？

> ID：10417851
> 
> 赞同：8
> 
> 时间：2012-05-02T16:28:14.180
> 
> 标签：objective-c, properties, automatic-ref-counting, objective-c-blocks

认为

```
typedef void (^MyResponseHandler) (NSError *error);
@property (strong, nonatomic) MyResponseHandler ivarResponseHandler;
synthesize ivarResponseHandler = _ivarResponseHandler;

- (void)myMethod:(MyResponseHandler)responseHandler
{
    self.ivarResponseHandler = responseHandler;
    ...
} 
```

通过对 ivar 的分配是否`@property`正确？我知道在手动内存管理中，您需要`self.ivarResponseHandler = [responseHandler copy];`确保将块从堆栈复制到堆。但是观看 WWDC 2011 的 Session 322 - Objective-C Advancements in Depth（第 25 分钟），演讲者说 ARC 会自动处理将块分配给 ivar。我只是想确定一下。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T16:35:28.957

ARC**将**在您发布的代码中自动为您执行复制。

如果您将块转换为`id`，ARC 将**不会**为您执行复制。例如，在这段代码中，ARC 不会执行复制，因为`addObject:`' 的参数类型是`id`：

```
NSMutableArray *array = [NSMutableArray array];
[array addObject:responseHandler]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:06:02.713

熊山，

事实上，确保块被复制的最简单方法是将 设置`@property`为使用复制。如：

```
@property (copy, nonatomic) MyResponseHandler ivarResponseHandler; 
```

它可以满足您的一切需求。

安德鲁

# qt - PyQt 中图上的事件标记

> ID：10417857
> 
> 赞同：1
> 
> 时间：2012-05-02T16:28:33.607
> 
> 标签：qt, plot, pyqt4

我想知道如何将事件标签放在图的底部（x 轴）以表示在那个时间点发生了一些事情。据我所知，此功能在 PyQt 和 Matlablib 中均不可用。任何建议将不胜感激！

# powershell - PowerShell：CLI 中的页眉、页脚和/或框架

> ID：10417860
> 
> 赞同：4
> 
> 时间：2012-05-02T16:29:03.037
> 
> 标签：powershell, header, footer, frames

通过命令行界面运行一系列脚本时，有没有办法在正文滚动当前运行脚本的详细反馈时添加页眉和页脚？

标头将包含有关当前正在运行的脚本的信息。页脚将向用户提供有关控制某些脚本以及如何暂停或停止脚本的信息。

如果有类似的东西存在，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:36:08.303

您可以更改窗口标题，它的功能有点像标题 - 虽然我不知道它是否会为您提供您正在寻找的内容：

```
$Host.UI.RawUI.WindowTitle = "Your Custom Header" 
```

[jumbo](https://stackoverflow.com/questions/10417860/powershell-headers-footers-and-or-frames-in-cli#comment13442063_10417860)建议使用 Write-Progress cmdlet 可能与您在纯 PowerShell 中的页脚一样好。

另一种选择是在 WinForms/WPF 应用程序中托管 PowerShell 运行时，该应用程序将为您提供适当的页眉/页脚 - 尽管这可能完全是矫枉过正并且根本不符合您的需求。在一个过于简单和做作的示例中，您将在 C# 中执行以下操作：

```
// include the System.Management.Automation assembly & namespace
PowerShell ps = PowerShell.Create();
ps.AddCommand("Get-Process");
foreach (PSObject result in ps.Invoke()) {
  Console.WriteLine(result.Members["ProcessName"].Value);
} 
```

您可能会将输出转储到 TextBox 或更合适的东西，而不是写入控制台。

最后一个选项是使用控制台设置[CursorPosition](http://technet.microsoft.com/en-us/library/system.management.automation.host.pshostrawuserinterface.cursorposition.aspx)属性的功能。这又是一种 hack，因为您将覆盖将滚动的输出，但如果您的脚本输出有限 - 这可能有效：

```
$pos = $Host.UI.RawUI.CursorPosition
$newPos = New-Object System.Management.Automation.Host.Coordinates 0,20
$Host.UI.RawUI.CursorPosition = $newPos
"Here is my footer on starting at the first character of line 20"
$Host.UI.RawUI.CursorPosition = $pos 
```

您可以动态检查该`$Host.UI.RawUI.WindowSize.Height`属性以将页脚设置在窗口底部附近。请记住，默认情况下，如果有很多输出，文本将滚动 - 这将包括旧版本的页脚也向上滚动屏幕。

# extjs - ExtJs 4 如何动态增加面板的宽度？

> ID：10417867
> 
> 赞同：2
> 
> 时间：2012-05-02T16:29:10.673
> 
> 标签：extjs, extjs4

当我向面板添加新按钮时，我想动态增加该面板的大小？

```
 Ext.onReady(function() {

    Ext.tip.QuickTipManager.init();

     Ext.define('myPanel', {
        extend:'Ext.panel.Panel',
        bodyStyle  : {"background-color":"#DFE8F6","padding":"2px"},
            width:100,
        border:false,
        viewConfig: 
        {
            forceFit: true,
        }
        });

    new myPanel({
        id:'_panel',
            renderTo:Ext.getBody()
    });
        new Ext.button.Button({
        text:'Click Me',
        renderTo:Ext.getBody(),
        handler:function()
        {
            Ext.getCmp('_panel').add(new Ext.button.Button({text:'hello'}));
            Ext.getCmp('_panel').doLayout();
        }
     });
}); 
```

这里的宽度是 100。当我向面板添加新按钮时，面板的宽度应该根据新按钮增加。对于按钮的不同文本，此处按钮的大小会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:20:10.380

因为 ExtJS 的 Components 具有宽度的功能，所以我认为您可以尝试：

```
handler:function()
    {
        var btn = new Ext.button.Button({text:'hello'});
        var panel = Ext.getCmp('_panel');
        panel.setWidth(panel.getWidth() + btn.getWidth());
        panel.add(btn);
        panel.doLayout();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T12:53:23.427

你是设置`maxWidth`还是`minWidth`属性？例如，如果您设置`maxWidth`为 100 并尝试`setWidth(120)`动态设置它将不起作用。

这就是发生在我身上的事情。我的 Sencha Architect UI 设计师设置了面板的最大宽度，我试图`setWidth()`超过最大值。

浪费了一个小时做这么傻的事！:(

# php - 将 Facebook Graph API 日期转换为 UNIX 时间戳

> ID：10417868
> 
> 赞同：6
> 
> 时间：2012-05-02T16:29:13.720
> 
> 标签：php, facebook

如何将 Facebook Graph API 日期转换为 UNIX 时间戳？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-07T18:19:49.143

Facebook 最近添加了一项功能，其中日期/时间将以 Unix 时间戳格式返回，只需将`date_format=U`查询参数添加到 Graph 调用的末尾即可。例如：

```
https://graph.facebook.com/me/events?date_format=U&access_token=..... 
```

这将以 Unix 时间戳格式（例如 1309572000）返回时间/日期。

> 注意：到目前为止，只有时间戳格式的 updated_time 而不是 start_time

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T16:30:46.713

我不知道日期格式，但我怀疑它是通用和/或标准格式，所以[`strtotime()`](http://us3.php.net/manual/en/function.strtotime.php)应该可以正常工作。

```
$timestamp = strtotime('2012-04-24T22:01:00+0000'); 
```

# ruby-on-rails - 在 Rails 应用程序中满足条件时向帐户内的多个用户发送电子邮件

> ID：10417869
> 
> 赞同：0
> 
> 时间：2012-05-02T16:29:19.530
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, actionmailer, ruby-on-rails-3.2

我有一个 Rails 应用程序，当满足某些条件时，我想向用户发送通知。我可以通过 rake 任务来做到这一点。目前，我能够选择符合条件的记录并将它们通过电子邮件发送到特定地址。问题是它发送所有帐户的所有记录。这是我在 rake 任务中的内容：

```
task :send_reminds => :environment do
    equipment = Equipment.where("calibration_date <= ?", Date.today)
    EquipmentMailer.out_of_calibration(equipment).deliver
end 
```

这是我的 EquipmentMailer 的代码：

```
class EquipmentMailer < ActionMailer::Base
  default :from => "mark.odonnell@azzurgroup.com"

  def out_of_calibration(equipment)
    @equipment = Equipment.where("calibration_date <= ?", Date.today)
    mail(:to => "markaodonnell@gmail.com", :subject => "Equipment is out of calibration")
  end
end 
```

这是我的 HTML 电子邮件的代码（按预期工作）：

```
The following Equipment is Due:
<br></br>
<table>
  <tr>
    <th>Equipment Name</th>
    <th>   </th>
    <th>Calibration Due Date</th>
  </tr>
  <% @equipment.each do |equipment| %>
  <tr>
    <td><%= equipment.equipment_id %></td>
    <td>  </td>
    <td><%= equipment.calibration_date %></td>
  </tr>
<% end %>
</table> 
```

如您所见，我将电子邮件直接发送给自己，并收到符合条件的设备列表。但这当然是不可接受的。我希望将电子邮件发送给帐户中具有未校准设备的所有用户。这是我的模型：

设备.rb

```
class Equipment < ActiveRecord::Base
  acts_as_tenant(:account)

  validates :equipment_id, presence: true
  validates :location, presence: true

  validates_uniqueness_to_tenant :serial_number

  has_many :assets, :dependent => :destroy
  accepts_nested_attributes_for :assets, :allow_destroy => true

  has_paper_trail

def self.text_search(query)
    if query.present?
  search(query)
    else
        scoped
    end
end 
```

用户.rb

```
 class User < ActiveRecord::Base
  acts_as_tenant(:account)
  validates_uniqueness_to_tenant :email

   attr_accessible :name, :email, :password, :password_confirmation, :title, :company,
                                    :phone, :mobile,     :admin
  has_secure_password
  before_save :create_remember_token

  belongs_to :account

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                format:     { with: VALID_EMAIL_REGEX }
  validates :password, length: { minimum: 6 }
  validates :password_confirmation, presence: true

#  has_paper_trail

  private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

账户.rb

```
 class Account < ActiveRecord::Base
  attr_accessible :subdomain, :email
  VALID_SUBDOMAIN_REGEX = /\A[\w+\-.]+(-[a-z\d])+(-[a-z\d])/i
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :subdomain, :presence => true, 
            :uniqueness => true
  validates :email, :presence => true,
            format: { with: VALID_EMAIL_REGEX }

  validates_presence_of :plan_id  

  belongs_to :plan

  has_many  :users
  has_many  :equipment, :through => :users

  before_save { |account| account.subdomain = account.subdomain.downcase }
end 
```

我已经为 mail(:to => user.email) 而不是直接地址尝试了类似的方法，同时将设备列表限制为特定于帐户及其用户。

```
@equipment = Equipment.where("calibration_date <= ?", Date.today)  
  @equipment.each do |equipment|
    equipment.accounts.each do |account|
      accounts.users.each do |user|
        user.email.each do |email|
          mail(:to => email, :subject => "Equipment is out of calibration"
        end
      end
    end
  end 
```

rake 任务将毫无错误地运行，但我没有收到任何电子邮件。想法？顺便说一句，我只有大约 1 个月的时间入轨，所以如果我遗漏了一些非常基本的东西，你将不得不原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:47:36.843

我的猜测是问题出在这段代码中

```
def out_of_calibration(equipment)
    @equipment = Equipment.where("calibration_date <= ?", Date.today)
    mail(:to => "markaodonnell@gmail.com", :subject => "Equipment is out of calibration")
  end 
```

您根本没有使用传递给该方法的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:08:12.760

您的关联看起来不正确，看起来帐户应该有_many 设备和帐户应该有_many 用户。用户应该属于_to account，设备应该属于_to account。设备可以属于多个账号吗？没有意义。我建议如下：

```
class Account < ActiveRecord::Base
 has_many :users
 has_many :equipments
end

class User < ActiveRecord::Base
  belongs_to :account
end

class Equipment < ActiveRecord::Base
  belongs_to :account
  has_many :equipments, :through => :account
end

@equipment = Equipment.where("calibration_date <= ?", Date.today)  
  @equipment.each do |equipment|
    equipment.users.each do |user|
      mail(:to => user.email, :subject => "Equipment is out of calibration"
  end
end 
```

# php - Joomla：从模型中调用辅助函数？

> ID：10417870
> 
> 赞同：5
> 
> 时间：2012-05-02T16:29:27.777
> 
> 标签：php, mysql, joomla, joomla1.6, joomla2.5

我从 php 和 Joomla 开发开始，发现在 Joomla 中工作很难做一些相当简单的事情。浏览了 Joomla MVC 示例和 Lynda（到目前为止已经构建了一些简单的视图）。

我有一个帮助文件/类/函数，它输出“已完成”表中存在的所有用户 ID，因此我可以显示基于该用户的新记录的链接或编辑现有用户的记录。

我已经在组件的不同部分成功地使用了这个帮助文件中的不同函数（[Joomla：在组件中编写和调用帮助函数](https://stackoverflow.com/questions/9750718/joomla-write-and-call-a-helper-function-in-a-component)）。

当我在模型中做同样的事情时，我得到这个：“致命错误：从 C:\wamp\www\ilplocal\libraries\joomla\application 中的上下文'JView'调用受保护的方法 JModel::_createFileName() \component\view.php 在第 773 行”。当我在视图中尝试时，效果很好 - 但我需要模型中的输出。

代码：

查找.php

```
abstract class LookupHelper {

    public function other_functions($vars){
        ...
    }

    public function completions_exist() {

        $db =& JFactory::getDBO();            
        $query = $db->getQuery(true);

        $query->SELECT(' #__completed.completed_userid as UserID');
        $query->FROM (' #__completed');
        $query->GROUPBY (' #__completed.completed_userid ');

       $db->setQuery($query);    
       $result = $db->loadResultArray(0); 

       return $result;                        

    }        
} 
```

在模型中：

```
$completions_exist = Jview::loadHelper('lookups'); 
$completions_exist = LookupHelper::completions_exist(); 
```

此行抛出错误：`$completions_exist = Jview::loadHelper('lookups');`

我发现一些非常模糊的引用称为 JLoader::register 以引入辅助函数，但在 Joomla 中找不到任何好的文档，除了每个人都说只使用它。所以我尝试像这样使用它：

```
 JLoader::register('LookupHelper', dirname( JPATH_COMPONENT_ADMINISTRATOR).DS.'helpers'.DS.'lookups.php');
 $completions_exist = LookupHelper::completions_exist(); 
```

引发此错误：“致命错误：在 C:\wamp\path\to\model\not\to\lookups.php 中找不到类 'LookupHelper'。尝试操纵 JLoader::register(这里的所有内容)，但它没有” t 影响错误消息的路径。

想法？为什么它在视图中起作用而不在模型中起作用？如何在模型中使用辅助函数？

谢谢！

＃＃＃＃＃编辑

感谢@cppl，看起来这是第二段代码的路径问题。我还读到了.DS。表示法将在未来的版本中逐步淘汰 - 所以有效的代码是：

```
JLoader::register('LookupHelper', JPATH_COMPONENT_ADMINISTRATOR.'/helpers/lookups.php');
$completions_exist = LookupHelper::completions_exist(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T23:44:16.620

让我们分解一下：

1.  在 Joomla！你的组件帮助文件应该在`/mycomponent/helpers/lookup.php'

2.  `JLoader::`是Joomla！方法来做到这一点，但你可以很容易地使用 PHP 的`require_once`例如。`require_once JPATH_COMPONENT_ADMINISTRATOR.'/helpers/myfunctions.php';`

3.  你的路对吗？- 您正在提供`dirname(JPATH_COMPONENT_ADMINISTRATOR).DS.'helpers'.DS.'lookups.php'`，但您已经包装了组件的路径，[`dirname`其中仅包含路径的父元素](http://php.net/manual/en/function.dirname.php)。`JLoader`往里看也是如此`/administrator/helpers/lookups.php`。

4.  `JPATH_COMPONENT_ADMINISTRATOR`被初始化为 Joomla!`renderComponent()`在其类中的调用的一部分，`JComponentHelper`如果您`dirname`在未设置时应用它，您将返回一个点（即当前目录），因此在模型中您可以传递`./helpers/lookups.php`给`JLoader`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T07:39:46.650

您可以通过以下方法在模型中调用助手：

`JLoader::import('helpers.events', JPATH_COMPONENT);`

这将包括组件目录中的文件 helpers/events.php。

`$_helper = new EventsHelper(); echo $_helper->getAnyInsideMethod();exit;`

# sql-server - 创建表上的 SQL SERVER 2008 触发器

> ID：10417871
> 
> 赞同：2
> 
> 时间：2012-05-02T16:29:28.983
> 
> 标签：sql-server, sql-server-2008

当在 SQL SERVER 2008 的数据库中创建表时，有没有办法运行触发器之类的函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:33:00.737

是的，它被称为 DDL 触发器。的文档[`CREATE TRIGGER`](http://msdn.microsoft.com/en-us/library/ms189799%28v=sql.100%29.aspx)有一个示例`DROP_SYNONYM`（示例的一个非常有问题的选择），但您会想要该`CREATE_TABLE`事件。了解它们如何工作的更好起点可能在这里：

[http://msdn.microsoft.com/en-us/library/ms190989.aspx](http://msdn.microsoft.com/en-us/library/ms190989.aspx)

如果你有更具体的细节，例如你想传递给这个函数的具体内容（我假设你的意思是过程），或者过程做什么，我们可以提供更有用和具体的帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T20:43:47.370

是的，一个 DDL 触发器。例如，这是我为防止某些表被修改而编写的一些代码：

```
PRINT N'Create DDL trigger to prevent changes to various tables'
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TRIGGER NoEditCertainTables ON DATABASE 
    FOR DROP_TABLE, ALTER_TABLE, CREATE_TABLE
AS 

SET CONCAT_NULL_YIELDS_NULL ON

DECLARE @AffectedTable varchar(255) 
SELECT  @AffectedTable = EVENTDATA().value('(/EVENT_INSTANCE/ObjectName)[1]','nvarchar(100)') 

--This is the name of the table(s) you dont want messed with
IF (@AffectedTable IN ('Table1','Table2','Table3'))
BEGIN
    ROLLBACK;
END 
SET CONCAT_NULL_YIELDS_NULL OFF      

GO 
```

# tsql - T-SQL：对两列进行条件排序

> ID：10417872
> 
> 赞同：1
> 
> 时间：2012-05-02T16:29:35.950
> 
> 标签：tsql, sorting

我有一个表 TableA，它看起来像这样：

```
ColA    ColB
0        20
1        10
0        5
1        15 
```

我想对行进行排序，以便首先列出 ColA = 0 的所有记录，然后这些记录按 ColB 升序排序。在列出所有 ColA = 0 的行之后，我想列出所有 ColA = 1 的行，但这些行按 ColB 降序排序。

结果应如下所示：

```
ColA    ColB
0        5
0        20
1        15
1        10 
```

这可能吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:33:04.497

```
select t.ColA, t.ColB
from t
order by t.ColA
   ,case when t.ColA = 0 then t.ColB end asc
   ,case when t.ColA = 1 then t.ColB end desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:33:41.157

```
SELECT ColA,ColB
FROM table
ORDER BY 
 ColA, (CASE WHEN ColA = 1 THEN -1 * ColB ELSE ColB END) 
```

# ios - 我可以从相机中获取任何有用的信息吗？

> ID：10417873
> 
> 赞同：3
> 
> 时间：2012-05-02T16:29:38.800
> 
> 标签：ios, camera, avcapture

我正在使用以下委托方法`AVCaptureVideoDataOutputSampleBufferDelegate`以自定义方式显示来自 iPhone 相机的视频。`UIView`

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
```

我希望能够从图像中提取一些有用的信息，例如曝光、颜色、阈值。

访问此类信息的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:12:40.673

从样本缓冲区中提取元数据附件。您可以在它的元数据中找到曝光、颜色等。像这样的东西：

```
NSDictionary *exifDictionary = (NSDictionary*)CMGetAttachment(sampleBuffer, kCGImagePropertyExifDictionary, NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:12:29.063

您可以使用以下代码访问底层像素数据：

```
CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
CVReturn lock = CVPixelBufferLockBaseAddress(pixelBuffer, 0);
if (lock == kCVReturnSuccess) {
  int w = 0;
  int h = 0;
  int r = 0;
  int bytesPerPixel = 0;
  unsigned char *buffer;      

  if (CVPixelBufferIsPlanar(pixelBuffer)) {
    w = CVPixelBufferGetWidthOfPlane(pixelBuffer, 0);
    h = CVPixelBufferGetHeightOfPlane(pixelBuffer, 0);
    r = CVPixelBufferGetBytesPerRowOfPlane(pixelBuffer, 0);
    bytesPerPixel = r/w;

    buffer = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer, 0);
  }else {
    w = CVPixelBufferGetWidth(pixelBuffer);
    h = CVPixelBufferGetHeight(pixelBuffer);
    r = CVPixelBufferGetBytesPerRow(pixelBuffer);
    bytesPerPixel = r/w;

    buffer = CVPixelBufferGetBaseAddress(pixelBuffer);
  }
} 
```

# java - Process.waitFor() 不等待执行的快捷方式 (.lnk)

> ID：10417879
> 
> 赞同：2
> 
> 时间：2012-05-02T16:30:12.500
> 
> 标签：java, exe, shortcuts, processbuilder

在 Java 中，我想执行一个 .lnk 快捷方式，它自己执行一个 .exe 文件。

我像这样运行可执行文件：

```
 String currentDir = new File(game.getGamePath()).getCanonicalPath();

 ProcessBuilder processBuild = new ProcessBuilder(currentDir);
 processBuild.command("cmd", "/c", "start" , currentDir);
 Process = processBuild.start();
     try {
        Process.waitFor();
     } catch (InterruptedException ex) {
        Logger.getLogger(AuroraLauncher.class.getName()).log(Level.SEVERE, null, ex);
     } 
```

我希望 waitFor() 线程阻塞方法等到实际执行的应用程序（.exe 文件）终止后再继续，而不是快捷方式。有没有办法简单地做到这一点，或者我必须以某种方式从 .lnk 中提取 .exe 路径？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:32:03.973

“开始”启动一个单独的进程，这样你的进程就完成了。但是您可以从 lnk 文件中提取实际的可执行路径。看看[这个帖子](https://groups.google.com/forum/#!msg/comp.lang.java.help/ouFHsH1UgKI/swWk4liq_poJ)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:56:06.403

Windows 命令“开始”有一个选项 /wait 你必须指定告诉他它必须等待进程结束。此代码将一直运行，直到您关闭记事本：

```
 @Test
    public void run() throws IOException {
        String currentDir = new File(System.getProperty("user.home"),"desktop/notepad.lnk").getCanonicalPath();

        ProcessBuilder processBuild = new ProcessBuilder(currentDir);
        processBuild.command("cmd", "/c", "start","/wait", currentDir);
        Process p= processBuild.start();
        try {
            p.waitFor();
        } catch (InterruptedException ex) {

        }
        System.out.println("process terminated!");

    } 
```

比解析 lnk 文件更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:34:03.747

你的代码肯定不会编译。您应该修复它以按预期编译和工作：

```
 Process p = processBuild.start();
 try {
    p.waitFor(); // Ignoring the process result code.
 } catch (InterruptedException ex) {
    Logger.getLogger(AuroraLauncher.class.getName()).log(Level.SEVERE, null, ex);
 } 
```

# xml - XML::Simple & 访问复杂结构

> ID：10417880
> 
> 赞同：-1
> 
> 时间：2012-05-02T16:30:16.330
> 
> 标签：xml, arrays, perl, hash, xml-parsing

我在使用 Perl/XML::Simple 访问 XML 响应中的一些嵌套数据时遇到问题。打印的 XML 回复的摘录如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
<ns1:SelectCmDeviceResponse soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns1="http://schemas.cisco.com/ast/soap/">
<SelectCmDeviceResult xsi:type="ns1:SelectCmDeviceResult">
<TotalDevicesFound xsi:type="xsd:unsignedInt">3</TotalDevicesFound>
<CmNodes soapenc:arrayType="ns1:CmNode[3]" xsi:type="soapenc:Array" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
<item xsi:type="ns1:CmNode">
<ReturnCode xsi:type="ns1:RisReturnCode">NotFound</ReturnCode>
<Name xsi:type="xsd:string">10.186.78.4</Name>
<NoChange xsi:type="xsd:boolean">false</NoChange>
<CmDevices soapenc:arrayType="ns1:CmDevice[0]" xsi:type="soapenc:Array"/>
</item>
<item xsi:type="ns1:CmNode">
<ReturnCode xsi:type="ns1:RisReturnCode">Ok</ReturnCode>
<Name xsi:type="xsd:string">10.186.78.68</Name>
<NoChange xsi:type="xsd:boolean">false</NoChange>
<CmDevices soapenc:arrayType="ns1:CmDevice[2]" xsi:type="soapenc:Array">
<item xsi:type="ns1:CmDevice">
<Name xsi:type="xsd:string">SEPD0574CF73FC0</Name>
<IpAddress xsi:type="xsd:string">10.186.79.41</IpAddress>
<DirNumber xsi:type="xsd:string">51251001-Registered,51251004-Registered,51251002-Registered</DirNumber>
<Class xsi:type="ns1:DeviceClass">Phone</Class>
<Model xsi:type="xsd:unsignedInt">404</Model>
<Product xsi:type="xsd:unsignedInt">303</Product>
<BoxProduct xsi:type="xsd:unsignedInt">0</BoxProduct> 
```

下面是代码，它应该解析响应并返回返回设备的 IpAddress 值：

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dumper;
use XML::Simple;
use LWP;
use SOAP::Lite;

my $cucmip = "10.1.10.1";
my $axl_port = "8443";
my $user = "admin";
my $password = "password";
my $axltoolkit = "http://schemas.cisco.com/ast/soap/action/#RisPort#SelectCmDevice";

sub getDevIp {
    my $message = "<?xml POST message>

    my $url="https://$cucmip:$axl_port/realtimeservice/services/RisPort?wsdl";
    my $ua = LWP::UserAgent->new;
    my $header = new HTTP::Headers (
    'Content-Type' => 'application/xml; charset=utf-8',
    'SOAPAction' => 'http://schemas.cisco.com/ast/soap/action/#RisPort#SelectCmDevice',
    );
    my $req = HTTP::Request->new(POST => $url, $header, $message);
    $req->authorization_basic($user,$password);
    my $response = $ua->request($req);
    my $xs = new XML::Simple(KeyAttr=>[]);
    my $data = $xs->XMLin($response->content);
    print $data->{'soapenv:Body'}->{'ns1:SelectCmDeviceResponse'}->{'SelectCmDeviceResult'}->{'CmNodes'}->{'item'}->[0]->{'CmDevices'}->{'item'}->[0]->{'IpAddress'}->{'content'};
}

getDevIp(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:46:18.077

这基本上就是你所拥有的。

```
$VAR1 = {
    'soapenv:Body' => {
        'ns1:SelectCmDeviceResponse' => {
            'SelectCmDeviceResult' => {
                'CmNodes' => {
                    'item' => [
                        {
                            'xsi:type'  => 'ns1:CmNode',
                            'CmDevices' => {
                                'soapenc:arrayType' => 'ns1:CmDevice[0]',
                                'xsi:type'          => 'soapenc:Array'
                            },
                        },
                    ],
                    # plus some more items with DIFFERENT structure
                },
            },
        },
    },
}; 
```

您正在尝试使用

```
$data->{'soapenv:Body'}
    ->{'ns1:SelectCmDeviceResponse'}
        ->{'SelectCmDeviceResult'}
            ->{'CmNodes'}
                ->{'item'}->[0]                # you probably want ->[1] here! (wild guess)
                    ->{'CmDevices'}
                        ->{'item'}->[0]        # this data does not exist
                            ->{'IpAddress'}    # and this does not exist
                                ->{'content'}; # and this 
```

不存在的值由 perl 在首次访问时创建（这称为自动激活）并初始化`undef`。

这就是你警告的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:40:26.840

您可以尝试[SOAP::Deserializer](http://search.cpan.org/perldoc/SOAP%3a%3aDeserializer)。我无法尝试，因为我无权访问您正在解析的 XML 文档。它返回一个[SOAP::SOM](http://search.cpan.org/perldoc/SOAP%3a%3aSOM)对象。

> `valueof(node)`

```
 $res = $som->valueof('[1]'); 
```

> 当`SOAP::SOM`对象在内部使用 match 方法匹配路径时，此方法允许检索任何匹配节点内的数据。数据作为本地 Perl 数据返回，而不是类实例（参见 dataof）。在标量上下文中，此方法仅返回匹配节点集中的第一个元素。在一个~~大批~~列表上下文，返回所有元素。假设较早的调用发生在较早的 match 调用之后，它会从 $som 中包含的方法响应中检索结果实体，因为这是方法响应标记中的第一个子元素。

# c# - 静态变量值

> ID：10417882
> 
> 赞同：0
> 
> 时间：2012-05-02T16:30:24.123
> 
> 标签：c#, variables, static

我在我的类中声明了一个静态变量：

```
private static DirectoryInfo _extractionFolder; 
```

在某些功能中，我将其更改为：

```
_extractionFolder = new DirectoryInfo(@"C:\TEST"); 
```

然后在几行的相同函数上，我可以再次更改此变量吗？

我正在尝试它，它似乎没有改变。或者是我度过了艰难的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:34:29.760

该代码甚至无法编译-您正在尝试将*字符串*值分配给`DirectoryInfo`变量。

我怀疑发生的事情是您实际上已经声明了一个隐藏字符串变量的*局部*变量，如下所示：

```
private static DirectoryInfo _extractionFolder;

public void Foo()
{
    string _extractionFolder;
    ...
    _extractionFolder = @"C:\TEST"; // Modifies local variable, not static one
} 
```

但是，可变静态变量很少是一个好主意，由于线程问题，需要小心处理对它们的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:32:24.223

> > 还是我今天过得不好？

我认为是艰难的一天 :) 您应该能够像设置任何其他变量一样设置它的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T16:34:16.960

就静态变量而言，您应该能够更改它。您设置的内容或设置变量后的使用方式一定有问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T16:34:54.670

你的意思

```
_extractionFolder = new DirectoryInfo(@"c:\TEST"); 
```

然后您可以访问它的属性，稍后在执行另一个“新”操作后，您可以获得不同目录的信息。那是你想要做的吗？

# html - 如果下面没有空间，则浮动 div

> ID：10417885
> 
> 赞同：2
> 
> 时间：2012-05-02T16:30:40.037
> 
> 标签：html, css

所以假设我有3个div。我希望它们堆叠成列，彼此相邻。在第一列中，前两个 div 适合。现在我想让第三个放在第一个旁边，因为第三个没有空间放在前两个下面。如何才能做到这一点？

![在此处输入图像描述](../Images/61bf797636ccc852f30e2c9956d34b1a.png)

![在此处输入图像描述](../Images/9980028bcf31b4577e5bbd7a6940c82e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:42:24.383

目前，唯一可靠的方法是使用 CSS3 的列。请参阅此处以获取参考：[http ://www.css3.info/preview/multi-column-layout/](http://www.css3.info/preview/multi-column-layout/)

这尚未得到广泛支持（尤其是 IE），因此您可能需要 jQuery 插件 Columnizer 来添加更多支持： [http ://dotmac.rationalmind.net/2011/03/cross-browser-multi-columns-with- jquery-and-css3/](http://dotmac.rationalmind.net/2011/03/cross-browser-multi-columns-with-jquery-and-css3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:47:08.580

**CSS：**

```
 #wrapper{
      width:960px;
      margin:0 auto;
    }
    .mydivs{
    float:left;
    }
    .cl{
       clear:left;
    } 
```

**标记：**

```
 <div id='wrapper'>
    <div class='mydivs'></div>

    <div class='mydivs'></div>

    <div class='mydivs'></div>
    <div class='cl'></div>
</div> 
```

`float:left`你所有的 div，它们将按你想要的位置放置。（如果没有剩余空间，则左对齐并在下一行）

# animation - 带有变换的 CSS3 动画会导致 Webkit 上的元素模糊

> ID：10417890
> 
> 赞同：21
> 
> 时间：2012-05-02T16:31:06.907
> 
> 标签：animation, css, webkit, css-animations

所以我有一些原生元素（`div`s），它们应用了各种效果（`border-radius`和`box-shadow`）`transform: scale()`。当我为它们设置动画时，会发生两件奇怪的事情：

1.  即使我没有尝试为比例设置动画，但如果我不将比例放入动画中，它也会被忽略。
2.  当我将比例放入动画时，Webkit 会模糊元素

请参阅此处的示例：http: [//jsfiddle.net/trolleymusic/RHeCL/](http://jsfiddle.net/trolleymusic/RHeCL/) - 底部的按钮将触发问题。

第一个问题也发生在 Firefox 中，所以我猜这是因为动画规范应该是这样工作的。不是我想要的，但好吧，我会忍受的。

第二个问题很奇怪。我知道这与**3d 变换**有关，因为如果我（仅出于测试目的）声明`-webkit-perspective`或`-webkit-transform-style: preserve-3d;`在圆形元素上，它也会导致模糊问题。我的困惑是我并没有尝试转换 z 索引，而且我也尝试过使用纯粹`translateY`而不是`translate`.

它发生在 Chrome (18)、Chrome Canary (20) 和 Safari (5.1.2 & 5.1.4) 中。

那么，我认为正在发生的事情是对的吗？我怎样才能避免模糊？

最坏的情况：我可以为元素使用不同的大小而不是缩放它们，这不是一个真正的问题 - 但我认为这将是一个更优雅的解决方案，现在这个问题已经出现了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-02T16:35:15.060

请参阅此答案，了解为什么它会模糊元素：[https ://stackoverflow.com/a/4847445/814647](https://stackoverflow.com/a/4847445/814647)

**以上总结：** WebKit 在动画之前采用原始尺寸/CSS，并将其视为图像，然后将其放大，产生模糊。

**解决方案：**使初始大小成为您要达到的最大比例，并以较低的比例开始（因此在您的情况下，您希望将大小增加 5，并将初始比例设置为 0.2）

**更新**

据我了解，它忽略当前比例的原因是因为您没有专门设置只是翻译（我现在正在查找它的 CSS）。当你运行时`-webkit-animation`，它会重置你当前的所有变换（比例），所以你需要确保你有你的比例。我正在查找要更改的 css，因此它只会更改位置：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T16:40:38.720

我发现最好的方法是等待动画完成，然后将变换直接应用于元素并删除动画类。像这样的东西对我有用，不会产生任何故障：

```
$m.bindOnce($m('win-text'), 'webkitAnimationEnd', function(){ //avoid blurred problem with animating scale property in webkit
    $m('win-text').style.webkitTransform = 'scale(1.5) translateY(-60px)';
    $m.removeClass($m('win-text'), 'final');
}); 
```

我使用的库与 jQuery 不同，但你明白了。

# actionscript-3 - Adobe Air 和 Dropbox

> ID：10417898
> 
> 赞同：0
> 
> 时间：2012-05-02T16:31:37.250
> 
> 标签：actionscript-3, apache-flex, air, dropbox, playbook

我正在尝试使用 flashbuilder 4.6 中的 adobe air 将 dropbox 集成到我的 BB Playbook 应用程序中。我从[http://code.google.com/p/dropbox-as3/wiki/EXAMPLES](http://code.google.com/p/dropbox-as3/wiki/EXAMPLES)获得了 API，我也在使用该示例。

```
public function getRequestToken():void
{
    dropAPI.requestToken();
    var handler:Function = function (evt:DropboxEvent):void
    {
            dropAPI.removeEventListener(DropboxEvent.REQUEST_TOKEN_RESULT, handler);
            var obj:Object = evt.resultObject;
            reqTokenKeyLabel.text = obj.key;
            reqTokenSecretLabel.text = obj.secret;
            // goto authorization web page to authorize, after that, call get access token 
            if (oauthRadioBtn.selected) {
                    Alert.show(dropAPI.authorizationUrl);
            }
    };
    dropAPI.addEventListener(DropboxEvent.REQUEST_TOKEN_RESULT, handler);
    if (!dropAPI.hasEventListener(DropboxEvent.REQUEST_TOKEN_FAULT)) {
            dropAPI.addEventListener(DropboxEvent.REQUEST_TOKEN_FAULT, faultHandler);
    }
} 
```

这按预期执行，但我不知道如何更进一步，我尝试将用户发送到生成的链接并允许应用程序，但获取访问令牌仍然失败。我觉得缺少代码，我的应用程序如何知道访问令牌是什么？当用户允许应用程序时，我不应该从保管箱中取回一些东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:58:06.490

一旦用户在网络浏览器中接受了应用程序，您应该调用此函数以获取访问令牌和密码：

```
public function getAccessToken():void{

    dropAPI.accessToken();
    var handler:Function = function (evt:DropboxEvent):void{
        dropAPI.removeEventListener(DropboxEvent.ACCESS_TOKEN_RESULT, handler);
        var obj:Object = evt.resultObject;
        myAccessToken = obj.key;
        myAccessSecret = obj.secret;
    };
    dropAPI.addEventListener(DropboxEvent.ACCESS_TOKEN_RESULT, handler);
    if (!dropAPI.hasEventListener(DropboxEvent.ACCESS_TOKEN_FAULT)) {
        dropAPI.addEventListener(DropboxEvent.ACCESS_TOKEN_FAULT, faultHandler);
    }
} 
```

拥有它们后，您可以保存它们以备将来使用。之后，您就与 Dropbox 建立了连接。

我希望这能帮到您

# cocoa - NSImage 上的 NSScrollView 和 ScrollToPoint

> ID：10417899
> 
> 赞同：1
> 
> 时间：2012-05-02T16:31:42.077
> 
> 标签：cocoa, nsimage, nsscrollview

我有一个 NSView 作为 NSScrollView 的 documentView。我还有一个 NSImageView 作为 NSView 的子视图。图像动态改变大小，因此滚动条在不同时间变为活动/不活动。图像更改后，我想滚动到图像上的某个点。在 NSView 的 drawRect: 方法中，我调用 [[myScrollView contentView] scrollToPoint: myPoint];

滚动条会更新，图像会按我的意愿显示，但是一旦滚动图像，就会出现双图像或图像的一部分被截断。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:24:14.397

`NSScrollView`听起来您可能想在 Interface Builder 中或以编程方式关闭“滚动时复制”行为选项。

来自[Mac OS X 的滚动视图编程指南：滚动的工作原理](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/NSScrollViewGuide/Articles/Basics.html#//apple_ref/doc/uid/TP40003461-SW10)：

> 该类通过该方法`NSClipView`提供低级滚动支持 。`scrollToPoint:`此方法转换内容视图边界矩形的原点，并通过复制尽可能多的渲染文档视图来优化重新显示，只要求文档视图绘制新暴露的区域。这通常会提高滚动性能，但可能并不总是合适的。您可以使用作为参数 传递的`NSClipView`方法来关闭此行为。如果您确实保持滚动复制处于活动状态，请确保使用 方法method 而不是.`setCopiesOnScroll:``NO``NSView``scrollPoint:``translateOriginToPoint:`

# ruby-on-rails - Rails：如何对多对多关系进行排序

> ID：10417901
> 
> 赞同：0
> 
> 时间：2012-05-02T16:31:45.433
> 
> 标签：ruby-on-rails, sorting, many-to-many

我在模型用户和图片之间有多对多的关系。这些由一个称为 Picturization 的连接表链接。

如果我获得一张图片的用户列表，即picture.users -> 我如何确保获得的结果是通过创建Picturization 行（即图片与用户关联的顺序）排序的。如果我想按修改顺序获得它，这将如何改变？

谢谢！

**编辑** 也许像

```
picture.users.where(:order => "created_at") 
```

*   但是这个created_at指的是图片化中的created_at

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:48:10.700

在图片化表中有一个类似于**序列**的附加列，并将排序顺序定义为图片化中的默认范围

```
default_scope :order => 'sequence ASC' 
```

如果您想要基于 modified_at 的默认排序顺序，请使用以下默认范围

```
default_scope :order => 'modified_at DESC' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:39:07.480

您可以在 order 方法/子句中指定表名：

```
picture.users.order("picturizations.created_at DESC") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T11:26:49.477

好吧，就我而言，我需要通过中间表中名为 weight 的列对多对多关系进行排序。经过数小时的尝试，我想出了两种解决方案来**对多对多关系进行排序**。

# 解决方案1：在 Rails 方式中

```
picture.users.where(:order => "created_at") 
```

无法返回按 Picturization 的 created_at 列排序的 ActiveRecord::Relation。

我试图在 Picturization 中重写 default_scope 方法，但它不起作用：

```
def self.default_scope
  return Picturization.all.order(weight: :desc)
end 
```

相反，首先，您需要获取已排序的 Picturization 的 id：

```
ids = Picturization.where(user_id:user.id).order(created_at: :desc).ids 
```

然后，您可以使用[MySQL 字段 functin获取排序的对象](https://www.electrictoolbox.com/mysql-order-specific-field-values/)

```
picture.users.order("field(picturizations.id, #{ids.join(",")})") 
```

生成 SQL 如下所示：

```
SELECT `users`.* 
FROM `pictures` INNER JOIN `picturizations` 
ON `pictures`.`id` = `picturizations`.`picture_id` 
WHERE `picturizations`.`user_id = 1#for instance 
ORDER BY field(picturizations.id, 9,18,6,8,7)#for instance 
```

# 解决方案2：以原始 SQL 方式

您可以通过使用**order by** function 直接得到答案：

```
SELECT `users`.* 
FROM `pictures` INNER JOIN `picturizations` 
ON `pictures`.`id` = `picturizations`.`picture_id` 
WHERE `picturizations`.`user_id = 1

order by picturizations.created_at desc 
```

# ios - 使用默认对话框将图像上传到 Facebook

> ID：10417903
> 
> 赞同：0
> 
> 时间：2012-05-02T16:31:50.830
> 
> 标签：ios, facebook, dialog

我正在尝试使用 Facebook 的 iOS SDK 将图像上传到 Facebook。

要上传图片，我正在执行以下操作：

- 将图像上传到私人服务器以获取图像 URL。- 使用“提要”打开 facebook 对话框，以便将评论上传到 facebook 墙。

我的目标是避免使用私人服务器上传图片并获取 URL，以便直接从 iPhone 将图片上传到 Facebook。

我一直在谷歌搜索，发现了几种将图像直接上传到 facebook 的解决方案，但没有使用包含 SDK 的默认对话框。

有什么方法可以使用 FB 对话框对象直接从设备上传图像？不是让我用视图替换对话框的选项。

提前致谢。

到目前为止，这是我在 facebook 上发布的代码：

```
+(void)composeFacebookWithImageUrl:(NSString *)imageURL image:(UIImage *)image delegate:(id)delegate
{

    Facebook *_facebook;
    _facebook = [[[Facebook alloc] initWithAppId:kAppId andDelegate:delegate] autorelease];

    SBJSON *jsonWriter = [[SBJSON new] autorelease];

    NSDictionary* actionLinks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:
                                                           @"Always Running",@"text",@"http://itsti.me/",@"href", nil], nil];

    NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];

    NSDictionary* attachment = [NSDictionary dictionaryWithObjectsAndKeys:
                                @"Ragdoll", @"name",
                                @"The Ragdoll maker app", @"caption",
                                @"Share with your friends", @"description",
                                @"http://www.im2.es/", @"href", nil];

    NSString *attachmentStr = [jsonWriter stringWithObject:attachment];

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Share on Facebook",  @"user_message_prompt",
                                   actionLinksStr, @"action_links",
                                   attachmentStr, @"attachment",
                                   @"touch",@"display",
                                   imageURL, @"picture",
                                   nil];

    [_facebook dialog:@"feed"
            andParams:params
          andDelegate:delegate];

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:34:31.420

你看过 ShareKit 吗？我正在使用它在我的应用程序中共享图像，并且效果很好。

[https://github.com/ShareKit/ShareKit](https://github.com/ShareKit/ShareKit)

# cxf - apache骆驼请求响应以及如何路由到下一个变压器

> ID：10417904
> 
> 赞同：0
> 
> 时间：2012-05-02T16:31:52.060
> 
> 标签：cxf, apache-camel

路由的概念在理论上很好，但在实践中，我有点困惑。我的网络服务中有一个 CXF 方法

```
public Response someMethod(Request r) {
} 
```

我没有得到的是我需要将请求路由到另一个节点所以我真的应该在java代码中这样做还是骆驼会生成一个接口（希望是异步的）我可以将该节点连接到某个变压器到下一个节点验证器到某个存储和转发等，然后最终获得存储和转发回复，并带有一个响应，该响应以某种方式发送出请求最初来自的套接字。

在上述方法中，我被迫在该方法中将响应返回给客户端，对吗？

如果我应该将代码放在 webservices 方法中，是否应该调用一些骆驼上下文？

此外，我想要 SOAP 方法调用的“RAW”参数并且不想处理 SOAP 标头，然后还需要公开一些仅接受字符串的 REST api。

编辑：下面答案中的代理示例是我见过的最接近的示例，但即使我想走捷径，甚至不想在管道中的较早节点调用真正的 Web 服务，我也做不到。我似乎不得不调用不需要的最终 Web 服务代码，因为我们没有任何 Web 服务代码。我们正在尝试通过 web 服务调用中的现有 pojo 运行它。如果验证节点失败，我们想要返回响应，如果成功，我们想要将请求转发到另一个节点，如果该节点失败，我们返回响应，或者如果成功，我们想要转发请求。这个好像没什么？？？此外，这对我来说似乎是一个非常典型的案例，所以我很惊讶，或者我没有得到所有这些 ESB 框架（到目前为止，mule、camel）的东西。

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:54:21.927

从来没有解决，我们放弃了骆驼，因为与滚动自己的骆驼相比，它相当痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:14:27.327

[看看这个官方示例，它将展示如何执行此操作](http://camel.apache.org/cxf-example.html) [或者如果您想要 RAW 请求，请查看这个 Cxf 代理示例](http://camel.apache.org/cxf-proxy-example.html)

如果您已经在 Spring MVC webapp 中 - 您可以使用 Spring WS 和 Jaxb 更轻松地做到这一点。但这是一个品味问题。[示例代码在这里](http://svn.apache.org/viewvc/camel/trunk/examples/camel-example-spring-ws/)

# delphi - Windows Server 2008 R2 上的旧版 DCOM 服务器

> ID：10417905
> 
> 赞同：4
> 
> 时间：2012-05-02T16:31:52.460
> 
> 标签：delphi, windows-server-2008-r2, dcom

我有一个用 Delphi v6 编写的旧版 DCOM 服务器和客户端应用程序。DCOM 服务器当前配置为运行一次并为所有客户端提供服务。它运行一次的主要原因是服务器为帐户应用程序提供了一个接口，并且必须登录并且对于给定的用户名只能执行一次。

我们的客户现在想要将他们的服务器升级到 Windows Server 2008 R2，让客户端继续使用 Windows XP，但我无法复制当前的设置。

我可以在测试台上工作的当前设置有点奇怪！

1.  我必须配置 DCOM 设置以允许远程启动，否则我在客户端上被拒绝访问
2.  如果 DCOM 服务器尚未运行，当客户端尝试连接到它时，服务器执行失败。
3.  如果服务器正在运行并且启动权限设置为允许远程启动，则客户端会启动 DCOM 服务器的新实例，而不是使用已启动的实例。这会导致帐户应用程序出现问题，因为同一用户尝试登录是不允许的。
4.  如果我关闭服务器上运行的 DCOM 服务器，客户端会愉快地使用它自己的实例。我看不到 DCOM 服务器主窗体，因为它在后台运行（可以在任务管理器中看到）

我找到了各种与这个问题有关的文章，但到目前为止没有任何效果。其中包括以管理员身份运行 DCOM 服务器、不以管理员身份运行 DCOM 服务器、允许 COM+ 在防火墙中、将 DCOM 服务器添加到防火墙、位于 SysWOW64 中的 DCOM 服务器、使用 32 位版本的 DCOMCNFG 等。

现在不知道去哪里了...

谢谢你的帮助

西蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:52:49.343

DCOM 默认权限在 XP SP2 和 2003 SP1 中已更改。您需要正确配置以使您的服务正常运行。通常，除非您在服务中实现 DCOM 服务器（由于 DCOM 支持有限，Delphi 不允许这样做），否则 DCOM 服务器会在用户连接时启动，这就是您可能需要“远程启动”权限的原因。此外，DCOM 服务器可以在给定用户、交互式用户（远程客户端必须避免！）或启动用户的上下文中启动。你用的是什么模式？- 如果设置为“启动用户”，它将始终创建一个新实例。在新操作系统之前，您的服务器是如何实例化的？它的类工厂是如何实现的？有关 DCOM 和 Delphi 实现的一些有趣信息，请参见[此处。](http://www.aldyn.ru/articles/dcom_in_service/index.html)

顺便提一句：

*   除非确实需要，否则永远不要以管理员权限运行您的 DCOM 服务器。否则，您可以创建一个安全漏洞。
*   如果存在防火墙，则 RPC 端点端口和为 DCOM 配置的端口都必须对调用客户端开放。
*   不要将系统目录与您的应用程序混淆。没有必要，如果您的应用程序只在那里工作，那么您的权限配置错误，并且您将无法正确解决它，将文件放在不属于它们的位置。

# java - 将字体导入 GUI

> ID：10417907
> 
> 赞同：1
> 
> 时间：2012-05-02T16:32:00.147
> 
> 标签：java, swing, user-interface, fonts, awt

除了摆动似乎附带的基本 5 之外，我正在尝试更改我的 GUI 的字体。如何导入字体并在我的代码中实际使用它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:46:51.013

默认情况下通常有 5 个以上可用，但它们会因系统而异。这个答案检查了现有字体，以及如何加载和注册新字体。

它使用可从[下载免费字体](http://www.webpagepublicity.com/free-fonts.html)（通过热链接 URL 获得）获得的“Airacobra Condensed”字体。应用程序 Jar 中的字体。也可以通过 URL 访问。

![注册字体](../Images/03783e3b304d85575780e28388d092cf.png)

```
import java.awt.*;
import javax.swing.*;
import java.net.URL;

class LoadFont {
    public static void main(String[] args) throws Exception {
        // This font is < 35Kb.
        URL fontUrl = new URL("http://www.webpagepublicity.com/" +
            "free-fonts/a/Airacobra%20Condensed.ttf");
        Font font = Font.createFont(Font.TRUETYPE_FONT, fontUrl.openStream());
        GraphicsEnvironment ge = 
            GraphicsEnvironment.getLocalGraphicsEnvironment();
        ge.registerFont(font);
        JList fonts = new JList( ge.getAvailableFontFamilyNames() );
        JOptionPane.showMessageDialog(null, new JScrollPane(fonts));
    }
} 
```

* * *

好的，这很有趣，但是这个字体实际上是什么样子的？

![显示字体](../Images/4a06a0e6bd0c8d15de3258260c95719e.png)

```
import java.awt.*;
import javax.swing.*;
import java.net.URL;

class DisplayFont {
    public static void main(String[] args) throws Exception {
        URL fontUrl = new URL("http://www.webpagepublicity.com/" +
            "free-fonts/a/Airacobra%20Condensed.ttf");
        Font font = Font.createFont(Font.TRUETYPE_FONT, fontUrl.openStream());
        font = font.deriveFont(Font.PLAIN,20);
        GraphicsEnvironment ge =
            GraphicsEnvironment.getLocalGraphicsEnvironment();
        ge.registerFont(font);

        JLabel l = new JLabel(
            "The quick brown fox jumped over the lazy dog. 0123456789");
        l.setFont(font);
        JOptionPane.showMessageDialog(null, l);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T16:39:02.620

你可以试试这个：

```
Font font = Font.createFont(Font.TRUETYPE_FONT, fontStream); 
```

下一个，

```
GraphicsEnvironment.getLocalGraphicsEnvironment().registerFont(font); 
```

和，

```
new Font("nameOfFont", Font.BOLD, 13) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T15:54:14.373

这是一种加载打包在 jar 文件 + xml 文件中的字体以读取**字体大小、字体名称和字体文件名**的方法：

**1）字体库类：**

```
package be.nicholas.font.loading;

import java.awt.Font;
import java.io.InputStream;
import java.util.HashMap;
import java.util.Map;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

import be.nicholas.font.CustomFont;
import be.nicholas.utils.Logger;
import be.nicholas.utils.Misc;

public class FontLibrary {

    public static Map<String, Font> fonts = null;
    private static Logger logger = Logger.getInstance();

    public FontLibrary() { }

    /**
     * Get the font by it's name.
     * @param fontname the font name
     * @return The font for the given id if it exists.
     */
    public static Font getFont(String fontname)
    {
        Font f = FontLibrary.fonts.get(fontname);
        if(f == null)
        logger.error("Font ("+fontname+") could not be found.");
        return f;
    }

    /**
     * Get the font by it's name and change the fontsize
     * @param fontname the font name.
     * @param fontsize 
     * @return Font
     */
    public static Font getFont(String fontname, int fontsize)
    {
        Font f = FontLibrary.fonts.get(fontname).deriveFont((float) fontsize);
        if(f == null)
        logger.error("Font ("+fontname+") could not be found.");
        return f;
    }

    public static void load() 
    {
        try 
        {
            InputStream fontStream = FontLibrary.class.getResourceAsStream("/data/fonts/fonts.xml");
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(fontStream);
            doc.getDocumentElement().normalize();

            NodeList nList = doc.getElementsByTagName("font");

            fonts = new HashMap<String, Font>();
            logger.error("Starting to load fonts...");
            for (int temp = 0; temp < nList.getLength(); temp++) 
            {
               Node nNode = nList.item(temp);
               if (nNode.getNodeType() == Node.ELEMENT_NODE) 
               {
                  Element fontElement = (Element) nNode;

                  CustomFont f = new CustomFont();
                  f.setName(getTagValue("name", fontElement));
                  f.setFont(CustomFont.load(getTagValue("filename", fontElement), Integer.parseInt(getTagValue("fontsize", fontElement))));
                  f.setSize(Integer.parseInt(getTagValue("fontsize", fontElement)));

                  fonts.put(f.getName(), f.getFont());

                  /**
                   * Calculate percentage
                   */

                  int percent = Misc.getPercentage(fonts.size(), nList.getLength());
                  String msg = percent+"% of fonts loaded("+fonts.size()+" of "+nList.getLength()+")"; 

               }

            }

        } catch (Exception e) {
            logger.error("Error: "+e);

        }
        logger.error("All fonts loaded!"+"("+fonts.size()+" fonts int total).");
        //logger.info(fonts.size()+" = size of fontsmap. -> name ofzo: "+fonts.get("rssmall"));

    }

      private static String getTagValue(String sTag, Element eElement) 
      {
            NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();
            Node nValue = (Node) nlList.item(0);
            return nValue.getNodeValue();
      }

} 
```

**2）自定义字体类：**

```
package be.nicholas.font;

import java.awt.Font;
import java.io.InputStream;

import be.nicholas.font.loading.FontLibrary;
import be.nicholas.utils.Misc;

public class CustomFont {

    public String name;
    public Font fontObject;
    public int size;

    public CustomFont() {
        //super(font);

    }

    public void setFont(Font fontObject)
    {
        this.fontObject = fontObject;
    }

    public Font getFont()
    {
        return this.fontObject;
    }

    public void setName(String name)
    {
        this.name = name;
    }

    public String getName()
    {
        return this.name;
    }

    public void setSize(int size)
    {
        this.size = size;
    }

    public int getSize()
    {
        return this.size;
    }

    public static Font load(String filename,int fontSize)
    {
        InputStream fontStream = CustomFont.class.getResourceAsStream("/be/nicholas/fonts/"+filename);
        if (fontStream != null) 
        {
            try 
            {
                Font labelFont;
                labelFont = Font.createFont(Font.TRUETYPE_FONT, fontStream);
                labelFont = labelFont.deriveFont((float) fontSize);
                return labelFont;

            } catch (Exception e) 
            {
                System.out.println("error " + e);
            }

        } 
        return null;
    }

} 
```

**3）XML结构：**

```
<fonts>
    <font>
        <name>mycustomfontname</name>
        <filename>myfont.ttf</filename>
        <fontsize>16</fontsize>
    </font>
    <font>
        <name>champagne</name>
        <filename>ChampagneAndLimousines.ttf</filename>
        <fontsize>50</fontsize>
    </font>
</fonts> 
```

**4）加载字体：**

```
JLabel label = new JLabel('testText');
//load it with the default given font size
label.setFont(FontLibrary.fonts.get("mycustomfontname"));
//load a font with a custom font size:
label.setFont(FontLibrary.fonts.get("mycustomfontname").deriveFont(22)); 
```

我希望这会有所帮助:)......我是一个真正的java新手，我在玩java的第5天做了这个，所以它远非完美，但它会完成这项工作

# javascript - 将 IP 地址拆分为八位字节，然后对每个八位字节进行一些数学运算

> ID：10417908
> 
> 赞同：1
> 
> 时间：2012-05-02T16:32:04.057
> 
> 标签：javascript

我实际上有这个工作，但它非常丑陋，它让我夜不能寐，试图想出一段雄辩的代码来完成它。

我需要获取一系列代表 IP 范围的字符串，并确定该字符串将代表多少个实际 IP 地址。我的方法是将其拆分为 4 个八位字节，然后尝试拆分每个八位字节并从那里进行数学运算。

eg：1.2.3.4-6代表1.2.3.4、1.2.3.5和1.2.3.6，所以我想从这个范围内得到3的答案。

更复杂的是，我开始使用的字符串可以是文本框中的此类范围列表，由换行符分隔，因此我需要单独查看每一行，获取表示的 IP 地址的计数，最后，如何许多提交的范围都有这种情况。

```
1.1.1.4-6     /* Represents 3 actual IP Addresses, need to know "3" */
2.2.3-10.255  /* Represents 8 actual IP Addresses, need to   know "8" */
3.3.3.3       /* No ranges specified, skip this
4.4.4.4       /* No ranges specified, skip this 
```

最终结果是我想知道的是 2 行包含一个“范围”，它代表 8 个 IP 地址（3+8）

我的睡眠时间表将不胜感激任何雄辩的解决方案。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:42:45.693

[你去：](http://jsfiddle.net/JQWD9/)

```
var ips = ["1.2.3.4", "2.3.4-6.7", "1.2.3.4-12"];
for(var i=0; i<ips.length; i++) {
    var num = 1;
    var ip = ips[i];
    var parts = ip.split('.');
    for(var j=0; j<parts.length; j++) {
        var part = parts[j];
        if(/-/.test(part)) {
            var range = part.split('-');
            num *= parseInt(range[1]) - parseInt(range[0]) + 1;
        }
    }
    alert(ip + " has " + num + " ips.");
}​ 
```

此代码还可以`1.2.3-4.0-255`正确处理范围（即该范围内的 256*2=512 ips）。没有范围的列表项总共产生 1 个 ip，`num`如果您不需要它们，您可以根据结果忽略它们。

您可能需要稍微修改我的示例，但我相信您这样做不会有任何麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:45:54.633

好的，这就是我的做法

```
var addr = '1.1.3-10.4-6';

function getNumAddresses(input) {
    var chunks = input.split('.');
    var result = 1;

    for (var i = 0; i < 4; i++) {
        if (chunks[i].indexOf('-') != -1) {
            var range = chunks[i].split('-');
            result *= parseInt(range[1]) -  parseInt(range[0]) + 1;
        }
    }

    return result;
}

alert(getNumAddresses(addr)); 
```

# r - 重塑矩阵 - 一列中的多列

> ID：10417910
> 
> 赞同：1
> 
> 时间：2012-05-02T16:32:05.577
> 
> 标签：r, matrix, reshape

我有一个看起来像这样的矩阵：

```
SNP     G1      G2      G3
marker1 TT      CC      TT
marker2 AA      AA      AA
marker3 TT      TT      TT 
```

我希望它看起来像这样：

```
SNP     
>marker1    TT  G1
>marker2    AA  G1
>marker3    TT  G1
>marker1    CC  G2
>marker2    AA  G2
>marker3    TT  G2
>marker1    TT  G3
>marker2    AA  G3
>marker3    TT  G3 
```

我正在使用这个：

```
 bsp2<- read.table("C:/R/bsp2.csv", header=TRUE) 

       reshape(as.data.frame(bsp2), direction="long", varying = list(colnames(bsp2)
       [2:6]), v.names="G", idvar="SNP") 
```

但我收到错误消息“选择了未定义的列”。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T16:40:12.817

`melt`从**reshape2**使用这将更容易：

```
dat <- read.table(text = "SNP     G1      G2      G3
marker1 TT      CC      TT
marker2 AA      AA      AA
marker3 TT      TT      TT",header = T,sep = "")

require(reshape2)
melt(dat,id.var = "SNP")

      SNP variable value
1 marker1       G1    TT
2 marker2       G1    AA
3 marker3       G1    TT
4 marker1       G2    CC
5 marker2       G2    AA
6 marker3       G2    TT
7 marker1       G3    TT
8 marker2       G3    AA
9 marker3       G3    TT 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T17:24:24.257

虽然 joran 是正确的，但它在底座上进行了重塑，可能更容易融化。

```
bsp2 <- read.table(text="SNP     G1      G2      G3
marker1 TT      CC      TT
marker2 AA      AA      AA
marker3 TT      TT      TT ", header=TRUE)

bsp2.long <- reshape(bsp2, direction="long", varying = 2:4, v.names="G", 
    timevar="TIME", times=paste0("G", 1:3), idvar="SNP")

rownames(bsp2.long) <- seq_len(nrow(bsp2.long))
bsp2.long 
```

产生：

```
 SNP TIME  G
1 marker1   G1 TT
2 marker2   G1 AA
3 marker3   G1 TT
4 marker1   G2 CC
5 marker2   G2 AA
6 marker3   G2 TT
7 marker1   G3 TT
8 marker2   G3 AA
9 marker3   G3 TT 
```

请注意，您需要 R 2,15 才能像我使用的那样工作`paste0`。如果您没有 R2.15 并且不想安装它，请将该参数替换为`times=c("G1", "G2", "G3")`. 此外，我所称`TIME`的不是必需的，因为 R 会这样称呼它，`time`但我这样做是为了表明您可以使用`reshape`.

# rdf - 日常应用中的 RDF、三元组和语义 Web

> ID：10417911
> 
> 赞同：7
> 
> 时间：2012-05-02T16:32:06.207
> 
> 标签：rdf, semantic-web, triples

含糊不清的问题：

1：为什么将近 100% 的应用程序开发人员、应用程序开发社区和文​​献（书籍、教程等）认为您想使用关系数据库或键值存储来表达数据？

2：为什么不是每个人都使用“三重”数据结构？

3：Triples 不是适用于关系数据库和键值存储的所有问题吗？Triples 至少在每种情况下都不是那么容易使用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T18:20:21.503

三元组可以表示任何其他数据结构。但这并不一定会让它们更容易使用。如果你的问题是表格的，那么表格数据结构会更好。使用图数据结构，您需要考虑如何从三元组组成表格，这是额外的工作。

解决大多数问题（尤其是数据形状可预测的简单问题）不需要图形数据结构的灵活性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T16:47:00.230

1.  大多数开发人员使用关系数据库和/或键/值存储，因为它们广为人知、被广泛教授、易于获得并且足以满足大多数开发人员关心的大部分工作。
2.  大多数开发人员几乎没有（如果有的话）使用三元组的理由，除了（可能）用于一些特殊目的（甚至后者也有些不寻常）。
3.  不——当大多数人不理解它们或如何使用它们时，三元组并不是特别容易使用。即使是那些了解它们的开发人员通常也不关心他们提供的东西。

更一般地说，我认为相当多的开发人员很快就会迷失在 RDF、OWL、SKOS、本体、推理引擎等相互纠缠的混乱中。对于那些想：“但我只想要用户的订单历史”（或其他），这一切都只是有点太多了，处理等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T16:36:53.147

我以前也问过自己同样的问题。通常人们将复杂性作为问题。这确实是一个坏习惯，因为我们离开问题的时间越长，它就会变得越糟。语义网是一个复杂问题的复杂解决方案。它没有变得更容易。我还认为将简单性与 RDBMS 进行比较是幼稚的。现在大多数开发人员都熟悉 ORM 并使用抽象的持久性，有些人从未意识到持久性机制。语义 Web (ORDFM) 的持久性框架通常没有那么复杂或进化。话虽如此，许多组织正在远离 RDBMS 并投资于 NoSQL 解决方案，其中 RDF 和 SPARQL 在我看来是最佳候选者。

当人们谈论语义网变得复杂时，我总是指出一个很好的案例研究是 Bart van Leeuwen 的故事：

[http://semtechbizsf2012.semanticweb.com/sessionPop.cfm?confid=65&proposalid=4590](http://semtechbizsf2012.semanticweb.com/sessionPop.cfm?confid=65&proposalid=4590)

如果真正的全职消防员（扑灭真正的火灾）可以使用 SPARQL 和 RDF 代替数据库和专有格式来解决真正的问题（紧急服务中的数据可访问性），那么我们其他人就没有理由不去. 我的观点是，不是技术是障碍，而是其他东西。

# c++ - 在 Qt 中处理退出而不保存

> ID：10417914
> 
> 赞同：1
> 
> 时间：2012-05-02T16:32:08.297
> 
> 标签：c++, qt, user-interface, exit, qdialog

我是一名学生程序员，使用 Qt 构建和应用工作，我在弄清楚如何处理用户退出对话框而不保存更改时遇到了一些困难。该对话框主要用于数据输入，因此能够识别是否已进行更改，然后为用户提供在退出前保存的选项将非常有用。我[在 QDialog 上查看了 Qt 的文档](http://qt-project.org/doc/qt-4.8/qdialog.html#accept)如果按下退出按钮，则没有找到有关返回的模式的任何信息。有一种方法来识别何时单击退出按钮是第一要务。此外，作为一名学生程序员，我也愿意接受任何关于如何比较数据前后的最佳实践的想法。数据被输入到一个表中，所以我猜我必须做这样的事情

```
connect(some kinda exit handler, SIGNAL(clicked), this, SLOT(comparePreAndPostTable)

QVector<QString> prechanges =  everything from the table
QVector<QString> postchanges = everything from table when exit is clicked

if(prechanges != postchanges)
{
     Give oppertunity to save
} 
```

任何帮助表示赞赏！如果 Qt 已经为此提供了一些东西，那就太好了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T16:36:19.287

您需要重写[QWidget](http://qt-project.org/doc/qt-4.8/qwidget.html#closeEvent)`closeEvent()`的方法来处理对话框的退出按钮。该文档甚至给出了一个奇怪地看起来像您正在寻找的示例：

```
 void MainWindow::closeEvent(QCloseEvent *event)
 {
     if (maybeSave()) {
         writeSettings();
         event->accept();
     } else {
         event->ignore();
     }
 } 
```

哪里`maybeSave()`会比较，看看是否有任何变化。

# jquery - 使 JQuery UI Dialog 自动增长 HEIGHT 以适应其内容（宽度保持不变）

> ID：10417915
> 
> 赞同：12
> 
> 时间：2012-05-02T16:32:12.273
> 
> 标签：jquery, jquery-ui

在查看了[Make JQuery UI Dialog automatically grow or shrink to fit its contents](https://stackoverflow.com/questions/756325/how-can-i-make-a-jquery-ui-dialog-automatically-grow-or-shrink-to-fit-its-conten)之后，我`height: "auto"`在构建 jQuery 模态对话框时使用了该选项：

```
$( "#dialog-message" ).dialog({
    autoOpen: false,
    width: "400",
    height: "auto",
    show: "slide",
    modal: true,
    buttons: {
        Ok: function() {
            $( this ).dialog( "close" );
        }
    }
}); 
```

但是，高度不会“增长”以适应所有内容。我仍然看到一个垂直滚动条，如下图所示：

![jQuery 模态对话框图像](../Images/34fbc2b1ab5370c4c565ee5918c8993a.png)

在我列出的定义代码中是否有一种方法可以确保高度增长到足以使垂直滚动条不显示？或者，我是否需要在打开对话框之前以编程方式执行此操作？

**编辑 1**
不知道为什么，但 Chrome 显示这很好，但 IE 8 不是。我需要它专门在 IE 8 中工作，所以我相信我只是要在文本上放置一个底部边距。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-18T17:35:54.373

这就是我为对话框自动增长所做的一切

```
$("#edit_dependent").dialog({

  autoOpen:false,

  modal:true,

  width:800,

  position:["center",20],

  minHeight:"auto"

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:44:28.217

这很奇怪......我不确定这会有多大帮助，但我确实设法让自动高度与以下代码一起使用：

```
<html>
<head>
<link href="jqueryUI/css/ui-lightness/jquery-ui-1.8.19.custom.css" 
    rel="stylesheet" type="text/css">
<script src="jquery-1.7.1.js"></script>
<script src="jqueryUI/js/jquery-ui-1.8.19.custom.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("#dialog").dialog({
    autoOpen: false,
    width: "400",
    height: "auto",
    show: "slide",
    modal: true,
    buttons: {
        Ok: function() {
            $( this ).dialog( "close" );
        }
    }
    });
    $("#dialog").dialog('open');
});
</script>

</head>
<body>
<div id="dialog">
1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />
</div>
</body>
</html> 
```

它基本上使用您已经建立的相同结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T17:37:22.057

这是晚了 4 年，但我有同样的问题。

编写修复它的代码

在你的对话框上放一个独特的类：

```
dialogClass:"someClassName"

$(".someClassName").resize(function () {
    var totalHeight = 0;
    var children = $(".someClassName").children(); //get all divs inside the dialog
    for (var i = 0; i < children.length; i++) {
        if ($(children[i]).innerWidth() > 15) {
            var childrenHeight = children[i].scrollHeight;
            totalHeight += childrenHeight;//make sure your dialog will be the correct height
        }
    }
    $("#idOfContentWithWrongHeight").innerHeight($("#idOfContentWithWrongHeight")[0].scrollHeight);//put the content at the height it should appear
    $(".someClassName").height(totalHeight);//update the height of the dialog
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:39:35.240

这是示例**[演示](http://jsfiddle.net/dJZPV/1/)**

```
 $( "#dialog-message" ).dialog({
        modal: true,
        height: "auto",
                buttons: {
                    Ok: function() {
                        $( this ).dialog( "close" );
                    }
                }

            });
            setTimeout(function() {
            $('#inside').append("Hello!<br>");
            setTimeout(arguments.callee, 1000);
  },1000);​ 
```

# python - 如何让 JPEG 模块在 PIL 中工作

> ID：10417916
> 
> 赞同：0
> 
> 时间：2012-05-02T16:32:12.377
> 
> 标签：python, compression, jpeg, python-imaging-library

我安装了 PIL 和所有 jpeg 依赖项以使用该`jpeg`模块`PIL`

文档：[http ://docs.python.org/library/jpeg.html](http://docs.python.org/library/jpeg.html)

我想使用`jpeg.compress()`那里所述的方法。但是当我安装 PIL 时，我无法找到该`jpeg`模块。

有人可以告诉我如何`jpeg.compress()`在我的脚本中使用该方法。

或者有什么替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:41:23.837

jpeg 模块和 PIL 模块是独立的，相互之间没有联系。该文档将 PIL 列为jpeg的*替代品。*您需要单独安装 jpeg 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:37:23.830

PIL 有时可能是一个难以安装的野兽。它很可能没有使用 libjpeg 配置（正确）。

如果只是没有安装，或者 PIL 没有看到 libjpeg，请看这里：

[Python PIL 找不到我的“libjpeg”](https://stackoverflow.com/questions/1486157/python-pil-cannot-locate-my-libjpeg-simple-installation-issue)

我不确定您正在使用哪个平台，但在构建 PIL 时，每个平台似乎都有自己独特的陷阱。我的建议是试一试“Pillow”，它使 PIL 安装过程更加用户友好：

[http://pypi.python.org/pypi/Pillow](http://pypi.python.org/pypi/Pillow)

在运行 Pillow 安装之前，您只需要安装一个有效的 libjpeg，您就应该参加比赛了。

# django - ImageField 不上传

> ID：10417917
> 
> 赞同：2
> 
> 时间：2012-05-02T16:32:18.427
> 
> 标签：django, django-models, django-file-upload

我一直在尝试实现图像上传以更改个人用户的头像。我现在遇到的问题是它永远不会上传到文件夹。它适用于管理员，但不适用于我创建的模板

**视图.py**

```
if 'avatar_upload' in request.POST:
    avatar_form = UserAvatarForm(request.POST, request.FILES, instance=request.user.get_profile())
    if avatar_form.is_valid():
        avatar_form.save()
        return HttpResponse(request.POST['avatar'])
    return HttpResponse("Failed") 
```

我已经更改了查看输出的代码。我在`POST`. 但我在`request.FILES`. 所以我猜这是那里的问题，到目前为止我还没有发现问题可能是什么。还是其他地方有问题？

**模板***

```
<form action="" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {% for item in avatar_form %}<p>{{ item.label }}: {{ item }}</p>
    {% endfor %}
    <input type="submit" value="Upload avatar" name="avatar_upload">
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T16:42:10.530

你有[`enctype="multipart/form-data"`](http://www.w3.org/TR/html4/interact/forms.html#h-17.13.4.2)在模板中设置表格吗？

# mysql - 查询以避免不同时隙的冲突

> ID：10417918
> 
> 赞同：0
> 
> 时间：2012-05-02T16:32:22.500
> 
> 标签：mysql, performance

我在几个地方寻找过这个，但不一定找到正确的答案。

我正在尝试查询给定时间范围内的可用提供程序。我有一列包含所有带有 date_start 和 date_end 的旧预订。基本上，如果我想进行预订，我需要确保我的供应商可用。到目前为止，查询的工作原理如下：

```
 SELECT a.provider a
      FROM l_provider_zip a 
      (several inner Joins and conditions)
      WHERE a.zip = :zip 

 AND a.provider_id  
 NOT IN (
     SELECT da.provider_id
     FROM booking da
     WHERE da.provider_id IS NOT NULL
       AND (
              ( :start BETWEEN da.date_start AND da.date_end) 
           OR ( :end  BETWEEN da.date_start AND da.date_end) 
           OR ( da.date_start BETWEEN :start AND :end )
           )
) 
```

我担心的是，为了查找是否有可用于新预订的提供商，我需要确保新预订不会与其他预订发生冲突。在这里，我有 3 个条件语句来弄清楚。

1.  :start(of the new booking) BETWEEN da.date_start AND da.date_end
2.  :end(of the new booking) BETWEEN da.date_start AND da.date_end
3.  da.date_start BETWEEN :start AND :end （另一个预订不在新预订的开头或结尾）

这似乎效率很低，但我找不到更好的方法。当然我可以通过索引来提高效率，但是有没有更好的方法来执行这个操作。这是我项目的一个核心问题，我认为这可能是许多人已经面临并将继续面临的问题。再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:49:19.037

如果我理解您的问题，您正在寻找可用于此预订的供应商，即那些没有与此预订冲突的预订的供应商）。因此，要查找与此预订冲突的所有预订，您需要查找预订

```
- where the booking start date is on or before the new booking end date, and
- where the booking end date is on or after the new booking start date 
```

因此，对于您将转换为的子查询

```
 SELECT da.provider_id
 FROM booking da
 WHERE da.provider_id IS NOT NULL
   AND da.date_start <= :end 
   AND da.date_end   >= :start 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:48:25.843

我会将提供者加入到指定日期范围内的预订中，然后排除这些提供者，因为它们已被占用：

```
/* Select all providers */
SELECT *
FROM l_provider_zip p
/* Providers with bookings that start in the middle of our date range are busy */
LEFT JOIN booking b1
  ON b1.provider_id = p.provider_id
  AND b1.date_start BETWEEN :start AND :end
/* Providers with bookings that end in the middle of our date range are busy */
LEFT JOIN booking b2
  ON b2.provider_id = p.provider_id
  AND b2.date_end BETWEEN :start AND :end
/* Exclude those providers with bookings in our date range */
WHERE b1.provider_id IS NULL
  AND b2.provider_id IS NULL 
```

不需要子查询！让我知道您是否需要有关索引的帮助以使该查询执行良好。

# android - ArrayList不填Android

> ID：10417920
> 
> 赞同：0
> 
> 时间：2012-05-02T16:32:33.047
> 
> 标签：android, arraylist

我有一个变量“ekinismi”。当我向它添加字符串时。我使用 EkinIsmi() 方法从另一个活动中收到“eklist”。

```
static List<String> eklist = new ArrayList<String>();

public List<String> EkinIsmi() 
    {
        return eklist;
    } 
```

但是这个列表返回我“null”和我的列表项。但我只想接收列表项。我怎么能用 for 循环或其他东西来做到这一点。Null(s) 不是 String，因此我不能使用 equals 或 compareto 从列表中拆分 null(s)。

此代码示例对我很有用，但如您所见，我将列表项编号赋予“i”。但它必须了解列表的内容。

```
if(ekinismi.size() > 1)
            {
                for(int i=ekinismi.size()-1; i>ekinismi.size()-3; i--)
                dosyaAdi.setText(String.valueOf(ekinismi.get(i)));
            } 
```

![在此处输入图像描述](../Images/005bcd9c84becbe1e21fa177db4e2d45.png)

我单击 position = 0 列表项，然后单击下一个并在`dosyaAdi.setText()`第一个和下一个的 "s" 处设置。我的意思是我需要清除所有列表项。因为它拥有第一个。我应该把它放在哪里`list.clear()`？实际上，我已经这样做了，但它并没有改变任何东西，我想也许我把它放错了方向。

```
List<String> list = new ArrayList<String>();
        if( ekvarmı == true)
        {
            if(ekinismi.size() >= 1)
            {
                for(String s : ekinismi) 
                    {
                       if(s != null) 
                       {
                           list.add(s);
                       }
                    }
                 dosyaAdi.setText(String.valueOf(list));
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:46:41.070

```
for(String s : ekilist) {
   if(s != null) {
       doSomething(s);
   }
} 
```

# c# - 通用委托线程

> ID：10417927
> 
> 赞同：2
> 
> 时间：2012-05-02T16:33:02.747
> 
> 标签：c#, generics, queue

我有一个类 - 在实例化时 - 创建一个后台线程，等待通过 System.Threading.AutoResetEvent 完成工作。当工作可用时，线程将从通用队列中拉出一个对象以进行工作，然后在完成时从该对象调用回调委托。

然而，魔鬼在细节中：为了完成它的工作，线程调用了一个泛型函数，所以线程需要知道一个类型。我可以将队列中的对象定义为接受泛型，但如何定义队列以接受真正泛型的对象，即它的类型可以是任何东西？后台线程如何推断其通用函数调用所需的类型？

示例代码：

```
class GenericItem<T> 
{
  // ... some code ...
}

// somewhere else in code
Queue<GenericItem> myGenericListofItemsToWorkOn; 
```

显然 C# 不喜欢最后一行，因为我试图不指定具体类型，所以我可以执行以下操作：

```
myGenericListofItemsToWorkOn.Enqueue( new GenericItem<string>() );
myGenericListofItemsToWorkOn.Enqueue( new GenericItem<int>() ); 
```

然后我的线程需要执行以下操作：

```
GenericItem obj = myGenericListofItemsToWorkOn.Dequeue(); // How can I reference a generic item here?
Library.Call<...>(...);  // How can I infer the generic type of the item dequeued here? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:34:52.433

你不能做这个。您可以做的是让类`GenericItem<T>`实现一个非泛型接口（或从非泛型基类派生），该接口公开了足够的功能供您使用。然后你就可以拥有

```
Queue<ISomething> myGenericListofItemsToWorkOn; 
```

当您将项目从队列中拉出时，`ISomething`应该为您提供足够的功能来处理每个项目。

**更新：**这是永远行不通的：

```
Library.Call<X>(...); 
```

要进行这样的调用，编译器需要知道是什么`X`，或者因为您明确指定它，或者因为它可以从`...`. 但由于列表包含不同类型的项目，您只能通过`GetType()`. 你不能一边吃蛋糕一边吃；要么`Queue`必须只包含一种类型的对象，要么`Library.Call`不能是“强类型”的。

# c# - EF 不断尝试持久化无效对象

> ID：10417936
> 
> 赞同：2
> 
> 时间：2012-05-02T16:33:44.833
> 
> 标签：c#, asp.net-mvc, entity-framework

我的 MVC 应用程序中的 Entity Framework 4.3 有一个相当奇怪的问题。我在 DbContext 周围使用工作单元包装器，在我的 MVC 应用程序中，我使用 Unity 将此 UOW 传递给我的存储库，并将存储库传递给控制器​​。我已经用`HierarchicalLifetimeManager`.

当我尝试将实体持久保存到引发错误的数据库时，例如数据库引发 UNIQUE 约束冲突，实体将保留在 EF 的`ObjectStateManager`. 因此，当我返回应用程序修复错误并保存新实体（没有错误）时，EF 首先尝试再次添加旧的和无效的对象**，**因此失败并出现相同的错误。

我在这里想念什么？我相信 EF 应该完全忘记无效对象，并且这将自动完成。但显然不是这样。

要将对象添加到 DbContext 以保持它们，调用以下命令（`base`DbContext 在哪里）：

```
base.Set<TEntity>().Add(objectToPersist); 
```

并将更改提交到数据库，我调用：

```
base.SaveChanges(); 
```

这会引发错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:46:57.007

> 我相信 EF 应该完全忘记无效对象，并且这将自动完成。但显然不是这样。

是的，情况并非如此，我从未听说过发生异常时实体会自动从上下文中分离出来。

基本上有两种选择来处理这个问题。我用你的唯一键约束违规示例展示了一个简单的模型：

```
public class Customer
{
    // so we need to supply unique keys manually
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int Id { get; set; }
    public string Name { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<Customer> Customers { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());

        using (var ctx = new MyContext())
        {
            var customer = new Customer { Id = 1, Name = "X" };
            ctx.Customers.Add(customer);
            ctx.SaveChanges();
        }
        // Now customer 1 is in database

        using (var ctx = new MyContext())
        {
            var customer = new Customer { Id = 1, Name = "Y" };
            ctx.Customers.Add(customer);

            try
            {
                ctx.SaveChanges();
                // will throw an exception because customer 1 is already in DB
            }
            catch (DbUpdateException e)
            {
                // customer is still attached to context and we only
                // need to correct the key of this object
                customer.Id = 2;
                ctx.SaveChanges();
                // no exception
            }
        }
    }
} 
```

以上是首选解决方案：更正附加到上下文的对象。

如果您需要 - 无论出于何种原因 - 创建一个新对象，您必须将旧对象从上下文中分离出来。该对象仍处于状态，当您调用导致与以前相同的异常`Added`时，EF 将尝试再次保存该对象。`SaveChanges`

分离旧对象如下所示：

```
 try
            {
                ctx.SaveChanges();
                // will throw an exception because customer 1 is already in DB
            }
            catch (DbUpdateException e)
            {
                ctx.Entry(customer).State = EntityState.Detached;
                // customer is now detached from context and
                // won't be saved anymore with the next SaveChanges

                // create new object adn attach this to the context
                var customer2 = new Customer { Id = 2, Name = "Y" };
                ctx.Customers.Add(customer2);
                ctx.SaveChanges();
                // no exception
            } 
```

如果涉及关系，此过程可能会很棘手。例如，如果`customer`与订单列表有关系，`customer`如果订单也附加到上下文，则分离对象将删除客户与其订单之间的引用。你必须重新建立与新的关系`customer2`。

因此，我更愿意修改附加对象以使其处于正确状态。或者让应用程序崩溃，因为这种违反约束通常表明代码中有错误，或者 - 在多用户环境中 - 应该使用适当的乐观并发检查来处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:39:40.897

看起来你必须告诉 EF 你改变了对无效对象的想法：

base.Set().Remove(objectToPersist);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T22:29:38.333

如果要重置更改，可以将 ObjectContext 设置为 null 并重新实例化它。

# performance - 加速numpy矩阵逆

> ID：10417937
> 
> 赞同：4
> 
> 时间：2012-05-02T16:33:46.043
> 
> 标签：performance, numpy, matrix, linear-algebra, matrix-inverse

我正在使用 Numpy/Scipy 反转 20k 矩阵，它很慢。我试过了：

```
(1) M_inv = M.I

(2) Ident = np.Identity(len(M))
    M_inv = scipy.linalg.solve(M, Ident)

(3) M_inv = scipy.linglg.inv(M) 
```

但没有看到任何加速。

有没有其他方法可以加快速度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T16:47:38.227

这是一个大矩阵，反转它会很慢。一些选项：

*   使用与 Intel MKL 链接的 numpy（例如 Enthought 发行版，或者您可以自己编译），这应该比与标准 BLAS/ATLAS 链接的更快。
*   如果您的矩阵足够稀疏，请使用`scipy.linalg.sparse`. （不过，如果只有几个零，这可能会更慢。）
*   弄清楚你是否真的需要一个反转矩阵的显式表示来做你想做的任何事情——通常你可以在不显式反转它的情况下逃脱，但是如果不知道你是什么就很难说用这个矩阵做。

# r - 尝试读取 CSV 文件时出现“无法识别的字符串中的转义”

> ID：10417938
> 
> 赞同：9
> 
> 时间：2012-05-02T16:33:48.270
> 
> 标签：r, import

我正在尝试导入一个`.csv`文件，以便我可以跟随这个视频：[R ggplot2 Graphics Histograms](http://www.youtube.com/watch?v=47kWynt3b6M)。

我安装了所有正确的软件包，包括`ggplot`和相关的软件包。视频中的第一条指令说要输入`afl.df=read.csv("afl_2003_2007.csv")`

因此，我下载`afl_2003_2007.csv`了文件，并尝试了以下所有方法，基本上是将文件放在不同的目录中（共享驱动器，然后是 C 驱动器等）。我也尝试过使用`setwd`，但没有运气。

我在 Windows 中使用 R。

这是我尝试过的，以及我得到的错误：

```
> afl.df=read.csv("afl_2003_2007.csv")
Error in file(file, "rt") : cannot open the connection
In addition: Warning message:
In file(file, "rt") :
  cannot open file 'afl_2003_2007.csv': No such file or directory
> afl.df=read.csv("\\the-lab.llnl.gov\llnlusers1\lopez235\Data\Documents\Dashboards,HRBI, Visulizations and Analytics\Math and Statistics and Predictive Modeling1\R Programming\afl_2003_2007.csv")
Error: '\l' is an unrecognized escape in character string starting "\\the-lab.llnl.gov\l"
> afl.df=read.csv("C:\Users\lopez235\Local-NOTBackedUp\R Files Local\afl_2003_2007.csv")
Error: '\U' used without hex digits in character string starting "C:\U"
> setwd("\\the-lab.llnl.gov\llnlusers1\lopez235\Data\Documents\Dashboards,HRBI, Visulizations and Analytics\Math and Statistics and Predictive Modeling1\R Programming\afl_2003_2007.csv")
Error: '\l' is an unrecognized escape in character string starting "\\the-lab.llnl.gov\l"
> setwd("\\the-lab.llnl.gov\llnlusers1\lopez235\Data\Documents\Dashboards,HRBI, Visulizations and Analytics\Math and Statistics and Predictive Modeling1\R Programming")
Error: '\l' is an unrecognized escape in character string starting "\\the-lab.llnl.gov\l"
> setwd("C:\Users\lopez235\Local-NOTBackedUp\R Files Local")
Error: '\U' used without hex digits in character string starting "C:\U" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-02T18:33:10.833

在你的路径中使用`/`而不是：`\`

```
afl.df=read.csv("C:/Users/lopez235/Local-NOTBackedUp/R Files Local/afl_2003_2007.csv") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-30T10:10:37.930

当遇到导入数据集的问题时，我更喜欢使用 file.choose() 然后手动选择我的文件。例如 ：

```
newdataset <- read.csv(file.choose(), header = T) 
```

将弹出一个要求您手动选择文件的窗口，并且 header = T（或 TRUE）告诉 R 这些是变量名称。如果您有数据写入标头 = FALSE。如果您想确认现在 R 知道您可以调用哪些变量名称：names(newdataset)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T05:57:26.717

您可以使用`\\`代替`\`

```
afl.df=read.csv("C:\\Users\\lopez235\\Local-NOTBackedUp\\R Files Local\\afl_2003_2007.csv") 
```

# entity-framework - 来自配置类的脚本 EF 迁移种子

> ID：10417939
> 
> 赞同：26
> 
> 时间：2012-05-02T16:33:58.110
> 
> 标签：entity-framework, entity-framework-migrations

我的 EF 迁移运行良好，但我还想为我的 DbMigrationsConfiguration 类中的种子数据生成 sql 脚本。当我执行 Update-Database 时，种子数据运行正常，但是当我执行 UpdateDatabase -Script 时，我没有得到种子插入的 sql。我在正常的 Update-Database 上尝试了 -Verbose，但我也没有看到种子语句在那里输出。

这可能吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-03T08:23:18.133

不，这是不可能的。配置类不是迁移本身的一部分——它是执行迁移的基础设施。您的所有迁移都有一个配置类，并且`Seed`在每次迁移运行后执行其方法 - 您甚至可以使用上下文来播种数据，因此此方法在迁移完成后执行=它不能成为迁移的一部分。只有迁移类的内容是脚本化的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-30T18:34:10.827

另一个解决方案/解决方法是让 SSMS 为您生成脚本：

1) 从您的 DB 初始化程序和种子方法生成的干净数据库开始。确保您想要编写脚本的数据在那里。

2) 使用 SSMS，右键单击数据库，转到任务 >“生成脚本...”，然后按照向导进行操作。在高级选项下，确保为“脚本的数据类型”选择“仅数据”。

3) 从生成的脚本中，将所需的种子语句复制到您的目标脚本中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-19T12:28:43.393

我知道这是一个旧线程，但是，这是一个可以帮助其他人寻找答案的答案。

您可以使用实体框架提供的 Migrate.exe。这将允许您在数据库上下文中运行 Seed 方法。

如果您需要运行特定的 Seed 方法，可以将其放在单独的迁移配置文件中，如下所示：

```
Enable-Migrations -MigrationsDirectory "Migrations\ContextA" -ContextTypeName MyProject.Models.ContextA 
```

命令：

```
Migrate.exe MyAssembly CustomConfig /startupConfigurationFile=”..\web.config” 
```

在 NuGet 包目录中查找它：“..\packages\EntityFramework.6.1.3\tools”

您可以将迁移配置指定为它的参数。应该包含您的`CustomConfig`基于代码的 Seed 方法。因此，通过这种方式，您不需要从迁移中生成 SQL 脚本。

更多信息在这里：

[http://www.eidias.com/blog/2014/10/13/initialcreate-migration-and-why-is-it-important](http://www.eidias.com/blog/2014/10/13/initialcreate-migration-and-why-is-it-important)

[http://www.gitshah.com/2014/06/how-to-run-entity-framework-migrations.html](http://www.gitshah.com/2014/06/how-to-run-entity-framework-migrations.html)

使用此解决方案，您无需生成 SQL 脚本，并且可以针对不同环境运行多个 Seed。

# c# - 如何使用 ReadAsAsync 使用此数据架构？

> ID：10417942
> 
> 赞同：1
> 
> 时间：2012-05-02T16:34:06.790
> 
> 标签：c#, rest, dotnet-httpclient

我正在使用 System.Net.Http.HttpClient（[目前在 NuGet](http://nuget.org/packages/HttpClient)中可用的版本）从 json 格式的服务中检索数据。数据大致如下：

```
{
  "schema": "Listing",
  "data": {
    "key": "28ba648c-de24-45d4-a7d9-70f810cf5438",
    "children": [{
      "kind": "type1",
      "data": {
        "body": "Four score and seven years ago...",
        "parent_id": "2qh3l",
        "report_count": 0,
        "name": "c4j6yeh"
      }
    }, {
      "kind": "type3",
      "data": {
        "domain": "abc.def.com",
        "flagged": true,
        "category": "news",
        "saved": false,
        "id": "t3dz0",
        "created": 1335998011.0
        }
    }]
  }
} 
```

我用来[`HttpContentExtensions.ReadAsAsync<T>`](http://msdn.microsoft.com/en-us/library/hh836073%28v=vs.108%29.aspx)将该 json 字符串反序列化为对象图。类型定义大致如下：

```
public class Response
{
    public String schema { get;set; }
    public ListingData data { get;set; }
}

public class ListingData
{
    public string key { get;set; }
    public List<OneItem> children { get;set; }
} 
```

问题是：我希望物品的类型`children`因`kind`物业而异。如果`kind`是“type1”，那么我想反序列化一个对象......让我们称之为`Type1`。如果`kind`是“type3”那么我想要一个类型的对象`Type3`。

现在，我可以反序列化 a`List<Type1>`或 a `List<Type3>`，但我不知道如何告诉反序列化逻辑来区分两者。

我可以将“type1”数据对象和“type3”数据对象的所有属性合并到一个.NET 类型中。但是属性的数量足够大，这会变得混乱。

如果 JSON（在这种情况下`data`）中的属性名称不同，我可以使用它来区分。例如，如果数据如下所示：

```
 "children": [{
      "kind": "type1",
      "t1data": { ... }
    }, {
      "kind": "type3",
      "t3data": { ... }
    }] 
```

...然后我可以在.NET中做这样的事情：

```
public class OneItem
{
    public string kind { get;set; }
    public Type1 t1data { get;set; }
    public Type3 t3data { get;set; }
} 
```

但我的数据架构看起来不像那样。

是否可以根据数据的内容来选择反序列化的类型？换句话说，查看一个属性（在本例中为`kind`）的值以确定如何反序列化另一个属性（在本例中为`data`）的内容。

或者是否可以在 ReadAsAsync 尝试反序列化之前注入作用于 JSON 的过滤器或转换器？

如果是这样，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:54:38.740

如果您可以对响应进行一些预处理并且可以使用 Json.NET，那么您应该能够做您想做的事情。

给定以下类：

```
public class Response
{
    public string schema
    {
        get;
        set;
    }

    public ListingData data
    {
        get;
        set;
    }
}

public class ListingData
{
    public string key
    {
        get;
        set;
    }

    public List<object> children
    {
        get;
        set;
    }
}

public class Type1
{
    public string body
    {
        get;
        set;
    }

    public string parent_id
    {
        get;
        set;
    }

    public int report_count
    {
        get;
        set;
    }

    public string name
    {
        get;
        set;
    }
}

public class Type3
{
    public string domain
    {
        get;
        set;
    }

    public bool flagged
    {
        get;
        set;
    }

    public string category
    {
        get;
        set;
    }

    public bool saved
    {
        get;
        set;
    }

    public string id
    {
        get;
        set;
    }

    public double created
    {
        get;
        set;
    }
} 
```

该测试通过：

```
[Test]
public void RoundTrip()
{
    var response = new Response
                        {
                            schema = "Listing",
                            data = new ListingData
                                        {
                                            key = "28ba648c-de24-45d4-a7d9-70f810cf5438",
                                            children = new List<object>
                                                            {
                                                                new Type1
                                                                    {
                                                                        body = "Four score and seven years ago...",
                                                                        parent_id = "2qh3l",
                                                                        report_count = 0,
                                                                        name = "c4j6yeh"
                                                                    },
                                                                new Type3
                                                                    {
                                                                        domain = "abc.def.com",
                                                                        flagged = true,
                                                                        category = "news",
                                                                        saved = false,
                                                                        id = "t3dz0",
                                                                        created = 1335998011.0
                                                                    }
                                                            }
                                        }
                        };

    var jsonSerializerSettings = new JsonSerializerSettings
                                        {
                                            Formatting = Formatting.Indented,
                                            TypeNameHandling = TypeNameHandling.Objects
                                        };

    string serializedResponse = JsonConvert.SerializeObject(response, jsonSerializerSettings);
    Console.WriteLine(serializedResponse);
    var roundTrippedResponse = JsonConvert.DeserializeObject<Response>(serializedResponse, jsonSerializerSettings);
    Assert.That(roundTrippedResponse.data.children.First().GetType(), Is.EqualTo(typeof(Type1)));
    Assert.That(roundTrippedResponse.data.children.Last().GetType(), Is.EqualTo(typeof(Type3)));
} 
```

写入控制台的输出是：

```
{
  "$type": "Test.Response, Test",
  "schema": "Listing",
  "data": {
    "$type": "Test.ListingData, Test",
    "key": "28ba648c-de24-45d4-a7d9-70f810cf5438",
    "children": [
      {
        "$type": "Test.Type1, Test",
        "body": "Four score and seven years ago...",
        "parent_id": "2qh3l",
        "report_count": 0,
        "name": "c4j6yeh"
      },
      {
        "$type": "Test.Type3, Test",
        "domain": "abc.def.com",
        "flagged": true,
        "category": "news",
        "saved": false,
        "id": "t3dz0",
        "created": 1335998011.0
      }
    ]
  }
} 
```

因此，如果您可以转换收到的响应以匹配 Json.NET 的预期格式，这将起作用。

要将所有这些组合在一起，您需要编写一个自定义 MediaTypeFormatter 并将其传递给 ReadAsAsync<>() 调用。

# c# - 这段代码如何匹配以“أقول”开头的句子？

> ID：10417944
> 
> 赞同：7
> 
> 时间：2012-05-02T16:34:12.487
> 
> 标签：c#, regex

这段代码如何匹配以“أقول”开头的句子？

```
Regex.Matches(Content, "أقول " ); 
```

这是一个阿拉伯语单词。"أقول" 正则表达式到底是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T17:31:32.620

关于您的评论，您想找到以“أقول”开头并以“أقول”结尾的任何匹配项。如果这是真的，那么就是这样：

```
Regex.Matches(Content, "أقول .*أقول"); 
```

例如，如果`Content`是：

> أقول ولكنك لا تسمع ما أقول بسبب صوتك العالي

然后它将匹配：

> أقول ولكنك لا تسمع ما أقول

阿拉伯语是 RTL 没有问题，这都是关于查看的，它们不是反向存储的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:30:58.527

对我来说似乎是一个很好的候选人：

```
Regex.Matches(Content, @"أقول.*أقول"); 
```

也许它有点帮助：[http](http://social.msdn.microsoft.com/Forums/en-US/regexp/thread/6d511f59-ae7c-46f5-9453-e4cb93ed6123) ://social.msdn.microsoft.com/Forums/en-US/regexp/thread/6d511f59-ae7c-46f5-9453-e4cb93ed6123 在页面末尾有一个可用的anwser。

# python - CentOS 6.2 上的 cx_Oracle 安装问题

> ID：10417949
> 
> 赞同：1
> 
> 时间：2012-05-02T16:34:20.343
> 
> 标签：python, linux, centos, cx-oracle

我对此发表另一个问题感到很抱歉，但是我通读的所有其他问题都以不一定适用或解决我的问题的解决方案结束。

我在 CentOS 6.2 上运行 Oracle。数据库已启动，sqlplus 连接正常。我正在使用 Python 3.2 和 Oracle 11.2.0.3

我找到并安装了包 cx_Oracle-5.1.1-11g-py32-1.x86_64.rpm 没有错误。

```
[paws@linux ~]$ ls -al /usr/lib/python3.2/site-packages
total 360
drwxr-xr-x. 2 root root   4096 May  2 12:04 .
drwxr-xr-x. 3 root root   4096 Apr 13 09:31 ..
-rw-r--r--. 1 root root    898 Oct  8  2011 cx_Oracle-5.1.1-py3.2.egg-info
-rwxr-xr-x. 1 root root 353356 Oct  8  2011 cx_Oracle.cpython-32mu.so
[paws@linux ~]$ 
```

但是，当尝试导入 cx_Oracle 时，我仍然收到导入错误。我已经检查了 PYTHONPATH 如下所示，并且有相应的目录：

```
[paws@linux ~]$ python
Python 3.2.2 (default, Apr 13 2012, 09:15:56) 
[GCC 4.4.6 20110731 (Red Hat 4.4.6-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import cx_Oracle
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named cx_Oracle
>>> import sys
>>> print (sys.path)
['', '/home/paws', '/usr/lib/python3.2/site-packages', '/usr/local/lib/python32.zip', '/usr/bin/Python-3.2.2/Lib', '/usr/bin/Python-3.2.2/Lib/plat-linux2', '/usr/bin/Python-3.2.2/build/lib.linux-x86_64-3.2', '/usr/local/lib/python3.2/site-packages'] 
```

还有什么我可以检查来解决这个问题吗？我在 Windows 上安装了 cx_Oracle 很多次都没有问题，但这是第一次在 linux 上，所以我一定缺少一些简单的东西。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:25:14.957

只是一个想法。我想知道您的[版本标记文件](http://www.python.org/dev/peps/pep-3149/)是否有问题。

在 python 提示符下，输入时会得到什么：

```
>>>import sysconfig
>>>sysconfig.get_config_var('SO') 
```

你应该得到： *'cpython-32mu.so'*

如果没有，您可以尝试创建一个符号链接来指向它。

# objective-c - 不在静态 UIViewController 子类中调用 [super dealloc]

> ID：10417956
> 
> 赞同：0
> 
> 时间：2012-05-02T16:34:53.967
> 
> 标签：objective-c, ios, static, uiviewcontroller, dealloc

在我的应用程序中，我有一个 UIViewController 子类（简称 VC），我只在整个应用程序的一个地方使用它。在那个地方，我一直在这样创建和推动它：

```
MyViewController* VC = [MyViewController new];
[self.navigationController pushViewController:VC animated:YES];
[VC release]; 
```

但我在想，因为这是我唯一使用这种类型的视图控制器的地方，我可以做这样的事情，这样每次视图控制器被推入堆栈时，所使用的设置就不会被重置：

```
static MapsToSendPicker* VC = nil; 
if(!VC) {
    VC = [MapsToSendPicker new];
}

[self.navigationController pushViewController:VC animated:YES];
[VC release]; 
```

该代码的问题在于，在 VC 的`dealloc`方法中，我释放了所有实例变量并将它们设置为 nil，最后我调用`[super dealloc]`. 这会取消分配静态视图控制器，但`if(!VC)`之后不会将测试评估为真（如果是的话，这将破坏整个想法的目的；那么无论如何我每次都必须重新创建视图控制器）。

我的解决方案是覆盖`dealloc`MyViewController 中的方法而*不是*最后调用`[super dealloc]`。这可行，但编译器会发出警告。如何在保持通过此设计获得的功能的同时摆脱该警告？谢谢！

编辑：

快速谷歌搜索后，我找到了这个解决方案：

```
- (void)dealloc {
    if(NO) {
        [super dealloc];
    }
} 
```

但我想要一些……更清洁的东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:39:55.020

删除该`[VC release];`行并添加 [super dealloc] 回来。一切都会正常工作，并且永远不会调用 dealloc。通常，您应该考虑使用`NSUserDefaults`以恢复 VC 属性，而不是始终将控制器保留在内存中。

# java - 如何从 DB 表生成休眠 POJO 类

> ID：10417958
> 
> 赞同：5
> 
> 时间：2012-05-02T16:34:59.860
> 
> 标签：java, hibernate, jpa, annotations

我有一个 sql 脚本，其中包含用于创建许多表的 DDL，只需执行此脚本以在 db 中创建表。

现在我想使用休眠对这些表执行 CURD 操作，但是通过每个表创建 POJO 需要时间。那么，有没有办法使用那些已经创建的数据库表来生成带有 JPA 注释的 POJO？

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-10T09:12:52.063

在 Eclipse 中，您可以使用**Telosys 工具**插件 ( [http://marketplace.eclipse.org/content/telosys-tools](http://marketplace.eclipse.org/content/telosys-tools) ) 它从现有数据库工作并生成不同类型的源文件，通常是带有 JPA 注释的 Java bean 请参见[http:// tools.telosys.org](http://tools.telosys.org)
和教程：[https ://sites.google.com/site/telosystutorial/](https://sites.google.com/site/telosystutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:36:40.763

如果您使用 Eclipse IDE，[http://www.eclipse.org/webtools/dali/可以从数据库生成实体](http://www.eclipse.org/webtools/dali/)

# javascript - 如何定义 4 个函数来适应这两个测试 (javascript/q)

> ID：10417966
> 
> 赞同：0
> 
> 时间：2012-05-02T16:35:39.220
> 
> 标签：javascript, node.js

当我找到[q](https://github.com/kriskowal/q)时，我发现在它的描述中，有这样的演示代码：

```
step1(function (value1) {
    step2(value1, function(value2) {
        step3(value2, function(value3) {
            step4(value3, function(value4) {
                // Do something with value4
                console.log("finised: " + value4)
            });
        });
    });
}); 
```

和

```
Q.fcall(step1)
.then(step2)
.then(step3)
.then(step4)
.then(function (value4) {
    // Do something with value4
    console.log("finished in q: " +value4);
}, function (error) {
    // Handle any error from step1 through step4
    console.log("err: " + err);
})
.end(); 
```

我想知道，如何定义 4 个函数`step1/step2/step3/step4`来适应这两个测试？

我试过了：

```
function step1(callback) { console.log("step1"); return "abc"; };
function step2(str, callback) { console.log("step2"); return str; };
function step3(str, callback) { console.log("step3"); return str; };
function step4(str, callback) { console.log("step4"); return str; }; 
```

和

```
function step1(callback) { console.log("step1"); return callback("abc"); };
function step2(str, callback) { console.log("step2"); return callback(str); };
function step3(str, callback) { console.log("step3"); return callback(str); };
function step4(str, callback) { console.log("step4"); return callback(str); }; 
```

并希望它打印：

```
step1
step2
step3
step4
finised: abc
step1
step2
step3
step4
finised in q: abc 
```

但两者都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:43:39.527

您通过回调返回

```
 function step1(callback) { console.log("step1"); callback("abc"); };
function step2(str, callback) { console.log("step2"); callback(str); };
function step3(str, callback) { console.log("step3"); callback(str); };
function step4(str, callback) { console.log("step4"); callback(str); }; 
```

# java - 您可以根据查询创建意图过滤器吗？

> ID：10417967
> 
> 赞同：9
> 
> 时间：2012-05-02T16:35:43.513
> 
> 标签：java, android, android-intent

我想让我的应用程序响应我的应用程序的市场链接。所以链接是market://details?id=my.package.name。现在我想要这个的原因是我可以发送一个链接，如果安装了该应用程序将打开该应用程序，如果未安装该应用程序则打开市场页面。我遇到的问题是我的应用程序将响应所有市场链接，而不仅仅是我的应用程序链接。原因是包名是在 Uri 的查询部分定义的。有没有办法根据 Uri 的查询部分过滤意图？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-16T17:31:26.460

[`ssp`](https://developer.android.com/reference/android/R.attr.html#ssp)从 Android API 19 开始，您可以使用[`sspPrefix`](https://developer.android.com/reference/android/R.attr.html#sspPrefix)或[`sspPattern`](https://developer.android.com/reference/android/R.attr.html#sspPattern). 例子：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data
        android:scheme="https"
        android:sspPrefix="//play.google.com/store/apps/details?id=com.example.test"
    />
</intent-filter> 
```

使用这样的过滤器，操作系统将只为您的应用程序提供带有`id=com.example.test`参数的 URL，并且在没有此类参数时不会提供它。但这仅适用于 Android 4.4+，旧版本将忽略`sspPrefix`.

另见这篇文章：[https](https://chris.orr.me.uk/android-ssp-data-intent-filter/) ://chris.orr.me.uk/android-ssp-data-intent-filter/ 。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T16:49:37.957

不，对不起，你不能。您可以根据 左侧的所有内容来约束过滤器`?`，仅此而已。

# sql - 如何根据起始表中的各个行将多个唯一记录插入另一个表

> ID：10417971
> 
> 赞同：0
> 
> 时间：2012-05-02T16:36:02.233
> 
> 标签：sql, sql-server, insert, while-loop, fetch

您如何逐行遍历表，并将基于这些单独行的条目插入 MSSQL 中的另一个表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:57:15.463

如果您必须逐行进行，您将声明并使用游标。这通常不是一个好主意，我很好奇你为什么需要这样做。您问题上的标签（获取，而）暗示您已经对游标有所了解。一般形式如下所示：

```
SET NOCOUNT ON;
DECLARE @num INT; -- other columns 
```

-- 编辑在下面的评论中添加了 LOCAL STATIC READ_ONLY FORWARD_ONLY

```
DECLARE excruciatingly_slow CURSOR LOCAL STATIC READ_ONLY FORWARD_ONLY FOR 
    SELECT 1  --this is just a sample, your query (which you might want to supply) will differ
    UNION ALL 
    SELECT 2;

OPEN excruciatingly_slow;    
FETCH NEXT FROM excruciatingly_slow
    INTO @num -- other variables
    ;

WHILE @@FETCH_STATUS > -1
    BEGIN
        -- Do something here
        INSERT destination_table
            (    column_list -- other columns...
            )
        SELECT @num -- other columns
            ;

        FETCH NEXT FROM excruciatingly_slow
            INTO @num-- other variables
            ;
    END;
CLOSE excruciatingly_slow;
DEALLOCATE excruciatingly_slow; 
```

在大多数情况下，使用其他回复建议的 INSERT...SELECT... 构造会更好。如果这与课程相关，则有一个作业标签。我很难想到一个单一的插入会更好地由游标服务的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:38:28.343

像这样？

```
INSERT INTO <table> ( <columns> )
SELECT FROM <source_table> ( <matching number columns> ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:38:49.360

你可以这样做：

```
insert into Table2 (columnA, ColumnB)
select ColumnA, ColumnB from Table1
where ColumnA = 'Blah' 
```

基本上你是在一个表上进行选择并将其插入到另一个表中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:39:26.923

你可以使用`case`：

```
insert into destinationTable
    select case id when 1 then ...
           end
    from sourceTable 
```

# css - IE7 问题 - 浮动填充元素上的间距太大

> ID：10417972
> 
> 赞同：-1
> 
> 时间：2012-05-02T16:36:13.557
> 
> 标签：css, internet-explorer-7, css-float

让 IE7 仅在此页面上存在间距问题：http: [//chantalorganics.co.nz/wordpress/newsletter/](http://chantalorganics.co.nz/wordpress/newsletter/)

下图显示了功能框上方和下方以及页脚内容上方的大空间。

我可以看到很多人在 IE7 中遇到边距问题，但我使用的是填充。我也在使用 Eric Meyer 的 reset.css。但是，内容是浮动的，这似乎是问题的一部分。

感谢任何指导！

![在此处输入图像描述](../Images/115f0cc0b69d935426eecdd5e5f6e29b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:17:19.467

我发现这个大空白是因为在“entry-content”类中添加了margin-bottom。此类被添加到 H1 下方的 div 中。您可以删除该边距底部并将其添加到 H3 并使用“找出原因”文本。就我而言，解决了问题:)

顺便提一句。当您将鼠标悬停在 Tahini Cookies 图像上时，Chrome 上的图像会向下移动。这很奇怪……

编辑：要修复页脚空白，请添加样式显示内联块，如下所示

```
#footer-container { 
    display: inline-block;
} 
```

页脚上方的大空白是因为您在#primary-menu 和#container 中添加了高度。我试图删除它，但后来我注意到在该菜单之后的高度不够，所以我将两个高度都修改为 min-height: 563px （数字由你决定）。这是你所期待的吗？我在[http://www.cssnewbie.com/double-margin-float-bug/找到了帮助](http://www.cssnewbie.com/double-margin-float-bug/)

今天我没有那个奇怪的跳跃芝麻酱饼干形象。你能告诉我那是什么吗？你是怎么修的？

# android - in facebook sdk for Android 的示例始终显示语言为“Bahasa Indonesia”的身份验证页面

> ID：10417979
> 
> 赞同：2
> 
> 时间：2012-05-02T16:36:41.093
> 
> 标签：android, facebook

我使用 android 设备在 facebook sdk for android 中运行简单的示例项目。应用程序身份验证页面始终使用“印度尼西亚语”语言。我已经更改了我的安卓设备的语言（英文和中文），但它仍然以“印度尼西亚语”语言显示。

我在设备中使用浏览器应用程序来确认此问题，我在设备的浏览器应用程序中打开了 url [http://m.facebook.com](http://m.facebook.com)。该页面还以“印度尼西亚语”语言显示。

我记得上周没有出现这种情况，认证页面和登录页面会根据我设备的语言更改其显示语言。

有什么办法可以解决这个问题吗？

* * *

这是一些更新：我在台湾，当我使用中华电信 ADSL 网络时，它总是显示印度尼西亚语的 Facebook 登录页面。我以 3G 模式或其他网络提供商更改设备网络，登录页面以我所在的语言显示。

我尝试查看我的IP，当IP的起始部分是220.133.XX时，登录页面是错误的。IP 为 101.10.XX 或 60.245.XX，登录页面以正确的语言显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:12:33.837

这也发生在我身上，这是一个 facebook 错误

[http://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383](http://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383)

# iphone - 使用核心图形绘制浮雕弧

> ID：10417982
> 
> 赞同：8
> 
> 时间：2012-05-02T16:36:54.480
> 
> 标签：iphone, ios, core-graphics

我正在尝试实现一个自定义滑块，如下图所示。

![在此处输入图像描述](../Images/ef194d08a830ac84bcb0bd2fb56d7be2.png)

到目前为止我所做的看起来像这样

![在此处输入图像描述](../Images/dd594438304ec6b12b2180cea3013bac.png)

请帮我画出具有这种效果的弧线。我的代码如下，我正在做的是使用线宽为 kLineWidth 的 CGContextAddArc 绘制弧线。

```
- (void)drawThumbAtPoint:(CGPoint)sliderButtonCenterPoint inContext: (CGContextRef)context {
UIGraphicsPushContext(context);
CGContextBeginPath(context);

CGContextMoveToPoint(context, sliderButtonCenterPoint.x, sliderButtonCenterPoint.y);

CGImageRef imageRef = [UIImage imageNamed:@"circle25.png"].CGImage;
CGRect rect = CGRectMake(sliderButtonCenterPoint.x - kThumbRadius, sliderButtonCenterPoint.y - kThumbRadius, kThumbRadius*2, kThumbRadius*2);
CGContextDrawImage(context, rect, imageRef);

//CGContextAddArc(context, sliderButtonCenterPoint.x, sliderButtonCenterPoint.y, kThumbRadius, 0.0, 2*M_PI, NO);

CGContextFillPath(context);
UIGraphicsPopContext();
}

- (CGPoint)drawArcTrack:(float)track atPoint:(CGPoint)center withRadius:(CGFloat)radius inContext:(CGContextRef)context {
UIGraphicsPushContext(context);
CGContextBeginPath(context);

float angleFromTrack = translateValueFromSourceIntervalToDestinationInterval(track, self.minimumValue, self.maximumValue, 0, M_PI/3);// 2*M_PI

CGFloat startAngle = (4*M_PI)/3;
CGFloat endAngle = startAngle + angleFromTrack;

CGContextAddArc(context, center.x, center.y, radius, startAngle, endAngle, NO);

CGPoint arcEndPoint = CGContextGetPathCurrentPoint(context);

CGContextStrokePath(context);   

UIGraphicsPopContext();

return arcEndPoint;
}

- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGPoint middlePoint;
    middlePoint.x = self.bounds.origin.x + self.bounds.size.width/2;
middlePoint.y = self.bounds.origin.y + self.bounds.size.width;

CGContextSetLineWidth(context, kLineWidth);

CGFloat radius = [self sliderRadius];

[self.maximumTrackTintColor setStroke];         
[self drawArcTrack:self.maximumValue atPoint:middlePoint withRadius:radius inContext:context];          
[self.minimumTrackTintColor setStroke];         
self.thumbCenterPoint = [self drawArcTrack:self.value atPoint:middlePoint withRadius:radius inContext:context];     

[self.thumbTintColor setFill];
[self drawThumbAtPoint:self.thumbCenterPoint inContext:context];
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T16:46:03.330

除非您要动态更改形状，否则最好在图像编辑器中创建图像。我知道在 Photoshop、Illustrator 或 Fireworks 中创建这种效果很容易。

也就是说，使用 Core Graphics 绘制像这样的内部阴影需要几个步骤：

1.  剪辑到形状（使用例如`CGContextClip`或`CGContextClipToMask`）。
2.  *为除*形状之外的所有内容制作路径或蒙版。
3.  设置你的阴影参数（使用`CGContextSetShadowWithColor`）。
4.  填充第 2 步中的路径或蒙版。这会在形状内部投射阴影，并且只绘制阴影，因为您在第 1 步中剪辑到形状。

如果您正确执行所有这些操作，您可以获得如下所示的不错结果：

![带内阴影的圆弧屏幕截图](../Images/f95c681b2f06f42ff2d27460dd111ea9.png)

这是我为绘制它而编写的代码。我在`drawRect:`自定义视图子类中编写了它，但是您可以轻松地使用此代码绘制到任何图形上下文中。

```
- (void)drawRect:(CGRect)rect {
    CGContextRef gc = UIGraphicsGetCurrentContext(); 
```

首先，我创建了一条只是弧线的路径：

```
 static CGFloat const kArcThickness = 20.0f;
    CGRect arcBounds = CGRectInset(self.bounds, 10.0f, 10.0f);
    CGPoint arcCenter = CGPointMake(CGRectGetMidX(arcBounds), CGRectGetMidY(arcBounds));
    CGFloat arcRadius = 0.5f * (MIN(arcBounds.size.width, arcBounds.size.height) - kArcThickness);
    UIBezierPath *arc = [UIBezierPath bezierPathWithArcCenter:arcCenter radius:arcRadius startAngle:-M_PI / 3.0 endAngle:-2.0 * M_PI / 3.0 clockwise:NO]; 
```

接下来，我要求 Core Graphics 制作一条新路径，即路径的轮廓`arc`。请注意我如何询问它的笔画宽度`kArcThickness`和圆线帽：

```
 CGPathRef shape = CGPathCreateCopyByStrokingPath(arc.CGPath, NULL, kArcThickness, kCGLineCapRound, kCGLineJoinRound, 10.0f); 
```

我还需要该路径的倒数：包含*除*. `shape`它确实发生了（尽管我认为它没有记录在案）`CGContextCreateCopyByStrokingPath`并且`CGPathAddRect`朝相反的方向绘制。因此，如果我复制`shape`并在其周围绘制一个巨大的矩形，非零缠绕规则意味着新路径将是 的倒数`shape`：

```
 CGMutablePathRef shapeInverse = CGPathCreateMutableCopy(shape);
    CGPathAddRect(shapeInverse, NULL, CGRectInfinite); 
```

现在我可以真正开始画画了。首先，我将用浅灰色填充形状：

```
 CGContextBeginPath(gc);
    CGContextAddPath(gc, shape);
    CGContextSetFillColorWithColor(gc, [UIColor colorWithWhite:.9 alpha:1].CGColor);
    CGContextFillPath(gc); 
```

接下来我实际执行上面列出的四个步骤。我必须保存图形状态，以便在完成后撤消裁剪和阴影参数。

```
 CGContextSaveGState(gc); { 
```

第1步：剪辑到形状：

```
 CGContextBeginPath(gc);
        CGContextAddPath(gc, shape);
        CGContextClip(gc); 
```

第 2 步：嗯，我在创建`shapeInverse`.

第3步：我设置阴影参数：

```
 CGContextSetShadowWithColor(gc, CGSizeZero, 7, [UIColor colorWithWhite:0 alpha:.25].CGColor); 
```

第 4 步：我从第 2 步填充反向形状：

```
 CGContextBeginPath(gc);
        CGContextAddPath(gc, shapeInverse);
        CGContextFillPath(gc); 
```

现在我恢复图形状态，专门恢复剪切路径并取消设置阴影参数。

```
 } CGContextRestoreGState(gc); 
```

最后，我会`shape`用浅灰色描边以使边缘更清晰：

```
 CGContextSetStrokeColorWithColor(gc, [UIColor colorWithWhite:.75 alpha:1].CGColor);
    CGContextSetLineWidth(gc, 1);
    CGContextSetLineJoin(gc, kCGLineCapRound);
    CGContextBeginPath(gc);
    CGContextAddPath(gc, shape);
    CGContextStrokePath(gc); 
```

当然，我完成后会清理：

```
 CGPathRelease(shape);
    CGPathRelease(shapeInverse);
} 
```

对于更复杂的形状，您可以查看[我的答案here](https://stackoverflow.com/questions/8480401/draw-glow-around-inside-edge-of-multiple-cgpaths/8482103#8482103)和[我的答案here](https://stackoverflow.com/questions/8467141/ios-how-to-achieve-emboss-effect-for-the-text-on-uilabel/8468043#8468043)。

以下是所有代码，以便于复制：

```
- (void)drawRect:(CGRect)rect {
    CGContextRef gc = UIGraphicsGetCurrentContext();

    static CGFloat const kArcThickness = 20.0f;
    CGRect arcBounds = CGRectInset(self.bounds, 10.0f, 10.0f);
    CGPoint arcCenter = CGPointMake(CGRectGetMidX(arcBounds), CGRectGetMidY(arcBounds));
    CGFloat arcRadius = 0.5f * (MIN(arcBounds.size.width, arcBounds.size.height) - kArcThickness);
    UIBezierPath *arc = [UIBezierPath bezierPathWithArcCenter:arcCenter radius:arcRadius startAngle:-M_PI / 3.0 endAngle:-2.0 * M_PI / 3.0 clockwise:NO];
    CGPathRef shape = CGPathCreateCopyByStrokingPath(arc.CGPath, NULL, kArcThickness, kCGLineCapRound, kCGLineJoinRound, 10.0f);
    CGMutablePathRef shapeInverse = CGPathCreateMutableCopy(shape);
    CGPathAddRect(shapeInverse, NULL, CGRectInfinite);

    CGContextBeginPath(gc);
    CGContextAddPath(gc, shape);
    CGContextSetFillColorWithColor(gc, [UIColor colorWithWhite:.9 alpha:1].CGColor);
    CGContextFillPath(gc);

    CGContextSaveGState(gc); {
        CGContextBeginPath(gc);
        CGContextAddPath(gc, shape);
        CGContextClip(gc);
        CGContextSetShadowWithColor(gc, CGSizeZero, 7, [UIColor colorWithWhite:0 alpha:.25].CGColor);
        CGContextBeginPath(gc);
        CGContextAddPath(gc, shapeInverse);
        CGContextFillPath(gc);
    } CGContextRestoreGState(gc);

    CGContextSetStrokeColorWithColor(gc, [UIColor colorWithWhite:.75 alpha:1].CGColor);
    CGContextSetLineWidth(gc, 1);
    CGContextSetLineJoin(gc, kCGLineCapRound);
    CGContextBeginPath(gc);
    CGContextAddPath(gc, shape);
    CGContextStrokePath(gc);

    CGPathRelease(shape);
    CGPathRelease(shapeInverse);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T12:36:05.447

检查以下代码以获取上述组件的完整功能版本，它的工作原理（可能有点混乱）。

```
#import "UIArcSlider.h"

@interface UIArcSlider()

@property (nonatomic) CGPoint thumbCenterPoint;

#pragma mark - Init and Setup methods
- (void)setup;

#pragma mark - Thumb management methods
- (BOOL)isPointInThumb:(CGPoint)point;

#pragma mark - Drawing methods
- (CGFloat)sliderRadius;
- (void)drawThumbAtPoint:(CGPoint)sliderButtonCenterPoint inContext:(CGContextRef)context;
- (CGPoint)drawTheArcTrack:(float)track atPoint:(CGPoint)center withRadius:(CGFloat)radius AndColor:(Boolean) isWhite inContext:(CGContextRef)context;
- (CGPoint)drawTheLineTrack:(float)track withColor:(Boolean) isWhite inContext:(CGContextRef)context;

@end

#pragma mark -
@implementation UIArcSlider

@synthesize sliderStyle = _sliderStyle;
- (void)setSliderStyle:(UISliderStyle)sliderStyle {
    if (sliderStyle != _sliderStyle) {
        _sliderStyle = sliderStyle;
        [self setNeedsDisplay];
    }
}

@synthesize value = _value;
- (void)setValue:(float)value {
    if (value != _value) {
        if (value > self.maximumValue) { value = self.maximumValue; }
        if (value < self.minimumValue) { value = self.minimumValue; }
        _value = value;
        [self setNeedsDisplay];
        [self sendActionsForControlEvents:UIControlEventValueChanged];
    }
}
@synthesize minimumValue = _minimumValue;
- (void)setMinimumValue:(float)minimumValue {
    if (minimumValue != _minimumValue) {
        _minimumValue = minimumValue;
        if (self.maximumValue < self.minimumValue)  { self.maximumValue = self.minimumValue; }
        if (self.value < self.minimumValue)         { self.value = self.minimumValue; }
    }
}
@synthesize maximumValue = _maximumValue;
- (void)setMaximumValue:(float)maximumValue {
    if (maximumValue != _maximumValue) {
        _maximumValue = maximumValue;
        if (self.minimumValue > self.maximumValue)  { self.minimumValue = self.maximumValue; }
        if (self.value > self.maximumValue)         { self.value = self.maximumValue; }
    }
}

@synthesize thumbCenterPoint = _thumbCenterPoint;

/** @name Init and Setup methods */
#pragma mark - Init and Setup methods
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        [self setup];
    } 
    return self;
}
- (void)awakeFromNib {
    [self setup];
}

- (void)setup {
    self.value = 0.0;
    self.minimumValue = 0.0;
    self.maximumValue = 100.0;
    self.thumbCenterPoint = CGPointZero;

    UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapGestureHappened:)];
    [self addGestureRecognizer:tapGestureRecognizer];

    UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panGestureHappened:)];
    panGestureRecognizer.maximumNumberOfTouches = panGestureRecognizer.minimumNumberOfTouches;
    [self addGestureRecognizer:panGestureRecognizer];
}

/** @name Drawing methods */
#pragma mark - Drawing methods
#define kLineWidth 22.0
#define kThumbRadius 20.0
#define kPadding 20.0

- (CGFloat)sliderRadius {
    CGFloat radius = self.bounds.size.width;
    radius -= MAX(kLineWidth + kPadding, kThumbRadius  + kPadding); 
    return radius;
}

-(CGFloat)sliderWidth {    
    return self.bounds.size.width - kThumbRadius*2;
}

- (void)drawThumbAtPoint:(CGPoint)sliderButtonCenterPoint inContext:(CGContextRef)context {
    UIGraphicsPushContext(context);
    CGContextBeginPath(context);    

    CGContextMoveToPoint(context, sliderButtonCenterPoint.x, sliderButtonCenterPoint.y);

    CGRect rect = CGRectMake(sliderButtonCenterPoint.x - kThumbRadius, sliderButtonCenterPoint.y - kThumbRadius, kThumbRadius*2, kThumbRadius*2);
    CGImageRef imageRef = [UIImage imageNamed:@"circle25.png"].CGImage;

    CGContextDrawImage(context, rect, imageRef);

    UIGraphicsPopContext();        
}

- (CGPoint)drawTheArcTrack:(float)track atPoint:(CGPoint)center withRadius:(CGFloat)radius AndColor:(Boolean) isWhite inContext:(CGContextRef)context 
{
    static CGFloat const kArcThickness = kLineWidth;
    CGPoint arcCenter = center;
    CGFloat arcRadius = radius;

    float angleFromTrack = translateValueFromSourceIntervalToDestinationInterval(track, self.minimumValue, self.maximumValue, 0, M_PI/3);// 2*M_PI

    CGFloat startAngle = (4*M_PI)/3;
    CGFloat endAngle = startAngle + angleFromTrack;

    UIBezierPath *arc = [UIBezierPath bezierPathWithArcCenter:arcCenter radius:arcRadius startAngle:startAngle endAngle:endAngle clockwise:YES];

    CGPathRef shape = CGPathCreateCopyByStrokingPath(arc.CGPath, NULL, kArcThickness, kCGLineCapRound, kCGLineJoinRound, 10.0f);
    CGMutablePathRef shapeInverse = CGPathCreateMutableCopy(shape);
    CGPathAddRect(shapeInverse, NULL, CGRectInfinite);

    CGPoint arcEndPoint = [arc currentPoint];

    CGContextBeginPath(context);
    CGContextAddPath(context, shape);

    if (isWhite) {
        CGContextSetFillColorWithColor(context, [UIColor colorWithWhite:.9 alpha:1].CGColor);
    } else {//70,172, 220
        CGContextSetFillColorWithColor(context, [UIColor colorWithRed:70/255.0 green:172/255.0 blue:220/255.0 alpha:1].CGColor);
    }    

    CGContextFillPath(context);

    CGContextSaveGState(context); {
        CGContextBeginPath(context);
        CGContextAddPath(context, shape);
        CGContextClip(context);
        if (isWhite) {
            CGContextSetShadowWithColor(context, CGSizeZero, 7, [UIColor colorWithWhite:0 alpha:.25].CGColor);
        } else {
            CGContextSetShadowWithColor(context, CGSizeZero, 7, [UIColor colorWithRed:85/255.0 green:183/255.0 blue:230/255.0 alpha:.25].CGColor);
        }       
        CGContextBeginPath(context);
        CGContextAddPath(context, shapeInverse);
        CGContextFillPath(context);
    } CGContextRestoreGState(context);

    if (isWhite) {
        CGContextSetStrokeColorWithColor(context, [UIColor colorWithWhite:.75 alpha:1].CGColor);
    } else {
        CGContextSetStrokeColorWithColor(context, [UIColor colorWithRed:62/255.0 green:135/255.0 blue:169/255.0 alpha:1].CGColor);
    }

    CGContextSetLineWidth(context, 1);
    CGContextSetLineJoin(context, kCGLineCapRound);
    CGContextBeginPath(context);
    CGContextAddPath(context, shape);
    CGContextStrokePath(context);

    CGPathRelease(shape);
    CGPathRelease(shapeInverse);        

    return arcEndPoint;    
}

- (CGPoint)drawTheLineTrack:(float)track withColor:(Boolean) isWhite inContext:(CGContextRef)context
{        
    CGFloat sliderWidth = [self sliderWidth];
    CGFloat xStart = self.bounds.origin.x + (self.bounds.size.width - sliderWidth)/2;
    CGFloat lineRectX = (self.bounds.size.width - sliderWidth)/2;
    CGFloat lineThickness = kLineWidth/2;
    CGFloat lineRectY = (self.bounds.size.height - lineThickness)/2;

    CGFloat xPoint = translateValueToPoint(track, xStart, self.maximumValue, sliderWidth);
    sliderWidth = xPoint;

    CGRect lineRect = CGRectMake(lineRectX, lineRectY, sliderWidth, lineThickness);
    UIBezierPath *line = [UIBezierPath bezierPathWithRoundedRect:lineRect cornerRadius:lineThickness/2];

    CGPathRef shape = CGPathCreateCopyByStrokingPath(line.CGPath, NULL, lineThickness, kCGLineCapRound, kCGLineJoinRound, 10.0f);
    CGMutablePathRef shapeInverse = CGPathCreateMutableCopy(shape);
    CGPathAddRect(shapeInverse, NULL, CGRectInfinite);

    CGPoint arcEndPoint = CGPointMake(lineRectX + xPoint, lineRectY + (lineThickness/2));

    CGContextBeginPath(context);
    CGContextAddPath(context, shape);

    if (isWhite) {
        CGContextSetFillColorWithColor(context, [UIColor colorWithWhite:.9 alpha:1].CGColor);
    } else {//70,172, 220
        CGContextSetFillColorWithColor(context, [UIColor colorWithRed:70/255.0 green:172/255.0 blue:220/255.0 alpha:1].CGColor);
    }    

    CGContextFillPath(context);

    CGContextSaveGState(context); {
        CGContextBeginPath(context);
        CGContextAddPath(context, shape);
        CGContextClip(context);
        if (isWhite) {
            CGContextSetShadowWithColor(context, CGSizeZero, 7, [UIColor colorWithWhite:0 alpha:.25].CGColor);
        } else {
            CGContextSetShadowWithColor(context, CGSizeZero, 7, [UIColor colorWithRed:85/255.0 green:183/255.0 blue:230/255.0 alpha:.25].CGColor);
        }       
        CGContextBeginPath(context);
        CGContextAddPath(context, shapeInverse);
        CGContextFillPath(context);
    } CGContextRestoreGState(context);

    if (isWhite) {
        CGContextSetStrokeColorWithColor(context, [UIColor colorWithWhite:.75 alpha:1].CGColor);
    } else {
        CGContextSetStrokeColorWithColor(context, [UIColor colorWithRed:62/255.0 green:135/255.0 blue:169/255.0 alpha:1].CGColor);
    }

    CGRect outlineRect = CGRectMake(lineRectX - (lineThickness/2), lineRectY - (lineThickness/2), sliderWidth + lineThickness, lineThickness * 2);
    UIBezierPath *outline = [UIBezierPath bezierPathWithRoundedRect:outlineRect cornerRadius:lineThickness];
    CGContextSetLineWidth(context, 1);
    CGContextSetLineJoin(context, kCGLineCapSquare);
    CGContextBeginPath(context);
    CGContextAddPath(context, outline.CGPath);
    CGContextStrokePath(context);

    CGPathRelease(shape);
    CGPathRelease(shapeInverse);        

    return arcEndPoint;    
}

- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGPoint middlePoint;

    switch (self.sliderStyle) {
        case UISliderStyleLine:

            [self drawTheLineTrack:self.maximumValue withColor:YES inContext:context];
            self.thumbCenterPoint = [self drawTheLineTrack:self.value withColor:NO inContext:context];

            [self drawThumbAtPoint:self.thumbCenterPoint inContext:context];
            break;

        case UISliderStyleArc:
        default:
            middlePoint.x = self.bounds.origin.x + self.bounds.size.width/2;
            middlePoint.y = self.bounds.origin.y + self.bounds.size.width;

            CGFloat radius = [self sliderRadius];                
            [self drawTheArcTrack:self.maximumValue atPoint:middlePoint withRadius:radius AndColor:YES inContext:context];

            self.thumbCenterPoint = [self drawTheArcTrack:self.value atPoint:middlePoint withRadius:radius AndColor:NO inContext:context];  

            [self drawThumbAtPoint:self.thumbCenterPoint inContext:context];
            break;
    }
}

/** @name Thumb management methods */
#pragma mark - Thumb management methods
- (BOOL)isPointInThumb:(CGPoint)point {
    CGRect thumbTouchRect = CGRectMake(self.thumbCenterPoint.x - kThumbRadius, self.thumbCenterPoint.y - kThumbRadius, kThumbRadius*2, kThumbRadius*2);
    return CGRectContainsPoint(thumbTouchRect, point);
}

/** @name UIGestureRecognizer management methods */
#pragma mark - UIGestureRecognizer management methods
- (void)panGestureHappened:(UIPanGestureRecognizer *)panGestureRecognizer {
    CGPoint tapLocation = [panGestureRecognizer locationInView:self];
    switch (panGestureRecognizer.state) {
        case UIGestureRecognizerStateChanged: {

            CGFloat radius;
            CGPoint sliderCenter;
            CGPoint sliderStartPoint;
            CGFloat angle;

            CGFloat xStart;
            CGFloat maximumValue;
            CGFloat sliderWidth;
            CGFloat point;

            switch (self.sliderStyle) {
                case UISliderStyleLine:

                    sliderWidth = [self sliderWidth];
                    xStart = self.bounds.origin.x + (self.bounds.size.width - sliderWidth)/2;
                    maximumValue = self.maximumValue;
                    point = tapLocation.x;

                    self.value = translatePointToValue(point, xStart, maximumValue, sliderWidth);

                    break;

                case UISliderStyleArc:
                default:

                    radius = [self sliderRadius];
                    sliderCenter = CGPointMake(self.bounds.size.width/2, self.bounds.size.width);
                    sliderStartPoint = CGPointMake(sliderCenter.x - (radius * 1.15), sliderCenter.y - (radius * 2.1) );
                    angle = angleBetweenThreePoints(sliderCenter, sliderStartPoint, tapLocation);

                    if (angle < 0) {
                        angle = -angle;
                    }
                    else {
                        angle = 0.0;
                        //angle = M_PI/3 - angle;
                    }

                    self.value = translateValueFromSourceIntervalToDestinationInterval(angle, 0, M_PI/3, self.minimumValue, self.maximumValue);
                    break;
            }
        }
        default:
            break;
    }
}
- (void)tapGestureHappened:(UITapGestureRecognizer *)tapGestureRecognizer {
    if (tapGestureRecognizer.state == UIGestureRecognizerStateEnded) {
        CGPoint tapLocation = [tapGestureRecognizer locationInView:self];
        if ([self isPointInThumb:tapLocation]) {
            // do something on tap
        }
        else {
        }
    }
}

@end

/** @name Utility Functions */
#pragma mark - Utility Functions
float translateValueFromSourceIntervalToDestinationInterval(float sourceValue, float sourceIntervalMinimum, float sourceIntervalMaximum, float destinationIntervalMinimum, float destinationIntervalMaximum) {
    float a, b, destinationValue;

    a = (destinationIntervalMaximum - destinationIntervalMinimum) / (sourceIntervalMaximum - sourceIntervalMinimum);
    b = destinationIntervalMaximum - a*sourceIntervalMaximum;

    destinationValue = a*sourceValue + b;

    return destinationValue;
}

float translateValueToPoint(float value, float xStart, float maximum, float width)
{
    float point = (width * value) / maximum;
//    
//    point = xStart + point;
//    
    return point;   
}

float translatePointToValue(float point, float xStart, float maximum, float width)
{
    float value = (point) * maximum;
    value = value / width;

    return value;
}

CGFloat angleBetweenThreePoints(CGPoint centerPoint, CGPoint p1, CGPoint p2) {
    CGPoint v1 = CGPointMake(p1.x - centerPoint.x, p1.y - centerPoint.y);
    CGPoint v2 = CGPointMake(p2.x - centerPoint.x, p2.y - centerPoint.y);

    CGFloat angle = atan2f(v2.x*v1.y - v1.x*v2.y, v1.x*v2.x + v1.y*v2.y);

    return angle;
} 
```

您还需要拇指图像 ![在此处输入图像描述](../Images/3f948ad5f83325868205bba76b242e8c.png)

# javascript - 在javascript中重构字符串

> ID：10417984
> 
> 赞同：0
> 
> 时间：2012-05-02T16:36:58.693
> 
> 标签：javascript

我有这个字符串，我需要在其中使用 JavaScript 重新构造。

> Label=11121212&TopicArn=test&AWSAccountId.member.1=YYYYYYY&ActionName.member.1=createTopic&Action=AddPermission&Version=2010-03-31& **AWSAccessKeyId** =XXXXXXXXX&SignatureVersion=2&SignatureMethod=HmacSHA1&Timestamp=2012-05-02T16%3A06%3A09.000Z&Signature=C

对于此示例，`AWSAccessKeyId`应该是字符串的第一部分，并且`label`应该是倒数第二部分。还有其他类似的。

预期输出--AWSAccessKeyId = XXXXXXXXX＆AWSAccountId.member.1 = YYYYYYYYY＆动作= AddPermission＆ActionName.member.1 =发布＆标签= IOS-SNS-权限标签＆签名= dEaNL0ibP5c7xyl4qXDPFPADW0meoUX9caKyUIx1wkk％3D＆是SignatureMethod = HmacSHA256＆SignatureVersion = 2＆时间戳= 2012-05-02T00％3A51％3A23.965Z＆TopicArn = arn%3Aaws%3Asns%3Aus-east-1%3A335750469596%3AiOSGoesWooooo-1335919882&Version=2010-03-31

创建此错误字符串的代码

```
exports.generatePayload = function(params, accessKeyId, secretKey, endpoint) {
    var host = endpoint.replace(/.*:\/\//, "");
    var payload = null;

    var signer = new AWSV2Signer(accessKeyId, secretKey);
    params = signer.sign(params, new Date(), {
        "verb" : "POST",
        "host" : host,
        "uriPath" : "/"
    });

    var encodedParams = [];
    for(var key in params) {
        if(params[key] !== null) {
            encodedParams.push(encodeURIComponent(key) + "=" + encodeURIComponent(params[key]));
        } else {
            encodedParams.push(encodeURIComponent(key));
        }
    }
    payload = encodedParams.join("&");
    return payload;
} 
```

我尝试将它放在一个数组中并对其进行重组，但它对我不起作用。

请建议如何使用 JavaScript 轻松完成此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:53:26.873

```
exports.generatePayload = function(params, accessKeyId, secretKey, endpoint) {
    var host = endpoint.replace(/.*:\/\//, "");
    var payload = null;

    var signer = new AWSV2Signer(accessKeyId, secretKey);
    params = signer.sign(params, new Date(), {
        "verb" : "POST",
        "host" : host,
        "uriPath" : "/"
    });

    var encodedParams = [];
    if(params["AWSAccessKeyId"] != null)
    {
        encodedParams.push(encodeURIComponent("AWSAccessKeyId") + "=" + encodeURIComponent(params["AWSAccessKeyId"]));

    }
    if(params["AWSAccountId.member.1"] != null)
    {
        encodedParams.push(encodeURIComponent("AWSAccountId.member.1") + "=" + encodeURIComponent(params["AWSAccountId.member.1"]));

    }
    //other_ifs_for_param_keys_here
    payload = encodedParams.join("&");
    return payload; 
```

# c - 在汇编函数中获取字符指针

> ID：10417986
> 
> 赞同：-1
> 
> 时间：2012-05-02T16:37:07.287
> 
> 标签：c, linux, assembly

我需要获取我的 char 指针，然后在屏幕上打印它以查看它是否可以正常工作。我从文件中读取文本并放入我的 char 指针 (sizeof(char*) + filesize) + 1.. 最后我放入了 '\0'。如果我 printf 我的 char* 它很好这是我的 asm 代码

```
; void processdata(char* filecontent);
section .text
    global processdata
    extern printf
section .data
FORMAT: db '%c', 10, 0 ; to break the line 10, 0
processdata:
    push ebp
    mov ebp, esp
    mov ebx, [ebp]
    push ebx
    push FORMAT
    call printf
    add esp, 8 
```

当我运行它时，我只是在我的变量中看到垃圾。

正如紫罗兰所说：

```
; void processdata(char* filecontent);
section .text
        [GLOBAL processdata] ;global processdata 
        extern printf
section .data
FORMAT: db '%c', 0
EQUAL: db "is equal", 10, 0
processdata:

    lea   esi,  [esp]
    mov   ebx,  FORMAT 
oook:   
    mov   eax,  [esi]
    push  eax
    push  ebx 
    call  printf
    inc   esi
    cmp  esi, 0x0
    jnz  oook 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:34:21.993

引用[恶魔之夜](https://stackoverflow.com/users/1109847/demonofnight)

> 但是如果我需要增加，我可以这样做吗？

使用您的原始函数 arg of`char*`和`%c`格式，如下所示：

```
 lea   esi,  [esp+4]
    mov   ebx,  FORMAT 
oook:   
    mov   eax,  [esi]
    push  eax
    push  ebx 
    call  printf
    inc   esi
    cmp  [esi], 0x0
    jnz  oook 
```

[编辑：好的，对不起，我很快将它破解到一些 shenzi winOS 内联`__asm`块中]
这是在 linux 和 nasm 中完成的完整的事情：

```
; ----------------------------------------------------------------------------
; blah.asm
; ----------------------------------------------------------------------------  

        extern  printf

        SECTION .data                   ;local variables
        fmt: db "next char:%c", 10, 0   ;printf format, "\n",'0'

        SECTION .text                   ;hack in some codes XD
        global foo

foo:                                    ;foo entry
        push  ebp                       ;set up stack frame
        mov   ebp,esp

        mov   esi, [ebp+8]              ;load the input char array to the source index

oook:                                   ;loop while we have some chars
        push  dword [esi]               ;push next char addy in string to stack
        push  dword fmt                 ;push stored format string to stack

        call  printf

        add   esp, 8                    ;restore stack pointer 
        inc   esi                       ;iterate to next char
        cmp   byte [esi], 0             ;test for null terminator byte 
        jnz   oook

        mov   esp, ebp                  ;restore stack frame
        pop   ebp

        mov   eax,0                     ;return 0
        ret                             ;done 
```

blah.c（调用 .asm foo）：

```
/*-----------------------------------------------
blah.c
invokes some asm foo
------------------------------------------------*/
#include <stdio.h>

void foo(char*);

int main() {

    char sz[]={"oook\n"};
    foo(sz);

    return 0;
} 
```

&这里是命令行的东西：

```
$ nasm -f elf blah.asm -o blah.o
$ gcc -o blah blah.c blah.o
$ ./blah
next char:o
next char:o
next char:o
next char:k
next char:

$
$ nasm -v
NASM version 2.09.08 compiled on Apr 30 2011

$ uname -a
Linux violet-313 3.0.0-17-generic #30-Ubuntu SMP Thu Mar 8 17:34:21 UTC 2012 i686 i686 i386 GNU/Linux 
```

希望对你有帮助 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:59:50.723

在 linux x86 上，第一个函数参数位于`ecx`. 打印指针的 printf 格式是`"%p"`.

所以一些东西

```
 ...
    FORMAT: db '%p', 10, 0 ; to break the line 10, 0
processdata:
    mov eax, [esp+4]
    push eax
    push format
    call printf
    add esp, 8
    ret 
```

应该可以工作，假设您的其余代码是正确的并且您正在使用 gcc 的调用约定。

这是假设您要打印的指针在堆栈上。

崩溃的原因可能是您在堆栈上压入 12 个字节，但仅将堆栈指针更正了 8 个。

# php - 在当前目录上使用 glob？

> ID：10417987
> 
> 赞同：3
> 
> 时间：2012-05-02T16:37:09.297
> 
> 标签：php, glob

目前我有一个脚本正在运行，以基于以“154x154.jpg”结尾的目录中获取所有图像。基本上我正在做的是浏览画廊目录并寻找所有图像的缩略图，然后我将在网站主页上的滑动画廊中输出。

```
<?php
// loop through the images
$count = 0;
$images = array();

foreach (glob("../../uploads/2012/05/*154x154.jpg") as $filename) {
    $images[$count] = $filename;    
    $count++;
}
for ($i = 0; $i < 7; $i++) {
    $random = mt_rand(1, $count - 1);
    echo '<li><a class="gal_img" href="#">';    
    echo '<span class="roll"></span>';
    echo '<img class="image" src="'.$images[$random].'" height="154" width="154" alt="" />';
    echo '</a></li>';
}

?> 
```

这工作得很好，但我需要做的是能够从当前目录上方的目录中获取文件。更具体：

图片文件夹：[http://root/wp-content/uploads/2012/05/](http://root/wp-content/uploads/2012/05/)
主题文件夹：[http://root/wp-content/themes/theme_folder/](http://root/wp-content/themes/theme_folder/)

** 编辑 **

现在一切都与上面的代码一起工作，当我直接进入文件时，它执行得很好。但是在主题中使用它会生成除代码中的文件路径之外的所有内容。使用 wordpress 3.3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:38:18.303

尝试：

```
foreach (glob("../images/*154x154.jpg") as $filename) { 
```

## 更新：

当然，这是一个相对路径，仅当您需要包含的文件位于脚本当前工作目录的上一级时才有效。解决方案：使用绝对路径，即。一个以 . 开头的`/`。另外，请记住，绝对路径是磁盘上的路径，而不是您网站的根文件夹。

# tridion - SDL Trididion 2009 中页面图标状态的扩展

> ID：10417989
> 
> 赞同：9
> 
> 时间：2012-05-02T16:37:12.577
> 
> 标签：tridion

我们使用的是 SDL Tridion 2009 SP1。我们已经实现了一项新功能，即 CMS 中的一个扩展，它允许我们锁定页面。如果页面被锁定，则无法再发布（锁定页面的信息保存在为此扩展创建的数据库中）。

我们想添加一个新图标，它将通知用户页面的新状态。

现在有 4 个图标组合（无操作、已检查、已发布、已检查和已发布）

由于我没有长期使用 CMS 界面的经验，因此我需要一些帮助来找到对性能没有影响的解决方案，并且在不进行大量修改的情况下易于实施。

以下是我对此的调查：

我注意到在 cms 中呈现图标的方式并不是一个可以轻松更新的简单机制。每次我们单击 CMS 左侧的项目时，为了从右侧呈现列表，都会对 WebGUIResponder.aspx 进行 ajax 调用（带有 xml 请求）。页。

我们将得到的响应是一个包含属性字段 Icon 的 xml

```
<tcm:ListItems xmlns:tcm="http://www.tridion.com/ContentManager/5.0" 
    ID="tcm:yyy-zzzz-4" Managed="68" ItemType="4">
    <tcm:Item ID="tcm:yyy-zzzzz-64" Type="64" Title="NotificationTest" 
        Modified="2011-05-09T09:42:27" FromPub="400 YYYY Website Master (EN-GB)" 
        IsNew="false" Icon="T64L0P1"/>
</tcm:ListItems> 
```

基于此字段图标属性 (Icon="T64L0P1) 开始处理图像名称。

*   T64 = 表示它是一个页面
*   L0 = 未检查
*   P1 = 已经发布

对于此类字段，图像名称结果将为 = T64.16x16.List.Published.gif

我找不到通过页面 xml 更新此字段的方法，不是保存在 xml 中的信息，而是在 xml 请求时在 dll 中构建的。（在某处基于其他字段，例如已发布以及此图标字段的其他内容。）

因此，如果无法修改此字段，我们可能有的选项是：为了在不修改其 .dll 的情况下将我们的更改集成到 CMS 中（为了与新版本的 SDL Trdion 兼容，在dll），并且没有改变我对这种方法的考虑太多的逻辑。

我们可以对新页面 WebGUICheckPageLocked.aspx 进行新的 Ajax 调用（需要测试对性能有什么影响）。在这个页面后面的代码中，我们可以确定页面是否被锁定（使用我们的内部函数来确定页面是否被锁定，这个功能已经完成）。在页面中，我们将图标字段更改为 T64L0P1E01（添加一些额外的信息，使我们能够确定页面的新状态）。我们还将修改在 GetPNGIconName javascript 函数中，然后我们可以根据新信息 E01 进行额外检查 ...)

请如果有人对此有更好的想法，也许这很容易做到，也许这是我们可以更新图标字段的一种方式。

亲切的问候，克里斯蒂娜

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T08:24:43.883

我将在此处粘贴论坛中的答案，以便每个人都可以看到（并且可能会提出如何以不同方式进行操作的想法？）...

在 2011 年，我会使用 Data Extender 来更改图标。

由于这是 2009 年，您将需要使用不太优雅的前身：GUI Responder Extension。本质上，您需要操作为相关请求返回的 XML（例如文件夹上的 GetList）。

我无法立即找到任何关于此的文档 - 这并不奇怪，因为它是旧版本。但归结为：

1.  创建一个 .NET 程序集，其中包含具有以下方法签名和属性的类：

```
 [ResponseMessageHandler]
    public XmlDocument HandleMessage(XmlDocument messageXml, string userName, HttpContext httpContext, object tcmSession) 
```

1.  在该方法中，您可以根据自己的逻辑更改 XML 中的图标集。
2.  在扩展配置文件中，添加一个部分以挂钩到您关心的列表的响应（用您添加的程序集的名称替换“YourResponderExtension.dll”）：

```
<ProcessResponse>
    <!-- GetList -->
    <ExecuteWhen>/tcmapi:Message/tcmapi:Response/tcmapi:Request/tcmapi:GetList</ExecuteWhen>                                                                                    

    <!-- Handler for all of the above -->
    <Execute>/bin/YourResponderExtension.dll</Execute>
</ProcessResponse> 
```

1.  在适用的情况下添加更多元素 - 并使 XPath 查询尽可能具体，以避免不必要地调用您的扩展。您可能还需要检查 .NET 代码中无法使用 XPath 查询执行的更多情况。
2.  压缩您的扩展并使用 TcmExtensionInstaller.exe 部署它。

从您的文字中，我假设您已经在 2009 年研究了如何创建和打包扩展。我希望这些小步骤可以帮助您入门。

如果您有任何问题或后续问题，请告诉我，我会看看是否可以回答。

# android - Android Spinner 添加项目

> ID：10417991
> 
> 赞同：0
> 
> 时间：2012-05-02T16:37:22.937
> 
> 标签：android, button, spinner, add, items

我正在开发一个应用程序，需要一些有关微调器小部件的帮助。该数组在创建时没有任何条目，将在另一个函数中填充。所以我想我必须使用`adapter.add(item);`并`spinner.setAdapter(adapter);`更新这个函数中的微调器。

> ```
> // global variables
>     String[] test = new String[100];
>     int x = 0;
>     Spinner s;
>     ArrayAdapter adapter;
>     Button btn1;
> 
>     @Override
>     public void onCreate(Bundle savedInstanceState) {
>         super.onCreate(savedInstanceState);
>         setContentView(R.layout.main);
> 
>         btn1 = (Button) findViewById(R.id.button1);
>         btn1.setOnClickListener(this);
>         s = (Spinner) findViewById(R.id.spinner1);
>         adapter = new ArrayAdapter(this,
>         android.R.layout.simple_spinner_item, test);
>     }
> 
>   public void onClick(View arg0) {
>       test[x] = String.valueOf(x);;
>       x++;
>       adapter.add(test[x]);
>       s.setAdapter(adapter);
>   } 
> ```

仅出于教育目的，我尝试了此操作，但 onClick() 函数中仍然存在错误。我猜必须对 ArrayAdapter 做一些事情。但我对此并不熟悉，也没有找到通过按下按钮添加项目的示例。也许在其他地方只是一个简单的失败，但目前我只是没有看到它。

这里是完整的代码：

> ```
>  ArrayList<Integer>  test;
>     int x = 0;
>     Spinner s;
>     ArrayAdapter adapter;
>     Button btn1;
> 
>     @Override
>     public void onCreate(Bundle savedInstanceState) {
>         super.onCreate(savedInstanceState);
>         setContentView(R.layout.main);
>         btn1 = (Button) findViewById(R.id.button1);
>         btn1.setOnClickListener(this);
>         s = (Spinner) findViewById(R.id.spinner1);
>         test = new ArrayList<Integer>();
>         adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item, test);
>     }
> 
>   public void onClick(View arg0) {
>       test.add(x);
>       x++;
>       s.setAdapter(adapter);
>   } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:49:38.787

问题是您将`ArrayAdapter`的数据设置为 100 个空字符串，然后在按下按钮时添加到该字符串的末尾。尝试将您的`test`变量更改为`new String[0]`.

然后在您的`onClick`方法中，只需调用`adapter.add(String)`. 它会将它添加到您当前数据的末尾，因此您最初不需要给它一个足够大的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:22:41.370

您将 x 添加到数组元素，然后将此元素传递给 adapter.add 方法。这实际上与使用：adapter.add(x); 相同。

为什么不使用 ArrayList 而不是数组。ArrayList 是动态的，不需要指定初始大小。一个非常快速的检查告诉我有一个与 ArrayLists 兼容的 Array Adapter 的构造函数，我希望 List 类的任何后代。请参阅下面的代码示例。

```
ArrayList<Integer> test = new ArrayList<Integer>();

ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item, test); 
```

我知道这不是您问题的完整解决方案，而只是指向可能更好的解决方案的指针。

使用术语“android 在运行时更新 arrayAdapter”进行网络搜索，我相信你会偶然发现一个更具体的例子。

# c# - 如何将单例作为泛型类型参数传递？

> ID：10417999
> 
> 赞同：1
> 
> 时间：2012-05-02T16:37:49.300
> 
> 标签：c#, generics, singleton, factory-pattern

我有一个边缘界面：

```
public interface IEdge<TPoint, TFactory>
    where TPoint : IPoint
    where TFactory : IEdgeFactory<TPoint>
{
    TPoint Begin { get; }
    TPoint End { get; }
    void Divide();
} 
```

边缘可以划分为产生嵌套边缘的边缘。使用工厂模式创建新边：

```
public interface IEdgeFactory<TPoint>
    where TPoint : IPoint
{
    IEdge<TPoint> Create(TPoint begin, TPoint end)
} 
```

我希望能够在我的`IEdge`实现中实例化一个工厂。通常我会使用 ie 来做`public static IEdgeFactory<TPoint> Instance { get; }`，但我不能在界面中定义它。

那么有没有办法将单例工厂作为类型参数传递并为实现提供一种实例化它的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:44:26.660

您可以简单地将工厂传递给实现接口的类：

```
public interface IEdge<TPoint>...

class MyEdge : IEdge<MyPoint>
{
   IEdgeFactory<MyPoint> factory;
   public MyEdge(IEdgeFactory<MyPoint> factory)
   {
      this.factory = factory;
   }
} 
```