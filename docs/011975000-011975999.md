# StackOverflow 问答 11975000-11975999

# charts - YUI3 Sandbox 中的 Google 可视化 API

> ID：11975002
> 
> 赞同：0
> 
> 时间：2012-08-15T18:32:29.460
> 
> 标签：charts, google-visualization, yui3

我正在使用 YUI3 作为我的应用程序的 javascript 框架，大约完成了 90%。我需要展示一些漂亮的图表，但是 YUI3 的图表功能还有很多不足之处。

我正在尝试使用 Google 的 Visualization API 在 YUI3 沙箱中生成绘图，但它似乎无法正常工作。这是示例代码：

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript' src = 'build/yui/yui-min.js'></script>
</head>
  <body>
    <div id='chart_div'></div>
  </body>
</html>

<script type='text/javascript'>

var some_foo = function () {      
    google.load('visualization', '1', {packages:['gauge']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Memory', 80],
          ['CPU', 55],
        ]);

        var options = {
          width: 400, height: 120,
          redFrom: 90, redTo: 100,
          yellowFrom:75, yellowTo: 90,
          minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
}

YUI().use('node', function (Y) {
    /* doing some super-awesome stuff */

    /* now trying to show charts with some data */  
    some_foo();
});

</script> 
```

当我在 YUI3 沙箱之外调用 some_foo() 时，代码可以工作。但是，当我尝试从 YUI3 中调用它时，它不起作用。

我还尝试在 YUI3 沙箱内、YUI3 沙箱外、YUI3 沙箱之前以及 YUI3 沙箱之后声明 some_foo()。我已经在 FF14+ 和 Chrome20+ 上尝试过代码。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:33:32.557

@KingJulian，不确定您现在是否已经有了答案。我将 `google.load('visualization', '1', {packages:['gauge']});`“some_foo”函数移到“脚本”标签，它工作了。

以下代码对我有用：

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
   <script src="http://yui.yahooapis.com/3.6.0/build/yui/yui-min.js"></script>
</head>
  <body>
    <div id='chart_div'></div>
  </body>
</html>

<script type="text/javascript">
      google.load('visualization', '1', {packages:['gauge']});
</script>
<script type='text/javascript'>

var some_foo = function () {      

      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Memory', 80],
          ['CPU', 55],
        ]);

        var options = {
          width: 400, height: 120,
          redFrom: 90, redTo: 100,
          yellowFrom:75, yellowTo: 90,
          minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
}

YUI().use('node', function (Y) {

   some_foo();
});

</script> 
```

# applescript - 如何使用苹果脚本从图像中删除@2x

> ID：11975004
> 
> 赞同：0
> 
> 时间：2012-08-15T18:32:30.560
> 
> 标签：applescript

该脚本的工作原理与上一个问题中提到的一样，可将@2x 添加到文件夹中的所有文件，但是我如何制作或更改此苹果脚本以删除@2x。

```
set appendable to "@2x"
set theFolder to choose folder
tell application "Finder"
    set theFiles to (files of entire contents of theFolder) as alias list
    repeat with theFile in theFiles
        set FileExtension to theFile's name extension as string
        set FileName to theFile's name as string
        set FileBaseName to text 1 thru ((offset of "." in FileName) - 1) of FileName
        set theFile's name to FileBaseName & appendable & "." & FileExtension
    end repeat
end tell 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:01:19.490

```
tell application "Finder"
    repeat with f in (files of entire contents of (choose folder) as alias list)
        set n to name of f
        set x to name extension of f
        if n does not end with "@2x." & x then next
        set name of f to text 1 thru (-5 - (count x)) of n & "." & x
    end repeat
end tell 
```

It would be easier to do it in a shell: `IFS=$'\n'; for f in $(find ~/Desktop -name '*@2x*'); do mv "$f" "${f//@2x/}"; done`.

# android - Android 主屏幕启动器

> ID：11975008
> 
> 赞同：0
> 
> 时间：2012-08-15T18:32:52.283
> 
> 标签：android, android-intent, launcher

首先让我告诉你们，我是 Android 应用程序开发的新手。我想知道如何启动主屏幕，然后启动应用程序主屏幕。即每当您点击某个应用程序时，首先它会显示一些徽标屏幕，然后自动跳转到应用程序的主屏幕。我正在运行应用程序的主屏幕，我只想在用户单击应用程序时添加某种徽标屏幕。

我对此做了一些研究，我发现

```
<intent-filter>
             <action android:name="android.intent.action.MAIN" />
             <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

如果我将此添加到徽标活动中，那么如何自动调用 app_home_screen 活动希望我足够清楚地解释这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:09:34.757

尽管其他答案肯定有效，但这里有一个替代方法，可以避免仅针对您的徽标进行单独的活动：

1.  将您的 ImageView 按您的意愿（即覆盖您的全屏）放置在您的主要活动布局中的其他元素之前（它们将在屏幕之外具有初始布局）。
2.  在 onCreate 中调用 setContentView 后，运行 SystemClock.sleep(LOGO_TIME)，其中 LOGO_TIME 是一个整数，表示您希望徽标出现的毫秒数。
3.  最后，调用 setVisibility(View.GONE)。

您的 ImageView 将消失，其他布局元素将落入其位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:01:12.390

你需要：

*   添加一个新的 Activity `SplashActivity`，它将成为您应用的启动 Activity。
*   当您的应用程序启动时，启动您的应用程序`SplashActivity`并等待一段时间。
*   等待完成后，开始`MainActivity`并完成`SplashActivity`.

这是一个很好的例子：

**闪屏活动：**

```
public class SplashScreenActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash_layout); //You need to define it in your layouts
    final int welcomeScreenDisplay = 3000; //splash lasts for 3 sec. You can change it
    /** create a thread to show splash up to splash time */
    Thread welcomeThread = new Thread() {
        int wait = 0;
        @Override
        public void run() {
            try {
                super.run();
                while (wait < welcomeScreenDisplay) {
                     sleep(100);
                     wait += 100;
                }
            } catch (Exception e) {
                System.out.println("EXc=" + e);
            } finally {
                startActivity(new Intent(SplashScreenActivity.this, MainScreenActivity.class));
                finish();
            }}
        };
        welcomeThread.start();

    }
} 
```

并且不要忘记将活动添加到您的清单文件中：

```
<activity
    android:name=".SplashScreenActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity
    android:name=".MainScreenActivity"
    android:label="@string/app_name" >
</activity> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T18:36:08.730

您可以尝试的一种解决方案是将徽标加载为主要活动，并让应用程序暂停几秒钟，然后再调用第二个活动，即您的“真正”主页。

要开始第二个活动，您将使用“意图”，例如

```
Intent myIntent = new Intent(myFirstActivity.this, realHomePage.class);
myFirstActivity.this.startActivity(myIntent); 
```

只需确保在您的主页类中扩展 Activity 类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T18:37:34.910

当你的应用程序图标被点击时被调用的主要活动是一个只有你的徽标的视图的活动。一些简单的东西，只是一个RelativeLayout 和一个ImageView。延迟一段时间后，让此活动开始您的实际主要活动。

# ruby-on-rails - 使用 Rails ActiveResource 序列化简单的 JSON 字符串

> ID：11975009
> 
> 赞同：1
> 
> 时间：2012-08-15T18:33:04.873
> 
> 标签：ruby-on-rails, ruby, json, activeresource

我有一个 RESTful API 调用，其行为如下：

```
HTTP GET http://addresss:port/settings/{setting} 
```

它仅返回指定为简单字符串的设置值：

```
"settingValue" 
```

我想使用 ActiveResource:Base 的子类检索此值

```
class Settings < ActiveResource:Base
  self.site = CONFIG['uri']
  self.collection_name = 'settings'
  self.format = :json
  ...
end 
```

但是当我打电话时`Settings.find("Setting")`，我得到了`unexpected token at '"settingValue"'`。

我可以更改从 API 返回的数据的格式，但无论如何要让 Rails 正确处理这些数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:27:38.780

您的 api 不会呈现 json，因此 Active Resource 在尝试解析纯文本时会失败。

使用另一种方式与 api 进行通信，例如[restclient](https://github.com/archiloque/rest-client/)

# android - 从资源中获取带有 xml 布局的 getApplicationContext

> ID：11975010
> 
> 赞同：0
> 
> 时间：2012-08-15T18:33:04.693
> 
> 标签：android, textview, android-xml

我被困在一段代码上。我有一个 PHP 页面，它可以从数据库中获取我的值，这一切都很好。然后在我的活动中，我将它返回以显示在文本视图中，问题是。我在我的 xml 中有一个背景，但它没有显示，

我还在我的文本视图中看到 [http://www.wvvzondag2.nl/android/leesverslag.php](http://www.wvvzondag2.nl/android/leesverslag.php) {"introtext":""my variable values from the database"}

这是我的活动

```
public class Leesverslag extends Activity{
/** Called when the activity is first created. */

TextView txt;

public static final String KEY_121 = "http://www.wvvzondag2.nl/android/leesverslag.php"; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.leesverslag);
    // Create a crude view - this should really be set via the layout resources  
    // but since its an example saves declaring them in the XML.
    ScrollView rootLayout = new ScrollView(getApplicationContext());
    //txt = (TextView)findViewById(R.id.verslag);
    txt = new TextView(getApplicationContext());  
    rootLayout.addView(txt);  
    setContentView(rootLayout);
    // Set the text and call the connect function.  
    txt.setText("Connecting..."); 
    //call the method to run the data retrieval and convert html tag to (plain) text
    txt.setText(Html.fromHtml(getServerData(KEY_121))); 
}

private String getServerData(String returnString) {

   InputStream is = null;

   String result = "";
    //the year data to send
   String titelhoofd = getIntent().getStringExtra("titelverslag");
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("titel",titelhoofd));

    //http post
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(KEY_121);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }

    //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
    }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
    }
    //parse json data
    try{
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++){
                    JSONObject json_data = jArray.getJSONObject(i);
                    Log.i("log_tag","id: "+json_data.getString("introtext")
                    );
                    //Get an output to the screen
                    returnString += jArray.getJSONObject(i); 
            }
    }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
    }
    return returnString; 
}    

} 
```

这是我的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:visibility="visible"
    android:keepScreenOn="true"
    android:id="@+id/scrollView1"
    android:scrollbars="vertical"
    android:background="@drawable/bg">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/verslag"
            android:gravity="center"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
        </TextView>

    </LinearLayout>

</ScrollView> 
```

我想只看文字和我的背景，但我似乎无法修复它。

有人可以帮我吗？

亲切的问候，帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:58:27.947

您不能直接向滚动视图添加多个视图，只需像 xml 中的方式一样引用您的 LinaerLayout

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:visibility="visible"
android:keepScreenOn="true"
android:id="@+id/scrollView1"
android:scrollbars="vertical"
android:background="@drawable/bg">

<LinearLayout  android:id="@+id/Linear"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</LinearLayout> 
```

然后在你的创建方法中

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.leesverslag);
LinearLayout mLinearlayout= (LinearLayout) findViewById(R.id.Linear);
    TextView txt = new TextView(this);
    txt.setText("Connecting..."); 
    mLinearlayout.addView(txt);

    Runnable postRunnable = new Runnable() {

        @Override
        public void run() {
            txt.setText(Html.fromHtml(getServerData(KEY_121))); 

        }
    };
    txt.post(postRunnable,500); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:38:37.530

问题是您正在设置一个初始内容视图，`setContentView(R.layout.leesverslag);`之后您继续创建一个用于覆盖第一个视图的新视图。

尝试替换这个：

```
ScrollView rootLayout = new ScrollView(getApplicationContext());
//txt = (TextView)findViewById(R.id.verslag);
txt = new TextView(getApplicationContext());  
rootLayout.addView(txt);  
setContentView(rootLayout);
// Set the text and call the connect function.  
txt.setText("Connecting..."); 
```

有了这个：

```
txt = (TextView)findByViewId(R.id.*yourtextviewid*)
txt.setText("Connecting..."); 
```

这会将初始内容视图上的 TextView 分配给`txt`.

# jquery - 如果 Rails 3 应用程序不收费，如何禁用 Stripe 的咖啡脚本？

> ID：11975012
> 
> 赞同：0
> 
> 时间：2012-08-15T18:33:13.837
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, coffeescript, stripe-payments

我正在使用 Stripe 在我的 Rails 3 应用程序中接受付款。Stripe 需要这个咖啡脚本：

```
jQuery ->
  Stripe.setPublishableKey($('meta[name="stripe-key"]').attr('content'))
  video.setupForm()

video =
  setupForm: ->
    $('#new_video input:submit').click ->
      $(this).addClass('wasclicked')

    $('#new_video').submit ->
      clickedBtn = $(this).find('.wasclicked')

      if clickedBtn.attr('name') != 'back_button' && $('#card_number').length
        video.processCard()
        clickedBtn.removeClass('wasclicked')
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, video.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 200
      $('#video_stripe_card_token').val(response.id)
      $('#new_video')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false) 
```

在我的应用程序中，如果向客户收取的费用为 0，则 Stripe 信用卡字段是隐藏的，并且不需要成功提交表单。我的控制器中的此语句说明了这一点：

```
@video.save if @video.all_valid? && ((@total > 0 && @video.save_with_payment(@total)) || @total == 0) 
```

这是我遇到的问题：当费用为 0 并且我的表单中不需要付款时，我点击提交按钮提交表单，但没有任何反应。我可以单击并单击，但没有任何反应。但是，当我重新加载页面时，表单已成功提交。

我删除了 Stripe 的咖啡脚本文件（上图），然后提交按钮在这种情况下起作用。那么如何在这个例子中禁用咖啡脚本呢？“if”语句会进入我的控制器或咖啡脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:23:18.987

在您的提交事件中，返回 false 会阻止表单提交。如果您不想要这种行为，请返回 false 以外的任何值。在这种情况下，如果您的费用为 0，听起来您只需要一起绕过处理，这就是您需要的：

```
$('#new_video').submit ->
  clickedBtn = $(this).find('.wasclicked')

  if clickedBtn.attr('name') != 'back_button' && $('#card_number').length && $('#charge').val() > 0
    video.processCard()
    clickedBtn.removeClass('wasclicked')
    false
  else
    true 
```

# javascript - HTML 画布三角函数

> ID：11975016
> 
> 赞同：-2
> 
> 时间：2012-08-15T18:33:30.943
> 
> 标签：javascript, html, canvas, trigonometry

我不擅长三角，但我不得不大量使用它来达到我想要的结果。关于我的数学的一些东西是关闭的[断开的链接]（右键单击）。

有人可以看看motion.js吗？我试图让圆圈朝着右键单击的方向移动。

（如果其他人看到这个问题，请知道我已经用一个工作示例更新了页面）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:33:49.080

只是改变

```
scrollX = scrollX+(Math.cos(d_to_r(direction)))*step;
scrollY = scrollY+(Math.sin(d_to_r(direction)))*step; 
```

和

```
var factor=direction>0&&direction<90 || direction>180&&direction<270?-1:1
scrollX = scrollX+(Math.cos(d_to_r(direction)))*step*factor;
scrollY = scrollY+(Math.sin(d_to_r(direction)))*step*factor; 
```

# python - 解析命令 CLI 程序 Python

> ID：11975018
> 
> 赞同：1
> 
> 时间：2012-08-15T18:33:37.580
> 
> 标签：python, parsing, command-line

我曾经用 Python 2 编写我的（简单的）Python 程序，但似乎 Python 3 已经相当成熟了。我现在调用了一个 CLI 程序`ratjuice.py`，当我执行它时，程序会要求输入命令（我已经为此做了一些选项卡完成）。

所以我可能有类似`html`的命令，可以输出像`parse`or之类的子命令`destroy`。我可能想使用命令`html parse rat.html`。所以我正在寻找一个 Python 模块，它允许我根据*白名单*解析这个输入。所以我基本上会告诉什么是允许的，其余的被忽略或拒绝（如果我清理输入，我可能会忘记一些事情......）

除了简单的字符串操作之外，还有什么*好的*方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:43:34.517

看看[cmd](http://docs.python.org/library/cmd.html)模块。它进行行编辑并记住历史（据说）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:45:30.770

我刚刚拼凑的一个字符串解析版本，不需要额外的库，它适用于您的“白名单”想法：

```
def foo1(bar):
   print '1\. ' + bar

def foo2(bar):
   print '2\. ' + bar

def foo3(bar):
   print '3\. ' + bar

cmds = {
   'html': {
      'parse': foo1,
      'dump': foo2,
      'read': {
         'file': foo3,
      }
   }
}

def argparse(cmd):
   cmd = cmd.strip()
   cmdsLevel = cmds
   while True:
      candidate = [key for key in cmdsLevel.keys() if cmd.startswith(key)]
      if not candidate:
         print "Failure"
         break

      cmdsLevel = cmdsLevel[candidate[0]]
      cmd = cmd[len(candidate[0]):].strip()

      if not isinstance(cmdsLevel, dict):
         cmdsLevel(cmd)
         break

argparse('html parse rat.html')
argparse('foo')
argparse('html read file rat.html')
argparse('html dump rat.html') 
```

# python - 字典到python中的字典

> ID：11975020
> 
> 赞同：2
> 
> 时间：2012-08-15T18:33:49.693
> 
> 标签：python, dictionary

好的，这个应该很简单。我有3本词典。它们的制作、订购和填充都令我满意，但我想将它们全部放在一个总括字典中，以便我可以更轻松、更有效地参考和操作它们。

```
Layer0 = {}
Layer1 = {}
Layer2 = {} 
```

它们在创建时就在这里，之后我根据 SO 问题无力地尝试了不同的东西：

```
Layers = {Layer0, Layer1, Layer2} 
```

这引发了语法错误

```
Layers = {'Layer0', 'Layer1', 'Layer2'} 
```

这引发了另一个语法错误

（`Layers`是我正在尝试创建的字典，其中包含所有以前制作的字典）

我在 SO 上找到的所有其他示例都与在字典中创建字典以填充它们（或同时填充它们）有关，并且由于我已经编写了大量行来制作这些字典，我宁愿将它们放入事后的字典，而不是重写代码。

放入时最好保留字典的顺序`Layers`

有谁知道这是否可能以及我应该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T18:35:51.803

[字典](http://docs.python.org/tutorial/datastructures.html#dictionaries)项既有键又有值。

```
Layers = {'Layer0': Layer0, 'Layer1': Layer1, 'Layer2': Layer2} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:20:57.573

请记住，字典没有顺序，因为字典是一个哈希表（即从您的键名到唯一哈希值的映射）。使用 .keys() 或 .values() 会生成一个列表，该列表确实有顺序，但字典本身没有。

因此，当您说“最好在放入图层时保留字典的顺序” - 这并不意味着什么。例如，如果您将字典从“Layer1、Layer2、Layer3”重命名为“A、B、C”，您将看到 Layers.keys() 以“A、C、B”的顺序打印。无论您在构建字典时使用的顺序如何，这都是正确的。这一切都表明“C”的哈希值小于“B”的哈希值，它并没有告诉你任何关于字典结构的信息。

这也是为什么您不能直接遍历字典的原因（您必须遍历例如键列表）。

附带说明一下，这个哈希函数允许字典进行疯狂的快速查找。一个好的散列函数将为您提供恒定时间 [O(1)] 查找，这意味着您可以在相同的时间内检查给定项目是否在您的字典中，无论字典包含十个项目还是一千万个项目。很酷。

# iphone - uibutton 和 uilabel 的 UILongPressGestureRecognizer 问题

> ID：11975022
> 
> 赞同：1
> 
> 时间：2012-08-15T18:33:56.887
> 
> 标签：iphone, ios, uibutton, gesture

我有 2 个 uibutton 和 1 个标签，并且 longpressgesture 绑定到这些控件。当在任何控件上发生长按时，如何获取下面发生长按的对象是我编写的代码。

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
btn.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[btn addTarget:self action:@selector(wasDragged:withEvent:) forControlEvents:UIControlEventTouchDragInside];
//[self.view addSubview:btn];
btn.userInteractionEnabled = YES;

// add it
[self.view addSubview:btn];
UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc]
                                           initWithTarget:self 
                                           action:@selector(handleLongPress:)];
longPress.minimumPressDuration = 1.0;
[btn addGestureRecognizer:longPress]; 
```

下面是在 longpress 上调用的函数

```
-(void)handleLongPress:(id)sender{
 } 
```

如果我打印发件人的描述，那么我会得到

```
 <UILongPressGestureRecognizer: 0x6aa4480; state = Began; view = <UIRoundedRectButton 0x6aa9570>; target= <(action=handleLongPress:, target=<ViewController 0x6a8cc60>)>> 
```

从中我怎样才能在发生长按事件时获得对象的引用我的意思是我如何知道我是否按下了 UiLabel 或 Uibutton？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:36:13.820

只需检查 UIGestureRecognizer 的（父类）视图属性：

> @property(nonatomic, readonly) UIView *view
> 
> 手势识别器附加到的视图。（只读）
> 
> @property(nonatomic, readonly) UIView *view Discussion 您使用 addGestureRecognizer: 方法将手势识别器附加（或添加）到 UIView 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:41:32.547

```
-(void)handleLongPress:(UILongPressGestureRecognizer *)sender{

    if ([sender.view isKindOfClass:[UIButton class]]) {

            UIButton *myButton = (UIButton *)sender.view; // here is your sender object or Tapped button

            if (myButton.tag == 1) {

                    //sender is first Button. Because we assigned 1 as Button1 Tag when created.
            }
            else if (myButton.tag == 2){

                    //sender is second Button. Because we assigned 2 as Button2 Tag when created.
            }
    }

    if ([sender.view isKindOfClass:[UILabel class]]) {

        UILabel *myLabel = (UILabel *)sender.view; // here is your sender object or Tapped label.

    }

} 
```

# iphone - 如何获取存储在 NSDocumentsDirectory 中的文件的名称？

> ID：11975023
> 
> 赞同：2
> 
> 时间：2012-08-15T18:33:55.877
> 
> 标签：iphone, ios, filenames, nsdocumentdirectory

我有一些文件保存在我的 NSDocumentsDirectory 中，我如何获取这些文件的名称，然后在 uitableview 中显示这些名称？

我只想将对象的名称检索为 NSString，我可以将文件检索为对象，但不能检索它们的名称。

这是它的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSError * error;
objectsAtPathArray =  (NSMutableArray*)[[NSFileManager defaultManager]
                      contentsOfDirectoryAtPath:documentsDirectory error:&error];
[objectsAtPathArray removeObjectAtIndex:0]; 
```

最后一行是删除 .DS_Store 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:17:46.737

尝试这个，

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    objectsAtPathArray = [[[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:nil]mutableCopy];

    for(int i = 0; i < [objectsAtPathArray count]; i++)
    {
       if (![[objectsAtPathArray objectAtIndex:i]isEqualToString:@".DS_Store"])
       {
         [NewArray addObject:[objectsAtPathArray objectAtIndex:i]];
          NSLog(@"NewArray=%@",[NewArray objectAtIndex:i]);
       }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:33:49.960

添加一个（for in）循环对我有用，

```
for (NSString *fileName in self.objectsAtPathArray){

   cell.textLabel.text = fileName;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T03:51:37.170

这将正确工作：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSFileManager *manager = [NSFileManager defaultManager];
NSArray *imageFilenames = [manager contentsOfDirectoryAtPath:documentsDirectory error:nil];

for (int i = 0; i < [imageFilenames count]; i++)
    {

    NSString *imageName = [NSString stringWithFormat:@"%@/%@",documentsDirectory,[imageFilenames objectAtIndex:i] ];

        if (![[imageFilenames objectAtIndex:i]isEqualToString:@".DS_Store"])
        {
          UIImage *myimage = [UIImage imageWithContentsOfFile:imageName];
          UIImageView *imageView = [[UIImageView alloc] initWithImage:_myimage];
        }
    } 
```

# python - Django-registration - 错误没有名为 urls 的模块

> ID：11975025
> 
> 赞同：1
> 
> 时间：2012-08-15T18:34:05.953
> 
> 标签：python, django, django-urls, django-registration

我正在使用默认 Web 服务器在 Windows 7 上使用 Django 1.4 进行尝试。该站点启动时没有错误。但是当我浏览到 localhost:8000 我收到以下错误

```
ImportError at /
No module named urls 
```

我看到错误来自哪里

它在主 URLs.py 文件中 - (r'^admin/', include('django.contrib.admin.urls')),

如果我删除该表单 URLs.py 文件，则会出现主页。我在“C:\Python27\Lib\site-packages\django\contrib\admin”文件夹中看不到 urls.py 文件。所以，这个错误是有道理的。

但是这条线必须在那里才能让 Django-Registration 包工作。我读过的所有博客都有这一行。我如何通过这个？非常感谢您的错误。

按照以下 Siva 的说明修复了 url.py。但没有运气。

```
from django.conf.urls import patterns, include, url

from SOWLAPP.views import *
from CATALOG.views import *
# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'SOWL.views.home', name='home'),
    # url(r'^SOWL/', include('SOWL.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url (r'^user/(\w+)/$', user_page),
    (r'^login/$', 'django.contrib.auth.views.login'),
    (r'^catalog/$', home),
    (r'^static/(?P<path>.*)$', 'django.views.static.serve',
        { 'document_root' : 'C:/SHIYAM/Personal/SuccessOwl/SOWL0.1/SOWL/SOWL/static'}),
    (r'^admin/', include('django.contrib.admin.urls')),
    (r'^accounts/', include('registration.urls')),
    (r'^$', main_page),
) 
```

问候， SHM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:49:58.080

检查`ROOT_URLCONF`设置文件中的条目。以下链接可能会对您有所帮助。

[https://docs.djangoproject.com/en/dev/ref/settings/#root-urlconf](https://docs.djangoproject.com/en/dev/ref/settings/#root-urlconf)

[如何为不同分支中的 Django ROOT_URLCONF 设置设置正确的值](https://stackoverflow.com/questions/781211/how-to-set-correct-value-for-django-root-urlconf-setting-in-different-branches)

但是您的 urls.py 看起来很乱。相同网址的 2 个条目？

```
url(r'^admin/', include(admin.site.urls)),
(r'^admin/', include('django.contrib.admin.urls')), 
```

下面的条目应该在最后。

```
(r'^$', main_page), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:28:21.637

尝试注释掉里面的每一行：

```
urlpatterns = patterns('',
    ...
) 
```

如果它不能解决 urls.py 导入中的错误（如我所料）错误...

我怀疑他们在这里的某个地方：

```
from SOWLAPP.views import *
from CATALOG.views import * 
```

尝试在没有在 urls.py 中导入的那些模块的情况下呈现主页

另请提供您的项目 settings.py 配置。那是在 INSTALLED_APPS 部分下。可能有一个应用程序没有 urls.py 并且那里有一些东西。但最后一种情况可能是......（恕我直言）

作为第二个想法，您可能有损坏/更改的 Django 或/和一些应用程序可再发行版本...检查您是否通过自动脚本安装了它们。他们很少有严重的错误。

# javascript - jQuery 查找 - 我可以使用回调吗？

> ID：11975026
> 
> 赞同：5
> 
> 时间：2012-08-15T18:34:08.720
> 
> 标签：javascript, jquery

所以我试图弄清楚我是否可以在 find() 中调用一个函数，如下所示，但我没有得到任何返回到控制台的内容。这是否可以使用 find() 或者我需要找到替代方法？

```
$(".tdInner1").find(".block", function () {
    if( $(this).next().hasClass("continuation") ) {
        console.log("yes");
    } else {
        console.log("no");
    }
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T18:36:07.900

听起来像你想要[`.each()`](http://api.jquery.com/each/)的。

```
$(".tdInner1").find(".block").each(function () {
    if( $(this).next().hasClass("continuation") ) {
        console.log("yes");
    } else {
        console.log("no");
    }
}); 
```

或者可能[`.filter()`](http://api.jquery.com/filter/)

```
$(".tdInner1").find(".block").filter(function () {
    return $(this).next().hasClass("continuation");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T18:36:43.617

你需要`jQuery` `each()`.

```
$(".tdInner1").find(".block").each( function () {
    if( $(this).next().hasClass("continuation") ) {
        console.log("yes");
    } else {
        console.log("no");
    }
}); 
```

`jQuery` `each()`您可以在[官方文档](http://api.jquery.com/each/)中阅读更多信息

或者你可以使用`filter()`

```
var block = $(".tdInner1 .block");

var continuation_is_next = block.next().filter(".continuation").prev(); 
```

或者像这样

```
var continuation_is_next=  $(".tdInner1 .block + .continuation").prev(); 
```

# c# - Monitor.Enter() 方法的内部工作

> ID：11975032
> 
> 赞同：1
> 
> 时间：2012-08-15T18:34:39.650
> 
> 标签：c#, .net, multithreading

> **可能重复：**
> [.NET 中的锁定（监视器）内部实现](https://stackoverflow.com/questions/5111779/lock-monitor-internal-implementation-in-net)

我想知道 Monitor.Enter() 方法是如何工作的？我知道在堆上分配的每个对象都有与之关联的同步块结构。SyncBlock 结构包含 Monitor、Hashcode、AppDomainID 的字段，以及用于与 com/非托管代码互操作的 thunking 数据。CLR 如何处理多个锁请求？如果一个线程持有锁（可能是通过增加 SyncBlock 数据结构的 Monitor 字段的值），其他线程将进入 WaitSleepJoin 状态。CLR 如何处理处于这种状态的线程，以便一旦释放锁，只有一个线程将恢复，而其他线程将继续等待锁？CLR 是否创建任何 WaitHandle 对象并让线程等待 WaitHandle 对象？

# php - PHP、Subversion 和克隆然后提交目录结构

> ID：11975034
> 
> 赞同：1
> 
> 时间：2012-08-15T18:34:45.723
> 
> 标签：php, svn, commit

我有一个有趣的问题，希望有人能帮我解决。我有一个 subversion 存储库，用于存储一个非常大的 PHP 站点的源代码。以下是有关我的设置的一些重要细节：

*   该站点的开发版本位于 /var/www/sitename-dev 的服务器上，是通过从存储库执行 svn 签出创建的。
*   该站点的实时版本位于 /var/www/sitename，并且也是使用 svn checkout 创建的。
*   在存储库上设置了一个提交后挂钩，它将在每次提交后在开发站点上运行 svn 更新，如果提交日志条目包含特殊的部署关键字，则在实时站点上运行 svn 更新。
*   以上所有的工作都非常出色，大大提高了我团队的生产力。

该站点的目的是提供一组许多公司需要的核心功能，并让每个购买我们产品的公司都有自己的专门品牌的站点来提供我们的功能。这是使用 Smarty 模板引擎（非常棒）完成的。每个品牌站点共享相同的核心文件（因此修复核心文件中的错误会为每个站点修复它），并具有位于 /resources/site 的模板目录结构。/resources/site 中的每个文件都是必需的，但内容因站点而异。

我想要做的是在站点的管理员部分创建一个表单，它将创建一个新的品牌站点作为现有默认站点的 /resources/site 目录的克隆（在 /var/ 的本地副本中） www)，并将其添加到 subversion 存储库 (add/commit)。这将允许我们在下一次 svn 更新后立即开始重做模板。

这是我到目前为止所拥有的：

```
public function addNewSiteHandle($handleName){
    try{
        $resourceRoot = "/var/www/site";
        echo "Resource Root = ".$resourceRoot."<br />";
        $resourceRoot .= "/resources";
        echo "Resource Root = ".$resourceRoot."<br />";
        $this->recursiveCopy($resourceRoot."/rtx", $resourceRoot."/".$handleName);
        $files = array();
        foreach(scandir($resourceRoot."/".$handleName) as $file){
            if($file != "." && $file != ".." && $file != ".svn"){
                echo "Processing \"$file\"<br />";
                svn_add($resourceRoot."/".$handleName."/".$file, true, true);
                array_push($files, $resourceRoot."/".$handleName."/".$file);
            }
        }
        svn_commit("Handle \"$handleName\" added through the Website.", $files);
    }
    catch(Exception $e){
        error_log($e->getMessage());
    }
} 
```

这抱怨错误：

> [2012 年 8 月 15 日星期三 14:31:01] [错误] [客户端 192.168.1.x] PHP 警告：svn_add(): svn 错误发生\n155007（路径不是工作副本目录）'/var/ www/site/resources/testtt43' 不是第 76 行 /var/www/site/Subversion.class.php 中的工作副本\n，参考：http: [//b1.festivadev.com/cloneTest.html](http://b1.festivadev.com/cloneTest.html)

我知道该站点是一个工作副本目录，所以我不确定问题是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:57:25.037

您的脚本会复制整个站点目录，包括 .svn 子目录。您不应复制这些 .svn 目录或在复制后递归地从复制的目录中删除它们。之后 SVN 添加和提交应该可以正常工作。

# ios - 用于在 iOS 中不起作用的表单的 Http POST

> ID：11975036
> 
> 赞同：0
> 
> 时间：2012-08-15T18:34:49.320
> 
> 标签：ios, forms, authentication, post, asihttprequest

我正在尝试通过 iPhone 应用程序登录网页。我尝试同时使用 ASIFormDataRequest 和 NSURLConnection 但无法成功完成登录过程。下面是 HTML 表单代码和我的 iOS 代码：

```
<form action="login.chi">
<div id="login">
<div id="login-form">
<table>
<tr>
  <td>Username</td>
  <td><INPUT NAME="username" VALUE=""></td>
</tr>
<tr>
  <td>Password</td>
  <td><INPUT NAME="password" VALUE="" TYPE="password"></td>
</tr>
<tr>
  <td colspan="2" nowrap align="center">
    <input type="submit" name="button" value="Login">
  </td>
</tr>
</table>
</div>
</div></form> 
```

我的应用程序代码：

```
NSURL *url = [NSURL URLWithString:@"http://www.mywebsite.com/login.chi"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:@"test" forKey:@"username"];
[request setPostValue:@"test" forKey:@"password"];

[request startSynchronous]; 
```

它发布数据并返回 HTTP 状态代码 = 200，但未完成身份验证。我用wireshark 看看POST 是否正确，看起来是否正确。请告知我所缺少的..谢谢..

**更新：**

我更仔细地查看了 wireshark 捕获的内容，发现它登陆了一个中间页面，该页面包含需要发送以进行成功身份验证的 URL 信息。响应如下所示：

```
<html><head>
  <meta http-equiv="refresh" content="0;url=http://ip_address:port/login?username=test&response=588ba0bd013e5f4873b46ff96e165e4a&userurl=http://www.google.org/"/>
</head></html> 
```

元标记中的内容包含我需要连接以完成身份验证的“url”。通常浏览器会自动执行此操作，但我无法理解如何在应用程序中处理。我应该解析响应字符串并从中提取 url 吗？这是要走的路吗？请建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:29:30.800

您的表单正在发布到，`login.chi`但您的 Objective-C 代码正在发布到`/login`. 您需要正确的完整路径。

# javascript - 点击功能上的 Jquery 不适用于 IE 8 中的 img

> ID：11975040
> 
> 赞同：0
> 
> 时间：2012-08-15T18:35:26.957
> 
> 标签：javascript, jquery, css, internet-explorer-8

我有一堆单选按钮和图像。我正在尝试使图像可点击，因为我想使用图像代替单选按钮。我正在使用 CSS 来隐藏单选按钮，在 Firefox 中这个脚本效果很好，但在 IE 中根本不起作用（单击图像时没有任何反应）。关于我做错了什么的任何想法？

```
$(document).ready(function() {
    $('img').click(function() {
        $(this).next().click();
    });
});​ 
```

我正在使用 jquery 1.6.1。

我不想在单击后更改图像，我只想能够单击图像并使用它来代替单选框。我可以在 Firefox 中单击图像，但不能在 IE 中单击。

我试过把脚本改成这个，它在 IE 中运行没有任何问题：

```
$(document).ready(function() {
$('img').click(function(){
alert("Show me");
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:22:06.643

[http://jsfiddle.net/uJ9tK/1/](http://jsfiddle.net/uJ9tK/1/)

您向我们展示的代码是正确的。无论您是否隐藏单选按钮，它们都会被单击。单击单选按钮时所做的任何事情都是损坏的部分。我在 IE7、8、9 和兼容模式下对此进行了测试。

# mysql - 表关系建议

> ID：11975042
> 
> 赞同：0
> 
> 时间：2012-08-15T18:35:30.990
> 
> 标签：mysql

我必须将这些数据保存在 MySql 中，但我不确定（因为 SQL/databse 不是我的领域）如何将其组织到一个或多个表中？现在我将表示我的信息如下：

```
device_name|HW_version|SW_version|IP_addr_pvt|IP_addr_pub|data_specific_to_device|associated_service   |associated_device
dev_x      | 1234     |1234      |1.2.3.4    |9.8.7.6    |data_specific_to_x     |SVC_A,SVC_B,SVC_C... |dev_y,dev_z,dev_n,dev_m...
dev_y      | 2348     |7734      |10.2.3.4   |99.8.7.6   |data_specific_to_y.....|SVC_B,SVC_X...       |dev_x,dev_m...
dev_z      | 3934     |5634      |11.2.3.4   |79.8.7.6   |data_specific_to_z.....|SVC_M                |dev_n,dev_m...
... 
```

请建议。什么是最好的设计？data_specific_to_device 可能不止一列，因为我可以更多地探索数据。

我真的需要一个 device_id 字段吗？任何 SQL 表通常都有的。

我想添加很少（几乎从不）更改的数据，并且添加也是每月两次。

泰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:44:58.853

您需要多个表。

“关联服务”将是另一个像这样的表：

```
device_id service 
```

以类似的方式，“关联设备”将是一个表：

```
device_id associated_device 
```

其中每一个都可以有多个用于一个 device_id 的行

“data_specific_to_device”对于不同的设备类型是否有不同的列？在这种情况下，您可能希望为每种设备类型提供单独的表，再次由设备的 device_id 索引以获取正确的列。

编辑：如果您的设备名称是唯一的，并且您不想更改它们，则可以将它们用作 device_id。您只需要适合跨表查找设备的东西。

# asp.net - ASP.net 图像服务器地图和本地

> ID：11975044
> 
> 赞同：0
> 
> 时间：2012-08-15T18:35:32.427
> 
> 标签：asp.net

嘿，我想找出最好的方法来获取我的 URL 以显示图像。

下面是我在后面代码中的 URL：

```
imgURL = Request.ApplicationPath & "public/themes/_images/" & theCatagory & "_" & productName & ".jpg" 
```

但是，当我想获得**http://www.blahblah.com/public/themes/_images/hoods_Fire-Star.jpg**时，它只会产生**/public/themes/_images/hoods_Fire-Star.jpg**

 **我像这样将图像保存到数据库中：

```
Request.ServerVariables("APPL_PHYSICAL_PATH").ToString.Replace("\admin", "") & "public\themes\_images\" & theCatagory & "_" 
```

把它放在这里：**C:\Clients\theclient\blahblahblah.com\public\themes_images\hoods_Fire-Star.jpg**

那么我需要在后面的代码中添加什么才能使用 http 获取该 URL 路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:49:25.280

使用`HOST`请求中的 http 标头，尽管它不包含协议。

```
Request.Headers["HOST"] 
```

您应该能够从当前 URL 中找出协议。**

# php - PHP向嵌套数组添加键

> ID：11975048
> 
> 赞同：0
> 
> 时间：2012-08-15T18:35:57.760
> 
> 标签：php, arrays, dictionary, key-value

我有没有键的嵌套数组。我想按特定顺序添加键。什么是干净的方法来做到这一点？

从这个数组开始。它仅按位置索引。

```
[0] => (
    [0] => Tyler
    [1] => Durden
    [2] => 05/07/1985
)
[1] => (
    [0] => Edward
    [1] => Norton
    [2] => 03/21/1988
) 
```

现在按顺序应用这些键：

```
['first_name'] =>
['last_name'] =>
['birthday'] => 
```

最终数组：

```
[0] => (
   ['first_name'] => Tyler
   ['last_name'] => Durden
   ['birthday'] => 05/071985
)
[1] => (
    ['first_name'] => Edward
    ['last_name'] => Norton
    ['birthday'] => 03/21/1988
) 
```

如果您的代码允许任何关键结构，而不是硬编码，则可以加分！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T18:39:02.070

我认为[array_combine](http://www.php.net/manual/en/function.array-combine.php)可以解决问题：

```
foreach ($bigarray as &$x) {
  $x = array_combine(array('first_name','last_name','birthday'),$x);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:45:07.027

还有经典的算法：

```
foreach ( $array as $key=>$value ) {
   $array[$key]['first_name'] = $array[$key][0];
   $array[$key]['last_name'] = $array[$key][1];
   $array[$key]['birthday'] = $array[$key][2];
   unset($array[$key][0]);
   unset($array[$key][1]);
   unset($array[$key][2]);
} 
```

# ruby-on-rails - 使用 postgres.app 使用现有的 rails 应用程序迁移到 postgresql

> ID：11975049
> 
> 赞同：0
> 
> 时间：2012-08-15T18:35:58.530
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, postgresql, heroku

到目前为止，我一直在使用默认的 sqlite3，但是由于我最终想使用 postgres 进行部署，我认为最好在我的开发环境中试用它，而不是在未经测试的情况下将自己投入生产。

几点 a) 一旦我运行了 pg.app，如何测试它？b) 在我的 config/database.yml 文件中

```
development:
  adapter: postgresql
  encoding: unicode
  database: 
  pool: 5
  username:
  password: 
```

我怎么知道我的数据库的默认名称是什么，以及如何设置用户，这甚至有必要吗？

最后，当我检查

```
which psql 
```

有人告诉我

```
/usr/bin/psql 
```

我认为这个 PATH 不正确，我需要对其进行修改，是这样吗？如果是这样，为什么？

我确定这相对简单，但提前感谢您提供的任何帮助。

编辑1：

[在我的错误谷歌搜索和之前的尝试中，我在升级到 OSX 10.7 Lion 后](https://stackoverflow.com/questions/6770649/repairing-postgresql-after-upgrading-to-osx-10-7-lion)遇到了与此章节修复 Postgresql 类似的错误， 并认为这可能是一个类似的问题，尽管他使用的是自制软件？

编辑2：

我的 .bash_profile 文件

[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # 加载 RVM 函数 export PATH=/usr/local/bin:$PATH

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:21:19.733

您需要做一些事情来`postgres.app`启动和运行。看起来您正在使用 Mac OS X 的默认 postgres 安装，`/usr/bin/psql`这很好，因为它应该很容易解决这个问题。

主要操作是确保`postgres.app`在您的`PATH`. 您的`.profile`,`.bashrc`或`.zshrc`（无论您使用哪个）都应将以下内容附加到路径的开头，并带有以下内容。

```
export PATH="/Applications/Postgres.app/Contents/MacOS/bin:$PATH" 
```

`postgres.app`这将通过将其添加到当前路径来确保优先使用任何其他安装。你不应该需要任何其他配置，

第二个动作是设置你的`database.yml`. `Postgres.app`预配置了您的本地 Mac 用户名，因此您无需添加或更改它即可让一切正常工作。您也不需要在`database.yml`. 开发应使用以下内容：

```
development:
  adapter: postgresql
  host: localhost
  encoding: unicode
  database: appname_development 
```

`Postgres.app`将自动创建第一次迁移数据库时指定的数据库。您的数据库名称由您决定，但约定是`application_name`下划线`environment`。

# tfs - 如何从 TFS 命令行命令获取带有合并候选者的变更集注释？

> ID：11975055
> 
> 赞同：10
> 
> 时间：2012-08-15T18:36:10.840
> 
> 标签：tfs

我想在两个分支之间生成一个合并候选列表，其中包含我可以复制粘贴到电子邮件中的格式的变更集注释。

我知道我可以执行此 tf 命令：

```
tf merge /candidate $/Branch1 $/Branch2 
```

这会返回以下内容：

```
Changeset Author                           Date
--------- -------------------------------- ----------
   22282  developer1                       08/09/2012
   22354  developer2                       08/14/2012
   22361  developer2                       08/14/2012
   22365  developer2                       08/14/2012
   22381  developer3                       08/15/2012 
```

不过，我也想得到评论。合并向导在执行“选定的变更集”合并时会执行类似的操作。这是一个例子：

![在此处输入图像描述](../Images/3b52d73042f54db0ee1c2c2dfa140b25.png)

我在想我可能能够以`tf merge /candidate`某种方式与这个命令结合起来：

```
tf changeset /noprompt 12345 
```

输出如下：

```
Changeset: 12345
User: developer1
Date: Thursday, August 09, 2012 5:20:01 PM

Comment:
  Completed various things

Items:
  merge, edit $/Branch1/BreakFreely.asmx.vb
  merge, edit $/Branch1/FreelyBroken.vb

Work Items:
  ID    Type                State Assigned To  Title
  ----- ------------------- ----- ------------ -----------------------------------------------------------------------------
  21406 Sprint Backlog Task Done  JoDeveloper1 Fix various things

Check-in Notes:
  Code Reviewer:
    Complete Lyblind 
```

***简而言之，我想要的结果是这样的：***

```
Changeset Author                           Date       Comment
--------- -------------------------------- ---------- --------------------------
   22282  developer1                       08/09/2012 Fixed random stuff
   22354  developer2                       08/14/2012 Fixed specific stuff 
```

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:29:51.777

In case you 're willing to utilize the TFS-SDK and write your own console app, this should be quite straightforward.
The following could serve as a jump-start:

```
using System;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.VersionControl.Client;

namespace MergeCandidates
{
    class Program
    {
        static void Main()
        {
            TfsTeamProjectCollection teamProjectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://TFSURI"));

            var versionControl = teamProjectCollection.GetService<VersionControlServer>();
            var mergeCandidates =
                versionControl.GetMergeCandidates(@"$/FromPath",
                                                  @"$/ToPath", RecursionType.Full);
            foreach (var mergeCandidate in mergeCandidates)
            {  
                Console.WriteLine(string.Format("{0} {1} {2} {3}",
                                                mergeCandidate.Changeset.ChangesetId,
                                                mergeCandidate.Changeset.Owner, 
                                                mergeCandidate.Changeset.CreationDate,
                                                mergeCandidate.Changeset.Comment));
            }
        }
    }
} 
```

# vb.net - 无法访问 localhost 之外的 WSDL

> ID：11975059
> 
> 赞同：0
> 
> 时间：2012-08-15T18:36:15.880
> 
> 标签：vb.net, wcf, wsdl

我的服务器在应用服务器上托管我的 WSDL。在我自己的 IP 地址本地运行时，我能够访问该服务并使用这些方法。但是在我们的应用服务器上运行时，我只能访问 WSDL，引用它并查看它具有的方法，但不能使用这些方法。我在 VB.NET 4.0 中将它作为控制台应用程序运行。我得到一个 InternalServiceFault。

```
Public Class pokeWCF
   Implements poke

   Dim objFile As String = "C:\Users\lsj\Documents\Visual Studio 2012\Projects\ConsoleServer\easyA.txt"
   Dim aryText() As String
   Dim sK As String
   Dim fM As String
   Dim msg As String
   Dim time As DateTime = DateTime.Now
   Dim format As String = "ddd d HH:mm yyyy"
   Dim OracleReceive As New ReceiveOrcl

   Public Function backTo(securityKey As String, from As String, message As String) As ServiceResult Implements poke.backTo
   'stuff
   End Function

   Public Function Test(securityKey As String) As ServiceResult Implements poke.Test
   'moreStuff
   End Function
End Class

Sub Main()
    Dim strHostName As String
    Dim strIPAddress As String
    strHostName = System.Net.Dns.GetHostName()

    strIPAddress = System.Net.Dns.GetHostByName(strHostName).AddressList(0).ToString()
    MsgBox(strIPAddress.ToString)

    Dim url As Uri = New Uri("http://" & strIPAddress & ":22380/poke")
    Dim host As New ServiceHost(GetType(pokeWCF), url)
    Dim smb As New ServiceMetadataBehavior()
    Console.WriteLine("CRAB BATTLE!")
    Console.Write("Server Up" & vbCrLf)

    smb.HttpGetEnabled = True
    smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15
    host.Description.Behaviors.Add(smb)
    host.Open()

    Console.WriteLine("Running at " & url.ToString)
    Console.Read()

End Sub 
```

在查看了从应用服务器生成的 WSDL 之后，我的 localhost 的定义有所不同。

编辑：

本地生成的 WSDL：

```
 <wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:tns="http://tempuri.org/" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="RacoSMSWCF" targetNamespace="http://tempuri.org/">
<wsdl:types>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
<xs:import namespace="https://t-mobile.racowireless.com/SMSRicochet1.0"/>
<xs:element name="ReceiveSMS">
<xs:complexType>
<xs:sequence>
<xs:element minOccurs="0" name="securityKey" nillable="true" type="xs:string"/>
<xs:element minOccurs="0" name="from" nillable="true" type="xs:string"/>
<xs:element minOccurs="0" name="message" nillable="true" type="xs:string"/>
</xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="ReceiveSMSResponse">
<xs:complexType>
<xs:sequence>
<xs:element xmlns:q1="https://t-mobile.racowireless.com/SMSRicochet1.0" minOccurs="0" name="ReceiveSMSResult" type="q1:ServiceResult"/>
</xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="Test">
<xs:complexType>
<xs:sequence>
<xs:element minOccurs="0" name="securityKey" nillable="true" type="xs:string"/>
</xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="TestResponse">
<xs:complexType>
<xs:sequence>
<xs:element xmlns:q2="https://t-mobile.racowireless.com/SMSRicochet1.0" minOccurs="0" name="TestResult" type="q2:ServiceResult"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:schema>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://schemas.microsoft.com/2003/10/Serialization/" attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://schemas.microsoft.com/2003/10/Serialization/">
<xs:element name="anyType" nillable="true" type="xs:anyType"/>
<xs:element name="anyURI" nillable="true" type="xs:anyURI"/>
<xs:element name="base64Binary" nillable="true" type="xs:base64Binary"/>
<xs:element name="boolean" nillable="true" type="xs:boolean"/>
<xs:element name="byte" nillable="true" type="xs:byte"/>
<xs:element name="dateTime" nillable="true" type="xs:dateTime"/>
<xs:element name="decimal" nillable="true" type="xs:decimal"/>
<xs:element name="double" nillable="true" type="xs:double"/>
<xs:element name="float" nillable="true" type="xs:float"/>
<xs:element name="int" nillable="true" type="xs:int"/>
<xs:element name="long" nillable="true" type="xs:long"/>
<xs:element name="QName" nillable="true" type="xs:QName"/>
<xs:element name="short" nillable="true" type="xs:short"/>
<xs:element name="string" nillable="true" type="xs:string"/>
<xs:element name="unsignedByte" nillable="true" type="xs:unsignedByte"/>
<xs:element name="unsignedInt" nillable="true" type="xs:unsignedInt"/>
<xs:element name="unsignedLong" nillable="true" type="xs:unsignedLong"/>
<xs:element name="unsignedShort" nillable="true" type="xs:unsignedShort"/>
<xs:element name="char" nillable="true" type="tns:char"/>
<xs:simpleType name="char">
<xs:restriction base="xs:int"/>
</xs:simpleType>
<xs:element name="duration" nillable="true" type="tns:duration"/>
<xs:simpleType name="duration">
<xs:restriction base="xs:duration">
<xs:pattern value="\-?P(\d*D)?(T(\d*H)?(\d*M)?(\d*(\.\d*)?S)?)?"/>
<xs:minInclusive value="-P10675199DT2H48M5.4775808S"/>
<xs:maxInclusive value="P10675199DT2H48M5.4775807S"/>
</xs:restriction>
</xs:simpleType>
<xs:element name="guid" nillable="true" type="tns:guid"/>
<xs:simpleType name="guid">
<xs:restriction base="xs:string">
<xs:pattern value="[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}"/>
</xs:restriction>
</xs:simpleType>
<xs:attribute name="FactoryType" type="xs:QName"/>
<xs:attribute name="Id" type="xs:ID"/>
<xs:attribute name="Ref" type="xs:IDREF"/>
</xs:schema>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="https://t-mobile.racowireless.com/SMSRicochet1.0" elementFormDefault="qualified" targetNamespace="https://t-mobile.racowireless.com/SMSRicochet1.0">
<xs:simpleType name="ServiceResult">
<xs:restriction base="xs:string">
<xs:enumeration value="ACCEPTED"/>
<xs:enumeration value="MESSAGE_TOO_LONG"/>
<xs:enumeration value="INVALID_CREDENTIALS"/>
<xs:enumeration value="REJECTED"/>
<xs:enumeration value="NOTFOUND"/>
<xs:enumeration value="INVALID_RECIPIENT"/>
</xs:restriction>
</xs:simpleType>
<xs:element name="ServiceResult" nillable="true" type="tns:ServiceResult"/>
</xs:schema>
</wsdl:types>
<wsdl:message name="racoSMS_ReceiveSMS_InputMessage">
<wsdl:part name="parameters" element="tns:ReceiveSMS"/>
</wsdl:message>
<wsdl:message name="racoSMS_ReceiveSMS_OutputMessage">
<wsdl:part name="parameters" element="tns:ReceiveSMSResponse"/>
</wsdl:message>
<wsdl:message name="racoSMS_Test_InputMessage">
<wsdl:part name="parameters" element="tns:Test"/>
</wsdl:message>
<wsdl:message name="racoSMS_Test_OutputMessage">
<wsdl:part name="parameters" element="tns:TestResponse"/>
</wsdl:message>
<wsdl:portType name="racoSMS">
<wsdl:operation name="ReceiveSMS">
<wsdl:input wsam:Action="http://tempuri.org/racoSMS/ReceiveSMS" message="tns:racoSMS_ReceiveSMS_InputMessage"/>
<wsdl:output wsam:Action="http://tempuri.org/racoSMS/ReceiveSMSResponse" message="tns:racoSMS_ReceiveSMS_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="Test">
<wsdl:input wsam:Action="http://tempuri.org/racoSMS/Test" message="tns:racoSMS_Test_InputMessage"/>
<wsdl:output wsam:Action="http://tempuri.org/racoSMS/TestResponse" message="tns:racoSMS_Test_OutputMessage"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="BasicHttpBinding_racoSMS" type="tns:racoSMS">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="ReceiveSMS">
<soap:operation soapAction="http://tempuri.org/racoSMS/ReceiveSMS" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="Test">
<soap:operation soapAction="http://tempuri.org/racoSMS/Test" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="RacoSMSWCF">
<wsdl:port name="BasicHttpBinding_racoSMS" binding="tns:BasicHttpBinding_racoSMS">
<soap:address location="http://192.168.100.88:22380/racoSMS"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

应用服务器 WSDL：

```
 <wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="http://tempuri.org/" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" name="RacoSMSWCF" targetNamespace="http://tempuri.org/">
<wsdl:types>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
<xs:import namespace="https://t-mobile.racowireless.com/SMSRicochet1.0"/>
<xs:element name="ReceiveSMS">
<xs:complexType>
<xs:sequence>
<xs:element minOccurs="0" name="securityKey" nillable="true" type="xs:string"/>
<xs:element minOccurs="0" name="from" nillable="true" type="xs:string"/>
<xs:element minOccurs="0" name="message" nillable="true" type="xs:string"/>
</xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="ReceiveSMSResponse">
<xs:complexType>
<xs:sequence>
<xs:element xmlns:q1="https://t-mobile.racowireless.com/SMSRicochet1.0" minOccurs="0" name="ReceiveSMSResult" type="q1:ServiceResult"/>
</xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="Test">
<xs:complexType>
<xs:sequence>
<xs:element minOccurs="0" name="securityKey" nillable="true" type="xs:string"/>
</xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="TestResponse">
<xs:complexType>
<xs:sequence>
<xs:element xmlns:q2="https://t-mobile.racowireless.com/SMSRicochet1.0" minOccurs="0" name="TestResult" type="q2:ServiceResult"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:schema>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://schemas.microsoft.com/2003/10/Serialization/" attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://schemas.microsoft.com/2003/10/Serialization/">
<xs:element name="anyType" nillable="true" type="xs:anyType"/>
<xs:element name="anyURI" nillable="true" type="xs:anyURI"/>
<xs:element name="base64Binary" nillable="true" type="xs:base64Binary"/>
<xs:element name="boolean" nillable="true" type="xs:boolean"/>
<xs:element name="byte" nillable="true" type="xs:byte"/>
<xs:element name="dateTime" nillable="true" type="xs:dateTime"/>
<xs:element name="decimal" nillable="true" type="xs:decimal"/>
<xs:element name="double" nillable="true" type="xs:double"/>
<xs:element name="float" nillable="true" type="xs:float"/>
<xs:element name="int" nillable="true" type="xs:int"/>
<xs:element name="long" nillable="true" type="xs:long"/>
<xs:element name="QName" nillable="true" type="xs:QName"/>
<xs:element name="short" nillable="true" type="xs:short"/>
<xs:element name="string" nillable="true" type="xs:string"/>
<xs:element name="unsignedByte" nillable="true" type="xs:unsignedByte"/>
<xs:element name="unsignedInt" nillable="true" type="xs:unsignedInt"/>
<xs:element name="unsignedLong" nillable="true" type="xs:unsignedLong"/>
<xs:element name="unsignedShort" nillable="true" type="xs:unsignedShort"/>
<xs:element name="char" nillable="true" type="tns:char"/>
<xs:simpleType name="char">
<xs:restriction base="xs:int"/>
</xs:simpleType>
<xs:element name="duration" nillable="true" type="tns:duration"/>
<xs:simpleType name="duration">
<xs:restriction base="xs:duration">
<xs:pattern value="\-?P(\d*D)?(T(\d*H)?(\d*M)?(\d*(\.\d*)?S)?)?"/>
<xs:minInclusive value="-P10675199DT2H48M5.4775808S"/>
<xs:maxInclusive value="P10675199DT2H48M5.4775807S"/>
</xs:restriction>
</xs:simpleType>
<xs:element name="guid" nillable="true" type="tns:guid"/>
<xs:simpleType name="guid">
<xs:restriction base="xs:string">
<xs:pattern value="[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}"/>
</xs:restriction>
</xs:simpleType>
<xs:attribute name="FactoryType" type="xs:QName"/>
<xs:attribute name="Id" type="xs:ID"/>
<xs:attribute name="Ref" type="xs:IDREF"/>
</xs:schema>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="https://t-mobile.racowireless.com/SMSRicochet1.0" elementFormDefault="qualified" targetNamespace="https://t-mobile.racowireless.com/SMSRicochet1.0">
<xs:simpleType name="ServiceResult">
<xs:restriction base="xs:string">
<xs:enumeration value="ACCEPTED"/>
<xs:enumeration value="MESSAGE_TOO_LONG"/>
<xs:enumeration value="INVALID_CREDENTIALS"/>
<xs:enumeration value="REJECTED"/>
<xs:enumeration value="NOTFOUND"/>
<xs:enumeration value="INVALID_RECIPIENT"/>
</xs:restriction>
</xs:simpleType>
<xs:element name="ServiceResult" nillable="true" type="tns:ServiceResult"/>
</xs:schema>
</wsdl:types>
<wsdl:message name="racoSMS_ReceiveSMS_InputMessage">
<wsdl:part name="parameters" element="tns:ReceiveSMS"/>
</wsdl:message>
<wsdl:message name="racoSMS_ReceiveSMS_OutputMessage">
<wsdl:part name="parameters" element="tns:ReceiveSMSResponse"/>
</wsdl:message>
<wsdl:message name="racoSMS_Test_InputMessage">
<wsdl:part name="parameters" element="tns:Test"/>
</wsdl:message>
<wsdl:message name="racoSMS_Test_OutputMessage">
<wsdl:part name="parameters" element="tns:TestResponse"/>
</wsdl:message>
<wsdl:portType name="racoSMS">
<wsdl:operation name="ReceiveSMS">
<wsdl:input wsam:Action="http://tempuri.org/racoSMS/ReceiveSMS" message="tns:racoSMS_ReceiveSMS_InputMessage"/>
<wsdl:output wsam:Action="http://tempuri.org/racoSMS/ReceiveSMSResponse" message="tns:racoSMS_ReceiveSMS_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="Test">
<wsdl:input wsam:Action="http://tempuri.org/racoSMS/Test" message="tns:racoSMS_Test_InputMessage"/>
<wsdl:output wsam:Action="http://tempuri.org/racoSMS/TestResponse" message="tns:racoSMS_Test_OutputMessage"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="BasicHttpBinding_racoSMS" type="tns:racoSMS">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="ReceiveSMS">
<soap:operation soapAction="http://tempuri.org/racoSMS/ReceiveSMS" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="Test">
<soap:operation soapAction="http://tempuri.org/racoSMS/Test" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="RacoSMSWCF">
<wsdl:port name="BasicHttpBinding_racoSMS" binding="tns:BasicHttpBinding_racoSMS">
<soap:address location="http://192.168.200.27:22380/racoSMS"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

编辑：

从我发现 WCF 测试客户端后，我在测试服务器上运行的服务后收到此错误。

```
 The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the <serviceDebug> configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework SDK documentation and inspect the server trace logs.

Server stack trace: 
   at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at racoSMS.Test(String securityKey)
   at racoSMSClient.Test(String securityKey) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:18:26.470

您已经创建了 ServiceHost 并使用 HttpGetEnabled 设置了 ServiceMetadataBehavior，以便可以在地址 http://?wsdl 访问服务 WSDL。看起来唯一缺少的是需要添加到 ServiceHost 的端点。

您可以使用以下语法添加端点：

```
host.AddServiceEndpoint(GetType([ServiceContractType]), [binding], "[url]"); 
```

ServiceContract 类型应该由您的服务类实现（它通常是一个接口，在这种情况下看起来像是“poke”）。

有许多可用的绑定（更多信息[在这里](http://msdn.microsoft.com/en-us/library/ms734662.aspx)），你使用什么将取决于你想要支持什么样的客户端以及你想要提供什么样的功能（安全性、可靠性、事务等）。BasicHttpBinding 是最向后兼容的，可以与任何符合 WS-I Basic Profile 规范的东西一起使用。

您在端点中提供的 url 将附加到您在创建该对象时提供给 ServiceHost 的基本 url。

# sql-server-2005 - Add Catalog to an Existing Linked Server

> ID：11975063
> 
> 赞同：3
> 
> 时间：2012-08-15T18:36:19.493
> 
> 标签：sql-server-2005

I have an existing Linked Server with a few catalogs... how can I add another, existing database/catalog to this linked server?

For Example, my object explorer looks like this:

Linked Servers

*   Providers
*   DB4\PRODUCTION
*   DB4_LINK
    *   Catalogs
        *   System Catalogs
        *   MyDatabase
        *   MyOtherDatabase

How can I add yet another database that already exists to DB4_LINK?

EDIT: I'm trying to add an *existing* database to this linked server entry.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-25T15:33:53.160

Assuming there are existing Catalogs (databases) already being shown (which is the case in your question), the most likely thing that is preventing another database on that same linked server from appearing is Permissions.

Right-click on the server-to-link-to and do "Script Linked Server as" then CREATE to New Query Window... look at the sp_addlinkedsrvlogin call and note the rmtuser (remote user). This is the user that you needs access to the database that you want to appear in the Catalogs.

Go to the server-to-link-to (under Security / Logins) and adjust that login's permissions (via Properties) to include the missing db. (Check the perms that the login has to the dbs that do appear in the Catalog... you can use those specific perms as a reference)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T18:49:00.743

You can do this by sending dynamic SQL via the linked server:

```
EXEC DB4_LINK.master..sp_executesql N'CREATE DATABASE foo;'; 
```

Of course this requires that you have the permissions to do so, and it's a simplistic command assuming that the default settings are fine - you may want to customize the `CREATE DATABASE` command.

# xcode - XCode 4.4 - 4.4.1 在单步执行代码时崩溃

> ID：11975066
> 
> 赞同：0
> 
> 时间：2012-08-15T18:36:28.463
> 
> 标签：xcode, crash, xcode4.4

自从升级到 Mountain Lion 和 XCode 4.4 后，我一直无法在调试时单步执行代码。4.4.1 没有解决这个问题。有时它会执行 2 或 3 次，但多尝试一步不可避免地会发现错误。使用断点似乎效果更好，但有时仍会崩溃。我试过重新安装。崩溃日志在这里： http: [//pastebin.com/XmqJEVuH](http://pastebin.com/XmqJEVuH)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:47:54.620

老板刚刚告诉我有一个 XCode 4.5 的开发者预览版。令我惊讶的是，它确实有效。

# ios - 向 coredata 添加新实体 - 我仍然可以使用轻量级迁移吗？

> ID：11975071
> 
> 赞同：4
> 
> 时间：2012-08-15T18:36:47.873
> 
> 标签：ios, cocoa-touch, core-data

我有一个现有的核心数据集，我想向它添加一个实体。在添加新实体将现有用户转换到新模型后，我是否可以使用轻量级迁移有点困惑。

当前模式是（仅显示实体）：

```
Story 1toMany-> Sentences 
```

我需要：

```
Story 1toMany-> Sentences 1toMany-> Media 
```

我可以使用轻量级迁移工具来执行此操作吗？

我已阅读[文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html#//apple_ref/doc/uid/TP40004399-CH4-SW1)：

> 为了使 Core Data 能够生成推断映射模型，更改必须符合明显的迁移模式，例如：
> 
> 简单添加新属性 删除属性 非可选属性变为可选 可选属性变为非可选，并定义默认值 重命名实体或属性

但是[这个问题](https://stackoverflow.com/a/7964574/459116)似乎表明轻量级迁移仍然可以在添加实体的情况下工作。由于新媒体实体是可选的，我看不出它实际上会成为一个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T20:23:00.667

是的，您可能能够使用轻量级迁移。根据我的经验，我发现您需要在编辑器菜单下添加模型版本...，*然后*再更改您的 CoreData 模型。这样就有了一个前后场景来映射。然后，您需要将新模型设置为当前模型。（您现在可以将实体添加到 Core Data 模型。确保您使用的是正确的模型。）

最后，您需要确保传递用于初始化 PersistentStoreCoordinator 的选项。

```
NSError *error = nil;
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool: YES],NSMigratePersistentStoresAutomaticallyOption,[NSNumber numberWithBool:YES],NSInferMappingModelAutomaticallyOption, nil];
if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T18:41:18.933

查看 wwdc 2010 的核心数据视频“掌握核心数据”。他们讨论了针对您的具体情况的迁移。长话短说：是的，您可以使用轻量级迁移。初始化 NSPersistentStoreCoordinator 实例时只需传递选项字典：

```
NSDictionary *dictionary=[NSDictionary dictionaryWithObjects:@[ [NSNumber numberWithBool:YES], [NSNumber numberWithBool:YES]] forKeys:@[ NSMigratePersistentStoresAutomaticallyOption, NSInferMappingModelAutomaticallyOption]]; 
```

# vim - Vim：在保持缩进的同时切换注释？

> ID：11975072
> 
> 赞同：2
> 
> 时间：2012-08-15T18:36:51.600
> 
> 标签：vim, vi, vim-plugin

目前我正在使用`EnhancedCommentify`插件来切换评论，特别是这两个命令

```
map <M-c> <plug>Comment
map <M-d> <plug>DeComment 
```

但问题是，而不是像注释掉这样的行

```
____#I am a comment (_ in front is white space) 
```

它会显示为

```
#____I am a comment 
```

有没有一种快速的方法`EnhancedCommentify`来解决这个问题？或其他方法来实现这一点，最好不更改我当前的键绑定？谢谢。

*顺便说一句*：`NerdTree`似乎不适用于我的 vim 版本，而且我不是 root 用户，所以...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:02:47.430

试试[tComment](https://github.com/VimEz/tComment)。我使用它，它支持 vim 7.0。它允许您使用动作评论多种文件类型`gc`。

> ```
> gc{motion}   :: Toggle comments (for small comments within one line 
>                 the &filetype_inline style will be used, if 
>                 defined)
> gcc          :: Toggle comment for the current line
> gC{motion}   :: Comment region
> gCc          :: Comment the current line 
> ```

如果你使用病原体，你可以安装它

```
cd ~/.vim/bundle; git clone "https://github.com/VimEz/tComment.git" 
```

然后只需重新启动 vim 就可以开始使用了！

# php - 使用 move_uploaded_file() 无法移动图片

> ID：11975073
> 
> 赞同：1
> 
> 时间：2012-08-15T18:36:51.287
> 
> 标签：php

我正在尝试为我正在创建的网页设置一些图像处理，但我无法让 move_uploaded_file() 正常工作......我不断收到这些错误：

```
Warning: move_uploaded_file(/htdocs/PHP/Pictures/picture.jpg) [function.move-uploaded-file]: failed to open stream: No such file or directory in /opt/lampp/htdocs/PHP/useredit.php on line 17

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/phpY0KKxH' to '/htdocs/PHP/Pictures/picture.jpg' in /opt/lampp/htdocs/PHP/useredit.php on line 17 
```

我的代码如下所示：

```
if(isset($_FILES['image_file']))
{
    $img_tmp_name = $_FILES['image_file']['name'];
    $img_dir = "/htdocs/PHP/Pictures/";
    $img_name = $img_dir . $img_tmp_name;
    if(move_uploaded_file($_FILES['image_file']['tmp_name'],$img_name))
    {
        list($width,$height,$type,$attr) = getimagesize($img_name);
        switch($type)
        {
            case 1:
                $ext = ".gif";
                break;
            case 2:
                $ext = ".jpg";
                break;
            case 3:
                $ext = ".png";
                break;
            default:
                echo "Image format not accepted";
        }
        $query = "UPDATE profile_pic SET img_path=$img_name WHERE uid='$uid'";
        $img_id = mysql_insert_id();
        $new_img_name = $img_dir . $img_id . $ext;
        rename($img_name, $new_img_name);
    }
}
if(mysql_query($query)or die('Error: ' . mysql_error()))
{
    header("Refresh:0; url='control.php'");
} 
```

文件夹 PHP/Pictures 存在。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:53:54.513

$img_dir 应该包含相对于您当前文件的路径，而不是来自根文件夹的路径。

如果您的当前目录包含upload_file.php（您的代码）和像PHP/Pictures/这样的文件夹层次结构

然后`$img_dir="/PHP/Pictures/";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:43:29.057

这段代码存在一些重大的安全和后勤问题：

a）您不检查上传是否成功并继续进行。上传成功只有一种方法，失败的原因太多了。

```
if ($_FILES['image_file']['error'] !== UPLOAD_ERR_OK) {
    die("Upload failed with error code {$_FILES['image_file']['error']}");
} 
```

b）您正在使用用户在路径中提供的文件名保存在您的服务器上。恶意用户可以在该文件名中嵌入路径数据，并在您的服务器上指定他们想要的任何位置。例如

```
$_FILES['image_file']['name'] = '../../../../../../etc/passwd'; 
```

# jquery-mobile - Backbone.js 和 jquery 移动清除哈希并在窗口刷新时重置应用程序

> ID：11975074
> 
> 赞同：2
> 
> 时间：2012-08-15T18:36:57.843
> 
> 标签：jquery-mobile, backbone.js

如果用户刷新浏览器，路由器中是否有办法将 url 重置为默认页面，而不管用户当前所在的页面是什么？

[http://appname.com/index.html](http://appname.com/index.html)

用户导航到[http://appname.com/index.html#/somepage](http://appname.com/index.html#/somepage)并刷新应用程序停留在 #/somepage 我希望它在刷新时返回到起始页面而不是刷新哈希页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:10:03.360

这可能有点骇人听闻，但它对我有用。

在骨干路由器的初始化函数中，将其作为第一行：

```
initialize: function(){
    window.location.hash = '';   // Remove the hash on any new page request.
    ... 
}, 
```

这将从 URL 中删除哈希，并且您的路由器应该正确路由。

# javascript - 如何在 HTML5 中动画和擦除弧线

> ID：11975075
> 
> 赞同：5
> 
> 时间：2012-08-15T18:37:04.733
> 
> 标签：javascript, html, animation, canvas, geometry

这是我的问题：我有一个动画，构建是圆形的。见：http: [//jsfiddle.net/2TUnE/](http://jsfiddle.net/2TUnE/)

**JavaScript：**

```
var currentEndAngle = 0
var currentStartAngle = 0;
var currentColor = 'black';

setInterval(draw, 50);

function draw() { /***************/

    var can = document.getElementById('canvas1'); // GET LE CANVAS
    var canvas = document.getElementById("canvas1");
    var context = canvas.getContext("2d");
    var x = canvas.width / 2;
    var y = canvas.height / 2;
    var radius = 75;

    var startAngle = currentStartAngle * Math.PI;
    var endAngle = (currentEndAngle) * Math.PI;

    currentEndAngle = currentEndAngle + 0.01;

    var counterClockwise = false;

    context.beginPath();
    context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
    context.lineWidth = 15;
    // line color
    context.strokeStyle = currentColor;
    context.stroke();

    /************************************************/
} 
```

当圆圈完全绘制好后，我希望它开始擦除，就像它被创建的方式一样（所以慢慢地去除黑色）。一旦整个圆圈被擦除，我会再次创建黑色圆圈，创建某种“等待/加载”效果。

我试图做的是检查 currentEndAngle 是否为 2（所以圆圈是完整的），然后移动 startAngle，但它没有用。

任何的想法？

谢谢！

编辑：忘了说，动画会在图像上，所以它必须是“透明的”而不是白色的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:46:42.813

查看这个 JSFiddle 中的内容：http: [//jsfiddle.net/fNTsA/](http://jsfiddle.net/fNTsA/)

这个方法基本上是你的代码，只是我们使用模数来控制状态。检查半径是否为 2 只对了一半，要切换绘制白色或绘制黑色，您应该将半径取模 2 的一半。第一次有 floor(0..2/2) % 2 == 0 时，第二个你有 floor(2..4/2) % 2 == 1，依此类推。

此外，因为线条是抗锯齿的，它有助于让起始角度覆盖已经绘制的内容，否则您可能会得到额外的白线，您可能不想要。同理，在画白圈的时候，应该画一条稍粗的线（半径越小，线越粗）。否则，抗锯齿会留下一些 schmutz - 已擦除圆圈的微弱轮廓。

我将半径和宽度放入您放在顶部的全局变量中：

```
var lineRadius = 75;
var lineWidth = 15; 
```

同样，这是我的模数，非常标准：

```
currentStartAngle = currentEndAngle - 0.01;
currentEndAngle = currentEndAngle + 0.01;

if (Math.floor(currentStartAngle / 2) % 2) {
  currentColor = "white";
  radius = lineRadius - 1;
  width = lineWidth + 3;
} else {
  currentColor = "black";
  radius = lineRadius;
  width = lineWidth;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:13:46.483

有趣的挑战！试试下面的（[这里](http://jsfiddle.net/GCvQ5/2/)更新小提琴）。我试图加入大量评论来表达我的想法。

```
 // Moved these to global scope as you don't want to re-declare 
    // them in your draw method each time your animation loop runs
    var canvas = document.getElementById("canvas1");
    var context = canvas.getContext("2d");
    var x = canvas.width / 2;
    var y = canvas.height / 2;
    var radius = 75;

    // Use objects to hold our draw and erase props
    var drawProps = {
      startAngle: 0,
      speed: 2,
      color: 'black',
      counterClockwise: false,
      globalCompositeOperation: context.globalCompositeOperation,
      lineWidth: 15            
    };

    var eraseProps = {
      startAngle: 360,
      speed: -2,
      color: 'white',
      counterClockwise: true,
      globalCompositeOperation: "destination-out",
      lineWidth: 17 // artefacts appear unless we increase lineWidth for erase
    };

    // Let's work in degrees as they're easier for humans to understand
    var degrees = 0; 
    var props = drawProps;

    // start the animation loop
    setInterval(draw, 50);

    function draw() { /***************/

        degrees += props.speed;

        context.beginPath();
        context.arc(
            x, 
            y, 
            radius, 
            getRadians(props.startAngle), 
            getRadians(degrees), 
            props.counterClockwise
        );
        context.lineWidth = props.lineWidth;
        context.strokeStyle = props.color;
        context.stroke();

        // Start erasing when we hit 360 degrees
        if (degrees >= 360) {
            context.closePath();
            props = eraseProps;
            context.globalCompositeOperation = props.globalCompositeOperation;
        }

        // Start drawing again when we get back to 0 degrees
        if (degrees <= 0) {
            canvas.width = canvas.width; // Clear the canvas for better performance (I think)
            context.closePath();
            props = drawProps;
            context.globalCompositeOperation = props.globalCompositeOperation;
        }
        /************************************************/
    }  

    // Helper method to convert degrees to radians
    function getRadians(degrees) {
        return degrees * (Math.PI / 180);
    } 
```

# python - 访问字典中的特定字典 - Django 模板

> ID：11975077
> 
> 赞同：0
> 
> 时间：2012-08-15T18:37:06.903
> 
> 标签：python, django, django-templates

我有以下“示例”字典

```
myDict = {obj1:{key_a1:value_a1, key_a2:value_a2, key_a3:value_a3} , 
          obj2:{key_b1:value_b1, key_b2:value_b2, key_b3:value_b3} ,
          obj3:{key_c1:value_c1, key_c2:value_c2, key_c3:value_c3} } 
```

其中 obj 是一些类对象。

如果我只想迭代属于键 obj2 的值怎么办，我将如何在模板中执行此操作？

我试过了

```
{% for node,manyResults in myDict[obj2].items %}
//Error: Could not parse the remainder: '[obj2].items' from 'dict[obj2].items' 
```

和

```
{% for node,manyResults in myDict[obj2] %}
//Error: Could not parse the remainder: '[obj2]' from 'dict[obj2]' 
```

和

```
{% for node,manyResults in myDict.obj2.items %}  
//OR
{% for node,manyResults in myDict.obj2 %}
//Both no error, but the values don't appear 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:20:21.097

我认为没有办法使用 Django 模板来做到这一点，你应该按照我在评论中所说的去做，我将在这里重写——并进行一些编辑——以总结漏洞。

--

也许你只是把事情复杂化了。如果您只需要这 3 个字典，我会将它们单独添加到我的上下文字典中，并在模板中独立使用它们。

正如我所说，您还可以遍历它们：

```
{% for key, item in myDict.items %}
    {% for innerkey, inneritem in item.items %}
        ... 
```

此外，如果 'objX' 是字符串，您的最后一个示例将起作用，因为 django 模板可以映射它。否则，它将根本无法在其命名空间中找到标识符（正如您所意识到的）。

希望能帮助到你。

# django - 如何根据user_authentication分配给django中的变量？

> ID：11975079
> 
> 赞同：1
> 
> 时间：2012-08-15T18:37:09.933
> 
> 标签：django, authentication

我想向授权和未经授权的用户显示不同的菜单。以下是公共访问的代码片段：

```
if not request.user.is_authenticated():
    (menu_c,menu_t) = mn_view.rightMenuPublic(request)
    print "public"

#only for authenticated user:
else:
    (menu_c,menu_t) = mn_view.rightMenuRestricted(request)
    print "private" 
```

但只有公共菜单是我得到的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:51:04.407

您引用的代码在视图中，对吗？如果是这样，它真的应该工作。

我唯一能想到的可能是你的`MIDDLEWARE_CLASSES`in`settings.py`以某种方式改变了。你应该`'django.contrib.auth.middleware.AuthenticationMiddleware'`有，而且可能`Session`也有`Common`。见[https://docs.djangoproject.com/en/1.4/topics/http/middleware/](https://docs.djangoproject.com/en/1.4/topics/http/middleware/)

# vba - 将工作表移动到新创建和版本更改的工作簿 VBA

> ID：11975084
> 
> 赞同：1
> 
> 时间：2012-08-15T18:37:18.620
> 
> 标签：vba, excel, excel-2007

我正在继续处理从大型机中提取的数据。数据主要是[字母数字](https://stackoverflow.com/questions/11620118/finding-numerical-value-pairs-with-conditionals-and-nested-if-then-statements)，是[在过去努力的基础上构建功能](https://stackoverflow.com/questions/11941312/loop-breaks-on-range-rows-2-vba)的延续。移动工作表的循环是基于此[SO 文章](https://stackoverflow.com/questions/11888291/deleting-worksheets-based-on-multiple-worksheet-criteria)中讨论的函数创建的。

我已经查阅了这篇[SO 文章](https://stackoverflow.com/questions/6863940/how-to-copy-sheets-to-another-workbook-using-vba)并独立测试了此类功能的一般形式，但在这种特定情况下此类代码失败，可​​能是由于版本问题或我引用新工作簿的方式。

我编写了一个子程序，将工作表从一个工作簿转移到另一个工作簿。它与绑定到复选框的公共变量一起使用，旨在为用户提供一种简单的方式来移植表单数据。如果复选标记处于选中状态，则公共变量用于有条件地调用子例程。

代码如下：

```
Public Sub MoveSheets()

' This macro moves all sheets but those noted within the If statements,(1)
' (1) which are further nested within the For Each loop.

'See http://msdn.microsoft.com/en-us/library/office/ff198017.aspx for save file format types.
'The file format of this excel macro sheet is 52: xlOpenXMLWorkbookMacroEnabled
'The default save type for the use-case is excel 2003 is compatibility mode.
'The macro is to set the current save type to one compatible with 52.
'In this case, 51: xlOpenXMLWorkbook was selected as the selected type.

'Define Excel Format storage variables.
Dim FileFormatSet As Excel.XlFileFormat
Dim OriginalFileFormatSet As Excel.XlFileFormat
Dim TempFileFormatSet As Excel.XlFileFormat

'Define worksheet/workbook variables.
Dim IndividualWorkSheet As Worksheet
Dim NewWorkBook1 As Workbook

'Set variable to store current time.
Dim CurrentTime As Date

'The original file format.
OriginalFileFormatSet = Application.DefaultSaveFormat

'The file format to be used at the end of the procedure after all is said and done.
FileFormatSet = OriginalFileFormatSet

'The currently desired file format.
TempFileFormatSet = xlOpenXMLWorkbook

'The currently desired file format set as the set default.
Application.DefaultSaveFormat = TempFileFormatSet

'Disable application alerts. Comment the line below to display alerts (2)
'(2) in order to help check for errors.
Application.DisplayAlerts = False

'Save new workbook "NewWorkBook" as default file format.
Workbooks.Add.SaveAs Filename:="NewWorkBook", FileFormat:=Application.DefaultSaveFormat

'Set variable to new workbook "NewWorkBook", which is in .xlsx format.
Set NewWorkBook1 = Workbooks("NewWorkBook.xlsx")

'Activate Macro Window.
Windows("ShifterMacro.xlsm").Activate
'For each worksheet, shift it to the workbook "NewWorkBook" if (3)
'(3) it fails outside the criteria set listed below.
For Each IndividualWorkSheet In ThisWorkbook.Worksheets
    If IndividualWorkSheet.Name <> "Sheet1" And IndividualWorkSheet.Name <> "Criteria" And _
    IndividualWorkSheet.Name <> "TemplateSheet" And IndividualWorkSheet.Name <> "TemplateSheet2" And _
    IndividualWorkSheet.Name <> "Instructions" And IndividualWorkSheet.Name <> "Macro1" And _
    IndividualWorkSheet.Name <> "DataSheet" Then

            'Select each worksheet.
            IndividualWorkSheet.Select

            'Shift the worksheetover to the new workbook.
            '****NOTE: THIS CODE CURRENTLY RESULTS IN A '1004' RUN-TIME ERROR.****
            IndividualWorkSheet.Move After:=NewWorkBook1.Sheets.Count

    End If
Next

'An ugly set of If Then statements to clean the new workbook (4)
'(4) of its previous sheets, assuming entries are to be made.
If NewWorkBook1.Sheets.Count > 1 Then

    NewWorkBook1.Sheets("Sheet1").Delete

End If

If NewWorkBook1.Sheets.Count > 1 Then

    NewWorkBook1.Sheets("Sheet2").Delete

End If

If NewWorkBook1.Sheets.Count > 1 Then

    NewWorkBook1.Sheets("Sheet3").Delete

End If

'********** CODE CHECKED BUT UNTESTED WITHIN THESE BOUNDARIES **********

'Activate the Window for the new workbook if it is inactive.
Windows("NewWorkBook.xlsx").Activate

'If the number of sheets are greater than 1... (5)
If Sheets.Count > 1 Then

    '(6) The time value is parsed to remove unusual characters, following (5)
    '(6) the logic of this SO article: https://stackoverflow.com/questions/11364007/save-as-failed-excel-vba.

    'Formatted current time as per http://www.mrexcel.com/forum/excel-questions/273280-visual-basic-applications-format-now-yyyymmddhhnnss.html
    CurrentTime = Format(Now(), "yyyy-mm-dd-hh-nn-ss")

    '(5) Then go ahead and save the file with the current date/time information.
    NewWorkBook1.SaveAs Filename:="Form_Data_" & Now, FileFormat:=Application.DefaultSaveFormat

End If

'Set SaveChanges = True, as per https://stackoverflow.com/questions/9327613/excel-vba-copy-method-of-worksheet-fails
ActiveWorkbook.Close SaveChanges:=True

'********** END CODE BOUNDARY **********

'Activate the Window for the Macro.
Windows("ShifterMacro.xlsm").Activate

'Activate a specific sheet of the Macro.
ActiveWorkbook.Sheets("Instructions").Activate

'Change Display Alerts back to normal.
Application.DisplayAlerts = True

'Reset the view for the original data sheet.
With Sheets("Sheet1")

'For when this process is repeated.
If .FilterMode Then .ShowAllData

End With

'Return the Default save format to the original file format.
Application.DefaultSaveFormat = FileFormatSet

End Sub 
```

代码在第 62 行失败，并导致“1004”运行时错误：

```
IndividualWorkSheet.Move After:=NewWorkBook1.Sheets.Count 
```

引用的工作表包含“100-AAA”的正确测试值。Sheets.Count 等于 3。NewWorkBook1 变量保存值`NewWorkBook.xslx`。生成的工作簿“NewWorkBook.xslx”的路径与宏工作簿相同。我的 excel 版本是 2007，尽管我的用户的默认版本是 2003，尽管他们有 2007 的容量和安装。

为什么我会`Move`出现此运行时错误，如何更正此错误以将我的工作表转移到新生成的工作簿中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T18:58:13.160

这：

`IndividualWorkSheet.Move After:=NewWorkBook1.Sheets.Count`

只是指定在同一个工作簿中移动工作表（如果 NewWorkBook1 的工作表比其父工作簿多，则会出错）

也许尝试：

`IndividualWorkSheet.Move After:=NewWorkBook1.Sheets(NewWorkBook1.Sheets.Count)`

# android - 如何解析图像字节 [] 数组

> ID：11975098
> 
> 赞同：0
> 
> 时间：2012-08-15T18:38:12.630
> 
> 标签：android, bitmap, camera, byte

我的 Android 相机将整个图像传递到 onPreviewFrame 中，但我只想要对应于像素范围的字节。例如，通过一个像素为 480x640 的图像。我想要一个新的 byte[] 数组，其像素在 Rect(100,100,200,200) 范围内

```
public void onPreviewFrame(byte[] arg0, Camera arg1) {
    // arg0 = 460,800 BYTES
    // the camera's resolution is at 640 x 480
    // arg0 format is NV21
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:47:33.967

尝试使用 [http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)

以及 BitmapRegionDecoder 类的方法 newInstance(InputStream stream, boolean isShareable) 。接下来可以使用

```
BitmapRegionDecoder decoder = newInstance(stream,false)
Bitmap region = decoder.decodeRegion(new Rect(x, y, x1, y1), null); 
```

# ruby-on-rails - 使用 capistrano 部署时出错

> ID：11975099
> 
> 赞同：2
> 
> 时间：2012-08-15T18:38:19.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, capistrano, rvm-capistrano

我收到了这个错误：

```
connection failed for: your slave db-server here (SocketError: getaddrinfo:
 Name or service not known), your primary db-server here (SocketError:
 getaddrinfo: Name or service not known), **********.***.** (Errno::ECONNREFUSED:
 Connection refused - connect(2)) 
```

键入此命令时：

```
cap deploy:setup 
```

我正在使用这个网站[http://guides.beanstalkapp.com/deployments/deploy-with-capistrano.html](http://guides.beanstalkapp.com/deployments/deploy-with-capistrano.html)。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:18:18.350

Capistrano 使用公钥和私钥连接到数据库服务器，即使它与部署的应用程序位于同一台服务器上。因此，您需要将 ~/.ssh/id_rsa.pub 的内容（存储您的公钥）添加到您的 ~/.ssh/authorized_keys 文件中，但在行尾，将服务器名称更改为“localhost”

# c# - ASP MVC 3 控制器动作未接收所有参数

> ID：11975101
> 
> 赞同：1
> 
> 时间：2012-08-15T18:38:25.467
> 
> 标签：c#, asp.net-mvc, razor

所以我有类似这样的看法：

```
...
<input type="text" id="FieldOne" />
<input type="text" id="FieldTwo" />
<input type="text" id="FieldThree" />
... 
```

模仿这个类：

```
public class Foo{
    public string FieldOne { get; set; }
    public string FieldTwo { get; set; }
    public string FieldThree { get; set; }
} 
```

以及相应控制器中的一个动作：

```
[HttpPost]
public ActionResult View(Foo param)
{
   ...
} 
```

当我提交表单时，Post 操作中的参数“param”会正确复制与该类匹配的所有字段的值，但其中一个字段除外（例如 FieldOne）。这些输入由 Html.TextboxFor() 生成。

这是一个特殊的问题还是我可能忘记了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T18:47:51.877

您的输入框无效。它们应该如下所示：

```
// Start Form
<input type="text" id="FieldOne" name="FieldOne" />
<input type="text" id="FieldTwo" name="FieldTwo" />
<input type="text" id="FieldThree" name="FieldThree" />
// End Form 
```

话虽如此，您是否有任何理由不使用 Html Helpers？鉴于您的模型，最好按如下方式编写表单：

```
// Start Form
@Html.TextBoxFor(m => m.FieldOne)
@Html.TextBoxFor(m => m.FieldTwo)
@Html.TextBoxFor(m => m.FieldThree)
// End Form 
```

# xml - 将平面 xml 字符串转换为树结构

> ID：11975104
> 
> 赞同：1
> 
> 时间：2012-08-15T18:38:31.257
> 
> 标签：xml, xslt, flat

我有一个扁平的 xml 字符串： `<XML><Test><Result>123</Result></Test></XML>`

如何使用 xslt 将此字符串转换为标准 xml 结构，如下所示：

```
<XML>
 <Test>
   <Result>123</Result>
 </Test>
</XML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:43:57.533

您可以使用将元素的属性设置为“yes”的[身份转换：](http://en.wikipedia.org/wiki/Identity_transform)[`xsl:output`](http://www.w3.org/TR/xslt/#output)`indent`

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes"/>
    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

# ruby-on-rails - RoR - 设计可确认的电子邮件错误

> ID：11975105
> 
> 赞同：0
> 
> 时间：2012-08-15T18:38:35.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, devise-confirmable

我正在使用带有 Devise 的 Ruby on Rails 3 并发送确认电子邮件。电子邮件可以正常工作（就发送而言），但是当我单击“确认我的帐户”链接时，它会产生错误。
任何人都可以解释一下，或者至少指出我正确的方向这是什么/如何解决这个问题？

这是我在日志中看到的错误：

```
 Started GET "/users/confirmation?confirmation_token=qKvZWHgj6ncYAyuQq3e1" for 127.0.0.1 at 2012-08-15 20:57:11 +0300
Processing by ConfirmationsController#show as HTML
  Parameters: {"confirmation_token"=>"qKvZWHgj6ncYAyuQq3e1"}
  User Load (9.0ms)  SELECT "users".* FROM "users" WHERE "users"."confirmation_token" = 'qKvZWHgj6ncYAyuQq3e1' LIMIT 1
Completed 500 Internal Server Error in 35920ms

NoMethodError (undefined method `only_if_unconfirmed' for #):
  app/controllers/confirmations_controller.rb:58:in `with_unconfirmed_confirmable'
  app/controllers/confirmations_controller.rb:40:in `show'

  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/_trace.erb (8.0ms)
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (3.0ms)
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (4479.3ms) 
```

我验证了 url 中的令牌与数据库中的该用户完全匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-03T01:26:57.737

可能你有一个最新版本的设计，它改变了确认令牌的处理方式，所以如果你用这样的设计生成视图：

```
rails g devise:views 
```

然后在**app/views/devise/mailer/confirmation_instructions.html.erb**文件下你有类似的东西：

```
....
<%= link_to 'Confirm my account', confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) %>
.... 
```

您应该将其更改为：

```
<%= link_to 'Confirm my account', confirmation_url(@resource, :confirmation_token => @token) %> 
```

如您所见，他们使用了一个名为`@token`而不是`@resource.confirmation_token`

这应该够了吧！

# c# - 处理 Graphics 对象

> ID：11975106
> 
> 赞同：0
> 
> 时间：2012-08-15T18:38:39.413
> 
> 标签：c#, winforms, graphics, dispose, idisposable

我对处理图形对象的机制感到困惑。处理字体和钢笔等对象的最佳方法是什么？实例化/处置它们时的最佳实践是什么？我的意思是作为类中的字段或方法中的变量？

例如，我有一个类似以下代码的类。我有一些字体和笔在课堂上的任何地方都使用，所以不是每次在调用方法中创建它们，我只是将它们创建为字段。这会提高性能吗？

```
public class PackageDrawer : IDisposable
{
   Font font1 = ....
   Font font2 = ....
   Font font3 = ....
   Pen  pen1 = ...
   Pen  pen2 = ...
   Pen  pen3 = ...

   public Bitmap Draw()
   {
       //use fonts and pens here
       //also they are being user in more methods
   }

   ~PackageDrawer()
   {
       Dispose();
   }

   public void Dispose()
   {
       font1.Dispose();
       //And dispose other stuff...
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:52:08.490

> 处理字体和钢笔等对象的最佳方法是什么？

最好也是唯一的方法是打电话给`Dispose()`您，当您不再需要它们时，您应该将它们处理掉。

> 实例化/处置它们时的最佳实践是什么？

这一切都取决于您的实施。在大多数情况下，最好在完成它们后立即创建和销毁它们。这完全取决于您的客户端代码如何实现`PackageDrawer`对象以及可能访问这些对象的方法。

您可能想`IDisposable`在 StackOverflow 上阅读这里的内容。从您发布的内容中，您可以删除`~PackageDrawer()`终结器覆盖并简单地创建一个`Dispose()`方法。`Dispose`如果您从该方法派生任何类， 您可能还希望将该方法设为虚拟方法。

此外，没有任何东西可以防止`Dispose()`在您的对象上被多次调用，因此您需要添加一个私有跟踪布尔值以确保它不会`Dispose()`多次尝试。此外，在尝试调用`Dispose()`以避免`NullReferenceException`.

```
private bool _isDisposed;

public void Dispose()
{
    Dispose(true);
}

protected virtual void Dispose(bool disposing)
{
   if (_isDisposed)
      return;

   if (disposing)
   {
       if (font != null)
           font.Dispose();
   }

   _isDisposed = true;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:43:40.897

一般来说`Pen`，`Brush`对象的分配越晚越好，`Dispose(..)`越快越好。通常这是在主要（假设）`Paint(..)`方法中处理的。*这就是几乎*所有框架（`.NET`也不例外）中的绘图工件都被声明为结构，以保证快速分配`stack`和快速*销毁*。

# math - 如何包装连续的整数范围？

> ID：11975114
> 
> 赞同：2
> 
> 时间：2012-08-15T18:39:09.467
> 
> 标签：math, integer

给定一定的长度，包含从 (>=0)`f(i, n, len, offset)`开始的整数范围的最短可能计算是什么？`n``len``offset`

```
i   offset 0  offset 1  offset 2  offset 15
10  -> 10     -> 15     -> 14     -> 13
11  -> 11     -> 10     -> 15     -> 14
12  -> 12     -> 11     -> 10     -> 11
13  -> 13     -> 12     -> 11     -> 10
14  -> 14     -> 13     -> 12     -> 11
15  -> 15     -> 14     -> 13     -> 12 
```

所以和。`f(10, 10, 5, 1) = 15`_`f(15, 10, 5, 1) = 14``f(10, 10, 5, 2) = 14`

负数或负偏移量或跨 0 范围的奖励业力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:49:23.853

我不知道“最短的可能”，但这似乎有效：

```
f(int n, int base, int len, int offset)
{ int r = n - offset;
  if (r < base)
    r += len;
  return r;
} 
```

但是，它确实需要添加`base`参数，因为否则您不知道`n`相对于范围的位置（例如，15 在 15-20 范围的底部还是 10-15 的顶部？）。所以你的例子会变成`f(10, 10, 6, 1)`, `f(15, 10, 6, 1)`, 等等...

尚未检查这是否适用于负数和/或跨越 0 的范围，如果 ，它也会失败`offset > len`，但这可以通过添加`offset %= len`以规范化输入参数来解决。

# html - html 代码(blogger) 固定按钮

> ID：11975118
> 
> 赞同：0
> 
> 时间：2012-08-15T18:39:16.703
> 
> 标签：html, blogger, blogspot

我想在我的照片上制作“固定”按钮，比如这些[http://freefashionorgasm.blogspot.com/](http://freefashionorgasm.blogspot.com/)和我博客上的按钮（中心），但是如何？请帮帮我，xo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:44:20.650

添加

```
.post-body {
    text-align: center;
} 
```

到您的模板。

或者，如果您不希望帖子的文本默认居中，请改为添加

```
.center {
    text-align: center;
} 
```

然后，在你的帖子中，用 div 包裹你的like按钮`class="center"`，像这样：

```
<div class="center">
<iframe frameborder="0" scrolling="no" style="border: medium none; overflow: hidden; height: 21px; width: 100%; text-align: center;" src="http://www.facebook.com/plugins/like.php?href=http://freefashionorgasm.blogspot.com/2012/08/blog-post_9995.html&send=false&layout=button_count&show_faces=false&width=90&action=like&font=arial&colorscheme=light&height=21" allowtransparency="true">
</div> 
```

# xml - 使用 XSL 读取包含文件

> ID：11975120
> 
> 赞同：3
> 
> 时间：2012-08-15T18:39:20.947
> 
> 标签：xml, xslt, xml-parsing, xslt-2.0

我希望您对我解决此问题的方法有什么看法。我有一个名为 nav.inc 的文件，其中包含如下文本：

```
<li class="closed"><a title="x" href="x.html">x</a></li>
<li class="closed"><a title="y" href="y.html">y</a></li>
<li class="closed"><a title="z" href="a.html">z</a></li> 
```

我想在 xsl 中解析这个文件，以便我可以将`a`标签内的每个值与一个变量进行比较。条件是扩展必须是`.inc`，这也意味着它不是一个有效的 XML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T00:59:41.677

使用 XSLT 2.0，您可以使用该`unparsed-text()`函数来加载`nav.inc`文件，然后对其进行解析`xsl:analyze-string`以构建具有一系列`href`值的变量：

```
<xsl:variable name="nav-links" as="item()*">
    <xsl:analyze-string select="unparsed-text('nav.inc')" regex="href=&quot;(.*)&quot;">
        <xsl:matching-substring>
            <xsl:sequence select="regex-group(1)"/>
        </xsl:matching-substring>
    </xsl:analyze-string>
</xsl:variable> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T02:30:11.717

```
The condition is that the extension needs to be .inc, which also means it's not going to be a valid XML 
```

**文件名中的扩展名并不意味着内容不能是格式良好的 XML 文档。**

由于所提供的示例是一个完全格式良好的 XML 片段，因此您需要安排将该片段包装到单个顶部元素中。

**然后只需使用该`document()`功能：**

```
$myVar = document('fileName.inc')/*/li[@class = 'closed']/a 
```

此 XPath (1.0) 表达式的求值产生`true()`是否字符串值`$myVar`等于元素的字符串值，该`a`元素是属性具有字符串值的`li`元素的子元素，并且是 XML 文档顶部元素的子元素包含在文件中。`class``"closed"``fileName.inc`

* * *

**如果确实无法确定该文件包含格式良好的 XML 文档**，请使用[`unparsed-text()`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#function-unparsed-text)和[`xsl:analyze-string`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#analyze-string).

**这是一个完整的转换**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vText" select=
      "unparsed-text('file:///c:/temp/delete/fileName.inc')"/>

 <xsl:template match="/">
     <xsl:analyze-string select="$vText" regex="&gt;([^&lt;]*)&lt;/a&gt;" flags="m">
       <xsl:matching-substring>
         <value><xsl:value-of select="regex-group(1)"/></value>
       </xsl:matching-substring>
     </xsl:analyze-string>
 </xsl:template>
</xsl:stylesheet> 
```

当此转换应用于任何 XML 文档（未使用）时，它会处理文件：`c:\temp\delete\fileName.inc`其中包含提供的文本：

```
<li class="closed"><a title="x" href="x.html">x</a></li>
<li class="closed"><a title="y" href="y.html">y</a></li>
<li class="closed"><a title="z" href="a.html">z</a></li> 
```

**并产生了想要的正确结果**：

```
<value>x</value>
<value>y</value>
<value>z</value> 
```

**以下是如何将变量与提取的值进行比较：**

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vText" select=
      "unparsed-text('file:///c:/temp/delete/fileName.inc')"/>

    <xsl:param name="vSearchValue" select="'y'"/>
 <xsl:template match="/">
   <xsl:variable name="vExtracted" as="element()*">
         <xsl:analyze-string select="$vText" regex="&gt;([^&lt;]*)&lt;/a&gt;" flags="m">
           <xsl:matching-substring>
             <value><xsl:value-of select="regex-group(1)"/></value>
           </xsl:matching-substring>
         </xsl:analyze-string>
     </xsl:variable>

     <xsl:sequence select="$vSearchValue = $vExtracted"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
true 
```

# ruby-on-rails - Rails 查看haml“未定义方法”link_to

> ID：11975123
> 
> 赞同：0
> 
> 时间：2012-08-15T18:39:30.277
> 
> 标签：ruby-on-rails, routes, haml

红宝石，Rails 3，新手

我正在为班级分配扩展一个工作的 Rails 应用程序（显示电影），所以基本的管道工作正常。

我在 routes.rb 中添加了一个条目-

```
match "/movies/directed_by/:director" => "movies#directed_by" 
```

然后我的 rake 路线有一个条目

```
/movies/directed_by/:director(.:format) {:controller=>"movies", :action=>"directed_by"} 
```

注意没有“路径”，也没有指定 HTTP 方法（例如 GET）

对于其他（Rails 模型自动生成的）路线，指定了路径和*动词*。

我有一个控制器方法

```
def directed_by

  # some code

end 
```

我有一个视图文件 ../app/Views/show.html.haml 我在其中添加

```
= link_to 'Find Movies With Same Director', directed_by(@movie.director) 
```

这会引发运行时错误 -

```
NoMethodError in Movies#show

Showing /home/saasbook/hw3/hw3_rottenpotatoes_rjf/app/views/movies/show.html.haml where line #22 raised:

undefined method `directed_by' for #<#<Class:0xc564594>:0xc532198> 
```

所以我的问题是，现在我是否要调整我的`routes.rb`和/或查看 haml 以将所有内容联系在一起？

欢迎所有提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:01:52.063

在路线：

```
match "/movies/directed_by/:director" => "movies#directed_by", :as => :movie_direct_by 
```

那么在你看来：

```
= link_to 'Find Movies With Same Director', movie_direct_by_path(@movie.director) 
```

# java - GWT 文本区域样式

> ID：11975125
> 
> 赞同：1
> 
> 时间：2012-08-15T18:39:34.380
> 
> 标签：java, gwt, textarea, smartgwt

出于某种原因，我似乎无法更改 GWT TextAreas 中的字体或字体大小。文本区域的默认字体甚至与其他默认字体都不匹配，出于某种原因，它看起来像记事本字体。我尝试添加和设置样式名称，但字体不会改变，只有颜色和 TextArea 的其他部分会改变。我想我之前添加的时候可能已经破坏了一些东西，然后删除了 SmartGWT。有没有人有任何想法可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:39:15.700

您必须在 Module.gwt.xml 文件中检查您的主题继承行，以验证您是否包含一个 gwt 主题（通常在使用 smartgwt 时，我们会对此进行评论）并且没有继承 smartclient 主题。使用 firebug 查看您的 TextAreas 以查看应用了哪个 css 类并检查您的 css 文件以查看您是否有此类的任何条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T08:53:46.147

我遇到了同样的问题，因此使用 Chrome 检查器来找出我的样式没有被应用的原因。由于 clean.css 中的设置，它们似乎被忽略了。所以我做了：

```
.gwt-TextArea {
	font-family : monospace !important;
	font-size : 10pt !important;
}
```

这奏效了。

# php - 未知字符·导入excel到MySQL后如何避免？

> ID：11975126
> 
> 赞同：1
> 
> 时间：2012-08-15T18:39:35.343
> 
> 标签：php, mysql, excel, import, character

> **可能重复：**
> [utf-8 编码 PHP + MySQL 中的问题](https://stackoverflow.com/questions/1707792/problem-in-utf-8-encoding-php-mysql)

我已经从一个 excel 文件将大约 1000 条记录导入 MySQL。但现在我在一些文本之间看到了……。似乎它们是双引号。

1.  导入数据时如何避免这种情况？
2.  `str_replace()`在网页中打印数据时，我可以使用函数来处理这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:58:03.970

如果您的数据库足够简单（没有序列化的值并且没有千兆字节大小），您可以完全导出它（例如使用 PhpMyAdmin），在文本编辑器中打开，执行搜索替换并重新导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:48:11.690

使用 preg_replace 对所有无法识别的字符进行正则表达式替换。

例子：

```
$data = preg_replace("/[^a-zA-Z0-9]/", "", $data); 
```

此示例将替换所有非字母数字字符（不是 az、AZ、0-9 的任何字符）。

[http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T18:54:46.640

str_replace('“', '"', $original_string);

有几个字符单词可以做到这一点，所以你可能也想这样做：str_replace("'", "'", $original_string);

如果您看到其他字符导致相同的问题，您可以在 word 中打开文档，并将有问题的字符复制/粘贴到您的编辑器中并进行类似的替换。

由于您很可能希望将字符替换为等效版本，因此您可能不想像另一个答案中建议的那样执行正则表达式。str_replace 的使用类型比 preg_replace 快。

# powershell - Powershell中泛型类型的泛型

> ID：11975130
> 
> 赞同：13
> 
> 时间：2012-08-15T18:39:49.697
> 
> 标签：powershell

Powershel 中的泛型非常令人困惑。要实例化一个简单的列表，您需要手鼓跳舞：

```
$type = ("System.Collections.Generic.List"+'`'+"1") -as "Type"
$type= $type.MakeGenericType("System.string" -as "Type")
$o = [Activator]::CreateInstance($type) 
```

但是如果我需要一些更复杂的东西怎么办：`<Dictionary<string,List<Foo>>`例如

或者例如这里：`Dictionary<string,List<string>>`

```
$listType = ("System.Collections.Generic.List"+'`'+"1") -as "Type"
$listType = $listType.MakeGenericType("System.string" -as "Type")
$L = [Activator]::CreateInstance($listType)

$dicType = ("System.Collections.Generic.Dictionary"+'`'+"2") -as "Type"

#the next line is problematic
$dicType = $dicType.MakeGenericType( 
     @( ("system.string" -as "Type"), 
        ("System.Collections.Generic.List" as "Type)) # and that's of course wrong
      )

$D = [Activator]::CreateInstance($dicType ) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-15T20:53:00.770

虽然您可以深入研究 CLR 内部表示并使自己的生活变得艰难，但您*不必*：

```
$dict = new-object 'collections.generic.dictionary[string,int]'
$dict.add("answer", 42) 
```

想要类型文字表示？

```
[collections.generic.dictonary[string,int]] 
```

完毕。泛型类型参数怎么样？

```
$dictOfList = new-object 'collections.generic.dictionary[string,
    [collections.generic.list[int]]]' 
```

完毕。

但是，有一个不幸的问题。在 PowerShell 2.0 中，当您混合和匹配 BCL 和 3rd 方类型作为类型参数时会出现错误。后者需要装配合格：

```
# broken over two lines for clarity with backtick escape
$o = new-object ('collections.generic.dictionary[[{0}],[{1}]]' -f `
        [type1].fullname, [type2].fullname) 
```

希望这可以帮助。在 PowerShell 3.0 中，此问题已得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:00:57.393

是的，似乎有可能，但就像 PS 中的几乎所有其他东西一样，这也太丑陋了。这是现实世界的例子：

`$requestItemsType`是一个`Dictionary<string, List<Amazon.DynamoDB.Model.WriteRequest>>`

```
$wrt = ("System.Collections.Generic.List``1" -as "Type") 
$wrt = $wrt.MakeGenericType( @( ("Amazon.DynamoDB.Model.WriteRequest" -as "Type")))

$requestItemsType = ("System.Collections.Generic.Dictionary"+'`'+"2") -as "Type"
$requestItemsType = $requestItemsType.MakeGenericType( @( ("System.string" -as "Type"), ($wrt)))
$ri = [Activator]::CreateInstance($requestItemsType)
$ri.Add("TaskLog",$writeRequests) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T20:44:08.890

如果您要创建定义了自定义类型的字典，则上面的示例不必那么复杂：

```
$propertiesType = ("System.Collections.Generic.Dictionary"+'`'+"2") -as "Type"
$propertiesType = $propertiesType.MakeGenericType( @( ("System.string" -as "Type"), ("Namespace.CustomType" -as "Type")))
$properties = [Activator]::CreateInstance($propertiesType) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-17T12:46:26.327

我知道这可能有点老了，但这种解决方法似乎在 PowerShell 2 中运行良好，并且几乎可以用作直接替代品。

```
$foo = [activator]::CreateInstance(([System.Collections.Generic.List[string]] -as 'Type')) 
```

# php - 将 JS 字符串转换为 JSON 对象

> ID：11975132
> 
> 赞同：0
> 
> 时间：2012-08-15T18:39:54.203
> 
> 标签：php, javascript, jquery

我正在尝试使用验证插件为远程验证器功能动态构建 JS。但由于某种原因，它没有将 JS 转换为对象，而是将其视为字符串并嵌入双引号。

前任：

我拥有的 PHP 代码是：

```
$remoteUrl = '/test/checkusername';
$remoteValidatorJs = "{url: '". $remoteUrl . "',
                      type: 'post',
                      async:false,
                      dataType: 'html',
                      beforeSend: function(){
                         alert('Validating Form Field');
                       },
                       complete: function(){
                         alert('Completed Validation of Form Field');
                       },
                      dataFilter: function(html) {
                          return html;
                      }
                      }";
$validation[ 'rules' ][ 'Name' ][ 'remote' ] = $remoteValidatorJs; 
```

如何在`$remoteValidatorJs`变量中构建或转换 JS，因此，当打印数组时，它最终看起来像以下“远程”部分中的内容：

```
$("#testForm").validate( {
    "rules":{
        "Name":{
            "remote":{
                url: '/test/checkusername',
                type: 'post',
                async:false,
                dataType: 'html',
                beforeSend: function(){
                    alert('Validating Form Field');                     
                },complete: function(){
                    alert('Completed Validation of Form Field');                      
                },
                dataFilter: function(html) {
                    return html;                     
                }
            }
        }
    }
} ); 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:43:30.430

JSON 是 javascript 的子集，您的示例不是有效的 JSON，因为它是 javascript 字符串。

评估它的唯一方法是使用 Function 或 eval

但是在不知道您要解决什么的情况下，我怀疑评估字符串是否是解决方案。

使用包含带有函数的 javascript 对象文字的字符串，以下将起作用。PS我没有使用你的整个字符串:)

```
var remoteUrl = "http://something.com";
var evalString =
  [
    '{url:"' + remoteUrl + '",',
    'type:"post",',
    'async:false}'
  ].join('')
evalString #// => "{url:"http://something.com",type:"post",async:false}"
var x= new Function("return " + evalString + ";")()
#// => Object
  async: false
  type: "post"
  url: "http://something.com" 
```

# jquery - jQuery调用ajax新的div动态ID

> ID：11975138
> 
> 赞同：0
> 
> 时间：2012-08-15T18:40:20.287
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我在布局文件中 <

```
script type="text/javascript">
$(function() {
    // Datepicker
    $('#passExp1').datepicker({
        inline: true
   });
});
</script> 
```

在一个视图中

```
<script type="text/javascript">

function addInput(divName) {
  ... code to add the new div with form fields...

   newCalendar="passExp"+(counter+1);

   newFunction(newCalendar);

}

</script> 
```

如何创建一个 newFunction 来调用 newCalendar （这是新的表单 ID）以将 datePicker 添加到它？

我想让它使用 DatePicker**新的 passExp2,passExp3,passExp4,passExp5,...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:50:08.157

由于`newCalendar`参数的值是新 div 的 id，因此您可以在函数中执行此操作：

```
$('#' + newCalendar).datePicker(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:45:26.803

我建议使用更好的 JS 组织（我的也不是很好），但您应该在 JS 文件中执行以下操作：

**jscode.js**

```
newCalendar(selector){
    $(selector).datepicker({
        inline: true
   });
});

function addInput(divName) {
  ... code to add the new div with form fields...
   selector="passExp"+(counter+1);
   newCalendar(selector);
} 
```

然后在视图中包含你的 js 文件：`<script src="jscode.js"></script>`

它应该可以工作，当使用 jQuery 时更容易创建 CSS 选择器并将它们放在 $() 对象中，在这个例子中，我认为不需要为日历创建函数，你可以把它放在**addInput**功能

# multithreading - 使用线程和 Perl TK 隐藏分段错误 Perl 5.8.8

> ID：11975144
> 
> 赞同：3
> 
> 时间：2012-08-15T18:40:47.323
> 
> 标签：multithreading, perl, segmentation-fault, tk

我使用 Perl TK 和 Threads 编写了一个 GUI。在程序退出之前，一切都运行良好。这时我得到一个分段错误。我相信我正在尽我所能地管理我的线程，并且分段错误仅仅是由于 Perl 版本 5.8.8 中的线程。我知道这个版本很老了，但是因为工作不能更新。所以，我的问题是，我可以以某种方式简单地隐藏分段错误吗？或者，有没有一种万无一失的方法来彻底清理线程？由于问题的性质，我认为我的代码不相关，但这是我结束线程的方式：

```
my $thr = threads->create(\&worker);  ##this is created before any TK objects

sub worker {

 while($run){
  ##do thready-stuff here
 }

}

sub OnExit {
 $run=0;
 exit 0;
} 
```

其中 $run 是一个共享变量， &OnExit 绑定到正在关闭的窗口。如果我删除 $run=0 ，我会收到一个关于退出程序并运行额外线程的错误，所以我很确定这会结束它。同样，我相信我的错误是由于版本限制，所以我只想隐藏它。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T11:45:34.583

请参阅[抑制/静音窗口崩溃消息框](https://stackoverflow.com/questions/17940670/suppress-mute-windows-crash-message-box/17945422#17945422) 并添加`use Win32API::File(); Win32API::File::SetErrorMode(2);`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-26T08:57:43.437

这是一个 PERL 问题，即使您 $thread->detach，并且线程正常退出，在 PERL/windows 版本的某些组合中仍然会出现此错误。

没什么好担心的，只是隐藏它。

# python - 具有 numpy 的高效标准基向量

> ID：11975146
> 
> 赞同：19
> 
> 时间：2012-08-15T18:40:50.180
> 
> 标签：python, numpy

给定索引和大小，是否有更有效的方法来生成[标准基向量](https://en.wikipedia.org/wiki/Standard_basis)：

```
import numpy as np
np.array([1.0 if i == index else 0.0 for i in range(size)]) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-15T18:46:40.493

```
In [2]: import numpy as np

In [9]: size = 5

In [10]: index = 2

In [11]: np.eye(1,size,index)
Out[11]: array([[ 0.,  0.,  1.,  0.,  0.]]) 
```

* * *

嗯，不幸的是，为此使用 np.eye 相当慢：

```
In [12]: %timeit np.eye(1,size,index)
100000 loops, best of 3: 7.68 us per loop

In [13]: %timeit a = np.zeros(size); a[index] = 1.0
1000000 loops, best of 3: 1.53 us per loop 
```

* * *

包装`np.zeros(size); a[index] = 1.0`在一个函数中只会产生适度的差异，并且仍然比`np.eye`：

```
In [24]: def f(size, index):
   ....:     arr = np.zeros(size)
   ....:     arr[index] = 1.0
   ....:     return arr
   ....: 

In [27]: %timeit f(size, index)
1000000 loops, best of 3: 1.79 us per loop 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-15T18:45:41.273

```
x = np.zeros(size)
x[index] = 1.0 
```

至少我认为是这样...

```
>>> t = timeit.Timer('np.array([1.0 if i == index else 0.0 for i in range(size)]
)','import numpy as np;size=10000;index=5123')
>>> t.timeit(10)
0.039461429317952934  #original method
>>> t = timeit.Timer('x=np.zeros(size);x[index]=1.0','import numpy as np;size=10000;index=5123')
>>> t.timeit(10)
9.4077963240124518e-05 #zeros method
>>> t = timeit.Timer('x=np.eye(1.0,size,index)','import numpy as np;size=10000;index=5123')
>>> t.timeit(10)
0.0001398340635319073 #eye method 
```

看起来 np.zeros 是最快的......

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-15T18:45:44.767

我不确定这是否更快，但对我来说肯定更清楚。

```
a = np.zeros(size)
a[index] = 1.0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-07T10:54:41.703

通常，您需要的不是一个，而是*所有*的基向量。如果是这种情况，请考虑`np.eye`：

```
basis = np.eye(3)
for vector in basis:
  ... 
```

不完全相同，但密切相关：这甚至可以通过一些技巧获得一组基矩阵：

```
>>> d, e = 2, 3    # want 2x3 matrices
>>> basis = np.eye(d*e,d*e).reshape((d*e,d,e))
>>> print(basis)
[[[ 1\.  0\.  0.]
  [ 0\.  0\.  0.]]

 [[ 0\.  1\.  0.]
  [ 0\.  0\.  0.]]

 [[ 0\.  0\.  1.]
  [ 0\.  0\.  0.]]

 [[ 0\.  0\.  0.]
  [ 1\.  0\.  0.]]

 [[ 0\.  0\.  0.]
  [ 0\.  1\.  0.]]

 [[ 0\.  0\.  0.]
  [ 0\.  0\.  1.]]] 
```

等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-27T13:17:57.587

它可能不是最快的，但该方法[`scipy.signal.unit_impulse`](http://scipy.github.io/devdocs/generated/scipy.signal.unit_impulse.html)将上述概念推广到任何形状的 numpy 数组。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-07T13:09:43.403

另一种实现方式是：

```
>>> def f（大小，索引）：
... return (np.arange(size) == index).astype(float)
...

```

这会导致执行时间稍慢：

```
>>> timeit.timeit('f(size, index)', 'from __main__ import f, size, index', number=1000000)
2.2554846050043125

```

# iphone - 在 UITabBar StoryBoard 应用程序中设置委托

> ID：11975152
> 
> 赞同：1
> 
> 时间：2012-08-15T18:41:16.467
> 
> 标签：iphone, ios, delegates, uitabbaritem

我有一个这样的应用程序：

![在此处输入图像描述](../Images/ea20217a4f3b2bf224a6470d4203428b.png)

现在，我想将 SubscriptionsViewController（左侧的第一个 UIViewController）设置为 UserViewController 的委托。我在 UserViewController 中创建了一个@property .. bla bla bla，但现在我不明白如何将第一个 UIViewController 设置为第二个的代表...如果我有一个“用户”按钮而不是“用户”UITabBarItem 如果可以：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UserViewController *userViewController = segue.destinationViewController;
    userViewController.delegate = self;
} 
```

但它不适用于 UITabBarItems （可能是因为没有转场（？））

我该如何解决这个问题？

谢谢！

# ruby-on-rails - 从哈希打印值在 ruby 中返回 nil

> ID：11975157
> 
> 赞同：2
> 
> 时间：2012-08-15T18:41:23.127
> 
> 标签：ruby-on-rails, ruby

我有以下代码：

```
person1 = { :first => "bob", :last => "perry"}
person2 = { :first => "fred", :last => "perry"}
person3 = {:first => "jane", :last =>"perry"}
family = {:dad => person1, :son => person2, :mum => person3}

puts (family[:dad][:last],family[:dad][:first]) 
```

它打印出来：

```
perry
bob
nil 
```

为什么它也输出nil？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T18:43:32.410

因为你在`irb`，它打印出最后一个方法运行的返回值，并`puts`返回 nil。

^(*（或在`rails c`。）*)

# security - 禁用 PDF 打印的命令行工具

> ID：11975159
> 
> 赞同：11
> 
> 时间：2012-08-15T18:41:28.747
> 
> 标签：security, pdf

有谁知道“免费”命令行工具可以锁定用户打印的 pdf。我需要能够将它放在一个批次中以循环浏览文件夹并禁用从 adobe 标准和阅读器进行打印。是否可以使用任何工具从命令行执行此操作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T19:30:47.030

## 首先，`pdftk`：

您可以使用`pdftk`for（适用于 Linux、Unix、Mac OS X 和 Windows）设置“所有者密码”：

```
pdftk \
  input.pdf \
  output semi-protected.pdf \
  owner_pw "supersecret" 
```

结果是这样的，例如：

```
pdfinfo semi-protected.pdf | grep Encrypted:

  Encrypted:      yes (print:no copy:no change:no addNotes:no) 
```

您可以修改命令以额外要求用户密码才能打开 PDF：

```
pdftk \
  input.pdf \
  output semi-semi-protected.pdf \
  owner_pw "supers3cr3t" \
  user_pw "s3cr3t" 
```

您可以将命令修改为（有选择地）“允许”其他用户操作：

```
pdftk \
  input.pdf \
  output semi-semi-protected.pdf \
  owner_pw "supers3cr3t" \
  allow ModifyContents \
  allow CopyContents \
  allow ScreenReaders \
  allow ModifyAnnotations 
```

结果可能是这样的，例如：

```
pdfinfo semi-semi-protected.pdf | grep Encrypted:

  Encrypted:      yes (print:no copy:yes change:yes addNotes:yes) 
```

## 二、`podofoencrypt`：

命令行示例：

```
podofoencrypt \
   --rc4v2 \
   -o "supers3cr3t" \
   -u "s3cr3t" \
   --edit \
   --copy \
   --editnotes \
   --fillandsign \
   --accessible \
   --assemble \
     input.pdf \
     semi-protected.pdf 
```

* * *

**大而胖的警告：**

*您应该知道，这种“保护”PDF 文件的方式绝不是超级安全的。有相当多的 PDF 破解软件实用程序可以轻松取消保护您的 PDF 文件。这种方法只是防止大多数noobie计算机用户弄乱您的文件的一种非常基本的方法。*

* * *

此外，另见

## 第三，`qpdf`：

在[马丁施罗德的回答](https://stackoverflow.com/a/11976910/359307)中！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-15T20:39:31.673

[qpdf](http://qpdf.sourceforge.net/)可以这样做：

```
qpdf                 \
  --encrypt          \
    "user-password"  \
    "owner-password" \
    40               \
  --print=n          \
  --                 \
    infilename       \
    outfilename 
```

甚至

```
qpdf                 \
  --encrypt          \
    "user-password"  \
    "owner-password" \
    128              \
  --print=non        \
  --accessiblity=y   \
  --force-V4         \
  --modify=form      \
  --                 \
    infilename       \
    outfilename 
```

# php - 为什么隐藏的输入会影响我的布局？低频解释

> ID：11975160
> 
> 赞同：9
> 
> 时间：2012-08-15T18:41:46.060
> 
> 标签：php, html, css, input

我需要使用隐藏的输入将一些 ID 传输到每个块的页面......无论如何。

我有以下代码：

```
<div id="shipping_box" class="formSep well">
    <div id="default_shipping_box" class="shipping_box row-fluid">
        <div class="span1">
            <input type="hidden" name="tracking_id" value="" />
        </div>
    </div>
</div> 
```

这段代码运行良好，结果符合我的预期。

如果我这样做：

```
<div id="shipping_box" class="formSep well">
    <div id="default_shipping_box" class="shipping_box row-fluid">
        <input type="hidden" name="tracking_id" value="" />
        <div class="span1">

        </div>
    </div>
</div> 
```

布局不被尊重。请参阅此图片以进行演示：

![在此处输入图像描述](../Images/e2580c5e6651fc69946e25cf0521027e.png)

有人可以向我解释为什么吗？隐藏的输入不应该是“隐藏的”，所以它们不应该影响布局？

jsfiddle：http: [//jsfiddle.net/t9M3C/](http://jsfiddle.net/t9M3C/)

285号线附近

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T19:42:25.227

使用谷歌浏览器的 Inspest 插件，当你移动这个类的输入时：

```
.row-fluid [class*="span"]:first-child {
     margin-left: 0;
} 
```

被移除。

这是因为在此：

```
<div id="shipping_box" class="formSep well">
    <div id="default_shipping_box" class="shipping_box row-fluid">
        <input type="hidden" name="tracking_id" value="" />
        <div class="span1">
        </div>
    </div>
</div> 
```

this :`<div class="span1">`不是第一个孩子，this:`<input type="hidden" name="tracking_id" value="" />`是。

在您的 CSS 中，这是默认类`[class*="span"]`：

```
[class*="span"] {
    float: left;
    margin-left: 30px;
} 
```

所以用这个例如：

```
.row-fluid .span1 {
    margin-left:0 !important;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T20:03:55.027

是因为你有一个 css 规则（在 bootstrap.min.css 文件中），它与 default_shipping_box div 中的 firs-child 元素（但只有当有一个 class*="span"）相匹配。

```
.row-fluid [class*="span"]:first-child {
margin-left: 0;
} 
```

因此，如果您将**隐藏的输入**放在**div#default_shipping_box**中并在第一个跨度之前，那么该规则不会设置**div.span1**的样式，这就是您的模板受到影响的原因。

您可以修复将简单的 css 规则添加到同一个文件...

```
.row-fluid .span1{margin-left:0 !important;} 
```

重要的是，因为您有更多文件覆盖了此规则（例如在 bootstrap-responsive.min.css 中）

祝你好运，我希望它有助于欢呼，Gmo.-

编辑：太慢了XD。写作时回答......我同意上面解释的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T20:11:50.327

`left-margin`如果类包含以下内容，Bootstrap 有一些 CSS 会将第一个子项的第一个设置为 0 `span`：

```
.row-fluid [class*="span"]:first-child {
    margin-left: 0;
  } 
```

当隐藏输入放在第一个div 上方时，将不会应用`span`上述属性。`margin-left: 0;`

下图显示当隐藏输入是**before**时，则第一个`span`类有一个左边距。

![DIV 上方的隐藏输入](../Images/40ca506aaa7d6ef44d20a6ffc8c4250a.png)

这表明当隐藏输入**在**div 之后时，没有左边距。

![隐藏在 DIV 上方](../Images/1496e1e79f64d6e6e188984299792cf3.png)

编辑：我似乎被殴打了两次，而我正在获取屏幕截图来说明差异！

# .net - System.Random().Next() 返回相同的结果

> ID：11975161
> 
> 赞同：3
> 
> 时间：2012-08-15T18:41:52.393
> 
> 标签：.net, f#

我正在尝试打乱列表的元素：

```
(* Returns a list with the same elements as the original but in randomized order *)
let shuffle items = 
    items
    |> List.map (fun x -> (x, System.Random().Next()))
    |> List.sortBy snd
    |> List.map fst 
```

但是，这总是`items`以相同的顺序返回，因为：

```
> List.map (fun x -> x, System.Random().Next()) [1; 2; 3];;
val it : (int * int) list = [(1, 728974863); (2, 728974863); (3, 728974863)]

> List.map (fun x -> x, System.Random().Next()) [1; 2; 3];;
val it : (int * int) list =
  [(1, 1768690982); (2, 1768690982); (3, 1768690982)]

> List.map (fun x -> x, System.Random().Next()) [1; 2; 3];;
val it : (int * int) list = [(1, 262031538); (2, 262031538); (3, 262031538)] 
```

为什么`System.Random().Next()`每次调用总是返回相同的值？是因为连续的电话在时间上太接近了吗？还是我以其他方式滥用 API？

（注意：这个[答案](https://stackoverflow.com/a/6062383/147601)对我来说很好，但我很好奇为什么会出现这种行为。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T18:46:53.673

最好通过[System.Random() 的默认构造函数](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)的手册来解释；

> 默认种子值来自系统时钟并且具有有限的分辨率。因此，通过调用默认构造函数连续创建的不同 Random 对象将具有相同的默认种子值，因此将产生相同的随机数集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T21:15:34.663

要记住的一件事是，您不是从随机数生成器生成数字序列，而是创建一个随机数生成器序列并生成每个随机数的第一个随机数。

请记住，它`System.Random().Next()`是 的简写`(new System.Random()).Next()`，因此您在每次迭代时使用 Random 的默认构造函数创建一个新的 System.Random 对象。如其他答案中所述，默认构造函数使用当前时间的粗略值作为 RNG 的初始种子，因此当快速连续调用时，基本上每次都会重新创建相同的 RNG（这将在其上生成相同的数字第一次也是唯一一次调用）。

解决方案是只创建一个 System.Random 对象并重用它：

```
> let rng = new System.Random() in List.map (fun x -> x, rng.Next()) [1; 2; 3];;
val it : (int * int) list = [(1, 483259737); (2, 719806274); (3, 1951956175)] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T18:46:04.993

它之所以这样工作，是因为您每次都使用相同的种子值。这就是为什么连续调用`Random`.

# objective-c - 在文本中使用换行符时，UITableViewCell 删除按钮会搞砸 textLabel

> ID：11975167
> 
> 赞同：0
> 
> 时间：2012-08-15T18:42:20.287
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我有一个`UITableViewCell`，当滑动以显示删除按钮时，它搞砸了 textLabel，因为我在文本中使用了换行符。

前：

![在此处输入图像描述](../Images/598fe0b960404eeb4fe786d60ed096b7.png)

在删除模式下：

![在此处输入图像描述](../Images/48f5733dc1c9a4df1b3f6236bfef9af0.png)

这很令人沮丧，因为我只想让删除按钮覆盖我的文本，而不是试图让它动画化，以免把它搞砸。

*   为什么会这样？因为我在字符串中使用了换行符？
*   我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:38:06.377

> 为什么会这样？因为我在字符串中使用了换行符？

这是因为您已将标签添加到单元格的 contentView 中（这很好）。当删除按钮出现时，contentView 将自动调整大小，UITableViewCell 的 textLabel 也会调整大小，因为它的 autoresizingMask 设置为`UIViewAutoresizingFlexibleWidth`。不幸的是，我们无法覆盖默认 textLabel 的 autoresizingMask。

> 我怎样才能防止这种情况发生？

您必须自己构建一个自定义单元。使用自定义 UILabel 作为属性的子类 UITableViewCell 并将其 autoresizingMask 设置为`UIViewAutoresizingNone`.

```
//create and set your frame to whatever you want.
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(20, 20, 110, 20)];

//set autoresizing
[label setAutoresizingMask:UIViewAutoresizingNone];

//add to view
[[self contentView] addSubview:label];

//set property to acces later
[self myLabel:label];

//release (if you aren't using ARC)
[myLabel release]; 
```

添加一些示例文本以稍后对其进行测试

```
[[cell myLabel] setText:@"MAX: 72.92 MPH Will fit!"]; 
```

如果您使用 interfacebuilder 创建视图/单元格，请确保自动调整大小的蒙版箭头是*灰色的*。

![interfacebuilder autoresizingMask](../Images/3a4d6421a23391d06387cedbbe0bf5a3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:49:13.097

您应该能够访问 UITableViewCell 的`textLabel.Frame`属性。子类 UITableViewCell 并将其设置为`[UITableViewCell didTransitionToState:(UITableViewCellStateMask)state]`

# asp.net - DPAPI 使用谁的密码进行加密？

> ID：11975173
> 
> 赞同：0
> 
> 时间：2012-08-15T18:42:43.177
> 
> 标签：asp.net, dpapi

我正在使用 DPAPI 来加密我的 asp.net 配置文件。从我对 DPAPI 的简要阅读中，我知道它使用 Windows 密码作为密钥来进行加密。问题，谁的Windows密码？

如果我有一个 asp.net Web 应用程序，并且我在 application_start 事件中挂钩了配置文件加密，它会使用我的应用程序池身份（网络服务）密码吗？

如果我有一个桌面控制台应用程序，并且我有一个 Windows 调度程序来定期运行这个应用程序，DPAPI 将使用谁的密码来加密/解密配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:29:31.123

DPAPI 在加密或解密时接受三个参数...

1.  数据（字节数组）
2.  可选熵（字节数组）即盐
3.  “范围”（`System.Security.Cryptography.DataProtectionScope.CurrentUser`或 `System.Security.Cryptography.DataProtectionScope.LocalMachine`）

由于“熵”被特别命名为“可选”，如果未提供，则仅使用用户凭据或机器凭据进行加密，这意味着它无法在不同用户或不同机器上运行加密，无论您使用过哪个“范围”。

我将可选熵称为“盐”，因为它是密码学中常用的术语，用于表示“辅助”密码短语，它与用户或机器凭据混合，然后需要密码短语和特定的用户或机器凭据

简短回答：使用的“密码”来自用户凭据或机器凭据

# search - 如何在 Vim 中搜索打开的缓冲区？

> ID：11975174
> 
> 赞同：53
> 
> 时间：2012-08-15T18:42:43.250
> 
> 标签：search, vim

我想在当前在 vim 中打开的所有文件中搜索文本，并将所有结果显示在一个地方。有两个问题，我猜：

*   我无法将打开文件列表传递给`:grep`/ `:vim`，尤其是不在磁盘上的文件的名称；
*   的结果`:grep -C 1 text`在 quickfix 窗口中看起来不太好。

这是 Sublime Text 2 中多文件搜索的一个很好的例子：![在此处输入图像描述](../Images/07ca71708068592ce4341540af59b7da.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-15T19:47:54.283

或者

```
:bufdo vimgrepadd threading % | copen 
```

quickfix 窗口可能看起来不适合您，但它比 ST2 的“结果面板”功能强大得多，因为您可以在跳转到位置时保持它打开和可见，如果它不存在则与之交互。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-15T18:47:10.133

[ack](http://betterthangrep.com/)和[Ack.vim 很好地](https://github.com/mileszs/ack.vim/)处理了这个问题。您也可以使用`:help :vimgrep`. 例如：

```
:bufdo AckAdd -n threading 
```

将创建一个不错的快速修复窗口，让您跳到光标位置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T07:42:48.517

就像 Waz 的回答一样，我为此编写了自定义命令，并发布在我的[GrepCommands 插件](http://www.vim.org/scripts/script.php?script_id=4173)中。它允许搜索缓冲区 ( `:BufGrep`)、可见窗口 ( `:WinGrep`)、选项卡和参数。

（但像所有其他答案一样，它还没有处理未命名的缓冲区。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T22:49:34.757

我很久以前就做了这个功能，我猜它可能不是最干净的解决方案，但它对我很有用：

```
" Looks for a pattern in the open buffers.
" If list == 'c' then put results in the quickfix list.
" If list == 'l' then put results in the location list.
function! GrepBuffers(pattern, list)
    let str = ''

    if (a:list == 'l')
        let str = 'l'
    endif

    let str = str . 'vimgrep /' . a:pattern . '/'

    for i in range(1, bufnr('$'))
        let str = str . ' ' . fnameescape(bufname(i))
    endfor

    execute str
    execute a:list . 'w'
endfunction

" :GrepBuffers('pattern') puts results into the quickfix list
command! -nargs=1 GrepBuffers call GrepBuffers(<args>, 'c')

" :GrepBuffersL('pattern') puts results into the location list
command! -nargs=1 GrepBuffersL call GrepBuffers(<args>, 'l') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-09-20T02:57:17.807

我真的很喜欢 romainl 的回答，但是有一些粘性边缘使它在实践中使用起来很尴尬。

您的 .vimrc 文件中的以下内容介绍了一个用户命令`Gall`(Grep all)，它解决了我发现令人讨厌的问题。

```
funct! GallFunction(re)
  cexpr []
  execute 'silent! noautocmd bufdo vimgrepadd /' . a:re . '/j %'
  cw  
endfunct

command! -nargs=1 Gall call GallFunction(<q-args>) 
```

这将允许像这样区分大小写的搜索：

```
:Gall Error\C 
```

并且不区分大小写：

```
:Gall error 
```

并带有空格：

```
:Gall fn run 
```

### 优点

*   它只会打开 Quickfix 窗口，没有别的。
*   它将首先清除 Quickfix 窗口，然后再`vimgrepadd`从每个缓冲区获取结果。
*   Quickfix 窗口将包含整个打开缓冲区中所有匹配项的位置，而不仅仅是最后一次访问的位置。
*   重复使用 :Gall，在通话之间无需任何特殊的内务处理。
*   不等待错误并立即显示结果。
*   不允许任何 autocmd 运行，从而加快整体操作。

### 矛盾的特征

*   不会抢先跳转到列表中的任何位置。`:cn`获得第二个结果或`CTRL-w b <enter>`直接获得第一个结果。

### 缺点

*   如果只有一个结果，您必须使用 手动导航到它`CTRL-w b <enter>`。

要快速导航到任何缓冲区中的结果：

```
:[count]cn 
```

或者

```
:[count]cp 
```

例如`:6cn`，跳过列表中的 6 个结果，并在“主”窗口中导航到正确的缓冲区和行。

显然，窗口导航是必不可少的：

```
Ctrl-w w "next window (you'll need this at a bare minimum) 
```

```
Ctrl-w t Ctrl-w o "go to the top window then close everything else 
```

```
Ctrl-w c "close the current window, i.e. usually the Quickfix window 
```

```
:ccl "close Quickfix window 
```

如果您关闭 Quickfix 窗口，然后再次需要结果，只需使用：

```
:cw 
```

或者

```
:copen 
```

把它拿回来。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-09T00:21:43.480

可以在下面找到 Waz 答案的改进（类固醇）版本，具有更好的缓冲区搜索和特殊情况处理（版主不再让我更新 Waz 的答案：D）。可以在此处找到更充实的版本，其中包含用于导航 QuickFix 列表和 F3 以关闭 QuickFix 窗口的箭头键绑定：[https](https://pastebin.com/5AfbY8sm) ://pastebin.com/5AfbY8sm （当我想弄清楚如何制作插件时）我会更新这个答案。我现在想加快分享它）

```
" Looks for a pattern in the buffers.
" Usage :GrepBuffers [pattern] [matchCase] [matchWholeWord] [prefix]
" If pattern is not specified then usage instructions will get printed.
" If matchCase = '1' then exclude matches that do not have the same case. If matchCase = '0' then ignore case.
" If prefix == 'c' then put results in the QuickFix list. If prefix == 'l' then put results in the location list for the current window.
function! s:GrepBuffers(...)
    if a:0 > 4
        throw "Too many arguments"
    endif

    if a:0 >= 1
        let l:pattern = a:1
    else
        echo 'Usage :GrepBuffers [pattern] [matchCase] [matchWholeWord] [prefix]'
        return
    endif

    let l:matchCase = 0
    if a:0 >= 2
        if a:2 !~ '^\d\+$' || a:2 > 1 || a:2 < 0
            throw "ArgumentException: matchCase value '" . a:2 . "' is not in the bounds [0,1]."
        endif
        let l:matchCase = a:2
    endif

    let l:matchWholeWord = 0
    if a:0 >= 3
        if a:3 !~ '^\d\+$' || a:3 > 1 || a:3 < 0
            throw "ArgumentException: matchWholeWord value '" . a:3 . "' is not in the bounds [0,1]."
        endif
        let l:matchWholeWord = a:3
    endif

    let l:prefix = 'c'
    if a:0 >= 4
        if a:4 != 'c' && a:4 != 'l'
            throw "ArgumentException: prefix value '" . a:4 . "' is not 'c' or 'l'."
        endif
        let l:prefix = a:4
    endif

    let ignorecase = &ignorecase
    let &ignorecase = l:matchCase == 0
    try
        if l:prefix == 'c'
            let l:vimgrep = 'vimgrep'
        elseif l:prefix == 'l'
            let l:vimgrep = 'lvimgrep'
        endif

        if l:matchWholeWord
            let l:pattern = '\<' . l:pattern . '\>'
        endif

        let str = 'silent ' . l:vimgrep . ' /' . l:pattern . '/'

        for buf in getbufinfo()
            if buflisted(buf.bufnr) " Skips unlisted buffers because they are not used for normal editing
                if !bufexists(buf.bufnr)
                    throw 'Buffer does not exist: "' . buf.bufnr . '"'
                elseif empty(bufname(buf.bufnr)) && getbufvar(buf.bufnr, '&buftype') != 'quickfix'
                    if len(getbufline(buf.bufnr, '2')) != 0 || strlen(getbufline(buf.bufnr, '1')[0]) != 0
                        echohl warningmsg | echomsg 'Skipping unnamed buffer: [' . buf.bufnr . ']' | echohl normal
                    endif
                else
                    let str = str . ' ' . fnameescape(bufname(buf.bufnr))
                endif
            endif
        endfor

        try
            execute str
        catch /^Vim\%((\a\+)\)\=:E\%(683\|480\):/ "E683: File name missing or invalid pattern --- E480: No match:
            " How do you want to handle this exception?
            echoerr v:exception
            return
        endtry

        execute l:prefix . 'window'
    "catch /.*/
    finally
        let &ignorecase = ignorecase
    endtry
endfunction 
```

# javascript - 从javascript中动态创建的表单中检索输入

> ID：11975175
> 
> 赞同：-1
> 
> 时间：2012-08-15T18:42:45.777
> 
> 标签：javascript, html, forms, dynamic

我是 javascript 和 html 的新手，我正在编写一个显示下拉列表的程序，然后根据选择的选项，我会显示两个单选按钮和一个文本字段。我无法访问这些输入的值（单选按钮和文本框）。

```
<html>
<script type="text/javascript">

    window.onload = function()
    {
        var select = document.getElementById("select");
        var texts = document.getElementById("texts");

        select.onchange = function()
        {
            var val = select.options[select.selectedIndex].value;

            texts.innerHTML = "";
            if (val == "employees")
            {
                texts.innerHTML += '<div><input type="radio" name="condition_employees"  value="select_money" /> ></div>';
                texts.innerHTML += '<div><input type="radio" name="condition_employees"  value="select_money1" /> <</div>';
                texts.innerHTML += '<div><input type="text" name="input_employees"  value="select_employees" /></div>';
                //var realValue = document.getElementByName('input_employees')[0].value;
                //texts.innerHTML += '<div>realValue</div>';

            }

            if (val == "total_money")
            {
                texts.innerHTML += '<div><input type="radio" name="condition_money"  value="select_money" /> ></div>';
                texts.innerHTML += '<div><input type="radio" name="condition_money"  value="select_money1" /> <</div>';

                texts.innerHTML += '<div><input type="text" name="input_money"' + '" value="select_money" /></div>';
            }

            if (val == "hits")
            {
                texts.innerHTML += '<div><input type="radio" name="condition_hits"  value="select_money" /> ></div>';
                texts.innerHTML += '<div><input type="radio" name="condition_hits"  value="select_money1" /> <</div>';

                texts.innerHTML += '<div><input type="text" name="input_hits"' + '" value="select_hits" /></div>';
            }

            if (val == "time_founded")
            {
                texts.innerHTML += '<div><input type="radio" name="condition_time"  value="select_money" /> before date </div>';
                texts.innerHTML += '<div><input type="radio" name="condition_time"  value="select_money1" /> after date</div>';

                texts.innerHTML += '<div><input type="text" name="input_time"' + '" value="select_date" /></div>';
            }

        }
    }
    var print = function()
    {
        var category = document.droplist.select.value;
        document.getElementById("category").innerHTML = category

    }

</script>

<body>      
    <form name="droplist" action="html_form_action.asp" method = "get">
    <select id="select" size="1">
        <option value=" " selected="selected"> </option>
        <option value="employees">Number of Employees</option>
        <option value="hits">Hits on TechCrunch</option>
        <option value="time_founded">Time Founded</option>
        <option value="total_money">Total Money</option>
        </select>

        <hr/>

        <div id="texts"></div>

        <input type="button" value="Submit" onClick="print()"/>
    </form> 
        <div id="category"></div>

</body> 
```

我试图通过使用“//var realValue = document.getElementByName('input_employees')[0].value;”来做到这一点 但这显然行不通。我还想知道如何将此信息作为我的 python 应用程序中函数的参数传递。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:55:13.467

我可以建议以下内容：

1.  `<div>`不要在你的 javascript 中重写s。您可以写入`<div>`'sinnerHTML。
2.  为什么不根据需要禁用/启用，而不是不断地写入这些值？

不幸的是，我无法对这个问题发表评论，所以我不得不在这里发帖。对于那个很抱歉。

# ios - iOS CLLocationManager 开启定位服务

> ID：11975178
> 
> 赞同：0
> 
> 时间：2012-08-15T18:43:02.177
> 
> 标签：ios, cllocationmanager

在我的应用程序中，如果位置服务关闭，它会提示用户：打开位置服务以允许“MyAPP”确定您的位置。

两个选项按钮是设置和取消。

当用户按下取消时，我该如何处理？

是否有任何方法来处理**取消**按钮按下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:22:01.947

****// 通过 UIAlertview 中的按钮名称，您可以访问您按下的按钮*****

 **-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex

```
{ 
```

NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

if([title isEqualToString:@"cancel"])

```
 {

   } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:58:31.807

也许这可能适用于您想要的。

首先，在你的头文件中符合 UIAlertViewDelegate 协议。

然后有一个可以实现的委托方法。

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
   // if the alert view that appeared has titled "Location Denied" and user pressed on cancel button (cancel button is button at index 0)
   if(alertView.title isEqualToString:@"Location Denied"] && buttonIndex == 0)
   {
       // do something
   }
} 
```**

# php - 根据 MySQL 标准创建动态 PHP 页面需要哪些步骤？

> ID：11975181
> 
> 赞同：0
> 
> 时间：2012-08-15T18:43:12.300
> 
> 标签：php, mysql, dynamic

我有一个大型的民间音乐库，由 MYSQL 数据库中的“收藏”（ID 和名称）组织。

我在根目录中有一个 html5 播放器，它被设置为将“track”表中的**所有**曲目添加到播放列表中。“track”表中的每个轨道都包含“collection”表中的集合 ID。

我想要什么：用户可以去：

```
www.site-title.com/player/pID=1 //(or something like that) 
```

并且播放列表只会评估 collection_id=1 的曲目

你能解释一下这在逻辑上是如何发展的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T18:44:30.817

1.  运行数据库查询
2.  获取结果
3.  使用结果构建页面
4.  向用户发送页面

# objective-c - 在另一个选项卡上更改视觉效果

> ID：11975182
> 
> 赞同：0
> 
> 时间：2012-08-15T18:43:15.797
> 
> 标签：objective-c, ios, cocoa-touch, uiviewcontroller, uitabbarcontroller

我的 Xcode 应用程序中有一个标签栏视图，它有两个视图。视图 1 和视图 2。当我按下视图 1 上的按钮时，我希望视图 2 上的标签打个招呼，但我在执行此操作时遇到了麻烦。有没有人有什么建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:09:01.990

在 button 方法中，您可以使用视图控制器的 tabBarController 属性获取对标签栏控制器的引用。从该引用中，您可以从选项卡栏控制器的 viewControllers 数组中获取 view2 控制器引用。获得该引用后，您需要更改该视图控制器的 tabBarItem.title 属性，最后，您需要更新选项卡栏控制器的 viewControllers 数组。

```
 -(IBAction)ChangeTabTitle:(id)sender {
    UIViewController *cont2 = [self.tabBarController.viewControllers objectAtIndex:1];
    cont2.tabBarItem.title =@"Hi";
    self.tabBarController.viewControllers = self.tabBarController.viewControllers;
} 
```

# winforms - ClickOnce 和 app.config 未部署

> ID：11975183
> 
> 赞同：0
> 
> 时间：2012-08-15T18:43:16.763
> 
> 标签：winforms, visual-studio, deployment, clickonce

我有一个尝试使用 ClickOnce 方法部署的新 WinForms 应用程序。但是，应用程序所需的 app.config 文件不包含在安装中。

该应用程序已从服务器正确安装，并启动了 exe，但只要我尝试通过点击我的 WCF 服务器登录，我就会得到。

“找不到文件 'C:\Documents and Settings\Adminstrator\Local Settings\Apps\2.0\7KAA3h20\app.config”

我可以手动将文件从我的开发机器复制到这个文件夹，并且应用程序工作正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:08:38.053

应用程序设置作为 yourappname.exe.config 包含在 ClickOnce 应用程序中。您是否通过与全局应用设置不同的机制访问 app.config？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:44:51.440

默认包含配置文件。您是否出于某种原因将其删除？

如果您使用的是 Visual Studio，则可以选择要在属性页（应用程序文件）上部署的文件。如果文件不在列表中，您可以将其添加到项目并将构建操作设置为“内容”，它将显示在此列表中。

# python - 使用 libmproxy 无法通过 python 中的循环

> ID：11975185
> 
> 赞同：0
> 
> 时间：2012-08-15T18:43:21.800
> 
> 标签：python, webdriver

我正在使用[libmproxy](http://mitmproxy.org/doc/library.html)来捕获 http 流量。我想在代理运行时使用网络驱动程序加载网页。代理代码运行良好，但我无法启动该页面。我假设脚本在 m.run() 处陷入循环。如何在代理运行时移至 Web 驱动程序代码？

```
import unittest
import sys
from libmproxy import proxy, dump, cmdline
from libmproxy.version import VERSION
from optparse import OptionParser
from selenium import webdriver

class Test(unittest.TestCase):

    def setUp(self):
        parser = OptionParser(
                    usage = "%prog [options] [filter]",
                    version="%%prog %s"%VERSION,
                )
        cmdline.common_options(parser)
        parser.add_option(
            "--keepserving",
            action="store_true", dest="keepserving", default=False,
            help="Continue serving after client playback or file read. We exit by default."
        )

        options, args = parser.parse_args()

        if options.quiet:
            options.verbose = 0

        proxyconfig = proxy.process_proxy_options(parser, options)
        if options.no_server:
            server = proxy.DummyServer(proxyconfig)
        else:
            try:
                server = proxy.ProxyServer(proxyconfig, options.port, options.addr)
            except proxy.ProxyServerError, v:
                print >> sys.stderr, "mitmdump:", v.args[0]
                sys.exit(1)

        try:
            dumpopts = dump.Options(**cmdline.get_common_options(options))
        except cmdline.OptionException, v:
            parser.error(v.message)
        dumpopts.keepserving = options.keepserving

        if args:
            filt = " ".join(args)
        else:
            filt = None

        try:
            PROXY_HOST = "localhost"
            PROXY_PORT = 8080

            #driver.get("http://msn.com")
            #f = open('/Users/cnave/Documents/capture/dump.txt', 'w')
            #sys.stdout('/Users/cnave/Documents/capture/dump.txt', 'w')
            #open('/Users/cnave/Documents/capture/dump.txt', 'w')
            m = dump.DumpMaster(server, dumpopts, filt) 
            m.run()
            #sys.stdout('/Users/cnave/Documents/capture/dump')
            fp = webdriver.FirefoxProfile()
            # Direct = 0, Manual = 1, PAC = 2, AUTODETECT = 4, SYSTEM = 5
            fp.set_preference("network.proxy.type", 1)
            fp.set_preference("network.proxy.http", PROXY_HOST)
            fp.set_preference("network.proxy.http_port", PROXY_PORT)
            fp.set_preference("network.proxy.no_proxies_on", "") # set this value as desired
            driver = webdriver.Firefox(firefox_profile=fp)
            driver.get('http://google.com')

        except dump.DumpError, e:
            print >> sys.stderr, "mitmdump:", e
            sys.exit(1)
        except KeyboardInterrupt:
            pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:04:07.773

```
self.dm = dump.DumpMaster(server, dumpopts, filt) 

// run the MITM proxy in a background thread

thread.start_new_thread(self.dm.run,())

// and you maybe need to shutdown the proxy in tearDown() 

self.dm.shutdown() 
```

# iphone - 隐藏或删除 UIImageView 和排列（IOS 5）

> ID：11975192
> 
> 赞同：0
> 
> 时间：2012-08-15T18:43:40.083
> 
> 标签：iphone, objective-c, ios, ios5.1

我有一个在 Interface Builder 中设计的 UIViewController。在视图顶部附近，它有一个 UIImageView，然后是下面的一些其他视图（文本等）。这些设置为锚定到视图的顶部。

在视图加载时的代码中，我在某些情况下删除了 UIImageView，但它似乎仍然占用空间，或者下面的视图不会根据它们的 Anchor 弹到顶部。

如果上面的视图被删除，我怎样才能使下面的视图向上移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:47:42.960

与 Android 视图层次结构不同，iOS 视图层次结构都是在绝对坐标中开发的。当您说子视图锚定到顶部时，这意味着如果父视图的大小发生变化，您的视图将保持与屏幕顶部相同的相对位置。

为了在图像被隐藏或删除时使图像视图下方的视图向上移动，您必须自己手动排列它们以解决偏移量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:50:13.023

您可以更改视图中其他元素的框架。

在 viewDidLoad 方法中，您可以使用类似的东西：

```
-(void)viewDidLoad{
   if(imageVisible){
         otherElements.frame = CGRectMake(....);
   }else{
         otherElements.frame = CGRectMake(....);
   }   
} 
```

我不知道视图的结构是什么，但您可能会考虑将所有其他元素嵌套在一个视图中，这样您就可以在一个命令中更改所有元素的位置。

# objective-c - 在使用 AvFoundation 录制视频时，客观的 c 循环会阻止用户输入？

> ID：11975195
> 
> 赞同：0
> 
> 时间：2012-08-15T18:43:49.167
> 
> 标签：objective-c, ios

您好，每次我尝试用 CFAbsoluteTimeGetCurrent() 记录日期时；我的应用程序忽略了其余的按钮，就好像它接管了所有内存并阻止了所有用户输入。我想知道我做错了什么？我想制作一个函数 showtime() 但我不知道如何在函数之间传递从 toggleRecording 到 showtime 的值，这样如果这甚至可以解决问题，我的方法就可以工作。下面是我的代码：

```
- (IBAction)toggleRecording:(id)sender
{
    // Start recording if there isn't a recording running. Stop recording if there is.
    [[self recordButton] setEnabled:NO];
    if (![[[self captureManager] recorder] isRecording]){
        [[self captureManager] startRecording];

        /* figure out a day to record for every half a second
         while([[[self captureManager]recorder] isRecording]){
         CFTimeInterval startTime = CFAbsoluteTimeGetCurrent();
         NSLog(@" time is %i", startTime);
         }

        */
    }
    else
        [[self captureManager] stopRecording];

}

-(void)showtime:(id)sender{
    while([[[self captureManager]recorder] isRecording]){
        CFTimeInterval startTime = CFAbsoluteTimeGetCurrent();
        NSLog(@" time is %f", startTime);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:55:54.660

应用程序必须运行事件循环才能接收事件。当您自己的代码在做其他事情时（这里它正在做一个“while”循环），事件会排队并且在您的代码返回之前不会传递。

从原理上讲，应用程序正在执行以下操作：

```
while(1) {
    event = _UIReceiveNextQueuedEvent();
    _UIProcessEvent(event); // <- this calls -showTime:
} 
```

如果要在不阻塞循环的情况下记录时间，则必须`NSTimer`每 0.5 秒安排一次，并在记录关闭后立即使其无效。

就像是：

```
- (void)showTime:(id)sender
{
    if ([[[self captureManager]recorder] isRecording]) {
        [NSTimer scheduledTimerWithTimeInterval:0.5f target:self selector:@selector(timerFired:) userInfo:nil repeats:YES];
    }
}

- (void)timerFired:(NSTimer *)timer
{
    if ([[[self captureManager]recorder] isRecording]) {
        CFTimeInterval startTime = CFAbsoluteTimeGetCurrent();
        NSLog(@" time is %f", startTime);
    } else {
        [timer invalidate];
    }
} 
```

# performance - flex3：带有许多 LinkBut ton itemrenderer 的 AdvancedDataGrid 出现性能问题

> ID：11975196
> 
> 赞同：0
> 
> 时间：2012-08-15T18:44:06.820
> 
> 标签：performance, apache-flex, flex3, itemrenderer, advanceddatagrid

由于数据网格中的许多链接按钮，我正面临加载时间问题 - 性能问题。

假设，在我的页面中，有 4 个 pod(panel) 对象，每个对象都包含 ADGrid。截至目前，对于某些场景，我们必须将所有数据网格列 itemrenderer 设置为 LinkBut​​ton，但第一列除外。目前，我有 21 列，记录只有 10 个，因此对于一个 AdvancedDataGrid，创建了 210 个 LinkBut​​ton 对象。

总共，对于一个屏幕，总共 210*4(AdvancedDataGrids) = 840 个 LinkBut​​ton 实例。

由于这个原因，我面临性能问题，屏幕渲染每个对象需要 30 秒。

如果我评论那个 itemrenderer，大约需要 20 秒。

我尝试过的方法：1）我也评论了所有 setStyle 功能，bt 输出在 1 到 1.5 秒内有所不同 2）为了检查性能，我没有创建 LinkBut​​ton，而是使用 Button 作为渲染器，并将标签作为渲染器 - 即使区别是仅在 1 到 2 秒内。

我非常感谢您的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:24:37.780

在我的渲染器中，根据一些条件，我们需要使用**enabled = true | false，**由于这行语句，加载屏幕需要更多时间。现在，我没有启用和禁用，而是控制了 enabled = false （这应该不允许触发点击事件）并处理点击事件中的相应更改。

# c++ - 类范围有问题

> ID：11975197
> 
> 赞同：0
> 
> 时间：2012-08-15T18:44:08.933
> 
> 标签：c++, berkeley-db

我有一个名为 Streamer 的课程。这是 Streamer.h

```
class Streamer {

public:
    Streamer(const MyDb& realtimeDb);
    virtual ~Streamer(void);

private:
    virtual void    callback_1(T_UPDATE pUpdate);
    virtual void    callback_2(Q_UPDATE pUpdate);
}; 
```

这是 Streamer.cpp

```
Streamer::Streamer(const MyDb& realtimeDb) {
}

Streamer::~Streamer(void) {
}

void Streamer::callback_1(T_UPDATE pUpdate) {
    // I need to do something with pUpdate and realtimeDb here, like this:
    // Getting a cursor from db (works fine in main.cpp, but not in callback)
    Dbc *cursorp;
    realtimeDb.getDb().cursor(NULL, &cursorp, 0);
}

void Streamer::callback_2(Q_UPDATE pUpdate) {
    // I need to do something with pUpdate and realtimeDb here, like this:
    // Getting a cursor from db (works fine in main.cpp, but not in callback)
    Dbc *cursorp;
    realtimeDb.getDb().cursor(NULL, &cursorp, 0);
} 
```

Streamer 有两种方法，它们是来自 API 的回调。我无法更改这些参数。但是，我确实需要访问我传递给构造函数的数据库实例 MyDb（我什至这样做对吗？）。这就是我从 main.cpp 传递它的方式：

```
MyDb realtimeDb(databasePath, databaseName);
Streamer streamer(realtimeDb); 
```

当我尝试从其中一个回调访问 realtimeDb 时，我得到：

```
error: 'realtimeDb' was not declared in this scope 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T18:47:44.867

您需要在您的类中创建一个成员变量来存储您在构造函数中传递它的引用。当前，您正在传递对对象的 const 引用，但该类对它不做任何事情。您需要将`MyDb`对象的详细信息存储为成员变量。这可以是引用、常量引用或指向的实例的指针，`MyDb`但您需要一些东西，以便您的类在创建后可以访问它。

就像是

```
class Streamer {

public:
   Streamer(const MyDb& Db);
   virtual ~Streamer(void);

private:
   const MyDb& realtimeDb;
   virtual void    callback_1(T_UPDATE pUpdate);
   virtual void    callback_2(Q_UPDATE pUpdate);
}; 
```

那么构造函数将是

```
Streamer::Streamer(const MyDb& Db) 
     : realtimeDb(Db)                // initialise the reference here
{
} 
```

如果需要，您也可以使用指针而不是引用，尽管您需要相应地修改成员变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:52:53.303

这不是您拥有的真正的“类范围”，而是构造函数范围。

```
Streamer::Streamer(const MyDb& realtimeDb)
{
    //realtimeDb exists only here
} 
```

你可以这样做：

流光.h

```
class Streamer {

public:
    Streamer(const MyDb& realtimeDb);
    virtual ~Streamer(void);

private:
    MyDb* realtimeDb;
    virtual void    callback_1(T_UPDATE pUpdate);
    virtual void    callback_2(Q_UPDATE pUpdate);
}; 
```

流光.cpp

```
Streamer::Streamer(const MyDb& realtimeDb) {
    this->realtimeDb = &realtimeDb;
}

Streamer::~Streamer(void) {
}

void Streamer::callback_1(T_UPDATE pUpdate) {
    // I need to do something with pUpdate and realtimeDb here, like this:
    // Getting a cursor from db (works fine in main.cpp, but not in callback)
    Dbc *cursorp;
    realtimeDb->getDb().cursor(NULL, &cursorp, 0);
}

void Streamer::callback_2(Q_UPDATE pUpdate) {
    // I need to do something with pUpdate and realtimeDb here, like this:
    // Getting a cursor from db (works fine in main.cpp, but not in callback)
    Dbc *cursorp;
    realtimeDb->getDb().cursor(NULL, &cursorp, 0);
} 
```

这样 realtimeDb 指针将存在于类范围内的任何地方，因此每个非静态方法都可以访问它。

但是，因为它是一个指针，所以语法会有所不同。

另外，请注意 - 如果有人使用默认构造函数声明 Streamer，realtimeDb 将为 NULL，并且回调将调用未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T18:56:36.433

您的 realtimeDb 被定义为构造函数的参数，但未在回调中定义。

您可能想要做的是保留对该对象的引用，如下所示：

```
class Streamer {

public:
    Streamer(MyDb& realtimeDb); // I doubt you need the "const"...
    virtual ~Streamer(void);

private:
    virtual void    callback_1(T_UPDATE pUpdate);
    virtual void    callback_2(Q_UPDATE pUpdate);
    MyDb& m_realtimeDb;
}; 
```

你的实现：

```
Streamer::Streamer(const MyDb& realtimeDb) : m_realtimeDb(realtimeDb) {
}

Streamer::~Streamer(void) {
}

void Streamer::callback_1(T_UPDATE pUpdate) {
    // I need to do something with pUpdate and realtimeDb here, like this:
    // Getting a cursor from db (works fine in main.cpp, but not in callback)
    Dbc *cursorp;
    m_realtimeDb.getDb().cursor(NULL, &cursorp, 0);
}

void Streamer::callback_2(Q_UPDATE pUpdate) {
    // I need to do something with pUpdate and realtimeDb here, like this:
    // Getting a cursor from db (works fine in main.cpp, but not in callback)
    Dbc *cursorp;
    m_realtimeDb.getDb().cursor(NULL, &cursorp, 0);
} 
```

# jquery - 关闭窗口时弹出窗口中的 Youtube 视频不会停止播放

> ID：11975198
> 
> 赞同：1
> 
> 时间：2012-08-15T18:44:10.757
> 
> 标签：jquery, api, youtube

所以基本上，我有一个弹出代码，可以弹出一个 div。在里面，有一个 youtube 视频播放器。一切正常，直到我关闭窗口，我仍然可以听到背景音乐，这意味着视频仍在播放。我想阻止它。我做了一些研究并落在了 youtube API 上，但它仍然不起作用。

这是我的 div 代码

```
echo "<div id='popupContact'>";
echo "<a id='popupContactClose'>x</a>";
echo "<div><h1>" .$row['title']. "</h1></div>";
echo "<p id='contactArea'>";
if($row[type] == "image")
echo "<img src='gallery/" .$row['path']. "' alt='" .$row['title']. "'/>";
else
echo "<iframe width='560' height='315' src='http://www.youtube.com/v/" .$row['path']."?        enablejsapi=1&version=3&playerapiid=ytplayer' frameborder='0' allowfullscreen></iframe>";
echo "<br/><br/>" .$row['description']. "</p>";
echo "</div>";
echo "<div id='backgroundPopup'></div>"; 
```

这是弹出窗口的代码：

```
//CONTROLLING EVENTS IN jQuery
$(document).ready(function(){

//LOADING POPUP
//Click the button event!
$("#button").click(function(){
    //centering with css
    centerPopup();
    //load popup
    loadPopup();
});

//CLOSING POPUP
//Click the x event!
$("#popupContactClose").click(function(){
    disablePopup();
});
//Click out event!
$("#backgroundPopup").click(function(){
    disablePopup();
});
//Press Escape event!
$(document).keypress(function(e){
    if(e.keyCode==27 && popupStatus==1){
        disablePopup();
    }
});

});

//disabling popup with jQuery magic!
function disablePopup(){
//disables popup only if it is enabled
if(popupStatus==1){
    $("#backgroundPopup").fadeOut("slow");
$("#popupContact").fadeOut("slow");
popupStatus = 0;
stop();
}
}
function onYouTubePlayerReady(playerId) {
alert("YAY");
ytplayer = document.getElementById("ytplayer");
}

function stop() {
if (ytplayer) {
ytplayer.stopVideo();
}
} 
```

谢谢你，阿拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:43:26.373

我正在查看[Youtube 文档（iframe）](https://developers.google.com/youtube/iframe_api_reference)，我认为您正在混淆不同的 api

它在[JavaScript API](https://developers.google.com/youtube/js_api_reference) 上声明

> 我们建议使用 SWFObject 嵌入任何将使用 JavaScript API 访问的播放器。

但是您使用的是 iframe。所以我认为你需要创建一个名为

`function onYouTubeIframeAPIReady()`

它有几行代码来设置所有内容以及其他功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:48:11.537

可变范围。你只`ytplayer`在你的`onYouTubePlayerReady()`函数内部定义，并且不返回值。当该函数返回时， ytplayer 值被销毁。

您需要定义函数的变量OUTSIDE：

```
var ytplayer;   // now a global variable.
function onYouTubePlayerReadye(playerID) {
   ytplayer = document.getElementById('ytplayer');
} 
```

# php - 使用计数优化分页和过滤查询结果

> ID：11975202
> 
> 赞同：0
> 
> 时间：2012-08-15T18:44:25.917
> 
> 标签：php, postgresql, heroku, pagination, filtering

在处理许多电子商务网站上的分页和过滤产品时，我遇到了性能问题，这是 Zappos 的一个示例

标准类型：
显示 132 个结果中的 1-10 个。[上一个] 1 2 [3] 4 ... 13 [下一个]
[10] 每页结果

对我来说，问题的很大一部分似乎是查询运行了两次，一次是为了计算结果的数量，一次是为了实际填充数组。以下是“过滤器”查询：

```
SELECT product_id, product_title, orderable
FROM table_view
WHERE (family_title = 'Shirts' OR category_title = 'Shirts')
AND ((detail_value = 'Blue' AND detail_title = 'Color')
OR (detail_value = 'XL' AND detail_title = 'Size'))
GROUP BY product_id, product_title, orderable
HAVING COUNT(detail_title)=2
ORDER BY product_id
LIMIT 10 OFFSET 0 
```

查询单独运行大约需要 20 毫秒。它从中选择的表是一个视图，它是大约五个不同表的连接。用户传入的参数是“detail_value”和“detail_title”，它们是过滤条件。“家庭”和“类别”然后限制由“每页结果”设置。因此，如果他们想查看所有结果，则限制设置为 2000。每次他们通过分页转到新页面时，都会再次运行整个查询。下面是 PHP 的一个片段，$products 是一个查询结果的数组。然后 $number_of_results 是具有最大限制的同一事物的计数。

```
$products = filter($value, $category_title, $number_per_page, $subcategory, $start_number);

$number_of_results = count(filter($value, $category_title, 2000, $subcategory, 0));

$pages = ceil($number_of_results / $number_per_page); 
```

在我的本地机器上运行时，加载结果页面大约需要 600-800 毫秒，当部署到 Heroku 时，加载页面需要 13-16 秒。我遗漏了很多 PHP 代码，但我使用 PHP 的 PDO 类将查询结果变成一个对象以在 PHP 中显示。被连接的表是产品表、类别表、明细表以及通过外键链接它们的两个表。

谷歌结果显示这是一个非常常见/复杂的问题，但我还没有遇到任何适合我的真正解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:05:50.483

许多分页查询通常需要运行多次：一次确定将显示多少条记录，然后再次获取记录屏幕。然后后续查询抓取下一个记录屏幕，等等。

慢分页查询的两种解决方案是：

1.  使用游标从打开的查询结果集中提取 n 条记录
2.  加快查询速度

解决方案 1 在内存方面对于服务器资源来说可能是昂贵的，并且如果您有许多并发用户生成这样的查询，则可能无法很好地扩展。使用您正在使用的 PDO 类实现游标也可能很困难。

解决方案 2 可以通过改进视图查询、添加索引等来完成。但这可能还不够。如果表的读取频率远高于写入频率，您可以尝试使用 UPDATE/INSERT/DELETE 触发器技巧。与其对 VIEW 运行查询，不如创建一个与 VIEW 具有相同列结构和数据的表。每当基础表之一发生更改时，请手动修改此新表以遵循更改。这会减慢写入速度，但会大大提高阅读速度。

# python - Python 的 NumPy.around 中更好的舍入：舍入 NumPy 数组

> ID：11975203
> 
> 赞同：12
> 
> 时间：2012-08-15T18:44:25.903
> 
> 标签：python, arrays, numpy, rounding

我正在寻找一种以更直观的方式对 numpy 数组进行舍入的方法。我有几个浮点数，并希望将它们限制在小数点后几位。这将是这样完成的：

```
>>>import numpy as np
>>>np.around([1.21,5.77,3.43], decimals=1)
array([1.2, 5.8, 3.4]) 
```

现在，当尝试对恰好在舍入步骤之间的数字进行舍入时，就会出现问题。我希望 0.05 舍入为 0.1，但 np.around 设置为舍入到“最近的*偶数*”。这会产生以下结果：

```
>>>np.around([0.55, 0.65, 0.05], decimals=1)
array([0.6, 0.6, 0.0]) 
```

然后我的问题是，什么是最有效的四舍五入到最接近的数字，而不仅仅是最接近的偶数。

有关 np.around 的更多信息，请参阅[其文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.around.html)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T01:03:48.917

这样`around`做的方式是正确的，但是如果您想做一些不同的事情，例如，您可以减去比舍入精度小得多的数量，例如，

```
def myround(a, decimals=1):
     return np.around(a-10**(-(decimals+5)), decimals=decimals)

In [22]: myround(np.array([ 1.21,  5.77,  3.43]), 1)
Out[22]: array([ 1.2,  5.8,  3.4])

In [23]: myround(np.array([ 0.55,  0.65,  0.05]), 1)
Out[23]: array([ 0.5,  0.6,  0\. ]) 
```

我在这里选择的原因`5`是，不包括偶数/奇数的区别，你隐含地引入了大约 10**(-(decimal+1))/2 的平均错误，所以你不应该抱怨一个明确的错误该误差的 1/10000。

# android - Trigger.io 1.4 在应用启动时无法可靠地触发 connectionStateChange

> ID：11975207
> 
> 赞同：1
> 
> 时间：2012-08-15T18:44:50.697
> 
> 标签：android, trigger.io

在摩托罗拉 xyboard (Xoom 2) 上使用平台 1.4.9 和 Android 3.2，在初始应用程序启动时从 Internet 断开连接时，connectionStateChange 侦听器不会触发。我已经在飞行模式和 Wifi 关闭的情况下进行了测试。但是，当应用程序启动时存在活动连接时，它会正确触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:40:25.707

你是对的 - 我们应该触发那个事件，但我们没有：瞄准下周部署的修复。

我们的坏！

# javascript - JQuery 对结果的长度进行四舍五入

> ID：11975210
> 
> 赞同：0
> 
> 时间：2012-08-15T18:44:54.250
> 
> 标签：javascript, jquery

我正在使用这段代码：

```
$("#total_percentage").text(
    (parseInt($("#capacity").text(), 10) / parseInt($("#total").text(), 10))
); 
```

我的问题是 #total_percentage 有时会给出很长的结果。

例如：2.33333333333

有没有办法设置它，所以它四舍五入/只显示最多 2 位数字？

例如：2 或 10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:13:15.707

If you want to display two digits *to the right of the decimal*, `Math.toFixed` is the solution:

```
(2.33333333).toFixed(2) === "2.33" 
```

Note that this results in a string, not a number. If you want to display 2 digits *total*, `Math.toPrecision` is what you want:

```
(2.33333333).toPrecision(2) === "2.3" 
```

Again, this results in a string. To get back to a number (if desired), you can use `parseFloat`.

A final note that both these functions will also round your number. For example:

```
(1.23456).toPrecision(4) === "1.235" 
```

If you want to truncate your number without rounding, you can write a function like this:

```
function truncate(num,precision) {
    var muldiv = Math.pow(10,precision-1);
    return Math.floor(num * muldiv) / muldiv;
}

truncate(1.23456,4) === 1.234 
```

Here is a jsFiddle demonstrating each method:

[**---jsFiddle DEMO---**](http://jsfiddle.net/jackwanders/sa5FL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:46:29.757

您可以使用`toFixed()`：

```
$("#total_percentage").text(
    (parseInt($("#capacity").text(), 10) / parseInt($("#total").text(), 10)).toFixed(2)
); 
```

参考：

*   [`toFixed()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T18:46:45.063

要四舍五入，请使用 Javascript 数学库。

```
$("#total_percentage").text(
    (Math.ceil(parseInt($("#capacity").text(), 10) / parseInt($("#total").text(), 10)))
); 
```

# c++ - 快速排序代码说明

> ID：11975214
> 
> 赞同：6
> 
> 时间：2012-08-15T18:45:10.643
> 
> 标签：c++, algorithm, recursion, quicksort

这是我在实现快速排序算法时遇到的代码。你能解释一下递归是如何在这里工作的吗？

```
 void quickSort(int arr[], int left, int right)
 {
  int i = left, j = right;
  int tmp;
  int pivot = arr[(left + right) / 2];

  /* partition */
  while (i <= j) {
        while (arr[i] < pivot)
              i++;
        while (arr[j] > pivot)
              j--;
        if (i <= j) {
              tmp = arr[i];
              arr[i] = arr[j];
              arr[j] = tmp;
              i++;
              j--;
    }
}
/* recursion */
if (left < j)
    quickSort(arr, left, j);
if (i < right)
        quickSort(arr, i, right);
} 
```

请注意，这不是家庭作业。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T19:06:47.250

不确定“解释递归是如何工作的”是什么意思。但是给你：

您发布的函数需要一个整数数组和两个索引。它不会对整个数组进行排序，而只会对两个索引之间的部分进行排序，而忽略它们之外的任何内容。这意味着如果您传递第一个和最后一个索引，则相同的函数可以对整个数组进行排序，或者如果您传递的`left`值不是数组的第一个元素的索引和/或`right`不是最后一个元素的索引。

排序算法是众所周知的快速排序。作为枢轴，它使用中心元素（它也可以使用任何其他元素）。它将数组划分为子数组`less than (or equal to) pivot`和子数组`greater than (or equal to) pivot`，留下一个元素等于两个分区之间的枢轴。

然后它递归地调用自己对两个分区进行排序，但只有在必要时才会这样做（因此递归调用之前的 ifs ）。

实现工作，但在许多方面都不是最佳的，并且可以改进。以下是一些可能的改进：

1.  如果数组足够短，则切换到另一种排序算法
2.  选择枢轴值作为*三个值的中位数*（通常是第一个、最后一个和中间）
3.  最初将一个枢轴值移出数组（将其放在第一个或最后一个位置，并将焦点减少到数组的其余部分）然后更改测试以传递等于枢轴的值以减少涉及它们的*交换*次数. 您将在最后进行最终交换时将枢轴值放回原处。如果您不遵循建议 2 并选择第一个/最后一个元素而不是本实现中的中间元素，这将特别有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T09:23:22.357

回复晚了，但我只是添加了一些打印件，它可能会帮助遇到此问题的人理解代码。

```
#include<iostream>
using namespace std;

void quickSort(int arr[], int left, int right)
 {
  int i = left, j = right;
  int tmp;
  int pivot = arr[abs((left + right) / 2)];
  cout<<"pivot is"<<pivot<<endl;

  /* partition */
  while (i <= j) {
        while (arr[i] < pivot)
              i++;
        while (arr[j] > pivot)
              j--;
        if (i <= j) {
              cout<<"i and j are"<<i<<" "<<j<<"and corresponding array value is"<<arr[i]<<" " <<arr[j]<<endl;
              tmp = arr[i];
              arr[i] = arr[j];
              arr[j] = tmp;
              i++;
              j--;
              cout<<"entering first big while loop"<<endl;
         for(int i=0;i<7;i++)
    cout<<arr[i]<<" "<<endl ;
    }
}
cout<<"recursion"<<endl;

/* recursion */
if (left < j)
    quickSort(arr, left, j);

if (i< right)
        quickSort(arr, i, right);
}
int main(){
    int arr[7]= {2,3,8,7,4,9,1};
        for(int i=0;i<7;i++)
    cout<<arr[i]<<" " ;
    quickSort(arr,0,6);
    cout<<endl;
    for(int i=0;i<7;i++)
    cout<<arr[i]<<" " ;
int wait;
cin>>wait;
return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T18:52:48.120

Here is your answer -- in the common case both the recursive calls will be executed because the conditions above them will be true. However, in the corner case you could have the pivot element be the largest (or the smallest) element. In which case you have to make only one recursive call which will basically attempt the process one more time by choosing a different pivot after removing the pivot element from the array.

# android - 如何解决多个内容提供商？

> ID：11975215
> 
> 赞同：16
> 
> 时间：2012-08-15T18:45:18.183
> 
> 标签：android, uri, android-contentprovider, android-contentresolver

我创建了两个内容提供程序，它们在同一个 SQLite 数据库的两个不同表上工作。它们共享一个实例，`SQLiteOpenHelper`如[Ali Serghini 的帖子中所述](http://devserghini.blogspot.de/2010/11/android-sqliteopenhelper-and-multiple.html)。每个内容提供者注册`AndroidManifest.xml`如下。

```
<provider
    android:name=".contentprovider.PostsContentProvider"
    android:authorities="com.example.myapp.provider"
    android:exported="false"
    android:multiprocess="true" >
</provider>
<provider
    android:name=".contentprovider.CommentsContentProvider"
    android:authorities="com.example.myapp.provider"
    android:exported="false"
    android:multiprocess="true" >
</provider> 
```

每个内容提供者定义所需的内容 URI 并提供一个`UriMatcher`.

```
public class PostsProvider extends BaseContentProvider {

    private static final UriMatcher sUriMatcher = buildUriMatcher();
    private static final int POSTS = 100;
    private static final int POST_ID = 101;

    private static UriMatcher buildUriMatcher() {
        final UriMatcher matcher = new UriMatcher(UriMatcher.NO_MATCH);
        final String authority = CustomContract.CONTENT_AUTHORITY;
        matcher.addURI(authority, DatabaseProperties.TABLE_NAME_POSTS, POSTS);
        matcher.addURI(authority, DatabaseProperties.TABLE_NAME_POSTS + "/#", POST_ID);
        return matcher;
    } 
```

...

```
public class CommentsProvider extends BaseContentProvider {

    protected static final UriMatcher sUriMatcher = buildUriMatcher();
    protected static final int COMMENTS = 200;
    protected static final int COMMENT_ID = 201;

    private static UriMatcher buildUriMatcher() {
        final UriMatcher matcher = new UriMatcher(UriMatcher.NO_MATCH);
        final String authority = CustomContract.CONTENT_AUTHORITY;
        matcher.addURI(authority, DatabaseProperties.TABLE_NAME_COMMENTS, COMMENTS);
        matcher.addURI(authority, DatabaseProperties.TABLE_NAME_COMMENTS + "/#", COMMENT_ID);
        return matcher;
    } 
```

当我调用内容解析器来插入帖子时，这`PostsContentProvider`是有针对性的。但是，当我尝试插入评论时，内容解析器**并未**按预期引用`CommentsContentProvider`，而是调用`PostsContentProvider`. 结果是我在`PostsContentProvider`.

```
UnsupportedOperationException: Unknown URI: content://com.example.myapp.provider/comments 
```

是否可以输出当前向内容提供者注册的所有可用内容 URI？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-15T21:14:38.830

每个内容提供商的`android:authorities`需求必须是唯一的。该文档在[此处](http://developer.android.com/guide/topics/manifest/provider-element.html) 引用自 doc

> content: 方案将数据标识为属于内容提供者，并且权限 (com.example.project.healthcareprovider) 标识特定提供者。因此，权限必须是唯一的。

# c++ - 在 Visual C++ 中从浮点数组创建灰度图像

> ID：11975227
> 
> 赞同：0
> 
> 时间：2012-08-15T18:46:09.913
> 
> 标签：c++, image

我有一个需要显示的灰度像素值数组（浮动为 1 的分数），然后可能会保存。这些值只是来自计算，所以我目前没有安装任何库或任何东西。我一直在尝试找出 CImage 库，但对可视化这些数据需要做的事情不太了解。任何帮助，将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:07:04.367

我已经成功使用的一种可能的方法是使用 D3DX 的纹理函数来创建 Direct3D 纹理并填充它。启动 D3D 有一些开销，但它为您提供了多线程纹理创建和内置的 ish 查看，以及保存到文件而不用大惊小怪。

如果您对使用 D3D(X) 不感兴趣，这里的一些细节将没有用，但生成器应该有助于弄清楚如何为任何其他库输出数据。

例如，假设现有 D3D9 设备`pDevice`和噪声生成器（或其他纹理数据源）`pGen`：

```
IDirect3DTexture9 * pTexture = nullptr;
D3DXCreateTexture(pDevice, 255, 255, 0, 0, D3DFMT_R8G8B8, D3DPOOL_DEFAULT, &pTexture);
D3DXFillTexture(pTexture, &texFill, pGen);
D3DXSaveTexture("texture.png", D3DXIFF_PNG, pTexture, NULL); 
```

生成器函数：

```
VOID WINAPI texFill(
    D3DXVECTOR4* pOut, 
    CONST D3DXVECTOR2* pTexCoord, 
    CONST D3DXVECTOR2* pTexelSize, 
    LPVOID pData,  
) {
    // For a prefilled array:
    float * pArray = (float *)pData;
    float initial = pArray[(pTexCoord->y*255)+pTexCoord->x];

    // For a generator object:
    Generator * pGen = (Generator*)pData; // passed in as the third param to fill
    float initial = pGen->GetPixel(pTexCoord->x, pTexCoord->y);

    pOut->x = pOut->y = pOut->z = (initial * 255);
    pOut->w = 255; // set alpha to opaque
} 
```

*   D3DXCreateTexture：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb172800%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172800%28v=vs.85%29.aspx)
*   D3DXFillTexture： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb172833 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172833(v=vs.85).aspx)
*   D3DXSaveTextureToFile： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb205433 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205433(v=vs.85).aspx)

相应的功能可用于体积/3D 纹理。由于它们已经为 D3D 设置，您可以简单地将纹理渲染到平面四边形以查看，或用作您可能想要的任何图形应用程序的源。

只要您的生成器是线程安全的，您就可以在每个纹理的一个线程中运行创建/填充/保存，并同时生成多个切片或帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:48:32.780

我发现这个问题的最佳解决方案是使用 SFML 库 (www.sfml-dev.org)。使用非常简单，但如果你想和 VS2010 一起使用，必须从源代码编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:53:25.663

您可以在没有任何库的情况下使用[PNM 图像格式。](http://en.wikipedia.org/wiki/Netpbm_format#File_format_description)（格式本身很简单）。但是它非常陈旧，您必须有一个支持它的图像查看器。例如，IvanView 在 Windows 上支持它。

# vba - 如何在 MS Access VBA 中迭代活动目录组（角色）

> ID：11975228
> 
> 赞同：1
> 
> 时间：2012-08-15T18:46:11.160
> 
> 标签：vba, ms-access, active-directory

如果用户在我传入的特定组中，我有一些代码将返回 true，但是如果用户在属于我传入的 goroup 的另一个组中，则该函数将返回 false。我需要能够遍历组以查看用户是否可能是我感兴趣的组中的组的成员。

例如，如果一个用户在 GroupA 中并且 Group_A 的所有成员都在 Group_B 中，我需要知道用户是否在 Group_B 中，他们在 Group_A 中。这是我现在所拥有的： ****EDIT 添加了在 IsUserInRole() 中使用的函数 GetCurrentUser

```
Public Function GetCurrentUser() As String
    GetCurrentUser = Environ("USERNAME")
End Function

Public Function IsUserInRole(role) As Boolean
Dim UserObj As Object
Dim GroupObj As Object

Dim strObjectString As String
strObjectString = "WinNT://my domain/" & GetCurrentUser() & ""
Set UserObj = GetObject(strObjectString)

For Each GroupObj In UserObj.Groups

Debug.Print GroupObj.Name

   If GroupObj.Name = role Then
        IsUserInRole = True
        Exit Function
   End If
Next 
```

结束功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:21:28.970

好的，我通过 MS 得到了解决方案。我在访问表单上有一些代码将组名传递给模块中的函数。该函数遍历用户所属的所有组，并遍历传入的组内的任何组。如果用户是组的成员或者是作为传递的成员的组的成员，则返回 true在组中。

表格代码：

```
strGroup = "_System Admin"
If IsCurrentUserInGroup(strGroup) = True Then
    MsgBox "In System Admin"
End If 
```

在模块顶部声明的公共变量：

```
Public strOut As String
Public objGroupList, objUser 
```

IsCurrentUserInGroup 代码：

```
Function IsCurrentUserInGroup(ByVal strGroup) As Boolean

Dim objSysInfo As Object
Dim strDN As String

'Get currentlly logged in users info
Set objSysInfo = CreateObject("ADSystemInfo")
strDN = objSysInfo.UserName

On Error Resume Next
Set objUser = GetObject("LDAP://" & strDN)
If (Err.Number <> 0) Then
   On Error GoTo 0
   MsgBox "User not found" & vbCrLf & strDN

End If
On Error GoTo 0

' Bind to dictionary object.
Set objGroupList = CreateObject("Scripting.Dictionary")

' Enumerate group memberships.
If EnumGroups(objUser, "", strGroup) = True Then
    IsCurrentUserInGroup = True
Else
    IsCurrentUserInGroup = False
End If

End Function 
```

枚举组代码：

```
Public Function EnumGroups(ByVal objADObject, ByVal strOffset, ByVal strGroup) As Boolean
' Recursive subroutine to enumerate user group memberships.
' Includes nested group memberships.
Dim colstrGroups, objGroup, j
objGroupList.CompareMode = vbTextCompare
colstrGroups = objADObject.memberOf
If (IsEmpty(colstrGroups) = True) Then
    Exit Function
End If
If (TypeName(colstrGroups) = "String") Then
    ' Escape any forward slash characters, "/", with the backslash
    ' escape character. All other characters that should be escaped are.
    colstrGroups = Replace(colstrGroups, "/", "\/")
    Set objGroup = GetObject("LDAP://" & colstrGroups)
    If (objGroupList.Exists(objGroup.sAMAccountName) = False) Then
        objGroupList.Add objGroup.sAMAccountName, True
         strOut = strOut + strOffset & objGroup.distinguishedName + Chr(13) + Chr(10)
        Call EnumGroups(objGroup, strOffset & "--", "")
    Else
        strOut = strOut + strOffset + strOffset & objGroup.distinguishedName & " (Duplicate)" + Chr(13) + Chr(10)
    End If
    Exit Function
End If
For j = 0 To UBound(colstrGroups)
    ' Escape any forward slash characters, "/", with the backslash
    ' escape character. All other characters that should be escaped are.
    colstrGroups(j) = Replace(colstrGroups(j), "/", "\/")
    Set objGroup = GetObject("LDAP://" & colstrGroups(j))
    If (objGroupList.Exists(objGroup.sAMAccountName) = False) Then
        If objGroup.sAMAccountName = strGroup Then
            EnumGroups = True                 
        End If
        objGroupList.Add objGroup.sAMAccountName, True
        strOut = strOut + strOffset & objGroup.distinguishedName + Chr(13) + Chr(10)
        Call EnumGroups(objGroup, strOffset & "--", "")
    Else
        strOut = strOut + strOffset & objGroup.distinguishedName & " (Duplicate)" + Chr(13) + Chr(10)
    End If
Next
End Function 
```

# gtk - 基于内容的 Gtk ComboBox 宽度

> ID：11975230
> 
> 赞同：3
> 
> 时间：2012-08-15T18:46:12.793
> 
> 标签：gtk, gtk3, pygobject

我正在动态地将选项填充到具有条目的 GTK3 组合框。有些选项可能很长，如果我的模型中有宽项目，我希望能够使 ComboBox 更宽。有没有办法做到这一点？

（如果组合框可以自动扩展但可以设置上限，那就太好了。）

# asp.net-mvc-3 - 如何正确禁用 Html Helper Textbox 或 TextBoxFor？

> ID：11975234
> 
> 赞同：-1
> 
> 时间：2012-08-15T18:46:27.990
> 
> 标签：asp.net-mvc-3, entity-framework, razor, linq-to-entities, html-helper

我有一个用于进入的剃须刀显示器。在一种情况下，我希望用户能够填充文本框，在另一种情况下，我希望阻止用户填充它。我正在使用如下代码：

```
@Html.TextBoxFor(model => model.Goop, new { @class = "text-box", maxlength = 2, onfocus = "javascript:this.select();" })
if (Model.Review.ReviewType.Equals("M"))
{ 
    <script type="text/javascript">
        $(function () {
            $("#Goop").prop("disabled", true);
         });
    </script>
} 
```

我尝试了几种方法，jQuery（上图），CSS attribs，javascript，ASP.NET ......但都有相同的问题：提交表单时，如果禁用 Goop 文本框，Goop 的值在模型为空。想法？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:09:59.260

也许没有 jQuery 就没有那么酷了，但是当我在我的应用程序中这样做时，我会做一些类似的事情

```
if (Model.Review.ReviewType.Equals("M"))
{ 
    @Html.DisplayFor(model => model.Goop)
    @Html.HiddenFor(model => model.Goop)
}
else
{
    @Html.TextBoxFor(model => model.Goop)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:52:38.543

If a form element is disabled, it does not post a value. That's how it's supposed to work.

To work around this, you will need to do one of several things. You can enable the fields just before posting by intercepting the submit method. You can use a hidden field to store the data in addition to the disabled control. Or you can just assume the values on the controller side.

by the way, it should be `.prop("disabled", "disabled")`, which renders as disabled="disabled", that's standards compliant.

# javascript - 如何使用 jsdoc 记录函数生成器？

> ID：11975237
> 
> 赞同：6
> 
> 时间：2012-08-15T18:46:32.250
> 
> 标签：javascript, jsdoc

我正在尝试记录函数生成器但没有成功，这是一个示例：

```
function genericObjectGenerator(tagname) {
  var specificObject = function () {};

  specificObject.getClassName = function () {
    return tagname;
  }

  specificObject.prototype.sayHello = function(name) {
    return tagname + " says hello to " + name;
  }

  return specificObject;
}

var MyObject = genericObjectGenerator("object1");

var myObjectInstance = new MyObject();

myObjectInstance.sayHello(); 
```

我应该如何记录 genericObjectGenerator 及其 specificObject 函数，以便让 JSDoc（和 IntelliJ）正确解析 sayHello。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-13T13:28:54.400

这应该可以解决问题

```
/**
 * @param {string} tagname - the name of the tag
 * @returns {specificObject}
 */

function genericObjectGenerator(tagname) {
    var specificObject = function () {};

    specificObject.getClassName = function () {
        return tagname;
    };

    /**
     * @param {string} name - name as string
     * @returns {string}
     */

    specificObject.prototype.sayHello = function(name) {
        return tagname + ' says hello to ' + name;
    };

    return specificObject;
}

var MyObject = genericObjectGenerator('object1');

var myObjectInstance = new MyObject();

myObjectInstance.sayHello(123); // mark as warning
myObjectInstance.sayHello('123'); // not marking 
```

# sql - 用于确定表中有多少行在具有匹配结构的不同表中的通用代码？

> ID：11975238
> 
> 赞同：0
> 
> 时间：2012-08-15T18:46:33.187
> 
> 标签：sql, linq

如何在 C# (LINQ-to-SQL) 或 SQL 中创建一个通用函数，该函数采用两个具有匹配结构的表并计算 TableA 中有多少行在 TableB 中。

```
TableA Structure
Value1, Value2

TableA Data
1,1

TableB Structure
Value1, Value2

TableB Data
1,1,
1,2 
```

要获取 TableA 和 TableB 之间的匹配行数：

```
SELECT COUNT(*) FROM TableA 
INNER JOIN TableB ON
TableA.Value1 = TableB.Value1 AND
TableA.Value2 = TableB.Value2 
```

本例中的结果

```
1 
```

所以上面的查询效果很好，但我不想为我想要执行此操作的每一对表编写一个版本，因为 INNER JOIN 在*每个*字段上。我觉得应该有一种更通用的方法来执行此操作，而不必手动输入所有连接条件。想法？

编辑：实际上，我认为我需要一个 C#/LINQ 答案，因为这将跨服务器完成。同样，这很烦人，因为我必须编写代码来手动比较每个字段。

```
var tableARows = dbA.TableA.ToList();
var tableBRows = dbB.TableB.ToList();
var match = 0;
foreach(tableARow in tableARows){
    if(tableBRows.Where(a=>a.Value1 = tableARow.Value1 && a.Value2 = tableARow.Value2).Any()){
        match++;
    }
}

return match; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:59:37.803

使用 sql server 这将起作用

```
 var sql="select count(0) from(
    select * from product except select * from product1
    ) as aa"; 
```

dc = dtataContext

```
var match= dc.ExecuteStoreQuery<int>(sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:18:07.547

一个相当简单的答案：

```
select ( select count(*) from 
              (select * from TableA UNION ALL select * from TableB) a ) - 
       ( select count(*) from 
              (select * from TableA UNION select * from TableB) d ) duplicates 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:01:43.757

您查询 ANSI INFORMATION_SCHEMA 视图，因此：

```
select *
from INFORMATION_SCHEMA.COLUMNS col
where col.TABLE_SCHEMA = <your-schema-name-here>
  and col.TABLE_NAME   = <your-table-name-here>
order by col.ORDINAL_POSITION 
```

针对所涉及的每个表。结果集将提供您即时构建所需查询所需的一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T18:56:07.417

您可以使用 syscolumns 生成连接。

```
declare @tablenameA varchar(50) = 'tableA'
declare @tablenameB varchar(50) = 'tableB'

declare @sql nvarchar(4000)
select @sql =''
select @sql = @sql + ' and ' + quotename(@tablenameA )+ '.' 
       + c.name +' = ' + quotename(@tablenameB )+ '.' + c.name
from syscolumns c 
    inner join sysobjects o on c.id = o.id
where o.name = @tablenameA

select @sql = 'select count(*) from ' + @tablenameA + ' inner join '+@tablenameB+' on '
     + substring (@sql, 5, len(@sql))

exec sp_executesql @sql 
```

# vb.net - ToolStrip 控件，如何以编程方式访问点击事件

> ID：11975240
> 
> 赞同：1
> 
> 时间：2012-08-15T18:46:37.553
> 
> 标签：vb.net, toolstrip

我有以下代码：

```
Private holdAllDataFromFile As New list(Of String)

holdAllDataFromFile =  ReadWrite.ReadAll(FILE_PATH) 'Uses custom class to read/write.

For Each item In holdAllDataFromFile.AsEnumerable 
    menuConnections.DropDownItems.Add(finalData(1).tostring ) 'save to menu
Next 
```

在运行时，我希望能够单击这些菜单项并让它们响应事件，我不确定如何以编程方式访问它们，因为可能有 1、4、10 个不同的菜单项，它们都有不同的名称.

我正在查看与我的类似的[帖子](https://stackoverflow.com/questions/4070130/net-toolstripmenuitem-how-to-access-click-event-for-items-generated-while-for)，但我不确定这是否是我完成此任务的正确方法。有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:57:45.513

首先存根您的点击事件代码：

```
Private Sub DataFile_Click(ByVal sender As Object, ByVal e As EventArgs)
  MessageBox.Show("Clicked on " & DirectCast(sender, ToolStripMenuItem).Text)
End Sub 
```

“sender”参数将是您添加的 ToolStripMenuItem。

然后可以更改您的循环以添加事件处理程序：

```
For Each item In holdAllDataFromFile
  menuConnections.DropDownItems.Add(item, _
                                    Nothing, _
                                    AddressOk DataFile_Click)
Next 
```

我将“finalData(1).tostring”更改为“item”，因为这是您的循环变量。尚不清楚该 finalData 变量来自何处或与循环有什么关系。我也摆脱了 AsEnumerable，因为 holdAllDataFromFile 已经是一个 List（字符串）。

# php - PHP 是否将 $$ 与 exec() 一起使用，我如何为下一个脚本保留它？

> ID：11975245
> 
> 赞同：4
> 
> 时间：2012-08-15T18:46:53.373
> 
> 标签：php, bash

我使用 PHP`exec()`在 Bash 中启动`$$`其命令行中的进程。但是，在使用 PHP 时，PHP 本身似乎采用了该变量`$$`，而不是让 Bash 在脚本中使用它。

PHP 是否使用此变量？假设是这样，我如何为 Bash 脚本保留它？

示例：在 Bash 中`exec('echo $$')`执行，而不是，因为 PHP 似乎采用了变量 $$。`echo 1538``echo $$`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T18:49:13.173

Php 不会“获取”该`$$`值，因为它位于单引号字符串中。

它是 bash 将其转换为处理 echo 命令的 bash 进程的 PID。

如果您想`$`通过 echo 命令从字面上输出两个，则必须转义它们：

```
exec('echo \\$\\$'); 
```

跟进：

```
marc@panic:~$ bash
marc@panic:~$ echo $$
31285
marc@panic:~$ php -a
Interactive shell

php > echo exec('echo $$');
31339
php > echo exec('echo \\$\\$');
$$ 
```

跟进2：

```
marc@panic:~$ cat pid
#!/bin/bash
echo $$
marc@panic:~$ ./pid    <--new shell started to execute script
31651
marc@panic:~$ . pid    <---script executed within context of current shell
31550
marc@panic:~$ echo $$
31550 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:54:01.493

正如@marc 所说， exec 实际上是在返回进程的 PID。

然而，这仍然是在 PHP 中使用的“狡猾”的语法，因为你必须小心放置它，`''`否则 PHP 会用它做一些特别的事情。基本上，PHP 能够以两种方式使用变量：

```
$a 
```

和：

```
$$a 
```

后者使用 $a 的值实际到达一个新的变量名，所以你必须小心你如何使用该语法（http://www.php.net/manual/en/language.variables.variable.php ）。

# java - 仅 Java 操作系统

> ID：11975246
> 
> 赞同：1
> 
> 时间：2012-08-15T18:47:05.763
> 
> 标签：java, operating-system

是否有任何操作系统在完全加载时只为控制台应用程序执行提供 java 环境？理想情况下，它会在加载时自动启动程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:57:03.410

还有一些俄罗斯程序员正在开发的[Phantom OS 。](http://www.dz.ru/en/solutions/phantom/)系统没有文件的概念。一切都是生活在一个大内存空间中的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:56:36.920

这是一个有名字的东西：[JavaOS](http://en.wikipedia.org/wiki/JavaOS)

从我的角度来看，更好的方法是安装 Linux 分发包或支持 Java 的小型 Linux 分发包，并将您的 Java 代码放入操作系统启动。在操作系统启动时运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T18:57:30.263

即使它确实存在，它本身也不会提供任何安全优势。

Java 应用程序仍然可以行使操作系统提供的几乎所有用户环权限。如果它可以在库加载路径上的某处写入或使用指定的库加载路径启动另一个 java 应用程序，那么它可以：

1.  将本机库写入文件系统。
2.  `native`使用该库支持的方法定义一个类。
3.  调用`System.loadLibrary`以加载该库。
4.  调用这些`native`方法来执行任意用户环代码。

如果您想要一个允许您通过 shell 有效控制可用权限的操作系统，请继续阅读

1.  [像KeyKOS](http://www.cis.upenn.edu/~KeyKOS/)这样的“安全操作系统” ，
2.  使用“虚拟机”的沙盒进程，以及
3.  使用“受限外壳”提供更小的外壳接口。

# javascript - 页面加载时的 jQuery keyUp

> ID：11975248
> 
> 赞同：0
> 
> 时间：2012-08-15T18:47:13.033
> 
> 标签：javascript, jquery

我有一个具有 keyup 事件的输入元素，任何大于将显示 div 的数字。

如果人类在文本字段中键入内容，则此方法有效。但是，如果我通过 JS 设置值，如何在页面加载时实现 keyup？

```
<input id="this_field"> 
```

页面加载时的 JS：

```
$('#this_field').val('4'); //Now I want the keyup to be event to be triggered. 
```

我知道我可以将 keyup 包装在一个函数中并在设置值后立即调用它，但是有没有办法触发 keyup？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T18:47:56.950

```
$('#this_field').val('4').trigger('keyup'); 
```

要不就 ：

```
$('#this_field').val('4').keyup(); 
```

[jQuery keyup() 函数 API](http://api.jquery.com/keyup/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T18:48:45.687

使用[`$(document).Ready()`](http://api.jquery.com/ready/)和[`trigger()`](http://api.jquery.com/trigger/) 的 jquery 。

```
$(document).ready(function($) {
  $('#this_field').val('4').trigger('keyup'); 
}); 
```

# c# - 处理二维数组时 i、j 索引和 x、y 坐标之间的歧义

> ID：11975249
> 
> 赞同：0
> 
> 时间：2012-08-15T18:47:19.457
> 
> 标签：c#, xna, indices, cartesian

**背景**：

我正在与一位朋友讨论在 2D 数组中引用我正在设计的元素的正确方法。`Point`我对使用 XNA和结构体作为数组引用不满意，`Vector2`因为它们的属性被标记为`X`和`Y`.

我为这些创建了我的结构，`ArrayPoint`并`ArrayVector2`调用了我自己的属性`I`和`J`. 我的朋友认为这是在浪费时间，但是，我不喜欢交换`X`and`Y`引用，因为我的数学背景一直教我使用 i 和 j 作为矩阵，例如使用`myArray[i, j]`代替`myArray[y, x]`.

**处理这种情况的最佳方法是什么？**

这仅仅是交换 x 和 y 的情况吗？或者创建你自己的结构来处理你喜欢的？这完全取决于个人喜好，因为这几乎都是任意的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:21:57.673

**听你朋友的！**

这是一个坏主意的原因有很多，这里有一些：

*   你的数学背景可能会说`i`和`j`。但是对于映射到 2D 空间的数组（例如：瓦片图，而不是矩阵），那么**`x`实际上`y`是更可取的，因为它们传达了语义**，使您的代码更容易理解。（即：你有 X 和 Y 轴，而不是 I 和 J）。

*   （通常在语义上更有意义的情况下，无论如何您都不会将索引器存储在结构中 - 它们只是临时的局部变量。`i`）`j`

*   如果没有*真正*的理由，更少的代码总是比更多的代码更可取。编写*和测试*代码会占用宝贵的时间。使用其他人的代码（如内置的 XNA 类型）可以节省您的时间。

*   有一天你可能会写一些实用函数，它需要一个`Point`. 如果您有两个版本，`Point`那么您很可能最终得到该功能的两个版本。更多代码，更糟糕的是：重复代码！

*   “不是在这里发明的”对于程序员来说是一个非常非常*非常*糟糕的习惯。学习使用其他人的代码（只要它有效——在这种情况下，它确实有效）。

*   没有其他人这样做。你的代码会让所有试图使用它的人感到困惑和烦恼。

*   小的性能会不必要地复制周围的东西。（加上其他一些对性能有轻微影响的深奥的东西。）

（另外：用（浮点）索引到数组`Vector2`有点奇怪。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:55:20.640

这不取决于个人喜好，因为您将必须转换为/从您的结构转换以将数据传递给 XNA 库方法。您将产生转换成本，这无疑是非常小的，但如果在循环中重复执行，则可能会增加相当大的成本。

当然，SpriteFont.MeasureString() 返回一个由 X 和 Y 成员而不是 Width 和 Height 组成的数据结构是很愚蠢的，但是处理这种奇怪的东西比尝试对抗它更容易。

我的建议是尝试使用 x 和 y 作为索引并避免额外的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T18:54:31.343

我认为你正在做的很好。我唯一不建议这样做的情况是，如果您增加了显着的复杂性。如您所知，XNA 软件和其他必须处理大量计算和图形的软件如果效率低下，可能会因微小的变化而陷入困境。但是，您所做的只是帮助您，不应该增加所说的复杂性。我会说去吧。

# php - 展开列表项中的每一行 Textarea

> ID：11975253
> 
> 赞同：1
> 
> 时间：2012-08-15T18:47:31.540
> 
> 标签：php, foreach, explode

我正在尝试将每一行新的 textarea 作为带有爆炸和 foreach 的列表项。我已经尝试过 \n、\n\r、\r\n 和 PHP_EOL，但没有任何效果。这是我的功能

```
function dt_explode_list($option,$explode_key,$ul_class) {

    $tacs = explode($explode_key, get_option($option));

    echo '<ul class="'.$ul_class.'">';

    foreach ($tacs as $tac) {

        echo '<li>'.$tac.'</li>';   

    }

    echo '</ul>';

} 
```

用这个打电话

```
<?php dt_explode_list('dt_condition_apply','\n','tick-list'); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T18:49:18.163

新行需要用双引号引起来

```
<?php dt_explode_list('dt_condition_apply',"\n",'tick-list'); ?> 
```

请参阅“双引号” [http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

# python - 重新启动/重新加载服务器后，从 wsgi 启动的进程仍在运行

> ID：11975259
> 
> 赞同：0
> 
> 时间：2012-08-15T18:47:50.407
> 
> 标签：python, apache, python-3.x, mod-wsgi

在带有用于 python 3 的 mod_wsgi 的 Ubuntu 12.04 上。

我有一个 WSGI 应用程序（实际上只是一个脚本），它碰巧为每个用户会话启动了一个带有 Popen 的外部程序（它实际上是一个小型 GTK 程序，我正在试验它的 HTML5 后端）。

客户端有一个 Javascript 循环，它每隔几秒向 WSGI 发送一个“保持活动”信号。如果 WSGI 有一段时间没有收到任何会话信号，那么它将杀死相关进程（并删除会话）。

这很好用，除非我重新启动/重新加载 Apache 或编辑 WSGI 脚本（AFAIK 会自动重新加载应用程序）。如果我这样做，子进程不会被杀死。它们仍在运行（它们不是僵尸），我所能做的就是手动杀死它们（WSGI 丢失了以前的会话，因此它不会杀死任何“旧”进程）。

所以我想要以下之一：

*   一种注意到服务器正在从 WSGI 端停止/重新启动/重新加载的方法，以便它可以在知道它们的同时清理它的子进程
*   生成的进程应该与 mod_wsgi 一起死亡（目前似乎子进程在 mod_wsgi 被杀死/重新加载时重新附加到 Init）

这是我使用的虚拟主机：

```
<VirtualHost *:80>

WSGIDaemonProcess deckard_qh user=deckard group=deckard threads=5
WSGIScriptAlias / /home/deckard/wsgi/deckard_qh.wsgi
Alias /ressources /home/deckard/ressources

<Directory /home/deckard/wsgi>
    WSGIProcessGroup deckard_qh
    WSGIApplicationGroup %{GLOBAL}
    Order deny,allow
    Allow from all
</Directory>

<Directory /home/deckard/ressources>
    Order deny,allow
    Allow from all
</Directory> 
```

我尝试添加`WSGIProcessGroup deckard`and `WSGIApplicationGroup %{GLOBAL}`（根据[这个答案](https://stackoverflow.com/a/10968481/1003970)），但它没有改变任何东西。我还在`os.setsid()`我的 WSGI 脚本的开头添加了，但没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:52:55.680

这只是一个草图，但一个简单的解决方案（儿童管理自己，我最喜欢的儿童解决方案！）将为 Popen 进程添加终止超时，因此如果他们在 5 分钟内没有收到“保持活动”（或无论您认为是正确的）他们都会保存状态（如果合适的话）并终止？

我猜想 gtk_main_quit() 将是您用来终止事件循环的方法，但如果我不在基地，请替换任何会终止您的子进程的东西 =) 另外，我猜 gtk 偶数循环可能有它自己的计时器功能那将是与线程不同的实现，但我想测试我发布的内容。

```
import datetime
from threading import Timer

# dummy timestamp for testing, gong should be the 
# timestamp of the last keepAlive signal
gong = datetime.datetime(2012, 8, 16, 16, 3, 18, 341121)  

#seconds before kill check is performed
idle = 5

def bringOutYourDead():
    """If the last keep alive time stamp is more than 5 minutes ago, I am Audi 500."""
    stoneDeadIn =  5
    if datetime.datetime.now() - datetime.timedelta(minutes=stoneDeadIn) >= gong:
        # I used print for whatever command for testing
        print('save_state_or_whatever()')
        print('gtk_main_quit()')
    else:
        print("I'm not dead yet!'")
    # recurse this as you see fit

dung = Timer(idle, bringOutYourDead)
dung.start() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:54:50.260

你试过`sudo service apache2 graceful`吗？

> USR1 或优雅信号使父进程建议子进程在当前请求后退出（或者如果它们没有提供任何服务，则立即退出）。父级重新读取其配置文件并重新打开其日志文件。随着每个孩子的死亡，父母用新一代配置中的孩子替换它，立即开始服务新请求。

[http://httpd.apache.org/docs/2.4/stopping.html#graceful](http://httpd.apache.org/docs/2.4/stopping.html#graceful)

# java - 如何在 jmockit 中生成 coverage.xml？

> ID：11975261
> 
> 赞同：0
> 
> 时间：2012-08-15T18:47:52.823
> 
> 标签：java, jmockit

我正在使用 Jmockit 进行单元测试，并且我还在我的类路径中包含了 jmockit-coverage.jar。目前它在“coverage-reports”文件夹下生成以下文件：coverage.css,coverage.js,index.html,logo.png,prettify.js

但它没有生成coverage.xml。根据此处的文档-http: [//jmockit.googlecode.com/svn-history/r289/trunk/www/tutorial/CodeCoverage.html](http://jmockit.googlecode.com/svn-history/r289/trunk/www/tutorial/CodeCoverage.html)，我想我需要在我的班级中添加'jmockit-coverage-xmlfull.jar'小路。但我无法在网上找到那个罐子。它在 jmockit 下载链接中不可用。

你能告诉我如何解决这个问题吗？

谢谢， 苏雷什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:52:45.490

此链接似乎是较旧的链接，显示较旧的 svn 修订号`(r289)`。最新的在这里

[http://jmockit.googlecode.com/svn-history/trunk/www/tutorial/CodeCoverage.html#output](http://jmockit.googlecode.com/svn-history/trunk/www/tutorial/CodeCoverage.html#output)。

看起来它现在支持 html，但找不到 xml。基本上，该`jmockit-coverage-output`属性用于决定输出。

如果您确实需要 xml 版本，则可能需要下载包含所有 jar 的旧版本。试试这个链接。

[https://jmockit.googlecode.com/files/jmockit-0.993.zip](https://jmockit.googlecode.com/files/jmockit-0.993.zip)

# php - MySQL 中的并发处理

> ID：11975265
> 
> 赞同：2
> 
> 时间：2012-08-15T18:48:04.003
> 
> 标签：php, mysql

像这样更新字段时，它将锁定该字段：

```
UPDATE table SET field = field + 1 
```

由于这是计数器的一部分，预计会有一点负载，恐怕当多个用户访问我的站点时，并不是所有的计数都会被注册。

有没有更好的方法或解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T18:50:51.167

myisam 引擎在执行事务之前总是锁定表，所以其他并发事务将被迫等待直到这个完成

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T18:56:10.533

您的解决方案：

```
 UPDATE table SET field = field + 1 
```

绝对完美。那是一条 SQL 语句，它完全执行而没有副作用或根本没有副作用。您还可以做的就是检查您的语句实际执行的天气。如果没有，您可以重试执行它。但没有真正的理由。你可以保持原样......在大多数情况下，当正确编写的语句失败时，还有另一个原因（如数据库过载），重试会使事情变得更糟。

如果您对该表只有短暂的写入/读取访问权限，那么一切都很好；如果并发命令需要访问它，它们将等到锁被释放后再执行。

仅当您在同一张表上执行耗时超过 1-2 秒的操作时。然后你可能会失去一些计数。等待获取锁的超时时间通常为 10 或 30 秒。如果进程只是手动锁定表（例如“LOCK 表”）并且不释放它，您也可能会丢失计数。这将是一个错误......其他 SQL 语句将无法获得锁，并最终将在较长的等待期后中止。

# css - 父子的 CSS 错误

> ID：11975269
> 
> 赞同：0
> 
> 时间：2012-08-15T18:48:21.147
> 
> 标签：css, parent-child

我试图为我的结构制作两个部分，一个是顶部部分，另一个是主体部分。

我试图让主体 div 脱离顶部。出于某种原因，当我将紫色添加到主体 div 时，它会在其他所有内容中着色！

我添加`overflow:hidden`到包装器中，它做了一些事情，我在正确的道路上吗？

[你可以在这里](http://www.thomas-walker.com/Test/index.html)看到我的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:51:57.383

Thats because you used floating elements and didn't clear after them. Add

```
.mainbody{clear:both;} 
```

But why do you have `.topsection{float:left;}`? If `mainbody` has `width: 100%`, it does nothing.

And `overflow:hidden` did somethink because if you have a block element with some floating elements before him, and you set `overflow` different than visible to him, you are creating columns. So then `mainbody` wasn't under `topsection`.

**Edit:**

Even if you remove the nonsense `.topsection{float:left;}`, it won't work because `topright` and `topleft` are not cleared floating elements too. So you have to add `.mainbody{clear:both;}` too, or change your `topsection` into:

```
<div class="topsection">
  <div class="topright">...</div>
  <div class="topleft">...</div>
  <div class="clear"></div>
</div> 
```

And then

```
.clear{clear:both;} 
```

# c# - 在 C# 中的 XML 元素上保留冗余命名空间前缀

> ID：11975271
> 
> 赞同：1
> 
> 时间：2012-08-15T18:48:37.633
> 
> 标签：c#, xml, visual-studio

我正在尝试编写一个 XML 文件，该文件将被另一个服务提取和解析。为了实现这一点，XML 必须以一种非常具体的方式进行格式化，即：

```
<?xml version="1.0"?>
<Feedbacks:Feedbacks xmlns:Feedbacks="Feedbacks">
  <Feedbacks:Elements>
    <Feedback:XMLFeedback xmlns:Feedback="Feedback">
      <Feedback:MfgUnitID></Feedback:MfgUnitID>
      <Feedback:MachineId></Feedback:MachineId>
      <Feedback:OperationCode></Feedback:OperationCode>
      <Feedback:ItemSeqNum></Feedback:ItemSeqNum>
      <Feedback:OperDispositionCd></Feedback:OperDispositionCd>
      <Feedback:ItemId></Feedback:ItemId>
      <Feedback:ParentItemId></Feedback:ParentItemId>
      <Feedback:ItemEndSize>1821</Feedback:ItemEndSize>
      <Feedback:ItemDispositionCd></Feedback:ItemDispositionCd>
      <Feedback:OperStartDate></Feedback:OperStartDate>
      <Feedback:OperEndDate></Feedback:OperEndDate>
    </Feedback:XMLFeedback>
  </Feedbacks:Elements>
</Feedbacks:Feedbacks> 
```

当然在最里面的元素之间有数据。这是一个问题，无论我做什么，我都无法让任何 C# 类将分号保留在最里面的节点上。据我所知，这些需要保留，那么 C# 中有没有办法强制它以这种方式格式化节点？我已经尝试了所有可以在 XMLDocument 类中找到的创建方法。我可以很好地格式化外部节点，但内部节点只会不断产生问题。

编辑，抱歉，这是制作内部节点的代码。

```
private void AppendFile(string filename, string[] headers, Dictionary<string, string> values)
    {
        XmlDocument doc = new XmlDocument();
        doc.Load(filename);
        XmlNode node = doc.GetElementsByTagName(headers[headers.Length - 2]).Item(0);
        string[] hPieces = headers[headers.Length - 1].Split(':');
        XmlElement appendee = doc.CreateElement(hPieces[0].Trim(), hPieces[1].Trim(), hPieces[0].Trim());
        node.AppendChild(appendee);

        foreach (KeyValuePair<string, string> pair in values)
        {
            string[] ePieces = pair.Key.Split(':');
            //XmlElement element = doc.CreateElement(ePieces[0].Trim(), string.Empty, ePieces[1].Trim());
            //XmlText text = doc.CreateTextNode(pair.Value);
            XmlNode innerNode = doc.CreateNode(XmlNodeType.Element, ePieces[1].Trim(), ePieces[0].Trim());
            node.InnerText = pair.Value;
           // element.AppendChild(text);
            appendee.AppendChild(innerNode);
        }

        doc.Save(filename);
    } 
```

内部节点的数据作为字典中的键值对出现。键包含预期名称的位置。

Edit2：这是文件输出的样子

```
<?xml version="1.0" encoding="utf-8"?>
<Feedbacks:Feedbacks xmlns:Feedbacks="Feedbacks">
  <Feedbacks:Elements>
    <Feedback:XMLFeedback xmlns:Feedback="Feedback">
      <MfgUnitID></MfgUnitID>
      <MachineId></MachineId>
      <OperationCode</OperationCode>
      <ItemSeqNum></ItemSeqNum>
      <OperDispositionCd></OperDispositionCd>
      <ItemId></ItemId>
      <ParentItemId></ParentItemId>
      <ItemEndSize></ItemEndSize>
      <ItemDispositionCd></ItemDispositionCd>
      <OperStartDate></OperStartDate>
      <OperEndDate></OperEndDate>
    </Feedback:XMLFeedback>
  </Feedbacks:Elements>
</Feedbacks:Feedbacks> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:48:11.803

您可以使用 Xlinq 轻松完成此任务：

```
using System.Xml.Linq;

     XNamespace ns1 = "Feedbacks";
     XNamespace ns2 = "Feedback";

     var doc = new XElement("Feedbacks", 
            new XAttribute(XNamespace.Xmlns+"Feedbacks", ns1));

     doc.Add(new XElement(ns1 + "Elements", 
            new XElement(ns2 + "Feedback", 
               new XAttribute(XNamespace.Xmlns+"Feedback", ns2),
               new XElement(ns2 + "Unit")))); 
```

给

```
<Feedbacks xmlns:Feedbacks="Feedbacks">
  <Feedbacks:Elements>
    <Feedback:Feedback xmlns:Feedback="Feedback">
      <Feedback:Unit />
    </Feedback:Feedback>
  </Feedbacks:Elements>
</Feedbacks> 
```

虽然我相信你自己的输出应该是有效的 XML，依赖于父命名空间。

# iphone - iPhone模拟器可以很好地写入套接字-但不是iPhone

> ID：11975278
> 
> 赞同：0
> 
> 时间：2012-08-15T18:49:17.520
> 
> 标签：iphone, objective-c, cocoa-touch, ios-simulator

尽管之前工作，我的套接字聊天应用程序现在拒绝写入 iPhone 上的套接字！它在模拟器上运行良好，并且再次在我的手机上运行良好。我真的不知道从哪里开始解决这个问题 --- 看起来很奇怪。我的服务器没有检测到任何试图连接的东西。关于如何开始解决此问题的任何想法？谢谢吨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:24:03.133

我确实遇到了一个问题，即在 iPhone 上使用套接字不会打开手机网络，除非有其他东西先打开它。我必须首先对通用网站运行 http 调用，然后套接字才能正常通信。尝试在打开套接字之前向通用网站（如 www.apple.com）发出调用（如 sendSynchronousRequest），并查看它在这种情况下是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:41:09.017

我需要停止浪费你们这些好人的时间。

长话短说，我的朋友更新到 iOS 5.1。现在 3G 网络在 iOS 5.1 上读取 4G。所以我关闭了我的（5.0）wifi，看看我的手机网络是否是“4G”（当然不是）。

但是，是的，关闭 wifi 后，我的应用程序无法再加入我的本地托管服务器......

不过我抓住了查尔斯，它看起来很方便，所以还是谢谢你。此外，欧文关于手机网络的评论最初让我考虑检查我的 wifi，因为我的应用程序甚至不应该使用手机网络。但我会记住你对未来所说的话。

谢谢大家！

# html - 如何使用 Google Web 字体作为 SUBSTITUTE 字体？

> ID：11975282
> 
> 赞同：0
> 
> 时间：2012-08-15T18:49:38.773
> 
> 标签：html, css

我正在尝试使用 Google 网络字体作为替代字体。但它不是替代字体，而是充当主要字体。

在我的 中，我将它链接到字体：

```
<link href='http://fonts.googleapis.com/css?family=Balthazar' rel='stylesheet' type='text/css'> 
```

在我的 CSS 中，我有 Copperplate 字体的变体，我知道它可以在我的 PC 上运行，并且我已经安装了其中的一些。这部分在我的 CSS 开头：

```
.class{
    font-size: 24pt;
    font-family: Copperplate Gothic Bold, Copperplate Gothic Light, Copperplate, Balthazar;
} 
```

但即使 Balthazar 是最后一种字体，它也会作为第一种出现。我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:52:23.550

名称中包含空格的字体必须放在引号中，以便 css 正确读取，这也适用于 google web 字体，只是为了安全起见。

例子：`font:family: "Copperplate Gothic Bold", "Copperplate Gothic Light", Copperplate, "Balthazar";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:07:14.773

font-family 降级似乎在 Google 字体的所有三种导入方案（`@import`、、`<link>`或`JavaScript`）中都可以正常工作。

看这个例子：http: [//jsfiddle.net/awRQm/](http://jsfiddle.net/awRQm/)

* * *

最有可能的原因是它真的***回到***了巴尔萨扎。

对于多字字体名称，最好将它们用单引号括起来，如下所示：

```
.class{ font-size: 24pt; font-family: 'Copperplate Gothic Bold', 'Copperplate Gothic Light', Copperplate, Balthazar; } 
```

根据[CSS 2.1 规范](http://www.w3.org/TR/CSS2/fonts.html#font-family-prop)：

> “如果将标识符序列作为字体系列名称给出，则计算值是通过将序列中的所有标识符用单个空格连接起来转换为字符串的名称”

# html - 如何在菜单中设置列表样式？

> ID：11975284
> 
> 赞同：1
> 
> 时间：2012-08-15T18:49:40.560
> 
> 标签：html, css, list, drop-down-menu, stylesheet

请将鼠标悬停在此处菜单中的***MORE***按钮上：http: [//jsfiddle.net/XHard/1/](http://jsfiddle.net/XHard/1/)您将看到一个包含单词***New clean list***的列表。我想为该列表设置样式，但因为它在菜单内，所以它已经有了样式。

我想为它创建一个新的干净风格，但找不到办法。我试过玩，`#mega moreleftbar a`但原来的菜单列表样式仍然存在。

有没有办法为该菜单中的列表创建新的干净样式？

这是我的 HTML 的一部分：

```
<div id="second-menu" class="clearfix">
    <ul id="secondary-menu" class="nav sf-js-enabled">
        <li class="manimation"><a href="" style="width:400px;border-bottom:9px solid #43cf61">Animation</a></li>
    </ul>

    <ul id="mega">
        <li class="dif mmore" style="background:none;"><a href="#" style="font-style:italic;border-bottom:9px solid #4b5571">More...</a>
            <div>
                <moretopbar>
                    <ul>
                        <li class="mgames"><a href="" style="border-bottom:9px solid #e34328">Games</a></li>
                        <li class="mliterature"><a href="" style="border-bottom:9px solid #2c8f83">Literature</a></li>
                        <li class="marts"><a href="" style="border-bottom:9px solid #cc226a">Arts</a></li>
                        <li class="mcontact" style="background:none;"><a href="" style="border-bottom:9px solid #9395aa">Contact</a></li>
                    </ul>
                </moretopbar>

                <morecontainer>
                    <moreleftbar>

                        <ul>
                            <li><a href="">New clean list 1</a></li>
                            <li><a href="">New clean list 2</a></li>
                            <li><a href="">New clean list 3</a></li>
                            <li><a href="">New clean list 4</a></li>
                        </ul>

                    </moreleftbar>
                </morecontainer>

            </div>
        </li>
    </ul>
</div> <!-- end #second-menu --> 
```

这是我的 CSS 的一部分：

```
ul#top-menu li { padding-right: 2px; background: url(images/menu-bg.png) repeat-y top right; }
    ul#top-menu a { font-size: 11px; color: #ffffff; text-decoration: none; text-transform: uppercase; font-weight: bold; text-shadow: 1px 1px 1px rgba(0,0,0,0.7); padding: 16px 12px 10px; }
    ul#top-menu a:hover { color: #ebbe5e;}
    ul#top-menu > li.current_page_item > a { color: #ebbe5e !important; }

    ul#top-menu li ul, #mobile_menu { width: 170px !important; padding: 0; background: #161616 url(images/header-bg.png); top: 45px !important; -moz-box-shadow:3px 3px 7px 1px rgba(0, 0, 0, 0.1); -webkit-box-shadow: 3px 3px 7px 1px rgba(0, 0, 0, 0.1); box-shadow: 3px 3px 7px 1px rgba(0, 0, 0, 0.1); -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; border-top-left-radius: 0px;-moz-border-radius-topleft: 0px; border-top-right-radius: 0px; -webkit-border-top-left-radius: 0px; -moz-border-radius-topright: 0px; -webkit-border-top-right-radius: 0px; z-index: 9999px; display: none; }
        ul#top-menu ul li, #mobile_menu li a { margin: 0 !important; padding: 10px 7px 10px 25px !important; background: url(images/top-menu-separator.png) repeat-x; }
        ul#top-menu ul li.first-item { background: none; }
            ul#top-menu ul li a, #mobile_menu a { padding: 0 !important; width: 138px; }

            ul#top-menu li:hover ul ul, ul#top-menu li.sfHover ul ul { top: -1px !important; left: 171px !important; -moz-border-radius: 8px; -webkit-border-radius: 8px; border-radius: 8px; }

    ul#top-menu li.menu-gradient { background: url("images/top-shadow.png") repeat-x; position: absolute; top: 0; left: 0; width: 202px; height: 7px !important; }

ul#secondary-menu li { background: url(images/secondary-menu-bg.png) repeat-y top right; }
    ul#secondary-menu a { font-size: 16px; color: #48423f; text-decoration: none; text-transform: uppercase; font-weight: bold; padding: 22px 16px; }
    ul#secondary-menu a:hover { color: #ffffff; text-shadow: 1px 1px 0 #404747; }
    #second-menu ul.nav li:hover a {color: #ffffff; text-shadow: 1px 1px 0 #404747; }

    ul#secondary-menu > li.current_page_item > a { color: #919e9e !important; }    

    ul#secondary-menu li ul, #category_mobile_menu { width: 360px !important; padding: 7px 0 10px; background: #fff url(images/content-bg.png); top: 55px !important; -moz-box-shadow:3px 3px 7px 1px rgba(0, 0, 0, 0.1); -webkit-box-shadow: 3px 3px 7px 1px rgba(0, 0, 0, 0.1); box-shadow: 3px 3px 7px 1px rgba(0, 0, 0, 0.1); -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; border-top-left-radius: 0px;-moz-border-radius-topleft: 0px; border-top-right-radius: 0px; -webkit-border-top-left-radius: 0px; -moz-border-radius-topright: 0px; -webkit-border-top-right-radius: 0px; z-index: 9999px; display: none; }
        ul#secondary-menu ul li, #category_mobile_menu li a { margin: 0 !important; padding: 8px 0 8px 30px !important; width: 150px; float: left; }
            ul#secondary-menu ul li a, #category_mobile_menu a { padding: 0 !important; }

            ul#secondary-menu li:hover ul ul, ul#secondary-menu li.sfHover ul ul { top: -8px !important; left: 180px !important; -moz-border-radius: 8px; -webkit-border-radius: 8px; border-radius: 8px; }
            ul#secondary-menu ul li.even-item { background: none; }

.manimation:hover{
    background:#43cf61 !important;
}
.mmore:hover{
    background:#4b5571 !important;
}
.mliterature:hover{
    background:#2c8f83 !important;
}
.mgames:hover{
    background:#e34328 !important;
}
.marts:hover{
    background:#cc226a !important;
}
.mcontact:hover{
    background:#9395aa !important;
}

/* ---------- Mega Drop Down --------- */
ul#mega li { padding-right: 0px; background: url(images/secondary-menu-bg.png) repeat-y top right; }

#mega {
list-style:none;
font-weight:bold;
height:2em;

}
#mega li {
padding: 23px 0px;
background:#999;
border:0px solid #000;
float:left;
text-align:center;
position:relative;
}
#mega li:hover {
background:#eee;
border-bottom:0; /* border-bottom:0; and padding-bottom:1px; keeps <li> and <div> connected */
z-index:1; /* shadow above adjacent li */

}
#mega a { font-size: 16px; color: #48423f; text-decoration: none; text-transform: uppercase; font-weight: bold; padding: 22px 16px;}

ul#mega a:hover { color: #FFFFFF; text-shadow: 1px 1px 0 #404747; }

/* ----------- Hide/Show Div ---------- */
#mega div {
    -moz-border-bottom-colors: none;
    -moz-border-image: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background: none repeat scroll 0 0 #FFFFFF;
    border-color: -moz-use-text-color #48423F #48423F;
    border-right: 1px solid #48423F;
    border-style: none solid solid;
    border-width: 0 1px 1px;
    font-weight: normal;
    left: -999em;
    margin-top: 1px;
    position: absolute;
    text-align: left;
    width: 496px;
}
/* --------- Within Div Styles --------- */
#mega li:hover div {
    left: -1px;
    top: auto;
}
#mega li.dif:hover div {
    left: -407px;
    top: 72px;
}
#mega li.mmore:hover > a {
    color: #FFFFFF; text-shadow: 1px 1px 0 #404747; /* Ensures hover on MORE remains */
}
#mega div h2 {
    background: none repeat scroll 0 0 #999999;
    clear: both;
    float: left;
    font-size: 1em;
    margin: 10px 0 5px;
    padding: 0 10px;
    position: relative;
    width: 300px;
}
#mega div moretopbar {
    clear: both;
    float: left;
    position: relative;
margin-left:1px;
margin-right:1px;
    width: 495px;
    height: 74px;
    background-image: url(images/morebgwide.png);
    background-size:495px 74px;
    background-repeat:no-repeat;
}
#mega div p {
    float: left;
    padding-left: 10px;
    position: relative;
    width: 106px;
}
#mega div p a {
    clear: left;
    float: left;
    line-height: 1.4;
    text-decoration: underline;
    width: 100%;
}
#mega div a:hover, #mega div a:focus, #mega div a:active {
    text-decoration: none;
}
#mega div morecontainer {
    width: 495px;
}
#mega div moreleftbar {
    width: 70%;
}

#mega moreleftbar a { /* I want to style the list here - clean slate*/
    margin-left: 0;
    padding-left: 0;
    list-style-type: none;
    font-family: Arial, Helvetica, sans-serif;
    color: #cc6600;
} 
```

虽然，我建议忽略小提琴以直观地展示该问题：http: [//jsfiddle.net/XHard/1/](http://jsfiddle.net/XHard/1/)

必须有一种方法可以在该下拉菜单中创建一个新的干净列表。你能弄清楚怎么做吗？如果您会回答，请详细说明我的编码知识有限 - 最好使用更新的小提琴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:00:57.940

好的，所以看看`<ul>`你拥有的标签样式的萤火虫输出。并且 CSS 规则特定`<ul>`于`#mega`.

所以我添加了这个针对你想要设置样式的 UL 的 CSS 并重置了一些规则：

```
ul#mega moreleftbar ul,
ul#mega moreleftbar ul li,
ul#mega moreleftbar ul li a,
ul#mega moreleftbar ul li a:hover
{
    padding:0;
    border:0;
    margin:0;
    color:#000000;
    font-size:inherit;
    font-weight:normal;
    background:none;
} 
```

[JSfiddle 示例](http://jsfiddle.net/aCMwr/)

请注意您为样式设置的原始规则`<li>`

```
ul#mega li 
```

这将被我上面应用的目标规则覆盖。

通过更具体的规则，它们会覆盖不太具体的样式（除非样式有 !important 标记）。

```
.manimation:hover{
    background:#43cf61 !important;
} 
```

例如，上述规则将阻止您对规则涵盖的任何元素应用任何进一步的背景颜色更改。`!important`除非绝对必要，否则使用它并不是一件好事。

# windows - 为什么访问 HKEY_CURRENT_USER 注册表配置单元的 32 位视图会退回到 64 位视图？

> ID：11975286
> 
> 赞同：2
> 
> 时间：2012-08-15T18:49:47.310
> 
> 标签：windows, visual-c++, registry, wow64

我的 32 位应用程序在 64 位 Windows 7 上运行。我正在尝试访问注册表`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Uninstall`。我可以在 regedit 中看到`Uninstall`默认 64 位注册表视图中的键下方有几个子键（Dropbox 在该位置创建一个键，以及 Google Chrome）。`Uninstall`但是，在 32 位注册表视图中确实没有键。实际上，在 regedit 下面只有一个`Active Setup`键`HKEY_CURRENT_USER\Software\Wow6432Node\Microsoft`。下面甚至没有`Windows`子键`Microsoft`。

但是，当我的 32 位应用程序尝试访问 32 位注册表视图时`HKCU\Software\Microsoft\Windows\CurrentVersion\Uninstall`，我会从 64 位视图中获取密钥。**这是为什么？**

即使是标志[KEY_WOW64_32KEY](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384129%28v=vs.85%29.aspx)在这里也无济于事。我们的代码需要知道结果是来自 32 位视图还是 64 位视图。

我们的代码还可以访问密钥的 32 位和 64 位视图，`HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Uninstall`我在那里看不到这个问题。不同之处在于 HKLM 的 32 位视图有`Uninstall`密钥，而 HKCU 的 32 位视图没有。

我知道 WoW64 的注册表重定向，但这似乎不同。我在 MSDN 上找不到任何有用的信息。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-25T14:40:31.950

这是记录在案的，但只是间接的。此[MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384253%28v=vs.85%29.aspx)列出`HKLM\Software`了重定向和`HKCU\Software`共享。

**注意：**在此上下文中， *redirect*意味着有两个注册表视图，一个用于 32 位，一个用于 64 位（换句话说：`Wow6432Node`子项存在并被使用），而*共享*意味着只有一个视图 32-位和 64 位进程。

是的，有趣的是`HKEY_CURRENT_USER\Software\Wow6432Node`存在。正如 OP 所提到的，在其下方只有一个子键`Microsoft\Active Setup\Installed Components`- 这可能是因为 Microsoft 的 Active Setup 代码的作者`Wow6432Node`在其注册表 API 调用中错误地使用了 as 子键路径，而不是`samDesired`通过`RegOpenKeyEx`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:36:07.730

我正在根据我目前收到的评论结束这个问题，对此没有官方确认。所以此时在 64 位机器上基本上没有 KKEY_CURRENT_USER 的 32 位注册表。

# android - 如何在列表中包含其他数据库列？

> ID：11975289
> 
> 赞同：0
> 
> 时间：2012-08-15T18:49:49.320
> 
> 标签：android, database, sqlite, listview, android-listview

我正在使用 Mimir 的 Android 教程 #10，该教程涉及在列表中显示来自预填充数据库的数据。在他们的数据库中，它们有四列，即：(1) 成分描述、(2) 库存、(3) _id 和 (4) 成分名称。但是，在它们的列表中，它们仅显示来自成分名称列的数据。例如，他们的列表看起来像这样......

* * *

冰

* * *

水

* * *

等等。

* * *

但我想做的是连续显示所有四列的数据，就像这样......

* * *

冰
说明：冷冻水
编号：1
有库存：是

* * *

水
描述：H2O
ID：2
库存：是

* * *

等等。

* * *

本教程使用了 bindView 和 newView，根据他们的评论，“这让我们的代码更简洁一些，并且是更好的方法。”

我花了很多时间研究这个问题，但我无法弄清楚如何从数据库中获取这三个额外的列以显示在行中。以下是原始代码以及我所做的一些更改（我的更改在带有 * * * 的注释中注明）。

我知道我仍然缺少一些东西，但这就是我卡住的地方。有人可以建议缺少什么以显示这三个附加列中的数据吗？如果可能的话，请让我*具体*知道缺少什么/如何修复，而不是指点我教程（我已经看过很多，不幸的是，没有任何东西能够回答我的问题）。还请记住，示例代码使用了 bindView 和 newView 所以它需要使用它。非常感谢您的帮助。

```
package com.mimirsoft.tutorial10; 
import java.io.FileOutputStream; 
import java.io.IOException; 
import java.io.InputStream; 
import java.io.OutputStream; 
import java.util.Locale; 
import android.content.Context; 
import android.database.Cursor; 
import android.database.SQLException; 
import android.database.sqlite.SQLiteException; 
import android.database.sqlite.SQLiteOpenHelper; 
import android.database.sqlite.SQLiteDatabase; 
import android.database.sqlite.SQLiteQueryBuilder; 
import android.util.Log; 
class IngredientHelper extends SQLiteOpenHelper { 
//we declare a bunch of useful constants 
//the should be pretty obvious what they are! 
private static final String DATABASE_PATH = "/data/data/com.mimirsoft.tutorial10/databases/"; 
private static final String DATABASE_NAME="ingredients.db"; 
private static final int SCHEMA_VERSION=1; 
public static final String TABLE_NAME = "Ingredients"; 
public static final String COLUMN_ID = "_id"; 
public static final String COLUMN_TITLE = "ingredient_name"; 

//* * * MY ADD * * * 
public static final String COLUMN_TITLE2 = "ingredient_description";

//* * * MY ADD * * * 
public static final String COLUMN_TITLE3 = "in_stock";

public SQLiteDatabase dbSqlite; 
private final Context myContext; 
public IngredientHelper(Context context) { 
super(context, DATABASE_NAME, null, SCHEMA_VERSION); 
this.myContext = context; 
// check if exists and copy database from resource 
//createDB(); 
} 
@Override 
public void onCreate(SQLiteDatabase db) { 
// check if exists and copy database from resource 
} 
@Override 
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { 
} 
public void createDatabase() { 
createDB(); 
} 
private void createDB() { 
boolean dbExist = DBExists(); 
if (!dbExist) { 
//By calling this method we create an empty database into the default system location 
//We need this so we can overwrite that database with our database. 
this.getReadableDatabase(); 
//now we copy the database we included! 
copyDBFromResource(); 
} 
} 
private boolean DBExists() { 
SQLiteDatabase db = null; 
try { 
String databasePath = DATABASE_PATH + DATABASE_NAME; 
db = SQLiteDatabase.openDatabase(databasePath, null, 
SQLiteDatabase.OPEN_READWRITE); 
db.setLocale(Locale.getDefault()); 
db.setLockingEnabled(true); 
db.setVersion(1); 
} catch (SQLiteException e) { 
Log.e("SqlHelper", "database not found"); 
} 
if (db != null) { 
db.close(); 
} 
return db != null ? true : false; 
} 
private void copyDBFromResource() { 
InputStream inputStream = null; 
OutputStream outStream = null; 
String dbFilePath = DATABASE_PATH + DATABASE_NAME; 
try { 
inputStream = myContext.getAssets().open(DATABASE_NAME); 
outStream = new FileOutputStream(dbFilePath); 
byte[] buffer = new byte[1024]; 
int length; 
while ((length = inputStream.read(buffer)) > 0) { 
outStream.write(buffer, 0, length); 
} 
outStream.flush(); 
outStream.close(); 
inputStream.close(); 
} catch (IOException e) { 
throw new Error("Problem copying database from resource file."); 
} 
} 
public void openDataBase() throws SQLException { 
String myPath = DATABASE_PATH + DATABASE_NAME; 
dbSqlite = SQLiteDatabase.openDatabase(myPath, null, 
SQLiteDatabase.OPEN_READWRITE); 
} 
@Override 
public synchronized void close() { 
if (dbSqlite != null) 
{ 
dbSqlite.close(); 
} 
super.close(); 
} 
public Cursor getCursor() { 
SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder(); 
queryBuilder.setTables(TABLE_NAME); 

// * * * MY CHANGE - CHANGED FROM... * * * 
//String[] asColumnsToReturn = new String[] { COLUMN_ID, COLUMN_TITLE}; 
//* * * TO... * * * 
//String[] asColumnsToReturn = new String[] { COLUMN_ID, COLUMN_TITLE, COLUMN_TITLE2, COLUMN_TITLE3}; 

//make sure you get your search by string pass correctly! 
Cursor mCursor = queryBuilder.query(dbSqlite, asColumnsToReturn, null, 
null, null, null, "ingredient_name ASC"); 
return mCursor; 
} 
public String getName(Cursor c) { 
return(c.getString(1)); 
} 
} 
```

和...

```
package com.mimirsoft.tutorial10; 
import android.app.Activity; 
import android.content.Context; 
import android.database.Cursor; 
import android.os.Bundle; 
import android.util.Log; 
import android.view.LayoutInflater; 
import android.view.View; 
import android.view.ViewGroup; 
import android.widget.CursorAdapter; 
import android.widget.ListView; 
import android.widget.TextView; 
//This tutorial introduces the CursorAdaptor, explains how it is different 
//from the Array Adapter, and also introduces the database functionality. 
//We will build a ListView from a Database of cocktail Ingredients 
public class Tutorial10 extends Activity { 
private IngredientHelper dbIngredientHelper = null; 
private Cursor ourCursor = null; 
private IngredientAdapter adapter=null; 
public void onCreate(Bundle savedInstanceState) { 
try 
{ 
super.onCreate(savedInstanceState); 
setContentView(R.layout.main); 
//this is our ListView element, obtained by id from our XML layout 
ListView myListView = (ListView)findViewById(R.id.myListView); 
//create our database Helper 
dbIngredientHelper=new IngredientHelper(this); 
//we call the create right after initializing the helper, just in case 
//they have never run the app before 
dbIngredientHelper.createDatabase(); 
// 
//open the database!! Our helper now has a SQLiteDatabase database object 
dbIngredientHelper.openDataBase(); 
//get our cursor. A cursor is a pointer to a dataset, in this case 
//a set of results from a database query 
ourCursor=dbIngredientHelper.getCursor(); 
//tell android to start managing the cursor, 
//we do this just incase our activity is interrupted or ends, we want the activity 
//to close and deactivate the cursor, as needed 
startManagingCursor(ourCursor); 
//create our adapter 
adapter=new IngredientAdapter(ourCursor); 
//set the adapter!!! 
myListView.setAdapter(adapter); 
} 
catch (Exception e) 
{ 
// this is the line of code that sends a real error message to the log 
Log.e("ERROR", "ERROR IN CODE: " + e.toString()); 
// this is the line that prints out the location in 
// the code where the error occurred. 
e.printStackTrace(); 
} 
} 
class IngredientAdapter extends CursorAdapter { 
IngredientAdapter(Cursor c) { 
super(Tutorial10.this, c); 
} 
@Override 
//this is a CusorAdapter 
//instead of Using a getView and if(row==null) 
// we use bindView and newView calls 
//we can get away with this because CursorAdapters have 
//a default implementation of getView that calls bindView and newView 
//as needed. This makes our code a bit cleaner, and is the better way to 
//do this. 
public void bindView(View row, Context ctxt, 
Cursor c) { 
IngredientHolder holder=(IngredientHolder)row.getTag(); 
holder.populateFrom(c, dbIngredientHelper); 
} 
@Override 
public View newView(Context ctxt, Cursor c, 
ViewGroup parent) { 
LayoutInflater inflater=getLayoutInflater(); 
View row=inflater.inflate(R.layout.row, parent, false); 
IngredientHolder holder=new IngredientHolder(row); 
row.setTag(holder); 
return(row); 
} 
} 
static class IngredientHolder { 
private TextView name=null; 
IngredientHolder(View row) { 
name=(TextView)row.findViewById(R.id.ingredientText); 
} 
void populateFrom(Cursor c, IngredientHelper r) { 
name.setText(r.getName(c)); 
} 
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:39:52.357

我会尝试类似的东西。传递光标并使用整数选择所需的列并将数据保存到变量中。

私人无效getName（c）{

```
 name.setText(c.getString(0)
 name2.setText(c.getString(1)
 name3.setText(c.getString(2)
 name4.setText(c.getString(3) 
```

}

然后只需将更多文本视图添加到您的布局中，并使用数据库中的字符串设置它们的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T21:24:44.353

最简单的方法是，您可以在字符串的每一行末尾添加一个换行符。这会破坏你想要的字符串。这样做的负面影响是您将无法单独设置每一行的样式。

更好的方法是创建一个布局并将每个字符串添加为文本视图。在 Views/Lists/4 下的 Android API Demos 中有一个示例。列表适配器。因此，将其添加到您的设备或在模拟器上运行。并且包名是com.example.android.apis.view，类是List4.java。

这是 API 示例的子类。

```
/**
 * We will use a SpeechView to display each speech. It's just a LinearLayout
 * with two text fields.
 *
 */
private class SpeechView extends LinearLayout {
    public SpeechView(Context context, String title, String words) {
        super(context);

        this.setOrientation(VERTICAL);

        // Here we build the child views in code. They could also have
        // been specified in an XML file.

        mTitle = new TextView(context);
        mTitle.setText(title);
        addView(mTitle, new LinearLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        mDialogue = new TextView(context);
        mDialogue.setText(words);
        addView(mDialogue, new LinearLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    } 
```

# c# - 使 ColdFusion 接受 ASP.NET 凭据

> ID：11975293
> 
> 赞同：0
> 
> 时间：2012-08-15T18:49:57.847
> 
> 标签：c#, asp.net, coldfusion

如何告诉 ColdFusion 服务器我的用户已通过 XXXX 凭据进行身份验证？目前，他们需要从一台服务器登录到另一台服务器。我的主要 Web 服务器是 C#/ASP.NET，而旧的 Web 服务器是 ColdFusion。我希望他们一旦对 ColdFusion 识别这些凭据的主服务器使用表单身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:01:17.610

如果用户仍然在同一个域中，如“mydomain.com”，您可以创建一个 cookie 并将其值与用户参考 ID 一起存储在 DB 中。当用户点击您的coldfusion服务器时，读取cookie，在您的数据库中验证它并取回用户信息。

不要忘记分配 cookie 域，如下所示：

```
cookie.Domain=".mydomain.com"; 
```

因此不同子域中的其他服务器可以读取您的 cookie。

如果用户不在同一个域上，或者您的 Web 应用程序不使用同一个域，我可以建议您使用[OAuth](http://oauth.net)之类的东西，或者像 FaceBook 那样实现您的身份验证系统之一。

# haskell - 是否不可能创建这种数据类型的 Functor 实例？

> ID：11975295
> 
> 赞同：1
> 
> 时间：2012-08-15T18:50:10.603
> 
> 标签：haskell, types, functor, fractions

我正在尝试将此数据类型设为以下实例`Functor`：

```
data Fraction = Frac Integer Integer deriving Show 
```

但是，像这样定义它是行不通的：

```
instance Functor Fraction where
  pure = Frac 1 1
  fmap f (Frac a b) = Frac (f a) (f b) 
```

我*想要*这个功能，并且我希望数据是 Functor 的一个实例。但是，这是否违反了某些法律，因为 的参数`Fraction`始终为 2 `Integers`？

我总是可以`fmap`自己写并避免`Functor`声明，但我正在努力更熟悉这种语言，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T18:55:47.770

是的，如果没有类型变量来“省略”声明（或者更正式地说：必须为某种类型的东西定义函子实例`* -> *`），您就无法定义函子。`fmap`is的签名`fmap :: (a -> b) -> f a -> f b`，因此为了满足该契约，必须可以选择任何类型`a`和`b`函数。

您当然可以重新定义`Fraction`为：

```
data Fraction a = Frac a a deriving Show 
```

[...或者您可以将现有数据类型用于Data.Ratio](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Ratio.html)中的分数/有理数，它不会形成函子，因为没有人认为拥有这样的实例很有用（无论如何，您会用它做什么？） ，但至少那时您会使用完善的现有数据结构。

# java - 正在为广播接收器启动 ANR 服务修复

> ID：11975299
> 
> 赞同：1
> 
> 时间：2012-08-15T18:50:27.833
> 
> 标签：java, android

我分析了Android教程，它说要在接收时启动服务以进行> 10秒的长时间运行操作，但是服务不是从主线程运行的吗？

[http://developer.android.com/guide/practices/responsiveness.html#avoiding](http://developer.android.com/guide/practices/responsiveness.html#avoiding)

服务（[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)）

还说不要长时间操作；那哪个更合适呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:08:23.277

> 但是服务不是从主线程运行的吗？

`Service`a (例如)的生命周期方法`onStartCommand()`在主应用程序线程上调用。但是，`Service`与 manifest-registered 不同， a`BroadcastReceiver`可以安全地分叉后台线程。An`IntentService`会自动执行此操作，这就是为什么它非常适合与`BroadcastReceiver`在许多情况下注册的清单配对。

# python - 在 python 套接字中 select() 可以管理多少个文件描述符？

> ID：11975300
> 
> 赞同：2
> 
> 时间：2012-08-15T18:50:37.323
> 
> 标签：python, sockets

当我的多线程程序运行时，会引发错误。我想`select()`管理文件描述符太多了，但不确定。有人可以为我解释一下吗？

```
readables,writeables,exceptional = select.select(inputs,outputs, [])
ValueError: filedescriptor out of range in select() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:03:15.460

问题是它`select()`通常对它可以管理的文件描述符有一个内置限制（在大多数系统上为 1024）。尝试`poll`or `epoll`，这可能会有所帮助。

另请注意，`select()`使用低效的算法来管理文件描述符查找。该算法具有 O(n) 计算复杂度，而`epoll`具有 O(1)。

# java - 我可以通过基类类型的引用访问子类方法吗？

> ID：11975302
> 
> 赞同：1
> 
> 时间：2012-08-15T18:50:44.150
> 
> 标签：java, inheritance

下面是我正在尝试处理但无法解决问题的一段代码：“我真的可以在 Java 中执行以下操作吗.. 如果是，请帮助了解我“如何”，如果没有“为什么？”。 ..看看下面的代码...

```
class Base{

      public void func(){

            System.out.println("In Base Class func method !!");         
      };
}

class Derived extends Base{

      public void func(){   // Method Overriding

            System.out.println("In Derived Class func method"); 
      }

      public void func2(){  // How to access this by Base class reference

            System.out.println("In Derived Class func2 method");
      }  
}

class InheritDemo{

      public static void main(String [] args){

            Base B= new Derived();
            B.func2();   // <--- Can I access this ??? This is the issue...
      }
} 
```

提前致谢！！！！等待一些有用的答案:) ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T18:53:55.270

short and sweet? No you cant.. How must `Base` know what functions/methods are present in the extended class?

EDIT:

By explict/type casting, this may be achieved, as the compiler takes it you know what you are doing when casting the object `Base` to `Derived`:

```
if (B instanceof Derived) {//make sure it is an instance of the child class before casting
((Derived) B).func2();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T18:52:11.760

This wont even compile as B is unaware of the func2

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T18:54:11.450

Since the type of object B is Base and the Base type doesn't have a func2() in its public interface, your code is not going to compile.

You can either define B as Derived or cast the B object to Derived:

```
 Derived B = new Derived(); B.func2();
   //or
   Base B = new Derived(); ((Derived)B).func2(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T18:54:10.933

You can do

```
((Derived) B).func2(); 
```

You can't do

```
B.func2(); 
```

as func2 is not a method of the Base class.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T18:54:17.977

像这样：

```
((Derived) B).func2(); 
```

# javascript - 新的替代解决方案的 JQuery 建议或建议

> ID：11975309
> 
> 赞同：2
> 
> 时间：2012-08-15T18:51:11.287
> 
> 标签：javascript, jquery, html

有没有更好的方法来做到这一点

```
$("#<%=Text_Name.ClientID%>").mouseleave(function () {
    var t_name = this.value;

    if (t_name == "") {
        $(this).val("Name");
        $("#<%=Text_Name.ClientID%>").addClass("grey_add");
        $("#<%=Text_Name.ClientID%>").removeClass("black_add");
    }
}); 
```

这段代码的作用是当您滚动出文本框时，它会返回给您`"Name"`。

使用这种技术的一个缺点是当用户将鼠标移出文本框时，它会在用户键入时填充一些内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:10:53.490

It's really simple with jQuery, check this:

**html**

```
<input type="text" id="myInput" value="Name" /> 
```

**jQuery**

```
$(function() {
  $('#myInput').focusin(function() {
      $(this).val('');   
  });

  $('#myInput').focusout(function() {
      $(this).val('Name');   
      $(this).css('background-color', '#ccc');
  }); 
}); 
```

Here goes [jsFiddle](http://jsfiddle.net/5UEq8/). No need for plugins or much code for this.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:03:28.517

```
<input name="search" placeholder="<%=Text_Name.ClientID%>"/> 
```

不需要javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:00:13.883

```
$("#<%=Text_Name.ClientID%>").blur(function () {
    var t_name = this.value;

    if (t_name == "") {
        $(this).val("Name");
        $("#<%=Text_Name.ClientID%>").addClass("grey_add");
        $("#<%=Text_Name.ClientID%>").removeClass("black_add");
    }
}); 
```

当您关注其他内容时会发生此事件，这可能是堆栈溢出右上角的文本框使用的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T19:04:38.830

您可以查看我在这里发布的水印插件：

[自定义 jQuery 插件返回 val()](https://stackoverflow.com/questions/11891568/custom-jquery-plugin-return-val/11891646#11891646)

只需将其编辑为`mouseover / mouseout`而不是 on `focus/blur`。

[**jsFiddle 编辑显示 mouseover/mouseout**](http://jsfiddle.net/Lkas5/3/)

# apache - 多个监听指令

> ID：11975313
> 
> 赞同：1
> 
> 时间：2012-08-15T18:51:20.790
> 
> 标签：apache, xampp

我正在尝试将 Apache 配置为在多个端口上提供服务，但是当我添加多个监听指令时，我得到了 204。

仅使用一个侦听指令即可正常工作（仅具有相应端口的虚拟主机）

这是我的虚拟主机配置：

```
# Listen
Listen 8013
Listen 8015
Listen 8019

# NameVirtualHost
NameVirtualHost *:8013
NameVirtualHost *:8015
NameVirtualHost *:8019

# Projects
<VirtualHost *:8013>
   ServerName local.dev

    DocumentRoot "/Users/laskew/DEV"
    <Directory "/Users/laskew/DEV">

      Options Indexes FollowSymLinks Includes
      AllowOverride All
      Order allow,deny
      Allow from all
   </Directory>
</VirtualHost>

# Subversion
<VirtualHost *:8015>
  ServerName local.svn

  DocumentRoot "/Users/laskew/SVN"

  <Directory "/Users/laskew/SVN">
    Options Indexes FollowSymLinks Includes
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost>

# Git
<VirtualHost *:8019>
  ServerName local.git

  DocumentRoot "/Users/laskew/GITHUB"

  <Directory "/Users/laskew/GITHUB">
    Options Indexes FollowSymLinks Includes
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:24:08.987

确保在“httpd.conf”中将其设置为侦听端口 80。我认为它始终需要侦听该端口。

您还需要在 httpd.conf 文件的末尾添加指令“AcceptMutex flock”。

# python - Python 在星号之间多次提取多个字符串

> ID：11975315
> 
> 赞同：3
> 
> 时间：2012-08-15T18:51:28.673
> 
> 标签：python, string

我环顾四周，但找不到我要找的东西......

基本上我有一个带有很多星号的字符串：

例子：`red blue green * hello* pink orange 4pgp42g4jg42 * world* violet black`

我要做的是将字符串拆分，以便我可以提取“hello”和“world”，并最终使用 for 语句将它们打印为列表。我正在使用的字符串更长，并且不一定有我想要取出的任何固定数量的切片。

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T18:55:27.713

我希望：

```
re.findall(r'\*([^*]+)\*',string) 
```

会成功的。基本上，这个正则表达式会查找`'*'`( `\*`) ，然后匹配任何不是`'*'`( `([^*]+)`) 的内容，然后再匹配另一个`'*'`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T18:59:22.650

作为优秀`re`建议的替代方案：

用于`split`分隔“在星号之间”和“不在星号之间”的部分：

```
>>> msg = "red blue green * hello* pink orange 4pgp42g4jg42 * world* violet black"
>>> msg.split()
['red blue green ', ' hello', ' pink orange 4pgp42g4jg42 ', ' world', ' violet black'] 
```

然后使用数组切片来获取所有其他部分，从第二个开始。

```
>>>msg.split("*")[1::2]
[' hello', ' world'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T18:56:10.463

你试过这个`re`模块吗？它使用一种称为正则表达式的语法，允许您进行非常复杂的匹配（请参阅[此处](http://docs.python.org/library/re.html)的文档）。在你的情况下，你可以尝试这样的事情：

```
import re

# Store your string
my_str = 'red blue green * hello* pink orange 4pgp42g4jg42 * world* violet black'

# Find matches
match = re.findall(r'\*([^\*]*)\*', my_str)

# Print everything
print match

# Iterate
for item in match:
    print item 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T18:59:03.477

您可以使用 .split('*') 然后获取所有其他元素。

例如：

```
my_string = 'this is a *test* of my code that *I* have written'
split_string = my_string.split('*')
words_between = [split_string[i] for i in range(1, len(split_string), 2)] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T19:00:49.653

正则表达式在这里似乎有点矫枉过正。我只会使用：

```
my_str = 'red blue green * hello* pink orange 4pgp42g4jg42 * world* violet black'
broken_up = my_str.split('*') 
```

如果你不想要结局，就做

```
broken_up[1:-1] 
```

编辑：我想我刚刚意识到你真正在寻找什么。从技术上讲，“粉红橙色 4pgp42g4jg42”也在星号之间，这是一个问题。我认为这会起作用。

```
my_str = 'red blue green * hello* pink orange 4pgp42g4jg42 * world* violet black'
broken_up = my_str.split('*')
broken_up = [broken_up[i] for i in range(1, len(broken_up), 2)] 
```

如果你想摆脱空格，只需使用 .strip() 之类的

```
broken_up = [broken_up[i].strip() for i in range(1, len(broken_up), 2)] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T19:05:52.213

试试这个：

```
from re import findall

sstring = "red blue green * hello* pink orange 4pgp42g4jg42 * world*"

result = findall('\*.*?\*', sstring)
print r 
```

这会给你：

```
['* hello*', '* world*'] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T19:00:26.787

我将使用 re.split 将其拆分为字符串列表，从而做到这一点：

```
import re

my_string = "red blue green * hello* pink orange 4pgp42g4jg42 * world* violet black"

all_split_up = re.split('\*', my_string) 
```

执行此操作时，键入：

```
for item in all_split_up:
    print item 
```

将产生：

```
red blue green 
 hello
 pink orange 4pgp42g4jg42 
 world
 violet black 
```

通过使用 re.split 而不是 re.findall，您不必担心在正则表达式模式中指定非捕获组。我认为这是最简单的正则表达式答案，尽管“答案”按钮有点晚。

# vim - Vim - ctags：找不到标签

> ID：11975316
> 
> 赞同：36
> 
> 时间：2012-08-15T18:51:30.740
> 
> 标签：vim, ctags

我想将 Ctags 用于 Zend 框架项目。我执行了这个命令：`ctags -R ./* ../ZendFramework/*`创建一个标签列表，但问题是当我按下`Ctrl-]`一个类或方法时，我得到这个错误：`ctags: tag not found`

我检查了`tags`文件并列出了所有类/方法/变量。这些`tags`文件位于项目的根目录中。我应该在打开文件时手动加载它吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-15T19:30:46.983

是的，你应该告诉 Vim 在哪里可以找到你的`tags`文件，比如：

```
:set tags=/path/to/tags 
```

不过，这不是很理想。你的这一行`~/.vimrc`应该有帮助：

```
set tags=./tags,tags;$HOME 
```

它告诉 Vim 在当前文件的目录中查找一个`tags`文件，在当前目录中，直到你的`$HOME`（这是分号的意思），在第一次命中时停止。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T19:31:53.953

该`'tags'`变量必须指向您的`tags`文件。见`:help 'tags'`。将路径添加到标签文件的示例：

```
:set tags+=$HOME/yourpath/tags 
```

# javascript - 纯Javascript表格列悬停效果？

> ID：11975318
> 
> 赞同：3
> 
> 时间：2012-08-15T18:51:33.060
> 
> 标签：javascript, css, html-table

我需要 HTML 表格列的纯 Javascript（无 jQuery）悬停效果。

我发现[这个](https://stackoverflow.com/questions/1553571/html-hover-table-column)据说包含 Firefox 的修复程序，但对我来说它仍然看起来很糟糕。

我发现[这](http://forums.htmlhelp.com/index.php?showtopic=601)仅适用于第一列。

不幸的是，我的 Javascript 技能充其量是业余的，所以我尝试修改其中任何一个都没有结果。

这可能吗？任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T19:25:34.940

这是一种基于列的方法。当鼠标进入/离开单元格时，[`<col/>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/col)通过索引找到对应的单元格并应用/删除所需的类：

```
(() => {
  const myTable = document.getElementById("myTable");
  const cols = myTable.querySelectorAll("col");
  const events = {
    mouseover: e => {
      const t = e.target.closest("td");
      if (t) {
        const cellIndex = t.cellIndex;
        for (let i = 0, n = cols.length; i < n; i++) {
          cols[i].classList[i === cellIndex ? "add" : "remove"]("hovered");
        }
      }
    },
    mouseout: e => {
      const t = e.target;
      if (t.nodeName === "TD" && !t.contains(e.relatedTarget)) {
        cols[t.cellIndex].classList.remove("hovered");
      }
    }
  };
  for (let event in events) {
    myTable.addEventListener(event, events[event]);
  }
})();
```

```
.hovered {
  background-color: #FF0000;
}
```

```
<table id="myTable" cellspacing="0">
  <col />
  <col />
  <col />
  <tbody>
    <tr>
      <td>Col1</td>
      <td>Col2</td>
      <td>Col3</td>
    </tr>
    <tr>
      <td>Col1</td>
      <td>Col2
        <span>nested</span>
      </td>
      <td>Col3</td>
    </tr>
    <tr>
      <td>Col1</td>
      <td>Col2</td>
      <td>Col3</td>
    </tr>
  </tbody>
</table>
```

也可以看看：

*   `Element.[classList](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList)`
*   `Node.[Contains()](https://developer.mozilla.org/en-US/docs/Web/API/Node/contains)`
*   `Element.[Closest()](https://developer.mozilla.org/en-US/docs/Web/API/Element/closest)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:15:20.417

这是您的代码（+[演示](http://jsfiddle.net/4vcnK/)）：

```
var HOVER_CLASS = 'hovered';
var hovered;

table.addEventListener('mouseover', function (e) {
    if (e.target.tagName.toLowerCase() == 'td') {
        var index = e.target.cellIndex;

        hovered && hovered.forEach(function (cell) {
            cell.classList.remove(HOVER_CLASS);
        });

        hovered = Array.prototype.map.call(
            table.rows,
            function (row) {
                var i = index;
                while (!cell && i >= 0) {
                    var cell = row.cells[i];
                    i -= 1;
                }
                return cell;
            }
        );

        hovered.forEach(function (cell) {
            cell.classList.add(HOVER_CLASS);
        });
    }
}, true);

table.addEventListener('mouseout', function (e) {
    hovered && hovered.forEach(function (cell) {
        cell.classList.remove(HOVER_CLASS);
    });
    hovered = null;
}, true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T18:58:43.617

我能想到的最好的方法是给每个`<td>`类名来标识它所在的列。即“col1、col2 等”

然后您可以使用该`document.getElementsByClassName("colX")`函数获取这些`<td>`s 的数组，遍历数组并修改样式。警告，这可能不适用于没有 getElementsByClassName 函数的旧浏览器，但您可以轻松找到解决方法。最好的方法是使用 jQuery，不知道你为什么反对它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-27T21:39:06.040

您在 css 中创建一个类

```
.HoverTabla > tbody > tr:hover,
.HoverTabla > tbody > tr:focus { 
    background-color: #42C6F7;
} 
```

然后你从 html 中的表中调用它

```
<table class="table HoverTabla" id="tbl_Plan">

            <thead>
                <tr>
                    <th>Tipo de plan</th>
                    <th>Tiempo en días</th>
                    <th>Max. Usuario</th>
                    <th>Max. Capacidad</th>
                    <th>Max. Casos</th>
                    <th>Valor plan</th>
                    <th></th>
                </tr>
            </thead>
 </table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-25T21:36:01.940

经过一番谷歌搜索后，我找到了纯 CSS 的答案：[https ://css-tricks.com/simple-css-row-column-highlighting/](https://css-tricks.com/simple-css-row-column-highlighting/)

表格中的每个单元格 ( `<td>`) 通过伪元素赋予一些填充，用于创建悬停效果。为了确保悬停效果不会超出表格本身，`overflow: hidden`使用了 an 。

文章中的副标题总结了这一切：“诀窍是在`<td>`s 上使用巨大的伪元素，被表格溢出隐藏”

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-15T18:59:26.027

尝试

```
<td onMouseOver="this.bgColor='yellow';" onMouseOut="this.bgColor='white';"> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-15T19:00:31.237

这将起作用，不需要javascript。因此，即使人们关闭了 javascript，它也应该可以工作。

> Jfiddle：http: [//jsfiddle.net/vJacZ/](http://jsfiddle.net/vJacZ/)

​</p>

html:

```
​&lt;table>
<tr>
    <td class="column1">
        Column1
    </td>
    <td class="column2">
        Column2
    </td>
</tr>
</table> 
```

CSS：

```
.column1{
    color:black;
}
.column1:hover{
    color:red;
}
.column2{
    color:black;
}
.column2:hover{
    color:green;
} 
```

# php - How to get values for dynamically added text boxes in Java Script and PHP

> ID：11975323
> 
> 赞同：0
> 
> 时间：2012-08-15T18:51:44.077
> 
> 标签：php, javascript, html, dynamic, textbox

I am trying to POST the values of the dynamically added text boxes. How to assign names to these new textboxes[as array]? How to pass these array values to the .php file?

Below piece of code adds texbox dynmically

HTML Part:

```
<input type="checkbox" name="bugs" value="1">Check this if bugs are not available </br> </br>
<INPUT type="button" value="Add Row" onclick="addBugRow('bugTable')" />
<INPUT type="button" value="Delete Row" onclick="deleteBugRow('bugTable')" />

<TABLE id="bugTable" width="350px" border="1">
<TR>
            <TD></TD>
            <TD> No. </TD>
            <TD> PCR </TD> 
        <TD> Description </TD>

</TR>
<TR>
            <TD><INPUT type="checkbox" name="chk"/></TD>
            <TD> 1 </TD>
            <TD> <INPUT type="text" name="pcr[]" size="6"/> </TD> 
        <TD><textarea cols="75" rows="5" name="bugdata[]"> </textarea> </TD>

</TR>
</TABLE> 
```

Java Script Part

```
function addBugRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "checkbox";
            cell1.appendChild(element1);

            var cell2 = row.insertCell(1);
            cell2.innerHTML = rowCount;

            var cell3 = row.insertCell(2);
            var element2 = document.createElement("input");
            element2.type = "text";
        element2.name = "pcr[]"; // text field names in array
        element2.size = 6;
            cell3.appendChild(element2);

        } 
```

on PHP side, I need to get values of the number of textboxes added and their values.

PHP Part:

```
foreach($_POST['pcr'] as $key=>$value)
 echo $key.' '.$value; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:54:40.390

为动态创建的元素添加名称：

```
var Input = document.createElement("input");     
Input.setAttribute("name", "ElementNameGoesHere"); 
```

至于将输入作为数组发布..是的，这是可能的：

输入命名：

```
<input name="array[]" />
<input name="array[]" /> 
```

PHP：

```
$_POST['array'][0] // First Input
$_POST['array'][1] // Second Input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:57:32.467

如果您使用的是 jquery：

```
var count  = $("input[name*='newInput']").length;
var hidden = $("<input>").attr("type", "hidden")
                         .attr("name", "newInput[" + count + "]")
                         .val("hiddenStuff");
$("#someId").append(hidden); 
```

这应该可以很好地发布到 PHP。只要您生成您知道在 PHP 端查找的可预测名称，您就应该能够轻松地将数据取回。

# android - Logcat not updating for only some code

> ID：11975324
> 
> 赞同：0
> 
> 时间：2012-08-15T18:51:53.193
> 
> 标签：android, logcat

I am trying to create an app and got stuck at a place. To debug, I have added Log.d messages. However, I am not getting the log outputs for a certain part of the code. I am getting the log outputs for other parts. This is weird but is there any solution for it?

PS: There are no filtering enabled, the device is correctly pointed.

```
08-16 00:09:16.102: W/SoundPool(87):   sample 0 not READY
08-16 00:09:16.132: D/PhoneStatusBar(139): disable: < expand icons alerts ticker system_info BACK HOME recent* CLOCK >
08-16 00:09:16.542: I/ARMAssembler(35): generated scanline__00000077:03515104_00009002_00000000 [127 ipp] (149 ins) at [0x4119e818:0x4119ea6c] in 2714369 ns
08-16 00:09:16.662: D/PhoneStatusBar(139): disable: < expand icons alerts ticker system_info back* home* recent clock* >
08-16 00:09:16.752: I/ARMAssembler(35): generated scanline__00000077:03515104_00009001_00000000 [131 ipp] (153 ins) at [0x4119ea70:0x4119ecd4] in 856742 ns

/**********************************
/**Log msgs shd have started here
/**********************************/

08-16 00:09:40.572: W/ThrottleService(87): unable to find stats for iface rmnet0
08-16 00:09:59.873: D/dalvikvm(524): GC_CONCURRENT freed 1913K, 24% free 10314K/13447K, paused 29ms+4ms
08-16 00:10:00.323: D/dalvikvm(524): GC_CONCURRENT freed 246K, 22% free 10504K/13447K, paused 51ms+11ms
08-16 00:10:01.943: D/dalvikvm(524): GC_CONCURRENT freed 617K, 23% free 10395K/13447K, paused 12ms+5ms
08-16 00:10:02.253: D/dalvikvm(524): GC_CONCURRENT freed 255K, 21% free 10649K/13447K, paused 12ms+6ms
08-16 00:10:02.483: D/dalvikvm(524): GC_CONCURRENT freed 261K, 20% free 10873K/13447K, paused 12ms+6ms
08-16 00:10:02.633: D/dalvikvm(524): GC_FOR_ALLOC freed <1K, 17% free 11247K/13447K, paused 61ms
08-16 00:10:20.513: D/dalvikvm(524): GC_CONCURRENT freed 1633K, 24% free 10332K/13447K, paused 12ms+6ms
08-16 00:10:20.793: D/dalvikvm(524): GC_CONCURRENT freed 220K, 22% free 10548K/13447K, paused 11ms+7ms
08-16 00:10:47.174: D/InputEventConsistencyVerifier(524): KeyEvent: ACTION_UP but key was not down.
08-16 00:10:47.174: D/InputEventConsistencyVerifier(524):   in Handler (android.view.ViewRootImpl) {4138f060}
08-16 00:10:47.174: D/InputEventConsistencyVerifier(524):   0: sent at 193445000000, KeyEvent { action=ACTION_UP, keyCode=KEYCODE_BACK, scanCode=158, metaState=0, flags=0x8, repeatCount=0, eventTime=193445, downTime=193341, deviceId=0, source=0x301 }
08-16 00:10:50.823: D/dalvikvm(524): GC_CONCURRENT freed 404K, 21% free 10636K/13447K, paused 6ms+22ms
08-16 00:10:51.433: W/WindowManager(87): Failure taking screenshot for (180x300) to layer 21020
08-16 00:10:51.832: W/NetworkManagementSocketTagger(87): setKernelCountSet(10013, 1) failed with errno -2
08-16 00:10:52.332: I/Process(87): Sending signal. PID: 184 SIG: 3
08-16 00:10:52.342: I/dalvikvm(184): threadid=3: reacting to signal 3
08-16 00:10:52.393: W/InputManagerService(87): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@415ebf40 (uid=10040 pid=524)
08-16 00:10:52.482: I/dalvikvm(184): Wrote stack traces to '/data/anr/traces.txt'
08-16 00:10:52.752: I/ARMAssembler(35): generated scanline__00000077:03515104_00009004_00000000 [122 ipp] (142 ins) at [0x4119ecd8:0x4119ef10] in 968806 ns
08-16 00:10:52.902: I/dalvikvm(87): Jit: resizing JitTable from 4096 to 8192
08-16 00:10:53.312: W/NetworkManagementSocketTagger(87): setKernelCountSet(10040, 0) failed with errno -2
08-16 00:10:53.442: D/dalvikvm(524): GC_EXPLICIT freed 1214K, 29% free 9573K/13447K, paused 4ms+7ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:01:54.083

有时当前的 logcat 有这个错误。您是否更新了 android sdk Tools 和 android sdk platform-tools ？如果更新后此错误仍然存​​在，您可以使用已弃用的 logcat 或尝试重新启动您的 IDE。

# css - 如何更改插件的 CSS

> ID：11975325
> 
> 赞同：2
> 
> 时间：2012-08-15T18:51:54.637
> 
> 标签：css, wordpress, plugins

我在 wordpress 中安装了一个插件，它可以创建图像缩略图并显示特定页面的所有子页面的链接。它显示在[本网站](http://cbchaverhill.onedirectionconnection.com)的首页。

该插件称为 AutoNav。更多信息[在这里](http://wordpress.org/extend/plugins/autonav/)。

插件常见问题解答关于创建哪些类来创建表的内容如下：

```
table elements: subpages-table
tr elements: subpages-row
td elements: subpages-cell
p elements inside each td: subpages-text
Thumbnail images: subpages-image
Excerpt text: subpages-excerpt 
```

我的问题是我应该如何格式化我的 CSS 以更改这些设置。我应该只创建具有这些名称的类吗？

最后，插件生成的链接在初始页面加载时起作用，但是一旦页面完全加载，链接似乎停止工作并变成文本。不确定是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:11:46.690

> 我的问题是我应该如何格式化我的 CSS 以更改这些设置。我应该只创建具有这些名称的类吗？

是的。这些是插件生成并应用于 html 中的元素的类。

例如，如果您想为缩略图添加边框，您可以将样式应用于`.subpage-image`类。

```
.subpage-image {
    border:1px solid #000;
} 
```

> 最后，插件生成的链接在初始页面加载时起作用，但是一旦页面完全加载，链接似乎停止工作并变成文本。不确定是什么问题。

这是由您的滑块引起的。完全加载后，div #slider 会覆盖您的内容，使链接无法点击。

要解决这个问题，请给出`#slider`高度：280px；

# javascript - JQuery AJAX 和 OOP JS 范围问题

> ID：11975332
> 
> 赞同：3
> 
> 时间：2012-08-15T18:52:30.630
> 
> 标签：javascript, jquery, ajax, oop, scope

因此，我创建了一个对象，该对象在初始化阶段进行 AJAX 调用以填充其属性。但是，我遇到了一个非常奇怪的行为：我可以在 $.ajax() 范围内打印并查看属性值，但是任何返回属性值的公共方法的返回值都是“未定义”。

下面是 JS 代码的样子：

```
function MyFunction() {
   this.myProperty;
   this.init();
}

Myfunction.prototype.getPropertyValue = function () {
    alert(this.myProperty); // returns 'undefined'
}

Myfunction.prototype.init = function () { 
   $.ajax({
      type: 'get',
      url: "getProperty.php",
      dataType: "json",
      success: function(response) {
         this.myProperty = response[0].Property;
         alert(this.myProperty) // returns 'Property Name'
      }
   });
} 
```

我的想法是在 $.ajax() 范围内，“this”实际上是指其他东西。所以，我的问题是如何确保“this.myProperty”已设置并且一旦我们超出 AJAX 范围就不会失去其价值？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:05:32.390

由于您建立价值的方式，您得到“未定义”的部分原因是：

```
var MyFunction = function () {
   this.myProperty;
   alert(this.myProperty); // undefined!
   this.init();
}; 
```

当您声明属性（或变量）而不指定值时，它们默认为“未定义”。反而：

```
var MyFunction = function () {
   this.myProperty = false;
   alert(this.myProperty); // false
   this.init();
}; 
```

关于ajax调用。你是对的，回调的范围与对象不同。`this`，在 ajax 成功函数中，指的是 jQuery 包装的 XHR 对象。当您调用 时`this.myProperty = response[0].Property`，您实际上是在 ajax 对象上创建一个新属性并设置**其**值。要纠正这个问题，您可以使用`context`jQuery ajax 对象的选项，或者使用 javascript 方法绑定回调函数`bind`：

```
 success: function(response) {
     this.myProperty = response[0].Property;
  }.bind(this) 
```

... 或者：

```
 $.ajax({
      type: 'get',
      url: "getProperty.php",
      dataType: "json",
      context: this,
      success: function(response) {
         this.myProperty = response[0].Property;
      }
   }); 
```

在这里试试：http: [//jsfiddle.net/SnLmu/](http://jsfiddle.net/SnLmu/)

**文档**

*   `bind()`在 MDN - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)
*   `jQuery.ajax()`- [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
*   *Functions and Function Scope* on MDN - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:58:38.167

部分问题是 ajax 是异步的，因此当您尝试访问它们时可能不会设置属性（竞争条件）。另一个是`this`ajax调用里面的值不是`Myfunction`。您可以通过以下方式修复：

```
Myfunction.prototype.init = function () { 
   var that = this;
   $.ajax({
      type: 'get',
      url: "getProperty.php",
      dataType: "json",
      success: function(response) {
         that.myProperty = response[0].Property;
         alert(that.myProperty) // returns 'Property Name'
      }
   });
} 
```

或者您可以使用`context`ajax 调用中的设置。根据[网站](http://api.jquery.com/jQuery.ajax/)：

> 该对象将成为所有与 Ajax 相关的回调的上下文。默认情况下，上下文是一个对象，表示调用中使用的 ajax 设置（$.ajaxSettings 与传递给 $.ajax 的设置合并）。例如，将 DOM 元素指定为上下文将使它成为请求完整回调的上下文，如下所示：

```
Myfunction.prototype.init = function () { 
       var that = this;
       $.ajax({
          type: 'get',
          url: "getProperty.php",
          dataType: "json",
          context: Myfunction,
          success: function(response) {
             this.myProperty = response[0].Property;
             alert(this.myProperty) // returns 'Property Name'
          }
       });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:04:41.090

```
var MyFunction = {
    myProperty: null,
    init: function() {
        var self = this;
        self.ajax(function(response) {
            self.myProperty = response;
            self.secondfunction(self.myProperty); //call next step only when ajax is complete
        });
    },
    ajax: function(callback) {
        $.ajax({
            type: 'get',
            url: "getProperty.php",
            dataType: "json"
        }).done(function(response) {
            callback(response[0].Property);
        });
    },
    secondfunction: function(prop) {
        alert(prop);
    }
}

$(function() {    
    MyFunction.init();
}); 
```

# android - Why is my function call no longer working?

> ID：11975333
> 
> 赞同：0
> 
> 时间：2012-08-15T18:52:32.657
> 
> 标签：android, eclipse, email

I had a mail function in my application that was working fine until today, and I have not touched in about a month.

Here is a link to the mail program I put in my app: [http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)

My problem is in the conditional, m.send() is not being called for some reason, but the else statement is working fine. I am getting no errors at all and the catch is not catching anything. Can someone please tell me what happened to my program?

```
public void Mailing(String inputName, String inputPassword)
{
    Mail m = new Mail(inputName, inputPassword); 

    String[] toArr = {"fake@gmail.com"}; 
    m.setTo(toArr); 
    m.setFrom(inputName); 
    m.setSubject("Daily Time Card"); 
    m.setBody(""); 

    try 
    { 
      m.addAttachment(Environment.getExternalStorageDirectory().toString() + "/test"); 

      if(m.send()) 
      { 
        Toast.makeText(TaskReminderActivity.this, "Email was sent successfully.",  Toast.LENGTH_LONG).show(); 
      }
      else
      {
        Toast.makeText(TaskReminderActivity.this, "Email was not sent successfully.", Toast.LENGTH_LONG).show(); 
      }

    } catch(Exception e) { 
      Toast.makeText(TaskReminderActivity.this, "There was a problem sending the  email.", Toast.LENGTH_LONG).show();
      Toast.makeText(TaskReminderActivity.this, "Value of User Name is " + inputName, Toast.LENGTH_LONG).show();
      Toast.makeText(TaskReminderActivity.this, "Value of Password is " + inputPassword, Toast.LENGTH_LONG).show();
      Toast.makeText(TaskReminderActivity.this, "Value of Attachment is " + Environment.getExternalStorageDirectory().toString() + "/test.txt", Toast.LENGTH_LONG).show();
      Log.e("MailApp", "Could not send email", e); 
    } 
} 
```

# android - 如何将字符串添加到 Android TextView？

> ID：11975335
> 
> 赞同：9
> 
> 时间：2012-08-15T18:52:37.737
> 
> 标签：android, layout, textview

有 TextView.append()，但这会将文本添加到 TextView 的末尾。我希望我附加的内容在开头（即显示在 TextView 框的顶部）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T18:54:56.777

你试过这个

```
 textview.setText(" append string" + textView.getText()); 
```

虽然这种方法会丢失跨度。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-15T20:56:51.507

如果您担心跨度，您可以使用这样的东西：

```
textView.getEditableText().insert(0, "string to prepend"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T10:15:36.653

getEditableText() 返回 null 给我。相反，为了将文本添加到可扩展文本中，我在代码中将文本缓冲区类型设置为 SPANNABLE:：

```
myTextView.setText(myText, TextView.BufferType.SPANNABLE); 
```

或在 TextView 上使用 xml 属性[android:bufferType](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3abufferType)。

然后将 getText() 转换为 Spannable，然后我将额外的文本与现有文本连接起来：

```
Spannable currentText = (Spannable) tvTitle.getText();
CharSequence indexedText = TextUtils.concat(String.format("%d. ", index), currentText);
myTextView.setText(indexedText); 
```

据我所知，所有功能都可以从 API 级别 1 获得。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T18:56:03.027

然后使用要附加的字符串说“你好”到文本视图

```
textview.setText("hello"+textView.getText()) 
```

# java - Java PrintStream 问题

> ID：11975340
> 
> 赞同：2
> 
> 时间：2012-08-15T18:52:59.450
> 
> 标签：java, io

我正在尝试修改 java 代码以将某些内容写入 txt 文件。原始代码是：

```
try {
    out = new PrintStream(system.out, true, "UTF-8");
} catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我使用 FileOutputStream 来执行此操作，并将代码修改为：

```
try {
    FileOutputStream os = new FileOutputStream("wiki.txt", true);
    out = new PrintStream(os, true, "UTF-8");
} catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

但它不起作用，错误是：

```
Wikipedia2Txt.java:56: unreported exception java.io.FileNotFoundException; must be caught or declared to be thrown
    FileOutputStream os = new FileOutputStream("wiki.txt");
                          ^
1 error 
```

我尝试了两种方法： 1，我在磁盘上手动制作了一个 wiki.txt 文件；2、运行代码前不存在wiki.txt。但任何一个都不起作用。它只是在编译时停止。

那么发生了什么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T18:54:59.913

Java 并没有告诉您找不到该文件，只是告诉您它*可能*在运行时找不到，并且您的程序还没有准备好处理它。

这是解决此问题的一种方法：

```
try {
    FileOutputStream os = new FileOutputStream(file, true);
    out = new PrintStream(os, true, "UTF-8");
} catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (FileNotFoundException fnf) {
    // TODO Auto-generated catch block
    fnf.printStackTrace();
} 
```

这是另一种方式：

```
try {
    FileOutputStream os = new FileOutputStream(file, true);
    out = new PrintStream(os, true, "UTF-8");
} catch (IOException e) {
    // TODO Auto-generated catch block
    fnf.printStackTrace();
} 
```

第一种方法确保编译器您的代码准备好分别处理这两个异常；第二种方法确保编译器您的代码准备好处理这两个异常的*超类*。这两种方式并不相同，因为第二种方式比第一种方式涵盖更多的异常。

最后，还有另一种方法可以通过使用`throws`块声明您的函数来使编译器静音（公共超类或两个单独的类都可以）。这是一种告诉编译器你的函数不知道如何处理这些异常的方法，它们应该由调用者处理。这种方法的结果是函数的每个调用者都必须在调用周围放置一个 try/catch，或者使用`throws`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T18:54:46.167

`FileOutputStream`您正在使用的构造函数的签名是`public FileOutputStream(File file) throws FileNotFoundException`. 这意味着它是您必须处理的已检查异常。因此，请确保您编写此代码的方法要么处理此异常（即将此异常指定为`catch`块的一部分），要么您专门抛出此异常。

因此，以下任何一项都适合您：

**在`catch`块中指定**

```
try {
    FileOutputStream os = new FileOutputStream(file, true);
    out = new PrintStream(os, true, "UTF-8");
} catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

或者让你的方法成为`throw`这个例外 - 所以你的方法签名就像`return_type method_name (params_list) throws FileNotFoundException`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T18:58:24.020

您需要处理找不到文件时的情况。

试试这个：

```
try {
    File file = (..your code..)
    FileOutputStream os = new FileOutputStream(file, true);
     out = new PrintStream(os, true, "UTF-8");
} catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (FileNotFoundException e) {
   // Handling a situation when file is not found.
   e.printStackTrace();
} 
```

您的 IDE（例如 Eclipse、IDEA、NetBeans）应该在这种情况下提供额外的帮助。当您生成存根时，您可能已经在使用 IDE。你的代码不是有红色下划线吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T18:59:34.523

您只是在践踏 Java 的痛处之一：*检查异常*。代码运行时可能会发生无数异常，但只有其中一部分必须提前声明。我处理你的代码的首选方法是将所有检查的异常**包装**`RuntimeException`到一个你可以在堆栈跟踪的其他地方处理的地方：

```
try {
  FileOutputStream os = new FileOutputStream(file, true);
  out = new PrintStream(os, true, "UTF-8");
} catch (RuntimeException e) { 
  throw e; 
} 
catch (Exception e) { 
  throw new RuntimeException(e); 
} 
```

在大多数情况下，在异常发生的地方处理异常是**错误**的，会导致异常*被吞下*，并且通常是不可靠、难以调试的代码。

In a well-engineered application all exceptions that represent a failure—rather than an **expected** alternative situation—must be propagated up the stack frame towards the so-called *exception barrier*, where all failures are uniformly handled.

# objective-c - how can I automatically get the same methods in multiple classes with different inheritance?

> ID：11975346
> 
> 赞同：0
> 
> 时间：2012-08-15T18:53:33.663
> 
> 标签：objective-c, ios

I have a singleton class that I want accessible via a helper method on multiple classes...

One of my classes inherits from CCLayer:

```
@interface Game : CCLayer 
```

the other NSObject:

```
@interface Question : NSObject 
```

... So my thought was to create a class:

```
#import "Storeizer.h"

@implementation Storeizer

-(StorageMechanism*)store {
    return [StorageMechanism sharedStorageMechanism];
}

@end 
```

And have both Game and Question classes inherit from Storeizer so that they can automatically have a self.store convenience method.... However, this is a problem since my other classes already inherit from different objects (CCLayer and NSObject). So, I am a little confused how to proceed, and am wondering if this convenience method is more trouble than it's worth. I just come from a world where I hate to have redundant code, and having multiple classes calling [StorageMechanism sharedStorageMechanism] feels a little unfriendly on the eyes (to me at least).

So, how can I solve this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:57:26.603

将类别添加到 NSObject，并导入您使用这些方法的类别的标题。

# wpf - 为什么在 ItemsControl 模板中的 TextBlock 周围需要一个 Border 才能使 TextBlock 换行？

> ID：11975347
> 
> 赞同：0
> 
> 时间：2012-08-15T18:53:34.733
> 
> 标签：wpf, templates, itemscontrol, textblock, word-wrap

当 TextBlock 是 ItemsControl 中每个项目的模板时，我在试图弄清楚如何进行 TextBlock 换行时发现[了这个问题。](https://stackoverflow.com/questions/397257/force-textblock-to-wrap-in-wpf-listbox)

我的原始模板：

```
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <Grid>
            <TextBlock Padding="2" x:Name="SummaryRow" Text="{Binding}" TextWrapping="Wrap" />
        </Grid>
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

为了使文本真正换行，我不得不用边框包围 TextBlock。我相信其他容器也可以。

为什么是这样？（顺便说一句，我应该提到 ItemsControl 在 ScrollViewer 中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:01:19.333

对于要换行的文本，您需要`restrict the size of the textBlock`在文本超过限制限制时换行。但是由于您的 textBlock 外部有 scrollViewer，因此它的大小没有限制，因此没有换行。您需要设置`HorizontalScrollBarVisbility to Collapsed or Hidden`以限制文本的大小并因此换行。

# pdf - Glyph width in Open Type font

> ID：11975349
> 
> 赞同：4
> 
> 时间：2012-08-15T18:53:49.060
> 
> 标签：pdf, typography, opentype, fontmetrics

I have MinionPro-Regular.otf file. I working with it's structure. I have found it have:

```
Table 'hhea': reference on 1668 metrics in 'hmtx' table. 
Table 'hmtx': 1668 pairs of hMetrics('advanceWidth', 'leftSideBearing').
Table 'CFF ': 1429 glyph names.
Table 'CFF ': param 'CharStrings' have offset to the index of 1668 elements. 
              Each element consist the Width property if it is not the same 
              as DefaultWidth. 
```

CFF specification told as, that OTF font total glyphs quantity (or just presented in CFF stream of PDF file if the font is embedded) has to be:

1.  with predefined ISO Adobe charset (228 names) `1429 + 228 = 1649`;
2.  with predefined "Expert" charset (115 names) `1429 + 115 = 1544`;
3.  with predefined "Expert Subset" charset (86 names) `1429 + 116 = 1515`.

The closest to 1668 number is 1649, but the difference 19 means I lost some thing important in this indexing idea.

*The questions are:*

1.  Where is relation between the names INDEX and the metrics/charstrings INDEX?
2.  Where is the FLAG, what kind of predefined charset in use?

**IMPORTANT UPDATE**

The Charsets do not matter! It was the wrong way!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T06:43:29.793

好的，我终于明白了！

![](../Images/4c72c2548001d180ca714579f7408ad3.png)

高分辨率：[https ://docs.google.com/drawings/pub?id=1gM7gs-ibJ_0qsUrsxIkF5rYUmC9Ix2F9WD9d3aqwc0g&w=1209&h=1179](https://docs.google.com/drawings/pub?id=1gM7gs-ibJ_0qsUrsxIkF5rYUmC9Ix2F9WD9d3aqwc0g&w=1209&h=1179)

*它是如何工作的：*

开放式字体文件 (OTF) 由`hhea`带有参数的`numberOfHMetrics`表格`hmtx`和带有字体中每个字形的水平度量数组的表格组成。

`CFF`表由字符串数组组成。`version`, `Notes`, `FullName`,`FamilyName`参数有 0...1428 个字形名称和 1429...1432 个字符串值。我的理解是，这 4 个字符串总是额外的。

现在我们有了`Predefined Standard Strings`- 全世界所有开放式字体都通用。如上所述，该表有 0...378 个常用字形名称和 379...390 个额外参数名称。

现在我们必须将两个名称表合并到一个数组中。预定义名称表的第一个元素，包括`.nondef`元素（这对我来说很奇怪，因为它是系统“无”，但正如我们看到的水平度量 500）和整个 CFF 字符串数组，除了参数的名称。元素的总数必须是`numberOfHMetrics`。

我浪费了 60 个小时来了解整个情况。

# sdl - SDL2 Initialisation SDL_INIT_VIDEO unkown error

> ID：11975353
> 
> 赞同：1
> 
> 时间：2012-08-15T18:54:05.337
> 
> 标签：sdl, d

When running the following D code I get a strange SDL error:

```
import std.string;
import derelict.sdl2.sdl;

pragma(lib, "DerelictUtil");
pragma(lib, "DerelictSDL2");

int main(){
        DerelictSDL2.load();
        if(SDL_Init(SDL_INIT_VIDEO) < 0){
        throw new Exception(format("Error initalizing SDL: %s", SDL_GetError()));
        } 
        return 0;
} 
```

Which returns the following from SDL_GetError()

```
object.Exception@min.d(12): Error initalizing SDL: 7F2802391940
----------------
./min(extern (C) int rt.dmain2.main(int, char**).void runMain()+0x1c) [0x434284]
./min(extern (C) int rt.dmain2.main(int, char**).void tryExec(scope void delegate())+0x2a) [0x433bfe]
./min(extern (C) int rt.dmain2.main(int, char**).void runAll()+0x3b) [0x4342cb]
./min(extern (C) int rt.dmain2.main(int, char**).void tryExec(scope void delegate())+0x2a) [0x433bfe]
./min(main+0xd1) [0x433b89]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f28023b776d]
---------------- 
```

I am running this against the latest version of SDL2, built from mercurial. The d code is compiled with dmd v2.060\. It looks like the number 7F2802391940 is garbage, but calling SDL_ClearError beforehand still produces a similar hex error message.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:54:00.200

`7F2802391940`可能是错误消息的地址（存储为以空字符结尾的字符串）。D 的`format`函数不理解这些（或者更确切地说，将它们视为任何其他指针），因此将其显式转换为 D 字符串`text(SDL_GetError())`（不要忘记 import `std.conv`）。

# javascript - 在 Chrome 中调用 HTML5 视频 .ended 事件，但不是 FF

> ID：11975357
> 
> 赞同：0
> 
> 时间：2012-08-15T18:54:13.613
> 
> 标签：javascript, jquery, google-chrome, html5-video

我有一点 jquery 作用于 html5/video.js 视频标签：

```
$("#video").one("ended", function() {
    various animations on page;
} 
```

动画在 Chrome 中运行，但不是 FF。其他 javascript 工作，和 .bind/.on 做同样的事情。视频播放良好。Firebug 没有发现任何错误。需要注意的是，Firefox 无法播放 mov/mp4 文件，所以它回退到我指定的 ogg。没有循环，自动播放已打开。

任何人？谢谢各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:40:24.323

当 video.js 退回到 Firefox 的 ogg 视频时，它会将视频包装在不同的 div 中（但不是在 chrome 中）。刚刚选择它，它工作。

# jquery - 限制滚动到元素jQuery

> ID：11975359
> 
> 赞同：0
> 
> 时间：2012-08-15T18:54:17.673
> 
> 标签：jquery, scroll, limit

我的目标是让社交分享栏随着页面从一个元素滚动到另一个元素。您可以在这里查看我的进度[http://ossian.statenews.com/~matt/statenews-redesign/docs/article.html](http://ossian.statenews.com/~matt/statenews-redesign/docs/article.html)。现在元素一直滚动到底部，我想滚动到“相关故事”的顶部。这是我的 jQuery：........

```
$(document).ready(function() {
 var $sidebar   = $("#sharebox"),
 $window    = $(window),
 offset     = $sidebar.offset(),
 topPadding = 50;

 $window.scroll(function() {
    if ($window.scrollTop() > offset.top) {
        $sidebar.stop().animate({
        marginTop: $window.scrollTop() - offset.top + topPadding  
        });
    } else {
    $sidebar.stop().animate({
    marginTop: 0
    });
    }
 });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:23:31.317

如果您使用块的固定位置，这将是更好的用户体验，例如

```
$(document).ready(function() {
    var $sidebar   = $("#sharebox"),
    $window    = $(window),
    offset     = $sidebar.offset(),
    topPadding = 50,
    $leadStory  = $('.leadstory');
    $relatedStories  = $('.related-stories');

    $sidebar.css({
        position : 'fixed',
        'margin-left' : 0,
        left : offset.left,
        top : offset.top
    });

    var criteria = $relatedStories.offset().top - $sidebar.height();
    $window.scroll(function() {
        if ($window.scrollTop() > criteria) {
            $sidebar.css({
                top : offset.top - ($window.scrollTop() - criteria)
            });
        } else {
            $sidebar.css({
                top : offset.top
            });
        }
    });
}); 
```

查看上面的新版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:03:00.713

您的`if`声明仅检查`window`滚动条，您也应该检查`.related-stories`。

```
if ($window.scrollTop() > offset.top && $window.scrollTop() < $('.related-storie').scrollTop()) {
    $sidebar.stop().animate({
        marginTop: $window.scrollTop() - offset.top + topPadding  
    });
} 
```

# javascript - 如何强制颜色框始终以与浏览器大小无关的相同边框大小打开？

> ID：11975360
> 
> 赞同：0
> 
> 时间：2012-08-15T18:54:26.673
> 
> 标签：javascript, jquery, plugins, border, colorbox

我需要自定义一个颜色框：我想强制颜色框图像以完全需要的高度打开，使其顶部边框为 70 像素，底部边框为 50 像素，位于固定的居中位置。

强制它使用浏览器重新缩放也很好 - 但那是另一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:39:08.103

好的 - 所以我使用以下 CSS 制作了它：

```
#colorbox{
    top:0px !important;
}
#cboxWrapper{
    background:none repeat scroll 0 0 transparent;
    border-radius:none;
}

#cboxTopLeft, #cboxTopCenter,#cboxTopRight{
    height:70px;
    background-color:transparent;
    width:0;
}
#cboxMiddleLeft, #cboxMiddleRight{
    height:0;
    width:0;
}
#cboxContent{
    margin: 0 50px 22px 50px;
}

    #cboxLoadingOverlay,
    #cboxLoadingGraphic,
    /*#cboxTitle,*/
    #cboxCurrent,
    #cboxNext,
    #cboxPrevious,
    #cboxClose{ 
        visibility:hidden;
        display:none;
    } 
```

# php - 使用 xeround、heroku、php

> ID：11975363
> 
> 赞同：0
> 
> 时间：2012-08-15T18:54:36.600
> 
> 标签：php, mysql, heroku, xeround

我正在尝试使用 php 在 heroku 中开发一个 PHP 应用程序......

我已经使用链接添加了附加内容 - [https://devcenter.heroku.com/articles/xeround#connecting-to-xeround](https://devcenter.heroku.com/articles/xeround#connecting-to-xeround)。

现在，我试图查询数据库 yung 只是一个简单的查询，但甚至没有显示任何错误。

我可以知道是否仍需要连接字符串吗？如果需要，我可以知道作为主持人放什么吗？

如果需要任何后续问题，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:13:40.813

你可以试试这个：

```
$url=parse_url(getenv("DATABASE_URL"));

$server = $url["host"];
$username = $url["user"];
$password = $url["pass"];
$port = $url["port"];
$db = substr($url["path"],1);

$link = mysql_connect($server . ":" . $port, $username, $password);
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully'; 
```

[来源：[https://devcenter.heroku.com/articles/cleardb#using-cleardb-with-php]](https://devcenter.heroku.com/articles/cleardb#using-cleardb-with-php)

希望能帮助到你 ：）

# perl - 安装 Mead 软件时 Open2 Api 失败

> ID：11975364
> 
> 赞同：0
> 
> 时间：2012-08-15T18:54:38.327
> 
> 标签：perl, perl-module

我在尝试安装名为 MEAD 的软件时遇到了一些问题。如果有人可以看看，我将不胜感激。

安装时出现以下错误

/mead/bin # ./mead.pl GA3

使用系统 rc 文件：/home/karosh/mead/bin/../.meadrc

警告：找不到用户 rc-file 集群：/home/karosh/mead/bin/../data/GA3/GA3.cluster

open2：/home/karosh/mead/bin/driver.pl 的 exec 在 ./mead.pl 第 230 行失败

mead 软件不是我写的，所以我没有更改任何 perl 脚本。我在 driver.pl 文件中的第 230 行是

```
sub run_mead {

    my %options = @_;

    my $reader = FileHandle->new();
    my $writer = FileHandle->new();

    unless ( open2($reader, $writer, "$FindBin::Bin/driver.pl") ) {
        die "Unable to run MEAD.\n";
    }
...
...

} 
```

此错误是否意味着未找到 open2 。蜂蜜酒的人在文件中放入了以下行：

```
use strict;

use File::Spec;

use FileHandle; 

use IPC::Open2; 
```

或者这是否意味着我需要安装包含 API 的 rpm。我看到这个 API 是核心 perl 包[http://perldoc.perl.org/IPC/Open2.html](http://perldoc.perl.org/IPC/Open2.html)的一部分。那么为什么没有安装呢？我需要重新安装 perl 吗？

有人早些时候遇到过这个问题 - [http://www.summarization.com/~radev/mead/email/0160.html](http://www.summarization.com/~radev/mead/email/0160.html) 但该解决方案对我不起作用。我没有找到带有不正确 perl 指令的 Perl 文件。米德团队已经解散了，没有人问问题，但我需要使用这个软件。

我认为如果有人可以向我解释错误的含义，那么我可以做的更深入。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:06:49.500

这可能意味着`.../driver.pl`没有执行权限。更改文件权限或将其称为

```
open2($reader, $writer, "perl $FindBin::Bin/driver.pl")
open2($reader, $writer, "$^X $FindBin::Bin/driver.pl") 
```

# javascript - 按顺序遍历 DOM 叶

> ID：11975369
> 
> 赞同：0
> 
> 时间：2012-08-15T18:54:49.363
> 
> 标签：javascript, html, dom

我正在寻找遍历特定元素的叶子的最有效方法。例如：

```
<div id='root'>
  <ul>
    <li>One</li>
    <li>Two</li>
  </ul>
  <div>
    <p>Paragraph</p>
    <div>
      <b>
        <i>Text</i>
      </b>
      <u>Underline</u>
    </div>
  </div>
</div> 
```

我应该得到一个数组：`[<li>One</li>, <li>Two</li>, <p>Paragraph</p>, <i>Text</i>, <u>Underline</u>]`。理想情况下，它会按照这个顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:16:55.017

普通的“旧”Javascript

```
(function() {
    var nodes = document.querySelectorAll("#root *"),
        result;

    result = [].slice.apply(nodes).filter(function(i) {
        return i.childNodes.length === 1 && i.firstChild.nodeType === 3;
    })

    console.log(result);
}())​ 
```

[例子](http://jsfiddle.net/MPdrZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:01:05.527

不是那么优雅，但我认为这应该可行（如果允许使用 jQuery）：

```
$('#root *').filter(function() {
    return $(this).children().length === 0;
}); 
```

演示：http: [//jsfiddle.net/9nFQ8/1/](http://jsfiddle.net/9nFQ8/1/)

# scala - 如何将@ConstructorProperties 应用于Scala 中的案例类？

> ID：11975376
> 
> 赞同：2
> 
> 时间：2012-08-15T18:55:16.623
> 
> 标签：scala, xml-serialization

我想将 XMLEncoder/XMLDecoder 的序列化支持添加到 Scala 中的案例类中。这是我的尝试：

```
@ConstructorProperties(Array("sequenceNumber", "nanosecondsTotal", "bytesTotal", "timeMillis"))
final case class IoStatistics(
  @BeanProperty sequenceNumber: Long,
  @BeanProperty nanosecondsTotal: Long,
  @BeanProperty bytesTotal: Long,
  @BeanProperty timeMillis: Long = System.currentTimeMillis
) {
  ...
} 
```

我可以使用 javap 验证生成的类确实具有公共的四参数构造函数和属性的适当 bean getter。但是，当尝试使用序列化实例时，`XMLEncoder`我得到以下控制台输出：

```
java.lang.InstantiationException: net.java.truevfs.ext.jmx.model.IoStatistics
Continuing ...
java.lang.Exception: XMLEncoder: discarding statement XMLEncoder.writeObject(IoStatistics);
Continuing ... 
```

输出是：

```
<?xml version="1.0" encoding="UTF-8"?>
<java version="1.7.0_06" class="java.beans.XMLDecoder">
</java> 
```

似乎注释未应用于构造函数。我该如何验证和解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:16:31.943

我对 XML 序列化一无所知，但也许您应该将`ConstructorProperties`注释应用于构造函数而不是类？

```
case class Foo @ConstructorProperties(Array("sequenceNumber", "nanosecondsTotal", "bytesTotal", "timeMillis"))(
  @BeanProperty sequenceNumber: Long,
  @BeanProperty nanosecondsTotal: Long,
  @BeanProperty bytesTotal: Long,
  @BeanProperty timeMillis: Long = System.currentTimeMillis
) {
  //...
} 
```

# php - 使用 $variable 作为索引取消设置 PHP SIMpleXML 节点

> ID：11975377
> 
> 赞同：0
> 
> 时间：2012-08-15T18:55:19.967
> 
> 标签：php, simplexml

使用变量索引而不是数字索引时，我在取消设置 SimpleXML 节点时遇到问题。

这是我调用 simpleXML 的代码：

```
$highlights = new SimpleXMLElement($prj['project_xmldata']);
$node=$_POST['node'];
if(count($highlights->highlights->highlight)>0) {
   unset($highlights->highlights->highlight[$node]);
   print_r($highlights);
} 
```

print_r 语句的内容仍然显示原始 XML 数据。但是，如果我使用数字索引而不是变量来取消设置节点，`$node`我会得到正确的响应，并删除我取消设置的节点。

我也尝试用双引号封装变量，并确保 $_POST['node'] 是正确的值。我做错了什么，或者我不能在方括号内放一个变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:01:01.993

将您的代码更改为此并让我知道它的内容：

```
$highlights = new SimpleXMLElement($prj['project_xmldata']); 
$node=$_POST['node']; 
if(isset($highlights->highlights->highlight[$node])) {    
    unset($highlights->highlights->highlight[$node]);    
    print_r($highlights); 
} 
else
    echo $node." = ".gettype($node); 
```

确保该节点是正确的。确保它被注册为 int 而不是字符串。

$variable[0] 不同于 $variable["0"]

# c# - 按钮在 != if 语句上不起作用

> ID：11975381
> 
> 赞同：0
> 
> 时间：2012-08-15T18:55:26.500
> 
> 标签：c#, winforms

我正在尝试在 c# 中复制 Mastermind 游戏并且遇到了障碍，可以这么说。我面临的问题是玩家 2 从可用的 6 个复选框中猜测哪些 3 个复选框是正确的。（8 行 8 次尝试/猜测生命）。The code I have works when player 2 guesses the correct checkboxes, however when the incorrect checkboxes are selected and the "guess" button is clicked nothing happens. 我有第二个 if 语句来检查这一点，但显然肯定有问题。按钮点击事件的代码是：

```
 private void Guess_button_Click(object sender, EventArgs e)
 {
     int boxesChecked = 0;   // Default value

     CheckBox[] checkBoxArray = new CheckBox[] 
         { checkBox1, checkBox2, checkBox3, checkBox4, checkBox5, checkBox6 };

     for (int i = 0; i < checkBoxArray.Length; i++)
     {
         if (checkBoxArray[i].Checked)
             boxesChecked++;
      }

      if (boxesChecked > 3)
          MessageBox.Show("You have checked " + boxesChecked.ToString() + 
              " checkboxes. Only 3 are allowed.");
      else if (boxesChecked < 3)
          MessageBox.Show("You have checked " + boxesChecked.ToString() + 
              " checkboxes. Please choose 3.");

      if (checkBox1.Checked == cb1)
          if (checkBox2.Checked == cb2)
              if (checkBox3.Checked == cb3)
                  if (checkBox4.Checked == cb4)
                      if (checkBox5.Checked == cb5)
                          if (checkBox6.Checked == cb6)
                          {
                              MessageBox.Show("Congratulations, You Win!", 
                                  "Game Won"); 

                              if (MessageBox.Show("Would you like to play again?", 
                                  "Play Again?", MessageBoxButtons.YesNo) == DialogResult.Yes)
                              {
                                  p1input restart = new p1input();
                                  this.Close();   // Close current window
                                  restart.Show(); // Open restart (instance of p1input)
                              }
                              else
                              {
                                  Environment.Exit(0);    // Terminate Application
                              }

    if (checkBox1.Checked != cb1)
        if (checkBox2.Checked != cb2)
            if (checkBox3.Checked != cb3)
                if (checkBox4.Checked != cb4)
                    if (checkBox5.Checked != cb5)
                        if (checkBox6.Checked != cb6)
                        {
                            MessageBox.Show("Unlucky, Guess Again!");
                            checkBox1.Visible = false;
                            checkBox2.Visible = false;
                            checkBox3.Visible = false;
                            checkBox4.Visible = false;
                            checkBox5.Visible = false;
                            checkBox6.Visible = false;
                        }
    }                              
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T19:09:51.587

好了，走吧。在您的代码中有几件事需要查看：

**1\. 勾选了多少个复选框？**

让我们用一个小兰巴让它`for`更漂亮一点：

```
boxesChecked = checkBoxArray.Where<CheckBox>(x => x.Checked).Count(); 
```

**2.如果用户没有选中3个复选框，让我们显示消息并留下方法！**

它也有点简化，您可能希望更改它：

```
 if (boxesChecked != 3)
        {
            MessageBox.Show(string.Format("You have checked {0} checkboxes. Please choose 3.", boxesChecked));
            return;
        } 
```

**3.验证结果**

让我们稍微改变`if`一下。注意主要`else`条件（玩家输了！）：

```
 if (checkBox1.Checked == cb1
            && checkBox2.Checked == cb2
            && checkBox3.Checked == cb3
            && checkBox4.Checked == cb4
            && checkBox5.Checked == cb5
            && checkBox6.Checked == cb6)
        {
            MessageBox.Show("Congratulations, You Win!", "Game Won"); // Display MessageBox

            if (MessageBox.Show("Would you like to play again?", "Play Again?", MessageBoxButtons.YesNo) == DialogResult.Yes)
            {
                p1input restart = new p1input();
                this.Close();   // Close current window
                restart.Show(); // Open restart (instance of p1input)
            }
            else
            {
                Environment.Exit(0);    // Terminate Application
            }
        }
        else
        {
            MessageBox.Show("Unlucky, Guess Again!");
            checkBox1.Visible = false;
            checkBox2.Visible = false;
            checkBox3.Visible = false;
            checkBox4.Visible = false;
            checkBox5.Visible = false;
            checkBox6.Visible = false;
        } 
```

请注意，我并不是说这是游戏的最佳设计，我只是指出您的代码需要更改的一些地方。

* * *

**更新**

根据花费者的评论，让我们回顾一下您的方法。请检查一下：

```
 private void Guess_button_Click(object sender, EventArgs e)
    {
        int boxesChecked = 0;   // Default value

        List<CheckBox> AllTheCheckBoxes = new List<CheckBox> { checkBox1, checkBox2, checkBox3, checkBox4, checkBox5, checkBox6 };

        boxesChecked = AllTheCheckBoxes.Where<CheckBox>(x => x.Checked).Count();

        if (boxesChecked != 3)
        {
            MessageBox.Show(string.Format("You have checked {0} checkboxes. Please choose 3.", boxesChecked));
            return;
        }

        if (AllTheCheckBoxes.Any<CheckBox>(x => x.Checked != Convert.ToBoolean(x.Tag)))
        {
            MessageBox.Show("Unlucky, Guess Again!");

            AllTheCheckBoxes.ForEach(x => x.Visible = false);

            return;
        }

        MessageBox.Show("Congratulations, You Win!", "Game Won"); // Display MessageBox

        if (MessageBox.Show("Would you like to play again?", "Play Again?", MessageBoxButtons.YesNo) == DialogResult.Yes)
        {
            p1input restart = new p1input();
            this.Close();   // Close current window
            restart.Show(); // Open restart (instance of p1input)
        }
        else
        {
            Environment.Exit(0);    // Terminate Application
        }
    } 
```

请注意，我正在使用该`Tag`属性。这是一个任意字符串，开发人员可以将其用于任何目的。在这里，我期望正确的值（`true`或`false`）存储在此属性中。

* * *

**更新 2**

关于关于查找所有复选框的 OP 评论（看起来总共有 48 个）。您可以使用以下语句（理解它并根据您的需要改进它）。

```
List<CheckBox> AllTheCheckBoxes = this.Controls.AsQueryable().OfType<CheckBox>().Where(x => x.Tag != null).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:03:59.233

当用户猜测正确时，您对不正确值的检查似乎位于 if 语句的大括号内。

换句话说，它永远不会被击中。您需要将其从大括号中取出，以便它运行。

就像其他人说的那样，所有那些嵌套的 if 最终都会伤害到你。考虑清理那一点，以便您可以更好地了解正在发生的事情。

# c# - Utility/Helper 无状态静态类 vs 无状态非静态类

> ID：11975386
> 
> 赞同：5
> 
> 时间：2012-08-15T18:55:57.660
> 
> 标签：c#, .net

从内存分配的角度来看，创建无状态静态实用程序类与无状态非静态实用程序类之间有什么区别吗？根据我的理解，静态类实际上可能更好，因为不会在 GC Heap 上分配对象。只有方法表将在高频堆上创建，而对于非静态类，将在 GC 堆上创建一个对象，同时在 HF 堆上创建一个方法表。需要你们的帮助来确认它，如果我遗漏了任何其他注意事项，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T19:41:05.970

是的。如果方法都是静态的，那么托管堆上不会有任何实例。每次调用时，您将直接引用该类型并访问它的成员，而无需在堆上分配内存。

如果您有一个实例类，那么每次创建实例时，都会在堆上产生成本。如果您也没有保留参考，那么您将在 CLR 的第 0 代中出现高流失率。这假设您将创建大量对象来进行这些调用。

当然，如果您正在实现[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)，那么成本会很小，因为您只会实现对象的*单个*实例。

然而，这一切都没有实际意义，因为它是一个[微优化](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)；除非您发现自己创建了大量的这些对象来执行此功能，并且通过分析确定您确实*有问题*，否则应该是最容易维护的问题。

不过，我会说，如果一个方法是无状态的，并且它自然看起来会在现有类型上运行，那么我通常会编写一个[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)；它是一个静态调用，但给出了一个实例调用的外观，对于某些人（以及我个人）来说，它的代码流程比直接从类型调用静态方法要好得多（尤其是当它使我能够设计一个[流畅的接口](http://en.wikipedia.org/wiki/Fluent_interface)时） .

# java - Spring WebFlow2 .. 动作状态？

> ID：11975395
> 
> 赞同：0
> 
> 时间：2012-08-15T18:56:19.420
> 
> 标签：java, spring, spring-webflow

我正在使用 Spring WebFlow2，我想使用一个动作状态来调用我的控制器并检查一些服务器端代码，然后根据返回代码做一些事情..

我应该使用动作状态吗？

这是我的流程代码：

```
<action-state id="isMemeber">
     <evaluate expression="FlowActions.isMemeber(member)" />
     <transition on="SUCCESS" to="endStateMemeberExists" />
     <transition on="FAIL" to="isDeceased" />
</action-state> 
```

这是我的Java代码：

```
public void isMemeber(Member customer)
    {

    } 
```

如何返回 SUCCESS 或 FAIL for Web Flow 知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:48:26.117

做这个：

```
<action-state id="isMemeber">
   <evaluate expression="FlowActions.isMemeber(member)" />
   <transition on="yes" to="endStateMemeberExists" />
   <transition on="no" to="isDeceased" />
 </action-state>

public boolean isMemeber(Member customer)
{

} 
```

[这是文档的链接](https://docs.spring.io/spring-webflow/docs/current/reference/html/actions.html)

# jboss - 没有可用于处理的 EJB 接收器

> ID：11975396
> 
> 赞同：15
> 
> 时间：2012-08-15T18:56:22.917
> 
> 标签：jboss, ejb, ejb-3.0, jboss7.x

我将 EJB 3.0 与 JBoss AS 7.1.1 Final 一起使用。当我尝试将客户端连接到服务器时出现此错误：

```
Aug 15, 2012 12:05:00 PM org.jboss.ejb.client.EJBClient <clinit>
INFO: JBoss EJB Client version 1.0.5.Final
Exception in thread "main" java.lang.IllegalStateException: No EJB receiver available for handling 
[appName:GrahamsProjServer,modulename:GrahamsProjServer,distinctname:] combination for   invocation context org.jboss.ejb.client.EJBClientInvoc
ationContext@6a340101
    at org.jboss.ejb.client.EJBClientContext.requireEJBReceiver(EJBClientContext.java:584)
    at org.jboss.ejb.client.ReceiverInterceptor.handleInvocation(ReceiverInterceptor.java:119)
    at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:181)
    at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:136)
    at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:121)
    at org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104)
    at $Proxy0.test(Unknown Source)
    at grahamsprojclient.main.Start.testItAll(Unknown Source)
    at grahamsprojclient.main.Start.main(Unknown Source) 
```

这是我的standalone.xml： http: [//pastebin.com/BuvQ6f2H](http://pastebin.com/BuvQ6f2H)

[这是我的](http://pastebin.com/mKpqZuZJ)jboss-ejb-client.properties：http://pastebin.com/mKpqZuZJ

这是我的客户的代码：http: [//pastebin.com/wcVBZvKn](http://pastebin.com/wcVBZvKn)

我的类路径确实包含 jboss-ejb-client.properties。我通过查看清单来确定。

当我启动客户端时，服务器已经在运行，服务器每次都会打印：

`12:05:00,330 INFO [org.jboss.as.naming] (Remoting "h890bp1" task-3) JBAS011806: Channel end notification received, closing channel Channel ID 2ea5a90b (inbound) of Remoting connection 11d4c3d5 to /127.0.0.1:51992`

我已经解决这个问题好几天了，还没有找到解决方案。任何帮助将不胜感激。如果您需要我发布的任何其他信息，请不要犹豫，我会立即发布。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-15T20:04:47.847

我找到了解决方案！我所需要的只是将此行添加到我的客户端代码中：`jndiProperties.put("jboss.naming.client.ejb.context", true);`

我在对这个问题发表的评论中找到了它：[https ://community.jboss.org/message/747360?_sscc=t](https://community.jboss.org/message/747360?_sscc=t)

# java - Proguard 混淆和泛型方法

> ID：11975397
> 
> 赞同：9
> 
> 时间：2012-08-15T18:56:24.700
> 
> 标签：java, android, generics, obfuscation, proguard

我正在尝试使用 ProGuard 混淆 Android 应用程序。

我在这里上课

```
public class Book implements DBbinded 
```

和一个通用的方法

```
private void storeDBObjects(ArrayList<? extends DBbinded> dbObjects) 
```

调用此方法会在混淆后抛出 java.lang.ClassCastException: java.util.LinkedHashMap。我应该在 proguard.properties 中写什么来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-18T13:00:28.680

我刚刚遇到这个问题，并通过在`-keepattributes`ProGuard 参数下指定“签名”属性来解决它。

```
-keepattributes SourceFile,LineNumberTable,Signature,*Annotation* 
```

我不相信这是一个 ProGuard 错误。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:24:35.317

这可能是 ProGuard 中的一个错误。您应该检查安装[最新版本是否有](http://sourceforge.net/projects/proguard/files/)帮助（此时 ProGuard 4.9 beta1：在 android-sdk/tools/proguard/lib 中复制 proguard4.9beta1/lib/proguard.jar）。[否则，您可以在ProGuard 的 bug tracker](http://sourceforge.net/tracker/?group_id=54750&atid=474704)上报告问题。

# numerical-analysis - 编程和数值分析

> ID：11975402
> 
> 赞同：2
> 
> 时间：2012-08-15T18:57:06.693
> 
> 标签：numerical-analysis

我在秋季上一门数值分析课，主要是应用/编程倾向。我有一个马马虎虎的编程背景（上过几门课并在实习中从事过 Java 编程），但我想在开始这门课之前提高我的技能。所以我的问题是，*哪些编程技能对数值分析有用*？

数据结构、OOP、算法很重要吗？你有什么资源可以推荐我在上课前翻阅吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:59:33.327

算法和数据结构。没有那么多面向对象。在我上大学的数值分析课程中，我们用 python 和 Matlab 做了很多算法编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-19T11:12:27.617

如果您想进行数值分析快速原型设计，最好使用 numpy 和/或 scipy。python 2.7 或版本 3 的 python 教程长约 120 页，可从 docs.python.org 获得，一天之内很容易上手。numpy 和 scipy 需要一些学习。

使用 OOP 的收益可能很大，但需要大量的技能。如果我使用 C++，我会使用 Brian H. Flowers 的书，它可以让你快速介绍应用工程，前 5 章将让你能够编写好的 C++ OOP 类，大约需要 8 个小时的工作，包括编写测试脚本。现在的问题是许多 OOP 包都在标准模板库中。许多人最终重新发明轮子，因为他们不知道什么是可用的。这就是为什么你最好只使用 Python numpy 或 scipy 或者如上所述，只使用 Matlab，因为大多数东西都是预定义的。两种语言都适用于快速原型设计，但如果您想做一些非常复杂的事情，例如生成有限元/有限差分网格，则需要访问 Dongarra 的 BLAS 库。

# vb.net - VS 2010 创建额外的 Settings.Designer 文件

> ID：11975403
> 
> 赞同：0
> 
> 时间：2012-08-15T18:57:10.437
> 
> 标签：vb.net, visual-studio-2010, settings.settings

我正在开发 VS 2010 中的 VB WinForms 应用程序。我的 settings.settings 文件中有一个设置，即数据库连接字符串。我正在尝试更正设置中的错误，但每次进行更正时，VS 都会创建第二个 Settings.Designer.vb 文件 (Settings1.Designer.vb)，而不是保存到 Settings.Designer.vb。

我从 TFS 中签出了 Settings.Designer.vb，并检查了该文件以确保它是可写的。我已经删除了 Settings.Designer.vb 和 Settings1.Designer.vb 文件，然后再次保存了我的设置。这应该已经创建了一个新的 Settings.Designer.vb 文件，并且确实如此，但它没有保存正确的设置。另外，我已经从我的 vbproj 文件中删除了对“Settings1.Designer.vb”的所有引用。

有没有人见过这种胡作非为的行为？你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:15:09.820

弄清楚了。由于我的设置中的连接字符串是应用程序级设置，因此它被复制到 app.config。为了解决这个问题，我不得不：

1.  确保 Settings.Designer.vb 和 app.config 同意
2.  删除任何其他 Settings.Designer.vb 文件，例如 Settings1.Designer.vb
3.  删除 vbproj 文件中对 Settings1.Designer.vb 的任何提及
4.  在 TFS（源代码管理资源管理器）中，确保签入时，不要签入 TFS 认为要添加的新 Settings1.Designer.vb。在源代码管理资源管理器中找到 Settings1.Designer.vb 文件，右键单击它，然后撤消更改。这将使 TFS 忘记您需要添加新文件。

# ruby - PostgreSQL 连接表到键值存储（如京都内阁）

> ID：11975408
> 
> 赞同：0
> 
> 时间：2012-08-15T18:57:26.403
> 
> 标签：ruby, postgresql, nosql, kyotocabinet

我不确定这是什么类型的问题。

京都内阁支持哪些导入格式？

例如，我`t`在 PostgreSQL 数据库中有一个联结表，多对多关系。规模`t`约为2.85亿。

```
t =
X, Y
-----
1, a
1, b
2, a
2, c
3, c
3, d
4, b
4, e 
```

什么是最简单、最快捷的导出方式，然后导入到京都内阁等关键价值商店？

所以我最终得到：

```
db = 
db[1] = [a,b]
db[2] = [a,c]
db[3] = [c,d]
db[4] = [b,e] 
```

我的首选语言是 Ruby。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:45:12.073

要获取值：

```
SELECT x, array_agg(y ORDER BY y)
FROM   t
GROUP  BY x; 
```

产生一个`array`. 如果你想`text`使用`string_agg(y, ',' ORDER BY y)`.
可能更快：

```
SELECT x, array_agg(y)
FROM  (SELECT * FROM t ORDER BY x,y) t
GROUP  BY x; 
```

# sql - SQL Server：重启后在旧行之前插入唯一标识符类型，如何防止？

> ID：11975409
> 
> 赞同：1
> 
> 时间：2012-08-15T18:57:25.697
> 
> 标签：sql, sql-server, indexing, guid, uniqueidentifier

我有一个使用 a`uniqueidentifier`作为聚集主键的 SQL Server 表。创建表并插入几行后，我重新启动了服务器。该列`NEWSEQUENTIALID()`用作其默认值。

然而，在重新启动后，下一次插入创建了一个 GUID 值低于之前值的行，导致它出现在`SELECT *`语句的顶部。

我的问题：在使用 GUID 类型的聚集主键时，有什么方法可以防止改组（AKA 保留行的顺序）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:04:01.793

如果要保证时间顺序，请添加一个名为 的列`CreatedDate`，将其设置为不允许 NULL，并将默认设置为`CURRENT_TIMESTAMP`。然后要获取最后 10 行，您可以说：

```
SELECT TOP 10 (*) FROM dbo.foo ORDER BY CreatedDate DESC; 
```

这样你`TOP`就有意义了。没有`ORDER BY`，正如 marc 解释的那样，你`TOP`的结果是没有意义的，虽然结果是相对可预测的（它们不是很随机，我更喜欢“任意”这个词），但它们不会有任何可靠性以相同的顺序排列他们被插入的顺序。无论您使用 GUID 还是整数作为主键都是如此 - 不能保证。

您永远无法保证订单保存`NEWSEQUENTIALID()`，抱歉，这不是它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:06:07.817

文档说它会生成一个新的 guid，保证在 windows 启动后最后一个完成之后。

在其中放置一个添加日期的列，用于订购，只需使用 newid 作为您的 guid。它不仅会起作用，还会为您提供更多信息，并且完全清楚正在发生的事情，更不用说它会使您的设计更便携。

# python - 如何从 Python 中的 TreeView 获取实际的行对象

> ID：11975413
> 
> 赞同：2
> 
> 时间：2012-08-15T18:57:30.497
> 
> 标签：python, gtk, gtk3

我有一个`GtkTreeView`这样的

```
+++++++++++++++++++++++
+ Name     + Age      +
+++++++++++++++++++++++
+ Adam     + 15       +
+ Jane     + 19       +
+ Arnold   + 23       +<
+ Russell  + 10       +
+++++++++++++++++++++++ 
```

如果我选择 Arnold，那么我知道我通过执行以下操作选择了 Arnold

```
selection = self.viewFriends.get_selection()
model, tree_iter = selection.get_selected()
print model[tree_iter][0] 
```

如何获取模型中阿诺德记录对应的实际对象？

`GtkTreeIter`我在调用时收到的对象`get_selected()`始终是一个新对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:50:15.683

您可以将标题设置为可单击，然后将它们的“单击”事件绑定到将获取其行 ID 的函数/方法。然后可以使用此函数将数据成员设置为更改后的 id。

# memory - 无法处理对地址 XXXXXX 数据的内核分页请求

> ID：11975415
> 
> 赞同：2
> 
> 时间：2012-08-15T18:57:33.720
> 
> 标签：memory, kernel, paging

现在我正在做一些 Linux 内核调试。我修改了 CFS 任务调度部分。通常，每次调用函数 schedule() 时，我都会尝试使用指针存储或访问所有现有的 sched_entity（在概念上类似于 task_struct）。然后内核崩溃，错误“无法处理地址XXXXXX的数据的内核分页请求”这是否意味着内核无法访问所有任务信息？内核只能访问调用 schedule() 函数的任务？就像在用户空间中一样，不同的进程有不同的内存空间。我是内核编程的新手，所以如果有人能给我提示，我将不胜感激：> 谢谢，

# jquery - 在 Jquery Image Slider 的初始页面加载时隐藏特定图像

> ID：11975416
> 
> 赞同：3
> 
> 时间：2012-08-15T18:57:37.603
> 
> 标签：jquery, css

我有一个名为 filter.js 的 Jquery 图像滑块插件。[在此处](http://www.jscraft.net/demo/plugins/filters/)查看演示。现在的问题是，最初加载页面时，所有图像都会显示。在初始加载时，我只想显示第一个选项卡/div 的图像，当单击下一个 div/选项卡时，将显示其相关图像。然后我添加的是将不属于第一个选项卡/div 的所有图像的可见性设置为隐藏，一旦激活该功能，我将隐藏的可见性恢复为在其他选项卡/div 的图像上可见：

CSS：

```
.tancan{  /*Note: tancan is the class of the second div I initially want to hide*/
    visibility: hidden;
}​ 
```

JS：

```
$(function(){
        $('.filters.demo1').filters();
        $('.tancan').style.visibility = "visible";
    });​ 
```

我的问题：这样做是行不通的，一旦我将可见性设置为隐藏，

```
$('.tancan').style.visibility = "visible"; 
```

命令不起作用 - 图像保持隐藏状态。我尝试使用 display: none; 和 display: block but tha 创建丑陋的过渡......我怎样才能在页面加载时只显示第一个选项卡的图像而不是全部？

请看我的[JSFIDDLE](http://jsfiddle.net/YapAU/4/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:35:12.033

这对我来说似乎有点 hacky，但它有效：

```
$('.filters.demo1').filters();
$('a[rel=koebana]').click(); 
```

[http://jsfiddle.net/YapAU/21/](http://jsfiddle.net/YapAU/21/)

顺便说一句，我从 css 中取出了最后一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:19:30.593

试试这个：

JS：

```
$(function(){
    $('.filters.demo1').filters();
    $("#tancan").click(function(){             
    $(".tancan").css("visibility", "visible");
    });            
}); 
```

​</p>

HTML：

```
<div id="content">
    <div class="galleryTitle">Photo Gallery</div>    
    <div class="filters demo1">
        <div class="filter">
            <a href="#" rel="koebana">Koebana Spray Tan</a>
            <a href="#" rel="tancan" id="tancan">Vertical Sunbed (TanCan)</a>
        </div>
etc.. 
```

小提琴：http: [//jsfiddle.net/YapAU/19/](http://jsfiddle.net/YapAU/19/)

# javascript - (function(){})() 的问题

> ID：11975422
> 
> 赞同：4
> 
> 时间：2012-08-15T18:58:06.233
> 
> 标签：javascript, jquery, jquery-ui

到目前为止，我已经了解了使用此功能的好处（它是包装吗？）

因此，它几乎就像命名空间一样。假设我们有：

```
( function() {

    function foo(){
        alert(true);
    }

    foo(); //alerts true

})();

( function() {

    function foo(){ //the same title of the function as above
        alert("another call of foo");
    }

    foo(); //alerts, ok.

})(); 
```

另外我注意到它可以访问公共变量，如下所示：

```
var __foo__ = 'bar';

( function() {

    alert(__foo__); //alerts bar

})(); 
```

我对这种方法有几个问题

我试过的：

1.  将 Bing 用于教程（我找到了它们，但其中许多没有回答我的问题）
2.  将物体传递到身体中
3.  在这里找到答案

但是，我还在用头撞墙

所以问题是：

我见过人们将对象作为参数传递，但是什么时候有意义呢？例如，它是什么意思？

1.  ```
    ( function(window) {

    })(document); 
    ```

2.  我在 Jquery UI Lib 中看到了这样的东西

    ```
    ( function($) {
        //some code of widget goes here
    })(Jquery); 
    ```

这使得内部代码在函数外部可见，对吗？（不确定）为什么，这是因为我们可以访问对象（比如我们有“模态”小部件），只需调用它，

像：

```
$(function(){

    $("#some_div").modal(); //here it's object the we got from the function
}); 
```

第二个问题是：它是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:07:07.147

> 我见过人们将对象作为参数传递，但是什么时候有意义呢？例如，它是什么意思？
> 
> ```
> ( function(window) {
>  })(document); 
> ```

该语言不会将立即调用函数的参数与其他函数的参数区别对待。

每当您希望在函数体中使用本地名称作为输入时，使用参数是有意义的。在这种情况下，它有点令人困惑，因为`window`并且`document`很可能会感到困惑。

* * *

> ```
> ( function($) {
>      //some code of widget goes here
> })(Jquery); 
> ```
> 
> 这使得内部代码在函数外部可见，对吗？（不确定）为什么，这是因为我们可以访问对象（比如我们有“模态”小部件），只需调用它，

不，它本身不会使任何代码在小部件之外可见。它只是一个参数定义，它为全局变量提供了一个新的本地名称。

使内部代码在外部可见的原因是将其附加到外部对象，如

```
$.exportedProperty = localVariable; 
```

这是 jQuery 代码中的常见约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:08:21.000

在您的第一个问题上，我认为您没有看到窗口和文档，但更像是：

```
(function(doc) {
    var fubar = doc.getElementById("fubar"); // === document.getElementById("fubar")
})(document); 
```

你有一个自调用函数（或闭包），其参数与任何函数一样：

```
var b = function(str) { alert(str); }
b('hi there') //alert('hi there'); 
```

上面的代码也是如此，但我们只是在创建它时立即调用该方法。

您拥有的其他代码：

```
( function($) {
    //some code of widget goes here
})(Jquery); 
```

是保留`$`metod中的变量来引用jQuery对象，如果你有更多的框架或`$`用其他东西替换对象，这非常方便，该方法中的所有内容都`$`将引用jQuery对象而不是其他任何东西（如果你不要在代码中替换它）。

编码：

```
$(function(){
    $("#some_div").modal(); //here it's object the we got from the function
}); 
```

正在调用 jQuery 及其[$(document).ready的快捷方式](http://api.jquery.com/ready/)

它将调用该方法：

```
function(){
    $("#some_div").modal(); //here it's object the we got from the function
} 
```

DOM 准备好后

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:10:10.470

该模式称为**闭包**。在以下情况下使用模块或函数是有意义的：

1.  希望避免污染全局范围的变量
2.  希望避免使用全局范围的变量并避免其他代码污染它们

对于每个示例，首先采用以下模式：

```
(function(window) {
    // ...
})(window); 
```

闭包内的所有东西都可以像使用局部变量一样使用*window 。*

接下来，使用 JQuery 符号采用相同的模式：

```
(function($) {
    // ...
})($); 
```

如果您有一些代码依赖于像 $ 这样的符号/命名空间，但是另一个模块重新分配了它，它可能会搞砸您的代码。使用这种模式可以通过允许您将符号注入到闭包中来避免这种情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T19:11:04.090

每当您将参数传递给该包装函数时，这样您就不会弄乱应用程序中可能存在的任何其他库或全局变量。

例如，您可能知道 jQuery`$`用作调用自身的符号，并且您可能还有另一个库，它也将`$`用于调用 itselt，在这种情况下，您可能无法引用您的库。所以你会像这样解决它：

```
(function($){
// here you're accessing jQuery's functions
$('#anything').css('color','red');
})(jQuery);

(function($){
    // and in here you would be accessing the other library
    $.('#anything').method();
})(otherLibrary); 
```

这在您制作 jQuery 或任何其他类型的库插件时特别有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T19:11:35.390

它的作用是允许您`$`在函数内部使用变量代替`jQuery`变量，即使该`$`变量被定义为函数外部的其他内容。

例如，如果您同时使用 jQuery 和 Prototype，您可以使用`jQuery.noConflict()`来确保 Prototype`$`仍然可以在全局命名空间中访问，但在您自己的函数中，您可以使用`$`来引用 jQuery。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T19:46:00.997

传入window和document对象主要有2个目的，如下图所示

```
(function(window, document){
   // code
}(window, document); 
```

1.  Javascript 可以比全局变量更快地访问局部变量。这种模式实际上使名称`window`和`document`局部变量而不是全局变量，从而使您的脚本稍微快一些。
2.  将这些名称设为局部变量还有另一个好处：缩小器可以重命名它们。因此，如果您缩小上述脚本，本地版本的`window`可能会重命名为`a`并且`document`可能会重命名为`b`，从而使缩小后的脚本更小。如果您将它们作为全局变量引用，这些重命名是不可能的，因为这会破坏您的脚本。

有关更多信息，请查看这些精彩视频

1.  [http://paulirish.com/2010/10-things-i-learned-from-the-jquery-source/](http://paulirish.com/2010/10-things-i-learned-from-the-jquery-source/)
2.  [http://paulirish.com/2011/11-more-things-i-learned-from-the-jquery-source/](http://paulirish.com/2011/11-more-things-i-learned-from-the-jquery-source/)

# scala - storeAs ...triggerBy 如何在 simple-build-tool 中工作？

> ID：11975424
> 
> 赞同：2
> 
> 时间：2012-08-15T18:58:10.480
> 
> 标签：scala, sbt

有使用`storeAs`和`triggeredBy`例程的 SBT TaskKeys。

有3个部分：

*A* storeAs *B*触发由*C*

我怀疑它就像

存储`findManifestPath`到任务完成`manifestPackageName`时`manifestPath`

但是为什么我们不能写`manifestPackageName <<= findManifestPath`呢？

少量样品

```
manifestPackageName <<= findManifestPath storeAs manifestPackageName triggeredBy manifestPath 
```

或者

```
multiJvmTestNames <<= multiJvmTests map { _.keys.toSeq } storeAs multiJvmTestNames triggeredBy compile 
```

或者

```
discoveredMainClasses <<= compile map discoverMainClasses storeAs discoveredMainClasses triggeredBy compile 
```

或者

```
definedTestNames <<= definedTests map ( _.map(_.name).distinct) storeAs definedTestNames triggeredBy compile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-11T01:52:22.630

`storeAs`目前实际上只是作为一个内部 API，但它保留了评估任务的结果，以便以后可以检索它。例如，上面的示例被解析器用于制表符补全。您无法在解析期间评估任务，因此这是采用的方法。

`triggeredBy`是一种安排命令运行的方法，即使它不依赖于任何东西。它主要用于在另一个任务运行时执行副作用。在这种情况下`definedTestNames`，这可确保名称在`test:compile`运行时保持不变。

# intellij-idea - intellij：使用泛型创建数组列表

> ID：11975430
> 
> 赞同：0
> 
> 时间：2012-08-15T18:58:28.250
> 
> 标签：intellij-idea

我曾经有一个选项`Intellij`：它突出显示了以下行：

```
List<String> shipments = new ArrayList(); 
```

并建议将其更改为：

```
List<String> shipments = new ArrayList<String>(); 
```

现在我更改了意图（或检查？）配置中的某些内容，它建议将上面的行更改为：

```
ArrayList shipments = new ArrayList(); 
```

可以做些什么来修复它？

谢谢你

PS：我搜索了intellij options，没有找到任何相关的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:42:23.990

检查您的`Make Type Generic`意图是否已打开（位于设置 -> 意图 -> 声明下）

# ruby-on-rails - 向 ActiveAdmin 添加记录的类似电子表格的方式

> ID：11975432
> 
> 赞同：1
> 
> 时间：2012-08-15T18:58:41.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, activeadmin, best-in-place

我正在寻找一种在 ActiveAdmin 中添加大量记录的方法。更具体地说，我有 2 个模型：商店和程序。商店有许多程序。

我不介意使用标准 ActiveAdmin 创建视图添加商店。但我想要一种更快的方法来以类似电子表格的方式添加程序。我查看了 best_in_place (https://github.com/bernat/best_in_place) 但它并没有添加记录，只是编辑它们。

有什么建议么？我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:19:14.980

简短的回答是 Rails 无法帮助您做到这一点。如果多个对象属于另一个可以接受嵌套属性的对象，Rails 有一个定义的约定来编辑多个对象，其中最重要的是有一个聚合验证的地方，以及区分每组的标准方法字段（ID）。在创建过程中，这些都不是真的。

但是，您可以通过多种方式手动解决此问题。

1.  将是简单地自己写出表格，并将逻辑循环通过它们在您的控制器中。这将是脆弱的，但是，您将在验证正常工作时遇到问题。

2.  要么创建一个新类来处理这种单一情况，要么尝试调整现有的 Store 类来处理嵌套属性。这里有一个关于如何做到这一点的非常可靠的解释[。](https://stackoverflow.com/questions/972857/multiple-objects-in-a-rails-form)

# nsscrollview - NSScrollView 滚动到顶部

> ID：11975434
> 
> 赞同：9
> 
> 时间：2012-08-15T18:58:50.397
> 
> 标签：nsscrollview, scrolltop

有谁知道将 NSScrollView 滚动到顶部的正确方法？我正在寻找与 UIView 的 scrollToTop 方法等效的方法。

这是我到目前为止所拥有的，但在所有情况下都不太正确

```
[self.contentView scrollToPoint:NSMakePoint(0, MAX(contentView.frameHeight, ((NSView*)self.documentView).frameHeight))]; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-03-26T11:31:27.750

为**Swift 5**更新：

如果您的文档视图被翻转：

```
scrollView.documentView?.scroll(.zero) 
```

否则：

```
if let documentView = scrollView.documentView {
        documentView.scroll(NSPoint(x: 0, y: documentView.bounds.size.height))
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T03:16:10.830

终于想通了。奇迹般有效！

```
if ([self hasVerticalScroller]) {
    self.verticalScroller.floatValue = 0;
}

NSPoint newOrigin = NSMakePoint(0, NSMaxY(((NSView*)self.documentView).frame) - self.boundsHeight);
[self.contentView scrollToPoint:newOrigin]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-07T11:14:53.433

这也很好用。设置 NSScrollView 的 documentView 的滚动点

```
NSPoint pt = NSMakePoint(0.0, [[self.scrollView documentView]
                               bounds].size.height);
[self.scrollView.documentView scrollPoint:pt]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-14T08:33:11.100

转换为 Mac OS 的 Swift 时，之前的解决方案会滚动到底部。y 坐标方向在 Mac OS 和 iOS 上翻转。

Mac OS 的 Swift 3 解决方案：

```
scrollView.documentView?.scroll(NSPoint.zero) 
```

# jquery - Jquery .Load点击不起作用

> ID：11975435
> 
> 赞同：0
> 
> 时间：2012-08-15T18:58:51.737
> 
> 标签：jquery

我有一个问题，我很困惑为什么我的代码不起作用，我试图在单击列表项锚标记时将 PHP 文件加载到 div 中。

代码：

```
<script type="text/javascript">
$(document).ready(function() {

//I have these 2 functions aswell that DO work

 $(".itm1 a").click(function(evt) {
     var page = $(this).attr('href');
     $("#page1").load(page);
     evt.preventDefault();
  });

  $(".footnav a").click(function(evt) {
     var page3 = $(this).attr('href');
     $("#page1").load(page3);
     evt.preventDefault();
  });
// ---------------------------

  $(".needslist a").click(function(evt) {
     var page4 = $(this).attr('rel');
     $("#page1").load(page4)
     evt.preventDefault();
  });

});
</script>

<ul>
 <li class="needslist"><span><a rel="/ceos.php" href="#">Are you a CEO SPEECH-MAKER or ENTREPRENEURIAL VISIONARY?</a></span><br />
            who wants the best advice and counsel from an expert coach for your own speeches and leadership events that include speaking to investors, stakeholders, business collaborators, board of directors, conferences and/or the media?</li><br />

 </ul> 
```

谁能解释为什么它不起作用？

**编辑：好的，伙计们，所以我发现一旦我通过 ajax 加载了一个 div，该内容就无法处理 jquery。这是我的问题....如何在加载的内容上执行 jquery 脚本？？？？？？！！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:58:39.987

找到了解决方案：

加载 ajax 内容后，您无法对该加载的内容执行任何脚本，这是我的解决方案：

```
$(".needslist a").live("click", function(evt) {
     var page4 = $(this).attr('rel');
     $("#page1").load(page4);
     evt.preventDefault();
  }); 
```

# javascript - 在 2 个按钮上的单击事件中，使用 jQuery 获取未按下按钮的值

> ID：11975437
> 
> 赞同：2
> 
> 时间：2012-08-15T18:59:02.107
> 
> 标签：javascript, jquery, html, dom, javascript-events

我有 2 个按钮可以分配一个事件。我知道如何捕获单击按钮上的值，但不知道未单击按钮上的值。任何想法将不胜感激。

```
var $b1 = $('<input/>', { 'type': 'button', 'value': '0' });
var $b2 = $('<input/>', { 'type': 'button', 'value': '1' });
var $bm = $b1.add($b2);  
$myDiv.append($bm);      
$bm.on('click', function() {         
    var clicked = $(this).val();
    var not_clicked = ??? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:01:12.687

使用[.not()](http://api.jquery.com/not/)过滤掉当前点击的输入

```
$bm.on('click', function() {         
var clicked = $(this).val();
var not_clicked = $bm.not(this).val();  
// select both buttons.. filter out current clicked with not().. get val() 
```

# java - 如何在 XML、Android 中获取 HTML 值

> ID：11975439
> 
> 赞同：0
> 
> 时间：2012-08-15T18:59:08.797
> 
> 标签：java, android, html, xml, saxparser

您好，我知道这是当前的问题

看看这个，我找不到我做错了什么：

这是我的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<menu>
<item>
    <name>Margherita</name>
    <description>Single cheese topping</description>
</item> 
<item>
    <name>Double Cheese Margherita</name>
    <description>
        <![CDATA[
        <ul>
            <li>item 1</li>
            <li>item 2</li>
            <li>item 3</li>
        </ul>
        <span>Loaded with Extra Cheese</span><br />
        ]]>
    </description>
</item> 
</menu> 
```

我需要将描述作为字符串获取，其中包含 HTML 内容。第一个效果很好，我可以在没有描述的情况下获得描述`<![CDATA[` 但是第二个**是** `<![CDATA[`空的......

这是我的代码：

适配器.java：

```
 XMLParser parser = new XMLParser();

    String xml = null;
    try {
        xml = parser.readTextFile(context.getAssets().open(FILENAME));
    } catch (IOException e1) {
        e1.printStackTrace();
    }

    // getting DOM element
    Document doc = parser.getDomElement(xml); 
    // Extract items from DOM
    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    for (int i = 0; i < nl.getLength(); i++) {
        Element e = (Element) nl.item(i);
        Medoc m = new Medoc();
        // fill Medoc informations
        m.setTitle(parser.getValue(e, KEY_NAME));
        m.setDescription(parser.getValue(e, KEY_DESC)); 
        // save in memory
        data.add(m);
    } 
```

saxParser.java：

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml) {
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if (elem != null){
         if (elem.hasChildNodes()){
             for (child = elem.getFirstChild(); child != null; child = child.getNextSibling()) {
                 if (child.getNodeType() == Node.TEXT_NODE)
                     return child.getNodeValue();
                 else if (child.getNodeType() == Node.CDATA_SECTION_NODE)
                     return child.getNodeValue();
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);
        return this.getElementValue(n.item(0));
    }

 /**
  * Getting XML String from stream
  * @param Element isteam
  * */  
 public String readTextFile(InputStream inputStream) {
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();

    byte buf[] = new byte[1024];
    int len;
    try {
        while ((len = inputStream.read(buf)) != -1) {
            outputStream.write(buf, 0, len);
        }
        outputStream.close();
        inputStream.close();
    } catch (IOException e) {

    }
    return outputStream.toString();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:23:31.570

你的问题在这里

```
if (child.getNodeType() == Node.TEXT_NODE) {
    return child.getNodeValue();
} 
```

CDATA 部分不是文本节点。如果您还想查找 CDATA 部分，则`Node.CDATA_SECTION_NODE`除了`Node.TEXT_NODE`.

# java - 通过绑定服务从 Service 到 Activity 通信

> ID：11975440
> 
> 赞同：3
> 
> 时间：2012-08-15T18:59:09.810
> 
> 标签：java, android, service, android-activity

按照本教程，我已经将一个活动绑定到我的服务。 [http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

我可以调用服务功能，但是如果我想更改我的一些文本视图或禁用一些切换按钮，因为服务（和服务）完成的工作。有一种简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:22:08.957

您可以使用消息在活动和服务之间发送信息。这是发送简单数据的一种简单方法，但如果您需要非常频繁地发送数据或发送复杂数据，则可能不是最佳选择。这是我在我的一个应用程序中的一些代码示例，其中包含一个服务和一个通信活动：

**活动中的代码：**

```
//this is where you set what you want to happen
class IncomingHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
            //this switch reads the information in the message (usually just 
            //an integer) and will do something depending on which integer is sent
            case 1: do_something();
            case 2: do_something_2(); //etc.
            default:
                super.handleMessage(msg);
        }
    }
}

final Messenger myMessenger = new Messenger(new IncomingHandler());

private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className,
            IBinder service) {
        myService = new Messenger(service);
        myCallbackText = (TextView)findViewById(R.id.tv01); //This is a text view which will display status information as needed
        myCallbackText.setText("Attached.");

        try {
            Message msg = Message.obtain(null,
                    1);
            msg.replyTo = mMessenger; //here we send an instance of our messenger implementation as the replyTo address
            mService.send(msg);

            msg = Message.obtain(null,
                    3, this.hashCode(), 0);
            mService.send(msg); //send a message with the value "3"
        } catch (RemoteException e) {
          //nothing you can do if the server isn't active
        }

        Toast.makeText(Service_testActivity.this, R.string.remote_service_connected,
                Toast.LENGTH_SHORT).show();//confirmation that the connection happened successfully
    }

    public void onServiceDisconnected(ComponentName className) {
        // This is called when the connection with the service has been
        // unexpectedly disconnected -- that is, its process crashed.
        mService = null;
        mCallbackText = (TextView)findViewById(R.id.tv01);//same textview as before
        mCallbackText.setText("Disconnected.");

        Toast.makeText(Service_testActivity.this, R.string.remote_service_disconnected,
                Toast.LENGTH_SHORT).show();
    }
}; 
```

**服务中的代码：** 在服务中，您将希望有代码（非常类似于活动中的代码）来接收消息并将`msg.replyTo`字段保存为`Messenger`对象。有一个例子可以让你创建一个对象，然后像这样使用 IncomingHandler：

```
ArrayList<Messenger> mClients = new ArrayList<Messenger>();
class IncomingHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
            case MSG_REGISTER_CLIENT:
                mClients.add(msg.replyTo);
                break;
            case MSG_UNREGISTER_CLIENT:
                mClients.remove(msg.replyTo);
                break;
            default:
                super.handleMessage(msg);
        }
    }
} 
```

这可以让您的服务一次跟踪多个客户端并将消息发送到指定的客户端。要发送消息，只需使用以下内容：

```
mClients.get(1).send(Message.obtain(null, 3, new Random().nextInt(), 0));
//sends a message to the first client saved in the list 
```

# windows - CAsyncSocket 不触发事件？

> ID：11975442
> 
> 赞同：0
> 
> 时间：2012-08-15T18:59:16.497
> 
> 标签：windows, events, networking, event-handling, winsock

我已经从 CAsyncSocket 实现了我的 ClientSocket 类：

```
class ClientSocket : public CAsyncSocket
{
    // this socket sends data back to "backSocket" which points to this only for 
    // testing but it can send data to other sockets like that too.
ClientSocket * backSocket;

    // store some data in backupData untill connection is established.
    StringBuilder * backupData;

public:

virtual void OnClose(int);
virtual void OnReceive(int);
ClientSocket(void);
bool ConnectToBACK();
virtual ~ClientSocket(void);
};

ClientSocket::ClientSocket(void)
{
// DONOT run to back !!! recursive calls otherwise.
backSocket = NULL;
backupData = NULL;
}

bool ClientSocket::ConnectToBACK()
{
if(this->backSocket != NULL)
    return true;

// just for debugging :)
this->backSocket = this;
return true;
}

ClientSocket::~ClientSocket(void)
{
this->Close();
if(this->backSocket)
{
    this->backSocket->Close();
    delete this->backSocket;
    this->backSocket = NULL;
}
}

void ClientSocket::OnClose(int nErrorCode)
{
if(this->backSocket != NULL)
{
    this->backSocket->Close();
}

CAsyncSocket::OnClose(nErrorCode);
}

void ClientSocket::OnReceive(int nErrorCode)
{
if(nErrorCode == 0)
{
    char *buffer = new char[2049];
    int bufLen = sizeof(buffer)/sizeof(buffer[0]);

    int received = this->Receive(buffer, bufLen-1, 0);
    if(received == SOCKET_ERROR)
    {
        return ;
    }

    if(this->ConnectToback())
    {
        if(backupData)
        {
            int backupLen;
            char *backup = backupData->ToString(&backupLen);
            this->backSocket->Send(backup, backupLen);
            delete backupData;
            delete [] backup;
            backupData = NULL;
        }

        this->backSocket->Send(buffer, received);
        delete buffer;
    }
    else
    {
        if(backupData == NULL)
        {
            backupData = new StringBuilder();
        }
        backupData->Insert(buffer, received);
    }
}

CAsyncSocket::OnReceive(nErrorCode);
 } 
```

我没有将任何 GUI 与此相关联，因为我认为它不会产生任何开销。我不需要它。我还在 main 中完成了 AfxSocketIback() ，并从一个线程开始了另一个 ListeningSocket 。

netstat -a 显示在 ListeningSocket 端口正确绑定，状态为 Listening

// ListeningSocket 继承公共 CAsyncSocket

```
 void ListeningSocket::OnAccept(int nErrorCode)
 {
 #ifdef DEBUG
std::cout << "\nOnAccepting Proxy Server :)";
 #endif
if(nErrorCode == 0)
{
    ClientSocket *FromCliet = new ClientSocket();
    FromCliet->value = 100;
    if(this->Accept(*FromCliet, NULL, NULL))
    {
                    // Connection just has ClientSocket * client
        Connection * connection = new Connection(FromCliet);
        // a list<Connection *> is stored in ListeningSocket
                    this->clients.push_front(connection);
    }
    else
    {
        std::cerr << "\nFailed to accept connection from Client";
    }
}

CAsyncSocket::OnAccept(nErrorCode);
 } 
```

在 ListenSocket::OnAccept 中设置刹车点时，它永远不会出现。

编辑：

```
 static DWORD WINAPI StartListening(LPVOID param)
 {
       ListeningSocket *app = (ListeningSocket *)param;
   if(false == app->Create(7897, SOCK_STREAM, 31, "127.0.0.1"))
   {
     std::cerr << "\nCould not create\bind to port";
     delete app;
     return -1;
   }
   if(false == app->Listen())
   {
          std::cerr << "\nCould not listen";
      app->Close();
      delete app;
      return -1;
   }
   return 0;
 }

 int ListeningSocket::Start()
 {
      if(NULL == CreateThread(NULL,0, StartListening, (LPVOID)this,0, NULL))
   {
    return -1;
   }

  return 0;
 } 
```

我没有让它像 MFC 向导解决方案一样。我有简单的项目和 main()。

```
 My ListeningSocket Class is Singletone Class:  
 class ListeningSocket : public CAsyncSocket
 {

    private:
static ListeningSocket * ListeningSocket;
std::list<Connection *> clients;
ListeningSocket(void);

    public:
// overrides
virtual void OnAccept(int);
virtual void OnClose(int);
static ListeningSocket * GetListeningSocket();
virtual ~ListeningSocket(void);
virtual void Close();
int Start(void);
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:39:37.917

我也遇到了同样的问题——有人重新实现了名为 CAsyncSocketEx 的 CAsyncSocket——构建为 CAsyncSocket 的函数替代品。

就在这周，我想看看我是否可以再次使用这段代码，但我遇到了同样的问题。由于异步窗口不是在具有消息循环的线程内创建的，因此事件没有从 WSAAsyncSelect() 触发...

看到这个： http: [//support.microsoft.com/kb/90975](http://support.microsoft.com/kb/90975)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:33:38.813

CAsyncSocket 类在内部使用 Windows 消息来触发事件。您需要在带有消息循环的线程中创建 CAsyncSocket 派生类。在这种情况下，将调用事件。伪代码：

```
// This function runs in the context of worker thread
void MyClass::ThreadFunction()
{
    mySocket.Create(...);    // creating CAsyncSocket-derived class

    // Run message loop.
    BOOL bRes = FALSE;
    MSG msg;

    while((bRes = GetMessage( &msg, NULL, 0, 0 )) != 0)
    { 
        if (bRes == -1)
        {
            break;
        }
        else
        {
            TranslateMessage(&msg); 
            DispatchMessage(&msg); 
        }
    }
} 
```

要停止此线程，请使用 PostQuitMessage 函数。

**编辑**. 假设您熟悉它们，我没有发布所有多线程细节。通常，CreateThread 需要全局函数作为参数（或类静态函数）。要调用常规类方法，请使用“this”作为 CreateThread 参数，该参数作为 void* 传递给全局线程函数。将其转换回类指针并调用常规类方法。

# javascript - 将声明性授权的“without_access_control”与 Cucumber 的 @javascript 一起使用

> ID：11975445
> 
> 赞同：0
> 
> 时间：2012-08-15T18:59:25.147
> 
> 标签：javascript, cucumber, capybara, rack, declarative-authorization

我的`features/support/env.rb`文件中有以下内容：

```
require 'declarative_authorization/maintenance'
World(Authorization::TestHelper) 
```

我在功能文件中有这个：

```
When I view the list of users
Then I see the list of users page 
```

这在一个步骤文件中：

```
When /^I view the list of users$/ do
  without_access_control{ visit users_path }
end

Then /^I see the list of users page$/ do
  current_path.should eq(users_path)
end 
```

一切运行良好，直到我标记该功能`@javascript`，然后我收到错误：

```
expected: "/users"
got: "/users/sign_in" 
```

谁能告诉我`without_access_control`在模式下跑步时如何尊重`@javascript`？

我认为问同样问题的另一种方式是**如何让声明式授权的内置测试助手`without_access_control`在什么`rack_test`时候使用`js=true`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:25:22.473

普遍的共识似乎是这是不可能的，但如果有人证明我错了就会更新！

# c# - 在面向服务的架构中为服务调用定义方法签名的最佳实践是什么？

> ID：11975453
> 
> 赞同：4
> 
> 时间：2012-08-15T18:59:39.630
> 
> 标签：c#, wcf, architecture, soa

在面向服务的架构中开发应用程序时定义服务调用原型/签名的最佳实践是什么？

例如，我想创建服务调用来发送电子邮件。

假设我的域层中有以下对象

```
 [datacontract]
public class Email
{
      public string To { get; set; }
      public string From { get; set; }
      public string Message { get; set; }
      public string Subject { get; set; }

      //I am not going to use this properties in send email method
      public string OtherProp1 {get; set;}
      public string OtherProp2 {get; set;}
      public string OtherProp3 {get; set;}

  } 
```

我应该像这样创建服务方法签名吗

```
 public bool SendEmail(string from,string to, string subject,string message){//My Logic}} 
```

或者

```
 public bool SendEmail(Email myEmail){//My Logic} 
```

我倾向于第一个选项。（话虽如此，我知道对象是否比传递整个对象本身更复杂。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:27:46.193

Unfortunately, second option is less clear in this case and this is because of your `Email class`.

Suppose I am to call your method. You make me pass an instance of the `Email` class. I go to the class contract and find 7 properties.

And, how am I supposed to know which parameters are mandatory and which are optional? From the docs? Not a cleanest design if I have to consult the docs to make proper use of the API.

I would rather refactor your Email class to call it `EmailRequest` with all these optional parameters removed and then I would create yet another class `EmailResponse` if you ever need to use it as a **return** value of a service.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T19:40:21.957

I too vote for approach #2.

Since you mentioned 'service oriented architecture', you should create a `DataContract` to gain full control of what your clients see.

Here, serialization is opt-in, so the 'unused properties' will not be sent over the wire.

Plus, you get other benefits like controlling the order of serialized members, specifying if fields are required or not, custom names, versioning and so on. It just makes things obvious for the clients.

Also, the `DataContractSerializer` is supposedly 10% faster than the `XmlSerializer`. More details on [this](http://www.danrigsby.com/blog/index.php/2008/03/07/xmlserializer-vs-datacontractserializer-serialization-in-wcf/) blog, though I am not sure if approach #1 (primitive types) would use `XmlSerializer` or `DataContractSerializer`.

```
[DataContract(Name="MyEmail", Namespace="http://contoso.org/soa/datacontracts")]
public class Email
{
  [DataMember(Name="ToField", IsRequired=true, Order=0]
  public string To { get; set; }

  [DataMember(Name="FromField", IsRequired=false, Order=1]
  public string From { get; set; }

  [DataMember(Name="MessageField", IsRequired=true, Order=2]
  public string Message { get; set; }

  [DataMember(Name="SubjectField", IsRequired=false, Order=3]
  public string Subject { get; set; }

  public string OtherProp1 {get; set;}
  public string OtherProp2 {get; set;}
  public string OtherProp3 {get; set;}    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:18:46.217

It's always better to go OOP way. If email class is excessive, try to analyze and define another solution. Like this

```
 public class Email
    {
          //everything needed for service is extracted in another class
          public EmailAddressDetails {get;set}
          //I am not going to use this properties in send email method
          public string OtherProp1 {get; set;}
          public string OtherProp2 {get; set;}
          public string OtherProp3 {get; set;}

      } 
```

and use service like this

```
 public bool SendEmail(EmailAddressDetails email){//My Logic}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T19:12:41.930

两个都写怎么样？只是拥有第一个，调用第二个？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T19:15:14.550

我会将您的`Email`对象设为 [DataContract] 并使用选项二。我认为您不希望一种服务方法有那么多参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T19:15:40.740

One of the important aspects of SOA is the contract so I would really vote against cluttering it with unneeded data and details which will cause it to deteriorate fast(er).

The option offered by channs is pretty good as it concentrates on defining the contract explicitly and in details, but I'd also separate the classes used for contract purposes from the classes used internally to decouple and hide internal implementation details (I explain this in detail in the [Edge Component](http://rgoarchitects.bit.ly/6wTGjM) pattern)

# php - Codeigniter：如何管理多种语言的特殊字符

> ID：11975455
> 
> 赞同：0
> 
> 时间：2012-08-15T18:59:54.593
> 
> 标签：php, codeigniter, special-characters

我目前正在使用 CodeIgniter 中的双语应用程序，我需要管理冒号 (:) 等特殊字符。

在法语中，它是“：”（前后有空格），在英语中，它是“：”（没有空格）。

我想过为冒号做一个标签，比如：

```
$lang['common.colon_separator'] = ' : '; 
```

但在我看来，写这样的东西会很长：

```
<?=lang('common.image').lang('common.colon_separator')?> 
```

每次我需要一个冒号。

我已经考虑过一个助手或者可能使用变形器助手。

我还能做些什么来管理这个吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:25:27.880

我会为此编写一个辅助函数，包装`lang()`函数以使函数名称更短。将此添加到例如`application/helpers/my_language_helper.php`

```
function l($key, $element_id = null) {
    return = lang($key, $element_id);
} 
```

然后确保自动加载它和原始语言助手`application/config/autoload.php`（或手动加载它们到你的控制器中）。

```
$autoload['helper'] = array('language', 'my_language'); 
```

将这些添加到您的语言文件中。

```
$lang[':'] = ' : ';
$lang['common.image'] = 'Some image string'; 
```

那么你所需要的就是`<?=l('common.image').l(':')?>`.

# ios - 如何将 NSUserDefault 与多个首选项和 textColor 一起使用

> ID：11975456
> 
> 赞同：0
> 
> 时间：2012-08-15T18:59:57.893
> 
> 标签：ios, uitextfield, nsuserdefaults, textcolor

我有一个 UISwitch，除其他外，女巫禁用了 UITextfield。使用 NSUserDefaults 时，我管理开关以记住其当前状态（开/关）

```
NSString *const MyPrefKey =@"MyPrefKey";

 [[NSUserDefaults standardUserDefaults]
     setBool:[sender isOn]
     forKey:MyPrefKey]; 
```

开关状态在 viewDidLoad 中被调用

```
 BOOL switchState =[[NSUserDefaults standardUserDefaults]boolForKey:MyPrefKey];
 [mySwitch setOn:switchState]; 
```

这很完美，记住了 UISwitch 的位置。

用于在开关更改时启用文本字段

我按照建议尝试了：

```
 [[NSUserDefaults standardUserDefaults]
     setObject:[NSNumber numberWithBool:[myTextField isEnabled]]
     forKey:MyPrefKey]; 
```

并回忆起

```
BOOL mtf  =[[NSUserDefaults standardUserDefaults]boolForKey:MyPrefKey];
[myTextField setEnabled:mtf]; 
```

这也很好用。但是，当时只有其中一项有效。如何同时设置更多默认值？我必须制作几个 PrefKeys 吗？或者它们都可以存储在同一个prefKey中吗？

最后我尝试使用 NSUserDefaults 更改 textcolor

```
[[NSUserDefaults standardUserDefaults]
     setObject: [myTextField textColor]
     forKey: MyPrefKey]; 
```

召回时会导致崩溃

```
UIColor*newColor= [[NSUserDefaults standardUserDefaults] objectForKey: EfloraSharePrefKey];
[myTextField setTextColor:newColor]; 
```

那么如何将 NSUserDefault 与 textColor 一起使用？我会应用任何好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:07:48.393

您只能将属性列表对象保存到 NSUserDefaults。你必须以某种方式序列化你的颜色。一个可能的解决方案：

```
CGFloat r, g, b, a;
[myTextField.textColor getRed:&r green:&g blue:&b alpha:&a];
NSNumber *rn, *gn, *bn, *an;
rn = [NSNumber numberWithFloat:r];
gn = [NSNumber numberWithFloat:g];
bn = [NSNumber numberWithFloat:b];
an = [NSNumber numberWithFloat:a];
NSDictionary *color = [NSDictionary dictionaryWithObjectsAndKeys:
    rn, @"red",
    gn, @"green",
    bn, @"blue",
    an, @"alpha",
    nil];
[[NSUserDefaults standardUserDefaults] setObject:color forKey:@"TextColor"]; 
```

并检索它：

```
NSDictionary *color = [[NSUserDefaults standardUserDefaults] objectForKey:@"TextColor"];
NSNumber *rn, *gn, *bn, *an;
rn = [color objectForKey:@"red"];
...
UIColor *c = [UIColor colorWithRed:[rn floatValue]
    green:[gn floatValue]
    blue:[bn floatValue]
    alpha:[an floatValue]];
textField.textColor = c; 
```

如果你想变得非常优雅，你可以将它包装到一个类别中，甚至使 UIColor 符合 NSCoding 标准（以便能够直接将其持久化到用户默认 plist 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:17:35.227

就像 H2C03 说的，你需要让它成为一个有效的属性列表项。悬停，有些颜色不在 RGB 颜色空间中。但是，您可以将 NSData 放在 plist 中，并且 UIColor 支持归档。

```
NSData *colorData = [NSKeyedArchiver archivedDataWithRootObject:color]; 
```

然后在另一边...

```
UIColor *color = [NSKeyedUnarchiver unarchiveObjectWithData:colorData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:14:51.243

您可以使用 NSKeyedUnarchiver 归档/取消归档 UIColor 的数据。将 NSData 保存为 NSUserDetaults 的对象。使用从颜色创建 NSData

```
[NSKeyedArchiver archivedDataWithRootObject:yourColor]; 
```

并使用

```
[NSKeyedUnarchiver unarchiveObjectWithData:[[NSUserDefaults standardUserDefaults] objectForKey:yourColorKey]] 
```

# android - Android：操作系统不会以相同的比例重新调整图像大小

> ID：11975458
> 
> 赞同：0
> 
> 时间：2012-08-15T19:00:08.140
> 
> 标签：android

我对 Android 操作系统如何处理我的应用程序的大小调整感到困扰。基本上我有一个 480x800（所以 480px 宽）的背景图像和一个位于底部的图像，也是 480px 宽。

在 Galaxy S（480x800 屏幕）上一切正常，如下图所示：

![在此处输入图像描述](../Images/ec799c7d3d43c02f532690f4ac948526.png)

然而，在 Galaxy S3 (720x1280) 上，背景被拉伸到 720px 宽，而底部的图像仅被拉伸到 640px 宽，如下图所示：

![在此处输入图像描述](../Images/d16fe13eb915a3772c8952e9ce40a160.png)

我试图用 640x960 图像创建一个 xhdpi 文件夹，但同样的事情发生了（背景拉伸到 720 像素，图像仅到 640 像素）。我也尝试过使用“ScaleType”，但到目前为止还没有运气。

有谁知道为什么操作系统会以不同的比例重新调整两个图像的大小，以及如何修复它？

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/bg" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/significados"
        android:layout_gravity="center"
        android:layout_marginTop="216dp"
        android:onClick="goToSignificados"
        />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/ranking"
        android:layout_gravity="center"
        android:onClick="goToRanking"
        />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/engracados"
        android:layout_gravity="center"
        android:onClick="goToEngracados"
        />

    <ImageView
        android:id="@+id/iv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="60dp"
        android:clickable="true"
        android:contentDescription="@string/image"
        android:onClick="goToMarket"
        android:src="@drawable/googleplay" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:28:18.077

您必须发布您的 XML 以获得更具体的答案，但基本上所有“视图”可能会以不同的方式处理图像缩放。

在你的例子中，

您可以使用 width = match-parent 使按钮一直伸展。

“背景”默认会拉伸，但也可以平铺。“按钮”将具有背景大小的最小大小，但会在需要时拉伸（按钮文本过多）

作为旁注，您不应该依赖图像的确切像素。你应该研究[九个补丁](http://developer.android.com/tools/help/draw9patch.html)或制作平铺背景，并确保你利用了诸如“匹配父级、重力等”之类的东西。

# java - 按下按钮时JFrame变慢？

> ID：11975464
> 
> 赞同：1
> 
> 时间：2012-08-15T19:00:42.167
> 
> 标签：java, swing, jframe, jpanel, jdesktoppane

下面的代码显示了我的程序，当在方法 home()、plus、minus()`times()`和之间切换时`divide()`，它们`removeAll()`对应`JPanel`的 s`addPnl()` `subPnl()`等等 - 这些存储在 a 中`JDesktopPane`。

我对Java很陌生，我的代码背后的想法是它是一个数学程序：你按下一个按钮，从当时显示`JFrame`的内容中删除内容，然后根据什么类型显示正确的你想要的总和：加法，乘法等。`JPanel``JPanel`

**我的问题**是，当您切换到菜单，然后切换到另一个`JPanel`，来回切换时，切换到新屏幕/ 的速度越来越慢`JPanel`。**有没有办法避免这种情况？**

我的代码中可能有一些不好的做法，但是，就像我说的，我还很新，需要学习这些东西！

非常感谢。

我添加`JPanels`了一个`JDesktopPane`，所以我可以在我的`JFrame`：

```
desk.add( bgImg , new Integer( 50 ) );
desk.add( mainPnl , new Integer( 350 ) );
desk.add( mainG , new Integer( 350 ) );
desk.add( addPnl , new Integer( 350 ) );
desk.add( subPnl , new Integer( 350 ) );
desk.add( mulPnl , new Integer( 350 ) );
desk.add( divPnl , new Integer( 350 ) );
setLayeredPane( desk ); 
```

不同的按钮链接到不同的方法，都在我的类中调用`MiniMain`

```
public void actionPerformed( ActionEvent event ){

if( event.getSource() == addBtn ) { plus(); }
if( event.getSource() == subBtn ) { minus(); }
if( event.getSource() == mulBtn ) { times(); }
if( event.getSource() == divBtn ) { divide(); }
if( event.getSource() == menuBtn ) { home(); }
if( event.getSource() == noteBtn ) { MiniPad.pad(); return; } 
```

`removeAll()`每个方法都以 s: 中的内容的一些声明开始`JPanel`：将链接到该方法的面板

```
public void plus(){
mainPnl.removeAll(); mainG.removeAll(); addPnl.removeAll(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:04:56.677

您是否考虑过[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)，然后您可以创建每个不同的并在您的 s 之间`JPanel`简单地*翻转*`JPanel`，最好的做法是从`JPanel`每次删除所有组件并添加新组件：

```
//Where instance variables are declared:
JPanel cards;
final static String BUTTONPANEL = "Card with JButtons";
final static String TEXTPANEL = "Card with JTextField";

//Where the components controlled by the CardLayout are initialized:
//Create the "cards".
JPanel card1 = new JPanel();
...
JPanel card2 = new JPanel();
...

//Create the panel that contains the "cards".
cards = new JPanel(new CardLayout());
cards.add(card1, BUTTONPANEL);
cards.add(card2, TEXTPANEL);
...

getContentPane().add(cards, BorderLayout.CENTER);//add card panel to frame
setVisible(true);//show frame

CardLayout cl = (CardLayout)(cards.getLayout());//get cards
cl.show(cards, BUTTONPANEL);//switch cards to button JPanel 
```

# android - “刷新”来自 MainActivity 的片段

> ID：11975465
> 
> 赞同：0
> 
> 时间：2012-08-15T19:00:48.453
> 
> 标签：android, android-fragments, android-listfragment

所以，在 a 中有一个按钮`ListFragment`。`onCLick`按钮的 方法在中实现`MainActivity`（不确定是否是正确的解决方案，但就是这样）。当我单击按钮时，会`AlertDialog`弹出，当我选择其中一个对话框选项时，它会更改我的片段正在使用的数据集。

问题是当`AlertDialog`消失时，我`ListFragment`仍在显示旧数据。

有什么办法可以更新我`ListFragment`的`MainActivity`？

我尝试将某些`ListFragment`方法设为静态，以便可以从主活动中调用它们，但这些方法使用非静态字段等，因此不能是静态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:23:54.347

您应该能够通过调用`notifyDataSetChanged()`它的适配器来更新 ListFragments（假设您的适配器派生自`BaseAdapter`它的任何子类或任何子类）。最简单的方法可能是`DialogInterface.OnDismissListener`在您的对话框上设置一个。

```
myDialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
  @Override
  public void onDismiss(DialogInterface dialog){
    myBaseAdapter.notifyDataSetChanged();
  }
}); 
```

您可以保留对适配器的引用，也可以直接从`ListFragment`您的实现中获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:34:15.447

因此，我将我的`ListFragment`片段的适配器声明为静态的，并且我声明了一个正在填充该适配器的列表 - 作为静态的。

从主要活动我这样做：

```
ListFragment.item.add(mChosenFilePath);
ListFragment.fileList.notifyDataSetChanged(); 
```

在哪里：

`item`- 是一个列表，其中包含要显示的元素

`mChosenFilePath``item`-作为对话框的结果添加到的文件的路径

`fileList`- 是我的适配器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:04:01.420

有三种可能的解决方案。

1.  聆听片段而不是活动中的点击。
2.  `cancel`在对话框的按钮上设置一个监听器，并根据需要重新加载片段。
3.  添加带有标签的片段，通过该标签从管理器中获取它，然后调用适当的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T19:09:43.947

为片段设置标签或 id。然后，您可以直接在 Activity 的片段上调用方法：

```
Fragment myne = findFragmentByTag( "MyFragment" );
MyFragment target = (MyFragment) myne;
target.refresh(); // 'Refresh' method to be declared by MyFragment implementation 
```

# spring-mvc - Spring MVC - 跨多个页面重用小部件

> ID：11975476
> 
> 赞同：0
> 
> 时间：2012-08-15T19:01:22.350
> 
> 标签：spring-mvc, jspx

通常在构建页面时，您会为该页面构建一个控制器，其中 RequestMapping 与 URL 以及 RequestMethod.GET 相关联，您可以在其中设置需要在页面上显示的变量。

我所拥有的是一个新闻小部件，它将显示在每个页面上，如果它只显示在一个页面上，我会做类似的事情：

```
@Controller
@RequestMapping("/news")
public class NewsController {

    @RequestMapping(method = RequestMethod.GET)
    public String setupForm(
            HttpServletRequest request,
            @Valid @ModelAttribute("RA") RA ra,
            ModelAndView modelAndView,
            Model model) {
        // do some stuff to ra, put values in model, ....
    }

} 
```

在 JSPX 页面上，我会有类似的内容：

```
<c:forEach var="article" items="${newsarticles}" >
    <h1>${article.title}</h1>
    ${article.body}
    <br />
</c:forEach> 
```

我要解决的问题是如何在所有页面甚至主模板中复制上述 JSPX 片段，而无需在 RequestMapping 中明确列出大量 URL。

在 JSF 中，我会简单地使用 #{newsBean.newsarticles}，它适用于所有页面。

请求拦截器可以工作，但是没有 RequestInterceptor 是否有更好的方法来做到这一点，或者 RequestInterceptor 是我唯一的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:56:53.270

一种方法可能是实现 RequestInterceptor，但不是在每个请求上抓取文章，而是将文章列表放入会话中，然后列表只被抓取一次，保存到会话中，您只需检查列表是否已经存在于会话中。

# c# - 从多个表单将数据添加到 c# 中的 gridview

> ID：11975479
> 
> 赞同：0
> 
> 时间：2012-08-15T19:01:41.557
> 
> 标签：c#, datagridview, project, multiple-forms

我将如何将我在 NewActivity 的文本框中输入的文本插入到 form1 的 datagridview 的第一列中？

这是我到目前为止的编码。

表格1

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            this.IsMdiContainer = true;
        }

        private void viewToolStripMenuItem1_Click(object sender, EventArgs e)
        {
        }

        private void newActivityToolStripMenuItem_Click(object sender, EventArgs e)
        {
            NewActivity NewAc = new NewActivity();
            NewAc.MdiParent = this;
            NewAc.Show();
        }

        private void deleteActivityToolStripMenuItem_Click(object sender, EventArgs e)
        {
        }
    }
} 
```

新活动

```
 public partial class NewActivity : Form
    {
        public string activityName;

        public NewActivity()
        {
            InitializeComponent();
        }

        private void btnCancel_Click(object sender, EventArgs e)
        {
            activityName = "";
            this.Close(); 
        }

        private void btnAddActivity_Click(object sender, EventArgs e)
        {
            activityName = txtActivityName.Text;            
            this.Close();           
        }             
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:47:22.117

您可以将其插入您的事件点击

```
private void btnAddActivity_Click(object sender, EventArgs e)
    {
        activityName = txtActivityName.Text;    
        int index = yourDataGridView.Rows.Add();
       DataGridViewRow row = yourDataGridView.Rows[index];
       row.Cells[0].Value =   activityName ;      
        this.Close();           
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:36:12.907

下面是如何将文本框控件中的数据绑定到 DataGrid 的示例

```
// create new row
DataGridViewRow row = new DataGridViewRow();

// create cells
row.CreateCells(this.dataGridView1, textBox1.Text, textBox2.Text, textBox3.Text);

// add to data grid view
this.dataGridView1.Rows.Add(row); 
```

---------------下面是你在你的情况下如何使用它--------

```
private void btnAddActivity_Click(object sender, EventArgs e)
{
   activityName = txtActivityName.Text;    
   int index = dgvActivityList .Rows.Add();
   DataGridViewRow row = dgvActivityList .Rows[index];
   row.Cells[0].Value = activityName;      
   this.Close();           
} 
```

# c# - 如何将字符串呈现为 html 链接

> ID：11975483
> 
> 赞同：8
> 
> 时间：2012-08-15T19:01:54.780
> 
> 标签：c#, html, hyperlink

我向电子邮件发送了一些消息，如下所示：

```
string link = "http://localhost:1900/ResetPassword/?username=" + user.UserName + "&reset=" + HashResetParams( user.UserName, user.ProviderUserKey.ToString() );
email.Body = link; 
```

此字符串已发送到电子邮件，但显示为字符串，而不是链接，我想将其作为链接发送以单击。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T19:08:49.530

试试这个

```
string link = String.Format("<a href=\"http://localhost:1900/ResetPassword/?username={0}&reset={1}\">Click here</a>", user.UserName, HashResetParams( user.UserName, user.ProviderUserKey.ToString() )); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T19:05:26.723

包裹`link`在一个锚标签中：

```
string link = '<a href="http://......">Click here to reset your password</a>'; 
```

和

```
email.IsBodyHtml = true; 
```

或者使用字符串连接将它们组合在一起并输入`email.Body`. 电子邮件正文是 HTML，因此除非您告诉它是一个链接，否则它不会是一个链接。另外，不要忘记*告诉*它正文是 HTML，就像我一直做的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T19:05:52.057

使其成为带有`a`HTML 标记的链接。并且不要忘记将其设置`MailMessage`为 HTML 正文：

```
string link = "http://localhost:1900/ResetPassword/?username=" + user.UserName + "&reset=" + HashResetParams( user.UserName, user.ProviderUserKey.ToString() );
email.Body = "<a href='" + link + "'>" + link + "</a>";
email.IsBodyHtml = true; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T19:06:18.547

```
string link = "<a href=http://localhost:1900/ResetPassword/?username=" + user.UserName + "&reset=" + HashResetParams( user.UserName, user.ProviderUserKey.ToString() + "> Link Text Here </a>"); 
```

它不知道这是一个链接:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T19:07:45.713

将电子邮件正文从纯文本更改为 Html 并使用`<a>`元素生成链接

```
string link = @"<a href="www.mylink.com">link</a>"

email.IsBodyHtml = true; 
```

# javascript - 使用模型中的 Backbone Mediator 发布事件

> ID：11975492
> 
> 赞同：0
> 
> 时间：2012-08-15T19:02:32.907
> 
> 标签：javascript, backbone.js, mediator

从 Backbone 模型发布事件是一种好的做法/模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:27:04.547

**排序答案**：是

**长答案**：这是使用事件的一种非常好的方法：模型被某个组件更改，而其他一些组件正在监听此更改并执行适当的操作。

这是一种非常好的组件之间的通信方式，这些组件彼此之间没有任何关系，而是一个共同的模型。

# php - jQuery Ajax 调用 PHP 脚本的空白响应

> ID：11975496
> 
> 赞同：0
> 
> 时间：2012-08-15T19:02:46.457
> 
> 标签：php, ajax, forms, jquery

我希望这不是重复的；我阅读的其他类似问题并没有帮助我解决问题。

我从 jQuery Ajax 调用到我的 PHP 脚本收到一个空白响应（即 data = ""），用于验证用户提交的 CAPTCHA 值。我正在为我的验证码使用[Cryptographp](http://www.captcha.fr/ "密码学")，它按预期工作，所以我认为这很可能是我的 Ajax 调用或 PHP 脚本中的错误。

**Firebug 显示正确的 POST 值（“代码”是要测试的提交的验证码值）：**

```
code      a
email     a@a.com
emailtext a
firstname a
lastname  a
phone 
```

**Ajax 函数调用 onsubmit 来判断是否提交表单：**

```
function validateCaptcha()
{
  // Assume an invalid CAPTCHA
  var valid = false;

  // The form containing the CAPTCHA value
  var data_string = $('form#emailform').serialize();

  // Make the Ajax call
  $.ajax({
    url: "captcha.php",
    data: data_string,
    type: "POST",
    async: false,
    success: function (data) {
      if (data == "true")
      {
        valid = true;
      }

      alert ("data: " + data);
    }
  });

  return valid;
} 
```

**验证码.php**

```
<?
  $cryptinstall="crypt/cryptographp.fct.php";
  include $cryptinstall;

  // Begin the session
  session_start();

  //Check if CAPTCHA values match
  if(chk_crypt($_POST["code"]))
    return true;
  else
    return false;
?> 
```

我的期望是上面的代码片段应该返回一个简单的“真”或“假”的响应，但也许情况并非如此。

任何指出我的错误的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:08:53.477

您需要使用“echo”而不是“return”并将其写入为字符串。return 用于返回函数的结果。

```
 <?
      $cryptinstall="crypt/cryptographp.fct.php";
      include $cryptinstall;

      // Begin the session
      session_start();

      //Check if CAPTCHA values match
      if(chk_crypt($_POST["code"]))
        echo "true";
      else
        echo "false;
    ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:09:24.380

从您`captcha.php`那里，您没有回显/打印任何内容，因此它什么也没有返回。只需将您的`return true;`and替换`return false;`为 echo 即可。

只有当您从脚本中打印某些内容时，浏览器才能接收到某些内容。

```
if(chk_crypt($_POST["code"])) echo true; // 1
else echo false;// 0 
```

或者

```
if(chk_crypt($_POST["code"])) echo 'true'; // true
else echo 'false';// false 
```

# c++ - reinterpret_cast，转换为兄弟类

> ID：11975497
> 
> 赞同：-4
> 
> 时间：2012-08-15T19:02:59.967
> 
> 标签：c++, reinterpret-cast

我只是想知道以下 C++ 代码是否可以保证工作：

```
struct B1 {
    virtual void f() {};
};

struct B2 {
    virtual void f2() {};
};

struct D:public B1,public B2 {
};

int main() {
    D d;
    B1 *b1=&d;
    if (dynamic_cast<B2*>(b1)) {
      B2* b2 = reinterpret_cast<B2*>(b1); //is this conversion valid?
    };
    return 1;
}; 
```

当然，你会为什么我需要这个？因为我想替换这个：

```
C::C(B1* b): member(dynamic_cast<B2*>(b)?dynamic_cast<B2*>(b)->m():b) {}; 
```

具有更好的结构（通过性能，不检查类型安全两次）：

```
C::C(B1* b): member(dynamic_cast<B2*>(b)?reinterpret_cast<B2*>(b)->m():b) {}; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T19:17:57.963

软件问题的解决方案通常是添加一个间接级别，在这种情况下是一个函数。假设 dynamic_cast 应该是 B2*（不是 B1），编写一个做正确事情的函数：

```
B1 *get_b(B1 *b) {
    B2 *b2 = dynamic_cast<B2*>(b);
    if (b2)
        return b2->m();
    else
        return b;
} 
```

然后在初始化列表中使用该函数：

```
C::C(B1 *b) : member(get_b(b)) { } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T19:05:53.090

不，这绝对是无效的。使用 reinterpret_cast 您可以安全地做的就是将其转换回原始类型；其他任何东西都是实现定义的。

# .net - 公共抽象方法或接口？

> ID：11975501
> 
> 赞同：0
> 
> 时间：2012-08-15T19:03:22.460
> 
> 标签：.net, methods, interface, abstract

我有一个带有公共抽象方法的抽象类。我想知道我是否应该只定义一个接口并让抽象类实现它。这里有一般的经验法则吗？目前它工作得很好，但我想注意 OO 约定。这是目前的样子：

```
public abstract class MySuckyClass
{ 
    public bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = this.GetMember(binder.Name);

        if (result == null)
            return false;

        return true;
    }

    public abstract object GetMember(string memberName);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:06:39.280

你问的问题有一系列不同的答案。可能会因意见而异。

就个人而言，我喜欢定义接口，然后使用抽象类提供一些固定功能。如果我需要提供不同的实现，这允许我返回到接口，但在处理在多个实现中执行相同操作的方法/属性时可以节省我的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:05:54.087

约定是使用抽象。在这方面，这意味着一个接口或一个抽象类。

如果您的代码按原样工作，请不要仅仅为了添加不需要的接口而对其进行更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:14:06.110

这是从 2003 年开始的，但在我的脑海中仍然如此

[抽象类与接口的建议](http://msdn.microsoft.com/en-us/library/scsyfw1d%28v=VS.71%29.aspx)

您可以在抽象类中定义构造函数，而您不能在接口中定义构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T08:01:25.353

Cwalina Krzysztof 有一本很棒的书，叫做“框架设计指南”。如果我没记错的话，其中一条准则是如果您希望开发人员扩展您的类并使用接口（如果您不这样做）则使用抽象类。

# java - 在 JBoss 7 中使用 MyFaces CODI

> ID：11975505
> 
> 赞同：0
> 
> 时间：2012-08-15T19:03:38.690
> 
> 标签：java, jsf, jboss, jboss-weld, codi

我使用 JBoss 7 和 JSF 2.0 (Mojarra) 和 Weld 作为 CDI。JBoss 已经提供的一切。另外，我在包中添加了 Primefaces。所以到目前为止，我的项目是：

JBoss 7 + JSF 2.0 + Primefaces + 焊接

但是，我觉得 Weld（和 CDI）上缺少 JSF ViewScope，所以我只是将 MyFaces CODI 添加到我的项目中。但我感觉我现在混合了很多东西，我不知道什么是什么。所以我有几个问题：

1 - 将 MyFaces CODI 添加到项目中只是 CDI，或者我也在更改 Mojarra？

2 - 添加 MyFaces CODI 也会使 Weld 无效，或者我将 CODI 用于 ViewScope，而 Weld 用于其他（请求、应用程序、会话等）？这是一个好主意吗？

希望你能理解我的问题并帮助我=P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:10:08.047

> *将 MyFaces CODI 添加到项目中只是 CDI，还是我也在更改 Mojarra？*

你没有改变 Mojarra。CODI 只是 CDI 的扩展。

* * *

> *添加 MyFaces CODI 也会使 Weld 无效，或者我将 CODI 用于 ViewScope 并将 Weld 用于其他（请求、应用程序、会话等）？*

你没有改变焊接。CODI 只是 CDI 的扩展。

# gcc - 在 Ubuntu 12.04 中安装 GCC 4.7.1

> ID：11975507
> 
> 赞同：0
> 
> 时间：2012-08-15T19:03:58.080
> 
> 标签：gcc, installation, ubuntu-12.04

我正在尝试按照[这个](http://solarianprogrammer.com/2012/04/13/building-gcc-4-7-on-ubuntu-12-04/)非常好的教程安装 GCC 4.7.1。我（几乎）按照书本做了所有事情，但是在此期间出现以下错误`make`

```
configure: error: cannot compute suffix of object files: cannot compile. 
```

这是我的配置命令，我在该教程中唯一更改的是文件`gcc-4.7.1`，仅此而已。

```
 ../gcc-4.7.1/configure --build=x86_64-linux-gnu --prefix=/usr/gcc_4_7 --with 
 gmp=/usr/gcc_4_7 --with-mpfr=/usr/gcc_4_7 --with-mpc=/usr/gcc_4_7 --enable-
 checking=release --enable-languages=c,c++ --disable-multilib --program-suffix=-4.7 
```

我查看了谷歌，大多数答案似乎都指向`gcc`加载包含的方式`mpfr`，`mpc`因此`gmp`我符号链接了 gcc-4.7 目录中的文件夹（我在源目录之外构建，按照一般推荐）。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:09:05.633

如有必要，请尝试`export LD_LIBRARY_PATH=/usr/local/gmp-4.1.3/lib:/usr/local/mpfr-2.3.2/lib:$LD_LIBRARY_PATH`将路径替换为计算机上安装 mpfr 和 gmp 的位置。

# .net - 在 WPF 中添加自定义控件模板

> ID：11975513
> 
> 赞同：0
> 
> 时间：2012-08-15T19:04:14.787
> 
> 标签：.net, wpf, xaml, styles

简单来说，如何将控件模板添加到我的 WPF 应用程序中？我正在使用带有 .net 4 的 Visual Studio 2010。

下面是几个问题。

1）根据我的理解，自定义模板是用于重新定义控件的已定义默认设置的东西。在这种情况下我是对的吗？

2）如果我们希望每当我从工具箱拖放时按钮都带有图像，那么我应该在某处覆盖按钮的 XAML 代码。

例如，我在下面有一个控件模板代码，它重新定义了进度条应该如何

[1。堆栈溢出的一个简单示例] [WPF 进度条样式](https://stackoverflow.com/questions/4815175/wpf-progressbar-style)

```
<ControlTemplate x:Key="CustomProgressBar" TargetType="ProgressBar" >
    <Grid Name="TemplateRoot" SnapsToDevicePixels="True">
        <Rectangle RadiusX="2" RadiusY="2" Fill="Transparent" />
        <Border CornerRadius="0,0,0,0" Margin="1,1,1,1">
            <Border.Background>
                <SolidColorBrush Color="Transparent"/>                       
            </Border.Background>
        </Border>
        <Border BorderThickness="0,0,0,0" BorderBrush="Transparent" Margin="1,1,1,1">
            <Border.Background>
                <SolidColorBrush Color="Transparent"/>                        
            </Border.Background>
        </Border>
        <Rectangle Name="PART_Track" Margin="1,1,1,1" />
        <Decorator Name="PART_Indicator" Margin="1,1,1,1" HorizontalAlignment="Left">
            <Grid Name="Foreground">
                <Rectangle Fill="Transparent" Name="Indicator" />
                <Grid Name="Animation" ClipToBounds="True">
                    <Border Name="PART_GlowRect" Width="100"  Margin="0,0,0,0" HorizontalAlignment="Left" Background="LightBlue"/>                                                            
                </Grid>
                <Grid Name="Overlay">                         
                </Grid>
            </Grid>
        </Decorator>
        <Border BorderThickness="0" CornerRadius="0,0,0,0" BorderBrush="Transparent" />
    </Grid>           
</ControlTemplate> 
```

另外，我尝试创建一个自定义控件。Projects->New->Custom control，VS-2010生成两个文件Customcontrol.cs和customcontroldesigner.cs。之后我该怎么办？（假设我需要一个带有图像的按钮，因此总是如此）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:18:18.273

### (1) 控制模板

来自 MSDN（[来源](http://msdn.microsoft.com/en-us/library/system.windows.controls.controltemplate.aspx)）：

> “ControlTemplate 允许您指定控件的视觉结构。控件作者可以定义默认 ControlTemplate，应用程序作者可以覆盖 ControlTemplate 以重建控件的视觉结构。”

您可以自己在 xaml 中创建控件模板，也可以使用 Expression Blend 创建副本以编辑和覆盖现有模板。

### (2) 一个按钮模板

按钮的默认控件模板如下：

```
<ControlTemplate TargetType="{x:Type Button}">
      <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
       <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
      </Border>
      <ControlTemplate.Triggers>
       <Trigger Property="IsMouseOver" Value="true">
        <Setter Property="BorderBrush" TargetName="Bd" Value="{StaticResource ToolBarButtonHoverBorder}"/>
        <Setter Property="Background" TargetName="Bd" Value="{StaticResource ToolBarButtonHover}"/>
       </Trigger>
       <Trigger Property="IsKeyboardFocused" Value="true">
        <Setter Property="BorderBrush" TargetName="Bd" Value="{StaticResource ToolBarButtonHoverBorder}"/>
        <Setter Property="Background" TargetName="Bd" Value="{StaticResource ToolBarButtonHover}"/>
       </Trigger>
       <Trigger Property="IsPressed" Value="true">
        <Setter Property="BorderBrush" TargetName="Bd" Value="{StaticResource ToolBarButtonPressedBorder}"/>
        <Setter Property="Background" TargetName="Bd" Value="{StaticResource ToolBarButtonPressed}"/>
       </Trigger>
       <Trigger Property="IsEnabled" Value="false">
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
       </Trigger>
      </ControlTemplate.Triggers>
     </ControlTemplate> 
```

要更改它以显示不同的内容，您可以在边框/演示者标签附近添加/更改项目。图像不支持直接内容，因此您将无法编写：

```
 <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                <Image Source="/project;component/Images/image.png">
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Image>
            </Border> 
```

### (3) 创建一个带有按钮的控件，其中包含一个图像

为此，您可以创建一个`UserControl`并添加一个带有图像的按钮，如下所示：

```
<UserControl x:Class="ImageButton"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <Button >
            <Image Source="/project;component/Images/image.png"></Image>
        </Button>
    </Grid>
</UserControl> 
```

这将创建一个控件，其中包含一个可以从工具箱中拖动的图像。显然图像源是一个静态值，但您可以在代码中更改它，向类传递路径参数，或创建一个属性来访问它。

# php - 将数据存储到mysql时出错，但是echo给出了正确的输出

> ID：11975517
> 
> 赞同：-1
> 
> 时间：2012-08-15T19:04:28.427
> 
> 标签：php, mysql

在我的 tableX 中有一些数据看起来像这样

```
<h1>ghhhhhh!</h1>
http://twitter.com/USERNAME
<h1></h1>
       http://3.bp.blogspot.com/_fqPQy3jcOwE/TJhikN8s5lI/AAAAAAAABL0/3Pbb3EAeo0k/s1600/Srishti+Rai1.html
<h1></h1>
http://4.bp.blogspot.com/_fqPQy3jcOwE/TJhiXGx1RII/AAAAAAAABLc/XNp_y51apks/s1600/anus7.html
<h1></h1>
http://cyz.com/_fqPQy3jcOwE/TJhh1ILX47I/AAAAAAAABKk/gX-OKEXtLFs/s1600/4r-2.html
<h1></h1>
http://cyz.com/_fqPQy3jcOwE/TJhiHGgb-KI/AAAAAAAABK8/zEv_41YzMhY/s1600/19+(1).html
<h1></h1>
http://cyz.com/_fqPQy3jcOwE/TJhihkpZZKI/AAAAAAAABLs/zDnlZkerBd8/s1600/Pooja+Gurung.html 
```

当我回显相同的 php 代码时，它会给出正确的输出，但是当我将这些详细信息存储在 mysql 中时，只有一行存储在 mysql 行中。我的代码是这个

```
<?php 

include('connect.php'); 

 $idmg=$_POST["id"];
 $res =mysql_query("select * from tablea");
 $row = mysql_fetch_array($res);

if(sus== '0'){ 

  $output=''.$row['content'].''; 

 echo $output;//this output gives the above result but when i store in db it stores first row

mysql_query ("INSERT INTO tablea (content) VALUES ('$output')");

}    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:16:13.363

您的插入失败，因为您在`$output`. 参考上面 DCoder 的建议，使用 PDO 或 mysqli。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:07:53.493

Is there a reason you have sql_fetch_array() and not [mysql_fetch_array()](http://php.net/mysql_fetch_array) ?

You also need to iterate through your results if you want more than one row.

```
<?php  
include('connect.php');   
$idmg =$_POST["id"]; 
$res  =mysql_query("select * from tablea"); 
$row  = sql_fetch_array($res)
  if($sus== '0'){  
   $output=mysql_real_escape_string($row['content']); 
   echo $output;
   mysql_query ("INSERT INTO tablea (content) VALUES ('$output')");  
}
?> 
```

And as @DCoder said, you should be using [prepared statements](http://us2.php.net/pdo), the code you have now is vulnerable to SQL injection.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:14:10.830

您的代码进行了一些更正：

```
<?php
    include('connect.php'); 

    $idmg=$_POST["id"];
    $res = mysql_query("select * from tablea");
    $row = mysql_fetch_array($res);

    if($sus== '0'){  // what is sus? If variable.. should be $sus
        $output = $row['content']; // .'' is literally nothing.. 
        echo $output;

        mysql_query ("INSERT INTO tablea (content) VALUES ('$output')");
    }
?> 
```

我认为您正在尝试做的事情：

```
<?php
    include('connect.php'); 

    $idmg = $_POST["id"]; // not actually used
    $res = mysql_query('SELECT * FROM tablea');
    while($row = mysql_fetch_array($res)) {
        $output = $row['content'];
        echo $output;
        // do anything else you want.. in your case ?enter the data back in?
        mysql_query("INSERT INTO tablea(content) VALUES('$output')");
    }
?> 
```

你应该使用什么：

```
<?php
    $idmg = $_POST['id']; // <-- not actually used
    $res = $mysqli_connection->query('SELECT * FROM tablea');
    while($row = $res->fetch_array(MYSQLI_ASSOC)) {
        $output = mysqli_connection->real_escape_string($row['content']);
        echo $output;
        // Do whatever else you like
        $mysqli_connection->query("INSERT INTO tablea(content) VALUES('$output')");
    }
    $res->free();
    $mysqli_connection->close();
?> 
```

# .htaccess - 在 .htaccess 中强制使用 WWW 和 HTTPS (SSL) - 需要帮助

> ID：11975519
> 
> 赞同：0
> 
> 时间：2012-08-15T19:04:32.137
> 
> 标签：.htaccess, ssl

我发现了一千个其他主题寻求帮助，但由于某种原因，他们的解决方案似乎都不起作用。

几天前我刚刚为我的域购买了 SSL，因为我在我的网站上接受信用卡/支票卡，我希望我的客户感到安全。

无论如何，这就是我的 .htaccess 文件目前的样子：

```
php_flag display_startup_errors off
php_flag display_errors off

Options +FollowSymLinks
RewriteEngine On

RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteRule ^buy-wow-accounts index.php [NC]
RewriteRule ^sell-wow-accounts sell.php [NC]
RewriteRule ^about-khaccounts about.php [NC]
RewriteRule ^buy-sell-wow-accounts-faq faq.php [NC]
RewriteRule ^khaccounts-feedback feedback.php [NC]
RewriteRule ^payment-plan payment-plan.php [NC]
RewriteRule ^customer-login customer-login.php [NC]
RewriteRule ^customer-center customer-center.php [NC]
RewriteRule ^privacy-policy privacy.php [NC]
RewriteRule ^buy-world-of-warcraft-wow-accounts/page-([0-9]+) listing.php?pageid=$1 [L,NC]
RewriteRule ^buy-world-of-warcraft-wow-accounts listing.php [L,NC]
RewriteRule ^world-of-warcraft-wow-acc/([^/]*)\.html$ account.php?acc=$1 [NC] 
```

我想要做的是强制 WWW 如果它不在 URL 中，并确保 HTTPS (SSL) 也被强制。我的网站有大量链接，其中大多数只是“www.khaccounts.net”、“http://khaccounts.net”和“khaccounts.net”之类的链接。

我想确保这些不同的旧链接中的每一个都将被迫使用 WWW 和 HTTPS。换句话说，我希望人们拥有 URL - “https://www.khaccounts.net”，无论他们使用什么 URL 访问我的网站。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:10:05.317

在您的 www 规则之后添加：

```
RewriteCond %{HTTPS} !on
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

另外，将您的 www 规则更改`https://`为没有 2 个重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:11:47.670

Looks like you're rewriting all of your urls to the root. Why don't you try:

```
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}/$1 [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:12:00.913

Try replacing these lines :

```
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

With this :

```
RewriteCond %{HTTPS} !on [OR]
RewriteCond %{HTTP_HOST} !^www\.khaccounts\.net$ [NC]
RewriteRule ^(.*)$ https://www.khaccounts.net/$1 [R=301,L,QSA] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T21:50:02.493

这可以在 khaccounts.net 被点击时显示正确的 URL，但仍会引发重定向循环。

```
RewriteCond %{HTTPS} !on [OR]
RewriteCond %{HTTP_HOST} !^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://www.khaccounts.net/$1 [R=301,L,QSA] 
```

# c++ - 通过控制类传递 QSqlQueryModel

> ID：11975520
> 
> 赞同：0
> 
> 时间：2012-08-15T19:04:33.870
> 
> 标签：c++, qt, data-binding, data-modeling, qtsql

在我的尝试中，我将如何`QSqlQueryModel`通过控件类或[QMainWindow](https://codereview.stackexchange.com/questions/14708/passing-data-with-qts-qsqlquerymodel)从连接和查询数据库的类传递并返回到需要信息的小部件？

我以为我可以将参考位置传递给`QSqlQueryModel`对象，但这不起作用或者[我做错了什么](https://codereview.stackexchange.com/questions/14708/passing-data-with-qts-qsqlquerymodel)。

我还没有找到任何示例来显示我在[Qt Developer page](http://qt-project.org/doc/qt-4.8/examples-sql.html)上所做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:39:50.837

看起来这些只是编译器错误，与 Qt 无关。

简而言之，您将指针和引用混淆了。

**错误 #1：**

`cardList = new List(sqlModel->getListModel());`

`List`当接受一个指针时，您正在传递一个引用。修复您的返回类型`getListModel`或修复上述行。

接下来，您没有指定第二个参数，即 parent `QWidget`。将您指定`MainWindow`为父级，传递`0`，或修复构造函数的签名以提供默认值（通常`0`）。

**错误 #2：**

```
List::List(QSqlQueryModel *model, QWidget *parent) :  ListUI(parent){
    setListItems(&model);
} 
```

您将 接收`model`为指针，然后尝试获取指针的地址。即你正在制作一个双指针。将行更改为

```
setListItems(model); 
```

希望有帮助。

# ruby-on-rails - Rails：获取距离点 10 公里范围内的用户帖子

> ID：11975532
> 
> 赞同：0
> 
> 时间：2012-08-15T19:05:33.633
> 
> 标签：ruby-on-rails, ruby, model, geokit

我正在使用 rails 3 geokit gem，它允许您在某个点的距离内找到用户，例如

```
User.within(10, origin: [51.123123, 0.1323123]) 
```

['10' 是以 mi/km 为单位的距离；51 & 0 是纬度和经度]

我现在正在尝试**获取某个点一定距离内的用户的所有帖子**。就像是：

```
Post.where(User.within(10, origin: [51.123123, 0.1323123])) 
```

（我的帖子模型属于_我的用户模型，我的用户模型有_许多帖子）

阅读它似乎解决方案在于 .where，或使用 :through & :source 或 .joins，但我无法确定它。

我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:09:01.170

可能有更优雅的解决方案，但我认为最简单的可能是将 IN 与 SQL 一起使用。执行以下操作：

```
Post.where(["user_id IN (?)", User.within(10, origin: [51.123123, 0.1323123]).map { |u| u.id }]) 
```

基本上，您只是发送一个`user_ids`可以`Post.user_id`匹配的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:11:49.290

如果您的用户模型`has_many`发布，为什么不直接加载它们？

```
@posts = User.within(10, origin: [51.123123, 0.1323123]).collect(&:posts).flatten 
```

[`collect`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-collect)是 的同义词`map`，它有效地将一个数组转换为另一个数组，将转换方法或块应用于原始数组的每个元素。

在我们上面的命令中，`within`是一个命名范围，它返回一个 数组`Users`，`collect`将该方法`posts`应用于每个用户，从而为每个用户生成一个帖子数组。最后，`flatten`获取帖子数组的数组（它是一个二维数组）并将其压缩成一个大的帖子数组。

`includes`您还可以在模型中使用默认值`User`来防止[N+1 查询问题。](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)加载时`Posts`。

FWIW，我更喜欢使用 ActiveRecord 方法（关联等），而不是尽可能使用原始 SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T12:55:28.497

试试这个解决方案：

```
class Post
  acts_as_mappable through: :user
end

Post.joins(:user).within(10, origin: [51.123123, 0.1323123]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T21:29:39.207

```
Post.joins(:user).merge(User.within(10, origin: [51.123123, 0.1323123])) 
```

# python - commands.getoutput() 引发 Errno 12 - 无法分配内存

> ID：11975540
> 
> 赞同：3
> 
> 时间：2012-08-15T19:05:54.683
> 
> 标签：python

我有一个 Python 脚本，它在带有 RHEL5 的服务器上运行。该服务器具有 32GB 内存和 8 个 2.83GHz 的 Intel Xeon CPU。我认为硬件资源应该没有问题，但是当我尝试上传和处理一个 1500 万行的文本文件时，程序给了我一个错误信息：

```
Traceback (most recent call last):
  File "./test.py", line 511, in <module>
    startup()
  File "./test.py", line 249, in startup
    cmdoutput = commands.getoutput(cmd_file)
  File "/usr/local/lib/python2.6/commands.py", line 46, in getoutput
    return getstatusoutput(cmd)[1]
  File "/usr/local/lib/python2.6/commands.py", line 55, in getstatusoutput
    pipe = os.popen('{ ' + cmd + '; } 2>&1', 'r')
OSError: [Errno 12] Cannot allocate memory 
```

我调查了这个问题，并没有找到任何与我的问题完全匹配的答案。这些答案集中在“popen”子例程上，但我不使用这个例程。我只是使用“ `commands.getoutput()`”来显示文档的文件类型。

需要注意的是，如果我尝试处理 1000 万行文本，则不会出现此问题。仅当文本文件很大时才会发生。任何人都可以在这个问题上帮助我吗？答案可能是比“ `command.getoutput()`”更好的模块。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:28:37.873

1.  您的命令可能会消耗太多内存。要检查，请从没有 python 的控制台使用大文件运行它，看看是否有任何错误
2.  您的命令可能会产生过多的输出。要检查，请运行：

    ```
    subprocess.check_call(["cmd", "arg1", "arg2"]) 
    ```

    如果成功，那么您应该逐步读取输出并丢弃处理后的输出，例如逐行：

    ```
    p = subprocess.Popen(["cmd", "arg1", "arg2"], stdout=subprocess.PIPE)
    for line in iter(p.stdout.readline, ''):
        # do something with line
        print line,
    p.stdout.close()
    exit_code = p.wait() # wait for the process to exit 
    ```

# android - Android sqlite数据库设计使用触发器

> ID：11975541
> 
> 赞同：0
> 
> 时间：2012-08-15T19:06:06.693
> 
> 标签：android, database, sqlite, triggers

我需要为 Android 应用程序设计一个 sqlite DB。

用例：我有 2 个表 A，B。

A 有 4 列 _id、roll_no、name、Marks。

B 有 4 列 roll_no、past_score、current_score、expected_score。

将每条记录添加到此表中，我需要通过发送标记来发出网络请求。该请求的响应需要解析并填充到表 B 的 past_score、current_score、expected_score 列中。

您能否指导我设计数据库的最佳方法是什么？我听说过触发器（以前从未使用过），它可用于维护数据完整性和外键约束。我可以将触发器用于上述用例，还是需要独立填充两个表？

如果这个问题听起来很愚蠢，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:38:13.083

android 处理数据的方式是使用 ContentProvider 类。

这不是最容易实现的事情，但它提供了很大的灵活性。

例如，您可以在插入一行时向一个意图服务触发一个意图，这反过来又会下载您需要的内容并使用相同的内容提供程序插入这些记录。

将其视为数据代理。它处理所有 CRUD 请求。

# java - file.exists() 和 file.createNewFile() 不能正常工作？

> ID：11975548
> 
> 赞同：4
> 
> 时间：2012-08-15T19:06:18.860
> 
> 标签：java, file-io

基本上，假设我得到`File f1 = new File("C:\\somedir\\batch1.bat");`并且`File f2 = new File("C:\\somedir\\batch2.bat");`我有 2 个 if

```
if(f1.exists() == false)
{
    showMessage("File 1 not detected, creating new...");
    f1.createNewFile();
}
else
{
    showMessage("File 1 detected, deleting it and creating new...");
    f1.delete();
    f1.createNewFile();
} 
```

和

```
if(f2.exists() == false)
{
    showMessage("File 2 not detected, creating new...");
    f2.createNewFile();
}
else
{
    showMessage("File 2 detected, deleting it and creating new...");
    f2.delete();
    f2.createNewFile();
} 
```

第一个 if 执行“else”代码，无论文件是否存在，第二个执行“if”部分，而不创建新文件。请帮忙！

### 编辑

我的`showMessage(String msg)`方法`System.out.println(msg)`就是这样你知道的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:15:27.070

嗯，我确定不是问题，但这样做更具可读性：

```
File f = new File(filePathString);
if(!f.exists()) { /* do something */ } 
```

而不是：

```
if(f1.exists() == false)
    {
      ...
    } 
```

删除文件时也要检查其返回值：

```
if(f.delete()) {//deleted successfully
}else {//couldnt delete
   //show error message
} 
```

正如PeterLawrey所说，您应该对以下内容做同样的事情`createNewFile()`：

```
if(f.createNewFile()) {//created successfully
}else {//couldnt create
   //show error message
} 
```

最后总是在尝试做任何事情之前检查权限：

```
if(f.canRead()&&f.canWrite()) {//can read and write free to do what is needed
   //do stuff
}else {
} 
```

# excel - 根据单元格总数突出显示该行？

> ID：11975552
> 
> 赞同：-2
> 
> 时间：2012-08-15T19:06:28.430
> 
> 标签：excel

您能否根据单元格中的内容突出显示一行。具体来说，我想把#'s 说成 A3-A15，让 A16 给我单元格的总数。如果总数在 18000 和 19999 之间，如果单元格 A16 中的数量超过 20000，我希望该行突出显示黄色，我希望该行突出显示红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:12:16.407

You can use a combination of the `SUM` formula and conditional formatting to achieve that.

In cell A16, you can put `=SUM(A3:A15)`

From there, you can select cell A16, and (depending on your version) go to Format > Conditional Formatting, and enter the following formulas:

*   Cell Value Is - Between - 18000 - 19999 -> Format -> Patterns -> Yellow
*   Cell Value Is - Greater Than Or Equal To - 20000 -> Format -> Patterns -> Red

# c - 规范化 0-9999 之间的 18 位输入

> ID：11975554
> 
> 赞同：1
> 
> 时间：2012-08-15T19:06:41.227
> 
> 标签：c, normalization, bit

我正在编写一个程序，我需要在其中规范化 0-9999 之间的 18 位输入。这是我以前从未遇到过的，

如果我在这里错了，我已经搜索了互联网并纠正我，但这是否像将 18 位二进制（000000000000000000）输入转换为自然数然后除以 1000 一样简单。

有没有其他更有效的方法？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:11:13.600

不，您想要做的是将您的输入乘以`0.03814697265`.

推理非常简单：您将输入范围（`0`.. `2^18`）拆分为`10000`“切片”。因此，每个切片的范围都只是 over `26`。然后，如果您将输入与原始范围相除`26`（或将其乘以`1`/ `26`），您将获得`0`..`9999`范围内的数字。

编辑：根据您的背景，您可能需要知道我在这里使用`^`的是指数的含义。可能没有实际意义，因为这个问题被标记为 C 并且它没有一流的求幂概念，但它绝对不是 XOR！

# android - 不幸的是，相机已经停止了 android 模拟器

> ID：11975560
> 
> 赞同：6
> 
> 时间：2012-08-15T19:07:07.537
> 
> 标签：android

> 我只是想从我的 android 模拟器启动相机，但不幸的是，相机已经停止了 android 模拟器并且它停止了
> 
> 我的 Android 版本 4.0.3 和 API 15
> 
> 我的日志在下面，我已经浏览过与此相关的堆栈溢出中的其他帖子，但没有运气

```
 08-15 18:55:53.361: E/EmulatedCamera_QemuClient(38): queryFrame: Query failed: Unable to obtain video frame from the camera
08-15 18:55:53.361: E/EmulatedCamera_QemuDevice(38): inWorkerThread: Unable to get current video frame: Invalid argument
08-15 18:55:53.401: I/dalvikvm(472): Wrote stack traces to '/data/anr/traces.txt'
08-15 18:55:53.561: E/Camera(472): Error 100
08-15 18:55:53.561: E/CameraErrorCallback(472): Got camera error callback. error=100
08-15 18:55:53.571: D/AndroidRuntime(472): Shutting down VM
08-15 18:55:53.571: W/dalvikvm(472): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
08-15 18:55:53.591: E/AndroidRuntime(472): FATAL EXCEPTION: main
08-15 18:55:53.591: E/AndroidRuntime(472): java.lang.RuntimeException: Media server died.
08-15 18:55:53.591: E/AndroidRuntime(472):  at com.android.camera.CameraErrorCallback.onError(CameraErrorCallback.java:31)
08-15 18:55:53.591: E/AndroidRuntime(472):  at android.hardware.Camera$EventHandler.handleMessage(Camera.java:736)
08-15 18:55:53.591: E/AndroidRuntime(472):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-15 18:55:53.591: E/AndroidRuntime(472):  at android.os.Looper.loop(Looper.java:137)
08-15 18:55:53.591: E/AndroidRuntime(472):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-15 18:55:53.591: E/AndroidRuntime(472):  at java.lang.reflect.Method.invokeNative(Native Method)
08-15 18:55:53.591: E/AndroidRuntime(472):  at java.lang.reflect.Method.invoke(Method.java:511)
08-15 18:55:53.591: E/AndroidRuntime(472):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-15 18:55:53.591: E/AndroidRuntime(472):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-15 18:55:53.591: E/AndroidRuntime(472):  at dalvik.system.NativeStart.main(Native Method)
08-15 18:55:53.621: W/ActivityManager(92):   Force finishing activity com.android.camera/.Camera
08-15 18:55:53.631: W/WindowManager(92): Failure taking screenshot for (180x300) to layer 21015
08-15 18:55:53.811: I/Process(92): Sending signal. PID: 472 SIG: 3
08-15 18:55:53.811: I/dalvikvm(472): threadid=3: reacting to signal 3 
```

# wpf - Microsoft.Windows.Controls.Ribbon 控件中的 WPF ToolTipService 属性（BetweenShowDelay 等）问题

> ID：11975562
> 
> 赞同：0
> 
> 时间：2012-08-15T19:07:13.260
> 
> 标签：wpf, tooltip, ribbon

我在 WPF 中有一个非常非常庞大的应用程序，其中有一个功能区。功能区包含一堆 RibbonControl，每个都绑定到不同的命令。在每个控件上，我们都放置了一个 ToolTip。我们覆盖了这些工具提示模板以使用我们自己的控件，从而提供更多信息。我们可以称 il 为超级工具提示。

工具提示模板的覆盖工作得很好。现在我们要统一工具提示的显示方式。我的意思是，对于应用程序中的每个工具提示，我们都需要相同的 initialShowDelay、ShowDuration 等（在功能区之外的其他地方也有工具提示，它们使用与功能区相同的自制控件）。因此，我将 ToolTipService.InitialShowDelay、ToolTipService.BetweenShowDelay、ToolTipService.ShowDuration 属性绑定到应用程序中的全局常量。

**InitialShowDelay ：** 属性 InitialShowDelay 几乎适用于应用程序中的每个控件...唯一不工作的是 RibbonSplitButton，它保持默认值 400...

**BetweenShowDelay ：** 当工具提示位于 ListBoxItem 上时，属性 BetweenShowDelay 工作得很好......但在功能区和我们自己的复杂控件（属性网格）中不起作用。

这些属性是在设置工具提示的控件中设置的，而不是在工具提示本身上设置的。

老实说，我完全不知道它为什么会这样……任何人都知道什么可能导致这种情况或如何解决它？

如果您需要更多信息，请不要犹豫，我真的对此感到绝望。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:15:01.643

问题是未遵守 BetweenShowDelay 的条件，您需要为属性“ToolTip”设置一个值，在这种情况下您使用的是模板，因此该值为 null。你可以这样解决它：

```
<Style x:Key="{x:Type ToolTip}" TargetType="ToolTip">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToolTip">
                    <Utils:ToolTipControl DataContext="{Binding ToolTipInfo}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

然后将假人放在指定的按钮中：

```
 <!-- RibbonButton -->
<Style TargetType="{x:Type ribbon:RibbonButton}" BasedOn="{StaticResource RibbonControlStyle}"  >

    <Style.Triggers>
        <DataTrigger Value="true" >
            <DataTrigger.Binding>
                <Binding Converter="{StaticResource IsBoundConverter}" />
            </DataTrigger.Binding>
            <Setter Property="Command" Value="{Binding}" />
            <Setter Property="ribbon:RibbonControlService.Label" Value="{Binding Name}" />
            <Setter Property="ribbon:RibbonControlService.SmallImageSource" Value="{Binding Icon}" />
            <Setter Property="ribbon:RibbonControlService.LargeImageSource" Value="{Binding LargeIcon}" />
            <Setter Property="Visibility" Value="{Binding Visibility}" />
            <Setter Property="ToolTip" Value="dummy"/> <!-- Use dummy value to force tooltip to show and to Bind the tooltip-->
        </DataTrigger>
        <DataTrigger Value="false" >
            <DataTrigger.Binding>
                <Binding Converter="{StaticResource IsBoundConverter}" />
            </DataTrigger.Binding>
            <Setter Property="Background" Value="#FF900000" />
        </DataTrigger>
    </Style.Triggers>

</Style> 
```

这样，虚拟值将被覆盖。

:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:50:57.583

这是一些代码，显示了我如何实现我的工具提示

```
 <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ribbon="http://schemas.microsoft.com/winfx/2006/xaml/presentation/ribbon"
...>
...
<!-- Ribbon Tooltips Style -->
    <Style TargetType="ribbon:RibbonToolTip">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Utils:ToolTipControl DataContext="{Binding ToolTipInfo}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
...
<!-- RibbonControl -->
    <Style x:Key="RibbonControlStyle">
        <Setter Property="ribbon:RibbonControlService.ToolTipTitle" Value="dummy" /><!-- Use dummy value to force tooltip to show -->
        <Setter Property="ToolTipService.InitialShowDelay" Value="{x:Static Utils:ToolTipViewModel.ToolTipInitialDelay}"/>
        <Setter Property="ToolTipService.ShowDuration" Value="{x:Static Utils:ToolTipViewModel.ToolTipShowDuration}"/>
        <Setter Property="ToolTipService.BetweenShowDelay" Value="{x:Static Utils:ToolTipViewModel.ToolTipBetweenShowDelay}"/>
        <!-- This style is used to select the "Editors" tab when opening Editor without a world, and to select the "Home" tab otherwise -->
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsWorldLoaded, Source={x:Static ViewModels:ViewportSettingsViewModel.Instance}}" Value="false">
                <Setter Property="ribbon:Ribbon.SelectedIndex" Value="2"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding IsWorldLoaded, Source={x:Static ViewModels:ViewportSettingsViewModel.Instance}}" Value="true">
                <Setter Property="ribbon:Ribbon.SelectedIndex" Value="0"/>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:01:19.883

此外，对于 splitbutton 问题，没有为 splitbutton 的子项（两个部分）设置工具提示服务，这两个部分被命名为 PART_HeaderButton 和 PART_ToggleButton。因此，即使您创建自己的样式，它也会被ribbonsplit 按钮的样式覆盖（请参阅splitbutton.xaml 文件的链接：

[https://wpfcontrolextension.svn.codeplex.com/svn/trunk/Common/RibbonControlsLibrary/v3.5/Themes/Generic.xaml](https://wpfcontrolextension.svn.codeplex.com/svn/trunk/Common/RibbonControlsLibrary/v3.5/Themes/Generic.xaml)

所以要绕过这个覆盖问题（因为我们不能直接访问我们必须通过代码访问的部分。我的情况是，我覆盖了 RibbonSplitButton 类和 OnLoadTemplate 方法。这样，我们可以使用 getchild 访问部分并更改它们。

```
 public partial class DuniaRibbonSplitButton : RibbonSplitButton
{
    public DuniaRibbonSplitButton()
    {
        InitializeComponent();
    }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        var HeaderButton = base.GetTemplateChild("PART_HeaderButton");
        var ToggleButton = base.GetTemplateChild("PART_ToggleButton");

        OverrideAttributes(HeaderButton as Control);
        OverrideAttributes(ToggleButton as Control);
    }

    private void OverrideAttributes(Control control)
    {
        control.ToolTip = "Dummy";
        ToolTipService.SetInitialShowDelay(control, ToolTipViewModel.ToolTipInitialDelay);
        ToolTipService.SetShowDuration(control, ToolTipViewModel.ToolTipShowDuration);
        ToolTipService.SetBetweenShowDelay(control, ToolTipViewModel.ToolTipBetweenShowDelay);
    }
} 
```

# c# - C# 使用 System.Data.Metadata.Edm

> ID：11975563
> 
> 赞同：8
> 
> 时间：2012-08-15T19:07:13.957
> 
> 标签：c#, entity-framework

我正在尝试使用 EntityType 类，但是当我尝试使用它时出现错误。我做了一些挖掘，看来我需要使用这个 System.Data.Metadata.Edm。

我试过这个...

`using System.Data.`

我进入 . 元数据不作为选项出现....任何建议

我对此很陌生。

我正在使用 .NET Framework 3.5

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-09T07:02:25.460

如果您使用 EF6，则应使用 System.Data.Entity.Core.Metadata.Edm。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T19:10:25.440

您需要添加引用 System.Data.Entity.dll。

您还可以在 msdn 中检查某个类需要哪个程序集

例如，对于 EntityType：

[http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.entitytype.aspx](http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.entitytype.aspx)

您将在那里看到有关程序集的信息：

> 程序集：System.Data.Entity（在 System.Data.Entity.dll 中）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T19:10:24.193

确保您已`System.Data.Entity.dll`在项目中引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-11T09:08:51.563

如果您使用的是 EF6，则需要添加对 System.Data.Entity.dll 的引用

之后必须包含命名空间 System.Data.Entity.Core

基本上，从 EF6 开始，System.Data 中的所有类都已移至 System.Data.Entity.Core。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-02T11:41:01.060

如果您要从 EF5 升级到 EF6，请使用以下命名空间 将 System.Data.Metadata.Edm.RelationshipMultiplicity 替换为 System.Data.Entity.Core.Metadata.Edm.RelationshipMultiplicity，除上述内容外无需更改任何其他内容，因为它解决了我的问题问题

# android - Determine when random notification is dismissed, or when a PendingIntent is fired

> ID：11975575
> 
> 赞同：3
> 
> 时间：2012-08-15T19:07:49.547
> 
> 标签：android, notifications, android-pendingintent

I have a program where i do specific things when `Notifications` are displayed and dismissed. These notifications are NOT from this application but others.

To capture notifications i am using an `AccessibilityService`, with this i am able to see when a notification is displayed but not dismissed. I am also able to get a reference to the Notification and as such its `PendingIntent` for when it is dismissed.

My question, is there any way to determine when a notification(that i did not create) is dismissed, or when a PendingIntent goes off?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:15:50.020

Not really... You can't tell whether one of your own Notifications has been dismissed, or is still displayed, I don't know of a way to tell if someone else's notification is still there.

# javascript - Javascript 下拉功能

> ID：11975578
> 
> 赞同：0
> 
> 时间：2012-08-15T19:08:04.697
> 
> 标签：javascript, function

我正在尝试创建一个下拉日历。没有jquery！纯 JavaScript。到目前为止，@rlemon 为我提供了很大的帮助，我已经能够构建他帮助过我的代码。我快完成了，但遇到了一些小问题。到目前为止一切正常，但现在我正在着手合并闰年，这是我遇到问题的地方。我无法确定选择的当前年份。我有

```
sel_year.onchange = recalculateDays2(this); 
```

我相信这是通过选择当前年份的价值。然后在函数 recalculateDays2 我创建一个变量

```
year_index = x.text; 
```

这应该是类似 year_index = 2011, 2012 等。当用户更改为 2012 年时，我希望函数 recalculateDays2 将 feb 天设置为 29。请帮助...

```
<html>
<head>
</head>
<body>
Calendar<br>
<hr align="left" width="200px"/>
--Year ------ Month ----- Day<br>
<div id="calendar-container"></div>
<script type="text/javascript">
(function() {
    var yr1 = 2011, yr2 = 2012, yr3 = 2013, yr4 = 2014;
    var years = [yr1, yr2, yr3, yr4];
    var calendar = [
        ["January", 31],["February", 28],["March", 31],["April", 30],["May", 31],["June", 30],["July", 31],["August", 31],["September", 30],["October", 31],["November", 30],["December", 31]],
        //this is the variable that accesses the content
        cont = document.getElementById('calendar-container');
    //creates the variables for the drop downs
    var sel_year = document.createElement('select'), sel_month = document.createElement('select'), sel_day = document.createElement('select');

    function createOption(txt, val) {
        //this creates the option but it seems that it is making the value -1 than what the text node is
        var option = document.createElement('option');
        option.value = val;
        option.appendChild(document.createTextNode(txt));
        return option;
    }

    function createYearOption(val) {
        var option = document.createElement('option');
        option.value = val;
        option.appendChild(document.createTextNode(val));
        return option;
    }

    //this clears any elements for days, months, years
    function clearChildren(ele) {
        while (ele.hasChildNodes()) {
            ele.removeChild(ele.lastChild);
        }
    }

    //this function is only triggered when you recalculate the months
    function recalculateDays() {
        var month_index = sel_month.value,
            df = document.createDocumentFragment();
        //l is the variable for the number of days in the month from the array above ex:28, 30, 31
        for (var i = 0, l = calendar[month_index][1]; i < l; i++) {
            //the first variable is what number will be displayed in the day drop down
            df.appendChild(createOption(i + 1, i));
        }
        clearChildren(sel_day);
        sel_day.appendChild(df);
    }

    //this function is triggered only when you change the year
    function recalculateDays2(x) {
        var month_index = sel_month.value,
            df = document.createDocumentFragment(), 
            year_index = x.text;
        //this checks to see if the month selected is Feb   
        if ((month_index == 1) && (year_index == 2012)) {
        //l is the variable for the number of days in the month from the array above ex:28, 30, 31
        for (var i = 0, l = calendar[month_index][1]; i < l + 1; i++) {
            //the first variable is what number will be displayed in the day drop down
            df.appendChild(createOption(i + 1, i));
        }
        clearChildren(sel_day);
        sel_day.appendChild(df);
    } else {}}  

    function generateMonths() {
        var df = document.createDocumentFragment();
        calendar.forEach(function(info, i) {
            df.appendChild(createOption(info[0], i));
        });
        //clears past months
        clearChildren(sel_month);
        //appends new months onto variable df
        sel_month.appendChild(df);
    }

    function generateYears() {
        var df = document.createDocumentFragment();
        years.forEach(function(i) {
            df.appendChild(createYearOption(i));
        });
        //clears past months
        clearChildren(sel_year);
        //appends new months onto variable df
        sel_year.appendChild(df);
    }

    //anytime the month selector is changed this calls the function to change the days
    sel_month.onchange = recalculateDays;
    sel_year.onchange = recalculateDays2(this);

    //i believe this automatically runs the months and days functions specifically for when first loading the page
    generateMonths();
    recalculateDays();
    generateYears();

    //this is what displays each of the individual drop downs after everything has been done to them
    cont.appendChild(sel_year);
    cont.appendChild(sel_month);
    cont.appendChild(sel_day);
}());
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:15:41.303

检查一年是否是闰年的一种简单方法是将其原型化到您的代码中：

```
Date.prototype.isLeapYear = function() {
    return (new Date(this.getFullYear(),1,29).getMonth() == 1);
}; 
```

然后你可以在二月份用适当的天数更新你的数组。

# wpf - DataGrid DataTemplate 中的不可见图像

> ID：11975579
> 
> 赞同：0
> 
> 时间：2012-08-15T19:08:14.320
> 
> 标签：wpf, image, xaml, datagrid, datatrigger

我正在为此苦苦挣扎大约 2 天，但无法得到我的问题的答案或解决方案。我正在使用 C# WPF，我的问题在这里：

我有一个 ItemsSource 被绑定的 Datagrid。每个 TextColumn 都正确显示其值。只要我不输入该单元格，包含图片或按钮的 DataTemplateColumns 就不会显示其值。我想让我的 DataGrid 只读并立即显示图片，而不是通过单击单元格。但它们仅在您单击单元格时才会显示。我已经尝试过不同的图像格式（png、bmp、jpg）

那么那个DataGrid有什么问题呢？

这是带有 DataTemplaceColumn 的 XAML 部分：

```
<DataGrid AlternatingRowBackground="Gainsboro"
              AlternationCount="2"
              AutoGenerateColumns="False"
              Height="200"
              HorizontalAlignment="Left" 
              ItemsSource="{Binding}"
              Name="DgMain" 
              VerticalAlignment="Top" 
              Width="778" 
              CanUserReorderColumns="False" 
              CanUserResizeColumns="False" 
              CanUserResizeRows="False" 
              CanUserSortColumns="True"
              IsReadOnly="True">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Pic">
                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <Image x:Name="ImgDgMainPic"></Image>
                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding pic}" Value="pic1">
                                <Setter TargetName="ImgDgMainPic" Property="Source" Value="Images\picture1.png"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding pic}" Value="pic2">
                                <Setter TargetName="ImgDgMainPic" Property="Source" Value="Images\picture2.png"/>
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn> 
```

如您所见，DataTriger 绑定的值是包含“pic1”或“pic2”的字符串。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:11:51.757

而不是使用`CellEditingTemplate`，你应该使用`CellTemplate`-

```
<DataGridTemplateColumn.CellTemplate>
   ......              
</DataGridTemplateColumn.CellTemplate> 
```

一旦您双击单元格使其可编辑，就会显示 CellEditingTemplate。而 CellTemplate 是您正在寻找的。

# simperium - Simperium 和可选处理同步

> ID：11975596
> 
> 赞同：1
> 
> 时间：2012-08-15T19:09:26.073
> 
> 标签：simperium

当用户可以随时选择启用或禁用同步时，处理同步的最佳方法是什么？

具体来说，我目前遇到的问题是 Simperium 在其实例被释放后崩溃。考虑以下场景：

1.  创建数据库并插入一些对象
2.  创建 Simperium 实例，登录并同步所有离线创建的对象
3.  注销（意味着释放 Simperium 实例）
4.  创建更多对象

应用程序现在崩溃：

`-[__NSCFString objectsShouldSync]: unrecognized selector sent to instance`

其中 __NSCFString 是一些已经被释放的旧对象

我正在使用当前的主分支。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:37:55.603

这是一个常见的请求，“iosupdate”分支有一些会有所帮助的更改。您可以查看[此 GitHub 问题](https://github.com/Simperium/simperium/issues/10)以获得一些指导。总结一下（引用这个问题的作者）：

初始化 simperium 实例时，设置以下属性：

```
self.simperium.authenticationOptional = YES; 
```

这会出现一个取消按钮。

```
self.simperium.authenticationEnabled = NO; 
```

这可以防止弹出身份验证对话框。

self.simperium.loginViewControllerClass = [LoginViewController 类]; 这会放入 SPLoginViewController 的自定义子类中以覆盖 cancel: 消息，否则您将不会收到用户取消对话框的反馈。

当用户点击“登录”按钮时，我设置

```
self.simperium.authenticationEnabled = YES; 
```

这会导致登录控制器出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T14:44:48.373

我知道这是一个老问题，但我花了很长时间尝试这个并且在任何地方都找不到任何指针，所以......

上面的答案是正确的，但我在设置后发现

```
self.simperium.authenticationEnabled = YES; 
```

我需要添加

```
[self.simperium authenticateIfNecessary]; 
```

让登录视图出现。

# javascript - 谷歌图表如何始终显示工具提示

> ID：11975597
> 
> 赞同：0
> 
> 时间：2012-08-15T19:09:26.093
> 
> 标签：javascript, json, graph, google-visualization

使用下面的代码显示了我必须做些什么来解决以下问题：

1.  我需要在栏的顶部显示列值（总是）而不点击它。
2.  我需要为每个条分配一种颜色
3.  我需要显示 x 和 Y 标签
4.  我需要显示最小值 = 0 和最大值为 5，实际上图形显示从 4.3 到 5.0

有任何想法吗？先感谢您。

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        //load the Google Visualization API and the chart
        google.load('visualization', '1', {'packages':['columnchart']});

        //set callback
        google.setOnLoadCallback (createChart);

        //callback function
        function createChart() {

            var data = new google.visualization.DataTable(
                {
                  "cols": [
                        {"id":"","label":"Topping","pattern":"","type":"string"},
                        {"id":"","label":"Promedio","pattern":"","type":"number"}
                      ],
                  "rows": [
                        {"c":[{"v":"1", "f":null},{"v":4.31,"f":null}]},
                        {"c":[{"v":"2", "f":null},{"v":4.84,"f":null}]},
                        {"c":[{"v":"3", "f":null},{"v":4.77,"f":null}]},
                        {"c":[{"v":"4", "f":null},{"v":4.80,"f":null}]},
                        {"c":[{"v":"5", "f":null},{"v":4.78,"f":null}]},
                        {"c":[{"v":"6", "f":null},{"v":4.80,"f":null}]},
                        {"c":[{"v":"7", "f":null},{"v":4.79,"f":null}]},
                        {"c":[{"v":"8", "f":null},{"v":4.83,"f":null}]},
                        {"c":[{"v":"9", "f":null},{"v":4.77,"f":null}]},
                        {"c":[{"v":"10","f":null},{"v":4.85,"f":null}]},
                        {"c":[{"v":"11","f":null},{"v":4.52,"f":null}]}

                      ]
                }
            )

            //instantiate our chart objects
            var chart = new google.visualization.ColumnChart (document.getElementById('chart_div'));

            //define options for visualization
            var options = {

                width: 800,
                height: 300,
                is3D: true,
                legend: 'none',         
                axisTitlesPosition: 'in',
                title: 'My Graphic',

                hAxis: {
                    title: 'hAxis Title', 
                    titleTextStyle: {color: 'red'},
                    textPosition: 'out'
                },

                vAxis: {

                    viewWindowMode: 'explicit', 
                    viewWindow: {
                        max: 5.0,
                        min: 0.0
                    },
                    minValue: 0.0, 
                    maxValue: 5.0, 
                    textPosition: 'out'

                }
            };

            //draw my chart
            chart.draw(data, options);

        }

    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 700px;"></div>
  </body>
</html> 
```

* * *

![实际图表](../Images/cab7b4312e64cb0379613142afda944c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:06:58.957

非常感谢 asgalant。

请转到[https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/6FyfEBphXO4](https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/6FyfEBphXO4)

# javascript - 带有 jquery、全局命名空间的变量的 $ 前缀

> ID：11975598
> 
> 赞同：0
> 
> 时间：2012-08-15T19:09:29.120
> 
> 标签：javascript, jquery

我知道这可能很明显......但是当我在变量名前加上“$”时，jQuery 到底在做什么。我知道这是将变量放在全局命名空间中，但为什么呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T19:10:19.560

那是完全错误的。

`$`是一个恰好有一个短名称的普通对象（实际上是一个函数）。

`$`本身是一个全局的（`window`对象的属性）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:12:07.890

在 JavaScript`$`中是变量名中的有效字符。将 a 添加`$`到变量并没有什么特别的。

```
var $a;
var a$b;
var $; 
```

这些只是变量，没有特殊含义。

jQuery 只是`window.$`引用`window.jQuery`了语法糖 :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:11:22.877

`$`以（例如）开头的变量`var $myvar;`只是另一个变量，没有任何不同。

**编辑：**

如果通过“前缀”你的意思是：

```
$(myvar) 
```

那不是“前缀”。我认为它被称为“包装”。它“增强”了变量。你甚至可以“包装”`window`它本身...... [http://www.bennadel.com/blog/1838-Wrapping-The-Window-Object-In-A-jQuery-Wrapper.htm](http://www.bennadel.com/blog/1838-Wrapping-The-Window-Object-In-A-jQuery-Wrapper.htm)

它的作用与`jQuery(myvar)`. `jQuery`是一个函数（如果你愿意的话，一个可调用的对象）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T19:12:27.623

*您是否声明了一个名称以 为前缀的变量`$`？*

如果你这样写：

```
$test = 500; 
```

那么是的，您正在使用名为 的变量污染全局命名空间，该变量`$test`与任何其他变量没有什么不同（`$`没有特殊效果）。但在 JQuery 中，您最有可能这样做：

```
$('test') 
```

这只是一个简单的函数调用。函数名是`$`，参数是`'test'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T19:13:14.620

你的意思是当你在做：

```
var $li = $("li"); 
```

您以 . 为`li`前缀`$`。如果您想使用由您决定的前缀，那么您调用变量的名称并不重要`$`。如果知道 $variableName 是 jQuery 对象在调试代码时对您有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T19:14:33.287

jQuery 不能改变 javascript 语言的工作方式。

有两种方法可以创建全局变量

```
globalVariable = ... 
```

或者

```
window.globalVariable = ... 
```

第一个不适用于 javascript 严格模式

当 jquery.js 被执行时，它会将全局函数添加到窗口对象 $ 和 jQuery

它不能改变你的变量是本地的还是全局的，这取决于你。

# sql - 在 Oracle SQL 中识别一组客户的第一个推荐 URL

> ID：11975600
> 
> 赞同：0
> 
> 时间：2012-08-15T19:09:35.083
> 
> 标签：sql, oracle

目标：确定客户的原始**推荐 URL** 。

我有一组成千上万的客户，每个客户都有多个会话。对于每个客户，我想找到第一个 sessionid，然后从那个 sessionid 中，我想在该会话中第一个查看的页面上找到推荐 URL。

我已经能够使用单个客户 ID 执行此操作，但不知道如何以编程方式为所有客户获取此信息。

下面是返回单个客户 ID 的正确数据的 SQL 查询。如何构建一个有两列（“ `Customer_ID`”和“ `Original Referral URL`”）的表？

```
SELECT 
    asciistr(HITS.REFERRER_URL), 
    HITS.REF_MARKER, 
    ACTS.REGISTRATION_DATE,  
    HITS.SESSION_ID, 
    hits.HIT_DATETIME    
FROM DB.CLICKSTRM_WMA_HITS hits
     INNER JOIN DB.D_Customers cus ON hits.customer_id = cus.customer_id
     INNER JOIN DB.ACCOUNTS ACTS ON CUS.ACCOUNT_ID = ACTS.ACCOUNT_ID     
WHERE HITS.IS_FIRST_VIEWED_PAGE = 1    
  AND CUS.ACCOUNT_ID = '999999999'  
GROUP BY HITS.HIT_DATETIME, ACTS.REGISTRATION_DATE, HITS.REF_MARKER, asciistr(hits.REFERRER_URL), HITS.SESSION_ID
ORDER BY HITS.HIT_DATETIME ASC
)WHERE ROWNUM < 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:22:24.833

您可以使用排名/分析函数来做到这一点：

```
select *
from (SELECT asciistr(HITS.REFERRER_URL),HITS.REF_MARKER,      
             ACTS.REGISTRATION_DATE,HITS.SESSION_ID, hits.HIT_DATETIME,
             row_number() over (partition by cus.Account_Id
                                order by hits.sessionid, hits.IS_FIRST_VIEWED_PAGE desc
                               ) as seqnum
      from DB.CLICKSTRM_WMA_HITS hits INNER JOIN
           DB.D_Customers cus
           ON hits.customer_id = cus.customer_id INNER JOIN
           DB.ACCOUNTS ACTS
           ON CUS.ACCOUNT_ID = ACTS.ACCOUNT_ID
     ) t
where seqnum = 1 
```

如果我正确地遵循了您的逻辑，我认为这是正确的。每个客户的最低会话，然后是 IS_FIRST_VIEW_PAGE 为 1 的会话。我假设其他页面的会话为 0。

# c++ - 关闭回显后如何回显输入字符？

> ID：11975603
> 
> 赞同：2
> 
> 时间：2012-08-15T19:09:41.183
> 
> 标签：c++, termios

我有这段代码，用于在终端的登录屏幕上隐藏我的密码。登录后，输入全部还是空白。完成后如何将其设置为正常状态，例如恢复默认值`getline`？

```
#include <iostream>
#include <string>
#include <termios.h>
#include <unistd.h>

using namespace std;

int main()
{
    termios oldt;
    tcgetattr(STDIN_FILENO, &oldt);
    termios newt = oldt;
    newt.c_lflag &= ~ECHO;
    tcsetattr(STDIN_FILENO, TCSANOW, &newt);

    string s;
    getline(cin, s);

    return 0;
}//main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:45:25.887

You've already saved off the previous terminal state with a get call; now you just have to restore it with a [set](http://pubs.opengroup.org/onlinepubs/7908799/xsh/tcsetattr.html) call in the same manner as you set the new state:

```
tcsetattr(STDIN_FILENO, TCSANOW, &oldt); 
```

(For future visitors: the second parameter is a flag that means the change will occur immediately.)

# c++ - 没有Boost的序列化。序列化

> ID：11975606
> 
> 赞同：5
> 
> 时间：2012-08-15T19:09:47.747
> 
> 标签：c++, serialization, mpi

我正在尝试为我的代码实现一个简单的序列化/反序列化方法，以便能够使用 MPI 通过网络传递对象。在一个理想的世界里，我会使用它`Boost.Serialization`，`Boost.MPI`但它们没有安装在我可以访问的一些集群上，所以我正在考虑自己做这个。

我的策略是将每个对象序列化为一个对象，然后通过using作为数据类型`std::stringstream`发送消息。在这种情况下，我将作为指针和消息的大小传递。`MPI_Send``MPI_CHAR``std::stringstream::str()::c_str()``std::streaingstream::str()::size()*sizeof(char)`

我已经想出了如何将所有内容序列化为一个`std::stringstream`对象。我的反序列化方法还需要一个`std::stringstream`对象并将所有内容反序列化。这很好用，除了我不知道如何从 s 数组创建`std::stringstream`对象`char`并避免从数组到流中的额外副本。`char`我应该将我的反序列化方法更改为直接使用 using数组`memcpy`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:41:23.313

这样做的 MPI 方法是使用`MPI_Pack`and `MPI_Unpack`。当然那是 C 语言，可能不如使用 C++ 特性的东西方便。一个简单的例子见[http://www.mcs.anl.gov/research/projects/mpi/tutorial/mpiexmpl/src/bcast/C/pack/solution.html](http://www.mcs.anl.gov/research/projects/mpi/tutorial/mpiexmpl/src/bcast/C/pack/solution.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:36:46.800

使用从数组`istrstream`中提取的。`char`这个的标题是`<strstream>`. 而且，是的，它在 C++ 标准中正式被弃用。该委员会在其早期沉迷于大量的一厢情愿。`istrstream`不会消失。

# knockout.js - 使用 Knockout Js 主题化 Wijmo Data Viz 小部件 (2.1.6)

> ID：11975609
> 
> 赞同：0
> 
> 时间：2012-08-15T19:10:00.480
> 
> 标签：knockout.js, wijmo

我需要根据 Wijmo 小工具中的用户设置对仪表、图表等进行主题化。我希望它们与 css 的工作方式与[其他小部件主题](http://wijmo.com/demo/themes/)相同，但事实并非如此（因为它正在绘制 svg）。我正在使用 Knockout js，我看到我可以绑定每个属性。有人有解决这个问题的好方法吗？我现在有一些烹饪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:15:40.117

我得到[了 Chris Bannon 的回答](http://wijmo.com/topic/handling-browser-resizing-with-knockoutjs/#post-6710)，并将这个问题留给其他人参考。

请参阅他的[jsFiddle](http://jsfiddle.net/mr2qz/14/)以获得一个很好的例子和前进的方向。我很期待下一个版本。

# php - 横向和纵向照片的一种 CSS 样式

> ID：11975611
> 
> 赞同：4
> 
> 时间：2012-08-15T19:10:07.563
> 
> 标签：php, javascript, css

我正在显示以横向和纵向格式拍摄的图像。我想将它们设置为始终以 500 像素显示照片的最长边。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T20:03:04.330

有人发布了我使用的答案，然后出于某种原因将其删除。它运行良好。

```
max-width: 500px;
max-height: 500px; 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:19:50.113

你可以设置 background-size:100% 100%; （这将使图像填充其父元素）然后您可以使包含照片的 div 具有宽度：500px;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T23:28:41.223

**PHP**

```
list($width, $height, $type, $attr) = getimagesize("img/test.jpg");
if($width > $height){
    $newWidth = 500;
    $newHeight = (500 / $width) * $height;
}else{
    $newHeight = 500;
    $newWidth = (500 / $height) * $width;
} 
```

**HTML**

```
<img src="img/test.jpg" width="<?php echo $newWidth; ?>" height="<?php echo $newHeight; ?>" alt="Test" /> 
```

# jquery - 使用replaceWith更改输入按钮后表单未提交

> ID：11975621
> 
> 赞同：0
> 
> 时间：2012-08-15T19:10:38.123
> 
> 标签：jquery

我有一个表单，单击后单击“打开”按钮，该按钮被替换为不同的“保存”按钮，但是，保存按钮不提交表单。

```
$(function() {
    // activate a row
    $(".activate").live('click', function() {

        var rec = $(this).attr('rec');
        var status = $(this).attr('status');

        if (status == 1) {
            disable_attributes(rec);
            $("#activate_" + rec).replaceWith('<input type="button" name="activate" id="activate_' + rec + '" class="activate" value="Open" rec="' + rec + '" status="0">');
        }
        else {
            open_row(rec);
            enable_attributes(rec);
            $("#activate_" + rec).replaceWith('<input id="save_' + rec + '" class="update" type="submit" value="Save" name="submit">').submit_reservation_form();
            // add row to active_user_rows
        }
    });

    $('.clock').popover({
        placement: 'left'
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:27:15.183

您不应该使用`submit_reservation_form()`，而是将 de save 按钮的选择器绑定到 jquery 函数`.submit("#yourformid")`

# c++ - Program not opening after being compiled

> ID：11975622
> 
> 赞同：0
> 
> 时间：2012-08-15T19:10:49.463
> 
> 标签：c++, windows, cygwin

Yesterday I was playing around with an IRC bot in C++. It compiled and worked just fine, the only thing it really did was say "pong" whenever it saw "ping".

Today I tried to implement a random facts bit of code. I compiled it in cygwin using

```
g++ -o ircbot.exe main.cpp bot.h bot.cpp 
```

Now when I try to open it, it tells me "Windows cannot access the specified device, path, or file. You may not have the appropriate permissions to access the file."

After thinking I'd done something wrong I went back, commented out all of the changes I made, tried to compile it again, and it gives the same Windows error. I'm not quite sure where I went wrong here, has anyone had anything similar happen?

Quick update, when I changed the sharing state on Windows to `share with homegroup` it told me the version I was running was not compatible with my version of Windows and to check whether or not it was in 32-bit or 64-bit. I have no idea what it's up to, this is the strangest issue I've had programming. I'll give it a shot in Linux and see if it pulls any silly business.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:11:47.613

这在 Linux 上发生在我身上，但是由于您使用的是 cygwin 并且问题非常相似，因此可能是同一件事。

我在 64 位机器上将 C++ 程序编译成 32 位可执行文件。尝试执行给了我“找不到文件”的消息。

结果它失败了，因为我没有我的程序需要的 32 位版本的库。由于某种原因，链接器没有捕捉到它。

尝试传递 -m32 或 -m64，具体取决于您机器的架构。

# php - ajax调用关闭连接

> ID：11975634
> 
> 赞同：1
> 
> 时间：2012-08-15T19:11:39.467
> 
> 标签：php, javascript, sql, postgresql, jquery

我有一个简单的 ajax 请求，可能在一秒钟内执行多次。我应该`pg_close($con)`在php文件的末尾放一个吗？它会为每个 ajax 请求打开数百个连接，还是会使用它在文件开头打开的同一个连接`$result = pg_query($con, $query);`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:23:23.700

它将在脚本结束时关闭它。在 Apache 和 pg 之间运行像[pgbouncer这样的连接池。](http://pgfoundry.org/projects/pgbouncer/)

请参阅PostgreSQL wiki[中的连接数。](http://wiki.postgresql.org/wiki/Number_Of_Database_Connections)

# android - 如何使用android图形类绘制箭头？

> ID：11975636
> 
> 赞同：4
> 
> 时间：2012-08-15T19:11:45.177
> 
> 标签：android, graphics, android-canvas, draw

如何使用图形类绘制箭头？

我使用 android 图形类，基本上我试图在地图上显示路径。所以我需要在画布上打印一个箭头。帮我弄清楚！

谢谢！

这是我用来画线的方法之一。我想在每一行的边缘打印一个箭头。

```
//       ArrayList<Point> ArrayListPoints = new ArrayList<Point>(); // Assign the shortest path here

//       ArrayListPoints.add(new Point(262,100));
//       ArrayListPoints.add(new Point(262,165));
//       ArrayListPoints.add(new Point(346,165));
//       ArrayListPoints.add(new Point(420,165));

       ArrayList<Point> ArrayListPointsFINAL;

    ArrayListPointsFINAL = storePath.ArrayListPoints;

    if(ArrayListPointsFINAL == null){
        System.out.println("ArrayListPointsFINAL is NULL");
    }
    else{

    ArrayList<Float> ArrayList_X = new ArrayList<Float>();
     ArrayList<Float> ArrayList_Y = new ArrayList<Float>();
     //int size = get.ArrayListPoints.size();

    for(int i=0; i<ArrayListPointsFINAL.size(); i++){
        ArrayList_X.add(Float.parseFloat(String.valueOf(ArrayListPointsFINAL.get(i).x)));
        ArrayList_Y.add(Float.parseFloat(String.valueOf(ArrayListPointsFINAL.get(i).y)));
          }   

    for(int i=1; i<ArrayList_X.size(); i++){
        Paint myPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        myPaint.setStrokeWidth(8/*1 /getResources().getDisplayMetrics().density*/);
        myPaint.setColor(0xffff0000);   //color.RED
       // myPaint.setStyle(myPaint);

       canvas.drawLine(ArrayList_X.get(i), ArrayList_Y.get(i), ArrayList_X.get(i-1), ArrayList_Y.get(i-1),myPaint);       

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T23:17:47.623

希望您仍然会发现这很有用；这是我绘制箭头的方法：

```
 private void fillArrow(Canvas canvas, float x0, float y0, float x1, float y1) {

    paint.setStyle(Paint.Style.FILL);

    float deltaX = x1 - x0;
    float deltaY = y1 - y0;
    float frac = (float) 0.1;

    float point_x_1 = x0 + (float) ((1 - frac) * deltaX + frac * deltaY);
    float point_y_1 = y0 + (float) ((1 - frac) * deltaY - frac * deltaX);

    float point_x_2 = x1;
    float point_y_2 = y1;

    float point_x_3 = x0 + (float) ((1 - frac) * deltaX - frac * deltaY);
    float point_y_3 = y0 + (float) ((1 - frac) * deltaY + frac * deltaX);

    Path path = new Path();
    path.setFillType(Path.FillType.EVEN_ODD);

    path.moveTo(point_x_1, point_y_1);
    path.lineTo(point_x_2, point_y_2);
    path.lineTo(point_x_3, point_y_3);
    path.lineTo(point_x_1, point_y_1);
    path.lineTo(point_x_1, point_y_1);
    path.close();

    canvas.drawPath(path, paint);
} 
```

给定一条端点位于 p(x0, y0) 和 p(x1, y1) 的线，该方法绘制一个箭头，其顶点位于 p(x1, y1)。

变量

```
frac : 0 < frac < 1 
```

确定箭头的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-01T05:20:08.743

当我使用 Igwe Kalu 的解决方案时，箭头的大小会根据点之间的距离而变化。

这是我使箭头大小恒定的解决方案，与点之间的距离无关。

```
private void fillArrow(Canvas canvas, float x0, float y0, float x1, float y1) {
    paint.setStyle(Paint.Style.FILL);

    float deltaX = x1 - x0;
    float deltaY = y1 - y0;
    double distance = Math.sqrt((deltaX * deltaX) + (deltaY * deltaY));
    float frac = (float) (1 / (distance / 30));

    float point_x_1 = x0 + (float) ((1 - frac) * deltaX + frac * deltaY);
    float point_y_1 = y0 + (float) ((1 - frac) * deltaY - frac * deltaX);

    float point_x_2 = x1;
    float point_y_2 = y1;

    float point_x_3 = x0 + (float) ((1 - frac) * deltaX - frac * deltaY);
    float point_y_3 = y0 + (float) ((1 - frac) * deltaY + frac * deltaX);

    Path path = new Path();
    path.setFillType(Path.FillType.EVEN_ODD);

    path.moveTo(point_x_1, point_y_1);
    path.lineTo(point_x_2, point_y_2);
    path.lineTo(point_x_3, point_y_3);
    path.lineTo(point_x_1, point_y_1);
    path.lineTo(point_x_1, point_y_1);
    path.close();

    canvas.drawPath(path, paint);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-07T09:15:26.630

同样的工作......但为了说明......在onDraw中调用下面的方法......这样你就可以看到它是如何工作的......

```
private void fillArrow(Canvas canvas, float x0, float y0, float x1, float y1) {
    Paint paint = new Paint();
    paint.setColor(Color.BLACK);
    paint.setStyle(Paint.Style.FILL);

    float deltaX = x1 - x0;
    float deltaY = y1 - y0;
    float distance = (float) Math.sqrt((deltaX * deltaX)
            + (deltaY * deltaY));
    float frac = (float) (1 / (distance / 15));

    float point_x_1 = x0 + (float) ((1 - frac) * deltaX + frac * deltaY);
    float point_y_1 = y0 + (float) ((1 - frac) * deltaY - frac * deltaX);

    float point_x_2 = x1;
    float point_y_2 = y1;

    float point_x_3 = x0 + (float) ((1 - frac) * deltaX - frac * deltaY);
    float point_y_3 = y0 + (float) ((1 - frac) * deltaY + frac * deltaX);

    float midOfArrow_x = (point_x_1 + point_x_3) / 2;
    float midOfArrow_y = (point_y_1 + point_y_3) / 2;

    Path path = new Path();
    path.setFillType(Path.FillType.EVEN_ODD);

    path.moveTo(point_x_1, point_y_1);
    path.lineTo(point_x_2, point_y_2);
    path.lineTo(point_x_3, point_y_3);
    path.lineTo(point_x_1, point_y_1);
    // path.lineTo(point_x_1, point_y_1);
    path.close();

    path.transform(mMatrix);
    canvas.drawPath(path, paint);

    paint = new Paint();
    paint.setColor(Color.RED);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(9);
    path = new Path();

    path.moveTo(x0, y0);
    path.lineTo(midOfArrow_x, midOfArrow_y);
    path.transform(mMatrix);
    canvas.drawPath(path, paint);

    paint = new Paint();
    paint.setColor(Color.WHITE);
    paint.setStyle(Paint.Style.STROKE);

    canvas.drawCircle(x0, y0, 10, paint);

    canvas.drawCircle(midOfArrow_x, midOfArrow_y, 10, paint);

    paint.setColor(Color.RED);
    canvas.drawCircle(point_x_1, point_y_1, 10, paint);

    paint.setColor(Color.GREEN);
    canvas.drawCircle(point_x_2, point_y_2, 10, paint);

    paint.setColor(Color.BLUE);
    canvas.drawCircle(point_x_3, point_y_3, 10, paint);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T19:16:25.920

您可以改为绘制位图并对其应用矩阵。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T19:23:54.753

// 使用自定义视图，您可以使用路径图元进行绘制：

```
 private Paint mPaint;                 // paint object
  private Path mPathGrid;                   // path object

    @Override
    protected void onDraw(Canvas canvas) 
    {

        if (mPaint == null)
         mPaint = new Paint();                   // cache your paint object
            if (mPathGrid == null)
     mPathGrid = new Path();                 // and your path

        mPaint.setStyle(Paint.Style.FILL);
        mPaint.setAntiAlias(true);

        // a white arrow pointing down
        mPaint.setColor(Color.WHITE);
        mPaint.setStrokeWidth(2);
        mPathGrid.reset();
        mPathGrid.moveTo(100.0, 100.0);         // 100,100 is starting point of path

                // "draw" the outline of your arrow... play "connect the dots"...
        mPathGrid.lineTo(100.0 + 10.0f, 100.0);
        mPathGrid.lineTo(100.0 + 10.0f, 100.0 - 5.0f);
        mPathGrid.lineTo(100.0 + 13.0f, 100.0 - 5.0f);
        mPathGrid.lineTo(100.0 + 10.0f, 100.0 - 8.0f);
        mPathGrid.lineTo(100.0 + 7.0f, 100.0 - 5.0f);
        mPathGrid.lineTo(100.0 + 10.0f, 100.0 - 5.0f);
        canvas.drawPath(mPathGrid, mPaint);

        super.onDraw(canvas);
    } 
```

我在您的代码中看到了这一点：

```
for(int i=1; i<ArrayList_X.size(); i++)
{ 
        Paint myPaint = new Paint(Paint.ANTI_ALIAS_FLAG); 
        myPaint.setStrokeWidth(8/*1 /getResources().getDisplayMetrics().density*/); 
        myPaint.setColor(0xffff0000);   //color.RED 
       // myPaint.setStyle(myPaint); 

       canvas.drawLine(ArrayList_X.get(i), ArrayList_Y.get(i), ArrayList_X.get(i-1), ArrayList_Y.get(i-1),myPaint);        

    } 
```

不要在这样的循环中创建新的 Paint 对象，你只需要一个！您只需要设置笔画宽度、颜色等属性一次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T19:40:55.820

[我建议您使用我在此处](https://stackoverflow.com/questions/11192757/android-rotate-bitmap-around-center-without-resizing)`arrow bitmap`的帖子中的以下代码创建一个和，您可以轻松地转动箭头。

我希望这有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-30T08:59:56.040

我尝试了这段代码，它一直运行良好

```
Here is my code...

switch (event.getAction())
{
   case MotionEvent.ACTION_DOWN:
        mPath.reset();
    mPath.moveTo(x, y);
        mX = x;
        mY = y;
        startPoint = new PointF(event.getX(), event.getY());
        endPoint = new PointF();
        invalidate();

     //   isDrawing = true;
        break;
    case MotionEvent.ACTION_MOVE:
            float dx = Math.abs(x - mX);
        System.out.println("action move");
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE)
        {
        //  currentDrawingPath.path.quadTo(mX,mY,(x + mX)/2, (y + mY)/2);
        }
        mX = x;
        mY = y;
          endPoint.x = event.getX();
            endPoint.y = event.getY();
          isDrawing = true;

          invalidate();
        break;
    case MotionEvent.ACTION_UP:
           mPath.lineTo(mX, mY);
           float deltaX =   endPoint.x-startPoint.x;
           float deltaY =   endPoint.y-startPoint.y;
           float frac = (float) 0.1;

       float point_x_1 = startPoint.x + (float) ((1 - frac) * deltaX + frac * deltaY);
       float point_y_1 = startPoint.y + (float) ((1 - frac) * deltaY - frac * deltaX);

           float point_x_2 = endPoint.x;
           float point_y_2 = endPoint.y;

       float point_x_3 = startPoint.x + (float) ((1 - frac) * deltaX - frac * deltaY);
       float point_y_3 = startPoint.y + (float) ((1 - frac) * deltaY + frac * deltaX);

           mPath.moveTo(point_x_1, point_y_1);
           mPath.lineTo(point_x_2, point_y_2);
           mPath.lineTo(point_x_3, point_y_3);
           mPath.lineTo(point_x_1, point_y_1);
           mPath.lineTo(point_x_1, point_y_1);
            mCanvas.drawPath(mPath, ppaint);
            endPoint.x = event.getX();
            endPoint.y = event.getY();
            isDrawing = false;
            invalidate();
        break;
    default:
        break;
} 
```

# c++ - 如何使用 C++ 检查计算机中安装的 ShellIconOverLayIdentifers 总数

> ID：11975655
> 
> 赞同：0
> 
> 时间：2012-08-15T19:12:41.770
> 
> 标签：c++, windows, winapi, shell-extensions

我需要使用 C++ 和 win32 API 以编程方式检查安装在计算机中的 ShellIconOverLayIdentifers 总数。

我可以检查以下路径下的标识符以获取总数吗？

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\explorer\ShellIconOverlayIdentifiers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:21:28.040

您可以使用[RegQueryInfoKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724902%28v=vs.85%29.aspx)

此代码经过测试并且可以正常工作：

```
#include "stdafx.h"
#include <windows.h>

int _tmain(int argc, _TCHAR* argv[])
{
    LSTATUS lStat;
    HKEY hKey;
    DWORD dwSubKeys;

    lStat = RegOpenKeyExA(
            HKEY_LOCAL_MACHINE, 
            "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\explorer\\ShellIconOverlayIdentifiers",
            0L, KEY_READ | KEY_WOW64_64KEY, &hKey);
    if(lStat == ERROR_SUCCESS)
    {
        lStat = RegQueryInfoKeyA(
            hKey, NULL, NULL, NULL, 
            &dwSubKeys, NULL, NULL, 
            NULL, NULL,NULL, NULL, NULL);

        printf_s("Subkeys : %u\n", dwSubKeys);

        RegCloseKey(hKey);
    }
    return 0;
} 
```

**更新：**

根据 JChan 的调查，在 64 位版本的 Windows 上需要以下密钥访问：

```
KEY_READ | KEY_WOW64_64KEY 
```

[例子](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724256%28v=vs.85%29.aspx)

# json - In CouchDB, how can I emit a key value in a reduce function?

> ID：11975656
> 
> 赞同：0
> 
> 时间：2012-08-15T19:12:43.940
> 
> 标签：json, couchdb, reduce

Currently, my code looks like

```
function(keys, values, rereduce){
    return {"key":keys[0][0],"count":values.length};
} 
```

Upon running this, the resulting row is:

```
key = None, value={u'count':3,u'key':u'123456'} 
```

This works for my purposes, as I just parse the JSON string in the value attribute, but it seems like the wrong way to be doing things.

So how can I have the reduce function emit a key value, rather than None?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:27:26.803

我认为您的代码仅对第一次减少有效。重新减少失败。阅读[CouchDB 视图简介：1.2.2 减少函数](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Reduce_Functions)。当第三个参数 ( ) 是时，请注意声明的第一个参数 ( `key`) 。`reduce()``rereduce``true`

我也认为你`count`不会像你期望的那样工作`rereduce==true`。它应该总结之前减少的计数，而不是计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:46:56.037

我弄清楚发生了什么。reduce 函数创建了一个单一的标量值，而我想要的是一个键值对列表。发生这种情况是因为我没有使用[grouping](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Grouping)。

通过将 'group=true' 参数添加到我的查询中，使用 _count 作为我的 reduce 现在产生

```
key = 123456, value=3 
```

没有分组意味着所有数据都被简化为一个单一的标量值。通过启用分组，只有具有相同键值的项目才能减少事情，这正是我想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:28:52.190

没有足够的上下文可以确定，但您可能会以不同于预期的方式考虑 reduce 函数。[来自 CouchDB 指南](http://guide.couchdb.org/editions/1/en/views.html)：

> 如果您不将值减少到单个标量值或具有固定数量的小尺寸标量值的小型固定尺寸对象或数组，那么您可能做错了。

你的例子确实减少了一些小东西，但这看起来像是巧合。如果你想输出某种键，你可能需要一个 map 函数。或者，重新考虑您在做什么以及它如何适合 MapReduce 模型。

# javascript - 使用 jquery 更新多个选择标签（移动）

> ID：11975657
> 
> 赞同：1
> 
> 时间：2012-08-15T19:12:47.313
> 
> 标签：javascript, jquery, jquery-mobile

我有多个`<select/>` 要同步的标签，以便在更改一个标签时，它们都会更改。它们都是 jquery 移动页面的导航栏标题的一部分。我的选择器是这样的： `$("header select")`.

我连接了这样的`change`事件：

```
var statusselect = $("header select");

var statusevent = function (event) {

    statusselect.off("change");

    statusselect.val(event.target.value);

    statusselect.on("change", statusevent);

    try {
        statusselect.selectmenu("refresh");
    } 
    catch(e) {

    } 
};

statusselect.on("change", statusevent); 
```

这仅在我有该`try/catch`声明时才有效。如果我取出`try/catch`及其内部代码，则`<select/>`仅在第一次更改后更新文本。之后，事件被正确触发并且所有传递的值都是正确的，但文本永远不会更新（显示正确选择的选项）。

如果我取出`try/catch`并离开`statusselect.selectmenu("refresh")`，则会引发异常，说明对象尚未初始化。

所以我摸不着头脑：为什​​么我需要抛出异常才能`<select/>`更改其文本？`<select/>`是否因为不在视图中的 s 引发了异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:20:14.560

我认为您回答了自己的问题，该`refresh`方法旨在刷新`selectmenu`已经初始化的小部件（在这种情况下），在您的情况下，尚未进行其他页面上的选择的初始化（增强发生在[pageinit](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/page-scripting.html) `event`中），因此您需要首先对其进行初始化，您应该可以通过调用手动执行此操作`.selectmenu()`。

# linear-algebra - 单位如何通过矩阵运算流动？

> ID：11975658
> 
> 赞同：4
> 
> 时间：2012-08-15T19:12:47.733
> 
> 标签：linear-algebra, units-of-measurement, type-systems

似乎矩阵数学有许多有用的应用，其中并非给定矩阵中的所有条目都共享相同的单位。我想研究可以跟踪这些单元并确保我们不会犯错误的类型系统（类似于已经对标量算术进行维度检查的许多库和语言）。我将举一个我所说的例子，然后我有几个问题从那里开始。

[（从这里](http://www.cs.washington.edu/education/courses/cse421/10au/lectures/lp.pdf)抄写一个随机混合单位线性规划示例，尽管这不是一个家庭作业问题，希望会变得清晰）

鲍勃的面包店出售百吉饼和松饼。烤一打百吉饼 Bob 需要 5 杯面粉、2 个鸡蛋和 1 杯糖。烤一打松饼 Bob 需要 4 杯面粉、4 个鸡蛋和 2 杯糖。Bob 可以以 10 美元/打的价格出售百吉饼，以 12 美元/打的价格出售松饼。Bob 有 50 杯面粉、30 个鸡蛋和 20 杯糖。Bob 应该烤多少个百吉饼和松饼才能使他的收入最大化？

所以让我们把它放在矩阵形式（任意具体语法......）：

```
 A = [ [ 5 cups of flour / dozen bagels, 4 cups of flour / dozen muffins ],
       [ 2 eggs          / dozen bagels, 4 eggs          / dozen muffins ],
       [ 1 cups of sugar / dozen bagels, 2 cups of sugar / dozen muffins ] ]

 B = [ [ 10 dollars      / dozen bagels, 12 dollars      / dozen muffins ] ]

 C = [ [ 50 cups of flour ],
       [ 30 eggs          ],
       [ 20 cups of sugar ] ] 
```

我们现在想要最大化内积`B * X`，使得`A * X <= C`和`X >= 0`，一个普通的线性规划问题。

在带有单元检查的假设语言中，我们将如何理想地表示这些矩阵的类型？

我在想一个 m x n 矩阵只需要 m + n 个单位，而不需要完整的 m * n 个单位，因为除非这些单位以合理的方式分布到行和列中，否则剩下的唯一合理的操作就是加/减完全一般的矩阵与另一个完全相同的形状或乘以一个标量。

我的意思是，单位的安排`A`比在以下方面更有用：

```
WTF = [ [ 6 pigeons,      11 cups of sugar ],
        [ 1 cup of sugar, 27 meters        ],
        [ 2 ohms,         2 meters         ] ] 
```

而且像后者这样的情况在实践中根本不会出现。（有人有反例吗？）

在这个简化假设下，我们可以用 m + n 个单位表示矩阵的单位如下。对于 m 行中的每一行，我们找出该行中所有条目共有的单位，对于 n 列也是如此。让我们将行单位放在列向量中，将列单位放在行向量中，因为这使得`Units(M) = RowUnits(M) * ColUnits(M)`，这似乎是一个不错的属性。因此，在示例中：

```
RowUnits(A) = [ [ cups of flour ],
                [ eggs ],
                [ cups of sugar ] ]
ColUnits(A) = [ [ dozen bagels ^ -1, dozen muffins ^ -1 ] ]

RowUnits(B) = [ [ dollars ] ]
ColUnits(B) = [ [ dozen bagels ^ -1, dozen muffins ^ -1 ] ]

RowUnits(C) = [ [ cups of flour ],
                [ eggs ],
                [ cups of sugar ] ]
ColUnits(C) = [ [ 1 ] ] 
```

似乎（虽然我不确定如何证明它......）的单位`M1 * M2`是`RowUnits(M1 * M2) = RowUnits(M1)`，`ColUnits(M1 * M2) = ColUnits(M2)`，并且为了使乘法有意义，我们需要`ColUnits(M1) * RowUnits(M2) = 1`。

我们现在可以推断 的单位`X`，因为表达式`A * X <= C`必须表示那个`A * X`并且`C`具有相同的单位。这意味着`RowUnits(A) = RowUnits(C)`（检查出）、`ColUnits(X) = ColUnits(C)`和`RowUnits(X)`是 的转置的元素倒数，`ColUnits(A)`换句话说`RowUnits(X) = [ [ dozen bagels ], [ dozen muffins ] ]`。

（“万岁”，我听到你在欢呼，“我们刚刚绕着月球转了一圈，看到了一些非常明显的东西！”）

我的问题是：

1.  你能想到现实世界的例子，其中矩阵元素的单位不属于这样的“行单位”和“列单位”吗？
2.  你能想出一种优雅的方法来处理相同单元是每个单元格中的一个因素的情况，因此它可以等效地放置在每个“行”或每个“列”中，因此行单元和列单元不是独特的代表？将它们保持在“最低条件”并消除愚蠢的附带条件应该是什么，例如将每一行乘以，`furlongs ^ 17`以便您可以将每列乘以`furlongs ^ -17`？
3.  你能证明我提到的通过矩阵乘法传播这些单元注释的规则吗？
4.  你能发现/展示这些单元注释如何通过矩阵逆运算传播的规则吗？我对 2x2 矩阵进行的一些手工计算表明 的单位`Inverse(M)`是 的单位的元素倒数`Transpose(M)`，但我不知道如何在一般情况下显示它，或者即使对于一般情况也是如此。
5.  你知道关于这些问题的任何学术工作吗？或者对某种语言的程序执行这种静态分析的软件？我可能使用了错误的搜索词，但我找不到任何东西。

我感兴趣的实际应用程序是通过确保所有滤波器增益等在任何地方都具有正确的单位来防止信号处理/控制器软件出现问题，在这些应用程序中，在不同单元中使用具有不同单位的此类矩阵非常常见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:58:24.147

4) 如果你承认 inv(M)*M = Identity 是无量纲的 (Id*X=X)，这与 3 的证明相同）

5）我会询问是否可以扩展 BOOST UNITS [http://www.boost.org/doc/libs/1_50_0/doc/html/boost_units.html](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_units.html)并最终联系作者

1 & 3)
你的量纲问题 Adim*Xdim=Ydim 可以转化为无量纲问题 A*X=Y

*   您将输入参数 X 除以它们各自的单位（X）
*   然后你将输出 Y 乘以它们各自的单位（Y）

那是

```
Ydim=diag(units(Y))*Y
Ydim=diag(units(Y))*A*X
Ydim=diag(units(Y))*A*inv(diag(units(X)))*Xdim
Ydim=Adim*Xdim 
```

或者其他方式

```
Adim*Xdim=Ydim
Adim*diag(units(X))*X=diag(units(Y))*Y
Adim*diag(units(X))*X=diag(units(Y))*A*X 
```

这对于任何 X 都是正确的，所以你会发现

```
A=inv(diag(units(Y))) * Adim * diag(units(X))
Adim=diag(units(Y)) * A * inv(diag(units(X))) 
```

也就是说，您将无量纲 A 的行与 Y 的单位和列乘以 X 的单位的倒数

2）从数学上讲，您从矩阵中简单地考虑了一个标量，所以我认为这个问题与 5）更相关，您如何用软表示这个。回答时必须将此功能作为要求 5）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-07T21:11:57.383

关于该主题的一个非常好的信息来源是 George W. Hart 的“多维分析”一书，该问题的评论中也引用了该书。关于个别问题（数学结果在书中有解释）：

首先，我们需要介绍一点符号。方括号运算符提取矩阵/矩阵条目的物理单位，即为 ![](../Images/4e7d42f97df51418fccae4d36e1e1023.png "\left[A\right]_{ij}")我们提供矩阵 A 中条目 (i, j) 的单位。此外，~ 运算符转置向量/矩阵并反转其单位， IE

![](../Images/f3749047e0bc33170f51f6b886a2630f.png "\left[A^{\sim }\right]_{ij} = \frac{1}{\left[A\right]_{ji}")

然后我们需要书中的另一个结果，它说任何可乘矩阵 A 中的单位都可以写为![](../Images/976f893aab3e999919e7191ea495e3f3.png "\left[A\right] = \left[ab^\sim\right]")，即矩阵条目的单位可以用 2 个向量 a 和 b 的外积来描述，其中 a 是列向量， b^\sim 是一个单位倒置的行向量。

对 4) 的回答：给出矩阵 A 的逆矩阵的单位，![](../Images/ea1e171943a20c249c71a9ae101c90a4.png "\left[A\right] = \left[ab^\sim\right] \Rightarrow \left[A^{-1}\right] = \left[ba^\sim\right]") 这意味着这些单位是原始问题中已经提出的原始单位的元素倒数。

关于 3）：是的，如果内部单位相同并因此抵消，您关于矩阵乘法的规则是正确的，即![](../Images/5d3ebb3ba49fe3780d1961041bc3fcbe.png "\left[AB\right] = \left[ab^\sim\right] \left[bc^\sim\right] = \left[ac^\sim\right]")。

但是，也可以乘以内部列/行单元在维度上平行的矩阵：（![](../Images/307dc7535a5bcff27868e3eab68b76a8.png "\left[AB\right] = \left[ab^\sim\right] \left[cd^\sim\right] = b/c \left[ad^\sim\right]")这里 b/c 非正式地指的是公共单位因子，必须乘以 c 以获得 c）

关于 2）：通常矩阵的每一行或每一列都指代一个特定的物理量，该物理量导致行和列单元的规范表示。例如，考虑卡尔曼滤波应用中的 (x,y) 位置协方差矩阵。在那里，很明显，行和列描述了某个物理单元中的 x 和 y 位置，例如，所有行和列单元都是 [m]，导致每个矩阵元素的单位为 [m^2] . 也可以使用 [m/s] 和 [s*m] 作为行和列单位，这也将导致每个元素的单位为 [m^2]。

但是，从问题描述中应该清楚，第一种表示更有意义。

关于 5）：有 George W. Hart 的书和一篇非常短的论文，其中包含该书[https://www.georgehart.com/research/tdm.ps](https://www.georgehart.com/research/tdm.ps)的一些关键结果。就软件实现而言，Meeting C++ 2021 [https://www.youtube.com/watch?v=4LmMwhM8ODI](https://www.youtube.com/watch?v=4LmMwhM8ODI)的演讲描述了一个库的实现，该库能够用物理单位注释矩阵和向量，所有检查在编译时完成。所提供的库还能够完全处理其他答案之一中描述的离散卡尔曼滤波器示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:30:16.250

我认为这个很好的现实世界的例子——对你的问题 1 的回答——可能是[离散卡尔曼滤波器](http://en.wikipedia.org/wiki/Kalman_filter)的实现。一般来说，它的方程在元组和矩阵上运行，其中一些可能表示对应于物理单位的值。

只要需要多维卡尔曼滤波器计算，其中估计的结果在值类型上不均匀，在我看来就会有反转和转置，以及具有某些（对称）混合值的矩阵之间的乘法在其元素上代表不同的物理事物。

[在尝试使用 DKF 和 C++ 以及代码中的强类型值表示](http://learningcppisfun.blogspot.com/2007/01/units-and-dimensions-with-c-templates.html)来实现传感器融合算法时，我刚刚触及了这个问题。

有很多卡尔曼滤波器实现，开发人员只需使用整数、浮点数、双精度等的向量和矩阵，但我想跟踪使用的每个值的维度，然后问题就出现了。

不幸的是，我对这个问题很陌生（仍在解决这个问题），所以我现在还不能帮助你回答 2 到 5：-/

# javascript - MongoDB Querying: Order & Export Results

> ID：11975667
> 
> 赞同：1
> 
> 时间：2012-08-15T19:13:38.577
> 
> 标签：javascript, mongodb

I have this MongoDB group-by query which works great from the Mongo console:

```
db.accounts.group(
   { cond: { "created_at" : { $gte: ISODate("2012-08-12T00:00:00Z") }}
   , key: {member_id: true}
   , initial: {count: 0, failed: 0, succeeded: 0}
   , reduce: function(doc, out) { 
        out.count++; 
        if (!doc.success)
            out.failed++
        else
            out.succeeded++
    }
   }); 
```

**My three questions:**

*   Is there an easier way of generating this timestamp: ISODate("2012-08-12T00:00:00Z")? Can I use a date function to generate this timestamp? If so, how?
*   How can I sort (asc/desc) the returned results by the grouped fields: "failed" or "succeeded"?
*   Finally, how would I export the output to a flat file?

**Update**

For #3, I was basically looking for this:

```
mongo my_db --eval 'some_var=X;' --quiet my_script.js >> output.txt 
```

Where my_db is the database I'm using, some_var is a variable I'm passing to my_script.js which contains my group-by query. output.txt is obviously where the output is written.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:13:49.403

1.  您可以使用支持此日期表示法的 JS`Date`对象（[http://www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)），但是您所做的方式通常是制作日期的最佳方式，ISO 日期总是更好这就是为什么 Mongo 在 v1.6 或 8 中从普通`Date`对象更改为这些对象（现在不记得了`:\`）。

2.  由于 group 返回单个 BSON 文档（这意味着结果不能大于 16meg），因此您必须在客户端对它们进行排序。更正：您无法对传入的查询进行排序，因为它是我刚刚意识到的单个对象。所以这是客户端的事情。尽管如果您使用 MR（我认为），您可以做到这一点。

3.  只需将返回的结构写入平面文件即可。它是一个单独的文档，我不知道您希望如何将结果格式化为平面文件或您希望使用哪种语言处理它，但通常您会从（例如）PHP 触发 group 命令并继续工作它在那里。在这些类型的语言中更容易。

注意： Group() 不适用于分片，我认为聚合框架（[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)）几乎可以取代它。

# forms - How do I record POST submissions in a text file?

> ID：11975669
> 
> 赞同：0
> 
> 时间：2012-08-15T19:13:48.103
> 
> 标签：forms, perl

I have a form with many fields. Let's simplify and pretend it's only got forename/surname/email here for now. I have to use Perl to process the form because I need to do other stuff with it later.

On submitting the form I need it to do three things:

1.  To put the responses to this form into a text file on the server.

2.  To send an email alert out saying that there's been a new form submitted. It doesn't need to contain the form data, just that a new one is there.

3.  To display a “thanks for filling in the form” page to the person who's just hit submit.

I've tried concentrating on getting it to do any one of those things, but I still don't understand Perl enough to be able to do it. I'm a HTML user at best. It seems like a series of fairly simple things to do, and seems like the sort of thing for which there would be a "stock answer" somewhere, but a *lot* of Googling and reading of answers here hasn't given me anything! If I could just get some idea on how to do the first one, that would be a great start, but I can't even get that far… ☹</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:46:38.910

1.  安装[Plack](https://metacpan.org/module/Plack)和[MIME::Lite](https://metacpan.org/module/MIME%3a%3aLite)。

    ```
    cpan Plack
    cpan MIME::Lite 
    ```

2.  使用纯 HTML 来构建您的表单（命名这个`form.html`或其他名称）。

    ```
    <form action="/send">
        <label>Enter some stuff:</label>
        <input type="text" name="stuff">
        <button type="submit">Send</button>
    </form> 
    ```

3.  编写一个 PSGI 应用程序（命名这个文件`app.psgi`）。

    ```
    use strict;
    use warnings;
    use autodie;
    use Plack::App::File;
    use Plack::Builder;
    use Plack::Request;
    use MIME::Lite;

    builder {
        mount '/form.html' => Plack::App::File->new( file => "form.html" );
        mount '/send' => sub {
            my $req = Plack::Request->new($env);

            open my $fh, '>', 'form.txt';
            print $fh $req->content; # this will be ugly, but you didn't say what format
            close $fh;

            my $email = MIME::Lite->new(
                From => 'website@example.com',
                To => 'user@example.com',
                Subject => 'Form submitted from web site',
                Data => 'Read the subject.',
            );
            $email->send;

            return [ 
                200, 
                [ 'Content-Type' => 'text/html' ], 
                [ '<h1>Thanks for filling in the form.</h1>' ], 
            ];
        }; 
    ```

4.  运行您的网络应用程序：

    ```
    plackup --port 5000 app.psgi 
    ```

5.  将您的浏览器指向：`http://localhost:5000`

6.  完毕。

这不是做这一切的最佳方式，但它是一种非常简单的方式来展示它是多么容易上手，并提供了一个基础。

# php - 将从查询返回的数据库列值排序为数值

> ID：11975685
> 
> 赞同：3
> 
> 时间：2012-08-15T19:14:54.597
> 
> 标签：php, mysql, zend-db

**问题**：我正在编写一个查询，该查询涉及对列的 count() 操作，但以字符串格式返回计数。结果前端的排序就搞砸了。

**详细信息：** 我正在 Zend 中编写以下查询：

```
$select = $this->select()
        ->setIntegrityCheck(false)
        ->from(array('s' => 'student'),
            array('s.id', 
            'start_date' => new Zend_Db_Expr("date(s.start_date)"), 
            ))
        ->joinLeft(array('ps' => 'pstudent'), 
                's.id = ps.st_id',
                array('pscount' => new Zend_Db_Expr('count(ps.st_id)')  ))
        ->where('ps.status = "phd"');

$result = $this->getAdapter()->fetchAll($select); 
```

此查询`pscount`使用`Zend_Db_Expr (count(ps.st_id))`. 在稍后的代码中，我将此数据编码为 json 格式并返回到前端。由于来自 db 的数据以字符串形式出现（即`pscount`字符串），当我在网格列的前端进行排序时`pscount`，我得到以下序列。

**1
10
100
11
12
13**

但是，我希望它按数值排序，所以输出是：

**1
10
11
12
13
100**

我尝试编写`Zend_Db_Expr`as`new Zend_Db_Expr('cast(count(ps.study_id) as signed)')`但结果没有变化。由于应用程序要求，我也不能在查询中使用***order by 。***唯一的其他选择是，如果我遍历`$result`然后`(int)`在 php 代码中进行类型转换。然而，这是最后的选择。 **我宁愿在 mysql 查询中执行此操作，这样我就不必不必要地遍历结果。**

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:18:38.850

只需将其作为字符串数组获取并使用`sort($someArray, SORT_NUMERIC)`. 这将对它们进行排序，就好像它们是数字一样。

如果您需要对复杂对象进行排序，请使用带有比较函数的 usort()。

我不相信您可以在不使用`order by`.

# c# - 为什么类数组比结构数组消耗约 20% 的内存？

> ID：11975687
> 
> 赞同：6
> 
> 时间：2012-08-15T19:15:09.043
> 
> 标签：c#, arrays, class, struct

我正在制作一个 2D 平台游戏并代表一个级别，我正在使用 2D 瓦片数组，这些瓦片是具有位置、类型和各种标志字段的类。当我`class`将 tile 类中的关键字更改为 时`struct`，加载的地图消耗的内存减少了大约 20%。

我不知道这个动作的对错，我只想知道为什么内存消耗的差异。

编辑：数字为 1038 MB，其中瓦片作为类，845 MB 作为结构（没有大部分游戏数据）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T19:20:29.193

对象数组其实就是引用数组，对象存放在堆上。

这意味着引用有 4 或 8 个字节（取决于 x86 或 x64）的开销，然后堆上的每个对象有 8 或 16 个字节的开销。

在结构体数组中，结构体值直接存储在数组中，因此没有额外的开销。

因此，如果您的数据是 48 字节，那么额外的 12 字节（在 x86 模式下）将是所用总内存的 20% 的开销。

请注意，它们的使用方式也有所不同。如果您移动磁贴或将磁贴作为参数发送给方法，如果使用结构，则将复制所有数据，但如果使用类，则仅复制引用。如果你可以保持结构小于 16 字节，性能差异很小，但如果它更大，你可以通过使用类获得更快的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T19:21:23.940

每个对象都有一个 8 字节的标头，其中包含指向类型句柄和同步块索引的指针，而结构是内联分配的。此外，您需要为正在使用的每个引用类型变量分配一个指针大小的引用。

[本文](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)详细介绍了如何在运行时创建对象和布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:08:52.070

结构类型的存储位置（变量、参数、数组元素或字段）保存其所有公共和私有字段的值，通常连接但可能带有一些填充。类类型的存储位置包含对堆对象（4-8 字节）的（可能为空）引用。一个堆对象拥有 8-16 字节的开销加上对象及其祖先拥有的所有公共、受保护和私有字段的内容。

如果您要存储的东西是固定大小的值包，那么您很可能应该使用带有暴露字段的结构。结构应该是不可变的概念可以追溯到 C# 编译器采用如下代码的时代：

```
  只读点 Pt = new Point(3,4);
  无效 Yippie() { Pt.X += 5; }

```

并`Yippie`构造了一个新的临时对象`Point`，复制`Pt`到它，在该临时实例上调用`X`属性设置器，然后丢弃它。有人认为防止这种废话的正确方法不是让编译器说“对不起——你不能在只读结构变量上调用属性设置器”，而是定义结构以便具有只读属性没有二传手。正确的做法是要求任何将要发生变异的结构方法或属性`this`在其声明中表明这一点，并禁止在只读结构上使用此类方法或属性。

在属性中包装结构字段会损害性能，我建议不要这样做，除非需要强制执行结构不变量。我还建议避免声明 structs `readonly`，因为如此声明的任何结构都将在任何时候访问任何字段时被完整复制。

顺便提一下，对于可变类类型需要注意的重要一点：可变类对象的状态不仅包括其字段的内容，还包括对其*存在的所有引用的集合*。在某些情况下，这可能很有用。通常，避免重大问题的唯一方法是让持有对可变对象的引用的实体避免共享此类引用。如果将某些东西设为类类型需要额外的工作来防止引用被乱七八糟地传递，那么这是一个好兆头，表明所讨论的类型应该是一个结构。

# macos - 删除文本文件终端Mac的第一个字

> ID：11975693
> 
> 赞同：0
> 
> 时间：2012-08-15T19:15:16.483
> 
> 标签：macos, terminal, text-files

有没有办法`file.txt`从我的桌面访问文本文件并从每行中删除第一个单词？

*注意，它们是数字，但它们之间用空格分隔，例如单词。

例如，我可以更改：

```
123 456
789 123
456 789 
```

到：

```
456
123
789 
```

也许这是不可能的，我不确定。但是我有大约 6000 行，我宁愿不必手动将它们全部删除。有人有mac用户的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:18:32.487

```
cat file.txt | awk '{print $2}' > out.txt 
```

# c++ - 使用 c while 循环循环所有整数数组元素

> ID：11975699
> 
> 赞同：3
> 
> 时间：2012-08-15T19:15:29.540
> 
> 标签：c++, arrays, pointers

我正在尝试使用指针循环一个整数数组，但我得到一个奇怪的值..

```
int nums[1] = { 1 };
int *p = nums;
while(*p != NULL) {
    cout << " LOOPING, p is " << *p << endl;
    p++;
} 
```

当我运行时，我得到下一个输出：

```
 LOOPING, p is 1
 LOOPING, p is -858993460
 LOOPING, p is 4454504
 LOOPING, p is 3032019 
```

为什么我会得到那些奇怪的值？我应该只看到“1”，因为我一直在循环，直到我得到 NULL 指针，并且在每个循环中我移动下一个指针。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T19:16:54.623

> ```
> while(*p != NULL) { 
> ```

比较错误有两个原因：

*   `*p`是一个整数，而不是像`NULL`暗示那样的指针
*   数组不是 0 终止的，所以即使`NULL`被视为花哨的 0，它也不会工作

你可以试试：

```
int nums[] = {1, 0};
while(*p) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T19:17:42.983

您正在超出数组的范围并查看垃圾值。您的数组大小为 1，并且包含`1`. 所以当时的条件没有得到满足（或者在某些时候它纯粹是偶然得到的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T19:17:02.407

您的条件错误，数组末尾的指针不会为 NULL，所以发生的事情是您超出了数组边界。

此外，使用`*`on 指针获取它指向的内存中的值。所以`*p`在你的情况下意味着“取 p 指向的值”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T19:24:19.737

其他答案已经涵盖了为什么您的代码不起作用 - 只是想添加另一个循环选项：

```
int main()
{
    int nums[] = { 1, 5, 7 };

    int *pEnd = nums + sizeof(nums)/sizeof(int) - 1; // point to last element
    int *p = nums;

    while(p <= pEnd) {
        cout << " LOOPING, p is " << *(p++) << endl;
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-08T19:22:12.603

```
int GetSize(int a[]){
    int ptr=0;
    while(a[ptr]!= NULL){
        ptr++;
    }
    return --ptr;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-20T23:08:13.947

虽然您可以尝试以下代码：

```
int nums[] = {1, 0};
int *p = nums;
while(*p){
    cout << *p;
    p++;
} 
```

请注意，如果您决定在零之后向数组添加更多数字，则在迭代时将无法识别它们。

> ```
> nums[] = {1, 0, 1, 2} 
> ```
> 
> 只会返回
> 
> ```
> 1 
> ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-26T23:18:28.550

对于 int 数组，我们可以将指针变量指向该数组的最后一个的方法是这样做。x = base_address + sizeof(arr)/sizeof(int) -1; “-1”用于添加两倍的基地址。所以如果我们做 p = x; p 将指向数组的结束元素。

这就像通过索引访问数组元素。

# sql - 比较两个sql表时输出不匹配的列

> ID：11975701
> 
> 赞同：0
> 
> 时间：2012-08-15T19:15:39.057
> 
> 标签：sql

我需要构建一个查询，我只能输出两个表 A 和 B 中不匹配的列（相同的结构）

例如表 A 和 B 都有 10 列具有相同的 3 个主键。（这样做的原因是在表 A 或 B 中查找数据输入错误）

例如表 A 的值：ABC 1 2 3 4 5 6 7（这是一行，ABC 是主键的值）表 B 的值是 ABC 1 2 3 4 5 6 8（这是一行，ABC是主键的值）

如您所见，第 10 列具有不同的值（表 A 中的 7，表 B 中的 8）。查询的结果应该是 1、2、3 和 10 列，以及表 B 中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:25:54.450

返回不同的行实际上非常简单：

```
select t1.A, t1.B, t1.C
from table1 t1
inner join table2 t2 on t1.A = t2.A and t1.B = t2.B and t1.C = t2.C
where t1.C1 != t2.C1 or t1.C2 != t2.C2 -- and so on for the remaining columns 
```

这将返回不同行的主键。如果您确实需要命名它们不同的列，它将变得更加复杂，因为您需要为每行返回相同数量的列。您不能拥有动态数量的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:50:41.750

您可以创建一个联合查询，例如：

```
    SELECT Table2.Key1, Table2.Key2, Table2.Key3, CASE WHEN Table1.Value1 <> Table2.Value1 THEN 'Value1' END AS DifferingFields
    FROM Table2 LEFT JOIN Table1 ON Table2.Key1 = Table1.Key1 AND Table2.Key2 = Table1.Key2 AND Table2.Key3 = Table1.Key3
    在哪里 Table1.Value1 <> Table2.Value1
    联合所有
    SELECT Table2.Key1, Table2.Key2, Table2.Key3, CASE WHEN Table1.Value2 <> Table2.Value2 THEN 'Value2' END
    FROM Table2 LEFT JOIN Table1 ON Table2.Key1 = Table1.Key1 AND Table2.Key2 = Table1.Key2 AND Table2.Key3 = Table1.Key3
    在哪里 Table1.Value2 <> Table2.Value2
    联合所有
    SELECT Table2.Key1, Table2.Key2, Table2.Key3, CASE WHEN Table1.Value3 <> Table2.Value3 THEN 'Value3' END
    FROM Table2 LEFT JOIN Table1 ON Table2.Key1 = Table1.Key1 AND Table2.Key2 = Table1.Key2 AND Table2.Key3 = Table1.Key3
    在哪里 Table1.Value3 <> Table2.Value3
    [...为剩余的值字段添加语句...]

```

这将返回 3 个关键字段的值，其中包含不同值的字段名称。

对于 Microsoft Access，请使用：

```
    SELECT Table2.Key1, Table2.Key2, Table2.Key3, IIF(Table1.Value1 <> Table2.Value1,"Value1","") AS DifferingFields
    FROM Table2 LEFT JOIN Table1 ON Table2.Key1 = Table1.Key1 AND Table2.Key2 = Table1.Key2 AND Table2.Key3 = Table1.Key3
    在哪里 Table1.Value1 <> Table2.Value1
    联合所有
    选择 Table2.Key1，Table2.Key2，Table2.Key3，IIF（Table1.Value2 <> Table2.Value2，“Value2”，“”）
    FROM Table2 LEFT JOIN Table1 ON Table2.Key1 = Table1.Key1 AND Table2.Key2 = Table1.Key2 AND Table2.Key3 = Table1.Key3
    在哪里 Table1.Value2 <> Table2.Value2
    联合所有
    选择 Table2.Key1，Table2.Key2，Table2.Key3，IIF（Table1.Value3 <> Table2.Value3，“Value3”，“”）
    FROM Table2 LEFT JOIN Table1 ON Table2.Key1 = Table1.Key1 AND Table2.Key2 = Table1.Key2 AND Table2.Key3 = Table1.Key3
    在哪里 Table1.Value3 <> Table2.Value3

```

如果考虑以下数据：

表 1：
Key1 Key2 Key3 Value1 Value2 Value3
1 2 3 4 5 6
1 2 4 4 5 8
1 2 5 4 5 10
1 2 6 4 6 10

表2：
键1 键 2 键 3 值 1 值 2 值
3 1 2 3 4 5 7
1 2 4 4 5 9
1 2 5 4 5 11
1 2 6 4 5 11

结果如下：
Key1 Key2 Key3 DifferingFields
1 2 6 Value2
1 2 3 Value3
1 2 4 Value3
1 2 5 Value3
1 2 6 Value3

# jquery - 加载链接后执行jquery

> ID：11975703
> 
> 赞同：0
> 
> 时间：2012-08-15T19:15:46.370
> 
> 标签：jquery, ruby-on-rails, href

好吧，所以我觉得我解释这个听起来有点令人困惑，但我会试一试。我的网站由两个单独的网页组成，分别称为主页和菜单页。每个页面的顶部都有一个导航栏，其中包含四个选项。主页有几个不同的区域，用户可以通过导航栏和 jquery show() 和 hide() 函数查看这些区域。所以基本上有人点击了“联系我们”按钮，页面上的所有其他内容都被隐藏了，并且显示了contactUs div。我已经设置好了，如果您在菜单页上并单击任何导航链接（指向菜单页的链接除外），它会将您定向到 root_url（即主页）。

很抱歉有任何混淆！

```
function showContactUs(){
                    $("#contactUs").show();
                    $("#forms").hide();
                    $("#landlords").hide();
                    $("#apartments").hide();
                    $("#home").hide();
                    $("#aboutUs").hide();
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:20:03.563

您可以使用 url 本身，或者更好的选择是将一个类添加到您要重定向到的不同 HTML/PHP 文件中：

```
<body class="contactUs">
//or
<body class="aboutUs"> 
```

js

```
$("#"+$('body').attr('class')).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:30:09.393

您可以在 url 中传递一个参数，然后使用该参数显示/隐藏其他页面上的项目。

[http://chrismills.me/work/project-detail.php?project=knot](http://chrismills.me/work/project-detail.php?project=knot)

我的投资组合网站上有一个示例，然后在我的网站上的 functions.js 文件中搜索 // 加载特色项目，这将向您展示如何根据 url 中的该参数进行显示。

# vba - 使用 VBA 将 Word Doc 保存为 2003 XML

> ID：11975704
> 
> 赞同：0
> 
> 时间：2012-08-15T19:15:55.970
> 
> 标签：vba, ms-word, save

我在 Word 2010 中工作。如果我进行另存为，我可以保存到 Word XML 2003。但是，我在 VBA 下找不到此选项作为 SaveAS 的参数。我看过 MSDN 和 Google，但没有运气。

我发现最好的是这个页面，但它没有说明这些选项中的任何一个是否是 Word XML 2003 选项。

[来自 MSDN 的 WdSaveFormat 枚举](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.wdsaveformat)

有谁知道使用什么参数保存到 Word 2003 XML？如果有人有一个很好的链接到 VBA 参考或书籍推荐，那也会很有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:41:09.560

你需要

```
wdSaveFormat.wdFormatXML 
```

评论合并：

通过查看生成的 XML，您可以判断它是 2003 XML 格式。有两件事将其标记为 Word 2003 XML 格式

*   所有 w: 标签的命名空间是 xmlns:w="schemas.microsoft.com/office/word/2003/wordml
*   没有 Word 2007 Flat OPC 格式中的结构。

但是，您可能会看到一些在 Word 2003 XML 中未使用的命名空间和元素，它们由 Word 2003 保存。

* * *

OP询问了此信息的来源。

回应是（轻微编辑）

主要是试验+word2007 及更高版本使用Flat OPC XML 格式的事实。

我没有仔细研究 word 2003 生成的 word 2003 XML 和 word 2007 等生成的版本之间的区别，但是当我浏览时，似乎有 2003 年以后的命名空间和一些 2003 年后的属性（主要与兼容性有关， 我认为）。

我不知道任何 2003 年后的文档。对于 2003 格式，或 pkg:package 命名空间的任何官方示意图。这表明 ZIP 格式 .docx/m/dotx/m 格式是唯一具有正式识别的格式。

# android - 对话框的自定义样式或禁用活动样式的继承

> ID：11975705
> 
> 赞同：0
> 
> 时间：2012-08-15T19:15:57.010
> 
> 标签：android

我试图为对话框设置我的自定义样式，因为对话框从填充设置为 10 dpi 的活动继承样式。但是我尝试的一切都失败了:)。

风格：

```
<style name="ActivityStyle" parent="@android:style/Theme.Holo.NoActionBar">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:padding">10dp</item>
</style> 
```

对话风格：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="5dip"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="70dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:text="@string/CreateRoomDialog_textName"
            android:textColor="#FFFFFF"
            android:textSize="14sp" />

        <EditText
            android:id="@+id/CreateRoomDialog_fieldName"
            android:layout_width="0dip"
            android:layout_height="38dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_weight="1"
            android:inputType="text"
            android:textSize="12sp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="70dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:text="@string/CreateRoomDialog_textPwd"
            android:textColor="#FFFFFF"
            android:textSize="14sp" />

        <EditText
            android:id="@+id/CreateRoomDialog_fieldPwd"
            android:layout_width="0dip"
            android:layout_height="38dip"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_weight="1"
            android:inputType="textPassword"
            android:textSize="12sp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingLeft="2dip"
        android:paddingRight="2dip"
        android:paddingTop="4dip" >

        <Button
            android:id="@+id/CreateRoomDialog_btnCancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:text="@android:string/cancel" />

        <Button
            android:id="@+id/CreateRoomDialog_btnOK"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_weight="1"
            android:text="@android:string/ok" />
    </LinearLayout>

</LinearLayout> 
```

自定义对话框构造函数：

```
public CreateRoomDialog(Context c, boolean isNew) {
        super(c); - I tried put style here, but no success.

        this.c = c;
        this.isNew = isNew;

        this.setTitle(c.getString(R.string.CreateRoomDialog_addData));
        setContentView(R.layout.createroomdialog);

    } 
```

用填充它看起来像：

![带填充物](../Images/f1244112afb102e465f91da6d6e7b786.png)

没有填充对话框是可以的，但活动没有：

![无填充](../Images/9359c9d4830c2532a0562c3b655fbb8e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:02:27.960

问题解决了。我从样式中删除了填充，因此对话框不继承填充。我手动为每个活动布局添加填充。

# repository - 将 Kettle 文件迁移到存储库

> ID：11975708
> 
> 赞同：1
> 
> 时间：2012-08-15T19:16:24.783
> 
> 标签：repository, etl, pentaho, kettle

目前，我们将本地文件系统中的 Kettle 转换 (ktr) 和作业 (kjb) 文件作为 XML 文件进行管理。我们想开始使用 Kettle 存储库。我熟悉从头开始使用存储库，但我从未将数百个 ktr/kjb 文件从本地文件系统迁移到存储库。是否有实用程序或工具（甚至第三方）可以促进从文件批量导入到 Kettle 中的存储库（PDI，Pentaho 数据集成）？

我们正在使用版本 4.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:25:25.723

4.3 版本附带此案例的示例：

```
samples/Repository Import.ktr 
```

# c# - 将自联接映射到代码优先实体框架 4.3 中的集合

> ID：11975727
> 
> 赞同：5
> 
> 时间：2012-08-15T19:18:23.253
> 
> 标签：c#, entity-framework, entity-framework-4.3

我有一个 POCO 类，它映射到这样定义的自联接表：

```
CREATE TABLE [dbo].[GalleryCategories](
    [CategoryID] [int] IDENTITY(0,1) NOT NULL PRIMARY KEY CLUSTERED,
    [Name] [nvarchar](256) NOT NULL,
    [ParentID] [int] NULL REFERENCES [dbo].[GalleryCategories] ([CategoryID]) ON DELETE NO ACTION ON UPDATE NO ACTION, 
) 
```

我知道有一种方法可以使用模型构建器来定义关系，以从孩子中引用父母......（例如[这样](https://stackoverflow.com/questions/5146013/entity-framework-ctp5-code-first-mapping-foreign-key-in-same-table)）

但是我试图映射的类看起来像这样......

```
public class GalleryCategory
{
    [Key]
    public int CategoryID { get; set; }
    public string Name { get; set; }
    public int? ParentID { get; set; }
    public List<Category> Subcategories { get; set; }
} 
```

换句话说，我试图让子类别填充所有的孩子 - 即遍历层次结构，而不是向上的层次结构。

有没有办法使用 EF 做到这一点？这一定是某个地方的常见问题解答，但在谷歌搜索一个小时后我找不到它:-)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T20:32:51.797

那应该是您班级中的列表子类别吗？如果是这样，并且它是一个自引用表，您可以通过以下任一方式创建映射数据注释：

```
 public class GalleryCategory
    {
        [Key]
        public int CategoryID { get; set; }
        public string Name { get; set; }
        public int? ParentID { get; set; }
        [ForeignKey("ParentID")]
        public virtual List<GalleryCategory> Subcategories { get; set; }
    } 
```

或者像这样流利：

```
 public class Model : DbContext
    {
        public DbSet<GalleryCategory> Categories { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<GalleryCategory>()
               .HasMany(x => x.Subcategories)
                .WithOptional()
                .HasForeignKey(g => g.ParentID);
        }
    } 
```

# json - 如何在 HTML5 数据属性中转义

> ID：11975728
> 
> 赞同：1
> 
> 时间：2012-08-15T19:18:26.167
> 
> 标签：json, html, custom-data-attribute

数据属性的东西对我来说是新的，我刚刚意识到我需要转义空格、逗号等。有人能给我一些关于我的方法的建议吗？下面是我的代码：

```
#A list holds all the strings to be sent to data-attribute, 
#the sequence and length of the list is dynamic, determined by the user 
#(That's why I need to find a way to escape automatically.

Apt_p = []
Apt_p.append('Relative to planting')
Apt_p.append('Relative to harvest')
Apt_p_j=json.dumps(Apt_p) #convert everything into JSON for future usage

#I think below is the place to let escape happen.
html = """<td id="Apt_p_j" data-val=%s></td>""" %(Apt_p_j) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T19:21:03.113

将您的属性值放在双引号内，这样您就不必担心转义空格。然后转义它，就像转义引号中的任何其他属性一样。你的 web 框架应该有一个功能。

# abap - 我怎样才能把这个sql语句变成abap语句？

> ID：11975731
> 
> 赞同：2
> 
> 时间：2012-08-15T19:18:37.513
> 
> 标签：abap, opensql

```
Select knvp.KUNNR, kna1.NAME1, knvp.PARVW, knvp.KUNN2
from landing.kna1 kna1,
landing.knvp knvp,
(Select kna1.KUNNR, COUNT(knvp.KUNN2) as count
from landing.KNA1 kna1
, landing.KNVP knvp
where kna1.KUNNR = knvp.KUNN2
and kna1.KTOKD in('ZPYR', 'ZBPR')
group by kna1.kunnr
having count(knvp.kunn2) < 2)as orphans
where kna1.KUNNR = knvp.KUNNR
and knvp.KUNNR = orphans.KUNNR 
```

基本上这一系列的 sql 语句在 kunnr 表类型上放置了一个计数器，并显示在该表中只出现一次的所有数字。

* * *

SQL 语句的漂亮打印版本（附上这个版本 - 以防一些重要的细节从漂亮的打印机中丢失）：

```
SELECT knvp.kunnr, 
       kna1.name1, 
       knvp.parvw, 
       knvp.kunn2 
FROM   landing.kna1 kna1, 
       landing.knvp knvp, 
       (SELECT kna1.kunnr, 
               Count(knvp.kunn2) AS count 
        FROM   landing.kna1 kna1, 
               landing.knvp knvp 
        WHERE  kna1.kunnr = knvp.kunn2 
               AND kna1.ktokd IN ( 'ZPYR', 'ZBPR' ) 
        GROUP  BY kna1.kunnr 
        HAVING Count(knvp.kunn2) < 2) AS orphans 
WHERE  kna1.kunnr = knvp.kunnr 
       AND knvp.kunnr = orphans.kunnr 

im starting with this

rowNum     col1    col2    col3     col4
1          1234     bp     name1    1234
2          1234     py     name1    1234
3          1223     bp     name2    1223
4          1245     py     name3    1245
5          5432     py     name4    4432

i want to delete row# 1 and 2 because they have the same col1# but
different col2#

result:

rowNum     col1    col2    col3     col4
1          1223     bp     name2    1223
2          1245     py     name3    1245
3          5432     py     name4    5432 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T21:05:50.620

你可以试试

```
SELECT knvp~kunnr
       kna1~name1
       knvp~parvw
       knvp~kunn2
FROM kna1 JOIN knvp ON kna1~kunnr = knvp~kunnr
INTO TABLE lt_some_table_with_matching_structure
WHERE knvp~kunnr IN ( SELECT kna1~kunnr
                      FROM kna1 JOIN knvp ON kna1~kunnr = knvp~kunn2
                      WHERE ( kna1~ktokd = 'ZPYR' OR kna1~ktokd = 'ZBPR' )
                      GROUP BY kna1~kunnr
                      HAVING COUNT( DISTINCT knvp~kunn2 ) < 2 ). 
```

但请注意，这在很大程度上是猜测，因为我根本不明白查询应该做什么。

编辑：使用您评论中的其他信息，您可能想尝试这样的事情：

```
DATA: lt_partners TYPE TABLE OF kunnr. " unsure whether this is the correct type

SELECT kunnr 
  FROM kna1
  INTO TABLE lt_partners
  WHERE ( kna1~ktokd = 'ZPYR' OR kna1~ktokd = 'ZBPR' ).
  " AND probably some other filter criteria
SORT lt_partners.
DELETE ADJACENT DUPLICATES FROM lt_partners. " avoid DISTINCT if you can to take load off the database

IF lt_partners IS NOT INITIAL.
  SELECT knvp~kunnr
         kna1~name1
         knvp~parvw
  FROM kna1 JOIN knvp ON kna1~kunnr = knvp~kunnr
  INTO TABLE lt_some_table_with_matching_structure
  FOR ALL ENTRIES IN lt_partners
  WHERE knvp~kunn2 = lt_partners-table_line
  GROUP BY knvp~kunnr kna1~name1 knvp~parvw
  HAVING COUNT( DISTINCT knvp~kunn2 ) < 2.
ENDIF. 
```

请注意，您不能在此步骤中选择 KNVP~KUNN2，因为您必须将其包含在 GROUP BY 子句中，然后 HAVING 子句将不起作用。（我现在没有可用的系统，所以再次，这是猜测......）

# java - 字符串在 Java 中被截断

> ID：11975734
> 
> 赞同：0
> 
> 时间：2012-08-15T19:18:48.230
> 
> 标签：java

每当我使用 Scanner 处理输入字符串并且字符串包含空格时，只会出现第一个单词。如何调整它以便将整个短语输入到一个字符串变量中？

我的代码：

```
import java.util.Scanner;

public class HelloWorld {
    public static void main(String[] args) {
        Scanner scan = new Scanner(System.in);
        System.out.print("Enter your name: ");
        String name = scan.next();
        String namefinal = name.replace(' ', '_');
        System.out.println(namefinal);
    }   
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T19:19:49.993

尝试`scan.nextLine()`代替`scan.next()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-15T19:20:17.817

> Scanner 使用分隔符模式将其输入分解为标记，默认情况下匹配空格

来源：[扫描仪 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-15T19:39:17.093

如果您真的想一步到位，则必须实现自己的阅读器或使用`JOptionPane`. 这是一个例子

公共类 HelloWorld {

```
public static void main(String[] args) {

    System.out.print("Enter your name: ");
    String name = JOptionPane.showInputDialog("Enter your name");
    System.out.println(name);

} 
```

}

# objective-c - 使用通过 segue 传递的值的 Objective-C 计算不起作用

> ID：11975735
> 
> 赞同：0
> 
> 时间：2012-08-15T19:18:56.420
> 
> 标签：objective-c, xcode, nsstring, segue

一个简单的问题，希望。为什么我的**lostWagesLabel**和**totalNeedLabel为****0** - 以下代码中计算的两个值？

 ******编辑：原始问题完全替换为以下代码-根据迄今为止收到的建议进行了更新：**

三个值通过 segue 从父场景传递到此场景。当在此场景中显示为文本值时，所有三个值都会正确显示。但是当我运行 NSLog 时，只有一个值（周）正确显示 - 这意味着其他两个值将作为 0 进入计算。

以下是父场景中的声明：

```
IBOutlet UISlider *earningsSlider;
IBOutlet UILabel *earningsLabel;
IBOutlet UISlider *disabledSlider;
IBOutlet UILabel *disabledLabel;
IBOutlet UISlider *expensesSlider;
IBOutlet UILabel *expensesLabel; 
```

这是一个实现示例：

```
- (IBAction)earningsSlide:(id)sender {
    NSNumberFormatter *commas = [NSNumberFormatter new];
    commas.numberStyle = NSNumberFormatterDecimalStyle;
    int earningsValue = (int)(earningsSlider.value / 1000.0);
    [earningsSlider setValue:earningsValue * 1000.0];
    earningsLabel.text = [NSString stringWithFormat:@"$%@", 
                         [commas stringFromNumber:[NSNumber numberWithFloat:earningsValue * 1000]]];
} 
```

这是所有东西都通过segue的地方：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"DisabilitySegue"]) {
        DisabilityViewController *destViewController = segue.destinationViewController;
        destViewController.earningsNumber = self->earningsLabel.text;
        destViewController.expensesNumber = self->expensesLabel.text;
        destViewController.disabledNumber = self->disabledLabel.text;
    }
} 
```

以下是新场景中的声明：

```
@property (nonatomic, strong) IBOutlet UILabel *earningsLabel;
@property (nonatomic, strong) NSString *earningsNumber;
@property (nonatomic, strong) IBOutlet UILabel *expensesLabel;
@property (nonatomic, strong) NSString *expensesNumber;
@property (nonatomic, strong) IBOutlet UILabel *disabledLabel;
@property (nonatomic, strong) NSString *disabledNumber;
@property (nonatomic, strong) IBOutlet UILabel *message;
@property (nonatomic, strong) NSString *lostWages;
@property (nonatomic, strong) IBOutlet UILabel *lostWagesLabel;
@property (nonatomic, strong) NSString *totalNeed;
@property (nonatomic, strong) IBOutlet UILabel *totalNeedLabel; 
```

这是当前状态下的实现：

```
- (void)viewDidLoad
{
    NSNumberFormatter *commas = [NSNumberFormatter new];
    commas.numberStyle = NSNumberFormatterDecimalStyle;
    earningsLabel.text = earningsNumber;
    expensesLabel.text = expensesNumber;
    disabledLabel.text = disabledNumber;
    int earn = [earningsNumber intValue];
    int expense = [expensesNumber intValue];
    int weeks = [disabledNumber intValue];
    NSLog(@"%d %d %d",earn,expense,weeks);
    //print values to console
    int lost = (int)(earn / 52 * weeks);
    int need = (int)(expense * 12 / 52 * weeks);
    NSLog(@"%d %d",lost,need);
    //print values to console
    lostWages = [NSString stringWithFormat:@"$%@",
                        [commas stringFromNumber:[NSNumber numberWithInteger:lost]]];
    totalNeed = [NSString stringWithFormat:@"$%@",
                        [commas stringFromNumber:[NSNumber numberWithInteger:need]]];
    lostWagesLabel.text = lostWages;
    totalNeedLabel.text = totalNeed;

    [super viewDidLoad];
} 
```

当我在父场景中使用尽​​可能少的 1000、100 和 1 作为*收入*、*费用*和*禁用*（*周）运行 NSLog 时，NSLog 看起来像这样：*

**2012-08-17 09:01:38.277 我的应用程序 [8117:15203] 0 0 1**

**2012-08-17 09:01:38.279 我的应用程序 [8117:15203] 0 0**

我还尝试更改通过 segue 发送的内容的格式，并将其作为父场景中的声明：

```
@interface IncomeProtectionViewController : UIViewController {

    IBOutlet UISlider *earningsSlider;
    IBOutlet UISlider *expensesSlider;
    IBOutlet UISlider *disabledSlider;
    IBOutlet UILabel *earningsLabel;
    IBOutlet UILabel *expensesLabel;
    IBOutlet UILabel *disabledLabel;
    NSNumber *earningsNumber;
    NSNumber *expensesNumber;
    NSNumber *disabledNumber;
} 
```

这在实现中：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"DisabilitySegue"]) {
        DisabilityViewController *destViewController = segue.destinationViewController;
        destViewController.earningsNumber = self->earningsNumber;
        destViewController.expensesNumber = self->expensesNumber;
        destViewController.disabledNumber = self->disabledNumber;
    }
} 
```

但是我在目标场景中收到了不兼容警告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:38:27.977

这里有很多问题。

首先，永远，永远，*永远*，使用`float`或类似类型的货币或其他精确值。你*会*在计算中得到错误的答案。这就是创建并解决的问题`NSDecimal`。`NSDecimalNumber`

这就引出了另一个问题：你想用数学做什么？：

```
int need = (int)(expense * 12 / 52 * weeks); 
```

好的，所以您已经完成了一些浮点数学运算，然后将结果转换为`int`. （通常您可能希望使用 NSInteger，但我们将把它放在一边。）这意味着任何小于 1 的值都将向下舍入为零，这可能是您的问题，具体取决于您的输入。（我猜这就是你的问题所在；使用调试器检查你的值！）

```
totalNeed = [NSString stringWithFormat:@"$%@",
                    [commas stringFromNumber:[NSNumber numberWithFloat:need]]]; 
```

那么，鉴于上述情况，您为什么要`+numberWithFloat:`使用`int`? 我认为这不会自行中断，但它仍然不是真正正确的。

顺便说一句，我猜你的整数文字（12 和 52）来自日历（每年 12 个月，每年 52 周）。如果不是，您可以忽略这一点，但如果是，那么这也是错误的：并非所有年份都有 52 周，并非所有年份都有 12 个月（对于月份的某些定义）。您不应对此类值进行硬编码，而应根据需要使用各种[日期和时间函数](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html)进行数学运算。

最后，如果你不使用 ARC，你就是在泄漏`commas`.

**跟进**

查看您更新的代码，我还有几个问题：

```
int earningsValue = (int)(earningsSlider.value / 1000.0);
[earningsSlider setValue:earningsValue * 1000.0]; 
```

这是要做什么？您不是只是设置了相同的值（尽管可能引入了一些不精确）？

```
destViewController.earningsNumber = self->earningsLabel.text; 
```

这*不是*访问对象的属性或实例变量的正确方法。 `->`取消引用结构指针的成员。您大概想使用`self.earningsLabel`or `[self earningsLabel]`。

最后，将视图与模型混合在一起通常是不明智的。例如，这里您似乎使用标签文本作为支持数据的表示，然后强制进行大量类型转换等。最好有一个模型对象，可能`NSDecimalNumber`用于支持存储，并从模型中更新您的视图。****

# php - phpunit - Windows php.exe 错误

> ID：11975736
> 
> 赞同：0
> 
> 时间：2012-08-15T19:18:59.520
> 
> 标签：php, phpunit

> **可能重复：**
> [程序无法启动，因为缺少 php5.dll](https://stackoverflow.com/questions/5592739/program-cant-start-because-php5-dll-is-missing)

当我尝试在命令行中启动测试时出现此错误：

> 程序无法启动，因为您的计算机缺少 php5.dll。尝试重新安装程序以解决问题。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:27:49.420

尝试将 php 目录和 php 扩展目录添加到 PATH 环境变量中。

# google-app-engine - Google 应用引擎是商业网络应用的最佳选择吗？

> ID：11975737
> 
> 赞同：-1
> 
> 时间：2012-08-15T19:19:02.423
> 
> 标签：google-app-engine

我用 jsp 编写了一个小网络应用程序，并使用 tomcat 和 mysql 数据库在本地主机上运行。我想把它放在网上，以便我可以从任何地方查看它，并考虑使用我的备用笔记本电脑来托管它（我不知道该怎么做）。我开始四处搜索并阅读了一些关于谷歌应用引擎的信息。我想也许我可以弄清楚如何通过它上传我的项目，但我还没有。无论如何，从我读到的所有内容中，我开始怀疑谷歌应用引擎是否真的是最好的答案。我对我想创建的网络应用程序有一些其他想法，并想知道使用谷歌应用程序是否是我的最佳选择。如果我创建下一个 youtube 或 pandora。我会因为我选择使用 Google App Engine 而遇到问题吗？我是否应该努力尝试弄清楚如何将我的（现在很小的）网络应用程序放到第三方服务器上？如果我应该那么我应该从哪里开始寻找这些东西呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:48:06.967

如果您已经开发了您的应用程序并希望以最少的工作量将其托管，您可能想尝试 AWS - 简单、便宜且可扩展。另一方面，如果您的应用程序（尤其是您的数据库模式）很简单，那么您可能更愿意将代码迁移到应用程序引擎。我建议[阅读文档](https://developers.google.com/appengine/docs/java/overview)并[做一些教程](https://developers.google.com/appengine/docs/java/gettingstarted)，看看有什么可能，然后根据你的经验做出决定

# javascript - Node.js 猫鼬性能

> ID：11975738
> 
> 赞同：11
> 
> 时间：2012-08-15T19:19:04.450
> 
> 标签：javascript, node.js, mongodb, mongoose

有没有人有使用 mongoose.js 作为大规模 Mongodb 的 Node.js 映射器的经验？

我想知道是否应该使用本机驱动程序，所以我保持一切轻量级或编写一个简单的包装器。

如果有人得到一些提示，请建议非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-27T18:52:33.907

派对有点晚了，但根据[这篇文章](https://medium.com/@bugwheels94/performance-difference-in-mongoose-vs-mongodb-60be831c69ad)， Mongoose 与原生 MongoDB Node.js 客户端相比表现更差。对于收集的每个指标（查询和插入），Mongoose 或多或少都会变慢（操作数/秒）。

可以在[此处找到带有基准测试的源代码](https://github.com/bugwheels94/mongoose-vs-mongodb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:41:47.457

除非您真的需要 ORM\ODM，否则我建议您根本不要使用 Mongoose。

似乎大多数人（包括我，简要地说）都在使用 Mongoose，因为本机驱动程序的 api 笨拙且难以理解。

这就是我切换到[mongojs](https://github.com/gett/mongojs)的原因。Mongojs 是一个封装了原生驱动的模块，但它的 api 更简洁，几乎与 mongo shell 相同。

我不能真正评论 Mongoose 的可扩展性，但 mongojs 就是这样，一个围绕本机驱动程序的轻量级包装器。

# html - 如何使用css hover更改表格内的img边距

> ID：11975746
> 
> 赞同：0
> 
> 时间：2012-08-15T19:19:33.530
> 
> 标签：html, css, hover

我想稍微移动鼠标上的图像，但它不起作用。
图像位于表格单元格内。单元格没有间距，没有填充，没有定义的高度
表格外的图像 - 效果很好。

```
#img01 { 
    width:25px; 
    height:25px; 
    margin:9px 10px 0px 0px;
    cursor:pointer;
}

#img01:hover {
    margin-top:4px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:20:58.880

图像默认是内联的。尝试添加：

```
display: block 
```

到图像。

# sql - 引用 SELECT 列表中其他地方的别名

> ID：11975749
> 
> 赞同：2
> 
> 时间：2012-08-15T19:20:03.810
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有以下查询：

```
 select FirstName, LastName,
    Case
     When LastName = 'Jones'
     then 'N/A'
    End as Other,
    Case 
      When Other is not null 
      then 1 
    else 0 as Flag 
```

Flag 值取决于 Other，但由于 Other 是别名，因此 Flag 字段无法识别 Other。

我想，我可以在选择中使用选择。Flag 是否有更好的方法来识别其他别名列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T19:21:52.313

由于解析查询的方式，您不能引用 SELECT 和 ORDER BY 之外的别名。典型的解决方法是将其埋在派生表中：

```
SELECT 
  FirstName, LastName, Other, 
  Flag = CASE WHEN Other IS NOT NULL THEN 1 ELSE 0 END
FROM 
(
  SELECT FirstName, LastName,
    CASE WHEN LastName = 'Jones'
     THEN 'N/A'
    END AS Other
  FROM dbo.table_name
) AS x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:41:25.723

您也可以使用公用表表达式 (CTE) 执行此操作：

```
;WITH cte AS 
(
SELECT 
    firstname, 
    lastname, 
    CASE WHEN lastname = 'Jones' THEN 'N/A' 
    END AS Other 
FROM @t
) 
SELECT 
    firstname, 
    lastname, 
    CASE WHEN other IS NOT NULL THEN 1 
        ELSE 0 
    END AS Flag 
FROM cte 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:27:10.310

您必须`SELECT`在 a 中使用 a `SELECT`：

```
SELECT FirstName, LastName, Other, 
    Case When Other is not null 
         then 1 
         else 0 END as Flag
FROM 
(
    select FirstName, LastName,
        Case
         When LastName = 'Jones'
         then 'N/A'
        End as Other
    from yourTable
) x 
```

或者，您可以在评估字段时重用该字段的`CASE`语句：`Other``Flag`

```
select FirstName, 
    LastName,
    Case 
        When LastName = 'Jones'
        then 'N/A'
    End as Other,
    case when LastName = 'Jones' -- your Other CASE code here
        then 1
        else 0
    END as flag 
from yourTable 
```

# asp.net-mvc-3 - 将属性添加到自定义 HtmlHelper 的元素

> ID：11975751
> 
> 赞同：1
> 
> 时间：2012-08-15T19:20:12.467
> 
> 标签：asp.net-mvc-3, html-helper

我正在使用此代码生成自定义`DropDownListFor`

```
public static MvcHtmlString LookupFor<TModel, TEnum>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TEnum>> expression)
{
    ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
    string lookup = metadata.PropertyName;

    IEnumerable<lookup> list = Get(lookup);
    IEnumerable<SelectListItem> items = list.Select(o => new SelectListItem
                 {
                     Text = o.title,
                     Value = o.id.ToString(),
                     Selected = o.id.Equals(metadata.Model)
                 }).ToList();

    string id = "_" + (new Random()).Next(10000);
    MvcHtmlString dropDown = htmlHelper.DropDownListFor(expression, items, "---", new {title = lookup, id});
    return dropDown;
} 
```

可以添加`HTML attribute`一些**吗** `options`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:16:51.527

您需要使用 前缀`class`，`@`因为 class 是 C# 中的关键字：

```
MvcHtmlString dropDown = htmlHelper.DropDownListFor(expression, items, "---", new { @class = "cssClass", title = lookup, id}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:32:56.067

我为此目的找到了解决方案

```
public static HtmlString LookupFor<TModel, TEnum>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TEnum>> expression)
        {
            ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
            string lookup = metadata.PropertyName;

            IEnumerable<lookup> list = Get(lookup).ToList();
            IEnumerable<SelectListItem> items = list.Select(o => new SelectListItem
            {
                Text = o.title,
                Value = o.id.ToString(),
                Selected = o.id.Equals(metadata.Model)
            }).ToList();

            string id = "_" + (new Random()).Next(10000);
            MvcHtmlString dropDown = htmlHelper.DropDownListFor(expression, items, "---", new { title = lookup, id });

            var xml = XDocument.Parse(dropDown.ToHtmlString());
            var xml_select = xml.Element("select");
            if (xml_select != null)
            {
                var options = xml_select.Elements("option");
                foreach(var c in options )
                {
                    var val_attribute = c.Attribute("value");
                    if (val_attribute != null)
                    {
                        string value = val_attribute.Value;
                        int tmp;
                        if (Int32.TryParse(value,out tmp))
                        {
                            var fd = list.FirstOrDefault(o => o.id == Convert.ToInt32(value));
                            if (fd == null) continue;
                            if (!fd.active)
                            {
                                c.SetAttributeValue("class", "deactive-lookup");
                            }
                        }
                    }
                }
            }
            string html_string;
            using (var stringWriter = new StringWriter())
            {
                using (var xmlTextWriter = XmlWriter.Create(stringWriter))
                {
                    xml.WriteTo(xmlTextWriter);
                    xmlTextWriter.Flush();
                    html_string =  stringWriter.GetStringBuilder().ToString();
                }
            }
            return  new HtmlString(html_string);
        } 
```

# javascript - 如何在 div 中创建 img 的平滑鼠标悬停

> ID：11975756
> 
> 赞同：0
> 
> 时间：2012-08-15T19:20:33.267
> 
> 标签：javascript, jquery, css, hover

我想让我的 img.icon_zoom（第 4 行）只在鼠标悬停时出现。该图像将是我想要获得的效果。因此，一旦客户端用鼠标悬停，图标就会慢慢淡入。后面的图片是一个链接，如果点击它会打开一个保管箱，它通过 class="piczoom" 链接。我该怎么做？！？！

![在此处输入图像描述](../Images/ddd05d040287685051bc05b7be2232e6.png)

这是我的实际代码。前 4 行中有趣的部分：

```
<div id="tab1">
                    <div class="usual">
                        <a class="piczoom" href="_img/prensa/DOC2.jpg"><img alt="" src="./_img/prensa/photo_zoom.jpg"  class="photo_zoom" /></a>
                        <img class="icon_zoom" src="_img/prensa/icon.zoom.png" alt="zoom" />
                    </div>

                    <article>
                        <p class="p_title1"><img src="./_img/prensa/medio.png" alt="" /></p>
                        <img class="under1" src="./_img/prensa/underline.png" alt="" />
                        <p class="p_text">Revista la Moraleja</p>
                        <br>
                        <br>
                        <p class="p_title2"><img src="./_img/prensa/description.png" alt="" /></p>
                        <img class="under2" src="./_img/prensa/underline.png" alt="" />
                        <p class="desc_txt" class="p_text">Entrevista realizada por Antonio Corales. Visitaron el estudio mientras se realizaba los preparativos previos a la exposicion de Santander. Esta entrevista fue publicado en las tres primera paginas de la revista. hola
                        </p>
                        <br>
                        <div class="quote_box">
                            <img class="quote_left" src="./_img/prensa/quote.left.png" alt="" />
                            <p class="quote">Sus colores y textura te imnotizanaran</p>
                            <img class="quote_right" src="./_img/prensa/quote.right.png" alt="" />
                        </div>
                    </article>
                </div> 
```

它是最后的学校项目，所以我非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:29:32.430

因为你想要平滑，你可能想要预加载你的图像，所以添加到你的 css...

```
div#preloaded-images {
    position: absolute;
    overflow: hidden;
    left: -9999px; 
    top: -9999px;
    height: 1px;
    width: 1px;
} 
```

在您的 html 的底部...

```
<div id="preloaded-images">
    <img src="path/to/my-image.png" width="1" height="1" alt="" />
</div> 
```

然后添加一些jquery来淡入你的图像......

```
$('#mydiv').hover(function () {
    $('#imageId').fadeIn('slow', function() {});
}, 
function () {
    $('#imageId').fadeOut('slow', function() {});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:18:48.043

最后，我用我得到的答案找到了答案。谢谢大家...

我创建了一个代码，所以一旦加载页面，图标会非常缓慢地淡入，如果鼠标悬停，则悬停淡入和淡出将开始工作。这是我给任何好奇的人的代码，谢谢！！！！

```
<script type="text/javascript">
        /*JQ Fancybox for zoom foto*/
        $(document).ready(function() {
            $("a.piczoom").fancybox({
                'overlayShow'   : false,
                'transitionIn'  : 'elastic',
                'transitionOut' : 'elastic'
            });

            /*JQ to fade in on load*/
            $('.icon_zoom').hide().fadeIn(3000);

            /*JQ after load to work with hover*/
            $('.pic_zoom_box').hover(function () {
                $('.icon_zoom').fadeIn('slow', function() {});
            }, 
            function () {
                $('.icon_zoom').fadeOut('slow', function() {});
            });

        });
        </script>

<div class="pic_zoom_box" class="usual">
                            <a class="piczoom" href="_img/prensa/2_Cutted_zoom/diario_montanes/el_diario_Montanes.jpg">
                                <img alt="" src="_img/prensa/3_Cutted_preview/diario_montanes/el_diario_montanes.jpg"  class="photo_zoom" />
                                <img class="icon_zoom" src="_img/prensa/icon.zoom.png" alt="zoom" />
                            </a>
                        </div> 
```

# html - 将标签锚定为不带href的按钮

> ID：11975757
> 
> 赞同：3
> 
> 时间：2012-08-15T19:20:40.250
> 
> 标签：html, css

我发现除非在表单上，​​否则`<a>`锚标签几乎总是用作按钮。

我的问题不是为什么要使用`<a>`标签，而是为什么`href="#"`还要使用。

据我了解，`<a>`没有 href 是有效的 html，实际上，在“按钮”锚和链接锚标记之间提供了更多区别，因为`:link`只有`:visited`在存在 href 时才会触发。甚至光标也可以变回指针，并且通过更改`::selection`. （[示例](http://jsfiddle.net/gX7MJ/2/)）

虽然两者都受到影响`:active`（尽管可以通过说`a:visited:active, a:link:active {---}`链接来区分），但我能想到不这样做的唯一原因是也删除了标签顺序。

但是，从好的方面来说，您可以删除`href="#"`（这在测试页面、禁用 javascript 等时很有用），为“按钮”提供不同的默认样式，并且更容易在代码中区分。此外，您始终可以将其分配`tabindex="0"`到选项卡流中，并且将来 css 可能会引入[nav-index](http://www.w3.org/TR/css3-ui/#nav-index0)，它已经在 Opera 中引入（尽管这是一个有风险的属性）。

虽然删除标签顺序可能很麻烦，但我认为它是这样的：您只需替换`href="#"`for `tabindex="0"`，它仍然可以区分“按钮”和链接，从而允许您设置它们的样式。

所以我想我最初的为什么`href="#"`使用的问题仍然是我的主要关注点，但我想听听我是否错过了为什么应该/不应该做的任何兴趣点，以潜在地成为将链接与“按钮”分开的更好方法.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:37:37.227

使用该属性`href="#"`是因为一些（真正的）旧浏览器`onclick`仅支持链接等属性。通过使用`href="#"`，您将`a`元素转换为这种意义上的链接。后来原来的原因都忘记了，人家只是抄代码。

当浏览器中禁用 JavaScript 时，该`href="#"`属性使元素成为指向当前文档开头的链接。这几乎不是一个合理的后备方案；要提供非 JavaScript 回退，该`href`属性应指向包含某些服务器端回退的 URL。

当 JavaScript 被启用并且作者忘记结束一个事件处理程序`return false`或其他抑制正常链接处理的东西时，在处理程序执行后链接将被跟踪。所以当前页面被重新加载并定位在开始处。这可能会或可能不会被忽视。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:30:27.833

为锚标记按钮提供一个带有“#screen1”、“#screen2”等内容的 href，并将其与某种路由或 url 匹配相结合，可以让您的应用程序利用浏览器的后退和前进按钮。

如果单击#screen1，然后单击#screen2，然后能够使用后退按钮进入screen1 对您的应用程序很有用，您可能希望以这种方式使用href。

# css - 媒体查询：屏幕 > 1024

> ID：11975758
> 
> 赞同：17
> 
> 时间：2012-08-15T19:20:51.983
> 
> 标签：css, media-queries

我正在尝试在站点中应用媒体查询，但我的知识并不深入这个主题，所以基本上我想在检测到的屏幕大于 1024*768 时将特定样式应用于标签。

我做了这个

```
@media screen and ( device-width: 1024px ) {

} 
```

但我必须确定分辨率何时大于 1024

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-15T19:24:44.483

尝试这个：

```
@media only screen and (min-width : 1025px) {
    .classname {
        /* styles here */
    }
}

@media only screen and (max-width : 1024px) {
    .classname {
        /* other styles here */
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-15T19:24:37.333

使用标准媒体屏幕查询。一旦宽度为 1024 像素或更大，查询将触发样式更改。

```
@media screen and (min-width: 1024px) {
    /* Styles go here */
    #layout {
        width: 90%;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T19:23:32.817

```
@media all and (min-width: 1024px) {
  #css {
    foo : bar;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-04T05:23:29.227

```
@media (min-width: 1024px) and (max-width: 1920px) { 
```

html { 背景：红色；} }

# android - 线程和设备方向

> ID：11975763
> 
> 赞同：0
> 
> 时间：2012-08-15T19:21:08.210
> 
> 标签：android, multithreading, orientation

我主要`Activity`是在按下按钮时会启动其他名为 Getter 的类，并且该 Getter 类会创建 1-60 000 个线程（用于处理网络内容），因此它们都需要一些时间才能完成。我的问题是，当我在这些线程运行时旋转我的设备时，我的程序停止正常工作。在我的主要活动中，我有处理程序每​​ 2 秒从 Getter 类获取一个数组，然后将这些值放入本地数组列表中。

我试过这个解决方案：

[后台任务、进度对话框、方向更改 - 是否有任何 100% 可行的解决方案？](https://stackoverflow.com/questions/3821423/background-task-progress-dialog-orientation-change-is-there-any-100-working/3821998#3821998)

但发现它非常复杂。所以现在我想知道是否有其他解决方案可以解决我的问题。例如，即使我的方向发生变化，我的线程是否可以继续在后台运行？如果这是不可能的，我可以以编程方式将方向锁定到按下按钮之前的方向，然后等到线程完成，然后再次使方向与传感器一起使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:50:41.313

我们处理这个问题的方法是从粘性启动异步任务，`app.Service`并允许异步任务与父服务通信，而父服务又与通过 BroadcastReceiver 框架收听它的广播事件的任何人通信。我已经以某种方式[在这里](https://stackoverflow.com/questions/11793166/show-progress-dialog-within-a-cursorloader-in-a-fragment-android/11794421#11794421)描述了这种机制。

在方向更改时，您`app.Activity`将被销毁，但后台服务不会被销毁（它可以是`onLowMemory`＆无数其他情况，但可能不会）。[在重新创建活动时，您可以通过我在此处](https://stackoverflow.com/questions/8417885/android-fragments-retaining-an-asynctask-during-screen-rotation-or-configuratio/11628709#11628709)发布的解决方案检查您的服务是否仍在运行。根据该结果，您可以决定如何处理 UI，重新显示/重新添加进度对话框或其他任何内容，并重新注册您的接收器以侦听来自服务的事件。

这些层之间的职责是这样的；

1.  **异步任务**
    *   做这项工作。
    *   `Intents`通过触发事件 ( )报告它在做什么以及何时完成
    *   而已
2.  **服务**
    *   为 AsyncTask 托管一个不知道方向的容器
    *   为 #onCreate 中的 AsyncTask 发出的事件注册侦听器
    *   在#onStartCommand 中执行 AsyncTask
    *   `stopSelf()`当它从 AsyncTask 接收到“我已经完成”事件时停止自身（参见参考资料）
    *   向任何收听的人触发描述进度的事件
3.  **活动**
    *   启动服务，该服务又启动 AsyncTask。
    *   为 #onCreate 中的服务发出的事件注册侦听器
    *   在 onCreate 期间检查服务是否已经在运行，以决定工作是否正在进行或需要开始。

3 个元素具有离散的、不混淆的角色。这就是我们喜欢的方式。这种方法的唯一细微差别是使用`BroadcastReceivers`. 如果您对这些感到满意，那么您就是黄金。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:34:15.220

您可以锁定方向

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

参考[https://stackoverflow.com/a/3611554/1008278](https://stackoverflow.com/a/3611554/1008278)

# windows - 无论如何要做一个异步 FindNextFile 吗？

> ID：11975768
> 
> 赞同：2
> 
> 时间：2012-08-15T19:21:30.070
> 
> 标签：windows, winapi, file-io, ntfs

在一个大文件夹（约 300,000 个对象）上，FindNextFile 最多可能需要 20 秒才能响应一个文件。我假设后台正在进行一些批量操作，但这使得操作很难取消。

有没有办法以异步模式运行 FindNextFile 以便在不再需要信息时取消它？

Win7、x64、NTFS。

旁注：一旦信息被 Windows FindNextFile 缓存，似乎就没有这个问题了。它只是第一次尝试枚举大文件夹中的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:18:59.787

不，FindNextFile 是同步的，没有可比的异步函数。此类问题的通常解决方案是多线程。您需要两个线程：一个始终响应用户的 UI 线程和一个执行 FindNextFile 调用的工作线程。我会使用带有锁定机制的队列。逻辑看起来像这样：

工作线程：

```
FindFirstFile();
do
{
    LockQueue();
    AddFileToQueue();
    UnlockQueue();
 while (FindNextFile() && !UserCanceled());
 SetAllFilesDone(); 
```

用户界面线程：

```
while (!UserCanceled() && !AllFilesDone())
{
    LockQueue();
    GetFileFromQueue();
    UnlockQueue();
    ProcessFile();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T02:34:54.090

如果您只需要访问几个文件，IShellFolder::EnumObjects 是一个更快的查询，但[在网络上速度较慢，](http://blogs.msdn.com/b/oldnewthing/archive/2006/03/30/564809.aspx)因为 FindNextFile 的批处理 io 的网络往返次数较少。是否使用它取决于您需要多少信息，以及每个文件的延迟。

# c# - 在 TabControl 中预加载选项卡以加快选项卡切换

> ID：11975771
> 
> 赞同：2
> 
> 时间：2012-08-15T19:21:52.187
> 
> 标签：c#, winforms, tabcontrol

我有一个 TabControl，里面有三个选项卡。每个选项卡都包含一个 DataGridView。当我第一次显示 TabControl 时，我将源数据数据绑定到三个 DataGridView 中的每一个，经过一段时间的延迟，TabControl 出现在屏幕上的默认（第一个）选项卡上。

当我单击其他两个选项卡中的任何一个（仅第一次）时，在显示每个选项卡之前都会有很长的延迟。一旦任何选项卡至少显示一次，我就可以非常快速地在选项卡之间自由切换。有什么方法可以预加载或预渲染这些选项卡，这样我就不会在第一次显示时遇到这种延迟？

也许我可以在后台的线程中做一些事情来预加载剩余的标签。或者也许有人为我编写了 TabControl 的扩展。

任何帮助表示赞赏。

**编辑：**根据 krawl 的要求，这是我使用的将数据绑定到 DataGridViews 的代码。

```
public void LoadNewDataBase(string filename)
{
    //  Create the database connection
    mySQL.CreateNewDataBase(filename);

    // Display the DF DataSet
    dataGridViewDF.DataSource = GetDataSet("DF").Tables[0].DefaultView;
    dataGridViewSA.DataSource = GetDataSet("SA").Tables[0].DefaultView;
    dataGridViewGPS.DataSource = GetDataSet("GPS").Tables[0].DefaultView;

    dataGridViewDF.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;
    dataGridViewSA.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;
    dataGridViewGPS.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;

    // Preload the tabs
    for (int i = tabControl1.TabCount - 1; i >= 0; i--)
    {
        tabControl1.SelectedIndex = i;
        tabControl1.Invalidate();
        tabControl1.Update();
    }
}

private DataSet GetDataSet(string tableName)
{
    DataSet ds = new DataSet();
    mySQL.GetDataSet("SELECT * FROM " + tableName).Fill(ds);
    return ds;
} 
```

此操作不是线程化的。作为我的问题的临时解决方案，我将 for 循环包含在我的 LoadNewDataBase 方法中，用于迭代每个选项卡并显示它。为了从用户那里混淆这个操作，我在我的 TabControl 顶部覆盖了一个图形以指示控件正在加载，然后我将其隐藏（不包括代码）。它作为一种解决方法很有用，但不是一个优雅的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:55:24.507

我建议发布一些有关您如何尝试加载选项卡的代码。我使用以下代码进行了测试，没有任何界面滞后。

```
 protected void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.DataSource = GetTable();
        dataGridView2.DataSource = GetTable();
        dataGridView3.DataSource = GetTable();
    }

    private DataTable GetTable()
    {
        DataTable table = new DataTable();
        for (int i = 0; i < 6; i++)
        {
            table.Columns.Add("Col" + i.ToString(), typeof(string));
        }

        for (int i = 0; i < 1000; i++)
        {
            table.Rows.Add(GetRandomString(), GetRandomString(), GetRandomString(), GetRandomString(), GetRandomString(), GetRandomString());
        }

        return table;
    }

    private Random rand = new Random();
    private string validChars = "0123456789abcdefghijklmnopqurstuvwyz";

    private string GetRandomString()
    {
        StringBuilder builder = new StringBuilder();

        char[] c = new char[rand.Next(15, 20)];
        for (int i = 0; i < c.Length; i++)
        {
            c[i] = validChars[rand.Next(0, validChars.Length - 1)];
        }

        return new string(c);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:33:02.363

在控件可见之前，数据绑定控件不会更新。解决方法是使其他选项卡可见。在表单可见之前切换到另一个选项卡并立即返回上一个选项卡不起作用。在您的后台线程中，您可以执行类似的操作：

```
tabControl.SelectedTab = tabPage2; 
tabPage2.BindingContextChanged += (_, __) => 
     tabControl.SelectedTab = tabPage1; 

tabControl.SelectedTab = tabPage3;
tabPage3.BindingContextChanged += (_, __) => 
     tabControl.SelectedTab = tabPage1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-08T06:19:20.717

我只是用 Jacob 整理了代码，以便它可以用作函数

```
private void next_TabPage(TabPage tabpage1, TabPage tabpage2)
    {
        TabControl.SelectedTab = tabpage2;
        tabpage2.BindingContextChanged += (_, __) =>
        TabControl.SelectedTab = tabpage1;
    } 
```

# ms-access - 可扩展的数据表视图

> ID：11975777
> 
> 赞同：0
> 
> 时间：2012-08-15T19:22:12.753
> 
> 标签：ms-access, ms-access-2010

有没有办法在表单上显示嵌套的交叉表？

我有一个数据层次结构，其中顶级交叉表定义了类别和标题描述符。子级交叉表将采用标题描述符并表示数据。

顶级：类别、F1、F2、F3

子级别：值、F1-val、F2-val、F3-val

F1 - F3 不够静态，无法进行硬编码，并且可能会超时/收缩，但`Value`将始终存在，假设最终用户使用它们并分配与 F1 - F3 关联的值。

如果表视图中存在 DataSheet 视图会容易得多，它允许动态扩展/收缩字段。

我知道我将无法通过交叉表更新关联的表，因此会导致另一个问题。

如果这是可能的，我将如何遍历所述 DataSheet 视图以提取用于更新适当表的值。

# regex - 我需要一个以数字开头的字母数字字符串的正则表达式。表达式的长度应限制为 6

> ID：11975778
> 
> 赞同：-2
> 
> 时间：2012-08-15T19:22:14.653
> 
> 标签：regex

我需要一个以数字开头的字母数字字符串的正则表达式。表达式的长度应限制为 6。

此正则表达式用于数据输入限制。如果我没有先输入数字，它不应该让我输入字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:46:26.587

除了 David B 的建议之外，如果您提及您正在使用的正则表达式的实现（PHP、JS 等），它还可以帮助我们帮助您。

但总的来说，这是您要查找的正则表达式。

```
\d[a-zA-Z]{5} 
```

# hibernate - 为什么我会收到“名为 myclientunit 的 EntityManager 的无持久性提供程序”异常？

> ID：11975779
> 
> 赞同：0
> 
> 时间：2012-08-15T19:22:17.947
> 
> 标签：hibernate, jboss, transactions, jta, persistence.xml

我正在尝试在 JBoss 4.2.3.GA 上部署 JAR 文件。我正在使用 Hibernate 4.1.5.SP1 和验证器 4.3.0.Final。Maven 依赖项是...

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>${hibernate.validator.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>
        <exclusions>
            <exclusion>
                <groupId>dom4j</groupId>
                <artifactId>dom4j</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

这就是它变得好的地方。我收到异常“没有名为 myclientunit 的 EntityManager 的持久性提供程序”，尽管在我的 jar 的 META-INF/persistence.xml 中，我有

```
<persistence>
    <persistence-unit name="myclientunit" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:/MySqlDS</jta-data-source>
        <properties>
            <property name="hibernate.ejb.cfgfile" value="hibernate.cfg.xml" />
            <property name="hibernate.validator.apply_to_ddl">false</property>
            <property name="hibernate.validator.autoregister_listeners">false</property>
        </properties>
    </persistence-unit>
</persistence> 
```

我的hibernate.cfg.xml如下……</p>

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.datasource">java:/MySqlDS</property>
        <property name="hibernate.connection.pool_size">10</property>
        <property name="show_sql">true</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>

        <mapping class="com.parentco.fdr.myproject.model.UserRole" />
        <mapping class="com.parentco.fdr.myproject.model.Organization" />
        <mapping class="com.parentco.fdr.myproject.model.Product" />
        <mapping class="com.parentco.fdr.myproject.model.State" />
        <mapping class="com.parentco.fdr.myproject.model.Country" />
        <mapping class="com.parentco.fdr.myproject.model.AccessCode" />
        <mapping class="com.parentco.fdr.myproject.model.Contract" />
        <mapping class="com.parentco.fdr.myproject.model.TrainingLink" />

    </session-factory>
</hibernate-configuration> 
```

有什么想法我要漏掉的吗？以下是完整的例外...

```
14:12:58,470 ERROR [JobRunShell] Job default.job.0.1345057732332 threw an unhandled Exception: 
javax.ejb.EJBTransactionRolledbackException: No Persistence provider for EntityManager named myclientunit
    at org.jboss.ejb3.tx.Ejb3TxPolicy.handleInCallerTx(Ejb3TxPolicy.java:87)
    at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:130)
    at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:195)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:249)
    at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:268)
    at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:138)
    at $Proxy83.execute(Unknown Source)
    at org.jboss.resource.adapter.quartz.inflow.QuartzJob.execute(QuartzJob.java:57)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:203)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)
Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named myclientunit
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:33)
    at org.mainco.subco.dido.service.AbstractHibernateTxnService.startOperation(AbstractHibernateTxnService.java:27)
    at org.mainco.subco.dido.service.OrderServiceImpl.getContractsFromOpportunities(OrderServiceImpl.java:169)
    at org.mainco.subco.dido.quartz.ProcessOrdersWorker.work(ProcessOrdersWorker.java:29)
    at org.mainco.subco.dido.quartz.ProcessOrdersJob.execute(ProcessOrdersJob.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)
    at org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)
    at org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126)
    ... 11 more 
```

**编辑：**包括我的数据源文件，位于 $JBOSS_HOME/server/default/deploy/mysql-ds.xml ...

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: mysql-ds.xml 71535 2008-04-01 07:05:03Z adrian@jboss.org $ -->
<!--  Datasource config for MySQL using 3.0.9 available from:
http://www.mysql.com/downloads/api-jdbc-stable.html
-->

<datasources>
  <local-tx-datasource>
    <jndi-name>MySqlDS</jndi-name>
    <connection-url>jdbc:mysql://localhost:3306/parentco</connection-url>
    <driver-class>com.mysql.jdbc.Driver</driver-class>
    <user-name>myproject</user-name>
    <password>password</password>
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter</exception-sorter-class-name>
    <!-- should only be used on drivers after 3.22.1 with "ping" support
    <valid-connection-checker-class-name>org.jboss.resource.adapter.jdbc.vendor.MySQLValidConnectionChecker</valid-connection-checker-class-name>
    -->
    <!-- sql to call when connection is created
    <new-connection-sql>some arbitrary sql</new-connection-sql>
      -->
    <!-- sql to call on an existing pooled connection when it is obtained from pool - MySQLValidConnectionChecker is preferred for newer drivers 
    <check-valid-connection-sql>SELECT 1</check-valid-connection-sql> -->

    <!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) -->
    <metadata>
       <type-mapping>mySQL</type-mapping>
    </metadata>
  </local-tx-datasource>
</datasources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:02:23.393

将`hibernate-entitymanager-3.4.0.GA.jar`（或您使用的休眠版本）添加到您的库和类路径中。
或依赖项（如果您使用的是 Maven）

```
<groupId>org.hibernate</groupId>
<artifactId>hibernate-entitymanager</artifactId>
<version>3.4.0.GA</version> 
```

# c - putchar() 可以打印一个整数吗？

> ID：11975780
> 
> 赞同：1
> 
> 时间：2012-08-15T19:22:20.683
> 
> 标签：c, file-io, integer, output, putchar

如何`putchar()`仅在 的帮助下打印整数。我想在不使用外部存储的情况下做到这一点。
这个问题在去年的一次采访中被问到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T19:36:37.857

当面对面试的模糊要求时，表达你的假设是个好主意。

我认为只能使用的`putchar`要求意味着它是我被允许调用的唯一库函数。我还假设“没有外部存储”意味着我无法显式创建缓冲区。如果面试官同意我的假设，我会继续：

```
void pr_int(int n) {
    if (n < 0) {
        putchar('-');
        n = -n;
    }
    if (n / 10 != 0)
        pr_int(n / 10);
    putchar((n % 10) + '0');
} 
```

如果面试官随后评论说这`n = -n;`将失败`INT_MIN`，如下所述，那么我会将其重写为：

```
void pr_uint(unsigned int n) {
    if (n / 10 != 0)
        pr_uint(n / 10);
    putchar((n % 10) + '0');
}

void pr_int(int n) {
    if (n < 0) {
        putchar('-');
        n = -n;
    }
    pr_uint((unsigned int) n);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:43:41.733

正确回答这个问题很大程度上取决于“外部存储”和“`putchar`仅”的含义。

```
void print_int_r (int x, int neg) {
    int y = x/10;
    int d = x%10;
    if (y) print_int_r(y, neg);
    putchar('0' + (neg ? -d : d));
}

void print_int (int x) {
    int neg = x < 0;
    if (neg) putchar('-');
    print_int_r(x, neg);
    putchar('\n');
} 
```

上述实现假定 C99 语义，如 C99 第 6.5.5 p6 节所述：

> 当整数被除法时，`/`运算符的结果是代数商，其中任何小数部分被丢弃。如果商`a/b`是可表示的，则表达式`(a/b)*b + a%b`应等于`a`。

但是，ANSI C (C 89) 的语义`%`更差。ANSI C 第 3.3.5 p5 节说：

> 如果任一操作数为负，则`/`运算符的结果是小于代数商的最大整数还是大于代数商的最小整数是实现定义的，`%`运算符结果的符号也是如此。

费鲁乔的第二个答案几乎是完美的。问题是转换不正确。`n = -n`如果操作的结果是一个不能用 表示的值，则 的结果是未定义的`int`。因此，转换应该以这种方式完成：

```
void pr_int(int n) {
    if (n < 0) {
        putchar('-');
        pr_uint(-(unsigned int)n);
    } else
        pr_uint(n);
    putchar('\n');
} 
```

该解决方案现在符合所有 ISO C 标准。详细信息可以在[这里](https://stackoverflow.com/questions/4536095/unary-minus-and-signed-to-unsigned-conversion)找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:27:58.907

考虑使用 itoa 函数（您需要导入它的库），然后循环遍历它生成的 cstring 中的每个字符（使用 strlen 获取此循环的上限），然后简单地对每个字符使用 putchar()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T19:56:42.860

我刚刚组装了一些可怕的东西。它主要是概念验证，*真的很可怕*，仅适用于正整数，但几乎不使用存储空间。啊，整数也不能太大，而且可能有问题。

```
#include <stdio.h>
#include <assert.h>

int main()
{
    const int max_precision = 100000;
    int b = 7414;
    int max = b * max_precision;

    assert(b > 0);

    while (b <= max && b >= 0)
    {
        putchar('0' + (b / max_precision) % 10);
        b *= 10;
    }

    putchar('\n');
} 
```

`max_precision`设置将打印多少位数。`b`存储实际数字，并`max`用于终止循环（该循环或整数溢出）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T19:39:35.187

已经有类似的问题了，我回答[了。](https://stackoverflow.com/questions/11819837/converting-integer-to-string-in-c-without-sprintf/11819854#11819854)

将其转换为仅使用 putchar 的程序应该很容易（例如，执行以下操作：

```
while(buf[i])
    putc(buf[i++]);

putc('\n'); 
```

# python - 为什么`getattr`不支持连续属性检索？

> ID：11975781
> 
> 赞同：46
> 
> 时间：2012-08-15T19:22:21.323
> 
> 标签：python

```
class A(): pass

a = A()
b = A()

a.b = b
b.c = 1

a.b     # this is b
getattr(a, "b") # so is this

a.b.c   # this is 1   
getattr(a, "b.c") # this raises an AttributeError 
```

对我来说，假设后者似乎很自然。我确信这是有充分理由的。它是什么？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-15T19:23:59.277

您不能在 getattr 函数中放置句点，因为 getattr 就像访问对象的字典查找一样（但由于子类化和其他 Python 实现细节，它比这更复杂一些）。

如果您在 a 上使用 'dir' 函数，您将看到对应于对​​象属性的字典键。在这种情况下，字符串“bc”*不在*字典键集中。

这样做的唯一方法`getattr`是嵌套调用：

```
getattr(getattr(a, "b"), "c") 
```

幸运的是，标准库有更好的解决方案！

```
import operator
operator.attrgetter("b.c")(a) 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-01-14T18:37:20.133

[Python 的内置`reduce`函数](http://docs.python.org/2/library/functions.html#reduce)可以实现您正在寻找的功能。这是一个简单的小辅助函数，可以完成工作：

```
class NoDefaultProvided(object):
    pass

def getattrd(obj, name, default=NoDefaultProvided):
    """
    Same as getattr(), but allows dot notation lookup
    Discussed in:
    http://stackoverflow.com/questions/11975781
    """

    try:
        return reduce(getattr, name.split("."), obj)
    except AttributeError, e:
        if default != NoDefaultProvided:
            return default
        raise 
```

测试证明；

```
>>> getattrd(int, 'a')
AttributeError: type object 'int' has no attribute 'a'

>>> getattr(int, 'a')
AttributeError: type object 'int' has no attribute 'a'

>>> getattrd(int, 'a', None)
None

>>> getattr(int, 'a', None)
None

>>> getattrd(int, 'a', None)
None

>>> getattrd(int, '__class__.__name__')
type

>>> getattrd(int, '__class__')
<type 'type'> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-15T19:50:47.353

我认为您的困惑源于直点表示法 (ex `a.b.c`) 访问与 相同的参数`getattr()`，但解析逻辑不同。虽然它们本质上都是对象`__dict__`属性的关键，`getattr()`但不受对点可访问属性的更严格要求的约束。例如

```
setattr(foo, 'Big fat ugly string.  But you can hash it.', 2) 
```

是有效的，因为该字符串只是成为 中的哈希键`foo.__dict__`，但是

```
foo.Big fat ugly string.  But you can hash it. = 2 
```

和

```
foo.'Big fat ugly string.  But you can hash it.' = 2 
```

是语法错误，因为现在您要求解释器将这些内容解析为原始代码，但这不起作用。

另一面是 while`foo.b.c`等价于`foo.__dict__['b'].__dict__['c']`,`getattr(foo, 'b.c')`等价于`foo.__dict__['b.c']`。这就是为什么`getattr`不能按预期工作的原因。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-15T19:26:09.117

因为`getattr`那样不行。`getattr`获取具有给定名称（第二个参数）的给定对象（第一个参数）的属性。所以你的代码：

```
getattr(a, "b.c") # this raises an AttributeError 
```

表示：*访问“a”引用的对象的“bc”属性*。显然，您的对象没有名为“ `b.c`”的属性。

要获得“c”属性，您必须使用两个`getattr`调用：

```
getattr(getattr(a, "b"), "c") 
```

让我们打开它以便更好地理解：

```
b = getattr(a, "b")
c = getattr(b, "c") 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-08-23T09:46:52.473

我认为实现你想要的最直接的方法是使用[`operator.attrgetter`](https://docs.python.org/2/library/operator.html#operator.attrgetter).

```
>>> import operator
>>> class B():
...   c = 'foo'
... 
>>> class A():
...   b = B()
... 
>>> a = A()
>>> operator.attrgetter('b.c')(a)
'foo' 
```

如果该属性不存在，那么您将得到一个`AttributeError`

```
>>> operator.attrgetter('b.d')(a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: B instance has no attribute 'd' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-16T11:05:50.563

您可以通过拆分点运算符并为每个点运算符执行 getattr() 来调用多个 getattr 而无需在函数内调用函数

```
def multi_getattr(self,obj, attr, default = None):
          attributes = attr.split(".")
          for i in attributes:
              try:
                  obj = getattr(obj, i)
              except AttributeError:
                  if default:
                      return default
                  else:
                      raise
          return obj 
```

如果假设你想调用 abcd，你可以通过 a.multi_getattr('bcd') 来实现。这将概括操作而不用担心字符串中点操作的计数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T19:34:06.920

应该返回`getattr('a.b', {'a': None}, 'default-value'}`什么？它应该提高`AttributeError`还是返回`'default-value'`？这就是为什么如果引入复杂的键`getattr`会使其难以使用。

因此，将`getattr(..)`函数视为`get`对象属性字典的方法更为自然。

# cuda - 发送非常大的数组时，Cuda 内存函数会给出“未知错误”

> ID：11975786
> 
> 赞同：0
> 
> 时间：2012-08-15T19:22:42.747
> 
> 标签：cuda, labview

我的程序分析了一个视频文件，该文件表示为一个 3d 数组并从 LabView 发送到我的程序。LabView 已经将这个 3d 数组扁平化为 1d 数组，所以我刚刚在 CUDA 中分配了一个 1d 数组，使用 cudaMalloc，并使用 cudaMemcpy 复制数据。但是我注意到，如果我发送超过 2XXX、120x240 像素图像，我会从我的一些 cuda 内存函数（cudamemcpy 和 cudafree，在调用几个内核后在我的程序中稍后发生）得到一个“未知错误”，并且这些最终破坏了我的程序。但是，如果我在发送图像时降低数字，我没有问题。这让我相信我的代码很好，但我的内存分配做法很糟糕。

首先，让我们谈谈 Pitched 内存。据我所知，这就是选择一个合适的大小来分配内存，这样线性数据就不会分成两个块。这对于 2d 和 3d 数组尤其常见，因为您希望将行或列一起保存在内存中以便快速访问。

如果我不使用音高记忆，会不会出现这些问题？不使用倾斜内存时会出现哪些错误，尤其是对于这些非常大的数组？到目前为止，我忽略了使用 cudaMallocPitch 和 cudaMalloc3d 的选项，尽管我在技术上确实有 2d 和 3d 数组，我已经将它们展平了。

最后，当 cudaGetLastError 只告诉我“未知错误”时，如何进一步调试我的代码问题？我能够找到哪个函数有问题，但是当它像 cudaFree 这样的 somthign 时，我无法调试这种东西，或者找出问题的根源。

无论如何，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T21:35:49.110

不使用倾斜内存的代价是速度。如果两个线程尝试访问视频的相邻帧并且这些帧被分配在连续的内存中（没有对齐），则一个帧的部分将与另一帧驻留在相同的内存块或缓存行中，并且一个线程可能必须等到另一个线程完成其内存操作。可能不是致命的，但绝对不是最佳的。那里可能还存在写后读或写后写问题。

使用倾斜内存的成本是，如果您的元素（帧或扫描线）大小不是首选对齐边界的偶数倍，它将略微增加内存分配。下一帧或扫描线的开始可能必须填充几个字节以使其在适当的内存地址边界上开始。为每个帧或扫描线大小添加 30 个字节以使下一帧接近 2000 个帧的适当边界，这将为您的总内存分配增加大约 60,000 个字节。

如果总数据集不适合设备内存，您将不得不将数据集分成更小的块，并多次调用您的 cuda 内核来处理每个块。如果您的代码不需要一直随机访问整个数据集，那么切换到流模型可以大大减少您的整体处理时间。当一个 warp 正在等待其数据块加载到设备内存中时，另一个 warp 可以处理它的块，因此 CUDA 内核不会闲置。

如果您的视频处理代码需要查看 4 个连续的帧缓冲区来完成其工作，那么您可以制定一个缓冲区管理系统，在不再需要时从队列中退出最旧的帧，并在其中设置一个新帧为下一次内核调用做准备。甚至更好 - 为新帧回收旧帧内存，以避免内存分配的开销。

仅在您真正需要时（或之前）加载您需要的内容。这就是 20 美元的视频播放器和录像机芯片如何用少量的实际 RAM 实时处理数 GB 的视频流。

# asp.net - 允许预编译的 Visual Studio 网页可更新与不可更新有什么区别？

> ID：11975787
> 
> 赞同：25
> 
> 时间：2012-08-15T19:22:45.327
> 
> 标签：asp.net, vb.net, visual-studio, dll, precompiled

我已经使用默认的“允许此预编译站点可更新”多次构建了一个网站，但是在最近的编译中，该网站非常损坏。在玩弄了 .dll（在 bin 中删除和替换它们）之后，我注意到网站的某些部分又开始工作了，但是如果我将所有原始 .dll 放在网站中，就会损坏。

我正在使用带有几个 Ajax Web 扩展的 aspx 页面。这些是最近添加的，可能是问题的根源。我取消选中“允许此预编译站点可更新”，它在 bin 中添加了各种额外编译的代码文件，网站的所有问题都消失了……这是怎么回事？有什么区别？

我更新网站的方式似乎也没有任何区别，只是每次都从 Visual Studio 直接发布。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-15T20:31:09.097

取消选中“允许此预编译站点可更新”会编译 .Aspx 页面，而不仅仅是代码文件 (.VB/.CS)。选中它允许您在部署 .Aspx 文件后对其进行某些更改而无需重新编译（例如 = 移动控件的位置或添加一些额外的 HTML 标记）。

在阅读了您对部署问题的描述后，错误似乎更有可能是因为 IIS 需要刷新应用程序池。在低端 VPS 上，如果您有这种奢侈，有时反弹（重新启动）它是有意义的。

有关站点预编译的更多信息，请阅读以下 MSDN 文章。

[http://msdn.microsoft.com/en-us/library/399f057w(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/399f057w(v=vs.80).aspx)

[http://msdn.microsoft.com/en-us/library/ms247286(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms247286(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T14:18:04.830

根据 NoAlias 所说，我对自己的问题有一个答案。我阅读了这两个链接，发现以下内容：

> **仅用于部署的预编译**
> 当您只为部署进行预编译时，编译器会从通常在运行时编译的几乎所有 ASP.NET 源文件生成程序集。这包括页面中的程序代码、.cs 和 .vb 类文件、其他代码文件和资源文件。编译器从输出中删除所有源代码和标记。在生成的布局中，为每个 .aspx 文件（扩展名为 .compiled）生成编译文件，这些文件包含指向该页面的相应程序集的指针。要更改网站，包括页面布局，您必须更改原始文件、重新编译站点并重新部署布局。唯一的例外是站点配置；您可以更改生产服务器上的 Web.config 文件，而无需重新编译站点。
> 
> **为部署和更新**
> 进行预编译 当您为部署和更新进行预编译时，编译器会从所有源代码（单文件页面中的页面代码除外）和其他通常会生成程序集的文件（例如资源文件）中生成程序集。编译器将 .aspx 文件转换为使用已编译代码隐藏模型的单个文件，并将它们复制到布局中。此选项使您能够在编译站点中的 ASP.NET 网页后对其进行有限的更改。例如，您可以更改控件的排列、颜色、字体和页面的其他外观方面。您也可以添加控件，只要它们不需要事件处理程序或其他代码。当站点第一次运行时，ASP.NET 会执行进一步的编译，以便从标记中创建输出。笔记
> 
> 预编译的可更新站点不允许多个页面引用同一个 CodeFile 类。

我最近对该站点进行了更改，以包含 2 个引用相同 CodeFile 的 aspx 页面（后台相同的 VB 代码）每个页面的 html 属性略有不同，但需要具有相同的 CodeFiles，所以对于我的第二个 ASP 页面，我删除了自动生成的 VB 代码文件，然后在 HTML 中引用不同的 CodeFile。

如上所述，预编译的可更新站点不允许多个页面引用相同的代码文件类。这就是为什么我的某些页面无法正常工作的原因。

从这一点开始，我需要避免使用默认复选框“允许此预编译站点可更新”；我的网站必须保持未选中状态才能使用引用我的多个页面的 VB 代码文件。

结论：引用同一个 CodeFile 的多个 aspx 页面需要预编译才能正确运行。这意味着如果不重新部署，该站点将无法对其进行任何更改。

# java - 使用位旋转实现算法来确定字符串是否具有所有唯一字符

> ID：11975789
> 
> 赞同：-1
> 
> 时间：2012-08-15T19:22:58.707
> 
> 标签：java

我将如何**最好地**实现一个接受 String 参数并返回`true`或`false`取决于 String 是否由所有不同字符组成的 Java 函数。

这是一道面试题。实现应该使用位掩码来存储字符的出现，而不是其他辅助数据结构。

注意：使用位掩码的要求使这个问题不同于：

*   [如何确定字符串中的所有字符是否相等](https://stackoverflow.com/questions/3869526/how-to-determine-if-all-characters-in-a-string-are-equal)

*   [确定一个字符串是否具有所有唯一字符？](https://stackoverflow.com/questions/4987863/determine-if-a-string-has-all-unique-characters)

根据要求，这是我迄今为止的努力。如果可能，请现在重新打开问题：

```
public static boolean hasAllUniqueCharactersUsingBitMasking(String string) {
  final int length = string.length();
  final int nBitsToStoreAllUnicodeCharacters =
      (int) Math.ceil(Math.log(Character.MAX_CODE_POINT) / Math.log(2d));
  BitSet bitSet = new BitSet(nBitsToStoreAllUnicodeCharacters);
  for (int i = 0; i < length; i++) {
    char c = string.charAt(i);
    if (bitSet.get(c)) {
      return false;
    }
    bitSet.set(c);
  }
  return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:27:06.217

根据[破解编码采访](https://rads.stackoverflow.com/amzn/click/com/1466208686)：

```
public static boolean isUniqueChars(String str) {
  if (str.length() > 256) { 
    return false;
  }
  int checker = 0;
  for (int i = 0; i < str.length(); ++i) {
    int val = str.charAt(i) - ‘a’;
    if ((checker & (1 << val)) > 0) return false;
    checker |= (1 << val);
  }
  return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T18:25:22.273

这是在 Java 中使用 BitSet 类的另一个解决方案。该程序适用于 ASCII 字符集字符串，并且不限制字符串必须为小写或大写。还使用 BitSet 类使其易于使用和理解按位操作。

```
public static boolean isUniqueStringUsingBitVectorClass(String s) {

        final int ASCII_CHARACTER_SET_SIZE = 256;

        final BitSet tracker = new BitSet(ASCII_CHARACTER_SET_SIZE);

        // if more than  256 ASCII characters then there can't be unique characters
        if(s.length() > 256) {
            return false;
        }

        //this will be used to keep the location of each character in String
        final BitSet charBitLocation = new BitSet(ASCII_CHARACTER_SET_SIZE);

        for(int i = 0; i < s.length(); i++) {

            int charVal = s.charAt(i);
            charBitLocation.set(charVal);

            if(tracker.intersects(charBitLocation)) {
                return false;
            }

            tracker.or(charBitLocation);

            charBitLocation.clear(); //clear the individual character tracker for next iteration in the loop

        }

        return true;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-02T05:32:02.027

```
public static boolean isUniqueCharsBitSet(String str) {

if (str.length() > 256) {
        return false;
    }

    BitSet set = new BitSet();
    for (int i = 0; i < str.length(); ++i) {
        int val = str.charAt(i) - 'a';
        if (!(set.get(val))) {
            set.set(val);
        } else {
            return false;
        }

    }
    return true; 
```

## }

# sql - 按未包含在 group by 子句中的列排序

> ID：11975790
> 
> 赞同：0
> 
> 时间：2012-08-15T19:22:59.533
> 
> 标签：sql, sql-server

这是我的数据集：

```
myID    MemberID      SourceID    Acuity    
1       5             3           2       
2       5             3           1       
3       5             3           2      
4       5             3           1 
```

我需要为每个不同的 MemberID、SourceID 和 Acuity 组合返回一个数据集。但我需要通过 myID 订购。我将其插入到另一个表中，并且需要以正确的顺序插入行。我想要的预期结果是这样的：

```
MemberID      SourceID    Acuity    
5             3           2       
5             3           1 
```

问题是我不能按 myID 排序，除非它包含在 group by 子句中，所以结果是相反的，因为它默认按每列排序。如何通过 myID 获得预期的结果和订单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:33:49.493

你的问题是模棱两可的，因为有不止一行具有不同的ID。您可以按最小 id 订购，但是：

```
select MemberID, SourceID, Acuity
from your_table
group by MemberID, SourceID, Acuity
order by min(myID) 
```

# php - move_uploaded_file 返回 true 但文件未出现在文件夹中

> ID：11975792
> 
> 赞同：3
> 
> 时间：2012-08-15T19:23:15.350
> 
> 标签：php, file, move

我有几个脚本在另一台服务器上运行良好。

现在我已将所有内容移至新服务器，该文件不会出现在目标文件夹中。奇怪的是，`move_uploaded_file`返回`true`。

另外，我打印了帖子数据，没有错误。

你能猜出可能发生了什么吗？我尝试上传作为测试的文件非常小（10 kb）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:38:31.310

移动可能成功，请检查以下内容：

*   您无权查看该文件。
    用于`chmod("/path/to/file.ext", 0755);`为 ftp 用户添加查看权限。
*   您将文件移动到不存储文件的位置。`/dev/null`
*   您在错误的文件夹中查找。您是否使用了完整路径？
*   该文件在移动后不久被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T18:59:48.890

在我的例子中，用作 FTP 客户端的 Total Commander 将输出截断为目录中的 10000 个文件。当我使用 WinSCP 通过 SSH 连接时，我能够看到目录中的所有 ~14000 个文件。

# jquery - 单击按钮在文本框中添加多个值

> ID：11975803
> 
> 赞同：0
> 
> 时间：2012-08-15T19:23:35.563
> 
> 标签：jquery

```
<tr>
        <td><font face="Arial">Answers</font></td>
        <td>
        <div id="answers" >
            <input type="text" name="T2" size="20" id="answer" class="selector">
        </div>
        <input type="button" value="+" name="B3" id="btnAnswer" onclick="addAnswers()">
        (click on this button will create another field so you can type content
        for the other answer, this can be done using jquery)<br>

        <input type="checkbox" name="c" value="1">Allow this answer to be free text

        </td>
    </tr> 
```

函数 addAnswers(){

```
$('#answers').append('<p class="\selector\">' + $('#answer').val() + '</p>'); } 
```

现在我想获取答案的这些值以将其发送到服务器..答案的数量可能是 1 到 n...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:28:02.883

> 我必须使用 jquery 添加另一个答案...有人可以帮忙吗？

签出：`document.createElement`在普通的 javascript 中：[https ://developer.mozilla.org/en-US/docs/DOM/document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)

并且`$(target).append(element)`：[http ://api.jquery.com/append/](http://api.jquery.com/append/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:33:07.910

根据您上面的代码，请检查：

**html**

```
<tr>
<td><font face="Arial">Answers</font></td>
<td><input name="T2" size="20" type="text" id="answer">
<input value="+" name="B3" type="button" id="btnAnswer">
(click on this button will create another field so you can type content
for the other answer, this can be done using jquery)<br>
<input name="c" value="1" type="checkbox">Allow this answer to be free text 
```

**jQuery**

```
 $(function(){
    $('#btnAnswer').on('click', function(){
      $('#answers').append('<p>' + $('#answer').val() + '</p>');
    });
  }); 
```

[jsFiddle](http://jsfiddle.net/yU4te/2/)在这里，请检查。

- 编辑 -

很好提醒，`onclick`它不再需要了，考虑到`jQuery`正在做“肮脏”的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:31:55.643

使用查询，获取您的 td 的第一个输入，并清除其数据。然后，您可以使用 $.append 将其添加到标记中您想要的位置。

您还需要为每个输入名称创建一个数字增量（例如名称是 t1、t2、t3 等），以便可以通过服务器端有效地解析它们。

**修订**

这是 HTML 标记，稍作修改：

```
<table>
<tr>
        <td><font face="Arial">Answers</font></td>
        <td>
        <div id="answers" >
            <input type="text" name="T1" size="20" class="answer selector">
        </div>
        <input type="button" value="+" name="B3" id="btnAnswer">
        (click on this button will create another field so you can type content
        for the other answer, this can be done using jquery)<br>
        </td>
    </tr>  
</table> 
```

使用 javascript：

```
$('#btnAnswer').click(function(){
    var new_input = $('input.answer:first').clone();     
    new_input.attr('name', new_input.attr('name').substr(0, new_input.attr('name').length-1) + ($('#answers').children('input').length + 1));
    $('#answers').append(new_input);
}); 
```

javascript 克隆第一个输入并增加其名称。

在服务器端，您需要递增发布的变量并单独检查它们是否已设置；如果未设置，则退出循环。

jsfiddle[在这里](http://jsfiddle.net/mhdnU/1/)。

# c++ - GDB中非常奇怪的Segmentation fault分析

> ID：11975804
> 
> 赞同：3
> 
> 时间：2012-08-15T19:23:46.370
> 
> 标签：c++, gdb, stack, segmentation-fault

我有编写的应用程序（服务器）在`C++`几个小时左右崩溃，看起来可能是随机的。

最糟糕的是我试图调试任何`core`文件`gdb`，我看到了结果：

```
gdb --core=core.668 --symbols=selectserver
GNU gdb 6.8
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-pc-linux-gnu"...
Core was generated by `./selectserver'.
Program terminated with signal 11, Segmentation fault.
[New process 672]
[New process 671]
[New process 670]
[New process 669]
[New process 668]
#0  0xb7866896 in ?? ()
(gdb) info threads
  5 process 668  0xffffe410 in __kernel_vsyscall ()
  4 process 669  0xffffe410 in __kernel_vsyscall ()
  3 process 670  0xffffe410 in __kernel_vsyscall ()
  2 process 671  0xffffe410 in __kernel_vsyscall ()
* 1 process 672  0xb7866896 in ?? ()
(gdb) bt
#0  0xb7866896 in ?? ()
#1  0x082da4b0 in ?? ()
#2  0xb79e4252 in ?? ()
#3  0xa2ba9014 in ?? ()
#4  0x0825e14c in ?? ()
#5  0x082da4b0 in ?? ()
#6  0xb56175e8 in ?? ()
#7  0x00000080 in ?? ()
#8  0xb5fe723f in ?? ()
#9  0xa2ba9014 in ?? ()
#10 0xa2ba9008 in ?? ()
#11 0xb7a32ff4 in ?? ()
#12 0x00000000 in ?? ()
(gdb) thread 2
[Switching to thread 2 (process 671)]#0  0xffffe410 in __kernel_vsyscall ()
(gdb) bt
#0  0xffffe410 in __kernel_vsyscall ()
#1  0xb7889486 in ?? ()
#2  0x00000000 in ?? ()
(gdb) thread 3
[Switching to thread 3 (process 670)]#0  0xffffe410 in __kernel_vsyscall ()
(gdb) bt
#0  0xffffe410 in __kernel_vsyscall ()
#1  0xb7889486 in ?? ()
#2  0x00000000 in ?? ()
(gdb) thread 4
[Switching to thread 4 (process 669)]#0  0xffffe410 in __kernel_vsyscall ()
(gdb) bt
#0  0xffffe410 in __kernel_vsyscall ()
#1  0xb7889486 in ?? ()
#2  0x00000000 in ?? ()
(gdb) thread 5
[Switching to thread 5 (process 668)]#0  0xffffe410 in __kernel_vsyscall ()
(gdb) bt
#0  0xffffe410 in __kernel_vsyscall ()
#1  0xb78b7de1 in ?? ()
#2  0x00000032 in ?? ()
#3  0xbf849ae8 in ?? ()
#4  0xbf8499e8 in ?? ()
#5  0x00000000 in ?? ()
(gdb) quit 
```

我不知道发生了什么，为什么不包括堆栈上的地址`__kernel_vsyscall`如此连线而不是映射到符号。

我需要做什么才能找到问题，调试该问题的内存转储。

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:27:26.003

您需要使用调试符号编译程序或获取带有调试符号的单独文件。将 -g 标志传递给 gcc 以启用这些。

如果您想查看所有函数是什么，甚至是库函数中的函数（例如标准库函数），您还需要获取带有调试符号的库版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:30:30.003

开始`gdb --core=core.668 selectserver`修复问题。

# c# - 如何在 C# 中从位图中插入/提取透明通道？

> ID：11975812
> 
> 赞同：-1
> 
> 时间：2012-08-15T19:24:01.707
> 
> 标签：c#, bitmap, transparent

我想将透明通道从位图提取到二维数组，用它做一些事情，然后将其返回位图。

如何提取/插入它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:28:46.027

我假设您使用的[System.Drawing.Bitmap](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)的[PixelFormat](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat.aspx)值为 Format32bppArgb。

您需要调用[LockBits](http://msdn.microsoft.com/en-us/library/5ey6h79d%28v=vs.100%29.aspx)以便可以直接对位图位进行操作。

返回的[BitmapData](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.bitmapdata%28v=vs.100%29.aspx)实例包含有关位图的信息，包括`Scan0`属性，即位图中第一个像素的地址。Alpha 通道是每个像素的最高有效字节。

请注意，这`Scan0`是一个`IntPtr`. 这些位在一维数组中。您必须编写自己的索引代码，将一维数组视为二维数组。一定要考虑`Stride`到。

# dojo - 如何告诉 Dojo 自定义构建关于外部库的信息？

> ID：11975814
> 
> 赞同：4
> 
> 时间：2012-08-15T19:24:15.053
> 
> 标签：dojo

在我的 Dojo 构建中，我引入了一些第三方库。

当我完成构建过程时，由于 ReferenceErrors 而出现错误。

这可以。这是有道理的。

但是，我想告诉 Dojo 构建过程中被引用的东西。本质上，这类似于将外部变量传递给闭包编译器。

因此，我的问题是：我如何告诉 Dojo 构建过程它无法从我的代码库中推断出的引用？

这是使用 Dojo 1.8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:22:05.510

我自己也遇到了这个。现在我假设您提到的 ReferenceErrors 用于浏览器对象，如`navigator`, `window`,`document`等。如果是这样，那么这是 Dojo 构建过程本身引入的问题，因为构建是由运行在 Rhino 内部的 dojo.js 执行的，其中未定义浏览器全局对象。这是一个 dojo/Rhino 错误，而不是闭包编译器错误，因此您无法将任何内容传递给闭包来更改它。例如，像这样的脚本

```
(function(){
    window.alert("hello");
})(); 
```

如果它包含在 dojo 层中，它将破坏您的 dojo 构建。当 dojo AMD 加载器像上面那样解析脚本的依赖时，它会运行函数体，导致 ReferenceError 因为窗口在 Rhino 中不存在。

为了解决这个问题，将脚本包装为 AMD 模块

```
define([], function(){
    window.alert("hello");
}); 
```

然后在 dojo 构建期间 AMD 加载程序将**不会**执行函数体。

# wpf - 屏蔽列的 DataGrid

> ID：11975816
> 
> 赞同：0
> 
> 时间：2012-08-15T19:24:17.383
> 
> 标签：wpf, data-binding, wpfdatagrid, infragistics, xamdatagrid

可以`DataGrid`动态屏蔽要显示的列吗？

## 当前设置

`DataGrid` **<--绑定-->** `Collection<Customer>`

1.  该类型`Customer`定义了大约 100 个不同的字段。
2.  不同的视图需要显示不同的列集（大约 100 列中的 20 列），以某种方式动态选择，相同的`Collection<Customer>`.

是否有一个选项可以动态屏蔽将显示为列中的字段`DataGrid`？理想情况下，我想使用 Infragistics' `xamDataGrid`，但任何解决方案 a`DataGrid`都是一个很好的起点。

* * *

还有其他类似的[问题](https://stackoverflow.com/q/5784440/640378)，但它们处理列过滤或可变行数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:55:10.113

如果您在代码中定义不同的视图，您可以创建不同的 FieldLayout 并将 FieldLayout 用于所需的视图。这需要通过将要使用的布局添加到 FieldLayouts 集合来设置要在代码中使用的 FieldLayout。

如果您允许最终用户定义视图中的内容，那么您可能希望定义所有可能的字段，然后允许使用字段选择器隐藏或显示这些[字段](http://help.infragistics.com/NetAdvantage/WPF/Current/CLR4.0/?page=xamDataPresenter_Field_Chooser.html)。

有一些方法可以[保存](http://help.infragistics.com/NetAdvantage/WPF/Current/CLR4.0/?page=xamDataPresenter_Save_Field_Customizations.html)和[加载](http://help.infragistics.com/NetAdvantage/WPF/Current/CLR4.0/?page=xamDataPresenter_Load_Field_Customizations.html)自定义字段，您可以使用这些方法来持久化布局。

# vb.net - vb.net循环通过控件不起作用

> ID：11975818
> 
> 赞同：1
> 
> 时间：2012-08-15T19:24:20.063
> 
> 标签：vb.net, foreach, controls, master-pages, asp.net-webpages

我正在尝试循环浏览由文本框和下拉菜单组成的页面上的控件并清除它们。

我调试的时候，parent是当前页面，value等于ASP.nameOfCurrentpage_aspx，Type等于system.web.ui.page，但是c的值是ASP.site_master，type是system.web.ui.control。我还输入了 x 以查看它找到了多少控件，并且 x 返回为 1，即使页面上有 15 个左右的文本框。有没有办法可以强制 c 具有 ASP.nameOfCurrentpage_aspx 的值？或者这不是我的问题？任何帮助表示赞赏。

```
Protected Sub btnClear_Click(sender as Object, e as System.eventargs) Handles btnClear.Click
   ClearForm(Page)

End Sub

Public Sub ClearForm(ByRef Parent As Control)
    Dim c As Control
    Dim x As Integer = Parent.Controls.Count
    For Each c In Parent.Controls
        If c.GetType.ToString = "System.Web.UI.HtmlControls.HtmlForm" Then
            ClearForm(c)
        ElseIf c.GetType() Is GetType(TextBox) Then
            'is it a Text Box?
            Dim t As TextBox = c
            t.Text = ""
        ElseIf c.GetType() Is GetType(DropDownList) Then
            'is it a dropdown list?
            Dim d As DropDownList = c
            d.ClearSelection()
        End If
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:40:51.243

HTMLForm 控件可能是嵌套的，可能位于 MasterPage 下。要么完全递归你的函数，要么在 If 语句中添加一个子句来查找母版页。这是断点和观察窗口的黄金。

前任：

```
ElseIf c.GetType.ToString = "ASP.MasterPageName_Master" Then
   ClearForm(c) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:36:08.300

谢谢大家的帮助。我没有尝试所有答案，但我将它们用于想法。这是我们在工作中提出的，它会找到并清除页面上的所有控件。我们必须找到链接到主站点 (cph) 的内容占位符。再次感谢所有建议。

```
Public Sub ClearForm(ByRef Parent As Control)
    Dim cph As System.Web.UI.WebControls.ContentPlaceHolder = Master.FindControl("MainBody")
    Dim c As Control
    Dim x As Integer = Parent.Controls.Count
    For Each c In cph.Controls
        If c.GetType.ToString = "System.Web.UI.HtmlControls.HtmlForm" Then
            ClearForm(c)
        ElseIf c.GetType() Is GetType(TextBox) Then
            'is it a Text Box?
            Dim t As TextBox = c
            t.Text = ""
        ElseIf c.GetType() Is GetType(DropDownList) Then
            'is it a dropdown list?
            Dim d As DropDownList = c
            d.ClearSelection()
        End If
    Next

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:21:41.773

自从我用控件在 .NET 中编写任何东西已经有一段时间了，MVC 把我宠坏了，或者使用 VB.NET ......

但是我认为您可能需要通过控件堆栈递归：

```
Protected Sub btnClear_Click(sender as Object, e as System.eventargs) Handles btnClear.Click
   ClearForm(Page)

End Sub

Public Sub ClearForm(ByRef Parent As Control)
    Dim c As Control
    Dim x As Integer = Parent.Controls.Count
    For Each c In Parent.Controls
        If c.GetType.ToString = "System.Web.UI.HtmlControls.HtmlForm" Then
            ClearForm(c)
        ElseIf c.GetType() Is GetType(TextBox) Then
            'is it a Text Box?
            Dim t As TextBox = c
            t.Text = ""
        ElseIf c.GetType() Is GetType(DropDownList) Then
            'is it a dropdown list?
            Dim d As DropDownList = c
            d.ClearSelection()
        ElseIf c.Controls != null ' Does VB.NET support nulls? I forget
            ClearForm(c.Controls)
        End If
    Next

End Sub 
```

# c# - 读取命名空间中的元素

> ID：11975820
> 
> 赞同：0
> 
> 时间：2012-08-15T19:24:37.583
> 
> 标签：c#, xml, xml-namespaces

我有一个如下所示的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="https://www.someurl.com/somefile.xslt"?>
<AutoInsuranceClaim xmlns="http://www.someurl.com/schemas/AutoInsuranceClaim">
    <Identification>
        <BaseOwner>3</BaseOwner>
        <BaseType>ABC123</BaseType>
        <BaseTypeRef>471038341757</BaseTypeRef>
    </Identification>
</AutoInsuranceClaim> 
```

我正在尝试读取标识节点。这是我的代码：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(@"..\..\Data.xml");

XmlNamespaceManager nsmgr = new XmlNamespaceManager(xmlDoc.NameTable);
nsmgr.AddNamespace("ns", "http://www.someurl.com/schemas/AutoInsuranceClaim");

XmlNodeList nodeList = xmlDoc.SelectNodes(@"/ns:AutoInsuranceClaim/Identification", nsmgr);

Console.WriteLine("There are {0} nodes...", nodeList.Count); 
```

我知道我应该得到至少 1 个值。我对 .NET XML 解析的理解是，如果您有一个没有前缀的默认命名空间，则必须创建自己的命名空间。但这应该返回 1。

如果没有，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:33:30.007

```
 XElement root = XElement.Load("Data.xml");
        var identifications = root.Descendants()
           .Where(x => x.Name.LocalName == "Identification")
           .ToList() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:29:06.510

我可能在这里抓住了稻草，但是您不应该在 xpath 表达式中对两个实体进行命名空间吗？

```
XmlNodeList nodeList = xmlDoc.SelectNodes(@"/ns:AutoInsuranceClaim/ns:Identification", nsmgr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:28:37.157

问题是您正在尝试查找*没有*`Identification`命名空间的节点，但由于该部分，它将默认为与父节点相同的命名空间。尝试这个：*`xmlns=...`*

 *```
var nodeList = xmlDoc.SelectNodes("/ns:AutoInsuranceClaim/ns:Identification", 
                                  nsmgr); 
```

自己尝试过，它打印的计数为 1。

不过，我个人会改用 LINQ to XML，这使得命名空间更容易处理：

```
XDocument doc = XDocument.Load(@"..\..\Data.xml");
XNamespace ns = "http://www.someurl.com/schemas/AutoInsuranceClaim";
var nodes = doc.Root.Elements(ns + "Identification"); 
```*

# html - 将不正确的 URL 重定向到 HTTPS 站点的方法？

> ID：11975821
> 
> 赞同：1
> 
> 时间：2012-08-15T19:24:41.487
> 
> 标签：html, apache, http, https

我已经在以下位置设置了一个网站：

```
https://foo.com 
```

如果来自以下网址的流量，我希望它：

```
http://foo.com
http://www.foo.com
https://www.foo.com 
```

会自动重定向到那里。也就是说，如果有人在他们的浏览器中键入较低的三个 URL 之一，我希望它立即更改显示的 URL，`https://foo.com`并且我希望`https://foo.com`在服务器上接收 HTTPS 请求，就像该人键入`https://foo.com`.

哪种方法最好？我正在使用 Apache。

SSL证书也`foo.com`没有签名，是否可以在不发出证书警告的情况下`www.foo.com`实现重定向？`https://www.foo.com`还是我需要获得第二个证书`www.foo.com`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:30:05.923

在您的 vhost 文件或 .htaccess 文件中使用重写来重定向所有非 SSL 站点都没有问题（假设您有 *.foo.com 是 foo.com 的服务器别名）。

您需要为每个拼写错误的 ssl url 提供一个证书，否则当人们尝试连接它们时，它们会出现证书错误。完成后，您可以重定向它们。

假设服务器别名已设置并且您启用了 mod_rewrite，以下是您需要的重写规则：

```
RewriteRule (.*) https://foo.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:31:55.750

未经测试但值得一试
将此附加到您的 httpd.conf

```
<VirtualHost *:80>
        ServerName foo.com
        ServerAlias www.foo.com
        DocumentRoot /var/www/foo
</VirtualHost>

<VirtualHost *:443>
        ServerName foo.com
        DocumentRoot /var/www/foo
        SSLEngine on
        SSLCertificateFile /etc/ssl/certs/certificate.crt
        SSLCertificateKeyFile /etc/ssl/certs/app_foo_com.key
        SSLCertificateChainFile /etc/ssl/certs/foo.ca.crt
        ErrorLog /var/log/ssl_engine.log
</VirtualHost> 
```

# orm - Neo4j 可以与 RailwayJS 一起使用吗

> ID：11975823
> 
> 赞同：1
> 
> 时间：2012-08-15T19:24:43.963
> 
> 标签：orm, neo4j, railway.js

我在使用 neo4j 作为我的 RailroadJS 启动项目的后备数据库时遇到问题。我更新了 database.json 文件以指向我的本地 neo4j 实例，但是当我调用任何具有数据访问权限的路由时，它似乎只是挂起。

这是我的 database.json 文件中的内容

```
{ 
"development":
  { "driver":   "neo4j" , "url":     "http://localhost:7474/"}
, "test":
  { "driver":   "memory"
  }
} 
```

RailwayJS 是否支持neo4j？有什么我需要配置它才能工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:45:52.847

不知道RailwayJS，但有一个Node.js的驱动程序，请参阅[https://github.com/thingdom/node-neo4j/](https://github.com/thingdom/node-neo4j/)

当你开始工作时，我很想看看一些博客！

# php - PHP - 获取 blob 图像大小 - FPDF - getimagesizefromstring 不起作用

> ID：11975828
> 
> 赞同：1
> 
> 时间：2012-08-15T19:25:05.343
> 
> 标签：php, image, blob, fpdf, getimagesize

所以我使用 php/oracle 通过 FPDF 类/插件创建 PDF。我正在使用 Mem_Image 类/脚本将 blob 图像添加到我的 PDF，但我无法确定图像的大小。我正在运行 PHP 5.2，所以 getimagesizefromstring 不起作用。

对于图像，它将具有我可以在 FPDF 类中设置的固定高度，但由于它可能是纵向或横向图像，因此我需要按比例缩放图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:30:37.100

使用[`imagecreatefromstring`](http://www.php.net/manual/en/function.imagecreatefromstring.php)和[`imagesx`](http://www.php.net/manual/en/function.imagesx.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:40:55.233

getimagesize() 确实适用于流包装器。不幸的是， php://memory 没有为您提供通过文件名引用它的方法。要么创建您自己的更智能的流包装器，要么使用[VariableStream 示例](http://php.net/manual/en/stream.streamwrapper.example-1.php)。

# javascript - 替代 jquery tmpl 用于内联 html？

> ID：11975829
> 
> 赞同：0
> 
> 时间：2012-08-15T19:25:07.780
> 
> 标签：javascript, jquery, jquery-templates

我目前在我的 jquery 中遇到了长的内联 html，以便动态生成长的 html 片段。例子：

```
var personalMessage = $("<div title='" + chatid + "' class='personalMessage'><div class='personalChatName'>" + fullname + "</div><div class='personalChatDialog'></div></div>")
$ContactsBar.prepend(personalMessage); 
```

我想在我的中添加更多的 html，`personalMessage`所以我开始认为 jquery.tmpl 将是完美的，但 jQuery 停止了它，我不知道为什么，但是现在每个人都使用更好的新东西或替代方法吗？还是每个人都还在使用 jquery.tmpl？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:07:00.880

我最近遇到了这个：[t.js](https://github.com/jasonmoo/t.js)

但是，如果您的需求相当有限，您可以`String`使用一个简单的`template`函数进行扩展：

```
String.prototype.template = function(obj) {
    return this.replace(/\{\{([\w]+)\}\}/g, function(str, prop) {
        return obj[prop];
    });
};

alert('<div>my name is: {{last}}, {{first}}</div>'.template({first:'John', last:'Smith'})); 
```

[看看这个](http://jsfiddle.net/qr3fX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:45:44.903

如果您正在寻找 Javascript 中的 HTML 模板语言，您可能需要查看[Mustache.js](http://mustache.github.com/)。

它似乎相当受欢迎。

希望有帮助。

# asp.net - 从子页面访问母版页上的项目

> ID：11975831
> 
> 赞同：0
> 
> 时间：2012-08-15T19:25:09.983
> 
> 标签：asp.net, vb.net

我有一个`<ASP:Label ID="lblDashboardLink" runat="server" />`位于名为**MasterBase**的 MasterPage 上。

从使用此 MasterPage 的页面，我如何访问此`label`项目或我需要的任何其他项目？

```
'VB.NET
'(From the child .aspx page)
Master.FindControl("lblDashboardLink"). <-- but don't see an option to change URL 
```

我一直在谷歌搜索，我一直在寻找同样的方法，但它更多地关注用户控件，它看起来像......有人可以在这里指导我正确的方向吗？我已经习惯了 MVC！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:28:10.863

尝试这个：

```
CType(Master.FindControl("lblDashboardLink"), Label).Text = "some url" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:28:35.053

Master.FindControl("lblDashboardLink") 总是返回一个`Control`（参见[MSDN](http://msdn.microsoft.com/de-de/library/486wc64h.aspx)）。因此，您所要做的就是**将其转换为 Label**。然后您可以访问标签的任何属性。无论如何，标签中没有 URL 属性...

```
CType(Master.FindControl("lblDashboardLink"), Label).Text = "your value" 
```

# android - 在 qualcomm sdk for android 中加载另一个 3D 模型

> ID：11975833
> 
> 赞同：3
> 
> 时间：2012-08-15T19:25:32.247
> 
> 标签：android, android-ndk, augmented-reality

我正在使用 qualcomm sdk 并使用 ImageTargets 示例应用程序来开发增强现实应用程序。应用程序运行良好，但我想在用户触摸屏幕时加载另一个 3D 模型，即当相机视图启动并到达标记时，茶壶 3D 模型加载，然后用户触摸屏幕，应该加载一个新模型。以下是我正在执行的步骤：-

1.  我得到了新的 3D 模型并得到了它的 .h 文件。我已将其包含在 assets 文件夹中，并将其包含在 ImageTargets.cpp 文件中，即 #include "./banana.h"

2.  然后我在 ImageTargets.java 文件中添加了 ontouchEvent，该文件调用 ImageTargets.cpp 中的另一个函数，该函数更新了 modelID 变量。

3.  以下是renderFrame函数中ImageTargets.cpp的编辑代码

    ```
     #ifdef USE_OPENGL_ES_1_1
    // Load projection matrix:

    glMatrixMode(GL_PROJECTION);
    glLoadMatrixf(projectionMatrix.data);

    // Load model view matrix:
    glMatrixMode(GL_MODELVIEW);
    glLoadMatrixf(modelViewMatrix.data);
    glTranslatef(0.f, 0.f, kObjectScale);
    glScalef(kObjectScale, kObjectScale, kObjectScale);

    // Draw object:
    glBindTexture(GL_TEXTURE_2D, thisTexture->mTextureID);

    if (modeId == 0){
        glTexCoordPointer(2, GL_FLOAT, 0, (const GLvoid*) &teapotTexCoords[0]);
        glVertexPointer(3, GL_FLOAT, 0, (const GLvoid*) &teapotVertices[0]);
        glNormalPointer(GL_FLOAT, 0,  (const GLvoid*) &teapotNormals[0]);
        glDrawElements(GL_TRIANGLES, NUM_TEAPOT_OBJECT_INDEX, GL_UNSIGNED_SHORT,
                   (const GLvoid*) &teapotIndices[0]);
    }
    else{
        glVertexPointer(3, GL_FLOAT, 0, bananaVerts);
        glNormalPointer(GL_FLOAT, 0, bananaNormals);
        //glTexCoordPointer(2, GL_FLOAT, 0, bananaTexCoords);
        glDrawArrays(GL_TRIANGLES, 0 , bananaNumVerts);
    }
      #else
    LOG("When tracker found 4");
    QCAR::Matrix44F modelViewProjection;

    SampleUtils::translatePoseMatrix(0.0f, 0.0f, kObjectScale,
                                     &modelViewMatrix.data[0]);
    SampleUtils::scalePoseMatrix(kObjectScale, kObjectScale, kObjectScale,
                                 &modelViewMatrix.data[0]);
    SampleUtils::multiplyMatrix(&projectionMatrix.data[0],
                                &modelViewMatrix.data[0] ,
                                &modelViewProjection.data[0]);

    glUseProgram(shaderProgramID);

    if (modelId == 0)
    {
        LOG("ModelID is 0");
        glVertexAttribPointer(vertexHandle, 3, GL_FLOAT, GL_FALSE, 0,
                          (const GLvoid*) &teapotVertices[0]);
        glVertexAttribPointer(normalHandle, 3, GL_FLOAT, GL_FALSE, 0,
                          (const GLvoid*) &teapotNormals[0]);
        glVertexAttribPointer(textureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0,
                          (const GLvoid*) &teapotTexCoords[0]);
    }
    else
    {
        LOG("ModelID is 1");
        glVertexAttribPointer(vertexHandle, 3, GL_FLOAT, GL_FALSE, 0,
                                  (const GLvoid*) &bananaVerts[0]);
        glVertexAttribPointer(normalHandle, 3, GL_FLOAT, GL_FALSE, 0,
                                  (const GLvoid*) &bananaNormals[0]);
        glVertexAttribPointer(textureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0,
                                 (const GLvoid*) &bananaTexCoords[0]);
    }

    glEnableVertexAttribArray(vertexHandle);
    glEnableVertexAttribArray(normalHandle);
    glEnableVertexAttribArray(textureCoordHandle);

    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, thisTexture->mTextureID);
    glUniformMatrix4fv(mvpMatrixHandle, 1, GL_FALSE,
                       (GLfloat*)&modelViewProjection.data[0] );

    if (modelId == 0)
    {
        LOG("ModelID is 0");
        glDrawElements(GL_TRIANGLES, NUM_TEAPOT_OBJECT_INDEX, GL_UNSIGNED_SHORT,
                   (const GLvoid*) &teapotIndices[0]);
    }
    else{
        LOG("ModelID is 1");
        glDrawArrays(GL_TRIANGLES, 0, bananaNumVerts);
    }

    SampleUtils::checkGlError("ImageTargets renderFrame");

     #endif 
    ```

**编辑**

我解决了这个问题，但如果使用 glDrawElements 那么你不应该使用 glDrawArrays。所以我从一些 3d .obj 文件创建了另一个 .h 文件，它开始工作。

# python - 尝试运行命令“scrapy crawl test”时出现 libxml2 或 lxml 错误

> ID：11975834
> 
> 赞同：1
> 
> 时间：2012-08-15T19:25:33.707
> 
> 标签：python, lxml, scrapy, libxml2, scrapyd

我的源代码如下：

```
//Spider
class test_crawler(BaseSpider):
    name = 'test'
    allowed_domains = ['http://test.com']
    start_urls = ['http://test.com/test']

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        question_info = hxs.select('//div[contains(@class, "detail")]')
        answer_info = hxs.select('//div[contains(@class, "doctor_ans")]')

        row_for_question = question_info.select('table/tr/td')
        qna = QnaItem()
        qna['title'] = question_info.select('h2/text()').extract()
        qna['category'] = row_for_question[3].select('a/text()').extract()
        qna['question'] = row_for_question[7].select('text()').extract()
        qna['answer'] = answer_info.select('p[contains(@class,"MsoNormal")]/span/span/span/font/text()').extract()
        return qna

//Pipeline
class XmlExportPipeline(object):

    def __init__(self):
        dispatcher.connect(self.spider_opened, signals.spider_opened)
        dispatcher.connect(self.spider_closed, signals.spider_closed)
        self.files = {}

    def spider_opened(self, spider):
        file = open('%s_products.xml' % spider.name, 'w+b')
        self.files[spider] = file
        self.exporter = XmlItemExporter(file)
        self.exporter.start_exporting()

    def spider_closed(self, spider):
        self.exporter.finish_exporting()
        file = self.files.pop(spider)
        file.close()

    def process_item(self, item, spider):
        self.exporter.export_item(item)
        return item 
```

当我在 shell 命令（scrapy shell [http://test.com/test](http://test.com/test)）中运行时，它工作正常。我没有收到任何错误。但是，当我运行命令“scrapy crawl test”时，我遇到以下错误：

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\twisted\internet\base.py", line 11
78, in mainLoop
    self.runUntilCurrent()
  File "C:\Python27\lib\site-packages\twisted\internet\base.py", line 80
0, in runUntilCurrent
    call.func(*call.args, **call.kw)
  File "C:\Python27\lib\site-packages\twisted\internet\defer.py", line 3
68, in callback
    self._startRunCallbacks(result)
  File "C:\Python27\lib\site-packages\twisted\internet\defer.py", line 4
64, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "C:\Python27\lib\site-packages\twisted\internet\defer.py", line 5
51, in _runCallbacks
    current.result = callback(current.result, *args, **kw)
  File "E:\Projects\tysk-osqa\osqa\scrapy\qna_crawler\spiders\qna.py", l
ine 14, in parse
    question_info = HtmlXPathSelector(response).select('//div[contains(@
class, "detail")]')
  File "C:\Python27\lib\site-packages\scrapy-0.14.4-py2.7.egg\scrapy\sel
ector\dummysel.py", line 16, in _raise
    raise RuntimeError("No selectors backend available. " \
exceptions.RuntimeError: No selectors backend available. Please install
libxml2 or lxml 
```

这不是真的，因为我已经安装了 libxml2 和 lxml。[我从http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)下载并安装了二进制包（64 位） 另外，我可以从 cmd 成功导入 lxml 和 libxml2。

请帮我解决这个问题。

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:00:21.333

您需要安装 32 位版本，`libxml`并`libxml2`注意在安装适用于 Windows 的二进制文件时；它们只为系统 Python（在注册表中找到的那个）安装。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T04:57:10.267

我想你还没有设置 virtualenv 来安装 libxml2 ， lxml 。

尝试： pip install lxml

并将 lxml 添加到 requirements.txt

# sql - 如果没有匹配到我的一对，想返回一个假行（一年）

> ID：11975839
> 
> 赞同：1
> 
> 时间：2012-08-15T19:26:00.063
> 
> 标签：sql, sql-server

我想清理从查询返回的一些数据。这个查询：

```
select seriesId,
       startDate,
       reportingCountyId,
       countyId,
       countyName,
       pocId,
       pocValue
  from someTable
 where seriesId = 147
   and pocid = 2
   and countyId in (2033,2040) 
```

按开始日期排序

通常返回所有年份的 2 个县匹配：

```
seriesId    startDate   reportingCountyId   countyId    countyName  pocId   pocValue
147 2004-01-01 00:00:00.000 6910    2040    CountyOne       2   828

147 2005-01-01 00:00:00.000 2998    2033    CountyTwo   2   4514
147 2005-01-01 00:00:00.000 3000    2040    CountyOne       2   2446

147 2006-01-01 00:00:00.000 3018    2033    CountyTwo   2   5675
147 2006-01-01 00:00:00.000 4754    2040    CountyOne       2   2265

147 2007-01-01 00:00:00.000 3894    2033    CountyTwo   2   6250
147 2007-01-01 00:00:00.000 3895    2040    CountyOne       2   2127

147 2008-01-01 00:00:00.000 4842    2033    CountyTwo   2   5696
147 2008-01-01 00:00:00.000 4846    2040    CountyOne       2   2013

147 2009-01-01 00:00:00.000 6786    2033    CountyTwo   2   2578
147 2009-01-01 00:00:00.000 6817    2040    CountyTwo   2   1933

147 2010-01-01 00:00:00.000 6871    2040    CountyOne       2   1799
147 2010-01-01 00:00:00.000 6872    2033    CountyTwo   2   4223

147 2011-01-01 00:00:00.000 8314    2033    CountyTwo   2   3596
147 2011-01-01 00:00:00.000 8315    2040    CountyOne       2   1559 
```

但请注意，第一个条目只有 2004 年的 CountyOne。我想为我正在做的图表返回 CountyTwo 的假行。仅使用 pocValue = 0 像 CountyOne 一样填充它就足够了。

谢谢！！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:31:53.380

试试这个（如果你需要那个国家的空白行）

```
; with CTE AS 

(SELECT 2033 As CountryID UNION SELECT 2040),

CTE2 AS
(
       seriesId, startDate, reportingCountyId, 
       countyId, countyName, pocId, pocValue 
       from someTable where 
       seriesId = 147 and pocid = 2 and countyId in (2033,2040) 
       order by startDate
)

SELECT x1.CountyId, x2.*, IsNull(pocValue,0) NewpocValue FROM CTE x
LEFT OUTER JOIN CTE2 x2 ON x1.CountyId = x2.reportingCountyId 
```

# javascript - 更改数组的顺序以匹配一组 DOM 元素的顺序

> ID：11975840
> 
> 赞同：2
> 
> 时间：2012-08-15T19:26:05.243
> 
> 标签：javascript, jquery, arrays, sorting

我正在做一些 html5 / jquery 拖放功能来重新排序一组 DOM 元素。我现在想更改与这些 DOM 元素相对应的对象数组，但我不太确定该怎么做。这是javascript：

```
var draggedIndex = $('.segmentListItem').index($(draggedItem));
var targetIndex = $('.segmentListItem').index($(this));
var playlist = jwplayer().getPlaylist(); //MH - the array for which I want to change the order

if (draggedIndex > targetIndex){
    $(draggedItem).insertBefore($(this));
    //MH - need to move the playlist item at the index of the dragged item before index the target item as well
} else {
    $(draggedItem).insertAfter($(this));
    //MH - need to move the playlist item at the index of the dragged item before index the target item as well

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:38:10.367

如果播放列表是一个常规数组，而不是一个对象（你将它作为一个数组来引用），可能是这样的：

```
Array.prototype.move = function (old_index, new_index) {
    if (new_index >= this.length) {
        var k = new_index - this.length;
        while ((k--) + 1) {
            this.push(undefined);
        }
    }
    this.splice(new_index, 0, this.splice(old_index, 1)[0]);
};

var draggedIndex = $('.segmentListItem').index($(draggedItem));
var targetIndex = $('.segmentListItem').index($(this));
var playlist = jwplayer().getPlaylist(); //MH - the array for which I want to change the order

if (draggedIndex > targetIndex){
    $(draggedItem).insertBefore($(this));
    playlist.move(draggedIndex, targetIndex);
} else {
    $(draggedItem).insertAfter($(this));
    playlist.move(draggedIndex, targetIndex);
} 
```

# matrix - 4x4 定点矩阵乘法不起作用

> ID：11975842
> 
> 赞同：0
> 
> 时间：2012-08-15T19:26:29.380
> 
> 标签：matrix, fixed, point, multiplication

我有这个连接两个矩阵的函数：

```
out->_11 = MAT_MUL(b->_11, a->_11) + MAT_MUL(b->_21, a->_12) + MAT_MUL(b->_31, a->_13) + MAT_MUL(b->_41, a->_14);
out->_12 = MAT_MUL(b->_12, a->_11) + MAT_MUL(b->_22, a->_12) + MAT_MUL(b->_32, a->_13) + MAT_MUL(b->_42, a->_14);
out->_13 = MAT_MUL(b->_13, a->_11) + MAT_MUL(b->_23, a->_12) + MAT_MUL(b->_33, a->_13) + MAT_MUL(b->_43, a->_14);
out->_14 = MAT_MUL(b->_14, a->_11) + MAT_MUL(b->_24, a->_12) + MAT_MUL(b->_34, a->_13) + MAT_MUL(b->_44, a->_14);
out->_21 = MAT_MUL(b->_11, a->_21) + MAT_MUL(b->_21, a->_22) + MAT_MUL(b->_31, a->_23) + MAT_MUL(b->_41, a->_24);
out->_22 = MAT_MUL(b->_12, a->_21) + MAT_MUL(b->_22, a->_22) + MAT_MUL(b->_32, a->_23) + MAT_MUL(b->_42, a->_24);
out->_23 = MAT_MUL(b->_13, a->_21) + MAT_MUL(b->_23, a->_22) + MAT_MUL(b->_33, a->_23) + MAT_MUL(b->_43, a->_24);
out->_24 = MAT_MUL(b->_14, a->_21) + MAT_MUL(b->_24, a->_22) + MAT_MUL(b->_34, a->_23) + MAT_MUL(b->_44, a->_24);
out->_31 = MAT_MUL(b->_11, a->_31) + MAT_MUL(b->_21, a->_32) + MAT_MUL(b->_31, a->_33) + MAT_MUL(b->_41, a->_34);
out->_32 = MAT_MUL(b->_12, a->_31) + MAT_MUL(b->_22, a->_32) + MAT_MUL(b->_32, a->_33) + MAT_MUL(b->_42, a->_34);
out->_33 = MAT_MUL(b->_13, a->_31) + MAT_MUL(b->_23, a->_32) + MAT_MUL(b->_33, a->_33) + MAT_MUL(b->_43, a->_34);
out->_34 = MAT_MUL(b->_14, a->_31) + MAT_MUL(b->_24, a->_32) + MAT_MUL(b->_34, a->_33) + MAT_MUL(b->_44, a->_34);
out->_41 = MAT_MUL(b->_11, a->_41) + MAT_MUL(b->_21, a->_42) + MAT_MUL(b->_31, a->_43) + MAT_MUL(b->_41, a->_44);
out->_42 = MAT_MUL(b->_12, a->_41) + MAT_MUL(b->_22, a->_42) + MAT_MUL(b->_32, a->_43) + MAT_MUL(b->_42, a->_44);
out->_43 = MAT_MUL(b->_13, a->_41) + MAT_MUL(b->_23, a->_42) + MAT_MUL(b->_33, a->_43) + MAT_MUL(b->_43, a->_44);
out->_44 = MAT_MUL(b->_14, a->_41) + MAT_MUL(b->_24, a->_42) + MAT_MUL(b->_34, a->_43) + MAT_MUL(b->_44, a->_44); 
```

MAT_MUL 看起来像这样：

```
#define MAT_MUL(o1,o2) ((GLfixed)((long)(o1)*(long)(o2))>>16) 
```

奇怪的是，它不适用于定点值，而是浮点值（在这种情况下为 MAT_MUL(o1,o2) (o1)*(o2) ）。我将错误追溯到这段代码。

有任何想法吗？谢谢

# wxwidgets - wxWidgets v2.9.4 对话框窗口在使用aero主题时需要更多空间

> ID：11975843
> 
> 赞同：0
> 
> 时间：2012-08-15T19:26:43.270
> 
> 标签：wxwidgets

当我使用 windows 经典主题设计 wxWidgets 对话窗口时，一切看起来都不错。

但是，当我在使用 aero 主题的机器上运行该应用程序时，空间会变大，并且项目开始在窗口底部下方消失。

这是 wxWidgets v2.9.4。wxWidgets v2.8.12下不会出现问题

这是同一对话框的屏幕截图，左侧为航空经典，右侧为经典。注意使用 aero 时 OK 按钮是如何消失的！

![在此处输入图像描述](../Images/c1f4bde9f89405a8ba821e2914c2ccbf.png)

我怎么解决这个问题？我希望对话框元素的间距在所有主题下都相同。

调用 GetSizer()->Fit() 可以隐藏这个问题，方法是根据碰巧使用的主题所需的空间调整整个窗口的大小。但是，我想更好地理解这个问题。我以像素（5、10 等）为单位指定小部件周围的边框，并且字体大小似乎没有改变（我认为），那么一个主题如何使用比另一个主题更多的空间？奇怪的事情正在发生！

这是演示问题的简单对话框的代码。

```
class cMyDialog : public wxDialog
{
public:
    cMyDialog()
        : wxDialog(NULL,-1,L"Test Dialog")
    {
        wxStaticText * text = new wxStaticText(this,-1,
            L"Lorem ipsum dolor sit amet,\n"
            L"consectetur adipiscing elit.\n"
            L"Nulla porta aliquam urna,\n"
            L"in aliquam massa mattis at.\n"
            L"Lorem ipsum dolor sit amet,\n"
            L"consectetur adipiscing elit.\n"
            L"Nunc ullamcorper euismod lacus vel condimentum.\n"
            L"Sed id magna ac nisl placerat tristique eu sit amet lorem.\n"
            );
        wxButton * button = new wxButton(this,-1,"OK");
        wxSizer * szr = new wxBoxSizer(wxVERTICAL);
        szr->Add( text, 0, wxALL, 20 );
        szr->Add( button, 0, wxALL, 20 );
        SetSizer( szr );

    }
}; 
```

这是使用 windows 经典设计的，并与 wxwidgets v2.9.3 链接。在同一主题下运行时看起来像这样：

![在此处输入图像描述](../Images/fbea8babd0d0657c5f2ee8fff5c2525a.png)

但是，如果你停止应用程序，将主题更改为 aero，再次运行应用程序，它看起来像这样：

![在此处输入图像描述](../Images/6a18eacf21e12e5cc87a129815b296a7.png)

注意确定按钮几乎从对话框底部消失了。

（还要注意，您必须停止应用程序，更改主题，然后重新启动应用程序。只需在应用程序运行时更改主题即可。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:44:48.463

`GetSizer()->Fit()`当您完成向布局添加控件时尝试使用（[请参阅文档](http://docs.wxwidgets.org/2.9.4/classwx_sizer.html#abad9cedc0cbe9ade2c799da23462d17e)）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T21:48:41.870

wxWidgets v2.9.4下默认字体大小在主题为'aero'时为9磅，但在主题为'windows classic'时为8磅。在 v2.8.12 中，无论使用什么主题，默认字体都是 8 磅。

结果是，如果我在一个主题下设计我的对话框布局，但用户使用不同的主题运行应用程序，则对话框的布局会有所不同。小部件需要更多或更少的空间，具体取决于主题。最糟糕的问题是，我通常放置在对话框底部的 OK/CANCEL 按钮会根据选择的主题出现或消失。这让用户很不爽！

*将字体大小显式设置为 8 磅可解决此问题。*

（这是怎么回事！！！！！！！！！！！！！！！我无法想象做出这种改变的理由，破坏了每一个升级的对话。）

显然这是微软的错——他们改变了默认字体大小以“提高可读性”。( [http://en.wikipedia.org/wiki/Windows_Aero#Font](http://en.wikipedia.org/wiki/Windows_Aero#Font) ) 白痴！现在我必须在每个应用程序中指定字体大小，以便无论最终用户选择什么主题，对话框都具有相同的布局。叹！

如果不是这样的灾难，它可能会很有趣。wxWidgets 应该是跨平台的，但现在它甚至不再是跨主题了。

# iphone - 将信用卡信息存储在云中以与基于休息的服务进行交互

> ID：11975844
> 
> 赞同：1
> 
> 时间：2012-08-15T19:26:44.047
> 
> 标签：iphone, ios, rest, amazon-simpledb

**我有一个 iPhone 应用程序需要使用由另一家公司托管的 rest xml api**来处理信用卡付款。**该服务不允许我使用他们**以前保存的信用卡数据**处理交易。这存在一个问题，因为我不希望客户必须在每次交易中输入他们的付款信息。**

 **我正在考虑建立一个**并行数据库**，并使用 amazon simpledb 或 dynamodb 将信用卡数据存储在云中。

我想知道是否有其他人遇到过这个问题，而您建议的最佳途径是。到目前为止我考虑过的解决方案是

**选项1**

*   使用令牌自动售货机获取访问亚马逊 simpleDB 的凭据
*   将令牌存储在钥匙串中
*   使用 AES 256 加密对手机上的支付数据进行加密
*   将数据上传到云数据库
*   当用户想要处理交易时，从amazonDB下载/解密数据并通过公司rest api正常处理交易

**选项 #2**

*   使用服务器端技术（红宝石等）
*   iPhone 应用程序将缺少付款信息的其余 URL 发布到服务器
*   让服务器与亚马逊 simpleDB 通信
*   服务器应用程序附加信用卡数据并处理交易，并将结果返回给应用程序

选项#3？他们是我应该这样做的更好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:23:46.440

这是一个非常糟糕的主意，您不能像这样存储信用卡数据。如果您真的想避免用户必须在每笔交易中输入支付信息，则将其本地存储在他的设备上，也许在钥匙串中。但前提是用户明确允许这样做。您可能还想咨询律师，信用卡数据处理不当会给您带来很多麻烦。**

# performance - MS Access - 将小数据集与非常大的数据集匹配

> ID：11975845
> 
> 赞同：0
> 
> 时间：2012-08-15T19:26:48.867
> 
> 标签：performance, ms-access, indexing

我有一个巨大的 excel 文件，其中包含超过一百万行和一堆列 (300)，我已将其导入到 access 数据库中。我正在尝试对其运行内部联接查询，该查询与相对较小数据集中的数字字段匹配。如果可能，我想从庞大的数据集中捕获所有数据列。当我从庞大的数据集中仅选择一列时，我能够在大约 1/2 小时内运行查询。但是，当我从较大的数据集中选择所有列并将查询写入表时，它就永远不会停止。

一个考虑因素是较小数据集的连接字段是数字，而较大数据集的连接字段是文本。为了解决这个问题，我在更大的数据集上创建了一个查询，它使用“val”函数将文本字段转换为数字。有问题的文本字段已编入索引，但我想我应该将表本身转换为数字字段以匹配较小数据集的类型。也许这会使查找更有效率。

除此之外，我可以使用并且非常感谢一些关于让这个查询在合理的时间内运行的好策略的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:34:12.893

Access 是一个关系数据库。如果您的结构尊重关系模型，它旨在高效工作。音量不是问题。

第 1 步：规范化您的数据。如果您不知道这意味着什么，Access 中有一个向导可以帮助您（数据库工具、分析表），或者搜索**数据库规范化**
步骤 2：索引连接字段
步骤 3：快速享受结果

您必须将连接的双方都放在同一类型中。如果不这样做，索引和优化将无法运行。

# javascript - 检查与 IP 地址的连接是否丢失

> ID：11975847
> 
> 赞同：0
> 
> 时间：2012-08-15T19:26:53.673
> 
> 标签：javascript, ajax

对于我的网络应用程序，我需要一种方法来检测应用程序是否丢失了与其运行的 IP 地址 (100.100.100.100) 的连接，或者设备是否已连接到不同的网络/连接。这一切都必须在客户端完成。目前我正在执行以下操作，但似乎不起作用。任何想法如何做到这一点？谢谢。

```
$.ajax({
   type: "GET",
   url: "100.100.100.100",
   success: function(){
    alert("Connection Good!")
   }
   error: function(XMLHttpRequest, textStatus, errorThrown){
    if(textStatus == 'timeout') {
       alert("Connection has been lost.");  
    }
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:28:26.670

由于同源策略，它不适用于随机 IP 地址。最好的办法是向您的应用程序提供服务的服务器上的 URL 发出请求（即与 JS 文件来自相同的权限），这会给出已知的良好响应。

** 更新为了清楚起见，“权威”是指主机、端口和协议。例如， http: [//google.com](http://google.com)与[https://google.com](https://google.com)不同，也与[http://google.com:8080不同](http://google.com:8080)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:48:44.267

您可以创建实际 ping 目标 IP 的简单 PHP（或您使用的任何语言）。

然后你可以打电话

```
http://www.example.com/my_ping_script.php?target=10.10.10.10 
```

通过 AJAX，它将返回连接状态为简单的“OK”或“LOST”。

ping 我的意思是[ICMP ping](http://en.wikipedia.org/wiki/Ping_%28networking_utility%29)

# drupal - 向 Drupal 7 添加新内容不起作用

> ID：11975850
> 
> 赞同：0
> 
> 时间：2012-08-15T19:26:59.870
> 
> 标签：drupal, content-management-system, drupal-7

出于某种原因，Drupal 7 不允许我编辑或添加新的内容类型。我已经检查了权限/清除了所有缓存，但仍然没有任何结果。

除了截图我不知道如何描述这个问题，所以这里是

![点击这里](../Images/1e778904e84ef1038993b9d8b0cd4e1a.png)

有没有人遇到过类似的问题和/或有解决方案？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T23:01:39.603

查看底部的屏幕截图，看起来页面还没有完全加载。它说等待一些IP号码。

# c++ - 检测 UDP DoS 攻击

> ID：11975857
> 
> 赞同：0
> 
> 时间：2012-08-15T19:27:11.457
> 
> 标签：c++, security, winpcap

我正在尝试编写一个使用 C++ 和 WinPcap 检测 UDP DoS 攻击的程序。我可以使用什么标准来识别此类攻击？我注意到许多 UDP DoS 生成器程序一遍又一遍地发送相同的有效负载，因此我可能可以检测到，但是生成随机有效负载非常简单。关于做什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:36:44.497

我假设 UDP 数据包将具有欺骗的 IP 地址。如果您不打算将请求列入白名单以便测试它们的有效性，那么您不妨提出一个阈值，高于该阈值您已经确定它“可能”是 DoS 攻击。

# python - 如何在 Django Comment 框架中对用户进行身份验证？

> ID：11975861
> 
> 赞同：0
> 
> 时间：2012-08-15T19:27:21.357
> 
> 标签：python, django, django-templates, django-views, django-comments

我正在使用 Django 的评论框架作为我项目的一部分。默认设置下，匿名用户可以随意发表评论。

我想更改此功能，以便只有经过身份验证的用户才能发表评论。此外，我希望这个经过身份验证的用户名显示在评论旁边。

我该怎么做呢？我已经阅读了文档，并且我了解预定义的评论模型有一个“用户”字段，它是发布评论的用户模型/用户的外键（[链接在这里](https://docs.djangoproject.com/en/dev/ref/contrib/comments/models/)）。但是，我不明白如何将 request.user（即当前经过身份验证的用户）分配给属于评论实例的这个用户字段。

换句话说，Django 是如何将前端的表单数据处理到后端的 Comment 模型中的，我该如何编辑这个过程，例如将 request.user 分配给评论模型中的 user 字段。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:35:26.030

从[文档开始](https://docs.djangoproject.com/en/dev/topics/auth/)

基本上你需要（至少）：

1.  `django.contrib.auth`在你的启用`settings.py`
2.  定义登录视图
3.  `@login_required`在要限制的视图上使用装饰器
4.  检查`if request.user.is_authenticated()`您的表单处理代码。

# xpath - xmllint 未知选项'--xpath'

> ID：11975862
> 
> 赞同：23
> 
> 时间：2012-08-15T19:27:26.070
> 
> 标签：xpath, xmllint

我已经在几个地方看到过这种语法（例如，[here](https://github.com/jakepetroules/wherefrom/blob/master/wherefrom#L49)）：

`xmllint --xpath '/plist/array/string/text()' tmp.xml`，用于使用 xpath 选择器查询特定的 XML 节点。但是，`Unknown option --xpath`当我尝试在我的机器（mac os x snow leopard）上执行此操作时出现错误。

更仔细地查看 xmllint 的手册页，我没有看到`--xpath`记录的选项......

我只是在这里完全错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-07-05T09:06:15.450

```
xmllint --shell tmp.xml <<<'xpath /plist/array/string/text()' 
```

如果您需要使 xmllint 读取标准输入：

```
cat /tmp/tmp.xml | xmllint --shell <(cat) <<<'xpath /plist/array/string/text()' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-04T14:30:45.123

对于某些人来说，更新不是一种选择。您必须使用由其他团队安装的给定版本，然后您就可以使用它。

你可以通过 --shell 试试：

```
xmllint --shell tmp.xml << EOF
'/plist/array/string/text()'
EOF 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-15T19:41:41.437

啊，是的，一定是过时版本的`libxml2`.

通过 macports更新`libxml2`（到`v2.7.8`）似乎已经解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T12:03:29.563

如果要`plist`在 Mac 上从命令行操作文件，请使用`PlistBuddy`.

例如，您可以在 shell 脚本中执行此类操作：

```
BUNDLE_ID=`/usr/libexec/PlistBuddy -c 'Print :CFBundleIdentifier' Info.plist`
echo $BUNDLE_ID 
```

它非常强大，您可以在数组和字典中添加/删除项目，查找键值或索引值，复制/合并/导入其他文件等。查看`/usr/libexec/PlistBuddy -h`完整信息。

# android - 跨整个设备的手势监听器

> ID：11975865
> 
> 赞同：2
> 
> 时间：2012-08-15T19:27:27.607
> 
> 标签：android, android-service, android-gesture

我正在查看一个应用程序（SwipePad），并注意到在应用程序启动后，它会检测整个平台上的手势，即使在应用程序的主要部分被发送到后面（onPause ...即不是当前活动）。看起来它正在使用某种系统服务来保持自己的活力，但它如何仍然像这样在系统级别从边框获取手势？

有趣的是，应用程序本身没有使用 root。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:34:40.723

您可以制作可以位于所有其他窗口之上的布局。它们将从服务运行。

Checkout：[如何创建一个位于 Android 中所有应用程序之上的 UI 或小部件？](https://stackoverflow.com/questions/11498366/create-a-ui-or-a-widget-that-sees-on-top-of-all-application-in-android/11498612#11498612)

# wifi - 了解 Android 模拟器：测试图像？网络连接依赖性？

> ID：11975867
> 
> 赞同：1
> 
> 时间：2012-07-26T19:46:11.140
> 
> 标签：wifi, networking, emulation, process

为了更好地澄清我的一般问题：

根据 Google 文档，我已经通过运行完整的“make full-eng”构建来让 Android 模拟器工作。但是，我想调试它，所以一旦我运行模拟器，并调用“$ adb shell dmesg”并将其路由到输出文本文件，我发现了几行奇怪的行：

```
...
<4>goldfish_new_pdev goldfish_interrupt_controller at ff000000 irq -1
<4>goldfish_new_pdev goldfish_device_bus at ff001000 irq 1
<4>goldfish_new_pdev goldfish_timer at ff003000 irq 3
<4>goldfish_new_pdev goldfish_rtc at ff01000 
```

所以当你运行 Android 完整版本时，它会给你 Goldfish 作为系统映像？我想知道它是否在测试我想要的 Galaxy Nexus 的东西。内核是 Galaxy Nexus 的修改后的 maguro 内核（omap 项目），我将其放入构建树中。但我想测试的平台是 IceCreamSandwich。模拟器在测试这个平台吗？（b/c 这个日志中的输出让我相信它不是）或者模拟器正在测试“通用”图像？

此外，还有一个重要的问题：我修改了内核的“socket.h”文件，以使用未定义的协议 (FINS) 覆盖 INET 协议。理论上手机应该可以开机，但不能上网。手机模拟器关心你对互联网协议做了什么吗？它是否使用主机的网络功能？

进一步跟进：手机的哪些进程/系统服务/事件（涉及启动到稳定状态）依赖于传统底层网络堆栈的互联网协议？（定义的协议来设置网络套接字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:26:15.790

在我写这个问题的时候，我不明白一些事情，并认为我在“内核级别”搞乱模拟器时学到了一些东西。首先，模拟器测试一个“通用”手机品牌的“金鱼内核”（Linux版本2.6.29，采用ARM架构）。就好像模拟器本身就是一种手机，你**不能混合**这些图像内核。例如，我尝试使用金鱼内核（换句话说，没有 crespo 内核）构建一个 Nexus S crespo 手机映像，并且手机只是“挂起”在 Google 闪屏上（至少它不是引导循环）。

我的研究（FINS）在这个模拟器上工作，但没有在实际硬件支持的 3 个平台上工作：Nexus S、Galaxy Nexus 和摩托罗拉 Xoom。我不知道为什么，因为谷歌似乎没有让用户能够在手机的最低级别进行调试（我确信实际的开发人员在构建这些手机/测试它们时会使用这类工具）。这导致了一个主要问题，它回答了我最后的后续问题：Android 调试桥依赖于 INET 协议。我的模拟器成功启动并按我想要的方式运行（没有互联网，b/c 没有 INET），但这些实际的手机却没有。我的假设是：如果 INET 被一个空的协议覆盖（在这种情况下，那将是 FINS，它打算在用户空间级别处理 INET，但这似乎为时已晚，无法满足电话系统), ADB 守护进程（可能被归类为一种系统服务）无法工作/连接，Android 硬件将因此崩溃。我认为模拟器比真正的手机更灵活，因为硬件可能是虚拟表示的，并且没有与物理硬件相同的限制。

您可以查阅我与 Android 手机启动过程的斗争的 wiki/文档（我的研究团队较大网站的一部分），了解更多详细信息和我的各种尝试： http: [//finsframework.org/mediawiki/index.php/Alexander_G._Ororbia_II](http://finsframework.org/mediawiki/index.php/Alexander_G._Ororbia_II)

如果有人想出如何从 Nexus S、Galaxy Nexus 或摩托罗拉 Xoom 中获取工作启动日志而陷入“启动循环”（没有 ADB），请告诉我，因为我将继续努力这个问题会持续一段时间（我将更新我的其他 Stack Overflow-Android 问题以反映这一更正）。对我的理解的任何更正也将不胜感激。

注意：这个答案是可编辑的，因为我仍然认为有一些方法可以让手机在没有 ADB 守护程序的情况下在主机上生成引导日志。

# linux - 为什么 CUDA 的示例 makefile 找不到 CUDA 库？

> ID：11975869
> 
> 赞同：3
> 
> 时间：2012-08-15T19:27:36.057
> 
> 标签：linux, makefile, cuda, shared-libraries

我正在运行 Arch Linux 并从存储库中安装了 cuda-sdk 和 cuda-toolkit。我已经很好地编译了 /opt/cuda-sdk/CUDALibraries 中的库。

不，我通过在 /opt/cuda-sdk/C 中运行 make 来编译 sdk 示例并得到以下错误：

```
# make
make[1]: Entering directory `/opt/cuda-sdk/C/common'
make[1]: Leaving directory `/opt/cuda-sdk/C/common'
make[1]: Entering directory `/opt/cuda-sdk/C/common'
make[1]: Leaving directory `/opt/cuda-sdk/C/common'
make[1]: Entering directory `/opt/cuda-sdk/C/common'
make[1]: Leaving directory `/opt/cuda-sdk/C/common'
make[1]: Entering directory `/opt/cuda-sdk/shared'
make[1]: Leaving directory `/opt/cuda-sdk/shared'
make[1]: Entering directory `/opt/cuda-sdk/C/src/newdelete'
make[1]: Leaving directory `/opt/cuda-sdk/C/src/newdelete'
make[1]: Entering directory `/opt/cuda-sdk/C/src/simpleTextureDrv'
/usr/bin/ld: cannot find -lcuda
collect2: error: ld returned 1 exit status
make[1]: *** [../../bin/linux/release/simpleTextureDrv] Error 1
make[1]: Leaving directory `/opt/cuda-sdk/C/src/simpleTextureDrv'
make: *** [src/simpleTextureDrv/Makefile.ph_build] Error 2 
```

Makefile 本身似乎只包含文件 /opt/cuda-sdk/C/common/common.mk，即：

```
 ################################################################################
#
# Copyright 1993-2011 NVIDIA Corporation.  All rights reserved.
#
# NVIDIA Corporation and its licensors retain all intellectual property and 
# proprietary rights in and to this software and related documentation. 
# Any use, reproduction, disclosure, or distribution of this software 
# and related documentation without an express license agreement from
# NVIDIA Corporation is strictly prohibited.
#
# Please refer to the applicable NVIDIA end user license agreement (EULA) 
# associated with this source code for terms and conditions that govern 
# your use of this NVIDIA software.
#
################################################################################
#
# Common build script for CUDA source projects for Linux and Mac platforms
#
################################################################################

.SUFFIXES : .cu .cu_dbg.o .c_dbg.o .cpp_dbg.o .cu_rel.o .c_rel.o .cpp_rel.o .cubin .ptx

# Add new SM Versions here as devices with new Compute Capability are released
SM_VERSIONS   := 10 11 12 13 20 21 30

CUDA_INSTALL_PATH ?= /opt/cuda-toolkit

ifdef cuda-install
    CUDA_INSTALL_PATH := $(cuda-install)
endif

# detect OS
OSUPPER = $(shell uname -s 2>/dev/null | tr [:lower:] [:upper:])
OSLOWER = $(shell uname -s 2>/dev/null | tr [:upper:] [:lower:])

# 'linux' is output for Linux system, 'darwin' for OS X
DARWIN = $(strip $(findstring DARWIN, $(OSUPPER)))
ifneq ($(DARWIN),)
   SNOWLEOPARD = $(strip $(findstring 10.6, $(shell egrep "<string>10\.6" /System/Library/CoreServices/SystemVersion.plist)))
   LION        = $(strip $(findstring 10.7, $(shell egrep "<string>10\.7" /System/Library/CoreServices/SystemVersion.plist)))
endif

# detect 32-bit or 64-bit platform
HP_64 = $(shell uname -m | grep 64)
OSARCH= $(shell uname -m)

# Basic directory setup for SDK
# (override directories only if they are not already defined)
SRCDIR     ?= 
ROOTDIR    ?= ..
ROOTBINDIR ?= $(ROOTDIR)/../bin
BINDIR     ?= $(ROOTBINDIR)/$(OSLOWER)
ROOTOBJDIR ?= obj
LIBDIR     := $(ROOTDIR)/../lib
COMMONDIR  := $(ROOTDIR)/../common
SHAREDDIR  := $(ROOTDIR)/../../shared/

# Compilers
NVCC       := $(CUDA_INSTALL_PATH)/bin/nvcc 
CXX        := g++ -fPIC
CC         := gcc -fPIC
LINK       := g++ -fPIC

# Includes
INCLUDES  += -I. -I$(CUDA_INSTALL_PATH)/include -I$(COMMONDIR)/inc -I$(SHAREDDIR)/inc

# Warning flags
CXXWARN_FLAGS := \
    -W -Wall \
    -Wimplicit \
    -Wswitch \
    -Wformat \
    -Wchar-subscripts \
    -Wparentheses \
    -Wmultichar \
    -Wtrigraphs \
    -Wpointer-arith \
    -Wcast-align \
    -Wreturn-type \
    -Wno-unused-function \
    $(SPACE)

CWARN_FLAGS := $(CXXWARN_FLAGS) \
    -Wstrict-prototypes \
    -Wmissing-prototypes \
    -Wmissing-declarations \
    -Wnested-externs \
    -Wmain \

# architecture flag for nvcc and gcc compilers build
CUBIN_ARCH_FLAG :=
CXX_ARCH_FLAGS  :=
NVCCFLAGS       :=
LIB_ARCH        := $(OSARCH)

# Determining the necessary Cross-Compilation Flags
# 32-bit OS, but we target 64-bit cross compilation
ifeq ($(x86_64),1) 
    NVCCFLAGS       += -m64
    LIB_ARCH         = x86_64
    ifneq ($(DARWIN),)
         CXX_ARCH_FLAGS += -arch x86_64
    else
         CXX_ARCH_FLAGS += -m64
    endif
else 
# 64-bit OS, and we target 32-bit cross compilation
    ifeq ($(i386),1)
        NVCCFLAGS       += -m32
        LIB_ARCH         = i386
        ifneq ($(DARWIN),)
             CXX_ARCH_FLAGS += -arch i386
        else
             CXX_ARCH_FLAGS += -m32
        endif
    else 
        ifeq "$(strip $(HP_64))" ""
            LIB_ARCH        = i386
            NVCCFLAGS      += -m32
            ifneq ($(DARWIN),)
               CXX_ARCH_FLAGS += -arch i386
            else
               CXX_ARCH_FLAGS += -m32
            endif
        else
            LIB_ARCH        = x86_64
            NVCCFLAGS      += -m64
            ifneq ($(DARWIN),)
               CXX_ARCH_FLAGS += -arch x86_64
            else
               CXX_ARCH_FLAGS += -m64
            endif
        endif
    endif
endif

# Compiler-specific flags (by default, we always use sm_10, sm_20, and sm_30), unless we use the SMVERSION template
GENCODE_SM10 := -gencode=arch=compute_10,code=\"sm_10,compute_10\"
GENCODE_SM20 := -gencode=arch=compute_20,code=\"sm_20,compute_20\"
GENCODE_SM30 := -gencode=arch=compute_30,code=\"sm_30,compute_30\"

CXXFLAGS  += $(CXXWARN_FLAGS) $(CXX_ARCH_FLAGS)
CFLAGS    += $(CWARN_FLAGS) $(CXX_ARCH_FLAGS)
LINKFLAGS += 
LINK      += $(LINKFLAGS) $(CXX_ARCH_FLAGS)

# This option for Mac allows CUDA applications to work without requiring to set DYLD_LIBRARY_PATH
ifneq ($(DARWIN),)
   LINK += -Xlinker -rpath $(CUDA_INSTALL_PATH)/lib
endif

# Common flags
COMMONFLAGS += $(INCLUDES) -DUNIX

# If we are enabling GPU based debugging, then we want to use -G, warning that this
# May have a significant impact on GPU device code, since optimizations are turned off
ifeq ($(gpudbg),1)
    NVCCFLAGS += -G
    dbg = $(gpudbg)
endif

# Debug/release configuration
ifeq ($(dbg),1)
    COMMONFLAGS += -g
    NVCCFLAGS   += -D_DEBUG
    CXXFLAGS    += -D_DEBUG
    CFLAGS      += -D_DEBUG
    BINSUBDIR   := debug
    LIBSUFFIX   := D
else
    COMMONFLAGS += -O2 
    BINSUBDIR   := release
    LIBSUFFIX   := 
    NVCCFLAGS   += --compiler-options -fno-strict-aliasing
    CXXFLAGS    += -fno-strict-aliasing
    CFLAGS      += -fno-strict-aliasing
endif

# architecture flag for cubin build
CUBIN_ARCH_FLAG :=

# OpenGL is used or not (if it is used, then it is necessary to include GLEW)
ifeq ($(USEGLLIB),1)
    ifneq ($(DARWIN),)
        OPENGLLIB := -L/System/Library/Frameworks/OpenGL.framework/Libraries 
        OPENGLLIB += -lGL -lGLU $(COMMONDIR)/lib/$(OSLOWER)/libGLEW.a
    else
# this case for linux platforms
    OPENGLLIB := -lGL -lGLU -lX11 -lXi -lXmu
# check if x86_64 flag has been set, otherwise, check HP_64 is i386/x86_64
        ifeq ($(x86_64),1) 
           OPENGLLIB += -lGLEW_x86_64 -L/usr/X11R6/lib64
        else
             ifeq ($(i386),)
                 ifeq "$(strip $(HP_64))" ""
                 OPENGLLIB += -lGLEW -L/usr/X11R6/lib
                 else
                 OPENGLLIB += -lGLEW_x86_64 -L/usr/X11R6/lib64
                 endif
             endif
        endif
# check if i386 flag has been set, otehrwise check HP_64 is i386/x86_64
        ifeq ($(i386),1)
           OPENGLLIB += -lGLEW -L/usr/X11R6/lib
        else
             ifeq ($(x86_64),)
                 ifeq "$(strip $(HP_64))" ""
                 OPENGLLIB += -lGLEW -L/usr/X11R6/lib
                 else
                 OPENGLLIB += -lGLEW_x86_64 -L/usr/X11R6/lib64
                 endif
             endif
        endif
    endif
endif

ifeq ($(USEGLUT),1)
    ifneq ($(DARWIN),)
    OPENGLLIB += -framework GLUT
    else
        ifeq ($(x86_64),1)
         OPENGLLIB += -lglut -L/usr/lib64 
        endif
        ifeq ($(i386),1)
         OPENGLLIB += -lglut -L/usr/lib 
        endif

        ifeq ($(x86_64),)
            ifeq ($(i386),)  
            OPENGLLIB += -lglut
            endif
        endif
    endif
endif

ifeq ($(USEPARAMGL),1)
    PARAMGLLIB := -lparamgl_$(LIB_ARCH)$(LIBSUFFIX)
endif

ifeq ($(USERENDERCHECKGL),1)
    RENDERCHECKGLLIB := -lrendercheckgl_$(LIB_ARCH)$(LIBSUFFIX)
endif

ifeq ($(USENVCUVID), 1)
     ifneq ($(DARWIN),)
         NVCUVIDLIB := -L../../common/lib/darwin -lnvcuvid
     endif
endif

# Libs
ifneq ($(DARWIN),)
    LIB       := -L$(CUDA_INSTALL_PATH)/lib -L$(LIBDIR) -L$(COMMONDIR)/lib/$(OSLOWER) -L$(SHAREDDIR)/lib $(NVCUVIDLIB) 
else
  ifeq "$(strip $(HP_64))" ""
    ifeq ($(x86_64),1)
       LIB       := -L$(CUDA_INSTALL_PATH)/lib64 -L$(LIBDIR) -L$(COMMONDIR)/lib/$(OSLOWER) -L$(SHAREDDIR)/lib 
    else
       LIB       := -L$(CUDA_INSTALL_PATH)/lib -L$(LIBDIR) -L$(COMMONDIR)/lib/$(OSLOWER) -L$(SHAREDDIR)/lib
    endif
  else
    ifeq ($(i386),1)
       LIB       := -L$(CUDA_INSTALL_PATH)/lib -L$(LIBDIR) -L$(COMMONDIR)/lib/$(OSLOWER) -L$(SHAREDDIR)/lib
    else
       LIB       := -L$(CUDA_INSTALL_PATH)/lib64 -L$(LIBDIR) -L$(COMMONDIR)/lib/$(OSLOWER) -L$(SHAREDDIR)/lib
    endif
  endif
endif

# If dynamically linking to CUDA and CUDART, we exclude the libraries from the LIB
ifeq ($(USECUDADYNLIB),1)
     LIB += ${OPENGLLIB} $(PARAMGLLIB) $(RENDERCHECKGLLIB) ${LIB} -ldl -rdynamic 
else
# static linking, we will statically link against CUDA and CUDART
  ifeq ($(USEDRVAPI),1)
     LIB += -lcuda   ${OPENGLLIB} $(PARAMGLLIB) $(RENDERCHECKGLLIB) ${LIB} 
  else
     ifeq ($(emu),1) 
         LIB += -lcudartemu
     else 
         LIB += -lcudart
     endif
     LIB += ${OPENGLLIB} $(PARAMGLLIB) $(RENDERCHECKGLLIB) ${LIB}
  endif
endif

ifeq ($(USECUFFT),1)
  ifeq ($(emu),1)
    LIB += -lcufftemu
  else
    LIB += -lcufft
  endif
endif

ifeq ($(USECUBLAS),1)
  ifeq ($(emu),1)
    LIB += -lcublasemu
  else
    LIB += -lcublas
  endif
endif

ifeq ($(USECURAND),1)
    LIB += -lcurand
endif

ifeq ($(USECUSPARSE),1)
  LIB += -lcusparse
endif

# Lib/exe configuration
# Lib/exe configuration
# Lib/exe configuration
ifneq ($(STATIC_LIB),)
    TARGETDIR := $(LIBDIR)
    TARGET   := $(subst .a,_$(LIB_ARCH)$(LIBSUFFIX).a,$(LIBDIR)/$(STATIC_LIB))
    LINKLINE  = ar rucv $(TARGET) $(OBJS)
else
    ifneq ($(OMIT_CUTIL_LIB),1)
        LIB += -lcutil_$(LIB_ARCH)$(LIBSUFFIX) 
    endif
    ifneq ($(OMIT_SHRUTIL_LIB),1)
        LIB += -lshrutil_$(LIB_ARCH)$(LIBSUFFIX) 
    endif

    # Device emulation configuration
    ifeq ($(emu), 1)
        NVCCFLAGS   += -deviceemu
        CUDACCFLAGS += 
        BINSUBDIR   := emu$(BINSUBDIR)
        # consistency, makes developing easier
        CXXFLAGS        += -D__DEVICE_EMULATION__
        CFLAGS          += -D__DEVICE_EMULATION__
    endif
    TARGETDIR := $(BINDIR)/$(BINSUBDIR)
    TARGET    := $(TARGETDIR)/$(EXECUTABLE)
    LINKLINE  = $(LINK) -o $(TARGET) $(OBJS) $(LIB)
endif

# check if verbose 
ifeq ($(verbose), 1)
    VERBOSE :=
else
    VERBOSE := @
endif

################################################################################
# Check for input flags and set compiler flags appropriately
################################################################################
ifeq ($(fastmath), 1)
    NVCCFLAGS += -use_fast_math
endif

ifeq ($(keep), 1)
    NVCCFLAGS += -keep
    NVCC_KEEP_CLEAN := *.i* *.cubin *.cu.c *.cudafe* *.fatbin.c *.ptx
endif

ifdef maxregisters
    NVCCFLAGS += -maxrregcount $(maxregisters)
endif

ifeq ($(ptxas), 1)
        NVCCFLAGS += --ptxas-options=-v
endif

# Add cudacc flags
NVCCFLAGS += $(CUDACCFLAGS)

# Add common flags
NVCCFLAGS += $(COMMONFLAGS)
CXXFLAGS  += $(COMMONFLAGS)
CFLAGS    += $(COMMONFLAGS)

ifeq ($(nvcc_warn_verbose),1)
    NVCCFLAGS += $(addprefix --compiler-options ,$(CXXWARN_FLAGS)) 
    NVCCFLAGS += --compiler-options -fno-strict-aliasing
endif

################################################################################
# Set up object files
################################################################################
OBJDIR := $(ROOTOBJDIR)/$(LIB_ARCH)/$(BINSUBDIR)
OBJS +=  $(patsubst %.cpp,$(OBJDIR)/%.cpp.o,$(notdir $(CCFILES)))
OBJS +=  $(patsubst %.c,$(OBJDIR)/%.c.o,$(notdir $(CFILES)))
OBJS +=  $(patsubst %.cu,$(OBJDIR)/%.cu.o,$(notdir $(CUFILES)))

################################################################################
# Set up cubin output files
################################################################################
CUBINDIR := $(SRCDIR)data
CUBINS +=  $(patsubst %.cu,$(CUBINDIR)/%.cubin,$(notdir $(CUBINFILES)))

################################################################################
# Set up PTX output files
################################################################################
PTXDIR := $(SRCDIR)data
PTXBINS +=  $(patsubst %.cu,$(PTXDIR)/%.ptx,$(notdir $(PTXFILES)))

################################################################################
# Rules
################################################################################
$(OBJDIR)/%.c.o : $(SRCDIR)%.c $(C_DEPS)
    $(VERBOSE)$(CC) $(CFLAGS) -o $@ -c $<

$(OBJDIR)/%.cpp.o : $(SRCDIR)%.cpp $(C_DEPS)
    $(VERBOSE)$(CXX) $(CXXFLAGS) -o $@ -c $<

# Default arch includes gencode for sm_10, sm_20, sm_30, and other archs from GENCODE_ARCH declared in the makefile
$(OBJDIR)/%.cu.o : $(SRCDIR)%.cu $(CU_DEPS)
    $(VERBOSE)$(NVCC) $(GENCODE_SM10) $(GENCODE_ARCH) $(GENCODE_SM20) $(GENCODE_SM30) $(NVCCFLAGS) $(SMVERSIONFLAGS) -o $@ -c $<

# Default arch includes gencode for sm_10, sm_20, sm_30, and other archs from GENCODE_ARCH declared in the makefile
$(CUBINDIR)/%.cubin : $(SRCDIR)%.cu cubindirectory
    $(VERBOSE)$(NVCC) $(GENCODE_SM10) $(GENCODE_ARCH) $(GENCODE_SM20) $(GENCODE_SM30) $(CUBIN_ARCH_FLAG) $(NVCCFLAGS) $(SMVERSIONFLAGS) -o $@ -cubin $<

$(PTXDIR)/%.ptx : $(SRCDIR)%.cu ptxdirectory
    $(VERBOSE)$(NVCC) $(CUBIN_ARCH_FLAG) $(NVCCFLAGS) $(SMVERSIONFLAGS) -o $@ -ptx $<

#
# The following definition is a template that gets instantiated for each SM
# version (sm_10, sm_13, etc.) stored in SMVERSIONS.  It does 2 things:
# 1\. It adds to OBJS a .cu_sm_XX.o for each .cu file it finds in CUFILES_sm_XX.
# 2\. It generates a rule for building .cu_sm_XX.o files from the corresponding 
#    .cu file.
#
# The intended use for this is to allow Makefiles that use common.mk to compile
# files to different Compute Capability targets (aka SM arch version).  To do
# so, in the Makefile, list files for each SM arch separately, like so:
# This will be used over the default rule abov
#
# CUFILES_sm_10 := mycudakernel_sm10.cu app.cu
# CUFILES_sm_12 := anothercudakernel_sm12.cu
#
define SMVERSION_template
#OBJS += $(patsubst %.cu,$(OBJDIR)/%.cu_$(1).o,$(notdir $(CUFILES_$(1))))
OBJS += $(patsubst %.cu,$(OBJDIR)/%.cu_$(1).o,$(notdir $(CUFILES_sm_$(1))))
$(OBJDIR)/%.cu_$(1).o : $(SRCDIR)%.cu $(CU_DEPS)
#   $(VERBOSE)$(NVCC) -o $$@ -c $$< $(NVCCFLAGS)  $(1)
    $(VERBOSE)$(NVCC) -gencode=arch=compute_$(1),code=\"sm_$(1),compute_$(1)\" $(GENCODE_SM20) $(GENCODE_SM30) -o $$@ -c $$< $(NVCCFLAGS)
endef

# This line invokes the above template for each arch version stored in
# SM_VERSIONS.  The call function invokes the template, and the eval
# function interprets it as make commands.
$(foreach smver,$(SM_VERSIONS),$(eval $(call SMVERSION_template,$(smver))))

$(TARGET): makedirectories $(OBJS) $(CUBINS) $(PTXBINS) Makefile
    $(VERBOSE)$(LINKLINE)

cubindirectory:
    $(VERBOSE)mkdir -p $(CUBINDIR)

ptxdirectory:
    $(VERBOSE)mkdir -p $(PTXDIR)

makedirectories:
    $(VERBOSE)mkdir -p $(LIBDIR)
    $(VERBOSE)mkdir -p $(OBJDIR)
    $(VERBOSE)mkdir -p $(TARGETDIR)

tidy :
    $(VERBOSE)find . | egrep "#" | xargs rm -f
    $(VERBOSE)find . | egrep "\~" | xargs rm -f

clean : tidy
    $(VERBOSE)rm -f *.stub.c *.gpu *.cu.cpp *.i *.ii
    $(VERBOSE)rm -f *.cubin *.ptx *.fatbin.c *.hash
    $(VERBOSE)rm -f *.cudafe1.c *.cudafe2.c *.cudafe1.cpp *.cudafe2.cpp
    $(VERBOSE)rm -f $(OBJS) 
    $(VERBOSE)rm -f $(CUBINS)
    $(VERBOSE)rm -f $(PTXBINS)
    $(VERBOSE)rm -f $(TARGET)
    $(VERBOSE)rm -f $(NVCC_KEEP_CLEAN)
    $(VERBOSE)rm -f $(ROOTBINDIR)/$(OSLOWER)/$(BINSUBDIR)/*.ppm
    $(VERBOSE)rm -f $(ROOTBINDIR)/$(OSLOWER)/$(BINSUBDIR)/*.pgm
    $(VERBOSE)rm -f $(ROOTBINDIR)/$(OSLOWER)/$(BINSUBDIR)/*.bin
    $(VERBOSE)rm -f $(ROOTBINDIR)/$(OSLOWER)/$(BINSUBDIR)/*.bmp
    $(VERBOSE)rm -f $(ROOTBINDIR)/$(OSLOWER)/$(BINSUBDIR)/*.txt
    $(VERBOSE)rm -f $(CUBINDIR)/*.cubin $(PTXDIR)/*.ptx
    $(VERBOSE)rm -rf $(ROOTOBJDIR)
    $(VERBOSE)rm -rf $(LIBDIR)
    $(VERBOSE)rm -rf $(OBJDIR)
    $(VERBOSE)rm -rf $(TARGETDIR)

clobber : clean
    $(VERBOSE)rm -rf $(COMMONDIR)/lib/*.a
    $(VERBOSE)rm -rf $(SHAREDDIR)/lib/*.a
    $(VERBOSE)rm -rf $(COMMONDIR)/obj
    $(VERBOSE)rm -rf $(SHAREDDIR)/obj 
```

echo $LD_LIBRARY_PATH 的输出为空白。

我已经检查了 libcuda 并且可以在我认为应该在的位置找到它：

```
# ls /usr/lib | grep libcuda
libcuda.so.1
libcuda.so.304.32 
```

我需要做一些明显的事情来编译这些吗？这是 CUDA makefile 还是我的系统有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T04:30:17.403

答案在评论中提出，OP找到了解决方案：

> 我添加了一个符号链接：
> 
> ```
> ln -s /usr/lib/libcuda.so.1 /usr/lib/libcuda.so 
> ```
> 
> 它编译得很好。

# c# - HTTP GET请求中的MVC3模型绑定？

> ID：11975871
> 
> 赞同：8
> 
> 时间：2012-08-15T19:27:40.683
> 
> 标签：c#, asp.net-mvc-3

如果没有自定义，我可以在 MVC 3 中做这样的事情吗？

```
 [HttpGet]
    public ViewResult MyAction(ViewModel model)
    {
        // Do stuff
        return View("ViewName", model);
    } 
```

我这样做的原因是作为工作流程的一部分在不同页面之间传递数据。（即当用户完成步骤 1 中需要的内容时，将表单数据传递到步骤 2...）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T19:39:30.920

只要您具有与模型类的属性名称相同的参数名称，它就会起作用

假设你的课是这样的

```
public class ViewModel
{
  public string Name { set;get;}
  public string Loc{ set;get;}
} 
```

您可以像这样执行获取请求

```
MyAction?Name=jon&Loc=America 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-19T20:45:10.857

只有当端点方法签名中的类成员仅包含标量属性时，Shyju 的答案才有效。但是如果你有嵌套类呢？假设您的`ViewModel`课程如下所示：

```
public class ViewModel
{
    public string Name { get; set; }
    public string Title { get; set; }
    public Address MyAddress { get; set; }
} 
```

这个`Address`类看起来像这样：

```
public class Address
{
    public string Line1 { get; set; }
    public string Line2 { get; set; }
} 
```

现在假设 GET 请求是通过 AJAX 完成的，而您在 JavaScript 中做了这样的事情：

```
var address = {
  Line1: "123 Nowhere St.",
  Line2: "Apt. B5"
}
var getRequestData = {
  Name: "Joe",
  Title: "Manager",
  MyAddress: address
}
var uriString = $.param(getRequestData); //the parameters for the GET request
$.get("/ViewResult?" + uriString, function (data) { /*callback function*/ }); 
```

即使`address`JavaScript 中对象的形状`Address`与端点方法签名中的 C# 类完全匹配， the`Line1`和`Line2`子属性也***不会***绑定。他们的价值观将通过`null`.

有两种解决方法。

## 解决方法 1：

第一种是在命名 GET 请求中的参数时使用点表示法，而不是嵌套的 JavaScript 对象。使用此方法，AJAX 中的 GET 请求数据将如下所示：

```
var getRequestData = {
  Name: "Joe",
  Title: "Manager",
  MyAddress.Line1: "123 Nowhere St.",
  MyAddress.Line2: "Apt. B5"
} 
```

MVC 模型绑定将知道如何执行此操作，只要您的所有属性名称都匹配（它们区分大小写，所以要小心）。

如果您不使用 AJAX，而只是简单的 HTML 表单提交，那就更容易了。只需使用相同的点符号命名输入元素。Razor 语法使用 帮助方法使这变得非常容易`TextBoxFor()`，但这里有一个纯 HTML 的示例：

```
<form method="get" action="/ViewResult">
  <input type="text" name="Name" />
  <input type="text" name="Title" />
  <input type="text" name="MyAddress.Line1" />
  <input type="text" name="MyAddress.Line2" />
  <button type="submit">Submit GET request</button>
</form> 
```

## 解决方法 2：

解决此问题的另一种方法是简单地使用 POST 请求而不是 GET。请注意，在不打算实际更改服务器端的某些数据的情况下执行 POST 请求在技术上是不好的做法，但这是一种选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:35:03.537

你能行的; 它会自动将查询字符串中的任何值绑定到具有匹配名称的属性。

也就是说，这不是通常会做的事情。这是`[HttpPost]`您看到模型绑定执行的方法，因为两个操作的接口需要以某种方式不同。您可以通过回发到不同的操作名称来解决这个问题，但是您仍然可能在模型的（部分）加载时触发模型验证错误，这会让用户感到非常困惑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-27T15:41:39.003

对于 Web API 2：

```
[HttpGet]
public ActionResult Get([FromUri]ViewModel model)
{
    // Do stuff
    return View("ViewName", model);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T19:34:04.843

您可以通过将`PostMethod`属性设置为 get 将表单发布到 get。如果表单的输入字段与任何接受匹配，`ViewModel`则它们将被填写。这些匹配由`name`输入 ( `<input name="MatchedField">`-> `public string MatchedField { get; set; }`) 中的字段确定。

您应该做的是从帖子传递表单，然后重定向到从帖子操作中获取。此模式是最佳实践，称为 Post-Redirect-Get 模式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T19:37:57.653

我建议不要使用这种方法。仅使用 POST 的最佳解决方案，因为如果您使用 GET，一旦您从第 3 步单击返回到第 2 步并且浏览器缓存不可用，您将在旧版本的`ViewModel`. 您想使用 GET 有什么特别的原因吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T22:07:56.910

我不能建议使用 QueryString 来传递值。您可以使用以下之一：此代码将使用给定模型呈现局部视图。确保将模型添加到视图中。你的视图应该放在`Shared`文件夹中

```
public ActionResult myaction(ViewModel model)
        {

            return PartialView("anotherView", model);
        } 
```

另一种做几乎相同事情的方法：

```
 public ActionResult myaction(ViewModel model)
        {
            return View("someAnotherView", model);
        } 
```

如果您的视图不在同一个控制器中，请使用视图名称的路径，例如`"../Controller/viewName"`

还有一种不同的方法可以通过使用 TempData 来完成：

```
public ActionResult myaction(ViewModel model)
        {
            TempData["model"] = model;
            return RedirectToAction("someAnotherView");
        } 
```

但是您应该使用如下所示的代码在视图中访问您的数据：

```
 @{
    ViewModel model=(ViewModel)TempData["model"];

    } 
```

希望以上之一有帮助..

问候

# python - 为什么我的列表的 .append() 将每个成员变量的值更改为新变量？

> ID：11975876
> 
> 赞同：2
> 
> 时间：2012-08-15T19:27:49.097
> 
> 标签：python, append

在我的函数中，我正在创建要添加到列表中的唯一变量。但是每当我附加下一个变量时，列表中所有其他变量的值都会更改为新变量。

这是我的代码：

```
def make_list_of_data_transfer_objects(iFile, eFile, index_of_sheet):

    iBook = open_workbook(iFile)
    iSheet = iBook.sheet_by_index(0)

    eBook = open_workbook(eFile)
    eSheet = eBook.sheet_by_index(index_of_sheet)

    DataSet = namedtuple('DataSet', 'line_num data_list')

    list_objects = []
    temp_line_num = 99999
    temp_data = [0]*5

    for row_index in range(eSheet.nrows):
        temp_data[0] = eSheet.cell(row_index,0).value
        temp_data[1] = eSheet.cell(row_index,1).value
        temp_data[2] = eSheet.cell(row_index,2).value
        temp_data[3] = eSheet.cell(row_index,3).value
        temp_data[4] = eSheet.cell(row_index,4).value
        for row_index2 in range(iSheet.nrows):
            if temp_data[0] == iSheet.cell(row_index2,0).value:
                temp_line_num = row_index2
                temp_object = DataSet(temp_line_num, temp_data)

                list_objects.append(temp_object)

    #print list_objects #every object is the same

    list_objects.sort(key = lambda tup: tup[0]) #sort by line number

    return list_objects 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T19:29:39.137

改变

```
temp_object = DataSet(temp_line_num, temp_data) 
```

到

```
temp_object = DataSet(temp_line_num, temp_data[:]) 
```

或者

```
temp_object = DataSet(temp_line_num, list(temp_data)) 
```

通过传递`temp_data`给`DataSet`您不会创建列表的副本，您只需重新使用现有的。通过使用`[:]`or`list()`您创建一个副本。

# asp.net - 在运行时根据另一个容器属性在服务器端验证上添加 ValidationAttribute

> ID：11975886
> 
> 赞同：0
> 
> 时间：2012-08-15T19:28:14.750
> 
> 标签：asp.net, asp.net-mvc-3, data-annotations

有一个类（精简版）：

```
public class Parameter
{
    public Guid Id { get; set; }

    public decimal Value { get; set; }
} 
```

在我看来，我有一个参数字典，它们呈现如下：

```
<input ... name="Parameters[3].Key" type="hidden" value="UniqueParamName" />
<input ... name="Parameters[3].Value.Id" type="hidden" value="395816ad-dfde-11e1-8c36-848f69f05f09" />
<input ... name="Parameters[3].Value.Value" type="text" value="75" /> 
```

验证规则将由用户通过一些 GUI 设置并存储在数据库中。我想通过for current`ValidationAttribute`从数据库中获取 s ，但我看不到任何方法。我还尝试在其中添加属性，其中可以通过一些 [讨厌的] 反射访问容器，但是在为“值”创建元数据时尚未分配“Id”（无论如何，它不可靠）。也许我把整个事情复杂化了，我只想坚持内置的验证。`Parameter.Id``Parameter.Value``ModelMetadataProvider.CreateMetadata`

```
public class ExtendedValidationProvider : DataAnnotationsModelValidatorProvider
{
    protected override IEnumerable<ModelValidator> GetValidators(
        ModelMetadata metadata, 
        ControllerContext context, 
        IEnumerable<Attribute> attributes)
    {
        if (metadata.ContainerType == typeof(Parameter) 
            && metadata.PropertyName == "Value")
        {
            Guid parameterId = <some magic code>;
            IEnumerable<Attribute> validationAttributes 
                = db.GetValidationAttributesByParameterId(parameterId);
            return base.GetValidators(metadata, context, validationAttributes);
        }

        return Enumerable.Empty<ModelValidator>();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:55:24.840

在我看来，您应该使用模型验证。模型验证将根据您的模型和应用在模型上定义的验证属性的规则进行验证。

```
public class MyModel
{
     // This model uses model validation

     [Required(ErrorMessage = "FirstName is a required field.")]
     [StringLength(50, ErrorMessage = "Your FirstName can not exceed 50 characters.")]
     public string FirstName { get; set; }

     [Required(ErrorMessage = "LastName is a required field.")]
     public string LastName { get; set; }
} 
```

这会设置您的模型以进行验证。然后在您的控制器/操作中，您将需要使用 ModelState.IsValid 验证您的**ModelState**。您也可以在控制器中进行一些自定义“验证”，并使用**ModelState**的**AddModelError**添加自定义错误。

 **如果您想更进一步并创建自己的验证属性，那么您需要做的就是创建一个继承自**ValidationAttribute**类的新类。这将允许您针对可能位于 DAL 层中的您自己的值或绑定到您的模型的另一个值进行验证。

如果您需要使用全球化，使用模型验证还可以很好地（并且轻松地）设置您，因为有可用的属性允许您选择资源文件，其中包含您可能已定义的各种语言的资源字符串。

我是凭记忆做的，但这应该会引导您朝着正确的方向使用 MVC3 的内置功能并利用模型绑定和模型状态。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:42:19.350

我想我可以像这样在自定义 ModelMetadataProvider 中设置容器：

```
public override ModelMetadata GetMetadataForProperty(Func<object> modelAccessor,
    Type containerType, string propertyName)
{
    var metadata = _InnerProvider.GetMetadataForProperty(modelAccessor, containerType, propertyName);
    if (containerType == typeof(Parameter) 
        && !metadata.AdditionalValues.ContainsKey("container"))
    {
        metadata.AdditionalValues["container"] = GetContainer(modelAccessor);
    }

    return metadata;
} 
```

`GetContainer`是一种使用 [讨厌] 反射的方法（实际上是编译和缓存的表达式）。

最后，验证提供者方面没有神奇的代码：

```
public class ExtendedValidationProvider : DataAnnotationsModelValidatorProvider
{
    protected override IEnumerable<ModelValidator> GetValidators(
        ModelMetadata metadata, 
        ControllerContext context, 
        IEnumerable<Attribute> attributes)
    {
        if (metadata.ContainerType == typeof(Parameter) 
            && metadata.PropertyName == "Value")
        {
            Guid parameterId = ((Parameter)metadata.AdditionalValues["container"]).Id;
            IEnumerable<Attribute> validationAttributes 
                = db.GetValidationAttributesByParameterId(parameterId);
            return base.GetValidators(metadata, context, validationAttributes);
        }

        return Enumerable.Empty<ModelValidator>();
    }
} 
```**

# ruby-on-rails - form_for 和 datetime_select

> ID：11975887
> 
> 赞同：7
> 
> 时间：2012-08-15T19:28:16.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime-select

我正在使用 Rails 3.1，第一次使用`datetime_select`. 我想将分钟选择框指定为 15 分钟间隔而不是 1 分钟间隔：

```
 <%= f.datetime_select :start_datetime, :ampm => true, :start_minute => [0,15,30,45] %> 
```

但这似乎不起作用。这`:start_datetime`是`Event`模型中调用的属性。这是否可能是导致问题的保留字？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-11T09:02:27.643

尝试通过 :minute_step => 15

```
<%= f.datetime_select :start_datetime, :ampm => true, :minute_step => 15 %> 
```

# javascript - 与图片#? 协调的jQuery 幻灯片按钮？

> ID：11975888
> 
> 赞同：0
> 
> 时间：2012-08-15T19:28:16.193
> 
> 标签：javascript, jquery, button, slideshow

更新：谢天谢地，我想通了...所以关键是`position: absolute`在我的 CSS 的最后一件事上制作并取出底部：400px。

我正在尝试制作在单击圆形按钮时淡入淡出的图像幻灯片。有 4 张图片，将是 4 个圆形按钮，所以如果我点击第 3 个按钮，第 3 张图片会淡入。但是，我的代码没有正确执行。我认为我使用`index()`不当？图片没有出现。它们只是在中途淡入，然后淡出，然后所有图片完全消失。我认为这是因为我`position:relative`在“.pic”上。请帮忙！

这是我的 HTML：

```
<body>
<div class="wrapper">
    <div class="image_frame">
        <div src="" class="first"></div>
            <img src="images/galaxy.jpg" class="gala pic">

            <img src="images/aurora.jpg" class="auro pic">

    </div>

    <div class="buttonholder">
        <ul>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
        </ul>
    </div>
</div>
</body>
</html> 
```

这是我的CSS：

```
html, body {
    background: black;
    margin: 0;
    padding: 0;
}

.wrapper {
    width: 800px;
    margin: 0 auto;
    padding: 0;
}

.image_frame {
    width: 700px;
    height: 400px;
    position: relative;
    overflow: hidden;
}

img {
    width: 700px;
    height: 400px;
    padding-top: 10px;
    float: left;
}

.gala {
    display: block;
    position: relative;
}

.buttonholder {
    display: block;
    width: 400px;
    margin: 0 auto;
    text-align: center;
}

ul li {
    list-style: none;
    height: 3px;
    width: 3px;
    float: left;
    background: #efefef;
    padding: 10px;
    margin: 0 5px;
    border-radius: 100px 100px 100px 100px;
    cursor: pointer;
    text-indent: -9999px;
}

.button_normal {
    background: #efefef;
}

.selected {
    background: grey;
}

.pic {
    position: relative;
    bottom: 400px;
} 
```

这是我的 JS

```
$('ul li').click(function(){
    $('img').fadeOut(300);
    var listPos = $('ul').index(this);
    $('img').eq(listPos).fadeIn(300);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:32:51.450

要最小化更改您的代码，请替换您的代码

```
var listPos = $('ul').index(this); 
```

有了这个：

```
var listPos = $('ul li').index(this); 
```

或更好：

```
var listPos = $(this).index(); 
```

要回答您问题的第二部分，您可能需要参考以下答案：[How to overlay images](https://stackoverflow.com/questions/403478/css-how-to-overlay-images)或 this [Image over Image CSS](https://stackoverflow.com/questions/1345210/image-over-image-css)

# internet-explorer - div 没有正确渲染

> ID：11975890
> 
> 赞同：0
> 
> 时间：2012-08-15T19:28:23.167
> 
> 标签：internet-explorer, firefox, html, rendering

这是我正在制作的练习网站的一些代码。它运行良好，唯一的问题是尽管我明确指出“padding-top：50px;”，但表单和按钮之间没有填充。在带有 quirks 模式的 IE 9 中，它呈现填充，但没有 quirks 模式，或者使用 Firefox (14)，没有填充。

```
<form action="action.php" method="post">
<div id="thumbails" class="thumbnails">
    <?php
        $query="SELECT page_title, page_thumb FROM `pages` WHERE page_thumb != ''";
        if($result = $mysqli->query($query))
        {
            $i = 1;
            while($row = $result->fetch_assoc())
            {?>
                <div id="container<?php echo $i?>" class="container" style="width:25%; float:left;">
                <img src="<?php echo $row[page_thumb]?>" height=220 width=200 />
                <input class="cbox" type="checkbox" name="pages[]" value="<?php echo $row[page_title]?>"/>
                </div>
            <?php
                $i++;
            }
        }
    ?>
</div>
<div id="submit" class="submit"  style="padding-top:50px;text-align:center;">
    <input type="submit"/>
</div>
</form> 
```

当我使用 Firebug 对其进行检查时，它显示包含提交的 div 涵盖了整个表单，而不仅仅是提交按钮。在 IE 开发人员模式下，它是同样的事情，除非 quirks 模式处于打开状态，在这种情况下，它会呈现我想要的样子。但我没有看到任何怪癖！这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:44:16.407

我认为问题在于*缩略图*div 没有指定的高度。包含在缩略图中的 div 是浮动的，因此不会针对父 div 的最终高度计算它们的高度。结果是*thumbnails的*高度为0，所以*submit div*的计算是从top page开始的*padding-top ；*但是图像的高度是 200px，所以输入被向下推。如果你试试：

```
<div id="thumbails" class="thumbnails" style="height:300px;"> 
```

你会看到你想要什么。为了找出这个问题，我通常会在 div 周围放置一些边框。

```
<div id="thumbails" class="thumbnails" style="height:300px; border:1px solid red;">
<div id="submit" class="submit"  style="padding-top:50px;text-align:center;border:1px solid green;"> 
```

所以我立即看到边距和填充。

# php - 使用 PEAR 发送带有附件的电子邮件表单

> ID：11975891
> 
> 赞同：0
> 
> 时间：2012-08-15T19:28:23.960
> 
> 标签：php, pear

我创建了一个使用 PEAR Mail_Mime 的 HTML。提交表格后，我得到附件没问题。我遇到的问题是表单的输入字段（姓名、电话、电子邮件）未包含在我收到的电子邮件中。我怎样才能得到这个信息呢？当谈到 PHP 时，我是一个 Noobie，所以要温柔。

```
 <?php 
    include('PEAR/Mail.php');
    include('PEAR/Mail/mime.php');
    $max_allowed_file_size = 900; // size in KB 
    $allowed_extensions = array("pdf", "doc", "docx", "txt");
    $upload_folder = './uploads/'; //<-- this folder must be writeable by the script
    $your_email = 'gradysapp@gmail.com';//<<--  update this to your email address

    $errors ='';

    if(isset($_POST['submit']))
    {
//Get the uploaded file information
$name_of_uploaded_file =  basename($_FILES['uploaded_file']['name']);

//get the file extension of the file
$type_of_uploaded_file = substr($name_of_uploaded_file, 
                        strrpos($name_of_uploaded_file, '.') + 1);

$size_of_uploaded_file = $_FILES["uploaded_file"]["size"]/1024;

///------------Do Validations-------------
if(empty($_POST['name'])||empty($_POST['email']))
{
    $errors .= "\n Name and Email are required fields. ";   
}
if(IsInjected($visitor_email))
{
    $errors .= "\n Bad email value!";
}

if($size_of_uploaded_file > $max_allowed_file_size ) 
{
    $errors .= "\n Size of file should be less than $max_allowed_file_size";
}

//------ Validate the file extension -----
$allowed_ext = false;
for($i=0; $i<sizeof($allowed_extensions); $i++) 
{ 
    if(strcasecmp($allowed_extensions[$i],$type_of_uploaded_file) == 0)
    {
        $allowed_ext = true;        
    }
}

if(!$allowed_ext)
{
    $errors .= "\n The uploaded file is not supported file type. ".
    " Only the following file types are supported: ".implode(',',$allowed_extensions);
}

//send the email 
if(empty($errors))
{
    //copy the temp. uploaded file to uploads folder
    $path_of_uploaded_file = $upload_folder . $name_of_uploaded_file;
    $tmp_path = $_FILES["uploaded_file"]["tmp_name"];

    if(is_uploaded_file($tmp_path))
    {
        if(!copy($tmp_path,$path_of_uploaded_file))
        {
            $errors .= '\n error while copying the uploaded file';
        }
    }

    //send the email
    $name = $_POST['name'];
    $visitor_email = $_POST['email'];
    $user_message = $_POST['message'];
    $to = $your_email;
    $subject="New form submission";
    $from = $your_email;
    $text = "A user  $name has sent you this message:\n $user_message";

    $message = new Mail_mime();
    $message->setTXTBody($text);
    $message->addAttachment($path_of_uploaded_file);
    $body = $message->get();
    $extraheaders = array("From"=>$from, "Subject"=>$subject,"Reply-To"=>$visitor_email);
    $headers = $message->headers($extraheaders);
    $mail = Mail::factory("mail");
    $mail->send($to, $headers, $body);
    //redirect to 'thank-you page
    header('Location: careers_thank-you.html');
}
    }
    ///////////////////////////Functions/////////////////
    // Function to validate against any email injection attempts
    function IsInjected($str)
    {
    $injections = array('(\n+)',
          '(\r+)',
          '(\t+)',
          '(%0A+)',
          '(%0D+)',
          '(%08+)',
          '(%09+)'
          );
   $inject = join('|', $injections);
   $inject = "/$inject/i";
   if(preg_match($inject,$str))
   {
   return true;
   }
   else
  {
  return false;
  }
  }
  ?> 
```

如果此处的代码有任何错误，请使用以下表格。

```
 <?php
if(!empty($errors))
{
echo nl2br($errors);
}
?>
<form method="POST" name="email_form_with_php" 
action="php-form-action.php" enctype="multipart/form-data"> 
<p>
<label for='name'>Name: </label><br>
<input type="text" name="name" >
</p>
<p>
<label for='email'>Email: </label><br>
<input type="text" name="email" >
</p>
<p>
<label for='phone'>Phone: </label><br>
<input type="text" name="phone" >         
<p>
<label for='position'>Which position are you applying for? </label><br>
<input type="text" name="position" >        
  <p>
<label for='resume_uploaded_file'>Please attach your resume or work history.</label><br>
<input type="file" name="uploaded_file">      
<span class="smallNote">(PDF or Word Document)</span>
  <p>
    <label for='letter_uploaded_file'>Please attach your cover letter.</label><br>
<input type="file" name="letter_uploaded_file">      
  <span class="smallNote">(PDF or Word Document)</span>
  <p>
    <input type="submit" value="Submit" name='submit'>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:33:07.217

```
$name = $_POST['name'];
$visitor_email = $_POST['email'];
$user_message = $_POST['message'];
$to = $your_email;
$subject="New form submission";
$from = $your_email;
$text = "A user  $name has sent you this message:\n $user_message"; 
```

我认为您只需要添加几行：

```
$phone = $_POST["phone"];

$text = "A user  $name has sent you this message:\n $user_message";
$text .= "Phone: " . $phone . "\n";
$text .= "Email: " . $visitor_email . "\n"; 
```

# html - 创建画廊-左侧的缩略图，右侧的主图像-尽管浮动和清除但未在顶部对齐：两者

> ID：11975897
> 
> 赞同：0
> 
> 时间：2012-08-15T19:28:47.560
> 
> 标签：html, css, css-float, overflow

[JSFiddle](http://jsfiddle.net/ErVS5/)

我正在创建一个图像库，理想情况下，左侧应该有一列缩略图，右侧有一个较大的图像，两个部分都沿顶部垂直轴对齐。为此，我分别向左和向右浮动缩略图和较大的图像，并尝试了我能想到的每种组合`clear:both`以`overflow:hidden`实现顶部对齐，但无济于事。有任何想法吗？

我在顶部添加了一个 JSFiddle，在下面添加了一张图片，以了解我的目标。

![理想的](../Images/2c263fc7ecaa9aa52020e3184b87735a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:52:08.897

我写了一个很酷的简单[JSFiddle](http://jsfiddle.net/fbyeG/1/)来展示画廊应该如何显示，以及如何对齐图像。

您必须小心在代码中使用此 JSFiddle，因为您在问题的 JSFiddle 中使用的某些元素具有预先指定的属性，例如`display:inline-block`可能需要在 CSS 中为画廊元素覆盖的其他内容。这也是为了浏览器兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:59:09.430

放在你的 HTML`div.large-image`之前`div.thumbnail`。

我不确定为什么会发生这种情况。[本文](http://spyrestudios.com/css-in-depth-floats-positions/)简要讨论它。答案/原因可能隐藏在[CSS float 规范](http://www.w3.org/TR/CSS2/visuren.html#floats)中的某个地方。

# php - 为什么我的 jquery/javascript 不工作？

> ID：11975901
> 
> 赞同：-3
> 
> 时间：2012-08-15T19:29:14.317
> 
> 标签：php, javascript, jquery, html

所以我有这个 javascript/jquery 在显示 swf 文件之前进行延迟，但它不工作，当我说不工作时，我的意思是它什么都不做......

这是脚本：

```
 <script src="http://code.jquery.com/jquery-1.8.0.min.js" ></script>
        <link href="http://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css" >

<script>
function Func1()
{
$('#stage').html("<OBJECT style="z-index:2; position:absolute; top:20%; left:44%;" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" WIDTH="320" HEIGHT="240" id="rice" ALIGN="">
<PARAM NAME=movie VALUE="rice.swf"> <PARAM NAME=quality VALUE=high> <PARAM NAME=bgcolor VALUE=#333399> <EMBED src="rice.swf" quality=high bgcolor=#333399 WIDTH="320" HEIGHT="240" NAME="rice" ALIGN="" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED> </OBJECT>");
}

function Func1Delay()
{
setTimeout("Func1()", 10000);
}

</script> 
```

这是我调用函数的方式：

```
<body onload="Func1Delay()" > 
```

它似乎没有做任何事情......在此先感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T19:32:57.310

您必须转义`"`in object 标记，否则会出现语法错误

```
$('#stage').html("<OBJECT style=\"z-index:2; position:absolute; top:20%; left:44%;\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0\" WIDTH=\"320\" HEIGHT=\"240\" id=\"rice\" ALIGN=\"\">
<PARAM NAME=movie VALUE=\"rice.swf\"> <PARAM NAME=quality VALUE=high> <PARAM NAME=bgcolor VALUE=#333399> <EMBED src=\"rice.swf\" quality=high bgcolor=#333399 WIDTH=\"320\" HEIGHT=\"240\" NAME=\"rice\" ALIGN=\"\" TYPE=\"application/x-shockwave-flash\" PLUGINSPAGE=\"http://www.macromedia.com/go/getflashplayer\"></EMBED> </OBJECT>"); 
```

另外根据[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)，不推荐使用代码字符串 setTimeout。改为使用`setTimeout(Func1, 10000);`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:34:48.260

onload 属性是一种在运行时执行 JavaScript 的非常过时的方法，尤其是在您使用 jQuery 时。

```
$().ready({ function(){
    // set you timeout here
}); 
```

此外，您的 JavaScript 充满了错误。您需要在尝试嵌入的 HTML 中转义引号。你现在的文本只是在字符串之间浮动，所以这肯定会引发一些语法错误。

```
$('#stage').html("<OBJECT style=\"z-index:2; position:absolute; top:20%; left:44%;\" // and so on. 
```

另外，我认为 setTimeout 的语法在您的代码中也是错误的。 [https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:38:56.113

确保您的脚本标签具有“类型”并在 HTML 代码中使用单引号：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js" ></script>
<link href="http://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css" >
<script type="text/javascript">
    // Do 'onload' here:
    $(document).ready(function() {
        Func1Delay();
    });

    function Func1() {
        $('#stage').html('<OBJECT style="z-index:2; position:absolute; top:20%; left:44%;" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" WIDTH="320" HEIGHT="240" id="rice" ALIGN=""><PARAM NAME=movie VALUE="rice.swf"> <PARAM NAME=quality VALUE=high> <PARAM NAME=bgcolor VALUE=#333399> <EMBED src="rice.swf" quality=high bgcolor=#333399 WIDTH="320" HEIGHT="240" NAME="rice" ALIGN="" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED> </OBJECT>');
    }

    function Func1Delay() {
        setTimeout(Func1, 10000);
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T19:31:34.650

改变：

```
setTimeout("Func1()", 10000); 
```

至：

```
setTimeout(Func1, 10000); 
```

# ios - UIButton 触摸转发在 iOS5 中不起作用（仅在 iPad 上）

> ID：11975902
> 
> 赞同：0
> 
> 时间：2012-08-15T19:29:20.967
> 
> 标签：ios, forwarding, ios5, touch-event

我似乎无法弄清楚为什么这个用于转发 UIButton 触摸的代码在 iOS5 中停止工作：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    [self.nextResponder touchesBegan:touches withEvent:event];
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];
    [self.nextResponder touchesMoved:touches withEvent:event];
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesEnded:touches withEvent:event];
    [self.nextResponder touchesEnded:touches withEvent:event];
} 
```

当我记录下一个响应者的 touches 方法时，我可以看到 touchesmoved 只转发一次，touches end 根本不转发。这是非常出乎意料的行为，因为所有触摸都在 iOS4 中转发。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:57:06.520

虽然评论发布者能够让这段代码在他们的测试中正常工作，但我无法让它在 iOS5 中可靠地工作。我的解决方案是使用委托将触摸转发给相关方。不优雅或不受欢迎，但到目前为止工作正常，没有任何问题。

# asp.net-mvc - 如何在 VB.Net MVC 视图中使用 PagedList

> ID：11975903
> 
> 赞同：1
> 
> 时间：2012-08-15T19:29:22.000
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我一直在阅读诸如此类的帖子[无法使用 NuGet PagedList ASP.NET MVC # 查看](https://stackoverflow.com/questions/10653759/cannot-use-nuget-pagedlist-asp-net-mvc-view)和诸如此类的文章[http://czetsuya-tech.blogspot.com/2011/05/mvc3-dynamic-search-paging-using.html](http://czetsuya-tech.blogspot.com/2011/05/mvc3-dynamic-search-paging-using.html)但我无法将分页列表模型加载到我的视图中。它适用于我的控制器，但以下代码：

```
@ModelType PagedList.IPagedList(Of MyBlog.Company) 
```

...似乎不起作用（即我似乎无权访问那个 PagedList 类；它说它没有定义）。我可以做些什么来使用 PagedList？我什至尝试从 NuGet 安装 PagedList 和 PagedList.MVC，但仍然没有。

我只是想完成本教程[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-在-an-asp-net-mvc-应用程序中](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

似乎许多人都在这个特定方面苦苦挣扎。

谢谢你的帮助。

编辑：这篇博文准确地描述了我的问题：

[http://www.1771.in/using-pagedlist-in-vb.html](http://www.1771.in/using-pagedlist-in-vb.html)

那里没有列出答案，所以也许其他人知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:00:06.790

好的，我的 VB.NET 有点生疏了，但让我们看看我们可以在这里做什么。

1.  创建一个新的 ASP.NET MVC 3 应用程序
2.  在包管理器控制台`Install-Package PagedList.Mvc`中输入：安装 NuGet
3.  添加模型：

    ```
    Public Class MyViewModel
        Public Property Id As Integer
        Public Property Foo As String
    End Class 
    ```

4.  然后更新`HomeController.vb`：

    ```
    Imports PagedList

    Public Class HomeController
        Inherits System.Web.Mvc.Controller

        Function Index() As ActionResult
            Dim model = Enumerable.Range(1, 250).Select(Function(x) New MyViewModel With {.Id = x, .Foo = "foo " & x})
            Dim viewModel = model.ToPagedList(1, 5)
            Return View(viewModel)
        End Function
    End Class 
    ```

5.  最后定义`Index.vbhtml`视图：

    ```
    @ModelType PagedList.IPagedList(Of MvcApplication1.MyViewModel)

    ... 
    ```

# javascript - 由于 superfish.com 损坏了 Javascript

> ID：11975906
> 
> 赞同：1
> 
> 时间：2012-08-15T19:29:28.590
> 
> 标签：javascript

最近，由于一些从 superfish.com 加载的 JS，很多 javascript 中断。

我试过用谷歌搜索它，但它很模糊。我见过其他人抱怨，这是因为扩展/插件。我不认为这是我的问题。

我也不知道它是从哪里来的。我希望其他人有这个问题和/或知道解决方案。或者至少有一些方向。

目前我怀疑谷歌。Superfish.com 似乎是某种“搜索”的东西，当网站加载 Google Adsense 或当我 CDN 从 Google 服务器加载 jQuery 时，我就有了它。

Ps 这与 jQuery 插件 Superfish 无关。Pps 我知道这可能是错误的 stackexchange，但我对这个社区有信心！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:47:22.770

Superfish没有恶意。它是硅谷的一家小型初创公司，正在尝试制作视觉搜索引擎。我想谷歌一定是在它的一个脚本中使用它。通常，罪魁祸首是他们称之为“Window Shopper”的应用程序

如果你有这个橱窗购物者，谷歌“删除橱窗购物者”，你应该得到一些关于如何为你各自的浏览器+操作系统禁用它的好消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:47:59.263

好吧，我不检查好。它实际上是由一个名为 X-Notifier 的扩展（用于 Gmail 和其他东西）带来的

对不起！

# extjs4 - 在 Ext Js 中设置路径 - TypeError: Ext.example 未定义

> ID：11975911
> 
> 赞同：0
> 
> 时间：2012-08-15T19:29:48.940
> 
> 标签：extjs4, extjs4.1

> **可能重复：**
> [如何使用 Ext.example 中的文件](https://stackoverflow.com/questions/11986519/how-to-use-a-file-from-ext-example)

我正在使用`Ext.example.msg('Button Click', 'GOT SOME THING');`消息框（出现在屏幕顶部的弹出框）。但我收到此错误消息；

```
TypeError: Ext.example is undefined 
```

在我的 app.js 中，我添加了以下代码；

```
Ext.Loader.setPath('Ext.examples', 'app/extjs/examples/shared/examples.js');
Ext.application({        
    requires: [                    
        'Ext.window.MessageBox',
    'Ext.examples.*' 
    ], 
```

我想知道我是否在上面添加了正确的路径。项目结构如下；

```
Project_Folder
-> app.js
-> extjs
  --> examples
     --->shared
         ---->example.js 
```

**更新**

```
Ext.Loader.setPath('Ext.examples', '/Project_Folder/app/extjs/examples/shared/');
Ext.application({        
    requires: [                  
           'Ext.window.MessageBox',  
        'Ext.example.*' 
    ], 
```

# asp.net-mvc - ASP.Net MVC & WebAPI 加密

> ID：11975916
> 
> 赞同：8
> 
> 时间：2012-08-15T19:30:10.550
> 
> 标签：asp.net-mvc, security, asp.net-web-api

我想利用某种形式的“简单”加密，这种加密相当安全，但在对开发过程的影响方面摩擦非常小。

假设我在客户端 <> Web 服务情况下拥有对话的双方。我的应用程序是 windows phone/win8/silverlight/desktop 应用程序，服务器是 ASP.Net MVC 或 WebAPI。

在我看来，我想要一些简单的东西： -

```
<security encryption="off|sometype|someothertype">
    <privatekey>12345MyKey54321</privatekey>
</security> 
```

作为客户端和服务器上的某种形式的配置参数。此外，身份验证例程将返回并存储某种形式的公钥。

这样做将启用“加密模式”，并使用提供的密钥以选定的方式对任何 http 请求进行加密和散列。最终结果是在本地、代理或远程机器上嗅探到的任何东西都无法在没有密钥和解密方法的情况下查看数据。在服务器上，数据在执行控制器操作之前使用相同的密钥进行解密。

除了将 HttpRequest/WebClient 调用换成 EncryptedHttpRequest 之类的调用并在 MVC/WebAPI 方面添加适当的钩子之外，所有其他客户端代码和控制器操作都将不知道数据已加密的事实。

我是否遗漏了什么或者设置不是这么简单？据我搜索，没有什么能提供这种简单程度的东西，所以我认为我的逻辑中遗漏了一些巨大的缺陷？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T11:23:49.930

您所寻找的一切都可以通过简单地使用 HTTPS 来实现。只需购买证书（或使用自签名证书），就可以进行加密。

不要重新发明轮子。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T17:43:49.523

我已经成功地做到了。这不是太难并且效果很好。我用它来激活产品的许可证。最重要的是您真正控制客户端和服务器 - 没有人可以从客户端上的代码中提取您的私钥。

**第 1 步：创建一个不带参数的 MVC 控制器操作方法：**

```
[HttpPost]        public ActionResult Activate()        { ... } 
```

**第 2 步：在控制器中，只需使用 HttpRequest.InputStream 来获取从客户端发送的字节。**

var 流 = this.HttpContext.Request.InputStream;

**第 3 步：创建 CryptoStream 以进行反序列化。**

我在这里包含了创建加密和解密示例。sharedSecret 是一个足够长（512 字节）的随机字节的 byte[] - 这就是您要保护的！

```
public CryptoStream CreateEncryptionStream(Stream writeStream)
{            
    TripleDESCryptoServiceProvider cryptoProvider = new TripleDESCryptoServiceProvider();               
    PasswordDeriveBytes derivedBytes = new PasswordDeriveBytes(this._sharedSecret, null);                
    CryptoStream cryptoStream = new CryptoStream(writeStream, cryptoProvider.CreateEncryptor(derivedBytes.GetBytes(16), derivedBytes.GetBytes(16)), CryptoStreamMode.Write);            
    return cryptoStream;        
}        

public CryptoStream CreateDecryptionStream(Stream readStream)        
{            
    TripleDESCryptoServiceProvider cryptoProvider = new TripleDESCryptoServiceProvider();            
    PasswordDeriveBytes derivedBytes = new PasswordDeriveBytes(this._sharedSecret, null);                
    CryptoStream cryptoStream = new CryptoStream(readStream, cryptoProvider.CreateDecryptor(derivedBytes.GetBytes(16), derivedBytes.GetBytes(16)), CryptoStreamMode.Read);            
    return cryptoStream;        
} 
```

**第 4 步：使用您的 CryptoStream 另一个流阅读器进行解密。**

我使用 XmlReader 以便我所有现有的序列化代码可以明文工作（在读取/写入服务器上的磁盘或数据库时）或加密（在传输时）。

```
using (var reader = XmlReader.Create(decryptionStream, settings))                { ... } 
```

**第 5 步：在控制器中制定安全响应。**

这与步骤 1-4 相反，以加密您的响应对象。然后，您只需将加密响应写入内存流并将其作为文件结果返回。下面，我展示了如何为我的许可证响应对象执行此操作。

```
var responseBytes = GetLicenseResponseBytes(licenseResponse);
return File(responseBytes, "application/octet-stream");

private byte[] GetLicenseResponseBytes(LicenseResponse licenseResponse)        
{            
    if (licenseResponse != null)            
    {                
        using (MemoryStream memoryStream = new MemoryStream())                
        {                    
            this._licenseResponseSerializer.Write(memoryStream, licenseResponse);

            return memoryStream.ToArray();                
        }            
    }           
    return null;        
} 
```

**第 6 步：实施您的客户请求响应。**

您可以使用 HttpWebRequest 或 WebClient 类来制定请求。这是我使用的代码中的几个示例。

```
byte[] postBytes = GetLicenseRequestBytes(licenseRequest);
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(licenseServerUrl);
request.Method = "POST";
request.ContentType = "application/octet-stream";
request.Proxy = WebRequest.DefaultWebProxy;
using (Stream requestStream = request.GetRequestStream())
{                
    requestStream.Write(postBytes, 0, postBytes.Length);
}            
return request;

private LicenseResponse ProcessHttpResponse(HttpWebResponse response)
{
    if ((response.StatusCode == HttpStatusCode.OK) && response.ContentType.Contains("application/octet-stream"))
    {
        var stream = response.GetResponseStream();
        if (stream != null)
        {
            var licenseResponse = this._licenseResponseSerializer.Read(stream);
            return licenseResponse;
        }
    }
    return new LicenseResponse(LicensingResult.Error);
} 
```

**总结和提示**

*   使用客户端和服务器上的请求/响应中的流来通信二进制八位字节流数据
*   在序列化/反序列化数据时，使用 CryptoStream 以及加密算法（考虑使用最强的加密可能性）和良好的私钥来加密数据。
*   确保检查所有传入客户端和服务器的数据的大小和格式（避免缓冲区溢出和尽早抛出异常）
*   如果可能，使用混淆来保护您客户端上的私钥（查看 DeepSea 混淆器）

# wordpress - 尽管我删除了 .htaccess，但为什么网站不断重定向

> ID：11975919
> 
> 赞同：0
> 
> 时间：2012-08-15T19:30:23.357
> 
> 标签：wordpress, apache, .htaccess, redirect

我正在一个安装在

主页/我的用户/我的网站

在此文件夹中还有两个文件夹，一个是`members`，另一个是`wordpress`

我的网站以这样的方式访问

```
http://www.mywebsite.com/members/ 
```

`wordpress folder`包含仅用于注册成员的少数页面，因此如果我从 wordpress 文件夹访问页面，则 url 变为..

```
http://www.mywebsite.com/protected/?pageID 
```

现在的问题是，`wordpress folder`如果我使用，我将无法登录

```
http://www.mywebsite.com/wordpress/wp-admin/ 
```

我被重定向到

```
http://www.mywebsite.com/members/wp-login?redirected_to...... 
```

我搞砸了两天，但无法弄清楚这里发生了什么

有人可以指导我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:37:13.373

你检查过吗

*   网址
*   家

**wp_options**表下的选项。它们必须对`http://www.mywebsite.com/wordpress`您的情况有价值。

# java - 正在创建 Spring 多个 bean 实例

> ID：11975922
> 
> 赞同：3
> 
> 时间：2012-08-15T19:30:34.793
> 
> 标签：java, spring

我使用 autowire @Controller 创建了一个名为 RegistrationController 的弹簧控制器。为了我自己的好奇心，我创建了一个默认构造函数，如下所示并添加了一个记录器语句：

```
public RegistrationController() {
    logger.info("Registration Controller (Constructor) called-->"+this);
} 
```

我发现当我在日志文件中的spring源IDE（v2.9）中启动我的tomcat服务器（v7）时，我看到以下内容：

```
INFO: Initializing Spring root WebApplicationContext
2012-08-15 15:12:28,808 [pool-2-thread-1] INFO  com.controllers.registration.RegistrationController - Registration Controller (Constructor) called-->com.controllers.registration.RegistrationController@78c0dc2
Aug 15, 2012 3:12:28 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'main'
2012-08-15 15:12:29,256 [pool-2-thread-1] INFO  com.controllers.registration.RegistrationController - Registration Controller (Constructor) called-->com.controllers.registration.RegistrationController@773ba8d6 
```

我知道 RegistrationController 默认情况下应该是单例对象，并且只需要创建一个实例。但是，正如您从日志文件中看到的那样，创建了两个实例。不知怎的，我觉得这是不正确的。但我没有确切的答案。

我的 web.xml 中的一些重要行如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/classes/applicationContext*.xml</param-value>
</context-param>
.
.
 <servlet>
    <servlet-name>main</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>main</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>main</servlet-name>
    <url-pattern>*.jspx</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>main</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>
   .
   .
   </web-app> 
```

你一定猜到了，我有一个 main-servlet.xml 和 applicationContext.xml 作为我的 spring 配置文件。

你能帮我理解这里发生了什么吗？

编辑，因为我无法在 8 小时之前回答我的问题：

感谢@Andna 建议`<context:component-scan />`在 applicationContext.xml 和 main-servlet.xml 中查找。我在两个文件中都有那个元素，因此每个 spring bean 都被扫描了两次。

但是，`<context:component-scan />`从 applicationContext.xml 中删除导致我的 Spring 安全配置中断。更详细地说，我创建了一个实现的类`org.springframework.security.core.userdetails.UserDetailsService`

```
@Service("userDetailsService") 
public class DuncanUserDetailsServiceImpl implements UserDetailsService {
@Override
public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {
}
} 
```

为了支持这个类，我的 applicationContext-security.xml（缩短版）文件中有以下内容：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
                    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<beans:bean id="daoAuthenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
      <beans:property name="userDetailsService" ref="userDetailsService"/>
</beans:bean>

<beans:bean id="authenticationManager" class="org.springframework.security.authentication.ProviderManager">
    <beans:property name="providers">
        <beans:list>
            <beans:ref local="daoAuthenticationProvider" />
        </beans:list>
    </beans:property>
</beans:bean>

<authentication-manager>
    <authentication-provider user-service-ref="userDetailsService">
        <password-encoder ref= "passwordEncoder">
            <salt-source user-property="userName"/>
        </password-encoder>
     </authentication-provider>
</authentication-manager>

<beans:bean id="passwordEncoder" class="org.springframework.security.authentication.encoding.ShaPasswordEncoder" />

</beans:beans> 
```

因此`<context: component-scan />`，从 applicationContext.xml 中删除会导致“userDetailsS​​ervice”对象实例丢失，并且我的日志文件中有大量错误。

所以我所做的就是将组件扫描保存在 main-servlet.xml 中：

```
<context:component-scan base-package="com.some.org" >
        <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller" />
    </context:component-scan> 
```

但是，我使用 applicationContext.xml 中的排除过滤器编辑了组件扫描，如下所示：

```
<context:component-scan base-package="com.bankofamerica" >
        <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller" />
        <context:exclude-filter type="regex" expression="com.some.org.common.http.HTTPClient" />
    </context:component-scan> 
```

这帮助我实现了这两件事：

1.  确保单例对象确实是单例
2.  确保 Spring 安全性像以前一样工作。

感谢大家提出的所有精彩建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:37:53.850

也许您在`applicationContext.xml`和中都进行了两次组件扫描`main-servlet.xml`，所以 Spring 会两次扫描带注释的类？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-30T11:39:50.503

我最终在**src/main/webapp/WEB-INF/web.xml 中进行了以下配置：**

```
<web-app xmlns=... version="2.4">
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/application-context.xml,/WEB-INF/security.xml,/WEB-INF/db.xml,/WEB-INF/services.xml</param-value>
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>sitemesh</filter-name>
        <filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>sitemesh</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

我认为 Spring 最常见的问题是对 Spring 上下文的误解。仔细看看 DispatcherServlet。Spring 会自动搜索 dispatcher-servlet.xml ，它是**web context**。此上下文中的 bean 不可用于在**根上下文**中定义的 bean ，例如在**contextConfigLocation**参数中指定的。为了使其可用，人们通常在 contextConfigLocation 中包含 dispatcher-servlet.xml，这在逻辑上会导致 Spring 两次初始化 Web 上下文。那么配置spring-security（global-method-security）或component-scan或sitemesh将是一场噩梦，配置将“不稳定”。

# sql - SQL触发器帮助更新行和列

> ID：11975924
> 
> 赞同：1
> 
> 时间：2012-08-15T19:30:41.890
> 
> 标签：sql, sql-server-2008, triggers, sql-update

我在获取 SQL 触发器来执行我想要的操作时遇到问题。当另一个字段被更新时，我需要在表中填充一个字段。更具体地说，当输入员工 ID 时，我需要生成 Unicode 才能使条形码工作。我已经编写了生成 unicode 的代码，我只需要触发器来运行。

这是我需要的骨架：

```
CREATE TRIGGER Unicode
AFTER UPDATE of unique.id
ON table [dbo].table

FOR EACH ROW???
AS
BEGIN
     SELECT (unique.id2
            now I need to set unique.id2 to the unicode function that I wrote 
```

我觉得我在这个错误的轨道上。

这是我正在使用的数据库的图像（我没有创建它）[http://i.imgur.com/4wkfY.png](http://i.imgur.com/4wkfY.png)。运行 SQL Server 2008

当 PersonalDataID[2] 更新时（员工 ID）。我需要为 PersonalDataID[32] 生成代码。

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:37:13.240

要精通 SQL Server，您需要做的第一件事是熟悉大多数操作在作为一组应用时效果最好的事实。从“每一行”的角度思考几乎总是会让你走上错误的道路。

在这种情况下，由于更新会影响多行，因此您需要一次处理所有这些行。您可以使用插入的伪表来执行此操作。我查看了您的图片，但您的示例代码非常混乱，我不知道如何将两者关联起来。所以这里有一个简单的例子，你必须根据你的实际模式进行定制。

```
CREATE TRIGGER dbo.UpdateUnicodeColumn
ON dbo.table
FOR UPDATE
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE t SET BarcodeColumn = (your calculation, a function, maybe?)
    FROM dbo.table AS t
    INNER JOIN inserted AS i
    ON t.key = i.key;
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:37:05.893

这是语法。只需将 somefield 替换为您需要输入的任何字段，将 DestinationTable 替换为您要添加 Unicode 记录的表。

```
CREATE TRIGGER Unicode ON SomeTable
AFTER UPDATE 
AS

INSERT INTO DestinationTable
(somefield)
SELECT somefield FROM INSERTED
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:34:55.143

我认为您不需要“每行？？？” :P

```
CREATE TRIGGER Unicode
ON table [dbo].table
AFTER UPDATE of unique.id
AS
Begin
  (SELECT unique.id2...) 
```

总体参考上面的答案。

# c# - 对象文字实例化是否比设置属性更快？

> ID：11975925
> 
> 赞同：9
> 
> 时间：2012-08-15T19:30:44.357
> 
> 标签：c#, design-patterns, object, instantiation, objectinstantiation

鉴于以下示例，客观上是否比另一个更好/更快/更安全？对象文字实例化是否应该是可行的最佳实践？

这哪里不合适？

```
class Person
{
    public string name;
    public int age;
}
void MakePeople()
{
    Person myPerson = new Person();
    myPerson.name = "Steve";
    myPerson.age = 21;

    Person literalPerson = new Person { name = "John", age = 22 };
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-15T19:31:45.540

不，它不是更快或更慢。这是相同的。

编译器将对象初始值设定项转换为构造函数调用，然后设置这些属性。

```
Person literalPerson = new Person { name = "John", age = 22 }; 
```

转为：

```
Person myPerson = new Person();
myPerson.name = "John";
myPerson.age = 22; 
```

* * *

您应该使用更具可读性以及您与团队达成一致的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:33:26.680

任何一个都是合适的。这取决于您需要做什么来设置属性。例如，在需要一些逻辑来获得属性值的情况下，我会避免文字实例化：

```
Person myPerson = new Person();
myPerson.SomeProperty = if IsNewPerson ? GetPropertyFromDatabase() : GetDefaultProperty(); 
```

**编辑：**

在 Visual Studio 中使用文字对象初始化的一个优点是 Intellisense 将提示输入属性，仅显示那些尚未声明的属性。（我遇到了在设置属性时重复分配值的代码。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:32:18.957

如果您查看生成的 IL，我很确定您会发现它们是相同的。使用对象初始化器只是一个编译器快捷方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T19:34:34.223

我不认为速度应该是推动这个决定的因素。两种方法的速度可能差别很小。

我认为代码可读性应该是你选择的主要因素。使用该标准，我认为它们非常接近，这取决于个人喜好或您的团队决定的任何内容。但是，我认为在需要设置许多属性的对象的情况下，显式调用 setter 更具可读性。

# c# - 从反射的字符串表示中获取枚举的值（字段）

> ID：11975929
> 
> 赞同：1
> 
> 时间：2012-08-15T19:31:18.223
> 
> 标签：c#, c#-4.0

我有一个枚举的字符串表示。

```
string val = "namespace_name.enum_name"; 
```

我可以使用它来获取枚举类型。

```
Type myType = Type.GetType(val); 
```

现在看到 myType.Name = actual_enum_name 等信息，很好。我试图使用此信息获取实际的枚举值，但没有成功。

我曾尝试使用 Enum.Getvalues，但是在将 myType（即 System.Type）转换为 EnumType 时遇到了困难，而这正是 Enum.Getvalues 所需要的（？）。

我试图根据获得的信息实际创建一个 Enum 对象并陷入困境。

如何从此处获取该枚举的实际字段（成员列表）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T19:40:27.433

这应该按原样工作，不需要转换。`Enum.GetValues()`需要一个`Type`. 下面的代码有效。

```
namespace enumtest
{
    public enum Mine
    {
        data1,
        data2
    }

    class Program
    {
        static void Main(string[] args)
        {
            Type myenum = Type.GetType("enumtest.Mine");

            foreach (var curr in Enum.GetValues(myenum))
            {
                Console.WriteLine(curr.ToString());
            }
        }
    }
} 
```

这允许您像这样构造枚举值的实例：

```
namespace enumtest
{
    public enum Mine
    {
        data1,
        data2
    }

    class Program
    {
        static void Main(string[] args)
        {
            Type myenum = Type.GetType("enumtest.Mine");

            // Let's create an instance now
            var values = Enum.GetValues(myenum);
            var firstValue = values.GetValue(0);
            Mine enumInstance = (Mine)Enum.Parse(myenum, firstValue.ToString());

            Console.WriteLine("I have an instance of the enum! {0}", enumInstance);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:42:19.837

假设我有一个枚举`ContactNumberType`然后获取值使用

```
string[] names = Enum.GetValues(typeof(ContactNumberType)); 
```

因为`GetValues()`方法返回一个数组

# asp.net - 在 MVC Razor 视图中本地化标记“alt”文本

> ID：11975932
> 
> 赞同：0
> 
> 时间：2012-08-15T19:31:41.713
> 
> 标签：asp.net, asp.net-mvc, localization, internationalization

这是我目前拥有的代码：

```
<img id="imgLoading" src="../../Content/images/uploading.gif" alt="@MyResource.LoadingText" /> 
```

这是呈现的html：

```
<img id="imgLoading" src="../../Content/images/uploading.gif" alt="
  Product list loading...
" style="display: inline; "> 
```

呈现的 html 在资源文本之前和之后有不需要的新行。这是本地化图像替代文本的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:39:38.157

是的，没关系，它是有效的 HTML。没什么可担心的。如果您想摆脱新行和空格，请修复您的 RESX 文件。

# asp.net-mvc-3 - MVC Master Detail 实现和替代方案

> ID：11975935
> 
> 赞同：0
> 
> 时间：2012-08-15T19:31:53.003
> 
> 标签：asp.net-mvc-3, implementation, master-detail

我一直在尝试为我的 MVC 网站实施 Master Detail 解决方案，但是我遇到了一些问题。

我研究了很多似乎都运行良好的文章，但是我没有找到一个没有至少几个问题的例子：

*   有些使用我真的想避免的表
*   有些使用专门的包，我想再次避免使用太多的非标准脚本
*   大多数使用大量的 jQuery 脚本

所以我的问题是；

1.  是否有最佳实践方法来实施具有 CRUD 功能的主从解决方案？

# .htaccess - 重写域 htaccess

> ID：11975937
> 
> 赞同：1
> 
> 时间：2012-08-15T19:31:53.270
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, dns

为了搜索引擎优化，我试图简化域。我想将[http://www.abc.com/index.cfm/ID/48/Home](http://www.abc.com/index.cfm/ID/48/Home)更改 为[http://www.abc.com/home](http://www.abc.com/home) 我尝试了以下代码：

```
RewriteCond %{REQUEST_URI}^/index.cfm/ID/48/Home/ ?$  
RewriteCond %{Query_string}^$  
RewriteRule^(.*)/home [L,QSA] 
```

我不是 IT 人员，但必须这样做。谁能帮我看看我写的是否正确？如果是错的，怎么做才能达到我的目标？所以提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:47:10.650

单独尝试单页重写。

```
RewriteRule  index\.cfm/ID/48/Home http://www.abc.com/home [L,QSA] 
```

如果您希望[http://www.abc.com/home](http://www.abc.com/home)作为 URL 但要显示另一个，请使用：

```
RewriteRule  home /index.cfm/ID/48/Home [PT,L] 
```

# c++ - 简单的程序崩溃

> ID：11975941
> 
> 赞同：11
> 
> 时间：2012-08-15T19:31:58.760
> 
> 标签：c++, gcc, crash, g++

所以我一直在使用 MinGW GCC 4.4 版或一段时间，并决定是时候升级了。我去 MinGW 网站下载了最新版本的 GCC (4.7.0)。

删除我以前的版本并安装最新版本后，即使是最简单的程序也会崩溃。例如，如果我编译这个程序

```
#include <iostream>

using namespace std;

int main () {
    cout << "Hello, World" << endl;

    return 0;
} 
```

使用命令行

```
g++ hello.cpp -o hello.exe 
```

它会打印出“Hello, World”然后崩溃。但是，如果我使用以下命令行编译它：

```
g++ -O3 hello.cpp -o hello.exe 
```

它将运行得非常好，根本不会崩溃。

现在，如果我改变输入程序，让它稍微复杂一点：

```
#include <iostream>
#include <string>

using namespace std;

int main () {
    string str;

    cout << "Enter a string: ";
    getline (cin, str);

    if (str == "foo")
        cout << "You entered foo!" << endl;
    else
        cout << "You entered: " << str;

    return 0;
} 
```

如果没有优化选项（-O3），它会在打印出“输入字符串：”之前崩溃，但是，使用代码优化行，它会在输入字符串后崩溃。

现在，终于到我的问题了。我能做些什么来解决这个问题，我是否只需要恢复到以前版本的 GCC 才能使用它？另外，为什么 GCC 不能正确编译一个简单的程序？

* * *

**更新：**错误是由 GCC 安装引起的，当使用 MinGW 安装程序安装时，选择“下载最新的存储库目录”选项，它会重现错误。但是，如果我使用相同的安装程序并选择“使用预打包的存储库目录”，则错误不再存在。因此，MinGW GCC 目录中列出的最新版本的二进制文件存在一些错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:27:31.403

我遇到了非常相似的问题，发布版本很好，而调试版本被破坏了。解决方案是执行以下操作：

```
mingw-get update
mingw-get upgrade
mingw-get install gcc g++ mingw32-make --reinstall 
```

这可能是双杀，但至少在“升级”无法删除以前的一些库时它甚至有所帮助。

# javascript - 使用jquery将脚本标签插入头部时如何启用chrome调试

> ID：11975942
> 
> 赞同：0
> 
> 时间：2012-08-15T19:32:01.553
> 
> 标签：javascript, jquery

我在尝试动态加载一堆脚本文件时遇到了这种情况，并且在 JavaScript 失败时没有返回任何错误。这有望为人们节省很多时间。

使用 jquery 将脚本标记插入头部时如何启用 chrome 调试。这不允许调试（不返回错误）。

```
$(function(){    
    $('head').append('<script type="text/javascript" src="example.js"></script>');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:32:01.553

我发现通过标准的 dom 插入来做这件事是可行的。

. 可能是因为 jquery 接受了您的操作并尝试使用 ajax 来代替？这听起来不对，但这是我唯一能想到的。

. 请注意，只有 $('head').append 会导致它出于某种原因阻止调试。

```
function safeAddScript(url){
    var el=document.createNode('script');
    el.type="text/javascript";
    el.src=url;
    document.getElementsByTagName('head')[0].appendChild(el);
}

$(function(){
    safeAddScript('example.js');
}); 
```

# msbuild - MSBuild如何在项目列表中进行字符串替换

> ID：11975946
> 
> 赞同：1
> 
> 时间：2012-08-15T19:32:22.323
> 
> 标签：msbuild, replace, readlines

虽然我在学习 MSBuild 脚本方面取得了一些进步，但我仍然认为自己是初学者，所以请放轻松。

我有一个 MSBuild 脚本，它运行一个工作项查询并将其输出到一个文件，我转身阅读该文件

```
<ReadLinesFromFile File="output.txt">
<Output ItemName="ItemList"  TaskParameter="Lines"/>
</ReadLinesFromFile> 
```

文件中的行包含 ID 号、用户名和任务描述。为了“漂亮”，我想用人名替换文件中的用户名，即将 jdoe 更改为 John Doe，所以我认为扩展包中的 TextString 任务是正确的做法，但我不这样做'不要对列表进行任何更改。一旦我得到这个工作，我会想为我的所有团队成员复制它。

```
<TextString TaskAction="Replace" OldString="@(ItemList)" OldValue="jdoe" NewValue="John Doe">
  <Output PropertyName="ItemList" TaskParameter="NewString"/>
</TextString>
<Message Text="Results: @(ItemList)" /> 
```

该脚本不会崩溃或出错，但也不会进行替换。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:44:23.377

您可以尝试文件系统任务操作。我认为问题在于您使用的是项目列表而不是 $property 元素

```
<MSBuild.ExtensionPack.FileSystem.File TaskAction="Replace" 
TextEncoding="ASCII"  RegexPattern='"Jdoe"' 
Replacement='"John Doe"' 
Files="%(output.txt)"/> 
```

# css - LESS CSS 动态类名

> ID：11975947
> 
> 赞同：5
> 
> 时间：2012-08-15T19:32:24.743
> 
> 标签：css, class, dynamic, less

我正在写这个 LESS 文件，但我有点卡住了。

代码如下：

```
.flag (@code) {
    (~'.@{code}') {
        + label {
            &:after {
                background-image: url('images/flags/@{code}.png');
            }
        }
    }
}

input[type='radio'] {
    &.flag {
        .flag(us);
    }
} 
```

现在，这会产生以下 CSS（注意 .flag 和 .us 之间的空格）

```
input[type='radio'].flag .us + label:after {
    background-image: url('images/flags/us.png');
} 
```

但是，我正在寻找的结果应该如下：

```
input[type='radio'].flag.us + label:after {
    background-image: url('images/flags/us.png');
} 
```

显然我需要在某处使用组合器 (&)。但我似乎无法弄清楚到底在哪里。到目前为止，我所做的一切都会导致解析错误或不希望的结果。甚至可以开始吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-29T05:29:28.353

**[**迟到的答案，但最好在这里有一个**]**

从**LESS 1.3.1**（2012 年 10 月）开始，您可以使用`.@{classname}`而不是`(~"@{classname}")`动态生成类名，然后允许`&`在类和此代码之前使用

在**少：**

```
.flag (@code) {
   &.@{code} {
        + label {
            &:after {
                background-image: url('images/flags/@{code}.png');
            }
        }
    }
}
input[type='radio'] {
    &.flag {
        .flag(us);
    }
} 
```

将产生所需的**CSS：**

```
input[type='radio'].flag.us + label:after {
  background-image: url('images/flags/us.png');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T21:10:38.300

有一个功能请求允许在转义选择器中使用 & 或处理这种情况，但我认为目前还没有解决方法。如果你找到我想知道的。

# java - 用于解压 IPv6 地址的 Java 代码

> ID：11975950
> 
> 赞同：1
> 
> 时间：2012-08-15T19:32:55.143
> 
> 标签：java, ipv6

> **可能重复：**
> [匹配 IPv4 和 IPv6 字符串的 Java 正则表达式是什么？](https://stackoverflow.com/questions/46146/what-are-the-java-regular-expressions-for-matching-ipv4-and-ipv6-strings)

有没有人有一个java代码来解压给定的IPv6地址。

我发现编写正则表达式真的很困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:36:44.440

其中之一应该可以帮助您：

```
public static final String IPV6_HEX4DECCOMPRESSED_REGEX = "\\A((?:[0-9A-Fa-f]{1,4}(?::[0-9A-Fa-f]{1,4})*)?) ::((?:[0-9A-Fa-f]{1,4}:)*)(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\z";
public static final String IPV6_6HEX4DEC_REGEX = "\\A((?:[0-9A-Fa-f]{1,4}:){6,6})(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\z";
public static final String IPV6_HEXCOMPRESSED_REGEX = "\\A((?:[0-9A-Fa-f]{1,4}(?::[0-9A-Fa-f]{1,4})*)?)::((?:[0-9A-Fa-f]{1,4}(?::[0-9A-Fa-f]{1,4})*)?)\\z";
public static final String IPV6_REGEX = "\\A(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}\\z"; 
```

还可以查看[Inet6Address 类](http://docs.oracle.com/javase/6/docs/api/java/net/Inet6Address.html)，这将使您的生活更轻松。

**参考：**

*   [用于匹配 IPv4 和 IPv6 字符串的 Java 正则表达式是什么？](https://stackoverflow.com/questions/46146/what-are-the-java-regular-expressions-for-matching-ipv4-and-ipv6-strings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:39:14.833

为什么在可以使用时使用正则表达式[`Inet6Address.getHostAddress`](http://docs.oracle.com/javase/7/docs/api/java/net/Inet6Address.html#getHostAddress%28%29)？

```
final String compressed = "1080::8:800:200c:417a";
final String decompressed = "1080:0:0:0:8:800:200c:417a";
try {
  final Inet6Address addr = (Inet6Address) InetAddress.getByName(compressed);
  assert addr.getHostAddress().equals(decompressed);
} catch (UnknownHostException ex) { } 
```

# extjs - 煎茶触摸。在浏览器中工作正常，但只在 iphone 上显示空白页面

> ID：11975958
> 
> 赞同：1
> 
> 时间：2012-08-15T19:33:34.560
> 
> 标签：extjs, touch, screen

**编码：**

```
Ext.define("app.view.Login", {

extend:'Ext.Panel',
fullscreen:true,
xtype:'login',

requires:[

'Ext.form.Panel',
'Ext.Button',
'Ext.field.Text',
'Ext.field.Password',
'app.view.Main'

],

config:{

fullscreen:true,
cls:'login',
style:'background-image:url("img/login.png"); background-size:100% auto;',

scrollable:false,

items:[]
}
... 
```

**在我的 app.js 中：**

```
launch:function () {
Ext.Viewport.add(Ext.create('App.view.Login'));
} 
```

它在 Chrome 浏览器中运行良好，但只在 iphone 上显示空白页面。有谁知道什么可能导致这个问题？我做错什么了吗？或者它是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:50:45.030

我尝试了您在 iOS 模拟器 5.0 中为我所做的工作。问题可能是添加 app.view.Main。如果你在配置中给出 fullscreen:true 也可以尝试不使用它。不要重复自己。

# eclipse - 从 Eclipse/STS 运行 Tomcat 的问题

> ID：11975960
> 
> 赞同：0
> 
> 时间：2012-08-15T19:33:42.660
> 
> 标签：eclipse, tomcat, classnotfoundexception, sts-springsourcetoolsuite, eclipse-wtp

我无法让 Tomcat-7.0.29 与 Eclipse/sts 一起工作。

当我将它直接放入 Tomcat 的部署目录时，我的战争部署良好，但是当我使用 Eclipse/STS 部署它时，我得到一个 ClassNotFoundException 而我确定该 jar 在 web-inf/lib 目录中战争。

有没有人有任何线索？

```
GRAVE: Erreur lors de la configuration de la classe d'écoute de l'application (application listener) com.sun.faces.application.WebappLifecycleListener
java.lang.ClassNotFoundException: com.sun.faces.application.WebappLifecycleListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4727)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

编辑：我刚刚注意到以下目录：

```
/home/julien/system/workspace-sts-2.9.2.RELEASE/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/jeanbaptistemartin/WEB-INF/lib 
```

只包含一个罐子。这是正常的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:59:41.437

执行**Maven->update dependencies**对问题进行了排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T09:26:21.937

在 tomcat 库中添加两个 jar：jsf-api.jar 和 jsf-impl.jar。

# git - 分类、标记或组织 GitHub 拉取请求？

> ID：11975964
> 
> 赞同：10
> 
> 时间：2012-08-15T19:33:58.320
> 
> 标签：git, github

有没有办法在 GitHub 上组织拉取请求？对于一个有很多贡献者和拉取请求的大项目，管理员至少能够标记拉取请求似乎是非常宝贵的。我认为这在网站的某个地方是可能的，但我没有看到它。我确实看到了问题标签。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-05T13:57:52.400

实际上有一种方法可以标记拉取请求，但您必须从问题视图中进行。以下是步骤：

1.  转到问题屏幕
2.  选中要标记的拉取请求旁边的框。
3.  在问题列表的顶部有一个“标签”按钮，上面有一个小箭头。单击该按钮。
4.  选择要添加到拉取请求的标签，然后选择更新。

不知道为什么他们不提供一种将拉取请求标记为与问题相同的方法，但这种解决方法可以完成工作。

**更新：2014 年 2 月 7 日**

GitHub 现在支持直接在拉取请求上管理标签。有关更多信息，请参阅他们的[博客文章](https://github.com/blog/1767-redesigned-conversations)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-02T09:38:22.950

注意（2014 年 4 月）：在博文“ [L 代表标签](https://github.com/blog/1815-l-is-for-labels)`l`”中，GitHub 宣布可以使用热键轻松编辑现有问题的标签：

![https://cloud.githubusercontent.com/assets/47/2582431/1855dc10-b9c5-11e3-8cf1-9aa2943d7499.gif](../Images/acda4da7f91d530ae74d1fb6b8d42219.png)

这也适用于拉取请求，在其对话选项卡中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-30T21:51:13.520

在这里无耻的自我推销，但我已经上传了一个 Greasemonkey 脚本，它直接在拉取请求上添加了对标签管理的支持，就像问题一样： http: [//userscripts.org/scripts/show/185095](http://userscripts.org/scripts/show/185095)

它继续让我感到困惑，GitHub 无论如何都不支持这一点。它很容易添加到页面中，并且不会造成更多的混乱。

# javascript - 为什么 Chrome 中的悬停菜单会“重影”？

> ID：11975965
> 
> 赞同：0
> 
> 时间：2012-08-15T19:34:01.547
> 
> 标签：javascript, css, google-chrome, drop-down-menu, hover

当我仅将鼠标悬停在 Chrome（版本 21.0.1180.79）中的菜单上（并非所有 webkit）然后悬停菜单的一部分时重影（保持原位）直到元素被调整到位，在这种情况下重叠区域消失离开。

例如，在页面上：[http](http://www.georgianc.on.ca/student-success/) ://www.georgianc.on.ca/student-success/如果您将鼠标悬停在“Co-op and Career”（在 chrome 中）然后取消悬停，您应该会看到问题。

这个问题似乎是同一个问题（我无法确定该示例已被删除）但我找不到任何适用于相关菜单的“可见性”规则......需要新鲜的眼睛吗？[chrome和safari中的css菜单悬停“挂起”](https://stackoverflow.com/questions/2664383/css-menu-hover-hangs-in-chrome-safari)

截图：

悬停后 ![悬停后](../Images/4ac78e397b849dec16f49be8a9458786.png)

悬停后，然后幻灯片改变 ![悬停后，然后幻灯片改变](../Images/244b7dc27dbd21e896bdb2948423bb2b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:59:45.320

无法在 Windows x64 gc v 21.0.1180.79 m 上重现

检查您是否有任何可能干扰网站的插件，例如 JQuery Injector、KB SSL Enforcer...

例如，我正在使用 KB SSL Enforcer，因此无法看到您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:41:07.273

出于某种原因，如果您设置`position: static`为`#menu-item-197`. 不过，我不知道为什么，而且它可能一开始就不应该重影——但至少它有效！

# python - Python“范围”资源消耗

> ID：11975966
> 
> 赞同：2
> 
> 时间：2012-08-15T19:34:03.080
> 
> 标签：python, memory-management, windows-7, python-2.7

我写了以下脚本

基本上，我只是在为机器学习学习 Python，并想检查计算密集型任务的执行情况。我观察到对于 10**8 次迭代，Python 占用了大量 RAM（大约 3.8 GB）和大量 CPU 时间（只是冻结了我的系统）

我想知道是否有任何方法可以通过代码或一些全局设置来限制时间/内存消耗

脚本 -

```
initial_start = time.clock()
for i in range(9):
 start = time.clock()
 for j in range(10**i):
  pass
 stop = time.clock()
 print 'Looping exp(',i,') times takes', stop - start, 'seconds'
final_stop = time.clock()
print 'Overall program time is',final_stop - initial_start,'seconds' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T19:36:26.170

在 Python 2 中，`range`创建一个列表。改为使用`xrange`。有关更详细的说明，请参阅[您是否应该始终偏爱 xrange() 而不是 range()？](https://stackoverflow.com/questions/135041/should-you-always-favor-xrange-over-range)

请注意，无操作 for 循环是一个非常糟糕的基准测试，它几乎不会告诉您有关 Python 的任何信息。

另请注意，根据 gnibbler 的评论，Python 3 的`range`工作方式与 Python 2 的`xrange`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:56:16.483

看这个问题：[如何限制堆大小？](https://stackoverflow.com/questions/2308091/how-to-limit-python-heap-size)

为了解决您的脚本，timeit 模块测量更准确地执行操作所需的时间

```
>>> import timeit
>>> for i in range(9):
...     print timeit.timeit(stmt='pass', number=10**i)
...
0.0
0.0
0.0
0.0
0.0
0.015625
0.0625
0.468752861023
2.98439407349 
```

您的示例大部分时间都在处理您要记忆的巨大数字列表。 `xrange`而不是`range`将有助于解决该问题，但您仍在使用糟糕的基准。循环将一遍又一遍地执行，实际上并没有做任何事情，所以 cpu 正忙于检查条件并进入循环。

如您所见，创建这些列表需要花费大部分时间

```
>>> timeit.timeit(stmt='range(10**7)', number=1)
0.71875405311584473
>>> timeit.timeit(stmt='for i in range(10**7): pass', number=1)
1.093757152557373 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T19:38:10.390

Python 占用 RAM，因为您正在使用`range`函数创建一个 10 ** 8 长度的非常大的列表。这就是迭代器变得有用的地方。

使用`xrange`而不是`range`.

它的工作方式与`range`do 相同，但不是在内存中创建那个大列表，`xrange`而是只计算内部索引（每次迭代将其值增加 1）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T20:44:34.037

如果您正在考虑使用 Python 进行机器学习，请查看[numpy](http://numpy.scipy.org/)。它的理念是在优化的 C 中实现所有“内部循环”（矩阵运算、线性代数），并使用 Python 来操作输入和输出并管理高级算法——有点像使用 Python 的 Matlab。这为您提供了两全其美的优势：Python 的易用性和可读性以及 C 的速度。

回到您的问题，对 numpy 操作进行基准测试将使您对 Python 在机器学习方面的性能进行更真实的评估。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T19:57:20.337

至于 cpu，你有一个 for 循环运行数十亿次迭代，中间没有任何睡眠或暂停，所以难怪该进程完全占用 cpu（至少在单核计算机上）。

# javascript - Javascript 和复选框

> ID：11975969
> 
> 赞同：0
> 
> 时间：2012-08-15T19:34:09.450
> 
> 标签：javascript, checkbox, onclick, conditional, toggle

我正在尝试创建一个复选框，该复选框将更改单击时的表单操作。我首先将其设置为根据是否检查消息来提醒消息，但什么都没有发生。请帮我！

JavaScript：

```
function toggleAction(){
var check = document.getElementById('checkb').checked;
   if (checked == "1"){
    alert("is checked");
   }else{
    alert("is not checked"); }
} 
```

HTML：

```
<INPUT TYPE="checkbox" id="checkb" onclick="toggleAction()">Add Another<br> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T19:36:07.823

您的主要问题是您命名了变量`check`，但随后在`if`语句中查找了`checked`. 其次，请注意这`.checked`是一个布尔值（`true`或`false`），但您将其与字符串“1”进行比较。这碰巧有效，但不推荐。

尝试：

```
if (check) alert("is checked");
else       alert("is not checked"); 
```

比`getElementById`在处理程序中显式使用更好的是使用对处理事件的复选框的引用：

```
document.getElementById('checkb').onclick = toggleAction;
function toggleAction(){
  if (this.checked) alert('yes');
  else              alert('no');
} 
```

请注意，在上面我还如何使用 JavaScript 而不是使用`onclick="..."`HTML 属性以编程方式分配事件处理程序。这被认为是“最佳实践”；您不应该直接在 HTML 中编写 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:37:03.337

该行`if(checked == "1")`应该是`if(check)`.

# spring - 为什么 Spring 在通过 XML 声明 bean 时运行 @Scheduled 方法，但在通过注解发现 bean 时不运行？

> ID：11975976
> 
> 赞同：2
> 
> 时间：2012-08-15T19:34:44.040
> 
> 标签：spring, scala

我希望每 10 秒运行一次任务。当我在`applicationContext.xml`文件中声明 Bean 时，一切都按预期工作。当我简单地用 注释 Bean 时`@Component`，任务永远不会执行。我的代码/配置如下所示：

`QueueProcessor.scala`

```
package example.components

// imports removed for brevity

@Component
class QueueProcessor {

  @Scheduled(fixedDelay = 10000)
  def poll() = {
    println("polling queue")
  }

} 
```

`applicationContext.xml`

```
<context:component-scan base-package="example.components" />
<task:executor id="genericExecutor" pool-size="2" />
<task:scheduler id="genericScheduler" pool-size="2" />
<task:annotation-driven executor="genericExecutor" scheduler="genericScheduler" /> 
```

`<bean id="queueProcessor" class="example.components.QueueProcessor" />`如果我只是在我的 , 中添加一行`applicationContext.xml`，那么任务会按预期每 10 秒执行一次。我已经验证了`example.components`包中的其他类正在通过注释进行实例化，因此没有发现这个类不应该是问题。

关于还有什么可能是错误的任何想法？

编辑：我将该行`<task:annotation-driven executor="genericExecutor" scheduler="genericScheduler" />`移至我的`servlet.xml`文件中。这解决了问题。这是否与读取文件的顺序有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:39:15.120

你的问题真的让我很困惑。我有一个几乎相同的设置的工作示例。当您使用注释时，它似乎没有被作为 Spring bean 拾取。您可以通过注释将依赖项注入到您的 QueueProcessor 类中，看看是否有效？这至少会告诉我们它是否作为 Spring bean 被适当地拾取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:02:44.313

要使注释起作用，请尝试添加以下行：

```
<context:annotation-config/> 
```

这应该可以解决问题。

另见：[http ://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-annotation-config](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-annotation-config)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T16:49:26.170

如已编辑问题中所述，将行`<task:annotation-driven executor="genericExecutor" scheduler="genericScheduler" />`移至`servlet.xml`文件解决了该问题。

# node.js - zeromq.node 安装错误 Ubuntu 12.04: 'node-gyp rebuild'

> ID：11975983
> 
> 赞同：6
> 
> 时间：2012-08-15T19:35:14.507
> 
> 标签：node.js, ubuntu, npm, zeromq, ubuntu-12.04

我正在尝试使用以下方法安装[zeromq.node](https://github.com/JustinTulloss/zeromq.node)：

`$ npm install zmq`

但是，我不断收到以下错误。任何帮助将非常感激。

```
gyp ERR! build error 
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/usr/share/npm/node_modules/node-gyp/lib/build.js:215:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:91:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:674:10)
gyp ERR! System Linux 3.2.0-29-generic
gyp ERR! command "node" "/usr/share/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /home/robot/code/game/node_modules/zmq
gyp ERR! node -v v0.8.6
gyp ERR! node-gyp -v v0.6.3
gyp ERR! not ok 
npm ERR! zmq@2.1.0 install: `node-gyp rebuild`
npm ERR! `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR! 
npm ERR! Failed at the zmq@2.1.0 install script.
npm ERR! This is most likely a problem with the zmq package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls zmq
npm ERR! There is likely additional logging output above.

npm ERR! System Linux 3.2.0-29-generic
npm ERR! command "nodejs" "/usr/bin/npm" "install" "zmq"
npm ERR! cwd /home/robot/code/game/test/amqp
npm ERR! node -v v0.8.6
npm ERR! npm -v 1.1.48
npm ERR! code ELIFECYCLE
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/robot/code/game/test/amqp/npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-19T08:06:17.090

gyp bulid 错误删除了 libzmq dev 及其依赖项并尝试了以下步骤..它对我有用

```
 $ sudo apt-get update
 $ sudo apt-get install build-essential
 $ sudo apt-get install libzmq-dev
 $ npm install zmq 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T21:52:48.060

我设法通过按照[本教程安装 python-client 解决了这个问题。](http://ridingpython.blogspot.co.uk/2012/05/installing-zeromq-python-lib-pyzmq-on.html)完成每个步骤后，我发现我可以通过 npm 安装 node.zeromq 模块，使用：

```
$ npm install zmq 
```

我猜这是由于缺少一些必需的文件。最有可能`libzmq-dev`。

# mysql - 将几行组合成一个没有关系键的行

> ID：11975985
> 
> 赞同：1
> 
> 时间：2012-08-15T19:35:19.477
> 
> 标签：mysql, database, crystal-reports

嘿伙计们，我有点卡在这里。我有一张表，我需要将几行组合在一起。

我需要合并几行的原因是我的 Crystal Reports 将显示此信息的格式。提前致谢。

我的数据库：

```
ID     Review              Date
------------------------------
2      2nd Review        9/1/2011
3      1st Review        3/6/2012
5      1st Review        2/12/2010
6      1st Review        6/12/2012
7      3rd Review        6/21/2011 
```

我的查询应该只输出 2011 年 8 月 1 日或以后的日期。我的结果应该是这样的：

```
Review1            Date       Review2            Date        Review3            Date
------------------------------------------------------------------------------------
1st Review         6/12/2012   1st Review        3/6/2012     2nd Review       9/1/2011 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:54:35.997

我本人是 PostgreSQL 人，但您可以使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)函数来连接所有评论和日期。这可能意味着您必须在 Crystal 端执行一些解析以使其看起来更好/更干净，但它应该为您将所有内容放在一行中。

# mercurial - 是否可以撤消汞清除？

> ID：11975994
> 
> 赞同：5
> 
> 时间：2012-08-15T19:36:07.103
> 
> 标签：mercurial, purge

我不小心用“hg purge”清除了一些我无意清除的文件。有没有办法撤消这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T01:23:36.733

无法撤消清除。它会删除 Mercurial 未跟踪的文件，因此 Mercurial 无法帮助您取回它们。

# css - 在锚标签中使用不同的图像（链接、访问等）

> ID：11975999
> 
> 赞同：0
> 
> 时间：2012-08-15T19:36:18.187
> 
> 标签：css

我试图让不同的图像显示锚标签的不同状态，但我无法让它工作。关于我在这里缺少什么的任何想法？

这是图片 => 不允许我发布图片，但它是 480x30 像素

这是CSS；

```
a.image {
background-repeat:no-repeat;
color:white;
display:inline-block;
width:160px;
height:30px;
margin-left:-12px;
margin-top:16px;
padding-top:6px;
text-align:center;
font-size:14px;
font-weight:bold;
cursor:pointer;
text-decoration:none;
}

a.image:link {
background-image:url('images/buttons.png');
background-position:0px 320px;
}

a.image:visited {
background-image:url('images/buttons.png');
background-position:0px 0px;
}

a.image:active {
background-image:url('images/buttons.png');
background-position:0px 160px;
} 
```

这是HTML；

```
<a href='ifp.asp?width=1512&ProjectGroupID=&ProductID=536&model=Addison 536&plan=Lower Level Plan' class='image'>Lower Level Plan</a> 
```

我目前只得到白色文本的“低级计划”。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:41:15.990

如果您的精灵是 480 W x 30 H，您应该在 X 轴上更改背景位置时，您正在更改 y 轴上的背景位置。您还应该使用 -X 尺寸来指示精灵需要移动负方向（向左）所以你可以这样重写：

```
a.image:link {
background-position:-320px 0px;
}

a.image:visited {
background-position:0px 0px;
}

a.image:active {
background-position:-160px 0px;
} 
```

请注意，我还在这里删除了 background-image 声明，因为您可以简单地将其移动到 a.image 样式块中。