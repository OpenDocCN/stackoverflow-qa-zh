# StackOverflow 问答 11624000-11624999

# c++ - 使用位的标志

> ID：11624001
> 
> 赞同：0
> 
> 时间：2012-07-24T04:06:28.590
> 
> 标签：c++, bit-manipulation

我正在尝试对“char”变量进行简单的位操作；我想定义 5 个常量。

```
const int a = 0;
const int b = 1;
const int c = 2;
const int d = 3;
const int e = 4; 
```

当我尝试设置多个 char 位时，所有位显然都达到设置位 a 读取为 set...这是我用来设置和读取 char var 位的代码：

```
char var = 0;
var |= c;
var|= d;

BOOL set = false;
if(var & b)
set = true; // reads true
if(var & c)
set = true; // also reads true
if(var & d)
set = true; // also reads true 
```

我读到一个不完整的线程，它说设置位的操作对于 x86 可能不同......我正在使用的系统......是这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T04:09:39.587

你正在切入你的其他“位”空间。检查一对夫妇给我们：

```
b = 1 = 0001
c = 2 = 0010
d = 3 = 0011 //uh oh, it's b and c put together (ORed) 
```

为了解决这个问题，让每个代表一个新的位位置：

```
const int a = 0; //or 0x0
const int b = 1; //or 0x1 
const int c = 2; //or 0x2 or 1 << 1
const int d = 4; //or 0x4 or 1 << 2
const int e = 8; //or 0x8 or 1 << 3 
```

如果没有设置位的可能性也有不同的含义，则应考虑不使用 0。其主要应用是设置和检查标志，没有设置标志肯定显示独立性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T04:10:10.643

将您的定义更改为，因为它们以您定义它的方式，其中一些设置了多个位

```
const int a = 1 << 0;
const int b = 1 << 1;
const int c = 1 << 2;
const int d = 1 << 3;
const int e = 1 << 4; 
```

这样很明显，每个常数只有 1 位设置。

如果您想了解所有有关[各种位黑客](http://graphics.stanford.edu/~seander/bithacks.html)的信息...

# python - 找到一系列数字中最低的未占用空间

> ID：11624004
> 
> 赞同：1
> 
> 时间：2012-07-24T04:06:50.320
> 
> 标签：python, sorting

假设我从 0 到 10 生成一个列表：

```
range(10) 
```

然后我有一个字典列表，看起来像这样：

```
item = [{'position': 0}, {'position': 4}] 
```

如何获得不在范围内的最小数字`position`？例如，如果我向它询问下一个可用位置，它应该返回 1；并且，将它添加到列表中，然后是 2，等等，直到它达到 4，在这种情况下它应该返回 5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T04:12:54.137

```
>>> item = [{'position': 0}, {'position': 4}]
>>> min(set(range(10)) - set(x['position'] for x in item))
1 
```

您找到所有位置值`(x['position'] for x in item))`，将此列表转换为集合，从从 0 到最大值的所有数字的集合中减去它，然后在结果集中找到最小值。

# iphone - 2 UIScrollView中的UITableView

> ID：11624007
> 
> 赞同：5
> 
> 时间：2012-07-24T04:07:04.237
> 
> 标签：iphone, objective-c, ios, uitableview, uiscrollview

我的`UIScrollView`应用程序中有 2 个页面，每个页面中有`UITableView`一些行。问题是触摸真的很奇怪。如果我想在第一页时转到第二页，我只需从右侧向左滑动即可转到另一页，但会将滑动`UITableView`检测为垂直滑动并“进行”触摸。我必须尝试 3-4 次才能成功转到其他页面。这很烦人，我想知道是否有人有办法让触感更好。

提前致谢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T04:39:57.180

如果要锁定滚动视图：

```
scrollView.scrollEnabled = NO; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:37:08.773

Keep the frame.height of scroll bar equal to tableview.frame.height.

Set the directional lock property for tableView.

```
self.tableView.directionalLockEnabled = YES; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T04:15:08.677

您可以为滚动视图保留自定义滚动条......所以用户将从该滚动条滚动......如果您在滚动视图中插入表格视图，那么现在有两个代表一个滚动条和另一个表格您如何将控制两者......我认为它不好......所以让它们中的任何一个自定义，这样你就可以控制你想要的方式......最好总是我们保持自定义滚动条，因为它是编码的最外部部分。 ...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T04:19:40.017

尝试设置滚动条的 directionalLockEnabled 属性。

> self.scrollBar.directionalLockEnabled = YES;

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T04:46:33.360

当你移动页面的时候只是make `(UITableView)tblView.userInteractionEnabled = NO`，所以它调用了touch事件`UIScrollView`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T04:53:24.007

正确滚动就足够了

```
scrollViewContainer.delaysContentTouches = NO; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-18T11:38:01.880

锁定滚动视图的更多方法。

1)

```
scrollViewContainer.delaysContentTouches = NO; 
```

2)

```
scrollView.scrollEnabled = NO; 
```

3)

```
self.scrollBar.directionalLockEnabled = YES; 
```

像这样.......我希望这对你有帮助。

# java - 我们可以从 httpClient Componet 调用 http servlet

> ID：11624008
> 
> 赞同：0
> 
> 时间：2012-07-24T04:07:05.137
> 
> 标签：java, http, tomcat, servlets, struts2

我想从我的 httpClient 调用 http servlet 类，我的 httpClient 代码如下

```
public class ConnectionClientHttp {

    public static void main(String[] args) throws Exception {       

    HttpParams params = new SyncBasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        //Set more parameter if necessary

        HttpProcessor httpproc = new ImmutableHttpProcessor(new HttpRequestInterceptor[] {
                // Required protocol interceptors
                new RequestContent(),
                new RequestTargetHost(),
                // Recommended protocol interceptors
                new RequestConnControl(),
                new RequestUserAgent(),
                new RequestExpectContinue()});

        HttpRequestExecutor httpexecutor = new HttpRequestExecutor();

        HttpContext context = new BasicHttpContext(null);

        HttpHost host = new HttpHost("IPAddress", Port);

        DefaultHttpClientConnection conn = new DefaultHttpClientConnection();
        ConnectionReuseStrategy connStrategy = new DefaultConnectionReuseStrategy();

        context.setAttribute(ExecutionContext.HTTP_CONNECTION, conn);
        context.setAttribute(ExecutionContext.HTTP_TARGET_HOST, host);

        try {
            if (!conn.isOpen()) {
                Socket socket = new Socket(host.getHostName(), host.getPort());
                conn.bind(socket, params);
            }

   BasicHttpEntityEnclosingRequest request = new BasicHttpEntityEnclosingRequest("POST","/");

        StringEntity myEntity = new StringEntity("Some string to send at server");
        request.setEntity(myEntity);
        request.setParams(params);
        httpexecutor.preProcess(request, httpproc, context);
        //Response from Server
        HttpResponse response = httpexecutor.execute(request, conn, context);
        System.out.println("<< Response: " + response.getStatusLine());                

        } catch (Exception e){
            e.printStackTrace();
        } finally {
            conn.close();
        }
    }// end of static void main

}// end of class 
```

当我使用

```
BasicHttpEntityEnclosingRequest request = new BasicHttpEntityEnclosingRequest("POST","<uri>"); 
```

在上面的 URI 中，我需要给出目标类的路径，但在我的例子中，它只是一个部署在服务器上的 servlet 文件，它将从此文件获取请求并在控制台显示内容。

我的问题是应该给出什么路径？根据我对 URI 的了解，它采用路径，`http://localhost:8080/erik/loginSubmit!loginDetails.do`但给出的示例在 Struts2 中，但如果我只想执行一些扩展**HttpServlet**的 servlet 文件，那么我应该给出什么路径以及该文件如何知道哪个文件是发送数据的目标?

我创建了如下目标文件：

```
public class ExampServlet extends HttpServlet {

    public void doPost(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {
        //Received Request and display it at console    
    }
} 
```

提前致谢。塔班

# db2 - 如何将商业版 DB2 8.9 备份的数据库导入免费 DB2 10 ExpressC 版

> ID：11624012
> 
> 赞同：1
> 
> 时间：2012-07-24T04:07:12.910
> 
> 标签：db2

请告诉我从商业版（DB2 8/9）导出的 DB2 数据库导入免费 DB2 ExpressC 版（10）的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:27:04.733

首先，在 DB2 中，免费版对数据库大小没有限制。只是存在 CPU 限制。因此，将数据库移植到免费版不会有任何问题。

这是一步一步的方法。在旧系统上：

```
# db2look -d DBNAME -e -o DBNAME.DDL
# db2move DBNAME export 
```

将所有生成的文件移动到新系统后，在新系统上发出以下命令：

```
# db2 CREATE DATABASE DBNAME
# db2 -tvf DBNAME.DDL
# db2move DBNAME IMPORT 
```

就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:08:14.857

只要您尝试恢复到在“相同平台”（相同操作系统和相同/更高位级别）上运行的 DB2 Express C，您应该不会遇到使用普通“RESTORE”命令的任何问题。如果不是这样，它会变得有点棘手。您可以使用“db2look”命令复制模式（DDL）创建 SQL，然后在新机器上运行它们以重新创建模式。然后您应该使用“db2move”来移动表中存在的用户数据。

# django - django-oauth2-provider

> ID：11624016
> 
> 赞同：1
> 
> 时间：2012-07-24T04:08:15.533
> 
> 标签：django, oauth-2.0

有没有人使用 django-oauth2-provider 作为 django oauth2 解决方案？

我已经从 github [https://github.com/caffeinehit/django-oauth2-provider](https://github.com/caffeinehit/django-oauth2-provider)克隆了 django-oauth2-provider 代码，并运行提供的示例站点。

但我不知道如何测试它。当我在浏览器中输入：

`http://127.0.0.1:8000/oauth2/authorize/2/?client_id=fc79b3fd7e65b904836b`

我有

```
unauthorized_client An unauthorized client tried to access your resources. 
```

似乎我的 client_id 未能传递到该站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:43:15.990

您正在访问错误的 URL：

```
http://127.0.0.1:8000/oauth2/authorize/?client_id=fc79b3fd7e65b904836b&redirect_uri=<REDIRECT_TARGET>&response_type=code&status=abc 
```

然后应用程序将您重定向到

```
/oauth2/authorize/2/ 
```

通过在成功时发出 HTTP200 或在失败时发出 HTTP400。

# jquery - 根据之前的选择禁用表单控件

> ID：11624020
> 
> 赞同：0
> 
> 时间：2012-07-24T04:08:41.243
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-selectors

我有一个表，其中每行中的一列包含相同的`<select>`选项，如下所示：

```
<tr>
....
<td>..</td>
<td>
    <select id="gender">
        <option value="M">Male</option>
        <option value="F">Female</option>
    </select>
</td>
</tr>
<tr>
....
<td>..</td>
<td>
    <select id="gender">
        <option value="M">Male</option>
        <option value="F">Female</option>
    </select>
</td>
</tr>
<tr>
....
<td>..</td>
<td>
    <select id="gender">
        <option value="M">Male</option>
        <option value="F">Female</option>
    </select>
</td>
</tr> 
```

假设我目前正在处理第二行，如何禁用第三行的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:09:26.993

```
$(this).closest("tr").next().find("select").prop("disabled", true); 
```

使用`closest("selector")`方法向上遍历到父元素（也可以使用`parents("selector")`），使用 跳转到下一个元素，使用`next()`向下遍历`find("selector")`并编辑表单元素`prop()`。

当然，您可以将此行放在某种事件处理程序中，可能是由前一个元素`change`触发的事件。`select`然而，在你这样做之前，你需要确保你没有在`id`'s 上加倍......否则 jQuery 不会工作得那么好。

# php - 如何在特定时间点从 PHP mysql 自动化 SMS

> ID：11624022
> 
> 赞同：1
> 
> 时间：2012-07-24T04:09:11.453
> 
> 标签：php, mysql, sms

我有一个网站，人们将在其中预订现场访问。支持主管在前一天确认现场访问。一旦在应该进行现场访问的当天确认了现场访问，客户应该会在早上收到短信，告知您今天按照要求进行了现场访问。

我有第三方短信服务

现在我应该在 PHP、MySQL 中运行一个代码，它会在早上发送一条 SMS 来进行站点访问

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:18:50.043

您需要设置一个在早上运行的 cron 作业，该作业将调用您的 php 文件，其中包含用于在数据库中查找您需要向其发送短信的客户的代码。

哟需要注册总和短信网关提供 2 好我知道是 clickatell 和 eztexting。

您可以在该网站上获取用于发送短信的 api。

快乐的短信 :D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:20:48.700

Cron -> 启动 PHP-Script ，PHP 脚本从 SQL 表中读取记录并检查是否必须发送 SMS，我假设它的 sms 是通过邮件发送的，因此您可以使用集成的 php 函数将邮件发送到 sms 网关。对于确认访问的人，创建另一个具有适当身份验证的站点，他可以在其中访问表格并同意站点访问和另一个供客户注册站点访问的站点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T05:23:11.110

在控制面板中设置 Cron 作业。试试这个链接 [http://www.devx.com/DevX/Article/39900/1954](http://www.devx.com/DevX/Article/39900/1954)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T18:14:08.597

如果您想尝试完全不同的方法，请查看：Sent.ly - [http://sent.ly](http://sent.ly)

我是 Sent.ly 的创始人，我想也许 Sent.ly 可以帮助你...

Sent.ly 允许您将 Android 手机用作 SMS 网关。所以……你可以买一部便宜的 Android 手机（150 美元左右），然后在上面设置 Sent.ly，然后在手机里放一张 SIM 卡。

通过调用 Sent.ly API，SMS 将通过您 Android 手机中的 SIM 卡发出。Sent.ly 还可以选择安排 SMS 稍后发送，这是您的用例。

这也允许您的 PHP 应用程序接收短信，而不仅仅是发送短信。

您可以设置规则，如果传入消息与规则匹配，它将被发布到您选择的 PHP 页面。

由于我是 stackoverflow 的忠实粉丝，我想邀请您试用 Sent.ly。如果您愿意，我们很乐意为您设置额外的学分。只需发送电子邮件至 support@sent.ly

干杯，

瓦伦

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T14:10:32.330

我开发了一个这样的系统供我的一些客户使用，您可以通过 HTTP POST 或 WebServices（使用 PHP、C# 或其他）轻松地使用它与您的网站或应用程序集成。

如果您有兴趣，只需留下电子邮件或其他联系信息作为对此答案的回复，我很乐意向您发送如何发送 SMS 的示例代码，通过我们的系统设置发送消息的所需时间，除其他外。

您不需要任何类型的 cron 知识和设置，这一切都由我们的系统处理，并且代码非常简单直接。您只需要在现场确认访问后调用我们的服务，设置所需的消息发送时间，剩下的由我们的系统来完成。

最好的祝福。

# html - 锚标记中的文本超出 div 宽度

> ID：11624026
> 
> 赞同：1
> 
> 时间：2012-07-24T04:09:58.297
> 
> 标签：html

我有固定高度的 div 标签。其中有锚标签<a>标签。当锚标记中的文本超过 div 的宽度时，它在 div 标记中出现 2 行。div 标签第二行的适当高度显示一半。那么如何使用 text-overflow :ellipsis 以便显示省略号以及使用哪个标签？请帮忙。提前感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T04:38:33.473

If you just need a single line of text, you can set the `white-space` CSS property to `nowrap`. The complete CSS will look as follows:

```
div {
    width: 75px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
}​ 
```

Check this fiddle: [http://jsfiddle.net/yXgQT/](http://jsfiddle.net/yXgQT/)

# objective-c - 刷新应用程序后检测数据库的最后一个值

> ID：11624030
> 
> 赞同：1
> 
> 时间：2012-07-24T04:10:24.507
> 
> 标签：objective-c, xcode

我正在制作一个 iPad 应用程序。我有一些问题。实际上，我想在启动启动画面后在应用程序的开头显示一个视图。我在上面做了一个复选框。它将作为开/关按钮工作。首次启动应用程序时，此屏幕将显示给用户。如果用户单击关闭按钮，则即使在重新启动应用程序后，此屏幕也永远不会显示给他。为此，我制作了一个数据库表，一开始我在其中存储了 0 值。当用户单击按钮时，它变为 1。但每当用户刷新应用程序时，它再次变为零，但我想从数据库中检索最后一个值。任何人都知道即使在刷新应用程序后如何从数据库表中检索最后一个值。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:17:35.103

为此，您确实应该使用用户默认值。有一种方法 registerDefaults 用于设置默认值的初始值，但是一旦用户更改了它，该初始值就不会在应用程序的后续启动中再次使用

# objective-c - 控制电脑风扇 Objective-C

> ID：11624031
> 
> 赞同：0
> 
> 时间：2012-07-24T04:10:31.713
> 
> 标签：objective-c, hardware

有谁知道以编程方式控制 Mac 风扇的 RPM 的任何方法？我简要检查了 Apple Dev 网站，但找不到任何东西。我猜这并不容易：

```
[fans faster]; 
```

我想知道[smcFanControl](http://www.eidac.de/?p=207)是如何做到这一点的。我是否可以假设“smcFanControl”中的“smc”代表系统管理控制器？

**更新：**
smcFanControl 源代码在 GLP 许可下发布！^_^哦，是的！免费知识！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:34:19.397

您在两个方面是正确的：SMC 确实代表“系统管理控制器”，并且玩弄它并不像 [fans faster] 那样简单。对 SMC 进行编程需要了解固件和一些肮脏的硬件设备驱动程序编程。您可能必须与制造商交谈才能获得规格，如果这样做，您将无法在 Objective C 中对其进行编程。唉，您最好尝试使用 AppleScript 控制 smcFanControl :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:40:01.610

这个答案可能无济于事。我没有Mac所以我不知道它是如何工作的，只是说一些基础知识。一般来说，电脑风扇的速度控制是由SuperIO芯片或BMC（总线管理控制器）芯片来处理的。如果您的主板使用 SuperIO，那么很难修改风扇速度，因为速度调整算法是固定（融合）在芯片内部的。如果板子使用 BMC 或类似的解决方案，它将使用固件来控制速度。大多数固件都可以通过专用工具进行升级。以上解决方案将提供硬件级别的风扇速度控制，但操作系统级别无法更改速度。

我想Mac中的smcFancontrol不是改变风扇速度的命令，而是能够启用“智能风扇速度控制”功能。

# php - PHP.ini 目录问题

> ID：11624036
> 
> 赞同：1
> 
> 时间：2012-07-24T04:10:58.583
> 
> 标签：php

我正在使用 php5.ini 文件来设置和包含路径，因此我可以从任何目录调用“main.php”文件。我遇到的问题是，当我在服务器上设置多个站点时，我希望每个站点都能够从自己的目录中包含自己的“main.php”文件，只要该文件位于每个站点的根文件夹中。当我研究ini文件时，我发现服务器上只能有一个ini文件。所以我真正的问题是，我怎样才能为单独的目录创建单独的 ini 文件，或者设置一种方法来包含来自一个 php.ini 文件的单独目录中的文件？这是我现在使用的代码：

`include_path = .:/html/WEBSITE1/lib:/html/WEBSITE2/lib:/`

因此，如果我在 /html/WEBSITE1/ 中创建一个 PHP 文件，我希望它只包含来自 /html/WEBSITE1/lib 的文件以及 WEBSITE2 中的相同内容。

# css - 如何稳定头部

> ID：11624039
> 
> 赞同：0
> 
> 时间：2012-07-24T04:11:11.273
> 
> 标签：css, jsf-2

我的 Web 应用程序标题包含中心的文本和右侧的 ajax 状态。

每次用户激活 ajax 时，标题文本都会跳到左边

```
<h:outputText value="${messages.HEADER}"/>
<p:ajaxStatus id="ajax-StatusPanel" onsuccess="" style="float: right;margin-top: -5px;margin-right:10px;">                                                                     
    <f:facet name="start">                                                                                                                 
        <p:graphicImage value="resources/images/ajax-loader.gif" />                                                                        
    </f:facet>                                                                                                                             
    <f:facet name="complete">                                                                                                              
        <h:outputText value=""/>                                                                                
    </f:facet>                                                                                                                             
</p:ajaxStatus> 
```

标题文本css：

```
.pe-layout-inner-north > .pe-layout-pane-content {
    background-color: #5080C0;
    border:1px solid #222222;
    font-family: "Trebuchet MS", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Tahoma, sans-serif;
    font-size:1.5em;
    font-weight: bolder;
    text-align: center;
    color:#FFFFFF;
    display: block;
} 
```

如何将标题永久设置在中心？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:33:09.957

我找到了解决方案 - 使用 h:panelGrid:

```
<h:panelGrid columns="1" columnClasses="mainHeader" style="margin:0px auto;">
    <h:outputText value="${dy_messages.DYE_HEADER}"/>
</h:panelGrid>
<p:ajaxStatus id="ajax-StatusPanel" onsuccess="" style="float: right;margin-right:10px;margin-top: -32px">                                                                     
    <f:facet name="start">                                                                                                                 
        <p:graphicImage value="resources/images/ajax-loader.gif" />                                                                        
    </f:facet>                                                                                                                             
    <f:facet name="complete">                                                                                                              
        <h:outputText value=""/>                                                                                
    </f:facet> 
```

谢谢

# gcc - Debian linux 编译失败：asm 不可能的约束

> ID：11624043
> 
> 赞同：1
> 
> 时间：2012-07-24T04:11:40.683
> 
> 标签：gcc, linux-kernel, inline-assembly

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:10:45.927

The output constraint specifies an x86 register (EAX), which is impossible on an arm cpu. Also, the lock prefix is platform-specific to x86, and the decl and setnz instructions are not supported on arm as well.

This is the output constraint:

```
 : "=a" (nz) 
```

It is telling gcc to use the register eax to hold the result and then copy it to the variable *nz*.

# java - 找不到jdbc odbc DSN？

> ID：11624044
> 
> 赞同：0
> 
> 时间：2012-07-24T04:11:40.853
> 
> 标签：java, ms-access, jdbc-odbc

我使用jsp-servlet，tomcat开发了一个项目。我正在尝试连接到数据库，但它不断给出错误

[Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序。

后端是 MS-Access mdb。我创建了 DSN 。

在我重新安装 Windows 7 之前，它在我的机器上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:45:38.183

错误：**未找到数据源名称且未指定默认驱动程序**

这通常意味着您的应用程序找不到您指定的数据源名称。这可以归结为以下原因：-

1.  您在应用程序中指定的数据源名称不正确。

2.  您的应用程序只能使用 ODBC 系统 DSN 而不能使用用户 DSN。基于服务的应用程序通常不以用户身份运行，因此它们只能看到系统 DSN。

3.  您在 64 位计算机上，并且创建了 64 位 DSN，但未创建 32 位 DSN。您需要在正确的 ODBC 驱动程序管理器中创建 DSN。如果您需要在 64 位 Windows 上创建 32 位 DSN，您可以通过运行 SysWOW64 文件夹中的 ODBCADM32.EXE 来实现。

# javascript - 使用 Javascript 将特定 div 加载到 iFrame 或 div 中

> ID：11624047
> 
> 赞同：0
> 
> 时间：2012-07-24T04:11:59.803
> 
> 标签：javascript, html, css, ajax

对于我正在开发的 Web 应用程序，我需要将 otherPage.html 页面中的特定 div（#id 已知）显示到我的页面 myPage.html 中

这两个页面都托管在同一台服务器上并且是同一个域。

我可以使用 iFrame 或发出 AJAX 请求并在 div 中显示内容。

有没有办法只使用Javascript来做到这一点？如果是，那么任何人都可以帮助我如何实现这一目标。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T04:36:39.970

Look into [jquery load()](http://api.jquery.com/load/) method. Very easy to implement and can accept the id of your target div as an argument.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:55:20.027

我以前在这里[的回答中](https://stackoverflow.com/questions/11461442/jquery-optgroup-element/11462384#11462384)做过这个，这是我的代码：

**HTML：**

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>AJAX Example</title>
    <style type="text/css">
body {
    background: #ccc;
    text-align: center
}
#article {
    padding: 30px;
    margin: 20px;
    text-align: left;
    background: #eee;
    text-shadow: 1px 1px #fff;
    text-shadow: 0 0 3px #fff;
    border-radius: 8px;
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
}
.loading {
    text-transform: uppercase;
    font-size: 15pt;
    text-shadow: 1px 1px #f00, 1px 2px #f00, 2px 2px #f00, 3px 3px #f00;
}
    </style>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
var origText = '';
$(document).ready(init);
function init() {
    origText = $('#article').text();
    $('select').on('change', changed);
}
function changed(e) {
    $('#article').html('<span class="loading">Loading...</span>');
    $('#article').load('article2.php', $.param({0: e.target.value, 1: origText}));
}
    </script>
</head>
<body>
    <h1>AJAX Example</h1>
    <select name="select-choice-8" id="select-choice-nc">
        <option value="">Choose One...</option>
        <optgroup label="News">
            <option value="feature">Feature</option>
            <option value="current">Current</option>
            <option value="research">Research</option>
        </optgroup>
        <optgroup label="Archive">
            <option value="archive">Archive</option>
        </optgroup>
        <optgroup label="Video">
            <option value="video">Video</option>
        </optgroup>
        <optgroup label="Submit">
            <option value="story">Story</option>
            <option value="event">Event</option>
        </optgroup>
    </select>
    <div id="article">Please select an article to view.</div>
</body>
</html> 
```

**PHP：（**文章2.php）

```
<?php
$selected = $_GET[0];
$articles = array(
        '' => $_GET[1],
        'feature' => 'Feature article goes here',
        'current' => '<p>Lorem ipsum dolor sit amet, denique laetare in rei exultant deo, euismod tollam impedit intra tectus Scrutor audire servi. Euro in rei civibus corporis sustinuit virginis piratae apprehendat mecum liberalia revertere in. Accedens est Apollonius in modo genito in. Habet vero cum magna amici invocat manibusque removit benedictus filiae gloriam. Nuntiatur hoc puella ut casus tui ex quae, audiens suis caelo dicit semper coniungere. Nulla famulis unde meae ceroma fronte comico hac civitati mearum. Aureos mercatoris vidisset stabat somnis quidquid es, dabo es est se sed dominum in. Tharsum cuius suam ad te in rei civibus. Sit in rei civibus unde non dum miror diligere quem non potentiae. Ecce adhibitis amor ea communia ei Taliarchum in fuerat est cum autem quod una in rei civibus. Erige me testatur in lucem in deinde duas recitare ex sic ut casus turbata procidit est in modo. Convivium laetatus ait mea Christianis aedificatur ergo Apollonius ut a civitas Conservus mihi Tyrum reverteretur. Zurziaca in lucem exitum atque armata mare demonstrantibus, de tuae meorum defleret ergo est se vero diam ille. Quaere allocutus ait in deinde cupis ei quoque moriatur prostravit. Apollonius non solutionem ascendens sed dominum depressit filia puella est amet coram te princeps age cum magna amici se est Apollonius.</p>
<p>Maria cum autem est cum suam vidit loco in modo ad quia illum decidat quam cara in. Est amet Cur meae ad te ad te princeps ea. Ipsa quod eam in modo invenit nutricis intravit primum gaudet uxoris tibi afferri magistrum. Laetitia filia navem in deinde vero rex Dionysiadi me, cumque autem quod tamen sed eu fides piissimi sibi adsedit. Dianae feminis introeunte instat manu certas parturiens a, cives ego illum Apollonii appropinquat tation ulterius a. Iacentem exaudire Ago publico spectaculum praeberi qui non potentiae.</p>
<p>Nisi se sed quod ait regem adventu nihil, tempor ipsius epulabatur qui dicens unam lacrimae eam ad quia. Perveniunt felicibus oportebat eum in deinde plectrum anni ipsa codicellos pedes egit Apollonius. Possit caput dixit est cum autem Apolloni ex civibus. Purus dum veniens indica enim materiam profusis. Notus ingreditur lavare propter quae. Bene accidentium in lucem exitum atque ut diem obiecti ad per sanctus primum gaudet in deinde cepit roseo. Antioche in lucem concitaverunt in fuerat est se in fuerat se in fuerat accidens quam aniculae morsque nutricem. Sit audivit per te sed haec aliquam inlido laetare in. Ipsa Invitamus me naufragus tabulas morsu tuum abscondere in fuerat eum ego esse haec aliquam. Dona abstulit meis caligine tempestas sabano praeclusoque sponte profundo. Post petiit materia amicis ad quia ei. Tyrus pro quae non solutionem invenisti, primam filia omnes civitatem in deinde duas formis.</p>
<p>Stet consequat Verena est amet coram te in modo invenit ubi diceret sub. Contine inauditas actualitas tuae meorum sic. Deo agili est cum unde non potentiae quem non coepit cognitionis omnium. Mea in deinde cepit roseo ruens sed dominum vidit tam, longa ferri Lorem post iactavit ad per animum est cum. Archistrate accepta quaestionum ut casus tui apparatu! Intuens munus oblitus ait Cumque autem Apolloni codicellos. Nulla certantes non potentiae Apollonium in modo genito in deinde duas recitare. Civitate virginitatis rex ut sua. Tyrio alius est cum obiectum dixit hoc contra suis ut libertatem accipies. Eiusdem ordo quos annorum nostros versi tuam vero diam omni completum respondit. Potest contremiscunt pater in deinde duas horrido in fuerat accidens suos faciam atque bona dei. Patris super audire propter quae ad suis. Erras nisi Apollonius ut sua confusus ait Cumque hoc. Ascendens sed dominum oculos rex.</p>
<p>Quaestiones patre ad per accipere nescio qui enim materiam ad te finis puellam flentem sub dixi die. Sanctae Stranguillionis in deinde plectrum anni ipsa hospes navis famuli dabit. Vini ad suis ut casus homini nocte. Triton testandum ecce habitu in fuerat construeret in deinde duas recitare ex sic. Fige omnium Ephesum peteret sua etiam esse more defuncta ait. Virginem ipsa quod eam ad nomine, valde hinc Dionysiade conspectu meam contra serpentibus. Chaldaeorum in lucem in fuerat, euismod tollam impedit mecum est Apollonius. Re est cum obiectum est in deinde cupis ei sed esse deprecor. Quis nudus solum puella est amet consensit cellula filia navem causa alia vero rex ut casus homini interimat potius aureos. Nubila grata gratias elegisti sibi afflictione magnam miserum Rheni codicellos numquam existimarent ergo est cum magna duobus auro fulgida. Antiochi quidditas tuo quid facilisis ex civibus, scilicet Athenagora mihi cum obiectum aliquip ipsa mihi. Pater unica suae constituit ad suis! Nutricem sum illum in fuerat se vero quo contra suis est Apollonius eius.</p>
<p>Ut sua coniuge rex cum unde ascendit deferunt provoces. Horreo Athenagora eius ad te in lucem genero. Amice suspiciosa mare convivio ubi ait regem consolatus dum est Apollonius eius. Tyri aliquam inlido laetare quod eam in deinde cepit roseo ruens sed. Carissimi deo adiuves finem ibi Neptune reddens pater unica restitutus mancipia in, nec caecatus dum miror puella eius sed haec puella. Aliqua ait Cumque materia effigie scit voluntatem nolunt ac iuro es.</p>
<p>Tyri aliquam inlido laetare in fuerat accidens inquit fidem emam poena Apollonius in lucem in rei completo litus tuos ratio iuvenis. Quantum est cum suam ad quia. Adfertur guttae sapientiae decubuerat age cum magna duobus auro recreari tunc Tharsos princeps coniungitur vestra in fuerat. Alia se ad suis ut diem obiecti. Introivit gubernum defunctam vivum eum istam vero rex cum suam non coepit contingere navis famuli sed eu fugiens laudo in! Ratione omnes Hellenicus dixisset perrexisset pueris plus plorantes abscederem assignato ipsum dolore me missam canticis in fuerat accidens inquit merui. Solum ei sed quod ait est se sed eu. Suum quibus ut sua confusus eos cui Tharsia adulescens qui auri eos in fuerat. Omnia bono quomodo possum es ego esse ait Cumque hoc puella mihi.</p>',
        'research' => 'You selected <code>research</code>',
        'archive' => 'Archives',
        'video' => '<div style="font-size:48pt;font-weight:bold;font-style:italic;background:red;text-align:center;padding:20px;margin:10px;border-radius:20px;-moz-border-radius:20px;-webkit-border-radius:20px;">Video</div>',
        'story' => 'Submit a story',
        'event' => 'Submit an event'
    );
$article = $articles[$selected];
echo $article;
?> 
```

# python - 使用 Flask，尝试在更新 mongo 记录后让 AJAX 更新跨度，但它正在打开一个新页面

> ID：11624050
> 
> 赞同：2
> 
> 时间：2012-07-24T04:12:16.547
> 
> 标签：python, mongodb, jquery, flask

感觉就像我在这里遇到了一些相当简单的事情。

我不了解 AJAX 和 Flask。

我有一个项目，我在浏览器中显示 mongodb 记录，它一直运行良好。

我为用户添加了增加记录投票的功能；如果他们喜欢，请投票。但最初我用新的投票刷新了整个页面，使用重定向，这是笨拙的。所以我试图让 AJAX 将数据发送到 mongodb 记录，然后更新我希望投票出现的跨度，而无需重新加载整个页面。

问题是，我正在进行的设置，虽然仍在更新记录，但现在正在加载一个新页面，其中的 HTML 我只想返回到投票记录应该是的跨度（也就是说，它正在加载一个只有单词的新页面其中的“测试”（我当前返回的测试值））。

jQuery（我正在使用的库）加载正常，没有其他问题（据我所知）。

我在这里有相关的 HTML 和 JS：

```
<!-- All Standard HTML up here, removed for simplicity -->

<script>

  $('#vote_link').bind('click', function(e){
     e.preventDefault();
     var url = $(this).attr('href');
     $('#vote_tally').load(url);

  });

</script>

<a href='/vote_up/{{ item._id }}' id='vote_link'>Vote for Me!</a><br>
Likes: <span id='vote_tally'>{{ item.votes }}</span>

<!-- All Standard HTML down here, removed for simplicity --> 
```

蟒蛇在这里：

```
from flask import Flask, render_template, request, redirect, flash, jsonify
#from mongokit import Connection, Document
#from flask.ext.pymongo import PyMongo
from pymongo import Connection#, json_util
#from pymongo.objectid import ObjectId #this is deprecated
import bson.objectid

'''my pymongo connection - removed for simplicity'''

'''bunch of other routes - also removed for same reason'''

#increment a vote
@app.route('/vote_up/<this_record>')
def vote_up(this_record):

  vandalisms.update({'_id':bson.objectid.ObjectId(this_record)}, 
            {"$inc" : { "votes": 1 }}, upsert=True)

  '''
  also trying to return value for votes field from mongo record, but one step at a 
  time here
  '''
  #result = vandalisms.find({'_id':bson.objectid.ObjectId(this_record)}, {'votes':1})

  result = 'test'

  return result 
```

我也无法弄清楚如何将指定 mongodb 记录的个人投票值返回给浏览器，即使使用 jsonify （返回 {"votes":'_id'}，但这是另一个问题。希望有人可以帮助我在这方面了解如何使用 Flask 使 AJAX 为我工作。

提前致谢，

**编辑-24Jul2012-2:27PM CST：**

我怀疑 jQuery 甚至没有激活。它似乎是根据链接的 href 属性加载新页面，因此`e.prevenDefault();`当它没有运行时没有用。此外，`alert('I have been clicked');`当点击事件发生时，永远不会运行。再次，jQuery 被加载，但点击事件没有激活 jQuery，我不知道为什么没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:29:41.827

我的猜测（根据您的编辑）是您在页面上有多个 ID 为的元素`vote_link`- 这在 HTML 中是不允许的（ID 属性在整个文档中必须是唯一的）。如果您想让多个链接共享相同的行为，请改用一个类（`$(".vote_link")`例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:02:12.250

基本上，*AJAX*的工作方式是服务器使用 XML 或 JSON 进行回复。

在这种情况下， *flask 中的**jsonify*函数将响应带有以下 HTTP 标头字段的消息：

 *```
Content-type: application/json 
```

如果您需要接收的不仅仅是数字或一些文本，这是为了让浏览器和 JavaScript 理解语法。

因此，在 Flask 上使用 jsonify 作为文档示例，然后在 JavaScript 端使用 $.getJSON() 或 $.ajax()。

[http://flask.pocoo.org/docs/patterns/jquery/#json-view-functions](http://flask.pocoo.org/docs/patterns/jquery/#json-view-functions)

[https://github.com/mitsuhiko/flask/tree/master/examples/jqueryexample](https://github.com/mitsuhiko/flask/tree/master/examples/jqueryexample)*

# python - 来自 BaseModelFormset 中自定义 clean() 方法的 KeyError

> ID：11624056
> 
> 赞同：0
> 
> 时间：2012-07-24T04:12:57.250
> 
> 标签：python, django, django-models, django-forms

我已经阅读了大约 100 倍的 Forms 和 Formset Django 文档。为了清楚起见，这可能是我第一次使用 super() 或尝试从另一个类重载/继承（对我来说很重要。）

发生了什么？我正在视图中制作 django-model-formset 并将其传递给模板。表单集继承的模型恰好是多对多关系。我希望这些关系是唯一的，因此如果我的用户正在创建一个表单并且他们不小心为 ManyToMany 选择了相同的对象，我希望它验证失败。

我相信我已经正确地编写了这个自定义的“BaseModelFormSet”（通过文档），但我得到了一个 KeyError。它告诉我它找不到cleaned_data['tech'] 并且我在下面评论的行中的'tech' 一词上得到了KeyError。

该模型：

```
class Tech_Onsite(models.Model):
    tech = models.ForeignKey(User)
    ticket = models.ForeignKey(Ticket)
    in_time = models.DateTimeField(blank=False)
    out_time = models.DateTimeField(blank=False)

    def total_time(self):
        return self.out_time - self.in_time 
```

自定义的 BaseModelFormSet：

```
from django.forms.models import BaseModelFormSet
from django.core.exceptions import ValidationError

class BaseTechOnsiteFormset(BaseModelFormSet):
    def clean(self):

        """ Checks to make sure there are unique techs present """

        super(BaseTechOnsiteFormset, self).clean()

        if any(self.errors):
            # Don't bother validating enless the rest of the form is valid
            return

        techs_present = []

        for form in self.forms:
            tech = form.cleaned_data['tech']  ## KeyError: 'tech' <- 

            if tech in techs_present:
                raise ValidationError("You cannot input multiple times for the same technician.  Please make sure you did not select the same technician twice.")
            techs_present.append(tech) 
```

观点：（总结）

```
## I am instantiating my view with POST data:
tech_onsite_form = tech_onsite_formset(request.POST, request.FILES)
## I am receiving an error when the script reaches:
if tech_onsite_form.is_valid():
    ## blah blah blah.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:28:46.427

clean 方法不是缺少返回语句吗？如果我没记错的话，它应该总是返回cleaned_data。超级调用也返回cleaned_data，所以你应该在那里分配它。

```
def clean(self):
    cleaned_data = super(BaseTechOnsiteFormset, self).clean()
    # use cleaned_data from here to validate your form
    return cleaned_data 
```

请参阅：[django 文档](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:40:04.030

我使用 Django shell 手动调用表单。我发现我正在对视图返回的所有表单执行 clean() 方法。有2个填写了数据，2个空白。当我的 clean() 方法遍历它们时，它在到达第一个空白时返回了 KeyError。

我通过使用 try 语句并传递 KeyErrors 解决了我的问题。

# dynamics-crm - MS CRM 2011 部署自动化工具

> ID：11624059
> 
> 赞同：4
> 
> 时间：2012-07-24T04:13:09.250
> 
> 标签：dynamics-crm, dynamics-crm-2011

我希望在不同环境之间自动化 CRM 的部署过程，例如开发环境、测试环境和 UAT。我想知道市场上是否有现有的工具可以为我自动部署？如果否，是否可以在不同环境之间实现 CRM 部署自动化，这样做的最佳实践是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T11:29:32.133

在我工作的地方，我们目前正在处理完全相同的问题。我最初花了相当长的时间寻找可以帮助我们的现成产品，但我没有发现任何有希望的东西。因此，我们自己承担了这项任务。

微软的一些人就这个主题制作了一份简短的“白皮书”，我觉得这很有帮助。可在此处找到[从开发到测试和生产环境部署 Microsoft Dynamics CRM 2011 和 CRM Online 解决方案](http://www.microsoft.com/en-us/download/details.aspx?id=27824)。

我不会声称我们正在使用“最佳”实践，但我们选择尝试在 PowerShell 中或通过我们自己的 PS 模块中基于 .net 的 CmdLets 编写所有脚本。CRM 服务器带有一个 PowerShell 管理单元，其中包含一些用于创建/删除组织的基本功能，但在实际“部署”CRM 定制、配置数据、用户等方面，您或多或少是靠自己的。

知道您选择哪种方法（如果有的话）会很有趣？如果您有任何具体问题，请随时提问！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T06:28:31.750

这个怎么样？

xRM [CI 框架](http://waelhamze.com/2013/08/13/xrm-ci-framework/)是一组工具，可让您快速轻松地为您的 Dynamics CRM 解决方案实施持续集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T20:35:40.957

PowerShell 和 XRMCI 框架将很好地为您提供解决方案部署，缺点是无法添加到解决方案中的常规或配置数据（或当前在 CRM 2015 中存在错误的解决方案项目，例如案例创建规则、SLA 项目等。 ）。在这种情况下，我和我的客户创建了 powershell C# CmdLets，它使用 SDK 和 API 创建常备数据，例如用户、团队、成员资格、队列、案例创建规则（尽管不受支持，但 API 确实允许），并配置邮箱等

因此，结合使用 XRMCI 框架、C# 和 PowerShell 可以自动将一个环境部署到下一个环境。关键是要慢慢来，手动执行脚本以开始并在流程中建立信任，调整和添加更多元素。一旦获得这种信任，就可以将其与 TFS 集成为 CI/CD 流程。

至于最佳实践，我自己的研究表明，这仍然是一个“敢于挑战”的领域，没有真正的“最佳实践”，迟早会有 Chef、Puppet、Octopus 和 Microsoft（与 DSC）等玩家做出贡献，但现在....

# php - PHP中的复选框

> ID：11624060
> 
> 赞同：0
> 
> 时间：2012-07-24T04:13:18.770
> 
> 标签：php

在下面的代码中，CheckBox 没有出现在表格的第一行。任何人都可以帮助我..

rgds，西罗扬

```
<body>
<form method="post" action="<?php  echo $_SERVER['PHP_SELF'];?>"

<?php
$dbc=mysqli_connect("localhost","root","","elvis_store") or die("Error Connecting to Mysql Database");

$query="SELECT * FROM email_list";
$result=mysqli_query($dbc,$query)or die("Query Syntaxt is Incorrect");

while($row=mysqli_fetch_array($result)){

    echo '<input type="checkbox" value="'.$row['id'].'" name="todelete[]"/>';
    echo $row['first_name']." ".$row['last_name']." ".$row['email'];
    echo "<br/>";
}
mysqli_close($dbc);
?>

<input type="submit" name"submit" value="Remove"/>
</body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T04:22:15.380

您的`form`标签未在第一行关闭

```
<form method="post" action="<?php  echo $_SERVER['PHP_SELF'];?>" 
```

它应该是

```
<form method="post" action="<?php  echo $_SERVER['PHP_SELF'];?>"> 
```

# facebook-graph-api - Facebook Graph API - 将远程图像发布到相册

> ID：11624063
> 
> 赞同：1
> 
> 时间：2012-07-24T04:13:46.127
> 
> 标签：facebook-graph-api, curl

目前我必须在服务器上下载图像并像这样发布它们：

```
$photo = array(
    'message'  => 'Status',
    'source'   => '@/full/path/of/the/image.png'
);

$response = $fb->api('/'.$album.'/photos', 'POST', $photo); 
```

我在后端使用 curl 来发布这个请求，它就像一个魅力。我想知道是否可以直接发布远程图像而不是下载本地副本？

我试图做这样的事情：

```
$photo = array(
    'message'  => 'Status',
    'source'   => file_get_contents('http://www.domain.com/image.png')
);

$response = $fb->api('/'.$album.'/photos', 'POST', $photo); 
```

但我从图形 API 中得到了一个例外：“（#324）需要上传文件”

`$data`当您不发送在发送数据数组（是数组）时自动设置的多部分/数据标头时，似乎会发生这种情况。

```
curl_setopt($ch, CURLOPT_POSTFIELDS, $data); 
```

所以我怀疑是否可以发布远程图像。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:51:13.537

# ajax - 在 AngularJS 中重写 jQuery Ajax 调用

> ID：11624067
> 
> 赞同：5
> 
> 时间：2012-07-24T04:14:19.793
> 
> 标签：ajax, jquery, angularjs

是否有对这个 jQuery ajax POST 的 AngularJS 等效调用，使用`contentType`and `setRequestHeader`？

```
$.ajax({
    url: "http://localhost/songs",
    type: "POST",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    beforeSend: function (xhr) {
        xhr.setRequestHeader("SOAPAction", "http://schemas.microsoft.com/sharepoint/soap/UpdateListItems");
    },
    success: function(data){
        console.log(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T05:05:07.607

您可能想要使用[$http](http://docs.angularjs.org/api/ng.$http)或[$resource](http://docs.angularjs.org/api/ngResource.$resource)服务。在 $http 文档中，您可以看到**设置 HTTP 标头**以设置 SOAPAction 的部分，默认内容类型将已设置为 json（尽管您也应该能够覆盖它）。

这可能会让你开始，我有兴趣看到其他答案以获得更好的方式，因为这似乎是有限的。

```
var module = angular.module('myApp', []);

module.config(function ($httpProvider) {
    $httpProvider.defaults.headers.post['SOAPAction'] = 'http://schemas.microsoft.com/sharepoint/soap/UpdateListItems';
});

function myController($http) {
    var data = { 'value1': 1, 'value2': 2 };

    $http.post('/songs', data).success(function (data) {
        console.log(data);
    });
} 
```

基于[此线程](https://groups.google.com/d/topic/angular/X00TD-QnGCc/discussion)，我不相信您可以为每个调用设置不同的标头，但看起来$resource 服务可能会[发生更改以允许它。](https://github.com/angular/angular.js/pull/965)

**更新：**一定在文档中错过了它，但您绝对可以使用每个呼叫设置不同的操作，`$http`如下[所示](https://stackoverflow.com/questions/11876777/angularjs-set-http-header-for-one-request)：

```
var data = { 'value1': 1, 'value2': 2 };

$http.post('/songs', data, {headers: {'SOAPActions': 'http://schemas.microsoft.com/sharepoint/soap/UpdateListItems'}})
    .success(function (data) {
        console.log(data);
    }); 
```

# php - jQuery 可拖动函数和 while 循环

> ID：11624068
> 
> 赞同：0
> 
> 时间：2012-07-24T04:14:52.697
> 
> 标签：php, jquery

我创建了一个简单的 while 循环，可以生成文件夹中的随机图像。我希望能够将这些图像拖到我网页上的任何位置。我使用了 jQuery 的可拖动功能，但它不起作用。我的问题是这是否有效？这是简化的代码。

```
<script>
    $(document).ready(function(){
        $(function() 
        {
            $("#draggable").draggable();
        });
    });
</script>

<?php
$num_dresses = dress_count ();

$i = 0;

while ($i < 5)
{   
    $rand_id = rand(1, $num_dresses);
    $dress_feed_data = clothing_data($rand_id, 'file_name');    
    $new_file_name = html_entity_decode($dress_feed_data['file_name']); 

    if (file_exists('fashion_images/' . $new_file_name))
    {
?>

<div id="draggable" class="ui-widget-content">
<img src=" fashion_images/<?php echo $new_file_name;?> " width="70" height="70"/>
</div>

<?php } 
    $i++;
}
?> 
```

这是被视为页面源的代码。我删除了与问题无关的任何内容。

```
<?xml version="1.0"?>
<html>
    <head>
        <script>
        $(document).ready(function(){
            $(function() 
            {
                $(".ui-widget-content").draggable();
            });
        });
        </script>
        <style>
            #draggable { width: 50px; height: 50px; padding: 0.5em; }
        </style>
    </head>
    <body>
        <div class="ui-widget-content">
            <img src=" fashion_images/blouse_belk's_0 " width="70" height="70"/>
        </div>
        <div class="ui-widget-content">
            <img src=" fashion_images/red|nail|polish_opi_0 " width="70" height="70"/>
        </div>
        <div class="ui-widget-content">
            <img src=" fashion_images/brown|pants_community|store_0 " width="70" height="70"/>
        </div>
        <div class="ui-widget-content">
            <img src=" fashion_images/jeans_larry_0 " width="70" height="70"/>
        </div>
        <div class="ui-widget-content">
            <img src=" fashion_images/pepsi|tshirt_target_1 " width="70" height="70"/>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:22:39.347

通常，在页面上使用相同 id 的多个元素不是最好的主意

尝试做这样的事情也许会有所帮助

```
<div class="ui-widget-content"> 
```

并按类获取元素

```
$(".ui-widget-content").draggable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:48:51.420

您的源代码不包括 jquery 插件。尝试将其放在 de`</head>`标签之前

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T04:55:12.053

您应该包括[jquery](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)和[jquery ui](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js)。

类似于您的[代码对我有用](http://jsfiddle.net/zxBDR/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T06:44:22.310

在这里，我已经为上述问题完成了完整的垃圾箱。

**演示** [http://codebins.com/bin/4ldqp9u](http://codebins.com/bin/4ldqp9u)

要解决上述可拖动问题，您必须首先在标头中包含最新的 jquery.js 和 jquery-ui.js（jquery 插件）java 脚本文件，并在所有具有相同类的选择器（元素）上应用可拖动功能，例如“ui-widget- content”，因为如果发生这种情况，我们不应该在多个元素上设置相同的 id，那么 jQuery 将无法工作，因为它无法识别正确的元素并仅在第一个元素上应用函数。

**HTML：**

```
<div class="ui-widget-content">
  <img src="http://www3.pictures.fp.zimbio.com/Paris+Fashion+Week+Chanel+Spring+Summer+2009+0IojzkQwqGlt.jpg" width="70" height="70"/>
</div>
<div class="ui-widget-content">
  <img src="http://www.fashion-doll-guide.com/images/2010-hallmark-barbie-christmas-ornaments-3.jpg" width="70" height="70"/>
</div>
<div class="ui-widget-content">
  <img src="http://www.fashion-doll-guide.com/images/Holiday-Barbie-Dolls.jpg" width="70" height="70"/>
</div>
<div class="ui-widget-content">
  <img src="http://www1.pictures.stylebistro.com/gi/KW+Kanye+West+Runway+Paris+Fashion+Week+Spring+rq5fOR7SZfjt.jpg" width="70" height="70"/>
</div>
<div class="ui-widget-content">
  <img src="http://www.theuniuni.com/media/catalog/product/cache/1/small_image/70x70/9df78eab33525d08d6e5fb8d27136e95/f/a/fashion-waterproof-platform-mature-horse-fur-01.jpg" width="70" height="70"/>
</div> 
```

**CSS：**

```
.ui-widget-content{
  display:inline-block;
  cursor:move;
}
.ui-widget-content img{
  border:1px solid #112266;
} 
```

**jQuery：**

```
$(function() {
    $(".ui-widget-content").draggable();
}); 
```

# sql - SQLite - 如何实现各种搜索功能

> ID：11624072
> 
> 赞同：1
> 
> 时间：2012-07-24T04:15:13.630
> 
> 标签：sql, sqlite, web-sql

我有一个带有 2 个表的 SQLite 数据库。

第一个称为 WORDS，其行看起来像： (id, word)

第二个称为 WORDS2SECTION，其行看起来像： (id, sectionid)

书中的每个单词都列在 WORDS 中，并有一个对应的 id。第二个表是一堆将每个 id（象征一个词）连接到书的特定部分的行。

我希望能够输入一堆不同的单词并找到包含所有这些单词的 sectionid 编号。

如果只有一个词，那我很好：

```
SELECT sectionid JOIN WORDS WHERE word = '%hello%' 
```

我的问题是，如何扩展它以找到包含所有输入单词列表的 sectionid。

我试过这个：

```
SELECT sectionid JOIN WORDS ON WORDS.id = WORDS2SECTION.id WHERE word = '%hello%' IN (SELECT sectionid JOIN WORDS ON WORDS.id = WORDS2SECTION.id WHERE word = '%word2%') 
```

但这似乎不起作用。有任何想法吗？我已经搜索了一段时间试图找到解决方案，但我还没有找到。不过，我承认我是 SQL 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T04:25:58.830

```
select sectionid
  from WORDS2SECTION
 where id in (select id 
                       from WORDS
                      where word like '%hellow%'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:11:49.410

分组方式`sectionid`：

```
select sectionid, count(sectionid)
from WORDS2SECTION
where id in (select id
    from WORDS
    where word in ('hello', 'foo', 'bar')
)
group by sectionid 
```

如果计数与单词数相同，则您的命中率很高。如果数字较低，则找到了一些单词。这样，您就可以对结果进行加权。

使用`having count(sectionid) > X`，您可以将结果限制为匹配至少 X 个匹配项的结果。

使用`order by count(sectionid) desc`将首先为您提供最佳匹配。

# php - 如何知道twitter用户是否登录？

> ID：11624074
> 
> 赞同：-2
> 
> 时间：2012-07-24T04:15:18.257
> 
> 标签：php, javascript, ajax, apache

我目前正在开发与 twitter 活动相关的东西，我首先想确认用户是否使用他们的任何 api 或其他东西登录了 twitter.com，这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:19:48.857

无法通过 twitter 的 API 检查来自世界各地的任意用户当前是否已登录（意味着他们有一个活动的 OAuth 令牌或未过期的 cookie）。

# javascript - 重复 setTimeout

> ID：11624078
> 
> 赞同：56
> 
> 时间：2012-07-24T04:15:32.917
> 
> 标签：javascript, settimeout

我试图`setTimeout`每 10 秒重复一次。我知道`setTimeout`默认情况下只等待然后执行一次操作。我怎样才能重复这个过程？

```
setTimeout(function() {
  setTimeout(function() {
    console.log("10 seconds");
  }, 10000);
}, 10000); 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-24T04:16:57.770

也许你应该使用[`setInterval()`](http://www.w3schools.com/jsref/met_win_setinterval.asp)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-07-24T04:21:43.520

`setInterval()`可能是您正在寻找的东西，但是如果您想通过以下方式获得相同的效果`setTimeout()`：

```
function doSomething() {
    console.log("10 seconds");
    setTimeout(doSomething, 10000);
}

setTimeout(doSomething, 10000); 
```

或者，如果您不想声明单独的函数并想坚持使用函数表达式，则需要将其设为*命名*函数表达式：

```
setTimeout(function doSomething() {
    console.log("10 seconds");
    setTimeout(doSomething, 10000);
}, 10000); 
```

（或者如果您不介意使用已弃用的语言功能，请使用[arguments.callee 。）](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments/callee)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-24T05:36:46.533

根据我的说法， setInterval() 是您情况下的最佳方法。
这是一些代码：

```
 setInterval(function() {

//your code

}, 10000); 
// you can change your delay by changing this value "10000". 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-07-24T04:35:57.217

Unlike the answers provided by @nnnnnn and @uzyn I discourage you from making use of `setInterval` for reasons elaborated in the following [answer](https://stackoverflow.com/a/11521360/783743 "javascript - setTimeOut() or setInterval() . 4 methods to apply same thing. which is best? - Stack Overflow"). Instead make use of the following Delta Timing script:

```
function DeltaTimer(render, interval) {
    var timeout;
    var lastTime;

    this.start = start;
    this.stop = stop;

    function start() {
        timeout = setTimeout(loop, 0);
        lastTime = + new Date;
        return lastTime;
    }

    function stop() {
        clearTimeout(timeout);
        return lastTime;
    }

    function loop() {
        var thisTime = + new Date;
        var deltaTime = thisTime - lastTime;
        var delay = Math.max(interval - deltaTime, 0);
        timeout = setTimeout(loop, delay);
        lastTime = thisTime + delay;
        render(thisTime);
    }
} 
```

The above script runs the given `render` function as close as possible to the specified `interval`, and to answer your question it makes use of `setTimeout` to repeat a process. In your case you may do something as follows:

```
var timer = new DeltaTimer(function (time) {
    console.log("10 seconds");
}, 10000);

var start = timer.start(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-25T01:17:07.797

```
const myFunction = () => {
        setTimeout(() => {
            document.getElementById('demo').innerHTML = Date();
            myFunction();
        }, 10000);
    } 
```

最简单但效率不高的方法！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T06:45:58.860

这是一个使用 setTimeout 的函数，它试图调用自己尽可能接近定期间隔。如果你观察输出，你可以看到时间漂移和被重置。

```
<script type="text/javascript">

function Timer(fn, interval) {
  this.fn = fn;
  this.interval = interval;
}

Timer.prototype.run = function() {

    var timer = this;
    var timeDiff = this.interval;
    var now = new Date();  // Date.now is not supported by IE 8
    var newInterval;

    // Only run if all is good
    if (typeof timer.interval != 'undefined' && timer.fn) {

      // Don't do this on the first run
      if (timer.lastTime) {
        timeDiff = now - timer.lastTime;
      }
      timer.lastTime = now;

      // Adjust the interval
      newInterval = 2 * timer.interval - timeDiff;

      // Do it
      timer.fn();

      // Call function again, setting its this correctly
      timer.timeout = setTimeout(function(){timer.run()}, newInterval);
  }
}

var t = new Timer(function() {
  var d = new Date();
  document.getElementById('msg').innerHTML = d + ' : ' + d.getMilliseconds();
}, 1000);

window.onload = function() {
  t.run();
};
</script>

<span id="msg"></span> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-14T11:57:20.613

使用 jQuery，您可以执行以下操作：

```
function updatePage() {

var interval = setTimeout(updatePage, 10000); // 10' Seconds

    $('a[href]').click(function() {
      $(this).data('clicked', true);
      clearInterval(interval); // Clears Upon Clicking any href Link
      console.log('Interval Cleared!');
    });
   // REPLACE 'YOUR_FUNCTION_NAME' function you would like to execute
    setTimeout(YOUR_FUNCTION_NAME, 500);

} // Function updatePage close syntax

updatePage(); // call the function again.
```

# netbeans - Java 结果：143

> ID：11624079
> 
> 赞同：0
> 
> 时间：2012-07-24T04:15:39.533
> 
> 标签：netbeans, ant, compiler-errors, java

这个输出是什么意思？

```
init:
Deleting: /home/thufir/NetBeansProjects/USENET/build/built-jar.properties
deps-jar:
Updating property file: /home/thufir/NetBeansProjects/USENET/build/built-jar.properties
compile:
run:
Java Result: 143
BUILD SUCCESSFUL (total time: 6 minutes 7 seconds) 
```

我找不到太多关于“Java Result”的含义。在这种情况下，程序挂起，然后我杀死了 Java，然后在重新启动 Netbeans 后，我看到了这个输出。

相关问题：[what-does-java-result-means](https://stackoverflow.com/questions/3170762/what-does-java-result-means)

这是蚂蚁的吗？网豆？JVM？大概是您可以查找的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T04:21:13.193

143 是在您的 ant 脚本（可能是另一个 JVM 或本机进程）的运行任务中启动的进程接收到的 SIGTERM OS 信号的退出代码。在这种情况下，它是由于调用 kill 触发的。

# php - 带有异常的 REGEX 匹配（用于 CSS）

> ID：11624080
> 
> 赞同：0
> 
> 时间：2012-07-24T04:15:50.587
> 
> 标签：php, regex, preg-replace

我正在尝试用 PHP 替换一些 CSS 样式。

我想`.myclass`在所有的前面`#`和`.`后面添加，但不是那些以';'`,` 开头的行 `background`在末尾。

到目前为止，我的正则表达式不起作用。任何帮助，将不胜感激。

这是我的PHP：

```
$patterns = '/^[^background][,]\s*((#|[.])[^;]+)/m';
$replacements = ', .myclass \1';
$str= preg_replace($patterns,$replacements, $string, -1); 
```

这是原始的CSS：

```
#class1, #id1, #id2{
    margin:0 0 1.5em 0;
    font-size:2.2em;
    font-family:Century Schoolbook Bold;
}
.class2{
    background:#fff, #111, #ccc;
    font:1.1em;
    font-family:Century Schoolbook;
} 
```

这是所需的 CSS：

```
#class1, .myclass #id1, .myclass #id2{
        margin:0 0 1.5em 0;
        font-size:2.2em;
        font-family:Century Schoolbook Bold;
    }
    .class2{
            background:#fff, #111, #ccc;
        font:1.1em;
        font-family:Century Schoolbook;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T04:28:44.253

[blah] 是一个字符类，这意味着它将匹配任何这些字母；所以 [^background] 表示匹配该单词中的任何字符。同样，您不需要 char 类来匹配单个字符，例如逗号。

编辑：由于 php 不支持可变长度后视，循环遍历每一行，并跳过以背景开头的那些：

```
foreach($lines as $line){
   if(preg_match("/^\s*background.+\;$/",$line) == 0)
   {
      array_push($new, preg_replace("/,\s+#/",", .myclass ",$line));
   }
   else
   {
      array_push($new,$line);
   }
} 
```

或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:36:37.870

我想用一个正则表达式不可能解决你的任务。您需要可变长度的后视断言来解决它并且它们没有实现。但如果是，解决方案将如下所示：

```
/(?<!background:.*)(#[a-zA-Z_0-9]*)/ 
```

这里的问题在于`(?<!background:.*)`. 你说`.*`，这意味着这个断言可以有任意长度。它将不再起作用。

更简单的解决方案是将任务分成两部分。

1.  检查`background`内部的线路。
2.  如果没有`background`，运行`preg_replace`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T04:56:17.587

“`.myclass`在 '#' 和 ',' 前面添加，仅在逗号之后” --> 所以你想`.myclass`在`,`and之间添加`#`？

即每当你看到`, #`你想要它是`, .myclass #`？

而且我猜您只想影响定义 CSS 类的行（这就是您 exclude 的原因`background: ...`）。

在这种情况下，我建议以下标准：

“每当您看到`,[space]#`时，`, .myclass #` **仅当**发生这种情况的行以 .**结尾`{`**时才将其转为。” （或者也许“仅当发生这种情况的行不以`;`”结尾时）。

这取决于这样一个事实，即当您制作 CSS 选择器时，您会以 a 结束行，`{`而这些是您希望影响的唯一行。

然后我建议更换正则表达式：

```
/, *#(?=.+\{ *$)/m 
```

和 ：

```
', .myclass #' 
```

这是如何工作的：

```
, *#    : "find a comma followed by 0 or more spaces and then a hash symbol,
(?=     : FOLLOWED BY:
  .+    : the rest of the line PLUS
  \{ *$): an opening curly bracket at the end of the line (possibly spaces between this and the end of the line) 
```

这`/m`意味着 if`$string`包含新行，`$`匹配行的结尾（而不是整个字符串的结尾`$string`）。

在微调正则表达式方面，在[这里玩一下（即](http://regexr.com?31k9b)*先*验证您的正则表达式是否有效，*然后*在 PHP 中尝试，这样如果您有任何问题，您就会知道是正则表达式问题还是 PHP 问题）。

# node.js - 将 mongodb 文档绑定到 node.js html 页面的最佳方法是什么

> ID：11624081
> 
> 赞同：0
> 
> 时间：2012-07-24T04:15:53.600
> 
> 标签：node.js, mongodb, express, mongoose, pug

过去，在我的 PHP / Rails - MYSQL 应用程序中，我使用表记录的唯一 ID 来跟踪 html 文件中的记录。

所以我会跟踪如何删除这样显示的记录（15 是记录的 ID）：

```
<a href="/profile/delete/15">Delete this record</a> 
```

所以现在我正在使用 MongoDB。我尝试了相同的方法，但 objectID ._id 属性似乎是一个我不能方便使用的 loooong 字节字符串。

将视图中的链接绑定到记录（用于删除或其他目的或其他目的）的最明智的方法是什么？

如果答案是为集合中的每个文档创建一个唯一的新 ID，那么生成这些唯一 ID 的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:00:04.890

您可以使用计数器而不是[ObjectID](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-SequenceNumbers)

但这可能会在您删除前一个文档后插入新文档时产生问题。[有关使用 Node.js 和 MongoDB](http://bravenewmethod.wordpress.com/2012/04/29/cached-sequential-unique-identifiers-with-node-js-and-mongodb/)的顺序唯一标识符的更多详细信息，请参阅此博客文章。

或者您可以使用 ObjectID 的时间戳部分：

```
objectId.getTimestamp().toString() 
```

[请参阅节点 objectid 文档](http://mongodb.github.com/node-mongodb-native/api-bson-generated/objectid.html#gettimestamp)

# ios - 在当前用户位置放置 pin iphone mkmapview

> ID：11624083
> 
> 赞同：0
> 
> 时间：2012-07-24T04:16:46.423
> 
> 标签：ios, mkmapview, coordinates

好的，这是我尝试使用 CLLoactionManager

```
- (void)viewDidLoad {

    [super viewDidLoad];
    mapView=[[MKMapView alloc] initWithFrame:self.view.frame];
    //mapView.showsUserLocation=TRUE;
    mapView.delegate=self;
    [self.view insertSubview:mapView atIndex:0];

    CLLocationManager *locationManager=[[CLLocationManager alloc] init];
    locationManager.delegate=self;
    locationManager.desiredAccuracy=kCLLocationAccuracyNearestTenMeters;

    [locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    mStoreLocationButton.hidden=FALSE;
    location=newLocation.coordinate;
    //One location is obtained.. just zoom to that location

    MKCoordinateRegion region;
    region.center=location;
    MKCoordinateSpan span;
    span.latitudeDelta=0.01;
    span.longitudeDelta=0.01;
    region.span=span;

    [mapView setRegion:region animated:TRUE];    
} 
```

我的问题是这`[locationManager startUpdatingLocation];`似乎没有触发下一个方法。我错过了什么？我试过在第二种方法中设置断点，但它们永远不会捕获。显然它没有被使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:01:18.830

您应该考虑使用 CLLocationManager 来获取当前位置，以便为您的 MKMapView 提供正确的坐标。

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];
MKMapView *map = [[MKMapView alloc] init];

[locationManager startUpdatingLocation];

CLLocationCoordinate2D _coordinate = locationManager.location.coordinate;
MKCoordinateRegion extentsRegion = MKCoordinateRegionMakeWithDistance(_coordinate, 800, 800); 

[map setRegion:extentsRegion animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:35:00.490

[这](https://stackoverflow.com/questions/1917383/how-do-i-drop-a-pin-with-mapkit)看起来是一个不错的起点。为了放下大头针，您需要知道坐标。使用`- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation`将帮助您获取用户的位置，以便您可以创建一个`MKAnnotation`和`MKPinAnnotationViews`. 一旦你开始，它就非常简单。

# drupal - Drupal 7 安全实施

> ID：11624086
> 
> 赞同：2
> 
> 时间：2012-07-24T04:17:04.270
> 
> 标签：drupal, drupal-7, security

我有一个安装 Drupal 的 hostgator 网站。直到上周末它都工作得很好。我主要是 .net 开发人员，不确定这个开源应用程序的配置。

最近，我注意到创建了大量以前从未登录过的用户帐户。所以，在设置了谷歌分析之后，我确定我的网站被黑了。我做出这个决定是因为大部分流量和用户流量来自俄罗斯、塞尔维亚和罗马尼亚，黑客的天堂！

我意识到我的网站不安全。所以现在我将站点置于维护模式，卸载现有的 Drupal 7，并安装一个新的安装。现在很新鲜，我的任务是找到一些好的安全实践。

我想知道除[这些](http://drupal.org/security/secure-configuration)之外我还可以实施哪些安全措施。

另外，我将如何连接到我网站的命令行来更改文件权限设置？目前，我正在使用 Filezilla 并右键单击以更改属性。

谢谢，并为冗长的问题道歉。

PS 这是我的[网站](http://techiequickie.com)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:39:34.703

Hostgator 提供[SSH 访问](http://support.hostgator.com/articles/getting-started/how-do-i-get-and-use-ssh-access)。使用[WinSCP](http://winscp.net/eng/index.php)等工具传输文件，使用[PuTTy](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)访问命令行。获得命令行访问权限后，您将有望[在 Hostgator 上安装 Drush](http://christophershumate.com/blog/how-install-drush-hostgator)。[Drush](http://drupal.org/project/drush)将帮助您使用命令行进行许多管理工作，强烈推荐使用。由于您是 .Net 开发人员，我假设您可能正在使用 Windows 进行开发。好消息是您也可以在 Windows 上安装 Drush。

你确定你的网站真的被黑了吗？因为，如果您进入帐户设置页面 (http://your-site/admin/config/people/accounts) 并查看**谁可以注册帐户？**，您将在那里看到三个选项。默认为“访客可以创建帐户”。如果您不将此设置更改为其他设置，您的新站点将再次面临同样的问题。否则，您可以选择选项**在访问者创建帐户时要求电子邮件验证**。

减少在 Drupal 站点上创建帐户的垃圾邮件发送者数量的另一种方法是安装[CAPTCHA](http://drupal.org/project/captcha/)或[reCAPTCHA](http://drupal.org/project/recaptcha)模块并将其配置为在用户创建帐户时向他们显示挑战。这将阻止许多垃圾邮件发送者。您还可以使用 Apache .htaccess 文件[阻止特定的 IP范围。](http://blamcast.net/articles/block-bots-hotlinking-ban-ip-htaccess)您将在 Drupal 安装文件夹中找到 .htaccess 文件。

另一个好的做法是定期更新 Drupal 核心和为安全修复提供的模块。如果您转到页面**admin/reports/updates**，您将看到哪个模块需要更新。命令行和 Drush 将帮助您简化此过程的某些部分。

如果您定期更新 Drupal（核心和模块），使用 SSH 进行文件传输并应用正确的文件权限，那么您的站点应该是安全的。鉴于 Drupal 安全团队和 Drupal 社区可以获得所有帮助，维护一个安全的 Drupal 站点并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:55:27.267

有一个 Drupal 组（论坛）处理[Drupal 安全的最佳实践，](http://groups.drupal.org/best-practices-drupal-security)它提供了许多关于如何保护 Drupal 站点的极好的建议。至于通过命令行访问您的站点，我检查了 Hostgator 并允许对其所有托管计划进行 SSH 访问。您应该能够通过 SSH 登录，切换到 Drupal 安装中的子目录，并使用“chmod”命令更改文件或目录的权限。

祝你好运！

# java - 使用 JLabel 作为链接打开弹出窗口

> ID：11624087
> 
> 赞同：0
> 
> 时间：2012-07-24T04:17:10.607
> 
> 标签：java, swing, jlabel

> **可能重复：**
> [如何在 JLabel 中添加超链接](http://stackoverflow.com/questions/527719/how-to-add-hyperlink-in-jlabel)

我正在使用“JLabel”来显示一个段落，我需要将该段落的某些部分作为链接打开一个新的弹出窗口，请告诉我如何做到这一点，例如

```
this is ABC application and here is the introduction of the app:
  this is line one
  this is line two
  this is line three 
```

在这里，我必须将“两个”这个词作为可点击的链接来打开一个弹出窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T04:32:02.630

我个人会推荐使用 JEditorPane 而不是 JPanel；它对于显示段落更有用，并且可以显示 HTML，例如链接。然后，您可以简单地调用 addHyperlinkListener(Some hyperlinklistener) 来添加一个侦听器，该侦听器将在有人单击该链接时被调用。您可以弹出一些内容，或者打开在真实浏览器中单击的任何内容，这取决于您。

这是一些示例代码（尚未测试，应该可以）：

```
JEditorPane ep = new JEditorPane("text/html", "Some HTML code will go here. You can have &lt;a href=\"do1\">links&lt;/a> in it. Or other &lt;a href=\"do2\">links&lt;/a>.");
ep.addHyperlinkListener(new HyperlinkListener() {
         public void hyperlinkUpdate(HyperlinkEvent arg0) {
            String data = arg0.getDescription();
            if(data.equals("do1")) {
                //do something here
            }
            if(data.equals("do2")) {
                //do something else here
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:38:37.547

通常，当我们希望标签可点击时，我们只需将其设为按钮即可。我最近确实使用了标签而不是按钮，因为我发现更容易控制外观（图标周围没有边框），并且我希望标签看起来不同，具体取决于应用程序显示的某些数据。但无论如何，我可能已经用 JButton 完成了整个事情。

如果您只希望JLabel 的**一部分**可点击，那就更复杂了。单击鼠标时，您需要检查相对鼠标坐标，以查看它是否对应于您希望可单击的标签部分。

或者，您可能希望改为查看[JEditorPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JEditorPane.html)。这使您可以将 HTML 放入一个 Swing 应用程序中，然后您可能可以实现一些 HyperLinkListener。

但是如果你确实需要一个标签来触发一个动作，就像你最初要求的那样，你可以像这样向它添加一个鼠标监听器：

```
noteLabel = new JLabel("click me");
noteLabel.addMouseListener( new MouseAdapter() {
    public void mousePressed(MouseEvent e) {
        System.out.println("Do something");
    }

    public void mouseEntered(MouseEvent e) {
        //You can change the appearance here to show a hover state
    }

    public void mouseExited(MouseEvent e) {
        //Then change the appearance back to normal.
    }
}); 
```

# magento - 如何在magento中向客户添加自定义复选框字段？

> ID：11624091
> 
> 赞同：5
> 
> 时间：2012-07-24T04:17:52.820
> 
> 标签：magento

在 mysql4-install-0.1.0.php 中，我可以在我的 magento 模块中添加自定义文本字段，如下所示：

```
$entityTypeId     = $setup->getEntityTypeId('customer');
$attributeSetId   = $setup->getDefaultAttributeSetId($entityTypeId);
$attributeGroupId = $setup->getDefaultAttributeGroupId($entityTypeId, $attributeSetId);

$setup->addAttribute('customer', 'resale', array(
    'input'         => 'text',
    'type'          => 'varchar',
    'label'         => 'Resale number',
    'visible'       => 1,
    'required'      => 1,
    'user_defined' => 1,
));

$setup->addAttributeToGroup(
 $entityTypeId,
 $attributeSetId,
 $attributeGroupId,
 'resale',
 '999'  //sort_order
);

$oAttribute = Mage::getSingleton('eav/config')->getAttribute('customer', 'resale');
$oAttribute->setData('used_in_forms', array('adminhtml_customer','customer_account_create'));
$oAttribute->save(); 
```

我还想添加一个复选框字段。我这样添加：

```
$setup->addAttribute('customer', 'marketattended1', array(
    'input'         => 'checkbox',
    'type'          => 'int',
    'label'         => 'San Francisco International Gift Fair',
    'visible'       => 1,
    'required'      => 0,
    'user_defined' => 1,
));

$setup->addAttributeToGroup(
 $entityTypeId,
 $attributeSetId,
 $attributeGroupId,
 'marketattended1',
 '999'  //sort_order
);

$oAttribute = Mage::getSingleton('eav/config')->getAttribute('customer', 'marketattended1');
$oAttribute->setData('used_in_forms', array('adminhtml_customer','customer_account_create'));
$oAttribute->save(); 
```

我可以在管理员/客户中看到我的复选框字段，但是当我尝试编辑或添加新客户时，它不会保存客户。它只是永远显示“请稍候”指示器。如何使这项工作？

***编辑**

在非对象上调用成员函数 setAttribute()

我发现了这个错误或服务器响应。

***编辑**

我更改了安装程序代码：

```
$setup->addAttribute('customer', 'marketattended1', array(
    'input'         => 'boolean',
    'type'          => 'int',
    'label'         => 'San Francisco International Gift Fair',
    'visible'       => 1,
    'required'      => 0,
    'user_defined' => 1,
    //'source'        => 'eav/entity_attribute_source_boolean'
));

$setup->addAttributeToGroup(
 $entityTypeId,
 $attributeSetId,
 $attributeGroupId,
 'marketattended1',
 '999'  //sort_order
);

$oAttribute = Mage::getSingleton('eav/config')->getAttribute('customer', 'marketattended1');
$oAttribute->setData('used_in_forms', array('adminhtml_customer','customer_account_create'));
$oAttribute->save(); 
```

现在我可以看到带有 yes|no 选项的选择组件，并且它工作得很好。它还显示在客户注册表上，如下所示：

```
<div class="field">
   <label for="marketattended1">San Francisco International Gift Fair</label>
   <select id="marketattended1" name="marketattended1" class=" select">
      <option value="0">No</option>
      <option value="1">Yes</option>
   </select></div> 
```

我希望它是复选框。我试过这样：

```
 <div class="field">
      <input class="checkbox" id="marketattended1" onchange="[removed]changechecked()" type="checkbox" value="1" />
      <label  class="required">*Others</label >
   </div> 
```

但它不会保存。如何让它保存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T18:08:55.273

您必须添加复选框的名称：

```
<input class="checkbox" id="marketattended1" name="marketattended1" onchange="[removed]changechecked()" type="checkbox" value="1" /> 
```

然后它工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:08:20.747

我使它与javascript一起工作。我隐藏选择元素并使用 jQuery 添加复选框。当用户单击复选框时，我更改了选择的值。

```
(function($){
    $(document).ready(function(){
        var selects = $('.checkselect');
        $.each(selects, function(index, select){
            var checkbox = "<input class='selectcheckbox' type='checkbox' value='0' />";
            $(select).append($(checkbox));
            $(select).find('select').hide();
            $(select).on('click', '.selectcheckbox', function(){
                if($(this).is(':checked'))
                    $(select).find('select').val('1');
                else 
                    $(select).find('select').val('0');
            });
        });
    });
})(jQuery); 
```

不是最好的解决方案，但我只需要在项目中前进。如果有人找到更好的解决方案，请在这里回答。

# python - 在 python 中使用 avro/json 有效负载发送 HTTP 请求？

> ID：11624099
> 
> 赞同：1
> 
> 时间：2012-07-24T04:18:40.480
> 
> 标签：python, http, httprequest, avro

我正在尝试找出在 http 请求中发送 avro 对象的最佳方式。我正在考虑通过python执行此操作。我对如何实现这一点有点困惑。我会创建一个数据属性等于 avro 文件所在位置的 POST 请求吗？有没有办法即时创建一大堆 avro 对象，而不是将它们存储在物理位置，而是将它们流式传输到 POST 请求中？我不确定如何通过网络将字节数组发送到服务器。深入了解这个过程的基本原理将会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T05:05:17.967

您可能会发现 python 请求很有用。

[http://www.python-requests.org/en/latest/user/quickstart/#](http://www.python-requests.org/en/latest/user/quickstart/#)

```
$pip install requests

>>> import requests
>>> url = 'http://httpbin.org/post'
>>> files = {'file': open('report.xls', 'rb')}

>>> r = requests.post(url, files=files) 
```

# sqlite - 为什么 SQLite 的 LIKE% 在 JOIN 中不起作用？

> ID：11624103
> 
> 赞同：1
> 
> 时间：2012-07-24T04:19:41.047
> 
> 标签：sqlite, join, sql-like

使用 Chinook 测试数据库，以下 SQL 语句在 SQLite 中工作：

```
SELECT * FROM playlist WHERE Name LIKE '%the%' 
```

然而，如果我使用 JOIN：

```
SELECT * FROM playlist AS pl 
JOIN playlisttrack AS plt ON pl.PlaylistId=plt.PlaylistId 
JOIN track AS t ON plt.TrackId=t.TrackId WHERE pl.Name LIKE '%the%' 
```

SQLite 在 WHERE 语句上失败，尽管 MySQL 工作正常：

![在此处输入图像描述](../Images/297ee9347c858c46ccaa2ba8ce0f28fe.png)

是什么让 SQLite 在这里失败了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:26:57.063

你确定你有`playlisttrack`并且`track`为你的`playlist`？

替换`JOIN`为`LEFT JOIN`获取所有内容`playlist`，即使他们没有`playlisttrack`或`track`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:39:30.010

LIKE 似乎有效，因为您得到相同的结果。

问题似乎是三个表中名称为“Name”的多个列。我会避免使用“SELECT *”，而是选择您需要的列，使用别名来明确什么是什么。

# mysql - 查找关联记录最少的记录

> ID：11624104
> 
> 赞同：1
> 
> 时间：2012-07-24T04:19:42.767
> 
> 标签：mysql, sql, join

我刚刚问了这个问题[Find the old record in a join between two tables](https://stackoverflow.com/questions/11623793/find-the-oldest-record-in-a-join-between-two-tables/11623914#11623914)并得到了我的问题的一个很好的答案。问题是这不是我想要的（我的错）

考虑以下 MySQL 表

```
Table: Questions
   ID

Table: Results
   ID 
   Created - When this record was added. 
   Q_ID - A FK to the Question table 
```

示例数据

```
Table: Questions
   ID 
   ----
    1
    8
   15
   55

Table: Results
   ID | Created | Q_ID 
   --------------------
    1 |   12:02 |    1 
    2 |   12:03 |   15 
    3 |   12:04 |    8 
```

使用以下查询，它将返回所有没有与之关联的结果的记录，如果所有记录都有结果，那么它将返回具有最旧结果的问题。

```
SELECT *
FROM
    questions
    LEFT JOIN results
        ON results.q_id = questions.id
ORDER BY
    ISNULL(results.id) DESC, results.created ASC
LIMIT 1 
```

我实际上正在寻找的是任何尚未回答的问题，然后将问题排序为我回答了多少次。回答最少的问题应该在顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:30:09.660

这将为您提供每个问题以及与之相关的结果数量（即使不存在结果）。它们将在顶部以最低计数排序：

```
SELECT Questions.ID, COUNT(Results.ID) Result_Count
FROM
    Questions
    LEFT JOIN Results ON Questions.ID = Results.Q_ID
GROUP BY Questions.ID
ORDER BY COUNT(Results.ID) 
```

这是你的想法吗？

# android - jquerymobile href 链接在 android 和 iOS 上与 phonegap 不可见

> ID：11624107
> 
> 赞同：0
> 
> 时间：2012-07-24T04:20:18.223
> 
> 标签：android, ios, jquery-mobile, cordova, attr

我正在构建一个基于phonegap 的mobileweb 应用程序，它几乎完全是用jquerymobile 构建的。

在几个页面中，有指向外部站点的链接，客户想要显示一个弹出窗口，询问用户是否愿意离开应用程序并转到外部站点。客户还要求如果用户选择点击链接，应用程序将退出。

这是我的 JS：

```
if (typeof CORP == "undefined" || !CORP) {
  var CORP = {};
}

(function() {
      CORP.mk = {
            var mobile = false;
            init: function() {
                        $("[data-role='page']").on("pagebeforeshow", CORP.mk.setHandlers);
            },
            onDeviceReady: function () {
                  CORP.mk.mobile = true;
                  document.addEventListener("pause", CORP.mk.onPause, false);
            },
            onPause: function () { // Exit the app if it goes to background
                  navigator.app.exitApp();
           },
          setHandlers: function () {
             if ( CORP.mk.mobile ) {
                    $("a[rel='external']").click(function (e) {
                        e.preventDefault();
                        CORP.mk.externalLink = $(this).attr("href");
                        alert(CORP.mk.externalLink);
                        navigator.notification.confirm("You are about to close this mobile app and open your web browser.",
                                            CORP.mk.popupConfirm,
                                            "Close This App?");
                    });
             }
          }
      };
})():
$(document).bind("pageinit", CORP.mk.init);
document.addEventListener("deviceready", CORP.mk.onDeviceReady, false); 
```

这是我的标记：

```
<a rel='external' data-ajax='false' href='http://www.google.com'>googly</a> 
```

`CORP.mk.mobile`问题：我在 chrome 桌面浏览器上测试了这段代码，它工作正常。但是`$(this).attr("href");`总是返回`'#'`in `href`or`Android`并且`IOS`我无法使用 phonegap 启动外部应用程序。我希望能够获得实际链接并启动外部应用程序。我尝试了很多组合，但找不到解决方案。欣赏任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:54:14.860

终于找到问题了。发生这种情况是因为`e.preventDefault();`它正在替换链接。我很惊讶这不会发生在桌面浏览器中。所以，而不是

```
e.preventDefault();
CORP.mk.externalLink = $(this).attr("href"); 
```

我需要去做

```
CORP.mk.externalLink = $(this).attr("href");
e.preventDefault(); 
```

# html - wkhtmltopdf的性能

> ID：11624108
> 
> 赞同：25
> 
> 时间：2012-07-24T04:20:44.333
> 
> 标签：html, performance, pdf, xhtml, wkhtmltopdf

我们打算使用 wkhtmltopdf 将 html 转换为 pdf，但我们担心 wkhtmltopdf 的可扩展性。有谁知道它是如何扩展的？我们的网络应用程序可能会尝试转换数十万个（相对复杂的）html，所以对我们来说有一些想法很重要。有人得到这方面的任何信息吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-25T01:59:24.930

首先，您的问题很笼统；在询问任何项目的可扩展性时，需要考虑许多变量。显然，在一周内转换“数十万”个 HTML 文件与期望在一天或一小时内完成转换是有区别的。除此之外，“相对复杂”的 HTML 对其他人来说可能意味着不同的东西。

话虽如此，我想因为我做了类似的事情，使用 wkhtmltopdf 转换了大约 450,000 个 html 文件；我会分享我的经验。

这是我的场景：

*   450,000 个 HTML 文件
    *   95% 的文件只有一页
    *   一般包含2张图片（相对路径，本地系统）
    *   表格数据（有时包含嵌套表）
    *   其他地方的简单标记（强、斜体、下划线等）
*   备用台式电脑
    *   8GB 内存
    *   2.4GHz 双核处理器
    *   7200转高清

我使用了一个用 PHP 编写的简单单线程脚本来遍历文件夹并将 html 文件路径传递给 wkhtmltopdf。转换所有文件的过程大约需要 2.5 天，而且错误非常少。

我希望这能让您深入了解在 Web 应用程序中使用 wkhtmltopdf 可以得到什么。一些明显的改进来自于在更好的硬件上运行它，但主要来自利用多线程应用程序同时处理文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-24T09:06:13.183

根据我的经验，性能很大程度上取决于你的照片。它有很多大图片，它可以显着减慢。如果可能的话，我会尝试进行测试，以估计您的服务器的负载。有些人确实将它用于密集操作，但我从未听说过数十万。我想就像所有事情一样，这取决于您的内容和资源。

以下引用直接来自[wkhtmltopdf 邮件列表](https://groups.google.com/forum/?fromgroups#!msg/wkhtmltopdf-general/7exjkzIMiFY/0TCtkUJPs0AJ)：

> 我每天使用 wkHtmlToPDF 将大约 6000 封电子邮件转换为 PDF。这一切都是在具有 4GB 内存的四核服务器上完成的……这已经足够了。

有一些性能提示，但我建议在优化性能之前尝试一下你的瓶颈。例如，我记得有人说过，如果可能的话，直接从磁盘加载图像而不是在中间使用 Web 服务器可以大大加快速度。

* * *

编辑：除此之外，我在玩 wkhtmltopdf 时玩得很开心。目前在具有 4Gb 内存的 Intel Centrino 2 上，我生成包含 57 页内容（混合 p、ul、table）、约 100 张图像和 toc 持续时间小于 7 秒的 PDF。我还在运行 Visual Studio、浏览器、http 服务器和其他各种可能会减慢它的软件。我直接使用标准输入和标准输出而不是文件。

* * *

编辑：我还没有尝试过，但是如果您已链接 CSS，请尝试将其嵌入 HTML 文件中（请记住进行前后测试以正确查看效果！）。这里的改进很可能取决于缓存和提供 CSS 的位置 - 如果每次都从磁盘读取它或者上帝禁止从 scss 重新生成它，它可能会非常慢，但如果结果被网络服务器缓存（我不认为wkhtmltopdf 缓存实例之间的任何内容）它可能不会产生很大的影响。YMMV。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-03T22:18:49.563

`wkhtmltopdf --print-media-type`正在快速燃烧。但是你会因此失去正常的 CSS 样式。

这可能不是复杂 html 页面导出的理想解决方案。但它对我有用，因为我的 html 内容非常简单并且采用表格形式。

在版本上测试`wkhtmltopdf 0.12.2.1`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-10T11:41:42.040

我们尝试在任何实现中使用 wkhtmltopdf。我的对象是生成坐标点的巨大表格。通常我的 pdf 的体积 = 500 页

我们尝试使用 wkhtmltopdf 的端口到 .net。结果是

```
- Pechkin - Pro: don't need other app. Contra: slow. 500 pages generated about 5 minutes
- PdfCodaxy - only contra: slow. Slower than pure wkhtmltopdf. Required installed wkhtmltopdf. Problems with non unicode text
- Nreco - only contra: slow. Slower than pure wkhtmltopdf. Required installed wkhtmltopdf. Incorrect unlock libs after use (for me) 
```

我们尝试使用从 C# 代码调用的二进制 wkhtmltopdf。

```
Pro: easy to use, faster that libs
Contra: need temporary files (cannot use Stream objects). Break with very huge (100MB+)html files as like as other libs 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-16T16:11:37.183

您可以创建自己的 wkhtmltopdf 引擎池。我通过直接调用 API 而不是每次都启动进程 wkhtmltopdf.exe 来实现一个简单的用例。wkhtmltopdf API 不是线程安全的，所以不容易做到。此外，您不应忘记在 AppDomain 之间共享本机代码。

# extjs - Extjs 4，动态树和存储重新映射

> ID：11624111
> 
> 赞同：0
> 
> 时间：2012-07-24T04:20:51.597
> 
> 标签：extjs, extjs4, treepanel

我需要使用动态远程数据（JSON）的 Extjs 树面板来列出文件。

并且日期字段名称不适合 Extjs 树存储字段。所以我需要重新映射以适应，比如添加叶字段和文本字段。

返回的 JSON 数据是这样的：

```
[{
   "id":1,
   "yourRefNo":"A91273",
   "documentName":"Test Document",
   "documentFileName":"login_to_your_account-BLUE.jpg",
   "updatedBy":"root root",
   "updatedAt":"\/Date(1343012244000)\/"
}] 
```

这是树面板：

```
Ext.define('App.view.Document.DocumentList', {
    extend :'Ext.tree.Panel',
    rootVisible : false,
    alias: 'widget.Document_list',
    store: 'DocumentList_store'

}); 
```

这是商店：

```
Ext.define('App.store.DocumentList_store', {
    extend: "Ext.data.TreeStore",
    model: 'App.model.DocumentList_model',
    proxy: {
        type: 'ajax',
        url: '/Document/GetDocumentList/',
        actionMethods: {
            read: 'POST'
        },
        reader: {
            type: 'json',
            root: '' // there is no root
        },
        pageParam: undefined,
        startParam: undefined,
        pageParam: undefined
    },
    root: {
        children: []
    },
    autoLoad: false,
    listeners: {
        append: function (thisNode, newChildNode, index, eOpts) {
            console.log(newChildNode.get('documentName')); // 'Test Document'
            newChildNode.set('leaf', true);
            newChildNode.set('text', newChildNode.get('documentName'));
            // it does not add to tree panel. 

        }
    }
}); 
```

从服务器加载数据后，它很好地调用了 append 函数。但在那之后，树面板中没有任何显示。

我做错了什么？请给我建议。

谢谢

[编辑]

这是模型，

```
Ext.define("App.model.DocumentList_model", {
    extend: "Ext.data.Model",
    fields: [
        'id','yourRefNo','documentName','documentFileName','updatedBy','updatedAt'
    ]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:03:29.640

我正在将您的代码与我的一段工作代码融合在一起。试试看这是否有效：

模型：

```
Ext.define("App.model.DocumentList_model", {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id'},
        {name: 'yourRefNo'},
        {name: 'documentName' }, 

        {name: 'documentFileName'},
        {name: 'updatedBy'},
        {name: 'updatedAt', convert: function(v) { return v;} }, // Notice you can do field conversion here

        {name: 'leaf', type: 'boolean', defaultValue: false, persist: false},
    ],

    proxy: {
        type: 'ajax',
        url: '/Document/GetDocumentList/',
        actionMethods: {
            read: 'POST'
        },
        reader: {
            type: 'json',
            root: 'children' 
        },
    },    
}); 
```

店铺：

```
Ext.define('App.store.DocumentList_store', {
    extend: "Ext.data.TreeStore",
    model: 'App.model.DocumentList_model',

    root: {
        text: 'Root',
        id: null,
        expanded: true
    },

    autoLoad: false,
}); 
```

JSON响应：

```
{
    "success":true,
    "children":[{
        "id":1,
        "yourRefNo":"A91273",
        "documentName":"Test Document",
        "documentFileName":"login_to_your_account-BLUE.jpg",
        "updatedBy":"root root",
        "updatedAt":"\/Date(1343012244000)\/",
        "leaf":false
     }]
} 
```

# alfresco - 是否可以将 Alfresco 工作流程用于“匿名计划扑克”？

> ID：11624112
> 
> 赞同：1
> 
> 时间：2012-07-24T04:20:59.433
> 
> 标签：alfresco, alfresco-share

我们正在调查 Alfresco 是否根据提交的工作说明（收集的用户故事）进行宽带 delphi（“规划扑克”）。我一直在阅读 Alfresco 文档，有两个问题我无法得到明确的答案：

*   我们可以设置它以便用户可以写入但不能读取到文件夹或节点吗？（为了支持“匿名”计划，用户不知道其他用户提交的估计是什么）
*   是否可以实现工作流任务以要求用户评论或提交项目到具有上述模型的节点或主管，而不仅仅是简单的批准或拒绝？

工作流程：

*   用户提交工作说明
*   组中的所有用户（或随机选择的用户，或...）都会收到审核通知
*   审查包括对整体 SOW 或特定阶段的估计
*   除经理外，评论对所有人都是匿名/秘密的

您是否在 Alfresco 中使用细粒度的访问控制实现了类似的功能？分享您的经验将非常有帮助...我不是在找人为我做这项工作，只是为了确认它可以完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:47:34.727

我会为此使用某种并行工作流程。

首先，经理启动工作流，第一个节点的任务类型将包含有关用户故事等的附加信息，然后经理选择将向其发送此用户故事的人员或组。

这是平行的事情。因为它是并行的，所以没有人看到工作流其他成员的结果。成员填写请求的字段（另一种自定义任务类型，其中包含以下数据：分数（估计）和可能的解释。

在工作流返回到管理器之前，会在非用户任务/节点中进行自动计算，您可以在其中计算故事的总体得分。如有必要，您可以在结果/报告中包含每个用户及其分数。

现在将结果发送给经理。

# css - 使用 twitter bootstrap 为不同页面提供不同的填充

> ID：11624119
> 
> 赞同：0
> 
> 时间：2012-07-24T04:21:42.153
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, padding

我正在开始一个新的 Rails 项目并添加了 twitter bootstrap（因为我听说过它的好消息）。这是一个初学者的问题，但是，如何添加跨越页面整个高度/宽度的背景图像，而不让 twitter-bootstrap 的默认顶部和左侧填充妨碍？有没有我还没有遇到的基本设置？如何删除特定页面的填充，但仍然让填充保留在应用程序的其余部分？这种填充有用吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:01:57.917

您可以将背景图像添加到正文，因为它不会受到填充的影响

```
body.my-page{
  background-image: url('my-image');
  height: 100%;
  width: 100%;
} 
```

或添加一个`absolute`具有完整宽度和高度的 / 'fixed' 定位容器，并将背景图像应用于该容器。

```
<div class="bg"></div>
</body> 
```

**CSS**

```
.my-page .bg{
  background-image: url('my-image');
  position: fixed;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: 1;
} 

.my-page .container{
  position: relative;
  z-index: 2;
} 
```

# iphone - 应用程序未在设备上运行 (iPhone)

> ID：11624122
> 
> 赞同：0
> 
> 时间：2012-07-24T04:22:01.807
> 
> 标签：iphone, ios4, jailbreak

今天，我遇到了奇怪的问题。我的应用程序未在设备上运行（越狱）。早些时候我在设备上运行了其他应用程序。昨天，我已经格式化了设备，现在应用程序没有在 iPhone - 4.2.1 上运行。我已经添加了所有必需的东西，比如配置文件。我还检查了苹果开发者网站。该设备已添加到该门户。由于我的设备版本是 4.2.1，因此我已将我的应用程序定位到 4.2。当我尝试运行应用程序时没有错误出现。只有它以“已完成在 iphone 上运行的应用程序”结尾。M 没有得到我在哪里和我错过了什么..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:32:10.390

Reset the Simulator . Delete the Build File. And Restart the xCode. And Run the yor Project.I Hope it will help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:29:11.713

转到您的项目并删除构建文件夹。从设备中清除所有已安装的配置文件，然后重新启动 Xcode。希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T11:33:41.097

删除构建文件，重置模拟器，然后重新启动 xCode。而不是运行你的项目。并在设备上获得输出。

# android - 需要通过 Facebook 和 Twitter（PhonegapAndroid）对用户进行身份验证

> ID：11624125
> 
> 赞同：1
> 
> 时间：2012-07-24T04:22:16.533
> 
> 标签：android, html, facebook-graph-api, cordova, twitter-oauth

phonegap 编程开发的新手。有一个问题，我需要通过 facebook/twitter 对用户进行身份验证，如果身份验证成功，则需要将一些图像上传到服务器..我一直坚持这个问题..我可以找到这个facebook sdk for phonegap android.i 已经下载了这个插件[https://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect) 但实施时它只是重定向到 facebook 页面到浏览器，它不会打开 facebook 登录的弹出窗口我们可以在本机 android 应用程序中看到的页面......所以有什么指南吗？在此先感谢 Aamirkhan 我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:30:16.843

我们最近开发了一个 iOS phonegap 应用程序。我们不得不从 Twitter 中提取一个提要（到我们的 Grails 服务器组件）并选择使用 Twitter4J，因为它简化了流程。这是 Twitter4J 网站上的一个[代码示例，特别关注身份验证。](http://twitter4j.org/en/code-examples.html#oauth)希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:41:34.570

当您被重定向到网页而不是弹出窗口时，这意味着您的手机上没有安装 facebook 应用程序。不幸的是，现在使用新的 FB jar 是必需的。

# c - 在函数中填充结构字段时 malloc 的分段错误

> ID：11624126
> 
> 赞同：0
> 
> 时间：2012-07-24T04:22:27.893
> 
> 标签：c, pointers, struct

我有一个结构定义为

```
struct _element;
typedef struct _element Element;

struct _element {

    char* StudentName;
    char* StudentID;
    int StudentMarks;
}; 
```

指向结构的指针`Element`被全局声明为

```
Element * ePtr; 
```

现在我有一个函数，它返回一个指向结构的指针`Element`。这定义如下所示。在此函数中填充全局声明的相同`ePtr`内容，然后返回。

```
Element * CreateElement(char * jName, char * jID, int jMarks)
{
    printf("CreateElement \n");
    puts(jName); puts(jID); printf("%d\n",jMarks);

    ePtr->StudentName = (char*)malloc(sizeof(char)*strlen(jName));

    strcpy(ePtr->StudentName, jName);

    printf("After Creation \n");
    puts(ePtr->StudentName);

    return ePtr;
} 
```

我正在使用调用此函数

```
ePtr = CreateElement(iName,iID,iMarks); 
```

从另一个函数。存储在参数中的值是正确的，如函数调用行下方的`puts`和命令所示。`printf`

我的问题是我在

```
ePtr->StudentName = (char*)malloc(sizeof(char)*strlen(jName)); 
```

线。我使用 gdb 进行了同样的检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:24:34.000

您是否为 分配任何内存`ePtr`？

仅在全局范围内声明指向此结构的指针是不够的：您还需要`malloc`一些内存：`ePtr = malloc(sizeof(Element);`.

还要确保在`malloc`您的字符串中为空终止符添加一个额外的插槽。

一般来说，总是初始化你的指针`NULL`——你**可以**在声明 global: 时这样做`Element *ePtr = NULL;`。此外，尝试让您`ePtr`脱离全局范围，并`NULL`在使用指针之前进行检查，就像`ePtr`在您的`CreateElement`方法中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:24:42.737

您没有将任何内存分配给

```
ePtr = (Element*)malloc(sizeof(Element)); 
```

在您开始为其赋值并最终从函数中返回它之前。

您还需要为字符串的 nul 终止符留出空间

```
ePtr->StudentName = (char*)malloc(sizeof(char)*(strlen(jName) + 1)); 
```

最后别忘了为ID分配内存并复制ID的值，并将studentMarks复制到Element中。

请记住，元素是固定大小的。它需要内存来保存两个`char *`和一个`int`。为 Element 分配内存时，字符串是可变长度的并不重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T04:29:19.090

您需要先为 ePtr 分配一些内存，然后才能将内存分配给它包含的 char*。在函数开始时在您的 ePtr 上执行 malloc。

在全球范围内声明 ePtr 也没有什么意义，但这并不是破坏程序的原因。

```
ePtr = (Element*)malloc(sizeof(Element)); 
```

您可能还应该在使用它之前检查 ePtr 之后是否为空（如果内存不足以及其他一些问题可以为空）。

# macos - 启动 shell 时的提示

> ID：11624128
> 
> 赞同：1
> 
> 时间：2012-07-24T04:22:35.733
> 
> 标签：macos, bash, shell, freebsd, tcsh

所以我使用的其中一台服务器安装了 freebsd，它默认使用 tcsh shell。这有一个非常好的功能。每次我通过 ssh 登录时，它都会打印一个提示。这引起了我的注意，我不知道 bash shell 是否存在这种情况以及如何激活它。

这是我得到的最后一个：

```
FreeBSD 9.0-RELEASE-p3 (GENERIC) #0: XXXXX

m5
Nice bash prompt: PS1='(\[$(tput md)\]\t <\w>\[$(tput me)\]) $(echo $?) \$ '
    -- Mathieu <mathieu@hal.interactionvirtuelle.com>
$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:14:53.420

fortune 命令不是特定于 shell 的。如果配置好了，一般在启动时通过rc调用。fortune man(6) 页面描述了几种使用不同文件调用 fortune 的方法。祝你好运；）

# asp.net-mvc - WCF 在以下上下文中是什么意思？

> ID：11624130
> 
> 赞同：0
> 
> 时间：2012-07-24T04:22:46.317
> 
> 标签：asp.net-mvc, model-view-controller

我是新手，但我得到了这个项目，我必须使用 MVC 制作地址簿。问题是我不知道如何使用我熟悉 asp.net 的 MVC。我不知道如何开始。我没有要求任何人为我开发整个项目我只是不清楚从哪里开始以及 WCF 是什么意思，我必须在这个项目中在哪里使用它？从头开始学习 MVC 并完成这个项目需要多长时间？假设我在 c sharp 和 asp.net 中处于初级水平以下是详细信息：

功能要求：

个人信息将存储在地址簿中。每个人都可以有多个电话号码、电子邮件地址和即时通讯联系人。显示所有联系人的列表。允许添加新联系人 允许查看/编辑/删除联系人 查看联系人会显示详细的联系信息和链接的电话号码、电子邮件地址和即时通讯联系人。您可以添加/编辑/删除电话号码、电子邮件地址和即时通讯联系人。技术细节：

联系人将有以下信息：

标题 名字 姓氏 中间名 年龄（数字字段） 出生日期（日期字段） 性别：（男性或女性）- 单选框类别：选项是商业、家庭、其他（下拉框）- 这应该是一个枚举在您的数据结构电话号码中将包含以下信息：

电话号码类型：家庭、工作、手机、其他（枚举）电话号码：电子邮件地址将包含以下信息：

电子邮件类型：主要、次要、工作、家庭、其他（枚举）电子邮件地址：Instant Messenger 联系人将具有以下信息

IM 类型：AIM、MSN、Yahoo、Jabber、GTalk、其他（枚举） IM 地址：应用程序应该是 N 层架构，使用对象和 WCF 服务。该网站应使用 MVC 完成。

您的 Web 应用程序不应有任何硬编码样式，并且应使用 CSS 进行所有样式设置。此外，您的 Web 应用程序应该有一个母版页/布局 [看看如何在 MVC 中处理母版页概念]，以便以后轻松更新所有页面。

所有输入字段都需要验证。

如果页面上出现任何错误，错误消息应显示在页面顶部（不应显示默认错误页面），并且应将错误消息记录在日志文件中（使用 Log4Net 进行日志记录）。

脚步：

创建您的类结构 创建您的数据库结构。确保您的 SQL 文件不同，以便可以轻松地将应用程序移植到不同的机器上。使用必要的方法创建您的 WCF 服务。为您的 WCF 服务方法编写 NUnit 测试。在您开始实际实施之前，创建一个关于您的页面外观的 HTML 原型并获得批准。创建您的 Web 应用程序。创建一个 msbuild 脚本来构建您的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:38:59.853

好的 ASP.NET MVC 教程：[http ://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

WCF 表示：http: [//msdn.microsoft.com/en-us/netframework/aa663324.aspx](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)

一起使用 ASP.NET MVC 和 WCF 的信息：[http ://weblogs.asp.net/cibrax/archive/2010/10/08/asp-net-mvc-wcf-rest-and-data-services-when-to -use-what-for-restful-services.aspx](http://weblogs.asp.net/cibrax/archive/2010/10/08/asp-net-mvc-wcf-rest-and-data-services-when-to-use-what-for-restful-services.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:45:34.327

WCF 是 Windows 通信基础。它是您用来创建 Web 服务的技术，MVC 网站将与之通信以检索和更新后端数据库中的数据。

基本思想是用户界面是一个由 ASP.Net MVC 服务的网站。MVC 应用程序作为 WCF Web 服务的客户端运行。WCF 服务是业务逻辑层的前端，它处理和存储/从数据库中检索信息。

不确定 WCF 资源，但对于学习 MVC，你可以做的比看书呆子晚餐（[http://nerddinnerbook.s3.amazonaws.com/Intro.htm](http://nerddinnerbook.s3.amazonaws.com/Intro.htm)）和 MVC 音乐商店（[http://www.asp .net/mvc/tutorials/mvc-music-store](http://www.asp.net/mvc/tutorials/mvc-music-store)）教程。它们不处理与 WCF 后端通信的 MVC，但应该让您很好地处理 MVC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:18:37.837

这是我学习任何新技术的最爱。

[http://www.asp.net/mvc/pluralsight](http://www.asp.net/mvc/pluralsight)

# c++ - 铸造 shared_ptr 到 shared_ptr

> ID：11624131
> 
> 赞同：9
> 
> 时间：2012-07-24T04:22:51.043
> 
> 标签：c++, casting, c++11, shared-ptr

我有一个结构：

```
struct Params {
   std::shared_ptr<void> user_data;
   /* ... */
}; 
```

我想像这样使用它：

```
int main() {
  std::shared_ptr<SpecializedParams> sp(new SpecializedParams(100));
  Params params;
  /* ... */
  params.user_data = std::static_pointer_cast<void>(sp); 
  /* ... */
  std::shared_ptr<SpecializedParams> sp2 = 
    std::static_pointer_cast<SpecializedParams>(
      params.user_data
    );
  /* ... */
  return 0;
} 
```

这是有效和安全的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T06:56:00.480

实际删除共享对象的代码是在创建共享指针时确定的（这就是为什么在构造 shared_ptr 时需要完整类型而不是在破坏 shared_ptr 时需要完整类型的原因）。因此，即使您的 shared_ptr 是指向您的 SpecializedParams 对象的最后一个指针，该对象也会被正确销毁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T04:55:05.587

这应该是安全的，因为 void 铸造项目也是 shared_ptr 。它将添加对现有元素的引用，并且在 void 铸造项目消失之前不会被释放。

# python - 类中变量的范围有问题吗？

> ID：11624133
> 
> 赞同：0
> 
> 时间：2012-07-24T04:22:58.093
> 
> 标签：python, scope, pybrain

所以我正在用 Python 制作一个类，它只使用它给出的数字输入来创建一个网络（使用 pybrain）{只是在 Pybrain 的 API 中让我的脚湿透的一个小过程}。

我的问题是，我对范围在类中的工作方式相当不熟悉，虽然我基本上已经正确设置了程序，但它一直返回一个 keyerror。

所有需要作用的变量都在**init**函数中创建；我正在为该类工作的方法试图调用一个变量，该变量在**init**函数中使用 Python 中的 vars()[] 方法声明。（您实际上可以在此处看到代码的一部分……草稿： [Matching Binary operator in Tuples to Dictionary Items](https://stackoverflow.com/questions/11590138/matching-binary-operators-in-tuples-to-dictionary-items)

无论如何，方法是：

```
 def constructnetwork(self):
    """constructs network using gathered data in __init__"""
       if self.recurrent:
            self.network = pybrain.RecurrentNetwork  
            #add modules/connections here
       elif self.forward:
            self.network = pybrain.FeedForwardNetwork
       else:
            self.network = pybrain.network

       print vars()[self.CONNECT+str(1)]
       print vars()[self.CONNECT+str(2)]
       print self.network 
```

（请原谅错误的间距，它没有很好地复制和粘贴。）引发 KeyError 的部分是“print vars()[self.CONNECT+str(1)]，它应该检索变量的值” Connection1" (self.CONNECT = 'Connection')，但调用了 keyerror。

我如何让变量转移过来？如果您需要更多信息来帮助您询问，我会尽量缩短问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:26:23.673

`vars()`返回对*局部*变量字典的引用。如果您`vars()`在您的`__init__`（如您链接到的帖子中的代码所建议的那样）中使用，那么您只是在该方法中创建了一个局部变量，该方法无法从该方法之外的任何地方访问。

你认为是什么，你`vars()`想做什么？我有一种预感，你想要的是`getattr`and `setattr`，或者只是一本字典，而不是`vars`。

编辑：根据您的评论，听起来您确实不应该使用`vars`. 你会更好，在`__init__`，做一些类似的事情：

```
 self.connections = {}
 self.connections[1] = "This is connection 1" 
```

然后在你的方法中，做：

```
 self.connections[1] 
```

不过，这只是基于您的代码的模糊猜测。我无法真正说出您对这种“连接”的意图。您是否希望它是与您的对象相关联的一些数据？

# html - 他们无论如何要在 HTML 中添加自定义标签

> ID：11624135
> 
> 赞同：0
> 
> 时间：2012-07-24T04:23:04.723
> 
> 标签：html

> **可能重复：**
> [使用自定义 HTML 标签](https://stackoverflow.com/questions/5970093/using-custom-html-tags)

是他们在 HTML 中添加自定义标签的一种简单方法，我正在寻找一些很酷的过滤器，我只想将它们应用于我的网页的某些部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:26:35.460

是的，我们可以在 Html 中添加自定义标签。

```
<customTag>Hello world</customTag> 
```

但 IE 不会检测到自定义标签。只需添加文档的此标题即可。

```
<script>document.createElement('customTag');</script> 
```

上面的例子是`html5shiv`.

这是我为 IE 找到的另[一篇文章。](http://ajaxian.com/archives/adding-custom-tags-to-internet-explorer-the-official-way)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:30:47.473

不，自定义标签不是 HTML 标签。如果您使用其中一个，您的文档将不再是 HTML。

使用（语义上）最合适的 HTML 元素，然后添加属性（通常`class`）以将其区分为您的脚本/样式表。

# zend-framework - Zend_Captcha_Image 卡在字体包含路径中

> ID：11624136
> 
> 赞同：0
> 
> 时间：2012-07-24T04:23:10.840
> 
> 标签：zend-framework

```
$captcha = new Zend_Captcha_Image(array(
    'font' => BASE_PATH .'/fonts/Average-Regular.ttf'
));
$captchaId = $captcha->generate(); 
```

在 index.php 中

```
// Define path to application directory
defined('BASE_PATH')
    || define('BASE_PATH', realpath(dirname(__FILE__) . '/../'));

// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application')); 
```

错误：

> 警告：imagepng(): Unable to open './images/captcha/564749fc943b090f6d38233071ae1538.png' for writing: No such file or directory in /var/www/html/workbench/zend/library/Zend/Captcha/Image.php on第 563 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:51:23.900

试试这个。

```
$captcha = new Zend_Captcha_Image(array(
    'font' => BASE_PATH .'fonts/Average-Regular.ttf',
    'imgDir'=> //path to captcha image directory,
    'imgUrl'=> '/captcha-image/',
));
$captchaId = $captcha->generate(); 
```

您需要定义将存储验证码图像的图像目录。

有关更多信息，请查看文档[http://framework.zend.com/manual/en/zend.captcha.adapters.html#zend.captcha.adapters.image](http://framework.zend.com/manual/en/zend.captcha.adapters.html#zend.captcha.adapters.image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T10:14:09.503

对于您的字体，“。” 将指向包含模块目录的 Zend 目录。例如，如果您创建一个像这样 ZendSkeletonApplication-master/data/fonts 这样的新目录并将字体文件像 ZendSkeletonApplication-master/data/fonts/aril.ttf 这样你可以启动您的验证码，如下所示：

```
$captcha = new Zend_Captcha_Image(array(
    'font' => './data/fonts/arial.ttf',
    'imgDir'=> 'your nominated directory',
    'imgUrl'=> 'same like above from url',
));
$captchaId = $captcha->generate(); 
```

但是您始终可以在索引页面中定义一个指向您选择的目录并使用它的常量。

# r - 加快R中的gls？

> ID：11624137
> 
> 赞同：0
> 
> 时间：2012-07-24T04:23:14.697
> 
> 标签：r, multicore

我有一个 Intel i7 四核处理器。是否可以同时使用多个核心来计算单个`gls`模型？这些可能需要 5-10 分钟才能运行，但它们一次只使用一个内核。

如果我有四个模型，每个模型都需要几分钟，那么在单独的核心上运行每个模型会更好吗？

我有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:35:13.380

你有几个选择：

1.  使用 parallel、foreach、snow、multicore 等包同时运行您的模型。
2.  使用多线程 BLAS 构建 R。

请注意，您应该执行其中一项，但不能同时执行两项。

# android - Android浏览器文件上传默认只允许视频文件

> ID：11624139
> 
> 赞同：1
> 
> 时间：2012-07-24T04:23:37.457
> 
> 标签：android, jquery, asp.net, file-upload

我正在为手机开发一个网络应用程序，当我在三星 Galaxy S3 上测试文件上传（你知道 html 输入类型=文件标签）时，它只允许我选择一个视频文件或录制一个新视频。手机不允许我选择图像或将相机模式切换为静态照片。

那么，如何让 android 与标签配合得很好呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:23:37.457

很简单，你需要像这样添加属性 Accept="image/*" ：

```
<input type="file" accept="image/*" /> 
```

如果您像我一样使用 asp:FileUpload，那么添加此属性的唯一方法是使用 javascript（我知道的唯一方法）。这就是我用 jQuery 做的：

```
$(document).ready(function () {
    $("input[type=file]").attr("accept", "image/*");
} 
```

# php - 在php中转换为相同的时区

> ID：11624142
> 
> 赞同：1
> 
> 时间：2012-07-24T04:23:59.167
> 
> 标签：php, mysql, timezone

奇怪。这不是边缘情况。相反，假设我的服务器将它的日期/时间存储在美国/多伦多。然后我通过时间转换逻辑运行它，例如，你在西海岸。这是我得到的代码：

```
$timestamp = '2012-07-25 16:30:00';
$to = 'America/Toronto';
$from = 'America/Toronto';

// system timezone
$system = (new DateTimeZone($from));

// desired conversion timezone
$desired = (new DateTimeZone($to));

// timestamp DateTime object
$resource = (new DateTime($timestamp, $system));

// offset
$offset = $desired->getOffset($resource);
print($offset); 
```

此时打印的偏移量为 -14440（4 小时）。我不认为系统或数据库时区会出现在这里（两者都设置为美国/多伦多）。任何光都将不胜感激。令人困惑:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T04:27:13.480

[`DateTimeZone::getOffset()`](http://www.php.net/manual/en/datetimezone.getoffset.php)返回从 GMT 开始的偏移量（以秒为单位）（-14440 = 美国/多伦多的 4 小时）。

**编辑：**

为我最初的困惑道歉[`DateTime::getOffset()`](http://www.php.net/manual/en/datetime.getoffset.php)！

无论如何，要解决您问题的标题，请使用[`DateTime::setTimeZone()`](http://www.php.net/manual/en/datetime.settimezone.php)在时区之间进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:31:56.390

This is probably what you're looking for, the offset between the 2 timezones.

```
// system timezone
$system = (new DateTimeZone($from));

// desired conversion timezone
$desired = (new DateTimeZone($to));

// timestamp DateTime object
$resource = (new DateTime($timestamp, $system));
$desiredDateTime = (new DateTime($timestamp, $desired));

// offset
$offset = $desired->getOffset($desiredDateTime) - $system->getOffset($resource);
print($offset); 
```

# r - 在一致的位置绘制分割字符向量

> ID：11624147
> 
> 赞同：1
> 
> 时间：2012-07-24T04:25:06.990
> 
> 标签：r

好吧，我决定浪费这个晚上在 R 中制作一个刽子手游戏。除了绘制的未知数量的字母外，一切看起来都很好，如下所示：

```
a
b
f
d
g 
```

`text`这是使用and的示例/尝试`mtext`：

```
FUN <- function(n) {
    plot.new()   
    mtext("wrong", side = 3, cex=1.5, adj = 0, padj = 1, col = "red") 
    wrong <- letters[1:n]
    text(0, .8, paste(wrong, collapse = "\n"), offset=.3, cex=1.5)
}

FUN(5)
FUN(10)

FUN2 <- function(n) {
    plot.new()   
    mtext("wrong", side = 3, cex=1.5, adj = 0, padj = 1, col = "red") 
    wrong <- letters[1:n]
    mtext(paste(wrong, collapse = "\n"), side = 3, cex=1.5,
        adj = 0, padj = 2.5)
}

FUN2(5)
FUN2(10) 
```

我怎样才能使它`a`在同一位置`FUN(5)`和地块中？`FUN(10)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:40:02.187

第一个 - 要走的路！游戏！你应该完全用它做一个包，这样我就可以玩了；）

因为`text`您可以使用该`adj`参数，如果您将其设置为 1。那么`(x,y)`提供的坐标`text`指的是包含文本的矩形的左上角。

> adj：[0, 1] 中的一个或两个值，指定标签的 x（和可选的 y）调整。在大多数设备上，该间隔之外的值也将起作用。

```
FUN <- function(n) {
    plot.new()   
    mtext("better?", side = 3, cex=1.5, adj = 0, padj = 1, col = "red") 
    wrong <- letters[1:n]
    text(0, .8, paste(wrong, collapse = "\n"), offset=.3, cex=1.5, adj=c(0,1))
} 
```

注意`adj=c(0,1)`，0 是 x 对齐，1 是 y 对齐（文档并没有真正说明这一点，但由于它是一个值，`[0,1]`我认为它是位置调整，作为该维度中标签长度的一部分）。

同样，`mtext`您需要使用`padj=1`, 根据文档进行顶部对齐（因为您的文本方向是从左到右）。参数是`adj`左右对齐。

```
FUN2 <- function(n) {
    plot.new()   
    mtext("better?", side = 3, cex=1.5, adj = 0, padj = 1, col = "red") 
    wrong <- letters[1:n]
    mtext(paste(wrong, collapse = "\n"), side = 3, cex=1.5,
        adj = 0, padj = 1) # adj=1 means text on right side instead of left.
} 
```

（你会做幽默的火柴人人物吗？？这听起来很有趣：D）

# jqplot - 在jqplot中，如何在顶部显示x轴，以及如何隐藏轴标签

> ID：11624148
> 
> 赞同：1
> 
> 时间：2012-07-24T04:25:07.623
> 
> 标签：jqplot

我有一个 jqplot 对象，它在底部呈现 x 轴刻度线/标签。基本上，有一堆图表，都使用相同的 x 轴。我想从中间图表中回收底轴区域作为绘图线。

*   如何动态地将 x 轴重新定位到顶部（即向北）
*   如何使x轴标签消失？为此，我尝试了

    ```
    plotobject.axes.xaxis.showLabel = false; 
    plotobject.replot(); 
    ```

但这似乎没有明显的效果。`plotobject`是原始`$.jqplot()`调用返回的内容，我正在使用`$.jqplot.DateAxisRenderer`xaxis.renderer。我只能访问绘图对象。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-20T16:56:17.877

这个简单的 CSS 解决方案对我来说可以将 x 轴标签放在图表顶部。

```
.jqplot-xaxis {
    position: relative;
    top: -30px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:27:48.410

好吧，每个轴的标签（即轴标题）都有自己的渲染器，因此它有自己的选项。我使用插件之一（[http://www.jqplot.com/docs/files/plugins/jqplot-canvasAxisLabelRenderer-js.html](http://www.jqplot.com/docs/files/plugins/jqplot-canvasAxisLabelRenderer-js.html)）但默认也有一个 show: true/false 设置。（[http://www.jqplot.com/docs/files/jqplot-axisLabelRenderer-js.html](http://www.jqplot.com/docs/files/jqplot-axisLabelRenderer-js.html)）

它应该看起来像这样：

```
axes: {
    xaxis: {
        labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
        label: 'Dates',
        labelOptions: {
            show: true,
            fontSize: '10pt'
        },
    }
} 
```

为了将 x 轴放在顶部，我不确定您的问题到底是什么，但我尝试使用 jquery 选择它并将它的 z-index 设置为较高的值以使其位于顶部。查看[http://www.jqplot.com/docs/files/jqPlotCssStyling-txt.html](http://www.jqplot.com/docs/files/jqPlotCssStyling-txt.html)了解一些选择思路。

# c++ - C ++ ICU为高棉添加中断规则

> ID：11624152
> 
> 赞同：3
> 
> 时间：2012-07-24T04:25:46.957
> 
> 标签：c++, line-breaks, icu

我正在尝试为高棉语的 ICU 中断迭代器添加更好的功能（它使用像泰语一样的字典）。

我有一个字符，我总是希望 breakiterator 在之后中断 - 但我不知道如何在代码中添加“规则”以使其工作。

我想永远打破的角色是U+17CB

U+17CB 字符已经包含在 fEndWordSet = fKhmerWordSet 中；但问题是，在 fEndWordSet 中它只是一个单词的*可能*结尾。我需要将其更改为始终在角色之后中断，而不仅仅是一种可能性。

我不是很有经验，所以你能给出的任何方向都会非常感激！

这是当前的高棉中断迭代器（包含在 dictbe.cpp - 整个源代码可以在[这里](http://icu.sourcearchive.com/documentation/4.8.1.1-1/dictbe_8cpp_source.html)查看）：

```
// How many words in a row are "good enough"?
#define KHMER_LOOKAHEAD 3

// Will not combine a non-word with a preceding dictionary word longer than this
#define KHMER_ROOT_COMBINE_THRESHOLD 3

// Will not combine a non-word that shares at least this much prefix with a
// dictionary word, with a preceding word
#define KHMER_PREFIX_COMBINE_THRESHOLD 3

// Minimum word size
#define KHMER_MIN_WORD 2

// Minimum number of characters for two words
#define KHMER_MIN_WORD_SPAN (KHMER_MIN_WORD * 2)

KhmerBreakEngine::KhmerBreakEngine(const TrieWordDictionary *adoptDictionary, UErrorCode &status)
    : DictionaryBreakEngine((1<<UBRK_WORD) | (1<<UBRK_LINE)),
      fDictionary(adoptDictionary)
{
    fKhmerWordSet.applyPattern(UNICODE_STRING_SIMPLE("[[:Khmr:]&[:LineBreak=SA:]]"), status);
    if (U_SUCCESS(status)) {
        setCharacters(fKhmerWordSet);
    }
    fMarkSet.applyPattern(UNICODE_STRING_SIMPLE("[[:Khmr:]&[:LineBreak=SA:]&[:M:]]"), status);
    fMarkSet.add(0x0020);
    fEndWordSet = fKhmerWordSet;
    fBeginWordSet.add(0x1780, 0x17B3);
    //fBeginWordSet.add(0x17A3, 0x17A4);      // deprecated vowels
    //fEndWordSet.remove(0x17A5, 0x17A9);     // Khmer independent vowels that can't end a word
    //fEndWordSet.remove(0x17B2);             // Khmer independent vowel that can't end a word
    fEndWordSet.remove(0x17D2);             // KHMER SIGN COENG that combines some following characters
    //fEndWordSet.remove(0x17B6, 0x17C5);     // Remove dependent vowels
//    fEndWordSet.remove(0x0E31);             // MAI HAN-AKAT
//    fEndWordSet.remove(0x0E40, 0x0E44);     // SARA E through SARA AI MAIMALAI
//    fBeginWordSet.add(0x0E01, 0x0E2E);      // KO KAI through HO NOKHUK
//    fBeginWordSet.add(0x0E40, 0x0E44);      // SARA E through SARA AI MAIMALAI
//    fSuffixSet.add(THAI_PAIYANNOI);
//    fSuffixSet.add(THAI_MAIYAMOK);

// Compact for caching.
fMarkSet.compact();
fEndWordSet.compact();
fBeginWordSet.compact();
//    fSuffixSet.compact();
}

KhmerBreakEngine::~KhmerBreakEngine() {
delete fDictionary;
}

int32_t
KhmerBreakEngine::divideUpDictionaryRange( UText *text,
                                            int32_t rangeStart,
                                            int32_t rangeEnd,
                                            UStack &foundBreaks ) const {
if ((rangeEnd - rangeStart) < KHMER_MIN_WORD_SPAN) {
    return 0;       // Not enough characters for two words
}

uint32_t wordsFound = 0;
int32_t wordLength;
int32_t current;
UErrorCode status = U_ZERO_ERROR;
PossibleWord words[KHMER_LOOKAHEAD];
UChar32 uc;

utext_setNativeIndex(text, rangeStart);

while (U_SUCCESS(status) && (current = (int32_t)utext_getNativeIndex(text)) < rangeEnd) {
    wordLength = 0;

    // Look for candidate words at the current position
    int candidates = words[wordsFound%KHMER_LOOKAHEAD].candidates(text, fDictionary, rangeEnd);

    // If we found exactly one, use that
    if (candidates == 1) {
        wordLength = words[wordsFound%KHMER_LOOKAHEAD].acceptMarked(text);
        wordsFound += 1;
    }

    // If there was more than one, see which one can take us forward the most words
    else if (candidates > 1) {
        // If we're already at the end of the range, we're done
        if ((int32_t)utext_getNativeIndex(text) >= rangeEnd) {
            goto foundBest;
        }
        do {
            int wordsMatched = 1;
            if (words[(wordsFound+1)%KHMER_LOOKAHEAD].candidates(text, fDictionary, rangeEnd) > 0) {
                if (wordsMatched < 2) {
                    // Followed by another dictionary word; mark first word as a good candidate
                    words[wordsFound%KHMER_LOOKAHEAD].markCurrent();
                    wordsMatched = 2;
                }

                // If we're already at the end of the range, we're done
                if ((int32_t)utext_getNativeIndex(text) >= rangeEnd) {
                    goto foundBest;
                }

                // See if any of the possible second words is followed by a third word
                do {
                    // If we find a third word, stop right away
                    if (words[(wordsFound+2)%KHMER_LOOKAHEAD].candidates(text, fDictionary, rangeEnd)) {
                        words[wordsFound%KHMER_LOOKAHEAD].markCurrent();
                        goto foundBest;
                    }
                }
                while (words[(wordsFound+1)%KHMER_LOOKAHEAD].backUp(text));
            }
        }
        while (words[wordsFound%KHMER_LOOKAHEAD].backUp(text));
foundBest:
        wordLength = words[wordsFound%KHMER_LOOKAHEAD].acceptMarked(text);
        wordsFound += 1;
    }

    // We come here after having either found a word or not. We look ahead to the
    // next word. If it's not a dictionary word, we will combine it with the word we
    // just found (if there is one), but only if the preceding word does not exceed
    // the threshold.
    // The text iterator should now be positioned at the end of the word we found.
    if ((int32_t)utext_getNativeIndex(text) < rangeEnd && wordLength < KHMER_ROOT_COMBINE_THRESHOLD) {
        // if it is a dictionary word, do nothing. If it isn't, then if there is
        // no preceding word, or the non-word shares less than the minimum threshold
        // of characters with a dictionary word, then scan to resynchronize
        if (words[wordsFound%KHMER_LOOKAHEAD].candidates(text, fDictionary, rangeEnd) <= 0
              && (wordLength == 0
                  || words[wordsFound%KHMER_LOOKAHEAD].longestPrefix() < KHMER_PREFIX_COMBINE_THRESHOLD)) {
            // Look for a plausible word boundary
            //TODO: This section will need a rework for UText.
            int32_t remaining = rangeEnd - (current+wordLength);
            UChar32 pc = utext_current32(text);
            int32_t chars = 0;
            for (;;) {
                utext_next32(text);
                uc = utext_current32(text);
                // TODO: Here we're counting on the fact that the SA languages are all
                // in the BMP. This should get fixed with the UText rework.
                chars += 1;
                if (--remaining <= 0) {
                    break;
                }
                if (fEndWordSet.contains(pc) && fBeginWordSet.contains(uc)) {
                    // Maybe. See if it's in the dictionary.
                    int candidates = words[(wordsFound+1)%KHMER_LOOKAHEAD].candidates(text, fDictionary, rangeEnd);
                    utext_setNativeIndex(text, current+wordLength+chars);
                    if (candidates > 0) {
                        break;
                    }
                }
                pc = uc;
            }

            // Bump the word count if there wasn't already one
            if (wordLength <= 0) {
                wordsFound += 1;
            }

            // Update the length with the passed-over characters
            wordLength += chars;
        }
        else {
            // Back up to where we were for next iteration
            utext_setNativeIndex(text, current+wordLength);
        }
    }

    // Never stop before a combining mark.
    int32_t currPos;
    while ((currPos = (int32_t)utext_getNativeIndex(text)) < rangeEnd && fMarkSet.contains(utext_current32(text))) {
        utext_next32(text);
        wordLength += (int32_t)utext_getNativeIndex(text) - currPos;
    }

    // Did we find a word on this iteration? If so, push it on the break stack
    if (wordLength > 0) {
        foundBreaks.push((current+wordLength), status);
    }
}

// Don't return a break for the end of the dictionary range if there is one there.
if (foundBreaks.peeki() >= rangeEnd) {
    (void) foundBreaks.popi();
    wordsFound -= 1;
}

return wordsFound;
} 
```

# android - 插入 TextViews 和 EditText 的 HTML 格式化字符串

> ID：11624153
> 
> 赞同：3
> 
> 时间：2012-07-24T04:25:46.157
> 
> 标签：android, html, formatting, textview, android-edittext

全部，

我有一个数据库，它将存储 HTML 标记文本以保留来自 EditText 的格式信息。我使用 HTML.toHtml(EditText.getText) 创建了这个字符串。我注意到这个方法用`<p> and </p>`. 问题是当我必须使用方法 HTML.fromHtml(HTMLFormattedString) 然后使用 TextView 或 EditText 的 setText 方法时，我的实际文本末尾有两行额外的行，这是有道理的，因为这就是段落标签适用于 HTML。

**我的问题是无论如何要使 textView 或 EditText 缩小以不显示额外的空白行？最简单的方法是什么？我已经尝试删除最后一个`<p> and </p>`，但这仅在用户没有使用返回键输入 3 个或更多新行的情况下才有效。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T02:47:30.917

我最终在创建并删除它的跨区文本的末尾搜索空白。这处理了额外的空间，因为`<p> </p>`并且比覆盖提到的类来获得相同的结果更耗时。

```
public SpannableStringBuilder trimTrailingWhitespace(
        SpannableStringBuilder spannableString) {

    if (spannableString == null)
        return new SpannableStringBuilder("");

    int i = spannableString.length();

    // loop back to the first non-whitespace character
    while (--i >= 0 && Character.isWhitespace(spannableString.charAt(i))) {
    }

    return new SpannableStringBuilder(spannableString.subSequence(0, i + 1));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T04:34:40.147

好吧，这只是一个关于方法的回合。我遇到过同样的问题。你有两个选择，

1）正如您所说，段落标签的工作方式与您怀疑的方式相同。它的作用是将两个“\n”值附加到每个 <\p> 标记的末尾。因此，您可以将 html 转换为字符串并删除通常是两个“\n”的最后两个字符

或者

2）您已经进入了 Html 类本身。也就是说，您必须重写 HTML 类并`handleP(SpannableStringBuilder text)`稍微查找和更改其核心逻辑。

```
private static void handleP(SpannableStringBuilder text) {
    int len = text.length();

    if (len >= 1 && text.charAt(len - 1) == '\n') {
        if (len >= 2 && text.charAt(len - 2) == '\n') {
            return;
        }
        text.append("\n");
        return;
    }

    if (len != 0) {
        text.append("\n\n");

    }
} 
```

正如您在此处看到的，它附加了两个“\n”，`len!=0`您必须在其中进行更改。

# linux - 无法使用 jre 1.7.0_05 在科学 linux 上启动 MATLAB guis (GUIDE)

> ID：11624154
> 
> 赞同：0
> 
> 时间：2012-07-24T04:25:52.183
> 
> 标签：linux, matlab, java, matlab-guide

问题：GUIDE gui 缺少它们常用的功能（下拉菜单、按钮等）。它们只是显示为带有边框的空窗口，这些边框描绘了不同按钮的位置。该问题似乎与我正在使用的 jre 版本有关。我不知道该怎么做。

这是 matlab 使用的环境变量。/usr/java/default 指向 jre_1.7.0_05 的根目录，包含 bin、lib 等。

```
------------------------------------------------------------------------
->      (.matlab7rc.sh) sourced from directory (DIR = $MATLAB/bin)
->      DIR = /opt/matlab/R2011b/bin
------------------------------------------------------------------------
        a = argument  e = environment  r = rcfile  s = script
------------------------------------------------------------------------
->  r   MATLAB              = /opt/matlab/R2011b
->      LM_LICENSE_FILE     = (variable not defined)
->      MLM_LICENSE_FILE    = (variable not defined)
->  s   AUTOMOUNT_MAP       = 
->  e   DISPLAY             = :0.0
->  r   ARCH                = glnxa64
->  s   TOOLBOX             = /opt/matlab/R2011b/toolbox
->  r   XAPPLRESDIR         = /opt/matlab/R2011b/X11/app-defaults
->  r   XKEYSYMDB           = /opt/matlab/R2011b/X11/app-defaults/XKeysymDB
->  e   MAX_OPEN_FILES      = 1024
->  s   _JVM_THREADS_TYPE   = 
->  e   MATLAB_JAVA         = /usr/java/default
->  s   MATLAB_MEM_MGR      = 
->  s   MATLAB_DEBUG        = 
->  s   LD_LIBRARY_PATH     = /opt/matlab/R2011b/sys/os/glnxa64:/opt/matlab/R2011b/bin/glnxa64:/opt/matlab/R2011b/extern/lib/glnxa64:/us
r/java/default/lib/amd64/native_threads:/usr/java/default/lib/amd64/server:/usr/java/default/lib/amd64
->  a   arglist             = 
->  e   SHELL               = /bin/bash
->  e   PATH                = /usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/bin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:45:50.240

底线是 MATLAB 中的很多东西都与 Java 7 中断，恢复到最新的 Java 6（您可以同时安装两者）。

只需将`$MATLAB_JAVA`环境变量设置为指向 JRE6 安装。

# struts2 - 如何更改 jquery struts2 对话框（远程）的 remoteurl？

> ID：11624156
> 
> 赞同：1
> 
> 时间：2012-07-24T04:26:16.673
> 
> 标签：struts2, struts

我正在使用 struts2-jquery 插件和使用对话框（远程），所以我在对话框代码之前指定了 remoteurl，如下所示：

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<html>
  <head>
    <sj:head jqueryui="true"/>
  </head>
  <body>
    <s:url var="remoteurl" action="myremoteaction"/>
    <sj:dialog id="mydialog3" href="%{remoteurl}" title="Remote Dialog open on Click" autoOpen="false"/>
   <sj:a openDialog="mydialog3">Open Dialog</sj:a>
  </body>
</html> 
```

当我首先单击超链接而不是直接打开对话框时，我想更改其 remoteurl 然后想打开它有人能告诉我我该怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:33:31.010

你可以试试这个。我没有测试过它，但我相信它会给你一个关于如何解决问题的线索。`href`在打开对话框之前更改属性的值，如下所示：

```
$("#mydialog3").dialog( "option" , "href", your_new_url );
$("#mydialog3").dialog('open') 
```

您还可以访问[Struts2 jquery 展示](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)页面以获得更多说明。

# cocoa - NSSound currentTime 遇到问题

> ID：11624164
> 
> 赞同：0
> 
> 时间：2012-07-24T04:27:00.607
> 
> 标签：cocoa, ime, nssound

我正在使用 NSSound，我可以让声音正确播放/暂停，但由于某种原因，我无法让 currentTime 方法返回零以外的任何内容。

这是我遇到问题的代码：

```
NSSound* sound = [[NSSound alloc] initWithContentsOfFile:@"path_to_sound.mp3" byReference:NO];
[sound play];
sleep(1);
NSLog(@"Current time: %f", [sound currentTime]); 
```

声音播放但 NSLog 始终返回零。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:22:15.217

`NSSound`默认情况下使用默认声音设备。[您可以使用NSSound](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSSound_Class/NSSound_Class.pdf)类`setPlaybackDeviceIdentifier:`的方法更改输出设备。 看看[这个](http://fdiv.net/2008/08/12/nssound-setplaybackdeviceidentifier-coreaudio-output-device-enumeration)以及[如何让音频设备 UID 传递到 NSSound 的 setPlaybackDeviceIdentifier:](https://stackoverflow.com/questions/1983984/how-to-get-audio-device-uid-to-pass-into-nssounds-setplaybackdeviceidentifier)以获取声音输出设备的唯一标识符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:40:17.160

我没有机器来测试东西，但我希望您可以从以下内容中学到您需要的东西：

```
NSLog(@"Playback on %@, current time: %@ / %@",
   [sound playbackDeviceIdentifier], [sound currentTime], [sound duration]); 
```

# events - Visual c++ 表单keydown事件没有响应

> ID：11624165
> 
> 赞同：0
> 
> 时间：2012-07-24T04:27:10.520
> 
> 标签：events, c++-cli, keydown

所以我甚至在我的表单中添加了 keydown 以尝试它但是当我单击任何按钮时没有任何反应，我没有忘记启用密钥预览选项但仍然没有希望这里是代码：

```
private: System::Void Form3_KeyDown( Object^ /*sender*/, System::Windows::Forms::KeyEventArgs^ e )
{
    if ( e->KeyCode == Keys::F1 )
    {
        textBox2->Text="Hey";
    }
    if ( e->KeyCode == Keys::Return )
    {
        textBox2->Text="Hey";
    }
    if ( e->KeyCode == Keys::E )
    {
        textBox2->Text="Hey";
    }
    if ( e->KeyCode == Keys::Shift )
    {
        textBox2->Text="Hey";
    }
    if ( e->KeyCode == Keys::NumPad0 )
    {
        textBox2->Text="Hey";
    }
    if ( e->KeyCode == Keys::Down )
    {
        textBox2->Text="Hey";
    }
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:19:56.103

将 Form KeyPreview 属性设置为 True。

# regex - 在 vi/vim 中保留某些“单词”的同时替换

> ID：11624166
> 
> 赞同：8
> 
> 时间：2012-07-24T04:27:11.340
> 
> 标签：regex, vim, replace, vi

例如，如果我有`$asd['word_123']`并且我想用 替换它`$this->line('word_123')`，则保留“word_123”。我怎么能那样做？

通过使用这个：

```
%s/asd\[\'.*\'\]/this->line('.*')/g 
```

我将无法在两者之间保留措辞。请赐教。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-24T04:30:42.677

使用正则表达式，您可以执行类似的操作`:%s/\$asd\['\([^']*\)'\]/$this->line('\1')/g`

## 一步步：

`%s`- 替换整个文件

`\$asd\['`- 匹配“$asd['”。注意`$`and`[`需要转义，因为它们在正则表达式中具有特殊含义。

`\([^']*\)`-`\( \)`可用于选择所谓的“原子”，以便您可以在替换中使用它。`[^']`表示任何**不是**a 的东西`'`，并且`*`表示匹配其中的 0 个或多个。

`'\]`- 完成我们的比赛。

`$this->line('\1')`- 替换为我们想要的，并`\1`替换为我们之前匹配的原子。

`g`- 对每行上的多个匹配项执行此操作。

## 替代品（宏观）

除了正则表达式，您还可以使用宏。例如，

```
qq/\$asd<Enter>ct'$this->line(<Esc>f]r)q 
```

然后`@q`根据需要多次。你也可以`@@`在你用过`@q`一次之后，或者`80@q`如果你想用80次就可以。

## 替代（：规范）

在某些情况下，使用`:norm`可能是最好的选择。例如，如果您有一小段代码并且您正在匹配一个独特的字符或位置。如果您知道“$”只出现在特定代码块的“$asd”中，您可以直观地选择它并

```
:norm $T$ct'this->line(<C-v><Esc>f]r)<Enter> 
```

有关更有效地使用 :norm 的讨论，请阅读`:help :norm`这篇[reddit 帖子](http://www.reddit.com/r/vimgolf/comments/wmtep/abusing_macros_part_1_normal/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T05:53:58.627

尝试使用

```
:%s/\$asd\[\'\([^\']\+\)\'\]/$this->line('\1')/g 
```

# android - Android Market - 应用程序不适用于设备

> ID：11624172
> 
> 赞同：2
> 
> 时间：2012-07-24T04:27:31.447
> 
> 标签：android, google-play

我将我的 APK 发布到 Android 市场。我可以通过搜索它`https://play.google.com/store/search?q=[package name]`，但我无法将它安装在我正在运行`Android OS 2.3.6`的 Nexus One 设备上，弹出窗口显示`not compatible with your device`。清单文件配置如下：

```
<supports-screens 
    android:largeScreens="true"
    android:smallScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:anyDensity="true"
    />
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.RECORD_AUDIO"></uses-permission>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />      
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

我的配置中的什么问题导致我的 Nexus One 设备被过滤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:34:38.040

There's nothing wrong with your manifest; I'd wager you have Copy Protection enabled. From [the documentation](http://developer.android.com/guide/google/play/filters.html#other-filters):

> To copy protect an application, set copy protection to "On" when you configure publishing options for your application. Google Play will not show copy-protected applications on developer devices or unreleased devices.

Since the Nexus One is a developer device, it will show as incompatible. I ran into this same issue on my Galaxy Nexus.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:29:46.423

将此添加到您的清单中

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />//=======> the target version is your wish(> 10) 
```

# c - ocaml 顶级和原生库

> ID：11624174
> 
> 赞同：3
> 
> 时间：2012-07-24T04:27:46.237
> 
> 标签：c, interface, ocaml, command-line-arguments

我有一个调用 C 代码的库。它使用 -custom、-cclib、-l 标志编译，当我使用 ocamlc 针对库编译我的代码时，它工作正常，

但是当我使用“ocaml”顶级运行脚本时，例如：

```
ocaml -I /opt/godi/lib/ocaml/pkg-lib/xxxx xxx.cma myprog.ml 
```

它说：

```
Error: The external function `caml_yyyy' is not available 
```

我需要额外的参数来告诉顶层吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:29:08.717

您应该使用“ocamlmktop”构建自己的顶层：

> $ ocamlmktop -custom -I /opt/godi/lib/ocaml/pkg-lib/xxxx xxx.cma -o ocaml_with_xxx

然后，您可以使用它：

> $ ./ocaml_with_xxx -I /opt/godi/lib/ocaml/pkg-lib/xxxx

Note that you still need the -I so that the toplevel can find the interface files of the library that it contains.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:19:37.180

IIRC 你不能使用`-custom`在顶层编译的库。您应该编译可动态加载的存根，以便顶层可以拾取它们。[这对于oasis](http://oasis.forge.ocamlcore.org/)等非常容易实现，如果手动调用 ocaml 工具则涉及更多。

# oop - 系统verilog /oop

> ID：11624175
> 
> 赞同：1
> 
> 时间：2012-07-24T04:27:54.753
> 
> 标签：oop, system-verilog

下面代码中的对象只被实例化了一次，对吧？所以已经实例化的单个对象应该包含一个值为 2 的整数 i 字段。为什么`p.i`给出 1 而不是 2？这是 SystemVerilog 特有的吗？还是所有 oop 语言的行为都相似？

```
class Packet; 
  integer i = 1;
  function integer get();
    get = i;
  endfunction 
endclass

class LinkedPacket extends Packet;
  integer i = 2;
  function integer get();
    get = -i;
  endfunction 
endclass

LinkedPacket lp = new;
Packet p = lp;
j = p.i; // j = 1, not 2
j = p.get(); // j = 1, not -1 or –2 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:36:02.163

此示例粘贴自 1800-2009 SystemVerilog 规范的第 8.13 节，该规范解释了该问题。我的观点是，像这样覆盖班级成员是一个非常糟糕的主意。规范中的示例只是为了说明它是如何工作的。

类属性`integer i`在基类和子类中都定义。此声明`LinkedPacket`覆盖并隐藏`Packet`.

从规范：

> 在这种情况下，对 p 的引用访问 Packet 类的方法和类属性。因此，例如，如果 LinkedPacket 中的类属性和方法被覆盖，那么这些通过 p 引用的被覆盖的成员将获得 Packet 类中的原始成员。从 p 开始，LinkedPacket 中的新成员和所有被覆盖的成员现在都被隐藏了。

Since you are calling the function through a handle to `Packet` you get the values from `Packet`.

In addition, the `get()` function is not declared `virtual`. This is why you do not see the integer being negated. This is also noted in the example in the specification.

> To call the overridden method via a base class object (p in the example), the method needs to be declared virtual (see 8.19).

This behavior is not unique to SystemVerilog and is similar to what you would observe in other OO languages.

If you want to have a different value for `i` in `LinkedPacket`, the proper way to do this would be to only declare `i` in the base class, and initialize it differently in the constructor.

e.g.

```
class Packet; 

  integer i;

  function new();
    i = 1;
  endfunction

  virtual function integer get();
    get = i;
  endfunction 

endclass

class LinkedPacket extends Packet;

  function new();
    i = 2;
  endfunction

  virtual function integer get();
    get = -i;
  endfunction 

endclass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:03:54.813

我不是 SystemVerilog 专家，但我希望`p.i`返回`1`，因为这就是你初始化它的目的。 `p.get()`只是返回相同值的另一种方式，所以也将是`1`.

`j=get();`将（我认为）返回`-2`- 没有对象前缀，我希望它调用类之外的第二个函数。

# c# - 颜色标准化

> ID：11624176
> 
> 赞同：0
> 
> 时间：2012-07-24T04:27:59.600
> 
> 标签：c#, image-processing, colors, normalization

我对我的图像进行了标准化，并且我已经完成了图像的 RGB 值。任何人都可以帮助我对 c# 代码进行 RGB 规范化，比如一些关于如何写出规范化代码的初学者。谢谢！

* * *

private void normalization_Click(object sender, EventArgs e) { // for (int x = 0; x < pictureBox1.Width; x++) {

```
 // for (int y = 0; y < pictureBox1.Height; y++)
            {

                try
                {
                    Bitmap img = new Bitmap(pictureBox1.Image);
                    Color c;
                    for (int i = 0; i < img.Width; i++)
                    {
                        for (int j = 0; j < img.Height; j++)
                        {
                            c = img.GetPixel(i, j);
                            int r = Convert.ToInt16(c.R);
                            int g = Convert.ToInt16(c.G);
                            int b = Convert.ToInt16(c.B);

                            d = r / (r + g + b);
                            h = g / (r + g + b);
                            f = b / (r + g + b);

                            img.SetPixel(i, j, Color.FromArgb(d, h, f));

                            Color pixelColor = img.GetPixel(i, j);
                            float normalizedPixel = (d + h + f);
                            Color normalizedPixelColor = System.Drawing.ColorConverter.(normalizedPixel);
                            img.SetPixel(x, y, normalizedPixelColor);

                        }
                    }

                }
                catch (Exception ex) { } 
```

你好。我已经完成了公式和所有规范化。我现在面临的问题是我无法从列表框中获取 RGB 像素的值并使用公式对其进行规范化，然后将像素放回图片框/图像中。以上是我尝试将标准化的 RGB 像素放回图片框的代码。我可以寻求一些帮助吗，因为它仍然没有使我的图像正常化。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T05:00:43.480

如果您不介意在您的项目中有依赖项，请查看[AForge.NET 。](http://code.google.com/p/aforge/)作为奖励，您将拥有许多其他可用的算法，而无需重新发明 for 循环......

# android - 恢复 Android 活动

> ID：11624181
> 
> 赞同：2
> 
> 时间：2012-07-24T04:28:14.523
> 
> 标签：android, onresume

我有一个简单的应用程序，我在其中创建了一个 SurfaceView 类，然后在主活动中，我创建了该类的一个对象，然后将此 SurfaceView 添加到相对布局中，并将内容视图设置为相对布局。

```
package com.my.game;
import com.google.ads.Ad;
import com.google.ads.AdListener;
import com.google.ads.AdRequest;
import com.google.ads.AdRequest.ErrorCode;
import com.google.ads.AdSize;
import com.google.ads.AdView;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.view.MotionEvent;
import android.view.View;
import android.view.Window;
import android.widget.RelativeLayout;

public class ShootLetters extends Activity {

    private Panel panel;
    private int newWidth;
    private int newHeight;

    private AdView adView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Bitmap bg = BitmapFactory.decodeResource(this.getResources(),
                R.drawable.shooting_background);
        ;

        int width = bg.getWidth();
        int height = bg.getHeight();

        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);

        newWidth = metrics.widthPixels;

        newHeight = metrics.heightPixels;
        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;
        // CREATE A MATRIX FOR THE MANIPULATION
        Matrix matrix = new Matrix();
        // RESIZE THE BIT MAP
        matrix.postScale(scaleWidth, scaleHeight);

        Bitmap resizedBackGround = Bitmap.createBitmap(bg, 0, 0, width, height,
                matrix, false);

        Window win = getWindow();
        Drawable d = new BitmapDrawable(resizedBackGround);
        win.setBackgroundDrawable(d);

        panel = new Panel(this, newWidth, newHeight);

        panel.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    panel.setClickX(event.getX());
                    panel.setClickY(event.getY());
                }
                return true;
            }

        });

        adView = new AdView(this, AdSize.BANNER, "admobidxxx222");

        RelativeLayout rl = new RelativeLayout(this);
        rl.addView(panel);
        rl.addView(adView);

        setContentView(rl);

        // Initiate a generic request to load it with an ad
        adView.loadAd(new AdRequest());
    }

    @Override
    public void onDestroy() {
        if (adView != null) {
            adView.destroy();
        }
        panel.stopThread();
        panel = null;

        super.onDestroy();
    }

} 
```

这适用于启动和停止应用程序。

问题是当另一个活动出现在这个活动之上时，它的行为方式不稳定（在这个阶段不需要详细信息，因为有时它会崩溃，有时它会与丢失的布局对象一起工作）。

我读到我应该实现`onPause()`&`onResume()`方法来处理这个问题。我只需要暂停活动或在恢复时恢复它。不需要持久数据。

在这种情况下，我应该在哪些方法中添加什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:29:38.947

我猜它是你的`Panel`那是表面视图？我看到您正在使用 onDestroy 中的线程做一些事情，但这还不够。您对实现有正确的预感`onPause()`，`onResume()`现在我的想法（无法查看所有代码）是您没有正确处理线程。在扩展 Surfaceview 的 Panel 类中，您应该具有以下两个功能：

```
 public void pause(){
        Loop = false;
        while (true){
            try{
                panelThread.join();//end it
            }catch (InterruptedException e){
                e.printStackTrace();
            }
            break;
        }
        panelThread = null;
    }
    public void resume(){
        Loop = true;
        panelThread = new Thread(this);
        panelThread.start();
    } 
```

如果您没有在`run()`方法中使用循环，请忽略循环部分。

然后，在您的活动`onPause()`和`onResume()`方法中，您分别调用`panel.pause()`和`panel.resume()`。这确保表面视图线程以安全的方式处理。

# iphone - 验证自动续订订阅的收据

> ID：11624183
> 
> 赞同：0
> 
> 时间：2012-07-24T04:28:35.197
> 
> 标签：iphone, ios, ios4, in-app-purchase

在验证自动续订订阅的收据时，我是否需要像对receipt_data 所做的那样对共享密钥进行编码？

请告诉我

```
{

    "receipt-data" : "(receipt bytes here)",

    "password"     : "(shared secret bytes here)"

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:46:18.433

试试这个来解决你所有的困惑[https://github.com/MugunthKumar/MKStoreKit](https://github.com/MugunthKumar/MKStoreKit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T23:52:23.183

共享秘密只是一个字符串——按“密码”参数原样传递。它不像收据那样是 base64 编码的。

# asp.net - DropDownList，MVC3的远程验证，在我的情况下没有触发

> ID：11624185
> 
> 赞同：0
> 
> 时间：2012-07-24T04:29:08.827
> 
> 标签：asp.net, asp.net-mvc-3, validation

我正在使用 ASP.NET MVC3 和 EF 4.1 我的模型中有两个 DropDownList，它是必需的，也不重复。我想要远程验证功能：ValidateDuplicateInsert 在用户提交数据时触发。但我无法触发 ValidateDuplicateInsert 函数。我哪里错了？

我的模特

```
 [Key]
    public int CMAndOrgID { get; set; }

    [Display(Name = "CM")]
    [Required(ErrorMessage = "CM is required.")]
    [Remote("ValidateDuplicateInsert", "CMAndOrg", HttpMethod = "Post", AdditionalFields = "CMID, OrganizationID", ErrorMessage = "CM is assigned to this Organization.")]
    public int? CMID { get; set; }

    [Display(Name = "Organization")]
    [Required(ErrorMessage = "Organization is required.")]
    public int? OrganizationID { get; set; }

    public virtual CM CM { get; set; }
    public virtual Organization Organization { get; set; } 
```

我的 CMAndOrg 控制器中的 ValidateDuplicateInsert 函数

```
 [HttpPost]
    public ActionResult ValidateDuplicateInsert(string cmID, string orgID)
    {
        bool flagResult = true;
        foreach (CMAndOrg item in db.CMAndOrgs)
        {
            if (item.CMID.ToString() == cmID && item.OrganizationID.ToString() == orgID)
            {
                flagResult = false;
                break;
            }
        }
        return Json(flagResult);
    } 
```

我的观点

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>CMAndOrg</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.CMID, "CM")
    </div>
    <div class="editor-field">
        @Html.DropDownList("CMID", String.Empty)
        @Html.ValidationMessageFor(model => model.CMID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.OrganizationID, "Organization")
    </div>
    <div class="editor-field">
        @Html.DropDownList("OrganizationID", String.Empty)
        @Html.ValidationMessageFor(model => model.OrganizationID)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:16:04.867

MVC3 中有一个与下拉列表中不显眼的验证相关的错误。请参考此[http://aspnet.codeplex.com/workitem/7629[^]](http://www.codeproject.com/Articles/249452/ASP-NET-MVC3-Validation-Basic?msg=4330725#xx4330725xx)链接以获取更多详细说明。

简而言之，您不能对类别集合和类别字段使用相同的名称，因此只需更改您的集合名称并更新视图中的以下行

```
@Html.DropDownList("CategoryID", String.Empty) 
```

有了这个

```
@Html.DropDownListFor(model => model.CategoryID, new SelectList((System.Collections.IEnumerable)ViewData["Categories"], "Value", "Text")) 
```

再次感谢亨利赫

原文链接 [http://www.codeproject.com/Articles/249452/ASP-NET-MVC3-Validation-Basic?msg=4330725#xx4330725xx](http://www.codeproject.com/Articles/249452/ASP-NET-MVC3-Validation-Basic?msg=4330725#xx4330725xx)

# javascript - 在 webview-iphone 中通过 javascript 清除 cookie

> ID：11624188
> 
> 赞同：1
> 
> 时间：2012-07-24T04:29:39.877
> 
> 标签：javascript, iphone, cookies, logout

我正在做一个 iphone 应用程序，我使用网站的 OAuth api 登录以进行登录过程，并且 uiwebview 中的状态始终保持登录状态。我认为清除 uiwebview 中的 cookie 会帮助我注销。我想对应用程序说一个注销选项。我这样做是为了清除 uiwebview 中的所有 cookie。

1）我创建了一个 script.js 并将其添加到具有以下代码的项目中

```
function deleteAllCookies() {
    var cookies = document.cookie.split(";");

    for (var i = 0; i < cookies.length; i++) {
       var cookie = cookies[i];
       var eqPos = cookie.indexOf("=");
       var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
       document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
    }
} 
```

2）我已将此代码添加到具有注销按钮的视图控制器之一中。单击按钮后，将执行此代码

```
- (void)injectJavascript:(NSString *)resource {
NSString *jsPath = [[NSBundle mainBundle] pathForResource:resource ofType:@"js"];
NSString *js = [NSString stringWithContentsOfFile:jsPath encoding:NSUTF8StringEncoding error:NULL];

[webView stringByEvaluatingJavaScriptFromString:js];
}

-(void)logoutFromApp
{    
[self injectJavascript:@"script"];
} 
```

首先，我什至不确定这段代码是否有效。我怎么知道它是否清除了所有的cookies。？意思是，如何通知我它是否已成功清除？

我选择做的是最好的方法还是有其他方法可以提供注销选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:33:05.090

好的，我解决了这个问题..

```
#import <Foundation/NSHTTPCookie.h>

NSHTTPCookie *aCookie;
for (aCookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) 
{
    [[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:aCookie];
} 
```

这将删除 uiwebview 中的所有 cookie。效果很好。

# python - 如何在 Python 中将字符串转换为字节数组

> ID：11624190
> 
> 赞同：78
> 
> 时间：2012-07-24T04:29:42.610
> 
> 标签：python

假设我有一个 4 个字符的字符串，我想将此字符串转换为一个字节数组，其中字符串中的每个字符都被转换为其十六进制等效项。例如

```
str = "ABCD" 
```

我试图让我的输出成为

```
array('B', [41, 42, 43, 44]) 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-24T04:39:51.113

编码函数可以在这里帮助你，编码返回字符串的编码版本

```
In [44]: str = "ABCD"

In [45]: [elem.encode("hex") for elem in str]
Out[45]: ['41', '42', '43', '44'] 
```

或者你可以使用数组模块

```
In [49]: import array

In [50]: print array.array('B', "ABCD")
array('B', [65, 66, 67, 68]) 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2015-03-20T14:32:55.190

只需使用一个`bytearray()`字节列表即可。

Python2：

```
s = "ABCD"
b = bytearray()
b.extend(s) 
```

Python3：

```
s = "ABCD"
b = bytearray()
b.extend(map(ord, s)) 
```

顺便说一句，不要`str`用作变量名，因为它是内置的。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-07-19T06:42:40.563

获取字节数组的另一种方法是将字符串编码为 ascii: `b=s.encode('ascii')`。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-05-27T03:13:24.920

这对我有用（Python 2）

```
s = "ABCD"
b = bytearray(s)

# if you print whole b, it still displays it as if its original string
print b

# but print first item from the array to see byte value
print b[0] 
```

参考： http: [//www.dotnetperls.com/bytes-python](http://www.dotnetperls.com/bytes-python)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-04-22T17:17:51.543

这适用于 Python 2 和 3：

```
>>> bytearray(b'ABCD')
bytearray(b'ABCD') 
```

***注意字符串以`b`.***

要获取单个字符：

```
>>> print("DEC HEX ASC")
... for b in bytearray(b'ABCD'):
...     print(b, hex(b), chr(b))
DEC HEX ASC
65 0x41 A
66 0x42 B
67 0x43 C
68 0x44 D 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-08-01T23:45:00.217

根据您的需要，这可以是一步或两步

1.  用于`encode()`将字符串转换为字节，不可变
2.  用于`bytearray()`将字节转换为字节数组，可变

```
s="ABCD"
encoded=s.encode('utf-8')
array=bytearray(encoded) 
```

以下验证在 Python 3.7 中完成

```
>>> s="ABCD"
>>> encoded=s.encode('utf-8')
>>> encoded
b'ABCD'
>>> array=bytearray(encoded)
>>> array
bytearray(b'ABCD') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-24T04:51:48.360

```
s = "ABCD"
from array import array
a = array("B", s) 
```

如果你想要十六进制：

```
print map(hex, a) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-15T14:04:59.953

由于没有一个答案是准确的`array('B', [41, 42, 43, 44])`，并且[avasal 的答案](https://stackoverflow.com/a/11624266/8849755)在 Python 3 中失败了，我在这里发布我的替代方案：

```
import array
s = 'ABCD'
a = array.array('B', [ord(c) for c in s])
print(a) 
```

哪个打印

```
array('B', [65, 66, 67, 68]) 
```

请注意，65-68 是“ABCD”的正确 ASCII。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-12-19T15:08:09.050

对于 python 3，它适用于 @HYRY 发布的内容。我需要它来处理 dbus.array 中的返回数据。这是它起作用的唯一方法

```
s = "ABCD" 
```

从数组导入数组

```
a = array("B", s) 
```

# c - 此 C 代码的不确定输出

> ID：11624192
> 
> 赞同：0
> 
> 时间：2012-07-24T04:29:50.387
> 
> 标签：c

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)
> [为什么 sizeof(x++) 不增加 x？](https://stackoverflow.com/questions/8225776/why-does-sizeofx-not-increment-x)

这里的值为`i`5，但我猜应该是 6 或 7。什么原因？

```
int main(void){
    int i=5,j;
    j=sizeof(i++ + ++i);
    printf("%d %d",i,j);
} 
```

# sql - 在 Java 中的 SQL Azure 报告上的表单身份验证登录

> ID：11624193
> 
> 赞同：1
> 
> 时间：2012-07-24T04:29:52.570
> 
> 标签：sql, azure, forms-authentication, reporting, http-post

我正在尝试执行 Http Post 以自动在 Sql Azure 上进行身份验证和登录，并重定向到 Java 中的报告参数网页。

例如，

使用以下 url 进行 Httppost 登录

[https://INSTANCE.reporting.windows.net/ReportServer/logon.aspx?ReturnUrl=%2freportserver%2freportserver%3f%2fTMReport%2fAccounts&/TMReport/Accounts](https://INSTANCE.reporting.windows.net/ReportServer/logon.aspx?ReturnUrl=%2freportserver%2freportserver%3f%2fTMReport%2fAccounts&/TMReport/Accounts)

身份验证成功后将重定向到以下网址。

[https://INSTANCE.reporting.windows.net/ReportServer/Pages/ReportViewer.aspx?/TMReport/Accounts](https://INSTANCE.reporting.windows.net/ReportServer/Pages/ReportViewer.aspx?/TMReport/Accounts)

我想问一下

Q1：是否可以通过这种方式在 SQL Azure 上实现表单身份验证，如果可以，如何在 Java 中进行 Http Post login SQL Azure 报告？

Q2：尝试登录SQL Azure Report Server为ReportViewer控件提供身份验证时，如何获取/保存Java中的身份验证cookie（sqlAuthCookie）？

Q3：有没有办法在Java中使用.Net ReportViewer Control？

Q4: 请推荐可以在 Java 中使用的 ReportViewer 控件的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:21:40.233

使用 SQL Azure 模型的基于表单的身份验证使用**SqlMembershipProvider**和**SqlRoleProvider**来针对存储在 SQL Azure 数据库中的数据对托管在 Windows Azure 中的 ASP.NET Web 应用程序的用户进行身份验证。.NET Framework 附带的 SqlMembershipProvider 和 SqlRoleProvider 都不适用于 Java。.net ReportViewer 控件也是如此，它是基于 .net Framework 的控件，需要 .net 运行时才能工作，并且没有等效的方法可以在 Java 中使用这些（或任何 .net）控件。

将 Java 用于 SQL 数据库（以前称为 SQL Azure）报告，您可以使用可与 Java 一起使用的 Crystal Reports。

# ruby-on-rails - 何时使用 Cucumber 和 Rails 进行测试

> ID：11624194
> 
> 赞同：1
> 
> 时间：2012-07-24T04:30:00.680
> 
> 标签：ruby-on-rails, unit-testing, rspec, cucumber, functional-testing

当我在 Cucumber 和 Ruby on Rails 中编写测试时，我一直在问自己这个问题。我什么时候测试“我如何创建 X”与“可以创建 X”

我如何创建 X 似乎包括测试用户创建 X 所需的实际步骤，通常是通过表单。比如导航到新页面，点击“create X”链接，填写表格点击create，就可以看到X已经创建好了。

另一种选择，“可以创建 x”，是系统、模型和控制器是否处理创建 X 的能力，也就是它们是否正确连接。

我通常会测试这两种情况吗？我刚刚开始为我的业余项目写一个问答部分，并且无法决定是否编写类似的测试（我已经删除了背景，它们有点长）

```
When I click "Ask the seller a question"
And I fill out the form with a question and submit the form
Then I should see that the question has been created
And the user that posted the job has been notified 
```

还是应该更像

```
When I ask the seller a question
Then I should see that the question has been posted
And the user that posted the job has been notified 
```

区别在于我是通过表单还是工厂创建它，对吗？Rspec 在哪里发挥作用，我认为它应该测试“可以创建 X”，这是否意味着我不应该使用 cucumber 来测试它？

我想我本质上是在看“我用黄瓜测试什么”，但也许我让这件事变得更复杂，但我自己无法得出结论。你有任何见解都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:15:59.837

您描述为“我如何创建 X”的方法更好，因为您从用户角度进行测试，这对 Cucumber 来说更自然/更受欢迎。

此外，从文档的角度来看，这种方法更好 - >您描述了某些东西是如何工作的，而不是“预期的”。因此，如果您需要茶点或项目中有新开发人员 -> 您或他可以只阅读一个场景。

您可以在此处阅读有关用户视角测试的一些信息：[http ://www.businesstechnologyarticles.eu/testing-the-user-perspective-with-ruby-on-rails](http://www.businesstechnologyarticles.eu/testing-the-user-perspective-with-ruby-on-rails)

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T10:01:46.187

现在我会以不同的方式回答。Cucumber 场景应该更像是“可以创建 X”（我的意思是您的第二个示例），但仅使用 Capybara 在步骤中使用很少的 Ruby 代码、RSpec、FactoryGirl ... 由于 web_steps 已从 Cucumber 中删除，因此您不应该被诱惑编写这样的步骤：

```
When I click "Ask the seller a question"
And I fill out the form with a question and submit the form 
```

这是一个非常糟糕的方法。

第二个例子好多了

```
When I ask the seller a question
Then I should see that the question has been posted
And the user that posted the job has been notified 
```

它更多地是关于总体思路而不涉及细节

但是您应该主要编写 Capybara 步骤，其中将包含有关“我如何创建 X”的所有详细信息。

例子：

```
When(/^I ask the seller a question$/) do
  click_link 'Ask the seller a question'
  fill_in 'my_form', with: 'My question'
  click_button 'Submit'
end

Then(/^I should see that the question has been posted$/) do
  expect(page).to have_selector '.alert', text: 'New question has been posted.'
  expect(page).to have_content 'Question: My question'
end 
```

# ios - iOS：sizeWithFont：用于自定义字体

> ID：11624199
> 
> 赞同：2
> 
> 时间：2012-07-24T04:30:16.937
> 
> 标签：ios, uilabel, sizewithfont

我一直在插话，我需要使用 sizeWithFont: 方法来正确排列我的布局，但它似乎不适用于自定义字体。有没有办法让它工作，或者我可以使用另一种方法？

我对此感到很困惑。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:24:59.840

sizeWithFont 肯定可以工作，但如果它给您带来问题，那么有一个解决方法。您可以将文本放在 UITextView 中，将其添加到布局中，然后检索实际文本大小并进行相应调整。这是我的一个项目中的一些示例代码：

```
 // Put in the title in
    self.titleView = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, 195, 195)];
    self.titleView.font = [UIFont fontWithName:@"Bliss Pro" size:20.0];
    [self addSubview:self.titleView];

    self.titleView.text = @"Add your text here";

    // Now get the actual size of the text and resize the title view's frame
    CGRect frame = self.titleView.frame;
    frame.size.height = self.titleView.contentSize.height;
    self.titleView.frame = frame; 
```

这有点骇人听闻，但它确实有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T05:46:45.200

```
#define kFontSize 14.0    //modify your font size
CGSize size = [yourView sizeWithFont:[UIFont boldSystemFontOfSize:kFontSize]]; 
```

# php - 我们可以分割 PayPal 付款吗？

> ID：11624203
> 
> 赞同：-1
> 
> 时间：2012-07-24T04:30:57.490
> 
> 标签：php, paypal

我的客户有一个要求，我将说明：

假设有人从我客户的网站上购买了一些东西（价值 100 美元）。现在我的客户希望将 85 美元交给该物品的所有者，而我的客户将保留 15 美元作为佣金。

这可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:37:49.713

请参阅PayPal 网站上的[自适应付款。](https://www.x.com/developers/paypal/products/adaptive-payments)

Adaptive Payments API 允许商家和开发人员向几乎任何人付款并设置自动付款。他们可以创建管理付款、付款预批准和退款的应用程序。他们还可以点对点**汇款、以并行和链式模式拆分付款**、接受客人付款和安排付款。自适应支付 API 适用于多个平台，包括 Web 和移动环境。

# javascript - 关于使用 JS 创建和附加元素的良好实践

> ID：11624205
> 
> 赞同：0
> 
> 时间：2012-07-24T04:31:23.497
> 
> 标签：javascript, jquery

**示例代码**

```
var jqxhr=$.getJSON("http://search.twitter.com/search.json?callback=?",{q:query},
                function(data) {
                    ... question.               
                }); 
```

**问题**

现在我需要为每个推文结果创建类似这样的东西（例如......）

```
<article class="tweet">
    <header>
        <img class ="tweet_img"src="data.profile_image_url"/> 
    </header>
    <p class="tweet-text">data.text</p> 
</article> 
```

好吧，我知道将每个结果附加到文档的几种方法：

1.  创建一个大的 HTML 字符串并从**JSONP**添加数据并将其附加到某个容器。
2.  创建 ap 元素，标题元素...与它们一起工作，然后将最终元素附加到某个容器。

现在的问题是：根据您的经验，正确的方法是什么？
我的意思是使用良好原则的正确方法。

请不要询问 html，这是愚蠢的例子。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:39:52.717

好吧，最佳实践会告诉您不要使用 DOM 元素的 innerHTML 属性，这是您使用选项 1 所做的事情。但除非您担心立即使用 Javascript 操作代码、附加事件或安全问题围绕标签注入（我不知道这是一个多大的问题了）然后创建一个 HTML 字符串并使用 innerHTML 插入它会更快更容易更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:36:38.350

如果您想将一些事件处理程序附加到元素，那么您应该单独生成它们。

但是如果您不想附加任何事件处理程序，那么我会推荐第一种方法

```
$("body").append('<article class="tweet"><header><img class ="tweet_img" src="'+data.profile_image_url+'"/></header><p class="tweet-text">'+data.text+'</p></article>') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T04:40:18.777

我知道的最简洁的方法是使用像[Mustache](https://github.com/janl/mustache.js)这样的模板系统，而​​不是“JS 中的 HTML”

```
var template = html_string,                   //HTML from a string or from AJAX
    data = {...data...},                      //structured data
    html = $(Mustache.render(template,data)); //wrap in jQuery to operate

html.appendTo(somewhere_in_DOM); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T04:40:27.807

我会推荐你​​使用一些模板引擎，比如[Handlebars.js](http://handlebarsjs.com/)，它是你问题的正确解决方案。

哪个有更多的选项，有更多的条件选项，这些选项在功能上很有用。只需访问上面的链接，您就会有一些想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T05:08:15.830

有几种有效的方法，每种方法都有自己的优势......

仅在您的 java 代码中将 HTML 生成为字符串并将其添加到 .innerHTML 的技术被认为是执行速度最快的方法之一……但它提供的 HTML 验证很少。

或者，您可以直接使用 DOM 方法构建 HTML，创建标签并附加它们以构建结构。这通常更安全，因为您需要进行更多验证，但是 DOM 方法非常冗长，这使得它们输入起来有点痛苦……而且代码更加冗长，因为您必须一次添加一个属性好。

我个人的偏好，特别是因为您已经在使用 JQuery，将使用 JQuery 构建标签和文本节点，并使用 JQuery 将它们放在一起，这允许您以更小的、更易于人工验证的单元来执行此操作，而无需变得过于冗长。

这还有一个优点，即 JQuery 生成新标签的方法为您提供了对不符合 DOM 标准的旧浏览器的额外支持。希望您实际上不必关心您的页面是否适用于那些较旧的浏览器，但更多的兼容性也不会受到伤害。

在这种方法中，您将编写如下内容：

```
var article = $('<article class="tweet"></article>');
var header = $('<header></header>');
var image = $('<img class="tweet_img" src="' + data.profile_image_url + '"></img>');
var tweet = $('<p class="tweet-text">' + data.text + '</p>');

header.append(image);
article.append(header, tweet);
$("#id_of_content_area_to_add_the_tweet_to").append(article); 
```

# python - 从 Github 问题中提取信息的最佳策略是什么？

> ID：11624206
> 
> 赞同：0
> 
> 时间：2012-07-24T04:31:33.597
> 
> 标签：python, git, github, issue-tracking

[这与此](https://stackoverflow.com/questions/11596405/what-is-the-best-strategy-to-extract-information-from-a-jira-issue)问题相同，但针对 Github 而不是 JIRA

你好，

我正在开发[FreedomSponsors——](http://www.freedomsponsors.org)一个开源项目的众筹平台。

我想通过基于问题的 URL 预先填写一些信息来改进“赞助新问题”屏幕。

我的下一个“目标”是 Github 问题跟踪系统。

给定一个 URL，如[https://github.com/whit537/www.gittip.com/issues/14](https://github.com/whit537/www.gittip.com/issues/14)，提取信息的最佳方法是：

*   1：发行密钥：14
*   2：项目问题跟踪网址：[https ://github.com/whit537/www.gittip.com/issues](https://github.com/whit537/www.gittip.com/issues)
*   3：项目名称：www.gittip.com

（好的，这些很简单，都在 URL 中）和

*   4：发行标题：用比特币、莱特币支付

我正在使用蟒蛇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:35:33.747

Github 有一个解决问题的 API，这将是你最好的选择。

[http://developer.github.com/v3/issues/](http://developer.github.com/v3/issues/)

# java - Libgdx + rotate sprite point to the touch position

> ID：11624207
> 
> 赞同：3
> 
> 时间：2012-07-24T04:31:37.317
> 
> 标签：java, libgdx

I'm having problem trying to point my "arrow_sprite" to the touch position.

The result I want is that the arrow(the sprite that I want to rotate)will point to the touch position.

How can I acheive this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:14:04.710

You need to calculate the vector between the touch position and the sprite position. To do so you have to unproject the touch position received through your InputProcessor.

```
public class MyInputProcessor implements InputProcessor {
   ...

   @Override
   public boolean touchDown (int x, int y, int pointer, int button) {
      Vector3 touchDown = new Vector3(x, y, 0);
      camera.unproject(touchDown);
      Vector3 spritePosition = new Vector3(yourSpriteX, yourSpriteY, 0);
      spritePosition.sub(touchDown);
      return false;
   }

   ...
} 
```

Now we have a vector pointing from your sprite to the touch position. From there you just need to calculate the rotation angle. One way would be to use Vector2.angle(), as such creating a Vector2 from the spritePosition Vector3.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T00:15:12.873

如果你想绘制 2D，那么你必须将 SpriteBatch 设置为 Camera.combined，

像这样：yourBatch.setProjectionMatrix(yourCamera.combined);

然后你必须像“批量”所说的那样取消投影相机。

之后，您必须选择是要使用矢量还是二维坐标。角度计算的基本相同结束：

首先定义一个浮点度，然后在 touchDown 方法中使它像这样：

```
degrees = (float) ((Math.atan2 (touchPoint.x - arrowPosition.x, -(touchPoint.y - arrowPosition.y))*180.0d/Math.PI)+90.0f); 
```

假设您对输入和箭头都使用 Vector3 或 2。

然后在渲染箭头精灵时：

```
Batch.draw(Arrow, x, y, originX, originY, width, height, scaleX, scaleY, degrees); 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:16:36.273

就像 Psilopat 说的那样，我们通过以下方式定义度数：

```
degrees = (float) ((Math.atan2 (touchPoint.x - arrowPosition.x, -(touchPoint.y - arrowPosition.y))*180.0d/Math.PI)+90.0f); 
```

但如果旋转看起来不对，请将行尾的“+90.0f”更改为其他内容。我的箭头指向上方，所以我将其更改为“-180.0f”

# android - Android弹出框类似于谷歌许可证？

> ID：11624208
> 
> 赞同：1
> 
> 时间：2012-07-24T04:31:42.717
> 
> 标签：android

嗯，看看android弹出它是带有滚动的许可证文本的方式，无论如何要复制它？画面如下![在此处输入图像描述](../Images/86b90dff96c9e63691c449efd984b861.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:36:57.417

要创建此弹出窗口，您需要这样做。

```
1) create an activity as like your displaying popup

2) add below section to the manifest file 

   <activity android:name=".popupActivity"
              android:label="@string/app_name"
              android:theme="@android:style/Theme.Dialog">//====> this makes the activity to display like pop up when call make to this activity 
```

当您通过意图调用此活动时，它看起来就像您需要的一样..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:53:26.287

**请使用自定义对话框并在其中添加一些滚动视图和线性布局。然后将您的实际文本放入其中。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-09T22:00:36.550

您可以将此 android[弹出库](https://github.com/00ec454/pop)与您的自定义布局一起使用。在您的活动中使用一行代码非常简单。

```
Pop.on(this).with()
                .title(R.string.title) //you can skip if you don't need title
                .layout(R.layout.license).show(); 
```

# perl - Perl --根据当前行中的匹配更改前行中的所有匹配

> ID：11624219
> 
> 赞同：-1
> 
> 时间：2012-07-24T04:33:15.280
> 
> 标签：perl, multiline

我要解析的文件：

```
input Pattern;

input SDF;

input ABC

input Pattern;

output Pattern;

output XYZ; 
```

在 perl 中，通常的操作是逐行扫描。我想检查当前行是否具有`output Pattern;`并且上一行（或所有先前行）是否已将`input Pattern;` 所有先前行匹配更改为`"input Pattern 2;"`，当前行更改为`"output Pattern2;"`.

这很复杂，我希望我已经正确解释了。在 Perl 中是否可以在读取之前扫描和更改之前的行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:45:49.743

如果这是您的数据：

```
my $sfile =
'input Pattern;
input SDF;
input ABC
input Pattern;
output Pattern;
output XYZ;' ; 
```

然后，以下代码段将读取整个文件并相应地更改文本：

```
open my $fh, '<', \$sfile or die $!;
local $/ = undef;                # set file input mode to 'slurp'
my $content = <$fh>;
close $fh;

$content =~ s{ (                   # open capture group
                input \s+ (Pattern); # find occurence of input pattern
                .+?                  # skip some text
                output \s+ \2        # find same for output
               )                   # close capture group
             }
             {                     # replace by evaluated expression
              do{                    # within a do block
                 local $_=$1;        # get whole match to $_
                 s/($2)/$1 2/g;      # substitute Pattern by Pattern 2
                 $_                  # return substituted text
                }                    # close do block
             }esgx; 
```

然后，您可以关闭文件并检查字符串：

```
print $content; 
```

=>

```
input Pattern 2;
input SDF;
input ABC
input Pattern 2;
output Pattern 2;
output XYZ; 
```

* * *

您甚至可以包含一个计数器，该计数器`$n`将在每次成功匹配后递增（通过代码断言`(?{ ... })`：

```
our $n = 1;

$content =~ s{ (                   # open capture group
                input \s+ (Pattern); # find occurence of input pattern
                .+?                  # skip some text
                output \s+ \2        # find same for output
                )                  # close capture group
                (?{ $n++ })        # ! update match count 
             }
             {                     # replace by evaluated expression
              do{                    # within a do block
                 local $_=$1;        # get whole match to $_
                 s/($2)/$1 $n/g;     # substitute Pattern by Pattern and count
                 $_                  # return substituted text
                }                  # close do block
             }esgx; 
```

替换现在将以`input Pattern 2;`und 增量开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:17:30.410

```
#!/usr/bin/env perl

$in1 = 'input Pattern';
$in2 = 'input Pattern2';
$out1 = 'output Pattern';
$out2 = 'output Pattern2';

undef $/;
$_ = <DATA>;
if (/^$in1\b.*?^$out1\b/gms) {
    s/(^$in1\b)(?=.*?^$out1\b)/$in2/gms;
    s/^$out1\b/$out2/gms;
}
print;

__DATA__
input Pattern;
input SDF;
input ABC;
input Pattern;
output Pattern;
output XYZ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T05:51:24.950

在 Perl 中，您不能返回并更改行。你可以做的是第一次以`read`模式打开文件，找出哪一行有模式（比如第5行），在将整个文件吞入一个数组之前关闭它，再次以`write`模式打开它，修改内容数组到第 5 行，将该数组转储到该文件中，然后关闭它。像这样（假设每个文件最多有一个**输出模式**）：

```
my @arr;
my @files = ();
while (<>) {
    if ($. == 0) {
        $curindex = undef;
        @lines    = ();
        push @files, $ARGV;
    }
    push @lines, $_;
    if (/output pattern/) { $curindex = $. }
    if (eof) {
        push @arr, [\@lines, $curindex];
        close $ARGV;
    }
}

for $file (@files) {
    open file, "> $file";
    @currentfiledetails  = @{ $arr[$currentfilenumber++] };
    @currentcontents     = @{ $currentfiledetails[0] };
    $currentoutputmarker = $currentfiledetails[1];
    if ($currentoutputmarker) {
        for (0 .. $currentoutputmarker - 2) {
            $currentcontents[$_] =~ s/input pattern/input pattern2/g;
        }
        $currentcontents[$currentoutputmarker - 1] =~
            s/output pattern/output pattern2/g;
    }
    print file for @currentcontents;
    close file;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T06:35:36.637

我认为这会满足您的需要，但**首先在“临时”文件（原始文件的副本）上尝试它，**因为它实际上会更改文件：

```
use Modern::Perl;

open my $fh_in, '<', 'parseThis.txt' or die $!;
my @fileLines = <$fh_in>;
close $fh_in;

for ( my $i = 1 ; $i < scalar @fileLines ; $i++ ) {
    next
      if $fileLines[$i] !~ /output Pattern;/
          and $fileLines[ $i - 1 ] !~ /input Pattern;/;
    $fileLines[$i] =~ s/output Pattern;/output Pattern2;/g;
    $fileLines[$_] =~ s/input Pattern;/input Pattern 2;/g for 0 .. $i - 1;
}

open my $fh_out, '>', 'parseThis.txt' or die $!;
print $fh_out @fileLines;
close $fh_out; 
```

结果：

```
input Pattern 2;
input SDF;
input ABC;
input Pattern 2;
output Pattern2;
output XYZ; 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T14:56:10.923

是否会有额外的“输入模式 1：出现“输出模式 1”的行？

1.  是否会有多个模式要搜索，或者只是“如果我们找到输出模式 1 然后执行替换？
2.  “输出模式会出现多次，还是只出现一次？
3.  是否会有额外的“输入模式 1：出现“输出模式 1”的行？

我将在两次/多次传递中执行此任务：

1.  Pass1 - 读取文件，寻找匹配的输出行，将行号存储在内存中。
2.  Pass 2 - 读取文件，并根据匹配集中的行号，在适当的输入行上执行替换。

所以在半perlish，未经测试的伪代码中：

```
my @matches = ();
open $fh, $inputfile, '<';
while (<$fh>) {
   if (/Pattern1/) {
     push @matches, $.;
   }
}
close $fh;

open $fh, $inputfile, '<';
while (<$fh>) {
  if ($. <= $matches[-1]) {
    s/Input Pattern1/Input Pattern2/;
    print ;
  }
  else {
    pop @matches);
    last unless @matches;
  }
}
close $fh; 
```

你像这样运行：

```
 $ replace_pattern.pl input_file > output_file 
```

您需要对其进行一些调整以满足您的确切需求，但这应该会让您接近。

# java - Java - 在迭代时将元素添加到列表中

> ID：11624220
> 
> 赞同：26
> 
> 时间：2012-07-24T04:33:20.477
> 
> 标签：java, arraylist, iterator

我想避免得到`ConcurrentModificationException`. 我该怎么做？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-24T04:53:52.667

您可以`ListIterator`在迭代过程中使用支持删除/添加方法的 a。

```
ListIterator<Book> iter = books.listIterator();
while(iter.hasNext()){
    if(iter.next().getIsbn().equals(isbn)){
        iter.add(new Book(...));
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-24T04:43:28.163

您可以使用带有索引的 for 循环，而不是使用迭代器。例如：

```
int originalLength = list.length();
for (int i = 0; i < originalLength; i++) {
  MyType mt = list.get(i);
  //... processing
  //... insertions
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-24T04:52:53.073

你想使用一个`ListIterator`. 您可以从任何类型的列表中获取其中一个，但为了提高效率，您可能希望从`LinkedList`.

```
import java.util.*;
class TestListIterator {
  public static void main(String[]args) {
    List<Integer> L = new LinkedList<Integer>();
    L.add(0);
    L.add(1);
    L.add(2);
    for (ListIterator<Integer> i = L.listIterator(); i.hasNext(); ) {
      int x = i.next();
      i.add(x + 10);
    }
    System.out.println(L);
  }
} 
```

打印`[0, 10, 1, 11, 2, 12]`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T04:35:33.940

创建一个新列表，然后填充该列表。

```
List<MyType> originalList = ...
List<MyType> newList = new ArrayList<>(originalList);

for(MyType type : originalList)
{
  // Some decisions
  newList.add(new MyType());
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-24T04:37:33.143

有三种方法可以避免上述异常

1.  您可以将列表转换为数组，然后对数组进行迭代。这种方法适用于中小型列表，但如果列表很大，则会对性能产生很大影响。

2.  您可以在迭代时锁定列表，方法是将其放入同步块中。不推荐这种方法，因为它会失去多线程的好处。

3.  如果您使用的是 JDK1.5 或更高版本，则可以使用 ConcurrentHashMap 和 CopyOnWriteArrayList 类。这是推荐的方法。

# android - 如何使用左角的图像制作 simple_list_item_multiple_choice

> ID：11624221
> 
> 赞同：2
> 
> 时间：2012-07-24T04:33:29.503
> 
> 标签：android

如何修改`simple_list_item_multiple_choice`左上角的图像。请帮我。我试过[这个](http://javasrilankansupport.blogspot.com/2012/05/android-listview-example-with-image-and.html "这")例子。但是有任何可能的方法来使用`simple_list_item_multiple_choice` 来做同样的事情吗？

请帮我

***编辑（必填格式）***

![在此处输入图像描述](../Images/63b2243ebcd8403ec479066198265bf5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T04:42:46.670

您的问题没有准确显示您想要什么？请澄清一下，看看这个例子可能对你有帮助。[自定义列表视图](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

[多项选择](http://appfulcrum.com/2010/09/12/listview-example-3-simple-multiple-selection-checkboxes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:47:49.987

试试下面的代码，它可能对你有帮助。

```
public class ActionModeDemo extends ListActivity {
 private static final String[] items=
  { "lorem", "ipsum", "dolor", "sit", "amet", "consectetuer",
      "adipiscing", "elit", "morbi", "vel", "ligula", "vitae",
      "arcu", "aliquet", "mollis", "etiam", "vel", "erat",
      "placerat", "ante", "porttitor", "sodales", "pellentesque",
      "augue", "purus" };
private ArrayList<String> words=null;

@Override
public void onCreate(Bundle icicle) {
super.onCreate(icicle);

initAdapter();
if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB) {
  getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
  getListView()
    .setMultiChoiceModeListener(new HCMultiChoiceModeListener(this,
                                                              getListView()));
  }
else {
  getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
  registerForContextMenu(getListView());
}
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
l.setItemChecked(position, true);
 }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
new MenuInflater(this).inflate(R.menu.option, menu);

EditText add=null;

if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB) {
  View v=menu.findItem(R.id.add).getActionView();

  if (v!=null) {
    add=(EditText)v.findViewById(R.id.title);
  }
}

if (add!=null) {
  add.setOnEditorActionListener(onSearch);
}

return(super.onCreateOptionsMenu(menu));
}

 @Override
 public void onCreateContextMenu(ContextMenu menu, View v,
                              ContextMenu.ContextMenuInfo menuInfo) {
  new MenuInflater(this).inflate(R.menu.context, menu);
   }

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
switch (item.getItemId()) {
  case R.id.add:
    add();
    return(true);

  case R.id.reset:
    initAdapter();
    return(true);

  case R.id.about:
  case android.R.id.home:
    Toast
         .makeText(this, "Action Bar Sample App", Toast.LENGTH_LONG)
         .show();
    return(true);
}

return(super.onOptionsItemSelected(item));
}

 @Override
 public boolean onContextItemSelected(MenuItem item) {
boolean result=performActions(item);

if (!result) {
  result=super.onContextItemSelected(item);
}

return(result);
}

 @SuppressWarnings("unchecked")
 public boolean performActions(MenuItem item) {
ArrayAdapter<String> adapter=(ArrayAdapter<String>)getListAdapter();
SparseBooleanArray checked=getListView().getCheckedItemPositions();

switch (item.getItemId()) {
  case R.id.cap:
    for (int i=0;i<checked.size();i++) {
      if (checked.valueAt(i)) {
        int position=checked.keyAt(i);
        String word=words.get(position);

        word=word.toUpperCase();

        adapter.remove(words.get(position));
        adapter.insert(word, position);
      }
    }

    return(true);

  case R.id.remove:
    ArrayList<Integer> positions=new ArrayList<Integer>();

    for (int i=0;i<checked.size();i++) {
      if (checked.valueAt(i)) {
        positions.add(checked.keyAt(i));
      }
    }

    Collections.sort(positions, Collections.reverseOrder());

    for (int position : positions) {
      adapter.remove(words.get(position));
    }

    getListView().clearChoices();

    return(true);
  }

 return(false);
}

private void initAdapter() {
words=new ArrayList<String>();

for (String s : items) {
  words.add(s);
}

setListAdapter(new ArrayAdapter<String>(
                                        this,
                                        android.R.layout.simple_list_item_checked,
                                        words));
}

 private void add() {
final View addView=getLayoutInflater().inflate(R.layout.add, null);

new AlertDialog.Builder(this)
                             .setTitle("Add a Word")
                             .setView(addView)
                             .setPositiveButton(
                                                "OK",
                                                new DialogInterface.OnClickListener() {
                                                  public void onClick(
                                                                      DialogInterface dialog,
                                                                      int whichButton) {
                                                    addWord((TextView)addView
                                                                             .findViewById(R.id.title));
                                                  }
                                                })
                             .setNegativeButton("Cancel", null)
                             .show();
}

  @SuppressWarnings("unchecked")
  private void addWord(TextView title) {
ArrayAdapter<String> adapter=(ArrayAdapter<String>)getListAdapter();

adapter.add(title.getText().toString());
  }

 private TextView.OnEditorActionListener onSearch=
  new TextView.OnEditorActionListener() {
    public boolean onEditorAction(TextView v, int actionId,
                                  KeyEvent event) {
      if (event==null||event.getAction()==KeyEvent.ACTION_UP) {
        addWord(v);

        InputMethodManager imm=
            (InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);

        imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
      }

      return(true);
    }
  };
 }

public class HCMultiChoiceModeListener implements AbsListView.MultiChoiceModeListener {
 ActionModeDemo host;
 ActionMode activeMode;
 ListView lv;

 HCMultiChoiceModeListener(ActionModeDemo host, ListView lv) {
this.host=host;
this.lv=lv;
 }

 @Override
 public boolean onCreateActionMode(ActionMode mode, Menu menu) {
MenuInflater inflater=host.getMenuInflater();

inflater.inflate(R.menu.context, menu);
mode.setTitle(R.string.context_title);
mode.setSubtitle("(1)");
activeMode=mode;

return(true);
 }

 @Override
 public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
return(false);
 }

 @Override
 public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
boolean result=host.performActions(item);

updateSubtitle(activeMode);

return(result);
 }

 @Override
 public void onDestroyActionMode(ActionMode mode) {
activeMode=null;
}

 @Override
public void onItemCheckedStateChanged(ActionMode mode, int position,
                                    long id, boolean checked) {
updateSubtitle(mode);
}

 private void updateSubtitle(ActionMode mode) {
 mode.setSubtitle("("+lv.getCheckedItemCount()+")");
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T04:50:35.403

我猜你想要一个`ListView`在`ImageView`左角`CheckBox`有一个`TextView`，每行都有一个。如果是这种情况，那么...不，您不能使用`simple_list_item_multiple_choice`. 您将不得不使用 BaseAdapter 来实现这一点。根据您的要求，您可以调整您使用 的[示例](http://javasrilankansupport.blogspot.in/2012/05/android-listview-example-with-image-and.html)`ImageView`，并将 a`CheckBox`和 a添加`TextView`到您的 xml 中的每一行，`ListView`并使用 a 将它们填充到`getView()`适配器的`LayoutInflater`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T04:50:46.553

**试试下面的代码片段。**

```
Activity_name.this.runOnUiThread(new Runnable() {

  @Override
  public void run() {
  list = (ArrayList<Map<String, String>>) result;
  this.adapter.setList(list);
  this.adapter.notifyDataSetChanged();
}
}); 
```

# networking - 打开哪些端口以允许两台服务器之间的通信

> ID：11624222
> 
> 赞同：-1
> 
> 时间：2012-07-24T04:33:34.500
> 
> 标签：networking, network-protocols

我是这方面的新手，所以请原谅我的无知

在设置新服务器时，需要打开哪些端口才能

*   HTTP
*   HTTPS
*   使用 Xcopy 在服务器之间移动/复制文件
*   RDP
*   网页服务

此外，是否在目标服务器上打开任何特定端口以执行相同操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:39:27.760

```
HTTP = 80 
HTTPs = 443
XCopy is not a netowrk service
RDP = 3389
Web Services = 80 
```

您只需要在服务器端打开这些端口，而不是在客户端。

# jquery - Call Page without using action Attribute in JSP

> ID：11624223
> 
> 赞同：-3
> 
> 时间：2012-07-24T04:34:07.730
> 
> 标签：jquery, jsp-tags

In a JSP I want to perform an call to another JSP after the form has been submitted and I cannot use action attribue as it already being used?

I want to call another JSP with above limitations.

tried using jquery

```
 ">"  $('#form2').submit(function(event) { $.ajax({  ">" 
```

but didnt work..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:22:32.287

您可以使用以下方式来做到这一点

将此代码附加到任何事件，如 onclick

```
function post(){
 //Get your form inputs
 var myID = $("#myID ").val();
 var myName = $("#myName").val();

 //post your data
 var request = $.ajax({
    url: "thepagewhichhasform.jsp",
    type: "POST",
    data: {id : myID , name : myName },
    dataType: "html"
 });

 //When post is completed
 request.done(function(msg) {
     //change the page
     window.location.href = "theotherpage.jsp";
 });

 return false;
 } 
```

# javascript - Problems passing parameters, and getting code ready for MYSQL integration

> ID：11624233
> 
> 赞同：0
> 
> 时间：2012-07-24T04:35:25.113
> 
> 标签：javascript, jquery, mysql, parameter-passing

I've been working on a project for 4 days now, completely written by hand, to see where I'm at with javascript (I've been going through the codecademy courses). I'm trying to create a browser based checklist program. So far I've written a clean menu interface that can dynamically create `<div>`s.

Here's what I've got on jsfiddle:
[http://jsfiddle.net/SdCaf/1/](http://jsfiddle.net/SdCaf/1/)

**My questions:**

*   Can I write the `taskToggle()` function more efficiently? Is there a jquery way to simplify it?
*   If you have the time to examine my code in the Fiddle; will it take to mysql easily, or have I created some goofy redundant kludges, that will make it difficult to update?

*   **FIXED** *Why won't my `formatTask()` constructor add the check boxes and descriptions (as seen in it's if/else) - is there something wrong with my `taskToggle()` function, is it the checkbox `<div>` I'm trying to add, both, or something else?*

The `formatTask()` constructor:

```
function formatTask(target, divId, content, description, complete) {

    function taskToggle() {
        if ($(this).hasClass("completeTask")) {
            $("#" + divId).attr("class", "incompleteTask");
            $("#" + divId + "Box").attr("class", "incompleteBox");
        }
        else if ($(this).hasClass("incompleteTask")) {
            $("#" + divId).attr("class", "completeTask");
            $("#" + divId + "Box").attr("class", "completeBox");
        }
    };

    if (complete) {
        var div = new formatDiv(target, divId, "completeTask", content, taskToggle, description);
        formatDiv(divId, divId + "Box", "completeBox", "O");
        div.addDescription();
    }
    else {
        var div = new formatDiv(target, divId, "incompleteTask", content, taskToggle, description);
        formatDiv(divId, divId + "Box", "incompleteBox", "[ ]");
        div.addDescription();
    }
} 
```

When I call it, it seems to accept all of it's parameters and I get no errors in the console, but it doesn't seem to run `formatDiv(divId, divId + "box", "completeBox", "O");` and `div.addDescription`. You can see this for yourself if you click on "»Show Lists" in the result pane of the Fiddle (and you'll get an example of how the `.addDescription()` function *should* work)

Any other feedback you may wish to provide would be greatly appreciated. I need to know if I'm on the right track, or if I'm starting to write junky code that will become inelegant.
Thank you for your time if you give it!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:41:54.367

你确定当你这样说的时候：

```
$("#" + divId).attr("class", "incompleteTask"); 
```

你不是这个意思吗？

```
$("#" + divId).addClass("incompleteTask");
$("#" + divId).removeClass("completeTask"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:52:35.007

这里的问题是您为任务分配的 DOM ID 是“atask！” 这是无效的（因为！）字符。确保从您的 ID 和班级名称[中删除无效字符！](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T04:49:42.233

将 taskToggle() 与 formatTask() 分开，然后像这样在 formatTask() 中简单地调用 taskToggle()

```
function formatTask(target, divId, content, description, complete) {

 taskToggle();

 if (complete) {
    var div = new formatDiv(target, divId, "completeTask", content, taskToggle, description);
    formatDiv(divId, divId + "Box", "completeBox", "O");
    div.addDescription();
}
else {
    var div = new formatDiv(target, divId, "incompleteTask", content, taskToggle, description);
    formatDiv(divId, divId + "Box", "incompleteBox", "[ ]");
    div.addDescription();
}

}

function taskToggle() {
    if ($(this).hasClass("completeTask")) {
        $("#" + divId).attr("class", "incompleteTask");
        $("#" + divId + "Box").attr("class", "incompleteBox");
    }
    else if ($(this).hasClass("incompleteTask")) {
        $("#" + divId).attr("class", "completeTask");
        $("#" + divId + "Box").attr("class", "completeBox");
    }
}; 
```

# c++ - Can a string hold a newline character if given from a char type?

> ID：11624234
> 
> 赞同：-1
> 
> 时间：2012-07-24T04:35:31.677
> 
> 标签：c++, string, stl, io, std

What I mean is this. Say we read from standard input a bunch of text, and one by one we read it into a character type. If one of these characters is a newline, obviously this variable can hold information about the new line. What if I push this character into a string stream, and then output the contents of the string stream into a string?

It appears that this new string doesn't hold any data about the newline character.

Is there anyway to have the string keep this information?

Code snippet:

```
 stringstream ssChar;
    unsigned char aChar;
    string strChar;

    sourceFile >> noskipws >> aChar;
    ssChar << aChar;
    getline(ssChar, strChar);
    //ssChar.str("");
    //ssChar.seekg(0);
    cout << "Next char is: " << (int)aChar << endl;
    cout << "Length of char(from stringstream): " << strChar.length() << endl; 
```

Input: file with a newline xxd sourceFile

0000000: 0a0a (2 newlines actually) ..

Output: Next char is: 10 (ascii newline) Length of char: 0 (str is empty however)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:24:10.687

你为什么不测试它？

```
 > cat temp.cc
    #include<iostream>

using namespace std;

int main()
{

string str="vijay\n";

cout << str <<"this is the next line"<<endl;

return 0;
}

    > ./a.out
    vijay
    this is the next line
    > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:41:00.440

答案是肯定的。当然，字符串将存储传递给它的字符数据。您的代码中可能有一些格式化操作正在占用空格或换行符。

# java - How to read PDF templates using java OCR

> ID：11624241
> 
> 赞同：1
> 
> 时间：2012-07-24T04:36:03.913
> 
> 标签：java, pdf, ocr

Can some one suggest a solution for the below scenario ?

We have menus from restaurants. Each restaurant has its own menu. The goal is to identify the elements in the menu such as menu item, toppings, prices etc and update the database.

Fox example : A restaurant menu can contain menu items such as "Chicken", "Vegetarian" etc under a group called "Sandwiches.

For that I am planning to use a java implementation of OCR. Will this work out ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:44:28.190

将 PDF 转换为图像（使用 javacv 等）并使用 tesseract 或 tess4j 对其进行 OCR。它不是永久的或最好的解决方案，但效果很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:49:02.450

如果您想在代码中使用 OCR，您可以使用[**Tessrect-OCR**](http://code.google.com/p/tesjeract/)和一些原生开发。它是一个非常强大的库，具有快速输出。此链接用于 Tessrect 的包装类，或者您也可以使用[Tess4j](http://tess4j.sourceforge.net/)替代 Tesjeract（首先一）。这是谷歌使用的同一个库，你也可以添加多语言支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T04:48:06.783

如果您正在输入 PDF，然后使用它，则无需这样做；只需阅读 PDF（见下文）。但是，如果您正在扫描 PDF（图像，而不是文本），则需要使用 OCR。

要从文件中读取 PDF，您可以使用[iText](http://itextpdf.com/)或[PDFBox](http://pdfbox.apache.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T04:49:04.057

有趣的项目！Java 或任何其他语言，我认为 OCR 不够准确，无法满足您的需求。菜单通常使用非标准字体打印，有时还带有背景图像，这使得 OCR 难以准确读取每个单词。然后你有格式化的挑战。一些菜单可能按鸡肉、素食、牛肉来组织内容。其他的可能有 Light Fare、Entree、Appetizer、小盘子等类别。

这让我觉得这是一个真正的数据工程挑战。虽然菜单看起来像是分层的，但它们的实际结构非常灵活，并且从一个到另一个变化很大。将 OCR 添加到这个混乱中会给整个混乱添加错别字，现在你需要寻找像“鸡”这样的词，因为你实际上可能有 Chicen 或 Cichen 或 (h1ckn.

也许我从未使用过真正出色的 OCR 软件，而我正在想象一个不存在的问题。我认为大多数餐馆都是在电脑上输入菜单的，你最好让他们与你分享这些文件。

# php - HTTP_Request_2 :: addPostParameter adds extra characters

> ID：11624248
> 
> 赞同：0
> 
> 时间：2012-07-24T04:36:55.967
> 
> 标签：php, pear, http-request

So I'm trying to send a POST request with pear *HTTP*_Request_*2*

I'm adding a POST parameter to a request with *addPostParameter* function

```
$request->addPostParameter(array(
         'lgname'=>'Admin',
         'lgpassword'=>'xxx','lgtoken'=>$xmlresponse->login['token']
                        )); 
```

however some extra characters appear in POST request body:

```
lgname=Admin&lgpassword=xxx&lgtoken%5B0%5D=6b9c078a99d5e9821ccaa8b3d41bfdef 
```

uri decode says that **%5B0%5D** is **[0]** so it looks like lgtoken[0]=6b9c078a99d5e9821ccaa8b3d41bfdef

, but how does this appear here?? How to get rid of it?\

I need just lgtoken=6b9c078a99d5e9821ccaa8b3d41bfdef

# bash - 如何在 bash 中获取目录及其所有子目录中的文件？

> ID：11624272
> 
> 赞同：1
> 
> 时间：2012-07-24T04:40:15.610
> 
> 标签：bash, gcc, makefile, kernel

我正在研究 C 内核，我想通过使用 bash 脚本文件更轻松地编译所有源代码。我需要知道如何进行 foreach 循环并且只获取扩展名为 .c 的文件，然后获取我找到的每个文件的文件名，这样我就可以让 gcc 编译每个文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T04:43:19.223

用于`find`遍历您的树，然后使用以下命令读取它生成的列表`while read`：

```
find . -name \*.c | while read file
do
 echo process $file
done 
```

如果你想对文件做的动作不是那么复杂，可以用 ore 或两个命令来表达，你可以避免`while` ，用它自己做所有的事情`find`。为此，您将使用`-exec`：

```
find . -name \*.c -exec command {} \; 
```

在这里你写你的命令而不是`command`.

您还可以使用`-execdir`：

```
find . -name \*.c -execdir command {} \; 
```

在这种情况下`command`，将在找到的文件的目录中执行（对于找到的每个文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:45:35.287

如果您正在使用`GNU make`，则可以仅使用`make`的内置函数来执行此操作，这具有使其独立于外壳的优点（但缺点是比`find`大型树慢）：

```
# Usage: $(call find-recursive,DIRECTORY,PATTERN)
find-recursive = \
  $(foreach f,$(wildcard $(1)/*),\
    $(if $(wildcard $(f)/.),\
      $(call find-recursive,$(f),$(2)),\
      $(filter $(2),$(f))))

all:
     @echo $(call find-recursive,.,%.c) 
```

# c++ - 以数组形式获取地图的内容

> ID：11624273
> 
> 赞同：1
> 
> 时间：2012-07-24T04:40:16.883
> 
> 标签：c++, stl, map, std

我有一个`std::map`对象`HANDLE`， `std::map<int, HANDLE> MyMap;`

我必须使用 WaitForMultipleObjects() 函数等待这些句柄对象。为此，我必须将地图内容作为 HANDLE 对象数组获取。（如果它是向量，那么我们可以使用 vector.data() 函数）。我正在寻找这样一个简单的功能来实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T04:49:54.290

假设您使用的是 VC++（2010 或 2012）或 g++（4.6 或更高版本）的较新版本，您应该能够执行以下操作：

```
std::vector<HANDLE> handles;

std::transform(your_map.begin(), your_map.end(),
    std::back_inserter(handles),
    [](std::pair<const int, HANDLE> const &i) { return i.second; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:49:45.587

*   根据地图的大小保留向量中的空间。请参阅“std::vector::reserve”成员。
*   使用 std::copy 和 std::back_inserter。

# c# - WPF C#设置触发器属性由后面的代码控制

> ID：11624276
> 
> 赞同：-1
> 
> 时间：2012-07-24T04:40:41.847
> 
> 标签：c#, wpf, visual-studio-2010, wpf-controls, contentcontrol

```
<ContentControl Width="130"
                Height="130"
                Canvas.Top="60"
                Canvas.Left="50"
                ***Selector.IsSelected="True"***
                Style="{StaticResource DesignerItemStyle}"> 
```

我想通过使用后面的代码`Selector.IsSelected`来设置属性。`ContentControl`但我不知道该怎么做。请帮助我，给我一些例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T04:55:17.910

如果要在代码中设置附加的依赖属性，请执行此操作

```
 ContentControl x;
        //To set the value
        x.SetValue(Selector.IsSelectedProperty, true);

        //To Clear the value
        x.ClearValue(Selector.IsSelectedProperty);

        //Set using the static function on Selector
        Selector.SetIsSelected(x, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:04:39.143

要访问代码隐藏中的控件，您首先需要为其提供名称 -

```
<ContentControl 
    x:Name=""ContentControl1"
    Width="130" 
    Height="130" 
    Canvas.Top="60" 
    Canvas.Left="50" 
    ***Selector.IsSelected="True"*** 
    Style="{StaticResource DesignerItemStyle}"> 
```

然后您可以在代码中访问它并设置其他答案中提到的值 -

```
ContentControl1.SetValue(Selector.IsSelectedProperty, true); 
```

除此之外，最好查看在代码隐藏或 ViewModel(MVVM) 中创建属性并将其直接绑定到您的控件，如下所示 -

```
<ContentControl 
    Width="130" 
    Height="130" 
    Canvas.Top="60" 
    Canvas.Left="50" 
    Selector.IsSelected="{Binding IsSelectedBoolProperty, Mode=OneWay}"
    Style="{StaticResource DesignerItemStyle}"> 
```

如果您的窗口中有很多控件，此技术将非常有用，我建议您查看在应用程序中实现 MVVM 以避免在代码隐藏中执行此类操作。

# java - java的TreeMap的效率是基于键或值的数量吗？

> ID：11624277
> 
> 赞同：1
> 
> 时间：2012-07-24T04:40:43.517
> 
> 标签：java, performance, tree, treemap

由于 Java 使用红黑树来实现 TreeMap 类，因此 put() 和 get() 的效率为 lg(N)，其中 N = 不同键的数量，或 N = 您计划执行的插入/检索次数?

例如，假设我想使用

```
TreeMap<Integer, ArrayList<String>> 
```

存储以下数据：

100 万 <1, "bob"> 对和 100 万 <2, "jack"> 对（字符串被插入到与键对应的数组列表值中）

最终的树形图将有 2 个键，每个键存储数百万个“bob”或“jack”字符串的数组列表。时间效率是 lg(2mil) 还是 lg(2)？我猜它是 lg(2) 因为这就是红黑树的工作原理，但只是想检查一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:47:14.833

具有 2 对的 TreeMap 的性能将表现为 N=2，无论之前进行了多少重复添加。多余的添加没有“记忆”，因此它们不可能产生任何开销。

所以是的，您可以非正式地假设时间效率为“log 2”。

尽管它相当没有意义，因为大 O 表示法旨在与渐近效率相关，而不是与小尺寸相关。对于 N=2，O(N^3) 算法很容易比 O(log N) 算法更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:43:52.673

对于这种情况，树形图就是`lg(n)`您`n=2`所描述的位置。地图中只有 2 个值：一个数组列表和另一个数组列表。无论其中包含什么*，*地图只知道两个值。

虽然不直接关心您的问题，但您可能需要考虑不为此使用树形图......我的意思是，您打算如何访问存储在“bob”或“jack”列表中的数据？这些将是`O(n)`搜索，除非您要对它们使用某种二进制搜索或其他东西，`n`这里是 100 万。如果您详细说明最终目标，也许可以实现更全面的解决方案。

# javascript - jquery prop 多个项目？

> ID：11624282
> 
> 赞同：2
> 
> 时间：2012-07-24T04:41:23.543
> 
> 标签：javascript, jquery

我不确定自己做错了什么，但在过去的 2 个小时里，我一直在尝试使用 prop 来更改按钮中两个项目的值。它适用于一个，但不适用于另一个，我不知道为什么。

html:

```
<input type='button' value='Following' id='btnFollow' dataaction="UnFollow" datatype='topic'> 
```

jQuery：

```
 $("#btnFollow").prop("value", "Follow");
    $("#btnFollow").prop("dataaction", "Follow"); 
```

第一项更改（`value`），但第二项更改（ `dataaction`）。我不知道为什么（否则可能为时已晚，我的大脑正在反抗）。根据[文档](http://api.jquery.com/prop/)，我做对了。我在每个命令之间添加了警报，以防一个命令失败，但是两个警报都消失了，这意味着 jquery 在尝试更改第二项时没有崩溃或发生任何事情。我没有看到任何拼写错误，我尝试以菊花链方式连接命令，但仍然没有运气。

有什么建议么？

整个代码：

```
$(document).ready(function () {
    $('#btnFollow').click(function() {
        var topic_id = $(this).attr('datatopic');
        var action_type = $(this).attr('datatype');
        var action_type_action = $(this).attr('dataaction');
        alert(action_type_action);
        //$("#btnFollow").prop('value', 'Following');
        if (action_type_action == 'Follow') {
            $("#btnFollow").prop({'value': 'Following', 'dataaction': 'UnFollow'});
            //$("#btnFollow").prop("value", "Following");
            //$("#btnFollow").prop("dataaction", "UnFollow");
                 $.ajax({
                type: 'POST',
                url: '/follow_modification',
                async: false,
                data: {
                    topic: topic_id,
                    action: action_type_action,
                    follow_type: action_type
                }
                //complete: function(xmlRequestObject, successString){
                //    ymmReceiveAjaxResponse(xmlRequestObject, successString);
                //}
            });

        } else if (action_type_action == 'UnFollow') {
            $("#btnFollow").prop({'value': 'Follow', 'dataaction': 'Follow'});
            //$("#btnFollow").prop("value", "Follow");
            //$("#btnFollow").prop("dataaction", "Follow");
            $.ajax({
                type: 'POST',
                url: '/follow_modification',
                async: false,
                data: {
                    topic: topic_id,
                    action: action_type_action,
                    follow_type: action_type
                }
                //complete: function(xmlRequestObject, successString){
                //    ymmReceiveAjaxResponse(xmlRequestObject, successString);
                //}
            });
        }
    })

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T04:46:54.107

你的代码工作得很好：http: [//jsfiddle.net/zerkms/Capvk/](http://jsfiddle.net/zerkms/Capvk/)

> 属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

所以这就是为什么你没有看到它在 html 中发生了变化，而是在 DOM 中发生了变化。如果您也希望在 HTML 中更改它 - 使用`.attr()`

`.data()`PS：正如评论中提到的@ahren - 使用和`data-xxx`属性可能是有意义的

PPS：如果您使用`.prop()`- 设置值，则需要`.prop()`分别获取它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-16T12:43:22.183

如果需要使用单个 jQuery`.prop`方法设置多个属性，请尝试以下操作：

反而

```
$("#btnFollow").prop("value", "Follow");
$("#btnFollow").prop("dataaction", "Follow"); 
```

采用

```
$("#btnFollow").prop({"value": "Follow", "dataaction": "Follow"}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T04:50:10.627

请使用`.attr`jQuery 方法。

请正确使用 html5 数据属性作为`enter code here`数据操作，您有新的 jQuery 方法来访问此数据属性，`$('#btnFollow').data('action')`更多详细信息[请访问](http://api.jquery.com/jQuery.data/)

# vb.net - 如何将单个变量中的多个值传递给vb.net中的函数

> ID：11624287
> 
> 赞同：0
> 
> 时间：2012-07-24T04:42:06.750
> 
> 标签：vb.net, function

我正在使用 vb.net

我的类（class1）文件中有一个函数，即保存。这个 Save 函数有 3 个参数。现在我使用以下方法来发送参数。

```
Private Sub cmdSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdSave.Click
        dim p as new class1
        p.save(txtempid.text,txtempname.text,txtage.text)
        messagebox.show("Successfully Saved")
End sub 
```

第一类：

```
imports system.data.sqlclient
imports system.configuration
public class class1
    Dim constr As String
    Dim con As SqlConnection
    Dim cmd As SqlCommand

public function save(byval s as string,byval s1 as string,byval s2 as string)
    constr = ConfigurationManager.AppSettings("con")
    con = New SqlConnection(constr)
    con.Open()
    cmd=new sqlcommand("Emp_insert",con)
    cmd.commandtype=commandtype.storedprocedure
    cmd.Parameters.Add("@EmployeeID", SqlDbType.BigInt).Value = s
    cmd.Parameters.Add("@EmployeeName", SqlDbType.VarChar).Value = s1
    cmd.Parameters.Add("@Age", SqlDbType.BigInt).Value = s2
    cmd.executenonquery()
    cmd.dispose()
    con.close()
   return 0
End function
End Class 
```

没关系，但是当我有更多的论点时，这很难。有人可以建议我更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:47:23.563

修改

```
public function save(parameters as Dictionary(Of string, object)) as int
for each item as KeyvaluePair(Of string, object) in parameters
cmd.Parameters.AddWithValue("@" & item.Key, item.Value)
next
return cmd.ExecuteNonQuery()
end function 
```

您可以使用[元组](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)

```
public sub DoSomething(Tuple (Of string, string, integer) myparameter)
dim firstItem as string = myparameter.Item1 
dim secondItem as string = myparameter.Item2
dim thirdItem as integer = myparameter.Item3
end sub

sub main()
Dim tuple as New Tuple(Of string, string, integer)("First","Second", 100)
DoSomething(tuple)
end sub 
```

# filter - XAudio2滤波器弧度频率

> ID：11624288
> 
> 赞同：1
> 
> 时间：2012-07-24T04:42:17.963
> 
> 标签：filter, signal-processing, frequency, xaudio2

在它提到的[XAudio2 过滤器参数的文档中](http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.xaudio2.xaudio2_filter_parameters%28v=vs.85%29.aspx)

> 滤波器弧度频率计算为 (2 * sin(pi * (期望的滤波器截止频率) / sampleRate))

有人可以向我解释该公式的来源吗？因为对我来说唯一有意义的频率转换来源来自 sin(f * t) 和 cosine(f * t) vs sin(2*pi*f * t) 和 cosine(2*pi*f * t ) 其中 f 是“频率”，t 是时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:03:02.850

自从我完成过滤器数学以来已经有一段时间了。这有点粗糙，但这里有一个基本的解释：有点令人困惑的部分是罪，不是吗？我也对此感到有些困惑，但我敢打赌这是为了将转换的输出保持在所需的范围内。貌似微软的filter只能占用8000hz。如果这种方式偏离基础，请原谅我，我目前无法想象正弦函数会对结果产生什么影响。

2 * sin(pi * (所需的滤波器截止频率) / 全部

部分

2 * sin //// 你习惯的 2*pi*f 部分。

(pi *
(

所需的滤波器截止频率）//// 这以赫兹为单位将变为弧度频率

/ sampleRate //// 为 1 个样本设置整个方程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:13:36.647

```
(2 * sin(pi * (desired filter cutoff frequency) / sampleRate)) 
```

随着滤波器截止频率从 DC 变为采样率的一半，该值将从 0 单调变为 2.0。

数字滤波器相对于采样率进行缩放，而您提供的其他选项则不会。

# c# - 如何使用 OpenFileDialog 选择文件夹？

> ID：11624298
> 
> 赞同：397
> 
> 时间：2012-07-24T04:43:58.953
> 
> 标签：c#, .net, winforms, dialog, openfiledialog

如何使用`OpenFileDialog`选择文件夹？

我打算使用以下项目：[https ://github.com/scottwis/OpenFileOrFolderDialog](https://github.com/scottwis/OpenFileOrFolderDialog)

然而，我遇到了一个问题。它使用的`GetOpenFileName`功能和`OPENFILENAME`结构。并`OPENFILENAME`拥有名为 的成员`templateID`。它是对话框模板的标识符。该项目也包含`res1.rc`文件和模板化对话框初始化。但我不知道如何将此文件附加到我的 C# 项目中。

有没有更好的方法来使用`OpenFileDialog`选择文件夹？

* * *

## 回答 #1

> 赞同：475
> 
> 时间：2012-07-24T04:46:51.267

基本上你需要这个**[`FolderBrowserDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.aspx)**类：

> 提示用户选择文件夹。这个类不能被继承。

例子：

```
using(var fbd = new FolderBrowserDialog())
{
    DialogResult result = fbd.ShowDialog();

    if (result == DialogResult.OK && !string.IsNullOrWhiteSpace(fbd.SelectedPath))
    {
        string[] files = Directory.GetFiles(fbd.SelectedPath);

        System.Windows.Forms.MessageBox.Show("Files found: " + files.Length.ToString(), "Message");
    }
} 
```

如果您在**WPF**中工作，则必须添加对`System.Windows.Forms`.

您还必须`using System.IO`为`Directory`课程添加

* * *

## 回答 #2

> 赞同：395
> 
> 时间：2017-01-06T18:03:15.820

作为对希望避免使用的未来用户的说明`FolderBrowserDialog`，Microsoft 曾经发布了一个名为 WindowsAPICodePack 的 API，其中有一个名为 的有用对话框`CommonOpenFileDialog`，可以将其设置为`IsFolderPicker`模式。该 API 可作为[NuGet 包](https://www.nuget.org/packages/Microsoft.WindowsAPICodePack-Shell)从 Microsoft 获得。

这就是我安装和使用`CommonOpenFileDialog`. （NuGet 处理依赖项）

```
Install-Package Microsoft.WindowsAPICodePack-Shell 
```

对于包含行：

```
using Microsoft.WindowsAPICodePack.Dialogs; 
```

用法：

```
CommonOpenFileDialog dialog = new CommonOpenFileDialog();
dialog.InitialDirectory = "C:\\Users";
dialog.IsFolderPicker = true;
if (dialog.ShowDialog() == CommonFileDialogResult.Ok)
{
    MessageBox.Show("You selected: " + dialog.FileName);
} 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2018-05-10T00:20:13.537

有一个骇人听闻的解决方案，使用`OpenFileDialog`where`ValidateNames`和`CheckFileExists`两者都设置为 false 并`FileName`给出一个模拟值以指示选择了一个目录。

我说 hack 是因为它让用户对如何选择文件夹感到困惑。它们需要位于所需的文件夹中，然后在文件名显示“文件夹选择”时按打开。

[![C# 文件夹选择对话框](../Images/4d3f737fbe5ecceb15aeb796be77bf22.png)](https://i.stack.imgur.com/Iuvqm.png)

这基于Denis Stankovski[从同一对话框中选择文件或文件夹。](http://www.codeproject.com/Articles/44914/Select-file-or-folder-from-the-same-dialog)

```
OpenFileDialog folderBrowser = new OpenFileDialog();
// Set validate names and check file exists to false otherwise windows will
// not let you select "Folder Selection."
folderBrowser.ValidateNames = false;
folderBrowser.CheckFileExists = false;
folderBrowser.CheckPathExists = true;
// Always default to Folder Selection.
folderBrowser.FileName = "Folder Selection.";
if (folderBrowser.ShowDialog() == DialogResult.OK)
{
    string folderPath = Path.GetDirectoryName(folderBrowser.FileName);
    // ...
} 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2021-02-13T16:12:54.790

这是一个纯 C# 版本，无 nuget，应该适用于所有版本的 .NET（包括 .NET Core、.NET 5、WPF、Winforms 等），并使用 Windows Vista（和更高版本）的[IFileDialog](https://docs.microsoft.com/en-us/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifiledialog)接口和[FOS_PICKFOLDERS](https://docs.microsoft.com/en-us/windows/win32/api/shobjidl_core/ne-shobjidl_core-_fileopendialogoptions)选项，因此它具有漂亮的文件夹选择器 Windows 标准 UI。

我还添加了 WPF 的`Window`类型支持，但这是可选的，可以删除 WPF 标记的行。

用法：

```
var dlg = new FolderPicker();
dlg.InputPath = @"c:\windows\system32";
if (dlg.ShowDialog() == true)
{
    MessageBox.Show(dlg.ResultPath);
} 
```

代码：

```
 using System;
    using System.Diagnostics;
    using System.Runtime.InteropServices;
    using System.Runtime.InteropServices.ComTypes;
    using System.Windows; // for WPF support
    using System.Windows.Interop;  // for WPF support

    public class FolderPicker
    {
        public virtual string ResultPath { get; protected set; }
        public virtual string ResultName { get; protected set; }
        public virtual string InputPath { get; set; }
        public virtual bool ForceFileSystem { get; set; }
        public virtual string Title { get; set; }
        public virtual string OkButtonLabel { get; set; }
        public virtual string FileNameLabel { get; set; }

        protected virtual int SetOptions(int options)
        {
            if (ForceFileSystem)
            {
                options |= (int)FOS.FOS_FORCEFILESYSTEM;
            }
            return options;
        }

        // for WPF support
        public bool? ShowDialog(Window owner = null, bool throwOnError = false)
        {
            owner ??= Application.Current.MainWindow;
            return ShowDialog(owner != null ? new WindowInteropHelper(owner).Handle : IntPtr.Zero, throwOnError);
        }

        // for all .NET
        public virtual bool? ShowDialog(IntPtr owner, bool throwOnError = false)
        {
            var dialog = (IFileOpenDialog)new FileOpenDialog();
            if (!string.IsNullOrEmpty(InputPath))
            {
                if (CheckHr(SHCreateItemFromParsingName(InputPath, null, typeof(IShellItem).GUID, out var item), throwOnError) != 0)
                    return null;

                dialog.SetFolder(item);
            }

            var options = FOS.FOS_PICKFOLDERS;
            options = (FOS)SetOptions((int)options);
            dialog.SetOptions(options);

            if (Title != null)
            {
                dialog.SetTitle(Title);
            }

            if (OkButtonLabel != null)
            {
                dialog.SetOkButtonLabel(OkButtonLabel);
            }

            if (FileNameLabel != null)
            {
                dialog.SetFileName(FileNameLabel);
            }

            if (owner == IntPtr.Zero)
            {
                owner = Process.GetCurrentProcess().MainWindowHandle;
                if (owner == IntPtr.Zero)
                {
                    owner = GetDesktopWindow();
                }
            }

            var hr = dialog.Show(owner);
            if (hr == ERROR_CANCELLED)
                return null;

            if (CheckHr(hr, throwOnError) != 0)
                return null;

            if (CheckHr(dialog.GetResult(out var result), throwOnError) != 0)
                return null;

            if (CheckHr(result.GetDisplayName(SIGDN.SIGDN_DESKTOPABSOLUTEPARSING, out var path), throwOnError) != 0)
                return null;

            ResultPath = path;

            if (CheckHr(result.GetDisplayName(SIGDN.SIGDN_DESKTOPABSOLUTEEDITING, out path), false) == 0)
            {
                ResultName = path;
            }
            return true;
        }

        private static int CheckHr(int hr, bool throwOnError)
        {
            if (hr != 0)
            {
                if (throwOnError)
                    Marshal.ThrowExceptionForHR(hr);
            }
            return hr;
        }

        [DllImport("shell32")]
        private static extern int SHCreateItemFromParsingName([MarshalAs(UnmanagedType.LPWStr)] string pszPath, IBindCtx pbc, [MarshalAs(UnmanagedType.LPStruct)] Guid riid, out IShellItem ppv);

        [DllImport("user32")]
        private static extern IntPtr GetDesktopWindow();

#pragma warning disable IDE1006 // Naming Styles
        private const int ERROR_CANCELLED = unchecked((int)0x800704C7);
#pragma warning restore IDE1006 // Naming Styles

        [ComImport, Guid("DC1C5A9C-E88A-4dde-A5A1-60F82A20AEF7")] // CLSID_FileOpenDialog
        private class FileOpenDialog
        {
        }

        [ComImport, Guid("42f85136-db7e-439c-85f1-e4075d135fc8"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
        private interface IFileOpenDialog
        {
            [PreserveSig] int Show(IntPtr parent); // IModalWindow
            [PreserveSig] int SetFileTypes();  // not fully defined
            [PreserveSig] int SetFileTypeIndex(int iFileType);
            [PreserveSig] int GetFileTypeIndex(out int piFileType);
            [PreserveSig] int Advise(); // not fully defined
            [PreserveSig] int Unadvise();
            [PreserveSig] int SetOptions(FOS fos);
            [PreserveSig] int GetOptions(out FOS pfos);
            [PreserveSig] int SetDefaultFolder(IShellItem psi);
            [PreserveSig] int SetFolder(IShellItem psi);
            [PreserveSig] int GetFolder(out IShellItem ppsi);
            [PreserveSig] int GetCurrentSelection(out IShellItem ppsi);
            [PreserveSig] int SetFileName([MarshalAs(UnmanagedType.LPWStr)] string pszName);
            [PreserveSig] int GetFileName([MarshalAs(UnmanagedType.LPWStr)] out string pszName);
            [PreserveSig] int SetTitle([MarshalAs(UnmanagedType.LPWStr)] string pszTitle);
            [PreserveSig] int SetOkButtonLabel([MarshalAs(UnmanagedType.LPWStr)] string pszText);
            [PreserveSig] int SetFileNameLabel([MarshalAs(UnmanagedType.LPWStr)] string pszLabel);
            [PreserveSig] int GetResult(out IShellItem ppsi);
            [PreserveSig] int AddPlace(IShellItem psi, int alignment);
            [PreserveSig] int SetDefaultExtension([MarshalAs(UnmanagedType.LPWStr)] string pszDefaultExtension);
            [PreserveSig] int Close(int hr);
            [PreserveSig] int SetClientGuid();  // not fully defined
            [PreserveSig] int ClearClientData();
            [PreserveSig] int SetFilter([MarshalAs(UnmanagedType.IUnknown)] object pFilter);
            [PreserveSig] int GetResults([MarshalAs(UnmanagedType.IUnknown)] out object ppenum);
            [PreserveSig] int GetSelectedItems([MarshalAs(UnmanagedType.IUnknown)] out object ppsai);
        }

        [ComImport, Guid("43826D1E-E718-42EE-BC55-A1E261C37BFE"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
        private interface IShellItem
        {
            [PreserveSig] int BindToHandler(); // not fully defined
            [PreserveSig] int GetParent(); // not fully defined
            [PreserveSig] int GetDisplayName(SIGDN sigdnName, [MarshalAs(UnmanagedType.LPWStr)] out string ppszName);
            [PreserveSig] int GetAttributes();  // not fully defined
            [PreserveSig] int Compare();  // not fully defined
        }

        #pragma warning disable CA1712 // Do not prefix enum values with type name
        private enum SIGDN : uint
        {
            SIGDN_DESKTOPABSOLUTEEDITING = 0x8004c000,
            SIGDN_DESKTOPABSOLUTEPARSING = 0x80028000,
            SIGDN_FILESYSPATH = 0x80058000,
            SIGDN_NORMALDISPLAY = 0,
            SIGDN_PARENTRELATIVE = 0x80080001,
            SIGDN_PARENTRELATIVEEDITING = 0x80031001,
            SIGDN_PARENTRELATIVEFORADDRESSBAR = 0x8007c001,
            SIGDN_PARENTRELATIVEPARSING = 0x80018001,
            SIGDN_URL = 0x80068000
        }

        [Flags]
        private enum FOS
        {
            FOS_OVERWRITEPROMPT = 0x2,
            FOS_STRICTFILETYPES = 0x4,
            FOS_NOCHANGEDIR = 0x8,
            FOS_PICKFOLDERS = 0x20,
            FOS_FORCEFILESYSTEM = 0x40,
            FOS_ALLNONSTORAGEITEMS = 0x80,
            FOS_NOVALIDATE = 0x100,
            FOS_ALLOWMULTISELECT = 0x200,
            FOS_PATHMUSTEXIST = 0x800,
            FOS_FILEMUSTEXIST = 0x1000,
            FOS_CREATEPROMPT = 0x2000,
            FOS_SHAREAWARE = 0x4000,
            FOS_NOREADONLYRETURN = 0x8000,
            FOS_NOTESTFILECREATE = 0x10000,
            FOS_HIDEMRUPLACES = 0x20000,
            FOS_HIDEPINNEDPLACES = 0x40000,
            FOS_NODEREFERENCELINKS = 0x100000,
            FOS_OKBUTTONNEEDSINTERACTION = 0x200000,
            FOS_DONTADDTORECENT = 0x2000000,
            FOS_FORCESHOWHIDDEN = 0x10000000,
            FOS_DEFAULTNOMINIMODE = 0x20000000,
            FOS_FORCEPREVIEWPANEON = 0x40000000,
            FOS_SUPPORTSTREAMABLEITEMS = unchecked((int)0x80000000)
        }
        #pragma warning restore CA1712 // Do not prefix enum values with type name
    } 
```

结果：

[![在此处输入图像描述](../Images/365ff79cdf51e325f3f7f12af9e47ea2.png)](https://i.stack.imgur.com/PBGu7.png)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-11-17T21:22:57.787

奇怪的是这么多答案/投票，但没有人添加以下代码作为答案：

```
using (var opnDlg = new OpenFileDialog()) //ANY dialog
{ 
    //opnDlg.Filter = "Png Files (*.png)|*.png";
    //opnDlg.Filter = "Excel Files (*.xls, *.xlsx)|*.xls;*.xlsx|CSV Files (*.csv)|*.csv"

    if (opnDlg.ShowDialog() == DialogResult.OK)
    {
        //opnDlg.SelectedPath -- your result
    }
} 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-07-24T04:45:59.037

对我来说听起来就像你刚刚在[FolderBrowserDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.aspx)之后。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2018-08-23T18:20:20.433

这是另一个解决方案，它在一个简单的 ZIP 文件中提供了所有源。

它为 OpenFileDialog 提供了额外的 Windows 标志，使其像 Windows 7+ 文件夹选择对话框一样工作。

根据该网站，它是公共领域：“没有许可证，您可以随意获取和使用代码。”

*   文章：.NET Win 7 风格的文件夹选择对话框 ( [http://www.lyquidity.com/devblog/?p=136](http://www.lyquidity.com/devblog/?p=136) )
*   源代码：[http ://s3downloads.lyquidity.com/FolderSelectDialog/FolderSelectDialog.zip](http://s3downloads.lyquidity.com/FolderSelectDialog/FolderSelectDialog.zip)

Archive.org 链接：

*   文章：[https ://web.archive.org/web/20180823181552/http://www.lyquidity.com/devblog/?p=136](https://web.archive.org/web/20180823181552/http://www.lyquidity.com/devblog/?p=136)
*   源代码：[https ://web.archive.org/web/20180823181632/http://s3downloads.lyquidity.com/FolderSelectDialog/FolderSelectDialog.zip](https://web.archive.org/web/20180823181632/http://s3downloads.lyquidity.com/FolderSelectDialog/FolderSelectDialog.zip)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-10-20T20:32:21.247

查看**[Ookii Dialogs](https://github.com/ookii-dialogs)**库，它分别为 Windows 窗体和 WPF 实现了文件夹浏览器对话框。

[![在此处输入图像描述](../Images/6740705e60f39e60855a4e51e8d2e09a.png)](https://github.com/ookii-dialogs)

> **Ookii.Dialogs.WinForms**
> 
> [https://github.com/augustoproiete/ookii-dialogs-winforms](https://github.com/augustoproiete/ookii-dialogs-winforms)

* * *

> **Ookii.Dialogs.Wpf**
> 
> [https://github.com/augustoproiete/ookii-dialogs-wpf](https://github.com/augustoproiete/ookii-dialogs-wpf)

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2019-09-22T17:40:47.737

这应该是最明显和最直接的方式

```
using (var dialog = new System.Windows.Forms.FolderBrowserDialog())
{

   System.Windows.Forms.DialogResult result = dialog.ShowDialog();

   if(result == System.Windows.Forms.DialogResult.OK)
   {
      selectedFolder = dialog.SelectedPath;
   }

} 
```

# iphone - JSON 返回空值

> ID：11624299
> 
> 赞同：0
> 
> 时间：2012-07-24T04:44:12.817
> 
> 标签：iphone, objective-c, arrays, json, ipad

我在解析一些返回的 JSON 时遇到了一些麻烦。我对使用 JSON 很陌生。我正在尝试从第一个 JSON 数组元素中获取公司名称。我有一种感觉，我混淆了 NSMutabeArray 和 NSMutableDictionary 的使用。我得到的是空的。知道我做错了什么吗？

```
NSString *url = @"http://www.google.com/finance/info?infotype=infoquoteall&q=C,JPM,AIG,AAPL";

NSData* data = [NSData dataWithContentsOfURL: 
                [NSURL URLWithString: url]];

//parse out the json data
NSError* error;
NSMutableArray* json = [NSJSONSerialization 
                      JSONObjectWithData:data //1

                      options:kNilOptions 
                      error:&error];

NSString* companyName = [[json objectAtIndex:0] objectForKey:@"name"] ; //Where I need some help

NSLog(@"we got %@", companyName); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:02:53.537

在浏览器中加载该网址。看起来谷歌在 JSON 前面加上 //。我认为 NSJSONSerialization 是绊脚石。尝试这个

```
NSRange range = NSMakeRange(2, [data length] - 3);
NSData *noPrefix = [data subdataWithRange:range]; 
```

然后将其发送到解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T05:28:47.203

你放入了一个错误对象，但你从未看过它。如果有，您会看到数据已损坏：

```
Error Domain = NSCocoaErrorDomain Code = 3840 "The data couldn’t be read because it has been corrupted." (Invalid value around character 1.) UserInfo = 0x10030a8f0 { NSDebugDescription = Invalid value around character 1\. } 
```

我更改了 options 参数的值以查看此错误。我有

```
NSMutableArray* json = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers |NSJSONReadingAllowFragments error:&error]; 
```

# node.js - NodeJS Date 返回的日期值少了一天

> ID：11624301
> 
> 赞同：1
> 
> 时间：2012-07-24T04:44:45.787
> 
> 标签：node.js, date

```
 new Date("December 17, 1995, 03:24:00"); 
```

1995 年 12 月 16 日星期六 21:54:00 GMT

```
 new Date("25/Jul/2012"); 
```

格林威治标准时间 2012 年 7 月 24 日星期二 18:30:00

```
 new Date("7/25/2012"); 
```

格林威治标准时间 2012 年 7 月 24 日星期二 18:30:00

这个可以吗？如何根据我们在 Date Constructor 中传递的参数获取正确的 Date ？

请提出您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T05:10:17.703

您的系统设置的时区是什么？您显示的返回值是 GMT 并且早于 18 小时。我猜你在东亚或澳大利亚的某个地方？

# php - PHP 活动提要 - 类似于 Facebook - 如何将响应从 json 转换为 HTML 元素

> ID：11624302
> 
> 赞同：1
> 
> 时间：2012-07-24T04:44:51.063
> 
> 标签：php, facebook, json, html, feed

我们正在构建一个与 facebook 非常相似的活动流类型的网站（仅在活动源中）。为了加载用户的活动提要，我们通过 AJAX 方法将请求发送到 PHP 文件。服务器文件将处理逻辑并将值作为 JSON 格式的数组返回。我想知道，是否有任何框架可用于编写对 HTML 元素的 JSON 响应。而且，收费也不一样。它会根据类型（照片、相册、状态更新、共享、喜欢等）而有所不同。所以我需要为每个活动提要加载不同的模板视图。操作将很常见，例如所有提要的共享、评论。

您能否分享根据收到的数据加载内容的最佳方法。此外，内容需要定期刷新。我在下面粘贴了示例 JSON 响应以供参考：

```
{
  "id": "1",   
  "picture": "", 
  "link": "http://www.google.com", 
  "name": "Srini updated status", 
  "description": "Lorem ipsum",   
  "actions": [
    {
      "name": "Share", 
      "link": "http://networkedblogs.com/hGWk3?a=share"
    }
  ], 
  "type": "statusupdate",   
  "created_time": "2011-05-10T18:35:38+0000", 
  "updated_time": "2012-07-20T10:42:58+0000", 
  "likes": {    
    "count": 0
  }, 
  "comments": {
    "data": [
      {
        "id": "19292868552_10150189643478553_22286888", 
        "from": {
          "name": "Lorenzo Portillo", 
          "id": "613727863"
        }, 
        "message": "does anyone knows why i get a rhombus and '?' in my app     description when I publish in a user's wall, instead of a letter with accent?!?!?!?!?!?", 
        "created_time": "2012-05-28T13:48:45+0000"
      }, 
    "count": 1
  }
} 
```

需要有关如何根据 javascript 中的 json 数组设计模板的帮助/建议。任何评论/代码帮助都会更有帮助。

提前致谢，

问候

斯里尼瓦桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:46:47.600

当您从 Facebook API 获得响应时，您可以在 php 文件中创建一个 html 输出。据我所知，您可以在 PHP 中轻松进行 json 操作。通过使用 json_decode 你得到数组，你可以遍历它并根据你的要求构建一个 html。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:49:29.177

好吧，如果您考虑制作一个非常强大的应用程序，请**仔细**查看[emberjs](http://emberjs.com/documentation/)。

您还应该尝试 jquery (jquery mobile, jquery ui, [jquery ajax](http://api.jquery.com/category/ajax/) )

# android - 从异步更新 onlistitemclick listview 真的很困惑

> ID：11624303
> 
> 赞同：1
> 
> 时间：2012-07-24T04:45:02.203
> 
> 标签：android, listview, android-asynctask, listactivity

好的，这是我的第一个每个 android 应用程序，所以不要抨击我。如果我做错了什么或奇怪的事情，我非常愿意提出建议，所以请不要害羞。单击某个项目后，我在更新列表视图时遇到了一些麻烦。无论如何，这是代码......我只是不明白它是如何工作的，我认为......

**[ MainActivity.java ]**

```
package com.mycompany.myapp2;

import android.app.*;
import android.os.*;
import android.text.method.*;
import android.view.*;
import android.widget.*;
import android.content.*;
import java.util.*;
import java.io.*;

public class MainActivity extends ListActivity
{
    public CustomAdapter adapterMain;
    private FtpConnectionTask ftpTask;
    private LayoutInflater mInflater;
    private Vector<RowData> data;
    private TextView textView;
    @Override
    public void onCreate( Bundle savedInstanceState )
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        textView = (TextView) findViewById(R.id.txtView);
        textView.setMovementMethod(new ScrollingMovementMethod());
        xBins(textView);
    }

    /*public void addItems( ListView parent ) 
     {
     CustomAdapter adapter = (CustomAdapter) parent.getAdapter();
     RowData rd = new RowData("item4", "description4");
     data.add(rd);
     rd = new RowData("item5", "description5");
     data.add(rd);
     rd = new RowData("item6", "description6");
     data.add(rd);

     CustomAdapter adapter = new CustomAdapter(this, R.layout.row, R.id.item, data);
     setListAdapter(adapter);    
     getListView().setTextFilterEnabled(true);
     }*/

    public void onListItemClick( ListView parent, View v, int position, long id )
    {
        ftpTask.row = ftpTask.adapter.getItem(position);        
        String ftpItem = ftpTask.row.mItem;
        if ( ftpTask.row.mDescription == "dir" ) 
        {
            String[] args = new String[] { ftpItem };
            Object[] aObject = new Object[] { "cd", args, this };
            //ftpTask.adapter.clear();
            //ftpTask.processCmd(aObject);
        }
    }

    private class RowData
    {
        protected String mItem;
        protected String mDescription;

        RowData( String item, String description )
        {
            mItem = item;
            mDescription = description;       
        }

        @Override
        public String toString( )
        {
            return mItem + " " + mDescription;
        }
    }

    private class CustomAdapter extends ArrayAdapter<RowData>
    {

        public CustomAdapter( Context context, int resource,
                             int textViewResourceId, List<RowData> objects )
        {
            super(context, resource, textViewResourceId, objects);

        }

        @Override
        public View getView( int position, View convertView, ViewGroup parent )
        {
            ViewHolder holder = null;

            //widgets displayed by each item in your list
            TextView item = null;
            TextView description = null;

            //data from your adapter
            RowData rowData= getItem(position);

            //we want to reuse already constructed row views...
            if ( null == convertView )
            {
                convertView = mInflater.inflate(R.layout.row, null);
                holder = new ViewHolder(convertView);
                convertView.setTag(holder);
            }
            // 
            holder = (ViewHolder) convertView.getTag();
            item = holder.getItem();
            item.setText(rowData.mItem);

            description = holder.getDescription();     
            description.setText(rowData.mDescription);

            return convertView;
        }
    }

    /**
     * Wrapper for row data.
     *
     */
    private class ViewHolder
    {   
        private View mRow;
        private TextView description = null;
        private TextView item = null;

        public ViewHolder( View row )
        {
            mRow = row;
        }

        public TextView getDescription( )
        {
            if ( null == description )
            {
                description = (TextView) mRow.findViewById(R.id.description);
            }
            return description;
        }

        public TextView getItem( )
        {
            if ( null == item )
            {
                item = (TextView) mRow.findViewById(R.id.item);
            }
            return item;
        }    
    }
    public void xBins( View view )
    {
        IrcConnectionTask task = new IrcConnectionTask();
        task.execute(new Object[] { "irc.efnet.pl", 6667, "sgd5", this });
    }
} 
```

**[IrcConnectionTask.java]**

```
package com.mycompany.myapp2;

import android.os.*;
import java.io.*;
import java.net.*;

public class IrcConnectionTask extends AsyncTask<Object, String, String>
{
    MainActivity callerActivity;
    private Socket socket;
    @Override
    protected String doInBackground(Object... params)
    {
        String response = "";
        String host = (String)params[0];
        Integer port = (Integer)(params[1]);
        String nick = (String)params[2];
        callerActivity = (MainActivity)params[3];
        try
        {
            socket = new Socket(host, port);
            String msg1 = "NICK " + nick;
            String msg2 = "USER sur 8 * :be";
            String messages[] = { msg1, msg2 };
            InputDumper task = new InputDumper();
            task.execute(new Object[] { socket, messages, nick, callerActivity});
        }
        catch ( UnknownHostException e )
        {
            e.printStackTrace();
        }
        catch ( IOException e )
        {
            e.printStackTrace();
        }
        return response;
    }

    @Override
    protected void onPostExecute(String result)
    {
        //textView.setText(result);
    }

    @Override
    protected void onProgressUpdate(String result)
    {
        //textView.setText(result);
    }
} 
```

**[输入转储器.java]**

```
package com.mycompany.myapp2;

import android.os.*;
import android.text.*;
import java.io.*;
import java.net.*;
import android.widget.*;

public class InputDumper extends AsyncTask<Object, String, String>
{
    MainActivity callerActivity;
    private String response = "";
    private Integer i = 0;
    private Boolean Connected = false;
    protected String doInBackground(Object... params)
    {
        try
        {
            Socket socket = (Socket)params[0];
            String messages[] = (String[])params[1];
            String nickname = (String)params[2];
            callerActivity = (MainActivity) params[3];
            //Pattern pattern = Pattern.compile("USERNAME: (.*)");
            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            String msg;
            while ((msg = bufferedReader.readLine()) != null)
            {
                if (msg.indexOf("USERNAME:") > 0) 
                {
                    new FtpConnectionTask().execute(new Object[] { nickname, "emulation", callerActivity });
                    publishProgress("FTP CONNECTION STARTED!!!");
                }
                if (msg.startsWith("PING")) 
                {
                    String PONG = "PONG " + msg.substring(msg.indexOf(":"));
                    new OutputWriter().execute(new Object[] { socket, PONG, callerActivity });
                    Connected = true;
                }
                else if (i == 4)
                {
                    for (String message : messages)
                    {
                        new OutputWriter().execute(new Object[] { socket, message, callerActivity });
                    }
                }
                else if (i == 13) //msg.endsWith("servers"))
                {
                    new OutputWriter().execute(new Object[] { socket, "JOIN #xbins", callerActivity });
                }
                else if (i == 20)
                {
                    new OutputWriter().execute(new Object[] { socket, "PRIVMSG #xbins :!list", callerActivity });
                }
                response += msg;
                publishProgress(msg);
                i++;
            }
        } 
        catch (IOException e )
        {
            e.printStackTrace();
        }
        return response;
    }

    @Override
    protected void onPostExecute(String result)
    {
        //textView.setText(result);
    }
    private TextView textView;
    @Override
    protected void onProgressUpdate(String... progress)
    {
        textView = (TextView) callerActivity.findViewById(R.id.txtView);
        textView.append(Html.fromHtml("<font color='green'>" + progress[0] + "</font><br />"));
        final int scrollAmount = textView.getLayout().getLineTop(textView.getLineCount())
            - textView.getHeight();
        // if there is no need to scroll, scrollAmount will be <=0
        if (scrollAmount > 0)
            textView.scrollTo(0, scrollAmount);
        else
            textView.scrollTo(0, 0);
    }
} 
```

**[OutputWriter.java]**

```
package com.mycompany.myapp2;

import android.os.*;
import android.text.*;
import java.io.*;
import java.net.*;
import android.widget.*;

public class OutputWriter extends AsyncTask<Object, String, String>
{
    MainActivity callerActivity;
    private String response = "";
    protected String doInBackground(Object... params)
    {
        try
        {
            Socket socket = (Socket)params[0];
            String message = (String)params[1];
            callerActivity = (MainActivity)params[2];
            BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
            bufferedWriter.write(message + "\n\r");
            bufferedWriter.flush();
            publishProgress(message);
        } 
        catch (IOException e )
        {
            e.printStackTrace();
        }
        return response;
    }

    @Override
    protected void onPostExecute(String result)
    {
        //textView.setText(result);
    }
    private TextView textView;
    @Override
    protected void onProgressUpdate(String... progress)
    {
        textView = (TextView) callerActivity.findViewById(R.id.txtView);
        textView.append(Html.fromHtml("<font color='red'>" + progress[0] + "</font><br />"));
        final int scrollAmount = textView.getLayout().getLineTop(textView.getLineCount())
            - textView.getHeight();
        // if there is no need to scroll, scrollAmount will be <=0
        if (scrollAmount > 0)
            textView.scrollTo(0, scrollAmount);
        else
            textView.scrollTo(0, 0);
    }
} 
```

**[FtpConnectionTask.java]**

```
package com.mycompany.myapp2;

import android.os.*;
import android.text.*;
import android.util.*;
import android.widget.*;
import java.io.*;
import org.apache.commons.io.*;
import org.apache.commons.net.ftp.*;
import java.util.*;
import android.view.*;
import android.content.*;
import android.app.*;

public class FtpConnectionTask extends AsyncTask<Object, String, String>
{
    public static CustomAdapter adapter;
    public static RowData row;
    MainActivity callerActivity;
    private LayoutInflater mInflater;
    public Vector<RowData> data;
    private FTPClient mFTPClient = new FTPClient();
    protected String doInBackground( Object... params )
    {
        try
        {
            if ( mFTPClient.isConnected() )
            {
                Log.v("TESTING", "Is connected");
                String cmd = (String)params[0];
                String[] args = (String[])params[1];
                callerActivity = (MainActivity) params[2];
                if (cmd == "cd")
                {
                    mFTPClient.changeWorkingDirectory(args[0].toString());
                    String[] names = mFTPClient.listNames();
                    listRemote(names);
                }
            } 
            else 
            {
                String user = (String)params[0];
                String pass = (String)params[1];
                callerActivity = (MainActivity) params[2];
                mFTPClient.connect("distribution.xbins.org");
                mFTPClient.login(user, pass);
                mFTPClient.enterLocalActiveMode();
                mFTPClient.setFileTransferMode(FTP.BINARY_FILE_TYPE);
                mFTPClient.setFileType(FTP.BINARY_FILE_TYPE);
                publishProgress("WORKING DIR: " + mFTPClient.printWorkingDirectory());
                publishProgress("LOGGED IN");
                String[] names = mFTPClient.listNames();
                listRemote(names);
                FTPFile[] remoteFiles = mFTPClient.listFiles();
                for ( FTPFile remoteFile : remoteFiles ) //int i = 0; i < remoteFiles.length; i++)
                {
                    if ( remoteFile.getType() == FTPFile.FILE_TYPE ) 
                    {
                        String name = remoteFile.getName();
                        long length = remoteFile.getSize();
                        String readableLength = FileUtils.byteCountToDisplaySize(length);
                        publishProgress(name + ":\t\t" + readableLength);
                    }
                }
            }
        }
        catch (IOException e)
        {
            e.printStackTrace();
        } 
        return null;
    }

    final void listRemote(final String... params)
    {
        callerActivity.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                mInflater = (LayoutInflater) callerActivity.getSystemService(callerActivity.LAYOUT_INFLATER_SERVICE);
                data = new Vector<RowData>();
                for ( String name : params )
                {
                    row = new RowData(name, "dir");
                    data.add(row);
                }

                adapter = new CustomAdapter(callerActivity, R.layout.row, R.id.item, data);
                callerActivity.setListAdapter(adapter);
                callerActivity.getListView().setTextFilterEnabled(true);
            }
        });
    }

    private TextView textView;
    @Override
    protected void onProgressUpdate( String... progress )
    {
        textView = (TextView) callerActivity.findViewById(R.id.txtView);
        textView.append(Html.fromHtml("<font color='yellow'>" + progress[0] + "</font><br />"));
        final int scrollAmount = textView.getLayout().getLineTop(textView.getLineCount())
            - textView.getHeight();
        // if there is no need to scroll, scrollAmount will be <=0
        if ( scrollAmount > 0 )
            textView.scrollTo(0, scrollAmount);
        else
            textView.scrollTo(0, 0);
    }

    public class RowData
    {
        protected String mItem;
        protected String mDescription;

        RowData( String item, String description )
        {
            mItem = item;
            mDescription = description;       
        }

        @Override
        public String toString( )
        {
            return mItem + " " + mDescription;
        }
    }

    public class CustomAdapter extends ArrayAdapter<RowData>
    {

        public CustomAdapter( Context context, int resource,
                             int textViewResourceId, List<RowData> objects )
        {
            super(context, resource, textViewResourceId, objects);

        }

        @Override
        public View getView( int position, View convertView, ViewGroup parent )
        {
            ViewHolder holder = null;

            //widgets displayed by each item in your list
            TextView item = null;
            TextView description = null;

            //data from your adapter
            RowData rowData= getItem(position);

            //we want to reuse already constructed row views...
            if ( null == convertView )
            {
                convertView = mInflater.inflate(R.layout.row, null);
                holder = new ViewHolder(convertView);
                convertView.setTag(holder);
            }
            // 
            holder = (ViewHolder) convertView.getTag();
            item = holder.getItem();
            item.setText(rowData.mItem);

            description = holder.getDescription();     
            description.setText(rowData.mDescription);

            return convertView;
        }
    }

    /**
     * Wrapper for row data.
     *
     */
    public class ViewHolder
    {   
        private View mRow;
        private TextView description = null;
        private TextView item = null;

        public ViewHolder( View row )
        {
            mRow = row;
        }

        public TextView getDescription( )
        {
            if ( null == description )
            {
                description = (TextView) mRow.findViewById(R.id.description);
            }
            return description;
        }

        public TextView getItem( )
        {
            if ( null == item )
            {
                item = (TextView) mRow.findViewById(R.id.item);
            }
            return item;
        }    
    }
} 
```

**[行.xml]**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#00000000">

<TextView 
    android:id="@+id/item" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:focusableInTouchMode="false"
    android:clickable="false"
    android:focusable="false"/>

<TextView 
    android:id="@+id/description" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:focusableInTouchMode="false"
    android:clickable="false"
    android:focusable="false" />

</LinearLayout> 
```

**[主.xml]**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello"
    android:id="@+id/txtView"
    android:maxLines = "5"
    android:scrollbars = "vertical" />

    <ListView 
        android:id="@android:id/list" 
        android:layout_height="fill_parent" 
        android:layout_width="fill_parent" 
        android:layout_below="@+id/txtView" />

</RelativeLayout> 
```

# iphone - EggCraft 构建问题

> ID：11624304
> 
> 赞同：1
> 
> 时间：2012-07-24T04:45:03.087
> 
> 标签：iphone, ios, ipad, cocos2d-iphone, ios5

[我们在构建 EggCraft 示例代码(https://github.com/holgua/EggCraft)](https://github.com/holgua/EggCraft)时遇到此错误。 有什么解决办法吗？

- 提前感谢![在此处输入图像描述](../Images/d2ebda0edbc5c116ffcaa7c748520fbc.png) 错误显示如下屏幕截图

# .net - Log4Net MVC3 配置 - 未创建记录

> ID：11624305
> 
> 赞同：1
> 
> 时间：2012-07-24T04:45:15.150
> 
> 标签：.net, log4net

到目前为止，我正在尝试从一个空的 MVC3 项目中获取 hello-world log4net 示例，但运气不佳，

在我的 Views\web.config

```
<log4net>
<appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
  <bufferSize value="1" />
  <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  <connectionString value="Data Source=server;Initial Catalog=dbname;user id=user;password=pw" />
  <commandText value="INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message],[Exception]) VALUES (@log_date, @thread, @log_level, @logger, @message, @exception)" />
  <parameter>
    <parameterName value="@log_date" />
    <dbType value="DateTime" />
    <layout type="log4net.Layout.RawTimeStampLayout" />
  </parameter>
  <parameter>
    <parameterName value="@thread" />
    <dbType value="String" />
    <size value="255" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%thread" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@log_level" />
    <dbType value="String" />
    <size value="50" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%level" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@logger" />
    <dbType value="String" />
    <size value="255" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%logger" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@message" />
    <dbType value="String" />
    <size value="4000" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%message" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@exception" />
    <dbType value="String" />
    <size value="2000" />
    <layout type="log4net.Layout.ExceptionLayout" />
  </parameter>
</appender>
<root>
  <level value="ALL" />
  <appender-ref ref="AdoNetAppender" />
</root> 
```

在 global.asax

```
 protected void Application_Start()
    {
        log4net.Config.XmlConfigurator.Configure();

        log4net.ILog log = log4net.LogManager.GetLogger(this.GetType());
        log.Info("stuff");
        log.Info("stuff");

        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    } 
```

为数据库创建脚本

```
 CREATE TABLE [dbo].[Log](
[ID] [int] IDENTITY(1,1) NOT NULL,
[Date] [datetime] NOT NULL,
[Thread] [varchar](255) NOT NULL,
[Level] [varchar](20) NOT NULL,
[Logger] [varchar](255) NOT NULL,
[Message] [varchar](4000) NOT NULL
 ) ON [PRIMARY] 
```

谁能发现这里可能缺少什么？

谢谢

更多信息：log4net 1.2.11.0，写入日志文件工作正常，所以这似乎与 db 相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:19:03.070

您的 create 语句中似乎没有异常列

# javascript - 获取 Facebook 用户 ID

> ID：11624306
> 
> 赞同：-2
> 
> 时间：2012-07-24T04:45:16.503
> 
> 标签：javascript, facebook, cordova, appmobi

有没有办法通过图形 API 传递用户的电子邮件和密码来获取 Facebook 用户 ID....我想要做的是，我想获取特定用户的个人资料详细信息..如果我们知道用户 id 然后可以通过 GRAPH API 获取特定用户的详细信息.. [https://graph.facebook.com/ID](https://graph.facebook.com/ID)

但我不知道如何获取 Facebook 用户 id .....请帮帮我....我在移动应用程序中使用 JavaScript 和 html5..android 和 ios ..IDE 是 APPMOBI 和电话间隙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:01:09.353

您可以尝试通过使用用户名和密码登录来获取访问令牌，然后调用`https://graph.facebook.com/me`并获取 id 字段。我认为没有直接的方法可以通过 API 获取 id，只使用用户名和密码而不获取该用户的访问令牌，这需要用户接受您的 appId。

# google-chrome-extension - 如何在 Chrome 扩展程序的 devtools 面板下修改内容？

> ID：11624307
> 
> 赞同：4
> 
> 时间：2012-07-24T04:45:26.277
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在开发 Google Extension，我正在向开发人员工具添加新面板，它似乎对我来说工作正常。但是我不知道如何通过JavaScript修改面板的内容。

谁能启发我？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T08:54:21.410

在面板中显示内容并不难。首先，我假设您已经按照[文档](http://code.google.com/chrome/extensions/devtools.html)`manifest.json`创建了基本扩展（由和`devtools.html`组成`devtools.js`）。至少包含.`devtools.html``<script src="/devtools.js"></script>`

当[`chrome.devtools.panel.create`](http://code.google.com/chrome/extensions/devtools.panels.html#method-create)用于创建面板时，可以指定回调。此回调接收类型的参数[`ExtensionPanel`](http://code.google.com/chrome/extensions/devtools.panels.html#type-ElementsPanel)。此对象定义`onShown`和`onHidden`事件侦听器。
事件[`onShown`](http://code.google.com/chrome/extensions/devtools.panels.html#event-ExtensionPanel-onShown)侦听器接收一个附加参数：对面板`window`对象的引用。现在，你可以做任何你想做的事。

例如，当用户第一次打开 devtools 面板时，将一些文本附加到面板：

```
chrome.devtools.panels.create("devtools Test", "/icon.png", "/panel.html",
  function(extensionPanel) {
    var runOnce = false;
    extensionPanel.onShown.addListener(function(panelWindow) {
        if (runOnce) return;
        runOnce = true;
        // Do something, eg appending the text "Hello!" to the devtools panel
        panelWindow.document.body.appendChild(document.createTextNode('Hello!'));
    });
}); 
```

# c# - 列表选择器 asp.net

> ID：11624320
> 
> 赞同：0
> 
> 时间：2012-07-24T04:46:31.953
> 
> 标签：c#, asp.net

我有列表选择器 asp.net 一个已分配技术人员和未分配技术人员我的问题我需要删除未分配的重复名称表单我需要一种从列表框 b 中删除迈克的方法

```
list box A
Mike 

list box B
Mike 
Adam 
TOm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T04:53:43.557

你可以试试 .ExceptWith 方法

# device-driver - 删除 .inf 和 .pnf 文件

> ID：11624334
> 
> 赞同：2
> 
> 时间：2012-07-24T04:48:41.477
> 
> 标签：device-driver, wdk, inf

我使用 .inf 文件手动安装我的驱动程序。直到现在，我从inf文件夹中删除了oem.inf和.pnf文件进行卸载。每当我安装新驱动程序时，我都会删除/卸载旧的 inf 和 pnf 文件。

在我的旧卸载中（通过删除 .inf 和 .pnf 文件），我没有修改或删除任何注册表设置。

在这种情况下，我是否要更改或删除注册表中的任何设置（例如：devnode）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T20:10:17.490

您应该使用[SetupUninstallOEMInf](http://msdn.microsoft.com/en-us/library/aa377446%28v=vs.85%29.aspx)函数来卸载 .INF（以及随后的 .PNF）文件。这将处理细节。`pnputil`（在 Vista 和更高版本上）应该从命令行执行相同的操作。但是，此功能不会删除当前安装的驱动程序（例如与 devnode 相关联的驱动程序）。

1.  为什么要先卸载旧驱动程序？用户可能已经为至少一个 devnode 安装了您的驱动程序。为什么不使用 Microsoft 认可的解决方案，例如`DpInst`？它将完成**更新**驱动程序所需的工作。

2.  传递`SUOI_FORCEDELETE`to`SetupUninstallOEMInf`不是一个好主意，因为您最终会在您的 devnodes（在注册表中）中得到挥之不去的 .INF 引用。

3.  在工作中，我编写了一个名为 DriverUninstaller 的实用程序，它删除了 devnode，然后删除了 INF。**我只将此实用程序用于卸载。升级应由 DpInst 处理。**流程大致是：

    1.  使用 SetupAPI 枚举它们（例如，如果您的设备类是唯一的，则按设备类）
    2.  对于每个 devnode，调用`SetupDiCallClassInstaller(DIF_REMOVE, ...)`
    3.  致电`SetupDiBuildDriverInfoList`查找我设备的所有 .INF 文件
    4.  对于每个 INF，调用`SetupUninstallOEMInf`

如果有人对这个实用程序感兴趣，我也许可以说服我的雇主开源它:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T23:43:48.360

正如另一个答案指出的那样，在 Windows 上删除驱动程序的 API 是[SetupUninstallOEMInf](http://msdn.microsoft.com/en-us/library/aa377446%28v=vs.85%29.aspx)方法，但我想我会在此处添加一些重要说明：

*   INF 路径参数只能是文件名（不能包含完整路径！）
*   此 API 需要管理员权限（这不足为奇）
*   在 64 位系统上，该方法仅在 64 位进程的上下文中执行时才有效（即 WOW64 不起作用）

SetupDiGetDriverInfoDetail API 可用于查询有关要为特定设备删除的相关 INF 文件的信息[。](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551973(v=vs.85).aspx)SetupDiEnumDriverInfo/SetupDiBuildDriverInfoList API 可用于枚举特定设备的所有驱动程序。

```
 // given infFilePath - full path to inf as returned by a query using SetupDiGetDriverInfoDetail
  TCHAR* infFileName = GetFileNamePart(infFilePath);
  if(SetupUninstallOEMInf(pInf, SUOI_FORCEDELETE, NULL))
  {
       // success
  }else
  {
DWORD errCode = GetLastError();
if(errCode == 0x02)
{
            //  means that the driver INF file was not found
            //  most likely it was already uninstalled 
}else if(errCode == 0x05)
      {
            //  must run as administrator
      }else
{
           // some other error code.. handle appropriately
}
  } 
```

我已经开源了我为执行 USB 和媒体/图像设备的驱动程序卸载而编写的工具的代码。此处的详细信息：http: [//mdinescu.com/software-development/30-driver-hunter-programatically-uninstall-drivers-in-windows](http://mdinescu.com/software-development/30-driver-hunter-programatically-uninstall-drivers-in-windows)

# vb.net - 如何减少 vb.net 应用程序中的内存提交大小？

> ID：11624343
> 
> 赞同：1
> 
> 时间：2012-07-24T04:49:46.257
> 
> 标签：vb.net, memory-leaks, dispose

我正在 VB.Net 中开发 Windows 应用程序。我的问题是在运行应用程序提交一段时间后内存的大小增加了。我已经使用内存分析器（Ant Profiler，CL R Profiler）来识别应用程序中的问题。它建议我在关闭表单后处理活着或未注册的对象。因此，我处理了所有可能影响内存泄漏的对象。

但是一旦它变高，仍然无法减少提交大小。

谁能给我建议该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:53:22.697

.NET 垃圾收集器不保证在任何特定时间范围内释放内存。例如，它可能会等到需要内存后再释放已使用的内存。

您可以通过调用强制垃圾收集

```
GC.Collect 
```

这些文章更深入地解释了一些事情：

[http://msdn.microsoft.com/en-us/library/ms973837.aspx](http://msdn.microsoft.com/en-us/library/ms973837.aspx)

[http://www.simple-talk.com/dotnet/.net-framework/understanding-garbage-collection-in-.net/](http://www.simple-talk.com/dotnet/.net-framework/understanding-garbage-collection-in-.net/)

# javascript - 在 jQuery 1.8 的自定义过滤器选择器中获取“匹配”对象

> ID：11624345
> 
> 赞同：24
> 
> 时间：2012-07-24T04:50:00.373
> 
> 标签：javascript, jquery, jquery-selectors

作为参考，这里有一篇关于[**使用 jQuery 创建自定义过滤器选择器**](http://answers.oreilly.com/topic/1055-creating-a-custom-filter-selector-with-jquery/)的文章。

* * *

### 介绍：

对于那些不熟悉**jQuery 的自定义过滤器选择器**的人，这里有一个关于它们是什么的快速入门：

如果您需要一个可重用的，您可以通过将您自己的函数添加到对象[`filter`](http://api.jquery.com/filter/)来扩展 jQuery 的选择器表达式。`jQuery.expr[':']`

该函数将在当前集合中的每个元素上运行，并且应该返回 true 或 false（很像[`filter`](http://api.jquery.com/filter/)）。三位信息被传递给这个函数：

1.  有问题的元素

2.  该元素在整个集合中的索引

3.  从正则表达式匹配返回的`match`数组，其中包含更复杂表达式的重要信息。

扩展`jQuery.expr[':']`后，您可以将其用作 jQuery 选择器中的过滤器，就像您使用任何内置的过滤器（`:first`、`:last`等`:eq()`）

* * *

这是一个示例，我们将过滤分配有多个类的元素：

```
jQuery.expr[':'].hasMultipleClasses = function(elem, index, match) {
    return elem.className.split(' ').length > 1;
};

$('div:hasMultipleClasses'); 
```

这是小提琴：http: [//jsfiddle.net/acTeJ/](http://jsfiddle.net/acTeJ/)

* * *

在上面的示例中，我们没有使用`match`传入函数的数组。让我们尝试一个更复杂的例子。在这里，我们将创建一个过滤器来匹配`tabindex`大于指定数字的元素：

```
jQuery.expr[':'].tabindexAbove = function(elem, index, match) {
    return +elem.getAttribute('tabindex') > match[3];
};

$('input:tabindexAbove(4)'); 
```

这是小提琴：http: [//jsfiddle.net/YCsCm/](http://jsfiddle.net/YCsCm/)

之所以可行，是因为该`match`数组是从用于解析选择器的正则表达式返回的实际数组。因此，在我们的示例中，[`match`将是以下数组](http://jsfiddle.net/YCsCm/1/)：

```
[":tabIndexAbove(4)", "tabIndexAbove", "", "4"] 
```

如您所见，我们可以使用`match[3]`.

* * *

### 问题：

在 jQuery 1.8 中，[不再](http://jsfiddle.net/YCsCm/2/)[将`match`](http://jsfiddle.net/YCsCm/2/)数组传递给 filter 函数。由于我们无法访问传入的信息，[因此`tabindexAbove`过滤器不再起作用](http://jsfiddle.net/YCsCm/3/)（这个小提琴和上面那个小提琴之间的唯一区别是它使用了更高版本的 jQuery）。

所以，这里有几点我想澄清：

1.  这是预期的行为吗？它在任何地方都有记录吗？

2.  这是否与[`Sizzle`已更新](http://blog.jquery.com/2012/07/04/the-new-sizzle/)的事实有关（尽管它明确指出“在此重写中未更改 Sizzle 的旧 API”。也许这就是他们所说的“删除现在不必要的`Sizzle.filter`”） ?

3.  现在我们无法访问`match`数组，还有其他方法可以获取传递给过滤器的信息（在我们的例子中，`4`）？

[我从未在 jQuery Docs 中找到任何关于自定义过滤器选择器的文档](https://www.google.com/search?q=site%3Adocs.jquery.com+custom+filter+selector)，所以我不知道从哪里开始寻找有关此的信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T18:45:20.520

jQuery 添加了一个实用程序，用于在 Sizzle 中创建自定义伪。它有点冗长，但比使用 match[3] 更具可读性。它还具有性能更高的优点，因为您可以避免每次测试元素时重复繁琐的计算。已经被接受的答案是一个很好的答案，不过我加个注解说可以使用$.expr.createPseudo代替自己设置sizzleFilter属性，这样会节省一点空间。

```
jQuery.expr[':'].tabIndexAbove = $.expr.createPseudo(function( tabindex ) {
    return function(elem) {
        return +elem.getAttribute('tabindex') > tabindex;
    }
});

$('input:tabIndexAbove(4)').css('background', 'teal'); 
```

jsfiddle：http: [//jsfiddle.net/timmywil/YCsCm/7/](http://jsfiddle.net/timmywil/YCsCm/7/)

这都记录在 Sizzle 的 github 上： [https ://github.com/jquery/sizzle/wiki/Sizzle-Documentation](https://github.com/jquery/sizzle/wiki/Sizzle-Documentation)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T16:23:15.407

通过查看 jQuery 1.8 beta2 源代码和[*The New Sizzle*](http://blog.jquery.com/2012/07/04/the-new-sizzle/)的“可扩展性”部分，您必须设置`fn.sizzleFilter`为`true`以获取伪参数和上下文。如果没有，您将只获得参数中的所有元素。

这是与您的示例执行相同操作的代码。使用`selector`函数中传递的参数来获取伪参数。

这是 jsfiddle 上的[工作示例](http://jsfiddle.net/YCsCm/6/)。

正如上面的博文中提到的，您甚至可以预编译和缓存您的选择器。

```
var sizzle = jQuery.find;

var tabIndexAbove = function( selector, context, isXml ) {
    return function( elem ) {
        return elem.getAttribute("tabindex") > selector;
    };
};

/*
 fn.sizzleFilter is set to true to indicate that tabIndexAbove 
 is a function that will return a function for use by the compiler 
 and should be passed the pseudo argument, the context, and 
 whether or not the current context is xml. If this property is 
 not set, adding pseudos works similar to past versions of Sizzle
*/
tabIndexAbove.sizzleFilter = true;
sizzle.selectors.pseudos.tabIndexAbove = tabIndexAbove;

$('input:tabIndexAbove(4)').css('background', 'teal'); 
```

请注意，如果您正在查看源代码，jQuery 稍微改变了面向公众的接口指向的结构。

在 jQuery 1.7.2 中：

```
jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.filters; 
```

在 jQuery 1.8b2 中：

```
jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos; 
```

# css - 在 Rails 上使用 ruby 并通过 heroku 部署，css 样式在 localhost 上完美显示，但在 herokuapp 上样式混乱

> ID：11624348
> 
> 赞同：2
> 
> 时间：2012-07-24T04:50:18.473
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3.1, heroku, github

我正在关注 michael hartl 的 ruby​​ on rails 在线教程书并完成了第 10 章：

我的本地主机以正确的格式显示所有内容：

本地主机上的个人资料页面如下所示：http: [//img225.imageshack.us/img225/5301/profilen.png](http://img225.imageshack.us/img225/5301/profilen.png)）

新闻提要在本地主机上看起来像这样：http: [//img826.imageshack.us/img826/2280/newsfeed.png](http://img826.imageshack.us/img826/2280/newsfeed.png)）

但请访问--> whizcollab.herokuapp.com 并查看与本地主机相比的样式变化......它看起来很奇怪。所有的内容似乎都在那里，但我认为 css 是不同的。所有文件都通过git正确上传并推送到herokuapp。

有兼容性问题吗？

请指导:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:59:11.210

这不可能与您在屏幕截图中本地显示的那样部署到 Heroku 实例的代码相同。Heroku 版本中缺少一些元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:04:23.853

记得做一个'git add'。然后检查“git status”。如果列出了任何文件，则表明 heroku 没有收到您的最新更改。只需执行 'git push heroku master' 就可以了。

# c - C 程序似乎跳过了 while 循环

> ID：11624355
> 
> 赞同：2
> 
> 时间：2012-07-24T04:50:52.893
> 
> 标签：c, gdb, double

代码似乎跳过了 while 循环：

```
int i,j;
i= floor((Lx-23.61)/0.1);
j=0; 
while(Nh - modSED[i][j] > 0.0){
    j++;
}
if(j>0 && modSED[i][j]-Nh > Nh-modSED[i][j-1]){
    fileNH=modSED[i][j-1];
}else{
    fileNH=modSED[i][j];
} 
```

它或多或少是通过双精度数组进行的粗略线性搜索（i-index 由代码的另一部分预设，应该不是问题）。当我查看 GDB 时，代码似乎行为不端：

```
Breakpoint 1, mag (filter=4, Lx=23.930108812418158, z=0.57071772467724535, Nh=0.011911981460606383) at infopt.c:45
45      while(Nh-modSED[i][j]>0.0){
(gdb) print Nh-modSED[i][j]
$1 = 0.001911981460606383
(gdb) n
48      if(j>0 && modSED[i][j]-Nh > Nh-modSED[i][j-1]){
(gdb) 
```

并且它刚刚跳过了 j++ 段，即使 while 循环的计算结果为 true。

谢谢，乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:55:10.793

由于浮点比较，似乎出现了错误。众所周知，浮点比较不是很安全。有关更多信息，请参阅这些：

*   [http://floating-point-gui.de/errors/comparison/](http://floating-point-gui.de/errors/comparison/)
*   [比较浮点值有多危险？](https://stackoverflow.com/questions/10334688/how-dangerous-is-it-to-compare-floating-point-values)

第二个链接对浮点运算有非常详细的解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:33:33.187

外部 2D 数组 modSED 被声明为错误的维度（不同于初始化它的 c 文件），因此程序、gdb 或两者都被混淆了。修复声明的维度解决了这个问题。（这里的问题是指更大的问题，即我没有从 modSED 返回正确的值。）但是，由于 GDB 似乎给出了错误的输出，所以我被代码的错误部分挂断了。

也许这反过来导致 GDB 似乎违反逻辑并跳过了 while 循环？（现在运行程序，GDB 可以毫不费力地增加 j 并表明它已经这样做了。）

# entity-framework - 连接到 sql azure 的工作人员角色随机错误

> ID：11624357
> 
> 赞同：1
> 
> 时间：2012-07-24T04:51:30.217
> 
> 标签：entity-framework, azure, azure-sql-database, azure-worker-roles

我有一个连接到 Sql Azure 的辅助角色，一次检索一条记录，处理它使用 Entity Framework 4 将其标记为完成。伪代码

```
 while (true)
 {
    ProcessRecord();
 }

 ProcessRecord()
 {
   try{
        ObjectContext oc = new ObjectContext ();
        //process records
        oc.Dispose()
    }
    catch(Exception e)
    {
        //logging code goes here...
     }
 } 
```

该角色运行得很好，但偶尔（比如一次 9 小时）我收到一个错误 - “底层提供程序在打开时失败。” 这是否意味着辅助角色无法连接到 SQL Server？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:27:35.680

您是否记录了确切的错误代码？一般来说，可能有很多事情。作为开始，我建议阅读[这篇文章](http://windowsazurecat.com/2010/10/best-practices-for-handling-transient-conditions-in-sql-azure-client-applications/)，解释其中的很多内容。另请查看[这个 SO question](https://stackoverflow.com/questions/11574516/latency-between-azure-web-role-and-sql-azure-and-application-performance)，因为我的回答解释了很多关于 Windows Azure SQL 数据库的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:27:57.083

这是一些与环境相关的随机错误，如此[处](https://stackoverflow.com/q/7006519/57428)所述。发生这种情况 - SQL Azure 位于单独的计算机上，有时网络请求会失败。你必须重试你的请求，就是这样。

# java - JSP bean - 每次加载页面时都读取数据库？

> ID：11624359
> 
> 赞同：1
> 
> 时间：2012-07-24T04:51:54.947
> 
> 标签：java, database, jsp, jsf

我还没有完成代码，但我正在考虑如何在 JSP/JSF 中执行此操作。

所以，我有一些课程，我想我可以在会话开始时从数据库加载。我的第一个想法是，我只需使用数据库中的必要数据加载它们一次，执行所有操作，然后在会话完成时销毁 bean。问题是，如果另一个用户在会话期间更改了信息怎么办？所以我想我可以使用页面范围，但是我不想让服务器超载。

这方面的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:18:47.230

首先，您的应用程序的每个访问者都会获得他们自己的会话范围 bean，因此您只需担心将每个用户对 bean 上数据的更改持久化。

其次，您担心 ORM 产品考虑的事项。使用 Spring JPA 或 Hibernate 等提供的 API 将为您提供通过 Bean 上的本地句柄将数据更改持久化回 DB 的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:16:10.477

我决定使用应用程序范围的 bean 而不是单例类。那会做的。

# http - 可以根据 URL 路径解析 DNS

> ID：11624360
> 
> 赞同：2
> 
> 时间：2012-07-24T04:52:08.463
> 
> 标签：http, dns, url-routing

我的理解是，将两个相关站点放在同一个域下有一定的优势，而不是单独的子域（例如不同书籍类型的子站点）。我能想到的两个是使用相同的 SSL 证书和 SEO 排名。

我希望同一域的不同路径解析为不同的 IP 地址。例如`example.com/a`to`100.100.100.100`和`example.com/b`to `200.200.200.200`。我知道这对于传统的 DNS 服务器是不可能的，但是是否有其他技术或商业服务可以实现这一点？理想情况下，我还能够动态更改路径解析到的位置，因为不同的服务器启动或离线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T04:55:48.197

那是做不到的；DNS 的名称到 IP 解析只考虑主机名。

您可以通过在 at托管像[nginx](http://nginx.org/)`example.com`这样的反向代理，然后直接查询`/a`to`100.100.100.100`和 for `/b`to 来获得类似的结果`200.200.200.200`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:44:20.893

您不能使用 DNS（DNS 仅将域名解析为 IP，与“/”之后的任何内容无关），但您可以使用 URL 转发来完成。通常 DNS（尤其是动态 DNS）提供商也提供 URL 转发服务，试试 no-ip.com 之类的公司。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-13T23:58:05.447

您可以使用前缀来执行此操作。A.example.com --> 100.100.100.100 和 B.example.com -->200.200.200.200

# python - Python：遍历一个集合，这样我们就不会多次比较相同的对象？

> ID：11624362
> 
> 赞同：3
> 
> 时间：2012-07-24T04:52:37.863
> 
> 标签：python, comparison, set, iteration

所以我在写一个游戏。以下是碰撞检测的工作原理；有一个不可见的网格，对象（或者更确切地说，它们的引用）根据它们的位置从单元格中添加和删除。碰撞比较仅在同一单元格中的对象之间进行。

引用存储在`set`每个单元所拥有的 Python 中。它必须是一个集合。当检测到碰撞时，将其存储在`Collision`具有三个属性的对象中；碰撞的两个物体和发生碰撞的时间。当考虑到所有冲突时，它们会按时间排序，然后进行处理。

这是单个细胞用来检查碰撞的循环；

```
#grid.collisions is a list of recorded collisions, and self.objects is the set
#of objects currently in this cell.

for i in self.objects:
    for j in self.objects:
        if id(i) != id(j) and pygame.sprite.collide_rect(i, j):
            grid.collisions.append(Collision(i, j)) 
```

问题是，这会比较相同的两个对象两次；如果我们有一个 set `{1, 2, 3, 4}`，我们会比较`(1, 2)` *和* `(2, 1)`。不仅如此，这些重复的比较还被添加到冲突的总列表中，从而破坏了整个系统！

我知道我不能索引集合，这意味着我不能做像`for j in range(i, len(self.objects))`where`i`和`j`are both integers 这样的事情。 **如何绕过此限制以确保同一集合中的两个对象不会被比较两次？** 我无法移除这些集合中的对象；只有当对象离开网格单元时，它们才会被移除。

由于每帧都会处理这些冲突，因此我宁愿避免创建新对象（实际代码不会`Collisions`像示例那样创建新对象，我只是为了便于阅读而对其进行了简化）。我*可以*删除重复的比较，但是将每个碰撞与其他碰撞进行比较将是很多开销。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T05:03:30.550

如果您的目标只是比较集合的所有独特组合，您可以使用[`itertools.combinations`](http://docs.python.org/library/itertools.html#itertools.combinations)

```
from itertools import combinations

for i, j in combinations(self.objects, 2):
    if pygame.sprite.collide_rect(i, j):
        grid.collisions.append(Collision(i, j)) 
```

例子：

```
aSet = set([1,2,3,4])
list(combinations(aSet, 2))
# [(1, 2), (1, 3), (1, 4), (2, 3), (2, 4), (3, 4)] 
```

`combinations`与管理多个索引和临时列表相比，生成一个非常高效的生成器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T04:56:56.317

列个清单怎么样？

```
objects=list(self.objects)
for i in range(len(objects)):
  for j in range(i+1,len(objects)):
     if pygame.sprite.collide_rect(objects[i], objects[j]):
       grid.collisions.append(Collision(objects[i], objects[j])) 
```

这是另一种选择：

```
objects=[]
for i in range(self.objects):
  for j in objects:
    if pygame.sprite.collide_rect(i, j):
      grid.collisions.append(Collision(i, j))
    objects.append(i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T05:14:33.813

在您的代码中更改`!=`为：`<`

```
for i in self.objects:
    for j in self.objects:
        if id(i) < id(j) and pygame.sprite.collide_rect(i, j):
            grid.collisions.append(Collision(i, j)) 
```

# ruby - 红宝石字符串合并

> ID：11624364
> 
> 赞同：0
> 
> 时间：2012-07-24T04:52:42.677
> 
> 标签：ruby, string, merge

我想在 Ruby 1.8.7 中合并字符串，请帮忙。

```
s1 = "abc(1,,,,)"
s2 = "abc(,,3,,)"
s3 = "abc(,2,,,)"
s4 = "abc(,,,,5)" 
```

输出应该是：

```
s = "abc(1,2,3,,5)" 
```

Ruby 1.8.7 中是否有任何内置函数可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:24:22.480

大概是这样的？可能不够通用...

```
def merge *strings
    result_array = strings.inject([]) do |merged_array,string|
        string_content = string[/\((.+?)\)/, 1].split(',', -1)
        string_content.each_with_index do |elem,idx|
            if !merged_array[idx] || merged_array[idx].empty?
                merged_array[idx] = elem 
            end
        end

        merged_array
    end

    $` + '(' + result_array.join(',') + ')' + $'
end

p merge(s1, s2, s3, s4) #=> "abc(1,2,3,,5)" 
```

# jakarta-ee - 在java中使用getRequestDispatcher()后显示值

> ID：11624366
> 
> 赞同：0
> 
> 时间：2012-07-24T04:52:58.290
> 
> 标签：jakarta-ee

```
<jsp:useBean id="customers" type="Customers" scope="session" />
<jsp:getProperty name="name" property="fullName" />
<%= customers.getFullName() %>
<jsp:getProperty name="address" property="address" />
<%= customers.getAddress() %>
<jsp:getProperty name="city" property="city" />
<%= customers.getCity() %> 
```

在 Servlet 文件中

```
RequestDispatcher disp = request.getRequestDispatcher("home.jsp");
disp.forward(request, response); 
```

问题是 home.jsp 没有显示任何输出或错误。

# asp.net - 不同选项卡中的 HTML5 LocalStorage 处理

> ID：11624367
> 
> 赞同：1
> 
> 时间：2012-07-24T04:53:18.363
> 
> 标签：asp.net, html, local-storage

我正在 asp.net 中开发一个网站，在其中我正在开发用户注释，为此我在 HTML5 中实现了注释并将数据存储在本地存储中，然后将其保存到数据库中，但问题是我打开了很多用户在不同的选项卡中，我想向每个用户展示他自己的笔记，以便我可以使用本地存储来处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:12:14.833

参见，在 html5 中，本地数据库在您的浏览器中存储数据。
因此您可以管理特定浏览器的数据库。（如会话和cookies）
即使您在不同的浏览器中打开您的页面，您也不会得到您在最后一个浏览器中存储的数据。
因此，如果您想在不同的浏览器中存储特定用户的数据，那么您可以使用 html5 的内置数据库，否则您必须将数据存储在服务器端。

# java - 应用程序说没有响应，即使我使用 AsyncTask 来减轻主线程上的负载

> ID：11624369
> 
> 赞同：0
> 
> 时间：2012-07-24T04:53:23.587
> 
> 标签：java, android, xml, xml-parsing

此代码解析本地存储的 xml 文件，然后从解析的数据创建动态 UI，尽管我还没有完成 UI 部分。直到昨天它工作正常，现在突然没有响应。

```
public class XML_PARSER extends Activity {

String TAG= "XML_PARSER";
List optionList = new ArrayList(); ;
Document dom;
Document doc;
Menu mymenu=null;

String msg=null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.parser);
    new ParseXML().execute();
   }

private class ParseXML extends AsyncTask<Integer, Integer, Document>{
    @Override
protected Document doInBackground(Integer... params) {

     DocumentBuilderFactory dbf= DocumentBuilderFactory.newInstance();
    Document dom1=null;
    try {
        //Uri uri = Uri.parse("android.resource://com.example.xml_parser/raw/options");
        InputStream is=getResources().openRawResource(R.raw.options);

        DocumentBuilder db = dbf.newDocumentBuilder();
        dom1=db.parse(is);
        Log.i(TAG,"parsing done");

    }

    catch(ParserConfigurationException pce){
        pce.printStackTrace();
    }
    catch(SAXException se){
        se.printStackTrace();
    }
    catch(IOException ioe){
        ioe.printStackTrace();
    }
    return dom1;

}
    @Override
    public void onPostExecute(Document d) {
        ParseDocument(d); 
        //onCreateOptionsMenu(mymenu);
        text();
        }

}
@SuppressWarnings("unchecked")
public void ParseDocument(Document dom){
    Element docEle = dom.getDocumentElement();
    Node node;

    NodeList n1= docEle.getElementsByTagName("Option");
    if(n1!=null && n1.getLength()>0){

        for(int i=0;i<n1.getLength();i++){

            node=n1.item(i);

            Element e1=(Element)n1.item(i); 
```

它以某种方式卡在这个 getOption() 上，因为如果写在下面，则不会打印日志，而如果写在上面，则会打印日志。

```
 Option e = getOption(e1,node);
            Log.i(TAG,"Parse Document reached");

            optionList.add(e);

            }

        }

    }

private Option getOption(Element el,Node parent){

    String name= getTextValue(el,"Name");
    String type = el.getAttribute("type");

    Option op = new Option(name,type);
    fillSubOptions(op, el, parent);

    return op;

}

private String getTextValue(Element ele, String tagName){
    String textVal=null;
    NodeList n1 = ele.getElementsByTagName(tagName);

    if(n1!=null && n1.getLength()>0){
        Element el= (Element)n1.item(0);
        textVal =el.getFirstChild().getNodeValue();

    }
    return textVal;
}

private void fillSubOptions(Option op, Element el, Node parent){
    Element ele;
    Node node;
    String name = null;
    NodeList n1 = el.getElementsByTagName("Option");
    int count =0;
    if(n1!=null && n1.getLength()>0){
        for(int i=0;i<n1.getLength();i++){
            ele = (Element)n1.item(i);
            node= n1.item(i);
            if((node.getParentNode()).equals(parent)){
                name= getTextValue(ele, "Name");
                count= op.printSubOptions(count);
                op.setSubOptions(name);
            }
        }
    }

}

@SuppressWarnings("unchecked")
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    this.mymenu=menu;
    Iterator<Option> it= optionList.iterator();
    int count=0;
    while(it.hasNext()){
        Option e= (Option)it.next();
        if(e.getType().equals("menu")){
            count++;
            menu.add(0,count,0,e.getName());
        }
    }

    getMenuInflater().inflate(R.menu.parser, menu);
    return true;
}

public class Option {

    String name;
    String type;
    String parent;
    int count;
    ArrayList<String> subOptions;
    Option(String name,String type)
    {
        setName(name);
        setType(type);

        subOptions = new ArrayList<String>();
        parent = null;
    }
    public void setName(String name) {
        this.name = name;
    }

    public void setType(String type) {
        this.type = type;
    }
    public void setSubOptions(String subOption) {
        (this.subOptions).add(subOption);

    }

    public String getName() {
        return name;
    }
    public int printSubOptions(int count) {
        Iterator<String> it = (this.subOptions).iterator();
        if(it.hasNext()){

            while(it.hasNext()){

                count++;
            }
        }
        return count;

    }
    public String getType() {
        return type;

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:09:53.880

由于在 UI 线程中调用的方法`onPostExecuted` 获得了对**UI 线程**的控制，我希望这可能是原因，因为您正在执行的**解析**仍在**UI 线程**上完成，因此您的*应用程序停止响应*，因为它将是`parsing`数据。

使用**onPreExecute()**以`ProgressDialog`这种方式启动`ProgressDialog` `Globally`。在顶部声明。

```
ProgressDialog pd; 
```

**在`onPreExecute`方法中**启动它。****

 **```
 @Override
    public void onPreExecute() {
          pd=ProgressDialog.show(myActivity.this,"","Please Wait");
        } 
```

在底部的**doInBackground**本身中调用这两个方法。不要在**PostExecute**方法中调用它，以便它进入**后台**`executed`

 **```
ParseDocument(d); 
text(); 
```

**现在，**在 PostExecute 方法中，关闭 progressDialog。

```
@Override
    public void onPostExecute(Document d) {
          pd.dismiss();  //Dismiss the Progress Dialog 
        } 
```****

# hash - 散列密码的最佳实践 - SHA256 还是 SHA512？

> ID：11624372
> 
> 赞同：42
> 
> 时间：2012-07-24T04:53:40.233
> 
> 标签：hash, cryptography, passwords, sha256, sha512

我目前正在使用带有盐的 SHA256 来散列我的密码。继续使用 SHA256 更好还是应该更改为 SHA512？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-12-18T13:08:10.127

切换到 SHA512 几乎不会让您的网站更安全。**您不应该编写自己的密码散列函数。**相反，使用现有的实现。

SHA256 和 SHA512 是**消息摘要**，它们**从来都不**是密码散列（或[密钥派生](https://en.wikipedia.org/wiki/Key_derivation_function)）函数。（尽管消息摘要可以用作 KDF 的构建块，例如在 PBKDF2 中使用 HMAC-SHA256。）

密码散列函数应该防御字典攻击和彩虹表。为了防御字典攻击，密码散列方案**必须**包含一个工作因素，以使其尽可能慢。

目前，最好的选择可能是*Argon2*。这一系列密码哈希函数赢得了 2015 年密码哈希竞赛。

如果*Argon2*不可用，则唯一的其他标准化密码散列或密钥派生函数是*PBKDF2*，这是一个旧的 NIST 标准。如果不需要使用标准，其他选择包括*bcrypt*和*scrypt*。

维基百科有这些功能的页面：

*   [https://en.wikipedia.org/wiki/Argon2](https://en.wikipedia.org/wiki/Argon2)
*   [https://en.wikipedia.org/wiki/Bcrypt](https://en.wikipedia.org/wiki/Bcrypt)
*   [https://en.wikipedia.org/wiki/Scrypt](https://en.wikipedia.org/wiki/Scrypt)
*   [https://en.wikipedia.org/wiki/PBKDF2](https://en.wikipedia.org/wiki/PBKDF2)

编辑：NIST 不建议直接使用 SHA2 或 SHA3 等[消息摘要来散列密码！](https://en.wikipedia.org/wiki/Cryptographic_hash_function)[这是 NIST 的建议](https://pages.nist.gov/800-63-3/sp800-63b.html)：

> 记忆的秘密应使用合适的单向密钥派生函数进行加盐和散列。密钥派生函数将密码、盐和成本因子作为输入，然后生成密码哈希。他们的目的是让已经获得密码哈希文件的攻击者每次猜测密码都变得昂贵，因此猜测攻击的成本很高或令人望而却步。合适的密钥导出函数的示例包括基于密码的密钥导出函数 2 (PBKDF2) [SP 800-132] 和气球 [BALLOON]。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-09-08T04:34:57.023

SHA256 仍然是 NIST 批准的，但如果可以的话，最好改为 SHA512 或 bcrypt。

在撰写本文时，NIST 批准的哈希函数列表为：SHA-1、SHA-224、SHA-256、SHA-384、SHA-512、SHA-512/224、SHA-512/256 和 SHA3- 224、SHA3-256、SHA3-384 和 SHA3-512、SHAKE128 和 SHAKE256。

见[https://csrc.nist.gov/projects/hash-functions](https://csrc.nist.gov/projects/hash-functions)

根据您运行的操作系统，您可能无法访问 SHA3 或 SHAKE 哈希函数。

许多人更喜欢 bcrypt 而不是 SHA512，但 bcrypt 也仅在某些操作系统上可用。

SHA512 将在您的系统上可用，或者如果没有，您可能有一个旧系统，以至于选择散列算法是您最少的问题。

首选 bcrypt 的一个常见原因是 bcrypt 是可调整的 - 您可以增加轮数（工作因子）以增加破解 bcrypt 哈希所需的时间。

但 SHA256 和 SHA512 也是可调的。虽然默认值为 5000 发，但您可以根据需要指定更多。500000 需要我目前的电脑大约 0.45 秒来计算，这感觉可以接受。

例如：

```
password    required    pam_unix.so sha512 shadow rounds=500000 ... 
```

从 SHA256 更改为 SHA512 的原因是 SHA256 需要更多轮次才能与 SHA512 一样安全，因此虽然它不是不安全的，但它的安全性较低。

参见，例如：[https ://medium.com/@davidtstrauss/stop-using-sha-256-6adbb55c608](https://medium.com/@davidtstrauss/stop-using-sha-256-6adbb55c608)

加密变化很快，所以明天你得到的任何答案都可能被证明是错误的，但目前的技术水平是，虽然 bcrypt 可能比 SHA512 更好，但 SHA512 很好。

如果 SHA512 是您“开箱即用”的，请使用它（不是 SHA256），并且不要担心 bcrypt 或任何 SHA3 系列，直到它们成为您的分发标准。

* * *

顺便说一句，当前评分最高的答案有许多错误或误导性的说法。

“切换到 SHA512 几乎不会让您的网站更安全。”

这是误导。切换到 SHA512 将使您的网站更加安全。SHA256 不如 SHA512，但也不可怕。没有什么比 SHA512 可能在您的系统上可用的明显更好的了。Bcrypt 可能会更好，但这并不清楚，而且 bcrypt 在很多系统上都不可用。SHA3​​ 系列可能更好，但也没有广泛使用。

“SHA256 和 SHA512 从来都不是密码散列”

这是错误的。SHA256 和 SHA512 都是经过批准的 NIST 哈希算法。

“为了防御字典攻击，密码散列方案必须包含一个工作因素，以使其尽可能慢。”

这是错误的。高工作因子将防止暴力哈希破解，但不能防止字典攻击。没有工作因子低到可以使用但又高到可以防止字典攻击。如果您的密码是字典单词，它将落入字典攻击。防止字典攻击不使用字典中可以找到的密码。

在我目前的 PC 上，轮数的限制似乎是 1000 万，每个输入密码都会产生 8.74 秒的延迟。这足够长到非常痛苦，比你想要使用的时间长。足够长的时间来防止暴力攻击 - 但是如果他们愿意，一个拥有良好破解装备和一点耐心的坚定对手仍然可以遍历字典。

“密码散列函数应该防御......彩虹表”

这充其量是误导。对彩虹表的防御是确保每个密码都有自己的“盐”。如今，这几乎是标准做法，并且发生在调用散列函数之前。（加盐意味着在对密码进行散列之前添加一个随机字符串。加盐与密码一起存储，所以它不是秘密，但这确实意味着即使用户选择了一个众所周知的密码，攻击者也不能只是认识到 {this hash} 属于 {that password}，他们仍然需要破解 hash。）

“目前，最好的选择可能是 Argon2。这一系列密码哈希函数赢得了 2015 年密码哈希竞赛。”

这还不清楚。任何“新”加密函数都可能有不明显的被破解方式，这就是为什么大多数人更喜欢已被广泛使用的函数的原因。除此之外，您可能无法使用 Argon2。

“其他选择，如果不需要使用标准，包括 bcrypt 和 scrypt。”

这还不清楚。在某一时刻，scrypt 被视为更好的 bcrypt。然而，由于各种原因，人们的情绪已经从 scrypt 转向 bcrypt。参见，例如：[https ://blog.ircmaxell.com/2014/03/why-i-dont-recommend-scrypt.html](https://blog.ircmaxell.com/2014/03/why-i-dont-recommend-scrypt.html)

重复一遍，此时，SHA512 似乎是一个不错的选择，bcrypt 也是如此。

SHA512 已获得 NIST 批准，而 bcrypt 未获得批准。

SHA512 几乎肯定会在您的系统上可用。Bcrypt 可能是也可能不是。

如果两者都在您的系统上，我可能会推荐 bcrypt，但这是一个很接近的电话。哪一个都好。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-21T09:44:18.343

在大多数 64 位处理器上以 SHA256ses 32 位数学计算时，SHA512 可能会明显更快，这种运算通常会稍微慢一些。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-24T05:05:09.043

如果您问我，这已经得到了很好的回答：[https ://stackoverflow.com/questions/3897434/password-security-sha1-sha256-or-sha512](https://stackoverflow.com/questions/3897434/password-security-sha1-sha256-or-sha512)

Jeff 也有一篇关于散列的有趣帖子：http: [//www.codinghorror.com/blog/2012/04/speed-hashing.html](http://www.codinghorror.com/blog/2012/04/speed-hashing.html)

请注意，SHA512 的计算速度比 SHA256 慢得多。在安全散列的上下文中，**这是一种资产。**计算散列的速度较慢意味着破解需要更多的计算时间，因此如果你能负担得起计算成本，SHA512 将因此更加安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-01T21:11:29.293

除了关于密码的非常好的和更实用/准确的答案之外，我还有另一个观点（我认为这是对其他观点的补充）。

我们使用工具和公司来执行漏洞评估。我们在代码中遇到的一个危险信号是使用了 MD5。这与密码无关……只是为字符串生成摘要。MD5 又好又短，对于这个特定场景来说真的不是一个安全问题。

问题是，配置扫描仪以忽略这些误报需要时间。并且修改外部供应商编写的安全报告要困难得多，以便将“高风险”发现更改为“低风险”或删除。

所以我的观点是，为什么不使用更好的算法呢？就我而言，我开始使用 SHA512 代替 MD5。长度比MD5有点猥琐，但对我来说无所谓。显然，需要考虑自己在计算或存储方面的性能需求。

顺便说一句，从 MD5 切换到 SHA256 也可能没问题，不会引发任何危险信号……但这让我想到了“为什么不使用更好的算法”的评论。

# tridion - 我们如何在事件事件的帮助下停止发布结构组？

> ID：11624375
> 
> 赞同：-4
> 
> 时间：2012-07-24T04:53:50.013
> 
> 标签：tridion, tridion-2011

我想在事件的帮助下停止发布结构组？请分享一些代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:06:45.870

如果您想要阻止用户从 GUI 发布结构组（或出版物），那么也许您可以使用 GUI 扩展。Jaime Santos 有一篇关于在 GUI 中隐藏命令的精彩帖子：

[http://jaimesantosalcon.blogspot.com/2011/10/2011-sdl-tridion-gui-extensions.html](http://jaimesantosalcon.blogspot.com/2011/10/2011-sdl-tridion-gui-extensions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:36:47.827

我可以建议您打开结构组属性页面，然后取消选中“可发布”复选框吗？还是您想通过活动实现这一目标的其他原因？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:03:15.737

你真的需要详细说明你的问题。我不知道你到底想做什么，但我怀疑你想删除发布整个结构组的可能性？

如果您想删除要发布的项目，您需要编写一个结构组解析器来为您执行此操作。

当您详细说明您的问题时，我可以分享一些相关代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:18:40.543

我们通过使用 GUI 扩展来做到这一点。

# vba - 将数据插入到按钮所在的同一行

> ID：11624385
> 
> 赞同：0
> 
> 时间：2012-07-24T04:55:22.180
> 
> 标签：vba, button, excel

我创建了一个宏，它将数据从一个工作表复制到另一个工作表。我想要一个通用宏，它从与按钮相同的行号复制数据，而不是`B2`在代码中如下所述。

目前这段代码运行良好；按钮文本已更新并`MacroA`已分配给它。我读到了`topleftcell`，但无法实现它。

```
Sub MacroA()
'
' MacroA Macro
'
    Range("I2:J2").Select
    Selection.Copy
    Range("B2").Select
    Selection.Hyperlinks(1).Follow NewWindow:=False, AddHistory:=True
    Range("D2").Select
    Cells.Find(What:="", After:=ActiveCell, LookIn:=xlFormulas, LookAt:= _
        xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlNext, MatchCase:= _
        False, SearchFormat:=False).Activate
    ActiveSheet.Paste
    Application.CutCopyMode = False
    ActiveWorkbook.Save
    ActiveWindow.Close
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:34:34.113

未经测试，但可能会帮助你......

```
Sub Tester()

    Dim c As Range, sht As Worksheet
    Dim d As Range

    Set sht = ActiveSheet

    Set c = sht.Shapes(Application.Caller).TopLeftCell
    sht.Cells(c.Row, 2).Hyperlinks(1).Follow NewWindow:=False, AddHistory:=True

    With ActiveSheet
        Set d = .Cells.Find(What:="", After:=.Range("D2"), LookIn:=xlFormulas, _
                LookAt:=xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)
        sht.Range("I2:J2").Copy d

        .Parent.Save
        .Parent.Close
    End With

    Application.CutCopyMode = False
End Sub 
```

# scala - 如何动态设置提升片段的参数？

> ID：11624388
> 
> 赞同：3
> 
> 时间：2012-07-24T04:55:47.247
> 
> 标签：scala, lift

有没有办法可以动态修改片段的参数？

例如，如果我调用这个 URL

```
host:port/a_page?name=myname 
```

我希望我的页面看起来像这样：

```
<div class="lift:surround?with=default;at=content">
   <div class="lift:comet?type=MySnippet;name=myname" >
      ...
   </div>
</div> 
```

这甚至可能吗？我尝试使用一些 javascript 来从 url 中提取参数并将其放入`class`属性中，`div`但据我了解，这是行不通的，因为脚本将始终在 Lift 框架执行之后执行，这很神奇。

提前致谢！非常感谢任何帮助。

* * *

我使用了提供的两个技巧来使其工作，就像 ajantis 提到的直接从片段中读取参数是最简单的方法，但在彗星调用中不起作用。Rogach 解决方案有效。

所以解决方案是：

```
<div class="lift:Ex.wrap">
  <div id="myid"></div>
</div>

def wrap = { 
val name = "lift:comet?type=MySnippet;name=" + S.param("name").openOr("...")            
"#myid" #> <div id="myid" class={name} ></div>
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:42:32.973

为什么不直接在片段处理中提取 http 参数？IE

```
def render = {
   val name = S.param("name").openOr("...")
....
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:30:48.637

您可以尝试将该彗星片段包装在其他片段中，这将转换 xml 并将其添加`name=myname`到`class`. 像：

```
<div class="lift:Ex.wrap">
  <div class="lift:comet?type=MySnippet"></div>
</div>

class Ex {
  def wrap = { (n: NodeSeq) =>
    // example transformation
    // AntiXML syntax
    import com.codecommit.antixml._;
    val comet = n \ "div" head;
    val comet2 = 
      comet.copy(attrs = comet.attrs +
                         ("class" -> (comet.attrs("class") + ";name=myname")))
    n \ "div" updated (0, comet2) unselect
  }
 } 
```

# python - 尝试使用 pysvn 进行 SVN 导出时如何解决此错误？

> ID：11624395
> 
> 赞同：4
> 
> 时间：2012-07-24T04:56:57.590
> 
> 标签：python, svn, pysvn

我正在尝试使用 Python SVN 绑定 (pysvn) 在存储库上进行导出，但遇到以下错误：

```
python: subversion/libsvn_subr/dirent_uri.c:955: svn_dirent_join: Assertion `svn_dirent_is_canonical(base, pool)' failed.
Aborted (core dumped) 
```

示例代码是：

```
import pysvn
client = pysvn.Client()
uri = 'https://svn.mycompany.com/myproject/trunk/'
# This works fine
print client.list(uri)
# This crashes with the above error
r = client.export(uri, './temp', force=True) 
```

但是，`svn export --force https://svn.mycompany.com/myproject/trunk/`从 shell 提示符执行操作没有问题。

我在用着：

*   Python 2.7.3
*   颠覆 1.7.5
*   CentOS 6.0 x64

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:16:52.663

Subversion API 在内部使用规范的 URL 和路径。您的 URL 有斜杠，这不是规范的 URL。在调用 Subversion API 函数之前删除尾部斜杠或使用 svn_uri_canonicalize() 函数来规范化 URL。

您可以在 Subversion API 文档中找到更多详细信息： [http : *//subversion.apache.org/docs/api/latest/svn_dirent_uri_8h.html*](http://subversion.apache.org/docs/api/latest/svn__dirent__uri_8h.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:26:27.520

我尝试使用该`svn+ssh://`方案并得到同样的错误。这让我相信断言失败实际上可能与 repo URI 无关。一时兴起，我将导出目录更改为`/tmp/`，一切正常。我之前尝试使用的目录 ( `./temp`) 存在于我的主目录中，该目录位于启用了“root squash”选项的 NFS 挂载上。以前已知这会导致奇怪的应用程序问题。

# asp.net - ClickOnce 应用程序尝试在错误的位置查找应用程序清单（奇怪的参数）

> ID：11624397
> 
> 赞同：0
> 
> 时间：2012-07-24T04:57:22.030
> 
> 标签：asp.net, visual-studio-2005, clickonce

这是我在 ClickOnce 上的第三篇文章，但每个人都有自己的主题，所以我希望没人介意。我正在紧急将现有应用程序迁移到新服务器。我将 ClickOnce 应用程序发布到服务器（仅供在线使用，不用于安装），如果我尝试通过 Web 浏览器执行它，我会收到一个消息框，提示“无法继续。应用程序格式不正确。请联系应用程序供应商以获取协助。”，其详细日志包括以下内容；*（我用**掩盖了 URL 中的一些字符串，因为它是私人信息）

```
PLATFORM VERSION INFO
Windows : 5.1.2600.196608 (Win32NT)
Common Language Runtime : 4.0.30319.1
System.Deployment.dll : 4.0.30319.1 (RTMRel.030319-0100)
clr.dll : 4.0.30319.1 (RTMRel.030319-0100)
dfdll.dll : 4.0.30319.1 (RTMRel.030319-0100)
dfshim.dll : 4.0.31106.0 (Main.031106-0000)

SOURCES
Deployment url: http://**.**.***.173:10080/*****/ClickOnce/*********.application?comid=*****&userjpname=************&userfullname=************&canregist=True&canmanage=True&systemid=0

ERROR SUMMARY
Below is a summary of the errors, details of these errors are listed later in the log.
* Activation of http://**.**.***.173:10080/*****/ClickOnce/*********.application?comid=*****&userjpname=************&userfullname=************&canregist=True&canmanage=True&systemid=0 resulted in exception. Following failure messages were detected:
+ Exception reading manifest from http://**.**.***.173:10080/*****/ClickOnce/*********.application?comid=*****&userjpname=************&userfullname=************&canregist=True&canmanage=True&systemid=0: the manifest may not be valid or the file could not be opened.
+ Manifest XML signature is not valid.
+ The digital signature of the object did not verify.

COMPONENT STORE TRANSACTION FAILURE SUMMARY
No transaction error was detected.

WARNINGS
There were no warnings during this operation.

OPERATION PROGRESS STATUS
* [2012/07/24 13:16:39] : Activation of http://**.**.***.173:10080/*****/ClickOnce/*********.application?comid=*****&userjpname=************&userfullname=************&canregist=True&canmanage=True&systemid=0 has started.

ERROR DETAILS
Following errors were detected during this operation.
* [2012/07/24 13:16:39] System.Deployment.Application.InvalidDeploymentException (ManifestParse)
- Exception reading manifest from http://**.**.***.173:10080/*****/ClickOnce/*********.application?comid=*****&userjpname=************&userfullname=************&canregist=True&canmanage=True&systemid=0: the manifest may not be valid or the file could not be opened.
- Source: System.Deployment
- Stack trace:
at System.Deployment.Application.ManifestReader.FromDocument(String localPath, ManifestType manifestType, Uri sourceUri)
at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestDirectBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options)
at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
--- Inner Exception ---
System.Deployment.Application.InvalidDeploymentException (SignatureValidation)
- Manifest XML signature is not valid.
- Source: System.Deployment
- Stack trace:
at System.Deployment.Application.Manifest.AssemblyManifest.ValidateSignature(Stream s)
at System.Deployment.Application.ManifestReader.FromDocument(String localPath, ManifestType manifestType, Uri sourceUri)
--- Inner Exception ---
System.Security.Cryptography.CryptographicException
- The digital signature of the object did not verify.

- Source: System.Deployment
- Stack trace:
at System.Deployment.Internal.CodeSigning.SignedCmiManifest.Verify(CmiManifestVerifyFlags verifyFlags)
at System.Deployment.Application.Manifest.AssemblyManifest.ValidateSignature(Stream s)

COMPONENT STORE TRANSACTION DETAILS
No transaction information is available. 
```

我的服务器地址是`http://**.**.***.173:10080`，并且 clickonce 应用程序发布在`http://**.**.***.173:10080/*****/ClickOnce`文件夹中。

我假设它试图找到一个带有这些奇怪参数（或查询字符串？）的应用程序清单文件（.manifest），例如 comid、userjpname、userfullname、canregist、canmanage、True 和 systemid，因此它返回了一个错误。

在我的部署清单文件中，应用程序清单文件的位置指定如下。不知道这些参数是从哪里来的。

```
<dependentAssembly 
    dependencyType="install"  
    codebase="MYAPPNAME_9_9_9_99\MYAPPNAME.exe.manifest"
    size="8532">
<assemblyIdentity
    name="MYAPPNAME.exe"
    version="1.0.1.43"
    publicKeyToken="*************"
    language="neutral"
    processorArchitecture="msil"
    type="win32" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:57:08.130

Did you try to sign the application and deployment manifests again?

Reading you description again, I'm a bit confused.

First you create an application manifest.

Then you sign it.

Then you create a deployment manifest and explicitly point it to your application manifest.

Then you sign this, too.

(btw: you have to do the signing part every time you change something.)

# java - Java 集合 LinkedList 函数参数类型

> ID：11624400
> 
> 赞同：5
> 
> 时间：2012-07-24T04:57:49.233
> 
> 标签：java, generics, collections

> **可能重复：**
> [为什么 Java 集合删除方法不是通用的？](https://stackoverflow.com/questions/104799/why-arent-java-collections-remove-methods-generic)

我注意到很少有 LinkedList 操作采用通用参数类型 E，而少数采用 'Object' 作为参数。例如，

```
add(E e) 
remove(Object o) 
```

这样做有特定的理由吗？为什么不让“删除”采用泛型类型 E。（我知道类型擦除后没关系，但只是想知道）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:23:30.927

这是因为**删除**操作使用方法检查相等性`equals()`，并且`equals()`方法将 Object 作为参数而不是 generic 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:05:22.273

因为调用者可以调用`remove`或`contains`使用任何类型的对象，并且代码仍然可以正常执行。集合的类型参数使用的编译时契约只是保证*集合中的任何东西**都是**给定的类型。它不关心你是否询问它是否包含不同类型的对象。

* Nitpicker's Corner，我知道 Java 泛型确实不能保证。我想更多的语法糖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T05:10:22.990

add 和 remove 方法都继承自 Collection 接口。remove 方法没有用通用参数进行改造，大概是因为它无关紧要。删除不会影响集合的类型安全，当您更改地球上最流行的 API 之一时，更改越少越好。你会看到 contains 方法也遭受了同样的命运。

# javascript - 如何在 Xcode 4.3 上使用 JavaScript？

> ID：11624401
> 
> 赞同：0
> 
> 时间：2012-07-24T04:57:56.503
> 
> 标签：javascript, html, iphone, xcode4.3

我想在带有 Iphone SDK 的 xcode 4.3 环境中使用 javascript 和 html5。我们如何使用以及我应该使用什么模板？有没有为此目的的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:00:19.310

好吧，它可以立即与 UIWebview 一起使用...所以使用 Javascript 创建一个 HTML5 页面并将其加载到 UIWebview 中。

如果您有一些特定要求，您也可以使用 PhoneGAP、Jquery Mobile、Sanchtouch 等框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:23:52.383

是的，只需创建一个 UIWebView，加载您想要的 HMTL 页面，然后您就可以在其上调用 javascript 方法

> NSString *html = @"<html>这里有一些 HTML</html>";
> 
> [webView loadHTMLString:html baseURL:nil];
> 
> [webView stringByEvaluatingJavaScriptFromString:@"someJSToo();"];

然后，您可以将该 UIWebview（在我的示例中假定预先声明为 webView）添加到您的屏幕中：）

# git - 撤消 git svn rebase

> ID：11624404
> 
> 赞同：5
> 
> 时间：2012-07-24T04:58:07.797
> 
> 标签：git

无论如何要撤消 git svn rebase 吗？

我错误地进行了一些合并，并想回到我尝试从中央存储库重新定位之前的状态。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T05:00:10.013

您可以使用[`git reflog`](http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)在变基之前找到描述树状态的哈希，然后检查它。

# objective-c - UITableViewController 不调用 UISearchBarDelegate 方法

> ID：11624408
> 
> 赞同：0
> 
> 时间：2012-07-24T04:59:08.433
> 
> 标签：objective-c, ios, storyboard, uitableview, uisearchbar

鉴于以下`UITableViewController`情况，为什么我`UISearchBarDelegate`不能调用任何方法？我省略了`UITableViewDelegate`and`UITableViewDataSource`方法。

```
#import <UIKit/UIKit.h>

@interface OpportunitySearchViewController : UITableViewController <UISearchBarDelegate>
@end

#import "OpportunitySearchViewController.h"

@interface OpportunitySearchViewController ()
@end

@implementation OpportunitySearchViewController
- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];

    if (self) {
        NSLog(@"initWithCoder:");
    };

    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    NSLog(@"self=%@ self.view=%@ ", self, [self view]); 
}

- (void)viewDidUnload {
    [super viewDidUnload];

    NSLog(@"viewDidUnload");
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    NSLog(@"shouldAutorotateToInterfaceOrientation:");

    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - UISearchBarDelegate
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
    NSLog(@"searchBar:textDidChange:");
}
@end 
```

我已确认我的 Storyboard 场景已配置为使用`OpportunitySearchViewContoller`该类，并且我已确认`UISearchBar`现场已将 First Responder 设置为它的委托。虽然这可能是错误的，但我在情节提要界面中找不到文件所有者。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:27:13.523

不要将第一响应者作为代表连接到您的班级。从搜索栏拖动到控制器对象本身，并使其连接到`delegate`.

# php - PHP对具有相同键值的二维数组中的值求和

> ID：11624417
> 
> 赞同：2
> 
> 时间：2012-07-24T04:59:52.373
> 
> 标签：php, arrays, multidimensional-array, sum

**问题：**找到每个**“id”的****“小计”**中的值的总和，并将每个 id的相应总和存储在一个数组（或变量）中。

 **我目前草率的解决方案是运行一个包含多个 if 语句的 foreach 来计算出现次数。这对于 5 个 id 之类的东西来说已经足够了，但我必须在 38 个 id 上进行迭代。如果可能的话，我想将结果按顺序存储在一个数组中。

我怎样才能使它更有效率？任何和所有的帮助将不胜感激。（请参阅我在本文末尾草率的解决方案以获得良好的笑声）

**期望的结果：**

*   所有 ID 1 = 10 的总和
*   所有 ID 2 = 18 的总和
*   所有 ID 3 = 14 的总和
*   所有 ID 4 = 4 的总和
*   所有 ID 5 = 3 的总和

**数组操作代码**

```
 $someArray = array(

    array(
        'id'=> 1,
        'subtotal'=> 5),
    array(
        'id'=> 1,
        'subtotal'=> 5),
    array(
         'id'=> 2,
         'subtotal'=> 6), 
    array(
         'id'=> 2,
         'subtotal'=> 6),
    array(
         'id'=> 2,
         'subtotal'=> 6),
    array(
         'id'=> 3,
         'subtotal'=> 7),
    array(
         'id'=> 3,
         'subtotal'=> 7),
    array(
         'id'=> 4,
         'subtotal'=> 2),
    array(
         'id'=> 4, 
         'subtotal'=> 2),
    array(
         'id'=> 5,
         'subtotal'=> 3),
    ); 
```

**邋遢的解决方案**

```
$sum_id_1 = 0;
$sum_id_2 = 0;
$sum_id_3 = 0;
$sum_id_4 = 0;
$sum_id_5 = 0;

foreach ($someArray as $k) {

    if ($k['id'] == 1) {
        $sum_id_1 += $k['subtotal'];
    }

    if ($k['id'] == 2) {
        $sum_id_2 += $k['subtotal'];
    }

    if ($k['id'] == 3) {
        $sum_id_3 += $k['subtotal'];
    }

    if ($k['id'] == 4) {
        $sum_id_4 += $k['subtotal'];
    }

    if ($k['id'] == 5) {
        $sum_id_5 += $k['subtotal'];
    }
} 
```

**邋遢的解决方案输出（回声）**

*   10
*   18
*   14
*   4
*   3

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T05:02:53.547

```
$sum = array_reduce($someArray, function($result, $item) {
    if (!isset($result[$item['id']])) $result[$item['id']] = 0;
    $result[$item['id']] += $item['subtotal'];
    return $result;
}, array());

var_dump($sum); // array(5) { [1]=> int(10) [2]=> int(18) [3]=> int(14) [4]=> int(4) [5]=> int(3) } 
```

对于 PHP <= 5.3 手动执行循环计数：

```
$sum = array();

foreach ($someArray as $item) {
    if (!isset($sum[$item['id']])) $sum[$item['id']] = 0;
    $sum[$item['id']] += $item['subtotal'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T07:56:14.987

```
$arr3 = array (
"0" => array ( "001" => 10 ),
"1" => array ( "005" => 20 ),
"2" => array ( "001" => 30 ),
"3" => array ( "003" => 20 ),
"4" => array ( "005" => 80 ),
"5" => array ( "001" => 90 ),
"6" => array ( "003" => 20 ),
"7" => array ( "006" => 80 ),
"8" => array ( "006" => 90 )
) ;

 array (size=4)
   0 => 
      array (size=1)
        '001' => int 130
   1 => 
      array (size=1)
        '005' => int 100
   2 => 
      array (size=1)
       '003' => int 40
   3 => 
      array (size=1)
       '006' => int 170

$outer_array = array();
$unique_array = array();
$inner_array = array();
  foreach($arr3 as $key => $value)
  {

  $item = key($value);
  if(!in_array(key($value), $unique_array))
  {
     array_push($unique_array, $item);
     $inner_array[key($value)] = $value[$item];
     $outer_array[$item][$item] = $value[$item];

  }else{
    $inner_array[key($value)] = $value[$item] + $inner_array[$item];
    $outer_array[$item][$item] = $inner_array[$item];
  }
}
 var_dump(array_values($outer_array)); 
```

如果你想用相同的键来总结所有的值。也就是说，上面的结果就是你希望的。所以我的答案正在接近……就是这样，希望能帮助遇到同样情况的人！**

# c# - 标签页可以是 MDI 子窗口的父级吗？

> ID：11624423
> 
> 赞同：0
> 
> 时间：2012-07-24T05:00:26.233
> 
> 标签：c#

我正在使用 C# 创建一个具有几个标签页的表单应用程序。我想在其中一个标签页中包含 MDI 子窗口。可能吗？我尝试了类似 childForm.MdiParent = this.tabPage1.Handle 的方法，但由于类型不匹配而出现编译错误。你有一个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:25:11.563

*codeproject*上的这个项目很有用：

*   [使用 C# 浏览多文档界面 (MDI) 选项卡页](http://www.codeproject.com/Articles/12514/Multi-Document-Interface-MDI-tab-page-browsing-wit)

但出于此目的，我建议在*sourceforge上使用*[DockpanelSuite 。](http://sourceforge.net/projects/dockpanelsuite/)

# iphone - locationManager:didEnterRegion：仅在从某些位置移动时才被调用

> ID：11624429
> 
> 赞同：1
> 
> 时间：2012-07-24T05:01:14.327
> 
> 标签：iphone, ios, core-location

我正在使用 CLLocationManager 监控一个区域`startMonitoringForRegion:desiredAccuracy:`。我确信该区域已正确添加到位置管理器的受监控区域中。

当我的模拟器位置远离它（准确地说是 2.3 公里）时，我进行了设置。然后我点击主页按钮，并将模拟器的位置更改为我设置地理围栏的位置。`locationManager:didEnterRegion:`没有被调用。如果我尝试移动到这个位置但从另一个位置移动到 4.3 公里外，结果相同。

似乎有一些我无法接受的阈值，因为 locationManager:didEnterRegion: 在从 7 公里及以上的其他位置移动时被调用。**但是我的 CLRegion 的半径是 100 m。**这里可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:14:14.187

这确实只是一个疯狂的猜测，但我想知道这是否是位置管理器试图通过一个看似跳跃的位置来减轻误报的结果。我想在应用程序退出时更改模拟器中的位置可能会在位置管理器中显示为不符合所需精度的位置更新，因此在考虑您是否实际进入新区域时会忽略它。

您是否尝试过模拟城市自行车骑行或高速公路驾驶，看看是否有所作为？我只想尽快在设备上进行测试。

# javascript - 图像文件因 websocket 文件传输而损坏

> ID：11624431
> 
> 赞同：0
> 
> 时间：2012-07-24T05:01:47.883
> 
> 标签：javascript, html, websocket, blob, html5-filesystem

我正在使用 websockets 进行文件传输，在下载文件时，我正在接收数据，但是当我打开图像文件时，它已损坏。数据文件下载正常，代码如下。

```
try {
    fileEntry = fs.root.getFile(filename, { create : creat_file });
    var byteArray = new Uint8Array(data.data.length);
    for (var i = 0; i < data.data.length; i++) {
        byteArray[i] = data.data.charCodeAt(i) & 0xff;
    }
    BlobBuilderObj = new WebKitBlobBuilder();
    BlobBuilderObj.append(byteArray.buffer);
    if (!writer) {
        writer = fileEntry.createWriter();
        pos = 0;
    }
    //self.postMessage(writer.position);
    writer.seek(pos);
    writer.write(BlobBuilderObj.getBlob());
    pos += 4096;
    }
catch (e) {
    errorHandler(e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:54:03.153

看起来您正在从 WebSocket 作为字符串读取数据，将其转换为 Blob，然后将其写入文件。

如果您可以控制 WebSocket 服务器，那么最好的办法是将数据作为二进制帧而不是 UTF-8 文本数据发送。如果您可以让服务器以二进制帧的形式发送数据，那么您只需告诉 WebSocket 将数据作为 Blob 传递：

```
ws.binaryType = "blob";
ws.onmessage = function (event) {
    if (event.data instanceof Blob) {
        // event.data is a Blob
    } else {
        // event.data is a string
    }
} 
```

如果这不是一个选项并且您只能从服务器发送文本帧，那么您需要在从服务器发送二进制数据之前将其编码为文本，然后在另一端解码文本。如果您尝试通过 WebSockets 直接将二进制数据作为文本帧发送，那么这样做`charCodeAt(x) && 0xff`会导致数据损坏。

例如，您可以在服务器端对数据进行 base64 编码，然后在客户端对数据进行 base64 解码：

```
ws.onmessage = function (event) {
    raw = window.atob(event.data);
} 
```

**更新**：

[websockify](https://github.com/kanaka/websockify)中包含一个性能非常好的纯 Javascript base64 解码/编码。它解码为一个 0-255 的数字数组，但如果这是您需要的，可以很容易地修改为返回一个字符串（免责声明：我制作了 websockify）。

# vb6 - 为什么我会收到运行时错误“无效的属性数组索引”？

> ID：11624432
> 
> 赞同：1
> 
> 时间：2012-07-24T05:01:51.037
> 
> 标签：vb6, listbox

我有 2 个列表框和一个按钮。每当用户选择 lstAvail 中的项目并按下按钮时，所选项目将被添加到 lstSelected。

如果循环以 1 的步长递减，则以下代码可以正常工作。

```
Private Sub Form_Load()
Dim intX As Integer

    For intX = 0 To 5
        lstAvail.AddItem "Item #" & Format$(intX, "000")
    Next

End Sub

Private Sub Command1_Click()
Dim intListX As Integer

    For intListX = lstAvail.ListCount - 1 To 0 Step -1
        If (lstAvail.Selected(intListX)) Then
            lstSelected.AddItem lstAvail.List(intListX)
            lstAvail.RemoveItem intListX
        End If
    Next

End Sub 
```

但是为什么我从0递增到（lstAvail.ListCount -1）时它不起作用，如下所示？该代码引发运行时错误“无效的属性数组索引”。

```
Private Sub Command1_Click()
Dim intListX As Integer
For intListX = 0 To lstAvail.ListCount - 1
        If (lstAvail.Selected(intListX)) Then
            lstSelected.AddItem lstAvail.List(intListX)
            lstAvail.RemoveItem intListX
        End If
Next
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T07:56:55.257

## Forwards Loop

The reason why this doesn't work is because you are removing items from <lstAvail>, but you are still incrementing from 0 as if the list still remains as it was.

Items in lstAvail

*   "Item 000"
*   "Item 001"
*   "Item 002"
*   "Item 003"
*   "Item 004"
*   "Item 005"

Let's say you select the third item in the list (ListIndex = 2), and then click the button, triggering off Command1_Click(). You will be incremented intListX until it equals 5\. The following is a trace through the For loop:

* * *

intListX: 0

lstAvail.Selected(intListX): False

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 002"
*   "Item 003"
*   "Item 004"
*   "Item 005"

* * *

intListX: 1

lstAvail.Selected(intListX): False

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 002"
*   "Item 003"
*   "Item 004"
*   "Item 005"

* * *

intListX: 2

lstAvail.Selected(intListX): True

!! Remove "Item 002" !!

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 003"
*   "Item 004"
*   "Item 005"

* * *

intListX: 3

lstAvail.Selected(intListX): False

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 003"
*   "Item 004"
*   "Item 005"

* * *

intListX: 4

lstAvail.Selected(intListX): False

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 003"
*   "Item 004"
*   "Item 005"

* * *

intListX: 5

lstAvail.Selected(intListX): <!!Error!!>

There is no item here with index 5.

## Reversed Loop

intListX: 5

lstAvail.Selected(intListX): False

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 002"
*   "Item 003"
*   "Item 004"
*   "Item 005"

* * *

intListX: 4

lstAvail.Selected(intListX): False

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 002"
*   "Item 003"
*   "Item 004"
*   "Item 005"

* * *

intListX: 3

lstAvail.Selected(intListX): False

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 002"
*   "Item 003"
*   "Item 004"
*   "Item 005"

* * *

intListX: 2

lstAvail.Selected(intListX): True

!! Remove "Item 002" !!

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 003"
*   "Item 004"
*   "Item 005"

* * *

intListX: 1

lstAvail.Selected(intListX): False

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 003"
*   "Item 004"
*   "Item 005"

* * *

intListX: 0

lstAvail.Selected(intListX): False

lstAvail:

*   "Item 000"
*   "Item 001"
*   "Item 003"
*   "Item 004"
*   "Item 005"

# jquery - Jquery 的 .contents() 不工作

> ID：11624437
> 
> 赞同：1
> 
> 时间：2012-07-24T05:02:18.270
> 
> 标签：jquery

我正在使用 jQuery .contents() 方法来更改 iframe 下的类，但它不是 wokring。当我直接在 iframe 源中提供时，它工作正常，但是当我生成路径时它不工作

```
$('.viewMe').click(function (){
    var url= 'viewpage.html'
    $('#myframe').attr('src',url).animate({height:1000},1000, 
        function (){$('.Close').fadeIn(1500)});
    $('body').height($(window).height()).css('overflow','hidden');

    var $c = $('#myframe').contents();
    $c.find('.inner-wp').css('margin','0')
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T05:09:53.813

`load`您必须像这样在 iframe 事件中调用它：

```
$("#myframe").load(function() {
  var $c = $('#myframe').contents();
  $c.find('.inner-wp').css('margin', '0');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-17T16:06:04.700

来自[https://forum.jquery.com/topic/not-working-content-method-of-iframe](https://forum.jquery.com/topic/not-working-content-method-of-iframe)

“它仅在 iframe 和页面来自同一域时才有效。它仅在 iframe 实际加载后才有效。”

# java - 谁能帮我解释为什么我的 GUI 在循环运行时无法点击？

> ID：11624443
> 
> 赞同：0
> 
> 时间：2012-07-24T05:03:07.977
> 
> 标签：java, swing, awt, freeze, event-dispatch-thread

循环完成后，所有按钮和文本字段都可以使用，但是当循环运行时，什么都不能点击。我尝试了很多不同的东西，查看了很多不同的网站，但没有什么能帮助我。我不知道出了什么问题！

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

 public class J extends JFrame implements ActionListener{    
    JButton start = new JButton("Start (F12)");
    JButton stop = new JButton("Stop");

    int i;
    JLabel delay = new JLabel("Delay: ");
    JTextField delayJTF = new JTextField(4);
    int delayS = 0;
    GridLayout bl = new GridLayout(10, 10);
    public J() 
    {      

    super("Auto Clicker");
    start.addActionListener(this);
    stop.addActionListener(this);
    setSize(300, 300);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(bl);
    add(delay, BorderLayout.NORTH);
    add(delayJTF, BorderLayout.NORTH);
    add(start);
    add(stop);
    setVisible(true);

     }

      boolean run = false;

          public static void main(String[] args) {
         J j = new J();

       }
        public void robott() {
         try {

      Robot robot = new Robot();

       Thread.sleep(delayS);
    robot.mousePress(InputEvent.BUTTON1_MASK);    
     robot.mouseRelease(InputEvent.BUTTON1_MASK);
   // robot.delay(delayS);

   } catch(Exception exc) {
      System.out.println(exc);

  }
      }

    public void actionPerformed(ActionEvent e) {
    String delaySt = delayJTF.getText();
    delayS = Integer.parseInt(delaySt);
    System.out.println(delayS);

    while(i < 100) {
        i++;          
      robott();
      System.out.println(i);
    }

   }

 }

     any suggestions? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T05:07:42.410

您在 Event Dispatch Thread 中循环 - 处理 GUI 绘画和用户输入的线程。所有动作事件都在该线程上处理。如果您需要执行长时间运行的任务（以及 I/O 等其他阻塞操作），您应该考虑将这些任务卸载到工作线程。查看[本教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:18:30.923

我已经修改了你的代码现在它正在工作.....你可以了解更多关于工作线程的信息

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

 public class J extends JFrame implements ActionListener{    
JButton start = new JButton("Start (F12)");
JButton stop = new JButton("Stop");

int i;
JLabel delay = new JLabel("Delay: ");
JTextField delayJTF = new JTextField(4);
int delayS = 0;
GridLayout bl = new GridLayout(10, 10);
public J() 
{      

    super("Auto Clicker");
    start.addActionListener(this);
    stop.addActionListener(this);
    setSize(300, 300);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(bl);
    add(delay, BorderLayout.NORTH);
    add(delayJTF, BorderLayout.NORTH);
    add(start);
    add(stop);
    setVisible(true);

}

boolean run = false;

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            J j=new J();
        }
    });

}
public void robott() {
    try {

        Robot robot = new Robot();
        Thread.sleep(delayS);
        robot.mousePress(InputEvent.BUTTON1_MASK);    
        robot.mouseRelease(InputEvent.BUTTON1_MASK);

    } catch(Exception exc) {
        System.out.println(exc);

    }
}

public void actionPerformed(ActionEvent e) {

             WorkerThread  wt=new WorkerThread();
            wt.execute();

}
class WorkerThread extends SwingWorker<Void , Void>{

    @Override
    protected Void doInBackground() throws Exception {
        String delaySt = delayJTF.getText();
        delayS = Integer.parseInt(delaySt);
        System.out.println(delayS);
        while(i < 100) {

            i++;          
            robott();
            System.out.println(i);
        }
        return null;
    }

} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T05:49:42.313

正如已经指出的，所有长时间运行的任务都必须在与事件调度循环线程不同的线程上执行。另一方面，与 GUI 元素的所有交互都必须发生在事件调度线程上。

在 Dangling Piyush 的示例中，`WorkerThread`调用`robott()`Robot。在这种情况下，机器人调用是“安全的”。

但是，如果要与 Swing GUI 元素进行任何直接交互，则必须将这些交互重新路由回 Event Dispatch Loop 的线程。

方法 A：`SwingWorker`有 `publish`/ `process`。用代码覆盖`process`以更新 GUI。`publish`从您的 实现中调用`doInBackground`，它“计划”`process`从事件调度循环（在它的线程上）调用。这有助于将数据作为参数跨该边界移动。

方法 B：使用您定义的 Runnable 调用`SwingUtilities.invokeLater(Runnable doRun)`以更新 GUI 元素。该可运行对象将在所需线程上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T06:15:13.090

这是因为您运行 GUI 并在一个线程中循环。您可以在方法 actionPerformed() 上设置一个断点。会发现它仍在运行不能接受任何其他事件的while 块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T05:09:28.513

您应该在单独的线程中运行 while 循环。您不能按任何按钮，因为您在 while 循环的同一个 GUI 线程中运行。请记住，swing 组件不是线程安全的，因此稍后在所有组件中使用调用。

# javascript - 使用 javascript 查找 xml 属性值

> ID：11624448
> 
> 赞同：5
> 
> 时间：2012-07-24T05:04:23.833
> 
> 标签：javascript, jquery, xml, xml-parsing

如何使用 Javascript/jQuery 获取 XML 节点的属性值？

我正在尝试获取节点上的持续时间属性的值，然后获取固定值。

```
<loanAmount>
    <interestRates>
        <interestRate allowInterestOnly="true" type="variable" value="5.82"/>
        <interestRate allowFixed="true" allowInterestOnly="true" duration="1" fixedInterestOnlyValue="5.7" fixedValue="5.7" variableInterestOnlyValue="5.82"/>
        <interestRate allowFixed="true" allowInterestOnly="true" duration="3" fixedInterestOnlyValue="5.75" fixedValue="5.75" variableInterestOnlyValue="5.82"/>
        <interestRate allowFixed="true" allowInterestOnly="true" duration="5" fixedInterestOnlyValue="6.64" fixedValue="6.56" variableInterestOnlyValue="5.82"/>
        <interestRate allowFixed="true" allowInterestOnly="true" duration="10" variableInterestOnlyValue="5.82"/>
    </interestRates>
</loanAmount>' 
```

到目前为止，我有：

```
var currentLoanRates = function() {
    var currLoanXml = '<loanAmount><interestRates><interestRate allowInterestOnly="true" type="variable" value="5.82"/><interestRate allowFixed="true" allowInterestOnly="true" duration="1" fixedInterestOnlyValue="5.7" fixedValue="5.7" variableInterestOnlyValue="5.82"/><interestRate allowFixed="true" allowInterestOnly="true" duration="3" fixedInterestOnlyValue="5.75" fixedValue="5.75" variableInterestOnlyValue="5.82"/><interestRate allowFixed="true" allowInterestOnly="true" duration="5" fixedInterestOnlyValue="6.64" fixedValue="6.56" variableInterestOnlyValue="5.82"/><interestRate allowFixed="true" allowInterestOnly="true" duration="10" variableInterestOnlyValue="5.82"/></interestRates></loanAmount>',
    xmlDoc = $.parseXML( currLoanXml ),
    $xml = $( xmlDoc ),
    $intRate = $xml.find("interestRate"),
    $varIntRate = $intRate.attr("fixedValue");

    console.log($intRate);
    console.log($varIntRate);
}; 
```

第二个 console.log 打印*undefined*。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T05:25:00.637

我遇到的第一个问题是 currLoadXml 不是字符串。它需要用单引号括起来。

尝试使用以下方法

```
var currentLoanRates = function() {
    var currLoanXml = '<loanAmount><interestRates><interestRate allowInterestOnly="true" type="variable" value="5.82"/><interestRate allowFixed="true" allowInterestOnly="true" duration="1" fixedInterestOnlyValue="5.7" fixedValue="5.7" variableInterestOnlyValue="5.82"/><interestRate allowFixed="true" allowInterestOnly="true" duration="3" fixedInterestOnlyValue="5.75" fixedValue="5.75" variableInterestOnlyValue="5.82"/><interestRate allowFixed="true" allowInterestOnly="true" duration="5" fixedInterestOnlyValue="6.64" fixedValue="6.56" variableInterestOnlyValue="5.82"/><interestRate allowFixed="true" allowInterestOnly="true" duration="10" variableInterestOnlyValue="5.82"/></interestRates></loanAmount>',
    xmlDoc = $.parseXML( currLoanXml ),
    $xml = $( xmlDoc ),
    $intRate = $xml.find("interestRate");
    $intRate.each(function(index, element) { 
        if(element.attributes["duration"]) {
            console.log("Duration :" + element.attributes["duration"].value);
        }

        if(element.attributes["fixedValue"]) {
            console.log("Fixed value:" + element.attributes["fixedValue"].value);
        }
    });

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-11T09:43:24.017

对于那些希望从外部文件加载 XML 的人来说，这可能会有所帮助：

```
<script>
    $.ajax({
        url: 'sample.xml',
        dataType: 'xml',
        success: function (data) {
            // Extract relevant data from XML
            var xml_node = $('loanAmount', data);
            $parameter = xml_node.find('interestRate');
            $parameter.each(function (index, element) {
                if (element.attributes["allowFixed"]) {
                    console.log("Allow Fixed : " + element.attributes["allowFixed"].value);
                }

                if (element.attributes["duration"]) {
                    console.log("Duration: " + element.attributes["duration"].value);
                }
            });
        },
        error: function (data) {
            console.log('Error loading XML data');
        }
    });
</script> 
```

# iphone - iphone应用程序中的状态栏是强制性的吗

> ID：11624452
> 
> 赞同：1
> 
> 时间：2012-07-24T05:04:54.890
> 
> 标签：iphone, uistatusbar

iPhone App中的状态栏是强制性的吗？

如果我在 iPhone 应用程序的所有屏幕中隐藏状态栏，Apple 会拒绝我的应用程序吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T05:07:07.593

不，状态栏在您的应用中不是强制性的，也不会被拒绝。

有大量应用程序不使用状态栏。此外，还有大量应用程序可以根据需要在整个应用程序中显示和隐藏它。如果您决定不使用它，或者确实使用它，或者有时只在整个应用程序中使用它，那么您是安全的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T05:37:55.817

即使没有必要，但您应该非常明智地显示或隐藏它。

例如。玩游戏时，可以隐藏状态栏，因为用户的全部注意力都在游戏上。就像聊天和类似应用程序这样的普通应用程序，人们想检查时间或他的网络状态查看数据连接是否可用，因此在这种情况下应避免隐藏栏...

记住应用商店中可用的应用数量......你永远不知道什么会让用户感到厌烦......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T05:10:44.053

不，在 Apple 的任何 App 中，状态栏都不是强制性的。苹果不会因为隐藏状态栏而拒绝任何应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-27T07:30:14.197

状态栏不是强制性的，但在某些应用程序（非游戏和非完整图形）中无限期地隐藏它可能会导致应用商店拒绝。

来自[Apple HIG](https://developer.apple.com/ios/human-interface-guidelines/ui-bars/status-bars/)

> 避免永久隐藏状态栏。如果没有状态栏，人们必须离开您的应用才能查看时间或查看他们是否有 Wi-Fi 连接。让人们通过使用简单、可发现的手势重新显示隐藏的状态栏。在“照片”应用中浏览全屏照片时，单击即可再次显示状态栏。

其他现实生活[经历](https://github.com/calimarkus/JDStatusBarNotification/issues/30)

# javascript - 更改 facebook 的边框喜欢图标

> ID：11624456
> 
> 赞同：-1
> 
> 时间：2012-07-24T05:05:35.563
> 
> 标签：javascript, jquery, css, facebook, facebook-like

我一生都无法弄清楚如何仅使用 CSS 来做到这一点，我认为是因为他们的 javascript 会覆盖它，即使我使用 !important 也是如此。因此，我尝试使用 JQuery 的 $.getScript() 函数加载 javascript，但它甚至不起作用。

我希望它只是一个简单的黑色边框。

网址：[http ://www.imvu-e.com/products/sro/](http://www.imvu-e.com/products/sro/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:54:12.307

我没有尝试覆盖 facebook 的 css，而是在按钮周围包裹了一个 div 并在其周围放置了一个边框。这段代码很好地得到了我想要的效果：

```
<div style="border: 1px solid black; background: #ECEEF5 url('http://i.imgur.com/y8DyO.png'); width: 49px; height: 20px; border-radius: 3px;">
     <!--  INSERT FACEBOOK LIKE DIV HERE -->
</div> 
```

注意：`background: #ECEEF5 url('http://i.imgur.com/y8DyO.png');`已添加以便 div 具有与 like 按钮相同的背景，因此在 javascript 运行时的那一瞬间，您不会看到从没有背景到 facebook 的#ECEEF5 的闪烁。

结果：

![黑色边框的 facebook 喜欢](../Images/93edb6122b99e5fb177c1f52d382342b.png)

# r - 将多核与 Snow Cluster 相结合

> ID：11624460
> 
> 赞同：2
> 
> 时间：2012-07-24T05:05:58.747
> 
> 标签：r, parallel-processing, multicore, snow

Parallel R 相当新。快速提问。我有一个计算密集型的算法。幸运的是，它可以很容易地分解成碎片以使用`multicore`or `snow`。我想知道的是在实践`multicore`中与 ? 结合使用是否被认为是好的`snow`？

我想做的是将我的负载拆分为在集群中的多台机器上和每台机器上运行。我想利用机器上的所有内核。对于这种类型的处理，混合雪是否合理`multicore`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:15:25.483

我使用了 lockoff 上面建议的方法，即使用并行包将令人尴尬的并行工作负载分配到具有多个内核的多台机器上。首先，工作负载分布在所有机器上，然后每台机器的工作负载分布在它的所有内核上。这种方法的缺点是机器之间没有负载均衡（至少我不知道怎么做）。

所有加载的 r 代码应该是相同的，并且在所有机器（svn）上的相同位置。因为初始化集群需要相当长的时间，所以可以通过重用创建的集群来改进下面的代码。

```
foo <- function(workload, otherArgumentsForFoo) {
    source("/home/user/workspace/mycode.R")
    ...
}

distributedFooOnCores <- function(workload) {
    # Somehow assign a batch number to every record
    workload$ParBatchNumber = NA
    # Split the assigned workload into batches according to DistrParNumber
    batches = by(workload, workload$ParBatchNumber, function(x) x)

    # Create a cluster with workers on all machines 
    library("parallel")
    cluster = makeCluster(detectCores(), outfile="distributedFooOnCores.log")
    batches = parLapply(cluster, batches, foo, otherArgumentsForFoo)
    stopCluster(cluster)

    # Merge the resulting batches
    results = someEmptyDataframe
    p = 1;
    for(i in 1:length(batches)){
        results[p:(p + nrow(batches[[i]]) - 1), ] = batches[[i]]
        p = p + nrow(batches[[i]])      
    }

    # Clean up
    workload$ParBatchNumber = NULL
    return(invisible(results))
}

distributedFooOnMachines <- function(workload) {
    # Somehow assign a batch number to every record
    workload$DistrBatchNumber = NA
    # Split the assigned activity into batches according to DistrBatchNumber
    batches = by(workload, workload$DistrBatchNumber, function(x) x)

    # Create a cluster with workers on all machines 
    library("parallel")
    # If makeCluster hangs, please make sure passwordless ssh is configured on all machines
    cluster = makeCluster(c("machine1", "etc"), master="ub2", user="", outfile="distributedFooOnMachines.log")
    batches = parLapply(cluster, batches, foo, otherArgumentsForFoo)
    stopCluster(cluster)

    # Merge the resulting batches
    results = someEmptyDataframe
    p = 1;
    for(i in 1:length(batches)){
        results[p:(p + nrow(batches[[i]]) - 1), ] = batches[[i]]
        p = p + nrow(batches[[i]])      
    }

    # Clean up
    workload$DistrBatchNumber = NULL
    return(invisible(results))
} 
```

我很感兴趣如何改进上述方法。

# jvm - 构建 OpenJDK 的说明

> ID：11624462
> 
> 赞同：0
> 
> 时间：2012-07-24T05:06:38.630
> 
> 标签：jvm, java

我想构建自己的 JVM，但在仍然受支持的操作系统上找不到任何说明......就像仍然接收安全更新的操作系统一样。我发现 [1] 非常有用，但它建议在 Fedora 11 或 2009 年的其他操作系统上构建。今天其他 JVM 黑客正在使用哪些平台，是否有任何指令/博客/最佳实践可用于在较新的操作系统上构建？

[1] - [http://hg.openjdk.java.net/jdk7u/jdk7u4/raw-file/tip/README-builds.html](http://hg.openjdk.java.net/jdk7u/jdk7u4/raw-file/tip/README-builds.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:46:07.280

您可以查看任何发行版中 OpenJDK 包的包定义，它们都包含编译它的必要步骤。

例如，要查看 Ubuntu 包，请转到[源包的站点](http://packages.ubuntu.com/source/precise/openjdk-7)，下载底部的文件，解压缩，应用补丁并查看`debian`子目录中的文件（尤其是 中的文件`debian/rules`）。

对于 Gentoo 包，我想相关的 ebuild 就是[这个](https://overlays.gentoo.org/proj/java/browser/java-overlay/dev-java/icedtea/icedtea-7.2.2.1.ebuild)。

# internet-explorer - 从一页导航到另一页时显示 GIF 图像时的 IE 问题

> ID：11624463
> 
> 赞同：1
> 
> 时间：2012-07-24T05:06:44.840
> 
> 标签：internet-explorer, settimeout, gif

我有一个母版页，其中包含一个`div`包含图像标签的代码，并且应该显示一些文本。我的项目中有六页。当我按下导航到其他页面的按钮`Save`时，在每个页面下。`continue`

它进行了大量处理，因此对于延迟，GIF 图像显示处理过程中带有一些动画。

**当用户单击`save`and`continue`按钮时动画正常工作，但在当前页面中完成处理并开始加载新页面时它会停止。**

我通过使用方法尝试了很多`SetTimeout`方法。但不能解决这个问题。你能帮我解决这个问题吗？

# iphone - textView resignFirstResponder 不工作

> ID：11624464
> 
> 赞同：1
> 
> 时间：2012-07-24T05:06:52.493
> 
> 标签：iphone

对于 iphone 应用程序进行长文本输入，我们使用 UITextView。但键盘如何返回。[textView resignFirstResponder] 不适用于 UITextView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:16:33.800

在你的界面中声明 UITextViewDelegate 协议。然后实现委托方法

```
 - (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

if([text isEqualToString:@"\n"]) {
    [textView resignFirstResponder];
    return NO;
}

return YES;
} 
```

# android - 使用 MediaPlayer 加载远程视频

> ID：11624467
> 
> 赞同：0
> 
> 时间：2012-07-24T05:07:07.420
> 
> 标签：android

我使用以下代码从 mjpg-streamer 加载视频：

```
 Uri uri = Uri.parse("my server url");
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
    startActivity(intent); 
```

这仅在我使用 Opera 浏览器打开远程 url 时才有效。现在我想在手机上播放相同的视频：

```
Uri uri = Uri.parse("url");
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse("http://url/?action=stream"), "multipart/x-   mixed-replace;boundary=boundarydonotcross"); 
startActivity(intent); 
```

我面临以下问题：

```
07-24 10:34:13.750: E/AndroidRuntime(27778): FATAL EXCEPTION: main
07-24 10:34:13.750: E/AndroidRuntime(27778): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.media/com.example.media.MainActivity}: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=http://xxxxxxx.xxx/ typ=multipart/x-mixed-replace;boundary=boundarydonotcross }
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.os.Looper.loop(Looper.java:130)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.ActivityThread.main(ActivityThread.java:3687)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at java.lang.reflect.Method.invokeNative(Native Method)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at java.lang.reflect.Method.invoke(Method.java:507)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at dalvik.system.NativeStart.main(Native Method)
07-24 10:34:13.750: E/AndroidRuntime(27778): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=http://xxxxxxx.xxx/ typ=multipart/x-mixed-replace;boundary=boundarydonotcross }
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.Activity.startActivityForResult(Activity.java:2827)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.Activity.startActivity(Activity.java:2933)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at com.example.media.MainActivity.onCreate(MainActivity.java:26)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-24 10:34:13.750: E/AndroidRuntime(27778):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
07-24 10:34:13.750: E/AndroidRuntime(27778):    ... 11 more 
```

我也尝试过使用`MediaPLayer.create(this,myuri)`，但它一直告诉我无法在客户端打开文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:19:44.660

您可以使用 VideoView 播放视频

```
VideoView video=(VideoView) findViewById(R.id.videoview);
MediaController mediaController = new MediaController(this);
mediaController.setAnchorView(video);
video.setMediaController(mediaController);

video.setVideoURI(Uri.parse(path));
video.start();
video.requestFocus(); 
```

# php - 文件夹中的php图像URL

> ID：11624470
> 
> 赞同：0
> 
> 时间：2012-07-24T05:07:43.220
> 
> 标签：php, wordpress

我希望 some_folder 中的所有图像都显示为幻灯片。

但我不知道该怎么做...

我发现了一个同样的问题[这个](https://stackoverflow.com/questions/8414746/get-filenames-of-images-in-a-directory)但是..因为我对 php 不太熟悉，发现它很困难..

是否有用于图像幻灯片放映的插件..？

我用谷歌搜索并找到了 Nextgen 和 wp-cycle ......但是插件有一些问题，或者不知道在 Nextgen 的情况下没有加载图像，并且在 wp-cycle 的情况下只加载了第一个图像。

任何人都可以帮助我吗？

**编辑1**

当我尝试安装 Nivo 时，我收到以下消息：

![在此处输入图像描述](../Images/58938b3c38eea6d50b91853ef00b5ee3.png)

还有一个大问题是..在wordpress页面和帖子中我看不到Visual标签..

我不知道突然视觉标签没有打开..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:18:52.153

您可以使用 jquery 插件，例如[Nivo](http://nivo.dev7studios.com/)。或者您可以点击此[链接](http://speckyboy.com/2009/12/03/20-professional-jquery-image-gallery-plugins/)。

# c# - 一个按钮，它将给我一个输入文件

> ID：11624471
> 
> 赞同：0
> 
> 时间：2012-07-24T05:07:46.283
> 
> 标签：c#, visual-studio, user-interface

我有一个 10 行 4 列的 GUI。它的目的是让我在每个框中输入输入，然后在底部单击提交按钮，它会给我一个包含所有输入的文件。我遇到的问题是如何编码我的“按钮”来做到这一点？帮助？

我的菜单条也有问题。似乎一切都是正确的，但我的视觉不会接受。我的代码有问题吗？

-- 这是我第一次使用 C# 和视觉，所以任何帮助将不胜感激！

```
Public partial class Form 1 : Form
{

int count;
    Form mdiChild;
    TextBox editTextBox;

    public Form1()
    {
        InitializeComponent();
        count = 1;
    }

    private void newToolStripMenuItem_Click(object sender, EventArgs e)
    {
        mdiChild = new Form();
        mdiChild.Text = “Document” + count.ToString();
        mdiChild.MdiParent = this;
        editTextBox = new TextBox();
        editTextBox.Multiline = true;
        editTextBox.Dock = Dockstyle.Fill;
        mdiChild.Controls.Add(editTextBox);
        mdiChild.Show();
        count++;
    }

    private void openToolStripMenuItem_Click(object sender, EventArgs e)
    {
        OpenFileDialog ofd = new OpenFileDialog();

        ofd.Title = “Open a Text File”;
        ofd.Filter = “Text File (*.txt)|*.txt|All Files (*.*)|*.*”;

        DialogResult dr = ofd.ShowDialog();
        If (dr == DialogResult.OK)
        {
            System.IO.StreamReader sr = new System.IO.StreamREader(ofd.FileName);

            Form activeChildForm = this.ActiveMdiChild;

            If (activeChildForm != null)
                 activeTextBox.Text = sr.ReadToEnd();

        {
            System.IO.StreamReader sr = new System.IO.StreamREader(ofd.FileName);

            Form activeChildForm = this.ActiveMdiChild;

            If (activeChildForm != null)
                 activeTextBox.Text = sr.ReadToEnd();

            sr.Close();
        }
    }
}

    private void saveToolStripMenuItem_Click(object sender, EventArgs e)
    {
        SaveFileDialog sfd = new SaveFileDialog();

        sfd.Title = “Save a Text File”;
        sfd.Filter = “Text File (*.txt)|*.txt|All Files (*.*)|*.*”;

        DialogResult dr = sfd.ShowDialog();
        If (dr == DialogResult.OK)
        {
            System.IO.StreamWriter sw = new System.IO.StreamWriter(sfd.FileName);

            Form activeChildForm = this.ActiveMdiChild;

            If (activeChildForm != null)
            {
                TextBox activeTextBox = (TextBox)activeChildForm.ActiveControl;

                If (activeTextBox != null)
                     sw.Write(activeTextBox.Text);

                sw.Close();
        }
    }
}

    private void cutToolStripMenuItem_Click(object sender, EventArgs e)
    {
        Form activeChildForm = this.ActiveMdiChild;

        if (activeChildForm != null)
        {
            TextBox activeTextBox = (TextBox)activeChildForm.ActiveControl;
            if (activeTextBox != null)
                 activeTextBox.Cut();
        }
    }

private void copyToolStripMenuItem_Click(object sender, EventArgs e)
    {
        Form activeChildForm = this.ActiveMdiChild;

        if (activeChildForm != null)
        {
            TextBox activeTextBox = (TextBox)activeChildForm.ActiveControl;
            if (activeTextBox != null)
                 activeTextBox.Copy();
        }
    }

private void pasteToolStripMenuItem_Click(object sender, EventArgs e)
    {
        Form activeChildForm = this.ActiveMdiChild;

        if (activeChildForm != null)
        {
            TextBox activeTextBox = (TextBox)activeChildForm.ActiveControl;
            if (activeTextBox != null)
                 activeTextBox.Paste();
        }
    }

private void exitToolStripMenuItem_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        String file_name = “C:\\test1.txt”;

        System.IO.StreamReader objReader;
        objReader = new System.IO.StreamReader(file_name)l

        textBox1.Text = objReader.ReadToEnd();

        objReader.Close();
    }

    Private void helpToolStripMenuItem_Click(object sender, EventArgs e)
    {
        System.Diagnostics.Process.Start (“    “); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:17:34.413

可以说，如果您在网格中显示它并且使用 Winform Grid.And 您以某种方式在您的单击事件后面的 GUI 中输入信息，即按钮单击事件添加此代码

```
System.Data.DataTable GridToDT = new System.Data.DataTable();

                GridToDT = (System.Data.DataTable)GridMain.DataSource; 
```

此代码为您提供了一个数据表，其中显示了所有信息现在使用此表您可以做任何您想做的事情..将其保存在数据库中或将其写入 Excel 任何内容...希望这有助于标记为答案，如果您感觉如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:28:18.850

你应该把代码放在你的按钮点击中。您可能必须修改代码，因为您的问题有点令人困惑。我不确定您是否想要来自控件或 gridview 的输入，所以我为 gridview 编写了代码

```
 namespace Test
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        const string path = @"C:\Kelimeler\Test.txt";
        private void Form1_Load(object sender, EventArgs e)
        {
            SqlConnection conn = new SqlConnection("Server=.;Database=Northwind; UID=sa;PWD=1234");
            SqlCommand cmd = new SqlCommand("Select ShipperID, CompanyName,Phone FROM Shippers", conn);

            SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataTable dtSource = new DataTable();
            da.Fill(dtSource);

            dt.DataSource = dtSource;

            if (dt != null)
            {
                if (!File.Exists(path))
                {
                    File.Create(path);
                }

                foreach (DataGridViewRow row in dt.Rows)
                {
                    for (int i = 0; i < dt.ColumnCount; i++)
                    {
                        File.AppendAllText(path, row.Cells[i].Value.ToString());
                        File.AppendAllText(path, ", ");
                    }
                }
            }
        }
    }
} 
```

# java - 如何使用 java 在 postgreSQL 中存储 doc、jpeg、pdf 文件

> ID：11624473
> 
> 赞同：5
> 
> 时间：2012-07-24T05:08:02.490
> 
> 标签：java, hibernate, postgresql, save, blob

**在 Web 应用程序中，我想将所有 doc、jpeg、pdf 文件存储在 postgreSQL 数据库中。** 我知道也可以通过将其存储在文件系统中并将其路径存储在数据库中来完成，但我不是在寻找那个解决方案。我想知道以下事情：

1.  表的数据类型应该是什么。
2.  它是否保持 doc 的格式？
3.  以及如何使用 java、hibernate 技术将其存储在 postgreSQL 中。是否需要创建 nativeSQL 查询？

对此问题的任何指示都会有所帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T05:11:26.100

您需要将二进制数据存储为`bytea`类型。这是一个使用 JDBC 和 Postgres 的示例`bytea`：

[http://jdbc.postgresql.org/documentation/80/binary-data.html](http://jdbc.postgresql.org/documentation/80/binary-data.html)

这篇关于 using`bytea`和 Hibernate 的帖子可能会有一些用处：[proper hibernate annotation for byte[]](https://stackoverflow.com/questions/3677380/proper-hibernate-annotation-for-byte)

# haskell - Haskell cabal 反应包错误

> ID：11624475
> 
> 赞同：1
> 
> 时间：2012-07-24T05:08:16.000
> 
> 标签：haskell, cabal, comonad

在尝试使用 cabal 安装 Reactive 时，我得到了这个：

```
src/FRP/Reactive/PrimReactive.hs:79:8:
    Could not find module `Control.Comonad'
    It is a member of the hidden package `comonad-1.1.1.6'.
    Perhaps you need to add `comonad' to the build-depends in your .cabal file.
    It is a member of the hidden package `comonad-3.0.0.1'.
    Perhaps you need to add `comonad' to the build-depends in your .cabal file. 
```

据此，[它](http://hackage.haskell.org/package/reactive/)确实没有comonad依赖。但是，它在[PrimReactive.hs](http://hackage.haskell.org/packages/archive/reactive/0.11.5/doc/html/src/FRP-Reactive-PrimReactive.html)中使用 Control.Comonad 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:21:40.990

问题是它依赖于 category-extras >=0.53.5，但没有上限。category-extras 包最近被弃用（有利于不那么单一的包集合），并且一个包含模块和功能最终位置信息的元包被上传到它的位置。

要么给出这样的上限：

```
cabal install reactive --constraint "category-extras < 0.54" 
```

或将 cabal 文件更改为依赖于适当的拆分包。后者可能需要做更多的工作（特别是因为拆分中许多接口发生了显着变化）。

# backbone.js - 谁应该在主干应用程序中获取模型？

> ID：11624480
> 
> 赞同：1
> 
> 时间：2012-07-24T05:08:43.943
> 
> 标签：backbone.js, backbone-views

在主干应用程序中，关于何时获取模型的最佳实践是什么？我可以看到以下可能性。

*   View 调用模型 fetch 方法
*   其他一些 JavaScript 代码调用 fetch 模型？如果是这样，该代码将在何时以及采用何种结构？这是 Backbone 中缺少的控制器概念吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:33:44.317

一些最佳实践：

### 1 从应用程序生命的最初几毫秒开始所必需的集合和模型应该被“引导”到位（因此不需要获取它们来访问重要数据）

因此，当从服务器为用户提供正确的页面时，模型和集合应该已经到位（[来自主干.js 文档的好例子](http://backbonejs.org/#FAQ-bootstrap)）

```
 var ExampleCollection = new Backbone.Collection();
 ExampleCollection.reset(<%= @your_collection_data.to_json() %>); // Or whatever your server-side language requires you to do, this is a ruby example 
```

### 2 剩下的可以及时取到

在您的应用程序初始化时不需要的模型和集合可以随时获取，但我认为这样做的合乎逻辑的时间是用户表达使用这些模型的意图时。例如，用户按下按钮打开需要一些模型/集合的视图 -> 获取该集合，用户想要清除模型中未保存的更改 -> 从服务器获取该模型以获取模型的最后保存状态，等等向前。通常，获取必然发生的地方是“拥有”模型/集合的视图，因为它将用户的操作传递给模型并将模型的状态显示给用户。

但正如人们所说，Backbone.js 对何时获取模型或集合并不严格。它可以在应用程序的任何地方完成，只需确保仅在必要时执行。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:28:58.450

如果您想成为标准，您的视图必须在初始化时渲染一次并监听模型的更改事件，并在每次模型更改时重新渲染视图，仅此而已。（关于 fetch 完成后 View 需要做什么）

如果您遵循我所说的标准，则调用 model.fetch() 时，无论在哪里调用 fetch，您的视图都会被更新。

有些人可能在视图中有一个名为 load 的模块，其中执行如下操作：

```
load : function(){
  this.model.fetch();
} 
```

其他人可以进行外部 fetch 调用，如下所示：

```
var myModel = new YourModel();
var myView = new SomeView( {model : model} );
//Probably you could render with the default data in the while model is fetched
myView.render();
model.fetch(); 
```

# iphone - iPhone - 我如何获得基于学位的位置的方向

> ID：11624481
> 
> 赞同：0
> 
> 时间：2012-07-24T05:08:48.293
> 
> 标签：iphone, ios, cllocationmanager

首先，我在课堂上实现了位置管理器功能，并且工作正常，并为我提供了当前位置。从那个位置我得到了如何从[这里](http://www.switchonthecode.com/tutorials/getting-your-location-in-an-iphone-application)获得位置度数。但我无法确定我也提到过的方向（即北、南、东、西[）](http://www.iphonedevsdk.com/forum/iphone-sdk-development/42992-how-do-i-make-compass.html)。我希望我要以度数显示的位置，方向格式[如下](http://www.movable-type.co.uk/scripts/latlong.html)。即位置经理给我 +37.33019332,-122.02298792 我想要 37° 19' 49" **N** , -122° 1' 23" **E**之类的东西。我得到了所有的东西，只是不知道如何得到最后的“N”和“E”。如果我用`CLLocation.course`这个我得到我的方向课程。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T05:34:01.257

这实际上非常简单。纬度从赤道的 0° 开始，北极为 90.0，南极为 -90.0。基本上，如果纬度在 0 到 90 之间，那么您在北半球和南半球，纬度在 0 到 -90 之间。

经度基本上以相同的方式工作。0° 是指本初子午线，它是假想的贯穿英国格林威治和非洲部分地区的线。高达 180° 的正经度是指本初子午线以东的位置，而负经度是指本初子午线以西高达 180° 的区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T05:49:31.693

使用此代码并将 CLLocationManagerDelegate 放在 .h 文件中

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading
{             
    updatedHeading = newHeading.magneticHeading;
    float headingFloat = 0 - newHeading.magneticHeading;

    rotateImg.transform = CGAffineTransformMakeRotation(headingFloat*radianConst);    
    float value = updatedHeading;
    if(value >= 0 && value < 23)
    {
        compassFault.text = [NSString stringWithFormat:@"%f° N",value];
    }
    else if(value >=23 && value < 68)
    {
        compassFault.text = [NSString stringWithFormat:@"%f° NE",value];
    }
    else if(value >=68 && value < 113)
    {
        compassFault.text = [NSString stringWithFormat:@"%f° E",value];
    }
    else if(value >=113 && value < 185)
    {
        compassFault.text = [NSString stringWithFormat:@"%f° SE",value];
    }
    else if(value >=185 && value < 203)
    {
        compassFault.text = [NSString stringWithFormat:@"%f° S",value];
    }
    else if(value >=203 && value < 249)
    {
        compassFault.text = [NSString stringWithFormat:@"%f° SE",value];
    }
    else if(value >=249 && value < 293)
    {
        compassFault.text = [NSString stringWithFormat:@"%f° W",value];
    }
    else if(value >=293 && value < 350)
    {
        compassFault.text = [NSString stringWithFormat:@"%f° NW",value];
    }
  } 
```

# ruby-on-rails - 下拉列表日期/周

> ID：11624483
> 
> 赞同：0
> 
> 时间：2012-07-24T05:08:53.650
> 
> 标签：ruby-on-rails, ruby

嗨，我是 ruby​​ on rails 的新手...我的下拉列表中有问题.. 必须显示比当前周提前 3 周.. 例如第 39 周.. 它应该是 wekk。42 但应自动选择当前周... 第 39 周 .. 这是我的代码..

```
<%= select_tag("stock_movement", options_for_select(StockMovement.order("year DESC, week DESC").limit(20).map { | val | [ "#{ val.year }/#{ val.week }", val.id] }, :selected => @stock_movement)) %> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:50:58.943

我用 JQuery 解决了这样的问题。Datepicker 插件可以满足您的所有需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:38:02.103

尝试这样的事情：

```
<% cweek = Date.today.cweek 
   sms =StockMovement.where(week: (cweek..cweek+3)).order("year DESC, week DESC")
   sms_now = sms.last.id
%>
<%= select_tag("stock_movement", options_for_select(sms.map { | val | [ "#{ val.year }/#{ val.week }", val.id] }, :selected => sms_now)) %> 
```

*   然后考虑将选项初始化移动到控制器。

如果再摆弄一下，这是另一个解决方案，它使用 form.select 帮助器并在模型中预选包含参考的值（在我的情况下为研讨会）（如果存在），否则为当前周。

```
<% cweek = Date.today.cweek 
   sms =StockMovement.where(week: (cweek..cweek+3)).order("year DESC, week DESC") 
   sms_selected = @seminar.stock_movement ?   @seminar.stock_movement.id : StockMovement.where(week: cweek).first.id

%>
<%= f.select("stock_movement_id", sms.map { | val | [ "#{ val.year }/#{ val.week }", val.id] },{:selected => sms_selected}) %> 
```

# html5-canvas - HTML5 Canvas toDataURL 8 位？

> ID：11624484
> 
> 赞同：2
> 
> 时间：2012-07-24T05:08:54.253
> 
> 标签：html5-canvas

在我目前正在创建的 webappp 中，用户必须提供将服务器端存储在数据库中的图像。为了最小化服务器负载，我正在处理由 HTML5 Canvas 提供的图像大小调整客户端，并让用户预先批准调整大小图像的质量。

我遇到的问题是 - 调整大小的图像的文件大小很大。如果我使用 Paint.NET 调整相同图像的大小，我可以获得一个非常不错的轻量级 8 位 PNG 图像。即使是 32 位 Paint.NET 图像也比通过 toDataURL 在服务器上出现的图像要小。我尝试使用 toDataURL 质量参数，但更改它没有任何效果 - 完全相同的数据大小。

我应该提到我正在使用 Chrome 20.0.1132.57 m 进行测试，并且与该应用程序相关的唯一浏览器是 Chrome 和 Safari 的桌面版本。

我知道我可以做一些服务器端图像处理，但如果可能的话我想避免这种情况。问题 - 我可以做些什么来减少从浏览器发送的图像文件大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:33:03.957

浏览器可能会愉快地忽略为 toDataUrl 等提供的任何质量参数。我不认为遵守规范是强制性的。

准确控制质量的唯一方法是

*   用 JS 编写自己的 PNG 压缩器或使用可以从互联网上窃取的东西[https://github.com/imaya/CanvasTool.PngEncoder](https://github.com/imaya/CanvasTool.PngEncoder)

*   将数据转储`<canvas>`到 ArrayBuffer

*   将此传递给 WebWorker

*   让 WebWorker 使用您的 PNG 压缩器库对其进行压缩

我相信已经存在 JPEG/PNG 编码和解码解决方案。

或者，您可以尝试 canvas.mozGetAsFile() / canvas.toBlob()，但我相信浏览器仍然不会尊重质量参数。

[https://developer.mozilla.org/en/DOM/HTMLCanvasElement/](https://developer.mozilla.org/en/DOM/HTMLCanvasElement/)

# url - 有人可以告诉我如何为带有参数的网址创建二维码

> ID：11624485
> 
> 赞同：2
> 
> 时间：2012-07-24T05:08:57.813
> 
> 标签：url, qr-code, encode, params

我尝试使用一些网页来创建 QR 码来为常规 url 创建 QR，它们很好。

但是，如果我有 url 的参数，则生成的 url 无法正确解码。

如果你试试这个

```
http://chart.apis.google.com/chart?cht=qr&chs=500x500&choe=UTF-8&chld=H&chl=http://localhost?someparam=1&someotherparam=2 
```

而不是二维码指向 `http://localhost?someparam=1&someotherparam=2`

Android 和 iPhone 上的 Barcodescanner 解码器应用程序指向

```
http://localhost/?someparam=1&someotherparam=2 
```

服务器名称（域名）和参数字符串的开头之间的正斜杠 / 显然是不正确的。

我假设这与 url 编码有关，我只是在寻找一个可能已经破解这个坚果的人指向正确方向的指针。

Zxing的二维码生成器也有同样的效果。但它似乎也依赖谷歌。

[http://zxing.appspot.com/generator/](http://zxing.appspot.com/generator/)

还

[http://d-project.googlecode.com/svn/trunk/misc/qrcode/js/sample.html](http://d-project.googlecode.com/svn/trunk/misc/qrcode/js/sample.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T05:50:28.250

您需要对每个参数值进行[URL 编码](http://en.wikipedia.org/wiki/Percent-encoding)`chl`，在您的示例中，尤其是参数。如今，大多数语言都有这个库，或者在网络上搜索“url 编码器”会给你一个表格。

的 url 编码`http://localhost?someparam=1&someotherparam=2`是`http%3A%2F%2Flocalhost%3Fsomeparam%3D1%26someotherparam%3D2`.

此外，本身就是参数值的 URL 的任何参数值也必须进行独立的 URL 编码。

正如肖恩在下面提到的，如果您在 apppot 页面上的表单中输入您的 URL，它会正确地对图表 url 进行 URL 编码：

```
http://chart.apis.google.com/chart?cht=qr&chs=350x350&chld=L&choe=UTF-8&chl=http%3A%2F%2Flocalhost%3Fsomeparam%3D1%26someotherparam%3D 
```

我不确定你的额外`/`评论。如果你去你给的网址，代码值为

```
http://localhost?someparam=1 
```

这是预期的，因为`chl`参数值没有被转义，因此在 first 结束`&`。

# groovy - 在groovy中的特定文本文件行开始循环

> ID：11624487
> 
> 赞同：1
> 
> 时间：2012-07-24T05:09:08.637
> 
> 标签：groovy, io

我正在使用 groovy，我试图在特定行更改文本文件，而不循环遍历所有前面的行。有没有办法说明您想要更改的文本文件的行？

例如

文本文件是：

```
1
2
3
4
5
6 
```

我想说

```
Line(3) = p 
```

并让它将文本文件更改为：

```
1
2
p
4
5
6 
```

我不想做一个循环来遍历行来更改值，也就是我不想使用 .eachline {line ->...} 方法。

提前谢谢你，我真的很感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:50:01.427

我认为您不能像这样跳过行和遍历。您可以通过使用 java 中的[随机访问文件](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)来跳过，但您应该指定字节数而不是行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:03:51.567

尝试`readLines()`在文件文本上使用。它将所有行存储在一个列表中。要更改第 n 行的内容，请更改列表中 n-1 索引处的内容，然后加入列表项。这样的事情会做

```
//We can call this the DefaultFileHandler

lineNumberToModify = 3
textToInsert = "p"

line( lineNumberToModify, textToInsert )

def line(num , text){
    list = file.readLines()
    list[num - 1]  = text        
    file.setText(list.join("\n"))
} 
```

**编辑：**对于非常大的文件，最好有一个自定义实现。可能与蒂姆耶茨在对您的问题的评论中所建议的内容相符。上面的 readLines() 可以在不到一秒的时间内轻松处理多达 100000 行文本。所以你可以做这样的事情：

```
if(file size < 10 MB)
   use DefaultFileHandler()
else
   use CustomFileHandler()

//CustomFileHandler

 - Split the large file into buckets of acceptable size.
 - Ex: Bucket 1(1-100000 lines), Bucket 2(100000-200000 lines), etc.
 - if (lineNumberToModify falls in bucket range)
      insert into line in the bucket 
```

没有硬性规则来定义如何实现 CustomFileHandler，因为它完全取决于用例场景。如果需要对同一个文件多次进行上述操作，可以选择先进行完整的bucket拆分，存储在内存中，然后使用bucket进行后续操作。或者，如果它是一次性操作，您可以避免先操作所有存储桶，而只处理您需要的内容，稍后按需处理其他存储桶。

即使在桶中，您也可以定义自己的智能来加快您的工作。假设你想插入一个有 1-100000 行的桶的 99999 行，你可以充分利用 groovy 的方法和闭包，

```
file.readLines().reverse()[1] = "some text" 
```

# jquery - 使用 Hover 突出显示 Html 表

> ID：11624489
> 
> 赞同：1
> 
> 时间：2012-07-24T05:09:16.483
> 
> 标签：jquery, html, css, jquery-hover

我使用以下代码创建具有三行的表。第一行和第三行包含数据。但第二行不能拥有数据本身。我使用悬停方法可以正确选择行。但我不需要选择空行。这意味着如果我**将鼠标悬停在空行上，它也会被选中。如何防止突出显示空行**？

表创建：

```
 <table id="asdf">
     <tbody>
      <tr>
        <td>Lorem</td> <td>Ipsum</td> <td>Fierent</td>
      </tr>
      <tr>
          <td style="height:10px" colspan=3></td>
      </tr>
      <tr>
        <td >mnesarchum ne </td> <td >sapientem</td> <td >fierent mnesarchum </td>
      </tr>
     </tbody>
    </table> 
```

Jquery 对于呼叫悬停：

```
 $('#asdf tr').mouseover(function() {
        $(this).addClass('hovered');
    }).mouseout(function() {
        $(this).removeClass('hovered');
    }); 
```

鼠标悬停方法：

```
 .hovered td {
        background: #ddd;
    } 
```

[点击这里进行现场演示](http://jsfiddle.net/c9h5w/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:18:52.790

使用 .text() 检查您的“空”行

```
$('#asdf tr').mouseover(function() {
    if($.trim($(this).text()) != '')
       $(this).addClass('hovered');
}).mouseout(function() {
    $(this).removeClass('hovered');
});​ 
```

[http://jsfiddle.net/hy93J/](http://jsfiddle.net/hy93J/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:14:01.880

```
$('#asdf tr:not(:empty)').mouseover(function() {
    $(this).addClass('hovered');
}).mouseout(function() {
    $(this).removeClass('hovered');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T05:15:22.757

一种简单的方法是将类添加到具有数据的行上并执行以下操作：

```
$('#asdf tr.has-data').mouseover(function() {
    $(this).addClass('hovered');
}).mouseout(function() {
    $(this).removeClass('hovered');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T05:23:40.920

您可以使用 CSS 方法（没有 jQuery 事件绑定）

```
$('#asdf tr').each(function(){
 if($.trim($(this).text()) == ''){
   $(this).addClass('hover-disabled');
 }
});

tr{ background-color: #FFF;}
tr:hover{ background-color: #AAA;}

tr.hover-disabled:hover{background-color: #FFF;}
//Must be defined in that order 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T05:25:17.353

试试这个

```
$('#asdf tr:first,#asdf tr:last').mouseover(function() {
    $(this).addClass('hovered');
}).mouseout(function() {
    $(this).removeClass('hovered');
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T05:30:48.210

试试这个：

```
$('#asdf tr:has(td:not(:empty))').mouseover(function() {
    $(this).addClass('hovered');
}).mouseout(function() {
    $(this).removeClass('hovered');
}); 
```

[演示](http://jsfiddle.net/c9h5w/15/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-24T05:36:59.723

使用此代码，您可以防止突出显示空行

```
$('#asdf tr').mouseover(function() {
        if (!$.trim($(this).text()))$(this).removeClass('hovered')
        else $(this).addClass('hovered');   
    }).mouseout(function() {
        $(this).removeClass('hovered');
    }); 
```

# android - 是否可以为安卓手机开发和运行设备驱动程序？

> ID：11624491
> 
> 赞同：3
> 
> 时间：2012-07-24T05:09:27.437
> 
> 标签：android, c, linux-device-driver, galaxy

我有一部 Android 手机 Galaxy S3。我想为它开发一个 USB 设备驱动程序。所以我做了一个简单的驱动程序，用 Galaxy S3 Linux Kernel 编译。但是没有root权限我不能执行'insmod'命令。

是否可以为安卓手机开发设备驱动程序？

此外，驱动程序源代码是典型的字符设备驱动程序示例，具有 open()、close()、read()、write() 函数。

错误消息是：

1.  insmod：权限被拒绝
    （没有root权限）

2.  insmod：无效的模块格式
    （通过'rooting'获得root权限。我认为内核因'rooting'而改变。并且使用三星发布的原始Galaxy S3 Linux Kernel编译的设备驱动程序。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:14:45.520

是的，只要您具备以下条件，就可以为任何 Android 手机开发设备驱动程序：
- 访问该特定手机的 linux 内核源代码。
- 可以访问设备上的 root shell。

需要访问内核源代码，以便可以针对该特定内核构建内核模块。安装内核模块需要 root shell。

关于 android 手机上的 USB 主机支持，某些手机在内核中内置了 USB 主机支持，并将支持 USB 主机模式。但是需要有[合适的 USB 电缆](http://en.wikipedia.org/wiki/USB_On-The-Go#OTG_micro_cables)来连接外围设备。

也为了克服错误，

> insmod：无效的模块格式

您可能想尝试以下**--force-vermagic**标志：

```
insmod --force-vermagic <module.ko> 
```

正如您正确猜测的那样，这实际上是由于设备上运行的内核与构建模块的内核之间的版本号不匹配而导致的错误。更多细节[在这里](http://linux.die.net/lkmpg/x380.html)。

# php - 如何修复 PHP 中的语法错误“unexpected ')'”

> ID：11624495
> 
> 赞同：-1
> 
> 时间：2012-07-24T05:09:55.380
> 
> 标签：php

我在下面的代码中的 Foreach 循环中有错误，任何人都可以帮我修复错误...

```
<form method="post" action="<?php  echo $_SERVER['PHP_SELF'];?>">

<?php

$dbc=mysqli_connect("localhost","root","","elvis_store") or die("Error Connecting to Mysql Database");

if(isset($_POST['submit'])){

foreach($_POST['todelete'] as delete_id){

$query="DELETE FROM email_list WHERE id=$delete_id";
mysqli_query($dbc,$query) or die("Error Querying Database");

}

echo "Customer(s) Removed";

}

$query="SELECT * FROM email_list";
$result=mysqli_query($dbc,$query)or die("Query Syntaxt is Incorrect");

while($row=mysqli_fetch_array($result)){

echo '<input type="checkbox" value="'.$row['id'].'" name="todelete[]"/>';
echo $row['first_name']." ".$row['last_name']." ".$row['email'];
echo "<br/>";

}

mysqli_close($dbc);

?>

<input type="submit" name"submit" value="Remove"/>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:16:24.227

我认为错误一定是由于这一行：

```
foreach($_POST['todelete'] as delete_id){ 
```

将其替换为：

```
foreach($_POST['todelete'] as $delete_id){ 
```

# raphael - RaphaelJS 问题 ...DRAW 或 REDRAW？

> ID：11624496
> 
> 赞同：3
> 
> 时间：2012-07-24T05:10:03.350
> 
> 标签：raphael

嗨，我有一个下拉菜单，每当我更改下拉菜单中的选项时，我都想更改画布中的内容...例如

```
var paper = Raphael("myDivID",400,400);
function smallRectangle(){
  paper.rect(10,10,100,50);
}
function bigRectangle(){
  paper.rect(10,10,150,100);
} 
```

在我的下拉列表中，我将有两个选项“小矩形”和“大矩形”。我想在下拉选择中调用相应的函数。我面临的问题是，一旦我更改下拉选项，Raphael 似乎并没有画出来。**我从 stackoverflow 中的一些问题中读到，没有必要在 RaphaelJS 中使用重绘技术** [查看答案](https://stackoverflow.com/questions/11114416/how-to-redraw-raphael-object-after-paper-clear)！

即使我尝试这种方式：

```
var paper = Raphael("myDivID",400,400);
function smallRectangle(){
  paper.clear()
  paper.rect(10,10,100,50);
}
function bigRectangle(){
  paper.clear()
  paper.rect(10,10,150,100);
} 
```

`clear()`这似乎没有在函数之后向画布添加元素。画布仍然是空的。 ***仅供参考：我的代码非常大，所以我在这里发布了这个简单的例子。***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T20:02:13.393

无需再次重绘矩形......

```
function resize_Rect(rect,newWidth,newHeight){//passing rect ,new width and new height
         rect.attr({'width':newWidth,'height':newHeight});
               } 
```

希望对你有所帮助...

# ios - 从 Instruments 读取内存分配结果

> ID：11624498
> 
> 赞同：1
> 
> 时间：2012-07-24T05:10:09.403
> 
> 标签：ios, objective-c, iphone, instruments, gdc

我正在我的 iOS 应用程序上运行内存分配分析器，我检测到当前创建了 8MB 内存并且仍然存在于我的应用程序中。显然有什么不对劲。所以我深入研究，这是我可以向您展示的图像：

![在此处输入图像描述](../Images/c76c94794255b271c810604d4542461d.png)

知道为什么这是原因吗？这似乎是一个自动释放的对象，所以它不应该被释放而不是生活在内存中吗？

以下是我调用函数 parseTagsInComment 的方式：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    NSString *commentsText = [NSString stringWithFormat:@"%@ %@", self.imageComment_.username_, self.imageComment_.text_];

    NSRange range;
    range.location = 0;
    range.length = commentsText.length;

    NSMutableAttributedString* attrStr = [[NSMutableAttributedString alloc] initWithString:commentsText];
    [attrStr setFont:[UIFont fontWithName:@"HelveticaNeue" size:14] range:range];
    self.commentAttributedString_ = attrStr;
    [attrStr release];

    dispatch_async(dispatch_get_main_queue(), ^{
        [weakSelf.commentsText_ setAlpha:0.0];
        [weakSelf.commentsPostedTime_ setAlpha:0.0];
        [weakSelf.commentsText_ setFrameWidth:weakSelf.contentView.frameWidth - weakSelf.profilePicture_.frameWidth - kCommentsPadding];
        [weakSelf.commentsText_ setFrameHeight:weakSelf.imageComment_.commentHeight_ - 30];
        [weakSelf.commentsText_ setAttributedString:weakSelf.commentAttributedString_];
        [weakSelf.commentsText_ setLinkColor:weakSelf.textColor_];

        NSString *timePosted = [NSString timestampToString:weakSelf.imageComment_.createdTime_];
        CGSize commentsTimeSize = [timePosted sizeWithFont:weakSelf.commentsPostedTime_.font constrainedToSize:CGSizeMake(weakSelf.commentsText_.frameWidth, 50)];
        [weakSelf.commentsPostedTime_ setText:timePosted];

        [UIView animateWithDuration:0.3 animations:^{
            [weakSelf.commentsText_ setAlpha:1.0];
            [weakSelf.commentsPostedTime_ setAlpha:1.0];
        } completion:^(BOOL finished){
            [weakSelf parseTagsInComment];
        }];
    });
    [pool release]; 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:34:33.560

我认为函数 parseTagsInComment 要么使用某些委托方法调用，要么从工作线程的执行路径（不在主线程上）调用。

因此，函数中的第一行应该创建一个自动释放池，最后一行应该销毁该池。

```
-(void) parseTagsInComment
{
   NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
   //Body of your function
   [pool release];
} 
```

# asp.net - 如何在 ASP.net 中获取不可见的 gridview 单元格值？

> ID：11624501
> 
> 赞同：0
> 
> 时间：2012-07-24T05:10:19.293
> 
> 标签：asp.net, gridview

我有一个像下面这样的网格。

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" s                                      
                                    onrowcommand="GridView1_RowCommand">
  <Columns>
      <asp:ButtonField DataTextField="Name" HeaderText="Name" />
      <asp:BoundField DataField="ArrDate" DataFormatString="{0:MM/dd/yyyy}" 
                              HeaderText="Arr Date" />
      <asp:BoundField HeaderText="Dep Date" DataField="DepDate" 
                           DataFormatString="{0:MM/dd/yyyy}" />
      <asp:BoundField HeaderText="Mail" DataField="Mail" />
      <asp:BoundField HeaderText="Status" DataField="Status" />
      <asp:BoundField DataField="ResId" HeaderText="ResId" Visible="False" />                                        
  </Columns>
</asp:GridView> 
```

在后面的代码中：-

```
try
{
  string text = GridView1.Rows[2].Cells[5].Text;
  ScriptManager.RegisterStartupScript(this, GetType(), "Message", "alert('ResId = " + text  + ".');", true);             
}
catch { } 
```

现在消息显示 - RegId =。

我无法获得价值。所以我将 RedId BoundField 更改为可见。现在我得到了价值。

即 RegId = 6。

我现在有两个问题-

1）如何获取不可见列中的RegId值。2）我如何找到我点击的行值...... bzs唯一我可以在代码中更改ROWVALUE ..

```
 string text = GridView1.Rows[ROWVALUE].Cells[5].Text; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:46:37.097

这当然不是正确的做法。您可能想看看使用 DataKeys 来实现这一点。使用当前方法，当您向网格添加新列时，您的代码将失败。

1.  在 gridview 的 DataKeys 属性中添加 RegId 列
2.  像这样在代码隐藏中引用当前行的gridview数据键

    ```
     int regId= Convert.ToInt32(YourGridview.DataKeys[rowIndex]["RegId"].ToString()); 
    ```

# android - 我正在尝试在我的项目中使用 freeimage 库..导致错误

> ID：11624503
> 
> 赞同：1
> 
> 时间：2012-07-24T05:10:24.363
> 
> 标签：android, android-ndk, freeimage

下面的代码片段导致错误...... logcat 已附加......我正在尝试将图像路径从 java 代码传递到 NDK 代码，并从那里尝试使用 FreeImage 库打开位图...... .

```
JNIEXPORT void JNICALL Java_com_example_ImageActivity_brightness(JNIEnv* env, jobject  obj, jstring bitmappath, jfloat brightnessValue)
{
    AndroidBitmapInfo  info;

    int ret;
    void* pixels;

    if ( !bitmappath ) LString();

       const jsize len      = env->GetStringUTFLength(bitmappath);
       const char* strChars = env->GetStringUTFChars(bitmappath, (jboolean *)0);

       std::string Result(strChars, len);

       env->ReleaseStringUTFChars(bitmappath, strChars);

     FIBITMAP *bitmap = FreeImage_Load(FIF_BMP,Result.c_str(), BMP_DEFAULT);
     if (bitmap) {
    // bitmap successfully loaded!
        FreeImage_Unload(bitmap);
    } 
```

错误日志

```
flock@QS57:~/Desktop/android-imagefilter-ndk$ /home/flock/ANDROID/android-ndk-r8/ndk-build
Compile thumb  : imageprocessing <= imageprocessing.c
jni/imageprocessing.c: In function 'Java_com_example_ImageActivity_brightness':
jni/imageprocessing.c:77: error: request for member 'GetStringUTFLength' in something not a structure or union
jni/imageprocessing.c:78: error: request for member 'GetStringUTFChars' in something not a structure or union
jni/imageprocessing.c:80: error: expected expression before ':' token
jni/imageprocessing.c:82: error: request for member 'ReleaseStringUTFChars' in something not a structure or union
jni/imageprocessing.c:84: error: 'FIBITMAP' undeclared (first use in this function)
jni/imageprocessing.c:84: error: (Each undeclared identifier is reported only once
jni/imageprocessing.c:84: error: for each function it appears in.)
jni/imageprocessing.c:84: error: 'bitmap' undeclared (first use in this function)
jni/imageprocessing.c:84: error: 'FIF_BMP' undeclared (first use in this function)
jni/imageprocessing.c:84: error: 'Result' undeclared (first use in this function)
jni/imageprocessing.c:84: error: 'BMP_DEFAULT' undeclared (first use in this function)
make: *** [obj/local/armeabi/objs/imageprocessing/imageprocessing.o] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:34:28.943

只有将代码编译为 C++ 代码时，才能调用 JNI 函数。

如果您需要或想要将代码编译为 C，那么您必须按以下方式编写 JNI 调用：

```
const jsize len      = (*env)->GetStringUTFLength(env, bitmappath);
const char* strChars = (*env)->GetStringUTFChars(env, bitmappath, (jboolean *)0); 
```

# objective-c - 在ios中获取两个日期之间的天数？

> ID：11624508
> 
> 赞同：1
> 
> 时间：2012-07-24T05:10:53.117
> 
> 标签：objective-c, ios, ios5, ios4, nsdate

如何在ios中获取两个日期之间的天数？

例子：

```
输入：
 开始日期：2012 年 3 月 11 日
 结束日期：2012 年 5 月 11 日

输出：
 3-11-2012 星期三
 4-11-2012 星期四
 5-11-2012 星期五

```

谢谢..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T05:45:11.880

试试这个，

```
 NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"yyyy-MM-dd"];
    NSDate *startDate = [df dateFromString:@"2012-07-20"]; // your start date
    NSDate *endDate = [NSDate date]; // your end date
    NSDateComponents *dayDifference = [[NSDateComponents alloc] init];

    NSMutableArray *dates = [[[NSMutableArray alloc] init] autorelease];
    NSUInteger dayOffset = 1;
    NSDate *nextDate = startDate;
    do {
        [dates addObject:nextDate];

        [dayDifference setDay:dayOffset++];
        NSDate *d = [[NSCalendar currentCalendar] dateByAddingComponents:dayDifference toDate:startDate options:0];
        nextDate = d;
    } while([nextDate compare:endDate] == NSOrderedAscending);

    [df setDateStyle:NSDateFormatterFullStyle];
    for (NSDate *date in dates) {
        NSLog(@"%@", [df stringFromDate:date]);
    }
    [df release]; 
```

**输出是**：

```
Friday, July 20, 2012
Saturday, July 21, 2012
Sunday, July 22, 2012
Monday, July 23, 2012
Tuesday, July 24, 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:45:47.013

检查此解决方案：

```
NSDateComponents *components;
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"dd-MM-yyyy"];

NSDate *startDate = [dateFormat dateFromString:@"3-11-2012"];
NSDate *endDate = [dateFormat dateFromString:@"5-11-2012"];

[dateFormat setDateFormat:@"dd-MM-yyyy, EEEE"];

components = [[NSCalendar currentCalendar] components:NSDayCalendarUnit fromDate:startDate toDate:endDate options:0];

int days = [components day];

for (int x = 0; x <= days; x++) {
    NSLog(@"%@", [dateFormat stringFromDate:startDate]);
    startDate = [startDate dateByAddingTimeInterval:(60 * 60 * 24)];
} 
```

输出是：

```
03-11-2012, Saturday
04-11-2012, Sunday
05-11-2012, Monday 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T05:58:40.180

这是一种方法：

```
NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
[dateComponents setYear:2012];
[dateComponents setMonth:11];
[dateComponents setDay:03];

NSDate *date1 = [gregorianCalendar dateFromComponents:dateComponents];

[dateComponents setYear:2012];
[dateComponents setMonth:11];
[dateComponents setDay:05];

NSDate *date2 = [gregorianCalendar dateFromComponents:dateComponents];

NSDateFormatter *outputDateFormatter = [[NSDateFormatter alloc] init];
[outputDateFormatter setDateFormat:@"dd-MM-yyyy EEEE"];
NSDate *dayDate;

dayDate = date1;
NSLog(@"%@", [outputDateFormatter stringFromDate:dayDate]);

do {
    dayDate = [dayDate dateByAddingTimeInterval:86400];
    NSLog(@"%@", [outputDateFormatter stringFromDate:dayDate]);

} while ([dayDate compare:date2]==NSOrderedAscending); 
```

使用 NSCalendar 为您（和您的用户）提供了更大的显示和操作日期的灵活性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T05:42:59.327

这就是你需要的：

```
NSDateFormatter *inputFormatter = [[NSDateFormatter alloc] init];
[inputFormatter setDateFormat:@"mm-dd-yyyy"];
NSDate *inputDate = [inputFormatter dateFromString:@"3-11-2012"];

NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
[outputFormatter setDateFormat:@"mm-dd-yyyy EEEE"];
NSString *output = [outputFormatter stringFromDate:inputDate];

NSLog(@"%@",output);

[inputFormatter release];
[outputFormatter release]; 
```

# java - JTable 不使用 repaint() 方法更新添加的行

> ID：11624512
> 
> 赞同：0
> 
> 时间：2012-07-24T05:12:04.237
> 
> 标签：java, swing, jtable

在我的 UI 中，我使用带有 TableModel 的 JTable。在实现的 Observer 接口的更新方法中，我正在调用重绘方法。删除操作在添加行时立即发生，它没有更新，但在切换时会更新通过标签（它调用另一个方法而不是重绘）

这是更新方法的代码：

```
 public void update(Observable o, Object arg) {
        ((MyTableModel)table_.getModel()).addTableRow(row);

    //addTable(row) adds the  row to the dataVector that populates the JTable
    //the dataVector is updated with added row

            table_.repaint();

            } 
```

我想知道为什么 JTable 没有得到更新请注意-> 数据向量具有所需的行，包括添加的行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T05:34:01.080

您的`addTableRow`方法还应该触发一个事件，指示该行已被添加以提醒`JTable`此更改。那么就不需要`repaint`打电话了。

举个例子看一下`addRow`方法的实现`DefaultTableModel`：

```
public void insertRow(int row, Vector rowData) {
    dataVector.insertElementAt(rowData, row);
    justifyRows(row, row+1);
    fireTableRowsInserted(row, row);
} 
```

您可以清楚地看到触发了一个事件，并且不需要重新绘制。这一切都在[`JTable`教程中更详细地解释](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#fire)

# javascript - 制作支持 mkdir 和 ls 等基本命令的在线 Linux 控制台的好方法是什么？

> ID：11624514
> 
> 赞同：0
> 
> 时间：2012-07-24T05:12:22.580
> 
> 标签：javascript, linux, web

对于我的项目，我必须制作支持基本命令 mkdir ， ls ，rm 等的在线 linux 控制台。它将用于非 CS 人员熟悉 linux 环境而无需将其安装在他们的机器上。它还应该存储在缓冲区中最近使用的命令，如原始控制台。

我未来的工作是实现 gcc/g++ 支持，以实际编译和运行我们在在线代码编辑器中看到的 C/C++ 程序。

我知道它需要大量的网络编程。但是在从头开始开发应用程序时我应该记住什么。java脚本可以提供一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:18:36.557

你可能想研究一些其他尝试过这个的项目，[这个](http://bellard.org/jslinux/)非常简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:46:00.723

“在线 Linux 控制台”这个词可以有很多不同的理解；你应该更多地解释你想要达到的目标。[乔纳森的回答](https://stackoverflow.com/a/11624569/841108)是指在您的浏览器中模拟整个 PC 并在模拟的 PC 内运行一个小型 Linux 系统。您还可能希望您的用户都通过 Web 界面访问同一个 Linux 系统；然后两个不同的用户可以在该 Linux 服务器上共享某些内容。

您可能有兴趣为某些 Linux 终端制作 Web 界面，即让您的 Web 用户与通用 Linux 系统进行交互。然后，您需要一个 Web Linux 终端。存在许多（通常基于 AJAX）的解决方案。例如，您可以查看[libonion](http://coralbits.com/staticc/libonion/html/) ，它提供了一个这样做的[oterm](https://github.com/davidmoreno/onion/tree/master/examples/oterm)示例。

不要忘记安全问题，请参阅例如[this answer](https://stackoverflow.com/a/11502583/841108)。

# android - 解析 XML 时出错：在单个布局文件中使用两个不同的布局时未绑定前缀

> ID：11624515
> 
> 赞同：0
> 
> 时间：2012-07-24T05:12:24.173
> 
> 标签：android

当我编译我的代码时，代码中出现布局文件错误：

> 解析 XML 时出错：未绑定前缀

我该如何解决？我在一个布局文件中使用了两种不同的布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:pj="http://schemas.android.com/apk/res/com.mypackage"
    xmlns:bm="com.mypackage"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/lblUnabletoProceed"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="1" />

    <TextView
        android:id="@+id/lblWelcome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="2" />

    <TextView
        android:id="@+id/lblYouraccountbalance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="3" />

    <TextView
        android:id="@+id/lblNoRecentTransactions"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="4" />

    <TextView
        android:id="@+id/lblLastTransactions"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="5" />

    <TextView
        android:id="@+id/lblTransactionDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="6" />

    <TextView
        android:id="@+id/lblAmount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="7" />

    <TextView
        android:id="@+id/lblInquiriesNTransactions"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="8" />

    <TextView
        android:id="@+id/lblAgAppHelperMethods"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="9" />

    <TextView
        android:id="@+id/lblCustomAgAppHelperMethods"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="10" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:pj="http://schemas.android.com/apk/res/com.mypackage"
        xmlns:bm="com.mypackage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:orientation="vertical"
        android:padding="5dip" >

        <com.mypackage.controls.Carousel
            android:id="@+id/carousel"
            android:layout_width="fill_parent"
            android:layout_height="206dp"
            android:layout_weight="0.92"
            android:animationDuration="200"
            pj:Items="@array/entries"
            pj:SelectedItem="0"
            pj:UseReflection="true" />
    </LinearLayout>

    <com.mypackage.SatelliteMenu
        android:id="@+id/menu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|left"
        android:layout_margin="8dp"
        sat:closeOnClick="true"
        sat:expandDuration="500"
        sat:mainImage="@drawable/ic_launcher"
        sat:satelliteDistance="170dp"
        sat:totalSpacingDegree="90" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:18:02.060

您似乎在尝试添加菜单按钮，错误在

```
<com.mypackage.SatelliteMenu...need not to add like this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:13:53.917

朋友你好，

```
 viewing your layout code,I think problem is that you have not include namespace in your root element which you add in LinearLayout child element;"

xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:pj="http://schemas.android.com/apk/res/com.mypackage" 
```

将此添加到您的根元素并查看您的代码，我认为您也在使用卫星菜单库，它也需要命名空间包含在您的根元素中。

# php - Wordpress 插件的 PHP 替代品？

> ID：11624520
> 
> 赞同：0
> 
> 时间：2012-07-24T05:13:16.353
> 
> 标签：php, wordpress, plugins

我正在 Wordpress 上创建（已经有一段时间了）一个网站。第三方的第三方插件非常有帮助，但大多数对于我想要创建的东西并不完美。

我是开发/编程的新手，我现在正在做javascript，将来会做java。我希望能够创建自己的插件，但 PHP 是唯一能够支持的语言吗？我在多个网站上从多个人那里读到 PHP 混乱且不直观。我宁愿能够使用 Python 或 Ruby。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T05:16:45.330

Wordpress 是基于 PHP 构建的，所以是的，您必须坚持使用 PHP 来开发 Wordpress 插件。

有这种想法的`PHP is messy and unintuitive`人可能还停留在 PHP 的旧时代。PHP 作为一门语言受到了广泛的关注，并且已经完全从面向过程转变为面向对象，并且从 PHP 5.4 开始，它支持最吸引人的 OOP 特性，包括错误处理异常、命名空间、特征、PDO（数据库抽象层）以仅举几例。

# jquery - 将自动完成列表中国家/地区的 Google 地图限制为“澳大利亚”，但会显示每个国家/地区

> ID：11624521
> 
> 赞同：1
> 
> 时间：2012-07-24T05:13:28.850
> 
> 标签：jquery, google-maps, google-maps-api-3, autocomplete

我正在使用 Google API 自动完成功能。我试图只限制澳大利亚。但它建议国家的每个城市。例如，如果我输入“新”，它也建议纽约。我不想那样。我只想显示澳大利亚的城市

工作示例在[Jsfiddle](http://jsfiddle.net/NuCUd/8/)中。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:57:39.653

也许回答太晚了......但是，这对我有用：将以下内容放入您的`initialize()`方法中

```
var input = document.getElementById('searchTextField');
var options = {
    types: ['(cities)'],
    componentRestrictions: {country: 'au'}
};

var autocomplete = new google.maps.places.Autocomplete(input, options); 
```

# extjs4 - 用户单击按钮时打开选项卡面板

> ID：11624522
> 
> 赞同：0
> 
> 时间：2012-07-24T05:13:32.020
> 
> 标签：extjs4, extjs4.1

我有一个`Window`，当我点击一个按钮时，我会弹出打开它（作为一个`pop up`）。这是我的代码，它工作正常。

```
var w= Ext.widget('mywindow');
w.show(); 
```

现在，我有一个`tab bar panel`，当用户单击按钮时，我需要打开它（**但是，不是作为弹出窗口**）。它应该占据整个屏幕（**替换以前的视图**）。我该怎么做？

我的标签面板的定义

```
Ext.define('App.view.TabPanelClass', {
    extend: 'Ext.tab.Panel',
    alias: 'widget.persontabpanel',
    ..... 
```

**更新**

```
launch: function() {   

        Ext.create('Ext.container.Viewport', {
            layout: 'card',
            items: [
            {
                xtype: 'panel', 
                items: { xtype: 'firstPanel' }

            },.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:55:11.207

您可以使用卡片布局将一个视图替换为另一个视图。或者，您可以创建一个具有最大化：真实配置的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:55:29.067

解决此问题的正常方法是将选项卡面板放在视口中并为其提供一个`layout: 'card'`配置以覆盖任何其他视图，`layout: 'fit'`如果这是您在视口中拥有的唯一视图，则配置会更好。Windows 不是 ExtJS 视口的子项，因此窗口和选项卡面板将只是视口中的一项。

视口将保持其内容的大小以匹配浏览器窗口的大小，即使它被调整大小。[在此处](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.Viewport)查看视口上的文档。

# c++ - 大整数库

> ID：11624526
> 
> 赞同：-2
> 
> 时间：2012-07-24T05:13:57.497
> 
> 标签：c++

我有一个 c++ BigInteger 库。我必须从任何大随机数中创建一个精确为 125 位的 bigInteger。我需要对创建的 125 位数执行右移、左移、setbit、getbit、NOT、OR、XOR 和 AND 操作。我需要使用哪个库来执行上述操作？谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:17:35.040

谷歌搜索这些术语`big integer library`给了我[C++ Big Integer Library](https://mattmccutchen.net/bigint/)。从网站：

> 这个库强调易用性和实现的清晰度，而不是速度；一些用户会更喜欢 GMP，它更快。

**编辑：**

要创建一个 125 位的随机数，有很多选择。

一个简单而快速的解决方案（但显然在我上面发布的库中不可用 - 我不知道是否可以使用 GMP）将以`rand() * 0x1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF`正确的符号进行。

不幸的是，上述库范围内的一个方法相当慢，它是绘制 125 个单个位（随机“0”或“1”），如果绘制“1”，则增加 2 的幂。这是一些（未经测试的）代码：

```
BigInteger summand, number125bit;
summand = 1;

srand(systemtime_or_any_other_number);
for (int i=0; i<125; i++)
{
    if (rand() && 1)
    {
         number125bit += summand;
    }
    summand = summand << 1;
} 
```

# java - @Future 的实现在哪里定义？

> ID：11624532
> 
> 赞同：0
> 
> 时间：2012-07-24T05:14:27.480
> 
> 标签：java, hibernate, annotations, bean-validation

Java 持久性和休眠使向实体添加属性级约束变得容易。

```
@Entity
@Table(name = "party")
public class PartyEntity {
    @Future
    public DateTime start;
} 
```

`javax.validation.constraint.Future`注释是在没有特定实现的情况下定义的。

```
@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER })
@Retention(RUNTIME)
@Documented
@Constraint(validatedBy = {})
public @interface Future {
    // ...
} 
```

实际验证在哪里实施？如何扩展它以允许管理员覆盖？

尽管此处未显示，但我已经在此约束上将组用于其他目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:43:00.473

许多验证器的实现由`hibernate-validator`：[http ://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html/validator-usingvalidator.html#validator-defineconstraints-builtin](http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html/validator-usingvalidator.html#validator-defineconstraints-builtin)

如果您使用的是 Maven，只需将以下依赖项添加到`pom.xml`文件中：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>5.0.0.Alpha1</version>
</dependency> 
```

> 如何扩展它以允许管理员覆盖？

最简单的方法是自己[编写](http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html/validator-customconstraints.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:11:36.430

[JSR 303](http://jcp.org/en/jsr/detail?id=303)验证与 JPA 没有太多直接关系。当然也可以用它来验证 JPA 实体。实际问题是什么 - 很可能您想遵循 php-coder 的建议并实施新的注释和通过注释使用设置的约束验证。

如果由于某种神秘的原因，您确实必须更改在您的实现中处理 Future 注释的方式，那么解决方案当然是特定于实现的。假设您使用 Hibernate Validator 4.3，验证约束的实际检查发生在：

*   [org.hibernate.validator.internal.constraintvalidators.FutureValidatorForDate](http://docs.jboss.org/hibernate/validator/4.3/api/org/hibernate/validator/internal/constraintvalidators/FutureValidatorForDate.html)
*   [org.hibernate.validator.internal.constraintvalidators.FutureValidatorForCalendar](http://docs.jboss.org/hibernate/validator/4.3/api/org/hibernate/validator/internal/constraintvalidators/FutureValidatorForCalendar.html)

选择这些实现的方式可能会受到`org.hibernate.validator.internal.metadata.core.ConstraintHelper`. 我建议将您使用的实现源附加到您的 IDE，因为这样很容易导航到这种细节。

# php - 图像宽度高度jQuery

> ID：11624536
> 
> 赞同：0
> 
> 时间：2012-07-24T05:14:44.393
> 
> 标签：php, jquery

大家好，我希望图像在 jquery 中展开和折叠，所以这是我的代码......

```
 <div id="expand_image" style="border-top:1px solid #000">
 <img src="http://www.hurriyet.com.tr/_np/7181/17287181.jpg" hspace=5/>
 </div>
 <div id="expand_image">
 <img src="http://www.hurriyet.com.tr/_np/2790/17282790.jpg" hspace=5 />
 </div>
 <div id="expand_image">
 <img src="http://www.hurriyet.com.tr/_np/6751/17286751.jpg" hspace=5  />
 </div >
 <div id="expand_image">
 <img src="http://www.hurriyet.com.tr/_np/7203/17287203.jpg"  hspace=5 />
 </div>
 </div> 
```

下面是css样式

```
 #expand_image { overflow:hidden; float:left; height:100px; margin:0 5px; border-bottom: 1px solid #000; cursor:pointer; } 
```

jquery代码如下...

```
 $(function() {
   $("#expand_image ").click(function() {

     var imgwidth = this.width;
     var imgheight = this.height;
    $a=300;
    $b=this.height;
      alert(this.width + 'x' + this.height);

      if ($a==$b )
    {
    alert('300');
       $(this).css('height', '100');
       $(this).css('width', '580');   
    }
    else
    {
      alert('100'); 
       $(this).css('height', '300');
       $(this).css('width', '580'); 
    }       
    });
    }); 
```

所以我想要的是..当我点击一张图片时它应该展开而其他人应该折叠..而如果我点击展开的图片它应该折叠

所以我试图获得图像高度

所以如果它的 300 然后折叠，否则展开

但输出

```
alert(this.width + '-' + this.height); 
```

是 ：

![在此处输入图像描述](../Images/63814a16f10e5e448779442c55f05ac0.png)

有人知道吗？提前致谢..：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:25:04.873

高度和宽度是函数，所以你需要调用`height()`而不是`height`（注意大括号），试试这个：

```
alert(this.width() + '-' + this.height()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:36:42.847

> **切勿使用相同的 ID**

在您的 HTML 上，您使用`<div id="expand_image"`的会导致查找元素出现问题。

参考**[现场演示](http://jsfiddle.net/SivaCharan/Myj7D/1/)**

## HTML：

```
<div class="expand_image" style="border-top:1px solid #000">
    <img src="http://www.hurriyet.com.tr/_np/7181/17287181.jpg" hspace=5/>
</div>
<div class="expand_image">
    <img src="http://www.hurriyet.com.tr/_np/2790/17282790.jpg" hspace=5 />
</div>
<div class="expand_image">
    <img src="http://www.hurriyet.com.tr/_np/6751/17286751.jpg" hspace=5  />
</div >
<div class="expand_image">
    <img src="http://www.hurriyet.com.tr/_np/7203/17287203.jpg" hspace=5 />
</div> 
```

## JS：

```
$(function() {
    $(".expand_image").click(function() {
        $(this).css({
            'height':'300',
            'width':'580'
        });
        $(".expand_image").not(this).css({
            'height':'100',
            'width':'580'
        });
    });
}); 
```

## CSS：

```
.expand_image { 
    overflow:hidden; 
    float:left; 
    height:100px; 
    margin:0 5px; 
    border-bottom: 1px solid #000; 
    cursor:pointer; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T05:38:48.650

首先将您的 div 放入包装器中，然后按类而不是 id 引用它们...因为您具有相同的 id，这将避免冲突：

```
<div id="wrapper"> 
<div class="expand_image" style="border-top:1px solid #000">
 <img src="http://www.hurriyet.com.tr/_np/7181/17287181.jpg" hspace=5/>
 </div>
 <div class="expand_image">
 <img src="http://www.hurriyet.com.tr/_np/2790/17282790.jpg" hspace=5 />
 </div>
 <div class="expand_image">
 <img src="http://www.hurriyet.com.tr/_np/6751/17286751.jpg" hspace=5  />
 </div >
 <div class="expand_image">
 <img src="http://www.hurriyet.com.tr/_np/7203/17287203.jpg"  hspace=5 />
 </div>
 </div>​ 
```

通过将它放在 div 包装器中，您不必启动 expand_image 类的每个实例，因此此代码将执行得更好：

```
$("#wrapper").on("click", ".expand_image", function () {
    if ($(this).height() == 300) {
       $(this).css('height', '100'); 
    } else {
       $(".expand_image").css('height', '100'); 
       $(this).css('height', '300');   
    }   
}); 
```

通过将 #expand_image 更改为 .expand_image 来更新您的 CSS

```
.expand_image { overflow:hidden; float:left; height:100px; margin:0 5px; border-bottom: 1px solid #000; cursor:pointer; } ​ 
```

它会起作用的！ [这是一个 JSFIDDLE 示例](http://jsfiddle.net/collabcoders/wv8rC/)

# html - 对象元素不自动增长

> ID：11624539
> 
> 赞同：0
> 
> 时间：2012-07-24T05:15:11.793
> 
> 标签：html

我对 html 中的对象元素有 2 个问题，

我用这个对象

```
<object id='obj1' data='Manager/First_Manager.aspx' type='text/html' width='100%' height='1000' style='background:#FBFBFB;text-align:center;overflow:hidden;'></object> 
```

问题 1：我强制确定对象的高度，我该怎么做才能自动增长对象元素？

问题2：当我在两个大页面之间移动时，在返回第一页时滚动不返回页面顶部。它停留在前一页的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:52:16.227

对于问题1：`height:auto`会有所帮助....（需要更多代码结构来挖掘问题）

对于您的问题，两个将此 javascript 放在您的页面中，以便将页面置于顶部。

（注意：下面使用 jQuery 的代码你必须在你的页面中引用 jQuery.js。）

```
<scripttype="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    $(document).ready(function(){
        $(this).scrollTop(0);
    });
    </script> 
```

# python - Python记录打字时间

> ID：11624543
> 
> 赞同：1
> 
> 时间：2012-07-24T05:15:32.177
> 
> 标签：python

我需要记录用户将一系列短语（字符串）中的每个人发送到 python 脚本中的时间。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T05:18:37.807

使用模块时间：

```
import time
time.time() 
```

或者（如果您正在寻找人类可读的格式）使用日期时间：

```
import datetime
datetime.datetime.now() 
```

当字符串到达​​脚本时调用这些方法（通过控制台的 raw_input 方法，或通过脚本通信的任何其他方法）。

# android - 在android中使用自定义建议视图自动完成文本视图？

> ID：11624544
> 
> 赞同：1
> 
> 时间：2012-07-24T05:15:42.720
> 
> 标签：android

我想在水平滚动条**的android默认键盘顶部**显示自动完成Textview建议，而不是默认下拉列表来自动完成Textview ..（我尝试使用自定义视图，但它不能按照我的要求工作）

感谢进阶！！

# c - 如何让主线程等待所有子线程完成？

> ID：11624545
> 
> 赞同：41
> 
> 时间：2012-07-24T05:16:00.120
> 
> 标签：c, multithreading

我打算在主线程中触发 2 个线程，并且主线程应该等到所有 2 个子线程完成，这就是我的做法。

```
void *routine(void *arg)
{
    sleep(3);
}

int main()
{
    for (int i = 0; i < 2; i++) {
        pthread_t tid;
        pthread_create(&tid, NULL, routine, NULL);
        pthread_join(&tid, NULL);  //This function will block main thread, right?
    }
} 
```

在上面的代码中，`pthread_join`确实让主线程等待子线程，但问题是，直到第一个线程完成后才会创建第二个线程。这不是我想要的。

我想要的是，在主线程中立即创建 2 个线程，然后主线程等待它们完成。似乎`pthread_join`无法做到这一点，可以吗？

我想，也许通过一个`semaphore`我可以完成这项工作，但还有其他方式吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-24T05:17:57.363

```
int main()
{
    pthread_t tid[2];
    for (int i = 0; i < 2; i++) {
        pthread_create(&tid[i], NULL, routine, NULL);
    }
    for (int i = 0; i < 2; i++)
       pthread_join(tid[i], NULL);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-24T05:20:02.877

首先创建所有线程，然后加入所有线程：

```
pthread_t tid[2];

/// create all threads
for (int i = 0; i < 2; i++) {
    pthread_create(&tid[i], NULL, routine, NULL);
}

/// wait all threads by joining them
for (int i = 0; i < 2; i++) {
    pthread_join(tid[i], NULL);  
} 
```

或者，有一些`pthread_attr_t`变量，使用[pthread_attr_init(3)](http://man7.org/linux/man-pages/man3/pthread_attr_init.3.html)然后[pthread_attr_setdetachedstate(3)](http://man7.org/linux/man-pages/man3/pthread_attr_setdetachstate.3.html) ，然后将其地址传递给[pthread_create(3)](http://man7.org/linux/man-pages/man3/pthread_create.3.html)第二个参数。Thos 将创建处于*分离*状态的线程。或者`pthread_detach`按照[Jxh 的回答](https://stackoverflow.com/a/11625626/841108)中的说明使用。

记得阅读一些好的[Pthread 教程](https://computing.llnl.gov/tutorials/pthreads/)。您可能想要使用互斥锁和条件变量。

您可以使用包装它们的框架，例如[Qt](https://qt.io/)或[POCO](https://pocoproject.org/)（在 C++ 中），或者阅读一本好的[C++ 书籍](https://www.stroustrup.com/programming.html)并使用[C++ 线程](https://en.cppreference.com/w/cpp)。

从概念上讲，线程都有各自的[调用堆栈](https://en.wikipedia.org/wiki/Call_stack)，并且与[continuation](https://en.wikipedia.org/wiki/Continuation)相关。它们很“重”。

考虑一些[面向代理的编程](https://en.wikipedia.org/wiki/Agent-oriented_programming)方法：根据经验，您不希望有很多线程（例如，[10 核处理器](https://en.wikipedia.org/wiki/Multi-core_processor)上的 20 个线程是合理的，除非很多线程都在睡觉，否则 200 个线程不会是或等待）并且确实希望线程使用互斥锁和[条件变量](https://en.wikipedia.org/wiki/Monitor_(synchronization)#Condition_variables)进行同步，并经常与其他线程通信和/或同步（每秒几次）。另请参阅[poll(2)](https://man7.org/linux/man-pages/man2/poll.2.html)、[fifo(7)](https://man7.org/linux/man-pages/man7/fifo.7.html)、[unix(7)](https://man7.org/linux/man-pages/man7/unix.7.html)、[sem_overview(7)](https://man7.org/linux/man-pages/man7/sem_overview.7.html)和[shm_overview(7)](https://man7.org/linux/man-pages/man7/shm_overview.7.html)作为线程之间通信的另一种方式。一般来说，避免在线程中使用[信号（7）](https://man7.org/linux/man-pages/man7/signal.7.html)（阅读[信号安全（7）](https://man7.org/linux/man-pages/man7/signal-safety.7.html)...)，并谨慎使用[dlopen(3) （可能仅在主线程中）。](http://man7.org/linux/man-pages/man3/dlopen.3.html)

一种实用的方法是让你的大部分线程运行一些[事件循环](https://en.wikipedia.org/wiki/Event_loop)（使用[poll(2)](https://man7.org/linux/man-pages/man2/poll.2.html)，[pselect(2)](https://man7.org/linux/man-pages/man2/pselect.2.html)，也许[eventfd(2)](https://man7.org/linux/man-pages/man2/eventfd.2.html)，[signalfd(2)](https://man7.org/linux/man-pages/man2/signalfd.2.html)，......），也许使用[pipe(7 )](https://man7.org/linux/man-pages/man7/pipe.7.html)或[unix(7)](https://man7.org/linux/man-pages/man7/unix.7.html)套接字。另请参见[socket(7)](https://man7.org/linux/man-pages/man7/socket.7.html)。

不要忘记记录（在纸上）线程之间的通信协议。对于理论方法，请阅读有关[π 演算的](https://en.wikipedia.org/wiki/%CE%A0-calculus)书籍并了解[Rice 定理](https://en.wikipedia.org/wiki/Rice%27s_theorem)：调试并发程序很困难。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T06:54:26.097

您可以启动线程分离，而不用担心加入。

```
for (int i = 0; i < 2; i++) {
    pthread_t tid;
    pthread_create(&tid, NULL, routine, NULL);
    pthread_detach(tid);
}
pthread_exit(0); 
```

或者，或者，您可以让死掉的线程向主线程报告它是谁，以便线程按照它们退出的顺序加入，而不是按照您创建它们的顺序。

```
void *routine(void *arg)
{
    int *fds = (int *)arg;
    pthread_t t = pthread_self();
    usleep((rand()/(1.0 + RAND_MAX)) * 1000000);
    write(fds[1], &t, sizeof(t));
}

int main()
{
    int fds[2];
    srand(time(0));
    pipe(fds);
    for (int i = 0; i < 2; i++) {
        pthread_t tid;
        pthread_create(&tid, NULL, routine, fds);
        printf("created: %llu\n", (unsigned long long)tid);
    }
    for (int i = 0; i < 2; i++) {
        pthread_t tid;
        read(fds[0], &tid, sizeof(tid));
        printf("joining: %llu\n", (unsigned long long)tid);
        pthread_join(tid, 0);
    }
    pthread_exit(0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-16T17:05:01.537

```
#include<stdio.h>
#include<pthread.h>

int icnt = 0;   //in non_bss data segment
pthread_mutex_t lock;     //lock variable created stored into bss data segment

void *Thread_count(void* args)      //syncronization 
{
pthread_mutex_lock(&lock);              //lock aquire 

icnt++;

for(int x = 1; x <= icnt; x++)
{
    printf("Hello from Thread_count : %d \n",icnt);
}
printf("\n");

pthread_mutex_unlock(&lock);            //release lock  
pthread_exit(NULL);                     //exit from child thread
}

int main()
{

pthread_t threads[4];  //created array of {unsigned long int}
int status = 0;

//creating threads in loop      
for(int i = 1; i <= sizeof(threads)/sizeof(threads[0]); i++)
{
    pthread_create(&threads[i], NULL, &Thread_count, NULL);
}

//waiting for threads in loop
for(int j = 1; j <= sizeof(threads)/sizeof(threads[0]); j++)
{
    pthread_join(threads[j], &status);

    printf("Thread number : %d     <-->  Thread status : %d\n",j, status);
}

pthread_exit(0);  //end of main thread
} 
```

# android - 从堆栈中删除一个活动

> ID：11624558
> 
> 赞同：1
> 
> 时间：2012-07-24T05:17:42.497
> 
> 标签：android, stack, android-activity

我有三个活动ActivityA，ActivityB，ActivityC。

假设在 ActivityA 中有一些代码，例如...

```
if(someCondition()){
gotoActivityB();
}
else{
gotoActivityC();
} 
```

现在，如果用户去**ActivityB**，**ActivityA**不应该完成。

如果他去**ActivityC**，它应该完成。

添加`noHistory`清单文件不起作用。

此外，`finish()`如果条件不起作用，因为 ActivityC 之后有许多活动，其中 ActivityA 应该在后台。

我不想调用`startActivity(context,ActivityA.class)`这些活动`onBackPressed()`，因为它会再次执行**ActivityA**`onCreate()`中的代码。

 **那么，有没有办法，当用户按下 ActivityB 中的后退按钮时，我可以从堆栈中删除 ActivityA？

可能是这样的：？

```
ActivityB.this.finish();
ActivityA.finish(); //some code to finish ActivityA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:04:59.230

好的，这是实现目标的一种方法。您需要将 Activity 上下文传递到您需要它的任何地方，以便在其上调用 finish()。我使用 Application 类来做到这一点。为了时间，我只使用了两个类来完成它，但它应该可以很好地满足您的目的。这是我的做法：

这是第一堂课。它是我们想要从另一个 Activity 关闭的 Activity。

```
public class MainActivity extends Activity implements OnClickListener {
private Button button;
// application instance
private MainApplication mainApplication;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mainApplication = (MainApplication) getApplicationContext();
    // set the Activity's context for later usage.  Doing this determines which
    // Activity can be closed from another Activity.
    mainApplication.setActivityContext(this);

    button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(this);
}

public void onClick(View v) {
    switch (v.getId()) {
    case R.id.button1:
        Intent i = new Intent(this, SecondActivity.class);
        startActivity(i);
        break;
    }       
} 
} 
```

这是第二个活动。退出它也会导致在第一堂课上调用finish()：

```
public class SecondActivity extends Activity {

private Activity activityContext;
private MainApplication mainApplication;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second_activity_layout);

    mainApplication = (MainApplication) getApplicationContext();
    // get the Activity context you stored in the MainApplication class
    // so you can call finish on it.
    activityContext = mainApplication.getActivityContext();
}

@Override
protected void onPause() {
    super.onPause();
    // closes your defined Activity.  If you press the back button you will find
    // that you exit right out of the app as the other Activity gets popped off 
    // the stack.
    activityContext.finish();
}
} 
```

和应用程序类：

```
public class MainApplication extends Application {

private Activity activityContext;

public Activity getActivityContext() {
    return activityContext;
}

public void setActivityContext(Activity activityContext) {
    this.activityContext = activityContext;
}

} 
```

当然，请确保在 AndroidManifest 中声明您的 MainApplication 类：

```
<application
    android:name=".MainApplication"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" > 
```

这是一种 hacky 方式来做到这一点。可能有更好的方法。但无论如何，您必须传递要调用 finish() 的 Activity 的上下文。然后你可以从任何地方关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:29:24.477

您好，您可以根据条件在当前活动中完成您的活动。或根据您可以完成活动的结果使用 StartActivityforResult。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:20:46.470

你可以用另一种方式试试这个，就像我一样。

1.  在开始时创建活动的静态实例变量。

    ```
    private static Activity1 thisAct = null; // Activity1 is name of class 
    ```

2.  `onCreate()`现在在方法中初始化这个变量

    ```
    thisAct = this; 
    ```

3.  创建一个将完成此活动的静态方法

    ```
    public static void finishActivity()
    {
        thisAct.finish();
    } 
    ```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-24T05:30:12.087

在进行活动 C 时，清除 FLAG ：

```
 Intent cIntent = new Intent(view.getContext(), cActivity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    startActivity(cIntent); 
```**

# windows - Go-CPU/内存/网络

> ID：11624562
> 
> 赞同：4
> 
> 时间：2012-07-24T05:18:10.403
> 
> 标签：windows, go, cpu-usage

我正在编写一个作为守护进程运行的跨平台 Go 应用程序。它基本上侦听文件系统上的更改并将更改复制/下载到/从服务器。这个想法是它永远不应该减慢机器的速度，让任务排队直到机器空闲。

为此，我想监控 CPU、RAM 和网络使用情况，但网络使用情况（如果可能）。我目前的目标是 Windows 7+、Mac OS 10+ 和 Linux 3+。

我主要是一名 Linux 程序员，所以我不熟悉 Windows/BSD API，但我已经找到了一些关于 BSD 的好信息，所以我想我可以弄清楚。我在追踪 Windows 系统调用时遇到了麻烦（我不知道获取 Windows 手册页的方法......）。我设法找到了这些资源（适用于 Windows）：

*   [http://msdn.microsoft.com/en-us/library/ms724400%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms724400%28VS.85%29.aspx)
*   [http://www.philosophicalgeek.com/2009/01/03/determine-cpu-usage-of-current-process-c-and-c/](http://www.philosophicalgeek.com/2009/01/03/determine-cpu-usage-of-current-process-c-and-c/)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/aa373083%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373083%28v=vs.85%29.aspx)
*   [是否可以从脚本中知道 cpu 利用率](https://stackoverflow.com/questions/2415085/is-it-possible-to-know-the-cpu-utilization-from-command-line)

我更喜欢使用系统调用而不是封装/包装 C++ API。显然，我会对已经这样做的任何其他 Go 库感兴趣。

最终，我正在寻找这样的东西：[http ://nodejs.org/api/os.html](http://nodejs.org/api/os.html)

我几乎在寻找系统调用和如何使用它们的示例。

如果我走错了方向，请告诉我。我不赞成轮询内核以获取系统信息的想法，但在我看来，这似乎是获取该信息的最可靠方法。我更愿意以弱势用户身份运行该应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T07:57:04.497

我找到了[https://github.com/AllenDang/w32](https://github.com/AllenDang/w32)，这是一个为大量 Windows API 调用提供包装器的项目。[我在 fork 中](https://github.com/beatgammit/w32)添加了对 GetSystemTimes 的调用，这就是我目前正在使用的。我已经打开了一个拉取请求，所以它应该很快被合并。

这使我能够获取 CPU 信息（空闲时间、内核时间和用户时间，类似于`/proc/stats`），而且它似乎工作得很好。这是一些示例代码：

```
package main

import (
    "w32"
    "fmt"
    "time"
)

func main() {
    var idle, kernel, user w32.FILETIME

    w32.GetSystemTimes(&idle, &kernel, &user)
    idleFirst   := idle.DwLowDateTime   | (idle.DwHighDateTime << 32)
    kernelFirst := kernel.DwLowDateTime | (kernel.DwHighDateTime << 32)
    userFirst   := user.DwLowDateTime   | (user.DwHighDateTime << 32)

    time.Sleep(time.Second)

    w32.GetSystemTimes(&idle, &kernel, &user)
    idleSecond   := idle.DwLowDateTime   | (idle.DwHighDateTime << 32)
    kernelSecond := kernel.DwLowDateTime | (kernel.DwHighDateTime << 32)
    userSecond   := user.DwLowDateTime   | (user.DwHighDateTime << 32)

    totalIdle   := float64(idleSecond - idleFirst)
    totalKernel := float64(kernelSecond - kernelFirst)
    totalUser   := float64(userSecond - userFirst)
    totalSys    := float64(totalKernel + totalUser)

    fmt.Printf("Idle: %f%%\nKernel: %f%%\nUser: %f%%\n", (totalIdle / totalSys) * 100, (totalKernel / totalSys) * 100, (totalUser / totalSys) * 100)
    fmt.Printf("\nTotal: %f%%\n", (totalSys - totalIdle) * 100 / totalSys)
} 
```

如果我能找到 RAM/网络统计信息，我应该被设置。

# android - Android SDK安装失败，找不到java版本

> ID：11624567
> 
> 赞同：1
> 
> 时间：2012-07-24T05:18:32.040
> 
> 标签：android, sdk, java

我在谷歌上搜索了这个但没有找到任何答案......
我安装了 Java SE SDK ver 7 但无法继续......
这是错误捕获：
![这是错误](../Images/2be4d75647b1729ab6999c41a38ebda0.png)

任何人都可以解释为什么？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:58:49.143

如果您安装的是 64 位版本，请卸载并使用 32 位版本。

# oracle - 从给定任何节点的根中找到整棵树

> ID：11624568
> 
> 赞同：5
> 
> 时间：2012-07-24T05:18:33.793
> 
> 标签：oracle

给定树的节点，如何找到整棵树？

树的例子：

```
 100
  101        102
1010 1011   1020  1021

select level, employee_id, last_name, manager_id ,
       connect_by_root employee_id as root_id
  from employees
 connect by prior employee_id = manager_id
 start with employee_id = 101
; 
```

表中的根是 (parent,child) 示例 (100,101) 表中没有 (null,100) 行。

上面的查询只给了从 101 开始的孩子。但是假设我想要从根开始的所有东西？

当给定“101”作为节点时，您将不知道哪个是根。

当根是给定节点时，查询应该可用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T06:29:16.037

您需要首先遍历树以获取所有经理，然后向下遍历以获取所有员工：

```
select level, employee_id, last_name, manager_id ,
       connect_by_root employee_id as root_id
   from employees
connect by prior employee_id = manager_id -- down the tree
start with manager_id in ( -- list up the tree
     select manager_id 
       from employees
     connect by employee_id = prior manager_id -- up the tree
     start with employee_id = 101
     )
; 
```

见[http://www.sqlfiddle.com/#!4/d15e7/18](http://www.sqlfiddle.com/#!4/d15e7/18)

## 编辑：

如果给定节点也可能是根节点，则扩展查询以将给定节点包含在父节点列表中：

非根节点示例：

```
select distinct employee_id, last_name, manager_id 
   from employees
connect by prior employee_id = manager_id -- down the tree
start with manager_id in ( -- list up the tree
     select manager_id 
       from employees
     connect by employee_id = prior manager_id -- up the tree
     start with employee_id = 101
     union 
     select manager_id -- in case we are the root node
       from employees
     where manager_id = 101
     )
; 
```

根节点示例：

```
select distinct employee_id, last_name, manager_id 
   from employees
connect by prior employee_id = manager_id -- down the tree
start with manager_id in ( -- list up the tree
     select manager_id 
       from employees
     connect by employee_id = prior manager_id -- up the tree
     start with employee_id = 100
     union 
     select manager_id -- in case we are the root node
       from employees
     where manager_id = 100
     )
; 
```

小提琴[http://www.sqlfiddle.com/#!4/d15e7/32](http://www.sqlfiddle.com/#!4/d15e7/32)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T05:36:17.990

为什么不只是：

```
select level, employee_id, last_name, manager_id ,
connect_by_root manager_id as root_id
from employees
connect by prior employee_id = manager_id
start with manager_id = 100 
```

[这](http://www.sqlfiddle.com/#!4/d15e7/5)是一个小提琴

**编辑**
这是另一个尝试（在了解完整问题后）：

```
with t as (
select case when mgr.employee_id is null then
1 else 0 end is_root, emp.employee_id employee, emp.manager_id manager, emp.last_name last_name

from employees mgr right outer join employees emp
on mgr.employee_id = emp.manager_id
),
tmp as (

select level, employee, last_name, manager ,
connect_by_root manager as root_id,
manager||sys_connect_by_path(employee,
',') cbp

from t
connect by prior employee = manager
start with t.is_root =
1 )
select * from tmp
where tmp.root_id in (select root_id from tmp where employee= 101 or manager = 101) 
```

我检查了它，`100`它运行良好[这](http://www.sqlfiddle.com/#!4/c4435/24)是一个小提琴`101``1010`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-21T08:58:30.080

```
select 
     level, 
     employee_id, 
     last_name, manager_id ,
connect_by_root employee_id as root_id
from employees
connect by prior employee_id = manager_id
start with employee_id in  ( 
  select employee_id from employees 
  where manager_id is null ) 
```

# android - ANDROID：使用预配置邮件发送邮件：发件人地址不使用邮件提供商（如 GMAIL、YAHOO 预装在 ANDROID DEVICE 中）

> ID：11624571
> 
> 赞同：0
> 
> 时间：2012-07-24T05:18:48.050
> 
> 标签：android, email

我正在尝试使用`RECOVER PASSWORD`需要`MAIL SENDING`对应用户名的按钮。我想知道如何以某种方式发送 MAIL（在后台）而不使用我自己`GMAIL`的`YAHOO`地址（预安装的 EMAIL 提供程序服务），就像`abc@abc.com`我的应用程序的每个用户一样。

任何帮助都是最受欢迎的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:11:35.813

使用 Gmail 身份验证使用 JavaMail API 在 Android 中发送电子邮件

**创建简单项目的步骤：**

MailSenderActivity.java

```
YOUR PACKAGE;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

public class MailSenderActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final Button send = (Button) this.findViewById(R.id.send);
        send.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                try {   
                    GMailSender sender = new GMailSender("username@gmail.com", "password");
                    sender.sendMail("This is Subject",   
                            "This is Body",   
                            "user@gmail.com",   
                            "user@yahoo.com");   
                } catch (Exception e) {   
                    Log.e("SendMail", e.getMessage(), e);   
                } 

            }
        });

    }
} 
```

GmailSender.java

```
YOUR PACKAGE;

import javax.activation.DataHandler;   
import javax.activation.DataSource;   
import javax.mail.Message;   
import javax.mail.PasswordAuthentication;   
import javax.mail.Session;   
import javax.mail.Transport;   
import javax.mail.internet.InternetAddress;   
import javax.mail.internet.MimeMessage;   
import java.io.ByteArrayInputStream;   
import java.io.IOException;   
import java.io.InputStream;   
import java.io.OutputStream;   
import java.security.Security;   
import java.util.Properties;   

public class GMailSender extends javax.mail.Authenticator {   
    private String mailhost = "smtp.gmail.com";   
    private String user;   
    private String password;   
    private Session session;   

    static {   
        Security.addProvider(new com.provider.JSSEProvider());   
    }  

    public GMailSender(String user, String password) {   
        this.user = user;   
        this.password = password;   

        Properties props = new Properties();   
        props.setProperty("mail.transport.protocol", "smtp");   
        props.setProperty("mail.host", mailhost);   
        props.put("mail.smtp.auth", "true");   
        props.put("mail.smtp.port", "465");   
        props.put("mail.smtp.socketFactory.port", "465");   
        props.put("mail.smtp.socketFactory.class",   
                "javax.net.ssl.SSLSocketFactory");   
        props.put("mail.smtp.socketFactory.fallback", "false");   
        props.setProperty("mail.smtp.quitwait", "false");   

        session = Session.getDefaultInstance(props, this);   
    }   

    protected PasswordAuthentication getPasswordAuthentication() {   
        return new PasswordAuthentication(user, password);   
    }   

    public synchronized void sendMail(String subject, String body, String sender, String recipients) throws Exception {   
        try{
        MimeMessage message = new MimeMessage(session);   
        DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
        message.setSender(new InternetAddress(sender));   
        message.setSubject(subject);   
        message.setDataHandler(handler);   
        if (recipients.indexOf(',') > 0)   
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
        else  
            message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
        Transport.send(message);   
        }catch(Exception e){

        }
    }   

    public class ByteArrayDataSource implements DataSource {   
        private byte[] data;   
        private String type;   

        public ByteArrayDataSource(byte[] data, String type) {   
            super();   
            this.data = data;   
            this.type = type;   
        }   

        public ByteArrayDataSource(byte[] data) {   
            super();   
            this.data = data;   
        }   

        public void setType(String type) {   
            this.type = type;   
        }   

        public String getContentType() {   
            if (type == null)   
                return "application/octet-stream";   
            else  
                return type;   
        }   

        public InputStream getInputStream() throws IOException {   
            return new ByteArrayInputStream(data);   
        }   

        public String getName() {   
            return "ByteArrayDataSource";   
        }   

        public OutputStream getOutputStream() throws IOException {   
            throw new IOException("Not Supported");   
        }   
    }   
} 
```

JSSE 提供者

```
/*
 *  Licensed to the Apache Software Foundation (ASF) under one or more
 *  contributor license agreements.  See the NOTICE file distributed with
 *  this work for additional information regarding copyright ownership.
 *  The ASF licenses this file to You under the Apache License, Version 2.0
 *  (the "License"); you may not use this file except in compliance with
 *  the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

/**
 * @author Alexander Y. Kleymenov
 * @version $Revision$
 */

import java.security.AccessController;
import java.security.Provider;

public final class JSSEProvider extends Provider {

    public JSSEProvider() {
        super("HarmonyJSSE", 1.0, "Harmony JSSE Provider");
        AccessController.doPrivileged(new java.security.PrivilegedAction<Void>() {
            public Void run() {
                put("SSLContext.TLS",
                        "org.apache.harmony.xnet.provider.jsse.SSLContextImpl");
                put("Alg.Alias.SSLContext.TLSv1", "TLS");
                put("KeyManagerFactory.X509",
                        "org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl");
                put("TrustManagerFactory.X509",
                        "org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl");
                return null;
            }
        });
    }
} 
```

将以下链接中的 3 个 jar 添加到您的 Android 项目

*   [邮件.jar](http://javamail-android.googlecode.com/files/mail.jar)
*   [激活.jar](http://javamail-android.googlecode.com/files/activation.jar)
*   [附加的.jar](http://javamail-android.googlecode.com/files/additionnal.jar)

[单击此处 - 如何添加外部罐子](https://stackoverflow.com/a/6859020/28557)

运行项目并检查邮件的收件人邮件帐户。干杯！！

希望这可以帮助

并且不要忘记您无法从 android 中的任何 UI 活动进行网络操作。因此，如果您有任何网络问题，请遵循[此答案：](https://stackoverflow.com/a/6343299)

Jar 文件：[https ://code.google.com/p/javamail-android/](https://code.google.com/p/javamail-android/)

# java - 计数器未递减或未在 Breakout 中读取

> ID：11624575
> 
> 赞同：1
> 
> 时间：2012-07-24T05:19:02.550
> 
> 标签：java

好的，我有这个永不终止的游戏循环——

```
public void run() {
    setup();
    addMouseListeners();
    int Turns = NTURNS;
    int TotalBricks = NBRICKS_PER_ROW * NBRICK_ROWS;
    while ((Turns>0) && (TotalBricks>0)) {
        moveBall();
        checkForCollision();
        pause(DELAY);
    }
    System.exit(0);
} 
```

- 即使我有这种方法在每次错过球时都会减少 Turns 值：

```
private void checkForCollision() {
    GObject collider = getCollidingObject();
    if (collider !=null) {
        if (collider == Paddle) {
            vy= -vy;
        }
        else {
            vy= -vy;
            remove(collider);
            TotalBricks = TotalBricks - 1;
        }
    }
    if((ball.getX()>=(WIDTH-BALL_RADIUS)) || (ball.getX()<=0)) {
        vx = -vx;
    }
    if(ball.getY()<=0) {
        vy = -vy;
    }
    if(ball.getY()>=HEIGHT) {
    Turns = Turns -1;
    remove(ball);
    newBall();
    }

} 
```

加上这个

```
private int Turns; 
```

在底部以确保变量在两种方法之间共享。无论球丢了多少次，比赛都不会停止。我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T05:24:16.583

您在 run 方法中声明了一个新的 Turns 变量，这是该方法所使用的，因为它具有更多的本地范围。这称为可变阴影。使用像 Eclipse 这样不错的 Java IDE，它会在您执行此操作时发出警告。这几乎总是一个错误。

[http://www.xyzws.com/Javafaq/what-is-variable-hiding-and-shadowing/15](http://www.xyzws.com/Javafaq/what-is-variable-hiding-and-shadowing/15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:25:59.617

您要声明`Turns`变量两次，一次用于整个类，一次用于`run()`方法。由于您还要检查`Turns`您在方法中声明的变量的值`run()`，因此它永远不会减少，因为正在使用的变量`checkForCollision()`不是在 while 循环中检查的变量。

在`run()`中，这：

```
int Turns = NTURNS; 
```

需要是：

```
Turns = NTURNS; 
```

# ios - 意外委派更改

> ID：11624580
> 
> 赞同：0
> 
> 时间：2012-07-24T05:19:30.297
> 
> 标签：ios, objective-c, delegates

我有一个委托 ExampleDelegate，我有一个 UITableViewController 和详细 UIViewController 都实现了该委托：

```
@interface ClassA : UITableViewController <ExampleDelegate> 
```

和：

```
@interface ClassB : UIViewController <ExampleDelegate> 
```

并委托：

```
@protocol ExampleDelegate <NSObject>

-(void)notifyUser;

@end

@interface Example : NSObject

@property (nonatomic, retain) id delegate;

-(id)initWithDelegate:(id<ExampleDelegate>) delegate;

@end 
```

起初，我从 ClassA 初始化委托的实例并且它工作正常，但是一旦我导航到 ClassB，当我回到 ClassA 时，我也在为委托创建一个实例，委托实例从 ClassB 中保留，所以ClassB 中的函数总是被调用，而不是 ClassA 的函数。谁能指出我做错了什么以及如何让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:31:47.417

您需要确保在不需要代表时将其取消 - 这将帮助您实现两件事：

1.  向正确的类传递它在可见时需要处理的正确委托。
2.  防止崩溃，以便当一个类被解除分配并被定义为委托时，您可能会收到“发送到解除分配实例的消息”崩溃。

在您的情况下，一旦 ClassB 回到 ClassA，您必须确保 ClassA 定义了该委托并且 ClassB 的委托属性为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:38:44.470

您是否打算让 B 类成为 A 类的委托，以便它可以使用该`-notifyUser`方法进行回调？如果是这种情况，则不需要初始化程序，并且应该将类 B 上的委托属性声明为...

```
@property (assign, nonatomic) id <ExampleDelegate> delegate; 
```

然后，如果我没听错的话，当您创建详细控制器（B 类）时，您会将其`delegate`属性设置为`self`（A 类）。现在，当 B 类需要与 A 类进行通信时，它只需要`-notifyUser`像这样调用它的委托...

```
// Something happened that you want to communicate back up the chain
[self.delegate notifyUser]; 
```

当您使用此模式时，协议通常在类上声明，该类也实现了要设置的属性，在本例中为 B 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:37:44.370

**编辑：** 在这两个类中，我都将委托声明为`strong`变量，当我通过一些文档时需要声明它`weak`，因此通过更改它可以解决问题。

并感谢您提供的所有答案，这对您有很大帮助。

# php - PHP：$_SESSION 不能在一个页面中多次使用？

> ID：11624585
> 
> 赞同：0
> 
> 时间：2012-07-24T05:19:56.673
> 
> 标签：php, list, session, while-loop, repeat

这可能是一个愚蠢的问题，对任何令人困惑的句子感到抱歉。我不知道我是否可以很好地解释这个问题以使您理解，但`$_SESSION`似乎无法在一个页面上重复多次。

```
session_start();
while (list($a, $b) = each($_SESSION['temp']))
  echo "<li>$a - $b</li>"; 
```

上面的代码没问题，但是如果我`$_SESSION['temp']`在下面的同一页面上，那么它什么也不显示......

```
session_start();
while (list($a, $b) = each($_SESSION['temp']))
  echo "<li>$a - $b</li>";
while (list($c, $d) = each($_SESSION['temp']))
  echo "<li>$c - $d</li>";                            /* <=== nothing shown :( */ 
```

要从中获取值，`$_SESSION['temp'],`我需要给它一个新名称：

```
session_start();

$temp = $_SESSION['temp'];                            /* <== new name */
while (list($a, $b) = each($_SESSION['temp']))
  echo "<li>$a - $b</li>";
while (list($c, $d) = each($temp))
  echo "<li>$c - $d</li>";                            /* <=== now shown :) */ 
```

你能告诉我为什么`$_SESSION['temp']`不能在同一页面上使用两次或多次吗？有没有更好的方法来获得价值`$_SESSION['temp']`？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:32:18.933

[http://php.net/manual/en/function.each.php](http://php.net/manual/en/function.each.php)

从数组中返回当前键值对并推进数组游标。

在 each() 执行后，数组光标将留在数组的下一个元素上，或者如果它到达数组的末尾，则超过最后一个元素。如果要`reset()`使用 each 再次遍历数组，则必须使用。

```
session_start();
while (list($a, $b) = each($_SESSION['temp']))
  echo "<li>$a - $b</li>";

reset($_SESSION);

while (list($c, $d) = each($_SESSION['temp']))
  echo "<li>$c - $d</li>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:41:27.133

另一个答案是正确的，但有更好的方法：

```
foreach ($_SESSION['temp'] as $a => $b) {
    // do what you wanted with each item
};
// repeat the code here 
```

foreach 循环使用后不需要重新设置，因此更容易使用（http://php.net/manual/en/control-structures.foreach.php）：

> 当 foreach 首次开始执行时，内部数组指针会自动重置为数组的第一个元素。这意味着您不需要在 foreach 循环之前调用 reset()。

# java - Mockito：在 void 方法上填充不同的值

> ID：11624588
> 
> 赞同：4
> 
> 时间：2012-07-24T05:20:07.610
> 
> 标签：java, unit-testing, mockito

我正在使用 Mockito 进行单元测试。我需要模拟一个填充一些输入的 void 方法。 **非常非常天真的例子：**

```
class Something {
   AnotherThing thing = new AnotherThing();
   public int doSomething(Stuff stuff)
   {
      thing.doThing(stuff);
      if(thing.getName().equals("yes")){
        return 1;
      }
      else {
        return 2;
      }
   }
}

class AnotherThing() {
   public void doThing(Stuff stuff){
       if(stuff.getName().equals("Tom")) {
          stuff.setName("yes");
       }
       else {
          stuff.setName("no");
       }
   }
}

class Stuff()
{
   String name;
   // name getters and setters here
} 
```

在这种情况下，我会尝试模拟`AnotherThing`测试`Something`。

但是，我在我正在测试的类中多次调用这个 void 方法。`Answer`每次调用时我都需要不同的“ ”。我的意思是，我想每次调用 void 方法来做不同的事情。

我查看了 API，但找不到解决方案。Mockito 甚至可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:47:48.940

你需要的是一个 Mockito`Answer`对象。这是一个包含少量功能的对象，您可以在调用模拟方法时运行这些功能。查看 Mockito 文档以`doAnswer`获取更多详细信息；但基本上你想要的是这样的。

```
 doAnswer(new Answer<Object>(){
        @Override
        public Object answer(InvocationOnMock invocation){
           Object[] arguments = invocation.getArguments();
           Stuff argument = (Stuff) arguments[0];
           if(stuff.getName().equals("Tom")) {
              stuff.setName("yes");
           }
           else {
              stuff.setName("no");
           }
           return null;
        }
     }).when(mockObject).doThing(any(Stuff.class)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-02T16:09:47.493

有一个[更简单的方法](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#doNothing())：

```
doNothing().doNothing().doThrow(new RuntimeException()).when(mock).someVoidMethod(); 
```

这样，对方法的多次调用可以做不同的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T06:09:30.207

Mockito 让您可以存根连续调用。我认为这就是你所需要的。这是[mockito 文档](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#10)中必要部分的链接。

你可以这样写：

```
Mockito.when(mockAnotherThing.doThing(stuff)).thenReturn("yes").thenReturn("no"); 
```

在第一次调用期间这个模拟之后将返回“是”，然后在第二次 - “否”。

顺便说一句，我认为您需要像这样更改示例代码（在其他情况下它将不起作用）：

```
class AnotherThing() {
   public String doThing(Stuff stuff){
       if(stuff.getName().equals("Tom")) {
         return "yes";
       }
       else {
          return "no";
       }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T06:25:08.457

您不能使用 equals ，因为返回类型为 void 要么将 doThing() 的返回类型更改为 String ，然后像这样模拟

```
 Anotherthing anotherthing = mock(Anotherthing.class)
 when(anotherThing.doThing(isA(Stuff.class))).thenReturn("yes").thenReturn("no"); 
```

你可能想多次模拟这个，否则在 2 次连续调用后最后一个存根值（“否”被返回）；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T09:40:15.020

为什么需要不同`Answer`？您可以使用相同的：

```
doAnswer(new Answer<Object>(){
    private int call;
    @Override
    public Object answer(InvocationOnMock invocation){
        ...
        call = call + 1;
        if (call % 2 == 0) {
        //do something
        } else {
        //another behavior 
        }
    }
 }).when(mockObject).doThing(any(Stuff.class)); 
```

# android - OnPause 状态强制终止 Android 应用程序

> ID：11624589
> 
> 赞同：0
> 
> 时间：2012-07-24T05:20:16.683
> 
> 标签：android, exception-handling

我是 Android 开发的新手。我创建了一个小应用程序，我已经在我的设备中启动了该应用程序，它运行良好。在某些状态之后，我点击了“主页”按钮，因此 Activity 应该进入 onPause() 状态，然后我使用其他一些应用程序。我的问题是它在强制移动 onStop() 方法并关闭 Android 应用程序后将活动保持在后台近 45 分钟。当我再次回到家并单击图标而不是调用 restart() 方法时它正在调用 onCreate() 方法。

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:23:50.797

在`onPause()`你可以打电话`Activity_name.this.finish()`

您可能想了解更多关于[Activity 生命周期的信息](http://developer.android.com/training/basics/activity-lifecycle/index.html)

# joomla - Joomla - 我如何添加自定义反馈和联系我们页面？

> ID：11624591
> 
> 赞同：-2
> 
> 时间：2012-07-24T05:20:25.680
> 
> 标签：joomla, contacts, joomla2.5

我是 joomla 的初学者，在一个 joomla 网站上，我想创建两个自定义表单，即联系我们和反馈表单。我怎样才能添加这个表格？我想在页脚菜单中提供此链接。

我有一组用于此表单的自定义字段..任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:35:27.870

您可以使用 ChronoForms，这是最流行的 joomla 扩展之一来创建自定义表单

根据您的 joomla 版本从此处下载适当的软件包 [http://www.chronoengine.com/downloads.html](http://www.chronoengine.com/downloads.html)

~~您还可以在此处查看有关如何使用此扩展程序的教程 [http://www.chronoengine.com/tutorials/154-v4-tutorials.html](http://www.chronoengine.com/tutorials/154-v4-tutorials.html)~~ ---*编辑：过时的链接，404*

# google-maps - 从数据库中搜索半径

> ID：11624593
> 
> 赞同：0
> 
> 时间：2012-07-24T05:20:50.193
> 
> 标签：google-maps, google-maps-api-3

我有一个澳大利亚账户地址数据库。我需要构建一个解决方案，用户可以选择一个邮政编码或郊区，谷歌地图查询数据库以查找距离邮政编码/郊区 50 公里半径范围内的帐户，并在地图上为这些边界内的每个帐户显示标记。有人可以帮我吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:57:34.150

请参阅[文档的文章部分](https://developers.google.com/maps/articles/)，有[一篇文章如何构建](https://developers.google.com/maps/articles/phpsqlsearch_v3)应该适用的商店定位器（如果不是代码，则是概念）。

# ant - 排除使用ant的junit测试的setup方法

> ID：11624594
> 
> 赞同：0
> 
> 时间：2012-07-24T05:20:51.827
> 
> 标签：ant, junit

嗨，我是 junit 和 ant 的新手。

我想阻止执行 JUnit @Before* 注释方法。

蚂蚁的“排除”可能吗？

是否有其他可能阻止这些带注释的方法执行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:36:06.773

不，你不能用 Ant 的排除来做到这一点。

您可以使用 Ant 更改所有文件中的注释。

[http://ant.apache.org/manual/Tasks/replace.html](http://ant.apache.org/manual/Tasks/replace.html)

```
<replace dir="${tests}" token="@Before" value="@BeforeREMOVED">
  <include name="**/*.java"/>
  <exclude name="**/*Test*"/>
</replace> 
```

您可以根据需要调整/省略包含和排除标签以匹配您想要的文件。

您可以随时更改文件

```
<replace dir="${tests}" token="@BeforeREMOVED" value="@Before">
  <include name="**/*.java"/>
  <exclude name="**/*Test*"/>
</replace> 
```

否则，您可以使用覆盖方法的新类来扩展测试。似乎这可能是很多工作。

# iphone - 如何在 iOS 5.1 中启用新的表情符号键盘？

> ID：11624596
> 
> 赞同：1
> 
> 时间：2012-07-24T05:21:00.943
> 
> 标签：iphone, ios5, uikeyboard, emoji

iOS 5.0 及更高版本配备标准表情符号键盘。但是应用商店中的一些应用在 iOS 5.1 中启用了一组新的和不同的表情符号。

[http://www.youtube.com/watch?v=IHGu0JgZ9X4](http://www.youtube.com/watch?v=IHGu0JgZ9X4)

有谁知道如何做到这一点？

我搜索了很多，可能在 PList 中可以添加一些键，就像它可以在 iOS 5.0 之前添加一样，但我找不到。

# firefox - Watir-webdriver 不存储所有 cookie

> ID：11624597
> 
> 赞同：1
> 
> 时间：2012-07-24T05:21:02.743
> 
> 标签：firefox, cookies, watir-webdriver

当我在 Firefox (V-12) 上转到以下链接时，我的 Ubuntu 机器上的浏览器允许我正常登录。

[https://r.espn.go.com/members/v3_1/login?language=en&forwardUrl=&appRedirect=http%3A%2F%2Fgames.espn.go.com](https://r.espn.go.com/members/v3_1/login?language=en&forwardUrl=&appRedirect=http%3A%2F%2Fgames.espn.go.com)

但是，如果我使用 watir-webdriver，我会收到消息：“必须启用 Cookie 才能登录。”

以下是使用 Watir 重现此问题的代码：

```
require 'watir-webdriver'
browser = Watir::browser.new
browser.goto "https://r.espn.go.com/members/v3_1/login?language=en&forwardUrl=&appRedirect=http%3A%2F%2Fgames.espn.go.com" 
```

您会注意到浏览器在“电子邮件地址或会员名称”字段下方显示“必须启用 Cookie”错误消息。当我查看存储的 cookie 时，我注意到并非所有以正常模式存储的 cookie 都可用。我通过在存储的 cookie 中搜索“go.com”对此进行了比较。

知道什么会导致使用相同浏览器在两种模式之间存储的 cookie 中的差异吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:21:58.117

与 . 没有问题或差异`watir-webdriver`。这里发生的事情是网站编码方式的结果。

您正在访问的页面（[https://r.espn.go.com/members/v3_1/login?language=en&forwardUrl=&appRedirect=http%3A%2F%2Fgames.espn.go.com](https://r.espn.go.com/members/v3_1/login?language=en&forwardUrl=&appRedirect=http%3A%2F%2Fgames.espn.go.com)）旨在作为一个覆盖在[http://espn.go.com](http://espn.go.com)上。编写该站点的代码的人假定，在主页面被点击后，总能访问覆盖页面。因此，主页 ( [http://espn.go.com](http://espn.go.com) ) 设置了一个 cookie 以测试您的用户代理是否启用了 cookie。然后，带有登录表单的覆盖页面会检查测试 cookie 是否存在，如果不存在，则显示您看到的警告。

重要的是要了解`watir-webdriver`每个新浏览器实例默认为一个干净的配置文件。这意味着浏览器没有您的任何 cookie、扩展、偏好或浏览历史记录。因为干净的配置文件从未访问过[http://espn.go.com](http://espn.go.com)来接收测试 cookie，所以正在显示警告。

有两种方法可以避免此警告：

1.  您可以在登录页面之前访问主页，如下所示：

    ```
    require 'watir-webdriver'
    browser = Watir::Browser.new
    browser.goto "espn.go.com"
    browser.goto "https://r.espn.go.com/members/v3_1/login?language=en&forwardUrl=&appRedirect=http%3A%2F%2Fgames.espn.go.com" 
    ```

2.  或者，您可以使用默认的 Firefox 配置文件，该配置文件（可能）已经具有测试 cookie：

    ```
    require 'watir-webdriver'
    browser = Watir::Browser.new :firefox, :profile => "default"
    browser.goto "https://r.espn.go.com/members/v3_1/login?language=en&forwardUrl=&appRedirect=http%3A%2F%2Fgames.espn.go.com" 
    ```

希望有帮助！

# xcode - iOS模拟器中的情节提要没有改变

> ID：11624599
> 
> 赞同：2
> 
> 时间：2012-07-24T05:21:37.917
> 
> 标签：xcode, storyboard

我是 xcode 的新手，并且正在使用故事板使用 xcode 制作一些东西，以尝试显示一个使用 NSUserDefaults 保存 int 的高分，因此我为分数创建了一个新的视图控制器。但是分数视图就像游戏屏幕一样，即使我有不同的.h，敌人也会在屏幕上移动。
因为我不知道自己在做什么，所以我改变了这个（可能不应该）

```
@interface ViewHighScore : ViewController 
```

进入

```
@interface ViewHighScore : UIViewController 
```

在 .h 中，敌人停止了下来，但是现在当我在情节提要中添加一些东西并运行时，无论我在什么视图上，它都不会显示。所以我把它改回来了，敌人再次在屏幕上移动，但我跑的时候仍然没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:33:56.213

首先，尝试在 Storyboard 中打开错误的视图控制器并重置自定义类。确保它没有从`ViewHighScore`. 由于您更改了类型，您的 View Controller 类可能已更改。

如果这不起作用，请尝试使用`⇧</kbd> + `⌘</kbd> + `K` combination.``

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T08:47:50.413

我已经解决了同样的问题。尝试使用模拟器数据删除目录 ~/Library/Application\ Support/iPhone\ Simulator/

# android - 以用户定义的频率同步选定的帐户

> ID：11624604
> 
> 赞同：3
> 
> 时间：2012-07-24T05:22:06.720
> 
> 标签：android, sync, android-syncadapter

我正在开发一个以用户定义的频率同步所选帐户的 android 应用程序。

```
AccountManager manager = (AccountManager) getSystemService(ACCOUNT_SERVICE);
Account[] list = manager.getAccounts();
Pattern emailPattern = Patterns.EMAIL_ADDRESS;
for(i=0;i<AcntCount;i++)
    for (Account account : list) 
        if (emailPattern.matcher(account.name).matches())  
            if(account.name.matches(syncSettings.getString("Account"+i.toString(), null)))
                //ContentResolver.addPeriodicSync(account, authority, extras, pollFrequency) 
```

应该在. `authority`_ 我必须为此编写一个同步适配器吗？`extras``addPeriodicSync()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T14:32:05.603

是的。您必须编写一个 SyncAdapter。addPeriodicSync() 专门用于告诉 ContentResolver 使 SyncAdapter 在计时器上触发。

你需要什么权限？好吧，SyncAdapters 在（帐户，权限）对上工作。

该帐户指定了特定的登录名——例如，如果您有多个 gmail 地址，则可能有多个。

权威机构会告诉你数据的类型——例如，使用 gmail 帐户，你可能正在同步……邮件、联系人、日历、财务等……所以这会告诉你数据的*类型*和绑定的服务帐户。

这对一起提供给 SyncAdapter -- 更具体地说，您在系统上有一堆同步适配器（它们*定义*了可用于同步的权限），并且在 PeriodicSync 触发时查找正确的同步适配器。

因此，如果您正在编写与您自己的自定义服务器同步的自己的应用程序，您将编写一个知道如何读取和存储您的架构的 SyncAdapter，并且您将定义一个权限。这些只是一个字符串，通常采用 java-classpath 样式。--“com.example.SyncAdapterSample”

阅读[为什么 ContentResolver.requestSync 不触发同步？](https://stackoverflow.com/questions/5253858/why-does-contentresolver-requestsync-not-trigger-a-sync/5255360#5255360)对于获得工作 SyncAdapter 所需的所有步骤。这绝对是你想走的路。设置它的步骤很多，但是一旦框架在那里，它会让你的生活变得更加轻松。

现在 - 额外。这些只是*如何*完成定期同步的一些选项。首先，您应该对默认设置没问题。然后深入[研究文档](http://developer.android.com/reference/android/content/ContentResolver.html#addPeriodicSync%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle,%20long%29)。例如，额外的 SYNC_EXTRAS_EXPEDITED 表示这是一个高优先级的更新，应该立即同步——通常，调度程序会等待一两分钟，以便它可以批量请求（并节省电池，因为所有的无线电都没有时间，但仅限于集中爆发）。通常，在您的 SyncAdapter 变得比简单的基线复杂得多之前，您无需担心额外的问题。

# android - 我如何解决 numberformatexception 错误

> ID：11624605
> 
> 赞同：0
> 
> 时间：2012-07-24T05:22:20.673
> 
> 标签：android, parsing, error-handling, number-formatting

我正在尝试从编辑文本中解析双精度，但我不断收到数字格式异常错误。

我最初尝试过这个...

```
premiumvalue = Double.parseDouble(premium.getText().toString());         
amountweightvalue = Double.parseDouble(amountweight.getText().toString()); 
```

然后尝试了这个......无济于事。

```
try{
    premiumvalue = Double.parseDouble(premium.getText().toString());
} catch (final NumberFormatException e) {
    premiumvalue = 0;
}
try{
    amountweightvalue = Double.parseDouble(amountweight.getText().toString());
} catch (final NumberFormatException e) {
    premiumvalue = 0;
} 
```

我是一个菜鸟，任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:24:55.207

我已经测试了您的代码自己测试了您的代码，并找到了以下可能性`NumberFormatException`：

1.  如果`EditText`值为空白，`So apply condition for EditText blank value.`
2.  如果`EditText`值只是点（。），`So apply condition for EditText dot value.`

在你的评论中你说你正在使用这个

```
String text = premium.getText().toString();

if(text.equals(".")||text.equals("-.")||text.equals(""))
 { 
    premium.setText("0");
 } 
```

所以我的意思是

1.  **`premium`您是否对两者和EditText都使用相同的东西`amountweight`，然后将字符串解析为双精度？**
2.  以及为什么需要检查 '_' 的条件，因为如果您`android:inputType="numberDecimal"`为 EditText 设置属性，那么 EditText 只接受 0-9 和 . 价值。
3.  `android:inputType="numberDecimal"`如果您使用属性，则不需要修剪 EditText 值，因为 Edittext 不接受空格。
4.  不需要检查`null`条件，因为`EditText`从不返回`null`值。

我已经对您的代码进行了很多测试，但没有找到`NumberFormatException`我是否遵循上述几点。

# c# - 在哪些情况下我应该使用密封类？

> ID：11624607
> 
> 赞同：0
> 
> 时间：2012-07-24T05:22:25.950
> 
> 标签：c#, .net, oop

> **可能的重复：**
> [为什么要封类？](https://stackoverflow.com/questions/268251/why-seal-a-class)

我还没有看到很多带有这个修饰符的类，但是我想知道这在哪种情况下会有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:28:09.993

如果您不希望任何人扩展课程。

经典示例是一个 String 类，它是自给自足的并且实现了享元模式，如果有人可以覆盖它的方法/属性，它可能很容易被破坏。

如果您提供不需要更改的 API，出于上述任何原因，您希望使用密封类。

# javascript - javascript中getElementById和createElement的区别？

> ID：11624609
> 
> 赞同：-6
> 
> 时间：2012-07-24T05:22:42.480
> 
> 标签：javascript, html

我从几天开始就在使用 javascript。我在 getElementById 和 createElement 之间感到困惑。

**提前致谢**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T05:25:38.070

他们是两个不同的东西

**getElementById**使用 DOM 中存在的 id 选择元素

但

**createElement**创建一个可以插入 DOM 的新元素

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T05:35:44.503

主要区别在于`getElementById`它将通过其 ID 属性从 DOM 中获取一个元素，`createElement`并将创建一个全新的 DOM 元素。

假设您有一个包含以下 HTML 的页面：

```
<!doctype html>

<html>
  <head>
  </head>

  <body>
    <div>Hello, World!</div>
    <div id="message">What a nice day!</div>
  </body>
</html> 
```

然后你有一些像这样的 JavaScript 代码：

```
document.getElementById("message") 
```

您将检索`<div>`具有`id`属性的元素`"message"`。

现在，假设您想向 HTML 页面添加一个新元素，然后您将使用该`createElement`函数。

```
var newEl = document.createElement("div") 
```

当然，从示例中，我们还将新元素存储在名为 的变量中`newEl`。

现在，要实际添加新元素，我们必须调用`appendChild`任何 DOM 元素。为了简单起见，我们将简单地附加到`<body>`标签。

```
document.body.appendChild(newEl) 
```

现在，您的页面应该（至少在浏览器的脑海中）看起来像这样：

```
<!doctype html>

<html>
  <head>
  </head>

  <body>
    <div>Hello, World!</div>
    <div id="message">What a nice day!</div>
    <div></div>
  </body>
</html> 
```

# c++ - Directx 顶点颜色

> ID：11624610
> 
> 赞同：0
> 
> 时间：2012-07-24T05:22:52.820
> 
> 标签：c++, colors, directx, vertex

代码按要求在这里：

```
void MakeTeapotRed()
{
    D3DXCreateTeapot(Device, &Teapot, 0);
} 
```

那么如何改变茶壶的顶点颜色呢？如果你的思维材料，我已经知道了，我只需要知道颜色顶点，这应该比材料简单得多。我可以使用顶点缓冲区和索引缓冲区手动布局的几何图形来做到这一点，你如何将它应用于已经填写了那些 VB 和 IB 信息的网格？

```
class ColorVertex
{
public:
ColorVertex(){}
ColorVertex(float x, float y, float z, D3DCOLOR color)
{
    m_x = x;
    m_y = y;
    m_z = z;
    m_color = color;
}
float m_x, m_y, m_z;            // 3d coordinates
D3DCOLOR m_color;
static const DWORD FVF;
};
const DWORD ColorVertex::FVF = D3DFVF_XYZ | D3DFVF_DIFFUSE; 
```

我刚刚发布的代码是名为 ColorVertex 的 Vertex 信息类。如您所见，代码是为顶点颜色设置的，不需要或必须没有灯光才能正常工作的颜色，如 FVF = D3DFVF_XYZ | **D3DFVF_DIFFUSE**。

同样，人们似乎很难理解这个问题，我需要更新顶点的颜色以包含颜色，例如可以通过 D3DCreate[objects] 创建的对象，如茶壶、球体、网格。D3DCreateTeapot（参数的东西）。请逐行布局代码，我是directx的菜鸟，而不是c ++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:33:34.737

[查看有关访问顶点缓冲区的部分。](http://www.mvps.org/directx/articles/d3dxmesh.htm)你必须[让顶点声明](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205739%28v=vs.85%29.aspx)结束检查它以找出每个顶点的数据是如何布局的。

一旦确定了颜色的存储方式，就可以遍历每个顶点并更改值。当您完成并解锁网格的顶点缓冲区时，您就完成了。

> 我只需要知道颜色顶点应该比材质简单得多

我不得不不同意，材料看起来会容易得多。

# mysql - 在所有字段、表和数据库中搜索字符串的 MySQL 工具

> ID：11624611
> 
> 赞同：2
> 
> 时间：2012-07-24T05:23:06.817
> 
> 标签：mysql

> **可能重复：**
> [MySQL - 在数据库中每个表的所有字段中搜索](https://stackoverflow.com/questions/639531/mysql-search-in-all-fields-from-every-table-from-a-database)

我正在寻找一些 MySQL GUI 工具，它在所有数据库/表/字段中搜索字符串。我试过 Toad、MySQL Workbench 和 HeidiSQL，似乎都没有这个功能。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:30:29.780

尝试[dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)中的 Find Object 功能。

启动 dbForge Studio，运行`Find Object`窗口（菜单 Database\Find Object...），输入`Find What`字符串，勾选`Search table data`，选择组合框中的所有数据库`Database`，然后单击`Search`按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:26:31.140

[phpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)。我尝试在数据库中的所有表中进行搜索。它用于在数据库或其子集中全局搜索。

# android - 懒惰的 imageLoader 在设备中不起作用？

> ID：11624615
> 
> 赞同：0
> 
> 时间：2012-07-24T05:23:44.773
> 
> 标签：android, lazy-loading, image-loading

我正在使用`imageLoader`类在后台加载图像，之后我在模拟器中设置图像它的工作。在设备中它不显示`lazy downloaded`图像。

```
private void queuePhoto(String url, Activity activity, ImageView imageView) 
{
    photosQueue.Clean(imageView);
    PhotoToLoad p=new PhotoToLoad(url, imageView);
    synchronized(photosQueue.photosToLoad)
    {
        photosQueue.photosToLoad.push(p);
        photosQueue.photosToLoad.notifyAll();
    }
    (photoLoaderThread.getState()==Thread.State.NEW)
    photoLoaderThread.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:07:16.117

这是我的[ImageLoader](https://gist.github.com/3168495)版本，每个 ImageView 都带有进度条。然后将动画应用于过渡。我还删除了 SD 卡缓存选项。你应该看到我修改的大部分内容。

```
/*
 * Copyright (c)2012 Poohdish Rattanavijai
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.robgthai.lib.util;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.util.HashMap;
import java.util.Stack;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;
import android.widget.ProgressBar;

import com.robgthai.lib.R;

/**
 * This class help handling the Lazyload of the image from given URL
 * @author Poohdish Rattanavijai
 *
 */
public class ImageLoader {
    private static final String TAG = ImageLoader.class.getSimpleName();
    private static final int LOG_LEVEL = (HelperUtil.FORCE_EVERY_LOG? Log.DEBUG: Log.INFO);
    //the simplest in-memory cache implementation. This should be replaced with something like SoftReference or BitmapOptions.inPurgeable(since 1.6)
    private HashMap<String, Bitmap> cache=new HashMap<String, Bitmap>();
    private File cacheDir;
    private Context context;

    final int stub_id=R.drawable.ic_refresh; // Default icon to display before the image finish loaded

    public ImageLoader(Context context){
        //Make the background thead low priority. This way it will not affect the UI performance
        photoLoaderThread.setPriority(Thread.NORM_PRIORITY-1);
        this.context = context;
        cacheDir=new File(context.getCacheDir(),"LazyList");

        //Find the dir to save cached images
//        if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
//            cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"LazyList");
//        else
//        cacheDir=context.getCacheDir();
        if(!cacheDir.exists())
            cacheDir.mkdirs();
    }

    /**
     * Method for lazy-loading images
     * @param url URL of the image
     * @param activity Activity context, currently unused
     * @param imageView ImageView to display the image
     * @param progressBar ProgressBar for displaying while the image is being load
     */
    public void DisplayImage(String url, Activity activity, ImageView imageView, ProgressBar progressBar)
    {
        if(cache.containsKey(url)) //If image is already in the cache
            imageView.setImageBitmap(cache.get(url));
        else
        {
            queuePhoto(url, activity, imageView, progressBar);
            imageView.setImageResource(stub_id);
        }    
    }

    /**
     * Method for lazy-loading images with the image sliding in from the left replacing the progress bar
     * @param url URL of the image
     * @param context Activity context, currently unused
     * @param imageView ImageView to display the image
     * @param progressBar ProgressBar for displaying while the image is being load
     */
    public void DisplayImage(String url, Context context, ImageView imageView, ProgressBar progressBar)
    {
        if(cache.containsKey(url)){
            if(LOG_LEVEL <= Log.DEBUG)Log.d(TAG, "Found in cache: " + url + "[" + cache.get(url) + "]");
            imageView.setImageBitmap(cache.get(url));

            Animation exitAnim = AnimationUtils.loadAnimation(ImageLoader.this.context, R.anim.list_image_slide_left_exit);
            exitAnim.setFillAfter(true);
            exitAnim.setFillEnabled(true);

            Animation enterAnim = AnimationUtils.loadAnimation(ImageLoader.this.context, R.anim.list_image_slide_left_enter);
            enterAnim.setFillAfter(true);
            enterAnim.setFillEnabled(true);
            progressBar.setVisibility(View.GONE);
            imageView.setVisibility(View.VISIBLE);

            progressBar.startAnimation(exitAnim);
            imageView.startAnimation(enterAnim);
//            if(bitmap!=null){
//                imageView.setImageBitmap(bitmap);
//                if(null != progress){
//                  progress.startAnimation(exitAnim);
//                  progress.setVisibility(View.GONE);
//                }
//                imageView.startAnimation(enterAnim);
////                imageView.setVisibility(View.VISIBLE);
//            }else{
//                if(null != progress){
//                  progress.startAnimation(enterAnim);
////                    progress.setVisibility(View.VISIBLE);
//                    imageView.setVisibility(View.GONE);
//                }else{
//                    imageView.setImageResource(stub_id);
//                    imageView.startAnimation(enterAnim);
////                    imageView.setVisibility(View.VISIBLE);
//                }
//            }
        }else
        {
            queuePhoto(url, context, imageView, progressBar);
            imageView.setImageResource(stub_id);
        }    
    }

    /**
     * Queue the image to download
     * @param url
     * @param context
     * @param imageView
     * @param progressBar
     */
    private void queuePhoto(String url, Context context, ImageView imageView, ProgressBar progressBar)
    {
        //This ImageView may be used for other images before. So there may be some old tasks in the queue. We need to discard them. 
        photosQueue.Clean(imageView);
        PhotoToLoad p= null;
        if(null != progressBar){
            p = new PhotoToLoad(url, imageView, progressBar);
        }else{
            p = new PhotoToLoad(url, imageView);
        }
        synchronized(photosQueue.photosToLoad){
            photosQueue.photosToLoad.push(p);
            photosQueue.photosToLoad.notifyAll();
        }

        //start thread if it's not started yet
        if(photoLoaderThread.getState()==Thread.State.NEW)
            photoLoaderThread.start();
    }

    /**
     * Queue the image to download
     * @param url
     * @param context
     * @param imageView
     * @param progressBar
     */    
    private void queuePhoto(String url, Activity activity, ImageView imageView, ProgressBar progressBar)
    {
        //This ImageView may be used for other images before. So there may be some old tasks in the queue. We need to discard them. 
        photosQueue.Clean(imageView);
        PhotoToLoad p= null;
        if(null != progressBar){
            p = new PhotoToLoad(url, imageView, progressBar);
        }else{
            p = new PhotoToLoad(url, imageView);
        }
        synchronized(photosQueue.photosToLoad){
            photosQueue.photosToLoad.push(p);
            photosQueue.photosToLoad.notifyAll();
        }

        //start thread if it's not started yet
        if(photoLoaderThread.getState()==Thread.State.NEW)
            photoLoaderThread.start();
    }

    /**
     * Load image into the view preferably from Cache, otherwise url.
     * @param url
     * @return
     */
    private Bitmap getBitmap(String url) 
    {
        //identify images by hashcode. Not a perfect solution, good for the demo.
        String filename=String.valueOf(url.hashCode());
        File f=new File(cacheDir, filename);

        //from cache
        Bitmap b = decodeFile(f);
        if(LOG_LEVEL <= Log.DEBUG)Log.d(TAG, "Looking for Image in cache");
        if(b!=null){
            if(LOG_LEVEL <= Log.DEBUG)Log.d(TAG, "Image found");
            return b;
        }

        //from web
        try {
            if(LOG_LEVEL <= Log.DEBUG)Log.d(TAG, "Image not found, download from: " + url);
            Bitmap bitmap=null;
            InputStream is=new URL(url).openStream();
            OutputStream os = new FileOutputStream(f);
            HelperUtil.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public ProgressBar progress;
        public PhotoToLoad(String u, ImageView i, ProgressBar p){
            url=u; 
            imageView=i;
            progress = p;
        }
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    PhotosQueue photosQueue=new PhotosQueue();

    public void stopThread()
    {
        photoLoaderThread.interrupt();
    }

    //stores list of photos to download
    class PhotosQueue
    {
        private Stack<PhotoToLoad> photosToLoad=new Stack<PhotoToLoad>();

        //removes all instances of this ImageView
        public void Clean(ImageView image)
        {
            for(int j=0 ;j<photosToLoad.size();){
                if(photosToLoad.get(j).imageView==image)
                    photosToLoad.remove(j);
                else
                    ++j;
            }
        }
    }

    /**
     * Controller of the image loader 
     * @author poohdishr
     *
     */
    class PhotosLoader extends Thread {
        public void run() {
            try {
                while(true)
                {
                    //thread waits until there are any images to load in the queue
                    if(photosQueue.photosToLoad.size()==0)
                        synchronized(photosQueue.photosToLoad){
                            photosQueue.photosToLoad.wait();
                        }
                    if(photosQueue.photosToLoad.size()!=0)
                    {
                        PhotoToLoad photoToLoad;
                        synchronized(photosQueue.photosToLoad){
                            photoToLoad=photosQueue.photosToLoad.pop();
                        }
                        Bitmap bmp=getBitmap(photoToLoad.url);
                        cache.put(photoToLoad.url, bmp);
                        Object tag=photoToLoad.imageView.getTag();
                        if(tag!=null && ((String)tag).equals(photoToLoad.url)){
                            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad.imageView, photoToLoad.progress);
                            Activity a=(Activity)photoToLoad.imageView.getContext();
                            a.runOnUiThread(bd);
                        }
                    }
                    if(Thread.interrupted())
                        break;
                }
            } catch (InterruptedException e) {
                //allow thread to exit
            }
        }
    }

    PhotosLoader photoLoaderThread=new PhotosLoader();

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        ImageView imageView;
        ProgressBar progress;
        public BitmapDisplayer(Bitmap b, ImageView i, ProgressBar p){bitmap=b;imageView=i;progress=p;}
        public void run()
        {
            Animation exitAnim = AnimationUtils.loadAnimation(ImageLoader.this.context, R.anim.list_image_slide_left_exit);
            exitAnim.setFillAfter(true);
            exitAnim.setFillEnabled(true);

            Animation enterAnim = AnimationUtils.loadAnimation(ImageLoader.this.context, R.anim.list_image_slide_left_enter);
            enterAnim.setFillAfter(true);
            enterAnim.setFillEnabled(true);
            if(bitmap!=null){
                imageView.setImageBitmap(bitmap);
                if(null != progress){
                    progress.startAnimation(exitAnim);
                    progress.setVisibility(View.GONE);
                }
                imageView.startAnimation(enterAnim);
                imageView.setVisibility(View.VISIBLE);
            }else{
                if(null != progress){
                    progress.startAnimation(enterAnim);
//                  progress.setVisibility(View.VISIBLE);
                    imageView.setVisibility(View.GONE);
                }else{
                    imageView.setImageResource(stub_id);
                    imageView.startAnimation(enterAnim);
//                    imageView.setVisibility(View.VISIBLE);
                }
            }
        }
    }

    public void clearCache() {
        //clear memory cache
        cache.clear();

        //clear SD cache
        File[] files=cacheDir.listFiles();
        for(File f:files)
            f.delete();
    }

} 
```

# android - dlopen 和 System.loadLibrary() 之间的区别

> ID：11624618
> 
> 赞同：1
> 
> 时间：2012-07-24T05:23:53.627
> 
> 标签：android, android-ndk, java-native-interface, dlopen

`System.loadLibrary()`在 Android 中，使用Java 加载的库和使用`dlopen()`本*机*代码加载的库之间有区别吗？我可以直接以标准方式直接调用动态加载的库中的函数`JNI`，还是必须使用`dlsym()`并创建一堆*存根*来检索函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T05:59:26.360

`System.loadLibrary()`在 Dalvik VM 中`dlopen()`加载库，只需在本机进程中加载​​库。如果你想从 Java 访问你的库，你需要编写一些胶水 JNI 代码。你如何实现这些并不重要：你可以直接链接，或者使用`dlopen()`等。

# java - 在 Java 中将字符串转换为日期对象

> ID：11624625
> 
> 赞同：3
> 
> 时间：2012-07-24T05:24:36.433
> 
> 标签：java, date

我需要将以下字符串解析为java中的日期对象：

```
String time = "Jul 24 2012 05:19:34";
DateFormat df = new SimpleDateFormat("MM dd yyyy HH:mm:ss");
Date date = df.parse(time); 
```

代码抛出此异常：

```
Unparseable date: "Jul 24 2012 05:19:34" 
```

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T05:25:36.117

做了

```
DateFormat df = new SimpleDateFormat("MMM dd yyyy HH:mm:ss"); 
```

笔记：`MMM`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T05:27:07.910

格式字符串应该是 -`"MMM dd yyyy HH:mm:ss"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T07:58:27.610

'MMM' 用于获取前三个字母中的月份名称 'MM' 用于获取年份的月份编号

字符串时间 = "2012 年 7 月 24 日 05:19:34";

Format formatter = new SimpleDateFormat("MMM dd yyyy HH:mm:ss");//MMM return Jul

formatter = new SimpleDateFormat("MM"); // MM 返回 07

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T05:28:16.420

Date.parse 方法已被弃用，但仍然可以正常工作：

```
 Date d = new Date(Date.parse(time));
    System.out.println(d); 
```

但是，如果您希望继续您的方法，请在格式的 MM 部分再添加一个 M（现在是 MMM）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T05:43:32.843

格式应该是 - “MMM dd yyyy HH:mm:ss”而不是“MM dd yyyy HH:mm:ss”。你可以参考[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)。标记分钟 mm 和月份 mmm 之间的差异

# java - 将 JPL 输出转换为 Java 中的字符串

> ID：11624626
> 
> 赞同：0
> 
> 时间：2012-07-24T05:24:43.833
> 
> 标签：java, prolog, swi-prolog, jpl

我通过 JPL 在 java 中使用 Prolog，我有一些带有格式谓词的谓词：

```
format("Result ~p, ",[X]), 
```

在 java 中使用 JPL 格式的输出到 java 中的控制台输出，我怎样才能将此结果检索到 java 中的字符串变量中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:02:13.803

我不知道 JPL 但你不能用[`sformat`](http://www.csse.uwa.edu.au/programming/swi-prolog/sec-3.35.html#sformat/3)它格式化成一个字符串变量，然后通过 JPL 检索它吗？

```
?- sformat(S, "Result ~p", [X]). 
```

# android - super 的 onCreate(0 是否在本身没有 onCreate() 的扩展类中调用？

> ID：11624627
> 
> 赞同：0
> 
> 时间：2012-07-24T05:24:48.083
> 
> 标签：android, oncreate

我有一个像这样扩展 Activity 的类：

```
public abstract class AndroidGame extends Activity implements Game 
```

这个类有一个这样的 onCreate() 方法：

```
public void onCreate(Bundle savedInstanceState) {
 // I do stuff here
} 
```

然后我创建了另一个扩展 AndroidGame 的类，如下所示：

```
public class ScatmanNomGame extends AndroidGame {   
    // The loading screen will load all the assets of our game
    @Override
    public Screen getStartScreen() {
        return new LoadingScreen(this);     
    }    
} 
```

好的，这是我的问题。我的默认启动活动（在我的清单文件中）设置为首先加载 ScatmanNomGame。启动我的程序后，Launcher 活动是 ScatmanNomGame。但请注意 ScatmanNomGame 没有`onCreate()`方法。是否会简单地启动此活动（ScatmanNomGame）将其称为超类的`onCreate`方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:41:50.013

是的，它会，阅读继承。
继承允许子类的对象使用/访问公共和受保护的字段和方法。因此，如果您没有覆盖子类中的任何方法，并且在子类的对象上调用相同的方法将调用超类的方法。

# php - Run PHP pages without an extension

> ID：11624639
> 
> 赞同：2
> 
> 时间：2012-07-24T05:25:43.807
> 
> 标签：php, apache, .htaccess, mod-rewrite

I want to run my PHP web pages on an apache web server without the `.php` extension. So I added the following code:

```
RewriteEngine on
RewriteBase /
Rewritecond %{REQUEST_URI} !(^/?.*\..*$) [NC]
RewriteRule (.*)$ $1.php [NC] 
```

in the `.htaccess` file. This solves my problem but another problem arises. I cannot view the content of any directory (i.e. the file contained in the directory). Please provide me an alternate `RewriteRule` without this problem.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T05:30:54.700

You need to make sure that the request URI points to an existing resource if you append the.php to the end of it:

```
RewriteEngine on
RewriteBase /
Rewritecond %{REQUEST_URI} !(^/?.*\..*$) [NC]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule (.*)$ $1.php [NC] 
```

the line `RewriteCond %{REQUEST_FILENAME}.php -f` checks if a ".php" is appended to the requested URI, it mapes to an existing file (`-f`).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T05:33:43.390

You can use this code, it is working on my website:

```
RewriteEngine On
#unless directory, remove trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1 [R=301,L]

#resolve .php file for extensionless php urls
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]

#redirect external .php requests to extensionless url
#RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^/]+/)*[^.#?\ ]+\.php([#?][^\ ]*)?\ HTTP/
#RewriteRule ^(([^/]+/)*[^.]+)\.php $1 [R=301,L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T05:31:12.127

Try setting [`DirectoryIndex`](http://www.htaccess-guide.com/directoryindex-uses/) above your `RewriteCond`:

```
DirectoryIndex index.php 
```

# ruby-on-rails-3 - 未定义的方法“load_routes！” 在 rails3 中使用带有 mongoid 的设计

> ID：11624645
> 
> 赞同：0
> 
> 时间：2012-07-24T05:26:29.517
> 
> 标签：ruby-on-rails-3, devise, mongoid

我有一个使用 MongoDB 的 rails 应用程序。为了与 MongoDB 连接，我使用了 mongoid gem，现在我想集成设计以进行身份​​验证。

我在用着

```
gem 'mongoid-devise'
gem 'devise' 
```

在`bundle install`我这样做之后：

```
rails g devise:install 
```

但它会引发如下错误：

```
/home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/activesupport-3.2.6/lib/active_support/core_ext/module/aliasing.rb:31:in `alias_method': undefined method `load_routes!' for class `ActionDispatch::Routing::RouteSet' (NameError)
from /home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/activesupport-3.2.6/lib/active_support/core_ext/module/aliasing.rb:31:in `alias_method_chain'
from /home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/mongoid-devise-1.0.1/lib/devise/rails/routes.rb:16:in `<class:RouteSet>'
from /home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/mongoid-devise-1.0.1/lib/devise/rails/routes.rb:2:in `<module:Routing>'
from /home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/mongoid-devise-1.0.1/lib/devise/rails/routes.rb:1:in `<top (required)>'
from /home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/mongoid-devise-1.0.1/lib/devise/rails.rb:1:in `require'
from /home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/mongoid-devise-1.0.1/lib/devise/rails.rb:1:in `<top (required)>'
from /home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/mongoid-devise-1.0.1/lib/devise.rb:253:in `require'
from /home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/mongoid-devise-1.0.1/lib/devise.rb:253:in `<top (required)>'
from /home/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `require'
from /home/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /home/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `each'
from /home/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `block in require'
from /home/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `each'
from /home/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `require'
from /home/user/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler.rb:119:in `require'
from /home/user/Banter_IT/Project_Concept/config/application.rb:11:in `<top (required)>'
from /home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/railties-3.2.6/lib/rails/commands.rb:24:in `require'
from /home/user/.rvm/gems/ruby-1.9.3-p194@new_banter_it/gems/railties-3.2.6/lib/rails/commands.rb:24:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

请帮助我尽快弄清楚该怎么做...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:29:43.167

不需要使用`mongoid-devise`是非常旧的，这就是为什么它不与 rails3 一起运行

`devise`正如你在这里看到的那样，它只支持 mongoid 就足够[了](https://github.com/plataformatec/devise)。

# android - 字符串“X-XX XXXXX”的Android正则表达式

> ID：11624649
> 
> 赞同：0
> 
> 时间：2012-07-24T05:26:40.873
> 
> 标签：android, regex

如何为 String 制作正则表达式`B-SL 55885`？实际上我想验证车辆的车牌号。

一般来说：`X-XX XXXXX`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:31:20.507

这应该这样做：

```
^[A-Z]-[A-Z]{2} \d{5}$ 
```

请注意，这是您要求的：正则表达式。当您将其表示为用于 a 的字符串文字时`Pattern`，它看起来像这样：

```
"^[A-Z]-[A-Z]{2} \\d{5}$" 
```

这是一个微不足道的正则表达式问题。您应该花一些时间阅读[文档`Pattern`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)并为自己编写小示例以便学习。这将比等待其他人完成工作更快。

# asp.net - SQLExpress - 如何为 sql 数据文件设置用户名/密码

> ID：11624655
> 
> 赞同：3
> 
> 时间：2012-07-24T05:27:34.717
> 
> 标签：asp.net, sql-server-express

我有一个连接到 SQLServer Express 数据库文件的网站，用于成员资格和数据存储。所以我有两个 .mdf 文件。以下是连接字符串：

```
public static string ASPNETDB = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ASPNETDB.mdf;Integrated Security=True;User Instance=True;User ID=;Password=; ";
public static string Dok = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\dok.mdf;Integrated Security=True;User Instance=True;User ID=;Password=; "; 
```

现在，在删除并重新安装网站后，我在建立连接的部分遇到了许多错误。以下是错误：

```
Unable to open the physical file "C:\Inetpub\wwwroot\BSHHD\App_Data\aspnetdb_log.ldf". 
Operating system error 5: "5(failed to retrieve text for this error. Reason: 1815)".
Cannot open user default database. Login failed.
Login failed for user 'NT AUTHORITY\NETWORK SERVICE'.
File activation failure. The physical file name "C:\Inetpub\wwwroot\BSHHD\App_Data  
\aspnetdb_log.ldf" may be incorrect.
The log cannot be rebuilt because there were open transactions/users when the database 
was shutdown, no checkpoint occurred to the database, or the database was read-only.   
This error could occur if the transaction log file was manually deleted or lost due to 
a hardware or environment failure. 
```

这很奇怪，因为我没有对网站进行任何更改。我只是从 IIS 中删除它并重新安装它。有人建议我设置用户名和密码并删除集成安全性。但我不知道如何为数据文件设置用户名/密码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T06:05:54.377

**使用SQL Management Studio**将数据库 ASPNETDB.mdf 添加到 SQL Express 您可以从 Microsoft Web 平台安装程序下载它。

打开 SQL Management Studio 右键单击​​数据库 > 附加 > 添加 mdf 和日志文件（最好将它们放在其他位置，然后是站点目录。

在 MSSQL 中，您可以轻松设置用户名和密码，打开 SQL 管理工作室。

登录到管理工作室：展开安全>登录>写入点击登录“新登录”

登录名：例如 logmein 使其成为 SQL Server 身份验证 设置密码 删除强制

在左侧，您将拥有**User Mapping** 选择要连接的数据库并授予写入权限，例如，如果此用户可以写入数据库，您将希望将其设置为 datawriter 或 db_owner ，这是更高的权限：

数据库内置角色是：

public – 默认的授权集

db_owner – 允许对指定数据库执行任何操作

db_oddladmin – 允许创建或修改数据库的新对象（所谓的 DDL 操作）；您应该注意用户不必拥有

db_owner 授权这样做

db_datareader – 允许读取任何表

db_datawriter – 允许写入任何表

db_denydatareader – 禁止读取表（公开授权外卖）

dDb_denydatawriter – 禁止写表

将数据库添加到 SQL 后：可以在 web.config 中添加

```
<add name="ASPNETDB" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=ASPNETDB.mdf;User ID=yourusername;Password=yourpassword" providerName="System.Data.SqlClient" />
<add name="Dok " connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=dok.mdf;User ID=yourusername;Password=yourpassword" providerName="System.Data.SqlClient" /> 
```

或者，如果您更喜欢将它放在上面的代码中，它也可以工作。

问候，加布里埃尔

# openerp - 不同的 openerp 启动板存储库之间有什么区别？

> ID：11624659
> 
> 赞同：2
> 
> 时间：2012-07-24T05:28:09.310
> 
> 标签：openerp, repository, launchpad

谁能告诉我这些存储库之间的区别

lp:openobject-插件

lp:openobject-addons/extra-trunk

lp:~openerp-community/openobject-addons/trunk-addons-community

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:37:43.420

`openobject-addons`包含由 OpenERP SA 维护的“认证”插件。

`extra-trunk`包含第 3 方插件。它是从 2008 年拆分出来`openobject-addons`的。里面的插件质量参差不齐，有些插件根本没有维护，但很多都是有用的。要为该分支做出贡献，您需要提出合并提案并获得 OpenERP SA 的批准。

`trunk-addons-community`似乎是最近的一个包含新插件的分支。如果您是 openerp-community 团队的成员，您可以为它做出贡献。

当前的趋势是将最有用的插件从`extra-trunk`关注较小的新分支转移到新分支，以简化维护。[您可以在apps.openerp.com](http://apps.openerp.com/)浏览最新的插件，也可以[注册自己的插件](http://apps.openerp.com/send_branch/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:40:50.857

1.  **lp:openobject-addons** : 是 OpenERP 的官方插件库，主要包含经过认证的模块，定期更新和长期支持。
2.  **lp:openobject-addons/extra-trunk**：主干分叉分支的方式。它包含来自 OpenERP 非认证模块的模块以及允许 OpenERP 合作伙伴在其中提交的模块。但是模块的质量取决于贡献者的选择。与在插件中提交相比，它需要更少的权限。
3.  **lp:~openerp-community/openobject-addons/trunk-addons-community**：这纯粹是一个社区分支。如果您是 OpenERP 社区团队的一员，您可以按照自己的方式进行游戏。

谢谢

# codenameone - 代号一中的按钮作为图像展开以适应容器大小

> ID：11624661
> 
> 赞同：2
> 
> 时间：2012-07-24T05:28:15.133
> 
> 标签：codenameone

我正在开发一个[代号为 one的应用程序](http://www.codenameone.com)

现在我有一个表格。

1）我将布局设置为网格布局。网格为 2 X 3（2 行和 3 列）

2）我添加了 6 个按钮，这些按钮占据了 6 个单元格。每个按钮都有与之关联的图像和文本。

3）我以这样的方式对按钮进行了样式设置，它们没有边框。所以现在，按钮并没有真正具有按钮的外观和感觉。它们只是看起来像下面有一些文字的图像。

4）现在这些图像不会占据整个屏幕。因此，如果我有一个屏幕非常大的安卓，我会在第一行看到 3 张图像，一个非常大的间隙，然后在第二行看到 3 张图像。

5）我希望，如果我不小心点击了第一行和第二行之间的任何地方（在两行按钮/图像之间的间隙中），什么都不会发生。

6）但是，问题是，网格占据了整个屏幕。因此，即使我在两行按钮/图像中单击间隙，单个单元格也非常大，以至于每当我在间隙内单击时；我实际上仍在单击网格的单元格内。现在此单元格捕获事件并将其传输到该单元格中的按钮并发生一些操作。

7）我不希望这种情况发生。我希望只有当用户将手指放在图像上时才会发生这种情况。

我该怎么做呢？该解决方案应该可以在具有小/大/中尺寸屏幕的手机上正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:34:08.043

根据您想要实现的目标，您有两种选择：

1.  将 GridLayout Container 放置在边框布局容器的 NORTH 部分中。这将使图像与顶部对齐。您可以轻松地使用层次结构/类型的布局（这就是 GUI 构建器非常酷的原因）。

2.  将每个按钮放在一个流布局容器中，这将使其保持其首选大小。您可以将流布局设置为居中对齐等。

# machine-learning - 如何进行 NLP 任务以识别意图和插槽

> ID：11624672
> 
> 赞同：24
> 
> 时间：2012-07-24T05:29:23.127
> 
> 标签：machine-learning, nlp, artificial-intelligence, text-processing

我想编写一个程序来询问有关天气的问题。我应该开始研究哪些算法和技术。

例：芝加哥这个周末会晴吗？我想知道**意图**= 天气查询，**日期**= 本周末，**位置**= 芝加哥。

用户可以以多种形式表达相同的查询。

我想解决一些受限制的形式并寻找有关如何开始的想法。解决方案需要足够好。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-29T16:07:42.147

由于您的输入是自然语言形式，因此开始研究它的最佳方法是首先解析句子结构。并通过 NER（命名实体识别器）运行句子。

解析句子可以让你想出一些规则，例如，某些类型的依赖总是给你意图。运行 NER 可以让您识别地点和日期。如果想出对意图进行分类的规则并不简单，您也可以使用分类器使用从输入句子中形成的特征向量来做同样的事情。事实上，一些解析器输出可以用于制定特征向量。

对于这两者，都存在来自[斯坦福 NLP 集团的软件](http://nlp.stanford.edu/)

也许你可以看看：

*   [斯坦福解析器](http://nlp.stanford.edu/software/lex-parser.shtml)
*   [斯坦福NER标记器](http://nlp.stanford.edu/software/CRF-NER.shtml)

解析句子后，您就有意图和其他信息来回答问题。

例如：我接受了你的一句话“芝加哥这个周末会是晴天吗？” 并通过[Online Stanford NER Tagger](http://nlp.stanford.edu:8080/ner/process)运行它。这给了我以下信息：

```
Will it be sunny this <DATE>weekend</DATE> in <LOCATION>Chicago</LOCATION> 
```

现在您已经确定了日期和地点。

我希望这有帮助。我知道答案很笼统，可能对刚开始有所帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-29T21:35:25.680

我认为这个 api 正是你正在寻找的。使用起来既简单又棒。

[https://wit.ai/](https://wit.ai/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-03T06:49:32.260

此外，[https://www.luis.ai/](https://www.luis.ai/)是一个很好的 NLP 框架实现。他们有一个 API 以及一个 nuget SDK。我们已经使用它们一段时间了。它们比我们看到的其他选择便宜。即wit.ai。

所以你的例子 -

例如：本周末芝加哥是否会晴天 -> 将映射到名为 WeatherQuery 的 LUIS 意图。date -> 将映射到预构建的 LUIS dateTime 实体位置 -> 芝加哥 -> 将映射到预构建的 LUIS 实体 -> 我认为的地理或地址。

# java - Android中的Java.lang.verify错误

> ID：11624674
> 
> 赞同：3
> 
> 时间：2012-07-24T05:29:35.050
> 
> 标签：java, android, addthis

我正在尝试将*AddThisSdk*与我的项目集成。我的项目名称是**AddThisDemo**。AddThis sdk 作为一个项目提供。我已将它作为库包含在我的项目中。我还添加了 OAuth 所需的 jar 文件（signpost 和 commomsHttp）。当我运行这个项目时，它会导致强制关闭。错误显示如下：

```
07-24 10:35:45.470: E/AndroidRuntime(234): Uncaught handler: thread main exiting due to uncaught exception
07-24 10:35:45.490: E/AndroidRuntime(234): java.lang.VerifyError: com.addthis.demo.HomeActivity
07-24 10:35:45.490: E/AndroidRuntime(234):  at java.lang.Class.newInstanceImpl(Native Method)
07-24 10:35:45.490: E/AndroidRuntime(234):  at java.lang.Class.newInstance(Class.java:1479)
07-24 10:35:45.490: E/AndroidRuntime(234):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-24 10:35:45.490: E/AndroidRuntime(234):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
07-24 10:35:45.490: E/AndroidRuntime(234):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
07-24 10:35:45.490: E/AndroidRuntime(234):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
07-24 10:35:45.490: E/AndroidRuntime(234):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
07-24 10:35:45.490: E/AndroidRuntime(234):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-24 10:35:45.490: E/AndroidRuntime(234):  at android.os.Looper.loop(Looper.java:123)
07-24 10:35:45.490: E/AndroidRuntime(234):  at android.app.ActivityThread.main(ActivityThread.java:4363)
07-24 10:35:45.490: E/AndroidRuntime(234):  at java.lang.reflect.Method.invokeNative(Native Method)
07-24 10:35:45.490: E/AndroidRuntime(234):  at java.lang.reflect.Method.invoke(Method.java:521)
07-24 10:35:45.490: E/AndroidRuntime(234):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-24 10:35:45.490: E/AndroidRuntime(234):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-24 10:35:45.490: E/AndroidRuntime(234):  at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以指出原因是什么，或者任何人都可以告诉我何时发生*java.lang.verify*错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:43:49.093

将此“HomeActivity”的条目放在您的 manifest.xml 文件中，然后再试一次......可能它有效......

# database - 数据库透视 - 目的是什么？

> ID：11624676
> 
> 赞同：14
> 
> 时间：2012-07-24T05:30:06.440
> 
> 标签：database, pivot

为什么有人想要将列转换为行（即旋转）？它解决了哪个问题？

我找到了一些链接，但没有得到令人满意的问题答案。

[http://codeghar.wordpress.com/2007/11/03/pivot-tables/](http://codeghar.wordpress.com/2007/11/03/pivot-tables/)

[http://msdn.microsoft.com/en-us/library/ms177410%28SQL.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms177410%28SQL.105%29.aspx)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-03-27T08:31:25.023

关于您的问题“为什么有人想将列转换为行（即旋转）？它解决了哪个问题？”

这不是“数据在视觉上如何”的问题，而是“如何组织和处理数据”的问题。即：

在大多数数据库中，行表示“记录 -（实体、事件等）”，列表示“字段（该实体的属性）”。例如，下面是数据的典型 DB 表示；

```
Person      |  Birth | Height |
-------------------------------
John        |   1980 |  1.82  |
Smith       |   1987 |  2.02  | 
```

这意味着；每列代表“人员”的特定属性，当您选择特定列时，您将获得所有人员的特定属性。这样，一列就是一个“维度”，所有值都具有相同的单位（数据类型），都是日期，都是长度等。

然而，在金融建模中，以相反的方式表示数据非常方便。例如，“每月现金流”表中的一个典型如下所示。

```
Item         |  Jan |   Feb |
-----------------------------
Sales        | $100 |  $150 |
Tax          | -$50 |  -$15 | 
```

请注意，电子表格中的这种表格不符合数据库格式，列标题是时间，但列中的值是货币值，冲突，我们不能用这些列进行计算。

如果我们 PIVOT 这张表，它变成

```
Date         | Sales |  Tax  |
------------------------------
Jan          |  $100 |  -$50 |
Feb          |  $150 |  -$15 | 
```

现在，列维度（标题）和其中的数据是一致的。日期列包含所有日期，其他列包含所有 $ 数字。我们可以取一列并对其进行向量运算。

这是旋转解决的一个问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-24T05:40:02.250

通常，这是因为布局在报表或透视后的用户界面中效果更好。

规范化数据库上的数据可能会产生多条记录“形状”的数据，用户界面希望将这些记录视为字段。数据规范化很棒，但是当以简洁、自然的格式表示数据时，通常需要进行数据透视。

[这里的例子](http://spreadsheetpage.com/index.php/tip/creating_a_database_table_from_a_summary_table/)。

当然，我链接到的示例是 Excel，而不是真正的数据库，但图片描述了一个示例，其中透视数据看起来更自然，并且概念是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T05:33:37.030

以这个为例如何？

[如何使用 T-SQL 透视数据](http://archive.msdn.microsoft.com/SQLExamples/Wiki/View.aspx?title=PIVOTData)

> 数据提取中的一个常见期望是能够将多行的输出转换为单行中的多列。SQL Server 2005/2008 提供了使用查询中的 PIVOT 运算符执行此操作的能力。

**编辑**

假设您有一个表格，按日期存储每位客户的销售额

就像是

```
Table
- SaleDate
- CustomerID
- SaleAmount 
```

使用 PIVOT，您可以按月/季度/年显示每个客户的总销售额

```
 |Client A|Client B|Client C
--------------------------------
2007| 100    | 0      | 150
2008| 0      | 200    | 160
2009| 110    | 180    | 100 
```

这纯粹是为了总结的目的。

# java - 如何获取 HashMap 的重复键值对？

> ID：11624679
> 
> 赞同：3
> 
> 时间：2012-07-24T05:30:16.290
> 
> 标签：java, hashmap

```
HashMap<Integer,Integer> hashmapsample= new HashMap<Integer, Integer>(); 
```

我可以有像

```
(1 , 7)
(2 , 4)
(4 , 5)
(3,  7) 
```

不会有任何重复的 Keys 。只能出现重复值

我想选择具有重复值的 (Key,Value) 对。

如果我将 Duplicate (Key,Value) 作为另一个 Hashmap，那就太好了。我该怎么做。？

我期待输出

```
 (1 , 7)
 (3,  7) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T05:43:05.730

这个怎么样？

```
public HashMap getDuplicateValues(HashMap in)
{
   // Clone input HashMap because we're removing stuff from it
   in = (HashMap)in.clone();
   HashMap rval = new HashMap();
   Object[] keys = in.keySet().toArray();

   // iterate through all keys
   for(int x=0;x<keys.length;x++) {
      Object value = in.get(keys[x]);
      in.remove(keys[x]);
      // if value is in input HashMap, store it in duplicate HashMap because it has another value
      if(in.containsValue(value)) {
         rval.put(keys[x],value);
      }
      // if value is in duplicate HashMap, store it also because it HAD another value earlier
      if(rval.containsValue(value)) {
         rval.put(keys[x],value);
      }
   }

   return(rval);
} 
```

此方法将返回输入 HashMap 中所有重复值的键/值对。

* * *

测试代码：

```
 HashMap map = new HashMap();

  map.put("1","2");
  map.put("2","1");
  map.put("3","8");
  map.put("4","4");
  map.put("5","6");
  map.put("6","8");
  map.put("7","3");
  map.put("8","4");
  map.put("9","4");

  HashMap dups = getDuplicateValues(map);

  System.out.println("MAP = "+map);
  System.out.println("DUP = "+dups); 
```

输出：

```
MAP = {3=8, 2=1, 1=2, 7=3, 6=8, 5=6, 4=4, 9=4, 8=4}
DUP = {3=8, 6=8, 4=4, 9=4, 8=4} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:35:19.613

您不能有重复的键。把它想象成一堆盒子，每个盒子里都有**一个**点。您可以在盒子 1 中放置一个锤子，在盒子 2 中放置一个键盘，在盒子 3 中放置一个手电筒，在盒子 4 中放置另一个锤子。但是，您不能在盒子 1 中放置两个锤子或一个锤子和一个键盘，因为它只能有空间容纳一件东西。如果您尝试在已满的盒子中添加其他东西，它会自动将其取出，并丢弃旧的东西。那么就没有办法访问它了

我想我可能误解了这个问题；你能更好地解释你试图检索/做什么吗？

好的，这里有一些代码可以从本质上反转您的 HashMap：

```
public static void main(String[] args) throws ParseException {
    HashMap start = new HashMap();
    start.put(1, 7);
    start.put(2, 4);
    start.put(4, 5);
    start.put(3, 7);

    HashMap<Object, ArrayList<Object>>  reversed = reverse(start);

    //Some code to print out our results
    Set<Entry<Object, ArrayList<Object>>> set = reversed.entrySet();

    for(Entry entry : set) {
        System.out.println(entry.getKey() + ": " + entry.getValue());
        //if we want here, we can check if the size of the value (The 
    //ArrayList of old keys who has a value of this guy's key) is over 1, if so,
    //there were duplicates of some value (stored to this entry's key)
    }
}
public static HashMap<Object, ArrayList<Object>> reverse(HashMap map) {
    HashMap<Object, ArrayList<Object>> newMap = 
            new HashMap<Object, ArrayList<Object>>();

    Set<Entry> set = map.entrySet();
    for(Entry entry : set) {
        ArrayList list = new ArrayList();
        if(newMap.containsKey(entry.getValue())) {
            list=newMap.get(entry.getValue());
        }
        list.add(entry.getKey());
        newMap.put(entry.getValue(), list);
    }
    return newMap;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T05:38:33.657

```
 HashMap<Integer, Integer> sample = new HashMap<Integer, Integer>();
    Integer valueForSearch = 7;
    HashMap<Integer, Integer> result = new HashMap<Integer, Integer>();
    for (Entry<Integer, Integer> entry : sample.entrySet()) {
        if (entry.getValue().equals(valueForSearch)) {
            result.put(entry.getKey(), entry.getValue());
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T05:53:32.873

只是为了给大纲...

```
 Object array[] = hashmapsample.keySet().toArray();
  for(int i=0;i<array.length();i++)
  {
         if(hashmapsample.containsValue(hashmapsample.get(array[i]){
    //Put that particular value in another hashmap here
    }     
  } 
```

啊..我可以在这篇文章中找到更详细的答案：D 然后忽略我的..

# java - 今天可能取代 JXTA 和 P2P 的标准是什么？

> ID：11624680
> 
> 赞同：0
> 
> 时间：2012-07-24T05:30:21.673
> 
> 标签：java, android, p2p

我已经构建了一个即时消息应用程序 + 语音聊天（目前正在开发中），它被设计为集中式网络。但是当我第一次开始构建这个应用程序时，我有兴趣将它构建到 P2P 网络中，但是我缺乏有关 P2P 的参考和信息，而且我担心客户端的安全性，所以我只是决定将我的应用程序构建到集中式网络中。最近我发现了一个名为 JXTA 的 P2P 相关框架，它促使我将当前的应用程序转换为 P2P。但我的问题是，大多数开发人员和组织仍然使用 JXTA 等框架吗？还是被其他东西取代了？今天的标准是什么？（我知道 Torrent 是基于 P2P 的，但即使有今天，人们仍然开始将应用程序开发成 p2p 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:05:30.247

没有 P2P 标准。

JXTA 仍在生产中使用（我们使用它），但在 Oracle 出现 IP 问题后不再维护；学习曲线也相当陡峭。

对于即时通讯类型的网络，您应该查看[XMPP](https://developers.google.com/appengine/docs/java/xmpp/overview)

# c++ - 如何将前 256 个 ascii 字符存储在数组中？

> ID：11624682
> 
> 赞同：0
> 
> 时间：2012-07-24T05:30:27.477
> 
> 标签：c++, string, ascii

我正在尝试将前 256 个 ASCII 字符存储在字符串数组中。

我有这样的事情：

```
 string values[256];
   for (int i=0; i<256; i++){
        char temp = i;
        values[i] = temp;
   } 
```

但我似乎无法确切地弄清楚如何做到这一点。我得到的错误是：

```
 invalid conversion from 'char' to 'const char*' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T05:41:04.793

解决方案是这样做：

```
#include <string>

std::string values[256];
for (int i=0; i<256; i++){
  char temp = i;
  values[i] = temp;
} 
```

[从这里](http://ideone.com/mLwYP)可以看出，这段代码没有任何问题。我假设您有充分的理由保留 256 个单个字符的数组`std::strings`。

`std::string`有一个[赋值运算符](http://en.cppreference.com/w/cpp/string/basic_string/operator%3D)，它接受一个字符作为参数，所以上面的代码没有错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:04:48.367

这是c ++ 11中的一个衬里：

```
std::iota(std::begin(values), std::end(values), '\0'); 
```

iota 在`<algorithm>`header 中， begin 和 end 在`<iterator>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:36:25.440

实际上，当您声明这样一个字符串数据类型的数组时，它将创建 256 个不同的字符串，每个字符串都能够存储尽可能多的字符，因为它们可以放入计算机的内存中

并且每个变量like`values[i]`都是指向内存中字符串的指针，这就是错误的原因。字符到字符指针

这就是为什么我们需要单个字符数组`char values[256]`来使两边的数据类型相同。

但是如果您想以相同的方式执行此操作，则需要将 ascii 值转换为字符串。

................................................ 一个字符串是一个字符组合

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T06:39:36.517

我们有一个从 0 到 127 的标准 ASCII 字符集和一个从 128 到 255 的扩展 ASCII。

如果您可以说明将 256 个字符存储在字符串数组中的目的，我们可以指导更合适的 STL 或其他解决方案。

如果您真的想像数组一样使用它，为什么不简单地将它用作字符数组或字符的 std::vector。

如果您想使用 std::string，请尝试以下操作：

```
 string str;
   str.reserve(256);
   str.clear();
   string::iterator iter;
   for(i=0;i<256;i++)
     iter=str.insert(str.begin()+i,i);
   //Do something with str here. 
```

# windows - 使用 API 从我的应用程序监控 RAS 拨号连接

> ID：11624690
> 
> 赞同：1
> 
> 时间：2012-07-24T05:31:31.863
> 
> 标签：windows, winapi, serial-port, ras

我使用 RASDIAL 或 RASPHONE exe 创建了拨号连接。我希望我的应用程序监控已建立的连接，如果连接断开，我的应用程序应该退出。如何以编程方式管理这个？请建议我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:03:48.023

用于接收有关 RAS 连接和断开连接的基于事件的通知的正确 Win32 API 是 RasConnectionNotification。

这是一个链接： http: [//msdn.microsoft.com/en-us/library/aa376726 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa376726(VS.85).aspx)

如果您在 CodePlex 上使用 DotRas SDK，RasConnectionWatcher 会使用上述 API 处理这些通知。

```
using DotRas;

RasConnectionWatcher watcher = new RasConnectionWatcher();
watcher.Connected += (sender, e) => 
    { 
        // Connected! 
    };
watcher.Disconnected += (sender, e) => 
    { 
        // Disconnected! 
    }; 
```

您还可以通过设置 Handle 属性指定从 RasDial 返回的句柄以接收特定于该句柄的事件。

```
watcher.Handle = handle;
watcher.EnableRaisingEvents = true; 
```

如果您有兴趣，这里是 DotRas 的链接：http: [//dotras.codeplex.com](http://dotras.codeplex.com)

编辑：我只是想补充一点，如果您没有指定 DotRas 或 Win32 API 的句柄，您将收到来自机器上所有连接、断开连接和带宽添加/删除的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:44:54.623

我建议你使用一个线程来定期检查连接的状态。

这可以使用rasapi32.dll 中的[RasEnumConnections](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377284%28v=vs.85%29.aspx)来完成。此调用返回活动连接列表，然后您可以对其进行迭代以检查您打开的连接是否在其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:22:04.360

`lpvNotifier`该`RadDial`函数允许您传递一个[`RasDialFunc1`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377232%28v=vs.85%29.aspx)将接收有关连接生命周期的通知事件。（`RasGetConnectStatus`也可用于轮询）

# iphone - tesseract 库的理想图像是什么？

> ID：11624694
> 
> 赞同：6
> 
> 时间：2012-07-24T05:32:08.093
> 
> 标签：iphone, objective-c, ocr

我正在使用 tesseract 在我的项目中进行 OCR。我使用了 72 dpi 的图像。但它给我的输出远非准确。我在某处读到，输入 200 dpi 以上是很好的。但是 tesseract 库的标准图像配置（即大小、dpi、文件格式等）是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:11:06.057

由于字数限制，这是我回答的第二部分。

这是.mm

.m

```
/*
 *  Image.cpp
 *  ImageProcessing
 *
 *  
 *
 */
#include "Image.h"
#include <stack>

@implementation ImageWrapper

@synthesize image;
@synthesize ownsImage;

+ (ImageWrapper *) imageWithCPPImage:(Image *) theImage;
{
    ImageWrapper *wrapper = [[ImageWrapper alloc] init];
    wrapper.image=theImage;
    wrapper.ownsImage=true;
    return [wrapper autorelease];
}

+ (ImageWrapper *) imageWithCPPImage:(Image *) theImage ownsImage:(bool) ownsTheImage;
{
    ImageWrapper *wrapper = [[ImageWrapper alloc] init];
    wrapper.image=theImage;
    wrapper.ownsImage=ownsTheImage;
    return [wrapper autorelease];
}

- (void) dealloc
{
    // delete the image that we have been holding onto
    if(ownsImage) delete image;
    [super dealloc];
}

@end

void Image::initYptrs() {
    m_yptrs=(uint8_t **) malloc(sizeof(uint8_t *)*m_height);
    for(int i=0; i<m_height; i++) {
        m_yptrs[i]=m_imageData+i*m_width;
    }
}

Image::Image(ImageWrapper *other, int x1, int y1, int x2, int y2) {
    m_width=x2-x1;
    m_height=y2-y1;
    m_imageData=(uint8_t *) malloc(m_width*m_height);
    initYptrs();
    Image *otherImage=other.image;
    for(int y=y1; y<y2; y++) {
        for(int x=x1; x<x2; x++) {
            (*this)[y-y1][x-x1]=(*otherImage)[y][x];
        }
    }
    m_ownsData=true;
}

Image::Image(int width, int height) {
    m_imageData=(uint8_t *) malloc(width*height);
    m_width=width;
    m_height=height;
    m_ownsData=true;
    initYptrs();
}
// create an image from data
Image::Image(uint8_t *imageData, int width, int height, bool ownsData) {
    m_imageData=imageData;
    m_width=width;
    m_height=height;
    m_ownsData=ownsData;
    initYptrs();
}

Image::Image(UIImage *srcImage, int width, int height,  CGInterpolationQuality interpolation, bool imageIsRotatedBy90degrees) {
    if(imageIsRotatedBy90degrees) {
        int tmp=width;
        width=height;
        height=tmp;
    }
    m_width=width;
    m_height=height;
    // get hold of the image bytes
    m_imageData=(uint8_t *) malloc(m_width*m_height);
    CGColorSpaceRef colorSpace=CGColorSpaceCreateDeviceGray();
    CGContextRef context=CGBitmapContextCreate(m_imageData,  m_width, m_height, 8, m_width, colorSpace, kCGImageAlphaNone);
    CGContextSetInterpolationQuality(context, interpolation);
    CGContextSetShouldAntialias(context, NO);
    CGContextDrawImage(context, CGRectMake(0,0, m_width, m_height), [srcImage CGImage]);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);

    if(imageIsRotatedBy90degrees) {
        uint8_t *tmpImage=(uint8_t *) malloc(m_width*m_height);
        for(int y=0; y<m_height; y++) {
            for(int x=0; x<m_width; x++) {
                tmpImage[x*m_height+y]=m_imageData[(m_height-y-1)*m_width+x];
            }
        }
        int tmp=m_width;
        m_width=m_height;
        m_height=tmp;
        free(m_imageData);
        m_imageData=tmpImage;
    }
    initYptrs();
}

void Image::normalise() {
    int min=INT_MAX;
    int max=0;

    for(int i=0; i<m_width*m_height; i++) {
        if(m_imageData[i]>max) max=m_imageData[i];
        if(m_imageData[i]<min) min=m_imageData[i];
    }
    for(int i=0; i<m_width*m_height; i++) {
        m_imageData[i]=255*(m_imageData[i]-min)/(max-min);
    }
}

// copy a section of another image
ImageWrapper *Image::createImage(ImageWrapper *other, int x1, int y1, int x2, int y2)
{
    return [ImageWrapper imageWithCPPImage:new Image(other, x1, y1, x2, y2)];
}
// create an empty image of the required width and height
ImageWrapper *Image::createImage(int width, int height) {
    return [ImageWrapper imageWithCPPImage:new Image(width, height)];
}
// create an image from data
ImageWrapper *Image::createImage(uint8_t *imageData, int width, int height, bool ownsData) {
    return [ImageWrapper imageWithCPPImage:new Image(imageData, width, height, ownsData)];
}
// take a source UIImage and convert it to greyscale
ImageWrapper *Image::createImage(UIImage *srcImage, int width, int height, bool imageIsRotatedBy90degrees) {
    return [ImageWrapper imageWithCPPImage:new Image(srcImage, width, height, kCGInterpolationHigh, imageIsRotatedBy90degrees)];
}

void Image::extractConnectedRegion(int x, int y, std::vector<ImagePoint> *points) {
    (*points).push_back(ImagePoint(x,y));
    (*this)[y][x]=0;
    int left, right;
    left=x-1;
    right=x+1;
    while(left>=0 && (*this)[y][left]!=0) {
        (*this)[y][left]=0;
        (*points).push_back(ImagePoint(left,y));        
        left--;
    }
    while(right<m_width && (*this)[y][right]!=0) {
        (*this)[y][right]=0;
        (*points).push_back(ImagePoint(right,y));       
        right++;
    }
    for(int i=left; i<=right; i++) {
        if(i>=0 && i<m_width) {
            if(y>0 && (*this)[y-1][i]!=0) {
                extractConnectedRegion(i, y-1, points);
            }
            if(y<(m_height-1) && (*this)[y+1][i]!=0) {
                extractConnectedRegion(i, y+1, points);
            }
        }
    }
}

inline int findThresholdAtPosition(int startx, int starty, int size, Image* src) {
    int total=0;
    for(int y=starty; y<starty+size; y++) {
        for(int x=startx; x<startx+size; x++) {
            total+=(*src)[y][x];
        }
    }
    int threshold=total/(size*size);
    return threshold;
};

/*
ImageWrapper* Image::autoLocalThreshold() {
    const int local_size=10;
    // now produce the thresholded image
    Image *result=new Image(m_width, m_height);
    // process the image
    int threshold=0;
    for(int y=local_size/2; y<m_height-local_size/2; y++) {
        for(int x=local_size/2; x<m_width-local_size/2; x++) {
            threshold=findThresholdAtPosition(x-local_size/2, y-local_size/2, local_size, this);
            int val=(*this)[y][x];
            if(val>threshold*0.9)
                    (*result)[y][x]=0;
                else
                    (*result)[y][x]=255;
        }
    }
    return [ImageWrapper imageWithCPPImage:result];
}
*/

ImageWrapper* Image::autoLocalThreshold() {
    const int local_size=8;
    // now produce the thresholded image
    uint8_t *result=(uint8_t*) malloc(m_width*m_height);
    // get the initial total
    int total=0;
    for(int y=0; y<local_size; y++) {
        for(int x=0; x<local_size; x++) {
            total+=(*this)[y][x];
        }
    }
    // process the image
    int lastIndex=m_width*m_height-(m_width*local_size/2+local_size/2);
    for(int index=m_width*local_size/2+local_size/2; index<lastIndex; index++) {
        int threshold=total/64;
        if(m_imageData[index]>threshold*0.9)
            result[index]=0;
        else
            result[index]=255;
        // calculate the new total
        for(int index2=index-m_width*local_size/2-local_size/2; index2<index+m_width*local_size/2-local_size/2; index2+=m_width) {
            total-=m_imageData[index2];
            total+=m_imageData[index2+local_size];
        }
    }
    return Image::createImage(result, m_width, m_height, true);
}

ImageWrapper *Image::autoThreshold() {
    int total=0;
    int count=0;
    for(int y=0; y<m_height; y++) {
        for(int x=0; x<m_width; x++) {
            total+=(*this)[y][x];
            count++;
        }
    }
    int threshold=total/count;
    Image *result=new Image(m_width, m_height);
    for(int y=0; y<m_height; y++) {
        for(int x=0; x<m_width; x++) {
            if((*this)[y][x]>threshold*0.8) {
                (*result)[y][x]=0;
            } else {
                (*result)[y][x]=255;
            }
        }
    }
    return [ImageWrapper imageWithCPPImage:result];
}

#define NOEDGE 255
#define POSSIBLE_EDGE 128
#define EDGE 0

void non_max_supp(int *mag, int *gradx, int *grady, int nrows, int ncols,
             uint8_t *result) 
{
    int rowcount, colcount,count;
    int *magrowptr,*magptr;
    int *gxrowptr,*gxptr;
    int *gyrowptr,*gyptr,z1,z2;
    int m00,gx,gy;
    float mag1,mag2,xperp,yperp;
    uint8_t *resultrowptr, *resultptr;

    /****************************************************************************
     * Zero the edges of the result image.
     ****************************************************************************/
    for(count=0,resultrowptr=result,resultptr=result+ncols*(nrows-1); 
        count<ncols; resultptr++,resultrowptr++,count++){
        *resultrowptr = *resultptr = (unsigned char) 0;
    }

    for(count=0,resultptr=result,resultrowptr=result+ncols-1;
        count<nrows; count++,resultptr+=ncols,resultrowptr+=ncols){
        *resultptr = *resultrowptr = (unsigned char) 0;
    }

    /****************************************************************************
     * Suppress non-maximum points.
     ****************************************************************************/
    for(rowcount=1,magrowptr=mag+ncols+1,gxrowptr=gradx+ncols+1,
        gyrowptr=grady+ncols+1,resultrowptr=result+ncols+1;
        rowcount<nrows-2; 
        rowcount++,magrowptr+=ncols,gyrowptr+=ncols,gxrowptr+=ncols,
        resultrowptr+=ncols){   
        for(colcount=1,magptr=magrowptr,gxptr=gxrowptr,gyptr=gyrowptr,
            resultptr=resultrowptr;colcount<ncols-2; 
            colcount++,magptr++,gxptr++,gyptr++,resultptr++){   
            m00 = *magptr;
            if(m00 == 0){
                *resultptr = (unsigned char) NOEDGE;
            }
            else{
                xperp = -(gx = *gxptr)/((float)m00);
                yperp = (gy = *gyptr)/((float)m00);
            }

            if(gx >= 0){
                if(gy >= 0){
                    if (gx >= gy)
                    {  
                        /* 111 */
                        /* Left point */
                        z1 = *(magptr - 1);
                        z2 = *(magptr - ncols - 1);

                        mag1 = (m00 - z1)*xperp + (z2 - z1)*yperp;

                        /* Right point */
                        z1 = *(magptr + 1);
                        z2 = *(magptr + ncols + 1);

                        mag2 = (m00 - z1)*xperp + (z2 - z1)*yperp;
                    }
                    else
                    {    
                        /* 110 */
                        /* Left point */
                        z1 = *(magptr - ncols);
                        z2 = *(magptr - ncols - 1);

                        mag1 = (z1 - z2)*xperp + (z1 - m00)*yperp;

                        /* Right point */
                        z1 = *(magptr + ncols);
                        z2 = *(magptr + ncols + 1);

                        mag2 = (z1 - z2)*xperp + (z1 - m00)*yperp; 
                    }
                }
                else
                {
                    if (gx >= -gy)
                    {
                        /* 101 */
                        /* Left point */
                        z1 = *(magptr - 1);
                        z2 = *(magptr + ncols - 1);

                        mag1 = (m00 - z1)*xperp + (z1 - z2)*yperp;

                        /* Right point */
                        z1 = *(magptr + 1);
                        z2 = *(magptr - ncols + 1);

                        mag2 = (m00 - z1)*xperp + (z1 - z2)*yperp;
                    }
                    else
                    {    
                        /* 100 */
                        /* Left point */
                        z1 = *(magptr + ncols);
                        z2 = *(magptr + ncols - 1);

                        mag1 = (z1 - z2)*xperp + (m00 - z1)*yperp;

                        /* Right point */
                        z1 = *(magptr - ncols);
                        z2 = *(magptr - ncols + 1);

                        mag2 = (z1 - z2)*xperp  + (m00 - z1)*yperp; 
                    }
                }
            }
            else
            {
                if ((gy = *gyptr) >= 0)
                {
                    if (-gx >= gy)
                    {          
                        /* 011 */
                        /* Left point */
                        z1 = *(magptr + 1);
                        z2 = *(magptr - ncols + 1);

                        mag1 = (z1 - m00)*xperp + (z2 - z1)*yperp;

                        /* Right point */
                        z1 = *(magptr - 1);
                        z2 = *(magptr + ncols - 1);

                        mag2 = (z1 - m00)*xperp + (z2 - z1)*yperp;
                    }
                    else
                    {
                        /* 010 */
                        /* Left point */
                        z1 = *(magptr - ncols);
                        z2 = *(magptr - ncols + 1);

                        mag1 = (z2 - z1)*xperp + (z1 - m00)*yperp;

                        /* Right point */
                        z1 = *(magptr + ncols);
                        z2 = *(magptr + ncols - 1);

                        mag2 = (z2 - z1)*xperp + (z1 - m00)*yperp;
                    }
                }
                else
                {
                    if (-gx > -gy)
                    {
                        /* 001 */
                        /* Left point */
                        z1 = *(magptr + 1);
                        z2 = *(magptr + ncols + 1);

                        mag1 = (z1 - m00)*xperp + (z1 - z2)*yperp;

                        /* Right point */
                        z1 = *(magptr - 1);
                        z2 = *(magptr - ncols - 1);

                        mag2 = (z1 - m00)*xperp + (z1 - z2)*yperp;
                    }
                    else
                    {
                        /* 000 */
                        /* Left point */
                        z1 = *(magptr + ncols);
                        z2 = *(magptr + ncols + 1);

                        mag1 = (z2 - z1)*xperp + (m00 - z1)*yperp;

                        /* Right point */
                        z1 = *(magptr - ncols);
                        z2 = *(magptr - ncols - 1);

                        mag2 = (z2 - z1)*xperp + (m00 - z1)*yperp;
                    }
                }
            } 

            /* Now determine if the current point is a maximum point */

            if ((mag1 > 0.0) || (mag2 > 0.0))
            {
                *resultptr = (unsigned char) NOEDGE;
            }
            else
            {    
                if (mag2 == 0.0)
                    *resultptr = (unsigned char) NOEDGE;
                else
                    *resultptr = (unsigned char) POSSIBLE_EDGE;
            }
        } 
    }
}

void follow_edges(uint8_t *edgemapptr, int *edgemagptr, short lowval,
             int cols)
{
    int *tempmagptr;
    uint8_t *tempmapptr;
    int i;
    int x[8] = {1,1,0,-1,-1,-1,0,1},
    y[8] = {0,1,1,1,0,-1,-1,-1};

    for(i=0;i<8;i++){
        tempmapptr = edgemapptr - y[i]*cols + x[i];
        tempmagptr = edgemagptr - y[i]*cols + x[i];

        if((*tempmapptr == POSSIBLE_EDGE) && (*tempmagptr > lowval)){
            *tempmapptr = (unsigned char) EDGE;
            follow_edges(tempmapptr,tempmagptr, lowval, cols);
        }
    }
}

void apply_hysteresis(int *mag, uint8_t *nms, int rows, int cols,
                      float tlow, float thigh, uint8_t *edge)
{
    int r, c, pos, numedges, highcount, lowthreshold, highthreshold,hist[32768];
    int maximum_mag;

    /****************************************************************************
     * Initialize the edge map to possible edges everywhere the non-maximal
     * suppression suggested there could be an edge except for the border. At
     * the border we say there can not be an edge because it makes the
     * follow_edges algorithm more efficient to not worry about tracking an
     * edge off the side of the image.
     ****************************************************************************/
    for(r=0,pos=0;r<rows;r++){
        for(c=0;c<cols;c++,pos++){
            if(nms[pos] == POSSIBLE_EDGE) edge[pos] = POSSIBLE_EDGE;
            else edge[pos] = NOEDGE;
        }
    }

    for(r=0,pos=0;r<rows;r++,pos+=cols){
        edge[pos] = NOEDGE;
        edge[pos+cols-1] = NOEDGE;
    }
    pos = (rows-1) * cols;
    for(c=0;c<cols;c++,pos++){
        edge[c] = NOEDGE;
        edge[pos] = NOEDGE;
    }

    /****************************************************************************
     * Compute the histogram of the magnitude image. Then use the histogram to
     * compute hysteresis thresholds.
     ****************************************************************************/
    for(r=0;r<32768;r++) hist[r] = 0;
    for(r=0,pos=0;r<rows;r++){
        for(c=0;c<cols;c++,pos++){
            if(edge[pos] == POSSIBLE_EDGE) hist[mag[pos]]++;
        }
    }

    /****************************************************************************
     * Compute the number of pixels that passed the nonmaximal suppression.
     ****************************************************************************/
    for(r=1,numedges=0;r<32768;r++){
        if(hist[r] != 0) maximum_mag = r;
        numedges += hist[r];
    }

    highcount = (int)(numedges * thigh + 0.5);

    /****************************************************************************
     * Compute the high threshold value as the (100 * thigh) percentage point
     * in the magnitude of the gradient histogram of all the pixels that passes
     * non-maximal suppression. Then calculate the low threshold as a fraction
     * of the computed high threshold value. John Canny said in his paper
     * "A Computational Approach to Edge Detection" that "The ratio of the
     * high to low threshold in the implementation is in the range two or three
     * to one." That means that in terms of this implementation, we should
     * choose tlow ~= 0.5 or 0.33333.
     ****************************************************************************/
    r = 1;
    numedges = hist[1];
    while((r<(maximum_mag-1)) && (numedges < highcount)){
        r++;
        numedges += hist[r];
    }
    highthreshold = r;
    lowthreshold = (int)(highthreshold * tlow + 0.5);
/*  
    if(VERBOSE){
        printf("The input low and high fractions of %f and %f computed to\n",
               tlow, thigh);
        printf("magnitude of the gradient threshold values of: %d %d\n",
               lowthreshold, highthreshold);
    }
*/  
    /****************************************************************************
     * This loop looks for pixels above the highthreshold to locate edges and
     * then calls follow_edges to continue the edge.
     ****************************************************************************/
    for(r=0,pos=0;r<rows;r++){
        for(c=0;c<cols;c++,pos++){
            if((edge[pos] == POSSIBLE_EDGE) && (mag[pos] >= highthreshold)){
                edge[pos] = EDGE;
                follow_edges((edge+pos), (mag+pos), lowthreshold, cols);
            }
        }
    }

    /****************************************************************************
     * Set all the remaining possible edges to non-edges.
     ****************************************************************************/
    for(r=0,pos=0;r<rows;r++){
        for(c=0;c<cols;c++,pos++) if(edge[pos] != EDGE) edge[pos] = NOEDGE;
    }
}

/*
tlow 0.20-0.50
thigh 0.60-0.90
*/
ImageWrapper *Image::cannyEdgeExtract(float tlow, float thigh) {
    int gx[3][3]={ 
        { -1, 0, 1 },
        { -2, 0, 2 },
        { -1, 0, 1 }};
    int gy[3][3]={
        {  1,  2,  1 },
        {  0,  0,  0 },
        { -1, -2, -1 }};
    int resultWidth=m_width-3;
    int resultHeight=m_height-3;
    int *diffx=(int *) malloc(sizeof(int)*resultHeight*resultWidth);
    int *diffy=(int *) malloc(sizeof(int)*resultHeight*resultWidth);
    int *mag=(int *) malloc(sizeof(int)*resultHeight*resultWidth);
    memset(diffx, 0, sizeof(int)*resultHeight*resultWidth);
    memset(diffy, 0, sizeof(int)*resultHeight*resultWidth);
    memset(mag, 0, sizeof(int)*resultHeight*resultWidth);

    // compute the magnitute and the angles in the image
    for(int y=0; y<m_height-3; y++) {
        for(int x=0; x<m_width-3; x++) {
            int resultX=0;
            int resultY=0;
            for(int dy=0; dy<3; dy++) {
                for(int dx=0; dx<3; dx++) {
                    int pixel=(*this)[y+dy][x+dx];
                    resultX+=pixel*gx[dy][dx];
                    resultY+=pixel*gy[dy][dx];
                }
            }
            mag[y*resultWidth+x]=abs(resultX)+abs(resultY);
            diffx[y*resultWidth+x]=resultX;
            diffy[y*resultWidth+x]=resultY;
        }
    }
    uint8_t*nms=(uint8_t *) malloc(sizeof(uint8_t)*resultHeight*resultWidth);
    memset(nms, 0, sizeof(uint8_t)*resultHeight*resultWidth);
    non_max_supp(mag, diffx, diffy, resultHeight, resultWidth, nms);

    free(diffx);
    free(diffy);

    uint8_t *edge=(uint8_t *) malloc(sizeof(uint8_t)*resultHeight*resultWidth);
    memset(edge, 0, sizeof(uint8_t)*resultHeight*resultWidth);
    apply_hysteresis(mag, nms, resultHeight, resultWidth, tlow, thigh, edge);

    free(nms);
    free(mag);

    Image *result=new Image(edge, resultWidth, resultHeight, true);
    return [ImageWrapper imageWithCPPImage:result]; 
}

// rotate by 90, 180, 270, 360
ImageWrapper *Image::rotate(int angle) {
    Image* result;
    switch(angle) {
        case 90:
        case 270:
            result=new Image(m_height, m_width);
            break;
        case 180:
            result=new Image(m_width, m_height);
            break;
    }
    for(int y=0; y< m_height; y++) {
        for(int x=0; x<m_width; x++) {
            switch(angle) {
                case 90:
                    (*result)[m_width-x-1][y]=(*this)[y][x];
                    break;
                case 180:
                    (*result)[m_height-y-1][x]=(*this)[y][x];
                    break;
                case 270:
                    (*result)[x][y]=(*this)[y][x];
                    break;
            }
        }
    }
    return [ImageWrapper imageWithCPPImage:result];
}

ImageWrapper *Image::gaussianBlur() {
    int blur[5][5]={ 
        { 1, 4, 7, 4, 1 },
        { 4,16,26,16, 4 },
        { 7,26,41,26, 7 },
        { 4,16,26,16, 4 },
        { 1, 4, 7, 4, 1 }};

    Image *result=new Image(m_width-5, m_height-5);
    for(int y=0; y<m_height-5; y++) {
        for(int x=0; x<m_width-5; x++) {
            int val=0;
            for(int dy=0; dy<5; dy++) {
                for(int dx=0; dx<5; dx++) {
                    int pixel=(*this)[y+dy][x+dx];
                    val+=pixel*blur[dy][dx];
                }
            }
            (*result)[y][x]=val/273;
        }
    }
    return [ImageWrapper imageWithCPPImage:result]; 
}

void Image::HistogramEqualisation() {
    std::vector<int> pdf(256);
    std::vector<int> cdf(256);
    // compute the pdf
    for(int i=0; i<m_height*m_width; i++) {
        pdf[m_imageData[i]]++;      
    }
    // compute the cdf
    cdf[0]=pdf[0];
    for(int i=1; i<256; i++) {
        cdf[i]=cdf[i-1]+pdf[i];
    }
    // now map the pixels to the new values
    for(int i=0; i<m_height*m_width; i++) {
        m_imageData[i]=255*cdf[m_imageData[i]]/cdf[255];
    }
}

UIImage *Image::toUIImage() {
    // generate space for the result
    uint8_t *result=(uint8_t *) calloc(m_width*m_height*sizeof(uint32_t),1);
    // process the image back to rgb
    for(int i=0; i<m_height*m_width; i++) {         
        result[i*4]=0;
        int val=m_imageData[i];
        result[i*4+1]=val;
        result[i*4+2]=val;
        result[i*4+3]=val;
    }
    // create a UIImage
    CGColorSpaceRef colorSpace=CGColorSpaceCreateDeviceRGB();
    CGContextRef context=CGBitmapContextCreate(result, m_width, m_height, 8, m_width*sizeof(uint32_t), colorSpace, kCGBitmapByteOrder32Little|kCGImageAlphaNoneSkipLast);
    CGImageRef image=CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);
    UIImage *resultUIImage=[UIImage imageWithCGImage:image];
    CGImageRelease(image);
    // make sure the data will be released by giving it to an autoreleased NSData
    [NSData dataWithBytesNoCopy:result length:m_width*m_height];
    return resultUIImage;
}

inline float Interpolate1(float a, float b, float c) {
    float mu=c-floor(c);
    return(a*(1-mu)+b*mu);
}

inline float Interpolate2(float a, float b, float c, float d, float x, float y)
{
    float ab = Interpolate1(a,b,x);
    float cd = Interpolate1(c,d,x);
    return Interpolate1(ab,cd,y);
}

ImageWrapper *Image::resize(int newX, int newY) {
    Image *result=new Image(newX, newY);
    for(float y=0; y<newY; y++) {
        for(float x=0; x<newX; x++) {
            float srcX0=x*(float)(m_width-1)/(float)newX;
            float srcY0=y*(float)(m_height-1)/(float)newY;
            float srcX1=(x+1)*(float)(m_width-1)/(float)newX;
            float srcY1=(y+1)*(float)(m_height-1)/(float)newY;
            float val=0,count=0;
            for(float srcY=srcY0; srcY<srcY1; srcY++) {
                for(float srcX=srcX0; srcX<srcX1; srcX++) {
                    val+=Interpolate2((*this)[(int)srcY][(int) srcX], (*this)[(int)srcY][(int) srcX+1],
                                      (*this)[(int)srcY+1][(int) srcX], (*this)[(int)srcY+1][(int) srcX+1],
                                      srcX, srcY);
                    count++;
                }
            }
            (*result)[(int) y][(int) x]=val/count;
        }
    }
    return [ImageWrapper imageWithCPPImage:result];
}

void Image::findLargestStructure(std::vector<ImagePoint> *maxPoints) {
    // process the image
    std::vector<ImagePoint> points;
    points.reserve(10000);
    for(int y=0; y<m_height; y++) {
        for(int x=0; x<m_width; x++) {
            // if we've found a point in the image then extract everything connected to it
            if((*this)[y][x]!=0) {
                extractConnectedRegion(x, y, &points);
                if(points.size()>maxPoints->size()) {
                    maxPoints->clear();
                    maxPoints->resize(points.size());
                    std::copy(points.begin(), points.end(), maxPoints->begin());
                } 
                points.clear();
            }
        }
    }
}

int findHeightAtX(Image *img, int x) {  
    // find the top most set pixel
    bool foundTop;
    int topY=0;
    for(;topY<img->getHeight(); topY++) {
        if((*img)[topY][x]==0) {
            foundTop=true;
            break;
        }
    }
    if(foundTop) {
        // find the bottom most set pixel
        int bottomY=img->getHeight()-1;
        for(;bottomY>0 && (*img)[bottomY][x]==0; bottomY--);
        return bottomY-topY;
    }
    return -1;
}

void Image::skeletonise() {
    bool changes=true;
    while(changes) {
        changes=false;
        for(int y=1; y<m_height-1; y++) {
            for(int x=1; x<m_width-1; x++) {
                if((*this)[y][x]!=0) {
                    bool val[8];
                    val[0]=(*this)[y-1][x-1]!=0;
                    val[1]=(*this)[y-1][x]!=0;
                    val[2]=(*this)[y-1][x+1]!=0;
                    val[3]=(*this)[y][x+1]!=0;
                    val[4]=(*this)[y+1][x+1]!=0;
                    val[5]=(*this)[y+1][x]!=0;
                    val[6]=(*this)[y+1][x-1]!=0;
                    val[7]=(*this)[y][x-1]!=0;

                    bool remove=false;
                    for(int i=0; i<7 && !remove;i++) {
                        remove=(val[(0+i)%8] && val[(1+i)%8] && val[(7+i)%8] && val[(6+i)%8] && val[(5+i)%8] && !(val[(2+i)%8] || val[(3+i)%8] || val[(4+i)%8]))
                                || (val[(0+i)%8] && val[(1+i)%8] && val[(7+i)%8] && !(val[(3+i)%8] || val[(6+i)%8] || val[(5+i)%8] || val[(4+i)%8])) ||
                                !(val[(0+i)%8] || val[(1+i)%8] || val[(2+i)%8]  || val[(3+i)%8]  || val[(4+i)%8]  || val[(5+i)%8]  || val[(6+i)%8] || val[(7+i)%8]);
                    }
                    if(remove) {
                        (*this)[y][x]=0;
                        changes=true;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:09:32.467

除非您对图像应用一些图像预处理，否则 Tesseract 引擎本身并不能给出很好的结果...

这是我所做的，并达到了几乎 95% 的准确率......

将 UIImage 转换为灰度并将 autoLocalThreshold 应用于图像.. 为此，我使用了我在网上找到的一个类.. 并且请记住，如果您要调整图像大小，则保持纵横比并且图像编辑代码是正确的，因为有很多代码可能会在您不知情的情况下损坏图像..所以如果对您有帮助，这里有一些代码..

图像类转换灰度和自动本地阈值...

```
/*
 *  Image.h
 *  ImageProcessing
 *
 * 
 *
 */

#import <UIKit/UIImage.h>

#include <vector>

class Image;
// objective C wrapper for our image class
@interface ImageWrapper : NSObject {
    Image *image;
    bool ownsImage;
}

@property(assign, nonatomic) Image *image;
@property(assign, nonatomic) bool ownsImage;
+ (ImageWrapper *) imageWithCPPImage:(Image *) theImage;

@end

class ImagePoint {
public:
    short x,y;
    inline ImagePoint(short xpos, short ypos) {
        x=xpos;
        y=ypos;
    }
    inline ImagePoint(int xpos, int ypos) {
        x=xpos;
        y=ypos;
    }
    inline ImagePoint(const ImagePoint &other) {
        x=other.x;
        y=other.y;
    }
    inline ImagePoint() {
        x=0; y=0;
    }
};

class Image {
private:
    uint8_t *m_imageData;
    uint8_t **m_yptrs;
    int m_width;
    int m_height;
    bool m_ownsData;
    Image(ImageWrapper *other, int x1, int y1, int x2, int y2);
    Image(int width, int height);
    Image(uint8_t *imageData, int width, int height, bool ownsData=false);
    Image(UIImage *srcImage, int width, int height, CGInterpolationQuality interpolation, bool imageIsRotatedBy90degrees=false);
    void initYptrs();
public:
    // copy a section of another image
    static ImageWrapper *createImage(ImageWrapper *other, int x1, int y1, int x2, int y2);
    // create an empty image of the required width and height
    static ImageWrapper *createImage(int width, int height);
    // create an image from data
    static ImageWrapper *createImage(uint8_t *imageData, int width, int height, bool ownsData=false);
    // take a source UIImage and convert it to greyscale
    static ImageWrapper *createImage(UIImage *srcImage, int width, int height, bool imageIsRotatedBy90degrees=false);
    // edge detection
    ImageWrapper *cannyEdgeExtract(float tlow, float thigh);
    // local thresholding
    ImageWrapper* autoLocalThreshold();
    // threshold using integral
    ImageWrapper *autoIntegratingThreshold();
    // threshold an image automatically
    ImageWrapper *autoThreshold();
    // gaussian smooth the image
    ImageWrapper *gaussianBlur();
    // get the percent set pixels
    int getPercentSet();
    // exrtact a connected area from the image
    void extractConnectedRegion(int x, int y, std::vector<ImagePoint> *points);
    // find the largest connected region in the image
    void findLargestStructure(std::vector<ImagePoint> *maxPoints);
    // normalise an image
    void normalise();
    // rotate by 90, 180, 270, 360
    ImageWrapper *rotate(int angle);
    // shrink to a new size
    ImageWrapper *resize(int newX, int newY);
    ImageWrapper *shrinkBy2();
    // histogram equalisation
    void HistogramEqualisation();
    // skeltonize
    void skeletonise();
    // convert back to a UIImage for display
    UIImage *toUIImage();
    ~Image() {
        if(m_ownsData)
            free(m_imageData);
        delete m_yptrs;
    }
    inline uint8_t* operator[](const int rowIndex) {
        return m_yptrs[rowIndex];
    }
    inline int getWidth() {
        return m_width;
    }
    inline int getHeight() {
        return m_height;
    }
};

inline bool sortByX1(const ImagePoint &p1, const ImagePoint &p2) {
    if(p1.x==p2.x) return p1.y<p2.y;
    return p1.x<p2.x;
}

inline bool sortByY1(const ImagePoint &p1, const ImagePoint &p2) {
    if(p1.y==p2.y) return p1.x<p2.x;
    return p1.y<p2.y;
} 
```

这就是你如何使用它...

```
 [imageProcessing startTesseract];

    UIImage *newImage = [imageProcessing resizeImage:image];
    ImageWrapper *greyScale=Image::createImage(newImage, newImage.size.width, newImage.size.height);

    ImageWrapper *edges=greyScale.image->autoLocalThreshold();
    // show the results

    NSString *text = [[NSString alloc]initWithString:[imageProcessing ocrImage:edges.image->toUIImage()]] ; 
```

这里的 imageProcessing 包含启动 Tesseract 和其他相关功能的方法......

```
// METHOD TO DECODE THE MICR COMPONENTS USING TESSETACT

- (NSString *) ocrImage: (UIImage *) capturedImage
{

    CGSize imageSize = [capturedImage size];
    double bytes_per_line   = CGImageGetBytesPerRow([capturedImage CGImage]);
    double bytes_per_pixel  = CGImageGetBitsPerPixel([capturedImage CGImage]) / 8.0;

    CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider([capturedImage CGImage]));
    const UInt8 *imageData = CFDataGetBytePtr(data);
    imageThresholder = new tesseract::ImageThresholder();       

    imageThresholder->SetImage(imageData,(int) imageSize.width,(int) imageSize.height,(int)bytes_per_pixel,(int)bytes_per_line);

    // CONVERTING THE IMAGE INTO PIXELS

    objForTesseract->SetImage(imageThresholder->GetPixRectGrey());

    // GET THE DECODED TEXT
    objForTesseract->Recognize(NULL);

    char* text = objForTesseract->GetUTF8Text();

    CFRelease(data);

    delete imageThresholder;
    imageThresholder=nil;
    objForTesseract->End();
    delete objForTesseract;
    objForTesseract=nil;

    return [NSString stringWithCString:text encoding:NSUTF8StringEncoding];
} 
```

我将提交 .mm 图像作为单独的答案...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-06T02:58:13.400

在 Tesseract 的常见问题解答中找到答案。阅读问题：[是否有最小文本大小？（它不会读取屏幕文本！）](https://code.google.com/p/tesseract-ocr/wiki/FAQ#Is_there_a_Minimum_Text_Size?_%28It_won%27t_read_screen_text!%29)。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T05:44:41.300

我不确定它是否会针对任何分辨率显示准确的输出。我昨天也在尝试同样的事情。我从相机中抓取图像以获得高分辨率图像。我还从照片库上传了低分辨率图像。但它没有奏效。我想您需要在这里进行更多搜索。
请查看[**OCR Api Service**](http://ocrapiservice.com/)是否可以帮助您。你可以试试[**这个**](https://github.com/smart-mobile-software/ocrapiservice)演示。演示中存在一些凭据问题。您需要提供一份。但我不确定需要哪些凭据。检查这是否可以帮助您。

# c - sizeof 运算符不计算子表达式？

> ID：11624699
> 
> 赞同：1
> 
> 时间：2012-07-24T05:32:23.257
> 
> 标签：c, operators, sizeof

> **可能重复：**
> [为什么 sizeof(x++) 不增加 x？](https://stackoverflow.com/questions/8225776/why-does-sizeofx-not-increment-x)

```
#include<stdio.h>
int main(void)
{
  double num=5.2;
  int var=5;
  printf("%d\t",sizeof(!num));
  printf("%d\t",sizeof(var=15/2));
  printf("%d",var);
  return 0;
} 
```

该程序给出了一个输出`4 4 5`。我不太明白为什么会这样。

*   为什么第一个输出是 4？
*   为什么`var`get 的值没有更新为 7？

运营商是如何`sizeof`工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T05:34:15.237

表达式

```
!num
var=15/2 
```

两者都评估为 int。 `sizeof(int)`在您的平台上始终为 4。

至于为什么 var 没有更新：

> sizeof 是编译时运算符，因此在编译时 sizeof 及其操作数被结果值替换。操作数根本不被计算（除非它是一个可变长度数组）；只有结果的类型很重要。

[https://stackoverflow.com/a/8225813/141172](https://stackoverflow.com/a/8225813/141172)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:39:37.713

该运算符向您显示其参数`sizeof`的飞镖*类型的大小。*它不返回参数的结果。在您的平台上，一个整数是 4 个字节长，这就是您在这里学到的。如果你想要结果，只需剪掉`sizeof`.

# mysql - MySQL - MATCH 表现为仅搜索整个单词

> ID：11624702
> 
> 赞同：1
> 
> 时间：2012-07-24T05:32:39.900
> 
> 标签：mysql, match

我真的不明白，但我`MATCH (columnName) AGAINST ('word')`在 MySQL 中只发现那些包含完全`word`，但不包含`words`or `keyword`。

我尝试在我的系统上运行此查询：

```
select count(*) from content where lcase(content_text) like '%try%' 
and not match (content_text) against ('try') order by content_id 
```

我收到了结果

```
| count(*) |
____________
|  379     | 
```

我认为应该是 0。我的查询或数据库会出现什么问题？

PS：表`content`是 MyISAM，我已将列设置为`content_text`完整索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:40:49.273

'try' 是 MySQL 的停用词。对于全文搜索，该词将被忽略。

参考：[http ://dev.mysql.com/doc/refman/5.1/en/fulltext-stopwords.html](http://dev.mysql.com/doc/refman/5.1/en/fulltext-stopwords.html)

另外，是的，您是对的，`MATCH`它只搜索整个单词。这是一种自然语言搜索。如果您更喜欢搜索部分单词（单词中的字符），请使用`LIKE %xxx%`istead。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-18T08:01:19.897

全文搜索停止一些常用词，但使用此步骤禁用。

1：在mysql中打开my.ini文件

2：放在 my.ini 中 [mysqld] 行之后的两行以下（在文件中搜索 [mysqld]）

```
ft_min_word_len=1
ft_stopword_file="" 
```

3：重启你的服务器

4：使用以下命令修复您的表

> 修复表表名；

5：现在您的搜索正在工作......

# mysql - 如何交换列值以及如何使用 MYSQL 进行连接

> ID：11624704
> 
> 赞同：0
> 
> 时间：2012-07-24T05:33:00.537
> 
> 标签：mysql

1.  如何交换相同的列值？

**表名**

```
id    value

1      0

2      1

3      0

4      1 
```

如何使用mysql查询将值0更改为1和1更改为0？

1.  如何打印以下 o/p ？

表名

```
id name

1   x

2   y

3   NULL 
```

如果名称包含值，则应打印为“Hi X”，否则如果名称为 NULL，则应打印为“Hello Guest”。

我的 O/P 应该如下所示

```
name

Hi X

Hi y

Hello Guest 
```

如何才能做到这一点 ？

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:36:24.983

**1)**

你可以简单地做：

```
SELECT id, NOT value AS value
FROM tbl 
```

`NOT`将切换`0`到`1`，反之亦然。

* * *

**2)**

您可以`COALESCE()`结合使用`CONCAT()`：

```
SELECT COALESCE(CONCAT('Hi ', name), 'Hello Guest') AS name
FROM tbl 
```

--

*   `CONCAT()`如果is中至少有一项`NULL`，则无论其参数中的任何其他项如何，都`CONCAT()`将返回。`NULL`

*   `COALESCE()`输出第一个非`NULL`参数。

--

所以 if `name`is `NULL`, then`CONCAT()`将返回`NULL`, 并改为`COALESCE()`输出。`Hello Guest`

# authentication - 使用 servlet 在 Java EE 应用程序中注销用户

> ID：11624714
> 
> 赞同：0
> 
> 时间：2012-07-24T05:34:25.480
> 
> 标签：authentication, jakarta-ee, jsf-2, glassfish-3

使用[这个](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0)答案我试图注销。

**小服务程序代码：**

```
@WebServlet(name = "LogoutServlet", urlPatterns = {"/logout"})
public class LogoutServlet extends HttpServlet {
    private static org.apache.log4j.Logger logger = org.apache.log4j.Logger.getLogger(user.class);

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // Destroys the session for this user.
        if (request.getSession(false) != null) {
            request.getSession(false).invalidate();
        }

        // Redirects back to the initial page.
        logger.warn(request.getContextPath());
        response.sendRedirect(request.getContextPath());

    }
} 
```

**查看代码：**

```
<h:form>
      <h:commandButton value="Logout" action="/logout"/>
</h:form> 
```

**错误：**

```
Unable to find matching navigation case with from-view-id '/Admin/appManager.xhtml' for action '/logout' with outcome '/logout' 
```

我不认为 servlet 正在使用“/logout” url 模式接收请求。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:52:51.540

在 JSF 中，`action`不是下一个要调用的 servlet 的 URL。相反，它通过 faces-config 或直接从支持 bean 定义导航规则。

`logout`该消息告诉您，您的应用与您`.xhtml`页面中的操作不匹配。

我会做类似的事情

```
<h:commandButton value="Logout" action="#{backingBean.logout()}"/> 
```

你有一个`ManagedBean` `BackingBean`with 方法`logout()`并将 URL 返回到“再见”地址。

注意：如果要从 servlet 执行操作，则应使用常规 html 标记（`<a>`，`<button>`而不是 JSF 组件）链接到它。

# android - 在listivew中将背景设为黄色以获得正确答案

> ID：11624718
> 
> 赞同：2
> 
> 时间：2012-07-24T05:34:34.043
> 
> 标签：android

用户从列表视图中的一系列选项中选择一个答案。提交（正确或错误）后，我打算在列表视图中突出显示正确答案。

我以为我想通了：

```
 // get the position from the array we fed into the list view that has the correct answer    
int correct = curquestion.GetIndexOfCorrectAnswer();
// set that item's background to yellow
lView.getChildAt(correct).setBackgroundColor(Color.YELLOW); 
```

我通过观看此运行并阅读其他人的帖子发现 getChildAt 不能提供可靠的结果 - 有时它似乎会随机选择一个孩子设置为黄色。对其他方法有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:49:14.110

输入要设置颜色的列表项的位置：

```
 adapter.setSelectedPosition(position);
 adapter.setNotifyOnChange(true);
 listView.invalidate(); 
```

在适配器类中：

// 根据选中状态改变行颜色

```
if(selectedPos == position){
    label.setBackgroundColor(Color.YELLOW);
 }else{
    label.setBackgroundColor(Color.TRANSPARENT);
 } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:43:17.760

您应该实现`OnItemClickListener`抽象类（[链接](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)），您应该使用方法向`ListView`对象注册它`setOnItemClickListener()`。而且，在`onItemClick(AdapterView<?> parent, View view, int position, long id)`回调方法中，您可以测试用户是否选择了正确的答案，并且您有用户点击的视图，因此您可以将其涂成黄色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:01:30.787

设置 onSubmit 按钮单击以下代码将正确的整数变量作为活动字段初始化为 -1；

```
// get the position from the array we fed into the list view that has the correct answer    
correct = curquestion.GetIndexOfCorrectAnswer();
adapter.notifyDataSetInvalidated(); 
```

并在适配器的 getView 中执行以下操作：

```
if(position==correct){
    label.setBackgroundColor(Color.YELLOW);
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T03:37:57.230

对于任何有兴趣的人，我会在这里发布我的最终代码：

```
 lView.setEnabled(false);
        btnsubmit.setEnabled(true);
        int correct = curquestion.GetIndexOfCorrectAnswer();

        // tell the system the correct answer
        adapters.SetSelectedPosition(correct);
        //adapters.setNotifyOnChange(true);
        adapters.notifyDataSetChanged(); 
```

上面的代码是在活动上调用的，下面是处理程序的自定义类。您可能会想到的其他 xml 片段。

```
import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckedTextView;
import android.widget.TextView;
import com.example.walpdroid2.R;

public class QuizDataAdapter extends ArrayAdapter<Answer>
{
Answer [] objects = null;
Context checkcontext;
int _selectedIndex;
int checkedviewresourceid;
int uncheckedviewresourceid;

int selectedPos = -1;

public QuizDataAdapter(Context checkcontext, int checkresourceid, int uncheckresourceid, Answer[] objects)
{
    super(checkcontext, checkresourceid, objects);
    this.checkedviewresourceid = checkresourceid;
    this.uncheckedviewresourceid = uncheckresourceid;
    this.checkcontext = checkcontext;
    this.objects = objects;

}

public int getCount()
{
    return this.objects.length;
}

public Answer getItem(int position)
{
    return this.objects[position];
}

public long getItemId(int position)
{
    return position;
}

public void setSelected(int index) {

      if (index == -1) {
        // unselected
      }
      else {
        // selected index...
      }

      _selectedIndex = index;

      // notify the model that the data has changed, need to update the view
      notifyDataSetChanged();

}

public void SetSelectedPosition(int pos)
{
    this.selectedPos = pos;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    CheckedTextView holder = null;

    if((row == null) || (selectedPos == position))
    {
        LayoutInflater inflater = ((Activity)checkcontext).getLayoutInflater();

        if(selectedPos == position)
        {
            row = inflater.inflate(checkedviewresourceid, parent, false);
            holder = (CheckedTextView)row.findViewById(R.id.CheckRow);
        }
        else
        {
            row = inflater.inflate(uncheckedviewresourceid, parent, false);
            holder = (CheckedTextView)row.findViewById(R.id.UnCheckRow);                
        }

        holder.setText(objects[position].getAnswer());
        row.setTag(holder);
    }
    else
    {
        holder = (CheckedTextView)row.getTag();
        holder.setText(objects[position].getAnswer());
    }

    return row;
} 
```

}

# heroku - heroku Rake db：迁移失败 - 未定义的方法“pushconfig”

> ID：11624719
> 
> 赞同：0
> 
> 时间：2012-07-24T05:34:34.330
> 
> 标签：heroku, rake, migrate

我收到以下错误消息。有什么建议么？

```
undefined method `pushconfig' for #<FirstApp::Application:0x000000027bb658> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:41:38.257

发现了问题。我在生产配置文件中有语法错误

# c# - ASP.NET 3.5 中的 SendGrid Web API

> ID：11624722
> 
> 赞同：4
> 
> 时间：2012-07-24T05:35:07.943
> 
> 标签：c#, asp.net, sendgrid

我正在使用 SendGrid 电子邮件服务通过 Web API (HttpWebRequest) 发送电子邮件。这是正在使用的代码，但我收到 400 响应。

```
string url = "https://sendgrid.com/api/mail.send.xml";
string parameters = "api_user=" + api_user + "&api_key=" + api_key + "&to="                     + toAddress + "&toname=" + toName + "&subject=" + subject + "&text=" + text + "&from=" + fromAddress;

// Create Request
myHttpWebRequest = (HttpWebRequest)HttpWebRequest.Create(url);

myHttpWebRequest.Method = "POST";
// myHttpWebRequest.ContentType = "application/json; charset=utf-8";
myHttpWebRequest.ContentType = "text/xml";

CookieContainer cc = new CookieContainer();
myHttpWebRequest.CookieContainer = cc;

System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
byte[] postByteArray = encoding.GetBytes(parameters);
myHttpWebRequest.ContentLength = postByteArray.Length;
System.IO.Stream postStream = myHttpWebRequest.GetRequestStream();
postStream.Write(postByteArray, 0, postByteArray.Length);
postStream.Close();

// Get Response
string result="";
HttpWebResponse response = (HttpWebResponse)myHttpWebRequest.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T15:02:01.843

您的主要问题是您向我们发送了`text/xml`内容类型的内容，但我们只接受表单编码的内容或查询字符串。这是您尝试执行的操作的完整示例。

```
using System;
using System.IO;
using System.Net;

public class SendGridWebDemo
{
  static public void Main ()
  {
    string api_user = "your_sendgrid_username";
    string api_key = "your_sendgrid_key";
    string toAddress = "to@example.com";
    string toName = "To Name";
    string subject = "A message from SendGrid";
    string text = "Delivered by your friends at SendGrid.";
    string fromAddress = "from@example.com";

    string url = "https://sendgrid.com/api/mail.send.json";

    // Create a form encoded string for the request body
    string parameters = "api_user=" + api_user + "&api_key=" + api_key + "&to=" + toAddress + 
                        "&toname=" + toName + "&subject=" + subject + "&text=" + text + 
                        "&from=" + fromAddress;

    try
    {
      //Create Request
      HttpWebRequest myHttpWebRequest = (HttpWebRequest) HttpWebRequest.Create(url);
      myHttpWebRequest.Method = "POST";
      myHttpWebRequest.ContentType = "application/x-www-form-urlencoded";

      // Create a new write stream for the POST body
      StreamWriter streamWriter = new StreamWriter(myHttpWebRequest.GetRequestStream());

      // Write the parameters to the stream
      streamWriter.Write(parameters);
      streamWriter.Flush();
      streamWriter.Close();

      // Get the response
      HttpWebResponse httpResponse = (HttpWebResponse) myHttpWebRequest.GetResponse();

      // Create a new read stream for the response body and read it
      StreamReader streamReader = new StreamReader(httpResponse.GetResponseStream());
      string result = streamReader.ReadToEnd();

      // Write the results to the console
      Console.WriteLine(result);
    }
    catch(WebException ex)
    {
      // Catch any execptions and gather the response
      HttpWebResponse response = (HttpWebResponse) ex.Response;

      // Create a new read stream for the exception body and read it
      StreamReader streamReader = new StreamReader(response.GetResponseStream());
      string result = streamReader.ReadToEnd();

      // Write the results to the console
      Console.WriteLine(result);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T23:23:18.847

**@Swift 的答案是正确的。这是我使用 MVC Web 表单的答案。替换console.writeline等**

```
<div class="form">
     <input class="input-text" type="text" id="RecipientName" name="RecipientName" value="Your Name *" onFocus="if(this.value==this.defaultValue)this.value='';" onBlur="if(this.value=='')this.value=this.defaultValue;">
     <input class="input-text" type="text" id="RecipientEmail" name="RecipientEmail" value="Your E-mail *" onFocus="if(this.value==this.defaultValue)this.value='';" onBlur="if(this.value=='')this.value=this.defaultValue;">
     <textarea class="input-text text-area" id="RecipientMessage" name="RecipientMessage" cols="0" rows="0" onFocus="if(this.value==this.defaultValue)this.value='';" onBlur="if(this.value=='')this.value=this.defaultValue;">Your Message *</textarea>
     <input class="input-btn" type="submit" id="EmailSendButton" name="EmailSendButton" value="send message" onclick="EmailData()">
     <div id="EmailConfirmation"></div>
</div>

<script>
    function EmailData() {
        $("#EmailSendButton").attr("disabled", "true");

        var url = "/Main/EmailData";
        var recipientName = $("#RecipientName").val();
        var recipientEmail = $("#RecipientEmail").val();
        var recipientMessage = $("#RecipientMessage").val();
        var postData = { 'Name': recipientName, 'Email': recipientEmail, 'Message': recipientMessage }
        $.post(url, postData, function (result) {
            $("#EmailConfirmation").css({ 'display': 'block' });
            $("#EmailConfirmation").text(result);
            $("#EmailConfirmation").fadeIn(2000)
        })
    }
</script> 
```

**视图模型**

```
public class EmailDataViewModel
{
    public string Name { get; set; }
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }
    public string Message { get; set; }
} 
```

**控制器**

```
public string EmailData(EmailDataViewModel viewModel)
    {
        string api_user = "username";
        string api_key = "password";
        string toAddress = "admin@webapp.com";
        string toName = "Administrator";
        string subject = "Message from your web app";
        string text = viewModel.Name + " " + viewModel.Message;
        string fromAddress = viewModel.Email;
        string url = "https://sendgrid.com/api/mail.send.json";
        // Create a form encoded string for the request body
        string parameters = "api_user=" + api_user + "&api_key=" + api_key + "&to=" + toAddress +
                            "&toname=" + toName + "&subject=" + subject + "&text=" + text +
                            "&from=" + fromAddress;

        try
        {
            //Create Request
            HttpWebRequest myHttpWebRequest = (HttpWebRequest)HttpWebRequest.Create(url);
            myHttpWebRequest.Method = "POST";
            myHttpWebRequest.ContentType = "application/x-www-form-urlencoded";

            // Create a new write stream for the POST body
            StreamWriter streamWriter = new StreamWriter(myHttpWebRequest.GetRequestStream());

            // Write the parameters to the stream
            streamWriter.Write(parameters);
            streamWriter.Flush();
            streamWriter.Close();

            // Get the response
            HttpWebResponse httpResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();

            // Create a new read stream for the response body and read it
            StreamReader streamReader = new StreamReader(httpResponse.GetResponseStream());
            string result = streamReader.ReadToEnd();

            // Write the results to the console
            Console.WriteLine(result);
        }
        catch (WebException ex)
        {
            // Catch any execptions and gather the response
            HttpWebResponse response = (HttpWebResponse)ex.Response;

            // Create a new read stream for the exception body and read it
            StreamReader streamReader = new StreamReader(response.GetResponseStream());
            string result = streamReader.ReadToEnd();

            // Write the results to the console
            Console.WriteLine(result);
        }

        return "Successful";
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-30T11:18:25.770

使用位于以下位置的 c#-code 库：[https ://github.com/sendgrid/sendgrid-csharp](https://github.com/sendgrid/sendgrid-csharp)

```
//Create message
SendGrid myMessage = SendGrid.GetInstance();
myMessage.AddTo("anna@example.com");
myMessage.From = new MailAddress("john@example.com", "John Smith");
myMessage.Subject = "Testing the SendGrid Library";
myMessage.Text = "Hello World!";

// Add attachment
myMessage.AddAttachment(@"C:\file1.txt");

//Set up the transport
var credentials = new NetworkCredential("username", "password");
var transportWeb = Web.GetInstance(credentials);

// Send the email.
transportWeb.Deliver(myMessage); 
```

# c# - 如何从任务的分配给字段中获取 SPuser 对象

> ID：11624726
> 
> 赞同：2
> 
> 时间：2012-07-24T05:35:24.887
> 
> 标签：c#, visual-studio-2008, sharepoint, sharepoint-2007, sharepoint-workflow

嗨，我有一个 sharepoint 2007 工作流程，我需要获取 SPuser 对象才能向用户发送邮件，但我能得到的只是任务分配给字段的字符串。我该怎么做呢？

这是我的代码

```
foreach (SPWorkflow workflow in splistitem.Workflows)
{
     foreach (SPWorkflowTask task in workflow.Tasks)
     {
         string user = task["Assigned To"].ToString();
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:45:00.980

```
string assignedToValue = task["Assigned To"].ToString();
SPFieldUserValue userField = (SPFieldUserValue)workflow.Tasks.Fields["Assigned To"].GetFieldValue(assignedToValue);
SPUser user= userField.User; 
```

为了使其更健壮，您可以使用硬编码值`SPBuiltInFieldId.AssignedTo`来代替。`"Assigned To"`

# google-chrome - Skitch拖放在Chrome中不起作用

> ID：11624731
> 
> 赞同：0
> 
> 时间：2012-07-24T05:35:48.303
> 
> 标签：google-chrome, drag-and-drop, skitch

我似乎无法从 Skitch 拖放到拖放目标。

投掷目标似乎没有开火。没有出现典型的绿色圆圈。

想法？

[http://jsfiddle.net/AAL86/5/](http://jsfiddle.net/AAL86/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:37:27.987

啊。傻我。

尽管普通文件工作正常，但由于某种原因，dragover 事件正在搞乱它。

不太清楚为什么？

```
drop.addEventListener('dragover', function(e){
     //e.preventDefault();
}); 
```

[http://jsfiddle.net/AAL86/6/](http://jsfiddle.net/AAL86/6/)

# objective-c - 多个代表或通知中心

> ID：11624733
> 
> 赞同：3
> 
> 时间：2012-07-24T05:36:18.450
> 
> 标签：objective-c

让我解释。我有一个数据类，它只不过是 NSMutableArray 的一个实例。我添加了 currentItem 的属性。当我的应用程序启动时，会创建此类的一个实例，然后与多个视图控制器共享。

当这些视图控制器中的任何一个设置当前项目时 ([myClass setCurrentItem:(MyItem*)item] 我想通知所有视图控制器，以便他们可以更新他们的 UI 等......

我对实施解决方案的最佳方式感到矛盾。我可以：

1.) 使用自定义协议，让我的类通过添加方法 addDelegate:(id)instance 来跟踪委托集合，将委托集合保存在 NSMutableArray ivar 中，然后在设置 currentItem 时进行迭代和通信。

或者

2.) 设置 iVar 时，使用 NSNotification 中心进行通信。

就代表们而言，呼叫顺序对我来说并不重要。

哪种方法更适合这种情况？在我看来，选项 #1 会是更简洁的方法，但我对“多个代表”的搜索结果表明，当有多个代表时，我应该使用 NSNotification 中心，但背后没有太多理由。

你的意见是什么，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:31:16.130

我认为上面的评论总结了一些想法，但我只想添加一些想法：

> 当这些视图控制器中的任何一个设置当前项目时 ([myClass setCurrentItem:(MyItem*)item] 我想通知所有视图控制器，以便他们可以更新他们的 UI 等......

这意味着您正在更新所有 UIViewController，即使它们不可见。您没有说明您正在为哪个平台开发，但总的来说，我的目标是仅在绝对需要时更新控制器（即当它们对用户可见时）。在这种情况下，您可以选择将逻辑放入`viewWillAppear:`和/或`viewDidAppear:`检查您的模型（即`NSMutableArray`）并适当地更新视图。

现在，是使用 NSNotifications 还是使用协议方法和委托的问题是一个棘手的问题。我想有几点需要考虑：

1.  您是否有一个拥有或管理您的班级的对象？通常，这适用于代表 -`UITableView`例如，认为。
2.  您是否要确保单个对象必须实现事件方法 - 再次，协议可以确保实现方法并使文档清晰。

否则通知非常方便。查看标准框架并从中获取指导​​，但要意识到其中很多只是一个判断电话。例如，看一下`UITextField`- 它使用`UITextFieldDelegate`协议，但也创建通知。我敢肯定有一个很好的理由，但可能需要花一些时间考虑一下......

编辑：为了完整起见，正如您提到的：

> 2.) 设置 iVar 时，使用 NSNotification 中心进行通信。

Key-Value Observing (KVO) 允许您直接使用对象实例变量注册通知。

从 iOS 5.1 文档：

> 键值观察是一种机制，当另一个对象的属性发生变化时，可以直接通知一个对象。键值观察（或 KVO）可能是应用程序内聚性的重要因素。它是按照模型-视图-控制器设计模式设计的应用程序中对象之间的一种通信模式。例如，您可以使用它来将模型对象的状态与视图和控制器层中的对象同步。通常，控制器对象观察模型对象，视图观察控制器对象或模型对象。

我会添加指向文档的链接，但目前没有我的书签。

# hibernate - 在休眠中插入自映射实体作为伪造键

> ID：11624738
> 
> 赞同：0
> 
> 时间：2012-07-24T05:36:46.530
> 
> 标签：hibernate, spring-mvc, insert, mapping, self-join

嗨，我是新来的休眠。

我有一个场景，比如有常规服务和捆绑服务（常规服务的组合）

我创建了像

```
CREATE TABLE `dealer_service` (
`id_service` INT(11) NOT NULL AUTO_INCREMENT,
`service_name` VARCHAR(45) NULL DEFAULT NULL COMMENT ,
`short_desc` VARCHAR(45) NULL DEFAULT NULL COMMENT ,
`full_desc` VARCHAR(500) NULL DEFAULT NULL COMMENT ,
`cost` FLOAT NULL DEFAULT NULL COMMENT,
`currency` VARCHAR(45) NULL DEFAULT NULL COMMENT ,
`tax` FLOAT NULL DEFAULT NULL COMMENT ,
`discounts` FLOAT NULL DEFAULT NULL COMMENT ,

PRIMARY KEY (`id_service`),
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB; 
```

常规服务和捆绑服务之间的映射

```
CREATE TABLE `service_to_services` (
`service_id_main` INT(11) NOT NULL,
`service_id_sub` INT(11) NOT NULL,
PRIMARY KEY (`service_id_main`, `service_id_sub`)
 )
 COMMENT='maping table between service to service if service is bundle'
  COLLATE='utf8_general_ci'
 ENGINE=InnoDB; 
```

休眠类是

导入静态 javax.persistence.GenerationType.IDENTITY；

```
@Entity
@Table(name = "dealer_service")
public class DealerService implements java.io.Serializable {

private Integer                 idService;
private String                  serviceName;
private String                  shortDesc;
private String                  fullDesc;
private String                  offeredBy;
private String                  terms;
private String                  discriminator;
.
    .
    .

private Set<DealerService>      subServices; 
```

//setter 和 getter

```
@ManyToMany(cascade = { CascadeType.MERGE, CascadeType.PERSIST,
        CascadeType.ALL }, fetch = FetchType.EAGER)
@JoinTable( name = "service_to_services",
            joinColumns = { @JoinColumn(name = "service_id_main") },
            inverseJoinColumns = { @JoinColumn(name = "service_id_sub") })
public Set<DealerService> getSubServices() {
    return subServices;
}

public void setSubServices(Set<DealerService> subServices) {
    this.subServices = subServices;
} 
```

}

现在的问题是我必须再添加一张名为服务事件的表，pojo 类是这样的..

```
@Entity
@Table(na me = "service_incident")
public class ServiceIncident implements java.io.Serializable {

private Set<DealerService>selectedServices=  new HashSet<DealerService>(0);

 @ManyToMany(cascade = { CascadeType.ALL }, fetch = FetchType.EAGER)
@JoinTable( name = "work_list",
            joinColumns = { @JoinColumn(name = "service_incident_id") },
            inverseJoinColumns = { @JoinColumn(name = "dealer_service_id") })
public Set<DealerService> getSelectedServices() {
    return selectedServices;
}

public void setSelectedServices(Set<DealerService> selectedServices) {
    this.selectedServices = selectedServices;
}                                       0);
} 
```

在尝试在服务事件中插入选定的服务时，它是通过类似的异常

```
 org.springframework.dao.DuplicateKeyException: a different object with the same identifier value was already associated with the session: [cc.carcloud.domain.DealerService#2]; nested exception is org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [cc.carcloud.domain.DealerService#2]
at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:662)
at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)
at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:411)
at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
at org.springframework.orm.hibernate3.HibernateTemplate.save(HibernateTemplate.java:683)
at cc.carcloud.dao.GenericDaoImpl.save(GenericDaoImpl.java:46)
at cc.carcloud.serviceimpl.ServiceIncidentServiceImpl.add(ServiceIncidentServiceImpl.java:47)
at cc.carcloud.wscontroller.ServiceIncidentWSController.addServiceIncident(ServiceIncidentWSController.java:92)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
at org.springframework.security.web.authentication.www.DigestAuthenticationFilter.doFilter(DigestAuthenticationFilter.java:209)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [cc.carcloud.domain.DealerService#2]
at org.hibernate.engine.StatefulPersistenceContext.checkUniqueness(StatefulPersistenceContext.java:590)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performUpdate(DefaultSaveOrUpdateEventListener.java:284)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsDetached(DefaultSaveOrUpdateEventListener.java:223)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:89)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)
at org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:507)
at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:499)
at org.hibernate.engine.CascadingAction$5.cascade(CascadingAction.java:218)
at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:268)
at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:216)
at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
at org.hibernate.engine.Cascade.cascadeCollectionElements(Cascade.java:296)
at org.hibernate.engine.Cascade.cascadeCollection(Cascade.java:242)
at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:219)
at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
at org.hibernate.engine.Cascade.cascade(Cascade.java:130)
at org.hibernate.event.def.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:456)
at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:334)
at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:181)
at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:107)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:187)
at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:33)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:172)
at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:27)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)
at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:535)
at org.hibernate.impl.SessionImpl.save(SessionImpl.java:523)
at org.hibernate.impl.SessionImpl.save(SessionImpl.java:519)
at org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:686)
at org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:1)
at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
... 53 more 
```

任何人都可以请帮助我错了..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:31:21.427

消息异常说明了问题所在。您正在尝试调用`save()`一个分离的对象，从而将其附加到会话中。但是会话已经包含一个具有相同 ID 的附加对象。

它可能发生在如下情况：

```
DealerService detachedDealerService = new DealerService();
detachedDealerService.setId(2);

DealerService attachedDealerService = session.get(DealerService.class, 2);
session.save(detachedDealerService);
// exception: the dealer service with ID 2 is already in the session 
```

请注意，如果您的 ID 是自动生成的，那么调用`save()`已经具有 ID 的对象本身就是一个错误。`save()`用于创建新的持久对象。

# sql - Where 子句在 Oracle 中不起作用

> ID：11624746
> 
> 赞同：2
> 
> 时间：2012-07-24T05:37:23.530
> 
> 标签：sql, oracle, plsql

我的存储过程是这样的：

```
CREATE OR REPLACE PROCEDURE     Proc_SearchRequests
(
RequestedBy LONG,
FromDate DATE DEFAULT NULL,
ToDate DATE DEFAULT NULL,
RequestedByDesignation VARCHAR2 DEFAULT NULL,
TypeId INT,
CurrentStatusId INT DEFAULT NULL, 
AmountFrom LONG DEFAULT NULL,
AmountTo LONG DEFAULT NULL,
cur_ExcelOutput OUT SYS_REFCURSOR
  )
AS   
BEGIN
OPEN cur_ExcelOutput FOR
SELECT cd.*,
emp.FIRSTNAME || ' ' || emp.LASTNAME   AS ADDEDBYNAME
FROM 
DETAILS cd
LEFT JOIN EMPLOYEES emp ON cd.ADDEDBY = emp.EMPLOYEEID
WHERE
cd.TYPEID=TypeId;   

END; 
```

我将执行程序传递为：

```
BEGIN
PROC_SEARCHREQUESTS (110, to_date ('2001-01-01', 'YYYY-MM-DD'), to_date ('9999-12-31 23:59:59', 'YYYY-MM-DD HH24:MI:SS'), null, 2, 0, 0, 0, :cur_exceloutput$REFCURSOR);
END; 
```

但是无论我作为 TypeId 传递什么，我都会得到完整的数据，而不是过滤后的数据。如果我写“cd.TYPEID=2”，我会得到正确的结果，但在变量中传递值没有帮助。

有什么问题？..我错过了任何演员或其他东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T05:40:54.180

你有名字冲突。变量与列同名。改变变量（参数）

```
TypeId INT, 
```

进入

```
p_TypeId INT, 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T05:48:18.210

在编写存储过程时，您总是希望有某种命名约定来区分局部变量、过程参数和数据库列。由于标识符首先使用表中列的名称解析，然后使用局部变量或参数的名称解析，因此`WHERE`子句的两侧

```
WHERE cd.TYPEID=TypeId; 
```

解析为表的`TypeID`列`Details`。此查询永远不会查看参数中的值`TypeID`。

如果您采用标准命名约定（即用 为参数添加前缀，用 为`p_`局部变量添加前缀`l_`），您就不必担心引入范围解析错误。

像这样的东西应该可以工作（尽管您使用的数据类型非常不寻常`LONG`-例如，已被弃用很长时间，因此您确实应该在`VARCHAR2`那里使用 a （或者`CLOB`如果您确实需要超过 32k 的话，这似乎不太可能给定名称））。

```
CREATE OR REPLACE PROCEDURE     Proc_SearchRequests
(
  p_RequestedBy LONG,
  p_FromDate DATE DEFAULT NULL,
  p_ToDate DATE DEFAULT NULL,
  p_RequestedByDesignation VARCHAR2 DEFAULT NULL,
  p_TypeId INT,
  p_CurrentStatusId INT DEFAULT NULL, 
  p_AmountFrom LONG DEFAULT NULL,
  p_AmountTo LONG DEFAULT NULL,
  p_cur_ExcelOutput OUT SYS_REFCURSOR
)
AS   
BEGIN
  OPEN p_cur_ExcelOutput FOR
    SELECT cd.*,
           emp.FIRSTNAME || ' ' || emp.LASTNAME   AS ADDEDBYNAME
    FROM 
      DETAILS cd
      LEFT JOIN EMPLOYEES emp ON cd.ADDEDBY = emp.EMPLOYEEID
    WHERE
      cd.TYPEID=p_TypeId;   
END; 
```

# java - 多客户端/服务器。处理通讯

> ID：11624752
> 
> 赞同：0
> 
> 时间：2012-07-24T05:37:57.347
> 
> 标签：java, multithreading, sockets, client-server

自从两天以来，我一直在受这些代码的困扰。事实上，我正在开发一个具有服务器端和客户端的应用程序。服务器每秒接收来自客户端的请求，通过联系数据库处理请求，然后将结果发送回客户端。我这样做的方式是，如果客户端在服务器之前启动，它将继续尝试连接到给定端口和给定主机上的服务器。
1.这是服务器端：

```
try
    {   
        Client client = new Client(jTable1,jLabel3);
        Thread t = new Thread(client);
        t.start();

    }catch(IOException e){} 
```

类 Client.java

```
public class Client implements Runnable{

private int svrPort = 0;
ServerSocket serverConnect = null;
static  Socket clientSocket = null;
static  ClientConnectThread t[] = new ClientConnectThread[1000];
JTable jtable;
JLabel jlabel;

public Client(JTable table, JLabel label) throws IOException {

    this.svrPort = 9450;
    this.jtable = table;
    this.jlabel = label;

}

public void run(){
    try{
        serverConnect = new ServerSocket(this.svrPort);

    }catch(IOException e){}
    while(true){
        try{
            clientSocket = serverConnect.accept ();
            for(int i=0; i<=1000; i++){ //I can accept up to 1000 clients
        if(t[i]==null)
        {
            (t[i] = new ClientThread(client, t, jtable, jlabel)).start();
                        System.out.println ("Etat12\. Apres bloc try");
            break;
        }
    }
        }catch(IOException e){}
    }
} 
```

}

类 ClientThread.java

```
public ClientThread(Socket socket, ClientThread t[], JTable table, JLabel label){

    this._socket = socket;
    this.jTable = table;
    this.jlabel = label;
    this.totalConnected = 0;       
    this.t = t;
}

public void run(){

    int index = 0;
    try{
        this._output = new PrintWriter(this._socket.getOutputStream ());
        this._input = new BufferedReader(new InputStreamReader(this._socket.getInputStream()));

        while((clientMsg = this._input.readLine ()) != null){
            if(clientMsg.equals ("@CONNECT")){ // If it is the first time the user is signig in, fill the table

                jTable.setValueAt (this._socket.getInetAddress (), index, 0);
                jTable.setValueAt (new Date(), index, 1);
                jTable.setValueAt (new Date(), index, 2);
                totalConnected++;
                jlabel.setText ("");
                jlabel.setText (totalConnected+"");

            }else if(Integer.parseInt (clientMsg) == 1){
                int p = Integer.parseInt (clientMsg);
                this._output = new PrintWriter(this._socket.getOutputStream(), true);
                if (this.getData.connect ())
                {
                    if(this.getData.getDataByType (1).size () == 0){
                    }
                    _output.println (this.getData.getDataByPeriod (1));
                }else{System.out.println("You are not connected to the database server");}

            }else if(Integer.parseInt (clientMsg) == 2){
                int p = Integer.parseInt (clientMsg);
                this._output = new PrintWriter(this._socket.getOutputStream(), true);
                if (this.getData.connect ())
                {
                    if(this.getData.getDataByPeriod (2).size () == 0)System.out.println ("There is no data corresponding");
                    this._output.println (this.getData.getDataByPeriod (2));
                }else{System.out.println("You are not connected to the database server");}

            }else if(Integer.parseInt (clientMsg) == 3){
                int p = Integer.parseInt (clientMsg);
                this._output = new PrintWriter(this._socket.getOutputStream(), true);
                if (this.getData.connect ())
                {
                    if(this.getData.getDataByType (3).size () == 0)System.out.println ("There is no data corresponding");
                    this._output.println (this.getData.getDataByType (30));
                }else{System.out.println("You are not connected to the database server");}

            }else if(Integer.parseInt (clientMsg) == 4){
                int p = Integer.parseInt (clientMsg);
                this._output = new PrintWriter(this._socket.getOutputStream(), true);
                if (this.getData.connect ())
                {
                    if(this.getData.getDataByType (4).size () == 0)System.out.println ("There is no data corresponding");
                    this._output.println (this.getData.getDataByType (60));
                }else{System.out.println("You are not connected to the database server");}

            }else{

            }
        }
        this._input.close ();
        this._output.close ();
    }catch(IOException e){}

} 
```

这是使我的服务器运行的两个类。Client.java 类启动并等待接受连接。当客户端连接时，会创建一个 clientThread 实例并将其关联到客户端。直到这里，一切似乎都运行良好。

客户端

```
public class ServerConnect implements Runnable{

public static Socket clientSocket = null;
public static PrintWriter out = null;
public static BufferedReader in = null;
public static int port=9450;
public static String host = "127.0.0.1";
public static JLabel myLabel;
public static JButton button;
public static ResourceMap resourceMap;
private static String serverMsg = "";

public ServerConnect(JLabel jLabel, JButton b)
{
    jLabel.setText ("Trying to contact the server");
    myLabel = jLabel;
    button = b;
    port = Integer.parseInt("9450");
    host = "127.0.0.1";

        try{
            clientSocket = new Socket(host, port);
            }catch(IOException e){e.printStackTrace ();}

}

public void run()
{
    while(true){
        while(!this.connect ())
        {myLabel.setText ("You are not connected to the server : "+host);
         button.setEnabled (false);
            try{
                clientSocket = new Socket(host, port);
            }catch(IOException e){}
        }

        myLabel.setText ("You are connected to the server : "+host);
        button.setEnabled (true);
        try{
           out = new PrintWriter(clientSocket.getOutputStream(), true);
           out.println("@CONNECT");

           in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
           while((serverMsg = in.readLine ()) != null){
                System.out.println ("<=> :"+serverMsg);
           }
        }
        catch(IOException e){e.printStackTrace ();}
    }
}
private boolean connect()
{
    try{
        clientSocket = new Socket(host, port);
        return true;
    }catch(IOException e){}
    return false;
}} 
```

我的问题是，当双方启动时，客户端发送@CONNECT 的唯一内容，服务器接收它并全部停止在这里。如果客户端再次发送请求，服务器将不响应。
我希望有人逐步向我展示如何设置此应用程序
- 服务器端。接受带有 WHILE 循环的线程中的连接
- 客户端。在另一个线程中每次尝试联系服务器以建立连接
- 在另一个线程中，客户端再次向服务器发送请求
- 服务器是另一个线程从数据库中请求信息并发送回客户端。

我非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:30:56.223

哦，用 PrintWriter 等将所有内容放到低级套接字上是个坏主意。过去我遇到了几个编码和多线程错误。所以我的（当然慢一点，但易于使用）的解决方案是：Jersey & Grizzly。

**最大的优点是：您可以非常轻松地修改和扩展您的传输对象，而无需修改您的传输代码（低级套接字编写）**

一个界面...

```
public interface I_ServiceCommons {
        public static final String  MEDIATYPE           = "text/xml";
        public static final String  MEDIATYPE_ENCODING  = I_ServiceCommons.MEDIATYPE + "; charset=utf-8";
        public static final String SERIVCENAME = "/FUNNY_SERVICE_V001";
    } 
```

服务器端代码

```
@Path(I_ServiceCommons.SERIVCENAME)
public class YourService {

    @POST
    @Produces(I_ServiceCommons.MEDIATYPE)
    @Consumes(I_ServiceCommons.MEDIATYPE)
    public ResultObject request(final RequestObject yourRequest) {
        //process here your request in Server
    }
} 
```

你的客户……

```
public class abstract YourAbstractClient{
        protected Logger                            log             = Logger.getLogger(this.getClass());
        protected final String                      serviceUrl;
        private final WebResource                   resource;

        public YourAbstractClient(final String url) {
            this.serviceUrl = url + getService();
            this.resource = Client.create().resource(this.serviceUrl);
        }

        public abstract String getService();

        protected <RES, REQ> RES post(final Class<RES> resultClazz, final REQ req) {
            final Builder builder = this.resource.type(I_ServiceCommons.MEDIATYPE).accept(I_ServiceCommons.MEDIATYPE);
            try {
                final RES result = builder.post(resultClazz, req);
                return result;
            } catch (final Exception e) {
                throw new RuntimeException("Error posting data to [" + this.serviceUrl + "]: " + e.getMessage(), e);
            }
        }

    } 
```

您的服务客户端...

```
public class Service extends YourAbstractClient {

    public Service(final String url) {
        super(url);
    }

    public MyResult getResult(final MyRequest req) {
        return super.post(MyResult.class, req);
    }

    @Override
    public String getService() {
        return I_ServiceCommons.SERIVCENAME;
    }
} 
```

您的传输对象

```
@XmlRootElement
public class MyRequest implements Serializable {
    public void setRequestType(final int p_AequestType) {
        this.requestType = p_AequestType;
    }

    public int getRequestType() {
        return this.requestType;
    }
} 
```

而结局...

```
String url = "http://127.0.0.1";
GrizzlyServerFactory.create(url) //starts the server
MyRequest res = new MyRequest();
MyResult result = new Service(url).getResult(req); // Corrected 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:10:06.403

这很简单——但底层技术很复杂。;) 我以相反的顺序解释它（我的答案@ [https://stackoverflow.com/a/11625335/1268954](https://stackoverflow.com/a/11625335/1268954)）。

在主代码中，您使用 GrizzlyServerFactory.create(url) 启动 Grizzlyserver，它侦听“127.0.0.1”。

当服务器启动时，它会搜索带有注解 @Path ... 的类并找到“YourService”。

因此，Grizzly 将在 URL“ [http://127.0.0.1/FUNNY_SERVICE_V001](http://127.0.0.1/FUNNY_SERVICE_V001) ”上“注册”（或类似的）ServiceClass“YourService”（参见 I_ServiceCommons）。

好吧..我们再次进入主代码。我们创建一个 MyRequest 对象并创建一个具体服务“Service”的实例。更好的名称应该是“ServiceClient”，因为它是客户端的代码。“服务”是使用 URL（“ [http://127.0.0.1](http://127.0.0.1) ”）创建的，并进入 YourAbstractClient 中的公共构造函数代码（适用于所有客户端）并创建服务 URL“ [http://127.0.0.1/FUNNY_SERVICE_V001](http://127.0.0.1/FUNNY_SERVICE_V001)" . 在 YourAbstractClient 内部将创建一个客户端对象（用于连接/编码处理等）。当我们要访问服务器时，我们只需将 MyRequest 对象放入“服务”的“getResult”方法中。客户端在 YourAbstractClient 内部将 MyRequest 对象转换为 XML Reresentation（注意其中的 @XMLRootElement 注释、无参数构造函数和 set/get 方法）对服务器执行 HTTP POST，从而重新创建 MyRequest 对象。

所以再次在服务器端......所以当客户端以正确的方式连接到“ [http://127.0.0.1/FUNNY_SERVICE_V001](http://127.0.0.1/FUNNY_SERVICE_V001) ”时，服务器会创建一个YourService实例（需要无参数构造函数）并读取xml，创建transferobject MyRequest 并将其放入方法`public ResultObject request(final RequestObject yourRequest)`中，因为它使用@POST Annotation 进行了注释（在客户端我们执行HTTP-POST）。您可以处理您的 MyReqeust 对象，**并且必须返回**一个 MyResult 对象，该对象将转换为 xml，由客户端发送、接收并重新创建为 MyResult 对象。就是这样。

# php - 使用 web 服务提交表单

> ID：11624753
> 
> 赞同：-1
> 
> 时间：2012-07-24T05:37:58.307
> 
> 标签：php

我正在我的网站上建立一个表格。我想使用来自其他网站的一些公开的 Web 服务将详细信息保存到其他数据库/网站中。我怎样才能做到这一点。我对此一无所知。你能给出一些关于如何做到这一点的步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:42:09.413

您是要构建“客户端”端（带有表单的服务器）、“服务器”端（Web 服务接收详细信息）还是两者兼而有之？

客户端可以使用 php_curl 或类似的方法将数据发送到服务器上的[REST Web](http://en.wikipedia.org/wiki/Representational_state_transfer)服务

所以像这样

用户（填写表格）-> Frontend-server (PHP) -- [发送带有信息的请求] --> Backend-server（保存）

1.  所以理论上用户会发送到前端服务器`data data data`
2.  前端服务器 (PHP) 使用 curl 将信息发送到后端服务器`http://backend.server.com/heres-some-info.php?data=data%20data%20data`
3.  后端服务器将根据需要保存/处理数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:42:19.920

假设该网站有一些托管服务（如 godaddy.com），它将支持 MySQL 数据库和服务器端语言 - 如 PHP/Python 等。

1.  使用将值插入数据库的服务器端语言制作表单。
2.  从应用程序向表单发送数据。

# html - 侧面导航不可移动按钮

> ID：11624755
> 
> 赞同：0
> 
> 时间：2012-07-24T05:38:16.490
> 
> 标签：html, button, static, navigation

谁能告诉我如何在我的网站上嵌入一个侧面按钮，就像这个[网站](http://jobs.freelanceswitch.com/jobs/19706)中的那个一样。

我还看到一些带有不可移动聊天框的网站。有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:29:11.560

我认为您指的`position:fixed`是 CSS 中的属性。

它被锁定在屏幕上，并且在页面滚动时不会移动。

要嵌入，只需使用`<div style="display:block; z-index:999; position:fixed; top:0px; height:100px;">Content</div>`，您的内容将在屏幕左侧向下 100 像素。

`z-index`和`display`是分别用于指定层和包装的属性。

# javascript - 幻灯片画廊

> ID：11624759
> 
> 赞同：0
> 
> 时间：2012-07-24T05:38:36.520
> 
> 标签：javascript, highslide

我正在使用 Highslide 来展示我的照片。我想介绍简单的画廊 - 如果有人点击照片“dolno.jpg”，它将显示包含 3 张照片的画廊。现在只有一张（1.jpg）。我有 3 张图片：1.jpg、2.jpg、3.jpg 我该怎么做？这是我的代码：

```
<script type="text/javascript" src="/highslide/highslide.js"></script>
<link rel="stylesheet" type="text/css" href="/highslide/highslide.css" />
<script type="text/javascript">
    // override Highslide settings here
    // instead of editing the highslide.js file
    hs.graphicsDir = '/highslide/graphics/';
</script>

<td>
<a class="highslide" href="1.jpg" onclick="return hs.expand(this, { captionText: '<b>THIS</b>' } )">
<img src="/logafirm/dolno.jpg" id="imgg" title="Click to enlarge" height="80" weight="80"></a>
 <font color="#52180"><b>THIS</font></b></A>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:15:53.120

只需为您要显示的每个其他图像复制锚元素。

像这样

```
<a class="highslide" href="1.jpg" onclick="return hs.expand(this, { captionText:    '<b>THIS</b>' } )">
  <img src="/logafirm/dolno.jpg" id="imgg" title="Click to enlarge" height="80" weight="80">
</a>
<a class="highslide" href="2.jpg" onclick="return hs.expand(this, { captionText: '<b>THE OTHER IMAGE</b>' } )">
  <img src="/logafirm/THE_OTHER_IMAGE.jpg" id="imgg" title="Click to enlarge" height="80" weight="80">
</a> 
```

此外，您还需要指定幻灯片设置..

根据文档：

```
<script type="text/javascript">
hs.addSlideshow({
// slideshowGroup: 'group1',
interval: 5000,
repeat: false,
useControls: true,
fixedControls: true,
overlayOptions: {
    opacity: .6,
    position: 'top center',
    hideOnMouseOut: true
}
});

// Optional: a crossfade transition looks good with the slideshow
hs.transitions = ['expand', 'crossfade'];
</script> 
```

最后..如果您只想显示第一个缩略图，只需隐藏其他..使用 CSS 或者使用 javascript 可能更好（没有 js 的用户会看到图像）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:22:48.877

Highslide 有一个内置机制来做你想做的事 - 无需使用 CSS 或 Javascript 来隐藏其他两个缩略图。

[http://www.highslide.com/examples/mini-gallery.html](http://www.highslide.com/examples/mini-gallery.html)

# javascript - 如何使用javascript按降序对对象数组进行排序

> ID：11624766
> 
> 赞同：-1
> 
> 时间：2012-07-24T05:39:11.107
> 
> 标签：javascript, amcharts

这里我使用 amcharts API 来绘制饼图，它工作正常，但根据我的数据有超过 2000 个标准（饼图中超过 2000 个分区）.. 显示很多分区是无关紧要的.. 所以在这里我想要仅显示前 10 个分区

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>amCharts: Javascript only strategy</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="js/amstock.js" type="text/javascript"></script>
    <script type="text/javascript">           
        AmCharts.ready(function() {
            loadJavascriptChartA("chartdivA", "language.txt");
        });
        // this method creates a javascript chart ploting data from external file
        function loadJavascriptChartA(elementId, file) {
            var chart = new AmCharts.AmPieChart();
            // first we load the external data file
            var data = loadFile(file);                             
            // then we set a data provider to the chart
            chart.dataProvider = createDataProvider(data); 
            legend = new AmCharts.AmLegend();
            legend.align = "center";
            legend.markerType = "circle";
            chart.addTitle("Language Code/Tweets", 16);
            chart.addLegend(legend);                
            chart.titleField = "language";
            chart.valueField = "tweets";             
            chart.innerRadius = 10;
            chart.labelRadius = 1;
            chart.sequencedAnimation = true;
            chart.labelText = "[[title]]: [[value]]";
            chart.write(elementId); 
        // method which parses csv data
        function createDataProvider(data){
                    var rows = data.split("\n");
                    // create array which will hold our data:
                    dataProvider = [];
                    var start = "Tue 19 Jun 2012 01:00:00 GMT+0530 (India Standard Time)";
                    var end = "Fri 19 Jun 2012 01:00:00 GMT+0530 (India Standard Time)";
                    start = start.split(" ");
                    end = end.split(" ");
                    var starttime = start[1].concat(" ",start[2]," ",start[3]);
                    var endtime = end[1].concat(" ",end[2]," ",end[3]);
                    var bool = false;
                    var startline = 0;
                    var endline = 0;
                    var counter = 0;
            // loop through all rows
            for (var i = 1; i < rows.length; i++){
                        if (rows[i]) {                 
                            // our columns are separated by a semicolon
                            var column = rows[i].split(","); 
                            // column is array now
                            var date = column[0];
                            date = date.split(" ");
                            var day = date[0].concat(" ",date[1]," ",date[2]);
                        }
                        if(starttime.match(day) && bool!=true)
                        {
                            bool = true;
                            startline = i+1;
                        }
                        if(endtime.match(day)){
                            endline = i+1;
                        }
            }
            for (var j = startline-1; j < endline; j++){
                // this line helps to skip empty rows
                    // our columns are separated by a semicolon
                    var column = rows[j].split(","); 
                    // column is array now
                    var date = column[0];
                    date = date.split(" ");
                    var day = date[0].concat(" ",date[1]," ",date[2]);
                    var language  = column[1];
                    var tweets = parseInt(column[2]);
                            // check if category already exists
                            var catExists = false;
                                for (var x = 0; x < dataProvider.length; x++) {
                                    if (dataProvider[x].language == language) {
                                        catExists = true;
                                        dataProvider[x].tweets += tweets;
                                    }
                                }
                                function sortDescending(data_A, data_B)
                                {
                                    return (data_B.tweets - data_A.tweets);
                                }
                                var temp = dataProvider.sort(sortDescending);
                                if (!catExists) {
                                    // create object which contains all these items:
                                    var dataObject = {"language":language, "tweets":tweets};
                                    if(counter < 5){
                                    // add object to dataProvider array 
                                    temp.push(dataObject);
                                    counter++;
                                    }
                                }   
            }
            return dataProvider;     
        }
    }
        // method which loads external data
        function loadFile(file) {
            if (window.XMLHttpRequest) {
                // IE7+, Firefox, Chrome, Opera, Safari
                var request = new XMLHttpRequest();
            }
            else {
                // code for IE6, IE5
                var request = new ActiveXObject('Microsoft.XMLHTTP');
            }
            // load
            request.open('GET', file, false);
            request.send();
            // now lets load data into a new flash chart
            var data = request.responseText;
            //replace UNIX new line
            data = data.replace (/\r\n/g, "\n");
            //replace MAC new lines
            data = data.replace (/\r/g, "\n");
            return data;
        }

    </script>
</head> 
```

```
</body>
<!--script type="text/javascript"> 
    alert(document.getElementsByName('startDateField3.value'))
</script--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:44:14.727

使用[`array.sort()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort).

```
function compareNumbers(a, b) {
    return b - a;
}

numberArray.sort(compareNumbers); 
```

# excel - 将新单元格添加到 Sum 公式

> ID：11624770
> 
> 赞同：0
> 
> 时间：2012-07-24T05:39:26.527
> 
> 标签：excel, excel-formula, vba

我有一个电子表格，我在总列之前插入两列并填充数据。

例如。

```
 A       B             C       D             E       F         G       H
  May-12                Jun-12                Jul-12            Total
  Spend   #Trans        Spend   #Trans        Spend   #Trans    Spend   #Trans 
3 $100    1             $200    3             $400    10        --->See formula Below 
```

截至 6 月 12 日的总支出的总和公式为：

```
 =SUM(A3,C3) 
```

我可以将单元格值存储到数组中然后编写公式吗？

现在需要添加 Jul-12

```
 =SUM(A3,C3,E3) 
```

我的问题是，当我在 Jun-12 和 Total 之间插入 7 月数据的列时，如何编写宏来更新公式以添加新列 Spend 和 #Trans？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:55:14.240

试试这个

```
=SUMIFS(3:3,2:2,"Spend") 
```

或者如果您使用的是 Excel 2003 或更早版本

```
=SUMIF(2:2,"Spend",3:3) 
```

# delphi - 向我的 Delphi 应用程序添加热键

> ID：11624771
> 
> 赞同：7
> 
> 时间：2012-07-24T05:39:27.223
> 
> 标签：delphi, delphi-7

假设我有一个表格，上面有一个菜单栏。我在菜单栏上有一个项目 a `TMenuItem`，我可以为其分配一个快捷键组合，例如`Ctrl`+ `I`。但是，当我为 分配`ShortCut`属性时`TMenuItem`，它似乎只是更改了菜单项的视觉外观以显示快捷键代码，而不是自动侦听要按下的快捷键并触发我的 ActionManager 代码。

我的 google-fu 今天似乎失败了，我只找到有关如何为 Windows 分配全局热键的文章，而不是如何分配仅适用于活动表单的特定于应用程序的热键。

任何人都可以为我概述添加热键所需的步骤，而不仅仅是在菜单中添加快捷方式属性。我在想某个地方我可能需要将表单设置为监听键盘输入并捕获按键并响应它？但我不完全确定 Delphi 会在哪里或以什么方式做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T07:23:14.147

您似乎正在使用 Actions (ActionManager)，因此请将您的快捷方式分配给相关的 Action。（将 Action 分配给 MenuItem 也会将快捷方式分配给菜单项。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T17:13:01.227

考虑没有为 VCL 消息提供窗口句柄的示例，我们使用**WM_HOTKEY**。此消息由 Windows 热键中的已注册窗口发送，允许程序响应它，即使没有输入焦点：

```
type
TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    { Private declarations }
    // Declare a event handler
     procedure WMHotKey(var Msg: TWMHotKey); message WM_HOTKEY;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TForm1 }

procedure TForm1.FormCreate(Sender: TObject);
begin
   // Registering a hotkey Ctrl+Alt+F5
   RegisterHotKey(Handle, 0, MOD_CONTROL or MOD_ALT, VK_F5);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  // Unregisters a hotkey
   UnRegisterHotKey(Handle, 0);
end;

procedure TForm1.WMHotKey(var Msg: TWMHotKey);
begin
   // This procedure is called when a window message WM_HOTKEY
   inherited;  // We give the form to process the message,
               // if she already has its handler
   Beep;       // We perform additional actions
end; 
```

# c - 与过程调用和汇编语言相关

> ID：11624775
> 
> 赞同：2
> 
> 时间：2012-07-24T05:39:54.977
> 
> 标签：c, assembly

当我遇到这个时，我正在研究 C 的一些概念：

```
int add (int a, int b)
{
return a+b;
}

int main()
{
int a,b;
a = 3;
b = 4;
int ret = add(a,b);
printf("Result: %u\n", ret);
exit(0);
} 
```

为其生成的汇编代码如下：

```
<main>:

1: push ebp

2: mov ebp, esp

3: sub esp, 0x18

4: mov eax, 0x0 
```

.........（更多代码但与问题无关）

我想问的问题是为什么在第 3 步中堆栈指针（esp）的值减少了 24（0x18）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T05:52:25.407

它为堆栈上的六个 4 字节整数腾出空间。这些的确切用法取决于编译器和体系结构，但这些肯定包括一个 for `a`、`b`和`ret`.

顺便说一句，当我在装有 gcc 4.2.1 的 MacBook Pro（x86、64 位、SnowLeopard）上尝试此代码时，它为*8 个*4 字节整数腾出了空间。除了上述之外，这些还包括一个用于`eax`在调用`add()`and之前存储 的值`printf()`，因为每个结果都在其中返回（显然是由于“cdecl”调用约定）。我机器上的布局如下所示：

```
-32:  unused
-28:  unused
-24:  unused
-20:  stores eax prior to each function call
-16:  ret
-12:  b
 -8:  a
 -4:  unused (potentially return value for main())
 ----------------
  0:  original base pointer 
```

我的猜测是 -4 处的第一个未使用的插槽是用于`main()`. 我通过替换`exit()`为`return -1;`. 在这种情况下，它在堆栈上的 -4 和 -8 处分配了两个整数作为返回值的副本。（这似乎是我的编译器的方式，`add()`也复制了返回值。）

对于其他 3 个未使用的插槽，我的猜测是我的编译器正在尝试对齐 8 字节边界（至少）。这并不能解释为什么它在堆栈顶部添加了另外 8 个字节（两个未使用的整数）。（我不太确定那里发生了什么——也许它更喜欢在 16 字节边界上对齐？）

您的编译器可能以不同的方式对齐事物（并且可能还使用其他一些调用约定和/或优化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:08:13.477

在将控制权转移到函数调用之前，编译器会存储函数的返回地址、函数中使用的临时变量以及传递给函数的参数。所有这些都存储在堆栈帧中，因此堆栈指针递减。我不确定为什么它会减少`sp`（`0x18`可能您在 64 位机器上，因此 3（两个临时 + 一个返回地址）* 8 字节（64 位）::= 0x18）

# php - 如何检查用户是否在主页中（Zend FrameWork）

> ID：11624776
> 
> 赞同：0
> 
> 时间：2012-07-24T05:39:58.867
> 
> 标签：php, zend-framework

当页面是主页面时，我需要在视图中隐藏一些项目，其他页面将显示该项目

那么我需要使用什么功能来检查页面是否是主页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:18:42.013

您可以使用以下代码获取当前控制器和操作名称，

```
$controller = $this->getRequest()->getControllerName();
$action = $this->getRequest()->getActionName(); 
```

对于主页，您可以将条件设​​置为控制器是“索引”并且操作是“索引”，您的代码应该执行或不执行这一切............

如果您不在控制器用户中

```
Zend_Controller_Front::getInstance()->getRequest()->getControllerName();
Zend_Controller_Front::getInstance()->getRequest()->getActionName(); 
```

# windows - 如何从 ListView 对象中获取视图（可能是项目模板）对象，如图像或文本块？

> ID：11624777
> 
> 赞同：1
> 
> 时间：2012-07-24T05:39:58.773
> 
> 标签：windows, windows-8

Windows Metro 应用程序：

我需要一种方法来找到组成 ListView 的项目（或单元格）的中心。例如：如果我在填充 ListView 的 stackpanel 中有一个 Image 和 TextBlock，我想要该 stackpanel 的中心或它包含的任何对象或视图。（Windows 8 的新用户）提前致谢..!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:27:57.790

下面是一些代码，可以为您提供元素的中心点 - 它采用通用 FrameworkElement，因此您可以传入 ListView、StackPanel 或其他控件。

```
 /// <summary>
    ///  Gets the center point of any element 
    /// </summary>
    private Point GetCenterPoint(FrameworkElement element)
    {
        GeneralTransform buttonTransform = element.TransformToVisual(null);

        // This gives the point in the upper left-hand corner of the element.  
        Point topLeftPoint = buttonTransform.TransformPoint(new Point());

        // Now get the center point.
        Point centerPoint = new Point();
        centerPoint.X = topLeftPoint.X + element.ActualWidth / 2;
        centerPoint.Y = topLeftPoint.Y + element.ActualHeight / 2;

        return centerPoint;
    } 
```

希望这可以帮助！

# android - 需要帮助才能在 3rd 方 VOIP 应用程序中使用本机 IN-CALL 屏幕

> ID：11624779
> 
> 赞同：3
> 
> 时间：2012-07-24T05:40:03.280
> 
> 标签：android, android-intent, sip, voip

我正在开发一个 VoIP 应用程序。

```
My app registers to a SIP based back-end server using a User-ID and password.
Once the registration is successful, the user can make sip calls through this app.
If the user uses the native phone dialer to dial out a number, My app intercepts the call and places the call through SIP.
Once the call is intercepted, the native phone dialer goes to background and my app's 'call status' screen is displayed(my app comes to foreground). 
```

我的要求如下：

一旦通话被截获，我们需要显示本地拨号器（默认电话拨号器）“通话状态”/“通话进度”屏幕（如三星手机的三星 Touchwiz、HTC 手机的 HTC Sense 等），而不是显示我的应用程序的 UI ，但通话应该通过我的应用程序（SIP）。我们的应用程序应该控制本机拨号器“呼叫状态”屏幕的所有功能。

例如：如果用户在本地拨号器的“通话状态”屏幕上点击“通话结束”按钮，我的应用程序应该结束通话。同样，本机拨号器的“呼叫状态”屏幕上的所有控件都应将控制权移交给我的应用程序以采取必要的措施。

请让我知道是否有可能实现这一点以及如何实施。

```
*public void onReceive(final Context context, Intent intent) {
    final String intentAction = intent.getAction();
    if (intentAction.equals(Intent.ACTION_NEW_OUTGOING_CALL)) {
        SharedPreferences getPrefs = PreferenceManager
                .getDefaultSharedPreferences(context);
        boolean bool_CustomFlag = getPrefs.getBoolean(
                "use_custom_dialer_preference", true);
        if (bool_CustomFlag == true) {
 setResultData(null);
    final String strPhoneNum = intent*
            .getStringExtra(Intent.EXTRA_PHONE_NUMBER);
    (new Thread() {
        public void run() {
            try {
Intent intent = new Intent(Intent.ACTION_CALL,Uri.fromParts("my_data_scheme",    
    Uri.decode(strPhoneNum),null));                                               
 intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(intent);

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }).start(); 
```

} }*

我为我的拨出电话活动创建了自己的数据方案，以便 brodcastreciver 可以在通过本机拨号器拨打电话时收听 Action_outgoing_call 并启动我的拨出电话活动。

```
*<activity
        android:name=".OutgoingCallActivity"
        android:screenOrientation="portrait">
        <intent-filter >
            <action android:name="android.intent.action.CALL" />
            <category android:name= "android.intent.category.DEFAULT" />
            <data android:scheme = "sip" />
            <data android:scheme="my_data_scheme" />
        </intent-filter>
    </activity>*` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-02T04:21:24.763

抱歉，Android 没有任何 API 可以使用内置的调用状态屏幕执行您想要执行的操作。

唯一记录在案的方法是调出您自己的通话状态屏幕。很多 SIP 应用程序模拟内置的 android incall 状态屏幕，所以看起来还是一样的。

# magento - 首先存款，在使用magento支付剩余金额后

> ID：11624789
> 
> 赞同：2
> 
> 时间：2012-07-24T05:40:58.727
> 
> 标签：magento, payment

我是 magento 的新手。请澄清我我想做下面的任务

如果购物车金额大于（总计）500，则首先收取 10% 的押金，然后在产品交付用户必须支付剩余金额之前。如果购物车金额（总计<=500），则用户必须支付总金额。

我怎么能做到这一点有任何扩展？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:03:11.980

自定义的最佳选择是在 Magento 中对订单使用部分捕获。

要实现这样的定制，您需要：

*   支票是您的付款方式支持订单的部分捕获。
*   如果是这样，那么您可以将其捕获方式更改为“授权”，这样信用卡上的金额就会被锁定。并创建与锁定金额的 10% 匹配的发票。
*   一旦订单交付，但您需要为剩余金额创建发票。

所以你可以观察到的事件：

*   sales_order_place_after 以授权金额的 10% 创建部分发票（不要忘记设置适当的捕获标志）。如果总数少于 500，则只需创建一张包含全部订单金额的发票。
*   在管理面板中，销售经理可以自己创建发票，通过创建发票，或者如果您想使其自动，只需观察 sales_order_shipment_after_save 事件即可自动创建剩余订单金额的发票。

# c++ - 提升/输出到文件

> ID：11624790
> 
> 赞同：2
> 
> 时间：2012-07-24T05:41:03.360
> 
> 标签：c++, boost, file-io, stream

我可以仅使用 boost 库将一些文本输出到文件吗？

我拥有的代码（官方文档）：

```
#include <ostream>
#include <boost/iostreams/device/file.hpp>
#include <boost/iostreams/stream.hpp>

namespace io = boost::iostreams;

int main()
{
    io::stream_buffer<io::file_sink> buf("log.txt");
    std::ostream                     out(&buf);
    // out writes to log.txt
    out << "abc";
} 
```

还有其他方法吗？（我不想使用标准流）。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T06:59:03.363

C++ 程序中的输入和输出可以通过四种方式完成：

1.  使用 C++ I/O 流。这是推荐的方式。即使使用 Boost I/O 流，也都是在幕后使用标准 I/O 流，并使用流运算符`<<`和`>>`.
2.  C `FILE`API ：`fopen`, `fprintf`////等。我认为有 Boost I/O 流可以处理，但是您仍在使用流运算符和.`fwrite``fgets``fread``FILE``<<``>>`
3.  在 Windows 上，使用 POSIX 子系统文件描述符。我认为这些也可以用于 Boost I/O 流。
4.  本机文件处理。在 POSIX 系统（例如 Linux、BSD、OSX）上，这与上面的 3 相同，在 Windows 上，请参见例如[此链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364232%28v=vs.85%29.aspx)。

Boost I/O 流不应该是一个独立的 API，而是使用上述 I/O 系统之一来为程序员简化一些事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:48:05.287

`io::stream_buffer`派生自`std::basic_streambuf`，因此您可以使用本机`basic_streambuf`公共方法，也可以使用`boost::filesystem`流，但所有这些类都是从`std::`类派生的。

[http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/reference.html#File-streams](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/reference.html#File-streams)

# php - 只读 pdf 文件并在目录中获取该 pdf 文件的文件名

> ID：11624793
> 
> 赞同：2
> 
> 时间：2012-07-24T05:41:06.043
> 
> 标签：php

我只需要读取目录中的 pdf 文件，然后读取每个文件的文件名，然后我将使用文件名重命名一些 txt 文件。我试过只使用eregi 功能。但它似乎无法阅读我需要的所有内容。如何读好它们？这是我的代码：

```
$savePath   ='D:/dir/';
$dir       = opendir($savePath);
$filename  = array();

while ($filename = readdir($dir)) {
if (eregi("\.pdf",$filename)){
    $read = strtok ($filename,"."); //get the filenames

//to rename some txt files using the filenames that I get before
//$testfile is text files that I've read before
    $testfile = "$read.txt";
    $file = fopen($testfile,"r") or die ('cannot open file');

    if (filesize($testfile)==0){} 
    else{
        $text = fread($file,55024);
        fclose($file);
        echo "</br>"; echo "</br>";         
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T05:48:38.537

更优雅：

```
foreach (glob("D:/dir/*.pdf") as $filename) {
    // do something with $filename
} 
```

仅获取文件名：

```
foreach (glob("D:/dir/*.pdf") as $filename) {
    $filename = basename($filename);
    // do something with $filename
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:44:32.757

您可以通过过滤文件类型来执行此操作。以下是示例代码。

```
<?php 

// directory path can be either absolute or relative 
$dirPath = '.'; 

// open the specified directory and check if it's opened successfully 
if ($handle = opendir($dirPath)) { 

   // keep reading the directory entries 'til the end 
   $i=0; 
   while (false !== ($file = readdir($handle))) { 
   $i++; 

      // just skip the reference to current and parent directory 
      if (eregi("\.jpg",$file) || eregi("\.gif",$file) || eregi("\.png",$file)){ 
         if (is_dir("$dirPath/$file")) { 
            // found a directory, do something with it? 
            echo " [$file]<br>"; 
         } else { 
            // found an ordinary file 
            echo $i."- $file<br>"; 
         } 
      } 
   } 

   // ALWAYS remember to close what you opened 
   closedir($handle); 
}  

?> 
```

以上演示了与图像相关的文件类型，您可以对 .PDF 文件执行相同的操作。

[在这里](http://www.daniweb.com/web-development/php/threads/343248/list-files-in-directory-but-only-with-a-chosen-extension)更好地解释

# python - Django 或 Python 中是否有任何方法用于预测？

> ID：11624795
> 
> 赞同：1
> 
> 时间：2012-07-24T05:41:17.477
> 
> 标签：python, django

例如，如果用户键入[http://myurl.com/arti](http://myurl.com/arti)

它将重定向到 404 页面，我在其中显示 url

/article（类似的链接）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:48:52.173

您可以使用一个包罗万象的 URL，例如`url(r"^(.*)$"`作为您的最后一个条目`urls.py`，然后使用一些[字符串相似性度量](http://en.wikipedia.org/wiki/Category:String_similarity_measures)来查找可能的 URL。有关示例，请参[见此](https://stackoverflow.com/questions/1471153/string-similarity-metrics-in-python)问题。或者[这个](https://stackoverflow.com/questions/682367/good-python-modules-for-fuzzy-string-comparison)更多的。

或者也许只是对已知网址的简单`startswith()`循环就可以了？

如果只有一个匹配项，您的视图*可能*应该返回一个带有重定向（结果代码`302`或`303`）的响应 - 如果没有（或多个）一个`404`包含可能匹配项列表的页面是要走的路。

# c# - TcpClient 连接接收和发送超时

> ID：11624803
> 
> 赞同：0
> 
> 时间：2012-07-24T05:41:59.413
> 
> 标签：c#, .net

我正在使用 TcpClient 连接到套接字，下面是示例代码，我连接到套接字一次以保留连接会话 ID，然后我继续从套接字发送和接收消息，直到找到有效消息，然后我停止：

```
// client is a global object to retain connection session id
TcpClient client = new TcpClient("127.0.0.1", 1800);

public void Connect()
{
    message = "First message"; // first message

    do 
    {
       Byte[] data = System.Text.Encoding.ASCII.GetBytes(message);         

       NetworkStream stream = client.GetStream();

       stream.Write(data, 0, data.Length);    

       data = new Byte[256];

       String responseData = String.Empty;

       Int32 bytes = stream.Read(data, 0, data.Length);
       responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes);

    } while (message = "valid") // loop untill message is valid

    stream.Close();
    client.Close();
} 
```

我的问题是如何在我的代码中有效地使用 TcpClient.ReceiveTimeout 和 TcpClient.SentTimeout 20 秒？

我是否使用 TcpClient 连接做正确的事情以保留连接会话 ID？

谢谢你。

# mysql - MySQL 中的 BLOB 和 TEXT 数据类型有什么区别？

> ID：11624807
> 
> 赞同：131
> 
> 时间：2012-07-24T05:42:21.067
> 
> 标签：mysql, database, text, blob

什么是`blob`和什么是`text`？有什么区别？

我什么时候需要使用`blob`，什么时候需要`text`作为数据类型？

因为对于`blob`and `text`，有`mediumblob`== `mediumtext`, `smallblob`== `small text`。它们甚至具有相同的含义吗？

看看这个`MEDIUMBLOB`，`MEDIUMTEXT L`+ 3 个字节，其中`L < 224`.

是什么`L`？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-24T05:45:56.887

TEXT 和 CHAR 将转换为/从它们与时间关联的字符集。BLOB 和 BINARY 只存储字节。

BLOB 用于存储二进制数据，而 Text 用于存储大字符串。

BLOB 值被视为二进制字符串（字节字符串）。它们没有字符集，排序和比较基于列值中字节的数值。

TEXT 值被视为非二进制字符串（字符串）。它们有一个字符集，并且根据字符集的排序规则对值进行排序和比较。

[http://dev.mysql.com/doc/refman/5.0/en/blob.html](http://dev.mysql.com/doc/refman/5.0/en/blob.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-03-16T19:06:41.733

Blob 数据类型存储像图像这样的二进制对象，而文本数据类型存储像网页文章这样的文本对象

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-24T05:46:12.277

TEXT 和 CHAR 或 nchar 通常会转换为纯文本，因此您只能存储字符串等文本。

BLOB 和 BINARY 这意味着您可以存储二进制数据，例如图像，只需存储字节。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-24T05:46:05.183

BLOB 是一个二进制字符串，用于保存可变数量的数据。大多数情况下，BLOB 用于保存实际的图像二进制文件，而不是路径和文件信息。文本用于大量字符串字符。通常，博客或新闻文章将构成 TEXT 字段

在这种情况下，L 用于说明存储要求。(Length|Size + 3) 只要小于 224。

参考：[http ://dev.mysql.com/doc/refman/5.0/en/blob.html](http://dev.mysql.com/doc/refman/5.0/en/blob.html)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-10-14T20:31:35.933

根据高性能Mysql书：

> **BLOB**和**TEXT**系列之间的唯一区别是**BLOB** 类型存储没有排序规则或字符集的二进制数据，但**TEXT** 类型具有字符集和排序规则。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-21T09:56:57.990

BLOB 存储超过 2 GB 的二进制数据。BLOB 的最大大小为 4 GB。二进制数据是指非结构化数据，即图像音频文件视频文件数字签名

文本用于存储大字符串。

# linux - Sed 4.2.1 的编译问题

> ID：11624809
> 
> 赞同：1
> 
> 时间：2012-07-24T05:42:27.913
> 
> 标签：linux, compilation, sed, gawk, linux-from-scratch

当我尝试启动 Sed 的 ./configure 命令时，我得到：

```
gawk: ./conf1dkaC9/subs.awk:3: fatal error: internal error
./config.status: line 1409:  7676 Done                    eval sed \"\$ac_sed_extra\" "$ac_file_inputs"
  7677 Aborted                 (core dumped) | $AWK -f "$tmp/subs.awk" > $tmp/out
  config.status: error: could not create bootstrap.sh 
```

我实际上正在关注 LFS 7.1 书。昨晚我在处理 Sed 编译的章节停止了我的工作，因此我关闭了我的电脑。当我今天早上打开它时，每个包的每个 ./configure 命令都失败并返回上面的消息。在我关闭我的电脑之前，相同的包在 ./configure 上没有问题。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:44:57.013

由于在 tmp 中创建了许多文件，我对 tmp 文件也有类似的问题。您可以尝试清理您的`/tmp`目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T12:09:11.897

看起来临时工具链中的可执行文件已损坏。由于用户 lfs 在 /usr/bin 和 /bin 之前的 PATH 中有 /tools/bin ，因此它已经使用该可执行文件。要恢复，请尝试从 /tools/bin 中删除损坏的可执行文件，然后重复安装它的步骤。

我猜测哪个可执行文件被破坏是 sed，但它也可能是 gawk（如前面的答案所示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:03:51.117

看来您的`gawk`二进制文件已损坏。尝试重新安装它。

# sql - SQL Server 按过去 24 小时、过去 7 天和过去 14 天分组

> ID：11624810
> 
> 赞同：0
> 
> 时间：2012-07-24T05:42:32.400
> 
> 标签：sql, pivot

我需要编写一个 SQL 查询来生成以下结果集。实现这一目标的最佳方法是什么？

```
Time Range          Qty                Amount
===============================================
Last 24 Hours       56                 $2000
Last 7 Days         359                $3900
Last 14 Days        2321               $22,888 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T05:52:55.167

```
select  'Last 24 hours'
,       sum(Qty) as Qty
,       sum(Amount) as Amount
from    YourTable
where   TradeDt > dateadd(hour, -24, getdate())
union all
select  'Last 7 days'
,       sum(Qty)
,       sum(Amount)
from    YourTable
where   TradeDt > dateadd(day, -7, getdate())
union all
select  'Last 14 days'
,       sum(Qty)
,       sum(Amount)
from    YourTable
where   TradeDt > dateadd(day, -14, getdate()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:54:00.707

我的第一个猜测是使用 UNION，如果您绝对需要一个表作为结果（否则，您可以逐行获取数据）。

我认为在 SQL 中没有更好的方法来做到这一点。

```
SELECT 'Last 24 hours', SUM(qty), SUM(amount)
 FROM table
 WHERE datediff(day, getdate(), date) = 1

UNION

SELECT 'Last 7 days', SUM(qty), SUM(amount)
 FROM table
 WHERE datediff(getdate(), date, 'day') < 7

UNION

SELECT 'Last 14 days', SUM(qty), SUM(amount)
 FROM table
 WHERE datediff(getdate(), date, 'day') < 14 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T05:56:43.800

您可以在 dateAdd 上使用 where 子句，例如

```
select * from table
where datefield > DateAdd(d,-1,getdate()) 
```

select * from table where datefield > DateAdd(d,-7,getdate()) select * from table where datefield > DateAdd(d,-14,getdate())

一天等

# ios - 为什么这个本地 html 页面不加载？

> ID：11624813
> 
> 赞同：0
> 
> 时间：2012-07-24T05:42:58.190
> 
> 标签：ios, uiwebview

我有以下内容：

```
@interface HelpViewController : UIViewController <UIWebViewDelegate>
@property (nonatomic, retain) IBOutlet UIWebView *webView;
@end 
```

对于同一个视图控制器

```
@implementation HelpViewController

@synthesize webView = _webView;

- (void) viewDidLoad
{
    [super viewDidLoad];
    NSString *filePath=[[NSBundle mainBundle] pathForResource:@"test" ofType:@"html"];
    NSLog(@"%@", filePath);
    [self.webView loadData:[NSData dataWithContentsOfFile:filePath]
                  MIMEType:@"text/html"
          textEncodingName:@"UTF-8"
                   baseURL:nil];
} 
```

和这个视图控制器一起使用的基本上是空的笔尖。这`file's owner`是一个出口`view`。文件路径恢复正常。但是视图中没有任何显示。我认为问题在于它`IBOutlet UIWebView *webView`没有连接到任何东西，因为我不知道将它连接到什么。那是问题吗？如果是这样，我需要知道将其连接到什么；否则，我需要任何帮助！谢谢！

编辑：忘了提到我认为我有与这个[SO Question](https://stackoverflow.com/questions/9092296/uiwebview-show-blank-to-ios-dev-beginner)相同的问题，它说连接插座，但没有说什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:21:29.483

通常，当您将新文件添加到项目时，xcode 会自动将其添加到目标的“复制捆绑资源”部分。

有时，如果您与其他人合作，project.pbxproj 将不同步，并且此条目将被删除。修复方法是确保 Resources 文件夹中的所有文件（发行版中需要）也存在于“复制捆绑资源”部分中，如果不只是将其从资源拖到该部分。

在您的情况下，拖动检查您的 html 文件是否存在于复制包资源中。检查项目 > 目标 > 构建阶段 > 将资源复制到捆绑包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:39:50.590

好吧，在对其他 SO 页面和一些非 SO 材料进行了大量研究之后，我发现我没有将库中的 Web 视图添加到 nib。所以这就是为什么我无法连接它。所以我首先确保连接了“常规”视图，从库中添加了 Web 视图并连接了它的视图。然后我需要在我的代码中添加以下行：

```
 [self.view addSubview:_webView]; 
```

到`viewDidLoad`. 哇！

# javascript - 从 obj c 类调用 javascript 函数对我不起作用

> ID：11624817
> 
> 赞同：2
> 
> 时间：2012-07-24T05:43:07.247
> 
> 标签：javascript, iphone, objective-c, ios, webview

这不适用于我从目标 C 类调用 HTML 页面中的 javascript 函数

谁能告诉我调用函数的更好方法......

```
[self.webView stringByEvaluatingJavaScriptFromString:@"javascript:values()"]; 
```

在值方法中，我只是放置一个显示“Hello world”的警报

我尝试了所有可能的方式

1.  [self.viewController.webView stringByEvaluatingJavaScriptFromString:@"javascript:values()"];

2.  [self.viewController.webView stringByEvaluatingJavaScriptFromString:@"values()"];

3 NSString *val=[self.viewController.webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"values();"]];

请帮助我，我的 html 文档是这样的

```
<html>
    <head>
        <script type="text/javascript" language="JavaScript">
            alert("Just entered in to script");
            function values()
            {
                alert("In function success");

            }
            </script>    
    </head>
    <body>
       Hello 
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:48:38.767

请尝试调用这样的方法（删除“javascript：”）它可能会对您有所帮助。一旦我像这样使用过

```
[self.webView stringByEvaluatingJavaScriptFromString:@"values();"]; 
```

和里面

```
function values()
{
 //try this
 navigator.notification.alert("In function success");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-31T15:47:21.573

你有没有尝试过：

```
[self writeJavascript:@"values();"]; 
```

# c# - 使用处理程序下载文件后会话被清除

> ID：11624821
> 
> 赞同：0
> 
> 时间：2012-07-24T05:43:22.673
> 
> 标签：c#, asp.net, session, download, httphandler

在我们的项目中，我们有一个管理应用程序和一个客户端应用程序。管理应用程序用于管理所有客户端。

因此，当我登录到服务器应用程序时，管理员凭据保存在会话中。

之后，我在另一个浏览器中访问了客户端应用程序。它包含下载功能。下载后发生的是它清除所有会话数据。因此，每次下载后，我都需要在管理模块中再次登录。

**下载处理程序**

```
 if (context.Request["fileUrl"] != null)
                {
                    fileUrl = context.Request["fileUrl"].ToString();                    
                }
                string filename = System.IO.Path.GetFileName(fileUrl);    
                context.Response.ClearContent();
                   context.Response.ContentType = "application/exe";
                context.Response.AddHeader("content-disposition", String.Format("attachment; filename={0}", filename));
                context.Response.TransmitFile(fileUrl);                
                context.Response.Flush(); 
```

我使用 iframe 进行下载。所以我会在点击下载按钮时设置 iframe 的来源

**文件隐藏代码**

```
iframeDownload.Attributes["src"] = "DownloadHandler.ashx?fileUrl=" + downloadUrl;
//code to be executed after download
//here i am enabling a timer control 
```

但我找不到为什么在下载后会话被清除。我在这个 SO 帖子中发现了一个类似的问题。 [文件下载后会话过期](https://stackoverflow.com/questions/1370285/session-expires-after-file-download)

但对他来说，它只发生在 IE 中，但就我而言，它发生在所有浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:50:07.720

实际上，在成功下载后的代码中，我们需要从我的应用程序中删除一个文件夹。这会导致 App_domain 重新启动。

参考：所以[从 ASP.NET 应用程序中删除目录返回到新会话](https://stackoverflow.com/questions/638668/delete-directory-from-asp-net-application-returns-to-new-session)。

# php - php表单不重定向

> ID：11624822
> 
> 赞同：0
> 
> 时间：2012-07-24T05:43:23.463
> 
> 标签：php, forms, redirect, header

这是我的代码。提交表格后，它只是显示空白。它在 localhost 服务器上运行良好，但在实时服务器上却不行。

```
<?php  
session_start();  
require_once("codelibrary/inc/variables.php");  
require_once("codelibrary/inc/functions.php");  

$name = $_POST['name'];  
$age = $_POST['age'];  
$add = $_POST['add'];  
$no  = $_POST['no'];  
$mob = $_POST['mob'];  
$mail=$_POST['mail'];  

 if($_POST['save'] == "Submit")
    {

      $_SESSION['sess_msg']='Thanks.Your info.has been saved.';
      $result=add_user($name,$age,$add,$no,$mob,$mail);         

      header("location: join.php");
    exit();
     }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:03:55.627

在调用标头函数之前，您是输出空格或其他单词。

检查实时服务器上的错误日志或执行 error_reporting(E_ALL);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:08:46.477

试着把`ob_start();`线放在上面`session_start();`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:09:52.313

我怀疑您的脚本中有错误，正在终止解析器。由于您的实时服务器应该抑制错误，请尝试添加

```
ini_set( 'display_errors', 1 );
error_reporting( E_ALL ); 
```

到脚本的开头。或者，如果您可以访问它们，您可以检查 PHP 日志是否有错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-24T05:52:04.800

移除 exit() 函数

如果您仍然遇到问题，请尝试使用

if(isset($_POST) && $_POST['提交'] !="")

而不是你的

if($_POST['save'] == "提交")

# quickfix - QuickFix如何不发送重新发送请求？

> ID：11624831
> 
> 赞同：0
> 
> 时间：2012-07-24T05:44:32.547
> 
> 标签：quickfix

我需要知道我们如何限制发送“重新发送请求”。我正在复制下面的日志。看来“重新发送请求”是从 QuickFixEngine dll 发送的，因为我们还没有编写任何代码来启动重新发送请求。请帮我解决如何限制重新发送请求。此外，似乎 MsgSeqNum 的顺序正确。您的帮助将不胜感激。

8=FIX.4.29=5735=034=9949=UATENV52=20120717-16:31:28.29656=TRDUAT10=243

8=FIX.4.29=5835=049=TRDUAT56=UATENV52=20120717-16:28:34.24834=11910=029

8=FIX.4.29=37635=849=TRDUAT56=UATENV52=20120717-16:28:41.00434=12050=CBOEO57=Test_Trader37=1120716000006003150=139=120=060=20120717-4025=4=4080=4025=4080=1 2654 = 1167 = OPT55 = IBM44 = -0.5077 = O202 = 180.00201 = 1200 = 201207205 = 2121 = 359 = 01 = TestAcct10115 = USD14 = 56 = 0.50198 = 12280400019882 = N17 = 071710150000128151 = 576 = INCA30 = CBOE75 = 2012071732 = 531 = 0.5011 = 82184825010 = 144 8 = FIX.4.29 = 37935 = 849 = TRDUAT56 = UATENV52 = 20120717-16：28：41.00534 = 12150 = CBOEO57 = Test_Trader37 = 1120716000006004150 = 139 = 120 = 060 = 20120717-16：28：40.00040 = 254 = 238 = 20442 = 2654 = 2167 = OPT55 = IBM44 = -0.5077 = O202 = 185.00201 = 1200 = 201207205 = 2121 = 359 = 01 = TestAcct10115 = USD14 = 106 = 0.50198 = 12280400019882 = N17 = 071720150000129151 = 1076 = INCA30 = CBOE75 = 2012071732 =1031=0.5011=82184825010=036

8=FIX.4.29=6935=234=10049=UATENV52=20120717-16:31:35.50056=TRDUAT **7=120** * *16=0* * 10=230

8=FIX.4.29=37635=849=TRDUAT56=UATENV52=20120717-16:28:41.00534=12250=CBOEO57=Test_Trader37=1120716000006005150=139=120=060=20120717-4025=4=4025=4080=13801=1 2654 = 3167 = OPT55 = IBM44 = -0.5077 = O202 = 190.00201 = 1200 = 201207205 = 2121 = 359 = 01 = TestAcct10115 = USD14 = 56 = 0.50198 = 12280400019882 = N17 = 071710150000130151 = 576 = INCA30 = CBOE75 = 2012071732 = 531 = 0.5011 =82184825010=145

8 = FIX.4.29 = 37935 = 834 = 12149 = TRDUAT50 = CBOEO52 = 20120717-16：28：41.00556 = UATENV57 = Test_Trader1 = TestAcct1016 = 0.5011 = 82184825014 = 1015 = USD17 = 07172015000012920 = 021 = 330 = CBOE31 = 0.5032 = 1037 = 112071600000600438 = 2039 = 140 = 244 = -0.5054 = 255 = IBM59 = 060 = 060 = 20120717-16：28：40.00075 = 2012071776 = inca77777777777 = O150 = O150 = 1151 = 1151 = 10167 = 10167 = 10167 = 10167 = 12228.204000202222022022022022022022022022022022022022022022022022022022022022022022022022022022022022022022022022转=N10=036

8 = FIX.4.29 = 37635 = 834 = 12249 = TRDUAT50 = CBOEO52 = 20120717-16：28：41.00556 = UATENV57 = Test_Trader1 = TestAcct1016 = 0.5011 = 82184825014 = 515 = USD17 = 07171015000013020 = 021 = 330 = CBOE31 = 0.5032 = 537 = 112071600000600538 = 1039 = 140 = 244 = -0.5054 = 155 = IBM59 = 060 = 20120717-16：28：40.00075 = 2012071776 = INCA77 =Ø150= 1151 = 5167 = OPT198 = 1228040001200 = 201207201 = 1202 = 190.00205 = 21442 = 2654 = 39882 =N10=145

8=FIX.4.29=40735=849=TRDUAT56=UATENV52=20120717-16:28:41.444122=20120717-16:28:41.00443=Y34=12050=CBOEO57=Test_Trader37=1120716000=0072003150=60000=102003150=00603150=2012-16=16=12 28：40.00040 = 254 = 138 = 10442 = 2654 = 1167 = OPT55 = IBM44 = -0.5077 = O202 = 180.00201 = 1200 = 201207205 = 2121 = 359 = 01 = TestAcct10115 = USD14 = 56 = 0.50198 = 12280400019882 = N17 = 071710150000128151 = 576 =INCA30=CBOE75=2012071732=531=0.5011=82184825010=145

8=FIX.4.29=41035=849=TRDUAT56=UATENV52=20120717-16:28:41.444122=20120717-16:28:41.00543=Y34=12150=CBOEO57=Test_Trader37=1120716000006004150=139=120=060=20120717-16:28:40.00040=254=238=20442=2654=2167=OPT55=IBM44=-0.5077=O202=185.00201=1200=201207205=2121=359=01=TestAcct10115=USD14=106=0.50198=12280400019882=N17=071720150000129151=1076=INCA30=CBOE75=2012071732=1031=0.5011=82184825010=028

8=FIX.4.29=40735=849=TRDUAT56=UATENV52=20120717-16:28:41.444122=20120717-16:28:41.005

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T06:58:23.007

Usually, you will get a resend request when reconnecting after a disconnect. It is important to make sure that you haven't missed any messages.

If you want to avoid it, you need to edit the quickfix [config](http://www.quickfixengine.org/quickfix/doc/html/configuration.html#Session) and set ResetOnLogon Logoff and disconnect to Y. That way it will not try to resend messages each time it disconnects.

I don't think this is a particularly good idea. You could miss messages. Why is the resend request a problem for you?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-18T10:10:48.380

If you want to ignore ResendRequests (i.e you don't want to resend any messages) the correct way in FIX to do this is by responding with a SequenceReset.

You can achieve this in QuickFix be overriding the `toApp()` method and throwing a `DoNotSend` exception.

QuickFix will generate the correct SequenceReset response based on the ResendRequest that was issued.

Here's an example:

```
8=FIX.4.29=9135=234=349=MY-INITIATOR-SERVICE52=20160418-09:11:20.69456=MY-ACCEPTOR-SERVICE7=216=510=133
8=FIX.4.29=12435=434=243=Y49=MY-ACCEPTOR-SERVICE52=20160418-09:11:20.69756=MY-INITIATOR-SERVICE122=20160418-09:11:20.69736=2123=Y10=068 
```

# css - 如何在css3中首先使列数填充行？

> ID：11624839
> 
> 赞同：7
> 
> 时间：2012-07-24T05:45:16.027
> 
> 标签：css

我在 css3 中使用 (column-count:4) 将 9 个图像放入 4 列中（这里的想法是：http: [//css-tricks.com/seamless-responsive-photo-grid/](http://css-tricks.com/seamless-responsive-photo-grid/)）

但在我的情况下，9 张图片只适合 3 列（每列 3 列），最后一列是空的！我怎样才能让它首先填充行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-19T03:59:08.037

`column-fill: balance`应该做你想做的事，但这似乎在实际浏览器中不起作用。

也许 multicol 不是适合您的工具。取决于你想要做什么，也许 flexbox，或者只是 inline-block 可能会削减它？

[http://jsbin.com/nobosu/1/edit?css,输出](http://jsbin.com/nobosu/1/edit?css,output)

也许这更接近你想要做的事情：http: [//jsbin.com/nobosu/edit ?html,css,output](http://jsbin.com/nobosu/edit?html,css,output)

没有具体细节，很难知道要开什么药。

# javascript - javascript中的混淆

> ID：11624841
> 
> 赞同：0
> 
> 时间：2012-07-24T05:45:32.590
> 
> 标签：javascript, vb.net, obfuscation

我试图在 vb.net 中混淆一个字符串并在 javascript 中去混淆。

```
For i = 0 To Len(sData) / 4
    For j = 1 To 4
        ConvertData2 = ConvertData2 & Mid$(sData, (4 * i) + 5 - j, 1)
    Next j
Next i 
```

上述代码在 vb.net 中运行良好。我需要javascript中的等效代码

我尝试了以下但没有工作。

```
for (i = 0; i<(sData.length)/4; i++)
{
    for (j = 1;j<4;j++)
        s=s+sData.substr((4 * i) + 5 - j,1)                  
} 
```

任何人都可以建议我在哪里犯了错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:52:08.893

好吧，一方面，Javascript 字符串索引从 0 开始，而不是 1。`for (j=1; j<4; j++)`无论如何，您的循环只会从 1 计数到 3；您想从 0 到 3（`j=0`和`j<4`）或从 1 到 4（`j=1`和`j<=4`）。

VB的直接翻译如下所示：

```
convertData2 = ''
for (var i=0; i < sData.length / 4; ++i) {
   for (var j=1; j <= 4; ++j) {
       convertData2 += sData.substr(4 * i + 4 - j, 1)
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:53:49.227

第一个明显的区别是，在 vb.net 中你使用整数除法，而在 javascript 中你不是......

利用

```
for(var i = 0, len = Math.floor(sData.length / 4); i<=len; i++) 
```

第二个是`Mid`从 1 开始计数，`subst`从 0开始计数

所以用

```
s = s + sData.substr((4 * i) + 5 - j -1,1) 
```

或简化

```
s = s + sData.substr((4 * i) + 4 - j,1) 
```

最后是循环，使用时`<`不要使用最后一个数字......而`from.. to`使用最后一个数字也是如此（*所以使用`<=`*）

所以一起

```
var s = ''; // define s (if not yet defined) other wise use s = '' to make sure it starts empty..
for(var i = 0, len = Math.floor(sData.length / 4); i <= len; i++) {
   for (var j = 1 ; j <= 4; j++) {
       s = s + sData.substr( (4 * i) + 4 - j,1);
   }
} 
```

# android - 检测应用程序是否因 RAM 不足而被操作系统退出

> ID：11624842
> 
> 赞同：3
> 
> 时间：2012-07-24T05:45:43.093
> 
> 标签：android, memory-management

在我正在构建的应用程序中，我需要检测应用程序退出当且仅当应用程序在后台退出时，因为操作系统正在回收内存。

根据我自己的实验，在每个实例上都会调用 onDestroy。我试过检查 isFinishing 但我不能 100% 确定这会将它隔离到哪些情况。

```
@Override
public void onDestroy()
{
    super.onDestroy();
    Log.i("V LIFECYCLE", "onDestroy");
    if (!isFinishing())
    {
        // are we here because the OS shut it down because of low memory?
        ApplicationPreferences pref = new ApplicationPreferences(this);
        // set persistant flag so we know next time that the user
        // initiated the kill either by a direct kill or device restart.
        pref.setThePersistantFlag(true);
        Log.i("DEBUG", "onDestroy - ensuring that the next launch will result in a log out..");
    }
} 
```

任何人都可以在这里阐明我的问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:56:24.330

通过反复试验，我制定了一个适合任何感兴趣的人的解决方案。在操作系统回收内存的情况下，我已经缩小了应用程序状态恢复 (onResume) 的情况。

```
public boolean wasJustCollectedByTheOS = false; 

@Override
public void onSaveInstanceState(Bundle savedInstanceState)
{
    super.onSaveInstanceState(savedInstanceState);
    // this flag will only be present as long as the task isn't physically killed
    // and/or the phone is not restarted.
    savedInstanceState.putLong("semiPersistantFlag", 2L);
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    long semiPersistantFlag = savedInstanceState.getLong("semiPersistantFlag");
    if (semiPersistantFlag == 2L)
    {
        savedInstanceState.putLong("semiPersistantFlag", 0L);
        this.wasJustCollectedByTheOS = true;   
    }
}

// this gets called immediately after onRestoreInstanceState
@Override
public void onResume() {
    if (this.wasJustCollectedByTheOS){
        this.wasJustCollectedByTheOS = false;
        // here is the case when the resume is after an OS memory collection    
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:10:46.493

不知道对你有没有帮助

从[Android Activity](http://developer.android.com/reference/android/app/Activity.html)类，

```
public void onLowMemory () 
```

这在整个系统内存不足时调用，并且希望主动运行的进程试图勒紧裤腰带。虽然没有定义调用它的确切时间，但通常它会在所有后台进程都被杀死的时候发生，即在到达我们希望避免杀死的托管服务和前台 UI 的进程终止点之前。

想要变得更好的应用程序可以实现此方法来释放它们可能持有的任何缓存或其他不必要的资源。从这个方法返回后，系统会为你执行一次 gc。

自：**API 级别 14**

```
public abstract void onTrimMemory (int level) 
```

当操作系统确定现在是进程从其进程中修剪不需要的内存的好时机时调用。例如，当它进入后台并且没有足够的内存来保持尽可能多的后台进程运行时，就会发生这种情况。您永远不应与级别的确切值进行比较，因为可能会添加新的中间值——您通常希望比较该值是否大于或等于您感兴趣的级别。

# spring - spring 3.1.2 中的国际化使用注释不起作用

> ID：11624844
> 
> 赞同：2
> 
> 时间：2012-07-24T05:45:47.697
> 
> 标签：spring, jakarta-ee, spring-mvc, configuration-files

我正在使用弹簧 3.1.2 MVC。我正在尝试通过注释配置 Web 应用程序

在这里，我想实现国际化，因为我正在使用**LocaleChangeInterceptor**、**ReloadableResourceBundleMessageSource**、**SessionLocaleResolver**类。这是我的配置类：

```
@Configuration
@EnableWebMvc 
public class MyAppConfig extends WebMvcConfigurerAdapter{

@Bean
public ReloadableResourceBundleMessageSource resourceBundleMessageSource(){
        ReloadableResourceBundleMessageSource messageSource=new ReloadableResourceBundleMessageSource();
        String[] resources= {"classpath:labels","classpath:message"};
        messageSource.setBasenames(resources);
        return messageSource;
    }

@Bean 
public LocaleChangeInterceptor localeChangeInterceptor(){
    LocaleChangeInterceptor localeChangeInterceptor=new LocaleChangeInterceptor();
    localeChangeInterceptor.setParamName("locale");
    return localeChangeInterceptor;
}

@Bean
public SessionLocaleResolver sessionLocaleResolver(){
    SessionLocaleResolver localeResolver=new SessionLocaleResolver();
    localeResolver.setDefaultLocale(new Locale("da","DK"));
    return localeResolver;
}   

public void addInterceptors(InterceptorRegistry registry) {
    registry.addInterceptor(localeChangeInterceptor());
}

} 
```

但这不起作用它显示默认文本

```
<spring:message code="login.user.password" text="Password" /> 
```

作为“密码”。

请帮我。当我在其中进行以下配置时，`applicationContext.xml`它工作正常。

```
 <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">

 <property name="basenames">
    <list>
        <value>classpath:message</value>
        <value>classpath:labels</value>            
    </list>
</property>     
<property name="defaultEncoding" value="ISO-8859-1" />
</bean>

<mvc:interceptors>
    <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" p:paramName="locale"/>
</mvc:interceptors>

<bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
    <property name="defaultLocale" value="da_DK" />
</bean> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:34:57.003

messageSource 的 bean 名称必须是“messageSource”，使用 @Configuration 您将其命名为`resourceBundleMessageSource`. 将其更改为：

```
 @Bean
    public ReloadableResourceBundleMessageSource messageSource(){
        ReloadableResourceBundleMessageSource messageSource=new ReloadableResourceBundleMessageSource();
        String[] resources= {"classpath:labels","classpath:message"};
        messageSource.setBasenames(resources);
        return messageSource;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:23:08.757

我解决了我的问题，我的 web.xml 中缺少初始化参数条目

```
<servlet>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextClass</param-name>
        <param-value>
            org.springframework.web.context.support.AnnotationConfigWebApplicationContext
        </param-value>
    </init-param>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            com.config.AppConfig
        </param-value>
    </init-param>

    <load-on-startup>1</load-on-startup>
</servlet> 
```

添加此条目后，我的带有注释的配置工作正常。:)

# r - 来自 reshape2 的 dcast 中的“复杂”聚合函数

> ID：11624846
> 
> 赞同：1
> 
> 时间：2012-07-24T05:45:54.720
> 
> 标签：r, aggregate, reshape

我有一个长格式的数据框，我需要汇总在特定日期进行的几个观察结果。

示例数据：

```
long <- structure(list(Day = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 
2L, 2L, 2L, 2L), .Label = c("1", "2"), class = "factor"), 
Genotype = structure(c(1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 
2L, 2L, 2L), .Label = c("A", "B"), class = "factor"), View = structure(c(1L, 
2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L), .Label = c("1", 
"2", "3"), class = "factor"), variable = c(1496L, 1704L, 
1738L, 1553L, 1834L, 1421L, 1208L, 1845L, 1325L, 1264L, 1920L, 
1735L)), .Names = c("Day", "Genotype", "View", "variable"), row.names = c(NA, -12L),
class = "data.frame")

> long
   Day Genotype View variable
1    1        A    1     1496
2    1        A    2     1704
3    1        A    3     1738
4    1        B    1     1553
5    1        B    2     1834
6    1        B    3     1421
7    2        A    1     1208
8    2        A    2     1845
9    2        A    3     1325
10   2        B    1     1264
11   2        B    2     1920
12   2        B    3     1735 
```

我需要通过取每个视图乘积的立方根来汇总每天的每个基因型。所以对于第 1 天的基因型 A `(1496 * 1704 * 1738)^(1/3)`，. 最终数据框如下所示：

```
 Day Genotype  summary
1   1        A 1642.418
2   1        B 1593.633
3   2        A 1434.695
4   2        B 1614.790 
```

`reshape2`最近几天一直在转来转去，但没有到达任何地方。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T05:50:45.337

我可能会使用`plyr`and`ddply`来完成这项任务：

```
library(plyr)

ddply(long, .(Day, Genotype), summarize, 
      summary = prod(variable) ^ (1/3))
#-----
  Day Genotype  summary
1   1        A 1642.418
2   1        B 1593.633
3   2        A 1434.695
4   2        B 1614.790 
```

或者这个`dcast`：

```
dcast(data = long, Day + Genotype ~ ., 
      value.var = "variable", function(x) prod(x) ^ (1/3))
#-----
  Day Genotype       NA
1   1        A 1642.418
2   1        B 1593.633
3   2        A 1434.695
4   2        B 1614.790 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:10:21.420

无需额外软件包的其他解决方案。

```
aggregate(list(Summary=long$variable),by=list(Day=long$Day,Genotype=long$Genotype),function(x) prod(x)^(1/length(x)))
  Day Genotype  Summary
1   1        A 1642.418
2   2        A 1434.695
3   1        B 1593.633
4   2        B 1614.790 
```

# asp.net - 我的网站在访问时显示 IIS7 大屏幕

> ID：11624853
> 
> 赞同：0
> 
> 时间：2012-07-24T05:46:35.787
> 
> 标签：asp.net, deployment, iis-7

我们为我们的 asp.net 应用程序获取了一个域。该应用程序部署在我们的服务器（IIS7）中。当我们尝试访问该网站时，它显示一个大的 IIS7 屏幕。请告诉我这个问题。

问候， 阿比![在此处输入图像描述](../Images/7c477eb50a197c8b69127325a31a06a1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:41:01.780

您的应用程序肯定部署在 IIS 中网站的根目录，还是部署为虚拟目录？
因为如果将其部署为虚拟目录，这是我所期望的行为。

# windows-phone - Windows Phone 8 应用程序开发快速入门

> ID：11624856
> 
> 赞同：2
> 
> 时间：2012-07-24T05:47:12.587
> 
> 标签：windows-phone

我想学习为 windows phone 8 开发应用程序。所以我进入了这个[http://msdn.microsoft.com/en-us/library/ff402535(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff402535(v=vs.92).aspx)页面

我假设我将使用 c# 为 wp8 做应用程序，但在我上面提到的页面中，我看到了 silverlight 和 xna。现在我很困惑，银光不是像闪光灯吗？这是推荐的为什么要做 wp8 应用程序吗？我对 XNA 做了一些研究，它似乎都是关于游戏的，但我不喜欢开发游戏，而是一些生产力应用程序。

c# 不适合 wp8 吗？如果我有什么不对的地方，请帮助我。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:40:42.063

Silverlight 就像 flash - 但它也是编写 Windows Phone 应用程序的主要技术。我为非微软背景的人写了一本入门书，你可能会觉得有帮助，

[为赶时间的人开发 Windows Phone](http://brendan.sdf-eu.org/fpiah/wp7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:24:33.780

如果您愿意，可以编写 Visual Basic 的 C# 应用程序。查看更多示例：http: [//msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T03:46:04.373

C# 是应用程序的代码隐藏语言，而 Silverlight (XAML) 是应用程序的前端 UI 设计语言。

我不确定您是否熟悉 ASP.Net Web 开发，但这就像 C# 或 VB.Net 是代码隐藏语言，而前端是 HTML/JavaScript。

# android - 不希望历史上可用的活动很少

> ID：11624858
> 
> 赞同：0
> 
> 时间：2012-07-24T05:47:31.100
> 
> 标签：android, android-intent

我有一个**仪表板/主页** `Activity`，我在其中向不同的 s 显示多个图标`Activity`。我的要求是，每当我最小化我的应用程序时，我都想恢复到**Home** `Activity`而不是任何子活动。

我试过了

```
noHistory="true" 
```

体现在那些儿童活动中。

但是一个`Activity`例如 A 有它自己的子活动。所以当我去 A 然后它的孩子`Activity`A_1 并按回我来`Home`屏幕。

我试过在意图中添加标志

```
 FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET 
```

但它没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T05:53:00.150

您可以通过在最小化事件上设置意图标志来做到这一点。

```
Intent intent= new Intent(A_1.this, HomeActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

A-1，是触发此事件的活动，HomeActivity 是主页/仪表板活动类的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:55:05.453

我认为您在最小化应用程序时需要使用 [FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:03:05.793

另外，我想一个不太优雅的方法是在这些子活动的 onPause() 或 onStop() 方法中调用 finish() 。这将确保它们被销毁并且无法归还。

# c# - 从 URL 下载 Excel 并打开它进行阅读？

> ID：11624862
> 
> 赞同：1
> 
> 时间：2012-07-24T05:47:48.733
> 
> 标签：c#, asp.net

嗨，我需要读取存储在 s3 服务器中的 excel 文件，我试过但它显示无效的互联网地址。请帮我解决

```
string fullPath = "http://tempfordevelopment.s3.amazonaws.com/ad53498f-74e8-412c-8c8f-e36b18f16e4eEmailExcel2.xlsx";

            //Uri uri = new Uri(fullPath);
            //string excelLocation = uri.LocalPath;

            String sConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" + fullPath + "; Extended Properties='Excel 8.0;HDR=Yes'";
            System.Data.DataSet DtSet;
            System.Data.OleDb.OleDbDataAdapter MyCommand;
            OleDbConnection objConn = new OleDbConnection(sConnectionString);

            MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [Sheet1$]", sConnectionString);
            MyCommand.TableMappings.Add("Table", "Net-informations.com");
            DtSet = new System.Data.DataSet();
            MyCommand.Fill(DtSet);/////Here i am getting error as invalid internet address

            DataTable table = DtSet.Tables[0];

            string[] strings = new string[table.Rows.Count];
            int idx = 0;
            foreach (DataRow row in table.Rows)
            {
                StringBuilder sb = new StringBuilder();
                object[] cells = row.ItemArray;
                for (int i = 0; i < cells.Length; i++)
                {
                    if (i != 0) sb.Append(',');
                    sb.Append(cells[i]);
                }
                strings[idx++] = sb.ToString();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:53:39.173

您不能通过 http 直接打开文件。您必须下载它，然后从磁盘打开它。下载它的最简单方法可能是使用 WebClient。

如果您不想将文件保留在磁盘上，这样的事情应该可以工作：

```
var client = new WebClient();

String url = "http://...";
var fullPath = Path.GetTempFileName();
client.DownloadFile(url, fullPath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:03:30.213

读取 excel 文件 - [http://exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)

# java - 测试大约 20k 客户端与服务器的连接

> ID：11624864
> 
> 赞同：1
> 
> 时间：2012-07-24T05:48:08.100
> 
> 标签：java, windows, memory, nio, ram

我在 java nio 包中有一个聊天应用程序。我想测试服务器的容量。我运行我的服务器应用程序，而客户端程序正在通过批处理文件运行。这样我就可以运行任意数量的客户端。当 268 客户端应用程序运行时，RAM 会停止该进程。Ram 没有足够的内存来执行下一个客户端。

当 Ram 已满时，处理器有什么办法使用硬盘内存吗？不是java堆空间

我正在使用 Windows 7 Prof 32 位，4 gp 内存，i5 处理器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:44:10.517

我最近用 2000 个 MySQL 线程客户端尝试了一个更简单的实验。
而且我担心你会撞到很多墙。
首先，您将有一个 java 2GB 堆大小限制。您应该考虑使用 64 位 JVM。请参阅[64 位操作系统上 32 位 JVM 的最大 Java 堆大小](https://stackoverflow.com/questions/1434779/maximum-java-heap-size-of-a-32-bit-jvm-on-a-64-bit-os)
然后，Windows 7 32 位不能处理超过 3.12GB 的 RAM。您应该考虑使用 64 位操作系统
此外，操作系统一开始不会让您打开 20k 套接字。检查注册表中的 MaxUserPort。
如果您通过了所有这些，可能是时候考虑 CPU 分配了，在 2k 线程和您的 i5 下，这应该不是问题。但是我不知道20k ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:50:35.093

对于负载测试，您应该将服务器和客户端分开。

运行服务器，并且仅在您的机器上运行。使用其他计算机运行客户端。

这将避免您遇到此类问题，并且会更加现实。您永远不会有 20k 客户端和运行同一台机器的服务器 :)

您还可以在没有客户端干扰的情况下监控服务器的性能，因为您的资源将专用于您的服务器。

顺便说一句，在 w7 中，涡轮增压器允许您插入 USB 加密狗来扩展计算机的 RAM。这可以帮助你。

M。

# html - 单选按钮数组 (HTML)

> ID：11624871
> 
> 赞同：0
> 
> 时间：2012-07-24T05:48:39.987
> 
> 标签：html, forms, radio-button

如果我有两个具有相同名称的文本类型输入，如下所示：

```
<input type="text" name="task" id="task1" value="begin">
<input type="text" name="task" id="task2" value="end"> 
```

当我提交表单时，表单`task`会自动作为数组 ( `task[0]='begin'`, `task[1]='end'`) 发送。由于许多原因，这非常有用，例如我不必担心序列化结果，我可以使用 sortable 重新排序，并且当我提交时它已经按正确的顺序排列。

但是如果我想使用单选按钮，我必须已经使用多个具有相同名称的输入。

有没有办法可以使用单选按钮保留此功能？

* * *

例如：

```
<input type="text" name="task" id="task1" value="begin">
<input type="radio" name="time" id="time11" value="early" checked="checked">
<input type="radio" name="time" id="time12" value="noon">
<input type="radio" name="time" id="time13" value="late">

<input type="text" name="task" id="task2" value="end">
<input type="radio" name="time" id="time21" value="early">
<input type="radio" name="time" id="time22" value="noon" checked="checked">
<input type="radio" name="time" id="time23" value="late"> 
```

我希望在提交时我得到`time[0]='early'`并且`time[1]='noon'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:17:05.730

尝试这个：

```
<input type="text"  name="task[0]" id="task1"  value="begin">
<input type="radio" name="time[0]" id="time11" value="early" checked="checked">
<input type="radio" name="time[0]" id="time12" value="noon">
<input type="radio" name="time[0]" id="time13" value="late">

<input type="text"  name="task[1]" id="task2"  value="end">
<input type="radio" name="time[1]" id="time21" value="early">
<input type="radio" name="time[1]" id="time22" value="noon" checked="checked">
<input type="radio" name="time[1]" id="time23" value="late"> 
```

然后你会得到：`task[0]=begin`, `time[0]=early`,`task[1]=end`和`time[1]=noon`.

# iphone - 如何消除 Instruments 中发现的泄漏

> ID：11624872
> 
> 赞同：1
> 
> 时间：2012-07-24T05:48:41.543
> 
> 标签：iphone, objective-c, ios, ipad, nimbus-ios

我刚刚在 Instruments 中运行了 Leaks 工具，发现了以下漏洞：

![在此处输入图像描述](../Images/a48fdee6c668018b01c2021a56951d56.png)

基本上它指出了 NIAttributedLabel 中的 drawRect，所以我双击了 drawRect 方法，这就是我所拥有的：

我该如何消除这种泄漏？ ![在此处输入图像描述](../Images/8835dca1e39fde8653d22bec8210c1d6.png)

这是一些代码：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

            NSString *commentsText = [NSString stringWithFormat:@"%@ %@", self.imageComment_.username_, self.imageComment_.text_];

            NSRange range;
            range.location = 0;
            range.length = commentsText.length;

            NSMutableAttributedString* attrStr = [[NSMutableAttributedString alloc] initWithString:commentsText];
            [attrStr setFont:[UIFont fontWithName:@"HelveticaNeue" size:14] range:range];
            self.commentAttributedString_ = attrStr;
            [attrStr release];

            dispatch_async(dispatch_get_main_queue(), ^{
                [weakSelf.commentsText_ setAlpha:0.0];
                [weakSelf.commentsPostedTime_ setAlpha:0.0];
                [weakSelf.commentsText_ setFrameWidth:weakSelf.contentView.frameWidth - weakSelf.profilePicture_.frameWidth - kCommentsPadding];
                [weakSelf.commentsText_ setFrameHeight:weakSelf.imageComment_.commentHeight_ - 30];
                [weakSelf.commentsText_ setAttributedString:weakSelf.commentAttributedString_];
                [weakSelf.commentsText_ setLinkColor:weakSelf.textColor_];

                NSString *timePosted = [NSString timestampToString:weakSelf.imageComment_.createdTime_];
                CGSize commentsTimeSize = [timePosted sizeWithFont:weakSelf.commentsPostedTime_.font constrainedToSize:CGSizeMake(weakSelf.commentsText_.frameWidth, 50)];
                [weakSelf.commentsPostedTime_ setText:timePosted];
                [weakSelf.commentsPostedTime_ setFrameWidth:commentsTimeSize.width];
                [weakSelf.commentsPostedTime_ setFrameHeight:commentsTimeSize.height];
                [weakSelf.commentsPostedTime_ setFrameY:weakSelf.commentsText_.frameY + weakSelf.commentsText_.frameHeight];
                [weakSelf.commentsPostedTime_ setFrameX:weakSelf.commentsText_.frameX];

                [UIView animateWithDuration:0.3 animations:^{
                    [weakSelf.commentsText_ setAlpha:1.0];
                    [weakSelf.commentsPostedTime_ setAlpha:1.0];
                } completion:^(BOOL finished){
                    [weakSelf parseTagsInComment];
                }];
            });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:46:05.783

如果你在最新的 master 上使用 Nimbus，那么你必须启用 ARC，否则你会得到内存泄漏。

# java - 我如何让 Guice 管理 jar 中的课程（如果可能的话）？

> ID：11624874
> 
> 赞同：0
> 
> 时间：2012-07-24T05:48:45.997
> 
> 标签：java, dependency-injection, guice

假设我的类路径中的 jar 中有一个 A 类（即，我无法控制它的来源，因此不能简单地用 注释它`@Inject`）。A 具有以下构造函数定义：

```
A(B b, C c) {
    this.b = b;
    this.c = c;
} 
```

在我的代码库中，我有类：

```
BImpl implements B 
```

和

```
CImpl implements C 
```

我的问题是：如何配置 Guice 来管理要注入 BImpl 和 CImpl 的 A 实例（如果它甚至在框架范围内）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:35:24.653

当您说“jar 文件中的类 A”时，我假设您无法控制该类的源 - 您不能简单地添加`@Inject`到构造函数中。

如果是这种情况，那么您可以`Module`这样定义：

```
class MyModule extends AbstractModule {
    @Override
    protected void configure() {
        bind(B.class).to(BImpl.class);
        bind(C.class).to(CImpl.class);

        try {
            bind(A.class).toConstructor(A.class.getConstructor(B.class, C.class));
        } catch (NoSuchMethodException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

前两个绑定是标准的——您将接口类型绑定到实现类型。

最后一个绑定使用`toConstructor`（从 Guice 3.0 开始），它允许您更轻松地“粘合”外部组件 - 就像您的情况一样。

# cross-browser - 处理下划线前缀子域时的浏览器不一致

> ID：11624876
> 
> 赞同：2
> 
> 时间：2012-07-24T05:48:56.880
> 
> 标签：cross-browser, dns, standards

我设置了一个子域来测试我正在做的事情，并用作`_test`子域。该网站会加载，但我在尝试登录时不断收到奇怪的错误，如果登录凭据错误，我通常不会收到这些错误。在进一步研究之后，我发现下划线前缀是导致我发现奇怪的问题的原因，因为 IIS 和 GoDaddy 都允许我无错误地输入它们。

**IE9**和**IE10**将显示页面，但不会在 POST 上将 cookie 发送回服务器。我不确定是否还有其他事情没有做，但这是我看到的主要内容。

**FireFox**、**Opera**和**Safari**都按预期工作，我可以浏览该站点并登录它。大概这些都没有任何像 IE 那样的怪癖。

**Chrome**根本不加载该站点，而是将我重定向到 Google 搜索。

由于这里有三种不同的结果，有人知道正确的结果应该是什么吗？根据[这个问题](https://stackoverflow.com/questions/2180465/can-someone-have-a-subdomain-with-an-underscore-in-it)，我的子域应该是有效的并且工作意味着 Chrome 和 IE 都有错误。

我知道带下划线前缀的子域在某种程度上可以工作，因为在工作中我正在运行[JetBrains 许可证服务器](http://confluence.jetbrains.net/display/LS/Configuring+Automatic+Server+Discovery)并且有一个名为 TXT 记录`_jetbrains-license-server`，该记录已经运行了好几年了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:39:30.477

`A`或记录上下文中的主机名`AAAA`不能有下划线。但是`TXT`记录可以包含下划线（详细讨论[请参见此处](http://domainkeys.sourceforge.net/underscore.html)）。

# r - 使用 rm() 删除多个对象

> ID：11624885
> 
> 赞同：93
> 
> 时间：2012-07-24T05:49:47.797
> 
> 标签：r

我的内存被一堆中间文件（调用它们`temp1`，`temp2`等等）阻塞了，我想知道是否可以在不重复`rm`调用的情况下将它们从内存中删除（即`rm(temp1)`，`rm(temp2)`）？

我试过`rm(list(temp1, temp2, etc.))`了，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-07-24T05:54:35.843

使列表成为字符向量（不是名称向量）

```
rm(list = c('temp1','temp2')) 
```

或者

```
rm(temp1, temp2) 
```

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2012-07-24T06:31:53.993

另一种解决方案`rm(list=ls(pattern="temp"))`，删除与模式匹配的所有对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-24T06:09:33.833

或者使用正则表达式

```
"rmlike" <- function(...) {
  names <- sapply(
    match.call(expand.dots = FALSE)$..., as.character)
  names = paste(names,collapse="|")
  Vars <- ls(1)
  r <- Vars[grep(paste("^(",names,").*",sep=""),Vars)]
  rm(list=r,pos=1)
}

rmlike(temp) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-20T06:57:15.683

如果您有很多 temp'x'，您可以尝试的另一个变体是（扩展@mnel 的答案）。

这里，“n”可能是存在的临时变量的数量：

```
rm(list = c(paste("temp",c(1:n),sep=""))) 
```

# python - 如果内容的角色发生变化，我们如何执行操作？

> ID：11624886
> 
> 赞同：0
> 
> 时间：2012-07-24T05:49:50.103
> 
> 标签：python, plone

当通过“共享”选项卡更改内容的角色时，我希望触发邮件。如何做到这一点？我知道如果修改对象会触发邮件，但如果更改/添加权限则不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:43:46.187

通过您的自定义插件自定义 Plone [http://collective-docs.readthedocs.org/en/latest/getstarted/index.html](http://collective-docs.readthedocs.org/en/latest/getstarted/index.html)

您可能需要修补共享选项卡以触发在保存共享选项卡时触发的自定义事件。

活动[http://collective-docs.readthedocs.org/en/latest/components/events.html](http://collective-docs.readthedocs.org/en/latest/components/events.html)

这种定制可以通过

覆盖[http://collective-docs.readthedocs.org/en/latest/components/zcml.html#overrides](http://collective-docs.readthedocs.org/en/latest/components/zcml.html#overrides)

或猴子补丁[http://collective-docs.readthedocs.org/en/latest/misc/monkeypatch.html](http://collective-docs.readthedocs.org/en/latest/misc/monkeypatch.html)

然后为您的自定义事件创建内容规则条件：

[http://plone.org/documentation/kb/creating-content-rule-conditions-and-actions/adding-the-condition](http://plone.org/documentation/kb/creating-content-rule-conditions-and-actions/adding-the-condition)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:49:06.733

内容规则框架建立在 Zope 事件之上；当内容被修改时，会发送一个事件，内容规则订阅该事件，收到通知并执行配置的操作。

不幸的是，共享选项卡和底层的 Zope 访问控制框架都不会发出事件（Zope 的那部分比事件早了好几年）。

你必须：

1.  自定义共享选项卡视图 ( `plone.app.workflow.browser.sharing`) 以在添加或删除角色时发出自定义事件。

2.  向内容规则引擎注册此事件类型；您需要使用以下方式注册事件接口`IRuleEventType`：

    ```
     <interface
      interface="your.package.interfaces.IRolesChangedEvent"
      type="plone.contentrules.rule.interfaces.IRuleEventType"
      name="Roles added or removed on this object"
      /> 
    ```

3.  创建可由新事件类型触发的条件。此过程[记录在此 Plone.org 知识库文章中](http://plone.org/documentation/kb/creating-content-rule-conditions-and-actions)。

# xml - 在 Chrome 浏览器上本地加载 xml 时出错

> ID：11624893
> 
> 赞同：0
> 
> 时间：2012-07-24T05:50:55.993
> 
> 标签：xml, google-chrome

我正在开发一个基于 xml 的项目，并且应该在本地和在线运行。

有几个 xml 文件必须逐页加载。如果内容在线运行或使用 localhost，则一切正常。

当内容在本地运行时出现问题 Chrome 根本无法加载 xml IE 并且 Firefox 工作正常。我搜索了整个网络，但找不到任何解决此问题的方法。

这是复制问题的示例 [http://www.exzip.com/download/K6VLSYCB](http://www.exzip.com/download/K6VLSYCB)

我很感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:49:26.217

这解释了，似乎没有解决方案

[http://code.google.com/p/chromium/issues/detail?id=47416](http://code.google.com/p/chromium/issues/detail?id=47416) http://blog.chromium.org/2008/12/security-in-depth-local-web-pages.html

# javascript - 当子节点未全部选中时取消选中父节点

> ID：11624894
> 
> 赞同：2
> 
> 时间：2012-07-24T05:50:57.553
> 
> 标签：javascript, extjs

我是新手 extJs 用户。我使用带有复选框的树面板，并且当子节点未全部选中时，我想取消选中父节点。下面是我的代码，希望你们能帮助我，我不知道该怎么做。

我的树形面板的结构是这样的：

*   父节点1
    *   子父节点1.1
        *   儿童1.1
        *   儿童1.2
        *   儿童1.3
    *   子父节点1.2
        *   儿童2.1
        *   child2.2
*   父节点2
    *   subparentNode2.1
        *   child2.1.1

```
var treeCheck = new Ext.tree.TreePanel({
    //some code here
});

//event here

treeCheck.on('checkchange', function(node, checked) {
    if(node.hasChildNodes()==true) {

        node.eachChild(function(n) {
            n.getUI().toggleCheck(checked);
        });

    } else {

        if(!checked) {
            var _parentNode = node.parentNode;
            //i dont know what to do here...
            //specifically, i want to uncheck the parent node and subparent node
            //when the children/child node is unchecked
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T10:26:20.573

有同样的问题。通过添加此事件处理程序来修复它：

```
treePanel.on('checkchange', function(node, isChecked) {

    // Propagate change downwards (for all children of current node).
    var setChildrenCheckedStatus = function (current) {
        if (current.parentNode) {
            var parent = current.parentNode;
            current.set('checked', parent.get('checked'));
        }

        if (current.hasChildNodes()) {
            current.eachChild(arguments.callee);
        }
    };
    if (node.hasChildNodes()) {
        node.eachChild(setChildrenCheckedStatus);
    }

    // Propagate change upwards (if all siblings are the same, update parent).
    var updateParentCheckedStatus = function (current) {
        if (current.parentNode) {
            var parent = current.parentNode;

            var checkedCount = 0;
            parent.eachChild(function(n) {
                checkedCount += (n.get('checked') ? 1 : 0);
            });

            // Children have same value if all of them are checked or none is checked.
            var sameValue = (checkedCount == parent.childNodes.length) || (checkedCount == 0);

            if (sameValue) {
                var checkedValue = (checkedCount == parent.childNodes.length);
                parent.set('checked', checkedValue);
            } else {
                // Not all of the children are checked, so uncheck the parent.
                parent.set('checked', false);
            }

            updateParentCheckedStatus(parent);
        }
    }
    updateParentCheckedStatus(node);
}); 
```

以递归方式向下（检查节点的所有子节点）和向上（如果未选中节点，则取消选中父节点）双向工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:15:10.003

```
if(!checked)
{
    //To uncheck the child nodes (I think you didn't ask this)
    /*for(var i in node.childNodes)
        node.childNodes[i].set('checked', false);
    */
    //To unchek the parent node
    node.parentNode.set('checked', false);
    node.parentNode.parentNode.set('checked', false);
} 
```

注意：我测试了它，发现它不是递归的。

从`node.parentNode.set('checked', false)`只有它应该取消选中祖父母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T17:49:33.490

为了完整起见，对于这种递归，ExtJS 3.4 分别有 Ext.tree.Node 方法级联和冒泡。

```
 listeners: {
        'checkchange': function(node, checked){

                var checkChange = function(currentNode, flag) {
                    try{
                        currentNode.attributes.checked  = flag;
                        currentNode.ui.checkbox.checked = flag;
                    }
                    catch(e){
                        // just avoiding error when node has no such attribute
                    }
                };

                /**
                 * Cascades down the tree from this node propagating the 'checkChange' event.
                 */
                 node.cascade(function() {
                    if(this.expanded === false){
                        this.expand(true);
                    }

                    checkChange(this, checked);

                    return true;
                });

                /**
                 * Bubbles up the tree from this node changing parent's state depending on children.
                 */
                node.bubble(function() {
                    if(this.hasChildNodes()){

                        var checkedCount = 0;

                        this.eachChild(function(child) {
                            checkedCount += (child.attributes.checked ? 1 : 0);
                        });

                        var checkedValue = (checkedCount == this.childNodes.length) && checkedCount !== 0;

                        checkChange(this, checkedValue);
                    }
                });
         }
     }, 
```

一个功能齐全的小提琴可以在[这里](https://fiddle.sencha.com/#fiddle/1s6t&view/editor)找到。

Obs：泡沫的逻辑是从**ag0rex借来的**

# wpf - 如何在 Visual Studio 2012 中使用 Microsoft Surface SDK？

> ID：11624895
> 
> 赞同：1
> 
> 时间：2012-07-24T05:51:12.407
> 
> 标签：wpf, touch, pixelsense

我访问了[Surface SDK](http://www.microsoft.com/en-us/download/details.aspx?id=26716)，它告诉它需要 Visual Studio 2010/Express。我尝试使用 VS 2012 RC 安装它，但它不允许。Surface sdk 不支持 VS 2012 RC 吗？如何将它与 VS 2012 RC 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:59:26.000

you have to reference the following ddls:

Microsoft.Surface.Core.dll, Microsoft.Surface.dll, Microsoft.Surface.Presentation.Design.dll, Microsoft.Surface.Presentation.dll, Microsoft.Surface.Presentation.Generic.dll

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T01:29:20.830

在装有 Win 7 和 Visual Studio 2010 的盒子上安装 SDK 2.0 2012 年 2 月更新。然后从模板创建一个 Surface 项目。如果您希望它在 Windows 8 上工作，请更改主 Surface Window（我忘记了类名。）以从 Window 而不是 Surface Window 继承。当然，这样做您将丢失标签和其他东西的输入堆栈。将控件的 Surface SDK 可再发行程序集复制到一个文件夹中，以供将来在新项目中参考。您可以将使用 Visual Studio 创建的项目升级到 VS2012。从那里创建一个模板。希望这能为您指明正确的方向。我有一段时间没有这样做了，正在从头顶上写。-标记

# c# - 快速 CSV 阅读器

> ID：11624897
> 
> 赞同：0
> 
> 时间：2012-07-24T05:51:24.010
> 
> 标签：c#

我正在开发一个项目，该项目实际上从 CSV 文件加载数据，对其进行处理，然后将其保存在磁盘上。为了快速读取 CSV 数据，我使用 Lumenworks CSV 阅读器[http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)。这工作正常，直到一个限制，但当我有大小为 1GB 或更大的 CSV 时，它需要时间。有没有其他方法可以更快地读取 CSV？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:01:53.307

没有提供很多信息......所以假设这是一个 IO 限制，您的选择是：

1.  获得更快的存储 [例如 SSD、RAID]。
2.  尝试压缩 - 有时压缩所花费的时间 [例如 Zip] 会在 IO 中节省倍数。
3.  尝试线程 - 如果进行计算困难的计算特别有用 - 但在这种情况下可能不适合。
4.  改变问题——你需要读/写一个 1GB 的文件吗？也许你可以改变数据格式[156比“156”小很多，也许你只需要处理更小的块，也许老实说花费的时间并不重要等等。

还有其他人吗？

嗯，您可以尝试缓存输出，我已经尝试过 MemoryMappedFiles 和 RAM 驱动器...您可以通过一些简单的线程来完成...虽然这可能会更快返回，但它具有巨大的风险和复杂性

# objective-c - 将 NSString 值转换为浮点数时得到 0.0000

> ID：11624900
> 
> 赞同：0
> 
> 时间：2012-07-24T05:51:59.277
> 
> 标签：objective-c, floating-point, nsstring

在我的应用程序中，我尝试使用将 NSString 值转换为浮点数

```
NSString *value = [dict objectForKey:@"student_Percentage"];
float f = [value floatValue]; 
```

但我将 f 的值设为 0.00000。我尝试使用 NSNumberFormatter、NSNumber ......但仍然得到 0.00000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:58:08.580

> 如果接收方不是以浮点数的有效文本表示开始，则 floatValue 返回 0.0。

`[dict objectForKey:@"student_Percentage"]`值应该是 8.9。
从字符串中删除双引号。

```
NSMutableString *value = [dict objectForKey:@"student_Percentage"];
[value replaceOccurrencesOfString:@"\"" withString:@"" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [value length])];
float f = [value floatValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:10:26.380

嘿，我认为您的 dict 值有问题。试试这个代码，它给出了正确的值。

```
NSString *temp = @"25.38";
float p = [temp floatValue];
NSLog(@"%f",p); 
```

或者也许使用`valueforkey`而不是`objectForKey`.

# android - Android 和关闭应用程序

> ID：11624904
> 
> 赞同：3
> 
> 时间：2012-07-24T05:52:16.580
> 
> 标签：android

我只想问一个小问题。`background`在 Android 杀死它之前，我的应用程序将被存储多长时间`automatically`。而且，`onDestroy()`当它发生时会被触发吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T05:59:55.687

正如[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)中解释的那样，当“活动正在完成或被系统销毁”时调用 onDestroy() 这意味着您要么在代码中手动调用 finish() ，要么手机的系统需要您的应用程序占用的资源。发生这种情况时（例如，当另一个应用程序需要这些资源时），操作系统将在您的应用程序上调用 onDestroy()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:28:57.203

onDestroy() 在您的应用程序被杀死时不需要特别调用。

# java - java - 使用集合对员工姓名列表进行排序

> ID：11624905
> 
> 赞同：0
> 
> 时间：2012-07-24T05:52:16.623
> 
> 标签：java, list, collections

我认为这可能是一个重复的问题。但找不到我的要求的答案。

我有一个名称列表（字符串），例如

```
Merill, Gopi, kamal, orange, white 
```

我需要做一些事情来使用如下集合按升序获取列表

```
Gopi, kamal, Merill, orange, white 
```

是否可以按字母顺序获取列表？

谁能告诉如何使用集合对此进行排序？

（请在关闭此问题之前提供解决方案作为重复）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T05:56:44.697

你可以使用这个：

```
Collections.sort(list, String.CASE_INSENSITIVE_ORDER) 
```

[`String.CASE_INSENSITIVE_ORDER`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#CASE_INSENSITIVE_ORDER)是班上`Comparator<String>`的。`String`请注意，这不是区域设置感知的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T05:53:45.197

您已经在帖子中提到了解决方案：

> 谁能告诉如何使用collectins对此进行排序？

使用`java.util.Collections.sort(...)`.

[集合的 API](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T05:54:09.003

**Collections.sort(pass the list)**将按升序排列。如果您想按照自己的方式进行排序，那么您需要使用**Comparator**但这里不需要这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T05:57:29.873

我知道您尝试使用 Collections 对其进行排序，但这是一种简单的方法：

```
public static void main(String[] args) throws ParseException {
    String[] values = new String[] {"Some item", "another item", "1 last more", "nevermind", "this is different"};
    System.out.println("Before: " + Arrays.toString(values));
    Arrays.sort(values, new Comparator<String>() {
        @Override
        public int compare(String arg0, String arg1) {
            return arg0.compareTo(arg1);
        }
    });
    System.out.println("After: " + Arrays.toString(values));
} 
```

这是输出：

> 之前：【某项，另一项，最后1个，没关系，这个不一样】
> 
> 之后：[1 last more，Some item，另一个 item，没关系，这是不同的]

该数组首先按数字/其他排序，然后是大写字母，然后是小写字母

# database - 流行的应用程序 Shazam 是如何工作的

> ID：11624906
> 
> 赞同：3
> 
> 时间：2012-07-24T05:52:17.530
> 
> 标签：database, shazam

只是出于好奇，因为我一直想知道这一点。应用程序 Shazam 如何工作？我知道如何使用它，我说的是编程。该应用程序如何聆听歌曲的任何部分，然后为您提供结果？显然，它从数据库中接收歌曲信息，但是没有**人**可以在该数据库中输入人类已知的每一首歌曲。另外，Shazam 怎么不是一直在不断更新？新歌不断发布，但就像 Shazam 已经将未来的歌曲编入其中一样。这对我来说简直令人难以置信，我只想知道这一切究竟是如何运作的。我知道这不是一个帮助问题，但有人可以澄清一下吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:52:50.310

Shazam 仅从傅立叶变换开始（这并不奇怪，因为几乎所有音频处理都以这种方式工作）。

如果您愿意，可以阅读 Avery Wang 的原始论文。他是Shazam算法的发明者。我碰巧认为最好将其解释为最近邻技术，这就是为什么我们将其作为示例包含在“数据挖掘技术，第 3 版”的第 9 章中。

您可能对我们在那里要说的内容感兴趣 (http://www.amazon.com/Data-Mining-Techniques-Relationship-Management/dp/0470650931/ref=pd_sim_b_5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:10:02.920

他们在 diciu 发布的链接上没有说太多。
该算法基于傅里叶波，它允许将数学函数表示为谐波函数的线性和。这种转换允许时间到频率之间的映射，这正是您创建语音识别所需要的。

我很难相信 Shazaam 拥有[傅立叶变换](http://en.wikipedia.org/wiki/Fast_Fourier_transform)的专利。但是，如果您尝试建立“第二个 Shazaam”，您可能会失败，因为他们已经占领了所有市场......

# c# - 在 asp.net 中更新了网格视图单元格的颜色

> ID：11624907
> 
> 赞同：0
> 
> 时间：2012-07-24T05:52:24.387
> 
> 标签：c#, asp.net, web-applications, gridview

我正在 ASP.NET 中创建一个 Web 应用程序。我想要的是当发票被创建并且数量或金额发生变化时，`GridView`影响该`GridView`单元格的行应该在几秒钟内获得突出显示的颜色，然后恢复正常。

我只是想引起用户的注意，这些值发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:54:25.363

看来您想要这个问题的答案的变体： [How to change the gridview row colors in onclick event in javascript?](https://stackoverflow.com/questions/7819638/how-to-change-the-gridview-row-colors-in-onclick-event-in-javascript)

与其绑定到整行，不如将 javascript 函数添加到与数量和数量字段关联的事件中：

```
e.Row.Cells(x).attributes.add("onblur", "ChangeRowColor(this)"); 
```

注意：这里要小心，因为`onblur`不会处理所有更改。您可能想要查看[Detect all changes to a <input type="text"> (立即) 使用 JQuery](https://stackoverflow.com/questions/1948332/detect-all-changes-to-a-input-type-text-immediately-using-jquery)来检测对您的字段的所有更改。

然后，为了使您的行“突出显示”，您会发现使用[jQuery 的突出显示](http://docs.jquery.com/UI/Effects/Highlight)效果最容易。

# emacs - 防止内联图像在emacs中加载不多

> ID：11624909
> 
> 赞同：1
> 
> 时间：2012-07-24T05:52:30.410
> 
> 标签：emacs, elisp

我使用[notmuch](http://notmuchmail.org/)作为我的电子邮件客户端，并使用它的默认界面，emacs 模式。我试图弄清楚如何防止它在电子邮件中显示图像 - 因为我将它用于我的专业电子邮件，所以图像几乎总是不受欢迎的（我也是那些 1 像素跟踪标签的敌人，有些反社会服务插入 HTML 电子邮件）。

我在谷歌搜索和查阅 notmuch 模式文档和`M-x customize`选项时空无一物。不过，我认为我可以利用一些 elisp 价值来完成这项工作，而这对我来说并不明显。

如何告诉 notmuch 忽略图像，或者默认情况下只显示电子邮件的文本部分，忽略 MIME/HTML 内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T04:58:14.253

添加以下行`~/.emacs`似乎对我有用：

```
(gnus-inhibit-images t) 
```

# javascript - 正则表达式组 - 选择文本前面的电子邮件地址

> ID：11624911
> 
> 赞同：0
> 
> 时间：2012-07-24T05:52:46.283
> 
> 标签：javascript, regex

我正在使用[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)来输入正则表达式模式。

我正在尝试使用此正则表达式模式来获取电子邮件地址的各个部分及其前面的文本。

```
(.{1,20})([\w-\.]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4}) 
```

如果您将鼠标移到蓝色突出显示的文本上，那么您会看到 group1 和 group2 存在问题。

请以本文为例。

```
Zak - asdasdsad@gmail.com (use first). Cell 

ssadsada, sadashdjksahjd@gmail.com, and cc: gfhfghgfh@gmail.com.  Include a
specific time for the following: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:28:06.553

这就是你想要的：正则[表达式示例](http://regexr.com?31ka6)

```
(([\w]*[\s-\.]?[\S\s]){1,2})\s([\w-\.]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4})

Group1: Zak -
Group2: asdasdsad
Group3: gmail.
Group4: com 
```

# javascript - Backbone.js 在其他模型中渲染/创建多个模型

> ID：11624917
> 
> 赞同：0
> 
> 时间：2012-07-24T05:53:25.940
> 
> 标签：javascript, backbone.js

我想要以下。想象一下，你有一个有几个问题和一个成绩的家庭作业。每个问题都有几个部分和难度级别。每个部分都有一个属性对或错。

我想通过嵌套模型来实现这个逻辑（或者不管你怎么做，这只是我最好的猜测）。所以会有一个模型“部分”具有正确或错误的属性。然后会有一个称为问题的模型，它有几个与之相关的部分（一个集合？不确定这是否可能）和一个属性难度。然后你会有一个模型作业，它会有几个与之相关的问题和一个属性等级。

我的问题是：

这可能吗？如果是这样，您的一般模型创建的语法是什么？渲染这个的语法是什么？

我正在寻找这样的一般东西：

```
var Homework=Backbone.model.extend({
   defaults:{
     grade:100,
     parts: var parts=Backbone.model.extend({ .... //this definitely seems wrong });
     },
 });

var Homeworkview=Backbone.view.extend({
    initialize: function(){
    //create one question with one part
    },
    render: function(){
    //render template for homework grade then call function to render question, which then renders parts},
 }); 
```

那么你是怎么做到的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:13:49.973

有很多方法可以做到这一点。[Backbone Layout Manager](https://github.com/tbranyen/backbone.layoutmanager)提供了一种很好的、​​惯用的方法来处理嵌套模型，但是对于更小（或更专业）的应用程序，您可能会发现自己想要滚动自己的模型。`Homework`由于and之间的关系看起来与 a和 a`Problem`之间的关系非常相似，因此您可以通过以下方式处理前者之间的关系。`Problem``Part`

首先定义您的模型和集合：

```
var Problem = Backbone.Model.extend({
  // defaults, constructor, etc.
});

var ProblemCollection = Backbone.Model.extend({
  model: Problem
}); 
```

接下来，“父”模型将需要一些方法来跟踪问题的集合。如果需要，我在这里写了[**更多解释**](http://blog.rjzaworski.com/2012/06/model-relationships-in-backbone/)，但总体思路如下：

```
var Homework = Backbone.Model.extend({

  defaults:{
    grade:100,
    problems: []
  },

  initialize: function () {
    // initialize a collection of the "Problems" in this Homework
    this.problems = new ProblemCollection(this.get('parts'));
  }
}); 
```

接下来，观点。子视图可以是任何你想要的。

```
var ProblemView = Backbone.View.extend({
  tagName: 'li'
  // rendering, initializers, etc.
}); 
```

父视图可能会更复杂一些。由于您拥有`Problem`存储在`Homework`模型中的所有模型的集合，因此您可以根据需要为每个模型创建一个新视图。

```
var HomeworkView = Backbone.View.extend({

  render: function () {

    // create a container for problems
    var $problems = $('<ul class="problem-list"></ul>');

    // create a view for each problem
    this.model.problems.each(function (model) {
      var $problem = $('<li class="problem"></li>'),
          problemView = new ProblemView({
            model: model,
            el: el
          });
      $problems.append($problem);
    });

    this.$el.empty().append($problems);

    return this;
  }
}); 
```

希望这会有所帮助！

# php - 在mysql过程中转换phpexplode函数（无索引）并在该数组上运行一个循环

> ID：11624918
> 
> 赞同：0
> 
> 时间：2012-07-24T05:53:25.767
> 
> 标签：php, mysql, procedure

> **可能重复：**
> [您可以拆分/分解 MySQL 查询中的字段吗？](https://stackoverflow.com/questions/471914/can-you-split-explode-a-field-in-a-mysql-query)

我想在mysql过程中转换phpexplode函数
但是
explode函数不包含长度（我们不知道分隔符在哪个索引上）
并且
在exploded数组上运行一个循环，就像我写的php代码中的***循环***一样那个爆炸的数组

**PHP 代码**

```
$data = 'Computers|Personal Computer|Home Use|Accessories|Mouse|Wireless Mouse';    

$categories = explode("|", $data);

for ( $i = 0; $i < sizeof($categories); $i++ ){

      $this->insert_category( $categories[$i] );
} 
```

我在 mysql 中使用了下面的函数，但它只返回一个值，但我想要一个数组，这个函数也需要一个特定的索引，在我的情况下是未知的，因为数据将是任何类型的。
**mysql**

```
CREATE FUNCTION SPLIT_STR(  
   x VARCHAR(255),  
   delim VARCHAR(12),  
   pos INT  
 )

RETURNS VARCHAR(255)
RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos),  
   LENGTH(SUBSTRING_INDEX(x, delim, pos -1)) + 1),  
   delim, ''); 
```

我还使用这些函数只是为了使某些事情更接近我的结果，但是这些函数的行为不准确，例如它们没有正确拆分，没有返回正确的索引等，

我正在一个一个地使用以下所有功能，或者不是同时使用所有功能

```
SET temp2 = substring_index(data_mysql, '|', 2);  
SET temp2 = find_in_set('|', data_mysql);  

SET temp2 = instr(data_mysql, '|');  
SET temp3 = SPLIT_STR(data_mysql, '|', temp2 ); 
```

我将mysql过程中的变量声明为

```
DECLARE data_mysql           VARCHAR(200) DEFAULT NULL;  
DECLARE temp1                VARCHAR(150) DEFAULT NULL;  
DECLARE temp2                VARCHAR(150) DEFAULT NULL;  
DECLARE temp3                VARCHAR(150) DEFAULT NULL; 
```

# ios - 使用文本字段识别 if 条件 - iOS

> ID：11624923
> 
> 赞同：0
> 
> 时间：2012-07-24T05:53:52.647
> 
> 标签：ios, xcode, uitextfield

是否可以使用不同`UITextFields`来识别执行条件？例如，如果用户触摸`UITextField *tf1`它必须访问一个条件（使用 if 语句），如果用户触摸`UITextField *tf2`它必须访问另一个条件。我尝试使用`tags`似乎不起作用。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:00:42.617

标签绝对是正确的解决方案。确保每个文本字段都有自己独特的标签，并确保在读取之前将发送者转换为操作方法中的控件类型。我喜欢为它们定义常量，以明确每个控件的用途。例如在头文件中：

```
#define RED_TEXT_FIELD 1
#define BLUE_TEXT_FIELD 2 
```

在代码中：

```
-(void) onTouchTextField:(id)sender {

   UITextField *theField = (UITextField *)sender;
   if (theField.tag == RED_TEXT_FIELD) {
      ...do something...
   } 
   else if (theField.tag == BLUE_TEXT_FIELD) {
      ...do something...
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:09:19.517

您可以使用`UITextField`委托方法，例如：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    if(textField == tf1)
    {
        // Do something if tf1 is touched
    }
    else
    {
        // Do something if tf2 is touched
    }
} 
```

希望这可以帮助你....

# jquery - 如何在 Jquery 中单击时访问对象的文本

> ID：11624932
> 
> 赞同：0
> 
> 时间：2012-07-24T05:54:35.273
> 
> 标签：jquery

我有一个包含一些细节的对象，在 HTML 中我有三个超链接：第一个、第二个和两者。我想要它，这样当我单击超链接时，我可以匹配对象的文本并将其附加到 div 上。

```
<head>
   <style>
      .text { border:solid 1px #F00; height:30px;}
   </style>
   <script type="text/javascript" src="jquery-1.7.2.js"></script>
   <script type="text/javascript">
      var myDate= {
        'first':'hi i am first object',
        'second':'hi i am second object'
      }
      $(function (){
        $('.text').text()
      })
   </script>
</head>
<body>
   <div class="text"></div>
   <a href="#">first</a>&nbsp;&nbsp;<a href="#">second</a>
   <a href="#">both</a>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:06:05.913

我会做这样的事情：

[http://jsfiddle.net/vVmPW/](http://jsfiddle.net/vVmPW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:10:11.673

你必须使用 .click()

[http://jsfiddle.net/nsjithin/2jTAy/1/](http://jsfiddle.net/nsjithin/2jTAy/1/)

# python - 我可以对 Plone 内容拥有单独的删除权限吗？

> ID：11624935
> 
> 赞同：2
> 
> 时间：2012-07-24T05:54:55.720
> 
> 标签：python, plone

我希望创建一个单独的权限，其中在“共享”选项卡中，我希望拥有一个单独的“删除”权限以及添加、编辑、查看和查看权限。只有“编辑”权限的用户不能“删除”，反之亦然。我正在使用克隆 4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:40:05.393

Plone 具有单独的删除权限，但没有角色。

这是该过程的概述：

在 ZMI 安全选项卡的门户根目录中从编辑角色中删除删除内容。

创建一个新的本地角色“删除者”。

在门户根目录中为该角色授予删除权限。

编辑共享选项卡以显示您的新角色（不确定如何，这里是 Plone 3.x 解决方案[http://pypi.python.org/pypi/collective.sharingroles](http://pypi.python.org/pypi/collective.sharingroles)）

# java - 将图像从一个目录复制到另一个目录的方法不起作用

> ID：11624936
> 
> 赞同：0
> 
> 时间：2012-07-24T05:55:02.827
> 
> 标签：java, fileinputstream

我在java中编写了一个函数来将图像从一个目录复制到另一个似乎不起作用的目录。它抛出一个`IOException`ie `C:\Documents and Settings\Admin\Desktop\C.V (Access is denied)`。可能是什么问题呢。这是代码片段：

```
public void copyImageFiles(File sourceFile, File destinationDir) throws IOException {

    FileInputStream fis = new FileInputStream(sourceFile); 
    FileOutputStream fos = new FileOutputStream(destinationDir);  
    FileChannel srcChannel = fis.getChannel();  
    FileChannel destChannel = fos.getChannel();  
    srcChannel.transferTo(0, sourceFile.length(), destChannel); 
    srcChannel.close();  
    destChannel.close();  
    fis.close();  
    fos.close();      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:44:35.337

您没有以管理员身份登录。从控制面板转到用户并检查您的管理员权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:59:01.927

`C:\Documents and Settings\Admin\Desktop\C.V (Access is denied)`

它必须是 W7 或 Vista 或 W7+。您的程序没有写入权限`C:\Documents and Settings\Admin`

要么将目的地更改为其他地方，例如其他驱动器。或者以管理员身份运行您的程序。

参考：

[http://think-like-a-computer.com/2011/05/11/windows-access-denied-folder-administrator/](http://think-like-a-computer.com/2011/05/11/windows-access-denied-folder-administrator/)

icacls [http://technet.microsoft.com/en-us/library/cc753525%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc753525%28v=ws.10%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:00:56.643

您是否以管理员用户身份登录？如果您的帐户没有所需的权限，访问 Admin 文件夹将引发异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T06:05:35.823

```
C:\Documents and Settings\Admin\Desktop\C.V (Access is denied) 
```

这是一个权限问题。尝试检查文件夹的属性。

# delphi - Delphi（Indy）服务器在写入时冻结

> ID：11624937
> 
> 赞同：1
> 
> 时间：2012-07-24T05:55:03.933
> 
> 标签：delphi, client-server, indy

我目前在客户端（IdTCPClient）和服务器（IdTCPServer）之间有稳定的代码，一切都按计划工作。但是，当我从按钮的 OnClick 事件调用以下函数时，服务器会冻结。

```
var
  SendStream: TMemoryStream;
  FileStream: TFileStream;
  List: TList;
  I: Integer;
begin
  try
    //Load
    FileStream := TFileStream.Create(Path, fmOpenRead);
    FileStream.Position := 0;
    //Place into stream
    SendStream := TMemoryStream.Create;
    SendStream.Write(Header, SizeOf(Header)); //This works; supporting code ommitted  for brevity
    SendStream.CopyFrom(FileStream, FileStream.Size);
    SendStream.Position := 0;

    TIdContext(fTCP.Contexts.LockList[0]).Connection.IOHandler.Write(SendStream, 0, True);
    fTCp.Contexts.LockList;
   if Assigned(Self.fServerOnSync) then Self.fServerOnSync(SizeOf(Header)) //event handler for main form

  finally
    FileStream.Free;
    SendStream.Free;
  end; 
```

我猜它与死锁线程有关，但对于我的生活，我不知道它为什么会发生。

另外，如果我将上述代码封装在某个包含 IdTCP 服务器的类中，它将调用我的自定义 fServerOnSync 事件，这是否是线程安全的？

干杯，阿德里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:55:56.020

您调用`fTCp.Contexts.LockList()`了两次，但您根本没有调用，因此服务器在尝试访问列表`fTCp.Contexts.UnlockList()`时将陷入僵局。`Contexts`您需要在锁定列表后将其解锁，例如：

```
var 
  SendStream: TMemoryStream; 
  FileStream: TFileStream; 
  List: TList; 
  I: Integer; 
begin 
  FileStream := TFileStream.Create(Path, fmOpenRead or fmShareDenyWrite); 
  try 
    SendStream := TMemoryStream.Create; 
    try
      SendStream.Write(Header, SizeOf(Header));
      SendStream.CopyFrom(FileStream, FileStream.Size); 
      SendStream.Position := 0; 

      List := fTCP.Contexts.LockList; 
      try
        TIdContext(List[0]).Connection.IOHandler.Write(SendStream, 0, True); 
      finally
        fTCP.Contexts.UnlockList; 
      end;
      if Assigned(fServerOnSync) then fServerOnSync(SizeOf(Header)); 
    finally 
      SendStream.Free; 
    end; 
  finally
    FileStream.Free; 
  end;
  ...
end; 
```

# javascript - 后退按钮在 jquery mobile 中不起作用

> ID：11624939
> 
> 赞同：0
> 
> 时间：2012-07-24T05:55:07.163
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, cordova

嗨，我有两个 html 文件 index.html 和 test.html 在这两个文件中我都添加了后退按钮，因为`data-rel="back"` 当我从 index 转到 test 时，然后在 test.html 上单击后退按钮，然后它不会导航到 index.html 。我的索引文件如下：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet"  href="jquery.mobile/jquery.mobile-1.1.0.css" />
    <link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
    <link rel="stylesheet" href="docsdemos-style-override.css" />
    <script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
    <script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>

</head> 
<body> 

    <div id="searchpage" data-role="page" data-theme="b" data-role="content" data-add-back-btn="true">

        <div data-role="header" align="center">

                <a href="#" data-rel="back" data-icon="arrow-l">Back</a>
                <h1>index page</h1>
                <a href="MainMenu.html"  data-icon="grid">Menu</a>          

        </div>

        <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br" >
                     <input type="text" name="stock" id="enterstock" value="" />

                    <input type="submit" id = "verify" data-role="button">

        </div>

        <script type="text/javascript">

            $("#verify").click(function (e)
            {
                e.stopImmediatePropagation();
                e.preventDefault();
                window.location = "Test.html";
                 //$.mobile.changePage('Test.html')
            });

        </script>

    </div>

</body>
</html> 
```

我的 test.html 是：

```
<!DOCTYPE html>
 <html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet"  href="jquery.mobile/jquery.mobile-1.1.0.css" />
    <link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
    <link rel="stylesheet" href="docsdemos-style-override.css" />
    <script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
    <script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>
    <!-- Uncomment following line to access PhoneGap APIs (not necessary to use PhoneGap to package web app) -->
    <!-- <script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"></script>-->

</head> 

<body>

    <div id="cash" data-role="page" data-theme="a" data-role="content" data-add-back-btn="true">
        <div data-role="header" align="center">

            <a href="#" data-rel="back" data-icon="arrow-l">Back</a>
            <h1>Test page</h1>
            <a href="MainMenu.html"  data-icon="grid">Menu</a>

        </div>

        <h1>Testing</h1>
    </div>

</body>

</html> 
```

如果我使用`$.mobile.changePage('Test.html')`后退按钮可以正常工作，但`window.location = "Test.html";`无法正常工作。为什么会这样？在 blackberry5 changePage 中不起作用，因此我无法使用它。任何建议将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:06:07.500

data-rel = "Back" 适用于基于单个 html 页面的导航堆栈构建。

将您的页面添加到相同的 html 文件中。它按需应用页面增强。即使两个页面在同一个 html 中，第二页也不会加载到 dom，直到您更改到该页面。

我想当你尝试使用两个 html 时，dom 不应该表现得那样。是不是。

将两个页面放在同一个 html 上。这就是他们建议您依赖内置导航系统的方式。

您的页面格式也不正确。首先遵循一个好的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:10:49.883

如前所述，data-rel="back" 用于单个 HTML 页面中的页面。

但是，您可以尝试使用 history.back() 函数。这应该模拟浏览器上的“后退”按钮，所以如果这是您正在寻找的行为，它应该可以工作。试试看！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T05:07:27.180

在点击事件中使用以下代码

> window.history.back();

# algorithm - 将 32 位整数转换为 36 位整数的单向哈希（无冲突）？

> ID：11624940
> 
> 赞同：4
> 
> 时间：2012-07-24T05:55:08.280
> 
> 标签：algorithm, hash, cryptography

我想使用一种单向散列算法（无冲突）将 32 位整数转换为 36 位整数。

谁能解释如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T07:48:30.153

“单向”意味着“很难”弄清楚 x 给出了哈希结果 h(x)。由于术语“硬”没有明确定义，因此也没有明确定义什么是单向函数。

“无冲突”意味着对于每对 x 和 y，h(x) 与 h(y) 不同，其中 x 与 y 不同。这是一个明确的定义，但很难证明 h(x) 是否真的是单向函数。您必须比较每对两个 32 位数字的哈希结果并测试它们是否不同。

最好的方法是计算所有可能的 h(x) 并将它们与它们的 x 一起存储在一个数组中。然后按 h(x) 对数组进行排序，然后遍历这个列表并测试两个邻居是否具有相同的 h(x)。如果你没有找到相同的邻居，你的散列函数就没有冲突。

**但是：**如果你真的能做到这一点，你的函数就不能真正成为单向函数，因为你刚刚生成的证明无碰撞的列表是一个非常快速的查找表，它可以让你找到每个 h 的 x (x) 在 log(n) 的搜索时间内。这甚至可能比从 x 计算 h(x) 更快。

**所以让我们弄清楚，这真的需要多长时间**

32 位整数是 0 到 4294967295 之间的数字。假设从 x 计算 h(x) 需要 0.1 ms。根据散列算法，即使在便宜的笔记本上也是现实的。因此，在 1 秒内，您获得 10,000 个哈希数字，在一天内获得 864,000,000 个数字。您只需 5 天就可以计算出所有可能的数字并将它们存储在磁盘上。

每个条目对于 32 位数字有 4 个字节，对于 36 位散列有 5 个字节。制作 9 个字节。所以完整的表有 38,654,705,664 字节。这是 38 GB。您可以将其存储在每个低预算笔记本上。这张表的排序需要几分钟，这不计入我们计算所需的 5 天。

因此，在 200 美元的二手笔记本上构建这张桌子绝对没有问题。一旦你有了它，很容易证明它是否真的没有碰撞，但是通过构建这个表你也证明了它不是一个单向函数！

**那么最好的解决方案是什么？**

1.  生成一个包含 4,294,967,296 个随机 36 位数字的列表，为每个条目添加一个 32 位数字，即条目行号（从 0 开始）。
2.  对列表进行排序。
3.  重置 did-change-a-number-flag
4.  浏览列表。将实际条目与前一个条目进行比较。如果它们不同，请转到步骤 7。
5.  用新的随机 36 位数替换 36 位数
6.  设置 did-change-a-number-flag
7.  如果您到达列表的末尾：是否设置了标志？如果是，请转到步骤 2。
8.  按 32 位数字（前行号）对列表进行排序

在第 1 步之后，列表将包含 6.25% 的碰撞（约 2.684 亿次碰撞）。在每次迭代中，您将碰撞次数减少到第 16 部分。消除所有冲突大约需要 8 次迭代。

这个 38 GB 的表现在是您的超快速绝对无冲突哈希函数。它与任何 32 到 36 位散列函数一样是单向的。含义：对于给定的 h(x)，没有其他无冲突的散列函数更难找到 x。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T03:01:03.047

如果 38 GB 对您来说听起来并不小，您可以使用带有 36 位块的[Luby-Rackoff 结构。](http://en.wikipedia.org/wiki/Luby-Rackoff)

首先，将您的 32 位输入填充为 36 位，但您喜欢。

然后生成一堆独立的随机密钥`Ki`。使它们尽可能大。比如说，80 位左右。将这些存储`Ki`在安全的地方，因为您每次“散列”时都会使用它们。

对于轮函数`F(Ki,x)`，使用`SHA1(Ki . x)`截断为 18 位。

这四轮应该做得很好。它肯定是一对一的，因为如果你有`Ki`.

（是的，是的，“永远不要发明你自己的密码学”。但是只有 32 位的输入，谁在乎呢？）

# java - 使用 GPS 捕捉速度

> ID：11624947
> 
> 赞同：4
> 
> 时间：2012-07-24T05:56:25.863
> 
> 标签：java, android, gps, android-4.2-jelly-bean

> **可能重复：**
> [检测android中的速度](https://stackoverflow.com/questions/4497234/detect-a-speed-in-android)

我正在进入 Android 开发，我想开始搞乱 GPS 和捕捉速度。有没有一种方法可以让我使用 GPS 轻松捕捉速度并在屏幕上显示该速度？我可以使用任何简单的框架或内置函数吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-24T06:27:55.727

您将不得不使用[LocationManager](http://developer.android.com/reference/android/location/LocationManager.html)，它用于通过 GPS 获取用户位置，返回的 GPS 数据包括速度。您将不得不使用[LocationListener](http://developer.android.com/reference/android/location/LocationListener.html)`onLocationChanged(Location location)`的功能。

要获得速度，您需要执行以下操作：

```
int speed = location.getSpeed(); 
```

以 m/s 为单位，如果您需要将其转换为 km/h，请使用：

```
int speed=(int) ((location.getSpeed()*3600)/1000); 
```

如果您需要将其转换为 mph，请使用以下命令：

```
int speed=(int) (location.getSpeed()*2.2369); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:26:11.993

我认为有两种方法可以实现这一目标：

首先，如果你在android中引用[Location](http://developer.android.com/reference/android/location/Location.html)类，你会发现它有一个名为的方法 `getSpeed`。它说：

```
Returns the speed of the device over ground in meters/second. 
If hasSpeed() is false, 0.0f is returned. 
```

所以，你可以写，像这样

```
if (locationObj.hasSpeed()) {
    float speed = locationObj.getSpeed();
    // process data
} else {
    // Speed information not available.
} 
```

其次，您可以跟踪 gps 位置更新，以便您存储该更新发生的先前位置和时间。现在，每次有新的更新时，您都可以使用类的`distanceTo`方法找到行进的距离`Location`。因此，要知道当前速度，您可以使用公式，`distance travelled / time difference between the updates`

# eclipse - Eclipse 导航窗格

> ID：11624951
> 
> 赞同：0
> 
> 时间：2012-07-24T05:57:07.467
> 
> 标签：eclipse

我想问一下如何在 Eclipse 中启用此功能，我们在编辑器区域中有此工具栏，您可以在其中看到活动编辑器的项目位置。

我没有它的图形表示，但它看起来像有以下组件：`Project Name > Package > File > Method`. 它与`Java Browsing Perspective`. 它更像是编辑器中活动文件的迷你大纲，通常位于文本区域和编辑器区域中的选项卡的中间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:11:43.467

这是“切换面包屑”按钮，带有一个绿色的小 C 和一个黑色的小三角形。它在工具栏上。在“PDF”下方的屏幕截图中。

![工具栏截图](../Images/afa23fd184c4bb7f364369d86b99c5e8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:01:29.350

我猜你的意思是“大纲”

转到窗口菜单，显示视图，大纲。

# ocaml - 奇怪的`int_of_string`调用？

> ID：11624953
> 
> 赞同：1
> 
> 时间：2012-07-24T05:57:25.883
> 
> 标签：ocaml

以下代码片段来自 ocsigen 源。我不明白用两个参数调用的“int_of_string”：

```
 try
    let dppos = String.index ss':'
        and len = String.length ss in                     
        let host = String.sub ss 0 dppos                  
        and port =                                        
            match String.sub ss (dppos+1) ((len - dppos) - 1) with
                "*" -> None
                | p -> Some (int_of_string "host" p)
             in host, port                                                           
  with                                                
      | Not_found -> ss, None
      | Failure _ ->                                    
          raise (Config_file_error "bad port number") 
```

我在顶层测试它，它通常会报告错误。

真挚地！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T06:02:25.080

在该文件的顶部注意：

```
let blah_of_string f tag s =
  try
    f (String.remove_spaces s 0 ((String.length s) -1))
  with Failure _ -> raise (Ocsigen_config.Config_file_error
                             ("While parsing <"^tag^"> - "^s^
                                " is not a valid value."))

let int_of_string = blah_of_string int_of_string
let float_of_string = blah_of_string float_of_string 
```

即根本不是`Pervasives.int_of_string`！

# python - 避免 Python sum 默认启动 arg 行为

> ID：11624955
> 
> 赞同：16
> 
> 时间：2012-07-24T05:57:43.393
> 
> 标签：python, sum

我正在使用实现`__add__`但不子类化的 Python 对象`int`。`MyObj1 + MyObj2`工作正常，但`sum([MyObj1, MyObj2])`导致`TypeError`, 因为`sum()`第一次尝试`0 + MyObj`. 为了使用`sum()`，我的对象需要`__radd__`处理`MyObj + 0` **或者**我需要提供一个空对象作为`start`参数。有问题的对象并非设计为空的。

在任何人问之前，该对象不是类似列表或类似字符串的，因此使用 join() 或 itertools 将无济于事。

**编辑细节：**该模块有一个 SimpleLocation 和一个 CompoundLocation。我将 Location 缩写为 Loc。A`SimpleLoc`包含一个右开区间，即[start, end)。添加`SimpleLoc`产生 a `CompoundLoc`，其中包含间隔列表，例如`[[3, 6), [10, 13)]`。最终用途包括遍历联合，例如`[3, 4, 5, 10, 11, 12]`检查长度和检查成员资格。

这些数字可能相对较大（例如，小于 2^32 但通常为 2^20）。间隔可能不会很长（100-2000，但可能更长）。目前，仅存储端点。我现在正在试探性地考虑尝试子类化`set`，以便将位置构造为`set(xrange(start, end))`. 但是，添加集合将使 Python（和数学家）适合。

我看过的问题：

*   [python 的 sum() 和非整数值](https://stackoverflow.com/questions/1218710/pythons-sum-and-non-integer-values)
*   [为什么python的内置sum函数中有一个start参数](https://stackoverflow.com/questions/4543129/why-theres-a-start-argument-in-pythons-built-in-sum-function)
*   [覆盖 __add__ 方法后的 TypeError](https://stackoverflow.com/questions/5082190/help-with-add)

我正在考虑两种解决方案。一是避免`sum()`和使用此[评论](https://stackoverflow.com/questions/11520236/how-to-write-a-python-function-that-adds-all-arguments#comment15226549_11520384)中提供的循环。我不明白为什么`sum()`首先将可迭代的第 0 项添加到 0 而不是添加第 0 项和第 1 项（如链接注释中的循环）；我希望有一个神秘的整数优化原因。

我的其他解决方案如下；虽然我不喜欢硬编码的零校验，但这是我能够`sum()`工作的唯一方法。

```
# ...
def __radd__(self, other):
    # This allows sum() to work (the default start value is zero)
    if other == 0:
        return self
    return self.__add__(other) 
```

**总之，**是否有另一种方法可以用于`sum()`既不能添加到整数也不能为空的对象？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T06:29:16.427

代替`sum`, 使用：

```
import operator
from functools import reduce
reduce(operator.add, seq) 
```

在 Python 2`reduce`中是内置的，所以看起来像：

```
import operator
reduce(operator.add, seq) 
```

Reduce 通常比 sum 更灵活——你可以提供任何二进制函数，不仅是`add`，而且你可以*选择*提供一个初始元素，同时`sum`总是使用一个。

* * *

另请注意：（*警告：数学在前面咆哮）*

`add`从代数的角度来看，为没有中性元素的 w/r/t 对象提供支持有点尴尬。

请注意，所有：

*   自然
*   雷亚尔
*   复数
*   Nd 向量
*   NxM 矩阵
*   字符串

与加法一起形成一个[Monoid](http://en.wikipedia.org/wiki/Monoid) - 即它们是关联的并且具有某种中性元素。

**如果您的操作不是关联的并且没有中性元素，那么它就不会“类似于”加法。**因此，不要期望它与`sum`.

在这种情况下，使用函数或方法而不是运算符可能会更好。这可能不那么令人困惑，因为您的类的用户看到它支持`+`，可能会期望它会以单向的方式运行（就像加法通常那样）。

* * *

感谢您的扩展，我现在将参考您的特定模块：

这里有两个概念：

*   简单的地点，
*   复合地点。

可以添加简单的位置确实是有道理的，但它们不会形成幺半群，因为它们的添加不满足闭包的基本属性——两个 SimpleLoc 的总和不是 SimpleLoc。通常，它是一个 CompoundLoc。

OTOH，带有加法的 CompoundLocs 对我来说看起来像一个幺半群（一个可交换的幺半群，而我们正在使用它）：它们的总和也是一个 CompoundLoc，它们的加法是关联的、可交换**的，中性元素是一个空的 CompoundLoc，它包含零 SimpleLocs。**

如果您同意我的观点（并且上述内容与您的实现相匹配），那么您将能够使用`sum`如下：

```
sum( [SimpleLoc1, SimpleLoc2, SimpleLoc3], start=ComplexLoc() ) 
```

确实，这[似乎有效](http://ideone.com/jofui)。

* * *

> 我现在正在试探性地考虑尝试对 set 进行子类化，以便将位置构造为 set(xrange(start, end))。但是，添加集合将使 Python（和数学家）适合。

嗯，位置是一些数字集合，所以在它们之上抛出一个类似集合的界面是有意义的（所以`__contains__`，，，，也许作为产品的别名`__iter__`，等等）。`__len__``__or__``+``__and__`

至于从 构造`xrange`，你真的需要吗？如果您知道要存储间隔集，那么您可能会通过坚持对的表示来节省空间`[start, end)`。您可以输入一个实用方法，该方法采用任意整数序列并将其转换为最佳值`SimpleLoc`，或者`CompoundLoc`如果您觉得它会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T06:15:12.107

我认为实现这一点的最好方法*是*提供`__radd__`方法，或者将 start 对象传递给显式求和。

如果您真的不想覆盖`__radd__`或提供起始对象，那么重新定义如何`sum()`？

```
>>> from __builtin__ import sum as builtin_sum
>>> def sum(iterable, startobj=MyCustomStartObject):
...     return builtin_sum(iterable, startobj)
... 
```

最好使用名称为 的函数`my_sum()`，但我想这是您要避免的事情之一（即使全局重新定义内置函数可能是未来的维护者会诅咒您的事情）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T06:16:22.777

实际上，`__add__`在没有“空对象”概念的情况下实现是没有意义的。 `sum`需要一个`start`参数来支持空序列和单元素序列的总和，并且您必须确定在这些情况下您期望的结果：

```
sum([o1, o2]) => o1 + o2  # obviously
sum([o1]) => o1  # But how should __add__ be called here?  Not at all?
sum([]) => ?  # What now? 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T07:36:43.223

你可以使用一个普遍中立的对象。添加：

```
class Neutral:
    def __add__(self, other):
        return other

print(sum("A BC D EFG".split(), Neutral())) # ABCDEFG 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T06:35:53.157

你可以这样：

```
from operator import add
try:
    total = reduce(add, whatever) # or functools.reduce in Py3.x
except TypeError as e:
    # I'm not 100% happy about branching on the exception text, but
    # figure this msg isn't likely to be changed after so long...
    if e.args[0] == 'reduce() of empty sequence with no initial value':
        pass # do something appropriate here if necessary
    else:
        pass # Most likely that + isn't usable between objects... 
```

# javascript - 在jQuery中将文本框作为实例传递

> ID：11624960
> 
> 赞同：-1
> 
> 时间：2012-07-24T05:58:18.433
> 
> 标签：javascript, jquery

```
var ctrl = $("<input />").decimalControl(AllowedDecimalValues).ControlContainer();
$.fn.decimalControl = function (Decimalvalues) {
    var settings = {
        'maxLength': '25',
        'defaultvalue': '00.00',
        'name': 'decimalcontrol',
        'type': 'number'
    };
    settings.MaxDecVal = Decimalvalues;
    return $(this).ControlBuilder(settings);
};
$.fn.ControlBuilder = function (settings) {
    return this.val(settings.defaultvalue)
        .attr('name', settings.name)
        .attr('value', settings.defaultvalue)
        .attr('type', settings.type)
        .attr('size', settings.maxLength);
}; 
```

上面代码的第一行抛出一个错误：

```
Object doesn't support property or method 'decimalControl'. 
```

请提供帮助或替代解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:00:56.653

您必须`.decimalControl()`在代码使用它之前添加该方法。将使用该`.decimalControl()`方法的第一行代码放在`$.fn.decimalControl = function(...) {...}`添加该方法的行之后。

# javascript - 停止以编程方式加载网页

> ID：11624961
> 
> 赞同：1
> 
> 时间：2012-07-24T05:58:20.897
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我想使用插件生成器创建 Firefox 扩展，以阻止用户访问恶意网站；当我看到一个可疑的 URL 时，我会停止加载页面并询问用户是否真的想访问该站点。我怎么能实现呢？我期待以编程方式获得该功能，以便我可以进行扩展。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T06:07:09.520

```
if(site.is_malicious)
   window.stop(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T06:13:59.423

您正在创建一个 FF 扩展，对吗？为什么不使用greasemonkey 左右？您可以在页面加载之前执行脚本（在greasemonkey上）。调用该脚本时，您可能会停止页面加载并引发错误消息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T05:48:06.517

有一个名为[beforescriptexecute](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/beforescriptexecute)的事件支持我的 mozilla ..... 看看，我认为它会为你工作。但是你想要的可以这样做：

```
var r=confirm("Are you sure you want to visit this site ?"); 
if (r==false) { window.stop(); } 
```

# mysql - MySQL使用字符串函数查找列中的最后一个数字

> ID：11624972
> 
> 赞同：3
> 
> 时间：2012-07-24T05:59:48.017
> 
> 标签：mysql, string

我必须列出表的所有详细信息，其中列 event_id 和 horse_id 以“1”结尾。我通过执行以下操作实现了这一点：

```
SELECT * FROM event 
WHERE event_id AND show_id LIKE '%1' 
```

但是，问题指定了字符串函数的使用。在这种情况下，我能找到的唯一有用的字符串是 RIGHT()。我不能让它按我的意愿执行。

```
SELECT * FROM event
WHERE RIGHT('1',1) 
```

显示所有以 1 结尾的列。但是我需要将搜索限制为 event_id 和 horse_id。

```
SELECT * FROM event
WHERE event_id AND show_id RIGHT('1',1) 
```

不工作。“正确”字符串无效。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T06:03:46.160

你快到*了*，这就是为什么我毫不犹豫地回答。如果您只是举手回答问题，我会更加沉默，但是由于您已经完成了大部分工作（查找`right()`函数），所以我们开始吧。

首先，`WHERE event_id AND show_id LIKE '%1'`几乎可以肯定不会像你想的那样做。复杂表达式的每个组件都必须独立存在，因此您将看到：

```
WHERE event_id LIKE '%1' AND show_id LIKE '%1' 
```

但是，这仍然没有使用字符串函数。他们得到的是您应该将字符串函数应用于列并进行比较，例如：

```
... where right(event_id, 1) = '1' ... 
```

该函数`right(event_id, 1)`将返回`event_id`列的最右边的字符，您只需将其与文字进行比较`'1'`。也这样做`horse_id`（而不是`show_id`像您在示例中所做的那样）将为您提供所需的东西。

**现在停止阅读并先尝试！**

* * *

而且，如果您在阅读了上面的内容并去测试它之后*仍然*不明白，这就是您想要的东西。不要在没有先尝试使用上述信息的情况下使用它。

```
... where right(event_id, 1) = '1' and right(horse_id, 1) = '1' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T06:05:02.360

MySQL 求救！

`RIGHT(str, n)`从 str 返回最右边的 n 个字符。这意味着您需要针对此返回值进行测试。

```
SELECT * FROM event WHERE RIGHT(event_id, 1) = '1' AND RIGHT(horse_id, 1) = '1'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T06:04:51.330

尝试：

```
SELECT * FROM event
WHERE RIGHT(event_id, 1) = '1' AND 
      RIGHT(horse_id, 1) = '1'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T06:07:30.940

尝试使用：

```
and substring(horse_id, -1) = '1' 
```

# php - drupal - 2 个站点 1 个用户表

> ID：11624974
> 
> 赞同：0
> 
> 时间：2012-07-24T06:00:18.073
> 
> 标签：php, drupal

我有 2 个站点：xyz.com（只是简单的 2 个站点链接）、a.xyz.com（在 drupal 上）和 b.xyz.com（也在 drupal 上）。我想做的是，如果有人在 a.xyz.com 上创建帐户，这个帐户也将在 b.xyz.com 上工作（以及从 b.xyz.com 到 a.xyz.com）。登录时的情况相同 - 如果有人将登录 a.xyz.com/b.xyz.com，则此帐户将在 b.xyz.com/a.xyz.com 上处于活动状态）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:34:32.887

标准的处理方式是使用 Drupal [Bakery](http://dgo.to/bakery)的 SSO 解决方案，它非常强大和安全。

您可能会发现更轻量级的[Account Sync 可以满足](http://dgo.to/account_sync)您的需求；但是，您应该注意权衡，包括安全性。

# jquery - chechboxes中的jquerymobile可点击链接

> ID：11624975
> 
> 赞同：0
> 
> 时间：2012-07-24T06:00:28.093
> 
> 标签：jquery, css, jquery-mobile, hyperlink

似乎很难让一个链接在复选框标签内工作，覆盖默认的点击事件

```
<input type="checkbox" name="pr1" id="checkbox-5a" />
<label for="checkbox-5a">Check3 <a href="http://www.google.com" data-ajax="false" rel="external" style=" z-index:70000;">link</a></label> 
```

它可能需要javascript才能使其工作，以及如何？谢谢

[http://jsfiddle.net/ca11111/M7Bwc/1](http://jsfiddle.net/ca11111/M7Bwc/1)

**编辑**：似乎可以用 onclick 和 location.href

```
<input type="checkbox" name="pr1" id="checkbox-5a" />
<label for="checkbox-5a">Check3 <a onclick="location.href='http://www.google.com'">link</a></label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:23:55.523

尝试这个：

```
$('label').click(function(e){ // or $('label a').click(function(e){
    e.stopPropagation()
}) 
```

[演示](http://jsfiddle.net/M7Bwc/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:12:25.500

将链接紧跟在标签之后有什么问题：

```
<label for="checkbox-5a">Check3 </label><a href="http://www.google.com"
       data-ajax="false" rel="external" style=" z-index:70000;">link</a> 
```

或者，如果你真的觉得你必须颠覆标准的标签行为*，为什么不直接使用 span 呢？

[* 请不要。]

**编辑：**好的，试试这个：

```
$("label a").click(function(e){ e.stopPropagation(); }); 
```

# php - 我希望该电子邮件标题部分不包含通过链接

> ID：11624981
> 
> 赞同：0
> 
> 时间：2012-07-24T06:01:09.150
> 
> 标签：php

当用户在我们的网站上提交联系我们表格并且信息来自我们的电子邮件标题包含来自：abc@gmail.com 通过 218208-db2.christiandatingforfree.com。我们不希望在标题部分通过 218208-db2.christiandatingforfree.com。有什么建议么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:05:10.150

这不是你能控制的。Gmail 这样做是为了安全起见，否则您可以发送一封带有 from 字段的电子邮件`support@gmail.com`

# iphone - 如何从目标 c 中的 XML-RPC 响应中获取 display_name

> ID：11624982
> 
> 赞同：0
> 
> 时间：2012-07-24T06:01:09.883
> 
> 标签：iphone, objective-c, ios, wordpress, xml-rpc

**在我的 iphone 应用程序中，我正在使用XML-RPC wordpress API**访问由 wordpress 支持的博客，并且我正在通过 XML-RPC 方法`wp.getUsers`连接获取用户列表，一切正常，我得到如下响应（`NSLog`输出）

```
2012-07-24 11:13:19.317 projectABC[1465:207] (
        {
        "display_name" = "Ravi Interior Design";
        email = "info@xyz.com";
        nicename = abiqsd;
        registered = "2012-05-11 11:58:52 +0000";
        "user_id" = 15;
        username = abssid;
    },
        {
        "display_name" = "qqHeuer";
        email = "aheuer@xyz.com";
        nicename = adamhequer;
        registered = "2012-05-18 15:59:30 +0000";
        "user_id" = 44;
        username = adamhequer;
    },
        {
        "display_name" = "Asdasm Rseyses";
        email = "xyz@abc.net";
        nicename = adaqmraeyes;
        registered = "2012-06-02 18:51:06 +0000";
        "user_id" = 160;
        username = adaqmreyeqs;
    }, 
```

现在我只需要将**display_name**存储在 NSArray 中，但我不知道如何从上述 XML-RPC 响应中仅提取 **display_name**，任何人都可以帮助我，请提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:04:53.587

假设您打印的是 NSArray of Dictionaries，

```
NSLog(@"%@",[yourArray valueForKeyPath:@"display_name"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:15:12.907

对于字典数组。

```
int i;
NSMutableArray *display_name = [[NSMutableArray alloc] init];
for(i=0;i<[Arr count];++i)
{
    [display_name addobject:[[Arr objectAtIndex:i] valueForKey:@"display_name"]];
    NSLog(@"%@", [[Arr objectAtIndex:i] valueForKey:@"display_name"]);
} 
```

# rest - 宁静的 DDS 执行

> ID：11624988
> 
> 赞同：0
> 
> 时间：2012-07-24T06:01:35.427
> 
> 标签：rest, data-distribution-service

[我从http://code.google.com/p/restful-dds/downloads/list](http://code.google.com/p/restful-dds/downloads/list)网站下载了 restful-dds-1.0-src.tgz 文件。我正在使用linux环境。从 ReadMe.txt 文件中，我执行 chatter 应用程序 (CHATROOM TEST) 到 scripts/startRESTfulDDS.sh 并查看 .html 文件`http://ipaddress:8182/static/ajaxTest.html`。之后“通过运行 scripts/Chatter.{sh,bat} 在 Tutorial 目录中运行 Chatter 应用程序。” 在这里我的问题出现了。我无法在 Tutorial 文件夹中看到 scripts 文件夹和 chatter.sh 文件。请帮助我做错了什么。

我正在使用 opensplice DDS v5.5

```
GWT2.4.0, 
JDK 1.6, 
Restlet v2.0.14, 
Gson v2.2.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:17:17.433

> 我无法在 Tutorial 文件夹中看到 scripts 文件夹和 chatter.sh 文件

创建的`Tutorial`文件夹是 OpenSpliceDDS 教程的精确副本，位于`$OSPL_HOME/examples/dcps/standalone/Java/Tutorial`. 和本教程中的描述似乎不匹配，`resful-dds README`因为确实没有`chatter.sh`. 但是，目录中有一个解释如何运行`README.txt`的目录：`Tutorial``Chatter`

```
Chatter [userid] [username]
  userid:   an integer number that uniquely identifies the sender of a message
            (Transmit a message with userid = -1 to terminate the MessageBoard.)
  username: the user-name other chatters will see when they receive one of your
            chat messages.

The executables classes are located in the chatroom package, but should be
started from the current directory in the following way:
...
java -classpath $OSPL_HOME/jar/dcpssaj.jar:bld chatroom.Chatter 1 Bill 
```

按照此过程，您应该能够运行`Chatter`. 当然，您应该首先运行`ospl start`以初始化基础架构。

顺便说一句，您不需要运行本教程的 java 版本——任何受支持的语言都应该这样做。`Chatter`OpenSpliceDDS 安装本身应该为您提供有关针对不同语言运行的更多信息。RESTful DDS Web 服务将获取在 DDS 总线上找到的任何数据并通过 HTTP 公开它，无论原始进程是用什么语言编写的。

# movabletype - 如何创建可移动的 Type 5 开发环境？

> ID：11624989
> 
> 赞同：0
> 
> 时间：2012-07-24T06:01:36.387
> 
> 标签：movabletype

我想创建一个运行Movable Type 5的开发环境。
要创建一个单独的开发环境，需要复制和粘贴以反映生产。
我将如何去建立一个良好的环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:37:44.627

构建开发环境的方法有很多，经验丰富的 Movable Type 开发人员需要更多地了解您的目标才能提出好的建议。

以下所有指南均假设 Movable Type 已安装并准备好在开发服务器上运行。

以下是一些基本提示：

尽管 Movable Type 实例的一些关键配置细节保存在 mt-config.cgi 中，但在底层数据库中保存了同样重要的网站级别和博客级别设置。

由于大多数 Movable Type 5 实例使用 MySQL 作为数据库后端，因此可以使用[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)实用程序或更直观的工具（如[phpMyAdmin 的导出功能）](http://www.phpmyadmin.net/documentation/#faq6_4)转储 Movable Type 数据库的全部内容。这会生成一个带有 MySQL [CREATE TABLE](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)和[INSERT](http://dev.mysql.com/doc/refman/5.5/en/insert.html)语句的大文本文件。

将数据库转储到文件后，可以将文件移动到另一台服务器、修改和重组。那时我们通常执行的任务之一是使用编辑器、UNIX sed 命令或一些类似的过程浏览数据库，并对嵌入在数据库转储中的 URL 和文件系统路径执行全局搜索和替换.

这在许多情况下是必要的，因为您的生产网站可能是`http://www.mysite.com/`，但您的开发环境可能是`http://dev.mysite.com/`甚至是`http://localhost/`。同样，生产中的文件系统路径可能是 /var/www/mysite/htdocs/... 而开发可能是 /opt/local/apache2/htdocs/mysite/...。

一旦进行了这种性质的更改并保存了修改后的文件，就可以使用 UNIX shell 命令在开发服务器上重新构建数据库，例如：

```
cat mysite.sql | mysql -u mt_user -p mt_password 
```

或者通过将数据库导入到另一个 phpMyAdmin 副本中。

完成所有这些后，需要将生产中的 mt-config.cgi 文件复制到 Movable Type 工作目录并重写，以便更改几个重要元素：

*   CGI路径
*   静态网络路径
*   数据库
*   数据库用户
*   数据库密码
*   数据库主机

这些[可移动类型配置指令](http://www.movabletype.org/documentation/appendices/config-directives/)在在线文档中进行了讨论。

所有非数据库资产都必须从生产复制到开发。诸如包含 jpeg、png 和 gif 图像的文件，手动或使用[Asset Manager](http://www.movabletype.org/documentation/author/manage-assets.html)放置在生产文件系统中的文件。根据您使用 Movable Type 的方式，可能还有其他文件需要从生产中复制。

一旦所有这些都完成了，并且您能够成功登录到 Movable Type 开发服务器，您可能需要访问网站和博客以确保所有内容都已复制到开发中。

我希望这些说明对需要设置开发环境的人有所帮助。如果有人认为我遗漏了任何重要的内容，我很乐意得到评论或编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:58:59.290

说你需要一个Movable Type的开发环境，你到底需要开发什么？如果你正在开发一个插件？还是主题？一个网站？内容？

可以为每个虚拟服务器分配不同的 mt-config.cgi 文件，并在不同的数据库上工作，以进行相同的安装。如果您正在开发插件，您将需要使用 PluginSwitch 指令，这样开发的插件就不会加载到真实网站上。

[http://www.movabletype.org/documentation/installation/managing-multiple-instances-of.html](http://www.movabletype.org/documentation/installation/managing-multiple-instances-of.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:22:57.453

Eslar，您可能还想考虑这个文档资源： [http ://www.movabletype.org/documentation/mt41/rsync.html](http://www.movabletype.org/documentation/mt41/rsync.html)

或者，您可以考虑： [http ://www.cis.upenn.edu/~bcpierce/unison/](http://www.cis.upenn.edu/~bcpierce/unison/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T21:31:57.770

如果您使用可移动类型文档中描述的“rsync”解决方案，您可能还想检查那里提到的这些配置指令：

[http://www.movabletype.org/documentation/appendices/config-directives/rsyncoptions.html](http://www.movabletype.org/documentation/appendices/config-directives/rsyncoptions.html) [http://www.movabletype.org/documentation/appendices/config-directives/synctarget.html](http://www.movabletype.org/documentation/appendices/config-directives/synctarget.html)

# c# - 将命名空间添加到 xml 文件

> ID：11624990
> 
> 赞同：2
> 
> 时间：2012-07-24T06:01:44.937
> 
> 标签：c#, add, xml-namespaces

我有一个要添加预定义名称规范的 xml 文件。以下是代码：

```
private const string uri = "http://www.w3.org/TR/html4/";
private static readonly List<string> namespaces = new List<string> { "lun" };

public static XElement AddNameSpaceAndLoadXml(string xmlFile) {
    var nameSpaceManager = new XmlNamespaceManager(new NameTable());
    // add custom namespace to the manager and take the prefix from the collection
    namespaces.ToList().ForEach(name => {
         nameSpaceManager.AddNamespace(name, string.Concat(uri, name));
    });

    XmlParserContext parserContext = new XmlParserContext(null, nameSpaceManager, null, XmlSpace.Default);
    using (var reader = XmlReader.Create(@xmlFile, null, parserContext)) {
        return XElement.Load(reader);
    }
} 
```

问题是内存中生成的 xml 没有显示添加的正确命名空间。此外，它们不会添加到根目录，而是添加到标签旁边。下面添加了 Xml。在 xml 中它显示`p3:read_data`while should be `lun:read_data`.

我如何在根标签上添加命名空间而不是得到不正确的名称。

示例输入 xml：

```
<config file-suffix="perf">
 <overview-graph title="Top 5 LUN Reads" max-series="5" remove-series="1">
  <counters lun:read_data=""/>
 </overview-graph>
</config> 
```

预期输出 xml：

```
<config file-suffix="perf" xmlns:lun="http://www.w3.org/TR/html4/lun">
 <overview-graph title="Top 5 LUN Reads" max-series="5" remove-series="1">
  <counters lun:read_data=""  /> 
 </overview-graph>
</config> 
```

使用上述代码的输出：

```
<config file-suffix="perf" >
 <overview-graph title="Top 5 LUN Reads" max-series="5" remove-series="1">
  <counters p3:read_data=""  xmlns:p3="http://www.w3.org/TR/html4/lun"/> 
 </overview-graph>
</config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:11:28.303

我不确定是否有更好的方法，但手动添加命名空间似乎可行。

```
using (var reader = XmlReader.Create(@xmlFile, null, parserContext)) {
    var newElement = XElement.Load(reader);
    newElement.Add(new XAttribute(XNamespace.Xmlns + "lun", string.Concat(uri, "lun")));
    return newElement;
} 
```

但是，我不知道一种概括这一点的方法（显然，您可以通过枚举它来添加整个集合，但仅输出使用的命名空间可能很有趣）。

# excel - 获取单元格的值，而不是其地址，作为 Excel 公式的参数

> ID：11624998
> 
> 赞同：-1
> 
> 时间：2012-07-24T06:02:17.767
> 
> 标签：excel, date, excel-formula

有一列包含值，并且每天都会添加一个新列（日期在相邻列中）。我需要自动获得每三个月的平均值。虽然对于过去的数据很容易这样做，但我想知道是否有可能有一个公式可以选择日期，并且在到达指定日期之前获取最后一个单元格的数据平均值. 例如：

A 列的日期从 2012 年 7 月 1 日到 2012 年 7 月 23 日。B 列具有某些值。

两者每天都有一个新条目（周末除外）。我是否有可能获得直到最后输入日期（在这种情况下为 7/23/2012）的平均值，但仅在日期达到 9/30/2012 之前有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:01:16.020

在 Excel 中，日期可以表示为数字，更具体地说是自 1900 年 1 月 1 日以来的天数。在这种情况下，您希望将 2012 年 9 月 30 日的天数限制为 41182。因此您可以计算B 列中的值的平均值，使得 A 列中的相关日期早于 2012 年 10 月，使用以下公式：

```
=AVERAGEIFS(B:B, A:A, "<41183") 
```

如果你想设置一个日期范围，比如从 2​​012 年 7 月 1 日到 2012 年 9 月 30 日，你可以这样做：

```
=AVERAGEIFS(B:B, A:A, "<41183", A:A, ">41090") 
```

只需使用日期及其数字表示即可获得正确的界限。希望这可以帮助！