# StackOverflow 问答 12315000-12315999

# mysql - 如何在mysql中使用count(*) WHERE IN

> ID：12315000
> 
> 赞同：2
> 
> 时间：2012-09-07T09:04:21.997
> 
> 标签：mysql, sql

```
SELECT COUNT(*) FROM `product` where barcode in (681155,
681144,
681145,
681146,
681147,
681148,
688123,
688124,
688125,
688126) GROUP BY(barcode); 
```

如何在此语句中使用 count(*)？我得到所有行的 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:06:02.183

尝试：

```
SELECT COUNT(*) FROM `product` 
where barcode in
 (681155,
681144,
681145,
681146,
681147,
681148,
688123,
688124,
688125,
688126) 
```

这将为您提供表格中的总数

当您使用 GROUP BY 时，它将计算每个组。

```
SELECT barcode ,COUNT(*) FROM `product` 
    where barcode in (....)
Group by barcode 
```

如果所有行都有一个，那么您的表包含不同的条形码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:29:19.587

从查询中删除 GROUP BY(barcode) 并运行。它应该适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:07:54.957

如果您想检索所有记录的总数，只需删除即可`GROUP BY`。`GROUP BY`基本上将`Barcode`彼此分组，这就是为什么你只得到一个 eact 计数`barcode`

![在此处输入图像描述](../Images/6f1fdbe887c2931a163a38a6bad91f0a.png)

# java - Jtree节点添加

> ID：12315001
> 
> 赞同：1
> 
> 时间：2012-09-07T09:04:23.370
> 
> 标签：java, database, swing, jtree

我创建的 JTree 从数据库中填充。我想添加能够创建 insertNodeInto() 函数的新节点。现在如何更改底层数据库？

1.  首先通过树模型添加节点，然后在数据库中插入
2.  插入数据库，然后重新创建树。

我想知道上面案例（1）中涉及的步骤，因为我创建的树有大量节点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:21:58.950

我会先将它添加到数据库中。原因是如果 DB 插入由于某种原因（例如约束）失败并且您收到 SQLException，用户不应该得到插入成功的印象。

当然，您不需要重新创建树，您可以随时添加另一个节点。

# android - 如何在android中实现图像滚动视图？

> ID：12315003
> 
> 赞同：1
> 
> 时间：2012-09-07T09:04:30.980
> 
> 标签：android, image, scroll, android-imageview, pinchzoom

我有一组大约 300 张图像。我想实现图像的滚动视图。当我滚动时，应该显示下一个图像。

当我浏览不同的论坛和文档时，我发现有很多方法可以做到这一点。Horizo​​ntalScrollView、Gallery、ViewAnimator、ViewSwitcher 等

请告诉我什么是最好和最有效的实施方式。我还应该能够缩放每个单独的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:06:41.713

自 Jelly Bean 以来，Gallery 小部件已被弃用。

您可以使用`ViewPager`或`HorizontalScrollView`用于您的目的。

来自[画廊](http://developer.android.com/reference/android/widget/Gallery.html)文档：

> 此类已弃用。不再支持此小部件。其他水平滚动小部件包括支持库中的 Horizo​​ntalScrollView 和 ViewPager。

# android - 将json解析后的数据动态添加到数组中

> ID：12315008
> 
> 赞同：0
> 
> 时间：2012-09-07T09:04:57.193
> 
> 标签：android, json, parsing

我有一些 json/xml 编码的数据（比如 10 个图像 url）。你知道如何动态地将这些数据插入到数组中吗？（我不知道数据的大小 :)）

# c - 溢出输入的 scanf 行为

> ID：12315014
> 
> 赞同：1
> 
> 时间：2012-09-07T09:05:27.267
> 
> 标签：c, scanf

我在运行以下代码时遇到了一些问题。`scanf`如果我向方法 feed array提供超过五个字符的输入`a`，则其余字符将进入 array`b`并且我不会再次提供输入。我尝试使用`fflush()`，但没有帮助。发生了什么事，我该如何解决？

```
#include<stdio.h>

int main()
{
 char a[6];
 char b[20];

 printf("Enter any string :\n");
 scanf("%5s",a);

 printf("%s\n",a);

 fflush(stdin); 

 scanf("%s",b);
 printf("%s\n",b);

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:11:59.697

您永远不应该使用 fflush(stdin) 来清除输入缓冲区，它的未定义行为，只有 Microsoft-CRT 支持这一点。

```
#include<stdio.h>

int main()
{
 int c;
 char a[6];
 char b[20];

 printf("Enter any string :\n");
 scanf("%5s",a);

 printf("%s\n",a);

 while( (c=getchar())!=EOF && c!='\n' ); 

 scanf("%19s",b);
 printf("%s\n",b);

 return 0;
} 
```

# plugins - Phonegap：将照片保存到特定路径

> ID：12315017
> 
> 赞同：0
> 
> 时间：2012-09-07T09:05:44.837
> 
> 标签：plugins, cordova

我正在使用 cordova 框架在 iOS 上开发应用程序。我需要将照片（刚拍摄的）保存在特定路径中，但科尔多瓦默认将其设置为 localhost/var/mobile/Applications/.../tmp/cdv_photo_006.jpg 而我想将其保存在 .../www /data/camera/cdv_photo_006.jpg 我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T07:43:24.253

在 IOS 中，您至少可以在非越狱的 iphone 和 ipad 中访问您的应用程序包（temp + 文档文件夹），所以您正在做的事情是不可能的。

# c# - 将列表保存到数据库

> ID：12315022
> 
> 赞同：1
> 
> 时间：2012-09-07T09:06:06.133
> 
> 标签：c#, asp.net, sql, code-behind

这是我到目前为止所拥有的：

```
Veza.Open();
SqlCommand zadnjaN = new SqlCommand("SELECT TOP 1 id_n FROM Narudzba ORDER BY id_n DESC", Veza);
var id_zn = zadnjaN.ExecuteScalar(); //get 1 value for id_zn (last one entered)
List<int> proizvodi = new List<int>();
proizvodi = (List<int>)Session["kosarica"];
SqlCommand kupnja1 = new SqlCommand("INSERT INTO NarudzbaItemi ([narudzbaID], [proizvodID]) VALUES (@id_zn, @pro)", Veza);
for (int i = 0; i < proizvodi.Count; i++)
{
  kupnja1.Parameters.AddWithValue("pro", proizvodi[i]); //also tried @pro
  kupnja1.Parameters.AddWithValue("id_zn", id_zn); //@id_zn
  kupnja1.ExecuteNonQuery();
}
Veza.Close(); 
```

我收到一条消息说变量名@pro 已经被声明。关键是，我需要在 proizvodID 列中插入一个 int 项列表，但是我在该列中插入一个值很多次我需要在 narudzbaID 列中插入一个不变的值，我从另一个表中获得最后增加的价值。所有 3 列都是 int，Session 是 List int。使用 asp.net、c#、sql server 2008。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:08:28.690

您不断在循环中添加参数。在第二次迭代中，`@pro` *已*定义。

试试这个：

```
Veza.Open();
object id_zn; //get 1 value for id_zn (last one entered)
using (SqlCommand zadnjaN = new SqlCommand("SELECT TOP 1 id_n FROM Narudzba ORDER BY id_n DESC", Veza))
{
    id_zn = zadnjaN.ExecuteScalar();
}
List<int> proizvodi = (List<int>)Session["kosarica"];
using (SqlCommand kupnja1 = new SqlCommand("INSERT INTO NarudzbaItemi ([narudzbaID], [proizvodID]) VALUES (@id_zn, @pro)", Veza))
{
    kupnja1.Parameters.Add("pro"); 
    kupnja1.Parameters.Add("id_zn");
    for (int i = 0; i < proizvodi.Count; i++)
    {
        kupnja1.Parameters["pro"].Value = proizvodi[i]; //also tried @pro
        kupnja1.Parameters["id_zn"].Value = id_zn; //@id_zn
        kupnja1.ExecuteNonQuery();
    }
}
Veza.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:18:49.770

在这里你可以如何做到这一点。但我认为约翰桑德斯的方法更好

```
 for (int i = 0; i < proizvodi.Count; i++)
    {
        //Add this line to clear parameters
        kupnja1.Parameters.Clear();
        kupnja1.Parameters.AddWithValue("pro", proizvodi[i]); //also tried @pro
        kupnja1.Parameters.AddWithValue("id_zn", id_zn); //@id_zn
        kupnja1.ExecuteNonQuery();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:08:41.413

这基本上是说你不能继续重用相同的命令，这应该可以工作，将声明移动到循环中：

```
 Veza.Open();
    SqlCommand zadnjaN = new SqlCommand("SELECT TOP 1 id_n FROM Narudzba ORDER BY id_n DESC", Veza);
    var id_zn = zadnjaN.ExecuteScalar(); //get 1 value for id_zn (last one entered)
    List<int> proizvodi = new List<int>();
    proizvodi = (List<int>)Session["kosarica"];

    for (int i = 0; i < proizvodi.Count; i++)
    {
        SqlCommand kupnja1 = new SqlCommand("INSERT INTO NarudzbaItemi ([narudzbaID], [proizvodID]) VALUES (@id_zn, @pro)", Veza);
        kupnja1.Parameters.AddWithValue("pro", proizvodi[i]); //also tried @pro
        kupnja1.Parameters.AddWithValue("id_zn", id_zn); //@id_zn
        kupnja1.ExecuteNonQuery();
    }
    Veza.Close(); 
```

# java - 基于 Java 控制台的客户端 - 服务器登录应用程序 - 数据库身份验证中的错误

> ID：12315023
> 
> 赞同：2
> 
> 时间：2012-09-07T09:06:16.927
> 
> 标签：java, sockets, client-server, resultset

从早上开始，我一直在尝试解决这个问题。我有客户端和服务器应用程序，客户端发送用户名和密码，服务器接收它，检查数据库，向正确的用户发送成功消息。
但是，我无法从客户端处理此请求。
有什么问题，它在哪里撒谎？等待专家解决方案...

这是服务器：

```
import java.io.*;
import java.net.*;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.io.File;
import java.sql.*;

class TCPServer
{
    public static void main(String argv[]) throws Exception
       {
          String clientSentence,clientpassword;
          String capitalizedSentence;
          ServerSocket welcomeSocket = new ServerSocket(4003);
          Connection con = null;
          String url = "jdbc:mysql://localhost:3306/";
          String db = "database";
          String driver = "com.mysql.jdbc.Driver";
          String user = "root";
          String pass = "root";

          while(true)
          {
             Socket connectionSocket = welcomeSocket.accept();
             BufferedReader inFromClient =
             new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
             BufferedReader inFromClient1 =
             new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
             DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
             clientSentence = inFromClient.readLine(); 
             clientpassword = inFromClient.readLine();
             System.out.println("Received User Name: " + clientSentence);
             System.out.println("Received Password: " + clientpassword);
             Class.forName(driver).newInstance();
             con = DriverManager.getConnection(url+db, user, pass);
             Statement st = con.createStatement();
             ResultSet res = st.executeQuery("SELECT * FROM  table WHERE user='clientSentence' AND password='clientpassword'");
             while (res.next()) { 
             String u = res.getString("user");
             String p = res.getString("password");
             if (clientSentence.equals(u) && clientpassword.equals(p)){
             capitalizedSentence = "Welcome "+clientSentence+" \n";
             outToClient.writeBytes(capitalizedSentence); 
            }else{  
             capitalizedSentence = "Sorry, not authorized \n";
             outToClient.writeBytes(capitalizedSentence); 
            }    
          }
        }con.close();
       }
} 
```

和客户：

```
import java.io.*;
import java.net.*;
import java.io.File;
import java.io.FileInputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;
import java.util.Arrays;
import java.lang.*;
import java.util.Scanner;

class TCPClient
{
  public static void main(String argv[]) throws Exception
  {
   String sentence,sentence1;
   String modifiedSentence;
   BufferedReader inFromUser = new BufferedReader( new InputStreamReader(System.in));
   BufferedReader inFromUser1 = new BufferedReader( new InputStreamReader(System.in));
   Socket clientSocket = new Socket("localhost", 4003);
   DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
   DataOutputStream outToServer1 = new DataOutputStream(clientSocket.getOutputStream());
   BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
   Console console = System.console();
   String username = console.readLine("Enter your Username :");
   char pswd[] = console.readPassword("Enter your Password :");
   String upwd=new String(pswd);
   outToServer.writeBytes(username + '\n');
   outToServer1.writeBytes(upwd + '\n');
   modifiedSentence = inFromServer.readLine();
   System.out.println("FROM SERVER: " + modifiedSentence);
}
   clientSocket.close();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:11:51.163

如果您在同一台机器上运行客户端和服务器，则不应为客户端和服务器套接字使用相同的端口..使用不同的端口..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:17:23.903

如果您的 JVM 没有关联，您的代码会导致 in `NullPointerException`。`TCPClient``Console`

* * *

> ResultSet res = st.executeQuery("SELECT * FROM table WHERE user='clientSentence' AND password='clientpassword'");

除非您真的想始终使用用户名“clientSentence”和密码“clientpassword”，否则这绝对行不通。

您应该传递您在该行上方设置的相应 java 变量的实际值。此外，正确的方法是使用 a`PreparedStatement`并将用户输入作为参数传递，以便驱动程序负责清理输入以避免 SQL 注入或类似`ImbecilUserException`. :)

# ruby-on-rails - Rails 活动管理员执行我的操作

> ID：12315025
> 
> 赞同：1
> 
> 时间：2012-09-07T09:06:26.820
> 
> 标签：ruby-on-rails, activeadmin

我需要向我的方法介绍一些操作（不像在 activeadmin gem 中，例如查看、编辑等），而是我自己的，例如上传文件并在控制器方法中执行某些操作，但是如何做到这一点，我还需要在 activeadmin 中链接，例如“我的方法”。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:17:36.783

可以试试写吗

```
 controller do 

  def method_name
  //some stuff
  end

 end 
```

在 app/admin/some_resource_name.rb 的活动管理资源文件中

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T10:42:39.667

如果您想为 active_admin 添加控制器操作， 请查看[https://github.com/gregbell/active_admin/wiki/Add-custom-actions-and-buttons](https://github.com/gregbell/active_admin/wiki/Add-custom-actions-and-buttons)

# xml - JMeter SOAP/XML-RPC 请求，从属性构建的 URL 未扩展

> ID：12315028
> 
> 赞同：1
> 
> 时间：2012-09-07T09:06:38.893
> 
> 标签：xml, web-services, soap, jmeter

我正在使用 SOAP/XML-RPC 采样器，我希望能够在 URL 和 SOAPAction 标头中拥有一个变量主机名。

我尝试在命令行上传递（-Jhost=xxx.xxx.xxx.xxx）并使用 ${__P(host)} 进行扩展，但它似乎为空（java.lang.IllegalArgumentException：主机名可能不为空) 当我运行测试时。

我在成功扩展的 XML 正文中使用命令行上传递的其他属性。

关于我做错了什么的任何建议？

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:14:49.393

它对我有用：

在我输入的 URL 字段中：

```
http://${__P(host)}:8888/test 
```

在 GUI 中启动时，我添加：

```
-Jhost=localhost 
```

适用于 JMeter 2.7 和当前 trunk ，我没有使用以前的版本进行测试。

你能提供更多细节吗？

*   你在测试计划中有什么

*   jmeter.log 中的完整异常堆栈跟踪

问候

菲利普·M。

# android - 无法关闭 AsyncTask 中的进度条

> ID：12315029
> 
> 赞同：0
> 
> 时间：2012-09-07T09:06:40.857
> 
> 标签：android

我想使用进度条将数据从列表加载到具有加载效果的gridview。我从webservice获取项目。我面临的问题是即使在显示gridview之后我也无法关闭进度条。我可以看到带有项目的gridview但是进度条仍在运行。我在这里做错了什么。

```
private void testAsyncTask() {
        Log.e("Im in testAsyncTask()", "");
        new AsyncTask<Object, Object, Object>() {

            @Override
            protected void onPreExecute() {

                progress_Dialog = ProgressDialog.show(a, "", "Loading");

                Log.e("Im in onPreExecute", "");
                // super.onPreExecute();
            }

            @Override
            protected Integer doInBackground(Object... params) {
                MenuService menuService = new MenuServiceImpl();
                PartnerMenuServiceResponse partnerMenu = menuService
                        .getPartnerMenu();
                jewellist = partnerMenu.getMenu().getMenuEntries();
                Log.e("Im in doInBackground", "");
                System.gc();

                return 0;
            }

            @Override
            protected void onPostExecute(Object result) {
                // TODO Auto-generated method stub
                // super.onPostExecute(result);asd
                Log.e("Im in onPostExecute", "");
                 if (progress_Dialog.isShowing()) {
                     progress_Dialog.dismiss();
                    }
                 ShopGridAdapter adapter = new ShopGridAdapter(ShopGridActivity.this, jewellist);
                 AllJewelgridView.setAdapter(adapter);
                    adapter.notifyDataSetChanged();

                //AllJewelgridView.setAdapter(new ShopGridAdapter(
                    //  ShopGridActivity.this, jewellist));

                if (AllJewelgridView.getCount() <= 0) {
                    MyAlertDialog.ShowAlertDialog(ShopGridActivity.this, "",
                            "No data found.", "OK");
                }
                progress_Dialog.dismiss();
            }

        }.execute();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:09:37.907

```
@Override
protected void onPreExecute() {
    progress_Dialog = new ProgressDialog(context);
    progress_Dialog.setMessage("Loading...");
    progress_Dialog.show();
} 
```

**编辑 ：**

```
@Override
protected void onPostExecute(Object result) {
    Log.e("Im in onPostExecute", "");     <------ ARE YOU ABLE SEE THIS IN logcat ?
    progress_Dialog();
} 
```

可能没有调用 onPostExecute()。所以要确认检查logcat

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:17:00.177

你需要在你的`AsyncTask`

```
 ProgressDialog progress=null;
progress=ProgressDialog.show(this,"title","loading..").show();//put this code in onPreExecute()
progress.dismiss();//put this code in onPostExecute() 
```

加载 ListView 时获取更多[ProgressBar（使用 AsyncTask）](https://stackoverflow.com/questions/12280336/progressbar-while-loading-listview-using-asynctask/12280526#12280526)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:21:42.937

您可以编写 onPostExecute 方法可能对您有所帮助。

```
 if ( progress_Dialog != null) {
             progress_Dialog.cancel();
        } 
```

# android - 如何在 Android 中将图像文件转换为 pdf 文件

> ID：12315037
> 
> 赞同：2
> 
> 时间：2012-09-07T09:07:09.577
> 
> 标签：android, image, pdf, itextpdf

我正在尝试在我的 Adroid 应用程序中将图像文件 (jpeg) 转换为 pdf 文件。我用过**itextpdf** jar 和**droidtext** jar。都不适合我。下面是使用**itextpdf**时的代码。

```
Document document = new Document();

String directoryPath = Environment.getExternalStorageDirectory().toString();

File newPdfFile = new File(directoryPath, "textview8.pdf");

FileOutputStream fileOutputStream = null;

try {
    fileOutputStream = new FileOutputStream(newPdfFile);
} catch (FileNotFoundException fnfe) {
    Log.w(TAG, "# Exception caz of fileOutputStream : " + fnfe);
}

BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(fileOutputStream);

try {
    PdfWriter.getInstance(document, bufferedOutputStream);
} catch (DocumentException de) {
    Log.w(TAG, "# Exception caz of PdfWriter.getInstance : " + de);
}

document.open(); 

Image image = null;

try {
    image = Image.getInstance(directoryPath + File.separator + "textview1.JPEG");
} catch (BadElementException bee) {
    Log.w(TAG, "# First exception caz of image : " + bee);
} catch (MalformedURLException mue) {
    Log.w(TAG, "# Second exception caz of image : " + mue);
} catch (IOException ioe) {
    Log.w(TAG, "# Third exception caz of image : " + ioe);
}

try {
    document.add(image);
} catch (DocumentException de) {
    Log.w(TAG, "# Exception caz of document.add : " + de);
}

try {
    bufferedOutputStream.flush();
    bufferedOutputStream.close();

    fileOutputStream.flush();
    fileOutputStream.close();

} catch (IOException ioe) {
    Log.w(TAG, "# Exception caz of bufferedOutputStream.flush : " + ioe);
}

document.close(); 
```

`NullPointerException`由于代码行，这给了我一个错误`document.close();`

当我评论该行并运行程序时，它给了我以下错误。

```
Could not find class 'com.itextpdf.awt.PdfPrinterGraphics2D', referenced from method com.itextpdf.text.pdf.PdfContentByte.createPrinterGraphicsShapes 
```

但是他们告诉找不到的类已经在 jar 文件中，这意味着**com.itextpdf.awt.PdfPrinterGraphics2D**存在于项目中。

我也将*itextpdf-5.1.3.jar*添加到构建路径中。我用模拟器和真实设备试过这个。

无法弄清楚我做错了什么。请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:12:27.117

只需这样做，它就可以正常工作

```
Document document=new Document();
String dirpath=android.os.Environment.getExternalStorageDirectory().toString();
PdfWriter.getInstance(document,new FileOutputStream(dirpath+"/imagedemo.pdf"));
document.open();
Image im=Image.getInstance(dirpath+"/"+"logo.png");  // Replace logo.png with your image name with extension 
document.add(im);
document.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:44:18.093

我看到的所有示例都直接使用 FileOutputStream，您是否尝试过不使用缓冲区？

```
PdfWriter.getInstance(document, fileOutputStream); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T03:26:48.407

找到了解决这个问题的方法。我必须对我的代码进行两次更改。

1.  在我的实现`DocListener`接口`Activity`
2.  关闭文档后关闭流

下面是第二点的变化

```
try {
    bufferedOutputStream.flush();

    fileOutputStream.flush();

    } catch (IOException ioe) {
        Log.w(TAG, "# Exception caz of flush : " + ioe);
    }

    document.close();

try {
    bufferedOutputStream.close();

    fileOutputStream.close();

    } catch (IOException ioe) {
        Log.w(TAG, "# Exception caz of close : " + ioe);
} 
```

我仍然无法想到与日志中给出的错误和工作代码的关系：-/

# django - 自动将应用程序/模型添加到 Django 管理员

> ID：12315038
> 
> 赞同：2
> 
> 时间：2012-09-07T09:07:15.570
> 
> 标签：django, django-admin

我正在创建一个用于在管理界面中创建/编辑模型的 GUI，请参阅[Github 项目](https://github.com/timothyclemans/django-admin-models-editor)。当一个人创建一个新应用程序时，我希望该应用程序自动添加到管理界面和该应用程序中的任何模型。我如何自动做到这一点？

![嵌入式模型创建者/编辑器](../Images/9821bfa16f44bd26ac5c931fcf7ee9f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:20:16.603

你可以做一个源代码编辑器，可能基于[django-alto](https://github.com/jkocherhans/alto)已经有版本用于查看代码，或者做一个[动态加载](https://code.djangoproject.com/wiki/DynamicModels)的 ModelModel在这种情况下你可能想要基于[django-not-eav](http://django-not-eav.readthedocs.org/en/latest/index.html)。

django-not-eav 方法的优点是它应该比普通网站管理员/网站管理员的源代码编辑更容易使用。

无论哪种方式，这将是相当多的工作:)

# c# - C# Selenium 网络驱动程序。每次点击后快速查看页面

> ID：12315041
> 
> 赞同：1
> 
> 时间：2012-09-07T09:07:19.100
> 
> 标签：c#, selenium-webdriver

我有一个大网站要测试。每次点击后，它可能是页面上的错误，例如警告、致命错误等。因此，每次点击后，我必须检查该错误页面的内部文本（或内部 HTML）。

现在我用一个大的正则表达式来做：`((?<error>(Warning|Fatal error|Parse error)\:.+?\s+on\s+line\s+\d+)|(?<nac>is not a component)|(?<dberror>(mssql|mysql|oracle)\s+query\s+error:)|(?<404>404 not found)|(?<cannotfind>can not find.*template with page)|(?<exception>exception)|(?<serverError>server error)|(?<isnotinstalled>is not installed))`

我的意思是我检查这个正则表达式的每一页的内部文本。它工作但很慢。还有其他更快的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:10:09.053

Driver.PageSource.Contains('任意字')

这是一个不自信的快速方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:13:24.647

将警告消息放在命名的`SPAN`or`DIV`中，使用`FindElement(By.Name("name"))`并检查其内部文本或 HTML。

# c - TCL-C API：Tcl_LinkVar 函数使用

> ID：12315049
> 
> 赞同：1
> 
> 时间：2012-09-07T09:07:51.840
> 
> 标签：c, tcl

我正在尝试将 Tcl 变量链接到 C 变量，以便在 C 线程创建期间将指针传递给最新的并具有 TCL-C 线程共享变量（我认为我不能使用本机 TCL 线程共享变量函数） . 我很难将这两个变量联系起来。这是我的做法：

```
#Tcl code, calling the C function:
set linkedVar 98
puts "linkedVar: $linkedVar"
load [file join [pwd] libCextension[info sharedlibextension]]
set threadId [createThreadC]
puts "Created thread n° $threadId"
puts "linkedVar: $linkedVar" 
```

该`createThreadC`函数创建一个 C 线程，返回其 ID 并尝试使用`linkedVar`.

```
// C function called by Tcl
static int
createThreadC_Cmd(
    ClientData cdata,
    Tcl_Interp *interp,
    int objc,
    Tcl_Obj *const objv[])
{
    int linkedVar=2;
    Tcl_LinkVar(interp, "linkedVar", (char *) &linkedVar, TCL_LINK_INT);
    linkedVar=1;
    ...
    # Thread creation, return Tcl object with thread ID
    ...
    return TCL_OK;  
} 
```

这是输出：

```
linkedVar: 98
Created thread n° -1227199680
linkedVar: 35 
```

值改变了，正如 C 程序所必须的`linkedVar`那样，但它存储了错误的变量，应该是 1 而不是 35。是`(char *) &linkedVar`错误的转换吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:50:47.747

您`Tcl_LinkVar` *几乎*正确地使用了；您的原始代码类型正确。但这不是错的！

问题是您在 Tcl 解释器（具有相当长的生命周期）和 C 堆栈上具有较短生命周期的变量之间进行链接。之后`createThreadC_Cmd`，链接指向未使用的堆栈，并且通常在之后立即用于其他内容。这是形式上未定义的行为，而且*非常糟糕*。您需要做的是确保 C 变量的生命周期至少与解释器的生命周期一样长。

最简单的解决方法是使用全局（或`static`局部）变量。唯一的缺点是相同的变量将在所有对`createThreadC_Cmd`;的调用之间共享。有时这根本不是问题，但我怀疑你的情况并非如此。因此，您需要在其他地方分配一些空间。如果您不希望您创建的口译员消失，那么最便宜的方法就是使用`malloc`获得一点空间，然后将链接指向该空间；然后你可以泄漏内存并停止担心它（它不干净，但很容易做到）。如果你想清理，你几乎做同样的事情，但注册一个适当的关闭挂钩作为`free`内存；根据实际消失的情况，Tcl 有三种关闭钩子：

1.  *解释器*关闭钩子是用`Tcl_CallWhenDeleted`
2.  *线程*关闭钩子是用`Tcl_CreateThreadExitHandler`
3.  *进程/库*关闭挂钩是使用创建的`Tcl_CreateExitHandler`（除非您需要超级干净，否则您不需要它来删除内存；警告，在调用这些挂钩时很难立即删除内存）。

我不太确定哪个适合您；这取决于您共享变量的范围。（我希望您不打算跨线程共享它；按照设计，这不会很好地工作。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:55:23.120

我打算和Donal说同样的话，但也写了一个演示。所以在这里 - 基本上你的链接变量生命周期应该与解释器生命周期相匹配。

```
#include <tcl.h>

typedef struct Shared {
    Tcl_Interp *interp;
    int id;
} Shared;

static int
UpdateCmd(ClientData clientData, Tcl_Interp *interp, int objc, Tcl_Obj *const objv[])
{
    Shared *sharedPtr = (Shared *)clientData;
    if (objc != 1) {
        Tcl_WrongNumArgs(interp, 1, objv, "");
        return TCL_ERROR;
    }
    ++sharedPtr->id;
    return TCL_OK;
}
static void
DeleteProc(ClientData clientData)
{
    Shared *sharedPtr = (Shared *)clientData;
    Tcl_UnlinkVar(sharedPtr->interp, "shared_id");
    Tcl_Release(sharedPtr->interp);
    Tcl_Free(clientData);
}

int DLLEXPORT
Testlink_Init(Tcl_Interp *interp)
{
    Shared *sharedPtr;
    if (Tcl_InitStubs(interp, "8.4", 0) == NULL) {
        return TCL_ERROR;
    }
    sharedPtr = (Shared *)Tcl_Alloc(sizeof(Shared));
    sharedPtr->interp = interp;
    sharedPtr->id = 0;
    Tcl_Preserve(sharedPtr->interp);
    Tcl_LinkVar(interp, "shared_id", (char *)&sharedPtr->id, TCL_LINK_INT);
    Tcl_CreateObjCommand(interp, "update_shared", UpdateCmd, sharedPtr, DeleteProc);
    Tcl_PkgProvide(interp, "testlink", "1.0");
    return TCL_OK;
} 
```

用法（也使用 msvc 6 构建）：

```
C:\src>cl -nologo -Od -MD -I\opt\tcl\include -DUSE_TCL_STUBS -c tcl_link.c
tcl_link.c

C:\src>link -dll -debug -out:tcl_link.dll tcl_link.obj \opt\tcl\lib\tclstub85.lib
Microsoft (R) Incremental Linker Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998\. All rights reserved.

C:\src>tclsh
% load tcl_link.dll testlink
% set shared_id
0
% update_shared
% set shared_id
1 
```

这显示了一种通过利用命令清理功能进行清理的方法。

如果您使用多个线程并且周围还有 Tcl 解释器，则必须非常小心。Tcl interp 与创建它的线程相关联。因此，如果您希望共享结构在 C 线程之间传递，您应该松开 interp 成员。在那种情况下，我会让应用程序处理这个结构生命周期。如果您的 Shared 结构的生命周期比任何解释器的生命周期都长，该解释器的命令是 clientData，那么一切都会好起来的，您不需要在解释器中进行清理。

# javascript - 类似于 Prism for Knockout js 的框架

> ID：12315054
> 
> 赞同：8
> 
> 时间：2012-09-07T09:08:07.857
> 
> 标签：javascript, knockout.js, prism, durandal

微软为 Silverlight 和 WPF 制作了 Prism 框架。它的 RegionManager 和其他东西看起来很棒。

Knockout 有没有类似的框架？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T17:39:08.383

[Caliburn.Micro](http://caliburnmicro.codeplex.com/) （IMO 可用于 XAML 应用程序的最佳 MVVM 框架）的开发人员 Rob Eisenberg正在开发使用 Knockout 的 Durandal。

源代码的早期版本在[这里](https://github.com/EisenbergEffect/Durandal)，您可以在这里阅读一些关于设计概念的[信息](http://devlicio.us/blogs/rob_eisenberg/archive/2012/08/02/today-all-your-wildest-dreams-come-true.aspx)。

# javascript - UIWebview 不会通过基本身份验证加载动态加载的资源（通过 jQuery 移动）

> ID：12315057
> 
> 赞同：7
> 
> 时间：2012-09-07T09:08:09.120
> 
> 标签：javascript, jquery, ios, xcode, basic-authentication

有点令人困惑，不确定解决方案（或问题）的来源。

我正在使用 UIWebviews 和 Jquery Mobile 创建一个 iPad 应用程序。我必须通过基本身份验证访问我的网络资源。我已将 UIWebview 设置为通过 HTTP 请求正确发送我的登录凭据，并且所有资源和页面所需的资源（CSS、Javascript 等）都正确加载....

...除了那些通过 Javascript 动态加载的资源。

我正在使用 Modernizr 加载 CSS 文件，使用 JQuery 加载 .JSON 文件，通过 webView 访问我的页面时，这些文件都没有加载。（当我通过 Safari 直接访问该页面时，它工作正常）。

我猜这是一个 Xcode / iOS 问题，但我不知道从哪里开始。

任何帮助/指针都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T00:39:20.413

答案可以在这里找到：[如何正确地在 UIWebView 中进行身份验证？](https://stackoverflow.com/questions/8999776/how-to-do-authentication-in-uiwebview-properly)

报价解决方案：

```
 NSString* login = @"MYDOMAIN\\myname";
    NSURLCredential *credential = [NSURLCredential credentialWithUser:login
                                                             password:@"mypassword"
                                                          persistence:NSURLCredentialPersistenceForSession];

    NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc]
                                             initWithHost:@"myhost"
                                             port:80
                                             protocol:@"http"
                                             realm:@"myhost" // check your web site settigns or log messages of didReceiveAuthenticationChallenge
                                             authenticationMethod:NSURLAuthenticationMethodDefault];

    [[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential forProtectionSpace:protectionSpace];
    [protectionSpace release]; 
```

# django - 如何在 Django 中启用 SSL 电子邮件？

> ID：12315058
> 
> 赞同：2
> 
> 时间：2012-09-07T09:08:08.857
> 
> 标签：django, email

我在settings.py中有：

```
EMAIL_HOST = 'mail.myserver.pl'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'mymail@mail.myserver.pl'
EMAIL_HOST_PASSWORD = 'mypassword'
EMAIL_USE_TLS = False 
```

但是我的服务器需要 SSL，我得到 AuthenticationError 异常。如何在 Django 中启用 SSL 支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-29T01:32:08.820

试试这个：EMAIL_USE_SSL = True

# image - 在 JFreeChart 的条形图上的 X 轴标签旁边添加一个图像

> ID：12315061
> 
> 赞同：3
> 
> 时间：2012-09-07T09:08:24.243
> 
> 标签：image, jfreechart, bar-chart

我需要使用 JFreeChart 库创建的条形图。

我用一个例子来说明这一点。假设：我在 X 轴（学生）上绘制了“John”、“Mark”、“Louis”和“Keith”，在 Y 轴上绘制了它们各自的标记。我为每个学生使用三个不同的栏来显示他们各自的英语、科学和数学成绩。

可以说，科学最重要，因此科学成绩最高的学生将获得“金牌”。“数学”最高的学生可以获得“银”，英语最高的学生可以获得“铜”

我想在每个科目中得分最高的学生的标签旁边放一个小图像（金、银或铜）。一个特定的学生（显然）可以获得所有奖牌。可以这样做（或类似的事情）。

我为此使用 JFreeChart 的 ChartFactory.createBarChart(...) api。我能够正确绘制图表，但坚持上述要求。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:05:21.013

您可能会查看其中一个，[`org.jfree.chart.annotations`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/package-summary.html)例如或。`XYDataImageAnnotation``XYDrawableAnnotation``XYImageAnnotation`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T14:04:13.733

这个问题问了很久

这就是我为实现它所做的。

```
Drawn a image at  : (x,y) at each Category Entity.
Size of image     :  (width ,height) of CategoryLabel entity. 
```

您可以将图像相应地放置在类别标签周围。

## **预习**

![在此处输入图像描述](../Images/86f5551c85ec584f2b92c21e6543cff8.png)

希望能帮助到你。
干杯:)

# iphone - 为什么在对象不是 nil 的情况下我会获得 exc bad access？

> ID：12315062
> 
> 赞同：1
> 
> 时间：2012-09-07T09:08:24.940
> 
> 标签：iphone, objective-c, crash, exc-bad-access

我有一个接收远程通知的应用程序。推送后显示的我的视图控制器有一个表格视图。应用程序在行设置框架处非常随机地崩溃（20 次尝试中的 1 次）：

```
if (!myTableView) {
        NSLog(@"self.myTableView is nil");
    }
    myTableView.frame=CGRectMake(0, 70, 320, 376); 
```

这只发生在我打开应用程序，然后打开其他一些应用程序，然后收到推送通知时。我想这与记忆有关。我使用ARC（ios 5）。奇怪的是nslog没有显示，所以tableview不是nil。

崩溃日志：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x522d580c
Crashed Thread:  0

 Thread 0 name:  Dispatch queue: com.apple.main-thread
 Thread 0 Crashed:
 0   libobjc.A.dylib                0x352b1f7e objc_msgSend + 22
 1   Foundation                     0x37dc174c NSKVOPendingNotificationCreate + 216
 2   Foundation                     0x37dc1652 NSKeyValuePushPendingNotificationPerThread + 62
 3   Foundation                     0x37db3744 NSKeyValueWillChange + 408
 4   Foundation                     0x37d8a848 -[NSObject(NSKeyValueObserverNotification) willChangeValueForKey:] + 176
 5   Foundation                     0x37e0ca14 _NSSetPointValueAndNotify + 76
 6   UIKit                          0x312af25a -[UIScrollView(Static) _adjustContentOffsetIfNecessary] + 1890
 7   UIKit                          0x312cca54 -[UIScrollView setFrame:] + 548
 8   UIKit                          0x312cc802 -[UITableView setFrame:] + 182
 9   POViO                          0x000913cc -[FeedVC viewWillAppear:] (FeedVC.m:303) 
```

Dealloc 没有被调用，因为它没有被记录：

```
- (void)dealloc {

NSLog(@"dealloc");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:41:22.590

你有记忆问题。您的 tableView 的保留计数为零；因此，尽管指向 tableView 的指针仍然存在，但系统已将对象丢弃在该实际地址，因此是 EXC_BAD_ACCESS。

显示 tableView 的 UI 可能被隐藏并因此被卸载，但是你留下了一些逻辑，假设 table view 在它不存在时仍然存在。

如果不了解更多项目，很难调试正在发生的事情。最好的办法是仔细查看应用程序和 UI 流程的设计。什么会导致 UI 被释放？您如何输入假设 UI 的一部分仍然存在的代码？

注意 向 nil 引用发送消息*不会*产生任何错误；这是语言设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:08:51.113

我在这里找到了解决方案： [Using ARC and UITableViewController is throwing Observation info was leaked, and may become wrongly attach to some other object](https://stackoverflow.com/questions/10757400/using-arc-and-uitableviewcontroller-is-throwing-observation-info-was-leaked-and)

似乎拉刷新（子视图到表视图）导致问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T09:36:57.277

不要直接改变框架，做这样的事情。

```
CGRect frame = self. myTableView.frame;
frame.x =something;
frame.y=something;
myTableView.frame=frame; 
```

让我知道。

# php - 使用 Symfony2 Security 以另一个用户的身份管理员登录

> ID：12315064
> 
> 赞同：1
> 
> 时间：2012-09-07T09:08:28.513
> 
> 标签：php, symfony

我有一个系统，有 2 个角色（管理员和用户）。使用 Security Symfony2 组件进行的身份验证。管理员不知道用户密码。但他应该能够以用户身份登录系统。我有一个包含所有用户的网格，并且想要添加“以该用户身份登录”之类的按钮。我怎样才能做到？

我试过了，但没有 prfit：

```
$userRepo = $this->getDoctrine()->getRepository('FrameFoxBackEndBundle:User');
$this->get('security.context')->getToken()->setUser($userRepo->find(1)); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T13:51:46.053

为什么不使用内置[切换用户](http://symfony.com/doc/current/cookbook/security/impersonating_user.html)选项？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T09:24:18.643

我使用这段代码：

```
// use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken
$entity = $userRepo->find(1);

// Authentication
// create the authentication token
$token = new UsernamePasswordToken(
    $entity,
    null,
    'user_db',
    $entity->getRoles());
// give it to the security context
$this->container->get('security.context')->setToken($token); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T19:55:36.173

我会以这种方式使用 Symfony 核心支持。看看： [http](http://symfony.com/doc/current/cookbook/security/impersonating_user.html) ://symfony.com/doc/current/cookbook/security/impersonating_user.html 。

您定义一个允许切换用户的角色，以及允许您切换用户的 url 中的参数。

# php - Yii - 使用关系中定义的范围

> ID：12315079
> 
> 赞同：4
> 
> 时间：2012-09-07T09:09:23.133
> 
> 标签：php, yii

我有一个模型，其中一些关系定义如下。

```
public function relations()
{
    return array(
        'linkingTable' => array(self::HAS_MANY, 'LinkingTable', array('this_id'=>'id'), 'scopes'=>array('valid')),
        'linkedItems' => array(self::HAS_MANY, 'LinkedItem', array('linked_item_id'=>'id'), 'through'=>'linkingTable', 'scopes'=>array('valid')),
    );
} 
```

链接表和链接项都具有有效范围：

```
public function scopes() {
    return array(
        'valid'=>array(
            'condition'=>"t.`valid`=1",
        ),
    );
} 
```

为了使生成的连接查询与关系范围一起使用，我必须修改范围如下：

```
public function scopes() {
    return array(
        'valid'=>array(
            'condition'=>"`linkingTable`.`valid`=1",
        ),
    );
} 
```

和：

```
public function scopes() {
    return array(
        'valid'=>array(
            'condition'=>"`linkedItems`.`valid`=1",
        ),
    );
} 
```

问题是这些范围在直接从链接模型中使用时将不起作用，即：

```
$linkedItems = LinkedItem::model()->valid()->findAll(); 
```

导致错误说这`linkedItems`不是定义的别名。当然，这是可以理解的。它还导致需要任何其他想要拥有一些需要以完全相同的方式定义关系的 LinkedItem 的模型。

是为每个用例定义不同范围的唯一解决方案，如下所示：

```
public function scopes() {
    return array(
        'valid'=>array(
            'condition'=>"t.`valid`=1",
        ),
        'validForModelRelation'=>array(
            'condition'=>"`linkedItems`.`valid`=1",
        )
    );
} 
```

这感觉有点笨拙。我想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T09:15:58.027

您需要能够获取表的当前别名。`t`当它单独时，或者当它是相关模型时的关系名称。在相关模型的范围内，您可以使用：

```
public function scopes() {
    return array(
        'valid'=>array(
            'condition'=>$this->tableAlias.".`valid`=1",
        ),
    );
} 
```

但是，如果你使用它`defaultScope`，你需要使用它`$this->getTableAlias(false, false).`作为参数来防止无限循环，试图找到别名。

编辑：点丢失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T09:35:50.320

在 'condition'=>$this->tableAlias.". `valid`=1",

# git - sublime：将命令面板中的“git：add…”绑定到热键

> ID：12315081
> 
> 赞同：3
> 
> 时间：2012-09-07T09:09:30.203
> 
> 标签：git, sublimetext2, key-bindings, sublimetext, git-add

我想从 sublime 命令面板绑定动作“Git：添加...”（多个文件选择）。

`command: show_overlay {"overlay": "command_palette"} //shows command palette itself`

`command: git_add_choice //shows git:add… list`

像这样绑定这个命令 - 失败

`{ "keys": ["ctrl+shift+q"], "command": "git_add_choice"}`

`{ "keys": ["ctrl+shift+q"], "command": "show_overlay", "args": {"overlay": "git_add_choice"} }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:31:53.827

[Sublime Docs](http://docs.sublimetext.info/en/latest/reference/commands.html#id3)（参见 show_overlay 部分）似乎说“overlay”的允许值只有“goto”和“command_palette”。我查看了已安装包中定义的键绑定，这些是唯一使用的覆盖。

# mysql - 从 mySQL 中的结果汇总总计

> ID：12315084
> 
> 赞同：-2
> 
> 时间：2012-09-07T09:09:43.847
> 
> 标签：mysql, codeigniter

在 codeiginter 中 - 是否可以使用 Active 记录从 mySQL 中的结果汇总总数？

**我的桌子：**

```
+-----------------+---------------+----------+
|  transaction_ID |  category_ID  |  amount  |
+-----------------+---------------+----------+
|        1        |      2        |   5.0    |
+-----------------+---------------+----------+
|        2        |      1        |   6.0    |
+-----------------+---------------+----------+
|        3        |      2        |   4.1    |
+-----------------+---------------+----------+
|        4        |      3        |   1.2    |
+-----------------+---------------+----------+
|        5        |      1        |   7.0    |
+-----------------+---------------+----------+ 
```

**我想达到的目标：**

```
+---------------+----------------+
|  category_ID  |  total_amount  |
+---------------+----------------+
|       1       |      13.0      |
+---------------+----------------+
|       2       |      9.1       |
+---------------+----------------+
|       3       |      1.2       |
+---------------+----------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:11:12.860

试试这个，

```
SELECT category_ID, SUM(amount) totalAmount
FROM tableName
GROUP BY categoryID 
```

# sql - 使用 toad 执行 SQL 函数

> ID：12315085
> 
> 赞同：0
> 
> 时间：2012-09-07T09:09:47.717
> 
> 标签：sql, oracle, function, toad

我对 DB 很陌生。我是 Java 开发人员，与 SQL 函数无关。但是现在我处于需要检查 sql 函数是否在 db 上正确执行的情况

```
CREATE OR REPLACE FUNCTION RATELIMIT_OWN.Get_Logs ( p_yyyymm VARCHAR2, p_numec NUMBER )
RETURN LOG_RECORD_TABLE PIPELINED IS

TYPE        ref0 IS REF CURSOR;
cur0        ref0;

out_rec     LOG_RECORD := log_record(NULL,NULL,NULL);

BEGIN

OPEN cur0 FOR
  'SELECT eventid, errormsg, create_date from logs partition (LOGS_P' || p_yyyymm || ') where numec=:1'
USING p_numec;

  LOOP
   FETCH cur0 INTO out_rec.eventid, out_rec.msg, out_rec.create_date;
   EXIT WHEN cur0%NOTFOUND;
   PIPE ROW(out_rec);
  END LOOP;
  CLOSE cur0;

RETURN;
END Get_Logs;
/ 
```

如何在 toad 中执行这个 sql 函数。我想看到像正常选择查询输出一样的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:15:15.620

要检查表值函数，请尝试：

```
select * FROM table(RATELIMIT_OWN.Get_Logs('a', 1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:04:56.650

```
FOE EXECUTING THE FUNCTION    
SELECT RATELIMIT_OWN.Get_Logs(....,...) FROM DUAL ;

AND
ORA-00904:  MEAN COLUMN NAME IS NOT VALID PLSS CHECK THE COLUMN NAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:21:12.187

尝试：

```
 select  RATELIMIT_OWN.Get_Logs(...) from dual; 
```

# sql - 交换数据库、发布和开发？

> ID：12315090
> 
> 赞同：0
> 
> 时间：2012-09-07T09:10:08.177
> 
> 标签：sql, database, vb.net, visual-studio

当你有 2 个不同的数据库，一个用于开发，一个用于发布时，你通常会怎么做？数据库是相同的。我需要一种方法让一个数据库连接到发布版本，一个连接到开发/测试版本。必须有一个简单的方法来做到这一点，我只是不知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:38:19.767

有很多方法可以做到这一点，第一种是手动编辑您的应用程序或 Web 配置文件。

您还可以维护应用配置的多个副本。为 dev、qa 和生产设置单独的 app.config 值是非常典型的。然后，您可以使用构建后事件来重命名或以其他方式设置您想要的输出。

您还可以使用条件编译来检测您是在调试还是发布，并从不同的应用程序设置中提取连接字符串。

# objective-c - 在 xcode 中从 UIAccelerometer 计算 G 值

> ID：12315091
> 
> 赞同：1
> 
> 时间：2012-09-07T09:10:09.467
> 
> 标签：objective-c, ios, xcode, uiaccelerometer

我已经编写了这段代码来从 xcode 中的 UIAccelerometer 获取 G 值。你能告诉我它是否正确吗？

```
-(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{
    float gValue = sqrt(acceleration.x*acceleration.x+acceleration.y*acceleration.y+acceleration.z*acceleration.z);
    [gLabel setText:[NSString stringWithFormat:@"%.2f",gValue]];
} 
```

请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:49:02.713

If `G value` is supposed to be `Gravitational acceleration` then this code is incorrect.

Problems:

1.  It could work but only if the device is not moving and the only acceleration is created by the gravitational force of the Earth. In all other cases the equation is incorrect.

2.  UIAcceleration values are scaled by G. That means that when device is idle, the values will be, for example `(0, -1.0, 0)` and your result is `1.0`.

Also note that `UIAccelerometer` was deprecated and superseded by "Core Motion" framework.

EDIT: Use `[CMDeviceMotion gravity]`.

# web-services - 无法连接到远程服务器

> ID：12315096
> 
> 赞同：0
> 
> 时间：2012-09-07T09:10:30.433
> 
> 标签：web-services

使用外部用户服务时，出现以下错误。

> 无法连接到远程服务器

谁能解释出了什么问题？有关使用外部 Web 服务的详细解释会有所帮助。

这是我的一些代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Runtime.Serialization;
using System.Net;
using System.IO;

namespace sample_app
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            WebClient proxy = new WebClient();
            byte[] abc = proxy.DownloadData((new Uri("http://www.webservicex.net/WS/CATs.aspx?CATID=12&DESC=Utilities")));
            Stream strm = new MemoryStream(abc); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:38:04.633

尝试`byte[] abc = proxy.DownloadData("http://www.webservicex.net/WS/CATs.aspx?CATID=12&DESC=Utilities");`

`WebClient.DownloadData`方法应该将字符串作为参数，所以也许它只是没有很好地解释 Uri 类？

# ios - 如何配置我的应用程序以检测抖动运动事件？

> ID：12315100
> 
> 赞同：1
> 
> 时间：2012-09-07T09:11:04.473
> 
> 标签：ios, uinavigationcontroller, motion-detection

所以让我首先澄清一下我已经实现了哪些代码

```
-(BOOL)canBecomeFirstResponder 
{
    return YES;
}

- (void) viewWillAppear:(BOOL)animated 
{
    [super viewWillAppear:animated];
    [self becomeFirstResponder];
}

- (void) viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self becomeFirstResponder];
}

- (void)viewWillDisappear:(BOOL)animated 
{
    [self resignFirstResponder];
    [super viewWillDisappear:animated];
}

- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event
{
    if (motion == UIEventSubtypeMotionShake)
    {
        NSLog(@"FUUU");
    }
}

- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event
{
    if (motion == UIEventSubtypeMotionShake)
    {
        NSLog(@"FUUU");
    }
} 
```

这都在 UIViewController 类中

`- (void) applicationDidFinishLaunching:(UIApplication*)application`我已经设置了

```
[application setApplicationSupportsShakeToEdit:YES]; 
```

然而它什么也没做，没有检测到任何单一的运动。我不确定还能做什么。这似乎对许多其他人有效，所以我很困惑为什么我与众不同......可能是因为它是通过 UINavigationController 吗？或者因为我通过 plist 加载主应用程序而我的主应用程序看起来像这样

```
retVal = UIApplicationMain(argc, argv, nil, nil); 
```

我完全被难住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T22:49:00.287

为了检测摇动手势，您需要继承 UIView 并实现以下方法（不要在 UIViewController 上实现这些方法）：

*   (BOOL)可以成为第一响应者
*   (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event

然后将子类视图添加到 UIViewController 并通过调用 -becomeFirstResponder 使其成为第一响应者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:27:31.983

您不需要设置`[application setApplicationSupportsShakeToEdit:YES];`，因为这是默认值，iOS 仅将其用于 Shake to Undo/Redo。

如果您想在视图控制器中捕捉运动，您需要将此属性设置为 NO`[application setApplicationSupportsShakeToEdit:NO];`并自行处理。

如[事件处理编程指南](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html)中所述。

希望这可以帮助。

PS：以防万一，您在`viewDidAppear`方法中调用了错误的超级。这应该是：

```
- (void) viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self becomeFirstResponder];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:44:21.750

谢谢大家的回复，但我最终使用了不同的方法，我在应用程序委托中访问了加速度计，然后通过 nsnotification 中心向显示的当前 ui 导航控制器发送 nsnotifcation

```
- (void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration 
{
    [[NSNotificationCenter defaultCenter] postNotificationName:notificationName object:nil userInfo:nil];

} 
```

# jquery - AJAX调用数据库完成后如何调用JS函数

> ID：12315106
> 
> 赞同：0
> 
> 时间：2012-09-07T09:11:20.627
> 
> 标签：jquery, ajax, jquery-callback

我在使用 AJAX 调用时遇到问题。

```
var updateData = function(param, value)
{
    $.ajax({
    type: 'GET',
    url: ajax_router,
    data: 'param='+param+'&value='+value,
    success: reloadList()
    });
} 
```

不幸的是，reloadList() 函数调用得太快了。该页面不会重新加载新数据。当我按 F5 时，新数据就在这里，因此数据库更新工作，只需在正确的时间调用 reloadList() 函数即可。

我也尝试过 complete: reloadList() 但它也不起作用。

有任何想法吗 ？谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:11:53.217

从 中删除括号`reloadList()`。

您是立即调用函数，而不是在`success:`处理程序中传递函数本身。

# jquery - MVC如何从jquery调用get并获取要显示的视图

> ID：12315108
> 
> 赞同：0
> 
> 时间：2012-09-07T09:11:30.730
> 
> 标签：jquery, asp.net-mvc

我创建了一个基本的 MVC 应用程序。

对于主视图，我创建了一个 Create.cshtml 页面：

```
<h2>title Create</h2> 
```

在家庭控制器上，我添加了 get 方法：

```
public ActionResult Create(int id)
        {
            return View();
        } 
```

在我的 Index.cshtml 视图中，我有：

```
@{
    ViewBag.Title = "Home Page";
}
<h2>@ViewBag.Message</h2>
<p>
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">
        http://asp.net/mvc</a>.
</p>
<div class="clicky">click me</div>
<script type="text/javascript">
    $(function () {
        $(".clicky").click(function () {
            $.get('@Url.Action("Create")', { id: "1" }, function () {

            });
        });
    });
</script> 
```

想象一下当我运行它时我的惊讶，发现当点击我时，屏幕没有改变。

我在 Create 上放了一个断点，发现这个方法确实被输入了。萤火虫也没有任何错误迹象。

然后我将脚本更改如下：

```
<script type="text/javascript">
        $(function () {
            $(".clicky").click(function () {
                //$.get('@Url.Action("Create")', { id: "1" }, function () {

                //});

                window.location.href = '/Home/Create/1';
            });
        });
    </script> 
```

该应用程序现在按预期工作，返回 Create 视图。

有人可以向我解释为什么我以前的方法不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:20:36.183

您以前的方法向服务器发送异步请求。返回的数据（在这种情况下是您呈现的创建视图）被传递回您的 javascript 回调方法，该方法在您的示例中为空：

```
$.get('@Url.Action("Create")', { id: "1" }, function (data, textStatus, jqXHR) {

}); 
```

尝试将参数添加到回调函数并在函数处设置 javascript 断点。您将看到，html 是在 data 参数中传递的。您可以使用它在某些 div 或对话框中呈现它，如下所示：

```
function (data, textStatus, jqXHR) {
    // simply put it in a div
    $("#mydiv").html(data);
    // or open a jquery dialog
    $("#mydiv").html(data).dialog();
}); 
```

或者您可以使用其中一个`Ajax`助手，例如[`Ajax.ActionLink`](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.actionlink%28v=vs.108%29.aspx)

# c# - 对 Interlocked.Increment 和 Lock 的使用感到困惑

> ID：12315109
> 
> 赞同：3
> 
> 时间：2012-09-07T09:11:34.223
> 
> 标签：c#, interlocked-increment

我了解 和 的`Interlocked.Increment`功能`lock()`。但我对何时使用其中一种感到困惑。据我所知，`Interlocked.Increment`增量共享 int/long 值，而 as`lock()`旨在锁定代码区域。

例如，如果我想更新字符串值，可以使用`lock()`：

```
lock(_object)
{
    sharedString = "Hi";
} 
```

但是，这在课堂上是不可能的`Interlocked`。

*   为什么这不能通过 来完成`Interlocked`？
*   这些同步机制有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-14T22:10:39.113

`Interlocked.Increment`相关方法依靠硬件指令对单个32bit或64bit内存值进行同步修改，保证访问同一个值的多个线程不会读/写陈旧数据。这是必要的，因为在硬件级别，处理器具有内存值的本地/总线副本（出于性能考虑，通常称为总线内存或 cpu 缓存）。

`lock(){}`对一段代码执行同步，而不是单个整数值。而不是依靠硬件指令来同步对变量的访问，结果代码而是依靠操作系统同步原语（软件，而不是硬件）来保护内存和代码执行。

此外，lock() 的使用会发出内存屏障，确保从多个 CPU 访问相同的变量会产生同步（非陈旧）数据。这在其他语言/平台中并非如此，在这些语言/平台中，必须显式执行内存屏障和防护。

对整数值使用方法更有效，`Interlocked`因为硬件具有执行必要同步的本机支持。但是这种硬件支持只存在于 __int32 和 __int64 等本机积分，因为硬件没有更高级别的复杂类型的概念，因此不会从`Interlocked`类型中公开这种高级方法。因此，您不能使用`Interlocked`同步分配`System.String`或任何`System.Object`派生类型。

*（即使如果您使用较低级别的语言，可以使用相同的硬件指令来分配指向字符串值的指针，但事实是，在 .NET 中，字符串对象不表示为指针，因此它不是可以在任何“纯”.NET 语言中使用。我正在避免这样一个事实，即您可以使用不安全的方法来解析指针并在您真的想要的情况下对字符串值进行联锁分配，但我觉得这不是真的你在问什么，而且 Interlocked 不支持这一点，因为需要在引擎盖下进行 GC 固定，这可能会比使用更昂贵和更具侵入性`lock()`。）*

**因此，对于“引用类型”的同步修改/分配，您将需要使用同步原语（即 lock(){}、Monitor 等）。如果您只需要同步一个整数值（Int32、Int64），那么使用 Interlocked 方法会更有效。如果有多个整数值要同步，则使用 lock() 语句可能仍然有意义，例如增加一个整数同时减少第二个整数，其中两者都需要作为单个逻辑操作进行同步。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T09:13:32.163

`Interlocked.Increment`可以而且应该用于增加共享`int`变量。功能使用`Interlocked.Increment`与以下相同：

```
lock(_object)
{
   counter++;
} 
```

但`Interlocked.Increment`在性能方面要便宜得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:16:19.290

如果要交换引用值，并在原子操作中返回原始值，可以使用[`Interlocked.Exchange`](http://msdn.microsoft.com/en-us/library/bb337971.aspx). `Interlocked.Increment`完全按照它所说的那样做：它**增加**一个数字。

但是，简单地将引用值分配给变量，或者任何 32 位值类型在 .NET 中都是原子的。我能想到的唯一另一种情况（后者不成立）是，如果您创建一个打包结构并设置属性，这将强制编译器不在 4 字节边界对齐成员（但这不是您要做的事情真的经常）。

# sql-server-2008 - 如何停止动态 SQL 运行我的所有脚本

> ID：12315111
> 
> 赞同：0
> 
> 时间：2012-09-07T09:11:38.637
> 
> 标签：sql-server-2008, stored-procedures, dynamic-sql

我的 MS SQL 2008 R2 设置上有一个存储过程。该过程动态地创建一个表并向其添加索引。下面显示的是脚本的精简版，向您展示我在做什么。当我尝试将索引信息添加到“@SQL1”时，字符串长度变得太大，这就是为什么它被分成两个字符串（@SQL1 和@SQL2）。我遇到的问题是，当表不存在时一切都很好，但是当表确实存在时，脚本的索引部分仍在运行。这会失败，因为索引已经存在。记住我不能将所有脚本文本放入单个字符串中，解决此问题的最佳方法是什么？

```
ALTER PROCEDURE  [evt].[CreateReportingDestinationTable] 
(
    @Name nvarchar(50)
)
AS
    SET NOCOUNT ON;

    DECLARE @SQL1 nvarchar(max)
    DECLARE @SQL2 nvarchar(max)

    SET @SQL1 = "IF NOT EXISTS (SELECT * FROM sys.Tables WHERE name = '" + @Name + "' AND type in (N'U'))
        CREATE TABLE [logs].[" + @Name + "](
            [MessageId] [uniqueidentifier] NOT NULL,
            [TokenNumber] [nvarchar](50) NULL,
         CONSTRAINT [PK_" + @Name + "] PRIMARY KEY CLUSTERED 
        (
            [MessageId] ASC
        )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
        ) ON [PRIMARY]"

    SET @SQL2 = "CREATE NONCLUSTERED INDEX [IX_" + @Name + "_TokenNumber_EventTime] ON [logs].[" + @Name + "]
        (
            [TokenNumber] ASC
        ) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
        "

    EXEC(@SQL1 + @SQL2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:17:28.977

您是否可以不检查索引是否存在，就像使用[sys.indexes (Transact-SQL)对表一样](http://msdn.microsoft.com/en-us/library/ms173760.aspx)

就像是

```
SELECT *  
FROM sys.indexes  
WHERE name='YourIndexName' AND object_id = OBJECT_ID('YourTableName') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:57:35.463

将索引的创建包含在与表的创建相同的 IF 分支中：

```
ALTER PROCEDURE  [evt].[CreateReportingDestinationTable] 
(
    @Name nvarchar(50)
)
AS
    SET NOCOUNT ON;

    DECLARE @SQL1 nvarchar(max)
    DECLARE @SQL2 nvarchar(max)

    SET @SQL1 = "IF NOT EXISTS (SELECT * FROM sys.Tables WHERE name = '" + @Name + "' AND type in (N'U'))
    **BEGIN**
        CREATE TABLE [logs].[" + @Name + "](
            [MessageId] [uniqueidentifier] NOT NULL,
            [TokenNumber] [nvarchar](50) NULL,
         CONSTRAINT [PK_" + @Name + "] PRIMARY KEY CLUSTERED 
        (
            [MessageId] ASC
        )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
        ) ON [PRIMARY]"

    SET @SQL2 = "CREATE NONCLUSTERED INDEX [IX_" + @Name + "_TokenNumber_EventTime] ON [logs].[" + @Name + "]
        (
            [TokenNumber] ASC
        ) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
        "

    SET SQL3 = ...
    ...

    EXEC(@SQL1 + @SQL2 + SQL3 + ... + **' END'**) 
```

# php - 这种形式安全吗？

> ID：12315112
> 
> 赞同：2
> 
> 时间：2012-09-07T09:11:40.367
> 
> 标签：php, jquery, html, forms, security

我有这个表格，用户通过它向我发送电子邮件。我不知道它是否安全，或者是否只有在涉及 sql 时才会出现安全问题......

html:

```
<form id="form4" action="send_mic.php"  name="form4" method="post" >

           <textarea name="message4" cols="4" rows="4"  id="message4" ></textarea><br />

           <input type="text"  id="name4" name="name4" value="" /><br />

           <input type="text"  id="email4" name="email4" value=""  /><br />

          <input type="submit" value="" id="submit" />

</form> 
```

jQuery：

```
<script type="text/javascript">
$(document).ready(function () {
    $('#form4').ajaxForm({
        beforeSubmit: validate
    });

    function validate(formData, jqForm, options) {
        var name = $('input[name=name4]').fieldValue();
        var email = $('input[name=email4]').fieldValue();
        var message = $('textarea[name=message4]').fieldValue();

        if (!name[0]) {
            alert('Please enter a value for name');
            return false;
        }
        if (!email[0]) {
            alert('Please enter a value for email');
            return false;
        }
        if (!message[0]) {
            alert('Please enter a value for message');
            return false;
        }

        else {

        $("#content").fadeOut(1000, function () {
            $(this).html("<img src='images/postauto3.png'/>").fadeIn(2000);
        });

        var message = $('textarea[name=message4]').val('');
        var name = $('input[name=name4]').val('');
        var email = $('input[name=email4]').val('');

            } 
    }

});

    </script> 
```

php:

```
<?php
        if($_POST){
                $email = $_POST['email4'];
                $name = $_POST ['name4'];
                $message = $_POST ['message4'];
                // response hash
                $ajaxresponse = array('type'=>'', 'message4'=>'');

                try {
                        // do some sort of data validations, very simple example below
                        $all_fields = array('name4', 'email4', 'message4');

                        foreach($all_fields as $field){
                                if(empty($_POST[$field])){
                                        throw new Exception('Required field "'.ucfirst($field).'" missing input.');
                                }
                        }

                        // ok, if field validations are ok
                        // now Send Email, ect.

                        // let's assume everything is ok, setup successful response
                        $subject = "New Contact";
                        //get todays date
                        $todayis = date("l, F j, Y, g:i a") ;

                        $message = " $todayis \n
                        Attention: \n\n
                        Please see the message below: \n\n
                        Email Address: $email \n\n
                        Message: $message \n\n

                        ";

                        $from = "From: $email\r\n";

                        //put your email address here
                        mail("contact@....ro", $subject, $message, $from);

                        //prep json response
                        $ajaxresponse['type'] = 'success';
                        $ajaxresponse['message'] = 'Thank You! Will be in touch soon';  
                } catch(Exception $e){
                        $ajaxresponse['type'] = 'error';
                        $ajaxresponse['message'] = $e->getMessage();
                }
                // now we are ready to turn this hash into JSON
                print json_encode($ajaxresponse);
                exit;
        }
?> 
```

那么，使用表单发送邮件是否存在安全问题呢？这个可以吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T09:19:08.920

一般来说，经验法则应该是：**永远不要相信用户提供的数据。**不，您的代码不是防弹的。由于您不验证也不清理用户输入并且您`mail()`同时使用您很容易受到攻击。用户可以轻松地为您提供精心制作的`email4`归档价值。由于您直接使用表单数据，因此可以使用 email4 向您的外发邮件注入额外的邮件标题。如果这些标头将是`BCC:`或`CC:`什至`TO:`那时您将只是充当垃圾邮件中继。例如，如果我发布这个

```
some@address.com
CC: spamvictim1@foo.com, spamvictim2@foo.com, spamvictim3@foo.com,
X-Spam-Owned: Whoa 
```

因为您`email4`的标题将如下所示：

```
To: some@address.com
CC: spamvictim1@foo.com, spamvictim2@foo.com, spamvictim3@foo.com, 
X-Spam-Owned: Whoa 
```

要发布多行数据，您只需使用 CRLF 粘贴文本。

为了避免这样的安全漏洞，你应该考虑放弃`mail()`并使用更聪明的东西来处理这样的事情（这不是`mail()`坏事，但你需要知道你在做什么，因为它比高级功能还低）。我建议使用 PHPMailer 或类似的包。您应该始终验证用户提供的数据（特别是确保单行字段，如主题是真正的单行 - 剥离 CRLF 就足够了）。在您打开自动提交表单时添加验证码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T09:19:49.287

1.  您可以添加验证码以防止垃圾邮件。
2.  您可以使用以下方法防止电子邮件注入：

    filter_var($email, FILTER_VALIDATE_EMAIL)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T09:16:59.587

我认为这种形式是安全的，这意味着没有人可以通过这种形式真正地 h@ck 您的网站。
但是您需要添加一些东西以获得更好的结果： 1.您还应该检查 php 服务器端的 post 变量，这意味着您应该检查电子邮件/姓名/消息是否有效
2.您应该添加一些验证码以防止垃圾邮件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T09:19:58.600

您还可以使用

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
  /* special ajax here */
  die($content);
} 
```

这将确保 ajax 请求到达服务器。

请注意您在问题中的一个 jQuery 选择器中使用的 ID。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T09:20:20.717

即使您不使用数据库，电子邮件发送也可能存在安全问题。当然你不能被这个表单入侵，但是当用户在电子邮件字段中输入这样的内容时就会出现问题：

```
email-address1@example.com  // there is a new line here
CC:email-address2@example.com,email-addresses3@example.com,.............................email-addressesn@example.com 
```

因此，您可以做的最好的事情是清理邮件功能的所有输入字段，以防止此类垃圾邮件传递。正如@WebnetMobile.com 已经悲伤的那样，**永远不要相信用户输入**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T12:23:47.543

您应该在表单中添加验证码、客户端和服务器端验证

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T09:15:10.030

我没有在其中看到安全问题，因为您没有在服务器端修改任何内容。不过可能是垃圾邮件的问题。添加一些验证码。其余的看起来还可以。

# junit - Junit ：这是测试 JSP 和 Servlet 的最佳且简单的框架

> ID：12315113
> 
> 赞同：0
> 
> 时间：2012-09-07T09:11:46.110
> 
> 标签：junit

> 这将是测试 JSP 和 Servlet 的最佳和最简单的框架。我在HttpUnit和仙人掌之间有点困惑请帮助.......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:30:46.083

没有太多背景，很难知道您的要求。你想做什么？这是老式的 Java 还是一些分支（Groovy 等人）？

在最基本的情况下，您可以使用 Junit 和 EasyMock 测试您的 servlet（模拟 httpservletrequest/response 并验证交互）。

至于前端测试，我会调查 webdriver。这将允许您使用 HTMLUnit、Firefox、Chrome 等与页面进行交互。有一个很好的基于 Groovy 的 Webdriver 抽象，它采用 Geb (bookofgeb) 的形式，我也建议用于构建可维护的测试。

我会避免单元测试（以纯形式）“视图”。您的视图中不应该有任何形式的复杂代码，因此应该否定单元测试的需要。（并且单元测试视图是可维护性的 PITA。）

查看您的要求并告诉我们您的目标。

# r - qq绘制数据R的子集

> ID：12315118
> 
> 赞同：0
> 
> 时间：2012-09-07T09:11:57.060
> 
> 标签：r, plot, subset

我有看起来像这样的 R 数据。

```
Year    Total
2005    238.79
2005    165.46
2005    196.07
2005    135.28
2005    180.30
2005    237.95
2005    714.74
2005    828.19
2005    516.19
2005    279.76
2005    281.88
2005    338.68 
```

最左边的列年从 2005 年到 2009 年。我想只使用年列中有 2005 年的文件来做总计的 qqPlot。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:36:15.840

另一种选择是使用`subset()`，这似乎更自然：

```
tmp <- subset(dat, subset = Year == 2005, select = Total)
qqnorm(tmp)
qqline(tmp) 
```

请注意，`subset()`不建议在编程中使用它，因为在其他功能/环境中运行时，使其工作的糖会变得一团糟。像这样以交互方式使用它`subset()`是设计的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:19:04.623

首先，一些示例数据：

```
dat <- read.table(text="Year Total 
2005 238.79
2005 165.46 
2005 196.07 
2005 135.28 
2005 180.30 
2005 237.95 
2008 714.74 
2008 828.19 
2008 516.19 
2009 279.76 
2009 281.88 
2009 338.68", header = TRUE) 
```

如果你想要一个正常的 QQ 图：

```
qqnorm(dat[dat$Year == 2005, "Total"]) 
```

# javascript - 如何拆分由 JavaScript 中使用正则表达式的多个部分组成的字符串？

> ID：12315121
> 
> 赞同：3
> 
> 时间：2012-09-07T09:12:06.637
> 
> 标签：javascript, regex

我在 JavaScript 中遇到了正则表达式的问题。我有许多需要用逗号分隔的字符串。不幸的是，子字符串周围没有引号，这会使生活更轻松。

```
var str1 = "Three Blind Mice 13 Agents of Cheese Super 18"
var str2 = "An Old Woman Who Lived in a Shoe 7 Pixies None 12"
var str3 = "The Cow Jumped Over The Moon 21 Crazy Cow Tales Wonderful 9" 
```

它们的形式为 PHRASE1（带空格的混合型”）INTEGER1（1 位或两位）PHRASE2（带空格的混合型”）WORD1（单字混合型，无空格）INTEGER2（1 位或两位）

所以我应该得到：

```
result1 = "Three Blind Mice,13,Agents of Cheese,Super,18"
result2 = "An Old Woman Who Lived in a Shoe,7,Pixies,None,12"
result3 = "A Cow Jumped Over The Moon,21, Crazy Cow Tales,Wonderful,9" 
```

我查看了 txt2re.com，但无法完全得到我需要的东西，最终手动划界。但我确信这是可以做到的，尽管有人有更大的大脑。有很多正则表达式的例子，但我找不到任何处理短语的例子；所以我想知道是否有人可以帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:31:17.050

这是一个适用于您的示例字符串的正则表达式的尝试：

```
/^\b((?:[a-z]+ ?)+)\b (\d{1,2}) \b((?:[a-z]+ ?)+)\b (\b[a-z]+\b) (\d{1,2})$/i 
```

基本上，它由五个不同的部分组成，每个部分都旨在与您的描述相匹配：

1.  **\b((?:[az]+ ?)+)\b** =*匹配由 az 组成的单词，后跟空格可选。然后我们尽可能多地量化它（i-flag 使搜索不区分大小写）*
2.  **(\d{1,2})** =*匹配 1 个或两个数字。也可以写成[0-9]。*
3.  **\b((?:[az]+ ?)+)\b** =*与 nr 1 相同。*
4.  **(\b[az]+\b)** =*匹配由 az 组成的单个单词*
5.  **(\d{1,2})** =*与 nr 2 相同。*

注意事项：

1.  我已经锚定了匹配，以确保它只考虑使用`^`（主题开始）和`$`（主题结束）的完整字符串。
2.  在 regex delimiters 之后`/.../`，我添加了一个*标志*来改变 regex 引擎的行为方式。-`i`标志使匹配不区分大小写。
3.  需要注意的是，当前的正则表达式不会匹配像“it's”这样的收缩。您将需要修改正则表达式组 1 和 3 以适应此情况。
4.  这些组由一个空格分隔。如果这可能会有所不同，那么您需要修改组分隔符。

您可以按如下方式使用它：

```
var regex = /^\b((?:[a-z]+ ?)+)\b (\d{1,2}) \b((?:[a-z]+ ?)+)\b (\b[a-z]+\b) (\d{1,2})$/i;
var s = "The Cow Jumped Over The Moon 21 Crazy Cow Tales Wonderful 9";
s = s.replace(regex, '$1, $2, $3, $4, $5'); 
```

[JS-fiddle 演示在这里](http://jsfiddle.net/732z2/1/)

编辑：我已经更新了演示以创建一个名为`resultCollection`保存处理结果的变量。它是一个对象，由每个原始字符串作为键，处理后的结果字符串作为值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T09:17:01.770

尝试以下操作：

```
var s = "Three Blind Mice 13 Agents of Cheese Super 18";
s.replace(/([^\d]+) (\d{1,2}) ([^\d]+) ([A-Z][a-z]+) (\d{1,2})/, '$1, $2, $3, $4, $5')
// "Three Blind Mice, 13, Agents of Cheese, Super, 18" 
```

**[演示](http://jsfiddle.net/AbJQk/)**。

# android - 如何在Android中自动捕获图像

> ID：12315122
> 
> 赞同：4
> 
> 时间：2012-09-07T09:12:06.853
> 
> 标签：android

> **可能重复：**
> [使用前置摄像头拍摄图像而无需在 android 中打开摄像头应用程序](https://stackoverflow.com/questions/9682928/capture-image-with-front-camera-without-opening-the-camera-application-in-androi)

我的问题是我只能通过使用 Intent 启动相机并单击按钮来捕获图像来进行捕获。是否可以通过不单击按钮来自动执行此操作，或者我可以添加哪些代码来执行此操作？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T11:38:56.707

```
public class CameraView extends Activity implements SurfaceHolder.Callback, OnClickListener{
        private static final String TAG = "CameraTest";
        Camera mCamera;
        boolean mPreviewRunning = false;

        @SuppressWarnings("deprecation")
        public void onCreate(Bundle icicle){
            super.onCreate(icicle);
            Log.e(TAG, "onCreate");

            getWindow().setFormat(PixelFormat.TRANSLUCENT);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
            setContentView(R.layout.cameraview);
            ImageView img = (ImageView) findViewById(R.id.blankImage);

            if(CaptureCameraImage.isBlack)
                img.setBackgroundResource(android.R.color.black);
            else
                img.setBackgroundResource(android.R.color.white);

            mSurfaceView = (SurfaceView) findViewById(R.id.surface_camera);
            mSurfaceView.setOnClickListener(this);
            mSurfaceHolder = mSurfaceView.getHolder();
            mSurfaceHolder.addCallback(this);
            mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        }

        @Override
        protected void onRestoreInstanceState(Bundle savedInstanceState){
            super.onRestoreInstanceState(savedInstanceState);
        }

        Camera.PictureCallback mPictureCallback = new Camera.PictureCallback() {

            public void onPictureTaken(byte[] data, Camera camera) {
                // TODO Auto-generated method stub
                if (data != null){
                    //Intent mIntent = new Intent();
                    //mIntent.putExtra("image",imageData);

                    mCamera.stopPreview();
                    mPreviewRunning = false;
                    mCamera.release();

                     try{
                         BitmapFactory.Options opts = new BitmapFactory.Options();
                         Bitmap bitmap= BitmapFactory.decodeByteArray(data, 0, data.length,opts);
                         bitmap = Bitmap.createScaledBitmap(bitmap, 300, 300, false);
                         int width = bitmap.getWidth();
                         int height = bitmap.getHeight();
                         int newWidth = 300;
                         int newHeight = 300;

                         // calculate the scale - in this case = 0.4f
                         float scaleWidth = ((float) newWidth) / width;
                         float scaleHeight = ((float) newHeight) / height;

                         // createa matrix for the manipulation
                         Matrix matrix = new Matrix();
                         // resize the bit map
                         matrix.postScale(scaleWidth, scaleHeight);
                         // rotate the Bitmap
                         matrix.postRotate(-90);
                         Bitmap resizedBitmap = Bitmap.createBitmap(bitmap, 0, 0,
                                 width, height, matrix, true);
                         CaptureCameraImage.image.setImageBitmap(resizedBitmap);

                     }catch(Exception e){
                         e.printStackTrace();
                     }
                    //StoreByteImage(mContext, imageData, 50,"ImageName");
                    //setResult(FOTO_MODE, mIntent);
                    setResult(585);
                    finish();
                }       
            }
        };

        protected void onResume(){
            Log.e(TAG, "onResume");
            super.onResume();
        }

        protected void onSaveInstanceState(Bundle outState){
            super.onSaveInstanceState(outState);
        }

        protected void onStop(){
            Log.e(TAG, "onStop");
            super.onStop();
        }

        @TargetApi(9)
        public void surfaceCreated(SurfaceHolder holder){
            Log.e(TAG, "surfaceCreated");
            mCamera = Camera.open(CaptureCameraImage.cameraID);
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
            Log.e(TAG, "surfaceChanged");

            // XXX stopPreview() will crash if preview is not running
            if (mPreviewRunning){
                mCamera.stopPreview();
            }

            Camera.Parameters p = mCamera.getParameters();
            p.setPreviewSize(300, 300);

            if(CaptureCameraImage.cameraID == 0){
                String stringFlashMode = p.getFlashMode();
                if (stringFlashMode.equals("torch"))
                        p.setFlashMode("on"); // Light is set off, flash is set to normal 'on' mode
                else
                        p.setFlashMode("torch");
            }

            mCamera.setParameters(p);
            try{
                mCamera.setPreviewDisplay(holder);
            }catch (Exception e){
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            mCamera.startPreview();
            mPreviewRunning = true;
            mCamera.takePicture(null, mPictureCallback, mPictureCallback);
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            Log.e(TAG, "surfaceDestroyed");
            //mCamera.stopPreview();
            //mPreviewRunning = false;
            //mCamera.release();
        }

        private SurfaceView mSurfaceView;
        private SurfaceHolder mSurfaceHolder;

        public void onClick(View v) {
            // TODO Auto-generated method stub
            mCamera.takePicture(null, mPictureCallback, mPictureCallback);
        }

    } 
```

您需要调用此活动还检查下面的代码行 mCamera.takePicture(null, mPictureCallback, mPictureCallback); 它被调用了两次 1）如果您希望用户交互拍照，您需要提交第一次出现 2）如果您不希望用户交互（一开始就会拍照）您可以在以下位置找到整个项目

[https://github.com/sandipmjadhav/CaptureImage](https://github.com/sandipmjadhav/CaptureImage)

谢谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:58:55.570

是的，您无需按下拍摄按钮即可自动拍摄图像。您要捕获图像的 Activity 应该`extends Activity`和`implements PictureCallback, ShutterCallback`.

您必须使用以下方法

```
videoPreview.getCamera().takePicture(this, null, this); 
```

*videoPreview*是我创建的类的一个实例，它`extends SurfaceView`实现了`SurfaceHolder.Callback`

`Camera.open();`也在*VideoPriview*类中

# vtiger - Vtiger 网络表单问题

> ID：12315125
> 
> 赞同：0
> 
> 时间：2012-09-07T09:12:15.713
> 
> 标签：vtiger

我正在尝试将数据存储在 vtiger 潜在客户模块中。我可以通过 file_get_contents() 发送变量，但它不起作用。这是我的代码

```
$moduleName = $_POST['moduleName']; 
$company    = $_POST['company']; 
$firstname  = $_POST['firstname'];
$lastname   = $_POST['lastname']; 
$website    = $_POST['website']; 
$phone      = $_POST['phone']; 
$email      = $_POST['email']; 
$city       = $_POST['city']; 
$state      = $_POST['state'];
$code       = $_POST['code']; 

$post = http_build_query(array(

"firstname" => "$firstname",
"lastname" => "$lastname",
"website"=>"$website",
"phone"=>"$phone",
"email"=>"$email",
"city"=>"$city",
"state"=>"$state",
"code"=>"$code",
 "moduleName" => "$moduleName",
   "company " => "$company",

));

 $context = stream_context_create(array("http"=>array(
 "method" => "POST",
 "header" => "Content-Type: application/x-www-form-urlencoded\r\n" .
             "Content-Length: ". strlen($post) . "\r\n",  
 "content" => $post,
))); 

$page = file_get_contents("http://vtiger.com/modules/Webforms/post.php", false, $context); 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:50:33.177

正确使用网络表单，在 vtiger 5.4 中，您可以使用其界面轻松创建网络表单。oru 用户 vtiger 网络服务来创建、编辑、删除数据

# opengl - 为什么 glOrtho() 在 Mac 下可以工作，但 gluOrtho2D() 不能？

> ID：12315126
> 
> 赞同：3
> 
> 时间：2012-09-07T09:12:15.157
> 
> 标签：opengl, glu

几天前，我发布了这个问题（我不知道打开一个新线程是否合适......但是当我从这篇文章中得到答案时，我将关闭那个问题）：[QGLWidget 在 Mac OS X Lion 下无法正常工作](https://stackoverflow.com/questions/12209727/qglwidget-not-working-correctly-under-mac-os-x-lion)。

我在网上抓取了一些示例代码，将它们与我的进行了比较，并确认问题是由以下原因引起的：

```
gluOrtho2D(0, w, 0, h); 
```

并将其更改为：

```
glOrtho(0, w, 0, h, -1, 1); 
```

并删除 glu 作为依赖项，我的程序有效。为什么？有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T09:35:29.700

好的，我想我得到了答案。

问题是我正在链接两个版本的 OpenGL；Apple 有自己的 GL 实现，AGL，Qt 将链接到它；但我不知道，所以我也将安装在 /opt/local 下的 glu 链接到该程序。我**猜**这个版本是由 Mac Ports 引入来编译 X11 程序的。

无论如何，因为我删除了 GLU 的依赖，唯一的链接实现是 AGL；所以它按预期工作。

# c++ - 试图将字符串反转到位

> ID：12315135
> 
> 赞同：1
> 
> 时间：2012-09-07T09:12:52.500
> 
> 标签：c++, string, reverse

我试图在 C++ 中反转一个空终止的字符串。我写了下面的代码：

```
//Implement a function to reverse a null terminated string

#include<iostream>
#include<cstdlib>

using namespace std;
void reverseString(char *str)
{
    int length=0;
    char *end = str;
    while(*end != '\0')
    {
        length++;
        end++;
    }
    cout<<"length : "<<length<<endl;
    end--;

    while(str < end)
    {

        char temp = *str;
        *str++ = *end;
        *end-- = temp; 

    }

}
int main(void)
{
    char *str = "hello world";
    reverseString(str);
    cout<<"Reversed string : "<<str<<endl;
} 
```

但是，当我运行这个 C++ 程序时，我在语句的 while 循环内遇到写访问冲突：`*str = *end ;`

尽管这相当简单，但我似乎无法弄清楚我收到此错误的确切原因。

你能帮我找出错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:13:54.387

```
char *str = "hello world"; 
```

是指向字符串文字的指针，不能修改。字符串文字驻留在只读内存中，尝试修改它们会导致*未定义的行为*。在你的情况下，崩溃。

由于这显然是一项作业，因此我不建议使用`std::string`它，因为学习这些东西很好。采用：

```
char str[] = "hello world"; 
```

and it should work. In this case, `str` would be an automatic-storage (stack) variable.

# silverlight - Silverlight WCF RIA 服务动态更改连接字符串

> ID：12315136
> 
> 赞同：0
> 
> 时间：2012-09-07T09:12:52.790
> 
> 标签：silverlight, entity-framework-4.1, connection-string, wcf-ria-services

我们有一个 Silverlight 应用程序，它使用 WCF RIA 服务和实体框架 4.1 连接到数据库。

目前，作为 web.config 中的标准，提供了连接字符串，这一切都成功了。

但是，我现在希望能够在运行时根据用户登录动态更改连接字符串。

我发现了一些其他[帖子](https://stackoverflow.com/questions/4350434/silverlight-entity-framework-dynamic-connection-string)暗示这样做，但他们使用 ObjectContext 而我们在 System.Data.Entity 命名空间和 DbDomainService 类中使用 DbContext。

为了弥补这一点，我在我的 DbDomainService 实现中重写了 CreateDbContext() 方法，如下所示：

```
protected override CoreContext CreateDbContext()
{
    dbServer = null, dbName = null;

    httpCookie = System.Web.HttpContext.Current.Request.Cookies["DBServer"];
    if (httpCookie != null)
    {
        dbServer = httpCookie.Value;
    }

    var cookie = System.Web.HttpContext.Current.Request.Cookies["DBName"];
    if (cookie != null)
    {
        dbName = cookie.Value;
    }

    if (dbServer == null && dbName == null)
    {
        return new CoreContext();
    }

    string connStr = "Data Source=" + dbServer + ";Initial Catalog=" + dbName + ";Integrated Security=true";
    return new CoreContext(connStr);
} 
```

这在第一次加载 Silverlight 应用程序时成功运行，但是，在所有后续加载中，尽管更改了替换到连接字符串中的值，但仍使用最初建立的相同连接。

改变连接的唯一方法似乎是在 IIS 中回收应用程序池并再次加载应用程序。

难道我做错了什么？还是不能让 DbDomainService 动态更改它的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T07:37:56.317

我正在考虑您的域服务类的实例化模型。您是否尝试过自定义[IDomainServiceFctory](http://msdn.microsoft.com/en-us/library/system.servicemodel.domainservices.server.idomainservicefactory%28v=vs.91%29.aspx)？它允许您决定何时创建它们的新实例，并且实现起来非常简单。
另请查看 Fredrik Normén 的[这篇文章](http://weblogs.asp.net/fredriknormen/archive/2009/11/28/wcf-ria-services-unity-domainservicefactory.aspx)。

# symfony - 如何使用 Crawler 加载 XML 文件？

> ID：12315143
> 
> 赞同：3
> 
> 时间：2012-09-07T09:13:29.387
> 
> 标签：symfony, web-crawler, symfony-2.1

我需要加载 xml 文件并将它们存储到数据库中。我使用 Symfony 2.1 作为框架，这个框架带有一个很棒的工具——爬虫。它使使用 XPATH 变得容易。

如何使用此爬虫加载 XML 文件？

你有一个很好的教程来展示如何做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T14:39:33.300

你试过这个吗？

```
$document = new \DOMDocument();
$document->loadXml(file_get_contents('my_file.xml'));

$crawler = new Crawler();
$crawler->addDocument($document); 
```

或这个？

```
$crawler = new Crawler();
$crawler->addXmlContent(file_get_contents('my_file.xml')); 
```

阅读有关 DomCrawler 组件以及如何将内容加载到其中的更多信息：http: [//symfony.com/doc/current/components/dom_crawler.html#adding-the-content](http://symfony.com/doc/current/components/dom_crawler.html#adding-the-content)

# unix - 如何在unix中比较一个文件的列

> ID：12315148
> 
> 赞同：-2
> 
> 时间：2012-09-07T09:13:49.067
> 
> 标签：unix, sed, awk

我有一个文件 `File_1.txt`：

```
AA:BB:CC 
a@gmail.comb@gmail.com:c@yahoo.co.in -------------------------- Row1 
x@rediff.com,y@gmail.com:y@yahoo.in:z@redhat@com ---------------Row2
a@yahoo.in,c@gmail.com:b@yahoo.co.in,a@rediff.com:c@uix.xo.in---Row3 
```

这里`AA`, `BB`,`CC`是三列，文件是`:`分隔的。

在第 1 行中，如果`AA`data 与`BB` *or* `AA`与`CC` *or* `BB`与data 匹配，`CC`则 print `Row 1 matched`，如果不匹配，则 print `Row 1 no matched`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:20:20.783

```
$ gawk -F: 'FNR > 1 {if ($1 == $2 || $1 == $3 || $2 == $3)
                       print FNR, "match";
                     else
                       print FNR, "no match";}' < File_1.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:49:36.543

```
awk -F: '{if(!($1==$2||$2==$3||$3==$1))printf("%s","not ");print"matched",$0}' file 
```

tested below:

```
> cat temp
AAAA:0:12
BBBBB:2:2
CCCCC:1:1
DDDD:0:0
EEEEE:1:2
> awk -F: '{if(!($1==$2||$2==$3||$3==$1))printf("%s","not ");print"matched",$0}' temp
not matched AAAA:0:12
matched BBBBB:2:2
matched CCCCC:1:1
matched DDDD:0:0
not matched EEEEE:1:2 
```

# java - 使用套接字 I/O 阻塞操作中断/停止线程

> ID：12315149
> 
> 赞同：5
> 
> 时间：2012-09-07T09:13:51.877
> 
> 标签：java, multithreading, sockets

在我的服务器应用程序的某个时刻，我想停止一些正在执行 I/O 阻塞操作的线程。

例如，其中之一具有以下`run()`方法：

```
public void run() {
    System.out.println("GWsocket thread running");

    int len;
    byte [] buffer = new byte[1500];
    try {
        this.in  = new DataInputStream(this.socket.getInputStream());
        this.out = new DataOutputStream(this.socket.getOutputStream());
        running = true;

        while (running){
            len = in.read (buffer);
            if (len < 0)
                running = false;
            else
                parsepacket (buffer, len);
        }

    }catch (IOException ex) {
        System.out.println("GWsocket catch IOException: "+ex);
    }finally{
        try {
            System.out.println("Closing GWsocket");
            fireSocketClosure();
            in.close();
            out.close();
            socket.close();
        }catch (IOException ex) {
            System.out.println("GWsocket finally IOException: "+ex);
        }
    }
} 
```

如果我想停止运行此代码的线程，我应该怎么做？

[在这里](http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html)他们展示了如何做（**如何停止等待长时间（例如，输入）的线程？**），但我不明白他们的意思：

> 要使这项技术发挥作用，任何捕获中断异常但不准备处理它的方法都必须立即重新声明该异常。我们说重新断言而不是重新抛出，因为并不总是可以重新抛出异常。如果捕获 InterruptedException 的方法未声明抛出此（已检查）异常，则应使用以下咒语“重新中断自身”： Thread.currentThread().interrupt();

谁能给我一些提示？一些代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T09:30:09.663

一个解决方案，由 Peter Lawrey 描述并且[在这里](https://stackoverflow.com/questions/2983835/how-can-i-interrupt-a-serversocket-accept-method)也可以看到是关闭套接字。

使用 nio，您还可以使用可[中断的](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/InterruptibleChannel.html)[SocketChannel](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/SocketChannel.html) ，并允许应用[Java 的标准中断模型](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)。

调用 Thread 对象的[中断](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#interrupt%28%29)方法会引发 InterruptedException，这甚至会停止阻塞 IO 操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T09:17:37.587

您可以添加一个方法，如

```
public void close() throws IOException {
    this.socket.close();
} 
```

并且任何阻塞的 IO 操作都会抛出一个 SocketException。

您可能想设置一个标志`closed`，您可以检查是否可以预期抛出异常。

顺便说一句：你不能确定你会在读取时得到离散的数据包。阅读您需要的内容并使用 BufferedInputStream 来提高效率要好得多。如果您不需要解析内容，例如从套接字复制到文件，则仅读取块。

例如，您的读取可能只获得一个字节或获得一个数据包的结尾和另一个数据包的开头。

# tcl - 如何处理 tcl 期望输出

> ID：12315151
> 
> 赞同：1
> 
> 时间：2012-09-07T09:14:10.570
> 
> 标签：tcl, expect

我正在编写一个期望脚本来远程登录到路由器，做一些配置，期望一些输出。

如果所需的提示不可用，则它会等待它并超时。那么我该如何处理并打印错误消息。

```
set timeout 30;

puts "Telnet to $IP 2361\n\n";
spawn telnet $IP 2361;

expect ">";

send "ACT-USER::$user_name:1::$password;";
expect ">"; 
```

如果未收到预期值，我如何处理和打印错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:57:23.337

很好地处理超时需要稍微复杂一点的使用`expect`：

```
expect {
    ">" {
        # Got it; don't need to do anything here because we run the code after
    }
    timeout {
        send_user "timed out, oh no!\n"
        exit 1
    }
}

# Now we put the rest of the script...
send "ACT-USER....blah"
# ... 
```

请注意，我很惊讶您`send`没有以`\r`（模拟`Return`按键）结尾。

# ember.js - Ember.js 0.9.7.1 -> 0.9.8.0，重大变化？

> ID：12315153
> 
> 赞同：0
> 
> 时间：2012-09-07T09:14:14.230
> 
> 标签：ember.js

我一直在阅读此处发布的教程/指南：http: [//www.adobe.com/devnet/html5/articles/flame-on-a-beginners-guide-to-emberjs.html](http://www.adobe.com/devnet/html5/articles/flame-on-a-beginners-guide-to-emberjs.html)

这对我开始使用 Ember.js 有很大帮助，但是，我发现虽然他的示例中的代码适用于 Ember.js 版本 0.9.6，但它们不适用于 1.0 预版本。我的车把代码应该为每个项目生成一个列表项，`App.labelController`当使用较新版本时，它什么也不做。这是故意的改变吗？如果是这样，我现在如何达到同样的效果？

**编辑：**我实际上已将重大更改范围缩小到版本**0.9.7.1**和**0.9.8之间**

我有以下代码（供参考）：

```
 /**************************
  * Application
  **************************/

  // Create the Ember.js application framework
  App = Em.Application.create();

  /**************************
  * Models
  **************************/

  // The "model" for the label object
  App.Label = Em.Object.extend({
    id: null,
    name: null,
    svg: null
  });

  /**************************
  * Views
  **************************/

  /**************************
  * Controllers
  **************************/

  // The "controller" for the label objects
  App.labelController = Em.ArrayController.create({
    content: [],
    init: function() {
      // Fake some data arriving from the server
      for (var i = 0; i < 10; i++)
      {
        var label = App.Label.create({
          id: i,
          name: 'Label 0' + i,
          svg: null
        });
        this.pushObject(label);
      }
    }
  }); 
```

以及以下 HTML：

```
 <div class="row-fluid">        
    <div class="span3">
      <ul class="nav nav-list">
        <script type="text/x-handlebars">
          {{#each App.labelController}}
            <li>
              <a href="#">{{name}}</a>
            </li>
          {{/each}}
        </script>
      </ul>
    </div>
    <div class="span9" id="drawContainer">
    </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:53:25.647

您忘记调用`this._super()`该`App.labelController#init`方法。

这是您的 JSFiddle：[它不起作用](http://jsfiddle.net/3cJGD/)。

和 JSFiddle 的调用`_super`： [它的作品](http://jsfiddle.net/ekNap/)。

# c# - 我可以在 .net 中没有 .config 文件的情况下指定supportedRuntime（或任何其他配置参数）吗？

> ID：12315155
> 
> 赞同：17
> 
> 时间：2012-09-07T09:14:17.267
> 
> 标签：c#, .net, winforms, configuration, windows-8

我有一个 WinForms 应用程序，它应该很容易使用 .exe 文件进行部署。它使用框架 2.0，因此默认情况下它不适用于 Windows 8。如果我包含具有以下参数的 .config 文件，它在 W8 上可以正常工作：

```
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client"/>
    <supportedRuntime version="v2.0.50727"/>
  </startup>
</configuration> 
```

但是，现在我必须部署两个文件，这是不可接受的。我可以做些什么来将这些参数“嵌入”到 exe 本身中吗？

我曾尝试使用 WinZip 自解压器，但它也不是一个选项，因为我无法自定义它的界面。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T11:14:49.153

.NET 可执行文件包含一小段本机代码，旨在将适当的 CLR 版本加载到进程中。

加载程序调用*shim*（MSCOREE.DLL，.NET 可执行文件具有来自此 DLL 的本机依赖项）来加载 CLR（ v4 中的[CLRCreateInstance](http://msdn.microsoft.com/en-us/library/dd537633)）。配置元素的
内容由 shim 处理。[`<startup>`](http://msdn.microsoft.com/en-us/library/bbx34a2h)

这意味着，您不能`<startup>`在托管代码中处理元素，因为此时没有 CLR（和任何托管代码）。唯一的方法是编写自己的 CLR 主机。我认为，使用配置文件发布应用程序或构建 .NET 4/4.5 版本要容易得多。

# jquery - 加载资源失败：服务器在 jquery.dataTables.min.js 中响应状态为 404（未找到）

> ID：12315156
> 
> 赞同：1
> 
> 时间：2012-09-07T09:14:23.587
> 
> 标签：jquery

我不明白这意味着什么以及如何解决这个问题？我正在使用 firebug lite 在 chrome 中运行

在 reasources 选项卡下 jquery.dataTables.min.js 旁边有一个 1 说明错误

请问有什么帮助吗？

# c++ - 跟随代码流

> ID：12315157
> 
> 赞同：0
> 
> 时间：2012-09-07T09:14:24.823
> 
> 标签：c++, debugging, execution, flow, breakpoints

我正在尝试在我最喜欢的游戏之一中学习关卡格式，这几乎完全没有记录。基本上，唯一描述关卡格式的文档就是简单地说诸如`First 12 bytes: header`
`4 following bytes: number of materials`
`x next bytes: array of materials`, 之
类的东西。

我对十六进制非常缺乏经验，也不完全理解他们在说什么。但是，有一个关卡编辑器，源代码可在 google 代码上免费获得。我正在考虑将其添加到我的视觉工作室并尝试通过阅读关卡编辑器如何打开文件来学习关卡格式。

然而，另一个问题，我不懂c++（我知道python）。这意味着我可能无法找到代码的哪一部分读取字节等等。

我正在寻找的是能够让我在执行过程中遵循代码流的东西。本质上类似于在每一行上设置断点，并让它告诉我在读取文件内容时正在执行的代码的特定部分。然而，显然在每一行设置断点是非常混乱和缓慢的。我正在寻找一些东西，当我在编辑器中打开文件时，它会简单地显示正在运行的代码。

有谁知道我能做什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:25:03.587

您正在寻找一种从一个语句到下一个语句的功能；我认识的每个调试器都有这样的功能。您首先在感兴趣区域的开头设置一个断点，然后从那里开始“单步执行”您的代码。

例如，在 Visual C++ 2010 中，F10 键执行一步；您还可以使用 F11 “进入”下一条语句（例如方法调用）。

在您的情况下，将断点设置为开始读取关卡文件的位置，然后从那里继续。找到读取文件的位置也可能是一个难题——取决于代码的清晰程度；但如果它的代码写得很好，应该有一个名称中带有“read”或“load”或类似名称的方法——你会明白的！

不过，您可能必须至少了解一些基本的 C++ 语法才能了解正在发生的事情。

我还建议阅读 Debugging HowTo（例如[这个](http://www.codeproject.com/Articles/79508/Mastering-Debugging-in-Visual-Studio-2010-A-Beginn)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:43:52.477

您发现如此晦涩的文档只是级别格式规范，在大多数情况下，规范就是您所需要的。您还需要一些额外的文件阅读经验。

阅读文件时，您必须对几件事保持警惕。

1) 逐字节（8 位）读取时，顺序不变。

2) 一次读取 32 位时，字节顺序可以根据机器的字节顺序而改变。

（例如，当字节序改变时，0x12345678 变为 0x78563412）

有一个非常古老的教程可以帮助您加载 3D 模型，帮助我开始处理文件：

[http://www.spacesimulator.net/wiki/index.php?title=Tutorials:3ds_Loader](http://www.spacesimulator.net/wiki/index.php?title=Tutorials:3ds_Loader)

这很有用，因为您有部分规范（如原始文档中的），它显示了如何从规范开始创建加载器。这就是你所需要的。那是 C，但在这种情况下与 C++ 没有太大区别。

如果你需要一些其他简单的文件格式规范和相关的文件加载器来让你更清楚，你还可以查看 libktx 和 ktx 规范：

[http://www.khronos.org/opengles/sdk/tools/KTX/file_format_spec/](http://www.khronos.org/opengles/sdk/tools/KTX/file_format_spec/)

如果我没记错的话，还有一个非官方的 C++ KTX 加载器，你可以看看你是否打算编写 C++ oop 代码而不是 C。

# apache - 我需要知道用 gdb 分析“core.xxxx”

> ID：12315158
> 
> 赞同：0
> 
> 时间：2012-09-07T09:14:29.067
> 
> 标签：apache, gdb, core

gdb /usr/sbin/httpd ./core (gdb) bt

```
#0  0x00002af748ff9265 in ?? ()
#1  0x00002af748ffad10 in ?? ()
#2  0x00007fff0a31e248 in ?? ()
#3  0x00007fff0a317aa0 in ?? ()
#4  0x00007fff0a317a10 in ?? ()
#5  0x00007fff0a317ad0 in ?? ()
#6  0x0000000200000000 in ?? () 
```

请告诉我怎么做。感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:20:19.630

您的`core`文件来自一个没有调试信息的可执行文件。这就是为什么你的执行堆栈的显示缺少函数名和行信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T03:39:30.897

> #0 0x00002af748ff9265 在?? ()

您在核心转储中没有得到任何符号名称的最可能原因是您*要么*

1.  有一个截断的核心，或
2.  正在分析在与运行 GDB 的系统不同的系统上生成的核心，或者
3.  有一个剥离的可执行文件（在这种情况下，`nm /usr/sbin/httpd`会说`stripped`什么）。

我敢打赌它是 1 或 2。如果是 2，请参阅[此](https://stackoverflow.com/questions/4329986/remote-post-mortem-coredump-analysis-without-having-exact-debug-symbols-for-shar)答案。如果它是 3，并且您正在使用系统提供的 apache 构建，请查看安装`httpd-debug`或类似软件包是否有帮助。

# objective-c - 如何以编程方式创建 ICNS 图标？

> ID：12315162
> 
> 赞同：3
> 
> 时间：2012-09-07T09:14:36.357
> 
> 标签：objective-c, cocoa, nsimage, cgimageref, icns

好的，这就是我想要的：

*   拿`NSImage`一些
*   将它们添加到`ICNS`文件中
*   保存

这是我到目前为止所做的（纯粹作为测试）：

```
- (CGImageRef)refFromImage:(NSImage*)img
{
    CGImageSourceRef source;

    source = CGImageSourceCreateWithData((CFDataRef)[img TIFFRepresentation], NULL);
    CGImageRef maskRef =  CGImageSourceCreateImageAtIndex(source, 0, NULL);

    return maskRef;
}

- (void)awakeFromNib
{
    NSImage* img1 = [NSImage imageNamed:@"image1"];
    NSImage* img2 = [NSImage imageNamed:@"image2"];

    NSLog(@"%@",img1);
    CGImageRef i1 = [self refFromImage:img1];
    CGImageRef i2 = [self refFromImage:img2];

    NSURL *fileURL = [NSURL fileURLWithPath:[@"~/Documents/final.icns" stringByExpandingTildeInPath]]; 
    CGImageDestinationRef dr = CGImageDestinationCreateWithURL((__bridge CFURLRef)fileURL, kUTTypeAppleICNS , 1, NULL);

    CGImageDestinationAddImage(dr, i1, NULL);
    CGImageDestinationAddImage(dr, i2, NULL);
    /* Even tried adding 'multiple' times

    CGImageDestinationAddImage(dr, i1, NULL);
    CGImageDestinationAddImage(dr, i2, NULL);
    CGImageDestinationAddImage(dr, i1, NULL);
    CGImageDestinationAddImage(dr, i2, NULL);

    */

    CGImageDestinationFinalize(dr);

    CFRelease(dr);
} 
```

但是，它仍然不断抛出错误：

> ImageIO：CGImageDestinationFinalize 图像目的地没有足够的图像

我的代码有什么问题？

* * *

我已经看过下面的答案，但仍然没有：

*   [将 CGImageRef 保存为 PNG 文件错误？（ARC引起的？）](https://stackoverflow.com/questions/8225838/save-cgimageref-to-png-file-errors-arc-caused)
*   [如何准确地从磁盘上的图像制作 CGImageRef](https://stackoverflow.com/questions/3550201/how-exactly-to-make-a-cgimageref-from-an-image-on-disk)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:57:39.207

您可以使用[IconFamily](http://iconfamily.sourceforge.net/)。

> IconFamily 是 Mac OS X Carbon API 的“图标系列”数据类型的 Cocoa/Objective-C 包装器。其主要目的是使 Cocoa 应用程序能够轻松地从 NSImage 实例创建自定义文件图标，从而利用 Mac OS X 的高分辨率 RGBA“缩略图”图标格式来提供文件内容的丰富详细的缩略图预览。

```
NSImage *mImage = [[NSImage alloc] initWithContentsOfFile:@"/Users/Username/Desktop/WhiteTiger.jpg"];
IconFamily *fam = [IconFamily iconFamilyWithThumbnailsOfImage:mImage];    
[fam writeToFile:@"/Users/Username/Desktop/WhiteTiger.icns"]; 
```

# java - 使用 Scala 实现跨越一系列基于 Java 的服务的领域层

> ID：12315165
> 
> 赞同：5
> 
> 时间：2012-09-07T09:14:43.840
> 
> 标签：java, scala, design-patterns, architecture

我们有一个在多个层中实现的 java 系统。在最低级别，有一些服务抽象了一系列基础设施组件，例如数据库、blob 存储、处理队列等......最重要的是，我们有实现使用其中一个或多个的工作流的域层服务（使用命令和复合命令模式）。最后还有一个基于 jax-rs (jersey) 的层，它提供了一个根据领域层的工作流实现的 REST 接口/协议。

我对 Scala 的经验有限，但我怀疑它可能是编写更具表现力的领域层版本的好工具，因为 Java 代码非常冗长且有时难以调试。部分原因是命令组合和执行的控制是由由具体命令扩展的基类处理的。事后看来，这可能不是一个理想的设计选择。

我希望这个非常高级的描述能够说明我正在努力实现的目标。让我知道是否需要更具体。我最感兴趣的是如何在 Scala 中构建领域层，同时保留基于 Java 的服务层。此外，关于如何在域层之上实现 http/REST 协议以便可以将其部署在 Java Web 应用程序容器中的建议也将非常有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:25:16.230

从战术上讲，一个明显的起点是利用 Scala 的结构类型并将您的命令表示为特征：

```
trait CommandType1 { def operation() } 
```

然后可以根据这些特征构建您的命令组合：

```
case class CompositeCommand(commandOperand: CommandType1*) extends CommandType1 {
  def operation() = commandOperand foreach { _.operation() }
} 
```

Scala 在您的工作流层上相对于 Java 的另一个优势是您可以将命令定义为可传递的函数。这开启了创建表示抽象操作的通用高级命令的可能性，然后为您常用/访问的工作流创建和存储这些命令的部分功能。

面向前端的 Scala 协议层可以着眼于启动 Actor 来处理传入的请求。此外，可能值得看一下[Scala 的 Cake Pattern 之](http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/)类的东西，以提供 DI 来控制您的业务逻辑，并在前端代码中提供用于动态调度的多方法。

# android - 如何更改所有组件的整体焦点颜色？

> ID：12315168
> 
> 赞同：0
> 
> 时间：2012-09-07T09:15:07.823
> 
> 标签：android, focus, themes

我想将默认为蓝色的焦点颜色更改为某种自定义颜色？这样做的简单方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:27:24.227

您想制作一个 StateListDrawable 并将其设置为背景色 View.setBackgroundResource(R.id.drawable_name): 在 XML 中它是：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_enabled="false" android:drawable="@color/button_disabled"/>
<item android:state_pressed="true" android:drawable="@color/button_pressed"/>
<item android:state_selected="true" android:drawable="@color/button_selected"/>
<item android:state_focussed="true" android:drawable="@color/button_focussed"/>
<item android:drawable="@color/button_transparent"/> 
```

可绘制对象可以在 res/values/colors.xml 中定义颜色，例如

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!--  buttons -->
    <color name="button_enabled">#88000000</color>
    <color name="button_disabled">#88666666</color>
    <color name="button_pressed">#88ff8800</color>
    <color name="button_selected">#cc0088bb</color>
    <color name="button_focussed">#cc8800bb</color>
    <color name="button_transparent">#00000000</color>
</resources> 
```

可以像使用任何其他可绘制资源一样使用可绘制资源

# wpf - XMLNS：一种一劳永逸地设置它们的方法？

> ID：12315172
> 
> 赞同：1
> 
> 时间：2012-09-07T09:15:15.153
> 
> 标签：wpf, xaml, xml-namespaces

我的项目中有多个命名空间和程序集，并且在我们制作的每个控件中声明了很多 xmlns（至少 7 个，没有像 x: 或 d: 这样的系统控件）。这太乏味了。

有没有办法在应用程序中一次性声明 xmlns ？如果没有，你有一些解决方法（为了有一个轻量级的控件定义）？

请注意，我知道 XmlnsDefinitionAttribute，它并不总是可能的（例如使用外部程序集）或者不是一个很好的设计（对我来说，将 UI 特定属性放在业务实体程序集中并不是一个很好的设计）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:47:58.163

`xmlns`是编译器需要的文档级别的东西，它们就像`using`您还必须在每个 C# 代码文件中放置的语句。

如果你有很多共同点`xmlns`，你可以为 Visual Studio 创建一个默认添加它们的[项目模板](http://msdn.microsoft.com/en-us/library/6db0hwky.aspx)，或者找到一个允许在`XAML`.

# python - 如何将 python 模拟库和装饰器与 unittest 库一起使用？

> ID：12315173
> 
> 赞同：3
> 
> 时间：2012-09-07T09:15:23.187
> 
> 标签：python, unit-testing, mocking, decorator

我正在尝试使用模拟 python 库，并决定使用装饰器来隐藏一些重复操作，以使用相应的替换方法设置模拟副作用变量。

到目前为止，我有以下代码，它没有进入测试，它基本上什么都不做。有想法该怎么解决这个吗？谢谢！

```
import unittest
from mock import patch

# Replacement method for requests.get call
def mock_requests_get(url=None, **kwargs):
    if url == URL1:
        return {'url':url, 'status_code':200, 'status':'success'}

    if url == URL2: A
        return {'url':url, 'status_code':403}

# Replacement method for requests.post call
def mock_requests_post(url, data=None, **kwargs):
    if url == URL1 and data['data']=='go':
        return {'url':url, 'status_code':200, 'status':'success'}

    if url == URL2 and data['data']!='gogo':
        return {'url':url, 'status_code':403}

# Decorator which sets mock replacement methods
def mock_type(method=''):
    def _mock(func):
        def _decorator(mock_get, mock_post, *args, **kwargs):
            print method
            if method == 'GET':
                mock_get.side_effect = mock_requests_get
            if method == 'POST':
                mock_post.side_effect = mock_requests_post
            func(mock_get, mock_post, *args, **kwargs)
        return _decorator
    return _mock

@patch('requests.post')
@patch('requests.get')
class TestKeywordsApi(unittest.TestCase):

    def setUp(self):
        self.ka = KeywordsApi()

    @mock_type('GET')
    def test_get(self, mock_get, mock_post):
        # Replace this code in mock_type decorator:
        #mock_get.side_effect=mock_requests_get

        print self.ka.get(URL1)
        print self.ka.get(URL2)

        # Do asserts

    @mock_type('POST')
    def test_post(self, mock_get, mock_post):
        # Replace this code in mock_type decorator:
        #mock_post.side_effect=mock_requests_post

        print self.ka.post(URL1, {'data':'go'})
        print self.ka.post(URL2, {'data':'go'})

        # Do asserts 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:50:46.603

确保替换执行命名空间中的函数。根据导入，您当前的代码可能会或可能不会替换您认为它正在替换的内容。以下是我相信您正在尝试做的事情。

```
import kwmodule
import unittest, mock

def mock_requests_get(url=None, **kwargs):
    "Replacement method for requests.get call"
    pass

def mock_requests_post(url, data=None, **kwargs):
    "Replacement method for requests.post call"
    pass

@mock.patch('kwmodule.requests.post', mock_requests_post)
@mock.patch('kwmodule.requests.get', mock_requests_get)    
class TestKeywordsApi(unittest.TestCase):
     def setUp(self):
         self.ka = kwmodule.KeywordsApi() 
```

但是，使用自动指定的 MagicMock 对象替换 get 和 post 可能会更成功。如果这对您不起作用，请**使用**您自己的自定义替换。

例如，如果您知道“get”的调用顺序，则以下补丁装饰器将起作用。

```
return_values = [{'url':url, 'status_code':200, 'status':'success'}, 
                 {'url':url, 'status_code':403}, 
                 AssertionError('Unexpected call.')]

@mock.patch('kwmodule.requests.get', autospec=True, side_effect=return_values) 
```

这将在第一次调用时返回“成功”条件，第二次返回错误，如果第三次调用，则会引发 AssertionError。十分之九，我使用 side_effect 而不是编写自己的返回生成函数。

# c# - 为什么要在 url 中添加 # 字符？

> ID：12315178
> 
> 赞同：6
> 
> 时间：2012-09-07T09:16:01.923
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, actionlink

我有一个显示缩略图列表的简单页面，

我想添加一个寻呼机，我添加了两个操作链接

```
 <li class="ui-pagination-next">@Html.ActionLink("Next", "Paginate", "Home", new { nbSkip = ViewBag.nextSkip }, null)</li> 
```

当我点击链接时，我被重定向到

```
http://localhost:41626/#/Home/Paginate?nbSkip=60 
```

代替

```
http://localhost:41626/Home/Paginate?nbSkip=60 , 
```

有谁知道为什么将“#”字符添加到 URL 中？

路线配置：

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:26:46.013

通过查看您的代码，我发现`ui-pagination-next`
这可能意味着其他一些 JS 框架实际上正在侦听此链接的单击事件并正在使用某种 ajax
哈希`"#"`字符，因此实际上浏览器不会重定向到页面和同时保留历史记录
，因此如果您按下浏览器的后退按钮，则此链接的附加部分将`#`被删除，并且订阅 evet 的任何 JS 框架都知道如何以

**更简单的方式处理它。** 在 a
之后的任何东西`#``url`不发送到服务器。因为一些 JS 框架正在处理 ajax 部分，它不希望该请求应该直接转到服务器，同时在浏览器地址栏中显示正确的外观，因此在 # 之后添加您在链接中的任何内容并继续使用 AJAX

[继承](https://developers.google.com/tv/web/articles/location-hash-navigation)了一篇深入的文章，使用哈希进行后退和前进

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:20:54.690

通过查看您`li`的 im 类，`ui-pagination-next` [假设](https://www.google.co.uk/search?q=ui-pagination-next)这里正在使用 jQuery Mobile。

默认情况下，jQuery Mobile[使您的链接启用 AJAX](http://jquerymobile.com/test/docs/pages/page-links.html)

* * *

如果您愿意，可以使用以下方法防止这种情况：

```
$.mobile.ajaxLinksEnabled = false; 
```

* * *

```
<script type="text/javascript">
   $(function(){
       $.mobile.ajaxLinksEnabled = false; 
   });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:22:28.197

如果我是你，我会使用 Ajax Raw ActionLink：

```
@Ajax.RawActionLink("NameofLink", "Action", "Controller", new { oid = 0, type = "oid and type are 2 parameters you want to send to action " }, new { id = "btnNewB", @class = "anyclass" }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T11:26:51.173

谢谢大家的回复，

很好看@curt，事实上我正在使用jQuery mobile，导致问题的原因是`mobile.changePage`

现在我使用简单的按钮来导航投掷页面，但是

```
$.mobile.ajaxLinksEnabled = false; 
```

不能解决我的 ajax 链接问题。所以我已经这样做了，它现在正在工作

```
 @Html.ActionLink("Previous", "Index", new { nbSkip = ViewBag.previousSkip }, new { data_role = "button", data_icon = "arrow-l", rel = "external", data_ajax = false }) 
```

感谢@Parv Sharma 的解释

# android - Android：打开 db 文件时出错

> ID：12315179
> 
> 赞同：0
> 
> 时间：2012-09-07T09:16:01.957
> 
> 标签：android, database, sqlite

我正在使用此代码检查数据库是否已存在：

```
public static boolean checkDataBase(String DB_FULL_PATH) {
    SQLiteDatabase checkDB = null;
    try {
        checkDB = SQLiteDatabase.openDatabase(DB_FULL_PATH, null,
                SQLiteDatabase.OPEN_READONLY);
        checkDB.close();
    } catch (SQLiteException e) {
        // database doesn't exist yet.
    }
    return checkDB != null ? true : false;
} 
```

我的助手类是：

```
public class DatabaseHandler extends SQLiteOpenHelper {

    private static final int DATABASE_VERSION = 1;
    public static final String DATABASE_NAME = "my_db";
    private static final String TABLE_NAME = "products";
    private static final String KEY_NAME = "pname";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        String CREATE_PRODUCTS_TABLE = "CREATE TABLE " + TABLE_NAME + "("
                + KEY_NAME + " TEXT" + ")";
        db.execSQL(CREATE_PRODUCTS_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }

    public void addProducts(String product_name) {

        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(KEY_NAME, product_name); // Product Name
        db.insert(TABLE_NAME, null, values);
        db.close();
    }

    public String getProducts() {

        SQLiteDatabase db = this.getReadableDatabase();
        String selectQuery = "SELECT  * FROM " + TABLE_NAME;
        Cursor cursor = db.rawQuery(selectQuery, null);
        String s = "default";
        if (cursor.moveToFirst()) {
            int n = cursor.getCount();
            s = cursor.getString(0);
        }
        cursor.close();
        return s;
    }
} 
```

当我尝试这个时：

```
checkDataBase(Environment.getDataDirectory() + "/data/com.android.my_app/databases/my_db.db") 
```

我在 log cat 中收到此错误消息：

`sqlite returned: error code = 14, msg = cannot open file at source line 25467`

```
sqlite3_open_v2("/data/data/com.android.my_app/databases/my_db.db"‌​, &handle, 1, NULL) failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:25:17.167

使用它来检查数据库

```
 private boolean checkDataBase() {
    // TODO Auto-generated method stub
       File dbFile = new File(DB_PATH + DB_NAME);
       return dbFile.exists();
  }
    where  path
    private static String DB_PATH = "/data/dat/your_package_name/databases/";
    and  DB_NAME is database name 
```

# .net - MEF CompositionContainer 缺少 ComposeParts 扩展方法

> ID：12315182
> 
> 赞同：0
> 
> 时间：2012-09-07T09:16:18.913
> 
> 标签：.net, vb.net, extension-methods, mef, .net-4.5

我正在尝试将部件的 MEF 组合抽象为类库类，但我在 .Net4.5 RC 中遇到问题，因为 ComposeParts 扩展方法在类库 CompositionContainer 中不可用

我做错了什么或者可能缺少参考？

**WCF 服务类工作容器**

```
<Import(GetType(IGenericModelFactory))>
Public Property ModelFactory As IGenericModelFactory

Private _mefContainer As CompositionContainer
Private _catelog As DirectoryCatalog

Public Sub New()
    _catelog = New DirectoryCatalog(".")
    _mefContainer = New CompositionContainer(_catelog)
    _mefContainer.ComposeParts(Me)
End Sub 
```

**类库 - 缺少 ComposeParts 方法**

```
Imports System.ComponentModel.Composition.Hosting

Namespace Core.Composition

    Public Class CompositionBuilder
        Implements IComposeObjects

        Public Function CreateContainer() As CompositionContainer Implements IComposeObjects.CreateContainer
            Return Activator.CreateInstance(Of CompositionContainer)()
        End Function

        Public Sub ComposeFromDirectory(directory As String, compositionRoot As Object) Implements IComposeObjects.ComposeFromDirectory

            Dim catelog As DirectoryCatalog = Activator.CreateInstance(GetType(DirectoryCatalog), directory)
            Dim mefContainer As CompositionContainer = Activator.CreateInstance(GetType(CompositionContainer), catelog)
            mefContainer.Composeparts(compositionRoot)

        End Sub

    End Class

End Namespace 
```

![在此处输入图像描述](../Images/320bde138f1befac0a0e1eed941f7d45.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:47:26.900

看起来你必须包含`System.ComponentModel.Composition`命名空间

```
Imports System.ComponentModel.Composition.Hosting
Imports System.ComponentModel.Composition

Namespace Core.Composition

    Public Class CompositionBuilder
        Implements IComposeObjects

        Public Function CreateContainer() As CompositionContainer Implements IComposeObjects.CreateContainer
            Return Activator.CreateInstance(Of CompositionContainer)()
        End Function

        Public Sub ComposeFromDirectory(directory As String, compositionRoot As Object) Implements IComposeObjects.ComposeFromDirectory

            Dim catelog As DirectoryCatalog = Activator.CreateInstance(GetType(DirectoryCatalog), directory)
            Dim mefContainer As CompositionContainer = Activator.CreateInstance(GetType(CompositionContainer), catelog)
            mefContainer.ComposeParts(compositionRoot)

        End Sub

    End Class

End Namespace 
```

# spring - Flex BlazeDS 检测浏览器关闭

> ID：12315186
> 
> 赞同：1
> 
> 时间：2012-09-07T09:16:41.177
> 
> 标签：spring, apache-flex, browser, blazeds

我有一个使用 StreamingAMF 通道连接到 BlazeDS 服务器的 Flex 应用程序。如果浏览器关闭，我想在服务器端进行检测。我为 FlexClientListener 添加了一个实现并将其注册到 FlexClient (FlexContext.getFlexClient().addClientDestroyedListener)

但是在浏览器关闭时不会调用 Listener 的 clientDestroyed 方法。它在会话超时时被调用。有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:06:04.253

我们也有类似的问题，不关闭会话导致 BlazeDS 中的内存泄漏，我们在 swf wrapper javascript 中编写了以下脚本，以确保关闭浏览器调用 flex 中的会话关闭代码

```
<script language="JavaScript" type="text/javascript">

    function cleanup()
    {
        getMyApplication("swf_filename_without_extension").cleanUp();    
        alert("Disconnected! Press OK to continue.");
    }

    function getMyApplication(appName)
    {
        if (navigator.appName.indexOf ("Microsoft") != -1)
         {
              return window[appName];
         }
         else
         {
              return document[appName];
         }
    }
</script>

<body onbeforeunload="cleanup()"> 
```

在 Flex 中添加一个回调创建完成监听器

```
 ExternalInterface.addCallback("cleanUp",cleanUp); 
```

并在 cleanUp 方法中编写所有会话关闭代码。

注意：不要忘记将警报消息放在 javascript 中。这将为 cleanUp 方法执行提供足够的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:43:49.597

您将无法从服务器检测客户端上的浏览器交互。

您最好的猜测是使用[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)。它允许您的 Flash 应用程序与 JavaScript 通信，反之亦然。

使用[JavaScript onClose 事件](https://developer.mozilla.org/en/DOM/window.onclose)触发一些 JavaScript，该 JavaScript 将调用您的 Flash 应用程序中的一个函数，该函数将进行远程调用，让您的服务器端知道浏览器正在关闭。

# java - 如何在 Android 上使用 JSON/String 执行 Mustache 模板？

> ID：12315189
> 
> 赞同：1
> 
> 时间：2012-09-07T09:16:51.313
> 
> 标签：java, android, json, string, mustache

我有`String`带有模板库的对象，例如：

```
<h1>{{header}}</h1>
{{#bug}}
{{/bug}}

{{#items}}
  {{#first}}
    <li><strong>{{name}}</strong></li>
  {{/first}}
  {{#link}}
    <li><a href="{{url}}">{{name}}</a></li>
  {{/link}}
{{/items}}

{{#empty}}
  <p>The list is empty.</p>
{{/empty}} 
```

我想拉另一个`String`对象表示`JSONObject`并将其字段放入模板中：

```
{
  "header": "Colors",
  "items": [
      {"name": "red", "first": true, "url": "#Red"},
      {"name": "green", "link": true, "url": "#Green"},
      {"name": "blue", "link": true, "url": "#Blue"}
  ],
  "empty": false
} 
```

最后我会得到`String`代表 HTML 结构：

```
<h1>Colors</h1>
<li><strong>red</strong></li>
<li><a href="#Green">green</a></li>
<li><a href="#Blue">blue</a></li> 
```

我不想使用任何 POJO 或`Map`s - 仅使用标准`String`对象或将第二个`String`转换为`JSONObject`以将其用作模板的上下文。
有人能给我举个例子吗？
谢谢。

**编辑**：我`JSON`在执行模板时对模板/结构一无所知-我必须使用未知模板/`JSON`并假设它们是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:31:25.380

我找不到处理纯`String`对象的方法 - 我正在转换`JSONObject`为`Map`让它与 Mustache 一起使用。这是转换代码：

```
public static Map<String, Object> toMap(JSONObject object) throws JSONException
{
    Map<String, Object> map = new HashMap();
    Iterator keys = object.keys();
    while (keys.hasNext())
    {
        String key = (String) keys.next();
        map.put(key, fromJson(object.get(key)));
    }
    return map;
}

public static List toList(JSONArray array) throws JSONException
{
    List list = new ArrayList();
    for (int i = 0; i < array.length(); i++)
    {
        list.add(fromJson(array.get(i)));
    }
    return list;
}

private static Object fromJson(Object json) throws JSONException
{
    if (json instanceof JSONObject)
    {
        return toMap((JSONObject) json);
    } else if (json instanceof JSONArray)
    {
        return toList((JSONArray) json);
    } else
    {
        return json;
    }
} 
```

用法：

```
mustacheTemplate.execute(JSONUtils.toMap(new JSONObject(myString))); 
```

# gnuplot - 绘制一个既堆叠又聚集的条形图

> ID：12315195
> 
> 赞同：7
> 
> 时间：2012-09-07T09:17:02.480
> 
> 标签：gnuplot, bar-chart

如何使用 gnuplot 绘制这样的图形。

![在此处输入图像描述](../Images/d747497cc248a0476b7455f5ce4b64f2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T12:34:19.360

gnuplot的[演示](http://gnuplot.sourceforge.net/demo/histograms.html)页面显示了一个类似的示例。（这是该页面上的最后一个示例，并生成下面的图）

![图片来自 gnuplot 演示页面](../Images/2add9d436267f0a71be2f97e30bfb8d6.png)

# java - 外部文件中的 Struts 属性

> ID：12315196
> 
> 赞同：0
> 
> 时间：2012-09-07T09:17:16.753
> 
> 标签：java, properties, struts, struts-config

我已经有这个问题很长时间了，我似乎无法找到答案。我想知道至少这是否可能。我有一个 Web 应用程序，在这个操作中我想上传一个`.xls`文件。问题是我不想上传大文件，我把这个约束放在`struts.xml`：

```
<action name=....
    <interceptor-ref name="fileUpload"> 
        <param name="maximumSize">2097152</param>
    </interceptor-ref>
</action> 
```

我想知道的是是否有人知道从 struts.xml 外部化这个值的任何方法。今天，一个完全加载的 .xls 文件超过了 2 MB。提前致谢。

# java - 继承的静态成员的意外行为

> ID：12315205
> 
> 赞同：3
> 
> 时间：2012-09-07T09:17:56.293
> 
> 标签：java, inheritance, static, overriding, hide

我只是在玩弄`static`继承，看看能做什么，不能做什么。我以前读过，静态方法不能被覆盖，它们可以简单地隐藏。这就是为什么我试图看看什么适用于静态成员。下面是一些简单的测试代码：

```
public class ParentClass {
    public static String x;
    { x = "In ParentClass"; }
}

public class ChildClass extends ParentClass {
    { x = "In ChildClass"; }
} 
```

现在，当我打印从对象调用的 x 时，一切都按预期进行：

```
ParentClass parentClassReference = new ParentClass();
System.out.println(parentClassReference.x); // prints: "In ParentClass"

parentClassReference = new ChildClass();
System.out.println(parentClassReference.x); // prints: "In ChildClass" 
```

即使是从子类对象对 x 的微不足道的调用：

```
ChildClass childClassReference = new ChildClass();
System.out.println(childClassReference.x); // prints: "In ChildClass" 
```

现在，当我调用静态成员时，就像应该完成的那样，它变得很奇怪：

```
System.out.println(ChildClass.x); // prints: "In ChildClass" (Ok, so far.)
System.out.println(ParentClass.x); // prints: "In ChildClass" (This is unexpected.) 
```

我对这种行为没有任何解释。在[覆盖与隐藏（代码牧场）](https://www.coderanch.com/how-to/java/OverridingVsHiding)的上下文中，通过对象的调用似乎更有可能不按预期工作，但通过类名的调用应该。

我很困惑。谁能帮忙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:21:38.553

你的代码*很*奇怪......但结果完全符合我的预期。

你需要明白三件事：

*   这里只有*一个* `x`变量。无论您将其引用为`ChildClass.x`还是`ParentClass.x`，它都是同一个变量
*   当您*通过引用引用*静态成员时，编译器只是将其转换为静态引用，根本不查看引用的值。so`childClassReference.x`等价于`ChildClass.x`，实际上编译为`ParentClass.x`. 好的 IDE 会警告您这类事情 - 它会产生令人困惑的代码。
*   您编写的*设置*值的代码`x`仅基于构造函数调用执行。基本上它相当于：

    ```
    public class ParentClass {
        public static String x;
        public ParentClass() {
            x = "In ParentClass";
        }
    }

    public class ChildClass extends ParentClass {
        public ChildClass() {
            x = "In ChildClass";
        }
    } 
    ```

从根本上说，您不应该试图通过静态成员来实现任何类型的多态性。它不起作用，并且试图伪造它不会以愉快的方式结束。

# lwuit - BB LWUIT 1.5 TextField 的问题

> ID：12315209
> 
> 赞同：0
> 
> 时间：2012-09-07T09:18:24.357
> 
> 标签：lwuit, lwuit-textarea

我对 BB 中的 LWUIT1.5 文本字段有疑问。问题是，即使我将 text field 的约束设置为 NUMERIC ，第一个字符也只接受字母。这只发生在 BB 中，当 Alt+key 用于输入数字时，没有问题。

如果有人遇到过此类问题，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:00:46.813

您需要将文本字段输入模式顺序设置为`new String[] {"123}}`

# python - 使用 xml.dom.minidom python 编写 xml 文件时的问题

> ID：12315210
> 
> 赞同：2
> 
> 时间：2012-09-07T09:18:24.263
> 
> 标签：python, python-2.6

我有一个 xml 文件和一个 python 脚本用于向该 xml 文件添加一个新节点。我使用 xml.dom.minidom 模块来处理 xml 文件。下面给出了用 python 模块处理后的我的 xml 文件

```
<?xml version="1.0" ?><Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<PostBuildEvent>
  <Command>xcopy &quot;SourceLoc&quot; &quot;DestLoc&quot;</Command>
</PostBuildEvent>
<ImportGroup Label="ExtensionTargets">
</ImportGroup>
<Import Project="project.targets"/></Project> 
```

我实际需要的是如下所示。更改是在第一行之后和最后一行之前的换行符，并且“&”也转换为“

```
<?xml version="1.0" ?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<PostBuildEvent>
  <Command>xcopy "SourceLoc" "DestLoc"</Command>
</PostBuildEvent>
<ImportGroup Label="ExtensionTargets">
</ImportGroup>
<Import Project="project.targets"/>
</Project> 
```

我使用的python代码如下

```
xmltree=xml.dom.minidom.parse(xmlFile)
for Import in Project.getElementsByTagName("Import"):
   newImport = xml.dom.minidom.Element("Import")
   newImport.setAttribute("Project", "project.targets")
vcxprojxmltree.writexml(open(VcxProjFile, 'w')) 
```

我应该在我的代码中更新什么以获取正确格式的 xml

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:37:55.270

来自 minidom 的文档：

```
Node.toprettyxml([indent=""[, newl=""[, encoding=""]]])

Return a pretty-printed version of the document. indent specifies the indentation string and defaults to a tabulator; newl specifies the string emitted at the end of each line and defaults to \n. 
```

这就是您从 minidom 获得的所有自定义设置。

尝试插入一个文本节点作为换行符的根同级节点。希望不灭。我建议使用 re 模块中的正则表达式并手动插入。

至于删除 SGML 实体，python 标准库中显然有一个未记录的函数：

```
import HTMLParser
h = HTMLParser.HTMLParser()
unicode_string = h.unescape(string_with_entities) 
```

或者，您可以手动执行此操作，再次使用 re，因为所有命名实体名称和相应的代码点都在`htmlentitydefs`模块内。

# iphone - iOS 应用程序所需的图标

> ID：12315213
> 
> 赞同：3
> 
> 时间：2012-09-07T09:18:32.733
> 
> 标签：iphone, ios, xcode, cocoa-touch, cocoa

您能否指出一个 iOS（iPhone/iPad）应用程序所需的所有不同图标（尺寸 + 名称）的完整列表？（视网膜或非视网膜显示器）

> 例如
> 
> AAAAxAAAA@2x.png 等

我一直在寻找可靠的参考（即使在 SO 上），但我仍然不确定......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T09:30:52.713

下表显示了图标大小。 ![在此处输入图像描述](../Images/48e68a09ad654b0850fcba23d0f363bb.png)

![在此处输入图像描述](../Images/75ba24f12d255a57dce8dc07936ac79b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:30:34.413

这些是您正在寻找的：

[**Mobiledev**](http://www.mobiledev.nl/ios-artwork-what-icons-and-images-are-needed-for-an-ios-app)
[**Tumblr**](http://mrgan.tumblr.com/post/708404794/ios-app-icon-sizes)
[**图标手册**](http://iconhandbook.co.uk/reference/chart/ios/)

我相信通过遵循这些，您将对您的查询有一个完整的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T09:32:56.130

以下是 iOS 图标的名称和大小：

[http://developer.apple.com/library/ios/#qa/qa1686/_index.html](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)

以下是其他图像的名称和大小，例如 iPad 3 视网膜启动图像：

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

编程指南中的应用程序图标：

[http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html%23//apple_ref/doc/uid/TP40007072-CH6-SW1](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html%23//apple_ref/doc/uid/TP40007072-CH6-SW1)

请注意，在撰写本文时，这是正确且完整的。但是这些将来可能会改变！因此，当这篇文章过时时，请改为查看 developer.apple.com 上的人机界面指南。

# javascript - 正则表达式搜索空格后跟一个字符

> ID：12315215
> 
> 赞同：0
> 
> 时间：2012-09-07T09:18:43.367
> 
> 标签：javascript, regex

```
var str = 'The quick brown fox @ ';
var str = str.split(/\s/);
var str = str.join('_'); 
```

此操作的结果是“The_quick_brown_fox_@_”，如果空格后跟一个字符并且该字符不是“@”，我该如何拆分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:21:22.983

使用前瞻：

```
str.split(/\s(?=\w)/); 
```

产量

```
["The", "quick", "brown", "fox @ "] 
```

加入：“The_quick_brown_fox @”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:20:23.937

```
var str = str.split(/\s(?!@)/); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:21:20.220

试试这个正则表达式

```
/\s[^@A-Za-z]/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T09:22:04.557

使用这个正则表达式`(?!@)(?=[^$])`

`空间`

 ``(?!@)` 下一个符号不是@

`(?=[^$])` 忽略最后一个孤独的痉挛

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T09:23:56.960

你可以像这样使用而不使用正则表达式

```
var str = 'The quick brown fox @ ';
var n=str.replace(/ /g,"_"); 
````

# windows-phone-7 - 在 Windows Phone 7 上增加 HttpWebRequest 中查询字符串的最大长度

> ID：12315218
> 
> 赞同：2
> 
> 时间：2012-09-07T09:18:50.323
> 
> 标签：windows-phone-7, httpwebrequest, query-string

我目前正在使用一个 API，它接收通过查询字符串发送给它的所有数据。我必须发送的一些查询字符串相当长，并且请求只是因未知异常而终止，我认为是因为它们超过了最大长度。

理想的解决方案是切换到使用 POST 数据，但由于我不控制 API，我必须等到 API 的所有者可以更新它。

有没有办法增加 Windows Phone 上的最大查询字符串长度来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:37:44.530

我无法找到解决方案，因此我们要求 API 供应商切换到 POST 数据。

作为参考（因为我无法在任何地方找到此信息）Windows Phone 似乎无法向超过 2078 个字符的 URL 发出请求。

# http - 将文件直接下载到我的服务器

> ID：12315223
> 
> 赞同：0
> 
> 时间：2012-09-07T09:19:13.557
> 
> 标签：http, ftp, web-hosting

有没有办法将文件直接下载到我的虚拟主机？假设我想从网站下载视频文件并再次将其上传到我的网站。与其将其下载到我的电脑并上传，有没有办法轻松做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:47:40.413

我现在正在使用这个脚本:)

`

```
if (!isset($_POST['submit'])) die();

// folder to save downloaded files to. must end with slash
$destination_folder = 'downloads/';

$url = $_POST['url'];
$name = $_POST['name'];
$ext = $_POST['extention'];

$newfname = $destination_folder . $name . '.' . $ext;

$file = fopen ($url, "rb");
if ($file) {
  $newf = fopen ($newfname, "wb");

  if ($newf)
  while(!feof($file)) {
    fwrite($newf, fread($file, 1024 * 8 ), 1024 * 8 );
  }
}

if ($file) {
  fclose($file);
}

if ($newf) {
  fclose($newf);
}

echo 'File saved as '. $newfname 
```

?>`

# php - 在 PHP 中重新打开会话

> ID：12315225
> 
> 赞同：20
> 
> 时间：2012-09-07T09:19:17.037
> 
> 标签：php, apache, session, session-cookies

如何在 PHP 中重新打开会话而不会收到标头已发送警告？

在设置我喜欢设置的所有会话变量后，我使用[session_write_close()](http://www.php.net/manual/en/function.session-write-close.php)关闭会话。我这样做是因为只要会话打开，同一个客户端可能只有一个活动连接。但我喜欢有多个并行的。

但是，如果我想稍后设置另一个会话变量，我需要再次使用[session_start()重新打开会话。](http://www.php.net/manual/en/function.session-start.php)这可行，但由于我已经将代码发送到客户端，它会打印“标头已发送”警告。为什么它试图再次设置cookie？cookie 已经设置好了。我唯一需要做的就是获得再次在服务器上写入会话文件的权限。

好吧，我可以压制他们。但是有没有办法重新打开一个会话，它已经用 session_write_close 关闭而不重新发送 Cookie-header？第一个 session_start() 已经正确发送了 Cookie-header。所以第二个只需要让我重新访问存储在 Web 服务器上的会话文件。

```
<?php
session_start();
// setting all the session vars I like to set
session_write_close(); // <-- // To allow parallel requests by the same user, while this script is still running

// Code that takes some time to execute
// It also prints output, so no more cookie headers after this point

@session_start(); // <-- works, but I like to use it without suppressing warnings
$_SESSION['key'] = 'new value I like to store';
session_write_close();
?> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-07T09:37:39.240

```
session_start();
...
session_write_close();
...

ini_set('session.use_only_cookies', false);
ini_set('session.use_cookies', false);
ini_set('session.use_trans_sid', false);
ini_set('session.cache_limiter', null);
session_start(); // second session_start 
```

这将防止 php`php_session_send_cookie()`再次调用。
[看到它工作](http://codepad.viper-7.com/4gz38n)。

尽管**重组脚本似乎仍然是更好的选择**......

* * *

对于 PHP 7.2+，您基本上需要重新实现会话 cookie 以避免错误和警告：

```
ini_set('session.use_only_cookies', false);
ini_set('session.use_cookies', false);
ini_set('session.use_trans_sid', false);
ini_set('session.cache_limiter', null);

if(array_key_exists('PHPSESSID', $_COOKIE))
    session_id($_COOKIE['PHPSESSID']);
else {
    session_start();
    setcookie('PHPSESSID', session_id());
    session_write_close();
}

session_start();
...
session_write_close();
...

session_start(); // second session_start 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T09:22:43.480

**编辑**参见@VolkerK 的解决方案，它比这个更好。

只需在脚本执行时缓冲脚本的输出以防止发送标头，并在最后输出：

```
<?php

  session_start();
  // setting all the session vars I like to set
  session_write_close();

  // Start output buffer
  ob_start();

  // Code that takes some time to execute

  // Do session stuff at the end of the script
  session_start();
  $_SESSION['key'] = 'new value I like to store';
  session_write_close();

  // Send output to client
  ob_end_flush(); 
```

参考：[输出控制功能](http://php.net/manual/en/ref.outcontrol.php)

# java - 用于检查适当代码注释的静态分析工具

> ID：12315226
> 
> 赞同：0
> 
> 时间：2012-09-07T09:19:27.050
> 
> 标签：java, static-analysis, comments

我知道有静态分析工具，例如[FindBugs](http://findbugs.sourceforge.net/)（其中有很多[）](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#Java)，它们静态地进行代码分析，也可以作为持续构建过程的一部分进行调度。这些工具对代码部分进行操作。评论同样重要，如果可以检测到任何差异并将其报告给相关的开发人员（作为构建过程的一部分），那就太好了。

**我正在寻找**一种功能，其中工具还可以标记缺少适当注释的实例。我指的是标准的 javadoc 样式注释，如类、方法等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:23:05.180

根据我发现的一篇文章，**Checkstyle**可以做 Javadoc 验证

[http://www.techrepublic.com/article/three-tools-that-make-java-code-review-painless-and-effective/5031836](http://www.techrepublic.com/article/three-tools-that-make-java-code-review-painless-and-effective/5031836)

> ... 与 PMD 不同，Checkstyle 可以检查 Javadoc 注释；...

# java - JAVA中的字符串数组定义

> ID：12315229
> 
> 赞同：0
> 
> 时间：2012-09-07T09:19:36.190
> 
> 标签：java

是否可以在JAVA中以这种方式定义数组，否则是否有替代方法关闭此定义？

```
private final int CONST_0= 0;
private final int CONST_1= 1;
private final int CONST_2= 2;
private final int CONST_3= 3;
private final String[] CONST_TXTRECORDS = new String[] 
                                          {[CONST_0] = "test0",
                                          {[CONST_1] = "test1",
                                          {[CONST_2] = "test2",
                                          {[CONST_3] = "test3"}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:21:04.760

也许你应该看看枚举。

[http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

您可以使用枚举作为映射键，使用通用 Map 类或专门的 EnumMap，我猜这更有效。

[https://docs.oracle.com/javase/8/docs/api/java/util/EnumMap.html](https://docs.oracle.com/javase/8/docs/api/java/util/EnumMap.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T09:23:22.870

你试图定义的不是一个数组，而是一个关联数组，或者用 Java 来说，一个 Map。

您可能想要使用 a [`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)（或者，正如其他人所写，枚举，取决于您的要求是多么静态）。

请参阅：[**Java 教程 > 集合跟踪 > 地图接口**](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T09:30:38.637

```
public enum MyNum {
    CONST_0(new int[]{0},"test0"),
    CONST_1(new int[]{1},"test1"),
    CONST_2(new int[]{2},"test2"),
    CONST_3(new int[]{3},"test3");

    private String value;
    private int key[] ;

    MyNum(int key[],String value){
        this.value = value;
        this.key = key;
    }

    public String getValue() {
        return value;
    }

    public int[] getKey() {
        return key;
    }
} 
```

# c# - EntityFramework - 实体代理错误

> ID：12315233
> 
> 赞同：22
> 
> 时间：2012-09-07T09:20:01.353
> 
> 标签：c#, entity-framework

我正在使用 Entityframework 开发一个系统，现在已经有超过 12 个月的时间了，该项目一直进展顺利，直到昨天，我现在遇到了一个奇怪的错误，我不知道它为什么会发生。我所做的与我之前所做的没有什么不同，但是一旦我加载有问题的实体并尝试访问任何子实体，我就会收到以下错误：

```
The entity wrapper stored in the proxy does not reference the same proxy 
```

任何人都可以阐明这实际上意味着什么以及会导致这种情况的原因吗？

显示我的代码并没有真正帮助。

这是代码的简化版本：

```
var quote = new QuoteHelper().GetById(orderId);
var updatedQuotes = new Provider().GetExportQuotes(quote.DeparturePoint.Id,quote.DestinationPoint); 
```

访问 DeparturePoint 和 DestinationPoint 但 Quote 正确加载时发生错误，并且所有属性都已加载。

实体 Quote 看起来有点像这样：

```
public class Quote : BaseQuote, ICloneable
{
     public Guid DeparturePointId { get; set; }
     public virtual LocationPoint DeparturePoint{ get; set; }

     public Guid DestinationPointId { get; set; }
     public virtual LocationPoint DestinationPoint{ get; set; }
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-11T16:19:48.363

当我尝试在我的实体上实现 ICloneable 并使用 MemberwiseClone 克隆它时，这也发生在我身上。当我使用我自己实例化的实体时效果很好。但是，当我使用它来克隆已使用 EF 加载的实体时，每当我尝试将其添加到 DbSet（或其他各种部分）时，都会出现此错误。

经过一番挖掘，我发现当你克隆一个 EF 加载的实体时，你也在克隆代理类。代理类携带的一件事是对给定实体的包装器的引用。因为浅拷贝只复制对包装器的引用，所以您突然有了两个具有相同包装器实例的实体。

此时，EF 认为您已经为您的实体创建或借用了不同的代理类，它认为这是为了恶作剧并阻止您。

**编辑**

这是我为解决此问题而创建的一个片段。请注意，这将完成仅复制 EF 属性的公平工作，但这并不完美。请注意，如果您还有必须复制的私有字段，则需要对其进行修改，但您明白了。

```
 /// <summary>
    /// Makes a shallow copy of an entity object. This works much like a MemberwiseClone
    /// but directly instantiates a new object and copies only properties that work with
    /// EF and don't have the NotMappedAttribute.
    /// </summary>
    /// <typeparam name="TEntity">The entity type.</typeparam>
    /// <param name="source">The source entity.</param>
    public static TEntity ShallowCopyEntity<TEntity>(TEntity source) where TEntity : class, new()
    {

        // Get properties from EF that are read/write and not marked witht he NotMappedAttribute
        var sourceProperties = typeof(TEntity)
                                .GetProperties()
                                .Where(p => p.CanRead && p.CanWrite &&
                                            p.GetCustomAttributes(typeof(System.ComponentModel.DataAnnotations.NotMappedAttribute), true).Length == 0);
        var newObj = new TEntity();

        foreach (var property in sourceProperties)
        {

            // Copy value
            property.SetValue(newObj, property.GetValue(source, null), null);

        }

        return newObj;

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-02T22:01:42.203

上述解决方案可能会出现错误“**已检测到关系 y 的角色 x 的冲突更改**”。我使用这种方法实现了这个错误；

```
 public virtual TEntity DetachEntity(TEntity entityToDetach)
    {
        if (entityToDetach != null)
            context.Entry(entityToDetach).State = EntityState.Detached;
        context.SaveChanges();
        return entityToDetach;
    } 
```

我希望它也对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-09T22:33:18.860

我是这样解决的。

```
using (var ctx = new MyContext())
      {
         ctx.Configuration.ProxyCreationEnabled = false;

         return ctx.Deferrals.AsNoTracking().Where(r => 
         r.DeferralID.Equals(deferralID)).FirstOrDefault();
      } 
```

# sql - 截断的 LISTAGG 字符串

> ID：12315243
> 
> 赞同：10
> 
> 时间：2012-09-07T09:20:24.293
> 
> 标签：sql, oracle, oracle11g, aggregate-functions, oracle11gr2

我正在使用 Oracle 11g r2，我需要连接多行中的字符串 (VARCHAR2, 300)。我正在使用`LISTAGG`which 在连接的字符串达到限制之前效果很好。那时我收到一个`ORA-01489: result of string concatenation is too long`.

最后，我只想要连接字符串的前 4000 个字符。我如何到达那里并不重要。我会接受低效的解决方案。

这是我的查询：

```
SELECT LISTAGG(T.NAME, ' ') WITHIN GROUP (ORDER BY NULL)
FROM T 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-26T10:15:28.420

此代码适用于任何长度的数据，速度足够快

```
SELECT REPLACE(
         REPLACE(
           XMLAGG(
             XMLELEMENT("A",T.NAME)
           ORDER BY 1).getClobVal(),
         '<A>',''),
       '</A>','[delimiter]')
FROM T 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T10:35:47.170

您可以使用内置（但已弃用）的 STRAGG 函数

```
 select sys.stragg(distinct name) from t 
```

（请注意，似乎需要 distinct 以避免重复）

或定义您自己的聚合函数/类型：

```
CREATE OR REPLACE TYPE "STRING_AGG_TYPE" as object
(
  total varchar2(4000),

  static function ODCIAggregateInitialize(sctx IN OUT string_agg_type) return number,

  member function ODCIAggregateIterate(self  IN OUT string_agg_type,
                                       value IN varchar2) return number,

  member function ODCIAggregateTerminate(self        IN string_agg_type,
                                         returnValue OUT varchar2,
                                         flags       IN number) return number,

  member function ODCIAggregateMerge(self IN OUT string_agg_type,
                                     ctx2 IN string_agg_type) return number
);

CREATE OR REPLACE TYPE BODY "STRING_AGG_TYPE" is

  static function ODCIAggregateInitialize(sctx IN OUT string_agg_type) return number is
  begin
    sctx := string_agg_type(null);
    return ODCIConst.Success;
  end;

  member function ODCIAggregateIterate(self  IN OUT string_agg_type,
                                       value IN varchar2) return number is
  begin
    -- prevent buffer overflow for more than 4,000 characters
    if nvl(length(self.total),
           0) + nvl(length(value),
                    0) < 4000 then
      self.total := self.total || ';' || value;
    end if;
    return ODCIConst.Success;
  end;

  member function ODCIAggregateTerminate(self        IN string_agg_type,
                                         returnValue OUT varchar2,
                                         flags       IN number) return number is
  begin
    returnValue := ltrim(self.total,
                         ';');
    return ODCIConst.Success;
  end;

  member function ODCIAggregateMerge(self IN OUT string_agg_type,
                                     ctx2 IN string_agg_type) return number is
  begin
    self.total := self.total || ctx2.total;
    return ODCIConst.Success;
  end;

end;

CREATE OR REPLACE FUNCTION stragg(input varchar2 )
   RETURN varchar2
   PARALLEL_ENABLE AGGREGATE USING string_agg_type; 
```

并像这样使用它：

```
select STRAGG(name) from t 
```

我相信这种方法最初是由 Tom Kyte 提出的（至少，我是从那里得到它的 - [Asktom: StringAgg](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:229614022562)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T09:26:09.110

也许它会帮助你：

```
substr(string, 1, 4000) 
```

编辑：

或尝试

```
SELECT [column], rtrim(
         xmlserialize(content 
           extract(
             xmlagg(xmlelement("n", (T.NAME||',') order by [column])
           , '//text()'
           )
         )
       , ','
       ) as list
FROM [table]
GROUP BY [column]
; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T10:50:14.203

这是 LISTAGG 函数的缺点，它不处理由于 LISTAGG 分析函数生成的字符串的限制。为此，您需要取长度的累积总和，并在此基础上进行限制。

```
worked out example on emp table 

select listagg(ename,' ')within group (order by null)
from
(
select ename,
         sum( length( ename ) + 1) 
            over ( order by ename rows between unbounded preceding and current row) length
 from emp

 )where lngth <= 4000
 ; 
```

但这不会给出完美的结果，因为如果您查看内部查询，它将生成一个带有 ename 及其长度的列，如下所示

```
 ename      lenght 
===================
gaurav        6
rohan         11
:
:
garima        3996
anshoo        4002
===================== 
```

所以上面的函数会给你结果直到`garima`....not until `ansh`，因为 listagg 是基于内部查询的长度列。

# java - 多线程性能

> ID：12315245
> 
> 赞同：3
> 
> 时间：2012-09-07T09:20:31.773
> 
> 标签：java, mysql, multithreading, performance

我正在编写一个在 UDP 上侦听传入消息的应用程序。我的主线程接收来自网络的消息后的消息，并将它们中的每一个传递给一个新线程以使用执行程序进行处理。

每个处理线程对其负责的消息进行所需的处理，并将其添加到`LinkedBlockingQueue`所有处理线程之间共享的消息中。

然后，我有一个数据库工作线程，它按 10000 条消息块排空队列，并将消息块插入数据库中。

由于消息的到达率可能很高（每秒超过20000条消息），我认为使用`LOAD DATA INFILE`效率更高。因此，该数据库工作线程如前所述排空队列，使用 CSV 格式创建包含所有消息的临时文件，并使用另一个执行程序将创建的文件传递给另一个线程。这个新线程`LOAD DATA INFILE`使用`JDBC`.

在测试我的应用程序后，我认为性能不太好，我正在寻找提高多线程级别和数据库访问级别性能的方法。

我确切地说我使用 MySQL 作为 DBMS。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:24:27.897

你需要确定为什么你的表现很差。

例如，如果您将数据顺序写入数据库，这很可能是您的瓶颈，那么您很可能不需要多个线程。在不需要时使用多线程的问题在于它增加了复杂性，这本身就是一种开销，而且它可能比使用单线程慢。

如果您只将数据加载到数据库中，我会尝试看看性能如何。即写入文件并丢弃它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:25:57.613

没有任何分析器输出很难判断，但我（未经）教育的猜测是瓶颈是您正在将更改写入硬盘驱动器上的文件，然后提示您的数据库读取并解析该文件。存储访问总是比内存访问慢得多。因此，这很可能比仅从内存中向数据库提供查询要慢得多。

但这只是猜测。也许瓶颈在您或我从未预料到的其他地方。当您真的想知道应用程序的哪个部分占用了多少 CPU 时间时，您应该使用 Profiler4j 之类的分析器来分析您的程序。

# android - 在相机预览 onResume() 问题

> ID：12315247
> 
> 赞同：3
> 
> 时间：2012-09-07T09:20:52.470
> 
> 标签：android, android-camera, surfaceview

在这里，我在预览期间为 CameraPreview 开发了一个相机应用程序，我打开 IntentChooser 对话框进行邮件发送，但问题是当我没有选择任何选项并按下设备的后退按钮时，我的 CameraPreview 显示黑屏但在记录一些行打印。没有任何错误发生，但预览显示黑屏。

```
@Override
    protected void onResume() 
    {   
        try
        {
            super.onResume();

            System.out.println("==== Actvity RESUME ====");     

            previewing = true;

            autoFocusHandler = new Handler();
            mCamera = Camera.open();

            /* Instance barcode scanner */
            scanner = new ImageScanner();
            scanner.setConfig(0, Config.X_DENSITY, 3);
            scanner.setConfig(0, Config.Y_DENSITY, 3);

            mPreview = new CameraPreview(this, mCamera, previewCb, autoFocusCB);
            preview = (FrameLayout)findViewById(R.id.cameraPreview);
            preview.addView(mPreview);  

        }
        catch (Exception ex) 
        {
            ex.printStackTrace();
        }
    }

public void onPause() 
{
    try
    {
        super.onPause();

        System.out.println("==== Actvity PAUSE ====");

        releaseCamera();
    }
    catch (Exception ex) 
    {
        ex.printStackTrace();
    }
}

@Override
protected void onDestroy() 
{
    // TODO Auto-generated method stub
    super.onDestroy();

    System.out.println("==== Actvity DESTROY ====");

    releaseCamera();
    //mCamera.release();
}

private void releaseCamera() 
{
    if (mCamera != null) 
    {
        previewing = false;
        mCamera.setPreviewCallback(null);
        mCamera.release();
        mCamera = null;
    }
} 
```

在这里，我的表面 ID 被破坏了两次。

请帮助我，在此先感谢。

# oop - 我们可以用类实现同样的事情，那么为什么接口呢？

> ID：12315249
> 
> 赞同：1
> 
> 时间：2012-09-07T09:20:54.413
> 
> 标签：oop, interface

我知道接口不能包含方法体，我们可以在另一个类中实现并且可以编写我们的自定义逻辑。但是同样的事情也可以通过对类使用继承来实现。那么为什么界面会出现。如果我们想覆盖任何方法定义，我们可以在类继承中做，并可以编写我们的自定义代码。接口的确切用途是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T09:25:31.940

一个原因是一个类可以实现多个接口，但只能从一个类派生。

另一个是，层次上完全不相关的类可以实现相同的接口。在没有接口的静态类型语言中，人们经常可以观察到非常深的继承层次结构，这些继承层次结构只是因为它们不能简单地实现接口并且必须强制派生不相关的类。这往往会违反“Is a”——继承原则。这样的实现也倾向于拖拽未使用的代码，只是因为在继承树的下方需要它。

tl;dr - 可以做到，但结果往往很丑陋且无法维护

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:49:12.837

*   Interfaces - The object can do this.
*   Class - This is how the object does this.

Also interfaces can be used to avoid the [diamond problem](http://en.wikipedia.org/wiki/Multiple_inheritance)

# http - 方法未实现错误 Jboss4 - “multipart/form-data”不支持

> ID：12315250
> 
> 赞同：0
> 
> 时间：2012-09-07T09:20:59.610
> 
> 标签：http, servlets, post, multipartform-data, jboss-4.0.x

我一直无法从 SO 内部获得解决方案，因此发布。

我有一个示例 JSP 页面，该页面发布到实现和图像上传工具的供应商产品。

```
<script type="text/javascript">
function upload(){
document.forms[0].enctype="multipart/form-data"
document.forms[0].action="/upload"
document.forms[0].submit()
}
</script> 
```

在监视请求的同时发布表单后，我收到以下响应，并且 servlet 默认处理内容类型 =`"application/x-www-form-urlencoded"`

这些是请求标头：

```
POST /upload HTTP/1.1
Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/x-shockwave-flash, application/x-ms-application, application/x-ms-xbap, application/vnd.ms-xpsdocument, application/xaml+xml, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*
Referer: http://localhost:9001/ansHealthConsole/htmljsp/common/reattach_file.jsp?JOBNAME=RESCAN_IMAGES&RFCNAME=READ&SEQNUM=100041767&SESSIONID=62767&SECURETXNID=7309450930646918658&
Accept-Language: en-us
Content-Type: multipart/form-data; boundary=---------------------------7dc3c0d25050c
UA-CPU: x86
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; InfoPath.3; .NET4.0C; .NET4.0E)
Host: localhost:9001
Content-Length: 71671
Connection: Keep-Alive
Cache-Control: no-cache 
```

响应头如下：

```
HTTP/1.1 501 Not Implemented
X-Powered-By: Servlet 2.4; Tomcat-5.0.28/JBoss-4.0.1 (build: CVSTag=JBoss_4_0_1 date=200412230944)
Content-Type: text/html;charset=utf-8
Content-Length: 989
Date: Fri, 07 Sep 2012 06:13:34 GMT
Server: Apache-Coyote/1.1
Connection: close 
```

我无法调试`"multipart/--"`Jboss 4 的 Tomcat 是否不支持 或者我有其他错误。

# objective-c - 如何在 Mac OS 上使用 libtool 创建 .a 文件（静态库）？

> ID：12315253
> 
> 赞同：5
> 
> 时间：2012-09-07T09:21:07.300
> 
> 标签：objective-c, macos, compilation, static-libraries, libtool

当谈到使用终端手动构建库时，不幸的是我没有太多经验，我在这里有点卡住了。

我已经下载了一个带有makefile等的objective-c库。

我可以看到该文件夹​​还包含一个名为“libtool”的可执行文件，我进行了一些搜索，我想这是我必须用来构建必要的**.a**文件的程序？不幸的是，我真的找不到任何有用的文章似乎有效。

库的文件夹包含一些**.sh**文件、**.pc**文件和一些**.la**文件，但我有点不确定我必须使用哪些作为 libtool 程序的输入才能将它们编译成**.a**文件。

所以我的问题是您必须将哪些文件输入*libtool*才能将它们编译成必要的*.a*文件？您究竟使用什么命令来完成此任务？

谢谢大家的时间:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T09:29:56.443

首先对静态库做一点介绍：

Unix 环境（如 Mac OSX 和 Linux）中的静态库实际上只是由[`ar`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/ar.1.html)命令行程序创建的目标文件的存档。

这就是`.a`扩展名的含义：存档。

要创建包含一些目标文件的静态库，您可以使用如下命令：

```
ar crv libmy_library.a objectfile1.o objectfile2.o 
```

* * *

至于您的实际问题，`libtool`应该从makefile中自动调用，创建库，即以.结尾的文件`.la`。但是，这不是真正的库，真正的库在隐藏目录中。你可以通过做例如找到它

```
find . -name '*.a' 
```

但是就像我说的那样，makefile*应该*已经处理了所有事情，包括在您执行时将正确的库安装在正确的位置，例如`make install`.

有关信息`libtool`，请参阅[此站点](http://www.gnu.org/software/libtool/)。

# jquery - 创建基于会话的cookie，jquery

> ID：12315255
> 
> 赞同：4
> 
> 时间：2012-09-07T09:21:12.640
> 
> 标签：jquery

以下代码在页面加载时显示弹出消息并创建一个 cookie，这样当用户返回页面时，他们将不会看到弹出消息一次。cookie 的寿命是基于时间的。我想修改此代码，以便 cookie 的生命周期基于用户会话或一天。任何指导或代码片段都会很棒。谢谢。

代码演示链接：[http ://www.queness.com/post/77/simple-jquery-modal-window-tutorial](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)

```
<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD> 
<META content="text/html; charset=windows-1252" http-equiv=Content-Type>
<SCRIPT type=text/javascript src="jquery-latest.pack.js"></SCRIPT>

<SCRIPT>

$(document).ready(function() {  

    //if the cookie hasLaunch is not set, then show the modal window
    if (!readCookie('hasLaunch')) {
        //launch it
        launchWindow('#dialog');        
        //then set the cookie, so next time the modal won't be displaying again.
        createCookie('hasLaunch', 1, 365);
    }

    //if close button is clicked
    $('.window #close').click(function () {
        $('#mask').hide();
        $('.window').hide();
    });     

    //if mask is clicked
    $('#mask').click(function () {
        $(this).hide();
        $('.window').hide();
    });         

    $(window).resize(function () {

        var box = $('#boxes .window');

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        box.css('top',  winH/2 - box.height()/2);
        box.css('left', winW/2 - box.width()/2);

    }); 

});

function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function launchWindow(id) {

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set heigth and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //transition effect     
        $('#mask').fadeIn(1000);    
        $('#mask').fadeTo("slow",0.8);  

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top',  winH/2-$(id).height());
        $(id).css('left', winW/2-$(id).width()/2);

        //transition effect
        $(id).fadeIn(2000); 

}

</SCRIPT>

<STYLE>

body {
    FONT-FAMILY: verdana; FONT-SIZE: 15px
}
A {
    COLOR: #333; TEXT-DECORATION: none
}
A:hover {
    COLOR: #ccc; TEXT-DECORATION: none
}
#mask {
    Z-INDEX: 9000; POSITION: absolute; BACKGROUND-COLOR: #000; DISPLAY: none; TOP: 0px; LEFT: 0px
}
#boxes .window {
    Z-INDEX: 9999; POSITION: fixed; PADDING-BOTTOM: 20px; PADDING-LEFT: 20px; WIDTH: 640px; PADDING-RIGHT: 20px; DISPLAY: none; HEIGHT: 385px; PADDING-TOP: 20px
}
#boxes #dialog {
    PADDING-BOTTOM: 10px; BACKGROUND-COLOR: #ffffff; PADDING-LEFT: 10px; WIDTH: 640px; PADDING-RIGHT: 10px; HEIGHT: 385px; PADDING-TOP: 10px
}

.redbox {
    color: #F00; font-weight: bold;
}
.bold {
    font-weight: bold;
}
</STYLE>

<div id=boxes>
  <div id=dialog class=window><span class="redbox"> pop up message <A   
href="#" class="bold"> Ok </a> </div>

<div id=mask>
</div></div>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:24:54.010

会话 cookie 是没有过期时间的 cookie，因此请更改：

```
createCookie('hasLaunch', 1, 365); 
```

到：

```
createCookie('hasLaunch', 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:28:41.997

最好使用 HTML5 会话存储功能，因为某些用户可能会禁用 cookie。

你可以试试这样。

```
var isFirst = sessionStorage.getItem("FIRSTVISIT");

if(isFirst == null || isFirst == 'undefined') {
   sessionStorage.setItem("FIRSTVISIT", "YES");
   launchWindow('#dialog');
} 
```

# sql-server - 使用 SQL Server 捕获 Azure VM 映像

> ID：12315256
> 
> 赞同：0
> 
> 时间：2012-09-07T09:21:16.773
> 
> 标签：sql-server, image, azure, capture

我已按照这些步骤[https://www.windowsazure.com/en-us/manage/windows/how-to-guides/capture-an-image/](https://www.windowsazure.com/en-us/manage/windows/how-to-guides/capture-an-image/)捕获 VM 的映像。如前所述，使用了 sysprep，我能够复制 VM。问题是当我 rdp 进入机器时，我无法连接到 SLQ Server。Windows 身份验证登录失败。通常这意味着 SQL Server 在另一个域上，但在这种情况下，错误是在本地计算机上。所以我的问题是，如何在 Windows Azure 中使用 SQL Server 捕获 VM 的映像，并确保我至少在部署时可以使用 Windows 身份验证登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:35:18.697

我不认为你可以，我认为你需要在 sysprep 之前进行 SQL Server 身份验证（我还没有测试过），据我所知，这与本地相同，而不是 Azure 功能本身......

如果在 Windows 上运行 sysprep，则不应期望 SQL Server 中配置的当前主体将继续工作。SQL Server 通过其 SID 引用 Windows 帐户，在 Windows 上运行 sysprep 将为 Windows 帐户创建一组新的 SID。因此，您必须按照您的发现将它们重新添加到 SQL Server。

# ios - UIImagePickerController 禁用 iPhone 4S 人脸检测 (iOS 5.1)

> ID：12315260
> 
> 赞同：3
> 
> 时间：2012-09-07T09:21:29.583
> 
> 标签：ios, cocoa-touch, uiimagepickercontroller, face-detection

我目前正在开发一个 iPhone 应用程序，该应用程序使用带有自定义叠加层的 UIImagePickerController 来拍照。

不幸的是，我无法直接使用 iPhone 4S，但一些测试人员报告说相机选择器在面部周围绘制了一个绿色边框，就像这样：[http ://cdn.iphonehacks.com/wp-content/uploads/2012/03 /camera_faces.jpg](http://cdn.iphonehacks.com/wp-content/uploads/2012/03/camera_faces.jpg)

由于这个应用程序的性质，这是不可取的。

对 UIImagePickerController 文档的彻底搜索并没有发现任何东西，同样，我在这里可以找到的与面部检测相关的所有内容都提供了有关如何使用 CIDetector 或类似内容的说明。

如何在我的 UIImagePickerController 中禁用人脸检测？

这是我的 UIImagePickerController 的初始化代码：

```
UIImagePickerController *cameraPicker = [[UIImagePickerController alloc] init];

[cameraPicker setSourceType:UIImagePickerControllerSourceTypeCamera];
[cameraPicker setCameraDevice:UIImagePickerControllerCameraDeviceRear];
if ([UIImagePickerController isFlashAvailableForCameraDevice:cameraPicker.cameraDevice]){
    [cameraPicker setCameraFlashMode:UIImagePickerControllerCameraFlashModeOn];
}
[cameraPicker setShowsCameraControls:NO];
[cameraPicker setCameraOverlayView:cameraOverlayView];

cameraPicker.delegate = self;
[self presentModalViewController:cameraPicker animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T11:08:15.293

试试这个 -->

假设我们有一个 UIViewController 命名为 - RecordVideoViewController

实现**——RecordVideoViewController.h**

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>
#import <MobileCoreServices/UTCoreTypes.h>
#import <AssetsLibrary/AssetsLibrary.h>
@interface RecordVideoViewController : UIViewController
- (IBAction)recordAndPlay:(id)sender;

-(BOOL)startCameraControllerFromViewController:(UIViewController*)controllerusingDelegate:
(id)delegate;   

-(void)video:(NSString *)videoPath didFinishSavingWithError:(NSError *)error
contextInfo(void*)contextInfo; 
@end 
```

实现**——RecordVideoViewController.m**

```
- (IBAction)recordAndPlay:(id)sender {

[self startCameraControllerFromViewController:self usingDelegate:self];

}

-(BOOL)startCameraControllerFromViewController:(UIViewController*)controller
                             usingDelegate:(id )delegate 
{
// 1 - Validattions
if (([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera] ==
NO)  
    || (delegate == nil)
    || (controller == nil)) {
    return NO;
}
// 2 - Get image picker
UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;
// Displays a control that allows the user to choose movie capture
cameraUI.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie, nil];
// Hides the controls for moving & scaling pictures, or for
// trimming movies. To instead show the controls, use YES.
cameraUI.allowsEditing = NO;
cameraUI.delegate = delegate;
// 3 - Display image picker
[controller presentViewController:cameraUI animated:YES completion:nil];
 return YES;
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:
 (NSDictionary *)info {
 NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
 [self dismissViewControllerAnimated:YES completion:nil];
 // Handle a movie capture
 if (CFStringCompare ((__bridge_retained CFStringRef) mediaType, kUTTypeMovie, 0) == 
 kCFCompareEqualTo) {
     NSString *moviePath = [[info objectForKey:UIImagePickerControllerMediaURL] path];

     if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(moviePath)) {
         UISaveVideoAtPathToSavedPhotosAlbum(moviePath,
         self,@selector(video:didFinishSavingWithError:contextInfo:),nil); 
     }
   }
 }

 -(void)video:(NSString*)videoPath didFinishSavingWithError:(NSError*)error contextInfo:
 (void*)contextInfo {  
   if (error) {
      UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Video Saving
     Failed" 
      delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
     [alert show];
   } else {
     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Video Saved" message:@"Saved To
     Photo Album" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];  
    [alert show];
 }
} 
```

实现此代码，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:33:00.480

看看这篇文章。这里有一些提示，但仍然无法在 Apple 的有关此 API 的文档之外找到太多信息。 [正确使用 CIDetectorTracking](https://stackoverflow.com/questions/13475387/proper-usage-of-cidetectortracking)

# wso2 - WSO2 ESB汉字乱码？

> ID：12315263
> 
> 赞同：1
> 
> 时间：2012-09-07T09:21:36.413
> 
> 标签：wso2, wso2esb

我有个问题。我的回复信息包含中文字符。所以在控制台和后台，所有的消息都是乱码。

```
My log:
Response message=== = <message><header><TransactionID>1</TransactionID><Timestamp>2012-09-07 17:06:55</Timestamp><OpCode>IAG.BOSS_SYNC_USER</OpCode><MsgType>RESP</MsgType><ReturnCode>3095</ReturnCode><ErrorMessage>智能卡已被其他用户使用&lt;/ErrorMessage></header><body /></message>

backstage:
Response message=== = <″凡琚<header><T″凡琚onID>1</TransactionID><Timestamp>2012-09朵荤ㄦ蜂娇绋</ErrorMessage></header><body /></message> 
```

有人可以告诉我如何解决这个问题吗？此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-01T14:47:00.477

在 eclipse.ini 文件中添加以下行：

```
-Dfile.encoding=UTF8 
```

之后，重新启动 Eclipse。

# windows-8 - Windows 8/Windows Server 2012 中基于功能的安全性

> ID：12315268
> 
> 赞同：2
> 
> 时间：2012-09-07T09:22:02.750
> 
> 标签：windows-8, sandbox

我想评估 Windows 8/Windows Server 2012 中的新沙盒机制。我在 MSDN 网站上搜索了任何资源，但文档非常稀缺。与 FreeBSD Capsicum 的文档相比，微软提供的那一份简直是无法使用。

我们应该如何构建强大的沙盒应用程序？沙盒 API 是否仅适用于 Metro 风格的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:48:24.210

功能的简要说明：您可以在用户的​​计算机上执行某些潜在敏感的操作，例如访问图片库或使用网络摄像头。如果一个应用想要做这些事情，开发者必须在应用的清单中声明一个功能。然后，当用户从 Windows 应用商店下载该应用程序时，他们可以清楚地看到该应用程序是否正在使用任何此功能。[App 功能声明](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx)中提供了更多信息和所有功能的列表。

[关于沙盒，http: //msdn.microsoft.com/en-us/library/ie/hh673561](http://msdn.microsoft.com/en-us/library/ie/hh673561(v=vs.85).aspx) (v=vs.85).aspx有一些信息。是的，Metro 风格的应用程序以桌面应用程序没有的方式被沙盒化。

[在Secure development of Metro style apps with HTML5](http://www.microsoft.com/en-us/download/details.aspx?id=27408)中有一份白皮书讨论了使用 HTML5 构建的 Windows Store 应用程序的安全性。还记录了一些[常见的安全场景](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh464946.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:49:55.350

我不确定您所说的“沙盒 API”是什么意思。所有“metro”（Windows 8 UI 应用程序）都是沙盒化的。我不知道以相同方式沙箱桌面应用程序的任何方式。见[这里](http://www.theverge.com/2012/5/17/3026590/microsoft-windows-8-developers-windows-store-sandboxing)。

> Metro 应用程序是非常严格的沙盒化应用程序，提交到 Windows 应用商店的应用程序需要声明它们使用的许多类型的功能——这与 Google Play 的权限列表不同。
> 
> . . .
> 
> Windows 8 具有用于 Metro 风格应用程序的特定 SDK。. .

# objective-c - 为什么我用“CGMutablePathRef”方法得到相反的掩码

> ID：12315270
> 
> 赞同：1
> 
> 时间：2012-09-07T09:22:04.717
> 
> 标签：objective-c, ios, path, core-graphics, layer

我画一个视图。视图`s frame = (0,0,44,44) and the view`的背景颜色为黑色。我想添加一个蒙版使视图看起来像这样：蒙版是视图中间的一个小圆圈。但我得到了相反的结果，只有视图的中间没有被屏蔽。像这样的错误结果![在此处输入图像描述](../Images/6971e48cf21678aad71496c9503b3f35.png)

我的代码是：

```
aView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 44, 44)];

[aView.layer setBackgroundColor:[[UIColor blackColor] CGColor]];

CAShapeLayer *mask = [[CAShapeLayer alloc] init];
mask.frame = aView.bounds;
CGMutablePathRef p2 = CGPathCreateMutable();
CGPathAddEllipseInRect(p2, NULL, CGRectInset(mask.bounds, 10, 10));

mask.path = p2;
aView.layer.mask = mask;

CGPathRelease(p2);

[self addSubview:aView]; 
```

代码有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:25:02.287

首先，在遮罩路径中添加一个矩形。

其次，将`fillRule`形状层的属性设置为`kCAFillRuleEvenOdd`，使中心部分留空。

```
aView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 44, 44)];

[aView.layer setBackgroundColor:[[UIColor blackColor] CGColor]];

CAShapeLayer *mask = [[CAShapeLayer alloc] init];
mask.fillRule = kCAFillRuleEvenOdd;
mask.frame = aView.bounds;
CGMutablePathRef p2 = CGPathCreateMutable();
CGPathAddRect(p2, &CGAffineTransformIdentity, mask.bounds);
CGPathCloseSubpath(p2);
CGPathAddEllipseInRect(p2, NULL, CGRectInset(mask.bounds, 10, 10));

mask.path = p2;
aView.layer.mask = mask;

CGPathRelease(p2); 
```

# java - 如何在 GWT 弹出面板中将焦点设置在 TextBox 上？

> ID：12315273
> 
> 赞同：1
> 
> 时间：2012-09-07T09:22:22.840
> 
> 标签：java, gwt, popup, focus, setfocus

我想将焦点设置在弹出面板中的文本框上。我有登录弹出面板，其中包含用户名和密码的文本框，那么当弹出加载/显示时如何设置用户名的焦点？我正在使用 GWT/Java。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T14:07:28.490

在弹出面板上调用 .show() 后，使用以下命令：

```
Scheduler.get().scheduleDeferred(new ScheduledCommand() {

    @Override
    public void execute() {
        myTextField.setFocus();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:36:25.923

你是说文本框吗？标准 GWT 库中没有 TextField。

```
textField.setFocus(true); 
```

可能重复，此线程可能会回答您的问题：[无法在 GWT 应用程序中将焦点设置在 TextBox 上](https://stackoverflow.com/q/5944612/1257372)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-08T07:35:58.937

如果你初始化你的领域，你可以使用

```
textField.setFocus(true); 
```

但更可取的是这种方式

```
FocusSetter.setFocus(textFocus, true); 
```

因为你不应该控制字段初始化与否

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-07T09:28:01.170

尝试这个

```
textField.requestFocusInWindow(); 
```

# android - Android Binder 及其可能性

> ID：12315276
> 
> 赞同：0
> 
> 时间：2012-09-07T09:22:28.923
> 
> 标签：android, process, ipc, rpc, android-binder

我有一个与 Android 的 Binder 组件有关的问题。当我在模拟器上使用 Android 应用程序时，可以对正在运行的本地服务器（用 java 编写）提供的服务进行远程过程调用。与 Binder 的进程间通信是否也适用于非 Android 应用程序？

或者你知道用 Android 做 RPC 的其他可能性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:18:10.707

android中有几种IPC机制：[在这里](https://stackoverflow.com/questions/5740324/what-are-the-ipc-mechanisms-in-android)你可以找到关于它们的信息。此外，[在这里](https://stackoverflow.com/questions/11428730/can-we-use-system-ipc-in-android-ndk-code/11429558#11429558)我描述了您可以在 Android 原生应用程序中使用的 Unix 的 IPC 机制。

# actionscript-3 - Away3D 无法加载 AWD

> ID：12315277
> 
> 赞同：2
> 
> 时间：2012-09-07T09:22:31.953
> 
> 标签：actionscript-3, flash, away3d

我已经按照这个链接的教程：http: [//www.adobe.com/devnet/flashplayer/articles/creating-games-away3d.html](http://www.adobe.com/devnet/flashplayer/articles/creating-games-away3d.html)

但是代码似乎有问题，我什至无法加载 3D 花瓶。

这是代码：

```
package 
{
    import away3d.containers.View3D;
    import away3d.events.LoaderEvent;
    import away3d.loaders.Loader3D;
    import away3d.loaders.parsers.Parsers;

    import flash.display.Sprite;
    import flash.events.Event;
    import flash.net.URLRequest;

    public class Main extends Sprite
    {
        private var _view:View3D;
        private var _loader:Loader3D;

        public function Main()
        {
            _view = new View3D();
            _view.backgroundColor = 0x666666;
            _view.antiAlias = 4;

            this.addChild(_view);
            this.addEventListener(Event.ENTER_FRAME, onEnterFrame);

            Parsers.enableAllBundled();

            _loader = new Loader3D();
            _loader.addEventListener(LoaderEvent.RESOURCE_COMPLETE, onResourceComplete);
            _loader.addEventListener(LoaderEvent.LOAD_ERROR, onLoadError);
            _loader.load( new URLRequest('vase.awd') );
        }

        private function onResourceComplete(ev:LoaderEvent):void
        {
            _loader.removeEventListener(LoaderEvent.RESOURCE_COMPLETE, onResourceComplete);
            _loader.removeEventListener(LoaderEvent.LOAD_ERROR, onLoadError);
            _view.scene.addChild(_loader);
        }

        private function onLoadError(ev:LoaderEvent):void
        {
            trace('Could not find', ev.url);
            _loader.removeEventListener(LoaderEvent.RESOURCE_COMPLETE, onResourceComplete);
            _loader.removeEventListener(LoaderEvent.LOAD_ERROR, onLoadError);
            _loader = null;
        }

        private function onEnterFrame(ev:Event):void
        {
            _loader.rotationY = stage.mouseX - stage.stageWidth / 2;
            _view.camera.y = 3 * (stage.mouseY - stage.stageHeight/2);
            _view.camera.lookAt(_loader.position);
            _view.render();
        }
    }
} 
```

知道错误在哪里吗？或者是否有任何教程教如何将 AWD 文件加载到闪存中？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:42:11.347

我建议您使用 AssetLibrary 来加载您的模型，它非常简单且易于处理模型包含的所有内容，

```
AssetLibrary.addEventListener( AssetEvent.ASSET_COMPLETE, onAssetComplete );
AssetLibrary.addEventListener( LoaderEvent.RESOURCE_COMPLETE, onResourceComplete );
AssetLibrary.addEventListener( LoaderEvent.LOAD_ERROR, onLoadError ); 
```

详细的例子检查[这个](http://away3d.com/example/3ds_Max_workflow)

希望对你有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T03:18:11.927

删除“Parsers.enableAllBundled();” 试试这个： AssetLibrary.enableParser(AWD1Parser) 或 AssetLibrary.enableParser(AWD2Parser) 或 var aWD2Parser:AWD2Parser=new AWD2Parser(); _loader.load(new URLRequest('vase.awd')，null,"vase.awd",aWD2Parser);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T18:31:00.963

adobe 与他们的教程一起使用的花瓶 AWD 文件不再有效。AWD 规格发生了变化，adobe 从未更新过他们的教程。如果您尝试加载它，通常会收到文件结束错误。

# android - 在主项目清单文件中定义库活动？

> ID：12315279
> 
> 赞同：0
> 
> 时间：2012-09-07T09:22:39.117
> 
> 标签：android, android-manifest

我有一个库项目，我在其中定义了其他两个应用程序共有的活动现在我想定义登录活动，这对我的库项目中的两个应用程序都是通用的，以避免重复代码，并且登录活动将是两个应用程序的启动器活动，所以我的问题是如何在我的主应用程序清单中定义其他（库）项目的启动器活动？

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:42:43.917

您可以在清单中添加库的活动，就像添加任何其他包的活动一样。

```
 <activity android:name=".someActivity" >
</activity>
<activity android:name="com.android.package1.VideoPlayer" >
</activity>
<activity android:name="com.android.libpackage2.LibActivity" >
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:27:43.730

将项目定义为库是通过“project.properties”文件完成的。

这是一个库的 project.properties 文件的示例

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must be checked in Version Control Systems.
#
# To customize properties used by the Ant build system use,
# "ant.properties", and override values to adapt the script to your
# project structure.

android.library=true
# Project target.
target=android-10 
```

# android - 在android中自定义按钮

> ID：12315280
> 
> 赞同：0
> 
> 时间：2012-09-07T09:22:39.167
> 
> 标签：android, android-layout, android-button

我想通过extendong Button类在android中自定义一个通用按钮。

我只希望默认的 android 按钮在按钮中间显示一条水平线。

所以这是draw方法的实现：

```
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    Paint paint = new Paint();
    paint.setColor(Color.RED);
    canvas.drawLine(0, getHeight()/2, getWidth(), getHeight()/2, paint);
} 
```

这是插入布局中的按钮

```
<Button
    class="com.example.backproject.ShadowButton"
android:background="@android:color/transparent" 
    android:id="@+id/myButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

</Button> 
```

但按钮不会改变。

为什么？

提前TY！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:25:28.593

您已经创建了自定义按钮，然后像这样使用它

```
<com.example.backproject.ShadowButton
    android:background="@android:color/transparent" 
    android:id="@+id/myButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:26:44.663

使用它`<com.example.backproject.ShadowButton`而不是`<Button`在您的 xml 文件中并删除**class="com.example.backproject.ShadowButton"** 。

**编辑**：代码

```
<com.example.backproject.ShadowButton
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@android:color/transparent" 
    android:id="@+id/myButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

# ruby-on-rails - Heroku RACK_ENV 仍然是“生产”

> ID：12315282
> 
> 赞同：1
> 
> 时间：2012-09-07T09:22:45.180
> 
> 标签：ruby-on-rails, heroku, environment-variables

我已经通过 heroku_san 的配置文件（以及手动）将环境变量设置`RACK_ENV`为。`staging`列出所有 ENV 变量时，它正确显示为设置为“暂存”。如果我通过控制台检查，我也会得到正确的结果。

但是，如果我将它记录在我的 application_controller 中，它似乎是“生产”。知道为什么以及如何纠正这个问题吗？ `RAILS_ENV`设置为“生产”。我猜这可能会导致问题。这两个不能有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:30:04.333

Rails 首先查找 RAILS_ENV，然后查找 RACK_ENV。我猜，Heroku 默认将 RAILS_ENV 设置为生产环境，它优先于 RACK_ENV。尝试将 RAILS_ENV 环境变量直接设置为“staging”。

如果这不起作用，您应该在应用程序控制器中记录 ENV，以便我们可以从内部查看所有环境变量。

# tridion - 动态组件模板不再去代理数据库

> ID：12315286
> 
> 赞同：0
> 
> 时间：2012-09-07T09:23:07.853
> 
> 标签：tridion, tridion-content-delivery

我已经对我的蓝图结构进行了调整，因此以前可发布的网络出版物现在已经变成了父级不可发布的网络出版物。已创建一个新的子网络出版物来取代它。

因此，这创建了一个新的发布 ID。我已经使用这个新 ID 更新了所有配置，并且能够成功地将内容发布到文件系统上的演示服务器。动态组件演示也正在使用新 ID 发布到代理数据库中。

但是，最近我的一个动态组件模板已停止发布到代理。它发布到文件系统，但没有组件的记录出现在代理的 LINK_INFO 表中。这意味着使用此模板的内容动态链接在网站上失败。

谁能告诉我他们是否知道为什么会发生这种情况？

更新 2：发现了一些有趣的东西.....动态链接实际上是有效的，但仅适用于某些组件模板。我通过使用 ComponentLink.GetLink(string) 方法发现了这一点，以查看它是否会返回链接...对于某些内容类型它确实如此，但对于以前有链接的其他内容类型，它现在没有，即使在重新发布这些模板之后：秒

更新：cd_storage.xml

```
<Configuration Version="6.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:noNamespaceSchemaLocation="schemas/cd_storage_conf.xsd">
 <Global>
  <ObjectCache Enabled="false">
   <Policy Type="LRU" Class="com.tridion.cache.LRUPolicy">
    <Param Name="MemSize" Value="16mb"/>
   </Policy>
   <Features>
    <Feature Type="DependencyTracker" Class="com.tridion.cache.DependencyTracker"/>
   </Features>
  </ObjectCache>
  <Storages>
   <StorageBindings>
     <Bundle src="AudienceManagerDAOBundle.xml" />
   </StorageBindings>
   <Storage Type="persistence" Id="defaultdb" dialect="MSSQL"
            Class="com.tridion.storage.persistence.JPADAOFactory">
     <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" 
           CheckoutTimeout="120" />
     <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
      <Property Name="serverName" Value="lon1udb01.int.rroom.net" />
      <Property Name="portNumber" Value="1433" />
      <Property Name="databaseName" Value="uat_mal_Tridion_Broker_2" />
      <Property Name="user" Value="uat_mal" />
      <Property Name="password" Value="mj][zdvd=h" />
     </DataSource>
    </Storage>
    <Storage Type="persistence" Id="profiledb" dialect="MSSQL" 
          Class="com.tridion.storage.persistence.JPADAOFactory" 
          defaultStorage="false">
      <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" 
            CheckoutTimeout="120" />
      <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
       <Property Name="serverName" Value="lon1udb01.int.rroom.net" />
       <Property Name="portNumber" Value="1433" />
       <Property Name="databaseName" Value="uat_mal_Tridion_submgmt" />
       <Property Name="user" Value="uat_mal" />
       <Property Name="password" Value="mj][zdvd=h" />
      </DataSource>
    </Storage>
    <Storage Type="persistence" Id="trackingdb" dialect="MSSQL" 
          Class="com.tridion.storage.persistence.JPADAOFactory" 
          defaultStorage="false">
     <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" 
           CheckoutTimeout="120" />
      <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
        <Property Name="serverName" Value="lon1udb01.int.rroom.net" />
        <Property Name="portNumber" Value="1433" />
        <Property Name="databaseName" Value="uat_mal_Tridion_tracking" />
        <Property Name="user" Value="uat_mal" />
        <Property Name="password" Value="mj][zdvd=h" />
      </DataSource>
    </Storage>
    <Storage Type="filesystem"  Id="defaultFile" 
              Class="com.tridion.storage.filesystem.FSDAOFactory" 
              defaultFilesystem="false" 
              defaultStorage="false">
      <Root Path="c:\websites\live" />
    </Storage>
    <Storage Type="filesystem"  Id="defaultFileAssets" 
                Class="com.tridion.storage.filesystem.FSDAOFactory" 
                defaultFilesystem="false" 
                defaultStorage="true">
      <Root Path="c:\websites\live\malvern.com.en\Assets" />
    </Storage>
    <Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory"
             Id="malenctrls" defaultFilesystem="false" defaultStorage="false">
      <Root Path="c:\websites\live\malvern.com.en\usercontrols" />
    </Storage> 
    <Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" 
             Id="malcnctrls" defaultFilesystem="false" defaultStorage="false">
      <Root Path="c:\websites\live\malvern.com.cn\usercontrols" />
    </Storage>      
    <SearchFilter Name="SearchFilter" 
                  Class="com.tridion.broker.components.meta.MsSqlSearchFilterHome" 
                  defaultStorageId="defaultdb"/>
  </Storages>
  <Transaction Timeout="60000" MonitorInterval="5000"/>
 </Global>
 <ItemTypes defaultStorageId="defaultdb" cached="false">
  <Item storageId="profiledb" typeMapping="AudienceManagerProfile" cached="false"/>
  <Item storageId="trackingdb" typeMapping="AudienceManagerTracking" cached="false" />
  <!-- GLOBAL MASTER -->
  <Publication Id="22" defaultStorageId="defaultdb" cached="false">
    <Item storageId="defaultFile" typeMapping="Page" cached="false" />
    <Item storageId="defaultFile" typeMapping="Binary" cached="false" />
    <Item storageId="malenctrls" typeMapping="ComponentPresentation" 
          itemExtension=".ascx" cached="false" />
  </Publication>
  <!-- CHINESE WEB -->
  <Publication Id="15" defaultStorageId="defaultdb" cached="false">
    <Item storageId="defaultFile" typeMapping="Page" cached="false" />
    <Item storageId="defaultFile" typeMapping="Binary" cached="false" />
    <Item storageId="malcnctrls" typeMapping="ComponentPresentation" 
          itemExtension=".ascx" cached="false" />
  </Publication>
 </ItemTypes>
 <License Location="c:/tridion/config/cd_licenses.xml"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:16:45.437

你有

```
<Storage Type="filesystem" Id="defaultFileAssets" 
  Class="com.tridion.storage.filesystem.FSDAOFactory" defaultFilesystem="false" 
  defaultStorage="true"> 
```

并且 cd_storage_conf.xml 中的任何地方都没有 TypeMappings 定义。这使得“defaultFileAssets”成为部署者选择的存储位置。

我通常会期待这样的事情

```
<ItemTypes defaultStorageId="defaultdb" cached="false">
    <Item typeMapping="Page" cached="false" storageId="defaultFile"/>
<Item typeMapping="Binary" storageId="defaultFile" cached="false"/>
</ItemTypes> 
```

在您的配置节点中。

确保您发布的配置实际被使用也非常有帮助；您可以在 Tridion 生成的日志文件中查看这一点（启用调试日志记录），因为它记录了它正在使用的配置文件；不止一次因为我查看了错误的配置文件而让我对问题感到困惑......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:23:51.873

我已经从问题中的存储配置中删除了很多无用的评论。现在很容易看出，正如 Quirijn 所怀疑的那样，存在特定于出版物的配置。如果您的网络出版物 id 以前是 15 或 22，而这已经改变，那就可以解释您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T15:18:33.703

我认为问题可能是由过期的 cd_licence 文件引起的，但我无法确认，已要求 SDL 支持人员告诉我是否如此

# asp.net-mvc - 如何从多个模型中设置一个 Viewmodel？

> ID：12315287
> 
> 赞同：1
> 
> 时间：2012-09-07T09:23:07.930
> 
> 标签：asp.net-mvc, asp.net-mvc-3, database-design, mvvm, ado.net

我想在我的视图中检索表格的一个单元格中的多个项目。我有几个模型，产品、包（作为类别）、订单和订单详细信息。我认为要实现我想要的，我应该使用来自我的模型的数据创建一个视图模型，但我真的不知道如何做到这一点以及我应该绑定哪些数据。

这是我的看法

```
@foreach (var item in Model)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.OrderId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Username)          
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ClientID)          
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SiteNumber)
        </td>   
        <td>
            @if (item.Pack == null)
            {
                    <ul>
                        @foreach (var tmp in item.????) //PRODUCT
                        { 
                           <li>Html.DisplayFor(modelItem => tmp.Name) </li>
                        } 
                    </ul>
            }
            else
            {                 
                    <ul>
                        @foreach (var tmp in item.????) //PACK
                        { 
                            <li>Html.DisplayFor(modelItem => tmp.Name) </li> 
                        } 
                    </ul>                       
            }
        </td>

        <td>
        @{
                if (item.Pack == null)
                {
                        <ul>
                            @foreach (var tmp in item.????)  // PRODUCT
                            { 
                                <li>Html.DisplayFor(modelItem => tmp.UnitPrice)
                               </li>
                            }
                        </ul>
                }
                else
                {                    
                        <ul>
                                @foreach (var tmp in item.????) //PACK
                                { 
                                    <li>
                                    @Html.DisplayFor(modelItem => tmp.UnitPricePack)
                                    </li>
                                }
                        </ul>
                }
}

        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Quantity)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Total)
        </td>        
        <td>
            @Html.DisplayFor(modelItem => item.OrderDate)
        </td>
    </tr> 
```

我希望我的桌子最后看起来像这样：

![在此处输入图像描述](../Images/0821fb32b7b6ead549488ffb04789910.png)

我的问题再次，我如何创建一个 ViewModel 来检索我的视图中的数据，并使其与我在 ma 表中的 @foreach 条件相匹配......我不知道我是否足够清楚......这篇文章跟随[这个](https://stackoverflow.com/questions/12282885/is-it-possible-to-display-more-than-one-item-in-a-cell-with-a-foreach-condition)。实际上，我所做的一切都是错误的，我真的不知道如何设置我的视图模型，我需要绑定哪些数据以及如何绑定。感谢您的帮助，您的建议，我接受所有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:29:52.683

我建议使用[“AutoMapper”](http://automapper.codeplex.com/)，你可以试试

```
public class A{
 public string FirstName{get;set;}
}

public class B{
public string LastName{get;set;}
} 
```

现在创建一个视图模式

```
public class VModel{
public string FirstName{get;set;}
public string LastName{get;set;}
} 
```

以及您希望它们收敛的地方使用自动映射器，例如

```
Mapper.CreateMap<A,VModel>();
Mapper.CreateMap<B,VModel>();

var ObjectOfClassA= new A{FirstName="John"};
var ObjectOfClassB= new A{LastName="Smith"};

VModel _model = Mapper.Map<A,VModel>(ObjectOfClassA);
_model = Mapper.Map<B,VModel>(ObjectOfClassB); 
```

像访问它

```
_model.FirstName;//should give you john
_model.LastName;//should give you smith 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:12:15.817

您不一定需要新的 ViewModel，Order 拥有您所需要的一切。您的模型将是一个订单列表。

```
@foreach (var item in Model)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.OrderId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Username)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ClientID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SiteNumber)
        </td>
        <td>
            <ul>
                @foreach (var o in item.OrderDetails)
                {

                    if (o.Pack == null)
                    {
                    <li>@Html.DisplayFor(modelItem => o.Product.Name) </li> //PRODUCT
                    }
                    else
                    {

                    <li>@Html.DisplayFor(modelItem => o.Pack.Name) </li> // PACK

                    }
                }
            </ul>
        </td>
        <td>
                <ul>
                    @foreach (var o in item.OrderDetails)
                    {

                        if (o.Pack == null)
                        {
                        <li>@Html.DisplayFor(modelItem => o.UnitPrice) </li> //PRODUCT
                        }
                        else
                        {
                        <li>@Html.DisplayFor(modelItem => o.UnitPricePack) </li>  //PACK
                        }
                    }
                </ul>
        </td>
        <td>
            <ul>
                @foreach (var o in item.OrderDetails)
                {
                    <li>@Html.DisplayFor(modelItem => o.Quantity)</li>
                }
            </ul>
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Total)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.OrderDate)
        </td>
    </tr>  
} 
```

**根据您的更新进行更新：**

您仍在尝试传递 orderdetails 集合而不是 order

而不是这个：

```
 var user = from m in db.OrderDetails
                   select m; 
```

有这个（假设你有 Orders 表）：

```
 public ActionResult Index(string searchSite, string searchString)
    {

        var user = from m in db.Orders
                   select m;

        if (!String.IsNullOrEmpty(searchString))
        {
            user = user.Where(s => s.ClientID.Contains(searchString));                
        }

        if (!String.IsNullOrEmpty(searchSite))
        {
            user = user.Where(c => c.SiteNumber.Contains(searchSite));
        }
            return View(user);
    } 
```

# node.js - 分析猫鼬方法

> ID：12315289
> 
> 赞同：0
> 
> 时间：2012-09-07T09:23:15.773
> 
> 标签：node.js, mongodb, coffeescript, mongoose

我想查看所有 mongoose 方法的调用方法日志，如下所示：

```
# Load Book
LoadBook = (id, cb) ->
  console.log 'loading book...'
  Book.findById id, (err, book) ->
    if err
      console.log err
      throw err
    console.log 'loaded book: ' + book.title
    cb book 
```

我想我可以定义这样`post`的`pre`方法：

```
BookSchema.pre 'save', (next) ->
  console.log 'loading ' + `model_name(don't know how to get it)` + ' ...'
  next() 
```

其他方法也一样`findById`or`remove`但它很长。并且错误处理仅在我不使用回调时才有效，但我每次都使用它。我是说：

```
Part.on 'error', (err) ->
  console.log "Got an error", err 
```

我认为当有回调时它不起作用，是吗？也许 nodejs 中有一些通用分析器？顺便说一句，我正在使用快递。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T12:28:18.733

您可以通过调用在 Mongoose中[启用调试日志记录：](http://mongoosejs.com/docs/faq.html)

```
mongoose.set('debug', true); 
```

启用该功能后，您将获得通过 Mongoose 进行的每个 MongoDB 操作的日志条目。不确定它是否正是您想要的，但值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:46:58.633

您可以使用[`look`](https://github.com/baryshev/look)模块来分析您的 node.js 应用程序。它基于[节点时间](https://nodetime.com)，但适用于本地服务器。

# java - 尝试在 netbeans 中运行向导模块时出错

> ID：12315290
> 
> 赞同：0
> 
> 时间：2012-09-07T09:23:19.830
> 
> 标签：java, swing, netbeans

我正在使用 NetBeans 7，并尝试在其中运行向导。

该模块的构建工作正常，但在尝试运行时显示一些错误，如下所示：

```
Error opening zip file or JAR manifest missing : ./build_files/spring-instrument.jar

Error occurred during initialization of VM

agent library failed to init: instrument 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:32:05.137

我还没有真正尝试过，但请确保将任何库`spring-instrument.jar`添加到您的项目中，就像他们[在这里](https://stackoverflow.com/q/1975973/261156)展示的那样。此外，您可以查看[NetBeans 向导模块教程](http://platform.netbeans.org/tutorials/nbm-wizard.html)，看看您是否遗漏了任何步骤。

# charts - JavaFX 2.x：如何移动两个窗格？

> ID：12315294
> 
> 赞同：1
> 
> 时间：2012-09-07T09:23:34.137
> 
> 标签：charts, javafx-2, splitpanel

我下面的班级在拆分窗格中绘制了两个图表。

通过鼠标左键单击并拖动上面的折线图向左/向右（和向上/向下）移动。

当我在上图中用鼠标左键单击并拖动时，我想将两个窗格一起向左/向右移动：如何做到这一点？

谢谢

```
public class XyChartInSplitMove extends Application { 
SplitPane               splitPane1 = null; 
BorderPane              pane; 
BorderPane              pane2; 
XYChart.Series          series1 = new XYChart.Series(); 
XYChart.Series          series2 = new XYChart.Series(); 

SimpleDoubleProperty rectinitX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectinitY = new SimpleDoubleProperty();  

@Override 
public void start(Stage stage) { 

final NumberAxis xAxis = new NumberAxis(1, 12, 1); 
final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005); 

xAxis.setAnimated(false);
yAxis.setAnimated(false);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) { 

    @Override 
    public String toString(Number object) { 
        return String.format("%7.5f", object); 
    } 
});   
final LineChart<Number, Number> lineChart1 = new LineChart<Number, Number>(xAxis, yAxis); 

lineChart1.setCreateSymbols(false); 
lineChart1.setAlternativeRowFillVisible(false); 
lineChart1.setAnimated(false);
lineChart1.setLegendVisible(false);

series1.getData().add(new XYChart.Data(1, 0.53185)); 
series1.getData().add(new XYChart.Data(2, 0.532235)); 
series1.getData().add(new XYChart.Data(3, 0.53234)); 
series1.getData().add(new XYChart.Data(4, 0.538765)); 
series1.getData().add(new XYChart.Data(5, 0.53442)); 
series1.getData().add(new XYChart.Data(6, 0.534658)); 
series1.getData().add(new XYChart.Data(7, 0.53023)); 
series1.getData().add(new XYChart.Data(8, 0.53001)); 
series1.getData().add(new XYChart.Data(9, 0.53589)); 
series1.getData().add(new XYChart.Data(10, 0.53476)); 
series1.getData().add(new XYChart.Data(11, 0.530123)); 
series1.getData().add(new XYChart.Data(12, 0.531035)); 

lineChart1.getData().addAll(series1); 

pane = new BorderPane(); 
pane.setCenter(lineChart1); 

splitPane1 = new SplitPane();                                
splitPane1.setOrientation(Orientation.VERTICAL);
splitPane1.getItems().addAll(pane);
splitPane1.setDividerPosition(0, 1);

Platform.runLater(new Runnable() {
     @Override
     public void run() {
         double percSplit;

        ObservableList<SplitPane.Divider> splitDiv =  splitPane1.getDividers();

        percSplit = 1/(double)(splitDiv.size()+1);
        for (int i = 0; i< splitDiv.size(); i++) {                        
            splitPane1.setDividerPosition(i, percSplit);
            percSplit += 1/(double)(splitDiv.size()+1);
        }
     }
 });
//BarChart
final CategoryAxis xAxis2 = new CategoryAxis();
final NumberAxis   yAxis2 = new NumberAxis();

yAxis2.setTickUnit(1);
yAxis2.setPrefWidth(35);
yAxis2.setMinorTickCount(10);

yAxis2.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis2){
    @Override
public String toString(Number object){
        String label;
        label = String.format("%7.2f", object.floatValue());
        return label;
}
});
final BarChart<String, Number>BarChart2 = new BarChart<String, Number>(xAxis2, yAxis2);

BarChart2.setAlternativeRowFillVisible(false);
BarChart2.setLegendVisible(false);
BarChart2.setAnimated(false);

XYChart.Series series2 = new XYChart.Series();

series2.getData().add(new XYChart.Data("Jan", 1));
series2.getData().add(new XYChart.Data("Feb", 3));
series2.getData().add(new XYChart.Data("Mar", 1.5));
series2.getData().add(new XYChart.Data("Apr", 3));
series2.getData().add(new XYChart.Data("May", 4.5));
series2.getData().add(new XYChart.Data("Jun", 5));
series2.getData().add(new XYChart.Data("Jul", 4));
series2.getData().add(new XYChart.Data("Aug", 8));
series2.getData().add(new XYChart.Data("Sep", 16.5));
series2.getData().add(new XYChart.Data("Oct", 13.9));
series2.getData().add(new XYChart.Data("Nov", 17));
series2.getData().add(new XYChart.Data("Dec", 20));

BarChart2.getData().addAll(series2);

Platform.runLater(new Runnable() {
     @Override
     public void run() {
         double percSplit;
         splitPane1.getItems().addAll(BarChart2);

        ObservableList<SplitPane.Divider> splitDiv =  splitPane1.getDividers();

        percSplit = 1/(double)(splitDiv.size()+1);
        for (int i = 0; i< splitDiv.size(); i++) {                        
            splitPane1.setDividerPosition(i, percSplit);
            percSplit += 1/(double)(splitDiv.size()+1);
            }
     }
 });
Scene scene = new Scene(splitPane1, 800, 600); 

stage.setScene(scene);         

pane.setOnMouseClicked(mouseHandler); 
pane.setOnMouseDragged(mouseHandler); 
pane.setOnMouseEntered(mouseHandler); 
pane.setOnMouseExited(mouseHandler); 
pane.setOnMouseMoved(mouseHandler);  
pane.setOnMouseReleased(mouseHandler); 

stage.show(); 
} 

EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>(){ 

@Override 
public void handle(MouseEvent mouseEvent) { 

    if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED ||    mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED){ 
        LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter(); 

        NumberAxis yAxis = (NumberAxis) lineChart.getYAxis(); 
        NumberAxis xAxis = (NumberAxis) lineChart.getXAxis();  
        double Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound()); 
        double newXlower=xAxis.getLowerBound(), newXupper=xAxis.getUpperBound(); 
        double newYlower=yAxis.getLowerBound(), newYupper=yAxis.getUpperBound(); 

        double xAxisShift = getSceneShift(xAxis);
        double yAxisShift = getSceneShift(yAxis);

        double yAxisStep=yAxis.getHeight()/(yAxis.getUpperBound()-yAxis.getLowerBound());
        double CurrentPrice=yAxis.getUpperBound()-((mouseEvent.getY()-yAxisShift)/yAxisStep);

        double Delta=0.3;

        if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED){
            if(rectinitX.get() < mouseEvent.getX()){    
            newXlower=xAxis.getLowerBound()-Delta;
            newXupper=xAxis.getUpperBound()-Delta;
        }
        else if(rectinitX.get() > mouseEvent.getX()){    
            newXlower=xAxis.getLowerBound()+Delta;
            newXupper=xAxis.getUpperBound()+Delta;
        }    
        xAxis.setLowerBound( newXlower ); 
        xAxis.setUpperBound( newXupper ); 

        //========== Y-Axis Moving ============================

        if(rectinitY.get() < mouseEvent.getY()){    
            newYlower=yAxis.getLowerBound()+Delta/1000;
            newYupper=yAxis.getUpperBound()+Delta/1000;
        }
        else if(rectinitY.get() > mouseEvent.getY()){    
            newYlower=yAxis.getLowerBound()-Delta/1000;
            newYupper=yAxis.getUpperBound()-Delta/1000;
        }
        yAxis.setLowerBound(newYlower);
        yAxis.setUpperBound(newYupper);
        }
        rectinitX.set(mouseEvent.getX()); 
        rectinitY.set(mouseEvent.getY()); 

        if(mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED && mouseEvent.getY()>yAxisShift && mouseEvent.getY()<yAxisShift+yAxis.getHeight() && mouseEvent.getX()>xAxisShift && mouseEvent.getX()<xAxisShift+xAxis.getWidth()){

        double XX=((mouseEvent.getX() - xAxisShift) / Tgap) + xAxis.getLowerBound();
        double YY=CurrentPrice;

        int XLB=(int) xAxis.getLowerBound();
        int XUB=(int) xAxis.getUpperBound();
        }
     } 
} 
}; 
private static double getSceneShift(Node node) { 
double shift = 0; 
do {  
    shift += node.getLayoutX();  
    node = node.getParent(); 
} while (node != null); 
return shift; 
}
private static String getHIstLOstY(XYChart.Series S,int XLowerBound,int XUpperBound) { 
double ValLOst=1000000;
double ValHIst=-1000000;
for(int i=XLowerBound; i<XUpperBound; i++){  
    double P=GetPrice(S,i);
    if(ValHIst<P){
        ValHIst=P;
    }
    if(ValLOst>P){
        ValLOst=P;
    }
}
return Double.toString(ValLOst) + "," + Double.toString(ValHIst);
} 
private static double GetPrice(XYChart.Series S,int IX) { 
Object SVal=S.getData().get(IX);
String Temp=SVal.toString().replaceAll("Data", "");
Temp=Temp.replace("[", "");
Temp=Temp.replace("]", "");
String[] TempArray=Temp.split(",");
return Double.parseDouble(TempArray[1]);     
}   
public static void main(String[] args) { 
launch(args);  
} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:37:17.383

**选项 1（简单）：**

想象一下，您在两个图表中都有相同的鼠标处理程序，然后您可以分别拖动两个图表。在这种情况下，您需要更新顶部图表中的鼠标处理程序以调用底部图表中的相同事件（减去 y 坐标差异）

**选项2（好）：**

将底部图表轴范围绑定到顶部图表轴范围（是的，它可能涉及一些复杂的数学），就像您为图表的起始状态所做的那样。因此，更新顶部图表底部图表将自动更新。

# c++ - 如何避免离合器台球？

> ID：12315303
> 
> 赞同：0
> 
> 时间：2012-09-07T09:24:25.007
> 
> 标签：c++, game-physics

我正在研究台球在相互碰撞中的简单行为。一切正常，但是面对几个轻松的球时，有一个问题是耦合球的效果，它们彼此很酷。告诉我如何防止这种情况。

```
bool MGBilliard::CollisingBall(CCPoint curr_point, CCPoint next_point)
{
    float dx = next_point.x - (curr_point.x + dvdt.x);
    float dy = next_point.y - (curr_point.y - dvdt.y);
    float d = dx*dx+dy*dy;
    return d <= BALL_RADIUS * BALL_RADIUS;
}
double MGBilliard::angleCollisionBalls(Ball* current, Ball* next)
{
    double na;
    double dx = fabs(next->location.x - current->location.x);
    double dy = fabs(next->location.y - current->location.y);
    na = atan(fabs(dy/dx));
    if(atan(fabs(current->location.y/current->location.x)) < atan(fabs(next->location.y/next->location.x)))
        na = current->angle - na;
    else if(atan(fabs(current->location.y/current->location.x)) > atan(fabs(next->location.y/next->location.x)))
        na = current->angle + na;
    return na;
}
for(unsigned int i = 0;i<BALL_COUNT;++i)
    {
        if(vBalls[i]->speed > 0){
            vBalls[i]->speed += vBalls[i]->acceleration;
            float dsdt = vBalls[i]->speed*dt;
            dvdt.x = dsdt*cos(vBalls[i]->angle);
            dvdt.y = dsdt*sin(vBalls[i]->angle);
            vBalls[i]->location.x += dvdt.x;
            vBalls[i]->location.y += dvdt.y;
            for(unsigned int j = 1; j < BALL_COUNT; ++j)
            {
                if(i == j) continue;
                if(CollisingBall(vBalls[i]->spriteBall->getPosition(),vBalls[j]->spriteBall->getPosition()))
                {
                    vBalls[j]->speed = 600;
                    double angle;
                    angle = angleCollisionBalls(vBalls[i],vBalls[j]);
                    vBalls[i]->angle = (float)-angle;
                    vBalls[j]->angle = (float)angle;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T09:53:33.860

通过快速查看您的代码，有两个直接的错误引起了我的注意。

首先，这个：

```
vBalls[i]->angle = (float)-angle; 
vBalls[j]->angle = (float)angle; 
```

不是计算对角的正确方法。`angle`例如，当它为零（或 180 度，就此而言）时，它不会做你想让它做的事情。

`vBalls`其次，您多次迭代整个数组，一次使用 index ，一次使用 index`i`内部循环`j`。这意味着碰撞将被计算两次，`speed`两个球的值将设置为 600！将您的内部循环更改为：

```
for(unsigned int j = i + 1; j < BALL_COUNT; ++j) 
```

应该防止这种情况发生。

还有一个更微妙的错误。您的碰撞检测不考虑时间。在游戏循环的每次迭代中，每个球都会移动特定的距离。这意味着如果一个“滴答”中没有发生碰撞，一个球可以*直接穿过另一个球*，然后在球*的另一侧*触发碰撞代码。在这种情况下你不能做一个简单的基于半径的碰撞测试，如果一个球在一个步骤中移动超过 (BALL_RADIUS * BALL_RADIUS)，你的系统会表现得很奇怪或者根本不工作。

我个人会使用向量来描述每个球的速度和方向，而不是角度和速度，但是重构你的代码来做到这一点有点超出了这个问题的范围。

# openssl - 如何使用 byte[] ssl 证书而不是 openssl 中使用的 .pem 文件

> ID：12315308
> 
> 赞同：2
> 
> 时间：2012-09-07T09:24:40.283
> 
> 标签：openssl, certificate, buffer

我的设备没有任何文件系统，所以我想将 .pem 格式的 ssl 证书转换为 byte[] 并在 openssl 中使用它来代替 .pem 证书。使用这个 openssl x509 -in mycert.pem -C，我得到了带有 ... unsigned char XXX_certificate[576]={ 0x30,0x82,0x02,0x3C,0x30,0x82,0x01,0xA5,0x02,0x10 的 .c 文件,0x70,0xBA,0xE4,0x1D,0x10,0xD9, ....

如何在 openssl 中使用这个字节 []。基本上我需要绕过读取 .pem 文件并要求它占用我的 XXX_certificate[576] 缓冲区。

任何想法我应该在哪个 openssl 文件中进行更改，以便它采用这个字节数组。

请让我知道要进行的更改..

谢谢你的支持 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:39:41.680

使用[生物](http://www.openssl.org/docs/crypto/bio.html)。使用您的数据创建[BIO_new_mem_buf()](http://www.openssl.org/docs/crypto/BIO_s_mem.html)，然后使用[PEM_read_bio_X509()](http://www.openssl.org/docs/crypto/pem.html)读取它。

# google-chrome - 谷歌浏览器是否会重新绘制未聚焦的标签？

> ID：12315311
> 
> 赞同：4
> 
> 时间：2012-09-07T09:24:50.500
> 
> 标签：google-chrome, rendering

我正在和我的同事讨论在谷歌浏览器上重新绘制不集中的标签。不确定 Chrome 是否会重新绘制没有聚焦和隐藏的页面，以及对于不同类型的场景（静态页面、更改 css、gif 动画、flash）是否有所不同？这与隐藏在其他窗口后面的普通应用程序有何不同？

# php - 不能 SOAP 压缩 PHP 输出

> ID：12315314
> 
> 赞同：0
> 
> 时间：2012-09-07T09:24:54.433
> 
> 标签：php, soap, soap-client

大家好（请原谅语法错误，还不是流利的英语），

我在压缩我的 SOAP 流时遇到了问题：我遇到“无法解压缩压缩响应”或“看起来我们没有 XML 文档”错误。

我在 Debian 上使用 PHP 5.3.3 Suhoshin 和 apache2。

我无法深入调试或嗅探/嗅探网络帧，因为我正在开发同事的应用程序，其中客户端和服务器都是远程的。

所以，我尝试了以下方法：

*   php.ini 输出压缩处理程序
    *   ob_gzhandler（失败）
    *   zlib.output_handler（失败）
*   肥皂选项（全部失败）
    *   SOAP_COMPRESSION_ACCEPT | SOAP_COMPRESSION_DEFLATE | 5（从那里：[https](https://bugs.php.net/bug.php?id=47925) ://bugs.php.net/bug.php?id=47925 ）
    *   没有'| 一样 5'
    *   用 SOAP_COMPRESSION_GZIP 替换 SOAP_COMPRESSION_DEFLATE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:41:27.993

安装 php 时是否启用了 zlib？

我有类似的麻烦。我有 2 个系统，一个可以工作，一个不能工作。

在一个有效的方法上，如果我调用 phpinfo() 我得到

* * *

```
Configure Command =>  …(lots of stuff)… '--enable-zip' …(more stuff)… 
```

后来

```
zlib

ZLib Support => enabled
Stream Wrapper support => compress.zlib://
Stream Filter support => zlib.inflate, zlib.deflate
Compiled Version => 1.2.5
Linked Version => 1.2.5 
```

* * *

但是在一个不起作用的地方，'--enable-zip' 不存在，并且没有 zlib 部分。

# sql - 普通图像插入和作为批量 BLOB 插入之间的区别

> ID：12315320
> 
> 赞同：0
> 
> 时间：2012-09-07T09:25:15.013
> 
> 标签：sql, image, blob

我有`sql`带有表图像的数据库，在该表中有 2 个`Columns` `ID`（身份），DisplayImage （图像）。我写的第一行表有 2 行

```
insert into Image values(1,'Libraries\Pictures\Lotus.jpg') 
```

第二行为

```
INSERT INTO [dbo].[Image] ([Id],Images)
SELECT 2,
(select * FROM OPENROWSET(BULK 'C:\Users\Public\Pictures\Sample Pictures\Tulips.jpg', SINGLE_BLOB) AS BLOB) 
```

这是读取图像的代码

```
WebClient instanceHTTP = new WebClient();
            Uri MyUri = new Uri("http://localhost:52293/WebSite/ImageHandler.ashx?ImageId=" + TextBox5.Text);    //TextBox5.Text for id i.e 1 or 2
            Stream returnValue;
        returnValue = instanceHTTP.OpenRead(MyUri);

 **System.Drawing.Image MyImage = System.Drawing.Image.FromStream(returnValue);**  
// Error if id=1 used i.e normal insert

        bytearray = imageToByteArray(MyImage);

                    MyImage.Dispose(); 
```

如果我使用的是正常插入的 id 1，那么它会给出无效参数的错误，但如果我使用 id 2，它会正常运行。那么区别是什么呢？？以及我必须进行哪些更改才能运行正常的插入图像。我不想`BLOB`在插入语句中使用 AS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:33:30.117

insert 1 语句插入字符串 'Libraries\Pictures\Lotus.jpg' 而不是图像。这就是为什么当您访问它时会给出无效参数错误。

如果您必须存储图像，则必须使用 BLOB

# html - 在 iOS 上的 Quicktime 中启动嵌入的 YouTube 视频

> ID：12315322
> 
> 赞同：1
> 
> 时间：2012-09-07T09:25:21.577
> 
> 标签：html, ios, safari, youtube, quicktime

我们需要在面向儿童的网站上嵌入视频，并且希望使用视频托管服务。

YouTube 之类的允许嵌入式播放器去除 chrome，重要的是，视频结束后显示的推荐视频。

这对于保护孩子在观看视频后避免浏览不合适的内容非常重要。

但是，在 iOS 中观看视频时，会启动没有此类儿童安全措施的原生 YouTube 播放器。

1.  可以覆盖原生 YouTube 应用程序并启动 Quicktime 播放器吗？
2.  是否有其他提供儿童安全托管的视频托管服务？
3.  如果我们正在寻找自托管解决方案，是否有任何推荐的跨浏览器播放器将 iOS 和 Android 原生播放器考虑在内？

请记住，关键要求是：

*   允许孩子观看嵌入网站的视频；
*   防止儿童访问不合适的视频内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:33:14.423

完全对儿童安全的视频共享网站很少见，但请查看“KidsTube”。它正在被积极监控。

您还可以为移动 Safari 使用 HTML5 后备，它将在移动 Safari 中使用默认的 HTML5 媒体播放器。[正如本巴内特所证明的那样。](http://www.benbarnett.net/2010/11/24/skinning-the-youtube-player-with-html5-video-support/)

可能有支持 YouTube 的独立 HTML5 媒体播放器。YouTube 本身有嵌入 HTML5 视频的说明，但我不确定是否支持移动 safari ( [Info](http://youtube.com/html5) )。

# android - android应用程序可以只有广播接收器和没有活动的服务吗

> ID：12315325
> 
> 赞同：2
> 
> 时间：2012-09-07T09:25:27.707
> 
> 标签：android, service, broadcastreceiver, android-activity

android应用程序可以只有广播接收器和没有活动的服务吗？如果这是可能的，我该如何调用广播接收器？Android系统自动调用broadcsat接收器？

广播接收者代码

```
 public class CheckReceiver extends BroadcastReceiver {

        public Context con;

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub

            Toast.makeText(context, "Received", Toast.LENGTH_LONG).show();
            // add PhoneStateListener
            PhoneCallListener phoneListener = new PhoneCallListener();
            TelephonyManager telephonyManager = (TelephonyManager) context
                    .getSystemService(Context.TELEPHONY_SERVICE);
            telephonyManager.listen(phoneListener,
                    PhoneStateListener.LISTEN_CALL_STATE);

            con = context;
                                }

        class PhoneCallListener extends PhoneStateListener {

            private boolean isPhoneCalling = false;

            String LOG_TAG = "LOGGING 123";

            @Override
            public void onCallStateChanged(int state, String incomingNumber) {

                if (TelephonyManager.CALL_STATE_RINGING == state) {
                    // phone ringing
                    Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
                }

                if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
                    // active
                    Log.i(LOG_TAG, "OFFHOOK");

                    isPhoneCalling = true;
                }

                if (TelephonyManager.CALL_STATE_IDLE == state) {
                    // run when class initial and phone call ended, need detect flag
                    // from CALL_STATE_OFFHOOK
                    Log.i(LOG_TAG, "IDLE");
                    if (isPhoneCalling) {
                        Log.i(LOG_TAG, "restart app");
                        Intent start = new Intent(con, CheckService.class);
                        con.startService(start);
                        isPhoneCalling = false;
                    }

                }
            }
        }
    } 
```

服务代码是

```
public class CheckService extends Service{

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);
        Intent dialogIntent = new Intent(CheckService.this,SmartDialog.class);
        dialogIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(dialogIntent);

        //Toast.makeText(CheckService.this, "Serive", Toast.LENGTH_LONG).show();
    }

} 
```

Android清单文件是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mkyong.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" /> 
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

       <receiver android:name="CheckReceiver"></receiver>
        <service android:name="CheckService"></service>
        <activity android:name="SmartDialog" android:theme="@android:style/Theme.Dialog"></activity>
    </application> 
```

当我尝试运行此代码接收器时没有开始。任何帮助都会非常有帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T09:39:19.783

从 Honeycomb 开始，BroadcastReceiver 安装在停止状态，并且在应用程序实际运行之前不会触发，即您需要一个活动至少运行一次。此 Commonsware 博客文章对此进行了深入解释：

[广播回归确认](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)

[安卓 3.1](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:44:26.503

```
public class FlashApkclass extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

     }
} 
```

在您的 manifest.xml 文件中，将您的 android:name 设置为

```
<receiver android:name="com.example.ambrecentral.server.FlashApkclass"
                android:exported="false">
        <intent-filter>
         // register you broadcast receiver to list broadcast 
           <action android:name="com.example.android.APP_CLOUD_DELETE_APK"/>
        </intent-filter>

</receiver> 
```

如果你想广播

```
broadcast.setAction(BROADCAST_ACTION);
sendBroadcast(broadcast); 
```

BROADCAST_ACTION 在哪里

```
public static String BROADCAST_ACTION = "com.example.android.APP_CLOUD_DELETE_APK"; 
```

# java - Java：aix 中的文件 lastmodified 时间戳

> ID：12315331
> 
> 赞同：1
> 
> 时间：2012-09-07T09:25:56.667
> 
> 标签：java, file

我想在java中将目录中的文件排序为最旧的，以对（FIFO原则）中的文件执行一些操作。为此，我在每个苍蝇对象上使用 lastmodified 方法，然后通过比较器对它们进行映射，该比较器为我提供了如下所示的排序列表

```
 public static ArrayList<File> sortListAscending(ArrayList<File> list) {
    Collections.sort(list, new Comparator<File>() {
        public int compare(final File o1, final File o2) {
            return new Long(((File) o1).lastModified()).compareTo(new Long(
                    ((File) o2).lastModified()));
        }
    });
    return list;
} 
```

当我在 Windows 上运行它时，我会返回一个 13 位的时间戳，而在 unix 中，时间戳不高达毫秒。因此，上述方法在 unix 中对于在一秒钟内进入目录的文件失败。

请建议一些解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:06:08.030

在我的`Ubuntu`机器上，时间戳以`13`数字形式返回，即。毫秒。你能检查一下你的linux机器上的系统时钟是否设置正确吗？

因此，您可以在几秒钟内应用比较。

```
long lastModified1 = (o1.lastModified()/1000)
long lastModified2 = (o2.lastModified()/1000)

return Long.valueOf(lastModified1).compareTo(lastModified2); 
```

# android - 在固定的 android 代码处出错

> ID：12315333
> 
> 赞同：0
> 
> 时间：2012-09-07T09:26:03.010
> 
> 标签：android, eclipse

我只想在android上启动代码。我安装了所有必要的东西，但是当我打开一个项目时，我首先看到了这些代码：

```
package com.example.firstapp;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class FirstApp extends Activity {

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_first_app);
 }

 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_first_app, menu);
    return true;
 }
 } 
```

我在这里遇到错误；

```
setContentView(R.layout.activity_first_app); 
```

和这里;

```
getMenuInflater().inflate(R.menu.activity_first_app, menu); 
```

我建议添加导入“R”。当我添加它时，probşem 继续。

有谁能够帮我？

编辑：还有 res->layout 文件说“项目目标（Android 4.1）没有正确加载。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:31:17.870

此外，请确保您导入您的应用程序资源类，而不是内置的 Android 类。

换句话说，你应该有这个 import 语句：

```
import com.example.R; 
```

代替：

```
import android.R; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:34:11.833

您的应用程序缺少资源。

构建并清除您的应用程序，如果有任何 android.R 导入，请删除它并构建并清除您的项目。这可能会解决您的问题

# java - 从客户端提取请求中发送的 IP

> ID：12315339
> 
> 赞同：-1
> 
> 时间：2012-09-07T09:26:37.367
> 
> 标签：java, jakarta-ee, ip, httprequest

我正在阅读*“对于您的 Web 应用程序的每个请求，也会发送客户端的 IP。所以您需要做的就是过滤请求并存储 IP。”*

如果是这样，我该怎么做？我的意思是什么方法可以告诉我请求中发送的 IP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:30:22.180

创建一个实现的过滤器类，并使用以下方法[`javax.servlet.Filter`](http://docs.oracle.com/javaee/5/tutorial/doc/bnagb.html)获取 IP ：`ServletRequest``getRemoteAddr()`

```
public final class ExtractIpFilter implements Filter {
    private FilterConfig filterConfig = null;

    public void init(FilterConfig filterConfig) throws ServletException {
        this.filterConfig = filterConfig;
    }
    public void destroy() {
        this.filterConfig = null;
    }

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
         throws IOException, ServletException {
      String ip = request.getRemoteAddr();
      // do something with the IP
   }
} 
```

如果您的客户端在代理后面，请尝试使用`request.getHeader("x-forwarded-for")`，尽管这可能会或可能不会工作，具体取决于代理的配置。

# iphone - 如何在iphone中禁用uilongpressgesture的allowableMovement属性

> ID：12315340
> 
> 赞同：0
> 
> 时间：2012-09-07T09:26:38.783
> 
> 标签：iphone

嗨，在我的应用程序中，我必须禁用长按手势 allowableMovement 属性，我不知道如何禁用它。如果有人知道，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:17:28.997

我怀疑您看到的问题可能是某些手势识别器被设计为只要它们识别的手势仍然是真实的，就会触发多次。所以长按是1秒长按，还是2秒长按，依此类推。

您应该检查您`state`的`UILongPressGestureRecognizer`操作方法中的 ，如下所述：

[按下时 UILongPressGestureRecognizer 被调用两次](https://stackoverflow.com/questions/3319591/uilongpressgesturerecognizer-gets-called-twice-when-pressing-down)

# google-bigquery - bigquery 中的 if 子句

> ID：12315343
> 
> 赞同：2
> 
> 时间：2012-09-07T09:26:52.607
> 
> 标签：google-bigquery

我有一个按预期工作的（加入）查询。但是，一旦我添加了以下列，它就没有显示任何结果，也没有完成。（查询运行计数器不断增长）

```
IF((d.network_type contains  '_user' AND d.is_network=1),s.impressions,0) AS effimp 
```

有没有其他方法可以优化这个？

* * *

完整的查询如下，当我在上个月尝试时它正在工作。

```
SELECT s.date_time AS date_time
   , s.requests AS requests, s.impressions AS impressions
   , s.clicks  AS clicks, s.conversions AS conversions
   ,  IF((d.network_type contains  '_user' 
           AND d.is_network=1),s.impressions,0) AS effimp
   , s.total_revenue AS total_revenue
   , s.total_basket_value AS total_basket_value 
   , s.total_num_items AS  total_num_items 
   , s.zone_id as zone_id
FROM company.ox_data_summary s
INNER JOIN company.ox_banners1 AS d ON d.bannerid=s.ad_id 
limit 100 
```

查询失败错误：意外。请再试一次。

如果我删除“IF 子句，它确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:55:51.857

看起来您遇到了查询处理错误。我们正在调查。

# c# - 我的类应该如何使用 xmlserializer 从这个 xml 中查看？

> ID：12315346
> 
> 赞同：0
> 
> 时间：2012-09-07T09:27:06.283
> 
> 标签：c#, xml, xml-serialization

这是我从第三方 api 得到的 xml：

```
<data>
    <installations>
        <installation>
            <reader>1</reader>
            <reader>2</reader>
            <reader>3</reader>
            <reader>4</reader>
        </installation>
    </installations
</data> 
```

这些是我现在的课程

```
public class data
{
    public List<installation> installations
}

public class installation
{
    // HERE I DON'T KNOW HOW TO DO THE <reader> STUFF
} 
```

我希望有人知道这应该怎么做

/马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:30:16.957

您可以使用`XSD.exe`自动为您创建类：

```
REM Infer XSD from XML
xsd.exe myfile.xml

REM Create classes from XSD
xsd.exe myfile.xsd /classes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:13:03.030

您的课程可能如下所示：

```
public class data
{
    public List<installation> installations { get; set; }
    public data() { installations = new List<installation>(); }
}

public class installation
{
    [XmlElement("reader")]
    public List<reader> reader { get; set; }
    public installation() { reader = new List<reader>(); }
}

public class reader
{
    [XmlTextAttribute]
    public Int32 value {get;set;}
} 
```

这里有两件事很重要：

1.  用于`XmlElement("reader")`隐藏`<reader></ reader>`由于该`List<reader> reader`属性而创建的节点。

2.  使用`XmlTextAttribute`将`<reader><value>1</value></reader>`创建为`<reader>1</reader>`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T09:43:57.503

```
public class data 
{
List<List<reader>> installations = new List<List<reader>>();
List<reader> installation = new List<reader>();
installation.Add(new reader());
installation.Add(new reader());
installation.Add(new reader());
installation.Add(new reader());
installations.Add(installation);
} 
```

或者

```
public class data
{
    public List<installation> installations
}

public class installation : List<reader>
{
    public void AddReader(reader obj)
    {
        this.Add(obj);
    }
} 
```

和其他方式，不使用 XmlSerializer(typeof(UnknownClass)) 是自定义解析 xml：

使用 LINQ to Xml；

```
XDocument doc = XDocument.Parse(xmlTextFromThirdParty); 
```

# c# - C# 超时 - 我的危险...？

> ID：12315352
> 
> 赞同：0
> 
> 时间：2012-09-07T09:27:17.287
> 
> 标签：c#, thread-safety, timeout, invoke

我已经根据我在不同地方看到的东西创建了一个超时功能，但我很确定我做得不是很好！（但它似乎确实有效。）

我正在连接一个硬件，如果工作在几秒钟内连接，但如果不是，则需要大约 1 分钟才能超时。因此，如果我可以创建自己的超时功能，我可以将其设置为 20 秒，从而节省大量时间和等待时间。

我试图做到这一点，所以我的超时返回一个字符串：

```
static string CallWithTimeout(Action action, int timeoutMilliseconds)
{
    string reply = "";
    Thread threadToKill = null;
    Action wrappedAction = () =>
    {
        threadToKill = Thread.CurrentThread;
        action();
    };

    IAsyncResult result = wrappedAction.BeginInvoke(null, null);
    if (result.AsyncWaitHandle.WaitOne(timeoutMilliseconds))
    {
        reply = "Connected";
        wrappedAction.EndInvoke(result);
        return reply;
    }
    else
    {
        threadToKill.Abort();
        reply = "Error";
        return reply;            
    }      
} 
```

然后我用类似的东西来称呼它：

```
string replyfromreader = CallWithTimeout(connectToHardware, 20000); 
```

这`connectToHardware`只是一个班轮，所以不需要张贴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:10:56.537

就.NET 状态而言，这没问题。您不会调用 EndInvoke()，它会在 10 分钟内泄漏资源，这是远程对象的默认生命周期。

在这种情况下，调用 Thread.Abort() 成功的机会*非常*小。托管线程需要处于警报等待状态才能中止，它永远不会是当线程深埋在最终等待某些设备驱动程序调用完成的本机代码中时。

让 CLR 处于不断尝试中止线程并且从未成功的状态并不是特别令人愉快，这不是我故意尝试过的事情，因此不知道副作用是什么。但是，这确实意味着您的代码将阻塞 Abort() 方法调用，因此您仍然没有解决问题。因此，最好的办法是*不要*中止线程，而只是放弃它。设置一个标记设备死机的标志，这样您就不会再尝试这样做了。

如果您想继续运行您的程序，即使设备没有处于可用状态，并且您想提供一种从问题中恢复的方法，那么您将需要一种完全不同的方法。您需要将设备相关代码放在单独的进程中。然后你可以在设备无响应时使用 Kill()，依靠 Windows 来清理弹片。最好使用命名管道或套接字等低级机制与该进程进行互操作，这样您就可以很容易地从断开连接中恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:51:23.300

避免`Thread.Abort`总是一个好主意。在您没有创建的线程上避免它甚至更好。

假设如果硬件不工作，并且您想要超时，那么是否`connectToHardware`让其自行超时并且不需要错误/异常详细信息并不重要，那么您可以使用任务并行库（TPL）[`System.Threading.Tasks.Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)：：

```
// True => worked, False => timeout
public static bool CallWithTimeout(Action method, TimeSpan timeout) {
  Exception e;
  Task worker = Task.Factory.StartNew(method)
                    .ContineueWith(t => {
                      // Ensure any exception is observed, is no-op if no exception.
                      // Using closure to help avoid this being optimised out.
                      e = t.Exception;
                    });
  return worker.Wait(timeout);
} 
```

（如果传递的`Action`可以与传递的交互，`CancellationToken`这可以变得更清晰，允许底层方法在超时时快速失败。）

# xml - xslt 将 maxOcurs=unbounded 转换为嵌套元素的序列

> ID：12315353
> 
> 赞同：0
> 
> 时间：2012-09-07T09:27:19.437
> 
> 标签：xml, xslt

我有以下 XML：

```
<person-list>
  <pid>100</pid>
  <pname>Tom Jones</pname>
  <pdescription>Some Text</pdescription>
  <pid>101</pid>
  <pname>John Thomas</pname>
</person-list> 
```

我想得到以下结果：

```
<person-list>
  <person>
    <pid>100</pid>
    <pname>Tom Jones</pname>
    <pdescription>Some Text</pdescription>
  </person>
  <person>
    <pid>101</pid>
    <pname>John Thomas</pname>
  </person>
</person-list> 
```

有可能实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:05:48.980

**在 XSLT1.0 中执行此操作的一种方法是定义一个键，将person-list**下的非 pid 元素按最前面的pid**元素**分组

```
<xsl:key 
   name="fields" 
   match="person-list/*[not(self::pid)]" 
   use="generate-id(preceding-sibling::pid[1])" /> 
```

然后，对于**person-list**元素，您将只选择**pid**元素

```
<xsl:apply-templates select="pid" /> 
```

**在与pid**匹配的模板中，您将创建一个**person**元素，并使用键输出其他元素：

```
<xsl:apply-templates select="key('fields', generate-id())" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="fields" match="person-list/*[not(self::pid)]" use="generate-id(preceding-sibling::pid[1])" />
   <xsl:template match="person-list">
      <person-list>
         <xsl:apply-templates select="pid" />
      </person-list>
   </xsl:template>

   <xsl:template match="pid">
      <person>
         <xsl:copy-of select="." />
         <xsl:apply-templates select="key('fields', generate-id())" />
      </person>
   </xsl:template>

   <xsl:template match="@*|node()" name="identity">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<person-list>
  <person>
    <pid>100</pid>
    <pname>Tom Jones</pname>
    <pdescription>Some Text</pdescription>
  </person>
  <person>
    <pid>101</pid>
    <pname>John Thomas</pname>
    <pdescription></pdescription>
  </person>
</person-list> 
```

请注意，通过这种方法，您可以向每个人的输入文档添加更多字段，而无需修改 XSLT。

还要注意使用“身份转换”来复制现有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:09:31.363

XSLT 2.0 解决方案：

```
<xsl:template match="person-list">
  <xsl:copy>
    <xsl:for-each-group select="*" group-starting-with="pid">
      <person>
        <xsl:copy-of select="current-group()"/>
      </person>
    </xsl:for-each-group>
  </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:55:35.360

是的，有办法做到这一点。例如，您可以找到“pid”元素，然后使用“following-sibling”将它们与以下 2 个元素组合并删除复制的标签：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

 <!-- IdentityTransform -->
 <xsl:template match="/ | @* | node()">
       <xsl:copy>
             <xsl:apply-templates select="@* | node()" />
       </xsl:copy>
</xsl:template>

<xsl:template match="/person-list/pid">
<person>
  <pid><xsl:value-of select="." /></pid>
  <pname><xsl:value-of select="following-sibling::*" /></pname>
  <pdescription><xsl:value-of select="following-sibling::*/following-sibling::*" />    </pdescription>
</person>
</xsl:template>
<xsl:template match="/person-list/pname" />
<xsl:template match="/person-list/pdescription"/>

</xsl:stylesheet> 
```

# excel - VBA循环excel表格列

> ID：12315358
> 
> 赞同：0
> 
> 时间：2012-09-07T09:27:54.837
> 
> 标签：excel, vba

我有一个 Excel 表，其中第一个字段是一个 ID。我想循环浏览第一列，检查 id 是否匹配。

问题是如何实现这一点，因为我不知道结束范围。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:39:05.147

或者，您可能想使用 Find 和 FindNext

```
'Here you might want to deduce the range using .End(xlUp).Row with
'65,535 in 2003- or about 1,000,000 as a starting point in 2007+
With Worksheets(4).Range("A:A")
    Set rng = .Find What:="what you're looking for"
    While Not rng Is Nothing
        'do something
        Set rng = .FindNext(rng)
    Wend
End With 
```

（未经测试，但让它工作应该不难）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:36:42.083

经过更多研究，我找到了答案：

```
For Each c In Worksheets(4).Columns("A").Cells 
```

我使用“Worksheets(4)”，因为表格在工作表 4 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T08:46:49.623

您可以循环遍历表中任何列的单元格，而无需行数。如果表在工作簿的 sheet1 中：

```
Dim rngCol as Range
Dim cl as Range
Set rngCol = Sheet1.Range("TableName[ColumnName]")
For Each cl in rngCol
    perform match of some type
Next cl 
```

上面的代码将仅循环遍历数据值，不包括标题行和总计行。不必指定表中的行数。

# asp.net - ASP.NET 表格控件 - 保存按钮回发丢失了我所有的行和单元格

> ID：12315360
> 
> 赞同：0
> 
> 时间：2012-09-07T09:27:57.260
> 
> 标签：asp.net, postback

我有一个 ASP.NET Table 控件，已将其拖到我的页面上。我必须动态创建我也做过的行和列。我表格中的一些单元格是文本框。我希望能够修改文本框值并保存更改。我在与表格相同的面板中添加了一个按钮，但是当我尝试遍历表格行时，我得到零。

为什么表格不记得我的行和单元格？因为我不想每次按下按钮时都重建表格，所以我已经加载了数据。我认为通过每次在 Page_Load 中创建表，我会来回访问数据库服务器。我真的很想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:45:29.030

您可以将动态创建的表存储在渲染后可以获取的视图中。

```
SqlConnection con =new  SqlConnection(ConfigurationManager.ConnectionStrings["dbstring"].ConnectionString);

private int ctrName = 0;
Table tableName = null;  

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        tableName = new Table();
        tableName.ID = "tableName";
        Session["tableName"] = tableName;
        ViewState["ctrName"] = ctrName;
    }
    ctrName = (Int32)ViewState["ctrName"];
    tableName = (Table)Session["tableName"];
    pnlName.Controls.Add(tableName);
}
private void GenerateName()
{
    ctrName++;
    TableRow row = new TableRow();
    TableCell cell = new TableCell();
    TextBox tb = new TextBox();
    tb.ID = "Txt_Name" + ctrName;
    tb.Width = 150;
    cell.Controls.Add(tb);
    row.Cells.Add(cell);
    tableName.Rows.Add(row);
    Session["tableName"] = tableName;
    ViewState["ctrName"] = ctrName;
} 
```

对于访问表详细信息：

```
tableName = (Table)Session["tableName"]; 
```

# java - 将字符串数组转换为 int 数组（泛型？）

> ID：12315362
> 
> 赞同：0
> 
> 时间：2012-09-07T09:28:02.540
> 
> 标签：java, generics, casting

我有一个字符串，我想用某个分隔符分割

```
private int [] mMaxValues;

    public void setMaximum(String maximum) {
       mMaxValues = splitByDelimiter(maximum, ":");
    } 
```

但是 splitByDelimiter 方法将字符串数组返回为 int 数组

```
public String[] splitByDelimiter(String list,String delimiter) {
    String[] items = list.split("\\" + delimiter);

    for (String s : items) {
        s.trim();
    }

    return items;
} 
```

解决此问题的最佳方法是什么？我猜迭代字符串数组并将它们转换为整数并不是最好的解决方案。

我也可以创建一个新的 splitByDelimiter 返回一个 int 数组，但我猜有比这更好的解决方案..

这是您可以使用泛型的情况吗（我对泛型没有很多经验）？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:33:01.850

您需要将字符串数组显式转换为 int 数组。采用：

```
public void setMaximum(String maximum) {
   Strin[] array = splitByDelimiter(maximum, ":");
   int i = 0;
   mMaxValues = new int[array.length];
   for (String value : array) {
       mMaxValues[i] = Integer.parseInt(value);
       i++;
   }
} 
```

您还需要处理一些可能导致的情况`NullPointerException`：

1.  `maximum`一片空白
2.  `array`一片空白
3.  `NumberFormatException`解析时可能会引发`Integer.parseInt(value)`，处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:29:53.473

循环遍历字符串数组并将它们存储在一个 int 数组中。

```
String input = ...;
String[] parts = input.split(':');
int[] result = new int[parts.length];
for (int n = 0; n < parts.length; ++n)
{
  result[n] = Integer.parseInt(parts[n]);
}
return result 
```

# android - android：从url加载后保留显示图像？

> ID：12315367
> 
> 赞同：1
> 
> 时间：2012-09-07T09:28:25.130
> 
> 标签：android, android-imageview, android-gridview

我正在从 xml 中检索大约 20 个图像 url，并将它们显示在 gridview 中。事情进展顺利，除了一个。

当我向下滚动**新图像时开始加载**，但是当我再次向上滚动时。先前加载的图像**再次启动加载**。

我该如何解决这个错误。以前加载的图像应该保留在布局中，为什么它不保留自己。

我正在使用适配器扩展 BaseAdapter 来查看图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:40:59.220

Gridview 与继承 AdapterView 的任何其他视图一样，仅使用您在屏幕上看到的视图数量。所以当你滚动你的视图将被重用。适配器的职责是将内容重新分配给视图。

所以，你需要缓存你的位图。在 Android 开发人员方面有一个非常好的教程。 [http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

（我在示例中使用网格视图）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:47:02.167

每次滚动时，都会调用适配器的 getView() 方法。

因此，每当一个视图进入屏幕时，都会在 getView() 方法中构建。您在该方法中构建新视图，我想您在调用该方法时下载图像，然后一种解决方案是缓存图像。如果您下载的图像很少且尺寸很小，则带有键 url 和值位图的简单 Map 可以解决问题，如果没有，请使用数据库。

每次调用 getView() 时，首先检查图像是否在缓存中，如果图像在缓存中，则使用它来构建视图，如果不下载它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T09:58:39.517

使用此博客[http://blog.blundell-apps.com/imageview-with-loading-spinner/](http://blog.blundell-apps.com/imageview-with-loading-spinner/)中的 LoaderImageView并添加以下功能

```
public void setImageDrawable(final MyGridViewItem obj) {
                mDrawable = null;
                if(obj.mDrawable != null){
                      mDrawable = obj.mDrawable
                imageLoadedHandler.sendEmptyMessage(COMPLETE);
                 return;
                }
                mSpinner.setVisibility(View.VISIBLE);
                mImage.setVisibility(View.GONE);
                new Thread(){
                        public void run() {
                                try {
                                          mDrawable = getDrawableFromUrl(imageUrl);
                                           obj.mDrawable = mDrawable;

                                        imageLoadedHandler.sendEmptyMessage(COMPLETE);
                                } catch (MalformedURLException e) {
                                        imageLoadedHandler.sendEmptyMessage(FAILED);
                                } catch (IOException e) {
                                        imageLoadedHandler.sendEmptyMessage(FAILED);
                                }
                        };
                }.start();
        } 
```

# oracle - 比较使用 ODBC 连接到 Oracle 数据库的两个 excel 文件

> ID：12315368
> 
> 赞同：0
> 
> 时间：2012-09-07T09:28:28.587
> 
> 标签：oracle, excel, odbc, compare

我有两个excel文件。两者都执行相同的任务，但其中一个似乎是旧版本。我必须对它们之间的差异进行故障排除，以查看是否存在字段长度差异或排序差异等细微之处。

明显的差异是一个文件自动连接到数据库。（期望的结果）另一个每次都提示输入服务器名称，这对用户来说很烦人。（见下面的截图）

我想我有两个非常相关的问题：

*   如何将文件相互比较？
*   ODBC 提示框从哪里检索填充的字段？（也许我可以修改它以包含服务器名称）

[http://i.imgur.com/ToJgk.jpg](http://i.imgur.com/ToJgk.jpg)

软件：

Excel 2003 甲骨文 11G 11.1.0.7.0

# php - 删除单引号后跟双引号

> ID：12315369
> 
> 赞同：0
> 
> 时间：2012-09-07T09:28:29.200
> 
> 标签：php, xss

使用PHP，我必须检测'"（单引号后跟双引号）以防止XSS。因此，我实现了以下功能。

```
function xss_cleaner_new($input_str){
    $return_str = preg_replace('/"\'/','&l', &input_str);
    return $return_str;
} 
```

但是，它似乎只检测（第一个单引号）而不是（单引号后跟双引号）

如何成功检测 '"（单引号后跟双引号）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:32:06.780

试试这个：

```
preg_replace("/'\"/","&l",$input_str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:53:47.083

考虑一下。你说你想要的是匹配一个单引号后跟一个双引号。但只需查看您的正则表达式并仔细考虑即可。

您有一个非插值的 PHP 字符串文字`'/"\'/'`被输入到您的函数调用中，其中包含一个转义的撇号。字符串文字的值是`/"'/`，所以现在它是一个`/`-delineated 正则表达式。去掉`/`s 因为我们已经说过它是一个正则表达式，你得到`"'`，或者，一个**双引号后跟一个单引号**，这与你想要的完全相反。换一种方式`'"`，我们可以翻转它们（'回到你开始的地方，只有你没有错误。`/``/'"/``'/\'"/'`

# javascript - Raphael 自定义属性（Arc）导致圆形变形

> ID：12315371
> 
> 赞同：3
> 
> 时间：2012-09-07T09:28:40.170
> 
> 标签：javascript, jquery, svg, raphael, geometry

我正在为 jQuery 开发一个进度条插件，它利用 Raphael 来实现平滑的图形。

我试图转换[这个 Raphael 示例（极坐标时钟）](http://raphaeljs.com/polar-clock.html)提供的属性函数。

问题是，起初我没有注意到拉斐尔的例子也有变形错误。相对较大的圆圈只是减轻它。看着较小的，这是显而易见的。

是的，我基本上已经复制粘贴了该功能并进行了一些小调整，但最终结果出现了同样的错误。

我已经设置了一个 JSBin，我在场景中添加了参考圆圈，因此更容易发现问题：http: [//jsbin.com/ekovir/1](http://jsbin.com/ekovir/1)

如何调整 Arc 函数以绘制正确的圆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:57:23.747

我认为这是 Chrome 的 SVG 渲染实现中的一个错误。至少在 FireFox 和 Safari 中它看起来要好得多。

另外，在选择圆弧到点时，我认为最好使用`(center.x + radius * cos(a-0.01), center.y + radius * sin(a-0.01))`, 而不是`(center.x + radius * cos(a) - 0.01, center.y + radius * sin(a))`，否则中心可能会移动一点。

作为一种解决方法，我建议为进度条创建一组分段，然后在工作完成时更改它们的颜色，而不是在旧分段上绘制新分段。这在任何浏览器中都应该看起来不错，而且我认为如果没有对比鲜明的背景圆圈，这些缺陷不容易被发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:20:40.480

我找到了导致圆圈变形的原因。

我曾经`stroke-width`设置过圆的“胖”/“帽”，越大越变形。

至少，这些是我的观察结果，从技术上讲，它也可能是由其他原因引起的。

无论如何，为了得到合适的甜甜圈，我最终采用了这种方法：

```
/**
 * Donut circle drawing
 *
 * @param  integer  start       Percentage to start with
 * @param  float    diameter
 * @param  float    fat         How fat should the circle bar be
 * @return object
 */
var fatDonutArc = function (start, diameter, fat)
{
    var center = diameter / 2;
    var outerRadius = center;
    var innerRadius = center - fat; // subtract fat

    var alpha = 360 / 100 * start;
    var a = (90 - alpha) * Math.PI / -180; // -180 starts to draw from 12 o'clock

    // calculate outer ring point coordinates
    var outerX = center + outerRadius * Math.cos(a);
    var outerY = center + outerRadius * Math.sin(a);

    // calculate inner ring point coordinates
    var innerX = center + innerRadius * Math.cos(a);
    var innerY = center + innerRadius * Math.sin(a);

    // path cache
    var path;

    if (start !== 100)
    {
        path = [
            // move to start point of inner ring
            [
                "M",
                center,
                center - innerRadius
            ],

            // draw a line to outer ring
            [
                "L",
                center,
                center - outerRadius
            ],

            // arc to outer ring end
            [
                "A",
                outerRadius,
                outerRadius,
                0,
                +(alpha > 180),
                1,
                outerX,
                outerY
            ],

            // move to inner ring end
            [
                "L",
                innerX,
                innerY
            ],

            // arc to inner ring start
            [
                "A",
                innerRadius,
                innerRadius,
                0,
                +(alpha > 180),
                0,
                center,
                center - innerRadius
            ]
        ];
    }
    else
    {
        path = [
            // move to outer ring start
            [
                "M",
                center,
                center - outerRadius
            ],

            // arc around the clock
            [
                "A",
                outerRadius,
                outerRadius,
                0,
                +(alpha > 180),
                1,
                outerX - .1, // subtract, otherwise the path becomes "reset"
                outerY
            ],

            // connect
            [
                "z"
            ],

            // move to inner circle start
            [
                "M",
                innerX,
                innerY
            ],

            // arc around the clock
            [
                "A",
                innerRadius,
                innerRadius,
                0,
                +(alpha > 180),
                0,
                innerX + .1, // subtract, otherwise the path becomes "reset"
                innerY
            ],

            // and connect
            [
                "z"
            ]
        ];
    }

    return {
        path : path
    };
}; 
```

这是以下内容的混搭：[raphael.js - 将饼图转换为圆环图](https://stackoverflow.com/questions/7972347/raphael-js-converting-pie-graph-to-donut-graph)+ [http://raphaeljs.com/polar-clock.html](http://raphaeljs.com/polar-clock.html)

在这里，我设置了一个示例，以查看它的实际效果：http: [//jsbin.com/erusos/1](http://jsbin.com/erusos/1)

还有一个悬而未决的问题：**在 Chrome 中，是 CSS 渲染器，没有完全环绕圆圈，还是 SVG？**

享受！

# r - 将数据分组到R中的范围

> ID：12315374
> 
> 赞同：6
> 
> 时间：2012-09-07T09:28:49.203
> 
> 标签：r, grouping

假设我在**R**中有一个数据框，其中一列中有学生的姓名，另一列中有他们的分数。这些分数从 20 到 100 不等。

```
> mydata  
id  name   marks gender  
1   a1    56     female  
2   a2    37      male 
```

我想根据获得分数的标准将学生分组，使每组分数之间的差异应该大于 10。我尝试使用函数表，它给出了每个范围内的学生人数，例如20-30, 30-40，但我希望它选择那些在给定范围内得分的学生，并将他们所有的信息放在一个组中。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T09:54:36.587

我不确定“将他们的所有信息放在一个组中”是什么意思，但这是一种获取数据框列表的方法，该列表将您的原始数据框拆分，其中每个元素都是标记内学生的数据框范围 10：

```
mydata <- data.frame(
  id = 1:100,
  name = paste0("a",1:100),
  marks = sample(20:100,100,TRUE),
  gender = sample(c("female","male"),100,TRUE))

split(mydata,cut(mydata$marks,seq(20,100,by=10))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T12:20:18.833

我认为@Sacha 的[回答](https://stackoverflow.com/a/12315805/1270695)应该足以满足您的需要，即使您有不止一套。

您没有明确说明您希望如何在原始帖子中“分组”数据，并且在您添加第二个数据集的评论中，您没有明确说明您是否打算首先“合并”这些数据（`rbind`正如评论中所建议的那样就足够了）。

因此，这里有几个选项，每个选项在输出中都有不同级别的详细信息或实用程序。希望其中之一适合您的需求。

首先，这里有一些示例数据。

```
# Two data.frames (myData1, and myData2)
set.seed(1)
myData1 <- data.frame(id = 1:20, 
                      name = paste("a", 1:20, sep = ""),
                      marks = sample(20:100, 20, replace = TRUE),
                      gender = sample(c("F", "M"), 20, replace = TRUE))
myData2 <- data.frame(id = 1:17,
                      name = paste("b", 1:17, sep = ""),
                      marks = sample(30:100, 17, replace = TRUE),
                      gender = sample(c("F", "M"), 17, replace = TRUE)) 
```

其次，“分组”的不同选择。

*   *选项 1*：返回（在 a 中`list`）`myData1`与`myData2`给定条件匹配的值。*对于这个例子，你最终会得到一个包含两个`data.frame`s 的列表。*

    ```
    lapply(list(myData1 = myData1, myData2 = myData2), 
           function(x) x[x$marks >= 30 & x$marks <= 50, ]) 
    ```

*   *选项 2*：返回（在 a 中`list`）每个数据集分成两个，一个用于`FALSE`（不符合规定的条件），一个用于`TRUE`（确实符合规定的条件）。换句话说，创建四个组。*对于此示例，您最终将得到一个包含两个列表项的嵌套列表，每个列表项都有两个`data.frame`s。*

    ```
    lapply(list(myData1 = myData1, myData2 = myData2), 
           function(x) split(x, x$marks >= 30 & x$marks <= 50)) 
    ```

*   *选项 3*：比第一个更灵活。这本质上是将@Sacha 的示例扩展到一个列表。你可以在任何地方设置你的休息时间，在我看来，这是一个非常方便的选择。*对于此示例，您最终将得到一个包含两个列表项的嵌套列表，每个列表项都有多个`data.frame`s。*

    ```
    lapply(list(myData1 = myData1, myData2 = myData2),
           function(x) split(x, cut(x$marks, 
                                    breaks = c(0, 30, 50, 75, 100), 
                                    include.lowest = TRUE))) 
    ```

*   *选项 4*：首先组合数据并使用选项 1 中描述的分组方法。*对于此示例，您最终将得到一个`data.frame`仅包含与给定条件匹配的值的单个数据。*

    ```
    # Combine the data. Assumes all the rownames are the same in both sets
    myDataALL <- rbind(myData1, myData2)
    # Extract just the group of scores you're interested in
    myDataALL[myDataALL$marks >= 30 & myDataALL$marks <= 50, ] 
    ```

*   *选项5*：使用组合数据，`split`将数据分为两组：一组符合规定条件，另一组不符合。*对于此示例，您最终将得到一个包含两个`data.frame`s 的列表。*

    ```
    split(myDataALL, myDataALL$marks >= 30 & myDataALL$marks <= 50) 
    ```

我希望这些选项之一满足您的需求！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-07T14:25:07.367

我遇到了同样的问题，在研究了一些关于堆栈溢出的答案后，我想出了以下解决方案：

第 1 步：定义范围 第 2 步：查找范围内的元素 第 3 步：绘图

示例代码如下所示：

```
 range = NULL
   for(i in seq(0, max(all$downlink), 2000)){
    range <- c(range, i)
   }
   counts <- numeric(length(range)-1);
   for(i in 1:length(counts)) {
   counts[i] <- length(which(all$downlink>=range[i] & all$downlink<range[i+1]));
   }
   countmax = max(counts)
   a = round(countmax/1000)*1000
   barplot(counts, col= rainbow(16), ylim = c(0,a)) 
```

# linux - 无法在 2 个 TSI148 VMEbus 控制器之间设置可靠的 DMA 传输

> ID：12315376
> 
> 赞同：1
> 
> 时间：2012-09-07T09:28:56.240
> 
> 标签：linux, linux-device-driver, vxworks, dma

我正在寻求帮助，最重要的是来自 VMEbus 专家。

我正在开展一个项目，旨在设置从运行 vxWorks 6.8 的实时 powerpc 控制器 (Emerson MVME4100) 到运行带有内核 2.6.32 的 Debian 6 的 Linux Intel 计算机 (Xembedded XVME6300) 的通信通道。该通道运行在 VME 总线上；两台计算机都在 VME 机箱中，并且都使用 Tundra Tsi148 芯片组。英特尔计算机被明确配置为系统控制器，而实​​时计算机则明确没有。

设置：对于 Intel 计算机，我编写了一个自定义驱动程序，该驱动程序创建了一个 4MB 内核缓冲区，并通过从属窗口在 VME 总线上共享它；对于实时计算机，我设置了一个 DMA 传输来重复转发正好 48640 字节的块；快速连续填充测试数据字节（零、一、二等）（如果可能，每 32 毫秒一次） 对于英特尔计算机，我从驱动程序读取内核缓冲区，以查看数据是否正确到达一个手动启动的 Python 程序。

期望：我期望从 Python 程序中看到相同的数据（零、一等）。我预计传输时间大致对应于所选的总线速度（通常为 290 us 或 145 us，具体取决于总线速度），加上合理的 DMA 设置开销（高达 10us？我愿意接受更大的数字，比如数百个微秒，如果这是公共汽车*通常*需要的）

结果：

*   有时数据根本没有到达，“传输”时间约为 2000 us
*   有时数据可靠地到达，但传输时间约为 98270us 或 98470us，具体取决于所选的总线速度。

问题：我怎样才能使传输可靠并降低这些可怕的延迟？接下来我应该搜索什么大方向？

（如果可以的话，我想用 VMEbus 标记）

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:56:48.357

我对这个问题的评论描述了我如何让总线工作： - 确保总线两侧的 2eSST320 - 确保 DMA 事务使用有效的块大小（最大有效为 4096 字节）

我实现了 150MBytes/s 的有效速度（总线可以达到 320MBytes/s，但 tsi148 芯片以导致显着开销而闻名）。这对我来说已经足够好了。

# java - IWAB0489E 将 Web 服务部署到 Axis 运行时时出错

> ID：12315377
> 
> 赞同：0
> 
> 时间：2012-09-07T09:28:57.377
> 
> 标签：java, eclipse, web-services, axis2, tomcat5.5

我正在关注链接中的示例

[WS 示例](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)

启动服务器后出现错误

```
IWAB0489E Error when deploying Web service to Axis runtime
IWAB0489E Error when deploying Web service to Axis runtime
  axis-admin failed with  {http://schemas.xmlsoap.org/soap/envelope/}Client The service cannot be found for the endpoint reference (EPR) http://localhost:8080/Axis2WSTest/services/AdminService 
```

我尝试使用 EClipse Galileo ， Ganymede

Tomcat 5.5 和 6.0.35

axis2-1.6.2-bin

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-16T13:21:04.883

Web Service->Configuration->Web Service Runtime，选择axis2而不是axis。

# c++ - 将 const CName 作为此参数传递会丢弃限定符

> ID：12315387
> 
> 赞同：2
> 
> 时间：2012-09-07T09:29:58.653
> 
> 标签：c++, class, constants, qualifiers

我在通过函数传递常量类时遇到问题。

```
 // test the constructors
    auto    CName       nameOne("Robert", "Bresson");
    const   CName       nameTwo = nameOne;
    auto    CName       nameThree;

    // display the contents of each newly-constructed object...

    // should see "Robert Bresson"
    cout << "nameOne = ";
    nameOne.WriteFullName();
    cout << endl;

    // should see "Robert Bresson" again
    cout << "nameTwo = ";
    nameTwo.WriteFullName();
    cout << endl; 
```

一旦编译器点击 nameTwo.WriteFullName() 我就会得到放弃限定符的错误。我知道这个类是一个常数，但是我不知道如何解决它。

该函数在一个头文件中，如下所示：

```
void    const WriteFullName(ostream& outstream = cout)
{
    outstream << m_first << ' ' << m_last;
} 
```

当将 const 放在函数头的后面时，我收到此错误

```
main.cpp:(.text+0x51): undefined reference to `CName::CName()'
main.cpp:(.text+0x7c): undefined reference to `CName::WriteFullName(std::basic_ostream<char, std::char_traits<char> >&) const'
main.cpp:(.text+0xbb): undefined reference to `CName::WriteFullName(std::basic_ostream<char, std::char_traits<char> >&) const'
main.cpp:(.text+0xf7): undefined reference to `CName::WriteFullName(std::basic_ostream<char, std::char_traits<char> >&) const'
main.cpp:(.text+0x133): undefined reference to `operator>>(std::basic_istream<char, std::char_traits<char> >&, CName&)'
main.cpp:(.text+0x157): undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, CName const&)'
main.cpp:(.text+0x1f4): undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, CName const&)'
main.cpp:(.text+0x22b): undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, CName const&)'
main.cpp:(.text+0x25f): undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, CName const&)'
main.cpp:(.text+0x320): undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, CName const&)'
main.cpp:(.text+0x347): undefined reference to `operator>>(std::basic_istream<char, std::char_traits<char> >&, CName&)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:42:32.620

您所拥有的是*链接器错误*，这意味着您没有链接所有源文件。我猜这个`CName`类的代码在一个单独的源文件中，你忘了用它来构建/链接。

**编辑：**编译和链接多个文件

要从多个源文件制作程序，您必须在命令行上传递*所有源文件，如下所示：*

```
$ g++ main.cpp cname.cpp -o myprogram 
```

上面的命令同时使用*了两个*源文件，并且该`-o`选项告诉编译器给程序起什么名字。

您还可以单独编译每个源文件，然后将它们*链接*在一起：

```
$ g++ main.cpp -c -o main.o
$ g++ cname.cpp -c -o cname.o
$ g++ main.o cname.o -o myprogram 
```

该`-c`选项告诉编译器创建一个目标文件，以后可以用来链接你的程序。最后一个命令实际上不会编译任何源代码，而是使用两个目标文件来创建程序。

# android - Android RealViewSwitcher 部分显示视图

> ID：12315388
> 
> 赞同：0
> 
> 时间：2012-09-07T09:30:00.077
> 
> 标签：android, swipeview

我有以下问题。我正在使用 RealViewSwitcher 类（它扩展了 ViewGroup 并且可以在[此处](http://marcreichelt.blogspot.com/2010/09/android-use-realviewswitcher-to-switch.html)创建）。我有三个视图，并且在它们之间滑动在两个方向上都很好。但是，当我动态更改方向时（例如，我在垂直视图中的屏幕 1 上并将方向更改为水平） - 视图仅显示部分（屏幕的三分之一是第一个视图，其他两个三分之一 - 第二个看法）。

编码：

```
// my activity method
@Override
public void onConfigurationChanged(Configuration newConfig)
{
// ...
realViewSwitcher.setCurrentScreen(1);
// ...
}

// realViewSwitcher method
public void setCurrentScreen(int currentScreen) {
    mCurrentScreen = Math.max(0, Math.min(currentScreen, getChildCount() - 1));
    scrollTo(mCurrentScreen * getWidth(), 0);
    invalidate();
} 
```

UPD(10.09.2012)：添加了一些代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:58:49.350

将以下代码段添加到您的 RealViewSwitcher 类中，

```
public void orientationSnapToScreen(Context ctx)
        {
            Display display = ((WindowManager) ctx.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay(); 
            int displayWidth = display.getWidth();

            mNextScreen = Math.max(0, Math.min(getCurrentScreen(), getChildCount() - 1));
            final int newX = mNextScreen * displayWidth;
            final int delta = newX - getScrollX();

            mScroller.startScroll(getScrollX(), 0, delta, 0, 0);
        } 
```

并将以下方法添加到您调用 RealViewSwitcher 类的主要活动中

```
@Override
    public void onConfigurationChanged(Configuration newConfig) 
    {
        super.onConfigurationChanged(newConfig);
        realViewSwitcher.orientationSnapToScreen(this);
    } 
```

# mysql - MYSQL：如何限制内连接？

> ID：12315389
> 
> 赞同：0
> 
> 时间：2012-09-07T09:30:01.060
> 
> 标签：mysql, sql, select, limit, inner-join

我的查询需要一些帮助。我有 2 张桌子：

```
all: art|serie
sootv: name|art|foo 
```

我需要得到像名字|系列这样的结果。我的查询是：

```
SELECT t2.NAME,
    t1.serie
FROM (
    SELECT *
    FROM `all`
    WHERE `serie` LIKE '$serie'
    ) t1
INNER JOIN sootv t2
    ON t1.art = t2.art; 
```

它可以工作，但`sootv`表包含类似的数据

```
name|art|foo
abc | 1 | 5
abc | 1 | 6 
```

我得到 2 个相同的结果。它不是我需要的。请帮帮我 - 我怎么才能得到一个结果：abc | 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:36:01.847

附加条款**[`DISTINCT`](http://www.w3schools.com/sql/sql_distinct.asp)**_`SELECT`

```
SELECT DISTINCT t2.NAME,
       t1.serie
FROM (
    SELECT *
    FROM `all`
    WHERE `serie` LIKE '$serie'
    ) t1
INNER JOIN sootv t2
    ON t1.art = t2.art; 
```

或尝试优化它

```
SELECT DISTINCT t2.NAME,
       t1.serie
FROM `all` t1
      INNER JOIN sootv t2
          ON t1.art = t2.art
WHERE t1.`serie` LIKE '$serie' 
```

# mysql - 如何用 MySQL 拆分字符串？

> ID：12315391
> 
> 赞同：0
> 
> 时间：2012-09-07T09:30:03.493
> 
> 标签：mysql, string, split

我有一个像这样的字符串：

```
'11,111' 
```

我想得到这个 11,111。这在 MySQL 上可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:35:46.370

试试这个：

```
set @field='11,111';
select substr(@field,1,LOCATE(',',@field)-1) as col_1,
substr(@field,LOCATE(',',@field)+1,length(@field)-LOCATE(',',@field)) as col_2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:42:51.707

我在本周早些时候写了一个答案，其中 MySQL 程序将逗号分隔的值列表拆分为单个值[https://stackoverflow.com/a/12264448/1368730](https://stackoverflow.com/a/12264448/1368730)

如果您需要更具体的答案，您需要说明您对拆分值的操作。

# maven - 如何配置 maven jar 插件以排除配置文件上的属性

> ID：12315394
> 
> 赞同：1
> 
> 时间：2012-09-07T09:30:10.370
> 
> 标签：maven, maven-jar-plugin

我的 pom 中有这个配置

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.2</version>
    <configuration>
        <excludes>                      
            <exclude>**/logging/*</exclude>
            <exclude>**/config/*</exclude>
        </excludes>
    </configuration>
</plugin> 
```

我使用配置文件来处理从本地环境到生产环境的不同行为。使用本地配置文件执行 mvn install 时是否可以不激活排除项？我试图像这样在本地环境中设置一个空白属性，但插件抱怨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:19:26.060

这是一种解决方案，也许存在更好的解决方案。我认为您可以做的最简单的事情是让您的 DEV 环境不受 jar 插件的任何配置的影响。然后将您的 PROD 配置放在专用配置文件中：

```
<profiles>                                                         
    <profile>                                                      
        <id>PROD</id>                                              
        <build>                                                    
            <plugins>                                              
                <plugin>                                           
                    <groupId>org.apache.maven.plugins</groupId>    
                    <artifactId>maven-jar-plugin</artifactId>      
                    <version>2.2</version>                         
                    <configuration>                                
                        <excludes>                                 
                            <exclude>**/logging/*</exclude>        
                            <exclude>**/config/*</exclude>         
                        </excludes>                                
                    </configuration>                               
                </plugin>                                          
            </plugins>                                             
        </build>                                                   
    </profile>                                                     
</profiles> 
```

当您需要构建生产 jar 时，启动：

```
mvn clean install -PPROD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:21:43.130

日志记录和配置文件资源是否仅用于测试？如果是，请将它们放入`${basedir}/src/test/resources`. 它们将位于您的测试的类路径中，但不会出现在最终的 jar 中，并且您不需要特定的 jar 插件配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:00:17.617

我发现的最佳解决方法是在 DEV 环境中执行时使用无效值进行过滤。

```
<profiles>
    <profile>
        <id>env-local</id>
        <activation>
            <property>
                <name>env</name>
                <value>local</value>
            </property>
        </activation>
        <properties>
            <jndi.iban0>cont0Data</jndi.iban0>
            <config.file.path>classpath:config</config.file.path>
            <logging.file.path>classpath:logging</logging.file.path>
            <exclude.logging>none</exclude.logging>
            <exclude.config>none</exclude.config>
        </properties>
    </profile>
</profiles> 
```

# perl - 数据库 fetchrow_array 失败的长截断 DBI 属性

> ID：12315397
> 
> 赞同：8
> 
> 时间：2012-09-07T09:30:22.387
> 
> 标签：perl, dbi

我正在使用 perl 脚本从我的数据库中提取 url，在该脚本中我使用**fetchrow_array**从数据库中提取 URL，这工作正常，直到我遇到一个很长的 URL `georgelog24.blog.iskreni.net/?bid=6744d9dcf85991ed2e4b8a258153a1ab&lid=ff9963b9a798ea335b75b5f7c0c295d1`
，然后它开始给我这个错误。

```
DBD::ODBC::st fetchrow_array failed: st_fetch/SQLFetch (long truncated DBI attribute LongTruncOk not set and/or LongReadLen too small) (SQL-HY000) [state was HY000 now 01004]
[Microsoft][ODBC SQL Server Driver]String data, right truncation (SQL-01004) at C:\test\multihashtest2.pl line 44. 
```

我相信这是在数据库方面，因为我一直用来拉 URL 的代码以前工作过。我使用的数据库是*MSSQL server 2005。*

数据库中的 URL 列当前使用**文本**类型，但我尝试将其更改为**varchar(max)**和**nvarchar(max)**但错误仍然存​​在。

经过一番反复试验，我发现 url 的最大长度然后我可以使用 fetchrow_array 成功查询为 81 个字符。而且由于 URL 有时可以跨越荒谬的长度，我不能对 URL 长度进行限制。

任何人都可以帮助我理解并建议解决这个问题吗？

仅供参考：第 44 行是我下面代码中的第一行

```
while (($myid,$url) = $statement_handle->fetchrow_array()) { # executes as many threads as there are jobs to do 
    my $thread = threads->create(\&webcrawl); #initiate thread
    my $tid = $thread->tid;
    print "  - Thread $tid started\n";   #obtain thread no. and print
    push (@Threads, $thread);   #push thread into array for "housekeeping" later on
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T10:09:10.890

尝试：

```
#not anymore errors if content is truncated - you don't necessarily want this
$statement_handle->{'LongTruncOk'} = 1;

#nice, hard coded constant for the length of data to be read from Longs
$statement_handle->{'LongReadLen'} = 20000;
while (($myid,$url) = $statement_handle->fetchrow_array()) { # executes as many threads as there are jobs to do 
    my $thread = threads->create(\&webcrawl); #initiate thread
    my $tid = $thread->tid;
    print "  - Thread $tid started\n";   #obtain thread no. and print
    push (@Threads, $thread);   #push thread into array for "housekeeping" later on
} 
```

另外，我建议您尝试[`Parallel::ForkManager`](http://search.cpan.org/~dlux/Parallel-ForkManager-0.7.9/lib/Parallel/ForkManager.pm)并行化作业 - 我发现它比线程更直观和易于使用

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T10:00:30.373

请查看 DBI 属性[LongTruncOk](http://search.cpan.org/~timb/DBI/DBI.pm#LongTruncOk)和[LongReadlen](http://search.cpan.org/~timb/DBI/DBI.pm#LongReadLen)

您将需要接受截断或设置最大大小，因为 text 和 varchar(max) 列可能很大，因此如果将其留给 DBD，它将别无选择，只能分配大量内存以防列是最大值该列的大小。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-06T03:01:17.473

**要点：**您需要在准备语句**之前在***数据库句柄* 上设置 LongReadLen 和/或 LongTruncOk 属性，如此[处](http://docstore.mik.ua/orelly/linux/dbi/ch06_02.htm)所述。

 **在获取数据之前尝试在准备好的*语句句柄*上设置它不会影响返回数据的截断。**

# python - 检查字符串是否使用 Python 以 base64 编码

> ID：12315398
> 
> 赞同：46
> 
> 时间：2012-09-07T09:30:27.513
> 
> 标签：python, base64

有没有一种好方法可以检查字符串是否`base64`使用 Python 编码？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2017-08-28T22:27:52.260

我一直在寻找相同问题的解决方案，然后一个非常简单的解决方案让我大吃一惊。您需要做的就是解码，然后重新编码。如果重新编码的字符串等于编码的字符串，那么它是 base64 编码的。
这是代码：

```
import base64

def isBase64(s):
    try:
        return base64.b64encode(base64.b64decode(s)) == s
    except Exception:
        return False 
```

而已！

编辑：这是在 Python 3 中同时适用于字符串和字节对象的函数版本：

```
import base64

def isBase64(sb):
        try:
                if isinstance(sb, str):
                        # If there's any unicode here, an exception will be thrown and the function will return false
                        sb_bytes = bytes(sb, 'ascii')
                elif isinstance(sb, bytes):
                        sb_bytes = sb
                else:
                        raise ValueError("Argument must be string or bytes")
                return base64.b64encode(base64.b64decode(sb_bytes)) == sb_bytes
        except Exception:
                return False 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-09-07T09:32:39.743

```
import base64
import binascii

try:
    base64.decodestring("foo")
except binascii.Error:
    print "no correct base64" 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-07T11:14:30.623

这是不可能的。您可以做的最好的事情是验证一个字符串可能是有效的 Base 64，尽管许多仅由 ASCII 文本组成的字符串可以像 Base 64 一样被解码。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-05-04T17:35:23.210

我使用的解决方案基于先前的答案之一，但使用了更多最新的调用。

在我的代码中，my_image_string 要么是原始形式的图像数据本身，要么是 base64 字符串。如果解码失败，那么我认为它是原始数据。

注意 的`validate=True`关键字参数 `b64decode`。这是解码器生成断言所必需的。没有它，就不会有关于非法字符串的投诉。

```
import base64, binascii

try:
    image_data = base64.b64decode(my_image_string, validate=True)
except binascii.Error:
    image_data = my_image_string 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-03T03:29:39.377

如果编码字符串的长度是4的倍数，则可以解码

```
base64.encodestring("whatever you say").strip().__len__() % 4 == 0 
```

所以，你只需要检查字符串是否可以匹配上面的内容，那么它不会抛出任何异常（我猜 =.=）

```
if len(the_base64string.strip()) % 4 == 0:
    # then you can just decode it anyway
    base64.decodestring(the_base64string) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-23T01:56:02.947

在尝试解码之前，我喜欢先进行格式检查，因为它是最轻量级的检查，并且不会返回误报，因此遵循[快速失败的](https://dzone.com/articles/fail-fast-principle-in-software-development)编码原则。

这是此任务的实用程序函数：

```
RE_BASE64 = "^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$"
def likeBase64(s:str) -> bool:
    return False if s is None or not re.search(RE_BASE64, s) else True 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-23T11:59:24.003

我知道我迟到了将近 8 年，但您可以使用正则表达式，因此您可以验证给定的输入是否为 BASE64。

```
import re

encoding_type = 'Encoding type: '
base64_encoding = 'Base64'

def is_base64():
    element = input("Enter encoded element: ")
    expression = "^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$"

    matches = re.match(expression, element)

    if matches:
        print(f"{encoding_type + base64_encoding}")
    else:
        print("Unknown encoding type.")

is_base64() 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-10-02T10:42:35.127

@geoffspear 是正确的，因为这不是 100% 可能的，但是您可以通过检查字符串标头以查看它是否与 base64 编码的字符串匹配（re：[如何检查字符串是否为 base64 编码](https://stackoverflow.com/a/8571649)）非常接近。

```
# check if a string is base64 encoded.
def isBase64Encoded(s):
    pattern = re.compile("^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$")
    if not s or len(s) < 1:
        return False
    else:
        return pattern.match(s) 
```

也不是在我的情况下，如果字符串为空以避免解码，我想返回 false ，因为解码没有任何用处。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-01-09T04:54:57.577

使用 Python 正则表达式

```
import re

txt = "VGhpcyBpcyBlbmNvZGVkIHRleHQ="
x = re.search("^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$", txt)

if (x):
  print("Encoded")
else:
  print("Non encoded") 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-01-08T18:11:01.807

```
def is_base64(s):
    s = ''.join([s.strip() for s in s.split("\n")])
    try:
        enc = base64.b64encode(base64.b64decode(s)).strip()
        return enc == s
    except TypeError:
        return False 
```

就我而言，我的输入 ,`s`有换行符，在比较之前我必须去掉这些换行符。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-22T14:48:59.530

```
x = 'possibly base64 encoded string'
result = x
try:
   decoded = x.decode('base64', 'strict')
   if x == decoded.encode('base64').strip():
       result = decoded
except:
   pass 
```

如果 x 确实被编码，则此代码放入结果变量解码字符串，如果没有，则只放入 x。只是尝试解码并不总是有效。

# php - 如何从 PHP 发送电子邮件

> ID：12315400
> 
> 赞同：-1
> 
> 时间：2012-09-07T09:30:27.450
> 
> 标签：php

我正在尝试从我的 PHP 脚本发送一封电子邮件，但它不起作用。这是我得到的错误：

```
Failed to connect to mailserver at "localhost" port 25, verify your "SMTP" and 
"smtp_port" setting in php.ini or use ini_set() 
```

所以我尝试通过使用`iniset()`函数更改端口和smtp端口，我可能不知道是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:37:53.040

如果您使用的是 linux，则必须安装邮件服务器，即 postfix 才能这样做，发出此命令`apt-get install postfix`，然后服务器启动，您可以使用 php`mail()`功能发送电子邮件！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:35:37.043

您需要在本地主机上设置邮件服务器。或者，您可以连接到外部邮件服务器。地狱，即使是 Gmail 也允许您通过 SMTP 连接（很酷用于测试电子邮件脚本等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T08:08:48.817

> 所以我尝试使用 iniset() 函数更改端口和 smtp 端口，我可能不知道是否可能。

这是。请参阅[邮件配置手册](http://php.net/manual/en/mail.configuration.php)。这两个条目都标记为 PHP_INI_ALL

`iniset`您可以通过使用然后再次尝试您的邮件呼叫来证明这一点。错误消息要么消失要么改变（例如抱怨它无法连接到你说要使用的任何服务器而不是 localhost:25）。

# c# - 'PayPal.Manager.ConfigManager' 的类型初始化器抛出异常 -->Paypal SetExpressCheckout

> ID：12315401
> 
> 赞同：1
> 
> 时间：2012-09-07T09:30:31.373
> 
> 标签：c#, paypal, express-checkout

我在使用 PayPal 的 API 时遇到了一些麻烦。当我尝试调用 SetExpressCheckout 方法时（并且我相信我添加了与示例中相同的项目/类），我收到以下错误：

```
The type initializer for 'PayPal.Manager.ConfigManager' threw an exception. 
```

给出的内部异常是：

```
{"Cannot read config file"} 
```

这让我想到：我的 PayPal API 调用方法在一个程序集中，并且我有一个 Web 服务，它调用此程序集中的方法以使用 PayPal API。很简单，它的工作原理是这样的：

```
Web Service ---calls---> Assembly ---calls---> PayPal API 
```

有人知道为什么会这样吗？它真的让我感到困惑，它如何在示例项目中工作，但在我自己的项目中却不行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:09:44.537

由于它还没有出现任何答案，而且我在 MVC3 .Net 应用程序中实现 PayPal API 时遇到了同样的错误，以下对我有用。它直接取自 PayPal API 示例 .Net Project Web.Config：

在您的 Web.Config 文件中，在顶部（作为第一个子元素）添加如下引用：

```
<configSections>
  <section name="paypal" type="PayPal.Manager.SDKConfigHandler, PayPal_Merchant_SDK" />
</configSections> 
```

然后添加 PayPal SDK 配置

```
<paypal>
  <settings>
    <!-- The URL that the user must be redirected to in order to login and approve some payment actions-->
    <add name="paypalUrl" value="https://www.sandbox.paypal.com/webscr?cmd="/>
    <!-- The API endpoint -->
    <add name="endpoint" value="https://api-3t.sandbox.paypal.com/2.0"/>
    <!-- Connection timeout in milliseconds -->
    <add name="connectionTimeout" value="360000"/>
    <!-- The number of times a request must be retried if the API endpoint is   unresponsive -->
    <add name="requestRetries" value="3"/>
    <add name="binding" value="SOAP"/>
    <add name="IPAddress" value="127.0.0.1"/>
    <!-- 
      API version number. You will not normally have to change this unless you
      have a specific need to work with an older version of the API
     -->
    <add name="APIVersion" value="84.0"/>
  </settings>

  <accounts>
    <!--
      Add API credentials - 3 token or client certificate.
      You can add multiple account credentials here. The SDK will pick the first   account
      unless you specifically request an account in the service wrapper mehod.
    -->
    <account apiUsername="sdk-three_api1.sdk.com" apiPassword="QFZCWN5HZM8VBG7Q"
        apiSignature="A-IzJhZZjhg29XQ2qnhapuwxIDzyAZQ92FRP5dqBzVesOkzbdUONzmOU"   applicationId="APP-80W284485P519543T"/>
    <!--
    <account apiUsername="enduser_biz_api1.gmail.com" apiPassword="SACH3VA3C29DXGUG"
      apiCertificate="<Absolute path to paypal_cert.p12>" 
             privateKeyPassword="password" applicationId="APP-80W284485P519543T"/>
     -->           
  </accounts>
</paypal> 
```

# c++ - Apache 无法读取文件

> ID：12315404
> 
> 赞同：0
> 
> 时间：2012-09-07T09:30:36.317
> 
> 标签：c++, apache, cgi, xml-rpc

我使用 xml-rpc 库在 C++ 中编写了一个 CGI 脚本。服务器代码位于由 Apache 运行的 /var/www/cgi-bin/ 目录中。Apache 还配置为允许运行 cgi 的权限。当我想执行服务器端代码时，它给了我一个错误，上面写着：“文件不存在。” 我已经将文件复制到同一目录中并且路径正确。该文件是一个 .PEM 文件，我在我的应用程序中需要它。我的猜测是 Apache 没有读取该文件的权限，因为该文件位于正确的路径中。这是对的吗？知道我是否必须配置 Apache 来授予这样做的权限吗？或者，问题可能出在其他地方？

谢谢

# c++ - 这些 C++ 函数返回什么？A类*& func1()

> ID：12315405
> 
> 赞同：2
> 
> 时间：2012-09-07T09:30:37.373
> 
> 标签：c++, pointers, reference

大家好，C/C++ 代码编程专家。
我偶然发现了这段代码，但我对这两个函数返回的内容感到困惑。
有好心人能帮帮我吗？
我试图使代码尽可能通用且对其他人有用。

```
ClassA*& func1() {
    static ClassA* mClassA;
    return mClassA;
}

ClassA* func2() {
    ClassA*& mClassA = func1();
    if(!mClassA) {
        ... // omitted some code that fill mClassA with data.
    }
    return mClassA;
} 
```

[编辑] 还想问，func1() 和 func2() 中的 *& 是否相互抵消？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:32:39.917

```
ClassA*& func1() 
```

通过引用返回方法内部声明的静态指针。正在做：

```
ClassA*& x = func1()
x = NULL 
```

会改变`mClassA`。

```
ClassA* func2() 
```

返回指针的副本。它将指向相同的内存，但更改指针不会影响`mClassA`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:10:26.197

简而言之：

*   `func1`提供了一个单例指针。

*   `func2`提供一个类型为 的单例对象`ClassA`，使用来自的单例指针`func1`作为实现设备。

您可以像这样更优雅地实现类似的目标：

```
ClassA & getA()
{
    static ClassA impl = initialize_A();  // Or a lambda or just a constructor.
    return impl;
} 
```

这也将在程序结束时以正确的顺序清理实现实例，而无需手动销毁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:37:06.463

`func1()`返回对指针的引用；实际上，这意味着它返回与函数内部使用的指针相同的指针，而不是对其的副本。这样，如果您更改指针的值（而不是更改它所指向的对象的值），您实际上会更改函数内部指针的值。

这就是使`func2()`工作正常的原因。它获取`mClassA`内部静态指针的引用并`func1()`在必要时更新其值，然后返回指针的副本；这是一个指向与 相同地址的指针`mClassA`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T09:58:38.597

```
ClassA*& func1() {
    static ClassA* mClassA;
    return mClassA;
} 
```

`func1()`有点像迈耶的单身人士。它类似于创建全局指针。因此，此函数创建一个指针“对象”，并提供对其的完全访问权限，这意味着您可以执行以下操作：

```
func1() = new ClassA; 
```

`func2()`只返回一个指针的副本。这意味着您不能像上面那样更改它^(* 。)

^(* 可以使用placement new 来改变指向的对象。)

# ruby-on-rails - routes.rb 文件未按预期路由

> ID：12315413
> 
> 赞同：0
> 
> 时间：2012-09-07T09:30:57.310
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes

我有一个嵌套类别系统，在 routes.rb 文件中处理如下：

```
path = "/categories/:id"
10.times do |i|
    path << "/:id#{i}"
    match path => "categories#show", :via => [:get]
end 
```

这一切都很好。

问题是我有几个不想使用我的通用类别#show 页面的情况。例如，对于一个类别，我想完全触发一个完全不同的控制器。

我以为我可以做这样的事情：

```
 # Override certain category page
  match "categories/MyCategory" => "othercontroller#specialcase"

  path = "/categories/:id"
  10.times do |i|
    path << "/:id#{i}"
    match path => "categories#show", :via => [:get]
  end 
```

我认为通过这样做，任何对“www.myurl.com/categories/MyCategory”的请求都会被传递给`othercontroller`而不是`categories`. 但这似乎并非如此。

谁能解释为什么？我认为优先级是基于文件顺序的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:52:51.623

我以前遇到过这样的情况，似乎 Rails 可能会将字符串“MyCategory”与您的其他路线中的 ID 混淆。

我会做这样的事情：

```
match "categories/special/MyCategory" => "othercontroller#specialcase"

path = "/categories/:id"
10.times do |i|
    path << "/:id#{i}"
    match path => "categories#show", :via => [:get]
end 
```

简而言之，确保您没有像另一条路由中的参数一样结束的路径条目（在您的示例中，“MyCategory”=“:id”）。我从来没有在 Rails 文档中找到明确的警告，但实践是最好的。

希望这对您有所帮助。

# c# - 使用 JQuery 和 C# 的按钮单击

> ID：12315419
> 
> 赞同：0
> 
> 时间：2012-09-07T09:31:15.237
> 
> 标签：c#, jquery, button

我需要知道是否使用 jQuery 单击了 asp 控件（按钮）。这是按钮编码。

如果有人使用 jQuery 按下按钮，我如何弹出警告框。

```
 <asp:Button ID="delete_checked_box_button_id"  OnClick="deletechecked_box_onclick" runat="server" Text="Delete Checked" /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:33:46.783

当您将`ClientIDMode`属性设置为时，`Static`您可以使用您设置的 Id：

```
$(document).ready(function() {
    $('#delete_checked_box_button_id').on('click', function(e) { 
        alert('Button clicked');
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:33:26.590

```
$('#<%=delete_checked_box_button_id.ClientID %>').click(function() {
  alert("Handler for .click() called.");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:36:04.180

不需要jQuery，可以使用按钮的属性onClientClick

[请参阅 MSDN 中的此示例](http://msdn.microsoft.com/es-es/library/system.web.ui.webcontrols.button.onclientclick%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T09:46:04.660

```
<script type="text/javascript">
function BuyG2() {
        alert('Hai Jquery');
        }
</script>//jquery in sourse

 protected void Button1_Click(object sender, EventArgs e)
        {
 ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "tmp", "<script type='text/javascript'>BuyG2();</script>", false);
}//ASP Button Click Event 
```

# jquery - 切换时jquery元素的位置

> ID：12315423
> 
> 赞同：0
> 
> 时间：2012-09-07T09:31:19.200
> 
> 标签：jquery, html

我正在构建一个页面，该页面将包含包含与它们一起使用的页面列表的类别。起初，所有列表都被隐藏了，然后我单击一个类别，列表就会向下滑动。这是脚本的代码：

```
 $(document).ready(function() {
            $('.menu-list').hide();
            $('.menu-title').click(function() {
                if ($(this).next().is(':not(:visible)')) {
                    $('.menu-list:visible').slideUp();
                    $(this).next().slideDown();
                }
     }); 
```

该脚本有效，但问题是当我单击列中的类别时，该列中的类别比另一个类别多。比最后一个类别向左移动，我不希望它。这是 jsfiddle 中的代码：http: [//jsfiddle.net/U7rKX/4/](http://jsfiddle.net/U7rKX/4/)

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:36:34.863

您可以添加创建两个列 div（50% 宽度，向左浮动），并将每个类别添加到其中之一。然后，如果其中一个扩展，其余的将被推下。现在页面重排，因为您的所有类别都向右浮动，在这种情况下，确切的页面布局很大程度上取决于类别的高度。

当您在 php 中打印类别时，您可以执行以下操作首先将类别划分为列：

```
<?php
    $leftCol = array();
    $rightCol = array();

    for($i=0; $i<sizeof($categoryList); $i++){
        if($i%2 < 1){
            array_push($leftCol, $categoryList[$i];
        }else{
            array_push($rightCol, $categoryList[$i];
        }
    }
?> 
```

现在您可以在正确的列 div 中打印 $leftCol 和 $rightCol 的内容。

[工作示例 JSFiddle](http://jsfiddle.net/U7rKX/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:36:53.803

如果您想让第三个菜单始终浮动到右边框，则必须清除浮动。

This is because all menus are floated to the right. As long as they have the same height, the second menu will float beside the first. The third have nothing in this row so it will be positioned at the right side. But if the first menu slide out, there is something in the row of the third menu now. So the third menu will float beside the first.

![floating menu issue](../Images/a36451003ab9da79b0a96c3ac40f11dc.png)

Here is a working fiddle: [http://jsfiddle.net/U7rKX/6/](http://jsfiddle.net/U7rKX/6/)

# php - 用正则表达式匹配单词

> ID：12315430
> 
> 赞同：1
> 
> 时间：2012-09-07T09:31:31.257
> 
> 标签：php, regex

我有以下文本文件：

```
...
"somewords MYWORD";123123123123
"someother MYWORDOTHER";456456456456
"somedifferent MYWORDDIFFERENT";789789789
... 
```

我需要匹配单词 MYWORD、MYWORDOTHER、MYWORDDIFFERENT，然后用“;”替换该单词之前的空格。有人可以找出正则表达式吗？

我做过类似的事情：

```
 +[^ ][^ ][^ ][^ ][^ ][^ ][^ ]"; 
```

但这仅适用于特定的字长。我需要修改以获得任何长度的任何单词。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:36:26.560

你为什么不`str_replace()`呢？

```
$string = '"somewords MYWORD";123123123123
"someother MYWORDOTHER";456456456456
"somedifferent MYWORDDIFFERENT";789789789';

$replace = str_replace(' MYWORD', ';MYWORD', $string);
echo $replace; 
```

[键盘示例](http://codepad.org/FJoEu8AT)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:36:56.363

这是未经测试的，但应该可以替换引号中最后一个单词之前的空格......

```
preg_replace('/(".+) (\w+";\d+)/',"$1;$2", $your_string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:39:23.223

用这个 ：

```
preg_replace('#"(\w+)\s+(\w+)"#',"$1;$2",$text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T09:38:04.700

```
preg_replace('/\s(\w+);\d/', ';$1', $text); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T09:39:02.100

也许是这样：

```
$result = preg_replace('/([ ])(\w+)";/im', ';$2";', $subject); 
```

在：

```
"somewords MYWORD";123123123123
"另一个 MYWORDOTHER";456456456456
"一些不同的 MYWORDDIFFERENT";789789789

```

出去：

```
"somewords;MYWORD";123123123123
"someother;MYWORDOTHER";456456456456
"somedifferent;MYWORDDIFFERENT";789789789 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T09:44:51.477

```
while($line=fgets($file))
{
    $str=preg_replace("/ (\w)/i",";$1",$line);//use this line if you want to replace every space
    $str=preg_replace("/ (\w+)\";(\d)/i",";$1\";$2",$line);//use this line if you only want to replace the last space
    echo $str;//or wherever you want to output
} 
```

**编辑**：

好吧，我在原来的答案中打错了。

现在用键盘纠正：[http ://codepad.org/leQHTuFR](http://codepad.org/leQHTuFR)

# android - 以编程方式调整Android中的复选框图像

> ID：12315436
> 
> 赞同：0
> 
> 时间：2012-09-07T09:31:57.153
> 
> 标签：android, checkbox, resize

我想以编程方式调整 CheckBox 的图像大小，但我想使用手机的原始图像。我只是想缩放它。我不想提供自己的图像，因为我想保持手机的外观，而且我仍然需要缩放它们。我已经尝试使用 [将 Android CheckBox 设置为不同的图像来获取系统图像资源......然后返回原始图像](https://stackoverflow.com/questions/10235237/setting-android-checkbox-to-a-different-image-and-then-back-to-the-original-i?rq=1) ，但我仍然无法缩放可绘制对象。（我试过 drawable.setBounds()）。我可能也会遇到单选按钮的问题。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:43:06.940

您应该能够在复选框上设置布局参数：

```
LayoutParams lp = findViewById(R.id.chk_id).getLayoutParams();
lp.width = width;
lp.height=height;
findViewById(R.id.chk_id).setLayoutParams(lp); 
```

通过在保留与视图关联的任何其他布局设置之前获取 layoutparams

宽度和高度以像素为单位，以缩放以供密度使用：

```
DisplayMetrics dm = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(dm);
        int width = (int)(150*dm.density); 
```

您需要将 Container 类用于 Layout 参数，此示例用于 FrameLayout，但只需将其替换为父容器的类型即可。

# php - PHP：来自多个数组的新数组

> ID：12315439
> 
> 赞同：0
> 
> 时间：2012-09-07T09:32:23.400
> 
> 标签：php, arrays, multidimensional-array

我正在自学 PHP，我有以下关于数组的问题：

我有：

```
 $names = array('John', 'Alice', 'Tom');
    $cities = array('London', 'NY', 'Boston');
    $years = array('1999', '2010', '2012');
    $colors = array('red', 'blue', 'green'); 
```

我想要一个包含这些元素的新数组（三个子数组）：

```
 John London 1999 red
 Alice NY 2010 blue
 Tom Boston 2012 green 
```

我正在做

```
 $newArray = array($names,$cities, $years,$colors); 
```

但这显示了所有的名字，城市等等:(请告诉我如何实现这一点。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-26T06:27:09.063

要获得这样的输出 -

`John London 1999 red`

`Alice NY 2010 blue`

`Tom Boston 2012 green`

您必须执行以下操作

```
$result = array();
foreach($names as $key=>$value){
$result[]='<pre>'.$value.' '.$cities[$key].' '.$years[$key].''.$colors[$key].'</pre>';
} 
```

然后内爆生成的数组

```
$output=implode('',$result);
echo $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:34:19.057

使用`foreach()`：

```
$newArray = array();

foreach($names as $num => $name){
    $newArray[] = $name." ".$cities[$num]." ".$years[$num]." ".$colors[$num];
}

var_export($newArray); 
```

[键盘示例](http://codepad.org/riBS7caD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:42:59.407

如果您希望这三个列表是数组，每个值都是子数组中的一个元素，请执行以下操作：

```
$names = array('John', 'Alice', 'Tom');
$cities = array('London', 'NY', 'Boston');
$years = array('1999', '2010', '2012');
$colors = array('red', 'blue', 'green'); 

$final_array = array();

foreach($names as $count => $name){
    array_push($final_array,array($name,$cities[$count],$years[$count],$colors[$count]));
}

var_export($final_array); 
```

这给出了以下输出：

```
array (
  0 => 
  array (
    0 => 'John',
    1 => 'London',
    2 => '1999',
    3 => 'red',
  ),
  1 => 
  array (
    0 => 'Alice',
    1 => 'NY',
    2 => '2010',
    3 => 'blue',
  ),
  2 => 
  array (
    0 => 'Tom',
    1 => 'Boston',
    2 => '2012',
    3 => 'green',
  ), 
```

如果您希望结果是字符串数组，请使用 Mihai 的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T09:43:05.600

或者你可以使用“for”

```
$count = count($names);
$new_array = array();
for($i=0;$i < $count; $i++) {
        $new_array[] = array( $names[$i], $cities[$i], $years[$i],$colors[$i]);
} 
```

# python - 我可以从 python 类中删除继承的嵌套类吗？

> ID：12315442
> 
> 赞同：4
> 
> 时间：2012-09-07T09:32:27.527
> 
> 标签：python, inheritance, class-variables

例如，这可能吗？

```
class Foo(object):
    class Meta:
        pass

class Bar(Foo):
    def __init__(self):
        # remove the Meta class here?
        super(Bar, self).__init__() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:34:45.720

您不能从继承的基类中删除类属性；您只能通过设置具有相同名称的实例变量来*屏蔽它们：*

```
class Bar(Foo):
    def __init__(self):
        self.Meta = None  # Set a new instance variable with the same name
        super(Bar, self).__init__() 
```

您自己的类当然也可以用类变量覆盖它：

```
class Bar(Foo):
    Meta = None

    def __init__(self):
        # Meta is None for *all* instances of Bar.
        super(Bar, self).__init__() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:36:33.377

你可以在课堂上做到这一点：

```
class Bar(Foo):
    Meta = None 
```

（也`super`- 调用构造函数是多余的）

# entity-framework - 避免更新不可为空的字段

> ID：12315443
> 
> 赞同：1
> 
> 时间：2012-09-07T09:32:31.117
> 
> 标签：entity-framework, .net-4.5, entity-framework-5

从分离实体更新行时，我试图避免更新未更改的字段，使用以下方法：

```
DbEntityEntry<Type> entry = context.Entry(entity);
entry.Property(p => p.Property).IsModified = false; 
```

这适用于可空字段，但当它是不可空字段时，EF 会抛出一个验证异常，说明该字段是必需的。

任何人都知道为什么这不起作用以及我是否必须摆弄原始值来克服它？
我正在使用 EF 5.0 和 DBContext-API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:08:11.443

原因是 EF 内部的验证逻辑。验证总是在整个实体上触发 - 它不尊重修改。解决方案是在 EF 中禁用实体验证逻辑：

```
context.Configuration.ValidateOnSaveEnabled = false; 
```

# php - 如何将 MYSQL 链接标识符作为字符串传递给 mysql_query？

> ID：12315444
> 
> 赞同：0
> 
> 时间：2012-09-07T09:32:33.087
> 
> 标签：php, mysql

朋友我有一个大问题。我有几个数据库连接。我必须在 mysql_query() 中动态使用这些连接。例如，

```
$db1=mysql_connect('port','username','password') or die("cannot connect to the database");
@mysql_select_db('db1') or die("Unable to select Database");

$db2=mysql_connect('port','username','password') or die("cannot connect to the database");
@mysql_select_db('db2') or die("Unable to select Database"); 
```

使用哪个连接是从开关盒中定义的。

```
switch(type){
case "1":
$link="$db1";
break;
case "2":
$link="$db2";
break;
} 
```

我的 mysql_query 是这样的。

```
mysql_query("DELETE FROM table1 WHERE id='2'",$link); 
```

不幸的是它不起作用，它说**提供的参数不是有效的 MySQL-Link 资源**

我也尝试过，但没有运气

```
mysql_query("DELETE FROM table1 WHERE id='2'".','.$link); 
```

我怎样才能做到这一点？任何想法 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:34:55.233

不要将连接 ID 转换为`switch`语句中的字符串，用`"`!括起来。只需使用以下内容：

```
switch(type){
  case "1":
    $link=$db1;
    break;
  case "2":
    $link=$db2;
    break;
} 
```

# c# - MVVM 和 View/ViewModel 层次结构

> ID：12315445
> 
> 赞同：14
> 
> 时间：2012-09-07T09:32:36.000
> 
> 标签：c#, windows, xaml, mvvm, viewmodel

我正在使用 C# 和 XAML for Windows 8 制作我的第一款游戏。我仍在学习核心概念和最佳实践，而 MVVM 一直是一个障碍。我将尝试分两部分提出这个问题。

**背景**

我正在制作的游戏是数独。数独有一个包含 9x9 网格的棋盘。我有三个模型 - `Game`、`Board`和`Tile`。创建a时`Game`，它会自动创建 a `Board`，`Board`创建时，它会创建 81 (9x9) `Tiles`。

**1\. 视图层次结构，对应的视图模型是如何创建的？**

为了匹配模型的层次结构，我想要一个视图层次结构（`GameView`包含 a`BoardView`其中包含 81 `TileViews`）。在 XAML 中，使用用户控件创建这种视图层次结构非常容易，但我不明白视图模型是如何创建的。

在我看到的示例中，用户控件的数据上下文通常设置为`ViewModelLocator`创建视图模型的新实例的视图模型（使用作为源）。如果你有一个平面视图，这似乎工作得很好，但当你有一个层次结构时，它似乎也会变得混乱。是否`GameView`创建 a`GameViewModel`并将其留给其`BoardView`子级创建 a `BoardViewModel`？如果是这样，如何`GameViewModel`与`BoardViewModel`？通信可以`BoardViewModel`将层次结构备份到`GameViewModel`?

**2.视图模型如何获取模型数据？**

在 iOS 中，我会首先使用服务来获取`Game`预先填充了数据的模型。然后我将创建一个`GameViewController`视图控制器（负责创建视图）并将其传递`Game`给它。在 MVVM 中，我看到让视图负责创建自己的视图模型（理想情况下使用 a `ViewModelLocator`）的价值，但我不明白该视图模型如何获取模型。

在我在网上找到的所有示例中，视图模型都使用一些服务来获取自己的数据。但是我没有遇到任何接受构造函数参数或从更高级别导航传递的参数的示例。这是怎么做到的？

我不想为我的模型使用应用程序资源或某种其他类型的单例存储方法，因为我不是这样做的，但是如果我想一次在屏幕上显示多个拼图怎么办？每个都`GameView`应该包含自己的`Game`.

不仅`GameViewModel`需要对`Game`模型的引用，而且`BoardViewModel`以某种方式创建的（参见问题 1）需要对`Board`属于模型的模型的引用`Game`。所有的`Tiles`. 所有这些信息是如何沿着链条传递的？我可以完全在 XAML 中完成如此繁重的工作，还是必须在代码中进行某种绑定或其他初始化？

*呸！*

我感谢您提供的任何建议，即使它不是一个完整的答案。我也很想找到任何与我有相似挑战的 MVVM 项目示例。万分感谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-07T16:54:59.620

我将首先创建一个类来开始应用程序。通常我将该类称为`ApplicationViewModel`or `ShellViewModel`，尽管从技术上讲它可以遵守与我通常用于的不同的规则`ViewModel`

此类在启动时被实例化，并且是`DataContext`用于`ShellView`or`ApplicationView`

```
// App.xaml.cs
private void OnStartup(object sender, StartupEventArgs e)
{
    var shellVM = new ShellViewModel(); 
    var shellView = new ShellView();    
    shellView.DataContext = shellVM;  
    shellView.Show(); 
} 
```

这通常是我`DataContext`直接为 UI 组件设置的唯一位置。从此时起，**您的 ViewModel 就是应用程序**。在使用 MVVM 时记住这一点很重要。您的视图只是一个用户友好的界面，允许用户与视图模型交互。它们实际上不被视为应用程序代码的一部分。

例如，您`ShellViewModel`可能包含：

*   `BoardViewModel CurrentBoard`
*   `UserViewModel CurrentUser`
*   `ICommand NewGameCommand`
*   `ICommand ExitCommand`

你`ShellView`可能包含这样的东西：

```
<DockPanel>
    <Button Command="{Binding NewGameCommand}" 
            Content="New Game" DockPanel.Dock="Top" />
    <ContentControl Content="{Binding CurrentBoard}" />
</DockPanel> 
```

这实际上会将您的`BoardViewModel`对象作为`ContentControl.Content`. 要指定如何绘制您的`BoardViewModel`，您可以指定`DataTemplate`in`ContentControl.ContentTemplate`或使用隐式`DataTemplates`。

隐式 DataTemplate 只是一个`DataTemplate`没有`x:Key`关联的类。WPF 将在 UI 中遇到指定类的对象时使用此模板。

所以使用

```
<Window.Resources>
    <DataTemplate DataType="{x:Type local:BoardViewModel}">
        <local:BoardView />
    </DataTemplate>
</Window.Resources> 
```

将意味着，而不是绘图

```
<ContentControl>
    BoardViewModel
</ContentControl> 
```

它会画

```
<ContentControl>
    <local:BoardView />
</ContentControl> 
```

现在`BoardView`可以包含类似的东西

```
<ItemsControl ItemsSource="{Binding Squares}">
    <ItemsControl.ItemTemplate>
        <ItemsPanelTemplate>
            <UniformGrid Rows="3" Columns="3" />
        </ItemsPanelTemplate>
    <ItemsControl.ItemTemplate>
</ItemsControl> 
```

它将使用 3x3 绘制一个板`UniformGrid`，每个单元格都包含`Squares`数组的内容。如果您的`BoardViewModel.Squares`属性恰好是一个`TileModel`对象数组，那么每个网格单元格将包含一个`TileModel`，并且您可以再次使用隐式`DataTemplate`告诉 WPF 如何绘制每个`TileModel`

现在至于您如何`ViewModel`获取其实际数据对象，这取决于您。我更喜欢抽象类后面的所有数据访问，例如 a `Repository`，并让我`ViewModel`简单地调用类似`SodokuRepository.GetSavedGame(gameId);`. 它使应用程序易于测试和维护。

无论您如何获取数据，请记住`ViewModel`和`Models`是您的应用程序，因此它们应该负责获取数据。不要在`View`. 就我个人而言，我喜欢`Model`为仅保存数据的普通对象保留我的层，因此只能从我的 ViewModel 执行数据访问操作。

对于 之间的交流`ViewModels`，我实际上[在我的博客上有一篇](http://rachel53461.wordpress.com/2011/06/05/communication-between-viewmodels-with-mvvm/)关于此的文章。总而言之，使用诸如 Microsoft Prism`EventAggregator`或 MVVM Light 之类的消息传递系统`Messenger`。它们的工作方式类似于一种寻呼系统：任何类都可以订阅接收特定类型的消息，并且任何类都可以广播消息。

例如，您`ShellViewModel`可能订阅接收`ExitProgram`消息并在收到消息时关闭应用程序，并且您可以`ExitProgram`从应用程序的任何位置广播消息。

我想另一种方法是将处理程序从一个类附加到另一个类，例如`CurrentBoardViewModel.ExitCommand += Exit;`从`ShellViewModel`.

无论如何，我希望这能回答您的一些问题，并为您指明正确的方向。祝你的项目好运:)

# javascript - 访问 JSON 对象时出现问题？

> ID：12315456
> 
> 赞同：1
> 
> 时间：2012-09-07T09:32:57.003
> 
> 标签：javascript, jquery, json

我在访问 JSON 对象时面临问题：正在接收的 JSON 对象是：

```
{"71":"Heart XXX","76":"No Heart YYYY"} 
```

我试图分别获得 71 和 72 的值并使用它......

但是我遇到了一些编译时问题： **令牌“.71”上的语法错误，删除此令牌**

**代码：**

```
var map=$("#jsonText").val();
    alert(map);
    var  obj=jQuery.parseJSON(map);
    alert("JSON ::"+obj.71); 
```

如果正在打印 obj ，我可以查看`[Object Object]`

那里的任何人都可以帮我找出我做的错误..我知道上面的问题是在**SO**的许多线程中提出的。下面是我找到的几个线程，但是当我尝试实现它时失败了..

[jquery json解析](https://stackoverflow.com/questions/3005606/jquery-json-parsing)

还尝试使用给出的 Jquery 教程

[jQuery JSON](http://api.jquery.com/jQuery.parseJSON/)

如果键是字符串，它工作正常，但如果它是一个数字，则会出现上述错误......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:34:14.563

试试这个：

```
alert("JSON ::" + obj[71]); 
```

“71”不是有效的属性标识符：标识符应该以字母、下划线或美元符号开头。您可以改用方括号来避免此问题。

**注意**：方括号之间的所有内容都将转换为字符串。甚至函数、DOM 元素或正则表达式：它们都使用它们的`toString`方法或它们的超类'进行转换`toString`。

于是`71`就有了转换成`"71"`。如果你想要更多的性能，你可以直接使用后者。如果你不需要它，你可以只用`71`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T09:34:40.477

改为使用

```
alert("JSON ::"+obj["71"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:36:30.227

根据规则或`javascript`a`identifier`不应以数字开头，因此如果它以数字开头或包含空格和其他特殊字符，那么您应该使用`[]`运算符而不是`.`运算符来访问它，
因此`obj.71`无效`obj["71"]`但

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:54:12.363

尝试使用这个网站：

[http://json.parser.online.fr/](http://json.parser.online.fr/)

# javascript - 如何通过 ajax 将 javascript 数组传递给 YII 动作

> ID：12315460
> 
> 赞同：4
> 
> 时间：2012-09-07T09:33:04.970
> 
> 标签：javascript, ajax, yii

我有一个像

```
var orderItems={'1':{id:'1',name:'Shirt',qty:'0'},'3':{id:'3',name:'Shoe',qty:'0'}, }; 
```

我需要使用 ajax 按钮将此数组传递给操作。

```
$this->widget('bootstrap.widgets.TbButton', array(
    'label' => 'Click me',
    'type' => 'primary',
    'htmlOptions' => array(
        'data-toggle' => 'modal',
        'data-target' => '#myModal',
        'ajax' => array(
            'type' => 'POST',
            'url' => $this->createUrl('order/AjaxUpdateOrder', 
                                      array('val' => 'profile')),
            'success' => 'function(data) { alert(data) }',
        ),
    ),
)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:38:59.857

前缀 'js:' 到 'data' 属性.. 如下所示

```
 'ajax' => array(
            'type' => 'POST',
            'url' => $this->createUrl('order/AjaxUpdateOrder', 
                                       array('val' => 'profile')),
            'success' => 'function(data) { alert(data) }',
            'data' => 'js:orderItems',
            'processData' => false,
    ), 
```

# maven - 如何配置 Maven 或 Apache Archiva，使其仅保留 N 个快照的构建

> ID：12315461
> 
> 赞同：5
> 
> 时间：2012-09-07T09:33:10.680
> 
> 标签：maven, archiva

我们的 Archiva 存储库从不删除旧的快照。这会产生很多垃圾。

是否可以告诉 Archiva 只保留 N 个版本的快照？

最好的问候，克里斯蒂安。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:22:53.847

请浏览[http://archiva.apache.org/docs/2.2.0/adminguide/repositories.html](http://archiva.apache.org/docs/2.2.0/adminguide/repositories.html)

你会发现以下

```
repository purge by days older - the first option for repository purge. Archiva will  check how old the artifact is and if it is older than the set number of days in this field,  then the artifact will be deleted respecting the retention count (see #7) of course. In order to disable the purge by number of days old and set Archiva to purge by retention count, just set the repository purge field to 0\. The maximum number of days which can be set here is 1000\. See the Repository Purge section below for more details.
repository purge by retention count - the second option for repository purge. When running the repository purge, Archiva will retain only the number of artifacts set for this field for a specific snapshot version. See the Repository Purge section below for more details. 
delete released snapshots - specifies whether to remove those snapshot artifacts which already has release versions of it in the repository during repository purge. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-20T12:00:28.657

别忘了去：

```
Repository Scanning -> Consumers 
```

并确保`repository-purge`已启用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-20T12:08:28.260

我知道它已经被回答了，但我最近遇到了同样的问题，不得不再做一步：repo 的路径指向错误的目录，尽管配置正确，但清理快照不起作用......

要更正路径，请转至：

Repositories Administration --> Managed Repositories Management --> 编辑“Archiva Managed Snapshot Repository” --> 将“Directory”参数设置为正确的值（对我来说是“/var/lib/apache-archiva-2.2.0/存储库/快照”）。

执行此操作时，快照清理开始工作。

[编辑 - 2017-11-02]

另外，我想知道为什么在清理主要工件时没有清理一些附加的工件（例如 html 文件）。我刚刚弄清楚了：如果它不是来自 Archiva 的工件类型，则必须指定扩展名。例如，在我的情况下，在存储库扫描 --> 文件类型 --> 工件 --> 我必须添加 '**/*.html' 以开始清理附加的 html 文件。

希望这可能会有所帮助

# qa - Microsoft Project Server：有没有办法知道发布到服务器的 MPP 不是使用可用模板创建的？

> ID：12315462
> 
> 赞同：0
> 
> 时间：2012-09-07T09:33:14.643
> 
> 标签：qa, project-server, ms-project-server-2010, project-server-2007

今天偶然发现了这个问题：“ `Is there a way to know that MPP published to the project server is not created using a template available on the server?`”

基本上，这来自于如何找出项目计划对标准模板的合规性。

可以做到吗？我不知道。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:43:46.683

实际上，无法通过一个字段来识别该项目是使用该模板创建的。

您可以假设企业项目类型，但同样有一种方法可以更改现有项目的 EPT。

我知道的唯一方法是按任务、结构等比较模板和项目。它的工作原理类似于指纹识别：您选择几个最有可能表明项目是从模板创建的点。

我能想象的最坏情况：用户通过模板创建项目，然后从项目中删除所有内容。正式项目是由模板创建的，但实际上项目中没有模板中的任何内容。

# java - java mysql 更新

> ID：12315472
> 
> 赞同：0
> 
> 时间：2012-09-07T09:33:55.093
> 
> 标签：java, mysql, jdbc, sql-update

执行 java 类以更新 mysql 数据库时出现此错误

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in
your SQL syntax; check the manual that corresponds to your MySQL server version
for the right syntax to use near 'usage = 6000 where user_id = 1 and api_id = 1'
 at line 1
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstruct
orAccessorImpl.java:39).. 
```

这是代码：

```
int u_id=1;
int a_id=1;

String url = "jdbc:mysql://localhost:3306/new_db";
String driver = "com.mysql.jdbc.Driver";
String userName = "root";
String password = "1234";
int APIusage = 0;

try {
    Class.forName(driver).newInstance();

    Connection conn = DriverManager.getConnection(url, userName, password);
    String query = "update api_consume set usage = ? where user_id = ? and api_id = ?";
    PreparedStatement preparedStmt = conn.prepareStatement(query);
    preparedStmt.setInt(1, 6000);
    preparedStmt.setInt(2, u_id);
    preparedStmt.setInt(3, a_id);

    // execute the java preparedstatement
    preparedStmt.executeUpdate();

    conn.close();
} 
catch (Exception e) {
      e.printStackTrace();
} 
```

你能看看它，看看为什么会出现语法错误吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:39:44.480

`usage`是 MySQL 中的**[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)**，因此您需要引用它：

```
String query = "update api_consume set `usage` = ? where user_id = ? and api_id = ?"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:40:14.650

是因为`usage`关键词。将该列名称更改为usage_msg 或其他内容。

# winforms - 在 Windows 窗体 C# .NET 中查找控件？

> ID：12315473
> 
> 赞同：2
> 
> 时间：2012-09-07T09:33:54.877
> 
> 标签：winforms

使用 Windows 窗体，动态创建两个链接标签。当用户点击任何一个链接标签时，就会创建一个动态表单。在该表单中，我创建了一个数据网格、一个文本框和一个动态放置的按钮（在该动态表单中）。现在我想在动态按钮单击事件中访问动态数据网格。我怎样才能做到这一点？

```
private void Users_Load(object sender, EventArgs e)
{
    da = new SqlDataAdapter("Usp_Get_Employees", con);
    ds = new DataSet();
    da.Fill(ds);

    if (ds.Tables[0].Rows.Count > 0)
    {
        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {
            string somecode = i.ToString() + ds.Tables[0].Rows[i]["eid"].ToString();
            LinkLabel  lbluser  = new LinkLabel();
            lbluser.Name =  ds.Tables[0].Rows[i]["eid"].ToString();
            lbluser.Text = ds.Tables[0].Rows[i]["ename"].ToString();
            lbluser.Location = new System.Drawing.Point(40, i * 40);
            lbluser.Size = new System.Drawing.Size(50, 30);
            Controls.Add(lbluser);
            lbluser.Click += new EventHandler(lbluser_Click);
        }
    }
}

void lbluser_Click(object sender, EventArgs e)
{
    LinkLabel lnkClis = (LinkLabel)sender;
    Form frm = new Form();
    frm.Name = lnkClis.Name;
    frm.Text = lnkClis.Text;
    frm.Show();

    DataGrid dtgrd = new DataGrid();
    dtgrd.Location = new System.Drawing.Point(10, 1 * 40);
    dtgrd.Name = lnkClis.Name;
    names = lnkClis.Name;

    TextBox tx = new TextBox();

    tx.Location = new System.Drawing.Point(10, 5 * 40);
    tx.Size = new Size(80, 30);
    tx.Multiline = true;
    tx.LostFocus += new EventHandler(tx_LostFocus);

    Button btn = new Button();
    btn.Location = new System.Drawing.Point(10, 7 * 40);
    btn.Size = new System.Drawing.Size(50, 30);
    btn.Name = lnkClis.Name;
    btn.Click += new EventHandler(btn_Click);

    frm.Controls.Add(dtgrd);
    frm.Controls.Add(tx);
    frm.Controls.Add(btn);
}

// Now I am trying to access the data grid in the btn_click event

void btn_Click(object sender, EventArgs e)
{
    Button btsave = (Button)sender;
    string eid = btsave.Name;

    object grd = btsave.Parent.Controls.Find("dtgrd", true).FirstOrDefault();

    ((DataGrid)grd).DataSource = ds.Tables[0];
} 
```

现在我在以下位置得到一个对象实例的错误对象集：

```
((DataGrid)grd).DataSource = ds.Tables[0]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:51:58.360

您编写的异常消息：

> 现在我得到一个对象实例的错误对象集

没有意义，但它看起来像

> 你调用的对象是空的

如果是这种情况，我认为错误在于`Find`方法调用。根据[文件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find.aspx)：

> 按其 Name 属性搜索控件并构建一个包含所有匹配控件的数组。

在您的按钮单击处理程序中，您假设网格称为**dtgrd**，但是在创建网格时，您将其命名为：

```
dtgrd.Name = lnkClis.Name; 
```

如果您将此行更改为：

```
dtgrd.Name = "dtgrd"; 
```

话虽如此，您应该考虑为按钮单击处理程序使用匿名方法。它将首先消除调用该`Find`方法的需要。

```
 void lbluser_Click(object sender, EventArgs e)
{
   //...
    DataGrid dtgrd = new DataGrid();
   //...
    Button btn = new Button();
   //...
    btn.Click += (sender,args)=> dtgrd.DataSource = ds.Tables[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:51:27.673

试试下面的代码

```
 public Form1()
    {
        Form f1 = new Form();

        f1.Text = "New Form";

        TextBox t1 = new TextBox();
        t1.Top = 0;
        t1.Name = "t1";
        t1.Visible = true;
        f1.Controls.Add(t1);

        Button b1 = new Button();
        b1.Top = 30;
        b1.Name = "b1";
        b1.Text = "Click";
        b1.Click += b1_Click;
        f1.Controls.Add(b1);

        f1.Show();
    }

    public void b1_Click(object sender, EventArgs e)
    {
        Button btn = (Button)sender;
        object txt = btn.Parent.Controls.Find("t1", false).First();
        ((TextBox)txt).Text = "Hi, you have clicked me.";
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T09:55:08.610

我稍微修改了 Nitesh 的代码。只需使用 lambda 在点击处理程序中捕获文本框：

```
public Form1()
{
    Form f1 = new Form();

    f1.Text = "New Form";

    TextBox t1 = new TextBox();
    t1.Top = 0;
    t1.Name = "t1";
    t1.Visible = true;
    f1.Controls.Add(t1);

    Button b1 = new Button();
    b1.Top = 30;
    b1.Name = "b1";
    b1.Text = "Click";
    b1.Click += (sender, args) => MessageBox.Show("The text is: " + t1.Text);
    f1.Controls.Add(b1);

    f1.Show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T05:48:44.643

您得到的错误来自语句（因为`grd`对象是`null`）：

```
((DataGrid)grd).DataSource = ds.Tables[0]; 
```

由于您正试图抓住动态控件，因此最好进行适当的空值检查、类型检查和错误处理。像这样的东西：

```
if(grd != null && grd is DataGrid)
    ((DataGrid)grd).DataSource = ds.Tables[0]; 
```

# javascript - 如何禁用网页上的文本选择

> ID：12315476
> 
> 赞同：43
> 
> 时间：2012-09-07T09:34:03.387
> 
> 标签：javascript, html, css

我正在尝试使网页非常原生。如何删除选择，选择网页中的所有属性？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-09-07T09:55:57.753

## 使用 CSS 禁用每个元素的选择

```
body {
  -webkit-user-select: none;
     -moz-user-select: -moz-none;
      -ms-user-select: none;
          user-select: none;
} 
```

Chrome、Safari、Firefox、IE 10 和 iOS 设备均支持此功能。[有关MDN 页面](https://developer.mozilla.org/en-US/docs/CSS/user-select)的更多信息。

**编辑：**如果您想在 Firefox`<input>`中`<textarea>`保持可选状态，请添加：

```
input,
textarea {
     -moz-user-select: text;
} 
```

## 使用 jQuery 禁用上下文菜单

```
$(document).on("contextmenu", function (event) { event.preventDefault(); }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-12T06:41:30.483

使用此代码[https://www.docsity.com/it/teorie-e-pratiche-del-web-4/556038/](https://www.docsity.com/it/teorie-e-pratiche-del-web-4/556038/)

```
body, html{     
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;  
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T16:10:28.237

此 JavaScript 将禁用内容的选择、复制和粘贴但如果用户将页面保存到本地计算机，他们将能够使用您的代码执行“任何”他们想要的操作。

```
//disable cut copy past
var message = "";
function clickIE() { if (document.all) { (message); return false; } }
function clickNS(e) {
    if(document.layers || (document.getElementById && !document.all)) {
        if (e.which == 2 || e.which == 3) { (message); return false; }
    }
}
if (document.layers)
{ document.captureEvents(Event.MOUSEDOWN); document.onmousedown = clickNS; }
else { document.onmouseup = clickNS; document.oncontextmenu = clickIE; }
 document.oncontextmenu = new Function("return false")

//for disable select option
document.onselectstart = new Function('return false');
function dMDown(e) { return false; }
function dOClick() { return true; }
document.onmousedown = dMDown;
document.onclick = dOClick; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T09:38:33.903

您可以通过在正文标签中添加属性来禁用 oncontextmenu="return false;

```
<body oncontextmenu="return false;"> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-07T09:42:09.467

这可以帮助你吗

```
<div onselectstart="return false;" style="-moz-user-select: none;"> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-05-29T08:04:40.157

```
element_name{
  -webkit-touch-callout: none; 
  -webkit-user-select: none;
  -khtml-user-select: none; 
  -moz-user-select: none;
  -ms-user-select: none; 
   user-select: none;
 } 
```

# c# - 分离 C# 和 HTML 的最佳方法

> ID：12315484
> 
> 赞同：0
> 
> 时间：2012-09-07T09:34:42.320
> 
> 标签：c#, asp.net, structure

我一直在与一个团队合作开发一个 ASP.NET 项目，这是一个项目管理工具。大多数页面基本上是将数据库中的内容写入页面并存储所做的更改。

这是我们在 ASP.NET 中的第一个项目（我们目前所有其他项目都使用 ASP Classic），我们的前辈告诉我们不要使用 MVC。

现在的问题是我们的设计师/前端开发人员对于 ASP.NET 几乎一无所知，如果可能的话，他也不想使用 VisualStudio（他使用 OSX）。

例如：例如，编写动态列表的最佳方式是什么？

这是我们目前所做的：

```
<div id="tasks" overflow-y="scroll" style="height:400px;">
   <ul id='taskList'>
     <% PrintTasks(); %>
   </ul>
</div> 
```

在代码隐藏中：

```
public void PrintTasks()
{
        foreach (var task in _tasks)
        {
            Response.Write("<li rel='#' id='task_"+task.TaskID+"'>" +
                   ...
                "</span>" +
                "</li>");
        } 
} 
```

在这种情况下，设计者不可能在不进入后面的代码的情况下编辑 li 标签。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:43:44.600

恐怕您的前端开发人员将不得不接受它并学习如何使用 VS。如果您的整个团队都在 ASP.Net 上工作，那么就无法逃脱 VS 的愤怒。

MVC 有利于 C# 和 HTML 的分离。Razor 引擎提供了一种分离代码和标记的好方法。

对于您的列表，您可能会在 Razor 中执行类似的操作：

```
@foreach (var item in items)
{
    <li rel="#" id ="blah_@item.id">@item.text</li>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T09:45:03.447

您绝对应该提出为什么不能选择 MVC 的问题。这将更适合您正在做的事情，因此代码质量也会更好，这有助于整个项目。更不用说团队生产力（以及您的设计师“逃避” VS 的能力）。

使用 Razor 做一些 CSHTML，您和您的团队几乎会感到“宾至如归”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:05:56.850

在使用 ASP.NET WebForms 时，我会给你以下建议：

1.  充分利用 CSS。接受您的设计师将无法编辑由您的代码隐藏生成的 HTML，但如果您聪明地使用 CSS，您可能会克服这一挑战。在您的示例中，您有一个`div`和一个`ul`带有 id 的元素，然后设计人员可以使用 CSS 的级联属性更改 CSS 以设置这些元素和子元素的样式。（例如`#taskList > li`：）
2.  在适当的时候考虑客户端模板。为用户呈现数据时，fx. 列表，考虑使用模板框架。(jQuery fx) 这些模板可以放在单独的文件中，您的设计人员可以在没有 VS 的情况下对其进行编辑。（参考：[从外部文件加载 jQuery-Templates？](https://stackoverflow.com/questions/4366137/load-jquery-templates-from-external-file)）
3.  花一些时间学习 ASP.NET WebForms 中可用的不同控件，而不是`Response.Write`用来构建 HTML。在代码隐藏中使用`Response.Write`通常是一种非常糟糕的做法，应该避免，因为您的代码会很快变成意大利面条并且无法维护。如果您希望在以后的项目中使用 ASP.NET WebForms（或 MVC）并希望您的高层和管理层看到 ASP.NET 的优势，那么您和您的团队应该花一点时间学习该框架。当您这样做时，您将获得更易于维护的结构化代码。但是，如果您在 ASP.NET 中使用当前的经典 ASP 实践，那么您的上级或您的管理层都可能不会看到使用 ASP.NET 的好处。那将是一种耻辱，因为好处确实存在。:-)

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T09:40:06.710

根据您的上下文，主要的摩擦点是您的前端开发人员。

因此，决定使用 javascript 框架（Knockout.js、angular.js 等）。让您的前端开发人员设计 UI，该 UI 将从您选择的 Web 堆栈（ASP.NET MVC、Web Api 等）提供的 JSON 中获取所有需要的信息。这将确保他可以使用他想要的工具开发他的 UI。而且您可以在后端工作而不必担心 UI。您只需要同意 JSON 合同并遵守它们。

这样，您将与以下方面保持清晰的关注点分离： - 每个人都使用他们最容易使用的工具进行开发 - 没有层混合和匹配（即在您的代码中“生成”一些 HTML）

而且，您的列表看起来像（使用淘汰赛）（语法可能不准确）：

```
<ul data-bind="foreach: myList">
    <li><span data-bind="text: Text, attr: { id: Id }" /></li>
</ul> 
```

后面的代码（使用 asp.net mvc）（语法可能不准确）

```
public JsonResult GetList()
{
    var res =  myServiceLayer
        .GetListItems()
        .Select( 
            x => new { Text = x.Val, Id = x.Id } 
        );
    return JsonResult( res );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T09:52:52.750

在这里使用中继器：

```
<asp:Repeater runat="server" ID="r1">
<ItemTemplate>
  <li rel='#' id='<%# Eval("id","prefix{0}") %>'><span>
     <asp:Label runat="server" ID="t1"><%# Eval("Caption") %></asp:Label>
  </span></li>
</ItemTemplate>
</asp:Repeater> 
```

在cs文件中：

```
r1.DataSource=list;
r1.DataBind(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T09:43:48.063

在您提到的特定情况下，在“经典”asp.net 中，您应该使用中继器：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater( v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater(v=vs.80).aspx)

```
<asp:Repeater id="Repeater1" runat="server">                       
    <ItemTemplate>
        <li rel='#' id='task_<%# DataBinder.Eval(Container.DataItem, "TaskID") %>'>
            <span>Whatever</span>
        </li>
      </ItemTemplate>            
 </asp:Repeater> 
```

基本上，了解哪些 web 控件可用，每次需要时创建新控件，并尝试从 asp.net webform 有限的绑定/模板系统中获取尽可能多的信息。

# iphone - 像地址簿一样编辑动画 UITableViewStyle

> ID：12315491
> 
> 赞同：1
> 
> 时间：2012-09-07T09:35:04.070
> 
> 标签：iphone, ios, uitableview

我需要一些关于 UITableView 的帮助。我正在寻找创建编辑表功能的最佳解决方案。我有带有数据和两种模式的 UITableViewController：

*   编辑模式：所有字段（如名字、姓氏、电话、网页等...）
*   查看模式：仅显示归档的行。

困难的是当用户单击编辑按钮时为行设置动画。

我想要我们在 iPhone 上的地址簿应用程序中拥有的相同动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:04:52.130

这样的事情很简单。

```
//original position and maybe hidden
someView.frame = CGRect(0,0,0,0);
someView.alpha = 0.0f;
[someView setHidden:YES];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.3];

//what you want it comes out finally, changed position and visible
[someView setHidden:NO];
someView.frame = CGRect(100.0f,100.0f,0,0);
someView.alpha = 1.0f;

[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:35:54.960

采用

```
[tableView setEditing: YES animated: YES]; 
```

使**UItableView**处于编辑模式。当您在行上滑动时，它会显示和隐藏按钮。如果您的动画是什么，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:49:18.890

我有解决办法！ [这篇文章的帮助](http://adampreble.net/blog/2009/09/editing-a-uitableview-the-animated-insert-row/)

所以你需要添加这样的东西（感谢桑迪）

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated{
    [super setEditing:editing animated:animated];
    NSArray *paths = [NSArray arrayWithObject:
                      [NSIndexPath indexPathForRow:1 inSection:0]];
    if (editing) {

        [[self tableView] insertRowsAtIndexPaths:paths
                                withRowAnimation:UITableViewRowAnimationTop];
    }else {
        [[self tableView] deleteRowsAtIndexPaths:paths
                                withRowAnimation:UITableViewRowAnimationTop];
    }
} 
```

之后 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

将被收集，您可以编辑单元格列表及其外观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T13:12:06.210

在下面的情况下，我有 2 个部分，第一部分包含一系列设置，第一行是默认设置，始终存在且无法重新排序，第二个仅包含一行，如“添加...”，正在编辑仅用于重新排序和删除，因此在编辑模式下，我删除了第一个设置，并删除了第二部分，如果您将所有插入/删除都包含在 tableview 上的 beginUpdates/endUpdates 中，它的动画效果会很流畅。所以对你来说正好相反，在编辑时添加更多行/部分

在正常模式下，我有：

```
 Countries           (<-- 1st section)
  - World
  - Argentina
  - USA
                      (<-- 2nd section)
  - Add Countries... 
```

在编辑模式下，我有：

```
 Countries           (<-- 1st section)
  - Argentina    =    (can be removed/reordered)
  - USA          =    (can be removed/reordered) 
```

代码如下：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];

    NSArray *paths = [NSArray arrayWithObjects:
                      [NSIndexPath indexPathForRow:0 inSection:0],
                      nil];
    [self.tableView beginUpdates]; // Club all updates together
    if (editing)
    {
        if( [[CCPollSettings countryCodes] count] < 2) // No country setting
            // Remove complete section
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade];
        else // Remove first default row
            [self.tableView deleteRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationFade];
        // Remove 'Add...' Section
        [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationFade];
        // .... Do more stuff after 
    } else {
        if( [[CCPollSettings countryCodes] count] < 2) // No country setting yet
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade];
        else // add back default row
            [self.tableView insertRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationFade];
        // Add back 'Add...' Section
        [self.tableView insertSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationFade];
    }
    [self.tableView endUpdates]; // Club all updates together
} 
```

# wpf - 在 XAML 设计数据中引用对象

> ID：12315492
> 
> 赞同：5
> 
> 时间：2012-09-07T09:35:04.337
> 
> 标签：wpf, visual-studio-2010, xaml

如何在 XAML 设计数据文件中引用同一对象两次（或更频繁）？我尝试使用`{x:Reference}`，但这似乎不起作用。

这是一个例子：

样本数据网格第二列单元格中的组合框显示“数据类型”列表。可用数据类型的列表来自`Types`主窗口视图模型的属性（= 数据上下文）。网格中的项目列表来自`Items`视图模型的属性。每个项目都有一个`Name`和一个`Type`列，其中 Type 引用一个数据类型对象。

示例网格如下所示：

![截屏](../Images/fb3be5bbeda5fad8096a8b84bc510b05.png)

这是 XAML 设计数据，它应该在 Visual Studio 设计器中显示相同的网格内容（但它没有）：

```
<?xml version="1.0" encoding="utf-8" ?>
<local:MainWindowViewModel
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="clr-namespace:DataGridSample"
    >
    <local:MainWindowViewModel.Types>
        <local:DataType Name="String" x:Name="String"/>
        <local:DataType Name="Integer" x:Name="Integer"/>
    </local:MainWindowViewModel.Types>
    <local:MainWindowViewModel.Items>
        <local:Item Name="Lorem" Type="{x:Reference String}"/>
        <local:Item Name="Ipsum" Type="{x:Reference Integer}"/>
    </local:MainWindowViewModel.Items>
</local:MainWindowViewModel> 
```

上面，我`{x:Reference String}`用来获取对由`<local:DataType Name="String" x:Name="String"/>`.

在 Visual Studio 设计器中，列表为空，并显示错误消息“在标记中找到错误：... DesignData.xaml”。在设计数据 XAML 文件的编辑器中，我收到错误消息“服务提供者缺少 INameResolver 服务”。

我可以在设计数据文件中使用任何替代方法`{x:Reference}`来引用对象吗？

为了完整起见，这里是我的示例的其余文件：

MainWindow.xaml：

```
<Window x:Class="DataGridSample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        mc:Ignorable="d"
        Title="Sample" Height="300" Width="400"
        d:DataContext="{d:DesignData Source=DesignData.xaml}">
    <Window.Resources>
        <CollectionViewSource x:Key="types" Source="{Binding Types}"/>
    </Window.Resources>

    <Grid>
        <DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Name}" Header="Name" Width="*"/>
                <DataGridComboBoxColumn SelectedItemBinding="{Binding Type}"
                                        ItemsSource="{Binding Source={StaticResource types}}" 
                                        DisplayMemberPath="Name"
                                        Header="Type" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

MainWindow.xaml.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace DataGridSample
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        readonly MainWindowViewModel _viewModel = new MainWindowViewModel();

        public MainWindow()
        {
            InitializeComponent();

            DataContext = _viewModel;
        }
    }
} 
```

MainWindowViewModel.cs：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;

namespace DataGridSample
{
    public class MainWindowViewModel
    {
        private readonly ObservableCollection<DataType> _dataTypes;
        private readonly ObservableCollection<Item> _items;

        public MainWindowViewModel()
        {
            DataType typeString = new DataType {Name = "String"};
            DataType typeInteger = new DataType {Name = "Integer"};

            _dataTypes = new ObservableCollection<DataType> {typeString, typeInteger};
            _items = new ObservableCollection<Item>
                {
                    new Item {Name = "Lorem", Type = typeString},
                    new Item {Name = "Ipsum", Type = typeInteger}
                };
        }

        public ObservableCollection<DataType> Types
        {
            get
            {
                return _dataTypes;
            }
        }

        public ObservableCollection<Item> Items
        {
            get
            {
                return _items;
            }
        }
    }

    public class DataType
    {
        public string Name { get; set; }
    }

    public class Item
    {
        public string Name { get; set; }

        public DataType Type { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:27:18.490

关于为什么`x:Reference`不起作用的背景......

`x:Reference`是 XAML 2009 的一项功能。

您不能`x:Reference`在根据 MSDN 文档编译的 XAML 标记中使用。

*   [http://msdn.microsoft.com/en-us/library/ee795380.aspx](http://msdn.microsoft.com/en-us/library/ee795380.aspx)

它是为松散的 XAML 设计的……例如，如果您创建一个 XAML 页面 (.xaml) 并通过 Internet Explorer 加载它。

当您使用 DesignData 时，Designer 有效地创建并编译了一个新类，其形状和内容与您的 DesignData 文件中描述的一样。

Visual Studio/Blend Designers 不支持它。

*   [http://www.infoq.com/news/2009/12/XAML-2009-Future](http://www.infoq.com/news/2009/12/XAML-2009-Future)

这是一个反驳的论点。

> 以下是 Adam Nathan 的 WPF 4 unleashed book 的解释：“x:Reference 标记扩展经常被错误地与 XAML2009 功能相关联，这些功能在撰写本文时只能从松散的 XAML 中使用。虽然 x:Reference 是一个新功能在 WPF 4 中，只要您的项目针对 .NET Framework 4 或更高版本，它就可以从 XAML2006 中使用。一个小故障是 Visual Studio 2010 中的 XAML 设计器没有正确处理 x:Reference，因此它给出了以下设计时错误，您可以放心地忽略：服务提供者缺少 INameResolver 服务”

*   [http://wpftutorial.net/XAML2009.html](http://wpftutorial.net/XAML2009.html)

解决方法...

# mysql - 将哪一列放在索引中的第一位？基数更高还是更低？

> ID：12315496
> 
> 赞同：3
> 
> 时间：2012-09-07T09:35:32.953
> 
> 标签：mysql, indexing, query-optimization, cardinality

例如，如果我有一个带有 a`city`和一`state`列的表，那么使用索引的最佳方法是什么？

显然`city`将具有最高的基数，所以我应该将该列放在索引中的第一位，我应该放置状态还是无关紧要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:41:48.800

MySQL 复合索引查找必须按照在索引中定义列的顺序进行。由于您希望 MySQL 能够通过执行尽可能少的比较来区分记录，在所有其他条件相同的情况下，您将从复合索引中受益最大，其中列从最高基数到最低基数排序。

也就是说，假设最终必须针对最高基数列执行比较以区分记录，为什么在最终可能没有必要的情况下强制比较首先针对最低基数列？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-08T17:49:14.923

*在这种情况下*没关系：

```
INDEX cs (city, state),
INDEX sc (state, city)

WHERE city = 'Atlanta'
  AND state = 'Georgia' 
```

使用任一索引，在 BTree 中的向下钻取将是相同的努力，并且您会以同样快的速度到达一行。

（子句的顺序`WHERE`无关紧要。）

（如果您使用的是“范围”测试而不是`=`测试，那么这是[*一个不同的问题*](https://stackoverflow.com/questions/50239658/should-i-put-the-higher-cardinality-column-first-in-an-index-when-involving-a-ra)。）

# android - ant/build.xml:658：返回空值：127

> ID：12315498
> 
> 赞同：2
> 
> 时间：2012-09-07T09:35:37.213
> 
> 标签：android, ant, proguard, build.xml

```
cannot run ANT task: 
The following error occurred while executing this line: 
    /opt/android-sdk-linux/tools/ant/build.xml:622: 
The following error occurred while executing this line: 
    /opt/android-sdk-linux/tools/ant/build.xml:658: null returned: 127 
```

第 621,622 行：

```
<do-only-if-manifest-hasCode
                elseText="hasCode = false. Skipping aidl/renderscript/R.java"> 
```

第 658 行：

```
proguardFile="${out.absolute.dir}/proguard.txt"> 
```

我在构建.apk 时遇到了这个错误。任何人都可以找出问题所在吗？

# javascript - 需要帮助将 Jquery 转换为 Javascript

> ID：12315504
> 
> 赞同：0
> 
> 时间：2012-09-07T09:35:54.393
> 
> 标签：javascript, jquery

如前所述，我不知道如何做 JQuery，这可能吗？

查询：

```
<script>

$('#player').on('timeupdate', function() {
    $('#seekbar').attr("value", this.currentTime / this.duration);
});?

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:43:40.807

```
document.getElementById('player').addEventListener('timeupdate', function() {
    document.getElementById('seekbar').value = this.currentTime / this.duration;
}, false); 
```

# android - Android SyncAccount / SyncAdapter 向帐户屏幕添加更多选项

> ID：12315509
> 
> 赞同：0
> 
> 时间：2012-09-07T09:36:12.247
> 
> 标签：android, synchronization, preferences, android-syncadapter

如何添加更多选项以同步帐户屏幕？前任。在印象笔记帐户设置等中同步的频率如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:38:29.213

在您的authenticator.xml 中，您可以指定一个属性

```
 android:accountPreferences="@xml/account_preferences" 
```

然后像其他任何一样简单地创建首选项屏幕。

# qt - QtCreator：QML 调试器，连接被拒绝 - 关闭 QML 调试器？

> ID：12315521
> 
> 赞同：3
> 
> 时间：2012-09-07T09:36:46.943
> 
> 标签：qt, qt-creator, qml

在 QtCreator（2.5.2，Win7）中，我在 Debugger 窗口中获得了永久/重复输出。调试等一切都很好。由于我不需要 QML 调试，如何关闭 QML 调试器？或解决问题以消除重复消息。

```
QML Debugger: Error: (0) Connection refused
QML Debugger: Connecting to debug server 127.0.0.1:3768
QML Debugger: resolving host...
QML Debugger: connecting to debug server... 
```

试过`CONFIG -= declarative_debug`没有效果。

截屏：

![QML 调试器消息](../Images/fd2615fd767f9a406a177d94d527174c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:23:35.930

在 Qt Creator 中，转到 Projects 模式，在 Run Settings 中，转到 Debugger Settings 并取消选中 Enable QML Debugging。这将禁用 QML 调试。

# d3.js - D3.js 和弦图适用于本地服务器但不适用于远程服务器

> ID：12315530
> 
> 赞同：2
> 
> 时间：2012-09-07T09:37:15.560
> 
> 标签：d3.js, coldfusion, cfwheels, chord-diagram

我有一个改编自[https://gist.github.com/1308257/1b67569b598525efad854978eced78ee74eec158](https://gist.github.com/1308257/1b67569b598525efad854978eced78ee74eec158)的和弦图。

在我的版本上，它在我的本地机器（Apache，CF9）上完美运行，但是当上传到主机器（IIS6，CF8）时，我得到“Unexpected value rotate(NaN)translate(390) parsing transform attribute”。

我怀疑这与动态生成的 .CSV 我正在传递它有关，或者与正在更改响应标头的设置服务器端有关。但是来自“看起来”的数据很好......

奇怪的是，看起来在实时站点上的 ga.js (!) 中也出现了错误，这很奇怪。

测试页面在这里：[http ://www.oxfordmartin.ox.ac.uk/labs/chord/](http://www.oxfordmartin.ox.ac.uk/labs/chord/)

这就是它应该的样子：![应该看起来像](../Images/f48cd4aed1da532eb12aeaf8f37cc7d9.png) 相反，我得到了这个![坏的](../Images/a885951a6cde4bb826ffdc2608136b23.png)

这是我第一次尝试 d3，任何想法都非常感谢！

# asp.net - 在新标签中打开 png/pdf 而不是打开下载窗口

> ID：12315535
> 
> 赞同：0
> 
> 时间：2012-09-07T09:37:25.067
> 
> 标签：asp.net, html, http, iis

我有我的项目的服务器。我想了解为什么这些 2 的行为会有所不同。在我点击的第一个上：

```
<a href="/multimedia/test.pdf" target="_blank">OPEN</a> 
```

打开新选项卡并呈现 pdf 并在另一台服务器（相同的浏览器 - chrome）上打开新选项卡，但不会开始呈现 pdf 下载窗口。

感谢您的任何建议和解释

服务器是 IIS 6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:50:42.673

Seems like one of the browsers has a plugin available, or configured by mefor opening the document itself, while the other one doesn't (this might also mean that the MIME type of the file isn't properly configured so the browser doesn't know what to use to open the file).

If you want to force all browsers to show the download dialog (`attachment`) or trying to open it (`inline`), you can do so with the [Content-Disposition](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1) header field. For instance:

`Content-Disposition: attachment; filename="fileTitle.pdf"` or `Content-Disposition: inline;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:51:21.900

下载内容的那个没有 MIME 类型的配置不正确。
它正在处理文件是无法识别的静态文件。由于 Content-Disposition 标头没有正确设置，浏览器不知道它可以呈现这些类型。

[配置 MIME 类型的步骤](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/cd72c0dc-c5b8-42e4-96c2-b3c656f99ead.mspx?mfr=true)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:56:06.303

两台服务器可能会在标头中发送具有不同 MIME 类型的 PDF 文件，因为它们的配置不同。如果您希望在浏览器中打开 PDF，正确的 MIME 类型是[RFC 3778](http://www.rfc-editor.org/rfc/rfc3778.txt)`application/pdf`中定义的。

以下是有关如何在 IIS 6.0 中配置 MIME 类型的分步教程：

[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/cd72c0dc-c5b8-42e4-96c2-b3c656f99ead.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/cd72c0dc-c5b8-42e4-96c2-b3c656f99ead.mspx?mfr=true)

# php - 搜索包含字符串的 PHP 数组元素

> ID：12315536
> 
> 赞同：45
> 
> 时间：2012-09-07T09:37:25.807
> 
> 标签：php, arrays

```
$example = array('An example','Another example','Last example'); 
```

如何在上述数组中对“Last”一词进行松散搜索？

```
echo array_search('Last example',$example); 
```

如果指针与值中的所有内容完全匹配，上面的代码只会回显值的键，这是我不想要的。我想要这样的东西：

```
echo array_search('Last',$example); 
```

如果值包含单词“Last”，我希望值的键回显。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-07T09:43:42.213

要查找与您的搜索条件匹配的值，您可以使用`array_filter`函数：

```
$example = array('An example','Another example','Last example');
$searchword = 'last';
$matches = array_filter($example, function($var) use ($searchword) { return preg_match("/\b$searchword\b/i", $var); }); 
```

现在`$matches`数组将只包含原始数组中包含*最后一个*单词的元素（不区分大小写）。

如果您需要查找与条件匹配的值的键，则需要遍历数组：

```
$example = array('An example','Another example','One Example','Last example');
$searchword = 'last';
$matches = array();
foreach($example as $k=>$v) {
    if(preg_match("/\b$searchword\b/i", $v)) {
        $matches[$k] = $v;
    }
} 
```

现在数组`$matches`包含来自原始数组的键值对，其中值包含（不区分大小写）单词*last*。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-07T09:45:50.560

```
function customSearch($keyword, $arrayToSearch){
    foreach($arrayToSearch as $key => $arrayItem){
        if( stristr( $arrayItem, $keyword ) ){
            return $key;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-07T09:45:23.600

```
$input= array('An example','Another example','Last example');
$needle = 'Last';
$ret = array_keys(array_filter($input, function($var) use ($needle){
    return strpos($var, $needle) !== false;
})); 
```

这将为您提供其值包含针的所有键。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T09:54:43.760

它通过第一个匹配找到元素的键：

```
echo key(preg_grep('/\b$searchword\b/i', $example)); 
```

如果您需要所有键，请使用 foreach：

```
foreach (preg_grep('/\b$searchword\b/i', $example) as $key => $value) {
  echo $key;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-27T06:30:51.827

我不喜欢正则表达式，因为据我所知，它们总是比普通的字符串函数慢。所以我的解决方案是：

```
function substr_in_array($needle, array $haystack)
{
    foreach($haystack as $value)
    {
        if(strpos($value, $needle) !== FALSE) return TRUE;
    }
    return FALSE;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-23T11:51:48.477

Aleks G 给出的答案不够准确。

```
$example = array('An example','Another example','One Example','Last example');
$searchword = 'last';
$matches = array();
foreach($example as $k=>$v) {
    if(preg_match("/\b$searchword\b/i", $v)) {
        $matches[$k] = $v;
    }
} 
```

线

```
if(preg_match("/\b$searchword\b/i", $v)) { 
```

应该换成这些

```
$match_result = preg_match("/\b$searchword\b/i", $v);
if( $match_result!== false && $match_result === 1 ) { 
```

或者更简单地说

```
if( preg_match("/\b$searchword\b/i", $v) === 1 ) { 
```

与[http://php.net/manual/en/function.preg-match.php一致](http://php.net/manual/en/function.preg-match.php)

> 如果模式匹配给定的主题，preg_match() 返回 1，如果不匹配，则返回 0，如果发生错误，则返回 FALSE。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-02-22T23:46:17.740

我也在寻找解决 OP 问题的方法，我通过 Google 偶然发现了这个问题。然而，这些答案都没有对我有用，所以我想出了一些不同的东西，效果很好。

```
$arr = array("YD-100 BLACK", "YD-100 GREEN", "YD-100 RED", "YJ-100 BLACK");
//split model number from color
$model = explode(" ",$arr[0])
//find all values that match the model number
$match_values = array_filter($arr, function($val,$key) use (&$model) { return stristr($val, $model[0]);}, ARRAY_FILTER_USE_BOTH);
//returns
//[0] => YD-100 BLACK
//[1] => YD-100 GREEN
//[2] => YD-100 RED 
```

这仅适用于 PHP 5.6.0 及更高版本。

# swing - 如何严格用户去父 JFrame

> ID：12315537
> 
> 赞同：0
> 
> 时间：2012-09-07T09:37:26.447
> 
> 标签：swing, jframe, jdialog

我想让 JFrame 像 JDialog 框一样，这样用户就不能走出 JFrame 或父 JFrame。我怎么能做这个。请帮我。

这是我的代码：-

```
 TestBedForm n = new TestBedForm();
    JDialog dialog = new JDialog();
    dialog.setSize(n.getSize());
    dialog.setTitle("Design");
    dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
    dialog.setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
    dialog.add(n);
    dialog.setVisible(true); 
```

这里 TestBedForm 是 JFrame ，现在我想将它作为 JDialog 打开，所以这段代码有什么问题。有人可以帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:52:56.787

您不能将 JFrame 添加到容器中。你会得到 RuntimeError。尝试 `dialog.add(n.getContentPane());` 代替 `dialog.add(n);`

# jquery - 使用 JQUERY 进行部分回发

> ID：12315538
> 
> 赞同：1
> 
> 时间：2012-09-07T09:37:29.157
> 
> 标签：jquery, postback, partial

问题：当我的 JQUERY 完成服务调用并且数据返回到我的 aspx 页面时，我需要部分回发。

背景：我有一个网页（aspx），我们有一个服务器端按钮控件。如果我单击按钮，将打开一个 JQUERY 对话。此弹出窗口提供一些搜索功能（通过 MVC 实现的搜索功能和从服务返回的搜索结果）。如果我选​​择匹配的结果，它会将所选数据填充到我的相应文本框中网页和 JQUERY 对话将关闭。因此，在 JQUERY 对话关闭后，我需要在我的网页后面放一个部分帖子。在我的网页中，有 5 个 udatepanel。

下面是我的 JQUERY 功能的示例代码

```
var url = "../SearchLookup/GetEntityDetail";
    $.post(url, { Id: referenceId }, function (data) {
        if (data.ErrorId != "TxnErr1") {
           //this function will populate the selected information on to the web page
            SearchCallBack(data);
            $("#SearchDialog").dialog("close");
           //here i want to do partial post back of my web page
        } 
```

请就此向我提出建议。

# sdwebimage - 如何包含 SDWebImage 框架

> ID：12315539
> 
> 赞同：6
> 
> 时间：2012-09-07T09:37:31.450
> 
> 标签：sdwebimage

我正在开发一个 iPhone 应用程序。在这个应用程序中，我使用了许多图像，我需要将这些图像存储在缓存中。为此，我发现 SDWebImage 是正确的框架，但我不能在我的 iPhone 项目中包含这个框架。谁能建议如何在我的项目中包含这个框架以及如何使用这个框架保存和检索图像？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T16:52:47.730

前往 [SDWebImage 框架下载站点。](https://github.com/rs/SDWebImage)

1.  - 单击 Zip 标签并下载存档。
2.  - 取消归档文件。
3.  - 您将找到“SDWebImage”文件夹。
4.  - 查看该路径并将此文件夹添加到您的项目中。（不要忘记复制项目中的文件夹而不是直接链接）。

到目前为止很好。

转到您的视图控制器并添加

```
#import <SDWebImage/UIImageView+WebCache.h>
#import "UIImageView+WebCache.h" 
```

并使用如下的 imageview 方法。

```
UIImageView *imageView =  [[UIImageView alloc] init]; 
[imageView setImageWithURL:[NSURL URLWithString:@"ImageURL here"]];
[imageView release]; 
```

由于缓存，您即使在关闭并重新打开应用程序后也可以查看图像。即使您可以根据需要删除缓存，

```
clearCache and clearDisk method in Manager 
```

您可以通过在源代码中跟踪 NSdictionary 来跟踪每个图像（如果您有兴趣，请检查）。最好的事情是您可以在下载图像时轻松地在图像视图上添加进度条。

欲了解更多信息 - [SDWebImage Doc](http://hackemist.com/SDWebImage/doc/Classes/SDImageCache.html#overview)

继续享受编码。顺便说一句，很好的问题（甚至对初学者有用）感谢***rs***提供的出色框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-30T11:05:15.617

最后编译的框架是 3.6.0，您可以在以下位置找到它： [https ://github.com/rs/SDWebImage/releases](https://github.com/rs/SDWebImage/releases)

为了更方便访问，框架的直接链接如下： [https ://github.com/rs/SDWebImage/releases/download/3.6/SDWebImage-3.6.framework.zip](https://github.com/rs/SDWebImage/releases/download/3.6/SDWebImage-3.6.framework.zip)

# java - Java：内存利用率问题（观察到突然峰值）

> ID：12315540
> 
> 赞同：1
> 
> 时间：2012-09-07T09:37:33.750
> 
> 标签：java, jakarta-ee, memory, memory-management, memory-leaks

我正在观察我的应用程序/服务的内存利用率。

我正在运行相同的负载，当时我通过 Jconsole 看到内存在 1.5 到 1.7 GB 之间（可以在图像上看到）。突然，我注意到内存在几秒钟内变高了，但在这里我想提一下，在用例方面没有任何改变（相同的负载）。

我需要知道内存突然变高的原因。在我的设置中，没有任何改变导致内存变高的原因。

GC参数中是否有任何错误？

请求您的想法。

我使用的 GC 参数是：

> export GC1_OPTS="-XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:CMSInitiatingOccupancyFraction=50 -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled -XX:+CMSParallelRemarkEnabled -XX:+UseAdaptiveGCBoundary" export GC2_OPTS="-XX:+ExplicitGCInvokesConcurrent "

![在此处输入图像描述](../Images/4b5358d10454d67bb8e0cfe65ac248de.png)

![在此处输入图像描述](../Images/e59fa6a6d894c3cda3bba46ae07357ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:41:08.747

你需要知道它在那个时期做了什么。您的负载可能没有改变，但您可能会发现通常使用少量内存的任务碰巧很少使用大量内存。我会在您的应用程序上使用内存分析器来查看内存的使用方式以及导致它的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:37:35.973

您错过了问题的一个重要部分：“问题是什么”您看到使用的内存增加了。这可能是您的应用程序代码中以某种方式触发的错误，但从垃圾收集的角度来看，这不是问题。如果你能产生这个，我会做两个堆转储，一个在 1.7 GB，然后一个在 2.5 GB 堆。您可以使用 Eclipse MAT 和 delta 模式来比较转储。你会看到你有什么额外的对象。然后你可以找出它是否有问题。

关于你的 GC 设置，我会去掉“-XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled”，因为它们通常会导致很长的暂停时间，而这并不是真正需要的。“-XX:+UseAdaptiveGCBoundary”也提出了一个问题，即您使用此参数的动机是什么。我个人不会。

# scons - 目录目标始终是最新的

> ID：12315541
> 
> 赞同：2
> 
> 时间：2012-09-07T09:37:35.870
> 
> 标签：scons

我正在尝试使用以下命令更新目录中的文件：

```
env.Command(Dir("./targetdir/"),
            ["./targetdir/file0", "./targetdir/file1", ...],
            "./somescript.sh $TARGET") 
```

Scons 一直告诉我这`./targetdir/`是最新的，即使我已经手动修改`./targetdir/file0.`

scons 不应该知道，因为一个源文件已更改，因此应该运行该命令？目标是目录这一事实是否有特殊性？

我想`./somescript.sh ./targetdir/`在任何文件`./targetdir/`发生更改时运行该命令。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:44:37.390

我不相信 SCons 喜欢将目标作为目录。相反，您应该将单个文件指定为目标。

作为旁注，您是否打算让目标和源包含相同的文件？如果这是因为缺少“somescript.sh”的输入文件，通常您可以只提供脚本作为源。这样，SCons 会将目标与脚本进行比较，而不是将目标与自身进行比较。

```
env.Command(target = "#targetdir/file0",
            source = "#somescript.sh",
            action = "#somescript.sh $TARGET") 
```

请注意，我在路径中使用了“#”，这意味着相对于根 SConstruct。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:19:12.243

这里的问题是你没有目标。Scons 不能在没有目标和源的情况下存储有关依赖关系的信息。因此，其中一种解决方案使用显式目标。

```
mycmd = Command('some_target', [], ['script.sh targetdir', Touch('$TARGET')])
or 
mycmd = Command('some_target', [], 'script.sh targetdir > $TARGET')
Depends(mycmd, Glob('targetdir/*')) 
```

现在，scons 有一个名为 some_target 的目标，并且知道它依赖于 targetdir 中的文件。恕我直言，最好的方法是为其创建特殊的构建器/包装器，并使用变体目录将目标存储在那里。

# ruby-on-rails - RSpec：测试 Mailgun 电子邮件接收和解析

> ID：12315545
> 
> 赞同：3
> 
> 时间：2012-09-07T09:37:56.020
> 
> 标签：ruby-on-rails, rspec

所以我正在使用 Mailgun 来接收和解析来自用户的电子邮件，并在系统的后面发布帖子。我对如何使用 RSpec 进行测试很感兴趣——我应该使用标准 Rails 邮件程序将电子邮件发送到我的 Mailgun 地址，还是有更聪明的做事方式？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:12:59.990

我不熟悉 Mailgun，但您可能想查看[email_spec](https://github.com/bmabey/email-spec)。这对于测试电子邮件发送非常有帮助。

# iphone - 来自 Facebook 图形 API 的“重复状态消息”错误

> ID：12315552
> 
> 赞同：3
> 
> 时间：2012-09-07T09:38:24.917
> 
> 标签：iphone, facebook-graph-api, compiler-errors

我在 facebook 图形 API 中收到以下消息：

```
{
  "error": {
    "message": "(#506) Duplicate status message",
    "type":"OAuthException",
    "code":506,
    "error_data": {
      "kError":1455006
    }
  }
} 
```

谁能解释一下这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:42:13.777

`(#506) Duplicate status message`表示您在上一条消息的短时间内发布了一条消息

更多在这里

> [如何避免在 iOS 中使用 Facebook SDK 时出现“重复状态消息”错误？](https://stackoverflow.com/questions/11384152/how-to-avoid-the-duplicate-status-message-error-in-using-facebook-sdk-in-ios)

# objective-c - 可能的？单例Objective-C iOS的NSThread请求URL

> ID：12315555
> 
> 赞同：0
> 
> 时间：2012-09-07T09:38:33.513
> 
> 标签：objective-c, ios, xml, multithreading, nsthread

情况。XMLProxy 类是单例的。XMLRequest 类也是。

通常，当我想请求 URL 时。例子 ：

```
XMLProxy *xmlProxy = [XMLProxy sharedInstance];
[xmlProxy tryGetDataWithParameter:example_parameter];

// Method "tryGetDataWithParameter" will call method "requestURL" from XMLRequest Class

// Assume that is [xmlRequest requestURL];

// and XMLProxy Class (XMLProxy delegate) will create xml parser for each "example_parameter" 
type to response xml data receive. 
```

没问题。

问题？我想创建可视化后台进程来请求 URL，并创建单例的 AutoSending 类。

> 我想使用 AutoSending 类来调用方法“tryGetDataWithParameter”（来自 XMLProxy 类）。调用示例：[autoSending start];
> 
> -(void)start{ XMLProxy *xmlProxy = [XMLProxy sharedInstance]; [xmlProxy tryetDataWithParameter:example_parameter]; }

我可以使用 NSThread 调用语句“[autoSending start]”吗？它是视觉后台进程的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T07:18:38.603

与其尝试自己编写所有这些代码，不如使用像[AFNetworking](https://github.com/AFNetworking/AFNetworking/)这样的库，它构建在`NSURLConnection`、`NSOperation`和其他标准 IOS 技术之上。然后，您可以使用 NSOperationQueue 在另一个线程上运行您的请求。

# .net - WCF 代理关闭 basicHttpBinding - 帮助解释行为

> ID：12315560
> 
> 赞同：2
> 
> 时间：2012-09-07T09:39:02.000
> 
> 标签：.net, wcf, proxy, basichttpbinding

我在 WCF 服务上有以下代码，我正在使用**basicHttpBinding**

```
public class Service1 : IService1
{
        public string GetData(int value)
        {
            // Sleep for a minute
            System.Threading.Thread.Sleep(60000);
            return string.Format("You entered: {0}", value);
        }
} 
```

我在客户端上有以下代码，客户端的“sendTimeout”只有 1 秒（我希望客户端在服务器响应之前超时）

```
Service1Client clientProxy = new Service1Client();
        try
        {

            Console.WriteLine(clientProxy.GetData(10));
            clientProxy.Close();
        }            
        catch (TimeoutException)
        {
            if (((ICommunicationObject)clientProxy).State == CommunicationState.Opened)
            {
                // In the case of TimeoutException the state is not faulted and 
                // "close" is invoked
                clientProxy.Close();
            }
        } 
```

我在 IIS 日志中看到的请求是：

> 2012-09-07 07:22:51 ::1 POST /SimpleTimeWCF/Service1.svc - 80 - ::1 - 200 0 **64** 60015

您可以观察到状态为 200，sc-win32-status 为 64，所用时间为 60015（大约一分钟）。

*当 WCF 服务忙于处理请求时，客户端调用了 clientProxy.Close。服务器上的预期行为是什么？*

使用 basicHttpBinding 时服务器上“客户端代理关闭”方法调用的预期行为是什么？

*使用其他绑定时行为是否会发生变化？例如：网络 TCP 绑定？当我们使用 net tcp 绑定时，是否在代理上调用“close”结束与服务器建立的“tcp 连接”？*

PS：请注意，我已将 IIS 上的 Enable HTTP Keep-alive 设置为 false

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:04:09.903

该服务将从客户端获取请求。它将处理请求，需要 60 秒。与此同时，客户端已经“放弃”了，但是对于 HTTP，它无法通知服务不再需要之前的请求。

最后，服务：

*   将以应有的方式完成，给出[HTTP 状态 200 “OK”](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)
*   将无法响应客户端，因为它已经超时，以[代码 64 "ERROR_NETNAME_DELETED"结尾](http://msdn.microsoft.com/en-us/library/ms681382.aspx)

# sass - Zurb Foundation 和 LiveReload SASS 编译器不工作

> ID：12315570
> 
> 赞同：3
> 
> 时间：2012-09-07T09:39:28.933
> 
> 标签：sass, zurb-foundation

我在终端中这样安装了 Foundation：

```
[sudo] gem install zurb-foundation 
```

然后我创建了一个这样的新项目：

```
cd path/to/where-you-want-your-project 
compass create <project-name> -r zurb-foundation --using foundation 
```

（就像基金会文档一样）

现在因为我很懒，我不想`compass watch path/to/project`每次在项目之间切换时都点击。

当我将 LiveReload 设置为编译我的 sass 文件时，会出现以下错误：

> [31m[0m[31m 错误[0m sass/app.scss（第 5 行：要导入的文件未找到或不可读：基础。加载路径：/Volumes/HDD/htdocs/static_sites/static_ruegg/sass/Applications/LiveReload.app/内容/资源/SASS.lrplugin/lib/compass/frameworks/blueprint/stylesheets /Applications/LiveReload.app/Contents/Resources/SASS.lrplugin/lib/compass/frameworks/compass/stylesheets /Applications/LiveReload.app/Contents/资源/SASS.lrplugin/lib/ZURB-foundation/stylesheets Compass::SpriteImporter) [31m[0m

我不明白这一点。为了使用 LiveRealod，我必须进行哪些更改？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T18:27:09.480

为避免修改 LiveReload.app，您还可以在项目 config.rb 文件中提供 zurb-foundation gem 的绝对路径。LiveReload 然后将使用该版本。

例如：

代替

```
require "curb-foundation"; 
```

利用

```
require "/Library/Ruby/Gems/1.8/gems/zurb-foundation-3.1.1/lib/zurb-foundation.rb" 
```

在您的 config.rb 文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T17:49:51.183

我有同样的问题。令人不安。

经过一番研究，我发现 LiveReload（我使用的是 2.3.18 版）在里面包含了自己的一组 gem `/Applications/LiveReload.app/Contents/Resources/SASS.lrplugin/lib`，而且这组与 Foundation 3.0.9 安装的一组不同。不仅在依赖关系上，而且在内容上。

为了让 LiveReload 正常工作，我去了`/Applications/LiveReload.app/Contents/Resources/SASS.lrplugin/lib`，用有问题的现有 gem 文件夹替换了我的 gems 存储库中相应的符号链接，并为我的 gems 存储库中存在但不在 LiveReload 集中的符号链接添加了符号链接。

因此，总结一下，安装了 zurb-foundation gem 和 LiveReload 应用程序后，我已经完成了：

```
cd /Applications/LiveReload.app/Contents/Resources/SASS.lrplugin/lib

rm -Rf zurb-foundation
ln -s ~/.rvm/gems/ruby-1.9.3-p194/gems/zurb-foundation-3.0.9 zurb-foundation

rm -Rf sass
ln -s ~/.rvm/gems/ruby-1.9.3-p194/gems/sass-3.2.1 sass

rm -Rf compass
ln -s ~/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2 compass

rm -Rf chunky_png/
ln -s ~/.rvm/gems/ruby-1.9.3-p194/gems/chunky_png-1.2.6 chunky_png

ln -s ~/.rvm/gems/ruby-1.9.3-p194/gems/modular-scale-1.0.2 modular-scale

ln -s ~/.rvm/gems/ruby-1.9.3-p194/gems/sassy-math-1.2 sassy-math

ln -s /.rvm/gems/ruby-1.9.3-p194/gems/fssm-0.2.9 fssm 
```

`~/.rvm/gems/ruby-1.9.3-p194/gems/`我的默认 gems 存储库的路径在哪里。如果您不知道您的 gems 存储库路径，您可以通过运行来记录它们`gem environment`。

在那之后，一切似乎都正常。

# android - 在同一活动 Android 中更改意图

> ID：12315571
> 
> 赞同：0
> 
> 时间：2012-09-07T09:39:34.043
> 
> 标签：android, android-intent, android-activity

我正在尝试在与创建播放器相同的布局上编辑播放器。

当我按下编辑播放器按钮时，我将创建播放器页面的标题更改为“编辑播放器”并使用播放器名称填充列表框。我想知道当我按下完成时如何返回创建玩家活动。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:42:10.137

通常你会调用`finish()`来完成当前的活动，并且用户应该被重定向到堆栈上的第一个活动，这显然应该是 Create Player 活动。

所以，为按钮设置一个点击监听`done`器，一个`onClick`调用`finish()`

或者，您可以在 中启动 Create Player 活动`onClick`，就像您将启动任何常规活动一样：

```
Intent intent = new Intent(EditPlayer.this, CreatePlayer.class);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:44:18.687

> 当我按下编辑播放器按钮时，我将创建播放器页面的标题更改为“编辑播放器”并使用播放器名称填充列表框。

好像您在一项活动中完成了所有操作？

如果要切换，最好创建两个活动。创建玩家 A 活动 -> 按下编辑 -> startActivity B -> 编辑 -> 完成并完成（）活动 B -> 恢复 A 活动。

# sql - 如何编写 Oracle 查询以查找可能重叠的起始日期的总长度

> ID：12315573
> 
> 赞同：10
> 
> 时间：2012-09-07T09:39:35.213
> 
> 标签：sql, oracle

我正在努力寻找以下任务的查询

我有以下数据，想查找每个唯一 ID 的总网络日

```
ID  From        To          NetworkDay
1   03-Sep-12   07-Sep-12   5
1   03-Sep-12   04-Sep-12   2
1   05-Sep-12   06-Sep-12   2
1   06-Sep-12   12-Sep-12   5
1   31-Aug-12   04-Sep-12   3
2   04-Sep-12   06-Sep-12   3
2   11-Sep-12   13-Sep-12   3
2   05-Sep-12   08-Sep-12   3 
```

问题是日期范围可能重叠，我想不出能给我以下结果的 SQL

```
ID  From        To          NetworkDay
1   31-Aug-12   12-Sep-12   9
2   04-Sep-12   08-Sep-12   4
2   11-Sep-12   13-Sep-12   3 
```

接着

```
ID  Total Network Day
1   9
2   7 
```

如果无法进行网络日计算，则只需获取第二张表就足够了。

希望我的问题很清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T23:28:40.660

我们可以使用 Oracle 分析，即 Oracle 中的“OVER ... PARTITION BY”子句来执行此操作。PARTITION BY 子句有点像 GROUP BY，但没有聚合部分。这意味着我们可以将行组合在一起（即对它们进行分区）并且它们作为单独的组对它们执行操作。当我们对每一行进行操作时，我们就可以访问上面前一行的列。这是 PARTITION BY 给我们的特性。（PARTITION BY 与为了性能而对表进行分区无关。）

那么我们如何输出不重叠的日期呢？我们首先根据 (ID,DFROM) 字段对查询进行排序，然后使用 ID 字段来创建分区（行组）。然后，我们使用如下表达式测试前一行的 TO 值和当前行的 FROM 值是否重叠：（在伪代码中）

```
 max(previous.DTO, current.DFROM) as DFROM 
```

如果没有重叠，这个基本表达式将返回原始的 DFROM 值，但如果有重叠，将返回之前的 TO 值。由于我们的行是有序的，我们只需要关注最后一行。如果前一行与当前行完全重叠，我们希望该行具有“零”日期范围。所以我们对 DTO 字段做同样的事情来获得：

```
max(previous.DTO, current.DFROM) as DFROM, max(previous.DTO, current.DTO) as DTO 
```

一旦我们使用调整后的 DFROM 和 DTO 值生成了新结果集，我们就可以将它们聚合起来并计算 DFROM 和 DTO 的范围间隔。

请注意，数据库中的大多数日期计算都不包含在内，例如您的数据。所以像 DATEDIFF(dto,dfrom) 这样的东西不会包括 dto 实际指的日期，所以我们要先将 dto 向上调整一天。

我不再有权访问 Oracle 服务器，但我知道这可以通过 Oracle Analytics 实现。查询应该是这样的：（如果你让它工作，请更新我的帖子。）

```
SELECT id, 
    max(dfrom, LAST_VALUE(dto) OVER (PARTITION BY id ORDER BY dfrom) ) as dfrom, 
    max(dto, LAST_VALUE(dto) OVER (PARTITION BY id ORDER BY dfrom) ) as dto
  from (
    select id, dfrom, dto+1 as dto from my_sample   -- adjust the table so that dto becomes non-inclusive
      order by id, dfrom
  ) sample; 
```

这里的秘密是**LAST_VALUE(dto) OVER (PARTITION BY id ORDER BY dfrom)**表达式，它返回当前行之前的值。所以这个查询应该输出不重叠的新 dfrom/dto 值。然后，子查询此操作（dto-dfrom）并求和总数是一件简单的事情。

## 使用 MySQL

我确实可以访问 mysql 服务器，所以我确实让它在那里工作。MySQL 没有像 Oracle 这样的结果分区（分析），所以我们必须使用结果集变量。这意味着我们使用@var:=xxx 类型的表达式来*记住*最后的日期值，并据此调整 dfrom/dto。相同的算法只是更长和更复杂的语法。我们还必须在 ID 字段更改时*忘记*最后一个日期值！

所以这里是示例表（你有相同的值）：

```
create table sample(id int, dfrom date, dto date, networkDay int);
insert into sample values
    (1,'2012-09-03','2012-09-07',5),
    (1,'2012-09-03','2012-09-04',2),
    (1,'2012-09-05','2012-09-06',2),
    (1,'2012-09-06','2012-09-12',5),
    (1,'2012-08-31','2012-09-04',3),
    (2,'2012-09-04','2012-09-06',3),
    (2,'2012-09-11','2012-09-13',3),
    (2,'2012-09-05','2012-09-08',3); 
```

在查询中，我们像上面一样输出未分组的结果集：变量@ld 是“last date”，变量@lid 是“last id”。每当@lid 发生变化时，我们都会将@ld 重置为null。仅供参考在 mysql 中， := 运算符是赋值发生的地方， = 运算符只是等于。

这是一个 3 级查询，但可以减少到 2 级。我使用了一个额外的外部查询以使内容更具可读性。最里面的查询很简单，它将*dto*列调整为不包含在内并进行正确的行排序。中间查询调整 dfrom/dto 值以使它们不重叠。外部查询简单删除未使用的字段，并计算区间范围。

```
set @ldt=null, @lid=null;
select id, no_dfrom as dfrom, no_dto as dto, datediff(no_dto, no_dfrom) as days from (
select if(@lid=id,@ldt,@ldt:=null) as last, dfrom, dto, if(@ldt>=dfrom,@ldt,dfrom) as no_dfrom, if(@ldt>=dto,@ldt,dto) as no_dto, @ldt:=if(@ldt>=dto,@ldt,dto), @lid:=id as id,
        datediff(dto, dfrom) as overlapped_days
  from (select id, dfrom, dto + INTERVAL 1 DAY as dto from sample order by id, dfrom) as sample
  ) as nonoverlapped
  order by id, dfrom; 
```

上面的查询给出了结果（注意 dfrom/dto 在这里不重叠）：

```
+------+------------+------------+------+
| id   | dfrom      | dto        | days |
+------+------------+------------+------+
|    1 | 2012-08-31 | 2012-09-05 |    5 |
|    1 | 2012-09-05 | 2012-09-08 |    3 |
|    1 | 2012-09-08 | 2012-09-08 |    0 |
|    1 | 2012-09-08 | 2012-09-08 |    0 |
|    1 | 2012-09-08 | 2012-09-13 |    5 |
|    2 | 2012-09-04 | 2012-09-07 |    3 |
|    2 | 2012-09-07 | 2012-09-09 |    2 |
|    2 | 2012-09-11 | 2012-09-14 |    3 |
+------+------------+------------+------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:28:13.720

如何构建一个通过删除孔并仅考虑最大间隔来合并间隔的 SQL。它是这样的（未经测试）：

```
SELECT DISTINCT F.ID, F.From, L.To
 FROM Temp AS F, Temp AS L
 WHERE F.From < L.To AND F.ID = L.ID
   AND NOT EXISTS (SELECT *
                 FROM Temp AS T
                 WHERE T.ID = F.ID
                 AND F.From < T.From AND T.From < L.To
                         AND NOT EXISTS ( SELECT *
                         FROM Temp AS T1
                            WHERE T1.ID = F.ID
                            AND T1.From < T.From
                            AND T.From <= T1.To)
               )
   AND NOT EXISTS (SELECT *
              FROM Temp AS T2
              WHERE T2.ID = F.ID
              AND (
                    (T2.From < F.From AND F.From <= T2.To)
                 OR (T2.From < L.To AND L.To < T2.To)
                   )
             ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T10:11:39.393

```
with t_data as (
    select 1 as id,
           to_date('03-sep-12','dd-mon-yy') as start_date,
           to_date('07-sep-12','dd-mon-yy') as end_date from dual
    union all
    select 1,
           to_date('03-sep-12','dd-mon-yy'),
           to_date('04-sep-12','dd-mon-yy') from dual
    union all
    select 1,
           to_date('05-sep-12','dd-mon-yy'),
           to_date('06-sep-12','dd-mon-yy') from dual
    union all
    select 1,
           to_date('06-sep-12','dd-mon-yy'),
           to_date('12-sep-12','dd-mon-yy') from dual
    union all 
    select 1,
           to_date('31-aug-12','dd-mon-yy'),
           to_date('04-sep-12','dd-mon-yy') from dual
    union all 
    select 2,
           to_date('04-sep-12','dd-mon-yy'), 
           to_date('06-sep-12','dd-mon-yy') from dual
    union all 
    select 2, 
           to_date('11-sep-12','dd-mon-yy'), 
           to_date('13-sep-12','dd-mon-yy') from dual
    union all 
    select 2, 
           to_date('05-sep-12','dd-mon-yy'), 
           to_date('08-sep-12','dd-mon-yy') from dual
),
t_holidays as (
    select to_date('01-jan-12','dd-mon-yy') as holiday
      from dual
),
t_data_rn as (
    select rownum as rn, t_data.* from t_data
),
t_model as (
    select distinct id,
           start_date
    from t_data_rn
      model
         partition by (rn, id)
         dimension by (0 as i)
         measures(start_date, end_date)
         rules
         (  start_date[for i 
                      from 1 
                        to end_date[0]-start_date[0]
                 increment 1] = start_date[0] + cv(i),
            end_date[any] = start_date[cv()] + 1
         )
      order by 1,2
),
t_network_days as (
    select t_model.*,
           case when
               mod(to_char(start_date, 'j'), 7) + 1 in (6, 7)
               or t_holidays.holiday is not null               
               then 0 else 1
           end as working_day
      from t_model
      left outer join t_holidays
        on t_holidays.holiday = t_model.start_date
)
select id, 
       sum(working_day) as network_days
  from t_network_days
 group by id; 
```

*   `t_data`- 您的初始数据
*   `t_holidays`- 包含假期列表
*   `t_data_rn`- 只需将唯一键（`rownum`）添加到每一行`t_data`
*   `t_model`- 将`t_data`日期范围扩展为一个平面的日期列表
*   `t_network_days`- 根据星期几（周六和周日）和假期列表将每个日期标记`t_model`为工作日或周末
*   最终查询 - 计算每组的网络天数。

# c# - 在“公共事件EventHandler”中翻译委托{} MyEvent = 委托 { }" 到 vb.net

> ID：12315581
> 
> 赞同：0
> 
> 时间：2012-09-07T09:40:01.953
> 
> 标签：c#, vb.net, events, memory-leaks, c#-to-vb.net

我对这篇文章有疑问：http: [//davybrion.com/blog/2009/09/event-subscrition-and-memory-leaks-yet-again/](http://davybrion.com/blog/2009/09/event-subscribtion-and-memory-leaks-yet-again/)

我在 vb.net 中有事件的内存泄漏。我用内存分析器查看我的应用程序，它说我的问题是事件:-(

现在我找到了这篇文章，我想试试。但我不知道`delegate{}`in 是什么`public event EventHandler<EventArgs> MyEvent = delegate { };`意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:49:05.210

It's just an empty event handler, that exists (therefore doesn't need to be checked for `null`) but does nothing. The following code snippets are basically the same:

```
// An anonymous delegate (your example):
public event EventHandler<EventArgs> MyEvent = delegate { };

// The same function using Lambda:
public event EventHandler<EventArgs> MyEvent = (sender, e) => { };

// A similar function using a named method:
public event EventHandler<EventArgs> MyEvent = Handler;
private static void Handler(object sender, EventArgs eventArgs) { } 
```

**Translated to VB.Net:**

```
Public Class SomeClass
    Public Event MyEvent(ByVal sender As Object, ByVal e As EventArgs)

    // The following sub is the empty delegate
    Private Sub Handler(ByVal sender As Object, ByVal e As EventArgs) _
                        Handles Me.MyEvent
        // empty
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:47:02.193

这只是避免对事件进行空值检查的一种偷偷摸摸的方式；基本上，它使用匿名方法作为初始值，但该方法*不做任何事情*。作为一个实现细节，这个空的委托实例实际上被缓存在一个静态字段中，因此它不会对每个实例产生巨大的影响。

如果您不想担心`{}`，那么只需将其关闭：

```
public event EventHandler MyEvent; 
```

并做空检查！

# php - 如何计算PHP中两个日期之间的工作日数？

> ID：12315583
> 
> 赞同：0
> 
> 时间：2012-09-07T09:40:07.203
> 
> 标签：php, mysql

我有这样的情况。我有一个字符串存储在数据库中，如下所示：

```
$string: 1,1,1,1,1,1,0 
```

这意味着：周日为 0（节假日），其他所有日子（周一...周六）均为 1。

然后我有两个日期：今天（例如：2012-09-07）和一些结束日期（2012-10-04）。

我想知道我应该怎么做才能得到今天和这个结束日期（在我的例子中是 23 天）之间的总工作日数（扣除假期）？我们应该使用存储在数据库中的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:50:26.503

```
$workdays = explode(",", "1,1,1,1,1,1,0"); // turn string to array (Monday to Sunday)
$days = 0;
$time = strtotime("2012-09-07");
$end_time = strtotime("2012-10-04");
while ($time < $end_time)
    {
        $day_of_week = date("N", $time) - 1; // 0 = Monday, 6 = Sunday
        if ($workdays[$day_of_week] == 1)
            {
                $days++;
            }
        $time = strtotime("+1 day", $time); // add one day to time
    } 
```

This should work for you. You may need to modify it based on whether it's inclusive, when it should start, etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:43:56.627

你试过 date_diff() 吗？ [http://php.net/manual/en/function.date-diff.php](http://php.net/manual/en/function.date-diff.php)

# wordpress - wordpress：无法显示来自另一个帖子的单个帖子的评论

> ID：12315586
> 
> 赞同：0
> 
> 时间：2012-09-07T09:40:19.753
> 
> 标签：wordpress, comments

我有一个独特的情况，我需要为 3 个不同的帖子显示相同的评论。这 3 个不同的帖子显然在 DB 中链接在一起。所以我需要做的是强制所有语言使用 1 个帖子 ID 来提交评论并检索它......而不是使用 3 个差异 ID，我需要使用 1 并坚持下去。

我有 $current_post_duplicate_id ，所有 3 个翻译的帖子都是 9。

如果我对最初为 post_ID 9 的原始帖子提交评论一切正常，我会看到评论并提交。但是当我切换到翻译版本时，什么都没有显示，但是我强制 get_comments 使用 id 9 来通过 $current_post_duplicate_id 显示和提交评论，那么发生了什么？为什么这不起作用？

我不知道发生了什么，我想这里的一些大师可以给我一个提示。

```
<?php
//Uniting comments in all languages by setting default language for comments en in this case
$current_post_duplicate_id = icl_object_id (get_queried_object_id(), 'tribe_events', false, 'en');
?>

                            <div id="eventattend">

                                  <?php if ('open' == $post->comment_status) : ?> 
                                    <span><?php _e('Are you intersted?'); ?></span>

                                    <?php if ( $user_ID ) : ?>

<?php
  $usercomment = get_comments( array( 'user_id' => $current_user->ID, 'post_id' => $current_post_duplicate_id ) );
  if ( 1 <= count( $usercomment ) ) {
?>
                                              <form method="post" action="">
                                                  <a class="eventno" href="javascript:;" onclick="parentNode.submit();"><?php _e('No'); ?></a>
                                                  <input type="hidden" name="delmycom" value="1" />

                                                  <?php
                                                    //
                                                    $delete_my_event_interest = $_POST['delmycom'];
                                                      //
                                                      if ( isset ($delete_my_event_interest) ) {

                                                            $current_user_comment = get_comments( array(
                                                              'post_id' => $current_post_duplicate_id,
                                                              'user_id' => get_current_user_id(),
                                                              'number' => 1,
                                                              'status' => 'approve',
                                                              'type' => 'comment'
                                                            ) );

                                                        wp_delete_comment( $current_user_comment[0]->comment_ID );
                                                      }
                                                      //
                                                  ?>
                                              </form>
<?php } else { ?>
                                              <form action="<?php echo get_option('siteurl'); ?>/wp-comments-post.php" method="post">
                                                  <?php comment_id_fields(); ?>
                                                  <?php do_action('comment_form', $current_post_duplicate_id); ?>
                                                  <input type="hidden" name="comment" value="I'm attending this Event!" />
                                                  <a class="eventyes" href="javascript:;" onclick="parentNode.submit();"><?php _e('Yes'); ?></a>
                                              </form>
<?php } ?>

                                    <?php else : ?>
                                      <a class="eventyes loginosx" href="#"><?php _e('Yes'); ?></a>
                                      <?php _e('*You need to be loged in to say YES.'); ?>
                                    <?php endif; ?>

                                  <?php endif; // if you delete this the sky will fall on your head ?>

                                  <div class="clearfloat"></div><!-- Very Important -->
                            <!-- End #eventattend --></div>

                    <!-- End #eventsingle --></div>

                    <ul class="sidebarlists" id="interestedlist">
                        <li>
                        <h2><?php _e('Who\'s interested so far?'); ?> (<?php comments_number( '0', '1', '%' ); ?>)</h2>
                        <ul>

                                  <?php

                                    $recent_comments = get_comments( array(
                                      'post_id' => $current_post_duplicate_id,
                                      'number' => 25,
                                      'status' => 'approve',
                                      'type' => 'comment',
                                      'order' => 'ASC'
                                    ) );

                                    foreach ($recent_comments as $comment) {
                                  ?>
                                      <li id="attendee-<?php echo $comment->comment_ID; ?>">
                                          <a href="#"><?php echo get_avatar( $comment->comment_author_email, $size = '50', $alt = $comment->comment_author.' is attending this event' ); ?></a>
                                          <span><?php echo $comment->comment_author; ?></span>
                                      </li>
                                  <?php
                                    }
                                  ?>

                        </ul>
                        </li>
                    <!-- End #sidebarlists --></ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T07:53:35.323

用这个

```
<?php $comments = get_comments(array('post_id' => 1)); ?> 
```

您还可以传递以下参数

```
<?php $defaults = array(
    'author_email' => '',
    'ID' => '',
    'karma' => '',
    'number' => '',
    'offset' => '',
    'orderby' => '',
    'order' => 'DESC',
    'parent' => '',
    'post_id' => 0,
    'post_author' => '',
    'post_name' => '',
    'post_parent' => '',
    'post_status' => '',
    'post_type' => '',
    'status' => '',
    'type' => '',
    'user_id' => '',
    'search' => '',
    'count' => false,
    'meta_key' => '',
    'meta_value' => '',
    'meta_query' => '',
); ?> 
```

# go - 当几个 go 例程写入通道时，我是否必须锁定

> ID：12315587
> 
> 赞同：0
> 
> 时间：2012-09-07T09:40:29.317
> 
> 标签：go, channel

如果两个 go 例程写入同一个通道，我是否必须锁定，或者这是否由 go 自动处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:51:01.053

通道是安全的，它是内置的。

# desktop - 检测触摸屏桌面

> ID：12315588
> 
> 赞同：1
> 
> 时间：2012-09-07T09:40:30.673
> 
> 标签：desktop, detection, touchscreen

我的最终愿望是允许使用触摸屏桌面（没有鼠标或键盘的一体机）的用户在使用工具提示的网站上导航。使用鼠标，将鼠标悬停在工具提示上会打开它，工具提示包含可以单击的链接。使用触摸屏，没有悬停，只有“触摸”/点击。在这两种情况下，页面都将使用相同的浏览器显示在相同的操作系统上，一旦用户使用鼠标，另一次用户使用触摸屏。

所以我需要区分这两者：带鼠标的台式电脑和不带鼠标的触摸屏台式电脑。Modernizr 触摸测试 (http://modernizr.github.com/Modernizr/touch.html) 在触摸屏桌面 (http://shop.lenovo.com/us/landing_pages/thinkcentre/2010/m90z) 上完全失败。嗅探 UA 或浏览器也不起作用。

（经过大量搜索，所有检测都试图区分不同版本的手机或平板电脑、浏览器、UA……而不是使用相同浏览器在相同操作系统上运行的桌面触摸屏。）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-22T15:55:06.670

将事件侦听`touchstart`器添加`mousemove`到您的页面，然后等待用户开始与您的页面进行交互。如果第一个事件是`mousemove`，那么用户使用鼠标进行操作，所以它可能是一个桌面，否则这是一个触摸屏。

```
$(document).on('touchstart.desktopDetect mousemove.desktopDetect', function(ev) {
    window.IS_TOUCHSCREEN_DEVICE = (ev.type == 'touchstart');
    $(document).off('.desktopDetect');
}); 
```

在此处检查工作示例： [https ://jsfiddle.net/evpozdniakov/uvb51cnm/embedded/result/](https://jsfiddle.net/evpozdniakov/uvb51cnm/embedded/result/)

# java - 使用 System 属性更改 spring bean 别名

> ID：12315589
> 
> 赞同：2
> 
> 时间：2012-09-07T09:40:35.770
> 
> 标签：java, spring, inversion-of-control

我试图弄清楚是否可以通过系统属性更改弹簧别名配置。

就是这样的配置：

```
<beans>
    <bean id="beanOne" ... />
    <bean id="beanTwo" ... />
    <bean id="beanThree" ... />
    <alias name="beanOne" alias="beanToUse" />

    <bean id="consumer" ...>
        <constructor-arg ref="beanToUse" />
    </bean>
</beans> 
```

我希望能够使用 JVM 属性，例如 with`-Duse=beanThree`为别名选择另一个 bean。

不幸的是，使用直接的解决方案`<alias name="#{systemProperties.use}" alias="beanToUse" />`会引发`NoSuchBeanDefinitionException`异常:(

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:57:20.637

您是否尝试使用 spring 3.1 配置文件？

```
<beans>
    <bean id="beanOne" ... />
    <bean id="beanTwo" ... />
    <bean id="beanThree" ... />
    <beans profile="A">
      <alias name="beanOne" alias="beanToUse" />
    </beans>

    <beans profile="B">
      <alias name="beanTwo" alias="beanToUse" />
    </beans>

    <bean id="consumer" ...>
        <constructor-arg ref="beanToUse" />
    </bean>
</beans> 
```

并通过系统属性进行选择`-Dspring.profiles.active=A`。我没有在配置文件中尝试过别名，但您可以`beanToUse`在每个配置文件中使用替代定义：

```
<beans>
    <beans profile="A">
      <bean id="beanToUse" ... defined as beanOne ... />
    </beans>

    <beans profile="B">
      <bean id="beanToUse" ... defined as beanTwo .../>
    </beans>

    <bean id="consumer" ...>
        <constructor-arg ref="beanToUse" />
    </bean>
</beans> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T07:51:16.860

这是使用 SpEL 执行此操作的另一种方法。我有两个 DataStrategy 类型的实现，bean ids testDataStrategy 和 realDataStrategy

我可以通过在我的 Java 项目的属性文件中设置属性“data.strategy”来在 bean 之间进行选择。

```
<bean id="myBeanId" class="com.some.path.MyBeanClass" >
    <property name="dataStrategy" value="#   {'${data.strategy}'.equalsIgnoreCase('TEST_DATA') ? testDataStrategy : realDataStrategy}" />
</bean> 
```

# c# - asp.net mvc运行时执行视图

> ID：12315593
> 
> 赞同：0
> 
> 时间：2012-09-07T09:40:54.363
> 
> 标签：c#, asp.net-mvc-3, razor

我正在构建一个解决方案，用户可以在其中选择用户控件的位置，并且此布局将保存在数据库中。说布局是

```
<div>
    <div> 
        {Html.RenderPartial("profileabout");}  
    </div>
    <div>
        {Html.RenderPartial("bloglist");}  
    </div>
</div> 
```

更新：我将 {Html.RenderPartial("bloglist");} 保存在数据库中。

现在，我想从数据库中获取这个布局并执行。所以所有的局部视图都需要被执行。我怎样才能做到这一点？

# objective-c - 如何用openGL处理 cocos2d中的mutil掩码

> ID：12315595
> 
> 赞同：0
> 
> 时间：2012-09-07T09:40:54.463
> 
> 标签：objective-c, opengl, cocos2d-iphone

我想突出显示一个带有矩形遮罩深色背景图像的区域。蒙版纹理是：

![](../Images/afb78458aeab5daebc85d7f365be0caf.png)

渲染结果是：

![](../Images/9cfe1571caa0c8bc88123add90f7cd66.png)

但这不是我想要的。我需要它是这样的（ps照片）：

![](../Images/be60551c680dfcc63d38d404d12ade8d.png)

背景纹理是全屏尺寸的深色照片。

![](../Images/967e863b52bd74d45c6642b75e521c60.png)

蒙版纹理为 40 像素大小。所以，我想在渲染时移动它以获得不同的形状。主要代码：

```
CCSprite *textureSprite=[CCSprite spriteWithFile:@"bg_blank_alpha.png"];
CCSprite *maskSprite=[CCSprite spriteWithFile:@"bg_box_futher.png"];
CCRenderTexture * rt = [CCRenderTexture renderTextureWithWidth:textureSprite.contentSizeInPixels.width height:textureSprite.contentSizeInPixels.height];
textureSprite.position = ccp(textureSprite.contentSize.width/2, textureSprite.contentSize.height/2);
[maskSprite setBlendFunc:(ccBlendFunc){GL_SRC_COLOR, GL_ZERO}];
[textureSprite setBlendFunc:(ccBlendFunc){GL_ONE_MINUS_DST_ALPHA, GL_ZERO}];
[rt begin];
maskSprite.position=ccp(160, 240);
[maskSprite visit]; 
maskSprite.position=ccp(200, 240);
[maskSprite visit];       
[textureSprite visit];    
[rt end];

CCSprite *retval = [CCSprite spriteWithTexture:rt.sprite.texture];
retval.flipY = YES;
[self addChild:retval];
retval.position=ccp(160,240); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:18:45.293

我不了解您的所有限制，但这也许会有所帮助。

据我了解，问题出在模糊区域重叠的地方。因此，您应该避免模糊区域重叠。如果只想渲染精灵，那么您可以将单个精灵分成不同的部分：

```
+-+----+-+ 
|a|  b |c|
+-+----+-+
| |    | |
|d|  e |f|
| |    | |
| |    | |
+-+----+-+ 
|g|  h |i|
+-+----+-+ 
```

然后仅在必要时渲染每个部分。

```
+-+----+----+-+ 
|a|  b |  b |c|
+-+----+----+-+
| |    |    | |
|d|  e |  e |f|
| |    |    | |
| |    |    | |
+-+----+----+-+ 
|g|  h |  h |i|
+-+----+----+-+ 
```

希望这有意义并有所帮助。

# symfony - 在 symfony2 中进行 phpunit DB 测试的最佳位置

> ID：12315600
> 
> 赞同：1
> 
> 时间：2012-09-07T09:41:10.463
> 
> 标签：symfony, doctrine-orm, phpunit, symfony-2.1

我在 Symfony2 项目中的所有学说实体中进行了一些单元测试。我在 UserTest 类中测试 setter/getter，还在 UserDbTest 类中测试具有 db 持久性的 setter/getter，所有文件都在`Entity`测试文件夹下的文件夹中，测试两者是否是一个好主意，以及放置的最佳位置是什么？数据库类？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T11:01:39.463

如果您的`Entity`类中没有自定义数据库逻辑（您不应该有），则不必创建单元和功能测试。教义经过测试，即确保`persist`/`flush`正常工作，您不必重复这些测试。

但是，如果您想测试，例如，如果您的查询正常工作，我个人有一个`XYManager`类（`XY`实体的名称在哪里），我将所有自定义数据库逻辑（以及进一步的抽象）放入其中。我的方法受到 FOSUserBundle 的启发（参见他们的[UserManager](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/UserManager.php)）。

在我的项目中，the`Entity`和`EntityManger`classes 都在`Entity`bundle 的文件夹中，并且这些类的测试在`Tests/Entity`文件夹中。由于功能测试比单元测试花费更长的时间，我使用`@group`PHPUnit 的注释将它们分开。我将添加`@group unit`到所有不需要数据库且不属于的测试`WebTestCase`以及`@group functional`所有需要数据库或属于`WebTestCase`.

如果我只想执行我可以做的单元测试

```
phpunit -c app/ --group unit` 
```

和

```
phpunit -c app/ --group functional 
```

只会执行功能测试。

```
phpunit -c app/ 
```

将执行功能测试和单元测试。

# php - 如何正确地将每个字段读入数组？

> ID：12315605
> 
> 赞同：0
> 
> 时间：2012-09-07T09:41:29.063
> 
> 标签：php

我在 csv 文件中有这个结构

```
"http://example.com/example.jpg","example","example2","example3","1234,56" 
```

现在我将此行分配给变量 $line 和

```
$fields = explode('","',$line); 
```

它停在“http”。与

```
$fields = csv2array(str_replace(':','\\:',$line),$delimiter=',',$enclosure='"',$escape='\\'); 
```

在哪里

```
function csv2array($input,$delimiter=',',$enclosure='"',$escape='\\'){ 
     $fields=explode($enclosure.$delimiter.$enclosure,substr($input,1,-1)); 
     foreach ($fields as $key=>$value) 
         $fields[$key]=str_replace($escape.$enclosure,$enclosure,$value); 
     return($fields); 
 } 
```

如何将每个字段读入数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:57:29.807

我建议使用 fgetcsv() 读取文件，它会完全按照您的需要返回一个值数组。

# javascript - 我的用户脚本何时可以/不能触发 Javascript 中的右键单击（上下文菜单）？

> ID：12315607
> 
> 赞同：1
> 
> 时间：2012-09-07T09:41:33.447
> 
> 标签：javascript, dom-events, contextmenu, greasemonkey

我发现了很多问题，比如[这个](https://stackoverflow.com/questions/1579589/how-to-generate-a-right-click-event-in-all-browsers/)、[这个](https://stackoverflow.com/questions/7914684/trigger-right-click-using-pure-javascript)和[这个](https://stackoverflow.com/questions/6250447/trigger-right-click)，旨在展示如何“模拟右键单击”或“触发上下文菜单”等。然后我找到[了这个](https://stackoverflow.com/questions/1241478/how-do-i-trigger-the-browser-context-menu-on-an-element-as-if-the-user-right-c)，简单地说做不到。我认为前 3 个问题都触发了*自定义*上下文菜单，即附加的用于替换内置菜单的菜单。我只想模拟用户右键单击我选择的特定元素。

我已经尝试了第一个问题中的所有建议 -`createEvent("MouseEvents" / "HTMLEvents")`和`initEvent / initMouseEvent("click" / "contextmenu")`、 jQuery[`trigger`](http://api.jquery.com/trigger/)等的不同组合。没有任何东西可以显示默认上下文菜单。

真的不可能吗？我从用户脚本（在 Greasemonkey 中）运行“特权”这一事实有什么不同吗？我可以通过一个全权重的 Firefox 扩展来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:24:53.567

没错，您链接的前三个答案用于自定义菜单/控件。

第四个答案是正确的；你不能激活浏览器的上下文菜单——出于同样的原因，你不能激活浏览器的普通菜单……这将是一个坏人会利用的巨大安全漏洞。

同样，Greasemonkey 脚本也不能这样做。Greasemonkey 脚本有*一些*提升的权限（仅当在沙盒模式下运行时，从 GM 1.0 开始），但 Greasemonkey 的开发人员没有选择提供上下文菜单。（我也没有听说过迫切需要这种功能。）

我很确定一个成熟的附加组件*可以*激活上下文菜单（或菜单项），但我从未尝试过，目前无法提供代码。

# ruby-on-rails - Rails：优化控制器动作（安全检查）

> ID：12315610
> 
> 赞同：1
> 
> 时间：2012-09-07T09:41:40.633
> 
> 标签：ruby-on-rails, ruby, security, model-view-controller

我在控制器中有一个动作，如下所示：

```
 def show
    @project = current_customer.projects.where(id: params[:project_id]).first
    if @project
      @feature = @project.features.where(id: params[:feature_id]).first
      if @feature
        @conversation = @feature.conversations.where(id: params[:id]).first
        unless @conversation
          head 401
        end
      else
        head 401
      end
    else
      head 401
    end
  end 
```

问题是重复`head 401`。有没有更好的方法来编写这个动作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:47:48.717

我会这样写

```
def show
  @project = current_customer.projects.where(id: params[:project_id]).first
  @feature = @project.features.where(id: params[:feature_id]).first if @project
  @conversation = @feature.conversations.where(id: params[:id]).first if @feature

  # error managment
  head 401 unless @conversation      
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:57:00.620

也许你可以用这样的东西重构你的项目模型

```
Model Project
  ...
def get_conversation
  feature = features.where(id: params[:feature_id]).first
  conversation = feature.conversations.where(id: params[:id]).first if feature
end 
```

在你的控制器中

```
Controller ProjectController
def show
  @project = current_customer.projects.where(id: params[:project_id]).first
  @conversation = @project.get_conversation

  head 401 unless @conversation
end 
```

# winforms - 如何更改 BarButtonItem 的背景颜色？

> ID：12315611
> 
> 赞同：2
> 
> 时间：2012-09-07T09:41:43.137
> 
> 标签：winforms, c#-4.0, devexpress, toolbar

我目前正在使用 DevExpress 控件在 C# windows 应用程序中工作。现在我想在加载表单时更改条形按钮项的颜色。我试过以下代码：

```
barButton.Appearance.BackColor = Color.Red; 
```

但是条形按钮的背景颜色没有变为红色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:49:02.143

默认情况下，栏使用[皮肤](http://documentation.devexpress.com/#WindowsForms/CustomDocument2534)来绘制其内容。在这种情况下，所有背景颜色都由特定的皮肤元素提供，无法更改。更改特定项目背景颜色的唯一方法是禁用皮肤：将`BarAndDockingController`组件放在表单上，​​并将其分配给`BarManager.Controller`属性。设置`BarAndDockingController.PaintStyleName`或设置`LookAndFeel`为任何非皮肤样式（例如“Flat”）。然后使用该`Bar.Appearance.BackColor`属性设置所需的颜色。

或者，您可以创建自己的自定义 barItem，方法类似于[如何更改突出显示的链接](http://www.devexpress.com/Support/Center/p/A488.aspx)KB 文章的背景颜色。

# vim - 在命令模式下向前/向后移动一个字？

> ID：12315612
> 
> 赞同：4
> 
> 时间：2012-09-07T09:41:48.563
> 
> 标签：vim, vi

假设我正在使用 vim 命令模式复制一个文件，而我的光标位于行尾。

```
:!cp path/to/original/file path/to/new/file 
```

有没有一种方法可以像在 shell 中那样通过键入来跳回一个单词`Esc b`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:52:34.930

您不能使用“Esc b”，因为显然这会丢弃您输入的命令。但是，您可以绑定一些键来移动。

这里已经回答了这个问题：[Navigating in Vim's Command Mode](https://stackoverflow.com/questions/6920943/navigating-in-vims-command-mode)

简单的方法就是添加：

```
cnoremap <C-a> <Home>
cnoremap <C-e> <End>
cnoremap <C-p> <Up>
cnoremap <C-n> <Down>
cnoremap <C-b> <Left>
cnoremap <C-f> <Right>
cnoremap <M-b> <S-Left>
cnoremap <M-f> <S-Right> 
```

在你的 .vimrc

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:29:21.360

一个不错的 vim 功能是`ctrl-f`. 从命令行模式键入（或选项`^f`中指定的任何键，默认为）与从正常模式键入具有相同的效果；它将您的整个命令历史记录拉到一个窗口中，并让您将其作为缓冲区进行编辑。尝试了解更多详情。`cedit``ctrl-f``q:``:help cmdwin`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T20:28:30.683

对于输入和编辑复杂的命令，您可能喜欢直接在使用普通模式命令访问的命令行窗口中工作`q:`。见`:h 20.5`和`:h q:`。或者，如果您已经处于命令模式，则可以使用`C-f`.

*   例如，在正常模式下键入`q:`以进入命令行窗口。（或`C-f`从命令行模式键入。
*   您可以使用标准动作移动先前的命令，并且可以像往常一样进行编辑。
*   当您想要执行您刚刚编辑的命令时，请`enter`在此命令行窗口中的正常模式下按。您的光标所在的行将作为命令在
    您打开命令行窗口之前所在的窗口中执行。

要考虑的另一个选项是从另一个缓冲区编辑/提取命令。您可以通过拉出所需的文本并通过键入将其粘贴到命令模式来做到这一点，您拉到的寄存器`C-R n`在哪里。`n`

顺便说一句：我喜欢@rks 提供的映射。但如果您没有这些映射，则可以使用开箱即用的命令。向上看`:h c_<S-Left>`和。`:h c_<S-Right>``:h 20.1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T16:41:20.623

在 vim 的命令模式下，我只使用 ctrl-left 和 ctrl-right 箭头。同样适用于 bash - 我不知道那里的 esc-b 方法。

在我的 Ubuntu 和 Debian 系统上不需要编辑 .vimrc 文件，但在其他系统上不需要编辑 YMMV。它可能基于为操作系统打包的标准配置

# iphone - iPhone 查找 AppDelegate

> ID：12315614
> 
> 赞同：0
> 
> 时间：2012-09-07T09:41:52.263
> 
> 标签：iphone, appdelegate

我正在尝试创建 MAC 应用程序。我的输入是 --> 现有 iPhone 应用程序的源代码文件夹。

使用我的应用程序，我想在现有应用程序中插入一个额外的屏幕。额外的屏幕将始终是第一个屏幕。

因为我想自动化这个，我编写了一个 MAC 应用程序，它浏览源代码文件夹并用我的额外屏幕替换应用程序的第一个屏幕。这非常适合单视图应用程序，我从 main.m 文件（通过解析 UIApplicationMain(argc,argv,MyAppDelegate,nil) ）行中获取 AppDelegate 类名。

当某些应用程序中的第三个参数为“nil”时，应用程序会失败（这可能取决于实施者或项目的类型）。

是否有可能使我的应用程序适用于所有类型的应用程序？

问候，

尼拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:54:12.237

看起来您只需（递归地）搜索所有`.h`文件的文件夹，然后检测实现`UIApplicationDelegate`. *通常*不应该有多个，并且可以使用我猜的默认模板。

# ruby-on-rails - 根 url 的完整路径 - Rails

> ID：12315620
> 
> 赞同：0
> 
> 时间：2012-09-07T09:42:10.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, ruby-on-rails-3.2

我已将 root 定义为指向“pages#home”

在网址中它只显示“/”。这对大多数用途来说都很好。但出于分析原因，我需要有“/pages/home”

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:42:52.770

当您在路由文件中映射根时，它会将该操作映射到“/”网址。这应该做你想要的：

**编辑，试试这个**

```
match "/" => redirect("/pages/home") 
```

不幸的是，您不能在那里使用路径方法。

**其他解决方案**

在您的页面控制器中：

```
def root
  redirect_to home_pages_url
end 
```

在您的路线文件中：

```
root :to => "pages#root" 
```

基本上只是创建一个简单的重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:48:47.823

Just put a link like this `<%= link_to 'Page home', home_pages_path %>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T12:56:15.683

In`routes.rb`把它放在最后：

```
root to: redirect('/pages/home') 
```

# java - 如何使用apache poi打破excel单元格中的文本

> ID：12315623
> 
> 赞同：2
> 
> 时间：2012-09-07T09:42:13.840
> 
> 标签：java, apache-poi

我有两个字符串，我需要在一个 Excel 单元格中分两行显示这两个字符串。有没有办法使用 Apache poi 将文本分成两行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:40:38.040

*注意：*与评论中的答案相同，因此可以接受。

使用`str1 + "\n" + str2`.

# c# - 具有左右突出显示的图表

> ID：12315624
> 
> 赞同：1
> 
> 时间：2012-09-07T09:42:15.147
> 
> 标签：c#, charts, limits

我想在 C# 中制作带有限制突出显示的图表，如下面的屏幕所示

![在此处输入图像描述](../Images/59990ec792af2039ac4234c78d1c05b2.png)

有人知道一些图书馆可以制作这样的东西吗？

# javascript - javascript代码在循环后不执行

> ID：12315628
> 
> 赞同：0
> 
> 时间：2012-09-07T09:42:29.297
> 
> 标签：javascript, jquery

我有以下代码（来自更大函数的片段）：

```
var res = data.results;
for (var i=0;i<res.length;i++) {
    $('<option value="' + res[i] + '">' + res[i] + '</option>').appendTo(sel);
}
if (data.select && data.select!='') { sel.val(data.select); } 
```

出于某种原因，

```
if (data.select && data.select!='') { sel.val(data.select); } 
```

行只是没有执行，并且在 Firebug 中显示为灰色，表明 Firebug 不知何故知道它无法访问。如果我像这样对代码进行简单的更改：

```
var res = data.results;
for (var i=0;i<res.length;i++) {
    var opt = '<option value="' + res[i] + '">' + res[i] + '</option>';
    $(opt).appendTo(sel);
}
if (data.select && data.select!='') { sel.val(data.select); } 
```

最后一行运行没有问题。

我在这里找到了类似的帖子，其中 for 循环的 while 参数有一个 <= 导致错误，虽然这里不是这种情况，但当我单步执行代码时，它试图执行循环的次数比它应该执行的多一次，即如果 res.length 为 4，它允许 i 递增到 4，然后尝试执行循环中的代码，因此结束代码，因为 res[i] 超出范围，即使它没有放置控制台中的错误。如果我按照演示更改代码，则当 i == res.length 时循环不会运行

那么，Firebug 是如何知道原始代码不允许在循环结束后执行的，为什么循环执行的次数比它应该执行的多一次呢？

整个函数如下，它是来自 jQuery ajax 调用的成功回调，该调用使用从服务器接收到的值填充选择：

```
function GetDeptsOK(data, textStatus, jqXHR) {
    var sel = $('#orgpicker').find('select[name="orgpicker-dept"]');
    if (sel.length == 0) {
        var cell = $('#orgpicker-deptcell');
        cell.text('');
        $('<select name="orgpicker-dept"></select>').appendTo(cell);
        sel = $('#orgpicker').find('select[name="orgpicker-dept"]');
    } else {
        sel.find('option').remove();
    }
    $('<option value=""></option>').appendTo(sel);
    var res = data.results;
    for (var i=0;i<res.length;i++) {
        $('<option value="' + res[i] + '">' + res[i] + '</option>').appendTo(sel);
    }
    if (data.select && data.select!='') { sel.val(data.select); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:57:03.553

将其替换为

```
var res = data.results;
for (var i=0;i<res.length;i++) {
    if(!res[i])
       break;
    var opt = '<option value="' + res[i] + '">' + res[i] + '</option>';
    $(opt).appendTo(sel);
}
if (data.select && data.select!='') { sel.val(data.select); } 
```

# visual-studio-2010 - 为什么 Visual Studio 会自动重新启用“客户端应用程序服务”？

> ID：12315631
> 
> 赞同：5
> 
> 时间：2012-09-07T09:42:46.157
> 
> 标签：visual-studio-2010, visual-studio

我有一个由多个类库项目和一个 Windows 服务项目组成的解决方案。当我打开 Windows 服务项目的项目设置并（不小心）单击“服务”选项卡时，Visual Studio 坚持自动勾选“启用客户端应用程序服务”复选框。

这样做的效果是它会添加对 System.Web.Extensions 的引用，并且还会在 app.config 中插入一些部分。再次禁用该复选框不会删除该引用。然而，它会删除生成的配置，尽管它也会删除一些之前存在的不相关配置。

为什么它坚持要勾选这个复选框，我可以让它不做吗？“设置”选项卡的帮助文档未提及任何“自动选择”行为。

这是面向 .Net 3.5 的 Visual Studio 2010。

至少还有一个人有同样的问题，遗憾的是没有提供任何解决方案：http: [//go4answers.webhost4life.com/Example/visual-studio-2010-keeps-enabling-7689.aspx](http://go4answers.webhost4life.com/Example/visual-studio-2010-keeps-enabling-7689.aspx)

这反过来又链接到 Microsoft Connect 问题，但由于某种原因，他们似乎不允许访问旧报告：[https ://connect.microsoft.com/VisualStudio/feedback/details/570166](https://connect.microsoft.com/VisualStudio/feedback/details/570166)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-21T09:26:11.720

当 app.config 中有 AppSettings 项时，打开项目属性页时会自动勾选“启用客户端应用程序服务”设置。重现步骤：

1.  使用 VSTS 2012
2.  创建一个空的控制台应用程序
3.  将 AppSettings 部分添加到 app.config
4.  打开项目属性页面并单击“服务”选项卡

您将看到“启用客户端应用程序服务”被选中并且 app.config 已更新。

**我们团队成员的一种解决方法：**

只是将 app.config 重命名为其最终部署的文件名，例如 ConsoleApplication.exe.config 并将其文件属性 - “复制到 OutputDirectory” 更改为“如果较新则复制”。

它适用于我们的项目。

# apache-flex - flex 4.6 使用 CDATA 解析 htmlText 对象，仅显示最后一个对象

> ID：12315632
> 
> 赞同：0
> 
> 时间：2012-09-07T09:42:54.213
> 
> 标签：apache-flex, dynamic-data, cdata, httpservice, htmltext

我正在尝试使用字符串更新多个`<mx:text>`对象。`htmlText`我遇到的问题是只有最后一个`<mx:text>`对象在数据更改时变得可见。

我错过了`<mx:text>`标签上的一些基本内容吗？

使用弹性 4.6

谢谢艺术

test1.html

```
<rtnA><![CDATA[ <font color="#0000ff" face="helvetica" size="15" >This is rtnA</font> ]]></rtnA>  
<rtnB>this is rtnB</rtnB>
<rtnC>this is rtnC</rtnC>
<rtnD><![CDATA[ <font color="#aa00aa" face="Arial" size="15" >This is </font><font color="#0000ff" face="helvetica" size="15" >rtnD</font> ]]></rtnD> 
```

测试1.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<s:layout>
    <s:BasicLayout/>
</s:layout>
<fx:Declarations>
    <s:HTTPService id="sendMe" url="http://myUrl.com/test1.html"
                   useProxy="false" method="POST"  resultFormat="object"  >
    </s:HTTPService>
</fx:Declarations>
<fx:Script>
    <![CDATA[

        import mx.core.FlexGlobals;
        import mx.geom.RoundedRectangle;
        import mx.rpc.events.ResultEvent;

        import spark.events.TextOperationEvent; 

        [Bindable]
        public var meta:Object;

        public function send_data(event:MouseEvent, funRtn):void {
            var params:Object = new Object();
            if(funRtn == "A"){
                sendMe.send();
                sendMe.addEventListener("result",getResA);
            }
            if(funRtn == "B"){
                sendMe.send();
                sendMe.addEventListener("result",getResB);
            }
        }

        public function getResA(event:ResultEvent) : void{
            sendMe.removeEventListener("result",getResA);
            status.text="getResA";
            meta = event.result;
            if(meta.hasOwnProperty("rtnA")){
                if(meta.rtnA != null){
                    rtnAtxt.htmlText = meta.rtnA; 
                }   
            }
            if(meta.hasOwnProperty("rtnD")){
                if(meta.rtnD != null){
                    rtnDtxt.htmlText=  meta.rtnD;
                }
            }       
        }

        public function getResB(event:ResultEvent) : void{
            sendMe.removeEventListener("result",getResB);
            status.text="getResB";
            meta = event.result;
            if(meta.hasOwnProperty("rtnB")){
                if(meta.rtnB != null){
                    rtnAtxt.htmlText = meta.rtnB; 
                }   
            }
            if(meta.hasOwnProperty("rtnC")){
                if(meta.rtnC != null){
                    rtnDtxt.htmlText=  meta.rtnC;
                }
            }       
        }

    ]]>
</fx:Script>

<s:SkinnableContainer id="lisc" width="100%" height="100%"  >
    <s:Label id="status">
    </s:Label>

    <mx:Text id="rtnAtxt"  x="20" width="150"  y="20" height="50" >
    </mx:Text>  

    <mx:Text id="rtnDtxt" x="20" width="150" y="20" height="50" >
    </mx:Text>  

    <s:Form id="myForm" x="20"  width="150" y="90"  height="100"> 
        <s:FormItem>
            <s:Button id="myButtonA" width="50" height="20"
                      label="go A" click="send_data(event, 'A')" />
            <s:Button id="myButtonB" width="50" height="20"
                      label="go B" click="send_data(event,'B')" />
        </s:FormItem>
        <s:FormItem>

        </s:FormItem>
    </s:Form>
</s:SkinnableContainer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:10:31.900

我看不出你的标签有什么问题。尝试在为每个侦听器指定的字段中打印出 meta.hasOwnProperty 值，这样您就可以查看结果是否确实是您认为的那样。

# ubuntu - 用于多节点 Hadoop 集群的 Windows 7 和 vmware ubuntu 映像 - IP 地址的配置

> ID：12315633
> 
> 赞同：1
> 
> 时间：2012-09-07T09:42:56.503
> 
> 标签：ubuntu, hadoop, cluster-computing

我是 ubuntu 和 Hadoop 的新手...

我的笔记本电脑装有 Windows 7，它还有一个 Ubuntu VMWare 映像（我使用 VMWare 播放器打开）。我的想法是在同一台笔记本电脑上配置多节点 hadoop 集群。

是否可以有两个 ubuntu 映像，每个映像都充当虚拟机，以便可以模拟集群配置（尽管它不是理想的集群）？如果是这样，这两个虚拟机是否能够通信？我是否必须更改 IP 配置等才能使其工作？

```
VM 1 (ubuntu) - Hadoop master
VM 2 (ubuntu) - Hadoop slave 
```

作为扩展，Windows 7 是否也可以参与集群？

```
Windows 7 - Hadoop master
VM 1 (ubuntu) - Hadoop slave 1
VM 2 (ubuntu) - Hadoop slave 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:42:50.880

是的，他们都应该能够相互交流。虚拟机到虚拟机和虚拟机到主机。

据我所知，虚拟机通过 VMware player 创建的虚拟网络适配器连接到网络。这允许他们像连接到本地网络的任何其他机器一样发送和接收流量。所以你不应该在他们三个之间连接任何问题。

因此 Hadoop IP 配置将是相同的，只需将它们视为本地网络上的机器。

# vba - 如何对 Excel VBA 宏进行条件格式设置？

> ID：12315637
> 
> 赞同：0
> 
> 时间：2012-09-07T09:43:09.093
> 
> 标签：vba, vba

[vba](/questions/tagged/vba "显示标记为“vba”的问题") 我使用下面的代码在 excel 单元格中插入条件格式..

```
range("d" & rowno).Select
Selection.Offset(1, 0).EntireRow.Insert
Selection.FormatConditions.Add Type:=xlExpression, Formula1:="= RC > 7"
Selection.FormatConditions(Selection.FormatConditions.count).SetFirstPriority
With Selection.FormatConditions(1).Interior
    .PatternColorIndex = xlAutomatic
    .Color = 65535 'Yellow
    .TintAndShade = 0
End With 
```

通过比较大于定义的值“7”，上述工作正常......但是如果我传递存储值的变量“lhigh”，并且在公式中传递它，它不起作用。例如; `lhigh=7`

```
range("d" & rowno).Select
Selection.Offset(1, 0).EntireRow.Insert
Selection.FormatConditions.Add Type:=xlExpression, Formula1:="= RC > lhigh"
Selection.FormatConditions(Selection.FormatConditions.count).SetFirstPriority
With Selection.FormatConditions(1).Interior
    .PatternColorIndex = xlAutomatic
    .Color = 65535 'Yellow
    .TintAndShade = 0
End With 
```

请让我知道我们如何计算大于检查我们是否传递变量而不是直接整数值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:30:07.803

如果我将一个单元格命名为“Arc”，另一个命名为“lhigh”，那么以下子项在 Excel 2007 中对我有用

```
Sub test()

Dim foo As Range

Set foo = ActiveWorkbook.Sheets("Sheet1").Range("C3")

With foo.FormatConditions _
        .Add(xlExpression, Formula1:="=Arc>lhigh")

    With .Font
        .Bold = True
        .ColorIndex = 4
    End With
End With

End Sub 
```

这将在单元格 C3 上设置条件格式，当 Arc > lhigh 中的值时将启动。

也许您应该将代码简化为类似这样的基本代码，然后添加额外的复杂性。我猜您的问题出在代码的另一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T10:08:07.920

你需要这个：

```
Formula1:="= RC > " & lhigh 
```

即您需要使用`&`运算符进行字符串连接。

`"= RC > " & lhigh`然后将评估为`"= RC > 7"`。

# macos - 您必须拥有有效的 Mac 应用程序证书才能创建配置文件

> ID：12315640
> 
> 赞同：4
> 
> 时间：2012-09-07T09:43:15.780
> 
> 标签：macos, cocoa

我无法在 Mac Developer Portal 中创建生产证书。错误是：

您必须拥有有效的 Mac 应用程序证书才能创建配置文件。

虽然我已经创建了 Mac 应用程序证书并且它显示为有效。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:08:06.087

这有帮助吗？...删除证书和任何配置文件并创建新的。还要确保您登录了正确的 Apple ID（如果您的 iTunes 商店帐户 ID 不同，请不要同时打开该 ID）

# jsf - 使用带有 JSF 的 jQuery Mobile 弹出窗口

> ID：12315641
> 
> 赞同：1
> 
> 时间：2012-09-07T09:43:16.787
> 
> 标签：jsf, jquery-mobile, popup

考虑以下 JSF（和 jQuery Mobile）标记：

```
<h:form>

            <a href="#login" data-rel="popup">Please login</a>

            <h:outputText id="greeting" value="Welcome, you have logged in" rendered="#{sessionScope.login == null ? false : true}"/>

            <div id="login" data-role="popup">

            <h:inputText value="#{requestScope.userName}"/>
            <h:inputHidden value="#{requestScope.password}"/>
            <h:commandButton value="login" action="#{loginBacking.processLogin}">
                <f:ajax execute="@form" render="greeting"/>
            </h:commandButton>

            </div>

</h:form> 
```

显然，上面的标记不会将用户输入发送到服务器，因为 jQuery Mobile 弹出窗口需要`<h:form/>`在弹出窗口中添加标签。但是，如果我将`<h:form/>`标签放在弹出窗口中，我将无法使用`<f:ajax render="greeting"/>`（因为 id "greeting" 留在了外面）。

如何在**不使用样板 Javascript 代码的情况下**克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:13:47.597

您可以在`<f:ajax render>`. 如果您以 JSF`NamingContainer`分隔符开头，默认为`:`，那么它将相对于`UIViewRoot`. 所以你可以只使用`render=":greeting"`.

顺便说一句，你还有另一个问题。您不能在 JS/Ajax/客户端更新组件，这些组件本身*不会*在 JSF/服务器端呈现，仅仅是因为 HTML DOM 树中没有可以引用和更新的内容。您需要将其包装`<h:outputText id="greeting">`在另一个*始终*呈现的组件中。

所以，总而言之，这应该为你做：

```
<a href="#login" data-rel="popup">Please login</a>

<h:panelGroup id="greeting">
    <h:outputText value="Welcome, you have logged in" rendered="#{login != null}"/>
</h:panelGroup>

<div id="login" data-role="popup">
    <h:form>
        <h:inputText value="#{requestScope.userName}"/>
        <h:inputHidden value="#{requestScope.password}"/>
        <h:commandButton value="login" action="#{loginBacking.processLogin}">
            <f:ajax execute="@form" render=":greeting"/>
        </h:commandButton>
    </h:form>
</div> 
```

*（请注意，我已经简化了`rendered`属性中的 EL 表达式，使用条件运算符返回布尔结果是没有意义的，而表达式本身已经返回布尔结果；顺便说一下，我自己更喜欢`rendered="#{not empty login}"`）*

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier)
*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)

# ruby-on-rails - S3 上的回形针处理器超时

> ID：12315643
> 
> 赞同：1
> 
> 时间：2012-09-07T09:43:34.897
> 
> 标签：ruby-on-rails, ruby, amazon-s3, paperclip

我正在将数字签名插入到处理器内的 pdf 文件中，但不断出现`AWS::S3::ERRORS::Requestimeout`错误。这是什么超时？有什么办法可以在文件上传之前保持连接打开？

> 在超时期限内未读取或写入您与服务器的套接字连接。空闲连接将被关闭。

这是我的代码：

模型：

```
...

has_attached_file :receipt_file,
                    :storage => :s3,
                    :s3_credentials => "#{Rails.root}/config/s3.yml",
                    :path => "/:style/:id/:filename",
                    :s3_protocol => "https",
                    :styles => {dummy:""},
                    processors: [:SignPdf]
 #process_in_background :receipt_file

... 
```

处理器

```
module Paperclip

    class SignPdf < Processor
      attr_accessor :receipt_id,:style
     S3_CONFIG = YAML.load_file("#{::Rails.root}/config/s3.yml")[Rails.env]
     ORIGAMIDIR = "/ruby/1.9.1/gems/origami-1.2.4/lib"

      def initialize(file, options = {}, attachment = nil)
        @file           = file
        @current_format = File.extname(@file.path)
        @basename       = File.basename(@file.path, @current_format)
        @attachment = attachment
      end

        def make

         signPdf(@file) 
         @file
      end

    end
end

begin
  require 'origami'
rescue LoadError
  $: << ORIGAMIDIR
  require 'origami'
end
include Origami
def signPdf(file)

        certFile = "#{::Rails.root}/lib/assets/Cert.pem"
        rsakeyFile = "#{::Rails.root}/lib/assets/pk.pem"
        passphrase = "o2Receipts"

        key4pem=File.read rsakeyFile
        key = OpenSSL::PKey::RSA.new key4pem, passphrase
        cert = OpenSSL::X509::Certificate.new(File.read certFile)

        pdf = PDF.read(file)
        page = pdf.get_page(1)

        # Add signature annotation (so it becomes visibles in pdf document)

        sigannot = Annotation::Widget::Signature.new
        sigannot.Rect = Rectangle[:llx => 89.0, :lly => 386.0, :urx => 190.0, :ury => 353.0]

        page.add_annot(sigannot)

        # Sign the PDF with the specified keys
        pdf.sign(cert, key, 
          :method => 'adbe.pkcs7.sha1',
          :annotation => sigannot, 
          :location => "Portugal", 
          :contact => "email@email.pt", 
          :reason => "Proof of Concept"
        )

        # Save the resulting file
        pdf.save(file.path)
        file
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:07:55.387

我已经通过使用后保存解决了这个问题。[在此处](https://stackoverflow.com/a/12354693/1461972)查看我与此主题相关的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-28T20:17:40.960

截至今天，您要查找的内容不在文档中。您需要创建一个 AWS::S3::Client

我参考：[https ://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/storage/s3.rb#L263](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/storage/s3.rb#L263)

```
 config.paperclip_defaults = {
      storage: :s3,
      s3_credentials: "#{Rails.root}/config/s3.yml",
      s3_region: ENV['AWS_REGION'],
      s3_protocol: :https,
      s3_options: {
        client: Aws::S3::Client.new(
          access_key_id: ENV['S3_KEY'],
          secret_access_key: ENV['S3_SECRET'],
          http_open_timeout: 10,
          http_read_timeout: 5,
          http_idle_timeout: 20
        )
      }
    } 
```

# windows-phone-7 - 有没有办法从 windows phone 设备恢复 XAP

> ID：12315648
> 
> 赞同：0
> 
> 时间：2012-09-07T09:43:44.193
> 
> 标签：windows-phone-7

我一直在开发一个 WP 7.5 应用程序，昨天我的硬盘死了。最新版本已安装到 WP 设备，但我不确定是否可以从设备中恢复它。是否可以从 WP 设备恢复 xap？

# jquery - 突出显示导航栏的选定选项，其中每个选项都进入新页面

> ID：12315649
> 
> 赞同：1
> 
> 时间：2012-09-07T09:43:45.270
> 
> 标签：jquery, html

我只想突出显示导航栏的单击选项，其中每个选项都链接到新页面....

```
 <div class="blue_grad">
                <ul id="nav_bar" class="tabNavigation">          
                    <li><a href="/xyz">A</a></li>
                    <li><a href="/xdz">B</a></li>
                    <li><a href="/ycz">E</a></li>
                    <li><a href="/xwz">S</a></li>
                    <li><a href="/xqz">E</a></li>

                </ul>
    </div> 
```

我用过这样的东西......但它没有用

```
<script type="text/javascript">
 $(document).ready(function(){
  $("#nav_bar li").click(function(){
    $("#nav_bar li").removeClass("selected");
    $(this).addClass("selected");
 });
});
</script> 
```

任何帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:49:21.153

一个快速的 jsfiddle 解决方案：http: [//jsfiddle.net/LyjcU/](http://jsfiddle.net/LyjcU/)

# java - 在特定 Liferay Web 内容结构上设置会话

> ID：12315650
> 
> 赞同：2
> 
> 时间：2012-09-07T09:43:45.257
> 
> 标签：java, session, liferay, virtual-machine, liferay-velocity

如何在特定的 Web 内容结构上设置页面会话，所以如果我分配具有此特定结构的任何页面，它将检查是否`session`存在，如果不存在，它将要求输入密码。然后用户应输入密码。

在页面结构中，我还想添加*Next*、*Finish*和*Cancel*按钮，所以如果我完成或取消它将破坏会话。如果在此之后用户试图访问该页面，他将再次被要求输入密码。

我正在尝试从 Web-content template 中做到这一点`*.VM`。

以下是我到目前为止所做的代码：

结构代码：

```
<?xml version="1.0"?>

<root>
    <dynamic-element name="classified" type="list" index-type="" repeatable="false">
        <dynamic-element name="Yes" type="1" index-type="" repeatable="false" />
        <dynamic-element name="No" type="0" index-type="" repeatable="false"/>
    </dynamic-element>
    <dynamic-element name="content" type="text_area" index-type="" repeatable="false"/>
</root> 
```

模板代码：

```
#if($classified.getData() == "1")
    #if($request.parameters.get('password') == "1234")
        <p>$content.getData()</p>
    #else
        <h2>This is the second authentication verification</h2>
        <p>Please enter your second password</p>

        #set ($url = $request.get('render-url'))

        <form action="$url" name="auth" method="POST">
            <label name="password">Password<span style="color:red">*</span></label>
            <input type="password" name="password" />
            <input type="submit" />
        </form>

        #if($request.parameters.get('password') != "1234")
            <p>Please enter correct password</p>
        #end
    #end
#else
    <h2>This is not a classified page</h2>
#end 
```

我怎样才能使这个想法奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:47:38.057

在我看来，更好的方法是编写一个**servlet**来检查用户会话，如果没有会话，它将自动重定向到带有登录 portlet 的专用页面。验证用户*真的*不是 Velocity 脚本的任务......

# php - php搜索一个mysql字符串结果

> ID：12315661
> 
> 赞同：0
> 
> 时间：2012-09-07T09:44:17.860
> 
> 标签：php, mysql

伙计们只是一个快速的问题。我在 mysql 行中有一个类似于此的字符串

`'google.co.nz, stackoverflow.com, facebook.com, grubber.co.nz'`

依此类推...我想搜索表中的所有行并检查“facebook.com”在所有行中出现了多少次类似于上面的行以便澄清

我的行看起来像这样

```
-- id -- user -- likes 
   1      bob     facebook.com, google.co.nz, grubber.co.nz, stackoverflow.com 
```

我想检查一下 facebook.com 在整个表格中出现了多少次（在每一行中）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:46:15.130

假设每个用户只能喜欢同一个页面一次，这应该有效：

```
SELECT COUNT(*)
FROM table
WHERE likes REGEXP '[[:<:]]facebook.com[[:>:]]' 
```

PS：规范化你的表格，在不久的将来你**会**遇到这样的布局大麻烦！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:54:39.283

你可以用一种懒惰的方式来做，发出一个 LIKE SQL 查询：

```
SELECT count(*) FROM my_table 
WHERE my_table.likes LIKE '%facebook.com%' 
```

这真的（真的）不是 cpu 友好的。尤其是大桌子

否则，您可以使用 MySQL 全文索引功能。

您可以在[本文中找到更多详细信息](http://devzone.zend.com/26/using-mysql-full-text-searching/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:47:08.810

您可以使用`like`运算符来匹配模式：

```
SELECT COUNT(id) AS occurences  WHERE likes LIKE "%facebook.com%" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T09:47:30.293

你可以使用“LIKE”语句。它是这样的（如果你想知道哪个用户喜欢 facebook.com）

```
SELECT * FROM yourtable
WHERE likes LIKE '%facebook.com%' 
```

无论如何，请考虑将喜欢存储在 1:n 表结构中，而不是作为字符串

这样，您就有一个存储所有喜欢的站点的表、一个用户表和一个存储分配的用户喜欢的表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T09:48:07.907

试试这个

```
select count(likes) from yourTable where likes like '%facebook.com%' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T09:48:20.917

其他选项。获取变量中的行数据，然后使用函数 preg_match_all ( [http://www.php.net/manual/es/function.preg-match-all.php](http://www.php.net/manual/es/function.preg-match-all.php) )。

此函数返回第一个参数中传递的正则表达式的出现次数。

# ios - IOS 更新 BadgeValue

> ID：12315668
> 
> 赞同：0
> 
> 时间：2012-09-07T09:44:35.613
> 
> 标签：ios, badge

我正在使用以下代码从我的 App 委托中设置徽章

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

sleep(2);

    // Set the tab bar controller as the window's root view controller and display.
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];

//Count the news pending and show the badge
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"datatesting.plist"];
NSFileManager *nfm = [[NSFileManager alloc] init];
if([nfm fileExistsAtPath:path])
{        
    // if file exists, get its contents, add more entries
    NSMutableArray *array = [[NSMutableArray alloc] initWithContentsOfFile:path];
    //Get the number of badge you have to show        
    int num;
    num = [array count];
    NSString *numerodeexp = [NSString stringWithFormat:@"%d",[array count]];
    [[[[[self tabBarController] tabBar] items] objectAtIndex:2] setBadgeValue:numerodeexp];

} 
else {
    [[[[[self tabBarController] tabBar] items] objectAtIndex:2] setBadgeValue:@"0"];
}

return YES;
} 
```

我想从我的一个视图控制器更新值，但我无法使用以下代码更新它：

```
 [[[[[self tabBarController] tabBar] items] objectAtIndex:2] setBadgeValue:@"0"]; 
```

从 ViewController 更新 Badge 值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:41:56.500

使用 tabBarItem：

```
[self.tabBarItem setBadgeValue:value]; 
```

# linux - 我需要什么来调试 pthreads？

> ID：12315670
> 
> 赞同：8
> 
> 时间：2012-09-07T09:44:40.090
> 
> 标签：linux, embedded, pthreads, cross-platform, cross-compiling

我想在我的自定义 linux 发行版上调试 pthread，但我遗漏了一些东西。我的主机是 Ubuntu 12.04，我的目标是使用 crosstool-NG 交叉编译器工具集构建的 i486 定制嵌入式 Linux，操作系统的其余部分是使用 Buildroot 构建的。

我将列出事实：

*   我可以在我的目标上运行多线程应用程序

*   当我在目标上运行多线程应用程序时，[Google Breakpad无法创建崩溃报告。](http://code.google.com/p/google-breakpad/)当我在我的主机上运行它时，具有完全相同构建的 Breakpad 库的完全相同的应用程序将成功。

*   GDB 无法在我的目标上调试多线程应用程序。

例如

```
$./gdb -n -ex "thread apply all backtrace" ./a.out --pid 716

dlopen failed on 'libthread_db.so.1' - /lib/libthread_db.so.1: undefined symbol: ps_lgetfpregs
GDB will not be able to debug pthreads.
GNU gdb 6.8 
```

我不认为 ps_lgetfpregs 是因为[这个](http://permalink.gmane.org/gmane.linux.debian.devel.glibc/4409)问题。

*   我的 crosstool 构建创建了 libthread_db.so 文件，并将其放在目标上。

*   我的 crosstool 构建为我的目标创建了 gdb，因此它应该与我在目标上运行的相同库链接。

*   如果我在我的主机上运行 gdb，针对我的测试应用程序，我会得到每个正在运行的线程的回溯。

我怀疑 Breakpad 的问题与 GDB 的问题有关，但我无法证实这一点。唯一的共同点是缺乏多线程调试。

我的主机和目标之间存在一些重要的差异，这使我无法在目标上调试 pthread。

有谁知道它是什么？

编辑：

来自 TI 的[Denys Dmytriyenko说：](http://e2e.ti.com/support/embedded/linux/f/354/t/52720.aspx)

> 通常，GDB 不是很挑剔，您可以混合搭配不同版本的 gdb 和 gdbserver。但是，不幸的是，如果您需要调试多线程应用程序，则需要对特定 API 进行一些依赖...
> 
> 例如，如果您没有为线程支持正确构建 GDB，这是您可能会看到的消息之一：
> 
> dlopen 在“libthread_db.so.1”上失败 - /lib/libthread_db.so.1：未定义符号：ps_lgetfpregs GDB 将无法调试 pthread。

请注意，此错误与我得到的错误相同，但他没有详细说明如何“正确”构建 GDB。

[GDB FAQ](http://sourceware.org/gdb/wiki/FAQ)说：

> (Q) GDB 没有看到除了发生崩溃的线程之外的任何线程；或者当我设置断点时 SIGTRAP 会杀死我的程序。
> 
> (A) 这在 Linux 上经常发生，尤其是在嵌入式目标上。有两个常见的原因：
> 
> *   您正在使用 glibc，并且您已经剥离了 libpthread.so.0
>     
>     
> *   libpthread.so.0 和 libthread_db.so.1 不匹配
>     
>     
> 
> GDB 本身不知道如何解码 glibc 维护的“线程控制块”，被认为是 glibc 私有实现细节。它使用 libthread_db.so.1（glibc 的一部分）来帮助它这样做。因此，libthread_db.so.1 和 libpthread.so.0 的版本和编译标志必须匹配。此外，libthread_db.so.1 要求某些非全局符号存在于 libpthread.so.0 中。
> 
> 解决方案：使用 strip --strip-debug libpthread.so.0 代替 strip libpthread.so.0。

我尝试了一个未剥离的 libpthread.so.0，但它没有任何区别。我将调查 pthread 和 thread_db 之间的任何不匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T08:04:06.010

这个：

```
dlopen failed on 'libthread_db.so.1' - /lib/libthread_db.so.1: undefined symbol: ps_lgetfpregs
GDB will not be able to debug pthreads. 
```

表示该`libthread_db.so.1`库无法`ps_lgetfpregs`在 gdb 中找到该符号。

为什么？

因为我使用带有“构建静态本机 gdb”选项的 Crosstoolg-NG 构建了 gdb，这将`-static`选项添加到 gcc。

本机 gdb 是使用该`-rdynamic`选项构建的，这会在 ELF 文件中的[.dynsym](https://blogs.oracle.com/ali/entry/inside_elf_symbol_tables)符号表中填充所有符号，甚至是未使用的符号。libread_db 使用此符号表`ps_lgetfpregs`从 gdb 中查找。

但是从`-static`ELF`.dynsym`文件中删除表。

此时有两种选择：

1.  如果要调试线程，请不要构建静态本机 gdb。
2.  构建一个静态 gdb 和一个静态 libthread_db（未测试）

编辑：

顺便说一句，这并不能解释为什么 Breakpad 无法在我的目标上调试多线程应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T18:35:49.480

只是...要使用 gdb 调试器，您需要使用 -g 选项编译代码。例如，gcc -g -c *.c。

# ios - iOS特殊字符，奇怪的问题

> ID：12315672
> 
> 赞同：0
> 
> 时间：2012-09-07T09:44:42.290
> 
> 标签：ios, cocoa-touch, nsstring, special-characters

我有一个非常奇怪的问题。大约三年前，我启动了一个 iOS 应用程序（iOS-SDK 3.0），从那时起经历了 SDK 4.0 和 5.0。从 5.0（或者可能是 5.1）开始，我突然开始遇到德语特殊字符（ä ö ü ß）的问题。

现在我什至不能用特殊字符初始化一个 NSString ，这一行：

```
NSString *str = @"abcäxyz"; 
```

给出以下警告：

> 由于输入字节不属于输入代码集 UTF-8，输入转换停止

和这个：

```
NSLog(@"%@", strTemp); 
```

给出：

> 美国广播公司

所以它停在第一个特殊字符处。在其他项目中，一切都很好。我可以毫无问题地使用特殊字符。

是配置问题吗？

编辑：显然这是文件编码的问题。

> 文件-我的文件

正在给：

> 文本/x-c++；charset=unknown-8bit

尝试用 iconv 转换它给了我：

> 不支持从未知 8 位转换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:00:23.007

当您使用 UTF-8 代码初始化字符串时会发生什么？像这样：

```
 NSString *s = [NSString stringWithFormat:@"%C", 0xc39f]; // should be ß 
```

据我所知，你也应该能够做到这一点，但还没有测试过：

```
 NSString *s = [NSString stringWithUTF8String:"0xc39f"]; 
```

试试这些，看看会发生什么。周围有许多网站为特殊字符保留 UTF-8 代码表，例如[这个](http://www.utf8-chartable.de)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:15:17.867

只要您的文件是 UTF-8 编码的，`@"abcäxyz"`应该没问题，但是嵌入文字 unicode 字符的显式形式是 \u????。

```
- (void)testGermanChar
{
    NSString *expected = @"abc\u00E4xyz";
    NSString *actual = @"abcäxyz";
    STAssertEqualObjects(expected, actual, @"the two strings should be equivalent");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T09:47:46.290

已解决：更改了 Xcode 中的文件编码：单击要更改编码的文件，然后打开右侧面板（此面板的名称实际上是什么？任何想法？）以编辑属性。您可以在“文本设置”下看到“文本编码”。就这些。

# facebook - Facebook 实时更新不适用于带有位置的帖子？

> ID：12315677
> 
> 赞同：1
> 
> 时间：2012-09-07T09:45:00.920
> 
> 标签：facebook, real-time-updates

我做了一个`Facebook`申请，要求`user_status`,`user_checkins`和`user_likes`. `"checkins,feed,likes"`我还订阅了我的用户对这些字段的实时更新。

当我的用户喜欢页面时，我会收到更新，因此这部分一切正常。

我在签到时遇到了奇怪的问题，当我尝试使用我`iPad`的签到更新时。但是当我对我做同样的事情时，我`Android`什么也没有收到。

不同之处在于我看到我的`iPad`签到：

```
https://graph.facebook.com/me/checkins?access_token=AAA[...] 
```

但我发现我的`Android`“签到”在：

```
https://graph.facebook.com/me/posts?with=location&access_token=AAA[...] 
```

我认为我应该将它们作为“提要”更新接收，但我也没有收到它们。

我错过了什么吗？

* * *

## 更新

好的，我显然错过了一些东西。

为了获得这些“提要”更新，您必须请求许可`read_stream`。

# azure - 直接连接到 SQL Azure 的登录前握手问题

> ID：12315681
> 
> 赞同：9
> 
> 时间：2012-09-07T09:45:12.523
> 
> 标签：azure, connection, connection-string, azure-sql-database

我们目前在我们的开发环境中遇到了一个相当麻烦的问题，并显示以下消息...

```
A connection was successfully established with the server, 
but then an error occurred during the pre-login handshake. 
(provider: SSL Provider, error: 0 - The certificate's CN 
name does not match the passed value.) 
```

...解决此问题的普遍接受的智慧是将连接的*TrustServerCertificate*部分设置为*True*。但是，这不能可靠或始终如一地工作。

此特定错误发生在许多实例中，例如在我们的 Azure 模拟器中测试我们的 WCF 服务与实时/托管的 SQL Azure 实例对话，甚至使用 SQL Management Studio。我们发现的唯一共同点是，只有当我们直接连接到 SQL Azure 时才会发生这种情况，而不是当它的托管和 Azure 直接与 SQL Azure 对话时（确实有效）。

我尝试了多种策略来解决问题（例如[此处](http://www.wadewegner.com/2010/08/using-the-trustservercertificate-property-with-sql-azure-and-entity-framework/)详述的一种），即认为它与连接相关并删除池化和对连接字符串的其他修改。但遗憾的是，没有一个是决定性的，更令人恼火的是错误是间歇性的，并且会在短时间内阻止访问，然后神奇地自行解决。

我已经消除的其他因素。

*   我们正在使用 Transcient Application Block 来尝试从这些错误中恢复，但没有。
*   我们的办公室没有与 Azure 托管服务连接的代理服务器。

有没有其他人遇到过这个问题或有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:39:14.853

您需要扫描与 FILE_SKIP_COMPLETION_PORT_ON_SUCCESS 标志不兼容的非 IFS Winsock BSP 或 LSP，问题主要来自正在安装的**非 IFS LSP 。**

只需从命令提示符处运行**“netsh WinSock Show Catalog”**，然后检查任何格式不为**0x20xxx的“服务标志”**

就我而言，我发现服务标志为 0x66 的“速度加速器”，删除此软件解决了我的问题。

更多信息可以在这里找到：http: [//support.microsoft.com/kb/2568167](http://support.microsoft.com/kb/2568167)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T18:11:47.097

您的连接字符串是什么样的？不确定您是否尝试过，但我记得在使用远程 SQL 连接到 SQL Azure 时遇到类似的问题，发现我必须设置：

```
Trusted_Connection=False;Encrypt=True 
```

并从字符串中完全删除任何连接超时。

# flash - Windows Embedded Compact 7 (V10.1.62.47) 上的 Flash Player ActiveX 可以在浏览器外使用吗？

> ID：12315682
> 
> 赞同：1
> 
> 时间：2012-09-07T09:45:19.373
> 
> 标签：flash, compact-framework, windows-embedded-compact

我在 Windows Embedded Compact 7 上的 .net 紧凑框架表单应用程序中托管 Flash ActiveX 时遇到问题。我使用了本文中的 AxHost 实现 - [http://msdn.microsoft.com/en-us/library/aa446515 .aspx](http://msdn.microsoft.com/en-us/library/aa446515.aspx)- 但activeX 不会播放电影。我已经让它在带有 Flash for Pocket PC 的早期版本的 Windows Mobile 上工作，但是当在 WEC7 中使用 AxShockwaveFlash 控件时，电影无法播放。我只看到一个灰色控件。我不相信 ActiveX 加载正确，因为 OnReadyStateChaged 事件在达到状态 4 之前不会像在 PocketPC 版本上那样通过状态 3。此外，我可以更改 BGColor 属性，但只能更改控件显示为灰色。有没有人真的让这个版本的 Flash ActiveX 在浏览器以外的任何其他容器中工作？

问候，

克里斯钱伯斯。

# ruby-on-rails - 自动在 Rails 中运行 nginx

> ID：12315685
> 
> 赞同：0
> 
> 时间：2012-09-07T09:45:25.940
> 
> 标签：ruby-on-rails, nginx

我正在使用 rails 2.3.9、rubygems 1.8.24、ruby 1.9.3 和 Windows 7 Ultimate 64 位

我刚刚通过乘客安装了 nginx 作为我的网络服务器。现在我想运行 nginx 作为我的默认服务器，这样当我运行 ruby​​ 脚本/服务器时，它会运行而不是默认的 WeBrick。有没有办法做到这一点？太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:00:54.743

您可能想看看[Foreman](https://github.com/ddollar/foreman)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:53:27.120

Nginx 不能按照您描述的方式工作。一旦启动，您将无需运行`script/server`，rails 应用程序将在 Nginx/Apache 启动的同时运行。

因此，只需按照“Passenger”手册（在开发模式下）部署您的 Rails 应用程序，您的应用程序就会一直运行。

因此，作为结论，我们可以看出，在部署 Rails 应用程序时，Nginx 和 Apache 在同一个组（与Passenger 一起工作），而 Mongrel/Webrick/Thin 是另一个组（`script/server`方法）。

# javascript - 如何从 NVD3 的 MultiBarChart 中的数据 Y 计算屏幕 Y？

> ID：12315687
> 
> 赞同：2
> 
> 时间：2012-09-07T09:45:39.357
> 
> 标签：javascript, json, svg, d3.js, bar-chart

我正在使用 NVD3 库来显示堆叠的 multiBarChart。我还需要在每个条上添加一条水平线 (---) 以指示平均值的位置。

我认为最后一组数据（系列）是平均值。

```
test_data = [
    {"key":"Series 1",  "values":[{"x":0,"y":30},{"x":1,"y":15},{"x":2,"y":10}]},
    {"key":"Series 2",  "values":[{"x":0,"y":2},{"x":1,"y":7},{"x":2,"y":3}]},
    {"key":"Average","values": [{"x":0,"y":6},{"x":1,"y":4},{"x":2,"y":40}]}
]; 
```

我设法选择了最后一个系列，并将高度更改为 1 以模拟一条线而不是正方形。我还设法通过更改“y”的值来垂直控制线的位置：

```
var lastBars = $('.nv-group:last rect');
lastBars.attr('height', 2);
lastBars.attr('y',function(a, y, c){
    return parseFloat(y) + 50;
}); 
```

为了将“水平线”放置在屏幕右侧的 Y 上，我需要了解如何将随数据提供的“y”缩放到屏幕上相应的“Y”，以与 Y 轴上的正确值对齐。

我正在阅读 NVD3 的源代码，它似乎正在使用 yDomain 和 yScale 来计算屏幕 Y 值，但我不确定如何使用它们以及如何从库代码外部访问它们。

任何想法？

# xml - xml_grep 获取第一个实例的值

> ID：12315693
> 
> 赞同：0
> 
> 时间：2012-09-07T09:46:11.883
> 
> 标签：xml, grep

我使用 xml_grep 从 xml 文档中导出文本。

所以我有一个这样的xml文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<Mediainfo version="0.7.52">
<File>
<track type="General">
<Complete_name>grm.mov</Complete_name>
<Format>MPEG-4</Format>
<Format_profile>QuickTime</Format_profile>
<Codec_ID>qt  </Codec_ID>
<File_size>10.1 MiB</File_size>
<Duration>3s 600ms</Duration>
<Overall_bit_rate_mode>Variable</Overall_bit_rate_mode>
<Overall_bit_rate>23.5 Mbps</Overall_bit_rate>
<Encoded_date>UTC 2012-08-01 09:33:54</Encoded_date>
<Tagged_date>UTC 2012-08-01 09:34:00</Tagged_date>
<Writing_library>Apple QuickTime</Writing_library>
<TIM>00:00:00:00</TIM>
<TSC>25</TSC>
<TSZ>1</TSZ>
</track>

<track type="Video">
<ID>1</ID>
<Format>JPEG</Format>
<Codec_ID>mjpa</Codec_ID>
<Duration>3s 600ms</Duration>
<Bit_rate_mode>Variable</Bit_rate_mode>
<Bit_rate>23.5 Mbps</Bit_rate>
<Width>1 920 pixels</Width>
<Height>1 080 pixels</Height>
<Display_aspect_ratio>16:9</Display_aspect_ratio>
<Frame_rate_mode>Constant</Frame_rate_mode>
<Frame_rate>25.000 fps</Frame_rate>
<Scan_type>Interlaced</Scan_type>
<Scan_order>Bottom Field First</Scan_order>
<Compression_mode>Lossy</Compression_mode>
<Bits__Pixel_Frame_>0.453</Bits__Pixel_Frame_>
<Stream_size>10.1 MiB (100%)</Stream_size>
<Language>English</Language>
<Encoded_date>UTC 2012-08-01 09:33:54</Encoded_date>
<Tagged_date>UTC 2012-08-01 09:34:00</Tagged_date>
</track>

<track type="Menu">
<ID>2</ID>
<Language>English</Language>
<Encoded_date>UTC 2012-08-01 09:34:00</Encoded_date>
<Tagged_date>UTC 2012-08-01 09:34:00</Tagged_date>
</track>

</File>
</Mediainfo> 
```

有 2 个元素名为“持续时间”。一个下一个`<track type="General">`下`<track type="Video">`。如何分别导出每一个？

```
xml_grep 'Duration' 
```

返回两个元素。我知道这是一个愚蠢的问题，但我无法弄清楚。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:41:58.957

你应该使用 xpath

喜欢

```
$value1 = $xml->xpath('/file/track/@Video/Duration');

$value2 = $xml->xpath('/file/track/@General/Duration'); 
```

只是一个想法。

或者像这样的东西：

```
xml_grep -t '*[@attrib="pickme"]' *.xml or xml_grep2 -t '//*[@attrib="pickme"]' *.xml 
```

# php - 使图像和视频上传可选

> ID：12315696
> 
> 赞同：0
> 
> 时间：2012-09-07T09:46:21.303
> 
> 标签：php, codeigniter, file-upload, controller

我在 codeigniter 中有一个小应用程序。有一个包含 3 个文本字段的表单，名称、电子邮件、位置。这足以提交。但是，有两个可选字段可供所有用户提交图像或视频或两者。我让它工作，直到上传的文件出错。当我希望它停止整个提交直到错误得到修复时，它仍然会提交文本数据。

这是我的控制器的代码。任何帮助都会很棒。谢谢！

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Form extends MY_Controller {

public function __construct()
{
    parent::__construct();
    $this->load->helper(array('form', 'url'));
}

function index()
    {
        $this->load->helper(array('form', 'url'));

        $this->load->library('form_validation');

        $this->form_validation->set_rules('nominee', 'Nominee', 'required');
        $this->form_validation->set_rules('email', 'Email', 'required|valid_email');
        $this->form_validation->set_rules('location', 'Location', 'required');

        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('form');
        }
        else
        {
             // Load the library - no config specified here
                $this->load->library('upload');

                // Check if there was a file uploaded - there are other ways to
                // check this such as checking the 'error' for the file - if error
                // is 0, you are good to code
                if (!empty($_FILES['imageupload']['name']))
                {
                    // Specify configuration for File 1
                    $config['upload_path'] = 'uploads/images';
                    $config['allowed_types'] = 'gif|jpg|png';
                    $config['max_size'] = '100';
                    $config['max_width']  = '1024';
                    $config['max_height']  = '768';       

                    // Initialize config for File 1
                    $this->upload->initialize($config);

                    // Upload file 1
                    if ($this->upload->do_upload('imageupload'))
                    {
                        $data = $this->upload->data();
                    }
                    else
                    {
                        echo $this->upload->display_errors();
                    }

                }

                // Do we have a second file?
                if (!empty($_FILES['videoupload']['name']))
                {
                    // Config for File 2 - can be completely different to file 1's config
                    // or if you want to stick with config for file 1, do nothing!
                    $config['upload_path'] = 'uploads/videos/';
                    $config['allowed_types'] = 'gif|jpg|png';
                    $config['max_size'] = '100';
                    $config['max_width']  = '1024';
                    $config['max_height']  = '768';

                    // Initialize the new config
                    $this->upload->initialize($config);

                    // Upload the second file
                    if ($this->upload->do_upload('videoupload'))
                    {
                        $data = $this->upload->data();
                    }
                    else
                    {
                        echo $this->upload->display_errors();
                    }

                }

            $this->load->view('thankyou');
            //Run code to add into the database
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:35:52.333

将所有上传数据逻辑放入[自定义验证回调](http://codeigniter.com/user_guide/libraries/form_validation.html#callbacks)中。

然后，如果验证失败（包括上传），页面将返回表单，并预先填写数据 - 您的用户可以修复文件上传。

然后你的控制器逻辑也被简化了；

```
 $this->load->library('form_validation');

    $this->form_validation->set_rules('nominee', 'Nominee', 'required');
    $this->form_validation->set_rules('email', 'Email', 'required|valid_email');
    $this->form_validation->set_rules('location', 'Location', 'required');
    $this->form_validation->set_rules('imageupload', 'Image Upload', 'callback__image_upload');
    $this->form_validation->set_rules('videoupload', 'Video Upload', 'callback__video_upload');

    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('form');
    }
    else
    {
        //Run code to add into the database
        $this->load->view('thankyou');
    } 
```

和

```
function _video_upload()
{
   //put upload logic here and check if its valid
}

function _image_upload()
{
   //put upload logic here and check if its valid
} 
```

# android - 以编程方式将视图添加到自定义布局时出错（不使用膨胀功能）

> ID：12315697
> 
> 赞同：1
> 
> 时间：2012-09-07T09:46:24.613
> 
> 标签：android, android-layout, layout

我过去使用过自定义布局，但到目前为止只使用 xml 布局文件来描述我的子视图并使用该`layoutInflater.inflate`功能。

这次我**不想**使用 xml 布局文件，而是以编程方式将我想要的所有视图添加到我的自定义布局中。我要做的是：

```
public class myLayout extends FrameLayout  {
    private Context c;
    private LayoutParams webViewLayoutParams;

    public myLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    c = context;
    initMyWebView();
    addToLayout(mywebView,mywebViewLayoutParams);
}

    private void initMyWebView() {
    Log.d("init", "init webview");
    mywebView=new WebView(c);
    mywebViewLayoutParams = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT,
            FrameLayout.LayoutParams.MATCH_PARENT);

}
   private void addToLayout(View view, LayoutParams params) {
    Log.d("init", "adding child view");
    this.addView(view, params);

}
} 
```

我的自定义布局仅在我的主要活动布局文件中“调用”

```
<com.mypackage.myLayout
    android:id="@+id/myLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

当我在终端上启动应用程序时，它会立即崩溃

```
09-07 11:17:25.035: E/ActivityThread(17250): Failed to inflate
09-07 11:17:25.035: E/ActivityThread(17250): android.view.InflateException: Binary XML file line #18: Error inflating class com.mypackage.myLayout
09-07 11:17:25.035: E/ActivityThread(17250):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
09-07 11:17:25.035: E/ActivityThread(17250):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
etc... 
```

我想我错过了一些明显的东西，但我不知道我做错了什么。有什么我做错了吗？

**编辑** 我终于找到了问题。它来自我刚刚包含在项目中的 admob 库，我什至没有使用它！外部 JAR 也必须在 libs 目录中，因为 ADT17 ......希望如果有人遇到同样的问题，这会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:26:31.577

in your `initMyWebView()` you assign two variables new values(`mywebView` and `mywebViewLayoutParams`), but where are these initiated? Maybe you only need to init those variables.

I see that you init `webViewLayoutParams` but not `mywebViewLayoutParams`

# soap - SOAP 服务调用（内容太大错误）

> ID：12315698
> 
> 赞同：0
> 
> 时间：2012-09-07T09:46:26.800
> 
> 标签：soap, google-apps-script

很抱歉这个问题打扰您，但我有一个关于 Google Apps 脚本中的配额限制的问题。具体来说，我想知道 SOAP 响应的最大大小是多少。我们有一个相当大的 SOAP 响应，而 Google Apps 脚本会产生一个**Content Too Large**错误。

有谁知道 SOAP 响应的最大大小是多少？我尝试查看 Google Apps Scripting Dashboard，但找不到任何确定的答案来进一步帮助我。

我们有一个 Google Apps Enterprise 帐户，我想这在配额等方面会有所不同

你们中是否有人也知道是否有可能规避此错误？或者您是否喜欢使用其他任何特定方法来获得您想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:08:33.833

在使用 SoapUI 进行了一些测试以收集有关正在提取多少兆字节的更多信息后，我得出结论，SOAP 调用的限制为 10MB。

# c# - 如何使用将验证考虑在内的构建器自动创建测试数据

> ID：12315702
> 
> 赞同：3
> 
> 时间：2012-09-07T09:46:37.470
> 
> 标签：c#, unit-testing, verification, test-data, nbuilder

我正在使用[NBuilder](http://nbuilder.org/)创建测试数据，并且我的类具有大量属性，因此手动创建是不可能的。在我使用 NBuilder 之前，我将一些 SQL 选择复制粘贴到 csv 文件中，并使用自动映射在测试中重新创建它们。现在我想使用 NBuilder 或其他东西，我面临实体/数据库限制的问题。

有什么方法可以告诉其中一些构建器在生成数据时考虑我的映射文件。例如，如果有一个映射

```
 this.Property(t => t.SomeId)
                .IsFixedLength()
                .HasMaxLength(3); 
```

我希望框架能够根据这些要求为该属性生成测试数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:46:33.807

我想知道您是否可以使用[Linq-to-EDMX](http://linqtoedmx.codeplex.com/)来访问您的实体的映射信息。有了这些信息，您可以使用 NBuilder 的`CreateNew`方法执行以下操作：

```
// Linq-to-EDMX was used to get the propertyLength value
x => x.SomeId = randomString.Substring(0, propertyLength) 
```

# sql - 计算所有引用表中对特定行的引用

> ID：12315703
> 
> 赞同：2
> 
> 时间：2012-09-07T09:46:42.667
> 
> 标签：sql, tsql

现在我有列出所有引用表的代码，而且我可以一一计算表中的引用。

查询一：

```
SELECT t.NAME AS TableWithForeignKey,
    c.NAME AS ForeignKeyColumn
FROM sys.foreign_key_columns AS fk
INNER JOIN sys.tables AS t
    ON fk.parent_object_id = t.object_id
INNER JOIN sys.columns AS c
    ON fk.parent_object_id = c.object_id
        AND fk.parent_column_id = c.column_id
WHERE fk.referenced_object_id = (
        SELECT object_id
        FROM sys.tables
        WHERE NAME = 'MAIN_TABLE'
        ) 
```

查询 2：

```
SELECT COUNT(MAIN_ID)
FROM MAIN_TABLE
INNER JOIN REF_TABLE_1
    ON MAIN_TABLE.ID = REF_TABLE_1.MAIN_ID 
```

查询 3：

```
SELECT COUNT(MAIN_ID)
FROM MAIN_TABLE
INNER JOIN REF_TABLE_2
    ON MAIN_TABLE.ID = REF_TABLE_2.MAIN_ID 
```

等等

是否可以在一个查询中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:40:26.533

我试图通过使用 sql 块语句而不是单个查询来解决它。如果能解决您的问题，请尝试使用。您也可以为它创建一个存储过程。

```
BEGIN
    CREATE TABLE #tempTable (TName NVARCHAR(100), FKey NVARCHAR(100), RCount BIGINT)

    INSERT INTO #tempTable(TName, FKey)
    SELECT t.NAME AS TableWithForeignKey, 
        c.NAME AS ForeignKeyColumn 
    FROM sys.foreign_key_columns AS fk 
    INNER JOIN sys.tables AS t 
        ON fk.parent_object_id = t.object_id 
    INNER JOIN sys.columns AS c 
        ON fk.parent_object_id = c.object_id 
            AND fk.parent_column_id = c.column_id 
    WHERE fk.referenced_object_id = ( 
            SELECT object_id 
            FROM sys.tables 
            WHERE NAME = ''MAIN_TABLE' 
            ) 

    SELECT * FROM #tempTable

    DECLARE tempT CURSOR FOR SELECT TName FROM #tempTable

    DECLARE @tn NVARCHAR(100)

    OPEN tempT

    FETCH NEXT FROM tempT INTO @tn

    WHILE @@FETCH_STATUS = 0
    BEGIN
        EXEC (N'UPDATE #tempTable SET RCount = (SELECT COUNT(*) FROM ' + @tn + ') WHERE TName =''' +  @tn + '''')

        FETCH NEXT FROM tempT INTO @tn
    END 
    CLOSE tempT;
    DEALLOCATE tempT;

    SELECT * FROM #tempTable
    DROP TABLE #tempTable

END 
```

# c# - 视频缩略图生成

> ID：12315704
> 
> 赞同：3
> 
> 时间：2012-09-07T09:46:46.177
> 
> 标签：c#, asp.net, thumbnails

我目前正在探索如何从视频文件创建缩略图。到目前为止，我能够使用 ffmpeg 生成缩略图，但是如果有任何其他方法可以在不涉及可执行（.exe）文件的情况下生成缩略图，有人可以建议我。

谢谢，新手，请指导我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T09:52:13.517

**[ffmpeg.exe](http://ffmpeg.org/)**是生成视频缩略图的最佳解决方案，因为它是根据 LGPL 或 GPL 许可的免费软件。

很少有其他地方可以找到解决方案：

[AviFile 库的 C# 包装器](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)

[DirectShow .NET](http://sourceforge.net/projects/directshownet/)

[SlimDX 是一个免费的开源框架，使开发人员能够使用 C# 等 .NET 技术轻松构建 DirectX 应用程序](http://code.google.com/p/slimdx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-17T19:29:22.787

如果你只需要一个通用的缩略图，一个简单的方法是通过 WindowsAPICodePack.Shell 包。可以生成小、中、大或超大的缩略图。对输出的控制不如 ffmpeg 那么多，但是当使用通用缩略图或避免外部 exe 时，很难击败这种方法。

```
using Microsoft.WindowsAPICodePack.Shell;
using System.Drawing;

namespace GetVideoThumbnail
{
    class VideoThumbnail
    {
        static void Main(string[] args)
        {
            string videoPath = @"C:\Users\NotSure\Desktop\SampleVideo.MP4";

            // Create shell object
            ShellObject videoShellObject = ShellObject.FromParsingName(videoPath);

            // Create bitmap and/or save locally
            Bitmap thumbnailBmp = videoShellObject.Thumbnail.LargeBitmap;
            thumbnailBmp.Save(@"C:\Users\NotSure\Desktop\SampleVideoThumbnail.bmp");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:51:55.570

是的！，这个有趣的问题很好。我解决了这个问题，我的文凭任务 - 在大学。

还有更多文章。

1\. [OpenCV](http://opencv.org/) - 这个开源项目最好用的 C/C++、C# 和 Java

2\. [Emg CV](http://www.emgu.com) - 这个不错的 C#

， 和更多...

试试它是开源的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T16:48:28.040

你可能想试试 AForge 的[VideoFileReader](http://code.google.com/p/aforge/)，特别是`AForge.Video.FFMPEG.VideoFileReader`。它使用 ffmpeg DLL。

或者，在 Windows 7 上，您可以使用`ShellFile.Thumbnail`WindowsAPICodePack 或使用 DirectShow 通过 VideoRenderer 保存帧。

我最近使用了 ShellFile 方法，并使用 VideoFileReader 作为备份。

# android - 更改网格单元格的颜色

> ID：12315714
> 
> 赞同：1
> 
> 时间：2012-09-07T09:47:33.377
> 
> 标签：android, gridview, onclick

我想使用网格位置的数量来改变网格单元的颜色。例如，我有 5X6 网格意味着 30 个网格项，所以我想更改第 21 个位置的颜色。请告诉我如何在不单击网格视图的情况下执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:12:58.507

您需要为此定义一个自定义适配器。
在`getView()`适配器的方法中，您必须检查`position`参数是否等于 21。如果等于 21，则更改当前单元格的背景。

如果您还没有定义自定义适配器的经验，那么首先通过一个示例会更有意义。
下面是一个使用[自定义适配器来显示图像的 GridView 示例。](http://developer.android.com/guide/topics/ui/layout/gridview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:01:03.023

为了在扩展网格单元布局的同时在网格单元中设置颜色，请在您的 baseadapter 类中创建一个单元格的数组，然后根据需要设置颜色。

像

```
LayoutInflater li = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        grd = li.inflate(R.layout.grid_item, null);
FrameLayout dgcl = (FrameLayout) grd.findViewById(R.id.grditm);
        parent_l[position] = dgcl; 
```

然后

```
parent_l[21].setBackgroundColor(Color.RED); 
```

这里 griditm 是布局 grid_item 的 id

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-07T09:50:13.790

首先，您必须确定网格的顺序，列在哪里，线在哪里。例如：

1 2 3 4 5

6 7 8 9 10

ETC..

然后做一个乘法

```
i = Y*numberOfColums  + X;
grid[i].myColor = Color(R,G,B); 
```

我假设基于 0 的索引，这只是意味着：如果有 6 列：

```
0 <= X <= 5 
```

如果有 5 行

```
0 <= Y <=4 
```

基于 0 的索引允许您以非常简单的方式迭代整个网格

```
for(int x = 0; x < numberOfColumns; x++)
{
    for(int y = 0; y < numberOfRows; y++)
    {
        i = Y*numberOfColums  + X;
    }
} 
```

# azure - 我应该如何为我的项目托管服务器？

> ID：12315718
> 
> 赞同：0
> 
> 时间：2012-09-07T09:47:56.623
> 
> 标签：azure, hosting, cloud, distributed-computing

我已经开始研究一个游戏项目，预计服务器上的负载会非常高。我最初的计划是使用一个托管通用游戏数据的通用主服务器，并使用一组托管节点（或游戏世界）服务器的服务器，同时在机器上以较少数量托管更多 CPU/网络密集型世界。现在我想知道如何最好地设置实际的服务器。我应该使用像 Microsoft Azure 这样的云，我应该在自己购买的硬件上自己托管，还是应该使用某些托管公司的专用托管？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:57:49.160

Windows Azure 实际上有一个社交游戏工具包，它可能会提供一些很好的指导。 [https://github.com/WindowsAzure-Toolkits/wa-toolkit-games](https://github.com/WindowsAzure-Toolkits/wa-toolkit-games)

在 Github 上，架构部分还可以帮助您考虑 Azure 解决方案 [https://github.com/WindowsAzure-Toolkits/wa-toolkit-games/wiki/architecture](https://github.com/WindowsAzure-Toolkits/wa-toolkit-games/wiki/architecture)

回复：服务器，云非常适合这种工作负载/用例，您可以快速成长或快速失败，具体取决于您的成功程度，并且只为您使用的内容付费。Azure 提供 IaaS 和 PassS 产品，应该可以满足您的所有需求（包括 IaaS 上的 Windows 和 Linux）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:57:56.080

好吧，我相信现在人们都在从事社交游戏；我相信你也会这样做。

不确定开发环境我建议你看一下亚马逊的[游戏托管](http://aws.amazon.com/game-hosting/)。它可能会有点贵，但如果它满足你的所有需求，那么拥有自己的会更好。

您还可以查看 [谁](http://www.gamersisle.com/)允许您根据自己的意愿租用游戏服务器，这样当您觉得自己达到客户端数量时可以租用更多。

快乐的游戏开发。

PS :- 我一直想知道人们如何构建游戏.. 只是学习如何？;)

# c - a better way to draw grid as background

> ID：12315724
> 
> 赞同：1
> 
> 时间：2012-09-07T09:48:20.977
> 
> 标签：c, winapi, gdi+, gdi, grid-layout

I want to draw grid as in the below picture.![enter image description here](../Images/efa9fc82d0e2085dfb49e1606c8d94df.png)

I know a trick to draw this by draw 6 vertical and horizontal lines instead of 6 x 6 small rectangle.

But if I want to have smaller zoom (zoom for viewing picture), the lines are many. For example, say my view window is of size 800 x 600 and viewing a picture of size 400 x 300 (so zoom in is 2). There will be 400 x 300 rectangle of size 2 x 2 (each rectangle represents a pixel).

If I draw each cell (in a loop, say 400 x 300 times), it is very slow (when I move the window...). Using the trick solves the problem.

By I am still curious if there is a better way to do this task in winapi, GDI(+). For example, a function like `DrawGrid(HDC hdc, int x, int y, int numOfCellsH, int numOfCellsV)`?

A further question is: If I don't resize, move the window or I don't change the zoom in, the grid won't be changed. So even if I update the picture continuously (capture screen), it is uncessary to redraw the grid. But I use `StretchBlt` and `BitBlt` to capture the screen (to memory DC then hdc of the window), if I didn't redraw the grid in memory DC, then the grid will disappear. Is there a way to make the grid stick there and update the bitmap of the screen capture?

ps: This is not a real issue. Since I want to draw the grid when zoom is not less than 10 (so each cell is of size 10 x 10 or larger). In this case, there will be at most 100 + 100 = 200 lines to draw and it is fast. I am just curious if there is a faster way.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:38:59.967

您是否考虑过使用[CreateDIBSection](http://msdn.microsoft.com/en-us/library/aa926298.aspx)，这将允许您使用指针，以便您可以快速操作 R、G、B 值，例如以下创建 256x256x24 位图并以 64 像素间隔绘制绿色方块：

```
BITMAPINFO BI = {0};
BITMAPINFOHEADER &BIH = BI.bmiHeader;
BIH.biSize = sizeof(BITMAPINFOHEADER);
BIH.biBitCount  = 24;
BIH.biWidth     = 256;
BIH.biHeight    = 256;
BIH.biPlanes    = 1;
LPBYTE pBits = NULL;
HBITMAP hBitmap = CreateDIBSection(NULL, &BI, DIB_RGB_COLORS, (void**) &pBits, NULL, 0);
LPBYTE pDst = pBits;
for (int y = 0; y < 256; y++)
{
    for (int x = 0; x < 256; x++)
    {
        BYTE R = 0;
        BYTE G = 0;
        BYTE B = 0;
        if (x % 64 == 0) G = 255;
        if (y % 64 == 0) G = 255;
        *pDst++ = B;
        *pDst++ = G;
        *pDst++ = R;
    }
}
HDC hMemDC = CreateCompatibleDC(NULL);
HGDIOBJ hOld = SelectObject(hMemDC, hBitmap);
BitBlt(hdc, 0, 0, 256, 256, hMemDC, 0, 0, SRCCOPY);
SelectObject(hMemDC, hOld);
DeleteDC(hMemDC);
DeleteObject(hBitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:29:23.813

一般来说，这类图形操作的主要限制因素是填充率和函数调用的数量。

填充率是机器改变像素值的速度。通常，blit（复制矩形区域）非常快，因为它们经过高度优化并且旨在以缓存友好的顺序访问内存。但是一个 blit 会触及该区域中的所有像素。如果您要过度绘制或者如果这些像素中的大多数并不真正需要更改，那么仅绘制您需要的像素可能会更有效，即使这对缓存不太友好。

如果您通过制作 n 个东西来绘制 n 个基元，那么随着 n 变大，这*可能*是一个限制因素，并且寻找一个可以让您一次绘制多条（或全部）线的 API 调用可能是有意义的。

您的“技巧”演示了这两种优化。与 100 个矩形相比，绘制 20 条线的调用次数更少，而且它触及的像素也少得多。随着窗口的增长或网格大小的减小，线条方法的调用次数和触摸的像素都将线性增加，而矩形方法将增长为 n^2。

在触及最小像素数方面，我认为您不能做得更好。但我想如果你要画很多线，函数调用的数量*可能会成为一个因素。*我不知道 GDI+，但在普通的 GDI 中，有类似的函数`Polyline`，`PolyPolyline`可以让你在一次调用中绘制多条线。

# objective-c - Touch events in UIView

> ID：12315726
> 
> 赞同：1
> 
> 时间：2012-09-07T09:48:46.687
> 
> 标签：objective-c, ios, core-graphics, uitouch

I'm making a painting application in iOS . I'll give a brief outline of the logic here ,

1.Initialize a bitmap
2.Whenever a touchBegan or touchMoved event is detected , I draw a filled CGRect at that position on the bitmap and the bitmap is drawn to screen.

It works perfectly except for a little problem . If I move the mouse in the simulator really fast I dont get a continuous stroke . Its just a series of disconnected CGRects . I did some research which showed that in iOS touch events are fired only every 16 milliseconds but I dont think I'm moving the mouse that fast . So is the problem with the simulator or my code ?

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{    

       CGPoint touchPoint=[touch locationInView:self];

       CGContextFillRect (currentBitmap, CGRectMake (touchPoint.x -8 , touchPoint.y - 8   , rectangularBrushSize, rectangularBrushSize ));

       [self setNeedsDisplay]; //draw currentBitmap to screen

} 
```

The code for touchesMoved is the same . The draw rect method draws currentBitmap to the screen .I'd like to add once more that it works perfectly when I move the mouse with medium speed.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:54:14.657

您应该尝试使用`CGContextMoveToPoint`并`CGContextAddLineToPoint`制作绘图应用程序。否则您的线条将看起来不流畅。

*我用这种方式写了一个应用程序，没有遇到你遇到的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:51:20.077

这很正常。您的代码或模拟器可能没有问题。不必在当前鼠标/手指位置绘制矩形，您必须记住（在实例变量中）最后一个位置并用一条线将其与当前位置连接起来。

在`touchesBegan`：

```
lastPosition = [[touches anyObject] locationInView:self]; 
```

在`touchesMoved`：

```
currentPosition = [[touches anyObject] locationInView:self];
CGContextMoveToPoint(context, lastPosition);
CGContextAddLineToPoint(context, currentPosition);
// Draw the line with the desired color and width here.
lastPosition = currentPosition; 
```

# powershell - 两秒后 Powershell 超时

> ID：12315733
> 
> 赞同：0
> 
> 时间：2012-09-07T09:49:21.043
> 
> 标签：powershell, timeout, uuid

我是PowerShell的新手。我在 www.powershell.com 上阅读了一些内容。现在我需要你的帮助来解决一个问题。我想从网络中的客户端读取 UUID。因此，我创建了一个文档“pcs.txt”，其中存储了所有 PC。

```
$pc = Get-Content pcs.txt #Read content of file
$cred = Get-Credential “domain\user” 

for ($i=0; $i -lt $pc.length; $i++)     {

    $Result=test-connection -ComputerName $pc[$i] -Count 1 -Quiet
    If ($Result -eq 'True')
    { 
        $uuid = (Get-WmiObject Win32_ComputerSystemProduct -ComputerName $pc[$i] -Credential $cred).UUID 
        $Ausgabe=$pc[$i] + ';'+$uuid
        $Ausgabe  

    } 
    else
    {

        $Ausgabe=$pc[$i] + '; UUID nicht erhalten'
        $Ausgabe 
    }

} 
```

首先我测试 ping 是否有效。当 ping 正常工作时，我尝试获取 uuid。有时即使 ping 有效，我也无法获得 uuid。所以我想编写一个超时代码，也就是说 -> 当你在 2 秒后没有 uuid 时转到下一台电脑。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:47:13.023

`Get-WmiObject`唉， commandlet没有超时参数。[MS Connect](http://connect.microsoft.com/PowerShell/feedback/details/645165/add-timeout-parameter-to-get-wmiobject "微软连接")中有一个功能请求，但它来自 2011 年并且仍然开放。

[使用](http://www.muscetta.com/2009/05/27/get-wmicustom/ "一种解决方法")`System.Management`. _ 如果链接失效，我会在这里复制并粘贴它。（而且我讨厌只包含指向可能存在或不存在的资源的链接的答案......）

```
Function Get-WmiCustom([string]$computername,[string]$namespace,[string]$class,[int]$timeout=15){
$ConnectionOptions = new-object System.Management.ConnectionOptions
$EnumerationOptions = new-object System.Management.EnumerationOptions 

$timeoutseconds = new-timespan -seconds $timeout
$EnumerationOptions.set_timeout($timeoutseconds) 

$assembledpath = "\\" + $computername + "\" + $namespace
#write-host $assembledpath -foregroundcolor yellow 

$Scope = new-object System.Management.ManagementScope $assembledpath, $ConnectionOptions
$Scope.Connect() 

$querystring = "SELECT * FROM " + $class
#write-host $querystring 

$query = new-object System.Management.ObjectQuery $querystring
$searcher = new-object System.Management.ManagementObjectSearcher
$searcher.set_options($EnumerationOptions)
$searcher.Query = $querystring
$searcher.Scope = $Scope 

trap { $_ } $result = $searcher.get() 

return $result
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:29:57.457

我找到了一个很好的解决方法！

[http://theolddogscriptingblog.wordpress.com/2012/05/11/wmi-hangs-and-how-to-avoid-them/](http://theolddogscriptingblog.wordpress.com/2012/05/11/wmi-hangs-and-how-to-avoid-them/)

这是我的工作代码：

```
$pc = Get-Content pcs.txt #FILE FROM THE HARDDISK
$cred = Get-Credential “DOMAIN\USER” #

for ($i=0; $i -lt $pc.length; $i++) 
{
$Result=test-connection -ComputerName $pc[$i] -Count 1 -Quiet 
If ($Result -eq 'True')
{ 
    $WMIJob = Get-WmiObject Win32_ComputerSystemProduct -ComputerName $pc[$i] -Credential $cred -AsJob     
    $Timeout=Wait-Job -ID $WMIJob.ID -Timeout 1 # the Job times out after 1 seconds.   
    $uuid = Receive-Job $WMIJob.ID

    if ($uuid -ne $null)
    {
        $Wert =$uuid.UUID 
        $Ausgabe=$pc[$i] + ';'+$Wert
        $Ausgabe  
    }

    else
    {
    <#$b = $error | select Exception       
    $E = $b -split (:)     
    $x = $E[1]   
    $Error.Clear()      #>
    $Ausgabe=$pc[$i] + '; got no uuid'
    $Ausgabe 
    }

} 
else
{
    $Ausgabe='PC not reached through ping.'
    $Ausgabe 
}

} 
```

我希望我能帮助某人

# java - 字符串看起来相同，但测试表明它们不同

> ID：12315734
> 
> 赞同：0
> 
> 时间：2012-09-07T09:49:24.273
> 
> 标签：java, string

我有一些有效的代码如下：

```
String a;
String b;
a = get_string_from_complex_procedure_1();
b = get_string_from_complex_procedure_2();
if (a != b)
{
    put_up_error_dialog("["+a+"] != ["+b+"]");
} 
```

代码的设计使得 a 和 b最终*应该是相同的，事实上大多数时候它们是相同的，但偶尔我会出现错误对话框。*但令人困惑的是，当对话框报告时，这两个字符串对我来说*似乎相同。*我想知道什么样的事情会导致这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:52:10.477

像这样重写：

```
String a;
String b;
a = get_string_from_complex_procedure_1();
b = get_string_from_complex_procedure_2();
if (!a.equals(b))
{
    put_up_error_dialog("["+a+"] != ["+b+"]");
} 
```

`==`and`!=`运算符比较引用，而不是值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:52:42.340

您不能在字符串上使用`==`和。`!=`要比较两个字符串，请使用`a.equals(b) and !a.equals(b)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:53:38.237

使用`==`或`!=`在字符串比较引用（内存位置）的情况下，最好使用`equals()`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T09:54:56.240

采用

```
 a.equals(b); or  a.equalsIgnoreCase(b) to compare String. 
```

# rest - What does an ACL for a REST service need?

> ID：12315735
> 
> 赞同：2
> 
> 时间：2012-09-07T09:49:26.530
> 
> 标签：rest, acl

I have a REST service with authentication. So I can prevent clients which aren't authenticated from doing specific things.

But how to do the access control for a community-like service?

I mean, there is stuff like

you can edit your profile just your friends can download it just admins can delete your profile moderators can delete posts etc.

Which seems like different problems to me

I got something like roles: admin, moderator, user

I got something like "friends": a dynamic list of users

I can do a match on the route for every request. since it's a REST service the route defines how what gets done. So I could intercept every route and check it for permissions, which would keep the permission checking from the controllers.

But how to store it? Attaching it to every piece of information in the DB or building and maintaining a separate datastructure? if the last one, how to structure it?

# mysql - 第一次查询状态变化

> ID：12315738
> 
> 赞同：1
> 
> 时间：2012-09-07T09:49:52.597
> 
> 标签：mysql, sql, database, data-modeling

我有一张如下表

```
      CREATE TABLE Customers_History(Row_Id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
                             Cust_Name VARCHAR(255),
                             Created_Date 日期，
                             Cust_Status TINYINT)

```

表中的行如下

```
插入客户历史记录（客户名称、创建日期、客户状态）
                     VALUES('客户 A', '20120516', 0),
                           ('客户 B', '20120516', 0),
                           ('客户 C', '20120516', 0),

                           ('客户 A', '20120517', 1),
                           ('客户 B', '20120517', 0),
                           ('客户 C', '20120517', 0),

                           ('客户 A', '20120520', 1),
                           ('客户 B', '20120520', 0),
                           ('客户 C', '20120520', 1),

                           ('客户 A', '20120521', 0),
                           ('客户 B', '20120521', 0),
                           ('客户 C', '20120521', 1),

                           ('客户 A', '20120526', 1),
                           ('客户 B', '20120526', 1),                
                           ('客户 C', '20120526', 0);

```

我想要一个通过将日期作为参数带来如下输出的查询

当我将 20120517 作为日期的参数传递时，它应该将客户 A 带到哪里，因为它的状态从 0 变为 1

```
  客户 A

```

当我将 20120520 作为日期的参数传递时，它应该将客户 C 带到哪里，因为它的状态从 0 变为 1

```
  客户 C

```

当我将 20120526 作为日期的参数传递时，它应该将客户 B 带到哪里，因为它的状态从 0 变为 1

```
  客户 B

```

我想要特定日期的客户名称，其状态第一次从 0 变为 1。

注意：当我将 20120526 作为日期的参数传递时，它不应该带来客户 A，因为客户 A 状态在 17 本身从 0 更改为 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:58:44.107

你去：

```
select
  c.Cust_Name
from
  Customers_History c
where
  c.CreatedDate = :YourDate and
  c.Cust_Status = 1 and
  not exists 
    ( select 
        'x' 
      from 
        Customers_History c2
      where 
        c2.Cust_Name = c.CustName and
        c2.Cust_Status = 1 and
        c2.Created_Date < c.Created_Date ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:34:21.523

```
select Cust_Name from customers_history where Created_Date='2012-05-17' and 
Cust_Status=1 order by Cust_Name desc limit 1 
```

# android - PhoneGap webview 顶部的操作栏

> ID：12315740
> 
> 赞同：2
> 
> 时间：2012-09-07T09:49:54.660
> 
> 标签：android, cordova, android-activity, android-actionbar

我正在尝试将 Android(4.0) 的操作栏添加到 PhoneGap (2.0.0) 的 webview 活动中。我在我的应用程序的另一个活动中使用相同的操作栏。它在 menu.xml 文件中，在其他活动中一切正常，没有任何问题。

当我加载 webview 时，没有显示操作栏。我在操作栏上得到一个 nullPointerExeption。我已经有了@targetApi(14)。该资源适用于 homeactivity，但不适用于 webviewactivity。

```
 ActionBar actionBar = getActionBar();
    actionBar.setBackgroundDrawable(getResources().getDrawable(R.drawable.bar));
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setIcon(R.drawable.logo); 
```

我发现 getActionBar 是 Activity 类中的一个函数，它返回 null。可能 phonegap 对 activty 产生了影响，因此无法加载操作栏。

有人有这方面的经验吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T12:56:40.363

```
 @Override
   public void onCreate(Bundle savedInstanceState) {
   super.setBooleanProperty("showTitle", true);
   super.onCreate(savedInstanceState); 
```

super.onCreate 之前的 setBooleanProperty 是问题的答案

# java - 当我没有在 Maven 的 pom.xml 中指定它时，版本会是什么？

> ID：12315746
> 
> 赞同：57
> 
> 时间：2012-09-07T09:50:19.870
> 
> 标签：java, maven, version

最近我用maven写了一个项目，但是我对maven pom.xml中的版本有疑问。

如果我写这样的依赖

```
<dependency>
    <groupId>foo</groupId>
    <artifactId>bar</artifactId>
     <!--No version here-->
</dependency> 
```

版本是什么

1.  在一个简单的项目中，没有子项目

2.  作为另一个项目的依赖项，该项目使用 foo-bar-1.0.0

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-07T10:38:21.357

您的问题的第 1 部分：如果您不指定版本，则会出现各种不同的结果：

a) 你会得到一个错误...

> ```
> [ERROR]   The project org.example:myproject:0.5-SNAPSHOT (D:\src\myproject\pom.xml) has 1 error
> [ERROR]     'dependencies.dependency.version' for foo:bar:jar is missing. @ line 39, column 14 
> ```

b) 如果你已经在项目的父 pom 的依赖管理中定义了版本，那么就采用那个版本。项目的父项目不必是封闭的超级项目。它可以只是适当定义的集合。

c) 如果您的项目的另一个依赖项也依赖于 foo:bar，并指定了一个版本，则采用该版本。Maven 2 有一种称为[传递依赖](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)的机制。如果没有为工件显式指定依赖项的版本，它会搜索依赖项树并使用树中*最近的定义*。如果有两个最接近的定义，则第一个声明获胜（从 maven 2.0.9 开始）。

第 2 部分：我不确定，但也许传递依赖机制也可以这样工作。但是文档（据我所知）没有提到这种情况。

但不知何故，我觉得你问题的第二部分没有意义：我想为了使用工件作为依赖项，你必须先构建它。因此，在将依赖项本身用作依赖项之前，您必须很好地了解依赖项的版本。

# eclipse - e4 动态菜单贡献

> ID：12315749
> 
> 赞同：5
> 
> 时间：2012-09-07T09:50:28.310
> 
> 标签：eclipse, e4

## 这个功能从 Kepler M4 开始就已经实现了，关于使用的详细信息见[我的博客](http://vu.descher.at)

我想实现对位于视图工具栏中的处理程序菜单的**完全动态菜单贡献。**在 Eclipse 3 中，可以添加“动态”作为 org.eclipse.ui.menus 对菜单的贡献！

我已经发现[www.vogella.com/blog/2010/10/26/processors-e4-model](http://www.vogella.com/blog/2010/10/26/processors-e4-model)解释了如何通过处理器模型扩展动态地为菜单做出贡献，但我正在谈论一个完全动态的菜单实现，它会改变在每次通话时。子菜单。如前所述，在 Eclipse 3.x 中通过动态菜单贡献和将 isDynamic() 设置为 true 来实现这一点是没有问题的。

我已经尝试了几种方法：

*   注册一个处理器挂钩到一个菜单 => 不可能动态添加（新元素根本没有显示，也在[Eclipse 论坛中讨论 - 无法在运行时替换菜单项](http://www.eclipse.org/forums/index.php/t/373602/)）
*   侦听 UIEventTopic 以获取创建菜单的事件，获取 Modification => 对收集的 swt.Menu 的修改的小部件（每个侦听器、元素等）（用于信息[RCP 事件模型）](http://wiki.eclipse.org/Eclipse4/RCP/Event_Model)

开放的、未经尝试的解决方案

*   插入 ToolControl 以尝试 SWT 方法 -> 相当复杂但可能有效

我已经有一段时间了，但似乎无法理解 E4 中这个问题的正确实现。

-- 这个问题也在[Eclipse 论坛中被问到 - 动态菜单贡献](http://www.eclipse.org/forums/index.php/t/373495/)

**- - - 更新**

到目前为止，我尝试了一种不同的方法：

我在菜单中添加了一个 HandledToolItem（请参见下图）

![片段命令方法](../Images/30d41c3947647095007b46bb5ccc46d9.png)

并且使用以下代码，我试图干扰菜单的构建方式，代码由相应的调用。图像中引用的命令处理程序。

```
@CanExecute
    public boolean canExecute(@Optional MApplication application) {
        System.out.println("CanExecute Counter="+counter);
            // --- 1 ---
        // Find the required MMenu Entry in the Application Model
        if(application == null) return true;
        EModelService modelService = (EModelService) application.getContext().get(EModelService.class.getName());
        MPart part = (MPart) modelService.find("at.medevit.emr.contacts.ui.contactselector", application);
        List<MToolBarElement> lmte = part.getToolbar().getChildren();
        HandledToolItemImpl htil = null;
        for (MToolBarElement mToolBarElement : lmte) {
            if(mToolBarElement.getElementId().equals("at.medevit.emr.contacts.ui.contactselector.toolbar.handledtoolitem.filter")) htil = (HandledToolItemImpl) mToolBarElement;
        }
        if(htil != null) {
            MMenu elemMenu = htil.getMenu();
        // --- 2 ---
            // Found it hopefully, let's start the real work, simply add a new item
        MDirectMenuItem mdi = MMenuFactory.INSTANCE.createDirectMenuItem();
        mdi.setLabel("Counter "+counter);
        counter++;
            // --- 3 ---
        elemMenu.getChildren().add(mdi); // ConcurrentModificationException
        } 
```

可以看到，一旦创建菜单，就会查询此代码，以确定该命令是否可执行。从 1 到 2 的所有代码都是为了找到正确的 MMenu 元素来处理。2 - 3 中的代码创建一个 MenuItem 并在该字段中增加一个计数器。

但是在 3 我第一次打开菜单时遇到了*java.util.ConcurrentModificationException ！*我假设此时菜单正在遍历 elemMenu.getChildren() 并且我不允许启用！

那么关于整个 e4 模型一直在变化的所有模糊之处是什么；）（开个玩笑，我知道这是一个 baaaad hack ！！！）

问题是：我真的认为添加完全动态菜单部分的可能性是最好的可用性工具之一，如果不能像在 E3 中那样在 E4 中实现它，这是一种非常严重的可能性下降！！！

**- 更新**

已为此[https://bugs.eclipse.org/bugs/show_bug.cgi?id=389063提交了一个 Eclipse 错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=389063)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:41:05.817

应该在您打开的错误中处理适当的动态模型更新。作为 Juno 中 Eclipse4 中的一种解决方法，可以在 Eclipse4 中创建 MRenderedMenuItem 以提供与**动态**元素等效的功能（尽管如果您使用的是 4.2，则只需使用 org.eclipse.ui.menus）。

前任：

```
ContextFunction generator = new ContextFunction() {
    @Override
    public Object compute(IEclipseContext context) {
        return new MyCompoundContributionItem(context);
    }
};

MRenderedMenuItem menuItem = MenuFactoryImpl.eINSTANCE.createRenderedMenuItem();
menuItem.setElementId(id);
menuItem.setContributionItem(generator);
container.getChildren().add(menuItem); 
```

这有效地将 CompoundContributionItem 直接提供给 Eclipse4 菜单渲染器。

# clojure - How to write this java code in clojure (tips)

> ID：12315751
> 
> 赞同：2
> 
> 时间：2012-09-07T09:50:39.060
> 
> 标签：clojure

## The question

I'm learning clojure and I love learning languages by example. But I do not like it just get a complete answer without me having to think about it.

So what I want is just some tips on what functions I might need and maybe some other clues.

The answer that I will accept is the one that gave me the necessary building blocks to create this.

```
public class IntervalMap<K extends Comparable<K>, V> extends
TreeMap<K, V> {

V defaultValue = null;

public IntervalMap(V defaultValue) {
    super();
    this.defaultValue = defaultValue;
}

/**
*
* Get the value corresponding to the given key
*
* @param key
* @return The value corresponding to the largest key 'k' so that
*         &quot; k is the largest value while being smaller than 'key' &quot;
*/
public V getValue(K key) {

    // if it is equal to a key in the map, we can already return the
    // result
    if (containsKey(key))
        return super.get(key);

    // Find largest key 'k' so that
    // &quot; k is the largest value while being smaller than 'key' &quot;

    // highest key
    K k = lastKey();

    while (k.compareTo(key) != -1) {

        k = lowerKey(k);

        if (k == null)
            return defaultValue;
    }

    return super.get(k);

    }

    @Override
    public V get(Object key) {
        return getValue((K) key);
    }
} 
```

*Update* I want to recreate the functionality of this class

For examples you can go here: [Java Code Snippet: IntervalMap](http://tgoossens.wordpress.com/?p=150&preview=true)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:25:46.227

我会看一些组合：

*   `(sorted-map & key-vals)`- 将允许您创建按键排序的地图。您可以提供自己的比较器来定义顺序。

*   `(contains? coll key)`- 测试集合是否包含由参数标识的项目（当应用于向量时，这是一个常见的混淆来源，`contains?`如果在给定索引处存在元素而不是给定值，则返回 true）

*   `(drop-while pred coll)`允许您在谓词为真时跳过集合中的项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T15:19:56.490

我在实现`interval-get`函数时使用的一些东西：

*   `contains?`，就像@sw1nn 建议的那样，非常适合检查地图是否包含特定键。
*   `keys`可用于获取地图中的所有键。
*   `filter`将所有元素保持在满足某个谓词的序列中。
*   `sort`，正如您已经猜到的那样，对序列进行排序。
*   `last`返回序列中的最后一个元素，或者`nil`如果序列为空。
*   `if-let`如果它不是假的，则可用于绑定和作用于一个值。

结果函数的用法如下：

```
(def m {0 "interval 1", 5 "interval 2"})

(interval-get m 3) ; "interval 1"
(interval-get m 5) ; "interval 2"
(interval-get m -1) ; nil 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T10:21:58.917

我只会使用与函数相结合的地图来检索给定某个键的最接近的值。如果您想了解更多信息，请阅读地图和功能。

如果您希望能够改变 map 中的数据，请将 map 存储在 clojure 的可变存储设施之一中，例如 atom 或 ref。如果您想了解更多信息，请阅读可变数据。

您可以使用已关闭默认值和/或映射或引用映射的原子的函数。如果您想了解更多信息，请阅读闭包。

协议的使用在这里也可能派上用场。所以，也阅读一下。足够让你去吗？;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:47:12.593

如果您想在 clojure 中“从概念上”实现代码块，那么现有答案已经回答了您的问题，但是如果您希望代码块在 clojure 中“结构上”相同（即子类化等），请查看`gen-class`并`proxy`在 clojure 文档中。

# jqgrid - jqgrid automated columns width

> ID：12315752
> 
> 赞同：1
> 
> 时间：2012-09-07T09:50:41.543
> 
> 标签：jqgrid

I have a table where I show some columns depending on users choice stored in database. What I want is:

*   If all columns width is shorter than table width, expand columns to use the entire table width.
*   If all columns width is longer than table width, make columns narrower so no horizontal scrollbar appears.
*   If I manually change a column width within the table (using the vertical line next to the column header), I need the other columns to autoresize so the full width is 100% (not longer nor narrower) of table width.

I've been using the parameters *autowidth*, *shrinkToFit* and *forceFit*, but when full width is ok, then if I resize a column manually a horizontal scrollbar appears. I cannot find the correct combination of those parameters so the table behaves like that.

Any idea on how to put those values to get my aim?

Thank you very much-

# c# - Bloomberg .Net API - 多种证券的响应数据

> ID：12315754
> 
> 赞同：5
> 
> 时间：2012-09-07T09:50:51.520
> 
> 标签：c#, .net, bloomberg

假设我们使用 .Net API 发送多个证券的彭博历史数据请求，是否有任何优雅的方法来分离/识别每个证券的响应数据？

我知道`sequenceNumber`响应中有一个字段，但不确定它是如何映射到每个证券的。我的代码片段如下所示。

```
Service refDataService = session.GetService("//blp/refdata");
Request request = refDataService.CreateRequest("HistoricalDataRequest");
Element securities = request.GetElement("securities");
securities.AppendValue("EURUSD CURNCY");
securities.AppendValue("USDJPY CURNCY");
securities.AppendValue("GBPUSD Curncy");
securities.AppendValue("USDCHF Curncy");

Element fields = request.GetElement("fields");                
fields.AppendValue("OPEN");
fields.AppendValue("HIGH");
fields.AppendValue("LOW");
fields.AppendValue("PX_LAST");

request.Set("periodicityAdjustment", "CALENDAR");  
request.Set("periodicitySelection", "DAILY");
request.Set("startDate", DateTime.Now.AddDays(-30).ToString("yyyyMMdd"));
request.Set("endDate", Convert.ToString(null));

session.SendRequest(request, null);

while (true)
{
Event eventObj = session.NextEvent();
foreach (Message msg in eventObj.GetMessages()) 
{
    if (msg.MessageType.Equals(Name.GetName("HistoricalDataResponse")))
    {
        Element secDataArray = msg.GetElement("securityData");          
        Element securityData = secDataArray.GetElement(3);
        for (int index = 0; index < securityData.NumValues; index++)
        {
            Element fieldData = securityData.GetValueAsElement(index);
            Datetime time = fieldData.GetElementAsDate("date");
            decimal? open = fieldData.HasElement("OPEN") ? Convert.ToDecimal(fieldData.GetElementAsFloat64("OPEN")) : new decimal?();
            decimal? high = fieldData.HasElement("HIGH") ? Convert.ToDecimal(fieldData.GetElementAsFloat64("HIGH")) : new decimal?();
            decimal? low = fieldData.HasElement("LOW") ? Convert.ToDecimal(fieldData.GetElementAsFloat64("LOW")) : new decimal?();
            decimal? close = fieldData.HasElement("PX_LAST") ? Convert.ToDecimal(fieldData.GetElementAsFloat64("PX_LAST")) : new decimal?();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:48:54.887

返回的`sequenceNumber`值对应于您通过调用添加证券的顺序`AppendValue`

```
securities.AppendValue("EURUSD CURNCY");  // Sequence number 1
securities.AppendValue("USDJPY CURNCY");  // Sequence number 2
securities.AppendValue("GBPUSD Curncy");  // Sequence number 3
securities.AppendValue("USDCHF Curncy");  // Sequence number 4 
```

根据[BLPAPI：开发人员指南](http://www.bloomberglabs.com/api/documentation/)：

> 安全序列号，指定安全在请求中的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T08:10:52.617

您可能还需要一个循环：

```
foreach (Message msg in eventObj.GetMessages())
{
   Element element = msg.GetElement("securityData");

   for (int i = 0; i < element.NumValues; i++)
   {
      Element security = element.GetValueAsElement(i);
      string ticker = security.GetElementAsString("security");
      Element fields = security.GetElement("fieldData");
      decimal px_last  = Convert.toDecimal(fields.GetElementAsFloat64("PX_LAST"));
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:50:13.810

在 Java 中（易于转置）：

```
Element securityData = msg.getElement("securityData");
String ticker = securityData.getElementAsString("security"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-20T21:02:27.803

您可以从`securityData`Element 中提取 Bloomberg 代码，如下所示：

```
string bloombergCode = secDataArray.GetElement("security").GetValueAsString(); 
```

# php - generate a random password. Button into a textbox

> ID：12315755
> 
> 赞同：0
> 
> 时间：2012-09-07T09:50:53.883
> 
> 标签：php, html, forms, login, passwords

I have a form for adding a new username and password to a site. I'm trying to add a button which generates a 12character password and puts it into the password text box. Everytime this button is pressed it should delete the password in already and add in another 12 char password.

This is my layout: [http://snag.gy/L4woo.jpg](http://snag.gy/L4woo.jpg)

Here is how my form:

```
<form method="post" action="addNewLogin.php" name="addUserLoginForm" id="addUserLoginForm" onsubmit= "return validateNewLoginForm()" >
    <input type="hidden" name="submitAttempt" value="true"/>
    <table style="background-color: White; padding:20px;" align="center">
                    <tr>
            <td style="width:180px;">
                        <label style="margin-left:400px;">Username</label>
                    </td>
                    <td style="width:420px;">
                                <input name="username" type="text" style="width:140px;" onchange= "return usernameValidation(this)" />
                    </td> 
        </tr>
        <tr>
                    <td>
                        <label style="margin-left:400px;">Password</label>
                    </td>
                    <td>
                        <input name="password" type="password" style="width:140px;" onchange= "return passwordValidation(this)"/>
                    </td>
                            <td style="margin-right: 200px;">
                                <button type="password" type= "text" onclick="return generateKey()">Generate Password!</button>
                            </td>
        </tr>
        </table>
<div align="center"><input type="submit" value="Add Login Details For New User" /></div>
</form> 
```

My usernames and password validate through a separate JavaScript function using standard regex

And here is my 12character generate password function:

```
public function generateKey()
{
        $random_bytes = openssl_random_pseudo_bytes(9);
        $random_string = mysql_escape_string(str_replace(array(1 => "+",2 => "/"), array(1 => "-", 2 => "_"), base64_encode($random_bytes)));
        return $random_string;
} 
```

I have no idea how to click on this button to apply this function to the required textbox. hope you can help. thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:05:08.017

当我理解正确时，应该使用 jquery 和 ajax 来完成。每次单击后，将一个新的 php 生成的密码加载到 input 元素中。但是您应该向元素添加 id。然后像：

```
$('#idofbutton').live("click", (function(){         

        // Ajax
        $.ajax({
            type: "GET",
            async: false,
            url: "yourphpwithgenerateKey_Codeonly.php",
            data: "",
            success: function(data){                
                $('#idofpasswordinput').text(data);                     
            }   
        });// $.ajax        
    })); 
```

在本例中，您只有一个 php 文件中的关键代码。当然，你可以通过get-parameters来处理一个大的php文件的单个方法，让php知道使用哪个方法左右。希望你明白我的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:56:56.737

为什么要在服务器上生成新密码？
只需使用 javascript 在客户端生成您的密码！

编辑：这是一个关于如何使用 JS 和 jQuery 做到这一点的快速示例

[http://jsfiddle.net/kannix/KhWR4/](http://jsfiddle.net/kannix/KhWR4/)

并且请重构您的 html 代码`<button type="password"`是无效的 html ;)

# php - Ideal data structure for accessing related elements in a set

> ID：12315757
> 
> 赞同：2
> 
> 时间：2012-09-07T09:51:02.910
> 
> 标签：php, data-structures

Let's say I have two sets

```
Set 1: A, B, C

Set 2: X, Y, Z 
```

When element `B` is accessed we should also retrieve `A` and `C` together with `B`, the other elements in `Set 1`

I can achieve this with permuting each set and creating an entry in a hashtable for each element of the set and storing/copying all values available in that set, such as;

```
A: A, B, C
B: A, B, C
C: A, B, C 
```

But that has a memory cost and can become inefficient for large data sets. I'm trying to achieve this without going for a graph database. Data is stored in MySQL. Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:02:15.127

例如，您可以在数据库中的每个数据行的数据集中存储指向元素标识符的指针（或元素的抽象“对”的标识符（数据库中实际上并不存在），如果您将使用第二种方式）。然后，在 PHP 中，您应该像这样构建一个数组：

```
array(
    'id1' => array(
        'value' => 'A', 
        'links' => array('id2', 'id3')
    ), 
    'id2' => array(
        'value' => 'B',
        'links' => array('id1', 'id3')
    ), 
    'id3' => array(
        'value' => 'C',
        'links' => array('id1', 'id2')
    )
); 
```

或者，您可以用标识符标记几个 (A, B, C)，然后得到一个像这样的数组：

```
array(
    'couples' => array(
        'c1' => array('id1', 'id2', 'id3')
    ), 
    'values' => array(
        'id1' => array(
            'value' => 'A', 
            'links' => array('c1')
        ), 
        'id2' => array(
            'value' => 'B',
            'links' => array('c1')
        ), 
        'id3' => array(
            'value' => 'C',
            'links' => array('c1')
        )
    )
); 
```

然后，只需编写简单的函数来获取所有链接的元素。在第一种情况下，您必须循环`links`并简单地通过当前键从当前数组中获取项目，在第二种情况下，您必须循环`links`并通过键从当前对中获取所有元素`couples`，并从中获取所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:04:58.323

我认为您刚刚了解了创建 NOSQL DB 和 SQL 替代方案背后的主要驱动力 :-)

有两种方法可以使用 MySQL 完成此操作（假设任意长度的集合）：

1-对数据库中的每个集合都有一个引用，并将其唯一标识符用作项目表中的列，它应该是这样的：

```
id    set_id   name  whatever_col1   whatever_col2
1     1        A     ...             ...
2     1        B     ...             ...
3     1        C     ...             ...
4     2        X     ...             ...
5     2        Y     ...             ...
... 
```

或者创建一个密钥对关系表，其中包含对 (A,B)、(A,C)、(B,C) (X,Y)、...

# android - Using playbin2 on android, only few audio frames can be displayed others are dropped in GstRingBuffer

> ID：12315758
> 
> 赞同：0
> 
> 时间：2012-09-07T09:51:03.173
> 
> 标签：android, gstreamer

I am porting `Gstreamer` to `Android`. It works fine to play audio.

But when playing video only few audio frame can be displayed at start, the others are dropped in `GstRingBuffer::default_commit` function.

In `default_commit` function, `writeseg` is less than `segdone` and `GstAudioSink` send `0x00000000 to GstAudioFlingerSink`.

My doubt is the reader thread get one segment once time, but the writer thread compose one segment need several invokes.

Could you kindly give me some suggestion or information on this issues.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:01:16.943

你用的是什么视频接收器？你用的是playbin2吗？您能否修改视频接收器以立即从 render() vmethod 返回（实际上不显示任何内容）以排除视频渲染正在使音频线程饥饿。

# mysql - 为什么mysql客户端字符集根据哪个linux用户连接到mysql而有所不同

> ID：12315760
> 
> 赞同：0
> 
> 时间：2012-09-07T09:51:09.907
> 
> 标签：mysql

如果我以 root 身份登录到我的 linux 机器，然后在命令行上连接到 mysql，在交互式提示符下键入“\s”会告诉我客户端字符集和连接字符集是 utf8。如果我退出 mysql，“su - bob”，连接到 mysql（作为同一个 mysql 用户），然后在交互式提示符下键入“\s”告诉我 Client 字符集和 Connection 字符集是 latin1。

我从 bob 的环境中查找了可能相关的 root 环境的差异，当以 bob 身份登录时，我将它们设置为与 root 用户相同的值并再次连接到 mysql - 但我仍然看到 latin1。

有人可以解释导致差异的因素吗？

非常感谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:24:08.607

mysql 客户端使用 LANG 或 LC_ALL 本地环境变量来设置客户端和连接字符集。如果没有定义这些变量，则使用默认字符集，我认为是 latin1。因此，如果 root 和 bob 用户对这些 env 变量具有不同的值，那么当您从各自的 OS 用户连接时，连接和客户端字符集将不同。

# mysql - 具有 crm 功能的命令行邮件客户端

> ID：12315761
> 
> 赞同：1
> 
> 时间：2012-09-07T09:51:11.853
> 
> 标签：mysql, vim, emacs, crm

我一直在为 CRM 使用各种 SaaS 解决方案以及我的谷歌应用程序邮件。但是，工作流程太慢了，我希望切换到可以使用更多键盘快捷键并更快工作的解决方案。我需要查找电子邮件对话并更新 CRM 记录。

所以我考虑切换到具有丰富键盘快捷键的终端邮件客户端，我也可以将其扩展到与 mysql 数据库对话。

什么是最好的解决方案？我想到了emacs，但我从未使用过它。我经常使用 vim，但我不确定是否将其扩展为阅读电子邮件和访问 mysql 数据库正在推动它。

我在mac osx上。

谢谢乙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T05:47:15.957

这取决于你想投入多少时间。如果有足够的时间、欲望和意志力，你可以这样做：

1.  编写命令行（或者可能是私有 Web API）来处理一些 CRM 任务，例如向联系人添加注释、将其标记为其他内容或您执行的任何其他操作。这只会处理在您的 CRM 中使用电子邮件地址做*一些事情*，但它不会自己处理消息。对于一些基本功能，可能需要一夜/一天的工作。

2.  一旦确定了要使用的邮件客户端，就可以围绕邮件模式编写一些小绑定。我个人会选择 Emacs，因为您可以轻松编写一个函数来从您的消息（或当前缓冲区）中提取电子邮件地址，并使用它执行一些 CRM 命令（通过#1）。Emacs 有一些不错的邮件客户端，比如 mu4e 和 GNUS，所以它可以很好地集成。在 Vim 中也很简单，但是 Emacs+evil-mode+(mu4e|GNUS) 是一个很好的组合。

该解决方案的优点是您只需在#2 上投入最少的精力——这些将是简单的“获取电子邮件地址，调用脚本”功能——因此您可以从 Emacs 切换到另一个客户端而不会太痛苦。您甚至可以在 Emacs 中的邮件客户端之间切换！

# apache-flex - 使用 maven 编译时调试器不活动

> ID：12315766
> 
> 赞同：3
> 
> 时间：2012-09-07T09:51:24.490
> 
> 标签：apache-flex, debugging, maven, flash

这是我的问题：当我通过 FlashBuilder 构建我的 swf 时，我的调试器处于活动状态（通过上下文菜单访问），并且我在 flashlogs.txt 中获取了我的日志。但是当我使用 maven (flexmojos-maven-plugin) 构建我的 swf 时，即使我`<debug>true</debug>`输入了配置，我也没有任何日志，也无法在 flash 应用程序中激活调试。

知道为什么吗？

信息：我需要能够访问调试器并在 flashlogs.txt 中有跟踪，而无需通过 FlashBuilder 编译和启动。=> 它适用于一些无需访问源代码的测试人员，只需启动应用程序并对其进行测试

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-07T13:21:20.793

使用 Maven 构建 swf 后，您需要将其部署在 Web 服务器上。

```
Example: c:\java\tomcat\webapps\myapp (depending of your back-end) 
```

然后在 Flash Builder 中，在项目的 Flex Build Path 配置中，您必须将输出文件夹设置为目标文件夹，您的 Web 服务器将在该文件夹中获取您正在构建的 SWF。

将输出文件夹 URL 设置为指向启动 SWF 的上下文，您应该一切顺利。

```
Example: http://localhost:8080/myapp 
```

当然，一定要使用调试模式编译；）

# applescript - Applescript 错误

> ID：12315770
> 
> 赞同：1
> 
> 时间：2012-09-07T09:51:39.853
> 
> 标签：applescript

我们正在尝试使用下面提到的终端命令通过 Applescript 安装应用程序。首先它将挂载 dmg 文件，然后将应用程序安装到 App 文件夹。将应用程序安装到应用程序文件夹时，它要求输入密码，如何使用 Applescript 处理此密码？

```
hdiutil mount /Users/rajasekaranr/Downloads/install_flash_player_osx.dmg"
sudo cp -R "/Volumes/Flash Player 2/Install Adobe Flash Player.app" /Applications 
```

使用苹果脚本执行上述命令时出错

```
error "sudo: no tty present and no askpass program specified" number 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:54:37.443

尝试：

```
property usr : "username"
property pswd : "password"

set fromPath to quoted form of "/Volumes/Flash Player 2/Install Adobe Flash Player.app"
set toPath to quoted form of "/Applications"
do shell script "cp -R " & fromPath & space & toPath user name usr password pswd with administrator privileges 
```

# bundler - Bundler：bundle viz 是显示依赖项的唯一方法吗？

> ID：12315772
> 
> 赞同：4
> 
> 时间：2012-09-07T09:51:51.170
> 
> 标签：bundler

我在这台机器上没有 Graphviz，也不想安装它，所以一个替代方案，首选终端，会很好。

捆绑器 v1.1.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T01:42:10.157

Gemfile.lock 显示依赖关系：

```
view Gemfile.lock 
```

例如

```
GEM
remote: http://rubygems.org/
specs:
  ZenTest (4.5.0)
  aaronh-chronic (0.3.9)
  abstract (1.0.0)
  actionmailer (3.0.19)
    actionpack (= 3.0.19)
    mail (~> 2.2.19)
  actionpack (3.0.19)
    activemodel (= 3.0.19)
    activesupport (= 3.0.19)
  ... 
```

# asp.net - ASP.Net MVC 4 & Unobtrusive Validation Summary

> ID：12315773
> 
> 赞同：1
> 
> 时间：2012-09-07T09:51:52.777
> 
> 标签：asp.net, asp.net-mvc-4, unobtrusive-validation

我正在尝试在表单上显示摘要错误消息以及属性级别错误。

使用`html.validationmessagefor(model =>...)` 可以正常呈现属性错误。

但是当出现一个或多个验证错误时，我想`html.ValidationSummary(true)`显示消息“您的表单缺少一些详细信息 - 见下文”。

也可能会有一些服务器端验证，这些验证将在提交后进行，并将添加`ModelState.AddError`.

如何获得类级别的数据属性（大概是`[AttributeUsage(AttributeTargets.Class)])`使用不显眼的验证在摘要验证中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:37:14.567

这是你想要的：

```
@using (Html.BeginForm())
{
        @Html.ValidationSummary(true)
        @Html.ValidationSummary("Errors:")

        <div>
            @Html.EditorFor(model => model.PathToExcel)
            @Html.ValidationMessageFor(model => model.PathToExcel)
        </div>

            <div>
            <input type="submit" value="Load" />
        </div>
} 
```

这使用 2 个 ValidationSummary，一个用于填充 ValidationMessageFor 字段，一个用于使用摘要。摘要仅在提交后有效。

# joomla - Virtuemart 中的超级卖家

> ID：12315775
> 
> 赞同：1
> 
> 时间：2012-09-07T09:51:59.197
> 
> 标签：joomla, joomla2.5, virtuemart

美德商城2.0.8如何获取电商？我的客户问过这个问题，就像在 ebay 上的电力卖家一样。

我已经在 Google 中搜索了有关此内容的信息。我在 ebay 上得到了以下答案？

> Power Sellers 是 eBay 的畅销产品，他们始终如一地提供优质的客户服务并在网站上保持高销量。正如他们必须保持的 98% 的积极反馈所表明的那样，他们提供了非常高水平的买家满意度。
> 
> 我们很自豪地认识到他们对 eBay 社区的成功所做的贡献。

所以在美德市场。如何实施 Power Seller ？美德市场中是否有任何默认选项可用？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T23:22:01.573

你不需要虚拟机中的超级卖家

VM 不是 Ebay（拍卖网站）是电子商务网站供应商的声誉默认为 100%；）

您是否在 VM 中使用多供应商？

多供应商处于测试阶段，尚未准备好用于生产站点

# vim - 如何确保键的映射不会改变？

> ID：12315776
> 
> 赞同：0
> 
> 时间：2012-09-07T09:52:01.147
> 
> 标签：vim, supertab

我在这台计算机（ubuntu）上`TAB`映射（我找不到）到自动完成的位置。我搜索了一下，似乎这是由 supertab 完成的，虽然我找不到如何禁用它，也没有找到它的文件。

在我的`~/.vimrc`和`/usr/share/vim/vimrc`文件中，没有制表键的映射。后面的文件包括`debian.vim`（并尝试使用`/etc/vim/vimrc.local`，但不存在），但也没有任何选项卡映射或对超级选项卡的任何引用。

的输出`:map!`是这样的：

```
i  <S-Tab>     * <C-R>=BackwardsSnippet()<CR>
i  <Plug>SuperTabBackward & <C-R>=<SNR>13_SuperTab('p')<CR>
i  <Plug>SuperTabForward & <C-R>=<SNR>13_SuperTab('n')<CR>
i  <C-Tab>     * <Tab>
i  <Tab>       * <C-R>=TriggerSnippet()<CR>
i  <CR>        * <C-R>=<SNR>13_SelectCompletion(1)<CR>
i  <C-N>         <Plug>SuperTabForward
i  <C-P>         <Plug>SuperTabBackward
i  <C-R><Tab>  * <C-R>=ShowAvailableSnips()<CR>
i  <C-X>         <C-R>=<SNR>13_ManualCompletionEnter()<CR> 
```

这表明 supertab 确实在映射这些键。

我尝试放入`nomap! <TAB>`我的`~/.vimrc`，但它不起作用，因为似乎在读取 supertab*后* `~/.vimrc`正在加载。

我的问题是，我怎样才能禁用 supertab，或者确保 ViM 不允许任何人映射`TAB`到其他任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:49:18.267

Supertab 是一个插件。因此，它应该安装在`~/.vim/`. 有很多方法可以安装插件（默认、病原体、vundle 等）。查看`~/.vim/bundle`（如果您使用 Pathogen）或在`~/.vim/plugin`.

如果它不在那里，它可能已经安装在`/usr/share/vim/vim7x/`非常拥挤并且不应该以任何方式触摸的地方：祝你好运。

无论如何，您可以`:verbose map!`查看映射的设置位置（因此，如果您想删除插件，则可以查看插件的安装位置），或者您可以简单地将 Supertab 配置为不使用`<tab>`. 见`:help supertab`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:26:06.050

如果您不想完全摆脱，`supertab`您可以使用类似（在您的`~/.vimrc`）中重新映射默认键绑定：

```
let g:SuperTabMappingForward = '<c-space>'
let g:SuperTabMappingBackward = '<s-c-space>' 
```

如果您只想插入文字`tab`字符，supertab 通过默认将文字制表符映射到`ctrl`+来简化操作`tab`（不幸的是，这在终端中不起作用）。它可以通过使用类似的东西来定制：

```
g:SuperTabMappingTabLiteral='<C-`>' 
```

最后，您始终可以通过`ctrl-v`在插入模式下添加映射来逃避映射。

有关更多信息，请参阅`:h supertab-forwardbackward`。（如果您还没有构建`supertab`文档，可能无法正常工作）

# java - 如何将 @FormParam 从另一种方法传递给 RESTful 服务？

> ID：12315778
> 
> 赞同：5
> 
> 时间：2012-09-07T09:52:03.940
> 
> 标签：java, web-services, rest

**免责声明：**我确实详尽地搜索了这个问题的答案，是的，我确实找到了另一个问题：[https](https://stackoverflow.com/questions/10315728/how-to-send-parameters-as-formparam-to-webservice) ://stackoverflow.com/questions/10315728/how-to-send-parameters-as-formparam-to-webservice . 但首先，这个问题是关于 Javascript 的，而我在问的是 Java，其次，它无论如何都没有答案。那么问题来了...

使用 RESTful 服务，将`@QueryParam`s 传递给`@GET`服务相当容易，因为您可以简单地将变量名称/值对附加到 URL 并使用它从程序中访问服务器。有没有办法用`@FormParam`s 做到这一点？

例如，假设我有以下 RESTful 服务：

```
@POST
@Produces("application/xml")
@Path("/processInfo")
public String processInfo(@FormParam("userId") String userId,
                          @FormParam("deviceId") String deviceId,
                          @FormParam("comments") String comments) {
    /*
     * Process stuff and return
     */
} 
```

...假设我在程序的其他地方也有另一种方法，如下所示：

```
public void updateValues(String comments) {

    String userId = getUserId();
    String deviceId = getDeviceId();

    /*
     * Send the information to the /processInfo service
     */

} 
```

如何在第二种方法中执行注释掉的操作？

**注意：**假设这些方法不在同一个类或包中。还假设 RESTful 服务托管在与您运行方法的机器*不同的服务器上。*因此，您*必须*访问该方法并以 RESTful 方式传递值。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T10:20:27.860

[使用@FormParam，您可以将表单参数绑定到变量。您可以在此处](http://www.mkyong.com/webservices/jax-rs/jax-rs-formparam-example/)找到示例。

其次，为了从你的java方法代码内部调用rest服务，你必须使用jersey客户端。示例代码可以在[这里](https://stackoverflow.com/questions/12312421/error-on-creating-rest-client-using-jersey)找到。

您可以使用 jersey 客户端表单传递表单参数，如下所示。

创建表单

```
ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config);
WebResource service = client.resource(UriBuilder.fromUri("http://localhost:8080/api").build());

Form f = new Form();    
f.add("userId", "foo");    
f.add("deviceId", "bar");    
f.add("comments", "Device"); 
```

将其传递给 Restful 方法。

```
service.path("processInfo").accept(MediaType.APPLICATION_XML).post(String.class,f); 
```

[参考](http://jersey.java.net/nonav/documentation/latest/client-api.html#d4e644)

# android - Viewpager 和 FragmentPagerAdapter：页面视图移除

> ID：12315797
> 
> 赞同：10
> 
> 时间：2012-09-07T09:53:58.017
> 
> 标签：android, android-fragments, android-viewpager

我正在使用 a`Viewpager`来`FragmentPagerAdapter`允许添加和删除页面。每个页面显示从互联网获得的数据。

随着新页面的添加，新的 Fragment 与该页面相关联。数据通过 AsyncTask 获取并显示在 Fragment 中。当用户选择删除页面时，想法是销毁页面和相关的 Fragment。

一般来说，这一切都很好。我看到的问题如下：

1.  您有三个包含数据的页面：

    *[第1页] [第2页] [第3页]*

2.  您删除除最后一页以外的任何页面，例如第 2 页；第 2 页根据需要消失：

    *[第1页] [第3页]*

3.  您添加一个新页面；但新页面不是空白的新页面，而是显示第 3 页的数据（视图）。

    *[第 1 页] [第 3 页] [第 4 页，但显示第 3 页的视图/数据，应为空白]*

* * *

我活动中的页面移除代码如下：

```
 // Destroy fragment for this page
   DataListFragment curFrag = getFragmentByName(currentPage);
   FragmentManager fm = getSupportFragmentManager();
   fm.beginTransaction().remove(curFrag).commit();
   fm.executePendingTransactions();
   curFrag = null;

   // Remove page and update adapter
   mPageTitles.remove(position);        
   mAdapter.notifyDataSetChanged(); 
```

使用调试器，它显示片段已从调用`FragmentManager`后删除。`executePendingTransactions()`但是在`FrampePagerAdapters`调用中`mAdapter.notifyDataSetChanged()`，片段被重新添加进来，然后在创建新页面时显示。

我尝试使用 FrameStatePagerAdapter，因为它应该允许破坏片段，但它不起作用。在我的 FragmentPagerAdapter`getItemPosition()`方法中，我使用`return FragmentAdapter.POSITION_NONE;`了我遇到的另一篇 SO 文章中指出的方法。

似乎该页面的视图没有被破坏，而是被添加回新页面。我尝试`removeViewAt()`在新页面的视图上使用该方法，但没有奏效。

* * *

作为新手，我敢肯定我错过了一些明显的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T12:53:07.543

您应该`FragmentStatePagerAdapter`从该适配器的项目列表中扩展和删除相应的项目，而不是尝试从活动中删除片段。`adapter.notifyDataSetChanged()`删除适配器中的项目后不要忘记调用。一旦完成，`ViewPager`将`FragmentStatePagerAdapter`照顾其余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T05:55:56.120

查看您的 getCount() 方法正在返回 viewPager 中的确切项目数。是的，FragmentStatePagerAdapter 也很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T03:29:22.010

我最终得到了一个解决方案，它根据经验混合了以下知识：

*   `Fragment`您可以毫无问题地在尾部添加新的。
*   您无法读取`Fragment`以前删除的内容，因为它`java.lang.IllegalStateException: Can't change tag of fragment`有时会导致，因此您必须克隆它。
*   要删除 a你必须在方法`Fragment`中返回，并从.`PagerAdapter.POSITION_NONE``getItemPosition(Object object)``Fragment``FragmentManager`
*   如果您要在不同于尾部的其他位置添加/删除/替换，则必须从要更改的位置删除所有内容，直到结束，执行这些操作，然后读取`Fragment`您删除的 (克隆) s。

这是一个完整的`FragmentActivity`代码，`FragmentPagerAdapter`其中包含 3 种添加、删除和替换选项卡的方法：

```
public class TabTestActivity extends FragmentActivity implements
        ActionBar.TabListener {
    private SectionsPagerAdapter mSectionsPagerAdapter;
    private ViewPager mViewPager;
    private static int tabCount = 0;
    private static String labelString = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        labelString = getString(R.string.title_section);
        setContentView(R.layout.activity_tab_test);
        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(final int position) {
                        (new Handler()).postDelayed(new Runnable() {

                            @Override
                            public void run() {
                                actionBar.setSelectedNavigationItem(position);
                            }

                        }, 1);
                    }
                });

        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            actionBar.addTab(actionBar.newTab()
                    .setText(mSectionsPagerAdapter.getPageTitle(i))
                    .setTabListener(this));
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.tab_test, menu);
        return true;
    }

    public void addNewTab() {
        int position = (mSectionsPagerAdapter.getCount() > 0 ? mViewPager.getCurrentItem() : 0);
        mSectionsPagerAdapter.insertFragment(position);
        mViewPager.setCurrentItem(position, true);
    }

    public void removeTab() {
        if (mSectionsPagerAdapter.getCount() > 0) {
            int position = mViewPager.getCurrentItem();
            mSectionsPagerAdapter.removeFragment(position);
        }
    }

    public void replaceTab() {
        if (mSectionsPagerAdapter.getCount() > 0) {
            int position = mViewPager.getCurrentItem();
            mSectionsPagerAdapter.replaceFragment(position);            
            mViewPager.setCurrentItem(position, false);
        }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.action_add_tab:
            addNewTab();
            return true;
        case R.id.action_remove_tab:
            removeTab();
            return true;
        case R.id.action_replace_tab:
            replaceTab();
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
        mViewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        private List<Fragment> currentFragments;
        private FragmentManager fragmentManager;

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
            fragmentManager = fm;
            currentFragments = new ArrayList<Fragment>();
        }

        public void insertFragment(int position) {
            // Remove fragments from position
            List<Fragment> fragmentsToRemove = new ArrayList<Fragment>(currentFragments.subList(position, currentFragments.size()));
            int i = currentFragments.size() - 1;
            int j = -1;
            int k = i;
            while (i >= position) {
                currentFragments.remove(i);
                i--;
                j++;
            }
            notifyDataSetChanged();
            final ActionBar actionBar = getActionBar();
            while (k >= position) {
                actionBar.removeTabAt(k);
                k--;
            }
            android.support.v4.app.FragmentTransaction transaction = fragmentManager.beginTransaction();
            while (j >= 0) {
                Fragment fragmentToRemove = fragmentsToRemove.get(j);
                transaction.detach(fragmentToRemove);
                transaction.remove(fragmentToRemove);
                j--;
            }
            transaction.commit();
            fragmentManager.executePendingTransactions();
            notifyDataSetChanged();
            // Add new fragment
            Fragment fragment = new DummySectionFragment();
            currentFragments.add(position, fragment);
            notifyDataSetChanged();
            actionBar.addTab(actionBar.newTab()
                    .setText(mSectionsPagerAdapter.getPageTitle(position))
                    .setTabListener(TabTestActivity.this), position);
            // Readd fragments
            if (fragmentsToRemove.size() > 0) {
                i = 1;
                for (Fragment fragmentToRemove : fragmentsToRemove) {
                    currentFragments.add(DummySectionFragment.cloneExistingFragment((DummySectionFragment)fragmentToRemove));
                    notifyDataSetChanged();
                    actionBar.addTab(actionBar.newTab()
                            .setText(mSectionsPagerAdapter.getPageTitle(position + i))
                            .setTabListener(TabTestActivity.this), position + i);
                    i++;
                }
            }
        }

        public void removeFragment(int position) {
            // Remove fragments from position
            List<Fragment> fragmentsToRemove = new ArrayList<Fragment>(currentFragments.subList(position, currentFragments.size()));
            int i = currentFragments.size() - 1;
            int j = -1;
            int k = i;
            while (i >= position) {
                currentFragments.remove(i);
                i--;
                j++;
            }
            notifyDataSetChanged();
            final ActionBar actionBar = getActionBar();
            while (k >= position) {
                actionBar.removeTabAt(k);
                k--;
            }
            android.support.v4.app.FragmentTransaction transaction = fragmentManager.beginTransaction();
            while (j >= 0) {
                Fragment fragmentToRemove = fragmentsToRemove.get(j);
                transaction.detach(fragmentToRemove);
                transaction.remove(fragmentToRemove);
                j--;
            }
            transaction.commitAllowingStateLoss();
            fragmentManager.executePendingTransactions();
            notifyDataSetChanged();
            // Readd fragments (except one)
            if (fragmentsToRemove.size() > 1) {
                i = 0;
                for (Fragment fragment : fragmentsToRemove.subList(1, fragmentsToRemove.size())) {
                    currentFragments.add(DummySectionFragment.cloneExistingFragment((DummySectionFragment)fragment));
                    notifyDataSetChanged();
                    actionBar.addTab(actionBar.newTab()
                            .setText(mSectionsPagerAdapter.getPageTitle(position + i))
                            .setTabListener(TabTestActivity.this), position + i);
                    i++;
                }
            }
        }

        public void replaceFragment(int position) {
            // Remove fragments from position
            List<Fragment> fragmentsToRemove = new ArrayList<Fragment>(currentFragments.subList(position, currentFragments.size()));
            int i = currentFragments.size() - 1;
            int j = -1;
            int k = i;
            while (i >= position) {
                currentFragments.remove(i);
                i--;
                j++;
            }
            notifyDataSetChanged();
            final ActionBar actionBar = getActionBar();
            while (k >= position) {
                actionBar.removeTabAt(k);
                k--;
            }
            android.support.v4.app.FragmentTransaction transaction = fragmentManager.beginTransaction();
            while (j >= 0) {
                Fragment fragmentToRemove = fragmentsToRemove.get(j);
                transaction.detach(fragmentToRemove);
                transaction.remove(fragmentToRemove);
                j--;
            }
            transaction.commit();
            fragmentManager.executePendingTransactions();
            notifyDataSetChanged();
            // Add new fragment
            Fragment fragment = new DummySectionFragment();
            currentFragments.add(position, fragment);
            notifyDataSetChanged();
            actionBar.addTab(actionBar.newTab()
                    .setText(mSectionsPagerAdapter.getPageTitle(position))
                    .setTabListener(TabTestActivity.this), position);
            // Readd fragments (except one)
            if (fragmentsToRemove.size() > 0) {
                i = 1;
                for (Fragment fragmentToRemove : fragmentsToRemove.subList(1, fragmentsToRemove.size())) {
                    currentFragments.add(DummySectionFragment.cloneExistingFragment((DummySectionFragment)fragmentToRemove));
                    notifyDataSetChanged();
                    actionBar.addTab(actionBar.newTab()
                            .setText(mSectionsPagerAdapter.getPageTitle(position + i))
                            .setTabListener(TabTestActivity.this), position + i);
                    i++;
                }
            }
        }

        @Override
        public Fragment getItem(int position) {
            if (currentFragments == null) {
                currentFragments = new ArrayList<Fragment>();
            }
            while (currentFragments.size() <= position) {
                currentFragments.add(null);
            }
            if (currentFragments.get(position) != null) {
                return currentFragments.get(position);
            }
            Fragment fragment = new DummySectionFragment();
            currentFragments.set(position, fragment);
            return fragment;
        }

        @Override
        public int getCount() {
            return currentFragments.size();
        }

        @Override
        public int getItemPosition(Object object) {
            int position = currentFragments.indexOf(object);
            if (position == -1) {
                return PagerAdapter.POSITION_NONE;
            }
            return position;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return ((DummySectionFragment)getItem(position)).getTitle();
        }
    }

    public static class DummySectionFragment extends Fragment {
        private int sectionNumber;

        public DummySectionFragment() {
            super();
            sectionNumber = ++tabCount;
        }

        public static DummySectionFragment cloneExistingFragment(DummySectionFragment fragment) {
            DummySectionFragment cloned = new DummySectionFragment();
            // Hack for avoiding autoincrement
            --tabCount;
            cloned.sectionNumber = fragment.getSectionNumber();
            return cloned;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_tab_test_dummy,
                    container, false);
            TextView dummyTextView = (TextView) rootView
                    .findViewById(R.id.section_label);
            dummyTextView.setText(String.format(labelString, sectionNumber));
            return rootView;
        }

        public int getSectionNumber() {
            return sectionNumber;
        }

        public String getTitle() {
            return String.format(labelString, sectionNumber);
        }
    }

} 
```

# java - Spring Jdbc 的 Oracle Sql 函数返回类型

> ID：12315804
> 
> 赞同：1
> 
> 时间：2012-09-07T09:54:33.633
> 
> 标签：java, oracle, spring, function, jdbc

我有一个 sql 函数（不知道 sql）

```
CREATE OR REPLACE FUNCTION RATELIMIT_OWN.Get_Conns_By_Login_IP_CallerId (p_yyyymm VARCHAR2, p_login VARCHAR2, p_framed_ip VARCHAR2, p_caller_id VARCHAR2 )
    RETURN CONNECTION_RECORD_4_IPV6_TABLE PIPELINED IS

TYPE        ref0 IS REF CURSOR;
cur0        ref0;
v_where_clause VARCHAR2(512);

out_rec     CONNECTION_RECORD_4_IPV6 := connection_record_4_ipv6(NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);

BEGIN

  if p_login is not NULL
  then
    v_where_clause := 'where login=''' || p_login || '''';
    if p_framed_ip is not NULL
    then
      v_where_clause := v_where_clause || ' and framed_ip=''' || p_framed_ip || '''';
    end if;
    if p_caller_id is not NULL
    then
      v_where_clause := v_where_clause || ' and caller_id=''' || p_caller_id || '''';
    end if;
  else
    v_where_clause := '';
    if p_framed_ip is not NULL
    then
      v_where_clause := 'where framed_ip=''' || p_framed_ip || '''';
      if p_caller_id is not NULL
      then
        v_where_clause := v_where_clause || ' and caller_id=''' || p_caller_id || '''';
      end if;
    else
      if p_caller_id is not NULL
      then
        v_where_clause := 'where caller_id=''' || p_caller_id || '''';
      end if;    
    end if;
  end if;

  OPEN cur0 FOR
    'SELECT login,acct_ts_start,acct_ts_stop,cause,duration,inb,outb,framed_ip,caller_id,called_id,nas_id,radius_type,format_ipv6_prefix(framed_ipv6_prefix),format_ipv6_prefix(delegated_ipv6_prefix) from ticket partition (TICKETS_P' || p_yyyymm || ') ' || v_where_clause;

   LOOP
   FETCH cur0 INTO out_rec.login, out_rec.acct_start, out_rec.acct_stop, out_rec.cause, out_rec.duration, out_rec.in_bytes, out_rec.out_bytes, out_rec.public_ip, out_rec.caller_id, out_rec.called_id, out_rec.nas_id, out_rec.radius_type, out_rec.framed_ipv6_prefix, out_rec.delegated_ipv6_prefix;
   EXIT WHEN cur0%NOTFOUND;
   PIPE ROW(out_rec);
  END LOOP;
  CLOSE cur0;

RETURN;
END Get_Conns_By_Login_IP_CallerId;
/ 
```

我正在使用 Spring JDBC 模板调用此函数

```
 SimpleJdbcCall caller = new SimpleJdbcCall(this.jdbcTemplateMartinique).withSchemaName("RATELIMIT_OWN").withFunctionName("Get_Conns_By_Login_IP_CallerId").withReturnValue()
            .declareParameters(new SqlParameter(P_YYYYMM, Types.VARCHAR))
            .declareParameters(new SqlParameter(P_LOGIN, Types.VARCHAR))
            .declareParameters(new SqlParameter(P_FRAMED_IP, Types.VARCHAR))
            .declareParameters(new SqlParameter(P_CALLER_ID, Types.VARCHAR));

    SearchAccountBean resultBean = null;

    SqlParameterSource paramMap = new MapSqlParameterSource().addValue(P_YYYYMM, searchAccountBean.getDate(), Types.VARCHAR).addValue(P_LOGIN, searchAccountBean.getLogin(), Types.VARCHAR)
            .addValue(P_FRAMED_IP, searchAccountBean.getIpAddress(), Types.VARCHAR).addValue(P_CALLER_ID, searchAccountBean.getCaller(), Types.VARCHAR);
    caller.compile();
    Object result = caller.executeFunction(Object.class, paramMap); 
```

现在它抛出了无效的列类型 1111。我调试并发现它返回“返回 SQL 类型 1111”。

我想知道如何在 java 中检索函数结果的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:15:22.063

看起来我最近通过为输出参数注册“类型处理程序”解决了一些问题。诀窍是**为 SqlOutParameter 注册 SqlReturnType** - 请参阅 SqlOutParamater 的构造函数。该接口有方法 getTypeValue() 允许您处理来自 Oracle STRUCT 的信息，这可能是您的类型在 JDBC 中的表示。

您可以在此处找到更多详细信息： [http ://rostislav-matl.blogspot.cz/2012/10/accessing-oracle-user-defined-type-with.html](http://rostislav-matl.blogspot.cz/2012/10/accessing-oracle-user-defined-type-with.html)

# java - spring mvc javascript / css位置

> ID：12315809
> 
> 赞同：1
> 
> 时间：2012-09-07T09:54:44.840
> 
> 标签：java, spring-mvc

我需要使用 Spring MVC 访问静态资源，例如图像、JavaScript 和 CSS。经过一些研究，我发现我可以通过在以下条目中访问这些条目`web.xml`：

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.css</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.js</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.gif</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.jpg</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.png</url-pattern>
</servlet-mapping> 
```

但是通过这个我无法访问`WEB-INF/`文件夹下的资源。我希望我的所有资源都在`WEB-INF/`文件夹下，只是为了控制访问。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:02:54.497

你可以把它放在 application-servlet.xml 中：

```
 <!-- static resource mapping for style sheets, etc. -->
    <mvc:resources mapping="/styles/**"  location="/WEB-INF/skins/" />
    <mvc:resources mapping="/scripts/**" location="/WEB-INF/scripts/" /> 
```

在页面上，您可以拥有：

```
 <script type="text/javascript" src="${context}/scripts/jquery-1.7.js"></script>
 <link rel="stylesheet" type="text/css" href="${context}/styles/css/superfish.css"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:00:13.073

你需要告诉spring静态资源在哪里

`<mvc:resources mapping="/resources/**" location="/, classpath:/META-INF/web-resources/" />`

这将使 WEB-INF/ 下的所有文件以及 META-INF/web-resources 中的 jar 中的所有文件都可以在以下位置访问

> [http://example.org/app/resources/](http://example.org/app/resources/)

另请参阅 [Spring：DispatcherServlet 和静态内容](https://stackoverflow.com/questions/5976266/spring-dispatcherservlet-and-static-content)

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-static-resources](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-static-resources)

# python - 输出 pandas 分组数据帧而不聚合

> ID：12315810
> 
> 赞同：4
> 
> 时间：2012-09-07T09:54:46.457
> 
> 标签：python, dataframe, pandas

假设我有一个以 'A','B','C' 作为列名的 pandas DF

```
A    B   C 
a1  b11 c11
a1  b12 c12
a2  b21 c21
a2  b22 c22 
```

我可以按“A”分组，但我可以得到

```
A  B  C
a1 [b11,b12], [c11,c12]
a2 [b21,b22], [c21,c22] 
```

没有任何聚合？希望顺序（b11 之前的 b12）与原始表中的顺序保持一致。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T23:50:09.243

```
In [46]: df.groupby('A').agg(lambda g: dict([(k,g[k].tolist()) for k in g]))
Out[46]: 
                 B               C
A                                 
a1  ['b11', 'b12']  ['c11', 'c12']
a2  ['b21', 'b22']  ['c21', 'c22'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T20:44:58.910

我不知道如何做你想要的，但也许这已经足够接近了：

```
In [23]: df = pd.DataFrame({'A' : ['a1', 'a1', 'a2', 'a2'],
                            'B' : ['b11', 'b12', 'b21', 'b22'],
                            'C' : ['c11', 'c12', 'c21', 'c22']})

In [24]: grpA  = df.groupby('A')
In [25]: a1 = grpA.get_group('a1') 
```

使用它，我得到：

```
In [26]: a1['B']  # or a1.B
Out[26]: 
0    b11
1    b12
Name: B 
```

还：

```
In [39]: import numpy as np

In [40]: np.array(a1.B)
Out[40]: array([b11, b12], dtype=object) 
```

最后：

```
In [41]: grpdA.get_group('a1').B.tolist()  # leave off `.tolist()` to get a series
Out[41]: ['b11', 'b12'] 
```

希望有帮助。

# android - android - nexus 7 不支持附件

> ID：12315815
> 
> 赞同：1
> 
> 时间：2012-09-07T09:55:35.037
> 
> 标签：android

我将 apk 文件发送到 Nexus 7（果冻豆）。我尝试安装它，然后我收到警告说`"There is no installed app that can open this attachment. try downloading an appropriate app from android market."`为什么我会收到此消息，我该怎么做才能使其正常工作？

清单文件：

```
< ?xml version="1.0" encoding="utf-8"?>
< manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.chessstopwatch"
    android:versionCode="1"
    android:versionName="1.0" >

< supports-screens android:anyDensity="true" />
    < uses-sdk android:minSdkVersion="7"  
          android:targetSdkVersion="8"/>
    < uses-permission android:name="android.permission.WAKE_LOCK"/>

    <application
        android:icon="@drawable/csw_icon"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
        <activity
            android:name=".ChessStopWatchActivity"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".ChessMoveScreen" android:screenOrientation="portrait">
                    </activity>
         <activity android:name=".CSW_Constants">
         </activity>

    </application>

< /manifest> 
```

![在此处输入图像描述](../Images/bc209bb4c289ac4a0588c55b93686234.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:19:27.860

无论是您的应用程序还是 Nexus 7，这都不是问题。它是 Jelly Bean 中的邮件应用程序。同样的事情也发生在带有 4.1 的摩托罗拉 Xoom 上。正如马特建议的那样，Gmail 应用程序确实知道如何处理 .apk。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:06:35.887

我不知道这是否是这样的答案，但您可能会发现导致问题的不是您的 APK - 我的 N7 拒绝打开通过电子邮件发送到我的**Exchange**电子邮件帐户的任何内容。

尝试将其发送到您的 Gmail 帐户 - 这对我总是有效。

# asp.net - 查询字符串参数没有值，只有键

> ID：12315816
> 
> 赞同：1
> 
> 时间：2012-09-07T09:55:35.247
> 
> 标签：asp.net, query-string

我对asp.net中的查询字符串有疑问：

带有查询字符串参数的标准查询字符串是`"www.mysity.url?key1=value1&key2=value2"`，但我只需要检查是否有查询字符串键......是的，正确的决定之一：`www.mysite.url?reset=true`，但是这对我来说多余的语法。

在标记中我使用类似的东西`"<a href='UrlHelper.GetResetUrl()'>Reset</a>"`，这个方法返回`"www.mysity.url?reset"`，但在用户端标记中我有“重置”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T10:21:59.537

如果您不指定参数的名称，则将其视为`null`.

它的价值是`reset`

因此，您必须按如下方式进行检查：

```
if(Request.QueryString[null]=="reset")
{
    //Take some reset action
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:13:12.070

所有处理查询字符串参数的代码都应该不区分大小写。浏览器（或互联网基础设施的一部分？）可能会转换这种情况。

检查查询字符串中是否存在重置参数的一种方法：

```
bool reset = Request.Url.Query.IndexOf("reset", StringComparison.CurrentCultureIgnoreCase) > -1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:13:12.050

一个快速而肮脏的解决方案是：

```
if(Request.Url.Query.Contains("?reset"))
{
    // ok we have a reset
} 
```

假设您有一个标准的重置调用，询问为：`www.mysity.url?reset`并且重置 url 没有其他参数。如果有，您可以简单地检查`reset`关键字。

这段代码`HttpContext.Current.Request["reset"]`总是返回 null，所以如果你想让它变得困难，下一个最好的办法是在 url 之后手动分析你的密钥。

# jpa - JPA：使用persist（）进行批量插入的问题

> ID：12315821
> 
> 赞同：1
> 
> 时间：2012-09-07T09:55:55.693
> 
> 标签：jpa

我正在使用下面的代码将记录插入数据库，

```
 EntityManagerFactory emf = getEmf();
    em = emf.createEntityManager();
    //Get the Transaction
    EntityTransaction trx = em.getTransaction();
    trx.begin();
    for ( int i=0;i<10000;i++) {
       //Create new Object and persist
        Customer customer = new Customer(.....);
        em.persist(customer);
        //Once its reach the 1000 size do commit
        if ( i % 1000 == 0 ) { 
            em.flush();
            em.clear();
            trx.commit();
        }
    }
    em.close(); 
```

当我在数据库中没有任何重复值（如新客户对象）时，上面的代码工作正常。如果我在数据库中有任何重复的客户值，我会收到“SQLIntegrityConstraintViolationException”。

在这里，我使用persist（）将记录插入数据库以解决性能问题。如果我使用合并（），它的工作正常。但它需要更多的时间来完成任务。

在persist() 的情况下，是否有任何选项可以识别哪个是重复记录（即获取重复记录信息）？

如果数据库中存在多个重复记录，是否有任何选项可以识别哪些是重复记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:35:28.107

我相信避免添加重复项是应用程序代码的责任。

您可以保存已发送到 persist() 的客户列表，然后在提交之前，使用 JPQL 查询查询数据库，例如：

```
SELECT COUNT(c)
FROM Customer c
WHERE c in (:customers) 
```

并将列表发送到客户绑定变量。检查结果，如果计数 > 0，则您知道客户已重复，并将在提交时导致 SQLIntegrityConstraintViolationException。

或者，在使用`em.find(customer, Customer.class)`持久调用将 em 添加到持久上下文之前使用调用。如果存在，请不要添加它。

# java - 从数据库中获取值并将其设置在 android spinner

> ID：12315823
> 
> 赞同：0
> 
> 时间：2012-09-07T09:55:57.703
> 
> 标签：java, android, mysql, android-spinner

嗨，如何从数据库中获取数据并将其设置在 android app 上的微调器中。我如何开发 dis。下面的代码是将数据从微调器更新到 android mysql 数据库。但我希望需要从数据库中获取数据并且获取的值是在 android app 上显示我的微调器值。我该如何开发这个..

这是我的安卓代码：

```
public class InsertionExample extends Activity {
private final String NAMESPACE = "http://xcart.com";
private final String URL = "http://192.168.1.168:8089/XcartLogin/services/update?wsdl";
private final String SOAP_ACTION = "http://xcart.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
String selectedItem;

static final String KEY_NAME = "orderid";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.change_status);
  /*  Intent in = getIntent();

    // Get XML values from previous intent
    String orderid = in.getStringExtra(KEY_NAME);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.textView1);

    lblName.setText(orderid); */

    Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    btninsert = (Button)findViewById(R.id.btn_insert1);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
             Intent in = getIntent();
             String orderid = in.getStringExtra(KEY_NAME);

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo unameProp =new PropertyInfo();
            unameProp.setName("Status");//Define the variable name in the web service method
            unameProp.setValue(selectedItem);//Define value for fname variable
            unameProp.setType(String.class);//Define the type of the variable

            request.addProperty(unameProp);
            PropertyInfo idProp =new PropertyInfo();
            idProp.setName("Orderid");//Define the variable name in the web service method
            idProp.setValue(orderid);//Define value for fname variable
            idProp.setType(String.class);//Define the type of the variable
            request.addProperty(idProp);

              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              envelope.setOutputSoapObject(request);
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

              try{
               androidHttpTransport.call(SOAP_ACTION, envelope);
                  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                 TextView result = (TextView) findViewById(R.id.textView2);
                  result.setText(response.toString());
             }
           catch(Exception e){

           }
              }
    });

    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());
    //Dynamically generate a spinner data 
    createSpinnerDropDown();

}

//Add animals into spinner dynamically
private void createSpinnerDropDown() {

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    //Array list of animals to display in the spinner
    List<String> list = new ArrayList<String>();

    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C");

    //create an ArrayAdaptar from the String Array
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    //set the view for the Drop down list
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //set the ArrayAdapter to the spinner
    spinner.setAdapter(adapter);
    adapter.notifyDataSetChanged();
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

}

public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

         selectedItem = parent.getItemAtPosition(pos).toString();

       }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }
} 
```

请帮助我..我该如何开发这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:25:16.990

你试过在你的微调器上使用 ArrayAdapter<?> 吗？我用过这个一次。

```
 private class ColorSpinner extends ArrayAdapter<Integer> {

    public ColorSpinner(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        return this.getView(position, convertView, parent);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // Here can I set a custom layout or view of each item in the spinner.
        TextView textView = new TextView(PincodeTextView.this.context);
        String message = Integer.toHexString(this.getItem(position)).toUpperCase();
        textView.setBackgroundColor(this.getItem(position));
        textView.setText("0x" + message);
        return textView;
    }
} 
```

然后我用它来加载微调器`ColorSpinner`：

```
final View colorbox = this.findViewById(R.id.edit_cell_dialog_color);
        if (colorbox instanceof Spinner) {
            ColorSpinner list = new ColorSpinner(context, android.R.layout.simple_spinner_item);

            // Load from my database the need items in my case a list of color codes.
            int[] colors = PincodeTextView.this.pincodeDB.getColors();

            int indexOfColor = 0;
            // Add each item into the Spinner.
            for (int i = 0; i < colors.length; i++) {
                list.add(colors[i]);
            }

            ((Spinner) colorbox).setAdapter(list);

        } 
```

# android - 随机读取文件夹内容

> ID：12315830
> 
> 赞同：2
> 
> 时间：2012-09-07T09:56:31.283
> 
> 标签：android, android-layout, android-intent, android-widget

我有这段代码，可以让我阅读手机图库的内容并随机滚动其内容。

```
public static Uri getRandomImage(ContentResolver resolver) {

    String[] projection = new String[] {
        BaseColumns._ID

    };

    Random rand = new Random();
    int p = 2 + rand.nextInt(8-2+1); 

    Uri uri = p == 0 ? Media.EXTERNAL_CONTENT_URI : Media.EXTERNAL_CONTENT_URI;

    Cursor cursor =  Media.query(resolver, uri, projection, null, MediaColumns._ID);
    if (cursor == null || cursor.getCount() <= 0) {
            return null;
    }

    cursor.moveToPosition(new Random().nextInt(cursor.getCount()));

    return Uri.withAppendedPath(uri, cursor.getString(0));
} 
```

但我想修改此代码以读取我设置的文件夹的内容。我怎样才能做到这一点？

非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:02:27.343

可能是最简单的方法之一：用数字命名文件夹中的每个文件，即（假设它们都是 jpg）将它们命名为 1.jpg、2.jpg、3.jpg 等。现在您需要做的就是生成一个介于 1 和文件夹中文件数之间的不同随机数数组，并通过将这些随机数与`.jpg`然后显示它们连接来生成一个 uri。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:03:12.870

也许您应该将 URI 设置为不同的值？

```
Random rand = new Random();
int p = 2 + rand.nextInt(8-2+1); 

Uri uri = p == 0 ? Media.EXTERNAL_CONTENT_URI : Media.EXTERNAL_CONTENT_URI; 
```

此代码始终将 URI 设置为 Media.EXTERNAL_CONTENT_URI ...无论整数 p 的值是什么...就我个人而言，实际上我什至看不到您在那里尝试做什么...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:51:45.243

获取随机文件或选定目录非常容易。

您可以使用此代码段：

```
private File getRandomFile(File root) {
    File[] files = root.listFiles();

    Random randomizer = new Random();       
    return files[randomizer.nextInt(files.length - 1)];
} 
```

如果需要返回方法`Uri`，可以更改返回和方法签名：

```
private Uri getRandomFile(File root) {
    File[] files = root.listFiles();

    Random randomizer = new Random();       
    File f = files[randomizer.nextInt(files.length - 1)];
    return Uri.fromFile(f); 
} 
```

至于`cursor`要求，您应该能够将此方法包装到另一个方法并相应地桥接请求。

# nginx - 如何修复 nginx 在任何标头测试工具上抛出 400 个错误的请求标头？

> ID：12315832
> 
> 赞同：40
> 
> 时间：2012-09-07T09:56:58.183
> 
> 标签：nginx

我有我的网站正在使用 nginx，并使用标头测试工具测试网站，例如[http://www.webconfs.com/http-header-check.php](http://www.webconfs.com/http-header-check.php)但每次它说下面的 400 bad request 都是该工具的输出. 虽然我所有的页面在浏览器中加载都非常好，当我在 chrome 控制台中看到它时显示状态代码 200OK。

```
HTTP/1.1 400 Bad Request => 
Server => nginx
Date => Fri, 07 Sep 2012 09:40:09 GMT
Content-Type => text/html
Content-Length => 166
Connection => close 
```

我真的不明白我的服务器配置有什么问题？

一些谷歌搜索建议使用增加缓冲区大小，我将其增加到以下内容：

```
large_client_header_buffers 4 16k; 
```

同样的结果仍然存在。

有人可以引导我走向正确的方向吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-06-25T05:31:36.540

正如 Maxim Dounin 在[上述评论](https://stackoverflow.com/questions/12315832/how-to-fix-nginx-throws-400-bad-request-headers-on-any-header-testing-tools/17289826#comment16555393_12315832)中所说：

> 当 nginx 返回 400（错误请求）时，它会将原因记录到“信息”级别的错误日志中。因此，找出正在发生的事情的一个明显方法是配置 [error_log](http://nginx.org/en/docs/ngx_core_module.html#error_log) 以在“信息”级别记录消息，并在测试时查看错误日志。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-02-08T22:50:40.623

是的，按照 Emmanuel Joubaud 的建议更改 error_to 调试级别（编辑 /etc/nginx/sites-enabled/default ）：

```
 error_log /var/log/nginx/error.log debug; 
```

然后在重新启动 nginx 后，我使用 uwsgi 进入了我的 Python 应用程序的错误日志：

```
 2017/02/08 22:32:24 [debug] 1322#1322: *1 connect to unix:///run/uwsgi/app/socket, fd:20 #2
        2017/02/08 22:32:24 [debug] 1322#1322: *1 connected
        2017/02/08 22:32:24 [debug] 1322#1322: *1 http upstream connect: 0
        2017/02/08 22:32:24 [debug] 1322#1322: *1 posix_memalign: 0000560E1F25A2A0:128 @16
        2017/02/08 22:32:24 [debug] 1322#1322: *1 http upstream send request
        2017/02/08 22:32:24 [debug] 1322#1322: *1 http upstream send request body
        2017/02/08 22:32:24 [debug] 1322#1322: *1 chain writer buf fl:0 s:454
        2017/02/08 22:32:24 [debug] 1322#1322: *1 chain writer in: 0000560E1F2A0928
        2017/02/08 22:32:24 [debug] 1322#1322: *1 writev: 454 of 454
        2017/02/08 22:32:24 [debug] 1322#1322: *1 chain writer out: 0000000000000000
        2017/02/08 22:32:24 [debug] 1322#1322: *1 event timer add: 20: 60000:1486593204249
        2017/02/08 22:32:24 [debug] 1322#1322: *1 http finalize request: -4, "/?" a:1, c:2
        2017/02/08 22:32:24 [debug] 1322#1322: *1 http request count:2 blk:0
        2017/02/08 22:32:24 [debug] 1322#1322: *1 post event 0000560E1F2E5DE0
        2017/02/08 22:32:24 [debug] 1322#1322: *1 post event 0000560E1F2E5E40
        2017/02/08 22:32:24 [debug] 1322#1322: *1 delete posted event 0000560E1F2E5DE0
        2017/02/08 22:32:24 [debug] 1322#1322: *1 http run request: "/?"
        2017/02/08 22:32:24 [debug] 1322#1322: *1 http upstream check client, write event:1, "/"
        2017/02/08 22:32:24 [debug] 1322#1322: *1 http upstream recv(): -1 (11: Resource temporarily unavailable) 
```

然后我查看了我的 uwsgi 日志，发现：

```
 Invalid HTTP_HOST header: 'www.mysite.local'. You may need to add u'www.mysite.local' to ALLOWED_HOSTS.
        [pid: 10903|app: 0|req: 2/4] 192.168.221.2 () {38 vars in 450 bytes} [Wed Feb  8 22:32:24 2017] GET / => generated 54098 bytes in 55 msecs (HTTP/1.1 400) 4 headers in 135 bytes (1 switches on core 0) 
```

并将[www.mysite.local](http://www.mysite.local)添加到 settings.py ALLOWED_HOSTS 解决了这个问题:)

```
 ALLOWED_HOSTS = ['www.mysite.local'] 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-09-29T19:21:08.337

我有同样的问题并尝试了一切。这`400`发生在上游代理上。调试记录显示完全没有。

问题出在重复`proxy_set_header Host $http_host`指令中，我最初没有注意到。删除重复项立即解决了问题。我希望`nginx`说的不是`400`这种情况，因为`nginx -t`根本没有抱怨。

PS 这发生在从较旧的 nginx 迁移到`1.10`较新的 nginx 时`1.19`。在它显然被容忍之前。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-10-24T15:34:59.070

只是为了清楚起见，在**/etc/nginx/nginx.conf**中，您可以在文件的开头放置该行

```
error_log /var/log/nginx/error.log debug; 
```

然后重启nginx：

```
sudo service nginx restart 
```

这样你就可以详细说明 nginx 在做什么以及为什么它返回状态码 400。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-07-08T03:08:03.183

原因可能是 URL 请求中的无效编码。例如 % 未编码传递。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-23T12:37:30.687

当 nginx 返回 400（错误请求）时，它会将原因记录到错误日志中，在“信息”级别，并在测试时查看错误日志。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-27T13:59:10.280

就我而言，问题是路由器中未打开端口 443

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-09-07T15:42:19.123

通常，Maxim Donnie 的方法可以找到原因。但是我遇到了一个 400 bad request 不会记录到 err_log。我在 tcpdump 的帮助下找到了原因

# filter - Makefile：如何应用等效项来过滤多个通配符

> ID：12315834
> 
> 赞同：6
> 
> 时间：2012-09-07T09:57:00.137
> 
> 标签：filter, makefile, wildcard

我正在编写一个 Makefile，但遇到了过滤器功能限制。实际上，过滤器只需要一个通配符。

我想做的是：我有一个文件列表，有些匹配正则表达式*blabla*，有些不匹配。但为此我需要 2 个通配符，因此我不能使用过滤功能。

我想将我的原始列表分成 2 个列表，一个包含所有包含 blabla 字符串的元素（等效过滤器），另一个包含不匹配的元素（等效过滤器）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T19:45:21.303

您可以在不运行任何外部命令的情况下执行此操作。定义两个宏

```
containing = $(foreach v,$2,$(if $(findstring $1,$v),$v))
not-containing = $(foreach v,$2,$(if $(findstring $1,$v),,$v)) 
```

现在你可以做

```
LIST := a_old_tt x_old_da a_new_da q_ty_we
LIST_OLD := $(call containing,old,$(LIST))
LIST_NOT_OLD := $(call not-containing,old,$(LIST)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T16:13:40.037

Make 最大的缺点之一是它处理正则表达式的能力很差。函数`filter`和`filter-out`单词中间找不到“旧”。我建议这个黑客：

```
NOT_OLD = $(shell echo $(LIST) | sed 's/[^ ]*old[^ ]* *//g')
OLD = $(filter-out $(NOT_OLD), $(LIST)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T16:31:14.280

您可以利用 shell 更高级的字符串处理功能。假设您有`bash`，您可以在您的 中使用以下内容`makefile`：

```
LIST := a_old_tt x_old_da a_new_da q_ty_we
LIST_NOT_OLD := $(shell l=($(LIST)); echo $${l[@]//*old*})
LIST_OLD := $(filter-out $(LIST_NOT_OLD),$(LIST)) 
```

[您可以在如何根据模式从数组中删除元素](https://stackoverflow.com/q/3578584/1380680)中找到有关 bash 字符串替换机制的说明。在 shell 调用中`$`需要使用双精度符号。`$`

# java - 无法在java中创建两种分别计数和读取文件的方法

> ID：12315838
> 
> 赞同：-1
> 
> 时间：2012-09-07T09:57:15.473
> 
> 标签：java, file-io, rowcount, file-read

尝试创建两种计算编号的方法时。行并读取文件的值，只有其中一个方法被执行，而另一个未执行，显示以下错误：线程“main”中的异常 java.lang.RuntimeException：java.io.IOException：读取错误

请看下面的代码：

```
package com.ibm.csvreader;
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.*;
import java.io.*;

public class CsvFileReader2  {

    public static class opencsvfile {

        HashMap <String , String> map= new HashMap <String, String> ();
        //csv file containing data
         // FileReader  strFile = new FileReader("C:/Users/vmuser/Desktop/SampleUpload.csv");
          //create BufferedReader to read csv file

         // BufferedReader br = new BufferedReader((strFile));
          String strLine = "";
          int lineNumber ; 
         public void  countrows(FileInputStream fstream) throws Exception{
             DataInputStream strFile  = new DataInputStream(fstream);
             BufferedReader br = new BufferedReader( new InputStreamReader (strFile));
              lineNumber =0;
             while( (strLine = br.readLine()) != null) {
                  lineNumber++;
                }
             System.out.println("no.of rows are :" +lineNumber);
             br.close();
         }
             public void readfile(FileInputStream fstream) throws Exception{
                 DataInputStream strFile  = new DataInputStream(fstream);
                 BufferedReader br = new BufferedReader( new InputStreamReader (strFile));
                 lineNumber =0;
                 while( (strLine = br.readLine()) != null) {
                      lineNumber++;
                      String[] tokens = strLine.split(","); 
                      String key = tokens[0].trim(); 
                      String nodes = tokens[1].trim(); 
                      map.put(key, nodes);

                             }
                 System.out.println("map is" + map );
                 br.close();
                  System.out.println("File is Closed");
         }
    }
    public static void main(String[] args) throws IOException {
        File fl = new File ("C:/Users/vmuser/Desktop/SampleUpload.csv");
        FileInputStream fstream = new FileInputStream(fl);

         opencsvfile f=new opencsvfile();
         try {
            f.countrows(fstream);

             f.readfile(fstream);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }

    }

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:56:45.070

只需稍作修改即可完成工作：

```
package com.ibm.csvreader;
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.*;
import java.io.*;

public class CsvFileReader2  {

   public static class opencsvfile {

        HashMap <String , String> map= new HashMap <String, String> ();
        //csv file containing data
         // FileReader  strFile = new FileReader("C:/Users/vmuser/Desktop/SampleUpload.csv");
          //create BufferedReader to read csv file

         // BufferedReader br = new BufferedReader((strFile));
          String strLine = "";
          int lineNumber ; 
         public void  countrows(FileInputStream fstream) throws Exception{
             DataInputStream strFile  = new DataInputStream(fstream);
             BufferedReader br = new BufferedReader( new InputStreamReader (strFile));
              lineNumber =0;
             while( (strLine = br.readLine()) != null) {
                  lineNumber++;
                }
             System.out.println("no.of rows are :" +lineNumber);
             br.close();
         }
             public void readfile(FileInputStream fstream) throws Exception{
                 DataInputStream strFile  = new DataInputStream(fstream);
                 BufferedReader br = new BufferedReader( new InputStreamReader (strFile));
                 lineNumber =0;
                 while( (strLine = br.readLine()) != null) {
                      lineNumber++;
                      String[] tokens = strLine.split(","); 
                      String key = tokens[0].trim(); 
                      String nodes = tokens[1].trim(); 
                      map.put(key, nodes);

                             }
                 System.out.println("map is" + map );
                 br.close();
                  System.out.println("File is Closed");
         }
    }
    public static void main(String[] args) throws IOException {
        File fl = new File ("C:/Users/vmuser/Desktop/SampleUpload.csv");
        FileInputStream fstream = new FileInputStream(fl);

         opencsvfile f=new opencsvfile();
         try {
            f.countrows(fstream);

           fstream = new FileInputStream(fl);//include this line

             f.readfile(fstream);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
       finally{
          if(fstream!=null)
                fstream.close();//be sure to close all streams at last
      }

    }

         } 
```

关闭所有其他流。上面的代码对你有用。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:57:45.237

当您关闭 BufferedReader 时，它也会关闭嵌套类，包括 FileInputStream。

而不是关闭它，您应该尝试并 reset() 它以从头开始重新读取它。

或者您必须重新打开 FileInputStream。

# c# - 为什么 DatabaseGeneratedAttribute 不能与 Guid 一起使用？

> ID：12315840
> 
> 赞同：2
> 
> 时间：2012-09-07T09:57:30.510
> 
> 标签：c#, .net, entity-framework, entity-framework-4

```
 [Required, Key, DatabaseGenerated(DatabaseGeneratedOption.Computed)]  
public virtual System.Guid ID
    {
        get;
        set;
    } 
```

我已经在数据库字段中使用了 newid() 并且还尝试了 DatabaseGeneratedOption.Identity，但我仍然进入`"00000000-0000-0000-0000-000000000000"`了数据库。

# licensing - LGPL小通知？

> ID：12315849
> 
> 赞同：5
> 
> 时间：2012-09-07T09:57:45.370
> 
> 标签：licensing, gpl, lgpl

对于 GPL 程序，我们可以在程序开头添加一条小提示：( [http://www.gnu.org/licenses/gpl-3.0.en.html](http://www.gnu.org/licenses/lgpl.html) )

```
<one line to give the program's name and a brief idea of what it does.>
Copyright (C) <year>  <name of author>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>. 
```

但是，在 LGPL 的页面上没有提供等效项：[http ://www.gnu.org/licenses/lgpl.html](http://www.gnu.org/licenses/lgpl.html)

那么 LGPL 程序的 GPL 通知的等价物是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T20:10:52.607

根据[http://www.gnu.org/licenses/gpl-howto.html](http://www.gnu.org/licenses/gpl-howto.html)

> 此声明应靠近每个源文件的开头，靠近版权声明。使用 Lesser GPL 时，在所有三个位置的“General”之前插入单词“Lesser”。使用 GNU AGPL 时，在所有三个位置的“General”之前插入单词“Affero”。

其中“此声明”是您原始问题中发布的 GPL 小通知。

# jquery - 如何在jQuery中检查多个输入框？

> ID：12315854
> 
> 赞同：0
> 
> 时间：2012-09-07T09:57:57.817
> 
> 标签：jquery, html

更新。

在我的购物车页面上有一个更新按钮，我想检查购物车中的所有项目，看看它们是否超过 1 而不是 0 - 所有输入框如下所示：

```
Apple £4
<input type="text" size="3" value="1" name="quantity[50:YToyOntpOjIyNztzOjI6IjE3IjtpOjIyODtzOjI6IjIxIjt9]">

Orange £6
<input type="text" size="3" value="1" name="quantity[50:YToyOntpOjIyNztzOjI6IjE3IjtpOjIyODtzOjI6IjIewrew]"> 
```

我决定使用嵌套的 .css 类而不是名称，因为它始终是唯一的。

```
var errorQty=0;
$(document).ready(function () { 
    var errorQty=0;
    // this is an input box, more than one on the page
    var QtyItems = $('#ShopTable tbody tr td input');

    if(QtyItems=="0" || QtyItems=="1") {
        QtyItems.addClass("errorform");
        errorQty=1;
    } else {
        QtyItems.removeClass("errorform");
    }

    if (errorQty==1){
    } else {    
        $('#updateOrder').click(function () {       
            $('#updateOrderLoader').slideDown("fast");
            document.basket.submit();
            return false;
        });
    }
}); 
```

这是我的按钮。我希望代码仅在单击此按钮时才起作用，而不是在加载时！

```
<a href="#updateOrder" id="updateOrder" title="Update Cart"><img src="//cdn.com/cart/btnUpdate.png" alt="Update Cart" title="Update Cart"/></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:04:29.197

您可以遍历输入元素列表：

```
$('#.table.ShopTable tbody tr td input')
    .each(function(idx, el) {
              if (el.val() == '1' || el.val() == '0') {
                 el.addClass("errorform");
                 ...
              }
          }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:05:00.943

# 按钮

```
<a onclick="goUpdate()" href="#updateOrder"><img src="//cdn.com/cart/btnUpdate.png"/></a> 
```

# jQuery

```
var form_flag = 0;

function goUpdate() {

    var Items = $("#submitQty");

    if ($(Items).val() == "" || $(Items).val() == "1" || $(Items).val() == "0") {
        $(Items).addClass("errorform");
        form_flag = 1;
    } else {
        $(Items).removeClass("errorform");
    }
    // ALL INFORMATION GOOD ..
    if (form_flag == 1) {
        // NULL CANNOT SUBMIT
    } else {
        var cartForm;
        cartForm = document.getElementById("basket"); // enter the ID or Name or class of your form
        cartForm.submit();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:08:33.647

您的代码中几乎没有错误：

1)`$('#.table.ShopTable tbody tr td input');`应该是`$('table.ShopTable tbody tr td input');`

2）这里`if (errorQty=1){`应该是`if (errorQty == 1){`

3）控件是空的，所以你可以这样做：

```
if (errorQty != 1){ // if errorQty is not 1. 
```

然后将所有内容包装在按钮操作中：

```
$('#updateOrder').on('click', function() {

    ...

}); 
```

它工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:08:49.220

你可以试试这个

```
$('#updateOrder').on("click", function(e){
    e.preventDefault();
    var errorQty=0;
    var QtyItems = $('table.ShopTable tbody tr td input');
    $.each(QtyItems, function(){
        var _this = $(this);
        if(_this.val()=="0" || _this.val()=="1") {
            _this.addClass("errorform");
            errorQty=1;
         } else {
             _this.removeClass("errorform");
         }
    });
    if (errorQty==0){
         $('#updateOrderLoader').slideDown("fast");
         document.basket.submit();
         return false;
    }
}); 
```

# php - PHP Excel Reader - 获取背景颜色

> ID：12315855
> 
> 赞同：1
> 
> 时间：2012-09-07T09:57:58.670
> 
> 标签：php, excel

我正在使用 phpexcelreader：

[http://sourceforge.net/projects/phpexcelreader/](http://sourceforge.net/projects/phpexcelreader/)

与我尝试过的所有其他方法相比，它工作得很好，但我正在努力寻找一种方法来获取单元格的背景颜色，或者说老实说任何颜色格式。

有谁知道如何使用此类，或者如何将其添加到此类中？

肯定不会太难吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:01:10.433

假设这`$data`是您可以使用的 phpExcelReader 对象：

```
$data->bgColor($row,$col,$sheet=0); 
```

以`#FFFFFF`格式返回。

我想你可以在这里找到一些好的文档：[http ://code.google.com/p/php-excel-reader/wiki/Documentation](http://code.google.com/p/php-excel-reader/wiki/Documentation)

根据用户评论，更新后的语法是：

```
$bgcolor = $xls->colors[$xls->bgColor($y,$x,$sheet)]; 
```

文档中没有涉及。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-05T00:02:32.237

Fluffeh，有一个很好的观点。我假设问题出在`php-excel-reader`您下载的版本中，它肯定是过时的或者它在 2.2 之前的版本。

![在此处输入图像描述](../Images/f70fc1790ab0553cc10f28bf3cbf6111.png)

因此，请访问[https://code.google.com/p/php-excel-reader/downloads/list](https://code.google.com/p/php-excel-reader/downloads/list)并下载最新版本以在生产中使用该功能。:)

同样在 2.21 版本中，它看起来像这样：

![excel_reader2.php 2.21 版](../Images/6505c36cc0494109cda18d55f122e373.png)

同样在 2.2 版本中，它看起来像这样：

![excel_reader2.php 2.2 版](../Images/d5e1e6e2c05639586f7dfd218ef207f4.png)

我希望它也会对某人有所帮助:)。快乐编程。

# php - 用于显示数据库信息的ajax

> ID：12315857
> 
> 赞同：1
> 
> 时间：2012-09-07T09:58:19.113
> 
> 标签：php, ajax, database, monitoring

我有一个用于聊天的脚本，它使用了 Ajax，

我想做一个监控脚本，以便管理员查看用户之间的所有交流。

问题是我没有找到任何脚本来解释如何在不重新加载页面的情况下从数据库接收数据。

如果有人可以帮助我找到该脚本或给我一个构建它的教程，我会很高兴。

接受我最大的尊重。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:59:12.413

您正在使用 ajax .. ajax 的整个概念不必重新加载页面...

这项工作的最佳工具是：

*   网络套接字。更少的开销。2路通讯。缺点：难以实现且不跨浏览器
*   服务器发送的事件。更少的开销。1路通讯，无重复请求。缺点：不能跨浏览器
*   只是简单的 ajax 轮询......效率较低，开销更大，请求很多，但它可以在任何地方工作。

Socket.io（为 nodeJS 编写）可能是最适合这项工作的。它为您利用正确的传输（websockets、longpolling、服务器发送事件、flashsockets、ajax 轮询），并为您提供最佳性能。

以下是几个 php js 实现示例：

使用服务器发送的 DOM 事件（[不是跨浏览器](http://caniuse.com/#search=server)）：每 3 秒更新一次 +/-

```
//javascript:
var source = new EventSource('updates.php');
source.onmessage = function (event) {
  console.log(event.data);
};

//php server side:
<?php
header("Content-Type: text/event-stream\n\n");
//..perform queries and put it in $data..
echo "data: " . json_encode($data) . "\n";
?> 
```

使用 jQuery ajax 请求：将每 1000 毫秒发送一个请求

```
//javascript: 
var interval_id = setInterval(function(){
    $.ajax({
      type: "POST",
      url: "updates.php",
      success: function(data){
        console.log("Data: ", data);
      }
    });
}, 1000); //last param is the interval time in ms

//php server side:
<?php
//..perform queries and put it in $data..
echo json_encode($data) . "\n";
?> 
```

使用 phpWebsockets：[lib + codesample](http://code.google.com/p/phpwebsocket/)

# android - 如何将印地语、马拉地语文本保存在文件中并阅读

> ID：12315862
> 
> 赞同：0
> 
> 时间：2012-09-07T09:58:36.203
> 
> 标签：android

我需要将来自服务器的信息保存为印地语/马拉地语（其中之一）。我需要将该信息保存在我的应用程序文件中，并再次根据需要从应用程序中读取该信息。现在我正在获取该信息，但在阅读时显示`???`。请帮助我。此外，我需要在编辑文本、文本视图、用户输入和印地语/马拉地语的对话框中显示印地语数据。请指导我。先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:11:42.867

您应该尝试使用`OutputStreamWriter`which 允许我们设置字符编码。

```
String txt="मुझे जानकारी हिंदी / मराठी को बचाने की जरूरत है.";

OutputStreamWriter writer=new OutputStreamWriter(new FileOutputStream(file),"UTF-8");
writer.write(txt);
writer.close(); 
```

# android - 如何在looper中使用阻塞调用的interrupta线程

> ID：12315869
> 
> 赞同：0
> 
> 时间：2012-09-07T09:59:08.110
> 
> 标签：android, multithreading

嗨，伙计，我有一个使用弯针的线程。在looper中，当他接收到消息时，他调用了一个阻塞方法（样式读取套接字）。怎样才能写出方法StopThread来停止这个线程来终止他呢？我必须在处理程序上调用退出或中断线程吗？这是代码：

```
 class LooperThread extends Thread {
          public Handler mHandler;

          public void run() {
              Looper.prepare();

              mHandler = new Handler() {
                  public void handleMessage(Message msg) {
                  try{
                 blocking call read
                  }catch(Interrupet Exception e) {  }
                  }
              };

              Looper.loop();
          }
public void stopThread(){    ??? }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:06:46.050

称呼

```
thread.interrupt() 
```

中断线程。编辑：您将不得不在线程上发布一个可运行的。

```
looperthread.handler.postrunnable(new Runnable(){

run(){
  Looper.myLooper().quit();
}
}); 
```

# php - 在 PHP 5 中转义 XML

> ID：12315870
> 
> 赞同：0
> 
> 时间：2012-09-07T09:59:15.890
> 
> 标签：php, xml, xml-parsing, escaping

我正在为我的网站使用外部脚本，我发现它在尝试生成 XML 代码时似乎存在语法问题。

第二行没有引号，这会使页面崩溃。我该如何解决？为什么它对其他人有效？是关于PHP版本的吗？

```
$h->xmlrequest = '<?xml version="1.0"?>'; 
$h->xmlrequest .= <<<END 
<a:searchrequest xmlns:a="DAV:" xmlns:s="http://schemas.microsoft.com/exchange/security/"> 
  <a:sql> 
     SELECT "DAV:displayname" 
     ,"urn:schemas:httpmail:subject" 
     FROM "$exchange_server/Exchange/aaaaa/inbox" 
  </a:sql> 
</a:searchrequest> 
END; 
```

该问题使 PHP 文件无法执行，因此没有显示任何外部输出。即使只是尝试这样做也会导致崩溃：

```
$h->xmlrequest = '<'.'?xml version="1.0"?'.'>'; 
$h->xmlrequest .= <<<END 
END; 
```

显示错误这是我得到的错误：

```
Parse error: syntax error, unexpected T_SL in C:\inetpub\wwwroot\fromMail\index2.php on line 23 
```

第 23 行是 <<< END 之一

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:03:33.280

改变：

```
$h->xmlrequest = '<?xml version="1.0"?>'; 
```

到：

```
$h->xmlrequest = '<'.'?xml version="1.0"?'.'>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:25:52.037

第一个 <<< END 后有一个空格

问题解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:29:05.847

哦，这个真的很难发现：你在行尾有多余的空格`<<<END`：

```
$h->xmlrequest .= <<<END 
//----------------------^ 
```

因此结局

```
END; 
```

不再匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:02:50.013

也许换行

```
$h->xmlrequest = '<?xml version="1.0"?>'; 
```

到

```
$h->xmlrequest = '<' . '?xml version="1.0"?' . '>'; 
```

会做的伎俩，因为解析器认为这`?>`意味着 PHP 脚本的结束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T10:04:55.067

您应该将`$exchange_server`变量名用大括号括起来，否则尽管 PHP 会尝试解析它，但它可能会受到它周围的代码的影响。

即在您的情况下，$exchange_server 之后的斜杠字符可能会使 PHP 解析器感到困惑。

所以...

```
$h->xmlrequest .= <<<END 
<a:searchrequest xmlns:a="DAV:" xmlns:s="http://schemas.microsoft.com/exchange/security/"> 
  <a:sql> 
     SELECT "DAV:displayname" 
     ,"urn:schemas:httpmail:subject" 
     FROM "{$exchange_server}/Exchange/aaaaa/inbox" 
  </a:sql> 
</a:searchrequest> 
END; 
```

大括号将确保变量被正确解析，无论它周围是什么。

希望有帮助。

# php - 谷歌正在索引 Apache 测试页面

> ID：12315871
> 
> 赞同：0
> 
> 时间：2012-09-07T09:59:16.710
> 
> 标签：php, apache, .htaccess, google-index

假设我有一个网站，`example.com`. 但是这个网站的内容在另一个域上，比如说`test.com/test`，重定向是使用`htaccess`文件发生的。

我已经设置了从to`301 redirection`重定向。问题是当我搜索时，我得到一个 Apache 测试页面，当我查询类似 site: for getting the Google crawled page，我得到一个错误。`test.com/test``example.com``example.com``example.com``403 Forbidden`

我该如何解决这个问题？该网站运行良好。该网站还在其他搜索引擎（即雅虎和必应）中正确编入索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:02:25.160

您可以使用它来阻止 Google 将该页面编入索引：

```
User-Agent: Googlebot
Disallow: / 
```

或者对于所有搜索引擎，这样：

```
User-Agent: *
Disallow: / 
```

被告知它将跳过整个域。如果它有一个特定的页面名称，比如说`index.htm`，你可以这样使用：

```
User-Agent: *
Disallow: /index.htm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:04:00.480

还可以到达测试页面吗？如果您单击 Google 中的链接，您会得到测试页面吗？

如果是这样，您仍然必须更改该 url 以便它重定向。

如果没有，Google 可能在您进行重定向之前已将其编入索引。稍等片刻，直到 Google 重新索引您的网站。这可能需要数小时到数天或数周，具体取决于您网站的流量、排名、先前更新的频率、月球位置、风速以及 Google 用于其算法的各种其他变量。：-/

# c++ - 如何使用 pantheios 创建日志文件？

> ID：12315875
> 
> 赞同：1
> 
> 时间：2012-09-07T09:59:31.057
> 
> 标签：c++, pantheios

我的问题类似于如何使用 pantheios 登录到文件中发布的问题？遵循这些步骤，但仍然无法使用 pantheios 库创建日志文件。它显示在控制台中，但未创建日志文件。

```
pantheios::log_NOTICE("log-1");
pantheios_be_file_setFilePath("pantheiosLog.txt", PANTHEIOS_BE_FILE_F_TRUNCATE,
    PANTHEIOS_BE_FILE_F_TRUNCATE, PANTHEIOS_BEID_ALL);
pantheios::log_NOTICE("log-2"); 
```

而且我也不知道如何使用 pantheios_be_file_init 和 pantheios_be_file_logEntry 函数。

# java - 有没有办法让 Guice 在 Guice.createInjector 期间快速失败

> ID：12315877
> 
> 赞同：7
> 
> 时间：2012-09-07T09:59:44.277
> 
> 标签：java, inversion-of-control, ioc-container, guice

我的项目使用[Guice](http://code.google.com/p/google-guice/)作为 IOC 容器，负责为大型对象图（主要是单例）提供依赖项（服务类）。有时，如果在构造过程中依赖项失败并且许多对象都需要此依赖项，则失败将一遍又一遍地发生，并将异常添加到 Guice `ProvisionException`。

我可以理解这种行为的合理性，因为它列出了为节省修复问题而发生的所有错误的列表。但是，我想禁用此功能和“快速失败”，因为在这种情况下重复失败是资源密集型的。此外，“ProvisionException”包含相同异常的列表。

我确实很欣赏这种行为是实现中不良做法的症状（气味）（即资源密集型对象创建），但由于依赖项是任何人都可以使用依赖项注入提供实现和插件的抽象，因此几乎无法防御它。

我想知道的是：-

**是否有一个参数可以让 Guice 在第一个异常时退出 Injector 创建？**

任何帮助将不胜感激。

编辑：

```
@Test
    public void guiceExample()
    {
        Injector injector = Guice.createInjector(new TestModule());
        try{
        IAmANeedyObject instance = injector.getInstance(IAmANeedyObject.class);
        }
        catch (ProvisionException e)
        {
            assertThat(e.getErrorMessages().size(),Is.is(2));
        }
    } 
```

此测试资产已引发两个异常

```
import com.google.inject.AbstractModule;
import com.google.inject.Inject;

public class TestModule extends AbstractModule {

    @Override
    protected void configure() {
        bind(IWasDesignedWithHonestIntent.class).to(NastyThrowingExample.class);
        bind(IMindMyOwnBusiness.class).to(SomeLucklessObject.class);
        bind(IAlsoMindMyOwnBusiness.class).to(SomeEquallyLucklessObject.class);
        bind(IAmANeedyObject.class).to(LowSelfEsteem.class);
    }
}

interface IWasDesignedWithHonestIntent {}

interface IMindMyOwnBusiness {}

interface IAlsoMindMyOwnBusiness {}

interface IAmANeedyObject {}

@Singleton
class NastyThrowingExample implements IWasDesignedWithHonestIntent {
    @Inject
    public NastyThrowingExample() throws LongSlowAgonisingDeathException {
        throw new LongSlowAgonisingDeathException("I am dying");
    }
}

class LongSlowAgonisingDeathException extends Exception {
    @Inject
    public LongSlowAgonisingDeathException(String message) {
        super(message);
    }
}

class SomeLucklessObject implements IMindMyOwnBusiness {
    @Inject
    public SomeLucklessObject(IWasDesignedWithHonestIntent designedWithHonestIntent) {
    }
}

class SomeEquallyLucklessObject implements IAlsoMindMyOwnBusiness {
    @Inject
    public SomeEquallyLucklessObject(IWasDesignedWithHonestIntent designedWithHonestIntent) {
    }
}

class LowSelfEsteem implements IAmANeedyObject {
    @Inject
    public LowSelfEsteem(IMindMyOwnBusiness iMindMyOwnBusiness, IAlsoMindMyOwnBusiness alsoMindMyOwnBusiness) {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:32:18.017

> 是否有一个参数可以让 Guice 在第一个异常时退出 Injector 创建？

恐怕不行，不行。

您将不得不继续使用像您的示例这样的代码。您可以随时在 Guice 团队的 Google 代码页面上向他们提出建议。

# android - GetApplication 在复合控件中或传递给复合控件

> ID：12315878
> 
> 赞同：0
> 
> 时间：2012-09-07T09:59:45.293
> 
> 标签：android

我有一个需要访问 Application 对象的复合控件。我的控件扩展了 LinearLayout，所以因为它不是一个 Activity，所以我不能调用 getApplication()。有没有办法可以从布局/视图中执行此操作或传递应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:01:09.860

当您调用 My Control Class 时，您必须在构造函数中传递**上下文。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:24:09.963

根据您需要 Application 对象的用途，您可能需要做几件事。

如果您需要特定的应用程序实例，您可以尝试将您的`Context`对象转换为`Activity`：

```
public class MyLinearLayout extends LinearLayout {
  private Application mApplication; 

  public MyLinearLayout(Context context, AttributeSet attrs) {
    super(context, attrs);

    //As this is a custom ViewGroup, Context will be an Activity, but just to make sure..
    if(context instanceof Activity)
        mApplication = ((Activity) context).getApplication();
    else
        throw new IllegalArguementException("Context must be an Activity");
  }
} 
```

上面的代码检查以确保传递给您的自定义视图的 Context 是一个 Activity，但实际上应该始终如此。

如果您只需要将您的应用程序对象用作“上下文”，那么您可以调用“context.getApplicationContext()”方法：

```
public class MyLinearLayout extends LinearLayout {
  private Context mAppContext; 

  public MyLinearLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    mAppContext = context.getApplicationContext();
  }
} 
```

# assembly - 将 32 位寄存器推入“16 位堆栈”

> ID：12315879
> 
> 赞同：2
> 
> 时间：2012-09-07T09:59:49.173
> 
> 标签：assembly, nasm

这有点像三个问题合二为一，无论如何这里是：

1-所以我一直在这里搜索我的问题的答案，有人从某处引用了这个：

> 堆栈段的地址大小属性决定堆栈指针大小（16、32 或 64 位）。当前代码段的操作数大小属性决定了堆栈指针的递减量（2、4 或 8 个字节）。

有人能以像我这样的汇编新手可以理解的方式向我解释吗？

2-问题是我创建了这个小堆栈：

```
setStack:                  ; setup a small stack at 0x9B000

  cli                      ; disable interrupts
  mov AX, 0x9000
  mov SS, AX
  mov SP, 0xB000
  sti                      ; re-enable interrupts 
```

由于我（最肯定缺乏）对 1 处的引用的理解，我假设这个堆栈有一个 16 位指针，并且 push/pop 指令在被调用时递减/递增 2 个字节？我假设正确吗？

3-假设我已经正确假设（即：即使我没有，也像我一样回答下一个问题）下一个语句将在堆栈上执行什么？

```
push ECX                   ; ECX is a 32 bit register 
```

在此先感谢 Stack Overflow 的善良居民。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:06:20.440

如果堆栈段设置为 16 位堆栈，则 push/pop 将引用 SP，并且堆栈应在两个字节边界上对齐。压入一个 16 位的寄存器会占用一个插槽，压入一个 32 位的寄存器会占用两个插槽。您可以使用以下代码自行验证这一点：

```
push eax
pop ax
pop bx 
```

如果堆栈段设置为 32 位堆栈，则 push/pop 将引用 ESP，并且堆栈应在四字节边界上对齐。压入一个 32 位寄存器将占用一个插槽。压入 16 位寄存器将导致堆栈未对齐。这是一件坏事。

以下 URL 是英特尔手册中推送指令规范的副本。我已经为推送指令附加了状态机。

[http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/vc266.htm](http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/vc266.htm)

```
IF StackAddrSize  32
THEN

IF OperandSize  32
THEN
ESP  ESP - 4;
SS:ESP  SRC; (* push doubleword *)
ELSE (* OperandSize  16*)
ESP  ESP - 2;
SS:ESP  SRC; (* push word *)
FI;

ELSE (* StackAddrSize  16*)

IF OperandSize  16
THEN
SP  SP - 2;
SS:SP  SRC; (* push word *)
ELSE (* OperandSize  32*)
SP  SP - 4;
SS:SP  SRC; (* push doubleword *)
FI;

FI; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:47:40.580

尝试一下！（看起来你在“你自己的操作系统”中，但可能有可用的 dos 吗？）

 `````
; nasm -f bin -o test32.com test32.asm
bits 16
org 100h

mov eax, 11112222h
push eax
pop ax
pop dx
call ax2hex
mov ax, dx
call ax2hex
ret

;-------------------
ax2hex:
    push cx
    push dx

    mov cx, 4           ; four digits to show

.top
    rol ax, 4           ; rotate one digit into position
    mov dl, al          ; make a copy to process
    and dl, 0Fh         ; mask off a single (hex) digit
    cmp dl, 9           ; is it in the 'A' to 'F' range?
    jbe .dec_dig        ; no, skip it
    add dl, 7           ; adjust
.dec_dig:
    add dl, 30h         ; convert to character

    push ax
    mov ah, 2           ; print the character
    int 21h
    pop ax

    loop .top

    pop dx
    pop cx
    ret
;-------------------------- 
````  `唯一重要的意见是 CPU 的意见！

最好的，弗兰克``

# java - PDF 和“海量”XMP 数据存储

> ID：12315883
> 
> 赞同：1
> 
> 时间：2012-09-07T10:00:23.330
> 
> 标签：java, itext, xmp

所以我有一个程序可以创建一个输出 PDF 文件，我想通过将元数据嵌入到其中来使其可读（通过我的程序）。这是相当多的数据。

有人建议我使用 XMP 格式执行此操作。但是，我不确定这是否会奏效。

如果您不想阅读所有这些内容，请跳至**最后一段**，如果您不理解问题，请返回此处...

我的文件可能有这样的结构：

```
Heading1
<indent>1.Question
<indent><indent>a)answer
<indent><indent>b)answer
<indent>2.Question
<indent><indent>a)answer
<indent><indent>b)answer
<indent><indent>c)answer
<indent>3.Question
<indent>4.Question
Heading2
<indent>1.Question
<indent>2.Question
<indent><indent>a)answer 
```

每个问题都有它的父标题，每个答案都有它的父问题。像这样的文件可以有无限数量的标题，每个标题无限数量的问题，以及每个问题 0 到 5 个答案。

为了让我的程序能够在它的 GUI 中组装相同的文件，它需要几条信息。

它需要知道：

*   标题数量（整数）

*   标题类型（布尔值）（标题不必只包含问题，所以这是必需的，但我在示例中省略了其他类型的标题以简化问题）

*   包含每个标题/问题/答案中的文本的字符串

按照示例，这就是我的可读文件的样子：

```
2                  //heading number
Q/4/headingText    //type of heading/number of question/content
2/questionText     //number of answers/content
answerText         //content
answerText         //etc...
3/questionText
answerText
answerText
answerText
0/questionText
0/questionText
Q/2/headingText
0/questionText
1/questionText
answerText 
```

如果我假设文件是​​逐行读取的，这是可能的。第一行将说明预期有多少个标题，第二行（以及每个标题行）将说明标题类型以及在下一个标题之前预期有多少问题。问题行将告诉有多少后续行包含答案内容。答案行将只包含内容。

所有这些都是为了说明我对“保存文件”的需求。

**最后一段**

XMP 能做到这一切吗？能够逐行读取属性并拥有一个附加多个值的属性，或者至少以某种方式将其划分为几个属性，以保持此功能？

最重要的问题是，XMP 读取器/写入器 (iText) 能否处理 XMP 文件的非固定大小？

我的替代方法是简单地将这些行附加在 PDF 文件末尾的某个位置（不要弄乱交叉引用表），并将它们注释掉（使用 %），然后在 Java 中创建一个特殊的阅读器来寻找并解析那些线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:51:23.890

这就是我解释你的问题的方式。

您想要创建一个人类可读的 PDF，并呈现标题文本、问题和可能的答案。

同时，您希望 PDF 可以被对 PDF 一无所知的程序读取。程序读取的内容不同于人类可以读取的内容，因为它具有某种结构。

我没有看到 PDF 的链接。我会将您希望机器可读的数据存储为 PDF 的附件，并让您的程序提取该附件。如果您的程序可以使用 iText，那么它就是小菜一碟。如果您的程序只能读取字节，那么您可以尝试不同的选项：

(1) 将数据存储为未压缩的流。通过添加某种可识别的长字符串作为第一行数据来查找未压缩的流（这或多或少是无法解释 PDF 语法的软件检测 XMP 流的方式）。

(2) 将数据存储为压缩流，但在压缩流的流字典中增加一个额外的条目。遍历 PDF 文件中的对象，查找具有该特定自定义键/值对的流字典，读取流并解压缩。

如果我误解了你的问题，请改写。

# python - 从BLOB mysql python写入文件

> ID：12315888
> 
> 赞同：2
> 
> 时间：2012-09-07T10:00:41.940
> 
> 标签：python, mysql, file, blob

我正在尝试从数据库中获取文件并将其写入磁盘。该文件存储为 BLOB。

现在我有以下代码：

```
#!/usr/bin/python
import MySQLdb

db2 = MySQLdb.connect(host="localhost",
                      user="root",
                      passwd="root",
                      db="digit")

cur = db2.cursor()
#get the name of the file
cur.execute("SELECT Name FROM ContentFiles WHERE ID=3")
nombre = cur.fetchone()
#open file and write into.
with open(nombre[0],"wb") as output_file:
    cur.execute("SELECT File FROM ContentFiles WHERE ID=3")
    ablob = cur.fetchone()
    output_file.write(ablob[0]) 
```

任何帮助，将不胜感激。谢谢 ：）

我调试并获取文件并将其写入磁盘，但是当我打开它时显示错误消息：

```
Not a JPEG file: starts with 0x2f 0x39 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T07:51:00.270

我找到了解决方案，我需要使用 decode('base64') ...这是一个简单的问题：/

```
cur = db2.cursor()
#get the file
cur.execute("SELECT mimetype,File,Name FROM ContentFiles WHERE ContentID=10414")
archivo = cur.fetchone()

imagen = open(archivo[2],'wb')
imagen.write(archivo[1].decode('base64'))
imagen.close() 
```

# watir - Watir-如何将鼠标悬停在任何 HTML 元素上

> ID：12315889
> 
> 赞同：2
> 
> 时间：2012-09-07T10:00:45.940
> 
> 标签：watir

我有一个 Web 应用程序，在该应用程序中，当我们将鼠标移到该应用程序上时，主菜单会打开（我不想单击该主菜单，因为单击该菜单会将页面重定向到另一个页面）。将鼠标悬停在它上面会打开一个菜单列表，我将能够选择菜单项，但无法将鼠标悬停在主菜单上，以便出现下拉菜单列表。

> > fire_event("onmouseover") 不起作用，它只是闪烁该菜单（元素），但没有打开下拉菜单列表。

谁能给我解决方案我怎样才能将鼠标悬停在任何 HTML 元素上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T21:55:54.983

嗯，有`#hover`方法：

```
browser.element(:how => what).hover 
```

这也可能有所帮助：[如何找出触发了哪些 JavaScript 事件？](https://stackoverflow.com/questions/3787555/how-to-find-out-which-javascript-events-fired)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-20T13:55:55.027

由于某种原因`.hover`对我不起作用，但是这个可以：

```
browser.element(how: what).fire_event(:mouseover) 
```

不知道为什么。

# css - 页面滚动时 IE7 上的问题。文本不正确

> ID：12315896
> 
> 赞同：0
> 
> 时间：2012-09-07T10:01:12.807
> 
> 标签：css, html, internet-explorer-7, twitter-bootstrap

当我滚动页面时，我仅在 IE7 上遇到此问题：某些部分的文本未正确滚动，尽管水平线正在滚动。

可能是加载问题，但我需要解决这个问题。

技术是 HTML5、引导程序、CSS3。框架是 MVC。

![在此处输入图像描述](../Images/1f8663a63e05f0dc2864e3515c7e00e2.png)

查看`Search Again`上图中的文字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T10:37:17.153

这听起来像一个 IE7 文本重绘错误：

[http://zomigi.com/blog/ie-7-button-text-redraw-bug/](http://zomigi.com/blog/ie-7-button-text-redraw-bug/)

[http://www.lifeathighroad.com/web-development/fixed-ie7-button-text-redraw-bug/](http://www.lifeathighroad.com/web-development/fixed-ie7-button-text-redraw-bug/)

尝试将此添加到按钮 css：

```
overflow: visible 
```

如果这不起作用试试这个：

```
border: 1px solid transparent; 
```

# windows-7 - 实际上可以在德语键盘中插入快捷方式“CM-\”吗？

> ID：12315897
> 
> 赞同：2
> 
> 时间：2012-09-07T10:01:33.740
> 
> 标签：windows-7, emacs, keyboard-shortcuts

目标：我想使用`indent-region`默认快捷键`C`- `M`-的功能`\`。

问题：我使用德语键盘布局。要插入 "\" 我必须输入`C`- `M`-`ß`或`AltGr`- `ß`，因为 "ß" 被 "?" 重载了。和“\”（参见：右上角的[QWERTZ 布局）。](http://en.wikipedia.org/wiki/File:KB_Germany.svg)

问题：是否可以在不调整德语键盘上的emacs 或操作系统的情况下输入快捷方式`C`？`M``\`

如果不是，我只会将快捷方式更改为易于访问的东西。我希望它工作的主要原因是它在默认的 emacs 安装中开箱即用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:50:36.690

我遇到过这个问题，发现以下信息[对 emacswiki.org 上的“Alt Gr Key”页面很有帮助](http://www.emacswiki.org/emacs/AltGrKey)：-

> Emacs 键在 MS Windows 上似乎是“隐藏的”（可能只是），因为**AltGr + LeftControl + key**只是**AltGr + key**。
> 
> 解决方案 1：使用正确的控件
> 
> 但是您甚至可以在 MS Windows 上键入这些键！诀窍是您必须键入**AltGr**作为第一个键，并且**Ctrl**必须是**右**控制键，而不是左控制键。

在德语键盘上进行试验后，我可以执行`C-M-\`如下操作：`AltGr+RCtrl+M+\`，`RCtrl`我的右 Ctrl 键在哪里，`M`我的左/唯一 Alt 键在哪里，`\`我的 ß?\ 键在哪里。（的值为`w32-alt-is-meta`。`t`）

这个键和弦很麻烦，所以最好`C-M-ß`按照@OlegPavliv 的建议定义组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T10:31:55.417

将以下内容添加到您的 .emacs

```
(define-key (current-global-map) (kbd "C-M-ß") 'indent-region) 
```

这样它将缩进 CM-ß 上的区域

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:09:25.260

按`C-M`。

发布。

按`AltGr-ß`产生\

为我工作。问题出在哪里？

# wpf - 如何更改 WPF 控件的缩放但仍占用全部空间？

> ID：12315902
> 
> 赞同：0
> 
> 时间：2012-09-07T10:02:01.867
> 
> 标签：wpf

在 WPF 应用程序中，我正在使用 Web 浏览器控件（实际上它是 awesomium，但我不确定这是否重要）。此控件正在使用某种互操作。

我希望我的应用能够“缩小”网页内容。网页内容应减少到其大小的 50%。

如果我`ScalTransform`只应用，浏览器控件会按预期缩小（一切都更小），但控件的可见边界也会减小。

我希望 Web 控件占据其容器的全部可用位置。如何做到这一点？

我现在已经做到了：

```
<Canvas SizeChanged="Canvas_SizeChanged"
        MinWidth="100"
        MinHeight="100">
    <Custom:WebControl x:Name="browser"
                       RenderTransformOrigin="0,0"
                       Width="100"
                       Height="100">
        <Custom:WebControl.RenderTransform>
            <TransformGroup>
                <ScaleTransform ScaleX="0.5"
                                ScaleY="0.5" />
                <SkewTransform />
                <RotateTransform />
                <TranslateTransform />
            </TransformGroup>
        </Custom:WebControl.RenderTransform>           
    </Custom:WebControl>
</Canvas> 
```

在后面的代码中：

```
private void Canvas_SizeChanged(object sender, SizeChangedEventArgs e)
{
    browser.Width = e.NewSize.Width * 2;
    browser.Height = e.NewSize.Height * 2;
} 
```

这是有效的，有点低效。我想知道是否有更好的地方可以做到这一点（纯 XML？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:14:10.913

此答案适用于 1.7 版 RC3（可[在此处](http://awesomium.com/download/)获得）。

*   Awesomium.NET WPF`WebControl`实际上是纯 WPF（`ViewType`设置为时`Offscreen`，这是默认值）。
*   [在此处](http://forums.awesomium.com/viewtopic.php?f=7&t=110&p=199&hilit=Zoom#p199)查看您正在尝试执行的操作的示例。

# asp.net - WebService - xsd:日期字段

> ID：12315904
> 
> 赞同：0
> 
> 时间：2012-09-07T10:02:09.760
> 
> 标签：asp.net, web-services, soap, xsd

我正在为 ASP.Net v3.5 中的客户创建 Web 服务。目前，我们有一个类似于以下内容的对象，该对象由其中一种 Web 服务方法返回：

```
public class blah
{
 public DateTime datetime;
 public int someData;
} 
```

现在，客户向我发送了以下请求：

> 在您的架构中，您有一个 xsd:dateTime 条目。你能把它分成两个字段，一个是日期，另一个是时间。使用 xsd:date 和 xsd:time 作为对象类型应该没问题。

显然，我可以按如下方式更改类：

```
public class blah
{
 public DateTime date;
 public DateTime time;
 public int someData;
} 
```

但我认为这实际上会产生两个“xsd：DateTime”字段，而不是他要求的每个字段。

请您建议我如何实现客户期望的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:09:52.980

在 .NET 中没有`Time`对象，这是`DateTime`对象的一部分。

我会继续拥有两个`strings`对象

```
public class blah
{
    public string date;
    public string time;
    public int someData;
} 
```

然后很快将它们解析为 DateTime 对象

```
DateTime dateOut;
if(DateTime.TryParseExact(
          string.Format("{0} {1}", date, time), 
          "yyyy-MM-dd HH:mm", 
          null, 
          System.Globalization.DateTimeStyles.None, 
          out dateOut)) 
{
   // date is valid
}
else
{
    // send error back saying that DATE or/and Time needs to follow a pattern
} 
```

* * *

要使属性呈现特定类型，您可以使用以下方法进行装饰：

```
public class blah
{
    [XmlElement(DataType = "Date")]
    public string date;
    [XmlElement(DataType = "Time")]
    public string time;
    public int someData;
} 
```

但是有些论坛认为.NET 在这方面存在一些问题……试一试并使用 Fiddler 自己测试它，例如模拟对您的服务的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:19:53.420

```
public class Blah
{
 [System.Xml.Serialization.XmlElement(Namespace="http://www.w3.org/2001/XMLSchema", DataType="time")]
 public DateTime time;

 [System.Xml.Serialization.XmlElement(Namespace="http://www.w3.org/2001/XMLSchema", DataType="time")]
 public DateTime date;

 public int someData
} 
```

这似乎正是我正在寻找的！

# c# - Open/SaveFileDialog 类及其在 WPF 表单中的使用之间的区别

> ID：12315908
> 
> 赞同：16
> 
> 时间：2012-09-07T10:02:15.943
> 
> 标签：c#, .net, wpf, winforms, visual-studio-2010

很好奇，但只是想知道是否有人知道使用之间的区别：

System.Windows.Forms.SaveFileDialog（在程序集 System.Windows.Forms.dll 中）和 Microsoft.Win32.SaveFileDialog（在程序集 PresentationFramework.dll 中）？

我在 WPF 表单中使用 PresentationFramework.dll 版本，但目前正在重新使用表单中的一些旧代码，其中包括显示 System.Windows.Forms.dll 版本并想知道是否：

1.  他们的外表有细微的差别吗？
2.  使用 System.Windows.Forms.SaveFileDialog 的任何互操作性问题？还是这两个都只是win32对话框？
3.  这是否与使用 Microsoft.Win32.SaveFileDialog在 windows vista 中存在[问题有关？](http://blog.kirupa.com/?p=119)

提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-07T10:20:56.713

这是一个更好的解释（可能已经过时/与 .NET 的更高版本无关）：

[http://www.thomasclaudiushuber.com/blog/2008/04/12/vistas-savefiledialog-and-openfiledialog-in-wpf/](http://www.thomasclaudiushuber.com/blog/2008/04/12/vistas-savefiledialog-and-openfiledialog-in-wpf/)

* * *

虽然它们基本上做同样的事情......它们是不同的包装......围绕 WIN32 功能。

*   [WPF 是否有本机文件对话框？](https://stackoverflow.com/questions/1482486/does-wpf-have-a-native-file-dialog)

*   [http://rpelepei.blogspot.co.uk/2010/01/using-open-file-dialog-window-in-wpf.html](http://rpelepei.blogspot.co.uk/2010/01/using-open-file-dialog-window-in-wpf.html)（请参阅为什么要麻烦使用 Win32 版本？）

但是，在 WPF ( `Microsoft.Win32`) 版本的`SaveFileDialog`.

*   [http://blog.kirupa.com/?p=119](http://blog.kirupa.com/?p=119)

*   [WPF 中的 SaveFileDialog 错误](https://stackoverflow.com/questions/9875056/savefiledialog-bug-in-wpf)

*   [WPF 打开文件对话框主题](https://stackoverflow.com/questions/5437598/wpf-open-file-dialog-theme)

*   [http://learnwpf.com/post/2007/01/05/Why-does-the-OpenFileDialog-in-WPF-look-so-e2809c1999e2809d-and-how-can-I-fix-it.aspx](http://learnwpf.com/post/2007/01/05/Why-does-the-OpenFileDialog-in-WPF-look-so-e2809c1999e2809d-and-how-can-I-fix-it.aspx)

*   [http://social.msdn.microsoft.com/Forums/en-SG/wpf/thread/03b4e9d8-4039-4e67-bf2d-5d41f65376cb](http://social.msdn.microsoft.com/Forums/en-SG/wpf/thread/03b4e9d8-4039-4e67-bf2d-5d41f65376cb)

如何扩展 WPF 打开/保存对话框：

*   [http://www.codeproject.com/Articles/42008/Extend-OpenFileDialog-and-SaveFileDialog-Using-WPF](http://www.codeproject.com/Articles/42008/Extend-OpenFileDialog-and-SaveFileDialog-Using-WPF)

如果您想要更多更新版本的“通用”文件对话框（例如 Windows 7 样式的对话框），您可以使用“Windows API 代码包”（其中一些已被纳入 .NET 4）：

*   [http://archive.msdn.microsoft.com/WindowsAPICodePack](http://archive.msdn.microsoft.com/WindowsAPICodePack)

因此，您选择哪一个取决于您的需求....如果您不进行任何自定义，那么您可以使用 Windows.Forms 之一。

请注意，使用 Windows.Forms 会使您的应用程序因额外的 DLL 而膨胀。

# version-control - 在 mercurial 中设置用户的用户名和密码

> ID：12315914
> 
> 赞同：2
> 
> 时间：2012-09-07T10:02:29.577
> 
> 标签：version-control, mercurial, iis-7.5, versioning, tortoisehg

我是 Mercurial 的新手。我在 IIS 7.5（Windows 7）上使用 Mercuraial hg server 2.3.1。我遵循了[本教程](http://stackingcode.com/blog/2011/02/24/running-a-mercurial-server-on-iis-7-5-windows-server-2008-r2)（我使用了最新版本的 python(Python 2.7) 和 mercurial(2.3.1)）。它工作正常。但是现在客户端机器上的任何用户都可以*推送*、*拉*取和*克隆*。我想建立一个身份验证机制，要求用户在执行任何先前的操作之前输入他们的用户名和密码。我在 hgweb.config 中添加了 allow_push = *username 。*现在当客户端*推送*Tortoise Hg（2.5 版）要求输入用户名和密码。我认为用户名将是我在 hgweb.config 中输入的用户名。但是我不知道 Tortoise Hg 在提交用户名后询问的密码。如何为用户设置密码？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:25:16.430

这是[您遵循的教程中](http://stackingcode.com/blog/2011/02/24/running-a-mercurial-server-on-iis-7-5-windows-server-2008-r2)的一些内容：

> 推送另一个测试将导致 Mercurial 要求输入用户名和密码，并针对域进行身份验证。

这意味着密码是您设置中用户域帐户的密码。

# xcode4 - 界面生成器插座。我在哪里可以找到它们？

> ID：12315918
> 
> 赞同：0
> 
> 时间：2012-09-07T10:02:55.637
> 
> 标签：xcode4, interface-builder, outlet

我可以通过在 viewcontroller 栏按钮和视图之间拖动 Ctrl 来创建从 ViewController 到 View 的 Outlet。

它出现在 ViewController Bar 按钮的上下文视图中。

像这样创建的出口在代码中出现在哪里？（或者不是吗？）。我遇到的问题是，当我从一个视图到它的控制器创建一个插座时，我有时（经常？）发现弹出选项不包括我的视图。换句话说，如果我创建了一个名为 picView 的视图，我应该将 picView 与视图一起视为一个选择，但我只看到视图。

后来，我发现我的委托 ViewController 方法将无法运行。当我回去再次建立链接时，我神秘地发现我的视图现在是一个选项并且可以解决问题。

这里有两张图片可以说明这个问题。 ![图片无链接](../Images/3ef95ee8b475f4c0c320e1c2e2be7e94.png) 这里没有可用的链接

![出现链接的图片](../Images/096a425cbf7d2477fcf6e1d371bbe761.png) 这里有一个可用的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:23:47.547

在经历了专门创建应用程序来说明这一点的过程后，我发现我看错了方向。我必须将其放入 ViewController 而不是 Interface Builder 创建 Outlet，然后 IB 可以使用它来建立链接。

当我将插座放入下图所示的 ViewController.m 文件的接口中时，这是实现的。此时，链接出现在 IB 中。

```
//
//  SecondViewController.m
//  Empty Test
//
//  Created by Brian Lockwood on 07/09/2012.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "SecondViewController.h"
#import "PicView.h"

@interface SecondViewController() <PicViewDataSourceDelegate> 

@property (nonatomic, weak) IBOutlet PicView *picView; //<<<<<<<<< this line here 
```

@结尾

# php - PHP - 带分页的 MySQL 查询

> ID：12315920
> 
> 赞同：3
> 
> 时间：2012-09-07T10:03:05.680
> 
> 标签：php, mysql, pagination

我将如何为此 MySQL 和 PHP 查询制作分页脚本。

```
if (isset($_GET['c'])) {
$c = $_GET['c'];
}

$query = mysql_query("SELECT * FROM Categories WHERE category = '$c' ");

        WHILE($datarows = mysql_fetch_array($query)):

        $id = $datarows['id'];
        $category = $datarows['category'];
        $code = $datarows['code'];

        endwhile;

$query2 = mysql_query("SELECT * FROM Games WHERE category = '$code' ");

WHILE($datarows_cat = mysql_fetch_array($query2)):

        $title = $datarows_cat['title'];
        $description = $datarows_cat['description'];
        $imgurl = $datarows_cat['image_name'];
        $category = $datarows_cat['category'];
        $views = $datarows_cat['view_count'];
        $pagename = $datarows_cat['pagename'];
                $featured = $datarows_cat['featured'];

if ($featured =="1") {$f = "<img src='http://my-site.com/images/star.png' width='13px' title='Featured Game' /> Featured"; } else {$f = "";}
                    if(is_int($views/2)) {
$views = $views / 2;
} else { $views = $views / 2 + .5; }

if (strlen($description) > 95) {
    $desc= substr($description,0,95);
    $desmod = "$desc...<br/><a href=\"http://my-site.com/$pagename#1\" title=\"$description\">- Read More</a>";
    }
else {$desmod = "$description";}

        echo "$f - <a href=\"http://my-site.com/$pagename\">$title - $desmod</a><br/>";

endwhile; 
```

例如，当我访问[http://my-site.com/categories/Action](http://my-site.com/categories/Action)时，代码会在我的类别表中查找该类别，然后一旦获得该类别的唯一代码，它就会运行另一个查询以查找所有游戏在具有该类别代码的另一个表中。但是，目前，我为一个类别加载了 200 多个游戏，这会导致大量加载时间。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T10:21:06.290

首先找出特定类别有多少游戏

**换行**

```
$query2 = mysql_query("SELECT * FROM Games WHERE category = '$code' "); 
```

到

```
$sql="SELECT * FROM Games WHERE category = '$code' ";
$query_count=mysql_query($sql); 
```

**在其后添加以下内容**

```
$per_page =30;//define how many games for a page
$count = mysql_num_rows($query_count);
$pages = ceil($count/$per_page);

if($_GET['page']==""){
$page="1";
}else{
$page=$_GET['page'];
}
$start    = ($page - 1) * $per_page;
$sql     = $sql." LIMIT $start,$per_page";
$query2=mysql_query($sql); 
```

然后显示你想要的页数

```
<ul id="pagination">
        <?php
        //Show page links
        for ($i = 1; $i <= $pages; $i++)
          {?>
          <li id="<?php echo $i;?>"><a href="linktoyourfile?c=<?php echo $c;?>&page=<?php echo $i;?>"><?php echo $i;?></a></li>
          <?php           
          }
        ?>
      </ul> 
```

**使用 CSS 进行分页，**这样就可以了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-24T07:07:21.047

```
//database connation
<?php
    $conn = new mysqli("localhost", "root", "","database_name");
?>
<!DOCTYPE html>
<html>enter code here
<head>
    <title>View Student Details</title>
    <h1 align="center"> Student Details </h1>

    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="bootstrap/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">

</head>
<body>

    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-8">

            <form>
                <table class="table table-striped">
                    <tr>
                        <th>Sr.No.</th>
                        <th>Student ID</th>
                        <th>Student Name</th>
                        <th>Class</th>
                        <th>Gender</th>
                        <th>Birth of Date</th>
                        <th>Contact No.</th>
                        <th>Action</th>
                    </tr>

                    <?php 
                        $count=0;

                        if(isset($_GET['page_count']))
                        {
                            $count=1;
                            $page_count=$_GET['page_count']-1;
                            $count=$page_count*10;
                        }

                        $q="SELECT * from student_detail LIMIT $count,10";
                        $result=$conn->query($q);
                        $j=0;
                        while($data=$result->fetch_array())
                        { $j=$j+1;
                    ?>

                    <tr>
                        <td><?php echo $j ?></td>
                        <td><?php echo $data['std_id'] ?></td>
                        <td><?php echo $data['std_name'] ?></td>
                        <td><?php echo $data['std_class'] ?></td>
                        <td><?php echo $data['gender'] ?></td>
                        <td><?php echo $data['bod'] ?></td>
                        <td><?php echo $data['contact'] ?></td>
                        <td>
                            <div class="row">
                                <div class="col-sm-12">
                                    <a href="delete_master.php?std_id=<?php echo $data['std_id']; ?>" class="btn btn-danger">Delete</a>
                                    <a href="update.php?std_id=<?php echo $data['std_id']; ?>" class="btn btn-danger">Update</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <?php } ?>
                </table>

                <ul class="pagination">
                    <?php 

                        $q="SELECT count(std_id) from student_detail";
                        $result=$conn->query($q);
                        $data=$result->fetch_array();
                        $total=$data[0];
                        $total_page=ceil($total/10);

                        if($total_page>1)
                        {
                            for($i=1;$i<=$total_page;$i++)
                            {
                    ?>
                                <li class="active"><a href="view.php?page_count=<?php echo $i;?>" name="page_count" id="page_count"><?php echo $i; ?></a></li>
                    <?php
                            }
                        }   
                    ?>
                </ul>
            </form>
            <div class="col-sm-2"></div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-29T10:24:23.777

```
 Pagiantion, it is working simple and easy 
       <?php  
        $sql = "SELECT COUNT(id) FROM contact_info";

        $rs_result  = $conn->query($sql); 
        $row = mysqli_fetch_row($rs_result);  
        $total_records = $row[0]; 
        echo $total_records;
        $previous   = 1;
        $total_pages = ceil($total_records / $limit); 
        $next  = $_GET["page"] + 1;
        $previous  = $_GET["page"] - 1;
        $pagLink = "<span>"; 
        if($previous ==0)
        {
        $prev  = "<a href='javascript:void(0);' >Previous</a>";
        }
        else
        {
          $prev  = "<a href='http://homeacresfinefurniture.com/all-queries.php?page=".$previous."' style='color:black;'>Previous</a>";   
        };
        echo $prev;

        "</span><div class='pagination'>";
        for ($i=1; $i<=$total_pages; $i++) 
        {  
        $pagLink .= "<a href='http://homeacresfinefurniture.com/all-queries.php?page=".$i."'>".$i."</a>";  
        };  
        echo $pagLink;

        $nex  = "<span><a href='http://homeacresfinefurniture.com/all-queries.php?page=".$next."' style='color:black;'>Next</a></span>";
        echo $nex;

        ";
        </div>";
      ?> 
```

从数据库中获取所有数据。

```
 $limit = 1;  
            if (isset($_GET["page"])) 
            {
                $page  = $_GET["page"];
            }
            else 
            {
             $page=1; 
            }  
            $start_from = ($page-1) * $limit;     
            $sql = "SELECT * FROM contact_info ORDER BY id desc LIMIT $start_from , $limit"; 
```

# javascript - 在 page_load 事件上调用 javascript 函数

> ID：12315923
> 
> 赞同：0
> 
> 时间：2012-09-07T10:03:20.233
> 
> 标签：javascript, asp.net

在 asp.net 网站中，在**.aspx**内我有以下代码

```
<script type="text/javascript">
    function callme(option) {
        document.getElementById("t1").value = option;
    }
</script>
<div id="content" runat="server"></div>

<input type="text" id="t1" /> 
```

在**Page_Load**文件后面的代码上：

```
content.InnerHtml = MyClassObject.MyMethod(...); 
```

在**MyClass**里面：

```
public String MyMethod(...)
{
   ... //some code
   String str1 ="<select id=\"s1\" onchange=\"callme(this.value)\">" +
                    "  <option value=\"1\">One</option>"+
                    "  <option value=\"2\">Two</option>" +
                    "  <option value=\"3\">Three</option>" +                          
                    "</select>";
   ... // some code
   return str1; 
```

每当我从下拉列表中选择任何选项时，它都会在文本框 t1 中反映其值。但是在页面加载时，文本框仍然是空的。我不能使用默认值，因为下拉列表的值在运行时会发生变化。如何在页面加载时将下拉列表的第一个值添加到文本框 t1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:11:17.833

在 javascript 中的 onload 函数中，您可以在下拉列表中获得当前选择的值，如下所示：

```
var s1 = document.getElementById("s1");
var selectedVal = s1.options[s1.selectedIndex].value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:12:43.110

```
<script type="text/javascript">
function BuyG2() {
    alert('Hai Jquery');
}
</script> //jquery in sourse 
```

```
protected void Page_Load(object sender, EventArgs e)
{
    ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "tmp",
        "<script type='text/javascript'>BuyG2();</script>", false);
} //ASP Button Click Events 
```

# jquery-mobile - 手动设置 Jquery Mobile ViewPort 以将每个页面重置为默认大小

> ID：12315927
> 
> 赞同：1
> 
> 时间：2012-09-07T10:03:55.440
> 
> 标签：jquery-mobile

我已经使用 Jquery Mobile 创建了一个移动应用程序，我想手动设置每个页面的视口值。如何做到这一点。

动机：客户在移动设备上使用网站，当他用手指缩放页面时，如果他转到另一个页面，缩放保持不变。他希望如果他浏览其他页面，它将以默认大小打开。

提前致谢

# .net - Entity Framework 何时填充导航属性？

> ID：12315931
> 
> 赞同：3
> 
> 时间：2012-09-07T10:04:02.277
> 
> 标签：.net, entity-framework

我正在使用具有工作单元/存储库模式的实体框架 4.3。在这种情况下，工作单元是一个请求。

工作单元还显式地将延迟加载设置为 true。

然而，我对在这种情况下什么时候延迟加载有点困惑，一些建议将不胜感激。

```
 var context = Local.Items.Uow.Context; // the context

    var r = new ReadRepo<Deal>(context); // the repository

    var deals = r.Find(); // IQueryable<Deal>

    Rpt_BookmarkedDeals.DataSource = deals.ToList();
    Rpt_BookmarkedDeals.DataBind(); 
```

存储库 Deals 的导航属性为“Store”。只有在转发器是数据绑定时才知道加载 Store 的要求。我猜这是加载导航属性的地方，但我不确定。

这是执行此操作的最佳方式还是应该在获得交易时将 Store 作为 Include() 显式添加？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:29:55.247

> 只有在转发器是数据绑定时才知道加载 Store 的要求。我猜这是加载导航属性的地方，但我不确定。

是的，延迟加载的导航属性会在引用该属性时加载，并且绑定到该属性会引用它。

> 这是执行此操作的最佳方式还是应该在获得交易时将 Store 作为 Include() 显式添加？

没有单一的最佳方法。

`deal.Store`如果您的交易链接到 10 个不同的商店，那么除了获取交易的一个查询之外，延迟加载将导致 10 个单独的查询被发送到数据库。如果您使用`deals.Include("Store")`，一个查询将一次性检索交易和商店，但每个交易的每个商店的数据都会重复。哪个表现更好取决于。

如果您使用延迟加载，如果商店及其交易在加载交易之后但在商店之前被删除，则可能会出现不一致。这可以通过使用事务来避免，但在这种情况下，事务必须持续到商店加载完毕。

您需要权衡不同方法的优缺点，以确定哪种方法最适合您的情况。

# php - Wiki 私人与公共页面

> ID：12315932
> 
> 赞同：2
> 
> 时间：2012-09-07T10:04:04.747
> 
> 标签：php, mediawiki

目前，我们通过制作私人媒体维基安装

```
 $wgGroupPermissions['*']['read'] = false;
    $wgGroupPermissions['*']['edit'] = false; 
```

在 LocalSettings.php 中，并已公开访问主页：

```
 $wgWhitelistRead = array(
        "Main Page"
    ); 
```

# 问题

我想知道是否有可能拥有一个带有私人子集（仅限员工）的公共 wiki（面向客户）。我知道我们只能有 2 个单独的安装，但理想情况下，我希望 wiki.mydomain.com 用于所有 wiki 内容，并带有对私人页面和编辑操作的登录请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:07:06.697

不容易。

MediaWiki 不是为隐藏部分而构建的。如果是几个页面的问题，有一些扩展可以让您将它们保护给有限的用户子集，但是第二个 wiki 确实是更好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:28:20.370

是的你可以。查看[Category:Page 特定用户权限扩展](http://www.mediawiki.org/wiki/Category%3aPage_specific_user_rights_extensions)页面上的扩展。还要注意这些类型的扩展的[安全问题。](http://www.mediawiki.org/wiki/Security_issues_with_authorization_extensions)

# c# - 如何在 SQL 查询中使用 DateTime？

> ID：12315940
> 
> 赞同：0
> 
> 时间：2012-09-07T10:04:39.110
> 
> 标签：c#, sql, datetime, sql-server-ce

我应该如何在我的 C# 查询中使用 c# 日期时间值？

到目前为止，我一直在做以下事情：

```
Datetime my_time = new DateTime(2012, 09, 05);
cmd.Parameters.AddWithValue("@date", my_time);
cmd.CommandText = "SELECT * FROM sales WHERE date = @date"; 
```

直到今天早上，当我从结果集中检索值时出现空错误时，它一直运行良好。

我更改了日期参数以从我的日期时间值中获取短日期字符串，如下所示：

```
cmd.Parameters.AddWithValue("@date", my_time.ToShortDateString()); 
```

它似乎又可以正常工作了。

***这样做的正确方法是什么？***显然，我正在将我的日期时间值转换为字符串，仅（可能）让数据库在评估我的相等 where 子句之前将其转换回日期时间，这似乎有点毫无意义。

编辑：

我使用的是 SQL Server Compact Edition，示例中的日期字段的精度设置为 8（日期，不包括时间，对吗？）。这是否意味着我之前以 00:00:00.000 结束了完整的日期？如何在不包括时间的情况下将日期时间值传递给数据库，而不先转换为字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:12:40.387

你可以试试`my_time.Date`

```
cmd.Parameters.AddWithValue("@date", my_time.Date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:10:13.770

不要将其作为字符串传递，否则会遇到文化格式问题。

尝试`SqlDateTime`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:11:18.680

您没有将日期转换为字符串 - AddWithValue 知道它是日期，但它是 a `datetime`，因此它具有时间组件。你的销售有时间因素吗？

```
 SELECT * FROM sales WHERE DateDiff(d, @date, date) = 0 
```

# php - 删除 PHP 中的各种空格

> ID：12315942
> 
> 赞同：1
> 
> 时间：2012-09-07T10:04:47.670
> 
> 标签：php, regex, whitespace, removing-whitespace

我正在寻找使用正则表达式删除多个换行符。说我有这个文本：

`"On the Insert tab\n \n\nthe galleries include \n\n items that are designed"`

然后我想用

`"On the Insert tab\nthe galleries include\nitems that are designed"`

**所以我的要求是：**

1.  它将删除所有多个换行符并将替换为一个换行符
2.  它将删除所有多个空格并替换为一个空格
3.  空格也会被修剪

我确实搜索了很多，但找不到解决方案 - 我得到的最接近的是这个[Removing冗余换行符与正则表达式](https://stackoverflow.com/questions/816085/removing-redundant-line-breaks-with-regular-expressions)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:11:13.467

用这个 ：

```
echo trim(preg_replace('#(\s)+#',"$1",$string)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:27:33.240

```
$text = str_replace("\r\n", "\n", $text); // converts Windows new lines to Linux ones
while (strpos($text, "\n\n") != false)
    {
        $text = str_replace("\n\n", "\n", $text);
    } 
```

That will sort out newline characters.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T05:08:38.283

```
$text = trim($text);
preg_replace('/\s+/', ' ', $text);
preg_replace('/(?:\s*(?:\r\n|\r|\n)\s*){2}/s', "\n", $text); 
```

感谢[使用正则表达式删除多余的换行符](https://stackoverflow.com/questions/816085/removing-redundant-line-breaks-with-regular-expressions)

# php - 如何检查数据库中的重复数据？

> ID：12315945
> 
> 赞同：-1
> 
> 时间：2012-09-07T10:04:50.967
> 
> 标签：php, javascript, mysql, html

我有 3 种不同语言的主题名称字段。`select`输入新主题时，如果该主题已通过 using和`like clause`语句存在于数据库中，我将使用 JavaScript 在页面上显示。问题是如果输入的主题名称完全相同，它会发现任何重复，但如果只有一些单词相同，则不会。

如何检查主题的重复，检查词的相似性而不是整个主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:09:56.463

SQL Server 提供全文搜索功能。你可以试试这个而不是你的like子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:11:27.167

ATaylor 几乎为您说明了这一点。要排除特定的常用关键字，我建议在语句末尾使用“EXCEPT SELECT WHERE LIKE”语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:37:08.607

```
SELECT DISTINCT(field) AS var1, COUNT(field) AS var2 FROM table GROUP BY field HAVING var2 > 1; 
```

这将显示当前数据库中存在两次或多次的任何字段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-01T21:32:05.463

全文搜索，您可以选择相关性分数。编写查询以获得最相关的结果。

```
SELECT MATCH('content') AGAINST ('keyword1 
keyword2') as relevancy_score FROM topic WHERE MATCH
('Content') AGAINST('+keyword1 +keyword2' IN 
BOOLEAN MODE) HAVING relevancy_score > 0.2 ORDER 
BY relevancy_score DESC. 
```

你可以参考这个链接。 [http://dev.mysql.com/doc/refman/5.7/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.7/en/fulltext-boolean.html)

# json - 发布一个只有一行文本的 JSON

> ID：12315956
> 
> 赞同：0
> 
> 时间：2012-09-07T10:05:24.240
> 
> 标签：json

我想发布一个带有一行文本的 json。`"Hello, I'm waiting for you"`

我试过这个：`{ "":"Hello, I'm waiting for you" }`

但不起作用。

我试图只发布文本，但这不起作用。我也试过 `{ "Hello, I'm waiting for you" }`了，但我怀疑它是格式错误的 JSON。

**已编辑：** 目标是发送此 HTTP 请求

```
POST /controller/action HTTP/1.0
Host: sample.net
Authorization: Basic falseSignOfPasswordAndUser
Content-Type: application/json
"Hello, I'm waiting for your" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:21:47.553

正如petesiss所说，你可以说一个数组，但这似乎有点矫枉过正。我会建议你修改你的协议，或者根本不使用 json。

编辑：总结评论中的讨论：OP 不需要发送 JSON，协议只指定他将收到对他请求的 JSON 的答复。所以他发送了纯文本，它起作用了，独角兽再次（或几乎）开始在地球上行走。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:12:36.123

你对细节有点了解，但是如果你想`json_decode`在 php 中使用发布的值，你应该能够发布`["Hello, I'm waiting for you"]`

最后得到一个单元素 php 数组。

```
$x = json_decode('["Hello, I am waiting for you"]');
var_dump($x); 
```

结果是：

```
array(1) { [0]=> string(27) "Hello, I am waiting for you" } 
```

# javascript - JSDoc 和 JavaScript 单例文档

> ID：12315958
> 
> 赞同：5
> 
> 时间：2012-09-07T10:05:29.447
> 
> 标签：javascript, jsdoc

我有一个 JavaScript 单例定义为：

```
/**
 * A description here
 * @class
 */
com.mydomain.ClassName = (function(){

/**
 * @constructor
 * @lends com.mydomain.ClassName
 */ 
var ClassName = function(){};

/**
 * method description
 * @public
 * @lends com.mydomain.ClassName
*/
ClassName.prototype.method1 = function(){};

return new ClassName();

})(); 
```

在详细模式 (-v) 下不会打印任何警告，但文档仅报告“com.mydomain.ClassName()”，其中“A description here”作为描述......我如何也为 ClassName 的方法生成文档？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T10:25:58.177

我解决了！:)

```
 /**
 * A description here
 * @class
 */
com.mydomain.ClassName = (function(){

/**
 * @constructor
 * @name com.mydomain.ClassName
 */ 
var ClassName = function(){};

/**
 * method description
 * @public
 * @name com.mydomain.ClassName.method1
*/
ClassName.prototype.method1 = function(){};

return new ClassName();

})(); 
```

我刚刚用@name 替换了@lends！

**更新：获得完整文档的正确方法如下：**

```
/**
 * A description here
 * @class
 */
com.mydomain.ClassName = (function(){

var ClassName = function(){};

/**
 * method description
 * @memberOf com.mydomain.ClassName
*/
ClassName.prototype.method1 = function(){};

return new ClassName();

})(); 
```

# c# - 添加新项目时对字典中的项目进行排序，而不是在之后进行

> ID：12315959
> 
> 赞同：0
> 
> 时间：2012-09-07T10:05:43.420
> 
> 标签：c#, linq, enumeration

我目前正在使用以下代码对字典进行排序：

```
Dictionary<string, TKosStock> NewList = null;
if (SortBy.CompareTo(TSortOptions.sortASC | TSortOptions.sortPRICE) == 0)
   NewList = new Dictionary<string, StockObj>(this.StockItemList.OrderBy(n => n.Value.SellPriceRangeLowGross).ToDictionary(n => n.Key, n => n.Value));

this.StockItemList = new Dictionary<string, TKosStock>(NewList.ToDictionary(n => n.Key, n => n.Value)); 
```

这很好用，并且可以正确地重新排列我的列表。然后，我可以循环`this.StockItemList`了解我的值的顺序是否正确。

**我想做的是首先以正确的顺序添加项目。**我无法根据 SQL 查询执行此操作，因为在 SQL 查询最初运行时未计算价格。

ps 我认为这种重新洗牌的开销很低，但如果可以在最初添加项目时完成，那么我认为开销会更低。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:08:04.617

也许使用有序字典（非通用）：

[http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)

# youtube - 使用 MPMoivePlayerController 播放 Youtube 视频，但它不起作用

> ID：12315963
> 
> 赞同：2
> 
> 时间：2012-09-07T10:05:51.963
> 
> 标签：youtube, rtsp

很明显 MPMoivePlayerController 不支持 3gp 视频，但是文档说支持。
RTSP 协议也是如此。
如何播放 Youtube 视频，当一部电影结束时，它会通知我们播放下一部电影。
有一些使用 UIWebView 播放 Youtube 的示例，但它无法捕捉到完成的通知。
我使用 Xcode 4.3，与此同时，moiveplayer 似乎在 xcode 4.2 之下做得很好。

# android - Gridview，允许背景画布在视图之外绘制

> ID：12315965
> 
> 赞同：4
> 
> 时间：2012-09-07T10:05:55.883
> 
> 标签：android, gridview, canvas

我正在为 Android 开发一个应用程序，一个小型记事本应用程序。在我的应用程序中，我使用 Gridview 创建一个 2*X 大小的网格，并且在每个单元格中我都有一个 LinearLayout 调用 AbstractNote，它的任务是显示应用程序中每个保存注释的预览。

我的 AbstractNote 有一个稍微旋转的背景图像，以更漂亮地显示预览。但是我的问题是，当我旋转图像时，其中一些图像落在了 AbstractNote 区域之外，我找不到一个很好的方法来展示它。

我尝试使用`View.setAnimation(...)`它并且它可以工作，但给我粗糙的图像和文本，我尝试创建一个自定义的 Drawable（设置为`AbstractNote.setBackgroundDrawable(...)`），它给我平滑的图像但不显示完整的图像。

请注意，我的目标 android 是 2.1，我不使用`View.setRotation(...)`

使用`View.setAnimation`for 执行此操作，但获得粗糙的图像和文本

![](../Images/752f8ae8666b87adf971f726cdc6c41c.png)

使用自定义可绘制对象，但不能在单元格外部进行绘制。

![](../Images/15c7d6afd47f5668d30bc3ff8f721255.png)

如果有人知道如何修复它，通过修复尝试 1 中粗糙的图像和文本或如何在尝试 2 中在单元格外绘制图像，我将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:24:22.757

我终于找到了问题的解决方案，解决方案不是很好但工作，想法是绘制单元格项目直接在 GridView 上绘制背景而不是 GridView childen/item

我创建一个新的 GridView 为：

```
public class NoteGridView extends GridView {
@Override
protected void dispatchDraw(Canvas canvas) {
    final int count = getChildCount();
    if (count > 0) {
        for (int i = 0; i < this.getChildCount(); i++) {
            // For each of my childen draw it backgrund that allow to draw bg that is bigger then cell.
            View childAt = this.getChildAt(i);
            if (childAt instanceof AbstractNote) {
                final AbstractNote note = (AbstractNote) childAt;
                // Set the zero point to the start of the childen, then call the childen draw methods.
                canvas.save();
                canvas.translate(childAt.getLeft(), childAt.getTop());
                note.drawBackground(canvas);
                canvas.restore();
            }
        }
    }
    super.dispatchDraw(canvas);
}
} 
```

在我的孩子们中，`AbstractNote`我添加了方法`drawBackground`，这就是我要在我`AbstractNote`的背景中绘制的内容，现在在 GridView 画布上绘制，该画布比我在其中的小画布大得多`AbstractNote`

# asp.net - IIS 重定向与 appcmd 导致递归重定向

> ID：12315967
> 
> 赞同：1
> 
> 时间：2012-09-07T10:05:59.087
> 
> 标签：asp.net, redirect, iis-7, recursion, appcmd

我正在尝试使用 appcmd.exe 和以下命令设置相对重定向：

appcmd.exe 设置配置“网站”-section:system.webServer/httpRedirect /enabled:“True”/destination:“/Login/UnderConstruction.aspx”/httpResponseStatus:“找到”

“网站”具有以下约束力`"http://localhost:81"`

但是，这似乎导致了递归重定向，因为当我访问时`localhost:81`，会生成以下路径：

```
http://localhost:81/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/Login/UnderConstruction.aspx/ 
```

我在谷歌上搜索过这个，但我找不到任何有同样问题的人。有没有办法将所有站点请求重定向到相对于该站点的路径而不会导致递归重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:54:02.360

我已经在 httpredirect 中使用通配符解决了这个问题

例如，以下脚本有效：

```
appcmd.exe set config "Website" -section:system.webServer/httpRedirect /+"[wildcard='*.aspx',destination='/Login/UnderConstruction.aspx']" /destination:"" /enabled:"True" /exactDestination:"False" /childOnly:"False" 
```

# c# - 实体框架 POCO 到 MVC 3 中的 ViewModel

> ID：12315971
> 
> 赞同：1
> 
> 时间：2012-09-07T10:06:08.403
> 
> 标签：c#, asp.net-mvc-3, viewmodel, wcf-data-services

我有一个示例项目，一个动态问卷系统，任何管理员都可以在其中创建问卷，然后向其中添加问题组，然后向每个问题组添加问题。

以构成我的 EF 数据上下文的实体的以下 POCO 组为例：

```
public class Questionnaire
{
    public virtual int Id { get; set; }
    public virtual string QuestionnaireName { get; set; }
    public virtual IList<QuestionGroup> QuestionGroups { get; set; }
}

public class QuestionGroup
{
    public virtual int Id { get; set; }
    public virtual string GroupName { get; set; }
    public virtual int QuestionnaireId { get; set; }
    public virtual IList<Question> Questions { get; set; }
}

public class Question
{
    public virtual int Id { get; set; }
    public virtual string QuestionText { get; set; }
    public virtual int QuestionGroupId { get; set; }
    public virtual QuestionGroup QuestionGroup { get; set; }
} 
```

我正在通过 WCF 数据服务在我的 Web UI 中访问这些实体，并且想知道在我的视图中为这些实体处理输入的最佳实践（或至少一种更简洁的方式）是什么。以下是我克服这一点的一些想法，但我很难喜欢其中的任何一个，因为它们只是让人感到复杂。

**解决方案 1**

`Question`向我的实体添加一个名为的属性，`SubmittedValue`并让我的 EF 数据上下文为`Ignore(m => m.SubmittedValue)`this。我将使用此属性`Question`在视图级别保留输入值。

我不喜欢的是，我的 POCO 实体具有几乎不相关的属性——我只会`SubmittedValue`在 Web UI 的一种情况下使用，而我的 POCO 实体将在其他地方多次使用。

**解决方案 2**

创建与我的 POCO 具有相同结构的视图模型对象，我们称之为它们`QuestionnaireModel`，`QuestionGroupModel`并且`QuestionModel`- 这些在我的控制器中初始化，并且属性从 POCO 复制到视图模型。在`QuestionModel`我添加我的`SubmittedValue`属性并使用自定义模型绑定器保留此值时，该绑定器查看绑定上下文并从视图中获取我的值 - 其中名称类似于 [group.question.1] （其中 1 是问题的 ID ）。这在视图中使用每个问题组和每个问题的编辑器模板呈现。

我不喜欢的是，这些额外的视图模型对象使我的 Web UI 膨胀，并且必须手动将属性值从我的 POCO 复制到视图模型。我知道我可以使用 AutoMapper 之类的东西来为我做这件事，但这只是自动化这项工作，理想情况下我根本不想这样做。

**解决方案 3**

稍微更改解决方案 2，改为扩展我的 POCO 并`virtual`用其他视图模型对象覆盖集合属性。所以，我的视图模型看起来像这样：

```
public class QuestionnaireModel : Questionnaire
{
    public new IList<QuestionGroupModel> QuestionGroups { get; set; }
}

public class QuestionGroupModel : QuestionGroup
{
    public new IList<Question> Questions { get; set; }
}

public class QuestionModel : Question
{
    public string SubmittedValue { get; set; }
} 
```

我最喜欢这个想法，但我还没有真正尝试过。我在这里两全其美：1.我可以将我的 POCO 排除在我的视野之外；2.我将一次性使用属性`SubmittedValue`排除在我的业务层之外。

你们有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:59:06.433

IMO 解决方案 2 是正确的前进方向，因为您经常会发现 EF POCO 和 ViewModel 在解决不同的问题时需要有所不同。

`UIHints`例如，一个可能的问题是使用表示层注释（等`ValidationAttributes`）装饰您的 ViewModel

正如您所说的解决方案 1 会导致臃肿，您可能最终会引用 System.Data.Annotations （可能没问题），但如果需要`[HiddenInput]`等，您也可以引用 System.Data.MVC

IMO 解决方案 3 最终比新的 ViewModel 更加努力 - 例如，尽管[MetadataType](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute.aspx)允许您将属性“转移”到具有相似属性的另一个类上，但这是一项非常艰巨的工作。

例如，使用解决方案 3，您可能会得到

```
namespace EFPocos
{
    /// <summary>
    ///  Your EF POCO
    /// </summary>
    public class Question
    {
        public virtual int Id { get; set; }
        public virtual string QuestionText { get; set; }
        public virtual int QuestionGroupId { get; set; }
    }
}

namespace UIViewModels
{
    /// <summary>
    ///  Your ViewModel 'derivative', but sans Annotation decoration
    /// </summary>
    [MetadataType(typeof(QuestionUIMetaData))]
    public class QuestionViewModel : EFPocos.Question, IValidatableObject
    {
        public string SubmittedValue { get; set; }

        #region IValidatableObject Members

        public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
        {
            if (Id % 2 == 0)
            {
                yield return new ValidationResult("Some rule has fired");
            }
        }

        #endregion
    }

    /// <summary>
    /// Annotations go here ... and we may as well just AutoMapped a simple ViewModel
    /// </summary>
    public class QuestionUIMetaData
    {
        [HiddenInput]
        public int Id { get; set; }
        [Required()]
        public string QuestionText { get; set; }
        [Required()]
        [DisplayName("Select Group ...")]
        public int QuestionGroupId { get; set; }
        [DisplayName("Question is Here")]
        [StringLength(50, ErrorMessage = "Too Long!!")]
        public string SubmittedValue { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:49:31.947

在使用了解决方案 3（这是我的首选解决方案）之后，我终于设法得到了它。对于任何偶然发现这个问题的人，这就是我正在做的事情。首先，我创建了扩展我的 POCO 实体的视图模型。我用一个实现覆盖集合属性，`new`使我的集合成为我的视图模型类型。然后我将我的表单持久性属性添加到我的`Question`视图模型中（这样我就可以将它排除在我的业务层之外）。

```
public class QuestionnaireModel : Questionnaire
{
    public new IList<QuestionGroupModel> QuestionGroups { get; set; }
}

public class QuestionGroupModel : QuestionGroup
{
    public new IList<QuestionModel> Questions { get; set; }
}

public class QuestionModel : Question
{
    public string SubmittedValue { get; set; }
} 
```

使用[AutoMapper](http://automapper.codeplex.com/)，我创建了我的 POCO 和视图模型之间的映射，如下所示（`.AfterMap()`用于确保我的持久性属性不是 null，而是一个空字符串）：

```
Mapper.CreateMap<Questionnaire, QuestionnaireModel>();
Mapper.CreateMap<QuestionGroup, QuestionGroupModel>();
Mapper.CreateMap<Question, QuestionModel>().AfterMap((s, d) => d.SubmittedValue = ""); 
```

接下来，每个`Question`都有一个具有单个输入元素的编辑器模板：

```
@Html.Raw(string.Format("<input type=\"text\" name=\"group.question.{0}\" value=\"{1}\" />", Model.Id.ToString(), Model.SubmittedValue) 
```

最后，我使用自定义模型绑定器获取（并保留）这些值，如下所示：

```
int id = Int32.Parse(controllerContext.RouteData.Values["id"].ToString());

var questionnaire = _proxy.Questionnaires
    .Expand("QuestionGroups")
    .Expand("QuestionGroups/Questions")
    .Where(q => q.Id == id)
    .FirstOrDefault();

var model = Mapper.Map<Questionnaire, QuestionnaireModel>(questionnaire);

foreach (var group in model.QuestionGroups)
{
    foreach (var question in group.Questions)
    {
        string inputValueId = "group.question." + question.Id.ToString();
        string value = bindingContext.ValueProvider.GetValue(inputValueId).AttemptedValue;

        question.SubmittedValue = value;
    }
} 
```

虽然我对自定义模型绑定器**不太**满意（我认为我没有正确设置我的编辑器模板，所以求助于自定义绑定器）对我来说这是首选的解决方案。

# python - 读取大文本文件时出现内存错误

> ID：12315972
> 
> 赞同：0
> 
> 时间：2012-09-07T10:06:12.733
> 
> 标签：python

我有一个大约 36gb 的文本文件，其中每行包含单词，我正在尝试读取该文件，但它显示内存错误，对此我并不感到震惊，但我该如何解决？

我正在尝试这个：

```
for words in open("hugefile.txt").readlines():
    #do something 
```

我有 2gb 内存，操作系统：Windows XP，Python 2.7

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T10:07:21.453

您正在调用`readlines()`它将整个文件加载到内存中。

而是迭代文件：

```
for words in open("hugefile.txt"): 
```

这将逐行迭代，根据需要读取更多行。

# search - 使用搜索参数获取 Backbone 集合

> ID：12315973
> 
> 赞同：21
> 
> 时间：2012-09-07T10:06:14.690
> 
> 标签：search, backbone.js, query-string

我想使用`Backbone.js`. 搜索参数取自简单形式，服务器知道解析查询参数并返回结果的 json 数组。我的模型或多或少看起来像这样：

```
App.Models.SearchResult = Backbone.Model.extend({
    urlRoot: '/search'
});

App.Collections.SearchResults = Backbone.Collection.extend({
    model: App.Models.SearchResult
});

var results = new App.Collections.SearchResults(); 
```

我希望每次执行`results.fetch()`时，搜索表单的内容也将与`GET`请求一起序列化。有没有一种简单的方法来添加它，或者我做错了，可能应该手动编码请求并从返回的结果创建集合：

```
$.getJSON('/search', { /* search params */ }, function(resp){
    // resp is a list of JSON data [ { id: .., name: .. }, { id: .., name: .. }, .... ]
    var results = new App.Collections.SearchResults(resp);

   // update views, etc.
}); 
```

想法？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-07T10:52:12.310

[Backbone.js fetch with parameters](https://stackoverflow.com/questions/6659283/backbone-js-fetch-with-parameters)回答了你的大部分问题，但我也在这里提出了一些问题。

将`data`参数添加到您的`fetch`调用中，例如：

```
var search_params = {
  'key1': 'value1',
  'key2': 'value2',
  'key3': 'value3',
  ...
  'keyN': 'valueN',
};

App.Collections.SearchResults.fetch({data: $.param(search_params)}); 
```

现在您的呼叫 url 添加了可以在服务器端解析的参数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-07T10:41:06.657

*注意：代码简化，未经测试*

我认为您应该拆分功能：

### 搜索模型

它是您服务器端的适当*资源*。唯一允许的操作是`CREATE`.

```
var Search = Backbone.Model.extend({
  url: "/search",

  initialize: function(){
    this.results = new Results( this.get( "results" ) );
    this.trigger( "search:ready", this );
  }
}); 
```

### 结果集合

它只是负责收集 Result 模型的列表

```
var Results = Backbone.Collection.extend({
  model: Result
}); 
```

### 搜索表格

您会看到此视图正在执行智能工作，侦听`form.submit`，创建新`Search`对象并将其发送到服务器`created`。这个`created`任务并不意味着搜索必须存储在数据库中，这是正常`creation`行为，但并不总是需要这样。在我们的例子`create`中，搜索意味着搜索数据库以寻找具体的寄存器。

```
var SearchView = Backbone.View.extend({
  events: {
    "submit form" : "createSearch"
  },

  createSearch: function(){
    // You can use things like this
    // http://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery
    // to authomat this process
    var search = new Search({
      field_1: this.$el.find( "input.field_1" ).val(),
      field_2: this.$el.find( "input.field_2" ).val(),
    });

    // You can listen to the "search:ready" event
    search.on( "search:ready", this.renderResults, this )

    // this is when a POST request is sent to the server
    // to the URL `/search` with all the search information packaged
    search.save(); 
  },

  renderResults: function( search ){
    // use search.results to render the results on your own way
  }
}); 
```

我认为这种解决方案非常干净、优雅、直观且非常可扩展。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-07T10:33:40.733

找到了一个非常简单的解决方案——覆盖`url()`集合中的函数：

```
App.Collections.SearchResults = Backbone.Collection.extend({

  urlRoot: '/search',

  url: function() {
    // send the url along with the serialized query params
    return this.urlRoot + "?" + $("#search-form").formSerialize();
  }
}); 
```

希望这不会吓到比我有更多 Backbone / Javascript 技能的人。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-06T00:21:22.717

似乎当前版本的 Backbone（或者可能是 jQuery）自动将`data`值字符串化，因此无需再调用`$.param`。

以下行产生相同的结果：

```
collection.fetch({data: {filter:'abc', page:1}});
collection.fetch({data: $.param({filter:'abc', page:1})}); 
```

查询字符串将是`filter=abc&page=1`.

编辑：这应该是评论，而不是回答。

# ruby-on-rails - Carrierwave 临时文件无模型

> ID：12315977
> 
> 赞同：4
> 
> 时间：2012-09-07T10:06:22.340
> 
> 标签：ruby-on-rails, carrierwave

对于最近上传的未链接到任何模型的文件，我需要能够将文件附加到邮件（使用 Mailer）。

在上传表单的代码中：

```
<%= form_for(:mail, :url => {:action => 'send_mail'}, :html => {:multipart => true}) do |f| %>
<table summary="send_table">
  <tr>
    <th>Attachment</th>
    <td><%= f.file_field(:attachment) %><a id="attachment"></a></td>
  </tr>
</table>

<%= submit_tag "Send!" %> 
```

现在，我在 send_mail 操作中要做的事情是这样的：

```
MyMailer.send_mail(params[:mail][:attachment]).deliver 
```

params[:mail][:attachment] 是随表单上传的临时文件的路径。怎么可能做到这一点？

这也暗示了另一个问题：发送邮件后，我是否应该从临时文件中手动删除文件？如果是，如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-09T06:11:55.030

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

终于搞定了： 

```
unless (params[:mail][:attachment]).nil?
  uploader = AttachmentUploader.new
  uploader.cache!(params[:mail][:attachment])
  @file_name = uploader.filename
  @file_data = uploader.file.read()
end 
```

接着

```
MyMailer.send_mail(@file_name,@file_data) 
```

〜回答每个[用户1563325](https://stackoverflow.com/users/1563325/user1563325)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-31T01:02:59.863

对于此处描述的场景，我想补充一点，也许您不需要 CarrierWave 来处理这种临时上传情况。使用 上传时`file_field`，Rails 将其保存到[Tempfile](https://docs.ruby-lang.org/en/2.4.0/Tempfile.html)中，您可以像这样访问其路径：

```
params[:mail][:attachment].path 
```

这些文件会自动删除，因此您不必担心它们，正如[Rails 文档](http://api.rubyonrails.org/classes/ActionDispatch/Http/UploadedFile.html)所解释的那样：

> 上传的文件是临时文件，其生命周期是一个请求。当对象最终确定时，Ruby 会取消链接文件，因此无需使用单独的维护任务来清理它们。

# objective-c - 打开 ModalViewController 时使键盘不关闭

> ID：12315978
> 
> 赞同：0
> 
> 时间：2012-09-07T10:06:40.983
> 
> 标签：objective-c, ios, uikeyboard

> **可能重复：**
> [即使呈现模态视图控制器，如何保持键盘存在？](https://stackoverflow.com/questions/8161207/how-can-i-keep-the-keyboard-present-even-when-presenting-a-modal-view-controller)

我在一个视图控制器上有一个打开的键盘，我想显示另一个。但是当我展示它时，键盘就坏了。但我不希望它下降。我希望它留下来。我怎样才能做到这一点？我自己不调用任何 endEditings 和 resignFirstResponders。

# c# - 如何在 WPF 应用程序中显示视频

> ID：12315979
> 
> 赞同：0
> 
> 时间：2012-09-07T10:06:42.620
> 
> 标签：c#, wpf, video

您好我正在编写一个 WPF 应用程序，它应该播放一组应该全屏播放的视频。

我尝试使用一些 VLC lib，但它们对我不起作用。

然后我搬到了 mediaelement - 当我开始播放视频时，我总是会出现黑色闪烁

加载多个视频是一个巨大的性能损失 - 视频口吃......

任何建议如何解决这个问题？

我计划执行以下程序：

kinect 检测到有人在移动——> 如果人们停下来观看屏幕，程序会播放视频——> 程序会播放扩展版本

更新：检查了 vlc.net 并且它在开始时也会有一个黑色框架 - 啊！更新：似乎第一帧总是黑色的！？嗯（添加了计时器并在加载后 1 秒开始播放视频 - 仍然有黑框......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:43:32.870

我的应用程序的解决方案：我使用 vvvv.org 并通过 UDP 连接发送我的数据 - 我在这个 VVVV 应用程序中处理视频内容 - 效果很好......我对微软的视频支持非常失望......我希望这会得到无论如何，将来会更好 thx :)

# ajax - 在 Websphere Portal 8 上部署 JSF 2.0 portlet

> ID：12315984
> 
> 赞同：2
> 
> 时间：2012-09-07T10:07:15.890
> 
> 标签：ajax, jsf-2, portlet, websphere-portal, websphere-8

我在 Websphere Portal 8 中运行 JSF 2.0 Portlet 时遇到问题。如果我不使用`<f:ajax>`标记，它看起来应用程序以某种方式工作。但是当我添加`<f:ajax>`portlet 时没有呈现并且在 SystemOut.log 中我可以看到：

```
0000003c FaceletViewDe E   Error Rendering View[/views/Home.xhtml]
                                 java.lang.NullPointerException
    at com.ibm.faces20.portlet.util.WebXMLParser.endElement(WebXMLParser.java:115)
    at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)
    at javax.xml.parsers.SAXParser.parse(Unknown Source)
    at com.ibm.faces20.portlet.util.WebXMLParser.<init>(WebXMLParser.java:51)
    at com.ibm.faces20.portlet.httpbridge.PortletResource.getRequestPath(PortletResource.java:106)
    at org.apache.myfaces.shared_impl.renderkit.html.util.ResourceUtils.renderDefaultJsfJsInlineIfNecessary(ResourceUtils.java:204)
    at org.apache.myfaces.shared_impl.renderkit.html.HtmlTextRendererBase.encodeEnd(HtmlTextRendererBase.java:69)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:535)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:626)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:622)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:622)
... 
```

我已将应用程序配置为使用 WebSphere Application Server 8 中包含的 IBM Portlet 桥接器。在 faces-config.xml 中，我添加了：

```
<view-handler>com.ibm.faces20.portlet.FaceletPortletViewHandler</view-handler>
<resource-handler>com.ibm.faces20.portlet.httpbridge.PortletResourceHandler</resource-handler>
<el-resolver>com.ibm.faces20.portlet.PortletELResolver</el-resolver> 
```

在 portlet.xml 中，我使用 IBM 类，例如：

```
...
<portlet-class>com.ibm.faces20.portlet.FacesPortlet</portlet-class>
<init-param>
    <name>com.ibm.faces.portlet.page.view</name>
    <value>/views/Home.xhtml</value>
</init-param>
... 
```

我发现当我 `<resource-handler>com.ibm.faces20.portlet.httpbridge.PortletResourceHandler</resource-handler>`从 faces-config.xml 中删除时，应用程序甚至可以使用标签。但是缺少**jsf.js**，所以所有 AJAX JavaScript 调用都失败了。因此，应用程序的行为就像不存在时一样。

我将不胜感激任何帮助或建议。

我现在正在尝试让 JSF 2.0 portlet 在 WebSphere Portal 8 上运行 5 天，几乎没有成功，而且很痛苦。**文档很少，没有源代码**（我必须反编译类！），这非常困难。蹩脚的专有闭源！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:19:53.623

好的，问题出在 in 的声明`Faces Servlet`中`web.xml`。的名称`Faces Servlet`在 WebSphere Portal 8 中非常重要。它必须是

> 人脸小服务程序

与确切的情况。像这样：

```
<servlet>
    <description>
        Servlet that does the job for serving JSF requests.
    </description>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
    <enabled>true</enabled>
    <async-supported>false</async-supported>
</servlet> 
```

如果您不遵守此 servlet 名称，则会如上所述引发晦涩的异常。这种行为对我来说非常奇怪和难以理解。没有找到有关 Faces Servlet 规范名称的任何信息。我不确定是否有任何其他 Portal 服务器需要这样的东西。

# php - 清理我的网络服务器上的 tmp 目录的命令

> ID：12315988
> 
> 赞同：1
> 
> 时间：2012-09-07T10:07:30.480
> 
> 标签：php, linux, file

我正在`write failed: No space left on device (28)`访问我的网站。所以我使用 ssh 检查了我的 tmp 大小，它是 100% 满的。

我可以通过 ssh 使用什么命令来释放 tmp 目录中的空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:10:58.937

您只需要删除文件

`rm -rf /path/to/tmp/*`

您需要调整`/path/to/tmp`包含临时文件的目录的路径。

**警告：**请记住，所有已删除的文件都已真正删除（= 丢失）。因此，在使用此命令之前，请先检查所有参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:11:01.540

```
cd /tmp
rm -fr * 
```

使用 PHP，我不知道您是否有权删除文件：

```
$files = glob('/tmp/*');
foreach($files as $file){
   if(is_file($file)){
       unlink($file);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:13:51.080

**rm -rf tmp/**

递归删除目录 tmp 及其中的所有文件，包括子目录。最好小心这个命令！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T10:29:05.563

为了克服您的问题，请按照其中一位海报的建议进行操作。

但是为了避免它在未来设立一个`cron`工作定期整理。

查看使用`find`系统命令查找可以安全删除的旧文件（即不会使用的临时文件）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T11:14:23.557

您可以删除 tmp 目录中的文件，只需转到 tmp 目录

```
cd tmp/ 
```

并运行以下命令

```
rm -rf ./ 
```

它将删除该目录中的所有目录。

和

```
rm -rf *.* 
```

它将删除该目录中的所有文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-30T10:08:36.720

测试这个命令。它*显示*文件？

（如果这不是您要清理的文件夹，请替换 /tmp/）

```
find /tmp/ -mtime +6 -exec ls   {} \; 
```

编辑您的 cron 表：

```
$> crontab -e 
```

添加一行：

```
* 6 * * * find /tmp/ -mtime +6 -exec rm -r   {} \; 
```

永久*删除*/tmp 中的所有文件（每天），这些文件是几天前的。

# android - 重启代码对我不起作用

> ID：12315991
> 
> 赞同：0
> 
> 时间：2012-09-07T10:07:44.643
> 
> 标签：android

我使用下面的示例代码以编程方式重新启动我的手机，但它对我不起作用。请在这里建议我做错了什么？

**重启.java**

```
public class Reboot extends Activity implements View.OnClickListener {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        ((ImageButton) findViewById(R.id.restartButton))
                .setOnClickListener(this);
    }

    public void onClick(View v) {
        try {
            Process proc = Runtime.getRuntime().exec(
                    new String[] { "su", "-c", "reboot" });
            proc.waitFor();
        } catch (Exception ex) {
            Log.i("Reboot Code", "Could not reboot", ex);
        }

        //This method also i did, kindy un comment this code and then check
        // try {
        // Runtime.getRuntime().exec(
        // new String[] { "/system/bin/su", "-c", "reboot now" });
        // } catch (IOException e) {
        // e.printStackTrace();
        // }
    }

} 
```

**清单.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.bootup_sample_app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.REBOOT"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Reboot"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:05:45.013

如果设备未获得 root 权限，则无法调用`su`生产设备。植根意味着您在设备上拥有更多访问权限/权限（这可能是安全风险）。如果您没有为 root 设置设备，那么它没有 root，因此您不能`su`.

# asp.net-mvc - 如何在 MVC 3 上为时间戳创建一个数组

> ID：12315993
> 
> 赞同：0
> 
> 时间：2012-09-07T10:07:51.213
> 
> 标签：asp.net-mvc, arrays, asp.net-mvc-3, arraylist, timestamp

我对 MVC 3 相当陌生，我的任务是创建一个待办事项列表，该列表具有每个自变量的时间戳，因此当一个变量发生更改时，更改时间的时间戳将出现在该变量的文本字段中并且不更改其他变量的其他时间戳，即每个变量都有一个单独的时间戳。我相信我只能或很可能通过创建一个数组来实现这一点。关于如何执行此操作的任何想法？

我的虚拟代码将不胜感激

这是我的模型示例，我按照本教程[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

* * *

公共类清单 { public int ID { get; 放; }

```
 public string Title { get; set; }

    public string Status { get; set; }

    [Display(Name = "Start Date")]
    public string Start_Date { get; set; }

    [Display(Name = "Complesion Date")]
    public string Complesion_Date { get; set; }

    public DateTime[] Timestamp
    {
        get { return timestamp; }
        set { timestamp = value; }

    [Display(Name = "Internal Review System Reference")]
    public string Internal_Review_System_Reference { get; set; }

    [Display(Name = "Assignment from Original Owner")]
    public bool Assignment_from_Original_Owner { get; set; }

    public class listDBContext : DbContext
{
    public DbSet<Checklist> List { get; set; }
} 
```

* * *

## 这是我的控制器代码示例

```
 public class SybreController : Controller 
{
    private listDBContext db = new listDBContext();
    private Checklist check = new Checklist();
    private string oldTitle { get; set; }
    private string oldStatus { get; set; } 
```

public ActionResult Edit(int id)//点击编辑按钮时调用{

```
 Checklist checklist = db.List.Find(id);
        this.oldTitle = checklist.Title;
        this.oldStatus = checklist.Status;
        //initAllArrays(checklist);//initialize our arrays with previous values
        return View(checklist);
    }
[HttpPost]
    public ActionResult Edit(Checklist checklist)
    {
        if (ModelState.IsValid)
        {              

            checklist.Timestamp = DateTime.Now;
            if (checklist.Title != this.oldTitle)
            {
                checklist.stamps[0] = DateTime.Now;
            }
            if (checklist.Status != this.oldStatus)
            {
                checklist.stamps[1] = DateTime.Now;
            }
            else
            { checklist.stamps[1] = checklist.stamps[1]; }

            db.Entry(checklist).State = EntityState.Modified;
            db.SaveChanges(); 
```

## return RedirectToAction("索引");

基本上我的模型中的每个变量都需要一个时间戳，以便在编辑时，时间戳对应于编辑时，我一直面临的问题是时间戳变量在所有变量中发生变化，而不仅仅是一个改变了。我只需要程序打印上次编辑时的前一个时间戳，如果已编辑，则在文本字段旁边显示当前时间。希望你能理解 -__-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:27:56.087

你不能用这种方式解决你的问题。Asp.net MVC 是无状态的，这意味着控制器的实例是根据每个请求创建的。这意味着您为设置时间戳执行的检查始终具有真实值，因为 oldTitle 和 oldStatus 为空值。