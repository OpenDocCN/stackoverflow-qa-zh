# StackOverflow 问答 10070000-10070999

# php - 如何从mysql数据库中选择当前日期和明天日期的数据

> ID：10070003
> 
> 赞同：-2
> 
> 时间：2012-04-09T07:00:44.223
> 
> 标签：php, mysql

我有一个数据库，我只想从当前日期的数据库中选择数据，然后在明天的日期

```
$query = mysql_query("SELECT      PatientMaster.PatientFirstName,PatientMaster.PatientLastName,PatientMaster.PatientID,ProviderAppointmentListings.ProviderNPI,ProviderAppointmentListings.AppointmentTime,ProviderAppointmentListings.AppointmentListingsID, '' FROM PatientMaster JOIN ProviderAppointmentListings ON PatientMaster.PatientID = ProviderAppointmentListings.PatientId LIMIT 0, 30");

$rows = array();
while($row = mysql_fetch_assoc($query)) {
$rows[] = $row;
}
echo json_encode($rows); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:06:21.203

```
WHERE YOUR_DATE_FIELD=CURDATE() or YOUR_DATE_FIELD=CURDATE()+ INTERVAL 1 DAY 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:20:57.780

SELECT * FROM tablename WHERE TO_DAYS(columnname) 在 TO_DAYS(NOW()) 和 TO_DAYS(NOW())+1 之间

# c - 使用 read() 从 PF_PACKET SOCK_RAW 读取会丢失数据包

> ID：10070008
> 
> 赞同：1
> 
> 时间：2012-04-09T07:00:59.387
> 
> 标签：c, linux, pcap

在 C 语言的 linux 上，设置接口 PROMISC 并使用原始套接字后，我可以通过 read() 读取接口上的传入数据包。

但是，它不会获取所有数据包。在从文件描述符读取下一个可用数据之前，Read() 会阻塞“长时间”（<1s，但数据包以每秒数百个速度流动）。

一定有什么遗漏或根本错误。

“使用 libpcap”不是有效的答案。我查看了他们的代码，找不到区别（libpcap 不会丢失数据包）

初始化 fd：

```
if ((fd = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_ALL))) < 0) {
    perror("socket(PF_PACKET) failed");
    return 1;
}

memset(&ifr, 0, sizeof(ifr));
strncpy(ifr.ifr_name, iface, sizeof(ifr.ifr_name) - 1);

if (ioctl(fd, SIOCGIFINDEX, &ifr) < 0) {
    perror("ioctl(SIOCGIFINDEX) failed");
    return 1;
}

memset(&sll, 0, sizeof(sll));
sll.sll_family = AF_PACKET;
sll.sll_ifindex = ifr.ifr_ifindex;
sll.sll_protocol = htons(ETH_P_ALL);

if ((ifr.ifr_flags | IFF_UP | IFF_BROADCAST | IFF_RUNNING) != ifr.ifr_flags) {
    ifr.ifr_flags |= IFF_UP | IFF_BROADCAST | IFF_RUNNING;
    if( ioctl( fd, SIOCSIFFLAGS, &ifr ) < 0 ) {
        perror("ioctl(SIOCSIFFLAGS) failed");
        return 1;
    }
}

if (bind(fd, (struct sockaddr *) &sll, sizeof(sll)) < 0) {
    perror("bind(ETH_P_ALL) failed");
    return 1;
}

if (ioctl(fd, SIOCGIFHWADDR, &ifr) < 0)
{
    perror("ioctl(SIOCGIFHWADDR) failed");
    return 1;
}

if (ifr.ifr_hwaddr.sa_family != ARPHRD_IEEE80211 &&
        ifr.ifr_hwaddr.sa_family != ARPHRD_IEEE80211_PRISM &&
        ifr.ifr_hwaddr.sa_family != ARPHRD_IEEE80211_FULL)
{
    if (ifr.ifr_hwaddr.sa_family == 1)
        fprintf(stderr, "\nARP linktype is set to 1 (Ethernet) ");
    else
        fprintf(stderr, "\nUnsupported hardware link type %4d ",
                ifr.ifr_hwaddr.sa_family);

    fprintf(stderr, "- expected ARPHRD_IEEE80211,\nARPHRD_IEEE80211_"
            "FULL or ARPHRD_IEEE80211_PRISM instead.  Make\n"
            "sure RFMON is enabled: run 'airmon-ng start %s"
            " <#>'\nSysfs injection support was not found "
            "either.\n\n", iface);
    return 1;
}

memset(&mr, 0, sizeof(mr));
mr.mr_ifindex = sll.sll_ifindex;
mr.mr_type = PACKET_MR_PROMISC;

if (setsockopt(fd, SOL_PACKET, PACKET_ADD_MEMBERSHIP, &mr, sizeof(mr)) < 0) {
    perror("setsockop(PACKET_MR_PROMISC) failed");
    return 1;
} 
```

读：

```
 while (caplen > 0) {
            if ((caplen = read(fd, p, read_size)) < 0) {
                perror("read failed");
                break;
            }
            p += caplen;
            read_size -= caplen;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:44:34.030

Libpcap 1.0 及更高版本可能也使用内存映射接口，但问题中的代码没有；这可能会有所作为。

请参阅 Linux 源代码中的 Documentation/networking/packet_mmap.txt 文件，但请注意，至少对于 TPACKET_V1 和 TPACKET_V2，内存映射缓冲区中的所有插槽都必须足够大以容纳来自网络适配器的最大可能数据包（例如，如果数据包有一个额外的标头，例如 802.11 的 radiotap 元数据标头，或者适配器正在执行 TCP 分段或重组，这可能比您想象的要大）。

还要确保您提供的套接字缓冲区（或内存映射环形缓冲区）与 libpcap 使用的一样大。

# certificate - 检查证书是否为通配符证书

> ID：10070009
> 
> 赞同：14
> 
> 时间：2012-04-09T07:01:01.673
> 
> 标签：certificate, x509certificate

我们有一个网站，我们想检查安装的证书是通配符证书还是仅绑定到特定 URL。可以通过简单的方式检查吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T04:18:17.720

浏览到您服务器上的安全页面，即：[https ://yoursite.com](https://yoursite.com)

单击 URL 栏中的挂锁并查看证书。要在 Chrome 中执行此操作，请单击`Connection`选项卡`Certificate Information`。

检查`Common Name (CN)`您的域名前是否包含 *。

例如。对于[https://www.google.com](https://www.google.com)

![*.google.com 证书](../Images/034a0990cd7f87c81a3643910355f5e7.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-26T03:32:25.977

这可以通过检查 SSL 主题中的公用名来完成。`openssl`您可以在 *NIX 客户端上使用 bash 命令。

例如，google.com 和 www.google.com 使用两种不同的 SSL。第一个是通配符，第二个是特定于域的。

```
$ echo | openssl s_client -connect google.com:443 2>/dev/null | openssl x509 -noout -subject | grep -o "CN=.*" | cut -c 4-
*.google.com
$ echo | openssl s_client -connect www.google.com:443 2>/dev/null | openssl x509 -noout -subject | grep -o "CN=.*" | cut -c 4-
www.google.com 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T07:05:01.680

您可以在其颁发者处查找证书——您应该能够看到它是颁发给 *.domain.com 还是 www.domain.com。例如，[威瑞信](https://securitycenter.verisign.com/celp/enroll/outsideSearch?application_locale=VRSN_US)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-08T18:58:40.627

与其他用于网络目的的在线工具类似，我发现这也很方便，非常简单地将您的主机名替换为您的 https 站点网址，它​​将解释您遇到的问题，以及哪些解决方案可以使您受益......

[https://www.sslshopper.com/ssl-checker.html#hostname=](https://www.sslshopper.com/ssl-checker.html#hostname=) {siteurl}

# android - Android，平板电脑和智能手机之间的屏幕支持问题

> ID：10070015
> 
> 赞同：0
> 
> 时间：2012-04-09T07:01:29.410
> 
> 标签：android, screen, tablet, smartphone

我有一个完全为智能手机设计的项目，现在，我需要支持新的 7"（三星 7" plus）平板电脑（不是带有 Froyo 2.2 OS 的旧 7"）。

我在清单文件中添加了以下代码：

```
<supports-screens 
        android:smallScreens="false"
        android:normalScreens="true"
        android:largeScreens="false"
        android:resizeable="true"
        android:anyDensity="true" /> 
```

当我在此平板电脑中运行应用程序时，新图标出现在屏幕的按钮右上角，并提供两个选项，“拉伸以填满屏幕”和“缩放以填满屏幕”。

因为我在第一个选项中没有此平板电脑的资源，所以我的 UI 不好，而选择第二个选项 UI 变得更好。

有没有办法使用“缩放以填满屏幕”运行我的应用程序并停用上面的图标？我不希望用户能够在它们之间切换。

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:54:17.317

对于未来的信息，

我发现这种方法很好用。

```
<supports-screens 
        android:smallScreens="false"
        android:normalScreens="true"
        android:largeScreens="false"
        android:xlargeScreens="false"
        android:resizeable="false"
        android:anyDensity="false" /> 
```

# c++ - C++ 运算符== 重载

> ID：10070020
> 
> 赞同：22
> 
> 时间：2012-04-09T07:02:10.330
> 
> 标签：c++, operator-overloading

> **可能重复：**
> [运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

以下重载 operator== 的方法有什么区别？

```
// stroustrup way
friend bool operator== (MyClass &lhs, MyClass &rhs); 
```

和

```
// as taught in other places, including caltech
bool MyClass::operator== (MyClass &rhs); 
```

哪种方式更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T07:27:34.457

```
// stroustrup way
friend bool operator== (MyClass &lhs, MyClass &rhs); 
```

参数应该是`const`：

```
friend bool operator==(const MyClass& lhs, const MyClass& rhs); 
```

这是首选，因为它在第一个参数可以隐式构造时起作用。例如，如果`std::string`只有一个成员函数`operator==`，那么`"abc" == my_std_string`就不会调用它！但是，可以通过从“abc”隐式构造一个字符串来调用非成员函数（更好的是在这种特殊情况下，一个单独的`bool operator==(const char*, const std::string&)`出于性能原因可以提供一个单独的函数，但重点仍然存在 - 非成员函数可以帮助确保运算符与任一侧的用户定义类型一起使用）。

另外，隐式构造函数有点危险——你要认真考虑使用它们的方便与危险。

同样，如果您有`ObjectOfAnotherClassType == ObjectOfMyClassType`，并且`AnotherClass`使用了诸如 之类的演员表操作符`operator MyClass() const`，那么非会员/朋友`operator==`将允许演员表参与并能够进行比较；会员`operator==`表格不会。

最后一点：如果没有其他方法可以访问您需要比较的数据，您只需将非成员设为`operator==`a 。`friend`否则，您可以在类外部声明/定义它，`inline`如果您希望在可能包含从最终链接到同一个可执行文件的多个翻译单元中包含的标头中的实现，则可以选择。不过没有太大的危害，并且使它成为`friend`将定义放在类模板中的唯一方法，您不必重复“ `template <typename ...>`”的东西和参数......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T07:16:29.137

首先是外部好友功能（免费功能）

```
friend bool operator== (MyClass &lhs, MyClass &rhs); 
```

二是成员函数

```
bool MyClass::operator== (MyClass &rhs); 
```

您应该始终使用第二种变体，然后您可以

您应该在以下情况下使用第一个变体：1）第一个参数是外部（库）类

```
friend ostream& operator<< (ostream &out, MyClass &m) 
```

2）算子的逻辑与你的类无关，必须单独实现

```
friend bool operator(const MyClass& my, const std::string& string_form) 
```

（因为您的班级无法了解比较运算符中可能需要的所有班级）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-09T07:05:26.000

这个 ：

```
friend bool operator== (MyClass &lhs, MyClass &rhs); 
```

是一个函数，它比较两个对象。

这个 ：

```
bool MyClass::operator== (MyClass &rhs); 
```

是成员函数。

您应该使用您的编码标准建议的那个，或者使用您喜欢的那个。没有一个更好。有些人（包括我自己）更喜欢将比较运算符作为一个函数，而另一些人则更喜欢它作为一个成员函数。

顺便说一句，参数应该是`const MyClass &`类型。

# artificial-intelligence - 垃圾邮件预防的最新技术

> ID：10070024
> 
> 赞同：3
> 
> 时间：2012-04-09T07:02:39.383
> 
> 标签：artificial-intelligence, spam, article, spam-prevention

垃圾邮件预防技术的最新技术是什么？

我已经阅读了 Paul Graham 关于贝叶斯过滤的文章。（[垃圾邮件](http://www.paulgraham.com/spam.html)和[更好的贝叶斯过滤](http://www.paulgraham.com/better.html)计划）

并想知道是否有更多最新的文章可用？（最好是AI相关的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:05:23.440

如果您试图阻止垃圾邮件单词、句子，例如“fasdhusdhfi”，而不是其他任何东西，您总是可以拥有单词及其同义词的数据库。然后，您可以检查输入在数据库中的已知单词是否少于 50%，您可以提出一个标志。您可以创建一个我不推荐的离线数据库，或者您可以使用一些在线数据库。对于单词列表，我建议

[http://thesaurus.com/](http://thesaurus.com/)

对于这些词的同义词列表，我建议

[http://www.synonyms.net/](http://www.synonyms.net/)

我认为这两个可能是上述目的的最佳选择，因为它们都有一个您可以使用的 API（对于[此](http://www.abbreviations.com/api.asp)页面上的 synonyms.net），因此它不需要解析返回的页面中的单词。

然后，您可以反过来将其与其他方法结合使用，如前所述，例如贝叶斯过滤。

虽然这并不真正适合您的 AI 需求，但它确实阻止了一系列消息。

为了满足您的“人工智能”要求，您可能能够适应[ALICE 的 Spam.aiml](http://www.alicebot.org/aiml/aaa/Spam.aiml)。它是[AIML](https://en.wikipedia.org/wiki/AIML)格式，但包含大量 4 符号垃圾邮件的排列。这样做的问题是它很慢。

Spam.aiml 的一种可能替代方法是使用英语语言规则来检测垃圾邮件并对其进行过滤。可以使用以下规则：

**每个单词必须至少有一个元音。为此，字母“Y”被视为元音。**

**没有一个单词连续有超过 3 个辅音。为此，“TH”被认为是一个字母（以免弄乱“strNGTH”之类的词）。**

**没有一个词长于 34 个字母。[此处](https://en.wikipedia.org/wiki/Longest_English_words)列出的词除外。**

**某些字母组合不能出现。这方面的一个例子是字母“R”和“C”在常规的非俚语对话中永远不会直接出现在彼此旁边。**

你可以有一个不可能组合的数据库。我通过对一个包含 6578 个单词的数据库运行 2 个字母的每个排列来制作一个小的，并得出以下结果：

```
df bf kf gf jk kj sj fj gj hj lj sl 
```

这些都是不可能的组合。当然，省略了诸如“zz”之类的组合。那些是：

```
aa bb cc dd ee ff gg hh ii jj kk ll mm nn pp qq rr ss tt uu vv ww xx yy zz 
```

'oo' 被省略，因为它出现在许多单词中，例如 'look'。

**长度超过 2 个字符并连续重复的字符串段将被标记为垃圾邮件。在字符串“lololololol”中，重复段是“lo”，并被标记为垃圾邮件。**

**同一个单词中超过 3 个相同的元音将被标记为垃圾邮件。例如：“oooouuuu”将被标记为垃圾邮件，因为“o”和“u”是重复超过 3 次的元音。**

**任何大于 1 个字符的单词都不能仅由元音组成。在这种情况下，“Y”不会被视为元音，以免误报“you”。**

**任何不符合这些规定 15% 或更多（拼写错误的余量）的输入都将被重定向到垃圾邮件。**

如果你决定修改 ALICE 的文件，你可以[在这里](http://www.alicebot.org/aiml/aaa/)得到很多。较新的版本可以在[ALICE 的 Google 代码页面上](http://code.google.com/p/aiml-en-us-foundation-alice/)找到。

您还可以使用拼写检查器来帮助检测垃圾邮件。您可以针对[PyEnchant](http://packages.python.org/pyenchant/)（用于 Python）等拼写检查器运行输入，并阅读建议。如果输入没有建议，那么在大多数情况下可以安全地假定它*是*垃圾邮件。

它并不完美，但它应该在有限的范围内。我做了一个小程序来演示这样的垃圾邮件过滤会产生什么结果。这是输出：

```
>>> fdsahjfsd
'fdsahjfsd' is spam since more than 3 consonants appear in a row
>>> fhsdjhfksd
'fhsdjhfksd' is spam since it has no vowel
>>> jfsdkjl
'jfsdkjl' is spam since it has no vowel
>>> dk
'dk' is spam since it has no vowel
>>> ddds
'ddds' is spam since it has no vowel
>>> uxxs
'uxxs' is not spam
>>> kd
'kd' is spam since it has no vowel
>>> ukd
'ukd' is not spam
>>> asdjaskljlaskjldkasjkljdklas
'asdjaskljlaskjldkasjkljdklas' is spam since it is too long
>>> hdjaskj
'hdjaskj' is spam since invalid sequences detected 
```

正如我之前所说，它并不完美，因为它会返回误报（例如“uxxs”），但这可以通过拼写检查实现来解决。

使用拼写检查实现的回退是您的垃圾邮件检测将基于字典中的单词数量。大多数拼写检查器只有前 10,000 个单词，因此一些不常见的单词可能会被阻止为垃圾邮件。但是，检查是否有超过 15% 的输入无效可以解决这个问题。

如果你觉得对你有帮助，可以从[这里](http://dev.halbot.co.cc/attachments/27/Spam%20Detection.zip)获取我制作的小程序。它是用 Python 编写的。

此外，正如这里的其他答案所说，“最先进的”垃圾邮件过滤器需要多种方法。

您可以使用[SpamAssasin](http://spamassassin.apache.org/)、[PyZor](http://sourceforge.net/projects/pyzor/)、[Reverend](http://bazaar.launchpad.net/~divmod-dev/divmod.org/trunk/files/head:/Reverend/)和[Orange](http://orange.biolab.si/download/)，但最好的办法可能是尝试将所有这些组合在一起。

如果你想为此使用 Lisp，这里有一篇关于 Lisp 中贝叶斯过滤的好[文章](http://www.paulgraham.com/spam.html)。

如果您想通过神经网络做到这一点，那么[这篇 Codeproject](https://www.codeproject.com/Articles/14188/Brainnet-Introducing-a-declarative-neural-network)文章可能会很有用。它利用一个简单易用的dll，示例代码几乎可以直接用于垃圾邮件过滤任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T18:10:00.177

我找到了这些文章：

*   [受免疫动力学交叉调节模型启发的自适应垃圾邮件检测：概念漂移研究](http://informatics.indiana.edu/rocha/ps/icaris08.pdf)

*   [使用字符 N-Gram 进行垃圾邮件检测](http://www.icsd.aegean.gr/lecturers/stamatatos/papers/SETN2006.pdf)

*   [使用人工神经网络(CLA_ANN)开发新的垃圾邮件检测持续学习方法](http://www.eurojournals.com/ejsr_42_3_15.pdf)

*   [基于社交网络的垃圾邮件检测学习方法](http://www.cse.ust.hk/~dyyeung/paper/pdf/yeung.ceas2007.pdf)

*   [受免疫动力学交叉调节模型启发的自适应垃圾邮件检测：概念漂移研究](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CDEQFjAB&url=http%3A%2F%2Fcctc.di.uminho.pt%2Fpublications%2Fpub-2010-056%2Fat_download%2Fpublication_file&ei=ilGET_bgKM65hAe5yKTXCA&usg=AFQjCNGkpENHOluAZiRe7Vd8ZS0aHv29Fg)

*   [为什么贝叶斯过滤是最有效的反垃圾邮件技术](http://www.gfi.com/whitepapers/why-bayesian-filtering.pdf)

也许对其他人有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T15:14:42.613

最先进的技术与其说是任何特定的算法，不如说是输入数据的质量和数量。要达到最先进的水平，您需要每天有数十万活跃用户和数百万条消息。换句话说，是 Gmail、Yahoo 或 Hotmail，或者有办法获得类似的海量实时数据。

将您的判决保存到最后一刻；准备好在用户请求邮件列表之前从用户的收件箱中提取邮件。找出值得信任的用户，并将他们的判断应用于所有其他用户的消息。尽可能多地收集外部输入（用户判断、发件人信誉、URL 目的地分析、您有什么），并将它们输入您的机器学习机器。

试图仅根据消息内容过滤垃圾邮件是失败的游戏；垃圾邮件发送者知道如何改变他们的信息，以至于贝叶斯分类器只能看到噪音。但是你可以用它来对付他们。SpamAssassin 对此有很多证明，但同样，您需要对实时数据进行动态分析才能真正做到这一点。我什至会声称，一旦你有足够的相关输入，你用于制定判决的精确方法是次要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T18:58:32.527

我已经（纯粹出于懒惰）使用[SpamAssassin](http://spamassassin.apache.org/)的贝叶斯实现有一段时间了，它的表现相当糟糕。

几个月前，我在我的武器库中添加了协同过滤系统[Vipul's Razor](http://razor.sourceforge.net/)和[Pyzor](http://sourceforge.net/apps/trac/pyzor/)，由 SpamAssassin 控制，提高了垃圾邮件分数。我会半定期地向这两个系统发送垃圾邮件。它仍然不完美，但我的手机现在不那么频繁了。

似乎“最先进”是有效技术的结合。

# spring-batch - StaxEventItemWriter 消除 由开始/结束文档方法添加

> ID：10070027
> 
> 赞同：1
> 
> 时间：2012-04-09T07:02:50.687
> 
> 标签：spring-batch

我创建了一个 spring-batch 作业。我的阅读器类从数据库中读取数据并返回具有以下结构的数据集对象。

```
@XmlRootElement
@XmlType(propOrder = { "start", "end", "users"})
public class DataSet implements Serializable {

    /**
     * Start datetime of this data set
     */
    private Date start;

    /**
     * End datetime of this data set
     */
    private Date end;

    /**
     * Providers involved in this data set
     */
    private List<User> users;
} 
```

等等......并且作者使用 StaxEventItemWriter 写入上述数据。生成的 xml 包含两个根标记元素。

```
<root>  //added by the startDocument and endDocument methods from stax writer. 
  <DataSet>......</DataSet>  // from the dataSet xsd annotation.
</root> 
```

我需要消除不覆盖 startDocument 和 endDocument 方法。

有没有办法通过配置来做到这一点。请紧急。

我的作家配置如下。

```
<bean id="testrWriter" class="com.test.writer.TestWriter"
        scope="step">
<property name="testXMLWriter" ref="testXMLWriter" />
<property name="baseDirectory" value"#{jobParameters['baseDirectory']}"></property>
</bean>

<bean id="testXMLWriter" class="org.springframework.batch.item.xml.StaxEventItemWriter">
   <property name="overwriteOutput" value="true" /> 
   <property name="marshaller" ref="testJaxb2Marshaller" /> 
</bean>

<bean id="testJaxb2Marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
    <list>
             <value>com.test.service.dto.DataSet</value>
    </list>
   </property> 
</bean 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T22:41:11.567

我将根设置为`!-- --`

终于得到了一个有效的xml。

```
<bean id="delegateWriter" class="org.springframework.batch.item.xml.StaxEventItemWriter">
    <property name="marshaller" ref="someMarshaller" />
    <property name="overwriteOutput" value="true" />
    <property name="RootTagName" value="!-- --"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-15T09:15:54.987

当我设置 rootTagName = "!-- --" 然后忽略结束根标记时，我覆盖了方法 endDocument(XMLEventWriter writer)。

```
protected void endDocument(XMLEventWriter writer) throws XMLStreamException {
            //
    if(this.getRootTagName().equalsIgnoreCase("!-- --")){
        return;
    }
    String nsPrefix = !StringUtils.hasText(getRootTagNamespacePrefix()) ? "" : getRootTagNamespacePrefix() + ":";
    try {

        bufferedWriter.write("</" + nsPrefix + getRootTagName() + ">");
    }
    catch (IOException ioe) {
        throw new DataAccessResourceFailureException("Unable to close file resource: [" + resource + "]", ioe);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-24T08:19:15.153

回复@user2922056 的解决方案。您不能以这种方式覆盖（无法访问 bufferedWriter）。而是调用 super 方法。

```
@Override
protected void endDocument(XMLEventWriter writer) throws XMLStreamException {
    if ("!-- --".equalsIgnoreCase(this.getRootTagName())) {
        return;
    } else {
        super.endDocument(writer);
   }
} 
```

As the *RootTagName* has been setted before to the value `"!-- --"` the method `startDocument()` will do the rest by adding a harmless comment in the xml.

# function - 我需要将 ifstream 传递给函数，以便将其添加到向量中

> ID：10070031
> 
> 赞同：0
> 
> 时间：2012-04-09T07:04:19.410
> 
> 标签：function, visual-c++, vector, ifstream

我是编程新手，需要一些帮助，谢谢！

我有一个名为 namelist.txt 的文本文件。我需要将 inFile 传递给一个函数，该函数可以将名称列表（以 firstname lastname 的格式，例如：chuck norris）添加到一个名为 vecStudent 的向量中。您如何将 inFile 传递给函数，如果可能的话，我将如何将名称添加到向量中？

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

ifstream readtoVec(); //function prototypes
int displayAll();
int add();
int remove();
int savequit();

int main()
{
char cInput;
string strFileName;
vector<string> vecStudent;
ifstream inFile;
ofstream outFile;

{
    cout << "Please Enter the data file name (with location): ";
    cin >> strFileName;

    inFile.open(strFileName.c_str());

    if (inFile.fail())

    {
        cout << "Input file error!" << endl;

        return -1;
    }

    // call a function to read the contents of the input file into vecStudent
    else
    {
        readtoVec (ifstream& inFile); 
```

我在这里收到一个名为“不允许类型名称”的错误

```
}

while (true)
{
    cout << "--------------------------------------" << endl;
    cout << " Student Record - Main Menu " << endl;
    cout << "--------------------------------------" << endl;
    cout << " Enter 1 to display ALL students " << endl;
    cout << " Enter 2 to add a student name " << endl;
    cout << " Enter 3 to delete a student name " << endl;
    cout << " Enter 4 to SAVE and quit the program " << endl;
    cout << "--------------------------------------" << endl;
    cout << " Enter menu option: " ;
    cin >> cInput;
    switch (cInput)
    {
        case '1':
            //call function
            break;
        case '2':
            //call function
            break;
        case '3':
            //call function
            break;
        case '4':
            //call function
            return 0;
        default:
            cout << "invalid input" << endl;
            break;
    }

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:44:49.627

> ifstream readtoVec(); //函数原型

这表示`readtoVec()`返回一个`ifstream`，并且不接受任何参数，但在这里：

> readtoVec (ifstream& inFile);

当你调用`readtoVec`. 至少根据您尝试调用它的方式，声明应该类似于`void readtoVec(ifstream &);`

当你调用它时，你*没有*指定参数的类型，所以调用看起来像：`readtoVec(inFile);`

# flash - 如何打开 .swf 以查看内容

> ID：10070032
> 
> 赞同：11
> 
> 时间：2012-04-09T07:04:28.847
> 
> 标签：flash

我想从 Flash 网页中获取一些图像，并且我得到了 .swf 文件。有没有办法打开 .swf 并获取该文件的内容。我不是在问如何播放文件或查看文件。如果可能的话，我实际上想打开文件并查看其内容。我对闪存一无所知，并且已经尝试过搜索。这可能是不可能的，因为我没有通过搜索找到任何答案，但我想先在这里尝试。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T07:07:58.520

是的，完全有可能，SWF 基本上是资产和字节码的压缩包装。尝试以下工具之一：[http ://www.swftools.org/](http://www.swftools.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T07:44:35.913

有几种方法可以做到这一点，我可以告诉你 2：

1.  SWF 反编译器 - 最简单的一个
2.  SWF Mill 在 linux 下运行出色，可导出以 Base64 编码的图像

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T07:18:25.020

Swf 文件是一种编译后的二进制文件。如果您想获取其内部内容，您将反编译该文件。这不是常规方式。无论如何，互联网上有一些工具可以做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T21:56:26.700

使用 Adob​​e Flash CS6 Professional 打开文件。然后您可以将其转换为 .FLA 并查看和编辑其内容。SWF 文件是使用此程序制作的，因此它应该能够轻松打开和编辑。

* * *

## 回答 #5

> 赞同：-10
> 
> 时间：2013-10-31T13:38:11.697

只需使用您的浏览器（火狐**、Chrome**）打开

# midi - 替换 0xC0 用 0xC000 “重置” MIDI 乐器？

> ID：10070038
> 
> 赞同：0
> 
> 时间：2012-04-09T07:05:17.110
> 
> 标签：midi, midi-instrument

我有一些由 Sibelius (v.4?..) 制作的 MIDI 文件，其中包含“不寻常”的乐器；我听不见旋律。我决定我需要将乐器“重置”为 0（我相信原声三角钢琴）。

因此，我使用[python-midi](https://github.com/vishnubob/python-midi/)和[mingus](http://code.google.com/p/mingus/)编写了一个 Python 程序；这些程序可以改变 MIDI 乐器，但它们都极大地改变了节奏。

[Rosegarden](http://www.rosegardenmusic.com/)很好地完成了这项工作，但我不能批量使用它。

接下来，在阅读了一些 MIDI 格式信息（例如[here](http://www.sonicspot.com/guide/midifiles.html)和[here](http://faydoc.tripod.com/formats/mid.htm)）之后，我编写了一个简单的 Python 脚本（见下文），它只是将一些字符串替换为另一个字符串 --- 将 0xC0[byte] 替换为 0xC000 等等。

现在那些 MIDI 文件听起来不错，我可以听到所有的声音。

所以，我的问题是——这样做是否“安全”（在任何意义上）？我怎样才能更好地更换乐器？如何更好地“检测” MIDI 文件中的 0xCx 命令？

谢谢！

```
#!/usr/bin/env python
#

import sys
import re

patt = re.compile('(\xC0|\xC1|\xC2|\xC3|\xC4|\xC5|\xC6|\xC7).')

try:
    filein = sys.argv[1]
except IndexError:
    print "Specify input file as an argument."
    sys.exit(1)

try:
    fileout = sys.argv[2]
except IndexError:
    fileout = '%s-out2.mid' % filein.replace('.mid', '')

filein_data = open(filein, 'rb').read()

open(fileout, 'wb').write(patt.sub('\1\x00',filein_data)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:13:02.743

简单地替换所有0xC不安全？？？0xC?00的字节，主要是因为0xC??? 可能指示事件的增量时间，但实际上并不是程序更改事件的一部分。不小心修改了一个 delta 时间会改变所有后续事件的关闭时间，如果它是多轨组合的一部分，这听起来会很糟糕。

至于解决方案，我怀疑是否有一个正则表达式可以检测程序更改事件，而不会同时获取增量时间。我修改 MIDI 的唯一经验是使用我编写的[Java 库](http://code.google.com/p/android-midi-lib/)，您可以使用以下代码完成任务：

```
MidiFile input = new MidiFile(INPUT_FILE);

for(MidiTrack T : input.getTracks()) {
    Iterator<MidiEvent> it = T.getEvents().iterator();
    while(it.hasNext()) {
        MidiEvent E = it.next();
        if(E instanceof ProgramChange) {
            E.setProgramNumber(0);
        }
    }
}

input.writeToFile(OUTPUT_FILE); 
```

我是徒手写的，所以你可能不得不使用一些异常捕获，但它相当简单。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:33:15.983

这对我有用。不知道什么是错的prevoiusly。`python-midi`很好。

```
#!/usr/bin/env python
#
# Sets all instruments' numbers to zero.
#

import sys
import midi

try:
    infile = sys.argv[1]
except IndexError:
    print "Specify input file as an argument, please."
    sys.exit(1)

try:
    outfile = sys.argv[2]
except IndexError:
    outfile = '%s-out.mid' % infile.replace('.mid', '')

midi_data = midi.read_midifile(infile)

for track_idx in range(len(midi_data)):
    for event in midi_data[track_idx]:
        if isinstance(event, midi.ProgramChangeEvent):
            event.data = map(lambda x: 0, event.data)

midi.write_midifile(outfile, midi_data) 
```

# ruby-on-rails - 如何在 Rails 中使用 ajax 进行私人消息传递

> ID：10070039
> 
> 赞同：0
> 
> 时间：2012-04-09T07:05:19.470
> 
> 标签：ruby-on-rails, ajax, message

我想知道如何使用 ajax 在 2 个用户之间进行消息传递。我真的不知道该怎么做。我本质上想要一个 /messages URL，其中将有一个“已发送消息”按钮和一个“已接收消息”按钮。当用户单击“已发送消息”时，它将异步显示所有已发送消息，“已接收消息”也是如此。

我创建了两个部分来分别显示它们中的每一个，但我有点迷失在 Message#index 中放置的内容（显示 /messages 的位置）。我应该在那里填写什么样的表格？我读到，因为它调用了我的索引函数，所以我应该在函数内部有一个 .js 的 responds_to，然后创建一个名为 index.js 的文件？

对不起，但这个 ajax 对我来说仍然是新的。非常感谢您的帮助 = )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:45:38.310

回答您如何构建视图、部分和控制器代码会很复杂，但我可以向您展示解决问题的一般概念。
这可以分为以下几个步骤：
1\. 您必须提供一种方法让用户在您的系统中注册。
2\. 每个用户都应该有权访问控制器（例如，消息）。
3\. 消息控制器应该有几个动作来提供用户创建和发送消息。此外，您应该有一些`index`类似的操作（以及它的`.js`表示）来显示传递给该用户的消息。要实现这一点，您可以使用`polling for changes method`此处显示的良好：[轮询更改](http://railscasts.com/episodes/229-polling-for-changes). 要创建新消息，您实际上不需要使用 AJAX。它可以是在 MessagesController 中发送一些文本以执行操作的简单形式。消息可以保存在数据库中，然后`index`通过“轮询更改”技术在视图上呈现。

我希望我给了你一些解决 ypur 问题的线索。

# android - MacOSX 上的 Android/Eclipse 安装 - adb 不工作

> ID：10070042
> 
> 赞同：2
> 
> 时间：2012-04-09T07:05:37.150
> 
> 标签：android, failed-installation, android-sdk-tools

计算机详细信息：
Macbook，2008 年末
Apple Mac OS X 10.7.3 Intel

Eclipse 详细信息：
面向 Web 开发人员的 Eclipse Java EE IDE。
版本：Indigo Service Release 2内部版本
ID：20120216-1857

我无法在我的机器上安装或运行 adb，我希望解决这个问题。

在 Eclipse 上重新安装 ADT 插件并重新下载新的 AndroidSDK zip 文件后，我运行了 Android SDK Manager 插件并继续下载包含 adb 的平台工具。

这是我收到的日志消息：

```
Installing Android SDK Platform-tools, revision 11
Stopping ADB server failed (code -1).
Installed Android SDK Platform-tools, revision 11
Stopping ADB server succeeded.
Starting ADB server succeeded.
Done. 1 package installed.
Done loading packages. 
```

我在 bash 中访问了我的目录：

```
/Users/Tapehead/Documents/Android/platform-tools 
```

我尝试运行各种 adb shell 命令，但我得到的是：

```
-bash: adb: command not found 
```

我认为这意味着它没有正确安装。

请帮我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:30:07.923

你应该把

> /Users/Tapehead/Documents/Android/平台工具

使用以下命令进入 .profile 或 .bashrc 中的 PATH：

```
export PATH=~/Documents/Android/platform-tools:$PATH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:37:30.133

`android-sdk-macosx/platform-tools`在 PATH 环境变量中包含指向的路径。在您的`~/.profile`文件中添加该行

```
export PATH=$PATH:/path/to/android-sdk-macosx/platform-tools 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T07:10:28.813

我认为您需要下载平台工具，

转到 Android SDK 文件夹，运行/执行“android.sh”文件，

Android SDK 管理器将打开，它有第一行“工具”确保您已安装“工具”。

![在此处输入图像描述](../Images/c9c3a4cab0713152dfb0e984887f1468.png)

谢谢你，

# php - 将php数组值放入javascript数组

> ID：10070044
> 
> 赞同：1
> 
> 时间：2012-04-09T07:06:00.657
> 
> 标签：php, jquery

我需要在 php 中返回一个数组并在 javascript 中使用它。当我打印返回值时，它会打印空字符串。我怎么会犯错？

```
$.ajax({
     type: "POST",
     url: "sort2.php",    
     success: function(result){      

     alert(result[0]);                                            

    }
}); 
```

//sort2.php

```
$data[0] = "book";
$data[1] = "pen";
$data[2] = "school";
echo json_encode($data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T07:07:26.367

您可以将`dataType`您的`$.ajax()`请求更改为`json`并让 jQuery 自动从字符串解码您的 JSON 对象。

或者，您可以添加到您的 PHP`header('Content-Type: application/json')`和 jQuery 也应该自动解码您的 JSON 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T07:09:28.860

您必须解析 JSON 数据

```
$.ajax({
     type: "POST",
     url: "sort2.php",    
     success: function(result){      

     //Parse Json to Array 
     result = jQuery.parseJSON(result);
     alert(result) // would output the result array                                      

    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T07:40:12.887

在您的`sort2.php`文件中，更改以下代码：

```
echo json_encode($data); 
```

到

```
header('Content-Type: application/json');
echo json_encode($data); 
```

它的作用是告诉客户端浏览器将响应视为 JSON 数据并进行相应的解析，而不是默认的 HTML。

此外，请确保`sort2.php`文件与您进行 ajax 调用的 html 文件位于同一文件夹中。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T07:46:42.020

您还可以使用 jQuery 的 $.post 方法，如下所示：（因此您无需更改 php 脚本，请参见此处：[jQuery Post](http://api.jquery.com/jQuery.post/)）。

```
$.post(
    'sort2.php', //script you request
    {}, //post-data you want to send
    function(result) {
        alert(result[0]); /*i like more: console.log(result); this way you can see it in firebug e.g.) */
    },
    'json' //data-type you expect
); 
```

# php - 如何在openstreetmap中从地图外部打开标记？

> ID：10070045
> 
> 赞同：1
> 
> 时间：2012-04-09T07:06:01.447
> 
> 标签：php, javascript, jquery, map, openstreetmap

我在我的项目中使用了openstreetmap，之前我在这个项目中使用了google map，但是请求限制低于我的客户需要的，他负担不起google增加请求限制的费用，所以我不得不切换到openstreetmap，我我在openstreetmap文档中搜索了很多，但没有得到如何从地图外的链接打开标记的线索，你能帮我解决这个问题吗？这对我来说将是一个巨大的帮助。

提前致谢

嘿，我自己解决了，这是从地图外部打开标记弹出窗口的代码。

```
       函数 openMarker(id,lon,lat,html)
       {
        jQuery(".olPopup").remove();
        marklonLat = new OpenLayers.LonLat(lon,lat)
          。转换（
            new OpenLayers.Projection("EPSG:4326"), // 从 WGS 1984 转换
            map.getProjectionObject() // 到球形墨卡托投影
        );

        var size = new OpenLayers.Size(200,200);
        popup = new OpenLayers.Popup(id,marklonLat,size,html,true,'' , {keepInMap: true });

        map.addPopup(弹出);
    }

```

jQuery(".olPopup").remove(); -- 这将在您打开新的弹出窗口之前关闭地图上的所有弹出窗口

html - 这是弹出窗口中的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:19:31.660

试试这个：

传递要在工具提示中显示的标记、经度、纬度和 html 的唯一 ID。

```
函数 openMarker(id,lon,lat,html)
    {
        jQuery(".olPopup").remove();
        marklonLat = new OpenLayers.LonLat(lon,lat)
          。转换（
            new OpenLayers.Projection("EPSG:4326"), // 从 WGS 1984 转换
            map.getProjectionObject() // 到球形墨卡托投影
        );

 `var size = new OpenLayers.Size(200,200);
    popup = new OpenLayers.Popup(id,marklonLat,size,strhtml,true,'' , {keepInMap: true });

    map.addPopup(popup);
}` 

```

# programming-languages - 如何从 AST 节点获取行号（Jison）

> ID：10070047
> 
> 赞同：4
> 
> 时间：2012-04-09T07:06:14.647
> 
> 标签：programming-languages, bison, jison

我正在使用 Jison 构建一个简单的计算器语言，其中包含变量。我希望这些变量的工作方式类似于 JavaScript，即您必须`var`第一次使用关键字对其进行初始化。用我的语言，如果变量重新初始化，我想显示一个错误。

```
var myVar = 4
var myVar = 3
// Error, cannot reinitialise variable myVar on line 2 
```

我的问题是，如何获取 AST 节点的行号？在我的语法文件中，我可以将解析器中的行号传递给我的`AssignVariable`对象，但我想知道是否有更好的方法来做到这一点？

```
stmt
    : 'PRINT' expr
        { $$ = new yy.Print($2) }
    | 'VAR' 'IDENTIFIER' 'ASSIGN' expr
        { $$ = new yy.AssignVariable($2, $4, $3); $$.lineNo = yylineno }
    | 'IDENTIFIER' 'ASSIGN' expr
        { $$ = new yy.SetVariable($1, $3, $2) }
    ; 
```

我还需要编译器中其他节点的行号，以进行其他类型的错误检查。

这个问题的一个更高级的结论可能是：使用 Jison（或类似的）检测和处理编译时错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T02:30:28.570

通过在我的编译器中对生成的解析器进行猴子修补，我能够将行号注入到我的 AST 节点中。这是 Zach 提出的。*掌心*

```
// load in your generated parser
var parser = require('./parser');

// store the current performAction function
parser._performAction = parser.performAction;

// override performAction
parser.performAction = function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$) {
    // invoke the original performAction
    var ret = parser._performAction.call(this, yytext, yyleng, yylineno, yy, yystate, $$, _$);
    // Do your own stuff
    if (this.$._type) {
        this.$.lineNo = yylineno;
    }
    return ret;
} 
```

# java - 如何为 JTextField 设置标签？

> ID：10070049
> 
> 赞同：2
> 
> 时间：2012-04-09T07:06:18.397
> 
> 标签：java, swing, jlabel, layout-manager

如何修复网关的标签，这是唯一未显示的标签。其余的都在显示。

```
 public TextLabelMirror() {

    // DHCP
    String[] petStrings = { "Static", "Auto" };
    JPanel namePanel = new JPanel(new BorderLayout());
    JLabel nameLabel = new JLabel("DHCP Mode: ");
    nameLabel.setDisplayedMnemonic(KeyEvent.VK_N);
    final JComboBox nameTextField = new JComboBox(petStrings);    
    nameLabel.setLabelFor(nameTextField);
    namePanel.add(nameLabel, BorderLayout.WEST);
    namePanel.add(nameTextField, BorderLayout.CENTER);

    // IP - Address 
    JPanel namePanel0 = new JPanel(new BorderLayout());
    JLabel nameLabel0 = new JLabel("IP: ");
    nameLabel0.setDisplayedMnemonic(KeyEvent.VK_N);
    final JTextField nameTextField0 = new JTextField(20);           
    nameLabel0.setLabelFor(nameTextField0);
    namePanel0.add(nameLabel0, BorderLayout.WEST);
    namePanel0.add(nameTextField0, BorderLayout.CENTER);

    // NetMask
    JPanel namePanel1 = new JPanel(new BorderLayout());
    JLabel nameLabel1 = new JLabel("Netmask: ");
    nameLabel1.setDisplayedMnemonic(KeyEvent.VK_N);
    final JTextField nameTextField1 = new JTextField(20);       
    nameLabel1.setLabelFor(nameTextField1);
    namePanel1.add(nameLabel1, BorderLayout.WEST);
    namePanel1.add(nameTextField1, BorderLayout.CENTER);

    // Gateway
    JPanel namePanel2 = new JPanel(new BorderLayout());
    JLabel nameLabel2 = new JLabel("Gateway: ");
    nameLabel2.setDisplayedMnemonic(KeyEvent.VK_N);
    final JTextField nameTextField2 = new JTextField(20);       
    nameLabel2.setLabelFor(nameTextField2);
    namePanel2.add(nameLabel2, BorderLayout.WEST);
    namePanel2.add(nameTextField2, BorderLayout.WEST);

    // Save now
    JPanel namePanel3 = new JPanel(new BorderLayout());
    final JButton nameTextField3 = new JButton("Save");       
    namePanel3.add(nameTextField3, BorderLayout.CENTER); 
    ....

  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T07:34:09.377

您似乎已将它们都添加到 WEST。我假设您打算将 nameTextField2 添加到 CENTER 或其他内容。

```
namePanel2.add(nameLabel2, BorderLayout.WEST);
namePanel2.add(nameTextField2, BorderLayout.WEST); 
```

像这样：

```
namePanel2.add(nameLabel2, BorderLayout.WEST);
namePanel2.add(nameTextField2, BorderLayout.CENTER); 
```

# objective-c - 在表格视图下画一条垂直线

> ID：10070057
> 
> 赞同：1
> 
> 时间：2012-04-09T07:07:37.790
> 
> 标签：objective-c, ios, uitableview

我想在 SectionIndex 列和单元格内容视图之间画一条垂直线。我怎样才能做到这一点？

![使用表数据和排序键拆分表视图](../Images/a4aab0f47c5881b647b3906b92b07f87.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T07:24:42.740

参考这篇文章：

[如何在 iphone sdk 的表格视图中添加垂直线？](https://stackoverflow.com/questions/3836823/how-to-add-vertical-lines-to-a-table-view-in-iphone-sdk)

请参阅上面帖子中的**Kris Markel 。**它建议这个链接：

[http://www.iphonedevx.com/?p=153](http://www.iphonedevx.com/?p=153)

**注意：**我已经从整个链接中复制了代码并将其粘贴到此处，以确保即使链接将来出现故障，答案仍然有用：

> UITableView 可能是 iPhone 上最常用的视图。它很灵活，用户界面非常适合在 iPhone 上使用。有很多关于如何将多个项目添加到 UITableViewCell 的示例。但是，我需要在更传统的电子表格样式网格中呈现一些数据。结果运行良好，使我能够在屏幕上打包大量信息，如果没有垂直网格，这些信息很难理解。我将在这里展示一个非常简化的版本，您可以使用它向 UITableView 添加垂直线。
> 
> **首先我们需要创建一个 UITableViewCell 的子类。这样我们就可以覆盖drawrect并绘制我们的线条**并添加一个数组来保存我们将绘制线条的位置列表。

```
@interface MyTableCell : UITableViewCell {
    NSMutableArray *columns;
}
- (void)addColumn:(CGFloat)position;
@end 
```

> 在这个简化的示例中，我们将在 UITableViewController 的单元格中保留实际文本的位置并手动放置（完整的源代码附在末尾）。我们只是提供了一种绘制垂直线来制作网格的机制。通过调用 addColumn 添加列位置：

```
- (void)addColumn:(CGFloat)position {
    [columns addObject:[NSNumber numberWithFloat:position]];
} 
```

> 现在让我们覆盖drawRect。在其中我们获取当前图形上下文并设置线条颜色和宽度。然后我们遍历列数组，在数组中存储的每个位置绘制一条从单元格行顶部到底部的线。

```
- (void)drawRect:(CGRect)rect {
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    // Use the same color and width as the default cell separator for now
    CGContextSetRGBStrokeColor(ctx, 0.5, 0.5, 0.5, 1.0);
    CGContextSetLineWidth(ctx, 0.25);

    for (int i = 0; i &lt; [columns count]; i++) {
        CGFloat f = [((NSNumber*) [columns objectAtIndex:i]) floatValue];
        CGContextMoveToPoint(ctx, f, 0);
        CGContextAddLineToPoint(ctx, f, self.bounds.size.height);
    }

    CGContextStrokePath(ctx);

    [super drawRect:rect];
}
To add columns to the view just call

[cell addColumn:50];
when you’re building each cell.

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *MyIdentifier = [NSString stringWithFormat:@"MyIdentifier %i", indexPath.row];

    MyTableCell *cell = (MyTableCell *)[tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    if (cell == nil) {
        cell = [[[MyTableCell alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier] autorelease];

        UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(0.0, 0, 30.0,
                                                           tableView.rowHeight)] autorelease];
        [cell addColumn:50];
        label.tag = LABEL_TAG;
        label.font = [UIFont systemFontOfSize:12.0];
        label.text = [NSString stringWithFormat:@"%d", indexPath.row];
        label.textAlignment = UITextAlignmentRight;
        label.textColor = [UIColor blueColor];
        label.autoresizingMask = UIViewAutoresizingFlexibleRightMargin |
        UIViewAutoresizingFlexibleHeight;
        [cell.contentView addSubview:label]; 

        label =  [[[UILabel alloc] initWithFrame:CGRectMake(60.0, 0, 30.0,
                                                            tableView.rowHeight)] autorelease];
        [cell addColumn:120];
        label.tag = VALUE_TAG;
        label.font = [UIFont systemFontOfSize:12.0];
        // add some silly value
        label.text = [NSString stringWithFormat:@"%d", indexPath.row * 4];
        label.textAlignment = UITextAlignmentRight;
        label.textColor = [UIColor blueColor];
        label.autoresizingMask = UIViewAutoresizingFlexibleRightMargin |
        UIViewAutoresizingFlexibleHeight;
        [cell.contentView addSubview:label];
    }

    return cell;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T04:08:56.963

我在 cellForRowAtIndexPath 中使用了以下代码，并且运行良好。

```
static NSString *reuse = @"reuse";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuse];

if(cell == nil)
 {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:reuse];
    cell.textLabel.font = [UIFont boldSystemFontOfSize:12.0f];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
}

 [cell.contentView  setBounds:CGRectMake(cell.bounds.origin.x, cell.bounds.origin.y, 222,60)];

NSString *year = [self.keys objectAtIndex:[indexPath section]];
NSArray *movieSection = [[self.dataAllArtists objectForKey:year] valueForKey:@"row"];
NSDictionary *performanceDic = [movieSection objectAtIndex:[indexPath row]];

cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

 cell.textLabel.text = [NetworkData parseString:[performanceDic valueForKey:@"performance_name"]];

    int x;
    switch ([genreId intValue]) 
    {
     case 1:
      x=cell.contentView.bounds.size.width+19;
      break;
     case 3:
      x=cell.contentView.bounds.size.width+26;
      break;
      case 6:
      x=cell.contentView.bounds.size.width+16;
      break;
      case 7:
      x=cell.contentView.bounds.size.width+28;
      break;
     default:
      break;
    }

        for(UIView *view in [tableView subviews])
        {
         if([[[view class] description] isEqualToString:@"UITableViewIndex"])
         {
          [view setBackgroundColor:[UIColor whiteColor]];
         }
        }

  [cell.textLabel setLineBreakMode:UILineBreakModeWordWrap];
  [cell.textLabel setNumberOfLines:0];

  UIView *lineView = [[[UIView alloc] initWithFrame:CGRectMake(x,0,1, cell.contentView.bounds.size.height+2)] autorelease];

  lineView.backgroundColor = [UIColor lightGrayColor];
  [cell.contentView addSubview:lineView];

return cell; 
```

# c# - 单元测试适配器抛出异常：System.NullReferenceException：对象引用未设置为对象的实例

> ID：10070059
> 
> 赞同：1
> 
> 时间：2012-04-09T07:07:41.280
> 
> 标签：c#

我创建了一个测试项目，它具有测试功能。

```
public void TestMethod1()
        {
            Logger.Instance.WriteLog("hello", false);
            int actual = Obj.Addition(4, 5);
            int expected = 9;
            Assert.AreEqual(actual, expected);
        } 
```

我已经创建了这个测试方法的负载测试，但是当我尝试执行负载测试时，所有测试都失败了，它显示错误单元测试适配器抛出异常：System.NullReferenceException：对象引用未设置为对象的实例。

错误是在语句 Logger.Instance.WriteLog("hello", false); 如果此语句不存在，则负载测试成功执行。logger 类只是在文本文件中写入日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:11:07.283

听起来你`Logger.Instance`可能是空的 - 这个记录器通常需要某种初始化吗？在使用它之前，请确保您已正确初始化它。

堆栈跟踪应该*准确地*确定`NullReferenceException`被抛出的位置 - 也许它在`Logger.WriteLog`.

# c - 处理小数的简单 C 程序

> ID：10070061
> 
> 赞同：-1
> 
> 时间：2012-04-09T07:07:49.140
> 
> 标签：c, floating-point, decimal, average

> **可能重复：**
> [与浮点文字比较的奇怪输出](https://stackoverflow.com/questions/1839422/strange-output-in-comparision-of-float-with-float-literal)

所以程序只是读入一堆数字，然后通过除以输入的总数来找到平均值。但是，最终结果最后会增加几个小数，我不确定为什么会这样。

对于这个给定的输入：483、10、3051、188、200、0

输出应该是 786.4 但它是 786.400024。我究竟做错了什么？先谢谢各位了。

```
int main(int argc, char** argv)
{
    int averageOfNumbers = 0;

    printf("Enter the sequence of numbers:");
    int nextNumber;
    float numberCounter = 0;
    do
    {
            scanf("%d", &nextNumber);
            if(nextNumber > 0)
            {
                    numberCounter++;
                    averageOfNumbers += nextNumber;
            }
    } 
    while(nextNumber > 0);
    float finalAverage = (float) (averageOfNumbers/numberCounter);
    averageOfNumbers = averageOfNumbers/numberCounter;
    printf("Average of the numbers in the sequence is %f\n", finalAverage); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T07:33:02.813

浮点数提供了对实数的精确但不精确的近似。（精确度取决于它们的大小：您使用的浮点类型中有多少位可用。）

IEEE 754 浮点（在许多计算机上使用的非常流行的表示）使用二进制。这意味着精确表示二进制分数，例如 1/2、1/4、1/8 及其组合：3/8、5/16 等（在可用精度位数的限制内）。不是基于 2 的幂的分数不能精确表示。

数字 1/10 或 0.1 没有精确的表示。当您将 0.1 输入机器时，它会被转换为一个具有许多接近 0.1 的二进制数字的值。当您将其打印回来`printf`或您拥有什么时，您会`0.1`再次得到，因为该`printf`功能将其四舍五入，因此它看起来就像`0.1`被精确表示：`0.1`进入机器，天哪，`0.1`出来了。假设需要 10 位小数的精度才能看到`0.1`与实际值之间的差异，但您只打印到 8 位。好吧，它当然会显示为`0.1`. 您的浮点打印例程已经消除了错误！

C printf 中的`%f`转换说明符将使用更多位数来表示较大的数字，因为它使用小数点后的固定位数，默认为六位。因此，例如 0.002 将打印为 0.002000。但是数字 123456 将打印为 123456.000000。数量级越大，打印的有效数字就越多。当您使用 %f 打印 786.4 时，您实际上是在要求 9 位小数的精度。三个用于 786 整数部分，然后是六个。

您使用`float`的很可能是 32 位 IEEE 754 浮点数。这只有 24 位精度。（1 位用于符号，7 位用于二进制指数，剩下 24 位。） 24 位仅相当于大约 7 个十进制数字的精度！

因此，您要求机器将 786.4（它的表示不准确，记住！）从仅适用于大约 7 个十进制有效数字的浮点表示中打印到 9 个有效数字。您要求再提供两位不存在的精度，因此得到两位错误数字。

所以你可以做的是使用更广泛的类型`double`和/或改变你打印结果的方式。不要要求这么多有效数字。例如尝试`%.3f`（小数点后三位）。

顺便说一句，C 中的`float`类型应该很少使用。您通常希望使用 type `double`。`float`有它的用途，例如在大型数组中节省空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:32:37.683

使用双精度将解决您的问题。浮点数的准确性和精度是问题的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:36:11.750

浮点类型不能完全准确地表示所有数字——许多数字只能用浮点近似表示；这意味着，给定足够多的有效数字，您最终会看到那些无法完全适应表示的数字的精度损失。

使用**浮点**数据类型的问题在于它是浮点类型中最不准确的。（C 和 C++ 中的默认浮点类型是**double** - 这是您应该使用的类型；您应该避免使用**float**，除非您有其他令人信服的理由使用它）。在现代 32 位桌面平台上，对于某些近似数字，**浮点数**可能仅精确到大约 6-7 位有效数字，同一平台上的**双**精度数对于相同数字可能精确到大约 13-14 sf（注意：这是有效数字而*不是*小数位！）。

我强烈建议您花时间阅读浮点数的工作原理（将其输入谷歌，您会找到大量解释！）；了解它们在内部的表示方式将帮助您成为更好的程序员

# ruby-on-rails - 无法安装 Ruby 1.9.3

> ID：10070062
> 
> 赞同：1
> 
> 时间：2012-04-09T07:07:49.857
> 
> 标签：ruby-on-rails, ruby, rubygems, rvm

我尝试使用 RVM 安装 Ruby 1.9.3。似乎它安装没有错误，但 Ruby 的版本仍然是 1.8.7。

有没有其他人遇到过这种情况？

```
AlexHo@server:~$ rvm install 1.9.3 
Already installed ruby-1.9.3-p125\. 
To reinstall use:

rvm reinstall 1.9.3

AlexHo@server:~$ rvm reinstall 1.9.3 
Removing /Users/AlexHo/.rvm/src/ruby-1.9.3-p125... 
Removing /Users/AlexHo/.rvm/rubies/ruby-1.9.3-p125... 
Removing ruby-1.9.3-p125 aliases... 
Removing ruby-1.9.3-p125 wrappers... 
Removing ruby-1.9.3-p125 environments... 
Removing ruby-1.9.3-p125 binaries... 
Fetching yaml-0.1.4.tar.gz to /Users/AlexHo/.rvm/archives 
Extracting yaml-0.1.4.tar.gz to /Users/AlexHo/.rvm/src 
Configuring yaml in /Users/AlexHo/.rvm/src/yaml-0.1.4\. 
Compiling yaml in /Users/AlexHo/.rvm/src/yaml-0.1.4\. 
Installing yaml to /Users/AlexHo/.rvm/usr 
Installing Ruby from source to: /Users/AlexHo/.rvm/rubies/ruby-1.9.3-p125, this may take a while depending on your cpu(s)...

ruby-1.9.3-p125 - #fetching 
ruby-1.9.3-p125 - #extracting ruby-1.9.3-p125 to /Users/AlexHo/.rvm/src/ruby-1.9.3-    p125 
ruby-1.9.3-p125 - #extracted to /Users/AlexHo/.rvm/src/ruby-1.9.3-p125 
ruby-1.9.3-p125 - #configuring 
ruby-1.9.3-p125 - #compiling 
ruby-1.9.3-p125 - #installing 
Removing old Rubygems files... 
Installing rubygems-1.8.17 for ruby-1.9.3-p125 ... 
Installation of rubygems completed successfully. 
ruby-1.9.3-p125 - adjusting #shebangs for (gem irb erb ri rdoc testrb rake). 
ruby-1.9.3-p125 - #importing default gemsets (/Users/AlexHo/.rvm/gemsets/) 
Install of ruby-1.9.3-p125 - #complete 
AlexHo@server:~$ ruby -v 
ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T07:19:07.093

您必须指定要使用的 Ruby 版本。尝试以下操作：

```
rvm use 1.9.3 --default 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T07:09:56.613

我认为您缺少此命令：

```
$ rvm use 1.9.3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T08:07:54.943

您可以使用以下命令查看安装了哪些版本的 ruby​​：

```
rvm list 
```

您还将看到哪个版本已设置为默认值。

默认版本可以设置为：

```
rvm use 1.9.3 --default 
```

如果您正在运行 Ruby On Rails，您还可以检查工作目录中的 .rvmrc 文件，该文件可以包含如下字符串：

```
rvm ruby-1.9.3@gemset 
```

定义当前目录应该使用哪个 Ruby 版本。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T07:47:27.593

自动选择红宝石尚未实现，在[https://github.com/wayneeseguin/rvm/issues](https://github.com/wayneeseguin/rvm/issues)开一张票，我会添加它。

# c - 如何将结构的预设数组放置在不同的结构中？

> ID：10070064
> 
> 赞同：0
> 
> 时间：2012-04-09T07:07:53.180
> 
> 标签：c, arrays, struct, static-array

我正在经历一些在 C 中应该很简单的事情，但由于某种原因似乎无法让它工作。

以下是结构：

```
 #define MAX_BRANCH 500
    #define MAX_BANK_CLIENTS 100000
    #define MAX_CLIENTS 10000

   typedef struct Client{
        char *pName;
        char *fName;
        int id;
        int branch;
        int AccountNum;
        int credit;
        double surplus;
        double IOU;
        double savings;
    }Client;

   typedef struct Branch{
        int BrnachNum;
        char *Name;
        int Accounts;
        double sumOfAll;
        double profit;
        int ActiveLoans;
        int Opened;
        int Closed;
        Client ClientList[MAX_CLIENTS];
    }Branch;

    typedef struct Bank{
        char *Name;
        int Branches;
        int Accounts;
        int ActiveLoans;
        double sumOfAll;
        double Profit;
        Branch BranchList[MAX_BRANCH];
    }Bank;

int main()
{
   Bank Discount;
   Discount.BranchList[0].Accounts = 1;

   return 0;
} 
```

//--------------------------------------------

这种将整数值简单地放置到整数参数的做法向我展示了堆栈溢出或对内部字段的任何其他访问，并且 char 指针将由 strdup 分配（我可以使用的唯一内存分配）。

请记住，我不能使用任何类型的内存分配。

其次，有人指示我设置结构的静态数组。就像是

```
static Branch BranchList[500] 
```

但是我怎样才能对每个分支做同样的事情呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:12:55.260

问题似乎是您在声明它们之前使用了结构。您可能希望以相反的顺序定义它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:33:35.440

首先，更改结构的顺序以消除[编译错误](http://ideone.com/6vpFr)。然后，谈到堆栈溢出的问题，你真的在​​使用**巨大的数组**，如果你在一个函数中有这些数组，那么你只需声明每个结构的一个变量，你应该很可能会发生*堆栈*[溢出](http://ideone.com/vT2ZX) 。

 *将它们转换为静态*可能会节省您*，因为您会将它们推送到数据部分而不是堆栈。但这取决于分配给您的进程的数据部分，而这又取决于您正在运行的系统（操作系统）。

一旦你这样做了，

```
 static Branch BranchList[500]; 
```

您正在为所有分支分配空间，那么*每个分支*的问题在哪里？

当您排除 `malloc`并且如果`static`没有解决您的问题时，请尝试使用增加堆栈大小[`setrlimit`](https://stackoverflow.com/questions/2279052/increase-stack-size-in-linux-with-setrlimit)*

# iphone - iPhone EXIF 数据不会从文档文件夹中读取

> ID：10070065
> 
> 赞同：0
> 
> 时间：2012-04-09T07:07:53.523
> 
> 标签：iphone, image, nsstring, exif

我正在创建一个执行两个图像分析功能的图像处理应用程序。一种是读取图像的RGB数据，另一种是读取EXIF数据。我正在用前置摄像头拍照，然后将其保存到文档文件夹中。为了获取 RGB 值，我以这种方式加载图像：

```
NSString *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Test.jpg"];
UIImage *image = [UIImage imageWithContentsOfFile:jpgPath];
CFDataRef pixelData = CGDataProviderCopyData(CGImageGetDataProvider(image.CGImage));
const UInt8* data = CFDataGetBytePtr(pixelData); 
```

这按预期工作，我可以获得像素数据。我的问题是收集 EXIF 数据。我正在以与 RGB 相同的方式读取图像，并且我的所有 EXIF 数据都返回为 NULL。

```
NSString *EXIFPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Test.jpg"];
NSURL *url = [NSURL fileURLWithPath:EXIFPath];

CGImageSourceRef sourceRef = CGImageSourceCreateWithURL((__bridge CFURLRef)url, NULL);

NSDictionary *immutableMetadata = (__bridge NSDictionary *) CGImageSourceCopyPropertiesAtIndex(sourceRef,0,NULL);
NSDictionary *exifDic = [immutableMetadata objectForKey:(NSString *)kCGImagePropertyExifDictionary];

NSNumber *ExifApertureValue  = [exifDic objectForKey:(NSString*)kCGImagePropertyExifApertureValue];
NSNumber *ExifShutterSpeed  = [exifDic objectForKey:(NSString*)kCGImagePropertyExifShutterSpeedValue];

NSLog(@"ExifApertureValue : %@ \n",ExifApertureValue);
NSLog(@"ExifShutterSpeed : %@ \n",ExifShutterSpeed); 
```

如果我更改第一行代码以读取应用程序中的预加载图像，如下所示：

```
NSString *aPath = [[NSBundle mainBundle] pathForResource:@"IMG_1406" ofType:@"JPG"]; 
```

有用。问题是我无法预加载图像。它们必须从摄像机现场拍摄。非常感谢任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:28:01.443

该文件如何`Test.jpg`写入 Documents 目录？是用 写的`UIImageJPEGRepresentation`吗？如果是这样，EXIF 数据将丢失。确保为需要元数据的任何图像存储 JPEG 源。

无论发生什么，它都会在您检索到完整对象`immutableMetadata`和对象后立即记录它们。`exifDic`

```
NSDictionary *immutableMetadata = (__bridge NSDictionary *) CGImageSourceCopyPropertiesAtIndex(sourceRef,0,NULL);
NSLog(@"immutableMetadata = %@", immutableMetadata);
NSDictionary *exifDic = [immutableMetadata objectForKey:(NSString *)kCGImagePropertyExifDictionary];
NSLog(@"exifDic"); 
```

如果您的`exifDic`日志仅包含这三个值，则它是由一个不关心保留 EXIF 标头的函数保存的。

```
exifDic = {
    ColorSpace = 1;
    PixelXDimension = 1200;
    PixelYDimension = 1600;
} 
```

另外两件事可行，但可能会更好：

(1) 不能保证 Documents 目录是 NSHomeDirectory() 的子目录。获取此文档位置的可靠方法如下：

```
NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [documentDirectories objectAtIndex:0];
NSString *imagePath = [documentDirectory stringByAppendingPathComponent:@"Test.jpg"]; 
```

(2) 您当前从存储中加载图像字节两次，一次获取像素，一次获取元数据。将它们加载到一个`NSData`对象中，您只需检索一次文件。保留该`NSData`对象，您可以稍后保存图像而不会丢失任何细节。（这将消耗等于文件大小的内存，因此仅在需要时才保留它。）

```
NSData *imageData = [NSData dataWithContentsOfFile:imagePath];
UIImage *image = [UIImage imageWithData:imageData];
// Do things involving image pixels...

CGImageSourceRef sourceRef = CGImageSourceCreateWithData((__bridge CFDataRef) imageData, NULL);
// Do things involving image metadata... 
```

# android - Ndef.getType() 将字符串返回为'org.nfcforum.ndef.type2'，但我想要这种类型'NFC_FORUM_TYPE_2'

> ID：10070068
> 
> 赞同：0
> 
> 时间：2012-04-09T07:08:13.040
> 
> 标签：android, nfc

我想获得标签类型......所以我使用了类似的代码

```
Tag myTag = (Tag) nfcintent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
Ndef ndefTag = Ndef.get(myTag);
String NFCType =ndefTag.getType(); 
```

结果就像 NFCType= org.nfcforum.ndef.type2

但我想将结果显示为'NFC_FORUM_TYPE_2。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:59:27.670

的可能返回值为`Ndef.getType()`：

```
 "org.nfcforum.ndef.type1"
 "org.nfcforum.ndef.type2"
 "org.nfcforum.ndef.type3"
 "org.nfcforum.ndef.type4"
 "com.nxp.ndef.mifareclassic"
 "com.nxp.ndef.icodesli" 
```

如果您想要除此之外的任何其他内容，则必须[`HashMap`](http://developer.android.com/reference/java/util/HashMap.html)根据这些返回值自己定义（例如使用 a ）。

# php - 检查表单元素是否存在

> ID：10070075
> 
> 赞同：0
> 
> 时间：2012-04-09T07:09:45.177
> 
> 标签：php

我将表单元素保存到文件中，以下内容按预期工作。

```
$t_str .= "viewMandatory=".$_GET['viewMandatory'] ."\n"; 
```

但我需要的是，如果只设置了 $_GET，那么它应该附加到“t_str”字符串中。

如果没有从表单接收到 viewMandatory 的值，它应该什么也不打印。如何将此检查添加到上述语句中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T07:11:42.103

```
if (!empty($_GET['viewMandatory'])){
$t_str .= "viewMandatory=".$_GET['viewMandatory'] ."\n";
} 
```

在 292 个问题之后，您应该遇到了 empty() 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T07:30:00.580

```
$t_str .= (!empty($_GET['viewMandatory'])?$_GET['viewMandatory']:null; 
```

这样你的代码更少，更容易阅读（至少对我来说，我喜欢简短的形式），但是每次请求页面时都会执行代码。龙的解决方案并非如此。

但是想想代码注入。在将 $_GET['viewMandatory'] 添加到您的字符串之前，以正确的方式过滤它！否则很容易注入不良代码，例如：

```
www.yourpage.com/page.php?viewMandatory=';BAD_CODE_HERE (or " instead of ') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T07:57:02.787

```
Use php isset    

if (isset($_GET['viewMandatory'])){
$t_str .= "viewMandatory=".$_GET['viewMandatory'] ."\n";
} 
```

# c# - 我需要知道执行以下代码时屏幕后面发生了什么

> ID：10070076
> 
> 赞同：0
> 
> 时间：2012-04-09T07:09:52.777
> 
> 标签：c#

## 类---A

```
class ClassA
{
    public string c1()
    {
        return "Class-A";
    }

} 
```

## 类---B

```
class ClassB:ClassA
{
    public string c2()
    {
        return "Class-B";
    }
} 
```

## 主班

- - -第1部分 - - - - - - - - -

```
 ClassA obj1 = new ClassB();
 string a = obj1.c1();//Here i will get only c1
 Console.WriteLine(a);
 Console.ReadLine(); 
```

- - -第2部分 - - - - - - - - -

```
 ClassB obj1 = new ClassA();
 string a = obj1.c2();//Her i will get both c1 and c2
 Console.WriteLine(a);
 Console.ReadLine(); 
```

**在第 1 部分中**，我将只得到 c1。我需要知道是否在**堆栈中为 ClassA 创建了变量（obj）并从****堆中**分配 ClassB 的地址。实际发生了什么？

**在第 -2 部分**中，获取（编译错误）转换错误。执行此代码时屏幕后面实际发生了什么。

谢谢，乔比库里安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T07:18:04.773

**第1部分**

```
ClassA obj1 = new ClassB(); 
```

这将创建一个- 对象的*实例*。`ClassB`

它还声明了一个名为, 类型的*变量*。该变量的*值*将始终是一个引用 - 要么是对. 在这种情况下，初始值是对新创建对象的引用。（对对象的引用也可以用作引用，因为派生自。）`obj1``ClassA`*`null``ClassA``ClassB``ClassB``ClassA``ClassB``ClassA`*

 *当您调用 时`c1`，它只是调用其中的实现`ClassA`- 但在该方法中，如果您打印出来，`this.GetType()`它仍会返回`ClassB`的类型，因为它在对象“内部”运行`ClassB`。

我强烈建议你*不要*担心堆栈和堆。关注三个不同的*概念*：

*   对象
*   引用（导航到对象的方式，或 null）
*   变量（命名存储位置）

Eric Lippert 写了*很多*关于这类事情的博客。您可能想从[The Stack Is An Implementation Detail](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)开始。

**第2部分**

```
ClassB obj1 = new ClassA(); 
```

这将创建 的实例`ClassA`，并尝试将新对象的引用分配给类型的变量`ClassB`。那是行不通的，因为*不*`ClassA`派生自. 您不能将编译时类型的引用用于 type的变量。为了说明*为什么*这不起作用，它有点像这样做：*`ClassB``ClassA``ClassB`*

 **```
string x = new object();
Console.WriteLine(x.Length); // What could this possibly print out? 
```

基本上，继承不能以这种方式工作——你可以将 的实例`ClassB`视为`ClassA`（在大多数情况下）的实例，但*不能*将 的实例`ClassA`视为 的实例`ClassB`。您通常会在 中添加更多状态（字段）`ClassB`，这样信息就不会出现在`ClassA`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:21:55.540

发生的事情（在第二部分）是您试图将类 A 实例化为类 B 的变量。这是无法做到的，因为该变量必须具有可在实例化对象中访问的可用属性。因此，当您尝试调用方法 c2() 时，它在对象中不存在。反之亦然，因为变量的所有可用属性和方法都存在于实例化对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:24:19.417

您正在制作 A 类的对象并调用 B 类的构造函数，制作该特定类的对象。然后访问属性。你为什么要为你做一些有趣的事情！***

# java - 使用 REST Web 服务上传文件是个好主意吗？

> ID：10070082
> 
> 赞同：4
> 
> 时间：2012-04-09T07:10:52.957
> 
> 标签：java, web-services, rest, jersey, jax-rs

我正在用 JAX-RS 研究 REST，我突然想到了这个疑问：

由于 Web 服务旨在为用不同编程语言编写的可互操作客户端提供服务，而客户端只需使用 URL 来访问服务功能；用于将文件上传到公共数据库的 Web 服务怎么样？

会得救吗？如果 Web 服务无法控制客户端如何执行验证，他如何避免被垃圾邮件超载？上传的方法看起来或多或少类似于：

```
@Path("/upload/{something}") 
@Consumes("multipart/form-data")
@POST
public void uploadSomething(...) {
//...
} 
```

所以我怀疑上传是否是 REST 服务可以安全完成的一件好事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T08:32:47.543

如果您担心安全访问，为什么不强制对客户端进行身份验证？您可以实现一个**SecurityContext**并在您的 Java 代码中使用它来访问身份验证信息。看看[这篇](http://www.butonic.de/2010/06/18/a-simple-jax-rs-security-context-example-in-glassfish/)文章可能会有所帮助。

# c++ - 如何检索整个 va_list 输入

> ID：10070083
> 
> 赞同：1
> 
> 时间：2012-04-09T07:10:58.050
> 
> 标签：c++, c, visual-c++

我熟悉 va_arg 列表。我想知道有没有一种方法可以在逗号后获取值

例如

```
abc("%d %d %d how are you",1,2,3); 
```

我想知道是否可以将整个调用传递给一个字符串而不进行任何处理

```
string [1]="%d %d %d how are you",1,2,3; 
```

我不想做任何处理，我只想读取整个调用并将其存储在一串数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:20:18.623

尽我所能理解您的要求，在标准 C++03 中是不可能的。最密切相关的 C++ 功能是预处理器宏参数字符串化，它允许这样的事情：

```
#define ABC(X) do { remember_string_version(#X); abc X; } while (false)

ABC(("%d %d %d how are you",1,2,3)); 
```

请注意双括号 - 这些对字符串和数字进行分组，以便它们与 ABC 预期的单个参数“X”相匹配。

预处理器字符串化是*唯一*可以让您将一些源代码片段保留为字符串，同时仍将其用作源代码的工具......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:21:47.860

这取决于编译器，虽然理论上你可以做到这一点，但实际上它可能不是可移植的。正如@Tony 提到的，您可以在编译时通过宏来执行此操作，但对于运行时 - 使用`va_arg`. 它基本上实现了您想要的，并且是标准提供的用于与此编译器相关功能接口的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-23T03:05:46.517

从 C++17 开始，您可以捕获所有参数并将它们转发到单个表达式中的字符串流（称为*fold-expression*）：

```
#include <string>
#include <sstream>
#include <iostream>
#include <functional>

std::string abc(auto&& head, auto&&... tail)
{
    std::ostringstream out;
    out << head;
    ((out << ',' << tail), ...);

    return out.str();
}

int main()
{
    std::string s = abc("%d %d %d how are you", 1, 2, 3);

    std::cout << s << std::endl;
} 
```

在 C++17 之前，但从 C++11 开始，您可以使用递归模板（或 void 大括号列表 hack，我不会在这里介绍）。片段：

```
template<typename Head>
void capture(std::ostream& out, Head&& head)
{
    out << std::forward<Head>(head);
}

template<typename Head, typename... Tail>
void capture(std::ostream& out, Head&& head, Tail&&... tail)
{
    out << std::forward<Head>(head) << ',';
    capture(out, std::forward<Tail>(tail)...);
}

template<typename... Args>
std::string abc(Args&&... args)
{
    std::ostringstream out;
    capture(out, std::forward<Args>(args)...);

    return out.str();    
} 
```

# cocos2d-iphone - 如何在可可 2d 中以特定路径移动图像

> ID：10070085
> 
> 赞同：0
> 
> 时间：2012-04-09T07:11:09.643
> 
> 标签：cocos2d-iphone

我是 cocoa 2d 的新手我正在尝试开发在特定路径中移动多个图像并在此路径中间插入另一个图像类似于“ZUMA REVANGE GAME”的图像。在这个游戏中图像如何在精确路径中移动并将图像插入中间。谁能告诉我他们是如何实施的。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:32:02.397

如果你是 cocos2d 的新手，我建议你看[这里](http://www.raywenderlich.com/tutorials)（在“使用 Cocos2D 开始游戏编程”部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:31:30.847

搜索贝塞尔路径。

```
 ccBezierConfig bezier;
   bezier.controlPoint_1 = ccp(0, s.height/2);
   bezier.controlPoint_2 = ccp(300, -s.height/2);
   bezier.endPosition = ccp(300,100);

   id bezierForward = [CCBezierBy actionWithDuration:3 bezier:bezier]; 
```

# ubuntu-11.10 - 修改特定模块后 Ubuntu 命令重启 OpenERP6.1 服务器

> ID：10070086
> 
> 赞同：0
> 
> 时间：2012-04-09T07:11:16.570
> 
> 标签：ubuntu-11.10, openerp

我正在使用 OpenERP6.1。有谁知道修改特定模块后如何重新启动 OpenERP6.1 服务器，以查看对该特定模块所做的更改的效果？我可以通过升级模块来反映更改，但这需要花费太多时间。

对于 OpenERP6.0，我们给出命令：

```
/some-path/openerp-server.py --addons=../addons/ -u 'module name' -d 'database' 
```

我需要对应的 OpenERP6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:27:12.313

您只是在询问对数据库和视图的更改，对吗？如果模块的代码已更改，那么您给出的命令将不起作用。您必须重新启动 OpenERP 服务器进程才能运行新代码。

您确定您的命令运行速度比升级模块快吗？我无法理解它会如何。

无论哪种情况，看起来该命令在 6.1 中仍应有效。[配置代码](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/head:/openerp/tools/config.py#L97)似乎仍然支持该选项`-u`。

```
# Server startup config
group = optparse.OptionGroup(parser, "Common options")
group.add_option("-c", "--config", dest="config", help="specify alternate config file")
group.add_option("-s", "--save", action="store_true", dest="save", default=False,
                  help="save configuration to ~/.openerp_serverrc")
group.add_option("-i", "--init", dest="init", help="install one or more modules (comma-separated list, use \"all\" for all modules), requires -d")
group.add_option("-u", "--update", dest="update",
                  help="update one or more modules (comma-separated list, use \"all\" for all modules). Requires -d.") 
```

该`-d`选项[似乎也受支持](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/head:/openerp/tools/config.py#L212)。

```
group = optparse.OptionGroup(parser, "Database related options")
group.add_option("-d", "--database", dest="db_name", my_default=False,
                 help="specify the database name") 
```

当您尝试运行您给出的命令时会发生什么？缓存行为可能在 6.1 中发生了变化，因此它不会注意到单独进程所做的数据库更改。如果是这种情况，那么它应该可以运行您的命令，然后重新启动服务器。虽然我无法想象这会比升级模块更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T04:25:41.153

以下命令为我完成了这项工作..

sudo /etc/init.d/openerp 重启

# json - 从 WORDPRESS 博客获取所有帖子的轻量级 JSON 调用

> ID：10070087
> 
> 赞同：1
> 
> 时间：2012-04-09T07:11:17.327
> 
> 标签：json, wordpress

我想通过 JSON 从 Wordpress 博客中获取所有博客文章。我不能为此使用 PHP。有什么机制吗？？

像 Twitter 一样，您可以获得 JS/jQuery 解决方案来获取所有帖子。WORDPRESS 博客是否有任何相同类型的机制来获取所有帖子？

请各位大侠帮忙。。。。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:15:30.123

您可以尝试使用为此目的开发的插件。这个列在 WordPress.org 网站上，看起来它可能会对您有所帮助。

[JSON API](http://wordpress.org/extend/plugins/json-api/other_notes/)

将来最好先检查 WordPress.org 托管的插件。

# java - java泛型对象如何存储在数据结构中

> ID：10070089
> 
> 赞同：-1
> 
> 时间：2012-04-09T07:11:36.147
> 
> 标签：java, generics

我的代码是：

```
interfacebase<T>

interfaceA extends interface<A>  ---> interfaceAImpl implements interfaceA 
interfaceB extends interface<B>  ---> interfaceBImpl implements interfaceB

interfaceA  AObj = interfaceAImpl()
interfaceB  BObj = interfaceBImpl() 
```

我的问题是：java 可以将 AObj 和 BObj 存储在 List 或 Map 中吗？如果java可以，那么如何实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:45:40.190

以下应该可以工作，而不会丢失所有类型信息。

```
List<interfacebase<?>> list = new ArrayList<interfacebase<?>>();
list.add(AObj);
list.add(BObj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:38:11.503

如果你创建一个`ArrayList<Object>`或者`HashMap<Object>`你可以在里面放任何你想要的东西。
如果您有一个定义的基类/接口调用`BASE`，并且您想存储一些来自它的派生类的对象`DERIVED`，您应该更改`Object`为`BASE`. 在这种情况下，您可以将每种类型的对象存储到您的列表/映射中，它是从 BASE 派生的，或者实现它（在接口的情况下）：`ArrayList<BASE>`, `HashMap<BASE>`.

# c++ - 这是什么风格的程序集（intel、att...等？），我怎样才能生产它？

> ID：10070091
> 
> 赞同：0
> 
> 时间：2012-04-09T07:11:42.487
> 
> 标签：c++, c, gcc, compiler-construction

我正在尝试生成这样的汇编代码（以便它与 nasm 一起使用）

```
;hello.asm
[SECTION .text]

global _start

_start:

    jmp short ender

    starter:

    xor eax, eax    ;clean up the registers
    xor ebx, ebx
    xor edx, edx
    xor ecx, ecx

    mov al, 4       ;syscall write
    mov bl, 1       ;stdout is 1
    pop ecx         ;get the address of the string from the stack
    mov dl, 5       ;length of the string
    int 0x80

    xor eax, eax
    mov al, 1       ;exit the shellcode
    xor ebx,ebx
    int 0x80

    ender:
    call starter    ;put the address of the string on the stack
    db 'hello' 
```

首先，这是什么汇编风格，其次，我如何使用类似于以下的命令从 C 文件中生成它`gcc -S code.c -o code.S -masm=intel`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:14:54.557

这是英特尔风格。

您在问题中编写的命令行有什么问题？

# python - 在 python 中检查 suds 版本

> ID：10070093
> 
> 赞同：0
> 
> 时间：2012-04-09T07:11:53.540
> 
> 标签：python, suds

如何检查 python 中安装的 suds 版本，我在网上查看但找不到。

我试试这个。在运行 python manage.py shell

```
>>> import suds
>>> suds 
```

但我在运行它时得到了 python 版本。

```
<module 'suds' from '/usr/local/lib/python2.7/dist-packages/suds/__init__.pyc'> 
```

如何查看 suds 版本？

我也尝试使用 suds 版本，但出现此错误

```
>>> import suds
>>> suds version
  File "<console>", line 1
    suds version
               ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T07:14:58.803

```
>>>> import suds
>>>> print suds.__version__
0.4.1 
```

多田。

**编辑**：关于这个，[有人问了一个更通用的问题，](https://stackoverflow.com/questions/710609/checking-python-module-version-at-runtime)[这里有一个 hacky 脚本](http://pythonwise.blogspot.com/2009/01/find-module-version.html)，用于检查版本常量的通用名称。

# mysqldumpslow - mysqldumpslow：这些字段表示什么..？

> ID：10070098
> 
> 赞同：2
> 
> 时间：2012-04-09T07:12:22.930
> 
> 标签：mysqldumpslow

最近我们开始优化实时慢查询。作为其中的一部分，我们考虑使用 mysqldumpslow 来确定慢速查询的优先级。我是这个工具的新手。我能够理解一些基本信息，但我想知道输出中的以下字段究竟会告诉我们什么。

输出：计数：6 时间=22.64s (135s) 锁定=0.00s (0s) 行数=1.0 (6)

下面的字段呢？

```
Time : Is it the average time taken of all these 6 times of occurance...?
135s : What is this 135 seconds....?
Rows=1.0 (6): again what does this mean...? 
```

我没有找到更好的解释。真的提前谢谢了。问候， UDAY

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-22T10:42:26.277

我对此进行了研究，因为我也想知道。
我有一个来自非常常用的数据库服务器的日志。
命令 mysqldumpslow 有几个可选参数（[https://dev.mysql.com/doc/refman/5.7/en/mysqldumpslow.html](https://dev.mysql.com/doc/refman/5.7/en/mysqldumpslow.html)），包括按（-s）排序，这要归功于我可以使用的许多查询，我可以告诉，即：
括号前的值表示组内所有相同查询的平均值（总共“计数”），括号内的值是其中一个查询的最大值。意思是，在你的情况下：
您有一个被调用 6 次的查询，它在 22.64 秒（平均）内执行，但一旦执行它大约需要 135 秒。这同样适用于锁（如果提供）和行。所以大多数时候它返回大约一行，但是它至少返回了 6 行

# php - 我想转换vb这段代码

> ID：10070107
> 
> 赞同：-4
> 
> 时间：2012-04-09T07:13:25.540
> 
> 标签：php, asp.net, vb.net

我想转换vb这段代码

```
<?php
// Where the file is going to be placed
$target_path = "uploads/";

/* Add the original filename to our target path.
Result is "uploads/filename.extension" */
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']).
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
    echo "filename: " .  basename( $_FILES['uploadedfile']['name']);
    echo "target_path: " .$target_path;
}
?> 
```

请更清楚地解释您的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:29:05.203

谷歌它找到这么多关于“如何使用 asp.net 上传文件”的代码示例。

一些如下：

*   [示例代码](http://asp.net-tutorials.com/controls/file-upload-control/)
*   [来自 MSDN](http://msdn.microsoft.com/en-us/library/aa479405.aspx)

只需浏览示例和教程，然后对其进行更改以满足您的需求。

希望能帮助到你 ：）

# android - 当我想展示另一个 Toast 时，我可以取消之前的 Toast 吗？

> ID：10070108
> 
> 赞同：35
> 
> 时间：2012-04-09T07:13:30.100
> 
> 标签：android, toast

在我的应用程序中，我为我的活动构建了一个日历小部件，当我将它滚动到上个月或下个月时，我让它敬酒并显示它。

问题是，吐司需要时间来显示，当我滚动它的速度足够快时，例如，我滚动到“2012/05”和“2012/06”并且没有暂停滚动到“2012/07”，我必须等待“2012/05”、“2012/06”、“2012/07”的Toast将一一呈现。

似乎Android有一个看不见的队列来管理toast

**我怎样才能清理它并且只显示最后一个吐司？我可以立即显示特定的 Toast 而无需等待吗？**

我搜索了*“android.widget.Toast.java”*并找到了一个方法`cancel()`，但不幸的是它不起作用如下。

```
if (t != null) {
    t.cancel();
}
t = Toast.makeText(this.mContext, mHelper.getYear() + "年"
                + (mHelper.getMonth() + 1) + "月", Toast.LENGTH_SHORT);
t.show(); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-08-10T14:12:31.877

你只需要像这样声明一个“Toast”变量：

```
Toast toastMessage; 
```

然后在你的函数中，这样做：

```
if (toastMessage!= null) {
    toastMessage.cancel();
}
toastMessage= Toast.makeText(context, "The message you want to display", duration);
toastMessage.show(); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-19T11:25:04.673

这是我从另一个类似问题中复制的答案：

*   [Android 在退出应用程序和显示 Toast 时取消 Toast](https://stackoverflow.com/a/16099959/383414)

该`Boast`课程完全满足您的需求。最新的代码可以在 GitHub 上找到：

*   [吹嘘.java](https://gist.github.com/mobiRic/9786993)

* * *

诀窍是跟踪显示的最后一个`Toast`，并取消那个。

我所做的是创建一个`Toast`包装器，其中包含对显示的最后一个 Toast 的静态引用。

当我需要显示一个新的时，我首先取消静态引用，然后再显示新的（并将其保存在静态中）。

这是我制作的包装器的完整代码`Boast`——它模仿了足够多的 Toast 方法供我使用。默认情况下，`Boast`将取消前一个，因此您不会建立等待显示的 Toast 队列。

如果您只想知道如何在退出应用程序时取消通知，您会在其中找到很多帮助。

* * *

```
package mobi.glowworm.lib.ui.widget;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.res.Resources;
import android.support.annotation.Nullable;
import android.widget.Toast;

import java.lang.ref.WeakReference;

/**
 * {@link Toast} decorator allowing for easy cancellation of notifications. Use this class if you
 * want subsequent Toast notifications to overwrite current ones. </p>
 * <p/>
 * By default, a current {@link Boast} notification will be cancelled by a subsequent notification.
 * This default behaviour can be changed by calling certain methods like {@link #show(boolean)}.
 */
public class Boast {
    /**
     * Keeps track of certain Boast notifications that may need to be cancelled. This functionality
     * is only offered by some of the methods in this class.
     * <p>
     * Uses a {@link WeakReference} to avoid leaking the activity context used to show the original {@link Toast}.
     */
    @Nullable
    private volatile static WeakReference<Boast> weakBoast = null;

    @Nullable
    private static Boast getGlobalBoast() {
        if (weakBoast == null) {
            return null;
        }

        return weakBoast.get();
    }

    private static void setGlobalBoast(@Nullable Boast globalBoast) {
        Boast.weakBoast = new WeakReference<>(globalBoast);
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Internal reference to the {@link Toast} object that will be displayed.
     */
    private Toast internalToast;

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Private constructor creates a new {@link Boast} from a given {@link Toast}.
     *
     * @throws NullPointerException if the parameter is <code>null</code>.
     */
    private Boast(Toast toast) {
        // null check
        if (toast == null) {
            throw new NullPointerException("Boast.Boast(Toast) requires a non-null parameter.");
        }

        internalToast = toast;
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Make a standard {@link Boast} that just contains a text view.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param text     The text to show. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, CharSequence text, int duration) {
        return new Boast(Toast.makeText(context, text, duration));
    }

    /**
     * Make a standard {@link Boast} that just contains a text view with the text from a resource.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param resId    The resource id of the string resource to use. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, int resId, int duration)
            throws Resources.NotFoundException {
        return new Boast(Toast.makeText(context, resId, duration));
    }

    /**
     * Make a standard {@link Boast} that just contains a text view. Duration defaults to
     * {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param text    The text to show. Can be formatted text.
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, CharSequence text) {
        return new Boast(Toast.makeText(context, text, Toast.LENGTH_SHORT));
    }

    /**
     * Make a standard {@link Boast} that just contains a text view with the text from a resource.
     * Duration defaults to {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param resId   The resource id of the string resource to use. Can be formatted text.
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, int resId) throws Resources.NotFoundException {
        return new Boast(Toast.makeText(context, resId, Toast.LENGTH_SHORT));
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Show a standard {@link Boast} that just contains a text view.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param text     The text to show. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     */
    public static void showText(Context context, CharSequence text, int duration) {
        Boast.makeText(context, text, duration).show();
    }

    /**
     * Show a standard {@link Boast} that just contains a text view with the text from a resource.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param resId    The resource id of the string resource to use. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    public static void showText(Context context, int resId, int duration)
            throws Resources.NotFoundException {
        Boast.makeText(context, resId, duration).show();
    }

    /**
     * Show a standard {@link Boast} that just contains a text view. Duration defaults to
     * {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param text    The text to show. Can be formatted text.
     */
    public static void showText(Context context, CharSequence text) {
        Boast.makeText(context, text, Toast.LENGTH_SHORT).show();
    }

    /**
     * Show a standard {@link Boast} that just contains a text view with the text from a resource.
     * Duration defaults to {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param resId   The resource id of the string resource to use. Can be formatted text.
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    public static void showText(Context context, int resId) throws Resources.NotFoundException {
        Boast.makeText(context, resId, Toast.LENGTH_SHORT).show();
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Close the view if it's showing, or don't show it if it isn't showing yet. You do not normally
     * have to call this. Normally view will disappear on its own after the appropriate duration.
     */
    public void cancel() {
        internalToast.cancel();
    }

    /**
     * Show the view for the specified duration. By default, this method cancels any current
     * notification to immediately display the new one. For conventional {@link Toast#show()}
     * queueing behaviour, use method {@link #show(boolean)}.
     *
     * @see #show(boolean)
     */
    public void show() {
        show(true);
    }

    /**
     * Show the view for the specified duration. This method can be used to cancel the current
     * notification, or to queue up notifications.
     *
     * @param cancelCurrent <code>true</code> to cancel any current notification and replace it with this new
     *                      one
     * @see #show()
     */
    public void show(boolean cancelCurrent) {
        // cancel current
        if (cancelCurrent) {
            final Boast cachedGlobalBoast = getGlobalBoast();
            if ((cachedGlobalBoast != null)) {
                cachedGlobalBoast.cancel();
            }
        }

        // save an instance of this current notification
        setGlobalBoast(this);

        internalToast.show();
    }

} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-09T08:28:10.417

您需要在正确的对象上调用方法。

```
toastObject.cancel() 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-09T07:24:21.227

这是代码。

```
final Toast toastobject = Toast.makeText(context, "This message will disappear when toast.close(); is called", Toast.LENGTH_SHORT); 
```

现在可以使用 toastobject 的 Object。其[参考](http://developer.android.com/reference/android/widget/Toast.html#cancel%28%29)

```
toastobject.cancel(); 
```

您可以在 Thread 中使用它，或者在您想关闭 Toast 时使用它。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-19T16:09:58.440

您可以重复使用吐司，这将使其立即显示。

```
myToast.setText(toastMsg);
myToast.show(); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-25T09:25:46.277

当我们想显示另一个 Toast 时，有很多方法可以取消之前的 Toast。下面我写了一个最简单的方法来实现它。首先，我们必须创建一个可以在整个类中访问的变量。

```
private Toast toast; 
```

在创建了整个类都可以访问的变量之后，我们必须在我们的类中创建一个方法来显示 toast 消息并检查之前的 toast 是否正在显示然后取消它。

```
 public void showToast(String message) {
    if (toast != null) {
        toast.cancel();
    }
    toast = Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT);
    toast.show();
} 
```

您可以通过运行时调用上述方法来更改 toast 消息。

```
showToast("message 1"); 
```

//一段时间后

```
showToast("message 2"); 
```

希望能帮助到你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-09T07:24:41.333

Toast 有一个隐藏当前 toast 消息的方法

```
public void cancel() {
    mTN.hide();
} 
```

必要时尝试调用 t.cancel()。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-27T16:11:41.463

您可以创建静态方法并使用它来显示敬酒：

```
public static Toast toast = null;
public static showToast(Context context,String msg){
if(toast!=null)             //this will cancel the toast on the screen if one exists
   toast.cancel();
toast = Toast.makeText(context,msg);
toast.show();
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-29T07:56:31.287

简单的。一旦你想创建另一个 toast，只需在 toast 上调用方法 .cancel() 即可。

首先像这样在类的顶部定义一个 Toast 变量

```
private Toast mToast; 
```

稍后，当您想创建一个新的 Toast（并让旧的 Toast 消失）时，请执行此操作。

```
if(mToast != null) {
  mToast.cancel();  //if a toast exists it deletes it, allowing you to create a new one
}

mToast = Toast.makeText(this, "This will show up now!", Toast.LENGTH_LONG);
mToast.show(); //creates the new toast. 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-09T07:45:46.500

```
public static Toast  sToast=null;

// create Toast object;

public void showToast(String msg)

    {

    //here is checking whether toast object is null or not;if not null gonna cancel the toast that is showing in phone window and make it null;  

    if(sToast!=null)
    {

      sToast.cancel;

    sToast=null;
    }

    //if toast object is null,gonna create new instance and make it shown on phone window.

    if(sToast==null)
    {

        sToast=Toast.makeText(currentActivity.this,msg,Duration);

        sToast.setGravity();

        sToast.show();

    }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-11T04:15:12.640

迟来的：您的代码不起作用的原因是它`Toast.makeText()`没有返回`Toast`对它正在创建的引用。它只是一个帮助方法，旨在允许`Toast`快速轻松地创建，但不允许引用或取消。要取消，您必须执行以下操作：

```
t=Toast(requireContext())
t.setText(YOUR TEXT)
t.setDuration(1000)
t.show() 
```

这样 t 将在调用构造函数时被分配一个引用，这将允许稍后取消。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-08-27T18:03:19.377

您可以使用一种拍摄技术。好的，让我们开始定义：

```
private Toast mToast;
private showOnce=false; 
```

稍后当你想展示一次吐司时：

```
if(showOnce==false){
  mToast=Toast.makeText(this, "Once!", Toast.LENGTH_LONG);
  mToast.show();
  showOnce=true;
} 
```

# jquery - 如何为动态生成的按钮设置点击事件

> ID：10070118
> 
> 赞同：0
> 
> 时间：2012-04-09T07:14:47.977
> 
> 标签：jquery

我是 jquery 的新手。我想生成一组图像按钮，所以我这样做了

 `````
 <script type="text/javascript">
$(document).ready(function(){
     $.support.cors = true;  
    if ($('#ulTask li').length == 0)
    {
        $.ajax({
            type: "POST",
            url: "http://diana/TaskManagerWebService/TaskManagerService.asmx/SelectAllTasks",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: OnSuccess,
            error: OnError
        });
        function OnSuccess(TaskData){        
            var TaskDataObj = jQuery.parseJSON(TaskData.d);                
            $.each(TaskDataObj, function (i, v) {
               var TaskTypeUrl = getTaskTypeImageURL(TaskDataObj[i].TaskType), TaskId = parseInt(TaskDataObj[i].TaskId);
              $("#ulTask").append('<li id="liTask'+TaskDataObj[i].TaskId+'"><div id="divTask'+TaskDataObj[i].TaskId+'"><img id="imgCollapse'+TaskDataObj[i].TaskId+'" alt="' + TaskDataObj[i].TaskId + '" src="Images/story_collapsed1.png" onclick="javascript:FillTaskDetails('+TaskDataObj[i].TaskId+');"/>' + TaskDataObj[i].TaskName + '</div></li>');
            });
        }
        function OnError(request, status, error){                
            alert(request.statusText);
        }
    }
});
</script> 
```

for the image which i binded in li tag have onclick event.

```
onclick="javascript:FillTaskDetails('+TaskDataObj[i].TaskId+');" 
```

I wanted to assign that click event in query formate like

```
$("#imageId").click(function(){
}); 
```

how to i get this "imageId", Actually this imageid is combination of text and dynamic value` 

```
<img id="imgCollapse'+TaskDataObj[i].TaskId+'"....... 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:46:31.430

创建具有唯一类名的图像

```
<img class="imgCollapse" id="imgCollapse'+TaskDataObj[i].TaskId+'"....... 
```

然后为该 img 类绑定一个实时点击事件

```
$(".imgCollapse").live("click",function(event){
    event.preventDefault();
    taskID = $(this).attr('id').replace('imgCollapse','');
    //console.log(taskID);
    FillTaskDetails(taskID);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:18:34.200

试试 .live()

```
$("#imageId").live("click",function(){
    // Code is here ...
}); 
````

# android - 在不使用 iOS 和 Android 的 xcode 的情况下集成谷歌分析？

> ID：10070123
> 
> 赞同：0
> 
> 时间：2012-04-09T07:15:08.100
> 
> 标签：android, ios

我正在开发一个移动应用程序，记住我将同时针对 iOS 和 Android 平台。我现在希望将 Google Analytics 集成到我的应用程序中。

我遇到了很多建议使用 xcode 并将 GA 库集成到其中的东西（对于 iOS）。我知道可以通过这种方式完成，但我没有 Mac 机器来运行我的应用程序。

> *我的问题是是否有任何方法可以在不使用 XCode 的情况下将 GA 集成到我的移动应用程序中*。

到目前为止，我已经在我的应用程序中使用了 phonegap 插件，我在 safari 上同时开发和测试应用程序，然后在服务器上进行任何部署，最后在 iPhone 上测试我的应用程序。

亲切的问候，

罗南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:45:51.180

我已经想通了。我现在已经开发了我的应用程序，以便可以像任何其他 Web 应用程序（网站）一样访问它，而不是将其用作可下载的应用程序，因此，我现在使用标准的异步 GA 脚本，它现在非常适合我。

# encryption - SHA2 - 如果您有摘要和密钥，为什么很难（如果不使用蛮力，实际上是不可能的）恢复消息

> ID：10070124
> 
> 赞同：0
> 
> 时间：2012-04-09T07:15:19.730
> 
> 标签：encryption, hash, sha

我查看了 Python 中 SHA2 的实现，看起来它使用了一些默认密钥进行散列。一旦知道密钥并且知道摘要，是否有可能取回纯文本？（没有蛮力的图像前攻击）[http://en.wikipedia.org/wiki/Preimage_attack](http://en.wikipedia.org/wiki/Preimage_attack)

我的直觉说不，因为块大小（输入大小）是 512 位，输出大小是 256 位。这意味着要成为一个好的散列函数（加密），该函数应该是多对一函数（不可逆）。{这与块密码的要求完全相反，其中函数应该是可逆的（一对一）。}

据我了解，要求是具有随机多对一功能！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T07:18:54.690

即使使用蛮力，也无法恢复给定哈希的纯文本，因为有许多文本映射到相同的 N 位密钥（对于任何 N 值）。也就是说，有不同的消息具有相同的摘要值。

# salesforce - Apex 中触发器的测试用例（插入前、更新前）

> ID：10070130
> 
> 赞同：1
> 
> 时间：2012-04-09T07:16:18.717
> 
> 标签：salesforce, apex-code, visualforce

任何人都请帮我编写测试用例以实现 100% 代码覆盖率，以便在 apex 中跟踪触发器

```
trigger ETicketAirlineUrlTrigger on E_Ticket__c (before insert, before update) {

  for(E_Ticket__c etNew : Trigger.New)
  {
    if(etNew.Airline__c =='Virgin Australia')
    {
        etNew.Airlines_Url__c = '<a href="http://www.virginaustralia.com/Personal/Bookings/Managebookings/index.htm">Virgin Australia</a>';
    }
    else if(etNew.Airline__c =='Virgin Atlantic')
    {
        etNew.Airlines_Url__c = '<a href="https://www.virgin-atlantic.com/en/us/manageyourflights/updatebooking/index.jsp">Virgin Atlantic</a>';
    }
    else if(etNew.Airline__c =='Virgin America')
    {
        etNew.Airlines_Url__c = '<a href="http://www.virginamerica.com/view-itinerary.html">Virgin America</a>';
    }
    else if(etNew.Airline__c =='US AIR')
    {
        etNew.Airlines_Url__c = '<a href="http://reservations.usairways.com/Default.aspx">US AIR</a>';
    }
    else if(etNew.Airline__c =='United Airlines')
    {
        etNew.Airlines_Url__c = '<a href="http://www.united.com/page/genericpage/0,,52172,00.html?navSource=dropDown&linkTitle=itineraries">United Airlines</a>';
    }
    else if(etNew.Airline__c =='Turkish Air')
    {
        etNew.Airlines_Url__c = '<a href="http://www4.thy.com/mybookings/reservations.tk?target=view&lang=en">Turkish Air</a>';
    }
    else if(etNew.Airline__c =='Thai Air')
    {
        etNew.Airlines_Url__c = '<a href="http://www.thaiair.com/AWR_PREM/view-trip.jsp">Thai Air</a>';
    }
    else if(etNew.Airline__c =='Swiss Airlines')
    {
        etNew.Airlines_Url__c = '<a href="http://www.swiss.com/web/EN/Pages/index.aspx?Country=US">Swiss Airlines</a>';
    }
    else if(etNew.Airline__c =='Southwest Airlines')
    {
        etNew.Airlines_Url__c = '<a href="https://www.southwest.com/flight/lookup-air-reservation.html?int=GSUBNAV-AIR-RETRIEVE&forceNe...">Southwest Airlines</a>';
    }
    else if(etNew.Airline__c =='South African')
    {
        etNew.Airlines_Url__c = '<a href="https://www.flysaa.com/Journeys/reservation/searchpnr.action?nameSpace=reservation">South African</a>';
    }
    else if(etNew.Airline__c =='Singapore Airlines')
    {
        etNew.Airlines_Url__c = '<a href="https://www.singaporeair.com/manageBooking-flow.form?execution=e1s1">Singapore Airlines</a>';
    }
    else if(etNew.Airline__c =='QATAR AIRWAYS')
    {
        etNew.Airlines_Url__c = '<a href="http://www.qatarairways.com/us/en/homepage.page">QATAR AIRWAYS</a>';
    }
    else if(etNew.Airline__c =='Qantas Airlines')
    {
        etNew.Airlines_Url__c = '<a href="http://www.qantas.com.au/travel/airlines/your-booking/global/en">Qantas Airlines</a>';
    }
    else if(etNew.Airline__c =='Malaysia')
    {
        etNew.Airlines_Url__c = '<a href="https://book.malaysiaairlines.com/itd/itd/lang/en/reservations">Malaysia</a>';
    }
    else if(etNew.Airline__c =='Lufthansa')
    {
        etNew.Airlines_Url__c = '<a href="http://www.lufthansa.com/online/portal/lh/us/my_account/my_bookings">Lufthansa</a>';
    }
    else if(etNew.Airline__c =='KLM - Royal Dutch Airlines')
    {
        etNew.Airlines_Url__c = '<a href="http://www.klm.com/travel/us_en/index.htm#tab=db_mmb">KLM - Royal Dutch Airlines</a>';
    }
    else if(etNew.Airline__c =='Japan Air')
    {
        etNew.Airlines_Url__c = '<a href="http://www.5971.jal.co.jp/eng/SearchReservation.do">Japan Air</a>';
    }
    else if(etNew.Airline__c =='Etihad Airlines')
    {
        etNew.Airlines_Url__c = '<a href="http://www.etihadairways.com/sites/etihad/_layouts/etihad/obe/RetrieveBooking.aspx">Etihad Airlines</a>';
    }
    else if(etNew.Airline__c =='Emirates')
    {
        etNew.Airlines_Url__c = '<a href="https://fly.emirates.com/MYB/MMBLogin.aspx">Emirates</a>';
    }
    else if(etNew.Airline__c =='Delta Airlines')
    {
        etNew.Airlines_Url__c = '<a href="http://www.delta.com/">Delta Airlines</a>';
    }
    else if(etNew.Airline__c =='Copa Airlines')
    {
        etNew.Airlines_Url__c = '<a href="http://www.copaair.com/sites/US/EN/Pages/homepage.aspx">Copa Airlines</a>';
    }
    else if(etNew.Airline__c =='Continental Airlines')
    {
        etNew.Airlines_Url__c = '<a href="http://www.continental.com/web/en-US/apps/reservation/default.aspx">Continental Airlines</a>';
    }
    else if(etNew.Airline__c =='Cathay Pacific')
    {
        etNew.Airlines_Url__c = '<a href="http://www.cathaypacific.com/cpa/en_US/manageyourtrip/managemybooking?loginType=nonmember">Cathay Pacific</a>';
    }
    else if(etNew.Airline__c =='British Airways')
    {
        etNew.Airlines_Url__c = '<a href="http://www.britishairways.com/travel/home/public/en_us">British Airways</a>';
    }
    else if(etNew.Airline__c =='American Airlines')
    {
        etNew.Airlines_Url__c = '<a href="https://www.aa.com/reservation/findReservationAccess.do">American Airlines</a>';
    }
    else if(etNew.Airline__c =='All Nippon')
    {
        etNew.Airlines_Url__c = '<a href="https://aswbe-i.ana.co.jp/p_per/sky_ip_per_jp/preReConfirmSearchPnr.do?CONNECTION_KIND=LAX&LA...">All Nippon</a>';
    }
    else if(etNew.Airline__c =='Alitalia')
    {
        etNew.Airlines_Url__c = '<a href="http://www.alitalia.com/US_EN/home/index.aspx">Alitalia</a>';
    }
    else if(etNew.Airline__c =='Alaska Airlines')
    {
        etNew.Airlines_Url__c = '<a href="https://www.alaskaair.com/booking/ssl/saved/ViewPnr.aspx">Alaska Airlines</a>';
    }
    else if(etNew.Airline__c =='Air New Zealand')
    {
        etNew.Airlines_Url__c = '<a href="https://flightbookings.airnewzealand.com/isbook_en_US/review/initNewWebCheckIn.do?workflowAction=...">Air New Zealand</a>';
    }
    else if(etNew.Airline__c =='Air France')
    {
        etNew.Airlines_Url__c = '<a href="https://www.airfrance.us/cgi-bin/AF/US/en/local/process/standard/rebooking/SearchPnrRbkAction.do?">Air France</a>';
    }
    else if(etNew.Airline__c =='Air Canada')
    {
        etNew.Airlines_Url__c = '<a href="http://www.aircanada.com/aco/manageMyBookings.do">Air Canada</a>';
    }
  }
} 
```

并且无法使用以下测试用例获得 100% 的代码覆盖率

```
@isTest
private class ETicketAirlineUrlTestCase {

static testMethod void myUnitTest() {
    Opportunity oppNew =  new Opportunity();
    oppNew.Name = 'Test Opp';
    oppNew.StageName = 'To Be Searched';
    oppNew.CloseDate = System.now().date();
    insert oppNew;

    E_Ticket__c et =  new E_Ticket__c();
    et.Airline__c = 'Virgin Australia';
    et.Opportunity__c = oppNew.Id;
     et.Airline__c = 'Virgin Atlantic';
    insert et;

    E_Ticket__c etNew = [select Id, Airline__c from E_Ticket__c where Id = :et.Id];
    update etNew;
}
} 
```

当我运行 Class-->Force.com-->Run Test 它显示 100% 的代码覆盖率

但是当我执行 Force.com--> 部署到服务器时，它显示错误 6% 已覆盖

任何帮助，将不胜感激

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T19:58:32.933

为了获得 100% 的代码覆盖率，您需要为每个“else if”语句编写一个测试。

您目前只有一项测试，针对一项“else if”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T21:16:16.573

试试这个：

```
@isTest
private class ETicketAirlineUrlTestCase {

    static testMethod void myUnitTest() {
        Opportunity oppNew =  new Opportunity();
        oppNew.Name = 'Test Opp';
        oppNew.StageName = 'To Be Searched';
        oppNew.CloseDate = System.now().date();
        insert oppNew;

        List<E_Ticket__c> tickets = new List<E_Ticket__c>();

        E_Ticket__c et1 =  new E_Ticket__c();
        et1.Airline__c = 'Virgin Australia';
        et1.Opportunity__c = oppNew.Id;
        tickets.add(et1);

        E_Ticket__c et2 =  new E_Ticket__c();
        et2.Airline__c = 'Virgin Atlantic';
        et2.Opportunity__c = oppNew.Id;
        tickets.add(et2);

        // ...
        // add as many tickets needed for all Airlines
        // ...

        insert tickets;
        update tickets;
    }
} 
```

此外，请确保自定义对象在您的沙盒和部署/生产服务器中都匹配。

# jquery - 手风琴菜单问题

> ID：10070132
> 
> 赞同：0
> 
> 时间：2012-04-09T07:16:58.220
> 
> 标签：jquery

我创建了一个简单的手风琴菜单。我的问题是当我单击“Folder1”时它会展开，但是当我再次单击它时它应该崩溃..我被困住了，无法进行任何帮助..

JsFiddle - [http://jsfiddle.net/nY2t7/](http://jsfiddle.net/nY2t7/)

```
$(document).ready(function() {

    $('#content >li').each(function(i){

        hideElements($(this));
    });

    $('#content').click(function(event) {

        $x = $(event.target);

        //check if the element is the root node if so then hide all other li's and reveal the current one
        if($x.parent().is('ul#content')) {

            if($x.is(':visible')) {     //check if its already expanded .. if so then collapse and return
                $x.find('ul >li').slideUp(300 , function() {
                    **//return;** does not work

                });
            }

            $('#content ul>li').each(function(i){                   
                    collapseElements($(this));
            });
        }

        if($x.is('li'))
            $x.find('ul:first > li').slideToggle(300);  

    });

    function collapseElements(el) {
        if(el.is(':visible')) {
            el.slideUp(300);
        }

    }

    function hideElements(elem) {
        elem.find('ul >li').hide(); 

        //$($e >li).hide(); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:32:42.003

最简单的有效代码：

```
$('#content').click(function(event) {
  var $el = $(event.target);
  $el.find('ul:first > li').slideToggle(300);    
}); 
```

虽然，它是无国籍的，这是一件坏事。

# html - 图片未显示在维护页面中

> ID：10070134
> 
> 赞同：0
> 
> 时间：2012-04-09T07:17:44.587
> 
> 标签：html, iis, webserver

我在我的网站中添加了一个维护中的页面。在那个页面中，我只放了一张图片和信息。图像位于图像文件夹内。但是当站点处于维护模式时，图像不会显示在维护页面中。如果不在维护模式下，图像会显示在该页面中。我不知道如何解决它。

在我的页面中，代码很简单，如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0    Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Under Maintenance</title>
</head>
<body style="text-align:center;vertical-align:middle;">
    <div>
        <img src="images/under_maintenance.gif" alt="Under Maintenance" />
        <h2>This site is currently</h2>
        <h1>UNDER MAINTENANCE</h1>
        <h3>We will be back shortly</h3> 
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:26:26.150

将您的网站置于维护模式可能会阻止对所有内容的访问，包括您尝试显示的图像。将图像列入白名单（您的操作取决于您正在运行的服务器）或将图像托管在外部图像主机上，如[imgur](http://imgur.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:26:34.117

谢谢两位回答我的问题。:) 最后，我可以解决它。我将图像嵌入为 base64 格式，例如

```
<img src="data:image/gif;base64,R0lGODlhIQE6AfcAA..." alt="Under Maintenance" />. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:08:57.333

使用 base64 不适合我在 IE 中工作，但很好。

我将 MVC 和维护模式与 App_Offline.htm 一起使用。我有base64字符串作为img src。

Firefox、Chrome、Opera 显示图像。IE8没有。

# asp.net - 将按钮放在 asp.net 图像控件的顶部

> ID：10070136
> 
> 赞同：0
> 
> 时间：2012-04-09T07:18:04.253
> 
> 标签：asp.net, custom-controls

是否可以在自定义控件中的图像控件顶部放置一个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:42:09.937

您可以像这样使用图像按钮

```
<asp:ImageButton runat="server" ID="imgButton" ImageUrl="~/images/asc.gif" /> 
```

设置你的图片 url ，这个图片按钮和普通的 asp 按钮一样，你也可以得到这个按钮的服务器端点击事件。

# android - 使用 mupdf 库的 Pdf 查看器

> ID：10070137
> 
> 赞同：3
> 
> 时间：2012-04-09T07:18:04.590
> 
> 标签：android, mupdf, pdfrenderer

我已经尝试过 mupdf 库来呈现我的 pdf 即。拥有自己的 PDF 查看器，但是当我尝试在我的 Windows 系统上使用 Cygwin 形成 libmupdf.so 文件时，出现错误并且 .so 文件未构建。

请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:58:55.787

1.  下载最新的安卓NDK
2.  安装 CYGWIN
3.  下载MUPDF完整源代码（附三十部分工具）
4.  下载适用于 Windows 的 ANT 构建
5.  设置所有需要的路径（JAVA_HOME，ANT_HOME）
6.  转到 MuPDF 目录
7.  运行 MAKE 命令
8.  然后从 c:\mupdf\android 在 android 中导入项目
9.  运行你的安卓项目。

不要忘记在下载文件夹中至少保留一个 pdf

也遵循 mupdf 中给出的所有步骤

# objective-c - AFNetworking - 如果服务器响应 http 标头状态 304，则仅从缓存加载？

> ID：10070140
> 
> 赞同：2
> 
> 时间：2012-04-09T07:18:09.627
> 
> 标签：objective-c, afnetworking

我有一个关于将 AFNetworking 与 SDURLCache 一起使用的问题。

在我的应用程序中。我可以看到它们一起工作得很好，对于重复查询，来自本地缓存的响应将被正确使用。

但是，假设服务器 xml 在一分钟前更新，在我的应用程序中，仍然使用缓存。

这不符合我的客户的期望，客户的期望是：我需要检查http头，如果是200，从服务器加载文件，如果是304（未修改），只需使用磁盘的本地缓存/

有没有可能这是一种内置行为？或者我必须在某个地方手动破解类，以便它可以像这样运行？

# liferay - Liferay：我们可以使用 Liferay Hooks 来修改 Liferay 登录前和后事件吗

> ID：10070143
> 
> 赞同：1
> 
> 时间：2012-04-09T07:18:30.437
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 6 。

我读过 Liferay Hooks 可用于修改 JSP、属性文件、模型侦听器、系统事件，而无需接触 Liferay 代码。

所以我的问题是我可以使用 Liferay Hooks 来修改 Liferay 登录前和后事件吗？

请明确说明 。

谢谢你 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T08:44:13.340

是的。您要做的是在挂钩项目中指定一个 portal.properties 文件，然后设置以下属性：

```
login.events.pre=
login.events.post= 
```

[在此处查看更多文档。](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/extending-and-overriding-%3Cem%3Eportal-properties%3C-e-1)

# android - Android : PSS (Proportional Set Size) 计算

> ID：10070145
> 
> 赞同：9
> 
> 时间：2012-04-09T07:18:42.397
> 
> 标签：android, memory-management

我试图弄清楚如何计算 PSS 是 Android。

我发现一篇[文章](http://lkml.indiana.edu/hypermail/linux/kernel/0708.1/3930.html)陈述了以下内容。

> 进程的“比例集大小”（PSS）是它在内存中的页数，其中每个页除以共享它的进程数。因此，如果一个进程自己拥有 1000 个页面，并与另一个进程共享 1000 个页面，则其 PSS 将为 1500

我的第一个问题是，以上信息准确吗？如果没有，有人可以告诉我它是如何计算的吗？

另外，这个值是千字节还是“PSS”本身就是一个单位？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T07:32:06.353

是的，这些信息是准确的，这正是它的计算方式。（LWN.net 文章在[这里](http://lwn.net/Articles/230975/)；请注意，参与您链接到该线程的 Matt Mackall 开发了该功能。）

PSS 以千字节为单位，与您获得的所有其他信息一样`/proc/<pid>/smaps`。它的单位来自它的计算方式。

（[/proc/pid/smaps 中给定进程的 PSS 值多久更新一次，有一些关于 PSS 计算位置和方式的指针 - 免责声明：我在那里写了答案。在](https://unix.stackexchange.com/questions/34189/how-often-is-pss-value-updated-for-a-given-process-in-proc-pid-smaps)[Unix 和 Linux](https://unix.stackexchange.com/)上还有一些其他帖子讨论PSS 和相关指标。）

# python - xmpppy。文件描述符超出选择范围

> ID：10070146
> 
> 赞同：2
> 
> 时间：2012-04-09T07:18:44.567
> 
> 标签：python, select, xmpp

我正在使用 xmpppy。我创建了 50 多个 xmpp 连接线程。一段时间后，我收到一个错误：

> `File "transports.py", line 199, in pending_data` `return select.select([self._sock],[],[],timeout)[0] ValueError: filedescriptor out of range in select()`

为什么会发生？

PS对不起我的语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:16:03.363

xmpppy 使用[select()](http://man.cx/select%282%29)系统调用来监视打开的连接。不幸的是 select() 有一个非常尴尬的限制 - 在大多数系统上，它只能监视文件描述符数达到一定限制的连接，通常是 1024。

这意味着随着您打开更多文件和连接，最终您将达到限制。

解决方案是让 xmpppy 使用 poll() 或更现代（但特定于操作系统）的 API，例如 epoll 或 kqueue。所有这些都可以通过 Python 的[“选择”模块](http://docs.python.org/library/select.html)访问。

# wpf - Canvas 中的自定义绘图背景

> ID：10070149
> 
> 赞同：1
> 
> 时间：2012-04-09T07:19:15.273
> 
> 标签：wpf, mvvm, canvas, background, drawing

我想创建用于绘制形状的程序。像这样的东西（[http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1](http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1)）。

为此，我考虑使用 WPF 和 MVVM(PRISM)。

我的要求是自定义背景图。

在实施过程中，我遇到了一些障碍：）

* * *

**查看代码**

```
public class DrawingAreaCanvas : Canvas, IDrawingAreaCanvas
{
    .......
    private IDrawingAreaModelView _modelView;
    [Dependency]
    public IDrawingAreaModelView ModelView
    {
        get { return _modelView; }
        set
        {
            _modelView = value;
            DataContext = _modelView;
        }
    }

    protected override void OnRender(System.Windows.Media.DrawingContext dc)
    {
        base.OnRender(dc);

        _modelView.OnRender(dc); // Pass drawing to modelview
    }
} 
```

这种方法正确吗？

问候， Leszek

# php - MySql：Order by 和 Group By 结合不给出最新记录

> ID：10070152
> 
> 赞同：1
> 
> 时间：2012-04-09T07:19:29.330
> 
> 标签：php, mysql, sql

使用以下查询，我正在寻找一种解决方案来获取具有某些条件的最新记录。但它给了我第一个记录，而不是最新的。我认为它只考虑组请告诉我

```
SELECT * FROM `contacts` WHERE `id_receiver`=1  GROUP BY `id_thread` ORDER BY created DESC

id   id_sender   id_thread sender_email   id_receiver      created(datetime)
1    2             2         51             1                2012-03-24 13:44:48
2    4             4         1              5                 2012-04-26 13:46:05
3    2             2         51             1                2012-04-09 12:12:30 
```

所需输出

```
id   id_sender  id_thread sender_email   id_receiver      created(datetime)
3    2           2         51             1                2012-04-09 12:12:30 
```

我做了一个测试，只是交换了 order by 和 group by ，给了我一个错误。

任何人都可以看看这个？谢谢。

**编辑**编辑的问题，忘记写 id_thread

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T07:39:00.880

`GROUP BY id_thread`当你的表中没有`id_thread`列时你怎么能？

```
SELECT * 
FROM contacts 
WHERE id_receiver = 1 
                                 --- GROUP BY id_thread
                                 --- removed 
ORDER BY created DESC
LIMIT 1                          --- only show one row 
```

* * *

根据您的评论，您想要的是`created`every 的最新（按 排序）行`id_thread`，这是一个不同且更复杂的查询。这种查询甚至还有一个标签，名为[`[greatest-n-per-group]`](https://stackoverflow.com/questions/tagged/greatest-n-per-group).

```
SELECT c.* 
FROM contacts AS c
  JOIN
    ( SELECT id_thread, MAX(created) AS created 
      FROM contacts 
      WHERE id_receiver = 1  
      GROUP BY id_thread
    ) AS g 
    ON (g.id_thread, g.created) = (c.id_thread, c.created) 
WHERE c.id_receiver = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:26:06.140

如果记录是按顺序排列的，那么您也可能按 id 排序——当且仅当它是按顺序创建的——

# android - 从安卓到网络服务器的数据安全？

> ID：10070153
> 
> 赞同：0
> 
> 时间：2012-04-09T07:19:49.020
> 
> 标签：android

我有安卓应用。我应该将数据从 android 传递到具有数据安全性的 Web 服务器。任何人都可以建议我提供哪些数据安全性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:36:32.857

使用 Https ，您应该先为您的服务器购买 SSL ，然后使用 https 发送数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:25:14.103

您可以使用 HttpPost 方法发送数据。这是一个简单的例子。

```
public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
```

# node.js - 让 Node-http-proxy 与 socket.io 一起工作？

> ID：10070154
> 
> 赞同：4
> 
> 时间：2012-04-09T07:19:50.140
> 
> 标签：node.js, socket.io, node-http-proxy

我正在尝试使用 node-http-proxy 将流量定向到端口 3000（我的 rails 服务器）和端口 8888（我的 nodejs socket.io 服务器）。我正在使用 node-http-proxy 充当位于端口 80 上的反向代理。

（我几乎只是从 node-http-proxy 复制自述文件）

```
var proxy = new httpProxy.HttpProxy({ 
  target: { 
    host: 'localhost', 
    port: CONFIG.RAILS_PORT,
  }
});

var server = http.createServer(function(req, res) { 
  //
  // Proxy normal HTTP requests
  //
  proxy.proxyRequest(req, res);
});

server.on('upgrade', function(req, socket, head) { 
  // 
  // Proxy websocket request to another port 
  //
  console.log('inside upgrade');
  proxy.proxyWebSocketRequest(req, socket, head, {
    host: 'localhost', 
    port: CONFIG.NODEJS_PORT
  });
});

server.listen(80);

var WrappedServer = require('./wrappedServer').WrappedServer
var singleton = new WrappedServer();
singleton.run(CONFIG.NODEJS_PORT, {'log level': 2}); 
```

这是我在浏览器上的 client.js。

```
var socket = io.connect('http://localhost', {'sync disconnect on unload': false}); 
```

不知何故，io.connect 无法连接到 nodejs 服务器。我从 io.connect 收到此响应：

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Action Controller: Exception caught</title>
  <style>
    body { background-color: #fff; color: #333; }

    body, p, ol, ul, td {
      font-family: helvetica, verdana, arial, sans-serif;
      font-size:   13px;
      line-height: 18px;
    }

    pre {
      background-color: #eee;
      padding: 10px;
      font-size: 11px;
    }

    a { color: #000; }
    a:visited { color: #666; }
    a:hover { color: #fff; background-color:#000; }
  </style>
</head>
<body>

<h1>Routing Error</h1>
<p><pre>No route matches [GET] &quot;/socket.io/1&quot;</pre></p>
</body>
</html> 
```

知道如何让 io.connect 连接到 nodejs 服务器吗？我不知道如何触发 io.connect 以访问 server.upgrade 块。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T01:38:38.620

使用 socket.io，您首先执行 http 握手。此步骤不涉及 websocket 连接。您从 http-proxy github 页面的自述文件部分引用的上述代码说明了如何直接侦听 websocket 请求。在这里，您需要一个用于 socket.io 的普通路由条目（使用 HTTP 资源），当握手完成时，您的连接将升级到 websocket，代理将自动处理它。

这是一个伪代码。我在生产中使用它来代理多个由实际物理资源（HTTP 资源）标识的 socket-io 服务器。

假设我有两个 socket.io 服务器在以下 ip 和端口上运行，如下所示 -

1.  ip1:3000
2.  ip2:3001

现在我们代理中的代码（使用 ip ip3）看起来像 -

```
var options = {
  "ip3/Socket1/socket.io" : "ip1:3000/socket.io",
  "ip3/Socket2/socket.io" : "ip2:3001/socket.io"
}

proxy = require('http-proxy').createServer(options).listen(80); 
```

这里有几点需要注意——

*   在这里，我使用`Socket1`and`Socket2`作为别名来分别识别第一个和第二个 socket-io 服务器。
*   只要您有权访问它，您就可以代理到任何机器。即，您可以从您的代理服务器（此处为 ip3）ping 那些机器（此处为 ip1 和 ip2），并且没有防火墙阻止您的连接（您是同一网络的一部分）。
*   如果您在同一主机上拥有以上所有内容，则可以替换`ip1`和`ip2``localhost`

对于我当前的示例，客户端 javascript 代码看起来像这样 -

```
var socket1 = io.connect('http://ip3:80', {'resource': 'Socket1/socket.io'});
var socket2 = io.connect('http://ip3:80', {'resource': 'Socket2/socket.io'}); 
```

所有这些看起来都需要一次消化。如果您仍然遇到此问题，请告诉我。

# javascript - jquery - 快乐的点击器 - 寻找绑定事件的回调

> ID：10070156
> 
> 赞同：0
> 
> 时间：2012-04-09T07:19:55.910
> 
> 标签：javascript, jquery

我将一些稍微复杂的功能绑定到点击事件

```
$(someSelector)).bind('click', someFunction(a,b,c));

function somefunction(a,b,c) {
    return function() {
        // some logic
        $(anotherSelector).each(function() {
            // fade out with call back...
            $(this).fadeOut("fast", function() {
                // TODO: add callback here???
                $(contentSelector).fadeIn("fast");
            })
        })

    }
} 
```

问题是一系列快速点击导致不一致的淡出/淡入行为。我假设在当前的淡入完成之前处理了新的点击事件。

我想我正在寻找一些回调机制，以确保在当前点击完成后处理新的点击。我可以在fadeIn中添加一个回调，但我看不出我的逻辑对我有什么帮助......

只要处理了单击（然后重新绑定它们），我还阅读了有关取消绑定组件的信息，但同样 - 我不确定我会将其放在哪个逻辑之上。

谢谢你的建议 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:35:23.110

您可以使用 jQuery 的[`.on`](http://api.jquery.com/on/)和[`.off`](http://api.jquery.com/off/)方法：

```
$someElement = $(someSelector)
$someElement.on('click', someFunction(a, b, c));

function someFunction(a, b, c) {
  // detach the event handler
  $someElement.off('click', someFunction);

  /* useful stuff here */

  // reattach the event handler
  $someElement.on('click', someFunction(a, b, c));
} 
```

我在哪里[缓存了 jQuery 元素](https://stackoverflow.com/a/1229339/596068)。

或者，您可以在回调范围之外创建一个变量，在回调中检查并设置它的值：

```
$(someSelector)).bind('click', someFunction(a,b,c));

var isWaiting = false;
function somefunction(a,b,c) {
  if (!isWaiting) {
    isWaiting = true;

    /* useful stuff here */

    isWaiting = false;
  }
} 
```

我会推荐`.on`/`.off`方法，因为它更直接地处理 jQuery 事件绑定过程。

# android - 如何使用单选按钮创建微调器

> ID：10070158
> 
> 赞同：3
> 
> 时间：2012-04-09T07:20:14.447
> 
> 标签：android, spinner

在 main.xml 中，我想要一个带有两个单选按钮的 spinner1 和一个带有 3 个复选框的 spinner2。我不知道如何在 Main.java 中定义和创建这个微调器。需要一些帮助。

**主要的.xml**

```
<Spinner
android:id="@+id/spinner1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
/>
<Spinner
android:id="@id/spinner2"
android:layout_width="match_parent"
android:layout_height="wrap_content"
/> 
```

spinner1 - 需要有单选按钮，spinner2 需要有多个复选框

```
main.java

privare Spinner spiner1,spiner2;
public void OnCreate(BUndle SaveInstaceState)
{
super.OnCreate(savedInstanceState);
setContentView(R.layout.main)

spiner1=(Spinner)findViewById(R.id.spinner1);
spiner2=(Spinner)findViewById(R.id.spinner2);

//what to do from here?

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T07:32:03.350

在 res/values/ 中创建一个 strings.xml 文件并添加以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
  <resources>
<string name="spinnerstr">Choose an item</string>
<string-array name="spinner_array">
    <item>apple</item>
    <item>orange</item>
    <item>grapes</item>
</string-array> 
```

在您的 spinner.java 中，添加以下内容：

```
Spinner spinner = (Spinner) findViewById(R.id.spinner);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
        this, R.array.spinner_array, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-20T12:13:04.377

**接受的答案不再起作用。**

而是使用它来查看单选按钮：

```
adapter.setDropDownViewResource(android.R.layout.select_dialog_singlechoice); 
```

对于那些使用自定义布局的人，只需添加`android:checkMark="?android:attr/listChoiceIndicatorSingle"`并使`android:gravity="center_vertical"`单选按钮与文本对齐即可。

# drools - Drools：drools 事件处理有问题

> ID：10070163
> 
> 赞同：0
> 
> 时间：2012-04-09T07:21:12.637
> 
> 标签：drools

我对流口水很陌生。

我正在开发一个应用程序，我的 drools 引擎每秒都会收到一系列事件。我需要查看最近 10 秒内的所有事件的属性值是否低于 10，如果条件为真，我必须进行一些处理。这是我尝试过的示例代码，请帮助我理解并解决问题。

我的规则文件......

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;

declare Employee 
@role (event)
@expires(10s)
end

// Using timer to ensure rule processing starts only after 10 secs, 
//else processing starts as soon as first event comes in
rule "Test Timer"
no-loop true
10timer(int: 5s)
when
$E : Employee()
$total : Number( doubleValue < 1 ) 
    from accumulate( Employee( Age > 10 ), count() )
then 
   System.out.println(  $E.getName() + " is crossing the threshold of 20");
retract($E);
end 
```

和主类

```
// import classes removed from here...
public class MainClass {

/**
 * @param args
 */
public static void main(String[] args){

    //Create KnowledgeBase...
    KnowledgeBase knowledgeBase = createKnowledgeBase();

    //Create a stateful session
    StatefulKnowledgeSession session = knowledgeBase.newStatefulKnowledgeSession();
//  KnowledgeRuntimeLogger logger = KnowledgeRuntimeLoggerFactory.newConsoleLogger(session);
    try {

        // Using random generator to simulate the data.
        int randomInt=0;
        Random randomGenerator = new Random();
        DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
        Date date = null; 

        while (true) {
            Thread.sleep(1000);
            date = new Date();
            randomInt = randomGenerator.nextInt(12);

            //Create Facts and insert them      
            Employee emp = new Employee();
            emp.setName("Anurag" + randomInt);
            emp.setAge(randomInt);

            //LOAD THE FACT AND FIREEEEEEEEEEEEEEEEEEE............
            System.out.println(dateFormat.format(date)+ " => Random no " + randomInt);
            session.insert(emp);
            session.fireAllRules();
        } 

    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        session.dispose();
    }
}

    /**
    * Create new knowledge base
    */
private static KnowledgeBase createKnowledgeBase() {
    KnowledgeBuilder builder = KnowledgeBuilderFactory.newKnowledgeBuilder();
            //Add drl file into builder
    File drl = new File("D:\\eclipse\\worspace\\Research\\misc\\testforall.drl");
    builder.add(ResourceFactory.newFileResource(drl), ResourceType.DRL);
    if (builder.hasErrors()) {
        System.out.println(builder.getErrors().toString());
        //throw new RuntimeException(builder.getErrors().toString());
    }

    KnowledgeBase knowledgeBase = KnowledgeBaseFactory.newKnowledgeBase();
            //Add to Knowledge Base packages from the builder which are actually the rules from the drl file.
    knowledgeBase.addKnowledgePackages(builder.getKnowledgePackages());
    KnowledgeBaseConfiguration config = KnowledgeBaseFactory.newKnowledgeBaseConfiguration();

    config.setOption( EventProcessingOption.STREAM );
    return knowledgeBase;
}
}

public class Employee {
private String Name;
private int Age;
// getter - setters
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:58:15.813

你检查过 Drools Fusion 文档吗？首先，Employee 对于 Event 来说听起来不是一个好主意。事件是与您的领域相关的事物状态的有意义的变化。因此，事件可能是员工到达办公室的时间或离开的时间，但员工本身是域实体（或规则引擎的事实）而不是事件。如果您对使用 Drools 融合时间算子感兴趣，我建议您阅读有关滑动窗口（时间算子）的内容，这将让您始终了解过去十秒内发生的情况。您不需要为此使用计时器。干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T17:48:06.037

你忘了告诉你运行它时发生了什么，如果你这样做了。

如果你的实体集不是很大，我认为这个问题可以通过基本的 Drools 分布很容易地解决。

我有一个和你类似的应用程序，对我有用：

```
rule "Clear only auxiliar fact"
  salience 1
  when
    af: AuxFact()
  then
    DroolsRepository.retractFact(af);
end

rule "Clear auxiliar fact and an old meaningful fact"
  salience 1000
  when 
    af: AuxFact()
    mf: MeaningfulFact()
  then
    if(DroolsRepository.getCurrentTimeMillis() - tmf.getCreationDate().getTime() > 5000){
      DroolsRepository.retractFact(af);
      DroolsRepository.retractFact(mf);
      // YOUR MEANINGFUL CODE
    }
    else{
      DroolsRepository.retractFact(af);}
end

query "getAllFacts"
  $result: Fact()
end 
```

和

```
// Boot rules re-executing thread.
new Thread(new Runnable(){
  public void run(){
  do{
    kSession.insert(new AuxFact());
    try{
      Thread.sleep(99);}
    catch(InterruptedException e){
      e.printStackTrace();}}
  while(true);}
}).start(); 
```

类似的方法可能更简单有效。

# iphone - 触摸并按住 Scrollview 后，滚动不起作用

> ID：10070164
> 
> 赞同：0
> 
> 时间：2012-04-09T07:21:18.950
> 
> 标签：iphone, ios5, ios4, uiscrollview, scroll

我已经构建了一个应用程序并使用滚动视图并动态添加许多子视图到该滚动视图中所有的东西都在工作滚动视图也在工作但是当我在滚动不起作用之后触摸并按住滚动视图时。

请帮助我解决这个问题。

提前感谢您的任何帮助和建议。

**编辑：**

我找到了问题，但对我来说又是新问题。

我已经动态设置了滚动视图的内容大小

```
if ([Array_Notes count] > 3)
{
    NSInteger no=[Array_Notes count] * 60;
    NSLog(@"%d",no);
    scroll_view.contentSize=CGSizeMake(320, 800);
}
else
{
    scroll_view.contentSize=CGSizeMake(320, 500);
} 
```

这样就出现了问题（触摸并按住而不是滚动不起作用）

但是：- 当我设置滚动视图的内容大小时

```
scroll_view.contentSize=CGSizeMake(320, 800); 
```

比它工作正常没有任何问题。

所以这是我的问题，任何人都面临过吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:30:19.947

尝试设置此标志 scrollView.canCancelContentTouches = YES;

# windows - 如何将整个目录替换为目标目录和子目录？

> ID：10070165
> 
> 赞同：1
> 
> 时间：2012-04-09T07:21:40.870
> 
> 标签：windows, batch-file, replace, cmd

只是想问一下，如何用源文件中的相同文件替换目标目录和子目录中的文件？假设我想用源目录中的文件“X”替换目标目录或子目录中的文件“X”，脚本必须遍历所有目录和子目录才能找到文件“X”并替换它

```
Example 

Source:        "C:\MyPics\New\*.*"
Destination:   "C:\MyPics\All\A\*.*"
               "C:\MyPics\All\B\1\*.*"
               "C:\MyPics\All\B\2\*.*"
               "C:\MyPics\All\C\*.*" 
```

你有什么建议来完成这个吗？

希望早日收到你的消息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:52:50.193

这是未经测试的，但我认为我的代码是正确的。

如果您希望用源中的单个文件替换，那么

```
@echo off
set "src=C:\MyPics\New\"
set "dst=C:\MyPics\All\"
set "file=X"
for /f "eol=: delims=" %%F in ('dir /b /s "%dst%%file%"') do copy /y "%src%%file%" "%%F" 
```

如果您要替换源中的所有文件，那么

```
@echo off
set "src=C:\MyPics\New\*"
set "dst=C:\MyPics\All\"
for %%S in ("%src%") do (
  for /f "eol=: delims=" %%F in ('dir /b /s "%dst%%%~nxF"') do copy /y "%%S" "%%F"
) 
```

您可以将定义中的掩码更改`src`为更具体`*`

# java - Java，为 JButton 设置 ID

> ID：10070169
> 
> 赞同：9
> 
> 时间：2012-04-09T07:22:02.497
> 
> 标签：java, swing, jbutton

无论如何要为`JButton`. 我习惯了安卓。

我正在寻找类似以下的内容：

```
newButton.setId(objectcounter); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-09T07:29:36.110

您可以使用一个属性名称：

```
newButton.setName(String.valueOf(objectCounter)) 
```

或者，您可以使用 clientProperties 来存储任意值：

```
newButton.putClientProperty("id", Integer.valueOf(objectCounter)) 
```

要从客户端属性映射中获取值，您需要这样的东西。

```
Object property = newButton.getClientProperty("id");
if (property instanceof Integer) {
   int objectCounter = ((Integer)property);
   // do stuff
} 
```

# django - Tastypie obj_create - 如何使用新创建的对象？

> ID：10070173
> 
> 赞同：6
> 
> 时间：2012-04-09T07:22:16.880
> 
> 标签：django, tastypie

当使用 Tastypie 创建新项目时，我希望能够将其添加到用户的属性中，这是一个多对多字段。现在我的 obj_create 看起来像这样：

```
 def obj_create(self, bundle, request=None, **kwargs):
    return super(GoalResource, self).obj_create(bundle, request, user=request.user) 
```

我想创建新对象，但是当我希望能够将它添加到 request.user 的属性goal_list 时。但是，我所拥有的将立即在数据库中创建对象。我将如何创建对象，然后将其添加到用户的 goal_list 属性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T08:29:07.893

您没有向我们展示您的资源定义，但假设您将`tastypie.resources.ModelResource`其用作基类，这应该可以：

```
def obj_create(self, bundle, request=None, **kwargs):
    bundle = super(GoalResource, self).obj_create(
        bundle, request, user=request.user)

    user = request.user
    user.goals.add( bundle.obj )
    user.save()
    return bundle 
```

这是因为类的`obj_create`方法`ModelResource`返回一个包含保存对象 ( `bundle.obj`) 的包，您可以在`obj_create`方法中操作该对象，如图所示，然后才返回它。

我还假设 request.user 包含一个有效的`User`对象（即经过身份验证的），您需要确保它可以为上述工作，或者您应该添加一些错误处理代码来处理它不存在的情况。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-11T19:30:44.963

我还没有足够的声誉来发表评论，所以我想我会提出第二个答案。上面的答案是正确的，我只是想在 obj_create 调用中添加该请求不再存在。您可以通过 bundle.request 访问当前请求：

[http://django-tastypie.readthedocs.org/en/latest/resources.html#accessing-the-current-request](http://django-tastypie.readthedocs.org/en/latest/resources.html#accessing-the-current-request)

谢谢楼上的回答，对我也有帮助！

# php - php webservices 与 android

> ID：10070174
> 
> 赞同：0
> 
> 时间：2012-04-09T07:22:21.760
> 
> 标签：php, android, web-services

我是 PHP 编程新手，对此知之甚少，但我想用它为我的客户端 Android 应用程序提供 Web 服务......

我开始使用 PHP 制作我的第一个 Web 服务，它运行良好，但我想知道如何制作一个包含我需要的所有函数和方法的文件，以及如何从 Android 调用它

谢谢

这是functions.php

```
 <?php
   function GetAllRest()
    {
    mysql_connect("localhost","root","root");
    mysql_select_db("myhoteldb");
     $sql=mysql_query("SELECT rest_id ,rest_name,cuisine,no_tables,bg_img,rest_logo      FROM  restaurant");
  while($row=mysql_fetch_assoc($sql))
  $output[]=$row;
  print(json_encode($output));
  mysql_close();
}
function GetAllCategory($lang_id,$rest_id)
{
    mysql_connect("localhost","root","root");
    mysql_select_db("myhoteldb");
    $sql=mysql_query("SELECT cat_lang.rowid ,cat_lang.cat_id as _id,lang_id,   cat_name,cat_description from cat_lang  ,menu_category WHERE lang_id= $lang_id  AND  restaurant= $rest_id ");

      while($row=mysql_fetch_assoc($sql))
     $output[]=$row;
     print(json_encode($output));
      mysql_close();

  }

   ?> 
```

和 URL [http://localhost/mywebservices.php?op=GetAllCategory&lang_id=1&rest_id=1](http://localhost/mywebservices.php?op=GetAllCategory&lang_id=1&rest_id=1)

我现在得到了这个错误

```
 Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in 
```

C:\xampp\htdocs\functions.php 第 22 行

```
 Notice: Undefined variable: output in C:\xampp\htdocs\functions.php on line 24
    null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:35:19.447

作为一个想法，我建议在您的 url 中包含希望运行的函数名称。然后，获取该函数名称和参数，将它们传递给 php

```
call_user_func_array() 
```

功能。

这是函数处理程序的一个非常基本的想法：

您的请求 URL 如下所示：

```
http://www.mysite.com/webservice.php?op=CallFunctionOne&param_a=test&param_b=test2 
```

这是将调用路由到函数的处理程序：

```
require_once("./functions.php");

if(!empty($_SERVER["QUERY_STRING"])){
    $query_str = stripslashes($_SERVER['QUERY_STRING']);
    parse_str($query_str,$args);
    $op = array_shift($args);
    if(is_callable ($op)){
        call_user_func_array($op,$args);
    }
    else{
        echo "Handler error.<br />";
        echo $op . " function is not callable.";
    }
} 
```

functions.php 文件将包含您的函数。希望它会给一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:28:50.060

如果您了解 PHP，那么我假设您会了解 HTML。

PhoneGap 允许您使用 HTML、Javascript 和 CSS 在 Android 上运行应用程序。[http://phonegap.com/start](http://phonegap.com/start)

使用 Javascript，您可以向您的 web php 文件发出页面请求。

这是一个 jQuery 示例

```
<script>
$.ajax({
  url: 'http://example.com/myfile.php',
  dataType: 'json',
  success: function(data) {
    alert(data.rest_name); // do whatever you want with the json response
  }
});
</script> 
```

要启用跨域，您需要将其添加到 php 文件头中（不确定应用程序是否需要跨域验证）

```
header('Access-Control-Allow-Origin: *'); 
```

# ant - Selenium Grid 与 Ant 顺序 + 并行执行

> ID：10070175
> 
> 赞同：6
> 
> 时间：2012-04-09T07:22:21.927
> 
> 标签：ant, selenium, parallel-processing, selenium-grid

我正在尝试使用 selenium grid 2 设置运行 selenium 测试。我的测试更依赖。我必须很好地定义我的顺序运行和并行运行。附加我的 build.xml 文件以供参考。在顺序节点内部，我有许多具有不同目标的并行节点。我在运行这个 build.xml 时遇到了不一致的问题。

有时它会拾取第二个并行节点的目标，有时它不会。它也没有给出错误。我尝试在详细模式下运行 ant 命令，仍然没有收到 ant 异常。

如果有人在这方面提供帮助，我会很高兴。

```
<target name="startServerRC" depends="startServerhub">
        <echo>Starting Selenium Server...</echo>
        <java jar="${lib.dir}/selenium-server-standalone.jar" fork="true" spawn="true">
            <arg line="-port 5555"/>
            <arg line="-log log.txt"/>  
            <arg line="-firefoxProfileTemplate"/>
            <arg value="${lib.dir}/ff_profile"/>
            <arg line="-userExtensions"/>
                <arg value="${lib.dir}/user-extensions.js"/>
            <arg line="-role node"/>
            <arg line="-hub http://localhost:4444/grid/register "/>
            <arg line="-maxSession 10"/>
            <arg line="-maxInstances=10"/>
        </java>
    </target>

        <!-- Initialization -->
    <target name="init" depends="startServerRC" >
        <echo>Initlizing...</echo>
        <delete dir="${classes.dir}" />
        <mkdir dir="${classes.dir}"/>
    </target>

    <!-- Complies the java files -->
    <target name="compile" depends="init">
        <echo>Compiling...</echo>
        <javac 
            debug="true" 
            srcdir="${src.dir}" 
            destdir="${classes.dir}"   
            classpathref="classpath" />
    </target>

    <target name="CItarget">    
        <sequential>
            <antcall target="compile"/>
            <parallel> 
              <antcall target="run"/>
              <antcall target="run_PSDATA"/>
            </parallel>
            <parallel> 
                <antcall target="run_PreData"/> 
                <antcall target="run_DFPPulls"/> 
                <antcall target="run_AdTechPulls"/> 
                <antcall target="run_AppnexusPulls"/> 
                <antcall target="run_FTPPulls"/> 
                <antcall target="run_OASPulls"/> 
                <antcall target="run_GDFPPulls"/> 
                <antcall target="run_FreewheelPulls"/> 
                <antcall target="run_ThirdPartyPulls"/> 
            </parallel>
            <parallel>
        <antcall target="run_PostData"/> 
                <antcall target="run_Sales"/> 
            </parallel>
            <parallel>
                <antcall target="run_Administration"/> 
                <antcall target="run_E2EPartner360"/> 
                <antcall target="run_Sales"/> 
                <antcall target="run_Finance"/> 
                <antcall target="run_Loaders"/> 
                <antcall target="run_Accounts"/> 
                <antcall target="run_Adops"/> 
            </parallel>
            <parallel>
                <antcall target="run_Alerts"/> 
                <antcall target="run_CustomFields"/> 
            </parallel>
            <antcall target="stop-selenium"/>
       </sequential>
    </target> 
```

在此先感谢
Anjana

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:49:07.170

试试[QAF（以前称为 ISFW）](http://qmetry.github.io/qaf)，您可以在其中使用/不使用网格并行运行测试。在您的情况下，以下配置文件可以满足您的要求：

```
<suite name="Sample Test Automation" verbose="0" parallel="tests">
<test name="Set1" > 
    <parameter name="selenium.server" value="server1"/>
    <parameter name="selenium.port" value="port"/>

    <!-- group or class or package entry as per testNG standard 
     -->    
    <classes>
    <class name="qualified name of class"></class>
    </classes>>     
</test>

<test name="set2" > 
    <parameter name="selenium.server" value="server2"/>
    <parameter name="selenium.port" value="port"/>

    <!-- <packages>
        <package name="package name" />
    </packages> 
     -->    
    <classes>
    <class name="qualified name of class"></class>
    </classes>
</test> 

</suite> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T11:25:30.987

最好使用 tesng 或 junit 来管理并行测试，而不是直接在 Build.xml 中进行。

这是一个关于配置 testng、Ant 和 selenium 网格的好教程：

[http://technologyandleadership.com/six-steps-for-complete-test-automation-with-selenium-grid/](http://technologyandleadership.com/six-steps-for-complete-test-automation-with-selenium-grid/)

# matlab - 仅查找所选条目的平均值

> ID：10070176
> 
> 赞同：1
> 
> 时间：2012-04-09T07:22:24.080
> 
> 标签：matlab, mean

考虑两个向量：

```
 v= [1 2 3 4 5 6 7]

 a=['a' 'b' 'c' 'a' 'a' 'a' 'd'] 
```

我想找到 v 中所有条目的平均值，它们在 a 中的对应条目是'a'；

即测试=平均值（1,3,4,5）

我已经尝试过这个开始捕捉条目：

```
for i=1:7
 if abs(char(a(i))-char(c))==0;
   test(i)=v(i);
 end
end 
```

> > 测试

```
test =      1     0     0     4     5     6 
```

问题：

1.  它为未找到的条目分配 0
2.  不考虑上学期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:25:15.540

尝试使用该[`ismember`](http://www.mathworks.co.uk/help/techdoc/ref/ismember.html)功能：

> ```
> >> help ismember
>  ismember True for set member.
>     ismember(A,S) for the array A returns an array of the same size as A
>     containing 1 where the elements of A are in the set S and 0 otherwise.
>     A and S can be cell arrays of strings. 
> ```

`ismember`将`test`向量形成为逻辑数组，在向量中找到字符“a”的位置分配 1，在不存在的位置分配 0：

```
>> ismember(a, 'a')

ans =

 1     0     0     1     1     1     0 
```

然后，您可以将其用作*逻辑索引*，以从您的向量中提取相应的条目`v`：

```
>> v(ismember(a, 'a'))

ans =

     1     4     5     6 
```

最后，你可以取这个向量的平均值：

```
>> mean(v(ismember(a, 'a')))

ans =

  4 
```

* * *

**编辑** 我已经意识到，在您的情况下，您实际上可以使用比较运算符以更简单的方式形成逻辑数组：

```
>> a == 'a'

ans =

     1     0     0     1     1     1     0 
```

所以你的最后一行代码看起来像这样：

```
>> mean(v(a == 'a'))

ans =

     4 
```

`ismember`在您想要测试是否存在多个字符时非常有用，例如，如果您想要查找“a”*或*“b”所在的位置。

# biztalk - 使用 WSBasicHTTPBinding 在 BizTalk 2010 中调用 SAP webservice(HTTPS) 时收到肥皂异常

> ID：10070178
> 
> 赞同：3
> 
> 时间：2012-04-09T07:22:52.980
> 
> 标签：biztalk, biztalk-2010

我在 BizTalk 2010 中调用 SAP webservice(HTTPS)。我使用使用 wcf 服务向导生成了架构。当我通过传递请求的模式实例调用 web 服务时，我收到以下错误消息：

```
<SOAP:Fault xmlns:SOAP="http://schemas.xmlsoap.org/soap/envelope/">
      <faultcode>SOAP:Server</faultcode>
      <faultstring>Server Error</faultstring>
      <detail>
        <s:SystemError xmlns:s="http://sap.com/xi/WebService/xi2.0">
          <context>XIAdapter</context>
          <code>ADAPTER.JAVA_EXCEPTION</code>
          <text><![CDATA[ com.sap.aii.af.service.cpa.CPAException: com.sap.aii.af.service.cpa.impl.exception.CPALookupException: Couldn't retrieve inbound binding for the given P/S/A values: FP=;TP=;FS=null;TS=null;AN=null;ANS=null;    at com.sap.aii.af.service.cpa.impl.lookup.CommonLookup.checkForError(CommonLookup.java:53)  at com.sap.aii.af.service.cpa.InboundRuntimeLookup.getBinding(InboundRuntimeLookup.java:411)    at com.sap.aii.af.service.cpa.impl.lookup.AbstractLookupManager.getBinding(AbstractLookupManager.java:714)  at com.sap.aii.adapter.soap.web.MessageServlet.doPost(MessageServlet.java:427)  at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)     at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)     ….. ……
          ]]></text>
        </s:SystemError>
      </detail>
    </SOAP:Fault> 
```

我尝试使用 SOAPUI 工具调用 web 服务，并且收到了正确的响应。我使用提琴手跟踪了从 BizTalk sendPort 发出的请求（使用 wcfBasicHTTP 绑定调用 webservice overHTTP-soap），该请求看起来很好并且在 SOAPUI 中工作。我不知道为什么我会在 BizTalk 中收到这个特定的肥皂错误。感谢任何帮助。

**BizTalk Fiddler 转储（HTTP 标头顺序重新排列）**

```
POST localhost:8888 HTTP/1.1 
Accept-Encoding: gzip, deflate 
Content-Type: text/xml; charset=utf-8 
SOAPAction: "sap.com/xi/WebService/soap1.1"; 
Content-Length: 2296 
Host: localhost:8888 
Expect: 100-continue 
Connection: Keep-Alive 

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body>
<ns0:z xmlns:ns0="urn:sap-com:document:sap:rfc:functions"> 
........ 
</ns0:z>
</s:Body>
</s:Envelope> 
```

**SOAPUI 提琴手转储**

```
POST localhost:8888 HTTP/1.1 
Accept-Encoding: gzip,deflate 
Content-Type: text/xml;charset=UTF-8 
SOAPAction: "sap.com/xi/WebService/soap1.1"; 
Content-Length: 2417 
Host: localhost:8888 
Proxy-Connection: Keep-Alive 
User-Agent: Apache-HttpClient/4.1.1 (java 1.5) 

<SOAP-ENV:Envelope xmlns:SOAP-ENV="schemas.xmlsoap.org/soap/envelope/"; 
xmlns:ns0="urn:sap-com:document:sap:rfc:functions">
<SOAP-ENV:Header/>
<SOAP-ENV:Body>
<ns0:z xmlns:ns0="urn:sap-com:document:sap:rfc:functions">
 ....
</ns0:z>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:26:32.267

我看不到任何明显的东西，可能除了字符集内容类型标题中的 utf-8 大写字母。

而且我假设肥皂体有效负载（........）是相同的 - 您可能会检查消息中是否指定了肥皂操作以及标题 - 我不确定 SAP Web 服务是否是[HTTP 标头或 SOAP 标头中的](https://stackoverflow.com/questions/2142207/wcf-soap-actions-in-http-header-or-soap-header)SOAP 1.1 或 1.2 WCF 肥皂操作？

一种可能的尝试是在您的发送端口上使用 XmlTransmit 发送管道并尝试使用 Preserve BOM（即在有效负载上添加/删除 UTF BOM），并尝试将目标字符集设置为大写 UTF-8。

作为最后的手段，不要使用 WebServices，而是尝试使用适用于 SAP 的适配器服务 - 请参阅[此处](http://biztalkhotrod.com/Documents/BizTalkHotrod11_Q4_2010.pdf)和[此处](http://msdn.microsoft.com/en-us/library/cc185545%28v=bts.10%29.aspx)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-11T11:03:40.327

问题已解决。我将端点的 URL 修改为 SOAPUI 使用的 URL。

# javascript - 我想使用 JQuery 或 CSS 更改表格行的颜色

> ID：10070182
> 
> 赞同：1
> 
> 时间：2012-04-09T07:23:41.830
> 
> 标签：javascript, jquery, html, css

我想改变行的颜色。
喜欢，

每 5 行更改 TR 的颜色。
前5行绿色（0-4行），后
5行红色（5-9行），后
5行黄色（10-14行）
等等......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:29:10.470

您可以执行以下操作，检查每个元素的索引，然后根据需要调整背景颜色 ....thiw 很容易为您工作..

```
$('#table tr').each(function(index)
{   
    if( index < 5) 
     $(this).css("background-color", "#000000"); //change color code as you need
    else if( index < 10) 
     $(this).css("background-color", "#0000FF"); //change color code as you need
    else if( index < 15) 
     $(this).css("background-color", "#00FF00"); //change color code as you need
  //////go on for others

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T07:29:49.863

到目前为止，您还没有发布您尝试过的内容，因此请阅读下面的文档。很简单，但你Whois总是在问之前做你自己的研究！ [http://docs.jquery.com/Tutorials:Zebra_Striping_Made_Easy](http://docs.jquery.com/Tutorials:Zebra_Striping_Made_Easy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T07:50:04.550

试试这个 - 一个纯 CSS 解决方案。

```
// n starts from 0 to infinity. 
// for n+1
//     0+1 = 1
//     1+1 = 2
//     2+1 = 3
//     ... so on...

table tr:nth-child(n+1) {
  color: green;
}
table tr:nth-child(n+6) {
  color: red;
}
table tr:nth-child(n+11) {
  color: yellow;
} 
```

演示：http: [//jsfiddle.net/29zrT/](http://jsfiddle.net/29zrT/)

更多信息：[http ://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T08:58:02.120

一个版本的shiplu代码：

```
var t = document.getElementById("tbl");
rows = t.rows;
var colours = ['yellow','green','red'];
var group = 5;
var k = colours.length * group;

for(var j=0, jLen = rows.length; j<jLen; j++){
    rows[j].style.backgroundColor = colours[(j%k)/group | 0];
} 
```

这将使 5 组中的行颜色相同。如果行数超过 15 行（分组行数乘以颜色数），它将再次启动模式。

# c# - 如何禁用单个图像（单个页面）的缓存？

> ID：10070185
> 
> 赞同：0
> 
> 时间：2012-04-09T07:24:04.757
> 
> 标签：c#, asp.net

**ASP.NET 图像缓存问题（如何禁用它？）** .IE 浏览器从目录 C:\Documents and Settings...\Local Settings\Temporary Internet Files 加载旧图像

```
 protected void Page_Load(object sender, EventArgs e)
    {
        MembershipUser user = Membership.GetUser();
      imCropped.ImageUrl = (File.Exists(Server.MapPath("..") + @"\Users\" + user.ProviderUserKey.ToString() + @"\" + user.ProviderUserKey.ToString() + ".gif"))? "~/Users/" + user.ProviderUserKey.ToString() + "/" + user.ProviderUserKey.ToString() + ".gif" : "~/Images/thumb.gif";
}

protected void ButtonJcrop_Click(object sender, EventArgs e)
    {

       ...

        String mapPath = @"\Users\" + user.ProviderUserKey.ToString() + @"\" + user.ProviderUserKey.ToString() + ".gif";
        bmpCropped.Save(Server.MapPath("..") + mapPath);
        imCropped.ImageUrl = Request.ApplicationPath + mapPath;
        ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T07:26:37.037

您可以使用随机数添加到 img url aquery 字符串参数：

```
<img src="http://www.walaa.co.il/t.jpg?c=2342342"/> 
```

它可以像`Datetime.Ticks`或其他东西。

```
ImageUrl = (File.Exists(string.Format("{0}\\Users\\{1}\\{1}.gif?c={2}", Server.MapPath(".."), user.ProviderUserKey.ToString(), DateTime.Now.Ticks))) ? string.Format("~/Users/{0}/{0}.gif?c={1}" , user.ProviderUserKey.ToString(), DateTime.Now.Ticks) : "~/Images/thumb.gif"; 
```

# java - 列出所有经过认证的兼容 Java EE 服务器

> ID：10070186
> 
> 赞同：-1
> 
> 时间：2012-04-09T07:24:08.643
> 
> 标签：java, jakarta-ee, certificate, compliant

我想知道今天可用的所有 Java EE 认证兼容服务器。有人能列出所有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:51:55.570

今天有许多可用的 Java EE 服务器。但流行和常用的 Java EE 服务器如下：

1.  JBoss AS
2.  IBM WebSphere
3.  玻璃鱼
4.  东亚网络逻辑
5.  乔纳斯
6.  树脂
7.  阿帕奇汤姆EE
8.  阿帕奇杰罗尼莫

# android - 如何停止 GC_CONCURRENT 如此频繁地运行？

> ID：10070189
> 
> 赞同：6
> 
> 时间：2012-04-09T07:24:24.127
> 
> 标签：android, audio, audio-recording, android-2.3-gingerbread

我正在使用一个线程，它使用 AudioRecord 类记录音频并放置在 recorderBUffer （这是 Short[] 的链接列表）中，一个单独的线程对这些数据进行编码并将其放置到 playerBuffer(linked list[]) . 为了播放音频，我使用 AudioTrack 类和 onPeriodicNotification() 我从 playerBuffer 读取数据并将其写入跟踪。

代码看起来很简单直接。然而，它并没有按应有的方式工作。GC_CONCURRENT 一直在吃东西，这导致 AudioTrack 如此频繁地重启（我猜！）。我从 LogCat 收到以下消息：-

```
04-09 12:25:13.757: E/Constructor(10100): inside constructor 
04-09 12:25:13.757: I/ApplicationPackageManager(10100): cscCountry is not German : INS
04-09 12:25:17.429: E/startRecording(10100): start Recording
04-09 12:25:17.445: I/AudioCapturer(10100): Audio Recorder created
04-09 12:25:17.546: I/Audio Player(10100): Audio Track instance created buffer Size : 2972
04-09 12:25:17.546: I/SpeexThread(10100): Thread Started Successfully..
04-09 12:25:17.734: D/dalvikvm(10100): GC_CONCURRENT freed 55K, 44% free 3208K/5639K, external 408K/517K, paused 4ms+6ms
04-09 12:25:17.945: D/dalvikvm(10100): GC_CONCURRENT freed 1K, 39% free 3765K/6151K, external 408K/517K, paused 3ms+8ms
04-09 12:25:18.148: D/dalvikvm(10100): GC_CONCURRENT freed <1K, 36% free 4277K/6663K, external 408K/517K, paused 3ms+8ms
04-09 12:25:18.414: D/dalvikvm(10100): GC_CONCURRENT freed <1K, 33% free 4981K/7367K, external 408K/517K, paused 3ms+9ms
04-09 12:25:18.734: D/dalvikvm(10100): GC_CONCURRENT freed <1K, 29% free 5877K/8263K, external 408K/517K, paused 3ms+9ms
04-09 12:25:18.828: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:19.164: D/dalvikvm(10100): GC_CONCURRENT freed <1K, 26% free 7093K/9479K, external 408K/517K, paused 3ms+9ms
04-09 12:25:19.710: D/dalvikvm(10100): GC_CONCURRENT freed <1K, 22% free 8693K/11079K, external 408K/517K, paused 3ms+9ms
04-09 12:25:19.984: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:20.414: D/dalvikvm(10100): GC_CONCURRENT freed <1K, 19% free 10741K/13127K, external 408K/517K, paused 3ms+9ms
04-09 12:25:21.156: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:21.171: D/dalvikvm(10100): GC_CONCURRENT freed <1K, 16% free 12789K/15175K, external 408K/517K, paused 3ms+11ms
04-09 12:25:21.976: D/dalvikvm(10100): GC_CONCURRENT freed <1K, 14% free 14837K/17223K, external 408K/517K, paused 3ms+9ms
// same messages errors continue  
04-09 12:25:28.117: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:29.242: D/dalvikvm(10100): GC_CONCURRENT freed 1K, 8% free 29172K/31559K, external 408K/517K, paused 3ms+11ms
04-09 12:25:29.273: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:30.445: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:30.507: D/dalvikvm(10100): GC_CONCURRENT freed 1K, 8% free 31220K/33607K, external 408K/517K, paused 4ms+12ms
04-09 12:25:31.601: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:31.820: D/dalvikvm(10100): GC_CONCURRENT freed 1K, 7% free 33268K/35655K, external 408K/517K, paused 3ms+12ms
04-09 12:25:32.757: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:33.187: D/dalvikvm(10100): GC_CONCURRENT freed 1K, 7% free 35316K/37703K, external 408K/517K, paused 3ms+13ms
04-09 12:25:33.929: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:34.593: D/dalvikvm(10100): GC_CONCURRENT freed 1K, 7% free 37364K/39751K, external 408K/517K, paused 4ms+11ms
04-09 12:25:35.085: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:36.039: D/dalvikvm(10100): GC_CONCURRENT freed 1K, 6% free 39412K/41799K, external 408K/517K, paused 3ms+12ms
04-09 12:25:36.242: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:37.406: W/AudioTrack(10100): obtainBuffer() track 0x1d0478 disabled, restarting
04-09 12:25:37.617: D/dalvikvm(10100): GC_CONCURRENT freed 1K, 6% free 41460K/43847K, external 408K/517K, paused 5ms+13ms
04-09 12:25:38.640: D/dalvikvm(10100): GC_FOR_MALLOC freed 1K, 6% free 43507K/45895K, external 408K/517K, paused 933ms
04-09 12:25:38.656: I/SpeexThread(10100): exitting Thread
04-09 12:25:38.656: E/stopRecording(10100): stop Recording 
```

AudiTrack 每隔几毫秒重新启动一次，并且几乎连续调用 GArbage Collection。如何最小化 GArbage Colloection 调用以及 AudioTrack 重启背后的原因是什么？请帮忙...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T07:38:31.463

该问题的一个**临时**解决方案是通过增加 HeapSize 来使用，但是**不建议**`dalvik.system.VMRuntime.getRuntime().setMinimumHeapSize(32 * 1024 * 1024);`使用这种方法，应该**避免**使用这种方法。

 ****通过大量调试，我发现真正的问题是由于重叠的接口和一些泄漏的功能。后来我**删除**了其中一个接口，**重新设计**了整体解决方案并**重构**了代码，从而**解决了我的问题**。

如果您有其他解决方案，请分享，****

# controller - arm，编程PL111控制器并在LCD上打印字符

> ID：10070192
> 
> 赞同：0
> 
> 时间：2012-04-09T07:24:35.507
> 
> 标签：controller, arm, framebuffer, lcd

我正在尝试编写裸机代码来编程 PL111 LCD 控制器。我正在使用为 Realview ARM Cortex-A8 设置的 QEMU 模拟器。我之前设法使用 QEMU 的“-serial stdio”选项在 linux 终端窗口上打印字符。

我已经浏览了 PL111 文档，但我无法弄清楚一件事。我设置了 PL111 控制器的 LCDUPBASE 来包含内存中帧缓冲区的地址。但是我可以简单地将 ascii 值写入帧缓冲区，LCD 控制器会选择我的帧缓冲区并在屏幕上显示相应的字符，还是我需要对 ascii 值执行某种转换（根据我已经存在的标准）我不知道）在将它们写入帧缓冲区之前？

如果前者是真的，这种转换是由控制器本身根据控制器硬件中的一些转换表处理的吗？诸如背景颜色之类的东西呢？PL111 文件没有说明这一点。这个障碍也让我想到了 GPU 的作用，如果我也有一个 GPU，它在这个方案中的位置是什么，它的作用到底是什么？

是否有任何好的资源、文档或书籍可以帮助更好地理解这些概念。如果我的问题听起来很愚蠢，请原谅我。我没有太多嵌入式/外围编程经验，我基本上是在尝试学习/熟悉 ARMv7 架构，我认为如果我可以在 QEMU 控制台上打印我的汇编编程打印而不是linux控制台。（使用“-serial stdio”选项）

如果这里的人可以帮助我，我将非常感激。谢谢

```
/* boot.s */ 
```

.section .data

.section .bss

.section .text

.globl _start

_开始：

/ ***** ******中断向量表开始****** *** /*

 *```
b _RESET_HANDLER                /* Reset Handler        */
b _UNDEF_HANDLER        /* Undef Instruction Handler    */
b _SWI_HANDLER          /* Software Interrupt Handler   */
b _PREFETCHABORT_HANDLER    /* Prefect Abort Handler    */
b _DATAABORT_HANDLER        /* Data Abort Handler       */
b _IRQ_HANDLER          /* IRQ Handler          */
b _FIQ_HANDLER          /* FIQ Handler          */ 
```

/ ***** **** 中断向量表结束* ***** ****** /

_FIQ_HANDLER：

```
b .     /* Not implemented yet, so go in infinite loop */ 
```

_IRQ_HANDLER：

```
b .    /* _isr_irq   /* jump to interrupt service routine */ 
```

_DATAABORT_HANDLER：

```
b .     /* Not implemented yet, so go in infinite loop */ 
```

_PREFETCHABORT_HANDLER：

```
b .     /* Not implemented yet, so go in infinite loop */ 
```

_SWI_HANDLER：

```
b .     /* Not implemented yet, so go in infinite loop */ 
```

_UNDEF_HANDLER：

```
b .     /* Not implemented yet, so go in infinite loop */ 
```

_RESET_HANDLER：

```
b _initialize_cpu 
```

* * *

cpuinitialize.s =>

.section .data

.section .bss

.section .text

```
.globl _initialize_cpu 
```

_initialize_cpu：

/* LCD 初始化代码 */

```
 .include "ColourLCDPL111.s"
    .set SYS_OSC4, 0x1000001C  /* Mapped register for OSCCLK4*/ 
    .set SYS_LOCK, 0x10000020  /* reference clock CLCDCLK for PL111*/

     movw r0, #:lower16:SYS_LOCK          /* Unlocking the register*/
     movt r0, #:upper16:SYS_LOCK
     movw r1, #0xA05F    
             str  r1, [r0]

         movw r2, #:lower16:SYS_OSC4   /* Setting the CLCDCLK frequency 36MHz*/
         movt r2, #:upper16:SYS_OSC4
         movw r1, #0x2CAC    
                 str  r1, [r2]

     str  r1, [r0]                /* Locking the register again*/

         movw r0, #:lower16:LCDTiming0_ADDR
         movt r0, #:upper16:LCDTiming0_ADDR
         movw r1, #:lower16:0x1313A4C4      /* PPL = 49 ; HSW = 3 TODO:change*/
         movt r1, #:upper16:0x1313A4C4      /* HBP = 5  ; HFP = 5 */
             str  r1, [r0]

             movw r0, #:lower16:LCDTiming1_ADDR
             movt r0, #:upper16:LCDTiming1_ADDR
             movw r1, #:lower16:0x0505F657        /* LPP = 600 ; VSW = 2 TODO:change*/
             movt r1, #:upper16:0x0505F657        /* VBP = 2   ; VFP = 2 */
             str  r1, [r0]

     movw r0, #:lower16:LCDTiming2_ADDR
     movt r0, #:upper16:LCDTiming2_ADDR
     movw r1, #:lower16:0x071F1800          /* CPL[25:16] = 799     ; BCD[26] =  1 (PCD Bypassed)   */
     movt r1, #:upper16:0x071F1800          /* PCD        = ignored */                  
             str  r1, [r0]

     movw r0, #:lower16:LCDUPBASE_ADDR   /* Setting up frame buffer address to 0x00000000*/
     movt r0, #:upper16:LCDUPBASE_ADDR
     mov  r1, #0x0  
     str  r1, [r0]

     movw r0, #:lower16:LCDControl_ADDR     
     movt r0, #:upper16:LCDControl_ADDR
     movw  r1, #0x082B          /* Setting up TFT 24Bit Mode */  
     str  r1, [r0]

     movw r0, #:lower16:LCDIMSC_ADDR    /* LCD interrupts: Disabled for now */
     movt r0, #:upper16:LCDIMSC_ADDR
     mov  r1, #0x00000000            
     str  r1, [r0]

     mov  r0, #40            /* lets try to print 'A' at frame buffer + 40 */
     mov  r1, #65   
     str  r1, [r0] 
```

用于填充实际上使整个屏幕变白的帧缓冲区的代码片段。当仅使用 i=800 和 j=600x4 不起作用时，我随机取了一个大值 10000

```
 void PopulateFrameBuffer(void)
  {
  unsigned int i,j;
  unsigned char *ptr = (unsigned char *)0x0;
  for(i=0; i<800;i++)
    {
    for (j=0;j<(600*10000);j++)
    {
      *ptr++=0xFF;

    }
  }
 } 
```

我在初始化代码后从程序集中调用了这个函数。帧缓冲区起始地址为 0x00000000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:17:33.807

这不是一个真正的答案，它更像是一个评论，但评论框只允许有限的空间和格式。

根据这篇[知识库文章](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka13614.html)，PL111 仅支持像素映射模式。即你必须打开和关闭每个像素。因此，如果您选择了 24 位真彩色，则帧缓冲区中的 24 位用于控制每个像素的颜色，8 位用于红色，8 位用于绿色，8 位用于蓝色。这些位的组织方式是任何人的猜测。例如：

*   它可能使用三个字节的连续序列，
*   或者它可能使用四个字节的连续序列，但不使用最高有效字节
*   或者它可能将位图组织成平面，例如，所有红色值，然后是所有绿色值，然后是所有蓝色值。
*   作为一个极端的选择，您最多可以有 24 个平面，因此所有像素的第一位首先出现，然后是所有像素的第二位，依此类推。

我的猜测是第一个选项是使用的（每像素 24 个连续位）。您可以通过将 0xFF 放在帧缓冲区的前六个字节中来测试这一点。这应该将顶行上的左侧两个像素变为白色。如果它将第一个白色和第二个像素变为青色，则您知道每个像素有 32 位忽略最高有效字节（并且字节是小端序）。如果前六个像素变为红色或其他颜色，则您将帧缓冲区组织成平面。

为了使实际字符出现，您需要为每个可能的字符绘制位图，并且需要将它们传送到帧缓冲区中。您可以在软件中执行此操作，但应该有某种可用的硬件支持。

**编辑**

好的，我们来设置如何将一个字符放入帧缓冲区。我将使用 C，因为我的 ARM 汇编技能并不出色。此外，这完全未经测试甚至编译

假设 8 x 8 字符打包 8 个像素到一个字节和一个 24 位彩色帧缓冲区​​。

```
 #define PIXEL_WIDTH 3   // width in bytes of a pixel
 #define CHAR_WIDTH  8
 #define CHAR_HEIGHT 8

 #define RED_BYTE    2   // Index of the RGB components in the pixel in the framebuffer (little endian)
 #define GREEN_BYTE  1
 #define BLUE_BYTE   0

 struct FrameBufferDescriptor
 {
     uint8_t* start;           // Address of first byte in the buffer
     size_t rasterLineWidth;   // width in bytes of each line of pixels in the display.
 };

/*
 *  Draw a character at the (x, y) coordinates (0, 0) is top left.
 *  frameBuffer: describes position and width of the frame buffer
 *  x, y: coordinates of top left corner of the character
 *  characterMap: monochrome bitmap of 1 x 8 x 8 character.  Pixel packed 8 per byte.  
 *                If a bit is set, it means foreground colour, if cleared, it means 
 *                background colour
 *  foreground, background: RGB colours for foreground and background.
 */
void drawCharacter(struct FramBufferDescriptor* frameBuffer, size_t x, size_t y, uint8_t* characterMap, uint32_t foreground, uint32_t background)
{
    // first where to start drawing in the frame buffer
    uint8_t* destination =  frameBuffer->start + (y * rasterLineWidth) + (x * PIXEL_WIDTH);
    // char is 8 x 8
    for (int row = 0 ; row < CHAR_HEIGHT ; ++row)  // iterate for each row
    {
        for (pixel = 0 ; pixel < CHAR_WIDTH ; ++pixel)   // iterate for each picxel on the row
        {
            // determine the coloutr of this pixel
            uint32_t colour = background;
            if ((characterMap[row] & (1 << (CHAR_WIDTH - pixel - 1))) != 0) // Most sig bit will be on the left
            {
                colour = foreground;
            }
            // Put the RGB values in the framebuffer
            destination[pixel * PIXEL_WIDTH + RED_BYTE] = colour >> (RED_BYTE * 8);
            destination[pixel * PIXEL_WIDTH + GREEN_BYTE] = colour >> (GREEN_BYTE * 8);
            destination[pixel * PIXEL_WIDTH + BLUE_BYTE] = colour >> (BLUE_BYTE * 8);
        }
        destination += frameBuffer->rasterLineWidth;  // Go to next line of the frame buffer
    }
} 
```*

# css - 为 IBM Connections 使用修改后的 XPages 主题？

> ID：10070197
> 
> 赞同：0
> 
> 时间：2012-04-09T07:25:14.850
> 
> 标签：css, xpages, ibm-connections, ibm-oneui

构建的 XPages 应用程序使用基于 IBM OneUI 但在某些部分进行更改的主题。现在该外观应该用于同样基于 IBM OneUI 的 IBM Connections。如何移植更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:14:37.630

将您的修改提取到一个新的 css 文件中。如果在 OneUI 样式之后加载该样式表，则将根据 css 特异性规则应用（如果规则具有相同的特异性，则最后一个声明的规则获胜：[http://www.w3.org/TR/CSS21/cascade。 html#cascade](http://www.w3.org/TR/CSS21/cascade.html#cascade)）。

这将允许您对 Domino 应用程序、连接和使用 OneUI 的任何其他内容使用相同的样式表。

# java - 带有线性渐变的Java Swing Matte边框？

> ID：10070199
> 
> 赞同：5
> 
> 时间：2012-04-09T07:25:19.220
> 
> 标签：java, swing, colors, border, gradient

我尝试了以下示例来应用线性渐变[`GradientPaintDemo2D`](http://www.java2s.com/Code/Java/2D-Graphics-GUI/GradientPaintdemo.htm)：

它工作得很好，但我希望将渐变颜色应用于 Java Swing 哑光边框。我试过这个：

```
javax.swing.BorderFactory.createMatteBorder(1, 50, 1, 50, color) 
```

但这仅适用于应用*一种*类型`Color`，而不是`GradientPaint`.

众所周知，`GradientPaint`包含完全混合的两种颜色，如上面链接的示例所示。那么这种情况下的替代答案是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T07:39:50.140

对于这种特定情况，您需要创建自己的边界。
这是渐变边框类的示例：

```
public static class GradientBorder implements Border
{
    private Insets margin;

    public GradientBorder ( int top, int left, int bottom, int right )
    {
        super ();
        margin = new Insets ( top, left, bottom, right );
    }

    public void paintBorder ( Component c, Graphics g, int x, int y, int width, int height )
    {
        Graphics2D g2d = ( Graphics2D ) g;
        g2d.setPaint ( new GradientPaint ( x, y, Color.RED, x + width, y, Color.BLUE ) );

        Area border = new Area ( new Rectangle ( x, y, width, height ) );
        border.subtract ( new Area ( new Rectangle ( x + margin.left, y + margin.top,
                width - margin.left - margin.right, height - margin.top - margin.bottom ) ) );
        g2d.fill ( border );
    }

    public Insets getBorderInsets ( Component c )
    {
        return margin;
    }

    public boolean isBorderOpaque ()
    {
        return true;
    }
} 
```

当然，您可以指定任何其他渐变方向、颜色等。您也可以将它们的初始化放入构造函数中（如果需要）。要使用它，您只需要设置边框（在任何 JComponent 继任者中）：

```
jComponent.setBorder ( new GradientBorder ( 25, 50, 25, 50 ) ); 
```

基本上你可以用任何颜色/动画/形状等创建你喜欢的任何边框

顺便说一下 - isBorderOpaque() 方法应该返回 true，如果你想创建半透明边框（例如半透明颜色，圆角形状等），否则你将不得不处理组件重绘问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T08:42:28.057

如何使用新的[MatteBorder(int, int, int, int, javax.swing.Icon)](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/MatteBorder.html#MatteBorder%28int,%20int,%20int,%20int,%20javax.swing.Icon%29)

```
//Another example:
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;

public class GradientMatteBorderTest {
  public JComponent makeUI() {
    Icon icon = new Icon() {
      @Override public void paintIcon(Component c, Graphics g, int x, int y) {
        Graphics2D g2  = (Graphics2D)g.create();
        Point2D start  = new Point2D.Float(0f, 0f);
        Point2D end    = new Point2D.Float(99f, 0f);
        float[] dist   = {0.0f, 0.5f, 1.0f};
        Color[] colors = { Color.RED, Color.YELLOW, Color.GREEN };
        g2.setPaint(new LinearGradientPaint(start, end, dist, colors));
        g2.fillRect(x, y, 100, 10);
        g2.dispose();
      }
      @Override public int getIconWidth()  { return 100; }
      @Override public int getIconHeight() { return 10;  }
    };
    JLabel label = new JLabel("GradientMatteBorder");
    label.setBorder(BorderFactory.createMatteBorder(10,5,10,0,icon));
    JPanel p = new JPanel(new BorderLayout());
    p.setBorder(BorderFactory.createEmptyBorder(20,20,20,20));
    p.add(label, BorderLayout.NORTH);
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new GradientMatteBorderTest().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```

# swing - 如何将 JTable 放入 JPanel 并使其自动调整大小？

> ID：10070200
> 
> 赞同：1
> 
> 时间：2012-04-09T07:25:19.263
> 
> 标签：swing, jtable, jframe, jpanel, grid-layout

我正在将 JTable 添加到使用 GridLayout 的 JPanel 中，但我没有得到与添加 JButton 时相同的行为......

我想知道如何使用 JTable 获得相同的自动调整大小行为，例如将 JButton 添加到使用 GridLayout 的 JPanel 中，并且我希望表格使用面板的整个空间。

对不起拼写，英语不是我的母语。希望你们能帮助我！

这是我的代码：

```
 import javax.swing.*;
    import java.awt.*;

    class Frame extends JFrame {

        private JPanel center;
        private JTable table;

        public Frame(){
            super("Test Jtable");
            this.setLayout(new BorderLayout());        

            this.center = new JPanel(); 
            this.center.setLayout(new GridLayout());

            this.table = new JTable(50,50);
            this.table.setGridColor(Color.black);
            this.table.setCellSelectionEnabled(true);                      

            this.center.add(this.table);
            this.add(this.center,BorderLayout.CENTER);
        }
    }

    public class TestFrame {

        public static void main(String... args) {
            Frame f =new Frame();
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.setSize(400,400);
            f.setVisible(true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:12:49.290

将您的表格添加到滚动窗格中，如本[示例](https://stackoverflow.com/a/10067560/230513)所示。

```
this.center.add(new JScrollPane(this.table)); 
```

附录：我提倡这样的使用`pack()`; 其他安排是可能的，但不太有用。该`setPreferredScrollableViewportSize()`方法也可能会有所帮助。

```
import javax.swing.*;
import java.awt.*;

class Frame extends JFrame {

    private JPanel center;
    private JTable table;

    public Frame() {
        super("Test Jtable");
        this.setLayout(new BorderLayout());
        this.center = new JPanel();
        this.center.setLayout(new GridLayout());
        this.table = new JTable(50, 10);
        this.table.setGridColor(Color.black);
        this.table.setCellSelectionEnabled(true);
        this.center.add(this.table);
        this.add(new JScrollPane(this.center), BorderLayout.CENTER);
    }
}

public class TestFrame {

    public static void main(String... args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                Frame f = new Frame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.pack();
                f.setVisible(true);
            }
        });
    } 
```

# drools - 优化JBPM5引擎的性能

> ID：10070205
> 
> 赞同：0
> 
> 时间：2012-04-09T07:26:19.343
> 
> 标签：drools, jbpm

我们一次在 JBPM5 中批量启动流程（比如 100 个实例）。并且流程的每一个任务都是由外部程序异步启动和完成的。在这种情况下，JBPM 引擎会花费大量时间来生成下一个任务，因此整体性能会受到影响。（例如：完成 100 个流程实例平均需要 45 分钟）请提出一种优化 jbpm5 引擎性能的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:13:35.297

一定是有问题或配置错误，因为完成 100 个流程实例的 45 分钟似乎太多了，通常每个请求在正常情况下应该花费不到一秒的时间。但很难弄清楚可能出了什么问题。你有更多关于你的设置的信息吗？实际上是什么占用了很多时间？您正在调用什么类型的外部服务？你有我们可以看的原型吗？

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:51:02.540

是的，这听起来是您的域中的问题，而不是您的引擎中的问题。前段时间，我们对内存中进程和数据库持久化进程进行了一些性能测试，引擎引入的延迟低于每个活动（在内存中）和 5 毫秒（在数据库中）。你究竟是如何调用引擎的，你是如何托管它的？你在打什么电话？你有没有办法衡量你的外部服务需要多少时间来回答？

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:41:26.697

现在它更快了。完成任务后

```
client.complete() 
```

我正在使用命令向服务器发送信号

```
ksession.getWorkItemManager().completeWorkItem(id, data); 
```

有了这个，引擎可以更快地生成后续任务，我可以检索它以进行处理。但这是完成任何任务的理想方式吗..？

# javascript - 在 Objective-C 中使用 Javascript

> ID：10070210
> 
> 赞同：-1
> 
> 时间：2012-04-09T07:26:40.493
> 
> 标签：javascript, objective-c, uiwebview

如何在 Objective-C 中使用以下 javascript 代码？

```
var theFormId = $('form').filter(function() {
return this.innerHTML.indexOf('forgot your password') != -1;
}).attr('id'); 
```

如何在 UIWebView 的 stringByEvaluatingJavaScriptFromString: 方法中使用上面的代码？

我将上面的代码与 Objective-C 一起使用，如下所示：

```
NSString *formID = [NSString stringWithFormat:@"%@",[self.browser stringByEvaluatingJavaScriptFromString:@"$('form').filter (function() {var text = this.innerHTML.toLowerCase();" 
                        "return text.indexOf('forgot your password') != -1 || "
                        "text.indexOf('remember me') != -1;}).attr('id');"] ]; 
```

尝试记录 formID 时，它什么也不打印。我的代码中是否有任何语法错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:00:55.653

我不知道这是否可行，因为您只给出了问题的一小部分。

首先，您的 Javascript 看起来无效。我怀疑应该是：

```
var theFormId = $('form').filter(function() {
    var text = this.innerHTML.toLowerCase(); 

    return text.indexOf('forgot your password') != -1 || 
           text.indexOf('remember me') != -1;
}); 
```

我添加了一些右括号。

要使用您运行此 Javascript，`-stringByEvaluatingJavaScriptFromString:`您需要执行以下操作。

```
NSString *javascript = @"var theFormId = $('form').filter(function() { var text = this.innerHTML.toLowerCase(); return text.indexOf('forgot your password') != -1 || text.indexOf('remember me') != -1; });";

NSString *result = [webView stringByEvaluatingJavaScriptFromString:javascript]; 
```

我不确定`result`当你运行它时你会在字符串中得到什么。

# php - 读取具有 ip 范围的文件并查看提供的 IP 是否与文件中的任何范围匹配

> ID：10070211
> 
> 赞同：1
> 
> 时间：2012-04-09T07:26:41.370
> 
> 标签：php

我正在尝试使用 ip/mask 范围读取文件，如果提供的 IP 与文件中的任何范围匹配，它将返回 TRUE 或类似函数。这是我下面的代码

```
function myip2long($ip) {  
   if (is_numeric($ip)) {  
       return sprintf("%u", floatval($ip));  
   } else {  
       return sprintf("%u", floatval(ip2long($ip)));  
   }  
}

function ipfilter($ip) {  
   $match = 0;  

   $ip_addr = decbin(myip2long($ip));  

   if (file_get_contents('./countryip/all-zones/us.zone')) {  
       $source = file('./countryip/all-zones/us.zone');  

       foreach ($source as $line) {  

           $network = explode("/", $line);  
           $net_addr = decbin(myip2long($network[0]));  
           $cidr = $network[1];  

           if (substr($net_addr, 0, $cidr) == substr($ip_addr, 0, $cidr)) {  
               $match = 1;  
               break;  
           }  
       }  
   }  
   return $match;  
} 

$user_ip = $_SERVER['REMOTE_ADDR'];  

if (ipfilter($user_ip) == 1)  echo "<br />allowed! Your IP is a United States IP!";  
else echo "deny!"; 
```

示例文件（如上例中的文件）可在此处获得 [http://www.ipdeny.com/ipblocks/data/countries/us.zone](http://www.ipdeny.com/ipblocks/data/countries/us.zone)

不确定上面的代码是否正确，我是从这里得到的' [http://www.php.net/manual/en/function.ip2long.php#86793](http://www.php.net/manual/en/function.ip2long.php#86793)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:11:06.187

可能您应该添加一些调试代码，以了解发生了什么。

像这样：

```
if (substr($net_addr, 0, $cidr) == substr($ip_addr, 0, $cidr)) {  
   echo "My IP: $ip\n";
   echo "IP to check: $network[0]\n";
   echo "CIDR: $cidr\n"
   echo "ip digits, my: $ip_addr, check: $net_addr\n";
   $match = 1;  
   break;  
} 
```

所以你会看到出了什么问题。

# c - x86 汇编中的操作数大小冲突

> ID：10070213
> 
> 赞同：1
> 
> 时间：2012-04-09T07:26:54.630
> 
> 标签：c, assembly, x86

我刚刚开始为我的计算机组织课程使用汇编程序进行编程，`operand size conflict`每当我尝试`asm`在 C 程序中编译这个块时，我都会遇到错误。

该`arrayOfLetters[]`对象是一个 char 数组，所以每个元素不应该是一个字节吗？当我这样做时，代码可以工作`mov eax, arrayOfLetters[1]`，但我不确定为什么会这样，因为`eax`寄存器是 4 个字节。

```
#include <stdio.h>
#define SIZE 3

char findMinLetter( char arrayOfLetters[], int arraySize )
{
    char min;

    __asm{
        push eax
        push ebx
        push ecx
        push edx
        mov dl, 0x7f        // initialize DL

        mov al, arrayOfLetters[1] //Problem occurs here

        mov min, dl        // read DL
        pop edx
        pop ecx
        pop ebx
        pop eax
    }

    return min;
}

int main()
{
    char arrayOfLetters[ SIZE ] = {'a','B','c'};

    int i;

    printf("\nThe original array of letters is:\n\n");
    for(i=0; i<SIZE; i++){
        printf("%c ", arrayOfLetters[i]);
    }
    printf("\n\n");

    printf("The smallest (potentially capitalized) letter is: %c\n", findMinLetter( arrayOfLetters, SIZE ));

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T07:51:03.783

使用`mov al, BYTE PTR arrayOfLetters[1]`.

您可以使用 MSVC 编译代码`cl input.c /Faoutput.asm`以获取程序集打印输出 - 这将表明只需使用`arrayOfLetters[1]`转换为`DWORD PTR`并且您需要明确声明您想要一个`BYTE PTR`.

# php - 有没有办法从 doc 文件 php 中获取内容

> ID：10070217
> 
> 赞同：-3
> 
> 时间：2012-04-09T07:27:31.007
> 
> 标签：php

**我的 Q 有什么方法可以在PHP**中获取字数或 Microsoft Word 文件的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:33:56.897

是的。将 word 文档的内容视为一个字符串，并编写一个单词计数函数来计算该字符串中的单词。这里有这样一个任务的代码：[http ://www.reconn.us/count_words.html](http://www.reconn.us/count_words.html)

导入 .doc 文件可能是一项艰巨的任务。你可以通过实现一个 com 对象来做到这一点。不过，可能有更简单的方法。

# php - 如何在php中显示所选用户是管理员

> ID：10070224
> 
> 赞同：0
> 
> 时间：2012-04-09T07:28:08.897
> 
> 标签：php

在一个查询中，我得到了用户表中的所有用户详细信息。

```
$userDetails =  $dbUser ->getAllUsers(); 
```

在第二个查询中，我正在获取所选组中的用户详细信息。

```
$groupMemberDetails = $dbGroupMembers ->getAllGroupMembers($groupId); 
```

但是，如果用户在选定的组中，我必须将它们显示为选定的剩余用户未选定，并且如果他是所有者，则将其显示为管理员附加到他的名字。

我已经完成了以下代码，但我没有得到正确的。

请纠正我。

```
foreach ( $userDetails as $user ) {

    $userId = $user['user_id'];
    $userFirstName = $user['first_name'];
    $userName = '';

    $selected = "";
    foreach ( $groupMemberDetails as $groupMemberDetail ) {
        $groupMemberId = $groupMemberDetail['user_id'];
        if($groupMemberId == $userId) {
            $selected = "selected";
        }
        $isAdmin = $groupMemberDetail['is_owner'];
        if($isAdmin) {
            $userName = $userFirstName . "(admin)";
        } else {
            $userName = $userFirstName;
        }

    }
    echo '<option value="'.$userId.'" '.$selected.'>'. $userName . '</option>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:33:32.000

您需要在每个循环上重置 Selected

```
 foreach ( $groupMemberDetails as $groupMemberDetail ) {
    $groupMemberId = $groupMemberDetail['user_id'];
    //You need this line
    $selected = '';

    if($groupMemberId == $userId) {
        $selected = "selected";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:09:49.663

在 foreach 之前我已经宣布

```
 $adminStr = ""; 
```

然后在if条件下我这样写

```
if($groupMemberId == $userId) { 
    $selected = "selected";

    $isAdmin = $groupMemberDetail['is_owner'];
    $adminStr = $isAdmin ? "(Admin)" : "";
} 
```

# ios - iOS 在本地发出请求

> ID：10070229
> 
> 赞同：0
> 
> 时间：2012-04-09T07:28:20.647
> 
> 标签：ios, request, local

有没有办法在我的应用程序中保存 JSON 文件，每当我需要某些东西时，我都会提出请求并得到我需要的东西？或者也许除了Core-Data之外还有另一种更好的方法？我试图用我的应用程序做的是请求一些音符，每个音符都有它自己的属性。如果我去一个歌曲视图，我希望用音符和音节来显示这些词。

我的 JSON 文件中的片段：

```
 "notes":[   
            {
                    "note_type" : "0",
                    "note_syllable1" : "Twink",
                    "note_syllable2" : null,
                    "note_length" : "0"
            },
            {
                    "note_type" : "0",
                    "note_syllable1" : "le,",
                    "note_syllable2" : null,
                    "note_length" : "0"
            },
            .... 
```

欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:54:32.337

这正是我所需要的：

```
 NSString *responseString = [[NSString alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"testmodel" ofType:@"json"] 
                                                           encoding:NSUTF8StringEncoding error:nil];
     SBJsonParser *parser = [[SBJsonParser alloc] init];
     NSDictionary *responseDictionary = [parser objectWithString:responseString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:30:42.653

您可以尝试使用 NSURLConnection 的缓存策略 - 它支持开箱即用，只需调整它。

# html - 如何制作表格超链接的单元格

> ID：10070232
> 
> 赞同：35
> 
> 时间：2012-04-09T07:28:45.613
> 
> 标签：html, hyperlink, href

如何在没有 javascript 或 jquery 的情况下在 html 中超链接整个表格单元格？

我试图将 href 放入 td 标签本身，但它至少在 chrome 18 中不起作用

```
<td href='http://www.m-w.com/dictionary/' style="cursor:pointer"> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-09T07:38:44.217

试试这个：

HTML：

```
<table width="200" border="1" class="table">
    <tr>
        <td><a href="#">&nbsp;</a></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

CSS：

```
.table a
{
    display:block;
    text-decoration:none;
} 
```

我希望它会正常工作。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-09T07:32:38.617

试试这个方法：

```
<td><a href="..." style="display:block;">&nbsp;</a></td> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-06-16T01:16:16.340

使用 onclick 功能和 javascript 链接很容易：

`<td onclick="location.href='yourpage.html'">go to yourpage</td>`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-12T15:12:56.223

我也一直在寻找解决方案，刚刚在另一个网站上找到了这段代码：

`<td style="cursor:pointer" onclick="location.href='mylink.html'">link</td>`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-02-21T16:41:39.137

为什么不将 onclick 方法与非 JS 备份中的`<a>`元素结合起来？`<td>`似乎工作得很好。

```
<td onclick="location.href='yourpage.html'"><a href="yourpage.html">Link</a></td> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-02T16:17:46.760

**问题：**

**（用户：Kamal）**这是一个好方法，但是你忘记了垂直对齐问题！使用这种方式，我们不能将链接准确地放在 TD 元素的中心！即使使用垂直对齐：中间；

**（用户：Christ）**你的答案是最好的答案，因为没有任何对齐问题，而且今天 JavaScript 对每个人来说都是必需的……它无处不在，即使在旧智能手机中……它默认启用。 ..

**我对（用户：基督）的完整回答的建议：**

HTML：

```
<td style="cursor:pointer" onclick="location.href='mylink.html'"><a class="LN1 LN2 LN3 LN4 LN5" href="mylink.html" target="_top">link</a></td> 
```

CSS：

```
a.LN1 {
  font-style:normal;
  font-weight:bold;
  font-size:1.0em;
}

a.LN2:link {
  color:#A4DCF5;
  text-decoration:none;
}

a.LN3:visited {
  color:#A4DCF5;
  text-decoration:none;
}

a.LN4:hover {
  color:#A4DCF5;
  text-decoration:none;
}

a.LN5:active {
  color:#A4DCF5;
  text-decoration:none;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-12T17:58:57.010

这是我的解决方案：

```
<td>
   <a href="/yourURL"></a>
   <div class="item-container">
      <img class="icon" src="/iconURL" />
      <p class="name">
         SomeText
      </p>
   </div>
</td> 
```

（较少的）

```
td {
  padding: 1%;
  vertical-align: bottom;
  position:relative;

     a {
        height: 100%;
        display: block;
        position: absolute;
        top:0;
        bottom:0;
        right:0;
        left:0;
       }

     .item-container {
         /*...*/
     }
} 
```

像这样，您仍然可以从一些表格单元格属性中受益，例如`vertical-align`.（在 Chrome 上测试）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-21T20:03:50.263

我以前在人们试图建立日历时看到过这种情况。您想要链接单元格，但不想弄乱其中的任何其他内容，试试这个，它可能会解决您的问题。

```
<tr>
<td onClick="location.href='http://www.stackoverflow.com';">
Cell content goes here
</td>
</tr> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-15T11:26:08.823

不完全使单元格成为链接，而是表格本身。我将它用作电子邮件中的按钮，为我提供类似 div 的控件。

```
<a href="https://www.foo.bar" target="_blank" style="color: white; font-weight: bolder; text-decoration: none;">
  <table style="margin-left: auto; margin-right: auto;" align="center">
    <tr>
      <td style="padding: 20px; height: 60px;" bgcolor="#00b389">Go to Foo Bar</td>
    </tr>
  </table>
</a>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-17T14:19:17.143

您可以为 <a> 标记提供表格单元格的视觉行为：

HTML：

```
<table>
  <tr>
    <a href="...">Cell 1</a>
    <td>Cell 2</td>
  </tr>
</table> 
```

CSS：

```
tr > a {
  display: table-cell;
} 
```

# django - SWFobject 嵌入 swf，ExternalInterface.Call 返回 null

> ID：10070233
> 
> 赞同：0
> 
> 时间：2012-04-09T07:28:47.983
> 
> 标签：django, flash

我正在使用 swfobject 将 swf 嵌入到视图中，使用 django 后端开发一个 Flash 游戏，但是当我在 InternetExplorer 中从 Flash 执行 externalinterface.call() 时（Chrome 和 Firefox 都可以），它返回 null

Flash游戏本身完美运行

Django 查看和嵌入代码：

```
<div id="game_container">
    <div id='flashContent'></div>
    </div>
    <script type="text/javascript" src="swfobject.js"></script>
    <script type='text/javascript'> 
    var flashvars={{flashvars|safe}};
    var params={wmode:"opaque", allowscriptaccess:"always" };
    var attributes={id:"flashContent", name:"flashContent"};
    swfobject.embedSWF("{{SWF_URL}}", "flashContent", "{{ appsettings.SWF_WIDTH }}", "{{ appsettings.SWF_HEIGHT }}", "10.0.0", false, flashvars, params, attributes);
</script>

function fqlearn_isEventInteresting(data) {
ln_log(['isEventInteresting',data]);
if (!BASE_URL) BASE_URL = data.baseURL;
ln_log(['got lesson?',fqlearn_findLearningModule(data) != null]);
return fqlearn_findLearningModule(data) != null;
//shuld return either true or false.
} 
```

闪存 AS3 代码：

```
var isInteresting:Object = false;

        try {
            isInteresting = ExternalInterface.call('fqlearn_isEventInteresting', data);
        } catch (e:Error) {
            trace("error calling external interface");
            // Container does not support outgoing calls :/
            rpc.forceLogUncaughtError("ExternalInterface.call problem",
                e.name, e.toString(), e.getStackTrace());
            rest.apply(restThis);
            return;
        } catch (e:SecurityError) {
            // Security sandbox nonsense :/
            throw e;
        }

        if (isInteresting == null) {
            // Something went wrong :/
            rpc.forceLogUncaughtError("ExternalInterface.call problem", "JS_returned_null_error");
        }

        if (isInteresting) {
            trace("showing learning blackout")
            dispatch(CoordinationEvent.newLEARNING_ABOUT_TO_SHOW());

            learningPendingData = {
                rest: rest,
                restThis: restThis
            }; 
```

InternetExplorer 中 Flash 的 ExternalInterface.call()（Chrome 和 Firefox 都可以），它返回 null 。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:32:55.873

修复它：`console.debug`阻塞 Internet Explorer。我删除了那些，它工作。

# php - 简单的字符串切换和大小写功能不起作用

> ID：10070234
> 
> 赞同：1
> 
> 时间：2012-04-09T07:28:54.993
> 
> 标签：php

我不知道为什么这不起作用，我知道这是因为一些简单的愚蠢错误。

你能帮帮我吗？

```
$p = 'aM';

function FormatPeriod($p) {
 $periodFormated = 'null';
 switch($p){
   case "am": $periodFormated = "AM"; break;
   case "Am": $periodFormated = "AM"; break;
   case "aM": $periodFormated = "AM"; break;
   case "pm": $periodFormated = "PM"; break;
   case "Pm": $periodFormated = "PM"; break;
   case "pM": $periodFormated = "PM"; break;
     default: $periodFormated = 'fail';
    }
  return $periodFormated;
 }

$periodFormated = FormatDate($p); 
```

可悲的是，输出是“aM”。

为什么字符串没有变为“AM”？

~谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:30:41.427

你只需要是

```
$p = 'am';
echo strtoupper($p); 
```

如果是用户输入，您只需要再添加一个检查

```
$p = strtolower($p);
if ($p == 'am' || $p == 'pm')
{
   $p = strtoupper($p);
}
else
{
   echo 'fail';
} 
```

你正在调用不同的函数来格式化。你应该打电话`FormatPeriod`，你正在打电话`FormatDate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:36:32.907

这段代码太糟糕了:)！

您不需要检查每个大小写，只需将字符串转换为大写即可。

```
$p = 'aM';

function FormatPeriod($p) {
    $periodFormated = strtoupper($p) ;
    return $periodFormated;
 }

$periodFormated = FormatPeriod($p); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:40:26.287

```
 function FormatPeriod($p) {
             $periodFormated = strtoupper(trim($p));    //trim extra spaces and convert to uppercase
             if($periodFormated!='AM' && $periodFormated!='PM') //check if it is not AM or PM
                return 'fail';  //then return 'fail'
             else
                return $periodFormated; //otherwise return AM or PM
             }

            //Testing
            echo FormatPeriod('am') . '<br />';
            echo FormatPeriod('Am') . '<br />';
            echo FormatPeriod('aM') . '<br />';
            echo FormatPeriod(' am ') . '<br />';
            echo FormatPeriod('a am') . '<br />'; 
```

# django - Django 1.4 测试不适用于 sqlite3

> ID：10070240
> 
> 赞同：2
> 
> 时间：2012-04-09T07:29:30.523
> 
> 标签：django, unit-testing, sqlite

在使用 sqlite 运行测试时升级到 django 1.4 后出现此错误：

```
Creating test database for alias 'default'...
Problem installing fixture '/home/devasia/pyserver/project/mysite/app/fixtures/test_data.json':        Traceback (most recent call last):
File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/loaddata.py", line 196, in handle
obj.save(using=using)
File "/usr/local/lib/python2.7/dist-packages/django/core/serializers/base.py", line 165, in save
  models.Model.save_base(self.object, using=using, raw=True)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/base.py", line 529, in save_base
 rows = manager.using(using).filter(pk=pk_val)._update(values)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py", line 557, in _update
 return query.get_compiler(self.db).execute_sql(None)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/sql/compiler.py", line 986, in   execute_sql
cursor = super(SQLUpdateCompiler, self).execute_sql(result_type)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/sql/compiler.py", line 818, in execute_sql
cursor.execute(sql, params)
File "/usr/local/lib/python2.7/dist-packages/django/db/backends/sqlite3/base.py", line 337, in execute
return Database.Cursor.execute(self, query, params)
IntegrityError: Could not load auth.Permission(pk=31): columns content_type_id, codename are not unique

----------------------------------------------------------------------
Ran 1 test in 0.011s

OK
Destroying test database for alias 'default'... 
```

这是我的示例测试用例：

```
class CheckTest(TestCase):
    fixtures = ['test_data.json']
    def test_check(self):
        c = Client()
        c.login(username = 'test', password = 'test') 
```

固定装置不是旧版本的。我从 'syncdb' 命令开始使用 django 1.4 创建了这个夹具。如果我使用 postgresql 作为测试数据库，测试运行良好（测试运行速度非常慢）。升级时我错过了什么吗？我找到了这个[https://code.djangoproject.com/ticket/14731](https://code.djangoproject.com/ticket/14731)但无法解决问题。（请注意，旧项目中唯一的代码/数据是模型）

谢谢

# java - Android - PushLink 可以进行静默更新吗？

> ID：10070247
> 
> 赞同：0
> 
> 时间：2012-04-09T07:30:05.650
> 
> 标签：java, android, updates, silent-installer

有谁知道[PushLink](https://push-link.com/)是否可以进行静默更新？也就是说，在没有用户交互的情况下下载应用程序并安装它？

PushLink 网站上关于可用功能的文档非常少，所以我不能确定。

或者有谁知道是否有可能为android提供一个静默安装程序？我基本上拥有不会进行任何用户交互的 android 设备，我需要能够更新在它们上运行的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:40:15.967

是的，从 2012.04.23 发布的 3.1.0 版本开始就可以了。

看看忍者策略

> NINJA（仅适用于有根设备）该应用程序刚刚在新版本中重新启动。没有通知。测试版！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:26:34.620

在没有用户交互的情况下，没有官方方法可以在 Android 设备上安装任何东西。这是一件好事，因为它可以防止许多可能的恶意软件和漏洞利用。

# c# - 如何仅使用 List 获取列表对象 2个实体？

> ID：10070252
> 
> 赞同：0
> 
> 时间：2012-04-09T07:30:45.800
> 
> 标签：c#

在我的项目中，我有 2 个实体对象（代表 db 中的 2 个表），如下所示：

> *   Tbl_Person {ID，姓名}
> *   Tbl_Class {ID，名称，PersonID}

在 DAL 中，我为这些实体创建 2 个类，并**编写函数 GetList()** : - Class Person:

```
public List<Tbl_Person> GetList()
{
    using (var db = DatabaseHelper.DataContext())
    {
        try
        {
            var _t = (from info in db.**tbPerson** 
                      select info).ToList();
            return _t.ToList<**Tbl_Person**>();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
} 
```

我的班级：

```
public List<Tbl_Class> GetList()
{
    using (var db = DatabaseHelper.DataContext())
    {
        try
        {
            var _t = (from info in db.**tbClass** 
                      select info).ToList();
            return _t.ToList<**Tbl_Class**>();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
} 
```

如果我使用 2 个类，我可以使用 GetList() 正确获取列表对象。但似乎我们在这里有重复的函数 GetList()。我想要的只是**像这样的 1 个函数 GetList()**：

```
public List<T> GetList()
{
    using (var db = DatabaseHelper.DataContext())
    {
        try
        {
            var _t = (from info in db.**????????** 
                      select info).ToList();
            return _t.ToList<**T**>();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:36:05.747

首先，摆脱*无意义*的try/catch 块。这些方法中的每一个都是所需时间的两倍，因为您正在捕获异常并重新抛出它们 - 但同时会丢失信息！（如果您必须重新抛出，请使用 just`throw;`而不是`throw ex;`。）

其次，在这里使用查询表达式绝对没有意义。你只对整张桌子感兴趣。（顺便说一句，您*确定*要在每次调用时获取整个表吗？）

第三，假设这些是正确的强类型数据上下文，我不希望您必须首先指定类型参数`ToList`。

所以你的两种方法实际上可以简化为：

```
// In MyClass
public List<Tbl_Class> GetList()
{
    using (var db = DatabaseHelper.DataContext())
    {
        return db.tbClass.ToList();
    }
}

// In Person
public List<Tbl_Person> GetList()
{
    using (var db = DatabaseHelper.DataContext())
    {
        return db.tbPerson.ToList();
    }
} 
```

现在您*可以*使用以下方法删除此处的冗余[`DataContext.GetTable<TEntity>`](http://msdn.microsoft.com/en-us/library/bb357220.aspx)：

```
// In DatabaseHelper:
public static List<T> GetList<T>()
{
    using (var db = DataContext())
    {
        return db.GetTable<T>().ToList();
    }
}

// In MyClass
public List<Tbl_Class> GetList()
{
    return DatabaseHelper.GetList<Tbl_Class>();
}

// In Person
public List<Tbl_Person> GetList()
{
    return DatabaseHelper.GetList<Tbl_Person>();
} 
```

目前还不清楚您是否*需要*各个类中的方法......

（除了所有这些，我强烈建议您重命名您的类型以`Tbl_`从映射中删除前缀。它在代码中看起来非常糟糕，IMO。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T07:43:37.697

您*可以*使用 Entity Framework 和 IObjectSet 实现您的要求。不过，我不确定这是一件明智的事情。

```
public class Repository
{
    private readonly IObjectContext _context;

    public void Repository(IObjectContext context)
    {
        _context = context;
    }

    public IEnumerable<T> GetList<T>() where T : class
    {
        return _context.CreateObjectSet<T>().ToList();
    }        
} 
```

# gwt - 为什么检测不到 JavascriptObject 的运行时空指针？

> ID：10070254
> 
> 赞同：0
> 
> 时间：2012-04-09T07:31:19.083
> 
> 标签：gwt, nullpointerexception, javascript-objects

经过一番调试，我发现“com.google.gwt.event.shared.UmbrellaException：一个或多个异常被捕获，请参阅 UmbrellaException#getCauses 调用方法时的完整集：[nsIDOMEventListener::handleEvent]”（在 web 模型中）是由运行时空指针引起。问题是为什么在主机模型下没有抛出这种运行时空指针异常。实际上，blow 代码不会抛出任何异常，甚至在我的笔记本电脑中弹出警报（gwt 2.4 + java 7 64bit+ubuntu 12.04 64bit+eclipse 3.7)。只要 JavascriptObject 指针出现运行时空值，任何人都知道如何强制 eclipse 抛出异常。

```
public class GWTTest implements EntryPoint
{
    public static class JsObj extends JavaScriptObject
    {
         protected JsObj()
         {
         }

         public final native void setValue(String Value)/*-{
                this.Value=Value;
                alert(Value);
         }-*/;
    }

    public void onModuleLoad()
    {
         JsObj jsObj = null;
         jsObj.setValue("val");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:51:30.780

编译器执行许多优化以将 GWT/Java 转换为 Javascript。

*   类型和方法是最终的——这允许后面的步骤了解哪些方法需要正常分派，哪些方法可以设为静态，只需调用单个实现即可。
*   在可能的情况下将方法设为静态，这允许内联方法
*   在可能和合理的情况下，方法是内联的

也就是说...当我编译您的示例时， onModuleLoad() 的主体被优化为：

```
null.nullMethod(); 
```

这是 GWT 编译器说“这永远不会工作”的方式 - 它注意到该值始终为 null，因此无法在其上调用该方法。但是在开发模式下，显然 null 对象指向`window`JavaScript 中的对象。这是在 GWT 项目中的[http://code.google.com/p/google-web-toolkit/issues/detail?id=6625](http://code.google.com/p/google-web-toolkit/issues/detail?id=6625)归档的。

如果您需要确保不对 null 采取行动，请在调用该方法之前测试 null - 如果在像您这样的测试中，该值始终为 null，它将得到优化。无论如何，运行时异常都不应该用于控制代码，因此您永远不应该依赖 NullPointerException 在代码中执行任何操作。

# linux - 我无法正确修改内核模块中的 ICMP 流量

> ID：10070258
> 
> 赞同：1
> 
> 时间：2012-04-09T07:31:34.973
> 
> 标签：linux, linux-kernel, kernel-module

所以这就是我想要做的事情（微不足道，我知道；我这样做是为了为一个项目学习一些东西）：我已经构建了这个模块来捕获所有传出流量，检查它是否是 ICMP 回显消息流量。如果是，它只是重新计算 ICMP 数据包的校验和，然后让它继续。

每次我insmod这个模块时，所有PING流量都会失败>.<你能告诉我我在这里做错了什么吗？

```
/* 
        Coder: Adel *. *******
    Creation Date: April/7th/2012
    Last Modification Date: April/9th/2012
    Purpose: This module is merely a prototype on how to change the IP/ICMP pakcet information and still let it go without problems
    Testing: This module is being tested on a machine running the Linux kernel 2.6.32-33 on a 64bits Intel Processor    
    Notes: N/A
 */

#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/init.h>

#include <linux/inet.h>
#include <linux/ip.h>
#include <linux/icmp.h>
#include <linux/tcp.h>
#include <linux/in.h>

#include <linux/netfilter.h>
#include <linux/netfilter_ipv4.h>

static struct nf_hook_ops nfho;
static void printICMPHeader(struct icmphdr *icmph);

/*
 * in_cksum --
 * Checksum routine for Internet Protocol
 * family headers (C Version)
 */
unsigned short in_cksum(unsigned short *addr, int len)
{
    register int sum = 0;
        u_short answer = 0;
        register u_short *w = addr;
        register int nleft = len;
        /*
        * Our algorithm is simple, using a 32 bit accumulator (sum), we add
        * sequential 16 bit words to it, and at the end, fold back all the
        * carry bits from the top 16 bits into the lower 16 bits.
        */
        while (nleft > 1)
        {
          sum += *w++;
          nleft -= 2;
        }
        /* mop up an odd byte, if necessary */
        if (nleft == 1)
        {
          *(u_char *) (&answer) = *(u_char *) w;
          sum += answer;
        }
        /* add back carry outs from top 16 bits to low 16 bits */
        sum = (sum >> 16) + (sum & 0xffff);     /* add hi 16 to low 16 */
        sum += (sum >> 16);             /* add carry */
        answer = ~sum;              /* truncate to 16 bits */
        return (answer);
}

static unsigned int icmp_check(unsigned int hooknum,
                   struct sk_buff *skb,
                   const struct net_device *in,
                   const struct net_device *out,
                   int (*okfn)(struct sk_buff *))
{
    struct iphdr *iph;
    struct icmphdr *icmph;
    struct tcphdr *tcph;

    if(skb == NULL)
        return -1;
    iph = ip_hdr(skb);
    if(iph->protocol == IPPROTO_ICMP){
        printk(KERN_DEBUG"ICMP traffic!\n");
        icmph = icmp_hdr(skb);
        if(icmph->type == ICMP_ECHO){
            printICMPHeader(icmph);
            icmph->checksum = in_cksum((unsigned short *)icmph, sizeof(struct icmphdr));
            printICMPHeader(icmph);
        }
    }/* If IPPROTO_ICMP */
    return NF_ACCEPT;
}

static void printICMPHeader(struct icmphdr *icmph)
{
    printk(KERN_DEBUG "ICMP print function begin \n");
    printk(KERN_DEBUG "ICMP type = %d\n", icmph->type);
    printk(KERN_DEBUG "ICMP code = %d\n", icmph->code);
    printk(KERN_DEBUG "ICMP checksum = %d\n", icmph->checksum);
    printk(KERN_DEBUG "ICMP id = %d\n", icmph->un.echo.id);
    printk(KERN_DEBUG "ICMP sequence = %d\n", icmph->un.echo.sequence);
    printk(KERN_DEBUG "ICMP print function exit \n");       
}

static int __init startup(void)
{
        printk(KERN_INFO "Loading Test module...\n");
        printk(KERN_ALERT "Hello world\n");

        /* Fill in our hook structure */
        nfho.hook = icmp_check;         /* Handler function */
        nfho.hooknum  = NF_INET_POST_ROUTING; /* Just before it hits the wire */
        nfho.pf       = PF_INET;
        nfho.priority = NF_IP_PRI_FILTER;   
        nf_register_hook(&nfho);
    //pinger();
    return 0;
}

static void __exit cleanup(void)
{
    nf_unregister_hook(&nfho);  
    printk(KERN_ALERT "Goodbye Mr.\n");
}

module_init(startup);
module_exit(cleanup); 
```

**编辑：** 为了稍微调试一下代码，我制作了自己的用户空间 ping 实用程序，并使用 RAW_SOCKETS 填充了它的所有 IP 和 ICMP 标头

```
 icmp->type         = ICMP_ECHO;
    icmp->code          = 0;
    icmp->un.echo.id        = 0;
    icmp->un.echo.sequence  = 0;
    icmp-> checksum     = in_cksum((unsigned short *)icmp, sizeof(struct icmphdr)); 
```

只要我的模块未加载，此实用程序就可以正常工作。奇怪的是，当我加载我的模块并检查内核调试文件时，看看我得到了什么：

```
Apr  9 10:42:10 DHS-1022CYB kernel: [ 2521.862356] ICMP traffic!
Apr  9 10:42:58 DHS-1022CYB kernel: [ 2569.572346] ICMP traffic!
Apr  9 10:43:22 DHS-1022CYB kernel: [ 2593.317201] ICMP traffic!
Apr  9 10:43:56 DHS-1022CYB kernel: [ 2627.331320] ICMP traffic!
Apr  9 10:44:05 DHS-1022CYB kernel: [ 2636.802236] ICMP traffic!
Apr  9 10:44:08 DHS-1022CYB kernel: [ 2639.876490] ICMP traffic!
Apr  9 10:45:27 DHS-1022CYB kernel: [ 2718.422229] ICMP traffic! 
```

这基本上意味着，出于某种奇怪的原因，我什至无法在我的模块中捕获 ECHO 流量！（当我无法捕捉到它时，它就会熄灭并且工作得很好） PS 我试图将钩子更改为 LOCAL_OUT 并得到相同的结果

**EDIT2：** DEBUG 文件更改的结果是这样的

```
Apr  9 10:57:24 DHS-1022CYB kernel: [ 3435.916336] ICMP print function exit 
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922656] ICMP traffic!
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922665] ICMP print function begin 
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922670] ICMP type = 8
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922674] ICMP code = 0
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922677] ICMP checksum = 50252
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922681] ICMP id = 3673
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922685] ICMP sequence = 512
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922688] ICMP print function exit 
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922691] ICMP print function begin 
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922695] ICMP type = 8
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922698] ICMP code = 0
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922702] ICMP checksum = 11090
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922705] ICMP id = 3673
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922709] ICMP sequence = 512
Apr  9 10:57:25 DHS-1022CYB kernel: [ 3436.922712] ICMP print function exit 
```

但是请注意，这是 Linux 实用程序 ping 的结果，而不是我手写的 PING（由于某种原因我仍然无法拦截）。只要加载了我的模块，Linux ping 就无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:58:38.097

通过包含未初始化的校验和字段本身，您似乎错误地计算了校验和：

```
icmph->checksum = in_cksum((unsigned short *)icmph, sizeof(struct icmphdr)); 
```

[AVRnet 文档](http://www.avrportal.com/?page=avrnet-checksum)说校验和字段应该在计算校验和之前初始化为 0。所以试试，简单地说：

```
icmph->checksum = 0;
icmph->checksum = in_cksum((unsigned short *)icmph, sizeof(struct icmphdr)); 
```

这只是一个猜测；我从来没有遇到过编写 TCP/IP 代码的不幸 :D 但我认为，即使内核足够聪明，可以将其初始化为 0 以进行校验和代码，但您正在重新校验和，所以这*将*是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:23:43.473

您没有正确计算校验和......正如您从日志中看到的那样。ICMP 校验和是针对整个消息计算的，而不仅仅是标头。所以在你的情况下：

```
icmph->checksum = in_cksum((unsigned short *)icmph, sizeof(struct icmphdr)); 
```

应该：

```
icmph->checksum = 0;
icmph->checksum = in_cksum((unsigned short *)icmph,  
                            ntohs(iph->tot_len) - (iph->ihl << 2)); 
```

另外，不要忘记将字段初始化为 0。

# boto - 使用亚马逊拉取实例时出现 400 错误请求

> ID：10070259
> 
> 赞同：6
> 
> 时间：2012-04-09T07:31:38.303
> 
> 标签：boto

任何人都可以说出我为什么会收到此错误吗？

我在连接到亚马逊服务器后拉取实例时得到了这个。

```
import boto

con = boto.connect_ec2(aws_access_key_id='XXX',aws_secret_access_key='XXX')
con.get_all_instances()

Traceback (most recent call last):

  File "getAllinstanc.py", line 7, in <module>

    reservations = ec2conn.get_all_instances()

  File "c:\jiva\py26\lib\site-packages\boto-2.3.0-py2.6.egg\boto\ec2\connection.py", line 467, in get_all_instances

    [('item', Reservation)], verb='POST')
  File "c:\Jiva\py26\lib\site-packages\boto-2.3.0-py2.6.egg\boto\connection.py", line 896, in get_list

    raise self.ResponseError(response.status, response.reason, body)

boto.exception.EC2ResponseError: EC2ResponseError: 400 Bad Request

<?xml version="1.0" encoding="UTF-8"?>
<Response><Errors><Error><Code>RequestExpired</Code><Message>Request has expired. Timestamp date is 2012-04-09T06:54:53Z</Message></Error></Errors><RequestID>44
08be18-5d2b-420b-af48-e2cb03</RequestID></Response> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T12:05:19.650

boto（或任何其他 AWS 客户端库）发出的每个请求都经过加密签名，并具有与之关联的时间戳（通常是请求中的 Date 标头）。时间戳必须与亚马逊对当前时间的想法相当接近，通常在 15 分钟内。如果时间戳超出此可接受的窗口，您将收到类似这样的错误。

因此，简短的回答是检查客户端计算机上的系统时间。这似乎是不准确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-16T00:15:26.113

[亚马逊论坛](https://forums.aws.amazon.com/thread.jspa?threadID=62328)上有一个很好的测试时钟偏差的方法。

类型：

```
wget -S  "https://email.us-east-1.amazonaws.com" 
```

这会返回一个错误，但会在 Date 标头中包含远程系统的时间。然后将其与`date`系统上的结果进行比较（假设它是 unix 派生的）。

如果您的操作系统恰好是[Ubuntu](https://help.ubuntu.com/10.04/serverguide/NTP.html)或其他 Debian 变体，您可以通过安装这样的 ntp 守护程序来保持时间最新：

```
sudo apt-get install ntp 
```

# actionscript-3 - Flash CS5 AS3 无法获取 Flashvars

> ID：10070267
> 
> 赞同：0
> 
> 时间：2012-04-09T07:32:20.783
> 
> 标签：actionscript-3, flash, flash-cs5, flashvars

我是 AS3 的新手，我发现自己需要扩展一个 fla。那是由第 3 方写的。目标是访问 flashvars，但对于我的生活来说，它无法正常工作......已经学习了好几天......

我正在使用的 fla 是具有 2 帧的时间轴上的代码。影片剪辑运行到第 2 帧并停止。

在第 2 帧上，我需要使用 flashvar。

我已经构建了一个简单的示例，它将在第二帧上填充一个文本框，效果很好。

第一帧

```
var my_var:String = new String();
my_var = root.loaderInfo.parameters.uploadId; 
```

帧 2

```
my_txt.text = my_var;
stop(); 
```

但是，当我在第 3 方 fla 上使用相同的方法时，我得到 NULL 输出。我也没有使用任何 TLF 文本（我认为）。

我不明白为什么它在一种情况下有效，而在另一种情况下无效。我认为这可能与与周围代码的冲突有关，但我对 AS 的了解还不够，无法追踪它。对此的任何帮助将不胜感激。

第一帧

```
import net.bizmodules.uvg.loading;

stop();

stage.scaleMode = StageScaleMode.NO_SCALE;
stage.align = StageAlign.TOP_LEFT;
stage.showDefaultContextMenu = false;
stage.quality = StageQuality.BEST;

function RandomValue()
{
    var d = new Date();
    return String(d.getDate()) + String(d.getHours()) + String(d.getMinutes()) + String(d.getSeconds());
}
var my_var:String;
my_var = root.loaderInfo.parameters.uploadId;
var userId;
var albums:Object;
var resource:Object;
var strUploadPage:String;
if (root.loaderInfo.parameters.uploadPage != undefined)
    strUploadPage = root.loaderInfo.parameters.uploadPage;
else
    strUploadPage = "http://localhost/dnn450/desktopmodules/ultramediagallery/flashuploadpage.aspx?PortalId=0&ModuleId=455";

if (strUploadPage.indexOf("?") > 0)
    strUploadPage += "&";
else
    strUploadPage += "?";

strUploadPage += "action=loadAlbums&seed=" + RandomValue();
trace(strUploadPage);

var myLoading:MovieClip = new loading();
myLoading.x = (stage.stageWidth - myLoading.width) / 2;
myLoading.y = (stage.stageHeight - myLoading.height) / 2;
addChild(myLoading);

var myRequest:URLRequest = new URLRequest(strUploadPage); 
var myLoader:URLLoader = new URLLoader(myRequest); 
myLoader.addEventListener(Event.COMPLETE, xmlLoaded); 

function xmlLoaded(evtObj:Event) 
{ 
    myLoader.removeEventListener(Event.COMPLETE, xmlLoaded);
    try
    {

        var xDoc:XMLDocument = new XMLDocument();
        xDoc.ignoreWhite = true;
        var xml:XML = XML(myLoader.data);
        xDoc.parseXML(xml.toXMLString());
        userId=xDoc.firstChild.attributes.userId;

        if (userId < 0)
        {
            removeChild(myLoading);
            txtError.text = "Please ensure you are logged in";
            return;
        }

        if(xDoc.firstChild.childNodes.length > 0)
        {
            albums = xDoc.firstChild.childNodes[0].childNodes;
            resource = xDoc.firstChild.childNodes[1].attributes;
        }
        else
        {
            removeChild(myLoading);
            txtError.text = xDoc.firstChild.attributes.error;
            return;
        }
        play();
    }
    catch(e:Error)
    {
        removeChild(myLoading);
        txtError.text = e + "\n\nPlease check your Event Viewer to find out detailed error message and contact service@bizmodules.net";
    }
} 
```

帧 2

```
import net.bizmodules.upg.Alert;

stop();
removeChild(myLoading);

initialize();

function initialize()
{
    Alert.init(stage);

    upload.addVar("userId",userId);

    lstAlbums.dropdown.rowHeight = 24; 

    loadAlbums(0, albums);

    var my_so:SharedObject = SharedObject.getLocal("UPGUpload");
    var lastAlbum = my_so.data.lastAlbum * 1;
    var foundLastAlbum = false;
    if (lastAlbum > 0)
    {
        for (var i:int = 0; i< lstAlbums.length; i++)
        {
            if (lstAlbums.getItemAt(i).data == lastAlbum)
            {
                trace("find previous album");
                foundLastAlbum = true;
                lstAlbums.selectedIndex = i;
                break;
            }
        }
    }

    if (!foundLastAlbum)
    {
        lstAlbums.selectedIndex = lstAlbums.length - 1;
    }
    albums_change(null);

    lstAlbums.addEventListener("change", albums_change);

    lstAlbums.setStyle("backgroundColor", 0x504C4B);
    lstAlbums.dropdown.setStyle("backgroundColor", 0x504C4B);
    lstAlbums.setStyle("themeColor", 0x1F90AE);
    lstAlbums.setStyle("color", 0xC4C0BF); 
    lstAlbums.setStyle("textSelectedColor", 0xC4C0BF); 
    lstAlbums.setStyle("textRollOverColor", 0xC4C0BF); 
    lstAlbums.setStyle("alternatingRowColors", [0x504C4B, 0x504C4B]);
    lstAlbums.setStyle("borderStyle", 'none'); 

}

my_txt.text = "hello" + " " + my_var;

function loadAlbums(level:int, xml:Object)
{

    var prefix = "                                                     ".substring(0, level * 4);;

    for (var i:int = 0;i<xml.length;i++)
    {
        var itemValue = xml[i].attributes.itemid;
        if (xml[i].childNodes.length > 0)
            itemValue *= -1;

        lstAlbums.addItem({data: itemValue, label: prefix + xml[i].attributes.name});
        if (xml[i].childNodes.length > 0)
        {
            loadAlbums(level + 1, xml[i].childNodes);
        }
    }
}

function albums_change(e)
{   
    var albumId = lstAlbums.getItemAt(lstAlbums.selectedIndex).data;
    upload.set_albumId(albumId);
    if (albumId > 0)
    {
        var my_so:SharedObject = SharedObject.getLocal("UPGUpload");
        my_so.data.lastAlbum = albumId;
    }
    else
    {       
        Alert.show("The album you choosed is invalid", null, 0xEAEAEA, 0x000000);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:25:51.713

```
private var flashVarObj:Object = new Object;
flashVarObj=LoaderInfo(this.loaderInfo).parameters;
var my_var:String = new String();
my_var = flashVarObj.uploadIdd; 
```

# java - 从 WS 答案 XML 制作 PDF 时 XML 字符无效（Unicode：0x2）

> ID：10070268
> 
> 赞同：1
> 
> 时间：2012-04-09T07:32:25.337
> 
> 标签：java, apache-fop

我正在做一些来自 WS 的 xml 报告。报告应该是 PDF 格式，所以我选择了 fop 库来制作它。当我尝试从位于我计算机上的 xml 文件中的 xml 生成报告时，一切正常。当我在 WebServer 上调用此方法时，问题就开始了。我在这条线上有例外：

```
transformer.transform(src, res); 
```

例外是：

```
org.xml.sax.SAXParseException: An invalid XML character (Unicode: 0x2) was found in the element content of the document. 
```

首先是 (Unicode: 0x1a) 字符，但我用这个函数剪掉了它：

```
 private static String stripNonValidXMLCharacters(String in) {

    if (in == null || ("".equals(in))) {
        return null;
    }
    StringBuffer out = new StringBuffer(in);
    for (int i = 0; i < out.length(); i++) {
        if (out.charAt(i) == 0x1a) {
            out.setCharAt(i, '-');
        }             
    }
    return out.toString();
} 
```

但后来出现了（Unicode：0x2）字符。尝试添加

```
 else if (out.charAt(i) == 0x2) {
        out.setCharAt(i, '-');
    } 
```

没有帮助。

我正在使用 fop 版本 0.95。

# android - android nGPS：基于磁场而不是gps或细胞三角测量获取位置

> ID：10070269
> 
> 赞同：13
> 
> 时间：2012-04-09T07:32:29.413
> 
> 标签：android, gps, location, magnetometer

有人知道如何使用[世界磁场模型](http://www.ngdc.noaa.gov/geomag/WMM/DoDWMM.shtml)将来自安卓设备的磁场传感器的结果转换为坐标吗？有没有这样的网络服务？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-20T17:08:00.447

你不能做这个。首先，您需要坐标，这意味着 2 个值。磁场提供的只有一个是不够的。其次 - 即使你正确地抓住它，你也只会知道你在其中一个等值线上。这还不算太多。你也可以在欧洲或非洲。第三个也是最后一个——它是你周围的真实磁场。附近经过的汽车是重型金属物体，会极大地改变你的领域。当您从浴室到客厅时，其他磁源（例如您的电话铃声或周围的电线）会告诉您您从巴西旅行到埃及。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T16:59:12.133

实际上，芬兰公司[IndoorAtlas](http://www.indooratlas.com/)声称它至少可以根据地磁场进行室内导航。

还有一份[关于](http://web.indooratlas.com/web/WhitePaper.pdf)所使用技术的白皮书。

但如前所述，它仅用于室内导航，因此不能替代 GPS。

# rss - feedburner 网址变成问号

> ID：10070272
> 
> 赞同：0
> 
> 时间：2012-04-09T07:32:38.130
> 
> 标签：rss, feedburner

我使用 Apache 的 Url Rewrite 引擎用希伯来语重写我的博客文章的 url。我使用 Feedburner 作为我的 rss 提供程序。我的网站以及我的 rss.xml 文件一切正常。问题是当我单击 Feedburner 中的链接时：它会将所有希伯来语字符变成问号。这是一个例子：链接：

`http://feedproxy.google.com/~r/Webdeskil/~3/v4V5nVxzOS8/כסף-באינטרנט-גוגל-אדסנס`

变成：

`http://www.webdesk.co.il/articles/???-????????-????-??????`

所以我发现它是一个 Feedburner 问题，而不是我的代码问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:28:22.460

我想通了：feedburner 不会对给定的 url 进行编码，因此必须先对希伯来语中的 url 进行编码，然后才能通过`.rss`.

我使用了内置的PHP函数`urlEncode()`，问题就解决了。

# asp.net - ASP.NET MV3 中的渐进式页面加载？

> ID：10070274
> 
> 赞同：0
> 
> 时间：2012-04-09T07:32:40.360
> 
> 标签：asp.net, .net, performance, asp.net-mvc-3

我正在建立一个网站，该网站在其首页上有不同的故事/文章“列表”。您可以将其与 Wordpress 的“最新文章”、“聚焦文章”等进行比较。

现在需要创建每个列表，并从存储库中填充。这意味着，在我的控制器中，我首先创建/检索所有列表，将它们添加到 ViewBag，然后返回视图。

然后，在视图中，我将遍历该列表中的项目，以创建要在首页上显示的可视列表。

但是，当我加载页面时，我首先得到一个空白页面，当页面加载时，然后在某一时刻一切都出现了。传统上，您会看到基本的 html、文本等，然后动态区域将在稍后出现。

**是否可以使用 MVC3 进行类似的“渐进式加载”？** 与其说是我担心的性能，不如说是在数据量大的页面上看到几秒钟空白页的用户体验。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:41:10.950

如果您的页面很重且加载时间很长，您可能会考虑使用 ajax 方法更动态地加载这些片段。

您的页面加载，您执行所需数据的请求，同时使用一些标准加载图标。

# java - Java中的对象复制

> ID：10070276
> 
> 赞同：0
> 
> 时间：2012-04-09T07:32:52.563
> 
> 标签：java

我有一个名为的类`order`我在不同的项目中的不同包中`package com.abc` 有另一个名为的类，名为`order``com.bcd`

两个订单类具有相同的代码获取、设置函数和变量，没有任何变化。

然后我有对象

```
com.abc.order obj1 = new com.abc.order();
com.bcd.order obj2 = new com.bdc.order(); 
```

现在我必须将参数传递给一个函数，它只`obj2`作为参数我怎样才能将类型转换`obj1`为类型`obj2`

我无法更改函数的参数。

期待你的答复。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:51:06.613

看看 Apache Commons BeanUtils 将属性从一个对象复制到另一个对象。

[http://commons.apache.org/beanutils/v1.8.3/apidocs/index.html](http://commons.apache.org/beanutils/v1.8.3/apidocs/index.html)

就像是

```
BeanUtils.copyProperties(obj2, obj1) 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:24:57.130

您可以将**com.bdc.order**类设为**com.abc.order的子类**

你能澄清你为什么要这样做吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:35:23.980

您必须复制每个字段。您可以使用 BeanIntrospector 来帮助您执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T07:37:28.893

您可以重载该函数，只需在您的代码中再次键入它，但这次它会`com.abc.order`取而代之。当然也保留另一个。

如果您定义了这两个函数，它将起作用。问题是重复。我以前从未见过这样的情况，复制一个类并在同一代码中使用这两个类听起来不是好的编码习惯。你能把它们放在一起吗？就像`(obj1) obj2?`我不认为你可以，但我不是 100% 确定...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T07:45:39.113

如果可以的话，最好的解决方案是消除两个类中的一个，特别是如果它们是相同的。

否则重命名它们（如果可能，第一个字母大写），如果可以的话。

最后，如果您无法执行上述任何一项，请在一个或两个类上编写转换方法，通过在所有用法中保留它们的包来解决使用的类之间的问题。

```
import com.abc.order;

abc.order obj1 = new abc.order(); 
bcd.order obj2 = new bdc.order(); 
```

# url - 为什么我们有用户名规则？

> ID：10070278
> 
> 赞同：3
> 
> 时间：2012-04-09T07:32:57.460
> 
> 标签：url

为什么要通过不同的规则限制允许的用户名？例如为什么用户不能有“@123 qw”用户名？是否有任何技术困难或只是社区规则？

也可以在用户名中包含国家字符吗？如果我为我的网站使用“UTF-8”编码，它应该在所有浏览器中都能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:37:15.403

我相信我可以给你不止一个理由，但我脑海中浮现的第一个理由就是这个。

```
http://www.example.com/profile/%64123%20qw 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T08:17:41.123

系统内的用户名大部分时间是供人类使用的，因此，从可用性的角度来看，它应该是可读的

是的，您可以在用户名中使用您的国家字符，并确保您了解字符编码、存储和检索。您的系统/应用程序应该准备好在每个级别使用选定的编码，例如客户端、服务器端和数据库端，以及您用来操作每个层的工具，例如 IDE 等。

所以从我的角度来看，你需要一些额外的知识和努力来处理这样一个系统，而不会扼杀可用性

# javascript - 淘汰赛复杂变量不绑定

> ID：10070280
> 
> 赞同：0
> 
> 时间：2012-04-09T07:33:01.953
> 
> 标签：javascript, knockout.js

我在 [http://jsfiddle.net/dorraba/HuDPJ/](http://jsfiddle.net/dorraba/HuDPJ/)上用我的代码制作了一个 jsfiddle 我想创建一个简单的购物车，我可以在其中添加和删除项目。我的意图是产品将是一个对象（名称和价格） 购物车将包含一个项目列表，其中每个项目都是由产品和数量构建的。

我的问题是我找不到通过每行下拉列表中选择的产品设置文本框价格的方法。

任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:39:59.583

你应该对输入元素使用值绑定，否则你会得到一个 DOM 错误。

此外，您已将`optionsValue`选项绑定的属性设置为`'Name'`，这将导致剔除将值设置为`ShoppingCartItem.Product`产品名称。 如果父级（在这种情况下）评估为未定义，则

绑定到类似的嵌套属性`Product.Price`将导致错误。`Price`因此，您需要测试 Product 是否已定义......像这样：`data-bind="value: (Product() ? Product().Price : '')"`

这是您的 jsfiddle 的工作解决方案：http: [//jsfiddle.net/HuDPJ/1/](http://jsfiddle.net/HuDPJ/1/)

# c - b/w llvm-ld 和 llvm-link 的区别

> ID：10070282
> 
> 赞同：8
> 
> 时间：2012-04-09T07:33:09.660
> 
> 标签：c, linux, llvm, clang, x86-64

**llvm-ld**和**llvm-link**有什么区别？我想**llvm-ld**执行链接时间优化，而**llvm-link**没有。我对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T08:23:34.933

`llvm-ld`是支持 LLVM 位码和本机代码的系统链接器的直接替代品。它默认生成位码可执行文件（即生成的可执行文件调用位码解释器），但也可用于生成本机可执行文件。

我不直接使用，因为使用and前端`llvm-ld`更方便，它们会根据需要调用 LLVM 工具链的适当程序（*注意：*被标记为实验性的，似乎已在 3.0 版本中删除）。`llvmc``clang` *`llvmc`*

 *`llvm-link`是一种更底层的工具，可以将多个位码文件合并成一个文件。该文档没有提到它是否进行了优化，但[似乎没有这样做](https://llvm.org/viewvc/llvm-project/llvm/trunk/lib/Linker/LinkModules.cpp?view=markup&sortby=rev)。下一次优化传递将在本机代码生成时触发。*

# blackberry - 如何在黑莓中自动断开一段时间后拨打的电话？

> ID：10070285
> 
> 赞同：0
> 
> 时间：2012-04-09T07:33:28.310
> 
> 标签：blackberry

我要求在应用程序启动时断开特定号码的拨出电话。

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:15:18.460

我使用以下代码。

```
public void disconnect()
{
    EventInjector.KeyCodeEvent pressEndKey = new EventInjector.KeyCodeEvent( KeyCodeEvent.KEY_DOWN, (char) Keypad.KEY_END, 0);  

        EventInjector.KeyCodeEvent releaseEndKey = new EventInjector.KeyCodeEvent( KeyCodeEvent.KEY_UP, (char) Keypad.KEY_END, 0);  

        EventInjector.invokeEvent(pressEndKey);  
        EventInjector.invokeEvent(releaseEndKey);
} 
```

# linux - 访问进程的内存区域

> ID：10070289
> 
> 赞同：1
> 
> 时间：2012-04-09T07:33:44.213
> 
> 标签：linux, memory-management, process, ptrace

我正在尝试学习如何访问进程的内存区域，以打印代码的开始和结束地址、其数据区域以及堆的开始和结束。我相信**/proc/$pid/maps**包含进程的开始和结束内存区域，但我想知道是否还有其他方法。也许 ptrace() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:47:11.443

`/proc/$pid/maps` 或者`/proc/$pid/smaps`是获取有关进程地址空间映射信息的最佳但特定于 linux 的方法。

您可以使用`/proc/$pid/mem`来访问内存区域（注意`lseek`适当的区域，或使用`mmap`来访问它）。

# android - 显示在后台运行的活动

> ID：10070290
> 
> 赞同：1
> 
> 时间：2012-04-09T07:33:49.027
> 
> 标签：android, android-activity

我有一个从网络下载内容的 android 活动。该活动有进度条和一些关于下载的指示。用户可以按返回并转到主活动应用程序。如何制作显示下载活动的按钮？

编码：

```
Intent i = new Intent("com.myapp.DOWNLOAD");
startActivity(i); 
```

再次开始活动，这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:08:37.173

在您的 AndroidManifest.xml 中，修改您的下载活动以包含该`launchMode="singleInstance"`值。例如：

```
<activity 
    android:name=".DownloadActivity"
    android:launchMode="singleInstance" /> 
```

这将只创建一个 DownloadActivity 实例。显示此活动的任何后续请求都将提取相同的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:48:08.717

```
Intent intent = new Intent(Class1.this, Class2.class);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T07:57:16.260

设计方面，下载可以通过运行单独线程的服务来完成。当您的对话消失时，服务不会终止。[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)使用示例有一些代码。

# selenium - 如何使用 webdriver 让用户选择不同的浏览器

> ID：10070291
> 
> 赞同：0
> 
> 时间：2012-04-09T07:33:49.490
> 
> 标签：selenium, webdriver

Selenium 提供了很多种浏览器驱动，所以我想让用户选择他们想要的那种。

但是在编程中，我们不得不使用全局变量。（我使用 C#）

我不能使用 switch 或 if/else 让程序知道用户想要哪个。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:50:50.957

你可以看看这些：

```
RemoteWebDriver
IJavaScriptExecutor 
```

所有的 webdrivers 都是子类或实现 RemoteWebDriver 和 IJavaScriptExecutor，所以你的全局变量应该是这样的：

```
RemoteWebDriver webDriver;
IJavaScriptExecutor executor; 
```

并且，您使用 if else 来初始化它：

```
if(ie)   
    webDriver = new InternetExplorerDriver();
else if(firefox)    
    webDriver = new FirefoxDriver(); 
```

等等。

```
executor = (IJavaScriptExecutor)webDriver; 
```

# .net - 选择哈希函数以获得最佳性能

> ID：10070293
> 
> 赞同：18
> 
> 时间：2012-04-09T07:34:00.223
> 
> 标签：.net, .net-4.0, hash

我需要通过网络比较许多文件（有些可能很大，有些很小）。因此，我计划对每个客户端上的每个文件进行哈希处理，并仅通过网络发送哈希值。
**这里的主要目标是性能**。这意味着最小的网络流量。安全不是问题。
**也应该有“零”冲突**，因为我不想错误地认为两个不同的文件是相同的。话虽如此，我知道理论上总会有碰撞，我只是希望与他们实际相遇的机会绝对可以忽略不计。

所以我的问题是：哪个 .net 哈希函数最适合这项任务？

我正在考虑使用缓冲阅读器`MD5CryptoServiceProvider`（因为 CNG 可能并非在所有客户端上都可用）。

有没有办法获得比这更好的性能？（也许使用一些外部库？）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-02-27T18:50:57.133

我遇到了类似的情况，我需要一个 .NET 散列算法。我需要它用于速度比安全更重要的服务器响应缓存。当我到达这个线程时，我注意到关于算法选择以及 32 位与 64 位执行的性能差异的猜测。为了在这场辩论中引入一些科学知识，我创建了一些代码来实际测试一些可用的算法。我决定测试内置的 MD5、SHA1、SHA256 和 SHA512 算法。我还包括了[force-net的 CRC32 实现和 DamienGKit 的](https://github.com/force-net/Crc32.NET)[CRC64](https://github.com/damieng/DamienGKit/blob/master/CSharp/DamienG.Library/Security/Cryptography/Crc64.cs)实现。我使用 ~115MB 文件的结果如下：

> **在 32 位模式下运行**。
> 
> **热身阶段**：
> 
> CRC32：296 MiB/s [9C54580A] 在 390 毫秒内。
> 
> CRC64：95 MiB/s [636BCF1455BC885A] 在 1212 毫秒内。
> 
> MD5：191 MiB/s [mm/JVFusWMKcT/P+IR4BjQ==]，604 毫秒。
> 
> SHA1：165 MiB/s [WSFkGbnYte5EXb7kgp1kqbi2...] 在 699 毫秒内。
> 
> SHA256：93 MiB/s [USKMHQmfMil8/KL/ASyE6rm/...] 在 1240 毫秒内。
> 
> SHA512：47 MiB/s [Cp9cazN7WsydTPn+k4Xu359M...] 在 2464 毫秒内。
> 
> **最终运行**：
> 
> CRC32：279 MiB/s [9C54580A] 在 414 毫秒内。
> 
> CRC64：96 MiB/s [636BCF1455BC885A] 在 1203 毫秒内。
> 
> MD5：197 MiB/s [mm/JVFusWMKcT/P+IR4BjQ==] 在 588 毫秒内。
> 
> SHA1：164 MiB/s [WSFkGbnYte5EXb7kgp1kqbi2...] 在 707 毫秒内。
> 
> SHA256：96 MiB/s [USKMHQmfMil8/KL/ASyE6rm/...] 在 1200 毫秒内。
> 
> SHA512：47 MiB/s [Cp9cazN7WsydTPn+k4Xu359M...] 在 2441 毫秒内。
> 
> * * *
> 
> **在 64 位模式下运行**。
> 
> **热身阶段**：
> 
> CRC32：310 MiB/s [9C54580A] 在 373 毫秒内。
> 
> CRC64：117 MiB/s [636BCF1455BC885A] 在 986 毫秒内。
> 
> MD5：198 MiB/s [mm/JVFusWMKcT/P+IR4BjQ==] 在 584 毫秒内。
> 
> SHA1：184 MiB/s [WSFkGbnYte5EXb7kgp1kqbi2...] 在 627 毫秒内。
> 
> SHA256：104 MiB/s [USKMHQmfMil8/KL/ASyE6rm/...] 在 1112 毫秒内。
> 
> SHA512：149 MiB/s [Cp9cazN7WsydTPn+k4Xu359M...] 在 778 毫秒内。
> 
> **最终运行**：
> 
> CRC32：292 MiB/s [9C54580A] 在 396 毫秒内。
> 
> CRC64：119 MiB/s [636BCF1455BC885A] 在 975 毫秒内。
> 
> MD5：199 MiB/s [mm/JVFusWMKcT/P+IR4BjQ==] 在 582 毫秒内。
> 
> SHA1：192 MiB/s [WSFkGbnYte5EXb7kgp1kqbi2...] 在 601 毫秒内。
> 
> SHA256：106 MiB/s [USKMHQmfMil8/KL/ASyE6rm/...] 在 1091 毫秒内。
> 
> SHA512：157 MiB/s [Cp9cazN7WsydTPn+k4Xu359M...] 在 738 毫秒内。

这些结果是从运行 .NET v4.5.2 的已编译发行版 ASP.NET 项目中获得的。32 位和 64 位结果都来自同一台机器。在 Visual Studio 中，我通过 更改了模式`Tools > Options > Projects and Solutions > Web Projects > Use the 64 bit version of IIS Express`，同时更改`Platform target`了项目的 。

我们可以看到，虽然运行结果略有波动，但 CRC32（通过 force-net）是最快的，其次是微软的 MD5 和 SHA1。奇怪的是，选择 DamienGKit 的 CRC64 而不是内置的 MD5 或 SHA1 并没有性能优势。64 位执行似乎对 SHA512 有很大帮助，但对其他人的帮助不大。

**为了回答 OP 的问题，内置的 MD5 或 SHA1**似乎可以提供防撞和性能的最佳平衡。

我的代码如下：

```
Stopwatch timer = new Stopwatch();
Force.Crc32.Crc32Algorithm hasherCRC32 = new Force.Crc32.Crc32Algorithm();
System.Security.Cryptography.MD5Cng hasherMD5 = new System.Security.Cryptography.MD5Cng();
System.Security.Cryptography.SHA1Cng hasherSHA1 = new System.Security.Cryptography.SHA1Cng();
System.Security.Cryptography.SHA256Cng hasherSHA256 = new System.Security.Cryptography.SHA256Cng();
System.Security.Cryptography.SHA512Cng hasherSHA512 = new System.Security.Cryptography.SHA512Cng();
String result = "";
String rate = "";

Status.Text += "Running in " + ((IntPtr.Size == 8) ? "64" : "32") + "-bit mode.<br /><br />";

Status.Text += "Warm-up phase:<br />";

timer.Restart();
result = BitConverter.ToUInt32(hasherCRC32.ComputeHash(ImageUploader.FileBytes), 0).ToString("X8");
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "CRC32: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

timer.Restart();
result = DamienG.Security.Cryptography.Crc64Iso.Compute(ImageUploader.FileBytes).ToString("X16");
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "CRC64: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

timer.Restart();
result = Convert.ToBase64String(hasherMD5.ComputeHash(ImageUploader.FileBytes));
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "MD5: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

timer.Restart();
result = Convert.ToBase64String(hasherSHA1.ComputeHash(ImageUploader.FileBytes));
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "SHA1: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

timer.Restart();
result = Convert.ToBase64String(hasherSHA256.ComputeHash(ImageUploader.FileBytes));
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "SHA256: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

timer.Restart();
result = Convert.ToBase64String(hasherSHA512.ComputeHash(ImageUploader.FileBytes));
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "SHA512: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

Status.Text += "<br />Final run:<br />";

timer.Restart();
result = BitConverter.ToUInt32(hasherCRC32.ComputeHash(ImageUploader.FileBytes), 0).ToString("X8");
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "CRC32: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

timer.Restart();
result = DamienG.Security.Cryptography.Crc64Iso.Compute(ImageUploader.FileBytes).ToString("X16");
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "CRC64: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

timer.Restart();
result = Convert.ToBase64String(hasherMD5.ComputeHash(ImageUploader.FileBytes));
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "MD5: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

timer.Restart();
result = Convert.ToBase64String(hasherSHA1.ComputeHash(ImageUploader.FileBytes));
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "SHA1: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

timer.Restart();
result = Convert.ToBase64String(hasherSHA256.ComputeHash(ImageUploader.FileBytes));
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "SHA256: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />";

timer.Restart();
result = Convert.ToBase64String(hasherSHA512.ComputeHash(ImageUploader.FileBytes));
timer.Stop();
rate = ((double)ImageUploader.FileBytes.Length / timer.ElapsedMilliseconds / 1.024 / 1024).ToString("0");
Status.Text += "SHA512: " + rate + " MiB/s [" + result + "] in " + timer.ElapsedMilliseconds + "ms" + ".<br />"; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-09T14:46:31.733

这取决于您拥有的文件数量。

发生冲突的机会`P(collision) = c/2^N`（在完美的散列函数中），其中`c`是您的消息（文件）`N`数，是您的冲突算法中的位数。

由于现实世界的哈希函数并不完美，因此您有两个选择：优化速度和优化避免碰撞。

在第一种情况下，您将需要使用[**CRC32**](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)。CRC32 非常常见，但根据您拥有的文件数量，可能还不够：保证在大约 43 亿条消息（32 个有效位）处发生冲突，但实际上您可能会遇到第一次冲突大约 1000 万条消息。CRC32 的实现速度非常快（SSE 4.2 甚至有一个硬件指令）。CRC64 发生冲突的可能性要低得多，但没有被广泛使用，因此如果您想要比 CRC32 更多的冲突避免，您最好查看加密哈希函数。

如果您想在牺牲速度的同时避免冲突，您将需要加密哈希函数，其中 MD5（128 位）、SHA-1（160 位）和 SHA-2（通常是 SHA-256 或 SHA-512）是最广泛使用的并有快速的实现。可以使用非常有效的 MD5 哈希冲突查找算法，但是如果您输入随机消息，您将获得尽可能接近的结果`P(collision) = c/2^128`，同时仍在合理的时间内运行。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-18T05:42:21.947

# 测试结果分析

除了 Michael 之前在此处所做的分析（请参阅上面的帖子）之外，我将进一步分析内置 PHP 哈希的性能，因为这个主题非常有趣并且有意想不到的结果。

结果并不那么明显，甚至令人惊讶。一种简单的算法——CRC32 或 CRC16，比复杂的算法——MD5 慢。似乎现代 CPU 不喜欢特定的旧算法并且执行它们非常缓慢，至少在算法没有以新方式实现时，利用现代 CPU 架构。CRC16 CCITT 算法在过去有 300 BPS 拨号调制解调器的情况下是相对快速和高效的。现在有专门为新硬件设计的现代算法，它在相同硬件上的运行速度可能比旧算法快得多，旧算法本质上不适合新硬件，即使你尝试优化它们，它们无论如何都会相对较慢。例如，

您可能会从其他加密库中看到，这些库证实了我们在 PHP 中看到的内容 - CRC32 IEEE 的整个速度几乎与 MD5 相同。这是另一个库结果的链接：[https ://www.cryptopp.com/benchmarks.html](https://www.cryptopp.com/benchmarks.html)

OpenSSL 显示了类似的结果。乍一看，这似乎很不合理，因为 CRC32 的算法比 MD5 的算法简单得多，但实际情况恰恰相反。

我只是想展示一下 CRC32 函数是多么简单。

这是使用下一个传入字节（Delphi）更新 CRCR32 计数器的代码：

```
 // Returns an updated CRC32
  function UpdateCrc32(CurByte: Byte; CurCrc: Cardinal): Cardinal; inline;
  begin
    UpdateCrc32 := Crc32Table[Byte(CurCrc xor CurByte)] xor (CurCrc shr 8);
  end; 
```

这是组装的这段代码：

```
@calc_crc32:
    xor    dl,[esi]
    mov    al,dl
    shr    edx,8
    xor    edx,dword ptr [edi+eax*4]
    inc    esi
    loop   @calc_crc32 
```

你也可以展开这段代码，这样你每字节只会得到 5 条 CPU 指令：

```
 xor    dl,bl
    shr    rbx,8
    mov    al,dl
    shr    edx,8
    xor    edx,dword ptr [r8+rax*4] 
```

您只需将`rbx`接下来的 8 个字节数据加载到寄存器中，然后重复此代码 8 次，直到您需要将接下来的 8 个字节加载到`rbx`64 位寄存器。

这是计算整个字符串的 CRC32 的例程：

```
 function CalcCRC32(const B; Size: NativeUINT;
    const 
      InitialValue: Cardinal = CRC32_INIT): Cardinal;
    var
      C: Cardinal;
      P: PAnsiChar;
      i: NativeUINT;
    begin
      C := InitialValue;
      if Size > 0 then
      begin
        P := @B;
        for i := 0 to Size - 1 do
          C := UpdateCrc32(Byte(P[i]), C);
      end;
      Result := C;
    end; 
```

下面是 Delphi 将它编译成机器代码的方式——不是非常优化，但非常简单——每个字节只有 11 条汇编指令，令人惊讶的是，在 Intel Core i5-6600 上，即使在循环展开。如您所见，实现 CRC32 IEEE 的所有这些指令都很简单，没有循环或比较，每个字节末尾只有一个比较。这只是编译的 Delphi 代码的调试器输出，而不是人工编写的汇编代码。

```
 CRC32.pas.78: begin
                                    push esi
                                    push edi
    CRC32.pas.80: if Size > 0 then
                                    test edx,edx
                                    jbe $00500601
    CRC32.pas.82: P := @B;
                                    mov edi,eax
    CRC32.pas.83: for i := 0 to Size - 1 do
                                    mov eax,edx
                                    dec eax
                                    test eax,eax
                                    jb $00500601
                                    inc eax
                                    xor esi,esi
    CRC32.pas.84: C := UpdateCrc32(Byte(P[i]), C);
                                    movzx edx,[edi+esi]
                                    xor dl,cl
                                    movzx edx,dl
                                    mov edx,[edx*4+$517dec]
                                    shr ecx,$08
                                    xor edx,ecx
                                    mov ecx,edx
                                    inc esi
    CRC32.pas.83: for i := 0 to Size - 1 do
                                    dec eax
                                    jnz $005005e6
    CRC32.pas.86: Result := C;
                                    mov eax,ecx
    CRC32.pas.87: end;
                                    pop edi
                                    pop esi
                                    ret 
```

这是CRC32汇编代码的另一种变体，每个字节只有5个处理器命令，而不是11个，但它与上述汇编代码基本相同，只是使用不同的寄存器并避免再次出现在i5上的“循环”命令-比两条不同的指令快6600。[您可以在从 C 控制台应用程序调用的 CRC32 汇编程序函数](https://stackoverflow.com/questions/19875653/crc32-assembler-function-called-from-c-console-app)中找到整个代码

```
 586
            .model flat, stdcall 
            .xmm
            .data
            .code
        CRC32 proc sizeOfFile:DWORD, file:DWORD
            push    esi
            push    ecx
            push    edx

            mov esi, file
            xor edx, edx
            or  eax, -1
            mov ecx, sizeOfFile

        CRC32_loop:
            mov dl, byte ptr [esi]
            xor dl, al
            shr eax, 8
            xor eax, dword ptr [crc32_table + 4*edx]
            inc esi
            dec ecx
            jnz CRC32_loop

            not eax

            pop edx
            pop ecx
            pop esi
            ret 
```

现在将它与 MD5 与 Peter Sawatzki 的高度优化的汇编代码进行比较：

```
; MD5_386.Asm   -  386 optimized helper routine for calculating
;                  MD Message-Digest values
; written 2/2/94 by
;
; Peter Sawatzki
; Buchenhof 3
; D58091 Hagen, Germany Fed Rep
;
; EMail: Peter@Sawatzki.de
; EMail: 100031.3002@compuserve.com
; WWW:   http://www.sawatzki.de
;
;
; original C Source was found in Dr. Dobbs Journal Sep 91
; MD5 algorithm from RSA Data Security, Inc.

.386
.MODEL FLAT
.CODE

R1 = ESi
R2 = EDi

FF Macro a,b,c,d,x,s,ac
; a:= ROL (a+x+ac + (b And c Or Not b And d), s) + b
  Add a, [EBp+(4*x)]
  Add a, ac
  Mov R1, b
  Not R1
  And R1, d
  Mov R2, c
  And R2, b
  Or  R1, R2
  Add a, R1
  Rol a, s
  Add a, b
EndM

GG Macro a,b,c,d,x,s,ac
; a:= ROL (a+x+ac + (b And d Or c And Not d), s) + b
  Add a, [EBp+(4*x)]
  Add a, ac
  Mov R1, d
  Not R1
  And R1, c
  Mov R2, d
  And R2, b
  Or  R1, R2
  Add a, R1
  Rol a, s
  Add a, b
EndM

HH Macro a,b,c,d,x,s,ac
; a:= ROL (a+x+ac + (b Xor c Xor d), s) + b
  Add a, [EBp+(4*x)]
  Add a, ac
  Mov R1, d
  Xor R1, c
  Xor R1, b
  Add a, R1
  Rol a, s
  Add a, b
EndM

II Macro a,b,c,d,x,s,ac
; a:= ROL (a+x+ac + (c Xor (b Or Not d)), s) + b
  Add a, [EBp+(4*x)]
  Add a, ac
  Mov R1, d
  Not R1
  Or  R1, b
  Xor R1, c
  Add a, R1
  Rol a, s
  Add a, b
EndM

Transform Proc
Public Transform
;Procedure Transform (Var Accu; Const Buf); Register;

; save registers that Delphi requires to be restored
  Push EBx
  Push ESi
  Push EDi
  Push EBp

  Mov EBp, EDx ; Buf -> EBp
  Push EAx     ; Accu -> Stack
  Mov EDx, [EAx+12]
  Mov ECx, [EAx+8]
  Mov EBx, [EAx+4]
  Mov EAx, [EAx]

  FF EAx,EBx,ECx,EDx,  0,  7, 0d76aa478h  ; 1
  FF EDx,EAx,EBx,ECx,  1, 12, 0e8c7b756h  ; 2
  FF ECx,EDx,EAx,EBx,  2, 17, 0242070dbh  ; 3
  FF EBx,ECx,EDx,EAx,  3, 22, 0c1bdceeeh  ; 4
  FF EAx,EBx,ECx,EDx,  4,  7, 0f57c0fafh  ; 5
  FF EDx,EAx,EBx,ECx,  5, 12, 04787c62ah  ; 6
  FF ECx,EDx,EAx,EBx,  6, 17, 0a8304613h  ; 7
  FF EBx,ECx,EDx,EAx,  7, 22, 0fd469501h  ; 8
  FF EAx,EBx,ECx,EDx,  8,  7, 0698098d8h  ; 9
  FF EDx,EAx,EBx,ECx,  9, 12, 08b44f7afh  ; 10
  FF ECx,EDx,EAx,EBx, 10, 17, 0ffff5bb1h  ; 11
  FF EBx,ECx,EDx,EAx, 11, 22, 0895cd7beh  ; 12
  FF EAx,EBx,ECx,EDx, 12,  7, 06b901122h  ; 13
  FF EDx,EAx,EBx,ECx, 13, 12, 0fd987193h  ; 14
  FF ECx,EDx,EAx,EBx, 14, 17, 0a679438eh  ; 15
  FF EBx,ECx,EDx,EAx, 15, 22, 049b40821h  ; 16

  GG EAx,EBx,ECx,EDx,  1,  5, 0f61e2562h  ; 17
  GG EDx,EAx,EBx,ECx,  6,  9, 0c040b340h  ; 18
  GG ECx,EDx,EAx,EBx, 11, 14, 0265e5a51h  ; 19
  GG EBx,ECx,EDx,EAx,  0, 20, 0e9b6c7aah  ; 20
  GG EAx,EBx,ECx,EDx,  5,  5, 0d62f105dh  ; 21
  GG EDx,EAx,EBx,ECx, 10,  9, 002441453h  ; 22
  GG ECx,EDx,EAx,EBx, 15, 14, 0d8a1e681h  ; 23
  GG EBx,ECx,EDx,EAx,  4, 20, 0e7d3fbc8h  ; 24
  GG EAx,EBx,ECx,EDx,  9,  5, 021e1cde6h  ; 25
  GG EDx,EAx,EBx,ECx, 14,  9, 0c33707d6h  ; 26
  GG ECx,EDx,EAx,EBx,  3, 14, 0f4d50d87h  ; 27
  GG EBx,ECx,EDx,EAx,  8, 20, 0455a14edh  ; 28
  GG EAx,EBx,ECx,EDx, 13,  5, 0a9e3e905h  ; 29
  GG EDx,EAx,EBx,ECx,  2,  9, 0fcefa3f8h  ; 30
  GG ECx,EDx,EAx,EBx,  7, 14, 0676f02d9h  ; 31
  GG EBx,ECx,EDx,EAx, 12, 20, 08d2a4c8ah  ; 32

  HH EAx,EBx,ECx,EDx,  5,  4, 0fffa3942h  ; 33
  HH EDx,EAx,EBx,ECx,  8, 11, 08771f681h  ; 34
  HH ECx,EDx,EAx,EBx, 11, 16, 06d9d6122h  ; 35
  HH EBx,ECx,EDx,EAx, 14, 23, 0fde5380ch  ; 36
  HH EAx,EBx,ECx,EDx,  1,  4, 0a4beea44h  ; 37
  HH EDx,EAx,EBx,ECx,  4, 11, 04bdecfa9h  ; 38
  HH ECx,EDx,EAx,EBx,  7, 16, 0f6bb4b60h  ; 39
  HH EBx,ECx,EDx,EAx, 10, 23, 0bebfbc70h  ; 40
  HH EAx,EBx,ECx,EDx, 13,  4, 0289b7ec6h  ; 41
  HH EDx,EAx,EBx,ECx,  0, 11, 0eaa127fah  ; 42
  HH ECx,EDx,EAx,EBx,  3, 16, 0d4ef3085h  ; 43
  HH EBx,ECx,EDx,EAx,  6, 23, 004881d05h  ; 44
  HH EAx,EBx,ECx,EDx,  9,  4, 0d9d4d039h  ; 45
  HH EDx,EAx,EBx,ECx, 12, 11, 0e6db99e5h  ; 46
  HH ECx,EDx,EAx,EBx, 15, 16, 01fa27cf8h  ; 47
  HH EBx,ECx,EDx,EAx,  2, 23, 0c4ac5665h  ; 48

  II EAx,EBx,ECx,EDx,  0,  6, 0f4292244h  ; 49
  II EDx,EAx,EBx,ECx,  7, 10, 0432aff97h  ; 50
  II ECx,EDx,EAx,EBx, 14, 15, 0ab9423a7h  ; 51
  II EBx,ECx,EDx,EAx,  5, 21, 0fc93a039h  ; 52
  II EAx,EBx,ECx,EDx, 12,  6, 0655b59c3h  ; 53
  II EDx,EAx,EBx,ECx,  3, 10, 08f0ccc92h  ; 54
  II ECx,EDx,EAx,EBx, 10, 15, 0ffeff47dh  ; 55
  II EBx,ECx,EDx,EAx,  1, 21, 085845dd1h  ; 56
  II EAx,EBx,ECx,EDx,  8,  6, 06fa87e4fh  ; 57
  II EDx,EAx,EBx,ECx, 15, 10, 0fe2ce6e0h  ; 58
  II ECx,EDx,EAx,EBx,  6, 15, 0a3014314h  ; 59
  II EBx,ECx,EDx,EAx, 13, 21, 04e0811a1h  ; 60
  II EAx,EBx,ECx,EDx,  4,  6, 0f7537e82h  ; 61
  II EDx,EAx,EBx,ECx, 11, 10, 0bd3af235h  ; 62
  II ECx,EDx,EAx,EBx,  2, 15, 02ad7d2bbh  ; 63
  II EBx,ECx,EDx,EAx,  9, 21, 0eb86d391h  ; 64

  Pop ESi            ; get Accu from stack
  Add [ESi],    EAx
  Add [ESi+4],  EBx
  Add [ESi+8],  ECx
  Add [ESi+12], EDx

; restore registers for Delphi
  Pop EBp
  Pop EDi
  Pop ESi
  Pop EBx

  Ret
  Transform EndP

  End 
```

[您可以在https://github.com/maximmasiutin/MD5_Transform-x64](https://github.com/maximmasiutin/MD5_Transform-x64)找到此代码的 32 位和 64 位版本

此代码在 IA-32 或 x86-64 下的性能是每字节（在 Skylake 上）数据 4.94 个 CPU 周期来计算 MD5。

上述代码一次性处理 64 字节的传入数据。它从执行准备步骤的主例程中调用：

```
 procedure CiphersMD5Update(var Context: TMD5Ctx; const ChkBuf; len:         UInt32);
    var
      BufPtr: ^Byte;
      Left: UInt32;
    begin
      If Context.Count[0] + UInt32(len) shl 3 < Context.Count[0] then
        Inc(Context.Count[1]);
      Inc(Context.Count[0], UInt32(len) shl 3);
      Inc(Context.Count[1], UInt32(len) shr 29);

      BufPtr := @ChkBuf;
      if Context.BLen > 0 then
      begin
        Left := 64 - Context.BLen;
        if Left > len then
          Left := len;
        Move(BufPtr^, Context.Buffer[Context.BLen], Left);
        Inc(Context.BLen, Left);
        Inc(BufPtr, Left);
        If Context.BLen < 64 then
          Exit;
        Transform(Context.State, @Context.Buffer);
        Context.BLen := 0;
        Dec(len, Left)
      end;
      while len >= 64 do
      begin
        Transform(Context.State, BufPtr);
        Inc(BufPtr, 64);
        Dec(len, 64)
      end;
      if len > 0 then
      begin
        Context.BLen := len;
        Move(BufPtr^, Context.Buffer[0], Context.BLen)
      end
    end; 
```

如果您的处理器支持 CRC32 操作码 (SSE 4.2)，您可以使用以下代码将校验和的计算速度提高 10 倍：

```
 function crc32csse42(crc: cardinal; buf: Pointer; len: NativeUInt): cardinal;
      asm // ecx=crc, rdx=buf, r8=len
        .NOFRAME
        mov eax,ecx
        not eax
        test r8,r8;   jz @0
        test rdx,rdx; jz @0
 @7:    test rdx,7;   jz @8 // align to 8 bytes boundary
        crc32 eax,byte ptr [rdx]
        inc rdx
        dec r8;     jz @0
        test rdx,7; jnz @7
 @8:    mov rcx,r8
        shr r8,3
        jz @2
 @1:    crc32 eax,qword ptr [rdx] // calculate CRC of 8 bytes, aligned
        dec r8
        lea rdx,rdx+8
        jnz @1
 @2:    // less than 8 bytes remaining
        and rcx,7; jz @0
        cmp rcx,4; jb @4
        crc32 eax,dword ptr [rdx] // calculate CRC of 4 bytes
        sub rcx,4
        lea rdx,rdx+4
        jz @0
@4:     // less than 4 bytes remaining
        crc32 eax,byte ptr [rdx]
        dec rcx; jz @0
        crc32 eax,byte ptr [rdx+1]
        dec rcx; jz @0
        crc32 eax,byte ptr [rdx+2]
@0:     not eax
      end; 
```

请注意，在我的示例中，我使用了一个只有 5KB 的缓冲区，以适应处理器的缓存并排除较慢 RAM 对摘要计算速度的影响。

CRC32 算法的快速实现适用于不使用 CRC32 操作码的现代处理器，但利用了乱序执行，包括通过寄存器重命名的推测执行。这种实现的一个例子是 CRC32 Slicing-By-8。IA-32 或 x86-64 汇编代码每字节数据有 1,20 个 CPU 时钟周期（在 Skylake 上）。[您可以在https://github.com/maximmasiutin/CRC32-Slicing-x64-Asm-Pas](https://github.com/maximmasiutin/CRC32-Slicing-x64-Asm-Pas)找到这样的实现

在 PHP 中，即使在版本 7 中，似乎也不支持 CRC32 的硬件加速，尽管 Intel 和 AMD 处理器自古以来就支持这些指令。英特尔从 2008 年 11 月开始支持 CRC32（Nehalem（微架构）），而 AMD 似乎从 2013 年开始支持它。

# 我自己的测试确认迈克尔的结果

我已经在不同的配置下测试了各种 PHP 哈希函数：（1）AMD FX-8320（2012 年发布）在 Ubuntu 下使用 PHP 5，以及（2）Intel Core i5-6600 在 2015 年在 Windows 下使用 PHP 7 发布。我也有在此 Intel Core i5-6600 上运行 OpenSSL 测试。除此之外，我还对我们在软件“The Bat！”中使用的加密程序进行了测试。用德尔福写的。虽然主要软件是用 Delphi 编写的，但我们使用的加密例程是用 Intel 处理器（32 位或 64 位）的 Assembler 或 C 语言编写的。

我发现我们的 Delphi 代码在各种散列函数和数据大小之间显示出非常大的速度差异。这与 PHP 形成对比，在某种程度上，除了极少数例外，从最简单的 CRC32 到曾经加密的强大 MD5 的所有哈希函数都具有几乎相同的直通输出速度。

因此，这是我在 AMD FX-8320、PHP5、Ubuntu 上所做的测量。我做了两个测试用例。首先，我运行 5000 次迭代来散列仅包含 5 个字节的消息。通过这个小消息大小，我打算测试各种算法的初始化/完成步骤的持续时间，以及它如何影响整体性能。对于某些算法，如 CRC32，三个实际上没有最终确定步骤——摘要总是在每个字节之后准备好。像 SHA1 或 MD5 或其他加密强大的函数具有将较大的上下文压缩为较小的最终摘要的最终步骤。其次，我运行 5000 次迭代来散列 5000 字节长的消息。两条消息都预先填充了伪随机字节（每次迭代后它们都不会重新填充；它们只在程序启动时填充一次）。

## 我的 PHP 哈希速度测试结果

我已经修改了您的 PHP 代码，使其现在适用于 PHP5 和 PHP7，在不同版本的 PHP 中生成随机数据的函数不同。我刚刚测量了哈希 5000 次 5 字节消息迭代和 5000 次 5000 字节消息迭代所需的时间。结果如下：

```
 Legend:
        (1) 5b x 5000, AMD FX-8320, PHP5
        (2) 5000b x 5000, AMD FX-8320, PHP5

PHP hash              (1)            (2)
--------         ------------   ------------
md2              0.021267 sec   2.602651 sec
md4              0.002684 sec   0.035243 sec
md5              0.002570 sec   0.055548 sec
sha1             0.003346 sec   0.106432 sec
sha224           0.004945 sec   0.210954 sec
sha256           0.004735 sec   0.238030 sec
sha384           0.005848 sec   0.144015 sec
sha512           0.006085 sec   0.142884 sec
ripemd128        0.003385 sec   0.120959 sec
ripemd160        0.004164 sec   0.174045 sec
ripemd256        0.003487 sec   0.121477 sec
ripemd320        0.004206 sec   0.177473 sec
whirlpool        0.009713 sec   0.509682 sec
tiger128,3       0.003414 sec   0.059028 sec
tiger160,3       0.004354 sec   0.059335 sec
tiger192,3       0.003379 sec   0.058891 sec
tiger128,4       0.003514 sec   0.073468 sec
tiger160,4       0.003602 sec   0.072329 sec
tiger192,4       0.003507 sec   0.071856 sec
snefru           0.022101 sec   1.190888 sec
snefru256        0.021972 sec   1.217704 sec
gost             0.013961 sec   0.653600 sec
adler32          0.001459 sec   0.038849 sec
crc32            0.001429 sec   0.068742 sec
crc32b           0.001553 sec   0.063308 sec
fnv132           0.001431 sec   0.038256 sec
fnv164           0.001586 sec   0.060622 sec
joaat            0.001569 sec   0.062947 sec
haval128,3       0.006747 sec   0.174759 sec
haval160,3       0.005810 sec   0.166154 sec
haval192,3       0.006129 sec   0.168382 sec
haval224,3       0.005918 sec   0.166792 sec
haval256,3       0.006119 sec   0.173360 sec
haval128,4       0.007364 sec   0.233829 sec
haval160,4       0.007917 sec   0.240273 sec
haval192,4       0.007676 sec   0.245864 sec
haval224,4       0.007580 sec   0.245249 sec
haval256,4       0.007442 sec   0.241091 sec
haval128,5       0.008651 sec   0.281248 sec
haval160,5       0.009304 sec   0.278619 sec
haval192,5       0.008972 sec   0.281235 sec
haval224,5       0.008917 sec   0.274923 sec
haval256,5       0.008853 sec   0.282171 sec 
```

然后我在 Intel Core i5-6600 下运行相同的 PHP 脚本，在 Windows 10 下使用 64 位版本的 PHP7。结果如下：

```
 Legend:
        (1) 5b x 5000, Intel Core i5-6600, PHP7
        (2) 5000b x 5000, Intel Core i5-6600, PHP7

PHP hash           (1)            (2)
---------    ------------    ------------
md2          0.016131 sec    2.308100 sec
md4          0.001218 sec    0.040803 sec
md5          0.001284 sec    0.046208 sec
sha1         0.001499 sec    0.050259 sec
sha224       0.002683 sec    0.120510 sec
sha256       0.002297 sec    0.119602 sec
sha384       0.002792 sec    0.080670 sec
ripemd128    0.001984 sec    0.094280 sec
ripemd160    0.002514 sec    0.128295 sec
ripemd256    0.002015 sec    0.093887 sec
ripemd320    0.002748 sec    0.128955 sec
whirlpool    0.003402 sec    0.271102 sec
tiger128,3   0.001282 sec    0.038638 sec
tiger160,3   0.001305 sec    0.037155 sec
tiger192,3   0.001309 sec    0.037684 sec
tiger128,4   0.001618 sec    0.050690 sec
tiger160,4   0.001571 sec    0.049656 sec
tiger192,4   0.001711 sec    0.050682 sec
snefru       0.010949 sec    0.865108 sec
snefru256    0.011587 sec    0.867685 sec
gost         0.008968 sec    0.449647 sec
adler32      0.000588 sec    0.014345 sec
crc32        0.000609 sec    0.079202 sec
crc32b       0.000636 sec    0.074408 sec
fnv132       0.000570 sec    0.028157 sec
fnv164       0.000566 sec    0.028776 sec
joaat        0.000623 sec    0.042127 sec
haval128,3   0.002972 sec    0.084010 sec
haval160,3   0.002968 sec    0.083213 sec
haval192,3   0.002943 sec    0.082217 sec
haval224,3   0.002798 sec    0.084726 sec
haval256,3   0.002995 sec    0.082568 sec
haval128,4   0.003659 sec    0.112680 sec
haval160,4   0.003858 sec    0.111462 sec
haval192,4   0.003526 sec    0.112510 sec
haval224,4   0.003671 sec    0.111656 sec
haval256,4   0.003636 sec    0.111236 sec
haval128,5   0.004488 sec    0.140130 sec
haval160,5   0.005095 sec    0.137777 sec
haval192,5   0.004117 sec    0.140711 sec
haval224,5   0.004311 sec    0.139564 sec
haval256,5   0.004382 sec    0.138345 sec 
```

如您所见，要在 PHP 中计算消息的 CRC32，在我几乎所有的测试中，只需要计算相同消息的 MD5 所需时间的一半左右。唯一的例外是在英特尔酷睿 i5-6600 上使用 PHP7 测试 5000 条 5000 字节的消息时，CRC32 甚至比 MD5 花费的时间更长（！）。这个奇怪的结果在我的案例中总是可以重复的。我找不到合理的解释。

此外，在 PHP 上，MD5 和 SHA1 之间几乎没有明显的速度差异，除了在带有 PHP5 的 Ubuntu 上，在测试 5000 条 5000 字节的消息时，MD5 快了两倍。

## 我的 OpenSSL 哈希性能测试结果

以下是英特尔 i5-660 上的 OpenSSL 测试。它们以不同的方式显示数据。它们没有显示消化某些数据集花费了多少时间，但反之亦然：它们显示了 OpenSSL 在 3 秒内设法散列的数据量。因此，值越高越好：

```
Legend:
 (1) OpenSSL 1.1.0 on Intel Core i5-6600, number of 16-bytes messages processed in 3 seconds
 (2) OpenSSL 1.1.0 on Intel Core i5-6600, number of 8192-bytes messages processed in 3 seconds

Algorighm              (1)            (2)
---------         ---------      ----------
md4               50390.16k      817875.48k
md5              115875.35k      680700.59k
sha1             118158.30k      995986.09k
ripemd160         30308.79k      213224.11k
whirlpool         39605.02k      182072.66k 
```

同样，md5 和 sha1 之间几乎没有区别，这很奇怪，需要进一步调查 MD5 和 SHA-1 算法在时间消耗方面是否本质上相同。

## 我们的 Delphi 哈希函数性能结果

以下是我们在英特尔酷睿 i5-6600 上的 Delphi 库在 Windows 10 64 位下的结果，测试的代码是 32 位 Win32 应用程序。

```
 Legend:
        (1) Delphi, 5b x 5000 iterations
        (2) Delphi, 5000b x 5000 iterations

Algorighm                  (1)                     (2)
---------------      --------------         --------------
md2                  0.0381010 secs         5.8495807 secs
md5                  0.0005015 secs         0.0376252 secs
sha1                 0.0050118 secs         0.1830871 secs
crc32               >0.0000001 secs         0.0581535 secs
crc32c (intel hw)   >0.0000001 secs         0.0055349 secs 
```

正如你所看到的，MD2 也比其他哈希值要多得多——与 PHP 代码的结果相同，但 MD5 比 SHA-1 快得多，总体而言，在同一台机器上在 Delphi 中执行相同操作所需的时间更少以 PHP 为例，PHP7 用 MD5 消化 5000 条 5 字节消息需要 0.001284 秒，用 SHA1 需要 0.001499 秒。大约 5000 字节的消息——使用 MD5 需要 PHP7 0.046208 秒，使用 SHA-1 需要 0.050259 秒。

与 Delphi 一样，使用 MD5 消化 5000 条 5 字节消息需要 0.0005015 秒，而使用 SHA1 需要 0.0050118 秒。大约 5000 字节的消息——使用 MD5 需要 Delphi 0.0376252 秒，使用 SHA-1 需要 0.1830871 秒。如您所见，MD5 在 Delphi 中运行得更快，但 SHA-1 几乎相同。此外，Delphi 在 5 字节消息上的速度大约快 10 倍，但对于大约 5000 字节的消息，它与 SHA-1 大致相同甚至更慢。

但是在 CRC32 和 CRC32C 方面，Delphi 是无与伦比的，比 PHP 快 10 到 1000 倍。

# 结论

PHP 在循环和小型操作上天生就很慢。因此，如果您需要计算一条小消息的哈希值，那么在 PHP 上调用哪个哈希函数并不重要。但如果你需要消化一条大消息，算法速度的差异就开始显现出来：例如，MD2 的性能大约是 MD5 的十倍。无论如何，今天绝对没有理由使用 MD2。对于使用 MD2 的 PHP 用户而言，相比 MD5 没有任何优势。至于 MD5，最初设计为加密哈希函数，然后在 RFC-1991 中被 PGP 使用，现在不能再用于密码学，但可以在可信环境中用作校验和，例如用于 ETag 或其他方式。这个函数在正确实现时非常快（并且在 PHP 上，它至少不慢），与其他函数相比，MD5 产生了非常紧凑的摘要。这是我进行这些基准测试的 PHP 代码。我是根据 Michael 的原始代码示例制作的（见上文）。

```
<?
 define (TRAILING_ZEROS, 6);
 $strlens = array(5, 30, 90, 1000, 5000);
 $hashes = hash_algos();

 function generate_bytes($len)
 {
   if (function_exists('random_bytes')) {$fn='random_bytes';$str = random_bytes($len);} else // for php 5
   if (function_exists('openssl_random_pseudo_bytes')) {$fn='openssl_random_pseudo_bytes';$str = openssl_random_pseudo_bytes($strlen);} else // for php 7
   {
        flush();
        ob_start () ;
        phpinfo () ;
        $str = str_pad(substr(ob_get_contents (), 0, $len), $len) ;
        ob_end_clean () ;
        $fn = 'phpinfo';
   }
   return array(0=>$str, 1=>$fn);
 }

 foreach ($strlens as $strlen)
 {

 $loops = 5000;
 echo "<h1>$loops iterations on $strlen bytes message</h1>".PHP_EOL;
 echo '<p>';
 $r = generate_bytes($strlen);
 $str = $r[0];
 $gotlen = strlen($str);
 while ($gotlen < $strlen)
 {
   // for some uncodumented reason, the  openssl_random_pseudo_bytes returned less bytes than needed
   $left = $strlen-$gotlen;
   echo "The ".$r[1]."() function returned $left byes less, trying again to get these remaining bytes only<br>";
   $r = generate_bytes($left);
   $str.= $r[0];
   $gotlen = strlen($str);
 };

 echo "Got the whole string of ".strlen($str)." bytes!";
 echo '</p>';
 echo PHP_EOL;
 echo "<pre>";

 foreach ($hashes as $hash)
 {
        $tss = microtime(true);
        for($i=0; $i<$loops; $i++)
        {
                $x = hash($hash, $str, true);
        }
        $tse = microtime(true);
        echo "\n".str_pad($hash, 15, ' ')."\t" . str_pad(round($tse-$tss, TRAILING_ZEROS), TRAILING_ZEROS+2, '0') . " sec \t" . bin2hex($x);
 }

 echo PHP_EOL."</pre>".PHP_EOL;
 flush();
 }
?> 
```

[帖子继续……](https://stackoverflow.com/a/43479013/6910868)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-09T07:39:54.593

哈希函数不是为了速度而构建的，因此它们不是这项工作的好人选。在这种情况下，它们的优势（加密安全）也无关紧要。

您应该考虑使用 CRC 或其他校验和函数；[这里](http://en.wikipedia.org/wiki/List_of_checksum_algorithms)有一个常用的列表。[HashLib](http://hashlib.codeplex.com/)有现成的实现。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-09T08:27:56.053

我相信您在这种情况下误解了哈希的目的。

这是快速“这些*不*一样”的检查。哈希不能告诉你两件事是否相等，因为它们*会*发生冲突。

因此，考虑到一个简单的 CRC 很少发生冲突，以及它在大量文件上的速度有多快，这是一个更好的解决方案。

如果两个哈希值或 CRC 相同，您的反应应该*完全相同*：通过实际内容验证相等性。您甚至可以在 CRC 匹配后散列/CRC 一个相等大小的子集 - 并检查文件大小 - 以便快速“排除”检查。

* * *

如果您希望有许多相同的文件，哈希仍然不能消除检查的需要，但它会减少需要。您仍然需要进行其他类型的检查。哈希相等，加上文件长度匹配，加上部分哈希相等（`x`例如，对文件的第一个字节进行哈希处理）可能就足够了，具体取决于您的需要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-18T17:49:33.970

*我遇到了单个帖子大小的限制，所以我将在第二个帖子中继续。*

# “选择哈希函数以获得最佳性能”问题的最后说明

至于最初的问题：“选择一个哈希函数以获得最佳性能”，我的看法如下。如果您使用 PHP，请考虑使用 MD5 来计算各种哈希和摘要。与 CRC32 相比，它在速度上几乎没有差异，至少目前在 PHP 5 和 7 中是如何实现的。一般来说，如果您使用 PHP，MD5 与 PHP 中可用的其他哈希相比在性能上有显着差异，当谈到更大的消息。MD5 的优点是它生成的摘要大小相对较小，而且速度非常快。

如果您有 AES (AES-NI) 的硬件实现，则可以在 CBC 模式下使用 AES 来生成摘要。它将比 MD-5 快得多，具有相同的摘要大小（128 位）。

提示：如果您需要更小的摘要但 PHP 的文本形式，请使用 md5 的二进制输出的 base64_encode，它会产生比默认使用的十六进制编码更短的结果字符串。

# 从低级编程语言中使用哪个哈希函数

如果您使用的是 Delphi 或 C++ 之类的编程语言，请找到 CRC32C 的良好实现，它可以在 Intel 和 AMD 现代处理器上通过硬件加速运行。

正如您从我的 Delphi 测试结果中看到的，我们的代码计算了 5000 条消息的校验和，每条消息长度为 5000 字节，总体耗时仅为 0.0055349 秒。它比我们的 CRC32 的非硬件实现快了大约十倍，而后者又比用 PHP 实现的快得多。

如果您需要更大的摘要，而不仅仅是 CRC32 生成的 4 个字节，而是至少 16 个字节，请考虑找到一个高性能的 MD5 实现并使用 MD5 来生成您的摘要。MD5 是作为加密散列函数开发的，用于 PGP 加密和数字签名。它如何不再适合加密，但对于消息摘要来说仍然可以。这个散列函数不能再用于密码学，因为很容易发现冲突，但是如果你只需要将它用于你自己的校验和而不是冲突攻击的问题，我建议即使在 2017 年的今天也使用 MD5，前提是你已经找到了这个著名的散列函数的快速实现。如果您害怕冲突，并且您有 AES (AES-NI) 的硬件实现，那么请使用 AES-CBC 作为摘要。

# 具有较大摘要的哈希可能有用的实际示例

让我解释一下为什么有人可能需要一个具有更大摘要大小的哈希函数，比如 16 个字节，而乍一看，你可以使用更短的一次，比如只有 4 个字节的 CRC32？

如果更大的散列不是问题，就不会有像“选择散列函数以获得最佳性能”这样的问题（参见最初的帖子）。

假设您有一个由应用程序服务器和“memcached”服务器组成的受信任环境，其中所有应用程序都可以访问运行“memcached”恶魔的服务器上使用的所有数据，并且可以通过简单的文本键访问数据。我看到人们发明了更长的字符串，以便键在不同的领域、应用程序中是唯一的，即不重叠。因此，根据维护集群或集群组的所有程序员和管理员的惯例，他们通常同意密钥应由不同的强制段组成，如下所示： $UniqueKey = "$Namespace|$Realm|$Application| $AppComonent|$User|$Key";

这会产生非常长的键，大约 60 个字符或更多。

对于“memcached”守护进程，数据存储在固定大小记录（块）的slab中，键+值的长度构成了单个块的大小，因此slabs是96字节的小块，120字节和 192 字节几乎是空的，而真正使用的第一个平板是 304 字节块。为了避免较长密钥的这种低效率，按照惯例，您可以同意始终通过预先确定的哈希函数（如 MD5）来消化所有这些密钥。如果所有开发人员都使用相同格式的密钥，并且总是通过某个哈希函数对这些密钥进行哈希处理，那么在这个可信环境中密钥可能重叠的实际风险是不存在的。您只需对 MD 的二进制输出进行 base-64 编码并去除尾随的“=”填充，并且，可选地，

```
Suj5_RxNfIq4u-36o03afg
StRL3WgcNM6AjTSW4ozf8g
i4Ev9nJNFpmf928PrkWbIw
b_GE6cp9c-PT_PLwwYbDXQ
Znci1Nj3HprfFLa0cQNi5g
6ns__XWR7xlsvPgGwZJLBQ
9_Yse6hFEyzgl5y5fnZaUg
LYoIQyhNpmAHqY4r-fgZXg
Y1fVl2rBaan0sKz-qrb8lQ
CiLmDZwUVNW09fQaTv_qSg
easjBIYq27dijGr2o01-5Q 
```

# 以不同的方式布置测试结果

让我还以不同的方式向您展示哈希性能测试结果：除以经过的时间，因此您可以通过输出以 KB/S 看到特定的哈希：

## 散列 50000000 个 64 字节的数据块

### 通过通用指令在汇编中实现的 CRC32 CCITT

*   32 位：7.2012 秒，423.7874 MB/秒
*   64 位：7.1871 秒、424.6137 MB/秒

### 通过通用指令在 Delphi 中实现的 CRC32 CCITT

*   32 位：7.1350 秒、427.7164 MB/秒
*   64 位：7.3686 秒、414.1570 MB/秒

### 通过通用指令在汇编中实现的 CRC32C (RFC 3720)

*   32 位：2.4866 秒、1227.2629 MB/秒
*   64 位：2.7694 秒、1101.9702 MB/秒

### 通过 SSE 4.2 CRC32C 指令实现的 CRC32C

*   32 位：0.7099 秒、4298.7911 MB/秒
*   64 位：0.7510 秒，4063.6096 MB/秒

### 通过通用指令在汇编中实现 MD5

*   32 位：4.4489 秒、685.9647 MB​​/秒
*   64 位：4.4369 秒、687.8157 MB/秒

### AES，通过通用指令在汇编中实现

*   32 位：23.6519 秒、129.0280 MB/秒
*   64 位：28.1875 秒、108.2662 MB/秒

### AES，通过 AES-NI 指令实现

*   32 位：1.6374 秒、1863.8040 MB/秒
*   64 位：1.6063 秒、1899.8995 MB/秒

我相信您已经发现哈希问题非常重要，所以它是！

# c# - C#：如何计算纵横比

> ID：10070296
> 
> 赞同：11
> 
> 时间：2012-04-09T07:34:10.750
> 
> 标签：c#, asp.net, aspect-ratio

我对编程比较陌生。我需要从给定的维度（比如 axb）计算纵横比（16:9 或 4:3）。如何使用 C# 实现这一点。任何帮助将不胜感激。

```
public string AspectRatio(int x, int y)
{
 //code am looking for
 return ratio
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T07:40:31.953

您需要找到最大公约数，并将 x 和 y 都除以它。

```
static int GCD(int a, int b)
{
    int Remainder;

    while( b != 0 )
    {
        Remainder = a % b;
        a = b;
        b = Remainder;
    }

    return a;
}

return string.Format("{0}:{1}",x/GCD(x,y), y/GCD(x,y)); 
```

**附言**

如果您希望它处理像 16:10 之类的东西（可以除以 2，使用上面的方法将返回 8:5），您需要有一个预定义的`((float)x)/y`长宽比对表

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T07:56:16.860

由于您只需要在 16:9 和 4:3 之间做出决定，因此这里有一个更简单的解决方案。

```
public string AspectRatio(int x, int y)
{
    double value = (double)x / y;
    if (value > 1.7)
        return "16:9";
    else
        return "4:3";
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-09T08:02:18.947

只有几个标准比率，例如：`4:3`、`5:4`、`16:10`、`16:9`。 `GCD`是个好主意，但至少在`16:10`比率和`1366x768`分辨率方面会失败。

纯 GCD 算法将得到`683:384`1366x768，因为 683 是素数，而分辨率几乎是 16:9 (16.0078125)。

我想，对于真正的任务，需要实现相当复杂的算法：

首先尝试已知的纵横比（在[wikipedia](http://en.wikipedia.org/wiki/List_of_common_resolutions)上查找它们），允许一些错误，然后才使用 GCD 作为后备。

不要忘记[32:10](https://www.google.ru/search?q=crvd+display) ;-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T07:40:26.293

您需要找到 GCD (http://en.wikipedia.org/wiki/Greatest_common_divisor)，然后：

```
return x/GCD + ":" + y/GCD; 
```

# css - 保存、重启和清除所有 cookie 后浏览器不应用新的 css

> ID：10070297
> 
> 赞同：0
> 
> 时间：2012-04-09T07:34:23.843
> 
> 标签：css, wordpress, browser

我正在使用 wordpress 作为我的 cms 并建立一个网站。我使用 Graphene 作为我的主题，当我通过管理菜单修改 style.css（并通过 vi 编辑器验证更改）时，我看到更改就在那里。

现在，当我打开我的网站并右键单击检查元素时，我仍然看到我的“高度参数”的旧值。

所以我从 Chrome 中删除了所有 cookie、临时文件。并重新启动了网站，旧的高度值仍然存在。我在这里想念什么？

我提到的所有网站都提示清除 cookie、临时文件。

编辑：我在我的本地主机上运行 wordpress 服务器。编辑：添加图像

![检查元素](../Images/0a64a41e272495e7f2ec22598ec978ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:41:26.693

在 Chrome (ctrl + shift + n) 中以隐身模式打开页面，以确保页面正在加载更新的 css 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:38:27.487

您正在编辑的 CSS 文件可能不是您的网站正在使用的文件。

仔细检查您希望更改的 CSS 文件的路径是否是您在后端更改的路径。

# database - OpenSearchServer：为什么我会收到此错误错误 (java.lang.NullPointerException)

> ID：10070300
> 
> 赞同：0
> 
> 时间：2012-04-09T07:34:50.877
> 
> 标签：database, search-engine

我正在使用 OpenSearchServer v1.2.4 rc3。
在最初的几天里，它工作正常。
但是当它的索引大小达到 1.0GB 时，我得到了这个错误

> “错误（java.lang.NullPointerException）”

当我启动我的爬虫时。爬虫可以正常工作一段时间，然后停止并出现此错误

> “错误（java.lang.NullPointerException）”。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:59:08.327

根据索引的大小，必须添加内存参数。默认情况下，OpenSearchServer 设置为使用 Java 虚拟机提供的默认 RAM 值（仅从 64MB 到 512MB）在小型服务器上运行。

对于大型索引，您必须设置更高的值。在 Unix/Linux 服务器上，只需创建一个包含以下内容的*/etc/opensearchserver文件：*

```
CATALINA_OPTS="-Xms2G -Xmx2G -server"
export CATALINA_OPTS 
```

在 Windows 服务器上，编辑*start.bat*文件。*在:okExec*之后添加以下行

 *```
set CATALINA_OPTS="-Xms2G -Xmx2G -server" 
```

将 2G（即 2 GB）替换为您要分配给 OpenSearchServer 的内存大小。

在 32 位版本中，内存限制为 2.5GB。您可以使用以下行（在 Unix/Linux 上）在 64 位操作系统上使用更多内存：

```
 CATALINA_OPTS="-Xms12G -Xmx12G -d64 -server" 
```

对于 64 位窗口：

```
set CATALINA_OPTS="-Xms12G -Xmx12G -d64 -server" 
```

重新启动 OpenSearchServer 后，只需在运行时选项卡面板中检查您有正确大小的可用内存。

Regarding the error details, it is more useful to have the full stack trace. You can find it in the log file (data/logs/oss.log), or in the Runtime/Logs tab panel.*

# php - 在php中将法语字符转换为字符串

> ID：10070309
> 
> 赞同：1
> 
> 时间：2012-04-09T07:35:57.130
> 
> 标签：php

这里是我在表单文本框中输入的数据。文本框名称：quiz_optionA

```
value  = ÉÉÉabcd. 
```

我通过以下方式从我的 php 函数中获取数据

```
$this->_data = JRequest::get('post');
$string = $this->_data['quiz_optionA']; 
```

下面我用的方法将法语转换成英语

```
$normalizeChars = array(
 'Š'=>'S', 'š'=>'s', 'Ð'=>'Dj','Ž'=>'Z', 'ž'=>'z', 'À'=>'A', 'Á'=>'A', 'Â'=>'A',      'Ã'=>'A', 'Ä'=>'A',
'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E', 'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I',
'Ï'=>'I', 'Ñ'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O', 'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 'Ù'=>'U', 'Ú'=>'U',
'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss','à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a',
'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e', 'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i',
'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ò'=>'o', 'ó'=>'o', 'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u',
'ú'=>'u', 'û'=>'u', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b', 'ÿ'=>'y', 'ƒ'=>'f'
);

echo strtr($string, $normalizeChars);die; 
```

输出：

```
A�A�A�abcd 
```

普通英文字母转换为字符串。但是法语字符没有转换为字符串。

输出应为 EEEabcd。你能帮我做这件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:57:16.387

今天我已经回答了[类似的问题](https://stackoverflow.com/questions/10069193/how-can-i-keep-the-replacement-character-from-turning-into-an-html-entity-in-php/) 所以尝试使用这样的html代码：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

并确保包含 $normalizeChars 的 .php 文件具有 utf8 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:01:40.020

# opengl-es - 在 OpenGL-ES 中移植 Plib

> ID：10070317
> 
> 赞同：0
> 
> 时间：2012-04-09T07:37:06.540
> 
> 标签：opengl-es, opengl-es-2.0

我正在尝试将 Plib 从 OpenGL 移植到 OpenGL-Es。所以我需要一些建议。这真的可能吗？因为我还没有发现有人这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:38:21.163

您可以遵循[此处给出](https://stackoverflow.com/a/273589/1262542)的优秀建议，以及比较 OpenGL ES 2 和 OpenGL 2 的 [差异规范](http://www.khronos.org/registry/gles/specs/2.0/es_cm_spec_2.0.25.pdf)。

我无法*真正*评论这项努力的可能性。我想说，你可以自由地提出那些不能很好地映射到 OpenGL ES 2 的特性（除了客户尽快知道的例外情况外，还有例外）。但是，如果这意味着放弃核心功能，那么您就迷失了。

# iphone - 如何增加和减少 PDF 页面亮度？

> ID：10070320
> 
> 赞同：2
> 
> 时间：2012-04-09T07:37:59.333
> 
> 标签：iphone, objective-c, ipad

我正在开发 PDF 应用程序，我想在其中添加有助于增加或减少 PDF 页面亮度的亮度设置。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:02:18.543

如果您的应用目标是 iOS 5 及更高版本，您可以这样做：

```
[[UIScreen mainScreen]setBrightness:0.5];//The value should be from 0 to 1.0 
```

如果您希望您的应用程序与以前的 iOS 版本兼容，那么您需要向您的 pdfViewController 添加一个视图，使其背景颜色为黑色，然后根据亮度滑块值更改其 alpha。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:42:23.007

插入带有 Black.png 的 UIImage 是黑色图像并将亮度 0.2 的滑块值更改为 1.0

```
UIImageView *imgview=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024)];
imgview.image=[UIImage imageNamed:@"Black.png"];

[self.view addSubview:imgview];
[imgview bringSubviewToFront:self.view];
imgview.alpha=1.0; 
```

# java - Java 中公共与私有的运行时性能

> ID：10070325
> 
> 赞同：1
> 
> 时间：2012-04-09T07:38:37.510
> 
> 标签：java, performance, runtime

公共和私有变量/方法之间是否存在运行时性能差异？

我知道如果可能的话，将事情保密被认为是一种很好的做法，但是是否有任何与优化相关的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:45:20.840

我不认为有直接的。无论如何，在我看来，访问修饰符更像是编译时的事情。

即使有，也不要那样做，有一个很好的理由（可能有几个）你不应该公开类字段。

对性能的影响**非常**小，因为您必须为字段调用 getter 和 setter 方法，但除非您在那里进行复杂的操作，否则绝对不会引起注意。最多是几毫秒的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:50:37.063

就像我会说的大多数这些问题一样；编写清晰，简单的代码，它也会表现良好。

如果有人告诉您出于性能原因某事是一个好主意，请确保这是用实数备份的，您正在使用的 Java 版本仍然是这种情况（此建议中的大部分内容已过时），并且它是适合您的应用。

通常“性能原因”是编写晦涩代码的借口，实际上它可能不会更快甚至可能更慢（因为它会混淆 JVM 优化器，就像它会让你感到困惑一样）

有些人对性能优化持怀疑态度，以至于您引用“过早的优化是万恶之源”这句话有点夸张，但这是一个很好的警告，除非您真的知道需要提高性能，否则不要担心性能问题，并且您的更改确实有所作为。

对于这个特定问题，您不能从另一个类调用私有方法。所以基本上，你不能来自另一个外部类，也不能来自同一个外部类中的另一个类，并且如果调用足够多，通常会内联访问器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:02:05.537

私有和公共变量/方法之间的运行时性能没有差异。它仅取决于您的程序要求。例如，您有一个整个程序都需要的方法，那么您应该使用公共方法。它可以减少代码重复。但是你有一个只需要一个类的方法，那么你应该使用私有方法。

# wcf - 使用 acs 对 wp7 应用程序和 wcf 服务进行身份验证

> ID：10070329
> 
> 赞同：0
> 
> 时间：2012-04-09T07:39:16.163
> 
> 标签：wcf, windows-phone-7, oauth, azure, acs

我正在网上寻找如何将 ACS 与 WP7 应用程序和 SOAP WCF 服务一起使用的示例。我能找到的只是 REST WCF 数据服务的示例，而不是简单的 WCF 服务。

有谁知道一个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:07:41.040

你可以看看这个：[Authenticating Users in a Windows Phone 7 App via Access Control Service, OData Services and Windows Azure](http://msdn.microsoft.com/en-us/identitytrainingcourse_acsandwindowsphone7.aspx)

希望这会有所帮助。

# spring - JSF多次调用getter导致服务超时

> ID：10070330
> 
> 赞同：0
> 
> 时间：2012-04-09T07:39:17.790
> 
> 标签：spring, jsf, richfaces

我正在使用 JSF 和 spring 。我在会话范围内有一个 Spring 托管 bean。我从服务电话中得到了一个相当大的列表。我正在调用服务并在绑定到 jsf 视图的 getter 中获取列表。当我运行应用程序时，getter 会被多次调用。

所以在返回列表之前，它会再次被调用并超时。

该列表是动态的，我需要在页面加载时获取新列表，并且每分钟使用 richfaces a4j poll 刷新列表。每次都必须从数据库中检索该列表。

如果我将 bean 更改为请求范围并将服务调用移动到构造函数，则性能会更差。

谁能建议一个更好的架构来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:00:24.497

JSF 托管的 bean getter 绝对不应该调用服务。他们应该只*返回*托管 bean 属性。这个属性应该已经由（post）构造函数或（action）listener 方法准备好了。这些方法将被调用一次。当 JSF 需要访问该值时，将多次调用 Getter。

您需要重写您的代码，以便第一次工作在托管 bean 的（后）构造函数中完成，并且`<a4j:poll>`调用一个刷新列表的侦听器方法，并且 getter 除了返回属性之外什么都不做.

这是一个使用标准 Java EE 6 工件的基本启动示例。我不做 Spring，但你应该能够用 Spring 工件取代它。

```
@ManagedBean
@SessionScoped
public class Bean {

    private List<Entity> entities;

    @EJB
    private EntityService service;

    @PostConstruct
    public void load() {
        entities = service.list();
    }

    public List<Entity> getEntities() {
        return entities;
    }

} 
```

和

```
<a4j:poll action="#{bean.load}" interval="60000" render="someTableId" /> 
```

### 也可以看看：

*   [为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times)

* * *

**与具体问题无关**：如果您有一个相当大的 DB 表（>1000 行），那么将整个 DB 表复制到 Java 的内存中是一个非常糟糕的主意。实现分页/过滤。

# asp.net - URL 中的 MapPageRoute 附加参数

> ID：10070337
> 
> 赞同：2
> 
> 时间：2012-04-09T07:40:10.553
> 
> 标签：asp.net, url-routing

我正在使用 MapPageRoute (ASP.NET 4) 来支持多语言网站中的友好 url。

我希望能够传递附加参数以及 MapPageRoute 中定义的参数。

在上面的例子中，我需要根据 URL 确定请求的语言：（如果是“Accessories”，页面应该是英文，如果是“Accessoires” - 页面应该是法语）：

```
 routes.MapPageRoute(
           "Accessory fr",
           "Accessoires/{accessory_name}",
           "~/Accessory.aspx?lang=fr"
        );

    routes.MapPageRoute(
       "Accessory en",
       "Accessories/{accessory_name}",
       "~/Accessory.aspx?lang=en"
    ); 
```

所以，请求的附件名称没有问题，它是通过 using 读取的`Page.RouteData.Values["accessory_name"]`，但是如何读取`lang`参数？

我不能使用`Request["lang"]`，因为它没有给我要求的结果。不知何故，`?lang=xx`没有采取。

任何其他想法，我如何传递附加参数，假设在 URL 中没有明确找到这个参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T12:59:04.527

如果您想要将其他参数传递给您的路由处理程序（页面），您可以设置 DataTokens 属性，

```
Route reportRoute = new Route("Accessoires/{accessory_name}", new PageRouteHandler("~/Accessory.aspx"));
reportRoute.DataTokens = new RouteValueDictionary { { "lang", "en" } };
routes.Add(reportRoute); 
```

您可以在您的处理程序（页面）中访问它，

```
string lang = (string)Page.RouteData.DataTokens["lang"]; 
```

检查 msdn、 [Route.DataTokens 属性](http://msdn.microsoft.com/en-us/library/system.web.routing.route.datatokens.aspx)

# javascript - 挂钩 Dom 对象是什么意思

> ID：10070341
> 
> 赞同：1
> 
> 时间：2012-04-09T07:40:27.693
> 
> 标签：javascript, dom

在我的项目中，我正在解析 JavaScript 代码，尤其是像`document.createElement`正则表达式这样的动态函数。但有人建议我把它包`document.createElement`起来做钩子。我不明白该怎么做

他们还提供了一个例子：

```
var f = document.createElement; 
document.createElement = function(tagName){ 
    console.log(tagName); 
    f.apply(document, arguments); 
} 
```

此代码正在跟踪`document.createElement`

我无法理解如何在我的代码中使用它，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:44:03.633

该代码将存储对原始代码的引用`document.createElement`，然后重新分配`document.createElement`以指向新函数。

在这个新函数内部，它将记录第一个参数，然后调用原始`document.createElement()`传递`document`作为它的`this`值，并按原样传递其余的`arguments`。

这是我将如何编码...

```
(function() {
    var documentCreateElement = document.createElement;

    document.createElement = function(tagName) {
        console.log(tagName);
        return documentCreateElement.apply(document, arguments);
    }

})(); 
```

如果`console.log()`可能不可用，您可能需要将该行更改为...

```
window.console && console.log && console.log(tagName); 
```

# java - 撤消 arrayList 中的更改

> ID：10070345
> 
> 赞同：2
> 
> 时间：2012-04-09T07:40:53.853
> 
> 标签：java, arraylist, undo

我有一个名为“线”的线对象的 ArrayList。我制作了自己的线条类来绘制带有一些约束的线条。它涉及在面板中选择两个点，然后绘制一条连接这两个点的线。每次创建一条线时，它都会添加到“线”中。线条在面板中绘制。

我面板中的绘制函数如下所示：

```
 public void paintComponent(Graphics g){      

       super.paintComponent(g);

       for(final Line r:lines){

            r.paint((Graphics2D)g);

       }
    } 
```

每次在面板上单击两个点，都会创建一条新线。

```
class Board extends JPanel{

 public void placeLine(){
  Point p1,p2;
  JLabel l1,l2;
  ...
  lines.add(new Line(p1,p2,l1,l2));
  this.repaint();
 }
 public void deleteLine(Line l){
  lines.remove(l);
 }
} 
```

我想在其中创建一个 UndoAbleEdit，每次我撤消时，撤消方法都必须恢复到最后一个操作（即创建一行或删除一行）。我已经尝试撤消 JTextArea 中的事件，但我不知道如何为 ArrayLists 中的事件更改构建自定义撤消。建议一个这样做的例子。

我真的很抱歉没有将它作为 SSCCE 发布。这是一个巨大的项目，几乎不可能创建 SSCCE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:15:25.777

我将创建和存储 Runnable 对象，以便在某些堆栈结构中进行撤消更改，根据需要弹出和运行它们。对于您的示例：

```
class Board extends JPanel {
    ArrayList lines = new ArrayList();
    Stack<Runnable> undo = new Stack<Runnable>();

    public void placeLine() {
        Point p1, p2;
        JLabel l1, l2;

        final Line line = new Line(p1, p2, l1, l2);
        lines.add(line);
        undo.push(new Runnable() {
            @Override
            public void run() {
                lines.remove(line);
                this.repaint();
            }
        });

        this.repaint();
    }

    public void deleteLine(final Line l) {
        lines.remove(l);
        undo.push(new Runnable() {
            @Override
            public void run() {
                lines.add(l);
            }
        });
    }

    public void undo() {
        undo.pop().run();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:21:57.927

我建议您阅读有关 Memento 模式 ( [http://en.wikipedia.org/wiki/Memento_pattern](http://en.wikipedia.org/wiki/Memento_pattern) ) 的信息，然后在网上搜索一些使用此模式的代码示例。

# android - Android：如何在 google map API android 中将 imageView 设置为标记？

> ID：10070347
> 
> 赞同：6
> 
> 时间：2012-04-09T07:40:59.283
> 
> 标签：android, google-maps, google-maps-markers, itemizedoverlay

到目前为止，我一直在使用 drawable 在我的地图上填充标记。现在我想知道如果我可以将自定义图像视图显示为地图中的标记会很酷。

直到现在我都在这样做

```
 itemized= new Itemazide(drawable, mContext); 
```

我想实现类似

![这](../Images/bc9d8fbf125da1c37571a2f110de2f13.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:55:38.407

我可能有点晚了，但我会为其他面临/面临类似问题的人发布解决方案。所以基本上你必须做的（至少对于你正在寻找的解决方案，即在类似框的背景上施加的自定义图像）是在画布的帮助下将 customImage 强加在背景框上。使用此实现，您可以有效地从画布创建 BitmapDrawable，然后您可以将其指定为“Overlay”/“ItemizedOverlay”的标记。此外，请不要为每个叠加层创建一个 ImageView，因为如果您必须同时处理数千个这样的 ImageView，这将彻底破坏您的内存/您的应用程序。相反，使用可以在构建过程中分配给叠加层的 BitmapDrawables，并且不会像 ImageView 那样消耗几乎足够的内存。

```
public BitmapDrawable imageOnDrawable(int drawableBackground, Bitmap customImage)
{
    //The following line is optional but I'd advise you to minimize the size of 
    //the size of the bitmap (using a thumbnail) in order to improve draw
    //performance of the overlays (especially if you are creating a lot of overlays).

    Bitmap customImageThumbnail = ThumbnailUtils.extractThumbnail(
                                                    customImage, 100, 100); 

    Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId);
    bm = Bitmap.createScaledBitmap(bm, 112, 120, false);

    Canvas canvas = new Canvas(bm);
    canvas.drawBitmap(bm, 0, 0, null);
    // The 6,6 in the below line refer to the offset of the customImage/Thumbnail
    // from the top-left corner of the background box (or whatever you want to use
    // as your background) 
    canvas.drawBitmap(customImageThumbnail, 6, 6, null); 

    return new BitmapDrawable(bm);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T07:57:12.313

是的，我想知道我是否可以做这样的事情，即显示自定义`View`而不是可绘制的。您可以覆盖`draw()`方法，但不幸的是它总是（请告诉我我错了）必须是可绘制的。我认为这是因为自定义`View`会占用太多内存。

话虽如此，根据您要实现的目标，可能可以破解[mapview-baloon](https://github.com/jgilfelt/android-mapviewballoons)库以实现一些类似的效果。

**编辑：** 既然你已经展示了你想要实现的目标，我认为你应该`draw()`在你的`OverlayItem`和这个方法中覆盖你的`ImageView`. 但是我没有尝试这样做，所以可能会有一些缺点（我记得一个类似问题的 SO 线程声称它会中断所有触摸事件`OverlayItem`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-27T07:47:56.147

```
In google mapv2, map-view ballon like functionality is provided by default.
Just, you have to write some lines for it :

private GoogleMap mapView;

if (mapView == null)
            mapView = ((MapFragment) getFragmentManager().findFragmentById(
                    R.id.map_view)).getMap();

        mapView.getUiSettings().setMyLocationButtonEnabled(false);
        mapView.setMyLocationEnabled(true);

MarkerOptions markerDestinationOptions;
markerDestinationOptions = new MarkerOptions()
                    .position(latLngDestination)                .icon(BitmapDescriptorFactory.fromResource(R.drawable.marker));

mapView.addMarker(markerDestinationOptions); 
```

# android - 在textedit下隐藏部分按钮

> ID：10070349
> 
> 赞同：0
> 
> 时间：2012-04-09T07:41:10.440
> 
> 标签：android

我正在努力实现这样的目标

![替代文字](../Images/91804abc70c3f7012d38e917c1270b71.png) - 左侧的文本视图和右侧的按钮 - 按钮应为 wrap_text - 文本编辑应占用剩余空间

如果您仔细查看图像中的图像，按钮左弯曲边框隐藏在文本视图下。

我正在使用相对布局来根据这个调整按钮高度

[如何让按钮的高度与另一个元素的高度相匹配？](https://stackoverflow.com/questions/4188859/how-to-get-a-buttons-height-to-match-another-elements-height)

但我无法隐藏按钮的左侧部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:49:40.580

实际上`Button`并没有隐藏在`EditText`.

他们为该按钮使用了自定义背景，即 9 补丁 png 图像。您可以通过为两者提供 9 个补丁图像`EditText`并且`Button`它们之间的边距为 0 来实现这一点。

[这](http://tekeye.biz/2012/android-9patch-files)是一个关于使用 9 补丁 png 的不错的教程。

另一个需要考虑的帖子是[带有（niceley）拉伸背景的按钮。](http://www.anddev.org/tutorial_buttons_with_niceley_stretched_background-t4369.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:58:27.867

添加 android:layout_marginLeft="-10dp" 到按钮

# javascript - 根据 window.innerWidth 在中间设置弹窗

> ID：10070356
> 
> 赞同：0
> 
> 时间：2012-04-09T07:41:59.190
> 
> 标签：javascript, popup

我想创建一个弹出窗口，并且无论浏览器或屏幕大小如何，我都希望它始终位于中间。

所以为此，我使用的是 window.innerWidth，但我不知道为什么这段代码不起作用。

```
function show_update_profile()
   {
       document.getElementById('black_fade').style.display='block';
       alert(window.innerWidth);
       document.getElementById('div_register').style.display='block';
       document.getElementById.('div_register').style.left= ((window.innerWidth)-500)/20;
       alert(window.innerWidth);
   } 
```

线路`document.getElementById.('div_register').style.left= ((window.innerWidth)-500)/20;`有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:04:34.180

`window.innerWidth`不是跨浏览器兼容的，所以它不适用于每个浏览器，所以你需要这样的功能

```
function getBrowserInnerSize(w)
{
    var x,y;
    if (!w){
        w = window;
    }

    if (w.innerHeight){ 
        // FireFox
        x = w.innerWidth;
        y = w.innerHeight;
    } else if (w.document.documentElement && w.document.documentElement.clientHeight) {
        // IE Strict mode
        x = w.document.documentElement.clientWidth;
        y = w.document.documentElement.clientHeight;
    } else if (w.document.body) {
        // IE Normal mode
        x = w.document.body.clientWidth;
        y = w.document.body.clientHeight;
    }

    return {"x":x,"y":y};
} 
```

# javascript - 使用 javascript 将引荐来源网址写为传入的搜索词

> ID：10070359
> 
> 赞同：1
> 
> 时间：2012-04-09T07:42:15.543
> 
> 标签：javascript, referrer

我可以在我的html网站中使用javascript提取搜索引擎地址的搜索词或关键字吗？我已经制作了一个 javascript，使用

document.write(document.referrer);

但我不知道如何提取或解析搜索词并将其显示在我的网站上，并带有引荐来源网址的反向链接。

我想让它成为一个 javascript 代码，可以为我生成传入的搜索词，并带有指向推荐人的反向链接。我是 JavaScript 的新手，也许你可以为我提供一个简单易懂的制作步骤。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T22:35:21.723

`document.referrer.split('?')[1]`

`split`将它正在操作的字符串 ( `document.referrer`) 划分为指定的字符 ( `?`)。它创建一个包含两个元素的数组，第一个（索引 0）包含问号之前的字符串；第二个（索引 1）问号后面的字符。

因此，该表达式返回 in 之后的`?`字符`document.referrer`。

# c# - Spritebatch 设置导致向后剔除或其他任何东西的东西

> ID：10070361
> 
> 赞同：0
> 
> 时间：2012-04-09T07:42:53.413
> 
> 标签：c#, xna, depth, spritebatch

对于我编写的 cel 着色器，边缘检测仅适用于 2D 纹理/渲染目标。因此，我调整了渲染方法，以便将纹理绘制到渲染目标，渲染目标设置为纹理并使用 SpriteBatch 绘制。

除了，SpriteBatch（似乎？）忽略了我的设置：

```
spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.Opaque, SamplerState.LinearWrap, DepthStencilState.Default, RasterizerState.CullNone); 
```

显然会正确绘制对象。然而，事实并非如此。

![在此处输入图像描述](../Images/6033d9a05d1f2e67deefda5aa45fc0fe.png)

# c# - RavenDB.Client.Embedded 在我尝试构建后消失了

> ID：10070365
> 
> 赞同：3
> 
> 时间：2012-04-09T07:43:13.237
> 
> 标签：c#, nuget, ravendb

我正在关注教程，安装了 RanvenDB 并写入：

```
public static IDocumentStore archives =
    new EmbeddableDocumentStore { DataDirectory = "~/DataStore" }; 
```

然后我让 VS 找到 EmbeddableDocumentStore 的位置，然后添加：

```
using Raven.Client.Embedded; 
```

还没有错误，一切看起来都很好。然后我建立：

> Archives.cs(10,20)：错误 CS0234：命名空间“Raven.Client”中不存在类型或命名空间名称“Embedded”（您是否缺少程序集引用？）
> 
> 编译完成 -- 1 个错误，0 个警告

现在它是错误的，没有嵌入式......

如果我删除 package.config 并再次运行 install Ravendb Embedded 它将再次变为绿色（没有错误），但在我运行 build 之后...

如何修复它？

（测试不同的版本：相同的结果）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T09:28:12.473

确保您正在构建完整的 .NET 框架，而不仅仅是客户端配置文件。

# sql - 在新线程中执行数据库方法

> ID：10070366
> 
> 赞同：0
> 
> 时间：2012-04-09T07:43:25.943
> 
> 标签：sql, vb.net, multithreading, reporting-services

我正在使用vs 2008 中的Vb.net win 应用程序。我在一个表单中有四个选项卡来显示四个不同的报告（rdlc）。我已经编写了四种单独的方法来为每个报告一次获取数据库数据并在单独的线程中执行。每个选项卡都有一个下拉列表，它调用相同的方法来处理问题。rdlc（在reportviewer中）第一次显示数据，但在更改下拉值时它没有显示任何数据。对于下拉，本地处理的数据存储在数据集中。那么，我可以有任何解决方案吗？我在哪里做错了？这是我的示例代码，

```
Try
    Dim athread = New Thread(AddressOf BindReportSales)
    athread.IsBackground = True
    athread.Start()
Catch ex As Exception
    MessageBox.Show(Me, ex.Message.ToString())
Finally
    'athread.Abort()
End Try 
```

*   BindReportSales 是单选项卡数据的方法名称
*   BindReportReceipt 是另一个名为 Receipt 的选项卡的方法名称

BindReportsales方法包含某些业务逻辑。当更改选项卡中的下拉值时，它将不会再次转到数据库，它只是在加载表单时简单地操纵先前已加载的数据集。提前致谢。

# android - SmartFoxServer 无法连接到服务器

> ID：10070367
> 
> 赞同：2
> 
> 时间：2012-04-09T07:43:37.110
> 
> 标签：android, smartfoxserver

我正在使用 android 聊天应用程序。

我使用 SmartFox 服务器。我使用 10.0.2.2 作为服务器 IP 地址，使用 9933 作为端口。

每当我使用模拟器运行此应用程序时，它都可以正常工作，但是当我在我的真实设备中运行此应用程序时，连接无法正确执行。我认为这是无法找出IP 10.0.2.2。

我将此 IP 地址更改为 192.168.1.9，这是我的系统在安装了 SmartFox 服务器的 LAN 中的 IP 地址。

请告诉我我犯了什么错误。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T12:42:06.337

我自己解决了我的问题。我在服务器的confi/server.xml 文件中创建了一个条目。

像这样：-

```
<serverSettings>
  <socketAddresses>
  <socket address="192.168.1.9" port="22" type="TCP"/>
   <socket address="192.168.1.9" port="22" type="UDP"/>
</serverSettings>
  </socketAddresses> 
```

或者您可以使用 Smartfox 服务器的管理模块添加此条目。此任务可以使用服务器配置部分完成。

# php - saveAll() 后如何在 cakephp 中创建自定义回调函数

> ID：10070374
> 
> 赞同：0
> 
> 时间：2012-04-09T07:44:37.553
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-model

我正在 cakephp 中开发一个应用程序。在这个应用程序中，我在许多不同的地方使用 saveAll() 函数来保存多条记录。需要的是创建一个回调函数，它在 saveAll() 执行后自动被调用，因为我认为 cakephp 中没有预定义的回调函数，它在 saveAll() 之后被调用。我知道有一个 afterSave() 函数，它在每次 save() 操作后被调用。有什么办法可以解决。任何建议将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:06:17.137

```
public function saveAll($data, $options) {
    $return = parent::saveAll($data, $options);

    // your callback code here

    return $return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:07:42.153

您可以在模型中重新定义 saveAll 函数，如下所示：

```
function saveAll($datos=null, $opciones = array()){
    parent::saveAll($datos, $opciones);
    $this->yourCallBackFunction();
}

function yourCallBackFunction(){
    //do something
} 
```

问候！

# java - 声明性春季事务未提交

> ID：10070378
> 
> 赞同：2
> 
> 时间：2012-04-09T07:45:00.447
> 
> 标签：java, spring, hibernate, spring-transactions

我有以下服务类：

```
public class UserLoginServiceImpl implements UserLoginService {

  private UserDAO dao;

  public UserLoginServiceImpl(UserDAO dao) {this.dao = dao; }

  public User login(String userName, String password) {
     User u = dao.findUserByCredentials(userName, password);
     if (u == null) {
         throw new UserNotFoundException();
     }
     return u;
}

public class UserManagementServiceImpl implements UserManagementService {

  private UserDAO dao;

  public UserManagementServiceImpl(UserDAO dao) { this.dao = dao; }

  public void createUser(User u) {
     dao.save(u);
  }
} 
```

我的服务接口位于*com.mysystem.services*包下，我的服务实现位于*com.mysystem.services.impl*包下。

我在春季使用休眠作为我的 jpa 实现和声明性事务。我的配置文件如下：

```
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
<property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<tx:advice id="txAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <tx:method name="*"/>
    </tx:attributes>
</tx:advice>

<aop:config>
    <aop:pointcut id="serviceMethod" expression="execution(* com.mysystem.services.impl.*.*(..))"/>
    <aop:advisor advice-ref="txAdvice" pointcut-ref="serviceMethod"/>
</aop:config>

<!--
    Beans
 -->
<bean id="userDao" class="com.mysystem.dao.UserDAOImpl">
    <constructor-arg ref="entityManagerFactory" />
</bean>

<bean id="userLoginService" class="com.mysystem.services.impl.UserLoginServiceImpl">
    <constructor-arg ref="userDao" />
</bean>
<bean id="userManagementService" class="com.mysystem.services.impl.UserManagementServiceImpl">
    <constructor-arg ref="userDao" />
</bean> 
```

最后，在我的代码的某处，我运行以下命令：

```
UserManagementService userManagementService = context.getBean(UserManagementService.class);
userManagementService.createUser(new User("test", "test"));

UserLoginService userLogginService = context.getBean(UserLoginService.class);
User user = userLogginService.login("test", "test"); 
```

这导致*login()*方法抛出*UserNotFoundException*因为它找不到之前由*createUser()*插入的用户，这意味着 hibernate 不会在方法调用之间刷新会话。我可以在控制台输出中验证此表单（我可以看到 hibernate 的*create*和*select*语句，但看不到*insert*）。

为什么在调用*createUser()*后没有立即提交事务？我在这里做错了什么？

编辑：

使用 @Transactional 注释而不是声明性事务有效。但是，使用 @Transactional 对我来说不是一个选择。我需要实现声明性事务。

下面是spring的调试输出：

```
13:03:18,174 DEBUG [main] jpa.JpaTransactionManager     - Creating new transaction with name [com.mysystem.services.impl.UserManagementServiceImpl.createUser]: PROPAGATION_REQUIRES_NEW,ISOLATION_DEFAULT
13:03:18,175 DEBUG [main] jpa.JpaTransactionManager     - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@1af6a711] for JPA transaction
Hibernate: 
    select
        nextval ('hibernate_sequence')
13:03:18,255 DEBUG [main] jpa.JpaTransactionManager     - Initiating transaction commit
13:03:18,255 DEBUG [main] jpa.JpaTransactionManager     - Committing JPA transaction on EntityManager [org.hibernate.ejb.EntityManagerImpl@1af6a711]
13:03:18,256 DEBUG [main] jpa.JpaTransactionManager     - Closing JPA EntityManager [org.hibernate.ejb.EntityManagerImpl@1af6a711] after transaction

    13:03:18,263 DEBUG [main] jpa.JpaTransactionManager     - Creating new transaction with name [com.mysystem.services.impl.UserLoginServiceImpl.login]: PROPAGATION_REQUIRES_NEW,ISOLATION_DEFAULT
    13:03:18,263 DEBUG [main] jpa.JpaTransactionManager     - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@1533badd] for JPA transaction
    Hibernate: 
        /* 
    from
        com.mysystem.domain.User u 
    where
        u.userName = :userName 
        and u.password = :password */ select
            user0_.id as id0_,
            user0_.password as password0_,
            user0_.userName as userName0_ 
        from
            Users user0_ 
        where
            user0_.userName=? 
            and user0_.password=? limit ?
    13:03:18,374 TRACE [main] sql.BasicBinder     - binding parameter [1] as [VARCHAR] - test
    13:03:18,374 TRACE [main] sql.BasicBinder     - binding parameter [2] as [VARCHAR] - test
    13:03:18,379 DEBUG [main] jpa.JpaTransactionManager     - Initiating transaction commit
    13:03:18,379 DEBUG [main] jpa.JpaTransactionManager     - Committing JPA transaction on EntityManager [org.hibernate.ejb.EntityManagerImpl@1533badd]
    13:03:18,379 DEBUG [main] jpa.JpaTransactionManager     - Closing JPA EntityManager [org.hibernate.ejb.EntityManagerImpl@1533badd] after transaction 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:37:35.250

你可以试试这个。

```
<tx:advice id="txAdvice" transaction-manager="transactionManager">
    <tx:attributes>

        <tx:method name="createUser" propagation="REQUIRES_NEW" />
    </tx:attributes>
</tx:advice> 
```

# android - 如何以编程方式在 RelativeLayout 中添加 LinearLayout？

> ID：10070381
> 
> 赞同：0
> 
> 时间：2012-04-09T07:45:22.363
> 
> 标签：android, android-layout

我有一个由 ImageView 和 TextView 组成的 RelativeLayout。现在，我想向这个RelativeLayout 添加一个LinearLayout，它应该在TextView 下方对齐。现在，LinearLayout 已添加到 RelativeLayout，但它未在 TextView 下方对齐。这是我的代码：

```
void addRatingToImage(RelativeLayout relativelLayout, Movies movieObject) {
    ImageView ratingImageView;
    LinearLayout ratingLayout = new LinearLayout(mContext);
    ratingLayout.setOrientation(LinearLayout.HORIZONTAL);

    double roundedRating = roundUpRating(Double.parseDouble(movieObject.mRating));
    for(int i = 0; i < 5; i++) {                        //TODO: Check 
        ratingImageView = new ImageView(mContext);
        if(i < roundedRating) {
            ratingImageView.setBackgroundResource(R.drawable.star_2);

            ratingLayout.addView(ratingImageView);
        }
        else {
            ratingImageView.setBackgroundResource(R.drawable.star_1);
            ratingLayout.addView(ratingImageView);
        }

    }

    RelativeLayout.LayoutParams ratingLayoutParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

    TextView movieNameTextView = (TextView)relativelLayout.getChildAt(2);
    ratingLayoutParams.addRule(RelativeLayout.BELOW, movieNameTextView.getId());

    ratingLayout.setLayoutParams(ratingLayoutParams);

    relativelLayout.addView(ratingLayout);
} 
```

我在这里有一个疑问。当将 RelativeLayout.BELOW 应用于嵌套在 RelativeLayout 中的不同类型的布局时，它是否有效？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T08:02:47.587

是的，`RelativeLayout.BELOW`会工作。`RelativeLayout`无论子视图类是什么，它都被父级识别。

根据你的问题，我想这`RelativeLayout`是因为你已经设置`fill_parent`了你`TextView movieNameTextView`的布局宽度。

# objective-c - 连接 SSL 证书和私钥以建立安全连接之间的终端错误：

> ID：10070391
> 
> 赞同：16
> 
> 时间：2012-04-09T07:46:45.287
> 
> 标签：objective-c, openssl, apple-push-notifications

我正在尝试在我的应用程序中进行推送通知并点击此链接 [http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

我的系统已成功连接到 telnet，但是当我输入连接 ssl 证书和私钥的查询时，发现错误

```
$ openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert apns-dev-cert.pem -key apns-dev-key.pem
unable to load client certificate private key file
1301:error:0906D06C:PEM routines:PEM_read_bio:no start line:/SourceCache/OpenSSL098/OpenSSL098-44/src/crypto/pem/pem_lib.c:648:Expecting: ANY PRIVATE KEY 
```

任何人都可以告诉我什么类型的错误以及它的解决方案是什么？

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-13T16:52:21.730

起初我也面临这个问题。

我们有两个文件

1) 一个`aps_development.cer`来自苹果 2) 另一个 1 来自`keychain access`我们刚刚创建的通用名称。

之后，两者都将其转换为`.pem`文件。例如，`cert.pem`和`key.pem`。之后使用以下命令组合这两个文件

```
cat cert.pem key.pem > ck.pem 
```

起初我使用下面的命令打开ssl。

```
openssl s_client -connect gateway.sandbox.push.apple.com:2195
    -cert cert.pem -key key.pem 
```

这使我返回了您提到的错误。之后我尝试使用

```
openssl s_client -connect gateway.sandbox.push.apple.com:2195
    -cert cert.pem -key ck.pem 
```

然后它已经工作了。希望这可以帮助。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-17T08:12:23.293

以下命令足以验证密钥/证书：

```
openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert push_development.pem 
```

关键部分是在从 Keychain Access 导出 .p12 时选择**证书**和**私钥**（您将被要求输入 3 个密码，一个用于 .p12，一个用于证书，一个用于私钥）。

要将 .p12 转换为 .pem，请按照[Apple](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ProvisioningDevelopment.html#//apple_ref/doc/uid/TP40008194-CH104-SW6)的说明进行操作：

```
openssl pkcs12 -in CertificateName.p12 -out CertificateName.pem -nodes 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-30T10:15:22.887

我在为企业分发生成 PEM 文件时遇到了同样的问题，但后来我发现我针对***iPhone 分发证书***密钥生成了一个 p12 文件，尽管我应该针对***Apple Production iOS Push Servies***密钥生成 p12。如果有人使用了分发密钥，希望这可以解决问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-24T05:22:18.470

您好请按照以下命令进行操作。第1步 `openssl pkcs12 -clcerts -nokeys -out developer_key.pem -in developer_key.p12`

注意：只需在终端上拖动文件路径...

第2步 `openssl pkcs12 -nocerts -out apns_key.pem -in apns_key.p12`

第三步 `openssl pkcs12 -in developer_key.p12 -out developer_key.pem -nodes -clcerts`

第4步 `openssl pkcs12 -in apns_key.p12 -out apns_key.pem -nodes -clcerts`

第 5 步 `cat apns_key.pem developer_ket.pem >developer.pem`

对分发证书执行相同的步骤

创建 developer.pem 和 distribution.pem 后

请在以下命令中验证这两个文件。

Step6 `openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert developer.pem -debug -showcerts -CAfile "Entrust.net.Certification Authority (2048).pem`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-14T16:49:50.643

通知是**通行短语必须超过 3 个字符。**

我刚刚修复了密码短语是**1234** :D

# exception - groovyPagesTemplateEngine 在石英作业中失败并出现错误

> ID：10070392
> 
> 赞同：0
> 
> 时间：2012-04-09T07:46:47.113
> 
> 标签：exception, grails, groovy, quartz-scheduler, template-engine

我们在我们的应用程序中使用 Quartz 调度来调度作业以生成和发送自审核电子邮件。
我正在尝试使用 GroovyPagesTemplateEngine 从电子邮件模板生成处理后的 emailBody。当处理不使用 Quartz 调度时，emailTemplate 被正确处理成 EmailBody。但是，当使用 Quartz 运行作业进行电子邮件模板处理时

```
groovyPagesTemplateEngine is failing in quartz job with error
[12:10:55 AM] Mandar: java.lang.IllegalStateException: TemplateEngine not initialised correctly, no [resourceLoader] specified! 
```

这就是我想要做的

```
def getInfo(){
MockHttpServletRequest servletRequest = new MockHttpServletRequest()

    GrailsWebRequest grailsWebRequest = new GrailsWebRequest(servletRequest, new MockHttpServletResponse(), new MockServletContext())
    grailsWebRequest.setAttribute(GrailsApplicationAttributes.WEB_REQUEST, grailsWebRequest, 0)
    RequestContextHolder.requestAttributes = grailsWebRequest

    GroovyPagesTemplateEngine engine = new GroovyPagesTemplateEngine()

    StringWriter sw = new StringWriter()
    PrintWriter pw = new PrintWriter(sw)

    engine.createTemplate('myteplate').make(model).writeTo(pw)
    println sw.toString()
    return sw.toString()
} 
```

我知道 Quartz 调度程序没有与之关联的 WebRequest。我认为电子邮件处理因此而失败。如何在计划作业运行时处理电子邮件模板以生成 emailBody 内容，而不是通过从 UI 登录到应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T01:52:24.627

[您可以尝试使用http://www.intelligrape.com/blog/2010/12/27/request-mocking-to-use-groovypagestemplateengine-in-backend-threads/](http://www.intelligrape.com/blog/2010/12/27/request-mocking-to-use-groovypagestemplateengine-in-backend-threads/)中提到的步骤

如果您使用的是 Grails 2.0.x，您将获得一个名为 groovyPageRenderer 的 bean，它也可以在 Web 请求的上下文之外使用。更多详情， http: [//mrhaki.blogspot.in/2012/03/grails-goodness-render-gsp-views-and.html](http://mrhaki.blogspot.in/2012/03/grails-goodness-render-gsp-views-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:08:09.977

resourceLoader 没有在 groovyPagesTemplateEngine 中初始化，因为您只是直接创建它的新实例。相反，您应该让 Spring 的依赖注入为您完成这项工作。

将以下行添加到您的服务中：

```
class YourService {

    def groovyPagesTemplateEngine

    def getInfo(){
      GroovyPagesTemplateEngine engine = groovyPagesTemplateEngine
      //your code here
    }
} 
```

# c# - 由于以下错误，检索具有 CLSID {000209FF-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80070005

> ID：10070396
> 
> 赞同：0
> 
> 时间：2012-04-09T07:47:05.850
> 
> 标签：c#, asp.net

我在“控制面板 - 管理工具 - 组件服务 - 计算机 - 我的电脑 - DCOM 配置”下没有找到 Microsoft Word 文档，然后如何授予 microsoft word 和 excel 的权限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:50:28.717

阅读加载这篇文章，并了解为什么你甚至不应该尝试它，

[http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:03:51.330

MS 不支持在服务器方案（如 ASP.NET、Windows 服务等）中使用 Office 互操作 - 请参阅[http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757# KB2](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)

此外，自 Windows Vista 以来已经发生了一些与安全相关的更改，这基本上使得在 Windows 服务中做任何“类似桌面”的事情变得非常困难（IIS/ASP.NET 在这方面只是 Windows 服务的一个特例）。

有几个库（免费和商业）来处理 Office 文件（没有 Office Interop）。

MS 提供免费的 OpenXML SDK V 2.0 - 请参阅[http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx](http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx)（仅像 DOCX、XLSX 等较新的格式）。

*Excel*

另一个免费选项参见[http://www.codeproject.com/KB/office/OpenXML.aspx](http://www.codeproject.com/KB/office/OpenXML.aspx)（仅限 XLSX）

如果您需要更多处理旧 Excel 版本（如 XLS，不仅是 XLSX）、渲染、创建 PDF、公式等，那么有不同的免费和商业库，如[ClosedXML](http://closedxml.codeplex.com/)（免费，仅限 XLSX）、[EPPlus](http://epplus.codeplex.com/)（免费，仅限 XLSX） , [Aspose.Cells](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx) , [SpreadsheetGear](http://www.spreadsheetgear.com/) , [LibXL](http://www.libxl.com/)和[Flexcel](http://www.tmssoftware.com/site/flexcelnet.asp)等。

*单词*

*   [Aspose.Words](http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx)
*   [Gembox.Documents](http://www.gemboxsoftware.com/document/overview)

# c# - C# 和 java 之间的输出差异

> ID：10070398
> 
> 赞同：1
> 
> 时间：2012-04-09T07:47:30.507
> 
> 标签：c#, java

我正在尝试为 C# 中的函数编写 Java 等效项。代码如下。

在 C# 中：

```
byte[] a = new byte[sizeof(Int32)];
readBytes(fStream, a, 0, sizeof(Int32)); //fstream is System.IO.Filestream
int answer = BitConverter.ToInt32(a, 0); 
```

在 Java 中：

```
InputStream fstream = new FileInputStream(fileName);
DataInputStream in = new DataInputStream(fstream);
BufferedReader br = new BufferedReader(new InputStreamReader(in));
byte[] a = new byte[4];
readBytes(in, a, 0, 4);
int answer = byteArrayToInt(a); 
```

Java 和 C#：

```
int readBytes(Stream stream, byte[] storageBuffer, int offset, int requiredCount)
        {
            int totalBytesRead = 0;
            while (totalBytesRead < requiredCount)
            {
                int bytesRead = stream.Read(
                                storageBuffer,
                                offset + totalBytesRead,
                                requiredCount - totalBytesRead);
                if (bytesRead == 0)
                {
                    break; // while
                }

                totalBytesRead += bytesRead;
            }

            return totalBytesRead;
        } 
```

输出：

```
In C#: answer = 192  (Correct)  
In JAVA: answer = -1073741824 
```

两者有区别。我从一个文件输入流中读取，该流被编码并解析前四个字节。C# 代码似乎产生 192 是正确答案，而 Java 产生 -1073741824 是错误答案。为什么以及如何？

**编辑**

这是我的 byteArrayToInt

```
public static int byteArrayToInt(byte[] b, int offset) {
        int value = 0;
        for (int i = 0; i < 4; i++) {
            int shift = (4 - 1 - i) * 8;
            value += (b[i + offset] & 0x000000FF) << shift;
        }
        return value;
    } 
```

**解决** 方案 byteArrayToInt 的正确解决方案

```
public static int byteArrayToInt(byte[] b) 
    {
        long value = 0;
        for (int i = 0; i < b.length; i++)
        {
           value += (b[i] & 0xff) << (8 * i);
        }
        return (int) value;
    } 
```

这给出了正确的输出

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T07:53:40.350

在 java 中字节是有符号的，所以你在 java 字节中的 -64 是二进制等效于 c# 字节中的 192（192 == 256 - 64）。

问题很可能出在`byteArrayToInt()`您假设它在转换期间未签名的地方。

一个简单的

```
 `b & 0x000000FF` 
```

在这种情况下可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T07:56:43.447

Java 的字节对象按照 soulcheck 所写的方式进行签名。无符号 8 位整数上 192 的二进制值将是`11000000`.

如果您正在使用带符号格式读取此值，则前导 1 将表示负数。这意味着`11000000`变为`negative 01000000`，即 -64。

# mysql - mysql root密码忘记了

> ID：10070401
> 
> 赞同：16
> 
> 时间：2012-04-09T07:47:57.360
> 
> 标签：mysql, passwords, root, reset

我有一段时间没有使用 PHP MySQL，现在我需要再次使用它。但问题是我忘记了 MySQL 控制台的密码。尝试登录 PHPMyAdmin 时出现错误 #1045。

在 MySQL 站点我看到一篇文章如何重置 root 密码（[http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html#resetting-permissions-windows](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html#resetting-permissions-windows)）

步骤是

```
create a mysql-init.txt file containing UPDATE mysql.user SET Password=PASSWORD('newpass') WHERE User='root';
FLUSH PRIVILEGES; 
```

我把它保存为`C:\me\mysql-init`

在命令提示符下我写了——

```
C:\wamp\bin\mysql\mysql5.5.8\bin\mysqld --init-file=C:\me\mysql-init.txt 
```

我也尝试使用双反斜杠..但它不起作用。MySQL 控制台要求输入密码，但没有使用新密码。我究竟做错了什么？我那里有几张桌子。怎么办？

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2019-11-20T22:09:12.843

以下是要遵循的步骤：

1.  使用以下命令找到 MySQL 配置文件：`$ mysql --help | grep -A 1 "Default options"`

[![在此处输入图像描述](../Images/3c028246bd1a9c21ae050d4df489d930.png)](https://i.stack.imgur.com/QZkd3.png)

在 Ubuntu 16 上，文件位置通常是`/etc/mysql/mysql.conf.d/mysqld.cnf`

2.  使用以下命令编辑配置文件：`$ sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf`

3.  `skip-grant-tables`在块下添加`[mysqld]`并保存更改。

[![在此处输入图像描述](../Images/807bd29600df19dc0d2a3fafff67f985.png)](https://i.stack.imgur.com/V3bbq.png)

4.  使用以下命令重启 MySQL 服务：`sudo service mysql restart`

5.  查看 MySQL 服务状态：`sudo service mysql status`

[![在此处输入图像描述](../Images/5cd835dd1b42a4131b11389b9798418f.png)](https://i.stack.imgur.com/CUbf4.png)

6.  使用以下命令登录 mysql：`$ mysql -u root`

7.  并更改`root`密码：

> mysql> 刷新权限；
> 
> mysql> ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'MyNewPass';

8.  `skip-grant-tables`通过删除行或用`#`（哈希）注释来恢复 MySQL 配置文件的更改。

9.  最后重新启动 MySQL 服务，一切顺利。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-22T06:22:57.577

我无法获得`mysqld`Adelave 的工作答案。但这对我有用

使用 --skip-grant-tables 停止和启动 mysql

```
service mysql.server stop
service mysql.server start --skip-grant-tables 
```

然后在没有用户名/密码的情况下连接到您的 mysqld

```
mysql 
```

然后在mysql命令行上更新密码

```
 mysql> UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root'; 
 mysql> FLUSH PRIVILEGES;
 mysql> \q 
```

然后正常重启mysql

```
 service mysql.server restart 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-09T07:52:30.677

尝试使用 --skip-grant-tables 启动 mysql

> ```
> mysqld --skip-grant-tables 
> ```

然后使用 mysql 命令行连接到没有用户名/密码的 mysqld

> `shell> mysql`

然后发出命令

```
> mysql> UPDATE mysql.user SET Password=PASSWORD('MyNewPass')
>        WHERE User='root'; mysql> FLUSH PRIVILEGES; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-11T16:17:53.747

如果其他答案没有帮助，您可以尝试卸载/重新安装 mysql。它适用于我的 ubuntu 服务器：

```
$sudo apt-get purge mysql*
$sudo apt-get autoremove
$sudo apt-get autoclean 
```

更新分发

```
$sudo apt-get dist-upgrade 
```

并重新安装

```
$sudo apt-get install mysql-server 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-02T23:14:36.780

> **Mac OS 莫哈韦沙漠**

```
$ brew services stop mysql

$ pkill mysqld

// warning: deletes all tables
$ rm -rf /usr/local/var/mysql/

$ brew postinstall mysql

$ brew services restart mysql

$ mysql -u root
Welcome to the MySQL monitor.  Commands end with ; or \g.

mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'p4ssword';
Query OK, 0 rows affected (0.04 sec)

mysql> exit
Bye 
```

然后你恢复正常的开发。

```
$ sudo mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g. 
```

我不喜欢`root`在我的`.env`文件中看到这个词，所以我通常会在创建网站后这样做`www.hockeysticks.net`：

```
#
CREATE DATABASE hockeysticks;

CREATE USER 'hockeysticks'@'localhost' IDENTIFIED BY 'hockeysticks';
GRANT ALL PRIVILEGES ON hockeysticks.* TO 'hockeysticks'@'localhost'; 
```

然后你的 localdev`.env`文件很简单：

```
DB_DATABASE=hockeysticks
DB_USERNAME=hockeysticks
DB_PASSWORD=hockeysticks 
```

**注意**：如果您需要保留数据库，请使用该`skip-grant-tables`方法。这有 3 个困难的部分：

1.  确保 MySQL 已停止，因此您可以使用以下命令重新启动它`skip-grant-tables`

2.  确保您的密码更新 SQL 语法对于您的 MySQL 版本是正确的

3.  确保在查询末尾附加`FLUSH PRIVELEGES;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-17T17:00:37.350

**使用 windows 命令提示符，您可以更改密码**

1.  转到`windows+R`并运行`services.msc`然后停止 MySQL 服务并通过右键单击查看 MySQL 的属性并 `--defaults-file="C:\ProgramData\MySQL\MySQL Server 8.0\my.ini"`根据需要复制路径。
2.  `reset.txt`使用文本创建文本文件`ALTER USER 'root'@'localhost' IDENTIFIED BY 'Your New Password';`并保存在`C`驱动器中。 [![在此处输入图像描述](../Images/df9f13adc712d65bf635fd5bd7152b80.png)](https://i.stack.imgur.com/Itrsc.png)
3.  以管理员身份打开命令提示符，然后更改安装 MySQL 的目录`"C:\Program Files\MySQL\MySQL Server 8.0\bin"`。
4.  输入命令`mysqld --defaults-file="C:\ProgramData\MySQL\MySQL Server 8.0\my.ini" --init-file=C:\\reset.txt`

[![在此处输入图像描述](../Images/f4a80c09b16df4aec21d972aa77f3a61.png)](https://i.stack.imgur.com/6L9HI.png)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-05-08T11:31:03.900

## 使用 SQLYog 你可以执行命令

*   用户创建

* * *

```
CREATE USER 'tester'@'localhost' IDENTIFIED BY 'Pass123#d' 
```

*   授权

* * *

```
GRANT ALL PRIVILEGES ON sakila.* TO 'tester'@'localhost' 
```

*   在 MySQL 8.0 中更改密码

* * *

```
ALTER USER 'tester'@'localhost' IDENTIFIED BY 'Pass123#d' 
```

（或者如果您知道 authentication_string 直接将其设置为更新）

```
UPDATE mysql.user 
    SET authentication_string='*F9B62579F38BE95639ACB009D79427F2D617158F'  
WHERE USER='root'*** 
```

在较低版本的mysql中更改密码

```
GRANT USAGE ON *.\* TO 'tester'@'localhost' IDENTIFIED BY 'Pass123#d'
SET PASSWORD FOR 'tester'@'localhost' = PASSWORD('Pass123#d');** 
```

# mysql - 如何使用mysql将查询结果存储在变量中

> ID：10070406
> 
> 赞同：106
> 
> 时间：2012-04-09T07:48:19.080
> 
> 标签：mysql, database, variables, set

```
SET @v1 := SELECT COUNT(*) FROM user_rating;
SELECT @v1 
```

当我使用`set`变量执行此查询时，会显示此错误。

```
Error Code : 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use
near 'SELECT count(*) FROM user_rating' at line 1

Execution Time : 00:00:00:000
Transfer Time  : 00:00:00:000
Total Time     : 00:00:00:000

(1 row(s) returned)
Execution Time : 00:00:00:343
Transfer Time  : 00:00:00:000
Total Time     : 00:00:00:343 
```

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-04-09T07:50:38.840

用括号括住该选择。

```
SET @v1 := (SELECT COUNT(*) FROM user_rating);
SELECT @v1; 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-04-25T00:19:07.443

此外，如果您想通过一个查询一次设置多个变量，您可以使用另一种语法来设置变量，如下所示`SELECT @varname:=value`：

一个实际的例子：

```
SELECT @total_count:=COUNT(*), @total_price:=SUM(quantity*price) FROM items ... 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-27T22:45:53.573

用这个

```
 SELECT weight INTO @x FROM p_status where tcount='value' LIMIT 1; 
```

经过测试并且工作正常...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-12-17T10:37:27.770

```
Select count(*) from table_name into @var1; 
Select @var1; 
```

# javascript - 触摸图表 2 - 如何在“时间”类型的月份中“分组”

> ID：10070408
> 
> 赞同：1
> 
> 时间：2012-04-09T07:49:00.087
> 
> 标签：javascript, sencha-touch-2, sencha-charts

我想在月份类型中分组：'时间'。
像 Jan,Feb... 不重复的月份数据 这是我到目前为止所拥有的，

```
axes: [{
            type: 'Time',
            position: 'bottom',
            fields: ['date'],
            dateFormat: ' M ',
            label: {
                rotate: {
                    degrees: 90
                }
            }
        }], 
```

# node.js - CSRF 中间件惹麻烦 Node.JS + Express

> ID：10070412
> 
> 赞同：4
> 
> 时间：2012-04-09T07:49:34.957
> 
> 标签：node.js, express, csrf, middleware

根据之前的 SO 问题，已成功使 csrf 中间件快速工作。它生成令牌很好，但它拒绝所有表单提交。

我能看到的唯一可能的冲突是我使用 redis 作为带有 connect-redis 的会话存储并将 socket.io 插入会话，但我已经注释掉了套接字位，它仍然不能很好地发挥作用。

这是我调用中间件的顺序，这里可能有问题吗？

（咖啡脚本）

```
app.configure ->
    app.set 'views', __dirname + '/views'
    app.set 'view engine', 'jade'
    app.use express.bodyParser()
    app.use express.methodOverride()
    app.use express.cookieParser()
    app.use express.session
        secret: "itsasecret"
        store: sessionStore
    app.use express.csrf()
    app.dynamicHelpers
        token: (req, res) ->
        req.session._csrf
    app.use app.router
    app.use express.static(__dirname + '/public') 
```

这是响应发布数据的路由。

（这不是开发代码，只是我学习节点我很清楚如果我把它放到网上这将是一个怪物）

```
app.post '/admin/logintry', (req, res) ->
    if req.body.username is 'Tim' and req.body.password is 'TempPassword'
        req.session.adminIn = true
        res.redirect '/admin/home'
    else
        res.redirect '/admin/login?failed=true' 
```

这是在表单页面上到达浏览器的 HTML：

```
<input type="hidden" token="5ODFxml1QAhQvOmq1QE6Qd7n"> 
```

从“/admin/logintry”收到的响应：

```
Forbidden 
```

Node、Express 和 SO 的新手，最近才正确学习了 javascript，甚至不确定从哪里开始寻找问题。任何帮助，即使只是在哪里开始挖掘也非常感谢。

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T08:14:58.707

如果您查看[Connect-csrf 文档](http://www.senchalabs.org/connect/middleware-csrf.html)，`input`令牌的标记应如下所示：

```
<input type="hidden" name="_csrf" value="{token}" /> 
```

因此，使用您的示例令牌：

```
<input type="hidden" name="_csrf" value="5ODFxml1QAhQvOmq1QE6Qd7n" /> 
```

目前 Connect（Express 在后台使用 Connect）正在尝试查找名称为“_csrf”的字段，但找不到它，因为它在您的表单中不存在。因此，它禁止访问。

# linux - 将给定文件的首字母转换为小写

> ID：10070415
> 
> 赞同：9
> 
> 时间：2012-04-09T07:49:46.500
> 
> 标签：linux, bash, shell

我想将每行的第一个字母转换为小写直到文件末尾。如何使用 shell 脚本来做到这一点？

我试过这个：

```
plat=`echo $plat |cut -c1 |tr [:upper:] [:lower:]``echo $plat |cut -c2-` 
```

但这只会将第一个字符转换为小写。

我的文件如下所示：

```
Apple
Orange
Grape 
```

预期结果：

```
apple
orange
grape 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T08:01:23.563

你可以这样做`sed`：

```
sed -e 's/./\L&/' Shell.txt 
```

（可能更安全

```
sed -e 's/^./\L&\E/' Shell.txt 
```

如果你想扩展它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T08:01:44.583

尝试：

```
plat=`echo $plat |cut -c1 |tr '[:upper:]' '[:lower:]'``echo $plat |cut -c2-` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T08:23:57.413

纯 Bash 4.0+ ，参数替换：

```
>"$outfile"                         # empty output file
while read ; do
    echo "${REPLY,}" >> "$outfile"  # 1\. character to lowercase
done < "$infile"  
mv "$outfile" "$infile" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T13:44:01.360

这是一个仅使用 POSIX sed 功能的 sed 命令：

```
sed -e 'h;s,^\(.\).*$,\1,;y,ABCDEFGHIJKLMNOPQRSTUVWXYZ,abcdefghijklmnopqrstuvwxyz,;G;s,\
.,,' 
```

这是两行，第一行以反斜杠结尾以引用换行符。

# c# - WP7 访问手机文件和文件夹

> ID：10070418
> 
> 赞同：6
> 
> 时间：2012-04-09T07:49:58.480
> 
> 标签：c#, windows, windows-phone-7

如何从手机内存而不是应用程序内存（即隔离存储）访问文件和文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T08:52:45.083

这不可能。每个应用程序都有自己的目录和在其中操作的权限。没有机会访问该目录之外的文件。

您可以使用启动器和选择器从其他地方获取一些数据（如联系人列表或照片），但您无法直接访问这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:46:51.977

有一个叫做IsolatedStorageExplorer的东西-> [http://wp7explorer.codeplex.com/](http://wp7explorer.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:02:35.260

我看到了从应用程序安装目录（不是隔离存储）加载 SQL 数据库的选项。有关详细信息，请参阅[http://blog.arsanth.com/index.php/2011/06/02/working-with-pre-populated-sql-ce-databases-in-wp7/](http://blog.arsanth.com/index.php/2011/06/02/working-with-pre-populated-sql-ce-databases-in-wp7/)。这可以使用连接字符串来完成，例如`datasource=’appdata:/db.sdf’; mode=’read only'`。您可能可以执行类似的操作来从应用程序安装目录中读取文件。

# jquery - 需要 jquery .load 建议吗？

> ID：10070420
> 
> 赞同：0
> 
> 时间：2012-04-09T07:50:21.870
> 
> 标签：jquery, load

我使用 .load 加载菜单和页面内容。首先应该加载菜单，当单击一个菜单项时，它应该加载 url 和“容器”中的“内容”。

这行得通，但是出了点问题，因为它弄乱了下面的 loadFacebook 函数，所以我需要更改它。

```
$(document).ready(function() {
    loadPage();

});
function loadPage(url) {

    $('#guiden_menyn').load('manmade/guiden/guiden_menyn.html #content',
            hijackLinks);

    $('#container').load(url + ' #content', hijackLinks);

}
function hijackLinks() {
    $('#guiden_menyn a').click(function(e) {
        e.preventDefault();
        loadPage(e.target.href);

    });

} 
```

菜单“guiden_menyn.html”中的链接如下所示：

```
<a  class="lank" href="manmade/guiden/tipsa.html">

function loadFacebook() {

    $('#container').load(
            'http://www.manmade.se/manmade/guiden/facebook_onweb.html',
            function() {
                FB.XFBML.parse();
            });
} 
```

也许我需要设置一个 onclick 来在链接上运行该功能，而不是“$('#guiden_menyn a')....”？

应该怎么样，有什么建议，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:38:02.117

使用这样的函数Here is html

```
<a  class="lank" href="manmade/guiden/tipsa.html"> 
```

为每个超链接提供 lank 类 然后

```
$('.lank').click(function(){
      var link = $(this).attr('href');
      loadPage(link );
}); 
```

# ios - iTunes Connect 上传错误“图标必须为 PNG 格式”

> ID：10070421
> 
> 赞同：0
> 
> 时间：2012-04-09T07:50:33.550
> 
> 标签：ios, xcode, app-store, xcode4.3

我在向应用商店提交更新版本的应用时遇到了一些问题。版本号 此更新版本为 1.1，旧版本已获批准。

当我尝试上传此版本时，它失败并出现错误“1.1 图标必须为 PNG 格式”。我已经检查了图标及其格式是否正确。实际上它与我用来提交应用程序早期版本的图标完全相同。我正在使用带有 X-Code 4.3.2 的 MAC OX 10.7.3。

我也尝试使用 Application Loader 上传，但它也给出了同样的错误。

有谁知道这里可能是什么问题？

![我在上传时遇到的错误的屏幕抓取](../Images/8bfd02d932c66e150337eaa548a7bf4e.png)

# javascript - Internet Explorer 中的 Javascript 未实现错误

> ID：10070424
> 
> 赞同：4
> 
> 时间：2012-04-09T07:50:41.323
> 
> 标签：javascript, asp.net, internet-explorer, radio-button

我在gridview 中使用了一个javascript 代码进行radiobtn 检查。该代码在Firefox浏览器中运行良好。但在 Internet Explorer (IE) 中，代码不起作用，错误提示未实现 Javascript。我的 JavaScript 代码是

```
<script type="text/javascript">
    function CheckOtherIsCheckedByGVID(rb) {

        var isChecked = rb.checked;
        var row = rb.parentNode.parentNode;
        if (isChecked) {
            row.style.backgroundColor = '#C4DFFB';
            row.style.color = 'black';
        }
        var currentRdbID = rb.id;
        parent = document.getElementById("<%= grdEventDetails.ClientID %>");
        var items = parent.getElementsByTagName('input');

        for (i = 0; i < items.length; i++) {
            if (items[i].id != currentRdbID && items[i].type == "radio") {
                if (items[i].checked) {
                    items[i].checked = false;
                    items[i].parentNode.parentNode.style.backgroundColor = 'white';
                    items[i].parentNode.parentNode.style.color = '#696969';
                }
            }
        }
    }
</script> 
```

我在gridview代码中的实现是

```
 <asp:TemplateField>
     <ItemStyle HorizontalAlign="Left" />
    <ItemTemplate>
   <asp:RadioButton ID="grdRdo" runat="server"
 onclick="javascript:CheckOtherIsCheckedByGVID(this);" />
  </ItemTemplate>
   </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:57:01.527

尝试重命名父变量。这听起来像是与先前存在的环境发生冲突的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:56:40.357

尝试在 Page_Load 函数上添加“onclick”事件：

```
grdRdo.Attributes.Add("onclick", "CheckOtherIsCheckedByGVID(this)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T01:16:47.353

改变

```
parent = document.getElementById("<%= grdEventDetails.ClientID %>"); 
```

到：

```
var parent = document.getElementById("<%= grdEventDetails.ClientID %>"); 
```

当您声明变量时，IE 似乎喜欢其中的“var”。

# java - 编码为 UCS-2 Little Endian 的文件向 Java 报告 2x 太多行

> ID：10070431
> 
> 赞同：4
> 
> 时间：2012-04-09T07:51:09.573
> 
> 标签：java, character-encoding

我正在用一个简单的 Java 程序处理几个 txt 文件，我的第一步是计算每个文件的行数：

```
int count = 0;
br = new BufferedReader(new FileReader(myFile)); // myFile is the txt file in question
while (br.readLine() != null) {
    count++;
} 
```

对于我的一个文件，Java 计算的行数正好是实际行数的两倍！起初这让我很困惑。我在 Notepad++ 中打开了每个文件，可以看到错误计数的文件以与其他文件完全相同的方式结束每一行，带有 CR 和 LF。我又摸索了一下，发现我所有的“ok”文件都是 ANSI 编码的，而一个问题文件被编码为 UCS-2 Little Endian（我对此一无所知）。我在其他地方得到了这些文件，所以我不知道为什么以这种方式编码，但当然将其切换到 ANSI 解决了这个问题。

但现在好奇心依然存在。为什么编码会导致双行计数报告？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T08:01:29.310

很简单：如果您在读取 ​​UCS-2（或 UTF-16）文本（例如 ANSI，或任何 8 位编码）时应用了错误的编码，那么每隔一个字符就是一个 0x0。然后，这会将 CR-LF 分解为 CR-0-LF，这被视为两行更改（一个用于 CR，一个用于 LF）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-09T08:08:00.450

这就是问题：

```
new FileReader(myFile) 
```

这将使用平台默认编码。不要那样做。采用

```
new InputStreamReader(new FileInputStream(myFile), encoding) 
```

`encoding`文件的适当编码在哪里。您必须使用正确的编码，否则您将无法正确读取文件。不幸的是，这当然取决于你*知道*编码......

编辑：要回答为什么行被重复计算而不仅仅是“我该如何解决”的问题，请参阅 Lucero 的回答 :)

# java - 如何在 Tapestry 5 组件中获取父外壳的 clientId？

> ID：10070432
> 
> 赞同：0
> 
> 时间：2012-04-09T07:51:17.140
> 
> 标签：java, components, tapestry

我正在 Taperstry 5 下开发 ExtJS 组件模型。我尝试实现以下 API（.tml 代码）：

```
<t:extjs.viewport t:id="ddd" layout="border" width="500">
    <t:extjs.panel t:id="contentBody" title="Content Body" />
</t:extjs.viewport> 
```

在客户端，我希望收到以下内容：

```
Tapestry.onDOMLoaded(function() {
var ddd = Ext.create('Ext.container.Viewport', {
  "id" : "ddd",
  "layout" : "border",
  "width" : 500
});
var contentBody = Ext.create('Ext.panel.Panel', {
  "id" : "contentBody",
  "title" : "Content Body"
});
ddd.add(contentBody);
}); 
```

为了编写`ddd.add(contentBody);`子组件`contentBody`，应该知道封闭组件的 clientId `ddd`。

我怎么才能得到它？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:47:01.953

您应该能够使用 @InjectContainer 注入组件的直接容器并获取其客户端 ID：

```
@InjectContainer
private ClientElement container;

@AfterRender
void addScript() {
    String containerClientId = container.getClientId();
    //pass client ID to JavaScript
} 
```

# python - 如何使用python在字符串中一定数量的字符后插入空格？

> ID：10070434
> 
> 赞同：12
> 
> 时间：2012-04-09T07:51:55.953
> 
> 标签：python, string

我需要在字符串中的一定数量的字符之后插入一个空格。文本是一个没有空格的句子，需要在每 n 个字符后用空格分隔。

所以应该是这样的。

```
thisisarandomsentence 
```

我希望它返回为：

```
this isar ando msen tenc e 
```

我拥有的功能是：

```
def encrypt(string, length): 
```

无论如何在python上做这个？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-09T07:54:33.070

```
def encrypt(string, length):
    return ' '.join(string[i:i+length] for i in range(0,len(string),length)) 
```

`encrypt('thisisarandomsentence',4)`给

```
'this isar ando msen tenc e' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T08:06:33.360

使用[`itertools`石斑鱼食谱](http://docs.python.org/library/itertools.html#recipes)：

```
>>> from itertools import izip_longest
>>> def grouper(n, iterable, fillvalue=None):
        "Collect data into fixed-length chunks or blocks"
        # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
        args = [iter(iterable)] * n
        return izip_longest(fillvalue=fillvalue, *args)

>>> text = 'thisisarandomsentence'
>>> block = 4
>>> ' '.join(''.join(g) for g in grouper(block, text, ''))
'this isar ando msen tenc e' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-22T03:27:05.520

```
import re
(' ').join(re.findall('.{1,4}','thisisarandomsentence')) 
```

'这个 isar ando msen tenc e'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-28T18:50:52.807

```
import textwrap
def encrypt(string, length):
      a=textwrap.wrap(string,length)
      return a 
```

# java - 创建 TIFF 图像时出现 Java 堆空间错误

> ID：10070435
> 
> 赞同：0
> 
> 时间：2012-04-09T07:51:56.953
> 
> 标签：java, tiff, jai, geotiff

由于我是使用 JAI 处理 TIFF 的新手，因此我正在尝试使用浮点数据创建 6000*6000 的 RGB TIFF 图像。实际上该代码适用于 5000*5000 图像，但是当我增加大小时，我在行出现 Java 堆空间错误`tiledImage.setData(pattern);`

请告诉我用平铺概念创建 RGB/多波段 RIFF 图像是否是正确的方法。或者有什么方法可以创建？

## 错误：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at java.awt.image.DataBufferFloat.<init>(DataBufferFloat.java:53)
        at java.awt.image.ComponentSampleModel.createDataBuffer(ComponentSampleModel.java:409)
        at javax.media.jai.RecyclingTileFactory.createTile(RecyclingTileFactory.java:397)
        at javax.media.jai.PlanarImage.createWritableRaster(PlanarImage.java:1995)
        at javax.media.jai.TiledImage.createTile(TiledImage.java:998)
        at javax.media.jai.TiledImage.getWritableTile(TiledImage.java:1118)
        at javax.media.jai.TiledImage.setData(TiledImage.java:1241)
        at javaapplication17.Test3.main(Test3.java:69)
Java Result: 1 
```

## 编码：

```
public class Test3 {

    public static void main(String a[]) {
        int imageHeight = 6000;
        int imageWidth = 6000;
        WritableRaster raster;
        int[] bandOffsets = new int[3];
        bandOffsets[0] = 2;
        bandOffsets[1] = 1;
        bandOffsets[2] = 0;
        PixelInterleavedSampleModel sm = new PixelInterleavedSampleModel(DataBuffer.TYPE_FLOAT, imageWidth, imageHeight, 3, 3 * 6000, bandOffsets);
// Origin is 0,0.
        WritableRaster pattern = Raster.createWritableRaster(sm, new Point(0, 0));
        float[] bandValues = new float[3];
        bandValues[0] = 90;
        bandValues[1] = 45;
        bandValues[2] = 45;
       // Set values for the pattern raster.
        for (int y = 0; y < pattern.getHeight(); y++) {
            for (int x = 0; x < pattern.getWidth(); x++) {
                pattern.setPixel(x, y, bandValues);
                bandValues[1] = (bandValues[1] + 1) % 255;
                bandValues[2] = (bandValues[2] + 1) % 255;
            }
        }
        ColorModel colorModel = PlanarImage.createColorModel(sm);

        // Create a TiledImage using the SampleModel.
        TiledImage tiledImage = new TiledImage(0, 0, imageWidth, imageHeight, 0, 0, sm, colorModel);
        // Set the data of the tiled image to be the raster.
        tiledImage.setData(pattern);
        // Save the image on a file.
           JAI.create("filestore", tiledImage, "rgbpattern_test4.tif", "TIFF");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:54:44.423

简单的解决方案是使用 -Xmx 选项增加堆大小。

# hibernate - 是否可以延迟加载 @Formula 注释？

> ID：10070440
> 
> 赞同：16
> 
> 时间：2012-04-09T07:53:26.020
> 
> 标签：hibernate, jakarta-ee, annotations

我使用`@Formula`注释来获取计算属性。我需要的是那些用`@Formula`注释注释的字段/吸气剂应该被延迟加载。

这甚至可能吗？如果可以，怎么办？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T10:38:49.133

是的 。只需通过[@Basic(fetch=FetchType.LAZY)](http://docs.oracle.com/javaee/6/api/javax/persistence/Basic.html#fetch%28%29)`@Formula`注释属性的字段/获取器，并使用hibernate 提供的这个[ant 任务来为实体类执行字节码检测。](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/tool/instrument/javassist/InstrumentTask.html)否则，属性的 LAZY 加载将被静默忽略。`@Formula`

该[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/performance.html#performance-fetching-lazyproperties)包含有关如何使用此 ant 任务进行字节码检测的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-12T13:56:04.317

我在评论中看到您希望在没有字节码检测的情况下实现这一目标。这可以通过实现`FieldHandled`接口和修改惰性字段的 getter 和 setter 来实现。

**HBM**

```
<property name="deletable" type="true_false" lazy="true">
  <formula>(select something from other tables and such....)</formula>
</property> 
```

**JAVA**

```
import org.hibernate.bytecode.javassist.FieldHandled;
import org.hibernate.bytecode.javassist.FieldHandler;
public class Person implements FieldHandled {

/* allows lazy formulas without hibernate bytecode instrumentation */
private FieldHandler fieldHandler;
public FieldHandler getFieldHandler() { return fieldHandler; }
public void setFieldHandler(FieldHandler fieldHandler) { this.fieldHandler = fieldHandler; }

private Boolean deletable;

public void setDeletable(Boolean deletable) {
    if(fieldHandler!=null)
        fieldHandler.writeObject(this, "deletable", this.deletable, deletable);
    this.deletable = deletable;
}

public Boolean getDeletable() {
    if(fieldHandler!=null)
        return (Boolean)fieldHandler.readObject(this, "deletable", deletable);
    return deletable;
}
} 
```

另一个例子可以在[这里](http://justonjava.blogspot.com/2010/09/lazy-one-to-one-and-one-to-many.html)找到。但这是延迟加载一对一的关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-08T21:15:41.630

我尝试使用[BytecodeEnhancement（Maven 插件）](https://docs.jboss.org/hibernate/orm/5.0/topical/html/bytecode/BytecodeEnhancement.html)但不起作用。所以我做了这个：

1.  创建一个类（FooFormula.java），将其映射到具有两个字段的表，一个用于@id，另一个用于@Formula。

    ```
     @Entity
     @Table(name = "BAR_TABLE")
     public class FooFormula implements Serializable {

      private Long idBarTable;
      private Long formula;

      public FooFormula() {
        super();
      }

      public FooFormula(String idBarTable) {
          super();
          this.idBarTable = idBarTable;
      }    

      @Id
      @Column(name = "ID_BAR_TABLE", unique = true, nullable = false, length = 20)
      public Long getIdBarTable() {
          return this.sitidBarTableCodigo;
      }

      public void setIdBarTable(Long idBarTable) {
          this.idBarTable = idBarTable;
      }

      @Formula("(SELECT 1 from DUAL)")
      public Long getFormula() {
        return formula;
      }

      public void setFormula(Long formula) {
        this.formula = formula;
      }
    } 
    ```

2.  使用 @ManyToOne 和 @JoinColumn 将此新类 (FooFormula.java) 作为字段添加到您的实体

    ```
     @Entity
     @Table(name = "BAR_TABLE")
     public class Bar implements Serializable {

      private Long idBarTable;
      private Long somOtherColumn;
      private FooFormula fooFormula;

      public Bar() {
        super();
      }

      public Bar(String idBarTable) {
          super();
          this.idBarTable = idBarTable;
      }    

      @Id
      @Column(name = "ID_BAR_TABLE", unique = true, nullable = false, length = 20)
      public Long getIdBarTable() {
          return this.sitidBarTableCodigo;
      }

      public void setIdBarTable(Long idBarTable) {
          this.idBarTable = idBarTable;
      }

      @ManyToOne(fetch = FetchType.LAZY)
      @JoinColumn(name = "ID_BAR_TABLE", nullable = false, insertable=false, updatable=false)
      public FooFormula getFooFormula() {
        return fooFormula;
      }

      public void setFooFormula(FooFormula fooFormula) {
        this.fooFormula = fooFormula;
      }
    } 
    ```

# matlab - 八度中的逐行操作

> ID：10070443
> 
> 赞同：11
> 
> 时间：2012-04-09T07:53:44.440
> 
> 标签：matlab, octave

有没有办法对 octave 中的矩阵执行逐行操作？

我有一个`(mXn)`整数矩阵，我可以获得一个`m dimensional`向量，其中每个元素都是相应行的最大元素吗？我怎么能在八度音阶中做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-09T08:19:29.940

在 matlab 中，对于 2D array `A`，这将是

```
max(A,[],2) 
```

如果您想知道找到值的索引：

```
[value,index]=max(A,[],2) 
```

# java - android或java的条码生成算法

> ID：10070445
> 
> 赞同：2
> 
> 时间：2012-04-09T07:53:59.700
> 
> 标签：java, android, generator, barcode

有免费的 java 或 android 条码（Code128 或 upc）生成库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T07:56:23.987

考虑使用[Zxing 库](http://code.google.com/p/zxing/)。它是 qiet 开源的，因此您可以找到生成或读取条形码的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:58:54.240

浏览[www.onbarcode.com](http://www.onbarcode.com/products/android_barcode/) .. 你可以得到 Barcode Generator ApI

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-03T02:10:33.870

您可以搜索 Zxing Barcode Library、ID Automation Barcode Control 或 Apose Barcode Application，使用他们的免费试用包或条码算法生成条码 java。

[code 128 条码生成器算法](http://www.keepdynamic.com/barcoding/java-barcode-generator.shtml)为您服务

# django - django url 查看配置

> ID：10070448
> 
> 赞同：0
> 
> 时间：2012-04-09T07:54:18.893
> 
> 标签：django, views

我有一个 django 测试，在亚马逊 ec2 实例上，我看到“它工作了！” 页，

我已经评论了访问管理员的必要行，

但我看不到管理页面，

我必须正确配置 urls.py 才能在我的应用程序中显示视图，

```
from django.conf.urls.defaults import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'micopiloto.views.home', name='home'),
    url(r'^$', 'portfolio.views.view', name='home'),
    # url(r'^micopiloto/', include('micopiloto.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

我的应用程序的视图位于：/home/ubuntu/djangoProj/micopiloto/portfolio/views.py

但我有一个空的views.py [因为我刚刚创建了应用程序]

那么如何设置 urls.py 以连接我的应用程序，

我需要一些基本代码来查看我的应用程序的views.py吗？

以及如何加载管理页面？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:30:34.030

django 中的每个视图（views.py 文件中的一个函数）都与一个 url 相关，即当访问该 url 时，将调用该视图函数并将输出显示在浏览器中。

要创建一个简单的视图函数，请使用文本编辑器打开应用程序的 views.py 文件，并将此函数添加到其中：

```
from django.http import HttpResponse

def view(request):
    return HttpResponse('Hello World!') 
```

现在您可以通过访问[/](http://127.0.0.1/)查看您的第一页，也可以在[/admin](http://127.0.0.1/admin/)中查看管理页面。

请注意，函数名称必须与您在 urls.py 中输入的名称相同（此处查看为：'portfolio.view.view **'**）。
另请注意，如果您的 urls.py 文件（以及一些其他文件，如 settings.py、admin.py 等）中有错误，您将看不到管理页面，这里的错误是您引用了一个名为投资组合的函数。 urls.py 中的views.view，但您的views.py 文件中没有这样的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:32:04.503

您需要确保已设置数据库，使用 sqlite 进行测试：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'site.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

您还需要确保管理应用程序在您的`INSTALLED_APPS`：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',

) 
```

您的 urls.py 已经正确。

最后，确保你同步数据库

`$ python manage.py syncdb`

# c# - 如何将自定义窗口窗体置于设置项目窗口之上？

> ID：10070451
> 
> 赞同：2
> 
> 时间：2012-04-09T07:54:52.480
> 
> 标签：c#, .net, visual-studio, visual-studio-2010

我有一个通过 Visual Studio 安装项目部署的应用程序，但是，我必须创建一些自定义 Windows 窗体来收集用户的一些特定数据。这些表单显示在应用程序的 Installer 类的 Install() 方法中，就在安装项目（即 MSI）部署了应用程序文件之后。问题是当我的表单出现时，它们出现在安装项目的窗口下，而不是屏幕上最上面的表单。然后，如果用户注意到它，则必须通过单击任务栏中的图标以将其调出来手动聚焦该表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T13:00:14.763

我所要做的就是从进程列表中选择安装项目的窗口，并将其设置为自定义表单的所有者，因为我正在显示它们。以下是我使用的步骤的细分：

1.  浏览名为“msiexec”的进程列表，并获取显示 Setup .msi 窗口的进程的句柄，可通过 MainWindowTitle（窗口标题）识别。
2.  你现在有了这个进程的句柄（MainWindowHandle），但是你如何使用它呢？您可以在调用 ShowDialog 时通过采用 IWin32Window 的参数指定 Form 的所有者；问题是 IWin32Window 不允许您设置窗口的句柄。这可以通过使用扩展 IWin32Window 的包装类来解决。
3.  最后，您所要做的就是在调用 ShowDialog() 时设置表单的所有者，例如 CustomForm.ShowDialog(new WindowWrapper(process.MainWindowHandle), message 等)。

我自己创建了一个方法，它将安装项目的窗口作为 WindowWrapper 返回，然后在每个 Installer 类的方法（安装、提交、卸载和回滚）中使用它来设置我正在创建的每个表单和消息框的所有者。

此外，不要更改自定义表单的任何子表单或消息框的所有者（可能更改为“this”），因为它们将归显示它们的自定义表单所有；否则它们将显示在安装项目的窗口上，但在自定义表单下，而不是我们想要的。

```
 public override void Install(System.Collections.IDictionary stateSaver)
    {
        base.Install(stateSaver);
        try
        {
            ExecuteSqlScript();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

    private void ExecuteSqlScript()
    {
        IntPtr hwnd = IntPtr.Zero;
        WindowWrapper wrapper = null;
        Process[] procs = Process.GetProcessesByName("msiexec");
        if (null != procs && procs.Length > 0)
            hwnd = procs[0].MainWindowHandle;
        wrapper = new WindowWrapper(hwnd);
        //Set the windows forms owner to setup project so it can be focused and
        //set infront
        frmInstance objInstance = new frmInstance();
        if (null != wrapper)
            objInstance.ShowDialog(wrapper);
        else
            objInstance.ShowDialog();
    }

    public class WindowWrapper : System.Windows.Forms.IWin32Window
    {
        public WindowWrapper(IntPtr handle)
        {
            _hwnd = handle;
        }

        public IntPtr Handle
        {
            get { return _hwnd; }
        }

        private IntPtr _hwnd;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T17:42:41.087

选择列表的第一个元素不是好的做法，下面的代码已经过测试并且可以正常工作。

```
internal static IntPtr InstallerWindow()
{
  IntPtr hwnd = IntPtr.Zero;

  foreach (var proc in Process.GetProcessesByName("msiexec"))
  {
    if (proc.MainWindowHandle == IntPtr.Zero)
      continue;

    if (string.IsNullOrEmpty(proc.MainWindowTitle))
      continue;

    hwnd = proc.MainWindowHandle;
    break;

  }

  return hwnd;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:04:20.537

使用以下代码。此代码专注于您的表单

```
 [DllImport("user32.dll", SetLastError = true)]
    static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);

    // When you don't want the ProcessId, use this overload and pass IntPtr.Zero for the second parameter
    [DllImport("user32.dll")]
    static extern uint GetWindowThreadProcessId(IntPtr hWnd, IntPtr ProcessId);

    [DllImport("kernel32.dll")]
    static extern uint GetCurrentThreadId();

    /// <summary>The GetForegroundWindow function returns a handle to the foreground window.</summary>
    [DllImport("user32.dll")]
    private static extern IntPtr GetForegroundWindow();

    [DllImport("user32.dll")]
    static extern bool AttachThreadInput(uint idAttach, uint idAttachTo, bool fAttach);

    [DllImport("user32.dll", SetLastError = true)]
    static extern bool BringWindowToTop(IntPtr hWnd);

    [DllImport("user32.dll", SetLastError = true)]
    static extern bool BringWindowToTop(HandleRef hWnd);

    [DllImport("user32.dll")]
    static extern bool ShowWindow(IntPtr hWnd, uint nCmdShow);  

       myform.Show();         
        uint foreThread = GetWindowThreadProcessId(GetForegroundWindow(), IntPtr.Zero);
        uint appThread = GetCurrentThreadId();
        const uint SW_SHOW = 5;
        if (foreThread != appThread)
        {
            AttachThreadInput(foreThread, appThread, true);
            BringWindowToTop(myform.Handle);
            ShowWindow(objFrmViewer.Handle, SW_SHOW);
            AttachThreadInput(foreThread, appThread, false);
        }
        else
        {
            BringWindowToTop(myform.Handle);
            ShowWindow(myform.Handle, SW_SHOW);
        }
        myform.Activate();

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T08:06:09.393

MSDN 解释了如何将表单置于最前面并将其保持在最前面。

[http://msdn.microsoft.com/en-us/library/3saxwsad.aspx](http://msdn.microsoft.com/en-us/library/3saxwsad.aspx)

# iphone - 快速从资源和/或文档目录中获取图像

> ID：10070452
> 
> 赞同：0
> 
> 时间：2012-04-09T07:55:19.257
> 
> 标签：iphone, ios, caching, resources, uiimage

我正在开发一个 iPhone 应用程序，其中我有一堆与应用程序捆绑在一起的图像，还有正在下载的新图像并将其放入 Documents 目录中。当我需要它们时，我不知道它们是新的还是捆绑的，所以我创建了一个简单的帮助类来为我检查它。

它有效，但速度很慢。我怎样才能加快速度？我知道我需要缓存来自 Documents 目录的图像，但最有效的方法是什么？该代码目前没有经过优化。任何帮助都是appriciated，谢谢。

[http://pastebin.com/L7WCqjxX](http://pastebin.com/L7WCqjxX)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:22:46.243

一些提示：

*   并不总是搜索您的`docsDir`( `NSSearchPathForDirectoriesInDomains`)，将其存储在实例变量中（或者如果类方法 [如您的情况]，将其存储在静态变量中）
*   让它“线程化”
    *   在后台运行您的方法并创建一个委托协议以发送到您的视图控制器（或其他委托类）。调用`+ (UIImage *)imageNamed:(NSString *)name`后台线程。当从 NSData/Path 加载图像时，通知您的 ViewController（`performSelectorOnMainThread`！）图像已在后台加载并呈现图像（这将大量避免抽搐）。
*   考虑使用 NSOperationQueue 来获得多核处理器的全部功能！

看看[SDWebImage](https://github.com/rs/SDWebImage) ......他们是我上面告诉你的所有东西。

# javascript - xul：多个显示器上的面板位置

> ID：10070456
> 
> 赞同：2
> 
> 时间：2012-04-09T07:56:08.773
> 
> 标签：javascript, firefox, xul

我的 Firefox 扩展上有一个 xul:panel。我根据screen.width和screen.height给出显示的位置。当我有多个显示器并且我在第一台显示器上启动浏览器时出现我的问题，它出现在第二台显示器上，并且 xul:panel 是根据第二台显示器上的第一个屏幕的分辨率绘制的。是否有根据第二个屏幕的分辨率绘制的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:32:51.837

**背景：**

当我为工作开发基于 XULRunner 的多监视器应用程序时，我发现您无法预测窗口管理器将在初始启动主应用程序/浏览器窗口后启动的窗口放置在哪里。

XULRunner 确实正确地给了我：

*   完整的多显示器显示的几何（宽度，高度）
*   多显示器上给定窗口的窗口位置
*   给定窗口的窗口状态（MAXIMIZED，MINIMIZED，两者都不是）
*   （取消）最大化窗口的能力

当我指定一组将窗口放置在特定监视器上的窗口坐标时，它没有正确遵守多监视器几何图形（而是窗口管理器将新窗口放置在它喜欢的任何位置）。

这给我留下了以某种方式执行以下任务的任务：

*   相对于多显示器显示定位窗口，并且
    *（因为移动窗口有时会失去窗口焦点）*
*   聚焦窗口。

我能够在 js-ctypes 加载/使用的外部 DLL 的帮助下实现这两个目标。

* * *

**Win32 示例：**

以下是将外部 DLL 绑定到 JavaScript 的基础知识。这个例子只涵盖了 Win32，但我也为 Linux 和 MacOSX 做了这个（与 Win32 相比，它们分别更容易和更难）。

有3个部分：

1.  用于加载/绑定 Win32 API 的特权 JavaScript 代码
2.  我们外部 DLL 的 CPP 头文件
3.  我们外部 DLL 的 CPP 源文件

我用后面的两个文件编译了一个简单的 GUI DLL 项目`wmctrl.dll`，依赖于`msvcr100.dll`，并使用[Dependency Walker](http://www.dependencywalker.com/)来查找由 DLL 导出以供 js-ctypes 使用的“普通 C”符号。

*我还围绕 API 构建了一个 JavaScript 库，它允许在应用程序的多次运行中为多个窗口操作、跟踪和持久化窗口状态/几何图形，但这与这个简单的示例并不真正相关。*

在特权 JavaScript 代码中：

```
// get js-ctypes, you do this part a bit differently from browser chrome
const {Cc,Ci,Cu} = require("chrome"); 
var file=null, lib=null, ctypes = {};
Cu.import("resource://gre/modules/ctypes.jsm", ctypes);
var ctypes = ctypes.ctypes;

// build platform specific library path
var filename = ctypes.libraryName("wmctrl");
var comp = "@mozilla.org/file/directory_service;1";
var file = Cc[comp].getService(Ci.nsIProperties).get("CurProcD", Ci.nsIFile);
file.append("browser_code");
file.append(filename);

// get the JavaScript library interface (load the library)
var lib = ctypes.open(file.path);

// wmctrl_find_window: returing unsigned 32bit (long) "window handle"
// takes string "window title".
var find_window = lib.declare("?wmctrl_find_window@@YAKPAD@Z", 
    ctypes.stdcall_abi, ctypes.uint32_t,
    ctypes.char.ptr);

// wmctrl_window_focus: takes unsigned 32bit (long) "window handle".
var window_focus = lib.declare("?wmctrl_window_focus@@YAXK@Z", 
    ctypes.stdcall_abi, ctypes.void_t,
    ctypes.uint32_t);

// wmctrl_window_move: takes unsigned 32bit (long) "window handle", 
// and two (x & y) signed 32bit ints. 
var window_move = lib.declare("?wmctrl_window_move@@YAXKHH@Z", 
    ctypes.stdcall_abi, ctypes.void_t,
    ctypes.uint32_t, ctypes.int32_t, ctypes.int32_t); 
```

wmctrldll.h

```
#ifdef WMCTRLDLL_EXPORTS
#define WMCTRLDLL_API __declspec(dllexport)
#else
#define WMCTRLDLL_API __declspec(dllimport)
#endif

WMCTRLDLL_API void wmctrl_window_focus (unsigned long wid);
WMCTRLDLL_API void wmctrl_window_move (unsigned long wid, int x, int y);
WMCTRLDLL_API unsigned long wmctrl_find_window(char* find_title); 
```

wmctrldll.cpp

```
#include "stdafx.h"
#include "wmctrldll.h"

typedef struct {
  HWND hWnd;
  char title[255];
} myWinSpec;

BOOL CALLBACK EnumWindowsProc(HWND hWnd, LPARAM lParam) {
  char String[255];
  myWinSpec* to_find = (myWinSpec*) lParam;

  // not a window
  if (!hWnd) return TRUE;                                      

  // not visible
  if (!IsWindowVisible(hWnd)) return TRUE;

  // no window title                     
  if (!GetWindowTextA(hWnd, (LPSTR)String, 255)) return TRUE;  

  // no title match
  if (strcmp(String, to_find->title) != 0) return TRUE;        

  to_find->hWnd = hWnd;
  return FALSE;
}

WMCTRLDLL_API void wmctrl_window_focus(unsigned long wid) {
  SetForegroundWindow((HWND) wid);
}

WMCTRLDLL_API unsigned long wmctrl_find_window(char* find_title) {
  myWinSpec to_find;

  sprintf_s(to_find.title, sizeof(to_find.title), "%s", find_title);
  to_find.hWnd = 0;

  EnumWindows(EnumWindowsProc, (LPARAM)&to_find);
  return (unsigned long) to_find.hWnd;
}

WMCTRLDLL_API void wmctrl_window_move(unsigned long wid, int x, int y) {
  UINT flags = SWP_SHOWWINDOW | SWP_NOSIZE;

  SetForegroundWindow((HWND) wid);
  SetWindowPos((HWND) wid, HWND_NOTOPMOST, x, y, NULL, NULL, flags);
} 
```

# drupal - 创建页面内容类型节点时如何创建 webform 节点？

> ID：10070463
> 
> 赞同：0
> 
> 时间：2012-04-09T07:56:48.233
> 
> 标签：drupal, content-type, cck

我有一种情况，当我要保存我的页面类型内容时，我需要创建一个 webform 节点，这可能吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:59:15.220

您可以将网络表单添加为与页面类型相同的节点的一部分。

访问：

```
/admin/settings/weform 
```

在那里你可以设置“WEBFORM-ENABLED CONTENT TYPES”，例如。页面、文章、博客等

# jquery - 通过 jquery 调用 Escape 按键事件

> ID：10070464
> 
> 赞同：17
> 
> 时间：2012-04-09T07:56:57.063
> 
> 标签：jquery, keypress

我想把我的问题说清楚。请不要将其与确定按键混淆。我不希望用户按任何键。相反，我想运行一个触发 Escape 按键事件的脚本。请帮忙！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-09T08:18:49.863

您可以使用`$.Event()`创建一个包含 keydown 事件的 Event 对象，其中 keyCode 为 27（应该是 Esc），例如：

```
var esc = $.Event("keydown", { keyCode: 27 });
$("body").trigger(esc); // change body to the element where you'd like to execute the escape key press. 
```

**[在 jquery.com 上](http://api.jquery.com/category/events/event-object/)**查看**[这个工作演示](http://jsfiddle.net/wbkm8/3/)**和文档

另请注意，正如 Christofer 所说，这可能不适用于所有浏览器和环境，因为它可能被认为是*可能以恶意方式使用的**可疑*行为- 就像**[不会发生](http://jsfiddle.net/hww92/)**带有外部 href的点击事件一样. 我在 Chrome、Safari、Opera、FF 和 IE9 中成功地测试了这个（Esc）。*`<a>`*

 ** * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T08:02:00.013

For security reasons, some browsers (not sure if all), prevent you from firing keydown-events. Please refer to [this article](http://www.howtocreate.co.uk/tutorials/javascript/domevents) for more info.

A quote from the article:

> Safari/Chrome makes the keyCode and charCode properties read-only, so it is not possible to simulate specific keys when manually firing events.*

# php - php允许上传的文件扩展名

> ID：10070465
> 
> 赞同：-2
> 
> 时间：2012-04-09T07:56:59.600
> 
> 标签：php

> **可能重复：**
> [如何只允许在 php 中上传某些文件类型？](https://stackoverflow.com/questions/2486329/how-can-i-only-allow-certain-filetypes-on-upload-in-php)

我正在学习 PHP 和 Mysql。我想创建一个只允许用户上传的特定文件扩展名的函数。喜欢..

```
$whitelist = array("jpg","jpeg","gif","png","bmp","pdf" ); 
```

那么我如何使用 php.ini 检查这个特定的文件扩展名。谁能告诉我。。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:01:13.763

这是一个选项：

```
function checkFormat($source){
    $whitelist = array("jpg","jpeg","gif","png","bmp","pdf" );
    $type="";
    if(version_compare('4.3.0', PHP_VERSION) > 0){
        $type=mime_content_type($source['tmp_name']);
    }else{
        $type=$source['type'];
    }

    return (in_array($type, $whitelist));
} 
```

问候！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T08:02:09.827

Get the file extension of the uploaded file with [`pathinfo`^(*­Docs*)](http://php.net/pathinfo) like

```
$extension = pathinfo($filename, PATHINFO_EXTENSION); 
```

and then check against a whitelist of allowed exentsions

```
$allowedExtensions = array("jpg","jpeg","gif","png","bmp","pdf");
$isAllowed = in_array($extension, $allowedExtensions); 
```

maybe you need to modify the extension recognize function to get some special extensions like tar.gz, but that should do the trick.

*Edit:* As said [here](https://stackoverflow.com/questions/1133896/finding-extension-of-the-file-being-uploaded-using-php) you shouldn't check the file extension, but the mime-type.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:07:21.617

看这里： [http ://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

它提供了一个示例来说明如何执行此操作。

# pyqt - PyQt 如何发挥它的魔力？特别是，它如何让我们在 Python 中实现插槽？

> ID：10070467
> 
> 赞同：2
> 
> 时间：2012-04-09T07:57:11.637
> 
> 标签：pyqt, pyqt4, implementation, internals

当我了解 PyQt 时，有三件事让我感到好奇。这是关于第二个的问题，但让我说出所有三个以防万一其他人好奇：

1.  首先，我们可以在 Python 中继承 C++ 类（可以这么说），*覆盖 Python 中的 C++ 方法*——并将我们的类传递回 Qt 框架，Qt 框架*将调用它们，就像它们是 C++ 一样！*
2.  第二，插槽。在核心 Qt 中，它们是 C++ 类的方法。但是在 PyQt 中，我们可以轻松地将 Python 方法用作插槽，它们会被调用。（它们似乎对 Qt“内省”系统不可见，尽管^(*）)）
3.  第三，信号。在 Qt 中，它们是静态生成的 C++ 代码——那么 PyQt 是如何聪明地允许我们在 Python 中创建它们（a）和（b）基本上是动态的？

我想我理解（1）（对于每个具有`virtual`方法的类，SIP 生成一个继承它的子类，持有对 Python 对象的引用，以便为每个被覆盖的方法生成的代码首先检查是否存在 Python 方法），以及（ 3）知道（2）不应该太难理解。

[正如本文](http://www.codeproject.com/Articles/31330/Qt-Internals-Reversing)所得出的那样，要拥有 (2)，我们必须为我们的 Python 类实现该`qt_metacall()`方法，并通过为我们的 PyQt 类提供相应的 QMetaObject 来将其链接到 Qt“元系统”。

我将不胜感激有关它是如何完成的任何提示，无论是在 PyQt 或 PySide 中，还是在之前使用 Boost::Python 为 PySide 完成的。

特别是，我想知道 PyQt4.QtCore.SLOT() 使用什么作为相应 Python 方法的签名字符串。

PS。正如在[相关帖子](https://stackoverflow.com/questions/1406940/how-signal-and-slots-are-implemented-under-the-hood/9597611)中所说，“这个问题[已经](https://stackoverflow.com/questions/2084932/how-pyqt-implement-signal-and-slot-in-qt)在这个论坛中提出，但我不明白这个概念”。

* * *

*) 下面的代码列出了 Qt 对象的插槽；不出所料，Python 对象方法不会显示在此列表中，即使它们是 connect()-ed。（有没有办法列出当前作为插槽工作的 Python 方法？）

```
def print_object_slots( qt_object, this_class_only = False ):  

    # there was a method called signalNames(), and, I suspect, slotNames(), 
    # but it was removed in Qt 4 [ http://www.qtforum.org/article/33122/method-qmetaobject-signalnames-removed-in-qt4.html#post106693 ]

    mo = qt_object.metaObject()
    nmethods = mo.methodCount()

    first_method_offset = 0  
    if this_class_only :
        first_method_offset = mo.methodOffset() # assert != -1 

    # or use PyQt.QtCore.QMetaMethod.Slot
    type_slot = 2 # [ http://doc.qt.nokia.com/4.6/qmetamethod.html#MethodType-enum ]

    # list the slots 
    for i in xrange( first_method_offset, nmethods ):
        meth = mo.method(i)
        if meth.methodType() == type_slot :

            print meth.signature() 
```

`PyQt4.QtCore.pyqtSignal()`（使用 1 而不是 2 来列出信号。而且 - 不，也不会列出类（ one ）的 PyQt 信号。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T02:35:55.850

您可以在现代版本的 PyQt 中使用装饰器。例如：

```
@QtCore.pyqtSlot()
@QtCore.pyqtSlot('bool')  
def coolSlotActions(self, b=True):
   """ my slot called, with two different signatures """
   pass # do something cool! 
```

[PyQt 4.9.4 文档](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/new_style_signals_slots.html#the-pyqtslot-decorator)中的更多信息。据我所知，这在 pyside 中不起作用。

# jira - 获取整个项目的燃尽图

> ID：10070471
> 
> 赞同：1
> 
> 时间：2012-04-09T07:57:17.077
> 
> 标签：jira, greenhopper

有没有办法为整个项目（即所有版本）构建燃尽图？我将 Jira 与 GreenHopper 插件 4.3 一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:31:06.387

关键是适当地设置您的版本。

我的设置可能对你有用（至少作为灵感）

我有一个完整项目的顶级版本。

然后我有一堆发布版本，它们是旨在实际发布给客户的块。每个都有“完整项目”版本作为父级。您可以在版本卡事物的计划板视图中定义它。

最后，我有一个版本，每个 sprint 都有适当的发布版本作为父版本。

通过此设置，我可以在图表视图中选择每个级别的版本，并且可以按预期工作。

请注意，如果您完成任务并随后更改版本的父级，则任务不会相应更新，因此您的图表可能会令人困惑。

# python - 列表推导中的 Lambdas

> ID：10070477
> 
> 赞同：10
> 
> 时间：2012-04-09T07:57:57.827
> 
> 标签：python, lambda, functional-programming, list-comprehension

我想要一个 lambdas 列表，作为一些繁重计算的缓存，并注意到这一点：

```
>>> [j() for j in [lambda:i for i in range(10)]]
[9, 9, 9, 9, 9, 9, 9, 9, 9, 9] 
```

虽然

```
>>> list([lambda:i for i in range(10)])
[<function <lambda> at 0xb6f9d1ec>, <function <lambda> at 0xb6f9d22c>, <function <lambda> at 0xb6f9d26c>, <function <lambda> at 0xb6f9d2ac>, <function <lambda> at 0xb6f9d2ec>, <function <lambda> at 0xb6f9d32c>, <function <lambda> at 0xb6f9d36c>, <function <lambda> at 0xb6f9d3ac>, <function <lambda> at 0xb6f9d3ec>, <function <lambda> at 0xb6f9d42c>] 
```

这意味着 lambda 是独特的函数，但它们都以某种方式共享相同的索引值。

这是错误还是功能？我该如何避免这个问题？它不仅限于列表推导...

```
>>> funcs = []
... for i in range(10):
...     funcs.append(lambda:i)
... [j() for j in funcs]
[9, 9, 9, 9, 9, 9, 9, 9, 9, 9] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T08:08:10.817

`lambda`返回`i`您调用它时的值。由于您`lambda`在循环完成运行后调用 ，因此 的值`i`将始终为 9。

您可以在 lambda 中创建一个局部`i`变量来保存定义时的值`lambda`：

```
>>> [j() for j in [lambda i=i:i for i in range(10)]]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

另一种解决方案是创建一个返回的函数`lambda`：

```
def create_lambda(i):
    return lambda:i
>>> [j() for j in [create_lambda(i) for i in range(10)]]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

这是有效的，因为`i`每次调用`create_lambda`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-09T08:07:38.397

你在这里看到的是[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)的效果。lambda 正在从程序中捕获状态以供以后使用。因此，虽然每个 lambda 都是唯一的对象，但状态不一定是唯一的。

这里实际的“gotchya”是变量`i`被捕获，而不是`i`在那个时间点表示的值。我们可以用一个更简单的例子来说明这一点：

```
>>> y = 3
>>> f = lambda: y
>>> f()
3
>>> y = 4
>>> f()
4 
```

lambda 保留对变量的引用，并在您执行 lambda 时评估该变量。

要解决此问题，您可以分配给 lambda 中的局部变量：

```
>>> f = lambda y=y:y
>>> f()
4
>>> y = 6
>>> f()
4 
```

最后，在循环的情况下，循环变量只“声明”一次。因此，在循环中对循环变量的任何引用都将持续到下一次迭代之后。这包括列表推导中的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T08:08:50.500

问题是您没有在列表理解的每次迭代中捕获 i 的值，而是每次都在捕获变量。

问题是闭包通过引用捕获变量。在这种情况下，您正在捕获一个其值随时间变化的变量（与所有循环变量一样），因此运行它时它的值与创建它时的值不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T08:06:53.937

我不确定它是错误还是功能，但正在发生的事情是`lambda:i`在形成 lambda 函数之前没有评估 i 。因此，它实际上只是一个评估 i 的当前值的函数。这是如何发生的另一个示例。

```
>>> i=5
>>> x=lambda:i
>>> x()
5
>>> i=6
>>> x()
6 
```

因此，显然，除了 i 在您的示例中将变为 9 之外，发生的事情是相同的，因为它是按该顺序通过 0 到 9 的范围分配的。

我认为没有什么好的方法可以避免它。Python 中的 Lambda 函数非常有限。它本质上并不是一种真正的函数式语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-25T06:32:33.507

将方括号变成括号，如下所示： [j() for j in (lambda:i for i in range(10))] 输出： [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 元组是不可变的变量

# jquery-ui - 通过另一个元素进行 jQuery UI 定位

> ID：10070482
> 
> 赞同：0
> 
> 时间：2012-04-09T07:58:54.457
> 
> 标签：jquery-ui

每个人都对我的第一个问题做了这么短的工作，现在我被另一个问题难住了。

这主要是我怀疑的一个 jQuery 问题，尽管因为它是根据一些 MySQL 变量回显的，所以它变得非常混乱。我发现 jQueryUI 是从[这里](https://stackoverflow.com/a/2781557/1311697)推荐的，但是这个特定的代码对我来说根本不起作用。

我试图通过查看源代码来从这个示例中获取尽可能多的 PHP 和 MySQL。这些变量似乎工作正常。

在以下示例中，我尝试将 ID 为 res10 的 DIV 直接移动到 ID 为 100019 的 SPAN 上。jQueryUI 脚本设置为加载。这些
标签只是为了证明它们位于两个不同的位置；一旦这个功能发挥作用，SPAN 应该几乎可以在任何地方使用。

```
<script language="javascript">
$(function() {

$("#res10").position({
    my:        "left top",
    at:        "left bottom",
    of:        $("#100019"), //I also tried just "#100019" and that didn't work.
    collision: "fit"
})

});

</script>   
<span id="151520"> [a spacer gif, but nothing else] </span>
<br /><br />
<div class="resContainer res10" id="res10">Information and Such</div> 
```

请注意， resContainer 类的 CSS 根本不定位对象，甚至没有默认位置：属性。

编辑：我突然想到有人可能会问“你为什么要这样做？” 因为仅仅使用硬代码就可以让它看起来都可以单独使用 CSS 来实现。没有深入了解原因的一堆细节，只知道它不会那样工作。

如果 jQuery 可以通过获取 offset() 变量和设置 CSS 来实现同样的效果，那就太好了，但是我尝试了一堆并没有用，事实上，我得到了与使用它时相同的输出，仅此而已PHP/MySQL 生成的 DIV（未显示）出现在彼此的顶部，在调用 PHP 脚本的所有其他内容下方的屏幕底部。

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T00:55:51.847

好的，我不确定它到底是怎么发生的，但我已经解决了我自己的问题。也许是语法错误或错误的 UI 加载，但这是我最终使用的对我来说非常有效的方法。

```
// - Can be placed anywhere, as long as it occurs before the SPAN it's adjusting
<script type="text/javascript">
$(function() {
    $("#resContainer3").position({
    "my": "right top",
    "at": "right top",
    "of": $("#100013"),
    "offset": "-3 7"
});
});
</script>

<span class=resContainer id=resContainer3></span> 
```

希望这对碰巧和我有同样问题的人有所帮助！

# c# - DropDownList 中的最大值 - ASP.NET

> ID：10070483
> 
> 赞同：1
> 
> 时间：2012-04-09T07:59:05.147
> 
> 标签：c#, asp.net, drop-down-menu, max

如何获得with中的`DropDownList`值的最大值？`ASP.NET``C#`

有什么方法还是我应该手动获取？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T08:02:34.550

`int maxValue = DropDownList1.Items.Cast<ListItem>().Select(item => int.Parse(item.Value)).Max();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:09:05.387

```
DropDownList1.Items.Cast<ListItem>().Max(j => j.Value) // For string comparison 
```

或者，

```
DropDownList1.Items.Cast<ListItem>().Max(j => int.Parse(j.Value)) // If you want max int 
```

# mysql - 用于分析的新数据库或新表？

> ID：10070486
> 
> 赞同：1
> 
> 时间：2012-04-09T07:59:29.403
> 
> 标签：mysql, database, database-design

我想存储一些分析数据。例如，用户执行操作 X 的次数或过去一天登录的用户数量等。

最好的做法是将另一个表添加到我现有的应用程序数据库中吗？或者在这里添加一个新的数据库？我认为第二种选择有点矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:10:31.237

这完全取决于您的业务/安全/公共利益需求、用例和资金。

例如，如果通过分析，您的意思是“计算有多少匿名人阅读了这个小型公共 wiki”，那么表格可能就可以了。如果该 wiki 增长，那么出于性能原因，您可能需要一个单独的数据库。

但是，如果分析数据库将包含有关站点成员的信息——尤其是不需要直接存储在公共网站上的信息——那么您有法律责任采取一切合理的预防措施来保护数据。这可能意味着将其存储在单独的业务内部数据库中，而不是存储在面向公众的站点数据库中。

至少，您应该在 Web 应用程序中为您的分析提供单独的数据库连接设置、单独的连接和单独的游标，以便稍后将它们拆分到单独的数据库中。这通常用于分离 web 应用程序中的读取和写入，因此如果您遇到困难，您应该能够找到它的示例。

经过某个小型站点负载后，无论如何，您都希望将它放在单独的数据库中以提高性能。除非您使用某种为性能而构建的分布式、水平可扩展的数据库，否则就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:10:09.013

使用单独的数据库。它使您的架构更清晰，更容易管理数据库用户及其访问权限（因为您不需要每个表的权限），并且如果您需要走这条路，它可以更轻松地管理复制。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T08:02:21.790

只需在现有数据库中添加另一个表，如果您添加另一个数据库，那么您必须同时从一个数据库切换到另一个数据库意味着您必须照顾`mysql_connect()`或者您需要在连接其他数据库之前关闭以前的数据库连接，这会有点有点忙

# iphone - 如何将返回的 NSArray 添加到 NSArray

> ID：10070487
> 
> 赞同：2
> 
> 时间：2012-04-09T07:59:31.680
> 
> 标签：iphone, ios, ios4, xcode4

我是 Objective-C 和 iPhone 的新手

我必须使用值对 NSDictionary 进行排序，并且根据我必须排列该值的键，我已经对数组进行了排序。

```
//getting values
NSArray* keys1 = [sortDictionary allValues];    
NSArray* sortedArray = [keys1 sortedArrayUsingComparator:^(id a, id b) {  
     return [a compare:b options:NSNumericSearch];
}]; 
```

我现在的问题是我通过 allKeysForObject: 获取值的键，它返回一个 NSArray。

```
for( NSString* aStr in sortedArray ) {
    NSLog( @"%@ has value %@", [sortDictionary allKeysForObject:aStr], aStr );  
 } 
```

> ```
> O/P :- (
>   Sourish
> ) has value 60 
> ```

相反，我想要“Sourish”作为字符串并将其存储到 NSArray，而不是将该 NSArray 存储到 NSDictionary 或将 Sourish 和 60 存储到另一个 NSDictionary

请让我解决我们的这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:40:32.023

这通过查看数组为您获取字符串。这就是你所追求的吗？

```
NSDictionary* sortDictionary = [NSDictionary dictionaryWithObjectsAndKeys: @"60", @"Sourish", @"45" , @"Peckish",  @"25", @"Swordfish", @"15", @"Mashmish", nil];

 NSArray* keys1 = [sortDictionary allValues];    
 NSArray* sortedArray = [keys1 sortedArrayUsingComparator:^(id a, id b)
 {  
    return [a compare:b options:NSNumericSearch];
 }]; 

 for( NSString* aStr in sortedArray )
 {
    NSString* keyForObject = @"";

    if ([[sortDictionary allKeysForObject: aStr] count] > 0)
    {
        keyForObject = [[sortDictionary allKeysForObject: aStr] objectAtIndex: 0];
    }

     NSLog( @"%@ has value %@", keyForObject, aStr );  
 } 
```

这记录：

```
Mashmish has value 15
Swordfish has value 25
Peckish has value 45
Sourish has value 60 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:39:22.533

> “>> 我必须使用值对 NSDictionary 进行排序，并据此排列该值的键”

```
NSArray *allkey =[[NSArray alloc] initWithArray:[sortDictionary keysSortedByValueUsingSelector:@selector(compare:)]] ; 
```

实施您的比较方法，

```
 - (NSComparisonResult)compare:(id)b {
    return [self compare:b options:NSNumericSearch];
} 
```

allkey 是使用值排序的键数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:16:07.910

您可以使用`NSMutableArray`来存储您的数据，`addObject: selector` 或者使用`NSMutableDictionary`将两者都存储为键：值使用`addObjectsAndKeys: selector`

# php - 提交 IE

> ID：10070490
> 
> 赞同：1
> 
> 时间：2012-04-09T08:00:21.027
> 
> 标签：php, html, forms, button

前段时间听说用`<button></button>`提交表单，不好——因为 IE 提交的是按钮的值，而不是表单中的输入。这是真的。？

因为目前我正在使用引导程序，并且我有这个登录按钮，它也应该包含箭头图标。喜欢：

```
<button type="submit" class="btn btn-primary" name="btnSubmit">
 Login <i class="icon-arrow-right"></i>
</button> 
```

我看不出应该如何使用普通输入按钮：/

希望有人能回答这个问题！

感谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:14:54.343

如果您需要有多个提交按钮并在服务器上区分它们，这只是一个问题。

如果你这样做并且你需要支持 IE6，那么你应该避免使用`<button>`元素，它们都将永远是成功的控件。

如果您需要支持 IE7（可能还有 IE8），那么您可以为它们指定唯一名称并在服务器上测试以查看数据中出现的名称（同时完全忽略该值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:17:38.613

只需使用输入。CSS 样式对输入的工作方式相同。您还可以在 CSS 中使用该按钮：

```
.btn_primary input[type="submit"] 
```

它适用于gte ie6。

HTML

```
<input type="submit" name="btnSubmit" class="btn btn_primary" /> 
```

# css - FireFox 不支持打印属性（孤立）的分页符

> ID：10070491
> 
> 赞同：3
> 
> 时间：2012-04-09T08:00:24.957
> 
> 标签：css, firefox

如果数据很大，我正在使用该`orphan`属性在打印时添加分页符，它在 chrome 和 IE 中工作，但在**FireFox**中不支持它。

```
docprint.document.write('</head>
             <body onLoad="self.print()">
              <fieldset class="result tbl" style="border-width: 0 0 0 !important;">
               <div class="table report_data" style="width:100% !important;
                          padding-left:4px !important;
                          padding-Right:5px !important;orphans:7;">');
---------------------------------------------------------^^this is not supported in Firefox 
```

任何人都知道解决此问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:25:46.267

很少有属性不能被火狐支持......

[检查这个网站......](http://reference.sitepoint.com/css/orphans)和[这个......](https://developer.mozilla.org/en/CSS/orphans)

# javascript - 在 Windows Phone 7.1 中使用 phonegap 工具的 XMPP 聊天客户端

> ID：10070492
> 
> 赞同：1
> 
> 时间：2012-04-09T08:00:40.567
> 
> 标签：javascript, cordova, xmpp, windows-phone-7.1, jsjac

在我的 WindowsPhone7.1 项目中，有一个 XMPP 聊天模块。我完美地使用 HTML/CSS 设计了聊天窗口。

为了连接 Jabber 服务器（Openfire），我使用[了 JsJaC library](http://ajaxian.com/archives/jsjac-javascript-jabber-client-library)。

如何将其与 Windows Phone 7.1 项目集成？

`WWW`我应该在文件夹中包含库脚本文件吗？

之后我可以简单地在 cordavo-1.5.0.js 中编写我的客户端脚本吗？

# inno-setup - 如何只允许安装到特定文件夹？

> ID：10070493
> 
> 赞同：3
> 
> 时间：2012-04-09T08:00:41.103
> 
> 标签：inno-setup

我只想将我的设置内容安装到一个特定的目录，所以我希望`Next`禁用目录选择页面上的按钮，除非用户选择正确的文件夹进行安装。

如何禁用`Next`目录选择页面上的按钮并在用户选择特定目录后立即启用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T08:51:27.907

以下示例显示了如何`Next`在您到达`SelectDir`页面时禁用该按钮，并仅在您输入（或从浏览目录对话框中选择）`C:\MySecretDir`文件夹（`MySecretDir`常量）时启用它。比较不区分大小写，因为用户可以输入他（或她）想要的任何内容。

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

[Code]
const
  MySecretDir = 'C:\MySecretDir';

procedure OnDirEditChange(Sender: TObject);
begin
  WizardForm.NextButton.Enabled := CompareText(WizardDirValue, MySecretDir) = 0;
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  if CurPageID = wpSelectDir then
    OnDirEditChange(nil);
end;

procedure InitializeWizard;
begin
  WizardForm.DirEdit.OnChange := @OnDirEditChange;
end; 
```

或者，如果您只想在所选目录中`Next`有特定文件时启用按钮，请以这种方式修改事件处理程序中的代码：`MyUniqueFile.exe``OnDirEditChange`

```
procedure OnDirEditChange(Sender: TObject);
begin
  WizardForm.NextButton.Enabled := FileExists(AddBackslash(WizardDirValue) +
    'MyUniqueFile.exe');
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-23T22:48:58.410

您可以通过禁用目录选择页面来阻止用户更改安装目录。禁用时，安装过程中不会显示该页面。

```
[SETUP]
DisableDirPage=yes 
```

# java - 在同一时区将 java Date 与 sql TIMESTAMP 进行比较

> ID：10070497
> 
> 赞同：2
> 
> 时间：2012-04-09T08:00:58.320
> 
> 标签：java, sql, timezone

我需要比较`userCurrentDate`选项列表。

选项是数据库中包含时间属性的表（定义：TIMESTAMP(6) WITH TIME ZONE. in oracle）。每个选项都有他的时区。

( `userCurrentDate`definition Date. in java) 是一个参数，用于保存用户时间和日期以及偏移量。用户可以来自世界各地，因此每个用户都在不同的时区。

我需要将用户当前**日期** 与选项**日期**进行比较。所以我需要在同一时区获取这两个参数。

如何在**SQL**中在同一时区获取这 2 个参数？

我试图让它们在格林威治标准时间，所以我可以让它们在同一个基地，像这样：

```
trunc(SYS_EXTRACT_UTC(o.time)) = trunc(sysdate) 
```

但这不是一个好的解决方案。

所以，我需要让他们在同一个时区。我怎样才能在 SQL 命令（或其他解决方案）中得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:51:57.000

为什么你认为你需要这种转换？你有什么版本的 Oracle 和 Oracle JDBC？

您是否尝试仅绑定`userCurrentDate`和执行 SQL，如下所示：

```
connection.prepareStatement("select * from options o where o.time = ?")
    .setTimestamp(1, new Timestamp(userCurrentDate.getTime())
    .executeQuery(); 
```

我已经用`ojdbc14.jar`Oracle 10g 对此进行了测试，它运行良好。

由于`Date`和`Timestamp`数据类型中没有任何时区信息，因此您实际上不应该关心将时区与 DB 值匹配，只要：

1.  您不需要您的数据库值实际上具有*特定*的时区。当您在 type 列中插入一些值时`TIMESTAMP WITH TIME ZONE`，JDBC 驱动程序将使用您的本地时区。
2.  您不需要在 Java 程序中*显示*原始时区，因为正如我之前所说的`Date`/`Timestamp`类型中没有该信息。

只要您只需要将 Java`Date`对象与 DB 值匹配，您就可以不用任何转换。

另外，请查看这篇关于该主题的综合文章：[[How To] Handle Oracle TimeStamp with TimeZone from Java](http://puretech.paawak.com/2010/11/02/how-to-handle-oracle-timestamp-with-timezone-from-java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:38:18.770

我用 at time zone oracle 函数解决了这个问题。用过的：

```
to_timestamp_tz(to_char(CAST(FROM_TZ(CAST(sysdate AS TIMESTAMP), 'GMT') AT TIME ZONE o.time AS DATE) 
```

并将其相互比较。

# java - HBase 连接拒绝

> ID：10070498
> 
> 赞同：3
> 
> 时间：2012-04-09T08:00:58.823
> 
> 标签：java, linux, jakarta-ee, hadoop, hbase

嗨，我正在使用 hadoop 和 HBase。当我尝试启动 hadoop 时，它开始正常，但是当我尝试启动 HBase 时，它​​在日志文件中显示异常。在日志文件中，hadoop 拒绝本地主机端口 54310 上的连接。日志如下：

```
Mon Apr  9 12:28:15 PKT 2012 Starting master on hbase
ulimit -n 1024
2012-04-09 12:28:17,685 INFO org.apache.hadoop.hbase.ipc.HBaseRpcMetrics: Initializing RPC Metrics with hostName=HMaster, port=60000
2012-04-09 12:28:18,180 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server Responder: starting
2012-04-09 12:28:18,190 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server listener on 60000: starting
2012-04-09 12:28:18,197 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 0 on 60000: starting
2012-04-09 12:28:18,200 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 1 on 60000: starting
2012-04-09 12:28:18,202 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 2 on 60000: starting
2012-04-09 12:28:18,206 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 3 on 60000: starting
2012-04-09 12:28:18,210 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 4 on 60000: starting
2012-04-09 12:28:18,278 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 9 on 60000: starting
2012-04-09 12:28:18,279 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 5 on 60000: starting
2012-04-09 12:28:18,284 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 8 on 60000: starting
2012-04-09 12:28:18,285 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 7 on 60000: starting
2012-04-09 12:28:18,285 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 6 on 60000: starting
2012-04-09 12:28:18,369 INFO org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.3.2-1031432, built on 11/05/2010 05:32 GMT
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:host.name=hbase.com.com
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.version=1.6.0_20
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Sun Microsystems Inc.
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.home=/usr/lib/jvm/java-6-openjdk/jre
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/opt/com/hbase-0.90.4/bin/../conf:/usr/lib/jvm/java-6-openjdk/lib/tools.jar:/opt/com/hbase-0.90.4/bin/..:/opt/com/hbase-0.90.4/bin/../hbase-0.90.4.jar:/opt/com/hbase-0.90.4/bin/../hbase-0.90.4-tests.jar:/opt/com/hbase-0.90.4/bin/../lib/activation-1.1.jar:/opt/com/hbase-0.90.4/bin/../lib/asm-3.1.jar:/opt/com/hbase-0.90.4/bin/../lib/avro-1.3.3.jar:/opt/com/hbase-0.90.4/bin/../lib/commons-cli-1.2.jar:/opt/com/hbase-0.90.4/bin/../lib/commons-codec-1.4.jar:/opt/com/hbase-0.90.4/bin/../lib/commons-configuration-1.6.jar:/opt/com/hbase-0.90.4/bin/../lib/commons-el-1.0.jar:/opt/com/hbase-0.90.4/bin/../lib/commons-httpclient-3.1.jar:/opt/com/hbase-0.90.4/bin/../lib/commons-lang-2.5.jar:/opt/com/hbase-0.90.4/bin/../lib/commons-logging-1.1.1.jar:/opt/com/hbase-0.90.4/bin/../lib/commons-net-1.4.1.jar:/opt/com/hbase-0.90.4/bin/../lib/core-3.1.1.jar:/opt/com/hbase-0.90.4/bin/../lib/guava-r06.jar:/opt/com/hbase-0.90.4/bin/../lib/hadoop-core-0.20.205.0.jar:/opt/com/hbase-0.90.4/bin/../lib/hadoop-gpl-compression-0.2.0-dev.jar:/opt/com/hbase-0.90.4/bin/../lib/jackson-core-asl-1.5.5.jar:/opt/com/hbase-0.90.4/bin/../lib/jackson-jaxrs-1.5.5.jar:/opt/com/hbase-0.90.4/bin/../lib/jackson-mapper-asl-1.4.2.jar:/opt/com/hbase-0.90.4/bin/../lib/jackson-xc-1.5.5.jar:/opt/com/hbase-0.90.4/bin/../lib/jasper-compiler-5.5.23.jar:/opt/com/hbase-0.90.4/bin/../lib/jasper-runtime-5.5.23.jar:/opt/com/hbase-0.90.4/bin/../lib/jaxb-api-2.1.jar:/opt/com/hbase-0.90.4/bin/../lib/jaxb-impl-2.1.12.jar:/opt/com/hbase-0.90.4/bin/../lib/jersey-core-1.4.jar:/opt/com/hbase-0.90.4/bin/../lib/jersey-json-1.4.jar:/opt/com/hbase-0.90.4/bin/../lib/jersey-server-1.4.jar:/opt/com/hbase-0.90.4/bin/../lib/jettison-1.1.jar:/opt/com/hbase-0.90.4/bin/../lib/jetty-6.1.26.jar:/opt/com/hbase-0.90.4/bin/../lib/jetty-util-6.1.26.jar:/opt/com/hbase-0.90.4/bin/../lib/jruby-complete-1.6.0.jar:/opt/com/hbase-0.90.4/bin/../lib/jsp-2.1-6.1.14.jar:/opt/com/hbase-0.90.4/bin/../lib/jsp-api-2.1-6.1.14.jar:/opt/com/hbase-0.90.4/bin/../lib/jsr311-api-1.1.1.jar:/opt/com/hbase-0.90.4/bin/../lib/log4j-1.2.16.jar:/opt/com/hbase-0.90.4/bin/../lib/protobuf-java-2.3.0.jar:/opt/com/hbase-0.90.4/bin/../lib/servlet-api-2.5-6.1.14.jar:/opt/com/hbase-0.90.4/bin/../lib/slf4j-api-1.5.8.jar:/opt/com/hbase-0.90.4/bin/../lib/slf4j-log4j12-1.5.8.jar:/opt/com/hbase-0.90.4/bin/../lib/stax-api-1.0.1.jar:/opt/com/hbase-0.90.4/bin/../lib/thrift-0.2.0.jar:/opt/com/hbase-0.90.4/bin/../lib/xmlenc-0.52.jar:/opt/com/hbase-0.90.4/bin/../lib/zookeeper-3.3.2.jar
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/usr/lib/jvm/java-6-openjdk/jre/lib/i386/client:/usr/lib/jvm/java-6-openjdk/jre/lib/i386:/usr/lib/jvm/java-6-openjdk/jre/../lib/i386:/usr/java/packages/lib/i386:/usr/lib/jni:/lib:/usr/lib
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:os.name=Linux
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:os.arch=i386
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:os.version=2.6.32-40-generic
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:user.name=com
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:user.home=/home/com
2012-04-09 12:28:18,370 INFO org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/opt/com/hbase-0.90.4/bin
2012-04-09 12:28:18,372 INFO org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=master:60000
2012-04-09 12:28:18,436 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
2012-04-09 12:28:18,484 INFO org.apache.zookeeper.ClientCnxn: Socket connection established to localhost/127.0.0.1:2181, initiating session
2012-04-09 12:28:18,676 INFO org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, sessionid = 0x1369600cac10000, negotiated timeout = 180000
2012-04-09 12:28:18,740 INFO org.apache.hadoop.metrics.jvm.JvmMetrics: Initializing JVM Metrics with processName=Master, sessionId=hbase.com.com:60000
2012-04-09 12:28:18,803 INFO org.apache.hadoop.hbase.metrics: MetricsString added: revision
2012-04-09 12:28:18,808 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsUser
2012-04-09 12:28:18,808 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsDate
2012-04-09 12:28:18,808 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsUrl
2012-04-09 12:28:18,808 INFO org.apache.hadoop.hbase.metrics: MetricsString added: date
2012-04-09 12:28:18,808 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsRevision
2012-04-09 12:28:18,808 INFO org.apache.hadoop.hbase.metrics: MetricsString added: user
2012-04-09 12:28:18,808 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsVersion
2012-04-09 12:28:18,808 INFO org.apache.hadoop.hbase.metrics: MetricsString added: url
2012-04-09 12:28:18,808 INFO org.apache.hadoop.hbase.metrics: MetricsString added: version
2012-04-09 12:28:18,808 INFO org.apache.hadoop.hbase.metrics: new MBeanInfo
2012-04-09 12:28:18,810 INFO org.apache.hadoop.hbase.metrics: new MBeanInfo
2012-04-09 12:28:18,810 INFO org.apache.hadoop.hbase.master.metrics.MasterMetrics: Initialized
2012-04-09 12:28:18,940 INFO org.apache.hadoop.hbase.master.ActiveMasterManager: Master=hbase.com.com:60000
2012-04-09 12:28:21,342 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: hbase/192.168.15.20:54310\. Already tried 0 time(s).
2012-04-09 12:28:22,343 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: hbase/192.168.15.20:54310\. Already tried 1 time(s).
2012-04-09 12:28:23,344 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: hbase/192.168.15.20:54310\. Already tried 2 time(s).
2012-04-09 12:28:24,345 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: hbase/192.168.15.20:54310\. Already tried 3 time(s).
2012-04-09 12:28:25,346 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: hbase/192.168.15.20:54310\. Already tried 4 time(s).
2012-04-09 12:28:26,347 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: hbase/192.168.15.20:54310\. Already tried 5 time(s).
2012-04-09 12:28:27,348 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: hbase/192.168.15.20:54310\. Already tried 6 time(s).
2012-04-09 12:28:28,349 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: hbase/192.168.15.20:54310\. Already tried 7 time(s).
2012-04-09 12:28:29,350 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: hbase/192.168.15.20:54310\. Already tried 8 time(s).
2012-04-09 12:28:30,351 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: hbase/192.168.15.20:54310\. Already tried 9 time(s).
2012-04-09 12:28:30,356 FATAL org.apache.hadoop.hbase.master.HMaster: Unhandled exception. Starting shutdown.
java.net.ConnectException: Call to hbase/192.168.15.20:54310 failed on connection exception: java.net.ConnectException: Connection refused
    at org.apache.hadoop.ipc.Client.wrapException(Client.java:1095)
    at org.apache.hadoop.ipc.Client.call(Client.java:1071)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at $Proxy6.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)
    at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:118)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:222)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:187)
    at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1328)
    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:65)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1346)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:244)
    at org.apache.hadoop.fs.Path.getFileSystem(Path.java:187)
    at org.apache.hadoop.hbase.util.FSUtils.getRootDir(FSUtils.java:364)
    at org.apache.hadoop.hbase.master.MasterFileSystem.<init>(MasterFileSystem.java:81)
    at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:346)
    at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:282)
Caused by: java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:592)
    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:604)
    at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:434)
    at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:560)
    at org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:184)
    at org.apache.hadoop.ipc.Client.getConnection(Client.java:1202)
    at org.apache.hadoop.ipc.Client.call(Client.java:1046)
    ... 17 more
2012-04-09 12:28:30,361 INFO org.apache.hadoop.hbase.master.HMaster: Aborting
2012-04-09 12:28:30,361 DEBUG org.apache.hadoop.hbase.master.HMaster: Stopping service threads
2012-04-09 12:28:30,361 INFO org.apache.hadoop.ipc.HBaseServer: Stopping server on 60000
2012-04-09 12:28:30,362 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 0 on 60000: exiting
2012-04-09 12:28:30,362 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 1 on 60000: exiting
2012-04-09 12:28:30,362 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 2 on 60000: exiting
2012-04-09 12:28:30,362 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 3 on 60000: exiting
2012-04-09 12:28:30,363 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 4 on 60000: exiting
2012-04-09 12:28:30,363 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 5 on 60000: exiting
2012-04-09 12:28:30,363 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 6 on 60000: exiting
2012-04-09 12:28:30,363 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 7 on 60000: exiting
2012-04-09 12:28:30,364 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 8 on 60000: exiting
2012-04-09 12:28:30,364 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 9 on 60000: exiting
2012-04-09 12:28:30,364 INFO org.apache.hadoop.ipc.HBaseServer: Stopping IPC Server listener on 60000
2012-04-09 12:28:30,369 INFO org.apache.hadoop.ipc.HBaseServer: Stopping IPC Server Responder
2012-04-09 12:28:30,450 INFO org.apache.zookeeper.ClientCnxn: EventThread shut down
2012-04-09 12:28:30,450 INFO org.apache.zookeeper.ZooKeeper: Session: 0x1369600cac10000 closed
2012-04-09 12:28:30,450 INFO org.apache.hadoop.hbase.master.HMaster: HMaster main thread exiting
Mon Apr  9 12:28:40 PKT 2012 Stopping hbase (via master) 
```

* * *

(hadoop conf) core-site.xml

```
<?xml version="1.0"?><?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>
<property>
<name>hadoop.tmp.dir</name>
<value>/hadoop/tmp</value>
</property><property>
<name>fs.default.name</name>
<value>hdfs://localhost:54310</value>
</property>
</configuration> 
```

hdfs-site.xml

```
<?xml version="1.0"?><?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>
<property>
<name>dfs.replication</name>
<value>1</value>
</property>
<property>
<name>dfs.permissions</name>
<value>false</value>
</property>
</configuration> 
```

mapred-site.xml

```
<configuration>
<property>
<name>mapred.job.tracker</name>
<value>localhost:54311</value>
</property>
</configuration> 
```

(hbase conf) hbase-site.xml

```
<configuration>
<property>
<name>hbase.cluster.distributed</name>
<value>true</value>
</property>
<property>
<name>hbase.rootdir</name>
<value>hdfs://localhost:54310/hbase</value>
</property>
<!--added-->
<property>
<name>hbase.master</name>
<value>127.0.0.1:60000</value>
<description>The host and port that the HBase master runs at.
</description>
</property>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T19:38:43.303

尝试这个

使用 # 注释 /etc/hosts 文件中的 127.0.1.1 如果要使用 localhost，请将您的 ip 和计算机名称放在新行中，确保 127.0.0.1 localhost 在您的主机文件中，然后替换配置文件中所有出现的 ip替换为本地主机

如果您想使用 ip 而不是 localhost，请确保 ip 和等效域名存在于您的 hosts 文件中，并将所有出现的 localhost 替换为您的 ip。

与namenode相关的问题通常由于主机或IP配置错误而发生

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:40:03.827

尝试查看 /etc/hosts 文件和/或将 localhost 分配给 127.0.0.1。在您的示例中，它连接到 192.168.15.20:54310，而不是 127.0.0.1:54310

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:08:59.613

First check that in `habse-site.xml` the property `hbase.rootdir` is trying to connect to the same port as defined in `core-site.xml` for hadoop as `fs.default.name` .

Is `hbase.rootdir` is set to some `/tmp/hadoop` location ? (because that comes defult) change it to point on where your hdfs resides.

And first of all try `http://localhost:50070` and check for something like Namenode : --IP--:--port--. Give me that port.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:03:13.447

Take a look at java.io.FileNotFoundException: /hadoop/tmp/dfs/name/current/VERSION (Permission denied)

So, first of all - please see what do you have set as hbase.rootdir indeed - whether it is pointing to the HDFS or local filesystem. My example (with localhost for pseudo-distributed mode):

```
 <configuration>
        <property>
            <name>hbase.rootdir</name>
            <value>hdfs://localhost:54310/hbase</value>
        </property>
        <property>
            <name>hbase.master</name>
            <value>127.0.0.1:60000</value>
        </property>
    </configuration> 
```

Next, looking at your log it seems that most likely you're running using the local filesystem and you don't have the read/write access to the directory where HBase stores its data - check it with

```
mcbatyuk:/ bam$ ls -l / |grep hadoop
drwxr-xr-x   3 bam   wheel       102 Feb 29 21:34 hadoop 
```

If your base.rootdir is on HDFS you seem to have broken permissions, so you will need to change it with

```
# hadoop fs -chmod -R MODE /hadoop/ 
```

or change the property dfs.permissions to false in your $HADOOP_HOME/conf/hdfs-site.xml

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T18:20:12.887

不要使用临时目录，而是将 hdfs-site.xml 中的“dfs.name.dir”配置到您有权读取/写入的目录中。然后格式化后启动namenode（命令为“hadoop namenode -format”）。完成后，尝试启动 hbase。

# html - Joomla 2.5 自定义 html 模块仅适用于公共用户

> ID：10070499
> 
> 赞同：1
> 
> 时间：2012-04-09T08:01:00.987
> 
> 标签：html, joomla

使用 Joomla 版本。2.5 我有一个这样的自定义 Html：

```
<table border="0" cellpadding="1" cellspacing="1" style="width: 100%; ">
    <tbody>
        <tr>
            <td>
                <form action="/login" id="form-login" method="post" name="form-login">
                     <input class="button" name="Submit" type="submit" value="Log In" />
                </form>
            </td>
        </tr>
    </tbody>
</table> 
```

它只是一个链接到用户登录页面的按钮。我希望此按钮仅对未登录的公共用户启用（或可见）。或者如果用户登录到该站点，则使用另一个自定义代码。默认登录模块太大而无法显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T22:52:07.520

在 Joomla！2.5 默认用户组/视图和访问级别模拟旧的 1.5 样式组，并且如上所述是分层的。

要使元素（模块、文章、菜单项等）仅对未登录的用户可见，您需要创建一个“访客”用户组并将其设置为新访客所在的默认组。这“ Guest”组将在默认层次结构之外，这意味着您必须将当前拥有的所有项目设置为“Public”为“Guest”。

[Joomla 中](http://docs.joomla.org/Access_Control_List/1.6-2.5/Tutorial)有详细的描述和操作方法！[doc 的网站](http://docs.joomla.org/Access_Control_List/1.6-2.5/Tutorial)和[Brian Teeman 的简短文章。](http://brian.teeman.net/tips-and-tricks/the-guest-user-group-hiding-menu-items-and-modules.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T13:06:10.347

以防万一有人仍然无法解决这个问题，这里有一个关于如何使其与用户组一起工作的非常容易遵循的指南：http: [//docs.joomla.org/How_do_you_hide_something_from_logged_in_users%3F](http://docs.joomla.org/How_do_you_hide_something_from_logged_in_users%3F)

# matlab - MATLAB 我的代码不起作用

> ID：10070501
> 
> 赞同：1
> 
> 时间：2012-04-09T08:01:14.860
> 
> 标签：matlab

```
RGB = imread('image.jpg');
GRAY = rgb2gray(RGB);

threshold = graythresh(GRAY);
BWW = im2bw(GRAY, threshold);

BWW = bwareaopen(BWW,250); 
```

**我怎样才能让'im'成为'BWW'以使下一行工作？
（我应该如何完成'im ='的行**
我试图写BWW而不是im，但它不起作用（因为rgb2gray）。

```
im = 
im1 = rgb2gray(im);
im1 = medfilt2(im1,[15 15]);
BW = edge(im1,'sobel'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:18:18.700

您可能可以跳过`rgb2gray(im)`并直接执行`im1 = medfilt2(BWW, [15 15])`. 否则，您会将黑白转换为 RGB，然后再转换为灰度，但我认为灰度图像包含介于 0 和 1 之间的像素值，而黑白是只有 0 或 1 的灰度图像。所以转换为 RGB 然后再转换回灰度获胜不要改变图像。

# sql - SQLite LIKE & ORDER BY 匹配查询

> ID：10070508
> 
> 赞同：12
> 
> 时间：2012-04-09T08:01:42.570
> 
> 标签：sql, sqlite

我需要一个仅使用 LIKE 搜索 1 个字段的 SQLite 查询。

基本示例：

```
SELECT name FROM table WHERE name LIKE "%John%" ORDER BY name LIMIT 10; 
```

问题是我希望以这种方式对结果进行排序：

1.  如果字段相等（例如“John”）
2.  如果字段以“John”开头（例如“John Doe”）
3.  如果该字段包含“John”（例如“Jane John Doe”）

以下查询达到了预期的结果，但速度很慢：

```
SELECT name FROM table WHERE name LIKE "%John%" ORDER BY CASE WHEN name = "John" 
THEN 1 ELSE 2 END, CASE WHEN name LIKE "John%" THEN 1 ELSE 2 END, name LIMIT 10; 
```

上面的查询比使用 3 个单独的查询（一个用于完全匹配，一个用于开头，一个用于包含）的替代方法要慢（或者我测试它不正确）。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T08:05:36.870

以这种方式尝试：

```
SELECT name 
FROM table 
WHERE name LIKE "%John%" 
ORDER BY (CASE WHEN name = "John" THEN 1 WHEN name LIKE "John%" THEN 2 ELSE 3 END),name LIMIT 10 ; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T08:06:46.870

在等效测试中订购就足够了：

```
ORDER BY name = "John" DESC, name LIKE "John%" DESC 
```

ORDER BY 子句从左到右计算。

# c# - Open local file from a web page using link in gridview c#

> ID：10070510
> 
> 赞同：0
> 
> 时间：2012-04-09T08:01:47.797
> 
> 标签：c#, asp.net

I need to open a some types of files like .jpg, word, .pdf when the user clicks on link in gridview. Right now i am using this code and its not opening up.

It is a web application and i have to open the file which is present in the local drive of user. I would be binding the path of file in NavigateUrl property of the hyperlink

```
<asp:hyperlink ID="HyplnkName" runat="server" NavigateUrl= '<%# ConfigurationManager.AppSettings["ImagesFilePath"]) %>' Target="_top" Text='<%# DataBinder.Eval(Container, "DataItem.FileName") %>' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:11:08.193

这是我在项目中使用的

`<asp:HyperLink ID="hlPdf" runat="server" NavigateUrl="~/PdfHandler.ashx" Target="_blank">Click to view PDF</asp:HyperLink>`

这是 ashx 处理程序文件

```
using System;
using System.Web;
using System.IO;

public class PdfHandler : IHttpHandler 
{

  public void ProcessRequest (HttpContext context) 
  {
    byte[] data = File.ReadAllBytes(@"Your Path");
    context.Response.ContentType = "application/pdf";
    context.Response.OutputStream.Write(data, 0, data.Length);
  }

  public bool IsReusable {
    get {
        return false;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:15:31.623

改用 OnRowDataBound ：

页面：

```
<asp:GridView ID="GridView1" runat="server" 
    onrowdatabound="GridView1_RowDataBound">
<Columns>
<asp:TemplateField>
<ItemTemplate>
    <asp:HyperLink ID="HL" runat="server" Target ="_blank"></asp:HyperLink>
</ItemTemplate>
</asp:TemplateField>
</Columns>
</asp:GridView> 
```

后面的代码：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        HyperLink hlink = (HyperLink)e.Row.FindControl("HL");
        string url = "~/Docs/" + e.Row.Cells[1].Text;
        hlink.NavigateUrl = url;
        hlink.Text = "Read";
    }

} 
```

# php - 更新查询在 cake php 中不起作用

> ID：10070526
> 
> 赞同：0
> 
> 时间：2012-04-09T08:03:29.660
> 
> 标签：php, cakephp, cakephp-1.3

数据以这种形式出现

```
Array
(
[User] => Array
    (
        [first_name] => sxsaxs
        [last_name] => sdsdsd
        [contact_no] => 9569908024
        [address_1] => sdasd
        [address_2] => dsdsdsd
        [country_id] => 1
        [state_id] => 1
        [city_id] => 1
    )

) 
```

users_controller.php

```
public function my_account_edit(){

 if(!empty($this->data))
    {
         $this->User->id = $this->Auth->user('id');

     //   echo  $id= $this->User->id = $this->Auth->user('id'); it's working echo id

        if($this->User->save($this->data['User']))
            {

               $this->Session->setFlash("Account has been saved");
               $this->redirect(array('action' => 'my_account'));

            }

    } 
```

但更新查询不起作用 where id = $this->Auth->user('id');

我没有得到我的代码中的问题所在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:09:48.383

像这样试试

`$this->data['User']['id'] = $this->Auth->user('id');`

代替

`$this->User->id = $this->Auth->user('id');`

还要检查这个

`$this->User->save($this->data['User'])`做了`$this->User->save($this->data)`

# php - 无法在 PHP 中的 SwfUpload flash 上传器中上传视频

> ID：10070529
> 
> 赞同：0
> 
> 时间：2012-04-09T08:03:46.747
> 
> 标签：php, uploader

无法在 PHP 中的 SwfUpload flash 上传器中上传视频。我已经尝试以下脚本并且无法正常工作：

```
$('#swfupload-control').swfupload({
    upload_url: "swf/upload-file.php?fname="+ escape($("#cbocateid").val()),
    file_post_name: 'uploadfile',
    file_size_limit : "102400",
    file_types : "*.*",
    file_types_description : "All Files",
    file_upload_limit : 5,
    flash_url : "swf/js/swfupload/swfupload.swf",
    button_image_url : 'swf/js/swfupload/wdp_buttons_upload_114x29.png',
    button_width : 114,
    button_height : 29,
    button_placeholder : $('#button')[0],
    debug: false 
```

请帮忙 。

不在控制台上显示任何错误。

没有错误。上传图片没问题，但视频不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:14:29.643

将视频的大小与您上传的最大文件大小进行比较。如果它更大，您将遇到这种问题。

来自 kavoir.com 的快速代码片段，可让您查看最大上传大小：

```
$max_upload = (int)(ini_get('upload_max_filesize'));
$max_post = (int)(ini_get('post_max_size'));
$memory_limit = (int)(ini_get('memory_limit'));
$upload_mb = min($max_upload, $max_post, $memory_limit); 
```

# java - 如何在我的课堂上使用带有休眠的spring来获取会话工厂

> ID：10070532
> 
> 赞同：3
> 
> 时间：2012-04-09T08:03:57.477
> 
> 标签：java, spring, hibernate

在这里我面临一个问题，我在 application.xml 文件中配置了休眠 sessionfactory，之后我如何在我的 HibDao 类（用户定义的类）中获取 sessionFactory 以启用用户友好性，如 begin()、commit()、rollback( ) 扩展 HibernateDaoSupport 类..

这是我的 application-hibernate.xml 文件：

```
 <beans>   

<bean id="sessionFactory"       class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">     
    <property name="configLocation" value="/WEB-INF/hibernate.cfg.xml" />
</bean>

<!-- Transaction manager for a single Hibernate SessionFactory (alternative 
    to JTA) -->
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory">
        <ref local="sessionFactory" />
    </property>
</bean>

<!-- ========================= BUSINESS OBJECT DEFINITIONS ========================= -->

<!-- Data access object: Hibernate implementation. -->

<bean id="HibernateSpringDaoTarget" class="com.netprofit.dao.HibernateSpringDAOImpl">
    <property name="sessionFactory">
        <ref local="sessionFactory" />
    </property>
</bean>

<!-- - Transactional proxy for Application's central data access object. 
    - - Defines specific transaction attributes with "readOnly" markers, - which 
    is an optimization that is particularly valuable with Hibernate - (to suppress 
    unnecessary flush attempts for read-only operations). - - Note that in a 
    real-life app with multiple transaction proxies, - you will probably want 
    to use parent and child bean definitions - as described in the manual, to 
    reduce duplication. -->

<bean id="SpringHibernateDao"
    class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
    <property name="transactionManager">
        <ref local="transactionManager" />
    </property>
    <property name="target">
        <ref local="HibernateSpringDaoTarget" />
    </property>
    <property name="transactionAttributes">
        <props>
            <prop key="get*">PROPAGATION_REQUIRED,readOnly</prop>
            <prop key="find*">PROPAGATION_REQUIRED,readOnly</prop>
            <prop key="load*">PROPAGATION_REQUIRED,readOnly</prop>
            <prop key="store*">PROPAGATION_REQUIRED</prop>
            <prop key="add*">PROPAGATION_REQUIRED</prop>
        </props>
    </property>
</bean> 
```

这是 hibernate-cfg.xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
         <!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
     <hibernate-configuration>
<session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/netprofit</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">test</property>
    <property name="hibernate.connection.autocommit">false</property>
    <property name="hibernate.hbm2ddl.auto">update</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.format_sql">true</property>
    <property name="hibernate.jdbc.batch_size">50</property>

    <property name="hibernate.c3p0.max_size">1</property>
    <property name="hibernate.c3p0.min_size">0</property>
    <property name="hibernate.c3p0.timeout">5000</property>
    <property name="hibernate.c3p0.max_statements">1000</property>

    <property name="hibernate.c3p0.idle_test_period">300</property>
    <property name="hibernate.c3p0.acquire_increment">1</property>

    <mapping class="com.netprofit.dao.hibernate.HUserRegistrationPojo" />
</session-factory> 
```

这是 HibDao 类（为简单起见，用户定义的类）：

```
 public class HibDao extends HibernateDaoSupport {
private static final ThreadLocal THREAD = new ThreadLocal();

protected HibDao() {
}

public static Session session() throws Exception {
    Session session = (Session) HibDao.THREAD.get();
    if (session == null) {            
        session = getSessionFactory().openSession();  **--->>>Here how can i open the Session**
        HibDao.THREAD.set(session);
        session().setFlushMode(FlushMode.COMMIT);
    }
    return session;
}

protected static void begin() throws Exception {
    session().beginTransaction();

}

protected static void commit() throws Exception {
    session().getTransaction().commit();
}

protected static void rollback() throws Exception {
    session().getTransaction().rollback();
    session().close();
    HibDao.THREAD.set(null);
}

protected static void flush() throws Exception {
    session().flush();
}

protected static void close() throws Exception {

    session().close();
    HibDao.THREAD.set(null);
}
 } 
```

之后我只是扩展 HibDao 类并使用 begin()、commit() 和 rollback() 方法来处理休眠事务......而且我不熟悉 Spring......

谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:47:31.047

没有指定具体问题（没有注释行）。我读到这样的问题 - “我已经在 xml 文件中注入了 SessionFactory bean。现在，我想在 Java 程序中重新收集它。”

简单的！

```
ApplicationContext context = new FileSystemXmlApplicationContext("c:/../application-hibernate.xml");
SessionFactory sessionFact = (SessionFactory) context.getBean("sessionFactory"); 
```

现在你可以这样做：

```
Session session =  sessionFact.openSession(); 
```

注意：我是通过直接解析 xml 文件来获取 bean，这不是一个好习惯。在理想情况下，您将从 Servlet/Action 类的请求对象中获取 ApplicationContext 对象。

# android - 将列表视图滚动到所需的结果位置

> ID：10070538
> 
> 赞同：0
> 
> 时间：2012-04-09T08:04:46.473
> 
> 标签：android, listview, search, scroll

当我尝试搜索列表视图时，它应该滚动到获得的结果而不是过滤内容。例如，如果我键入“De”，它应该滚动到列表中与 Char 序列“De”匹配的第一个项目，而不是过滤与该序列匹配的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:14:47.393

只需找到字符序列（在您的情况下为 DE）可用的位置。

然后通过调用滚动 ListView

```
listView.setSelection(position); 
```

# c# - 如何将“abc”修剪成“ab c”

> ID：10070540
> 
> 赞同：11
> 
> 时间：2012-04-09T08:05:14.683
> 
> 标签：c#, .net, algorithm

> **可能重复：**
> [如何在 C# 中用单个空格替换多个空格？](https://stackoverflow.com/questions/206717/how-do-i-replace-multiple-spaces-with-a-single-space-in-c)

如何修剪字符串中的空白最优雅的方法是`" a<many spaces>b c "`into `"a b c"`. 因此，重复的空格被缩小为一个空格。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T08:06:58.570

一个没有正则表达式的解决方案，只是为了把它放在桌子上：

```
char[] delimiters = new char[] { ' '};   // or null for 'all whitespace'
string[] parts = txt.Split(delimiters, StringSplitOptions.RemoveEmptyEntries);
string result = String.Join(" ", parts); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-09T08:07:23.487

你可以用`Regex`这个：

```
Regex.Replace(my_string, @"\s+", " ").Trim(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-09T08:11:00.217

```
Regex.Replace(my_string, @"^\s+|\s+$|(\s)\s+", "$1"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-09T08:17:13.193

使用该`Trim`方法从字符串的开头和结尾删除空格，并使用正则表达式来减少多个空格：

```
s = Regex.Replace(s.Trim(), @"\s{2,}", " "); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-09T08:09:14.197

你可以做一个

```
Regex.Replace(str, "\\s+", " ").Trim() 
```

[http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T09:06:56.903

```
 Regex rgx = new Regex("\\s+");
        string str;
        str=Console.ReadLine();
        str=rgx.Replace(str," ");
        str = str.Trim();
        Console.WriteLine(str); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-09T08:09:06.493

```
Regex.Replace(str, "[\s]+"," ") 
```

然后调用 Trim 删除前导和尾随空格。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-09T08:13:20.253

使用正则表达式

```
String test = " a    b c ";
test = Regex.Replace(test,@"\s{2,}"," ");
test = test.Trim(); 
```

此代码用一个空格替换任何 2 个或多个空格，`Regex`然后在开头和结尾删除。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-09T08:18:47.237

使用正则表达式：

```
"( ){2,}" //Matches any sequence of spaces, with at least 2 of them 
```

并用它来用“”替换所有匹配项。

我还没有在 C# 中完成它，我需要更多时间来弄清楚文档所说的内容，所以你必须自己找到它......对不起。

# user-interface - 使用 MFC 的 GUI 用户定义的按钮形状

> ID：10070564
> 
> 赞同：0
> 
> 时间：2012-04-09T08:08:26.403
> 
> 标签：user-interface, mfc

我们是否可以灵活地为使用 MFC 创建的 GUI 的各种元素提供用户定义的形状？例如，我可以使用 MFC 开发一个 GUI，其菜单类似于[这个](http://www.webdeveloperjuice.com/wp-content/uploads/2011/02/apple.jpg)吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:13:20.083

是的你可以。有几种方法，最核心的方法是使用 SetWindowRgn() - 这样您可以精确控制窗口的形状，但没有每个像素的 alpha。您还可以使用 CodeProject 上提供的众多类之一来执行此操作。您还可以查看 Ultimate Toolbox，它很旧，但可能包含足以满足您需求的东西。您还可以使用 SetLayeredWindow() API，它为您提供每像素 alpha。[从http://msdn.microsoft.com/en-us/library/ms997507.aspx](http://msdn.microsoft.com/en-us/library/ms997507.aspx)开始，然后在 CodeProject 上搜索关键字，寻找可以帮您摆脱苦差事的控件。或者，查看像 Codejock 等现代工具包，它们不是免费的，但可以为您节省大量时间，具体取决于您想要将什么以及多少效果合并到您的应用程序中。

# linux - 客户端有多少种方法可以尽快减少TIME_WAIT的次数

> ID：10070567
> 
> 赞同：0
> 
> 时间：2012-04-09T08:08:35.950
> 
> 标签：linux, sockets, client, time-wait

如果我们每次需要写入或读取数据库时都必须连接数据库（redis）。一些操作后关闭连接。因为连接很频繁（假设情况必须先连接然后关闭）。结果，太多的TIME_WAIT状态套接字留在内核中。就像是 ：

```
`netstat -vatnl | grep 6379

tcp 0 0 127.0.0.1:6379 0.0.0.0:* 听         
tcp 0 0 127.0.0.1:36476 127.0.0.1:6379 TIME_WAIT   
tcp 0 0 127.0.0.1:37193 127.0.0.1:6379 已建立
tcp 0 0 127.0.0.1:36480 127.0.0.1:6379 TIME_WAIT   
tcp 0 0 127.0.0.1:36479 127.0.0.1:6379 TIME_WAIT   
tcp 0 0 127.0.0.1:36472 127.0.0.1:6379 TIME_WAIT   
tcp 0 0 127.0.0.1:36457 127.0.0.1:6379 TIME_WAIT   
tcp 0 0 127.0.0.1:36460 127.0.0.1:6379 TIME_WAIT   
tcp 0 0 127.0.0.1:36481 127.0.0.1:6379 TIME_WAIT`

```

1.  我们可以在客户端重用端口吗？使用 sock opt SO_REUSEPORT 在 connect() 之前调用 bind()
2.  `sysctl -w net.ipv4.tcp_timestamps=1 sysctl -w net.ipv4.tcp_tw_recycle=1`<
    这种方式确实有很大帮助。但是我仍然可以看到许多TIME_WAIT状态
3.  设置套接字选择 SO_LINGER`l_onoff=0 ; l_liger=1` 或其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:35:02.080

TIME_WAIT 是 tcp 协议拆除过程的一部分。它们确保旧连接的数据包不被接受为新连接的一部分。因此，除非有 1000 个，否则应该保持原样。

话虽如此，由于源/目标是本地主机，因此不应将旧连接的数据包视为新连接的数据包。在您提出的解决方案中，可以使用 1 个。解决方案 2 和 3 可能具有更广泛的影响，因此请在应用之前检查。

# .htaccess - mod_rewrite 和 SEO 对重定向 301 友好

> ID：10070575
> 
> 赞同：0
> 
> 时间：2012-04-09T08:09:16.880
> 
> 标签：.htaccess, mod-rewrite

我的 .htaccess 文件中有以下内容：

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^$ /Home [R,NC] 
RewriteRule ^Home$ /index.php [NC,L] 
```

但如果我去 mydomain.com/index.php 仍然可以访问并显示与 mydomain.com/Home 相同的内容。这对我来说没问题，但对 SEO 来说并不好，因为我有重复的内容，所以当我访问 /index.php 时，有没有办法进行重定向并将 URL 重写为 /Home ？我尝试

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^$ /Home [R,NC] 
RewriteRule ^Home$ /index.php [NC]
RewriteRule ^index.php$ /Home [R=301,L] 
```

但它在循环中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:59:49.313

如果它确实是相同的内容，你应该去寻找[规范链接](http://en.wikipedia.org/wiki/Canonical_link_element)，而不是摆弄 mod-rewrite/htaccess 的深层地牢。

# windows - 将堆内存映射到共享内存 (Windows)

> ID：10070578
> 
> 赞同：2
> 
> 时间：2012-04-09T08:09:54.527
> 
> 标签：windows, memory, memory-mapped-files

假设我有一个函数，它将指向（进程）堆内存的指针作为输入。此函数与同一系统上的服务进程通信，并使用共享内存进行通信（我需要最大吞吐量，因此这是我可以使用的唯一可接受的 IPC 形式）。

有没有办法将已经分配的堆内存用作共享内存（即映射到文件）而无需重新分配相同大小的共享内存缓冲区？因为我需要支持几百兆字节（可能是千兆字节）的内存缓冲区，并且不得不两次分配这么多内存很糟糕。

此外，由于延迟，分配一个小的共享内存缓冲区并重复使用它是不可接受的（因为我需要在两个进程之间多次同步小缓冲区更新）。

我可以设计我的函数，使其需要一个指向共享内存的指针，但这会给我的函数的用户带来负担（因为他们必须自己管理他们的共享内存）并且灵活性要差得多，并且会产生相当如果管理不当，会产生很多开销。

TL;DR：我需要一种方法来映射堆内存，以便另一个进程可以直接写入其中而无需通过中间共享内存缓冲区。

有谁知道这是怎么做到的吗？谢谢。

# c++ - 根据其大小自动按值或按引用传递类

> ID：10070580
> 
> 赞同：4
> 
> 时间：2012-04-09T08:10:02.193
> 
> 标签：c++, type-conversion, pass-by-reference, pass-by-value

我有这个类，我想将它作为 LPARAM 参数传递给 Windows。由于它足够小以适合 LPARAM 我想通过值传递它，但如果它稍后扩展我希望它自动切换到通过引用传递。

~~我会使用类似的东西~~

`typedef boost::call_traits<CMyClass>::param_type CMyClassParam;`

~~这应该是`const CMyClass`或者`const CMyClass&` 取决于`sizeof(CMyClass) <= sizeof(LPARAM)` call_traits 是否只优化小 POD，而不是小类。~~

typedef 由 Anycorn 的建议处理： `typedef boost::mpl::if_c<(sizeof(CMyClass) <= sizeof(LPARAM)), CMyClass, CMyClass&>::type CMyClassParam;`

然后，我如何在 CMyClassParam 和 LPARAM 之间进行转换（如果你不知道，LPARAM 是 int，足够长以存储指针）

```
CMyClass::operator LPARAM()
{
    // must be either
    return *(LPARAM*)this;
    //or
    return reinterpret_cast<LPARAM>(this);
}
    //so that I may call:

void SomeWinFunc(LPARAM p);

CMyClass vi;
SomeWinFunc(vi);

// and then get it back:
void SomeWinCallback(LPARAM p)
{
    CMyClassParam vi = (?????)p;
    // which should translate into either
    CMyClass ti = *(CMyClass*)(&p); // make a bitwise copy
    // or
    CMyClass& ti = *(CMYClass*)p;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:20:15.680

类似的东西？

```
typedef typename mpl::if_c<(sizeof(T) <= MAX), T, T&>::type P;
P param = p; 
```

但我认为编译器会自动为你优化这个

# entity-framework - DbContext ChangeTracker 关系问题

> ID：10070581
> 
> 赞同：0
> 
> 时间：2012-04-09T08:10:11.570
> 
> 标签：entity-framework, entity-framework-4.1, change-tracking

假设我们有`Customers`和`CustomerCategories`与 nn 的关系 DbContext/ObjectContext。我也想保持`AuditLog`表中的关系状态。在常规情况下，我可以通过以下代码达到此目的：

`ChangeTracker`通过以下代码获取关系的状态：

```
foreach (ObjectStateEntry dbEntry in){ 
   objectContext
   .ObjectStateManager
   .GetObjectStateEntries(~EntityState.Detached)
   .Where(o=>o.IsRelationship) 
```

然后通过以下代码找到两个相关实体的键：

```
(dbEntry.CurrentValues.GetValue(0) as EntityKey).EntityKeyValues[0].Value //for the key of related entity in customers table 
(dbEntry.CurrentValues.GetValue(1) as EntityKey).EntityKeyValues[0].Value //for the key of related entity in CustomerCategories table 
```

除非新添加的相关 Customer 或相关 CustomerCategories 导致上述代码返回 null，否则一切正常。所以我找不到相关实体。

反正有没有正确找到相关实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:23:31.597

最后，几个小时后，我找到了一个简单的解决方案：`GetObjectByKey`ObjectContext 有而 DbContext 没有的方法！它通过实体引用搜索整个上下文。所以我做了它而不是上面的代码：

```
 objectContext.GetObjectByKey((dbEntry.CurrentValues.GetValue(0) as EntityKey));
 objectContext.GetObjectByKey((dbEntry.CurrentValues.GetValue(1) as EntityKey)); 
```

# php - 每个目录的 PHP ini 指令取决于 request_uri

> ID：10070585
> 
> 赞同：4
> 
> 时间：2012-04-09T08:10:45.713
> 
> 标签：php, apache, symfony1, apache2

我正在尝试更改上传的大小限制。我知道我必须在 Apache 配置中更改这些指令（有些不能使用 ini_set 更改）

```
php_value session.gc_maxlifetime 3600
php_value max_input_time         3600
php_value max_execution_time     3600
php_value upload_max_filesize    10M
php_value post_max_size          110M 
```

不幸的是，我不能直接在`<Directory>`我的虚拟主机中这样做，因为目录总是相同的（我使用的是前端控制器，因此所有请求都通过 index.php 并被分派到正确的控制器 - 我使用 Symfony )

那么，我的问题是如何避免这个问题？我不想为整个应用程序设置这些值，只为特定操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:28:35.810

这是可能的，具体取决于您映射到前端控制器的方式。如果您通过重写规则执行此操作，则可以使用 a`<Location>`而不是`<Directory>`块来指定要更改设置的路径块。`<LocationMatch>`让您对同一件事使用正则表达式。

如果您的所有外部 URL 都真正开始，请`/index.php?`考虑为这些请求设置重定向规则：

```
RewriteEngine on
RewriteRule ^foo/$ ^/index.php [L]

<Location /foo/>
    php_value ...
</Location> 
```

如果不是这种情况，您需要告诉我们更多关于您的应用程序结构的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:26:51.297

一种可能的解决方法是创建一个目录，其中包含一个实现您的操作的 PHP 文件，并使用“自定义”URL 提交 POST 目标该文件的脚本。处理完输入后，您将通过`index.php`. 它不干净，但它应该可以工作。

同样值得考虑的是，您究竟能从中获得什么。

*   `session.gc_maxlifetime`只设置*一个*动作没有任何意义（特别是如果你正在增加它）
*   如果也是一小时，限制`max_input_time`为一小时也没有意义`max_execution_time`
*   `max_execution_time`可以在运行时设置
*   其他两个指令不能在运行时设置，但 POST 大小应该无关紧要，上传的文件大小*可以*在运行时检查并进行相应处理

那么，这里的目的是什么？

# html - CSS不透明度继承问题

> ID：10070590
> 
> 赞同：4
> 
> 时间：2012-04-09T08:11:15.523
> 
> 标签：html, css, opacity

> **可能重复：**
> [CSS Opacity 属性](https://stackoverflow.com/questions/8237886/css-opacity-property)

我正在一个具有透明度的图像上制作一个图层，我在那里遇到了问题。

当我在图层上写下任何文本时，它们也会获得相同的透明度。

我认为这是因为继承问题并添加了“位置：相对”来重置我的子 div，但它根本不起作用。

我只想重置子div的不透明度（下面的#TXT）。

这是我的代码。

```
<!DOCTYPE html>
<html>
<header>
    <meta charset="UTF-8">
    <style type="text/css">
        *{margin: 0; padding:0; background-color: #555;}
        #wrapper {
            margin:0 auto; 
            background-color: white;
            width: 922px;
            height:349px;
            margin-top: 150px;
            -webkit-box-shadow: 0px 0px 7px 7px #333;
            -moz-box-shadow: 0px 0px 7px 7px #333;
            }   

        #ImgSection {
            width: 922px;
            height: 349px;
            background-color: white;
            position: absolute;
            background: url("brand-new-car.jpg") -50px -200px no-repeat;
            }

        #TxtSection {
            width: 322px;
            height: 349px;
            background-color: #222;
            opacity: .5;        
            float: right;
            -webkit-box-shadow: inset 3px 0px 3px 0px black;
            -moz-box-shadow: inset 3px 0px 3px 0px black;
            }

            #TXT{
            position: relative;
            font-size: 50px;
            opacity: 1;
            }

    </style>
    <script type="text/javascript">

    </script>
</header>
<body>
    <div id="wrapper">
        <div id="ImgSection"></div>
        <div id="TxtSection">
            <div id="TXT">dsdsad</div>
        </div>
    </div>
</body>
</html> 
```

图像brand-new-car.jpg 的大小为1024x768。

我想知道如何重置#TXT 的不透明度。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T12:06:16.757

嗨，我提到了您可以通过它增加和减少背景不透明度的属性，并且不会影响文本颜色，它很简单，请参见 css，基本上您必须在背景 alpa 中使用 rgb 颜色来获得不透明度。

背景：rgba（146,146,146,0.1）；

或查看示例：- [http://jsfiddle.net/8LFLd/3/](http://jsfiddle.net/8LFLd/3/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T08:43:37.003

如果您想以透明方式进行成像，因为 hsla 或 rgba 仅适用于颜色，您将不得不破解您的方式。您必须修改 HTML，取出文本包装器，然后将其放置在图像层上。这是唯一的出路。

在这里，您可以找到支持相同 hack 的 Chris Coyier。[http://css-tricks.com/non-transparent-elements-inside-transparent-elements/](http://css-tricks.com/non-transparent-elements-inside-transparent-elements/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T08:18:39.810

您无法重置不透明度。它被所有后代继承。

但：

*   您可以将 rbga/hsla/alpha-png 背景和 rgba/hsla 颜色用于文本和边框，以实现类似的效果（但需要更多工作）。

# mysql - 在 WordPress 自定义 SELECT 查询中使用 MIN

> ID：10070591
> 
> 赞同：1
> 
> 时间：2012-04-09T08:11:19.057
> 
> 标签：mysql, wordpress, greatest-n-per-group

我正在尝试创建一个自定义`SELECT`查询，以从 WordPress 自定义类型中找到我的个人最佳比赛，其中时间是自定义元字段。

这是我用来选择帖子的查询。我已经简化了它以进行调试，但最终我想选择几个术语 slug 并找到`MIN`每个 using `GROUP BY`：

```
 SELECT      t.slug,
                    p.ID, 
                    p.post_date,
                    p.post_title,                    
                    m.meta_value as pb_mins
        FROM        $wpdb->posts p,
                    $wpdb->postmeta m,
                    $wpdb->term_relationships tr,
                    $wpdb->term_taxonomy tt,
                    $wpdb->terms t
        WHERE       p.ID = tr.object_id
                AND p.ID = m.post_id
                AND tr.term_taxonomy_id = tt.term_taxonomy_id
                AND tt.term_id = t.term_id
                AND p.post_type = 'runs'
                AND m.meta_key = 'ssr_duration_min'
                AND t.slug in ('10mi') 
```

（我将结果输出到一个数组并`print_r`用于临时检查它。）

这将选择两个带有“10mi”术语的比赛/跑步，并为它们显示正确的时间/日期/标题。

当我添加`MIN`函数时问题来了：

```
 SELECT      t.slug,
                    p.ID, 
                    p.post_date,
                    p.post_title,                    
                    MIN(m.meta_value) as pb_mins 
```

选择了正确的（最短）时间，但其他详细信息（日期、标题）来自其他 10 英里的跑步/比赛。

我尝试更改`FROM`要使用的子句，`LEFT JOIN`但`INNER JOIN`同样的事情发生了：选择两个“10mi”运行都很好，但是当我添加`MIN`函数时会给出错误的输出。

谢谢你尽你所能的帮助。这是我在这里的第一篇文章，所以如果我需要添加更多细节，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:30:41.127

我从来没有来得及发布我的解决方案。现在已经有一段时间了，所以我什至不完全记得我是如何达到它的（很可能是反复试验），但如果这对任何人有帮助，欢迎他们。如果我想到更多细节，我会将它们作为评论添加到这个答案中。

```
 SELECT      p1.ID,
                        m1.meta_value,
                        t1.name
            FROM        $wpdb->posts p1,
                        $wpdb->postmeta m1,
                        $wpdb->term_relationships tr1,
                        $wpdb->term_taxonomy tt1,
                        $wpdb->terms t1,
                        (   SELECT      t2.slug as pb_distance,
                                        MIN(m2.meta_value) as pb_duration
                            FROM        $wpdb->posts p2,
                                        $wpdb->postmeta m2,
                                        $wpdb->term_relationships tr2,
                                        $wpdb->term_taxonomy tt2,
                                        $wpdb->terms t2
                            WHERE       p2.ID = tr2.object_id
                                    AND p2.ID = m2.post_id
                                    AND tr2.term_taxonomy_id = tt2.term_taxonomy_id
                                    AND tt2.term_id = t2.term_id
                                    AND p2.post_type = 'runs'
                                    AND p2.post_status = 'publish'
                                    AND m2.meta_key = 'ssr_duration_min'
                                    AND t2.slug IN $slugs
                            GROUP BY    t2.slug ) pb
            WHERE       p1.ID = m1.post_id
                    AND p1.ID = tr1.object_id
                    AND tr1.term_taxonomy_id = tt1.term_taxonomy_id
                    AND tt1.term_id = t1.term_id
                    AND p1.post_type = 'runs'
                    AND p1.post_status = 'publish'
                    AND m1.meta_key = 'ssr_duration_min'
                    AND t1.slug in $slugs
                    AND m1.meta_value = pb.pb_duration
            ORDER BY    meta_value+0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:35:36.540

我使用的另一个选项也适用于稍微不同的查询，如下所示：

```
 SELECT      p.ID,
                    m.meta_value,
                    t.name
        FROM        $wpdb->posts p,
                    $wpdb->postmeta m,
                    $wpdb->term_relationships tr,
                    $wpdb->term_taxonomy tt,
                    $wpdb->terms t
        WHERE       p.ID = m.post_id
                AND p.ID = tr.object_id
                AND tr.term_taxonomy_id = tt.term_taxonomy_id
                AND tt.term_id = t.term_id
                AND p.post_type = 'runs'
                AND p.post_status = 'publish'
                AND m.meta_key = 'ssr_duration_min'
                AND t.slug IN $slugs
        ORDER BY    meta_value+0
        LIMIT       1 
```

这基本上按价值排序，只接受第一个答案，即。最低。

# c# - 如何解决：为什么我无法获得锁？

> ID：10070592
> 
> 赞同：1
> 
> 时间：2012-04-09T08:11:20.593
> 
> 标签：c#, visual-studio-2010

在调试器中，当执行这样的代码行时，我“冻结”了：`lock (myvar)`显然其他人正在持有`myvar`. 但是我希望在这条线上`myvar`应该是免费的。所以我想知道代码的哪一部分`myvar`（来自另一个线程）。我怎样才能做到这一点？我知道哪个线程持有它（因为我只有另一个线程），但我不知道在哪里。

**upd**解决了，我忘记打电话`Monitor.Exit(myvar)`了`Monitor.TryEnter(myvar)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T08:16:56.943

如果您正在使用`Visual Studio 2010`，您可以查看[Parallel Stacks](http://msdn.microsoft.com/en-us/library/dd998398.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T08:16:12.280

该`lock()`语句使用`Monitor`不支持查询锁定线程的类。
在 Fx 4.5 中，您可以检查`Monitor.IsEntered(myVar)`但仅此而已。

其余的应该来自​​您的代码逻辑。

# c++ - 如何延续链条？

> ID：10070597
> 
> 赞同：0
> 
> 时间：2012-04-09T08:12:04.377
> 
> 标签：c++, box2d

我使用 Box2d。

我创建了 ChainShape。

突然，我需要继续这个链条。
我知道命令`SetNextVertex(b2Vec2(-2.0f, 0.0f));`

**怎么用？如何延续链条？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:22:38.317

在这里，您创建了一个循环（第一个和最后一个顶点已连接）。这样链就完成了。

如果你不想要一个循环，你应该使用 CreateChain。

[请参阅http://box2d.org/manual.pdf](http://box2d.org/manual.pdf)中的 4.6 链形状

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:09:13.440

**当前唯一的解决方案是 iforce2d 提到的，创建一个新的夹具并替换原来的夹具。**

为什么？

正如安德鲁所说。“您已经创建了一个循环（第一个和最后一个顶点已连接）”。

这意味着实现方式：假设您有三个顶点，A:(0,0); 乙：（0,5）；C:(5,0)。CreateLoop(vertices, 3) 的长度为 4 而不是 3...索引 0:A、1:B、2:C 和 3:A（再次注意 A）。SetNextVertex 的作用是将另一个顶点 D:(1,1) 添加到后面（即制动循环），即 4:D。不幸的是，您不能在最后一个索引之前插入顶点，从而保持循环。

如果您想继续向循环中添加顶点，请提出功能请求：）

# wcf - ServiceReferences.ClientConfig 缺失 - Azure 上带有 Silverlight 的 WCF

> ID：10070598
> 
> 赞同：0
> 
> 时间：2012-04-09T08:12:22.480
> 
> 标签：wcf, silverlight, azure

我在 Azure 中运行了一个相当简单的 WCF 服务。在单独的 Azure 部署中，我有一个 Silverlight 应用程序需要访问 WCF 服务。

我已将该服务创建为启用 Silverlight 的 WCF 服务，并且我已经能够使用“添加服务引用”来访问该对象。但是，当我创建客户端时，我收到以下消息。

> 在 .xap 应用程序包中找不到“ServiceReferences.ClientConfig”。此文件用于为 Web 服务配置客户端代理，并允许应用程序找到它需要的服务。要么将此文件包含在应用程序包中，要么修改您的代码以使用显式指定服务地址和绑定的客户端代理构造函数。有关详细信息，请参阅内部异常。

我在互联网上的任何地方，他们都告诉我简单地包含 ServiceReferences.ClientConfig 但我无法在我的 WCF 服务项目或我的 Silverlight 项目中的任何地方找到这个 ServiceReferences.ClientConfig 文件，所以我无法将它添加到我的 XAP . 我尝试使用特定的构造函数指定端点 URL，但我得到了同样的错误。

所以缺少 ServiceReferences.ClientConfig。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:04:47.217

经过一番折腾，我明白了。当我右键单击服务引用并更新它时，该文件自动出现在我的解决方案中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T13:14:45.583

我会查看实际的项目文件夹。也许您在 Visual Studio 中的设置隐藏了该文件。如果它真的不存在，你可以创建它。看一眼：

[http://www.mohamedibrahim.net/blog/2010/01/27/creating-and-using-silverlight-app-settings-webconfig-configuration-application-settings-to-change-wcf-service-address-after-部署-servicereferencesclientconfig-servicereferences-clientconfig/](http://www.mohamedibrahim.net/blog/2010/01/27/creating-and-using-silverlight-app-settings-webconfig-configuration-applicatioin-settings-to-change-wcf-service-address-after-deployment-servicereferencesclientconfig-servicereferences-clientconfig/)

您也可以查看该文件的替代品，如果您愿意，也许可以使用它：

[http://weblogs.asp.net/manishdalal/archive/2009/02/23/silverlight-servicereferences-clientconfig-alternatives.aspx](http://weblogs.asp.net/manishdalal/archive/2009/02/23/silverlight-servicereferences-clientconfig-alternatives.aspx)

# php - PhP 与 GAE 和 Google Cloud SQL

> ID：10070600
> 
> 赞同：3
> 
> 时间：2012-04-09T08:12:46.790
> 
> 标签：php, google-app-engine, quercus, google-eclipse-plugin, google-cloud-sql

我正在创建一个使用 php 运行的网络应用程序`google app engine`。我希望用来`google cloud sql`存储数据。我在开发过程中使用了本地 MySQL 实例。我已经添加`quercus`到我的项目中并编写了简单的 php 代码来从现有的 mysql 数据库中检索数据。但是当我运行我的 php 文件时出现以下错误。

```
D:\workspace\PHPStore\war\info.php:6: Warning: A link to the server could not be established. url=jdbc:mysql://localhost:3306/?characterEncoding=ISO8859_1 driver=com.mysql.jdbc.Driver com.caucho.quercus.QuercusModuleException: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver [mysql_connect] Unable to select database 
```

php文件的第6行是，

```
mysql_connect(localhost,$username,$password); 
```

错误是什么？我怎样才能纠正这个并检索数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T04:27:46.460

Cloud SQL 不像常规 MySQL 数据库那样通过套接字连接提供；它可以通过云 SQL 特定的 JDBC 驱动程序访问。因此，您不能使用 PHP 的内置`mysql`API；您必须使用 Java 中的 JDBC 连接器，如此[处](https://developers.google.com/cloud-sql/docs/developers_guide_java)所述。

# java - PF 或 var 中数据表的条件着色与数据表中的绑定标签

> ID：10070604
> 
> 赞同：0
> 
> 时间：2012-04-09T08:13:42.277
> 
> 标签：java, datatable, primefaces

我有一个数据表和一个收集器。数据表中的每一行都有一个按钮，该按钮将相应的行添加到收集器。我想为这个数据表添加条件着色。条件是所选行是否在收集器中。

```
<p:dataTable rowStyleClass="#{backingBean.selectedMemberList.contains(aMember) ? 'passive' : 'active'}" style="width: 100%;" id="dTable" var="aMember" value="#{backingBean.memberList}">
   <p:column>
   ...
  </p:column>

  <p:column>
      <p:commandButton id="btn_add" value="Add" update=":mf:op" process=":mf:op_uk">
          <p:collector value="#{aMember}" addTo="#{backingBean.selectedMemberList}" />
       </p:commandButton>
  </p:column> 
```

后备豆：

```
List<Member> selectedMemberList;
List<Member> memberList;

//getter and setter methods 
```

上面的代码做了被动样式类，但不添加主动样式。我认为这可能是因为我无法将 var（请求范围）传递给支持 bean。所以我尝试将值绑定到支持 bean 值：

```
<p:dataTable binding="#{backingBean.anotherMember}" rowStyleClass="#{backingBean.selectedMemberList.contains(aMember) ? 'passive' : 'active'}" style="width: 100%;" id="dTable" var="aMember" value="#{backingBean.memberList}"> 
```

支持豆：

```
private Member anotherMember;
//getter and setter methods 
```

但它也没有工作。有人对这个问题有任何建议吗？

PrimeFaces 2.2.1 版

编辑： css 包含这些字段：

```
.active{    
    background-image: none !important;   
}

.passive{
    background-color:gainsboro !important;
    background-image: none !important;
} 
```

编辑和解决方案：

xhtml:

```
<p:commandButton action="#{backingBean.checkIfMemberInList(aMember)}" id="btn_add" value="Add" update=":mf:op :mf:op_uk" process=":mf:op_uk">
          <p:collector value="#{ukt}" addTo="#{backingBean.selectedMemberList}" />
</p:commandButton> 
```

后备豆：

```
public boolean checkIfMemberInList(Member aMember){       
        for(int i=0; i<selectedMemberList.size();i++){            
            if(selectedMemberList.contains(aMember)){ 
                return true;
            }
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:30:47.977

会不会一直`backingBean.selectedMemberList.contains(aMember)`返回false？

如果是这样 ，

“玩” `backingBean.selectedMemberList.contains(aMember)`，首先尝试类似 backingBean.checkIfMemberInList(aMember) 的方法，

```
boolean checkIfMemberInList(Member iMember){ 
    //iterate over the list and check if object exists , if so return true , otherwise false
} 
```

可能是对象不一样`same id does not mean that their hash code is same`……

`you might consider override the int hashCode or boolean equals of the member class`

**编辑**

我对 checkIfMemberInList 的建议只是使其工作的第一个版本，我真的认为您应该覆盖您的 Member 类的 equals ，这样您就可以使用 selectedMemberList.contains(memberObj)

[实现 hashCode() 和 equals()](http://tutorials.jenkov.com/java-collections/hashcode-equals.html)

# c# - 如何将嵌套的 gridview 数据导出到 word？

> ID：10070605
> 
> 赞同：0
> 
> 时间：2012-04-09T08:14:04.913
> 
> 标签：c#, asp.net, visual-studio-2010

我有两个网格，一个带有自动生成的字段，另一个没有。我如何导出两个网格（实际上是一个网格？）下面的代码说明了我如何使用方法和网格的早期图像将两个网格绑定在一起。

我的代码：

```
protected void BindHistoryReport()
{
    ArrayList listofavgrating = new ArrayList();
    ArrayList listofdouble = new ArrayList();
    ArrayList listofquestion = dbmanager.GetAllQuestion();
    ArrayList listofstaff = dbmanager.GetAllStaffDetails();
    DataTable dt = new DataTable();
    DataRow dr = null;
    int count = 0;

    foreach (staffinfo stf in listofstaff)
    {
        ArrayList listofhistorydates = dbmanager.GetTotalHistoryDates(stf.Uid);
        if (count==0)
        {
            dt.Columns.Add(new DataColumn("UserID", typeof(string)));
            dt.Columns.Add(new DataColumn("Name", typeof(string)));
            dt.Columns.Add(new DataColumn("Section", typeof(string)));
            dt.Columns.Add(new DataColumn("Function", typeof(string)));
            count++;
        }

        if (listofhistorydates.Count != 0 && listofquestion.Count != 0 && count > 0)
        {
            dr = dt.NewRow();
            dr["UserID"] = stf.Uid;
            dr["Name"] = stf.Name;
            dr["Section"] = stf.Section;
            dr["Function"] = stf.Function;
            dt.Rows.Add(dr);
        }
    }
    if (count > 0)
    {
        ViewState["HistoryGrid"] = dt;
        Session["ListofQuestion"] = listofquestion;
        ViewAllHistory.DataSource = dt;
        ViewAllHistory.DataBind();
        BindInsideGradeGrid();
        LegendMessage();
        MultiView1.ActiveViewIndex = 0;
    }
    else
    {
        Response.Redirect("default.aspx");
    }
}

protected void BindInsideGradeGrid()
{
    ArrayList listofquestion = (ArrayList)Session["ListofQuestion"];
    DataTable maintable = (DataTable)ViewState["HistoryGrid"];
    int indexgrid = 0;
    foreach (DataRow row in maintable.Rows)
    {
        DataTable dt2 = new DataTable();
        DataRow dr2 = null;
        string userid = row["UserID"].ToString();
        ArrayList listofhistorydates = dbmanager.GetTotalHistoryDates(userid);

        for (int i = 0; i < listofhistorydates.Count; i++)
        {
            DateTime toshortdate=((DateTime)listofhistorydates[i]);
            dt2.Columns.Add(new DataColumn(toshortdate.ToShortDateString(), typeof(double)));
        }

        int index = 0;
        double result = 0.0;
        dr2 = dt2.NewRow();
        foreach (DateTime date in listofhistorydates)
        {
            foreach (Question qn in listofquestion)
            {
                result += dbmanager.GetAvgRating(userid, date, qn.QuestionID);
            }
            result = Math.Round((result / listofquestion.Count), 1);
            DateTime toshortdate = ((DateTime)listofhistorydates[index]);
            dr2[toshortdate.ToShortDateString()] = result;
            index++;
            result = 0.0;
        }
        dt2.Rows.Add(dr2);
        GridView gv = (GridView)ViewAllHistory.Rows[indexgrid].FindControl("GridView1");
        //gv.ControlStyle.Width = 500;
        gv.DataSource = dt2;
        gv.DataBind();
        indexgrid++;
    }
} 
```

设计：

```
<asp:GridView ID="ViewAllHistory" runat="server" BorderWidth="1px" 
                            CellPadding="1" CellSpacing="1" BackColor="Black" 
                            AutoGenerateColumns="False" PageSize="1">
                            <RowStyle BackColor="White"/>
                            <Columns>
                                <asp:TemplateField>
                                    <ItemTemplate>
                                        <asp:LinkButton ID="ViewBtn" runat="server" onclick="ViewBtn_Click">View</asp:LinkButton>
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:BoundField DataField="UserID" HeaderText="User ID" />
                                <asp:BoundField DataField="Name" HeaderText="Name" >
                                </asp:BoundField>
                                <asp:BoundField DataField="Section" HeaderText="Section" />
                                <asp:BoundField DataField="Function" HeaderText="Function" />
                                <asp:TemplateField HeaderText="Grade">
                                    <ItemTemplate>
                                        <asp:Panel ID="ScrollPanel" style="width:760px" runat="server" ScrollBars="Horizontal"> 
                                            <asp:GridView ID="GridView1" style="position:static" runat="server" BorderWidth="1px" BackColor="Black">
                                            <FooterStyle BackColor="#CCCCCC" />
                                            <RowStyle BackColor="White" Wrap="true"/>
                                            <SelectedRowStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />
                                            <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
                                            </asp:GridView>
                                        </asp:Panel>
                                    </ItemTemplate>
                                </asp:TemplateField>
                            </Columns>
                            <FooterStyle BackColor="#CCCCCC" />
                            <PagerSettings Position="TopAndBottom" />
                            <PagerStyle HorizontalAlign="Center" BackColor="White" />
                            <SelectedRowStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />
                            <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
                        </asp:GridView> 
```

图片：![在此处输入图像描述](../Images/17a270bdba6e250c4f51ee630a316b8d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:31:01.523

此链接显示了与您的可能类似的问题。[如何导出到 Excel 父级和嵌套的 GridView 数据？](https://stackoverflow.com/questions/7525537/how-to-exporting-to-excel-parent-and-nested-gridview-data)

您需要迭代网格的行，并查看是否存在任何子网格。

# c++ - 为什么以及在哪里使用 C++ 中的引用和指针

> ID：10070608
> 
> 赞同：2
> 
> 时间：2012-04-09T08:14:33.060
> 
> 标签：c++, pointers, reference

> **可能重复：**
> [C++：何时使用引用与指针](https://stackoverflow.com/questions/7058339/c-when-to-use-references-vs-pointers)

我是 C/C++ 语言的新程序员，由于我来自 C#、Java、JavaScript 和一点 Visual Basic 和 Python 的背景，我很难理解 C++ 中的一些东西.

我已经知道如何使用引用和指针以及它们的真正含义等。但我不明白为什么以及在哪里使用它们。我知道引用有时是这样使用的：

```
int x = 2;

void Square(int &value)
{
   value = value*value;
}

Square(x);

cout << x << endl; 
```

输出将是 4。

我想我不太明白为什么要那样做而不是这样：

```
int x = 2;

int Square(int value)
{
   value = value*value;
   return value;
}

x = Square(x);

cout << x << endl; 
```

无论如何，我希望有人能够帮助我理解为什么以及在哪里使用引用和指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T08:24:37.220

您传递参考有两个主要原因：

*   更改函数内引用的对象的值
*   避免复制您传递的对象的成本

如果您想要第二个好处而不是第一个好处，您通常会传递一个`const`引用以避免错误地更改传递的对象。

在 C++ 中，指针和引用大致相同，但有两个例外：

*   引用不能指向 0（或`nullptr`）
*   引用必须始终指向同一个对象

如果你想做这些事情之一，你必须使用一个指针。

此外，指针通常指向通过使用在堆中创建的对象`new`，而引用通常指向在堆栈中创建的对象。这意味着指针指向的对象的生命周期通常是手动控制的。您必须显式调用`delete`由创建的对象`new`才能销毁它们，但是在堆栈中创建的对象的生命周期由运行时自动管理（因此它们的名称为“自动变量”）。

我不知道这是您需要知道的全部内容，还是您正在寻找更具体的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:25:54.767

像这样的示例没有实际区别，但不是将整数传递给 ，而是`Square()`想象 square 是一个复杂的算法，需要 10 GB 的数据。使用指针不是更好吗，这样参数就不会被复制？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:23:36.460

将参数作为引用传递意味着您将修改它的值（如果您对其进行一些操作）而不是作为它的副本的变量。由于您使用 &value，它会更改存储在 &value 指向的地址的内容。

你需要在 Squre() 中传递 &x 来代替 x。

所以 x= Squre(&x);

或者

广场(&x);

是同样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T08:24:53.783

引用只是变量的伪名称。应用于引用的任何操作实际上都会影响您引用的变量

```
int a = 5;
int &b = a;
b++; // 'a' gets equal to 6 
```

在您的示例中，您返回乘法的结果，但是如果您需要更改传递给不返回任何内容的函数的变量的值怎么办？

这是参考变得方便的时候。指针的行为方式类似，只是指针不是变量的伪名称，而是它的地址。您可以将指向变量的指针传递给函数，取消引用它，它会以完全相同的方式影响您的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T08:26:53.963

好吧，对于[POD](http://en.wikipedia.org/wiki/Plain_old_data_structure)结构，您不会看到很多好处，因为操作`=`很容易理解。

因此，您`x = square(x)`的表现非常出色。

当您将*对象*传递给您的方法时，就会出现使用指针/引用的优势。在这种情况下：

```
Object x;

Object squre( Object x )
{
    x._internalvalue = x._internalvalue * x._internalvalue;
    return x;
}

x = squre(x); 
```

这里发生的过程完全不同：`=`符号**不会** *自动*应用于对象，因此您必须实现所谓的[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)，您将在其中找到一个赋值运算符。但是，赋值运算符非常昂贵，因为它必须在内存中重新创建一个新的（临时）对象，调用赋值运算符，然后将该对象的内存复制回原来的`x`.

此外，将对象作为函数的参数传递将强制处理器复制该对象在堆栈上占用的整个内存，以便在函数中访问它，这是非常昂贵的。

因此，为了回答您的问题，当您开始操作结构和对象时，您会开始看到使用引用和指针的好处，这些结构和对象比普通的旧整数要大得多。

当您操作大对象时，使用引用进行编程将提高性能并限制堆栈溢出的风险。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T08:20:50.187

第二个示例将在本地复制您的变量`x`（仅在函数内部可见`Square`）。

如果您想确保您的全局`x`保持不变，请这样做。但是，它可能很**昂贵**（如果您的变量是更大的对象/结构）......并且冗余 - 签出关键字`const`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-09T08:28:36.943

当您想使用另一个名称引用变量时，使用引用。它们具有完全相同的类型、值等。
指针有些不同，它是一种存储地址的新类型。

```
int i;  
Int &ref = i;  
Int *pointer = &i; 
```

那么ref和*pointer其实是一回事，i的值。
但是你必须知道，文字“ref”只是“i”（初始化后永远不会改变），而“pointer”只是暂时指向i。
因此，在大多数情况下，它们是相同的。
那么我们什么时候使用引用或指针呢？
**在我看来，使用哪个更方便。**
例如，一个引用不能改变，但是一个指针指向不同的东西。^_^
啊，我忘了复制的成本，请检查其他的答案。

# extjs - Extjs - 依赖字段的验证

> ID：10070616
> 
> 赞同：0
> 
> 时间：2012-04-09T08:15:38.597
> 
> 标签：extjs

我使用[http://www.developersnippets.com/2009/06/24/date-range-using-extjs-date-field-and-advanced-vtype/](http://www.developersnippets.com/2009/06/24/date-range-using-extjs-date-field-and-advanced-vtype/)来检查依赖字段的验证。有用。但是，如果我从数据字段中删除文本并让它们为空，则需要添加正确的数据。只有当其中一个字段不为空时，我才需要验证。如果两个字段都为空，让我们提交。我设置了allowBlank：true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:37:16.397

您将不得不使用自定义[验证器](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.Text-cfg-validator)来解决该问题。

假设您正在使用 ExtJS 4：

```
var from = Ext.create('Ext.form.Date', {
    name: 'from',
    ...
}); 
```

只需将依赖字段引用到另一个字段：

```
var to = Ext.create('Ext.form.Date', {
    name: 'to',
    validator: function(value) {
        if(from.getValue() == null && value == null) {
            return false;
        } else {
            return true;
        }
    }
}); 
```

# database - 如何减少数据库中文本字段的数据冗余

> ID：10070618
> 
> 赞同：0
> 
> 时间：2012-04-09T08:16:02.430
> 
> 标签：database, olap, redundancy

我使用的是 OLAP 系统，有些表有文本字段。文本长度可以从一些字节到KB，而一行中其他固定大小字段的大小仅为100字节左右。

我的一些表有数十亿行，文本字段的值是高度可重复的，我怎样才能减少这种冗余以节省存储空间并且不损失查询性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:37:03.740

*冗余*是数据库工作中的一个技术术语。这并不意味着“重复”。它的意思是“不必要的重复”。您可能没有任何不必要的重复；每个值都需要在自己的行中，以便向用户传达正确的含义。

有时，您可以用更短的、人类可读的代码替换现有值。更短的代码生成更窄的表，这意味着数据库中每页的行数更多，I/O 更快。例如，在美国，我们经常使用州的两个字母的邮政编码而不是州的全名。这几乎总是有效的。（这意味着人类无需进一步处理即可读取输出，并且查询运行速度至少要快一点。）

有时，您可以用代理键替换现有值，希望额外连接的成本会被更快的磁盘 I/O 所抵消。有时这种策略*行不通*；您需要测试并准备恢复到原始模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:18:17.913

报告数据库中的 URL 之前给我带来了麻烦。可能值得尝试的是将 URL 拆分为 3 部分 - 主机名/端口、路径和查询字符串 - 您最终可能会得到一个 url-fragment 表（可能不止一个），以及一个带有 URL 的 FK 的 URL 表 -片段表。有时查询字符串不值得单独存储，在这种情况下，URL 表具有主机名和路径的 FK，并存储查询字符串。

另一个想法是删除查询字符串的无用部分 - 这个决定需要在逐个应用程序的基础上发生，但可以产生很大的不同 - 从 URL 中删除会话 ID 可以显着改善事情（此外，您可能可以删除谷歌分析参数。

此外，仅在需要时访问 URL 表，并确保至少对主机名有索引。

# css - 悬停时的 HTML 按钮标记样式

> ID：10070621
> 
> 赞同：3
> 
> 时间：2012-04-09T08:16:35.800
> 
> 标签：css, htmlbutton

我正在使用 HTML 按钮标签，但下面提到的样式应该只适用于顶部菜单，而不是网站中的其他按钮标签。我尝试使用代码`button.menuButton:hover`，但它不起作用

```
<button id="menuButton" type="button" name="menuButton" title="Logout">
<img src="images/commonicons/logout.png" alt="Logout" id="imgLogout" /><br /><b>Logout</b>
</button> 
```

并应用下面的样式，将底部边框显示为带有石灰颜色的山脊，其余边将处于虚线模式。

```
button:hover
{
    border: 1px dashed #CCCCCC;
    border-bottom: 2px ridge Lime;
} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:27:45.387

如果您希望样式仅应用于特定按钮，则应仅在这些按钮标签中指定一个类。例如：
这是按钮类：

```
.mybutton
{
    border: 1px dashed #CCCCCC;
    border-bottom: 2px ridge Lime;
} 
```

在声明按钮时：

此按钮将具有以下样式：

```
 <button id="menuButton" type="button" name="menuButton" class="mybutton" title="Logout">
  <img src="images/commonicons/logout.png" alt="Logout" id="imgLogout" /><br       /><b>Logout</b>
</button> 
```

此按钮将没有样式：

```
<button id="menuButton" type="button" name="menuButton"title="Logout">
      <img src="images/commonicons/logout.png" alt="Logout" id="imgLogout" /><br       /><b>Logout</b>
    </button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:21:30.650

如果您想使用，`button.menuButton:hover`那么您的按钮将需要 .menuButton 类。

```
<button [...] class="menuButton"> 
```

在 CSS 中，点 (.) 表示您正在引用元素上的类名。

# linux - pt_regs 结构中的 eax 在哪里？只有斧头存在

> ID：10070625
> 
> 赞同：7
> 
> 时间：2012-04-09T08:16:57.790
> 
> 标签：linux, module, linux-kernel, kernel

我正在尝试使用该`pt_regs`结构来获取和设置寄存器，例如`eax`，但编译错误告诉我`pt_regs`没有这样的成员`eax`。

但是，我能够获得`ax`注册表。谁能告诉我发生了什么？

我正在使用带有`3.0.0`内核的 32 位 Ubuntu linux。再次感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T07:30:02.020

看一下[arch/x86/include/asm/ptrace.h](https://elixir.bootlin.com/linux/v3.0/source/arch/x86/include/asm/ptrace.h)`struct pt_regs`中的定义。

注意`#ifndef __KERNEL__`那里的东西，这意味着该结构的定义对于内核模式和用户模式代码是不同的。

对于内核代码，`pt_regs::ax`可能是您需要的值。它应该包含`%eax`32 位系统和`%rax`64 位系统的值。

# javascript - Android WebView - 检测是否定义了JS函数

> ID：10070626
> 
> 赞同：0
> 
> 时间：2012-04-09T08:17:00.263
> 
> 标签：javascript, android, webview

我正在编写一个在 Android 上的 WebView 下运行的 HTML/JS 应用程序。在某些情况下，可能无法加载包含应用程序的页面，或者可能是另一个页面（例如 404 页面或类似页面）。一般来说，我需要在应用程序页面上运行一组 JS 函数或采取另一组操作，以防应用程序页面没有加载。

我试图通过检测适当的 JS 是否可用来检测是否加载了正确的页面，但我似乎找不到任何同步的方法 - 只能通过调用 JS 函数并期望通过`JavasctiptInterface`. 虽然这种方法是可行的，但我想知道是否有更好、更优雅、更可靠的方法来实现这一点。

我当然不能通过分析页面的 URL 来做到这一点——它可能是正确的，但内容有误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-08T05:42:59.747

```
@JavascriptInterface
public void onLoaded(String result) {
    if (result.equals("function")) {
        // defined
    } else {
       // not defined
    }
}

private void checkJSFunction() {
    loadUrl("javascript:yourJSInterfaceName.onLoaded(typeof yourFunctionName)");
} 
```

**更新**：这段代码将检查“typeof”定义的JS函数，并通过javascript接口“onLoaded”将结果返回给java。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T08:33:42.733

我认为你可以做到，请查看[PhoneGap](https://github.com/phonegap)项目，你会找到答案。

PhoneGap 是一个很棒的移动平台免费框架。

# php - 优化 Zend 框架路由

> ID：10070634
> 
> 赞同：2
> 
> 时间：2012-04-09T08:17:41.590
> 
> 标签：php, zend-framework, optimization, routes, zend-route

我正在使用使用`Zend tool`. 我的应用程序中有几个模块也是使用生成的`Zend tool`。我打算`default routes`在我的应用程序中使用 in Zend 框架。

例如：`www.host.com/module/controller/action/param1/value1/param2/value2`

以下是我的问题：

1.  性能方面，使用默认路由是最快的解决方案，对吧？
2.  既然我永远不会改变路线，有没有办法让路由过程更快？例如缓存？完全跳过路由过程？或任何其他技术？
3.  制作自定义路线有什么好处？对SEO更好吗？
4.  我可以跳过 AJAX 调用的路由过程吗？（我知道答案大部分是否定的，但也许我可以针对 AJAX 调用进一步优化我的调用）

笔记：

我了解路由过程本身以及它在 Zend 框架中的工作原理。但是，由于我不会使用大多数可用的功能，我想也许是时候进行微调了：）

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:06:30.400

> 1\. 性能方面，使用默认路由是最快的解决方案，对吧？

对，但不使用任何路由系统是最快的解决方案（显然）。

> 2\. 既然我永远不会改变路线，有没有办法让路由过程更快？例如缓存？完全跳过路由过程？或任何其他技术？

嗯，就是这样，路由主要用于灵活性、国际化、搜索引擎优化。

Zend 框架路由器的问题在于它依赖并包装了前端控制器实例，因此很难（完全不可能）缓存路由器，因为 FC 本身包装了其他东西，例如不可缓存的 PDO 实例。

因此，每次请求都会一次又一次地计算所有路由。

在避免路由计算的情况下使用复杂路由时，一个可能的解决方案是将所有路由转储到本机 Apache Rewrite Rules，与 ZF 相比，它会非常快，该解决方案的主要问题是您需要手动计算反向路由，并且无论何时进行更改路线，您需要手动编辑它。

通常，它是*可扩展性与性能*。

> 3\. 制作自定义路线有什么好处？对SEO更好吗？

好吧，它“取决于”（tm）：

`/list?type=products`vs `/products`，第二条路线获胜。

但是，`/products/page/1`vs`/products?page=1`是双赢的（实际上它不是，但这是另一回事）。

其他优点：

*   i18n
*   搜索引擎优化
*   可用性
*   有意义的网址

> 4\. 我可以跳过 AJAX 调用的路由过程吗？（我知道答案大部分是否定的，但也许我可以针对 AJAX 调用进一步优化我的调用）

我没有看到任何反对这一点的缺点。我经常去，除了 RESTfull API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:16:45.840

您是否分析了 ZF 路由组件的性能，还是假设这是您的应用程序的“瓶颈”？！

在我看来，如果您需要低延迟，通过禁用最舒适的功能来优化页面速度并不是获得目标的最佳尝试。也许你应该开始优化你的 SQL 查询（这里的关键字是慢日志）或其他东西（xdebug 真的可以帮助你分析你的应用程序并发现瓶颈）。

*都是时间问题...*

**在 zend 框架启动之前缓存**怎么样？在解释器 (php) 启动之前缓存和交付怎么样？听起来不错？您可能希望使用 Varnish 之类[的](http://en.wikipedia.org/wiki/Varnish_%28software%29)代理来实现良好的低延迟响应并执行类似的操作。

即使您从代理中获得缓存未命中，您也希望使用**PHP 操作码缓存**（如 APC、XCache 等）。如果您询问如何加速和优化您的 zend 框架，请阅读[Zend 性能指南](http://framework.zend.com/manual/en/performance.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:38:46.490

您有两种方法，或者扩展 Zend_Front_Controller 并覆盖它的调度方法并设置您自己的前端，或者在 zend 代码本身中进行更改。

打开

```
Zend/Controller/Front.php 
```

内部`dispatch()`方法

查找并删除以下代码

```
 $router = $this->getRouter();
    $router->setParams($this->getParams()); 
```

和

```
 $this->_plugins->routeStartup($this->_request);

      try {
            $router->route($this->_request);
        }  catch (Exception $e) {
            if ($this->throwExceptions()) {
                throw $e;
            }

            $this->_response->setException($e);
        }

        /**
        * Notify plugins of router completion
        */
        $this->_plugins->routeShutdown($this->_request); 
```

完成此操作后，获取请求对象 $this->_request 并根据 url 参数设置控制器、操作、模块名称。

```
$this->_request()->setModuleName($get[0]); 
```

# c - 将 llvm .bc 文件转换为人类可读的 .ll 文件

> ID：10070635
> 
> 赞同：27
> 
> 时间：2012-04-09T08:18:00.750
> 
> 标签：c, linux, llvm, clang, x86-64

如何从二进制 llvm 位码（扩展名 .bc）文件生成人类可读的 llvm 位码（扩展名 .ll）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-09T08:25:25.537

这是所有[llvm 命令](http://llvm.org/docs/CommandGuide/index.html)的有用链接。显然按照`llvm-dis`你的要求去做。

# linux - 如何给用户离子级别的权限？

> ID：10070642
> 
> 赞同：9
> 
> 时间：2012-04-09T08:19:01.563
> 
> 标签：linux, unix, user-permissions, nice

要更改硬限制，我可以修改 /etc/security/limits.conf

```
user - nice -11 
```

但是我怎么能为ionice做同样的事情

```
 ionice -c 1 -p 31828 
```

我收到错误

```
ionice: ioprio_set failed: Operation not permitted 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-11T01:50:57.137

此错误 ( `EPERM`) 表示您没有足够的权限来执行该操作。 `ioprio_set()`：

> 非特权进程只能设置其真实 UID 与调用进程的真实或有效 UID 匹配的进程的 I/O 优先级。具有 CAP_SYS_NICE 能力的进程可以更改任何进程的优先级。

因此，要么成为超级用户（使用`sudo`），要么`ionice`在您自己的进程之一上使用。

# sql - SQL Server 2008 R2 中的字符映射/逐个字符搜索和替换

> ID：10070643
> 
> 赞同：0
> 
> 时间：2012-04-09T08:19:08.847
> 
> 标签：sql, sql-server, sql-server-2008

我在 SQL Server 2008 R2 上运行，我们在这里有一个要求，我需要创建将某些英文字符替换为以前在旧系统中使用的区域设置语言字符。

为此，我可能会使用 T-SQL 中的替换功能，但在我的实践中，我们正在逐个字符地替换，例如

```
'ASkjDe'
A=char(XX)
S=char(XX)
k=char(XX)
j=char(XX)
D=char(XX)
e=char(XX) 
```

现在，我想避免使用嵌套替换，这意味着我必须进行 32 个字符检查。有没有这样一个函数可以传递值列表？

我们已经有一个功能可以进行替换，但它非常慢，我们希望替换功能可以做得更好。下面是我们正在使用的当前函数

```
CREATE FUNCTION [dbo].[ArabicToString] (@inString VARCHAR(MAX))
RETURNS NVARCHAR(MAX)
AS
BEGIN
  DECLARE @Vchar char(1), @Result NVARCHAR(MAX), @Flag BIT, @Position INT, @StrLength INT, @LChar CHAR, @HChar NCHAR

  SET @Result = ''
  SET @Position = 1
  SET @StrLength = DATALENGTH(@inString)  -- string length not going to change
  SET @VChar = SUBSTRING(@inString, @Position, 1)
  if ASCII(@Vchar) > 189 and ASCII(@Vchar) < 255 
     RETURN Rtrim(Ltrim(@inString))

  WHILE (@Position <= @StrLength)  -- leave loop if bad character found
  BEGIN
      -- Reset holders
      SET @LChar = SUBSTRING(@inString, @Position, 1)
      Set @HChar = ''

      if cast(@LChar as varbinary(1))=cast('*' as varbinary(1))
            Set @HChar = '*'
      else if cast(@LChar as varbinary(1)) = cast('-' as varbinary(1))
            set @HChar = '-'
      else if cast(@LChar as varbinary(1)) = cast('A' as varbinary(1))
            set @HChar = 'ء'
      else if cast(@LChar as varbinary(1)) = cast('B' as varbinary(1))
            set @HChar='آ'
      else if cast(@LChar as varbinary(1)) = cast('C' as varbinary(1))
            set @HChar='أ'
      else if cast(@LChar as varbinary(1)) = cast('D' as varbinary(1))
            set @HChar='ؤ'
      else if cast(@LChar as varbinary(1)) = cast('E' as varbinary(1))
            set @HChar='إ'
      else if cast(@LChar as varbinary(1)) = cast('F' as varbinary(1))
            set @HChar ='ئ'
      else if cast(@LChar as varbinary(1)) = cast('G' as varbinary(1))
            set @HChar='ا'
      else if cast(@LChar as varbinary(1)) = cast('H' as varbinary(1))
            set @HChar='ب'
      else if cast(@LChar as varbinary(1)) = cast('I' as varbinary(1))
            set @HChar='ة'
      else if cast(@LChar as varbinary(1)) = cast('J' as varbinary(1))
            set @HChar='ت'
      else if cast(@LChar as varbinary(1)) = cast('K' as varbinary(1))
            set @HChar='ث'
      else if cast(@LChar as varbinary(1)) = cast('L' as varbinary(1))
            set @HChar='ج'
      else if cast(@LChar as varbinary(1)) = cast('M' as varbinary(1))
            set @HChar='ح'
      else if cast(@LChar as varbinary(1)) = cast('N' as varbinary(1))
            set @HChar='خ'
      else if cast(@LChar as varbinary(1)) = cast('O' as varbinary(1))
            set @HChar='د'
      else if cast(@LChar as varbinary(1)) = cast('P' as varbinary(1))
            set @HChar='ذ'
      else if cast(@LChar as varbinary(1)) = cast('Q' as varbinary(1))
            set @HChar='ر'
      else if cast(@LChar as varbinary(1)) = cast('R' as varbinary(1))
            set @HChar='ز'
      else if cast(@LChar as varbinary(1)) = cast('S' as varbinary(1))
            set @HChar='س'
      else if cast(@LChar as varbinary(1)) = cast('T' as varbinary(1))
            set @HChar='ش'
      else if cast(@LChar as varbinary(1)) = cast('U' as varbinary(1))
            set @HChar='ص'
      else if cast(@LChar as varbinary(1)) = cast('V' as varbinary(1))
            set @HChar='ض'
      else if cast(@LChar as varbinary(1)) = cast('W' as varbinary(1))
            set @HChar='ط'
      else if cast(@LChar as varbinary(1)) = cast('X' as varbinary(1))
            set @HChar='ظ'
      else if cast(@LChar as varbinary(1)) = cast('Y' as varbinary(1))
            set @HChar='ع'
      else if cast(@LChar as varbinary(1)) = cast('Z' as varbinary(1))
            set @HChar='غ'
      else if cast(@LChar as varbinary(1)) = cast('a' as varbinary(1))
            set @HChar='ف'
      else if cast(@LChar as varbinary(1)) = cast('b' as varbinary(1))
            set @HChar='ق'
      else if cast(@LChar as varbinary(1)) = cast('c' as varbinary(1))
            set @HChar='ك'
      else if cast(@LChar as varbinary(1)) = cast('d' as varbinary(1))
            set @HChar='ل'    
      else if cast(@LChar as varbinary(1)) = cast('e' as varbinary(1))
            set @HChar='م'
      else if cast(@LChar as varbinary(1)) = cast('f' as varbinary(1))
            set @HChar='ن'
      else if cast(@LChar as varbinary(1)) = cast('g' as varbinary(1))
            set @HChar='ه'    
      else if cast(@LChar as varbinary(1)) = cast('h' as varbinary(1))
            set @HChar='و'
      else if cast(@LChar as varbinary(1)) = cast('i' as varbinary(1))
            set @HChar='ى'
      else if cast(@LChar as varbinary(1)) = cast('j' as varbinary(1))
            set @HChar='ي'    

      else if cast(@LChar as varbinary(1)) = cast('v' as varbinary(1))
            set @HChar='ـ'

      else if cast(@LChar as varbinary(1)) = cast('1' as varbinary(1))
            set @HChar='١'
      else if cast(@LChar as varbinary(1)) = cast('2' as varbinary(1))
            set @HChar='٢'    
      else if cast(@LChar as varbinary(1)) = cast('3' as varbinary(1))
            set @HChar='٣'
      else if cast(@LChar as varbinary(1)) = cast('4' as varbinary(1))
            set @HChar='٤'
      else if cast(@LChar as varbinary(1)) = cast('5' as varbinary(1))
            set @HChar='٥'
      else if cast(@LChar as varbinary(1)) = cast('6' as varbinary(1))
            set @HChar='٦'    
      else if cast(@LChar as varbinary(1)) = cast('7' as varbinary(1))
            set @HChar='٧'
      else if cast(@LChar as varbinary(1)) = cast('8' as varbinary(1))
            set @HChar='٨'
      else if cast(@LChar as varbinary(1)) = cast('9' as varbinary(1))
            set @HChar='٩'    
      else if cast(@LChar as varbinary(1)) = cast('0' as varbinary(1))
            set @HChar='٠'

      else if @LChar='/'
            set @HChar='\'

      select @Result=@Result + @HChar

      -- Add one to position 
      SET @Position= @Position + 1
  END

  RETURN Rtrim(Ltrim(@Result))
END 
```

如果有人可以提出不同的方法，甚至不是替换功能或我们目前使用的上述方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T19:14:05.627

这对你来说运行得更快吗？（我使用了 SQL_Latin1_General_CP1_CS_AS 的排序规则，您可能想要更改它）。

```
ALTER FUNCTION [dbo].[ArabicToString] (@inString VARCHAR(MAX))
RETURNS NVARCHAR(MAX)
AS
BEGIN
    DECLARE @MappingCharacters TABLE
    (
        InputCharacter NCHAR(1) COLLATE SQL_Latin1_General_CP1_CS_AS PRIMARY KEY,
        OutputChar NCHAR(1)
    )

    INSERT @MappingCharacters
    VALUES
        ('A', 'ء')
        ,('B', 'آ')
        ,('C', 'أ')
        ,('D', 'ؤ')
        ,('E', 'إ')
        ,('F', 'ئ')
        ,('G', 'ا')
        ,('H', 'ب')
        ,('I', 'ة')
        ,('J', 'ت')
        ,('K', 'ث')
        ,('L', 'ج')
        ,('M', 'ح')
        ,('N', 'خ')
        ,('O', 'د')
        ,('P', 'ذ')
        ,('Q', 'ر')
        ,('R', 'ز')
        ,('S', 'س')
        ,('T', 'ش')
        ,('U', 'ص')
        ,('V', 'ض')
        ,('W', 'ط')
        ,('X', 'ظ')
        ,('Y', 'ع')
        ,('Z', 'غ')
        ,('a', 'ف')
        ,('b', 'ق')
        ,('c', 'ك')
        ,('d', 'ل')
        ,('e', 'م')
        ,('f', 'ن')
        ,('g', 'ه')
        ,('h', 'و')
        ,('i', 'ى')
        ,('j', 'ي')
        ,('v', 'ـ')
        ,('1', '١')
        ,('2', '٢')
        ,('3', '٣')
        ,('4', '٤')
        ,('5', '٥')
        ,('6', '٦')
        ,('7', '٧')
        ,('8', '٨')
        ,('9', '٩')
        ,('0', '٠')
        ,('/', '\')

    DECLARE @Result NVARCHAR(MAX) = ''
        , @Position INT = 1
        , @StrLength INT = DATALENGTH(@inString)

    DECLARE @Vchar char(1), @NextChar NCHAR(1)

    SET @VChar = SUBSTRING(@inString, @Position, 1)
    IF ASCII(@Vchar) > 189 and ASCII(@Vchar) < 255 
    RETURN Rtrim(Ltrim(@inString))

    WHILE (@Position <= @StrLength)  -- leave loop if bad character found
    BEGIN
        -- Reset holders
        SET @NextChar = SUBSTRING(@inString, @Position, 1)

        SET @Result = @Result + ISNULL((SELECT OutputChar FROM @MappingCharacters MC WHERE InputCharacter = @NextChar COLLATE SQL_Latin1_General_CP1_CS_AS), @NextChar)

        -- Add one to position 
        SET @Position= @Position + 1
    END

  RETURN Rtrim(Ltrim(@Result))
END
GO 
```

它非常相似，但我希望`else if`SQL Server 在使用集合时会表现得更好，而不是大量的检查。我不确定如果`@MappingCharacters`是一张真正的桌子，这是否会更好。

# vb.net - 将文本添加到 Web 浏览器文档重定向到 about:blank

> ID：10070644
> 
> 赞同：0
> 
> 时间：2012-04-09T08:19:28.157
> 
> 标签：vb.net, browser

当我将一个页面加载到网络浏览器控件中时，我有一个文本框和一个按钮来插入更多的 html 和其他各种内容，但是当我这样做时，它会重定向到 about:blank。我该如何阻止这种情况发生。我找不到任何可以提示我在任何地方解决这个问题的东西

这也是我向页面添加文本的方式：

```
wbChat.DocumentText += Text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:08:30.320

你`Text`是变量吗？

我尝试使用以下代码对其进行测试：

```
Public Class Form1

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    WebBrowser1.Navigate("c:\test.html")

End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    WebBrowser1.DocumentText += TextBox1.Text
End Sub
End Class 
```

test.html 文件包含以下代码：

```
<html>
<body>
    <h1>Content</h1>
    <p>All contents are displayed below</p>
</body>
</html> 
```

因此，当我尝试在 TextBox 上输入内容并单击按钮时，它被附加到网页的末尾。

# javascript - jquery/javascript 在动态创建的元素 id 中查找值

> ID：10070647
> 
> 赞同：2
> 
> 时间：2012-04-09T08:19:48.357
> 
> 标签：javascript, jquery

我有一个动态生成的 html 表，其列具有动态分配的 id。例如：

```
 <td id="1">1</td>
    <td id="2">2</td>
     ....
     ....
   <td id="n">n</td> 
```

为了获取我正在使用的特定列的获取值， `document.getElementById("#myvar").innerHTML`或者`$("td#myvar").html`myvar 是包含搜索元素（例如 2 或 3 等）的变量，但我没有得到任何结果。如果我直接使用数字`document.getElementById("#2").innerHTML`，它可以工作。请告知如何获取元素 id 与声明的变量相同的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T08:27:00.390

首先，`getElementById()`DOM 方法需要一个 ID，而不是 jQuery 选择器。

其次，正如您所假设的那样，JavaScript 和 jQuery 都没有在字符串中提供变量插值。您必须构建自己的字符串：

```
var myvar = 2;
$("td#" + myvar).html() 
```

最后但同样重要的是，请记住[ID 属性](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)不能以数字开头，除非您使用的是 HTML 5。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T08:24:29.730

你的代码是错误的。使用 document.getElementById 时，不要包含 # 符号。使用 jQuery id 选择器时，您确实使用了 # 符号，但您需要将 .html() 作为函数调用。

```
document.getElementById("myvar").innerHTML

$('#myvar').html(); 
```

如果 myvar 是一个变量，请省略引号，例如，如果`myvar = "2";`您的选择器是：

```
document.getElementById(myvar).innerHTML 
```

对于 jQuery，使用字符串连接：

```
$('#' + myvar).html(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T08:22:24.680

用这个 -

```
$("#"+myVar).html(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T08:24:20.113

`document.getElementById`接受一个字符串参数，它是您要选择的元素的 id，因此您不需要包含 #，即

```
document.getElementById(myvar).innerHTML 
```

应该管用

与您的问题没有直接关系，但 ID 属性以数字开头是无效的

[http://www.w3.org/TR/html401/types.html#type-name](http://www.w3.org/TR/html401/types.html#type-name)

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

# c# - 搜索算法

> ID：10070651
> 
> 赞同：0
> 
> 时间：2012-04-09T08:20:30.433
> 
> 标签：c#, linq, optimization, task-parallel-library

**语境**

我在内存中有一个有序（按名称）城市对象的列表，我需要在输入字符时获取这些城市的列表，有点像建议框。

例如：

如果列表中有马德里和马赛城市名称等，当我按下“M”字符时，我需要在返回的列表中获得马德里和马赛。好吧，在几年前，我会运行几个线程，以使事情进展得更快，但现在，使用 LINQ 和 TPL，经过几次测试，我得出的结论是，更快的方法是使用这些新库而不是手动操作。因此，我编写了一些脚本并相互测试了它们。每个被剪断的代码都在自己的类中运行：

```
//Snippet 1

            List<ICity> objCities = new List<ICity>();

            foreach (ICity objCity in this.m_objCities)
            {
                if (objCity.Name.Length >= pName.Length)
                {
                    if (objCity.Name.Substring(0, pName.Length).Equals(pName))
                    {
                        objCities.Add(objCity);
                    }
                }
                else if (objCitys.Count > 0)
                {
                    break;
                }
            }

            return objCities; 
```

//片段2

```
 ICollection<ICity> objCities = base.m_objCities.Where((ICity pCity) =>
            {
                bool bFound = false;

                if (pCity.Name.Length >= pName.Length)
                {
                    bFound = pCity.Name.Substring(0, pName.Length).Equals(pName);
                }

                return bFound;

            }).ToList();

            return objCities; 
```

//片段3

```
 ICollection<ICity> objCities = base.m_objCities.AsParallel().Where((ICity pCity) =>
            {
                bool bFound = false;

                if (pCity.Name.Length >= pName.Length)
                {
                    bFound = pCity.Name.Substring(0, pName.Length).Equals(pName);
                }

                return bFound;

            }).ToList();

            return objCities; 
```

//片段4

```
 //Used as a class member
            private List<ICollection<IStation>> objLastCities = new List<ICollection<IStation>>();

            int iNameCount = pName.Length;
            ICollection<ICity> objCities = null;

            if (this.m_iLastNameCount == 0 || iNameCount == 1)
            {
                objCities = base.m_objCities.Where((ICity pCity) =>
                                {
                                    bool bFound = false;

                                    if (pCity.Name.Length >= pName.Length)
                                    {
                                        bFound = pCity.Name.Substring(0, pName.Length).Equals(pName);
                                    }

                                    return bFound;

                                }).ToList();

                this.objLastCities.Clear();
                this.objLastCities.Add(objCities);

                this.m_iLastNameCount = 1;
            }
            else
            {
                if (iNameCount > this.m_iLastNameCount)
                {
                    objCities = this.objLastCities[this.m_iLastNameCount - 1].Where((ICity pCity) =>
                                {
                                    bool bFound = false;

                                    if (pCity.Name.Length >= pName.Length)
                                    {
                                        bFound = pCity.Name.Substring(0, pName.Length).Equals(pName);
                                    }

                                    return bFound;

                                }).ToList();

                    this.objLastCities.Add(objCities);

                    this.m_iLastNameCount++;
                }
                else
                {
                    objCities = base.m_objCities.Where((ICity pCity) =>
                                {
                                    bool bFound = false;

                                    if (pCity.Name.Length >= pName.Length)
                                    {
                                        bFound = pCity.Name.Substring(0, pName.Length).Equals(pName);
                                    }

                                    return bFound;

                                }).ToList();

                    this.objLastCities.RemoveAt(iNameCount - 1);

                    objCities = this.objLastCities[iNameCount - 1];

                    this.m_iLastNameCount--;
                }

                this.objLastCities.Add(objCities);
            }

            return this.objLastCities[this.objLastCities.Count - 1]; 
```

//片段5

```
 ////Member objects
        private List<ICollection<ICity>> objLastCities = new List<ICollection<ICity>>();
        private int m_iLastNameCount = 0;
        private Dictionary<char, ICollection<ICity>> m_objCitiesByKey = null;

        ////Code that runs in the class contructor
        this.m_objCitiesByKey.Add('A', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'A'; }).ToList());
        this.m_objCitiesByKey.Add('B', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'B'; }).ToList());
        this.m_objCitiesByKey.Add('C', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'C'; }).ToList());
        this.m_objCitiesByKey.Add('D', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'D'; }).ToList());
        this.m_objCitiesByKey.Add('E', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'E'; }).ToList());
        this.m_objCitiesByKey.Add('F', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'F'; }).ToList());
        this.m_objCitiesByKey.Add('G', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'G'; }).ToList());
        this.m_objCitiesByKey.Add('H', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'H'; }).ToList());
        this.m_objCitiesByKey.Add('I', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'I'; }).ToList());
        this.m_objCitiesByKey.Add('J', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'J'; }).ToList());
        this.m_objCitiesByKey.Add('K', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'K'; }).ToList());
        this.m_objCitiesByKey.Add('L', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'L'; }).ToList());
        this.m_objCitiesByKey.Add('M', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'M'; }).ToList());
        this.m_objCitiesByKey.Add('N', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'N'; }).ToList());
        this.m_objCitiesByKey.Add('O', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'O'; }).ToList());
        this.m_objCitiesByKey.Add('P', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'P'; }).ToList());
        this.m_objCitiesByKey.Add('Q', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'Q'; }).ToList());
        this.m_objCitiesByKey.Add('R', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'R'; }).ToList());
        this.m_objCitiesByKey.Add('S', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'S'; }).ToList());
        this.m_objCitiesByKey.Add('T', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'T'; }).ToList());
        this.m_objCitiesByKey.Add('U', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'U'; }).ToList());
        this.m_objCitiesByKey.Add('V', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'V'; }).ToList());
        this.m_objCitiesByKey.Add('W', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'W'; }).ToList());
        this.m_objCitiesByKey.Add('X', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'X'; }).ToList());
        this.m_objCitiesByKey.Add('Y', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'Y'; }).ToList());
        this.m_objCitiesByKey.Add('Z', base.m_objCities.Where((ICity pCity) => { return pCity.Name[0] == 'Z'; }).ToList());

        ////Code Running in a Methods
        int iNameCount = pName.Length;
        ICollection<ICity> objCities = null;

        if (this.m_iLastNameCount == 0 || iNameCount == 1)
        {
            objCities = this.m_objCitiesByKey[pName[0]];

            this.objLastCities.Clear();
            this.objLastCities.Add(objCities);

            this.m_iLastNameCount = 1;
        }
        else
        {
            if (iNameCount > this.m_iLastNameCount)
            {
                objCities = this.objLastCities[this.m_iLastNameCount - 1].Where((ICity pCity) =>
                                                                            {
                                                                                bool bFound = false;

                                                                                if (pCity.Name.Length >= pName.Length)
                                                                                {
                                                                                    bFound = pCity.Name.Substring(0, pName.Length).Equals(pName);
                                                                                }

                                                                                return bFound;

                                                                            }).ToList();

                this.objLastCities.Add(objCities);

                this.m_iLastNameCount++;
            }
            else
            {
                objCities = base.m_objCities.Where((ICity pCity) =>
                                                                            {
                                                                                bool bFound = false;

                                                                                if (pCity.Name.Length >= pName.Length)
                                                                                {
                                                                                    bFound = pCity.Name.Substring(0, pName.Length).Equals(pName);
                                                                                }

                                                                                return bFound;

                                                                            }).ToList();

                this.objLastCities.RemoveAt(iNameCount - 1);

                objCities = this.objLastCities[iNameCount - 1];

                this.m_iLastNameCount--;
            }

            this.objLastCities.Add(objCities);
        }

        return this.objLastCities[this.objLastCities.Count - 1]; 
```

根据我在 Stopwatch 类的帮助下得到的结果，更快的脚本是数字 4，但我希望它是数字 5，因为所有城市都在字典中拆分，但不幸的是字典类似乎慢慢来。

那么你们有什么方法可以提高这里的性能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:08:12.250

您是否尝试过使用[trie](http://en.wikipedia.org/wiki/Trie)？您可以给出前 n 个字母来搜索在 n 个操作中找到表示列表的 subtrie，然后将其并行转换为列表

# twitter - statuses/followers twitter api 会从“保护我的推文”帐户中获取关注者列表吗？

> ID：10070659
> 
> 赞同：2
> 
> 时间：2012-04-09T08:21:09.637
> 
> 标签：twitter

“保护我的推文”的在线解释似乎并没有限制从授权用户获取关注者列表的能力，但是我在尝试这样做时遇到了 401（未经授权）错误。

我想确认这个“保护我的推文”是否会影响获取关注者列表？如果是，是否有任何解决方法？

此外，它的替代品（关注者/ids + users/lookup）是否具有相同的限制？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:10:49.573

如果用户选择保护他们的推文，推文和个人资料信息（例如朋友和关注者）将被隐藏。没有“解决方法”，因为这不是缺陷；这是设计使然。如果您想获得受保护用户的推文和关系，那么您必须让拥有受保护帐户的用户接受您的关注请求。

受保护用户的 Twitter 页面将显示以下消息，表明他们的个人资料和推文数据不可用。

> @protectedaccount 的帐户受到保护。只有经过确认的关注者才能查看@protectedaccount 的推文和完整个人资料。点击“关注”按钮发送关注请求。

最后，是的，`followers/ids`并且`users/lookup`会受此设置的影响。

# php - 从 Facebook 群组获取 youtube 嵌入

> ID：10070661
> 
> 赞同：0
> 
> 时间：2012-04-09T08:21:49.450
> 
> 标签：php, javascript, jquery, facebook-graph-api, youtube

我正在从 facebook 群组提要中提取墙贴，但我唯一感兴趣的是 youtube 嵌入 ID。研究 Facebook 的 Graph API，我看不出是否有更简单的方法可以直接提取 youtube 嵌入？

我目前的解决方案似乎有点沉重，因为群墙上有 3000 多个帖子。

更新：据我所知，我需要获取元数据，因为 youtube 嵌入链接实际上并未显示在提要中。

这就是我解析组提要的方式，知道如何在此处获取 youtube 链接的元数据附件吗？

```
require '../src/facebook.php';

$appId = 'appid'; //appid from facebook
$secret = 'secretid'; //secret from facebook
$groupId = 'groupid'; //facebook groupid

$facebook = new Facebook(array(
  'appId'  => $appId,
  'secret' => $secret,
  'cookie' => true
));

$response = $facebook->api('/'.$groupId.'/feed', array('limit' => 600, 'fields'=>'from,message, created_time'));    
print "<div class='facebook-feed-title'>Facebook Feed</div>";
foreach ($response['data'] as $value) {
    print "<div class='facebook-from'><a href='http://www.facebook.com/home.php?#!/profile.php?id=".$value['from']['id']."'>".$value['from']['name']."</a> wrote:</div>";
    print "<div class='link'>".$value['message']."</div>";        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:51:38.987

在图形 api 响应提要中，每个帖子都有一个参数调用“类型”。对于视频，它将是

> “类型”：“视频”

您可以从“源”参数中获取视频链接。然后将该链接添加到您的管嵌入代码中。

```
<iframe width="420" height="315" src="Youtube_source_link" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T18:30:52.117

虽然这个问题已经 3 岁了，但我昨晚为此苦苦挣扎，并遇到了这个问题。

我找到了解决方案，所以我在这里发布，以防其他人找到线程。

在 API 2.4 中，您可能无法取回所有字段，但您可以明确指定特定字段。例如：/%post-id%?fields=link,created_time 将返回帖子的创建时间和链接字段 - 包括嵌入的 youtube 链接。

重读上面的代码，我认为在字段子句中添加“链接”可能就足够了......

# c# - 如何将单个实体映射到多个表

> ID：10070664
> 
> 赞同：3
> 
> 时间：2012-04-09T08:22:05.097
> 
> 标签：c#, .net, entity-framework-4, mapping, ef-code-first

我想从具有单个实体类的两个表中获取数据。如何？？

```
public class HomeViewModel  
{ 
    [Key] 
    [Column("candidate_ID")] 
    public int candidateID { get; set; } 
    [Column("first_name")] 
    public string firstName { get; set; } 
    [Column("last_name")] 
    public string lastName { get; set; } 

    public string emailID { get; set; } 
    public string mb_country_code { get; set; } 
    public int mobile_no { get; set; } 
} 
```

上面的实体类包含 6 个属性，其中 3 个属性代表一个 table1，3 个代表 table2。在数据库中，表 1 将候选 ID 作为主键，表 2 将候选 ID 作为外键

更新：我所做的是添加 DBContext 类

```
public class EmployeeMonitoring : DbContext
{
    public DbSet<HomeViewModel> homeViewModel { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<HomeViewModel>().Map(m =>
            {
                m.Properties(a => new { a.candidateID, a.firstName, a.lastName,a.status });
                m.ToTable("table1");
            }).Map(m =>
            {
                m.Properties(c => new { c.candidateID,c.emailID, c.mobile_no, c.mb_country_code });
                m.ToTable("table2");
        });
     }
}` 
```

在控制器操作中，我使用了以下 Linq to Entity Query

```
var data = db.homeViewModel.ToList(); 
```

但它什么也不返回，即 0 计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:23:06.400

首先检查数据库表中的数据。
这是因为您可能在 table2 中没有相关数据。即table1主键值（即candidate_id）在table2外键candidateID中不存在...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:24:12.373

如果您建议 Table2 仅包含 table1 的外键，但具有不同的主键，那么您不能真正按照您的要求进行操作。简单地持有一个外键意味着这是一对多的关系，并且没有办法将单个实体映射到这样的一对多关系（即使您的数据只包含一条记录，模型关系类型仍然是一对多）

如果您的意思是 Table2 的主键和外键为 Candidate_id（因此它是 1 对 1 映射），那么您可以使用此处描述的继承相当轻松地将它们映射到单个实体：

[http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt。 aspx](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)

如果您只想创建一个包含来自两个表的数据的单个对象，那么这是一个相对简单的 linq 查询，我不会进入，因为我真的不知道您在这里寻找什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:10:45.150

This is called entity splitting. To make it work your `CandidateID` must be primary key in both tables and foreign key in the second table (entity splitting works only with one-to-one relations in a database).

**Edit:** There is another limitation. Entity splitting doesn't allow optional relations. Records in both tables must exists to make this work so if your table2 records are optional you must map both tables separately and construct your view model in the application from loaded records.

# c# - c#引发事件的最佳实践

> ID：10070669
> 
> 赞同：1
> 
> 时间：2012-04-09T08:22:44.573
> 
> 标签：c#, events, exception-handling, invocation

我试图通过引入实用程序类来总结引发事件的所有方法。希望对以下实施提供任何反馈。

开发的助手的想法是提供不同的引发事件的方式，包括异常处理和跨线程编组（如果需要）。

```
public static class EventUtils
{
    // startdard practice to raise an event
    // for more information, pls see: http://blogs.msdn.com/ericlippert/archive/2009/04/29/events-and-races.aspx

    public static void Raise<TEventArgs>(EventHandler<TEventArgs> handler, object sender, TEventArgs args)
        where TEventArgs : EventArgs
    {
        var temp = Interlocked.CompareExchange(ref handler, null, null);

        if (temp != null)
        {
            temp(sender, args);
        }
    }

    public static void Raise(EventHandler handler, object sender, EventArgs args)
    {
        var temp = Interlocked.CompareExchange(ref handler, null, null);

        if (temp != null)
        {
            temp(sender, args);
        }
    }

    public static void Raise(EventHandler handler, object sender)
    {
        Raise(handler, sender, EventArgs.Empty);
    }

    /// <summary>
    /// Method helps to make thread-safe raise of event as well as exception-safe
    /// The latest means that all exceptions occurred during the invocation will be collected
    /// and thrown as an AggregateException at the end of the call
    /// </summary>
    /// <typeparam name="TEventArgs"></typeparam>
    /// <param name="handler"></param>
    /// <param name="sender"></param>
    /// <param name="args"></param>
    public static void RaiseSafely<TEventArgs>(EventHandler<TEventArgs> handler, object sender, TEventArgs args)
        where TEventArgs : EventArgs
    {
        var temp = Interlocked.CompareExchange(ref handler, null, null);

        if (temp != null)
        {
            List<Exception> exceptions = null;
            foreach (EventHandler<TEventArgs> @delegate in temp.GetInvocationList())
            {
                var instanceMethod = @delegate.Target as ISynchronizeInvoke;
                try
                {
                    if (instanceMethod != null && instanceMethod.InvokeRequired)
                    {
                        // An exception might be thrown if the thread that should process the call is no longer active.
                        instanceMethod.EndInvoke(instanceMethod.BeginInvoke(@delegate, new[] { sender, args }));
                    }
                    else
                    {
                        @delegate.Invoke(sender, args);
                    }
                }
                catch (Exception ex)
                {
                    if (exceptions == null)
                        exceptions = new List<Exception>();
                    exceptions.Add(ex);
                }
            }
            if (exceptions != null)
            {
                throw new AggregateException(exceptions);
            }
        }
    }

    /// <summary>
    /// Method helps to make thread-safe raise of event as well as exception-safe
    /// The latest means that all exceptions occurred during the invocation will be collected
    /// and thrown as an AggregateException at the end of the call
    /// </summary>
    /// <param name="handler"></param>
    /// <param name="sender"></param>
    /// <param name="args"></param>
    public static void RaiseSafely(EventHandler handler, object sender, EventArgs args)
    {
        var temp = Interlocked.CompareExchange(ref handler, null, null);

        if (temp != null)
        {
            List<Exception> exceptions = null;
            foreach (EventHandler @delegate in temp.GetInvocationList())
            {
                var instanceMethod = @delegate.Target as ISynchronizeInvoke;
                try
                {
                    if (instanceMethod != null && instanceMethod.InvokeRequired)
                    {
                        instanceMethod.EndInvoke(instanceMethod.BeginInvoke(@delegate, new[] { sender, args }));
                    }
                    else
                    {
                        @delegate.Invoke(sender, args);
                    }
                }
                catch (Exception ex)
                {
                    if (exceptions == null)
                        exceptions = new List<Exception>();
                    exceptions.Add(ex);
                }
            }
            if (exceptions != null)
            {
                throw new AggregateException(exceptions);
            }
        }
    }

    /// <summary>
    /// Method helps to make thread-safe raise of event as well as exception-safe
    /// The latest means that all exceptions occurred during the invocation will be collected
    /// and thrown as an AggregateException at the end of the call
    /// </summary>
    /// <param name="handler"></param>
    /// <param name="sender"></param>
    public static void RaiseSafely(EventHandler handler, object sender)
    {
        RaiseSafely(handler, sender, EventArgs.Empty);
    }
} 
```

# java - 在java中发送短信

> ID：10070671
> 
> 赞同：0
> 
> 时间：2012-04-09T08:22:51.193
> 
> 标签：java, web-applications, sms, sms-gateway

我有一个 java 类，用于通过 java web 应用程序将 SMS 发送到手机。但我没有得到以下条款，我怎样才能得到这些？

```
 String username = "MySMSUsername";// how to know MySMSUsername?
      String password = "MyPassword";//how to know password?
      String smtphost = "MySMSHost.com";//how to know SMSHost?
      String compression = "My SMS Compression Information";
      String from = "mySMSUsername@MySMSHost.com";
      String to = "PhoneNumberToText@sms.MySMSHost.com";
      String body = "Hello SMS World!"; 
```

完整的源代码：[如何使用 Java 发送 SMS](https://stackoverflow.com/questions/2234613/how-to-send-sms-using-java)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:45:00.450

要从您的应用程序（网络/桌面）发送短信，您需要以下任何解决方案 1\. 编写代码并附加 GSM 设备（电话/调制解调器） 2\. 购买 api 并将其集成到您的应用程序中 3\. 购买和 Email2SMS api然后集成

上面的代码似乎使用了任何 APi，所以你可以从任何供应商那里购买 api，你可以谷歌搜索 bulksms，你会找到你所在地区的 api 供应商，根据你的需要和广告关注特定的 api，

所有上述细节将由他们提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:53:45.137

您所指的代码只是使用 java 程序发送电子邮件。不使用 java 发送短信。

```
String username = "saroj"; for example
String password = "saroj123";
String smtphost = "your e-mail server host name"; you can IP address of the mail server
String compression = "this is the subject of your e-mail"; 
String from = "saroj@saroj.com";
String to = "yourfreind@abc.com";
String body = "This is the actual message content"; 
```

使用 java 发送电子邮件时需要所有这些信息，而不是发送短信。为了发送短信，您需要配置短信网关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:45:43.667

您必须使用某些 SMS 提供商 API，否则您将无法获取这些信息。SMS 提供商将为您提供您的订阅用户名=MySMSUsername、密码、url 或 api 以通过 Web 服务、HTTP 等进行调用，From to 和 body 将由用户通过 Web 应用程序提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-26T05:37:24.107

如前所述，您必须使用提供程序。SMPP 协议需要一个 SMS 网关，并且没有免费的 SMS 网关（据我所知）。但是，一旦您找到了像[SmsGlobal](https://www.smsglobal.com/)这样的 SMS 网关（有很多提供商），您就可以使用[Ogham](https://groupe-sii.github.io/ogham/)库。发送 SMS 的代码很容易编写（它会自动处理字符编码和消息拆分）。真正的 SMS 使用 SMPP 协议（​​标准 SMS 协议）或通过提供商发送。您甚至可以使用 SMPP 服务器在本地测试您的代码，以在支付真正的 SMS 发送费用之前检查您的 SMS 的结果。

```
package fr.sii.ogham.sample.standard.sms;

import java.util.Properties;

import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.sms.message.Sms;

public class BasicSample {
    public static void main(String[] args) throws MessagingException {
        // [PREPARATION] Just do it once at startup of your application

        // configure properties (could be stored in a properties file or defined
        // in System properties)
        Properties properties = new Properties();
        properties.setProperty("ogham.sms.smpp.host", "<your server host given by the provider>");                                 // <1>
        properties.setProperty("ogham.sms.smpp.port", "<your server port given by the provider>");                                 // <2>
        properties.setProperty("ogham.sms.smpp.system-id", "<your server system ID given by the provider>");                       // <3>
        properties.setProperty("ogham.sms.smpp.password", "<your server password given by the provider>");                         // <4>
        properties.setProperty("ogham.sms.from.default-value", "<phone number to display for the sender>");  // <5>
        // Instantiate the messaging service using default behavior and
        // provided properties
        MessagingService service = MessagingBuilder.standard()                                               // <6>
                .environment()
                    .properties(properties)                                                                  // <7>
                    .and()
                .build();                                                                                    // <8>
        // [/PREPARATION]

        // [SEND A SMS]
        // send the sms using fluent API
        service.send(new Sms()                                                                               // <9>
                        .message().string("sms content")
                        .to("+33752962193"));
        // [/SEND A SMS]
    }
} 
```

还有许多其他[功能](https://groupe-sii.github.io/ogham/v3.0.0/user-manual.html#sms-usage)和[示例](https://github.com/groupe-sii/ogham/tree/v3.0.0/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms)/[弹簧示例](https://github.com/groupe-sii/ogham/tree/v3.0.0/sample-spring-usage/src/main/java/fr/sii/ogham/sample/springboot)。

# http - HTTP Cookie 过期时间（平均、最大、...）

> ID：10070673
> 
> 赞同：13
> 
> 时间：2012-04-09T08:23:00.167
> 
> 标签：http, cookies, max, w3c

我写了一篇关于网络访问者跟踪的学士论文，因此 HTTP Cookies 是其中的重要组成部分。关于最长过期时间，最长年龄，......是否有“自然”限制？我读到 expire-number 是一个 unix-timestamp（32 位），所以它应该可以工作到 2038 年。另一方面，现代浏览器应该使用 64 位数字来存储它。

我试图设置一个极高的值（Chromium/Linux）。

```
Warning: Expiry date cannot have a year greater then 9999 in [...] 
```

但是其他浏览器倾向于实现不同的范围 - 有没有 W3C 建议？

最常见的平均过期时间是多少？你知道研究或论文吗？我找不到一些，但这是一个如此受欢迎的话题......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T12:34:16.867

RFC 6265 定义了 Cookie，所以如果我们查看第 5.2.1 节，我们会看到：

> 如果到期时间晚于用户代理可以表示的最后日期，则用户代理可以将到期时间替换为最后可表示的日期。

日期不是作为 unix 时间戳发送的，而是作为[第 5.1.1 节](https://www.rfc-editor.org/rfc/rfc6265#section-5.1.1)中定义的表示形式发送的，它只指定了一个下限：1601 年。

因此，这将到期日期的上限留给了浏览器。大多数浏览器将使用其操作系统的底层日期实用程序（或分别为 glibc），因此它们的约束将适用（现在应该主要支持 64 位）。要获得明确的答案，您可能必须检查各种浏览器实现。

# mysql - Mysql慢查询使用索引记录查询

> ID：10070676
> 
> 赞同：0
> 
> 时间：2012-04-09T08:23:13.723
> 
> 标签：mysql

我启用了慢查询日志来记录运行时间超过 2 秒的查询以及不使用索引的日志查询

我注意到一些使用索引的频繁查询继续出现在日志中

示例查询

```
SELECT `a`.`orderid`, `a`.`date`, `a`.`status`, `a`.`restname`, `a`.`admin_user`,    `a`.`model_type`, `b`.`name` as cityname
FROM `tk_order` AS a
INNER JOIN `tk_city` AS b ON `a`.`cityid` = `b`.`id`
WHERE `a`.`date` =  '2012-04-09'
AND `a`.`status` =  0
AND `a`.`mode` =  3
ORDER BY `a`.`orderid` desc; 
```

上面的查询我为（日期、状态、模式）添加了一个复合索引，当我运行解释时，这是输出

```
1 SIMPLE a ref cityid,date_3 date_3 4 const,const 6 Using where; Using temporary; Using filesort
1   SIMPLE  b index PRIMARY,id id 52 2 Using where; Using index; Using join buffer 
```

订单表有大约 100000 条记录，不知道我在这里做错了什么。

# c - 将用户的 proc 条目分解为更小的字符串

> ID：10070679
> 
> 赞同：0
> 
> 时间：2012-04-09T08:23:27.090
> 
> 标签：c, linux, linux-kernel

我正在制作一个模块，在其中我从用户那里获取一些条目并将它们分解成更小的字符串并将它们存储到一个数组中。逻辑工作正常，但几分钟后内核恐慌。下面我给出了将条目从用户空间放入 /proc 文件的代码，然后是模块中的编码。

```
FILE *fp;
fp =fopen("/proc/tx_info","w");

fprintf(fp,"protocol   address      tos   payload interface");
fprintf(fp,"\n %3s %6s %7d %5d %6s\n",prot,addr,tos,pld,inter);
fclose(fp); 
```

现在是模块中的代码

```
void tx_break(void)
{
char ch;
char tmp[25];
int i =0;
int k=0,j=0,y = 0;

ch = tx_buffer[0];
//runing the while loop while the ch goes to next line from where the real user entries starts
while(ch != '\n')
     {
       ch = tx_buffer[i];
       i++;
     }

while(ch != '\0')
{
   j=0;
//while loop for blanks in between the user entries
   while(ch == ' ' && ch != '\0')
    {
      i++;
      ch = tx_buffer[i];
    }
//while loop to put the user defined entries to a temporary tmp which would become an entry of 2d array(info.arr[][])
  while(ch != ' ' && ch !='\0')
    {
       tmp[j] = ch;
       j++;
       i++;
       ch = tx_buffer[i];
    }
    tmp[j] = '\0';
    printk(KERN_ALERT"\n%s\n",tmp);
//putting user entries to an 2d array
    for(k=0;tmp[k] != '\0';k++)
         info.arr[y][k] = tmp[k];
         info.arr[y][k] = '\0';
    printk("the 2d::%s",&info.arr[y][0]);
    y++;
   // memcpy(&info.arr[k][0],tmp,j+1);
   // k++;
}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:26:52.090

我真的不知道您是如何阅读的`tx_bufferp`，所以我想您已将文件中的所有信息都存储在上面`/proc/tx_info`。

从这里，我看到了一些错误：

```
while(ch != '\n')
{
    ch = tx_buffer[i];
    i++;
} 
```

在上次执行时保持 ch = '\n'。

现在，使用 ch = '\n', `tmp[0] = "\n"`，您将其存储`info.arr[0]`并打印其地址。因此，您已将一项非项目存储在`info.arr`. 这个变量的维数是多少？也许您存储超出范围。

在最后一项处理中，您也将`\n`字符存储在`tmp`因为`while(ch != ' ' && ch !='\0')`. 这个对吗？

# svn - svn diff 没有结帐

> ID：10070688
> 
> 赞同：1
> 
> 时间：2012-04-09T08:24:27.287
> 
> 标签：svn, diff

是否可以在远程存储库中找出项目的两个标签之间的递归差异？

换句话说，如果我知道 2 个标签的位置分别是[https://myrepo.com/project/tags/v1](https://myrepo.com/project/tags/v1)和[https://myrepo.com/project/tags/v2](https://myrepo.com/project/tags/v2)，我能找到这两个标签之间的递归差异吗没有在我的机器上签出代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:28:47.167

`svn diff`也适用于 URL。如果您已经安装了 SVN 命令行工具，您所要做的就是运行：

```
svn diff https://myrepo.com/project/tags/v1 https://myrepo.com/project/tags/v2 > v1tov2.diff 
```

之后`v1tov2.diff`将包含两个标签之间的统一差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:28:40.273

使用命令行工具：

```
svn diff https://myrepo.com/project/tags/v1 https://myrepo.com/project/tags/v2 
```

# java - 在没有 getValueAt() 并发症的情况下修剪 AbstractTableModel

> ID：10070694
> 
> 赞同：1
> 
> 时间：2012-04-09T08:24:58.730
> 
> 标签：java, swing, jtable, abstracttablemodel

有没有办法从完整的 AbstractTableModel 派生一个修剪过的 AbstractTableModel 而没有 getValueAt() 复杂性？

我的完整数据（包括 userIds）被加载到 JTable AbstractTableModel 中。但是，出于显示目的，我希望派生与特定 userId 关联的数据的修剪 AbstractTableModel。

我开始认为这是不可能的，因为 getValueAt 干预并引发 IndexOutOfBounds 异常？这些异常似乎是因为未填充修剪后的数据。

```
public class PrunedUserIdTableModel extends AbstractTableModel {

    TableModel fullModel;
    List columnIdentifiers;
    List tempDatum;
    List tempData; // holds tempDatums
    int rowCount; // reports pruned rowCount through getRowCount() method
    List prunedData; // intended to hold data of matched userId rows

    public PrunedUserIdTableModel(JTable fullTable, String userId) {
        fullModel = fullTable.getModel();
        columnIdentifiers = new ArrayList();
        tempDatum = new ArrayList();
        tempData = new ArrayList();
        rowCount = 0;

        List<Integer> userCount = new ArrayList<>(); 

        // Load columnIdentifiers from fullModel; omitted here

        // Go through fullModel searching for rows with matching userIds

        for (int i = 0; i < fullModel.getRowCount(); i++) {
            for (int k = 0; k < fullModel.getColumnCount(); k++) {
                tempDatum.add(fullModel.getValueAt(i,k);
                if ((fullModel.getValueAt(i,k).equals(userId)) {
                    // Matching userId found; record relevant row
                    userCount.add(g);
                }
            }
            tempData.add(tempDatum);
            tempDatum.clear();  
        }

        // Now populate prunedData
        for (int j = 0; j < userCount.size(); j++) {
            prunedData.add(tempData.get(userCount.get(j)));
            rowCount=rowCount+1;
        }

        fireTableChanged(null);
    }
    @Override
    public int getRowCount() {
        return rowCount;
    }  
    @Override
    public int getColumnCount() {
        return fullModel.getColumnCount();
    }
    @Override
    public int getValueAt(int rowIndex, int columnIndex) {
        // THROWS INDEX OUT OF BOUNDS EXCEPTION: Index 0; size 0
        List rowList = (List)prunedData.get(rowIndex);
        return rowList.get(columnIndex);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T08:33:19.053

使用 a`TableRowSorter`过滤您的`JTable`行以仅显示您想要的行。`convertRowIndexToView`然后，`convertRowIndexToModel`当您通过索引引用某些内容时，请务必调用。

# php - 从mySQL中的2个表中选择数据，加入它

> ID：10070697
> 
> 赞同：1
> 
> 时间：2012-04-09T08:25:45.743
> 
> 标签：php, mysql, select, join, json

我需要从我的数据库中的 2 个表中选择数据 - 评论和用户。这是这些表的结构：

**评论**：

评论ID | 评论日期和时间 | 图片ID | 用户名 | 评论

**用户**：

用户名 | 用户名

我需要选择两个表中的所有数据，将其加入 userID，其中 imageID 应该等于`$imageID`. 我尝试了以下`SELECT`语句：

```
 return json_encode(select("
    SELECT
     commentDateAndTime,
     imageID,
     userID,
     COMMENT,
     username
   FROM users
    JOIN comments
    ON comments.userID = users.userID
   WHERE comments.imageID = $imageID
   GROUP BY comments.comment   
")); 
```

但是我没有收到任何数据。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T08:39:29.303

如果您需要所有结果，为什么要使用 group by。

```
SELECT users.* , comments.*
FROM users JOIN comments ON comments.userID = users.userID 
WHERE comments.imageID = $imageID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T08:49:50.433

MySQL 执行自动连接（来自[此页面](http://dev.mysql.com/doc/refman/5.5/en/select.html)：*“FROM [...] 子句指示要从中检索行的一个或多个表。如果您命名多个表，则表示您正在执行连接”*）。

此外，由于有两`userID`列，您需要在表名之前指定哪一列。

所以你的查询可能是这样的：

```
SELECT commentDateAndTime, imageID, users.userID AS userID, comment, username
FROM comments, users
WHERE comments.userID = users.userID AND comments.imageID = $imageID 
```

# java - java本地上传下载文件

> ID：10070698
> 
> 赞同：0
> 
> 时间：2012-04-09T08:25:48.513
> 
> 标签：java

我有一个关于简单上传和下载文件的问题。我有一个允许用户上传文件的本地 java 程序。例如。将桌面中调用 abc.txt 的文件上传到 java 工作区位置 ./upload。但是，我使用：

```
boolean success = srcFile.renameTo(new File(dir, srcFile.getName())); 
```

dir 是目标，文件将在桌面剪切并粘贴到 ./upload。但我想复制和粘贴。然后，存储文件的路径将存储在数据库中。怎么解决。

另外，上传后，是否可以根据存储在数据库中的路径下载文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:42:06.513

如果要保留旧文件，则不得使用`renameTo`.

您必须创建新文件。为此，您可以使用Apache [Commons IO中的](http://commons.apache.org/io/)[copyFile](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyFile%28java.io.File,%20java.io.File%29)。

例如：

```
File srcFile = new File("source.doc");
File destFile = new File(dir, srcFile.getName());
FileUtils.copyFile(srcFile, destFile); 
```

> 另外，上传后，是否可以根据存储在数据库中的路径下载文件？

是的。如果您可以始终使用该`copyFile`功能直接访问文件路径，则可以使用 db 上的路径在本地复制文件。

# c# - 成员名称不能与其封闭类型 C# 相同

> ID：10070701
> 
> 赞同：87
> 
> 时间：2012-04-09T08:25:51.673
> 
> 标签：c#

下面的代码在 C# 中，我使用的是 Visual Studio 2010。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;

namespace FrontEnd
{
    class Flow
    {
        long i;
        private int x,y;
        public int X
        {
            get;set;
        }
        public int Y
        {
            get;set;
        }

        private void Flow()
        {
            X = x;
            Y = y;
        }

        public void NaturalNumbers(int x, int y)
        {
            for (i = 0; i < 9999; i++)
            {
                Console.WriteLine(i);
            }
            MessageBox.Show("done");
        }
    }
} 
```

当我编译上面的代码时，我得到了这个错误：

> 错误：“流程”：成员名称不能与其封闭类型相同

为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-04-09T08:28:32.990

与类名相同的方法名称为*构造函数*。构造函数没有返回类型。如此正确：

```
private Flow()
{
   X = x;
   Y = y;
} 
```

或将函数重命名为：

```
private void DoFlow()
{
   X = x;
   Y = y;
} 
```

尽管整个代码对我来说没有任何意义。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-09T08:29:14.333

问题出在方法上：

```
private void Flow()
{
    X = x;
    Y = y;
} 
```

您的类已命名`Flow`，因此此方法也不能命名`Flow`。您必须将`Flow`方法的名称更改为其他名称才能编译此代码。

还是您的意思是创建一个私有构造函数来初始化您的类？如果是这种情况，您将不得不删除`void`关键字以让编译器知道您声明了构造函数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-07T18:53:17.717

构造函数不返回 type ，只需删除在您的情况下为 void 的返回类型。那时它会运行良好。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-22T11:13:49.177

由于 Constructor 应该在 Class 的开头，因此您面临上述问题。因此，您可以更改名称，或者如果您想将其用作构造函数，只需复制类开头的方法即可。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-04T20:43:06.713

只需删除它，因为构造函数没有像 void 这样的返回类型，它将是这样的：

```
private Flow()
    {
        X = x;
        Y = y;
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-20T11:15:20.740

构造函数不应该有返回类型。在每个构造函数之前删除 void 。

构造函数的一些非常基本的特征：

一种。与 b 类同名。没有返回类型。C。每次使用该类创建对象时都会调用。例如，在你的程序中，如果你制作了两个 Flow 对象，Flow flow1=new Flow(); 流流 2=新流（）；然后 Flow 构造函数将被调用 2 次。

d。如果您只想调用一次构造函数，则将其声明为静态（静态构造函数）并且不要忘记从静态构造函数中删除任何访问修饰符..

# python - 我们可以在 web2py 应用程序代码中使用 java 代码吗？

> ID：10070703
> 
> 赞同：1
> 
> 时间：2012-04-09T08:26:03.567
> 
> 标签：python, python-2.7, web2py, web2py-modules

我必须实现一个 web2py 应用程序，它必须访问 java 代码（它具有连接到远程机器的代码），但不确定我们是否可以在 web2py 中执行它。我的电脑有 Java 1.6、Python2.7、web2py、eclipse安装。

用例是：

我在 web2py 应用程序中创建了一个按钮，单击该按钮后，它应该实例化 java 对象并调用该 java 对象的特定方法，该方法将进一步连接到远程机器。

疑点是：

1.  我们可以将那个特定的 java 类部署到 web2py 服务器，以便 web2py 应用程序可以轻松访问它吗？

2.  是否可以从 python 代码中导入该类？

3.  如何从python代码实例化java对象？

4.  以及如何从python代码调用java方法？

问候， 皮克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:49:34.010

我会考虑研究网络服务。如果您可以从 java 公开 url，它将路由到执行逻辑的 java 方法/函数并返回 json 对象。在 web2py urllib2 中，您可以发出请求并将该 json 解码为本机 python 字典。线索是您必须公开对象的所有方法并将对象作为 json 来回传递。不要害怕在大多数编程语言中，对象只是具有某些特殊品质的 hash_arrays/字典。因此，如果您可以序列化和反序列化对象并公开适当的 url，那么您会没事的。

jython 中也有 web2py 的实现。但是然后整个堆栈将在 JVM 中，我可能会更复杂的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:55:06.297

如果 java 所做的只是连接到远程机器，那么我强烈建议您在 python 中重新实现它。

如果它正在做一些实质性的事情，那么考虑在它前面放置一个 web 界面（我喜欢[spark](http://www.sparkjava.com/)微框架），你可以使用`requests`模块与它交谈（通过 pip 获取它）。

# security - WSO2 ESB 在绑定层次结构中应用安全策略

> ID：10070704
> 
> 赞同：2
> 
> 时间：2012-04-09T08:26:23.243
> 
> 标签：security, binding, wso2, wso2esb, policy

我正在尝试将多个安全策略应用于 WSO2 ESB 4.0.3 中定义的代理服务。我需要在操作级别应用一项策略，而在消息级别应用其他策略。

我正在使用源视图直接定义代理服务，而不是使用 Web UI/策略编辑器。

我尝试按照此处所述定义每个策略：

[http://docs.wso2.org/display/ESB403/Policies+for+Service](http://docs.wso2.org/display/ESB403/Policies+for+Service)

但生成的 WSDL 显示它在错误的层次结构中得到应用。

请告知 WSO2 ESB 是否支持此功能，或者我做错了！

我的代理

```
<proxy name="StockQuoteProxy" transports="https http" startOnLoad="true" trace="disable">
    <target endpoint="SimpleStockQuoteService_noSuspendOnFailure_TCPMon">
        <inSequence>
            <header xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" name="wsse:Security" action="remove"/>
        </inSequence>
        <outSequence>
            <send/>
        </outSequence>
    </target>
    <publishWSDL uri="file:repository/samples/resources/proxy/sample_proxy_3.wsdl"/>
    <policy key="sec_operation-Policy"/>
    <policy key="sec_InOut-Policy"/>
    <enableSec/>
</proxy> 
```

我的消息级别政策

```
<wsp:PolicyAttachment wsu:Id="Service_message_policy_attachment" 
            xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
            xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" 
            xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
<wsp:AppliesTo>
<policy-subject identifier="binding:soap11/operation:getQuote/in"/>
<policy-subject identifier="binding:soap12/operation:getQuote/in"/>
</wsp:AppliesTo>
<wsp:Policy wsu:Id="Service_message_policy">
    <wsp:ExactlyOne>
        <wsp:All>
            <sp:SignedParts>
                <sp:Body />
               <sp:Header Name="To"
                  Namespace="http://www.w3.org/2005/08/addressing" />
               <sp:Header Name="From"
                  Namespace="http://www.w3.org/2005/08/addressing" />
               <sp:Header Name="FaultTo"
                  Namespace="http://www.w3.org/2005/08/addressing" />
               <sp:Header Name="ReplyTo"
                  Namespace="http://www.w3.org/2005/08/addressing" />
               <sp:Header Name="MessageID"
                  Namespace="http://www.w3.org/2005/08/addressing" />
               <sp:Header Name="RelatesTo"
                  Namespace="http://www.w3.org/2005/08/addressing" />
               <sp:Header Name="Action"
                  Namespace="http://www.w3.org/2005/08/addressing" />
            </sp:SignedParts>
            <sp:EncryptedParts>
                <sp:Body />
            </sp:EncryptedParts>
        </wsp:All>
    </wsp:ExactlyOne>
</wsp:Policy>
</wsp:PolicyAttachment> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:28:00.863

这由 WSO2 ESB 支持。

实际上，问题在于您尝试使用的消息级别策略。您正在尝试提供策略附件元素，而不是策略元素。如果您尝试通过其 services.xml 将多个策略与 Axis2 服务结合使用，则此方法有效。但如果您使用的是 Carbon 策略编辑器，它希望您提供有效的策略元素。

以下策略元素可以从您使用的策略附件元素中派生。

```
<wsp:Policy xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Service_message_policy">
    <wsp:ExactlyOne>
        <wsp:All>
            <sp:SignedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
                <sp:Body />
                <sp:Header Name="To" Namespace="http://www.w3.org/2005/08/addressing" />
                <sp:Header Name="From" Namespace="http://www.w3.org/2005/08/addressing" />
                <sp:Header Name="FaultTo" Namespace="http://www.w3.org/2005/08/addressing" />
                <sp:Header Name="ReplyTo" Namespace="http://www.w3.org/2005/08/addressing" />
                <sp:Header Name="MessageID" Namespace="http://www.w3.org/2005/08/addressing" />
                <sp:Header Name="RelatesTo" Namespace="http://www.w3.org/2005/08/addressing" />
                <sp:Header Name="Action" Namespace="http://www.w3.org/2005/08/addressing" />
            </sp:SignedParts>
            <sp:EncryptedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
                <sp:Body />
            </sp:EncryptedParts>
        </wsp:All>
    </wsp:ExactlyOne>
</wsp:Policy> 
```

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:06:38.813

您可以通过策略编辑器编辑策略，以将策略应用于绑定层次结构中的不同策略主体。您可以参考[使用不同的安全策略保护请求和响应消息，](http://hasini-gunasinghe.blogspot.com/2011/09/different-security-policies-for-in-out.html)该示例通过一个示例演示如何将不同的安全策略应用于输入和输出消息。

此示例直接编辑`services.xml`axis2 服务的。

如果您通过 ESB 的策略编辑器更改策略并保存，您将获得相同的效果。

如果它仍然不适合您，请附上编辑后的 ​​policy.xml 和生成的 wsdl，这将有助于提供对问题的更多见解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T21:18:30.097

在做了一些研究之后，我发现了一些潜在的解决方案，并希望与大家分享。

问题 1：无法在粒度级别应用安全策略。

解决方案 ：

我能够在

1.) 根级别

2.) 操作水平和

3.) 消息级别

使用***operationName***和***operationNamespace***

```
<proxy name="StockQuoteProxy" transports="https http" startOnLoad="true" trace="disable">
    <target endpoint="SimpleStockQuoteService_noSuspendOnFailure_TCPMon">
        <inSequence>
            <header xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" name="wsse:Security" action="remove"/>
        </inSequence>
        <outSequence>
            <send/>
        </outSequence>
    </target>
    <publishWSDL uri="file:repository/samples/resources/proxy/sample_proxy_3.wsdl"/>
    <!-- Default policy for all operations   -->
    <policy key="sec_SigOnly"/>
    <!--  policy for  getFullQuote operation , in and Out message   -->
    <policy key="SigEncrSTS" operationName="getFullQuote" operationNamespace="http://services.samples"/>
    <!--  policy for  getQuote operation , in  message   -->
    <policy key="sec_InOut-Policy" operationName="getQuote" operationNamespace="http://services.samples" type="in"/>
    <enableSec/>
</proxy> 
```

问题 2：部署代理服务时，会自动生成已发布的 WSDL，我们对自定义它的控制有限/无法控制。

解决方案：使用属性***useOriginalwsdl***，我能够发布原始提供的 WSDL，仅将 IP/端口更改为代理 IP/端口。

```
<proxy name="STSProxy" transports="https http" startOnLoad="true" trace="disable">
    <target endpoint="PingSTS_UT">
        <inSequence>
            <property name="preserveProcessedHeaders" value="true" scope="default"/>
            <log level="full"/>
        </inSequence>
        <outSequence>
            <send/>
        </outSequence>
    </target>
    <publishWSDL key="wsdl_sts"/>
    <parameter name="useOriginalwsdl">true</parameter> 
```

我希望 WSO2 支持同时应用这两种解决方案。即，能够控制如何生成已发布的 WSDL 并在粒度级别应用安全策略。

PS：在 Source View 中直接编辑应用安全策略时，UI 仍然显示**Unsecured**。仅当通过 Web UI 应用内置安全策略或策略名称与内置策略之一匹配时，它才会显示**Secured**

# android - Android - ToggleButton setChecked 和 setSelected 不起作用

> ID：10070705
> 
> 赞同：3
> 
> 时间：2012-04-09T08:26:36.397
> 
> 标签：android, state, sharedpreferences, togglebutton

我要做的是检查`SharedPreferences`音量和振动是否为`on`或`off`。如果是 on`ToggleButton`应该设置为`on`, else, `off`。

我已经尝试过在s 上使用`setChecked()`和，但它并没有改变s 的状态。`setSelected()``ToggleButton``TogggleButton`

`true`我还尝试为and初始化一个变量，`false`以确保但仍然无法正常工作。

**似乎是什么问题？**

```
 optionsDB = getSharedPreferences(table, 0);

    String volReturned = optionsDB.getString("volume", "Couldn't load data");
    String vibReturned = optionsDB.getString("vibration", "Couldn't load data");
    Toast.makeText(this, "Vol: "+volReturned+" Vib: "+ vibReturned, Toast.LENGTH_LONG).show();
    boolean boolT = true;
    boolean boolF = false;
    if (volReturned=="On"){
        /*tbtnvol.setChecked(true);*/
        tbtnvol.setSelected(boolT);
    }else{
        tbtnvol.setSelected(boolF);
        }
    if (vibReturned=="On"){
        tbtnvib.setSelected(boolT);
    }else{
        tbtnvib.setSelected(boolF);
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-05T15:23:12.590

好吧，有两种与 ToggleView 相关的方法：

1.  setChecked（布尔值）

2.  setSelected（布尔值）

并且它们都将成对使用。如果要设置切换视图选中，请将“true”传递给**这**两个方法，反之亦然。

原因是，setChecked()*设置与您的视图对象关联的内在布尔数据*成员，而 setSelected*设置与您的视图对象关联的 UI*。

是的，这是有线的，实际上一个方法应该同时设置 UI 和数据，但这就是它的实现方式，因此我们必须成对使用这些方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T08:32:41.297

而不是`==`用于`.equals()`字符串比较..

尝试这个，

```
if (volReturned.equals("On")){
        /*tbtnvol.setChecked(true);*/
        tbtnvol.setSelected(boolT);
    }else{
        tbtnvol.setSelected(boolF);
        }
    if (vibReturned.equals("On")){
        tbtnvib.setSelected(boolT);
    }else{
        tbtnvib.setSelected(boolF);
        } 
```

# c# - protobuf-net：检测到可能的递归

> ID：10070710
> 
> 赞同：5
> 
> 时间：2012-04-09T08:26:52.533
> 
> 标签：c#, serialization, recursion, protobuf-net

我在尝试序列化对象图时遇到异常（不是很深）。其中有意义的部分是这样的：

> [错误] 致命的未处理异常：ProtoBuf.ProtoException：检测到可能的递归（偏移量：5 级）：ProtoBuf.ProtoWriter.CheckRecursionStackAndPush（对象）<0x00127> 在 ProtoBuf.ProtoWriter.StartSubItem（对象，ProtoBuf.ProtoWriter ,bool) <0x0002f>

该图表示文件/目录结构，我的模型（简化）如下所示：

```
[ProtoContract] 
[ProtoInclude(100, typeof(PackageDirectory))]
[ProtoInclude(200, typeof(PackageFile))]
public abstract class PackageMember
{
   [ProtoMember(1)] 
   public virtual string Name { get; protected set; }

   [ProtoMember(2, AsReference=true)] 
   public PackageDirectory ParentDirectory { get; protected set; }  
}

[ProtoContract]
public class PackageDirectory : PackageMember
{
   [ProtoMember(3)]
   private Dictionary<string, PackageMember> _children;

   public PackageDirectory()
   {
      _children = new Dictionary<string, PackageMember>();
   }

   public PackageDirectory (string name, PackageDirectory parentDirectory)
      : this()
   {
      this.ParentDirectory = parentDirectory;
      this.Name = name;         
   }

   public void Add (PackageMember member)
   {
      _children.Add(member.Name, member);
   }
}

[ProtoContract]
public class PackageFile : PackageMember
{
   private Stream _file;
   private BinaryReader _reader;

   private PackageFile() 
   {}

   public PackageFile (string name, int offset, int length, PackageDirectory directory,  Stream file)
   {
      this.Name = name;
      this.Length = length;
      this.Offset = offset;
      this.ParentDirectory = directory;

      _file = file;
      _reader = new BinaryReader(_file);
   }

   [OnDeserialized]
   protected virtual void OnDeserialized(SerializationContext context)
   {
      var deserializationContext = context.Context as DeserializationContext;

      if (deserializationContext != null)
      { 
         _file = deserializationContext.FileStream;
         _reader = new BinaryReader(_file);
      }
   }

   [ProtoMember(3)]
   public int Offset { get; private set; }

   [ProtoMember(4)]
   public int Length { get; private set; }
} 
```

这棵树的深度接近 10-15 级，小于`ProtoBuf.ProtoWriter.RecursionCheckDepth`值 (25)。（所以也许这是一个错误？）使用**的 protobuf-net 版本**是从trunk **v2**（**rev 491**）编译的版本。

实际上，我通过修改 protobuf-net 代码解决了这个问题。我将值更改`ProtoBuf.ProtoWriter.RecursionCheckDepth`为 100，一切似乎都很好。

问题是是否有任何“真正的”方法可以在不修改 protobuf 代码的情况下序列化此类图形？这种行为是正确的还是错误的？

我的平台是**Windows 7 Professional 64 位上的 Mono-2.10-8**

PS 另外我发现，如果我使用以下代码进行解串，我应该将 PackageDirectory 无参数构造函数公开。

```
var value = new PackageDirectory();
RuntimeTypeModel.Default.Deserialize(ms, value, typeof(PackageDirectory), new SerializationContext {
   Context = new DeserializationContext {
   FileStream = _file,
}}); 
```

这是另一个主题，但已通过提供的代码很好地说明了这一点。我认为在这种情况下应该允许声明私有构造函数，因为现在行为与 Serializer.Deserialize(...) 的行为不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T08:50:49.237

**仅当在数据中看到相同的引用**（在同一路径中出现两次）时才会引发此异常，并且仅在深度至少为*时才启用*`RecursionCheckDepth`跟踪。这立即让我怀疑引用的 10-15 深度限制，尽管 protobuf 处理的级别不一定与您计算的级别完全相同*。*对我来说，将这个数字提高到 100 就可以让它工作是没有意义的——事实上，它的存在`RecursionCheckDepth`纯粹是一种优化，以限制“典型”图表所涉及的工作量，只有在它开始时才能够进行更严格的检查看得很深。

但是，我注意到这也可能暗示基于继承的处理中存在一些微妙的错误，可能也与`AsReference`. 我广泛且不断地使用protobuf-net，我还没有看到这样的问题。如果您有可重现的复制品，我非常希望看到它。

# arrays - matlab：多轨迹的位移计算

> ID：10070712
> 
> 赞同：0
> 
> 时间：2012-04-09T08:26:58.043
> 
> 标签：arrays, matlab, matrix, organization

我正在模拟粒子的扩散。模拟坐标存储在矩阵中，格式如下：

```
data(:, 1) % overall track number
data(:, 2) % dataset number
data(:, 3) % individual track number (within dataset)
data(:, 4) % frame number
data(:, 5) % xcoordinate
data(:, 6) % ycoordinate 
```

我想做的是创建另一个存储平方位移的矩阵。格式如下：

```
SD(:, 1)   % overall track number (like in data matrix)
SD(:, 2:n) % squared displacement between 1st and n-th frame 
```

请注意，每个数据集中的帧数不相等。如果每个轨迹中的帧数小于 n+1，则将其保留为 NaN。

我正在使用地球上最差和最慢的方法计算它 - 通过几个 for 循环：

```
SD(:, 1) = data(:, 1);

for i=1:length(data(:, 1)) % I am taking each row
    for j=1:lagsToCalculate % then every timelag (or n as described above)
        if j<i  % check if enough data from the 1st point
            if data(i, 3) == data(i-j, 3) % and if it is still the same trajectory

                % calculate square displacement
                SD(i,j+1) = (data(i, 5)-data(i-j, 5))^2+(data(i, 6)-data(i-j, 6))^2;

            else

                SD(i, j+1) = NaN; % or set to NaN
            end
        else
            SD(i, j+1) = NaN;
        end
    end 
 end 
```

我敢肯定有十亿倍有效的方法可以做到这一点，但我对matlab（和编程）不是很流利，并且无法提出任何想法:) 任何人都可以提出一些合理的建议吗？也许一些数据重组会有所帮助？谢谢你的每一个想法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:42:16.000

尝试这个：

```
SD(:,1) = data(:,1) %as you already have 
```

然后

```
SD(2:n,1) = sum(diff(data(:,5:6)).^2,2) 
```

我不确定你如何初始化 SD，但类似

```
SD = zeros(size(data)) 
```

可能是合适的。我会让你弄清楚上面的第二行，就像“优雅”的 Matlab 一样，从最里面的表达式开始向外构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:36:03.673

好的，这可能不是最好的解决方案，但也许有人会发现它有帮助：

```
nData = size(data,1);
numberOfDeltaT = 10; % use whatever works for you
squaredDisplacement = zeros(nData, numberOfDeltaT);
squaredDisplacement(:, 1) = data(:, 1);

for track=1:max(data(:, 1))
    for dt = 1:numberOfDeltaT
        trackStart = find(data(:, 1)==track,1,  'first');
        trackEnd   = find(data(:, 1)==track,1,  'last');
        deltaCoords = data(trackStart+dt:trackEnd,5:6) - data(trackStart:trackEnd-dt,5:6);
        squaredDisplacement(trackStart+dt:trackEnd, dt+1) = sum(deltaCoords.^2,2); 
        squaredDisplacement(trackStart:trackStart+dt-1, dt+1) = NaN;
    end
end 
```

（基于这个答案：[用 MATLAB 计算均方位移（msd）](https://stackoverflow.com/questions/7489048/calculating-mean-squared-displacement-msd-with-matlab)）

艺术。

# android - LocationManager getProviders(true) 不返回提供者

> ID：10070717
> 
> 赞同：2
> 
> 时间：2012-04-09T08:27:43.110
> 
> 标签：android, broadcastreceiver, locationmanager

好的，所以基本上我想开始监听来自 a 的单个更新`BroadcastReceiver`，并且由于某种原因，所有提供程序都被禁止访问。这是代码片段

```
LocationManager locationManager = (LocationManager)
                            context.getSystemService(Context.LOCATION_SERVICE);
Criteria criteria = new Criteria();
criteria.setPowerRequirement(Criteria.POWER_LOW);
String majorProvider = locationManager.getBestProvider(criteria, true);
Log.d("location test", "major provider " + majorProvider);
List<String> allProviders = locationManager.getAllProviders();
for(int i=0; i < allProviders.size();i++) {
    Log.d("location test", "provider " + i + ": " + allProviders.get(i));
}
Log.d("location test", "enabled...");
allProviders = locationManager.getProviders(true);
for(int i=0; i < allProviders.size();i++) {
    Log.d("location test", "enabled provider " + i + ": " + allProviders.get(i));
} 
```

和我的 logcat 结果

```
04-09 11:23:35.763: D/location test(32576): major provider null
04-09 11:23:35.763: D/location test(32576): provider 0: network
04-09 11:23:35.763: D/location test(32576): provider 1: passive
04-09 11:23:35.763: D/location test(32576): provider 2: gps
04-09 11:23:35.763: D/location test(32576): enabled... 
```

我猜问题是我从 a 调用所有这些`BroadcastReceiver`，但我尝试从其他地方传递它的上下文。是否无法从 访问 LocationManager `BroadcastReceiver`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T08:36:09.810

哇，我觉得自己像个白痴。好吧，伙计们，这只是一个许可问题。如果有人再次遇到此问题，则只需将使用权限添加到清单

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-12T09:14:50.953

好吧，除了清单中的权限声明外，您可能还需要手动向用户询问与位置相关的权限。授予权限后，调用`getProviders| getBestProvider`.

```
String[] perms = {Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.ACCESS_COARSE_LOCATION};    
ActivityCompat.requestPermissions(this, perms, REQ_LOCATION_PERMISSION); 
```

# java - 使用 EJB 注解的依赖注入

> ID：10070719
> 
> 赞同：1
> 
> 时间：2012-04-09T08:27:48.507
> 
> 标签：java, jakarta-ee, jboss, ejb

简单的网络服务

```
@WebService
@Stateless
public class HistoryFormatterWebService implements IHistoryFormatterWebService
{
   @EJB
   private IHistoryFormatter historyFormatter;

   public byte[] formatHistory(final byte[] data)
   {
      System.err.println("hello from service");

      return null;
   }
} 
```

IHistoryFormatter

```
@Local
public interface IHistoryFormatter
{  
// ..  
} 
```

IHistoryFormatter 是来自另一个项目（query-ear.ear）的 bean，但他也部署在 jBoss 上。
我的 WebService 正常部署在 jBoss 上。jBoss 写道

```
11:17:09,506 INFO  [JmxKernelAbstraction] installing MBean: jboss.j2ee:ear=wsformatter-ear-1.0-SNAPSHOT.ear,jar=wsformatter-ejb-1.0-SNAPSHOT.jar,name=HistoryFormatterWebService,service=EJB3 with dependencies:
11:17:09,568 INFO  [JmxKernelAbstraction]   jboss.j2ee:ear=query-ear.ear,jar=query-services.jar,name=HistoryFormatter,service=EJB3
11:17:09,568 INFO  [EJBContainer] STARTED EJB: com.wsformatter.HistoryFormatterWebService ejbName: HistoryFormatterWebService 
```

但是当我向它发送请求时（使用 SoapUI）我得到了异常

```
java.lang.RuntimeException: Non matching type for inject of field: private com.softcomputer.softlab.lquery.service.IHistoryFormatter com.softcomputer.wsformatter.HistoryFormatterWebService.historyFormatter for type: $Proxy250 of jndiName env/com.softcomputer.wsformatter.HistoryFormatterWebService/historyFormatter
intfs: , com.softcomputer.softlab.lquery.service.IHistoryFormatter, org.jboss.ejb3.JBossProxy
    at org.jboss.injection.JndiFieldInjector.inject(JndiFieldInjector.java:128)
    at org.jboss.injection.JndiFieldInjector.inject(JndiFieldInjector.java:106)
    at org.jboss.injection.JndiFieldInjector.inject(JndiFieldInjector.java:63)
    at org.jboss.ejb3.AbstractPool.create(AbstractPool.java:111)
    at org.jboss.ejb3.InfinitePool.get(InfinitePool.java:49)
    at org.jboss.ejb3.ThreadlocalPool.create(ThreadlocalPool.java:50)
    at org.jboss.ejb3.ThreadlocalPool.get(ThreadlocalPool.java:90)
    at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:54)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.security.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:77)
    at org.jboss.ejb3.security.Ejb3AuthenticationInterceptor.invoke(Ejb3AuthenticationInterceptor.java:110)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:46)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.asynchronous.AsynchronousInterceptor.invoke(AsynchronousInterceptor.java:106)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.wsf.container.jboss42.InvocationHandlerEJB3.invoke(InvocationHandlerEJB3.java:103)
    at org.jboss.ws.core.server.ServiceEndpointInvoker.invoke(ServiceEndpointInvoker.java:221)
    at org.jboss.wsf.stack.jbws.RequestHandlerImpl.processRequest(RequestHandlerImpl.java:466)
    at org.jboss.wsf.stack.jbws.RequestHandlerImpl.handleRequest(RequestHandlerImpl.java:284)
    at org.jboss.wsf.stack.jbws.RequestHandlerImpl.doPost(RequestHandlerImpl.java:201)
    at org.jboss.wsf.stack.jbws.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:134)
    at org.jboss.wsf.stack.jbws.EndpointServlet.service(EndpointServlet.java:84)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
    at java.lang.Thread.run(Thread.java:595)
Caused by: java.lang.IllegalArgumentException
    at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:63)
    at java.lang.reflect.Field.set(Field.java:656)
    at org.jboss.injection.JndiFieldInjector.inject(JndiFieldInjector.java:116)
    ... 41 more 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:21:47.510

只是一个疯狂的猜测：

```
java.lang.RuntimeException: Non matching type for inject of field: 
[...] com.softcomputer.softlab.lquery.service.IHistoryFormatter [...] for type: 
[...] of [...] com.softcomputer.softlab.lquery.service.IHistoryFormatter[...] 
```

这听起来，有*两个*类`IHistoryFormatter`加载器加载了两个类。即使这些类具有相同的名称，如果它们被不同的类加载器加载，它们也被认为是不同的。

因此，请检查您对接口类的封装——理想情况下，它们应该在 JBoss 中的一个地方可用。

# jquery - 如何将 ajaxStart/ajaxStop 绑定到表单？

> ID：10070723
> 
> 赞同：0
> 
> 时间：2012-04-09T08:28:12.173
> 
> 标签：jquery

如何将 ajaxStart/ajaxStop 绑定到表单？

上传文件时我需要一个加载块来显示

现在表格根本没有提交

```
var iframe = $('<iframe name="iframe_file_upload" src="'+src_file_upload+'" style="display:none"></iframe>');
var btn_send = $('<input type="button" />')
    .click(function(){
        $('#form_upload_file').bind('ajaxStart', function(){
            $(this).submit();
        });
        iframe.bind('ajaxStop', function(){
            $(this).load(function(){
                ... 
```

# 更新

```
var btn_send = $('<input type="button" />')
    .click(function(){
        $('#form_upload_file').ajaxForm(
            $('#form_upload_file').ajaxForm({
                success : function(response){
                    // the response is a string?! how can the response be retrieved as an JSON object?
                    alert(response);
                }
            }
        }).submit();
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:01:05.223

```
//initially hide your loading block
$('#loadingblock').hide();

//submit form using ajax-request
$('#yourform').submit(function(){
$.post('formhandle.php',$(this).serialize(),function(){alert('form submitted!')});
//prevent default submission
return false;
}

//now the loader part
$('#loadingblock').ajaxStart(function(){$(this).show();})
.ajaxStop(function(){$(this).hide();}); 
```

# c# - 将数据从用户控件发送到页面的最佳方式是什么？

> ID：10070724
> 
> 赞同：-1
> 
> 时间：2012-04-09T08:28:14.780
> 
> 标签：c#, asp.net, performance, user-controls

我有一个页面 (A) 和一个用户控件，我想发送这样的一组数据：

> 身份证名称
> 
> 1个.pdf
> 
> 2 bb.doc
> 
> 3 cc.xls

* * *

从用户控件到我的页面

做这样的事情最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:55:59.250

`User Control`使用要传递给它的数据的数据类型在您的属性上创建一个属性，并在创建控件时将其填充到您的页面中。

```
public String ControlProperty
{
    get
    {
        return Convert.ToString(ViewState["ControlValue"]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:38:03.797

有很多方法可以做到这一点。通常，将代码放入普通的 ASCX 控件中，然后将控件拖到页面上。将数据间接地放到页面上：

一些最常见的是使用 .NET gridview、datagrid 或 datalist。将数据集或数据表绑定到网格本身。这不涉及太多工作，您可以遵循许多示例，例如以下[http://www.c-sharpcorner.com/UploadFile/mahesh/DataBindingInDataGridMCB112022005002207AM/DataBindingInDataGridMCB1.aspx](http://www.c-sharpcorner.com/UploadFile/mahesh/DataBindingInDataGridMCB112022005002207AM/DataBindingInDataGridMCB1.aspx)

另一种涉及更多工作的方法是调用 Web 服务，该服务回发一个包含行列表的 json 对象，您将通过客户端脚本对其进行迭代，并创建一个 HTML 表。

更多的是一个问题，即您的方案是什么，以及哪种方式最适合您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T08:43:14.710

这很简单，将您的数据放入字典中，然后将字典保存到页面上下文中。

```
var myData = new Dictionary<int, String>();
myData[0]="aa.pdf";
context.Item["Data"] = myData;

//in your page.
var myData = (Dictionary<int, String>)(context.Item["Data"]); 
```

以上代码只是原型草稿，您可以在您的环境中尝试。

肖恩

# mysql - 我怎样才能用这 3 张桌子制作视图？

> ID：10070726
> 
> 赞同：-1
> 
> 时间：2012-04-09T08:28:22.413
> 
> 标签：mysql, database

我有三张桌子。设计就像

学生桌

```
create table student (studID int not null primary key AUTO_INCREMENT,
StudName varchar(20),
Parent varchar(20),
PhoneNo int not null
) 
```

课桌设计

```
create table Course (CID int not null primary key AUTO_INCREMENT,
CName varchar(20)) 
```

stud课程表设计

```
create table studCourse(studID int not null
,CID int not null
) 
```

我如何制作一个显示学生姓名和他正在学习的课程的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:38:54.573

```
 CREATE VIEW vwStudent  AS
       SELECT
      s.StudName,
      c.CName
    FROM student s
      INNER JOIN studCourse sc
        ON s.studID = sc.studID
      INNER JOIN Course c
        ON c.CID = sc.CID 
```

或者

```
 CREATE VIEW vwStudent  AS

    SELECT
          s.StudName,
          c.CName
        FROM student s
          JOIN studCourse sc
            ON s.studID = sc.studID
          JOIN Course c
            ON c.CID = sc.CID 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:39:26.040

您可以使用 JOIN 从查询中创建视图，这样应该可以工作：

```
CREATE VIEW v AS (
SELECT s.StudName AS student,c.CName AS course  
FROM student s
JOIN studCourse d USING(studID)
JOIN Course c ON (d.CID = c.CID)
) 
```

# c# - 如何使用 C# 在 WP7 中使用 Toast 通知作为提醒？

> ID：10070734
> 
> 赞同：1
> 
> 时间：2012-04-09T08:28:55.200
> 
> 标签：c#, windows-phone-7

我的代码中有一个提醒控件，我想将其转换为 toast 通知。有人可以告诉我如何得到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:09:57.927

The native Toast messages are only available to you when you use push notifications, or with background services!

But you can use the [Coding4Fun Toolkit](http://coding4fun.codeplex.com/) that has a really cool implementation of the Toast notification!

# mysql - MySQL中的日期转换

> ID：10070735
> 
> 赞同：-2
> 
> 时间：2012-04-09T08:28:55.870
> 
> 标签：mysql

我有一个像这样的字符串“Fri Apr 06 02:28:41 2012”，如何使用 MySQL 将其转换为 YYYY-mm-dd 格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:35:03.923

```
SELECT STR_TO_DATE('Fri Apr 06, 02:28:41 2012','%W %M %d, %H:%i:%s %Y'); 
```

# javascript - 使用 underscore.js 从两个数组中查找 A - B

> ID：10070739
> 
> 赞同：3
> 
> 时间：2012-04-09T08:29:28.553
> 
> 标签：javascript, underscore.js

我必须从 javascript 中的数组中过滤掉某些元素，并考虑为此目的使用 underscore.js。由于我是新手，请提供一些帮助。请参考下面的代码，我必须找到 A \ B 并将结果分配给 C 。underscore.js 是否有任何方便的方法来做到这一点？

```
function testUnderScore(){
    alert("underscore test");
    var a = [84, 99, 91, 65, 87, 55, 72, 68, 95, 42];
    var b = [ 87, 55, 72,42 ,13];
    var c = [];

    alert(c);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-09T08:33:53.267

通过使用`difference`方法：

```
var c = _.difference(a, b); 
```

[http://documentcloud.github.com/underscore/#difference](http://documentcloud.github.com/underscore/#difference)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T08:32:34.997

> 我必须找到 A- B 并将结果分配给 C 。underscore.js 是否有任何方便的方法来做到这一点？

是的，您可以使用`difference` [^([查看文档])](http://documentcloud.github.com/underscore/#difference)方法：

```
var c = _.difference(a, b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:32:56.147

怎么样：

```
var a = [1, 2, 5, 6], b = [6], c;

c = a.filter(
    function (aItem) {
        return !(~b.indexOf(aItem));
    }
);

console.log(c); 
```

​ ​</p>

# javascript - 在 Firefox/Chrome 页面中打开 IE 浏览器

> ID：10070744
> 
> 赞同：5
> 
> 时间：2012-04-09T08:30:59.823
> 
> 标签：javascript, html, google-chrome, firefox

我们的 Web 应用程序基于 IE9，这意味着只有 IE9 才能打开我们网站中的页面。当用户的浏览器不是 IE9 时，我们将阻止用户浏览我们的网站。但是有时我们不得不发送一个链接到用户的邮箱来完成一些操作，他们会直接用他们的默认浏览器打开链接，问题就在这里，如果默认浏览器不是 IE9 那么他们无法打开链接，他们必须将链接复制到 IE9。我们的用户不想手动执行此操作，他们希望直接在 IE9 中打开链接，无论默认浏览器是什么。

我尝试过使用 ActiveXObject，但它只适用于 IE。我想要一个可以在 Firefox/Chrome 页面中打开 IE 浏览器的脚本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T08:40:24.237

听起来您想在电子邮件中包含一个链接，该链接可以激活用户计算机上的*特定*程序，而不是他们确定应该使用的程序（例如，他们的默认浏览器）。我不相信你能做到这一点。

您可以在 Chrome 和 Safari（我也怀疑 Firefox）中安装“协议处理程序”，这样您就可以发送类似`ie://example.com/path/to/app`. 您的协议处理程序将启动 IE 并将您带到相关站点。（Apple 使用 iTunes 来做到这一点。）但是您的用户必须安装处理程序（当然，您必须编写它）。

一个更简单的答案可能是让用户安装 Chrome、Firefox 等存在的任何普遍存在的“在 IE 中打开”附加组件/扩展。他们点击链接，然后从某种菜单中选择“在 IE 中打开” . （如果他们使用网络邮件，他们甚至可以右键单击链接并选择该行项目，具体取决于扩展名。）

* * *

旁注：显然，除非不可能，否则我建议让您的应用程序与 Chrome 和 Firefox 兼容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T08:40:17.523

不，你做不到。。

但有一些选择：

1.  安装您的用户 IE 标签：
    FireFox - [http://lifehacker.com/135297/internet-explorer-in-a-firefox-tab?tag=softwarewebpublishing](http://lifehacker.com/135297/internet-explorer-in-a-firefox-tab?tag=softwarewebpublishing)，
    Chrome - [https://chrome.google.com/webstore/detail/ hehijbfgiekmjfkfjpbkbammjbdenadd](https://chrome.google.com/webstore/detail/hehijbfgiekmjfkfjpbkbammjbdenadd)

2.  使用将在资源管理器中启动您的链接的批处理文件。

3.  使用这个 Firefox 插件可以在 Firefox 中使用（宿主）ActiveX 控件 - [http://code.google.com/p/ff-activex-host/](http://code.google.com/p/ff-activex-host/)

4.  **尝试使用Netscape 插件应用程序编程接口 (NPAPI)**代替 ActiveX - 一种由许多 Web 浏览器使用的跨平台插件架构。

5.  与批处理文件类似，您可以使用 IE 的“.website”文件扩展名创建指向所需页面的链接文件，[在 Windows 中默认配置为使用 ie 打开](https://fileinfo.com/extension/website)。将其放在您的网络服务器公共文件夹中，然后在您的网站中添加指向该文件的链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T21:13:38.567

您无需编写代码即可在 Windows 中创建自定义协议处理程序。有关如何在注册表中定义一个，请参阅[此页面。](http://msdn.microsoft.com/en-us/library/aa767914%28VS.85%29.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-01T18:21:29.293

您可以将用户代理切换器用于 chrome 或 firefox For Chrome： [https ://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg](https://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg)

对于火狐： [https ://addons.mozilla.org/en-US/firefox/addon/uaswitcher/](https://addons.mozilla.org/en-US/firefox/addon/uaswitcher/)

# xml - 使用 xpath 设置节点的文本值

> ID：10070746
> 
> 赞同：4
> 
> 时间：2012-04-09T08:31:04.330
> 
> 标签：xml, bash, xpath

示例 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<bookstore>
<book>
  <title lang="eng">Harry Potter</title>
  <price>29.99</price>
</book>
<book>
  <title lang="eng">Learning XML</title>
  <price>39.95</price>
</book>
</bookstore> 
```

我在我的 shell 上使用 xpath 来尝试更改 xml 节点的文本值。我想把哈利波特改成荆棘游戏。

```
xpath test.xml "//bookstore/book/title/text()" 2>/dev/null 
```

将在我的终端上回显哈利波特。现在是否可以使用 xpath 将节点的值从 Harry Potter 更改为 Game of Thornes？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T10:14:14.953

XPath 本身不能用于修改 XML 文档。但是[xmlstarlet](http://xmlstar.sourceforge.net/docs.php)命令行实用程序可以做到这一点。例子：

```
xml ed -u "//book[1]/title" -v "Game of Thrones" bookstore.xml 
```

输出：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<bookstore>
  <book>
    <title lang="eng">Game of Thrones</title>
    <price>29.99</price>
  </book>
  <book>
    <title lang="eng">Learning XML</title>
    <price>39.95</price>
  </book>
</bookstore> 
```

注意：没有`[1]`在表达式中，结果将是：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<bookstore>
  <book>
    <title lang="eng">Game of Thrones</title>
    <price>29.99</price>
  </book>
  <book>
    <title lang="eng">Game of Thrones</title>
    <price>39.95</price>
  </book>
</bookstore> 
```

上面的命令将结果输出到标准输出。有一个选项（`-L`或`--inplace`）可以修改文档：

```
xml ed -L -u "//book[1]/title" -v "Game of Thrones" bookstore.xml 
```

xmlstarlet 1.3.1的文档中没有提到这个选项，但是执行的时候会显示

```
xml ed --help 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:04:32.860

据我所知，XPath 本身不能用于此，因为它只是一种查询语言，所以不能用于创建或修改 XML 文件。为此，您将需要一些其他工具。如果您喜欢命令行工具，也许可以检查`xsltproc`，它是`libxslt`. 我不是[XSLT](http://www.w3schools.com/xsl/default.asp)专家，但快速浏览链接页面让我感觉您可以使用`<if>`和实现所需的结果`<value-of>`。或者您可以[使用正则表达式解析 XML](https://stackoverflow.com/a/1732454/1258041)，但请不要，我听说这是一个滑坡。

# location - 求UNIX V6部分代码说明

> ID：10070747
> 
> 赞同：1
> 
> 时间：2012-04-09T08:31:12.657
> 
> 标签：location, pdp-11

目前我正在阅读这本书：Lions_Commentary_on_UNIX_6th_Edition，我一起试图理解 unix v6 的源代码，我发现一些代码很有趣：例如

```
. = 40^.
...
. = 60^. 
```

这是一些我不太擅长的 PDP-11 组件，所以谁能向我解释这些代码在这里尝试做什么？此外，在 PDP-11 中，还有另一个符号：“..”，任何人都可以解释这个符号的作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-02T02:38:37.677

运算符返回第`^`一个操作数的值和第二个操作数的类型。

因此`.=40^.`，将位置计数器设置为当前段中的位置 40，我预计这将是数据或 bss。普通人`.=40`会尝试将位置计数器设置为绝对位置 40，这将是一个错误，因为`as`没有发出绝对代码。

该`..`符号是重定位计数器，大约是加载程序的内存位置。对于没有重定位硬件的早期 PDP-11 上的程序来说，这是一个拼凑。我记得，任何人对它所做的唯一一件事就是`..=something`在程序的开头进行设置，这些程序旨在加载到核心的特定位置。

您可以在[此处](http://www.tom-yam.or.jp/2238/ref/as.pdf)以 PDF 格式阅读Dennis Ritchie 撰写的*UNIX 汇编程序参考手册。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:55:50.910

`.`是位置计数器，因此汇编语言语句正在通过表达式调整位置计数器的位置，`40^.`目的`60^.`是移动汇编程序位置计数器。

如果声明阅读

```
. = 40 + . 
```

这意味着将位置计数器更改为 40（八进制）+ 位置计数器的当前值。让我感到困惑的`^`是，根据 MA​​CRO11 手册，我拥有的一元运算符在这种用法中没有意义。

# database - 适用于 Android 的 HTML5 数据库站点，哪种方式最好？

> ID：10070756
> 
> 赞同：0
> 
> 时间：2012-04-09T08:32:54.433
> 
> 标签：database, html, mobile

我正在开发一个应该离线工作并且应该跨移动平台工作的网站，我想知道如何实现本地数据库和同步。

该站点将使用 HTML5，因此：

1）我可以使用Web数据库，但我明白它不再支持了？

2）我可以使用PhoneGap数据库，它似乎是跨平台的？

有没有其他方法可以做到这一点？

你能告诉我如何做到这一点的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:51:44.457

**[离线是什么意思](http://www.html5rocks.com/en/tutorials/offline/whats-offline/)**

为多个操作系统和各种移动设备编写应用程序可能具有挑战性。对复杂的移动应用程序的高需求需要大量的硬件。一种解决方案是提供 Web 应用程序，因为它们可以在移动设备上跨平台运行。您不需要使用专有技术（例如 iPhone 上带有 Cocoa 的 Objective-C）；您可以使用常见的 Web 技术。本质上，只需要一个版本的应用程序。主要的硬件电源由服务器提供。在本文中，通过一个利用 HTML5 标准的简单示例，探索在移动应用程序领域中 Web 开发的使用。

**[这是示例](http://www.ibm.com/developerworks/web/library/wa-offlineweb/)**

# android - 如何从android中的edittext中获取选定的文本？

> ID：10070762
> 
> 赞同：19
> 
> 时间：2012-04-09T08:33:51.427
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我有一个编辑文本，其中选择了一些文本。我只想在单击按钮时从 edittext 中获取选定的文本。

请建议我可用的链接或示例代码。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-09T08:37:12.910

```
EditText et=(EditText)findViewById(R.id.edit);

int startSelection=et.getSelectionStart();
int endSelection=et.getSelectionEnd();

String selectedText = et.getText().toString().substring(startSelection, endSelection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:43:15.387

```
getSelectionStart()
getSelectionEnd() 
```

看到这个[链接](http://developer.android.com/reference/android/widget/TextView.html#getSelectionEnd%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-15T05:13:08.707

**科特林**

```
val startSelection: Int = editText.selectionStart
val endSelection: Int = editText.selectionEnd

val selectedText: String = editText.text.substring(startSelection, endSelection) 
```

# c# - 迟到查询语法

> ID：10070764
> 
> 赞同：0
> 
> 时间：2012-04-09T08:33:58.003
> 
> 标签：c#, sql-server

我正在尝试了解员工迟到的频率

到目前为止我用过这个

```
SELECT  EMPID 
       ,EMPNAME
      ,COUNT(TimeIn) AS LATECOUNT  FROM        
 (SELECT  EMPLOYEEID AS EMPID, EmployeeName AS EMPNAME, AbsenceDate AS ABSDAT, MIN(TimeIn) AS TimeIn
   FROM  dbo.viewAttendance
         GROUP BY AbsenceDate, EMPLOYEEID, EmployeeName
         HAVING      (MIN(TimeIn) > '08:00:00')
  ) AS a 
```

使用该代码，我只能检索只有至少一名迟到的员工的行（仅返回 30 行）。我真正想要的是 300 行（所有员工）的完整回报，显示他们的迟到数量。我的头脑不够清晰，无法找到正确的语法。我知道问题出在 HAVING (MIN(timeIn) > '08:00:00' 有人可以帮助我吗？提前谢谢... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:02:07.153

```
SELECT
  E.EMPNAME
  ISNULL(SUM(CASE WHEN A.TIMEIN > '08:00:00' THEN 1 ELSE 0 END), 0) AS LATE_ATTENDANCE
FROM
 dbo.MASTEREMPLOYEE E
 LEFT JOIN dbo.viewATTENDANCE A ON A.EMPLOYEEID = E.EMPLOYEEID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:48:21.340

你为什么不使用这样的东西：

```
select e.empname, (select count(1) from dbo.viewAttendance a where a.EmployeeId = e.employeeId and a.timein > '08:00:00') as latecount
from employees e 
```

# xml - 属性或子节点的 XML 模式

> ID：10070765
> 
> 赞同：1
> 
> 时间：2012-04-09T08:34:04.830
> 
> 标签：xml, validation, xsd, xml-validation

这是我的问题。在一个节点中，我希望有一个属性或一个子节点（来自一个组）。例如：

```
<set_variable name="bob" value="3/> 
```

或者

```
<set_variable name="bob">
    <.../>
</set_variable> 
```

我发现这样做的唯一方法是：

```
<xs:element name="set_variable" type="setVariableType"/>

<xs:complexType name="setVariableType">
    <xs:sequence minOccurs="0" maxOccurs="1">
        <xs:group ref="arithmeticGroup"/>
    </xs:sequence>
    <xs:attribute name="name" type="xs:string" use="required"/>
    <xs:attribute name="value" type="xs:integer" use="optional"/>
</xs:complexType>

<xs:group name="arithmeticGroup">
    ....
</xs:group> 
```

该解决方案的问题在于它允许两种禁止的方式：

```
<set_variable name="bob"/> <!-- Should at least have an attribute or a subnode --> 
```

和

```
<set_variable name="bob" value="18"> <!-- Should not have both attribute and a subnode -->
    <.../>
</set_variable> 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:16:14.307

不幸的是，这在 XSD 1.0 中是不可能的。您要么必须在 XSD 1.0 之上使用 Schematron 断言，要么依赖 XSD 1.1[断言](http://www.w3.org/TR/xmlschema11-1/#cAssertions)或[类型替代方案](http://www.w3.org/TR/xmlschema11-1/#cTypeAlternative) （刚刚在 4 月 5 日伪造为 W3C rec）和兼容的处理器（没有免费的，可用的很少）。

# jmx - 行为 MBeanServerForwarder

> ID：10070769
> 
> 赞同：0
> 
> 时间：2012-04-09T08:34:36.203
> 
> 标签：jmx, mbeans

我在[这里](https://stackoverflow.com/questions/10029678/insert-mbean-interceptor)问了一个问题，但没有得到答案。然而，我继续搜索，发现了一些可以满足我需求的东西：“ **MBeanServerForwarder** ”。我阅读了官方的 JavaDoc，但对我来说仍然不清楚。

那么，MBeanServerForwarder 是否作为 MBeanServer 的代理工作？即：我可以用它来拦截MBeans注册表，修改ObjectName并转发给MBeanServer吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:29:46.430

是的，但这不是真的必要。您只需要实现**MBeanServer**接口并覆盖**registerMBean**方法（也许还有**unregisterMBean**方法）。

使用真正的 MBeanServer 作为委托，您的实现可能如下所示：

```
 public class AltObjectNameMBeanServer implements MBeanServer {
        protected final MBeanServer innerServer;
        protected final ObjectName filter;

        public AltObjectNameMBeanServer(MBeanServer innerServer, ObjectName filter) {
            this.innerServer = innerServer;
            this.filter = filter;
        }

        public ObjectInstance registerMBean(Object object, ObjectName name) throws InstanceAlreadyExistsException,
                MBeanRegistrationException, NotCompliantMBeanException {
            if(filter.apply(name)) {
                name = reformat(name);          
            }
            return innerServer.registerMBean(object, name);
        }

        public static ObjectName reformat(ObjectName on) 
            try {
                int id = on.toString().hashCode();
                return new ObjectName(new StringBuilder(on.toString()).append(",serial=").append(id).toString());

            } catch (Exception e) {
                throw new RuntimeException("Failed to reformat [" + on + "]", e);
            }
        }

     // ======== Put direct delegates for all other methods =======

} 
```

示例用法：

```
 MBeanServer server = ManagementFactory.getPlatformMBeanServer();
        AltObjectNameMBeanServer rr = new AltObjectNameMBeanServer(server, new ObjectName("*:*"));          
        Class clazz = Class.forName("sun.management.HotspotInternal");
        HotspotInternalMBean obj = (HotspotInternal)clazz.newInstance();
        ObjectInstance oi = rr.registerMBean(new StandardMBean(obj, HotspotInternalMBean.class), new javax.management.ObjectName("sun.management:type=HotspotInternal"));
        System.out.println("ObjectName:" + oi.getObjectName()); 
```

输出是：

> ObjectName:sun.management:type=HotspotInternal,serial=-441253090

稍加思考，您就可以设置新的 MBeanServer impl。在**java.lang.management.ManagementFactory的****platformMBeanServer**字段中，您将永久覆盖 JVM 代理的 MBean 注册。

 ****========== 更新 =============**

此代码片段演示了如何破解平台 MBeanServer 以提供备用（或包装的）MBeanServer（使用上面的 AltObjectNameMBeanServer的**rr实例：**

```
Field serverField = ManagementFactory.class.getDeclaredField("platformMBeanServer");
serverField.setAccessible(true);
serverField.set(null, rr);
System.out.println("Equal:" + (rr==ManagementFactory.getPlatformMBeanServer())); 
```

**========== 更新 =============**

这是我认为您正在寻找的一个简单示例。请参阅[此要点](https://gist.github.com/2366862)。

如果您使用以下选项运行示例：

```
-Djavax.management.builder.initial=org.helios.jmx.HeliosMBeanServerBuilder
-Dhelios.jmx.renamer.filter=java.util.logging:* 
```

它将覆盖系统的默认 MBeanServerBuilder 并拦截所有 ObjectNames 与**java.util.logging:***匹配的 MBean 注册。

当**main**运行时，它将打印所有平台 MBeanServer MBean ObjectNames，输出将如下所示：

```
MBeanServer Interceptor Test
java.lang:type=MemoryPool,name=PS Eden Space
java.lang:type=Memory
java.lang:type=MemoryPool,name=PS Survivor Space
java.lang:type=GarbageCollector,name=PS MarkSweep
java.lang:type=MemoryPool,name=Code Cache
java.lang:type=Runtime
java.lang:type=ClassLoading
java.lang:type=Threading
java.lang:type=Compilation
com.sun.management:type=HotSpotDiagnostic
java.lang:type=MemoryPool,name=PS Perm Gen
java.util.logging:type=Logging,serial=-132046985
java.lang:type=OperatingSystem
java.lang:type=GarbageCollector,name=PS Scavenge
java.lang:type=MemoryPool,name=PS Old Gen
java.lang:type=MemoryManager,name=CodeCacheManager
JMImplementation:type=MBeanServerDelegate 
```

注意**java.util.logging的重命名：type=Logging,serial=-132046985**

或者，您可以创建自己的 HeliosMBeanServer 构建器实例，定义域名、过滤器和重命名策略，并创建自己的 MBeanServer 而不是使用平台 MBeanServer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:42:22.000

感谢尼古拉斯。

# MBeans注册拦截

我使用代理来拦截所有对带有调用处理程序和调用上下文的 BeanServer 的调用。在调用该方法之前，我使用了几个拦截器来编辑参数（例如 registerMBean 参数）并且它可以工作。

# 将 MBeanServer 设置为 platformMBeanServer

1.  尼古拉斯的方法（见他的帖子）
2.  使用定制的 MBeanServerBuilder

为此，我们必须设置一个系统属性：

```
-Djavax.management.builder.initial=my.own.MBeanServerBuilder 
```

您可能会收到 NotFoundClassException。为了解决这个问题，请确保 Thread.CurrentThread() 的类加载器与创建 MBeanServer 的类相同。

您自己的 MBeanServerBuilder 必须扩展 MBeanServerBuilder 类。根据您的需要，覆盖方法以添加信息。对于我的用例，我必须返回 MBeanServer 的代理，所以我创建一个新的 MBeanServer，创建代理并返回它。

```
public MBeanServer newMBeanServer(String              defaultDomain,
                                  MBeanServer         outer,
                                  MBeanServerDelegate delegate) {

    MBeanServer origin = super.newMBeanServer(defaultDomain, outer, delegate);
    return (MBeanServer) Proxy.newProxyInstance(origin.getClass().getClassLoader(), new Class<?>[]{MBeanServer.class}, handler);

} 
```**

# matlab - Cannot understand this MATLAB syntax?

> ID：10070772
> 
> 赞同：3
> 
> 时间：2012-04-09T08:35:06.943
> 
> 标签：matlab

```
for i=0:255
m(i+1)=sum((0:i)'.*p(1:i+1)); end 
```

What is happening can anyone explain. p is an array of size 256 elements same as m.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T08:41:08.980

```
p = (0:255)';
m = zeros(1,256);
for i=0:255
    m(i+1)=sum((0:i)'.*p(1:i+1)); 

end 
```

`m[i+1]` contains the scalar product of `[0,1,2,..,i]` with `(p[1],...,p[i+1])`

You can write it as :

```
p = (0:255);
m = zeros(1,256);
for i=0:255
    m(i+1)=sum((0:i).*p(1:i+1)); 

end 
```

Or:

```
p = (0:255);
m = zeros(1,256);
for i=0:255
    m(i+1)=(0:i)*p(1:i+1)'; 

end 
```

In case you don't recall, that is the definition of [scalar product](http://en.wikipedia.org/wiki/Dot_product#Definition)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:03:03.510

Whatever the `p` is, you can calculate `m` by:

```
dm = (0 : length(p) - 1)' .* p(:); % process as column vector
m = cumsum(dm); 
```

Hint: write the formula for m[n], then for m[n+1], then subtract to get the formula:

```
m[n+1] - m[n] = (n - 1) * p[n] 
```

and this is `dm`.

# android - Android RSS 图片问题

> ID：10070773
> 
> 赞同：0
> 
> 时间：2012-04-09T08:35:06.840
> 
> 标签：android

我在第 92 行遇到了从 url 获取图像的问题。请解决它。

```
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class EfficientAdapter extends BaseAdapter {
    private Activity activity;
    private ArrayList<Post> data;
    private ImageView iv;
    private static LayoutInflater inflater = null;
    // public ImageLoader imageLoader;
    ViewHolder holder;

    EfficientAdapter(Activity a, ArrayList<Post> d) {

        activity = a;
        data = d;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        // imageLoader = new ImageLoader(activity.getApplicationContext());

    }

    @Override
    public int getCount() {
        return data.toArray().length;

    }

    @Override
    public Object getItem(int position) {

        return position;
    }

    @Override
    public long getItemId(int position) {

        return position;
    }

    public static class ViewHolder {
        public TextView label;
        public TextView addr;
        public ImageView image;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi = convertView;

        if (convertView == null) {
            vi = inflater.inflate(R.layout.row, null);
            holder = new ViewHolder();
            holder.label = (TextView) vi.findViewById(R.id.title);
            holder.addr = (TextView) vi.findViewById(R.id.details);
            holder.image = (ImageView) vi.findViewById(R.id.thumb);
            vi.setTag(holder);
        } else
            holder = (ViewHolder) vi.getTag();

        holder.label.setText(data.get(position).getTitle());
        holder.addr.setText(data.get(position).getPubDate());

        // imageLoader.DisplayImage((data.get(position).getThumbnail()),
        // activity,
        // holder.image, 72, 72);
        URL url = null;
        try {
            url = new URL((data.get(position).getThumbnail()));
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

//我在这里遇到错误。你可以在 log cat 中看到错误。

```
InputStream content = null;
            try {
                content = (InputStream) url.getContent();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Drawable d = Drawable.createFromStream(content, "src");
            Bitmap mIcon1 = null;
            try {
                mIcon1 = BitmapFactory.decodeStream(url.openConnection()
                        .getInputStream());
            } catch (IOException e) {
                e.printStackTrace();
            }
            holder.image.setImageBitmap(Bitmap.createScaledBitmap(mIcon1, 72, 72,
                    false));
                    return vi;
        }

    } 
```

这是我的示例，我已将它的 zip 文件放在 Drop box 上。链接：[https](https://dl-web.dropbox.com) ://dl-web.dropbox.com 。请帮我。我在第 92 行的 EfficientAdapter.java 中有问题，我在空指针异常中出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:39:18.493

使用此功能从 URL 获取图像..

```
Drawable img = ImageOperations(ctx, url);
holder.image.setImageDrawable(img);

public Object fetch(String address) throws MalformedURLException, IOException {

    URL url = new URL(address);
    Object content = url.getContent();
    return content;
}  

private Drawable ImageOperations(Context ctx, String url) {

    try {
        InputStream is = (InputStream) this.fetch(url);
        Drawable d = Drawable.createFromStream(is, "src");
        return d;
    } catch (MalformedURLException e) {
        return null;
    } catch (IOException e) {
        return null;
    }
} 
```

# wpf - 用于专业业务应用程序 UI 的 WPF 或 ASP.NET MVC？

> ID：10070774
> 
> 赞同：1
> 
> 时间：2012-04-09T08:35:18.617
> 
> 标签：wpf, asp.net-mvc, architecture

我知道以前有人问过这个问题，但是已经过去了将近 2 年，业务需求有所不同。

我们正处于开发中型应用程序的初期，并且正在划分前端使用哪种技术，**WPF 或 ASP.Net MVC 3**？我们不是一家 IT 公司，而是一家拥有 IT 部门的商业公司，可以外包编程任务，而业务核心仍留在公司内部。我确实花了很多时间在互联网上搜索答案，并且我确实部分成功了，但是由于问题如此重要，我想我也在这里问。当然，在有人回答这个问题之前，我需要指定应用程序的要求和环境：

**基础设施：** 我们有一个纯Windows 环境。每个用户都将安装 Windows XP SP3（当前）或未来版本的 Windows（如果我们从 XP 跳到 Windows 8 还有待观察，但让我们假设用户接下来将使用 Windows 7）。我们的目标是面向服务的架构，这意味着我们只想在客户端机器上运行/显示真正需要的东西。这一点尤其重要，因为数据库远离客户（美国/欧洲）。我们计划使用 WCF 在用户系统（浏览器或 WPF）、应用程序和数据库服务器之间进行跨机器通信。

我们预计主要用户组将在 30 多个左右，但由于我们是一家成长中的公司，因此扩展到 100 个用户应该没有问题。用户分布在全球三个主要位置，而我们也希望选择支持较小的位置。所有这些位置都连接到同一个 Intranet。

**用户界面体验** 新系统应该取代现有的桌面应用程序（Winform）系统。屏幕数量可能在 100 多个左右，带有许多标签、组合框、图表。我喜欢称它为专家系统 b/c 我们希望用户每天花费数小时使用它，用户希望与它进行快速交互（多次点击、多个对话框弹出和关闭等）和应用程序将包含很多业务逻辑（主要是数学上的）。需要与 Excel 进行一些有限的交互。在此阶段，仅将 .xlsx 文件中的格式化数据导入应用程序以便处理数据。我们预计这会经常发生。从 Excel 或其他应用程序复制和粘贴到我们的新应用程序是一项要求（没有图片，只有文本）。我们将使用供应商控制库来获得更丰富的 UI 体验。用户习惯于使用桌面应用程序进行日常工作（当前系统/Excel 等）。平板电脑或智能手机支持不是必需的。

**部署** 如果我们要使用 WPF 应用程序，我们可能会在 CITRIX 中部署它或使用 Click-Once。

以下是两个对立派系的论点：

**Pro Web**：部署更容易。所有要求都可以直接在 Web 应用程序中完成，如果没有，我们使用 ActiveX 或为缺少的部分制作单独的桌面应用程序。此外，IT 世界将停止使用纯桌面应用程序，一切都将转向 HTML 5 (Windows 8)。

**Pro WPF：** Web 应用程序使用许多不同的技术，这使得开发和维护变得更加困难和昂贵（HTML、ASP.NET、CSS、JavaScript、JQuery、AJAX）。Web应用程序存在重大缺陷，主要是

1.  考虑到各种浏览器和版本。
2.  屏幕分辨率
3.  图形没有硬件支持（业务图、200+点的点图）
4.  限制对本地硬件的访问（导入文件、创建文件、打印）
5.  键盘快捷键

第 1 点也令人担忧，因为浏览器更加失控，因为使用了公司中的其他 Web 应用程序（不是专家系统），而且我们担心与新应用程序的利益冲突（例如，我们必须使用 ALL 的浏览器版本）应用程序运行/渲染良好）。

我知道这没有黑白分明，但我会对以下内容感兴趣：

**谁有类似的情况，他们是如何解决的？**[（在http://karlshifflett.wordpress.com/2007/12/20/reasons-for-choosing-wpf-over-aspnet-for-very-large-project/](http://karlshifflett.wordpress.com/2007/12/20/reasons-for-choosing-wpf-over-aspnet-for-very-large-project/) 上有一篇不错的文章，但问题是文章已有 5 年历史 :(

**Web 解决方案要贵多少？** 对于开发，假设程序员在两者方面都同样熟练（我们可以外包）。为了维护，假设我们将在内部支持这一点，因为我们对 ASP.NET 和 WPF 的知识有限。我们知道使用 C# 的 WinForm/WCF。我们必须训练/学习这两种技术。

**Web 应用程序进行 Excel 交互、打印等操作有多容易？** 我读了很多关于“ActiveX 地狱”的文章，我想知道我们今天的立场是什么？

**部署** 我在过去非常成功地使用了 Click-Once，尽管一些团队成员提到 Click-once 可能是一个问题。有什么经验吗？

**未来？** 该系统应该持续5年以上。我们目前不能针对 HTML5（WinXP 仅支持 IE 8）。Windows 8 在这方面有何立场？

**其他想法？** 我错过了什么重要的事情？

**谢谢！** 我知道这个条目很长而且不是一个简单的问题。因此，我认为您阅读并更加感谢您的建设性反馈。谢谢！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:06:23.460

我不会在 WPF 中构建业务应用程序，**特别是**如果您的目标是让它持续 5 年以上。Silverlight 现在处于[日落阶段](http://www.lhotka.net/weblog/SilverlightIsLdquodeadrdquo.aspx)- Win8 应用程序现在正在押注 JavaScript 和 HTML5，尽管您正确地注意到 HTML5 支持并非在所有浏览器和平台上都通用（请参阅[http://caniuse.com/](http://caniuse.com/)）

让我尝试解决您上面的一些问题，希望能说服您构建一个 Web 应用程序：

1.  考虑到各种浏览器和版本。是的，你必须这样做。但是，对于企业应用程序，如果您使用行业标准的 Web 技术并且不使用未得到普遍支持的深奥的 HTML5 内容，则*大多数情况下您可以找到可接受的解决方案。*这不会是一个灌篮，但它是非常可行的。
2.  屏幕分辨率。您可以通过使用通常称为[响应式网页设计](http://en.wikipedia.org/wiki/Responsive_web_design)的方式来解决这个问题。再一次，有广泛的社区和行业支持 CSS 框架，让您实现响应能力。[YUI](http://www.yuiblog.com/blog/2013/01/16/yui-3-9-0pr1-charts-jsonp-and-responsive-grids/)和[Bootstrap](http://twitter.github.io/bootstrap/)是两个例子。
3.  图形没有硬件支持（业务图、200+点的点图）。好吧，这就是 HTML5 硬件加速可以帮助你的地方，但我想说像[HighCharts](http://www.highcharts.com/)这样的库可以轻松处理 200+ 点图 - 看这个[例子](http://www.highcharts.com/studies/performance.php)
4.  限制对本地硬件的访问（导入文件、创建文件、打印）。有道理。我认为使用[Socket.io](http://socket.io/#how-to-use)、[Filepicker.io](https://www.filepicker.io/)和[Zip.js](http://gildas-lormeau.github.io/zip.js/)等文件处理文件要容易得多，但“企业”要求可能会阻碍。至于打印，您可以创建页面的“可打印”版本或在服务器端生成 PDF 和 Excel 导出。不理想，但非常可行。
5.  键盘快捷键。您使用过 Gmail 应用程序吗？它充满了快捷方式和基于键盘的交互。这适用于任何应用程序 - 如果您需要键盘交互，无论您选择 WPF 还是 Web，都必须构建它们

# c# - 实体框架4.1中的存储过程动态sql

> ID：10070775
> 
> 赞同：0
> 
> 时间：2012-04-09T08:35:32.877
> 
> 标签：c#, entity-framework-4.1

根据参数执行不同的结果集时出现问题。我有一个 sp，它根据参数执行两个查询，两个查询都执行一次，例如：

```
CREATE PROCEDURE [dbo].[ShowMessages]        
    @context  int,
AS
      BEGIN
      --CALENDAR ADMIN QUEUE
      if @context = 1 
            BEGIN
             Select CustomerName, CustomerAddress from Customer
            END
      ELSE if @queueContext = 2  OR @queueContext = 6
            BEGIN
             Select EmployeeName, EmployeeAddress from Employee
            END
END 
```

=== 我用我的复杂类型映射它：EF 生成具有两个字段的复杂类型`CustomerName`, `CustomerAddress`. EF 抛出`IDataReader`. 但即使我通过第一次查询调用，这个错误也很少发生。

我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:56:30.340

从您的 SP 返回的表中的列名将根据“上下文”而有所不同，因此 EF 只能将它们映射到其中一种上下文中的实体属性。从同一个存储过程返回不同的列名是不好的做法，因此您需要做的是使它们在所有上下文/场景中保持一致。

您可以使用 AS 关键字来执行此操作，如下所示：

```
SELECT CustomerName AS Name, CustomerAddress AS Address FROM Customer 
```

和

```
SELECT EmployeeName AS Name, EmployeeAddress AS Address FROM Employee 
```

# php - 为什么这个 PHP PDO 片段不起作用？

> ID：10070776
> 
> 赞同：3
> 
> 时间：2012-04-09T08:35:43.610
> 
> 标签：php, pdo

为什么这个 PHP PDO 片段不起作用？

```
$DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);  
$STH->bindParam(':fftb', $fftb);  
$STH->bindParam(':st', $st);  
$STH->bindParam(':la', $la);
$STH->bindParam(':cf', $cf);  
$STH->bindParam(':total', $total);  
$STH = $DBH->prepare("INSERT INTO orders (fftb, st, la, cf, total) VALUES (:fftb, :st, :la, :cf, :total)"); 
$STH->execute(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T08:40:48.150

因为您试图`bind`在创建语句之前将参数传递给语句。首先`prepare()`，然后`bind`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-12T06:33:58.603

检查下面的更正代码：

```
 $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);  
$STH = $DBH->prepare("INSERT INTO orders (fftb, st, la, cf, total) VALUES (:fftb, :st, :la, :cf, :total)"); 
$STH->bindParam(':fftb', $fftb);  
$STH->bindParam(':st', $st);  
$STH->bindParam(':la', $la);
$STH->bindParam(':cf', $cf);  
$STH->bindParam(':total', $total);

$STH->execute(); 
```

# javascript - ASCII > 128 的字符在 Javascript 中无法正确读取

> ID：10070777
> 
> 赞同：4
> 
> 时间：2012-04-09T08:36:07.057
> 
> 标签：javascript, utf-8, character-encoding, ansi, windows-1252

我有一个包含 Javascript 文件的 HTML。此脚本包含一个特殊字符 ASCII 152。当我尝试显示 charCodeAt 时，我得到了不同的结果，但从来没有正确的结果。你能建议吗？谢谢

**测试.HTML**

```
<script type="text/javascript" charset=SEE BELOW src="test.js">
</script> 
```

**使用 ANSI 编码的 TEST.JS 文件**

```
function d(a)
{
a=(a+"").split("");
alert(a[1].charCodeAt(0));
};
d("i˜g"); // Note that ˜ is 152 in ASCII 
```

*   带有 x-user-defined charset 的 TEST.HTML：警报显示 63384。使用 %63232 有效，因为每个 char >128 都显示为 63232+char。
*   带有 utf-8 字符集的 TEST.HTML：警报显示 65533。所有 > 128 的字符都显示为 65533。
*   带有 Windows-1252 字符集的 TEST.HTML：警报显示 752。我找不到 ASCII 与显示内容之间的关系。

**使用 UTF-8 编码的 TEST.JS 文件**

```
function d(a)
{
a=(a+"").split("");
alert(a[1].charCodeAt(0));
};
d("i[x98]g"); // Note that x98 is 152 
```

*   带有 x 用户定义的字符集的 TEST.HTML：警报显示 65533。所有 > 128 的字符都显示为 65533。
*   带有 utf-8 字符集的 TEST.HTML：警报显示 65533。所有 > 128 的字符都显示为 65533。
*   带有 Windows-1252 字符集的 TEST.HTML：警报显示 65533。所有 > 128 的字符都显示为 65533。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T08:45:20.210

utf8 在 128-255 范围内没有字符，而 ASCII 完全以 127 结尾......而且位置`1`in的字符`"i[x98]g"`是 a `"["`， the`"[x98]"`是没有意义的。

您的功能可以替换为`str.charCodeAt(1)`.

字符`˜`是 [Unicode Character 'SMALL TILDE' (U+02DC](http://www.fileformat.info/info/unicode/char/2dc/index.htm)并且可以写成`"\u02DC"`, 或`String.fromCharCode(732)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:41:52.147

ASCII 只有 127 个字符。char 152 不存在

# ruby-on-rails-3 - Formtastic 的未定义方法“has_many”

> ID：10070779
> 
> 赞同：6
> 
> 时间：2012-04-09T08:36:16.807
> 
> 标签：ruby-on-rails-3, activeadmin, formtastic

我收到此错误：

```
undefined method `has_many' for #<Formtastic::SemanticFormBuilder:0xb410d4c> 
```

当我像这样使用它时它会起作用：

```
ActiveAdmin.register Ressource do
    form do |f|  
        f.inputs do
            f.input :offer_id, :as => :hidden
            f.input :name
            f.input :category, :include_blank => false, :collection => Category.order('place ASC').all, :member_label => :to_label
            f.input :description, :input_html => {:class => 'editor'}
            f.input :price
        end
        f.has_many :roles do |app_f|
            app_f.inputs do
                if not app_f.object.id.nil?
                    app_f.input :_destroy, :as => :boolean, :label => "Supprimer l'utilisateur du lot"
                end
                app_f.input :user, :member_label => :to_label, :label => 'Assigné le lot'
                app_f.input :name, :include_blank => false
            end
        end
        f.buttons
    end
end 
```

但它不能部分工作，我需要通过不同的方式或其他方式调用 has_many 方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T17:37:03.257

ActiveAdmin 使用一些有用的助手扩展了 formtastic，例如`has_many`（`lib/active_admin/form_builder.rb`在 activeadmin gem 中）。

不幸的是，这些帮助器在您的模板中默认不可用。

这里有两个选项：

1.  如果您不需要额外的`has_many`功能（看起来像 active_admin 添加了一些 javascript 以便于将新记录添加到集合中），那么您可以使用 stock formtastic。此示例应该在 activeadmin 文件以及部分文件中正常工作：

    ```
    ActiveAdmin.register Ressource do
      form do |f|  
        # ...
        f.inputs :for => :roles do |app_f|
          # ...
          app_f.input :name, :include_blank => false
        end
        f.buttons
      end
    end 
    ```

2.  明确使用 ActiveAdmin 表单构建器：

    ```
    <%= semantic_form_for [:admin, @resource], builder: ActiveAdmin::FormBuilder do |f| %>
      <!-- ... -->

      <%= f.has_many :teachers do |app_f| %>
        <%= app_f.inputs do %>
          <!-- ... -->
        <% end %>
      <% end %>

      <%= f.buttons %>
    <% end %> 
    ```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:38:55.120

有一个解决方案

```
form :html => {:multipart => true} do |f|
end 
```

或者，如果您想使用部分：

```
<%= active_admin_form_for [:admin, @resource] ,:html => {:multipart => true} do |f|%>
<% end %> 
```

# r - 如何检查套接字服务器是否打开？

> ID：10070781
> 
> 赞同：0
> 
> 时间：2012-04-09T08:36:38.257
> 
> 标签：r, sockets

我使用以下 R 代码启动一个套接字服务器并连接到该服务器：

```
library(svSocket)
R server: socket <- startSocketServer(port=8888)   
R client: socketcon <- socketConnection(port=8888) 
```

我`while(TRUE)`在 R 客户端中运行一个循环，如果 R 服务器中的套接字被关闭，我想停止它`stopSocketServer(port = 8888)`

尝试过`isOpen`但没有运气，因为即使我停止 R 服务器它也会返回 TRUE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:23:36.777

有时我在使用并行工作时遇到类似的问题，`snow`并且连接没有正确关闭。

当您收到有关以下内容的错误消息时：

```
 summary.connections(connection) : Invalid connection 
```

我用：

```
closeAllConnections() 
```

关闭所有打开的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:58:12.200

您应该不需要手动关闭套接字客户端。该`svSocket`包有一个`closeSocketClients`命令，由`stopSocketServer`. 奇怪的是，[在 CRAN 的文档](http://cran.r-project.org/web/packages/svSocket/svSocket.pdf)`socketConnection`中提到并链接到，但没有手动输入。但是，有一个名为 的函数，它可能就是您要查找的函数。可能是软件包发生了一些变化，这些变化在文档中没有正确描述。您可能希望就此向软件包维护者发送电子邮件。`socketClientConnection`

# asp.net-mvc-3 - 不使用 EF4.1 删除数据库或表？

> ID：10070783
> 
> 赞同：0
> 
> 时间：2012-04-09T08:36:45.997
> 
> 标签：asp.net-mvc-3, entity-framework-4, entity-framework-4.1, entity-framework-migrations

有没有办法让 Entity Framework 4.1 Code First 不删除数据库或表，即使它改变了？我想升级一个 LIVE 网站，因此我不能。我看到了一些我可以获得的 NuGet 类，但它不是删除数据库而是删除表，在更改时重新创建表等。我只是不想对数据库或表做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:16:29.817

在应用程序的启动中添加：

```
Database.SetInitializer<YourContextType>(null); 
```

这应该删除任何初始化策略。

# ruby-on-rails - Rails 3 验证：存在 => 假

> ID：10070786
> 
> 赞同：17
> 
> 时间：2012-04-09T08:37:09.817
> 
> 标签：ruby-on-rails, validation

这是我期望的一个非常简单的问题，但我无法在指南或其他地方找到明确的答案。

我在 ActiveRecord 上有两个属性。我希望恰好一个存在，另一个为零或空白字符串。

我该如何做相当于 :presence => false 的操作？我想确保该值为零。

```
validates :first_attribute, :presence => true, :if => "second_attribute.blank?"
validates :second_attribute, :presence => true, :if => "first_attribute.blank?"
# The two lines below fail because 'false' is an invalid option
validates :first_attribute, :presence => false, :if => "!second_attribute.blank?"
validates :second_attribute, :presence => false, :if => "!first_attribute.blank?" 
```

或者也许有一种更优雅的方式来做到这一点......

我正在运行 Rails 3.0.9

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-02-23T23:44:43.043

当且仅当特定属性为 nil 时才允许对象有效，您可以使用“包含”而不是创建自己的方法。

```
validates :name, inclusion: { in: [nil] } 
```

这是针对 Rails 3 的。Rails 4 解决方案更加优雅：

```
validates :name, absence: true 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-23T14:49:40.850

```
class NoPresenceValidator < ActiveModel::EachValidator                                                                                                                                                         
  def validate_each(record, attribute, value)                                   
    record.errors[attribute] << (options[:message] || 'must be blank') unless record.send(attribute).blank?
  end                                                                           
end    

validates :first_attribute, :presence => true, :if => "second_attribute.blank?"
validates :second_attribute, :presence => true, :if => "first_attribute.blank?"

validates :first_attribute, :no_presence => true, :if => "!second_attribute.blank?"
validates :second_attribute, :no_presence => true, :if => "!first_attribute.blank?" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T07:39:19.010

使用自定义验证。

```
validate :validate_method

# validate if which one required other should be blank
def validate_method
  errors.add(:field, :blank) if condition
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T07:20:21.563

看起来 :length => { :is => 0 } 可以满足我的需要。

```
validates :first_attribute, :length => {:is => 0 }, :unless => "second_attribute.blank?" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T09:53:53.447

尝试：

```
validates :first_attribute, :presence => {:if => second_attribute.blank?}
validates :second_attribute, :presence => {:if => (first_attribute.blank? && second_attribute.blank? )} 
```

希望有所帮助。

# android - Android中的NoClassDefFondError ...但该类位于Classpath中包含的一个jar中

> ID：10070788
> 
> 赞同：18
> 
> 时间：2012-04-09T08:37:33.877
> 
> 标签：android, noclassdeffounderror

我正在开发一个 Android 应用程序。它必须能够拍照，并将该照片发送到网页。这是代码：

```
HttpClient httpclient = new DefaultHttpClient();

        HttpPost httpPost = new HttpPost("someurl");
        MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE); //Here throws the exception
        multipartEntity.addPart("data",
                new InputStreamBody(
                        new ByteArrayInputStream(byteArray),
                        "image/png"));
        multipartEntity.addPart("caption", new StringBody(filename));

        httpPost.setEntity((HttpEntity) multipartEntity); 
```

我的 ClassPath 中有所需的库（httpclient、apache-mime4j-core、httpcore 和 httpmime）。它在编译时没有显示任何错误。但是，当我运行该项目时，它显示“java.lang.NoClassDefFoundError: org.apache.http.entity.mime.MultipartEntity”但该类确实存在于罐子中（确切地说是在 httpMime 中）。这是完整的跟踪：

```
04-09 10:21:59.362: E/AndroidRuntime(10352): FATAL EXCEPTION: main
04-09 10:21:59.362: E/AndroidRuntime(10352): java.lang.NoClassDefFoundError: org.apache.http.entity.mime.MultipartEntity
04-09 10:21:59.362: E/AndroidRuntime(10352):    at     com.publidirecta.AppAzafata.IniciarGPSActivity2.enviarImagen(IniciarGPSActivity2.java:206)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at com.publidirecta.AppAzafata.IniciarGPSActivity2.onActivityResult(IniciarGPSActivity2.java:196)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at android.app.Activity.dispatchActivityResult(Activity.java:3908)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2549)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2595)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at android.app.ActivityThread.access$2000(ActivityThread.java:121)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:973)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at android.os.Looper.loop(Looper.java:130)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at  android.app.ActivityThread.main(ActivityThread.java:3701)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at java.lang.reflect.Method.invoke(Method.java:507)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
04-09 10:21:59.362: E/AndroidRuntime(10352):    at dalvik.system.NativeStart.main(Native Method) 
```

我已尝试使用此任务中使用的所有 jar 的旧版本，但它仍然无法正常工作。这些 jar 确实出现在 Android 项目的“引用的库”中。

我什么都试过了。有人知道为什么会这样吗？我正要扑向窗户。

先感谢您！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-09T08:41:03.807

您需要在项目中创建一个名为的文件夹`libs`，并将您引用的 jar 复制到该文件夹​​。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-05T00:39:02.820

在自动更新方面不成功，我下载了最新最好的。但是找不到 MultipartEntity 类。我将它重新添加到项目中。我确定它在一个名为“libs”的文件夹中——但没有运气。安东的提示我检查项目偏好。Project Properties -> Java Build Path -> Order and Export：确保选中 Android Private Libraries。（我都检查了）。清理你的项目。问题消失了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T10:35:41.147

太奇怪了，我的应用程序已经在“lib”中有文件并发生了崩溃。我按照白痴的回应将其重命名为“libs”并且它起作用了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-21T15:18:23.343

在 Eclipse 中为您的项目打开属性。并打开 Order and Export，确保选择了您需要的所有库。然后单击项目>清理。最后，您的问题应该消失了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-19T09:43:10.943

我今天遇到了一些问题：

a) 我将所有的 jar 文件放到 libs 目录中，然后右键单击 Project > Build Path > Add external jars > 选择 jar 文件。然后去“订购和出口”，仍然有问题。b) 结果表明 httpclient-4.3.1.jar 和 httpmime-4.3.1.jar 还不够。我还需要添加 httpcore-4.3.jar。

这摆脱了错误！:DI 今天花了将近 4 个小时试图解决这个问题:(

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-09T10:33:46.223

我解决了同样的问题：

1.  在您遇到此
    **java.lang.NoClassDefFoundError: org/apache/http/entity/mime/MultipartEntityBuilder的项目中打开 pom.xml**

2.  在依赖项下，添加这段代码。

    ```
     <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpmime</artifactId>
            <version>4.5.2</version>
            <scope>test</scope>
        </dependency> 
    ```

3.  清理并重建代码。

它会起作用的。

# python - 如何“纠正”这个 matplotlib 绘图程序？

> ID：10070793
> 
> 赞同：2
> 
> 时间：2012-04-09T08:38:21.207
> 
> 标签：python, matplotlib

我对 matplotlib 提供的编码范式感到非常困惑。我正在使用下面这样的代码来绘制一些数据：

```
fig=plt.figure(figsize=fig_size)  # plt=pyplot defined above
axes1 = fig.add_subplot(111)
axes1.plot(temp, depth, 'k-')
axes1.set_ylim(-600,0)
axes1.set_ylabel(r'Depth $(m)$')
axes1.set_xlim(0,80)
axes1.set_xlabel(r'Temperature (\textcelsius)')
axes1.set_xticks(np.arange(0,100,20))
axes1.grid(True)
plt.savefig(savedir + 'plot.svg', transparent=True) 
```

我宁愿使用 mpl 的面向对象风格而不是 pylab 便利功能。所以问题是，如果我只想以非交互方式绘制一条曲线，我是否使用了正确的图形创作风格？（第 1 行和第 2 行）。似乎需要很多单独的调用来格式化轴标签等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:30:51.917

你在做什么看起来不错。（我同意，仅`pyplot`用于图形创建并将 OO API 用于其他所有内容要干净得多。）

如果您希望在一次调用中制作图形和轴，请使用[`plt.subplots`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.subplots).

另外，我发现使用它`fig.savefig`而不是`plt.savefig`. 在这种情况下，这无关紧要，但这样您就不必担心状态机界面中哪个图形是“活动的”。

最后一件事，您可以通过一次调用来设置 x 和 y 限制`axes1.axis(...)`。这纯粹是一个偏好问题。 `set_xlim`并且`set_ylim`可以说是一种更易读的方式。

“setter”和“getter”很烦人，但如果我没记错的话，可以追溯到python没有属性的时候。它们被保留为主要方法，部分原因是为了向后兼容，部分原因是“matlab-isms”之类[`plt.setp`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.setp)的更容易编写。事实上，如果你愿意，你可以做到

```
plt.setp(ax, xlabel='Xlabel', ylabel='Ylabel', xticks=range(0, 100, 20)) 
```

这避免了必须执行三个单独的调用来设置 xlabel、ylabel 和 xticks。但是，我个人倾向于避免它。我发现在大多数情况下，稍微冗长一些会更好。但是，如果您发现它更干净或更方便，那么使用`setp`.

作为我如何编写它的示例：

```
import matplotlib.pyplot as plt
import numpy as np

depth = np.linspace(-600, 0, 30)
temp = (4 * np.random.random(depth.size)).cumsum()

fig, ax = plt.subplots() 
ax.plot(temp, depth, 'k-')
ax.axis([0, 80, -600, 0])
ax.set_ylabel(r'Depth $(m)$')
ax.set_xlabel(r'Temperature $(^{\circ}C)$')
ax.set_xticks(np.arange(0, 100, 20))
ax.grid(True)

fig.savefig('plot.svg', transparent=True)
plt.show() 
```

![在此处输入图像描述](../Images/7fffb40b741a03081f88ec8f42d88e50.png)

# asp.net - 如何设置表单身份验证 cookie 路径

> ID：10070801
> 
> 赞同：7
> 
> 时间：2012-04-09T08:39:10.297
> 
> 标签：asp.net, cookies, forms-authentication

在同一个 IIS 网站上，我有两个名为 /foo 和 /bar 的 ASP.NET Web 应用程序。两者都使用表单身份验证，我希望用户能够独立登录和退出两个站点。

使用表单身份验证的标准配置，它似乎为表单身份验证 cookie 发送了一个“/”的 cookie 路径。这意味着当用户登录 /bar 时，它会将他从 /foo 中注销，这对我来说是不受欢迎的行为。

显而易见的解决方案似乎是这样的：

```
FormsAuthentication.RedirectFromLoginPage(username, false, Request.ApplicationPath); 
```

这使得表单 auth cookie 具有允许用户独立登录 /foo 和 /bar 的应用程序路径 :-) 但是还有一个更严重的问题：如果用户尝试登录 /Foo（大写 F )，IIS 将它们定向到 Web 应用程序 /foo，但它们永远无法登录，因为浏览器（在本例中为 chrome）在根据 cookie 路径决定是否发送 cookie 时区分大小写。

这似乎是每个 ASP.NET Web 应用程序开发人员都会面临的常见问题，但我看不到一个明智的解决方案。请告诉我我错过了一些明显的东西吗？

谢谢

安迪

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T14:10:01.410

我假设您已经以某种方式解决了这个问题，但是由于我偶然发现了这个问题，我想我应该加几分钱。

要解决此问题，请在 web.config 中使用不同的 cookie 名称。就像是：

```
<authentication mode="Forms">
  <forms name=".ASPXFORMSAUTH_FOO"
      loginUrl="public/login.aspx" cookieless="UseCookies" slidingExpiration="true"/>
</authentication> 
```

和

```
<authentication mode="Forms">
  <forms name=".ASPXFORMSAUTH_BAR"
      loginUrl="public/login.aspx" cookieless="UseCookies" slidingExpiration="true"/>
</authentication> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:48:59.997

```
Dim ticket As FormsAuthenticationTicket = New FormsAuthenticationTicket(1, _
      pUsernameEntered, _
      DateTime.Now, _
      DateTime.Now.AddMinutes(60), _
      True, _
      pOperatorID, _
      FormsAuthentication.FormsCookiePath)

    ' Encrypt the ticket.
    Dim encTicket As String = FormsAuthentication.Encrypt(ticket)

    'create a cookie with the encrypted ticket
    Dim authenticationCookie As New HttpCookie(FormsAuthentication.FormsCookieName, encTicket)

    'only create a persistent cookie if ticket persistent is checked
    If (ticket.IsPersistent) Then
        'give the cookie an expiration date outside of the forms authentication encrypted ticket
        authenticationCookie.Expires = ticket.Expiration
    End If

    'save the cookie
    HttpContext.Current.Request.Cookies.Remove(".cookiename")
    Response.Cookies.Add(authenticationCookie) 
```

在 cookiename 中，您可以设置 cookie 名称。并且`AddMinutes`你可以设置你的分钟值，目前它是 60。

# delphi - Delphi 从字节到结构

> ID：10070802
> 
> 赞同：3
> 
> 时间：2012-04-09T08:39:14.847
> 
> 标签：delphi

我有下一个代码：

```
type THead = packed record
  znmpc: byte;
  znmpcch: array [0..1] of char;
  znc, zneispr, zkpd, zkps, nd: byte;
  zb9, zb10, zb11, zb12, zb13, zb14, zb15: byte;
end;

procedure TForm1.FormCreate(Sender: TObject);
var
  db: ^THead;
  a: array [0..9] of byte;
begin
  a[7] := 9;
  db := @a;
  ShowMessage(IntToStr(db.nd));
end; 
```

这段代码安全吗？我担心下一件事：结构的大小超过缓冲区的大小，我对此感到恐惧。nd 之后的 struct 成员的值对我来说没有意义。我想知道这段代码在某些情况下是否会引发异常，如果是这样，在什么情况下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T08:55:35.567

我猜如果你小心处理它是完全安全的。但是您需要确定您不会忘记您可能无法访问`zb11..zb15`. 此外，回想一下，a`char`在 Delphi 2009 之前是 1 个字节，在 Delphi 2009 和更高版本中是 2 个字节。此外，也许值得记录一下`packed`（在这种情况下你不需要这样做，但迂腐明确永远不会错）？最后，当然你必须小心，以免数组超出范围！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T17:15:51.940

我想阅读 db.nd 很好。您将访问堆栈中不属于您的某个位置。但是给这个变量写东西会导致灾难性的失败，我们不知道。

此外，如果您超出边界太多，您也可能会因阅读而受到访问冲突：

```
procedure TForm2.Button1Click(Sender: TObject);
var
  db: THead;
  p: PByte;
begin
  db.nd := 9;
  p := @db;

  ShowMessage(IntToStr(p[7])); // shows 9
  ShowMessage(IntToStr(p[700])); // shows 182 for me?
  ShowMessage(IntToStr(p[70000])); // shows 0
  ShowMessage(IntToStr(p[700000])); // access violation!
end; 
```

使用联合更安全：

```
type
  THead = packed record
    znmpc: byte;
    znmpcch: array [0..1] of AnsiChar;
    znc, zneispr, zkpd, zkps, nd: byte;
    zb9, zb10, zb11, zb12, zb13, zb14, zb15: byte;
  end;

  THeaderUnion = packed record
    case Integer of
      0: (Head: THead);
      1: (ByteArray: Array[0.. sizeof(THead)-1] of Byte);
  end;

procedure TForm1.Button1Click(Sender: TObject);
Var
  db: THeaderUnion;
begin
 db.ByteArray[7] := 9;
 ShowMessage(IntToStr(db.Head.nd));
end; 
```

# jquery - 设置提交 iframe 后关闭颜色框的时间

> ID：10070803
> 
> 赞同：0
> 
> 时间：2012-04-09T08:39:15.450
> 
> 标签：jquery, colorbox

我在 colorbox(lightbox) ifarme 方法中使用 php 发送表单数据。所以如果表单为真提交，我会关闭自动。我的问题是当表单 true 提交时，我显示任何成功框并打印`your message is Sent`。如果我设置自动关闭彩盒用户看不到这个成功框并立即关闭灯箱。我需要在用户看到 sucessbox 后的时间“例如：5 秒”后关闭灯箱。有办法吗？

我的成功和彩盒关闭功能：

```
echo '<div class="success">Thanks.Your Message Send. This Page Close After 5 seconds</div>';

<script type="text/javascript">
<!--//--><![CDATA[//><!--
parent.jQuery.colorbox.close();
//--><!]]>
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T08:40:23.967

尝试这个：

```
window.setTimeout(function() {
    $.colorbox.close();
}, 5000); 
```

我不认为 colorbox 使用 iframe 来显示其内容，所以没有`parent`必要。如果是这样，只需使用它`parent.$.colorbox.close();`。

# mysql - 将 8 行插入 8 列

> ID：10070810
> 
> 赞同：-5
> 
> 时间：2012-04-09T08:40:08.743
> 
> 标签：mysql

我只是从这样的查询中得到结果

```
user_id
108
183
172
129
158
178
117
104 
```

我想要这种格式的结果

```
m1    m2   m3   m4   m5   m6   m7   m8
108  183  172  129  158  178  117   104 
```

有谁能够帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T08:47:24.957

试试下面提到的链接： [http ://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:44:24.790

您可以使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)获得类似的结果集：

```
SELECT GROUP_CONCAT( user_id ) FROM table GROUP BY user_id 
```

否则，如果您想为结果集中的每一行创建一个新列，您可以使用 CASE，但值或值范围必须是硬编码的：

```
SELECT CASE WHEN user_id = 108 THEN user_id ELSE 0 END AS m1, CASE WHEN user_id = 183 THEN user_id ELSE 0 END AS m2, ... 
```

或按范围：

```
SELECT CASE WHEN user_id > 100  AND user_id < 150 THEN GROUP_CONCAT(user_id) ELSE 0 END AS m1, CASE WHEN user_id > 150 AND user_id < 200 THEN GROUP_CONCAT(user_id) ELSE 0 END AS m2, ... 
```

# java - 使用 HttpServletRequestWrapper 时无法发送 jsp 参数？

> ID：10070811
> 
> 赞同：1
> 
> 时间：2012-04-09T08:40:13.393
> 
> 标签：java, jsp, tomcat, servlets

我使用Tomcat7。我的项目结构是：

*   as1.jsp

*   as2.jsp

的内容`web.xml`是：

```
 <filter-mapping>  
            <filter-name>filter1</filter-name>  
            <url-pattern>/as1.jsp</url-pattern>  
        </filter-mapping> 
```

`filter1`在 HttpServletRequestWrapper 中使用：

```
...  
   RequestWrapper requestWrapper = new RequestWrapper(req);  
   requestWrapper.setParameter("params", new String[]{Item.getParams()});   
   chain.doFilter(requestWrapper, response);  
...... 
```

的内容`as1.jsp`是：

```
hi <br/>  
<jsp:include page="as2.jsp">  
        <jsp:param name="test" value="true" />            
</jsp:include> 
```

的内容`as2.jsp`是：

```
as2 runed  
<br/>  
test:<%= request.getParameter("test") %> 
```

当我部署项目时，我得到了这个结果：

```
hi  
as2 runed  
test:null 
```

当删除`HttpServletRequestWrapper`时`filter1`我得到正确的结果：

```
hi  
as2 runed  
test:true 
```

请帮助我，如何`request.getParameter("test")`进入？谢谢你。`HttpServletRequestWrapper``filter1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:46:19.103

看起来`Filter RequestWrapper` 是覆盖`.getParameter()`方法而不是委托给原始请求。

# sql - SQL如何创建重复记录？

> ID：10070816
> 
> 赞同：8
> 
> 时间：2012-04-09T08:40:37.723
> 
> 标签：sql

我正在看这个问题：[Getting random value from a SQLite table](https://stackoverflow.com/questions/10068099/getting-random-value-from-a-sqlite-table)，它让我想知道是否可以使用 SQL 复制记录。更具体地说，是否有允许转换这些记录的构造：

```
id| name| count
---------------
 1| Anne|     3
 2|  Joe|     2 
```

进入：

```
id| name
--------
 1| Anne
 1| Anne
 1| Anne
 2|  Joe
 2|  Joe 
```

`Anne`其中后者中的和记录的计数与前一组记录`Joe`中的相应`count`值相匹配。

可以用 SQL 完成吗？如果是这样，怎么做？

**编辑：**

Lucero 问什么 SQL 方言；任何真的，但理想情况下，最不可知论的方法将是最好的。

**另一个编辑：**

可以在说 sqlite 中的单个 SQL 语句中完成吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T08:57:20.500

您可以使用“数字”表（对各种操作都很方便）：

```
CREATE TABLE num
( i UNSIGNED INT NOT NULL
, PRIMARY KEY (i)
) ;

INSERT INTO num (i)
VALUES
  (1), (2), ..., (1000000) ; 
```

然后：

```
SELECT 
    t.id, t.name
FROM 
        tableX AS t
    JOIN
        num
            ON num.i <= t."count" 
```

**警告**：这种方法当然有局限性。只要`count`列中的值超过 Numbers 表中存储的最大值，查询就不会生成所有需要的行。如果`count`列中的值是无界的，那么只有迭代或递归解决方案（如其他两个答案）可以工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T08:48:56.627

什么 SQL 方言和版本？它可以通过递归 CTE 轻松完成。

```
WITH cte AS (
    SELECT id, name, count FROM tbl
    UNION ALL
    SELECT id, name, count-1 FROM cte WHERE count>1
)
SELECT id, name FROM cte 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T08:47:51.167

这可以使用递归 CTE 来完成：

```
;WITH CTE_Data as (
    select id=1, name='Anne',[COUNT]=3
    union select id=2, name='Joe',[COUNT]=2
),
CTE_List as (
    select
        id,
        name,
        ind=1
    from CTE_Data
    union all
    select
        l.id,
        l.name,
        ind=ind+1
    from CTE_List l
        join CTE_Data d on l.id = d.id
    where 
        l.ind < d.[count]
)
select id,name from CTE_List
order by id,ind 
```

注意：CTE_List 很有趣，CTE_Data 只是用于测试的源数据。

# jasperserver - 无法转到 Jasper 服务器上的第二步调度

> ID：10070817
> 
> 赞同：0
> 
> 时间：2012-04-09T08:40:38.677
> 
> 标签：jasperserver

我使用的是`Jasper Server 4.5.0`32 位版本。

当我按照在服务器中安排报告的第一步中的要求填写报告名称后单击下一步时，它给了我以下错误：

```
The server has encountered an error. Please excuse the inconvenience. 
An error has occurred. Please contact your system administrator. (5321) 
```

错误日志如下：

```
2012-04-09 17:37:38,940  WARN IntrusionDetector,http-8080-2:449 - [SECURITY FAILURE Anonymous:null@unknown -> /ExampleApplication/IntrusionDetector] Invalid input: context=trigger.timezone-ViewRepository_Schedule_OutputSettings_context, type(AlphaUnderscoreForward)=^[\p{L}\p{M}\p{Pc}\/]*$, input=GMT 05:30
org.owasp.esapi.errors.ValidationException: trigger.timezone-ViewRepository_Schedule_OutputSettings_context: Invalid input. Please conform to regex ^[\p{L}\p{M}\p{Pc}\/]*$ with a maximum length of 100
    at org.owasp.esapi.reference.validation.StringValidationRule.checkWhitelist(StringValidationRule.java:144)
    at org.owasp.esapi.reference.validation.StringValidationRule.checkWhitelist(StringValidationRule.java:160)
    at org.owasp.esapi.reference.validation.StringValidationRule.getValid(StringValidationRule.java:284)
    at org.owasp.esapi.reference.DefaultValidator.getValidInput(DefaultValidator.java:213)
    at com.jaspersoft.jasperserver.api.security.validators.ValidatorImpl.validate(ValidatorImpl.java:345)
    at com.jaspersoft.jasperserver.api.security.validators.ValidatorImpl.validate(ValidatorImpl.java:251)
    at com.jaspersoft.jasperserver.api.security.WebAppSecurityFilter.validate(WebAppSecurityFilter.java:175)
    at com.jaspersoft.jasperserver.api.security.WebAppSecurityFilter.doFilter(WebAppSecurityFilter.java:82)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
    at com.jaspersoft.jasperserver.war.MultipartRequestWrapperFilter.doFilter(MultipartRequestWrapperFilter.java:90)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
    at org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
    at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:188)
    at org.springframework.security.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:99)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.jaspersoft.jasperserver.war.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:67)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:558)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:859)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1555)
    at java.lang.Thread.run(Thread.java:619)
2012-04-09 17:37:38,972  WARN JSCommonController,http-8080-2:202 - There was a security error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:38:54.380

要禁用`timezone`验证，您可以在文件中注释（或删除）此字符串*`jasperserver\WEB-INF\classes\esapi\security.properties`*：

```
trigger.timezone=AlphaDot,AlphaUnderscoreForward,100,true,trigger.timezone-ViewRepository_Schedule_OutputSettings_context 
```

您应该检查`timezone`服务器上定义的：

*   默认时区（使用 Java 获取 - [java.util.TimeZone.getDefault()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimeZone.html#getDefault%28%29)）；
*   您在bean*`jasperserver\WEB-INF\applicationContext.xml`*文件中的时区列表，属性。`userTimeZonesList``timeZonesIds`

表达方式

```
Validator.AlphaUnderscoreForward=^[\\p{L}\\p{M}\\p{Pc}\\/]*$ 
```

从*`jasperserver\WEB-INF\classes\esapi\validation.properties`*文件中只是一个用于值验证的正则表达式。

# ruby-on-rails - 资产管道包括来自 View 的 jQuery？

> ID：10070818
> 
> 赞同：0
> 
> 时间：2012-04-09T08:40:40.727
> 
> 标签：ruby-on-rails

我从 application.html.erb 中省略了 <%= javascript_include_tag "application" %> 行，所以此时没有任何 javascript，但是如果我想在那之后包含 jQuery 怎么办？并且必须在视图中进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:15:03.170

从下载 jquery 文件

[http://code.jquery.com/jquery-1.7.2.js](http://code.jquery.com/jquery-1.7.2.js)

将其添加到文件夹 your_app/app/assets/javascripts/

然后将以下行添加到您的 application.html.erb

您为应用程序启用了 jquery。

如果它仅适用于一页，则将其添加到标签中的相应视图中

# wpf - 将 Textblock 与具有文本“Audit”的属性绑定显示文本“Audi”

> ID：10070826
> 
> 赞同：0
> 
> 时间：2012-04-09T08:41:24.043
> 
> 标签：wpf, mvvm, .net-4.0, textblock

我将 TextBLock 与字符串属性绑定，但只要此属性包含文本“Audit”，UI 上显示的实际文本就是“Audi”。对于任何其他情况，这都很好。

我正在使用.Net 4.0，操作系统是win XP。

我不确定这是否是一个错误，但我无法摆脱它。如果是错误，我在哪里报告 WPF 错误？其他人也可以重现此问题吗？如果是，是否有解决方法？

编辑：文本块的绑定是：

```
<TextBlock Padding="0,5,5,5" TextWrapping="Wrap" Text="{Binding TaskRoleMapping}" FontWeight="Bold" Foreground="White" FontFamily="Segoe UI" Margin="3,0,0,0" VerticalAlignment="Center"/> 
```

我确信文本长度不是问题，因为更大的文本可以正常显示。

编辑：TextBlock 包含在 StackPanel 中

```
<StackPanel Height="40" Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Left" Width="Auto">            
        <ContentControl Content="ContentControl" Template="{DynamicResource vector_Summary}" Height="16"/>
        <TextBlock Padding="5,5,0,5" Height="28" 
                   Text="{Binding Path=[LABEL.MAIN.HEADER], Source={x:Static Util:Util.labelDictionary}}" 
                   FontFamily="Segoe UI" FontSize="12" 
                   Foreground="#FFFFFF" Margin="1,7,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Width="Auto"/>
        <TextBlock Padding="0,5,5,5" TextWrapping="Wrap" Text="{Binding TaskRoleMapping}" FontWeight="Bold" Foreground="White" FontFamily="Arial" Margin="3,0,0,0" VerticalAlignment="Center"/>            
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:34:12.270

我喜欢 Kent Boogaart 的评论/观点。基本上't' char 被从视图中截断/移除。因此将字体大小更改为更小，或删除“Bold”或引入TextBlock的最小大小，否则它是父级，“Audi”中的't'会神奇地出现

# iphone - 如何在 UISegment 按钮单击上更改表视图的值

> ID：10070827
> 
> 赞同：1
> 
> 时间：2012-04-09T08:41:25.377
> 
> 标签：iphone, xcode

我在段控件中有两个数组和三个按钮

```
 -(void)viewDidLoad{ 
  if(!resultArray){

    resultArray =[[NSMutableArray alloc] init];
}

   [self setUpData];

   if(!nextArray){

    nextArray =[[NSMutableArray alloc] init];
 }

    [self nextData];
   appointmentsOfDay = [[NSMutableArray alloc] arrayWithArray:resultArray copyItems:YES];
    }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

 return [appointmentsOfDay count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UILabel * dobLabel = nil;
static NSString * Identifier = @"Identifier";
UITableViewCell * cell = [table dequeueReusableCellWithIdentifier:Identifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:Identifier] autorelease];

    dobLabel = [[UILabel alloc] initWithFrame:CGRectMake(200, 6, 100, 32)];
    dobLabel.font = [UIFont systemFontOfSize:15];
    dobLabel.tag = 999;
    [cell addSubview:dobLabel];
    [dobLabel release];
 }
 else {
     dobLabel = (UILabel *)[cell viewWithTag:999];
 }

appDelegate = (EMRAppDelegate *)[[UIApplication sharedApplication] delegate];

 ObjectData *theCellData = [appointmentOfDay objectAtIndex:indexPath.row];

     cell.textLabel.font = [UIFont systemFontOfSize:15];
     cell.textLabel.textAlignment = UITextAlignmentLeft;
     cell.textLabel.text=[NSString stringWithFormat:@"%@ %@",theCellData.firstName,theCellData.lasttName];

    dobLabel.text = theCellData.appointmentTime;

      return cell;
    }

  - (void)onDayButtonClick:(id)sender
  {
     UISegmentedControl * segmentedControl = (UISegmentedControl *)sender;

   [appointmentsOfDay removeAllObjects];
    if (segmentedControl.selectedSegmentIndex == 0) {

        [appointmentsOfDay removeAllObjects];

         appointmentsOfDay = [[NSMutableArray alloc] arrayWithArray:resultArray copyItems:YES];

    }

    else if (segmentedControl.selectedSegmentIndex == 1) {

        [appointmentsOfDay addObject:nextArray];

    }
    else if (segmentedControl.selectedSegmentIndex == 2) {

    }

[table reloadData];
} 
```

崩溃报告

```
 EMR[1161:10703] -[__NSPlaceholderArray arrayWithArray:copyItems:]: unrecognized selector sent to instance 0x7320120
2012-04-09 14:13:35.021 EMR[1161:10703] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSPlaceholderArray arrayWithArray:copyItems:]: unrecognized selector sent to instance 0x7320120'
 *** First throw call stack:
 (0x201d052 0x2d01d0a 0x201eced 0x1f83f00 0x1f83ce2 0xc7a7 0x6bc64e 0x6bc941 0x6ce47d  0x6ce66f 0x6ce93b 0x6cf3df 0x6cf986 0x6cf5a4 0x9660 0x201eec9 0x5f95c2 0x5f955a 0x69eb76 0x69f03f 0x69e2fe 0x61ea30 0x61ec56 0x605384 0x5f8aa9 0x2f72fa9 0x1ff11c5 0x1f56022 0x1f5490a 0x1f53db4 0x1f53ccb 0x2f71879 0x2f7193e 0x5f6a9b 0x25bd 0x2535)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:54:37.753

问题是你`appointmentsOfDay`每次都在分配，所以删除下面的代码，

```
 appointmentsOfDay = [[NSMutableArray alloc] arrayWithArray:resultArray copyItems:YES]; 
```

并将其添加到 viewdidload。

然后，

```
if (segmentedControl.selectedSegmentIndex == 0) {

        [appointmentsOfDay addObject:resultArray];

    }

else if (segmentedControl.selectedSegmentIndex == 1) {

        [appointmentsOfDay addObject:nextArray];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:56:35.787

以下代码正在实施，可能会解决您的问题

在此我在按下按钮时实现了两个数组，然后另一个数组填充到 Uitable 中。

鉴于 load 方法是否实现了以下代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.arOne=[NSArray arrayWithObjects:@"1",@"a",@"b",@"c",@"d",@"e", nil];
    self.arTwo=[NSArray arrayWithObjects:@"x",@"y",@"z",@"o",@"p", nil];
    [self.tableView reloadData];
} 
```

在 cellForRowAtIndexPath 方法中实现以下代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text=[(self.btnTapped.selected)?self.arTwo:self.arOne objectAtIndex:indexPath.row];

    return cell;
} 
```

控制与方法之间连接的IBAction方法

```
- (IBAction)btnTitle:(id)sender {
    self.btnTapped.selected=!self.btnTapped.selected;
    [self.tableView reloadData];
} 
```

愿这有助于解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T08:58:13.727

这是我更喜欢使用的方法。参考您的分段控件。声明一个只读属性

```
@property (nonatomic, readonly) NSArray *appointmentOfDay; 
```

并将其实现为

```
-(NSArray*) appointmentOfDay {
    NSArray *tData;
    if (self.segmentedControl.value==0) {
        //instantiate tData based on value
    }
    // do for all segmented control value
    return tData;
} 
```

`reloadData`并在单击 Day 按钮时调用。

# wordpress - Wordpress 显示主题文件中不存在的 div？

> ID：10070829
> 
> 赞同：0
> 
> 时间：2012-04-09T08:41:37.053
> 
> 标签：wordpress, wordpress-theming

我正在使用 wordpress 开发一个新博客，但遇到了一个奇怪的错误。在我的主题文件中没有

```
<div id="sliderDiv">

    <img src="images/sliderMain.png" width="1000" height="427">

</div> 
```

在 index.php 或 page.php 中，我什至查看了 search.php 和 searchpage.php，但我已经从这些文件中删除了这些行，但它们一直显示出来，我无法弄清楚它们来自哪里。那些 HTML 行最初在所有这些文件中用于测试目的，但我已经删除了它们，但仍然出现。我从主题编辑器中删除了它们，但它们出现了。我不知道有什么问题。我也尝试清理我的缓存，但没有运气。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:52:52.447

在文本编辑器中使用查找/替换功能在所有主题文件中搜索该 html。任何文本编辑器——OS X 或 Windows——都会有这样的功能。

或者，如果您有命令行，请使用 grep。

# ruby - 'gem install bundle' 出错了

> ID：10070830
> 
> 赞同：4
> 
> 时间：2012-04-09T08:41:39.190
> 
> 标签：ruby, gem, centos

我想安装红宝石。我的操作系统是centos5.5。当我`gem install bundle` 遇到问题时

> 错误：加载命令：安装 (LoadError)
> 没有要加载的文件 -- zlib
> 错误：执行 gem ... (NameError) 未初始化常量 Gem::Commands::InstallCommand

我试`yum install zlib`了，但是提示

> 软件包 zlib-1.2.3-4.el5.i386 已安装且最新版本

我已经搜索过这个错误，但我仍然无法解决这个问题。
我发现`/usr/local/rvm/src`有`zlib-1.2.6`。
我尝试`/usr/local/rvm/src/ruby-1.9.2-p318/ext/zlib`编译它 `ruby extconf.rb` 但我得到了这个信息：

> ```
> checking for deflateReset() in -ltrue... no
> checking for deflateReset() in -llibz... no
> checking for deflateReset() in -lzlib1... no
> checking for deflateReset() in -lzlib... no
> checking for deflateReset() in -lzdll... no 
> ```

那我该怎么办？
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:10:21.517

It seems rvm is unable to find zlib. Try reinstalling ruby by first installing zlib for the rvm.

```
rvm pkg install zlib
rvm remove 1.9.2 
rvm install 1.9.2 
```

# jakarta-ee - 在另一台机器上部署 Struts2 应用程序

> ID：10070838
> 
> 赞同：1
> 
> 时间：2012-04-09T08:42:59.843
> 
> 标签：jakarta-ee, struts2

我正在另一台机器上部署 struts2 应用程序，有时应用程序会运行，但有时会出现以下错误

```
Apr 9, 2012 2:12:03 PM org.apache.catalina.core.StandardContext filterStart SEVERE: Exception starting filter struts2 Caught exception while loading file struts-default.xml - [unknown location]
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:839)
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:131)
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:100)
        at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reload(DefaultConfiguration.java:130)
        at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:52)
        at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:395)
        at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:452)
        at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:201)
        at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)
        at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:397)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3709)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4363)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:627)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:511)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1231)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
        at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1471)
        at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:824)
        at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:350)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:196)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Thread.java:662) Caused by: java.lang.ClassCastException: org.apache.xerces.parsers.XIncludeAwareParserConfiguration cannot be cast to org.apache.xerces.xni.parser.XMLParserConfiguration
        at org.apache.xerces.parsers.DOMParser.<init>(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.<init>(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.<init>(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.newDocumentBuilder(Unknown Source)
        at com.sun.org.apache.xalan.internal.xsltc.trax.SAX2DOM.createDocument(SAX2DOM.java:324)
        at com.sun.org.apache.xalan.internal.xsltc.trax.SAX2DOM.<init>(SAX2DOM.java:84)
        at com.sun.org.apache.xalan.internal.xsltc.runtime.output.TransletOutputHandlerFactory.getSerializationHandler(TransletOutputHandlerFactory.java:187)
        at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getOutputHandler(TransformerImpl.java:392)
        at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerHandlerImpl.setResult(TransformerHandlerImpl.java:137)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.setup(DomHelper.java:213)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:198)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:189)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:175)
        at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:115)
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:830)
        ... 46 more Apr 9, 2012 2:12:04 PM org.apache.catalina.core.StandardContext filterStart SEVERE: Exception starting filter struts2 Caught exception while loading file struts-default.xml - [unknown location]
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:839)
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:131)
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:100)
        at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reload(DefaultConfiguration.java:130)
        at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:52)
        at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:395)
        at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:452)
        at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:201)
        at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)
        at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:397)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3709)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4363)
        at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1247)
        at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:377)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:196)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Thread.java:662) Caused by: java.lang.ClassCastException: org.apache.xerces.parsers.XIncludeAwareParserConfiguration cannot be cast to org.apache.xerces.xni.parser.XMLParserConfiguration
        at org.apache.xerces.parsers.DOMParser.<init>(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.<init>(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.<init>(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.newDocumentBuilder(Unknown Source)
        at com.sun.org.apache.xalan.internal.xsltc.trax.SAX2DOM.createDocument(SAX2DOM.java:324)
        at com.sun.org.apache.xalan.internal.xsltc.trax.SAX2DOM.<init>(SAX2DOM.java:84)
        at com.sun.org.apache.xalan.internal.xsltc.runtime.output.TransletOutputHandlerFactory.getSerializationHandler(TransletOutputHandlerFactory.java:187)
        at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getOutputHandler(TransformerImpl.java:392)
        at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerHandlerImpl.setResult(TransformerHandlerImpl.java:137)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.setup(DomHelper.java:213)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:198)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:189)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:175)
        at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:115)
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:830) 
```

... 32 更多

我使用 Struts2 和 apache tomcat 6.0.18 和 netbeans 6.5 作为 ide，struts.xml 如下所示。

```
 <action name="HelloWorld" class="com.cdac.cloud.HelloWorld">
        <result name="successfullogin">/success.jsp</result>
         <result name="loginfailed">/index.jsp</result>
    </action>

    <action name="deletefile" class="com.cdac.cloud.HelloWorld" method="deleteFile">
        <result name="successfuldelete">/success.jsp</result>
        <result name="exception">/error.jsp</result> 
    </action>

    <action name="fileUploadAction" class="com.cdac.cloud.HelloWorld" method="uploadFile">
        <result name="successfulupload">/success.jsp</result>
        <result name="exception">/error.jsp</result> 
    </action>

     <action name="downloadfile" class="com.cdac.cloud.HelloWorld" method="downloadFile">
        <result name="successfuldownload" type="stream">/success.jsp
        <param name="contentType">${contentType}</param>
        <param name="inputName">fileInputStream</param>
        <param name="contentDisposition">attachment;filename="${fileName}"</param>
        <param name="bufferSize">1024</param>
        </result>
        <result name="exception">/error.jsp</result> 
    </action>

    <action name="logout" class="com.cdac.cloud.HelloWorld" method="logout">
        <result name="successfullogout">/index.jsp</result>
        <result name="exception">/error.jsp</result> 
    </action>

     <action name="goback" class="com.cdac.cloud.HelloWorld" method="listFiles">
        <result name="successback">/success.jsp</result>
        <result name="exception">/error.jsp</result> 
    </action>

</package> 
```

令人惊讶的部分是每当我重新启动 netbeans 和 tomcat 我的应用程序运行时，如果我运行另一个应用程序而不是第一个应用程序停止运行并出现上述错误

# javascript - 如何检测 JavaScript 警报的来源？

> ID：10070843
> 
> 赞同：8
> 
> 时间：2012-04-09T08:43:43.270
> 
> 标签：javascript, internet-explorer

我正在尝试调试一个非常复杂的 IE Intranet 应用程序。我收到一条带有自定义消息的警报，指出发生了异常。我想了解有关此异常的更多信息，因为该消息不是很有帮助。

有一个包含大量 iFrame 的母版页（如果有区别，还有 .htc 文件），所以我不认为我可以尝试[劫持 window.alert](https://stackoverflow.com/a/4867114/79835)。我最后的手段是通过文件搜索来试试我的运气。

使用 IE 8，我是否可以检测到此警报的来源？理想的解决方案是以某种方式创建一个“breakOnAlert”函数，该函数在正确的警报位置插入调试器语句。

**澄清：**母版页包含许多 iframe，我相信错误+警报来自其中之一。每个 iframe 都是一个 aspx 页面（有时带有来自用户的动态 html/javascript）并包含内联和外部 JavaScript。在发布之前，我确实尝试在我的页面（iframe 内的子页面）中覆盖*警报*，但它不起作用。~~我假设~~它不起作用，因为每个 iframe 都有自己的窗口对象，所以他们每个人都有自己的*警报版本*. 为此，我需要找到所有 iframe 并为每个 iframe 覆盖它，我认为这会非常复杂。在 IE 开发人员工具中，我可以看到大量脚本文件（内联和外部），因此手动查找其中的警报非常困难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T02:30:24.993

由于在所有 iframe 中执行此操作确实很麻烦，因此我可能会使用[Fiddler](http://www.fiddler2.com/)并以编程方式替换`alert(`为：

```
(function(n){alert(n);debugger;})( 
```

IE 应该支持该`debugger`语句，所以你会有一个调用堆栈

[本页](http://www.fiddler2.com/fiddler/dev/scriptsamples.asp)解释了如何在 Fiddler 中进行文本替换

要添加到的 Fiddler 自定义规则示例`OnBeforeResponse`：

```
if (oSession.oResponse.headers.ExistsAndContains("Content-Type", "html"))
{
    oSession.utilDecodeResponse();
    var oBody = System.Text.Encoding.UTF8.GetString(oSession.responseBodyBytes);
    oBody = oBody.replace(/alert\(/gi, "(function(n){alert(n);debugger;})(");
    oSession.utilSetResponseBody(oBody);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:53:08.310

Ovveride 警报功能并在里面设置断点，然后您可以观看 Stack Trace :)

```
 function alert(message) {
     var x = 'whatever';
 }

 $(function () {
     alert('test');
 }); 
```

# ruby-on-rails - Rails3，设计：以任何用户身份登录，无需通过

> ID：10070845
> 
> 赞同：1
> 
> 时间：2012-04-09T08:43:56.590
> 
> 标签：ruby-on-rails, devise

我需要一个无需输入密码即可为特定用户登录的按钮。这将由管理员完成。

我怎样才能做到这一点？还是 devise.token_authenticable 是唯一正常的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:10:42.097

You can use [sign_in](http://www.rubydoc.info/github/plataformatec/devise/Devise/Controllers/SignInOut#sign_in-instance_method) or [sign_in_and_redirect](http://rubydoc.info/github/plataformatec/devise/master/Devise/Controllers/Helpers:sign_in_and_redirect)

```
class AdminController < ApplicationController
  def my_action

    # Retrieve your user
    user = User.where( :id => [...] )

    # Sign in
    sign_in :user, user

    # Or...
    # sign_in_and_redirect :user, user

  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T08:59:33.867

您可以使用`token_authenticatable`，但也有称为`sign_in`和的辅助方法`sign_out`。通过提供`sign_in`用户对象，该用户正在登录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T10:19:21.607

您可以使用 gem [switch_user](https://github.com/flyerhzm/switch_user)

# java - 如何获得 Swing 组件的坐标，而不管其父组件如何？

> ID：10070848
> 
> 赞同：4
> 
> 时间：2012-04-09T08:44:29.080
> 
> 标签：java, swing, components, coordinates

我正在尝试获取组件的坐标，例如标签。我尝试了 getBounds 和 getLocation，但是如果标签位于 2 个或更多面板上，它们不会给出准确的坐标。除了 getLocationOnScreen 之外，还有没有办法能够获得准确的组件坐标，即使它们位于多个面板上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T09:09:16.793

If you want it relative to a JFrame, then you'll have to do something like this:

```
public static Point getPositionRelativeTo(Component root, Component comp) {
    if (comp.equals(root)) { return new Point(0,0); }
    Point pos = comp.getLocation();
    Point parentOff = getPositionRelativeTo(root, comp.getParent());
    return new Point(pos.x + parentOff.x, pos.y + parentOff.y);
} 
```

Or you can just use the built-in solution `SwingUtilities.convertPoint(comp, 0, 0, root)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T09:06:59.230

作为 的替代方案[`getLocationOnScreen()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#getLocationOnScreen%28%29)，您可以使用[`getXOnScreen()`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseEvent.html#getXOnScreen%28%29)and [`getYOnScreen()`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseEvent.html#getYOnScreen%28%29)from a `MouseEvent`。[`Zoom`](https://stackoverflow.com/a/3742841/230513)是一个例子。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T08:59:22.607

尝试组件。[getLocationOnScreen()](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getLocationOnScreen%28%29)

正如 Javadoc 所说，

> 以点的形式获取此组件的位置，该点指定组件在屏幕坐标空间中的左上角。

# android - 将 Android jar 添加到 Eclipse 构建路径

> ID：10070849
> 
> 赞同：0
> 
> 时间：2012-04-09T08:44:34.180
> 
> 标签：android, eclipse, classpath

我正在使用 Linux Fedora 16 操作系统。日蚀靛蓝。

Android SDK 及其相关的 Eclipse 插件已成功安装。

但是，当我导入我下载的示例项目时，构建错误表明编译器在类路径中找不到 Android 类，即安装插件时 Android jar 没有自动添加到 Eclipse 类路径中。

我尝试添加 /android/tools/lib 目录中的所有 jars（就像很多一样），但没有这样做。

所以我想知道这个 jar(s) 是否需要单独下载，即不是 SDK 包的一部分（这似乎值得怀疑）。

错误示例：

android.app.Activity 无法解析为类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:02:22.633

在 Eclipse 中，当您导入为 android 的项目时，检查项目的根目录并检查其中是否包含以下内容，如下所示

```
 .project
 AndroidManifest.xml 
```

如果您导入的 android 项目没有 .project，那么您应该像以下步骤一样导入项目：

在 Eclipse 中转到：

File-->New-->Android Project -->现在你有一些选项来检查是否要添加已经有源代码的项目，然后从退出源中选择项目并找到你的项目根目录。

现在还有一件事，当您导入项目时，右键单击项目根目录并单击属性转到 Android --> 然后如果没有选择的构建目标，则选择您需要的 Android 目标之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:32:33.873

是的，我也遇到过这个问题。有时，在导入 android 源代码时，eclipse 不会将 android 框架 jars 添加到构建路径中。在这种情况下，打开 .classpath 文件（它将位于项目的根文件夹中）并添加该行

```
<classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/> 
```

在源类路径条目之后。刷新、清理和构建项目。您会发现 android 框架已添加到项目的构建路径中

# jsp - JSP无法连接到tomcat7上的mysql数据库

> ID：10070850
> 
> 赞同：0
> 
> 时间：2012-04-09T08:44:35.453
> 
> 标签：jsp, jdbc

嗨，我是 jsp 的新手，正在尝试显示来自 mysql db 的一些数据。为此，我在 tomcat 7 服务器上安装了 JDK1.7、MySQL Server 5.5、mysql-connector-java-5.1.19-bin.jar 作为连接器。我在**%CATALINA_HOME%webapps/ROOT/ws/**文件夹中创建了一个文件，即带有代码的**index.jsp**

```
<%@ page import="java.sql.*" %>
<%
String connectionURL = "jdbc:mysql://localhost:test?user=root;password=sumant";
Connection connection = null;
Statement statement = null;
ResultSet rs = null;
%>

<html><body>

<%
Class.forName("org.gjt.mm.mysql.Driver").newInstance();
connection = DriverManager.getConnection(connectionURL, "", "");
statement = connection.createStatement();
rs = statement.executeQuery("SELECT name FROM store");

while (rs.next()) {
out.println(rs.getString("name")+"<br>");
}

rs.close();
%>

</body></html> 
```

在调用 url: **http://localhost:8080/ws/index.jsp**我得到

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: An exception occurred processing JSP page /ws/index.jsp at line 14

11: 
12: 
13: <%
14: Class.forName("org.gjt.mm.mysql.Driver").newInstance();
15: connection = DriverManager.getConnection(connectionURL, "", "");
16: statement = connection.createStatement();
17: rs = statement.executeQuery("SELECT name FROM store");

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:567)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:456)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

javax.servlet.ServletException: java.lang.ClassNotFoundException: org.gjt.mm.mysql.Driver
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:911)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:840)
    org.apache.jsp.ws.index_jsp._jspService(index_jsp.java:98)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

java.lang.ClassNotFoundException: org.gjt.mm.mysql.Driver
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:126)
    org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:63)
    java.lang.Class.forName0(Native Method)
    java.lang.Class.forName(Unknown Source)
    org.apache.jsp.ws.index_jsp._jspService(index_jsp.java:78)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

现在我不明白这里有什么问题。请帮我连接到mysql数据库。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T10:01:34.240

使用`com.mysql.jdbc.Driver`类（所谓的 JDBC 驱动程序）而不是`org.gjt.mm.mysql.Driver`. 任何第三方 API 都需要添加到类路径中才能使用它。所以，这个 JAR 需要在 Tomcat 中可见。因此，我建议将`mysql-connector-java-5.1.19-bin.jar`物理位置放置在`/WEB-INF/lib`您的项目目录中，在您的情况下是**ws**。

在早些时候，我经历过`ClassNotFoundException`jar 是否不在物理位置。然后重新启动Tomcat应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:45:35.663

将 mysql_connector/j 驱动程序 jar 文件放在类路径中。然后使用连接

```
Class.forName("com.mysql.jdbc.Driver"); 
```

您的连接网址也应该有 mysql 端口，即 3306

```
String connectionURL = "jdbc:mysql://localhost:3306/test?user=root;password=sumant"; 
```

# security - 使用提要对话框时发布您的 App Id 的风险有多大？

> ID：10070852
> 
> 赞同：2
> 
> 时间：2012-04-09T08:44:38.540
> 
> 标签：security, facebook-graph-api, app-id

我担心当我使用 Facebook 的提要对话框时，我会将我的 App Id 公开，因此容易被利用。我的 App Id 公开存在很大风险吗？如果是，这些风险是什么？有什么方法可以将这些风险降到最低？

**编辑：**我一直在查看的示例使用 Javascript SDK，因此获取 App ID 会相对容易。[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

我没有看到任何使用 PHP SDK 的示例，但我认为 App ID 仍会出现在 URL 中。

**EDIT2：**在此处找到更多信息[App_id 欺骗和滥用](https://stackoverflow.com/questions/9337180/app-id-spoofing-and-misuse)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T08:49:27.273

不，没有风险。你`Application ID`的已经是公开信息了。这是你的`Application Secret`，你不能泄露。

# objective-c - 为什么 ARC 环境中的访问器方法不能具有以“新”开头的名称？

> ID：10070853
> 
> 赞同：1
> 
> 时间：2012-04-09T08:44:49.977
> 
> 标签：objective-c, ios5

[该](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/index.html)文档指出，为了与在 MRR（手动保留释放）环境中编写的代码合作，在 ARC 环境中编写的代码不能具有以“new”开头的访问器名称，我无法弄清楚为什么 ARC 放这种对方法命名的限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T08:51:26.453

我相信原因是因为：

> 5.2.1。init 的语义
> 
> init 系列中的方法隐式使用它们的 self 参数并返回一个保留对象。这些属性都不能通过属性进行更改。
> 
> 使用 self （可能是括号或强制转换）或 super 的接收器调用 init 方法称为委托 init 调用。除非从 init 方法进行委托 init 调用，并且不包括此类方法中的块，否则这是错误的。
> 
> 作为通常规则的一个例外，变量 self 在 init 方法中是可变的，并且具有 __strong 变量的通常语义。但是，如果 init 方法在委托 init 调用完成后尝试使用之前的 self 值，则它是未定义的行为并且程序格式错误，不需要诊断。init 方法返回 self 是常规的，但不是必需的。
> 
> 程序导致对同一对象的 init 方法进行两次或多次调用是未定义的行为，除非每个 init 方法调用最多执行一次委托 init 调用。

资料来源：[http ://clang.llvm.org/docs/AutomaticReferenceCounting.html#family.semantics.init](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#family.semantics.init)

**过去，按惯例以new**开头的方法名称用于调用 alloc 和 init 方法，我相信 Apple 的框架中仍然使用“new”约定的方法。我猜ARC在内存管理方面仍然考虑到这一点。

还阅读以下内容：[http ://clang.llvm.org/docs/AutomaticReferenceCounting.html#family](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#family)

> 一个 Objective-C 方法可能属于一个方法族，它是 Cocoa 约定赋予它的一组常规行为。
> 
> 如果满足以下条件，则方法属于某个方法族：
> 
> *   它有一个 objc_method_family 属性，将其放置在该族中；或者如果不是这样，
> *   它没有 objc_method_family 属性将其置于不同的族或没有族中，并且
> *   它的选择器属于相应的选择器系列，并且
> *   它的签名遵循方法族的附加限制。
> 
> 如果忽略任何前导下划线，选择器的第一个组件完全由方法系列的名称组成，或者它以该名称开头后跟一个小写字母以外的字符，则选择器属于某个选择器系列。例如， _perform:with: 和 performWith: 将属于 perform 家族（如果我们认识的话），但 perform:with 不会。
> 
> 这些家庭及其附加限制是：
> 
> *   alloc 方法必须返回可保留的对象指针类型。
> *   复制方法必须返回可保留的对象指针类型。
> *   mutableCopy 方法必须返回一个可保留的对象指针类型。
> *   新方法必须返回可保留的对象指针类型。
> *   init 方法必须是实例方法并且必须返回一个 Objective-C 指针类型。
> 
> 此外，如果程序声明或包含对 init 方法的调用，该方法的返回类型既不是 id 也不是指向声明类的超类或子类的指针（如果该方法在类上声明) 或调用的静态接收器类型（如果它是在协议上声明的）。

我猜以上意味着您可以调用类似**newobject**而不是**newObject**的方法来避免 ARC 的机制，但这对于使用您的代码的任何人来说可能没有多大意义。也许您也可以通过在您的自定义**new***方法上设置一个属性来避免通常的内存规则，该属性强制该属性上的一些其他方法系列。

# ios - 在 Xcode 中设置分组单元格的宽度

> ID：10070854
> 
> 赞同：1
> 
> 时间：2012-04-09T08:44:52.487
> 
> 标签：ios, cocoa-touch, uitableview

几天来一直在胡闹这个问题，但没有任何进展。我想我想做的很简单：

我有一个 320x60 的图像，我在普通的 TableView 中使用它，因为这些单元格占据了屏幕的整个宽度（320）。TableView 中的分组单元格为 300 宽，并且在左侧和右侧具有 10 的插入/边距。

我可以以某种方式删除这些插图/边​​距并让分组单元格为 320 宽吗？我尝试将左侧的内容插图设置为-10。这确实“删除”了左边距，但它仍然只有 300 宽。还尝试编辑故事板的 XML（我正在使用 iOS 5 - 故事板），但没有任何乐趣。

这个类似的问题在这里得到了回答，因为不可能，希望在 2 年多的时间里发生了一些变化！： [调整分组 UITableView 中的单元格宽度](https://stackoverflow.com/questions/1221873/adjust-cell-width-in-grouped-uitableview)

PS 我想改变宽度，因为背景图像包含漂亮的阴影，我已经读过过度使用阴影可能意味着性能问题。此外，阴影在边框周围额外增加了 5px，因此如果我使用标准宽度，这意味着 -10px 宽。

非常感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:57:46.673

一个**不整洁的解决方案**是使表格视图宽 340 像素，离屏幕左边缘 10 像素。

**涉及更改私有类属性的解决方案**是创建一个`UITableViewCell`子类并覆盖其`layoutSubviews`方法。当我记录子视图时，我发现这些：

```
"<UIGroupTableViewCellBackground: 0x95246b0; frame = (9 0; 302 45); autoresize = W; layer = <CALayer: 0x95226b0>>",
"<UITableViewCellContentView: 0x92332d0; frame = (10 0; 300 43); layer = <CALayer: 0x9233310>>",
"<UIView: 0x95248c0; frame = (10 0; 300 1); layer = <CALayer: 0x951f140>>" 
```

如果我们采用这些子视图并填充可用的整个边界会发生什么？

```
- (void)layoutSubviews;
{
    // By default the cell bounds fill the table width, but its subviews (containing the opaque background and cell borders) are drawn with padding.
    CGRect bounds = [self bounds];

    // Make sure any standard layout happens.
    [super layoutSubviews];
    // Debugging output.
    NSLog(@"Subviews = %@", [self subviews]);
    for (UIView *subview in [self subviews])
    {
        // Override the subview to make it fill the available width.
        CGRect frame = [subview frame];
        frame.origin.x = bounds.origin.x;
        frame.size.width = bounds.size.width;
        [subview setFrame:frame];
    }
} 
```

在这个特殊的时刻，在 iOS 5.1 模拟器上，这是可行的。现在，一些未来版本的 iOS 可能会重组这些类，导致这种方法灾难性地破坏表格布局。您的应用可能会因更改 UITableViewCellContentView 的属性而被拒绝...即使您只是修改其框架。那么，您需要多少才能让单元格填充表格宽度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:15:17.993

您可以通过 Storyboard 访问大小检查器中的 UITableView 的前导和尾随空间约束。我不确定这是什么时候添加的，但是将前导空间约束设置为 -10 并将尾随空间约束设置为 10 将使单元格全宽。

# python - 如何将字符填充添加到字符串？

> ID：10070857
> 
> 赞同：0
> 
> 时间：2012-04-09T08:45:13.933
> 
> 标签：python, string, padding

好的，这很难解释，但我想在句子中添加填充，以便该句子中的字符是 n 的倍数。

但是这个数字“4”必须更改为 3 和 5，所以它也必须工作。

有谁知道我在说什么？？怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:47:13.913

我希望下面的自我注释代码可以帮助您掌握这个概念。您只需要做一些数学运算即可在任一端获取填充字符

一些概念

1.  需要额外字符 填充 = len(string) % block_length
2.  Total_Pad_Characters = block_length - len(string) % block_length
3.  填充字符在前面 = Total_Pad_Characters/2
4.  最后填充字符 = Total_Pad_Characters - Total_Pad_Characters/2

所以这里是代码

```
>>> def encrypt(st,length):
    #Reversed the String and replace all Spaces with 'X'
    st = st[::-1].replace(' ','X')
    #Find no of characters to be padded.
    padlength = (length - len(st)%length) % length
    #Pad the Characters at either end
    st = 'X'*(padlength/2)+st+'X'*(padlength-padlength/2)
    #Split it with size length and then join with a single space
    return ' '.join(st[i:i+length] for i in xrange(0,len(st),length))

>>> encrypt('THE PRICE OF FREEDOM IS ETERNAL VIGILENCE', 4) #Your Example
'XECN ELIG IVXL ANRE TEXS IXMO DEER FXFO XECI RPXE HTXX'
>>> encrypt('THE PRICE', 5) # One Extra Character at end for Odd Numbers
'ECIRP XEHTX'
>>> encrypt('THE PRIC', 5) # 1 Pad Characters at either end
'XCIRP XEHTX'
>>> encrypt('THE PRI', 5) # 1 Pad Characters at either end and one Extra for being Odd
'XIRPX EHTXX'
>>> encrypt('THE PR', 5) # 2 Pad Characters at either end
'XXRPX EHTXX'
>>> encrypt('THE P', 5) # No Pad characters required
'PXEHT'
>>> encrypt('THE PRICE OF FREEDOM IS ETERNAL VIGILENCE', 5) #Ashwini's Example
'XXECN ELIGI VXLAN RETEX SIXMO DEERF XFOXE CIRPX EHTXX'
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:34:47.140

```
>>> import math
>>> def encrypt(string, length):
        inverse_string = string.replace(' ','X')[::-1]

        center_width = int(math.ceil(len(inverse_string)/float(length)) * length) # Calculate nearest multiple of length rounded up

        inverse_string = inverse_string.center(center_width,'X')

        create_blocks = ' '.join(inverse_string[i:i+length] for i in xrange(0,len(inverse_string),length))
        return create_blocks

>>> encrypt('THE PRICE OF FREEDOM IS ETERNAL VIGILENCE', 4)
'XECN ELIG IVXL ANRE TEXS IXMO DEER FXFO XECI RPXE HTXX' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:28:39.183

```
def pad(yourString,blockLength):
    return yourString + ("X" * (blockLength - (len(yourString) % blockLength))) 
```

是你的填充函数。用于结束填充。如果您需要中心填充，请使用：

```
def centerPad(yourString,blockLength):
    return ("X" * ((blockLength - (len(yourString) % blockLength))/2)) + yourString + ("X" * ((blockLength - (len(yourString) % blockLength))/2)) 
```

如果要实现块密码，则需要更仔细地查看其余代码。

# sql - 根据不同列中的时间戳对行进行排序和分组

> ID：10070859
> 
> 赞同：0
> 
> 时间：2012-04-09T08:45:29.870
> 
> 标签：sql, excel, vba

我有一张看起来像这样的桌子

```
ID Event_A Event_B Event_C
1   01-01
1   01-02 
1           01-05
2   01-02
2                   01-03
3   01-03
3   01-04
3           01-06
3                   01-08 
```

我需要这样的输出

```
ID Event_1 Event_2 Event_3 Event_4
1   A       A       B
2   A       C
3   A       A       B       C 
```

所以基本上每个 ID 都有一行，并且所有事件类型根据它们的时间戳（时间顺序）列在列中。

谁能建议宏应该如何看起来像 OR sql 查询来翻转原始表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:05:23.480

这是重新格式化数据的 VBA 例程：

1.  假设源数据在活动工作表中，从`A1`
2.  将结果放在活动工作表上，开始于`F1`- 调整以满足您的需求

* * *

```
Sub SummariseList()
    Dim rSrc As Range
    Dim rDst As Range
    Dim vSrc As Variant
    Dim vDst() As Variant
    Dim srcCol As Long, srcRow As Long
    Dim dstCol As Long, dstRow As Long
    Dim ID As Long
    Dim i As Long

    Set rSrc = Range([A1].End(xlToRight).Offset(1, 0), [A2].End(xlDown))
    vSrc = rSrc

    Set rDst = [F2]

    ' Count IDs and events '
    dstRow = 1
    dstCol = 1
    i = 1
    For srcRow = 2 To UBound(vSrc, 1)
        If vSrc(srcRow, 1) = vSrc(srcRow - 1, 1) Then
            i = i + 1
        Else
            dstRow = dstRow + 1
            If dstCol < i Then dstCol = i
            i = 1
        End If
    Next

    If dstCol < i Then dstCol = i
    ReDim vDst(1 To dstRow, 1 To dstCol + 1)

    ' Output table labels '
    rDst.Offset(-1, 0) = "ID"
    For i = 1 To dstCol
        rDst.Offset(-1, i) = "Event_" & i
    Next

    ' Create output data '  
    ID = vSrc(1, 1)
    vDst(1, 1) = ID
    dstRow = 1
    dstCol = 2
    For srcRow = 1 To UBound(vSrc, 1)
        If vSrc(srcRow, 1) <> ID Then
            ' update vDst '  
            ID = vSrc(srcRow, 1)
            dstCol = 2
            dstRow = dstRow + 1
            vDst(dstRow, 1) = ID
        End If
        For srcCol = 2 To UBound(vSrc, 2)
            If vSrc(srcRow, srcCol) <> "" Then
                vDst(dstRow, dstCol) = Chr(srcCol + 63)
                dstCol = dstCol + 1
                Exit For
            End If
        Next
    Next

    ' Place result on sheet '
    rDst.Resize(dstRow, dstCol - 1) = vDst

End Sub 
```

# javascript - 选择时加载框架

> ID：10070860
> 
> 赞同：-1
> 
> 时间：2012-04-09T08:45:31.117
> 
> 标签：javascript, html

以下 HTML 代码按预期工作。我需要的是一个下拉选项，用户可以在其中选择任何平台，右侧框架将加载所需的文件。

```
<a href="android.html" target="dynamic"> android form </a>
<a href="J2ME.html" target="dynamic"> J2ME form </a>
<a href="windows.html" target="dynamic"> windows form </a> 
```

以下 html 生成下拉选项，但如何使所需页面自动加载？

```
<form>
Platform:
<select name='platform'>
<option>Android  </option>
<option> J2ME </option>
<option> Windows </option>

</select>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:11:15.030

```
 <html>
            <head>
            <script type="text/javascript">
            function loadFrame()
            {
            var s=document.getElementById("platform").value;

            document.getElementById("loadContainer").innerHTML=""
            var iframe = document.createElement("iframe");
            iframe.src = s;
            document.getElementById("loadContainer").appendChild(iframe);
            }
            </script>
            </head>
            <body>

            <div style="float:left">
            <form>
                Platform:
                <select id='platform' onchange="loadFrame()">
                    <option value="android.html">Android</option>
                    <option value="J2ME.html">J2ME</option>
                    <option value="Windows.html">Windows</option>
                </select>
            </form>
            </div>

            <div id="loadContainer" style="float:right"></div>
            </body>
            </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:14:44.737

您可以尝试这样的变体：

首先，像这样为您的选项设置值并`onchange`为选择元素设置事件：

```
<form>
Platform:
<select name='platform' onchange='loadFrame(this)' id='OSList'>
    <option value="1.html">Android</option>
    <option value="2.html">J2ME</option>
    <option value="3.html">Windows</option>
</select>
</form>
<div id="loadContainer"></div> 
```

其次，创建一个函数，该函数使用`src`从选定选项值中获取的值创建一个 iFrame，并将其附加到某处（如 div#loadContainer）：

```
function loadFrame(comboBox)
{
    var frame = document.createElement("iframe");
    frame.src = comboBox.options[comboBox.selectedIndex].value;
    var container = document.getElementById("loadContainer");
    container.innerHTML = "";
    container.appendChild(frame);
} 
```

​看[这里的例子](http://jsfiddle.net/HXwDT/)

如果您能够使用 jQuery（或其他框架，您可以`onchange`通过 JS 以这种方式绑定到 select 事件）：

```
var el = $("#OSList");
el.change(function() {
    var frame = document.createElement("iframe");
    frame.src = el.val();
    $("#loadContainer").empty().append(frame)
}); 
```

[此处](http://jsfiddle.net/HXwDT/2/)举例 ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T09:58:39.793

```
 <html>
            <head>
            <script type="text/javascript">
            function loadFrame()
            {
            var select_value=document.getElementById("platform").value;

            window.location =select_value;
            }
            </script>
            </head>
            <body>

            <form>
                Platform:
                <select id='platform' onchange="loadFrame()">
                    <option value="andriod.html">Android</option>
                    <option value="j2me.html">J2ME</option>
                    <option value="windows.html">Windows</option>
                </select>
            </form>

            </body>
            </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T10:09:01.460

您可以在页面中添加一个空框架并直接更改其 src，无需检索 html 内容，如下所示：

```
<html>
        <head>
        <script type="text/javascript">
        function loadFrame(comboBox)
         {
        var frame = window.frames['platformFrame'],
            src = comboBox.options[comboBox.selectedIndex].value;
            frame.window.location.href = src; //use window.location to avoid browser capability.
        }
        </script>
        </head>
        <body>

        <form>
            Platform:
            <select id='platform' onchange="loadFrame()">
                <option value="andriod.html">Android</option>
                <option value="j2me.html">J2ME</option>
                <option value="windows.html">Windows</option>
            </select>
        </form>
        <iframe src="" id="platformFrame"></iframe>
        </body>
        </html> 
```

# linux - Linux 内核导出符号

> ID：10070861
> 
> 赞同：15
> 
> 时间：2012-04-09T08:45:31.233
> 
> 标签：linux, linux-kernel

我想查看 Linux 内核导出的符号列表。所以我发出命令，

```
# cat /proc/kallsyms
0000000000000000 D per_cpu__irq_stack_union
0000000000000000 D __per_cpu_start
0000000000004000 D per_cpu__gdt_page
0000000000005000 d per_cpu__exception_stacks
000000000000b000 d per_cpu__idt_desc
000000000000b010 d per_cpu__xen_cr0_value
000000000000b018 D per_cpu__xen_vcpu
000000000000b020 D per_cpu__xen_vcpu_info
000000000000b060 d per_cpu__mc_buffer
000000000000c570 D per_cpu__xen_mc_irq_flags 
```

这是我得到的输出。我的问题是，这个输出中每个字段的含义是什么？第一个字段看起来像地址，我没有得到第二个字段的任何参考。有人可以向我解释第二个字段中值 D,d,t,T,s 的含义吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-09T08:53:25.043

第二列中的字符与它们在输出中的含义相同`nm`：

> `D` `d`该符号位于初始化数据部分中。
> 
> `S` `s`该符号位于小对象的未初始化数据部分中。
> 
> `T` `t`该符号位于文本（代码）部分。

大写符号是全局/导出的；小写是本地未导出的符号。

# php - 如何在循环外移动 While 循环值

> ID：10070862
> 
> 赞同：0
> 
> 时间：2012-04-09T08:45:34.547
> 
> 标签：php, arrays, while-loop

我有一个更复杂的问题要解决，但这一切都归结为从 while 循环中获取 mysql_fetch_array 值，因此我可以在其他地方使用这些值进行比较。

例如：

```
 $result = mysql_query("SELECT name FROM Names");
 while ($data = mysql_fetch_array($result))
 {
   $val = $data['name'];
   //let's say there are 5 names here//
   $array1 = array($val);
 }

 //now, I would like to use the five names outside of the loop// 
```

我不明白如何从这个循环中得到所有五个名字。我将它们放在一个数组中，但是当我从循环外部打印数组时，我得到的只是最后一条记录。如果我从循环中打印数组，我会得到所有记录。

是否可以将值存储在循环中，将它们从循环中移出，然后在其他地方使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T08:47:55.300

你可以这样做：

```
 $result = mysql_query("SELECT name FROM Names");
 $dataset = array();
 while ($data = mysql_fetch_array($result))
 {
   $dataset[] = $data;
 } 
```

`$dataset`然后你可以在循环外自由使用......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T08:48:09.747

```
$array1 = array();
$result = mysql_query("SELECT name FROM Names");
while ($data = mysql_fetch_array($result)){
 $val = $data['name'];
  //let's say there are 5 names here//
  $array1[] = $val;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T08:47:30.670

您`$array1`每次都在循环中设置。您需要添加`$val`到数组中，而不是将数组设置为`$val`.

```
$result = mysql_query("SELECT name FROM Names");
while ($data = mysql_fetch_array($result))
{
    $val = $data['name'];
    $array1[] = array($val);
} 
```

注意`$array1[] =`代替`$array1 =`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T08:47:46.290

您正在覆盖数组。每次循环执行它都会覆盖该值，因此您只能获得最后一个值。尝试

```
$result = mysql_query("SELECT name FROM Names");
$i = 0;
while ($data = mysql_fetch_array($result))
$val = $data['name'];
$array1[$i] = $val;
$i++;
} 
```

# c# - C#程序占用过多的CPU？

> ID：10070869
> 
> 赞同：2
> 
> 时间：2012-04-09T08:46:26.647
> 
> 标签：c#, performance, loops, timer, cpu

我有一个程序在 3 个独立的计时器之间不断地启动。

我的应用程序的主线程有一个 while 循环，它不断检查全局变量是否已设置为 true，如果已设置，它将停止一个计时器并启动另外两个计时器 - 一个连续，另一个自动停止它，如果它不是t 命令以任何理由停止。

此 while 循环的条件为 (1==1)，因此它永远运行。

在任务管理器 (XP) 中，我看到我的程序在或多或少空闲的系统上使用了 50% 的 cpu。

有没有办法通过降低while循环的速度或其他方式来减少这个数字？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T08:49:52.647

> 有没有办法通过降低while循环的速度或其他方式来减少这个数字？

只是停止做一个繁忙的循环。有更好的方法来协调线程之间的事件。考虑使用`Monitor.Wait`/`Pulse`或`AutoResetEvent`/ `ManualResetEvent`。基本上，设置全局变量的线程应该发出信号表明它已经这样做了。或者，如果您的主线程不做*任何*其他事情，为什么不添加一个普通的 C# 事件，以便每当更改变量时，都会引发事件并采取适当的操作？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T08:50:31.753

您的程序执行[忙等待](http://en.wikipedia.org/wiki/Busy_waiting)，这是一种不好的做法。您应该更改逻辑，以便阻止某种同步原语（也称为[等待句柄](http://msdn.microsoft.com/en-us/library/system.threading.waithandle%28v=vs.100%29.aspx)）而不是循环。

阻塞等待句柄不是 UI 线程的选项，因此您必须总共创建三个线程并实现如下方案：

1.  UI 线程根本不关心其他线程要做什么。没有循环，没有睡眠，没有阻塞。
2.  新的“控制器”线程将启动现有的“工作者”线程，然后立即阻塞（例如，在未发出信号的事件上）。它将保持在这种状态，不消耗 CPU，直到事件发出信号（即“worker”完成）。
3.  “工人”线程将运行它的过程，然后发出事件信号。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-09T08:50:26.007

> 有没有办法通过降低while循环的速度或其他方式来减少这个数字？

是的，您可以插入对`Thread.Sleep(n)`. 粒度约为 20 毫秒。

但更好的选择是使用 Waithandle。
您的主线程将在句柄上等待，并且计时器代码的结束将发出信号唤醒它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T08:50:01.177

您需要让威胁休眠给定的毫秒数。查看 Thread.sleep() 函数并将其放在您的 while 循环中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-09T08:50:19.747

减慢这样一个循环的最简单方法是添加一个 System.Threading.Thread.Sleep(100); 对于每次迭代，该进程将休眠 100 毫秒，并且不再使用 50% 的 CPU。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-09T08:51:35.673

您可以使用 Threads 而不是 Timer，它比 Thread 更昂贵。或者请检查您在开始另一个之前停止的时间的线程状态。您可以通过减少代码逻辑来提高性能。

希望这会帮助你。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-24T20:00:15.263

虽然这里的答案每个人都没有错，但它们并没有真正解决很多关于`while(true)`循环的问题，这就是事实`while(1==1)`。

首先，即使循环在你的应用程序使用的整个过程中都在运行，你也会想在某个时候停止它，比如当用户退出你的应用程序时，因为如果你有一个带有恒定循环的线程，即使用户关闭 UI 窗口，进程将一直保持到线程退出（从不在 while true 循环中）或直到用户变得明智并从任务管理器中关闭它。

您可以通过在 while 条件检查中放置一个真正的条件来解决这个问题，该检查引用循环外的可访问属性。

例子：

```
private bool RequestExit = false;
private Thread MyLoopThread;
private void MyLoop()
{
  while (!RequestExit)
  {
    //Do stuff!
    Sleep(1);
  }
}
public void StartLoop()
{
  RequestExit = false;
  MyLoopThread = new Thread(MyLoop);
  MyLoopThread.Start();
}
public void StopLoop()
{
  RequestExit = true;
} 
```

那是最基本的，甚至没有避免双重启动或双重关闭事件。

一个更简洁的方法是设置一个你想要汇集的任意间隔，10ms 左右应该对几乎任何实时事件都很好，并触发一个在该间隔触发的方法。

```
private Timer DoStuffTimer;
private void DoStuffMethod(object obj = null)
{
  //Do stuff!
}
public void StartLoop()
{
  DoStuffTimer = new Timer(DoStuffMethod,null,10,10);
}
public void StopLoop()
{
  DoStuffTimer.Dispose();
} 
```

# svn - 如何使用ant获取最后一个svn提交的用户名？

> ID：10070871
> 
> 赞同：3
> 
> 时间：2012-04-09T08:46:29.347
> 
> 标签：svn, ant

我想使用 Ant 获取 svn 存储库的最新提交的用户名。

我怎样才能做到这一点尽可能跨平台？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T06:39:56.853

所以，这里是“svnant”的例子：

```
<path id="devlibs.path">
    <fileset dir="devlib" includes="**/*.jar" />
</path>

<typedef resource="org/tigris/subversion/svnant/svnantlib.xml" classpathref="devlibs.path" />

<svnSetting
        id="svn.settings"
        svnkit="false"
        javahl="false"
        username="${svn.username}"
        password="${svn.password}" />

<target name="get-svn-author">
    <svn refid="svn.settings">
        <singleinfo target="${svn.repo.url}" property="author.result" request="author" />
    </svn>

    <echo message="Author of last commit: ${author.result}" />
</target> 
```

您应该将“svnant.jar”和“svnClientAdapter.jar”放到“devlibs.path”标识的路径中。以及“javahl”或“svnkit”所需的其他库到您的“${ANT_HOME}/lib”。

如果您有 1.6 格式的 SVN 存储库，您可以使用“svnkit”（在“svnSetting”-block 中设置为“true”）。因为“svnkit”是一个纯 Java 工具包，所以最好在您需要跨平台解决方案时使用。如果您已经切换到 1.7，那么我建议使用 SVN 命令行客户端（在我的示例中为命令行客户端配置了“svnSetting”）。查看[此页面](http://www.sliksvn.com/en/download/)(Slik SVN) 以获取有关在何处查找以及如何安装不同 SVN 命令行客户端的信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T22:25:56.967

以防万一您更喜欢不使用可选任务的解决方案，以下是如何做到这一点的要点：

```
<target name="get-svn-author">
    <tempfile property="svninfo.result"/>
    <exec executable="svn" output="${svninfo.result}">
        <arg value="info"/>
        <arg value="${svn.repo.url}"/>
    </exec>
    <tempfile property="svnauthor.result"/>
    <copy file="${svninfo.result}" tofile="${svnauthor.result}">
        <filterchain>
            <linecontainsregexp>
                <regexp pattern="Last Changed Author:*"/>
            </linecontainsregexp>
        </filterchain>
    </copy>
    <concat>
        <filelist files="${svnauthor.result}"/>
    </concat>
    <delete file="${svninfo.result}"/>
    <delete file="${svnauthor.result}"/>
</target> 
```

一个问题是您编写/删除可能并不总是可能的文件（即，如果您没有权限）。另一个问题是必须安装一个 svn 客户端（可以通过`svn`命令行中的命令运行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T22:38:41.573

我以为我已经发布了答案。这或多或少是 malenkiy_scot 的[回答](https://stackoverflow.com/a/10166690/368630)。但是，我在命令上使用了`--xml`标志。`svn info`这会将`svn info`命令的输出放在 xml 输出中。然后我就可以使用该`<xmlproperty>`任务来阅读它。

通过使用资源集合，我还避免了将输出保存到稍后必须删除的文件中的问题。

```
<project>
    <property name="svn.url" value="http://svn.foo.com/src/repos"/>
    <exec executable="svn"
        outputproperty="svn.info">
        <arg value="info"/>
        <arg value="--xml"/>
        <arg value="${svn.url}"/>
    </exec>
    <xmlproperty prefix="svn">
        <propertyresource name="svn.info"/>
    </xmlproperty>
    <echo message="Last committer = ${svn.info.entry.commit.author}"/>
</project> 
```

我试图看看是否可以将`<exec>`任务本身用作*资源*。这样，我什至不必将`svn info`命令的输出保存到属性中。但很可惜，我不知道该怎么做。

* * *

最*平台中立*的方式是 Vadim Ponomarev 的[回答](https://stackoverflow.com/a/10151619/368630)。这就是我打算回答这个问题的方式。

但是，我会在`devlib`目录中包含 svnkit jar 文件，并强制使用`svnkit`. 这确保无论安装哪个 Subversion 客户端都能正常工作。即使没有安装 Subversion 客户端，它也可以工作。只需将所需的 jars 保存在项目的目录中即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-28T14:23:30.010

在可执行外壳中已经有一个很好的解决方案。该解决方案的优点是您可以使用脚本作为构建阶段的一部分，而不是在构建后阶段。这将在下面解释。见[https://stackoverflow.com/a/11837662/5842403](https://stackoverflow.com/a/11837662/5842403)

事实上，您可以在构建阶段完成之前通过读取/解析构建文件夹中的 ../builds/$BUILD_NUMBER/changelog.xml 文件来访问信息。该文件是在 SVN 提交触发时创建的，而不是在构建或 post_build 阶段结束时创建的。这意味着，您可以在同一作业的构建阶段开始时使用脚本对其进行解析，并将数据插入环境变量中。

# objective-c - drawRect 查看空数组

> ID：10070872
> 
> 赞同：2
> 
> 时间：2012-04-09T08:46:57.977
> 
> 标签：objective-c, ios, nsmutablearray, drawrect

drawtestViewController.m 中的按钮链接到 ChalkBoard.m 中的 pushPoint 动作。它用 CGpoint 对象填充 pointArray。这个数组到处都是对象，除非从 drawRect 中查看。似乎从drawRect我以某种方式引用原始数组的空副本，但我找不到任何错误......

[我已经在http://dl.dropbox.com/u/42099382/drawtest.zip](http://dl.dropbox.com/u/42099382/drawtest.zip)上传了整个项目

* * *

drawtestViewController.m 中的按钮操作

```
- (IBAction)myDo {
   NSLog(@"-Button was pressed");    
  [self.board pushPoint:CGPointMake(100, 100 )];
  [self.board pushPoint:CGPointMake(10, 100 )];
  [self.graphicView setNeedsDisplay];
} 
```

* * *

```
//  ChalkBoard.h
#import <UIKit/UIKit.h>

@interface ChalkBoard : UIView
-(void)pushPoint:(CGPoint)point;
@property (nonatomic,retain) NSMutableArray *pointArray;
@end 
```

* * *

```
//ChalkBoard.m
#import "ChalkBoard.h"

@implementation ChalkBoard
@synthesize pointArray;

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
    if (self) {
        self.backgroundColor = [UIColor blackColor];
    }
    return self;
}

-(NSMutableArray *)pointArray 
{
    if(pointArray == nil) pointArray = [[NSMutableArray alloc]initWithCapacity:10];
    return pointArray;
}

-(void)pushPoint:(CGPoint)point{
    // this is called from drawtestViewController.m by button press
    // in here the array is full and growing by each button press
    [self.pointArray addObject:[NSValue valueWithCGPoint:point]];
   NSLog(@"-pushPoint executed, size is %u, array: %@",[self.pointArray count], pointArray);
}

- (void)drawRect:(CGRect)rect{
// here array is always empty
NSLog(@"-DrawRect executed, size is %u, array: %@",[pointArray count], pointArray);
    if ([pointArray count] >1){   
       ... some irrelevant code
    }
}

@end 
```

* * *

```
NSLog output

2012-04-09 11:34:39.145 drawtest[5260:f803] -DrawRect executed, size is 0, array: (null)
2012-04-09 11:34:41.261 drawtest[5260:f803] -Button was pressed
2012-04-09 11:34:41.262 drawtest[5260:f803] -pushPoint executed, size is 1, array: (
    "NSPoint: {100, 100}"
)
2012-04-09 11:34:41.264 drawtest[5260:f803] -pushPoint executed, size is 2, array: (
    "NSPoint: {100, 100}",
    "NSPoint: {10, 100}"
)
2012-04-09 11:34:41.266 drawtest[5260:f803] -DrawRect executed, size is 0, array: (null)
2012-04-09 11:34:42.825 drawtest[5260:f803] -Button was pressed
2012-04-09 11:34:42.826 drawtest[5260:f803] -pushPoint executed, size is 3, array: (
    "NSPoint: {100, 100}",
    "NSPoint: {10, 100}",
    "NSPoint: {100, 100}"
)
2012-04-09 11:34:42.827 drawtest[5260:f803] -pushPoint executed, size is 4, array: (
    "NSPoint: {100, 100}",
    "NSPoint: {10, 100}",
    "NSPoint: {100, 100}",
    "NSPoint: {10, 100}"
)
2012-04-09 11:34:42.829 drawtest[5260:f803] -DrawRect executed, size is 0, array: (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:17:52.640

问题实际上不在你的`Chalkboard`课堂上，而是在你的`drawtestViewcontroller`. 您的`myDo`操作将点添加到`self.board`，但将`setNeedsDisplay`消息发送到`self.graphicView`，这也是`Chalkboard`您添加点的但不一样的。

因此，您看到的第二条日志消息实际上来自一个完全不同的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:02:11.887

替换`pointArray`为方法中的`self.pointArray`任何地方`drawRect`。当您使用时`pointArray`，变量按原样使用（没有 getter 方法调用）。当您使用时，将使用`self.pointArray`getter 方法。

我还将建议您将 getter 和 setter 留给编译器以在 init 方法中生成和初始化您的 pointArray。

# themes - 如何在 LWUIT 中自定义带有背景颜色的表头和表行

> ID：10070874
> 
> 赞同：0
> 
> 时间：2012-04-09T08:47:06.383
> 
> 标签：themes, lwuit, tabular

我创建了一个包含三列和一些行的默认表格模型的表格，我想要做的是使用背景颜色自定义标题的样式，并使用与标题不同的颜色自定义每行的背景颜色颜色。

另外我希望能够将每列的大小设置为不同我希望一列大于其他两列。

请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:26:29.590

分别设置 TableHeader 和 TableCell 的样式。

如果您想要比派生表更多的控制权并覆盖：

```
protected Component createCell(Object value, int row, int column, boolean editable) 
```

# c# - WCF RESTFul 服务 - 404 与 2 个服务未找到端点

> ID：10070875
> 
> 赞同：3
> 
> 时间：2012-04-09T08:47:16.380
> 
> 标签：c#, wcf, web-services, rest

我有两个 WCF 服务 Exchange1.svc 和 Exchange2.svc 都设置为 RESTful JSON 消耗品。Exchange1.svc 工作正常，但当我尝试发布到 Exchange2.svc 时，我收到 Endpoint not found 消息。

我究竟做错了什么？

我的 IExchange2 界面是：

```
[ServiceContract]
public interface IExchange2
{
    [System.ServiceModel.OperationContract(Name = "InsertReading")]
    [WebInvoke(UriTemplate = "/InsertReading?memberID={memberID}", Method = "POST", ResponseFormat = WebMessageFormat.Json)]
    void InsertReading(string memberID);
} 
```

我要访问的 URL 是：[http://localhost:49701/Exchange2.svc/DiaInsertReading?memberID=6519548](http://localhost:49701/Exchange2.svc/DiaInsertReading?memberID=6519548)

我的配置是：

```
<system.serviceModel>
<behaviors>
    <endpointBehaviors>
        <behavior name="MyNamespace.Exchange1Behavior">
            <webHttp/>
        </behavior>
        <behavior name="MyNamespace.Exchange2Behavior">
            <webHttp/>
        </behavior>             
    </endpointBehaviors>
</behaviors>
<services>
    <service name="MyNamespace.Exchange1">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="MyNamespace.Exchange1Behavior" contract="MyNamespace.IExchange1" />
    </service>
    <service name="MyNamespace.Exchange2">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="MyNamespace.Exchange2Behavior" contract="MyNamespace.IExchange2" />
    </service></services></system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:30:23.710

我已经编辑了我的帖子，因为答案没有帮助。由于您使用 svc 在 IIS 中托管，因此您不需要像我在之前的回答中所说的那样在绑定中设置地址。基地址将是您服务器的位置。例如：`http://localhost:49701/Exchange2.svc`。如果您点击此地址，您应该会访问 WCF 服务网页。

由于您使用的是 POST 方法，因此您可以在请求正文中发送数据。如果您安装了提琴手，则可以在作曲家中设置发布方法和地址，`http://localhost:49701/Exchange2.svc/InsertReading`如果这是您的服务地址。在请求正文的正文中，您将`{ memberID:"123" }`change 123 设置为您想要发送到服务的任何值。

或者您可以在地址中发送数据，例如：`http://localhost:49701/Exchange2.svc/InsertReading?memberID=123`

如果您现在执行您的请求，它应该返回响应 200 OK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:17:56.397

在**web.config**文件中指定您的端点

```
<service name="MyNamespace.Exchange2">
<endpoint address="Exchange2" binding="webHttpBinding" behaviorConfiguration="MyNamespace.Exchange2Behavior" contract="MyNamespace.IExchange2" /> 
```

然后，将此端点添加到您的 URL 中：

```
http://localhost:49071/Exchange2/DiaInsertReading?memberID=6519548 
```

# ruby-on-rails-3.1 - 在“image_tag nil”上引发“ActionView::Template::Error（未预编译）”

> ID：10070880
> 
> 赞同：9
> 
> 时间：2012-04-09T08:47:33.397
> 
> 标签：ruby-on-rails-3.1, asset-pipeline

如果我没有正确处理视图，生产环境显示 500。

`<%= image_tag post.user.image_url %>`

这可能是

`<%= image_tag post.user.image_url if post.user && post.user.image_url %>`

但我有点粗心，几次忘记了这个问题。

我怎样才能防止这种情况？如何`<%= image_tag nil %>`在生产环境中使用而不提高500？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T09:11:06.197

`image_tag`必须有来源，Rails 对此无能为力，但会引发异常。

你可以写一个这样的助手：

```
module ApplicationHelper
  def safe_image_tag(source, options = {})
    source ||= "default.jpg"
    image_tag(source, options)
  end
end 
```

或者`nil`直接在视图中检查。无论如何，您必须做*一些事情*来防止错误。

# php - 带有 TCPDF 的额外空白页

> ID：10070883
> 
> 赞同：1
> 
> 时间：2012-04-09T08:47:47.960
> 
> 标签：php, html, tcpdf

我正在使用 TCPDF 从 mysql 查询中转换 php 生成的页面，该查询对每条记录使用 div 和 style="page-break-after:always"，这些记录的长度会有所不同。

当我使用下面的代码将它们转换为 pdf 时，最后会得到一个额外的空白页？当我打印一条没有 style="page-break-after:always" 的记录时，没有空白页吗？

```
<?php
error_reporting(0); //Don't show errors in the PDF 
ob_clean(); //Clear any previous output 
ob_start(); //Start new output buffer 
require_once('../pdf/config/lang/eng.php');
require_once('../pdf/tcpdf.php');
class MYPDF extends TCPDF {
public function Header() {
}
public function Footer() {
    $this->SetY(-50);
    $this->SetFont('helvetica', 'I', 8);
    $this->Cell(0, 5, 'Some text',0, 1, 'L', 0, '', 0, false, 'T', 'T');
$this->Cell(0, 5, 'Some text',0, 1, 'L', 0, '', 0, false, 'T', 'T');
    $this->SetFont('helvetica', 'I', 12);
$this->Cell(0, 15, 'Signed_____________________________________________',0, 1, 'L',                0, '', 0, false, 'T', 'B');
$this->Cell(0, 15, 'Print Name_____________________________________________ Date________________________',0, 1, 'L', 0, '', 0, false, 'T', 'B');    
}
}
$pdf = new MYPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('Author');
$pdf->SetTitle('Delivery Notes');
$pdf->SetSubject('Delivery Notes');
$pdf->SetKeywords('TCPDF, PDF,');
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);
$pdf->SetMargins(10, 10, 10);
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);
$pdf->setLanguageArray($l);
$pdf->SetFont('helvetica', '', 10);
$pdf->AddPage('P', 'LETTER');
$include=$_POST['include'];
include($include); 
$html = ob_get_contents();
ob_clean();
$html = preg_replace("/\s\s+/", '', $html); //Strip excess whitespace 
$pdf->writeHTML($html, true, false, true, false, '');
$pdf->lastPage();
$pdf->Output('delivery.pdf', 'I'); 
```

先感谢您

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:51:21.267

尝试使用

`.element:last-child {page-break-after:auto;}`

其中“元素”是您的 CSS 选择器。

# ruby-on-rails - 处理错误验证时何时使用 render 与 redirect_to

> ID：10070886
> 
> 赞同：1
> 
> 时间：2012-04-09T08:48:02.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个相当复杂的视图，它有多个表单、对这些表单的大量验证、分页和其他功能。当验证失败时，我喜欢使用渲染，因为这样您就可以更具体地了解表单中发生的错误。但是，当我使用渲染时，会出现不同的编译器错误，例如“[]:Array 的未定义方法 `total_pages'”和“未定义模型名称”。这是我必须使用 redirect_to 的情况，还是以某种方式解决在呈现视图时出现的错误是否可行。非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T09:13:21.217

你应该从他们的角度来把握事物。

为什么`render`使用而不是`redirect`：

*   当你使用时`render`，你传递实例化的对象

*   这个对象，新创建或更新，接收了一些参数

*   尝试保存对象时，会触发验证，如果不成功，则会将错误添加到当前实例

*   所以你**在内存**中的对象包含验证错误。

但是当您使用重定向时，您会使用一个新堆栈重新启动，该堆栈对内存中的前一个对象一无所知，不可能有任何魔法：

*   要么保存对象，您就可以从数据库中获取持久数据

*   或者如果它没有保存，你可以有一些你以前存储在会话中的信息

* * *

为了更接近地回答您的问题：在使用渲染之前，您必须实例化页面所需的所有对象。

如果缺少预期的实例变量，这只是逻辑视图失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:15:37.833

首先，这些不是编译器错误——它的运行时错误。
其次，您应该检查控制器中的数据以确保其被正确提供以进行渲染，或者在视图中执行一些条件块以应对这种不同的数据结构。

最后，`redirect_to`这只是一种移动用户的技术，它可以在这里使用，但您仍然需要处理这些错误，即使在重定向到的页面中......

高温高压

# c# - 用于 C# 开发的 NoSQL FREE 替代品（ravendb 的替代品）

> ID：10070887
> 
> 赞同：12
> 
> 时间：2012-04-09T08:48:09.210
> 
> 标签：c#, licensing, nosql

我发现了 raven-db，我很喜欢它，但后来我看到了许可证…… GPL 或 Pay

所以我正在寻找免费的闭源 C# 开发 raven-db 替代品。似乎 MongoDB 和 Berkley 也是 GPL。

找到嵌入式解决方案对我来说要好得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T09:31:18.890

如果我对您的理解正确，那么您可以[安全地使用 MongoDB](http://blog.mongodb.org/post/103832439/the-agpl)及其双核/驱动程序许可证模型。

还有一件事，AFAIK，除非您的代码发布到“世界”，否则您可以做任何您想做的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T09:01:23.190

与 RavenDB 和 MongoDB 一样，**CouchDB**是一个带有 REST Api 的*文档存储 noSQL 数据库*（因此您可以使用任何语言）。

但 CouchDB 在 Apache 2.0 下，可用于商业/封闭项目

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-02T13:36:23.853

[iBoxDB.net](https://iboxdb.codeplex.com/)是一个轻量级的可嵌入nosql 数据库，具有事务支持。它可以嵌入网络应用程序、windows phone、mono 应用程序、unity3d、node.js

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T11:50:17.517

[https://github.com/mcintyre321/PieDb](https://github.com/mcintyre321/PieDb)是我写的一个非常基本的 MIT 许可的嵌入式文档 db wot

它

*   使用 json.net 序列化文档将对象写入 app_data
*   使用 Lucene.Net.Linq 提供基本的 IQueryable 支持
*   乐观并发
*   无需配置

让其他一些开发人员支持它会很好，因为它只有大约一个周末的工作时间，但它适用于作为 RavenDb 替代品的简单案例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T09:02:25.270

成为 GPL 并不意味着您不能在封闭源代码项目中使用它，除非您打算修改源代码。

编辑：更清楚一点 - 这里的关键是任何更改的分布。您可以使用 GPL 软件并在内部做任何您喜欢的事情，但您不能在不提供源代码的情况下分发这些更改的二进制文件（除非您已与版权所有者达成协议）。

我对 raven-db 一无所知，但我想它可以归结为以下场景之一：

1.  您的应用程序直接与源接口。如果您的应用程序在没有 GPL 项目的情况下无法构建，那么您的应用程序必须获得 GPL 许可，或者您需要获得版权所有者的许可。LGPL 有所不同，但您在问题中陈述了 GPL。
2.  您的应用程序可以在没有 GPL 软件的情况下构建，但需要它来运行。这就像我在 MySQL 之上构建一个应用程序，并指导客户自己配置一个 MySQL 实例。

# ios - 突然无法在 iPhone 模拟器上运行应用程序

> ID：10070891
> 
> 赞同：2
> 
> 时间：2012-04-09T08:48:25.887
> 
> 标签：ios, xcode4, ios-simulator

我的应用程序在 iPhone 模拟器上运行良好。我遇到了一个问题（在这里讨论：[间歇性错误访问核心数据模型/联系人数据库](https://stackoverflow.com/questions/9923882/intermittent-error-accessing-core-data-model-contacts-database)），现在突然之间，它不会在 iPhone 模拟器上构建和运行。我有以下错误：

```
Couldn't register com.yourcompany.XXX with the bootstrap server. Error: unknown error code.
This generally means that another instance of this process was already running or is hung in the debugger.(lldb) 
```

有什么想法吗？我已经尝试完全关闭和重置 iPS 以及删除应用程序并重新安装，但无济于事。

很郁闷！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:37:12.800

重置您的 iphone 模拟器并清理您的 xcode 项目。

类型

```
apple-alt-shift-k 
```

在 xcode 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:41:00.190

这对我来说经常发生，尤其是在模拟应用程序频繁重启期间。当模拟应用程序关闭并且新应用程序正在启动时，我将其追踪到（至少有时）竞争条件或死锁。

1.  退出模拟器通常有效
2.  如果这没有帮助，请重新启动 Xcode
3.  有时进程可能会持续存在，**重新启动 Mac**通常是最快的恢复方式（尽管`killall`如果重新启动确实不方便，巧妙地使用该命令可以挽救这种情况）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T08:53:08.543

退出 iPhone 模拟器并再次运行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T09:36:19.480

您正在使用核心数据。因此，您可能更改了 dataModel 并且更改了`NSManagedObject`类。所以它会崩溃，直到您从模拟器中删除应用程序并再次运行您的项目..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T08:59:38.657

退出模拟器和 xcode。还从模拟器中删除应用程序....如果它不起作用，请转到目标设置并更改捆绑标识符中的应用程序名称之类的内容。它应该可以工作

# iphone - 导航栏图像隐藏自定义导航栏按钮

> ID：10070893
> 
> 赞同：1
> 
> 时间：2012-04-09T08:48:37.697
> 
> 标签：iphone, ios, uinavigationitem, navigationcontroller

我可以将图像提供给导航栏，还可以更改导航栏按钮项的图像。出于某种原因，我猜导航栏图像与导航栏按钮图像重叠。当我单击左侧的导航栏图像时，导航栏按钮正常工作，但它没有显示在导航栏图像上。这是代码；

```
UIImage *imagebar = [UIImage imageNamed: @"schedule-strip.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage: imagebar];
imageView.frame = CGRectMake(0, 0, 190, 44);
imageView.contentMode = UIViewContentModeScaleAspectFill;
self.navigationItem.titleView = imageView;

UIImage* image = [UIImage imageNamed:@"back-icon.png"];
CGRect frame = CGRectMake(0, 0, image.size.width, image.size.height);
UIButton* someButton = [[UIButton alloc] initWithFrame:frame];
[someButton setBackgroundImage:image forState:UIControlStateNormal];
[someButton setShowsTouchWhenHighlighted:YES];
[someButton addTarget:self action:@selector(backToMore) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem* someBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:someButton];
[self.navigationItem setLeftBarButtonItem:someBarButtonItem];

[someBarButtonItem release];
[someButton release]; 
```

帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:40:44.017

**使用代码[imageView addsubView someButton]；**

我希望现在您会看到该按钮。实际上，您正在将左栏按钮项添加到默认导航栏，并且当您创建某个按钮时，它不会添加到与导航栏重叠的 imageview 上。因此，通过单击该区域它正在工作但按钮不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:01:20.743

Ketan 你检查了图像吗？您的项目中是否存在图像？为什么要为导航栏标题使用框架和内容模式属性？愿此链接对您有所帮助

[http://iosdevelopertips.com/user-interface/ios-5-customize-uinavigationbar-and-uibarbuttonitem-with-appearance-api.html](http://iosdevelopertips.com/user-interface/ios-5-customize-uinavigationbar-and-uibarbuttonitem-with-appearance-api.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:07:17.273

```
- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed: @"TopBg.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
} 
```

扩展 @interface MyToolBar : UIToolbar 并创建 MyToolBar 的对象。之后为导航栏制作自定义按钮。享受并喜欢它

# java - 带有教程的示例企业标准 Spring 应用程序

> ID：10070894
> 
> 赞同：0
> 
> 时间：2012-04-09T08:48:46.130
> 
> 标签：java, spring, jakarta-ee, spring-mvc

有人可以帮我找出一个企业标准的spring应用程序和解释教程吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:47:26.097

您应该阐明您在设计模式和 Web 开发方面的经验水平。通常，Java EE 开发人员使用 Spring 并且已经具备设计模式的先验知识。如果您不了解设计模式，可能会使学习 Spring 变得更加困难，在这种情况下，您应该从学习设计模式开始。

如果您需要 Spring 示例的快速教程，我建议[您访问 mkyoung 的](http://www.mkyong.com/tutorials/spring-tutorials/)网站。如果您需要一本书的简短介绍，我建议您使用[Just Spring](https://rads.stackoverflow.com/amzn/click/com/1449306403)，它只有 50 多页，而且很容易阅读。对于更广泛的 Spring-MVC/Hibernate 书籍，我发现[Spring Persistence with Hibernate](https://rads.stackoverflow.com/amzn/click/com/1430226323)真的很有帮助，因为您可以从他们的网站下载整个 Spring webapp 的源代码并获得代码的实践经验。即使你不买书，我也建议你下载源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T10:58:41.580

这里有一些视频可以让你一步一步地编写 Spring 应用程序......

[http://www.youtube.com/watch?v=GB8k2-Egfv0&feature=relmfu](http://www.youtube.com/watch?v=GB8k2-Egfv0&feature=relmfu)

# ios - runloop 会阻塞 GCD 吗？

> ID：10070895
> 
> 赞同：1
> 
> 时间：2012-04-09T08:48:47.023
> 
> 标签：ios, objective-c, grand-central-dispatch

我在线程 A 上添加了一个计时器并启动了 runloop，然后我在线程 A 上 dispatch_async 一个 Method_Foo，而 Method_Foo 没有运行。我的猜测是调度方法将被该线程上的 runLoop 阻塞，但我不确定。这是真的还是我错过了什么？

更多细节：

在网络层中，我使用委托来通知网络状态，*_delegateQueue*来自全局实例，比如说**Thread_A**。而这个**socket:didConnectToHost:port:**方法在 Thread_B 中运行。

```
- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(uint16_t)port
{
  // called when connected to server
  ...
  dispatch_async(_delegateQueue, ^{
    // this runs in Thread_A to notify network status
    [theDelegate socketConnection:self didChangeStatus:YES];
  });
  ...
} 
```

然后在上层有一个类在**Thread_A**与服务器断开连接后运行**_startReconnectingProcess**方法。为了使计时器工作，我在 Thread_A 中启动**runLoop**。

 ****```
// runs in Thread_A to start reconnection process
- (void)_startReconnectingProcess
{
  if (self.reconnectionTimer || _forceDisconnection == YES) return;

  self.reconnectionTimer = [NSTimer scheduledTimerWithTimeInterval:kReconnectionTimeInterval target:self selector:@selector(_reconnect) userInfo:nil repeats:YES];
  NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
  [runLoop addTimer:self.reconnectionTimer forMode:NSDefaultRunLoopMode];
  // run the runLoop in Thread_A
  [runLoop run];
  // after the runLoop start, the dispatch_async method in the network layer doesn't work

  self.reconnectionCount = 0;
} 
```

所以发生的事情是，**当计时器启动时，方法*[theDelegate socketConnection:self didChangeStatus:YES]*永远不会被调用，这是应该的。******

# ruby-on-rails - 尝试在 Ruby on RailsError 中显示显示管理员用户索引

> ID：10070904
> 
> 赞同：0
> 
> 时间：2012-04-09T08:49:15.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, error-handling

我已经完成了 Michael Hartl Ruby on Rails 教程（适用于 Rails 3）

我正在尝试在 localhost:3000/users/admins 的页面上获取所有管理员用户的列表，但是当我去的时候出现错误给页面管理员。我在页面 localhost:3000/users 下还有一个所有用户的列表
我得到的错误如下：

> ActiveRecord::RecordNotFound in UsersController#show
> 找不到用户 id=admins
> app/controllers/users_controller.rb:7:in 'show'
> 参数：
> {"id"=>"admins"}

在 Rails 控制台中，我可以使用该行调用用户管理属性`admins = User.where(:admin => "t")`

**users_controller.rb**

```
class UsersController < ApplicationController
  before_filter :authenticate, :only => [:index, :edit, :update, :destroy]
  before_filter :correct_user, :only => [:edit, :update]
  before_filter :admin_user,   :only => :destroy

  def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(:page => params[:page])
    @title = @user.name
    @admins = User.where(:admin => "t")
  end

  def new
    @user = User.new
    @title = "Sign up"
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to University Sports!"
      redirect_to @user
    else
      @title = "Sign up"
      render 'new'
    end
  end

  def edit
    @title = "Edit user"
  end

  def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated."
      redirect_to @user
    else
      @title = "Edit user"
      render 'edit'
    end
  end

  def index
    @users = User.paginate(:page => params[:page])
  end

  #def admins
  #  @users = User.admins
  #  render "users/index"
  #end

  def admins
    @admins=User.where(:admin => "t")
  end

  def destroy
    User.find(params[:id]).destroy
    flash[:success] = "User destroyed."
    redirect_to users_path
  end

  def following
    @title = "Following"
    @user = User.find(params[:id])
    @users = @user.following.paginate(:page => params[:page])
    render 'show_follow'
  end

  def followers
    @title = "Followers"
    @user = User.find(params[:id])
    @users = @user.followers.paginate(:page => params[:page])
    render 'show_follow'
  end  

  private

    def authenticate
      deny_access unless signed_in?
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end

    def admin_user
      redirect_to(root_path) unless current_user.admin?
    end

end 
```

**路由.rb**

```
FinalProject::Application.routes.draw do
  get "club/new"

  resources :users do
    member do
      get :following, :followers
    end
  end

  resources :users do
    collection do
      get :admins
    end
  end

  resources :sessions, :only => [:new, :create, :destroy]
  resources :microposts, :only => [:create, :destroy]
  resources :relationships, :only => [:create, :destroy]
  get "sessions/new"

  match '/signup',  :to => 'users#new'
  match '/signin',  :to => 'sessions#new'
  match '/signout', :to => 'sessions#destroy'

  match '/sign_up', :to => 'pages#sign_up'

  root :to => 'pages#home'

  resources :users
  match '/signup',  :to => 'users#new'

end 
```

**用户.rb**

```
class User < ActiveRecord::Base
    attr_accessor :password
    attr_accessible :name, :email, :password, :password_confirmation

    has_many :microposts, :dependent => :destroy
    has_many :relationships, :foreign_key => "follower_id", :dependent => :destroy
    has_many :following, :through => :relationships, :source => :followed   
    has_many :reverse_relationships, :foreign_key => "followed_id", :class_name => "Relationship", :dependent => :destroy
    has_many :followers, :through => :reverse_relationships, :source => :follower

    email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

    validates :name,    :presence   => true, :length  => { :maximum => 50 }
    validates :email,   :presence   => true, :format  => { :with => email_regex }, :uniqueness => { :case_sensitive => false }

    scope :admins, where(:admin => true)

    # Automatically create the virtual attribute 'password_confirmation'.
    validates :password, :presence  => true, :confirmation  => true, :length  => { :within => 6..40 }
        before_save :encrypt_password

  def has_password?(submitted_password)
    encrypted_password == encrypt(submitted_password)
  end

  def self.authenticate(email, submitted_password)
    user = find_by_email(email)
    return nil  if user.nil?
    return user if user.has_password?(submitted_password)
  end

  def self.authenticate_with_salt(id, cookie_salt)
    user = find_by_id(id)
    (user && user.salt == cookie_salt) ? user : nil
  end

  def following?(followed)
    relationships.find_by_followed_id(followed)
  end

  def follow!(followed)
    relationships.create!(:followed_id => followed.id)
  end

  def unfollow!(followed)
    relationships.find_by_followed_id(followed).destroy
  end

  def feed
    Micropost.from_users_followed_by(self)
  end

  private

    def encrypt_password
      self.salt = make_salt unless has_password?(password)
      self.encrypted_password = encrypt(password)
    end

    def encrypt(string)
      secure_hash("#{salt}--#{string}")
    end

    def make_salt
      secure_hash("#{Time.now.utc}--#{password}")
    end

    def secure_hash(string)
      Digest::SHA2.hexdigest(string)
    end

end 
```

**admins.html.erb**

```
<ul class="admins">
  <%= render @admins %>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:05:07.777

您可能必须在路由文件中为 /users/admins 创建手动路径。问题是 Rails 已经为 (GET)/users/ *** * 配置了路由直接路由到 UsersController#show，因为您通常可能希望在用户 ID 上执行显示（例如 /users/222）。

尝试

```
match '/users/admins',  :to => 'users#admins' 
```

# sql - SELECT * 不返回任何行，但 SELECT Count(*) 返回非零值

> ID：10070905
> 
> 赞同：4
> 
> 时间：2012-04-09T08:49:23.840
> 
> 标签：sql, sql-server, tsql

我运行以下查询：

```
a. select * from TABLE_TEMP 
```

查询成功执行，但未返回任何行。返回的数据集为空，包含 0 行。这个查询的执行计划可以从： [Execution Plan Query a](https://docs.google.com/open?id=0B4OsGTJgg3DhY0k4a3JnWjJRYnk2WVpGQWpsZVN0Zw)

```
b. select count(*) from TABLE_TEMP 
```

此查询也成功执行，但它返回一些有限值此查询的执行计划可以从以下位置下载： [执行计划查询 b](https://docs.google.com/open?id=0B4OsGTJgg3DhSjNIc3FOb1NTMlM1ZWRQZ1YydzJVQQ)

你能给我任何解决这个问题的建议吗？

PFB截图： ![奇怪的行为](../Images/adef859b2c8861f176ebec882b46ffba.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T22:30:58.123

You might be suffering from some sort of corruption in your database. Run `DBCC CHECKDB` (or `DBCC CHECKTABLE`) after familiarising yourself with [the documentation](http://msdn.microsoft.com/en-us/library/ms176064.aspx). In particular, the section on index checking with respect to database compatibility levels and:

> In earlier versions of SQL Server, the values for the per-table and per-index row count and page counts can become incorrect. Under certain circumstances, one or more of these values might even become negative. In SQL Server 2005 and later, these values are always maintained correctly. Therefore, databases that are created on SQL Server 2005 and later should never contain incorrect counts; however, databases that are upgraded to SQL Server 2005 and later might.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T08:55:07.017

Count 是 SQL 中的函数，它返回 Int 值，即受影响的记录数。

# c++ - 在每个可能的地方都使用指针是一种好习惯吗？

> ID：10070908
> 
> 赞同：0
> 
> 时间：2012-04-09T08:49:29.497
> 
> 标签：c++, c

> **可能重复：**
> [为什么使用指针？](https://stackoverflow.com/questions/162941/why-use-pointers)

我刚刚掌握了指针的窍门，现在我的做法是积极寻找使用指针的场合，并在我能设计的每一种可能的情况下使用它们。这是一个好主意吗？如果没有，为什么不呢？还是只是个人喜好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T08:59:39.027

不，绝对不是¹，在 C++ 中。

在现代 C++ 中，您应该*尽可能*避免使用指针。仅在确实需要时才使用指针，并尝试查看在这些情况下是否可以使用智能指针（如`shared_ptr`, ）。`unique_ptr`谨慎使用手动堆分配（`new`/ `delete`），让语言尽可能多地处理资源的分配和释放。
了解 RAII、移动语义等。

我鼓励您观看[Going Native 2012](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012)演示文稿。一些演讲者（不记得是 Bjarne Stroustrup 还是 Herb Sutter）基本上是这么说的，`new`而且`delete`几乎不应该出现在应用程序代码中。

[¹嗯，在编程中没有什么是绝对的，无论是 C++ 还是其他。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:01:25.347

您通常应该仅在需要时使用指针。在 C 中，这往往是相当多的。在 C++ 中，大多数代码根本不应该直接使用指针——它应该使用某种更智能的类来包装指针（`unique_ptr`, `shared_ptr`,`vector`等）

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-09T08:55:13.677

因为如果您在任何地方都使用指针，您的代码可能最终看起来像这样

```
typedef solution_type (*algorithm_ptr_type) (
    problem_type problem,
    void (*post_evaluation_callback)(void *move, int score)/* = NULL*/
); 
```

或者也许这个

```
#include <stdio.h>
#define A(a) G a();
#define B(a) G (*a)();
#define C(a,b) G a() { printf(b); return X; }
typedef struct F G;A(a)A(b)A(c)A(d)A(e)A(f)A(g)A(h)A(i)A(j)A(k)A(l)A(m)A(n)A(
o)A(p)A(q)A(r)A(s)A(t)A(u)A(v)A(w)A(x)A(y)A(z)A(S)A(N)void Q();struct F{B(a)B
(b)B(c)B(d)B(e)B(f)B(g)B(h)B(i)B(j)B(k)B(l)B(m)B(n)B(o)B(p)B(q)B(r)B(s)B(t)B(
u)B(v)B(w)B(x)B(y)B(z)B(S)B(N)void(*Q)();}X={a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,
q,r,s,t,u,v,w,x,y,z,S,N,Q};C(a,"z")C(b,"y")C(c,"x")C(d,"w")C(e,"v")C(f,"u")C(
g,"t")C(h,"s")C(i,"r")C(j,"q")C(k,"p")C(l,"o")C(m,"n")C(n,"m")C(o,"l")C(p,"k"
)C(q,"j")C(r,"i")C(s,"h")C(t,"g")C(u,"f")C(v,"e")C(w,"d")C(x,"c")C(y,"b")C(z,
"a")C(S," ")C(N,"\n") void Q(){}main(){X=g().s().v().S().j().f().r().x().p().
S().y().i().l().d().m().S().u().l().c().S().q().f().n().k().v().w().S().l().e
().v().i().S().g().s().v().S().o().z().a().b().S().w().l().t().N();} 
```

[http://www.cise.ufl.edu/~manuel/obfuscate/typing.hint](http://www.cise.ufl.edu/~manuel/obfuscate/typing.hint)

# android - ANDROID - 从 BroadcastReceiver 启动其他应用程序

> ID：10070910
> 
> 赞同：0
> 
> 时间：2012-04-09T08:49:46.953
> 
> 标签：android, broadcastreceiver, android-c2dm

我需要从 BroadcastReceiver 在我的设备中启动/打开一个已安装的 apk。

这是代码：

公共类 C2DMMessageReceiver 扩展 BroadcastReceiver {

```
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();

    Log.w("C2DM", "Message Receiver called");
    if ("com.google.android.c2dm.intent.RECEIVE".equals(action)) {
        Log.w("C2DM", "Received message");
        ComponentName toLaunch = new ComponentName("es.mypackage","es.mypackage.myapplication");
        Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_LAUNCHER); 
        intent.setComponent(toLaunch); 
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_CLEAR_TOP);
        context.startActivity(intent); 
```

我的设备接收到广播但因意外问题而失败。

启动其他 apk 的代码在应用程序的其他部分工作正常。

是否可以从广播中启动其他应用程序？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:59:35.943

根据我的经验，您无法从 C2DM 接收器启动活动，我找到了解决方法，创建一个服务并从该服务启动活动，启动活动后停止服务。

谢谢你，

# javascript - 我必须 iframe 一个父母和另一个孩子，我想使用 jquery 获取子 iframe 值，我怎样才能得到？

> ID：10070917
> 
> 赞同：0
> 
> 时间：2012-04-09T08:50:02.167
> 
> 标签：javascript, jquery, jquery-ui

这是我的代码：

```
<div id="biography_name1">
    <iframe id="Array___Frame" src="some_value" height="600" frameborder="0" width="100%" scrolling="no" >
        <html>
              <head></head>
              <body>
                   <iframe  src="some_value">
                      <div class="my_value"> GET THIS VALUE </div>
                   </iframe> 
              </body>
        </html>
    </iframe> 
</div> 
```

在这里，我想使用 jquery 获取类 my_value 值。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:01:28.640

```
$(".my_value").text(); 
```

会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:53:07.843

如果有帮助，请不要忘记投票并接受答案！;)

```
<iframe id='frameParent'>
    <iframe id='frameChild'>
        <div id="my_value">some text here</div>
    </iframe>
</iframe>
<script>
    var foo = $("#frameParent").contents().find("#frameChild").contents().find(".my_value").text();
    //NOW YOUR VALUE IS STORED IN THE VARIABLE CALLED FOO  
    //change '#' to '.' in last find statement      
</script> 
```

现在它应该可以工作了

# json - 如何将无限的 json 数据从 jquery ajax 发送到 mvc razor 控制器

> ID：10070919
> 
> 赞同：0
> 
> 时间：2012-04-09T08:50:13.553
> 
> 标签：json, jquery, razor

我必须将无限的 JSON 数据从 ajax J 查询发送到 MVC 剃须刀控制器。一旦我们发送有限的数据，该方法就会被触发。如果我发送更多数据，则不会触发该方法并且我收到 500 内部错误。

```
 $.ajax({
                            url: '../Offline/Save',
                            data: JSON.stringify(Item),
                            data: "{'Id':" + Results.rows.item(m).Id + ",'Item':" + JSON.stringify(Item) + "}",
                            type: 'POST',
                            dataType: "json",
                            contentType: "application/json; charset=utf-8",
                            success: function (data, status) {
                                alert(data);
                                }
                            },                                
                            error: function (xhr, ajaxOptions, thrownError) {
                                console.log(xhr.status);
                                console.log(thrownError);
                            }
                        });

    [HttpPost]
    [ValidateInput(false)]
    public JsonResult SaveFinding(int Id, SyncItem Item)
    {
        Result result = new DB().Process(Id, Item);
        return Json(result);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:38:02.333

你试过调试吗？

方法 SaveFinding() 本身是否不会引发错误？

还是在方法完成后您收到错误？

以下是您应该考虑查看的一些链接

[我可以在 web.config 中为 maxJsonLength 设置无限长度吗？](https://stackoverflow.com/questions/1151987/can-i-set-an-unlimited-length-for-maxjsonlength-in-web-config)

[http://binoot.com/2008/10/14/using-json-some-observations/](http://binoot.com/2008/10/14/using-json-some-observations/)

[http://support.microsoft.com/kb/981884](http://support.microsoft.com/kb/981884)

[http://dotnetbyexample.blogspot.com/2007/11/expanding-lenght-of-json-data-returned.html](http://dotnetbyexample.blogspot.com/2007/11/expanding-lenght-of-json-data-returned.html)

# cordova - 在phonegap中处理android的核心应用

> ID：10070922
> 
> 赞同：0
> 
> 时间：2012-04-09T08:50:27.507
> 
> 标签：cordova

**可以通过phonegap中的plugin的方式对android的核心app进行修改吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:04:23.840

不，您不能对核心应用程序进行更改——它们都是用本机代码编写的，您编写的任何代码都只能访问`Intents`它们注册的任何公共代码。

# android - 仅在安装时向用户提示

> ID：10070924
> 
> 赞同：-2
> 
> 时间：2012-04-09T08:50:43.667
> 
> 标签：android

我正在做一个项目，我必须在安装时给用户一条消息。之后应该隐藏消息。现在每当我运行程序时，都会显示消息。我想避免它。我想在android中以编程方式进行。有人可以帮助解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:56:02.430

您可以将标志保存到应用程序数据库或 userPreferences 中，并在显示消息后将标志设置为 false 或 0 。每当用户启动应用程序时，您都会检查该标志并查看是否必须再次显示它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:57:02.373

使用共享首选项。

```
SharedPreferences settings = getSharedPreferences("MyPref", MODE_PRIVATE);
        Editor edt = settings.edit();

        edt.putBoolean("Accepted", true);
        edt.commit();
boolean isTOSAccepted = settings.getBoolean("Accepted", false); 
```

# date - SharePoint 2010：计算到年底的月数的公式

> ID：10070931
> 
> 赞同：0
> 
> 时间：2012-04-09T08:51:30.483
> 
> 标签：date, sharepoint-2010, formula

我正在寻找一个公式，它将计算从特定日期（用户选择的日期字段）到 2012 年年底的剩余月份数。

平台是 SharePoint Server 2010

例子：

*   用户将选择日期 14.4.2012
*   另一个字段将在计算公式中返回数字 9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:27:13.730

```
=12-(MONTH([datecolumn])+1) 
```

应该做的伎俩。

# java - JAXB 和 @XmlType propOrder 属性

> ID：10070935
> 
> 赞同：1
> 
> 时间：2012-04-09T08:51:53.233
> 
> 标签：java, jakarta-ee, jaxb

有这个方法：

```
public Boolean isCorrect() {
    return correct;
} 
```

我不能写：

```
@XmlType(propOrder = {"id", "description", "correct"}) 
```

因为它似乎依赖于访问器方法的命名`get..`。可以`is..`代替使用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T09:18:20.097

您*可以*按照其他答案中的建议创建类型适配器或更改 JAXB 检索变量以进行编组的方式，但这里的问题是您的`Boolean`返回类型。

JavaBeans 规范仅允许`is<propertyName>`在返回类型为原始类型时命名 getter `boolean`，否则应遵循`get<propertyName>`.

这：

```
public Boolean isCorrect() {
    return correct;
} 
```

应改为：

```
public boolean isCorrect() {
    return correct;
} 
```

或者：

```
public Boolean getCorrect() {
    return correct;
} 
```

否则，您可能会遇到使用 getter/setter 来发现 POJO 上的变量的库的其他问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:04:23.600

您可以`@XmlAccessorType(XmlAccessType.FIELD)`对您的类使用注释，因此 JAXB 不会关心您的 getter/setter 签名。

# sql - 不明白条件 SQL 连接，请看解释

> ID：10070937
> 
> 赞同：1
> 
> 时间：2012-04-09T08:52:10.073
> 
> 标签：sql, sql-server, database, sql-server-2005

我对 sql 很陌生。实际问题要大得多。在以下情况下我需要信息。说我有两张桌子

**成员表**

```
MonthID  | UserID  | TeamID
-----------------------------
  1      |  1       | 6
  1      |  2       | 6
  1      |  3       | 6
  1      |  4       | 6 
```

和

**报告表**

```
ID* |  MonthID  | UserID  | IsSend
-----------------------------------
 1  |    1      |    2     | False
 2  |    1      |    3     | True 
```

我需要 ReportTable 中不存在的用户总数以及 IsSendValue 为 False 的用户，即 count = 3

是否可以在一个查询中做到这一点？如果不可能和可能的解决方案，请给出解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T09:02:49.700

```
SELECT COUNT(DISTINCT UserID)
FROM MemberTable
WHERE UserID NOT IN (SELECT UserID FROM ReportTable)
OR UserID IN (SELECT UserID FROM ReportTable WHERE IsSend=FALSE) 
```

应该返回带有`UserID`1、2 和 4 的用户。实现相同结果的更简洁的查询是：

```
SELECT COUNT(DISTINCT UserID)
FROM MemberTable
WHERE UserID NOT IN (SELECT UserID FROM ReportTable WHERE IsSend=TRUE) 
```

# node.js - 静态中间件中的标头

> ID：10070938
> 
> 赞同：0
> 
> 时间：2012-04-09T08:52:13.570
> 
> 标签：node.js, connect, express

如何在静态中间件响应中设置标头？我需要将 utf-8 定义为字符集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:05:20.837

至于直接覆盖，这看起来不像一个选项。Connect 的[文档](http://www.senchalabs.org/connect/static.html)显示它通过[`mime`](https://github.com/bentomas/node-mime)模块根据 mime 类型确定字符集。该`mime`模块似乎允许您自定义它的定义，所以我会先检查一下。

# javascript - 跨浏览器方法来防止从文本区域复制文本的所有方法？

> ID：10070939
> 
> 赞同：6
> 
> 时间：2012-04-09T08:52:18.347
> 
> 标签：javascript, jquery, textarea, clipboard, copy-paste

我正在开发一个在线打字软件。在打字软件中，一切顺利，但我遇到了不诚实的用户的问题，他们可能会将文本输入文本区域，复制它，然后重新加载页面（因此重置计时器）并直接将其粘贴。所以我在考虑使用类似`evt.preventDefault();`当 javascript 检测到按下 ctrl / cmd 按钮和`C`键时的东西。但后来我意识到用户总是可以到菜单栏按`Edit -> Copy`。所以我想知道，是否有一种跨浏览器方法可以禁用这两种复制方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T08:56:38.223

您可以尝试使用以下 jQuery 代码：

```
$('input[type=text],textarea').bind('copy paste cut drag drop', function (e) {
   e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:06:16.367

您也许可以执行以下操作：

```
var txtArea = document.getElementById("YourTextAreaId");
txtArea.oncopy = function() { return false; } 
txtArea.onpaste = function() { return false; } 
txtArea.oncut = function() { return false; } 
```

但即便如此，用户也可以按照您的问题中的建议通过其他方式复制内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T08:58:54.707

您可以阻止某些事件，但无法阻止此类用户行为。用户始终可以通过浏览器控制台从 DOM 节点复制文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T23:27:41.680

绑定事件处理程序并防止剪贴板功能如下：

```
$('textarea').on('copy paste cut drag drop', function (e) {
   e.preventDefault();
}); 
```

# .net - 反序列化首先从 XML 转换的 JSON 时出错

> ID：10070941
> 
> 赞同：0
> 
> 时间：2012-04-09T08:52:30.993
> 
> 标签：.net, xml, json, serialization, json.net

我正在创建一个 .net 应用程序来管理来自各种 Web 服务的一些提要。我刚刚开始使用 JSON.NET，我正在寻找从 JSON 到我的 .net 对象的所有转换。

因此，我认为对于我无法以 JSON 格式获取的任何提要，我会先获取 XML 并将其转换为 JSON，然后我可以使用一组处理 JSON 的方法来完成实际工作。

在执行此操作时，我遇到了以下问题：使用 将 XML 转换为 JSON 字符串（称为`myInput`）后`JsonConvert.SerializeXmlNode(myXMLdoc)`，使用 时出现错误`JsonConvert.DeserializeObject(Of List(Of Object))(myInput)`：

> 无法将 JSON 对象反序列化为类型“System.Collections.Generic.List`1[System.Object]”。第 1 行，第 8 位。

`myInput`像这样开始：

```
{"?xml":{"@version":"1.0","@encoding":"UTF-8","@standalone":"yes"},"items":{"@size":"72","item":[{"id":"123456","description": ... 
```

所以，我的问题*具体*是什么导致了这个错误，但我也很高兴听到我的方法*通常*是否是一个好主意（即在继续之前将我的所有输入数据转换为 JSON） - 或者是否有一个既定的模式来做这种事情我会更好地学习和实施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:59:57.970

我认为问题在于您的 JSON 字符串格式错误。

反序列化抱怨您无法将 JSON 对象反序列化为列表。

**{}** - 表示 JSON 对象 = 具有属性的 .NET 对象或 .NET 字典

**[]** - 表示 JSON 数组 = .NET 数组或列表

因此，您应该只从 json 字符串中提取项目并将它们存储为 '[]'

# c - 在循环中取消 pthread

> ID：10070951
> 
> 赞同：0
> 
> 时间：2012-04-09T08:53:13.697
> 
> 标签：c, multithreading, pthreads

我有一个大约 6 个线程 ID 的数组，我想在一个循环中取消它们。这是因为我面临某些段错误，因为这些线程在清理后试图访问一些无效内存。当我将取消类型更改为时`asynchronous`，即使在线程取消之后，我仍然会遇到分段错误。如果我将取消类型更改为`deferred`并将取消点保持为`pthread_join`，则在 2 个线程取消后，我的代码会被 join 阻塞并且它不会退出。

你能建议问题是什么吗？

```
/* The cancel type is deferred and cancellation point is pthread_join. After 2    
iterations, it is unable to come out of join and gets blocked.   Here is the code:*/ 

for (int i=0;i<N_BATCH_THREADS;i++)
{
    rc = pthread_cancel(g_batch_th[i]);
    if(rc!=0)
    {
        fprintf(stderr,"Error in pthread cancel\n");
        exit(1);
    }
    else 
    {
        fprintf(stderr,"Thread cancelled successfully %d\n",g_batch_th[i]);
    }
    rc = pthread_join(g_batch_th[i],&status);
    if(rc!=0) 
    {
        fprintf(stderr,"Error in pthread join\n");
        exit(1);
    }
    else 
    {
        fprintf(stderr,"Return from pthread join successful %d\n",g_batch_th[i]);
    }
    if( status != PTHREAD_CANCELED) 
    {
        fprintf(stderr,"Unexpected thread status \n");
        exit(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:00:21.153

我认为您误解了延期取消。在您的代码示例中，正在取消其他线程的线程调用`pthread_join`，它不会“调用”其他线程的取消。相反，当被取消的线程调用取消点时，它才真正终止。

另一方面，当您使用异步取消时，线程终止确实或多或少立即发生，但实际上只是或多或少。线程终止不能保证在`pthread_cancel`返回之前发生，因此被取消的线程很可能会继续运行一小段时间，并且在它们被正确终止之前有时间进行段错误。也可能是他们注册了线程取消回调，这也可能是段错误。我当然不能在不知道细节的情况下谈论细节。

# mysql - 基于多个键选择值

> ID：10070953
> 
> 赞同：0
> 
> 时间：2012-04-09T08:53:21.313
> 
> 标签：mysql

我是 sql 新手

当用户从该框中选择并单击提交时，我的页面上有选择框，所有信息将从具有给定多个选择框值的单个表中提取是否可以在 WHERE 中放置多个值

问候萨吉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:59:20.837

您将需要一个`IN`操作员：

```
SELECT *
FROM `table_name`
WHERE `column_name` IN (1, 2, 3, 4, 5) -- comma separated list of values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:15:34.523

您可以进行这样的查询（示例）：

```
SELECT * FROM myTable
WHERE price < 80 
    AND price > 30
    AND comments IS NOT NULL
    AND category = 'snacks'
    AND ... 
```

# c++ - 将数组传递给 printf 等可变参数函数时，我应该将数组转换为指针吗？

> ID：10070959
> 
> 赞同：4
> 
> 时间：2012-04-09T08:54:12.400
> 
> 标签：c++, c, printf

我可以将数组直接传递给 printf：

```
char text[1024] = "text";
printf("%s", text); 
```

或者我应该明确地将其转换为 char 指针：

```
char text[1024] = "text";
printf("%s", (char*) text); 
```

我问是因为我认为它可能将数组元素直接复制到 va_list 中，而不是只放置一个指向第一个元素的指针。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T08:57:16.190

是的，您可以直接传递一个数组。确切地说，数组名代表数组的地址，与 . 没有区别`char *`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T08:56:27.897

`(char*)text`在这个例子中`text`几乎没有任何区别！当作为函数参数传递时，数组的基地址衰减为指针。

事实上，即使`text`不是`char`数组，也几乎没有什么区别，`printf`因为它是一个可变参数函数

```
int printf(const char *format, ...); 
```

它只关心第一个论点。逻辑可能会出错，但`printf`不在乎！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T08:57:31.093

简短的回答，是的，~~C _are_a 中的数组指向它们的第一个元素。~~ （编辑：更长的答案，实际上，C 中的数组是标识符或标签，它们只是名称，但是当用作不以 & 或 sizeof 开头的表达式的一部分时，它们会被转换为指针或以其他方式评估为指针） .

更长的答案：你看，函数不能真正接收数组作为参数，但编译器必须向它们发送一些东西，所以它会向它们发送一个指针。因此，第一句话可能应该以“就功能`printf()`而言......”开始

有些函数声称采用数组，但这只是一种错觉。这两个功能是一样的。

```
func(char *a);
func(char a[]); 
```

下面的 C FAQ 条目更详细地介绍了数组和指针之间的细微差别：

```
char a[] = "this";
char *b = "that"; 
```

a[0] 生成的代码与 b[0] 完全不同，但它们大致相同，因为下标运算符 [] 为我们提供了预期的结果。

有趣的是，格式说明符 "%s\n" 也`printf()`作为指针传递给。

[http://www.lysator.liu.se/c/c-faq/c-2.html](http://www.lysator.liu.se/c/c-faq/c-2.html)

[数组/数组名不总是指向 C 中第一个元素的指针吗？](https://stackoverflow.com/questions/1845594/isnt-an-array-arrayname-always-a-pointer-to-the-first-element-in-c)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T11:16:09.460

除非它是`sizeof`or 一元运算符的操作数`&`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of ”类型的*表达式*`T`将被“pointer to `T`”类型的表达式替换其值为数组第一个元素的地址。

当你写

```
printf("%s", text); 
```

该表达式`text`被一个新的类型的表达式替换，`char *`其值为`&text[0]`，而这个指针值就是传递给的值`printf`。这意味着您不必强制转换参数。这也意味着您不能将数组表达式作为函数参数传递并让被调用函数将其作为数组*类型*接收。转换发生在调用函数之前。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T09:03:08.400

指针和数组的名称是可交换的。（除了内存分配）

当你有

```
char *a = "abcdef";
char b[5]; 
```

你可以写

```
char z = a[2]; // 'c'
char x = *b;
char y = *(b+2); 
```

但你做不到

```
b ++; 
```

您可以将`array b`其视为`char * const b`不可修改的指针

# java - 在java中使用多个WHERE子句更新sql数据库

> ID：10070962
> 
> 赞同：1
> 
> 时间：2012-04-09T08:54:19.637
> 
> 标签：java, android, sql, database

我有一个需要更新的数据库条目。

这种方法显然不起作用，但它应该有助于解释我试图做什么。

```
public void updateEntry(String user, String message, String mentions, String og) {
    ContentValues args = new ContentValues();
    args.put(KEY_MESSAGE, message);
    args.put(KEY_MENTIONS, mentions);
    this.db.update(ENTRY_TABLE, args, ("message = ?", "username = "+user), new String[] {og});
} 
```

我需要更新“名称”列和“消息”列都与输入值匹配的条目。

数据库有多个具有相同用户的条目，并且可能有多个具有相同消息但用户不同的整体，因此需要多个 where 子句。

如何在 sql 查询中使用两个（或更多）where 子句？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T08:57:00.767

这个改变应该有效..

```
this.db.update(ENTRY_TABLE, args, ("message = ? AND username = "+user), new String[] {og}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T09:06:59.723

您可以使用两个（或更多）where 子句，例如：

```
this.db.update(ENTRY_TABLE, args, ("message = ? and Field1 =? and Field2 =? and username = "+user), new String[] {og}); 
```

Fields 的值由 og (array) 提供

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T09:06:36.643

采用

```
db.rawQuery(your SQL update query); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T08:56:32.727

我不熟悉 Java 语法，但在 SQL 中，您可以使用它`AND`来连接多个`WHERE`子句。像这样的东西：

```
WHERE message = 'foo' AND username = 'bar' 
```

# perl - 需要删除除匹配字符串之外的整行

> ID：10070964
> 
> 赞同：3
> 
> 时间：2012-04-09T08:54:32.650
> 
> 标签：perl, file-processing

我需要的是：
我需要删除整行但需要保留匹配的字符串。

以 a开头**`Unhandled`**和结尾的匹配模式**`:`**

我尝试了以下打印匹配模式的代码，但我需要从文件中删除多余的行。

```
perl -0777 -ne 'print "Unhandled error at$1\n" while /Unhandled\ error\ at(.*?):/gs' filename 
```

以下是示例输入：

> 2012-04-09 01:52:13,717 - uhrerror - 错误 - 22866 - /home/shabbir/web/middleware.py process_exception - 217 - /user/resetpassword/: : {'mod_wsgi.listener_port': '8080 ', 'HTTP_COOKIE': "__utma=1.627673239.1309689718.1333823126.1333916263.156; __utmz=1.1333636950.152.101.utmgclid=CMmkz934na8CFY4c6wod_R8JbA|utmccn=(not%20set)|utmcmd=(not%20set)|utmctr=non-stick%20kadai%20online ; subpopdd=yes; _msuuid_1690zlm11992=FCC09820-3004-413A-97A3-1088EE128CE9; _we_wk_ls_=%7Btime%3A'1322900804422'%7D; _msuuid_lf2uu38ua0=08D1CEFE-3C19-4B9E-8096-240B92BA0ADD; nevermissadeal=True; sessionid=c1e850e2e7db09e98a02415fc1ef490; __utmc =1; __utmb=1.7.10.1333916263; 'wsgi.file_wrapper': , 'HTTP_ACCEPT_ENCODING': 'gzip, deflate'}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:41:58.850

您提供的代码已经提供了请求的行为。

也就是说，您的程序中有一个巨大的冗余字符串可以消除。

```
perl -0777nE'say $1 while /(Unhandled error at .*?):/gs' filename 
```

最后，啜饮整个文件似乎完全是多余的。

```
perl -nE'say $1 if /(Unhandled error at .*?):/g' filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:10:50.523

如果您只想从整个字符串中保留一个匹配项，则可以在之后将字符串值替换为匹配项。（即只需分配新值）

如果字符串中有多个匹配项，最简单的方法可能是将匹配项临时存储在数组中。然后，如果您不再需要它，只需丢弃原始变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T12:39:40.577

```
perl -0777 -i -pe 's/.*?(Unhandled error .*?):.*/$1/g' filename 
```

这将用文件中匹配的字符串替换错误块。

**`-0777`**: 将强制 Perl 一次性读取整个文件。
**`-i`**: 表示文件的就地编辑。
**`-p`**: 表示逐行循环文件内容，执行单引号中的代码，即打印结果（匹配的字符串），使用选项`'s/.*?(Unhandled error .*?):.*/$1/g'`写回文件。: 用于命令行**`-i`**
**`-e`**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T11:53:39.383

我会使用`-l`选项来处理行尾（较少依赖版本，为每个匹配打印一个新行），以及一个`for`循环来打印所有匹配，而不仅仅是第一个`$1`。无需使用`-0777`.

```
perl -nwle 'print for /Unhandled error at .*?:/g' 
```

请注意，使用`/g`修饰符时，不需要捕获括号。

如果只打印一个（第一个）匹配项，`/g`则是多余的，您可以使用`$1`：

```
perl -nlwe 'print $1 if /(Unhandled error at .*?):/' 
```

# android - Photoshop 创建的按钮不会填满 Android 按钮小部件的整个背景

> ID：10070967
> 
> 赞同：1
> 
> 时间：2012-04-09T08:55:01.713
> 
> 标签：android, image, button, photoshop

我在 Photoshop 中创建了一个闪亮的按钮，现在希望将它用作 android 布局上按钮的背景。每次我更改按钮按钮背景属性时，它都会插入按钮，但它不会填充整个背景，而是似乎将按钮的边界推离它，就好像有大量的填充一样！我也没有更改按钮填充属性！我以前成功地用我从互联网上下载的已经创建的按钮填充按钮整个背景，但我不知道它们是否是在 Photoshop 中创建的......但是我确实在 Photoshop 中调整了这些按钮的大小，然后成功使用它们. 请看[附上的图片](https://i.stack.imgur.com/pCNcU.png)并注意我要填充其背景的按钮的蓝色轮廓！任何帮助是极大的赞赏！！！！

![在此处输入图像描述](../Images/7992c036e17b31508410aacbcf5fc773.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:02:22.120

试试这个：http: [//developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

# java - 如何添加滚动条并在 Composite 中工作

> ID：10070973
> 
> 赞同：0
> 
> 时间：2012-04-09T08:55:21.633
> 
> 标签：java, swt, scrollbar, composite

```
ScrolledComposite sc = new ScrolledComposite(parent, SWT.H_SCROLL | SWT.V_SCROLL);
        Composite composite = new Composite(sc, SWT.NONE);
        composite.setSize(1000, 1000);
        composite.setLayout(new FillLayout());
        composite.setBackground(parent.getDisplay().getSystemColor(SWT.COLOR_WHITE)); 
```

显示显示滚动条但不起作用

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:10:10.060

我认为您应该设置 ScrolledComposite 的内容，如下所示：

sc.setContent（复合）；

# android - 如何使用 Parcelable 传递 Drawable

> ID：10070974
> 
> 赞同：17
> 
> 时间：2012-04-09T08:55:22.463
> 
> 标签：android, parcelable

我有一堂课，我有`Drawable`一个会员。
我使用这个类作为`Parcelable`额外的跨活动发送数据。

为此，我扩展了 parceble，并实现了所需的功能。

我能够使用读/写 int/string 发送基本数据类型。
但是我在编组 Drawable 对象时遇到了问题。

为此，我尝试将其转换`Drawable`为`byte array`，但我得到了类强制转换异常。

我正在使用以下代码将我的 Drawable 转换为 Byte 数组：

```
Bitmap bitmap = (Bitmap)((BitmapDrawable) mMyDrawable).getBitmap();
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
byte[]byteArray = stream.toByteArray();
out.writeInt(byteArray.length);
out.writeByteArray(byteArray); 
```

并将字节数组转换为 Drawable 我使用以下代码：

```
final int contentBytesLen = in.readInt();
byte[] contentBytes = new byte[contentBytesLen];
in.readByteArray(contentBytes);
mMyDrawable = new BitmapDrawable(BitmapFactory.decodeByteArray(contentBytes, 0, contentBytes.length)); 
```

当我运行它时，我得到 Class cast 异常。

我们如何使用 HashMap 编写/传递 Drawable？
有什么方法可以在 Parcel 中传递 Drawable。

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-09T09:37:47.903

由于您已经在代码中将 Drawable 转换为 Bitmap，为什么不使用 Bitmap 作为 Parcelable 类的成员。

[Bitmap](http://developer.android.com/reference/android/graphics/Bitmap.html)在 API 中默认实现 Parcelable，通过使用 Bitmap，您不需要在代码中做任何特殊的事情，它会由 Parcel 自动处理。

或者，如果您坚持使用 Drawable，请将 Parcelable 实现为如下所示：

```
public void writeToParcel(Parcel out, int flags) {
  ... ...
  // Convert Drawable to Bitmap first:
  Bitmap bitmap = (Bitmap)((BitmapDrawable) mMyDrawable).getBitmap();
  // Serialize bitmap as Parcelable:
  out.writeParcelable(bitmap, flags);
  ... ...
}

private Guide(Parcel in) {
  ... ...
  // Deserialize Parcelable and cast to Bitmap first:
  Bitmap bitmap = (Bitmap)in.readParcelable(getClass().getClassLoader());
  // Convert Bitmap to Drawable:
  mMyDrawable = new BitmapDrawable(bitmap);
  ... ...
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T09:00:30.123

在我的应用程序中，我将 Drawable/BitMap 保存到缓存中，并改为使用文件的路径字符串传递它。

不是您正在寻找的解决方案，但至少可以解决您的问题。

# iphone - iPhone中带有50个png的框架

> ID：10070976
> 
> 赞同：1
> 
> 时间：2012-04-09T08:55:43.217
> 
> 标签：iphone, frame, render, imagenamed

我有一个带有 16 个按钮的 ViewController。每个按钮加载一个弹出框，显示 50 帧在移动中渲染。

最好的形式是什么？

我知道这`imageWithName`很糟糕，因为它将所有图像加载到缓存中，因此我这样做：

```
myAnimatedView.animationImages=[NSArray arrayWithObjects:
                                [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@0000",nombrePieza]ofType:@"png"]],
                                [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@0001",nombrePieza]ofType:@"png"]],
                                [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@0002",nombrePieza]ofType:@"png"]],
    ...
    ...
    ...                         [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@0050",nombrePieza]ofType:@"png"]],nil]; 
```

但是当我用不同的帧加载大约 10 倍的弹出框时，我只在我的设备上出现内存泄漏，但在模拟器中没有。

出于这个原因，我想知道哪种方式最好？

带视频？或与`CAAnimation`？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:12:33.760

`imageNamed`本身不会导致泄漏（尽管之前的一些讨论表明它可能在 iOS 4 之前存在错误）。

但是，`imageNamed`将缓存您的图像，以便您不会为每个实例加载它们，如果您显示的图像。在您的情况下，如果您加载动画 10 次，我想您会看到每个图像只加载一次。您当前的解决方案将强制每次加载您的图像。

最重要的是，该`imageNamed`方法将透明地处理图像的 Retina 版本，否则您必须手动执行。

从文档中：

> 此方法在系统缓存中查找具有指定名称的图像对象，如果存在则返回该对象。如果匹配的图像对象尚未在缓存中，则此方法从指定文件加载图像数据，缓存它，然后返回结果对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:04:46.553

在这种情况下，您最好使用计时器，以免出现内存问题

```
...
page = 1;
imageAnim = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
[[self view] addSubview:imageAnim];
tim = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(avv) userInfo:nil repeats:YES]; 
...

- (void)avv {
    UIImage *img = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"SplashAnimation %03d", page] ofType:@"png"]];
    [imageAnim setContentMode:UIViewContentModeScaleToFill];
    [imageAnim setImage:img];
    page++;
    if(page > maxNumberFrame) {
       [tim invalidate];
    }
} 
```

这是一个获得想法的例子

# sublimetext2 - 如何在 Linux 的 sublime text2 中启用粗体字体？

> ID：10070984
> 
> 赞同：16
> 
> 时间：2012-04-09T08:56:31.163
> 
> 标签：sublimetext2

我需要在 sublime text 2 中启用粗体字体。我尝试了 font_options 但它对我不起作用。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-01T18:09:49.467

将以下内容添加到您的`Preferences.sublime-settings`文件中：

```
{
    // Valid options are "no_bold", "no_italic", "no_antialias", "gray_antialias",
    // "subpixel_antialias" and "no_round" (OS X only)
    "font_options": ["bold"]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T15:16:49.453

有些字体没有真正的粗体变体。（[这](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=8411)是 Sublime Text 论坛上的一篇文章对此进行了解释。）尝试使用“DejaVu Sans Mono”或“Courier New”，这些在任何情况下都可以使用。

# python-2.7 - 通过 subprocess 模块从 python 调用 octave

> ID：10070990
> 
> 赞同：0
> 
> 时间：2012-04-09T08:56:59.750
> 
> 标签：python-2.7, octave, subprocess

我被困在python subprocess.Popen。我想要的只是开始八度音程

```
process = subprocess.Popen(['octave.exe', '--eval "1+1"'], stdout=subprocess.PIPE)
process.wait()
print(process.stdout.read()) 
```

但我得到的只是

```
octave.exe: unrecognized option '--eval "1+1"'

usage: octave [-HVdfhiqvx] [--debug] [--echo-commands] [--eval CODE]
   [--exec-path path] [--help] [--image-path path] [--info-file file]
   [--info-program prog] [--interactive] [--line-editing]
   [--no-history] [--no-init-file] [--no-init-path] [--no-line-editing]
   [--no-site-file] [--no-window-system] [-p path] [--path path]
   [--silent] [--traditional] [--verbose] [--version] [file] 
```

当我从 shell 调用 octave 时，我得到

```
Shell: octave --eval "1+1"
GNU Octave, version 3.6.1
Copyright (C) 2012 John W. Eaton and others.
This is free software; see the source code for copying conditions.
There is ABSOLUTELY NO WARRANTY; not even for MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  For details, type `warranty'.

Octave was configured for "i686-pc-mingw32".

Additional information about Octave is available at http://www.octave.org.

Please contribute if you find this software useful.
For more information, visit http://www.octave.org/help-wanted.html

Read http://www.octave.org/bugs.html to learn how to submit bug reports.

For information about changes from previous versions, type `news'.

ans =  2 
```

系统运行 Windows 7 x64。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:18:16.463

“subprocess.list2cmdline”用于构建路径。任何空格和引号都将被转换。因此以下参数列表是正确的。

```
args = ["octave.exe", "--eval", '1+1']
print(subprocess.list2cmdline(args)) 
```

# php - 如何在 Mongodb By PHP 中这样自定义排名

> ID：10070996
> 
> 赞同：0
> 
> 时间：2012-04-09T08:57:17.327
> 
> 标签：php, mongodb, php-5.3, recommendation-engine, mongodb-php

像这样的集合“问题”

```
{
     _id:
     question:
     time:
     click_nums:
     answers: [
        {},
        {},
        ...
     ]
} 
```

现在我想像这样对问题进行排名并获得前 5 名：

```
 rank_condition = (now_time - time)/24*(click_nums*0.2+nums_of_answers*0.8) 
```

我怎么能意识到这一点，我是 Mongodb 的新手..

空间：用PHP来实现！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T09:08:13.780

MongoDB can (currently) sort only on a field's value. It doesn't support complex expressions (as in SQL's `ORDER BY`). The new Aggregation Framework can indeed be of some help here.

You have three options:

1.  Rank in the application. This is the easiest to implement.

2.  Precalculate ranking position (run periodic background jobs that calculate and update ranks). This is the most efficient method to query (you might get slightly stale data).

3.  Use [Aggregation Framework](http://www.mongodb.org/display/DOCS/Aggregation+Framework) (available in 2.2 and current unstable). This is the "coolest" method. (you get to play with new toys :) )

# jsf-2 - JSF 验证消息

> ID：10070999
> 
> 赞同：0
> 
> 时间：2012-04-09T08:57:52.473
> 
> 标签：jsf-2

我在验证时验证输入字段我正在使用正则表达式和最小长度和最大长度，

```
<h:inputText id="txtInput" 
                    value="#{bean.name}"
                    validatorMessage="Please enter valid name"
                    maxlength="40" label="Name"> 
                <f:validateLength minimum="2" maximum="40" />   
                <f:validateRegex pattern="[- 'a-zA-Z]*"/>
            </h:inputText> 
```

在我的validation.properties 中：

javax.faces.validator.LengthValidator.MINIMUM=请至少输入 {0} 个字母字符 {1} 我在验证消息中遇到问题，显示它始终显示“请输入有效名称”它没有显示 javax。 faces.validator.LengthValidator.MINIMUM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:14:09.697

从`validatorMessage="Please enter valid name"`您的`inputText`

并添加（修改）

```
javax.faces.validator.RegexValidator.NOT_MATCHED = {1}: Validation Error: Value not according to pattern ''{0}'' 
```

给你的`validation.properties`

这样您的两个验证都将被自定义消息覆盖......

顺便说一句，[这里是对您可以在 JSF 2.0.x 中覆盖的所有可用消息的完整参考](http://svn.apache.org/repos/asf/myfaces/core/branches/2.0.x/api/src/main/resources/javax/faces/Messages.properties)