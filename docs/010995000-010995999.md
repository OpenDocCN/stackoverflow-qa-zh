# StackOverflow 问答 10995000-10995999

# javascript - 用于跟踪单击是否打开新选项卡/窗口的 Javascript

> ID：10995012
> 
> 赞同：1
> 
> 时间：2012-06-12T10:41:32.773
> 
> 标签：javascript

在我的应用程序中，当用户单击任何“a href”链接时，会出现一个“加载”对话框（由于超出此问题范围的许多原因，这是必要的）。但是，有些用户会在新选项卡/窗口中打开一些链接，因此“加载”对话框不应显示在打开器窗口中。可以用js以某种方式跟踪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:40:47.077

像这样的东西？

```
$( 'a' ).click( function( e ) {
   if ( e.which === 1 ) {
      showLoadingDialog();
   }
} ); 
```

仅在单击鼠标左键时才显示加载对话框。

# c# - 在 MSTest 中将图像附加到测试报告

> ID：10995017
> 
> 赞同：8
> 
> 时间：2012-06-12T10:41:41.323
> 
> 标签：c#, visual-studio-2010, mstest

我们正在使用连接到 Team Foundation Server 2010 的 Visual Studio 2010，并使用 MSTest 创建我们的单元测试。

**是否可以将图像附加到测试报告中，以便当测试失败时我们可以可视化某些东西？**

例如，此图像可以是用于 UI 测试的应用程序的屏幕截图或可视化测量数据的图形。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T14:20:07.007

使用[`TestContext.AddResultFile`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testcontext.addresultfile)方法：

```
[TestClass]
public class UnitTest
{
    [TestCleanup]
    public void TestCleanup()
    {
        if (TestContext.CurrentTestOutcome == UnitTestOutcome.Passed)
            TestContext.AddResultFile(testPassedFile);
        else
            TestContext.AddResultFile(testFailedFile);
    }

    [TestMethod]
    public void TestMethod()
    {

    }

    public TestContext TestContext { get; set; }
} 
```

# python - 如何在 PyQT 中设置只影响父级的样式表？

> ID：10995018
> 
> 赞同：5
> 
> 时间：2012-06-12T10:41:42.307
> 
> 标签：python, qt, user-interface, pyqt

我正在尝试自定义我的 UI。我不知道如何使样式表条目与除父级和所有子级之外的任何内容有关。例如我运行这一行：

```
self.lnchTab.setStyleSheet('QWidget { background-color: #1d1d1d ; color: #f8f8f8}') 
```

我将 self.lnchTab 下的所有元素更改为深灰色。我只希望 self.lnchTab 为深灰色，而不是其中的文本、输入和按钮。

我该如何做到这一点？

谢谢你的帮助。谷歌没有提供任何有用的东西，甚至没有提供我想要找到的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T12:22:55.387

您可以给`self.lnchTab`对象一些*名称/ID*，然后您可以在样式表中使用**id-selector ：**

```
self.lnchTab.setObjectName("myParentWidget");
self.lnchTab.setStyleSheet('QWidget#myParentWidget { background-color: #1d1d1d ; color: #f8f8f8}') 
```

# python - 卡在 Webdriver python

> ID：10995024
> 
> 赞同：0
> 
> 时间：2012-06-12T10:42:08.220
> 
> 标签：python, webdriver

请帮帮我。我已经尝试了每种可能性，但仍然没有解决方案。

1.  python中的webElement到底在哪里。我检查了 API 并在 selenium.webdriver.remote.webelement 中找到了它

但是要使用它，我需要创建一个对象。webelement 需要 2 个参数。那些是什么。任何想法？？

1.  webdriver 对象没有 send_keys。请帮助我。

2.  每当我执行 driver.find_elements_by_class_name() 或任何其他查找操作时，返回应该是一个 webelement。我不能对返回值做任何操作。当我尝试做某事时，总是会出现异常。

3.  我也试过做 webdriver.Firefox.create_webelement 。这也需要一些论据。知道它的论点是什么吗？

我的主要问题是 send_keys 不起作用。我已经重新验证我已经在 python 中正确安装了 selenium。做了一切。

请帮助各位。任何建议都会很棒。如果有人分享教程，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:05:17.920

首先，您需要找到要与之交互的网络元素：

```
driver = webdriver.Chrome()
driver.get(url)
my_element = driver.find_element_by_id('someid')
my_element.send_keys('this is a test')
my_button = driver.find_element_by_name('button')
my_button.click() 
```

# android - Android中的网络三角剖分

> ID：10995025
> 
> 赞同：1
> 
> 时间：2012-06-12T10:42:10.140
> 
> 标签：android

我正在开发一个 Android 应用程序，我需要使用网络三角测量获取当前位置，“LocationManager.NETWORK_PROVIDER”是否支持网络三角测量，还是只提供蜂窝塔位置？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:58:36.527

最后我找到了我自己问题的答案:)。我贴出来供大家参考。

是的，LocationManager.NETWORK_PROVIDER 支持网络三角测量。谷歌已经做了一切。我们不需要担心计算。它为您提供了相当正确的位置。

# css - 在页面加载时在 CSS 中触发没有 javascript 的转换

> ID：10995039
> 
> 赞同：4
> 
> 时间：2012-06-12T10:42:54.710
> 
> 标签：css, css-transitions

我想用 CSS 过渡来增加条的宽度，但不喜欢用悬停事件触发它（比如 [http://jsfiddle.net/TFHn9/](http://jsfiddle.net/TFHn9/)）

我只想有一个即时动画（当页面加载时）——当然没有 Javascript。

有机会实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:45:47.673

Css3 关键帧：[http ://coding.smashingmagazine.com/2011/05/17/an-introduction-to-css3-keyframe-animations/](http://coding.smashingmagazine.com/2011/05/17/an-introduction-to-css3-keyframe-animations/)

# methods - groovy 中的 map.every 和 map.any 有什么区别？

> ID：10995044
> 
> 赞同：1
> 
> 时间：2012-06-12T10:43:07.377
> 
> 标签：methods, groovy, map

我只想问这两种方法的主要区别。当 groovy API 说谓词时，这意味着什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T10:48:11.943

简短说明：

*   谓词是返回布尔值的函数/表达式

*   map.every 仅当谓词对所有元素的计算结果都为 true 时才返回 true

*   如果谓词对至少一个元素的计算结果为 true，则 map.any 返回 true

示例（伪代码）：

```
a = [1,2,3,4,5]
a.every { |x| x < 3 } => false, since 3,4 and 5 are not smaller than 3
a.any   { |x| x < 3 } => true, since 1 and 2 are smaller than 3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T10:48:33.037

如果您阅读文档；

[Map.any 说](http://groovy.codehaus.org/groovy-jdk/java/util/Map.html#any%28groovy.lang.Closure%29)

> 遍历映射的条目，并检查谓词是否对**至少一个条目有效**

Wheras [Map.every 说](http://groovy.codehaus.org/groovy-jdk/java/util/Map.html#every%28groovy.lang.Closure%29)

> 遍历映射的条目，并检查谓词是否对**所有条目**都有效。

*谓词*意味着它通过闭包运行条目并检查 Groovy Truthiness 的结果

示例（使用 Map 将 Frank 的伪代码扩展为实际的 groovy 代码）：

```
a = [a:1,b:2,c:3,d:4]
assert a.every { key, value -> value < 3 } == false // since 3 and 4 are not smaller than 3
assert a.any   { key, value -> value < 3 } == true  // since 1 and 2 are smaller than 3 
```

# python - 如何在 Python 中启动多个 webdriver 实例

> ID：10995045
> 
> 赞同：0
> 
> 时间：2012-06-12T10:43:07.220
> 
> 标签：python, selenium, webdriver

我必须使用 Selenium 自动化多个网页。首选方法是 - Windows 上使用 Python 的 WebDriver。由于要测试的网页数量非常多，我试图弄清楚是否可以使这个过程并行。例如，从命令行，我执行

```
python script1.py 
```

假设我有 100 个这样的脚本，我想分批执行它们，每批 5 个。还有一个要求是完成 5 个脚本中的 1 个，然后主控器启动第 6 个脚本以始终保持 5 个脚本并行。

我在文档和一些论坛中搜索过。但我找不到任何帮助。我过去做过类似的事情，但实际上涉及从代码中触发多个浏览器，所以有点不同。这涉及 Python 和 Webdriver。任何帮助表示赞赏。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:01:52.770

我不知道为什么这被否决了？无论如何，我找到了一种方法来做到这一点。

可以通过导入 subprocess 模块然后将参数传递给调用函数来完成 -

```
 subprocess.call(["python", "d:/pysel/hello.py"])
  subprocess.call(["python", "d:/pysel/goodbye.py"]) 
```

它并不完全平行。但可能适用于我的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:41:36.640

我想做类似的事情，我想一次运行多个测试用例。我想这可以通过使用[Selenium Grid](http://selenium-grid.seleniumhq.org/)来实现。

# performance - 划分两个矩阵时的内存和时间问题

> ID：10995046
> 
> 赞同：4
> 
> 时间：2012-06-12T10:43:08.950
> 
> 标签：performance, matlab, matrix, linear-algebra, sparse-matrix

我在matlab中有两个稀疏矩阵

大小为 9000x180 万的 M1 和大小为 180 万x180 万的 M2。

现在我需要计算表达式

```
M1/M2 
```

我花了大约一个小时。正常吗？matlab中是否有任何有效的方法可以克服这个时间问题。我的意思是它很多，如果我进行多次迭代，那么它将继续花费 1 小时。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T22:03:34.933

基于假设使用一些迭代方法（如共轭梯度或 Kaczmarz 方法）的快速粗略计算，并且插入大小让我相信一个小时还不错。

由于三对角矩阵被“反转”（如果不是明确的），这两种方法都将采用接近“一些接近统一的标量因子”乘以〜9000乘以1.8e6乘以“迭代次数”的指令数收敛所需”。引号中的两件事的乘积可能在 50 左右（最小）到 1000 左右（最大）。我没有精心挑选这些来让你的数学工作，这些是我对完成这些的期望。如果您假设每秒大约 1e9 条指令（这对内存访问等的影响不大），您将得到大约 13 分钟到大约 4.5 小时。

因此，对于利用稀疏性的算法来说，它似乎在正确的范围内。

如果您了解结构，也许可以更好地利用它，但可能不会太多。

请注意，这并不是说 13 分钟是可以实现的。

编辑：一个旁注，我不确定正在使用什么，但我假设迭代方法。也有可能使用直接方法[（如here所述）。](http://www.cise.ufl.edu/research/sparse/CSparse/)如果您利用稀疏权， 这些方法对于稀疏系统可能*非常有效。*Matlab 很可能默认使用这些，但值得研究 Matlab 在您的情况下正在做什么。

在我有限的经验中，迭代方法通常比直接方法更受欢迎，因为系统的大小变得很大（你的很大）。我们的线性系统也被证明是块三对角线，就像它们在图像处理中经常做的那样。

# css - 从左 <-> 右翻转 CSS 属性的好算法

> ID：10995050
> 
> 赞同：0
> 
> 时间：2012-06-12T10:43:22.807
> 
> 标签：css

是否可以安全地假设所有以“left”结尾的属性都有相应的“right”，反之亦然，并且以另一种方式翻转它们就足够了？自然也需要左右翻转值。我错过了什么吗？

编辑是的，我想为 RTL 和 LTR 等创建一个水平翻转样式表。

想象一个简单的设计样式表

```
#something {
   border-left: 2px;
   border-right: 5px;
   border-top: 12px;
} 
```

h翻转变成

```
#something {
   border-right: 2px;
   border-left: 5px;
   border-top: 12px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:25:49.473

并非所有左右属性都以`-left`or结尾`-right`。

例如，您有`border-left-color`and `border-right-color`，因此您需要做的不仅仅是检查“以 -left 结尾或以 -right 结尾”。

您可能还想查看 Mozilla 的[RTL Locales](https://developer.mozilla.org/en/Making_Sure_Your_Theme_Works_with_RTL_Locales)页面。有趣的阅​​读。

# c# - 标签文本不从后面的代码更改

> ID：10995056
> 
> 赞同：0
> 
> 时间：2012-06-12T10:43:42.910
> 
> 标签：c#, ajax

我有 ajax 评级控制，我试图在标签中捕获它的评级值。

评级控制代码是：

```
<asp:UpdatePanel runat="server" ID="upRating">
      <ContentTemplate>
      <act:Rating ID="rfixer" runat="server" CurrentRating="0" MaxRating="4" EmptyStarCssClass="emptypng" FilledStarCssClass="smileypng" StarCssClass="smileypng" WaitingStarCssClass="donesmileypng" OnChanged="Rating1_Changed">
      </act:Rating>
      <asp:Label ID="lblRating" runat="server" ForeColor="Red"></asp:Label>
</ContentTemplate>
</asp:UpdatePanel> 
```

更改评级时，我正在更改标签文本：

```
 protected void Rating1_Changed(object sender, AjaxControlToolkit.RatingEventArgs e)
{
    System.Threading.Thread.Sleep(500);
    int iRate = Convert.ToInt16(e.Value);
    string strMessage = string.Empty;
    switch (iRate)
    {
        case 1:
            strMessage = "Not Useful";
            break;
        case 2:
            strMessage = "Average";
            break;
        case 3:
            strMessage = "Useful";
            break;
        case 4:
            strMessage = "Informative";
            break;
        case 5:
            strMessage = "Excellent";
            break;
    }
    strMessage = "Thanks for Rating, You found this Question " + strMessage;
    lblRating.Text = iRate.ToString();

   // e.CallbackResult = strMessage;

} 
```

但是标签中的文本永远不会改变。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:53:27.683

`AutoPostBack="true"`在您的评级控件中设置

```
 <act:Rating ID="rfixer" runat="server" AutoPostBack="true" CurrentRating="0" MaxRating="4" EmptyStarCssClass="emptypng" FilledStarCssClass="smileypng" StarCssClass="smileypng" WaitingStarCssClass="donesmileypng" OnChanged="Rating1_Changed">
  </act:Rating> 
```

# java - iText - 导出 PDF - 不平衡的开始结束文本运算符

> ID：10995061
> 
> 赞同：2
> 
> 时间：2012-06-12T10:44:03.213
> 
> 标签：java, pdf, itext

使用 iText 以编程方式创建 PDF 文件的方法有两种：

1.  使用高级对象，例如`Paragraph`,`Chunk`等
2.  使用低级功能。`PdfContentByte`这是使用类的圆顶。

第二种方式在每次插入新数据之前和之后使用`beginText`and 。`endText`

第一个也需要这样做吗？它使用`beginText`and`endText`吗？

我正在使用第一种方式，我得到了一个不平衡的开始结束文本运算符异常。

怎么会这样 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:11:32.153

# 分析

如果我们查看 iText API：

> [PdfContentByte](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfContentByte.html)是一个包含用户定位的页面文本和图形内容的对象。它知道如何应用正确的字体编码。
> 
> [块](http://api.itextpdf.com/itext/com/itextpdf/text/Chunk.html)是可以添加到文档中的文本中最小的重要部分。大多数元素可以分为一个或多个块。块是具有特定字体的字符串。所有其他布局参数都应在添加此文本块的对象中定义。

PdfContentByte 和 Chunk (Element) 用于不同的目的。它们没有任何共同点，也没有接口，也没有超类（不包括 Object ofc）。

# 问/答

> 第一个为什么也这样做？

它使用 begin 开始文本的写入和 end 完成文本的写入并使当前字体无效。

> 它使用 beginText 和 endText 吗？

不，像 Chunk 和 Paragraph 这样的元素不使用 begin 和 end。它使用 StringBuffer 来保存其文本值。

> 为什么我会收到“不平衡的开始结束文本运算符”异常？

如果您查看[PdfContentByte 的 beginText() 和 endText() 源](http://grepcode.com/file/repo1.maven.org/maven2/com.itextpdf/itextpdf/5.2.0/com/itextpdf/text/pdf/PdfContentByte.java#PdfContentByte.beginText%28%29)，您会看到，如果我们尝试在文本尚未完成时开始文本，或在文本尚未开始时结束文本，我们将得到此异常。

* * *

确保在开始向其添加任何元素之前调用了 document.open() 并在完成文档时调用了 document.close()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:05:28.457

在 iText 中使用高级对象时，您无需担心`beginText()`和`endText()`方法。看看这个 Hello World[示例](http://itextpdf.com/examples/iia.php?id=12)。

# objective-c - 如何清除 NSButton 的 keyEquivalent？

> ID：10995062
> 
> 赞同：0
> 
> 时间：2012-06-12T10:44:14.677
> 
> 标签：objective-c, cocoa

如何清除 NSButton 的 keyEquivalent ？

我试过了：

```
[theButton setKeyEquivalent:nil]; 
```

但这似乎不正确！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:46:13.713

您正在寻找的命令是：

```
[theButton setKeyEquivalent:@""]; 
```

# ruby-on-rails - 使用 Rails 审核的 gem 的活动历史记录

> ID：10995064
> 
> 赞同：5
> 
> 时间：2012-06-12T10:44:24.817
> 
> 标签：ruby-on-rails, android-activity, history, audit

我有带有某些模型的 rails 3 应用程序，例如 Product 和 User。我正在使用“经过审核”的 gem 来跟踪产品的变化，它既简单又好用。

但是我想制作一个特殊的页面，我想在其中放置日常活动历史记录。第一步我需要 Audits.all.order("created_at") 之类的东西，但没有这样的模型。

问题：我怎样才能获得今天所有型号的所有审核？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T11:07:52.857

我认为您应该`Audited::Adapters::ActiveRecord::Audit.where("created_at >= ?", Date.today)`根据[gem结构进行查询](https://github.com/collectiveidea/audited/blob/master/lib/audited/adapters/active_record/audit.rb)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-30T07:23:14.460

为了能够通过以下方式访问今天的审计：

```
@audits = Audit.today 
```

像这样创建一个`audit.rb`文件`app/models/`：

```
Audit = Audited.audit_class

class Audit
  scope :today, -> do
    where("created_at >= ?", Time.zone.today.midnight).reorder(:created_at)
  end
end 
```

[Audited 还提供了一些自己的命名范围，这些范围](https://github.com/collectiveidea/audited/blob/b6843ca52ff37eb2f6787b60a5d2798c4835d89a/lib/audited/adapters/active_record/audit.rb#L24-L33)可能被证明是有用的：

```
scope :descending,    ->{ reorder("version DESC") }
scope :creates,       ->{ where({:action => 'create'}) }
scope :updates,       ->{ where({:action => 'update'}) }
scope :destroys,      ->{ where({:action => 'destroy'}) }

scope :up_until,      ->(date_or_time){ where("created_at <= ?", date_or_time) }
scope :from_version,  ->(version){ where(['version >= ?', version]) }
scope :to_version,    ->(version){ where(['version <= ?', version]) }
scope :auditable_finder, ->(auditable_id, auditable_type){ where(auditable_id: auditable_id, auditable_type: auditable_type) } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T14:53:21.683

我的解决方案只是扩展审计对象，例如

```
cat lib/audit_extensions.rb
# The audit class is part of audited plugin
# we reopen here to add search functionality
require 'audited'

module AuditExtentions
  def self.included(base)
    base.send :include, InstanceMethods
    base.class_eval do
      belongs_to :search_users, :class_name => 'User', :foreign_key => :user_id
      scoped_search :on => :username, :complete_value => true
      scoped_search :on => :audited_changes, :rename => 'changes'
      scoped_search :on => :created_at, :complete_value => true, :rename => :time, :default_order => :desc
      scoped_search :on => :action, :complete_value => { :create => 'create', :update => 'update', :delete => 'destroy' }
      before_save :ensure_username

    end
  end

  module InstanceMethods
    private

    def ensure_username
      self.username ||= User.current.to_s rescue ""
    end

  end
end

Audit = Audited.audit_class
Audit.send(:include, AuditExtentions) 
```

# qt - Qt 原生 UI 库？

> ID：10995066
> 
> 赞同：1
> 
> 时间：2012-06-12T10:44:25.770
> 
> 标签：qt

我是 QT 的新手。我开始使用 QT Creator。有没有办法用 QT 创建本机 OS UI？是否有任何 Windows 和 OS X UI 库或视觉设计师？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:22:10.320

如果您想要在 Windows 上看起来像 Windows 的本地操作系统 UI 和在 OS X 上看起来像 OS X 的东西，您应该在 Qt Creator 中创建一个“Qt Designer Form Class”。

这将为您提供一个 .cpp、一个 .h 和一个 .ui 文件。此 .ui 文件的 UI 设计器将自动打开。

您也可以通过选择“Qt Designer Form”仅创建 .ui 文件，但是您必须自己将 .ui 文件（或者更确切地说由 Qt 生成的类）集成到您的代码中。

# java - DefaultTableModel 在填充数组上给出 Null 错误

> ID：10995069
> 
> 赞同：0
> 
> 时间：2012-06-12T10:44:41.787
> 
> 标签：java, swing, null, jakarta-mail, defaulttablemodel

我正在尝试使用 JavaMail API 并在文本中使用它。在 cmd 中打印出我所有的电子邮件主题。所以我想将它实现到 GUI 中。

但由于某种原因，我得到了一个空错误，即使我调试了程序并发现它用来填充 DefaultTableModel 的数组确实充满了东西。

当应用程序将信息放入模型本身时，似乎会发生这种情况：

```
 try {
        for(Message m : message) {
            model.addRow(new Object[]{m.getFrom(), m.getSubject(), (m.getFlags().contains(Flags.Flag.SEEN) ? "Yes" : "No")});
        }
    } catch (MessagingException ex) {
        JOptionPane.showMessageDialog(paneParent, "An Error Occured:\n" + ex.getMessage(),
                "Error", JOptionPane.ERROR_MESSAGE);
    } 
```

知道为什么会发生这种情况吗？数组不为空。我检查了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:07:07.473

问题解决了。

我是个不检查 StackTrace 的白痴。它持有“FolderClosedException”，这让我找到了解决方案。

# jquery - 获取div内所有元素的类

> ID：10995071
> 
> 赞同：-4
> 
> 时间：2012-06-12T10:44:57.453
> 
> 标签：jquery

好的。我想在主 div 中获取 div 的所有类名。

如何做到这一点才能在 div 中获取所有 div 类？

例如：

```
<div id="themaindiv">
    <div class="div1"></div>
    <div class="div2"></div>
    <div class="div3"></div>
</div> 
```

现在，我想获取名为“themaindiv”的 div 内的所有 div 的所有类名，但我只是不知道该怎么做。

更新：然后将那些被函数挂钩的类名显示到指定的div（'#theclassnames'）中。

应该是结果的例子。

```
<div id="theclassnames">div1 div2 div3 div4</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:46:55.223

假设您的意思是要获取每个的类名的数组，`div`它是 的后代`#themaindiv`，您可以使用[`map`](http://api.jquery.com/map/)来获取每个元素的类名，并[`get`](http://api.jquery.com/get/)获取一个数组：

```
var arrayOfClassNames = $("#themaindiv div").map(function() {
    return this.className;
}).get(); 
```

这是一个[工作示例](http://jsfiddle.net/xSVTJ/)。

* * *

一些注意事项：

*   使用普通的 CSS 选择器`#themaindiv div`比使用`find`其他一些答案中的方法更快。

*   使用 native`className`属性比传递`this`给 jQuery 并使用`attr`or`prop`方法更快。

*   如果您不关心最终得到的是 jQuery 实例而不是本机 Array，则可以省略对`get`.

* * *

**更新**

显然，您现在想在另一个`div`. 最简单的方法是简单地使用该`text`方法并传入数组：

```
$("#theclassnames").text(arrayOfClassNames); 
```

这会将 的文本内容设置`#theclassnames`为该数组的字符串表示形式。在您的情况下，这将是“div1，div2，div3”。您可以[在这里看到它的实际效果](http://jsfiddle.net/xSVTJ/3/)。

要完全按照您现在在问题中显示的方式显示它，您可以简单地`join`使用带有空格的数组：

```
$("#theclassnames").text(arrayOfClassNames.join(" "); 
```

这是[另一个工作示例](http://jsfiddle.net/xSVTJ/4/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:47:18.203

```
$("#themaindiv div").each(function(){
    alert($(this).attr("class"));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:47:26.550

怎么样：

```
$('#themaindiv div').each(function(){
    console.log($(this).attr('class'));
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:47:43.380

```
var classes = [];

$('#themaindiv').find('div').each(function(){
    classes.push(this.className);
}); 
```

要显示它们，您可以添加另一个 div ：

```
 <div id=theclassnames></div> 
```

并做类似的事情

```
$('#theclassnames').html(classes.join(' ')); 
```

但是大多数 js 编码员会简单地做`console.log(classes);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T10:47:58.313

**演示** [http://jsfiddle.net/Fb3bN/11/](http://jsfiddle.net/Fb3bN/11/)

**代码**

```
$('#themaindiv').find('div').each(function(){
    alert($(this).prop('class'));
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T10:54:19.870

```
var arrayOfClassNames = [];
$("#themaindiv div").attr('class', function() {
  arrayOfClassNames.push(this.className);
});
console.log(arrayOfClassNames); 
```

**[演示](http://jsfiddle.net/xSVTJ/2/)**

# bluetooth - bluegiga 低功耗 USB 加密狗上的接近配置文件

> ID：10995079
> 
> 赞同：2
> 
> 时间：2012-06-12T10:45:31.793
> 
> 标签：bluetooth, bluetooth-lowenergy

我正在研究低功耗蓝牙配置文件。我正在 Bluegiga USB 低功耗加密狗中开发接近客户端和服务器。我在一个加密狗上编写了 Proximity 服务器，在另一个加密狗上编写了 Proximity 客户端。我能够将警报级别从客户端发送到服务器。当我将加密狗彼此分开时（以研究接近配置文件的工作），我收到“链接监督超时已过期”。
所以我想知道这个超时信息是否正确，即它是否是正确的确认信号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:12:46.730

当设备收到链路监控超时的原因断开连接时，表明远程设备超出范围或已关闭。因此，链路层等待“链路监督超时”时间以确认远程设备不再连接。

然而，在 Proximity 客户端中，根据 BT-SIG 规范，您的应用程序应计算链路损耗和路径损耗[这可以使用远程设备的 RSSI 值计算]，并且一旦超过阈值，就需要向 Proximity 服务器发送适当的警报设备。规范确实将此现象称为链路丢失，但它与链路监督超时不同。

# jquery - 当一个可拖动的对象放在一个可排序的对象上时，甚至会触发什么？

> ID：10995080
> 
> 赞同：0
> 
> 时间：2012-06-12T10:45:38.090
> 
> 标签：jquery

在以下代码（[小提琴](http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/)）中：

```
<div class="connected">
    <div class="myDivs">Hello 01</div>
    <div class="myDivs">Hello 02</div>
    <div class="myDivs excludeThisCss">Hello 03</div>
    <div class="myDivs">Hello 04</div>
    <div class="myDivs">Hello 05</div>
    <div class="myDivs excludeThisCss">Hello 06</div>
    <div class="myDivs">Hello 07</div>
    <div class="myDivs">Hello 08</div>
    <div class="myDivs excludeThisCss">Hello 09</div>
    <div class="myDivs">Hello 10</div>
</div>

<div class="connected">
    <div class="myDivs">Hello 01</div>
    <div class="myDivs">Hello 02</div>
    <div class="myDivs excludeThisCss">Hello 03</div>
    <div class="myDivs">Hello 04</div>
    <div class="myDivs">Hello 05</div>
    <div class="myDivs excludeThisCss">Hello 06</div>
    <div class="myDivs">Hello 07</div>
    <div class="myDivs">Hello 08</div>
    <div class="myDivs excludeThisCss">Hello 09</div>
    <div class="myDivs">Hello 10</div>
</div> 
```

JS：

```
$(function() {
    $( ".connected" ).sortable({
        connectWith : ".connected",
        items       : ".myDivs:not(.excludeThisCss)"
    }).disableSelection();

});​ 
```

CSS：

```
.connected {
    float: left;
    margin: 6px;
}
.myDivs {
    margin: 0 5px 5px 5px;
    padding: 5px;
    font-size: 1.2em;
    font-family: sans-serif;
    width: 120px;
    background: #F2F2F2;
    cursor: pointer;
    border: 1px solid #D9D9D9;
    color: #1C94C4;
}
.excludeThisCss {
    background: pink;
}
​
​ 
```

我正在尝试在拖放项目时执行代码。将可拖动对象放在可排序对象上时是否会触发事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:47:30.820

是的，您可以使用该`stop`事件：

```
stop: function(event, ui) { ... } 
```

[在这里更新了 jsfiddle](http://jsfiddle.net/manseuk/zyUkd/78/)，[活动的文档在这里](http://jqueryui.com/demos/sortable/#event-stop)

该`ui`对象包括以下内容：

*   `ui.helper`- 当前的辅助元素（通常是项目的克隆）
*   `ui.position`- 助手的当前位置
*   `ui.offset`- 助手的当前绝对位置
*   `ui.item`- 当前拖动的元素
*   `ui.placeholder`- 占位符（如果您定义了一个）
*   `ui.sender`- 项目来自的可排序（仅当您从一个连接列表移动到另一个列表时才存在）

# iphone - 带有彩色标签图标的 UITabbar 自定义

> ID：10995082
> 
> 赞同：1
> 
> 时间：2012-06-12T10:45:46.877
> 
> 标签：iphone, objective-c, xcode, ios5, uitabbarcontroller

我在使用标签的彩色图标创建自定义 UITabbar 时遇到问题。我一直在尝试为此找到任何自定义控件，但不幸的是到目前为止还没有。我已经搜索了 StackOverFlow 数据库，但它没有符合我的条件。唯一最接近我要求的是底部有一堆按钮的视图，但我需要通过 UITabbar 自定义来完成。需要一些方向的家伙。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:04:56.070

此处提供的示例代码将为您提供帮助 [https://github.com/aalittle/ALCustomTabBarController](https://github.com/aalittle/ALCustomTabBarController)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:16:29.753

我希望[这个](http://dl.dropbox.com/u/45432200/WriteProject_CustomTabBar.zip)演示可以帮助您满足您的需求。

# clearcase - 为什么它不允许更改默认的 rebase 活动？

> ID：10995089
> 
> 赞同：1
> 
> 时间：2012-06-12T10:46:16.770
> 
> 标签：clearcase, clearcase-ucm

我们在多站点 UCM 环境中工作。

在我的同事试图对流进行变基时，他被阻止这样做，因为该流中已经有一个交付待处理。

现在在他看来，rebase 活动是默认设置的。

在主副本中接受交付后，其他人重新设置了相同的流。

现在，随着流的更新，我的同事不允许变基。但是，当我们试图从视图属性中更改默认活动时，它不允许并说正在进行变基。

同步后会自动修正吗？或者它会不断发生，为什么会发生以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:59:59.600

如果您正在处理快照视图，首先要做的是完整更新（从视图的根目录）

您还需要检查您所在的 Stream 的变基状态（以及在正确的站点上，具体取决于实际启动变基的位置，以考虑多站点方面）。

```
cleartool rebase -status -stream yourStream@\YourPVob 
```

只要该状态表明变基正在进行中，[它就需要完成](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.hlp.doc/cc_main/to_complete_rebase.htm)（特别是如果它处于“完成”阶段：取消变基可能由于各种原因而失败：请参阅[技术说明 2059393](https://stackoverflow.com/questions/2059326/git-equivalent-of-subversions-url-keyword-expansion/2059393#2059393)）。
该状态将提及当前受所述变基影响的视图的名称。

# perl - 3G 调制解调器中的错误检测

> ID：10995095
> 
> 赞同：3
> 
> 时间：2012-06-12T10:46:32.913
> 
> 标签：perl, at-command

我正在尝试向用于从我们的监控系统发送 SMS 消息的脚本添加一些错误检测。大多数时候它就像一个魅力，但在极少数情况下它会停止发送消息，我们不知道为什么。

我们无法重现该错误，所以我想知道是否有人遇到过类似的问题。下面是发送消息的代码，下面是我可能能够捕捉到错误的想法。

这是发送消息的代码：

```
sub sendsms {
  my ($number,$msg) = @_;
  my $store = undef;
  my $status = undef;
  $msg =~ tr/\\[\]_'^~\{\}\|/\/\(\)\-"??\(\)!/; # \ -> /, [ -> (, ] -> ), ...., strippa Ãºt [ ] _ ' ^ ~ { } | \
  $msg =~ tr/\xe1\xe9\xed\xf3\xfa\xfd\xf0\xfe\xe6\xf6\xc1\xc9\xcd\xd3\xda\xdd\xd0\xde\xc6\xd6/aeiouydtaoAEIOUYDTAO/;
  for (my $i = 0; $i < length($msg); $i++) {
    substr($msg,$i,1) = '_' if (ord(substr($msg,$i,1)) < 0x20 || ord(substr($msg,$i,1)) > 0x7f);
  }
  my $s = substr($msg,0,$maxlen);
  RETRY: for (my $t = 0; $t < 5; $t++) {
    eval {
      put('AT+CMGD='.($next_store+1), 'OK');
      put('AT+CSCA="'.$sca.'",145', 'OK');
      put('AT+CMGF=1', 'OK');
      put('AT+CMGW="'.$number.'",145', '>');
      put($s, '>');
      my $a = put("\x{1a}", undef);
      print "a = '$a'\n" if ($verbose);
      if ($a =~ /\+CMGW: ([0-9]*)/) {
        $store = $1;
        last RETRY;
      }
     };
    if ($@) {
      print "ERROR: attempt $t: $@\n";
    }
    sleep 2*($t+1);
  }
  if (defined $store) {
    print "Message store $store\n" if ($verbose);
    put('AT+CMSS='.$store.',"'.$number.'",145',undef);
    $next_store = (($store - 1) + 1) % $stores;
  }
  else {
    die "Message not stored";
  }
} 
```

放函数：

```
sub put {
  my ($cmd,$expect) = @_;
  print "Sending command '$cmd' expecting '$expect'\n" if ($verbose);
  $modem->atsend($cmd."\r\n") || die "FAILED send\n";
  my $a = $modem->answer();
  die "Failed '$cmd' expected '$expect' got '$a'\n" if (defined $expect && !($a =~ /$expect/));
  return $a;
} 
```

就像我之前说的，这在 99% 的时间里都有效。错误似乎是消息被写入商店但从未发送过。

我的想法：

```
eval {'$status = AT+CPAS'};
if (defined $status and ($status == '+CPAS: 1' or $status == '+CPAS: 2')){
    print "Modem returned an error status: ".$status;
    flush_stores();
    sendsms('+xxxxxxxxxx', 'There is an error in the 3G modem');
} 
```

冲洗功能：

```
sub flush_stores {
   for (my $i = 0; $i < $stores; $i++) {
      put('AT+CMGD='.($i+1), 'OK');
   }
} 
```

这行得通吗？

如果没有，会怎样？

吉斯利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:55:36.540

这似乎是一个硬件问题。我们已经更换了 3G 调制解调器和 SIM 卡，目前一切正常。知道是否有任何方法可以检测到这些类型的故障会很有趣。

# javascript - url或cookie查询中的动态值和参数，如何？

> ID：10995097
> 
> 赞同：1
> 
> 时间：2012-06-12T10:46:52.913
> 
> 标签：javascript, jquery, url, cookies

我试图弄清楚如何在查询的特定部分添加、更改或删除值和参数。

我有一个 cookie `$.cookie('productsInBasket', '&i=' + productId + '&q=' + productQty + '&c=' + productSize);`，应该在其中动态添加和删除 productId、productQty 和 productSize。

所以它可以是`&i=2441&q=1&c=2521`或`&i=2441,2442,2443&q=1&c=2521`或`&i=2441,2442,2443&q=1,3,14&c=2521,2522,2523`或......好吧，你明白了。

实现这一目标的方法是什么？

谢谢！

PS 那应该是 jQuery 或 Javascript 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:04:25.583

假设您在数组中有值，

```
​var i = [1,2,3];
var q = [5,10,15];
var c = [100,200,300]; 
```

一个简单的函数可以从数组中构建你的 cookie：

```
function createCookie(i,q,c){
    return ("&i="+i.join(',')+"&q="+q.join(',')+"&c="+c.join(','));
} 
```

[演示](http://jsfiddle.net/Fv2St/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:48:09.703

我不会说我的方式是正确的，但这是我自己的解决方法。

我简单地创建了 4 个 cookie，3 个用于 &i=、&q=、&c=，第 4 个用于将它们合并在一起。

代码是：

```
$.cookie('productsInBasketItems', productId);
$.cookie('productsInBasketQty', productQty);
$.cookie('productsInBasketColors', productSize);

$.cookie('productsInBasketMerge', '&i=' + $.cookie('productsInBasketItems') + '&q=' + $.cookie('productsInBasketQty') + '&c=' + $.cookie('productsInBasketColors')); 
```

这样我就可以在我的页面中操纵每个值及其选项。

当然，我认为 .split() 中的 .split() 有更优雅的方法，但我的知识不允许我花太多时间在这上面。

希望这会帮助任何人。

# android - 从另一个正在运行的 android 应用程序中检索数据

> ID：10995103
> 
> 赞同：1
> 
> 时间：2012-06-12T10:47:02.947
> 
> 标签：android

我正在构建一个应用程序，我希望心率超过某个阈值触发和事件。我想知道是否有任何方法可以通过在我自己的应用程序中使用手机上另一个应用程序（心率应用程序）检索到的数据来做到这一点。我宁愿不必从头开始构建心率传感器！

例如，使用来自这样的应用程序的数据：https: [//play.google.com/store/apps/details?id=com.macropinch.hydra.android&hl=en](https://play.google.com/store/apps/details?id=com.macropinch.hydra.android&hl=en)

我什至可以这样做吗？还是我需要开发人员的许可，或者我可以将数据输出到手机上的文件中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:51:24.997

这已经在另一个线程中讨论过了。主要有两种方法，一种是contentprovider，一种是sharedpreferences。但是提供数据的应用程序应该实现这些。[两个应用程序之间的数据共享](https://stackoverflow.com/questions/5745243/data-sharing-between-two-applications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:02:06.027

> ```
> I'm wondering if there's any way to do this by using data retrieved 
> ```
> 
> 在我自己的应用程序中通过手机上的另一个应用程序（心率应用程序）

如果其他应用程序正在提供远程服务（查看 AIDL），那么您的应用程序可以调用该服务来实现功能。但 AFAIK Cardiograph 不提供此类服务。

> 或者我需要开发人员的许可，还是将数据输出到手机上的文件中我可以读取？

我在这里看到的唯一选择是获取源代码，显然您需要联系开发人员：D

如果此应用程序在 SD 卡上输出数据，那么您可以读取它。

# javascript - 对于 HTML 表格列中的每个单元格，X?

> ID：10995105
> 
> 赞同：1
> 
> 时间：2012-06-12T10:47:09.807
> 
> 标签：javascript, jquery, css, html-table

只是想看看是否有更好的方法来做到这一点。

假设我有您的标准 HTML 表格，其中包含几行和几列数据。我想做的是将函数应用于属于该列的每一行或单元格。我现在正在尝试的是一个 3 深度循环，实际上并不是最好的。

```
<table id="myTable"> 
<thead> 
<tr> 
    <th>Last Name</th> 
    <th>First Name</th> 
    <th>Email</th> 
    <th>Due</th> 
    <th>Web Site</th> 
</tr> 
</thead> 
<tbody> 
<tr> 
    <td>Smith</td> 
    <td>John</td> 
    <td>jsmith@example.com</td> 
    <td>$50.00</td> 
    <td>http://www.jsmith.example.com</td> 
</tr> 
<tr> 
    <td>Bach</td> 
    <td>Frank</td> 
    <td>fbach@example.com</td> 
    <td>$50.00</td> 
    <td>http://www.frank.example.com</td> 
</tr> 
<tr> 
    <td>Doe</td> 
    <td>Jason</td> 
    <td>jdoe@example.com</td> 
    <td>$100.00</td> 
    <td>http://www.jdoe.example.com</td> 
</tr> 
<tr> 
    <td>Conway</td> 
    <td>Tim</td> 
    <td>tconway@example.net</td> 
    <td>$50.00</td> 
    <td>http://www.timconway.example.com</td> 
</tr> 
</tbody> 
</table> 
```

假设我想将网站列字符串大写或用它做一些简洁的事情。我可能会：

```
*select the tbody using dom selector or jquery.
*for loop with each column
   *check if the data is what I want
*for loop for each row
   *do my function to each cell 
```

这可能有点慢，我总是尽量避免嵌套循环。有没有可能使用 Dom 将列视为容器？

```
IE  for (cell x in Column y)
{ doMyfunction(); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:58:19.263

如果你使用 jQuery，你可以使用 .each() 函数：

```
$('#myTable td').each(function () {
    // action to perform.  Use $(this) for changing each cell
}); 
```

如果您知道您只想更改一行中的一个特定单元格，那么一旦您知道它是哪个单元格，使用 :eq() 或 :nth-child() 选择器将允许在没有其他单元格的情况下操作特定单元格行这样做。

下面的代码将操作行中的第一个单元格，因为 eq() 的索引从 0 开始。

```
$('#myTable tr td:eq(0)').each(function () {
    // action to perform.  Use $(this) for changing each cell
}); 
```

下面的代码仍将操作第一个孩子，但 nth-child() 的索引从 1 开始

```
$('#myTable tr td:nth-child(1)').each(function () {
    // action to perform.  Use $(this) for changing each cell
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:57:06.527

如果您只是想对其进行样式设置，则使用 css 会更快

```
tbody tr td:nth-child(4){font-weight:bold;} 
```

据我所知，您还可以在 JQuery 中使用该 css 选择器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:56:16.217

使用 jQuery

```
$("td", "#myTable tbody").each(function(index, elem){
// do my stuff here
}); 
```

# c# - MVVM中异步执行的责任

> ID：10995113
> 
> 赞同：2
> 
> 时间：2012-06-12T10:47:28.153
> 
> 标签：c#, mvvm, task-parallel-library, coroutine

谁负责 MVVM 中的异步数据获取？例如，我的视图有 5 个不同的数据集合要获取，我希望以预定义的顺序异步检索这些数据。出于这个原因，我正在使用协程和任务。

问题：VM 是否对此负责，我的模型/存储库是否应该定义 GetCustomersAsync 方法，它将查询包装在任务中，还是应该留给 VM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:53:18.200

我个人认为视图模型应该对此负责，因为模型和视图之间的坐标。模型和存储库应该对它们最初的用途负责。

当然，视图模型可以将这种类型的工作交给辅助类。

# html - 播放音频文件时隐藏 mp3 url

> ID：10995114
> 
> 赞同：1
> 
> 时间：2012-06-12T10:47:28.607
> 
> 标签：html, mp3

我有一个网页，可以通过手机动态下载 mp3 文件。我想添加一个功能，让人们可以在下载文件之前通过他们的桌面收听歌曲。

挑战是，我不希望 mp3 文件链接显示在页面代码中，我更喜欢不同的 url，例如

```
<a href='http://mysvr.com/getfile/121233444/'>Preview song</a> 
```

它被传递给需要 mp3 文件源并让它播放文件的播放器。

我不希望预览文件的人不知道正在播放的文件的真实网址，以防止未经授权的下载。

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:06:16.043

首先拒绝所有通过互联网访问包含 mp3 文件的目录。然后编写一个处理程序文件来播放 mp3。处理程序文件将从查询字符串中获取 mp3 的名称并在播放器上播放文件。获取 url ，解析和播放将在代码隐藏中完成，因此用户将无法看到 mp3 的 url

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:57:32.300

这将取决于您的设置。使其不可见的唯一真正方法是使用服务器端代码（php、asp 等）。根据定义，任何客户端代码对最终用户都是可见的。您可以尝试混淆链接，例如使用隐藏在某处的一些最小化的 JavaScript，但任何搜索足够努力的人总是可以看到它。

# xml - xsl 获取子节点

> ID：10995116
> 
> 赞同：2
> 
> 时间：2012-06-12T10:47:30.980
> 
> 标签：xml, xslt

我是 xsl 的新手，需要帮助:(。我需要将子节点作为父注释的值。

```
<planet>
    <venus> sometext 
        <mass>123</mass>
    </venus> 
    <mars>text about mars</mars>
</planet> 
```

所以我必须以这种形式得到它：

```
<venus>sometext
    <mass>123</mass>
</venus>
<mars> text about mars <mars> 
```

节点必须在符号“<”和“>”内，因为编译认为它们是父注释的内容。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:07:48.100

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="planet">
  <xsl:apply-templates/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<planet> 
    <venus> sometext  
        <mass>123</mass> 
    </venus>  
    <mars>text about mars</mars> 
</planet> 
```

**产生想要的正确结果：**

```
<venus> sometext
        <mass>123</mass>
</venus>
<mars>text about mars</mars> 
```

**第二种解决方案 - 更直接和更短**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <xsl:copy-of select="node()"/>
 </xsl:template>
</xsl:stylesheet> 
```

**说明**：

在这两种解决方案中，我们都避免复制元素树的根，并复制它的子树。

在第一个解决方案中，子树的复制是**[恒等规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**的影响——如果将来我们改变计划并决定不简单地复制子树的节点，而是转换部分或全部节点，这给了我们更大的灵活性.

在第二个解决方案中，复制是通过一条 XSLT 指令完成的—— `<xsl:copy-of>`。在这里，我们用灵活性换取速度和紧凑性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:25:18.090

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <xsl:for-each select="*">
      <xsl:apply-templates select="@*|node()"/>
    </xsl:for-each>
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

# sql - xp_cmdshell 查询长度太大

> ID：10995117
> 
> 赞同：1
> 
> 时间：2012-06-12T10:47:31.573
> 
> 标签：sql, tsql, xp-cmdshell

所有，我需要将一个大型 SQL 表中的数据集写入 .txt 文件。为此，我选择使用 xp_cmdshell。我用来创建 Data.txt 文件的查询是

```
declare @sql varchar(8000) 
select @sql = 'bcp "SELECT /*Lots of field names here*/ ' +
'FROM [SomeDatabase]..TableName WHERE /*Some Long Where Clause*/" ' + 
'queryout "M:\\SomeDir\\SomeOtherDirectory\\Data.txt" -c -t -T -S' + @@servername 
exec master..xp_cmdshell @sql 
```

我遇到的问题是`SELECT`我使用的查询超过了命令行强加的 1024 个字符限制。为了解决这个问题，我决定尝试并使用`sqlcmd`来尝试从文件中执行我需要的 SQL 查询，从而消除查询长度的错误。我尝试了以下查询

```
DECLARE @DatabaseName VARCHAR(255)
DECLARE @cmd VARCHAR(8000)
SET @DatabaseName = 'SomeDatabase' 
SET @CMD = 'SQLCMD -E -S (localhost) -d ' + @DBName + 
    'i "M:\\SomeDir\\SomeOtherDirectory\\tmpTestQuery.sql"' 
EXEC master..xp_cmdshell @CMD 
```

其中 'tmpTestQuery.sql' 包含我要执行的长查询，但出现以下错误

```
HResult 0x2AF9, Level 16, State 1
TCP Provider: No such host is known.
NULL
Sqlcmd: Error: Microsoft SQL Server Native Client 10.0 : A network-related or instance-
    specific error has occurred while establishing a connection to SQL Server. 
    Server is not found or not accessible. Check if instance name is correct and 
    if SQL Server is configured to allow remote connections. 
    For more information see SQL Server Books Online..
Sqlcmd: Error: Microsoft SQL Server Native Client 10.0 : Login timeout expired.
NULL 
```

我启用了远程连接。

**我想知道我做错了什么，如果有另一种方法可以解决我在使用 xp_cmdshell 时遇到的查询长度问题？**

谢谢你的时间。

*笔记。这个查询最终会从 C# 中调用，因此计划是将很长的查询写入一个临时的 .txt 文件，使用概述的方法执行它，完成后删除。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:53:42.317

绕过 BCP 限制的一种方法是将复杂查询包装在视图或存储过程中，然后让 BCP 命令查询该对象。

您的 SQLCMD 可能无法工作，因为`localhost`. 尝试：

```
...
SET @CMD = 'SQLCMD -E -S localhost -d ' + @DBName + 
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:51:43.613

您可以将所需数据插入到全局临时表 ( `##temp_table`) 中，然后将其用作源：

```
declare @sql varchar(8000) 
select @sql = 'bcp "SELECT * FROM ##temp_table" ' + 
'queryout "M:\\SomeDir\\SomeOtherDirectory\\Data.txt" -c -t -T -S' + @@servername 
exec master..xp_cmdshell @sql 
```

# gcc - 找不到入口符号 _start

> ID：10995118
> 
> 赞同：13
> 
> 时间：2012-06-12T10:47:34.423
> 
> 标签：gcc

我在 gcc 上编译的 c 代码给出了错误`Cannot find entry symbol _start defaulting to 00000`。谁能告诉我为什么以及如何纠正它？

命令行是`arm-none-eabi-gcc -O3 -march=armv7-a -mtune=cortex-a8 -mfpu=neon -ftree-vectorize -mfloat-abi=softfp file path`，目标平台是 a-8 sitara cortex 处理器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-13T12:59:23.437

编译器抛出上述错误的唯一原因是操作系统为运行您的代码而生成的启动代码（_start 函数）找不到默认或注册的函数 main。因此，您可以使用 _start 函数代替 main 函数，但编译命令应该是 gcc -nostartfiles filename.c 但是使用 _start 会有很多异常，所以最好使用 main 代替。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-21T19:01:50.247

-none- 部分表示您的工具链不是为特定操作系统构建的，因此您必须定义一个 _start 入口点。对于为特定操作系统构建的非裸机工具链，_start 由标准库提供，以便在一切设置好时调用 main。

# javascript - 创建一个包含多个 HTML 元素属性的嵌套数组

> ID：10995121
> 
> 赞同：0
> 
> 时间：2012-06-12T10:47:49.700
> 
> 标签：javascript, json

如果我有这样的 HTML：

```
<ul>
    <li id="id1">Some Text</li>
    <li id="id2">Other Text</li>
    <-- more items could be here -->
</ul> 
```

如何创建一个包含 JSON 对象的数组，其中包含列表中每个列表项的属性，例如：

```
var itemsData = [
    {
         "id" : id,
         "name" : name
     },
     {
         "id" : id,
         "name" : name
     }
] 
```

where`id`和`name`equal to`$(this).attr('id')`和`$(this).text()`where`$(this)`指的是单个`li`项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:51:00.913

```
itemsData = [];
$('ul > li').each(function(){
   itemsData.push({"id" : this.id, "name" : $(this).text()})
}); 
```

[**DEMO**](http://jsbin.com/abeyet)（见控制台输出）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T10:51:25.747

通过使用`.each`：

```
var itemsData = [];

$('li').each(function() {
    var $this = $(this);
    itemsData.push({
      id: $this.attr('id'),
      name: $this.text()
    });
});

console.log(itemsData); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:52:34.033

```
var arr = new Array();
$("ul li").each(function(index){
   arr[index]['id'] = $(this).attr('id');
   arr[index]['name'] = $(this).attr('name');
}); 
```

# iphone - pjsip iPhone 缺少库

> ID：10995122
> 
> 赞同：1
> 
> 时间：2012-06-12T10:47:55.380
> 
> 标签：iphone, ios, voip

我正在使用[pjsip](http://www.pjsip.org/download.htm)在 iPhone 上进行语音聊天。我[按照说明](http://trac.pjsip.org/repos/wiki/Getting-Started/iPhone)完成的步骤是：

1.  按照给定的方式更改了 config_site.h。

2.  成功运行

    ```
    $ cd /path/to/your/pjsip/dir
    $ ./configure-iphone
    $ make dep && make clean && make 
    ```

3.  打开 ipjsua.xcodeproj 进行构建，但缺少一些库（以红色突出显示）。因此，该项目没有建立，我无法继续进行。

![缺少库的屏幕截图](../Images/b0a44e9551070818ff20448fac34b728.png)

我应该如何构建项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:51:27.977

删除缺少的库，在您的构建目录中找到这些库，然后将它们再次添加到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:32:00.413

我可以解决问题，实际上问题不大。

我的项目没有配置为在模拟器上运行，所以这里有很多链接错误（这些红色库需要在模拟器上支持 pjsip）。

我将目标设置为 ipad 而不是模拟器并进行构建。

它刚刚奏效！

# string - Scala - 从字符串中获取最后两个字符

> ID：10995129
> 
> 赞同：53
> 
> 时间：2012-06-12T10:48:19.450
> 
> 标签：string, scala

如何返回字符串的最后两个字符？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-12T10:53:16.143

Scala 允许您通过利用集合 API 以比标准`String`API 更简洁的方式执行此操作（为此，存在从 a`java.lang.String`到a 的隐式转换`IndexedSeq[Char]`）：

```
str takeRight 2 
```

当然，API 的奇妙之处在于它保留了原始“集合”的类型表示（即`String`在本例中）！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-16T09:10:34.717

您可以使用

```
.takeRight(2) 
```

* * *

```
var keyword="helloStackoverFlow"

println(keyword.takeRight(2)) // ow 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-05T10:06:32.620

您可以采用 (string length -1) 来显示字符串的最后一个索引， (string length -2) 将是结尾的下一个字符：

`str(str.length-1)+str(str.length-1)`

# java - 数组列表 将值分配给单个 Double[]

> ID：10995130
> 
> 赞同：0
> 
> 时间：2012-06-12T10:48:25.393
> 
> 标签：java

我可以使用以下代码将 Hash-map 值分配给 List double[]，但是对于 Hash-map 中的每个条目，它正在创建单独的数组。

```
 ArrayList<HashMap<String, Double[]>> arl =(ArrayList<HashMap<String, Double[]>>)pd.getArrayList();

 while (itr.hasNext()) {
     HashMap< String,Double[]> map = (HashMap<String,Double[]>) itr.next();
     empid.add((Double[])map.get("id"));
 } 
```

如何将所有条目放入双 [] 的单个数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:54:50.263

你又犯了同样的错误。您需要将 Double 添加到列表中，而不是 Double 的数组。所以类似于我在[你之前的问题](https://stackoverflow.com/questions/10993463/how-to-assign-arraylist-hashmapstring-double-to-list?lq=1)中所说的，改变你的代码是这样的：

```
empid.addAll(Arrays.asList(map.get("id")))); 
```

要在使用地图中的值完全构建列表后从列表中获取数组：

```
Double[] arrayOfDoubles = empid.toArray(new Double[]{}); 
```

# ios - iOS：从 UIView 创建 XIB

> ID：10995134
> 
> 赞同：0
> 
> 时间：2012-06-12T10:48:40.590
> 
> 标签：ios, uiview, interface-builder, xib, nib

我在旧项目中使用绝对定位在代码中布局了很多视图。这段代码真的很难维护。我想将代码移植到使用界面生成器，但我必须再次手动布局每个视图。

是否可以从现有的 UIView（以编程方式创建）以编程方式创建 XIB 文件？我已经搜索了文档，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:52:27.983

XIB 本质上是 XML 文件，我想如果你检查一些你会理解不同控件的格式，但这需要大量的手动阅读、编写和测试来完成所有视图。可能更好的计划是开始慢慢迁移到 IB 制作的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:02:24.090

是的，这是可能的；但是，问题是，您需要设置 xib 的所有基本控件和属性。除非您在模拟器或实际设备上执行了项目（这意味着对所有内容都进行硬编码），否则您将无法看到它的实际外观和感觉。

您将在初始化 xib 时使用**loadview**。这里有一点：

```
- (void)loadview{
      // set your view, screen size, and other properties of your xib
} 
```

# iphone - NSSearchPathForDirectoriesInDomains 在 iOS5 中的 EXC_BAD_ACCESS

> ID：10995135
> 
> 赞同：-1
> 
> 时间：2012-06-12T10:48:53.267
> 
> 标签：iphone, ios, ios5

我正在开发一个应用程序，每次出现视图“A”时都会更新 UI。我把相关代码放在了`ViewWillAppear`，这次更新会在应用程序的文档路径中加载一些图像。因此，我将在该部分中加载相关路径。并且它在开始时运行良好，但如果我导航到另一个页面（`navigationController`用于推送页面）并再次返回此页面几次，我将得到一个`EXC_BAD_ACCESS`.

代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);   // EXC_BAD_ACCESS here
NSString* docPath = [paths objectAtIndex:0];

..... 
```

如果我通过硬编码路径来临时更改代码，例如：

```
NSString* docPath = [NSString stringWithFormat:@"****/****/***/Documents"]; 
```

那么它就不会崩溃。

我还尝试加载文档路径`ViewDidLoad`并将值保存到属性所在的变量中`(nonatomic, retain)`。

在 中`ViewWillAppear`，我加载如下路径：

```
NSString* docPath = self.documentPath; 
```

但它也会`EXC_BAD_ACCESS`在这条线上得到一个。

在此行之前，我还尝试打印`self.documentPath`，它将获得正确的路径字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:51:38.270

查看我的这个答案以了解[如何调试 EXC_BAD_ACCESS 错误](https://stackoverflow.com/a/10982823/1449149)，然后在此处放置错误描述。
这将有助于回答你的问题。

# javascript - 无法向 JavaScript 中动态创建的按钮添加操作

> ID：10995145
> 
> 赞同：0
> 
> 时间：2012-06-12T10:49:26.173
> 
> 标签：javascript, html

我在 JavaScript 中动态创建了一个按钮，但我无法为该按钮设置操作..

```
var but = document.createElement("input");
but.type = "button"
but.value = "NewButton";
but.onClick = check();
var newElement = document.getElementById("addButton"); //span element id
newElement.appendChild(but); 
```

单击按钮时不调用函数'check()'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:58:24.390

您的代码有 2 个问题。第一个是事件没有大写，第二个是你想将事件分配给函数而不是函数的结果。它应该看起来像：

```
but.onclick = check; 
```

这实际上会将事件分配给函数的地址，而不是函数的预期结果（什么都不做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:54:36.750

`check()`执行该函数，并将该函数返回的任何内容分配给 but.onClick。要将函数分配给事件，请按名称指定它（不带括号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:39:20.570

我认为你`check`的函数不会返回需要分配为 onclick 事件回调的函数，然后

```
but.onclick = check; 
```

例如，如果：

```
var check = function() {   
     return function(){
        /* some logic eg. dependent of arguments 'parent' function' */  
    }  }
//works
but.onclick = check('somethingImportant'); 
```

好的，但是如果您想为这些事件分配多个回调，则会出现问题:) 如果您知道`addEventListener`/会更好`attachEvent`

```
but.addEventListener( 'click', check,true );
but.addEventListener( 'click', check2,true ); 
```

之后如果需要使用`removeEventLister`或`detachEvent`分离功能；

但是 - 尝试使用 jquery :)

```
var check = function(){/* do something */};
        $('#addButton').append(
           $('<input type="button" value="New Button"/>') 
        ).click( check );​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

或者

```
 $('#addButton').append( 
           $('<input/>' ).attr( 'type', 'button' ).val( 'New Button' ) )
                .click( function(){ /* do something */ } ) ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
    ); 
```

然后

```
$('#addButton').unbind(  'click' ) // unbind( 'click',check ) 
```

还有更多的可能性：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:56:44.943

小案例`onclick`：

```
but.onclick = check(); 
```

# iphone - 在 plist 中添加和删除数组项

> ID：10995155
> 
> 赞同：1
> 
> 时间：2012-06-12T10:50:17.077
> 
> 标签：iphone, objective-c, xcode, plist

我在 XCODE 的 plist 文件内的数组中添加和删除项目时遇到问题。

我可以通过以下代码读取数组：

```
// Path to the plist (in the application bundle) ------>>>>>
NSString *path = [[NSBundle mainBundle] pathForResource:
                  @"Fav" ofType:@"plist"];

// Build the array from the plist  ------>>>

NSDictionary *favs = [[NSMutableDictionary alloc] initWithContentsOfFile: path];
Resepies = [favs objectForKey:@"Root"]; 
```

这是我的 plist 结构

![在此处输入图像描述](../Images/b8415f40b1c7c665566aef319b8eaf7d.png)

场景是让用户一次从数组中添加和删除特定项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:29:04.413

试试这个代码 -

```
NSString *path = [[NSBundle mainBundle] pathForResource: @"Fav" ofType:@"plist"];

// Build the array from the plist  ------>>>

NSDictionary *favs = [[NSMutableDictionary alloc] initWithContentsOfFile: path];

Resepies = [favs objectForKey:@"Root"];

[Resepies addObject:addYourObjectHere];

//then add this array into dictonary ; 

[favs setObject:Resepies forKey:@"Root"];

// now write dictionary to plist

[favs writeToFile:yourPlistName atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:01:44.007

您不能修改应用程序包中的文件，这是您上面的代码试图做的事情。

如果文件应该是可修改的，则需要先将其移动到文档文件夹中（例如，在第一次运行时），然后随后读取/写入该文件夹。有很多关于如何做到这一点的问题，例如：[create](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/CreatePropListProgram/CreatePropListProgram.html) plist and copying plist to document directory

# php - 如何使用 PHP 修改位于服务器端的 XML 文件的节点值

> ID：10995156
> 
> 赞同：2
> 
> 时间：2012-06-12T10:50:32.273
> 
> 标签：php, xml, dom, domdocument

我需要修改我的 xml 节点值，例如

```
<summary>
<data>125</data>
</summary> 
```

到

```
<summary>
<data>200</data>
</summary> 
```

我正在使用 PHP 5.2。虽然我能够读取 xml 文件，但我无法更新它

```
$doc = new DOMDocument();
$doc->load( 'summary.xml' );
$data = $doc->getElementsByTagName( "data" );
$datavalue = $data ->item(0)->nodeValue;
echo "$datavalue\n"; 
```

如何修改这个数据节点值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:55:23.893

您可以设置 nodeValue 然后使用`saveXML()`：

```
$data ->item(0)->nodeValue = 200;

$doc->saveXML(); 
```

# iphone - 使用 SOAP Web 服务实现 iPhone sdk 的登录？

> ID：10995162
> 
> 赞同：0
> 
> 时间：2012-06-12T10:50:59.807
> 
> 标签：iphone, web-services, soap, nsmutableurlrequest

如果你能帮我解决这个问题，我会非常感激，我是这个平台的初学者，这是我第一次使用 SOAP 服务。，我需要实现一个登录页面。我不知道如何使用服务中的数据。

```
POST /soap.asmx HTTP/1.1
Host: www.bids4all.com
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://www.bids4all.com/Login"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"      xmlns:xsd="http://www.w3.org/2001/XMLSchema"    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="http://www.bids4all.com" xmlns:types="http://www.bids4all.com/encodedTypes"   xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
    <tns:Login>
     <Email xsi:type="xsd:string">string</Email>
     <Password xsi:type="xsd:string">string</Password>
    </tns:Login>
  </soap:Body>
</soap:Envelope>
HTTP/1.1 200 OK
 Content-Type: text/xml; charset=utf-8
  Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="http://www.bids4all.com" xmlns:types="http://www.bids4all.com/encodedTypes" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
    <tns:LoginResponse>
      <LoginResult xsi:type="xsd:boolean">boolean</LoginResult>
    </tns:LoginResponse>
  </soap:Body>
</soap:Envelope> 
```

你能帮我一些鳕鱼吗？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:56:53.227

有 2 个很好的工具可以为 iOS 生成 SOAP 客户端。它们是[SudzC](http://sudzc.com/)和[wsdl2objc 项目](http://code.google.com/p/wsdl2objc/)。他们都提供了示例代码。

您可以使用其中之一，也可以生成自己的请求并通过 NSURLConnection 发布。

希望能帮助到你...

# css - :hover （鼠标离开时）的反义词是什么？

> ID：10995165
> 
> 赞同：142
> 
> 时间：2012-06-12T10:51:01.953
> 
> 标签：css, hover

有什么方法可以与`:hover` **只使用**CSS 相反吗？如：如果`:hover`是`on Mouse Enter`，是否有等效于的CSS `on Mouse Leave`？

例子：

我有一个使用列表项的 HTML 菜单。当我悬停其中一个项目时，会有一个 CSS 颜色动画从`#999`到`black`。当鼠标离开项目区域时，如何创建相反的效果，动画从`black`to `#999`？

[jsFiddle](http://jsfiddle.net/Cthulhu/SZqkb/)

（请记住，我不想只回答这个例子，而是整个“相反`:hover`”的问题。）

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-12T10:57:41.683

如果我理解正确，您可以通过将转换移动到链接而不是悬停状态来做同样的事情：

```
ul li a {
    color:#999;       
    transition: color 0.5s linear; /* vendorless fallback */
    -o-transition: color 0.5s linear; /* opera */
    -ms-transition: color 0.5s linear; /* IE 10 */
    -moz-transition: color 0.5s linear; /* Firefox */
    -webkit-transition: color 0.5s linear; /*safari and chrome */
}

ul li a:hover {
    color:black;
    cursor: pointer;
} 
```

[http://jsfiddle.net/spacebeers/sELKu/3/](http://jsfiddle.net/spacebeers/sELKu/3/)

悬停的定义是：

> :hover 选择器用于在您将鼠标悬停在元素上时选择元素。

**根据该定义，悬停的反义词是鼠标不在**其上方的任何点。比我聪明得多的人完成了这篇文章，在两种状态下设置了不同的转换 - [http://css-tricks.com/different-transitions-for-hover-on-hover-off/](http://css-tricks.com/different-transitions-for-hover-on-hover-off/)

```
#thing {
   padding: 10px;
   border-radius: 5px;

  /* HOVER OFF */
   -webkit-transition: padding 2s;
}

#thing:hover {
   padding: 20px;
   border-radius: 15px;

  /* HOVER ON */
   -webkit-transition: border-radius 2s;
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-12T10:52:54.143

只需使用[CSS 过渡](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Transitions)而不是动画。

```
A {
    color: #999;
    transition: color 1s ease-in-out;
}

A:hover {
    color: #000;
} 
```

[现场演示](http://jsfiddle.net/SZqkb/66/)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2021-02-13T00:04:53.710

相反是使用`:not`

例如

`selection:not(:hover) { rules }`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-12T10:52:04.987

不，CSS 中没有明确的鼠标离开属性。

您可以使用 :hover 在除相关项目之外的所有其他元素上来实现此效果。但我不确定这会有多实用。

我认为您必须查看 JS / jQuery 解决方案。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-08-25T15:42:04.423

将您的持续时间放在非悬停选择中：

```
li a {
  background-color: #111;
  transition:1s;
}

li a:hover {
  padding:19px;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-02-09T14:29:27.180

只需向您正在弄乱的元素添加一个过渡。请注意，页面加载时可能会产生一些影响。就像您更改了边框半径一样，您将在 dom 加载时看到它。

```
.element {
  width: 100px;
  transition: all ease-in-out 0.5s;
}

 .element:hover {
  width: 200px;
    transition: all ease-in-out 0.5s;
}
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-12T11:00:49.867

您可以使用 CSS3 过渡

**一些很好的链接：**

[http://css-tricks.com/different-transitions-for-hover-on-hover-off/](http://css-tricks.com/different-transitions-for-hover-on-hover-off/)

[http://www.alistapart.com/articles/understanding-css3-transitions/](http://www.alistapart.com/articles/understanding-css3-transitions/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-28T04:37:01.270

虽然这里的答案已经足够了，但我真的认为[W3Schools](http://www.w3schools.com/css/css3_buttons.asp)在这个问题上的例子非常简单（它立即消除了困惑（对我来说））。

> 当您将鼠标移到按钮上时，使用`:hover`选择器更改按钮的样式。
> 
> **提示：**使用 transition-duration 属性来确定“悬停”效果的速度：
> 
> 例子
> 
> ```
> .button {
>     -webkit-transition-duration: 0.4s; /* Safari & Chrome */
>     transition-duration: 0.4s;
> }
> 
> .button:hover {
>     background-color: #4CAF50; /* Green */
>     color: white;
> } 
> ```

总之，对于希望“进入”和“退出”动画相同的过渡，您需要在主选择器`.button`而不是悬停选择器上使用过渡`.button:hover`。对于您希望“进入”和“退出”动画不同的过渡，您需要指定不同的主选择器和悬停选择器过渡。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-06T16:39:30.047

只需在类初始添加一个过渡和动画的名称，在你的情况下，ul li a，只需添加一个“过渡”属性，这就是你所需要的

```
ul li {
    display: inline;
    margin-left: 20px;
}

ul li a {
    color: #999;
    transition: 1s;
    -webkit-animation: item-hover-off 1s;
    -moz-animation: item-hover-off 1s;
    animation: item-hover-off 1s;
}

ul li a:hover {
    color: black;
    cursor: pointer;
    -webkit-animation: item-hover 1s;
    -moz-animation: item-hover 1s;
    animation: item-hover 1s;
}

@keyframes item-hover {
    from {
      color: #999;
      }
    to {
      color: black;
      }
}

@-moz-keyframes item-hover {
    from {
        color: #999;
      }
    to {
        color: black;
      }
}

@-webkit-keyframes item-hover {
    from {
        color: #999;
      }
    to {
        color: black;
      }
}

@keyframes item-hover-off {
    from {
      color: black;
      }
    to {
      color: #999;
      }
}

@-moz-keyframes item-hover-off {
    from {
        color: black;
      }
    to {
        color: #999;
      }
}

@-webkit-keyframes item-hover-off {
    from {
        color: black;
      }
    to {
        color: #999;
      }
}
```

```
<ul>
    <li><a>Home</a></li>
    <li><a>About</a></li>
    <li><a>Contacts</a></li>
</ul>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-12T10:56:42.820

你误会了`:hover`；它说鼠标在一个项目上，而不是鼠标刚刚进入该项目。

您可以将动画添加到选择器而不`:hover`达到您想要的效果。

过渡是一个更好的选择：http: [//jsfiddle.net/Cvx96/](http://jsfiddle.net/Cvx96/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-07T02:42:20.053

的反面`:hover`似乎是`:link`。

（编辑：技术上不是相反的，因为有 4 个选择器`:link`,和。如果包括 5个。）`:visited``:hover``:active``:focus`

例如，在定义规则`.button:hover{ text-decoration:none }`以删除按钮上的下划线时，在某些浏览器中滚动按钮时会显示下划线。我已经解决了这个问题`.button:hover, .button:link{ text-decoration:none }`

这当然只适用于实际上是链接的元素（具有 href 属性）

# jquery - 滚动到滚动区域中的评论

> ID：10995169
> 
> 赞同：1
> 
> 时间：2012-06-12T10:51:12.803
> 
> 标签：jquery

嗨，我有一个有点像这样的窗口：http: [//d.pr/i/r8m1](http://d.pr/i/r8m1)

如您所见，侧边栏和标题保持静态，而评论窗口可以滚动。当用户滚动到窗口末尾时附加数据。

我正在使用codeigniter，所以我附加分页数据并保持一个计数器，每次到达窗口末尾时都会增加分页数据的数量。

每个评论都有一个评论 id，例如 #S334 是一个与最新评论相关联的 id。评论可以在任何分页页面中，例如前 20 条评论将在第一个分页窗口中，如下所示：[http](http://site.com/) ://site.com/ 。接下来的 20 条评论将在第二个分页页面中，如下所示：site.com/20 等等。

我想给用户滚动到任何评论的选项。我想我将不得不使用 .scroll() 函数。

我试过这个：

```
$('#S344').scroll(); 
```

它没有用。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:57:25.617

您所做的只是触发具有该 id 的元素上的滚动事件，而不是实际将页面滚动到该元素。

我相信您正在寻找的是 scrollTo() ，它可以让您实际指定您希望页面滚动到的目标。有关更多信息，请参阅此页面：http: [//demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

# python - 检查字典中是否存在键列表

> ID：10995172
> 
> 赞同：100
> 
> 时间：2012-06-12T10:51:20.867
> 
> 标签：python, dictionary

我有一本看起来像这样的字典：

```
grades = {
        'alex' : 11,
        'bob'  : 10,
        'john' : 14,
        'peter': 7
       } 
```

和名单`students = ('alex', 'john')`

我需要检查其中的所有名称是否都作为dict`students`中的键存在。`grades`

`grades`可以有更多的名字，但所有的名字都`students`应该在`grades`

必须有一个简单的方法来做到这一点，但我还是 python 新手，无法弄清楚。试过`if students in grades`了，没用。

在实际情况下，列表会更大。

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-06-12T10:52:50.510

使用[`all()`](https://docs.python.org/2/library/functions.html#all)：

```
if all(name in grades for name in students):
    # whatever 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-12T10:52:53.440

```
>>> grades = {
        'alex' : 11,
        'bob'  : 10,
        'john' : 14,
        'peter': 7
}
>>> names = ('alex', 'john')
>>> set(names).issubset(grades)
True
>>> names = ('ben', 'tom')
>>> set(names).issubset(grades)
False 
```

调用它`class`无效，所以我将其更改为`names`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-15T15:45:52.517

假设学生为集合

```
if not (students - grades.keys()):
    print("All keys exist") 
```

如果不将其转换为设置

```
if not (set(students) - grades.keys()):
    print("All keys exist") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-21T22:57:53.413

您可以利用`<dict>.keys()`返回 a来测试多个键是否在 dict 中`set`。

代码中的这种逻辑...

```
if 'foo' in d and 'bar' in d and 'baz' in d:
    do_something() 
```

可以更简单地表示为：

```
if {'foo', 'bar', 'baz'} <= d.keys():
    do_something() 
```

集合运算符测试左边的`<=`集合是否是右边集合的子集。另一种写法是`<set>.issubset(other)`.

集合还支持其他有趣的操作：[https ://docs.python.org/3.8/library/stdtypes.html#set](https://docs.python.org/3.8/library/stdtypes.html#set)

使用这个技巧可以在检查多个键的代码中压缩很多地方，如上面的第一个示例所示。

也可以使用以下方法检查整个键列表`<=`：

```
if set(students) <= grades.keys():
    print("All studends listed have grades in your class.")

# or using unpacking - which is actually faster than using set()
if {*students} <= grades.keys():
    ... 
```

或者如果`students`也是一个字典：

```
if students.keys() <= grades.keys():
    ... 
```

# ipad - jQuery工具可滚动触摸触发器

> ID：10995180
> 
> 赞同：4
> 
> 时间：2012-06-12T10:51:46.063
> 
> 标签：ipad, touch, jquery-tools, scrollable

我正在使用可滚动的 Jquery 工具为 iPad 制作基于触摸的幻灯片

[http://jquerytools.org/demos/scrollable/vertical.html](http://jquerytools.org/demos/scrollable/vertical.html)

它工作得很好，可以做我想做的一切，但是如果我的手指在滑块上的任何地方并且稍微移动它就会触发滑块来改变滑块，有没有办法我可以改变你需要拖动多少手指来改变幻灯片，或设置特定区域，您可以在其中滑动以更改幻灯片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T04:14:47.897

您禁用对象的“构造函数”上的触摸事件，如下所示：

```
 root = $('#content').scrollable({
                keyboard:false,
                mousewheel: false,
                touch: false
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:56:00.227

我需要做类似的事情，因为 Scrollable 在 iPad 上过于敏感。以下是我为使其对水平滑动不那么敏感而进行的更改：

```
// touch event
if (conf.touch) {
    var touch = {};

    itemWrap[0].ontouchstart = function(e) {
        var t = e.touches[0];
        touch.x = t.clientX;
        touch.y = t.clientY;
    };

    itemWrap[0].ontouchmove = function(e) {

        // only deal with one finger
        if (e.touches.length == 1 && !itemWrap.is(":animated")) {           
            var t = e.touches[0],
                 deltaX = touch.x - t.clientX,
                 deltaY = touch.y - t.clientY;
            self[vertical && deltaY > 0 || !vertical && deltaX > 0 ? 'next' : 'prev']();                
            e.preventDefault();
        }
    };
} 
```

变成

```
// touch event
if (conf.touch) {
    var touch = {};

    itemWrap[0].ontouchstart = function(e) {
        var t = e.touches[0];
        touch.x = t.clientX;
        touch.y = t.clientY;
    };

    itemWrap[0].ontouchmove = function(e) {

        // only deal with one finger
        if (e.touches.length == 1 && !itemWrap.is(":animated")) {           
            var t = e.touches[0],
                 deltaX = touch.x - t.clientX,
                 deltaY = touch.y - t.clientY;
            if(deltaX > 200 || deltaX < -200) { // new line
                self[vertical && deltaY > 0 || !vertical && deltaX > 0 ? 'next' : 'prev']();    
            } // new line
            e.preventDefault();
        }
    };
} 
```

将 200 调整到您希望人们在切换到下一张幻灯片之前必须拖动手指的距离。同样，如果要控制垂直滚动条，请将新代码中的 deltaX 更改为 deltaY：

```
if(deltaY > 200 || deltaY < -200) { // new line
  self[vertical && deltaY > 0 || !vertical && deltaX > 0 ? 'next' : 'prev']();    
} // new line 
```

如果您正在使用 jQuery 工具的最小化版本，您可以使用以下代码：

```
// horizontal change
if(h > 200 || h < -200) {
  b[j && d > 0 || !j && h > 0 ? "next" : "prev"]();
}

// vertical change
if(d > 200 || d < -200) {
  b[j && d > 0 || !j && h > 0 ? "next" : "prev"]();
} 
```

# facebook - 如何在facebook中发布带有对话文本的本地图像

> ID：10995184
> 
> 赞同：1
> 
> 时间：2012-06-12T10:51:55.737
> 
> 标签：facebook, ipad, facebook-graph-api, ios5

我以这种方式成功上传了带有url图片的图片

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"https://developers.facebook.com/docs/reference/dialogs/", @"link",
                               @"http://fbrell.com/f8.jpg", @"picture",
                               @"Facebook Dialogs", @"name",
                               @"Reference Documentation", @"caption",
                               @"Using Dialogs to interact with users.", @"description",
                               nil];

AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[[delegate facebook] dialog:@"feed"
           andParams:params
         andDelegate:self]; 
```

现在我想以同样的方式从本地图像上传图像

喜欢

```
 profImg = [UIImage imageNamed:LoginWithFacebookNormal@2x.png"];
    NSData *data = [NSData dataWithData:UIImagePNGRepresentation(profImg)]; 
```

我在字典中使用了**数据，@“图片”，但它给了我错误**

**有没有其他方式可以通过对话框+评论区上传本地/图库/资源图像？**

我搜索过，但每次都发现只有 url 图片可以输入对话框

我在这篇文章中使用了 Hackgraph 教程。

**注意：我没有使用 Sharekit 或任何其他 API，我只使用了 Graph API**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:19:52.603

最后经过大量研究，我得到了 Facebook 的例子。[从这里](https://github.com/hiren443/ASFBPostController)下载示例。您必须进行修改，因为当前示例包含静态图像。

# objective-c - 可可插件模式

> ID：10995187
> 
> 赞同：3
> 
> 时间：2012-06-12T10:52:09.293
> 
> 标签：objective-c, cocoa, plugins, appkit, cocoa-design-patterns

我的桌面应用程序有一个插件架构。[我已经使用Apple 的代码加载指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingCode/Concepts/Plugins.html)以相当标准的方式实现了它。

我有一个协议，它定义了插件实例可以或应该响应的所有方法。

唯一的问题是这个协议定义了大约 80 种方法。这些方法中只有大约 10 种是强制性的，其余的都是可选的。一些插件将实现所有 80 种方法，而其他插件将只实现基本的 10 种。

插件包告诉其宿主应用程序实例化哪个类的常用方法是通过`NSPrincipalClass`其 Info.plist 文件中的键。这是一个键，因此只能实例化一个类。

插件协议是一个单独的文件，预计它将被这个单一的类使用。

我的问题是：将这个单一协议中的功能拆分为多个协议的最佳方法是什么，同时允许插件编写者拥有更灵活的实现？

目前，我现有的插件在其主体类中有以下内容：

```
- (BOOL)respondsToSelector:(SEL)selector {
    return [self forwardingTargetForSelector:selector] ? YES : NO;
}

- (id)forwardingTargetForSelector:(SEL)selector {
    id target = nil;
    if ([self.instanceOne respondsToSelector:selector]) {
        target = self.instanceOne;
    } else if ([self.instanceTwo respondsToSelector:selector]) {
        target = self.instanceTwo;
    } else if ([self.instanceThree respondsToSelector:selector]) {
        target = self.instanceThree;
    }

    return target;
} 
```

但是，与其将它强加给插件编写者来定义这样的临时系统，我希望应用程序的插件框架能够容纳更灵活的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:18:01.887

如果您可以将 80 种方法划分为合理的功能块，则可以将它们拆分为多个协议（`FooProtcol`、`BarProtocol`等）并定义可选属性，这些属性返回对在您的主协议中实现它们的对象的引用。例如：

```
@protocol PluginPrimaryProtocol <NSObject>
@required
/* ... */
@optional
@property (readonly) id<FooProtocol> fooDelegate;
@property (readonly) id<BarProtocol> barDelegate;
/* ... */
@end 
```

# asp.net-mvc - 如何在 .Net 中使用已编译的 dll 作为构建过程的一部分使用 nUnit 进行自动化测试？

> ID：10995189
> 
> 赞同：0
> 
> 时间：2012-06-12T10:52:09.637
> 
> 标签：asp.net-mvc, unit-testing, nunit, automated-tests, build-automation

我正在使用 psake、msbuild 和 nUnit 来自动化我的 MVC Web 应用程序的构建和测试，一旦我让它工作，它将由 Jenkins 执行（友好地）。

我的构建步骤工作正常，在 build\bin 目录中创建了两个 DLL：

```
 MyWebApplication.dll
 MyWebApplication.Tests.dll 
```

我正在使用**nunit-console.exe**作为 psake 构建脚本的一部分运行自动化测试，并将其指向新构建的**MyWebApplication.Test.dll**。但是，测试失败是因为它无法加载文件或程序集 MyWebApplication.dll，尽管它与测试 dll 文件位于同一目录中。

在这种情况下，如何使用 nunit 执行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:25:25.167

它最有可能在工作区根目录中寻找应用程序 .dll，这是 Jenkins 默认的当前目录。在启动测试之前尝试将当前目录更改为 %WORKSPACE%\build\bin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:05:04.023

我找到了自己问题的答案。

我必须编译我的项目的调试版本作为构建脚本的一部分，然后针对测试项目的我的 csproj 文件运行 Nunit 控制台 exe。这样，它可以正确执行测试。

# c# - 如何使用 ABCPdf.NET 从 PDF 文件的所有页面中提取文本？

> ID：10995190
> 
> 赞同：4
> 
> 时间：2012-06-12T10:52:13.287
> 
> 标签：c#, .net, pdf, extract, abcpdf

如何使用 ABCPdf.NET 工具从 PDF 文件中提取内容文本？

我尝试了 GetText 方法，但没有提取内容：

```
var doc = new Doc();    

        var url = @".../FileName.pdf";

        doc.Read(url);

        string xmlContents = doc.GetText("Text");
        Response.Write(xmlContents);
        doc.Clear();
        doc.Dispose(); 
```

我的 pdf 有近 1000 个单词，但 GetText 只返回 4-5 个单词。我意识到它只返回第一页的文本。

所以问题应该是“如何从pdf文件的所有页面中提取文本？” -（更改了标题以使其更清晰）。

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T13:47:26.033

为了您的利益，是的！

```
 public string ExtractTextsFromAllPages(string pdfFileName)
    {
        var sb = new StringBuilder();

        using (var doc = new Doc())
        {
            doc.Read(pdfFileName);

            for (var currentPageNumber = 1; currentPageNumber <= doc.PageCount; currentPageNumber++)
            {
                doc.PageNumber = currentPageNumber;
                sb.Append(doc.GetText("Text"));
            }
        }

        return sb.ToString();
    } 
```

如果您没有 url 但有字节，则：

```
public string ExtractTextsFromAllPages(Byte[] pdfBytes)
    {
        var sb = new StringBuilder();

        using (var doc = new Doc())
        {
            doc.Read(pdfBytes);

            for (var currentPageNumber = 1; currentPageNumber <= doc.PageCount; currentPageNumber++)
            {
                doc.PageNumber = currentPageNumber;
                sb.Append(doc.GetText("Text"));
            }
        }

        return sb.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:56:39.827

您是否尝试过[GetText](http://www.websupergoo.com/helppdf8net/)方法？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-26T15:01:58.230

```
doc.Read(.......);
var textOperation = new TextOperation(doc);
textOperation.PageContents.AddPages();
string allText = textOperation.GetText(); 
```

# python - Tkinter 动态更改文本框中重复字符串的文本颜色

> ID：10995193
> 
> 赞同：3
> 
> 时间：2012-06-12T10:52:33.100
> 
> 标签：python, textbox, tkinter, python-2.7

我有一个 Tkinter 文本框设置为显示文件的内容。一个示例行如下：

```
SUCCESS - Downloaded example.jpg
File was 13KB in size 
```

我想要做的是让任何包含“SUCCESS”一词的行将其文本颜色更改为蓝色。请注意，我需要它是动态的，因为这个词可以在一个文件中找到数百次，并且无法预测它会在哪里。这是我用来将文件内容输出到文本框的代码。哪个工作正常。

```
log = open(logFile, 'r')
while 1:
    line = log.readline()
    if len(line) == 0:
        break
    else:
        self.txtLog.insert(Tkinter.END, line)
        self.txtLog.insert(Tkinter.END, os.linesep)
log.close() 
```

我正在尝试像下面的示例行一样使用 tag_add 和 tag_config 但无济于事。

```
 `self.txtLog.tag_add("success", "1.0", "1.8")
  self.txtLog.tag_config("success", foreground="blue")` 
```

`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:15:36.053

您需要配置一个标签，并在将文本添加到末尾时指定该标签。这应该有效（尽管未经测试）：

```
self.txtLog.tag_config("success", foreground="blue", font="Arial 10 italic")
log = open(logFile, 'r')
while 1:
    line = log.readline()
    if len(line) == 0:
        break
    else:
        tags = ("success",) if line.startswith("SUCCESS") else None
        self.txtLog.insert(Tkinter.END, line+os.linesep, tags)
log.close() 
```

另外，我刚刚注意到你在使用`tag_add`before `tag_config`，我相信它应该是相反的。

# c++ - 使用用户数据的严格别名和回调

> ID：10995195
> 
> 赞同：1
> 
> 时间：2012-06-12T10:52:35.063
> 
> 标签：c++, strict-aliasing

我有一个带有基于回调的 C API 的 c++ 库。回调类型如下所示：

```
typedef struct {...} Result;
typedef void (*callback) (const Result* result, void* userData); 
```

用户可以像这样注册一个回调，并可以设置一个指向任意数据的指针，库将通过回调将该指针传回。

我主要关心的是：它是否违反了严格的别名规则？我需要将 userData 的类型更改为 char* 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:57:24.577

不，别名仅适用于间接指针时，而不是当它们作为指针值传递时。只要用户的行为始终如一，你就会没事的。

也就是说，用户必须确保如果他们传递`userData`的是实际类型`T`，那么他们总是`T *`在访问它之前将其强制转换为回调函数。

我当然假设您没有`userData`在您的库中进行间接访问，尽管再次将其作为指针访问（例如`printf("DEBUG: %p", userData)`）就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:25:27.620

您可以为 C 回调 API 创建一个更像“C++”的接口，这可能会消除您的别名问题。

```
struct Callback {
    void (*callback) (Callback *cb_this, const Result *result);
}; 
```

使用 C 回调 API 注册回调的 AC 程序员会执行以下操作：

```
struct MyCallback {
    struct Callback cb;
    int x;
    double y;
    /* ... */
};

void my_callback_func (Callback *cb_this, const Result *result) {
    MyCallback *my_cb = (MyCallback *)cb_this;
    /* ... */
}

MyCallback mycb = { { my_callback_func }, 0, 0, /* ... */ }; 
```

这样您就不必担心处理`void *`. 相反，您将获得一个指向`Callback`.

# drupal - Drupal 6 | 弹性域删除选项

> ID：10995197
> 
> 赞同：0
> 
> 时间：2012-06-12T10:52:36.767
> 
> 标签：drupal, drupal-6, drupal-modules

我使用弹性域模块来合并我的两种内容类型。创建节点时可以选择添加项目。我想删除添加的行。我一直在寻找并试图摆脱这个问题，但一无所获。应该怎么做才能实现这个东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:31:21.033

将所有字段值设置为默认值。它将删除额外的行，默认情况下它会给出两组行。

# javascript - 在 JavaScript 中编辑 blob 图像（调整大小并添加边框）

> ID：10995199
> 
> 赞同：0
> 
> 时间：2012-06-12T10:52:40.650
> 
> 标签：javascript, image, resize, border, edit

有人可以帮我解决这种情况：

1.  我必须从 Oracle SQL 数据库中检索图像（存储在 BLOB 中）。这已经完成，图像被推送到 HEX 中的临时属性中。
2.  这些图像稍后会使用 LDAP 推送到目录服务器。

唯一的问题是，在将它们推送到 LDAP 目录服务器之前，我想将每个图像调整为特定大小并使用 Javascript 动态添加一个简单的边框，而不使用主机的文件系统。注意：我不能使用特定于浏览器的方法或对象，因为我的 java 运行时由不同的主机而不是浏览器使用。

自从我寻找解决方案以来已经有一周了，不幸的是，我还没有找到解决方案。任何建议将不胜感激！

提前致谢！鲍比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:33:22.380

提到 Oracle 和 LDAP，我觉得您的 JS 运行时不是浏览器。但如果是这样，您可以使用画布来调整大小和添加边框，然后您可以使用`canvasEl.toDataURL('image/png')`. 阅读如何使用画布[https://developer.mozilla.org/en/Canvas_tutorial](https://developer.mozilla.org/en/Canvas_tutorial)

# eclipse - Eclipse 可以转换 if-else 来切换枚举吗

> ID：10995200
> 
> 赞同：3
> 
> 时间：2012-06-12T10:52:43.187
> 
> 标签：eclipse

ReShaper 可以自动识别`if`枚举上的状态并提供将它们转换为`switch`语句（或返回）。（当然，只有在`if`语句仅测试枚举而不是其他任何内容时才会发生这种情况。）

Eclipse 可以做这样的事情吗？怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-14T19:18:36.890

为了完整起见，该选项`Convert 'if-else' to 'switch'`通过将光标置于例如 上`if`然后按下快速辅助命令 ( `Ctrl + 1`) 来显示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T16:09:50.013

Eclipse 可以将 switch 语句转换为 if-else，但反之则不行。已经有一个错误打开以提供“将'if-else'转换为'switch'”快速帮助，请参阅[https://bugs.eclipse.org/bugs/show_bug.cgi?id=348179](https://bugs.eclipse.org/bugs/show_bug.cgi?id=348179)

更新：bug 已修复，从 4.3 Milestone 1 开始，Eclipse 将支持将 if-else 语句转换为 switch 语句。

# algorithm - 循环异或链表？

> ID：10995212
> 
> 赞同：4
> 
> 时间：2012-06-12T10:53:27.890
> 
> 标签：algorithm, data-structures, linked-list, xor-linkedlist

我正在阅读有关 XOR 链接列表的内容，我想到了一个问题，在我`Is it possible to have a circular XOR linked list?`看来，即使我们以某种方式构建这样一个列表，给定列表的头节点也不可能遍历它。例如 - 让链表包含 3 个节点：A、B 和 C。

```
|
v
A ---> B ---> C

A->xor = B ^ C
B->xor = A ^ C
C->xor = A ^ B 
```

由于我们得到`head`了列表，即`A`在这种情况下，我们将无法向前或向后移动，因为我们必须至少知道`B`or`C`之一才能移动。由于我们无法遍历它，因此我们也无法构建它。

我的想法正确吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:57:30.507

确实，您是对的，不可能遍历此列表，因为我们无法从`xor`链接中检索任何指针值。

此列表可遍历的最低要求是*两条*信息……例如指向当前节点的指针和指向下一个（或上一个）节点的指针。*然后*，您可以从`xor`链接中检索所有信息。

事实上，这就是[维基百科文章](http://en.wikipedia.org/wiki/Xor_linked_list)所说的：

> 要从某个点开始沿任一方向遍历列表，您需要两个连续项目的地址，而不仅仅是一个

这仍然比为每个节点存储两个指针便宜，因为我们只需要每个节点*一个*链接，加上当前和下一个（或前一个）节点的两个指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-07T10:26:10.973

这很有趣！我写了一个小循环异或链表程序来证明它是可能的。1 和 2 节点的边缘情况有点奇怪，但只要您在某处跟踪头和尾指针，其他一切都会检查出来。（我也知道这是一个有 7 年历史的线程，但我有同样的问题，发现这几乎是唯一提到循环 XOR 链表的地方）

```
#include <stdlib.h> // for malloc
#include <stdio.h>  // for printf
#include <stdint.h> // for uintptr_t

typedef struct  s_list  t_list;

struct s_list
{
    char        *data;  // Contains a string.
    struct s_list   *npx;   // npx = previous XOR next
};

t_list  *create_elem(char *data, t_list *npx)
{
    t_list  *ret;

    ret = malloc(sizeof(*ret));
    ret->data = data;
    ret->npx = npx;
    return (ret);
}

t_list  *xor(t_list *a, t_list *b)
{
    return (t_list*)((uintptr_t)a ^ (uintptr_t)b);
}

void    insert(t_list **h, t_list **t, char *data)
{
    t_list  *last = *t;
    t_list  *first = *h;
    t_list  *new, npx;

    if (!last && !first)  // No nodes, populate first node
    {
        new = create_elem(data, NULL);  // self XOR self == NULL
        *h = ((*t = new));
    }
    else if (last == first)  // Only one node, set tail properly
        *t = create_elem(data, NULL);   // self XOR self == NULL
    else  // Multiple nodes, do a real add
    {
        // Create an element with npx = first XOR last
        // (it will be inserted at the end of the list)

        new = create_elem(data, xor(first, last));

        // If head or tail's npx == 0, we know its a list of size 2,
        // so each prev and next pointer is the same.
        // So, if it is a list with size 2
        //  last->npx = new XOR first
        //  first->npx = new XOR last
        // else
        //  last->npx = new XOR (last->npx XOR first)
        //  first->npx = new XOR (first->npx XOR last)

        last->npx = xor(new, ((!last->npx || !first->npx) ?
                first : xor(last->npx, first)));
        first->npx = xor(new, ((!last->npx || !first->npx) ?
                last : xor(first->npx, last)));

        // Set the new pointers for passed addresses.
        *h = first;
        *t = new;
    }
}

int traverse(t_list *h, t_list *t)
{
    t_list  *cur = h;
    t_list  *last = t;
    t_list  *tmp;

    while (cur)
    {
        printf("[%s]\n", cur->data);
        tmp = xor(cur->npx, last);
        last = cur;
        cur = tmp;
        if (cur == h)
            return (1);
    }
    return (1);
}

int main(void)
{
    char    s1[] = "Testing!";
    char    s2[] = "My!";
    char    s3[] = "Function!";
    char    s4[] = "For!";
    char    s5[] = "GeeksforGeeks!";

    // We need to keep track of head and tail pointers for
    // everything to work nicely.

    // Traversal will always require access to
    // two consecutive pointers.

    t_list  *head;
    t_list  *tail;

    head = NULL;
    tail = NULL;
    insert(&head, &tail, s1);
    insert(&head, &tail, s2);
    insert(&head, &tail, s3);
    insert(&head, &tail, s4);
    insert(&head, &tail, s5);
    traverse(head, tail);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-08T05:23:48.890

不可能用一个值遍历列表，但可以找到所有可行的遍历，在这种情况下，我们找到所有*可以*遍历树的 b 和 c：

```
a=5
for b in range(0, 16): 
    print(a, b, a ^ b)

5 0 5
5 1 4
5 2 7
5 3 6
5 4 1
5 5 0
5 6 3
5 7 2
5 8 13
5 9 12
5 10 15
5 11 14
5 12 9
5 13 8
5 14 11
5 15 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-04T09:41:40.990

在非循环异或列表中，`first`节点指针用于将节点添加到列表中，`last`节点指针用于将节点添加到列表中。我们可以遍历只有一个指针的非循环 XOR 列表。但不是循环异或列表，其中`first`必须链接到`last`. 因此，要从一个`first`或`last`节点遍历循环异或列表并将节点添加到列表中，我们需要指向两者的指针。

# php - 无法使用 PHP 从用户数据库（mysql）中检索名称

> ID：10995214
> 
> 赞同：0
> 
> 时间：2012-06-12T10:53:38.000
> 
> 标签：php, mysql

`"Welcome back, <name>."`当我重新登录时，我试图在我的博客上显示一个。我正在使用php访问数据库，获取当前在的用户名和姓氏`$_SESSION['username']`，然后将其打印回索引中。

所以查询数据库的函数是：

```
 function get_full_name($username){

    $real = array();

    $query = mysql_query("SELECT `name`, `last` FROM `users` WHERE `user` = `{$username}`");

    $row = mysql_num_rows($query);

    foreach($row as $k => $v)
    {
        $real[$k] = $v;
    }

       return $real;
  } 
```

然后是调用上述函数的html部分：

```
<div id="menu">
    <?php 
            $temp = $_SESSION['username'];
            $real[] = get_full_name($temp);
            if(isset($_SESSION['username']))
            {
                echo '<br />'.'Welcome back, '. $real['name'] . '.';
            }
    ?>
    </div> 
```

上述代码的输出为：

```
 Welcome back, . 
```

var_dump($real) 给出：

```
array(1) { [0]=> array(0) { } } 
```

更改为 mysql_fectch_assoc 后的 var_dump($real)：

```
array(0) { } 
```

*   修正：错误未使用单引号 ' {$username} '

通过改变它们，它就像一个魅力，向所有人欢呼！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:59:25.637

奇怪的是，您正在使用`mysql_num_rows`它来获取查询结果。这只会返回行数。你会更好地使用[`mysql_fetch_assoc`](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)来获得结果的关联数组。

您还需要在查询中将反引号更改为单引号`{$username}`。

就像是：

```
function get_full_name($username){

    $real = array();

    $query = mysql_query("SELECT `name`, `last` FROM `users` WHERE `user` = '{$username}'");

    $row = mysql_fetch_assoc($query);

    foreach($row as $k => $v)
    {
        $real[$k] = $v;
    }

    return $real;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:16:17.140

你的`get_full_name()`功能应该是这样的：

```
function get_full_name($username) {
   $real  = array();
   $query = mysql_query("SELECT `name`, `last` 
                         FROM `users` 
                         WHERE `user` = '{$username}'");
   if (mysql_num_rows($query)) {
     $real = mysql_fetch_assoc($query);
   }

   return $real;
} 
```

笔记：

*   对变量使用单引号：`'{$username}'`而不是``{$username}``
*   用于`mysql_num_rows()`检查结果是否为空。
*   用于`mysql_fetch_assoc()`检索行。

调用函数：

```
$temp = $_SESSION['username'];
$real = get_full_name($temp);
if (isset($temp) && count($real)) {
   echo '<br />Welcome back, '. $real['name'] . '.';
} 
```

笔记：

*   使用`$real`而不是`$real[]`.
*   用 .检查是否`$real`为空`count()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:01:52.713

我看到的两个问题。

1）您正在使用`mysql_num_rows`，而不是从数据库中获取数据数组。

```
function get_full_name($username){

    $real = array();

    $query = mysql_query("SELECT `name`, `last` FROM `users` WHERE `user` = `{$username}`");

    $row = mysql_fetch_assoc($query);

    foreach($row as $k => $v)
    {
        $real[$k] = $v;
    }

    return $real;
} 
```

2）看起来`$real`你的代码中有一个多维数组。试试这个：

```
<div id="menu">
    <?php 
            $temp = $_SESSION['username'];
            $real = get_full_name($temp);
            if(isset($_SESSION['username']))
            {
                echo '<br />'.'Welcome back, '. $real['name'] . '.';
            }
    ?>
    </div> 
```

请注意，我已经删除`[]`了`$real`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T11:02:36.340

使用 mysql_query() 获取运行查询的结果，然后使用 mysql_fetch_assoc() 获取各个行。

```
$result = mysql_query($query);

while ($row = mysql_fetch_assoc($result))
{
   var_dump($row);
} 
```

请注意， mysql_num_rows($result) 将返回给定结果中的行数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T10:59:03.453

更改此行`$row = mysql_fetch_array($query);`

# linux - 在 linux 中显示 perl 脚本的输出

> ID：10995223
> 
> 赞同：0
> 
> 时间：2012-06-12T10:54:00.603
> 
> 标签：linux, perl

我正在使用用 php 编写的 web 界面，它在 linux 环境中运行 perl 脚本。它将参数（用户名、密码、...）传递给脚本。我想在不干扰进程的情况下查看脚本的输出。请注意，轮到他的脚本也传递数据并执行另一个程序。

该脚本包含打印命令，如

> `if( $@ ){ print "Error :".$@."\n"; print "skip...\n"; } else{ }`

我只想从 shell 中查看这些结果，如果我可以保存到 txt 文件中，它也会这样做。

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:27:43.213

从 shell 运行 Perl 程序以查看`print`.

```
$ perl theprogram
⋮
Error : blah blah
skip...
⋮ 
```

重定向[STDOUT](http://enwp.org/stdout)以将其保存到文件中。

```
$ perl theprogram > theprogram.log 
```

这些是 shell 使用的基础知识，如果你是程序员，你应该知道这一切。如果没有，请为初学者阅读 Unix 书籍。

# android - “摇一摇做某事”代码解释

> ID：10995225
> 
> 赞同：2
> 
> 时间：2012-06-12T10:54:06.797
> 
> 标签：android, acceleration

我找到了这段代码，它的功能是当设备足够强大时做一些事情，但我还没有完全理解它。任何人请帮助我

```
public class ShakeActivity extends Activity {
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        mSensorManager.registerListener(mSensorListener, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
        mAccel = 0.00f;
        mAccelCurrent = SensorManager.GRAVITY_EARTH;
        mAccelLast = SensorManager.GRAVITY_EARTH;
    }
      private SensorManager mSensorManager;
      private float mAccel; // acceleration apart from gravity
      private float mAccelCurrent; // current acceleration including gravity
      private float mAccelLast; // last acceleration including gravity

      private final SensorEventListener mSensorListener = new SensorEventListener() {

        public void onSensorChanged(SensorEvent se) {
          float x = se.values[0];
          float y = se.values[1];
          float z = se.values[2];
          mAccelLast = mAccelCurrent;
          mAccelCurrent = (float) Math.sqrt((double) (x*x + y*y + z*z));
          float delta = mAccelCurrent - mAccelLast;
          mAccel = mAccel * 0.9f + delta; // perform low-cut filter

        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {
        }
      };

      @Override
      protected void onResume() {
        super.onResume();
        mSensorManager.registerListener(mSensorListener, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
      }

      @Override
      protected void onStop() {
        mSensorManager.unregisterListener(mSensorListener);
        super.onStop();
      }

} 
```

请帮我理解这两行

```
mAccelCurrent = (float) Math.sqrt((double) (x*x + y*y + z*z));//I guess this is for computing the value of the acceleration 
```

这条线我不明白

```
 mAccel = mAccel * 0.9f + delta; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T11:19:04.630

传感器将返回三个值，用于沿三个轴方向的加速度；这些被放置在`x`,`y`和`z`您的代码示例中。想象三个相互成直角的弹簧上的质量；当您四处移动设备时，弹簧会拉伸和收缩`x`，`y`并`z`包含它们的长度。

`mAccelCurrent = (float) Math.sqrt((double) (x*x + y*y + z*z));`

这是计算加速度的大小。想象一下，如果你只有一个，而不是弹簧上的三个质量，总是准确地指向设备加速的方向。实际上可以从我们拥有的值中计算出该系统的外观，这就是在这里完成：`mAccelCurrent`这样的弹簧会被拉伸多少。[这](http://en.wikipedia.org/wiki/Euclidean_vector#Length)是正在执行的计算。

`mAccel = mAccel * 0.9f + delta;`

这是输入端的[高通滤波器](http://en.wikipedia.org/wiki/High-pass_filter)。在这里，它具有使加速度的突然变化给出更大值的效果。仅从您发布的代码尚不清楚为什么要这样做；我猜想是在其他地方制作代码，最终检查`mAccel`设备在摇晃时对每次摇晃的极端力更敏感。

# iphone - 如何制作带边框的半圆角（顶角圆角）texview？

> ID：10995226
> 
> 赞同：3
> 
> 时间：2012-06-12T10:54:10.257
> 
> 标签：iphone, ios, cocoa-touch

如何使用borderwidth和borderColor制作半圆角（顶角圆角）textview或tableview？![在此处输入图像描述](../Images/233474b99a37ecfa5ce86ebbe0ad6150.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:45:56.823

这并不完美，但您可以通过以下方式工作：

```
#import <QuartzCore/CoreAnimation.h> 
```

（并且还链接到您项目中的 QuartzCore.framework），然后..

```
self.textView.layer.borderColor = [UIColor redColor].CGColor;
self.textView.layer.borderWidth = 4.0f;

UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.textView.bounds 
                                               byRoundingCorners:UIRectCornerTopLeft | UIRectCornerTopRight
                                                     cornerRadii:CGSizeMake(7.0, 7.0)];
CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
maskLayer.frame = self.textView.bounds;
maskLayer.path = maskPath.CGPath;
self.textView.layer.mask = maskLayer;
[maskLayer release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T17:53:37.597

首先删除所有会生成边框的代码（xib 或 layer.borderWidth），然后他们使用我在 UIView 类别中创建的以下方法：

```
#import "UIView+RoundedCorners.h"

@implementation UIView (RoundedCorners)

#pragma mark - Public

- (void)addBorderWithRoundedCorners:(UIRectCorner)roundedCorners radius:(CGFloat)radius color:(UIColor *)color
{
    self.clipsToBounds = NO;
    UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds    byRoundingCorners:roundedCorners cornerRadii:CGSizeMake(radius, radius)];

    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = self.bounds;
    maskLayer.path = maskPath.CGPath;
    maskLayer.lineWidth = 1.0;
    maskLayer.strokeColor = color.CGColor;
    maskLayer.fillColor = [UIColor clearColor].CGColor;

    [self.layer addSublayer:maskLayer];
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:39:00.273

我想使用下面的代码

```
 [yourTextView.layer setBorderColor: [[UIColor redColor] CGColor]];
    [yourTextView.layer setBorderWidth: 1.0];
    [yourTextView.layer setCornerRadius:8.0f];
    [yourTextView.layer setMasksToBounds:YES]; 
```

也使用 yourTableView insted yourTextView

# php - 使用 Wkhtmltopdf 从 php 中的 html 生成 pdf

> ID：10995227
> 
> 赞同：1
> 
> 时间：2012-06-12T10:54:11.073
> 
> 标签：php, wkhtmltopdf

在我的带有 xamp 本地服务器的 Windows 上，我按照[html](http://codestips.com/) 步骤 1 和 2 (wkhtmltopdf [http://www.test.com](http://www.test.com) test.pdf) 中的 pdf 生成器进行操作，但**步骤 3**

```
3\. In php you should execute the tool using shell_exec:

shell_exec("/usr/local/bin/wkhtmltopdf-i386 http://test.com test.pdf");
//for Linux 32 bits operating system
//for Linux 64 bits operating system use wkhtmltopdf-amd64
//for windows just put the path of the exe file.
$allfile = file_get_contents("test.pdf");
header('Content-Type: application/pdf');
header('Content-Length: '.strlen($allfile));
header('Content-Disposition: inline; filename="test.pdf"');
header('Cache-Control: private, max-age=0, must-revalidate');
header('Pragma: public');
ini_set('zlib.output_compression','0'); 
```

不做任何事情... :(

我安装在 e 驱动器上并使用：

```
exec("e:\wkhtmltopdf\wkhtmltopdf.exe http://www.google.com/ test.pdf"); 
```

实际上，我正确创建了 PDF，但没有将输出发送到浏览器..知道我错过了什么......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:53:21.583

我猜，但问题可能是文件位置。file_get_contents 是否真的找到了文件？

我不太确定在执行期间生成 pdf 文件的位置，尝试对输出 pdf 位置和 file_get_contents 位置使用完整路径，默认情况下它们可能不正确。Maby 甚至以某种方式检查文件是否存在以及它们都使用什么文件夹（我不记得如何在 PHP 中执行此操作 :)）

# javascript - 如何在javascript中获取隐藏列表的值

> ID：10995234
> 
> 赞同：0
> 
> 时间：2012-06-12T10:54:30.570
> 
> 标签：javascript

我的jsp中有一个隐藏字段

```
< s: hidden id ="lstId" value = "obj.lstVendors" / > 
```

是否可以使用 javascript 获取列表

```
document.getElementbyId(lstId)? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:56:26.440

您需要将`id`引号括起来：

```
var elem = document.getElementbyId("lstId"); 
```

并获得价值

```
var val = document.getElementbyId("lstId").value; 
```

[MDN 是 JavaScript 文档的好](https://developer.mozilla.org/en/DOM/document.getElementById)地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:57:05.607

如果它呈现为具有相同 ID 的 HTML 元素，则可以。

# windows - Windows中奇怪的文件夹创建

> ID：10995245
> 
> 赞同：2
> 
> 时间：2012-06-12T10:55:07.653
> 
> 标签：windows, winapi, active-directory, directory

我需要一些帮助来理解问题。这是场景。我们有一台 Windows 域控制器机器和该域中的几台机器。（Windows 2008 中的所有内容）。在该域中的一台机器（机器名称 AlphaSiter）中安装了我们自己的基于 Java 的自定义产品。要登录我们的产品，您必须提供针对活动目录进行验证的用户/密码组合。现在这是场景。

1.  登录到域控制器并在活动目录中创建一个用户（比如大卫）并设置“用户必须在下次登录选项中更改密码”。
2.  转到安装了我们的自定义产品的名为 AlphaSiter 的机器并尝试使用新创建的用户凭据登录到我们的产品，然后成功更改密码。

副作用是在 C:\Users 中的 AlphaSiter 机器中创建了用户文件夹..即 c:\Users\David。此外，只有在创建用户时设置了“用户必须在下次登录选项中更改密码”时才会创建此文件夹。如果未选中该选项，则不会创建此用户文件夹。我们不是从我们的代码以编程方式创建文件夹。所以我想知道这个文件夹是如何创建的。它是windows内部做的吗？对此的任何帮助将不胜感激，因为我必须向我们的客户解释——:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-21T16:07:49.043

当需要存储一些配置文件信息时，始终会创建用户的配置文件文件夹。可能是 HKCU hive 中的一些注册表设置。您可以使用 RegMon 来跟踪 regitry 活动。

# symbian - Symbian : 在 s60 3rd edition 上从 SIM 获取联系人

> ID：10995246
> 
> 赞同：0
> 
> 时间：2012-06-12T10:55:09.233
> 
> 标签：symbian

这是计算存储在 SIM 卡上的联系人数量的代码。当我编译它时，我收到错误，表明应该包含用于使用 RBasicGsmPhone 的库。我google了很多，发现需要gsmbas.lib，但是mmp文件建议中没有这样的lib文件。该怎么办？？有人请帮忙

TInt SimCntCount = 0;

```
 /*this code is just to get the TSY name*/
    CCommsDatabase* db = CCommsDatabase::NewL(EDatabaseTypeUnspecified); 

    CleanupStack::PushL(db); 

    CCommsDbTableView* table = db->OpenTableLC(TPtrC(MODEM)); 

    table->GotoFirstRecord(); 

    table->ReadTextL(TPtrC(MODEM_TSY_NAME),iTsyName); 

    // Cleanup - CommsDB no longer needed 
    CleanupStack::PopAndDestroy(2); // table,db 

    // Connect to the ETel server 
    RTelServer aTelServer; 

    User::LeaveIfError(aTelServer.Connect()); 

    CleanupClosePushL(aTelServer); 

    User::LeaveIfError(aTelServer.LoadPhoneModule(iTsyName)); 

    TInt numberOfPhones; 

    User::LeaveIfError(aTelServer.EnumeratePhones(numberOfPhones)); 

    SimCntCount = 0;

    for (TInt i=numberOfPhones; i>0; i--) { 
        // Get the phone name 
        RTelServer::TPhoneInfo phoneInfo; 

        User::LeaveIfError(aTelServer.GetPhoneInfo(i-1,phoneInfo)); 

        // Open the phone by name 
        RBasicGsmPhone phone; 

        User::LeaveIfError(phone.Open(aTelServer,phoneInfo.iName)); 

        TInt phoneBookCount;

        phone.EnumeratePhoneBooks(phoneBookCount);

        RBasicGsmPhone::TPhoneBookInfo aPbInfo;

        for(TInt j=0;j<phoneBookCount;j++){
            phone.GetPhoneBookInfo(j,aPbInfo);

            SimCntCount += aPbInfo.iUsed;
        }
        phone.Close();
    } 
    CleanupStack::PopAndDestroy(1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:17:30.610

有些库实际上是不公开的，必须从诺基亚获得。您可以尝试联系诺基亚的 Symbian 支持以了解此主题 - 如果他们仍然对此感兴趣。

# android - 单击listview中的特定项目时，如何将listview的checkeditem框的颜色设置为绿色以外的其他颜色？

> ID：10995247
> 
> 赞同：1
> 
> 时间：2012-06-12T10:55:11.837
> 
> 标签：android, listview

我有一个列表视图。当用户选择特定项目时，复选框颜色变为绿色...我希望复选框的颜色应变为橙色或红色..这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:59:20.803

```
<CheckBox android:layout_width="wrap_content"
 android:layout_height="wrap_content" 
 android:text="new checkbox"
 android:background="@drawable/checkbox_background" 
 android:button="@drawable/checkbox" /> 
```

@drawable/checkbox 如下：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_checked="true" android:state_focused="true"
  android:drawable="@drawable/checkbox_on_background_focus_red" />
 <item android:state_checked="false" android:state_focused="true"
  android:drawable="@drawable/checkbox_off_background_focus_orange" />
 <item android:state_checked="false"
  android:drawable="@drawable/checkbox_off_background" />
 <item android:state_checked="true"
  android:drawable="@drawable/checkbox_on_background" />
</selector> 
```

checkbox_on_background_focus_red、checkbox_off_background_focus_orang、checkbox_off_background 和 checkbox_on_background 是您的 drawble 文件夹中所需的复选框图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:01:59.023

```
1- implement the OncheckedLinstener and notify data set changed to list 
2- put check in getview if(chk.isChecked()){//setBG color green }else {red} 
2- either set the selector to checkbox or change the BG color of chk box in if else in getview 
```

如果想优化然后

使用标签中的复选框设置列表项的位置，在 OncheckedLinstener 中，您将获得视图，只需从选项卡中的视图中获取位置，并使用 getFirstVisiblePosition 和 getLastVisiblePosition、getChildAt(int index) 并更改它。

# c# - UpdatePanel 在 asp.net webform 中也触发其他用户控件的 UpdateProgress

> ID：10995251
> 
> 赞同：0
> 
> 时间：2012-06-12T10:55:25.673
> 
> 标签：c#, asp.net, webforms, updatepanel, updatepanel-progressbar

我正在开发一个有两个的网络表单`UpdatePanels`；一个在 UserControl 内，另一个在主页面内。当`(< 1 2 3 >)`调用主页的寻呼机用户控件时，它显示相应 `UpdateProgress`的“最新新闻”部分，但也显示“订阅”用户控件的进度条。

我试图更改属性，但它不断出现；如果我保留`UpdateMode="Conditional"`用户控制，那么进度条会循环并连续显示。

如何更改此代码以仅显示相应的进度条。我查看了 50 多个示例，但 nun 似乎是匹配的。如果有人可以帮助我解决这个问题，我将不胜感激。

```
 <!-- LatestNewArea -->
    <div class="LatestNewArea">
        <asp:UpdatePanel ID="updLatestNews" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Repeater ID="rptLatestNews" runat="server" EnableViewState="False" onitemdatabound="rptLatestNews_ItemDataBound">
                <ItemTemplate>
                <asp:HyperLink ID="hylLatestNews" CssClass="chylLatestNews" runat="server" NavigateUrl=''>
                    <div class="LatestNewsWrapper">
                        <div class="LatestNewsDateBox">
                            <div class="LNYYYY">
                                <asp:Label ID="lblYYYY" runat="server" Text="2012"></asp:Label>  
                            </div>
                            <div class="LNDDMM">
                                <asp:Label ID="lblDDMM" runat="server" Text="12/08"></asp:Label> 
                            </div>
                        </div>
                        <div class="LatestNewsTitle">
                            <asp:Label ID="lblLatestNewsTitle" runat="server" Text="First News for the Website"></asp:Label>
                        </div>
                        <div class="LatestNewsHDate">
                            <asp:Label ID="Label1" runat="server" Text="Hijri: 15 Rajab 1433"></asp:Label>
                        </div>
                        <div class="LatestNewsDesc">
                            <asp:Label ID="Label2" runat="server" Text=""></asp:Label>
                        </div>
                    </div>
                    <div class="LNHLine"> </div>
                </asp:HyperLink>
            </ItemTemplate>
        </asp:Repeater>
        <!-- Pager -->
        <div class="LatestNewsPagerWrapper">
        <div class="LatestNewsPagerInnerWrapper">
            <asp:UpdateProgress ID="UpdateProgress1" runat="server" DisplayAfter="50" AssociatedUpdatePanelID="updLatestNews" >
                <ProgressTemplate>
                <div id="imgLoadingArticleList" class="imgLoadingArticleList">
                    <asp:Image ID="imgLoading" runat="server" ImageUrl="~/images/ajax-loader-bar2.gif"  />
                </div>
                </ProgressTemplate>
            </asp:UpdateProgress>
            <uc1:PagerControl ID="PagerControl1" runat="server"  CssClass="gold-pager"  PageMode="LinkButton"  />
        </div>
        </div>
        <!-- Pager -->
    </ContentTemplate>
    </asp:UpdatePanel>
    </div>
    <!-- LatestNewArea --> 
```

**用户控制页面代码**

```
 <script type="text/javascript">

        function onUpdating() {
            // get the divImage
            var panelProg = $get('divImage');
            // set it to visible
            panelProg.style.display = '';

            // hide label if visible      
            var lbl = $get('<%= this.pnlSubscribe.ClientID %>');
            lbl.innerHTML = '';
        }

        function onUpdated() {
            // get the divImage
            var panelProg = $get('divImage');
            // set it to invisible
            panelProg.style.display = 'none';
        }

    </script>

<table cellpadding="0" cellspacing="0" class="SubscribeContainer">
    <tr>
        <td align="center">
            <table cellpadding="0" cellspacing="0" class="SubscribeWrapper" border="0">
                <tr>
                    <td valign="top">
                    <asp:UpdatePanel ID="updSubscribe" runat="server" >
                        <ContentTemplate>  
                                <asp:Panel ID="pnlSubscribe" runat="server" Height="10px">
                                    <div class="SubHeading"><asp:Label ID="lblTitle" runat="server" Text="JOIN US"></asp:Label></div>
                                    <div class="dSubName">
                                        <asp:TextBox ID="txtName" CssClass="txtSubscribe" runat="server" Text="NAME" onfocus="if(this.value=='NAME')this.value='';" onblur="if(this.value=='')this.value='NAME';"></asp:TextBox>
                                    </div>
                                    <div class="dSubEmail">
                                        <asp:TextBox ID="txtEmail" CssClass="txtSubscribe" runat="server" Text="YOUR EMAIL" onfocus="if(this.value=='YOUR EMAIL')this.value='';" onblur="if(this.value=='')this.value='YOUR EMAIL';"></asp:TextBox>
                                        <asp:RequiredFieldValidator ID="rfvEmailSub"  runat="server" ErrorMessage="*" 
                                            ControlToValidate="txtEmail" ValidationGroup="SubEmail" ></asp:RequiredFieldValidator>
                                        <asp:RegularExpressionValidator ID="revEmailSub" runat="server" 
                                            ErrorMessage="*" ControlToValidate="txtEmail" ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" 
                                            ValidationGroup="SubEmail" ></asp:RegularExpressionValidator>
                                    </div>
                                    <div class="dSubSubmit">
                                        <asp:Button ID="btnSubscribe" CssClass="btnSubscribe" runat="server" ValidationGroup="SubEmail" Text="Subscribe" onclick="btnSubscribe_Click" />
                                    </div> 
                                </asp:Panel> 
                                    <div class="dSubMSG"> 
                                    <asp:Label ID="lblMSG" runat="server" Text=""></asp:Label>
                                </div>
                                            <div id="divImage" style="display:none" class="dSubAni">
                                                <asp:Image ID="Image1" runat="server" ImageUrl="~/Images/loader-sub.png" Visible="true"/>
                                            </div>

                        </ContentTemplate>
                    </asp:UpdatePanel>

                    <asp:UpdatePanelAnimationExtender ID="UpdatePanelAnimationExtender1"  TargetControlID="updSubscribe" runat="server">
                    <Animations>
                        <OnUpdating>
                            <Parallel duration="0">
                                <ScriptAction Script="onUpdating();" />

                                <EnableAction AnimationTarget="btnSubscribe" Enabled="false" />                    
                            </Parallel>
                        </OnUpdating>
                        <OnUpdated>
                            <Parallel duration="0">
                                <ScriptAction Script="onUpdated();" /> 
                                <EnableAction AnimationTarget="btnSubscribe" Enabled="true" />
                            </Parallel>
                        </OnUpdated>
                    </Animations>
                    </asp:UpdatePanelAnimationExtender>  

                       </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:58:17.080

我尝试了许多解决方案，但没有一个以正确的方式工作。最后我决定替换`UpdatePanelAnimationExtender` 用户控件，`UpdateProgress`因为我能够捕获启动 UpdatePanel`AsyPostback`

`AsyPostback`由于某种原因，我使用时无法捕获`UpdatePanelAnimationExtender`

**下面是一个工作代码**

```
 // Function to hide control on update
            function onUpdateOfSubscribe() {
                var panelProg = $get('divImage');
                // set it to visible
                panelProg.style.display = '';
                // hide label if visible      
                var lbl = $get('<%= this.pnlSubscribe.ClientID %>');
                lbl.innerHTML = '';
            }
    //Code to track the initiating event so to associate updateprogress
        var currentPostBackElement;
        function pageLoad() {
            var manager = Sys.WebForms.PageRequestManager.getInstance();
            manager.add_initializeRequest(OnInitializeRequest);
        }
        //On OnInitializeRequest
        function OnInitializeRequest(sender, args) {
            var manager = Sys.WebForms.PageRequestManager.getInstance();
            currentPostBackElement = args.get_postBackElement().parentElement;

            var cmdAuthoriseButton = '<%= btnSubscribe.ClientID %>';
            if (cmdAuthoriseButton == args._postBackElement.id) {
                // Show UpdateProgress for subscribe 
                onUpdateOfSubscribe();
            }
        }
    </script>

<table cellpadding="0" cellspacing="0" class="SubscribeContainer">
        <tr>
            <td align="center">
                <table cellpadding="0" cellspacing="0" class="SubscribeWrapper" border="0" >
                    <tr>
                        <td valign="top">
                        <asp:UpdatePanel ID="updSubscribe" runat="server" UpdateMode="Conditional"   >
                            <ContentTemplate>  
                                    <asp:Panel ID="pnlSubscribe" runat="server" Height="10px">
                                        <div class="SubHeading"><asp:Label ID="lblTitle" runat="server" Text="JOIN US"></asp:Label></div>
                                        <div class="dSubName">
                                            <asp:TextBox ID="txtName" CssClass="txtSubscribe" runat="server" Text="NAME" onfocus="if(this.value=='NAME')this.value='';" onblur="if(this.value=='')this.value='NAME';"></asp:TextBox>
                                        </div>
                                        <div class="dSubEmail">
                                            <asp:TextBox ID="txtEmail" CssClass="txtSubscribe" runat="server" Text="YOUR EMAIL" onfocus="if(this.value=='YOUR EMAIL')this.value='';" onblur="if(this.value=='')this.value='YOUR EMAIL';"></asp:TextBox>
                                            <asp:RequiredFieldValidator ID="rfvEmailSub"  runat="server" ErrorMessage="*" 
                                                ControlToValidate="txtEmail" ValidationGroup="SubEmail" ></asp:RequiredFieldValidator>
                                            <asp:RegularExpressionValidator ID="revEmailSub" runat="server" 
                                                ErrorMessage="*" ControlToValidate="txtEmail" ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" 
                                                ValidationGroup="SubEmail" ></asp:RegularExpressionValidator>
                                        </div>
                                        <div class="dSubSubmit">
                                            <asp:Button ID="btnSubscribe" CssClass="btnSubscribe" runat="server" ValidationGroup="SubEmail" Text="Subscribe" onclick="btnSubscribe_Click" />
                                        </div> 
                                    </asp:Panel> 
                                        <div class="dSubMSG"> 
                                        <asp:Label ID="lblMSG" runat="server" Text=""></asp:Label>
                                    </div>
                                                <div id="divImage" style="display:none" class="dSubAni">
                                                    <asp:Image ID="Image1" runat="server" ImageUrl="~/Images/loader-sub.png" Visible="true"/>
                                                </div>

                            </ContentTemplate>
                            <Triggers>
                                <asp:AsyncPostBackTrigger ControlID="btnSubscribe" EventName="Click" />
                            </Triggers>
                        </asp:UpdatePanel>
                    <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="updSubscribe" >
                        <ProgressTemplate>

                        </ProgressTemplate>
                    </asp:UpdateProgress>

                           </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table> 
```

# ios5 - iPad模拟器分辨率

> ID：10995252
> 
> 赞同：1
> 
> 时间：2012-06-12T10:55:26.110
> 
> 标签：ios5, ios4, xcode4.2

我是iOS新手，如何找到iPad的分辨率。谷歌搜索结果我选择了 748*1024，这个值是否以像素为单位？还是我们有任何替代的测量单位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:08:19.990

您知道您可以在模拟器中更改 iPad 的分辨率吗？

只需从“硬件”菜单中的“设备”子菜单中选择：

![模拟器中可用的不同类型的设备](../Images/a7fa1dfce85520b3c10c11c8e6213fd3.png)

与这些设备对应的分辨率应该与您已经在 Google 上搜索的值相对应。

至于测量单位，[即使是 Apple 的 iPad 规格（在此处为您链接）也](http://www.apple.com/ipad/specs/)提到了像素。Apple 正试图让开发人员摆脱以像素为单位思考的想法（因为我们必须为不同尺寸和分辨率的屏幕进行规划），但 Apple 自己仍然使用这种“像素”测量。

# ebean - 用“or”或“and”连接两个表达式列表

> ID：10995253
> 
> 赞同：5
> 
> 时间：2012-06-12T10:55:27.800
> 
> 标签：ebean

我在用“或”加入 2 表达式列表时遇到了一些麻烦。这是我正在做的一个例子：

```
RelationGroup prg =...
ExpressionList<User> exp = User.find.where();
List<ExpressionList<User>> expressions = new ArrayList<ExpressionList<User>>()
List<String> relations = new ArrayList<String>()

while(prg != null){

    if(prg.prevGroupRelation != null)
        relations.add(prg.prevGroupRelation);

    for(RelationAtt pra : prg.prAtt){
        if(pra.rel.equals("eq"))
            exp = exp.eq(pra.name, pra.value1 );
        else if(pra.rel.equals("lt"))
            exp = exp.lt(pra.name,   pra.value1);
        else if(pra.rel.equals("gt"))
            exp = exp.gt(pra.name,  pra.value1);
        else if(pra.rel.equals("bw"))
            exp = exp.gt(pra.name,  pra.value1).lt(pra.name,  pra.value2);
    }

    expression.add(exp);
    prg=prg.nextPRG();
    exp = new ExpressionList<User>(); 
}

for(i=0;i<expressions.count-1; i++)
    if(relations[i].equals("or")){
        //ToDo: (expressions[i]) or (expressions[i+1])                      
    }else{
        //ToDo: (expressions[i]) and (expressions[i+1])                     
    } 
```

我需要有类似的东西：

```
select *
from tableName
where (varName1=value and varName2=value) or (varName3) or (varName4=value and varName5=value) 
```

这是完全动态的，因此 varNames 可以是当前存在的任何一个（因为查询是由用户使用网页界面构建的），所以我不能那么容易地使用原始 SQL。现在我需要用 or/and 加入 prevExp 和 exp 并替换 exp。接收 2个`ExpressionList.or(exp, exp)`表达式。对此的任何帮助表示感谢，谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-06T17:09:37.053

您需要[查看 Ebean Junctions](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/Junction.html)功能。

有两种连接，连接和分离。使用连接，您可以使用 AND 将许多表达式连接在一起，而使用析取，您可以使用 OR 连接许多表达式。

例如：

```
Query q = Ebean.createQuery(YourClass.class);
q.where().disjunction()
    .add(Expr.eq("varName1",value).eq("varName2",value))
    .add(Expr.eq("varName3",value3))
    .add(Expr.eq("varName4",value4).eq("varName5",value5)) 
```

生成这样的sql：

```
SELECT * FROM tablename WHERE (varName1=value and varName2=value) or (varName3=value3) or (varName4=value4 and varName5=value5) 
```

如果您想灵活地选择连接类型，您可以这样做：

```
Query q = Ebean.createQuery(YourClass.class);
Junction<YourClass> junction;

if("or".equals(desiredJunctionType)){
    junction = query.where().disjunction();
} else {
    junction = query.where().conjunction();
}

// then you can add your expressions:
junction.add(Expr.eq("varName1",value).eq("varName2",value));
junction.add(Expr.eq("varName3",value3));
// etc...
// and finaly get the query results
List<YourClass> yourResult = junction.query().findList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-10T06:49:58.057

我在[google groups](https://groups.google.com/forum/#!topic/ebean/fLWBHjoZd9U "谷歌群组")上发现了同样的问题，所以让大家也在这里享受这个答案。

```
List<MobileUser> users = Ebean.find(MobileUser.class)
    .where()
        .disjunction()
            .conjunction()
                .eq("col1", val)
                .eq("col2", val)
            .endJunction()
            .eq("col3", anotherValue)
            .conjunction()
                .eq("col4", val)
                .eq("col5", val)
            .endJunction()
        .endJunction()
    .findList(); 
```

谢谢詹姆斯让我的查询按我的预期工作。

# groovy - jenkins 脚本控制台：可用的 jenkins 方法列表？

> ID：10995254
> 
> 赞同：24
> 
> 时间：2012-06-12T10:55:33.223
> 
> 标签：groovy, jenkins

我想更多地使用 jenkins 脚本控制台。

我必须在哪里查找才能找到可以通过 groovy 使用的可用对象/方法列表？网上有东西吗？我应该在 Github 上浏览源代码吗？我从哪里开始？

就像在这个例子中一样，我怎么知道它`hudson.model.Hudson.instance.pluginManager.plugins`存在并准备好从 jenkins 脚本控制台调用？

```
println(hudson.model.Hudson.instance.pluginManager.plugins) 
```

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-12T11:14:10.063

您正在寻找[Jenkins Main Module API](http://javadoc.jenkins-ci.org/)。

您可能会发现[此答案](https://stackoverflow.com/a/10781891/1178189)有助于您顺利上路。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T11:36:04.517

您可以在脚本控制台中输入一个[groovy脚本。](http://groovy.codehaus.org/)

完整的 API 可以在[jenkins javadoc](http://javadoc.jenkins-ci.org/)中找到。

# cocoa-touch - 可可：无法从另一个类中获取属性值？

> ID：10995259
> 
> 赞同：1
> 
> 时间：2012-06-12T10:56:12.553
> 
> 标签：cocoa-touch

我的 CustomClass1 中有一个属性：@property(assign)NSString *url;

```
- (void)webView:(WebView *)webView decidePolicyForNewWindowAction:(NSDictionary *)actionInformation request:(NSURLRequest *)request newFrameName:(NSString *)frameName decisionListener:(id < WebPolicyDecisionListener >)listener{
_url= [[request URL] absoluteString] ;
NSLog(@"requested url is %@",_url);
NSInteger index=[_tabView numberOfTabViewItems];
NSTabViewItem *newItem=[[NSTabViewItem alloc] init];
[_tabView insertTabViewItem:newItem atIndex:index];
[newItem setLabel:@"Empty Tab" ];
//[_tabView  selectPreviousTabViewItem:@"select"];
[self initializeWebView:newItem];
[[_tabView .tabViewItems objectAtIndex:index] setView:[newVC view]];
 // NSLog(@"requested url is %@",url); 
```

}

```
-(void)awakeFromNib{

CustomClass1 *obj=[[CustomClass1 alloc] init];
NSLog(@"url is %@",[obj url]);
[[_newWebView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:obj.url]]]; 
```

}

如何在 Viewcontroller 类的 awakefromnib 方法中获取 _url 的值？NSlog 返回 null。我该如何解决这个问题？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:59:00.090

您的“ `url`”属性需要分配并初始化为*某些*内容，然后才能返回“ `nil`”以外的内容。

您可以在您的“”对象的“”方法中设置您的“ `url`”属性的内容，但是这样做有一些技巧（[请参阅这个相关的 StackOverflow 问题](https://stackoverflow.com/questions/8056188/should-i-refer-to-self-property-in-the-init-method-with-arc)）。`init``CustomClass1`

# c# - 从 List 中删除列表项后的行为 在c#中

> ID：10995267
> 
> 赞同：5
> 
> 时间：2012-06-12T10:56:37.670
> 
> 标签：c#, list

我有清单`List <Bitmap> memory = new List<Bitmap>();`。我使用此列表将图像状态保存在用于处理图像的简单程序中。我想实现前后操作，这将在保存在内存中的状态之间迭代（=保存在列表内存中）。

内存只有有限的范围，例如 20 个状态，这意味着当我对图像进行 20 次修改并且我进行第 21 次修改时，我将删除第一个状态。大概是通过手术吧`memory.RemoveAt(0);`。那么列表会发生什么？我需要的列表比前一个列表包含 -1 个项目并且具有移位的索引。

我有 list `list.Count = 20`，我删除了第一项，我想要`list.Count = 19`并移动了索引 - 比如修剪空闲空间，所以原始列表的索引 1 现在将具有索引 0，而原始索引的索引 2 将具有索引 1，等等。我找到了一个方法的列表`TrimExcess`，它会做我想要的，但我不确定。

当我有 19 个列表时，我可以将新状态保存到最后一个位置`Add()`，所以我将再次获得 20 个列表。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T11:00:22.597

不要将 a`List`与数组混淆。数组具有固定位置和固定大小，而列表则没有。

对于数组，没有“添加”或“删除”项目之类的东西。数组始终具有创建时分配的长度。

列表的长度是动态的。您添加项目，列表会增长。您删除项目，列表缩小。如果您将一个项目添加到列表中，则该项目始终附加到列表中（您可以调用`Insert`在指定位置插入）。

但是，在任何给定时间，列表中的条目都将具有从 0 开始的索引，范围为`Count-1`（“基于零”）。即使您删除了“列表中间”位置 X 处的项目，该索引处也会有一个项目（之前位于 X+1 位置的项目）。

摘要：您在“我需要什么”段落中描述的内容是自动完成的，无需在您的代码中进行任何进一步的操作。

关于`TrimExcess`方法：一个列表有a `Count`（列表中元素的实际数量）和a `Capacity`（列表可以采用的内部元素数量，而无需调整其内部结构的大小）。可以`Capacity`大于。`Count`这是因为列表在内部将其项目存储在添加/删除时需要重新组织的数据结构中。

为了在添加时节省时间，`Capacity`会以更大的步幅增长。例如，当您将一个项目添加到一个已满的列表中时，内部会创建 4 个新的“位置”，因此连续添加不会导致太多开销。

所做的是`TrimExcess`重新组织列表的内部数据结构，以便`Capacity`匹配`Count`. 这花费的时间越多，列表中的项目越多，因此`TrimExcess`只有在您确定不再需要添加/删除任何元素时才应调用。

在您的情况下：放弃该`TrimExcess`方法。

**`Capacity`不限制列表的大小！在 C# 中，没有选项可以创建最多包含 X 个元素的列表。你必须自己做。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T10:59:59.290

该列表管理索引而不是对象。因此，在 之后`memory.RemoveAt(0)`，列表中的第一个对象（以前在索引 1 处）现在将在索引 0 处，并且 count 自动为 19。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T11:22:37.197

哇，我不相信你们这么复杂。如果他试图完全按照他的描述去做，那么 OP 想要的正是他将得到的。

```
Memory.RemoveAt(0);
Memory.Add(myBmp); 
```

所有位图索引将减 1，新位图将放置在插槽 20 的末尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-12T23:40:46.047

我注意到 List 中的一种行为，当您继续添加元素时，它会添加具有递增索引的项目。然而，如果您删除一项 List.Remove(i)（i 将是任何索引）然后尝试添加 List.Add(j)，则该项 j 将添加到堆栈的顶部。这意味着 j 索引为 0。

# ipv6 - 验证 IPv4 嵌入式 IPv6 地址的测试用例

> ID：10995273
> 
> 赞同：0
> 
> 时间：2012-06-12T10:56:52.083
> 
> 标签：ipv6

我有 3 个 IPv6 输入字段：

```
Prefix:

Length (of the prefix):

Suffix: 
```

我正在搜索一些验证 IPv4 嵌入式 IPv6 地址前缀的测试用例。

登陆 [https://www.rfc-editor.org/rfc/rfc6052#section-2.4](https://www.rfc-editor.org/rfc/rfc6052#section-2.4)

```
    +-----------+------------+------------ ------------------+
    | 网络特定 | IPv4 | IPv4 嵌入式 IPv6 地址 |
    | 前缀 | 地址 | |
    +-----------+------------+------------ ------------------+
    | 2001:db8::/32 | 192.0.2.33 | 2001:db8:c000:221:: |
    | 2001:db8:100::/40 | 192.0.2.33 | 2001:db8:1c0:2:21:: |
    | 2001:db8:122::/48 | 192.0.2.33 | 2001:db8:122:c000:2:2100:: |
    | 2001:db8:122:300::/56 | 192.0.2.33 | 2001:db8:122:3c0:0:221:: |
    | 2001:db8:122:344::/64 | 192.0.2.33 | 2001:db8:122:344:c0:2:2100:: |
    | 2001:db8:122:344::/96 | 192.0.2.33 | 2001:db8:122:344::192.0.2.33 |
    +-----------+------------+------------ ------------------+

```

我找到了一些例子，但我不确定这是否足够。你能告诉我一些其他的测试用例吗？

# jquery - JqueryMobile 弹出菜单不起作用

> ID：10995279
> 
> 赞同：2
> 
> 时间：2012-06-12T10:57:18.110
> 
> 标签：jquery, jquery-plugins, jquery-mobile

我正在尝试构建一个虚拟页面来了解 Jquerymobile，但我无法在以下链接上实现“菜单”[单击页面上的菜单按钮]：

[http://jquerymobile.com/branches/popup-widget/docs/pages/popup/index.html](http://jquerymobile.com/branches/popup-widget/docs/pages/popup/index.html)

我该如何实施？我正在使用 Jquerymobile 1.1.0 版本。

任何代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:23:07.880

您正在使用尚未发布的测试版功能，我会检查以确保您正在使用

*   jQuery 1.7.1 或更高版本 ( [http://jquerymobile.com/test/js/jquery.js](http://jquerymobile.com/test/js/jquery.js) )
*   jQM 1.2.0 ( [http://jquerymobile.com/test/js/jquery.mobile.js](http://jquerymobile.com/test/js/jquery.mobile.js) )
*   jQM 1.2.0 css ( [http://jquerymobile.com/test/css/themes/default/jquery.mobile.css](http://jquerymobile.com/test/css/themes/default/jquery.mobile.css) )

现场示例：

*   [http://jsfiddle.net/WSZ5b/1/](http://jsfiddle.net/WSZ5b/1/)

文件：

*   [http://jquerymobile.com/test/docs/pages/popup/index.html](http://jquerymobile.com/test/docs/pages/popup/index.html)

有关的：

*   [jQuery Mobile 中的弹出窗口没有按预期工作，请咨询](https://stackoverflow.com/questions/10996310/popups-in-jquery-mobile-not-working-as-intended-please-advice)

# java - What change did really happen in Async Task after Android Gingerbread?

> ID：10995281
> 
> 赞同：2
> 
> 时间：2012-06-12T10:57:24.553
> 
> 标签：java, android, multithreading, android-asynctask, threadpool

What change did really Android team make in Async task after android 2.3\. When I executed the following code I am getting same result in both Android 2.3 and 3.0.

```
package com.sample.asynctask;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

public class AsyncTaskTestActivity extends Activity {
    private static final String TAG = "AsyncTaskTestActivity";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //ExecutorService executorService = Executors.newFixedThreadPool(1);
        for (int i = 1; i <= 20; i++) {
            TestTask testTask = new TestTask(i);
            testTask.execute();
        }
    }

    private static class TestTask extends AsyncTask<Void, Integer, Void> {
        int i;
        public TestTask(int i) {
            Log.i(TAG, "Constructor for " + i);
            this.i = i;
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            Log.i(TAG, "onPreExecute for " + i);
        }

        @Override
        protected Void doInBackground(Void... params) {
            Log.i(TAG, i + " Thread goes to sleep");
            try {
                Thread.sleep(20000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Log.i(TAG, i + " Thread wakes up");
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            Log.i(TAG, "onPostExecute for " + i);
        }
    }
} 
```

My assumption in Gingerbread: 5 Async task executes at one thread pool at a time. My assumption in Honeycomb: 1 Async task executes at one thread pool at a time. Exactly like concurrent execution.

But, both Gingerbread and Honeycomb executes 5 Async tasks at the same time.

And also when the number for Async task is increased to 140.i am not getting `java.util.concurrent.RejectedExecutionException` .

Whether my assumptions are correct? What is really happening inside there?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:24:31.883

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:09:27.583

This thread outlines the changes to AsyncTask in ICS. The information is provided by a Google Employee, so it's trustworthy.

[https://groups.google.com/forum/?fromgroups#!topic/android-developers/8M0RTFfO7-M](https://groups.google.com/forum/?fromgroups#!topic/android-developers/8M0RTFfO7-M)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:07:41.733

The change in the AsyncTask behavior also requires you run on ICS and above hardware.

See: [http://commonsware.com/blog/2012/04/20/asynctask-threading-regression-confirmed.html](http://commonsware.com/blog/2012/04/20/asynctask-threading-regression-confirmed.html)

# css - 边界半径不起作用

> ID：10995294
> 
> 赞同：76
> 
> 时间：2012-06-12T10:58:15.610
> 
> 标签：css, border

我正在做一个基本的工作`div`，出于某种特殊的原因，我`border-radius: 7px`没有申请它。

```
.panel {
  float: right;
  width: 120px;
  height: auto;
  background: #fff;
  border-radius: 7px; // not working
} 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2015-06-01T22:47:04.303

给任何可能有这个问题的人。我的问题是边界崩溃。它被设置为：

```
border-collapse: collapse; 
```

我将其设置为：

```
border-collapse: separate; 
```

它解决了这个问题。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2017-06-02T17:28:45.567

对于将来遇到此问题的任何人，我必须添加

```
perspective: 1px; 
```

到我应用边框半径的元素。最终工作代码：

```
.ele-with-border-radius {
    border-radius: 15px;
    overflow: hidden;
    perspective: 1px;
} 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2018-12-28T22:20:34.133

在@ethanmay 的答案中添加一些内容：（[https://stackoverflow.com/a/44334424/8479303](https://stackoverflow.com/a/44334424/8479303)）...

如果**div**中的内容具有弯曲的角，则必须进行设置`overflow: hidden`，否则子 div 的溢出会给人以`border-radius`不工作的印象。

```
<!-- This will look like the border-radius isn't working-->
<div style="border: 1px solid black; border-radius: 10px;">
  <div style="background: red;">
      text!
  </div>
</div>

<!-- but here the contents properly fit within the rounded div -->
<div style="border: 1px solid black; border-radius: 10px; overflow: hidden;">
  <div style="background: red;">
      text!
  </div>
</div> 
```

JSFiddle：http: [//jsfiddle.net/o2t68exj/](http://jsfiddle.net/o2t68exj/)

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2019-07-25T08:48:52.997

我只是强调@Ethan May 回答的一部分，即

```
overflow: hidden; 
```

它很可能会为您的情况完成工作。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-06-12T11:01:26.760

出于某种原因，您的 padding: 7px 设置使边界半径无效。将其更改为`padding: 0px 7px`

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-06-12T11:02:47.830

在你的 div class="social-box" css

采用

```
 float:right 
```

代替

```
 float:left 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-01-11T04:58:41.343

尝试将**!important**添加到您的 CSS 中。它为我工作。

```
.panel {
  float: right;
  width: 120px;
  height: auto;
  background: #fff;
  border-radius: 7px!important;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-01-15T18:06:02.607

如果你有父元素，那么你的父元素必须有溢出：隐藏；属性，因为如果您的子内容从父边框溢出，则您的边框将可见。否则您的边框半径正在工作，但它被您的子内容隐藏。

```
.outer {
  width: 200px;
  height: 120px;
  border: 1px solid black;
  margin-left: 50px;
  overflow: hidden;
  border-radius: 30px;
}
.inner1 {
  width: 100%;
  height: 100%;
  background-image: linear-gradient(#FF9933,white, green);
  border: 1px solid black;
}
```

```
<div class="outer">
  <div class="inner1">

  </div>
</div>
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-12T11:00:41.690

现在我正在使用这样的浏览器工具包：

```
{
border-radius: 7px;
-webkit-border-radius: 7px;
-moz-border-radius: 7px;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-12T11:15:24.417

您的问题与您的设置方式无关`border-radius`。启动 Chrome 并点击`Ctrl+Shift+j`并检查元素。取消选中`width`，边框将有弯角。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-02-20T03:38:31.133

对于我的情况，我的 div 容器中有一个下拉列表，所以我不能使用`overflow: hidden`或者我的下拉列表将被隐藏。

受此讨论的启发：[https](https://twitter.com/siddharthkp/status/1094821277452234752) ://twitter.com/siddharthkp/status/1094821277452234752 我在子元素中使用`border-bottom-left-radius`and`border-bottom-right-radius`来解决此问题。

> 确保为每个孩子分别添加正确的值

[![在此处输入图像描述](../Images/61e3d95a5b49d90684f17442373fd71f.png)](https://i.stack.imgur.com/HNPXQ.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-01T12:32:28.347

您可以将引导程序包含到您的 html 文件中，并将其放在样式文件下，因此如果您这样做，该引导程序文件将像这样简要地覆盖样式文件

```
 // style file
     <link rel="stylesheet" href="css/style.css" />
     // bootstrap file
     <link rel="stylesheet" href="css/bootstrap.min.css" /> 
```

正确的方法是这样

```
 // bootstrap file
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    // style file
    <link rel="stylesheet" href="css/style.css" /> 
```

# sql-server-2008 - SSRS数据源连接错误

> ID：10995298
> 
> 赞同：0
> 
> 时间：2012-06-12T10:58:30.070
> 
> 标签：sql-server-2008, reporting-services

我刚刚更新了一个工作报告，我必须在其中更改数据库的位置，它应该可以正常工作，因为我已经在需要更改的任何地方都更改了它我敢肯定，但是当我尝试运行它时我得到了这个

> 报表服务器无法处理报表。数据源连接信息已被删除。(rsInvalidDataSourceReference)

我检查了数据源，它是正确的，那可能是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:32:51.347

修复。数据源未设置为正确的值。更改后（在报告属性中）一切正常。

# java - Intellij IDEA 可以存在于 Netbeans 商店中吗？

> ID：10995300
> 
> 赞同：0
> 
> 时间：2012-06-12T10:58:35.140
> 
> 标签：java, ide, intellij-idea

我所有的其他同事都使用 Netbeans，但我有机会使用 IDEA。我们是否能够一起处理相同的 Java EE 项目，或者我们是否会遇到项目、签入和签出 SVN 等问题？

我们主要在桌面上使用 Glassfish 开发 EE 和 Spring MVC 应用程序，并提交到 SVN，尽管我可能不得不加载同事的整个项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T11:04:37.837

只要您使用一些标准的、与 IDE 无关的构建工具，例如[maven](/questions/tagged/maven "显示标记为“maven”的问题")，我认为没有问题。我在 IntelliJ IDEA 上工作，而我的同事使用 Eclipse——除了不同的格式规则或导入顺序之外没有问题——所有这些都可以自定义。

Subversion（或任何其他 VCS）是最少的问题。即使您团队的其他成员推送 Netbeans 项目元数据文件，IntelliJ 也会简单地忽略它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:33:14.797

如果您使用 Maven 作为您的构建工具，那么**可以**（还有 Eclipse）。

这三者都有工具，可以很好地与 Maven 项目一起工作。

如果您使用的是“普通”Netbeans 项目，我认为 IDEA 无法与它们一起使用。如果是这样，我建议你游说改变。Maven 是回报丰厚的投资之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:03:01.173

为什么您要不顾常规而成为唯一使用不同 IDE 的人？你会在别人没有的问题上浪费时间，遇到格式问题，与结对编程等问题。

尽管我喜欢自由选择，但团队内的开发环境应该是一致的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T11:07:22.357

我认为像 ant、maven 或 gradle 这样的构建工具实际上是 java ee 行业的标准。让你的队友使用它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-12T11:03:55.950

您会遇到共享项目的问题，因为 Netbeans 和 IDEA 的项目文件夹和结构不同。

但是，您可以尝试彼此共享您的 src 文件夹并通过 SVN 彼此更新您的代码，尽管出于兼容性原因我不建议这样做，因为您将无法正确共享库并使用其他可用的团队功能在 NetBeans 中。

因此，使用不同的 IDE 并不是一个好主意，这样您就不会浪费时间调试兼容性。

此外，值得注意的是，IDEA 使用自己的自定义库来实现某些功能，并且还以与 NetBeans 不同的方式构建项目，因此在 IDEA 上运行的项目可能无法在 NetBeans 上运行，反之亦然。

最重要的是，不要浪费时间使用与其他 IDE 不同的 IDE。

# windows - 将程序集添加到缓存 Windows XP SP3 失败

> ID：10995302
> 
> 赞同：-1
> 
> 时间：2012-06-12T10:58:44.217
> 
> 标签：windows, windows-xp, gac, windows-xp-sp3

我正在尝试将程序集添加到 GAC，但错误表明**“将程序集添加到缓存失败：需要管理员权限才能使用所选选项。使用管理员命令提示符完成这些任务。”**

我使用的是 Windows XP SP3，用户帐户类型是管理员。请参考下图。

TIA

![请参考图片](../Images/d2ed652c834985f4456b8a51f7ee6671.png) [http://i.stack.imgur.com/TZXpc.png](https://i.stack.imgur.com/TZXpc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:04:12.320

您是计算机上的管理员，但您没有以管理员身份运行 Visual Studio 命令提示符（或 cmd.exe）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:56:30.670

我能够通过命令提示符通过附加命令解决我的问题

**C:\WINDOWS\system32>runas /user:computerName\administrator cmd**

![看一下这个](../Images/7c31be7967e4549ef47daf13e53c0470.png)

# google-apps-script - 工作时间只触发

> ID：10995308
> 
> 赞同：4
> 
> 时间：2012-06-12T10:59:09.663
> 
> 标签：google-apps-script

我想运行我使用过的[这个脚本](https://developers.google.com/apps-script/articles/embedding_docslist_in_sites)（在站点中嵌入驱动器列表），但只将触发器设置为在周一至周五的办公时间运行它。

我希望脚本每 5 分钟运行一次，但在晚上和周末停止。所以我认为我需要：

1.  有一个脚本以编程方式创建一个触发器以在白天运行实际函数，并在每天开始时给该触发器运行一次。

2.  有第二个脚本来删除天数触发器在一天结束时运行一次。

我这样做是因为我刚刚了解到一天中最多可以使用 CPU 时间，所以我不想在不需要更新列表的时候浪费它。

我可以看到如何创建触发器，但不清楚如何创建触发器来激活另一个脚本（函数）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T11:15:19.700

我认为在您的主要功能的开头插入一个小程序会更容易，它检查一天中的时间并在下班时间简单地“返回”。这样你就可以让你的触发器一直设置为 5 分钟。就处理时间而言，这种“小时检查”将非常短。

这是一个测试函数来展示它是如何工作的：

```
function officeHours() {
    var nowH=new Date().getHours();
    var nowD=new Date().getDay();
    // Logger.log('day : '+nowD+'   Hours : '+nowH)
    if (nowH>17||nowH<8||nowD==6||nowD==0) { return }

   Browser.msgBox('time to work !');//normally your real function should begin here...
} 
```

# java - 使用 Web-harvest 抓取网页内容

> ID：10995309
> 
> 赞同：0
> 
> 时间：2012-06-12T10:59:12.423
> 
> 标签：java, html, web-scraping, webharvest

我想从网页中抓取特定内容，为此我正在使用网络收获。当我尝试抓取内容时，它在其他网站上运行良好，但它没有抓取[该 URL](http://freesearch.naukri.com/preview/preview?uname=63017692f2b266780bfd20476cd67466001a4a17005b4a5355041f121b502e18514b4e4e43121c4151005&sid=73682841&LT=1339495252)的内容。

我的 Java 代码在这里：

```
import org.webharvest.definition.ScraperConfiguration;
import org.webharvest.runtime.Scraper;
import org.webharvest.runtime.variables.Variable;
import java.io.FileNotFoundException;
public class App 
{
public static void main(String[] args) 
{
    try 
    {
        ScraperConfiguration config  =  new ScraperConfiguration("twit88.xml");
        Scraper scraper = new Scraper(config, "c:/temp/");
        //scraper.getHttpClientManager().setHttpProxy("proxy-server", 8001);
        scraper.addVariableToContext("url", "http://freesearch.naukri.com/preview/preview?uname=63017692f2b266780bfd20476cd67466001a4a17005b4a5355041f121b502e18514b4e4e43121c4151005&sid=73682841&LT=1339495252");
        scraper.setDebug(true);
        scraper.execute();
        // takes variable created during execution
        Variable article = (Variable)scraper.getContext().getVar("article");
        // do something with articles...
        System.out.println(article.toString());
        //System.out.println("1234=====rtyu");
    } 
    catch (FileNotFoundException e) 
    {
        System.out.println(e.getMessage());
    }
 }
} 
```

我的 XML 在这里：

```
<?xml version="1.0" encoding="UTF-8"?>

<config charset="UTF-8">
<!--
<var-def name="url">http://twit88.com/blog/2008/01/02/java-encrypt-and-send-a-   large-file-securely/</var-def>        
 -->

 <!-- <file action="write" path="twit88/twit88${sys.date()}.xml" charset="UTF-8"> -->

    <!--
    <template>
        <![CDATA[ <twit88 date="${sys.datetime("dd.MM.yyyy")}"> ]]>
    </template>
    -->
<var-def name="article">
    <xquery>
      <xq-param name="doc">
            <html-to-xml outputtype="browser-compact" prunetags="yes">
                <http url="${url}"/>
            </html-to-xml>
      </xq-param> 

      <xq-expression><![CDATA[ 
        declare variable $doc as node() external;          
         let $title := data($doc//div[@class="bdrGry"]/div[@class="boxHD1"]/h1)

        return
           <article>                
                 <title>{data($title)}</title>
           </article>             
       ]]>
       </xq-expression> 

    </xquery> 
    </var-def>
    <!--
      <![CDATA[ </twit88> ]]>  -->
    <!-- </file> -->               

     </config> 
```

我想抓取此 URL 的第一个块，例如候选人姓名、当前名称、公司等，但我无法通过在 XML 文件中使用其类来抓取，例如（我只尝试了一个第一次尝试抓取候选人姓名）

```
 declare variable $doc as node() external;          
         let $title := data($doc//div[@class="bdrGry"]/div[@class="boxHD1"]/h1) 
```

但它不起作用。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:19:15.503

> ..它不是为[这个 URL](http://freesearch.naukri.com/preview/preview?uname=63017692f2b266780bfd20476cd67466001a4a17005b4a5355041f121b502e18514b4e4e43121c4151005&sid=73682841&LT=1339495252)抓取内容。

来自 Naukri.com 的[条款和条件](http://jobsearch.naukri.com/mynaukri/mn_termsconditions.php)：

> Naukri.com 使用技术手段将机器人等排除在抓取网站和**抓取内容之外。**用户承诺***不规避这些方法。***

# java - 驱动程序可执行文件必须由 webdriver.ie.driver 系统属性设置

> ID：10995314
> 
> 赞同：58
> 
> 时间：2012-06-12T10:59:52.977
> 
> 标签：java, internet-explorer, selenium-webdriver, webdriver, system-properties

我正在使用 Selenium 来自动化测试。我的应用程序专门使用 IE，它不适用于其他浏览器。

代码：

```
import org.openqa.selenium.ie.InternetExplorerDriver;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;

public class Test {
    public static void main(String[] args) {
        final String sUrl = "http://www.google.co.in/";                             
        System.setProperty("webdriver.chrome.driver","C:\\Users\\vthaduri\\workspace\\LDCSuite\\IEDriverServer.exe");
        WebDriver oWebDriver = new InternetExplorerDriver();
        oWebDriver.get(sUrl);
        WebElement oSearchInputElem = oWebDriver.findElement(By.name("q")); // Use name locator to identify the search input field.
        oSearchInputElem.sendKeys("Selenium 2");
        WebElement oGoogleSearchBtn = oWebDriver.findElement(By.xpath("//input[@name='btnG']"));  
        oGoogleSearchBtn.click();

        try {
            Thread.sleep(5000);
        } catch(InterruptedException ex) {
            System.out.println(ex.getMessage());
        }
        oWebDriver.close();
    }    
} 
```

这是我得到的错误

*驱动程序可执行文件的路径必须由 webdriver.ie.driver 系统属性设置；有关更多信息，请参阅[https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver](https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver)。最新版本可以从[http://www.seleniumhq.org/download/](http://www.seleniumhq.org/download/) 2012 年 6 月 12 日 4:18:42 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute INFO: I/O exception (java. net.SocketException）在处理请求时捕获：软件导致连接中止：recv failed Jun 12, 2012 4:18:42 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute*

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-12T12:08:44.060

1.  您需要在您的系统上执行 InternetExplorer 驱动程序。因此，从提示的源 ( [http://www.seleniumhq.org/download/](http://www.seleniumhq.org/download/) ) 下载它，将其解压缩并放置在您可以找到的地方。在我的示例中，我假设您将其放置在`C:\Selenium\iexploredriver.exe`

2.  然后你必须在系统中设置它。这是从我的 Selenium 项目中粘贴的 Java 代码：

    ```
    File file = new File("C:/Selenium/iexploredriver.exe");
    System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
    WebDriver driver = new InternetExplorerDriver(); 
    ```

基本上，您必须在初始化驱动程序**之前设置此属性**

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-12T12:06:44.920

错误消息说

> “驱动程序可执行文件的路径必须由 **webdriver.ie.driver**系统属性设置；”

您正在使用“ **webdriver.chrome.driver** ”属性设置 Chrome 驱动程序的路径。对于 InternetExplorerDriver，您没有设置文件位置，为此您必须设置“ **webdriver.ie.driver** ”属性。

您可以在 shell、maven 或 IDE 中使用 -DpropertyName=Value 设置这些属性

```
-Dwebdriver.ie.driver="C:/.../IEDriverServer.exe" 
```

由于 Windows 机器上路径中的空格或斜杠，您需要使用引号，或者反转斜杠，否则它们是字符串字符串转义前缀。

你也可以使用

```
System.setProperty("webdriver.ie.driver","C:/.../IEDriverServer.exe"); 
```

在你的代码里面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-25T08:19:50.427

我只是将驱动程序文件直接放入我的项目中，以免对我的本地机器产生任何依赖。

```
final File file = new File("driver/chromedriver_2_22_mac");
System.setProperty("webdriver.chrome.driver", file.getAbsolutePath());

driver = new ChromeDriver(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-02T08:50:30.050

For spring :

```
File inputFile = new ClassPathResource("\\chrome\\chromedriver.exe").getFile();
System.setProperty("webdriver.chrome.driver",inputFile.getCanonicalPath()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-07T18:25:32.813

您需要在您的系统上下载 InternetExplorer 驱动程序可执行文件，下载后从源 ( [http://code.google.com/p/selenium/downloads/list](http://code.google.com/p/selenium/downloads/list) ) 下载解压缩并放在您的某个位置计算机。在我的示例中，我将其放置到 D:\iexploredriver.exe

然后你在你的eclipse主类中写了下面的代码

```
 System.setProperty("webdriver.ie.driver", "D:/iexploredriver.exe");
   WebDriver driver = new InternetExplorerDriver(); 
```

# php - 来自两个表的 COUNT 和 SELECT 查询

> ID：10995324
> 
> 赞同：2
> 
> 时间：2012-06-12T11:00:24.833
> 
> 标签：php, sql

我有这两张表：

```
1\. users
   -id
   -name
   -email
   -rank

2\. pages
   -user
   -id 
```

我需要从用户中选择所有数据并计算他写了多少页（从页面用户是用户表中用户的ID）。

你能把它变成1个复杂的查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:03:52.433

```
select u.*,count(p.*) from users u left join pages p on u.id=p.user group by u.id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:04:18.913

我不能把它变成一个复杂的查询，但这是一个简单的查询：

```
SELECT u.name, u.email, u.rank, u.id, count(p.id) as 'PageCount'
FROM Users u
JOIN Pages p ON
    p.id = u.id
GROUP BY u.name, u.email, u.rank, u.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:02:49.043

是的，这样做：

```
select u.id, u.name, u.email, u.rank, count(p.id) as 'counter' from users u
inner join pages p on p.user = u.id
group by u.id, u.name, u.email, u.rank 
```

您按用户信息分组并计算（计数）每个用户的页数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T11:11:53.713

这个简单的查询怎么样

> ```
> SELECT user, COUNT(*) AS pages FROM page GROUP BY user 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T11:03:00.747

这个怎么样。

```
select   u.id, count(p.id) as 'number_of_pages_wrote'
from     users u inner join pages p
on       u.id = p.id
group by u.id; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T11:03:26.620

```
select   users.id, users.name,users.email,users.rank, count(pages.id) 
from     users,pages 
where    users.id = pages.user 
group by users.id 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-12T11:03:51.580

你可以这样做 -

```
SELECT u.*, p.count
FROM users u,
     (SELECT pa.id, count(1) FROM pages pa WHERE pa.id = u.id) p
WHERE u.id = p.id 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-12T11:03:11.057

这可以通过一个`JOIN`.

例如，

```
SELECT * FROM pages 
INNER JOIN users ON (users.id=pages.user) 
WHERE users.id=5 
```

将从用户 ID 5 中选择所有页面。我会让你做剩下的事情来包含聚合函数；）

# css - 为 Stylus 设置自动编译

> ID：10995330
> 
> 赞同：20
> 
> 时间：2012-06-12T11:00:57.550
> 
> 标签：css, node.js, stylus

我已经在我的 mac 上安装了 node.js/stylus/nib，我可以在命令行上手动编译`.styl`文件。`.css`我也知道`stylus.middleware()`当我搜索如何在`.styl`更改时设置自动编译时，会不断出现这种情况，但是我不知道应该如何实现它（我以前从未使用过 node.js）。

我将该代码放在哪个文件中？

如何启动此代码以使其始终运行？

我想我在节点方面遗漏了一些东西才能进行设置。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-09T08:14:15.783

从命令行，您可以使用：

```
stylus -w folder/ 
```

或者只是另一个例子：

```
stylus -w styl/*.styl -o css/ 
```

它将监视更改并编译该文件夹下的所有 *.styl 文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T11:35:29.197

如果您`stylus`作为全局包 ( `npm install stylus -g`) 安装，则您的系统上有一个手写笔二进制文件。

```
$ stylus -h
  Usage: stylus [options] [command] [< in [> out]]
                [file|dir ...]

  Commands:

    help [<type>:]<prop> Opens help info at MDC for <prop> in
                         your default browser. Optionally
                         searches other resources of <type>:
                         safari opera w3c ms caniuse quirksmode

  Options:

    -i, --interactive       Start interactive REPL
    -u, --use <path>        Utilize the stylus plugin at <path>
    -U, --inline            Utilize image inlining via data uri support
    -w, --watch             Watch file(s) for changes and re-compile
    -o, --out <dir>         Output to <dir> when passing files
    -C, --css <src> [dest]  Convert css input to stylus
    -I, --include <path>    Add <path> to lookup paths
    -c, --compress          Compress css output
    -d, --compare           Display input along with output
    -f, --firebug           Emits debug infos in the generated css that
                            can be used by the FireStylus Firebug plugin
    -l, --line-numbers      Emits comments in the generated css
                            indicating the corresponding stylus line
    --include-css           Include regular css on @import
    -V, --version           Display the version of stylus
    -h, --help              Display help information 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-26T00:19:40.693

这简要介绍了一些 Node 基础知识。

**0\. 组织代码。**按照惯例，将您的主要 Node 应用程序代码放入`app.js`项目根目录中调用的文件中。

app.js 内部的东西被分为两个一般部分：

1.  **同步**初始化：需要模块、构建目录、读取配置、数据库连接等。阻塞的东西，所以它们必须存在或快速消亡。
2.  **异步**应用程序任务：启动服务器、后台进程、自动编译 CSS 和 JS、路由、I/O 等。事件循环中的内容。

**1\. 在构建应用程序时将 Stylus 编译为 CSS。**我们需要[stylus](https://www.npmjs.com/package/stylus)模块。通常这是在 app.js 的顶部完成的，以保持依赖关系。

```
var stylus = require('stylus'); 
```

第一次运行 Node 时`app.js`，你需要这个 JS 模块来构建你的 CSS。这是基本思想：

```
stylus.render(stylus-code-string, function(err, css) {
  if (err) throw err;
  console.log(css);
}); 
```

这是官方的[Stylus Javascript API](http://stylus-lang.com/docs/js.html)。

[要使用 Node 的强大功能，您应该使用fs 模块](http://nodejs.org/api/fs.html)将 stylus 文件读取到缓冲区中，然后将其转换为字符串，最后将其传递到`stylus.render()`. 然后，将结果发送到目标文件。由于这是构建过程的一部分，因此它可以是同步的。但这不是你的问题......

**2\. 使用 Stylus 作为后台进程自动编译 CSS。**

此函数生成一个[child_process](http://nodejs.org/api/child_process.html)，它监视单个`.styl`文件并将包含`.styl`的文件编译成一个`.css`文件。您不需要为此使用模块，只需安装 stylus 可执行文件，以便它在命令行上运行。（你已经这样做了）。这个例子是用手写笔版本**0.5.0**制作的。此外，您使用的文件夹路径（例如`build/styles`和`styles`）需要存在。

```
function watchStyles(sourcefile, destinationfolder) {
  var Stylus = child_process.spawn('stylus', ['--sourcemap', '-w', sourcefile, '--out', destinationfolder]);

  Stylus.stdout.pipe(process.stdout); // notifications: watching, compiled, generated.
  Stylus.stderr.pipe(process.stdout); // warnings: ParseError.

  Stylus.on('error', function(err) {
    console.log("Stylus process("+Stylus.pid+") error: "+err);
    console.log(err);
  });

  // Report unclean exit.
  Stylus.on('close', function (code) {
    if (code !== 0) {
      console.log("Stylus process("+Stylus.pid+") exited with code " + code);
    }
  });
} 
```

接下来，您需要在启动应用程序后的某个时间调用此函数。传入您的主`.styl`文件作为源。然后是你希望你的 CSS 去的目标目录。

```
// check that you passed '-w' parameter
if (process.argv[2] && (process.argv[2] == "-w")) {
  watchStyles('styles/app.styl', 'build/styles');
} 
```

通过运行启动应用程序： `$ node app.js -w`

它有助于将您的`.styl`文件组织在一个之下，`app.styl`以便您的内容`app.styl`看起来像这样：

```
@import 'layout'
@import 'header'
@import 'main'
@import 'footer'
@import 'modal'
@import 'overrides' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-29T15:36:46.740

***我昨天来到这里并没有找到正确的答案。因此，此后续行动适用于与我走同样道路的任何其他人......* **

我在设置手写笔命令行时也遇到了问题。我一直在尝试`stylus`全局安装
`$ npm install -g stylus`
，但会出错。我让它在一个项目中工作，`grunt-contrib-stylus`但通过命令行我没有得到任何工作。
甚至`$stylus --version`什么都没回。我试图更新`npm`，但它坏了`npm`，所以我最终重新安装`node`重新安装`npm`。然后我能够重新安装`$ sudo npm install -g stylus`并获得`--version`.
我还必须重新安装`grunt`以及我通过`npm`...在全球范围内安装的所有其他东西

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-04T18:16:08.510

`npm install stylus --save-dev`首先，如果没有，请在本地安装手写笔。

创建一个启动脚本来构建您的样式表并在您的主手写笔文件中检测到更改时重新构建：

**启动.js**

```
var fs = require('fs')
var stylus = require('stylus')

// Define input filename and output filename
var styleInput = __dirname + '/dev/stylus/main.styl'
var styleOutputFilename = 'main.css'
var styleOutput = __dirname + '/static/' + styleOutputFilename
var stylusPaths = [__dirname + '/dev/stylus', __dirname + '/dev/stylus/libs']

// Build stylesheet on first execute
buildStyles(styleInput, styleOutput, stylusPaths)

// Watch stylus file for changes.
fs.watch(styleInput, function(eventType, filename) {
  if (filename) {
    buildStyles(styleInput, styleOutput, stylusPaths)
  } else {
    console.log('no filename found. probably platform doesnt support it.');
  }
});

function buildStyles(input, output, paths) {
  stylus(fs.readFileSync(input, 'utf-8'))
    .set('paths', paths)
    .set('include css', true)
    .set('watch', true)
    .render(function(err, css) {
      if (err) throw err;

      fs.writeFile(output, css, (err) => {
        if (err) throw err;

        console.log(' Stylesheet built successfully.');
      });
  });
} 
```

输入`node startup.js`终端。您将看到一条消息“样式表构建成功”。每当您更改主手写笔文件时。

[在他们的网站上有很好的关于 stylus javascript api 的文档。](http://stylus-lang.com/docs/js.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T11:03:02.127

好的，我编辑了我的答案，因为您不想创建主页，然后 connect-assets 没有意义，也无法帮助您……但也许这个，……

[http://thechangelog.com/post/3036532096/stylus-expressive-robust-feature-rich-css-language](http://thechangelog.com/post/3036532096/stylus-expressive-robust-feature-rich-css-language)

在该站点上，您在底部找到一个视频，该视频接近尾声显示如何通过命令行使用手写笔...

HTH，抱歉造成误会...

# javascript - 从 CRM 4 中的模式对话框刷新父表单 - 并不总是有效

> ID：10995332
> 
> 赞同：0
> 
> 时间：2012-06-12T11:01:03.047
> 
> 标签：javascript, refresh, modal-dialog, crm, dynamics-crm-4

我有一个模态对话框，我想在关闭对话框时刷新父窗体。

我使用了这个 javascript 代码：

```
self.close();
window.dialogArguments.location.reload(true); 
```

问题是它并不总是刷新父表单。有时它会刷新，有时它不会刷新，我不明白为什么它总是不刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:19:40.097

我怀疑这是间歇性的，因为有时您`self.close();`在到达下一行之前就完成了。

基本上，交换这两个语句，我希望你会看到一致的性能。

# jquery - 使用 jquery 显示/隐藏 asp 占位符

> ID：10995334
> 
> 赞同：2
> 
> 时间：2012-06-12T11:01:09.623
> 
> 标签：jquery, asp.net, html, css

CSS：

```
.comments{cursor:pointer;}
.hidediv{visibility:hidden;} 
```

html:

```
<span id="agreeComments" class="comments b">Comments</span><br /><br />
    <div id="divAgree" class="hidediv">
      <asp:PlaceHolder runat="server" ID="plcAgreements" ClientIDMode="Inherit" />
    </div> 
```

jQuery：

```
<script>
        $(document).ready(function () {
            $("#agreeComments").click(function () {
                if ($("#divAgree").is(":hidden")) {
                    $("#divAgree").slideDown("slow");
                } else {
                    $("#divAgree").slideUp("slow");
                    $("#plcAgreements").show();
                }
            }
            );
        });
    </script> 
```

我正在使用上面的代码来隐藏和显示一个使用 jquery 的 div。我在 div 中有一个 asp 占位符控件。我需要在加载页面时隐藏 div，并且需要在单击评论跨度时显示或隐藏。Div 越来越隐藏，但问题是它占用了 asp 占位符的空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T11:05:11.313

改变这个

```
.hidediv{visibility:hidden;} 
```

到

```
.hidediv{display:none;} 
```

因为`visibility:hidden;`保留了隐藏元素的宽度和高度，而`display:none;`没有。

检查此问题以获取更多信息[可见性：隐藏和显示：无有什么区别？](https://stackoverflow.com/questions/133051/what-is-the-difference-between-visibilityhidden-and-displaynone)

# java - 如何向 XML DOM 对象添加命名空间前缀？

> ID：10995338
> 
> 赞同：11
> 
> 时间：2012-06-12T11:01:42.663
> 
> 标签：java, xml, spring, dom, jaxb

我正在尝试使用特定名称空间构建 XML 文档。我试图生成的最终文档应该是这样的：

```
<m:documentObject xmlns:m="http://www.myschema.com">
    <sender>token</sender>
    <receiver>token</receiver>
    <payload>token</payload>
</m:documentObject> 
```

这是我到目前为止所拥有的。

```
Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
Element requestElement = document.createElementNS("http://www.myschema.com", "documentObject");

document.appendChild(requestElement);

Element sender = document.createElement("sender");
requestElement.appendChild(sender);     
Text senderText = document.createTextNode("Xmlsender");
sender.appendChild(senderText); 

Element receiver = document.createElement("receiver");
requestElement.appendChild(receiver);       
Text receiverText = document.createTextNode("Xmlreceiver");
receiver.appendChild(receiverText); 

Element payload = document.createElement("payload");
requestElement.appendChild(payload);        
Text payloadText = document.createTextNode("Xmlpayload");
payload.appendChild(payloadText);   

StringWriter sw = new StringWriter();
StreamResult result = new StreamResult(sw);

DOMSource source = new DOMSource(requestElement);

TransformerFactory tf = TransformerFactory.newInstance();
Transformer transformer = tf.newTransformer();
transformer.setOutputProperty(OutputKeys.ENCODING, "utf-8"); 
transformer.transform(source, result);

String xmlString = sw.toString();
System.out.println(xmlString) 
```

由于某种原因，当我运行上面的模式时，没有前缀。如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<documentObject xmlns="http://www.myschema.com">
    <sender>Xmlsender</sender>
    <receiver>Xmlreceiver</receiver>
    <payload>Xmlpayload</payload>
</documentObject> 
```

我需要做什么才能使 XML 与第一个 XML 示例中显示的完全一样，带有命名空间前缀和具有命名空间前缀的标签？

我正在尝试创建一个 XML 字符串，该字符串将用于 Spring-WS Web 服务，该服务需要一个 JAXB 对象，该对象的格式如第一个示例中所示。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T11:13:15.587

您可以使用[`setPrefix`](http://www.w3.org/2003/01/dom2-javadoc/org/w3c/dom/Node.html#setPrefix_java.lang.String_).

但最好像这样创建根元素：

```
document.createElementNS("http://www.myschema.com", "m:documentObject"); 
```

另请注意，传递`null`to`createElement`是强制使用 null 命名空间的受支持方式。但是，在您的原始示例中，这不起作用，因为您的文档元素通过组合没有前缀的命名空间 URI 有效地强制使用默认命名空间。

# assembly - RAX、RBX、RCX、RDX、RSI、RDI、RBP、RSP 中的 R 代表什么？

> ID：10995349
> 
> 赞同：30
> 
> 时间：2012-06-12T11:02:17.997
> 
> 标签：assembly, x86, x86-64, cpu-registers, cpu-architecture

x86 汇编语言不得不改变，因为 x86 处理器架构从 8 位变为 16 位，再到 32 位，现在是 64 位。

我知道在 32 位汇编器寄存器名称（EAX、EBX 等）中，每个名称的 E 前缀代表扩展，表示寄存器的 32 位形式而不是 16 位形式（AX、BX 等）。

这些寄存器名称的 R 前缀在 64 位中代表什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-12T11:09:54.243

我认为它只是“寄存器”的 R，因为在 x86-64 上还有额外的寄存器 R8 - R15，并且 R 是许多寄存器编号的 CPU 架构的常见前缀。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-06-12T15:28:11.340

最初的英特尔 x86 处理器（即 8080 处理器）是 8 位处理器，其设计目的是针对特殊用途、小型计算机（例如收银机）或设备控制器等应用，而不是通用计算机（竞争对手包括摩托罗拉 6800）。以下 8086 处理器系列（8086 和降低成本的 8088）是 16 位微处理器，它延续了 Intel 8080 架构，同时通过增加 16 位来扩展它，着眼于处理器的更通用用途。

英特尔 8080 和英特尔 8086 处理器的寄存器数量有限，其中大多数都有特殊用途，因此它们在汇编语言中具有特定的名称，例如 A、B 或 AX、BX（竞争对手如摩托罗拉 6800 有类似的约定） . IBM 360/370 系列或 DEC VAX 等通用计算机对寄存器（例如 R0、R1 等）等组件使用了更通用的名称，因为寄存器是通用的（许多高端工作站中使用的摩托罗拉 68000 32 位处理器）在 1980 年代与 8 个数据寄存器类似，命名为 D0 到 D7）。

自 1970 年代以来，随着英特尔多年来不断发展 x86 处理器，即使 x86 的目标应用程序已从专用微控制器应用程序扩展到通用计算机，它也试图保持向后兼容性。在此演进过程中，寄存器的数量不断增加，许多最初的专用寄存器已演变为通用用途，因为英特尔还在 80286 中引入了处理器芯片操作模式的概念，以帮助实现向后兼容性。

对于 64 位处理器，英特尔需要某种方法来识别 64 位传输与 32 位或汇编语言中的其他传输。与此同时，英特尔推出了额外的通用寄存器。使用通用寄存器的通用行业命名约定，字母 R，后跟一个数字是一个简单的决定。

然而，英特尔还面临着必须保持对旧寄存器的向后兼容性。因此，字母 R 用作 16 位寄存器名称的前缀，就像 32 位处理器使用字母 E 作为 16 位寄存器名称的前缀一样。同时，64 位寄存器操作的设计与前几代 32 位寄存器操作的设计略有不同。

随着从 8 位处理器到 16 位处理器的变化，寄存器从 8 位扩展为 16 位，因此名称在寄存器名称后带有字母 X，例如 AX、BX 等。这些寄存器可以视为两个 8 位寄存器（16 位 AX 寄存器由 8 位 AH 和 8 位 AL 组成，其中 H 表示 AX 寄存器的高位或最高有效位，L 表示 AX 寄存器的低位或最低有效位）。

随着从 16 位到 32 位处理器的变化，寄存器从 16 位扩展到 32 位，因此名称以字母 E 作为前缀，例如 EAX、EBX 等。这些寄存器可以被视为具有两个独立的 16 位组件（使用 16 位名称访问的最低有效 16 位，例如 EAX -> AX、EBX -> BX 等）或四个 8 位寄存器（作为两个 8 位寄存器访问的最低有效 16 位，例如 EAX -> AH 和AL、EBX -> BH 和 BL 等）当寄存器移位和按位运算用于在 32 位寄存器（如 EAX、EBX 等）的高 16 位和低 16 位之间移动 16 位值时。这保持，在某种程度上，从 8 位到 16 位的变化做了什么，但是无法直接访问 32 位寄存器的高 16 位，而直接访问 8086/8080 中 16 位寄存器的高 8 位的方式有被提供。

第 1 卷的第 3.7.2.1 节：Intel 64 和 IA-32 架构软件开发人员手册的基本架构，其中提到了 64 位模式。

```
Register operands in 64-bit mode can be any of the following:
• 64-bit general-purpose registers (RAX, RBX, RCX, RDX, RSI, RDI, RSP, RBP, or R8-R15)
• 32-bit general-purpose registers (EAX, EBX, ECX, EDX, ESI, EDI, ESP, EBP, or R8D-R15D)
• 16-bit general-purpose registers (AX, BX, CX, DX, SI, DI, SP, BP, or R8W-R15W)
• 8-bit general-purpose registers: AL, BL, CL, DL, SIL, DIL, SPL, BPL, and R8L-R15L are available using REX
prefixes; AL, BL, CL, DL, AH, BH, CH, DH are available without using REX prefixes.
• Segment registers (CS, DS, SS, ES, FS, and GS)
• RFLAGS register
• x87 FPU registers (ST0 through ST7, status word, control word, tag word, data operand pointer, and instruction
pointer)
• MMX registers (MM0 through MM7)
• XMM registers (XMM0 through XMM15) and the MXCSR register
• Control registers (CR0, CR2, CR3, CR4, and CR8) and system table pointer registers (GDTR, LDTR, IDTR, and
task register)
• Debug registers (DR0, DR1, DR2, DR3, DR6, and DR7)
• MSR registers
• RDX:RAX register pair representing a 128-bit operand 
```

[请参阅有关x86_64 寄存器 rax/eax/ax/al 覆盖完整寄存器内容](https://stackoverflow.com/questions/25455447/x86-64-registers-rax-eax-ax-al-overwriting-full-register-contents)的问题和答案以及[为什么大多数 x64 指令将 32 位寄存器的上部归零，](https://stackoverflow.com/questions/11177137/why-do-most-x64-instructions-zero-the-upper-part-of-a-32-bit-register)其中提供了一些关于 64 位寄存器操作与32位寄存器操作。

# linux - Linux 中每个正在运行的进程的 $PATH 变量

> ID：10995350
> 
> 赞同：2
> 
> 时间：2012-06-12T11:02:21.037
> 
> 标签：linux, bash, environment-variables, redhat

如何`$PATH`为我的 Linux 系统上的每个正在运行的进程找到变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T11:06:47.940

您可以在`/proc/*/environ`. 这是包含每个进程的环境的伪文件。如果您真的想获取所有内容，则必须以 root 身份进行。

`environ`文件的内容是`NUL`分开的环境条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:06:19.647

尝试读取和解析 /proc/$pid/environ 文件的内容 您应该能够枚举 /proc/ 中的所有 PID 目录并从中提取 PATH 变量。

# firefox - 带有 Java 代码的 WebDriver 不会打开 Firefox，并且在 Windows XP 中什么也不做

> ID：10995352
> 
> 赞同：4
> 
> 时间：2012-06-12T11:02:28.617
> 
> 标签：firefox, selenium, windows-xp, selenium-webdriver, browser-automation

我正在尝试在 Firefox 中使用 Java 运行 Selenium2（称为 WebDriver）。它甚至不会打开 Firefox 并在控制台中抛出任何错误。它保持空闲状态，什么也不做..

我正在使用 FF 13 beta Selenium WebDriver 2.23.1（最新）Win XP

我还尝试了降级 FF 版本（更改为 9），它没有用，将 WebDriver 从 2.22 更新到最新（2.23.1），它没有用

当我在 InternetExplorer(8) 中运行此代码时，它将打开浏览器但不会识别任何元素并且测试失败..

我的代码：

```
public class Selenium2Example {
    public static void main(String[] args) {
        WebDriver driver = new FirefoxDriver();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T01:13:18.973

我有同样的错误。Windows + FF 14.0 和

```
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-java</artifactId>
    <version>2.21.0</version>
</dependency> 
```

我已经调试了代码，并检查了线程是否卡在方法内部的类 FirefoxBinary 上

```
public void clean(FirefoxProfile profile, File profileDir) 抛出 IOException

```

profile.isRunning(profileDir) 总是返回 true ......这就是为什么什么都没有发生......

```
 if (Platform.getCurrent().is(Platform.WINDOWS)) {
          while (profile.isRunning(profileDir)) {
            sleep(500);
          }

          do {
            sleep(500);
          } while (profile.isRunning(profileDir));
        } 

```

然后我更新到 2.25 并且它工作了！

```
<dependency>
<groupId>org.seleniumhq.selenium</groupId>]
<artifactId>selenium-java</artifactId>
<version>2.25.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:06:32.767

虽然这是一篇旧帖子，但如果有人正在寻找答案，这在类似情况下帮助了我：

```
FirefoxProfile profile = new FirefoxProfile();
FirefoxBinary binary = new FirefoxBinary(@"path\to\firefox.exe");
FirefoxDriver driver = new FirefoxDriver(binary,profile); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T11:21:37.653

要打开 firefox，您必须使用 selenium firefox 驱动程序。

请参阅此链接上的这个简单示例 - [5 分钟入门指南](http://code.google.com/p/selenium/wiki/GettingStarted)

让我知道在您初始化 firefox 驱动程序后是否打开了 firefox 浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-29T18:14:44.193

您可以使用以下代码来解决此问题：-

```
 System.setProperty("webdriver.firefox.bin", "C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe");
    FiewfoxDriver fdr = new FirefoxDriver(); 
```

# jquery - 获取屏幕窗口的宽度和高度以及div jquery的高度

> ID：10995356
> 
> 赞同：0
> 
> 时间：2012-06-12T11:02:50.210
> 
> 标签：jquery, html, browser, append, browser-width

用简单的英语来说，这是我所追求的 jQuery 功能：

我需要获取浏览器窗口的宽度和高度，然后获取`.banner`div 的高度（高度是自动的）。如果`.banner`div 的高度高于浏览器窗口的高度，则将`.title`div 和`.social`div 附加到 body 中，否则在 div 中显示`.title`div 和 .social `.banner`div。

然后我如何相应地设置两个 div 的样式（`.title`和`.social`）？

**编辑：** 这是我在 HTML 中的页面加载代码：

```
<div class="banner">
   <div class="title">
      <!--to be positioned 40px from the left-->
   </div>
   <div class="social">
      <!--to be positioned 40px from the right-->
   </div>

   <img src="URL"/> <!-- Image determines height of DIV uses max-width -->

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:18:19.263

您可以执行以下操作：

```
var windowHeight = $(window).height(); //Gives you the browser viewport height
var bannerHeight = $(".banner").height();

if (bannerHeight > windowHeight) {
    $("body").append($('.title'));
    $("body").append($('.social'));

    //Then you can style them using jQuery .css
    //Example
    $('.title').css('color', 'red');
}
else {
    //Display .title and .social in your .banner div
} 
```

*   jQuery .height 信息：[http ://api.jquery.com/height/](http://api.jquery.com/height/)
*   jQuery .css 信息：[http ://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:34:32.267

动态更新元素：

```
$(function(){
    var divheight = $('.banner').height(); // div current height

    // handle the resize event
    $(window).resize(function(){
        if($(this).height() < divheight) {
            $('.title').appendTo($('body'));
            $('.social').appendTo($('body'));
            $('.banner').hide();
        } else {
            $('.title').appendTo($('.banner'));
            $('.social').appendTo($('.banner'));
            $('.banner').show();
        }
    });
}); 
```

*为了更好的可读性，故意不简化代码*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:07:59.897

使用这些功能：

```
$(window).height();
$(window).width();
$('.banner').width();
$('.banner').height();
$("#tostyle").addClass('someclass'); 
```

ETC

# c# - WPF 连接到 SQL Server Compact 数据库

> ID：10995363
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:03:23.317
> 
> 标签：c#, wpf, sql-server-ce

基本上我要做的是运行一个小型 WPF 程序，用户将在其中选择一个 SQL Server Compact 数据库，我的程序将向他们显示来自特定表的特定信息。

我遇到问题的地方是连接字符串，我希望用户能够浏览到保存其数据库的位置，而不是让他们将它放在一个位置（如果有意义的话）

如果我将数据库放在一个具有特定名称的位置，我可以让我的程序工作，但是用户想要检查其信息的数据库都将具有不同的名称，但都将具有相同的文件扩展名

例如我现在的代码是这样的：

```
string Myfile = @"C:\Users\documents\visual studio 2010\debug\FILE.sdf";
SqlCeConnection localDatabaseConn = new SqlCeConnection("data base = " + Myfile +"; 
```

当我将文件保存到具有特定名称的特定位置时，我可以获得所需的结果，但我希望用户能够浏览到他们自己的文件，该文件将具有不同的名称，并且可能位于他们机器上的任何位置.

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:07:51.727

所以，基本上你似乎想要一个[OpenFileDialog](http://msdn.microsoft.com/en-us/library/microsoft.win32.openfiledialog.aspx)。

例子：

```
Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
dlg.DefaultExt = ".sdf";
dlg.Filter = "Database file (.sdf)|*.sdf";

Nullable<bool> result = dlg.ShowDialog();

if (result == true)
{
    string Myfile = dlg.FileName;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:08:08.253

WPF 有一些内置的文件对话框。您正在寻找的可能是[`Microsoft.Win32.OpenFileDialog`](http://msdn.microsoft.com/en-us/library/microsoft.win32.openfiledialog.aspx)

用法：

```
var dlg = new Microsoft.Win32.OpenFileDialog();

if (dlg.ShowDialog();)
{
    string filename = dlg.FileName;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T11:13:21.447

您必须使用[OpenFileDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)。并且您的连接字符串必须是 "Data Source="+YouPath 而不是 "Data Base"+YourPath

# php - 如何合并两个图像并保存在php中？

> ID：10995365
> 
> 赞同：0
> 
> 时间：2012-06-12T11:03:32.223
> 
> 标签：php, merge

我正在用 php 创建一个应用程序，我在其中上传图像并调整其大小并将其放置在咖啡杯上。咖啡杯是 div 的背景图像。现在我想将这两个图像保存为一个图像，它看起来像一个咖啡杯的屏幕截图，上面印有图像。如何仅截取杯子和图像的屏幕截图，或者是否有另一种方法可以在 php.ini 中截取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:11:19.830

为此，您需要一个图像库。许多服务器上的大多数 PHP 版本都使用[GD](http://php.net/manual/en/book.image.php)进行了预编译。这是一个有限且性能不太好的库，因此大多数人会使用[Imagemagick](http://uk.php.net/manual/en/book.imagick.php)。

**在 GD 中：**

```
$mug = imagecreatefrompng('mug.jpg');
$overlay = imagecreatefromjpeg('photo.png');

imagecopy($mug, $overlay); 
```

**在 Imagemagick 中：**

```
$mug = new Imagick("mug.jpg");
$overlay = new Imagick("logo.png");
$composition = new Imagick();

$composition->compositeImage($mug);
$composition->compositeImage($overlay); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:12:26.613

您可以使用 GD2 库来做到这一点：

```
<?php

  $image = imagecreatefromstring(file_get_contents($image_path);
  $coffe_mug= imagecreatefromstring(file_get_contents($coffe_mug_path));

  // merge the two
  imagecopymerge($image, $coffe_mug, 10, 10, 0, 0, 100, 47, 75);

  // save, can also be imagepng, imagegif, etc, etc
  imagejpeg($image, '/path/to/save/image.png');

  ?> 
```

您也可以将图像输出到浏览器，更多信息请查看： http: [//php.net/manual/es/function.imagecopymerge.php](http://php.net/manual/es/function.imagecopymerge.php)。

# java - Memcache 或持久数据存储 [GAEJ]

> ID：10995366
> 
> 赞同：2
> 
> 时间：2012-06-12T11:03:35.170
> 
> 标签：java, google-app-engine, database-design

我想存储一个名称-值对集合，该集合将在平均持续 30 分钟的用户 Web 会话中持续存在。会议结束后，这些数据对我来说毫无意义。

我有两个选择；Memcache 和 GAE 数据存储。对我来说唯一重要的是检索速度。

你能建议我去哪一个吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:12:50.313

GAE中实际上有一个[会话支持](https://developers.google.com/appengine/docs/java/config/appconfig#Enabling_Sessions)，可以为您提供所需的内容：

1.  GAE 会话与用户会话相关联，即它们通过用户浏览器中的 cookie 处理会话。

2.  保存到会话的数据同时保存到内存缓存和数据存储中，因此它既快速又真正持久。

您可以通过以下方式简单地将数据保存到会话：

```
request.getSession(boolean create).setAttribute(key, object) 
```

请注意，对象[必须实现`Serializable`](https://stackoverflow.com/questions/790705/java-lang-illegalargumentexception-setattribute-non-serializable-attribute)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:07:29.157

如果检索速度对您来说*真的*是唯一重要的事情，请使用内存缓存。如果不丢失数据也很重要，请使用数据存储。

# matlab - 如何在matlab中随机分配概率以生成测试数据？

> ID：10995372
> 
> 赞同：1
> 
> 时间：2012-06-12T11:03:59.350
> 
> 标签：matlab, random, probability

如何在matlab中的n个值上随机分布概率？如果我有 128 个向量。我想为所有这些分配一个随机概率，使得它们的总和等于 1。

例如 n=4 p1=0.37 p2=0.21 p3=0 p4=0.42

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:21:48.730

根据您需要的随机性，[罗杰斯塔福德采取更严格的方法](http://www.mathworks.com/matlabcentral/fileexchange/9700-random-vectors-with-fixed-sum/content/randfixedsum.m)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:18:07.247

您可以将向量除以其元素的总和。例如，对于长度为 4 的向量，您可以执行以下操作：

```
>> v = rand(4, 1);
>> v = v/sum(v)

v = 
    0.2951
    0.3281
    0.0460
    0.3308

>> sum(v)

ans = 

    1.0000 
```

请注意，我假设您想要均匀分布的数字，因为您没有在问题中说明您想要的分布。

# html - html5画布中的滚动/滑动背景

> ID：10995374
> 
> 赞同：5
> 
> 时间：2012-06-12T11:04:09.267
> 
> 标签：html, canvas, background

我正在构建一个画布游戏。在这个我想在一个循环中滑动背景图像。我不知道如何使用 javascript 来做到这一点。我将使用单个图像，该图像将连续滑入背景。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T12:46:32.047

有几种方法可以实现这一点，第一种方法会影响性能`putImageData`，第二种方法只是使用`drawImage`。另请注意，第二种方法具有使其从左到右或从右到左的代码。

[http://www.somethinghitme.com/projects/bgscroll/](http://www.somethinghitme.com/projects/bgscroll/)

```
var ctx = document.getElementById("canvas").getContext("2d"),
    canvasTemp = document.createElement("canvas"),
    scrollImg = new Image(),
    tempContext = canvasTemp.getContext("2d"),
    imgWidth = 0,
    imgHeight =0,
    imageData = {},
    canvasWidth = 600,
    canvasHeight = 240,
    scrollVal = 0,
    speed =2;

    scrollImg.src = "citybg.png";
    scrollImg.onload = loadImage;

    function loadImage(){
        imgWidth = scrollImg.width,
        imgHeight = scrollImg.height;
        canvasTemp.width = imgWidth;
        canvasTemp.height =  imgHeight;    
        tempContext.drawImage(scrollImg, 0,0, imgWidth, imgHeight); 
        imageData = tempContext.getImageData(0,0,imgWidth,imgHeight);
        render();                
    }

    function render(){
        ctx.clearRect(0,0,canvasWidth,canvasHeight);

        if(scrollVal >= canvasWidth-speed){
            scrollVal = 0;
        }

        scrollVal+=speed;

        // This is the bread and butter, you have to make sure the imagedata isnt larger than the canvas your putting image data to.
        imageData = tempContext.getImageData(canvasWidth-scrollVal,0,scrollVal,canvasHeight);
        ctx.putImageData(imageData, 0,0,0,0,scrollVal, imgHeight);
        imageData = tempContext.getImageData(0,0,canvasWidth-scrollVal,canvasHeight);
        ctx.putImageData(imageData, scrollVal,0,0,0,canvasWidth-scrollVal, imgHeight);

        setTimeout(function(){render();},10);
    } 
```

**第二种方法**使用与上面相同的代码，只需将这两个函数更改为以下内容。

[http://www.somethinghitme.com/projects/bgscroll/scrolldrawimage.html](http://www.somethinghitme.com/projects/bgscroll/scrolldrawimage.html)

```
function loadImage(){
    imgWidth = scrollImg.width,
    imgHeight = scrollImg.height;
    canvasTemp.width = imgWidth;
    canvasTemp.height =  imgHeight;    
    render();                
}

function render(){
    ctx.clearRect(0,0,canvasWidth,canvasHeight);

    if(scrollVal >= canvasWidth){
        scrollVal = 0;
    }

    scrollVal+=speed;                   
    ctx.drawImage(scrollImg,canvasWidth-scrollVal,0,scrollVal,imgHeight, 0, 0, scrollVal,imgHeight);
    ctx.drawImage(scrollImg,scrollVal,0,imgWidth, imgHeight);

     // To go the other way instead
     ctx.drawImage(scrollImg,-scrollVal,0,imgWidth, imgHeight);
     ctx.drawImage(scrollImg,canvasWidth-scrollVal,0,imgWidth, imgHeight);

    setTimeout(function(){render();},10);
} 
```

# java - HttpURLConnection 下载的文件名

> ID：10995378
> 
> 赞同：14
> 
> 时间：2012-06-12T11:04:34.207
> 
> 标签：java, http, inputstream, httpurlconnection

是否可以获取使用 HttpURLConnection 下载的文件的名称？

```
URL url = new URL("http://somesite/getFile?id=12345");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setRequestMethod("GET");
conn.setAllowUserInteraction(false);
conn.setDoInput(true);
conn.setDoOutput(true);
conn.connect();
InputStream is = conn.getInputStream(); 
```

在上面的示例中，我无法从 URL 中提取文件名，但服务器会以某种方式向我发送文件名。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T11:12:49.223

您可以使用[HttpURLConnection.getHeaderField(String name)](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#getHeaderField%28java.lang.String%29)来获取`Content-Disposition`标题，该标题通常用于设置文件名：

```
String raw = conn.getHeaderField("Content-Disposition");
// raw = "attachment; filename=abc.jpg"
if(raw != null && raw.indexOf("=") != -1) {
    String fileName = raw.split("=")[1]; //getting value after '='
} else {
    // fall back to random generated file name?
} 
```

正如其他答案指出的那样，服务器可能会返回无效的文件名，但您可以尝试一下。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T11:08:14.213

坦率的回答是 - 除非 Web 服务器在 Content-Disposition 标头中返回文件名，否则没有真正的文件名。也许您可以将其设置为 URI 在 / 之后和查询字符串之前的最后一部分。

```
Map m =conn.getHeaderFields();
if(m.get("Content-Disposition")!= null) {
 //do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:20:22.383

检查`Content-Disposition`响应中的 : 附件标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-30T11:19:30.200

```
Map map = connection.getHeaderFields ();
            if ( map.get ( "Content-Disposition" ) != null )
            {
                String raw = map.get ( "Content-Disposition" ).toString ();
                // raw = "attachment; filename=abc.jpg"
                if ( raw != null && raw.indexOf ( "=" ) != -1 )
                {
                    fileName = raw.split ( "=" )[1]; // getting value after '='
                    fileName = fileName.replaceAll ( "\"", "" ).replaceAll ( "]", "" );
                }
            } 
```

# excel - 使用 ado.net 更新错误的 Excel 单元格

> ID：10995391
> 
> 赞同：0
> 
> 时间：2012-06-12T11:05:34.243
> 
> 标签：excel, ado.net

我正在使用 Microsoft.ACE.OLEDB.12.0 库更新 excel 单元格。

这是我的更新声明

```
"UPDATE [" + sheetName + "D5:D5"] SET F1 = 201"; 
```

但在 excel CELL D1 中已更新。我不明白为什么更新 Cell D1 而不是 Cell D5。

我的连接字符串是

```
public static string path = @"C:\src\RedirectApplication\RedirectApplication\301s.xlsx";
public static string connStr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + path + ";Extended Properties=Excel 12.0;"; 
```

我正在使用 .Net Framework 1.1

视窗：视窗 XP

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:33:38.573

在工作表名称的末尾加上“$”。

# c# - FastMember 的 ISO-1 C# 语言规范错误

> ID：10995393
> 
> 赞同：1
> 
> 时间：2012-06-12T11:05:41.220
> 
> 标签：c#, .net, fastmember

我在 VS 2010 中 从[http://code.google.com/p/fast-member/source/checkout](http://code.google.com/p/fast-member/source/checkout)加载了 .net 3.5 FastMember 。

编译器生成此错误：

***不能使用功能“静态类”，因为它不是 ISO-1 C# 语言规范的一部分。***

我们如何度过这个难关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:17:14.133

ISO-1 是 C# 1.2；FastMember 并不是专门为处理这个问题而设计的。它还利用了泛型，直到 ISO-2 才存在。可能有可能摆脱所有这些，但我并不讨厌这种好处。需要 C# 1.2 的东西的数量……非常少。

你能澄清一下这里的背景吗？

如果您不是故意将自己限制为 C# 1.2，那么转到项目属性、高级...并更改语言版本 - “默认”很好（尽管它确实构建在 ISO-2 aka C# 2.0 中，如果你真的想要):

![在此处输入图像描述](../Images/e7fd38263171d3529d1ea09bf841b88c.png)

# clojure - clojure 中的递归

> ID：10995396
> 
> 赞同：2
> 
> 时间：2012-06-12T11:05:50.577
> 
> 标签：clojure

我正在尝试使这个示例程序工作

```
(defn foo
  ([x] (foo x []))
  ([x current]
     (when (> x 0)
       (recur (dec x) (conj current x))))) 
```

当我调用这个函数 (foo 5) 时，我应该得到 [1 2 3 4 5]，但它只返回 nil。我究竟做错了什么？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T11:16:54.040

您的递归没有返回表达式，即当 then`when`为 false 时递归终止并返回 nil。您可以使用以下方式解决此问题`if`：

```
(defn foo
  ([x] (foo x []))
  ([x current]
     (if (> x 0)
       (recur (dec x) (conj current x))
       current))) 
```

当您使用向量作为返回值时，这将返回`[5 4 3 2 1]`，并且在向量上将项目附加到向量的末尾。您可以反转向量或使用列表，即代替使用`(foo 5)``conj``(foo x [])``(foo x '())`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:26:25.823

下面的代码有效。我没有返回最终值。

```
(defn foo
  ([x] (foo x []))
  ([x current]
     (if (> x 0)
       (recur (dec x) (conj current x))
       current))) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T11:17:45.503

我已经更正了您使用的原始程序，`(if (= x 0)`而不是`(when (> x 0)`，这将返回`[1 2 3 4 5]`。

```
(defn foo
  ([x] (foo x []))
  ([x current]
     (if (= x 0)
       (apply vector (sort < current))
       (recur (dec x) (conj current x))))) 
```

# web-services - 带有引用 XSD 类型的部分的 WSDL 文档文字

> ID：10995399
> 
> 赞同：1
> 
> 时间：2012-06-12T11:06:00.160
> 
> 标签：web-services, soap, wsdl

我一直在阅读[WSDL 1.1](http://www.w3.org/TR/wsdl)规范，有一件事情让我觉得很奇怪 - 是什么（除了 WS-I Basic Profile 之外）阻止我这样做：

```
<message name="helloRequest">
    <part name="arg1" type="xs:string" />
</message>
<message name="helloResponse">
    <part name="result" type="xs:string" />
</message>

<portType name="Port02">
    <operation name="hello">
        <input message="tns:helloRequest" name="helloRequest" />
        <output message="tns:helloResponse" name="helloResponse" />
    </operation>
</portType>

<binding name="Port02SoapBinding" type="tns:Port02">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="hello">
        <input name="helloRequest">
            <soap:body use="literal" />
        </input>
        <output name="helloResponse">
            <soap:body use="literal" />
        </output>
    </operation>
</binding> 
```

它是文档/文字 Web 服务，但输入/输出消息包含引用 XSD（简单）类型的部分，而不是全局元素。

WSDL 片段并不那么可怕 - Axis1 和 CXF 都生成具有从部件名称派生的名称的肥皂体元素，但是[WSDL 1.1、3.5:soap:body](http://www.w3.org/TR/wsdl#_soap%3abody)说：

> 如果 use 是字面量，则每个部分都使用元素或类型属性引用具体的模式定义。在第一种情况下，[...]。在第二种情况下，部件引用的类型成为封闭元素的模式类型（**文档样式的 Body**或 rpc 样式的部件访问器元素）。

这是否意味着生成的 SOAP 消息（根据 WSDL 规范）看起来像这样（SOAP 正文中的文本内容）？

```
<SOAP-ENV:Envelope
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance"
    xmlns:xs="http://www.w3.org/1999/XMLSchema">
    <SOAP-ENV:Body xsi:type="xs:string">value</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:03:31.430

那是极端情况——实际上所有的java（axis1、axis2、cxf、jaxrpc-ri）实现我已经检查了wrap String（或任何简单）类型，其元素以部件名称命名，没有命名空间。

轴1：

```
private static void _initOperationDesc1(){
    org.apache.axis.description.OperationDesc oper;
    org.apache.axis.description.ParameterDesc param;
    oper = new org.apache.axis.description.OperationDesc();
    oper.setName("hello");
    param = new org.apache.axis.description.ParameterDesc(new javax.xml.namespace.QName("", "arg1"), org.apache.axis.description.ParameterDesc.IN, new javax.xml.namespace.QName("http://www.w3.org/2001/XMLSchema", "string"), java.lang.String.class, false, false);
    oper.addParameter(param);
    oper.setReturnType(new javax.xml.namespace.QName("http://www.w3.org/2001/XMLSchema", "string"));
    oper.setReturnClass(java.lang.String.class);
    oper.setReturnQName(new javax.xml.namespace.QName("", "result"));
    oper.setStyle(org.apache.axis.constants.Style.DOCUMENT);
    oper.setUse(org.apache.axis.constants.Use.LITERAL);
    _operations[0] = oper;
} 
```

JAXRPC-RI：

```
SOAPBlockInfo _bodyBlock = new SOAPBlockInfo(ns1_hello_arg1_QNAME);
_bodyBlock.setValue(arg1);
_bodyBlock.setSerializer(ns2_myns2_string__java_lang_String_String_Serializer);
_request.setBody(_bodyBlock);
...
private static final javax.xml.namespace.QName ns1_hello_arg1_QNAME = new QName("", "arg1"); 
```

所以你应该得到：

```
<SOAP-ENV:Envelope
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance"
    xmlns:xs="http://www.w3.org/1999/XMLSchema">
    <SOAP-ENV:Body>
       <arg1>value</arg1>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

EDIT: Also in WSDL 2.0 there are no *messages* and operation inputs and outputs must refer to elements (or #any or #none or #other).

# php - Google 日历 API V3 更新事件

> ID：10995405
> 
> 赞同：1
> 
> 时间：2012-06-12T11:06:16.917
> 
> 标签：php, google-api, google-calendar-api

如[https://developers.google.com/google-apps/calendar/recurringevents](https://developers.google.com/google-apps/calendar/recurringevents)中所述，我可以使用 Google Calendar API V3 完美添加事件，但我不知道如何开始更新事件过程。

我想我必须选择事件（我的数据库中确实存储了事件 ID），然后设置参数并调用更新事件。但是不知道从哪里开始...

周围的教程似乎很少。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:13:24.870

好的，我终于得到了自己的答案。努力阅读那些 Google API Explorer 并将它们与 google-api-php-client 进行匹配。无论如何，这里有一个简单的代码来更新描述、摘要和事件颜色。

```
$apiClient = new apiClient();
$apiClient->setUseObjects(true);
$service   = new apiCalendarService($apiClient);
$events    = $service->events;

$currEvent  = $events->get("primary", $event_id);

$currEvent->setDescription("YOUR FULL DESCRIPTION");
$currEvent->setSummary("YOUR DESIRED SUMMARY - Kind of title");
$currEvent->setColorId(2); // One of the available colors ID

$recurringEvent = $events->update('primary', $event_id, $currEvent); 
```

请记住，此代码仅需要在身份验证后运行。希望它可以帮助某人。它做到了我;）

# javascript - 骨干js：无法调用未定义的方法“绑定”

> ID：10995413
> 
> 赞同：1
> 
> 时间：2012-06-12T11:06:48.317
> 
> 标签：javascript, jquery, backbone.js

我目前正在通过截屏教程学习backbone.js，在此过程中，我的代码似乎停止工作，`Cannot call method 'bind' of undefined`在Chrome的javascript控制台中抛出错误。错误的行包含在`initialize`函数中：

```
window.PlaylistView = Backbone.View.extend({
    tag: 'section',
    className: 'playlist',

    initialize: function() {
        _.bindAll(this, 'render');
        this.template = _.template($('#playlist-template').html());
        this.collection.bind('reset', this.render);  //<<<<<< THIS LINE

        this.player = this.options.player;
        this.library = this.options.library;
    },

    render: function() {
        $(this.el).html(this.template(this.player.toJSON()));

        this.$('button.play').toggle(this.player.isStopped());
        this.$('button.pause').toggle(this.player.isPlaying());

        return this;
    }
}); 
```

我不知道是什么`this.collection`意思，为什么视图有一个集合，而不是模型的集合？`this.collection.bind()`在其他视图中使用似乎没有引发任何错误。在`window.LibraryAlbumView`which calls`this.collection.trigger('select', this.model);`和 extends`window.AlbumView`中，我没有看到在任何地方定义的任何集合`window.AlbumView`，但没有引发错误。这似乎让我感到困惑。

[JSFIDDLE](http://jsfiddle.net/UXM9s/)

**编辑：**

该错误已得到修复，因为而不是

```
window.Player = Backbone.Model.extend({
        defaults: {
            'currentAlbumIndex': 0,
            'currentTrackIndex': 0,
            'state': 'stop'
        },

        initialize: function() {
            this.playlist = new Playlist();
        }, 
```

我有

```
window.Player = Backbone.Model.extend({
        defaults: {
            'currentAlbumIndex': 0,
            'currentTrackIndex': 0,
            'state': 'stop'
        },

        initialize: function() {
            playlist = new Playlist();    // <<< this line changed!
        }, 
```

之前也`this.collection`提到了这里的集合，

```
window.BackboneTunes = Backbone.Router.extend({
    routes: {
        '': 'home',
        'blank': 'blank'
    },

    initialize: function() {
        this.playlistView = new PlaylistView({
            collection: window.player.playlist,  // <<<< THIS ONE!
            player: window.player,
            library: window.library
        });

        this.libraryView = new LibraryView({
            collection: window.library
        });
    }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:16:58.657

主干视图包含一个集合或模型，因为视图旨在呈现模型或模型集合中包含的数据。

此示例引发错误，因为 this.collection 尚未定义。为此，您需要初始化一些集合，然后将其传递给您的视图。

`new PlayListView({collection: someCollection});`

# gradle - 无法使用 logback.groovy，但 logback.xml 有效

> ID：10995414
> 
> 赞同：13
> 
> 时间：2012-06-12T11:06:53.000
> 
> 标签：gradle, logback, consoleappender

我想使用 Groovy DSL 配置 Logback。该文件非常简单：

```
import ch.qos.logback.classic.encoder.PatternLayoutEncoder
import ch.qos.logback.core.ConsoleAppender
import static ch.qos.logback.classic.Level.DEBUG
import static ch.qos.logback.classic.Level.INFO

appender("stdout", ConsoleAppender) {
    encoder(PatternLayoutEncoder) {
        pattern = "%d %p [%c] - <%m>%n"
    }
}

root(INFO, ["stdout"]) 
```

我使用 Gradle 构建我的应用程序并使用 jettyRun 运行它。我收到以下错误：

```
Failed to instantiate [ch.qos.logback.classic.LoggerContext]
Reported exception:
org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'ch.qos.logback.core.ConsoleAppender[null]' with class 'ch.qos.logback.core.ConsoleAppender' to class 'ch.qos.logback.core.Appender'
    at  org.codehaus.groovy.runtime.typehandling.DefaultTypeTransformation.castToType(DefaultTypeTransformation.java:360)
at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.castToType(ScriptBytecodeAdapter.java:599)
at ch.qos.logback.classic.gaffer.ConfigurationDelegate.appender(ConfigurationDelegate.groovy:119)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
at org.codehaus.groovy.runtime.metaclass.MixinInstanceMetaMethod.invoke(MixinInstanceMetaMethod.java:53)
at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoMetaMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:308)
at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:149) 
```

但是，当我切换到等效的 XML 配置时，一切正常。我究竟做错了什么？

使用 Logback 1.0.0。尝试使用 Logback 1.0.3。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T12:51:42.440

我想出了解决方案，但仍有一些问题悬而未决。问题是我在类路径上没有合适的 Groovy。我决定制作一个示例项目来演示这个错误。我从使用 Gradle 的“应用程序”插件的控制台应用程序开始。我没有将 Groovy 作为依赖项。

```
apply plugin: 'application'

repositories {
    mavenCentral()
}

ext.logbackVersion = '1.0.3'
ext.slf4jVersion = '1.6.4'

dependencies {
    compile "ch.qos.logback:logback-classic:$ext.logbackVersion"
    compile "org.slf4j:jcl-over-slf4j:$ext.slf4jVersion"
    //runtime "org.codehaus.groovy:groovy:1.8.6" // the problem was here
}

mainClassName = "org.test.Main" 
```

这给了我一个错误，这是非常直截了当的。

```
|-ERROR in ch.qos.logback.classic.LoggerContext[default] - Groovy classes are not available on the class path. ABORTING INITIALIZATION. 
```

嗯不错。缺少依赖项 - 易于修复。但是为什么我在运行 Web 应用程序时没有收到同样的错误？添加 Groovy 依赖项解决了 Web 应用程序中的初始问题。我剥离了我的项目并将创建一个相应的 JIRA。也许，Groovy 在类路径检测上并不完全正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:04:52.957

The GroovyCastException "cannot cast ConsoleAppender as Appender" has all the bearings of a class loader issue. Which version of groovy is this? Could you open a [bug report](http://jira.qos.ch) including a test case for reproducing this issuew?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-03T18:36:49.977

同事。

我今天遇到了几乎同样的麻烦：

*   当我使用`logback.xml`一切正常
*   当我`logback.groovy`在 IntelliJ IDEA 中使用时，一切都可以正常工作
*   `logback.groovy`当我从命令行启动脚本时使用时，我遇到了很多错误，例如

：

```
D:\Projects\PRDMonitoring\sources>groovy tray.groovy PRD
Failed to instantiate [ch.qos.logback.classic.LoggerContext]
Reported exception:
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Script1.groovy: 2: unable to resolve class ch.qos.logback.classic.filter.LevelFilter
@ line 2, column 1.
   import ch.qos.logback.classic.filter.LevelFilter
   ^
Script1.groovy: -1: unable to resolve class ch.qos.logback.classic.encoder.PatternLayoutEncoder
 @ line -1, column -1.
Script1.groovy: 3: unable to resolve class ch.qos.logback.core.ConsoleAppender
 @ line 3, column 1.
   import ch.qos.logback.core.ConsoleAppender
   ^
Script1.groovy: -1: unable to resolve class ch.qos.logback.classic.Level
 @ line -1, column -1.
Script1.groovy: 6: unable to resolve class ch.qos.logback.core.spi.FilterReply
 @ line 6, column 1.
   import static ch.qos.logback.core.spi.FilterReply.ACCEPT
   ^
Script1.groovy: 7: unable to resolve class ch.qos.logback.core.spi.FilterReply
 @ line 7, column 1.
   import static ch.qos.logback.core.spi.FilterReply.DENY 
```

但是几分钟后找到一个解决方案，我发现，注释**前** `@Grapes`的以下字符串解决了加载类的问题***@GrabConfig(systemClassLoader=true)***

```
@GrabConfig(systemClassLoader=true)
@Grapes([
    @Grab(group = 'org.codehaus.groovy.modules.http-builder', module = 'http-builder', version = '0.6'),
    @Grab(group = 'org.apache.commons', module='commons-lang3', version='3.0'),
    @Grab(group = 'commons-io', module = 'commons-io', version = '2.4'),
    @Grab(group = 'joda-time', module = 'joda-time', version = '2.9.4'),
    @Grab(group = 'ch.qos.logback', module = 'logback-classic', version = '1.1.7'),
    @Grab(group = 'ch.qos.logback', module = 'logback-core', version = '1.1.7')
]) 
```

# cgi - CGI 实施还是替代方案？

> ID：10995415
> 
> 赞同：1
> 
> 时间：2012-06-12T11:06:55.743
> 
> 标签：cgi

这个问题很基础；但我很困惑，所以如果你被激怒了，我很抱歉。我只知道 CGI 是一种标准/协议。

1> mod_(perl/python/ruby) 是 CGI 的实现还是替代方案？
2> 如果它是一种替代方案，那么从概念上讲，它是否类似于 Java Servlet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:12:24.847

mod_(perl/python/ruby) 是 CGI 的替代方案 - `mod_[somebinding]`apache 模块试图通过使用 Apache 的本机接口来避免 CGI 的性能损失。

`mod_[somebinding]/Apache`和之间的类比`Servlets/Java Application Server`是有效的，但我更喜欢类似的东西

```
Webserver -> mod_[somebinding] -> Library in somebinding

Webserver -> Java Application Server -> Servler 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:12:13.917

不，CGI 是一个接口标准，而 mod_* 是 Apache Http Server 的模块。例如，您可以在任何 Web 服务器下使用任何语言的 CGI（FastCGI 或 SCGI）。Ruby 世界中的替代方案是应用程序服务器，如 Unicorn，GitHub 的人使用它。

# ruby-on-rails-3 - PostgreSQL 查询在本地工作 (9.x)，但在 Heroku (8.x) 上出现语法错误

> ID：10995418
> 
> 赞同：0
> 
> 时间：2012-06-12T11:07:19.097
> 
> 标签：ruby-on-rails-3, postgresql, heroku

我开发了我的网站，它在我的本地机器上就像一个魅力。[该查询由该线程中](https://stackoverflow.com/questions/10985767/too-many-order-by-max-subqueries-for-my-intellect)的 Stackoverflow 成员提供。

[相关的 schema.rb 部分](https://gist.github.com/2916931)

本地数据与 Heroku 上的数据相同。

```
select  *
from    (
        select  *
        ,       row_number() over (partition by odds_type order by odds_index desc) as rn2
        from    (
                select  *
                ,       row_number() over (partition by event_id, bookmaker_id, odds_type 
                                           order by created_at desc) as rn1
                from    Odds
                where   event_id = #{e.id}
                ) sub1
        where   rn1 = 1
        ) sub2
where   rn2 = 1 
```

**控制台中的错误**

```
Odds Load (88.4ms)  select * from ( select *, row_number() over (partition by odds_type order by odds_index desc) as rn2 from (select *, row_number() over (partition by event_id, bookmaker_id, odds_type order by created_at desc) as rn1 from Odds where event_id = 21 ) sub1 where rn1 = 1 ) sub2where rn2 = 1
ActiveRecord::StatementInvalid: PG::Error: ERROR:  syntax error at or near "over"
LINE 1: select * from ( select *, row_number() over (partition by od...
                                           ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:45:49.257

**row_number()**和[窗口函数](http://www.postgresql.org/docs/8.4/static/tutorial-window.html)通常在 PostgreSQL 8.4 或更高版本中可用。该错误表明您正在旧版本（8.3？）上尝试此查询，因此它无法工作。

更新：在研究了 PG 9.x 的原始问题和答案之后，我相信您可以使用 PostgreSQL 特定的[DISTINCT ON](http://www.postgresql.org/docs/8.3/static/sql-select.html#SQL-DISTINCT)子句获得相同的结果，该子句非标准，但在旧版本的 PG 中可用，并且在您的情况下非常方便。这是我的建议：

```
SELECT DISTINCT on (ot) bi,ot,oi FROM
  (select distinct on (bi,ot) bi,ot,oi from odds
    where ei=1 order by bi,ot,created_at desc) subq
 ORDER BY ot,oi DESC; 
```

# sql - 我的结果表中的多个计数查询

> ID：10995420
> 
> 赞同：0
> 
> 时间：2012-06-12T11:07:28.590
> 
> 标签：sql, sql-server

我有一个表 mytable，其中有一个数字列 myint。

我希望获得高于 10、高于 8 但低于 10、高于 5 但低于 8 的行数，并将它们显示在结果表中：

```
above 10 | above 8 below 10 | above 5 below 8
27       | 17               | 300 
```

我可以使用`union all`. 我必须使用连接来使它们水平吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:13:09.393

```
SELECT 
    SUM (CASE WHEN myint > 10 THEN 1 ELSE 0 END) AS 'above 10',
    SUM (CASE WHEN myint BETWEEN 8 AND 9 THEN 1 ELSE 0 END) AS 'above 8 below 10',
    SUM (CASE WHEN myint BETWEEN 5 AND 7 THEN 1 ELSE 0 END) AS 'above 5 below 8'
FROM mytable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:19:13.393

尝试这个：

```
SELECT 
SUM(CASE WHEN myInt > 10 THEN 1 ELSE 0 END) AS '>10',
SUM(CASE WHEN myInt > 8 AND myInt < 10 THEN 1 ELSE 0 END) AS '(8-10)',
SUM(CASE WHEN myInt > 5 AND myInt < 8 THEN 1 ELSE 0 END) AS '(5-8)'
from    mytable 
```

*   请注意，您不会返回 where myInt = 8 因为它被排除在所有选择之外。

这可能是最快的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T11:15:44.807

如果要包括上限或下限，请更改`<`为`<=`或`>``>=`

```
select 
(select count(*) from myTable where myint > 10) as "above 10",
(select count(*) from myTable where myint > 8 and myint < 10) as "above 8 below 10",
(select count(*) from myTable where myint > 5 and myint <8) as "above 5 below 8"
from myTable 
```

# .net - 实体框架中的映射关系

> ID：10995421
> 
> 赞同：0
> 
> 时间：2012-06-12T11:07:28.653
> 
> 标签：.net, entity-framework

我正在使用实体框架，我有两个表，一个联系关系表和一个联系表。该关系是对一个联系人的许多联系人关系。

在下面的代码中，我试图获取联系人关系，然后获取相关的联系人，但是下面的代码始终为联系人返回 null。

```
 [Test]
    public void Mapping_ContactRelationshipsToContacts()
    {
        //Assign
        Guid id = new Guid("118a0d24-cf9d-e111-802d-005056b4000d");

        //Act            
        var result = _db.ContactRelationships.Where(x => x.Id == id).FirstOrDefault().Contact;

        //Assert
        Assert.IsNotNull(result); 
    } 
```

但是，如果我添加一条首先进入数据库并加载联系人的行，那么联系人关系将起作用：

```
 [Test]
    public void Mapping_ContactRelationshipsToContacts()
    {
        //Assign
        Guid id = new Guid("118a0d24-cf9d-e111-802d-005056b4000d");

        //Act
        var notUsed = _db.Contacts.Where(x => x.Id ==  new Guid("B2A2AB8C-238E-E111-8BF0-005056B4000D")).FirstOrDefault();
        var result = _db.ContactRelationships.Where(x => x.Id == id).FirstOrDefault().Contact;

        //Assert
        Assert.IsNotNull(result);
    } 
```

请注意，我没有使用新变量，我所做的只是确保它在数据库中。有谁知道是什么导致了这种行为？我的关系映射是：

```
 modelBuilder.Entity<ContactRelationship>().HasOptional(x => x.Contact)
         .WithMany(o => o.ContactRelationships).HasForeignKey(x => x.ContactID); 
```

我检查过，ID 值是正确的，所有数据都存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:33:11.950

您必须使您的导航属性`virtual`启用延迟加载...

```
public class ContactRelationship
{
    //...
    public virtual Contact Contact { get; set; }
    //...
} 
```

...或者您必须使用以下方法急切加载导航属性`Include`：

```
var result = _db.ContactRelationships.Include(cr => cr.Contact)
    .Where(x => x.Id == id).FirstOrDefault().Contact; 
```

您的第二个代码片段有效，因为`Contact`它在从数据库加载后已经附加到上下文，并且因为 EF 在加载/附加的实体之间自动建立关系。在您的第一个代码片段中情况并非如此。

# ruby-on-rails - 如何配置设计以接受 HTTP 标头中的身份验证令牌？

> ID：10995425
> 
> 赞同：7
> 
> 时间：2012-06-12T11:07:49.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

目前，[devise](http://rubygems.org/gems/devise)配置为通过 URL 接受令牌身份验证，并且 curl 运行良好

```
curl 'http://localhost/index.json?auth_token=TOKENVALUE' 
```

现在我想通过 HTTP 标头而不是 URL 传递 TOKENVALUE，如何配置设计以从*HTTP*标头*或*URL 获取 TOKENVALUE？这样上面和下面的 curl 请求都可以工作：

```
curl 'http://localhost/index.json' -H 'Authorization: Token token="TOKENVALUE"' 
```

如[这个 railscast](http://railscasts.com/episodes/352-securing-an-api?view=asciicast)所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T19:45:27.130

首先将此添加到您的 gemfile [https://github.com/stvp/devise_header_token](https://github.com/stvp/devise_header_token)然后您可以在 config/initializers/devise.rb 中为其添加配置

```
# Configuration for :token_authenticatable
# Defines name of the authentication token params key
config.token_authentication_key = 'AUTH-TOKEN' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T04:06:34.633

自从提出这个问题以来，情况发生了变化，因为该设备不再具有内置的令牌身份验证功能。它被提取到一个单独的 gem，devise-token_authenticable。我正在使用那颗宝石，并想做与提出问题的人相同的事情。

我发现我必须在我的 config/initializers/devise.rb 中设置它：

`config.http_authenticatable = true`

我通过 curl 进行了尝试，并且成功了。在我的 RSpec 测试中，我能够将令牌放在 HTTP 标头中，如下所示：

```
user = FactoryGirl.create(:user)
header = ActionController::HttpAuthentication::Token.encode_credentials(
  user.authentication_token)
get "/api/v1/your_url", 
    { },
    { 
      'Accept' => 'application/json',
      'Authorization' => header
    } 
```

希望这可以帮助那里的人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T01:49:55.180

设计中似乎没有这样的配置。但是其他人有解决方案。请参阅[使用请求标头中的 auth_token 而不是使用 Rails 3 / devise 的 POST/PUT 参数](https://stackoverflow.com/questions/7399645)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-12T18:13:52.683

Devise 允许通过基本身份验证进行身份验证令牌身份验证。如果您查看[源代码](https://github.com/plataformatec/devise/blob/master/lib/devise/strategies/token_authenticatable.rb)，您会看到：

> 对于标头，您可以使用基本身份验证将令牌作为用户名和空白密码传递。由于某些客户端可能需要密码，您可以将“X”作为密码传递，它将被忽略。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-25T13:25:42.273

支持已添加到设计 2.2.4 [https://github.com/plataformatec/devise/blob/master/CHANGELOG.rdoc#224](https://github.com/plataformatec/devise/blob/master/CHANGELOG.rdoc#224)

# java - 并发竞争条件？

> ID：10995434
> 
> 赞同：4
> 
> 时间：2012-06-12T11:08:31.687
> 
> 标签：java, concurrency

此类扩展`Thread`，一旦创建，线程就会启动。这是代码：

```
class Controller extends Thread implements ConfigurationObserver{

    private int refreshMS;

    //...

    @Override
    public void notifyConfiguration(ConfigurationModel config) {
        refreshMS = config.getRefreshMs();
    }

    @Override
    public void run() {
        //...
        while (true) {

            try {
                Thread.sleep(refreshMS);
            } catch (InterruptedException ex) {
                //...
            }
        }
    }
} 
```

它遵循[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。这个类将订阅它自己，`ConfigurationController`每当任何配置参数发生变化时，都会通过`notifyConfiguration(...)`方法通知他。

让我对此有点不安全的是属性`refresMS`。配置通过 GUI (Thread #1) 更改，并影响从`Controller`该类的运行线程 (Thread #3) 读取的类 (Thread #2) 的属性。

**Q1：**这会成为比赛条件吗？
**Q2：**如果是这样，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:17:42.400

> Q1：这会成为比赛条件吗？

是的。有点。该`run()`方法最终可能会使用一个`refreshMS`过时的值。

> Q2：如果是这样，解决这个问题的最佳方法是什么？

这最小化了竞争条件：

```
class Controller extends Thread implements ConfigurationObserver{
    private int refreshMS;
    public synchronized void notifyConfiguration(ConfigurationModel config) {
        refreshMS = config.getRefreshMs();
    }

    public void run() {
        while (true) {
            ...
            synchronized (this) {
                rms = refreshMS;
            }
            Thread.sleep(rms);
            ....
        }
    }
} 
```

如果不在同步块*内*`sleep`进行调用，就无法完全消除竞争条件。（这会导致调用阻塞的线程可能无限长的时间。坏主意。）*`notifyConfiguration`*

 ** * *

现在，这一切都很好，但您还应该问自己，竞争条件是否可能对应用程序的执行产生有害影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:54:25.077

我所做的解决方案是 pingw33n 建议的解决方案。使用关键字`volatile`.

```
class Controller extends Thread implements ConfigurationObserver{

    private volatile int refreshMS;
    //...
 } 
```

引自[Brian Goetz 的管理波动性](http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html)

> 易失性变量具有同步的可见性特征，但没有原子性特征。这意味着线程将自动查看 volatile 变量的最新值。

这意味着`volatile`可以`synchronized`在极少数情况下使用它来代替。但幸运的是，这是其中之一，因为`int`它是以原子方式编写的（没有线程可以读取它的值，而其他线程正在修改它）。

因此，正如 Stephen C 所说，这并没有消除竞争条件，它只会让它真的很少发生。在我的情况下，如果`refresMS`正在运行的线程用旧值读取它并不是什么大问题（如果它几乎不会发生）。*

# asp.net-mvc - 为什么需要解析？

> ID：10995435
> 
> 赞同：0
> 
> 时间：2012-06-12T11:08:36.163
> 
> 标签：asp.net-mvc, parsing, razor, html-helper

我对 Html helper 中的解析有疑问：

我有这样的：

```
@foreach (var item in ViewBag.News)
{
    @Html.ActionLink(item.gdt_title, "News", "News", new { lang = ViewBag.Lang, page = ViewBag.CurrentPage, id = item.gdt_id }, null)
} 
```

所以我有一个错误：

`'System.Web.Mvc.HtmlHelper<dynamic>' has no applicable method named 'ActionLink' but appears to have an extension method by that name. Extension methods cannot be dynamically dispatched. Consider casting the dynamic arguments or calling the extension method without the extension method syntax.`

我通过手动将第一个参数解析为字符串来解决它：

```
@foreach (var item in ViewBag.News)
{
    @Html.ActionLink((String)item.gdt_title, "News", "News", new { lang = ViewBag.Lang, page = ViewBag.CurrentPage, id = item.gdt_id }, null)
} 
```

但我不知道为什么会这样。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:16:29.000

*使用 ViewBag/ViewData 是不好的做法。*

您正在使用动态模型，并且`item.gdt_title`是动态的。正如例外所说，

> 扩展方法不能动态调度

您应该使用强类型视图模型。像这样的东西

```
public class NewsViewModel
{
    public string Lang { get; set; }
    public int CurrentPage { get; set; }
    public List<NewsItem> News { get; set; }
}

public class NewsItem
{
     public string gdt_id { get; set; }
     public string gdt_title { get; set; }
} 
```

控制器

```
public ActionResult News()
{
     NewsViewModel news = new NewsViewModel();
     news.News = LoadNews();

     return View(news);
} 
```

看法

```
@model NewsViewModel

@foreach (var item in Model.News)
{
    @Html.ActionLink(item.gdt_title, "News", "News", new { lang = Model.Lang, page = Model.CurrentPage, id = item.gdt_id }, null)
} 
```

# eclipse - Eclipse：如何将本地历史导出到 Git 或 SVN 等真实的 SCM 系统

> ID：10995438
> 
> 赞同：3
> 
> 时间：2012-06-12T11:08:43.030
> 
> 标签：eclipse, git, export, history, local

我有一个**Eclipse**项目，它最初是一个小型、快速、肮脏的私人 hack。我没有费心使用像 Git 或 SVN 这样的真正的 SCM（源代码管理）系统，甚至在本地也没有。相反，我拥有的是几天的**Local History**，这是一个开箱即用的 Eclipse 功能。与往常一样，该项目不断发展壮大，我想**分享它，包括历史，**因为历史展示了许多重构步骤，这些步骤作为展示非常有用，可以教其他人有关重构、清洁代码等方面的知识。

我已经知道我可以逐个文件手动检索旧版本并将它们手动迁移到例如 Git 存储库，逐个提交更改并逐个文件提交更改。但我真正感兴趣的是：

*   我可以使用本地历史将整个项目（不仅仅是单个文件）重置到某个日期吗？
*   有没有办法导出本地项目历史的某些（或全部）快照，所以我可以通过快照将它们提交到 Git 快照？
*   是否有一个选项（或外部工具、脚本等）可以自动将项目的本地历史迁移到真正的 SCM 系统，如 Git（首选）或 SVN？如果该工具只是在以时间戳命名的子文件夹中创建了许多完整的项目快照，那也可以。

免责声明：是的，我知道我应该从一开始就使用 Git。设置本地存储库等只需要三分钟。但是……但是。你知道。;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:09:30.023

不幸的是，您所有问题的答案都是“否”。至少，使用标准的内置 Eclipse 功能；总有可能有人编写了满足您需求的插件，但在这种情况下，我会感到惊讶。检查 Eclipse Marketplace（在`Help`菜单下找到）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:45:16.823

我不认为有，但请记住，任务不应该太乏味。

为了安全起见，在开始之前复制您的项目，然后：

```
git init
(revert to snapshot 1)
git add .
git commit -m "First snapshot commit"
(revert to snapshot 2)
git add .
git commit -m "Second snapshot commit" 
```

洗涤，冲洗，重复。

如果您只有几十个快照，则不会花费超过一个小时左右的时间，这可能比找出程序化解决方案所需的时间要少得多。

# java - 富面孔：如何在 InputNumberSlider 工具提示的值旁边添加静态文本？

> ID：10995444
> 
> 赞同：1
> 
> 时间：2012-06-12T11:09:11.670
> 
> 标签：java, javascript, jsf-2, richfaces

我正在使用丰富的面孔 4 我正在使用输入数字滑块

```
 <rich:inputNumberSlider value="10" width="500" minValue="1" maxValue="30" step="1"   showInput="false"  enableManualInput="false" showArrows="false" tooltipClass=""  showTooltip="true" label="Days" /> 
```

我想在工具提示中添加单词“Days”，改为“10 Days”而不是“10”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:43:09.250

[RichFaces API`<rich:inputNumberSlider>`](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_inputNumberSlider.html)说：

> **“标签”属性是通用属性。**“标签”属性提供了组件和组件（间接）产生的消息之间的关联。此属性定义在请求处理生命周期期间由于转换、验证或其他应用程序操作而出现的本地化错误和信息性消息的参数。借助此属性，您可以替换消息中显示的最后一个参数替换标记。例如，{1} 表示“DoubleRangeValidator.MAXIMUM”，{2} 表示“ShortConverter.SHORT”。

简而言之 - label 在所有组件中用作 jsf 消息的参数。

我研究了ui javascript的[richfaces 资源。](http://grepcode.com/file/repository.jboss.org/maven2/org.richfaces.ui/richfaces-ui/3.3.2.GA/org/richfaces/renderkit/html/script/SliderScript.js)`<rich:inputNumberSlider>`可以在某些地方更改 javascript，添加硬编码的“Days”字符串。为了实现这一点，除了重新编译源代码之外，我想不出任何其他选择。

我建议在其他地方指定此滑块测量天数。

# c - C中的三元运算符和序列点

> ID：10995445
> 
> 赞同：7
> 
> 时间：2012-06-12T11:09:14.947
> 
> 标签：c, ternary, sequence-points, synchronisation

我有如下所示形式的表达式：-

```
while (count)
{
...
...

    index = ((count == 20)? 0 : index++);
...
...
} 
```

现在三元运算符是 C 中的序列点，但我相信序列点在测试部分结束。

这种理解是否正确，因此这种说法会导致未定义的行为吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T11:13:19.907

正确的。在条件评估之后有一个序列点，但下一个序列点是终止语句的分号。因此，无论何时`count != 20`，您都有未定义的行为

```
index = index++; 
```

因为`index`被修改了两次，没有干预序列点。

# delphi - Delphi ADO 内存消耗

> ID：10995450
> 
> 赞同：1
> 
> 时间：2012-06-12T11:09:34.230
> 
> 标签：delphi, postgresql, memory-leaks, oledb, ado

我正在调试一个使用 ADO 进行数据库连接的应用程序，主要是 TAdoConnection 和 TAdoQuery 经过一些测试后发现 TAdoQuery 一直在消耗内存而不是释放内存。使用以下代码可以很容易地重现该问题：

```
procedure TForm1.RunQueries;
var
  Q: TADOQuery;
  Conn: TADOConnection;
begin
  Conn := TADOConnection.Create(nil);
  Conn.ConnectionString := 'Provider=PGNP.1;Password=*****;User ID=*****;Data Source=*****;Initial Catalog=*****;Extended Properties="PORT=5432"';
  Conn.LoginPrompt:=False;
  Conn.Connected := true;

  Q := TADOQuery.Create(nil);
  Q.Connection := Conn;
  Q.SQL.Text := 'select * from sometable where extract(year from now()-Field1)::int/60>=15 or Field2>=50 limit 5';

  q.Open;
  q.Close;
  FreeAndNil(Q);
  FreeAndNil(Conn);
end; 
```

如果以某个时间间隔（例如 200 毫秒）使用计时器运行，则消耗的内存会以各种速度（每小时 20-50MB）不断增加。SQL 文本本身并不真正相关。它还使用“select * from Table1”消耗内存，只是速度较慢。带有 'delete ...' 语句的 ExecSQL 似乎不会引起问题。

我用 GetProcessMemoryInfo 做了一些测试，似乎在调用 Open 方法后内存被消耗而不是释放。不过，并非所有执行都会导致相同的内存增加。

这发生在使用 PostgreSQL 和不同 ADO 提供程序的开发服务器上，但我无法使用 MySQL 重现它。[其他使用来自http://www.pgoledb.com](http://www.pgoledb.com)的 ADO 提供程序的应用程序似乎工作正常，所以问题不仅在于我尝试过 AQTime 和 FastMM4 的提供程序，而且都报告没有泄漏。使用 D6 和 XE2 构建的代码工作方式相同。

我发现这个问题[Delphi: TAdoQuery Memory Leak?](https://stackoverflow.com/questions/4033872/delphi-tadoquery-memory-leak) ，但是那里的问题是由代码中的错误引起的。

我的问题类似于此错误报告[http://qc.embarcadero.com/wc/qcmain.aspx?d=7018](http://qc.embarcadero.com/wc/qcmain.aspx?d=7018)。

您认为这是 Delphi 中的一个错误，是否有解决方法？

**更新：** 即使对象是静态的，也会出现此问题。例如，放置在表单上的 Connection 和 Query 组件，并且连接保持打开状态。只有查询 SQL 文本被更改和执行。

我尝试从 PGfoundry.org 安装不同的提供程序，但结果对我来说很奇怪。

内存泄漏出现在不同操作系统上的两个 Postgres 提供程序中，但没有出现在 MySQL 中。我不确定这意味着什么。如果是 VCL 问题，不应该一直存在吗？如果不是，考虑到同一数据库服务器的不同提供商会发生这种情况，是什么层导致它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T23:32:05.910

我不知道这是否适用于您的情况，但过去我们在 Windows Server 2008（也适用于 Win7）连接到 SQL Server 时遇到了类似的内存问题。

有2个原因：

1.  MDAC 堆栈中的一个 MS 错误，当 ConnectionString 不包含时导致泄漏`Persist Security Info=true`

2.  [MS 在关键部分实现](https://stackoverflow.com/a/6962860/9842)中的更改（“按设计”行为）不会释放调试信息。

一种可能的解决方法是尽可能多地保持连接打开，而不是一直关闭并重新打开它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T22:22:04.593

我在连接到 DB2 时遇到了同样的问题，因此您的问题不仅限于 MS/SQL。我在 Embarcadero 论坛上有一个帖子，但退出了。我无法让这些人相信这不是我的代码。即使我把它从最上面剥下来，我还是得到了与这个问题完全无关的建议。由于我的进程是一个 7/24/365 多线程程序，所以我最终让自己在调度程序下运行它并让它每天自行关闭。这是一个丑陋的修复，但我必须能够向我的客户开具发票！

我还用 C# 编写了一个小测试应用程序，看看是否可以创建相同的问题。我没有看到内存足迹在那里增长。这是一个德尔福问题。

# jquery - jQuery mousedown + mouseleave

> ID：10995451
> 
> 赞同：0
> 
> 时间：2012-06-12T11:09:34.667
> 
> 标签：jquery

我是一个初学者，目前正在构建一个简单的 jQuery 脚本，当我拖出它的界限时，我希望我的动作发生。所以我正在考虑检测mousedown，并在其功能内部有一个mouseleave。

但是发生的事情并不是我所期望的，因为每次我将鼠标移到它上面时 - 无需单击，事件就会被触发。

这是我整理的代码。

```
 $(document).ready(function() {
   $(".box").mousedown(function() {
     $(".box").mouseleave(function() {
       alert("Hello world!");
     });
   });
 }); 
```

非常感谢帮助，thanx！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:10:38.003

```
 $(".box").mousedown(function() {
     alert('mousedown');
     $(this).addClass('imclicked');
   }).mouseleave(function() {
       if($(this).hasClass('imclicked')) {
         alert("Hello world!");
         $(this).removeClass('imclicked');
       }
   });; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:17:07.487

尝试这个：

```
$(document).ready(function() {
    $(".box").mousedown(function() {
        $('.box').addClass('clicked');
    });
    $(".box").mouseleave(function() {
        if ($(this).hasClass('clicked')){
            $(this).removeClass('clicked');
            alert("Hello world!");
        }
     });
 }); 
```

只有在有 CSS 类`mouseleave`时才会继续，然后将删除该类，停止再次触发。`.box``clicked``mouseleave`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:21:40.667

触发后解除绑定事件：

```
$(".box").mousedown(function() {
    $(this).mouseleave(function(){
        $(this).unbind('mouseleave');
        alert("Hello world!");
    })
}) 
```

# asp.net - 由于以下错误而失败：80070005

> ID：10995455
> 
> 赞同：0
> 
> 时间：2012-06-12T11:09:48.300
> 
> 标签：asp.net, visual-studio-2008, crystal-reports

> `{5FF57840-5172-4482-9CA3-541C7878AE0F}`由于以下错误，检索具有 CLSID 的组件的 COM 类工厂失败： `80070005`。
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息: :由于以下错误`System.UnauthorizedAccessException`，检索具有 CLSID 的组件的 COM 类工厂失败： 。`{5FF57840-5172-4482-9CA3-541C7878AE0F}``80070005`
> 
> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常`{MACHINE}\ASPNET`在 IIS 5 上或 IIS 6 上的网络服务上），如果应用程序不是模拟的，则使用该标识。如果应用程序通过 模拟`<identity impersonate="true"/>`，则身份将是匿名用户（通常`IUSR_MACHINENAME`）或经过身份验证的请求用户。
> 
> 要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的框。
> 
> 源错误：
> 
> ```
>  Line 23:  public partial class Report_Agent_Commission : System.Web.UI.Page
>  Line 24:  {
>  Line 25:      ReportDocument obj = new ReportDocument();
>  Line 26:      CrystalClass CCobj = new CrystalClass();
>  Line 27:      static string repFile = string.Empty; 
> ```
> 
> 源文件：
> d:\inetpub\vhosts\impactwebclients.com\httpdocs\Report_Agent_Commission.aspx.cs
> 
> 线路：25
> 
> 堆栈跟踪：
> 
> [UnauthorizedAccessException：由于以下错误，检索具有 CLSID {5FF57840-5172-4482-9CA3-541C7878AE0F} 的组件的 COM 类工厂失败：80070005。] CrystalDecisions.CrystalReports.Engine.ReportDocument..cctor() +207 [TypeInitializationException： 'CrystalDecisions.CrystalReports.Engine.ReportDocument' 的类型初始化程序引发异常。] CrystalDecisions.CrystalReports.Engine.ReportDocument..ctor() +0 PBS.GUI.Report_Agent_Commission..ctor() in d:\inetpub\vhosts\ Impactwebclients.com\httpdocs\Report_Agent_Commission.aspx.cs:25 ASP.report_agent_commission_aspx..ctor() 在 c:\windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\9b53e041\44708862\App_Web_report_agent_commission .aspx

* * *

我在使用水晶报告 2008 版本 10.5.3700.0 时遇到的这个问题，如果我在该特定网页上评论/删除水晶报告内容，它工作正常。当我在当前网页中放置一个水晶报表查看器时，它显示错误

你能帮我从这里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:44:01.363

我自己找到了答案.. 请在 webconfig 中打开自定义错误模式并检查错误状态编号，99% 它给出错误号：500 - 这是一个内部服务器错误，在服务器机器上可能有问题他们必须安装水晶报告运行时，否则可能是任何其他问题，所以它不在您的编码部分，所以在确认 500 错误后向他们提出投诉

谢谢大家，如果它对任何人有用..它会很棒

# mobile-application - 移动混合/桥应用程序开发的缓存最佳实践

> ID：10995456
> 
> 赞同：3
> 
> 时间：2012-06-12T11:09:49.880
> 
> 标签：mobile-application, trigger.io, clientside-caching

我真的需要限制任何不必要的网络流量和服务器行程。解决方案：常识缓存。（我不会在阳光下缓存所有东西）。

但是，在阅读了[缓存文件](http://docs.trigger.io/en/v1.3/features/cache.html)文档并实现了几个快速示例之后，缓存 ajax json 结果的最佳时间是什么时候**？**当然，每次显示我的视图时，我都可以进行通常的缓存/无缓存检查。但是有没有办法在初始应用程序启动期间执行异步加载以预取我知道用户将需要的远程数据？使用[connectionStateChanged](http://docs.trigger.io/en/v1.3/modules/event.html)事件是唯一的方式（或最接近的方式）吗？有没有办法“挂钩”到启动画面（是的，我知道苹果希望启动画面主要用于过渡）？窗口.onload？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:05:57.590

因此，如果我对您的理解正确，您正在寻找一种方法来在每次应用程序启动时异步获取远程资源一次，并将这些数据缓存起来？

我们的[请求模块](http://docs.trigger.io/en/v1.3/modules/request.html)本质上是异步的，因此您可以简单地插入 a`forge.request.ajax`以开始获取 Ajax 响应，然后将其存储在首选项模块中。

尽管在实践中可能相同，但您甚至可以将其包装在 setTimeout 中以使其*更加*异步：

```
setTimeout(function ()
  forge.request.ajax({
    url: 'http://example.com/method.json',
    success: function (data) {
      forge.prefs.set("method.json-cache", data);
    }
  });
}, 10); 
```

# html - 将滚动条更改为 div 的左侧

> ID：10995457
> 
> 赞同：0
> 
> 时间：2012-06-12T11:09:52.263
> 
> 标签：html, css, wordpress, scroll, scrollbar

我正在建立一个 Wordpress 网站，该网站有一个主要文章的“框”。这是使用 CSS 和文章周围的几个 Div 构建的。这一切都很好，唯一的问题是当我需要一个滚动条时，它会出现在右框边框之外。

自己看看（周围有很棒的完美红色圆圈！）。

![截屏](../Images/ff994e8112bc1ec92d8bd5dc6c3d5fec.png)

基本上，我希望它留在文章中，所以在最后一张图片的左侧（右侧边框）。我在互联网上阅读，发现您可以使用 dir="rtl" 反转滚动条，但这会反转所有滚动条，这并不是我真正想要的。

[编辑-为了清楚起见，我不希望它出现在文章本身的左侧，就在文本右侧的框内。这是我想要的，但正如你所见，它弄乱了文章框。我希望它处于那种位置，但不会搞砸文章。]

![截图 2](../Images/415a51f46149b3d28a6dde03b7275173.png)

[结束编辑]

这是 CSS（这来自一个修改过的模板，如果有明显错误请见谅）：

```
.article {
    margin-bottom:20px;
}
.article-corps-title {
    background:url(images/article_sprite.png) no-repeat;
    background-position:0 -17px;
    min-height:70px;
    max-height:142px;
    position:relative;
}
.page-corps-title {
    display:block;
    /*background:url(images/article_sprite.png) no-repeat;
    background-position: 13px -65px;*/
    background:url(images/articlebox.png) no-repeat;
    background-position:15px 0px;
    height:80px;
}
.article-top {
    position:absolute;
    top:13px;
    right:25px;
}
.article-top a {
    display:block;
    font-size:10px;
    font-weight:700;
    color:#aaa;
    text-decoration:none;
    padding:4px 12px 0 0;
    background:url(images/icons.png) no-repeat;
    background-position:top right;
}
.article-date {
    position:absolute;
    left:11px;
    top:26px;
    display:block;
    width:40px;
    text-align:center;
}
.article-date .month {
    font-size:13px;
    font-weight:700;
    line-height:15px;
    color:#FFF;
    text-transform:uppercase;
}
.article-date .day {
    font-size:22px;
    font-weight:700;
    color:#FFF;
}
h2.page-title {
    text-align:center;
    font-size:26px;
    font-weight:700;
    padding-top:10px;
    padding-bottom:15px;
    color:#000000;
    text-shadow:#CCC 0 0 2px;
    max-width:565px;
}
h2.article-title {
    font-size:26px;
    font-weight:700;
    margin-left:80px;
    padding-top:30px;
    color:#ce0709;
    text-shadow:#CCC 0 0 2px;
    max-width:565px;
}
h2.article-title a, h2.page-title a {
    color:#ce0709;
    text-decoration:none;
}
h2.article-title a:hover,h2.page-title a:hover {
    color:#E00
}
.article-meta-autor {
    font-size:11px;
    color:#aaaaaa;
    margin-left:80px;
    background:url(images/icons.png) no-repeat;
    background-position:left -15px;
    padding:4px 0 4px 20px;
    max-height:11px;
    line-height:14px;
}
.article-meta-autor a, .article-meta-keywords a, .article-meta-comments a {
    color:#aaaaaa;
    text-decoration:none;
    font-weight:700;
}
.article-meta-autor a:hover, .article-meta-keywords a:hover, .article-meta-comments a:hover {
    text-decoration:underline;
}

.article-corps {
    position:relative;
    /*background:url(images/article_sprite.png) repeat-y;
    background-position:-683px 0px;*/
    background:url(images/articleboxmiddle.png) repeat-y;
    background-position:-5px 0px;
    /*min-height: 250px;*/
    height:300px;
    margin-left:20px;
    padding:13px 43px 0px 50px;
    line-height:20px;
    overflow:auto;/*hidden;*/
}
.article-read-more {
    margin:0px auto;
    width:164px;
    padding-bottom:15px;
}
.article-read-more a {
    display:block;
    width:156px;
    height:26px;
    text-align:center;
    padding-top:9px;
    background:url(images/read_more.png) no-repeat;
    background-position:top left;
    font-weight:700;
    color:#FFF;
    text-decoration:none;
    text-transform:uppercase;
}
.article-read-more a:hover {
    background-position:bottom left;
}
.article-meta-keywords {
    position:absolute;
    bottom:0;
    left:50px;
    background:url(images/icons.png) no-repeat;
    background-position:0 -34px;
    padding-left:20px;
    font-size:11px;
    color:#aaa;
    max-height:20px;
    max-width:450px;
    overflow:hidden;
}
.article-meta-comments {
    position:absolute;
    bottom:0;
    right:45px;
    background:url(images/icons.png) no-repeat;
    background-position:0 -54px;
    padding-left:20px;
    font-size:11px;
    color:#aaa;
}
.article-meta-keywords a {
    color:#aaa;
    font-weight:700;
    text-decoration:none;
}
.article-meta-keywords a:hover {
    text-decoration:underline;
}
.article-footer {
    display:block;
    /*background:url(images/article_sprite.png) no-repeat;
    background-position:14px -15px;*/
    background:url(images/articlebox.png) no-repeat;
    background-position:15px -420px;
    height:45px;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:16:09.607

用于`dir="rtl"`为文本指明方向。滚动条将出现在左侧。
然后使用`dir="ltr"`到内部元素如`p, div`etc 来消除效果。这边走，`dir="rtl"`

这是小提琴 - [http://jsfiddle.net/ashwyn/dcLQQ/](http://jsfiddle.net/ashwyn/dcLQQ/)
虽然我在 Firefox 中工作，但在我的 chrome 中却没有。

**[编辑]**
下面是将滚动条稍微向左移动的小提琴-
[http://jsfiddle.net/ashwyn/fPGy8/1/](http://jsfiddle.net/ashwyn/fPGy8/1/)

除了上述之外，我认为没有其他解决方案可以解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:22:05.517

这不是解决您的问题的方法，而只是一个建议：

请注意，您违背了用户期望的标准行为 - 对于从左到右的语言，滚动条总是出现在右侧，这可能会导致可用性不佳。由于您没有创建需要 RTL 的站点，因此最好不要更改标准浏览器行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:13:09.183

你没有给我足够的代码（结构）来给出一个具体的答案，但看起来你可以缩小包含文章的 div 的范围。

# mysql - 通过 Cygwin 连接 MySQL

> ID：10995465
> 
> 赞同：6
> 
> 时间：2012-06-12T11:10:26.040
> 
> 标签：mysql, cygwin

我的桌面上运行了[XAMPP](http://www.apachefriends.org/en/xampp.html)，并且可以通过 phpMyAdmin 连接到 MySQL 服务器。但是，当我尝试通过 Cygwin 连接时：

> 错误：无法通过套接字 '/var/run/mysql.sock' 连接到本地 MySQL 服务器 (2)

我尝试在同一台机器上连接到 MySQL，我的本地开发服务器和远程服务器都失败了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T19:04:55.603

```
mysql -h 127.0.0.1 -P <PORT> -u root -p 
```

这对我有用。确保检查什么是正确的端口。

使用以下命令检查 mysqld PID：

```
ps -sW | grep mysqld 
```

然后找到端口：

```
netstat -nao | grep <PID> 
```

玩得开心！

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-04-15T19:31:02.413

您还可以添加自身的别名。

```
alias mysql = 'mysql -u {user} -p{password} -h 127.0.0.1' 
```

# xml - Spring MVC + Tiles：不渲染

> ID：10995468
> 
> 赞同：0
> 
> 时间：2012-06-12T11:10:32.093
> 
> 标签：xml, spring, rendering, tiles

我正在将 Spring MVC 3.1.x 与 Tiles 2.2.2（使用 Roo 的引导项目）一起使用，并尝试使用如下图块模板创建视图：

```
<html   xmlns:jsp="http://java.sun.com/JSP/Page" 
    xmlns:c="http://java.sun.com/jsp/jstl/core" 
    xmlns:tiles="http://tiles.apache.org/tags-tiles" 
    xmlns:spring="http://www.springframework.org/tags" 
    xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" >

<jsp:output doctype-root-element="HTML" doctype-system="about:legacy-compat" />
<jsp:directive.page contentType="text/html;charset=UTF-8" />
<jsp:directive.page pageEncoding="UTF-8" />
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=8" />    

    <util:load-scripts />

    <spring:message code="application_name" var="app_name" htmlEscape="false"/>
    <title><spring:message code="welcome_h3" arguments="${app_name}" /></title>
</head>
<body>
    <!--Comments -->
    <!--[if IE]>
        something
    <![endif]-->
    ...
    <tiles:insertAttribute name="menu" ignore="true" />
    ...
</body>
</html> 
```

Tiles 属性运行良好，但注释和条件 CSS 均未呈现；它们只是不存在于输出代码中。

渲染这个“html 注释元素”代码的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:39:52.540

解决方案：[Jspx 文件和条件注释](https://stackoverflow.com/questions/8969854/jspx-files-and-conditional-comments)

总之，jsp文档中的注释被忽略了。解决方案是：

```
<jsp:text><![CDATA[<!--[if lte IE 9]>]]></jsp:text>
...
<jsp:text><![CDATA[<![endif]-->]]></jsp:text> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:34:24.577

尝试使用jsp 注释<%-- 注释--%>。希望这对您有所帮助。干杯。

# actionscript-3 - 如何修改 Perlin Noise [参见线程中的示例]

> ID：10995469
> 
> 赞同：5
> 
> 时间：2012-06-12T11:10:35.837
> 
> 标签：actionscript-3, flash

我在 2D 中使用 Perlin Noise 作为世界生成器（在泰拉瑞亚中如何）。我找到了一个适合我的实现。我需要生成世界的一部分，但这种实现只能生成一次整个世界。

实现 - [http://sirisian.com/javascriptgame/tests/valuenoise2.html](http://sirisian.com/javascriptgame/tests/valuenoise2.html) 我将其重写为 AS3，稍作修改（+ 主代码） - [http://codepad.org/crMEQ2DD](http://codepad.org/crMEQ2DD)

请帮助修改代码，以便可以生成噪声部分：

```
PerlinNoise.randomize(65735);
...
var noises:Vector.<Number> = PerlinNoise.getNoise(0, 0, 100, 100, 6, 6, 1.0, 20);
...
var noises:Vector.<Number> = PerlinNoise.getNoise(100 /*<--x offset*/, 0, 100, 100, 6, 6, 1.0, 20); 
```

我尝试了几个选项，但不同的噪音部分没有对接。

如果你有适合世界生成器的 Perlin Noise 的实现，你可以给我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:31:25.093

`BitmapData.perlinNoise()`Flash 已经通过该方法包含了 Perlin 噪声的实现。如果您需要将噪声作为数字向量（而不是可渲染位图）获取，您可以做的是使用`BitmapData.getVector()`将所有像素作为 32 位整数向量返回的方法，其中四个字节代表 alpha，分别为红色、绿色和蓝色通道。

我自己在一个项目中采用了这种模式，并取得了巨大的成功。以下是我编写和使用的功能。

```
public static function initNoiseVector(output : Vector.<Number>, baseX : Number, numOctaves : Number, scale : Number, blur : uint = 0) : void
{
    var i : uint;
    var len : uint;
    var sum : uint;
    var avg : uint;
    var perlin : BitmapData;
    var noise : Vector.<uint>;

    len = output.length;

    perlin = new BitmapData(len, 1);
    perlin.perlinNoise(baseX, 1, numOctaves, 0, true, false, 7, true);

    if (blur > 0)
        perlin.applyFilter(perlin, perlin.rect, new Point(), new BlurFilter(blur, 1, 3));

    noise = perlin.getVector(perlin.rect);

    // Calculate average
    sum = 0;
    for (i=0; i<len; i++) {
        // Mask out blue channel
        sum += noise[i]&0xff;
    }
    avg = sum/len;

    for (i=0; i<len; i++) {
        var speed : Number;

        // Convert perlin noise color to value between -1 and 1
        speed = ((noise[i]&0xff) - avg) / avg;
        output[i] = speed * scale;
    }
} 
```

这个函数基本上只是创建一个 1px 高的位图（宽度定义为矢量的长度），在该位图中启动灰度 Perlin 噪声，可选地应用模糊，然后根据缩放函数参数缩放值。

缩放是通过首先计算平均值来完成的（仅使用蓝色通道，因为由于噪声是灰度，所有通道都是相同的。）然后将值在 -1 和 1 之间进行归一化，其中平均值将为 0，并且按提供的比例因子缩放。

然后可以通过以下方式使用该函数来检索 1000 个值：

```
_noise = new Vector.<Number>(1000, true);
PerlinNoiseUtil.initNoiseVector(_noise, 300, 10, randomDev * periodTime, 10); 
```

希望这可以帮助！

# sql - 累计每月总计和 Postgresql

> ID：10995473
> 
> 赞同：5
> 
> 时间：2012-06-12T11:11:00.063
> 
> 标签：sql, postgresql

我正在尝试为 dellstore2 数据库累积计算用户数。在这里查看答案和其他论坛，我使用了这个

```
select 
date_trunc('month',orderdate),
sum(count(distinct(customerid)))
   over (order by date_trunc('month',orderdate))
from orders group by date_trunc('month',orderdate) 
```

这返回

```
2004-01-01 00:00:00.0   979
2004-02-01 00:00:00.0   1,952
2004-03-01 00:00:00.0   2,922
2004-04-01 00:00:00.0   3,898
2004-05-01 00:00:00.0   4,873
2004-06-01 00:00:00.0   5,846
2004-07-01 00:00:00.0   6,827
2004-08-01 00:00:00.0   7,799
2004-09-01 00:00:00.0   8,765
2004-10-01 00:00:00.0   9,745
2004-11-01 00:00:00.0   10,710
2004-12-01 00:00:00.0   11,681 
```

每个月都是

```
979
973
970
976
975
973
981
972
966
980
965
971 
```

看着前几项，似乎总体上还不错。但是当我跑

```
select count(distinct(customerid)) from orders 
```

对于整个事情，我得到

```
8996 
```

这与第一个输出 11,681 中的最后一项不一致。我想上面的计算不能确定几个月的唯一性。这种计算的最快方法是什么，最好不使用自连接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T11:25:44.207

您可以使用这样的子查询，而不是直接从订单中选择：

```
SELECT  OrderDate,
        SUM(COUNT(DISTINCT customerid)) OVER (ORDER BY OrderDate)
FROM    (   SELECT  CustomerID, 
                    DATE_TRUNC('MONTH', MIN(OrderDate)) AS OrderDate
            FROM    Orders
            GROUP BY CustomerID
        ) AS Orders
GROUP BY OrderDate 
```

我认为这将按要求工作。

[http://sqlfiddle.com/#!1/7a8cc/1](http://sqlfiddle.com/#!1/7a8cc/1)

**编辑**

如果您仍然需要这两种方法（即不同的和运行总计），您可以使用这个：

```
SELECT  OrderDate,
        COUNT(DISTINCT CustomerID) AS MonthTotal,
        SUM(COUNT(DISTINCT customerid)) OVER (ORDER BY OrderDate) AS CumulativeTotal,
        SUM(COUNT(DISTINCT CASE WHEN OrderNumber = 1 THEN customerid END)) OVER (ORDER BY OrderDate) AS CumulativeDistinctTotal
FROM    (   SELECT  CustomerID, 
                    OrderDate,
                    ROW_NUMBER() OVER(PARTITION BY CustomerID ORDER BY OrderDate) AS OrderNumber
            FROM    Orders
        ) AS Orders
GROUP BY OrderDate 
```

这里的例子：

[http://sqlfiddle.com/#!1/7a8cc/10](http://sqlfiddle.com/#!1/7a8cc/10)

# memory - 关闭选项卡时如何减少内存

> ID：10995474
> 
> 赞同：0
> 
> 时间：2012-06-12T11:11:13.293
> 
> 标签：memory, qt4, qt-creator, qwebview, qtabbar

我是这个 Qt 编程的新手。我只是想做一个浏览器应用程序。在那我使用一个选项卡小部件和一个 Webview 来加载 url。当我有更多数量的新标签时，我的内存不断增加，如果我一个一个关闭标签，内存并没有减少。在我关闭最后一个标签之前，内存是相同的。我曾尝试在我的***标签可关闭***插槽中使用***删除***方法。即使在此之后，内存也没有减少。有什么建议请...

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:49:45.117

1.  检查你的插槽是否真的被执行（设置断点或添加类似的东西`qDebug() << "hello!";`——当然不要忘记`#include <QtCore/QDebug>`）。

2.  作为 C/C++ 运行时库的一部分的堆分配器代码可能不会将内存释放回操作系统。您需要使用特定于平台的方法来询问堆分配器实际上分配了多少内存。查看某些操作系统进程浏览器不会告诉您发生了什么，根本不会。*

# jquery - Jquery：使用 .insertAfter 进行表标记操作

> ID：10995488
> 
> 赞同：0
> 
> 时间：2012-06-12T11:12:11.810
> 
> 标签：jquery, html, html-table, markup, insertafter

我有一个标准表：

我想使用 jQuery 重新格式化表格，更具体地说，我想添加一个关闭 tr 并在第一个 td 的 tbody 中打开一个新 tr ..

我可以用下面的jquery定位它，并且插入了html但是以错误的方式..

```
$('</tr><tr>').insertAfter('.table thead tr td:first-child'); 
```

新标记的顺序错误......任何帮助将不胜感激。

```
<tr></tr> <--wrong! 
```

我需要它是：

```
</tr><tr> 
```

我错过了什么吗？

```
<table>
    <thead>
        <tr>
           <td>1</td>
           <td>2</td>
           <td>3</td>
           <td>4</td>
           <td>5</td>
           <td>6</td>
        </tr>
    </thead>
    <tbody>
        <tr>
           <td>1</td>
           <td>2</td>
           <td>3</td>
           <td>4</td>
           <td>5</td>
           <td>6</td>
        </tr>
        <tr>
           <td>1</td>
           <td>2</td>
           <td>3</td>
           <td>4</td>
           <td>5</td>
           <td>6</td>
        </tr>
        <tr>
           <td>1</td>
           <td>2</td>
           <td>3</td>
           <td>4</td>
           <td>5</td>
           <td>6</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:29:48.760

jQuery 和 JavaScript 通常创建和操作有效的 DOM 元素/节点；它不会在 HTML 中插入字符串（尽管您可以使用`.html()`/`innerHTML`方法来执行此操作，尽管存在一些潜在的解析困难）。如果要在 中插入新行`thead`，则只需：

```
$('<tr />').insertAfter('thead tr:last'); 
```

我不确定你为什么要插入一个字符串而不是一个新的节点/元素。如果您使用有关您尝试做什么的更具体信息更新您的问题，我将使用更好的解决方案（如果可能）更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:19:09.637

您正在将 tr 转换为 jquery dom 元素。这不能让你这样做。它始终保持标签的打开和关闭顺序。

您必须通过获取表的第一个 Tr 的 HTML 来进行字符串操作

```
var html = ('.table thead tr:first-child').html(); 
```

# windows-8 - Win8 Metro：收集调试和诊断信息

> ID：10995489
> 
> 赞同：0
> 
> 时间：2012-06-12T11:12:13.900
> 
> 标签：windows-8, windows-runtime

我们正计划开发一个 Metro 应用程序，并想了解 Windows8 RT 中可以使用哪种支持/编程模型来收集调试/诊断日志数据。**这应该可以快速帮助/诊断该领域的应用程序错误。**

我们可以像传统的 Windows 应用程序那样记录调试数据并在遇到错误时要求用户发送日志文件吗？

对于前。如果应用程序在 QA/最终用户机器上加载时出现异常，我们可以要求 QA/最终用户附上问题的日志文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T11:40:18.010

您不必收集任何数据，Windows 商店正在为您做这些。在 windows 商店应用程序[仪表板](https://appdev.microsoft.com/StorePortals/en-US/Home/Index)中，在质量下，您有关于 chrash 和应用程序无响应状态的报告，这些是带有调试信息的 *.cab 文件。

您可以使用 Visual Studio 打开此文件 (*.dmp)，详细信息如下：

[http://msdn.microsoft.com/en-us/library/windows/apps/jj933262.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj933262.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T11:22:35.183

您是否检查过此 MSDN 示例：[Windows 应用商店应用程序的日志记录示例（WinRT 中的 ETW 日志记录）](http://code.msdn.microsoft.com/windowsapps/Logging-Sample-for-Windows-0b9dffd7)？

# html - 如何使此 HTML 更改生效？

> ID：10995491
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:12:16.223
> 
> 标签：html, css

当我更改 HTML 声明时，我的背景变为白色而不是绿色。

前：

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">`

之后，这是新的要求：

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">`

我应该如何使我的代码符合新要求？我的 CSS：

```
*  {font-family:arial;}

.avnamn{ 
                color: #90002b; 
                font-size: 140%; 
                display: inline; 
                vertical-align: 3%; 
                margin-left: 1%;
                }

.b{border:1px solid #000;}

.readonly{background-color: #CCC;} 
```

任何帮助表示赞赏。

```
.Webdings{
    font-family: Webdings;
    }

ul{margin-top: 0px}

.mt3{margin-top:-3px;}
.mt5p{margin-top:5px;}

.fontS80 {font-size: 80%;} 
a:link{color:#000; text-decoration:none; }
a:visited{color:#000; text-decoration:none; }
a:hover{color:#000; text-decoration:none; }
a:active{color:#000; text-decoration:none; }

.fontS75 {font-size: 75%;} 

.link{color: #003366;
    text-decoration: underline;
    cursor: pointer;
    font-weight: bold;}

.link_sm{color: #003366;
    text-decoration: underline;
    cursor: pointer;}

.link_sm{font-size: 70%;cursor: pointer;}

.small{font-size: 75%;}

.smallg{font-size: 75%;
color: #555;}

.ssmall{
    font-size: 65%;
    font-weight: bold;
    color: #555;
}
.small60{font-size: 60%;}
.small50{
    font-size: 50%;
    color: #333;
}
.smallb{font-size: 85%;}
table{display:inline;}

h1{font-size: 130%;display:inline;}
h2{font-size: 100%;display:inline;}
h3{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}
h4{font-size: 70%;display:inline;}
h5{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}

.hthin{
    font-size: 125%;
}

.th {text-align: left;}

td, th{font-size: 75%;
    vertical-align: text-top;}
.td_link{cursor: pointer;}
.td40{height:40px;}
.td60{height:60px;}

.thkant{
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    font-size: 70%;
        text-align: left;
}

.labb{F0F0E3; c1c1b3 }

.bb{border-bottom: 1px solid #000;}
.bbV{border-bottom: 1px solid #FFF;}
.TB_nbA {background-color:#CCC;}
.TB_bt, .TB_nb, .TB_db, .TB_bb {background-color:#efefdc;}

.hk {background-color:#d9ddb3;}

.hknot {background-color:#f9faf2;}
/*<!--F8F8F1-->*/
.TB_bt{border-top: 1px solid #FFF;}
.TB_bt5{border-top: 5px solid #FFF;}
.TB_bb{border-bottom: 1px solid #999;}
.TB_bb2{border-bottom: 2px solid #c1c1b3;}
.TB_db{border-bottom: 1px solid #000; border-top: 1px solid #000;}
.TB_tb{border-top: 2px solid #efefdc;}

.TB_bo{border: 2px solid #efefdc;}
.TB_bo_hk{border-top: 1px solid #efefdc;}

.TB_bo2{border: 1px solid #efefdc;}

.TB_bo2B{
border-top: 2px solid #c1c1b3;
border-left: 3px solid #efefdc;
border-right: 3px solid #efefdc;
border-bottom: 2px solid #c1c1b3;
}

.TD_bo{
    border-right: 1px solid #c1c1b3;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.TD_bo2{

    border-right: 0;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.ytb{
    border-left:3px solid #efefdc;
    border-right:3px solid #efefdc;
}

.datum {
    font-size: 70%;
    padding-right: 5px;
    vertical-align: text-top;} 
.sub {background:#EAEAEA;}
.sub_meny, .sub_meny_r, .sub_meny_active, .sub_meny_sm{
    font-size: 70%;
    padding-left: 20px;
    padding-right: 20px;
    vertical-align: text-top;}

.sub_meny_sm {
    font-size: 60%;
    vertical-align: middle;
    padding-left: 10px;
    padding-right: 10px;
}   

.sub_meny_r{
    float:right;
    font-size: 70%;
    padding-left: 8px;
    padding-right: 8px;}

.sub_meny_rm{margin-top:4px;}
.sub_meny_active{font-weight: bold;}

.flikkant1 {
    background-image: url(../images/fl1k.jpg);
    background-position: center;
    z-index: -1;}

.inl_namn{
    font-weight: bold;
    font-size: 70%;
    color: Black;
    text-decoration: none;}

.th{text-align: left;}
.tr{text-align: right;}

.g1{
    background-color: #FFF;
    line-height: 20px;
}

.g2{
    background-color: #EEE;
    line-height: 20px;
}

.g3{
    background-color: #DCDCDC;
    line-height: 20px;
    font-weight: bold;
    font-size: 100%;
}
.g4{
    background-color: #CCC;
    line-height: 20px;
}

.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 70%;
}

.popuphandlaggare{ 
    border-color: #000;
    border-style: groove;      
    border-width: 2px;      
    padding: 0px;      
    background-color: #FFF;     
    font-size: 70%;     
    position: absolute;     
    top: 900px; 
    }

.popupN{
    background-color: #F0F0E3;
    color: #000;
    width: 100%;
    display: inline;
    font-weight: bold;
    height: auto;
    padding: 2px;
    border-bottom: 1px solid #000;
}
.pin{padding: 6px;}

.fl10, .fl20, .fl30, .fl40, .fl50, .fl60, .fl70, .fl80, .fl90, .fl100 {
    padding-bottom:4px;color: #000000;
}

.over{
    background-color: #EFEFDC;
    line-height: 20px;
}

.half{
line-height:50%;
}

.quarter{
line-height:25%;
}

.lh10{
line-height:10%;
}

.checkmargin {margin-right: 25px;}  
.checkmarginL {margin-left: 25px;}  

.pusher {padding-left: 15px;"}
.pusherR {margin-right: 40px;"}

.rand3{background-color: #FFF; line-height: 3px;}
.rand1{background-color: #FFF; line-height: 1px;}

.whiteborder {     color: #ffffff;      border: 4px solid #ffffff;      padding: 10px;      margin: 10px; }
#details { width: 700; color: #ffffff; }
.column1 {     color: #000000; margin: 0;      padding: 0;     width: 600px;     border:0;     float: left; }
.column2 {     color: #000000;margin: 0;      padding: 0;     border:0;     width: 80px;     float: right; }

.f200 {
    color: #000000;
}

.f210 {
    color: #000000;float: left;
}
.f220 {
    width: 400;
}
.f1450 {
    width: 600;
    float:left;
}
.f1550 {
    width: 150;
    float:left;
    padding:15px;
}
.paddedcell {
    padding:15px;
}
.b2{border:2px solid #efefdc;}
.inp_sel{width: 80%;}

.fl21{float:left; padding:5px; margin:5px; width:150px;} .fl455{float:left; padding:5px; margin:5px; width:120px;} 

.form-bg {
  background: #eeefdf;
  width:1000px;
  overflow:hidden;
}
.form-bg2 {
  background: #eeefdf;
  width:100%;
  overflow:hidden;
}
.data-bar {
  border-bottom:1px solid #fbfbf7;
  display:inline-block;
  padding:10px 10px;
}

.left {
float:left;
width:200px;

}
.discount {
float:right;
width:500px;

}
.discounts {
width:900px;

}
.right {
float:right;
width:700px;
}
.yta20 {
background: #eeefdf;
width:1100px;
}

.yta2 {

width:1100px;
}

.data-box {
width:650px;
height:100px;
border:1px solid #cbcbcb;
}
#table td { 
margin:120px; 
} 

#personName {     float:left;     width:300px;   }  #otherDetails {     float:right;     width:450px;      }

.th_rad_sort {border-bottom: 2px solid #000000; text-decoration: none;"}

a img { border: 0; outline:0;}

.horizontal-gradient {
    background: #1a2adb; /* Old browsers */
    background: -moz-linear-gradient(left,  #1a2adb 0%, #a1e6ed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#1a2adb), color-stop(100%,#a1e6ed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* IE10+ */
    background: linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1a2adb', endColorstr='#a1e6ed',GradientType=1 ); /* IE6-9 */
    color: white;
    width: 1015px;
}
.f { float: right;     color: white; }

.handlaggare { width: 1000px; }

div.data-box-nat{
    margin-bottom: 10px;
    border: 2px solid gray;
    width: 600px;
}
div.data-box-pct{
    margin-bottom: 10px;
    border: 2px solid gray;
    width: 600px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:23:57.420

该更改使浏览器以“标准模式”而不是“<a href="http://www.cs.tut.fi/~jkorpela/quirks-mode.html" rel="nofollow">Quirks 模式处理页面”。这可能意味着任何事情，从没有明显的变化到完全混乱。

如果您已经强制使用 XHTML 1.1，那么从了解 XHTML 是什么开始，重写页面以使其符合它，验证并进行更正。当您在某些问题上需要特定帮助时，发布一个 URL 或整个代码（例如通过 jsfiddle）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:17:46.270

您正在从 HTML 更改为 XHTML 文档类型。

XHTML 要求所有标记都有一个关联的结束标记，即 XML。您的问题很可能出在带有一些未封闭标签的 HTML 代码中，而不是在您的 css 中，您应该发布您的 HTML 或小提琴，以便我们看看！

根据 Jukka 的回答，浏览器在标准模式下呈现的正确文档类型应该是：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd"> 
```

如果您比较两者，您会发现旧版本中缺少 URI - 与新版本相比。

# android - 如何确保我从 EditText 获得整数

> ID：10995509
> 
> 赞同：0
> 
> 时间：2012-06-12T11:13:25.087
> 
> 标签：android

我有这个代码：

```
EditText value = ( EditText )findViewById( R.id.editbox );
Integer int_value = Integer.valueOf( value.getText().toString() ); 
```

当 EditText 中有数字时效果很好，但是当它为空或有文本等时它会 FC 我的应用程序。

我怎样才能确保 int_value 有/是一个数字？我也尝试了 parseInt 但结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:16:19.590

在您的 xml 文件中添加`android:inputType="number"`您的声明。`EditText`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T11:16:45.090

```
 try {             
Integer int_value  = Integer.parseInt(value.getText().toString());
            } catch (NumberFormatException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T11:20:55.457

当一个无法解析的字符串作为`Integer`'s 的输入时`valueOf`，它会抛出一个`NumberFormatException`. 简单地用一个块包围它`try catch`来处理这种情况：

```
Integer int_value = null;

try {
    int_value = Integer.valueOf(value.getText().toString());
} catch (NumberFormatException e) {
    // here you can handle the case where the text wasn't an integer
}

// carry on... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T11:23:55.373

在 xml 中设置 inputType="number" 并检查代码中的空值

```
if(!"".equals(value.getText().trim()) && value.getText().trim()!= null) {

  //sure, input is not empty and is a number.

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T11:29:09.667

试试这个，

```
editText.setOnFocusChangeListener(new OnFocusChangeListener(){
                @Override
                public void onFocusChange(View v,boolean hasFocus)
                {
                    //check for emptiness
                    if(editText.length()==0)
                    {
                        editText.setError(error_required);
                    }
                    else if(!numberValidation(editText.getText().toString()))
                    {
                        editText.setError("Only Numbers");
                    }
                }
            }
            ); 
```

在 main.xml 添加，

```
EditText tag, android:numeric="integer/number/decimal" 
```

# apache-flex - Flex Air HTML（监听 javascript 警报并绕过它）

> ID：10995510
> 
> 赞同：0
> 
> 时间：2012-06-12T11:13:25.273
> 
> 标签：apache-flex, actionscript, adobe, action

我从 htmlloader 获取文档 java 脚本对象，如下所示。

```
var document = htmlloader.window.document; 
var btn:Object = document.getElementById('btn_id'); 
```

然后我有一个像这样使用 getElementById 的按钮。那个 btn 有一些验证，我用一些数据自动调用它并像这样调度事件。

```
var evt:Object = document.createEvent("MouseEvents");
evt.initMouseEvent("click", true, true, htmlLoader.window, 
        0, 0, 0, 0, 0, false, false, false, false, 0, null);
btn.dispatchEvent(evt); 
```

有时发生错误，出现 Java Script 警报并停止执行，当我单击该警报 Ok 按钮时，它会正常执行。我只需要绕过该警报或收听该警报，以便我可以显示我自己的与 Flex 相关的弹出窗口或类似的东西。任何机构有任何想法...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:03:47.937

首先我会尝试调试代码，看看为什么会抛出错误？您是否将正确的数据类型传递给您的 initMouseEvent 方法？

否则：

尝试`try` `catch`在调度事件时添加一个块，然后在错误处理中显示您的弹性弹出窗口。

```
var evt:Object = document.createEvent("MouseEvents");
evt.initMouseEvent("click", true, true, htmlLoader.window, 
        0, 0, 0, 0, 0, false, false, false, false, 0, null);
try{
   btn.dispatchEvent(evt);
}
catch(e){
   //handle error - show flex alert
} 
```

[http://www.w3schools.com/js/js_try_catch.asp](http://www.w3schools.com/js/js_try_catch.asp)

# spring - Springjdbc 模板选择查询执行需要很长时间

> ID：10995511
> 
> 赞同：1
> 
> 时间：2012-06-12T11:13:30.360
> 
> 标签：spring, select, jdbc

我正在使用 Springjdbc 模板执行一个选择查询，它返回近 1000 个 ID 作为一组。但使用 Spring jdbc 模板执行需要 10 分钟。但在 Toad 中，相同的查询会在几秒钟内执行。

有人可以帮我解决这个问题吗？

我正在使用以下代码：

```
return (HashSet)this.jdbcTemplate.query(
   (String) sqlMap.get("SQL_NRChargePromoApIDList"), new Object[] {  }, new DataMapperAPID());

public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
        HashSet compList = new HashSet();        
        compList.add(rs.getString("ap_id"));
        while(rs.next()){
            compList.add(rs.getString("ap_id"));
        }
        return compList;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:55:47.687

您不需要调用 rs.next()，因为您传递给[JdbcTemplate.query()](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html#query%28org.springframework.jdbc.core.PreparedStatementCreator,%20org.springframework.jdbc.core.RowMapper%29)的 RowMapper 的全部意义在于它会自动遍历结果集中的所有行并将映射对象插入到列表中，然后它将返回。行映射器应该简单地提取 app_id 然后返回它。完成后，您将返回一个列表。

# php - 在 Pyrocms 中实现 facebook 连接

> ID：10995515
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:14:11.543
> 
> 标签：php, facebook, codeigniter, pyrocms

我需要在基于 Pyrocms 的站点中实现 facebook 连接。用户模块工作正常，但现在我想让用户能够使用 facebook 帐户登录到该站点。所以请让我知道是否有任何附加组件可以满足我的要求或者我必须自己编写代码。我必须编写代码我必须遵循的算法......请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:52:10.420

使用[社交集成](http://www.pyrocms.com/store/details/social_integration)，您可以允许用户使用他们的 facebook 帐户登录，您只需要按照他们在本[主题](http://www.pyrocms.com/forums/topics/view/12505/10)中所说的那样修改控制器。它对我有用:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:39:46.653

您可以使用[社交整合](http://www.pyrocms.com/store/details/social_integration)插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T03:56:06.453

我已经在[http://dev.mypartyaid.com/users/login](http://dev.mypartyaid.com/users/login)完成了这个......

# javascript - 正则表达式在不破坏现有 HTML 代码的情况下转换链接中的主题标签

> ID：10995516
> 
> 赞同：4
> 
> 时间：2012-06-12T11:14:11.700
> 
> 标签：javascript, html, regex

我想将 javascript 字符串中的所有 URL 转换为链接，在这个字符串中还有以 # 开头的单词。

到目前为止，我在级联中创建了两个正则表达式，一个基于 url 创建 html 锚标签，另一个创建主题标签的锚标签（如在 Twitter 中）。

我在尝试将 www.sitename.com/index.php#someAnchor 解析为正确的标记时遇到了很多问题。

```
content = urlifyLinks(content);
content = urlifyHashtags(content); 
```

其中两个函数如下：

```
function urlifyHashtags(text) {
    var hashtagRegex = /^#([a-zA-Z0-9]+)/g;
    var tempText = text.replace(hashtagRegex, '<a href="index.php?keywords=$1">#$1</a>');

    var hashtagRegex2 = /([^&])#([a-zA-Z0-9]+)/g;
    tempText = tempText.replace(hashtagRegex2, '$1<a href="index.php?keywords=$2">#$2</a>');

    return tempText;
}

function urlifyLinks(inputText) {
    var replaceText, replacePattern1, replacePattern2, replacePattern3;

    replacePattern1 = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;
    replacedText = inputText.replace(replacePattern1, '<a href="$1" target="_blank">$1</a>');

    replacePattern2 = /(^|[^\/])(www\.[\S]+(\b|$))/gim;
    replacedText = replacedText.replace(replacePattern2, '$1<a href="http://$2" target="_blank">$2</a>');

    replacePattern3 = /(\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6})/gim;
    replacedText = replacedText.replace(replacePattern3, '<a href="mailto:$1">$1</a>');
    return replacedText;
} 
```

我正在考虑解析 urlifyLinks 的输出并将正则表达式应用于所有作为第一级文本元素的 dom 元素，这是一件丑陋的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T11:39:59.253

您可以通过使用带有回调函数替换的单个正则表达式来避免此问题。

[**例如：**](http://jsfiddle.net/PMVEy/)

```
function linkify(str){
    // order matters
    var re = [
        "\\b((?:https?|ftp)://[^\\s\"'<>]+)\\b",
        "\\b(www\\.[^\\s\"'<>]+)\\b",
        "\\b(\\w[\\w.+-]*@[\\w.-]+\\.[a-z]{2,6})\\b", 
        "#([a-z0-9]+)"];
    re = new RegExp(re.join('|'), "gi");

    return str.replace(re, function(match, url, www, mail, twitler){
        if(url)
            return "<a href=\"" + url + "\">" + url + "</a>";
        if(www)
            return "<a href=\"http://" + www + "\">" + www + "</a>";
        if(mail)
            return "<a href=\"mailto:" + mail + "\">" + mail + "</a>";
        if(twitler)
            return "<a href=\"foo?bar=" + twitler + "\">#" + twitler + "</a>";

        // shouldnt get here, but just in case
        return match;
    });
} 
```

![微博](../Images/1cf31e6eeb63058a7caee7d116bf7092.png)

# spring - 创建一个 Util 类并对其进行单元测试

> ID：10995519
> 
> 赞同：0
> 
> 时间：2012-06-12T11:14:25.323
> 
> 标签：spring, hibernate, unit-testing

在我的应用程序中，我需要对设备数据库进行高级搜索，所以我在我的服务接口中创建了这个函数：

`public List<Equipement> findByCriterias(SearchEquipement searchEquipement) ;`

我认为实现这个功能的最好方法是，因为我正在使用 Spring MVC 和 Hibernate，所以在我的 DAO 接口中添加一个函数：

`public List<Equipement> getByCriteria(org.hibernate.Criteria criteria) ;`

为了完成她的任务，该`findByCriterias`方法需要将 转换`searchEquipement`为 a `org.hibernate.Criteria`，因此我决定创建一个 util 类来执行此操作（尚未完成）：

```
public class ApplicationUtil {

private ClassPathXmlApplicationContext context = new
    ClassPathXmlApplicationContext("mmapp/util/application-context-util.xml") ;

private SessionFactory sessionFactory ;

public void setSessionFactory(){
    sessionFactory = (SessionFactory) context.getBean("sessionFactory") ;
}

public synchronized Criteria changeSearchEquipementToCriteria(SearchEquipementsearchEquipement) {
    setSessionFactory() ;
    Criteria criteria = sessionFactory.getCurrentSession().createCriteria(Equipement.class) ;
    return criteria ;
}
} 
```

问题是当我尝试对这部分进行单元测试时，我遇到了很多麻烦。

```
public class ApplicationUtilUnitTests {

    @Test
    public void testChangeSearchEquipementToCriteria(){
        ApplicationUtil util = new ApplicationUtil() ;
        Criteria criteria = util.changeSearchEquipementToCriteria(null) ;
        assertNotNull(criteria) ;
    }
} 
```

那是在其他几次尝试之后，现在我收到了这个错误： `org.hibernate.HibernateException: No Session found for current thread`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T01:04:44.990

尝试这个...

```
package com.om39a.spring.training.bean;

import org.hibernate.SessionFactory;
import org.hibernate.classic.Session;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.mockito.MockitoAnnotations;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;
import org.powermock.reflect.Whitebox;

@RunWith(PowerMockRunner.class)
@PrepareForTest(ApplicationUtil.class)
public class ApplicationUtilTest {

    private ApplicationUtil applicationUtil;

    @Mock
    SessionFactory mockSessionFactory;

    @Mock
    Session mockSession;

    @Before
    public void init() {
        MockitoAnnotations.initMocks(this);
        applicationUtil = PowerMockito.spy(new ApplicationUtil());
    }

    @Test
    public void testApplicationUtil() throws Exception {
        Whitebox.setInternalState("sessionFactory", mockSession);
        PowerMockito.doNothing().when(applicationUtil, "setSessionFactory");
        Mockito.when(mockSessionFactory.getCurrentSession()).thenReturn(
                mockSession);
        applicationUtil.changeSearchEquipementToCriteria(null);
        /* ...
         * ...
         * ...
         * Assert statments goes here 
         * ...
         * ...
         * ...
         */
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:16:35.023

我相信你的答案就在[这篇文章](https://stackoverflow.com/a/400598/248082)中。您正在将*集成测试*与*单元测试*混合使用。根据您的要求，您可以做的是：

*   使用 Mockito、PowerMock、EasyMock 等模拟 API 或任何适合您的 API
*   模拟 Hibernate 的基本功能，例如`SessionFactory`、`Session`和`Criteria`（例如[这篇文章](https://stackoverflow.com/a/9415513/248082)）
*   现在，您可以执行单元测试来验证您的方法是否正常工作

# xamarin.android - 如何稳定 Android 单声道的内存负载

> ID：10995528
> 
> 赞同：1
> 
> 时间：2012-06-12T11:15:16.943
> 
> 标签：xamarin.android

像 CPU 模拟一样，我需要编写一个应用程序，该应用程序可以在一定时间内以预设值（例如，30%、50%、90% 等）模拟高内存使用情况。这意味着它将需要两个输入（内存值和持续时间）。假设我使用 50% 的内存使用和 2 分钟的持续时间）。这意味着当我运行应用程序时，它应该占用 50% 的内存 2 分钟。有什么想法可以实现吗？

任何帮助请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:02:15.423

您可以像这样模拟内存泄漏（取自[此线程](https://stackoverflow.com/questions/3019239/c-sharp-simulate-memory-leaks)）：

```
var list = new List<byte[]>();
while (true)
{
  list.Add(new byte[1024]); // Change the size here.
} 
```

[与我为模拟特定时间量的 CPU 负载而](https://stackoverflow.com/questions/10910663/simulate-cpu-usage-in-mono-for-android)编写的应用程序类似，您只需创建一个分配一定量内存的方法并创建一个计时器，当它用完时，清除列表，然后调用垃圾收集器。

您必须注意，如果您分配太多内存，您的系统可能会变得无响应并且您可能会崩溃。

# java - EJB/JPA：如何使用 EntityManager.persist() 始终插入新记录，而不是更新

> ID：10995533
> 
> 赞同：1
> 
> 时间：2012-06-12T11:15:26.927
> 
> 标签：java, jpa, ejb

EntityManager.persist() 函数正在尝试更新现有记录，但我总是需要**插入**新记录。如何做到这一点？

实体 bean 的一部分：

```
@Entity
@Table(name="SYNC_TRIGGER", schema="ETL")
public class SyncTrigger implements Serializable {

    @Id
    @Column(name="ID")
    @SequenceGenerator(name = "TRIGGER_SEQ", sequenceName = "ETL.TRIGGER_SEQ")
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "TRIGGER_SEQ")
    private Long triggerId;
...... 
```

Stateless bean 的一部分，它保留了记录：

```
@Stateless
public class TriggerPersister {

    @PersistenceContext(unitName="syncTriggerDS") 
    protected EntityManager entityManager;

    public <T extends GenericTrigger> void persistTrigger(SyncTrigger 
            st, T concreteTrigger){

            entityManager.persist(st);
......... 
```

UPD：在 entityManager.persist(st) 执行之前，st.triggerId 值为 null，但在之前添加的记录的 -id 之后分配给该字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:19:45.340

[`EntityManager.persist()`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#persist%28java.lang.Object%29)总是试图创建一个新的托管对象。`EntityExistsException`如果您在已管理的实体上调用它，它会抛出一个。

您必须`merge()`用于更新。

有关这两种方法，请参阅 javadoc。

# hibernate - Hibernate：我们究竟需要在哪里关闭 SessionFactory 对象

> ID：10995535
> 
> 赞同：3
> 
> 时间：2012-06-12T11:15:28.440
> 
> 标签：hibernate, sessionfactory

我正在为我的 Application 使用 Hibernate 3 版本。

在浏览有关 Hibernate 的教程时，我发现`SessionFactory`应该只为应用程序创建一次。因此，为此我决定在类中使用静态块和静态方法来返回它，如图所示。

```
public class SessionFactoryInitiliaztion {
    static {
        try {
            sessionFactory = new Configuration().configure().buildSessionFactory();
        } catch (Exception x) {
            x.printStackTrace();
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

我究竟需要在哪里关闭这个`sessionFactory`对象，以便它转售内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T11:26:12.610

我想不出任何理由（临时）为什么要在应用程序存在时关闭会话工厂，所以我不会太担心回收内存。当您的应用程序关闭时，我会关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T21:49:39.780

这似乎是一个错误，但是使用“弃用”配置， sessionFactory 会正确关闭：

```
 Configuration configuration = new Configuration().configure();
    sessionFactory = configuration.buildSessionFactory(); 
```

# postgresql - 捆绑安装忽略 pg gem

> ID：10995540
> 
> 赞同：0
> 
> 时间：2012-06-12T11:15:45.287
> 
> 标签：postgresql, bundle-install

当我键入“gem install pg”时，我会收到一条消息，说明 gem 已与文档一起安装。

但是当我在 gemfile 中输入“gem 'pg'”并输入“bundle install”时，它表示捆绑已完成。但是，如果我输入“bundle show pg”，它会说它在当前包中找不到“pg”。因此，像“rake db:create:all”这样的命令会返回“没有要加载的文件--pg”

我在 Ubuntu 11.04、Rails 3.0.11 和 ruby​​ 1.9.2 上运行。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:38:42.883

我设法通过删除我的 Gemfile.lock 然后再次运行 bundle install 来解决这个问题。我不确定为什么会这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T16:54:45.637

我是如何解决这个问题的：我在“GEM”部分的 Gemfile.lock 中找到了该字符串：

> pg (0.15.1-x86-mingw32)

但我在 x64 操作系统（Windows 7 64）上工作，“gem list”向我显示“pg”gem 为：

> pg (0.15.1 x64-mingw32)

因此，我将 Gemfile.lock 中的字符串替换为：

> pg (0.15.1-x64-mingw32)

我的项目有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-22T23:28:37.693

在 Linux 上，我必须安装这两个开发库

```
sudo apt-get install postgresql
sudo apt-get install pgadmin3
bundle install 
```

那对我有用:)

# java - 使用 jsf 和 tomcat 7.0 从 Eclipse 部署动态 Web 应用程序时出现 NoClassDefFoundError

> ID：10995544
> 
> 赞同：0
> 
> 时间：2012-06-12T11:15:55.287
> 
> 标签：java, jsf-2, jstl, noclassdeffounderror

部署我的 jsf 应用程序时出现此错误

```
java.lang.NoClassDefFoundError: javax/servlet/jsp/jstl/core/Config
    at com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:345)
    at com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apace.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:22:10.753

我的猜测是所需的 jar 不在您的类路径中。

确保你的 WEB-INF/lib 有 jstl.jar

或者如果您使用 Maven 将其添加到您的 pom.xml

```
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>servlet-api</artifactId>
  <version>2.5</version>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>javax.servlet.jsp</groupId>
  <artifactId>jsp-api</artifactId>
  <version>2.1</version>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>jstl</artifactId>
  <version>1.2</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:50:35.303

**JSTL 库似乎不见了**

1）请在此处添加jstl jar是下载 [链接](http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar)

如果您使用的是 Maven 项目

2）在 pom.xml 中添加依赖

```
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>jstl</artifactId>
  <version>1.2</version>
</dependency> 
```

# dojo - Dojo Tree：从 *unformatted* json 到预期格式的桥梁

> ID：10995545
> 
> 赞同：1
> 
> 时间：2012-06-12T11:16:04.457
> 
> 标签：dojo

我对Dojo（1.7）很陌生，对AMD加载程序和全球哲学感到非常兴奋，然后以为我红了几十个文档并google了很多，我的大脑开始烧烤，我仍然无法理解并执行一些操作：我想显示*任何*JSON 类型的 dijit.Tree，就像 JSON 编辑器一样，因为我还使用持久 JSON 文件来存储少量数据（不仅用于 GET/.../ 传输）。这是我的期望：

*   示例 JSON：`{"infos":{"address":"my address","phone":"my phone"},"insurance":{"forks":[14,53,123],"prices":[5,8,"3%"]}}`
*   显示任何 JSON 的不同变量：root child 是 root json 变量，children L1 是 root 变量，等等......并且在 json 变量类型（字符串、数字、对象、数组）上，我还将显示一个相应的图标
*   不必一次性解析整个 json 并对其进行格式化，例如首先显示根节点，然后格式良好的子节点使用 getChildren 方法，例如，它是在 expando 上逐步完成的（就像一个懒惰的加载）。我已经用 javascript 制作了自己的 Trees 类，更灵活的方法是我给构造函数提供了一个 dataRoot、一个 renderItem(dataItem, domItem) 和一个 getChildren(dataItem)，这样我就可以执行并返回我想要的所有内容，只有 Tree仅在需要时执行渲染，树不知道数据结构也不修改它，但我不确定为什么 dijit.Tree 需要如此严格的构建方式......

这是我的最后一次尝试，它可能完全不是正确的方法，（也许我必须子类化）但据我所知，我需要玩 3 个类（dojo 商店、树模型和树小部件），但首先它似乎模型无法获取根节点，请查看我的不同代码注释。所以请有耐心的人可以给我一个简单的例子和​​一些清晰的解释（是的，我有点要求），至少是构造函数选项的正确必要变量列表，我需要开始显示我的一个漂亮的树视图json文件，我完全迷路了，非常感谢！

```
...
// before there is the AMD part that load the needed things
Xhr.get({ url:'data/file.json', handleAs:'json',
    load: function(data){
        console.log('xhr.loaded : ', data);// got my javascript object from the json string
        var store = new ItemFileReadStore({// is it the right store I need ??
            // or the Memory store ?
            // assuming later I'll need to save the data changes 
            rootId : 'root',// 
            rootLabel : 'Archive',// useless ? isn't it the model responsability ?
            data : {id:'root', items:[data]}// trying to give a root node well formatted
        });
        var model = new TreeStoreModel({
            store : store,
            getChildren : function(obj){
                // firstly here it seems the root is not found
                // I got a 'error loading root' error
                // what is missing in my instanciations ??
                // what is exactyly the type of the 1st arg : a store ?
                console.log('getChildren : ', this.get(obj.id));
            },
            mayHaveChildren : function(){
                console.log('mayHaveChildren ', arguments);
                return true;
            }
        });
        var tree = new Tree({
            model: model
        }, domId);
        tree.startup();
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T06:51:14.067

我的解决方案基于[Connecting a Store to a Tree 的](http://dojotoolkit.org/documentation/tutorials/1.7/store_driven_tree/)`dojo/store/Memory`启发：

![在此处输入图像描述](../Images/b0596826ebc85971b01c2bbc2701b4bd.png)

[您可以在http://egoworx.com/](http://egoworx.com/)找到现场演示或从[dropbox](http://dl.dropbox.com/u/2131149/tree.zip)下载完整的源代码。

现在编码。首先`dojo/store/Memory`：

```
var data =  {"infos":{"address":"my address","phone":"my phone", "gift": false, "now": new Date()},"insurance":{"forks":[14,53,123],"prices":[5,8,"3%"]}};

var store = new Memory({

  data: data,

  mayHaveChildren: function(object) {
    var type = this.getType(object);
    return (type == "Object" || type == "Array");
  },

  getChildren: function(object, onComplete, onError) {
    var item = this.getData(object);
    var type = this.getType(object);
    var children = [];

    switch(type) {
      case "Array":
        children = item;
        break;
      case "Object":
        for (i in item) {
          children.push({label: i, data: item[i]});
        }
        break;
    }
    onComplete(children);
  },

  getRoot: function(onItem, onError) {
    onItem(this.data);
  },

  getLabel: function(object) {
    var label = object.label || object + "";
    var type = this.getType(object);

    switch(type) {
      case "Number":
      case "String":
      case "Boolean":
      case "Date":
        var data = this.getData(object);
        if (data != label) {
          label += ": " + this.getData(object);
        }
    }

    return label;
  },

  getData: function(object) {
    if (object && (object.data || object.data === false) && object.label) {
      return object.data;
    }
    return object;
  },

  getType: function(object) {
    var item = this.getData(object);
    if (lang.isObject(item)) {
      if (lang.isArray(item)) return "Array";
      if (lang.isFunction(item)) return "Function";
      if (item instanceof Date) return "Date";
      return "Object";
    }

    if (lang.isString(item)) return "String";
    if (item === true || item === false) return "Boolean";
    return "Number";
  },

  getIconClass: function(object, opened) {
    return this.getType(object);
  }    
}); 
```

请注意，我在您的数据中添加了*布尔值*和*日期*类型。

`dijit/Tree`基于这家商店：

```
var tree = new Tree({
    model: store,
    persist: false,
    showRoot: false,
    getIconClass: function(object, opened) {
      if (lang.isFunction(this.model.getIconClass)) {
        return this.model.getIconClass(object, opened);
      }
      return (!item || this.model.mayHaveChildren(item)) ? (opened ? "dijitFolderOpened" : "dijitFolderClosed") : "dijitLeaf";
    }
  }, "placeholder");

tree.startup(); 
```

最后是显示数据类型图标的样式表：

```
.dijitTreeIcon {
  width: 16px;
  height: 16px;  
}

.Object {
  background-image: url(http://dojotoolkit.org/api/css/icons/16x16/object.png);
}

.Array {
  background-image: url(http://dojotoolkit.org/api/css/icons/16x16/array.png);
}

.Date {
  background-image: url(http://dojotoolkit.org/api/css/icons/16x16/date.png);
}

.Boolean {
  background-image: url(http://dojotoolkit.org/api/css/icons/16x16/boolean.png);
}

.String {
  background-image: url(http://dojotoolkit.org/api/css/icons/16x16/string.png);
}

.Number {
  background-image: url(http://dojotoolkit.org/api/css/icons/16x16/number.png);
} 
```

由于我目前在中国，因此无法访问 jsFiddle，但我将在返回欧洲后将代码放在那里并在此处发布链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:00:05.877

尝试这样的事情：

```
store = new dojo.data.ItemFileWriteStore({
                url : "",
                data: {
                    identifier: "id",
                    label   : "label",
                    items   : [{
                        id      : "root",
                        label   : "root",
                        type    : "root",
                        children: [data]
                    }]
                }
            }); 
```

通常也避免覆盖树函数，您可以扩展它们，但要小心。如果你想控制台.log，那么宁愿连接到他们......

ItemFileReadStore 是一个只读存储，因此不是您想要“保存修改”的存储。您可以尝试使用 ItemFileWriteStore 或 JsonRest 等。

# .net - 包含逗号和 unicode 字符时，发件人和回复字段混乱

> ID：10995546
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:16:04.480
> 
> 标签：.net, email, unicode, utf-8, mailmessage

在 .net 中，当 From 和 Reply-to 字段的值同时包含逗号和 utf-8 字符时，我遇到了问题。让我更好地解释一下：

我用这个：

```
Dim Mail As New MailMessage
.....
Mail.From = New MailAddress(MailAddressFrom, mailFromName, System.Text.Encoding.UTF8) 
```

我已经用这三个值进行了测试`mailFromName`：

1.  “美国广播公司，美国广播公司”
2.  “艾欧”
3.  “æøå，æøå”

收到邮件时的结果（请注意，示例 3 严重失败）：

1.  来自：“ABC，ABC”
2.  来自：“æøå”
3.  来自：=?utf-8?Q?=C3=A6=C3=B8=C3=A5,_=C3=A6=C3=B8=C3=A5?=

那么我哪里出错了，应该转义逗号以及如何转义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:12:19.630

不，您的 FROM 编码完美。逗号不是特殊字符，并且您正确编码了空格。除非我们看不到其他问题，否则这是您的电子邮件应用程序。您是否尝试过发送到其他电子邮件帐户，可能是基于网络的，例如 GMail、Yahoo 或 Hotmail？

# android - 带有 Android/Linux 的低功耗蓝牙（蓝牙 4.0）

> ID：10995551
> 
> 赞同：1
> 
> 时间：2012-06-12T11:16:13.727
> 
> 标签：android, linux, linux-device-driver, bluetooth-lowenergy

是否有可用的库允许应用程序在 Linux 中使用蓝牙 LE？

同样，我知道摩托罗拉 RAZR 提供专有 API，但其他具有双模蓝牙芯片（即 Galaxy S III）的设备是否提供蓝牙 LE 的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:22:39.937

至于Linux...

我一直在用 Python 做很多工作，不幸的是，现有的 LE 库要么是最前沿的，要么是缺少一些东西。Bluez 5.X 系列通过 DBUS 支持 LE。它的内核要求比我需要使用的设备要高得多，所以我不得不使用原始套接字来做事。

对于 Bluez 4.x，我认为一切都可以通过使用原始套接字、设置套接字选项以及偶尔调用 ioctl 来完成。然而，在 Python 中，很多你需要的常量还不存在。我不得不使用 Python C API 将一些模块组合在一起，以便我可以从库头文件中导入常量。如果你可以在 C 中做所有事情，你会在那里找到完整的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:26:28.853

我知道很多人都在使用[Broadcom BLE](http://code.google.com/p/broadcom-ble/)在 Android 设备上开发 BLE。

# javascript - Twitter Javascript OAuth：在没有服务器端的情况下获取访问令牌

> ID：10995556
> 
> 赞同：2
> 
> 时间：2012-06-12T11:16:35.447
> 
> 标签：javascript, html, twitter, twitter-oauth

我找到了几个答案和解决方案，但其中大部分都以某种方式集成了服务器端助手。

我需要类似 Facebook OAuth Javascript for Twitter 的东西。

所需的流量应该是（与提供的相同`FB.login()`）：

*   用户单击“授权此应用使用我的帐户”按钮/链接
*   ( *le wild* ) 弹出窗口出现
*   用户将被允许登录并允许或拒绝我的 Twitter 应用程序的授权
*   弹出窗口将关闭，javascript**回调将获取访问令牌**

不使用**任何我的自定义**服务器端页面。
我无法从开发文档中读出如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:16:12.893

您可以使用 Twitter 的 @Anywhere 让用户通过 JavaScript 登录到他们的帐户。例如看这里：

[http://dev.twitter.com/anywhere/begin#login-signup](http://dev.twitter.com/anywhere/begin#login-signup)

用户登录后，您可以从客户端和服务器检查他们的登录状态。在客户端，只需使用他们提供的功能，在服务器上，您可以验证 cookie。该页面中也对此进行了描述。

[http://dev.twitter.com/anywhere/begin#current-user](http://dev.twitter.com/anywhere/begin#current-user)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T15:42:54.070

然后，他们意识到这存在安全问题，并宣布他们将很快关闭此方法：

“@Anywhere 已弃用，并将于今天（2013 年 3 月 5 日）停止运行。有关更多信息，请参阅取消 @Anywhere。”

# iphone - XMPPFramework 不发送存在

> ID：10995559
> 
> 赞同：2
> 
> 时间：2012-06-12T11:16:51.933
> 
> 标签：iphone, xcode, xmppframework

我正在为 iPhone 开发一个应用程序，其中一个功能是使用 XMPPFramework 的即时消息系统。到目前为止，我正在使用 Google Talk 对其进行测试。委托与管理用户界面的类相同。所以，我得到了这个代码：

在 viewDidLoad 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self setupStream];
} 
```

setupStream 方法：

```
- (void) setupStream
{
    NSLog(@"Inside setupStream");
    xmppStream = [[XMPPStream alloc] init];
    [xmppStream addDelegate:self delegateQueue:dispatch_get_main_queue()];
    [self connect];
} 
```

连接方法：

```
- (BOOL) connect
{
    NSLog(@"Inside connect method");

    General *general = [General sharedManager];//this is a singleton to manage settings for every user
    NSString *chatid;
    NSString *chatpass;

    //chatid=[general user];
    chatid=@"somegmailaccount@gmail.com";
    xmppStream.myJID=[XMPPJID jidWithString:chatid];

    if (![xmppStream isDisconnected]) {
        return YES;
    }

    NSError *error = nil;
    if (![xmppStream connect:&error])
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error"
            message:[NSString stringWithFormat:@"Can't connect to server %@", [error localizedDescription]]
            delegate:nil
            cancelButtonTitle:@"Ok"
            otherButtonTitles:nil];
        [alertView show];

        return NO;
    }

    return YES;
} 
```

在 xmppStreamDidConnect 方法中：

```
- (void) xmppStreamDidConnect:(XMPPStream *)sender
{
    [xmppStream authenticateWithPassword:@"password" error:NULL];
    [self goOnline];
} 
```

和 goOnline 方法：

```
- (void) goOnline
{
    XMPPPresence *presence = [XMPPPresence presence];
    [[self xmppStream] sendElement:presence];
    NSLog(@"Presence sent");
} 
```

这样，就不会发送出席信息。我有另一个谷歌帐户，我尝试进行测试（例如，testing@gmail.com），并且在这个帐户中没有看到 somegmailaccount.gmail.com 的存在。两个帐户相互关联并且相互了解，因为我使用相同的帐户来开发 Android 应用程序。

知道我做错了什么吗？任何帮助表示赞赏。

非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T07:48:56.590

我找到了！存在不是以这种方式发送的：

```
XMPPPresence *presence = [XMPPPresence presence];
[[self xmppStream] sendElement:presence]; 
```

Insted，我是这样做的：

```
NSXMLElement *presence = [NSXMLElement elementWithName:@"presence"];
[xmppStream sendElement:presence]; 
```

这样，发送状态没有任何问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:14:37.920

使用此代码，我实现了 xmppStreamDidAuthenticate:(XMPPStream *)sender 方法，并且程序在没有来自我的代码的任何调用的情况下进入该方法。但如果我把

```
[xmppStream setHostName:@"talk.google.com"];
[xmppStream setHostPort:5222]; 
```

...在方法连接中，程序不输入该方法，也不输入 xmppStreamDidConnect。

我要生气了。

# iphone - 将 NSDictionary 或字符串从一个应用程序传递到另一个应用程序 iPhone

> ID：10995563
> 
> 赞同：0
> 
> 时间：2012-06-12T11:16:59.240
> 
> 标签：iphone, objective-c, xcode, ipad, nsstring

我必须将字典中存在的数据从一个应用程序发送到另一个应用程序，该应用程序必须在那里使用。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:22:29.933

我不确定该怎么做，但我认为您可能需要为此使用自定义 URL 方案。这是一个链接，可以帮助您[注册您的 URL Scheme，然后使用它。](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:25:30.337

至少您可以将它作为自定义 url 的字符串参数（如`thesecondapp://data_string_goes_here`）传递，然后从传递给它的应用程序中解析它

看看如何编码`NSData`到`NSString` [这里](https://stackoverflow.com/questions/2467844/convert-utf-8-encoded-nsdata-to-nsstring)。

**编辑：**您还应该看看[application:openURL:sourceApplication:annotation:](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:openURL:sourceApplication:annotation:)方法实现示例。它可能更复杂一点，但它似乎比仅仅传递一个原始字符串更“原生”。 [以下](https://stackoverflow.com/questions/4259383/counterpart-to-applicationopenurlsourceapplicationannotation)是如何从另一个应用程序调用此方法的“对应方”的信息。

# jquery - 使用 .properties 文件中的数据加载 Jquery

> ID：10995564
> 
> 赞同：1
> 
> 时间：2012-06-12T11:17:00.870
> 
> 标签：jquery, ajax, dashboard, igoogle

我正在开发一个仪表板，它显示从众多来源接收到的大量图形、表格和其他数据。图表、表格等基本上都是小部件。我需要使仪表板可定制。这样每个用户在登录后都可以自定义仪表板的外观。它有点像 iGoogle - 带有我自己的小部件。

问题：

存储和检索用户特定属性的最佳方法是什么

*   小部件的顺序。
*   动画序列。
*   刷新率
*   等等。

我应该为每个用户使用一个属性文件，并从中读取配置还是使用数据库 [table]？有很多配置参数，所以在数据库方法的情况下，配置表中的列数可能非常大[比如 40 到 50]。

[在效率和安全性方面] 将数据存储在属性文件中并使用 AJAX 访问它是一种不好的做法吗？

请善意建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:07:38.823

对于少数用户来说，属性文件可以正常工作。

我会选择一个数据库。50 列确实不算多，尽管一旦开始，可能很容易将其规范化为几个较小的表。

您没有说配置有多重要，可能是您可以将其存储在 cookie 或 HTML5 允许的某种本地数据库中。

# c# - RADIUS 和 EAP 计算 Message-Authenticator

> ID：10995568
> 
> 赞同：3
> 
> 时间：2012-06-12T11:17:19.530
> 
> 标签：c#, hmac, radius

在实现支持 EAP-MD5 身份验证的 RADIUS 服务时，我一直在阅读 RFC 3579。不幸的是，我有点不确定如何解释 RFC，尤其是在尝试计算 Message-Authenticator 时。

我基本上创建了一个 HMAC-MD5 对象（我正在使用 C#）使用 NAS 的共享密钥作为密钥并连接类型（一个字节）+标识符（一个字节）+长度（两个字节）+请求验证器（16 个字节） + 所有属性（Access-Request 中的 Message-Authenticator 除外）但计算的值与数据包中的值不匹配。

遵循 RFC，这似乎是正确的。我是否正确解释了 RFC？

这是代码：

```
RadiusPacket packet = Objects.Packet;

byte[] toHMAC;
toHMAC = new byte[1] { (byte)packet.Code };
toHMAC = ByteArray.Combine(toHMAC, new byte[1] { packet.Identifier });
// reversed to match endian of packet
toHMAC = ByteArray.Combine(toHMAC, ByteArray.Reverse(packet.LengthAsBytes));
toHMAC = ByteArray.Combine(toHMAC, packet.Authenticator);

for (int i = 0; i < packet.Attributes.Length; i++)
{
    if (packet.Attributes[i].Type != RadiusAttributeType.MessageAuthenticator)
    {
        toHMAC = ByteArray.Combine(toHMAC, packet.Attributes[i].RawData);
    }
}

HMACMD5 md5 = new HMACMD5(Encoding.ASCII.GetBytes(Objects.NAS.SharedSecret));

// this DOES NOT match what is in the received packet...
byte[] hmac = md5.ComputeHash(toHMAC); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:28:24.713

我通过重新阅读 RFC 和查看 JQuery 中的一些源代码找到了答案。这是我为其他任何具有相同功能的人发现的

RFC (3579) 内容如下：

“当计算消息完整性检查时，签名字符串应该被认为是十六个八位字节的零。”

收到访问请求数据包后，我用 16 个零字节替换了现有的消息验证器，然后 HMAC-MD5 整个数据包，并将计算值与数据包中的消息验证器进行比较。

代码要简单得多（我从 Wireshark 捕获创建了一个测试数据包）：

```
// a radius-eap packet captured from wireshark
RadiusPacket packet = new RadiusPacket(ByteArray.FromHex("017600ad375be8f596e90bcffc5e32929d14275b04060a3e01ee05060000c3513d060000000f011f686f73742f64727377696e377472616379702e6472736c2e636f2e756b1e1330302d31322d30302d45332d34312d43311f1342342d39392d42412d46322d38412d44360606000000020c06000005dc4f240200002201686f73742f64727377696e377472616379702e6472736c2e636f2e756b5012c93ef628690a578b31709b0bbccade41"));

// identical packet that I can zero out MA for testing
RadiusPacket radiusPacketCopy = new RadiusPacket(ByteArray.FromHex("017600ad375be8f596e90bcffc5e32929d14275b04060a3e01ee05060000c3513d060000000f011f686f73742f64727377696e377472616379702e6472736c2e636f2e756b1e1330302d31322d30302d45332d34312d43311f1342342d39392d42412d46322d38412d44360606000000020c06000005dc4f240200002201686f73742f64727377696e377472616379702e6472736c2e636f2e756b5012c93ef628690a578b31709b0bbccade41"));

// zero out MA
radiusPacketCopy.ZeroMessageAuthenticator();

// hash it up
HMACMD5 md5 = new HMACMD5(Encoding.ASCII.GetBytes("mykey"));
byte[] hmac = md5.ComputeHash(radiusPacketCopy.RawPacket);

// the message authenticator MUST be correct
if (!ByteArray.AreEqual(hmac, packet.MessageAuthenticator))
{
    // etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T16:05:44.947

您的代码很接近，但不完全在那里。您正在`Message-Authenticator`完全剥离该属性。

相反，它应该保留在数据包中的原始位置，但该`value`属性的 16 字节字段应该用零覆盖。

# tomcat - 如何使用 Active Directory 对 Java Web 应用程序进行 SSO

> ID：10995572
> 
> 赞同：3
> 
> 时间：2012-06-12T11:17:39.573
> 
> 标签：tomcat, active-directory, spring-security, single-sign-on

我有一个企业网络，用户通过**Active Directory**登录并部署一个使用**Spring Security**并在**Tomcat**上运行的 Java Web 应用程序。因此，我想创建这种**单点登录**机制，使用户在登录到 Active Directory 上的帐户后无需输入凭据即可登录 Intranet 网站。

简而言之，人们正在通过活动目录登录并且不想再次登录到 Intranet Web 应用程序，因此我必须获取他们的会话并相应地完成身份验证和授权步骤。

我认为我应该实现 Java 和 Spring Security NTLM 身份验证。

我可能会考虑使用 OpenAM 或 JASIG Cas 等。

我会使用什么样的结构，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T02:06:53.043

如果您想阻止用户写入登录名和密码并自动登录，我建议您使用 Spring [Security Kerberos/SPNEGO Extension](https://spring.io/blog/2009/09/28/spring-security-kerberos-spnego-extension)。如果您使用 JASIG Cas，用户将被重定向到 CAS 登录页面并输入他们的凭据。

# winforms - 在任务中创建线程

> ID：10995575
> 
> 赞同：0
> 
> 时间：2012-06-12T11:17:43.743
> 
> 标签：winforms, multithreading, c#-4.0, timer, task

我有一个方法 UploadReportNotifier() 订阅了一个事件，一旦我完成将数据上传到数据库，就会引发该事件。在 UploadReportNotifier() 中，我想重置我的 GUI 上的一些值，即进度条等，但我希望在执行此操作之间有一个时间延迟。

是否可以在 UploadReportNotifier() 中创建一个线程并调用 thread.Sleep，或者 timer() 类更合适？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:00:37.823

如果您的目标是在执行后等待一段时间`UploadReportNotifier`再更新所有 GUI 控件，那么计时器将是 IMO 的一个很好的解决方案。

在您的`UploadReportNotifier`方法中，您可以创建并启动一个计时器，以便您的“更新我的 GUI”代码将在一段时间后执行。不要忘记在您的 GUI 更新后停止/处置您的计时器，因为您可能不希望它被多次执行。

您可以使用[`System.Windows.Forms.Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)计时器类（您可能知道，有多个计时器类可用）。这个不是最准确的，但是它在 UI 线程中执行代码，所以你在修改 UI 时不会处理跨线程异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:01:14.127

我看到你已经找到了你的解决方案。我只想提一下，在这种情况下，您应该始终选择计时器而不是`Thread`+ `Sleep`，这只是一个丑陋的 hack，应该始终避免。

计时器很棒，因为它们还能够在 GUI 线程上执行它们的代码，所以你不需要使用`Invoke`or `BeginInvoke`。例如`System.Windows.Forms.Timer`对于 WinForms 或`System.Windows.Threading.DispatcherTimer`WPF。

# javascript - 如何模拟用户使用javascript（JQuery）按下Ctrl“加号”加号或减号？

> ID：10995592
> 
> 赞同：4
> 
> 时间：2012-06-12T11:18:36.610
> 
> 标签：javascript, jquery, windows, macos

如果我单击锚链接以模拟我按下`Ctrl+`键盘上的键（或 Mac 上的等效键），这可能吗？如果是的话，你能告诉我怎么做吗？

就像是

```
<a href="#" onclick="simulateCtrlKeyPlus();return false;">Ctrl+</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:23:33.550

我很确定您需要在浏览器 API 级别访问它，因为并非所有浏览器都具有此功能或以相同的方式执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:36:11.960

如果只想模拟 CTRL+鼠标滚轮缩放功能的行为，可以使用 CSS3-Transitions。一个很好的 jQuery 插件是[jquery Transit](http://ricostacruz.com/jquery.transit/)。

例子：

```
$('a.ctrlplus').click(function() {
  $('body').transition({ scale: ($('body').css('scale')+0.1) });
}); 
```

不知道它是否适用于所有浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T11:23:16.047

我不明白你要实现什么，但[这里](http://www.openjs.com/scripts/events/keyboard_shortcuts/)有一个插件，它使处理键盘快捷键变得非常容易。

这是一个例子

```
shortcut.add("Ctrl+Shift+X",function() {
alert("You have pressed Ctrl+____");
}); 
```

希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-01T00:21:10.443

要模拟缩放功能，可以使用 CSS 属性“缩放”。对于 JS，它就像：

```
function simulateCtrlKeyPlus() {
   let currentZoom = parseFloat(document.body.style.zoom) || 1
   document.body.style.zoom = currentZoom * 1.1
} 
```

# javascript - 自动更改滑块值jquery

> ID：10995593
> 
> 赞同：0
> 
> 时间：2012-06-12T11:18:36.883
> 
> 标签：javascript, jquery, jquery-ui, slider

如何在 onload 上更改 jQuery ui 滑块的值？

实际上我需要的是“自动滑块”，它会自动改变......

首先我习惯`settimeout`了 3000，所以 3000 毫秒后它会开始工作。

改变我使用的价值是

```
$("selector").slider("value",0); // this is the first option 
```

完成第一个值更改后，我需要将其更改为第二个，第三个等..

我试过`delay`了，但它仍然会立即改变值..

```
$("selector").slider("value",0).delay(2500).slider("value",45); //not working it changing to 45 
```

我该如何实施？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:29:54.823

否则你可以使用 setTimeout

```
var val = 10;
var one = function() {
    $("#slider").slider("value", val);
    setTimeout(function() {
        val = val + 10;
        $('#slider').slider("value", val);
        if( val < 100 ){
            one();
        }
    }, 100);
};

one();
​ 
```

[演示](http://jsfiddle.net/dhirajbodicherla/HfYHH/1/)

# sharepoint-2007 - 是否可以限制用户访问列表，但可以通过 Code.+ sharepoint 2007 访问该列表

> ID：10995594
> 
> 赞同：1
> 
> 时间：2012-06-12T11:18:41.980
> 
> 标签：sharepoint-2007

我想限制用户访问列表。我有一个访问该列表的自定义 Web 部件。但是如果我限制访问，代码也无法访问它并抛出异常。

那么有没有办法让用户无法通过浏览器访问列表，但用户访问的Webpart可以呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:40:48.290

是的，最好的方法是使用系统帐户打开包含站点集合：

```
SPWeb ctxWeb = SPContext.Current.Web;
using (SPSite adminSite= new SPSite(ctxWeb.Site.ID, SPUserToken.SystemAccount))
{  
  using (SPWeb adminWeb = adminSite.OpenWeb(ctxWeb.ID))
  {
    SPList adminList = adminWeb.Lists["TheRestrictedList"]; 
  } 
} 
```

从使用特定用户令牌打开的网站集中检索到的每个对象都表现为给定用户直接访问该元素。

由于我们`SPSite`使用系统帐户令牌打开，因此无论登录用户如何，我们都可以完全控制对象。

# asp.net - CSS 表单，表单右侧有宽度和验证错误消息

> ID：10995596
> 
> 赞同：1
> 
> 时间：2012-06-12T11:18:49.077
> 
> 标签：asp.net, html, css, formatting

我有一个简单的 html 表单。此表单具有特定的宽度和边距，因此表单位于屏幕中间。

```
form 
{
    margin: 0px auto;
    padding: 0;
    min-width: 600px;
    width: 650px;
} 
```

我验证是否所有文本框都已填充。我将 asp:RequiredFieldValidator 与自己的 css 类一起使用

```
.ErrorMessage
{
    position:relative;
    left: 80px;
    width: 150px;
    font-weight: bold;
    display:inline;
} 
```

但是由于表单的最大宽度，错误消息不会立即显示在表单之外。错误消息将中断到第二行。我不能使用绝对位置，因为表单位于屏幕中间。

问题是表单有边框，我无法扩展最大宽度。这是一个截图：[http ://suffball.de/form_error.png](http://suffball.de/form_error.png)

我怎样才能把错误信息放在表格的右边？我需要一个没有 javascript 的解决方案。

这可能吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:29:53.673

更改您的`.ErrorMessage`Css 类，如下所示：

```
.ErrorMessage
{
    position:relative;
    left: 80px;
    width: 150px;
    font-weight: bold;
    display:inline;
    float: right;
} 
```

希望这能解决您的问题。

# sas - 在整个 SAS 项目中创建用户提示

> ID：10995599
> 
> 赞同：0
> 
> 时间：2012-06-12T11:19:00.013
> 
> 标签：sas, prompt

我正在使用 SAS Enterprise Guide 5.1，我有一个由 4 个导入语句和 4 个 sas 程序组成的项目。SAS 程序连接到 Teradata 并删除表、创建和加载表、创建索引（在 Teradata 中）、授予角色，最后收集统计信息。

我的问题是这个。

我怎样才能让用户（使用企业指南）开始运行这个项目，一次交互式地提供他们的用户名和密码，这样他们就不必在四个 sas 脚本中的每一个中存储该信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:09:07.470

您可以将提示应用于您的程序之一。您可以在提示创建期间选择允许提示值（宏变量）在整个项目期间可用。

[使用 SAS® Enterprise Guide® Prompt Manager 创建可重用程序](http://support.sas.com/resources/papers/proceedings11/309-2011.pdf)

**更新：** 在大多数情况下，提示 NAME 是宏变量 (&name)...但是，某些提示类型（TEXT 除外）会创建 1 个以上的宏变量（DATERANGE 创建 8 个）。您可以在 PROMPT MANAGER（视图/提示管理器）中查看将由您的提示创建的宏变量的名称。选择一个提示，然后右键单击它并选择“显示宏变量...”，然后将显示所有宏变量...只是不要忘记在代码中以 & 开头的提示名称。

# javascript - node-restify：如何缩进 JSON 输出？

> ID：10995601
> 
> 赞同：3
> 
> 时间：2012-06-12T11:19:03.650
> 
> 标签：javascript, json, node.js, restify

使 node-restify 输出 JSON 更好的正确方法是什么（即使用换行符和缩进）？

我基本上希望它输出类似的东西`JSON.stringify(object, null, 2)`，但我看不出有办法配置 restify 来做到这一点。

在不修补restify的情况下实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T20:29:35.073

您应该能够使用`formatters`（参见[Content Negotiation](http://mcavage.github.com/node-restify/#Content-Negotiation)）来实现这一点，只需指定自定义一个`application/json`：

```
var server = restify.createServer({
  formatters: {
    'application/json': myCustomFormatJSON
  }
}); 
```

您可以使用[原始格式化程序](https://github.com/mcavage/node-restify/blob/08468a05205f2e806e55ec974becb8c91db49424/lib/response.js#L120)的略微修改版本：

```
function myCustomFormatJSON(req, res, body) {
  if (!body) {
    if (res.getHeader('Content-Length') === undefined &&
        res.contentLength === undefined) {
      res.setHeader('Content-Length', 0);
    }
    return null;
  }

  if (body instanceof Error) {
    // snoop for RestError or HttpError, but don't rely on instanceof
    if ((body.restCode || body.httpCode) && body.body) {
      body = body.body;
    } else {
      body = {
        message: body.message
      };
    }
  }

  if (Buffer.isBuffer(body))
    body = body.toString('base64');

  var data = JSON.stringify(body, null, 2);

  if (res.getHeader('Content-Length') === undefined &&
      res.contentLength === undefined) {
    res.setHeader('Content-Length', Buffer.byteLength(data));
  }

  return data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-06T22:13:15.640

我相信这是一个更好的解决方案，代码很简单，没有任何错误检查程序运行并且似乎没有任何问题：

[https://github.com/restify/node-restify/issues/1042#issuecomment-201542689](https://github.com/restify/node-restify/issues/1042#issuecomment-201542689)

```
var server = restify.createServer({
    formatters: {
        'application/json': function(req, res, body, cb) {
            return cb(null, JSON.stringify(body, null, '\t'));
        }
    }
}); 
```

# batch-file - 批处理脚本：用另一个变量替换一个变量

> ID：10995604
> 
> 赞同：1
> 
> 时间：2012-06-12T11:19:12.537
> 
> 标签：batch-file, replace

好的，基本上我想做的是制作一个脚本，用另一个变量更新一个变量。

我已经创建了所有脚本，所以它从注册表中提取新数据并设置它，现在我只需要它来更新旧变量。

示例脚本

```
set current_shockwave_version=1
set current_flash_version=1

FOR /F "tokens=2* delims=    " %%A IN ('REG QUERY "HKEY_LOCAL_MACHINE\SOFTWARE\Macromedia\FlashPlayer" /v CurrentVersion ') DO SET Installed_Flash_Version=%%B
FOR /F "tokens=2* delims=    " %%A IN ('REG QUERY "HKEY_LOCAL_MACHINE\SOFTWARE\Adobe\Shockwave 11\currentupdateversion" ') DO SET Installed_Shockwave_Version=%%B 
```

现在我想用从注册表中提取的变量替换 current_shockwave_version 和 current_flash_version 的值。会有一群管理员使用这个脚本，我试图添加一个简单的更新功能，这样他们就可以在完全更新的计算机上运行这个替换功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:30:31.600

目前还不是很清楚你想要什么结果，但我假设你只想读取一次注册表值，然后更新这些行。

```
set current_shockwave_version=1
set current_flash_version=1 
```

有了新的价值观。
最简单的方法是将这两行移动到一个*config.bat*文件中，然后你可以使用类似的东西

```
call config.bat
echo current_flash_version = %current_flash_version%

:UpdateValues
FOR /F "tokens=2*" %%A IN ('REG QUERY "HKEY_LOCAL_MACHINE\SOFTWARE\Macromedia\FlashPlayer" /v CurrentVersion ') DO SET Installed_Flash_Version=%%B
FOR /F "tokens=2*" %%A IN ('REG QUERY "HKEY_LOCAL_MACHINE\SOFTWARE\Adobe\Shockwave 11\currentupdateversion" ') DO SET Installed_Shockwave_Version=%%B
(
  echo set current_shockwave_version=%Installed_Shockwave_Version%
  echo set current_flash_version=%Installed_Flash_Version%
) > config.bat 
```

**编辑：**关于在同一个批处理文件中替换的评论 替换同一个批处理文件
中的值不是一个好主意，因为要做到这一点，您需要在批处理运行时重写它。
这可以做到，但很棘手，特别是如果值的长度不一样，批处理会有点不可靠。

当您将*数据库*值的设置移动到文件末尾时，您可以解决它，但 IMO 更改当前正在运行的批处理并不是最好的主意。

```
@echo off
call :setValues
echo current_flash_version = %current_flash_version%
call :UpdateValues
echo new current_flash_version = %current_flash_version%
exit /b

:UpdateValues
FOR /F "tokens=2* delims=    " %%A IN ('REG QUERY "HKEY_LOCAL_MACHINE\SOFTWARE\Macromedia\FlashPlayer" /v CurrentVersion ') DO SET Installed_Flash_Version=%%B
FOR /F "tokens=2* delims=    " %%A IN ('REG QUERY "HKEY_LOCAL_MACHINE\SOFTWARE\Adobe\Shockwave 11\currentupdateversion" ') DO SET Installed_Shockwave_Version=%%B
REM ** Copy and modify the own batch
findstr /v /r "##DB##$" "%~f0" > "%~f0.tmp"
(
  (echo set "current_shockwave_version=%Installed_Shockwave_Version%" ^& REM ##DB##)
  (echo set "current_flash_version=%Installed_Flash_Version%" ^& REM ##DB##)
) >> "%~f0.tmp"
(
  copy "%~f0.tmp" "%~f0"
  del "%~f0.tmp"
)
call :setValues
exit /b

:setValues
set "current_shockwave_version=1" & REM ##DB##
set "current_flash_version=1" & REM ##DB## 
```

# jquery - 两组相交（SVG 或 HTML5 中的画布）

> ID：10995612
> 
> 赞同：1
> 
> 时间：2012-06-12T11:19:52.733
> 
> 标签：jquery, svg, geometry, html5-canvas, intersection

我想将两个集合的交集绘制为重叠（或不重叠）具有相同半径的两个圆。

例如，基于以下输入数据：

*   **交点 = 1** ,
*   **圆1 = 0** ,
*   **圆2 = 3**

我会得到：http: [//img406.imageshack.us/img406/7813/53261474.jpg](http://img406.imageshack.us/img406/7813/53261474.jpg)

如果我的输入数据是：

*   **交点 = 59** ,
*   **圆1 = 0** ,
*   **圆2 = 0**

我会得到：http: [//img713.imageshack.us/img713/319/95092557.png](http://img713.imageshack.us/img713/319/95092557.png)

我怎样才能做到这一点？我应该使用 SVG 还是画布？当文档准备好时，是否可以在加载时应用这些球的一些动画（例如，可能在它们的相交/差异区域内进行一些随机移动）。理想情况下，我会使用 jQuery。

谢谢你的好意！

# nhibernate - NHibernate 命名查询，每个子类都有表

> ID：10995613
> 
> 赞同：2
> 
> 时间：2012-06-12T11:19:56.323
> 
> 标签：nhibernate, named-query, table-per-subclass

我有一个项目，我们只使用命名查询来访问数据库。最近我们创建了新实体，我们计划按照子类模式映射表，所以我们按照文档创建了映射，一切看起来都很好，除了我们找不到如何在命名查询中定义表别名以便加载每个子类。

这是我们迄今为止所做的：

**实体：**

```
public class Gear 
{
    public virtual string Name { get; set; }

    public virtual string Slug { get; set; }
}

public class Pedal : Gear
{
    public virtual PedalTypeEnum PedalType { get; set; }
} 
```

**映射：**

```
public class GearMap : ClassMap<Gear>
{
    public GearMap()
    {
        Table("[Gear]");

        Id(m => m.Id).Column("Id");
        Map(m => m.Name).Column("[Name]");
        Map(m => m.Slug).Column("[Slug]");
    }
}

public class PedalMap : SubclassMap<Pedal>
{

    public PedalMap() 
    {

        Table("[Pedal]");
        KeyColumn("[Gear_Id]");

        Map(m => m.PedalType).Column("PedalType").CustomType(typeof(PedalTypeEnum));

    }
} 
```

我们试图执行的查询是这个：

```
<sql-query name="myquery" >
<return alias="[Gear]" class="Gear" />
<![CDATA[
    SELECT 
        {[Gear].*},
FROM 
        [Gear] {[Gear]}
]]>
</sql-query> 
```

这会导致 nhibernate 生成以下 SQL：

```
SELECT 
     [Gear].[Id] as column1_12_0_, 
     [Gear].[Name] as column3_12_0_, 
     [Gear].[Slug] as column4_12_0_,          
     [Gear]_1_.PedalType as PedalType13_0_, 
     case 
        when [Gear]_1_.[Gear_Id] is not null then 1 
        when [Gear].[Id] is not null then 0 end as clazz_0_
FROM 
        [Gear] [Gear] 
```

如您所见，它正确检测子类并尝试加载仅属于子类的字段 PedalType 但由于没有具有别名`[Gear]_1_.`的表，因此查询失败...

我们已尝试与踏板表进行连接，但我们无法找到正确的方法来设置别名，使其转换为`[Gear]_1_.`

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T23:52:22.767

这对我有用：

```
<sql-query name="myquery" >
  <return alias="Gear" class="Gear" />
  SELECT {Gear.*}
  FROM Gear {Gear}
  LEFT JOIN Pedal Gear_1_ on Gear.Id = Gear_1_.Gear_Id
</sql-query> 
```

但当然你可以只使用 HQL 而不是 SQL：

```
<query name="myhqlquery">
  from Gear
</query> 
```

但是...我必须说这是 NHibernate 的一种非常低效的用法。您正在与框架进行非常激烈的斗争，而不是利用它的灵活性。

# hibernate - HIbernate：Hibernate 3 中的主键概念

> ID：10995614
> 
> 赞同：1
> 
> 时间：2012-06-12T11:20:11.230
> 
> 标签：hibernate

我正在使用休眠 3 。你好 ，

我正在参加有关 Hibernate 的会议。我对他在 Database 下的 Tables 中使用 Hibernate 和 Primary key 时的讨论之一感到困惑。

**他提到的是，在使用 Hibernate 时，数据库列不一定要有主键，但必须提到表示该表的主键 hbm 文件。**

请让我知道这是不是真的？？

提前致谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:24:32.097

Hibernate 需要为每个实体提供一个唯一的、不可变的 ID。而此 ID 在此实体映射的数据库表中是否声明为主键无关紧要。但是我看不出不将其声明为主键会得到什么。

# android - android/eclipse 中的网络服务

> ID：10995620
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:20:32.507
> 
> 标签：android, eclipse, web-services

我需要通过肥皂方法从 android/eclipse 使用 Web 服务。

即，我必须根据用户输入提供输入并显示来自 Web 服务的适当结果。如何做到这一点？

**java类**

```
public class Demo_webserviceActivity extends Activity
{ 
/** Called when the activity is first created. */

   private static String NAMESPACE = "http://tempuri.org/";
   private static String METHOD_NAME = "GetName";
    private static String SOAP_ACTION = "http://tempuri.org/GetName";
    private static String URL = "http://122.248.240.105:234/Service1.asmx";

   Button btnFar;
   EditText txtFar,txtCel;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

   btnFar = (Button)findViewById(R.id.btnFar);

   txtFar = (EditText)findViewById(R.id.txtFar);
   txtCel = (EditText)findViewById(R.id.txtCel);

   btnFar.setOnClickListener(new View.OnClickListener()
   {

   public void onClick(View v)
   {
     //Initialize soap request + add parameters
     SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

     //Use this to add parameters
     request.addProperty("Fahrenheit",txtFar.getText().toString());

     //Declare the version of the SOAP request
     SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

     envelope.setOutputSoapObject(request);
     envelope.dotNet = true;

     try 
     {
         HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

         //this is the actual part that will call the webservice
         androidHttpTransport.call(SOAP_ACTION, envelope);

         // Get the SoapResult from the envelope body.
         SoapObject result = (SoapObject)envelope.bodyIn;

         if(result != null)
         {
          //Get the first property and change the label text
           txtCel.setText(result.getProperty(0).toString());
         }
         else
         {
           Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_SHORT).show();
         }
    }
    catch (Exception e)
    {
       e.printStackTrace();
       }
     }
       });
    } 
 } 
```

**网络方法**

```
public class GetName 
{
public String GetName(String Fahrenheit){
    return(Fahrenheit);
}
} 
```

**日志猫**

```
06-12 17:40:00.322: W/InputManagerService(59): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@44f60478 (uid=10040 pid=345)
 06-12 17:40:00.352: W/IInputConnectionWrapper(345): showStatusIcon on inactive InputConnection
 06-12 17:40:07.292: D/AndroidRuntime(352): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
06-12 17:40:07.292: D/AndroidRuntime(352): CheckJNI is ON
06-12 17:40:07.477: D/AndroidRuntime(352): --- registering native functions ---
06-12 17:40:08.062: D/AndroidRuntime(352): Shutting down VM
06-12 17:40:08.062: D/dalvikvm(352): Debugger has detached; object registry had 1 entries
06-12 17:40:08.102: I/AndroidRuntime(352): NOTE: attach of thread 'Binder Thread #3' failed
06-12 17:40:08.502: D/AndroidRuntime(360): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
06-12 17:40:08.502: D/AndroidRuntime(360): CheckJNI is ON
06-12 17:40:08.633: D/AndroidRuntime(360): --- registering native functions ---
06-12 17:40:09.152: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.demo.webser/.Demo_webserviceActivity }
06-12 17:40:09.222: D/AndroidRuntime(360): Shutting down VM
06-12 17:40:09.222: D/dalvikvm(360): Debugger has detached; object registry had 1 entries
06-12 17:40:09.252: I/AndroidRuntime(360): NOTE: attach of thread 'Binder Thread #3' failed 
```

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:37:47.183

您应该使用`SoapPrimitive results = (SoapPrimitive)envelope.getResponse();`而不是，`SoapObject result = (SoapObject)envelope.bodyIn;`因为您的网络服务返回的是`string`not `object`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:37:33.753

您正朝着正确的方向前进，即您在 android 中编写的代码是正确的。只要确保您编写的**soap action、Method、URl 和命名空间**是正确的。如果您对此有任何疑问或任何其他疑问，可以写信给我。

[这里是android basic ksoap android tutorial](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)中访问web服务的基本android教程

并在 java 中创建 web 服务使用本教程[如何创建基于 java 的 web 服务](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)

# internet-explorer - Internet Explorer BHO 中未触发 WindowStateChanged

> ID：10995622
> 
> 赞同：1
> 
> 时间：2012-06-12T11:21:02.540
> 
> 标签：internet-explorer, internet-explorer-9, bho

NavigateComplete、DocumentComplete 等工作得很好，但由于某种原因 WindowStateChanged 不能。我正在使用 IE9 进行测试。这个活动被取消了吗？

```
public class BHO : IObjectWithSite, IOleCommandTarget
{

    IWebBrowser2 browser = null;
    int version = 9;

    void OnNavigateComplete2(object pDisp, ref object URL)
    {
        if (!ReferenceEquals(pDisp, browser))
        {
        }
        else
        {
            var document = browser.Document as IHTMLDocument2;
            var window = document.parentWindow;
            Debug.WriteLine(version + "MainURL: " + URL.ToString());
        }
    }

    void OnWindowStateChanged(uint dwWindowStateFlags, uint dwValidFlagsMask)
    {
        version = version * 2;   //never hit
        Debug.WriteLine(version);
    }

    #region Implementation of IObjectWithSite
    int IObjectWithSite.SetSite(object site)
    {
        Debug.WriteLine("SetSite!");
        if (site != null)
        {
            browser = (IWebBrowser2)site;
            ((DWebBrowserEvents2_Event)browser).NavigateComplete2 +=
       new WebBrowserEvents2_NavigateComplete2EventHandler
              (this.OnNavigateComplete2);
             ((DWebBrowserEvents2_Event)browser).WindowStateChanged +=
       new WebBrowserEvents2_WindowStateChangedEventHandler
              (this.OnWindowStateChanged);

        }

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:29:47.583

花了我半天，但我明白了。

默认情况下，VS 将 SHDocVw 嵌入到您的 BHO 中，即使它有效，某些处理程序也不会触发。我猜 IE 最终会使用不同的 SHDocVw？

反正。通过将嵌入互操作设置为“false”并将其注册到 GAC，事件再次开始触发。他们全部。

# php - phpBB安装前没有找到mysql

> ID：10995627
> 
> 赞同：0
> 
> 时间：2012-06-12T11:21:13.077
> 
> 标签：php, phpbb, phpbb3

我正在尝试安装 phpBB 3。我已经设置了我的网络服务器和 MySQL 并对其进行了测试。但是在 phpBB 的数据库配置中没有 MySQL 作为数据库类型。我只能看到 MS SQL Server。就像我没有安装 MySQL 一样。为什么会这样？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:24:49.493

验证

```
phpinfo(); 
```

MySQL 扩展已加载，服务器已启动并正在运行。
[重建配置文件](http://www.phpbb.com/kb/article/rebuilding-your-configphp-file/)
尝试遵循这个基本指南[http://www.phpbb.com/community/docs/INSTALL.html#quickinstall](http://www.phpbb.com/community/docs/INSTALL.html#quickinstall)

您是否使用除 Apache 之外的任何其他网络服务器？

# iphone - 无法使用 OpenIn 功能通过应用程序中的 webbrowser 打开 docx 文件

> ID：10995635
> 
> 赞同：2
> 
> 时间：2012-06-12T11:21:57.983
> 
> 标签：iphone, ios, ipad, ios5

我正在使用“OpenIn”功能并将 Web 浏览器中的文件打开到我的应用程序中。所有文件类型都已注册并且工作正常。当尝试从网络浏览器打开 docx、pptx 或其他文件时，“打开方式”框没有显示我的应用程序名称。虽然我可以使用 UIDocumentInteractionController 在我的应用程序中查看 docx 或 pptx 文件。我不知道问题出在哪里，因为它工作得很好。

欢迎任何建议。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T14:30:29.257

文档 UTI：com.microsoft.word.doc

docx UTI:org.openxmlformats.wordprocessingml.document

ppt UTI:com.microsoft.powerpoint.ppt

pptx UTI:org.openxmlformats.presentationml.presentation

xls UTI:com.microsoft.excel.xls

xlsx UTI:org.openxmlformats.spreadsheetml.sheet

样本：

```
 <dict>
        <key>CFBundleTypeName</key>
        <string>Microsoft Word 2003 XML document</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>org.openxmlformats.wordprocessingml.document</string>
        </array>
    </dict> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:09:41.700

在您的应用程序的 info.plist 中，您将添加类似于以下内容的内容，以允许您的应用程序打开，比如 PDF 文件，对吧？

![在此处输入图像描述](../Images/e12acfdfd222dd60d4c5c33c70507dc4.png)

只需将上面的替换为这个，

![在此处输入图像描述](../Images/448406ca302818d1e6b8a298a631ba35.png)

请注意，此处的`Document Content Type UTIs`已更改为`public.item`，这是 ppt、doc 等 UTI 所遵循的。

因此，现在，您应该能够获得 pdf、doc、docx、ppt、pptx、xls、xlsx 的“打开方式”选项。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T11:31:08.370

`UIWebView`由于文件架构的原因，不支持 MS Office 2007 及更高版本的文件格式，即 docx、pptx、xlsx。

# jquery - 检测是否发送了 POST

> ID：10995637
> 
> 赞同：0
> 
> 时间：2012-06-12T11:22:05.760
> 
> 标签：jquery, ajax, validation

是否有任何解决方案来检测是否已使用 jQuery 发送 POST？

我的情况是我有一个 WP 插件（联系表格 7），它通过 jQuery ajax 函数发送数据。当表单填写正确（验证）时，用户应该被发送到页面 X。

我已经尝试了以下没有任何好的结果：

```
if ($(".wpcf7-mail-sent-ok").is(":visible")){
        window.location.href = "http://stackoverflow.com";
    }); 
```

我认为这不起作用，因为“wpcf7-mail-sent-ok”类仅在表单由 jQuery 发送且有效时才会显示。所以我上面的代码没有被“检测到”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:26:58.433

```
if($(".wpcf7-mail-sent-ok").length) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:25:29.803

您可以使用[Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具来检查流量或 Chrome -> 右键单击​​ -> “检查元素” -> “网络”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:26:39.523

在你的页面上找到那个 ajax 并寻找它的`success`功能，在里面放一个 alert('hello') 你就会知道它是否被执行了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T11:28:02.767

`DOMNodeInserted`您可以使用事件检测 DOM 插入。如果您认为`wpcf7-mail-sent-ok`仅在 ajax 调用之后插入，那么您可以绑定此事件。

```
$(document).on('DOMNodeInserted', '.wpcf7-mail-sent-ok', function() {
    window.location.href = 'http://stackoverflow.com'
}) 
```

# apache - Mac OS X：Tomcat 没有启动

> ID：10995644
> 
> 赞同：2
> 
> 时间：2012-06-12T11:22:50.943
> 
> 标签：apache, tomcat

我正在使用 Mac OS X v10.7.3 并尝试在其上安装 Apache Tomcat。

在我的机器上 JAVA_HOME = /Library/Java/Home

我下载了 apache-tomcat-6.0.35.tar.gz，解压并将文件夹放在 /Library 中。

现在，当我`sudo sh startup.sh`在终端中运行时，我得到以下输出：

`Using CATALINA_BASE: /Library/apache-tomcat-6.0.35 Using CATALINA_HOME: /Library/apache-tomcat-6.0.35 Using CATALINA_TMPDIR: /Library/apache-tomcat-6.0.35/temp Using JRE_HOME: /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home Using CLASSPATH: /Library/apache-tomcat-6.0.35/bin/bootstrap.jar`

但是当我打开时`http://localhost:8080`，我得到 Unable to connect 错误。

可能出了什么问题？

-苏迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-07T04:43:43.837

将您的目录更改为`Applications/tomcat/bin`

然后写`./catalina.sh run`

我希望这会奏效

# python - 'i' 格式的 Celery 内部错误

> ID：10995646
> 
> 赞同：1
> 
> 时间：2012-06-12T11:23:04.657
> 
> 标签：python, celery

当我尝试使用 celery 和 amqp 执行任务时出现以下错误，我的配置是否有问题。我该如何解决？

```
[2012-06-12 16:49:37,231: CRITICAL/MainProcess] Task core.tasks.sanity[c44c8058-46d1-48cd-a687-0481f5bd5ee5] INTERNAL ERROR: error("'i' format requires -2147483648 <= number <= 2147483647",)
Traceback (most recent call last):
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/celery/execute/trace.py", line 192, in trace_task
    R = I.handle_error_state(task, eager=eager)
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/celery/execute/trace.py", line 91, in handle_error_state
    }[self.state](task, store_errors=store_errors)
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/celery/execute/trace.py", line 114, in handle_failure
    task.backend.mark_as_failure(req.id, exc, self.strtb)
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/celery/backends/base.py", line 96, in mark_as_failure
    traceback=traceback)
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/celery/backends/base.py", line 229, in store_result
    return self._store_result(task_id, result, status, traceback, **kwargs)
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/celery/backends/amqp.py", line 121, in _store_result
    "traceback": traceback})
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/kombu/connection.py", line 272, in _ensured
    return fun(*args, **kwargs)
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/celery/backends/amqp.py", line 97, in _publish_result
    self._create_producer(task_id, connection).publish(meta)
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/celery/backends/amqp.py", line 87, in _create_producer
    self._create_binding(task_id)(connection.default_channel).declare()
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/kombu/entity.py", line 386, in declare
    self.queue_declare(nowait, passive=False)
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/kombu/entity.py", line 408, in queue_declare
    nowait=nowait)
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/amqplib/client_0_8/channel.py", line 1376, in queue_declare
    args.write_table(arguments)
  File "/nobackup/vivenara/pyenv/lib/python2.7/site-packages/amqplib/client_0_8/serialization.py", line 378, in write_table
    table_data.write(pack('>i', v))
error: 'i' format requires -2147483648 <= number <= 2147483647 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:35:06.933

存储结果时值溢出：

```
error: 'i' format requires -2147483648 <= number <= 2147483647 
```

一个 bigint/long 值被写入 AMQP 队列，而它识别为 int。我相信这不是配置问题。结果，您尝试保存的价值是多少？

我在堆栈跟踪中看到：

```
return self._store_result(task_id, result, status, traceback, **kwargs) 
```

你能检查一下结果值是多少吗？可能这是一些奇怪的价值......

**编辑**：

```
task.backend.mark_as_failure(req.id, exc, self.strtb) 
```

所以在这种情况下，它返回 exc 作为结果：

```
def mark_as_failure(self, task_id, exc, traceback=None):
        """Mark task as executed with failure. Stores the execption."""
        return self.store_result(task_id, exc, status=states.FAILURE,
                                 traceback=traceback) 
```

包含 bigint 状态代码的任务是否会引发异常？

# java - 根据关键字将论文分配给审稿人

> ID：10995647
> 
> 赞同：0
> 
> 时间：2012-06-12T11:23:08.280
> 
> 标签：java, algorithm, keyword

我想知道您是否知道任何可以为以下情况自动分配的算法：我有一些定义了一些关键字的论文，以及一些定义了一些特定关键字的审稿人。我如何进行自动映射，以便审稿人可以从他/她感兴趣的领域审阅论文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:28:24.390

您基本上需要设计自己的解析器，或者根据您的需要专门化现有的解析器。您需要扫描论文，并根据您的关键字，相应地搜索和匹配您的令牌。然后将带有这些关键字的句子分开并显示给审阅者。

我建议使用[Stanford NLP POS tagger](http://nlp.stanford.edu/software/tagger.shtml)。您需要的每个关键字都将属于词性。然后，您可以标记您的完整文档，并搜索这些标签并相应地整理句子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:32:12.933

如果您愿意使用外部工具[Lucene](http://lucene.apache.org/core/)是一个库，可让您根据（来自他们的网站）搜索文本

*   短语查询、通配符查询、邻近查询、范围查询等
*   字段搜索（例如，标题、作者、内容）
*   日期范围搜索
*   按任何字段排序
*   合并结果的多索引搜索
*   允许同时更新和搜索

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:34:07.180

[Apache Lucene](http://lucene.apache.org/core/)可能是一种解决方案。

它允许您在 RAM 目录或文件系统的真实目录中索引文档，然后执行全文搜索。

它提出了许多非常有趣的功能，例如过滤器或分析器。例如，您可以：

*   根据文档的语言删除停用词（例如英语：a、the、of 等）；
*   词干标记（例如，功能、功能、功能等，被视为单个实例）；
*   执行复杂的查询（例如review*、keyw?rds、“to be or not to be”等）；
*   等等等等...

你应该看看！如果 Lucene 是您选择的方式，请随时问我一些代码示例`:)`

# google-app-engine - Servlet 重定向到带有 UTF-8（或带有 UTF-8 的 HTTP 标头）的 URL - 在 Google App Engine (GAE) 上看到

> ID：10995648
> 
> 赞同：2
> 
> 时间：2012-06-12T11:23:10.727
> 
> 标签：google-app-engine, servlets, redirect, utf-8

这是我的代码（在 Google App Engine 上看到）

```
public void doGet(HttpServletRequest request, HttpServletResponse response) {       
    response.setCharacterEncoding("UTF-8");
    response.setContentType("text/html; charset=UTF-8");
    response.setHeader("testHeader1", "hi");  // Works fine
    response.setHeader("testHeader2", "שלום"); // Header not visible on Chrome client
    response.sendRedirect("/myUrl#שלום"); // Redirect does not work on browser (302 sent but Location header is absent) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:36:49.230

指定标题中的`RFC 2047`非 ASCII 字符，但大多数服务器和浏览器尚不支持。

因此，如果要发送非 ASCII 字符，则应将文本编码为 ASCII 并发送。

您可以`java.net.URLEncoder`在重定向时使用编码并`java.net.URLDecoder`在另一端解码。

# c# - 从 XML 节点中提取值

> ID：10995653
> 
> 赞同：0
> 
> 时间：2012-06-12T11:23:48.170
> 
> 标签：c#, xml

我有一个 xml 文件，我必须读取它并将节点中的值提取到一些变量中，我遇到了一个我不知道如何提取数据的节点，这是节点：

```
<QuantityInIssueUnit uom="KO">288.000</QuantityInIssueUnit> 
```

所以我必须提取 KO 和 288.00 并将其传递给变量，我试过这个：

```
if (!dr_art_line.Table.Columns.Contains("QuantityInIssueUnit") || 

    dr_art_line["QuantityInIssueUnit"].ToString().Length <= 0)
                                {
                                    QuantityInIssueUnit = 0;
                                }
                                else
                                {
                                QuantityInIssueUnit = Convert.ToDecimal(dr_art_line["QuantityInIssueUnit"]);
                                 { 
```

和这个：

```
if (!dr_art_line.Table.Columns.Contains("QuantityInIssueUnit uom") || dr_art_line["QuantityInIssueUnit uom"].ToString().Length <= 0)
                            {
                                QuantityInIssueUnit_uom = 0;
                            }
                            else
                            {
                                QuantityInIssueUnit_uom = Convert.ToDecimal(dr_art_line["QuantityInIssueUnit uom"]);
                            } 
```

但是每次 QuantityInIssueUnit 为 0 时，我都知道我在阅读时做错了什么，阅读这种节点的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:26:11.267

文档.xml

```
<ROOT>
    < . . . >
    <QuantityInIssueUnit uom="KO">288.000</QuantityInIssueUnit>
    < . . . >
</ROOT> 
```

如果这是你的设置，我会使用类似的东西：

```
public static float ReadFromXml(string f, string n)
{
    string quantityInIssueUnit;
    XmlReader reader = XmlReader.Create(f);
    reader.ReadToFollowing(n);
    quantityInIssueUnit = reader.ReadInnerXml( );
    reader.Close( );
    return float.Parse(quantityInIssueUnit);
} 
```

所以你可以打电话：

```
ReadFromXml(@"C:\\...\DOCUMENT.xml", "QuantityInIssueUnit");
// Returns 288 as a float 
```

# clojure - Clojure 集合与序列的相等性

> ID：10995655
> 
> 赞同：5
> 
> 时间：2012-06-12T11:23:56.437
> 
> 标签：clojure, sequence, equality

我注意到 Clojure (1.4) 似乎乐于考虑向量等于`seq`同一向量的 ，但同样不适用于地图：

```
(= [1 2] (seq [1 2]))
=> true

(= {1 2} (seq {1 2}))
=> false 
```

为什么要`=`以这种方式不同的行为？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T00:37:09.730

Clojure`=`可以被认为是分两步进行比较：

1.  检查被比较的事物的类型是否属于相同的“相等分区”，即成员可能相等的一类类型（取决于给定数据结构的确切成员之类的东西，但不是特定类型分区）；

2.  如果是这样，请检查被比较的事物是否实际上是相等的。

一种这样的平等划分是“顺序”事物的划分。向量被认为是连续的：

```
(instance? clojure.lang.Sequential [])
;= true 
```

各种类型的序列也是如此：

```
(instance? clojure.lang.Sequential (seq {1 2}))
;= true 
```

因此，当（且仅当）其对应元素相等时，向量才被视为等于 seq。

（请注意，`(seq {})`产生`nil`，它*不是*连续的，并且将“不等于”与`()`等进行比较`[]`）

另一方面，映射构成了它们自己的相等分区，因此虽然哈希映射可能被认为等于排序映射，但它永远不会被认为等于序列。特别是，它不等于其条目的 seq，这是`(seq some-map)`产生的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T11:28:07.340

我想这是因为在序列中的顺序以及特定位置的值很重要，而在 map 中，键/值的顺序无关紧要，语义之间的这种差异会导致它如示例代码所示那样工作。

有关更多详细信息，请查看`mapEquals`文件[https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/APersistentMap.java](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/APersistentMap.java)

它检查另一个对象是否不是映射，然后返回 false。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T11:31:50.273

```
user=> (seq {1 2})
([1 2])
user=> (type {1 2})
clojure.lang.PersistentArrayMap 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T17:18:39.813

在我看来，这个例子指出了 clojure 中值相等概念的轻微不一致，因为它们是从同一类型（通过`seq`函数）派生的不同类型。可以说这并没有矛盾，因为它将派生类型与其派生的类型进行比较，我可以理解，如果使用向量将相同的逻辑应用于同一个示例（请注意底部）

内容是相同的类型：

```
user> (type (first (seq {1 2})))
clojure.lang.MapEntry
user> (type (first {1 2}))
clojure.lang.MapEntry

user> (= (type (first {1 2})) (type (first (seq {1 2}))))
true
user> (= (first {1 2}) (first (seq {1 2})))
true 
```

序列具有相同的值

```
user> (map = (seq {1 2}) {1 2})
(true) 
```

但他们不被视为平等用户> (= {1 2} (seq {1 2})) false

对于较长的地图也是如此：

```
user> (map = (seq {1 2 3 4}) {1 2 3 4})
(true true)
user> (map = (seq {1 2 3 4 5 6}) {1 2 3 4 5 6})
(true true true)
user> (map = (seq {9 10 1 2 3 4 5 6}) {9 10 1 2 3 4 5 6})
(true true true true) 
```

**即使它们的顺序不同**：

```
user> (map = (seq {9 10 1 2 3 4 5 6}) {1 2 3 4 5 6 9 10})
(true true true true) 
```

但如果包含的类型不同，则不是:-(

```
user> (= {1 2 3 4} (seq {1 2 3 4}))
false 
```

编辑：这并不总是正确的，见下文：要解决这个问题，您可以**在比较之前将所有内容转换为 seq**，这是（我认为）安全的，因为 seq 函数总是以相同的方式迭代整个数据结构并且结构是不可变的值a`seq`的 a`seq`是 a`seq`

```
user> (= (seq {9 10 1 2 3 4 5 6}) {1 2 3 4 5 6 9 10})
false
user> (= (seq {9 10 1 2 3 4 5 6}) (seq {1 2 3 4 5 6 9 10}))
true 
```

* * *

向量的处理方式不同：

```
user> (= [1 2 3 4] (seq [1 2 3 4]))
true 
```

也许理解细微的不一致是学习语言的一部分，或者有一天这可能会改变（尽管我不会屏住呼吸）

* * *

编辑：

我发现两个映射为相同的值产生不同的序列，因此仅在映射上调用 seq 不会为您提供正确的映射相等性：

```
user> (seq (zipmap  [3 1 5 9][4 2 6 10]))
([9 10] [5 6] [1 2] [3 4])
user> (seq {9 10 5 6 1 2 3 4})
([1 2] [3 4] [5 6] [9 10])
user> 
```

这是我所说的正确映射相等的示例：

```
user> (def a (zipmap  [3 1 5 9][4 2 6 10]))
#'user/a
user> (def b {9 10 5 6 1 2 3 4})
#'user/b
user> (every? true? (map #(= (a %) (b %)) (keys a)))
true 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T14:32:16.470

`(seq some-hash-map)`为您提供一系列条目（键/值对）。

例如：

```
foo.core=> (seq {:a 1 :b 2 :c 3})
([:a 1] [:c 3] [:b 2]) 
```

这与`[:a 1 :b 2 :c 3]`.

# javascript - 为什么要使用 javascript 闭包实现回调和事件处理程序附件？

> ID：10995659
> 
> 赞同：2
> 
> 时间：2012-06-12T11:24:06.057
> 
> 标签：javascript, jquery, closures

通过在 JavaScript 中使用闭包来实现回调和事件处理程序附件，我们可以获得什么价值。我知道 jQuery 广泛使用这种模式，但想了解为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:23:51.380

将闭包分配为回调使您可以访问定义它的范围。它还有助于保持命名空间清洁。其他库允许您将对象方法绑定为事件处理程序，让事件访问对象，这是一个非常优雅的替代解决方案。例如，也许是这样的：

```
// an object definition
var Accordion = function () {
   this.clickCounter = 0;
};
Accordion.prototype.click = function () {
   this.clickCounter += 1;
   alert( this.clickCounter );
};

// create object
var myAccordion = new Accordion();

// function to bind DOM element events to javascript object methods
function methodBind ( element, eventType, myObject, myMethod ) {
   $( element ).bind( eventType, function(e) {
      e.preventDefault();
      myObject[myMethod ].call(myObject);
   } );
}

// bind buttons on an element to activate a correlating object method
$( '.Accordion' ).find( '.button' ).each( function() {
   methodBind( this, 'click', myAccordion, 'click' );
} ); 
```

虽然我的实现也使用了闭包哈哈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:41:54.753

是的，你可能会像 Esailija 描述的那样结束，但你也可能会拯救一些小猫。闭包中的事件处理程序使您可以访问本地范围。所以而不是

```
var uselessMap = {};

function myListener(e) {
    alert(uselessMap[e.target.id].foo);    
}

items.forEach(function(item) {
    var el = document.createElement('div');
    el.innerText = item.name;
    el.id = item.id;
    el.addEventListener('click', myListener, false);
}) 
```

你只需要这个：

```
items.forEach(function(item) {
    var el = document.createElement('div');
    el.innerText = item.name;
    el.addEventListener('click', function(e) {
        alert(item.foo);
    }, false);
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:42:36.647

我不确定是否真正了解您的需求。Closures 不是 jQuery 系统，它是主要的核心或 Javascript。

问题是 Javascript 是基于语言事件的。当您进行 ajax 调用时，您的 javascript 将继续运行并且不会停止期待结果。因此，您需要有一个回调方法才能在完成后执行某些操作。

我知道当你使用像 PHP 这样的阻塞语言调用一个函数并在操作完成时执行下面的行时，这可能会令人沮丧。但这是 Javascript 哲学。当你可以做其他事情时不要等待，只要能够在调用此或此事件时弹出即可。

通常，对于单击/更改输入/提交表单等事件，您不能等待并阻止所有代码，直到某些操作弹出。因此，请为您想听到的每个事件附加一个侦听器并继续您的方式。

# asp.net - 预处理 ASP.NET MVC Razor 视图

> ID：10995661
> 
> 赞同：2
> 
> 时间：2012-06-12T11:24:23.987
> 
> 标签：asp.net, asp.net-mvc, razor

我想在我的视图被 Razor 模板引擎解析之前对其进行一些预处理。到目前为止，我发现的唯一方法是扩展`RazorTemplateEngine`类并覆盖`CreateParser`方法，我可以在其中返回一个自定义解析器，该解析器在调用基本解析器之前进行预处理。

现在我的问题是 - 如何让 Razor 使用我的自定义模板引擎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:41:40.570

我不知道这是否对你有用，但它应该:) 尝试添加

```
@inherits YourRazorTemplateEngine 
```

在你的意见头。

有关更多信息，请查看[此页面](http://www.west-wind.com/weblog/posts/2010/Dec/27/Hosting-the-Razor-Engine-for-Templating-in-NonWeb-Applications)

# android - 三星galaxy s wifi 4.0 安卓大屏？

> ID：10995663
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:24:31.040
> 
> 标签：android, android-layout

简短的一个：我是否正确假设三星 Galaxy S wifi 4.0 在 android (2.3) 布局方面是一个大屏幕？

谢谢，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:49:25.317

根据[http://developer.android.com/guide/practices/screens_support.html#testing](http://developer.android.com/guide/practices/screens_support.html#testing)提供的表格，该设备应该是普通的 hdpi 设备，因为它是 4 英寸，分辨率为 480x800，给它一个密度233 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:42:51.987

对，就是大屏幕。要对其进行测试，请创建具有不同内容的不同布局（小型、中型和大型）并运行应用程序。

# trigger.io - 如何将文件下载到 trigger.io 应用程序？

> ID：10995664
> 
> 赞同：2
> 
> 时间：2012-06-12T11:24:31.977
> 
> 标签：trigger.io

如何将文件下载到 trigger.io 应用程序？我的应用程序显示离线数据，但我需要我的应用程序如何从服务器下载和存储本地新鲜数据的方式。数据是一个带有项目数组和一些图像的 js fole，每个图像对应于数组中的每个产品项目。对于Phonegap，有类似[http://wiki.phonegap.com/w/page/51679022/Download+File+From+Internet](http://wiki.phonegap.com/w/page/51679022/Download+File+From+Internet)的东西，trigger.io 有什么吗？

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:56:06.703

您可以在本地缓存文件 - [http://docs.trigger.io/en/v1.3/features/cache.html](http://docs.trigger.io/en/v1.3/features/cache.html)

和/或您可以利用用户偏好 - [http://docs.trigger.io/en/v1.3/modules/prefs.html](http://docs.trigger.io/en/v1.3/modules/prefs.html)

另外，检查一下 - [http://docs.trigger.io/en/v1.3/modules/file.html](http://docs.trigger.io/en/v1.3/modules/file.html)

```
cacheURL 
```

# powershell - Powershell 中的 Lambda 表达式

> ID：10995667
> 
> 赞同：56
> 
> 时间：2012-06-12T11:24:34.927
> 
> 标签：powershell, lambda

我在 C# 中有一个代码，它使用 lambda 表达式将委托传递给一个方法。如何在 PowerShell 中实现这一点。例如下面是一段 C# 代码：

```
string input = "(,)(;)(:)(!)";
string pattern = @"\((?<val>[\,\!\;\:])\)";
var r = new Regex(pattern);
string result = r.Replace(input, m =>
    {
        if (m.Groups["val"].Value == ";") return "[1]";
        else return "[0]";
    });
Console.WriteLine(result); 
```

这是没有 lambda 表达式的 PowerShell 脚本：

```
$input = "(,)(;)(:)(!)";
$pattern = "\((?<val>[\,\!\;\:])\)";
$r = New-Object System.Text.RegularExpressions.Regex $pattern
$result = $r.Replace($input, "WHAT HERE?")
Write-Host $result 
```

**注意：**我的问题不是解决这个正则表达式问题。我只想知道如何将 lambda 表达式传递给在 PowerShell 中接收委托的方法。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-12T11:36:30.007

在 PowerShell 2.0 中，您可以使用脚本块 ( `{ some code here }`) 作为委托：

```
$MatchEvaluator = 
{  
  param($m) 

  if ($m.Groups["val"].Value -eq ";") 
  { 
    #... 
  }
}

$result = $r.Replace($input, $MatchEvaluator) 
```

或者直接在方法调用中：

```
$result = $r.Replace($input, { param ($m) bla }) 
```

**提示：**

您可以使用`[regex]`将字符串转换为正则表达式：

```
$r = [regex]"\((?<val>[\,\!\;\:])\)"
$r.Matches(...) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-06-21T21:53:45.153

有时你只想要这样的东西：

```
{$args[0]*2}.invoke(21) 
```

（它将声明一个匿名“函数”并立即调用它。）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-12T11:49:23.993

你可以使用这个重载

```
[regex]::replace(
   string input,
   string pattern, 
   System.Text.RegularExpressions.MatchEvaluator evaluator
) 
```

委托作为脚本块（lambda 表达式）传递，并且可以通过 $args 变量访问 MatchEvaluator

```
[regex]::replace('hello world','hello', { $args[0].Value.ToUpper() }) 
```

# facebook - Facebook API：publish_stream 权限仅有效一次

> ID：10995668
> 
> 赞同：0
> 
> 时间：2012-06-12T11:24:36.657
> 
> 标签：facebook

我正在开发一个基于 Web 的应用程序，通过 Facebook 的 API 在墙上发布、评论、喜欢和删除帖子。我在注册步骤中要求这些权限：

```
***'scope' => 'publish_actions,read_stream,publish_stream'*** 
```

注册后我可以做任何事情：在墙上发帖、评论帖子、点赞和删除。但是一旦我从我的应用程序中注销然后再次登录，从我的数据库中获取正确的令牌并尝试做同样的事情，我发现我可以在墙上发帖并删除帖子但是当我尝试喜欢或评论时，我发现这个错误：

> ***致命错误：未捕获的 OAuthException：(#200) 需要 publish_stream 权限或需要扩展权限：publish_actions throws in...***。

但事实上，当我询问用户对 facebook 的许可时，我有这个答案：

```
*Array ( [data] => Array ( [0] => Array ( [installed] => 1 [read_stream] => 1 [status_update] => 1 [photo_upload] => 1 [video_upload] => 1 [create_note] => 1 [share_item] => 1 [publish_stream] => 1 [publish_actions] => 1 ) ) )* 
```

我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:48:17.783

当用户再次登录 facebook 时，您应该在数据库中刷新他们的令牌，并将更新的版本与您进行的任何 API 调用一起使用。

# c++ - 如何为大多数系统编译 LD_PRELOAD

> ID：10995670
> 
> 赞同：1
> 
> 时间：2012-06-12T11:24:41.087
> 
> 标签：c++, gcc, compilation, g++, ld-preload

我有一个 LD_PRELOAD 文件。在什么操作系统和条件下，我应该编译这个预加载以在大多数系统（Unix/Linux）上工作。最需要的是 FreeBSD、Ubuntu、CenstOS、Solaris。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:29:49.367

您需要将其编译为共享库。这是我通常编译我的方式：

```
libt.so: t.lo
        g++ -fPIC -O3 -W -Wall -shared -Wl,-export-dynamic -o $@ $^ -lc

t.lo: t.cc
        g++ -c -fPIC -O3 -W -Wall $^ -o $@ 
```

然后要使用它，在启动该文件之前将库添加到 LD_PRELOAD 环境变量。如果您`bash`从命令行以这种方式执行此操作：

```
LD_PRELOAD=libt.so executable_name -and args 
```

然后，它只会为该命令行运行设置它，而不会影响您之后启动的任何其他程序。

# ruby-on-rails - 下订单时添加customer_id，在客户索引中检索

> ID：10995672
> 
> 赞同：0
> 
> 时间：2012-06-12T11:24:51.397
> 
> 标签：ruby-on-rails, ruby, database, controller

我正在尝试创建一个订购系统，以便在下订单时，客户登录/注册并将订单添加到他们的索引中。我有两个控制器和它们各自的模型/视图等 - 称为订单和客户。我假设我需要添加一个方法，以便在下订单时将 customer_id 添加到订单中，然后我可以在该特定客户的索引中显示具有该 ID 的所有订单 - 即他们只能看到自己的订单.

这可能是一个很简单的问题，道歉！但我是 Rails 的新手，不知道如何开始使用这个。请问有人可以建议我如何去做吗？

编辑：

感谢大家的帮助！如何让客户索引仅显示该客户的订单？我是否会在他们登录时将 customer_id 存储在会话中，然后将其放入订单中，然后在索引页面中找到具有该 ID 的所有订单？我想我知道如何在登录时将他们的 id 放入会话中，但不确定如何将其提取到客户索引视图中。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:47:59.970

@railsdog 是正确的，但是，这是难题的另一部分（如何首先在订单中获取客户的 ID）：

```
class OrdersController
  def create
    @order = Order.new(params[:order])
    @order.customer_id = current_user.id
    # ...
  end
  #...
end 
```

请注意在控制器中设置 customer_id 的方法，而不是从表单中设置。这样做的原因是，即使是隐藏的表单字段也可以由客户端更改，因此如果您在没有检查服务器端的情况下进行更改，攻击者可能会为其他客户下订单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:40:29.893

如果您创建的订单表有一个 customer_id，并在客户下订单时填写该 ID，那么订单的客户视图应始终以他们的订单为范围。您将需要区分客户用户和您的管理员用户（也许是您？），如（类似）：

```
class customer
  has_many :orders
end

class order
  belongs_to :customer
end

class OrdersController

  def index
    # determine the current customer (or admin), then
    if current_user.isAdmin?
      @orders = Order.all
    else
      @orders = current_user.orders
    end
  end
end 
```

# ruby - nil 在这里是什么意思/代表什么？

> ID：10995674
> 
> 赞同：2
> 
> 时间：2012-06-12T11:24:58.870
> 
> 标签：ruby, null

以下是`irb`shell 中的简单语句。`nil`输出中的意思是什么？为什么它伴随着`if`块中的打印语句？

```
irb(main):062:0> if(x==20 && y==30)
irb(main):063:1> print("if statement working !")
irb(main):064:1> else
irb(main):065:1* print("else statement working !!")
irb(main):066:1> end
if statement working !=> nil # what does nil represent here ? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T11:47:18.990

在 Ruby 中，所有表达式都返回值，即使它是`nil`. 块和方法只返回最后一个计算的表达式的值。有很多方法可以有效地使用它。例如，这就是`return`经常不使用显式 s 的原因。此外，您可以这样做：

```
print if x == 20 && y == 30
  'if statement working!'
else
  'else statement working!'
end 
```

关于您的示例：除了按照您的指示打印字符串外，`irb`还将显示它从 if-else 块收到的值。由于[`print`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-print)总是返回`nil`，因此两个分支都将返回相同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:25:51.430

这意味着您的 if 块不返回值（实际上可以）。例如，以下内容是完全合法且可行的：

```
foo = if bar > 10
    42
else
    0
end

# now, foo is either 42 or 0 
```

# jquery - Jquery，计算具有相同类的html表行？

> ID：10995677
> 
> 赞同：2
> 
> 时间：2012-06-12T11:25:21.473
> 
> 标签：jquery

我正在使用 grails 构建发票，而对于动态计算，我正在使用 jquery。

我不知道，这可能不是一个好的解决方案，而且我不适合 javascript。可能有人可以帮助我，我们开始：

```
<thead>
    <tr>
        <g:sortableColumn style="width: 20px" property="id" title="${message(code: 'packet.id.label', default: 'Id')}" />
        <g:sortableColumn style="width: 10px" property="anzahl" title="${message(code: 'packet.anzahl.label', default: 'Anzahl')}" />
        <th><g:message style="width: 250px" code="packet.artikel.label" default="   Artikel    " /></th>
        <th><g:message code="packet.artikel.label" default="   Steuer in %   " /></th>
        <th><g:message code="packet.artikel.label" default="   Preis pro Stück in €  " /></th>
        <th><g:message code="packet.artikel.label" default="   Preis Gesammt in € " /></th>
    </tr>
</thead>
<tbody>
    <g:each in="${packetInstanceList}" status="i" var="packetInstance">
        <tr class="${(i % 2) == 0 ? 'odd' : 'even'}">
            <td><g:link controller="packet" action="show"  id="${packetInstance.id}">${fieldValue(bean: packetInstance, field: "id")}</g:link></td>
            <td><input name="q" class="st" type="text" style="background-color:transparent;border:0px solid white;" value="${fieldValue(bean: packetInstance, field: "anzahl")}" onclick="if (this.value=='Search') {this.value = '';}" readonly="true"/>
            <!--  ${fieldValue(bean: packetInstance, field: "anzahl")}    -->
            </td>
            <td nowrap>${fieldValue(bean: packetInstance, field: "artikel")}</td> 
```

创建一个包含多行的 html

```
 <tr class="even">
            <td><a href="/test/packet/show/17">17</a></td>
            <td><input name="q" class="st" type="text" style="background-color:transparent;border:0px solid white;" value="1,222" onclick="if (this.value=='Search') {this.value = '';}" readonly="true"/>
                <!--  1,222    -->
            </td>
            <td nowrap> Blueray,Arthouse </td>
            <td> <input type="text" style="background-color:transparent;border:0px solid white;" class="input-steuer" value="19"/> </td>
            <td> <input type="text" style="background-color:transparent;border:0px solid white;" class="input-value"  /> </td>
            <td> <input type="text" style="background-color:transparent;border:0px solid white;" class="output-value" readonly />
            </td>
        </tr>
        <tr class="odd">
            <td><a href="/test/packet/show/18">18</a></td>
            <td><input name="q" class="st" type="text" style="background-color:transparent;border:0px solid white;" value="100" onclick="if (this.value=='Search') {this.value = '';}" readonly="true"/>
                <!--  100    -->
            </td>
            <td nowrap> Blueray,Arthouse </td>
            <td> <input type="text" style="background-color:transparent;border:0px solid white;" class="input-steuer" value="19"/> </td>
            <td> <input type="text" style="background-color:transparent;border:0px solid white;" class="input-value"  /> </td>
            <td> <input type="text" style="background-color:transparent;border:0px solid white;" class="output-value" readonly />
            </td>
        </tr>
            <td> <input type="text" style="background-color:transparent;border:0px solid white;" class="input-steuer" value="19"/> </td>
            <td> <input type="text" style="background-color:transparent;border:0px solid white;" class="input-value"  /> </td>
            <td> <input type="text" style="background-color:transparent;border:0px solid white;" class="output-value" readonly />
            </td>
        </tr>
    </g:each> 
```

如您所见，这些行具有相同的类。

这是jquery代码：

```
$(document).ready(function() {
    $(".input-value").keyup(function() {
        // var output = $(".output-value");
        var test = 0;

        $('.input-value').each(function() {
            var value = parseFloat($(this).val());
            var value3 = parseFloat($(".st").val());
            var value2 = parseFloat($(".input-steuer").val());

            //output.val(((value - value * value2/100)*value3).toFixed(2));
            score = ((value - value * value2/100)*value3);
            score = score.toFixed(2);
            //output.val(score);
            test+=score;
        });

        $(".output-value").val(test);
    });
}); 
```

这仅计算第一行而不是每一行，我希望每一行都有一个输出和所有输出的总和，但我不习惯 javascript...

感觉很简单，但不适合我。

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:31:43.300

```
$(".input-value").keyup(function() {

    var value = parseFloat($(this).val());
    var value2;
    var value3;var temp=0;var temp1 = 0;
    $(this).parent().siblings().each(function() {
        if ($(this).children().hasClass('input-steuer')) {
            value2 = $(this).children().val();
        }
        if ($(this).children().hasClass('st')) {
            value3 = $(this).children().val();
        }
    });
    score = ((value - value * value2 / 100) * value3);
    $(this).parent().next('td').children('.output-value').val((score).toFixed(2));
    $('.output-value').each(function(){
        temp1 = $(this).val();        
        alert(temp1);
        if(temp1 == 'NaN' || temp1 == '') {
           temp1 = 0.0; 
        }
        temp = parseFloat(temp) + parseFloat(temp1); 
    });
    $('#wholesum').val(temp.toFixed(2));
});​ 
```

祝你今天过得愉快！

# javascript - 在 iPad 上使用 JS 缓存图像

> ID：10995683
> 
> 赞同：4
> 
> 时间：2012-06-12T11:25:41.410
> 
> 标签：javascript, ipad, html, caching

我正在开发一个用于 iPad 的纹理选择器。所以基本上只是一堆图像元素。为了避免图像重新加载和滞后，我`Image`在 JS 中缓存和重用对象。这样的

```
/**
 * Asynchronous version of memoize for use with callback functions. Asserts
 * that last argument is the callback.
 *
 * @param  {Function} func
 * @return {Function}
 */
 util.memoize.async = function(func) {
    var cache = {};
    return function() {
        var hash = JSON.stringify(arguments);
        var args = Array.prototype.splice.call(arguments, 0);
        var callback = args.pop();
        if (hash in cache) {
            return callback.apply(this, cache[hash]);
        }
        args.push(function() {
            cache[hash] = Array.prototype.splice.call(arguments, 0);
            callback.apply(this, cache[hash]);
        });
        return func.apply(this, args);
    };
};

/**
 * Creates new Image element and calls back with loaded image.
 * @param {string} url
 */
io.GetImage = function(url, callback) {
    var img = new Image();
    img.onload = function() {
        callback(img);
    };
    img.src = url;
};

picker.image_ = util.memoize.async(io.GetImage); 
```

然后，每当我需要图像时，我都会调用`picker.image_`并获取缓存的图像。它在桌面、Chrome、Firefox、Safari 上完美运行，但在 iPad 上，我得到的是空（未加载）图像。这是为什么？我真的很喜欢这种方法，它表现得非常好。

看起来好像 Mobile Safari 在从 DOM 中删除图像数据时会丢弃它。可以吗？

**更新**：为了澄清，正在加载的数据是动态的，因此它不是[AppCache](http://www.alistapart.com/articles/application-cache-is-a-douchebag/)最合适的用例。

**更新***：没有完全令人满意的答案，这是我的解决方案。请注意，复制方法非常慢。

```
/**
 * Creates new Image element and calls back with loaded image.
 * @param {string} url
 */
var GetImage = function(url, callback) {
    var img = new Image();
    img.onload = function() {
        callback(img);
    };
    img.src = url;
};

/**
 * @param {number} num maximum number of stored images
 */
var ImagePool = function(num) {
    this.limit_ = num;
    this.canvases_ = {};
    this.order_ = [];
};

/**
 * Retrieve image from cache.
 *
 * @param  {string}   url      URL of request image
 * @param  {function(HTMLCanvasElement)} callback
 */
ImagePool.prototype.get = function(url, callback) {
    if (this.canvases_[url] !== undefined) {
        callback(this.copy_(url));
    } else {
        if (this.limit_ && this.order_.length == this.limit_) {
            delete this.canvases_[url];
            this.order_.pop();
        }
        GetImage(realUrl, function(img) {
            var c = document.createElement('canvas');
            c.width = img.width;
            c.height = img.height;
            var ctx = c.getContext('2d');
            ctx.drawImage(img, 0, 0);

            this.canvases_[url] = c;
            this.order_.unshift(url);
            callback(this.copy_(url));
        }.bind(this));
    }
};

/**
 * @param  {string} url
 * @return {HTMLCanvasElement}
 * @private
 */
ImagePool.prototype.copy_ = function(url) {
    var c = document.createElement('canvas'),
        cached = this.canvases_[url];
    c.width = cached.width;
    c.height = cached.height;
    var ctx = c.getContext('2d');
    ctx.drawImage(cached, 0, 0);
    return c;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:45:30.550

我认为使用 HTML 5 离线应用程序缓存可以最好地解决您的问题。您列出要缓存的资源，在用户访问请求这些资源的页面后，它们会被缓存以供以后使用。您仍然需要让您的 UI 等到您的图像被加载，但是一旦它们被加载，您就不必担心它们仅仅因为它们不在 DOM 中而被丢弃（[这个 SO 问题](https://stackoverflow.com/questions/4162955/cache-images-offscreen-in-mobile-safari)表明图像位于 DOM 中，但未显示在屏幕上，也会被丢弃）。

显然，Safari Mobile 有 5MB 的缓存限制，可以通过要求用户同意扩展来增加（[来源](https://stackoverflow.com/questions/2908459/mobile-safari-5mb-html5-application-cache-limit/10195265#10195265)）。[这篇博文](http://techblog.viewbook.com/2011/02/mobile-safari-offline-application-cache-limit/)中的一条评论表明，这个扩展提示在 iOS 4 之后就可以使用了。

有用的网址：

*   [Apple Developer Guide for HTML 5 Storage](https://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/OfflineApplicationCache/OfflineApplicationCache.html#//apple_ref/doc/uid/TP40007256-CH7-SW1) - 有关在 Safari 中使用 HTML 5 离线应用程序存储的一些文档。

*   [概述类似性质的 iPhone 问题的博客文章](http://www.phpied.com/iphone-caching/)- 这是一篇较旧的博客文章 (2009-2010)，但作者对使用 HTML 5 功能有一些很好的建议（在标题“HTML5 离线应用程序缓存”下）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T17:21:16.070

如果您将 Image 对象直接附加到 DOM，您可能会在删除时丢失它，您可以在删除或附加之前尝试克隆它

```
function clone(obj) {
  if (null == obj || "object" != typeof obj) return obj;
  var copy = obj.constructor();
  for (var attr in obj) {
    if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];
  }
  return copy;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T20:07:08.317

您是否尝试过在服务器上设置适当的标头并让浏览器管理缓存而不是使用此方案？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T10:15:49.277

我会使用嵌入式图像 src base64 编码。只需检查[这里](http://www.greywyvern.com/code/php/binary2base64/)

因此，您可以根据需要将数据存储为 JSON 格式的字符串，并在需要时将其取回，如果您从不同的 URL 调用图像，也可以将其保存到 localStorage。

是的，它会给您带来巨大的 html 内容和存储空间，但在您的情况下，这绝对值得。

# cocos2d-iphone - 在 CCDelayTime 之后调用选择器

> ID：10995687
> 
> 赞同：0
> 
> 时间：2012-06-12T11:26:05.360
> 
> 标签：cocos2d-iphone

所以我有一个选择器需要在一定的延迟/间隔后执行，但我仍然找不到解决方案。放在in`CCDelayTime`之前不起作用。但它的工作原理是简单地放置类似or的东西。`CCCallFunc``CCSequence``schedule:interval:``performselector:afterdelay`

```
 if (shootDelay > kBlastBombLaunchingDelay) {
        [self createFireProgressBar];
        action = [CCSequence actions:
                  [CCDelayTime actionWithDuration: kBlastBombLaunchingDelay],
                  [CCCallFunc actionWithTarget:self selector:@selector(launchBomb)],
                  nil];
        //[self performSelector:@selector(launchBomb) withObject:nil afterDelay:kBlastBombLaunchingDelay];
        //[self schedule:@selector(launchBomb) interval:kBlastBombLaunchingDelay];
        shootDelay = 0;
    }

[self runAction:action]; 
```

不知何故，选择器`launchBomb`没有被调用。对不起这个愚蠢的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:29:28.523

~~你似乎没有打电话：~~

 ~~```
[self runAction:action]; 
```~~  ~~## 用户找到了自己的解决方案

我想我已经找到了解决方案。就像我之前说的，这是一个愚蠢的问题，错误是因为我的算法混乱。为 CCDelayTime 设置一个低于 kBlastBombLaunchingDelay 的值，并将 if 位置更改为更改我的英雄状态的语句。它现在有效。~~

# dojo - dojo.aspect 和 dojox.lang.aspect 的实现区别是什么

> ID：10995689
> 
> 赞同：0
> 
> 时间：2012-06-12T11:26:18.887
> 
> 标签：dojo

在实现面向方面的编程时，我很困惑为什么 Dojo 必须有两个不同的方面库文件？

何时使用

```
dojo.aspect and dojox.lang.aspect ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:40:32.600

我以前从未听说`dojox.lang.aspect`过，但根据`git log`最新的提交日期到 2008 年。

`dojox.lang.aspect`您可以在其作者 Eugene Lazutkin 的一篇文章中找到解释为什么存在： [JavaScript 的 AOP 方面与 Dojo](http://lazutkin.com/blog/2008/may/18/aop-aspect-javascript-dojo/)。

> 虽然在某些情况下它没有多大意义，但我们应该意识到 的主要作用`dojo.connect()`是处理 DOM 事件。
> 
> [...]
> 
> 总结一下：事件！= AOP。事件不能模拟 AOP 的方方面面，也不能用 AOP 代替事件。
> 
> 所以 JavaScript 中的 AOP 听起来很简单！好吧，实际上有几个棘手的地方：
> 
> *   将每一个建议都作为一个函数来实现是很昂贵的。
>     *   通常迭代比递归调用更有效。
>     *   调用堆栈的大小是有限的。
>     *   如果我们有链式调用，就不可能重新排列它们。因此，如果我们想在中间删除一个建议，我们就不走运了。
>     *   “around”通知将“吃掉”所有先前附加的“before”和“after”通知，改变它们的执行顺序。我们不能再保证“之前”通知在所有“周围”通知之前运行，等等。
> *   通常为了从原始函数中解耦“环绕”通知，使用proceed()函数。调用它会导致调用 next-in-chain around advice 方法或原始方法。
> *   我们的方面是一个对象，但在某些情况下我们希望它是一个静态对象，在其他情况下我们希望它是一个动态对象，创建时考虑到我们操作的对象的状态。
> 
> 这些和其他一些问题在 dojox.lang.aspect 中得到解决（目前在主干中，将在 Dojo 1.2 中发布）。

从最新的 Dojo 1.7 开始，有一种区分*事件*和*方面*的强烈趋势，即在`dojo/on`和之间`dojo/aspect`（两者都是通过`dojo.connect`之前实现的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:11:43.423

从使用的角度来看，dojo/aspect 是 dojox/lang/aspect 的一个非常简化的版本。
使用dojo/aspect，您可以创建与命名函数相对应的方面（例如“xhr”类中的“get”方法），允许您在任何时候调用xhr.get 时创建一个before、after 或around 通知。

另一方面，(TMHO) 只有 dojox/lang/aspect 提供了足够的功能来玩 aop。它允许您使用正则表达式定义切入点，因此允许诸如“对任何名称以 get 开头的任何对象的任何函数执行环绕建议”...

您甚至可以传入将应用方面的函数名称或正则表达式的数组。

phusick 指出的博客文章提供了很好的例子。

# c# - 如何在 Azure 中保留文件而不覆盖

> ID：10995691
> 
> 赞同：1
> 
> 时间：2012-06-12T11:26:25.870
> 
> 标签：c#, asp.net, azure, azure-storage

我们正在为我们的应用程序使用 azure。每次我通过 Visual Studio 部署新版本的应用程序时，它都会从 azure 存储中删除所有文件，并从我的本地文件中放入新版本。我想要做的是保持服务器上的一些文件不变，即当我部署新版本时，这些特殊文件不会被我的本地版本覆盖。可能吗？我有一些不想覆盖的 Lucene 索引，也不想将其移动到 blob 存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:33:35.793

将服务定义的 LocalStorage::cleanOnRecycle 属性设置为 false：

[Worker 角色服务定义](http://msdn.microsoft.com/en-us/library/gg557552#LocalStorage)

# android - 嵌套 startActivityForResult()

> ID：10995692
> 
> 赞同：4
> 
> 时间：2012-06-12T11:26:28.060
> 
> 标签：android, android-activity

我有一个`Activity A`调用`Activity B`using `startActivityForResult()`。在某些情况下`Activity B`需要调用`Activity C`另一个结果，所以我`startActivityForResult()`再次使用该方法。

但是，当 I`setResult()`和`finish()`in时`Activity C`，它会调用`onActivityResult()`in`Activity A`而不是`Activity B`.

有没有办法解决这个问题？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T12:05:03.637

不确定我是否理解。

你的意思是这是你希望的场景：

A -> B -> C ; B <- C , A <- B

但目前的情况是：

A -> B -> C ; A <- C

其中 -> 表示“调用活动”，<- 表示“从中获取结果”。

也许你只是在活动 B 上调用了“finish()”，或者你已经为它设置了“noHistory=true”？

# ios5 - 是否可以在 iOS 终端中使用 gdb？

> ID：10995693
> 
> 赞同：1
> 
> 时间：2012-06-12T11:26:36.187
> 
> 标签：ios5, ios4, xcode4.2

我基本上来自linux背景，一旦我的应用程序在iPhone设备或iPhone模拟器中启动，有可能在终端中使用gdb吗？

# c# - 对覆盖接口实现的虚拟调用

> ID：10995697
> 
> 赞同：0
> 
> 时间：2012-06-12T11:27:14.670
> 
> 标签：c#, interface, virtual

如果我有两个类既实现了接口又继承了，我需要使函数虚拟吗？例如给定：

```
interface IDoSomething
{
    void DoSomething();
}

class A : IDoSomething
{
    public void DoSomething()
    {
        //do A
    }
}

class B : A
{
    public new void DoSomething()
    {
        //do B
    }
} 
```

下面的代码会做A还是B？

```
IDoSomething doer = new B();
doer.DoSomething(); //do A or do B? 
```

我很困惑，因为我的印象是所有接口调用实际上都是虚拟的，但显然我正在使用 new 运算符来隐藏基本定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:29:41.987

[这](https://stackoverflow.com/a/3621456/1004522)是解释。已经在 stackoverflow 论坛上可用。

> 在此处通过 CSharp 第 3 版从 CLR 引用 Jeffrey Ritcher
> 
> CLR 要求将接口方法标记为虚拟。如果您没有在源代码中明确将方法标记为虚拟，则编译器会将方法标记为虚拟和密封；这可以防止派生类覆盖接口方法。如果显式将该方法标记为虚拟，则编译器将该方法标记为虚拟（并使其未密封）；这允许派生类覆盖接口方法。如果接口方法是密封的，则派生类不能覆盖该方法。但是，派生类可以重新继承相同的接口，并且可以为接口的方法提供自己的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:28:54.713

```
class A : IDoSomething
{
    public virtual void DoSomething()
    {
        //do A
    }
}

class B : A
{
    public override void DoSomething()
    {
        //do B
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:32:53.470

我更喜欢`leppie`的解决方案。如果这不是一个选项：

```
class A : IDoSomething
{
    void IDoSomething.DoSomething()
    {
        //do A
    }
}

class B : A
{
    void IDoSomething.DoSomething()
    {
        //do B
    }
} 
```

但请注意，这将隐藏实现，所以你不能做`((A)doer).DoSomething()`.

如果您不能将 A 类更改为这些解决方案中的任何一个，我认为在所有情况下都没有确定的方法来覆盖它。您既可以显式实现接口，也可以`public new`在 B 上创建一个方法。这样，如果它被静态称为 an`IDoSomething`或 a `B`，它将使用 B 的实现，但如果它被称为 an `A`，它仍将使用`A`' 实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T15:12:33.343

尽管 C# 和 .net 允许派生类重新实现接口方法，但通常最好让基类使用虚拟方法来实现接口，并让派生类覆盖该方法，在派生类可能出现的任何情况下希望增加而不是完全替换基类实现。在像 vb.net 这样的一些语言中，这可以直接完成，而不管类是否公开了与正在实现的接口成员具有相同名称和签名的公共成员。在 C# 等其他语言中，实现接口的公共方法可以标记为未密封和虚拟（允许派生类覆盖它并进行覆盖调用`base.Member(params)`，但显式接口实现不能。在这些语言中，最好的方法是像：

```
类 MyClass : MyInterface
{
  void MyInterface.DoSomething(int param)
  {
    做某事（参数）；
  }
  受保护的虚拟 void doSomething(int param)
  {
    ...
  }
}
类 MyClass2 : MyClass
{
  受保护的覆盖无效doSomething（int param）
  {
    ...
    base.doSomething（参数）；
    ...
  }
}

```

在某些情况下，让接口实现包装虚拟调用可能是有利的，因为它允许基类确保某些事情发生在被覆盖的函数之前或之后。例如，Dispose 的非虚拟接口实现可以包装虚拟 Dispose 方法：

```
  int DisposingFlag; // System.Boolean 不适用于 Interlocked.Exchange
  无效 IDisposable.Dispose()
  {
    if (Threading.Interlocked.CompareExchange(DisposingFlag, 1, 0) == 0)
    {
      处置（真）；
      处置标志 = 2;
      Threading.Thread.MemoryBarrier();
      GC.SuppressFinalize(this);
    }
  }
  public bool Disposed { get {return (DisposingFlag != 0);} }
  public boolfullyDisposed { get {return (DisposingFlag > 1);} }

```

这将（与 Microsoft 的默认包装器不同）确保`Dispose`只被调用一次，即使多个线程尝试同时调用它。此外，它使`Disposed`属性可用。使用微软的包装器，每个需要标志的派生类`Disposed`都必须定义自己的；即使基类`Disposed`标志是受保护的或公共的，使用它也不安全，因为直到派生类已经开始清理之后才会设置它。包装内的设置`DisposingFlag`避免了这个问题。

# algorithm - 如何使用双向 BFS 找到最短路径？

> ID：10995699
> 
> 赞同：18
> 
> 时间：2012-06-12T11:27:26.887
> 
> 标签：algorithm, path-finding, shortest-path, breadth-first-search, bidirectional

如何使用双向 BFS 找到最短路径？假设有一个 6x6 网格。起点在 (0,5)，终点在 (4,1)。使用双向 bfs 的最短路径是什么？没有路径成本。它是无向的。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-01T14:30:39.183

**双向 BFS 如何工作？**

从源顶点和目标顶点同时运行两个 BFS，一旦发现两个运行共有的顶点就终止。该顶点将位于源和目标之间。

**为什么它比 BFS 更好？**

在大多数情况下，双向 BFS 将产生比简单 BFS 更好的结果。假设源和目标之间的距离是`k`，分支因子是`B`（每个顶点平均有 B 条边）。

*   BFS 将遍历`1 + B + B^2 + ... + B^k`顶点。
*   双向 BFS 将遍历`2 + 2B^2 + ... + 2B^(k/2)`顶点。

对于大`B`和`k`，第二个显然比第一个快得多。

* * *

**在你的情况下：**

为简单起见，我将假设矩阵中没有障碍。这是发生的事情：

```
iteration 0 (init):
front1 = { (0,5) }
front2 = { (4,1) }

iteration 1: 
front1 = { (0,4), (1,5) }
front2 = { (4,0), (4,2), (3,1), (5,1) }

iteration 2:
front1 = { (0,3), (1,4), (2,5) }
front2 = { (3,0), (5,0), (4,3), (5,2), (3,2), (2,1) }

iteration 3:
front1 = { (0,2), (1,3), (2,4), (3,5) }
front2 = { (2,0), (4,4), (3,3), (5,3), (2,2), (1,1), }

iteration 4:
front1 = { (0,1), (1,2), .... }
front2 = { (1,2) , .... } 
```

现在，我们发现前沿在 (1,2) 处相交，以及从源顶点和目标顶点到达那里的路径：

```
path1: (0,5) -> (0,4) -> (0,3) -> (0,2) -> (1,2)
path2: (4,1) -> (3,1) -> (2,1) -> (1,1) -> (1,2) 
```

我们现在只需要反转路径 2 并将其附加到路径 1（当然要删除一个常见的相交顶点），从而为我们提供完整的路径：

```
(0,5) -> (0,4) -> (0,3) -> (0,2) -> (1,2) -> (1,1) -> (2,1) -> (3,1) -> (4,1) 
```

# android - Integer[] 在 Intent#putExtra(...) 中不起作用

> ID：10995700
> 
> 赞同：0
> 
> 时间：2012-06-12T11:27:37.480
> 
> 标签：android, arrays, android-intent, extra

我想将一个`int[]`放入 Android Intent 中。由于各种原因，我得到了一个`LinkedList<Integer>`，所以我（大致）尝试了这个：

```
LinkedList<Integer> myList = getIntegerList();
Intent intent = new Intent (context, class);
intent.putExtra("com.me.INTARRAY",  myList.toArray()); 
```

这没有用，因为`toArray()`给了我一个`Object[]`. 我以为我可以通过这样做来解决它

```
intent.putExtra("com.me.INTARRAY", (Integer[]) myList.toArray(new Integer[myList.size()]) ) 
```

这确实产生了`Integer[]`; 但是，将其从`Intent`STILL 中取出是行不通的。

最终，使用循环解决这个问题并不太难，`for`所以我比任何其他原因都更加好奇，但是......你如何让`Integer[]`一个`Intent`额外的，就好像它是一个`int[]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:16:28.320

我还没有彻底测试过，但我相信它应该可以工作。你可以试试。

```
Integer[] integerArray = {/*something */ };
intent.putExtra("com.me.INTARRAY",  integerArray); 
```

然后（不工作）

~~Integer[] newArray = (Integer[]) getIntent().getSerializableExtra("com.me.INTARRAY");~~

**编辑：** 啊..经过一些研究和测试，以上似乎是*不可能*的。这是不可能的，因为编译器必须遍历每个元素来验证转换。一个解决方案（这次我已经测试了它）将改为这样做：

```
Object[] s = (Object[]) getIntent().getSerializableExtra("com.me.INTARRAY");
Integer[] newArray = Arrays.copyOf(s, s.length, Integer[].class); 
```

我在这里找到了解释：[Deserializing Arrays on Android](https://stackoverflow.com/questions/8419028/deserializing-arrays-on-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:38:21.640

您可以将数组更改为 int[] 并使用[putExtra(java.lang.String, int[])](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20int%5B%5D%29)将其作为附加值传递。另一方面，您需要使用[getIntArrayExtra](http://developer.android.com/reference/android/content/Intent.html#getIntArrayExtra%28java.lang.String%29)来获得额外的东西。

这是工作正常的代码，调用者优先，接收者如下：

```
LinkedList<Integer> myList = getIntegerList();;
int iArray[] = new int[myList.size()];
for (Integer i : myList)
iArray[myList.indexOf(i)] = i;
Intent intent = new Intent();// create your actual intent
intent.putExtra("com.your.package.name.int", iArray);
startActivity(intent); 
```

另一边：

```
int array[] = getIntent().getExtras().getIntArray("com.your.package.name.int"); 
```

另一种替代方法（我猜这更好）是将 LinkedList 转换为 Integer ArrayList。其工作原理如下，发送者先接收者，然后是接收者。

```
intent.putIntegerArrayListExtra("com.your.package.name.array", new ArrayList<Integer>(myList)); 
```

另一方面：

```
ArrayList<Integer> array = getIntent().getExtras().getIntegerArrayList("com.your.package.name.array"); 
```

希望这可以帮助 ：）

# .net - 调试 .NET Web 服务：超时

> ID：10995702
> 
> 赞同：2
> 
> 时间：2012-06-12T11:27:42.863
> 
> 标签：.net, web-services, iis

我在 IIS 上调试 .NET webservice hostet。

设置断点等时很容易超时，并且网络服务将停止。

有没有简单的方法来禁用超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:29:26.873

转到 IIS 管理器 (inetmgr.exe)，选择您的应用程序池，然后禁用`Ping`.

[进一步阅读](http://technet.microsoft.com/en-us/library/cc725836%28v=ws.10%29.aspx)。

# windows - TeamViewer 或 VNC 在慢速网络上？

> ID：10995703
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:27:47.217
> 
> 标签：windows, networking, vpn, lan, vnc

我的网络很慢，很慢可能是因为过滤流量的工具和我们运行 VPN，所以有时当我在网络上的一台 PC 上运行 TeamViewer 时，我获取 ID 和 PW 并尝试从网络外的 PC 连接它只接受 ID 和 PW 并挂起，不显示任何内容，我认为这是因为网络太慢了吧？

所以我想知道 VNC 会是更好的解决方案吗？我知道即使您在快速 LAN 网络上运行 VNC 也很慢，但我认为它很慢，因为它的协议是这样制作的，除此之外我认为它会比 TeamViewer 更可靠？

还建议我“最好的” VNC 服务器和客户端。

也欢迎其他建议。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T13:27:21.467

Teamviewer 对我来说非常有问题，而且 CPU 有点重，特别是在非 Windows 机器上使用它时。[然而， Hamachi](http://hamachi.en.softonic.com/)过去对我来说效果很好。

我建议您使用 Hamachi 设置虚拟“VPN”，然后使用内置客户端/服务器进行远程桌面访问。在 Ubuntu 中，使用标准的屏幕共享，即使用 VNC 服务器/客户端；在 Windows 中，使用 Microsoft 的远程桌面连接，在 Mac 上，使用标准桌面共享服务（这是一个 VPN 服务/服务器，但似乎只能与 Apple 客户端完美配合）。

# mysql - 在mysql中声明函数时工作台错误

> ID：10995704
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:27:50.773
> 
> 标签：mysql, mysql-workbench

这是我在mysql中的脚本

```
CREATE DEFINER=`root`@`192.168.1.9` 
FUNCTION `InsertIntoCallLog`(CallerID VARCHAR(15), ChannelNo INT) 
RETURNS varchar(36)
BEGIN
    DECLARE CallID VARCHAR(36);
    SET CallID = UUID();
    RETURN CallID
END 
```

我在 MySql Workbench CE 中编写了这个脚本。它不应用它并用红线在“End”下划线，并在 End 附近显示语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:28:53.330

您在 . 之后缺少一个分号`RETURN CallID`。

# maven - maven中的多个可重用模块

> ID：10995705
> 
> 赞同：0
> 
> 时间：2012-06-12T11:27:58.367
> 
> 标签：maven, intellij-idea

我在 IDEA 中设置了几个 java 模块，我想对它们进行 mavenize。这些 java 模块使用彼此的类。

我不太确定我应该如何处理这个问题，我决定使用 IDEA 在 maven 项目中添加模块。因此，首先我创建了一个 maven 项目，我们将其命名为 pm1，它有一个类，我们将其命名为 TempClass1。现在这个类可以在其他 maven 项目中使用。因此，我添加了另一个 maven 模块 - pm11 并尝试在 pm11 中使用 TempClass1。它起作用了，我注意到 IDEA 在 pm11 中添加了 pm1 的模块依赖项。所以整个结构看起来像 -

![Maven 项目](../Images/ad696d765ed2cc5870282d501e69bcb8.png)

但是现在当我`mvn test`从 pm11 执行时，它会失败并显示错误消息`package package1 does not exist`，在我看来这是因为 package1 在不同的 maven 项目中。而且我不确定如何使用驻留在不同 Maven 项目中的类。我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:51:38.447

您可以使用其他 maven 项目的类，只要在`pom.xml`. 确保定义了依赖项，并且它的范围是未定义的或相关的（`provided`例如，如果范围是，您可能会遇到问题）。

# objective-c - 如何在 screenfeeder 应用程序中实现类似卡片的效果

> ID：10995708
> 
> 赞同：1
> 
> 时间：2012-06-12T11:28:10.270
> 
> 标签：objective-c, ios, components

谁能指导我如何在[screenfeeder 应用程序](http://www.youtube.com/watch?v=2miCBkA57Ho)中实现类似卡片的效果？更具体地说，我使用核心数据来存储图书实体。我知道如何使用 tableviewcontroller 从核心数据中显示书籍列表。但我希望在screenfeeder中使用类似卡片的效果来显示书籍列表，我不知道如何开始。

# jquery - 已编辑元素的 ID + make 插件

> ID：10995710
> 
> 赞同：0
> 
> 时间：2012-06-12T11:28:14.683
> 
> 标签：jquery, plugins, edit

我有一些 DIV 和脚本，可以编辑此 DIV 中的文本。单击时 - 脚本将 DIV 替换为 TEXTAREA，用户可以编辑 TEXT。在模糊 - 脚本必须删除 TEXTAREA 并将编辑的文本插入 DIV。1.但是脚本替换了页面中的所有DIV，不仅是编辑过的... 2.我想用这个脚本制作插件。编辑其他元素，如 H1、H2。ETC...

[http://jsfiddle.net/ynternet/4a44G/1/](http://jsfiddle.net/ynternet/4a44G/1/)

HTML

```
<div>Please click me DIV 1!!</div>
<div>Please click me DIV 2!!</div>
<div>Please click me DIV 3!!</div>
<h1>Please click me H1 1!!</h1 >
<h1>Please click me H1 2!!</h1 >
<h1>Please click me H1 3!!</h1 > 
```

jQuery

```
 $(document).ready(function() {     

   $("div").click(function() {
       if ($(this).children('input').length === 0) {
            var inputbox = "<input type='text' class='inputbox' value=\""+$(this).text()+"\">";
          $(this).html(inputbox);
          $("input.inputbox").focus();         
          $("input.inputbox").blur(function() {
             var value = $(this).val();
             $("div").text(value);
        });
      }
   });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:31:28.773

看看这个小提琴：http: [//jsfiddle.net/4a44G/13/](http://jsfiddle.net/4a44G/13/)

```
$("div").text(value); 
```

选择 type 的所有元素`div`，但您必须选择文本框父 div，因此您必须编写：

```
$("input.inputbox").blur(function() {
    var value = $(this).val();
    $(this).parent().text(value);
}); 
```

如果标记可以更改，您还可以编写：

```
$(this).closest('div').text(value); 
```

小提琴：http: [//jsfiddle.net/4a44G/9/](http://jsfiddle.net/4a44G/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:24:31.573

试试这个 $(document).ready(function() {

```
$("div").click(function() {
    if ($(this).children('input').length === 0) {
            var nID=$(this);
        var inputbox = "<input type='text' class='inputbox' value=\""+$(this).text()+"\">";
        $(this).html(inputbox);
        $("input.inputbox").focus();         
        $("input.inputbox").blur(function() {
            var value = $(this).val();
            $(nID).text(value);
        });
    }
});

 $("h1").click(function() {
    if ($(this).children('input').length === 0) {
            var nID=$(this);
        var inputbox = "<input type='text' class='inputbox' value=\""+$(this).text()+"\">";
        $(this).html(inputbox);
        $("input.inputbox").focus();         
        $("input.inputbox").blur(function() {
            var value = $(this).val();
            $(nID).text(value);
        });
    }
}); 
```

});

# php - add_action 的问题

> ID：10995711
> 
> 赞同：1
> 
> 时间：2012-06-12T11:28:18.100
> 
> 标签：php, wordpress

我正在尝试在 wordpress 中创建一个插件，并且仅在查看菜单页面时才希望在标签区域中包含一个 JS 脚本。

```
add_action('admin_menu', 'register_custom_menu_page');

function register_custom_menu_page() {
  add_menu_page('Home', 'PCPAL', 'manage_options',  'pcpalmain', 'da_controller',   '', 99);
}

function DA_controller()
{
   add_action('admin_head', 'da_admin_head');
}

function da_admin_head()
{
  echo "<script type='text/javascript' src='".plugins_url('js/pcpal.js', __FILE__)."'></script>";
} 
```

如果我移动 add_action('admin_head', 'da_admin_head'); 则此脚本有效 在 DA_function 函数之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:09:40.017

1.  您以错误的方式包含 JS `enqueue`->`http://codex.wordpress.org/Function_Reference/wp_enqueue_script`
2.  您的第一个 add_action 转到`admin_head`您需要使用的`admin_init`

关于入队的教程
[http://halfelf.org/2012/jquery-why-u-no-enqueued/](http://halfelf.org/2012/jquery-why-u-no-enqueued/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T19:19:50.447

你的代码有很多问题......让我帮你纠正它......这是你的代码

```
1\. add_action('admin_menu', 'register_custom_menu_page');

2\. function register_custom_menu_page() {
3\.  add_menu_page('Home', 'PCPAL', 'manage_options',  'pcpalmain', 'da_controller',   '', 4\. 99);
5\. }

6\. function DA_controller()
7\. {
8\.    add_action('admin_head', 'da_admin_head');
9\. }

10\. function da_admin_head()
{
11\.  echo "<script type='text/javascript' src='".plugins_url('js/pcpal.js', __FILE__)."'></script>";
} 
```

我添加了一些编号，以便我可以指出问题在哪里......

在第 1 行，您向 admin_menu 挂钩添加了一个函数。在第 3 行，您添加了一个名为 da_controller 的函数，用于创建管理菜单。

但是一个数字 6 你只是拼错了。

好吧，我今天没有足够的时间......但是这个编辑过的代码现在必须工作......

```
add_action('admin_menu', 'register_custom_menu_page');

function register_custom_menu_page() {
  add_menu_page('Home', 'PCPAL', 'manage_options',  'pcpalmain', 'da_controller',   '', 99);
}

function da_controller()
{   
   wp_enqueue_script( 'pcpal', 'js_url', array(), '1.0.0', false );

} 
```

# regex - NGINX 配置正则表达式问题

> ID：10995712
> 
> 赞同：0
> 
> 时间：2012-06-12T11:28:20.853
> 
> 标签：regex, configuration, nginx

我有点迷失在这里。在我的 nginx conf 文件中，我想要一个说明这一点的规则：

```
if $request_uri does not contain following words (css|images|js) then rewrite all to /index.php 
```

这是我得到的，但它不起作用：

```
if ($request_uri ~ !(images|css|js)) {
    rewrite $ /index.php;
} 
```

我认为正则表达式不匹配？

**编辑：这是解决方案**

```
if ($request_uri !~* (images|css|js)) {
    rewrite $ /index.php;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:44:35.117

1.  [IfIsEvil](http://wiki.nginx.org/IfIsEvil)和昂贵的。
2.  改用正逻辑。

最好将所有静态内容放在一个目录中。

```
-static 
 |--images
 |--css
 |--js

server {
  server_name www.foo.com;
  root /your_nginx_root/;

  location / {
    index  index.php;
  }

  location /static {
    add_header Cache_control "public";
    expires max;
  }

  error_page 301 302 400 401 402 403 404 405      /index.php;
  error_page 406 408 409 410 411 412 413 414      /index.php;
  error_page 415 416 495 496 497 500 501 502      /index.php;
  error_page 503 504 507                          /index.php;
} 
```

**编辑：* *试试这个

```
if ($request_uri !~* (images|css|js)) {
    rewrite $ /index.php;
} 
```

# javascript - FB.login 总是询问我的密码（即使我已经登录）

> ID：10995716
> 
> 赞同：1
> 
> 时间：2012-06-12T11:28:26.543
> 
> 标签：javascript, facebook, login, sdk, connect

我正在使用 Facebook Javascript SDK 来实现 Facebook Connect 操作。它已经在工作，但问题是每次我尝试在我的应用程序上再次登录时，用户都必须重新输入其 Facebook 密码。

如果您已经登录 facebook（我在很多网页中都看到过），我确信可以选择在不输入密码的情况下执行此步骤。但是怎么做？文档[http://developers.facebook.com/docs/reference/javascript/FB.login/](http://developers.facebook.com/docs/reference/javascript/FB.login/)甚至源代码都没有解释如何做到这一点：

“@param opts {Object}（*可选*）修改登录行为的选项。”

我现在的实现是这样的：

```
function login(){
  FB.login(function(response) {
   if (response.authResponse) {

     $(".fb_login").hide();
     $(".fb_logout").show();

     FB.api('/me', function(response) {
       register_user(response.id, response.name);
     });

   } else {
     alert('User cancelled login or did not fully authorize.');
   }
 });
 } 
```

我像这样调用 FB.init ：

```
FB.init({
  appId      : 'xxxxxxxxx', // App ID
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
}); 
```

调用 FB.login 时，可能必须更改 FB.init 或某种选项。有任何想法吗？

在此先感谢雷蒙博世。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:36:30.243

有一个方法[FB.getLoginStatus](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)可以用来检查用户是否已经登录：

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    var accessToken = response.authResponse.accessToken;
    //you are loggedin 
  } else if (response.status === 'not_authorized') {
    //loggedin but not authorized your app
  } else {
    // the user isn't logged in to Facebook.
  }
}); 
```

你的意思是这样的吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-02T09:39:44.863

在您的 PP 设置 facebbok developer>Your App> facebook login > setting > 将 Force Web OAuth Reauthentication 设置为 NO 中检查 [Force Web OAuth Reauthentication](https://developers.facebook.com/docs/facebook-login/reauthentication/)

# c# - 内联 Eval if 语句返回常量

> ID：10995717
> 
> 赞同：1
> 
> 时间：2012-06-12T11:28:32.427
> 
> 标签：c#, asp.net, if-statement, eval

我有一个 if 语句当前（错误地）写为：

```
<%# Eval("AccumHolidays").ToString() != "" ? Eval("AccumHolidays").ToString() : Eval("Holidays").ToString() != "" ? Eval("Holidays").ToString() : %> 0 <% %> 
```

这一直有效，直到我想在最后的 else 中输出 0。寻找类似的东西：

```
if(Eval("AccumHolidays").ToString() != "")
    Eval("AccumHolidays").ToString();
else
    if(Eval("Holidays").ToString() != "")
        Eval("Holidays").ToString();
    else
        Response.Write("0"); 
```

我可能有错误的论点，但是在 aspx 页面中放入的正确语句是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:33:31.070

我建议另一种方法，如果您不喜欢它，请随时忽略它。为什么不在您的数据源中像这样创建一个新属性

```
public string HolidaysText
{
    get
    {
        if (AccumHolidays.ToString() != "")
            return AccumHolidays.ToString();
        if (Holidays.ToString() != "")
            return Holidays.ToString();
        return "0";
    }
} 
```

然后你可以在你的页面中有一个简单的 Eval 语句

```
<%# Eval("HolidaysText") %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:39:01.913

```
<%# Eval("AccumHolidays").ToString() != "" ? 
Eval("AccumHolidays").ToString() : Eval("Holidays").ToString() != "" ? 
Eval("Holidays").ToString() : "0"%> 
```

# objective-c - MFMailComposeViewController：主题/文本不可编辑？

> ID：10995720
> 
> 赞同：0
> 
> 时间：2012-06-12T11:28:45.763
> 
> 标签：objective-c, ios, email, mfmailcomposeviewcontroller

我需要开发一个应用程序，该应用程序能够发送包含不允许用户编辑的自动内容（主题/文本）的邮件。有可能吗？

感谢您的建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:31:58.300

答案是不”。如果你想使用 MFMailComposeViewController 类，你必须注意[Apple 文档中的](https://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)这一段：

> **重要**邮件撰写界面本身是不可定制的，并且不能由您的应用程序修改。此外，在呈现界面后，您的应用程序不允许对电子邮件内容进行进一步的更改。用户仍然可以使用界面编辑内容，但程序更改会被忽略。因此，您必须在呈现界面之前设置内容字段的值。

用户可以（并且应该能够）在发送电子邮件之前更改他/她希望的任何内容。

如果您不想遵循 Apple 设置的这些规则，您可以在 iOS 应用程序中使用其他邮件框架。

# macos - 搞砸了我在 Zsh 中的路径？

> ID：10995722
> 
> 赞同：2
> 
> 时间：2012-06-12T11:28:54.357
> 
> 标签：macos, bash, zsh

我正在尝试使用 zsh 作为 bash 的替代品，但我似乎弄乱了 MacBook Air 上的系统路径。这是我的路径`.zshrc`：

```
export PATH=/usr/local/bin:/usr/local/sbin/:usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin 
```

一些命令喜欢`vim`正常工作，但标准喜欢`ls`并且`sed`正在返回如下错误：

```
zsh: command not found: ls 
```

我很确定这不仅仅是 zsh 问题，因为启动 bash 终端会产生类似的结果。

好像我在某处缺少一个重要的目录。有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T11:33:51.613

> `export PATH=/usr/local/bin:/usr/local/sbin/:usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin`

`/`前面有一个缺失`usr/bin`

所以应该是

```
export PATH=/usr/local/bin:/usr/local/sbin/:/usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin 
```

也许这可以解决您的问题。

# java - 包含单引号时，MessageFormat 不格式化

> ID：10995725
> 
> 赞同：16
> 
> 时间：2012-06-12T11:29:07.560
> 
> 标签：java

我正在传递由 {} 填充符和文本组合而成的文本。我正在尝试用一些值填充 {} 并尝试使用 MessageFormat。

```
String sss = "{0}SomeText{1}\'.{2}SomeText{2}SomeText{0}{0}SomeText{2}{0}SomeText{0}{1}SomeText{0}{2}{0}{0}{1}{0}{2}{0}{0}{2}{0}{0}{1}{0}{2}{0}";

Object[] testArgs = {"nits1", "Nits2","nits#"};

System.out.println(MessageFormat.format(sss,testArgs)); 
```

**输出**

```
nits1SomeTextNits2.{2}SomeText{2}SomeText{0}{0}SomeText{2}{0}SomeText{0}{1}SomeText{0}{2}{0}{0}{1}{0}{2}{0}{0}{2}{0}{0}{1}{0}{2}{0} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-12T11:34:14.173

必须使用双单引号对单引号进行转义：

```
String sss = "{0}SomeText{1}''.{2}S..." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-22T14:01:31.487

我的错误是，我没有使用方法*'format(..)'的返回值*

**错误代码：**

```
MessageFormat.format(sss, testArgs);
System.out.println(sss); 
```

**正确代码：**

```
String newString = MessageFormat.format(sss, testArgs);
System.out.println(newString); 
```

# actionscript-3 - 下拉多语言选择，在 textarea 中输入 enable

> ID：10995727
> 
> 赞同：0
> 
> 时间：2012-06-12T11:29:24.250
> 
> 标签：actionscript-3, multilingual

我正在做一个弹性项目。我想实现一个标题窗口，其中有一个带有多语言选项的下拉菜单，选择了一个选项，例如 no_NO 表示挪威语。现在用户应该能够在该窗口的文本区域中用挪威语书写。

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:33:09.453

Flex 提供了一种使用资源包和 ResourceManager 的机制。官方文档中应该有一些例子来支持运行时本地化。不久前我实现了一个小例子，它展示了如何避免在标记中使用资源：[本地化示例@github](https://github.com/floriansalihovic/L18nExample/)

# asp.net - 弹出窗口中的 Ajax 评级控制

> ID：10995730
> 
> 赞同：3
> 
> 时间：2012-06-12T11:29:31.047
> 
> 标签：asp.net, ajax, modalpopupextender

我正在开发一个页面来显示一些带有 asp .net fw3.5 的视频。该页面将显示带有缩略图的视频列表。当用户单击视频拇指时，我将打开一个弹出窗口并在弹出窗口中显示视频。视频中会有一个评分控件。用户可以使用 ajax 评分控件为视频投票。单击评级控件后，弹出窗口应保持显示。

我已经完成了一些编码，但问题是我无法在不进行回发的情况下获得评级控制的当前评级。我可以通过使用更新面板使弹出窗口始终可见，但如果我这样做，模式 popupextender 的关闭按钮将不起作用，并且我无法关闭模式弹出窗口。这是我的相关代码部分：

```
<asp:Button ID="Button1" runat="server" Style="display: none" />      
<asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" OkControlID="btnOkay"
    TargetControlID="Button1" PopupControlID="Panel1" PopupDragHandleControlID="PopupHeader"
    Drag="true" BackgroundCssClass="ModalPopupBG">
</asp:ModalPopupExtender>
  <asp:Panel ID="Panel1" runat="server" CssClass="PopupCss">
    <table style="width: 100%; height: 100%;">
        <tr>
            <td>
                <div id="mediaplayer">
                    JW Player goes here</div>
                <script type="text/javascript">
                    jwplayer("mediaplayer").setup({
                        flashplayer: "jwplayer/player.swf",
                        file: "<%=videoName %>",
                        image: "<%=videoThumb %>",
                        width: "100%",
                        height: "100%"
                    });
                </script>
            </td>
            <td valign="top" align="left" style="text-align: left;">
                <div class="fb-like" data-send="true" data-layout="button_count" data-show-faces="true">
                </div> 
                <br />
                <div class="fb-comments" data-href="<%=videoLink%>"
                    data-num-posts="3" data-width="470">
                </div>
                <br />
                <br />
                <br />
                <!-- AddThis Button BEGIN -->
                <div class="addthis_toolbox addthis_default_style ">
                    <a class="addthis_button_preferred_1"></a><a class="addthis_button_preferred_2">
                    </a><a class="addthis_button_preferred_3"></a><a class="addthis_button_preferred_4">
                    </a><a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style">
                    </a>
                </div>
                <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f61d99d08697325"></script>
                <!-- AddThis Button END -->
                <br />
                <br />
                <asp:Rating ID="Rating1" runat="server" MaxRating="5" StarCssClass="ratingStar" FilledStarCssClass="ratingStarFilled"
                    AutoPostBack="true" OnChanged="VideoRatingChanged" EmptyStarCssClass="ratingStarEmpty"
                    WaitingStarCssClass="ratingStarEmpty">
                    <asp:HiddenField ID="HiddenField1" runat="server" Value='<%=videoId%>' />
                </asp:Rating>
                &nbsp (<%=voteCount%>)
                <br />
                Minder Score:
                <%=minderScore %>
                <br />
                <div class="Controls" style="text-align: left;">
                    <input id="btnOkay" type="button" value="Kapat" />
                </div>
            </td>
        </tr>
    </table>
</asp:Panel> 
```

我怎样才能拥有所需的功能。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:22:02.147

最简单的方法是用`UpdatePanel`

```
<br />
        <asp:UpdatePanel runat="server" ID="up1">
            <ContentTemplate>
                <asp:Rating ID="Rating1" runat="server" MaxRating="5" StarCssClass="ratingStar" FilledStarCssClass="ratingStarFilled"
                    AutoPostBack="true" OnChanged="VideoRatingChanged" EmptyStarCssClass="ratingStarEmpty"
                    WaitingStarCssClass="ratingStarEmpty">
                    <asp:HiddenField ID="HiddenField1" runat="server" Value='<%=videoId%>' />
                </asp:Rating>

            </ContentTemplate>
        </asp:UpdatePanel> 
```

对于总票数的部分，如果您想将其包含在 UpdatePanel 中，您需要使用`asp:literal`控件对其进行更改，并在此控件中呈现结果。因此，如果您想将此代码包含在 UpdatePanel 中，以便自动更新它们，

```
&nbsp (<%=voteCount%>)
<br />
Minder Score:
<%=minderScore %> 
```

你需要把它写成

```
&nbsp (<asp:Literal runat="server" id="txtVoteCount" />)
<br />
Minder Score: <asp:Literal runat="server" id="txtMinderScore" /> 
```

并在代码后面放置这个值。

如果您看到此示例[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Rating/Rating.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Rating/Rating.aspx)

并从 SDK 获取源代码，这就是这样做的方式。

# windows - 重新安装 Windows XP 后 Tortoise SVN 无法正常工作

> ID：10995731
> 
> 赞同：0
> 
> 时间：2012-06-12T11:29:35.250
> 
> 标签：windows, svn, windows-xp, tortoisesvn

在重新安装之前，我在 C: 上安装了 Windows XP，在 D: 上安装了许多 SVN 检查。

然后我格式化C：并重新安装XP。然后使用**Setup-Subversion-1.6.6.msi**安装 SVN ，并使用**TortoiseSVN-1.7.7.22907-win32-svn-1.7.5.msi**安装 Tortoise 。（也许我应该自己安装 Tortoise 一个）。

现在，当我查看我的 SVN 结帐时，Tortoise 似乎无法识别它们是什么。它将它们视为普通目录。

![乌龟上下文菜单](../Images/03191553ddc4747c00e226a3a2a976fc.png)

你可以看到这个目录中有一个 .svn 文件夹，bot Tortoise 没有显示图标覆盖，或者正确的上下文菜单。

我需要做些什么来唤醒乌龟吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:55:04.707

仔细查看您发布的屏幕截图。你能`SVN Upgrade working copy`在上下文菜单中看到条目“”，就在“ `TortoiseSVN`”子菜单的正上方吗？那是 TortoiseSVN 告诉您您的工作副本具有旧格式，您需要将其升级到新格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:32:15.140

SVN 1.6 和 1.7 工作副本格式不兼容。安装 1.6 Tortoise 或将您的工作副本转换为 1.7

# css - 定位css中的第一个元素 +

> ID：10995732
> 
> 赞同：2
> 
> 时间：2012-06-12T11:29:36.110
> 
> 标签：css, css-selectors

在 css 中有相邻的选择器 + - 但是有谁知道我将如何定位该选择器中的第一个元素。

即我想`<div>`在以下选择器中定位：

> div + p

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:49:33.423

如果这些 div 包含在另一个元素中，也许你可以使用这个选择器：

[http://w3schools.com/cssref/sel_firstchild.asp](http://w3schools.com/cssref/sel_firstchild.asp)

```
div:first-child {  background-color:yellow; } 
```

因此，这将“选择并设置作为其父级第一个子级的每个 div 元素”。因此，假设您的 div 是其父级的第一个孩子，您可以使用它。但是，我仍然没有看到这样做的实际理由。我建议简单地为这些 div 设置一个类并使用类选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:54:57.267

没有用于此的 css 选择器，但您可以实现一些`css & html`操作。像这样写：

**HTML**

```
<div class="parent">
   <p>hover me</p>
   <div>hello</div>
</div> 
```

**CSS**

```
.parent{
    -moz-box-orient:vertical;
    -moz-box-direction:reverse;
    display: -moz-box;
    -webkit-box-orient:vertical;
    -webkit-box-direction:reverse;
    display: -webkit-box;
    box-orient: vertical;
    box-direction: reverse;
    display:box;
}
p{
    color:red;
}
p:hover + div{
    color:green;
    font-size:30px;
} 
```

检查这个[http://jsfiddle.net/LEh2W/1/](http://jsfiddle.net/LEh2W/1/)

可能对你有帮助，但它在 IE 中不起作用。

# java - while 循环中的 if 语句不起作用

> ID：10995735
> 
> 赞同：-4
> 
> 时间：2012-06-12T11:29:46.763
> 
> 标签：java, if-statement, while-loop, nested

```
public static void main(String[] args) {
    int i = 0;
    while(i==0){
        System.out.println("Possibilities: R, T, O and X.\nYour choice: ");
        Scanner scan = new Scanner(System.in);
        String bla = scan.nextLine();
        System.out.println(bla);
        if(bla=="R"){
            System.out.println("S or B?\n Your choice: ");
            String derp = scan.nextLine();
            if(derp=="S"){
                String rekeningNummer = spaarRekening.getRekeningNummer();
                }
        }
        if(bla=="T"){
            System.out.println("dit is T");
        }
        if(bla=="O"){

        }
        if(bla=="X"){

        }
        else{
            System.out.println("Impossible. Try again.");
        }
    i+=1;
    }

} 
```

我试图运行这个程序，但是当它遇到一个 if 语句时它会忽略它。我不知道为什么，而且我的想法已经不多了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T11:30:24.500

要比较`String`实例，请使用，`equals()`因为它是`Object`

**看**

*   [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T11:30:56.670

使用`.equals()`。不要使用 `==`，因为它比较字符串引用而不是字符串字符。

```
 if (bla.equals("T")) {
     System.out.println("dit is T");
 }
 if (bla.equals("O")) {

 } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T11:30:28.917

== 不是`String`比较运算符。

您应该使用`.equals()`来比较`String`s。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T11:54:54.690

假设我们有两个字符串。字符串str1=“废话”；字符串 str2= 新字符串（“废话”）；

Java 中有两个级别的相等性检查。

1.  您可能想要测试两个引用变量 str1 和 str2 是否指向同一个 String 对象。我们通常通过 str1==str2 来做这个检查。

2.  您可能想测试 str1 和 str2 引用的字符串的含义是否相等。我们通常通过调用equals方法来做到这一点，即str1.equals(str2)或str2.equals(str1)。

更清楚地说，您的语句**"bla=="R""**检查由 " **"R"** " 和**bla**返回的引用是否指向同一个对象，这实际上不是您想要的。您想检查**bla**引用的字符串是否等于“ **R** ”。因此，如果您想在 java 中按含义比较对象，则必须对该对象调用 equals() 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T11:48:14.070

不要使用 == 使用 .equals() 因为它是一个字符串对象

# wcf - 为什么 WCF 发现不适用于 WCF 中的自定义服务工厂主机？

> ID：10995740
> 
> 赞同：2
> 
> 时间：2012-06-12T11:30:02.893
> 
> 标签：wcf

我在我的 IIS 托管 WCF 服务中使用统一为 DI 创建了一个自定义 ServiceHostFactory、一个 ServiceHost、一个 ServiceBehavior 和一个 ServiceInstanceProvider。

在此 UDP 发现停止工作后。WCF 如何创建 ServiceDiscovery 行为？UDPDiscoveryEndpoint 在哪里创建？我是否覆盖了下面代码中的某些行为？

```
public class ServiceHostFactory : System.ServiceModel.Activation.ServiceHostFactory
{
    protected override System.ServiceModel.ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {   
        return new ServiceHost(serviceType, baseAddresses);
    }
}

public class ServiceHost : System.ServiceModel.ServiceHost
{ ....
    protected override void OnOpen(TimeSpan timeout)
    {
        Description.Behaviors.Add(new ServiceBehavior());            
        base.OnOpen(timeout);
    }
}

public class ServiceBehavior : IServiceBehavior
{
    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (ChannelDispatcherBase cdb in serviceHostBase.ChannelDispatchers)
        {
            var cd = cdb as ChannelDispatcher;
            if (cd != null)
            {
                foreach (EndpointDispatcher ed in cd.Endpoints)
                {   
                    ed.DispatchRuntime.InstanceProvider = new ServiceInstanceProvider(serviceDescription.ServiceType);
                }
            }
        }
    }
}

public class ServiceInstanceProvider : IInstanceProvider
{...
    public object GetInstance(InstanceContext instanceContext, Message message)
    {
        return Container.Instance.Resolve(_serviceType);
    }
} 
```

# variables - 获取下拉菜单，PHP SQL HTML

> ID：10995744
> 
> 赞同：0
> 
> 时间：2012-06-12T11:30:31.127
> 
> 标签：variables, get

我是一名学生，也在我的大学工作。我不是在学习计算机科学。我主要做支持的东西，但现在我应该照顾我们的实习数据库。

任务：从学生选择的城镇创建一个下拉菜单，然后显示该城镇的所有实习。

我有一个现有的 SQL 数据库，可以从中创建一个下拉菜单，但不知道如何使用选定的值。提交按钮就可以了，任何可行的解决方案都可以。

如何将选择的值从下拉菜单中放入 PHP 变量？

```
<?php
$dbanfrage = "SELECT DISTINCT Stadt FROM $tabelle WHERE Land = 'China' OR Land = 'Taiwan' OR Land = 'VR China' ORDER BY STADT ";
$result = mysql_db_query ($dbname, $dbanfrage, $dbverbindung);

if (!$result) 
{
    $message  = 'Ungültige Abfrage: ' . mysql_error() . "\n";
    $message .= 'Gesamte Abfrage: ' . $dbanfrage;
    die($message);
}

echo "<select>"; 
echo "<option>Stadt ausw&auml;hlen</option>";                   // printing the list box select command

while($nt = mysql_fetch_array($result))                     //Array or records stored in $nt
{   
    echo "<option value = $nt[id]>$nt[Stadt]</option>";     /* Option values are added by looping through the array */
} 
echo "</select>";                                           // Closing of list box  
mysql_close ($dbverbindung);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:43:29.347

只是建议你怎么做——

```
<select name="country" id="country" onChange="showState();" >
<option value="">Select Country</option>
<option value="1">India</option>
<option value="2">Nepal</option>
</select> 
```

你的剧本——

```
<script type="text/javascript">
function showState( )
{
var value = document.getElementById('country').value;
var url = '<?php echo base_url ?>showstate.php';
$.ajax({
type: "GET",
url: url,
data:{'country':value},
success:function(results)
{   
    $('#div_state').html(results);
}
});
}
</script> 
```

你的`showstate.php`php页面——

```
//INCLUDE CONNECTION file to for db query
$type = $_GET['country'];

//Your DB QUERIES 
```

`#div_state`这将在您的div中加载内容。您也可以为此使用 Jquery。我认为这会对您有所帮助 :) 如果您有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:44:59.057

```
<select name="name">
   <option value="select">select</option>
  <?php 
    $dbanfragee=mysql_query("SELECT DISTINCT Stadt FROM $tabelle WHERE Land = 'China' OR Land = 'Taiwan' OR Land = 'VR China' ORDER BY STADT ");
    while($row=mysql_fetch_array($$dbanfrage)){?>
        <option value="<?=$row['id']?>"><?=$row['stadt']?></option>
    <?php }?>
</select> 
```

# mysql - 更改 HUGE 表中列的数据类型。性能问题

> ID：10995748
> 
> 赞同：8
> 
> 时间：2012-06-12T11:30:44.577
> 
> 标签：mysql, alter

我想在我的桌子上运行它：

```
ALTER TABLE table_name MODIFY col_name VARCHAR(255) 
```

但我的表很大，它有超过 65M（6500 万）行。现在当我执行时，执行这个命令需要将近 50 分钟。有什么更好的方法来改变表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:41:18.333

嗯，你需要

```
 ALTER TABLE table_name CHANGE col_name new_name VARCHAR(255) 
```

但是，你是对的，做出改变需要一段时间。确实没有更快的方法来更改 MySQL 中的表。

您担心变更期间的停机时间吗？如果是这样，这是一种可能的方法：将表复制到新表，然后更改副本上的列名，然后重命名副本。

您可能已经发现，在生产系统中定期更改表中的列名并不是一个好主意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-26T15:18:56.163

使用 percona 工具包的另一个变体 [https://www.percona.com/doc/percona-toolkit/2.2/pt-online-schema-change.html](https://www.percona.com/doc/percona-toolkit/2.2/pt-online-schema-change.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T10:35:50.923

您可以使用 Oak 处理架构更改而无需停机。

[Oak-online-alter-table](http://openarkkit.googlecode.com/svn/trunk/openarkkit/doc/html/oak-online-alter-table.html)复制原始表的模式，应用您的更改，然后复制数据。由于 Oak 在原始表上放置了一些触发器，因此仍然可以调用 CRUD 操作，因此在操作期间不会丢失任何数据。

请参考[其他问题](https://stackoverflow.com/a/11450445/862426)，其中橡木的作者详细解释了这种机制并建议了其他工具。

# jquery - 与 Jquery 数据源的 Kendoui 数据绑定不起作用

> ID：10995750
> 
> 赞同：1
> 
> 时间：2012-06-12T11:30:58.247
> 
> 标签：jquery, json, kendo-ui

嗨，我正在尝试将数据绑定到 kendochart，但图表上没有出现任何条形图。如果我在 Web 浏览器中获取 url，则会返回以下字符串。

```
[{"AreaName":"Rondebosch","NumberOfIncidents":2}, {"AreaName":"Claremont","NumberOfIncidents":2}, {"AreaName":"Athlone","NumberOfIncidents":2}] 
```

代码如下

```
var Reports = {};
    $.ajax({
        url: "Home/getIncidentPerArea",
        async: false,
        dataType: 'json',
        success: function (json) {
            Reports = json;
            $("#Chart").kendoChart({ title: { text: "Incidents Per Area" },
                DataSource: {
                    data: Reports
                },
                series: [{ name: "Incidents Per Area", field:"NumberOfIncidents"}]
        });
    }
}); 
```

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:37:07.720

dataSource 选项以 Camel 大小写拼写。

另外，[数据源](http://www.kendoui.com/documentation/dataviz/chart/configuration.aspx#dataSource)可以直接请求数据：

```
dataSource: {
    transport: {
        read: "Home/getIncidentPerArea"
    }
} 
```

# jquery - 多个委托事件的 jQuery 语法

> ID：10995762
> 
> 赞同：8
> 
> 时间：2012-06-12T11:31:58.757
> 
> 标签：jquery

[http://api.jquery.com/on/](http://api.jquery.com/on/)上的 jQuery 文档使用以下语法（仅将事件处理程序附加到一个元素）提到了委托事件的好处：

```
$('#mytable').on('click', 'tr.hoverable', function(){
    // blah
}); 
```

但是我找不到任何关于使用委托事件一次附加多个事件的正确语法的参考。以下是否有快捷方式，但将 tr.hoverable 作为委托事件？

```
$('#mytable tr.hoverable').on({
    mouseenter: function(){
        // blah
    },
    mouseleave: function(){
        // blah
    },
    click: function(){
        // blah
    }
}); 
```

或者这是唯一的解决方案...

```
$('#mytable').on('click', 'tr.hoverable', function(){
    // blah
}).on('mouseenter', 'tr.hoverable', function(){
    // blah
}).on('mouseleave', 'tr.hoverable', function(){
    // blah
}); 
```

?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T11:35:11.723

```
$('#mytable').on({
    mouseenter: function(){
        // blah
    },
    mouseleave: function(){
        // blah
    },
    click: function(){
        // blah
    }
}, '.hoverable'); 
```

[根据此签名](http://api.jquery.com/on/)：

> .on( 事件映射 [, 选择器] [, 数据] )

此外，更喜欢使用单个 tagName/className/id 选择器进行委托，因为它们得到了优化

# php - PHP、MySql 和 JQuery - 按下添加按钮后填充选择框

> ID：10995765
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:32:05.217
> 
> 标签：php, javascript, jquery, mysql, drop-down-menu

我有几个问题，我想你应该看看我的代码 :)

1.  当用户单击带有 get-data.php 的添加按钮（或链接）时，我无法填充新的选择框。当用户单击添加按钮（或链接）时，新表单包括显示的新选择框。当这些 html 元素显示时，我的脚本无法填充新的选择框元素。
2.  当用户键入一些文本或填充所有元素然后他们添加新表单时，他们以前的文本就消失了。

请指导我解决这个问题

提前致谢

**这是我的html代码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
<title>Insert title here</title>
</head>
<body>
<script type="text/javascript">
$(function(){
      var items="";
      $.getJSON("get-data.php",function(data){
        $.each(data,function(index,item) 
        {
          items+="<option value='"+item.id+"'>"+item.name+"</option>";
        });
        $("#mycollege").html(items); 
      });
    });
</script>
<form id="contact-form" enctype="multipart/form-data" method="post" name="form1" target="_parent">
    <fieldset>                                  
    <legend>EDUCATIONAL BACKGROUND</legend>
    <label><span class="text-form">College:</span><input type="radio" name="rad_college[]" value="1" />
    <select name="college[]" id="mycollege">
        <option value="">Default</option>
    </select>
    <input type="radio" name="rad_college[]" value="2" />Other<input type="text" name="college[]" style="float: none; margin-left: 10px;" />
    </label><br />

    <label><span class="text-form">Ladder:</span><input type="text" name="id_ladder[]" /></label><br />
    <label><span class="text-form">Majors:</span><input type="text" name="id_majors[]" /></label><br />
    <label><span class="text-form">Period:</span><input type="text" name="period[]" /></label><br />
    <label><span class="text-form">GPA:</span><input type="text" name="GPA[]" /></label><br />

    <script type="text/javascript">
    $(document).ready(function(){
        var counter = 1;
        $("#add").click(function () {
            if(counter==800){
                alert("Too many boxes");
                return false;
            }
            $("#textBoxes").html($("#textBoxes").html() + "<div id='c"+counter+"' ><label for='t2'><span class='text-form'>College"+counter+":</span><input type='radio' name='rad_college"+counter+"[]' id='t"+counter+"' value='1' /><select name='college[]' id='mycollege'><option value=''>Default</option></select><input type='radio' name='rad_college"+counter+"[]' value='2' />Other<input type='text' name='college[]' style='float: none; margin-left: 10px;' /></label></div>\n");                                     
            $("#textBoxes").html($("#textBoxes").html() + "<div id='d"+counter+"' ><label for='t2'><span class='text-form'>Ladder"+counter+":</span><input type='text' name='id_ladder[]' id='t"+counter+"' /></label></div>\n");
            $("#textBoxes").html($("#textBoxes").html() + "<div id='e"+counter+"' ><label for='t2'><span class='text-form'>Majors"+counter+":</span><input type='text' name='id_majors[]' id='t"+counter+"' /></label></div>\n");
            $("#textBoxes").html($("#textBoxes").html() + "<div id='f"+counter+"' ><label for='t2'><span class='text-form'>Period"+counter+":</span><input type='text' name='period[]' id='t"+counter+"' /></label></div>\n");
            $("#textBoxes").html($("#textBoxes").html() + "<div id='g"+counter+"' ><label for='t2'><span class='text-form'>GPA"+counter+":</span><input type='text' name='GPA[]' id='t"+counter+"' /></label><br /><br /></div>\n");
            ++counter;
        });

        $("#remove").click(function () {
            if(counter==1){
                alert("Can u see any boxes");
                return false;
            }
            --counter;
            $("#c"+counter).remove();
            $("#d"+counter).remove();
            $("#e"+counter).remove();
            $("#f"+counter).remove();
            $("#g"+counter).remove();
        });
    });
    </script>

    <div id="textBoxes">
        <!-- <br /> -->
        <br />
    </div>
    <br />

    <a href="javascript:void(0)" id="add" class="button">add</a>
    <a href="javascript:void(0)" id="remove" class="button">remove</a>

    <br /><br /><br />
    <input type="submit" name="submit" value="submit">
    <input type="reset" name="reset" value="reset">
    </fieldset>
</form>
</body>
</html> 
```

**这是我的php代码：（get-data.php）**

```
<?php
include 'configurations/db-connections.php';

$q = "select id, name from college";
$sql = mysql_query($q);
$data = array();
while($row = mysql_fetch_array($sql, true)){
    $data[] = $row; 
};
echo json_encode($data);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:45:55.027

根据您对我的评论的回答，您需要先调试 Javascript...，如果您不知道如何，请查看本教程： http: [//odetocode.com/blogs/scott/archive/2012/03/ 13/调试-javascript-with-chrome.aspx](http://odetocode.com/blogs/scott/archive/2012/03/13/debugging-javascript-with-chrome.aspx)

在您阅读并在您的代码上尝试之后，让我知道似乎有什么问题，我将编辑此答案并尝试帮助您解决问题。

# ajax - 带有表单验证的 yii ajax 渲染部分

> ID：10995769
> 
> 赞同：2
> 
> 时间：2012-06-12T11:32:16.153
> 
> 标签：ajax, yii, renderpartial, yii-extensions

我在 yii 中有一个下拉列表，根据 id 呈现一些额外的字段（请求其他模型）。

我怎样才能在那些（它是 Yii-Bootstrap）中使用 $form 字段，以便我可以获得验证消息（通过 $form->errorSummary() ）而不是实现我自己的 javascript 消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:03:20.953

不确定这是否有帮助，但 renderPartial() 与 AJAX 存在严重问题：

[http://www.yiiframework.com/forum/index.php?/topic/10427-ajax-clientscript](http://www.yiiframework.com/forum/index.php?/topic/10427-ajax-clientscript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:52:07.810

我不完全确定您的要求，但它似乎与呈现表单字段/错误和验证有关。至于指定自定义选择器字段，请查看[CHthml::activeDropDownList](http://www.yiiframework.com/doc/api/1.1/CHtml#activeDropDownList-detail)，它可以让您相应地定义您的下拉列表项。至于验证，您可以通过使其具有自己的验证规则和错误来验证该下拉列表，如下所述：[自定义模型验证器](http://www.yiiframework.com/wiki/168/create-your-own-validation-rule/)。这将允许您使用 CHtml::errorSummary($model) 因为如果验证失败，下拉菜单将返回适当的错误消息...

干杯，飞

# html - 是否可以在 html 中创建包含大量数据的下拉列表？

> ID：10995772
> 
> 赞同：1
> 
> 时间：2012-06-12T11:32:29.647
> 
> 标签：html

是否可以在不使用大量数据的情况下在 html 中创建一个下拉列表

```
<option>Something</option> 
```

对于每个内容。

例如，我想制作一个数字为 1-100 的下拉列表。是否需要一一定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:13:15.840

是的，我在阅读您的问题后尝试了同样的方法，并且可以在包含大量数据的 html 中创建一个下拉列表：我尝试使用 Jquery，因为根据我的说法，它易于编写和理解。在您的 html 中，您只需要使用 id 编写标签。

```
<html>
<select id="select"> 

</select>
</html>​ 
```

现在在您的 Javascript（不要忘记导入 jquery）中，您只需编写：

```
$(document).ready(function() {   
 for(i=1;i<=100;i++)
{
$("#select").append("<option>"+i+"</option>");
}    
}); 
```

通过这种方式，您可以更轻松地制作 1 到 100 的下拉列表。希望这对您有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:55:20.003

**`<select><option>...`如果您想创建一个下拉**界面组件**，您不必将数据放入其中。**这`<select>`是一个标准的、默认的并且绝对是这样做的首选方式。但是您可以使用其他可用的标签来模仿它的行为。

现在，我看到您想要输入大量数据，而您可能不想手动完成。HTML 没有允许自动生成内容的标记结构，所以**是的，您必须自己在下拉列表中定义所有这些选项**。每个单独的选项都必须在自己的标签内。

现在，这将是一项乏味的任务，对吧？从不畏惧！编程语言来拯救。可以根据某些数据自动创建这些标签，无论是预定义的、根据某些参数生成的还是随机的。

我不确定为什么每个人都认为问题是关于`<option>`在 jQuery 中创建标签……还有许多其他选项可用。

1.  **服务器端生成**：如果您在服务器上使用 PHP、Python 或任何其他语言，您可以在服务器上构建您的`<select>`结构，将其插入 html 并呈现给用户。如果您的数据是静态的 - 您可以享受缓存的好处，这可以减少服务器和网络上的负载。

2.  **客户端生成**：您可以使用 JavaScript 在页面加载时（或根据用户请求）创建这些选项。当然，如果您想使用一些有助于该过程的 JavaScript 框架 - 您可以使用 jQuery、Prototype、Zepto ......任何您希望包含在页面中的东西。

我没有在这里显示任何代码，因为问题中没有太多信息。例如，您是否想从一些预定义的数据中构建下拉列表。如果是 - 您认为它将存储在何处以及以何种形式存储？它是静态的还是动态的？等等等等等等

如果您用更多详细信息更新您的问题，那么我们可以用更多信息更新我们的答案。谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T11:34:57.337

我会考虑创建标记服务器端（例如使用 PHP）或使用 JavaScript/jQuery。

这是一个 jQuery 示例：

```
var options = [];
for (var n = 1; n <= 100; n++){
    options.push('<option value="' + n + '">' + n + '</option>');      
}
$('<select/>', {
  'id': 'my-select',
  'name': 'my-select',
  html: options.join('')
}).appendTo('body'); 
```

还有一个小提琴：http: [//jsfiddle.net/XffwR/1/](http://jsfiddle.net/XffwR/1/)

当然，您可能不想走那条路，在这种情况下，是的，您需要手动为每个选项添加 HTML 标记，正如 John Conde 所说。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T11:33:48.163

`<option>`是的，你必须在它自己的标签中定义每一个。

# javascript - 优化图形和动画 intese 布局

> ID：10995777
> 
> 赞同：0
> 
> 时间：2012-06-12T11:32:46.310
> 
> 标签：javascript, performance, image, optimization, repaint

我正在开发一个使用大量大图像和大量 javascript 的网站。

在这里查看 - [http://joehamilton.info/1/1/](http://joehamilton.info/1/1/)

我一直在努力提高性能，但收效甚微。我只想保持帧速率平稳，因为有时它会陷入困境。

我认为可能是代码让它陷入了困境，但是在发现 chrome 中的分析之后，似乎“绘制”过程正在减慢速度。

我只是想知道我能做些什么来改善事情。我愿意接受任何建议，但我想我在考虑这些事情类型的事情： • 压缩图像文件有帮助吗？• 300px 方形重复图案图像在 900px 方形 div 中绘制会比 900px 方形图像更快吗？

这是一个庞大而复杂的网站，所以如果它没有帮助，我宁愿不花很多时间修改东西。

那里有任何专家光栅图像人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:52:18.127

对于任何移动的东西，你应该使用转换和变换而不是 jquery animate 和 background-position，因为它会在某些浏览器中被硬件加速。它还避免了如此频繁地重新粉刷。[http://css3.bradshawenterprises.com/demos/speed.php](http://css3.bradshawenterprises.com/demos/speed.php)是一个在公认的极端情况下比较这两种技术的示例。

如果您不能这样做，请确保您的动画使用 requestAnimationFrame 而不是 setTimeout 循环。

这应该有很大帮助。

# c# - Datalist 记录垂直方向的行

> ID：10995779
> 
> 赞同：1
> 
> 时间：2012-06-12T11:32:52.800
> 
> 标签：c#, asp.net, c#-4.0

我有一个数据列表。我有 20 条记录和每条记录 1 列显示在数据列表中。

如何在垂直线上显示每 15 条记录。我的意思是，如果总记录是 16，那么前 15 条记录应该垂直出现在第一行，接下来的第 16 条记录将出现在下一行。如果总记录数为 12，则所有记录应垂直位于中心线

我的代码

```
<div style="overflow:auto; height: 230px; width:340px;">
    <asp:DataList ID="DataList1" runat="server" ItemStyle-BorderWidth="0px" ItemStyle-Width="340px"
        RepeatDirection="Vertical">
        <ItemTemplate>
            <asp:Label ID="lblAreas" runat="server" Text='<%#Eval("Value") %>'></asp:Label>
        </ItemTemplate>
    </asp:DataList>
</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-12T11:43:16.640

使用`RepeatDirection.Vertical`并设置`RepeatColumns`为现有记录`(records / 15) + 1`并将`15 - (records % 15)`空记录添加到现有记录中。

**编辑：**谁曾经对我投了反对票，愿意留下解释，或者逻辑对你来说太简单了？如果现有记录不超过 15 条，则不必添加空记录，但如果有更多记录 - 此方法始终每列显示 15 行和所需的列数 - 您只需设置空单元格的样式（其中作为最后一列中的最后一个单元格）与背景相同，或者只是使它们透明。

# linux - 跟踪特定的 IP 和端口

> ID：10995781
> 
> 赞同：30
> 
> 时间：2012-06-12T11:32:58.183
> 
> 标签：linux, networking, ubuntu, network-programming

我有一个应用程序在服务 http 页面的远程服务器上的端口 9100 上运行。在我 ssh 进入服务器后，我可以 curl localhost 9100 并收到响应。

但是我无法使用浏览器从浏览器访问相同的应用程序`http://ip:9100`

我也无法从本地 PC 远程登录。我该如何调试它？有没有办法跟踪特定的 IP 和端口组合，以查看它被阻止的位置？

任何 linux 工具/命令/实用程序将不胜感激。

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-08-25T02:09:09.123

您可以为此目的使用默认`traceroute`命令，然后就无需安装任何内容。

```
traceroute -T -p 9100 <IP address/hostname> 
```

该`-T`参数是必需的，以便使用 TCP 协议而不是 UDP。

在极少数情况下`traceroute`不可用时，您也可以使用`ncat`.

```
nc -Czvw 5 <IP address/hostname> 9100 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-12T11:38:13.670

```
tcptraceroute   xx.xx.xx.xx 9100 
```

如果你没有找到它，你可以安装它

```
yum -y install tcptraceroute 
```

或者

```
aptitude -y install tcptraceroute 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-12T11:48:58.203

您可以[`tcpdump`](http://linux.die.net/man/8/tcpdump)在服务器上使用来检查客户端是否甚至到达服务器。

```
 tcpdump -i any tcp port 9100 
```

还要确保您的防火墙没有阻止传入连接。

编辑：如果您不想在控制台上阅读它，您也可以将转储写入文件并在客户端上使用wireshark查看它。

第二次编辑：您可以检查是否可以通过

```
 nc ip 9100 -z -v 
```

从您的本地 PC。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-12T11:36:50.897

首先，检查您的应用程序绑定的 IP 地址。例如，它只能绑定到本地地址，这意味着无论防火墙状态如何，您都不会从另一台机器上看到它。

您可以尝试使用像 nmap 这样的端口扫描器来查看端口是否打开并且在外部可见......它可以告诉您端口是关闭的（那里没有任何东西在监听），打开（您应该可以看到它）或过滤（例如，通过防火墙）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-16T07:41:30.143

它可以通过使用这个命令来完成：`tcptraceroute -p destination port destination IP`。喜欢：`tcptraceroute -p 9100 10.0.0.50` 但不要忘记在您的系统上安装 tcptraceroute 包。tcpdump 和 nc 默认安装在系统上。问候

# php - 在 $_SESSION 中设置所有 $_COOKIE 变量的函数不起作用

> ID：10995787
> 
> 赞同：0
> 
> 时间：2012-06-12T11:33:19.833
> 
> 标签：php, global-variables

```
function cookiesToSession()
    {
        foreach($_COOKIE as $key => $value)
        {
            $_SESSION[$key] = $value;
        }
    } 
```

大家好，上面的代码不起作用。目标是为任何 $_COOKIE['var'] 自动设置 $_SESSION['var']。

关于出了什么问题的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:35:07.120

你`session_start()`在这个函数之前调用了吗？你记得调用这个函数吗？（我以前做过：编写一个函数然后忘记实际调用它！）。

如果这些都不是问题，请检查是否正确配置了会话保存 - 保存路径是否存在？会话 cookie 域/路径是否有效？之类的东西。

# wordpress - Wordpress 显示未安装的插件

> ID：10995794
> 
> 赞同：0
> 
> 时间：2012-06-12T11:33:51.117
> 
> 标签：wordpress

我安装和卸载了 wordpress 插件，但它们仍在显示。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:39:30.503

尝试直接在服务器上删除插件文件夹并清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:36:51.017

> 可能是您只有在插件目录上读/写的权限。尝试为插件目录制作 chmod 777 以便拥有完整的权限。

# blackberry - 如何知道用户尝试在黑莓中打开wifi时的状态

> ID：10995798
> 
> 赞同：0
> 
> 时间：2012-06-12T11:34:00.867
> 
> 标签：blackberry, wifi

根据我们公司的要求，我们正在阻止 BB 用户在办公室内使用 WiFi，因为我必须通过传入的短信启用和禁用黑莓 WiFi。如果它打开，我可以通过此代码禁用。

```
if ((wafs & RadioInfo.WAF_WLAN) != 0) {
        Radio.deactivateWAFs(RadioInfo.WAF_WLAN);
    } 
```

但我的问题是如何知道用户何时尝试启用 WiFi。这样我就可以限制。

我曾尝试过**[WLANConnectionListener](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/system/WLANConnectionListener.html#networkConnected%28%29)**接口。但无法做到这一点。如果可能的话，请给我一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:59:43.960

这是不可能的，因为虽然您可能能够拦截用户发出的 Wi-Fi 启用请求，但您无法阻止用户关闭和/或卸载您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:21:56.447

我以这种方式在android中找到了我的问题的解决方案。但是在黑莓中有没有办法..？

```
 if (wifiManager.isWifiEnabled()) 
    {
        wifiManager.setWifiEnabled(false);

    }
    else if(WifiManager.WIFI_STATE_ENABLED==state)
    {
        wifiManager.setWifiEnabled(false);

    } 
```

# php - 从用户代理识别爬虫

> ID：10995804
> 
> 赞同：0
> 
> 时间：2012-06-12T11:34:38.740
> 
> 标签：php, web-crawler

我想跟踪我网站的所有访问者（操作系统、浏览器和更多详细信息）。为此，我将用户代理和 URL 以及其他基本数据保存到数据库中。稍后在执行 Crone 时，分析用户代理并获取浏览器、操作系统. 但我想识别爬虫（因为它们不能被视为访问者）。那么有什么方法可以从用户代理中识别爬虫。爬虫的用户代理是否遵循任何常见的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:54:36.920

您可以通过**User-Agent**或**IP**（子网）来识别它们。

第一种方法不可靠，因为任何人都可以识别为任何仅修改 User-Agent 的 Crawler。第二种方法显然更好。

以下是网络上众多列表中的两个：[http](http://www.user-agents.org/) ://www.user-agents.org/ （参见图例：R = 机器人、爬虫、蜘蛛）- [http://www.robotstxt.org/db.html](http://www.robotstxt.org/db.html)

另一个：[http ://www.karavadra.net/blog/2010/list-of-crawlers-bots-and-their-ip-addresses/](http://www.karavadra.net/blog/2010/list-of-crawlers-bots-and-their-ip-addresses/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:55:26.860

[Web 机器人页面](http://www.robotstxt.org/)包括一个[已知爬虫/机器人列表](http://www.robotstxt.org/db.html)，其中包括用户代理模式，可用于识别行为良好的已知机器人（并在数据库中列出）。

但正如 DaveR 所说，无视规则的人很难阻止，而且并不是每个爬虫都在 robotstxt.org 数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T11:46:57.363

将`User-Agent`字符串用于任何重要的事情都是不可靠的，也是一个坏主意。

任何恶意爬虫都可能会发送流行浏览器的 UA 字符串。适当的搜索引擎爬虫将始终发送可识别的 UA 字符串，但没有什么可以阻止我配置我的网络浏览器以假装是这些爬虫之一。

如果您必须这样做，请查看[`get_browser()`](http://php.net/manual/en/function.get-browser.php)和`crawler`返回值的元素。

# c++ - C++ 将字符从 int 追加到 std::string

> ID：10995806
> 
> 赞同：0
> 
> 时间：2012-06-12T11:34:40.533
> 
> 标签：c++, string, pointers, scope, append

我有一个来自键盘的字符，按整数：

```
int c = getch(); 
```

仅当它不是时，我才想将其附加到字符串`return`：

```
void somefunction()
{
    std::string str = "you pressed: ";
    int c;
    while ( 1 )
    {
        c = getch();
        if ( c == 10 ) break;
        char* ch;
        sprintf(ch,"%c",c);
        str += std::string(ch);
    }
} 
```

`somefunction`但是，当留下范围时，这会产生分段错误。我猜想当 dtor for`str`被调用时，指向的指针`ch`不再可用。

我该如何补救？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T11:35:59.810

这比你想象的要容易得多：

```
str.push_back(c); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T11:39:12.123

您遇到分段错误，因为您试图`sprintf`串入未知（尚未分配）的内存：

```
char* ch;
sprintf(ch,"%c",c); 
```

您的代码的可能修复方法是替换`char* ch;`它`char ch[2];`会导致`ch`成为具有自动存储持续时间的静态分配数组。

但请注意，由于您使用 C++ 进行编程，因此使用流和方法`std::string`而不是 C 风格 ( `char*`) 字符串和 C 风格函数（如`sprintf`.

# spring - Grails 和 Oauth2 Spring 安全性

> ID：10995810
> 
> 赞同：1
> 
> 时间：2012-06-12T11:34:57.103
> 
> 标签：spring, grails, spring-security, oauth-2.0, jackson

[我正在尝试使用基于插件grails-spring-security-oauth2-provider 的](https://github.com/adaptivecomputing/grails-spring-security-oauth2-provider)grails 配置广告 OAUTH2 提供程序，但已升级到[pring-Security-OAuth M6](http://forum.springsource.org/showthread.php?123470-Spring-Security-OAuth-1-0-0-M6-released)。

我能够使用 /oauth/authorize 端点注册客户端并获取授权码。

但是当我尝试获取访问令牌时出现问题，它似乎无法返回 json。

我用 curl 调用访问令牌端点

```
curl -k -i -H "Accept: application/json" "https://graph.mysite.it/oauth/token?client_id=testApp&client_secret=testAppSecret&response_type=token&grant_typization_code&code=OJD7xf&redirect_uri=https%3A%2F%2Fgraph.mysiste.it%2Fxme" 
```

并且服务器回复 HttpMediaTypeNotAcceptableException 找不到可接受的表示。

在google上搜索我尝试添加resources.xml mvc:annotation-driven让spring注册json jackson转换器，此时调用返回HTTP/1.1 406 Not Acceptable“此请求标识的资源只能生成响应根据请求“接受”标头具有不可接受的特征

进入 spring security oauth source 我到达了这个控制器[TokenEndpoint.java](https://github.com/SpringSource/spring-security-oauth/blob/065e68a1451467b5ec51098409e4c89f8b87ae39/spring-security-oauth2/src/main/java/org/springframework/security/oauth2/provider/endpoint/TokenEndpoint.java) 在这里调试我看到令牌被正确生成。使用 groovy 控制台，我尝试手动收集杰克逊转换器广告，它起作用了：

```
 import org.codehaus.jackson.map.ObjectMapper
   import org.springframework.security.oauth2.common.OAuth2AccessToken
   def mapper = new ObjectMapper()
   def token = new OAuth2AccessToken('fdkshdlfhklsahdklfhksaldfkl')
   mapper.writeValueAsString(token) 
```

json 打印正确，所以我可以排除杰克逊配置中的问题。

spring mvc 控制器在 grails 中映射为

"/oauth/token"(uri:"/oauth/token.dispatch")

问题出在哪里？为什么grails不能返回json？

这是我的[依赖报告](http://pastebin.com/xFxubqUj)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:01:23.283

我遇到了同样的问题，但是以这种方式在 resource.groovy 中声明了 annotationHandlerAdapter 配置并且它可以工作：

```
import org.springframework.http.converter.ByteArrayHttpMessageConverter
import org.springframework.http.converter.FormHttpMessageConverter
import org.springframework.http.converter.StringHttpMessageConverter
import org.springframework.http.converter.json.MappingJacksonHttpMessageConverter
import org.springframework.http.converter.xml.SourceHttpMessageConverter
import org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter

beans = {
    annotationHandlerAdapter(RequestMappingHandlerAdapter){
        messageConverters = [
                new StringHttpMessageConverter(writeAcceptCharset: false),
                new ByteArrayHttpMessageConverter(),
                new FormHttpMessageConverter(),
                new SourceHttpMessageConverter(),
                new MappingJacksonHttpMessageConverter()
        ]
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:44:45.687

解决了。

在 Spring 中，转换器在 bean RequestMappingHandlerAdapter 中声明，该 bean RequestMappingHandlerAdapter 在文件 ControllersGrailsPlugin 中的 grails 核心中配置。

在 resource.xml 中声明无效。

为了添加转换器，我在我的 grails 插件的 doWithSpring 方法中重新定义了 bean

```
import org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter
import org.springframework.http.converter.StringHttpMessageConverter
import org.springframework.http.converter.ByteArrayHttpMessageConverter
import org.springframework.http.converter.FormHttpMessageConverter
import org.springframework.http.converter.xml.SourceHttpMessageConverter
import org.springframework.http.converter.json.MappingJacksonHttpMessageConverter

class MyGrailsPlugin {

def doWithSpring = {
annotationHandlerAdapter(RequestMappingHandlerAdapter){
            messageConverters = [
                new StringHttpMessageConverter(writeAcceptCharset: false),
                new ByteArrayHttpMessageConverter(),
                new FormHttpMessageConverter(),
                new SourceHttpMessageConverter(),
                new MappingJacksonHttpMessageConverter()
                ]
            }

}

} 
```

# jquery - 如何获取当前 url 并在 jQuery 的 load() 函数中使用它？

> ID：10995813
> 
> 赞同：2
> 
> 时间：2012-06-12T11:35:00.067
> 
> 标签：jquery

我想重新加载我所在页面的内容，所以我正在抓取我想在 url 中重新加载与我当前所在页面相同的页面的 div，它正在工作：

```
success : function(msg)
        {
            $('#div-to-reload').load('http://localhost/page-i-am-currently-on.php #div-to-reload');
        } 
```

但我需要它动态完成，以便 javascript 找出当前 URL 并附加它而不是硬编码的 url

> `http://localhost/page-i-am-currently-on.php`

.

我已经尝试过了，但它不起作用;(：

```
success : function(msg)
        {
            var pathtopage = window.location.pathname;
            $('#div-to-reload').load('pathtopage #div-to-reload');} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:38:28.340

你有正确的想法，但只是一个小问题：

```
$('#div-to-reload').load(pathtopage + ' #div-to-reload');} 
```

你有`pathtopage`引号，所以它被视为字符串文字。您需要将 的值`pathtopage`与字符串的其余部分连接起来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:38:06.213

使用`window.location.href`：

```
var pathtopage = window.location.href;
$('#div-to-reload').load(pathtopage + '#div-to-reload'); 
```

# c# - 在datagridview中显示降序列。？

> ID：10995818
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:35:15.483
> 
> 标签：c#, sql-server, winforms

如何在datagridview中显示降序，顺序必须从最后一个字符之后开始。

这是我在 datagridview 中的专栏

前任：

1)ap20aa4779

2)ap09ss9999

3)se06ps1136

我的 desendeing 顺序必须从最后一个字符之后开始，我从 db 获取值。

就像这样

1)ap09ss9999

2)ap20aa4779

3)se06ps1136

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:10:59.443

要按字符串的最后一个数字排序，您应该能够执行以下操作：

```
ORDER BY CAST(RIGHT(Sno, PATINDEX('%[^0-9]%', REVERSE(Sno)) -1) AS INT) 
```

**编辑：**

添加[了 SQLFiddle](http://www.sqlfiddle.com/#!3/c7fe2/2/0)来演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:44:51.473

更改您的`SELECT`语句以包含 where 子句。

```
SELECT SNo,TokenNo,VehicleNo,InTime 
FROM ScooterInOut 
WHERE VehicleNo like '%" + txtvehicleno.Text + "%' and TokenStatus=0
ORDER BY SNo 
```

# blackberry - 无法在 BlackBerry 开发中设置通用侦听器

> ID：10995819
> 
> 赞同：0
> 
> 时间：2012-06-12T11:35:19.243
> 
> 标签：blackberry

我正在尝试为自定义按钮和位图字段设置一个通用侦听器。我能够访问侦听器，但无法区分两个字段。

```
private class MeaningsDetailsPageListner implements FieldChangeListener{
    public void fieldChanged(Field field, int arg1) {
        Dialog.alert("Hi");
        if(field == bField){
            Dialog.alert("Image Clicked");
        }else if(field == wordBtn){
            Dialog.alert("Button Clicked!!");
        }
    }
} 
```

在以下代码中，wordBtn 是我的自定义按钮，另一个是 BitmapField。我收到了 Hi 警报，但无法进一步区分。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:40:44.140

尽管我看到了您要执行的操作，但最好将 a`FieldChangeListener`作为匿名类单独添加到每个字段中。这样，在测试内部是否相等时，您不必担心将 Field 转换为正确的类型`fieldChanged`。

```
ButtonField b = new ButtonField("Hello!");
b.setChangeListener(new FieldChangeListener() {

    public void fieldChanged(Field field, int context) {
        Dialog.alert("Button clicked");
    }
}); 
```

# wordpress - Wordpress 网站加载时间

> ID：10995820
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:35:24.643
> 
> 标签：wordpress

我安装了新的 wordpress 。并在二十个主题中进行了一些更改..只有颜色更改..没有添加任何额外内容。

但是加载时间太长了。打开网站需要超过 25 秒。

你能告诉我为什么会这样吗？

打开网站[点击这里](http://www.knowledgefull.org)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:38:30.523

我需要 2 秒才能看到您的网站。

我认为您应该检查您的互联网连接速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:26:12.460

注意，因为现在它把我带到了安装页面！有时会发生在我身上，我忘记了分号或结束标记，并且标记有点混乱加载时间。还尝试优化您的数据库并添加 WP-minify 插件，如果您有很多图像，则有一个名为 smush it 的插件

祝你好运！

# java - android: google APi OAuth 2.0 - 获取用户信息时出现错误 400

> ID：10995825
> 
> 赞同：0
> 
> 时间：2012-06-12T11:35:47.453
> 
> 标签：java, android, oauth-2.0, gdata-api

我在 Web servlet 上有以下内容：

编辑：

```
public String tryGoogleAuthentication(String auth_token){

    HttpURLConnection connection = null;
    try {

        //connection = (HttpURLConnection) new URL(("https://www.googleapis.com/oauth2v1/tokeninfo?access_token={"+auth_token+"}")).openConnection();
       connection = (HttpURLConnection) new URL(("https://www.googleapis.com/oauth2/v1/user info")).openConnection();
       connection.setRequestMethod("GET");          
       connection.setRequestProperty("Authorization", "Bearer {"+auth_token+"}");
       connection.setRequestProperty("Host", "googleapis.com");

        //read response
        String response = fromInputStreamToString(connection.getInputStream());
        System.out.println(response);

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return CONST.STATUS_OK;
} 
```

在安卓中：

```
 private void googleAuthenticate(){
    try {
        mOAauthHelper = new OAuthHelper("something.net", "xxxxxxxxxx", 
                "https://www.googleapis.com/auth/userinfo.profile", "alex://myScheme");
        String uri = mOAauthHelper.getRequestToken();

        startActivity(new Intent("android.intent.action.VIEW", Uri.parse(uri)));

                    //Intent i = new Intent(this, GoogleOAUTHActivity.class);
                    //i.putExtra(GoogleOAUTHActivity.GOOGLE_OAUTH_ENDPOINT_KEY, uri);           
                     //startActivity(i);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
        failedAuthenticatingAtGoogle();
    } catch (OAuthMessageSignerException e) {
        e.printStackTrace();
        failedAuthenticatingAtGoogle();
    } catch (OAuthNotAuthorizedException e) {
        e.printStackTrace();
        failedAuthenticatingAtGoogle();
    } catch (OAuthExpectationFailedException e) {
        e.printStackTrace();
        failedAuthenticatingAtGoogle();
    } catch (OAuthCommunicationException e) {
        e.printStackTrace();
        failedAuthenticatingAtGoogle();
    }
} 
```

和

```
@Override
protected void onNewIntent(Intent intent) {
    //super.onNewIntent(intent);

    Uri uri = intent.getData();
    String oauthToken = uri.getQueryParameter("oauth_token");
    String oauthVerifier = uri.getQueryParameter("oauth_verifier");

    if(oauthToken != null){
        authorizeGoogleSessionToServer(oauthToken);
    }
} 
```

在此之后，我将请求令牌发送到我尝试获取用户配置文件的 servlet，但没有成功。

你能告诉我出了什么问题以及为什么我从谷歌收到错误 400 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:46:46.167

不幸的是，我已经看到了一些问题

1.  你[不应该](https://stackoverflow.com/a/6742274/431841) `curly braces`在你的 URL 中，甚至在草案中规定的[Bearer 标头中。](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-bearer-21#section-2.1)

> 连接 = (HttpURLConnection) 新 URL(("https://www.googleapis.com/oauth2/v1/userinfo?access_token= **{** "+auth_token+" **}** ")).openConnection()

2.  `400`意味着您在请求中遗漏了某些内容，在与特定错误节点相同的响应中可能有更多关于它的信息。

3.  最后，请注意，`oauth_verifier`参数来自 OAuth 1。

[我建议您使用Google OAuth2 游乐场](https://code.google.com/oauthplayground)测试您的请求网址

祝你好运！

# c# - 如何在.net 中查找服务的“显示名称”？

> ID：10995833
> 
> 赞同：7
> 
> 时间：2012-06-12T11:36:21.860
> 
> 标签：c#, .net, vb.net, windows-services

我有一个在多个实例中在系统中运行的服务。我需要`DISPLAY_NAME`从服务中找到服务。我已经尝试过`ServiceBase.ServiceName`，但它（可能）从项目安装程序返回服务的名称，至少在这种情况下是无用的。

该服务是通过`installutil`一个参数安装的`/name=`。

**编辑**

我有一个基于 Imran Balouch 答案的解决方法。我在安装程序中读取名称`Me.Context.Parameters("name")`并将其写入`ImagePath`注册表子项并在服务中使用 Environment.GetCommandLineArgs 读取它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T12:01:28.697

你`ProjectInstaller`在你的windows服务项目中添加了吗？如果是，则在 ProjectInstaller 中`ServiceInstaller`为您的服务添加，并且在该 ServiceInstaller 中您可以指定服务的显示名称。选择该 serviceinstaller 并在属性中设置其或`Display Name` in或者您可以将显示名称指定为：`InitializeComponent``ProjectInstaller.Designer.cs``ProjectInstaller.Designer.vb`

```
this.yourServiceInstaller.DisplayName = "Service Display Name"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T11:52:10.577

您可以使用以下类获取服务的显示名称，给定它的短 ServiceName [`ServiceController`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)：

```
ServiceController sc = new ServiceController(this.ServiceName);
var displayName = sc.DisplayName; 
```

正如您所说，您可以`ServiceName`轻松获得，因为它是您自己的类的成员，继承自`ServiceBase`. 对于在同一台机器上运行的服务的不同实例，此服务名称将有所*不同*，因为它是唯一标识符。

# jquery - Jquery在div到达屏幕位置时修复div位置，而不是滚动位置

> ID：10995834
> 
> 赞同：5
> 
> 时间：2012-06-12T11:36:22.660
> 
> 标签：jquery, scroll, fixed

我非常感谢任何 jquery 专家的帮助，因为我以前使用过的一种方法对这个新应用程序不太适用。

**我想要达到的目标**

我的网站包装器的右侧和左侧有两个选项卡，只有在您向下滚动页面时才会显示。当标签到达屏幕中心时，它们就会变成固定位置，然后看起来会锁定在适当的位置。请参阅下面的一般效果/想法...

[http://jsfiddle.net/motocomdigital/SGCHt/2/](http://jsfiddle.net/motocomdigital/SGCHt/2/)

**问题**

您可能想知道为什么我要问这个问题，如果上面的小提琴已经在工作了。

上面的小提琴有效，因为它适用于从窗口顶部滚动到位置。

但是在我的网站上，这些选项卡只存在于**Content Area**上，不能在我的标题、横幅、幻灯片区域中运行。

在上面的 jsFiddle 示例中，您会注意到没有标题、横幅或幻灯片。所以这对我当前的脚本来说不是问题，因为选项卡容器列一直运行到顶部。

请参阅下面具有不同布局组合的小提琴，然后您将看到我的问题。

请注意，我删除了选项卡容器列上的橙色背景，以便您查看设计观点。

1.  标题、导航、幻灯片、广告 - [http://jsfiddle.net/motocomdigital/SGCHt/3/](http://jsfiddle.net/motocomdigital/SGCHt/3/)
2.  标题、导航、广告 - [http://jsfiddle.net/motocomdigital/SGCHt/4/](http://jsfiddle.net/motocomdigital/SGCHt/4/)
3.  标题，导航 - [http://jsfiddle.net/motocomdigital/SGCHt/5/](http://jsfiddle.net/motocomdigital/SGCHt/5/)

现在看下面的小提琴，它在标签容器列上有橙色背景，这样你就可以看到标签如何只能出现在内容区域 div 旁边的结构。

[http://jsfiddle.net/motocomdigital/SGCHt/6/](http://jsfiddle.net/motocomdigital/SGCHt/6/)

**解决方案**

当点击从屏幕顶部到达 50% 时，脚本需要向选项卡添加固定定位。但我不知道如何计算这个，因为选项卡容器不会一直运行到窗口顶部。是否有另一种脚本方法可以实现这一目标？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T20:41:59.953

我们可以从顶部添加内容区域的位置，而不是查看滚动到屏幕高度的 50%。

[http://jsfiddle.net/SGCHt/7/](http://jsfiddle.net/SGCHt/7/)

# java - Eclipse 3.7 插件编辑器模板未开箱即用

> ID：10995836
> 
> 赞同：0
> 
> 时间：2012-06-12T11:36:27.233
> 
> 标签：java, eclipse-plugin

我正在尝试在 Eclipse 环境中构建一个简单的自定义编辑器。首先，我使用“带有编辑器的插件”模板创建了一个新的插件项目。

![在此处输入图像描述](../Images/f36d1de7877a1e4609f1b219e73415f3.png)

我唯一改变的是 .stt 文件的目标扩展名。我运行该应用程序并尝试打开一个包含基本文本行的文本文件，这就是我得到的：

![在此处输入图像描述](../Images/467672bb65430e3ee7c16105918dff20.png)

如您所见，错误日志中没有任何内容。开发环境中的Console没有错误。我应该如何确定“错误”的含义？

编辑：在新的 Eclipse 3.6 安装上也有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:58:15.510

安德鲁上面的评论让我走上了正确的轨道......问题的解决方案在于 Eclipse 如何对待打开工作区外部的文件与工作区中的项目内的文件不同。谁曾想到？

在这里可以找到如何编写编辑器的完整答案：

[Eclipse 编辑器插件：在项目外打开文件时出现“错误”](https://stackoverflow.com/questions/455210/eclipse-editor-plugin-error-when-opening-file-outside-project)

# android - 通过自定义 BaseAdapter 传递多个 ArrayList 来填充 Listview

> ID：10995840
> 
> 赞同：1
> 
> 时间：2012-06-12T11:36:36.467
> 
> 标签：android, listview, arraylist, baseadapter

解决通过自定义适配器填充列表视图的谜团，该适配器正在传递多个数组列表，如下定义。

主要活动：我们声明数组列表：

```
private static ArrayList<Integer> img_challengeicon_values;
static {
    img_challengeicon_values = new ArrayList<Integer>();
    img_challengeicon_values.add(R.drawable.actionbar_hello);
    img_challengeicon_values.add(R.drawable.actionbar_world);
}
private static ArrayList<Integer> img_challengerpic_values;
static {
    img_challengerpic_values = new ArrayList<Integer>();
    img_challengerpic_values.add(R.drawable.actionbar_look);
    img_challengerpic_values.add(R.drawable.actionbar_down);
} 
```

我们声明我们的适配器：

```
arrayAdapter adapter = new arrayAdapter(this, 
            img_challengeicon_values,
            img_challengerpic_values); 
```

适配器活动：我们扩展 BaseAdapter && 设置变量：

```
extends BaseAdapter {
private final Context context; 
private ArrayList<Integer> img_challengeicon_values;
private ArrayList<Integer> img_challengerpic_values; 
```

我们调用构造函数：

```
public arrayAdapter(Context context,
        ArrayList<Integer> img_challengeicon_values,
        ArrayList<Integer> img_challengerpic_values) {
this.context = context;
    this.img_challengeicon_values = img_challengeicon_values;
    this.img_challengerpic_values = img_challengerpic_values;
} 
```

最后，我们调用 getView、膨胀布局，并根据传递的变量定义分配图像视图；像这样：

```
imgChallengeIcon.setImageResource(img_challengeicon_values.get(position));
imgChallengerPic.setImageResource(img_challengeicon_values.get(position)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:30:20.133

```
lstdata = (ListView) findViewById(R.id.inboxlist);
DB_listAdapter adapter = new DB_listAdapter (this,inboxdatalist);
lstdata.setAdapter(adapter);

public class DB_listAdapter extends BaseAdapter {

    private Activity activity;
    ArrayList<Object> Object_Datas;
    private static LayoutInflater inflater=null;
    ViewHolder holder;
    String strurl;

    public DB_listAdapter (Activity a,int flag, ArrayList<Object> inboxdatalist{
        // TODO Auto-generated constructor stub

        activity=a;
        this.Object_Datas=inboxdatalist;

        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new FB_ImageLoader(activity.getApplicationContext());
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return this.Object_Datas.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public class ViewHolder{
        public TextView username;
        public TextView message;
        public ImageView image;
        public ImageButton imgaddbtn;
    }
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        View v=convertView;

        if(v==null)
        {
            //LayoutInflater vi = (LayoutInflater)activity.getSystemService(myContext.LAYOUT_INFLATER_SERVICE);

            v = inflater.inflate(R.layout.listitemfb, null);

        } 

        TextView text=(TextView)v.findViewById(R.id.username);
        TextView text2=(TextView)v.findViewById(R.id.message);
        ImageView image=(ImageView)v.findViewById(R.id.avatar);

        return v;

    }

} 
```

# c# - 在 C# 中获取和设置全局变量？

> ID：10995842
> 
> 赞同：-2
> 
> 时间：2012-06-12T11:36:48.157
> 
> 标签：c#, global-variables

首先我想说我知道这可能是一个简单的问题，但是我在谷歌和这个论坛上找到的内容并不能帮助我理解 c# 中的 getter 和 setter；

我正在尝试为我的 web 应用程序创建全局变量。

我来自 Java，我不明白 setter 和 getter 是如何工作的。

我做了一个类 globalvars，并想在那里设置一个 var，这是我尝试的简化版本

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;
using System.Threading;
using MvcApplication2.Controllers;

namespace MvcApplication2
{
public static class Globals {
public static int Lang { get; set; }
}
public class MvcApplication : System.Web.HttpApplication
{
    Globals.Lang = 5;
    HomeController hc = new HomeController("nl");
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {

        filters.Add(new HandleErrorAttribute());
    }
//more code

instead of setLang I have tried 

MvcApplication2.MvcApplication.Global.setLang(5);
Global.setLang(5);
MvcApplication2.Global.setLang(5);

but they all say the method does not exist in my namespace. 
```

我认为我的错误将在于初始化设置器/变量，但是这样做的正确方法是什么？

编辑：我的示例中的错误已修复

编辑： Globals.Lang = 5; 只能在方法里面使用？？？？？？

编辑：我的实际代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:41:27.537

为了完整起见，我建议您尽量远离传统意义上的“全局变量”，并远离`static`ASP.NET 应用程序中的成员。`static`成员的范围限定为 AppDomain，IIS 在管理工作进程时会无意中回收该 AppDomain。这意味着您在其中设置的任何值都将丢失，并且在下次访问时将恢复为默认值。

* * *

你写的 ( `public static int Lang { get; set; }`) 是一个自动实现的属性，它实际上是一个普通属性的特定样式。它避免了您必须定义字段以及包装属性。旧的手动方式是这样的：

```
private static int _lang;

public static int Lang
{
    get { return _lang; }
    set { _lang = value; }
} 
```

属性访问在语法上的行为就像 C# 中的字段一样，因此：

```
Globals.Lang = 2; 
```

是你如何设置和：

```
int value = Globals.Lang; 
```

是怎么得到的。

* * *

您的尝试包括尝试完全限定`Globals`课程（这需要在线或通过`using`语句）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:39:23.917

您设置一个属性，就像设置一个公共字段一样，所以在您的情况下，它将是

```
Globals.Lang = //some int value; 
```

那套你真的应该，我的意思是真的重新考虑你使用这样的全局（硬编码）值。在测试和版本控制方面，它们经常成为噩梦

你已经把你的持久问题写成了一个编辑。您无法访问方法范围之外的任何内容。您只能初始化当前类的字段，因此您需要将分配移动到方法中（包括构造函数）

在您的示例中，您可以这样做

```
static MvcApplication(){
   Globals.Lang = 5;
} 
```

这将为您的 MvcApplication 类创建一个静态构造函数并分配给该`Globals.Lang`属性。

我仍然建议您不要这样做，但至少要从某些存储中加载值

您还评论说您希望记住所选语言。使用全局变量，它将同时为**所有**用户更改。AppDomain（即 AppPool）只有一个值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:40:10.790

而不是 setLang("EN");，试试这个

```
Globals.Lang = Some_INT_Value; // or "EN" if the property is of string type 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T11:40:23.247

首先，您的`Lang`属性是一个`int`但您试图设置为字符串，所以首先改变它。

然后你可以这样设置变量：

```
Globals.Lang = 5; //assuming it was meant to be an int not string 
```

# jquery - Jquery - 从链接的标题属性启动颜色框

> ID：10995846
> 
> 赞同：1
> 
> 时间：2012-06-12T11:36:56.290
> 
> 标签：jquery, colorbox

我正在尝试从链接的标题 attr 启动颜色框。

我已经设法使用以下方法为 imgs 启动 colorbox：

```
$("a[rel*=lightbox]").colorbox({width:"700",height:"500",innerWidth:"700",innerHeight:"500",opacity:0.8,slideshow:true,slideshowSpeed:2500,slideshowStart:"start",slideshowStop:"stop"}); 
```

但是，我需要使用此链接的标题。有人有什么想法吗？

```
<a title="booknow" href="link">Book Now</a>

$("a[title=booknow]").colorbox({iframe:true, innerWidth:100%, innerHeight:100%}); 
```

任何帮助/指导将不胜感激。

**编辑：我也在使用其他插件**

```
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery('.carousel').jcarousel();
});

        $(window).scroll(function(){
            if ($(this).scrollTop() > 100) {
                $('.scrollup').fadeIn();
            } else {
                $('.scrollup').fadeOut();
            }
        });

        $('.scrollup').click(function(){
            $("html, body").animate({ scrollTop: 0 }, 600);
            return false;
        });

    $(window).load(function() { 
        $('.defaultP input').ezMark();
        $('.customP input[type="checkbox"]').ezMark({checkboxCls: 'ez-checkbox-red', checkedCls: 'ez-checked-red'})
        $('#slider').nivoSlider();
        $("#example-one").organicTabs();
        $("#example-two").organicTabs();
    });
</script>** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:54:34.957

它应该适用于您正在使用的东西

```
$("a[title=booknow]").colorbox({
                   iframe:true,
                   innerWidth:"100%", 
                   innerHeight:"100%"
                  });​ 
```

所以问题可能出在其他地方。

[工作小提琴](http://jsfiddle.net/joycse06/8VD6g/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:27:36.230

你可以这样做

```
$("a[title=booknow]").click(function(){
     $.colorbox({
               iframe:true,
               innerWidth:"100%", 
               innerHeight:"100%"
              });
 });​ 
```

# jquery-mobile - 在 jQuery Mobile 下要求用户输入自发内容的最佳方式是什么？

> ID：10995847
> 
> 赞同：1
> 
> 时间：2012-06-12T11:36:59.600
> 
> 标签：jquery-mobile, cordova

例如，想象一个 DVD 列表，用户可以根据需要添加更多标题。理想情况下，他单击“加号”按钮，然后会弹出一个小对话框，他可以在其中输入要添加的下一部电影的标题。有点像 javascript`prompt();`所做的。这`prompt()`很好，但我不太喜欢它在移动浏览器中运行时如何说*“http://www.example.com/ 说：”*（顺便说一下，当部署为本机 PhoneGap 应用程序时会显示吗？）。

我的问题是在移动应用程序中向用户询问此类自发内容的最佳做法是什么？**jQueryMobile** , **PhoneGap**

# knockout.js - 如何使用淘汰赛js从子数组访问父变量

> ID：10995852
> 
> 赞同：2
> 
> 时间：2012-06-12T11:37:30.457
> 
> 标签：knockout.js, knockout-2.0

我正在使用淘汰赛并有一个数组“属性”，每个“属性”都可以有子“属性”

一切都很好，除了应该继承数组“TabID”的一个属性 - 例如，如果它在父“Property”上更改，它也应该在子“Property”上更改

我试图通过使用创建计算来使其工作，例如。

```
this.TabID = ko.computed(function(){
return $parent.TabID();
}); 
```

然后意识到 $parent 仅在 foreach 循环中可用

我也尝试过在构造函数中传递父级，例如

```
var childproperty = function(parent,[other properties]){
this.TabID = ko.computed(function(){
return parent.TabID(); // OR return parent.TabID;
} 
```

有人可以指出我正确的方向吗？作为旁注，我还需要能够访问父级以进行基于零的 [i] 计算

也就是说，每个父属性应该是 properties[i].propitem 其中 i = 基于每个父级 + 它们的子级属性的计算值

例如：如果父属性 1 有 3 个子属性，那么父属性 1 应该是 i=0，子属性 (i=1,2,3)，然后父属性 2 的“i”应该是 4

我知道...我要求不高，我并不期待我的问题有一个完美的解决方案，但如果有人至少能指出我正确的方向，我将非常感激。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:35:36.027

我已经设法通过使用以下方法来解决这个问题，希望这会帮助其他遇到同样问题的人

```
var childproperty = function(parent,[other properties]){
this.parent = ko.observable(parent);
this.TabID = ko.computed(function(){
return this.parent().TabID(); // OR return parent.TabID;
} 
```

我还注意到，因为我的父母正在调用从函数中添加孩子，所以我不能只使用“this”

我的父母财产现在是

```
var parentproperty = function([properties]){
var p = this;
p.childproperties = ko.observableArray();
p.TabId = ko.observable(1);
p.addChild = function(){
p.childproperties.push(new childproperty(p,[other properties]));
} 
```

这完美地工作 - 如果父 tabid 更改，则值由子属性反映。我只需要使用 $parentContext.$index() 访问的 foreach 循环中的父索引

# java - 创建没有触发器的 Quartz 2.x xml 作业

> ID：10995853
> 
> 赞同：1
> 
> 时间：2012-06-12T11:37:32.673
> 
> 标签：java, xml, spring, quartz-scheduler

我有石英工作 Quartz UpdateContentMetaData.class，我有石英 2.x 工作 xml：

```
<?xml version='1.0' encoding='utf-8'?>
<job-scheduling-data version="2.0" 
    xmlns="http://www.quartz-scheduler.org/xml/JobSchedulingData" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.quartz-scheduler.org/xml/JobSchedulingData 
    http://www.quartz-scheduler.org/xml/job_scheduling_data_2_0.xsd">
    <schedule>    
        <job>
            <name>UpdateContentJob</name>
            <job-class>ru.icb.cms.schedule.job.UpdateContentMetaData</job-class>
            <job-data-map>
                <entry>
                    <key>provider</key>
                    <value>2</value>
                </entry>
            </job-data-map>
        </job>
        <trigger>
            <simple>
                <name>minute_job</name>
                <group>DEFAULT</group>
                <job-name>minute_job</job-name>
                <job-group>DEFAULT</job-group>
                <repeat-count>-1</repeat-count>
                <repeat-interval>60000</repeat-interval>
            </simple>
        </trigger>    
    </schedule>
</job-scheduling-data> 
```

如何在没有触发器的情况下创建 xml 作业？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:50:32.187

你试过了吗：

```
<schedule>
        <job>
            <name>TestJob1</name>
            <job-class>org.quartz.examples.example10.SimpleJob</job-class>
        <durability>true</durability>
        <recover>true</recover>
    </job>
</schedule> 
```

# jquery - jQuery 动画在 webkit 浏览器中运行缓慢

> ID：10995856
> 
> 赞同：0
> 
> 时间：2012-06-12T11:37:44.887
> 
> 标签：jquery, performance, webkit

我刚刚在[我的网站上](http://www.monkey-touch.com)添加了一些动画。我创建了一些树的 div，让它们在显示内容之前弹出，然后是 ipad。此外，按下投资组合，会显示一个类似于您在 ipad 上看到的文件夹。按下这些“应用程序”之一，完全扩展 ipad 并分离内容。后一部分在所有浏览器上都可以正常工作，至少是最新版本。然而，在 Safari 和 Chrome（webkit 浏览器）中，按下组合时树的弹出和文件夹的扩展很慢。我真的不明白为什么会这样。我对 jQuery 很陌生，所以如果我落后了，请原谅。

慢动画的代码

```
function portfolioToggle()
    {
        var animationTime = 500;
        var extendedHeight = 153;
        var appFolder = $('#menu #app_folder');
        if(appFolder.css('height') == '0px')
        {
            appFolder.animate({height : extendedHeight}, animationTime, 'swing');
        }
        else
        {
            appFolder.animate({height : 0}, animationTime, 'swing');
        }
    } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:59:02.947

尝试使用`display:inline-block`out `float:left`。浮点数会降低性能

# ruby-on-rails - Rails 表单助手行为异常

> ID：10995859
> 
> 赞同：0
> 
> 时间：2012-06-12T11:37:51.540
> 
> 标签：ruby-on-rails, radio-button, form-helpers

我想使用几个单选按钮来控制某些页面元素的模式。基本要求是它向用户显示哪种模式处于活动状态并在选择不同按钮时触发适当的模式切换功能。所以我尝试了以下方法。

```
<%= radio_button_tag(:label_type, "tooltip", :checked, :onchange => 'console.log("tooltip")')%>
<%= label_tag(:label_type_tooltip, "Enable Tooltip") %><br />
<%= radio_button_tag(:label_type, "labels", :onchange => 'console.log("labels")') %>
<%= label_tag(:label_type_labels, "Enable Labels") %> 
```

这似乎在没有将 :onchange 参数传递给第二个 radio_button_tag 的情况下工作，但是使用它（如上所示）具有不将 onchange 事件附加到第二个单选按钮而是将第二个单选按钮设置为选中（其中我不想要）像这样：

```
<input checked="checked" id="label_type_tooltip" name="label_type" onchange="console.log(&quot;tooltip&quot;)" type="radio" value="tooltip">
<label for="label_type_tooltip">Enable Tooltip</label><br>
<input checked="checked" id="label_type_labels" name="label_type" type="radio" value="labels">
<label for="label_type_labels">Enable Labels</label> 
```

为什么？我该如何让它表现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:43:51.583

根据这里的rails文档是radio_button_tag的参数

```
radio_button_tag(name, value, checked = false, options = {}) 
```

您似乎忘记传递“已检查”值。尝试以下

```
<%= radio_button_tag(:label_type, "labels", false, :onchange => 'console.log("labels")') %> 
```

但是，我建议您在 js 或咖啡文件中添加绑定，因为这种方法不被认为是一种好的做法。有关详细信息，请参阅 jquery api。谢谢

# css - 字体转换器：.ttf 或 .otf 到 .woff、.svg 等

> ID：10995862
> 
> 赞同：13
> 
> 时间：2012-06-12T11:38:06.030
> 
> 标签：css, fonts, font-face

我一直使用[字体松鼠生成器](http://www.fontsquirrel.com/fontface/generator "字体松鼠生成器")来制作我的@font-face 工具包，但最近我在尝试转换 Helvetica Neue 时遇到了麻烦，因为它被列入黑名单。然后我尝试使用其他生成器，例如[Font2Web](http://www.font2web.com/ "Font2Web")。它们确实有效，但它们生成的一些文件质量非常低；例如，字体在 11px 处失去可读性。我知道这是生成器和某些字体格式的问题，因为根据浏览器加载的文件，字体看起来很棒。

那么，怎么办？有没有可以很好地完成这项工作的软件？还是其他生成更高质量文件的在线工具？

PS：不要怪我选择了Helvetica Neue，我只是在尝试实现它。如果你知道一个很好的、免费的字体替代 Helvetica Neue 有很多像 Extended 和 Black 这样的系列，如果设计师喜欢它也可能有用。

# .net - 如何使用 MSBuild 指定 DLL 文件的输出目录

> ID：10995865
> 
> 赞同：2
> 
> 时间：2012-06-12T11:38:19.213
> 
> 标签：.net, build, msbuild

我有一个很大的解决方案，里面有很多项目。因此，当它构建时，它会将许多库复制到构建的输出目录。如何指定某些 DLL 文件的输出目录？

例如：

```
./OutputDir/Libraries/[and here we have some DLL files]

./OutputDir/Program.exe. 
```

[XCOPY](http://en.wikipedia.org/wiki/XCOPY)构建后操作可帮助我将所有 DLL 文件复制到另一个目录中。这是构建后的操作：

```
mkdir "$(ProjectDir)bin\$(ConfigurationName)\Libraries"

xcopy "$(ProjectDir)bin\$(ConfigurationName)\*.dll" "$(ProjectDir)bin\$(ConfigurationName)\Libraries" 
```

我应该如何将这些 DLL 文件链接到可执行文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T11:57:04.177

您可以在项目设置中设置输出文件，也可以在构建时使用`/property:OutputDir=OutputDir\Libraries`.

如果您需要一个 dll 的副本，您可以使用构建后操作来完成。

# mongodb - 限制mongodb集合中的文档数

> ID：10995868
> 
> 赞同：3
> 
> 时间：2012-06-12T11:38:23.390
> 
> 标签：mongodb

我有一个用作缓存的集合。如何在此集合中将文档数量限制为 5M。注意：可以更新的缓存项将存在于缓存中。我尝试使用上限，但无法修改保存在上限集合中的项目。

有没有办法做到这一点？（我想避免删除该项目，然后插入更新一个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:43:36.327

不幸的是，您在这里无能为力。如您所述，无法修改上限集合中的文档。而且，您不能在文档中指定限制，它以 MB 为单位，IIRC。

因此，您最好的选择是使用普通收集并定期执行检查收集是否溢出并清理旧文档的作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T09:52:16.400

**db.createCollection("collectionName",{capped:true,size:10000,max:1000})**

此命令用于创建固定大小的集合，其中

*collectionName*：要设置的集合的名称 limit
*capped：true*（固定大小的集合）
*size*：集合的最大大小（以字节为单位）
*max*：限制为 no。文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-10T13:13:40.653

尽管这可能为时已晚，但在 3.x MongoDB 中，可以使用[CreateCollectionOptions](http://api.mongodb.com/java/current/com/mongodb/client/model/CreateCollectionOptions.html)行中的某些内容。

这样做的*Java*示例代码是：

```
mongoClient.getDatabase(databaseName).createCollection(collectionName, 
    new CreateCollectionOptions().capped(true).sizeInBytes(5120).maxDocuments(100)); 
```

其中 5120 是 5MB 的字节大小，100 是您可以在集合中存储的文档数量的上限。

# objective-c - Objective-c 覆盖委托及其后代类型

> ID：10995873
> 
> 赞同：6
> 
> 时间：2012-06-12T11:38:34.750
> 
> 标签：objective-c, ios, cocoa-touch, delegates, first-responder

我的单元格中有 textView，有时在 tableView 滚动期间会发生一些奇怪的调用。系统让我的 textView 成为第一响应者。我发现这些调用会产生不良行为：

```
#0 -[UITextView canBecomeFirstResponder] ()
#1 -[UIView(Hierarchy) deferredBecomeFirstResponder] ()
#2 -[UIView(Hierarchy) _promoteDescendantToFirstResponderIfNecessary] () 
```

我不知道为什么要调用这些，所以我尝试通过扩展`UITextView`和覆盖来解决这个问题`- canBecomeFirstResponder`。

这是我的.h：

```
#import <UIKit/UIKit.h>

@protocol TextViewDelegate;

@interface TextView : UITextView

@property (nonatomic, assign) id<TextViewDelegate> delegate;

@end

@protocol TextViewDelegate <UITextViewDelegate>

- (BOOL)canBecomeFirstResponder:(TextView *)textView;

@end 
```

和.m：

```
#import "TextView.h"

@implementation TextView

@synthesize delegate;

- (BOOL)canBecomeFirstResponder
{
    return [self.delegate respondsToSelector:@selector(canBecomeFirstResponder:)] ? [self.delegate canBecomeFirstResponder:self] : NO;
}

@end 
```

该解决方案有效，但在线上`@property (nonatomic, assign) id<TextViewDelegate> delegate;`我收到了警告，但我不知道为什么。它说`Property type 'id<TextViewDelegate>' is incompatible with type 'id<UITextViewDelegate>' inherited from 'UITextView'`。

那么，如果我不这样做，为什么系统要让 textView 成为第一响应者呢？为什么我会收到此警告？有比我更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T12:35:55.147

我不确定，但我怀疑这个警告是因为预编译器知道`TextViewDelegate`但它还不知道这个协议正在继承`UITextView`协议。只需像这样在上面声明它：

```
@class TextView;

@protocol TextViewDelegate <UITextViewDelegate>

- (BOOL)canBecomeFirstResponder:(TextView *)textView;

@end

@interface TextView : UITextView

@property (nonatomic, assign) id<TextViewDelegate> delegate;

@end 
```

但我不确定我是否理解这个问题。您有一张桌子，并且在一个/多个/每个单元格中都有一个`UITextView`，对吗？您希望文本视图可编辑吗？因为你可以简单地设置`[textView setEditable:FALSE];`

希望这可以帮助。

问候，

乔治

# c# - 无法使用 LINQ 和 XDocument 访问元素

> ID：10995878
> 
> 赞同：0
> 
> 时间：2012-06-12T11:39:18.507
> 
> 标签：c#, asp.net, linq, linq-to-xml

我有一段 xml 作为 Web 服务的响应。

```
 <Production>
    <creator>...</creator>
    <creator.date_of_birth/>
    <creator.date_of_death/>
    <creator.history/>
    <creator.lref>426</creator.lref>
    <creator.qualifier/>
    <creator.role/>
    <creator.role.lref/>
    <production.notes/>
    <production.place>France</production.place>
    <production.place.lref>30</production.place.lref>
  </Production>
  <production.period>19th century</production.period>
  <production.period.lref>13</production.period.lref>
  <Production_date>
    <production.date.end>1863</production.date.end>
    <production.date.end.prec>circa.</production.date.end.prec>
    <production.date.start>1863</production.date.start>
    <production.date.start.prec>dated</production.date.start.prec>
  </Production_date> 
```

下面是我获取值的 LINQ 代码：

```
allrecs = (from XElement c in recordSet.Descendants("recordList")
                where c.HasElements
                from x in c.Elements("record")
                select new CollectionRecord()
                {
                  production_place =  x.Element("Production").Element("production.place").Value,
                  production_period =  x.Element("production.period").Value,
                  production_start_date = x.Element("Production_date").Element("production.date.start").Value,
                  production_end_date = x.Element("Production_date").Element("production.date.end").Value,
                }).ToList <CollectionRecord>(); 
```

我发现的问题是 - 我无法获得“production.date.start”和“production.date.end”的值，但上面的代码适用于“production.period”。xml 结构和这些元素中的数据没有任何问题。根据我的理解，它不适用于任何类似 - “abc”的元素，但它适用于 - “ab”，因为我已经检查过其他类似元素并且它不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:26:27.480

为我工作（我保持你的 Xlinq 代码相同 - 只是换成了匿名类型`new`）：

```
[TestMethod]
public void TestMethod1()
{
  XElement x = XElement.Parse(@"<record><Production> 
<creator>...</creator> 
<creator.date_of_birth/> 
<creator.date_of_death/> 
<creator.history/> 
<creator.lref>426</creator.lref> 
<creator.qualifier/> 
<creator.role/> 
<creator.role.lref/> 
<production.notes/> 
<production.place>France</production.place> 
<production.place.lref>30</production.place.lref> 
</Production> 
<production.period>19th century</production.period> 
<production.period.lref>13</production.period.lref> 
<Production_date> 
<production.date.end>1863</production.date.end> 
<production.date.end.prec>circa.</production.date.end.prec> 
<production.date.start>1863</production.date.start> 
<production.date.start.prec>dated</production.date.start.prec> 
</Production_date></record>");
  var rec = new 
              {
                production_place = x.Element("Production").Element("production.place").Value,
                production_period = x.Element("production.period").Value,
                production_start_date = x.Element("Production_date").Element("production.date.start").Value,
                production_end_date = x.Element("Production_date").Element("production.date.end").Value,
              };
  Assert.AreEqual("France", rec.production_place);
  Assert.AreEqual("19th century", rec.production_period);
  Assert.AreEqual("1863", rec.production_start_date);
  Assert.AreEqual("1863", rec.production_end_date);
} 
```

我想知道您的`CollectionRecord`班级是否正在使用属性以及您`set`是否为这两个违规值正确编写了方法？

（更新）由于您的 get/sets 是“标准的”，因此它可能很简单，就像某处将这些属性物理设置为 null 某处的一段代码一样简单。

# java - Main-Class: Manifest - 如何使用参数定义入口点

> ID：10995879
> 
> 赞同：1
> 
> 时间：2012-06-12T11:39:19.690
> 
> 标签：java, class, arguments, parameter-passing, manifest

我的清单文件中有一个带有预定义入口点的 jar 文件。并且可以成功执行。

```
hadoop jar hadoop-test-1.0.2.jar -write -nrFiles 1 -fileSize 10
TestDFSIO.0.0.4
12/06/11 21:35:09 INFO fs.TestDFSIO: nrFiles = 1
12/06/11 21:35:09 INFO fs.TestDFSIO: fileSize (MB) = 10
12/06/11 21:35:09 INFO fs.TestDFSIO: bufferSize = 1000000
12/06/11 21:35:09 INFO fs.TestDFSIO: creating control file: 10 mega bytes, 1 files
12/06/11 21:35:09 INFO fs.TestDFSIO: created control files for: 1 files
12/06/11 21:35:10 INFO mapred.FileInputFormat: Total input paths to process : 1
12/06/11 21:35:10 INFO mapred.JobClient: Running job: job_201206110904_0029
12/06/11 21:35:11 INFO mapred.JobClient:  map 0% reduce 0%
12/06/11 21:35:25 INFO mapred.JobClient:  map 100% reduce 0%
12/06/11 21:35:37 INFO mapred.JobClient:  map 100% reduce 100%
... 
```

现在我关心的是如何在没有选项的情况下执行 jar。我的意思是我只想调用：

```
hadoop jar hadoop-test-1.0.2.jar 
```

我需要以某种方式定义`"-write -nrFiles 1 -fileSize 10"`jar 文件中的参数。但是怎么做？

如何在清单文件中定义它？我知道我可以生成自己的类，然后使用这些参数启动测试类。但是还有其他解决方法吗？

令人惊讶的是：定义了一个类，它使用 args 调用所需的类。

执行尝试：

```
hadoop jar hadoop-test-1.0.2.jar 
RunJar jarFile [mainClass] args... 
```

使用类的名称作为 arg，它可以工作！

```
hadoop jar hadoop-test-1.0.2.jar Start
TestDFSIO.0.0.4
12/06/12 01:05:11 INFO fs.TestDFSIO: nrFiles = 10
12/06/12 01:05:11 INFO fs.TestDFSIO: fileSize (MB) = 1000
12/06/12 01:05:11 INFO fs.TestDFSIO: bufferSize = 1000000
12/06/12 01:05:11 INFO fs.TestDFSIO: creating control file: 1000 mega bytes, 10 files
12/06/12 01:05:11 INFO fs.TestDFSIO: created control files for: 10 files
12/06/12 01:05:11 INFO mapred.FileInputFormat: Total input paths to process : 10
12/06/12 01:05:12 INFO mapred.JobClient: Running job: job_201206110904_0033
... 
```

我的清单内容：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.7.1
Created-By: 20.1-b02 (Sun Microsystems Inc.)
Main-Class: Start

Name: org/apache/hadoop
Implementation-Title: Hadoop
Implementation-Version: 1.0.2
Implementation-Vendor: Apache 
```

Start.java的内容：

```
import org.apache.hadoop.fs.TestDFSIO;
public class Start {

        public static void main(String[] args) throws Exception{
                String [] myargs  = {"-write","-nrFiles","10","-fileSize","1000"};

                TestDFSIO.main(myargs);

        }
} 
```

我究竟做错了什么？为什么我无法执行 Start using the jar file without args 来执行原始类TestDFIO？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:44:22.440

你不能这样做。相反，您可以尝试创建另一个没有参数的主类，用您需要的参数调用原始主类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:47:31.277

没有。您可以创建新`main`方法或从其他地方获取参数，例如配置文件、环境变量等。

您也可以只编写一个包装外壳脚本来完成该部分。

在不知道*为什么*需要这样做的情况下，提供可操作的想法会更加困难。

# flash - 如何在没有闪光灯的情况下创建全屏按钮？

> ID：10995885
> 
> 赞同：0
> 
> 时间：2012-06-12T11:39:42.897
> 
> 标签：flash, html, fullscreen

我正在尝试制作一个没有 Flash 的网站；但是，我坚持尝试制作一个图标，单击该图标会使页面全屏显示（相当于 f11）。如果我必须在 Flash 中完成它，它很简单，但是没有 Flash 我怎么能做到呢？有没有可用的 html5 选项？

我看到了一些解决方案，但它们与我找到的闪存解决方案不相似......我发现的一切似乎都像这个例子：

[http://www.htmlgoodies.com/beyond/dhtml/article.php/3470521/So-You-Want-A-FullScreen-Browser-Huh.htm](http://www.htmlgoodies.com/beyond/dhtml/article.php/3470521/So-You-Want-A-FullScreen-Browser-Huh.htm)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:44:46.507

目前只有最新的 chrome 和 firefox 支持 html5 全屏。

见这里：[http ://www.longtailvideo.com/blog/26517/using-the-browsers-new-html5-fullscreen-capabilities](http://www.longtailvideo.com/blog/26517/using-the-browsers-new-html5-fullscreen-capabilities)

在这里：[http ://hacks.mozilla.org/2012/01/using-the-fullscreen-api-in-web-browsers/](http://hacks.mozilla.org/2012/01/using-the-fullscreen-api-in-web-browsers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:46:46.863

看看这个使用 JavaScript 的解决方案，它当然是依赖于浏览器的。我认为这是尽可能接近 flash 提供 的内容[如何使用 Javascript 使窗口全屏（在整个屏幕上伸展）](https://stackoverflow.com/questions/1125084/how-to-make-in-javascript-full-screen-windows-stretching-all-over-the-screen)

# python - Django工具栏没有显示

> ID：10995888
> 
> 赞同：2
> 
> 时间：2012-06-12T11:39:46.620
> 
> 标签：python, django, apache, django-debug-toolbar

我们昨天在远程服务器上安装了 django 工具栏，并一直在尝试让它显示在页面本身上。我已经在这里和谷歌上解决了所有关于它的问题，并且按照他们设想的方式进行了所有设置。像 INTERNAL_IPS、DEBUG、MIDDLEWARE_CLASSES 等。工具栏代码显示在源 html 中，但我在屏幕上看不到任何按钮。我已经准备好在这件事上拔头发了。请帮忙！下面我将粘贴在 html 中我的标记之前显示的工具栏代码。

```
<script type="text/javascript">
// <![CDATA[
var DEBUG_TOOLBAR_MEDIA_URL = "/__debug__/m/";
// ]]>
</script>
<script type="text/javascript" src="/__debug__/m/js/toolbar.min.js"></script>
<div id="djDebug" style="display:none;">
<div style="display:none;" id="djDebugToolbar">
    <ul id="djDebugPanelList">
    <li><a id="djHideToolBarButton" href="#" title="Hide Toolbar">Hide &raquo;   </a></li>
            <li>
            <a href="#" title="Versions" class="djDebugVersionPanel">
            Versions
            <br /><small>Django 1.4</small>
            </a>
            </li>
            <li>
            <a href="#" title="Resource Usage" class="djDebugTimerPanel">
                Time
            <br /><small>CPU: 220.01ms (251.44ms)</small> 
```

编辑：我正在添加我的应用程序的 settings.py 部分：

```
if DEBUG:
INTERNAL_IPS = ('my machine's IP',)
MIDDLEWARE_CLASSES += (
    'debug_toolbar.middleware.DebugToolbarMiddleware',
)

INSTALLED_APPS += (
    'debug_toolbar',
)

DEBUG_TOOLBAR_PANELS = (
    'debug_toolbar.panels.version.VersionDebugPanel',
    'debug_toolbar.panels.timer.TimerDebugPanel',
    'debug_toolbar.panels.settings_vars.SettingsVarsDebugPanel',
    'debug_toolbar.panels.headers.HeaderDebugPanel',
    #'debug_toolbar.panels.profiling.ProfilingDebugPanel',
    'debug_toolbar.panels.request_vars.RequestVarsDebugPanel',
    'debug_toolbar.panels.sql.SQLDebugPanel',
    'debug_toolbar.panels.template.TemplateDebugPanel',
    'debug_toolbar.panels.cache.CacheDebugPanel',
    'debug_toolbar.panels.signals.SignalDebugPanel',
    'debug_toolbar.panels.logger.LoggingPanel',
)

DEBUG_TOOLBAR_CONFIG = {
    'INTERCEPT_REDIRECTS': False,
}

def show_toolbar(request):
    return True # Always show toolbar, for example purposes only.

DEBUG_TOOLBAR_CONFIG = {
'INTERCEPT_REDIRECTS': False,
'SHOW_TOOLBAR_CALLBACK': show_toolbar,
 # 'EXTRA_SIGNALS': ['myproject.signals.MySignal'],
'HIDE_DJANGO_SQL': False,
#  'TAG': 'html',
'DEBUG_TOOLBAR_MEDIA_URL' : '/usr/local/lib/python2.6/dist-packages/django_debug_toolbar-0.8.5-py2.6.egg/debug_toolbar/media'       
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:06:36.837

这是一个疯狂的猜测，但我之前遇到过这个问题：您的 html 代码不正确。我想我有一个丢失的标签，它阻止了调试工具栏的显示，但否则这不是问题。

禁用调试工具栏并检查您的页面是否正确（例如，使用 w3c 验证器）。如果您发现任何 html 问题，请更正它。它可能会使调试工具栏再次工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T10:37:34.387

的含义`SHOW_TOOLBAR_CALLBACK`已更改为需要字符串且不支持可调用对象。

```
def custom_show_toolbar(request):
    return True  # Always show toolbar, for example purposes only.

DEBUG_TOOLBAR_CONFIG = {
    'SHOW_TOOLBAR_CALLBACK': 'your_project_name.settings.custom_show_toolbar',
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:58:58.143

调试工具栏的最新版本是 0.9.4 值得一试升级——也许在此过程中某个时候修复了一个错误。

# android - Android 使用 GTFS-Realtime（无 API）

> ID：10995891
> 
> 赞同：3
> 
> 时间：2012-06-12T11:39:52.607
> 
> 标签：android, gtfs

这不是最佳解决方案，但我正在开发一个必须使用 GTFS-Realtime 数据的 Android 应用程序，因为 API 不可用。数据集会很小，一次跟踪的最大车辆数为 8-10，或者我会考虑构建自己的 API。

由于通常的做法是从公开 API 的服务器中使用 GTFS-Realtime 数据，因此我找不到任何实现[“gtfs-realtime.proto”](https://developers.google.com/transit/gtfs-realtime/gtfs-realtime-proto "gtfs-realtime.proto")以在移动设备上处理 Google 协议格式的好例子

**我的问题：是否有任何开放项目演示使用使用 Android Native 的协议缓冲区格式实现来使用 GTFS-Realtime？我检查了 github，几乎所有东西都通向 OneBusAway，这需要他们的 API，而我对此并不感兴趣。**

我见过的最接近的实现是在 Ruby 中完成的这个示例：[https ://github.com/reidab/trimet-gtfs-realtime](https://github.com/reidab/trimet-gtfs-realtime)

**或者 Ruby 的[“Beefcake”](http://thechangelog.com/post/2693375170/beefcake-a-sane-google-protocol-buffers-library-for-ruby "牛肉饼")的 Java 版本将是一个开始。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:01:30.467

您是否尝试过仅使用香草 OneBusAway GTFS-realtime API 模块？

[https://github.com/OneBusAway/onebusaway-gtfs-realtime-api/wiki](https://github.com/OneBusAway/onebusaway-gtfs-realtime-api/wiki)

它只包含从 GTFS-realtime 原型生成的 Java 类，并且应该非常简单地用于解析 GTFS-realtime 提要。当然，我从未尝试在 Android 应用程序中使用该模块。

# php - 按标题自定义wordpress关键字搜索

> ID：10995893
> 
> 赞同：1
> 
> 时间：2012-06-12T11:40:04.080
> 
> 标签：php, wordpress, search

我正在为一个项目使用模板（不幸的是客户的想法），这个模板有一个下拉搜索部分供用户搜索自定义帖子（属性）。唯一的问题是，没有关键字框供用户按关键字搜索。

我正在尝试为用户集成一个搜索功能，以通过关键字进行搜索，但是事实证明这比我最初想象的要困难得多。我不是最精通wordpress（我使用EE）。

有人可以帮我将关键字搜索功能集成到以下代码中：

customsearchform.php

```
<form id="search" action="<?php bloginfo('url'); ?>/<?php echo $slugname; ?>" method="post">

            <label>Keywords</label>
            <input type="text" name="keywords" style="width:190px;margin-bottom:10px;" />

            <div id="location"> 
            <label><?php echo get_option('wp_location_text')  ?></label>
                <?php
                $location_level1 = get_option('wp_location_level1');
                $arr_location_level1 = explode("\n", $location_level1);

                echo "<select id='location_level1' name='location_level1'>";
                $counter = 0;
                foreach ($arr_location_level1 as $item => $value) {
                    if($counter == 0) {
                    echo "<option value='' selected='selected'>Anywhere</option>";
                    echo "<option value='".$value."'>".$value."</option>";
                    } else {

                        echo "<option value='".$value."'>".$value."</option>";
                }
                $counter = $counter + 1;
                }
                echo "</select>";
                ?>

                <?php if(get_option("wp_secondary_location") == 'Enable') { ?>

                     <div id="location_level2_drop_down">
                     <select id="location_level2" name="location_level2">

                     </select>
                     </div>

                <?php } ?>
            </div><!-- end location -->

            <?php if (get_option('wp_rentbuy') == "Show") { ?>
                    <div id="rentorbuy">

                    <label><?php echo get_option('wp_rentorbuy_text') ?></label>
                    <select name="rentbuy">
                        <option value="">Any</option>
                        <option value="rent">Rent</option>
                        <option value="buy">Buy</option>
                    </select>
                    </div><!-- end rentorbuy -->
                <?php } ?>

            <?php

$prices = get_option('wp_price');
$arr_prices = explode("\n", $prices);
foreach ($arr_prices as $price) {
    $priceoptions = $priceoptions . "<option value='" . $price . "'>" . $currencysymbol . number_format($price) . "</option>";
}

$prices2 = get_option('wp_price2');
$arr_prices2 = explode("\n", $prices2);
foreach ($arr_prices2 as $price2) {
    $priceoptions2 = $priceoptions2 . "<option value='" . $price2 . "'>" . $currencysymbol . number_format($price2) . "</option>";
}

?>

            <div id="bedsbathsrow">
            <div id="beds">
                <label><?php echo get_option('wp_bedrooms_text')  ?></label>
                <select name="beds">
                    <option value="">Any</option>
                    <option value="1">1+</option>
                    <option value="2">2+</option>
                    <option value="3">3+</option>
                    <option value="4">4+</option>
                    <option value="5">5+</option>
                </select>
                </div><!-- end beds -->

            <div id="propertytypesection">
            <label><?php echo get_option('wp_propertytype_text')  ?></label>
               <?php
                $propertytype = get_option('wp_propertytype');
                $arr_propertytype = explode("\n", $propertytype);

                $counter = 0;
                echo "<select id='propertytype' name='propertytype'>";

                foreach ($arr_propertytype as $item => $value) {
                    if($counter == 0) {
                    echo "<option value='' selected='selected'>Any</option>";
                    echo "<option value='".$value."'>".$value."</option>";
                    } else {

                        echo "<option value='".$value."'>".$value."</option>";
                }
                $counter = $counter + 1;
                }   
                echo "</select>";               
                ?>
            </div><!-- end propertytype -->
                </div><!-- end bedsbathsrow -->

            <!-- BUY PRICES -->
            <div id="buyprices">
            <!-- minimum price dropdown menu -->
            <div class="pricemin">
            <label><?php echo get_option('wp_minimumprice_text')  ?></label>
                <select name="minprice_buy">
                    <option value="0">No Min</option>
                    <?php echo $priceoptions ?>
                </select>
            </div><!-- end pricemin -->

            <!-- Maximum price dropdown menu -->
            <div class="pricemax">
            <label><?php echo get_option('wp_maximumprice_text')  ?></label>
                <select name="maxprice_buy">
                    <option value="99999999999999">No Max</option>
                    <?php echo $priceoptions ?>
                </select>
            </div><!-- end pricemax -->
            </div> <!-- end buyprices -->

            <!-- RENT PRICES -->
            <?php if (trim(get_option('wp_rentbuy') == "Show")) { ?>
            <!-- minimum price dropdown menu -->
            <div id="rentprices" style="display: none;">
            <div class="pricemin">
            <label><?php echo get_option('wp_minimumprice_text')  ?></label>
                <select name="minprice_rent">
                    <!-- do not edit the next line -->
                    <option value="0">No Min</option>
                    <?php echo $priceoptions2 ?>
                </select>
            </div><!-- end pricemin -->

            <!-- Maximum price dropdown menu -->
            <div class="pricemax">
            <label><?php echo get_option('wp_maximumprice_text')  ?></label>
                <select name="maxprice_rent">
                    <!-- do not edit the next line -->
                    <option value="9999999999999">No Max</option>
                    <?php echo $priceoptions2 ?>
                </select>
            </div><!-- end pricemax -->
            </div><!-- end RENT PRICES -->
            <?php } ?>

        <div id="propertytyperow">

             <div><input value="<?php echo get_option('wp_searchbutton_text') ?>" type="submit" /></div>

        </div><!-- end propertytyperow -->
        </form> 
```

search_query.php

```
<?php 

if (isset($_COOKIE['location_level1']) && $_COOKIE['location_level1'] != '') {

$search_location_level1 = $_COOKIE['location_level1'];
} else {
$search_location_level1 = trim($_POST['location_level1']);
}

if (isset($_COOKIE['location_level2']) && $_COOKIE['location_level2'] != '') {
$search_location_level2 = $_COOKIE['location_level2'];
} else {
$search_location_level2 = trim($_POST['location_level2']);
}

if (isset($_COOKIE['beds']) && $_COOKIE['beds'] != '') {
$search_bedrooms = $_COOKIE['beds'];
} else {
$search_bedrooms = trim($_POST['beds']);
}

if (isset($_COOKIE['baths']) && $_COOKIE['baths'] != '') {
$search_bathrooms = $_COOKIE['baths'];
} else {
$search_bathrooms = trim($_POST['baths']);
}

if (isset($_COOKIE['minprice_buy']) && $_COOKIE['minprice_buy'] != '') {
$search_pricemin_buy = $_COOKIE['minprice_buy'];
} else {
$search_pricemin_buy = '0';
}

if (isset($_COOKIE['maxprice_buy']) && $_COOKIE['maxprice_buy'] != '') {
$search_pricemax_buy = $_COOKIE['maxprice_buy'];
} else {
$search_pricemax_buy = '99999999999999';
}

if (isset($_COOKIE['minprice_rent']) && $_COOKIE['minprice_rent'] != '') {

//echo $_COOKIE['minprice_rent'] . "...";
$search_pricemin_rent = $_COOKIE['minprice_rent'];
} else {
//echo "222";
$search_pricemin_rent = '0';
}

if (isset($_COOKIE['maxprice_rent']) && $_COOKIE['maxprice_rent'] != '') {
$search_pricemax_rent = $_COOKIE['maxprice_rent'];
} else {
$search_pricemax_rent = '99999999999999';
}

if (isset($_COOKIE['propertytype']) && $_COOKIE['propertytype'] != '') {
$search_propertytype = $_COOKIE['propertytype'];
} else {
$search_propertytype = trim($_POST['propertytype']);
}

if (get_option('wp_rentbuy') == "Show") {
    if (isset($_COOKIE['rentbuy']) && $_COOKIE['rentbuy'] != '') {
    $search_buyorrent = $_COOKIE['rentbuy'];
    } else {
    $search_buyorrent = trim($_POST['rentbuy']);
    }
} else {

    $search_buyorrent = '';
}

$checkalllistings = $_GET['alllistings'];
if ($checkalllistings == true) { 

    $search_location_level1 = '';
    $search_location_level2 = '';
    $search_bedrooms = '';
    $search_bathrooms = '';
    $search_pricemin_buy = '0';
    $search_pricemax_buy = '99999999999999';
    $search_pricemin_rent = '0';
    $search_pricemax_rent = '99999999999999';
    $search_propertytype = '';
    $search_buyorrent = '';

}

?>

<?php
$_ids = array();
function getIds( $query ) {
    global $wpdb;

    $searchresults = $wpdb->get_results($query, ARRAY_A);
    if ( !empty ($searchresults) ) {
        foreach( $searchresults as $_post ) {
            $tmp[] = $_post['ID'];
        }
    }

    return $tmp;
}

global $wpdb;

//$query ="SELECT p.* FROM $wpdb->posts p, $wpdb->postmeta p1 WHERE p.ID = p1.post_id AND p.post_type = 'listing' AND p.post_status = 'publish'";
$query ="SELECT p.* FROM $wpdb->posts p WHERE p.post_type = 'listing' AND p.post_status = 'publish'";
        $all = getIds( $query );
        $_ids = ( !empty($all) ? ( !empty($_ids) ? array_intersect( $_ids, $all) : $all ) : "" );

if ($search_buyorrent != "") {
        $query = "SELECT p.* FROM $wpdb->posts p, $wpdb->postmeta p1
                WHERE p.ID = p1.post_id AND p1.meta_key = 'rob_value' AND p1.meta_value = '$search_buyorrent'";
        $spm = getIds( $query );

        $_ids = ( !empty($spm) ? ( !empty($_ids) ? array_intersect( $_ids, $spm) : "" ) : "" );
}

if ($search_buyorrent == "buy" || $search_buyorrent == "") {
        $query ="SELECT p.* FROM $wpdb->posts p, $wpdb->postmeta p1
                WHERE p.ID = p1.post_id AND p1.meta_key='price_value' AND convert(p1.meta_value, signed) BETWEEN '$search_pricemin_buy' AND '$search_pricemax_buy'";
        $spm = getIds( $query );
        $_ids = ( !empty($spm) ? ( !empty($_ids) ? array_intersect( $_ids, $spm) : "" ) : "" );
}

if ($search_buyorrent == "rent") {

        $query ="SELECT p.* FROM $wpdb->posts p, $wpdb->postmeta p1
                WHERE p.ID = p1.post_id AND p1.meta_key='price_value' AND convert(p1.meta_value, signed) BETWEEN '$search_pricemin_rent' AND '$search_pricemax_rent'";
        $spm = getIds( $query );
        $_ids = ( !empty($spm) ? ( !empty($_ids) ? array_intersect( $_ids, $spm) : "" ) : "" );
}

if($search_location_level1 != '')
{
$search_location_level1 = trim($search_location_level1);

    $query ="SELECT p.* FROM $wpdb->posts p, $wpdb->postmeta p1
            WHERE p.ID = p1.post_id AND p1.meta_key = 'location_level1_value' AND p1.meta_value = '$search_location_level1'";
    $sll1 = getIds( $query );

    $_ids = ( !empty($sll1) ? ( !empty($_ids) ? array_intersect( $_ids, $sll1) : "" ) : "" );
} 

if($search_location_level2 != '')
{
$search_location_level2 = trim($search_location_level2);

    $query ="SELECT p.* FROM $wpdb->posts p, $wpdb->postmeta p1
            WHERE p.ID = p1.post_id AND p1.meta_key='location_level2_value' AND trim(p1.meta_value)='$search_location_level2'";
    $sll2 = getIds( $query );
    $_ids = ( !empty($sll2) ? ( !empty($_ids) ? array_intersect( $_ids, $sll2) : "" ) : "" );
}

if($search_bedrooms != '')
{
    $query ="SELECT p.* FROM $wpdb->posts p, $wpdb->postmeta p1
            WHERE p.ID = p1.post_id AND p1.meta_key='beds_value' AND p1.meta_value >= '$search_bedrooms'";

    $sbr = getIds( $query );
    $_ids = ( !empty($sbr) ? ( !empty($_ids) ? array_intersect( $_ids, $sbr) : "" ) : "" );
} 

if($search_bathrooms != '')
{
    $query ="SELECT p.* FROM $wpdb->posts p, $wpdb->postmeta p1
            WHERE p.ID = p1.post_id AND p1.meta_key='baths_value' AND p1.meta_value >='$search_bathrooms'";

    $sbt = getIds( $query );

    $_ids = ( !empty($sbt) ? ( !empty($_ids) ? array_intersect( $_ids, $sbt) : "" ) : "" );
}

if($search_propertytype != '')
{

$search_propertytype = trim($search_propertytype);

    $query ="SELECT p.* FROM $wpdb->posts p, $wpdb->postmeta p1
            WHERE p.ID = p1.post_id AND p1.meta_key='propertytype_value' AND p1.meta_value='$search_propertytype'";
    $sptt = getIds( $query );

    $_ids = ( !empty($sptt) ? ( !empty($_ids) ? array_intersect( $_ids, $sptt) : "" ) : "" );
}

?>

<a name="headeranchor"></a>
<?php if ($checkalllistings == true) { 
$alllistings = true;
if (count($_ids) > 3) {
    $results = " (" . count($_ids) . ")"; 
    } else {
    $results = "";
    }

?>

<h2 id="heading_searchresults" class="results"><?php echo get_option('wp_alllistings') . $results; ?></h2>
<?php } else { ?>
<h2 id="heading_searchresults" class="results"><?php echo get_option('wp_searchresults') . $results; ?></h2>
<?php } ?>

<?php
if($resultsorder) {
    //get value from order dropdown on search results page
    $resultsorder = $resultsorder;
    } else {
    $resultsorder = get_option('wp_searchorder');
}

    switch ($resultsorder) {
        case "Price Descending":
            $metakey = 'price_value';
            $order = 'DESC';
            $orderby = 'meta_value_num';
            break;
        case "Price Ascending":
            $metakey = 'price_value';
            $order = 'ASC';
            $orderby = 'meta_value_num';
            break;
        case "Date Descending":
            $metakey = '';
            $order = 'DESC';
            $orderby = 'date';
            break;
        case "Date Ascending":
            $metakey = '';
            $order = 'ASC';
            $orderby = 'date';
            break;
        case "Random":
            $metakey = '';
            $order = '';
            $orderby = 'rand';
            break;
    }

if (!empty($_ids) && !$alllistings) {
    $wpq = array ('post_type' => 'listing', 'meta_key' => $metakey, 'orderby' => $orderby, 'order' => $order, 'post__in' => $_ids,  'post_status' => 'publish', 'paged' => $paged, 'posts_per_page' => get_option('wp_searchresultsperpage') );

} elseif (empty($_ids) && !$alllistings) {

    // $_ids array is empty because search got no results
    // $_ids array will be empty if page is an "All Listings" page. Don't run this code if is All Listings because All Listings will show all listings. This code will display "no results found"
    $wpq = array ('post_type' =>'listing', 'meta_key' => $metakey, 'orderby' => $orderby, 'order' => $order, 'post__in' => array('0'),'post_status' => 'publish', 'paged' => $paged, 'posts_per_page' => get_option('wp_searchresultsperpage'));
} elseif ($alllistings) {
    // This is an All Listings page, so show all results
    $wpq = array ('post_type' =>'listing', 'paged' => $paged, 'meta_key' => $metakey, 'orderby' => $orderby, 'order' => $order, 'post_status' => 'publish', 'posts_per_page' => get_option('wp_searchresultsperpage'));
}
query_posts($wpq);

//$listing = new WP_Query($wpq);

?>

<?php 
if ($search_location_level1 != "") { ?>
<script type="text/javascript">
    $("#location_level2").load("<?php bloginfo('template_url');?>/secondary_search_locations/<?php echo $search_location_level1 ?>.txt");
</script>
<?php } ?>

<?php 
if ($search_buyorrent == "buy" || $search_buyorrent == "") { ?>
<script type="text/javascript">
        $('#buyprices').show();
        $('#rentprices').hide();
</script>
<?php } else { ?>
<script type="text/javascript">
        $('#buyprices').hide();
        $('#rentprices').show();
</script>
<?php } ?>

<script type="text/javascript">
function remember( selector ){
$(selector).each(
function(){
//if this item has been cookied, restore it
var name = $(this).attr('name');
if( $.cookie( name ) ){
$(this).val( $.cookie(name) );
}
//assign a change function to the item to cookie it
$(this).change(
function(){
$.cookie(name, $(this).val(), { path: '/', expires: 365 });
}
);
}
);
}

<?php 
if ($search_buyorrent == "buy" || $search_buyorrent == "") {  ?>

remember( '[name=minprice_buy], [name=maxprice_buy]' );
<?php } ?>

<?php if ($search_buyorrent == "rent") { ?>
remember( '[name=minprice_rent], [name=maxprice_rent]' );
<?php } ?>
</script>

<?php
/*
echo '<pre>';
print $query;
echo '</pre>';
*/
?> 
```

提前致谢！

# java - WorldWind - 可运行的 jar：java.library.path 中没有 glengen-rt

> ID：10995894
> 
> 赞同：5
> 
> 时间：2012-06-12T11:40:04.153
> 
> 标签：java, jar, worldwind

我正在使用[WorldWind Java](http://worldwind.arc.nasa.gov/java/)和 Eclipse。

我正在尝试从 Eclipse 中的项目中导出一个可运行的 jar。导出顺利，但是当我尝试运行 jar 时出现此错误：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: java.lang.UnsatisfiedLinkError: no gluegen-rt in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1681)
    at java.lang.Runtime.loadLibrary0(Runtime.java:840)
    at java.lang.System.loadLibrary(System.java:1047)
    at com.sun.gluegen.runtime.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:102)
    at com.sun.gluegen.runtime.NativeLibLoader.access$000(NativeLibLoader.java:51)
    at com.sun.gluegen.runtime.NativeLibLoader$1.run(NativeLibLoader.java:70)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.gluegen.runtime.NativeLibLoader.loadGlueGenRT(NativeLibLoader.java:68)
    at com.sun.gluegen.runtime.NativeLibrary.ensureNativeLibLoaded(NativeLibrary.java:399)
    at com.sun.gluegen.runtime.NativeLibrary.open(NativeLibrary.java:163)
    at com.sun.gluegen.runtime.NativeLibrary.open(NativeLibrary.java:129)
    at com.sun.opengl.impl.x11.DRIHack.begin(DRIHack.java:109)
    at com.sun.opengl.impl.x11.X11GLDrawableFactory.<clinit>(X11GLDrawableFactory.java:99)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at javax.media.opengl.GLDrawableFactory.getFactory(GLDrawableFactory.java:111)
    at javax.media.opengl.GLCanvas.chooseGraphicsConfiguration(GLCanvas.java:520)
    at javax.media.opengl.GLCanvas.<init>(GLCanvas.java:131)
    at javax.media.opengl.GLCanvas.<init>(GLCanvas.java:90)
    at gov.nasa.worldwind.awt.WorldWindowGLCanvas.<init>(Unknown Source) 
```

我可以在 Eclipse 中毫无问题地运行该项目，我在构建路径中引用了 worldwind.jar、jogl.jar、gluegen-rt.jar 和gluegen-rt-natives-linux-amd64.jar 以及本机库.so 文件地点。目前，该项目只是一个显示 WorldWind 地球的 JFrame，如 gov.nasa.worldwindx.examples.SimplestPossibleExample.java 中所示。

我正在尝试构建一个可以在多个操作系统上运行的应用程序。

当我可以在 Eclipse 中毫无问题地运行项目时，我的 jar 无法运行，我做错了什么？

我认为我在使用本机库导出 jar 的过程中遇到了问题，但在 Google 上查找后我找不到解决方案。

我在带有 OpenJDK 的 64 位 Linux 上运行。

谢谢。

* * *

编辑 ：

我找到了一种使它起作用的解决方法，但不是我想要的方式：

似乎 Eclipse 的“Export Runnable Jar ...”不会以一种在我运行 jar 时使它们可以访问的方式导出 .so 文件，而所需的 .jar 文件包含在导出的 .jar 中并且可以访问。

解决方案是在 jar 旁边的文件夹中包含 .so 文件（Mac 为 .jnilib，Windows 为 .dll）并使用以下命令行启动 jar：`java -Xmx512m -Dsun.java2d.noddraw=true -Djava.library.path=./lib -jar MyJAR.jar`

`-Xmx512m`正在增加 java 内存，因为 WorldWind 可能需要比默认数量更多的内存，`-Dsun.java2d.noddraw=true`可以避免一些显示错误 IIRC。

我制作了一个包含此命令行的 .bash 和一个 .bat 文件。

根据我的发现，只要 .dll 文件与 .jar 位于同一文件夹中，Windows 上似乎不需要设置 lib 位置，尽管在 Linux 上总是需要它。由于我将库放在与 .jar 相同的文件夹中的 lib 文件夹中，因此我需要`-Djava.library.path`在这两种情况下进行设置。

Linux 所需的库是： libgluegen-rt.so libjogl.so libjogl_awt.so

我在这里找到了那些：http: [//download.java.net/media/jogl/builds/archive/](http://download.java.net/media/jogl/builds/archive/)

现在导出的 jar 在我的 Lunix 64 位系统上运行良好，我目前正在尝试寻找 Windows 和 Mac 系统来测试它。

**如果有人有解决方案来访问 .jar 文件中的 .so 文件，这仍然是受欢迎的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T10:38:21.593

你看过一罐吗？它有一个用于将本机库打包到应用程序 jar 中的系统。

[http://one-jar.sourceforge.net/index.php?page=details&file=native](http://one-jar.sourceforge.net/index.php?page=details&file=native)

# netbeans - Netbeans-J2ME（应用程序未运行）

> ID：10995896
> 
> 赞同：1
> 
> 时间：2012-06-12T11:40:18.607
> 
> 标签：netbeans, java-me

当我在 Netbeans 中运行任何应用程序时，它没有运行并关闭程序窗口出现......并且相同版本的 Netbeans 和相同的应用程序在另一台 PC 上运行得很好。你有什么解决办法吗？请帮助我..在此先感谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:53:24.113

从两台机器检查：

*   Java运行时环境*   Netbeans 设置和版本

    如果一切都一样，它应该工作相同

# php - Fuelphp 架构

> ID：10995900
> 
> 赞同：0
> 
> 时间：2012-06-12T11:40:31.937
> 
> 标签：php, frameworks, module, content-management-system, fuelphp

我想开始使用fuelphp，我对CI和KOHANA有一些经验，但从未使用过任何框架来发挥其全部能力。

我将要构建的应用程序将是我们客户的内部 cms 系统。它基本上是带有一些元数据的不同类型的对象。

我真正想要的是将管理/后台与应用程序的其余部分分开。

作为第一个选择，我考虑在模块中构建它。

作为第二个选择，我考虑过使用 FuelPHP 的脚手架，谁能告诉我最好的解决方案是什么？

我应该使用脚手架并对其进行编辑还是在模块中构建 cms？由于我根本没有使用燃料的经验，我希望有经验的人可以为我指明正确的方向。

另外，你们用什么作为信息来源？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:14:45.923

这一切都取决于您如何设置逻辑和数据结构。脚手架是一个很好的平面数据工具，一个很好的起点。但是，如果您的应用程序严重依赖相关数据、类型/对象的抽象，那么脚手架可能更像是您的方式，而不是一个快速启动。

通过我自己的 CMS 设置，我们有一个包含所有基本模型（CMS 逻辑）的包。提供管理界面的管理模块。还有一个处理 CMS 页面 URI 的包罗万象的控制器 (:any)。

所以试着看看事情需要变得多么复杂，并在此基础上选择适合你的方式。一个 CMS 绝对不是另一个。

此外，模块将更大的功能分开。因此，如果您已经封装了 CMS 的某些部分，那么将其作为一个模块可能是有益的。但不要过火。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:18:52.223

Or, you could use [PyroCMS](http://pyrocms.com/) which is an awesome Content Management System built on top of CodeIgniter. FuelPHP is a more modern framework which can do some cool stuff, but if you don't want to build a whole CMS then you can't go wrong with Pyro :)

# php - 使用带有进度的 PHP Ajax 准确上传文件夹

> ID：10995902
> 
> 赞同：2
> 
> 时间：2012-06-12T11:40:51.867
> 
> 标签：php, ajax, html, upload, directory

我想使用 PHP 将一个完整的文件夹按原样上传到 Web 服务器上。

我们选择了如下目录：

```
 .\
          |-Hello.txt
          |-Filen.jpg
          |-anotherfile.png
          |-File with Spaces.ext
          |-Folder -\
                    |-A file in a Folder.txt
                    |-Anohter Folder in Folder
                               -\
                                |-A file.ext 
```

然后它应该上传为：

```
 web-www/
          |-Hello.txt
          |-Filen.jpg
          |-anotherfile.png
          |-File with Spaces.ext
          |-Folder -/
                    |-A file in a Folder.txt
                    |-Anohter Folder in Folder
                               -/
                                |-A file.ext 
```

这意味着它应该在上传到网络服务器时**保持文件夹顺序。**

我尝试过使用一些 PHP 脚本（其中之一就是[this](http://sapphion.com/2011/11/html5-folder-upload-with-webkitdirectory/)）。但它将所有文件（在文件夹或另一个子文件夹中）上传到同一位置。有一个进度条会很好。请帮我！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:20:56.143

这是完全可能的。我一直在玩它一段时间，为我一直在构建的一个小应用程序构建一个 ajax 文件夹上传器。

我不想这么说，但我不相信（到目前为止）这在 webkit 浏览器之外是可能的。

但是可以使用 webkitRelativePath 来实现。

[http://sapphion.com/2012/06/keep-directory-structure-when-uploading/](http://sapphion.com/2012/06/keep-directory-structure-when-uploading/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:31:14.923

我 99% 确定你不能这样做，即使使用 html5。

最好的解决方案是归档文件和文件夹并在服务器上管理它们，但 ajax 无法上传文件夹。

# asp.net - 是否有任何第三方工具可以轻松地将任何 ASP.NET webforms 控件上的数据转换为 pdf？

> ID：10995905
> 
> 赞同：0
> 
> 时间：2012-06-12T11:41:08.467
> 
> 标签：asp.net, pdf, asp.net-controls

是否有任何第三方工具可以轻松地将任何 ASP.NET webforms 控件上的数据转换为 pdf？我有一个包含一些 ListViews 和 GridViews 的页面，我不想在所有这些上打印数据。我想打印特定的控件。那么有什么工具可以帮助我做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:46:33.993

看看 iTextSharp

[http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)

有一个文档

[http://www.codeproject.com/Articles/277065/Creating-PDF-documents-with-iTextSharp](http://www.codeproject.com/Articles/277065/Creating-PDF-documents-with-iTextSharp)

这应该可以帮助您入门

# android - Android- GridView 项目不按顺序

> ID：10995906
> 
> 赞同：0
> 
> 时间：2012-06-12T11:41:17.413
> 
> 标签：android

我对网格视图有疑问。当我通过检查条件创建视图时，gridview 的每个项目都包含一些数据（例如图像、文本等），即 if(convertView==null) 然后 gridview 的项目变得随机意味着它们不按顺序排列。如果我使用 if(true) 创建视图，则网格的滚动不流畅。

任何人都可以帮助我吗？？？？谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:16:33.220

gridView 适配器的 getView() 实现将被调用 n 次，其中 n 是数据集的大小。因此，您不必进行以下检查：

```
if (convertView == null) 
```

这将由 getView() 本身处理。此外，您可以检查您是否希望您的 convertView 属于某个类，如果它为 null，则从现有 layout.xml 文件创建新布局。

# javascript - 具有 2 个值的 Javascript 哈希映射

> ID：10995911
> 
> 赞同：2
> 
> 时间：2012-06-12T11:41:38.090
> 
> 标签：javascript

有没有办法做一个`javascript`包含 1 个键和 2 个值的哈希映射？

对于具有键和值的哈希映射，`javascript`我可以执行以下操作：

```
var userList = {
     11234321:"koko",
     22342342:"jojo",
     32342423:"fofo",
     42342342:"momo"                    
    } 
```

因此，对于每个 ID 号，我都有用户名。

现在，我想添加另一个值，例如：用户年龄。

有办法做到这一点吗？问题的任何其他解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T11:43:02.607

我建议将值作为另一个哈希

```
var userList = {
    11234321: {
        username: 'koko',
        age: 44
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T11:45:46.100

本质上，您要的是多维关联数组。它的 JavaScript 实现是嵌套对象，大致如下：

```
var userList = {
    11234321:{
        "username": "koko",
        "age": 24
    },
    22342342:{
        "username": "jojo",
        "age": 33
    },
    ...
}; 
```

请注意，这些巢穴的深度没有限制。

例如，要访问特定的用户名，您可以访问`userList[id]['username']`(或`userList[id].username`)，就像其他语言中的关联数组一样。

# sonarqube - Sonar 中的电子邮件设置配置不起作用

> ID：10995912
> 
> 赞同：0
> 
> 时间：2012-06-12T11:41:40.057
> 
> 标签：sonarqube

我已经为我的`Sonar`实例配置了电子邮件设置`Configuration--> general Seetings --> Email`。

详细配置如下。

```
SMTP host: mysmtpserver.com<br>
SMTP Port: 25<br>
Use secure connection: No<br>
SMTP username: Blank<br>
SMTP password:Blank<br>
From address:noreply@mycompany.sonar.com<br>
Email prefix: [SONAR] 
```

我已经保存了这些设置，当我尝试对其进行测试时，我在声纳屏幕中收到以下错误

```
org.apache.commons.mail.EmailException: Sending the email to the following server failed : mysmtpserver.com:25 
```

下面是异常的stracktrace

```
2012.06.12 12:10:11 ERROR o.s.p.e.EmailNotificationChannel  Fail to send test email to: myname@mycompany.com
org.apache.commons.mail.EmailException: Sending the email to the following server failed : mysmtpserver.com:25
at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1242) ~[na:na]
at org.apache.commons.mail.Email.send(Email.java:1267) ~[na:na]
at org.sonar.plugins.emailnotifications.EmailNotificationChannel.send(EmailNotificationChannel.java:192) ~[na:na]
at org.sonar.plugins.emailnotifications.EmailNotificationChannel.sendTestEmail(EmailNotificationChannel.java:210) ~[na:na]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0_26]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) ~[na:1.6.0_26]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_26]
at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_26]
at org.jruby.javasupport.JavaMethod.invokeDirectWithExceptionHandling(JavaMethod.java:559) [jruby-complete-1.6.1.jar:na]
at org.jruby.javasupport.JavaMethod.invokeDirect(JavaMethod.java:404) [jruby-complete-1.6.1.jar:na]
at org.jruby.java.invokers.InstanceMethodInvoker.call(InstanceMethodInvoker.java:79) [jruby-complete-1.6.1.jar:na]
at org.jruby.runtime.callsite.CachingCallSite.call(CachingCallSite.java:205) [jruby-complete-1.6.1.jar:na]
at org.jruby.ast.CallThreeArgNode.interpret(CallThreeArgNode.java:61) [jruby-complete-1.6.1.jar:na]
at org.jruby.ast.NewlineNode.interpret(NewlineNode.java:103) [jruby-complete-1.6.1.jar:na]
at org.jruby.ast.BlockNode.interpret(BlockNode.java:71) [jruby-complete-1.6.1.jar:na]
at org.jruby.ast.RescueNode.executeBody(RescueNode.java:216) [jruby-complete-1.6.1.jar:na]
at org.jruby.ast.RescueNode.interpretWithJavaExceptions(RescueNode.java:120) [jruby-complete-1.6.1.jar:na]
at org.jruby.ast.RescueNode.interpret(RescueNode.java:110) [jruby-complete-1.6.1.jar:na]
at org.jruby.ast.BeginNode.interpret(BeginNode.java:83) [jruby-complete-1.6.1.jar:na] 
```

引起：com.sun.mail.smtp.SMTPSendFailedException: 550 5.7.1 匿名客户端无权作为此发件人发送（通过 tpa）

```
at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:1515) ~[na:na]
at com.sun.mail.smtp.SMTPTransport.finishData(SMTPTransport.java:1321) ~[na:na]
at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:637) ~[na:na]
at javax.mail.Transport.send0(Transport.java:189) ~[na:na]
at javax.mail.Transport.send(Transport.java:118) ~[na:na]
at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1232) ~[na:na]
... 248 common frames omitted 
```

注意：相同的 SMTP 服务器设置适用于`Gerrit`并且`Jenkins`不需要任何身份验证。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:00:32.233

当您提供“发件人地址”时，您的 SMTP 服务器似乎不允许匿名发送邮件（即没有用户和密码）。

您应该查看 Jenkins 或 Gerrit 实例的配置，它们可能没有指定任何“发件人地址”。在这种情况下，请删除“noreply@mycompany.sonar.com”条目并尝试一下。

# html - jQuery 验证不适用于所有字段

> ID：10995915
> 
> 赞同：0
> 
> 时间：2012-06-12T11:41:43.513
> 
> 标签：html, css, validation, jquery

## 见这里：http: **[//jsfiddle.net/zYcJm/](http://jsfiddle.net/zYcJm/)**

jQuery 应该验证每个字段以检查它们是否包含文本以及电子邮件是否有效。但：

*   消息验证 (id=message) 似乎不起作用，如果您单击消息框中没有任何内容的发送，您不会收到错误，但您应该这样做。
*   如果您输入无效的输入并单击发送，然后更改您的输入以使其有效，则发送按钮仍然不可单击。

我的代码中的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:55:13.033

你在你的`textarea`

`<textarea name="message" placeholder="your message here" id="message" class="message"> </textarea>`

尝试解决这个问题，问题应该得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:53:44.597

```
// JavaScript Document
$(document).ready(function() {

    $('#contactForm #submit').click(function() {
        // Fade in the progress bar
        $('#contactForm #formProgress').hide();
        $('#contactForm #formProgress').html('<img src="http://dl.dropbox.com/u/16640285/ajax-loader.gif" /> Sending&hellip;');
        $('#contactForm #formProgress').fadeIn();

        // Disable the submit button
        $('#contactForm #submit').attr("disabled", "disabled");

        // Clear and hide any error messages
        $('#contactForm .formError').html('');

        // Set temaprary variables for the script
        var isFocus = 0;
        var isError = 0;

        // Get the data from the form
        //    var name=$('#contactForm #name').val();
        var email = $('#contactForm #email').val();
        //    var subject=$('#contactForm #subject').val();
        var message = $('message').val();

        // Validate the data
        //    if(name=='') {
        //    $('#contactForm #errorName').html('This is a required field.');
        //        $('#contactForm #name').focus();
        //        isFocus=1;
        //        isError=1;
        //    }
        if (email == '') {

            $('#contactForm #errorEmail').html('Please enter your email address.');
            if (isFocus == 0) {
                $('#contactForm #email').focus();
                isFocus = 1;
            }
            isError = 1;
        } else {
            var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
            if (reg.test(email) == false) {
                $('#contactForm #errorEmail').html('Please enter a valid email address.');
                if (isFocus == 0) {
                    $('#contactForm #email').focus();
                    isFocus = 1;
                }
                isError = 1;
            }
        }

        if (message ==  null || message == '') {

            $('#contactForm #errorMessage').html('This is a required field.');
            if (isFocus == 0) {
                $('#contactForm #message').focus();
                isFocus = 1;
            }
            isError = 1;
        }

        // Terminate the script if an error is found
        if (isError == 1) {
            $('#contactForm #formProgress').html('');
            $('#contactForm #formProgress').hide();

            // Activate the submit button
            $('#contactForm #submit').attr("disabled", "");

            return false;
        }

        $.ajaxSetup({
            cache: false
        });

        var dataString = //'name='+ name + '&
        'email=' + email + //'&subject=' + subject + 
        '&message=' + message;
        $.ajax({
            type: "POST",
            url: "http://dl.dropbox.com/u/16640285/submit-form-ajax.php",
            data: dataString,
            success: function(msg) {

                //alert(msg);
                // Check to see if the mail was successfully sent
                if (msg == 'Mail sent') {
                    // Update the progress bar
                    $('#contactForm #formProgress').html('<img src="http://dl.dropbox.com/u/16640285/ajax-complete.gif" /> Message sent.').delay(2000).fadeOut(400);

                    // Clear the subject field and message textbox
                    //    $('#contactForm #subject').val('');
                    $('#contactForm #message').val('');
                } else {
                    $('#contactForm #formProgress').html('');
                    alert('There was an error sending your email. Please try again.');
                }

                // Activate the submit button
                $('#contactForm #submit').attr("disabled", "");
            },
            error: function(ob, errStr) {
                $('#contactForm #formProgress').html('');
                alert('There was an error sending your email. Please try again.');

                // Activate the submit button
                $('#contactForm #submit').attr("disabled", "");
            }
        });

        return false;
    });
});​ 
```

粘贴这个并检查 buddyyyyyyyy

# excel - 如何在 Excel 中将日历周转换为日期？

> ID：10995917
> 
> 赞同：23
> 
> 时间：2012-06-12T11:41:55.743
> 
> 标签：excel, date, excel-formula

我有一个周数和一年，并想在 Microsoft Excel 中计算该特定周的星期一的日期。

```
Year   Week   Date (Monday)
2012   1      January 2, 2012
2013   16     April 15, 2013
2014   42     October 13, 2014 
```

我可以使用什么公式将日历周转换为特定日期？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-12T13:05:22.603

对于 ISO 周数，您可以使用此公式获取星期一

`=DATE(A2,1,-2)-WEEKDAY(DATE(A2,1,3))+B2*7`

假设 A2 中的年份和 B2 中的周数

这和我在这里的回答一样[https://stackoverflow.com/a/10855872/1124287](https://stackoverflow.com/a/10855872/1124287)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T10:31:37.763

以下公式适用于每年。你不需要再调整它了。前提是星期一是你一周的第一天。

```
If A2 = Year and Week = B2
=IF(ISOWEEKNUM(DATE($A$2;1;1)-WEEKDAY(DATE($A$2;1;1);2)+1)>1;DATE($A$2;1;1)-WEEKDAY(DATE($A$2;1;1);2)+1+B2*7;DATE($A$2;1;1)-WEEKDAY(DATE($A$2;1;1);2)-6+B2*7) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-05T13:24:40.417

如果您的周数在 A1 中并且年份在 A2 中，则以下代码段可以为您提供整周的日期

```
=$A$1*7+DATE($B$1,1,-4) through =$A$1*7+DATE($B$1,1,2) 
```

当然，完成从 -4 到 2 的系列，您将拥有从周日到周六的日期。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-16T13:48:09.010

如果您正在寻找相反的东西来从周数中获取日期，我在网上找到了一个解决方案并稍微改变了它：

```
Function fnDateFromWeek(iYear As Integer, iWeek As Integer, iWeekDday As Integer)
  ' get the date from a certain day in a certain week in a certain year
  fnDateFromWeek = DateSerial(iYear, 1, (iWeek * 7) _
          + iWeekDday - Weekday(DateSerial(iYear, 1, 1)) + 1)
End Function 
```

我[从 asap-utilities.com/ 获取](http://www.asap-utilities.com/excel-tips-detail.php?categorie=9&m=75)了公式并更改了

```
DateSerial(iYear, 1, ((iWeek - 1) * 7) 
```

至

```
DateSerial(iYear, 1, (iWeek * 7) 
```

## 更新

似乎至少对于德国来说，公式在**2016 年闰年**的工作方式不如预期，所以我把它改成了这个

```
Function fnDateFromWeek(iYear As Integer, iWeek As Integer, iWeekDday As Integer)
' get the date from a certain day in a certain week in a certain year

    If isLeapYear(iYear) Then
        curDate = DateSerial(iYear, 1, ((iWeek) * 7) _
          + iWeekDday - Weekday(DateSerial(iYear, 1, 1)) + 1)
    Else
        curDate = DateSerial(iYear, 1, ((iWeek - 1) * 7) _
          + iWeekDday - Weekday(DateSerial(iYear, 1, 1)) + 1)
    End If
    fnDateFromWeek = curDate
End Function 
```

由于 2016 年硬编码并不理想，您可以使用此功能[检查一年是否为闰年](https://exceljet.net/excel-functions/excel-date-function)

```
Function isLeapYear(iYear As Integer) As Boolean

    If (Month(DateSerial(iYear, 2, 29)) = 2) Then
        isLeapYear = True
    Else
        isLeapYear = False
    End If

End Function 
```

对于非闰年的`DateSerial(iYear,2 ,29)`回报，3 月 1 日

这可能仍然是错误的，但我有限的测试给出了预期的结果：

```
Sub TestExample()
   Debug.Print Format(fnDateFromWeek(2014, 48, 2), "ddd dd mmm yyyy") ' mo 24 Nov 2014
   Debug.Print Format(fnDateFromWeek(2015, 11, 6), "ddd dd-mmm-yyyy") ' fr 13 Mar 2015
   Debug.Print Format(fnDateFromWeek(2016, 36, 2), "ddd dd-mmm-yyyy") ' Mo 05 Sep 2015
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-24T19:55:19.817

如果 A1 的周数和年份为 3 或 4 位整数，格式为 wwYY，则公式为：

```
=INT(A1/100)*7+DATE(MOD([A1,100),1,1)-WEEKDAY(DATE(MOD(A1,100),1,1))-5 
```

工作日的减法确保您返回一周的一致开始日。使用最后的减法来调整开始日期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-30T04:40:20.813

=(MOD(R[-1]C-1,100)*7+DATE(INT(R[-1]C/100+2000),1,1)-2)

yyww 作为给定的周 exp:week 51 year 2014 将是 1451

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-02T02:39:40.047

一个简单的解决方案是执行以下公式：

```
A1*7+DATE(A2,1,1) 
```

如果它返回星期三，只需将公式更改为：

```
(A1*7+DATE(A2,1,1))-2 
```

这仅适用于一个日历年内的日期。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-12T11:47:25.523

如果周数在 中`A1`，年份在 中`A2`，您可以尝试：

```
A1*7+DATE(A2,1,1) 
```

# java - 最简单的网络服务

> ID：10995921
> 
> 赞同：-1
> 
> 时间：2012-06-12T11:42:13.020
> 
> 标签：java, php, web-services, rest, soap

我想快速开发一个与 Web 服务通信并将信息保存在数据库中的 Android 应用程序。

我有开发 WCF Web 服务的经验，但我认为这样的快速开发有点过分。所以，我正在考虑开发一个非常简单快速的 Web 服务，但是在 .NET 及其 WCF 之外，我不太了解。

您向我推荐哪种技术？休息，肥皂，... 哪种语言？php、java...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:47:07.937

恕我直言：REST + PHP 将是最简单的，既要编写又要使用 - PHP 具有基本的 Apache（和其他 Web 服务器）集成、与数据库通信的语言内置工具以及简单 Web 服务所需的一切。甚至还有一些简约的框架可以帮助您在几分钟内完成设置 - 在这里查看：

[https://stackoverflow.com/questions/238125/best-framework-for-php-and-creation-of-restful-based-web-services](https://stackoverflow.com/questions/238125/best-framework-for-php-and-creation-of-restful-based-web-services)

# facebook - 从 Facebook 帐户导入电子邮件 ID

> ID：10995928
> 
> 赞同：0
> 
> 时间：2012-06-12T11:42:28.967
> 
> 标签：facebook

我是 Rails 新手，想将 Facebook 与我的 Rails 应用程序集成。我想导入我所有朋友的电子邮件 ID，以便我可以向他们发送加入我网站的请求。

我正在使用 fb_graph API。我得到了 app-key、secret key 和 canvas-url 并配置了我的 facebook.yml 如下：

```
client_id: 117950878254050
  client_secret: 939b5e2ef40b1e58cad08b4416f21337
  scope: user_about_me,friends_about_me,user_activities,friends_activities 
```

但是，在这之后我完全迷失了。接下来做什么。请建议我实现我的目标的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:46:49.657

您只能获取当前用户的电子邮件地址，而不是整个好友列表。您应该使用 Requests API 来代替使用 API 向朋友发送邀请。

# domain-driven-design - 在 DDD 应用程序中持久保存应用程序特定的数据

> ID：10995929
> 
> 赞同：2
> 
> 时间：2012-06-12T11:42:36.673
> 
> 标签：domain-driven-design

我参与了一个为可以被描述为规则引擎的东西构建 webapp 的项目，我们正在使用 DDD 方法来捕获和建模域和功能。

但是与应用程序相关的数据呢，因为它是一个 Web 应用程序，所以会有很大一部分是围绕安全/用户管理，日志管理。等等，不属于域的杂项，但会有需要为它们管理的数据。从对 DDD 范式的初步阅读中，我们对域模型和通过存储库的持久性有了一个很好的了解。我所理解的应用程序服务层中包含应用程序特定的问题，例如安全性、txn mgmt 等。

在这个哪里/如何持久化应用程序特定的数据？这也应该被建模为不同的聚合并以类似的方式成为系统的一部分，还是应该以不同的方式构造（管理器类与 DAO 对话 - 类似事务脚本）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:12:14.950

我认为安全、日志记录等不是领域专家所谈论的。这些东西不是域的一部分，不应该被设计为域实体/聚合。如果它没有被设计为实体，它不应该被持久化为实体。

我认为这些东西不应该污染领域模型。安全性或日志记录是基础设施层的一部分。此类事物的持久性应由基础设施层管理。考虑一下日志记录：您可以记录到文件或数据库。您应该能够在日志持久性类型之间轻松切换。与安全性相同 - 数据库或 ActiveDirectory？*这些东西的变化独立于域模型持久性，所以你不应该混合它们*。

# php - Twilio REST API - 服务器错误

> ID：10995931
> 
> 赞同：1
> 
> 时间：2012-06-12T11:42:41.937
> 
> 标签：php, api, sms, sms-gateway, twilio

当我尝试使用 Twilio REST API 发送 SMS 时出现以下错误。

```
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

代码：

```
require("Services/Twilio.php");

$account_sid = "ACD123456789"; // Your Twilio account sid
$auth_token = "ACD123456789"; // Your Twilio auth token

$client = new Services_Twilio($account_sid, $auth_token);
$message = $client->account->sms_messages->create(
  '+1415599XXXX', // From a Twilio number in your account
  '+1609531XXXX', // Text any number
  "Hello world!"
);

print $message->sid; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:38:49.700

您的 PHP 托管环境中是否启用了 JSON 和 cURL？[为了让Twilio PHP 帮助程序库](https://www.twilio.com/docs/php/install)在 Joyent 的共享服务器上工作，我必须这样做：

[http://carter.rabasa.com/2012/02/10/getting-json-and-curl-enabled-in-php-on-joyent-shared-servers/](http://carter.rabasa.com/2012/02/10/getting-json-and-curl-enabled-in-php-on-joyent-shared-servers/)

如果这不能解决您的问题，您也可以发送电子邮件至 help@twilio.com 寻求支持。

# ruby-on-rails - 带有 simple_form 的 Rails：使用 link_to_add 添加新表行

> ID：10995932
> 
> 赞同：4
> 
> 时间：2012-06-12T11:42:42.963
> 
> 标签：ruby-on-rails, simple-form, formtastic, fields-for, cocoon-gem

我在通过单击 link_to_add 函数链接添加新表行时遇到问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T11:42:44.947

因为我花了一些搜索和尝试错误才发现这里是我的解决方案。它的关键是使用 nathanvda 的[cocoon gem](https://github.com/nathanvda/cocoon)（而不是[ryanb](https://github.com/ryanb/nested_form)的nested_form），它允许定义一个 jquery 选择器（称为`data-association-insertion-node`）在哪里插入新的字段集。在我的示例中，我使用了 HAML 和 Twitter Bootstrap 代码，但您可以轻松地将其替换为自己喜欢的代码。

**`/app/views/users/_form.html.haml`：**

```
= simple_form_for @user, :html => {:class => "form-horizontal"} do |f|
  = render "shared/error_messages", :target => @user
  .row-fluid
    .span12
      .fieldset
        = f.input :username, :label => "Username:", :placeholder => "Username"

        %table.table
          %thead
            %tr
              %th
                %i.icon-calendar
                Date
              %th
                %i.icon-pencil
                Description
              %th
                %i.icon-cog
                Action
          %tbody#user_events
            = f.simple_fields_for :user_events do |event|
              = render "user_event_fields", :f => event

        = link_to_add_association f, :user_events, :"data-association-insertion-node" => "tbody#user_events", :"data-association-insertion-method" => "append", :partial => "user_event_fields", :class => "btn" do
          %i.icon-plus
          Add new event

        %p.help-block
          %strong Please note:
          Events are only removed after confirming the changes with
          %span.label
            %i.icon-ok
            Update settings!

        = f.button :submit, :class => "btn" do
          %i.icon-ok
          Update settings! 
```

**`/app/views/users/_user_event_fields.html.haml`：**

```
%tr.nested-fields
  %td= f.input_field :date, :as => :date_month_year, :class => "tooltip-bottom input-small", :rel => "tooltip", :title => "Date of event", :disabled => params[:action] == "show"
  %td= f.input_field :description, :placeholder => "Description", :class => "input-large tooltip-bottom", :rel => "tooltip", :title => "Description of event<br/>Use <strong>Markdown</strong> to format your text.", :disabled => params[:action] == "show"
  %td= f.input_field :label, :placeholder => "Label", :class => "input-medium tooltip-bottom", :rel => "tooltip", :title => "Label of event", :disabled => params[:action] == "show"
  %td= f.input_field :label_class, :collection => [["Green", "label-success"], ["Yellow", "label-warning"], ["Red", "label-important"], ["Blue", "label-info"], ["Black", "label-inverse"]], :include_blank => "Grey", :class => "input-small tooltip-bottom", :rel => "tooltip", :title => "Label color of event", :disabled => params[:action] == "show"
  %td
    = link_to_remove_association f, :class => "btn" do
      %i.icon-remove 
```

请注意，`.nested-fields`标签上的类对于删除链接的工作是必不可少的。

# android - 强制 android 选择一个应用程序来发送电子邮件

> ID：10995936
> 
> 赞同：0
> 
> 时间：2012-06-12T11:42:46.523
> 
> 标签：android, email, android-intent

我实现了从我的应用程序发送电子邮件。

我使用[SO 上的这个问题](https://stackoverflow.com/questions/4711625/sending-email-from-android-app)作为实现这一目标的指南，请注意，在有人说要使用的答案中，`setType("message/rfc822");`因为它会过滤掉所有其他听取`ACTION_SEND`意图的电子邮件客户端。

我的问题是我的 Galaxy Tab 10.1 仍然有两个应用程序来监听意图，所以仍然会打开一个弹出窗口，询问我要使用什么电子邮件客户端。（gMail 应用程序或默认的电子邮件应用程序）。我不能卸载一个，所以列表不会弹出，但我也不想。

有没有办法强制 android 立即使用列表中的第一个？那么用户可以跳过弹出对话框吗？

这是我当前的代码：

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("message/rfc822");

i.putExtra(Intent.EXTRA_SUBJECT, context.getString(R.string.notes_from_pf));
i.putExtra(Intent.EXTRA_TEXT  , context.getString(R.string.mail_message));
try {
    startActivity(Intent.createChooser(i, "Send mail..."));
} catch (android.content.ActivityNotFoundException ex) {
    Toast.makeText(context, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:54:17.330

查询应用程序，获取注册发送操作的应用程序列表并选择一个，创建一个意图，设置类名并启动你的意图，你就完成了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:22:02.133

```
Intent email = new Intent(Intent.ACTION_SEND);
email.setType("text/plain");
email.putExtra(Intent.EXTRA_EMAIL,  "" );

email.putExtra(Intent.EXTRA_SUBJECT, "");

email.putExtra(Intent.EXTRA_TEXT, prsnname + " :   "+ data  +"\n\n" +  linkdata);

try
{

activity.startActivity(Intent.createChooser(email, "Send mail..."));

}
catch (android.content.ActivityNotFoundException ex) 
{
    Toast.makeText(activity, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:10:30.300

如果您希望找到可以处理意图的应用程序，您可以使用：

获取包管理器（）。[查询意图活动](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities%28android.content.Intent,%20int%29)...

当你找到你想要的应用程序时，设置意图的包以匹配应用程序之一。

# java - 有没有办法知道哪些对象在堆的“旧”区域

> ID：10995937
> 
> 赞同：11
> 
> 时间：2012-06-12T11:42:51.030
> 
> 标签：java, garbage-collection, jvm, heap-memory

我有很长的 GC 周期。从检查中我看到堆的永久（旧）区域中有太多对象。是否有任何实用程序可以知道哪些对象位于堆的哪个区域，或者关于这些对象的任何静态信息。
我正在使用 Sun/Oracle HotSpot JVM (Java 6)。

编辑：关于我的问题的更多细节：
我有一个大堆（32GB），看起来即使堆旧区域只有 30% 已满，手动运行 GC 也会暂停 15 秒。我想知道哪些对象是留在旧区的“幸存者”，以便知道要优化哪个对象创建。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T11:56:13.457

我不知道有任何工具/实用程序适用于当前一代 JVM。

但另一方面是我看不到这样的实用程序会有什么帮助。

很长的 GC 时间通常是因为你的堆太满了。随着堆接近 100% 满，在 GC 中花费的时间往往呈指数增长。在最坏的情况下，堆完全填满，你的应用程序会得到一个`OutOfMemoryError`. 有两种可能的解决方案：

*   如果根本原因是堆太小（对于您的应用程序试图解决的问题的大小），那么要么增加堆大小，要么寻找减少应用程序工作集的方法；即在计算过程中它需要“活”的对象的数量/大小。

*   如果根本原因是内存泄漏，则查找并修复它。

在这两种情况下，使用内存分析器都可以帮助您分析问题。但是你不需要知道老年代中有哪些对象。它与问题的根本原因或问题的解决方案无关。

* * *

> 我想知道哪些对象是留在旧区的“幸存者”，以便知道要优化哪个对象创建。

这开始变得更有意义了。听起来您需要找出哪些对象是长期存在的……而不是具体地确定它们所在的空间。您可以通过`jhat`比较一系列堆快照来做到这一点。（可能有更好的方法......）

但是，我仍然认为这种方法不会有帮助。问题是完整的 GC 需要遍历所有可到达的（硬、软、弱、幻）对象。而且，如果您有一个 32Gb 堆已满 30%，那么您仍然有很多对象需要标记/清除/重定位。我认为解决方案可能是使用并发收集器并对其进行调整，以便它可以跟上应用程序的对象分配率。

听起来您可能会`System.gc()`直接从您的代码中调用。 **不要那样做！** 调用`System.gc()`将（通常）导致 JVM 进行*完整*的垃圾回收。这几乎*可以保证*让你停下来。让 JVM 决定何时运行收集器要好得多。

最后，不清楚“优化对象创建”是什么意思。你的意思是降低对象创建率？或者您是否正在考虑其他方法来管理长期（缓存？）对象的保留？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T22:59:43.263

工具大象跟踪可以分析对象的创建和死亡，[大象](http://www.cs.tufts.edu/research/redline/elephantTracks/)跟踪。有了这个，你也许能够弄清楚什么样的对象比预期的存活时间更长，并且通过方法历史，有可能得到精确的对象。

但是大堆意味着非常长的配置文件时间和非常大的配置文件文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:07:50.580

我从未见过允许“探索”给定一代中的对象的工具。

我习惯于 Netbeans Profiler。它不能真正做到你所要求的，但它有一个工具可以让你知道出了什么问题。

使用 Profiler 运行应用程序，选择`Memory`，然后在`Live Results`您的列`Generations`中。**它没有告诉您**每个对象的生成，但它为您提供了[`Surviving Generations`](https://blogs.oracle.com/nbprofiler/entry/what_do_the_surviving_generations). 因此，如果该数字大于 1，则它可能在终身（可能在幸存者空间）中，**如果该数字一直在增长，则您有内存泄漏**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T12:20:39.250

我认为没有任何实用程序可以告诉您不同代的对象数量。

1.  一种方法是您可以使用`jconsole`jdk附带的。在 jconsole 的帮助下，您可以连接到您的应用程序并监视所有代，在这里您可能会得到一些我不确定的数字。
2.  另一种方法是您可以使用 Eclipse工具进行转储`jmap`，然后对其进行分析。`MAT`
3.  或者您可以使用以下`JVM`参数运行您的应用程序，并在日志中获得有关 GC 的信息

`GC logging is enabled using JVM arguments; below are the arguments I use. (Note: the log file specified as file is reset each time the VM starts.`

`-verbose:gc -Xloggc:file`

我认为这可能对你有帮助。

# transparency - 如何从命令行界面使用 GIMP 创建带文本的透明图像

> ID：10995939
> 
> 赞同：2
> 
> 时间：2012-06-12T11:42:52.087
> 
> 标签：transparency, gimp

是的，我想使用 GIMP 在我的 Ubuntu 盒子上创建一个带有一些文本的透明图像。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:20:00.880

您可以使用 -b 开关（用于“批处理”）从命令行使用单个“script-fu”表达式调用 GIMP。

在 GIMP 中创建带有一些文本的图像是一个多步骤的过程，您必须：

1.  创建图像
2.  创建文本层
3.  将文本层添加到图像
4.  将图像大小调整为图层大小
5.  保存图像

这些步骤中的每一个都是对 GIMP 的 PDB API 的调用，可以通过转到 Help->Procedure Browser 来浏览

有“logo”脚本可以自动执行步骤 1-4，并添加一些（有时）很好的效果，如 script-fu-basic1-logo 过程 - 但它不会在同一步骤中将图像保存到文件中。

因此，您必须编写一个小方案 - 或 Python - 脚本来执行您想要执行的所有步骤，并在命令行上调用您的此脚本的 GIMP。

# java - 上传 xml 文件时出现空指针异常

> ID：10995941
> 
> 赞同：0
> 
> 时间：2012-06-12T11:43:02.190
> 
> 标签：java, file-upload, saxparser

我有以下代码：

```
L2SchemaHandler handler = getSchemaHandler();        

// validate
XMLFormatValidator validator = new XMLFormatValidator(handler.elements, handler.types, handler.root);    

InputStream schemaInput = new FileInputStream(new File(xmlFilePath));

SAXParserFactory spfactory = SAXParserFactory.newInstance();
spfactory.setFeature("http://xml.org/sax/features/namespaces", true);

SAXParser parser = spfactory.newSAXParser();

//this line gives the null pointer Exception
parser.parse(schemaInput, validator);

report.addAll(validator.getReport());
this.objectsList = validator.getObjectList();
// When we know objects are valid, get duplicate objects from db
if(report.isEmpty())
    duplicateObjectsMap    = validateObjectID(validator.getObjects(),report);
    // here we need to check whether object id's exists in db
if(report.isEmpty()){//if no errors have occurred
   //        if(validateObjectID(validator.getObjects(),report))
        validateObjectsFromFile(validator.getObjects(), report , msgreport);
} 
```

标记的行给出*Null 指针 Exception* while `parser`，`schemaInput`并且`validator`包含不是空值的对象。

为什么这一行给出空指针异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:14:00.190

要使用验证解析器，请进行以下更改：

```
spfactory.setValidating(true); 
```

默认情况下，此值设置为 false。

# r - 如何从 Google 获取道琼斯指数 (DJI) 数据？

> ID：10995949
> 
> 赞同：5
> 
> 时间：2012-06-12T11:43:30.313
> 
> 标签：r, quantmod

我正在尝试从谷歌获取道琼斯指数的数据。我已经尝试了很多东西，但它们似乎不起作用。

```
require(quantmod)
getSymbols(".DJI",src = "google")
getSymbols("^DJI",src = "google")
getSymbols("INDEXDJX:.DJI",src = "google") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:34:17.157

错误是“HTTP：404 Not Found”。这意味着`getSymbols`道琼斯指数不存在页面使用（对于标准普尔 500 指数和纳斯达克综合指数也不存在）。如果 Google 不提供数据，quantmod 将无能为力……

# list - 为列表中的每个数字加 1

> ID：10995950
> 
> 赞同：1
> 
> 时间：2012-06-12T11:43:30.750
> 
> 标签：list, replace, numbers, dreamweaver

在 Dreamweaver 中，我有一个很长的列表，如下所示：

```
.classname li:nth-of-type(1) {...}
.classname li:nth-of-type(23) {...}
.classname li:nth-of-type(111) {...} 
```

等等。我现在需要做的是给每个 li:nth-of-type 选择器加 1，所以它变成：

```
.classname li:nth-of-type(2) {...}
.classname li:nth-of-type(24) {...}
.classname li:nth-of-type(112) {...} 
```

我试图通过正则表达式的搜索和替换功能来完成此操作，但由于添加，该功能不起作用。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:05:41.723

我知道没有内置方法可以执行您要求的操作。您必须在 Dreamweaver 中手动进行更改。

我虽然擅长 JavaScript，但你可以使用 Tom Muck 的 Evaluate JavaScript 面板（[http://www.communitymx.com/abstract.cfm?cid=270FB](http://www.communitymx.com/abstract.cfm?cid=270FB)商业广告，但只要 2 美元，我在 CS5 中并没有厌倦它.5 或 6，但它肯定适用于 CS5，并且应该适用于更高版本）或 Dreamweaver 平台 SDK（[http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&extid=1009962 #](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&extid=1009962#)虽然它说 DW8 和 MX2004 它应该在以后的版本中工作，但我确定我已经将它安装到 CS3 中，并且刚刚在 CS6 中进行了测试并且安装良好，这只是一个小问题，其中一些添加的菜单项被放置到a Commands -> Miscellaneous menu )，其中包含一个可以输入 JavaScript 并运行的命令。

那么，为什么要在这里提到 JavaScript 呢？嗯，Dreamweaver 的可扩展层是在构建时公开了一个 JavaScript API。这意味着您可以使用 JavaScript 操作文档。在这种情况下，请编辑文档以增加数字。

我刚刚使用 Dreamweaver Platform SDK Evaluate JavaScript 命令在 Dreamweaver CS6 中测试了以下内容。

在代码视图中选择要增加的 CSS 选择器。转到命令 -> SDK 工具 -> 评估 JavaScript。将以下代码粘贴到您的文档中：

```
var dom = dw.getDocumentDOM();
var sel = dom.source.getSelection();
var src = dom.source.getText(sel[0], sel[1]);

var matches = src.match(/(\.classname li:nth-of-type\()(\d+)(\))/g);
var newSrc = src;
if(matches){
    for(var i =0; i< matches.length; i++){
      // note: the following code through the ending ; is all on one line
      newSrc = newSrc.replace( matches[i], matches[i].replace(/(\.classname li:nth-of-type\()(\d+)(\))/, function(str, p1, p2, p3){return p1 + (parseInt(p2)+1) + p3} ) );
    }
}

dom.source.replaceRange(sel[0], sel[1], newSrc); 
```

单击评估按钮。您应该看到代码中的数字增加了。

注意：此代码使用正则表达式来查找您提供的特定 CSS 选择器，因此如果您有不同的 CSS 选择器，则需要调整 src.match() 行以及 newSrc.replace( ) 行。

为了使其更通用一点，您可能需要尝试以下操作：

```
var dom = dw.getDocumentDOM();
var sel = dom.source.getSelection();
var src = dom.source.getText(sel[0], sel[1]);

var matches = src.match(/(\()(\d+)(\))/g);
var newSrc = src;
if(matches){
    for(var i =0; i< matches.length; i++){
        // note: the following code through the ending ; is all on one line
        newSrc = newSrc.replace( matches[i], matches[i].replace(/(\()(\d+)(\))/, function(str, p1, p2, p3){return p1 + (parseInt(p2)+1) + p3} ) );
    }
}

dom.source.replaceRange(sel[0], sel[1], newSrc); 
```

这只是替换与括号括起来的数字匹配的任何文本。

# php - PHP：在 Windows 7 中设置区域设置

> ID：10995953
> 
> 赞同：2
> 
> 时间：2012-06-12T11:43:37.613
> 
> 标签：php, windows, encoding

我在 Windows 7 的 PHP 5.3 中遇到了 setlocale 函数的问题。

我需要使用 UTF-8 编码设置俄语语言环境。我看到了一些解决方案，其中是 Russian_Russia.65001，但具有这种语言环境的函数返回 FALSE。

所有解决方案都是为在 Windows XP 中使用而设计的，其中语言环境列表位于控制面板中。在 Windows 7 中，此功能已被删除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T12:42:25.720

[在 Windows 系统上无法使用 UTF-8 语言环境。](http://msdn.microsoft.com/en-us/library/x99tb11d.aspx)：

> 如果您提供像 UTF-7 或 UTF-8 这样的代码页，setlocale 将失败，返回 NULL。

只有 Windows 代码页`Russian_Russia.1251`可以工作（参见[Moodle 的语言环境表](http://docs.moodle.org/dev/Table_of_locales)）。

您仍然可以尝试同时设置两者，看看哪一个出现：

```
if ($newLocale = setLocale(LC_CTYPE, 'ru_RU.UTF-8', 'Russian_Russia.1251'))
{
   echo 'Locale is now set to: ' . $newLocale;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-20T18:52:57.970

这在 Windows 7 上对我有用

```
putenv('LANG=fr_CA.UTF-8');
setlocale(LC_ALL,'fr_CA.UTF-8');
bindtextdomain('translation','./language');
bind_textdomain_codeset('translation','UTF-8');
textdomain('translation'); 
```

.po/.mo 文件的路径

```
./language -> fr_CA.UTF-8 -> LC_MESSAGES -> translation.po
./language -> fr_CA.UTF-8 -> LC_MESSAGES -> translation.mo 
```

# android - Eclipse for Android 中的 fm 应用程序

> ID：10995965
> 
> 赞同：-2
> 
> 时间：2012-06-12T11:44:30.757
> 
> 标签：android, android-manifest

我在下面的行中遇到了问题。

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"></uses-permission> 
```

该错误表明该标签出现在标签之后。但是在教程中，上面的行是在应用程序标记之后提到的，并且应用程序是正确的。如何解决错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:52:37.363

[这](http://developer.android.com/guide/topics/manifest/manifest-intro.html)是`Manifest`结构的外观。如果`<uses-permission>`标签内有`<application>`标签，请将其从那里移出。

也就是说，您应该发布更多代码和/或信息（*但只发布相关部分！*）否则几乎不可能在不猜测的情况下找到正确的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:05:44.827

写

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"></uses-permission> 
```

`<application>`标签之前。

# php - php - 同一网络服务器上多个页面的唯一会话 ID

> ID：10995969
> 
> 赞同：0
> 
> 时间：2012-06-12T11:44:50.820
> 
> 标签：php, session, session-state, session-variables, sessionid

我为游戏服务器开发了一个小型管理页面，您可以在线添加/删除/编辑设置。

一切正常，但我的会话有问题。如果登录成功，则创建会话 ID

```
$_SESSION['adm_login'] = "okay"; 
```

如果我访问另一个页面，相同的平台（在相同的 Web 服务器上）会自动创建会话。仅当我成功登录我的网页时才会发生这种情况。

我认为这个问题的发生是因为一切都在同一个 Web 服务器上，因为会话 ID 是相同的。

我该怎么办？我是否需要在存储会话 ID 或...的数据库中创建一个表？

谁能给我一个例子，或者会话php的教程。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:13:48.450

使用诸如`session.cookie_path`或之类的设置，`session.cookie_domain`以便会话 cookie 仅对您希望的路径或域有效。

例如，如果每个“项目”都有一个文件夹，您将设置`session.cookie_path`为当前项目文件夹。这将确保浏览器仅发送该项目的会话 cookie，而不发送其他项目的会话 cookie。将为用户访问的每个项目生成一个新会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:09:45.380

查看`[session_regenerate_id()](http://ca2.php.net/session_regenerate_id)`功能。它将使用新生成的会话 ID 更新当前会话 ID。

创建唯一的 SessionId：

```
session_start();
session_regenerate_id();
$_SESSION['adm_login'] = "okay"; 
```

销毁唯一的 SessionId：

```
session_unset();
session_destroy();
$_SESSION = array(); 
```

编写 session_unset 和 session_destroy 的原因是，当您创建任何会话 cookie 时，会在服务器和客户端浏览器上创建，并且当您从服务器销毁会话时，也需要清除在客户端浏览器上创建的 cookie。

# ruby-on-rails - 在不保存的情况下获取验证错误消息

> ID：10995972
> 
> 赞同：31
> 
> 时间：2012-06-12T11:44:59.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
Post
  :belongs_to :user

User
  :has_many :posts 
```

在我的注册工作流程中，他们首先起草一个帖子，然后在下一页输入他们的用户信息进行注册。

```
# intermediate step, validate that Post is valid before moving on to User creation
# posts_controller:

@post = Post.new(params[:post])
if @post.valid?
  # go on to create User
else
  render 'new'
end 
```

但！没有创建@post 错误消息，因为我没有保存我正在检查的@post 模型`.valid?`。如何在不保存的情况下创建错误消息？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-12T11:51:46.613

如果我正确理解了您的问题，您想在不保存模型的情况下得到错误吗？

这正是正在发生的事情。`@post.valid?`

将根据是否有任何错误返回 true 或 false。如果有错误。它们将被添加到`@post.errors`哈希中。

在您想要保存的情况下，`@post.save` 如果成功保存，则返回 true；如果在填充`@post.errors`过程中出现错误，则返回 false

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T11:50:42.707

根据[文档](http://guides.rubyonrails.org/active_record_validations_callbacks.html#valid-and-invalid)，一旦你打电话`#valid?`或`#invalid?`记录，`#errors`就会被填充。

# .net - 如何管理 GroupBox 控件大小？

> ID：10995973
> 
> 赞同：1
> 
> 时间：2012-06-12T11:45:02.673
> 
> 标签：.net, vb.net, winforms

我有在运行时创建文本框的事件按钮。

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)       Handles Button1.Click

  Dim textbox1 As New TextBox
  static Dim shiftDown As Integer
  static Dim counter As Integer

  counter += 1
  shiftDown = shiftDown + 30
  textbox1.Name = "Textbox" + counter.ToString()
  textbox1.Size = New Size(170, 10)
  textbox1.Location = New Point(10, 32 + shiftDown)
  textbox1.Visible = True
  GroupBox1.Controls.Add(textbox1)

End Sub 
```

所有已创建的文本框都动态显示在 GroupBox 控件中。

我的问题是如何根据里面的数量控件来管理 GroupBox 控件的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:47:50.100

使用 groupbox 的`AutoSize`and`AutoSizeMode`属性。

设置`AutoSize = true`GroupBox是否需要根据其内容自动调整大小；否则为假。默认值为真。

[参考示例动态控制 GroupBox 的大小](http://msdn.microsoft.com/en-us/library/system.windows.forms.autosizemode)

# android - 为什么在android设备上安装apk后“打开”按钮被禁用？

> ID：10995977
> 
> 赞同：1
> 
> 时间：2012-06-12T11:45:16.977
> 
> 标签：android, android-install-apk

我有两个项目，我想将它们组合在一起。当我将它们分别安装在**设备**上时，启用“**打开**”按钮（在成功安装后显示的页面中）。但是当我将它们组合在一起时，“打开”按钮将被禁用，虽然安装过程将成功完成。我猜这个错误是因为**清单**文件，但我不确定。谢谢你的时间。
![在此处输入图像描述](../Images/09ad9b956599599591507dbabbf4b4a9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T11:52:43.897

如果没有看到你的清单，我不能肯定地说，但我的猜测是，当你结合这两个项目时，你最终得到了两个活动，每个活动都包括：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />`
    <category android:name="android.intent.category.LAUNCHER" />`
</intent-filter> 
```

如果您确保只在要使用“打开”按钮打开的活动中说，我想它会起作用。

**编辑：**要清楚，像这样[有多个入口点很好](https://stackoverflow.com/a/8109621/1427098)，但它似乎仍然可以解释“打开”按钮被禁用，因为它应该做什么是模棱两可的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T13:58:29.493

合并代码后我遇到了类似的问题，结果发现文件中有非法值`AndroidManifest.xml`。删除非法值解决了这个问题。因此，请确保验证您的文件是否存在错误。

# php - 包含本地 PHP 文件和传递参数

> ID：10995978
> 
> 赞同：0
> 
> 时间：2012-06-12T11:45:28.380
> 
> 标签：php, include

我想避免在我的网站上执行任何不必要的 HTTP 请求以提高性能。所以，我想在我的服务器上包含一个本地 PHP，*而不*使用 cURL。问题是我正在调用的 PHP 需要通过 HTTP GET 传递一些参数。我想保持这种状态，因为我还希望能够从其他地方访问这些 PHP 文件。

这样做的最佳方法是什么？我可以在给它 GET 参数的同时访问本地 PHP 文件的*输出吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:51:05.537

> 我想避免在我的网站上执行任何不必要的 HTTP 请求以提高性能

`include`当您向其提供 HTTP URI 时也会发出 HTTP 请求，因此您可以在服务器上同步执行它而不是客户端的异步包含（例如使用 AJAX 或 iframe），从而使页面加载更慢。

因此，虽然包含可能按预期工作（您想包含**输出**，对吗？），但它绝对不会加速您的网站。

> 我正在调用的 PHP 需要通过 HTTP GET 传递一些参数。我想保持这种状态，因为我还希望能够从其他地方访问这些 PHP 文件。

然后在包含它们之前更改这些文件并设置适当的变量。或者更好的是，将其重构为函数。例如，如果您要包含的文件如下所示：

```
$username = $_GET['username'];
print "User: $username"; 
```

然后重构为一个函数并存储在一个单独的文件中：

```
function PrintUsername($username)
{
    print "User: $username";
} 
```

并适当地称呼它：

```
include('printusername.php');
PrintUsername($_GET['username']); 
```

（您可能想在`isset()`这里和那里输入。）现在您可以更改也需要此输出的代码：

```
include('printusername.php');
PrintUsername($someOtherVariable); 
```

现在您不必依赖 URL 或`$_GET`魔术`include`，而只需按照它们的意图使用所有功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:16:23.150

假设您在 linux 机器上，您可以执行脚本并使用以下内容获取输出：

`exec ("php myPhpFile.php arg1 arg2 arg3 > myPhpOutput.html");`

然后打开输出的文件进行读取。

但是，要使其正常工作（而且很难看！），您需要修改 myPhpFile 并实现一种方法来测试 $_GET 参数。如果没有找到它们，则使用[argv加载属性](http://php.net/manual/en/reserved.variables.argv.php)

* * *

改进（我在懒惰地思考:)）

shell_exec 将输出作为字符串返回。所以
`$filecontents = shell_exec("php yourfile.php arg1 arg2 arg3...");`
将返回一个php文件的处理输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:47:27.293

这很丑陋，但有效。

```
$_GET['foo'] = 1;
$_GET['bar'] = 2;
include '/path/to/file.php'; 
```

# c++ - C++ 字符常量表示法

> ID：10995981
> 
> 赞同：4
> 
> 时间：2012-06-12T11:45:44.523
> 
> 标签：c++

我在 C++ 代码中看到一些对我来说很陌生的字符常量表示法。请教育我：

```
if (dc == L' '){ 
```

L代表什么？

它是标准的一部分吗？

谢谢，

lang2

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T11:50:13.133

`L`是文字说明符。对于字符，它意味着`wchar_t`，所以类型`L'a'`是`wchar_t`。对于字符串，它表示“数组`wchar_t`”，`L"hello"`a 也是如此`wchar_t[6]`。（对于整数，它的意思是“长”，`1L`a 也是`long int`。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T11:46:44.897

它是~~宏~~将字符或字符数组转换为宽字符（或宽字符数组）的文字说明符。

`L'a'`是`wchar_t`等价的`char` `'a'`。

如果你习惯windows开发，就相当于定义了`_T()` **if** `UNICODE`。

# mysql - 无法在 MySQL (DDL) 中创建具有 FOREIGN KEY 的表

> ID：10995983
> 
> 赞同：1
> 
> 时间：2012-06-12T11:45:45.460
> 
> 标签：mysql, foreign-keys, ddl

通常我使用 PostgreSQL 并且从来没有遇到过问题，但是现在我需要使用 MySQL 并且遇到了一些麻烦。我正在数据库 user_main_db 中创建一个表。外键有问题，phpMyAdmin 总是给我下一个错误：

> 1005 - 无法创建表'user_main_db.user_main'（错误号：150）（
> 
> engine=InnoDB&page=Status&token=136fdbb820093986c79180b24adb304d">详情...)

这是我试图在数据库 user_main_db 中创建的表：

```
CREATE TABLE user_main
(
uid INTEGER,
fn VARCHAR(40) NOT NULL,
ava VARCHAR(255),
gender tinyint(1) NOT NULL,
dob DATE NOT NULL,
country_id INTEGER, 
PRIMARY KEY (uid),
FOREIGN KEY ( uid ) REFERENCES user_basic_db.user_basic(uid) ON DELETE CASCADE ON UPDATE            CASCADE,
FOREIGN KEY ( country_id ) REFERENCES countries_db.countries(country_id) ON DELETE CASCADE   ON UPDATE CASCADE
); 
```

这是数据库 user_basic_db 中的表 user_basic：

```
CREATE TABLE user_basic
(
uid INTEGER AUTO_INCREMENT,
email VARCHAR(40) NOT NULL,
password VARCHAR(40) NOT NULL,
PRIMARY KEY (uid)
); 
```

这是数据库 countries_db 中的表国家：

```
 CREATE TABLE countries(
    country_id INTEGER PRIMARY KEY AUTO_INCREMENT,
    country VARCHAR(40) NOT NULL UNIQUE
    ) 
```

奇怪的是当我如下定义表时：

```
CREATE TABLE user_main
(
uid INTEGER PRIMARY KEY REFERENCES user_basic_db.user_basic(uid)  ON DELETE CASCADE ON    UPDATE CASCADE,
 VARCHAR(40) NOT NULL,
ava VARCHAR(255),
gender tinyint(1) NOT NULL,
dob DATE NOT NULL,
country_id INTEGER REFERENCES countries_db.countries(country_id) ON DELETE CASCADE ON  UPDATE CASCADE
); 
```

查询成功运行，但未创建 FOREIGN KEYS，当我打开“关系视图”时，没有对 uid 和 country_id 的引用，即使没有具有此类 ID 的国家/地区，我也可以插入 user_main(country_id)。请帮助某人。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:01:42.373

查看有关[外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)的 MySQL 手册：

> 如果您重新创建已删除的表，则它必须具有符合引用它的外键约束的定义。如前所述，它必须具有正确的列名和类型，并且必须在引用的键上具有索引。如果这些不满足，MySQL 返回错误号 1005 并在错误消息中引用错误 150。

听起来很熟悉，不是吗！？

最好删除表并使用格式良好的语法创建新表，如下所示：

```
CREATE TABLE `countries` (
  `country_id` int(11) NOT NULL AUTO_INCREMENT,
  `country` varchar(40) NOT NULL,
  PRIMARY KEY (`country_id`),
  UNIQUE KEY `country` (`country`)
) ENGINE=InnoDB;

CREATE TABLE `user_basic` (
  `uid` int(11) NOT NULL AUTO_INCREMENT,
  `email` varchar(40) NOT NULL,
  `password` varchar(40) NOT NULL,
  PRIMARY KEY (`uid`)
) ENGINE=InnoDB;

CREATE TABLE `user_main` (
  `uid` int(11) NOT NULL,
  `fn` varchar(40) NOT NULL,
  `ava` varchar(255) DEFAULT NULL,
  `gender` tinyint(1) NOT NULL,
  `dob` date NOT NULL,
  `country_id` int(11) NOT NULL,
  PRIMARY KEY (`uid`),
  KEY `user_main_ibfk_2` (`country_id`),
  CONSTRAINT testc1
  FOREIGN KEY (`country_id`) REFERENCES `countries` (`country_id`) 
    ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT testc2
  FOREIGN KEY (`uid`) REFERENCES `user_basic` (`uid`) 
    ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB; 
```

这应该可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:51:07.027

MySQL 具有 , 的概念`storage engines`，提供不同的功能和性能配置文件。我怀疑您使用不提供外键的 MyISAM 存储引擎创建了表。

如果您使用 INNODB 引擎，我怀疑您的外键会按预期工作。

**编辑**

您可以通过在语句的右括号**后**提供`ENGINE=InnoDB`子句来设置存储引擎**`CREATE TABLE`**

# hibernate - hibernate - 迭代查询

> ID：10995993
> 
> 赞同：0
> 
> 时间：2012-06-12T11:46:14.113
> 
> 标签：hibernate

我有两个由外键关联的测试表

*   表`School`（打开 fk `student_id`）
*   表`Students`（带有 pk `id`）
*   FK：`school.student_id -> students.id`

如何使用此查询获取学生姓名？

```
Session session = DaoSF.getSessionFactory().openSession();
String query = "";
Query criteria;

query = "from School s " +
        "inner join s.student st " +
        "where s.student_id = st.id";
criteria = session.createQuery(query); 
```

当我尝试迭代数据时：

```
for(Iterator<?> iter = criteria.iterate(); iter.hasNext();)
{
  Object item = (Object)iter.next();
  System.out.println(((School) item).getStudent().getId());
} 
```

它报告：

```
Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to table.School 
```

但映射工作正常，因为当我将最后一行更改为

`System.out.println(item.toString());`

我有所有的数据，但像这样：

```
[Ljava.lang.Object;@1d2300e
[Ljava.lang.Object;@51207c
[Ljava.lang.Object;@2bd615
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:08:15.030

在 HQL 中，只要您在没有显式选择子句的情况下加入，Hibernate 就会返回所有加入的实体。这不是最直观的事情，但它是此时的遗留行为。

其次，您正在重新说明学校和学生之间的加入条件。您已经在映射中指定了这一点，所以当您在查询中说“join s.student”时，Hibernate 知道这一点。所以这里不需要 where 子句。

从大多数人对学校/学生关系的看法来看，您的数据模型似乎有点倒退。通常一所学校有多个学生（一个学生是与学校有特定关系的人）。但是鉴于您描述的模型...

您没有确切说明您想要从此查询中得到什么，但您的原始查询返回了所有学生。不知道为什么你甚至从 School 对象“驱动”查询。

```
Session session = ...;
List<Student> results = (List<Students>) session.createQuery( "select s from Students s" ).list();
for ( Student student : results ) {
    // handle each student
} 
```

如果你只想要学生的名字（你有点/有点暗示）：

```
Session session = ...;
List<String> results = (List<String>) session.createQuery( "select s.name from Students s" ).list();
for ( String student : results ) {
    // handle each student name
} 
```

请注意，在我的上述查询中，select 子句实际上是可选的，因为 from 子句中只引用了一个实体。我更喜欢始终指定一个明确的选择子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:00:40.833

您是迭代器的类型为 Object。尝试使用 School 输入。

```
for(Iterator<School> iter=criteria.iterate();iter.hasNext();){...} 
```

由于这似乎不起作用，请尝试以下操作。

```
String sql="...";
Query query=session.createQuery(sql);
List<School> schools=(List<School>)query.list();
    for(School school:schools)
        System.out.println(school.getStudent().getId()); 
```

# c# - 管理 MySQL 和 SQL Server CE 数据库的类

> ID：10995995
> 
> 赞同：0
> 
> 时间：2012-06-12T11:46:20.573
> 
> 标签：c#, mysql, sql-server-ce, database-connection, multiple-databases

我被要求创建一个供内部使用的软件，这将使我们能够及时了解支持请求等。

主要功能之一是该软件可从远程 MySQL 数据库运行，但如果没有 Internet 连接，则应从本地 SQL Server CE 数据库运行。

理想情况下，软件应该只将一个请求传递给数据库管理器类，这个类将知道它是否连接到 mysql，如果不使用本地 SQL Server CE 数据库。

我曾尝试过，但遇到了许多障碍。有没有人有办法解决吗？我的最新想法是将变量传递给指示类型的方法（见下文），但我不确定如何执行此操作。

```
public MySQLCommand run (string query, "MYSQL", <List>(MySQLParameter) mysqlparams){}
public SQLCECommand run (string query, "SQLCE", <List>(SQLCEParameter) dbparams){} 
```

上面的代码将按如下方式使用：

```
using (var sql = dbmanager.run("SELECT * FROM table", "MYSQL", mysqlparams)) { 
```

我还尝试了以下代码，该代码有效，但是在 using 语句中使用时，我无法访问该命令的方法函数，而且它给了我一个错误！

```
public Object run(string query, List<Object> dbparams = null){
if (isMySQLConnected){
    MySqlCommand sql = _MySQLConnection.CreateCommand();
    sql.CommandText = query;
    if (dbparams.Count > 0){
        sql.Parameters.AddRange(dbparams.ToArray());
    }
    return sql;
} else {
    SqlCeCommand sql = _OfflineConnection.CreateCommand();
    sql.CommandText = query;
    if (dbparams.Count > 0){
        sql.Parameters.AddRange(dbparams.ToArray());
    }
    return sql;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:55:30.700

我建议创建一个始终连接到 SqlCe 的基类（并添加特定于数据库的方法，例如

```
public virtual DataTable OpenDataTable(string query)
public virtual int ExecuteNonQuery(string query) 
```

在 mysql 管理器类中覆盖相同的方法。如果 mysql 管理器类执行失败，它将调用将连接到 sqlce 的基类。为这两个类创建一个抽象类或基类以供将来扩展（命名为 MyDBManager）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:50:03.273

理想情况下，您应该只传递查询并且它应该返回结果。

决定连接哪个数据库应该是方法的责任。

它应该只返回结果，调用者应该不知道这种复杂性。

```
public IEnumerable run(string query){} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T12:13:54.887

使用继承

```
public abstract class MyDBManager
{
    public abstract bool OpenConnetion();
    public abstract DataTable OpenDataTable(); // For select queroes
    public abstract int ExecuteNonQuery(string qry) // for insert/delete queries
    public abstract bool CloseConnection();
}

public class MySQLCEManger : MyDBManager
{
    public bool OpenConnection() 
    { 
        // your sqlce connection
    }

    public DataTable OpenDataTable(string query)
    {
         //Open connection
         //execute query and return datatable
         //Close connection
    }
}

 public class MySQLManager : MySQLCEManager
 {
    public bool OpenConnection() 
    { 
        // your sql cen connection
    }

    public DataTable OpenDataTable(string query)
    {
         if(!OpenConnection())  //failed to open connection
             return base.OpenDataTable();
         //execute query and return datatable
         //Close connection
    }

    public int ExecuteNonQuery(string query)
    {
         if(!OpenConnection())  //failed to open connection
             return base.ExecuteNonQuery();
         //execute query and return rows affected
         //Close connection
    }
} 
```

希望能帮助到你。请忽略它的任何语法错误。仅用于实现细节。

您还可以查看 Microsoft 的抽象数据库管理器模式和实践