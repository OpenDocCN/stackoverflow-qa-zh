# StackOverflow 问答 11211000-11211999

# amazon-web-services - 如何在 Amazon Elastic Beanstalk (AWS EBS) 上传递自定义环境变量？

> ID：11211007
> 
> 赞同：131
> 
> 时间：2012-06-26T15:42:26.053
> 
> 标签：amazon-web-services, app-config, amazon-elastic-beanstalk

Amazon Elastic Beanstalk 简介说：

> Elastic Beanstalk 让您“打开引擎盖”并保持完全控制……甚至通过 Elastic Beanstalk 控制台传递环境变量。

[http://aws.amazon.com/elasticbeanstalk/](http://aws.amazon.com/elasticbeanstalk/)

除了 Elastic Beanstalk 配置中的环境变量之外，如何传递其他环境变量？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-07-26T10:08:13.567

提醒任何使用这种`.ebextensions/*.config`方式的人：现在，您可以在 Elastic Beanstalk Web 界面中**添加、编辑和删除环境变量。**

变量位于配置 → 软件配置下：

![环境属性](../Images/5707ae7a94efe286862e537f764424d6.png)

`.ebextensions`在[Onema 的答案](https://stackoverflow.com/a/14491294/454094)中创建变量仍然有效。

它甚至可能更可取，例如，如果您稍后将部署到另一个环境并且害怕忘记手动设置它们，或者如果您可以将值提交到源代码管理。我混合使用两者。

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2013-01-23T23:25:55.243

只有 5 个值是有限的，或者您可能想要一个自定义环境变量名称。您可以使用配置文件来执行此操作。在项目的根目录下创建一个名为

**.ebextensions/**

然后创建一个名为**environment.config**的文件（这个文件可以被称为任何东西，但它必须具有 .config 扩展名）并添加以下值

```
option_settings:
  - option_name: CUSTOM_ENV
    value: staging 
```

部署应用程序后，您将在 Environment Details -> Edit Configuration -> Container 下看到这个新值

有关更多信息，请查看此处的文档：http: [//docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#customize-containers-format-options](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#customize-containers-format-options)

**更新**

为了防止提交到您的存储库值，如 API 密钥、机密等，您可以放置​​一个占位符值。

```
option_settings:
  - option_name: SOME_API_KEY
    value: placeholder-value-change-me 
```

稍后您可以转到 AWS 管理面板（环境详细信息 -> 编辑配置 -> 容器）并在那里更新值。以我的经验，这些值在后续部署后不会改变。

**更新 2** 正如@Benjamin 在他的评论中所说，由于新的[外观和感觉](http://aws.amazon.com/releasenotes/AWS-Elastic-Beanstalk/0523925246035635)于 2013 年 7 月 18 日推出，因此可以直接从控制台定义任意数量的环境变量：

`Configuration > Software Configuration > Environment Properties`

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-04-12T08:03:09.353

在 2016 Java8 Tomcat8 AMI 中，ElasticBeanstalk 无法从 Web 配置中设置环境变量。他们实际上是在设置 jvm -D 属性。

-- “以下属性作为环境变量传递到应用程序中。了解更多。”

此语句对于 Java Tomcat ami 是不正确的。亚马逊不会*将*这些设置为环境变量。它们被设置为通过命令行传递给 Tomcat 的系统属性，作为 jvm 的 -D 属性。Java中获取环境变量的方法与获取属性不同。System.getenv 与 System.getProperty

我 ssh 进入盒子并验证环境变量从未设置过。但是，在 tomcat 日志中，我可以看到 -D 属性已设置。

作为一种解决方法，我已经更改了我的代码以检查这两个位置。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-08-15T18:59:30.470

AWS 将解释您的环境变量中的 CloudFormation 模板字符串。您可以使用它在应用程序中访问有关您的 EB 环境的信息：

在 AWS Web 界面中，以下内容将被评估为您的环境名称（注意反引号）：

```
`{ "Ref" : "AWSEBEnvironmentName" }` 
```

或者，您可以使用一个`.ebextensions/*.config`并将 CloudFormation 模板包装在反引号 (`) 中：

```
{
  "option_settings": [
    {
      "namespace": "aws:elasticbeanstalk:application:environment",
      "option_name": "ENVIRONMENT_NAME",
      "value": "`{ \"Ref\" : \"AWSEBEnvironmentName\" }`"
    }
  ]
} 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-07-18T23:20:08.893

或者，您可以使用 Elastic Beanstalk CLI 设置环境变量。

设置环境变量：`eb setenv FOO=bar`

查看环境变量：`eb printenv`

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-06-26T17:06:33.127

环境详细信息 -> 编辑配置 -> 容器

![在此处输入图像描述](../Images/fbe57298580950f4af5d66bf563a9f56.png)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-11-17T00:32:06.853

这似乎是在 beanstalk 中使用动态值设置 ENV 的唯一方法。我想出了一个适用于我的多 docker 设置的解决方法：

1）在构建+上传到您的ECS存储库之前将其添加到您的Dockerfile：

```
CMD eval `cat /tmp/envs/env_file$`; <base image CMD goes here>; 
```

2) 在您的 Dockerrun.aws.json 文件中创建一个卷：

```
{
    "name": "env-file",
    "host": {
        "sourcePath": "/var/app/current/envs"
    }
} 
```

3) 将卷挂载到您的容器

```
{
  "sourceVolume": "env-file",
  "containerPath": "/tmp/envs",
  "readOnly": true
} 
```

4) 在您的 .ebextensions/options.config 文件中添加一个 container_commands 块，如下所示：

```
container_commands:
  01_create_mount:
    command: "mkdir -p envs/"
  02_create_env_file:
    command: { "Fn::Join" : [ "", [ 'echo "', "export ENVIRONMENT_NAME=" , { "Ref", "RESOURCE" }, ';" > envs/env_file;' ] ] } 
```

5) eb deploy 并且您的 ENVS 应该在您的 docker 容器中可用

您可以通过添加更多容器命令来添加更多 ENV，例如：

```
 02_create_env_file_2:
    command: { "Fn::Join" : [ "", [ 'echo "', "export ENVIRONMENT_NAME_2=" , { "Ref", "RESOURCE2" }, ';" >> envs/env_file;' \] \] } 
```

希望这可以帮助！

# html - IIS 中的基本 HTML 跨浏览器错误？

> ID：11211012
> 
> 赞同：0
> 
> 时间：2012-06-26T15:42:49.267
> 
> 标签：html, iis, cross-browser

我简直一头雾水。我尝试在 IIS 中设置我的基本 HTML 网站，并在主要浏览器之间获得 3 个不同的结果。（它应该看起来像 Chrome 的显示。）它们都在本地工作，但是通过“mycompname/website/default.html”它可以执行您在下面看到的操作。谢谢。

![在此处输入图像描述](../Images/a7290dfd644d08b5e0cd6e4870547b59.png)

* * *

HTML（根据要求）

```
<html>
<title>Website</title>
<head>
<link rel="stylesheet" type="text/css" href="styles/clean.css" />
<link rel="stylesheet" type="text/css" href="styles/style.css" />
<script type="text/javascript" src="scripts/jquery-1.7.1.js"></script>
<script type="text/javascript">
    $(function() {
        // Page Load Functions
        $.ajaxSetup({cache:false})
        $('#menu ul li ul').hide(); // Hides submenus

        // Hides submenus
        $('#menu > *').mouseleave(function(){
            $('#menu ul li ul').slideUp('slow');
        });

        // Shows submenu
        $('#menu > ul > li > a').hover(function(){
            if(!$(this).parent().children('ul').is(':visible'))
            {
                $('#menu ul li ul').slideUp('slow');
                $(this).parent().children('ul').slideDown('slow');
            }
        });

        $('#menu > ul > li > ul > li > a').click(function(e){
            e.preventDefault()
            if($(this).attr('href') != '#')
                $('#main').load('content/' + $(this).attr('href'));
        });
    });
</script>
</head>
<body>
<div id="wrapper">
    <div id="header">Put fancy logo here.</div>
    <div id="menu">
        <ul>
            <li>
                <ul>
                    <li><a href="test.html">SubMenu Item 1-1</a></li>
                    <li><a href="#">SubMenu Item 1-2</a></li>
                    <li><a href="#">SubMenu Item 1-3</a></li>
                    <li><a href="#">SubMenu Item 1-4</a></li>
                    <li><a href="#">SubMenu Item 1-5</a></li>
                </ul>
                <a>menu 1</a>
            </li>
            <li>
                <ul>
                    <li><a href="#">SubMenu Item 2-1</a></li>
                    <li><a href="#">SubMenu Item 2-2</a></li>
                    <li><a href="#">SubMenu Item 2-3</a></li>
                    <li><a href="#">SubMenu Item 2-4</a></li>
                    <li><a href="#">SubMenu Item 2-5</a></li>
                </ul>
                <a>menu 2</a>
            </li>
            <li>
                <ul>
                    <li><a href="#">SubMenu Item 3-1</a></li>
                    <li><a href="#">SubMenu Item 3-2</a></li>
                    <li><a href="#">SubMenu Item 3-3</a></li>
                    <li><a href="#">SubMenu Item 3-4</a></li>
                    <li><a href="#">SubMenu Item 3-5</a></li>
                </ul>
                <a>About Us</a>
            </li>
        </ul>
    </div>
    <div id="main">

    </div>
    <div id="footer">
        &copy; 2012 xxx. All rights reserved.
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:27:54.423

看看你得到的 HTTP 代码是什么？在这里查看：http: [//support.microsoft.com/kb/318380](http://support.microsoft.com/kb/318380)

您是否在 iis 上托管该网站？如果是这样，请确保您的网站运行的帐户可以访问本地文件系统？

直接来自msdn .....

> 默认情况下，网络服务帐户对 IIS 服务器根文件夹具有读取和执行权限。IIS 服务器根文件夹名为 WWWroot。这意味着部署在根文件夹中的 ASP.NET 应用程序已经对其应用程序文件夹具有读取和执行权限。但是，如果您的 ASP.NET 应用程序需要使用其他位置的文件或文件夹，则必须专门启用访问权限。

要提供对作为网络服务运行的 ASP.NET 应用程序的访问权限，您必须授予对网络服务帐户的访问权限。

授予对特定文件的读取、写入和修改权限

*   在 Windows 资源管理器中，找到并选择所需的文件。
*   右键单击该文件，然后单击“属性”。
*   在“属性”对话框中，单击“安全”选项卡。
*   在安全选项卡上，检查用户列表。如果网络服务
*   帐号未列出，请添加。
*   在“属性”对话框中，单击“网络服务”用户名，然后在“网络服务的权限”部分中，选择“读取”、“写入”和“修改”权限。
*   单击应用，然后单击确定。

点击[这里](http://msdn.microsoft.com/en-us/library/ff647402.aspx)了解更多

# css - 如何在 WordPress 小部件中注册样式表？

> ID：11211016
> 
> 赞同：0
> 
> 时间：2012-06-26T15:43:01.277
> 
> 标签：css, wordpress, plugins, widget

我正在按照[Dave Clements 教程](http://www.doitwithwp.com/how-to-create-wordpress-widget-step-by-step/)开发 WordPress 小部件。它运作良好。现在我想为它添加一些样式。我希望样式位于一个额外的 css 文件中，该文件将在运行时加载。我正在调用这个函数

```
function myprefix_add_my_stylesheet() {
  wp_register_style( 'myprefix-style', plugins_url('mystyle.css', __FILE__) );
  wp_enqueue_style( 'myprefix-style' );
} 
```

使用此语句的“// 小部件输出 //”之前。

```
add_action( 'wp_enqueue_scripts', 'myprefix_add_my_stylesheet' ); 
```

但似乎什么也没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T08:13:31.150

您的**wp_enqueue_scripts**操作不起作用，因为您在**widget()**函数（小部件输出）中调用它为时已晚。为时已晚，因为 Wordpress 已经打印/发送页首。例如，您可以在小部件构造函数上添加此操作。

# c++ - 在 C++ 预印卡上打印的最简单方法是什么？

> ID：11211017
> 
> 赞同：-1
> 
> 时间：2012-06-26T15:43:03.147
> 
> 标签：c++, windows, image-processing, printing, mfc

我需要创建一个应用程序（C++），它将使用打印机在将给我的特殊预印卡上打印特定的东西（主要是黑色填充的小方块）。方格的位置将在应用程序中确定。

所以我想我需要测量卡片并找到要打印的正确位置的坐标。然后将它们转换为像素 (?) 。

另一个想法是扫描预印卡并以某种方式将其用作图像，在其上绘制然后打印。

也许将应用程序与 Word 或某些图像处理应用程序等工具结合起来可能是一个更好的选择。如果你遇到过类似的事情，我想听听;-)

**编辑**：Windows 操作系统，使用 MFC，该应用程序应该适用于大多数打印机，不幸的是，使用另一种语言不是一种选择，但如果它有助于该过程，则可以组合工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:39:06.157

您可以使用[CPrintDialog](http://msdn.microsoft.com/en-us/library/sk61115a.aspx)或[CPrintDialogEx](http://msdn.microsoft.com/en-us/library/3f1ccd1t.aspx)来允许用户选择打印机，这将返回一个 DC 和一个[DEVMODE](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183565.aspx)结构。DEVMODE 中的字段将为您提供页面大小和 DPI（在`dmYResolution`和`dmPrintQuality`字段中），您可以使用它们将英寸转换为像素。

# python - 添加 get_focus() 并将 has_focus 更改为 True

> ID：11211021
> 
> 赞同：0
> 
> 时间：2012-06-26T15:43:08.737
> 
> 标签：python, gtk, pygtk

```
window = self.builder.get_object("main-window")
print window.get_focus()
print window.has_focus()
print window.is_active()
print window.has_toplevel_focus() 
```

终端输出：

```
<MainWindow object at 0x28c26e0 (Mainwindow at 0x26a1210)>
False
False
False 
```

所以我在 get_focus() 上得到了正确的答案，但是当我问起时，MainWindows 的焦点是它以 False 返回。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T22:28:22.673

`get_focus()`如果您的顶级窗口获得焦点，则返回*将获得焦点的小部件。*

# mysql - 使用不存在查询连接表

> ID：11211023
> 
> 赞同：2
> 
> 时间：2012-06-26T15:43:11.453
> 
> 标签：mysql, left-join, not-exists

> **可能重复：**
> [Mysql：执行不存在。是否可以提高性能？](https://stackoverflow.com/questions/2993332/mysql-perform-of-not-exists-is-it-possible-to-improve-permofance)

有没有更好/最佳的方法来做到这一点。我应该使用`exists`而不是`join`吗？还是两个单独的查询？那么临时表呢，因为我正在阅读那些但不确定的内容。

从组中获取成员电子邮件。检查他们是否还没有收到物品。

```
SELECT m.email,g.id 
FROM group g 
  LEFT JOIN  members m 
    ON  g.mid = m.id 
    AND g.gid='1' 
WHERE NOT EXISTS 
      ( SELECT id 
        FROM items AS i 
        WHERE i.mid=m.id 
        AND i.item_id='5'
      ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:20:53.420

这是写成 JOIN 的相同内容：

```
SELECT m.email, g.id
From members m
JOIN group g ON g.mid = m.id AND g.gid = '1' 
LEFT JOIN items i ON i.mid = m.id AND i.item_id = '5'
WHERE i.id IS NULL 
```

使用以下复合索引：

```
group (mid, gid)
items (mid, item_id) 
```

我反转了成员和组的 LEFT JOIN，因为您似乎返回的是成员，而不是组，并且我将 LEFT JOIN 更改为 INNER JOIN，因为您只需要该组的成员。

我认为这个可能读得更好：

```
SELECT m.email, g.id
From members m
JOIN group g ON g.mid = m.id
LEFT JOIN items i ON i.mid = m.id AND i.item_id = 5
WHERE g.gid = 1
  AND i.id IS NULL 
```

您可能想知道我们是否也可以将该`i.item_id = 5`部分移至 WHERE 子句。你不能因为没有行 where`i.id IS NULL`和`i.item_id = 5`. 您必须先执行连接，然后消除 WHERE 子句中的 NULL 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:50:33.597

我不相信临时表是必要的。如果我们无法获得可接受的性能，我们真的只会走那条路。

根据您的查询，我们收集您的架构如下所示：

```
group (id INT PK, gid INT, mid INT)
items (id INT PK, item_id INT, mid INT)
members (id INT PK, email VARCHAR) 
```

看起来您的`group`表实际上是一个“成员”表，它解决/实现了一个组和一个人之间的多对多关系。（也就是说，一个人可以是零个、一个或多个组的成员；一个组可以有零个或多个人作为成员。）

`group`您在和之间使用 LEFT JOIN `members`。当没有匹配的成员时，这将为组返回一行（返回 group.id），members.email 为 NULL（这可能是您想要的）。但如果您只想返回电子邮件地址，则可以将其更改为 INNER JOIN。

NOT EXISTS 谓词可以替换为 OUTER JOIN 和从 JOINED 表返回的 NULL 值的测试。如果`group.gid`and/or`items.item_id`列是数字数据类型，那么您可以从谓词中的整数文字周围删除引号。

这是一个替代方案，它将返回一个等效的结果集，并且可能表现更好：

```
SELECT m.email
     , g.id 
  FROM members m
  JOIN group g ON g.mid = m.id AND g.gid = 1
  LEFT
  JOIN items i ON i.mid = m.id AND i.item_id = 5
 WHERE i.id IS NULL 
```

* * *

附录：

测试用例（在对选定答案的评论中提供）演示了在子句中使用谓词和在子句中的查询之间结果集`items.item_id = 5`的`ON`差异`WHERE`。（将此谓词移动到 WHERE 子句会与反连接混淆。）

```
CREATE TABLE `group` (`id` INT PRIMARY KEY, `gid` INT, `mid` INT);
CREATE TABLE `items` (`id` INT PRIMARY KEY, `item_id` INT, `mid` INT);
CREATE TABLE `members` (`id` INT PRIMARY KEY, `email` VARCHAR(40));

INSERT INTO `group` VALUES (1,1,1), (2,1,2);
INSERT INTO `items` VALUES (1,5,1);
INSERT INTO `members` VALUES (1,'one@m.com'),(2,'two@m.com'); 
```

# asp.net - 如何在 MenuItemDataBound 中的 MenuItem 上设置 CSS

> ID：11211028
> 
> 赞同：0
> 
> 时间：2012-06-26T15:43:28.577
> 
> 标签：asp.net, menuitem, aspmenu-control

一段时间以来，我一直试图找到一种方法来设置 asp.menu 控件的样式。许多在线示例没有帮助，因为设置样式的属性不起作用（即 StaticMenuItemStyle-CssClass="SOMECLASS"）。所以我希望有办法以编程方式做到这一点？请帮忙。

```
protected void Menu_MenuItemDataBound(object sender, MenuEventArgs e)
{
    if (e.Item.NavigateUrl.Trim() == _currentUrl.Trim())
    {
        // Something like this
        e.Item.CssClass = "SOMECLASS";
    }
} 
```

**编辑** 我已经为我的站点导航做了一个工作。如果有使用 ASP.NET 菜单样式属性的方法，请告诉我！

```
protected void Menu_MenuItemDataBound(object sender, MenuEventArgs e)
{
    MenuItem menuitem = (MenuItem)e.Item;
    if (menuitem.NavigateUrl.Trim() == _currentUrl.Trim())
    {
        if (menuitem.Depth == 1)
        {
            menuitem.Text = "<span class=\"active" + menuitem.Depth + " selectedlevel1\">" + menuitem.Text + "</span>";
        }
        else
        {
            menuitem.Text = "<span class=\"active" + menuitem.Depth + " selectedlevel2\">" + menuitem.Text + "</span>";
        }
        while (menuitem.Parent != null)
        {
            menuitem = menuitem.Parent;
            String title = menuitem.Text;
            title = title.Replace("<span>", "");
            title = title.Replace("</span>", "");
            menuitem.Text = "<span class=\"active" + menuitem.Depth + "\">" + title + "</span>";
        }
    }
    else
    {
        menuitem.Text = "<span>" + menuitem.Text + "</span>";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:55:02.413

您应该将该项目标记为选中

```
e.Item.Selected = true; 
```

并设置`DynamicSelectedStyle-CssClass`（和/或`StaticSelectedStyle-CssClass`，老实说不确定哪一个适用于您的案例）`"SOMECLASS"`

**编辑**

看来`Menu`控制和选择的类有问题。[This other question](https://stackoverflow.com/questions/2655377/how-to-style-an-asp-net-menu-with-css)为您的场景提供了一种可能对您有所帮助的解决方法。

# php - Facebook：只有来自表格 Place 的列名称无法通过 .innerHTML 写入

> ID：11211033
> 
> 赞同：-1
> 
> 时间：2012-06-26T15:43:39.453
> 
> 标签：php, javascript, dom, facebook-fql

FQL 语句已执行，数组对象已成功传递`$fqlResult`。

但是，我无法写入`name`我的`<span>`through `innerHTML`。没有发生异常和错误。表中的其他列，例如`latitude`, `longitude`, `page_id`,能够**正确**`checkin_count` **写入相应`<span>`**的列。只是`name`给我带来了问题。

我可以知道是什么阻止我写到`name`我的`<span>`?

[FQL 地方文档](http://developers.facebook.com/docs/reference/fql/place/)

**FQL 语句**

```
SELECT page_id,name,latitude,longitude,checkin_count 
FROM place 
WHERE distance(latitude, longitude,"1.2894680406278", "103.86311775635") < 200 
ORDER BY checkin_count DESC 
```

结果`print_r($fqlResult)`似乎与[Graph API Explorer](http://developers.facebook.com/tools/explorer/433576149993619/?fql=SELECT%20page_id,name,latitude,longitude,checkin_count%20FROM%20place%20WHERE%20distance%28latitude,%20longitude,%221.2894680406278%22,%20%22103.86311775635%22%29%20%3C%20200%20ORDER%20BY%20checkin_count%20DESC)的结果一致。

**HTML**

```
<b>Page Name: </b> <span id="fName"></span>
<b>Latitude: </b> <span id="fLatitude"></span>
<b>Longitude: </b> <span id="fLongitude"></span> 
```

* * *

**观察**

*JavaScript 设置 1*（阻塞）

```
document.getElementById('fName').innerHTML = <?=$fqlResult[0]['name']?>;
document.getElementById('fLatitude').innerHTML = <?=$fqlResult[0]['latitude']?>;
document.getElementById('fLongitude').innerHTML = <?=$fqlResult[0]['longitude']?>;

//Output
No. of Facebook Checkins: 
Latitude: 
Longitude: 
```

*JavaScript 设置 2*（没有阻塞 - 好的）

```
document.getElementById('fLatitude').innerHTML = <?=$fqlResult[0]['latitude']?>;
document.getElementById('fLongitude').innerHTML = <?=$fqlResult[0]['longitude']?>;

//Output
No. of Facebook Checkins: 
Latitude: 1.2894680406278
Longitude: 103.86311775635 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:57:13.480

纬度和对数是数字，所以没有问题。

但是*name*是一个字符串（又名文本字面量），而*您*忘记在 JavaScript 代码中放置值是什么……？确切地说，**字符串分隔符**。

您应该真正学习如何使用浏览器的错误控制台……！

# c# - Microsoft Solver Foundation 是否存在漏洞？

> ID：11211035
> 
> 赞同：2
> 
> 时间：2012-06-26T15:43:45.503
> 
> 标签：c#, ms-solver-foundation

`oml`我在尝试做另一件事时错误地写了这个不可行的。问题在于底部的约束是不可能的，因为右侧的最小值必须为零，左侧的最大值必须大于零（当然，除非我遗漏了一些东西）。

问题是，如果你运行它，MSF 会很乐意给你一个答案，而不是告诉你是不可行的。

```
string oml = @"
    Model[
        Decisions[Integers[0,Infinity], d1],
        Decisions[Integers[0,Infinity], d2],
        Decisions[Integers[0,Infinity], d3],
        Decisions[Integers[0,Infinity], d4],
        Decisions[Integers[0,Infinity], d5],
        Decisions[Integers[0,Infinity], d6],
        Decisions[Integers[0,Infinity], d7],
        Decisions[Integers[0,Infinity], d8],
        Decisions[Integers[0,Infinity], d9], 
        Decisions[Integers[0,Infinity], d10],
        Decisions[Integers[0,Infinity], d11],
        Decisions[Integers[0,Infinity], d12],
        Decisions[Integers[0,Infinity], d13],
        Decisions[Integers[0,Infinity], d14],
        Decisions[Integers[0,Infinity], d15],
        Decisions[Integers[0,Infinity], d16],
        Constraints[d1 + d2 + d3 + d4 + d5 + d6 + d7 + d8 == 2],
        Constraints[d9 + d10 + d11 + d12 + d13 + d14 + d15 + d16 == 2],
        Constraints[d1 + d9 <= 1],
        Constraints[d2 + d10 <= 1],
        Constraints[d3 + d11 <= 1],
        Constraints[d4 + d12 <= 1],
        Constraints[d5 + d13 <= 1],
        Constraints[d6 + d14 <= 1],
        Constraints[d7 + d15 <= 1],
        Constraints[d8 + d16 <= 1],
        Constraints[Max[d1 * 1, d2 * 2, d3 * 3, d4 * 4, d5 * 1, d6 * 2, d7 * 3, d8 * 4] <= Min[d9 * 1, d10 * 2, d11 * 3, d12 * 4, d13 * 1, d14 * 2, d15 * 3, d16 * 4]]
    ]
";

SolverContext sc = SolverContext.GetContext();
sc.LoadModel(FileFormat.OML, new StringReader(oml));
var sol = sc.Solve();
Console.WriteLine(sol.GetReport()); 
```

**编辑：**

这是我的报告给我的：

```
===Solver Foundation Service Report===
Date: 6/26/2012 11:00:55 AM
Version: Microsoft Solver Foundation 3.0.1.10599 Express Edition
Model Name: DefaultModel
Capabilities Applied: CP
Solve Time (ms): 135
Total Time (ms): 338
Solve Completion Status: Feasible
Solver Selected: Microsoft.SolverFoundation.Solvers.ConstraintSystem
Directives:
Microsoft.SolverFoundation.Services.Directive
Algorithm: TreeSearch
Variable Selection: DomainOverWeightedDegree
Value Selection: ForwardOrder
Move Selection: Any
Backtrack Count: 0
===Solution Details===
Goals:

Decisions:
d1: 0
d2: 0
d3: 0
d4: 0
d5: 0
d6: 0
d7: 1
d8: 1
d9: 0
d10: 0
d11: 1
d12: 1
d13: 0
d14: 0
d15: 0
d16: 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:09:50.857

好像是版本问题。在 MSF 的最新版本（标准版）中运行相同的问题时，求解器将问题报告为*Infeasible*。除此之外，该报告列出了与上述 3.0 的报告相同的属性，只是没有列出决策值。

所以是的，似乎 MSF 3.0 中存在某种错误。要克服这个错误，请尝试升级到最新的 MSF 版本 3.1。

# sql-server - 使用 Year() 时的 SQL Server 2008 索引方法

> ID：11211037
> 
> 赞同：1
> 
> 时间：2012-06-26T15:43:54.057
> 
> 标签：sql-server, sql-server-2008, tsql, indexing

我有一个表'customertransactions'，其中有一列'transactiondate' 类型为DateTime。

我将使用以下内容查询它：

```
SELECT SUM(balance) AS totalbal FROM customertransactions WHERE accountcode=?
AND (MONTH(GETDATE())-MONTH(transactiondate)+12*(YEAR(GETDATE())-YEAR(transactiondate)))>= 3 
```

...显然为“accountcode”传递了一个经过清理的参数。

我的问题是 - 我如何最好地创建一个索引来优化它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:58:58.030

首先，我会考虑索引`accountcode`. 此外，如果您可以重写 date 子句使其成为[sargable](https://en.wikipedia.org/wiki/Sargable)，那么您也可以从索引`transactiondate`中受益。

与往常一样，考虑数据的基数，并在添加索引时检查查询计划。没有硬性规定。

# mongodb - 如何在保存到gridfs之前计算文件的MD5

> ID：11211038
> 
> 赞同：3
> 
> 时间：2012-06-26T15:43:55.393
> 
> 标签：mongodb, gridfs

我正在使用用于 gridfs 的 java MongoDB 驱动程序，并且想在保存文件之前使用 MD5 哈希来检查文件是否已经存在。本质上，我试图在 Java中做到[这一点。](http://www.lightcubesolutions.com/blog/?p=352)

我从 apache common-codec 尝试`DigestUtils`了以下逻辑：

```
public GridFSDBFile save(InputStream inputStream, String contentType, String filename) throws IOException {
    String md5 = DigestUtils.md5Hex(inputStream);

    List<GridFSDBFile> md5match = gridFs.find(new BasicDBObject("md5", md5));

    if (md5match!=null && md5match.size()>0) {
        return md5match.get(0);
    } else {
        GridFSInputFile input = gridFs.createFile(inputStream, filename, true);
        input.save();
        return gridFs.findOne(input.getId())
    }
} 
```

查看底层实现，`DigestUtils`MongoDB 驱动程序都使用 MessageDigest.getInstance("MD5") 来计算 MD5 哈希。但是，看起来 生成的 md5 哈希码`DigestUtils`与 gridfs 生成的不一样。覆盖 GridFSInputFile 中的“md5”键也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T19:14:57.933

答案原来与 Mongodb 驱动无关。为了计算 md5 哈希，DigestUtils 必须通读 InputStream。为了使上述代码正常工作，请使用标记/重置：

```
inputStream.mark(Integer.MAX_VALUE);
String md5 = DigestUtils.md5Hex(inputStream);
inputStream.reset(); 
```

# c# - Metro应用程序中的自定义底部应用程序栏

> ID：11211050
> 
> 赞同：0
> 
> 时间：2012-06-26T15:44:28.080
> 
> 标签：c#, xaml

抱歉，如果我错了，我正在使用 C# 使用 windows8 预览版开发 Metro 应用程序。众所周知，我们可以创建底部应用栏。 [http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh781232.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh781232.aspx)

通过使用下面的代码，我们可以获得上传应用栏

```
<Button x:Name="BTNUpload" AutomationProperties.Name="upload" Style="{StaticResource UploadAppBarButtonStyle}"/> 
```

我的问题是如何创建自定义应用栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:49:50.763

就像他们在 msdn 中所说的那样：只需在您的 XAML 中自定义并添加该代码。

```
<Page.BottomAppBar>
<AppBar x:Name="bottomAppBar" Padding="10,0,10,0">
    <Grid>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
            <Button Style="{StaticResource EditAppBarButtonStyle}" Click="Button_Click"/>
            <Button Style="{StaticResource RemoveAppBarButtonStyle}" Click="Button_Click"/>
            <Button Style="{StaticResource AddAppBarButtonStyle}" Click="Button_Click"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Style="{StaticResource RefreshAppBarButtonStyle}" Click="Button_Click"/>
            <Button Style="{StaticResource HelpAppBarButtonStyle}" Click="Button_Click"/>
        </StackPanel>
    </Grid>
</AppBar> 
```

# java - 为什么 JBoss 与 Tomcat 捆绑在一起

> ID：11211053
> 
> 赞同：0
> 
> 时间：2012-06-26T15:44:31.263
> 
> 标签：java, jakarta-ee, tomcat, jboss

我的问题是为什么 JBoss 与 Tomcat 捆绑在一起？我认为 JBoss 应该提供所有 Java EE 功能。有人可以提供一些关于为什么 JBoss 需要使用 Tomcat 的明确解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:59:22.563

[JBoss AS 7](http://www.jboss.org/jbossas/)不直接使用 Tomcat，而是使用基于 Tomcat 的[JBoss Web 。](http://www.jboss.org/jbossweb/)它为 JBoss AS 提供了 Servlet/JSP 容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:08:54.397

Tomcat 被分叉到 JBoss Web。EE 规范并没有说子规范的所有实现的作者必须相同。

也许你会感兴趣：你可以在下面的页面上看到在哪个 JBoss AS 版本中使用了哪个版本的 Tomcat（分叉到 JBoss Web）：

[JBoss AS 中 Tomcat / JBoss Web 的版本](https://community.jboss.org/wiki/VersionOfTomcatInJBossAS)

# php - PHP `date()` 不同于 Unix `date` 命令

> ID：11211057
> 
> 赞同：1
> 
> 时间：2012-06-26T15:44:50.640
> 
> 标签：php, unix, date, time, gmt

我四处寻找，但找不到我要找的确切内容。

我有一个 PHP 设置页面，我的站点的管理员可以选择一天中的一个小时来执行每日 Cron 作业脚本。在我`crontab`的脚本中，我每小时运行一次。当脚本运行时，它会检查当前时间是否等于设置页面请求的时间。

我这样做的原因是因为我绝对无法找到`crontab`通过 PHP 编辑文件的方法，尽管对主题进行了大量测试和研究。如果你能帮我想办法做到这一点，那就加分。

我提出这个问题的真正原因是因为我的 Unix 服务器的时间存在一些问题。在我的 localhost 机器 (IIS) 上，Cron 脚本按预期每小时执行一次，但是当我将所有内容移到我的 Unix Amazon 机器上时，时间正好相差五个小时。

Cron 作业仍然像预期的那样每小时运行一次，但是当 PHP 脚本检查当前时间（使用`date("G")`）是否与设置时间匹配时，它不会像预期的那样工作。当然，它最终会晚了五个小时才得到处理。

我不认为我住在中央时区是巧合，这也恰好是五个小时的休息时间，所以我几乎肯定它与此有关。

我可以写一个变通方法，总是将时间偏移五个小时，但这会导致我的日期字段不准确（我认为），而且有点牵强。我宁愿只是问，因为我确信很多人都在阅读这篇文章并认为我不知道答案是愚蠢的。

还有一件事：

我的脚本中有这行代码。还有什么我需要分享的吗？

`date_default_timezone_set('America/Chicago');`

编辑：您的“修复”是什么的解释将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:57:39.610

这里有几个问题我想说，要回答所有问题都需要一些时间，但我会尽量略过。

*   要编辑 crontab，您需要为 webserver 用户而不是 root 用户编辑 crontab，或者如果您打算编辑 root crontab，您需要配置 sudo，以便 webserver 用户可以专门编辑该 crontab。您现有的范例可能更好，只需安装一个 cron，然后将大部分逻辑放入 cron 调用的 PHP 脚本中。
*   如第一条评论所建议的，您遇到的问题与 php 日期不同是对另一个线程的欺骗。如果您有权访问 php.ini，则应在此处相应地设置 date.timezone。此外，如果用户不在运行该框的时区中，则无论如何您都必须调整时区偏移量。
*   顺便提一下的另一件事是，您可以通过 PHP 通过类似`$sLinuxDate = shell_exec('date');`. 正如我所提到的，您可能想通过 php.ini 正确设置 PHP 和操作系统之间的时区。

# java - Check in return answer from mysql equal the parameter I send

> ID：11211067
> 
> 赞同：0
> 
> 时间：2012-06-26T15:45:15.907
> 
> 标签：java, mysql

I built a function in java that searches in the database for 2 values and if they exist return the values;

```
 public List<Conniction> findPath(int one,int two){
    List<Conniction> list = new ArrayList<Conniction>();
    Connection c = null;
    String sql = "SELECT * FROM conniction WHERE oneid="+one+"&& twoid="+two;
    try {
        c = ConnectionHelper.getConnection();
        Statement s = c.createStatement();
        ResultSet rs = s.executeQuery(sql);
        ResultSetMetaData metaData = rs.getMetaData();
        int columncount = metaData.getColumnCount();
        //direct result
        if (columncount > 0) {
            System.out.println("Match one and two found!");
            while (rs.next()) {
                list.add(processRow(rs));
            }
        }
        else{
            String sql2 = "SELECT * FROM conniction WHERE oneid="+one;
            s = c.createStatement();
            rs = s.executeQuery(sql2);
             metaData = rs.getMetaData();
             columncount = metaData.getColumnCount();
                if (columncount > 0) {
                    System.out.println("One Match found!");
                    while (rs.next()) {
                        list.add(processRow(rs));
                    }
                }
        }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return list;

} 
```

How do I check what the values of the parameters that are returned are, to check if its really the right answer for `oneid` and `twoid`. It always returns something different from what I have sent.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:50:18.810

您的代码有两个严重的问题使其无法正常工作：

1.  `metaData.getColumnCount()`（不出所料）返回*列*数，而不是*行*数。返回的列数是一个常数，具体取决于查询中选择的内容。在这种情况下， you `select *`, so`metaData.getColumnCount()`就是表中的列数`conniction`。在处理它之前，您不知道行集中有多少行
2.  您可能想要*or*逻辑，而不是*and*，即
    `"SELECT * FROM conniction WHERE oneid="+one+" OR twoid="+two`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:40:11.510

我不知道这是否是最好的解决方案，但你可以： * 给列表对象带参数 * 然后返回一个代码 * 检查代码并使用列表

您的方法将列表作为参数获取：

```
 public int findPath(List<Conniction> list, int one, int two) {
        ...
        if (columncount > 0) {
            System.out.println("Match one and two found!");
            while (rs.next()) {
                list.add(processRow(rs));
            }
            return 2;
        } else {
            String sql2 = "SELECT * FROM conniction WHERE oneid="+one;
            s = c.createStatement();
            rs = s.executeQuery(sql2);
            metaData = rs.getMetaData();
            columncount = metaData.getColumnCount();
                if (columncount > 0) {
                    System.out.println("One Match found!");
                    while (rs.next()) {
                        list.add(processRow(rs));
                    }
                    return 1;
                } 
        }
    ... 
```

}

在您的代码中，您调用检查返回的方法：

```
 ...
    List<Conniction> connlist = new ArrayList<Conniction>();
    int foo = findPath(connlist , one, two);
    if (foo == 1) {
        /*One Match found!*/
        // do something with your connlist-Object;
    } else if (foo == 2) {
        /*Match one and two found!*/
        // do something with your connlist-Object;
    } 
```

# html - Web Worker 加载绝对 URL

> ID：11211068
> 
> 赞同：4
> 
> 时间：2012-06-26T15:45:16.133
> 
> 标签：html, xmlhttprequest, web-worker

[我可以从绝对 URL 加载 Web Worker 脚本吗？](https://stackoverflow.com/questions/1549614/can-i-load-a-web-worker-script-from-an-absolute-url)- 这里的答案是否定的。

然而，无论如何我发现有一个黑客可以做到这一点：

```
var worker; //= new Worker('http://xyz/FSWorker.js');
var xhr = new XMLHttpRequest();
xhr.open("GET", 'http://xyz/FSWorker.js');
xhr.responseType = 'blob';
xhr.onload = function(e) {
    var blob = this.response;
    worker = new Worker(window.URL.createObjectURL(blob));
    fs_ready(); // do more stuff here
};

xhr.send(null); 
```

我不太喜欢这种方法——我现在必须在 XHR 完成后才开始使用 worker。另一种选择是使用 inline worker，但这更难看，因为我必须将所有代码放入一个巨大的字符串中。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:00:32.120

您发现了 Web Workers 的一个巧妙功能——您可以从几乎任何任意文本 blob 创建。

如果您将脚本作为`<script>`当前页面上的节点加载，您可以使用类似的`Blob`技术从中创建 Web Worker。至于加载远程脚本，您的[依赖`XHR`](https://stackoverflow.com/questions/148441/how-can-i-get-the-content-of-the-file-specified-as-the-src-of-a-script-tag)与访问远程脚本的文本内容一样优雅。

# python - 电子邮件中的奇怪字符无法被 imap 服务器接收

> ID：11211070
> 
> 赞同：2
> 
> 时间：2012-06-26T15:45:20.453
> 
> 标签：python, email, character-encoding, imap

我正在编写一个工具，该工具能够通过 python 中的 IMAP 备份和恢复 Gmail 中的电子邮件。在某些情况下，从 Gmail 备份的电子邮件包含奇怪的字符：^@，然后 Gmail IMAP 无法重新摄取这些字符。

```
Delivered-To: xxxxx@lxxxxxx
Received: by 1x.xx.xx.xx with SMTP id jjjjjjjj;
        Tue, 14 Jun 2011 16:56:26 -0700 (PDT)
Received: by x.x.x.x with SMTP id xxxx.xxx;
        Tue, 14 Jun 2011 16:56:16 -0700 (PDT)
Return-Path: <foo.bar@email.com>
Delivery-Date: Mon, 23 Aug 2010 17:58:56 +0200
Received: from xxxxx (xxxxx [x.x.x.x])
    by xxxx (node=xxx) with ESMTP (xxx)
    id xxx ; Mon, 23 Aug 2010 17:58:56 +0200
Received: from [x] (x)
    by x (x) with x (x)
    id x; Mon, 23 Aug 2010 17:58:50 +0200
Message-ID: <x@foo.com>
Date: Mon, 23 Aug 2010 17:58:48 +0200
From: Foo Bar <foo.bar@email.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.8) Gecko/20100802             Thunderbird/3.1.2
MIME-Version: 1.0
To: bar.foo@email.com <x>
Subject: The subject
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 8bit
X-Provags-ID: xxxxxxxxxxx=
Envelope-To: foo.bar@email.com

  Hello All,

blah blah blah

^@ 
```

最后他们是这个特殊的角色。有时它会出现在中间的其他电子邮件中。当我将电子邮件存储在磁盘上（eml 格式）时，我只是保存并恢复它。

编码似乎正确。

这个角色是什么？当我将电子邮件存储在 eml 中时，我做错了什么吗？

一些指导将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T05:06:24.423

简短回答：您可以先从电子邮件正文中删除空字符，然后再将它们发送回 Google。**

更长的答案：

旧电子邮件（根据[RFC 822](http://www.ietf.org/rfc/rfc0822.txt)）被允许包含空字符。新电子邮件（根据[RFC 2822](http://www.ietf.org/rfc/rfc2822.txt)，大约 2003 年）不允许包含空字符。注意 RFC 2822 写道：“与早期标准的差异...... ASCII 0 (null) 已删除。”

Gmail 完全有可能通过 SMTP 接收 822 样式的电子邮件（这就是电子邮件首先到达您的收件箱的方式），但仅通过 IMAP 接收 2822 样式的电子邮件（这就是为什么您不能通过 IMAP 将其放回的原因）。

** 注意：不要盲目地从电子邮件中包含的 MIME 文档中去除空值。RFC 2822 “指定消息由 US-ASCII 范围 1 到 127 中的字符组成。还有其他文档，特别是 MIME 文档系列 [RFC2045、RFC2046、RFC2047、RFC2048、RFC2049]，它们扩展了 [RFC 2822]允许超出该范围的值。”

# objective-c - 为什么我的 NSMutableArray 类型不是 NSMutableArray？

> ID：11211072
> 
> 赞同：0
> 
> 时间：2012-06-26T15:45:28.427
> 
> 标签：objective-c, introspection

我有一个 NSMutableArray，创建如下：

```
NSMutableArray *expr = [[NSMutableArray alloc] init]; 
    [expr addObject:[NSNumber numberWithDouble:3.0]];
    [expr addObject:@"+"];
    [expr addObject:@"%x"];
    [expr addObject:@"*"];
    [expr addObject:[NSNumber numberWithDouble:4.0]]; 
```

稍后，我将它传递给称为 的方法`(id) anExpression`，并尝试通过自省来确定这是什么类型的对象：

```
if ([[anExpression class] isEqual:[NSMutableArray class]]) {
    // Some code I only want to do if it IS a Mutable array
} 
```

但是，这返回 false，并且我的代码没有被执行。`NSLog`我试过`[NSMutableArray class]`了，这给了我`NSMutableArray`。并不意外。
但是当我尝试`NSLog`ing`expr`的课程时，我得到了`__NSArrayM`.

为什么是这样？我应该如何解决这个问题？

我对Objective-C不太熟悉，所以请解释一下。我不喜欢做我不明白的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:47:14.830

你的支票不正确。它应该是

```
if ([[expr class] isEqual:[NSMutableArray class]]) { 
```

或者

```
if ([expr isKindOfClass:[NSMutableArray class]]) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:57:58.567

答案在于 isKindOfClass - 如果您创建了 NSMutableArray 的子类，显然您希望执行为可变数组保留的代码。

同样，必须有一些内部 Cocoa 实现细节，其中您制作的可变数组的类与 [NSMutableArray 类] 不同。我不知道原因，但你也不应该关心，你几乎总是想使用 isKindOfClass - 它也适用于子类。

## 如果你真的想知道...

都是关于类集群的-请参阅[Objective c isKindOfClass misunderstanding?](https://stackoverflow.com/questions/2045561/objective-c-iskindofclass-missunderstanding)

# android - Android Dev - Get Geo Locations of a PostCode

> ID：11211074
> 
> 赞同：0
> 
> 时间：2012-06-26T15:45:36.350
> 
> 标签：android

I am new to Android App development and was hoping I could find some help. I am trying to write an app, which let's me know when I reach a certain given postcode. Thanks to a few examples over the internet, I have managed to find a way to get to Lat/Long (using emulator), but still do not know how I can use it to check if I have reached a certain postcode.

Is there any help regarding this, a link which explains how it can be done.

Please, any help will be highly appreciated.

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:52:02.837

我认为您正在寻找 GeoCoder 课程。 [看看这个以前的答案](https://stackoverflow.com/a/11197192/771999)

和

[Android 开发者：地理编码器](http://developer.android.com/reference/android/location/Geocoder.html)

# php - 查找最接近变量的值的数组名称？

> ID：11211078
> 
> 赞同：1
> 
> 时间：2012-06-26T15:45:52.450
> 
> 标签：php, arrays, search, closest

我正在尝试找到最接近给定预算的产品

```
$array = array(
    'productname1' => 5,
    'productname2' => 10,
    'productname3' => 15
)

$budget = 12; 
```

我尝试使用如下函数来查找最接近的值，但它只返回最接近预算的数字而不是产品名称。

```
 function closest($array, $number) {
        sort($array);
        foreach ($array as $a) {
            if ($a >= $number) return $a;
        }
        return end($array);
    } 
```

我不禁认为有一个更好的实现。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:57:48.787

```
foreach($array as $k => $v){ $diff[abs($v - $budget)] = $k; }
ksort($diff, SORT_NUMERIC);
$closest_key = current($diff);

var_dump($closest_key);         // Product Name
var_dump($array[$closest_key]); // Product Cost 
```

印刷：

```
    字符串（12）“产品名称2”
    整数（10）

```

或者作为一个函数：

```
function closest($array, $price)
{
    foreach($array as $k => $v){ $diff[abs($v - $price)] = $k; }
    ksort($diff, SORT_NUMERIC);
    $closest_key = current($diff);
    return array($closest_key, $array[$closest_key]);
}

print_r(closest($array, $budget)); 
```

印刷：

```
    大批
    (
        [0] => productname2 // 产品名称
        [1] => 10 // 产品价格
    )

```

两种格式都只包含三个步骤：

*   计算产品成本与预算之间的差额
*   对这些进行排序
*   从排序后的数组中取出第一个元素（价格最接近预算的元素）。

编辑：如果您不关心除了最接近的单个产品之外的任何东西，那么排序是矫枉过正的，一个简单的`min()`功能（如 Emil 使用）会快得多。例如：

```
function closest($array, $price)
{
    foreach($array as $k => $v){ $diff[abs($v - $price)] = $k; }
    $closest_key = $diff[min(array_keys($diff))];
    return array($closest_key, $array[$closest_key]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:52:51.637

```
function closest($array, $number) {
     sort($array);
     foreach ($array as $name => $a) {
         if ($a >= $number) return $name;
     }
     return end(array_keys($array));
 } 
```

诀窍就在这一行：

```
 foreach ($array as $name => $a) { 
```

在这里，您分配`$name`给数组键和`$a`数组值。既然要名字，`return $name;`

另外，如果找不到匹配项，请`end(array_keys($array)));`获取产品名称，否则只会吐出值，这不是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:53:06.223

您需要返回 KEY，而不是值：

```
function closest($array, $number) {
    sort($array);
    foreach ($array as $product=>$a) {
        if ($a >= $number) return $product;
    }
    return $product;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T15:57:35.863

这是一种功能性的方法。

1.  将每个帖子映射到与预算的差异。
2.  找到最小值。
3.  过滤掉所有不符合该值的产品。

执行：

```
$diffs = array_map(function ($value) use ($budget) {
                     return abs($value - $budget);
                   }, $array);

$smallest = min($diffs);
$products = array_filter($array,
                         function ($value) use ($budget, $smallest) {
                           return abs($value - $budget) == $smallest;
                         }); 
```

`$products`现在将包含所有最接近预算的产品。

# css - 如何将复选框和文本输入标记对齐到 jquery-mobile 行

> ID：11211079
> 
> 赞同：7
> 
> 时间：2012-06-26T15:45:53.120
> 
> 标签：css, jquery-mobile, fieldset

使用 JqueryMobile，我希望实现以下布局：

1.  有漂亮的装饰框来分隔我的输入行
2.  使一个复选框与输入文本字段垂直对齐，都在同一行

![我需要达到的目标](../Images/7285e096c17190be391d9ae953abab5e.png)

但经过多次尝试，我唯一能得到的布局如下： ![我得到了什么](../Images/4c46a0f7f0f7b39dac9ee2372f8b5e01.png)

第一次尝试使用 看起来有点正确`jquerymobile grids`，但 my`checkbox`不再可选择并且永远保持检查状态。第二次尝试使用`fieldset`提议的`jquerymobile`，但是，我松开了`checkbox`并且我尝试使用 css float 属性，但没有成功。

这是完整的代码：

```
 <!DOCTYPE html> 
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>Multi-page template</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head> 
<body style="font-size: 12px;"> 
<div data-role="page" id="one">
    <div data-role="content">   
      <div class="ui-grid-a">
         <div class="ui-block-a" style="width: 20%;" >
            <div class="ui-bar ui-bar-e" style="height:24px; padding: .4em 4px;">
               <div class="ui-checkbox">
                  <label data-corners="true" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="checkbox-off" class="ui-btn ui-btn-corner-all ui-btn-icon-left ui-checkbox-on">
                      <span class="ui-btn-inner ui-btn-corner-all">
                      <span class="ui-icon ui-icon-shadow ui-icon-checkbox-on"></span>
                      </span>
                  </label>
               </div>
            </div>  
         </div>
         <div class="ui-block-b" style="width: 80%;" >
            <div class="ui-bar ui-bar-e" style="height:24px">Block B</div>
         </div>
       </div>

       <div style="height: 200px;">
           <fieldset data-role="controlgroup" data-type="horizontal">
               <input type="checkbox" name="checkbox-mini-0" id="checkbox-mini-0"  class="custom" />
               <label for="checkbox-mini-0" >&nbsp</label>
               <input type="text" name="texta" id="texta" class="custom" style="width:36px;" />
           </fieldset>  
           <div style="height: 30px; border:1px solid lightgray;">
           </div>   
           <div style="height: 30px; border:1px solid lightgray;">
           </div>      
        </div>      
   </div>
</div>

</body>
</html> 
```

任何帮助或意见来实现我的目标将不胜感激？

[在线编辑器：您也可以在http://jsfiddle.net/alain_lavoie/XhsEh/](http://jsfiddle.net/alain_lavoie/XhsEh/)上访问 html 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:58:18.563

[http://jsfiddle.net/nirmaljpatel/XAsyy/](http://jsfiddle.net/nirmaljpatel/XAsyy/)

![输出](../Images/d93789b09c1c4f2c038882d9acdce276.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T06:18:45.133

[http://jsfiddle.net/XAsyy/110/](http://jsfiddle.net/XAsyy/110/)

从 Nirmal Patel ans 更新，我发现 textarea 可以使用复选框，如果您不希望 textarea 增长：

```
data-role="none" ie. <textarea id="test"  data-role="none"></textarea> 
```

[http://jsfiddle.net/XAsyy/144/](http://jsfiddle.net/XAsyy/144/)

或者，使用：

```
css resize: none; 
```

# java - Know When a listener's method has been called

> ID：11211081
> 
> 赞同：1
> 
> 时间：2012-06-26T15:45:59.410
> 
> 标签：java

I am struggling trying to google this subject. I must not being using the correct search terms. I have a location listener, in Android, and I usually nest the listener inside the class I am using it for.

```
public class ClassName {
    ...
    private class Listener implements SomeListener{
        ...
        public void somethingChanged(){
            ...
        }
    }
} 
```

This time I decided to make the listener a new class to make the code easier to read and so I can reuse it. So now my listener and the class that is using the listener are separate.

```
public class ClassName{
    ...
}

public class Listener implements SomeListener{
    ...
    public void somethingChanged(){
        ...
    }
} 
```

So inside the `somethingChanged()` method, I just want to notify my main class that an event has occurred so I can do some updating. I can't think of a way to do this. I can't put anything specific in the listener's method or it is not reusable. How do I make a method that has been called from a Listener call a method in the class using the listener?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:54:42.090

好吧，你看，内部类知道外部类，因为你分离了类，所以不再是这种情况了。

我建议将 的实例传递`ClassName`给`Listener`构造函数中的 a ，并从内部调用`ClassName`的公共方法`somethingChanged`。

# knockout.js - 移除对象时做一些效果

> ID：11211085
> 
> 赞同：4
> 
> 时间：2012-06-26T15:46:12.810
> 
> 标签：knockout.js

当我使用 '.pop' 或 '.remove' 时，敲除会自动删除 html dom 中对应的元素。我的问题是：从数组中删除这些对象时，我可以做一些类似 jquery 的“.hide”的效果吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T15:48:47.030

使用 foreach 绑定的 beforeRemove 回调：

[http://knockoutjs.com/documentation/foreach-binding.html](http://knockoutjs.com/documentation/foreach-binding.html)

动画过渡可能有助于演示如何制作动画：

[http://knockoutjs.com/examples/animatedTransitions.html](http://knockoutjs.com/examples/animatedTransitions.html)

# android - Setting Android SeekBar position to finger position on initial touch

> ID：11211087
> 
> 赞同：2
> 
> 时间：2012-06-26T15:46:15.330
> 
> 标签：android, seekbar

I have a seekbar and I would like to set the position (progress) to the match the position of your finger when you first touch it... I want you to be able to touch it and have it snap to where you touched it immediately, and then function normally allowing you to drag it until you remove your finger.

I know I will have to do this in the onStartTrackingTouch() function and I will have to call seekBar.setProgress() but I'm not sure how to get the seekBar progress equivalent of the location of your touch.

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-19T17:49:10.530

这是一个有效的解决方案：

```
private void onStartTrackingTouch(MotionEvent event) {
    firstTouchAngle = TouchAngle;
}

private void onUpdateTouch(MotionEvent event) {
    newTouchAngle = TouchAngle;
    if (Math.abs(newTouchAngle - firstTouchAngle) > 3) {
        //do something
    }
} 
```

# drupal-6 - 如何更改 Drupal 上的用户/密码页面

> ID：11211092
> 
> 赞同：0
> 
> 时间：2012-06-26T15:46:36.960
> 
> 标签：drupal-6

当用户访问我的 Drupal 站点上的 /user/password 时，我想将文本从“用户帐户”更改为其他内容。

我对 Drupal 很陌生。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:12:06.523

无论您将 Drupal 放在哪个站点上，您都可以通过在 URL 的末尾附加“?q=user”来找到登录页面——例如[http://www.somesite.com/?q=user](http://www.somesite.com/?q=user)。

但是如果你想自定义登录页面，点击这里：

[http://drupal.org/node/19855](http://drupal.org/node/19855)

# c# - 将一个表达式树转换/嵌入到另一个

> ID：11211094
> 
> 赞同：0
> 
> 时间：2012-06-26T15:46:44.430
> 
> 标签：c#, nhibernate, lambda, expression-trees, iqueryable

编辑：更详细的问题。

我正在处理 nHibernate 中的批处理操作，专门用于`In`查询以克服 SQL Server 中的 2100 参数限制大小。

为此，我用这个构造函数创建了一个类（这是一个非常简化的版本）：

```
BatchedQuery(session.Query<Foo>(), allValues, (l, e) => l.Contains(e.Id));

...

public BatchedQuery(IQueryable<TEntity> query, IList<TValue> allValues, Expression<Func<IList<TValue>, TEntity, bool>> predicate)
{
   List<TValue> values = ...; // Select a batch from allValues
   ...

   // I want to pass the values to the expression passed in...
   // something like this, without using Compile: 
   // e => predicate.Compile()(values, e)

   // using JKor's method, I tried this...
   ParameterExpression param = Expression.Parameter(typeof(TEntity), "e");
   Expression<Func<TEntity, bool>> expr2 =
       Expression.Lambda<Func<TEntity, bool>>(Expression.Invoke(predicate,
           Expression.Constant(batchOfValues), param), param);

   query = query.Where(expr2);

   // Do something with the query...
}

// Somewhere else..
// This causes the exception
batchedQuery.ToList(); 
```

以上导致 nHibernate 抛出`KeyNotFoundException`.

这是堆栈跟踪：

```
at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
at NHibernate.Param.NamedParameterSpecification.SetEffectiveType(QueryParameters queryParameters)
at NHibernate.Param.ParametersBackTrackExtensions.ResetEffectiveExpectedType(IEnumerable`1 parameterSpecs, QueryParameters queryParameters)
at NHibernate.Hql.Ast.ANTLR.Loader.QueryLoader.ResetEffectiveExpectedType(IEnumerable`1 parameterSpecs, QueryParameters queryParameters)
at NHibernate.Loader.Loader.CreateSqlCommand(QueryParameters queryParameters, ISessionImplementor session)
at NHibernate.Impl.MultiQueryImpl.AggregateQueriesInformation()
at NHibernate.Impl.MultiQueryImpl.get_Parameters()
at NHibernate.Impl.MultiQueryImpl.CreateCombinedQueryParameters()
at NHibernate.Impl.MultiQueryImpl.List()
at NHibernate.Impl.FutureQueryBatch.GetResultsFrom(IMultiQuery multiApproach)
at NHibernate.Impl.FutureBatch`2.GetResults()
at NHibernate.Impl.FutureBatch`2.get_Results()
at NHibernate.Impl.FutureBatch`2.GetCurrentResult[TResult](Int32 currentIndex)
at NHibernate.Impl.FutureBatch`2.<>c__DisplayClass4`1.<GetEnumerator>b__3()
at NHibernate.Impl.DelayedEnumerator`1.<get_Enumerable>d__0.MoveNext()
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
at NovusERP.Data.Helpers.BatchedQuery`2.ToList() in D:\Short Utilities\Novus\NovusERP\NovusERP.Data\Helpers\BatchedQuery.cs:line 63
at NovusERP.Modules.Payroll.Attendance.AttendanceViewModel.GetEmployees(IList`1 selectedEmployeeIds) in D:\Short Utilities\Novus\NovusERP\NovusERP.Modules\Payroll\Attendance\AttendanceViewModel.cs:line 79
at NovusERP.Modules.Payroll.Attendance.AttendanceViewModel..ctor(MonthYear currentMonth, IList`1 selectedEmployeeIds) in D:\Short Utilities\Novus\NovusERP\NovusERP.Modules\Payroll\Attendance\AttendanceViewModel.cs:line 47
at NovusERP.Modules.Payroll.Attendance.AttendanceView..ctor(MonthYear currentMonth, IList`1 selectedEmployees) in D:\Short Utilities\Novus\NovusERP\NovusERP.Modules\Payroll\Attendance\AttendanceView.xaml.cs:line 18
at lambda_method(Closure , Object[] )
at Autofac.Core.Activators.Reflection.ConstructorParameterBinding.Instantiate() 
```

谁能指出我正确的方向？任何帮助将不胜感激。

问候，
约格什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:13:29.277

好吧，如果你想在不编译 expr1 的情况下制作 expr2，你不能只使用内置的编译器转换。这就是你想要的：

```
Expression<Func<IList<TValue>, TEntity, bool>> expr1 = (l, e) => l.Contains(e.Id);
ParameterExpression param = Expression.Parameter(typeof(TEntity), "e");
Expresssion<Func<TEntity, bool>> expr2 = Expression.Lambda<Func<TEntity, bool>>(Expression.Invoke(expr1, Expression.Constant(values), param), param); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:34:32.750

我发布我的答案，以便其他人可以从中受益。

做我想做的最好的方法是使用`ExpressionVisitor`并`Expression.Lambda`复制整个表达式并进行适当的更改。这个类是3/3.5中的一个内部类，所以如果你想在3/3.5中使用这个类，[这里](http://msdn.microsoft.com/en-us/library/bb882521%28v=vs.90%29.aspx?ppud=4)​​是这个类的完整实现。网上有很多相同的教程。

其次，任何想要获得解析和可视化表达式树的工具的人都应该`ExpressionTreeVisualizer`在 VS 2008 中获得示例。您必须将示例转换并编译为 .Net 4.0 的 VS 2010。[Patrick Smacchia 的这篇博](http://codebetter.com/patricksmacchia/2010/06/08/vs-2010-and-expression-tree-visualization/)文可以帮助您。

以上所有内容的一个侧面说明，即使按照我在此答案中解释的方式转换查询后，nhibernate 仍然会引发异常。仅当我尝试将查询转换为将来的查询然后对其进行评估时，才会发生这种情况。无需将查询转换为未来，它就可以正常工作。我正在寻找相同的解决方案。如果我发现它发生的原因以及解决方案是什么，我会相应地更新答案。

# solr - Score terms by field type in a document

> ID：11211098
> 
> 赞同：1
> 
> 时间：2012-06-26T15:46:50.170
> 
> 标签：solr

I'm indexing several different fields in a document using Apache SOLR 3.6\.

When I do a search for a term, SOLR returns all the occurrences of the term in each field. However, the same score for all the fields that the term occurred inside the text of the field does not change. For example if USC occurred in the title field, and in the contents field, they both get the same score.

Is there a way to index a document of different fields and have a weighted score based on the type of field within the document?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:32:01.070

使用 dismax 或 edismax 并将 qf（查询字段）参数设置为类似这样，以使标题比正文更重要。

`qf=title^3 body`

# javascript - How do I append a song to a currently playing playlist in a Spotify app?

> ID：11211106
> 
> 赞同：0
> 
> 时间：2012-06-26T15:47:18.630
> 
> 标签：javascript, spotify

I have a simple spotify (JS) app and I want to either:

*   Create a new playlist with the first track and play it, or
*   Append the song to the currently playing playlist

    ```
     var playlist = new models.Playlist();

     ...

     var search = new models.Search(query);

     search.observe(models.EVENT.CHANGE, function() {
        if (search.tracks.length) {
          var track = search.tracks[0];
          playlist.add(track);
          if (!models.player.playing) 
             models.player.play(track, playlist);
        }     
      });

      search.appendNext(); 
    ```

Shouldn't this simply append the new track to the existing playlist? (playlist is scoped higher up, and it is definitely not re-created each time).

Currently nothing happens when a track is playing.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:50:26.100

它确实有效，但播放列表视图需要很长时间才能呈现为更新。（尽管它会立即附加曲目 - 点击下一步可以看到）。但是，正如评论中所提到的，它在使用名称创建时不会播放播放列表，只会播放临时的并因此具有 URI 的播放列表。

# javascript - 根据点击的链接href显示/隐藏元素

> ID：11211109
> 
> 赞同：1
> 
> 时间：2012-06-26T15:47:30.047
> 
> 标签：javascript, html, css

我是 JavaScript 新手，实际上现在非常绝望

我有一个 HTML 文件：

1.  从 XML 文件中获取数据并将它们显示在各种 div 中（例如）
2.  这些 div 被类名隐藏（默认情况下）（class='box'）
3.  单击链接时，我将“href”传递给函数 showContent，删除 #，然后在文档中查找具有该 ID 的元素。
4.  然后我添加一个新的类名（'show'）——这样这个元素就会出现！

如果您运行代码，您将看到每次单击链接时都会显示一个新的 div...

所以目前的问题：

1.  用新的点击 ID 替换已经显示的 div，这样每次只显示一个 div。
2.  如何避免在每个标签中插入 onClick 事件 - 并使其更加自动化？

* * *

我的代码如下：

```
function showContent(obj)
{
var linkTo = obj.getAttribute("href");
var newlinkTo=linkTo.replace('#','');
//alert (newlinkTo);

document.getElementById(newlinkTo).innerHTML=" This is where the xml variable content should go";   
document.getElementById(newlinkTo).className += " Show";

return true;
}

<a href="#b0" onClick="return showContent(this);">
<div id="text_content"> link2 </div>
</a>

<a href="#b1" onClick="return showContent(this);">
<div id="text_content"> link 1 </div>
</a>

<div class='box' id='b0'> abstract content </div>
<div class='box' id='b1'> introduction content </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:39:04.460

我通常不喜欢在任何地方使用 jQuery，但是你可以这样做：

```
<a class='showContent' data='b0'/> 
```

你的js：

```
var selected;

$('a.showContent').on('click',function(e){
     var toShow = $(this).attr('data');
     if(selected!==undefined) selected.removeClass('Show');
     selected = $(div+'#'+toShow);
     selected.addClass('Show');
 }); 
```

不确定这是否是您想要的，但我想我会建议您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:48:54.583

没有jQuery，这种事情并不难做到。

我建议对 Javascript 激活的链接使用 hash-bang (#!)，以使其与其他可能的带有哈希的链接分开。（脚本在底部）

```
<div id="nav-links">

    <a href="#!b0">
    <div id="text_content"> link2 </div>
    </a>

    <a href="#!b1">
    <div id="text_content"> link 1 </div>
    </a>

</div>

<div class='box' id='b0'> abstract content </div>
<div class='box' id='b1'> introduction content </div>

<script type="text/javascript">

    var links = document.getElementById('nav-links').getElementsByTagName('a');
    for(var i = 0, link; link = links[i]; i++) {
        link.onclick = showContent;
        // Hide content divs by default
        getContentDiv(link).style.display = 'none';
    }
    // Show the first content div
    if(links.length > 0) showContent.apply(links[0]);

    var current;

    function showContent() {

        // hide old content
        if(current) current.style.display = 'none';

        current = getContentDiv(this);
        if(!current) return true;

        //current.innerHTML = "This is where the xml variable content should go";
        current.style.display = 'block';

        return true;

    }

    function getContentDiv(link) {

        var linkTo = link.getAttribute('href');

        // Make sure the link is meant to go to a div
        if(linkTo.substring(0, 2) != '#!') return;
        linkTo = linkTo.substring(2);

        return document.getElementById(linkTo);

    }

</script>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:23:56.800

有一种更清洁的方法可以做到这一点：

这只是我的简单示例，它可以比这更干净，但这适用于您的情况：

HTML：

```
<a href="#b0" id="b0-link" class="link" rel="b0">link b0</a>

<a href="#b1" id="b1-link" class="link" rel="b1">link b1</a>

<div class='box' id='b0'> abstract content </div>
<div class='box' id='b1'> introduction content </div>​​​​​​​​​ 
```

CSS：

```
#b0 { display: none; }

#b1 { display: none; }

a, div.text_content { display: inline; padding: 0 10px; } 
```

查询：

```
​$('.link').click(function(){
    var id = $(this).attr("rel");

    $('#'+id).slideToggle('slow');                      
}); 
```

​ 每个链接都必须具有与您尝试显示的 div 元素的 ID 相同的 REL 属性。

这是此示例的 JSFiddle：

[http://jsfiddle.net/CUJSM/5/](http://jsfiddle.net/CUJSM/5/)

# java - 项目在 NetBeans 上运行良好，但 .jar 出现错误

> ID：11211110
> 
> 赞同：1
> 
> 时间：2012-06-26T15:47:34.150
> 
> 标签：java, netbeans

我在 NetBeans 上运行我的项目，但无法成功运行 .jar 文件。1\. 我正在使用 Java 类库开发我的项目，后来发现清单文件中存在一些问题。. 2\. 然后为了解决上述问题，我创建了项目作为 JavaApplication 项目，现在清单看起来像这样

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.6.0_22-b22 (Sun Microsystems Inc.)
Class-Path: 
Main-Class: gameloftbraker.GameLoftBraker 
```

在终端上它抛出以下异常：

```
Exception in thread "main" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(ImageIcon.java:204)
    at gameloftbraker.Ball.<init>(Ball.java:26)
    at gameloftbraker.Arena.gameInit(Arena.java:71)
    at gameloftbraker.Arena.addNotify(Arena.java:67)
    at java.awt.Container.addNotify(Container.java:2584)
    at javax.swing.JComponent.addNotify(JComponent.java:4687)
    at java.awt.Container.addNotify(Container.java:2584)
    at javax.swing.JComponent.addNotify(JComponent.java:4687)
    at java.awt.Container.addNotify(Container.java:2584)
    at javax.swing.JComponent.addNotify(JComponent.java:4687)
    at javax.swing.JRootPane.addNotify(JRootPane.java:754)
    at java.awt.Container.addNotify(Container.java:2584)
    at java.awt.Window.addNotify(Window.java:707) 
```

提前感谢您的帮助。我希望我没有遗漏任何东西。代码没有问题，因为它构建并成功运行，如果需要代码，请告诉我。

Ball.java

```
////////////////
package gameloftbraker;

import javax.swing.ImageIcon;

public class Ball extends Graphc implements Commn {

    protected String ball = "../images/ball.png"; //address to ball graphic
    protected int xdir;      

    protected int ydir;

    public Ball(){  
        xdir =  2;
        ydir = -2;

        ImageIcon img = new ImageIcon(this.getClass().getResource(ball));
        image = img.getImage();

        height = image.getHeight(null);
        width = image.getWidth(null);

        resetState();
    }
// rest of the functions * it works perfectly as project but unable to run in .jar
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:50:03.387

如果您向我们展示 的代码`Ball`，突出显示堆栈跟踪中显示的行会有所帮助...但我的*猜测*是您没有将游戏的图形正确地捆绑到 jar 文件中。

需要指出的一件事：

> 代码没有问题，因为它构建并成功运行

那么它现在*没有*成功运行，是吗？*在一个*环境中成功构建和运行并不意味着代码没有问题。例如，您可以在其中包含任何其他机器上不存在的硬编码文件名 - 我并不是说这里确实*是*这种情况，我只是说“在我的机器上工作”不是证据代码没有问题。

编辑：现在我们可以看到您的代码，看起来`ball.png`可能不在 jar 文件中。*或者*问题是您`..`在资源名称中的使用。尝试将资源名称更改为：

```
// TODO: Make this private static final unless you have any reason not to...
protected String ball = "/images/ball.png"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:59:27.417

如果您想在 jar 之外使用数据（例如图片），请使用以下命令：

```
ImageIcon img = new ImageIcon(ball); 
```

在 IDE 运行时，您只有文件夹，所以它可以工作。在 jar 文件中，您必须保留 jar 文件，我认为您的方式不可能

# expression-blend - TriggerType Expression Blend 4

> ID：11211113
> 
> 赞同：0
> 
> 时间：2012-06-26T15:47:37.550
> 
> 标签：expression-blend, eventtrigger, expression-blend-4

I was wondering if it is possible to assign an eventtrigger to a source outside the current artboard.

Example: I have a text box that I want to slide out of one content presenter into another when a button is selected. I have it set up so the box slides out of one and I need to bind the box to slide into the new content presenter when the previous trigger was selected.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:30:17.200

你所描述的听起来很像 Blend SDK 中的 FluidMoveBehavior。这是一个更高级的 Blend 概念，但它非常时髦，当您将控件从一个容器移动到另一个容器时，它应该提供一个漂亮的动画。 [这是一个关于它的快速教程。](http://www.microsoft.com/design/toolbox/tutorials/fluidui/fluidmovemasterdetail.aspx)

# java - 如何配置 Spring 安全性以在 Virgo 上工作 - 使用注释？

> ID：11211114
> 
> 赞同：0
> 
> 时间：2012-06-26T15:47:37.927
> 
> 标签：java, spring, spring-security, spring-annotations

我在配置我的 web 应用程序以在 Virgo Tomcat 服务器上使用 Spring 安全性时遇到问题。我正在使用基于注释的配置 - 如果可能的话，我想保持使用注释。

下面显示包含错误消息的日志。

```
[2012-06-26 16:19:30.661] ERROR start-signalling-1           o.a.catalina.core.ContainerBase.[Catalina].[localhost].[/virgo]   Exception starting filter securityFilter org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'springSecurityFilterChain' is defined
at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:527)
at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1083)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:274)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079)
at org.springframework.web.filter.DelegatingFilterProxy.initDelegate(DelegatingFilterProxy.java:217)
at org.springframework.web.filter.DelegatingFilterProxy.initFilterBean(DelegatingFilterProxy.java:145)
at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:179)
at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
at org.eclipse.gemini.web.tomcat.internal.TomcatServletContainer.startWebApplication(TomcatServletContainer.java:122)
at org.eclipse.gemini.web.internal.StandardWebApplication.start(StandardWebApplication.java:91)
at org.eclipse.virgo.web.core.internal.WebBundleLifecycleListener.onStarted(WebBundleLifecycleListener.java:122)
at org.eclipse.virgo.kernel.install.artifact.internal.StandardArtifactStateMonitor.onStarted(StandardArtifactStateMonitor.java:247)
at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact.asyncStartSucceeded(AbstractInstallArtifact.java:294)
at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact.access$0(AbstractInstallArtifact.java:291)
at org.eclipse.virgo.kernel.install.artifact.internal.AbstractInstallArtifact$StateMonitorSignal.signalSuccessfulCompletion(AbstractInstallArtifact.java:229)
at org.eclipse.virgo.kernel.core.internal.BundleStartTracker$1.run(BundleStartTracker.java:143)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

我的 web.xml 文件如下

```
<?xml version="1.0" encoding="UTF-8"?>
 <web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- Java-based Spring container definition -->

<context-param>
    <param-name>contextClass</param-name>
    <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
</context-param>

<!-- Location of Java @Configuration classes that configure the components 
    that makeup this application -->

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>org.TSSG.social.statusnet.config</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value></param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<!-- Secures the application -->

<filter>
    <filter-name>securityFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>

    <init-param>
        <param-name>targetBeanName</param-name>
        <param-value>springSecurityFilterChain</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>securityFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Enables support for DELETE and PUT request methods with web browser 
    clients -->

<filter>
    <filter-name>hiddenHttpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>hiddenHttpMethodFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

给我带来麻烦的@Configuration 类包含以下代码

```
package org.TSSG.social.statusnet.config;
--imports removed ---
@Configuration
@ImportResource("classpath:org/TSSG/social/statusnet/config/security.xml")
public class SecurityConfig {

@Bean
public PasswordEncoder passwordEncoder() {
    return NoOpPasswordEncoder.getInstance();
}

@Bean
public TextEncryptor textEncryptor() {
    return Encryptors.noOpText();
} 
```

}

最后，我的 security.xml 包含以下内容。

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="http://www.springframework.org/schema/security                    
        http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/beans    
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

<http use-expressions="true">
    <!-- Authentication policy -->
    <form-login login-page="/signin" login-processing-url="/signin/authenticate" />
    <logout logout-url="/signout" delete-cookies="JSESSIONID" />
    <intercept-url pattern="/favicon.ico" access="permitAll" />
    <intercept-url pattern="/resources/**" access="permitAll" />
    <intercept-url pattern="/signin/**" access="permitAll" />
    <intercept-url pattern="/signup/**" access="permitAll" />
    <intercept-url pattern="/**" access="isAuthenticated()"  />
</http>

<authentication-manager alias="authenticationManager">
    <authentication-provider>
        <password-encoder ref="passwordEncoder" />
        <jdbc-user-service data-source-ref="dataSource" 
                           users-by-username-query="select username, password, true from Account where username = ?"
                           authorities-by-username-query="select username, 'ROLE_USER' from Account where username = ?"/>
    </authentication-provider>
</authentication-manager> 
```

只是添加一个快速说明，我的应用程序在 Apache Tomcat 上运行完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:20:43.193

在查看了我的构建（使用 maven）之后。我的目录结构错误，因此没有正确获取 WEB-INF/lib 的依赖关系。

问题现已解决并正常工作！

# ibm-midrange - Repeated prompt for user name and password when accessing AS400 IFS under Windows XP using map network drive

> ID：11211116
> 
> 赞同：2
> 
> 时间：2012-06-26T15:47:43.120
> 
> 标签：ibm-midrange, network-drive

I was trying to access the IFS using map network drive. It prompted the dialog asking for user name and password. But after I had entered them and pressed enter the same dialog appeared again. No matter how many times I press enter it kept prompting the same dialog and it did not suggest that the information was incorrect. I could use another user profile to access this IFS without the above problem. Someone else was able to map drive it a few days ago and now it is not working. I had asked another colleague to try the same and the same problem occurred as well. So what could be the cause of this issue?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:33:19.747

我已经看到当用户名与 AS/400 用户名相同但密码不同时会发生这种情况。如果存在使用不同凭证到 AS/400 的现有映射，也会发生这种情况。

我发现映射驱动器的最简单方法是使用命令提示符并指定用户名和密码：

```
NET USE Z: \\<ip address or host name>\<share> 
  /USER:<username> <password> /PERSISTENT:YES 
```

该`/PERSISTENT:YES`选项将在重新启动后保留地图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T19:57:15.583

除了 James 的回答之外，要检查的其他内容是查看用户配置文件是否已在 NetServer 服务器中被禁用。这与普通禁用不同。

要查明是否是这种情况，请从您的桌面打开 System i Navigator。然后展开目标 AS/400->Network->Servers->TCP/IP。右键单击 I5/OS NetServer 并选择“禁用的用户 ID”。

如果您在 iSeries Navigator 中没有 Network 选项，那么另一种简单的测试方法是作为目标用户登录到绿屏并从命令行运行 CHGPRF。然后尝试再次连接。如果密码有问题，您将在 QSYSOPR 消息中看到一条消息，指示用户已被禁止访问 NetServer。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T14:56:38.780

当用户使用混合大小写密码并且 IBMi (AS400) 未配置为混合大小写时，我遇到了这种情况，请参阅[此 IBM techdoc](http://www.google.com/url?sa=t&rct=j&q=IBM+Technical+document+30470547+NetServer&source=web&cd=1&ved=0CE8QFjAA&url=http%3A%2F%2Fwww-912.ibm.com%2Fs_dir%2FSLKBase.nsf%2F1ac66549a21402188625680b0002037e%2F174df98118c23ad886256d200058825b%3FOpenDocument)。它包括一些“特殊”映射技术，当我在重新提示凭据时遇到问题时，我也发现这些技术很有用。您可能还想查看有关 NetServer 映射和 Windows 7 的[IBM TechDoc 。](http://www-912.ibm.com/s_dir/SLKBase.nsf/1ac66549a21402188625680b0002037e/5197341657f9f57e86257655005736ff?OpenDocument)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:50:29.500

我自己得到了这个，我很确定这背后有一个权威问题。我不能用我自己的用户映射一个驱动器，但我可以用一个 *SECOFR-class 一个。我必须很少这样做，以至于我没有费心去深入了解它，但希望这对其他人有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-15T13:33:06.737

我有**一个不同但可能相关的问题**。我使用**Windows 7**和**Apple Time Capsule**在网络上，由与我在 Win 7 上的密码不同的密码保护。重要的是时间胶囊只需要密码而不需要用户名（我有一段时间没有意识到这一点）。当我尝试连接到 Time Capsule 时，它​​反复要求输入用户名和密码。仅密码是不够的，所以我用 Time Capsule 的密码输入了我的 Win 7 用户名。几次尝试后，建立了连接，但有时需要多次尝试。我无法意识到问题出在哪里。经过一番研究，我意识到问题可能是系统混淆了用于同一用户名的两个密码。也许它不知道将哪个密码发送到 Time Capsule 或类似的东西。由于 Time Capsule 实际上不需要用户名（只有密码），但 Win 7 不允许用户名为空，所以我开始使用正确的 Time Capsule 密码输入无意义的用户名（例如“xxxx”）。这已经解决了问题，现在可以正常工作，甚至记住用户名/密码组合。所以问题很简单，我在 Win 7 和 Time Capsule 中使用了相同的用户名和两个不同的密码，这让系统感到困惑。

# magento - 'Proceed to Checkout' Event for Magento?

> ID：11211119
> 
> 赞同：7
> 
> 时间：2012-06-26T15:47:44.850
> 
> 标签：magento

I've just started putting together a Magento module which bypasses the whole Magento checkout process and instead sends the cart details to a 3rd party fulfilment company via XML-RPC.

Not getting anywhere fast and could use a bit of guidance. My understanding is that I should create the module with an observer based on the event triggered by proceeding to checkout. Trouble is I can't work out which event that would be, I've been through the whole massive list here;

[http://www.nicksays.co.uk/magento_events_cheat_sheet/](http://www.nicksays.co.uk/magento_events_cheat_sheet/)

I've tried;

checkout_submit_all_after - fires after order processed successfully

checkout_cart_add_product_complete - fires after product added to cart

checkout_cart_save_before - fires after product added to cart

checkout_type_onepage_save_order - can't get this to fire at all

checkout_onepage_controller_success_action - fires after order processed successfully

I don't know if this means I'll have to create a custom event or if there is an entirely different and much better alternative to what I'm doing. Building and sending the XML I will leave to another question (starting to realise I may have my hands pretty full here) but any tips there gratefully appreciated too.

Thanks for any help.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-26T21:59:03.887

`controller_action_predispatch_checkout_onepage_index`应该是您要查找的事件。所有控制器都继承了 preDispatch 方法，该方法会为 predispatch 触发一个通用事件，以及基于请求的操作路径的特定事件。您想要的控制器位于模块中，并使用默认操作`checkout`调用。`onepage``index`

查看`Mage_Core_Controller_Varien_Action::preDispatch()`相关代码

# javascript - 用于跟踪用户点击以生成热图的 JavaScript 库或代码

> ID：11211126
> 
> 赞同：3
> 
> 时间：2012-06-26T15:48:09.077
> 
> 标签：javascript, heatmap

是否有任何 JS 库或代码可用于跟踪用户点击？我们将使用它来使用 Heatmap.js 生成热图。

这个 JS 库/代码应该适用于**固定和流动的 CSS 布局、跨浏览器和不同的屏幕分辨率**。

我们尝试了一些简单的跟踪代码，但它没有针对不同的屏幕分辨率和布局正确跟踪点击位置。

我只是想检查一下这样的事情是否已经实施，这样我们就可以避免重新发明轮子并节省时间。

非常感谢任何帮助、链接、建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-03T09:04:25.410

我今天发现这个网站正在寻找同样的东西：www.crazyegg.com 但是我认为你应该“购买”他们的服务，而不是仅仅导入一个 .js。

# php - 数据库 $_GET 中零星的不需要的空条目

> ID：11211127
> 
> 赞同：1
> 
> 时间：2012-06-26T15:48:10.243
> 
> 标签：php, sql, ajax, sqlite, null

我有一个小的温度协议网络应用程序，可以在页面上调整度数并保存在数据库中。

它可以工作，但有时用户会出现我无法重现的零星错误！

**有时数据库中有空条目，我不知道如何以及为什么。它将孔排“归零”（每天可以选择几个温度）。**

例如，如果在 div 字符串“NA”中没有选择任何温度，则应将其交给数据库。这个虫子太有弹性了，我不知道还能去哪里。

*Ajax 通过单击箭头来增加值*

```
$(".arrow_up").die('click');        
$(".arrow_up").live('click',function() {
    var value = $("#temp_"+this.id).html();
    if (value=="NA") {value=$("#istemp_"+this.id).html()}
            var newValue = parseInt(value)+ 1; 
```

*将值交给服务器*

```
$(document).ready(function() {
$('#save').die('click');                       
$("#save").live('click',function() {
    var tempA=$("#temp_itemA").html();
    var tempB=$("#temp_itemB").html(); 
```

*PHP必须存储它*

我看看它是否不为空，也不是字符串 null 被移交。最后一个抛出错误。

```
<?php
    if((!isset($_GET['tempA'])) || (!isset($_GET['tempB'])) || ($_GET['tempA']!='null')
      {
        echo "values are missing";
      }
    else 
    {
    error_reporting(E_ALL);
    try {
        $dbh = new PDO('sqlite:/var/www/xxx.sqlite');
        $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

    $date=date("Y-m-d",time());
    $sql = "SELECT * FROM tableTemp WHERE date='".$date."'";    
    $result = $dbh->query($sql);
    foreach($result as $row) {
        $id = $row['id'];
    }

    if (!empty($id)) {
        $sql = "UPDATE tableTemp SET tempA='".$_GET['tempA']."',tempB='".$_GET['tempB']"'";
        $result = $dbh->query($sql);
    }

    else {
        $sql = "INSERT INTO tableTemp ('tempA','tempB')";
        $result = $dbh->query($sql)
?> 
```

我的意思是，这很简单。我只能想象传输错误可能与WIFI和丢包有关。

**我怎样才能停止将这些讨厌的空字符串插入（丢弃）到数据库中并抛出错误，以便用户必须再试一次？我的 !isset 不工作，因为它不是空的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:50:48.930

请注意，这可能是在说明显而易见的

但是你能不能规定数据库中的列需要一个不为空的值，然后在插入时捕获错误

你看过这个答案吗？

[https://stackoverflow.com/a/2103256/1479565](https://stackoverflow.com/a/2103256/1479565)

# vba - 代码在第一次后停止执行，没有错误

> ID：11211128
> 
> 赞同：0
> 
> 时间：2012-06-26T15:48:14.803
> 
> 标签：vba, excel

我在 Excel 中做一个小应用程序，当用户单击用户窗体中的按钮时，我有以下代码

```
Private Sub SubmitNuevo_Click()
    Call FindNextEmptyRow 'after this nextEmptyCell has a Range object
    Dim currCell As Range
    Set currCell = nextEmptyCell.Cells(1, 1)
    Dim s() As String
    s = Split("macro,name,area,dept,model,range,prior,found", ",")
    currCell.Value = Date
    For i = 0 To UBound(s)
        currCell.Offset(0, dict.Item(s(i)) - 1).Value = Me.Controls(s(i) & "Nuevo").Text
    Next
End Sub 
```

当我刚刚打开工作簿并运行它时，它工作正常，用来自 TextBoxes 的值填充工作表的一行，但是如果我尝试运行它更多次，它会执行`currCell.Value = Date`然后停止执行而没有错误或任何东西。如果我重新打开工作簿，它在我第一次尝试运行它时工作正常，但随后每次尝试都失败。

有什么想法可能在这里发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:47:07.843

每次单击按钮后保存工作簿可解决问题。刚刚添加

```
ActiveWorkbook.Save 
```

之前`End Sub`。

# .net - 序列化和反序列化

> ID：11211132
> 
> 赞同：0
> 
> 时间：2012-06-26T15:48:19.687
> 
> 标签：.net, serialization

我已经使用[http://www.codeproject.com/Articles/10429/Convert-XML-data-to-object-and-back-using-serializ](http://www.codeproject.com/Articles/10429/Convert-XML-data-to-object-and-back-using-serializ)作为建议的基础序列化了一个对象并获得了 XML。我将 XML 存储在 2008 数据库的文本字段中。当我反序列化它时，我得到 InvalidOperationException。有没有人有过反序列化一个对象并首先发现它被严重序列化的经验？

```
public static Request ToObject(string xml)
    {
        StringReader stream = null;
        XmlTextReader reader = null;
        try
        {
            // serialise to object
            XmlSerializer serializer = new XmlSerializer(typeof(Request));
            stream = new StringReader(xml); // read xml data
            reader = new XmlTextReader(stream);  // create reader
            // covert reader to object
            return (Request)serializer.Deserialize(reader);
        }
        catch
        {
            return null;
        }
        finally
        {
            if (stream != null) stream.Close();
            if (reader != null) reader.Close();
        }
    }

    public static string ToXML(Request oRequest)
    {
        MemoryStream stream = null;
        TextWriter writer = null;
        try
        {
            stream = new MemoryStream(); // read xml in memory
            writer = new StreamWriter(stream, Encoding.Unicode);
            // get serialise object
            XmlSerializer serializer = new XmlSerializer(typeof(Request));
            serializer.Serialize(writer, oRequest); // read object
            int count = (int)stream.Length; // saves object in memory stream
            byte[] arr = new byte[count];
            stream.Seek(0, SeekOrigin.Begin);
            // copy stream contents in byte array
            stream.Read(arr, 0, count);
            UnicodeEncoding utf = new UnicodeEncoding(); // convert byte array to string
            return utf.GetString(arr).Trim();
        }
        catch
        {
            return string.Empty;
        }
        finally
        {
            if (stream != null) stream.Close();
            if (writer != null) writer.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:30:06.723

[这](https://stackoverflow.com/questions/310669/why-does-c-sharp-xmldocument-loadxmlstring-fail-when-an-xml-header-is-included)应该回答你的问题。

简而言之，您使用 Unicode 进行序列化，而不是反序列化。

所以你的解决方法是 - 在 ToObject 方法中，更改：

```
MemoryStream stream;
stream = new MemoryStream(Encoding.Unicode.GetBytes(xml)); 
```

# plone - 如何从 Plone 的渲染器中获取 portlet 的“种类”（组/上下文/类型）

> ID：11211134
> 
> 赞同：1
> 
> 时间：2012-06-26T15:48:39.043
> 
> 标签：plone

上下文：我想构建一个 URL 来遍历当前的 portlet，以提供呈现特定数据的外部视图。

真实用例：我正在做一个视频播放器，它等待 URL 作为参数来获取视频字幕。字幕存储在 schema.Text 字段中。所以目标是创建一个视图来显示这些数据；就像是：

```
 /++contextportlets++plone.rightcolumn/test-video/@@video_captions 
```

所以我在 python 代码渲染器中，我想从中构建那个 URL。（自己是渲染器）我需要：

*   上下文、类型、组中的 portlet 类型
*   经理姓名（self.manager.name**做**的工作）
*   portlet id（self.data.id 完成这项工作）

所以问题是我如何从它的渲染器中获得那种portlet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:32:21.573

Portlet 类别仅可从 Portlet 检索器获得。您可以通过循环`getPortlets`检索器的方法来查找它。由于方法返回的信息涉及分配，因此您需要 portlet 分配（`.data`在渲染器上），以选择正确的条目：

```
from zope.component import getMultiAdapter
from plone.portlets.interfaces import IPortletRetriever

# This assumes you have the portlet context and manager as attributes of self,
# like in the renderer:
retriever = getMultiAdapter((self.context, self.manager), IPortletRetriever)
for info in retriever.getPortlets():
     if info['assignment'] is self.data:
          return info['category'] 
```

# c# - CreateBufferedCopy 是否将流位置留在最后？

> ID：11211135
> 
> 赞同：1
> 
> 时间：2012-06-26T15:48:39.077
> 
> 标签：c#, wcf, idispatchmessageinspector

在`AfterReceiveRequest`方法中，如果我这样做：

```
MessageBuffer buffer = request.CreateBufferedCopy(int.MaxValue);
Message requestCopy = buffer.CreateMessage();

//handle message stuff here

request = newMessage;
buffer.Close(); 
```

以上是否将流的位置留在最后？基本上我要问的是在再次读取请求时创建缓冲副本会导致任何问题吗？

这就是我遇到这种情况的方式，在消息检查器中，我最初没有创建缓冲副本，但后来我遇到了错误消息，向服务发送请求并在线研究后，请求已经被读取，我发现我需要创建消息的副本，我只是想确保这不会导致位置或其他任何问题？

我想通过创建要在消息检查器中使用的副本，我不会两次阅读该消息，该副本被读取一次以进行日志记录，当它被分配给 ref 参数时，当我调用该服务时使用该副本， 正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:24:52.987

为了多次重用消息，您必须创建它的内存副本。为此，请使用消息对象实例的 CreateBufferCopy。调用此方法不会改变您的消息状态。

> 以上是否将流的位置留在最后？不适用于此类流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T14:31:29.713

这是我在项目中使用它的方式。它显示了如何在 BeforeSendReply 方法中正确地复制消息。不是您要使用的方法，但应该应用相同的代码：

```
 public void BeforeSendReply(ref Message reply, object correlationState)
    {
        var properties = reply.Properties;
        var contextKey = GetContextKey(properties);
        bool statusCodeFound = false;
        var statusCode = HttpStatusCode.OK;
        if (properties.Keys.Contains("httpResponse"))
        {
            statusCode = ((System.ServiceModel.Channels.HttpResponseMessageProperty)properties["httpResponse"]).StatusCode;
            statusCodeFound = true;
        }
        var buffer = reply.CreateBufferedCopy(int.MaxValue);

        //Must use a buffer rather than the origonal message, because the Message's body can be processed only once.
        Message msg = buffer.CreateMessage();

        //Setup StringWriter to use as input for our StreamWriter
        //This is needed in order to capture the body of the message, because the body is streamed.
        StringWriter stringWriter = new StringWriter();
        XmlTextWriter xmlTextWriter = new XmlTextWriter(stringWriter);
        msg.WriteMessage(xmlTextWriter);
        xmlTextWriter.Flush();
        xmlTextWriter.Close();

        var returnValue = stringWriter.ToString();

        // I do my logging of the "returnValue" variable here. You can do whatever you want.

        //Return copy of origonal message with unaltered State
        reply = buffer.CreateMessage();
    } 
```

# xml - 使用 xslt 将 xml 转换为管道分隔的文本文件，在每条记录之后放置额外的行

> ID：11211139
> 
> 赞同：1
> 
> 时间：2012-06-26T15:48:46.123
> 
> 标签：xml, xslt

我有 xslt 将 xml 文件转换为逗号分隔的文件，但是在每条记录之后它都会创建额外的行。

我试过放，但没有用。任何可以提供帮助的帮助或链接将不胜感激。

资源：

```
<XML>
<Record><GroupId>2001</GroupId><Date>05-May-2012</Date><Time>10:20:38</Time><TxnId>267-2001-1-29555-2</TxnId><AgencyID>OrdinaryAccountWithdraw</AgencyID><AccTechAgencyType>Out Payment</AccTechAgencyType><AccTechAgencyAmount>30000</AccTechAgencyAmount><CustomerRef>703589491001</CustomerRef></Record>
<Record><GroupId>2001</GroupId><Date>05-May-2012</Date><Time>13:21:50</Time><TxnId>267-2001-1-29694-2</TxnId><AgencyID>SpecialAccountWithdraw</AgencyID><AccTechAgencyType>Out Payment</AccTechAgencyType><AccTechAgencyAmount>20000</AccTechAgencyAmount><CustomerRef>703677841501</CustomerRef></Record>
<Record><GroupId>2001</GroupId><Date>07-May-2012</Date><Time>10:10:08</Time><TxnId>267-2001-1-29780-2</TxnId><AgencyID>InPay_FuneralPlan</AgencyID><AccTechAgencyType>In Payment</AccTechAgencyType><AccTechAgencyAmount>5000</AccTechAgencyAmount><CustomerRef>MP007235</CustomerRef></Record>
<Record><GroupId>2001</GroupId><Date>07-May-2012</Date><Time>10:15:36</Time><TxnId>267-2001-1-29786-2</TxnId><AgencyID>SpecialAccountWithdraw</AgencyID><AccTechAgencyType>Out Payment</AccTechAgencyType><AccTechAgencyAmount>30000</AccTechAgencyAmount><CustomerRef>703690771501</CustomerRef></Record>
<Record><GroupId>2001</GroupId><Date>07-May-2012</Date><Time>10:27:42</Time><TxnId>267-2001-1-29798-3</TxnId><AgencyID>SpecialAccountDeposit</AgencyID><AccTechAgencyType>In Payment</AccTechAgencyType><AccTechAgencyAmount>50000</AccTechAgencyAmount><CustomerRef>703437751501</CustomerRef></Record>
</XML> 
```

xslt：

```
<?xml version='1.0' ?> <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:msxsl="urn:schemas-microsoft-com:xslt"   xmlns:user="http://mycompany.com/mynamespace"> <xsl:output method="text"/>
      <xsl:strip-space elements="*"/>
      <xsl:template name="format-date">
<xsl:param name="AGDateValue">01-Jan-2000</xsl:param>
<xsl:value-of select="substring($AGDateValue, 8, 4)"/>
<xsl:choose>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Jan'">01</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Feb'">02</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Mar'">03</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Apr'">04</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'May'">05</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Jun'">06</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Jul'">07</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Aug'">08</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Sep'">09</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Oct'">10</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Nov'">11</xsl:when>
    <xsl:when test="substring($AGDateValue, 4, 3) = 'Dec'">12</xsl:when>
    <xsl:otherwise>00</xsl:otherwise>
</xsl:choose>
<xsl:value-of select="substring($AGDateValue, 1, 2)"/>
</xsl:template>
<xsl:template name="format-time">
<xsl:param name="AGTimeValue">12:12:12</xsl:param>
<xsl:text>T</xsl:text>
<xsl:value-of select="substring($AGTimeValue, 1, 2)"/>
<xsl:value-of select="substring($AGTimeValue, 4, 2)"/>
</xsl:template>
<xsl:template match="/">
<xsl:for-each select="/XML/Record">
      <xsl:value-of select="GroupId" />      
      <xsl:text>|</xsl:text>
      <xsl:call-template name="format-date"><xsl:with-param name="AGDateValue" select="Date" /></xsl:call-template>
      <xsl:call-template name="format-time"><xsl:with-param name="AGTimeValue" select="Time" /></xsl:call-template>
      <xsl:text>|</xsl:text>
      <xsl:value-of select="AgencyID" />
      <xsl:text>|</xsl:text>
      <xsl:value-of select="AccTechAgencyType" />
      <xsl:text>|</xsl:text>
      <xsl:value-of select="CustomerRef" />
      <xsl:text>|</xsl:text>
      <xsl:text>|</xsl:text>
      <xsl:value-of select="TxnId" />
      <xsl:text>|</xsl:text>
      <xsl:value-of select="format-number(AccTechAgencyAmount*0.01,'0.00')" />
  <xsl:text>&#xD;</xsl:text>         
</xsl:for-each>
</xsl:template> 
</xsl:stylesheet> 
```

输出：

```
2001|20120505T1020|OrdinaryAccountWithdraw|Out Payment|703589||267-2001-1-29555-2|300.00

2001|20120505T1321|SpecialAccountWithdraw|Out Payment|703677||267-2001-1-29694-2|200.00

2001|20120507T1010|InPay_FuneralPlan|In Payment|MP00723||267-2001-1-29780-2|50.00

2001|20120507T1015|SpecialAccountWithdraw|Out Payment|703690||267-2001-1-29786-2|300.00

2001|20120507T1027|SpecialAccountDeposit|In Payment|7034377||267-2001-1-29798-3|500.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:26:25.293

试试这个更简洁的版本......

```
<xsl:stylesheet version="1.0" 
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>
<xsl:strip-space elements="*"/>

<!-- Configure $new-line below as your require for your text file format type. -->
<xsl:variable name="new-line" select="'&#x0A;'" /> 
<!-- An alternative configuration is '&#x0D;&#x0A;' --> 

<xsl:template name="format-date">
 <xsl:param name="AGDateValue" select="'01-Jan-2000'" />
 <xsl:value-of select="substring($AGDateValue, 8, 4)"/>
  <xsl:variable name="month" select="substring($AGDateValue, 4, 3)" />
  <xsl:value-of select="format-number(
          translate( $month, 'nFrylgSONDJaebMApupctov', '00240107666') +
          translate( $month, 'aFpugONDJnebMrAyluSctovc', '12268456'), '00')" />
   <xsl:value-of select="substring($AGDateValue, 1, 2)"/>
</xsl:template>

<xsl:template name="format-time">
 <xsl:param name="AGTimeValue" select="'12:12:12'" />
 <xsl:text>T</xsl:text>
 <xsl:value-of select="substring($AGTimeValue, 1, 2)" />
 <xsl:value-of select="substring($AGTimeValue, 4, 2)" />
</xsl:template>

<xsl:template match="/">
  <xsl:apply-templates select="/XML/Record"/>
</xsl:template>

<xsl:template match="Record">
  <xsl:value-of select="concat(GroupId,'|')" />      
  <xsl:call-template name="format-date"><xsl:with-param name="AGDateValue" select="Date" /></xsl:call-template>
  <xsl:call-template name="format-time"><xsl:with-param name="AGTimeValue" select="Time" /></xsl:call-template>
  <xsl:value-of select="concat('|',AgencyID,'|',AccTechAgencyType,'|',CustomerRef,'||',TxnId,'|')" />
  <xsl:value-of select="format-number(AccTechAgencyAmount*0.01,'0.00')" />
  <xsl:value-of select="$new-line" />         
</xsl:template> 

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:35:21.253

在 XSLT 文件中添加换行符最简单，如下所示：

```
 <xsl:text>hello world</xsl:text>
      <xsl:text>
</xsl:text> 
```

# 测试

我对上面的测试数据进行了转换：

```
xsltproc convert.xsl data.xml > output.txt 
```

## 转换.xsl

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:user="http://mycompany.com/mynamespace" version="1.0">

  <xsl:output method="text"/>
  <xsl:strip-space elements="*"/>

  <xsl:template name="format-date">
    <xsl:param name="AGDateValue">01-Jan-2000</xsl:param>
    <xsl:value-of select="substring($AGDateValue, 8, 4)"/>
    <xsl:choose>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Jan'">01</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Feb'">02</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Mar'">03</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Apr'">04</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'May'">05</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Jun'">06</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Jul'">07</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Aug'">08</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Sep'">09</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Oct'">10</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Nov'">11</xsl:when>
      <xsl:when test="substring($AGDateValue, 4, 3) = 'Dec'">12</xsl:when>
      <xsl:otherwise>00</xsl:otherwise>
    </xsl:choose>
    <xsl:value-of select="substring($AGDateValue, 1, 2)"/>
  </xsl:template>

  <xsl:template name="format-time">
    <xsl:param name="AGTimeValue">12:12:12</xsl:param>
    <xsl:text>T</xsl:text>
    <xsl:value-of select="substring($AGTimeValue, 1, 2)"/>
    <xsl:value-of select="substring($AGTimeValue, 4, 2)"/>
  </xsl:template>

  <xsl:template match="/">
    <xsl:for-each select="/XML/Record">
      <xsl:value-of select="GroupId"/>
      <xsl:text>|</xsl:text>
      <xsl:call-template name="format-date">
        <xsl:with-param name="AGDateValue" select="Date"/>
      </xsl:call-template>
      <xsl:call-template name="format-time">
        <xsl:with-param name="AGTimeValue" select="Time"/>
      </xsl:call-template>
      <xsl:text>|</xsl:text>
      <xsl:value-of select="AgencyID"/>
      <xsl:text>|</xsl:text>
      <xsl:value-of select="AccTechAgencyType"/>
      <xsl:text>|</xsl:text>
      <xsl:value-of select="CustomerRef"/>
      <xsl:text>|</xsl:text>
      <xsl:text>|</xsl:text>
      <xsl:value-of select="TxnId"/>
      <xsl:text>|</xsl:text>
      <xsl:value-of select="format-number(AccTechAgencyAmount*0.01,'0.00')"/>
      <xsl:text>
</xsl:text>
    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

## 输出.txt

```
2001|20120505T1020|OrdinaryAccountWithdraw|Out Payment|703589491001||267-2001-1-29555-2|300.00
2001|20120505T1321|SpecialAccountWithdraw|Out Payment|703677841501||267-2001-1-29694-2|200.00
2001|20120507T1010|InPay_FuneralPlan|In Payment|MP007235||267-2001-1-29780-2|50.00
2001|20120507T1015|SpecialAccountWithdraw|Out Payment|703690771501||267-2001-1-29786-2|300.00
2001|20120507T1027|SpecialAccountDeposit|In Payment|703437751501||267-2001-1-29798-3|500.00 
```

# android - 蓝牙适配器禁用功能不起作用

> ID：11211145
> 
> 赞同：2
> 
> 时间：2012-06-26T15:49:11.710
> 
> 标签：android

蓝牙适配器打开时应禁用。这是我写的代码。要禁用我已成功使用的wifi，

```
@Override
    public void onReceive(Context context, Intent intent) {
        WifiManager wifiManager = (WifiManager) context
                .getSystemService(Context.WIFI_SERVICE);
        if (wifiManager.getWifiState() == WifiManager.WIFI_STATE_ENABLED) {
            wifiManager.setWifiEnabled(false);
        }
        BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if (mBluetoothAdapter.isEnabled()){
            mBluetoothAdapter.disable();
        }
    } 
```

清单定义如下

```
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.UPDATE_DEVICE_STATS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

# biztalk - 无需编排即可路由/过滤消息

> ID：11211146
> 
> 赞同：1
> 
> 时间：2012-06-26T15:49:14.163
> 
> 标签：biztalk, biztalk-2010

我们的许多 Biztalk 用例都涉及简单地将 HL7 2.x 消息从一个系统映射和路由到另一个系统。实现映射并将它们与发送/接收端口相关联通常很简单，但我们还需要在发送端进行一些基于内容的过滤。

例如，如果发送设施是任意 200 个设施（我们组织中可能有 1000 个设施），我们可能只想向系统 X 发送 ADT A04 和 ADT A08 消息，但系统 Y 需要 ADT A04、A05、A8对于一套完全不同的设施，仅适用于肾病患者。

因为我们只是在这里路由消息而不是真正管理业务流程，所以在这里使用编排来调用业务规则引擎有点矫枉过正，特别是考虑到我们可能需要为每种 ADT 类型单独编排因为模式是如何工作的。是否可以在不使用编排的情况下实现这样的过滤规则？发送端口的过滤器功能对于我们需要的东西来说看起来有点过于初级，但同时我宁愿不开发和管理编排。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:28:41.867

您也许可以使用属性模式来做到这一点......

您需要创建一个属性架构并包括要用于路由的属性（来自其他架构）。部署架构后，这些属性将可用作发送端口中的过滤器。从[这里](http://msdn.microsoft.com/en-us/library/aa561059.aspx)开始，您应该可以在某处找到示例...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-22T03:32:00.873

正如其他人建议的那样，您可以使用自定义管道组件来调用业务规则引擎。

与其尝试创建自己的，不如说已经有一个可用的开源版本，称为[BizTalk 业务规则引擎管道框架](https://brepipelineframework.codeplex.com/)

通过从管道调用 BRE，您可以创建复杂的规则，然后设置简单的上下文属性，您可以在这些属性上路由您的消息。

全面披露：当我们都在同一家公司时，我曾与该框架的作者一起工作。

# c# - WPF Binding to an inherited value

> ID：11211153
> 
> 赞同：0
> 
> 时间：2012-06-26T15:49:37.253
> 
> 标签：c#, wpf, xaml

I'm trying to bind the visibility flags of a pair of grids, however they appear to be ignoring my attempts. Any help would be appreciated. Thanks!

This is in my screens xaml:

```
<Grid Name="grdNotifLogo" Style="{StaticResource insightLogoNotify}" Visibility="{Binding Path=_notifVisibility, Mode=OneWay}" MouseDown="grdNotifLogo_MouseDown"/>
<Grid Name="grdMainLogo" Style="{StaticResource insightLogo}" Visibility="{Binding Path=_logoVisibility, Mode=OneWay}"/> 
```

The screens xaml.cs file inherits a window base class, which has this:

```
protected Visibility _logoVisibility = _ Visibility.Visible;
protected Visibility _notifVisibility = _ Visibility.Collapsed;
public bool NotificationIconEnabled
{
    get { return _notifVisibility == Visibility.Visible; }
    set
    {
        if (value)
        {
            _logoVisibility = Visibility.Collapsed;
            _notifVisibility = Visibility.Visible;
        }
        else
        {
            _logoVisibility = Visibility.Visible;
            _notifVisibility = Visibility.Collapsed;
        }
    }
} 
```

The data context is also setup to the grid which holds my grids of interest:

```
 ToolBar.DataContext = this; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:48:05.530

Yeah between Ryan, Adam and Tigran you have your answer. In code the full solution would look something like the sample below. Note that when you use the "Binding" keyword you are trying to access properties off the data context of your control. That is why you have to set the "DataContext" property of your control to a class that has those properties. As Ryan notes the properties must also be public, otherwise you won't be able to bind to them. Finally as Adam notes you have to use the INotifyPropertyChanged interface to communicate changes in the properties on your view-model object to your control.

So the XAML is tweaked to point at the new public property names:

```
<Grid Name="grdNotifLogo" Style="{StaticResource insightLogoNotify}" Visibility="{Binding NotificationVisibility}" MouseDown="grdNotifLogo_MouseDown"/>
<Grid Name="grdMainLogo" Style="{StaticResource insightLogo}" Visibility="{Binding LogoVisibility}"/> 
```

Set the data context of your control:

```
class MyControl : UserControl
{
    public MyControl()
    {
        InitializeComponent();
        this.DataContext = new MyViewModel();
    }
} 
```

Create a new view-model class to set as your data context:

```
class MyViewModel : INotifyPropertyChanged
{
    private Visibility _logoVisibility = Visibility.Visible;
    private Visibility _notifVisibility = Visibility.Collapsed;

    public Visibility LogoVisibility
    {
        get { return _logoVisibility; }
    }

    public Visibility NotificationVisibility
    {
        get { return _notifVisibility; }
    }

    public bool NotificationIconEnabled
    {
        get { return _notifVisibility == Visibility.Visible; }
        set
        {
            if (value)
            {
                _logoVisibility = Visibility.Collapsed;
                _notifVisibility = Visibility.Visible;
            }
            else
            {
                _logoVisibility = Visibility.Visible;
                _notifVisibility = Visibility.Collapsed;
            }
            OnPropertyChanged("LogoVisibility");
            OnPropertyChanged("NotificationVisibility");
        }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion // INotifyPropertyChanged Members
} 
```

# java - 使用 java.net.HttpURLConnection 设置 TCP_NODELAY

> ID：11211155
> 
> 赞同：1
> 
> 时间：2012-06-26T15:49:41.367
> 
> 标签：java, http, networking

发送HTTP Get请求时在java代码中设置TCP_NODELAY会有用吗？我们如何设置 TCP_NODELAY `java.net.HttpURLConnection`？

# jquery - 仅在单击元素后将单击处理程序绑定到正文

> ID：11211156
> 
> 赞同：1
> 
> 时间：2012-06-26T15:49:43.587
> 
> 标签：jquery

我有一个关于 jquery 的非常概念性的问题。我有这个小提琴

[http://jsfiddle.net/zvCrN/](http://jsfiddle.net/zvCrN/)

我想要做的是：将点击处理程序绑定到链接。单击链接以显示警报。只有在这种情况发生后，才将单击事件处理程序绑定到正文，以便单击正文中的任何位置都会显示不同的警报。

我确定这很微不足道，我只是无法理解它。如何将处理程序绑定到正文，以便它不会在链接点击时触发？

任何帮助表示赞赏，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:53:58.870

```
$("#infolink").click(function(e) {
    e.stopPropagation();
    alert('link')
});

$('body, :not("#infolink")').click(function() {
    alert('body');
}); 
```

**[演示](http://jsfiddle.net/zvCrN/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:54:13.380

尝试以下操作：

```
var link = $('#infolink');
var handler = function (event) {
  link.off('click', handler);
  event.stopPropagation();
  $('body').on('click', function (event) {
    alert('some other message');
  });
  alert('some message');
};
link.on('click', handler); 
```

# .net - 修复 .net 后 Ilasm.exe 丢失

> ID：11211160
> 
> 赞同：2
> 
> 时间：2012-06-26T15:49:52.713
> 
> 标签：.net, ilasm

我已经修复了 .net 4.0 但（仍然）找不到：

伊斯兰文件

有任何想法吗？我需要它来做到这一点：

[程序集的强名称签名](http://buffered.io/posts/net-fu-signing-an-unsigned-assembly-without-delay-signing/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T15:53:19.437

这应该存在于您的 Windows 文件夹中，位于`Windows\Microsoft.NET\Framework\v4.0.30319`.

话虽如此，它还附带 Visual Studio 或[Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)。这还具有安装正确设置环境的命令提示符的优点，并且可以使其更易于使用。

有关详细信息，请参阅[Ilasm.exe 的文档](http://msdn.microsoft.com/en-us/library/496e4ekx%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:03:16.997

它仅带有完整的配置文件。不是客户资料。

你下载了正确的版本吗？

# ruby-on-rails - 如何一次返回 2 个 json 对象？

> ID：11211166
> 
> 赞同：4
> 
> 时间：2012-06-26T15:50:21.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, rest

我有一个控制器返回一个 json 结构，如下所示：

```
def show
  # .......
  o_json = deep_object_1_to_json(o)
  render :json => o_json
end

private
def deep_object_1_to_json(o)
  o.to_json(
    :include => {....})
end 
```

现在我需要扩展它以返回 2 个对象。然而，显而易见的解决方案给我带来了问题：

```
def show
  # .......
  o1_json = deep_object_1_to_json(o)
  o2_json = deep_object_2_to_json(o)
  render :json => 
  {
         :object_1 => o1_json,
         :object_2 => o2_json
  }
end 
```

这将返回一个带有 2 个转义 json 数据字符串的 json 对象！

deep_object_2_to_json 函数已经有多层嵌套包含，所以我宁愿不必将它们重构为单个函数。有没有办法使它易于扩展以在将来添加更多对象而不会出现上述双重转义问题？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T16:24:25.947

听起来您应该构建一些`to_json`可以轻松调用的东西。

活动记录对象的明显候选对象是`as_json`. 除了将对象实际转换为 json 之外，这会执行所有`to_json`操作（包括`:include`选项等）。相反，您会得到一个 ruby​​ 哈希，您可以根据需要对其进行操作，然后调用 to_json。例如你可以做

```
render :json => {
  :o1 => object1.as_json(:include => :blah),
  :o2 => object2.as_json(:include => :blah)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:57:33.977

如果您可以重构您的类以通过该方法返回它的 JSON `to_json`，您可以简单地将两个或多个对象放入一个数组并调用`to_json`该数组：

```
1.9.3-p125 :001 > require 'json'
 => true 
1.9.3-p125 :002 > [{foo: "bar"}, {bar: "foo"}].to_json
 => "[{\"foo\":\"bar\"},{\"bar\":\"foo\"}]" 
```

例子：

```
def to_json
  super(include: [:some_association])
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T16:08:05.967

您的控制器不应该将对象序列化为 JSON，直到它交付它进行渲染之前。

换句话说`deep_object_1_to_json`应该只是`deep_object_1`。然后，您可以将两个返回值打包到一个数组或散列中，并将其呈现为 JSON。

```
def show
  # .......
  o1 = deep_object_1(o)
  o2 = deep_object_2(o)
  render :json =>
  {
         :object_1 => o1,
         :object_2 => o2
  }
end 
```

现在改变它可能会很痛苦，但为了你系统的未来，你真的应该这样做。JSON 只是一种通过网络或磁盘发送对象的格式；您的任何代码都不应该有任何对 JSON 的引用，除非它正在传递它以进行渲染。

# jquery - Jquery UI：如何将图标添加到自动完成结果？

> ID：11211171
> 
> 赞同：2
> 
> 时间：2012-06-26T15:50:57.427
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我想知道是否有办法将 Jquery UI 图标添加到 Jquery UI 自动完成结果中。我的结果分为 3 个不同的类别，我想通过使用图标来明确这一点。

我已经从服务器收到了从 1 到 3 的类别标识，并且可以使用它。

我也确实在结果中放了图标，但它们是（丑陋的）自定义图标。我想知道的是是否有一种简单的方法可以将内置的 jquery ui 图标放入结果中。

到目前为止，我正在以这种方式放置图标：

```
$("#input").autocomplete(source:"serveradress")
    .data( "autocomplete" )._renderItem = function( ul, item ) {
        var image = "<img src=\"images/icon_" + item.category + ".png\" class=\"icon\" />";
        var itemhtml = "<a> + image + item.value + "</a>";
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( itemhtml )
            .appendTo( ul );
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:04:20.373

尝试在此添加：

```
<span class="ui-icon ui-icon-home"></span> 
```

我不得不终止它

```
</span> 
```

它不是自行终止标签，而是由于某种原因引起了问题。

# asp.net - asp.net 'If' 运算符需要两个或三个操作数

> ID：11211172
> 
> 赞同：0
> 
> 时间：2012-06-26T15:51:00.383
> 
> 标签：asp.net, if-statement

我写了一些代码来找出 3 个变量中最低的然后显示它，但我得到“'If' 运算符需要两个或三个操作数”。我不确定问题是什么，任何帮助将不胜感激。

```
<%      

            dim HP_RegularPayment As Integer = HP_RegularPayment
            dim LPC_RegularPayment As Integer = LPC_RegularPayment
            dim PCP_RegularPayment As Integer = PCP_RegularPayment

            if HP_RegularPayment < LPC_RegularPayment and if HP_RegularPayment < PCP_RegularPayment then
                %>
                <div id="detailsprice" style="height:70px; padding-top:5px;"> 
                £<% if DiscountPrice.Text = "" then
                    Response.Write(DiscountPrice.Text) 
                else 
                    Response.Write(Price.Text)
                end if 
                %><br /> <span style="font-size:12px;">Or £<%Response.Write(HP_RegularPayment) %> Per Month With HP Finance</span> </div> <%

            else if LPC_RegularPayment < HP_RegularPayment and if LPC_RegularPayment < PCP_RegularPayment then
                %>
                <div id="detailsprice" style="height:70px; padding-top:5px;"> 
                £<% if DiscountPrice.Text = "" then
                    Response.Write(DiscountPrice.Text) 
                else 
                    Response.Write(Price.Text)
                end if 
                %><br /> <span style="font-size:12px;">Or £<%Response.Write(LPC_RegularPayment) %> 
                Per Month With LP Finance</span> </div> <%

            else if PCP_RegularPayment < HP_RegularPayment and if PCP_RegularPayment < LPC_RegularPayment then
                %>
                <div id="detailsprice" style="height:70px; padding-top:5px;"> 
                £<% if DiscountPrice.Text = "" then
                    Response.Write(DiscountPrice.Text) 
                else 
                    Response.Write(Price.Text)
                end if 
                %><br /> <span style="font-size:12px;">Or £<%Response.Write(PCP_RegularPayment) %> Per Month With PCP Finance</span> </div> <%
            else%>

            <div id="detailsprice"> 
                £<% if DiscountPrice.Text = "" then
                    Response.Write(DiscountPrice.Text) 
                else 
                    Response.Write(Price.Text)
                end if 

            end if%> 
```

谢谢刘易斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:54:30.653

这是因为您`if`在每个现有`if`语句中都有另一个...

```
if HP_RegularPayment < LPC_RegularPayment and **if** HP_RegularPayment < PCP_RegularPayment then 
```

[VB.NET 有一个](http://msdn.microsoft.com/en-us/library/bb513985)称为运算符的运算符`If`，它接受两个或三个参数，如果第一个是`Nothing`，则返回第二个参数。

删除它，这使得线......

```
if HP_RegularPayment < LPC_RegularPayment and HP_RegularPayment < PCP_RegularPayment then 
```

我也同意@IrishChieftain 在他的评论中，你应该真正分开你的代码和标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:53:28.747

代替

```
if HP_RegularPayment < LPC_RegularPayment and if HP_RegularPayment < PCP_RegularPayment then 
```

采用

```
if HP_RegularPayment < LPC_RegularPayment and HP_RegularPayment < PCP_RegularPayment then 
```

# javascript - Jquery Image Change——遍历图像

> ID：11211173
> 
> 赞同：0
> 
> 时间：2012-06-26T15:51:03.007
> 
> 标签：javascript, jquery

如果我有一组要集成的类，如下所示：

.g1 ---> .g12

我该怎么做？

我有我想做的增量事情，并且我相信我已经正确编写了它，但是我不知道如何将该变量与 .grain 连接起来，因此每次单击只能更改一个方块。

```
$("#grains").click(function(){
var x;
x++;
$(".grain").attr('src',"orangesq-01.png");
}); 
```

这是我制作的清单项目：

```
<ul id="grains">
            <li><img src="blusq-01.png" class="grain" /></li>
            <li><img src="blusq-01.png" class="grain1" /></li>
            <li><img src="blusq-01.png" class="grain2" /></li>
            <li><img src="blusq-01.png" class="grain3" /></li>
            <li><img src="blusq-01.png" class="grain4" /></li>
            <li><img src="blusq-01.png" class="grain5" /></li>
            <li><img src="blusq-01.png" class="grain6" /></li>
            <li><img src="blusq-01.png" class="grain7" /></li>
            <li><img src="blusq-01.png" class="grain8" /></li>
            <li><img src="blusq-01.png" class="grain9" /></li>
            <li><img src="blusq-01.png" class="grain10" /></li>
            <li><img src="blusq-01.png" class="grain11" /></li>
        </ul> 
```

我想你明白我想要做什么。如果我能弄清楚那个串联的东西，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:54:59.480

`.eq()`如果它们已经按顺序排列，您可以只附加索引或只使用调用。

```
var x = 0;
$("#grains").click(function(){
 $(".grain" + (x === 0 ? '' : x)).attr('src',"orangesq-01.png");
 //or
 $(this).find('img').eq(x).attr('src',"orangesq-01.png");
  x++;
}); 
```

呵呵[http://jsfiddle.net/mURxA/](http://jsfiddle.net/mURxA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:17:10.003

另一种更动态的方法是结合使用自定义选择器`eq(0)`来简单地选择第一张图像，如下所示：

```
$('#grains').click(function()
{
    $('img[src="blusq-01.png"]', this).eq(0).attr('src', 'orangesq-01.png');
}); 
```

*希望你不介意安德鲁，我更新了你的[例子](http://jsfiddle.net/GeekyEggo/mURxA/1/)。*

# javascript - Javascript拆分空格分隔的字符串并修剪多余的逗号和空格

> ID：11211175
> 
> 赞同：14
> 
> 时间：2012-06-26T15:51:19.340
> 
> 标签：javascript, string, split, trim

我需要拆分关键字字符串并将其转换为逗号分隔的字符串。但是，我需要去掉多余的空格和用户已经输入的任何逗号。

```
var keywordString = "ford    tempo, with,,, sunroof"; 
```

输出到这个字符串：

```
ford,tempo,with,sunroof, 
```

我需要结尾的逗号，并且最终输出中没有空格。

不确定我是否应该使用正则表达式或字符串拆分功能。

有人已经在做这样的事情了吗？

我需要使用 javascript（或 JQ）。

编辑（工作解决方案）：

```
var keywordString = ", ,, ford,    tempo, with,,, sunroof,, ,";

//remove all commas; remove preceeding and trailing spaces; replace spaces with comma

str1 = keywordString.replace(/,/g , '').replace(/^\s\s*/, '').replace(/\s\s*$/, '').replace(/[\s,]+/g, ',');

//add a comma at the end
str1 = str1 + ',';

console.log(str1); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-26T15:53:05.160

在这两种情况下，您都需要一个正则表达式。您可以拆分并加入字符串：

```
str = str.split(/[\s,]+/).join(); 
```

这会拆分并消耗任何连续的空格和逗号。同样，您可以匹配并替换这些字符：

```
str = str.replace(/[\s,]+/g, ','); 
```

对于尾随逗号，只需附加一个

```
str = .... + ','; 
```

如果您有前后空格，则应先删除这些空格。

**参考：** [`.split`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split) , [`.replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace),[正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-03-29T02:03:46.477

在**ES6**中：

```
var temp = str.split(",").map((item)=>item.trim()); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-26T16:06:24.017

*除了[Felix Kling](https://stackoverflow.com/users/218196/felix-kling)的[回答](https://stackoverflow.com/a/11211206/259656)*

> 如果您有前后空格，则应先删除这些空格。

`String`可以通过挂钩到它的原型向 JavaScript 添加“扩展方法” 。我一直在使用以下方法来修剪前后的空格，到目前为止，它的工作是一种享受：

```
// trims the leading and proceeding white-space
String.prototype.trim = function()
{
    return this.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-27T05:47:35.280

我会保持简单，只需匹配任何*不允许*的内容即可加入：

```
str.split(/[^a-zA-Z-]+/g).filter(v=>v); 
```

这匹配所有间隙，无论中间有什么不允许的字符。为了摆脱开头和结尾的空条目，一个简单的非空值过滤器就可以了。请参阅[regex101 的详细说明](https://regex101.com/r/7h851Y/1)。

```
var str = ", ,, ford,    tempo, with,,, sunroof,, ,";

var result = str.split(/[^a-zA-Z-]+/g).filter(v=>v).join(',');

console.info(result);
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-23T11:09:06.630

```
let query = "split me by space and remove trailing spaces and store in an array  ";
let words = query.trim().split(" ");
console.log(words) 
```

输出：['split'，'me'，'by'，'space'，'and'，'remove'，'trailing'，'spaces'，'and'，'store'，'in'，'an' ， '大批' ]

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-10-05T08:53:36.890

如果您只想**拆分、修剪**和**加入**保留空格，您可以使用**lodash**执行此操作：

```
// The string to fix
var stringToFix = "The Wizard of Oz,Casablanca,The Green Mile";

// split, trim and join back without removing all the whitespaces between
var fixedString = _.map(stringToFix.split(','), _.trim).join(' == ');

// output: "The Wizard of Oz == Casablanca == The Green Mile"
console.log(fixedString);
```

```
<script src="https://cdn.jsdelivr.net/lodash/4.16.3/lodash.min.js"></script>
```

# ruby-on-rails-3 - 未捕获的类型错误：无法调用 Backbone.history.start() 上未定义的方法“开始”

> ID：11211179
> 
> 赞同：1
> 
> 时间：2012-06-26T15:51:35.160
> 
> 标签：ruby-on-rails-3, backbone.js

我正在使用 Rails。我刚刚安装了`backbone-rails`gem 并按照[此处](https://github.com/codebrew/backbone-rails)的说明进行操作。

当我尝试做时`Backbone.history.start()`，我收到此错误：

```
Uncaught TypeError: Cannot call method 'start' of undefined 
```

我知道，根据[this other SO question](https://stackoverflow.com/questions/7343357/cannot-call-start-of-undefined-when-starting-backbone-js-history)`Backbone.history.start()`，在您创建至少一条路线之后才能调用它。不过，这似乎不是我的问题，因为我确实有多个路由，在此 CoffeeScript 文件中定义：

```
class Lunchhub.Routers.RestaurantLocationsRouter extends Backbone.Router
  initialize: (options) ->
    @restaurantLocations = new Lunchhub.Collections.RestaurantLocationsCollection()
    @restaurantLocations.reset options.restaurantLocations

  routes:
    "new"      : "newRestaurantLocation"
    "index"    : "index"
    ":id/edit" : "edit"
    ":id"      : "show"
    ".*"        : "index" 
```

为什么我会收到此错误？

编辑：这是我的代码：

```
<div id="restaurant_locations"></div>

<script type="text/javascript">
  $(function() {
    window.router = new Lunchhub.Routers.RestaurantLocationsRouter({restaurantLocations: <%= @restaurant_locations.to_json.html_safe -%>});
    Backbone.history.start();
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:05:21.950

在调用之前尝试使用 new 关键字创建路由器实例`Backbone.history.start`。

编辑： Backbone.history must be `undefined`，正如其他人所说，这通常是因为在 Backbone 创建此对象之前[，需要有一个](https://stackoverflow.com/questions/7343357/cannot-call-start-of-undefined-when-starting-backbone-js-history)至少有一个路由处于活动状态的路由器。

> Backbone.js 创建一个名为 Backbone.history（小写“h”）的 Backbone.History（大写“H”）的实例，一旦创建了一个控制器并在其上指定了至少一个路由

我看到您正在创建路由器的新实例，但可能仍然存在错误的路由器实例，只是与其他问题中讨论的风格不同 - 在调用之前检查`typeof`您的`window.router`对象路由器`Backbone.history.start()`。它会返回您所期望的吗？

编辑：正如下面的评论所证实的那样，这`RestaurantLocationsRouter`有点糟糕。我们还没有弄清楚为什么，但是创建一个新的路由器可以按预期工作，并且表明您的路由器实例确实出现了问题。

# java - 使用 XPath 从 XML 中获取 Java 中属性的值

> ID：11211182
> 
> 赞同：1
> 
> 时间：2012-06-26T15:51:44.817
> 
> 标签：java, android, xml, xpath

我目前正在使用 XPath 从使用 Java 和 XPath 的播客提要中获取一些信息。我正在尝试读取节点的属性：

```
<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:admin="http://webns.net/mvcb/" xmlns:atom="http://www.w3.org/2005/Atom/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" version="2.0">
  <channel>
    [....]
    <itunes:image href="http://icebox.5by5.tv/images/broadcasts/14/cover.jpg" />
[...] 
```

我想获取`href`<itunes:image> 中的属性值。目前，我正在使用以下代码：

```
private static String IMAGE_XPATH = "//channel/itunes:image/@href";
String imageUrl = xpath.compile(IMAGE_XPATH).evaluate(doc, XPathConstants.STRING).toString(); 
```

imageUrl 的结果是**null**。代码中发生了什么？XPath 代码或 Java 代码中是否有错误？

谢谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T22:07:13.293

禁用命名空间警告：

```
DocumentBuilderFactory xmlFact = DocumentBuilderFactory.newInstance();
xmlFact.setNamespaceAware(false); 
```

您的 xpath 表达式现在应该如下所示：

```
"//channel/image/@href" 
```

如果您需要将其用作命名空间感知，只需实现您自己的[NameSpaceContext](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/namespace/NamespaceContext.html#getPrefix%28java.lang.String%29)，应该如下所示：

```
NamespaceContext ctx = new ItunesNamespaceContext();

XPathFactory xpathFact = XPathFactory.newInstance();
XPath xpath = xpathFact.newXPath();
xpath.setNamespaceContext(ctx);
String IMAGE_XPATH = "//channel/itunes:image/@href";
String imageUrl = path.compile(IMAGE_XPATH).evaluate(doc,XPathConstants.STRING).toString(); 
```

编辑：这是证明我的观点的测试代码：

```
String a ="<?xml version=\"1.0\" encoding=\"UTF-8\"?><rss xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:sy=\"http://purl.org/rss/1.0/modules/syndication/\" xmlns:admin=\"http://webns.net/mvcb/\" xmlns:atom=\"http://www.w3.org/2005/Atom/\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:content=\"http://purl.org/rss/1.0/modules/content/\" xmlns:itunes=\"http://www.itunes.com/dtds/podcast-1.0.dtd\" version=\"2.0\"><channel><itunes:image href=\"http://icebox.5by5.tv/images/broadcasts/14/cover.jpg\" /></channel></rss>";
DocumentBuilderFactory xmlFact = DocumentBuilderFactory.newInstance();
xmlFact.setNamespaceAware(false);
DocumentBuilder builder = xmlFact.newDocumentBuilder();
XPathFactory xpathFactory = XPathFactory.newInstance();
String expr = "//channel/image/@href";
XPath xpath = xpathFactory.newXPath();
Document doc = builder.parse(new InputSource(new StringReader(a)));
String imageUrl = (String) xpath.compile(expr).evaluate(doc ,XPathConstants.STRING);
System.out.println(imageUrl); 
```

输出是：

```
http://icebox.5by5.tv/images/broadcasts/14/cover.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:54:05.820

XPath 应该包含根元素，例如 rss/channel/itunes:image/@href。

或者，您可以使用 // 开始 xpath，以便在所有级别中搜索 xpath (//channel/itunes:image/@href)，但如果根始终相同，则使用第一个选项更有效.

# sql - 删除对 SQL Server 2008 R2 上链接服务器的所有引用

> ID：11211183
> 
> 赞同：0
> 
> 时间：2012-06-26T15:51:51.027
> 
> 标签：sql, sql-server-2008, tsql

我负责将数据库从 ServerA 移动到 ServerB 的任务。ServerB 包含许多其他数据库对象，其中相当一部分使用与 ServerA 的 Linked Server 连接。例如，可能有一个视图将 ServerB 上的 table1 连接到 ServerA.database.schema.table1

有谁知道我可以在 ServerB 上运行的脚本，它将显示引用 ServerA 的所有对象的列表，以便我可以快速更新它们，而无需打开每个对象。

我希望这是有道理的。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:00:35.850

这可能会导致误报，但这可能比依赖依赖视图更好（它会错过动态 SQL 或只是过时的依赖）：

```
SELECT 'EXEC sp_helptext ''' 
 + QUOTENAME(OBJECT_SCHEMA_NAME([object_id]))
 + '.' + QUOTENAME(OBJECT_NAME([object_id])) + ''';'
FROM sys.sql_modules
WHERE definition LIKE '%ServerA.%'; 
```

您可能还需要考虑服务器名称包含在方括号中的潜在情况：

```
OR definition LIKE '%\[ServerA\].%' ESCAPE '\'; 
```

您还应该考虑使用[同义词](http://msdn.microsoft.com/en-us/library/ms177544%28v=sql.100%29.aspx)来防止将来发生此类维护。事实上，您可能还想检查引用服务器名称的任何同义词：

```
SELECT name, base_object_name
  FROM sys.synonyms
  WHERE base_object_name LIKE 'ServerA.%'
  OR base_object_name LIKE '\[ServerA\].%' ESCAPE '\'; 
```

# jquery - jquery post ajax请求一直在firebug上旋转而没有响应

> ID：11211184
> 
> 赞同：0
> 
> 时间：2012-06-26T15:51:51.760
> 
> 标签：jquery, ajax, post

今天突然间，我的一些 ajax 请求在某些页面中停止工作，而在其他页面中它们工作正常......这真的很奇怪，因为在 Firebug 中，即使我尝试从我调用的函数中调试它，我也看不到任何错误......问题是萤火虫的加载图像不停地旋转......所有参数都正确传递了唯一的问题是我没有从请求中得到任何东西......或者如果我得到它，我会在某些页面和其他页面得到它我什么都不会……

js示例：

```
$(".reply_to_article").click(function(){
    var cct = $.cookie('csrf_cookie_name');

    var body = $(this).parent().find("textarea");

    $.ajax({
        type: "POST",
        url: "http://www.domain.com/articles/replyToArticle",
        dataType: 'json',
        data: {
            body : body.val(),
            csrf_name : csrf_value
        },
        success: function(data) {

        }
    });
}); 
```

在 replyToArticle 函数中，我只是有一个`echo 1;`，它不会被返回

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:05:11.830

作为初步步骤，我会尝试确保 POST 适用于您指定的 URL。如果你安装了 curl，你可以试试这个：

```
curl -d "testdata1=testvalue1&testdata2=testvalue2" http://www.example.com/articles/replyToArticle 
```

并检查您是否收到所需的回复

卷曲安装可以在[这里](http://curl.haxx.se/download.html)找到。

# c# - 从数据库读取时未处理 WebException

> ID：11211185
> 
> 赞同：0
> 
> 时间：2012-06-26T15:51:57.377
> 
> 标签：c#, sql, wpf, exception

我正在做的事情很简单。我只需要连接到 SQL 数据库并从表中读取信息。我确信我错过了一些愚蠢的东西。我正在使用 C#、SQL Sever 和 WPF。显示的连接字符串是数据源构建器提供的连接字符串，因此我认为它是正确的。我测试了与它的连接，它是成功的。我附上了一些代码和图像来帮助你帮助我解决我的问题。

代码：

```
private void UserControl_Loaded(object sender, RoutedEventArgs e)
{
    con = new System.Data.SqlClient.SqlConnection();

    con.ConnectionString = "Data Source=USSW7DEVWS16\\DEVELOPER;Initial Catalog=acrGIS;Integrated Security=True";

    con.Open();
    using (SqlCommand command = new SqlCommand("SELECT * FROM dbo.acrObjects", con))
    {
        SqlDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {
            string Object = reader.GetString(0);
            string Comment = reader.GetString(1);
            string OStreet = reader.GetString(2);
            string OCity = reader.GetString(3);
            string OState = reader.GetString(4);
            string OZip = reader.GetString(5);
            string OSpec = reader.GetString(6);

            arcObjects.Add(new acrObject() { Object_Num = Object, Comments = Comment, Street = OStreet, City = OCity, State = OState, Zip = OZip, Spec = OSpec });
        }
        foreach (acrObject objects in arcObjects)
        {
           MessageBox.Show(objects.ToString());
        }
    } 
```

这是我的班级以及我的列表和连接定义：

```
class acrObject
{
    public string Object_Num {get; set;}
    public string Comments{get; set;}
    public string Street {get; set;}
    public string City {get; set;}
    public string State{get; set;}
    public string Zip {get; set;}
    public string Spec {get; set;}
    public override string  ToString()
    {
              return string.Format("Object Number: {0}, Comments: {1}, Street: {2}, City: {3}, State: {4}, Zip: {5}, Spec: {6}", Object_Num, Comments, Street, City, State, Zip, Spec);
    }
}

System.Data.SqlClient.SqlConnection con;

        List<acrObject> arcObjects = new List<acrObject>(); 
```

异常的图像：

![在此处输入图像描述](../Images/4390166f75d28a5e3766bc18c5aa306a.png)

它发生在线：

```
while (reader.Read()) 
```

更奇怪的是有时不会抛出错误，它会跳过所有代码。所以它从来没有尝试显示我觉得很奇怪的消息框。谢谢您的帮助。如果您还有任何问题或希望我发布更多我的代码，请告诉我，我将很乐意。

显示断点和调用堆栈：

![在此处输入图像描述](../Images/6c539f2a243359c475a7bd0978eb4cc2.png)

这是我执行 try/catch 时引发的异常：

![在此处输入图像描述](../Images/578ca9e974cec08cef79424ea65bb545.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:58:23.560

确保您的应用程序可以访问`dbo`架构的身份，并确保您`arcObjects`在`dbo`架构中创建。

1.  您可以通过执行来检查登录的默认架构`SELECT SCHEMA_NAME()`。或者，您可以在安全 > 用户下的数据库中找到登录名并查看其属性。您可以检查默认架构以及它拥有的任何其他架构。例如，您可以将用户添加到`db_owner`，或者`db_datareader`/`db_datawriter`如果您不希望该身份拥有完全权限。
2.  检查表所属的架构：

在新的查询窗口中执行以下 SQL：

```
select t.name as table_name, s.name as schema_name from sys.tables as t 
    inner join sys.schemas as s on t.schema_id = s.schema_id
where object_id = OBJECT_ID(N'arcObjects') 
```

如果表属于`dbo`，则应`dbo`在`schema_name`列下显示。如果没有，请将表格移动到`dbo`：

```
 ALTER SCHEMA dbo 
 TRANSFER [schema listed in schema_name column].arcObjects 
```

或者，您可以浏览对象资源管理器中的表。这些表将以 [schema].[table name] 格式列出。

# powershell - 在 PS 会话期间执行 .cmd 文件时遇到问题

> ID：11211186
> 
> 赞同：1
> 
> 时间：2012-06-26T15:51:57.940
> 
> 标签：powershell, powershell-remoting

我试图在 powershell 脚本中远程执行 .bat 文件。我的脚本文件中的代码如下所示：

```
$server
$cred
# Both of these methods are strings pointing to the location of the scripts on the
# remote server ie. C:\Scripts\remoteMethod.cmd
$method1
$method2
$scriptArg

Enter-PSSession $server -Credential $cred
Invoke-Command {&$method1}
if($?)
{
    Invoke-Command {&$method2 $args} -ArgumentList $scriptArg
}
Exit-PSSession 
```

但是每当我运行它时，我都会得到

> 术语“C:\Scripts\remoteMethod.cmd”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

即使我切换调用方法的顺序也会发生这种情况。

我发现这个问题[Using Powershell's Invoke-Command to call a batch file with arguments](https://stackoverflow.com/questions/8541809/using-powershells-invoke-command-to-call-a-batch-file-with-arguments)并尝试了接受的答案无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:57:25.363

我没想到 $method1 和 $method2 变量在`Invoke-Command`. 通常您必须通过`-ArgumentList`参数传递这些参数，例如：

```
Invoke-Command {param($method, $arg) &$method $arg} -Arg $method2 $scriptArg 
```

但在您的情况下，CMD 文件的路径似乎正在通过远程连接。试试这个，看看问题是否与远程机器上修改的 ComSpec 环境变量有关：

```
Invoke-Command {param($method, $arg) cmd.exe /c $method $arg} -Arg $method2, $scriptArg 
```

# asp.net - 在 ASP.NET 中，如何知道 *format* 中的哪个是返回的日期

> ID：11211193
> 
> 赞同：1
> 
> 时间：2012-06-26T15:52:24.587
> 
> 标签：asp.net, date

以下代码 d 具有当前日期。根据当前的语言环境，它将返回一个日期。

```
Dim d As Date = Date.Today 
```

注意：我不想检查日期是否有效，而是想知道它是 'dd-MM-yyyy'、'MM-dd-yyyy' 还是任何其他日期格式..

## 编辑（2012 年 6 月 29 日 - 星期五）：

我问这个问题的原因是因为我厌倦了*尝试*在 ASP.NET 中处理日期。我在本地 PC 上构建了一个项目，其中日期为“dd/MM/yyyy”，一旦我将其上传到生产服务器（通常在美国，因此为 MM/dd/yyyy），代码就会中断。

所以我通常通过将日期转换为 yyyyMMdd 格式来处理日期，并将它们保存在数据库中。这是我最接近无异常编码的方式。

在这种情况下，没有办法从返回的日期字符串中获取格式是有道理的。因此，我将继续我的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:56:18.203

[`Date.Today`](http://msdn.microsoft.com/en-us/library/system.datetime.today.aspx#Y0)是一个[`DateTime`](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)，而不是一个字符串。因此，它没有固有的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:57:04.413

它将返回一个`Date`，我*相信*它是 VB 的别名[`DateTime`](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)。（如果不是，只需`DateTime`明确使用惯用的 .NET 而不是使用旧的 VB 类型。）

值`DateTime`本身没有格式，`int`就像十进制或十六进制一样。只有当您将值转换为字符串时才会应用格式，然后取决于您*如何*将其转换为字符串。在您真正需要之前，您不应该使用字符串转换，然后您应该控制格式，使其按照您想要的方式工作。

尽可能早地将文本数据*转换*为其“自然”类型，并尽可能长时间地保持该类型。例如，在 SQL 查询中传递值时避免转换为字符串 - 相反，使用参数化 SQL，您可以将参数值指定*为*`DateTime`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:57:24.150

您想知道的可以在以下位置找到：

`CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern`

这是您调用时将使用的格式字符串

`d.ToShortDateString()`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-26T15:55:00.887

你需要被告知；没有其他办法。举个例子：

```
6/12/2012 
```

它在`dd/mm/yyyy`或`mm/dd/yyyy`格式中有效

如果您事先不知道语言环境/格式，您会选择哪一种？

日期值没有内在格式。换句话说，您可以将日期格式化为您需要的任何字符串表示形式，但是从字符串返回到日期值的相反转换要求您知道接收此日期字符串的格式。

# html - 在移动 Safari、横向 * 和 * 纵向 (iPhone/iPad) 中居中背景图像

> ID：11211197
> 
> 赞同：0
> 
> 时间：2012-06-26T15:52:40.697
> 
> 标签：html, css, mobile-safari

我有一个 1024 x 1024 像素的背景图像；这些尺寸的原因是我希望图像在*横向*和*纵向*模式下都覆盖屏幕。图像的中心有一个小标志，但除此之外它是一个简单的渐变。我希望图像始终居中；换句话说，标志必须始终位于屏幕中央，*横向*和*纵向*。我也希望图像覆盖整个屏幕，但不希望背景图像创建不必要的滚动条；所以我不希望通过在屏幕上拖动来移动图像。

这是我尝试过的（为了这个例子，我只是在 HTML 中使用样式标签）：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8" />
<title>Test</title>
<style>
    html,body {
        width:100%;
        height:100%;
    }
    body {
        background-image: url('../img/background.jpg');
        background-position:center;
        background-attachment:fixed;
        background-repeat:no-repeat;
    }
</style>
</head>
<body>
Hello world.        
</body>
</html> 
```

此处代码的问题是图像未居中（在*纵向*模式下，徽标显示在屏幕右侧，在屏幕底部以*横向显示）。*背景图像似乎也成为页面内容的一部分，因此会导致滚动条，这意味着可以左右拖动图像。

我更喜欢只有 CSS 和 html 的解决方案，但如果可行，我会接受带有 Javascript 的解决方案。请不要在此处提及与其他浏览器有关的问题，我在此问题中专门询问 Mobile Safari。我已经尝试了*很多*在各种答案中提出的建议，但我还没有找到在 Mobile Safari 中正常工作的解决方案。

所以这里再次以点的形式提出我的要求：

*   背景图像始终覆盖整个屏幕（不显示空白）
*   图像始终居中（因此溢出在左右/顶部和底部之间平均分配）
*   当 iPad 在横向和纵向之间旋转时，图像保持居中
*   背景图像是固定的（不能移动）
*   最好是仅使用 HTML 和 CSS 的解决方案（CSS3 也可以）

Anwone 知道如何做到这一点？

更新：

这个问题可能出在电脑和椅子之间！;) 当我在 UIWebview 中解决问题时，我会发布更新。

好的。已确认。这里没有什么可看的！:) 这个问题是我自己做的，我提供的 HTML 实际上可以正常工作。这是错误的，因为正在加载的 HTML 是一个错误屏幕，并且在尝试“伪造”错误情况时，我导致了一个实际错误，即 UIWebview 在它准备好之前就被加载了。当我在正确的时间加载 HTML 时，居中突然起作用并且滚动条消失了。一切100%。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:10:42.987

背景图像没有高度和宽度，它们的高度和宽度取决于应用它们的父级的高度和宽度。所以背景图片不可能创建滚动条。

如果您希望背景图像根据屏幕大小调整大小，请使用以下命令：

```
background-size: cover; 
```

# string - 批处理文件中的字符串操作

> ID：11211198
> 
> 赞同：0
> 
> 时间：2012-06-26T15:52:42.340
> 
> 标签：string, batch-file, for-loop

我正在运行 FOR 循环来检索根文件夹中所有 *.properties 文件的（绝对）路径名：“C:\ExecutionSDKTest_10.2.2\”。现在，我正在尝试对路径名进行切片以仅生成文件名。例如，如果绝对路径是“C\ExecutionSDKTest_10.2.2\Test-101”，我只想要“Test-101”部分（当然不包括引号）我有：

```
 FOR %%G IN (C:\ExecutionSDKTest_10.2.2\*.properties) DO
    (
         REM Ignore "C:\ExecutionSDKTest_10.2.2\" ??
         java -jar %1 %G:> Logs\%%G.log
    ) 
```

所以绝对文件路径名存储在G中，但我只想要文件名。我怎样才能实现这个目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:56:51.153

您可以使用

```
%%~nG 
```

只获取文件名，或

```
%%~nxG 
```

如果你想要文件名和扩展名。

# jquery - 根据其他字段的选择选择性启用/禁用表单字段

> ID：11211204
> 
> 赞同：0
> 
> 时间：2012-06-26T15:53:03.100
> 
> 标签：jquery, forms

我需要做类似的事情：

```
            | 专栏01 | 专栏02 | 专栏 03
   -------------------------------------------------- ----------------
   第 1 行 | ( ) 选项 01_01 | ( ) 选项 01_02 | ( ) 选项 01_03
   -------------------------------------------------- ----------------
   第 2 行 | ( ) 选项 02_01 | ( ) 选项 02_02 | ( ) 选项 02_03
   -------------------------------------------------- ----------------
   第 3 行 | ( ) 选项 03_01 | ( ) 选项 03_02 | ( ) 选项 03_03
   -------------------------------------------------- ----------------
   第 04 行 | ( ) 选项 04_01 | ( ) 选项 04_02 | ( ) 选项 04_03
   -------------------------------------------------- ----------------

```

这是一个订阅表单，用户应该选择 3 个可用**选项**，但每**行只能选择一个，每****列**只能选择一个。例如，如果用户选择**Option 01_02 ，则****第 01 行**中的所有其他选项均不可用，并且**第 02 列**中的所有选项也应禁用。任何想法如何实现这一目标？我看到很多人使用 jQuery 来启用/禁用表单中的字段，但没有找到与我想做的类似的事情。一些可能有帮助的更多信息：**行**是根据从 MySQL 数据库检索的数据创建的，并使用单选按钮实现。**专栏**_**限制是后来添加的。谢谢你的帮助。**

 **编辑：我现在意识到我的例子是错误的。它应该是一个 3x3 矩阵，如下所示：

```
            | 专栏01 | 专栏02 | 专栏 03
   -------------------------------------------------- ----------------
   第 1 行 | ( ) 选项 01_01 | ( ) 选项 01_02 | ( ) 选项 01_03
   -------------------------------------------------- ----------------
   第 2 行 | ( ) 选项 02_01 | ( ) 选项 02_02 | ( ) 选项 02_03
   -------------------------------------------------- ----------------
   第 3 行 | ( ) 选项 03_01 | ( ) 选项 03_02 | ( ) 选项 03_03
   -------------------------------------------------- ----------------

```

无论如何，规则仍然适用：

*   用户必须从每一**列中仅选择一个****选项**
***   用户必须从每一**行中仅选择一个****选项*****   用户必须总共选择 3 个**选项**。****

 ****一个有效的选择是：**选项 01_02**、**选项 02_01**和**选项 03_03**。用户可以在提交表单之前自由更改他的选择，但必须遵守规则。当用户更改他的选择时，应该取消选择冲突的**选项并禁用无效的选项。**我最初的想法是为**选项**使用单选按钮，因为它具有排除功能，但也许使用复选框可以提供更好的解决方案。

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:42:46.813

我已经为您正在寻找的内容创建了一个 JSFiddle。这很粗糙，但希望这能让你开始并运行你需要做的事情。另外，如果您有任何问题，请随时提问：）

[http://jsfiddle.net/g27nh/2/](http://jsfiddle.net/g27nh/2/)

编辑：我已对其进行了更新，以便您可以添加任意数量的行或列，并且仍然可以正确计算它们。这是更新：http: [//jsfiddle.net/g27nh/4/](http://jsfiddle.net/g27nh/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T02:09:21.657

我的一个朋友刚刚帮我解决了这个问题，我们的解决方案在这里 [http://jsfiddle.net/2zHA9/](http://jsfiddle.net/2zHA9/)

谢谢你们=）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:26:45.023

我刚刚看到这篇文章[Radio Buttons with 2-Way Exclusivity](http://css-tricks.com/radio-buttons-with-2-way-exclusivity/)

它有一个你正在寻找的例子。

**HTML**

```
<table>
<tr>
    <th></th>
    <th>1</th>
    <th>2</th>
    <th>3</th>
</tr>
<tr>
    <td>Twix</td>
    <td><input type="radio" name="row-1" data-col="1"></td>
    <td><input type="radio" name="row-1" data-col="2"></td>
    <td><input type="radio" name="row-1" data-col="3"></td>
</tr>
<tr>
    <td>Snickers</td>
    <td><input type="radio" name="row-2" data-col="1"></td>
    <td><input type="radio" name="row-2" data-col="2"></td>
    <td><input type="radio" name="row-2" data-col="3"></td>
</tr>
<tr>
    <td>Butterfingers</td>
    <td><input type="radio" name="row-3" data-col="1"></td>
    <td><input type="radio" name="row-3" data-col="2"></td>
    <td><input type="radio" name="row-3" data-col="3"></td>
</tr>
</table> 
```

**CSS**

```
table {
    border-collapse: collapse;    
}
td, th {
    border: 1px solid #ccc;
    padding: 10px;
}
th:empty {
    border: 0;
} 
```

**jQuery**

```
var col, el;

$("input[type=radio]").click(function() {
   el = $(this);
   col = el.data("col");
   $("input[data-col=" + col + "]").prop("checked", false);
   el.prop("checked", true);
}); 
```******

# java - Java Socket - 如何在 3 点之间发送和接收信息？

> ID：11211207
> 
> 赞同：2
> 
> 时间：2012-06-26T15:53:05.627
> 
> 标签：java, sockets, networking, tcp, ip

在我的应用程序中，多台 PC 将连接到服务器。服务器将接收消息然后发送到系统。系统可能会向服务器发回一条消息，而这条消息应该由服务器发送给 PC。基本上是这样的：

PC 0 --------> 服务器 ----> 向系统发送 PC 信息。
系统 ------> 发送消息到 PC 0 服务器 ----> PC 0

与 PC 1、2、3 等相同...

但是我该怎么做呢？我已经可以让 PC 消息到服务器和服务器到系统，如下所示：

**这是从 ServerThread 运行的：**

```
try {

    Socket socket = serverSocket.accept();

    if (socket != null) {

        clientList.add(new ClientThread(socket));
    }

} catch (IOException ex) {

    System.out.println(DEBUG
            + ": Failed creating client socket / "
            + ex.getMessage());
} 
```

但是我怎么知道传入的套接字是要向服务器发送消息还是套接字应该向 PC 发送消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:19:52.447

您基本上是在实现即时消息传递，您的系统只是另一个端点（以及 PC0 ...）。如果您的服务器只是用作消息路由器，为什么不使用[XMPP 之](http://xmpp.org/about-xmpp/)类的东西。

您可以使用[Smack](http://www.igniterealtime.org/projects/smack/index.jsp)作为客户端解决方案，任何现成的[XMPP](http://xmpp.org/xmpp-software/servers/)服务器都可以轻松满足您的需求。如果您需要自定义服务器，您可以选择基于 Java 的服务器之一，例如[Openfire](http://www.igniterealtime.org/projects/openfire/index.jsp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:19:13.050

这种方法称为[**`proxy`**](http://en.wikipedia.org/wiki/Proxy_server). 为了区分*客户端*（您的问题中的 PC）和*服务器*（系统），您需要保持从客户端*接受的连接，以及您**发起*的与服务器的连接分开，但交叉引用（最简单的是一对一映射）。在客户端连接上获取消息，可选择转换/过滤，在相应的服务器连接上发送，反之亦然。

# iphone - 什么时候使用Core Data，什么时候使用Sqlite？

> ID：11211209
> 
> 赞同：2
> 
> 时间：2012-06-26T15:53:06.147
> 
> 标签：iphone, sqlite, core-data

我正在学习 Core Data，之前我在我的一个项目中使用过 SQLite。我的问题是，我应该在什么场景下使用 Core Data 和 SQLite？我已经阅读了 Core Data 的一些优点，它提供了设计数据结构的可视化方式、访问数据的抽象级别以及 SQLite 可以在多平台上使用，但是有什么与数据大小有关的吗？如果数据量比我们应该使用 Core Data 大，反之亦然？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T16:10:41.357

**核心数据：**

1.  主要功能是图形管理（虽然读写磁盘是一个重要的支持功能）

2.  对存储在内存中的对象进行操作（尽管它们可以从磁盘延迟加载）

3.  与成熟的对象一起工作，这些对象可以自我管理很多行为，并且可以为进一步的行为进行子类化和定制

4.  非事务性、单线程、单用户（除非您围绕提供这些东西的 Core Data 创建一个完整的抽象）

5.  只在内存中运行

6.  需要保存过程

7.  可以非常快速地在内存中创建数百万个新对象（尽管保存这些对象会很慢）

8.  将数据约束留给程序的业务逻辑端

**数据库或 SQLite：**

1.  主要功能是存储和获取数据

2.  操作存储在磁盘上的数据（或最小和增量加载）

3.  存储“哑”数据

4.  可以是事务性的、线程安全的、多用户的

5.  可以在不加载到内存的情况下删除表和编辑数据

6.  永久保存到磁盘（并且经常崩溃恢复）

7.  创建数百万个新行可能很慢

8.  提供数据约束，如“唯一”键

参考以下链接 [http://cocoawithlove.com/2010/02/differences-between-core-data-and.html](http://cocoawithlove.com/2010/02/differences-between-core-data-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:14:44.950

对于在这种情况下实体之间具有更多“多对多”或“一对多”关系的大型数据（超过 100000 条记录），您可以使用 SQLite，否则您可以毫无问题地获取核心数据。

还有一个建议，请在做出任何决定之前标准化您的数据库。

使用 SQLite 处理大数据，有一个非常好的教程 [提高 SQLite 的每秒插入性能？](https://stackoverflow.com/questions/1711631/how-do-i-improve-the-performance-of-sqlite)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:20:14.823

根据我的经验，数据大小从来都不是问题，但我听说 SQLite 更健壮。我使用 SQLite 是因为我们希望我们的应用程序预先填充用户数据，而使用 Core Data，它适用于单个用户，它将像地址簿一样填充它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T15:56:32.307

Core Data 没有数据量的限制——事实上，它使用 SQLite 作为存储，所以数据大小不应该打扰你。

Core Data 是一个非常棒的解决方案，所以我建议您在项目中使用它。

# jquery - 如何在不将“转换为”的情况下获取元素的内容？

> ID：11211213
> 
> 赞同：2
> 
> 时间：2012-06-26T15:53:19.623
> 
> 标签：jquery, json, parsing, escaping

我正在解析 HTML 元素中包含的 JSON。

考虑这个标记：

```
<div id="1">
    {"string":["&quot;\u041a\u0410\u041a&quot;"]}
</div> 
```

这个脚本：

```
var a = $.parseJSON($("#1").html()) 
```

​ 这会返回一个错误（“Uncaught SyntaxError: Unexpected token \”），因为`&quot`s被方法转换成了`"`s `html()`。

在这种情况下，如何让 jQuery 不解析 HTML？`$.text()`也不行。还是我做错了什么？

jsFiddle：http: [//jsfiddle.net/VJvpY/6/](http://jsfiddle.net/VJvpY/6/)

**编辑：**请注意，错误将仅显示在控制台中。

**EDIT2：**我需要解析 JSON 并用它创建一个 JS 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:20:38.687

如果您尝试将 JSON 显示为文本？你可以把它包在一个 pre

[http://jsfiddle.net/VJvpY/5/](http://jsfiddle.net/VJvpY/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:01:13.677

你不能不将 json 放在 textarea 中，这样浏览器就不会解析它（jQuery 不是搞乱你的引号的那个。）

但是，由于“/”，jquery 仍然无法解析您的 json，我不知道如何解决。即使逃脱了它们，它仍然不起作用。

[http://jsfiddle.net/VJvpY/3/](http://jsfiddle.net/VJvpY/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:04:20.060

我最终转义`&`了 JSON 服务器端的所有 s。

# .net - 在文件中查找另一个解决方案的结果文件

> ID：11211217
> 
> 赞同：1
> 
> 时间：2012-06-26T15:53:32.180
> 
> 标签：.net, visual-studio-2010, visual-studio, find

我将解决方案复制到另一个目录并更改了所有命名空间，成功删除了 TFS 绑定。我运行应用程序，浏览了一些页面，一切正常。

当我上次检查旧命名空间时，我看到“在文件中查找”导致一些文件在旧解决方案中。不是所有的旧解决方案都匹配文件，而是一些。

我试图找到在新解决方案中引用该文件的内容，但没有成功。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:06:48.843

我是一个狂热的男孩，这是一个付费解决方案，但我一直使用 Telerik 的 JustCode 来处理这样的事情：

[http://www.telerik.com/products/justcode.aspx](http://www.telerik.com/products/justcode.aspx)

其他选项类似于 Resharper：

[http://www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/)

查看试用版，看看它们是否有助于找到您的问题。

您还可以运行此 powershell 命令来清理 obj 和 bin 文件夹

```
Get-ChildItem .\ -include bin,obj -Recurse | foreach ($_) { remove-item $_.fullname -Force -Recurse } 
```

# r - R，地图，votos2011.rda

> ID：11211218
> 
> 赞同：-1
> 
> 时间：2012-06-26T15:53:37.017
> 
> 标签：r, maps, geospatial

尝试按照 Oscar Perpiñán Lamigueiro 的 R 创建地图教程，但不幸的是无法获得 votos2011.rda。文件不会加载

[除了http://dl.dropbox.com/u/40293713/spainVotes/votos2011.rda](http://dl.dropbox.com/u/40293713/spainVotes/votos2011.rda)之外，有谁知道我在哪里可以获得这个文件

谢谢，CC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:05:13.290

该链接对我有用！即我可以下载文件并将其加载到 R 中。您是否尝试直接从 R 中执行此操作？如果是这样试试这个（这对我有用）：

```
tmp <- tempdir()
setwd(tmp)
url <- "http://dl.dropbox.com/u/40293713/spainVotes/votos2011.rda"
f <- file.path(tmp,"votos2011.rda")
download.file(url,f)    #File is ~ 462Kb
load(f)
ls() 
```

运行最后一个命令，我看到了这些对象：

```
[1] "f"         "oldwd"     "tmp"       "url"       "votos2011" 
```

也许这是你的连接？

# javascript - 仅在轴的开始和结束处记号

> ID：11211220
> 
> 赞同：6
> 
> 时间：2012-06-26T15:53:41.527
> 
> 标签：javascript, visualization, d3.js

我是使用 D3 的新手。我只想在开始和结束的轴上打勾。我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T16:15:36.383

最小值和最大值（域范围）是域路径的一部分，因此一种选择是将[axis.ticks](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-ticks)设置为零以隐藏刻度并仅显示域路径。例如：

*   [http://bl.ocks.org/2996766](http://bl.ocks.org/2996766)

但是，域路径不包含值的文本标签。因此，为此，您可以改为将[axis.tickValues](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues)设置为显式刻度的最小值和最大值：

*   [http://bl.ocks.org/2996785](http://bl.ocks.org/2996785)

# jquery - jQuery 检查 attr = value

> ID：11211222
> 
> 赞同：48
> 
> 时间：2012-06-26T15:53:50.450
> 
> 标签：jquery, conditional, attr, if-statement

我的代码似乎有问题。我需要说：

```
if ( $('html').attr('lang').val() == 'fr-FR' ) {
    // do this
} else {
    // do that
} 
```

当我检查控制台时，我得到一个错误，告诉我这不是一个函数。帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-06-26T15:54:30.543

只需删除 .val()。喜欢：

```
if ( $('html').attr('lang') == 'fr-FR' ) {
    // do this
} else {
    // do that
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-26T15:56:09.233

jQuery 的[`attr`](http://api.jquery.com/attr/)方法返回属性的值：

> 该`.attr()`方法仅获取匹配集中第一个元素的属性值。要单独获取每个元素的值，请使用循环构造，例如 jQuery`.each()`或`.map()`方法。

所有你需要的是：

```
$('html').attr('lang') == 'fr-FR' 
```

但是，您*可能*想要进行不区分大小写的匹配：

```
$('html').attr('lang').toLowerCase() === 'fr-fr' 
```

* * *

jQuery 的[`val`](http://api.jquery.com/val/)方法返回表单元素的值。

> 该`.val()`方法主要用于获取`input`,`select`和等表单元素的值`textarea`。在`<select multiple="multiple">`元素的情况下，该`.val()`方法返回一个包含每个选定选项的数组；如果未选择任何选项，则返回`null`.

# java - 有趣的股票报价数据场景

> ID：11211228
> 
> 赞同：1
> 
> 时间：2012-06-26T15:54:16.990
> 
> 标签：java, php, c++, python, ruby

好吧，今天这个问题一直困扰着我。

问题：我目前通过多播以极高的速率接收股票报价数据。我已经解析了这些数据，并以下列形式接收它。

-StockID：Int-64
-TimeStamp：从纪元开始的
微秒 -Price：Int
-Quantity：Int

每秒解析数百个这样的数据包。我试图通过将这些数据打包到由 stockID (key == stockID)(value == array of [timestamp, price, quantity] 元素) 散列的字典/哈希表中来减少存储端的计算。

我还希望每个字典代表 5 分钟间隔内的时间戳。当传入数据的时间戳超过 5 分钟时间间隔时，我希望这些新数据进入代表下一个时间间隔的新字典。此外，一个特殊的键将在键 -1 处散列，告诉该字典每天属于哪个特定的 5 分钟间隔（因此，如果您在上午 12:32 收到一些东西，它应该散列到键 -1 处值为 7 的字典中，因为这表示该特定日期从上午 12:30 到上午 12:35 的时间间隔）。一旦时间过去，过期的 dict 可以发送到 dataWrapper。

现在，您可能正在想出一些想法。但这里有一个很大的限制。进来的时间戳**不一定严格增加；但是，如果一个间隔结束后等待大约 10 秒，那么可以安全地假设每个进入的数据都属于当前间隔。**

我做所有这些复杂事情的原因是为了减少我的应用程序存储端的计算。通过上面的设置，我的存储端线程可以简单地遍历字典中的所有键、值对并将它们存储在存储系统上的相同位置，而无需重新打开文件、重新分配组或更改目录。

祝你好运！顺便说一句，我将不胜感激任何答案。:)

如果你可以用 python 给我发送一些东西（这就是我正在做的项目），但我可以完全理解 Java、C++、Ruby 或 PHP。

**概括**

我正在尝试将股票数据放入代表每个字典 5 分钟间隔的字典中。数据附带的时间戳决定了它应该放入哪个特定的字典。这可能相对容易，只是时间戳在输入时不会严格增加，因此一旦 5 分钟过去，字典就不能立即发送到数据包装器时间戳，因为不能保证在 10 秒内不再接收任何数据，在此之后可以将其发送到包装器。

我只想要任何可以帮助我安排这个的想法、算法或部分实现。我们如何在时间戳（用于数据）和实际时间（10 秒缓冲区）内切换字典的当前使用。

**澄清编辑**

5 分钟窗口应该是数据驱动的（基于时间戳），但是 10 秒超时似乎是时钟时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:09:34.893

也许我错过了一些东西....

看起来您希望将数据保留在 5 分钟的存储桶中，但您无法确定存储桶翻转后最长 10 秒内是否拥有存储桶的所有数据。

这意味着对于每个仪器，您需要保留当前存储桶和前一个存储桶。当它超过 5 分钟边界 10 秒时，您可以发布/写出旧存储桶。

# javascript - 以编程方式设置 Javascript 实例变量

> ID：11211230
> 
> 赞同：1
> 
> 时间：2012-06-26T15:54:22.087
> 
> 标签：javascript, metaprogramming, instance-variables

我将获得一个对象数组，并希望在基于属性的类中设置实例变量。所以如果我得到这个：

```
ary = [{type: 'walrus', name: 'GorbyPuff'}, {type: 'humanoid', occupation: 'KingSlayer'}] 
```

我想初始化一个对象，`@walrus == ary[0]`其中`@humanoid == ary[1]`

在 Ruby 中，我可以使用 instance_variable_set，但是如何在 Javascript 中实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:57:12.153

JS 中没有什么可以为您执行此操作，只需执行一个循环来构建您想要的对象：

```
ary = [{type: 'walrus', name: 'GorbyPuff'}, {type: 'humanoid', occupation: 'KingSlayer'}]
instances={}
for(x=0;x<ary.length;x++) instances[ary[x].type]=ary[x]

document.write(instances.walrus.name) //GorbyBuff
document.write(instances.humanoid.occupation) //KingSlayer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:58:28.120

我不确定我是否能得到你想要达到的目标，但最简单的方法是：

```
var theObj = {};
for(var i=0;i<ary.length;i++)
{
    theObj[ary[i].type] = ary[i];
} 
```

这里的担心是，通过改变`ary`变量你会无意中改变`theObj`：

```
console.log(theObj.walrus.name);//Outputs: GorbyPuff
ary[0].name = 'Nips!';
console.log(theObj.walrus.name);//Outputs: Nips! <-- objects are passed by reference, always 
```

如果`ary`变量是函数作用域的一部分，而结果对象是它的返回值，则不必担心。但是，如果两者都是全局范围的一部分（它们不应该这样做，这是不好的做法），这就会成为一个问题。

因此，我提出了这种方法：

```
var obj = {};
var i;
while (ary.length !== 0)
{
    i = ary.splice(0,1)[0];//removes element from array
    if (i.hasOwnProperty('type'))//always best to check the property you're going to use is there
    {
        obj[i.type] = i;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:03:44.450

如果你想使用该对象数组作为原型，你可以这样做：

```
var Walrus = function(){};
Walrus.prototype=ary[0];
var aWalrus = new Walrus(); // creates a new Walrus.  aWalrus.name => GorbyPuff 
```

在 Javascript the Good Parts 中，Douglas Crawford 描述了一种更通用的方法：

```
if (typeof Object.create !== 'function') {
   Object.create = function (o) {
      var F = function () {};
      F.prototype = o;
      return new F();
   };
} 
```

您可以像这样使用它：

```
var aWalrus = Object.create(ary[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:04:14.403

这是您想要的示例：

```
// the class:
function MyClass(){
  // stuff
}

// the data object
var o = [
  {type:"MyClass",name:"a name"}
]

// how to instantiate:
var instances = [];
for(var i=0;i<o.length;i++){
  if(typeof this[o[i].type] == "function")
    instances.push(new this[o[i].type](o[i].name))
} 
```

如果在函数中创建类，则需要使用“this”作为对该函数的引用，否则可以使用“window”

# python - python属性查找过程如何工作？

> ID：11211233
> 
> 赞同：25
> 
> 时间：2012-06-26T15:54:38.067
> 
> 标签：python, attributes, python-datamodel

当我说“python 属性查找过程”时，我的意思是：当你写 x.foo 时，python 做了什么？

在网上搜索我没有找到太多关于此的文档，我发现的最好的论文之一将过程恢复到以下步骤（您可以在[此处](http://www.cafepy.com/article/python_attributes_and_methods/python_attributes_and_methods.html)查看完整文章）

1.  如果 attrname 是 objectname 的特殊（即 Python 提供的）属性，则返回它。
2.  检查 objectname.__class__.__dict__ 的 attrname。如果存在并且是数据描述符，则返回描述符结果。搜索 objectname.__class__ 的所有基以查找相同的案例。
3.  检查 objectname.__dict__ 的 attrname，如果找到则返回。如果 objectname 是一个类，也搜索它的基类。如果它是一个类并且在它或其基中存在描述符，则返回描述符结果。
4.  检查 objectname.__class__.__dict__ 的 attrname。如果存在且是非数据描述符，则返回描述符结果。如果它存在并且不是描述符，则返回它。如果它存在并且是一个数据描述符，我们就不应该在这里，因为我们会在第 2 点返回。搜索 objectname.__class__ 的所有基以查找相同的情况。
5.  引发属性错误。

起初这似乎是正确的，但属性查找过程有点复杂，例如对于 x.foo，如果 x 是类或实例，它的行为就不一样了。

我发现了一些无法通过这种方式解释的样本。考虑以下python代码：

```
class Meta(type):
    def __getattribute__(self, name):
        print("Metaclass getattribute invoked:", self)
        return type.__getattribute__(self, name)

    def __getattr__(self, item):
        print('Metaclass getattr invoked: ', item)
        return None

class C(object, metaclass=Meta):
    def __getattribute__(self, name):
        print("Class getattribute invoked:", args)
        return object.__getattribute__(self, name)

c=C() 
```

现在检查以下行与相应的输出：

```
>> C.__new__
Metaclass getattribute invoked: <class '__main__.C'>
<built-in method __new__ of type object at 0x1E1B80B0>

>> C.__getattribute__
Metaclass getattribute invoked: <class '__main__.C'>
<function __getattribute__ at 0x01457F18>

>> C.xyz
Metaclass getattribute invoked: <class '__main__.C'>
Metaclass getattr invoked:  xyz
None

>> c.__new__
Class getattribute invoked: (<__main__.C object at 0x013E7550>, '__new__')
<built-in method __new__ of type object at 0x1E1B80B0>

>> c.__getattribute__
Class getattribute invoked: (<__main__.C object at 0x01438DB0>, '__getattribute__')
Metaclass getattribute invoked: <class '__main__.C'>
<bound method C.__getattribute__ of <__main__.C object at 0x01438DB0>>

>> 
```

我的结论是（考虑到我们正在搜索 x.foo）：

*   __getattribute__ 对于 < type 'type' > 和 < type 'object' > 的实例是不同的。对于 C.foo()，首先在 C.__dict__ 上搜索 'foo'，如果找到则返回（而不是搜索 type(C)），对于 x.foo()，在 type(x).__dict__ 上搜索 'foo' 和在 x.__dict__ 上。
*   __getattribute__ 方法总是在 type(x) 上解析，我不明白的是最后一种情况：c.__getattribute__, is not object contains a method __getattribute__ (and C继承 from object)，那么为什么元类getattribute方法得到叫。

有人可以解释一下吗？或者告诉我在哪里可以找到有关此的一些文档，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:19:58.583

如果您添加`print("Metaclass getattribute invoked:", self, name)`，您会看到：

```
>>> c.__getattribute__
Class getattribute invoked: <__main__.C object at 0x2acdbb1430d0> __getattribute__
Metaclass getattribute invoked: <class '__main__.C'> __name__
<bound method C.__getattribute__ of <__main__.C object at 0x2acdbb1430d0>> 
```

为了构建表达式，元类`__getattribute__`被调用，以便它可以打印。`repr``c.__getattribute__``C``__name__`

顺便说一句，`__getattribute__`类和元类的工作方式相同；首先在实例上查找属性，然后在实例的类型上查找。

```
>>> Meta.foo = 1
>>> C.foo
('Metaclass getattribute invoked:', <class '__main__.C'>, 'foo')
1
>>> c.foo
('Class getattribute invoked:', <__main__.C object at 0x2acdbb1430d0>, 'foo')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 5, in __getattribute__
AttributeError: 'C' object has no attribute 'foo'
>>> C.bar = 2
>>> c.bar
('Class getattribute invoked:', <__main__.C object at 0x2acdbb1430d0>, 'bar')
2 
```

# concurrency - goroutine的奇怪行为

> ID：11211237
> 
> 赞同：0
> 
> 时间：2012-06-26T15:54:58.297
> 
> 标签：concurrency, go, goroutine

我刚刚尝试了以下代码，但结果似乎有点奇怪。它先打印奇数，然后打印偶数。我真的很困惑。我曾希望它一个接一个地输出奇数和偶数，就像 1, 2, 3, 4... 一样。谁能帮我？

```
package main

import (
    "fmt"
    "time"
)

func main() {
    go sheep(1)
    go sheep(2)
    time.Sleep(100000)
}

func sheep(i int) {
    for ; ; i += 2 {
        fmt.Println(i,"sheeps")
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T16:03:59.207

您很可能只使用一个 cpu 线程运行。所以它运行第一个 goroutine，然后运行第二个。如果你告诉 go 它可以在多个线程上运行，那么只要操作系统有空闲时间在 cpu 上运行，那么两者都可以同时运行。您可以通过在运行二进制文件之前设置 GOMAXPROCS=2 来证明这一点。或者你可以尝试在你的羊函数中添加一个 runtime.Gosched() 调用，看看是否会触发运行时以允许另一个 goroutine 运行。

一般来说，最好不要假设两个 goroutine 中的操作之间的排序语义，除非您使用 sync.Mutex 指定特定的同步点或在它们之间通过通道进行通信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T19:32:13.510

未同步的 goroutine 以完全未定义的顺序执行。如果你想打印出类似的东西

```
1 sheeps
2 sheeps
3 sheeps
.... 
```

按照这个确切的顺序，goroutines 是错误的方法。当您不太关心事情发生的顺序时，并发性很好。

您可以通过同步（在`fmt.Println`调用周围锁定互斥锁或使用通道）在程序中强加一个顺序，但这毫无意义，因为您可以更轻松地编写使用单个 goroutine 的代码。

# c - 防止 Ubuntu 12 中缓冲区溢出演示中的分段错误

> ID：11211239
> 
> 赞同：0
> 
> 时间：2012-06-26T15:55:00.450
> 
> 标签：c, security, bash, buffer-overflow

我正在尝试运行这段易受攻击的 C 代码：

```
#include <stdio.h>
#include <stdlib.h>

int add(int x, int y)
{
 int z =10;
 z = x + y;
 return z;
}

main(int argc, char **argv)
{
 int a = atoi(argv[1]);
 int b = atoi(argv[2]);
 int c;

 char buffer[100];

 gets(buffer);
 puts(buffer);

 c = add(a,b);

 printf("Sum of %d+%d = %d\n",a, b, c);

 exit(0);
} 
```

我试图克服分段错误，以便我可以输入整数，但分段错误阻止了这一点。在我尝试过的终端中： **gcc -ggdb -fno-stack-protector -U_FORTIFY_SOURCE -Wa,--execstack -o SimpleDemo SimpleDemo.c**

我仍然遇到分段错误。我不知道接下来要尝试什么。你可能会说，我是一个 ubuntu 新手。我使用的 bash 代码来自这里：

[http://www.evanjones.ca/buffer-overflow-101.html](http://www.evanjones.ca/buffer-overflow-101.html)

我已经有一段时间了，所以非常感谢一些帮助

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:58:25.977

只是解释 hmjd 要求你做什么。

运行（二进制）10 20

# c++ - 并行计算的 Hello World 示例：

> ID：11211253
> 
> 赞同：1
> 
> 时间：2012-06-26T15:55:28.530
> 
> 标签：c++, parallel-processing

我是并行计算的新手，并且遇到了服务器/客户端连接的问题。我在我学校的集群上运行 C++ 代码[http://code.google.com/p/rockstar/并且除了编译之外没有任何运气。](http://code.google.com/p/rockstar/)我收到服务器和客户端节点之间的各种通信错误。

无论如何，我想知道是否有人有一个好的、简单的程序示例，我可以在集群或 xcode 上运行以测试问题是否出在我尝试运行的代码或集群本身。

此外，诸如 XCode 之类的环境是否能够自行运行并行作业（以测试 hello world）还是需要添加？

感谢您的帮助，（我一直在寻找解决方案一段时间，但到目前为止找不到任何可以理解的解释）。

泰勒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:34:01.880

你不需要任何插件。只需与 pthread 链接，然后开始使用线程 api。我会首先尝试产生一些线程并加入它们。然后我会了解互斥锁。

我发布了一些我在这里使用的线程类：http: [//oroboro.com/portable-threads-and-Mutexs](http://oroboro.com/portable-threads-and-Mutexes)

# iis-7 - 无法在 Sitecore 5 中解析别名

> ID：11211254
> 
> 赞同：1
> 
> 时间：2012-06-26T15:55:29.407
> 
> 标签：iis-7, sitecore

我们最近将使用 Sitecore 5 CMS 构建的网站移至新的 Server 2008 R2 / IIS 7.5 机器。但在此更改之后，我们的 Sitecore 别名不再解析。

**更新**我认为问题与我们的服务器移动无关。Sitecore API 中发生了一些奇怪的事情。

问题是这个对 Aliases.Exists() 的方法调用总是返回 false：

```
if (Sitecore.Context.Database.Aliases.Exists(args.LocalPath))
{
    var aliasId = Sitecore.Context.Database.Aliases.GetTargetID(args.LocalPath);        

    ...
} 
```

但我可以使用以下代码获取别名节点：

```
var folder = Sitecore.Context.Database.Items["/sitecore/system/Aliases"];
var aliasItem = folder.Axes.GetChild(args.LocalPath); 
```

其中 args.LocalPath 类似于“/thisIsAnAlias”。

我们在 web.config 文件中打开了 AliasesActive，并且匿名用户对 Alias 节点具有读取权限。

难道我做错了什么？为什么 Context.Database.Aliases 代码找不到别名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:34:11.540

可能已经检查过了，但是您是否查看过 System > Aliases 文件夹以检查别名是否仍链接到它们各自的项目？在“数据”下有一个字段，您可以在其中确认这一点，称为“链接项目”。

# unit-testing - 带有 Glassfish 和 JPA 的 JUnit

> ID：11211256
> 
> 赞同：1
> 
> 时间：2012-06-26T15:55:38.403
> 
> 标签：unit-testing, jpa, junit, glassfish, junit4

我有一个在 Glassfish v3 中运行的 Web 应用程序。它是通过 JSF v2 和 JPA 实现的（因此有一个 persistence.xml 声明为 JTA 数据源）。

如果我尝试使用 JUnit 测试我的存储库，它会失败查找并给我这个错误：

```
javax.naming.NamingException: Lookup failed for 'java:comp/env/persistence/em' in SerialContext[myEnv=
java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory,
java.naming.factory.url.pkgs=com.sun.enterprise.naming, 
java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} 
[Root exception is javax.naming.NamingException: Invocation exception: Got null ComponentInvocation ] 
```

它似乎要求我无法提供的 transaction-type="RESOURCE_LOCAL"，因为它与 Glassfish 的 transaction-type="JTA" 冲突。

所以，我想问的是，是否有可能找到一种方法来运行 JUnit，而无需 [强烈] 更改我的 webapp 的配置。谢谢， 安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:41:57.307

对于真正的容器内测试，您应该看看[Arquillian](http://arquillian.org)。它允许您在容器内运行单元测试。

您应该查看[http://arquillian.org/guides/](http://arquillian.org/guides/)上的文档和 GitHub 上的展示[https://github.com/arquillian/arquillian-showcase/](https://github.com/arquillian/arquillian-showcase/)。还有一个 JSF 相关的展示。

关于你的配置。我强烈建议您以这样一种方式配置您的项目，即您可以在生产中使用不同的配置。

如果您的测试只需要一个有效的 JPA 环境，那么您应该执行以下操作：

*   使用 .创建第二个 JPA 配置`transaction-type="RESOURCE_LOCAL"`。
*   将实体管理器的设置器添加到您的 bean。
*   在您的测试设置中创建实体管理器，就像在独立的 Java 应用程序中一样。
*   在 bean 中手动注入实体管理器。
*   尝试使用像[Mockito](http://code.google.com/p/mockito/)这样的模拟框架来模拟应用程序的所有其他部分，这些部分不是当前测试的一部分，而是测试所需的。

第二种方法取决于您的架构及其为您提供的可能性。它允许您编写非常细粒度的单元测试。第一种方法对于测试容器中应用程序的真实行为非常有用。

# java - csv解析器读取标题

> ID：11211257
> 
> 赞同：11
> 
> 时间：2012-06-26T15:55:38.517
> 
> 标签：java, parsing, csv

我正在研究 csv 解析器，我想分别读取标题和 csv 文件的其余部分。这是我读取 csv 的代码。

当前代码读取 csv 文件中的所有内容，但我需要单独读取标题。请帮助我解决这个问题。

```
public class csv {

private void csvRead(File file)
{
    try
    {
    BufferedReader br = new BufferedReader( new FileReader(file));
    String strLine = "";
    StringTokenizer st = null;
    File cfile=new File("csv.txt");
    BufferedWriter writer = new BufferedWriter(new FileWriter(cfile));
    int tokenNumber = 0;

    while( (strLine = br.readLine()) != null)
    {
            st = new StringTokenizer(strLine, ",");
            while(st.hasMoreTokens())
            {

                    tokenNumber++;
                    writer.write(tokenNumber+"  "+ st.nextToken());
                    writer.newLine();
            }

            tokenNumber = 0;
            writer.flush();
    }
}

    catch(Exception e)
    {
        e.getMessage();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-01-26T20:36:20.143

我们有 CSVFormat 中可用的 withHeader() 方法。如果您使用此选项，那么您将能够使用标题读取文件。

```
CSVFormat format = CSVFormat.newFormat(',').withHeader();
Map<String, Integer> headerMap = dataCSVParser.getHeaderMap(); 
```

会给你所有的标题。

```
public class CSVFileReaderEx {
    public static void main(String[] args){
        readFile();
    }

    public static void readFile(){
         List<Map<String, String>> csvInputList = new CopyOnWriteArrayList<>();
         List<Map<String, Integer>> headerList = new CopyOnWriteArrayList<>();

         String fileName = "C:/test.csv";
         CSVFormat format = CSVFormat.newFormat(',').withHeader();

          try (BufferedReader inputReader = new BufferedReader(new FileReader(new File(fileName)));
                  CSVParser dataCSVParser = new CSVParser(inputReader, format); ) {

             List<CSVRecord> csvRecords = dataCSVParser.getRecords();

             Map<String, Integer> headerMap = dataCSVParser.getHeaderMap();
              headerList.add(headerMap);
              headerList.forEach(System.out::println);

             for(CSVRecord record : csvRecords){
                 Map<String, String> inputMap = new LinkedHashMap<>();

                 for(Map.Entry<String, Integer> header : headerMap.entrySet()){
                     inputMap.put(header.getKey(), record.get(header.getValue()));
                 }

                 if (!inputMap.isEmpty()) {
                     csvInputList.add(inputMap);
                } 
             }

             csvInputList.forEach(System.out::println);

          } catch (Exception e) {
             System.out.println(e);
          }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T16:37:11.293

请考虑使用[Commons CSV](http://commons.apache.org/csv/)。这个库是根据[RFC 4180 - Common Format and MIME Type for Comma-Separated Values (CSV) Files](https://www.rfc-editor.org/rfc/rfc4180)编写的。什么是兼容阅读这样的行：

```
"aa,a","b""bb","ccc" 
```

而且使用非常简单，只有 3 个类，以及文档中的一个小示例：

> 解析具有制表符作为分隔符、'"' 作为可选值封装器以及以 '#' 开头的注释的 csv 字符串：

```
 CSVFormat format = new CSVFormat('\t', '"', '#');
 Reader in = new StringReader("a\tb\nc\td");
 String[][] records = new CSVParser(in, format).getRecords(); 
```

此外，您还可以使用已作为常量使用的解析器：

*   **DEFAULT** - RFC 4180 定义的标准逗号分隔格式。
*   **EXCEL** - Excel 文件格式（使用逗号作为值分隔符）。
*   **MYSQL** - SELECT INTO OUTFILE 和 LOAD DATA INFILE 操作使用的默认 MySQL 格式。TDF - 制表分隔格式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T16:04:01.147

你考虑[过 OpenCSV](http://opencsv.sourceforge.net/)吗？

上一个问题在这里...

[用于 Java 的 CSV API](https://stackoverflow.com/questions/101100/csv-api-for-java)

看起来你可以很容易地拆分标题......

```
String fileName = "data.csv";
CSVReader reader = new CSVReader(new FileReader(fileName ));

// if the first line is the header
String[] header = reader.readNext();

// iterate over reader.readNext until it returns null
String[] line = reader.readNext(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-03T04:16:38.573

你的代码在这里

```
while( (strLine = br.readLine()) != null)
    {
      //reads everything in your csv
    } 
```

将打印您的所有 CSV 内容。

例如，以下内容获取您的标头：

```
Reader in = ...;
 CSVFormat.EXCEL.withHeader("Col1", "Col2", "Col3").parse(in); 
```

正如建议的那样，使用 apache commons 库中预定义的 CSVFormat 可以更轻松。链接在这里（[https://commons.apache.org/proper/commons-csv/user-guide.html](https://commons.apache.org/proper/commons-csv/user-guide.html)）。干杯。

# extjs4.1 - 子类化 Ext JS 组件的正确方法是什么？

> ID：11211258
> 
> 赞同：2
> 
> 时间：2012-06-26T15:55:40.747
> 
> 标签：extjs4.1

哪种是扩展/子类组件的正确方法？

```
Ext.define('Holidays.Components.UserInfo', {
extend: 'Ext.panel.Panel',
alias: 'widget.UserInfo',
region: 'west',
split: true,
title: 'Categories',
width: 300,
collapsible: true,
layout: 'border',
animCollapse: false,

initComponent: function () {
    var me = this;

    Ext.apply(me, {
        items: [{
            xtype: 'panel',
            region: 'center',
            border: false
        }, {
            xtype: 'panel',
            title: 'Tab 2',
            region: 'south',
            collapsible: true,
            height: 200
        }, ]
    });
    me.callParent(arguments);
}
}); 
```

或这个：

```
Ext.define('Holidays.Components.UserInfo', {
extend: 'Ext.panel.Panel',
alias: 'widget.UserInfo',

initComponent: function () {
    var me = this;

    Ext.apply(me, {
        width: 300,
        collapsible: true,
        layout: 'border',
        animCollapse: false,
        region: 'west',
        split: true,
        title: 'Categories',
        items: [{
            xtype: 'panel',
            region: 'center',
            border: false
        }, {
            xtype: 'panel',
            title: 'Tab 2',
            region: 'south',
            collapsible: true,
            height: 200
        }, ]
    });
    me.callParent(arguments);
}
}); 
```

当我使用第一个版本创建我的类的实例时，像这样

```
this.userPanel = Ext.create("Holidays.Components.UserInfo"); 
```

我的面板在折叠时有动画，并且我得到了奇怪的布局行为。

我可以在定义中设置哪些属性，在 initComponent 中必须设置哪些属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:46:02.097

您将在[此处](https://stackoverflow.com/questions/6871594/best-practices-concerning-initcomponent-in-ext-define)找到标题问题的完整解释。另请阅读我留给分子人的评论，并查看我评论中包含的链接。

我不确定为什么你在第一个版本中会出现这种奇怪的行为，因为我知道这不应该是这种情况。您能否让我们知道在使用第一个版本时会发生什么，但在 InitComponent中有`layout`和配置？`animCollapse`此外，您是否有机会多次创建此组件？

# opencv - 伽玛校正@幂律变换

> ID：11211260
> 
> 赞同：1
> 
> 时间：2012-06-26T15:55:49.047
> 
> 标签：opencv

我尝试对图像进行一些简单的伽马校正。起初，我尝试使用 Matlab，然后将其应用于 opencv。但我得到不同的结果。下面是部分代码。代码哪里出错了？

在matlab中：

```
for i=1:r;
    for j=1:c;
       imout(i,j)=constant_value*power(img_double(i,j),0.04);
    end
 end 
```

在 OpenCV 中：

```
for(int y=0; y<height; y++){
   for(int x=0; x<width; x++)
   {
        dataNew[y*stepNew+x] = constant_value*pow(dataNew[y*stepNew+x], 0.04);
   }
} 
```

其中图像是无符号 8 位、1 通道图像。我错过了哪一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:20:11.610

我的猜测是您忘记将 OpenCV 中的图像数据缩放到区间 [0,1]。在 Matlab`im2double`中会自动为您执行此操作。因此，对于 8 位图像，这样的东西应该可以工作：

```
dataNew[y*stepNew+x] = 255 * constant_value*pow(dataNew[y*stepNew+x]/255.0, 0.04); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T23:33:34.260

```
"""Function gamma( ) performs gamma(power transform) 
   logt() performs logarithmic transform
   histogram_equal( ) histogram equalization transform
"""

import numpy as np
def gamma(image,gamma = 0.5):
    img_float = np.float32(image)
    max_pixel = np.max(img_float)
    #image pixel normalisation
    img_normalised = img_float/max_pixel
    #gamma correction exponent calulated
    gamma_corr = np.log(img_normalised)*gamma
    #gamma correction being applied
    gamma_corrected = np.exp(gamma_corr)*255.0
    #conversion to unsigned int 8 bit
    gamma_corrected = np.uint8(gamma_corrected)
    return gamma_corrected

def logt(image):
    img_float = np.float32(image)
    max_pixel = np.max(img_float)
    #log correction being caluclated
    log_corrected = (255.0*np.log(1+img_float))/np.log(1+max_pixel)
    #conversion to unsigned int 8 bit
    log_corrected = np.uint8(log_corrected)
    return log_correctedenter code here
def histogram_equal(image):
    img_float = np.float32(image)
    #conversion 2D array to 1D array
    img_flat = img_float.flatten()
    #histogram genreation
    hist,bins = np.histogram(img_float,256,[0,255])
    #histogram cumulative distribution
    cdf = hist.cumsum()
    #to ignore values of cdf = 0
    cdf_masked = np.ma.masked_equal(cdf,0)
    num_cdf_m = (cdf_masked - cdf_masked.min())*255
    den_cdf_m = (cdf_masked.max()-cdf_masked.min())
    cdf_masked = num_cdf_m/den_cdf_m
    cdf = np.ma.filled(cdf_masked,0)
    cdf = np.uint8(cdf)
    img_flat = np.uint8(img_flat)
    img = cdf[img_flat]
    img = np.reshape(img,img_float.shape)
    return img 
```

# sql - 需要帮助来理解这个查询（rails）

> ID：11211261
> 
> 赞同：0
> 
> 时间：2012-06-26T15:55:51.197
> 
> 标签：sql, ruby-on-rails

我有一个架构问题要使用 Rails 应用程序解决。我有图片库，人们可以每天投票（向上或向下）。这些图像按其分数和 created_at 时间戳排序，因此我们获得了包含 48 张图像的顶级图像库（即使当天上传的图像超过 48 张）。

除了当天的顶部，您还可以看到昨天和前两天的顶部图像……我想添加一个功能，允许某人在选择一张图像时查看画廊的上一张图像……换句话说，您可以选择图像5/48 并可以通过单击箭头转到 4/48 图像（上一张）……</p>

以同样的方式，昨天的第一个顶部图像的前一个图像应该引导你到今天的最后一个顶部图像......

这可能很简单，但我找不到合适的查询来完成这项工作……请问有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:49:29.027

好吧，如果您已经有查询以正确的顺序获取图像并知道当前图像，那么很容易找到下一张/上一张。假设`@id`是您当前的图像 ID，您可以执行以下操作：

```
top_images = Image.order("created_at ASC, score DESC")
prev = top_images.where("id < ?", @id).limit(1)
next = top_images.where("id > ?", @id).limit(1) 
```

`ORDER BY created_at ASC, score DESC`如果您希望“上一个”链接在达到当天排名最高的图像后及时返回，这更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:05:19.033

你说的是面包屑。我没有使用过 Ruby，但这里有一个不同的问题，谁的答案可能是你正在寻找的

[Ruby on Rails 中的面包屑](https://stackoverflow.com/q/2280648/1440715)

# java - 向/从 Android 内存写入/读取任何对象

> ID：11211262
> 
> 赞同：0
> 
> 时间：2012-06-26T15:55:52.197
> 
> 标签：java, android

我目前正在写以下方法：

*   从内存中读取对象
*   将对象写入内存

我试图保存一个 String 对象并再次读取它，但我的代码不起作用。

这是我的代码：

```
public void writeObjectToMemory(String filename, Object object) {
        FileOutputStream fos;
        try {
            fos = game.openFileOutput(filename, Context.MODE_PRIVATE);
            ObjectOutputStream os = new ObjectOutputStream(fos);
            os.writeObject(object);
            os.close();
        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();

        } 
        catch (IOException e) {
            e.printStackTrace();

        }

    }

    public void readObjectFromMemory(String filename, Object object) {
        FileInputStream fis;
        try {
            fis = game.openFileInput(filename);
            ObjectInputStream is = new ObjectInputStream(fis);
            object = is.readObject();
            is.close();
        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();

        } 
        catch (StreamCorruptedException e) {
            e.printStackTrace();

        } 
        catch (IOException e) {
            e.printStackTrace();

        } 
        catch (ClassNotFoundException e) {
            e.printStackTrace();

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:06:05.920

你写了 ：

```
public void readObjectFromMemory(String filename, Object object) {
    //...
    object = is.readObject(); 
```

但这`object`只是您传递给函数的参数的副本。您可以在方法内更改该副本（如您所做的那样），但这对实际参数没有影响。

您必须返回您的对象：

```
public Object readObjectFromMemory(String filename) {
    FileInputStream fis;
    Object obj;
    try {
        fis = game.openFileInput(filename);
        ObjectInputStream is = new ObjectInputStream(fis);
        obj = is.readObject();
        is.close();
    } 
    catch (...) {
        return null;
    }

    return obj;
} 
```

阅读本文了解更多详情：[http ://www.cs.utoronto.ca/~dianeh/tutorials/params/](http://www.cs.utoronto.ca/~dianeh/tutorials/params/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:19:57.273

这是任何感兴趣的人的工作代码：

注意：使用时，`readObjectFromMemory(String filename, Object object)`您必须转换返回的对象。

```
/**
     * <b><i>public void writeObjectToMemory(String filename, Object object)</i></b>
     * <br>
     * Since: API 1
     * <br>
     * <br>
     * Write a object to the phone's internal storage.
     * 
     * @param filename 
     * The name of the file you wish to write to.
     *
     *      
     */

    public void writeObjectToMemory(String filename, Object object) {
        FileOutputStream fos;
        try {
            fos = game.openFileOutput(filename, Context.MODE_PRIVATE);
            ObjectOutputStream os = new ObjectOutputStream(fos);
            os.writeObject(object);
            os.close();
            this.gameEngineLog.d(classTAG, "Object successfully written: " + filename);
        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "Object couldn't be opened: " + filename);

        } 
        catch (IOException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "Object couldn't be opened: " + filename);

        }

    }

    /**
     * <b><i>public Object readObjectFromMemory(String filename, Object object)</i></b>
     * <br>
     * Since: API 1
     * <br>
     * <br>
     * Read a object from the phone's internal storage.
     * 
     * @param filename 
     * The name of the file you wish to read from.
     *
     *      
     */

    public Object readObjectFromMemory(String filename, Object object) {
        Object defautObject = null;
        FileInputStream fis;
        try {
            fis = game.openFileInput(filename);
            ObjectInputStream is = new ObjectInputStream(fis);
            defautObject = is.readObject();
            is.close();
            this.gameEngineLog.d(classTAG, "Object successfully read: " + filename);
        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "Object couldn't be opened: " + filename);

        } 
        catch (StreamCorruptedException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "Object couldn't be opened: " + filename);

        } 
        catch (IOException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "Object couldn't be opened: " + filename);

        } 
        catch (ClassNotFoundException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "Object couldn't be opened: " + filename);

        }

        return defautObject;

    } 
```

# java - 在状态通知上放置按钮

> ID：11211269
> 
> 赞同：1
> 
> 时间：2012-06-26T15:56:09.417
> 
> 标签：java, android, oop, user-interface

我想在状态栏的通知上放置两个按钮。当然，在用户触摸以展开它们之前，它们不会出现。我已经使用 RemoteViews 为我的通知创建了自定义布局，但由于我当前的代码结构，我不确定是否可以获得对它们的引用。

```
@Override
public void onMessage(Context context, Intent intent) {
            Log.w("C2DMReceiver",
            "Message Received, this is the message with no payload");
    Bundle extras = intent.getExtras();

    if (extras != null) {
        String[] payload = new String[3];
        payload[0] = (String) extras.get("payload");
        payload[1] = (String) extras.get("payload2");
        SharedPreferences sharedP = Prefs.get(this);
        boolean inApp = sharedP.getBoolean("currentlyInApp", true);
        if (!inApp) {
            createNotification(context, payload);
        }

    }
}

public void createNotification(Context context, String[] payload) {
    SharedPreferences sharedP = Prefs.get(context);
    boolean needsToLogin = sharedP
            .getBoolean("loginFromNotification", true);

    Log.w("C2DMReceiver", "createNotification called");

    NotificationManager notificationmanager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);

    Intent notificationIntent = new Intent(this, WebViewActivity.class);
    Intent notificationIntent2 = new Intent(this, UniteActivity.class);
    PendingIntent pIntent;
    if (needsToLogin) {
        pIntent = PendingIntent.getActivity(this, 0, notificationIntent2,
                PendingIntent.FLAG_CANCEL_CURRENT);

    } else {
        pIntent = PendingIntent.getActivity(this, 0, notificationIntent,
                PendingIntent.FLAG_CANCEL_CURRENT);
    }

    // Compatibility builder
    NotificationCompat.Builder notification = new NotificationCompat.Builder(
            context);
    RemoteViews remote = new RemoteViews(getPackageName(),R.layout.notification);

    //Button okButton = (Button) findViewById(R.layout.notification);

    notification.setAutoCancel(false);
    notification.setContent(remote);
    notification.setContentIntent(pIntent);
    notification.setWhen(System.currentTimeMillis());
    notification.setTicker(payload[0]);
    notification.setSmallIcon(R.drawable.default1);
    notification.setContentTitle(payload[1]);
    notification.setContentText(payload[0]);

    long duration[] = { 100, 300, 100 };
    notification.setVibrate(duration);

    notificationmanager.notify(0, notification.getNotification());
} 
```

onMessage 是从谷歌 C2DM 库中提取的一种方法，其中通知是由从谷歌接收到的意图生成的。如果没有视图，如何使用 findViewById() 获取对按钮的引用？或其他方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:25:35.977

我认为您正在寻找方法：

[RemoteViews.setOnClickPendingIntent(int, android.app.PendingIntent)](http://developer.android.com/reference/android/widget/RemoteViews.html#setOnClickPendingIntent%28int,%20android.app.PendingIntent%29)

* * *

所以，如果你添加...

```
remote.setOnClickPendingIntent(R.id.button, pIntent); 
```

......它应该工作。

# python - 在 Python 中从自定义包导入失败

> ID：11211270
> 
> 赞同：3
> 
> 时间：2012-06-26T15:56:09.573
> 
> 标签：python

所以我有一个`main.py file`内部`/home/richard/projects/hello-python`目录：

```
import sys
   sys.path.append('/home/richard/projects/hello-python')

   from Encode  import Ffmpeg
   x = Ffmpeg()
   x.encode() 
```

然后我在`/home/richard/projects/hello-python/Encode`目录中创建了一个包：

```
__init__.py
Ffmpeg.py 
```

初始化文件为空。`Ffmpeg.py`文件包含：

```
class Ffmpeg(object):

   i = 150

   def __init__(self):
       print "i am constructor"

   def encode(self):
       print "hello world" 
```

现在我`main.py`像这样运行脚本：

```
python main.py 
```

我得到这个输出：

```
richard@richard-desktop:~/projects/hello-python$ python main.py 
Traceback (most recent call last):
  File "main.py", line 5, in <module>
    x = Ffmpeg()
TypeError: 'module' object is not callable
richard@richard-desktop:~/projects/hello-python$ 
```

我认为我的模块有问题，`sys.path`所以我的模块无法正确导入，但我不确定如何修复它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T15:57:42.223

```
from Encode.Ffmpeg import Ffmpeg 
```

# asp.net-mvc-4 - 如何使用 Datacontract 属性添加命名空间并更改 mvc4 api 中的 xml 根节点

> ID：11211273
> 
> 赞同：2
> 
> 时间：2012-06-26T15:56:18.503
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在使用 asp.net mvc4 web api 创建一个 REST 服务。我的服务返回 xml 作为输出。我想更改 xml 响应的一些方面，包括： - xml 根节点 - 添加命名空间 - 删除 xml 中的 xsi:nil 我在我的模型中使用数据上下文文件（Linq to sql dbml 文件）而不是用户定义的类. 我从这个链接[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)读到 我可以使用 DataContract 这样做但不知道在我的情况下如何实现。我不想使用消息处理程序，因为这需要将整个 xml 加载到一个字符串中，并且可能会影响返回的 xml 输出可能很大的性能

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:28:23.217

这个例子应该会有所帮助：

```
[DataContract(Name = "Customer", Namespace = "http://www.contoso.com")]
class Person : IExtensibleDataObject
{
    // To implement the IExtensibleDataObject interface, you must also 
    // implement the ExtensionData property. 
    private ExtensionDataObject extensionDataObjectValue;
    public ExtensionDataObject ExtensionData
    {
        get
        {
            return extensionDataObjectValue;
        }
        set
        {
            extensionDataObjectValue = value;
        }
    }

    [DataMember(Name = "CustName")]
    internal string Name;

    [DataMember(Name = "CustID")]
    internal int ID;

    public Person(string newName, int newID)
    {
        Name = newName;
        ID = newID;
    }

} 
```

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.aspx)上阅读更多内容

# c++ - C++ 进程监视器

> ID：11211277
> 
> 赞同：0
> 
> 时间：2012-06-26T15:56:30.547
> 
> 标签：c++, monitor

我正在尝试在 linux 中创建一个进程监视器，它将告诉我有关 C++ 中进程的信息（它是否正在运行，它已经运行了多长时间......等等）。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:00:48.437

`/proc`我建议在 linux 上学习。

[手册页](http://linux.die.net/man/5/proc)是开始的好地方。基本上，proc 文件系统为您提供了一种获取有关 Unix 上的系统和内核信息的方法，例如 OS（包括 Linux）。

# forms - 尝试使用 Web 浏览器控件将 Google 地图/Bing 地图合并到 Access From 中时，地图不会加载

> ID：11211282
> 
> 赞同：-1
> 
> 时间：2012-06-26T15:56:46.423
> 
> 标签：forms, api, google-maps, ms-access, vba

我正在尝试将 Google 地图合并到我的访问表单中，以便为每条记录显示其地址的地图。使用此视频：

```
http://www.youtube.com/watch?v=GHoy6hsAltc 
```

为了获得指导，我尝试了这个，但我使用了 Bing Maps。我完全按照视频的方式进行操作，但是在视频显示地图的地方，我的窗口本质上是 Bing 搜索菜单，其中输入了地址，但地图所在的位置只有一个白屏。

尝试将 Google 地图添加到我的表单时，我得到了类似的结果。昨天当我尝试它时，通常的谷歌地图窗口出现了，但地图框却是一个灰色的盒子，里面什么都没有。我今天一直在尝试它，而不是灰色填充的框，地图框现在是白色的，通常的消息“正在加载”出现在黄色框中。然而，这个“加载”框会无限期地保留在屏幕上，而白框永远不会加载。

我在网上寻找答案，我发现最接近的是几篇在尝试实施谷歌地图时提到灰框的帖子，但我一直无法找到解决方案。如果有人可以帮助我指出发生此问题的原因，我将不胜感激。

编辑：这是我用于 Bing 地图的 URL：

```
="bing.com/maps/default.aspx?setmkt=en-CA&where1=" & [sAddress] 
```

其中 sAddress 是地址来源表单上的文本框

编辑2：如果有帮助，这是我屏幕上发生的事情的屏幕截图：

![http://i.imgur.com/bDHCm.jpg](../Images/c23886cabc06429e1238fe5815d143e4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:46:57.137

新的 Web 浏览器控件与任何其他绑定控件一样工作。文本框，或组合框或其他。（因此，文本框的有效表达式是 ="abc"，但不是 abc 或 "abc"。）

我认为您的表达需要“www”部分。以下表达式对我有用：

`="http://www.bing.com/maps/default.aspx?setmkt=en-CA&where1=" & [Address]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T02:25:40.800

尝试这个：

函数 OpenMap（地址、城市、州、邮编、国家）

```
Dim strAddress As String
strAddress = Nz(Address)
strAddress = strAddress & IIf(strAddress = "", "", ", ") & Nz(City)
strAddress = strAddress & IIf(strAddress = "", "", ", ") & Nz(State)
strAddress = strAddress & IIf(strAddress = "", "", ", ") & Nz(Zip)
strAddress = strAddress & IIf(strAddress = "", "", ", ") & Nz(Country)
'Debug.Print strAddress

If strAddress = "" Then
    MsgBox "There is no address to map."
Else
    'Application.FollowHyperlink "http://www.bing.com/maps/default.aspx?q=" & strAddress
    Application.FollowHyperlink ("http://maps.google.com/maps?f=q&hl=en&q=" & strAddress)
End If 
```

结束功能

**我从一个名为“cmdOpenMap”的按钮中的表单调用这个函数顺便说一句，我最近切换到谷歌地图而不是 Bing，因为我发现结果更好。**

Private Sub cmdOpenMap_Click() OpenMap [A​​ddress], [City], [Prov], [PostalCode], "Canada" End Sub

# c# - DataTable 上的透视逻辑 LINQ

> ID：11211283
> 
> 赞同：6
> 
> 时间：2012-06-26T15:56:46.373
> 
> 标签：c#, linq, datatable, pivot

所以我看到了一些描述这个的帖子，但不能完全理解我的情况。我曾经有一个使用 PIVOT 命令对我的表进行排序的 SQL 查询，我正在尝试通过 LINQ 将此逻辑移动到我们的应用程序中。该表存储在 DataTable 中，如下所示。

```
ObjectName | ColumnName  |  Property  |  Value
----------------------------------------------
foo        | bar         |  a         | w
foo        | bar         |  b         | x
foo        | bar         |  c         | y
foo        | bar         |  d         | z
foo        | test        |  a         | i
foo        | test        |  b         | j
foo        | test        |  c         | k
foo        | test        |  d         | l 
```

我想把它变成一个看起来像这样的 DataTable。

```
ObjectName   |  ColumnName  |  a  |  b  |  c  |  d 
---------------------------------------------------
foo          |  bar         |  w  |  x  |  y  |  z
foo          |  test        |  i  |  j  |  k  |  l 
```

所以我尝试了这样的事情......

```
var query = dt.AsEnumerable()
    .GroupBy(row => row.Field<string>("ColumnName"))
    .Select(g => new {
        ColumnName = g.Key,
        a = g.Where(row => row.Field<string>("Property") == "a").Select(c => c.Field<string>("Value")),
        b = g.Where(row => row.Field<string>("Property") == "b").Select(c => c.Field<string>("Value")),
        c = g.Where(row => row.Field<string>("Property") == "c").Select(c => c.Field<string>("Value")),
        d = g.Where(row => row.Field<string>("Property") == "d").Select(c => c.Field<string>("Value"))
    }); 
```

哪个不包括 ObjectName （由于某种原因给我一个编译错误来添加它？）。查看调试器 ColumnName 显示正确，但其余大部分都是乱码。抱歉，我的 LINQ 技能很差，我正在努力学习，但很容易混淆。

我猜我的数据类型无法正确显示以无法使用该扩展方法，但我有点过头了。有什么建议么？

编辑仍然出现一些错误，我正在与这条线作斗争

```
DataTable newDT = query.CopyToDataTable(); 
```

但我收到错误消息

> 类型“AnonymousType#1”不能用作泛型类型或方法“System.Data.DataTableExtensions.CopyToDataTable (System.Collections.Generic.IEnumerable)”中的类型参数“T”。没有从“AnonymousType#1”到“System.Data.DataRow”的隐式引用转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:27:14.773

试试这个：

```
class Program
{
//Helper method to make the Select cleaner:
private static string GetProperty(IEnumerable<DataRow> rows, string propertyName)
{
    return rows
        .Where(row => row.Field<string>("Property") == propertyName)
        .Select(c => c.Field<string>("Value"))
        .FirstOrDefault();
}

//helper method for populating the datatable
private static void addRow(DataTable dt, string objectName, string columnName
    , string property, string value)
{
    var row = dt.NewRow();
    row["ObjectName"] = objectName;
    row["ColumnName"] = columnName;
    row["Property"] = property;
    row["Value"] = value;
    dt.Rows.Add(row);
}

public static void Main(string[] args)
{

    DataTable dt = new DataTable();
    dt.Columns.Add("ObjectName");
    dt.Columns.Add("ColumnName");
    dt.Columns.Add("Property");
    dt.Columns.Add("Value");

    addRow(dt, "foo", "bar", "a", "w");
    addRow(dt, "foo", "bar", "b", "x");
    addRow(dt, "foo", "bar", "c", "y");
    addRow(dt, "foo", "bar", "d", "z");
    addRow(dt, "foo", "test", "a", "i");
    addRow(dt, "foo", "test", "b", "j");
    addRow(dt, "foo", "test", "c", "k");
    addRow(dt, "foo", "test", "d", "l");

    var query = dt.AsEnumerable()
        .GroupBy(row => new
        {
            ObjectName = row.Field<string>("ObjectName"),
            ColumnName = row.Field<string>("ColumnName")
        })
        .Select(g => new
        {
            ObjectName = g.Key.ObjectName,
            ColumnName = g.Key.ColumnName,
            a = GetProperty(g, "a"),
            b = GetProperty(g, "b"),
            c = GetProperty(g, "c"),
            d = GetProperty(g, "d"),
        })
        .CopyToDataTable();

    foreach (DataRow row in query.Rows)
    {
        foreach (DataColumn column in query.Columns)
        {
            System.Console.Write(row[column] + "\t");
        }
        System.Console.WriteLine();
    }

    Console.WriteLine("Press any key to exit. . .");
    Console.ReadKey(true);
}
} 
```

这是我用来复制到数据表的代码，因为您没有说明您使用的是什么：

```
using System;
using System.Data;
using System.Collections.Generic;
using System.Reflection;

/// <summary>
/// Code copied directly from http://msdn.microsoft.com/en-us/library/bb669096.aspx
/// </summary>
/// <typeparam name="T"></typeparam>
public class ObjectShredder<T>
{
    private System.Reflection.FieldInfo[] _fi;
    private System.Reflection.PropertyInfo[] _pi;
    private System.Collections.Generic.Dictionary<string, int> _ordinalMap;
    private System.Type _type;

    // ObjectShredder constructor.
    public ObjectShredder()
    {
        _type = typeof(T);
        _fi = _type.GetFields();
        _pi = _type.GetProperties();
        _ordinalMap = new Dictionary<string, int>();
    }

    /// <summary>
    /// Loads a DataTable from a sequence of objects.
    /// </summary>
    /// <param name="source">The sequence of objects to load into the DataTable.</param>
    /// <param name="table">The input table. The schema of the table must match that 
    /// the type T.  If the table is null, a new table is created with a schema 
    /// created from the public properties and fields of the type T.</param>
    /// <param name="options">Specifies how values from the source sequence will be applied to 
    /// existing rows in the table.</param>
    /// <returns>A DataTable created from the source sequence.</returns>
    public DataTable Shred(IEnumerable<T> source, DataTable table, LoadOption? options)
    {
        // Load the table from the scalar sequence if T is a primitive type.
        if (typeof(T).IsPrimitive)
        {
            return ShredPrimitive(source, table, options);
        }

        // Create a new table if the input table is null.
        if (table == null)
        {
            table = new DataTable(typeof(T).Name);
        }

        // Initialize the ordinal map and extend the table schema based on type T.
        table = ExtendTable(table, typeof(T));

        // Enumerate the source sequence and load the object values into rows.
        table.BeginLoadData();
        using (IEnumerator<T> e = source.GetEnumerator())
        {
            while (e.MoveNext())
            {
                if (options != null)
                {
                    table.LoadDataRow(ShredObject(table, e.Current), (LoadOption)options);
                }
                else
                {
                    table.LoadDataRow(ShredObject(table, e.Current), true);
                }
            }
        }
        table.EndLoadData();

        // Return the table.
        return table;
    }

    public DataTable ShredPrimitive(IEnumerable<T> source, DataTable table, LoadOption? options)
    {
        // Create a new table if the input table is null.
        if (table == null)
        {
            table = new DataTable(typeof(T).Name);
        }

        if (!table.Columns.Contains("Value"))
        {
            table.Columns.Add("Value", typeof(T));
        }

        // Enumerate the source sequence and load the scalar values into rows.
        table.BeginLoadData();
        using (IEnumerator<T> e = source.GetEnumerator())
        {
            Object[] values = new object[table.Columns.Count];
            while (e.MoveNext())
            {
                values[table.Columns["Value"].Ordinal] = e.Current;

                if (options != null)
                {
                    table.LoadDataRow(values, (LoadOption)options);
                }
                else
                {
                    table.LoadDataRow(values, true);
                }
            }
        }
        table.EndLoadData();

        // Return the table.
        return table;
    }

    public object[] ShredObject(DataTable table, T instance)
    {

        FieldInfo[] fi = _fi;
        PropertyInfo[] pi = _pi;

        if (instance.GetType() != typeof(T))
        {
            // If the instance is derived from T, extend the table schema
            // and get the properties and fields.
            ExtendTable(table, instance.GetType());
            fi = instance.GetType().GetFields();
            pi = instance.GetType().GetProperties();
        }

        // Add the property and field values of the instance to an array.
        Object[] values = new object[table.Columns.Count];
        foreach (FieldInfo f in fi)
        {
            values[_ordinalMap[f.Name]] = f.GetValue(instance);
        }

        foreach (PropertyInfo p in pi)
        {
            values[_ordinalMap[p.Name]] = p.GetValue(instance, null);
        }

        // Return the property and field values of the instance.
        return values;
    }

    public DataTable ExtendTable(DataTable table, Type type)
    {
        // Extend the table schema if the input table was null or if the value 
        // in the sequence is derived from type T.            
        foreach (FieldInfo f in type.GetFields())
        {
            if (!_ordinalMap.ContainsKey(f.Name))
            {
                // Add the field as a column in the table if it doesn't exist
                // already.
                DataColumn dc = table.Columns.Contains(f.Name) ? table.Columns[f.Name]
                    : table.Columns.Add(f.Name, f.FieldType);

                // Add the field to the ordinal map.
                _ordinalMap.Add(f.Name, dc.Ordinal);
            }
        }
        foreach (PropertyInfo p in type.GetProperties())
        {
            if (!_ordinalMap.ContainsKey(p.Name))
            {
                // Add the property as a column in the table if it doesn't exist
                // already.
                DataColumn dc = table.Columns.Contains(p.Name) ? table.Columns[p.Name]
                    : table.Columns.Add(p.Name, p.PropertyType);

                // Add the property to the ordinal map.
                _ordinalMap.Add(p.Name, dc.Ordinal);
            }
        }

        // Return the table.
        return table;
    }
}

/// <summary>
/// Code copied directly from http://msdn.microsoft.com/en-us/library/bb669096.aspx
/// </summary>
public static class CustomLINQtoDataSetMethods
{
    public static DataTable CopyToDataTable<T>(this IEnumerable<T> source)
    {
        return new ObjectShredder<T>().Shred(source, null, null);
    }

    public static DataTable CopyToDataTable<T>(this IEnumerable<T> source,
                                                DataTable table, LoadOption? options)
    {
        return new ObjectShredder<T>().Shred(source, table, options);
    }

} 
```

# windows-8 - 可以通过单击或左键选择 ListView 项目吗？

> ID：11211284
> 
> 赞同：1
> 
> 时间：2012-06-26T15:56:48.267
> 
> 标签：windows-8, microsoft-metro, semantic-zoom

我正在开发一个 Windows 8 Metro 应用程序，它以下列方式使用语义缩放：

*   放大的视图包含`ListView`允许用户交互的复杂控件（通过使用 TextBox 和 Button 控件），因此此 ListView 具有`IsItemClickEnabled="False"`. 用户必须手动触发缩小视图。

*   缩小视图包含另一个`ListView`显示一个简单列表的列表，该列表显示放大视图中控件的一些状态信息。这个 ListView的`ItemsSource`属性动态地填充了在视图激活时创建的普通对象。这个 ListView 有`IsItemClickEnabled="True"`.

**我想要什么：**

当用户点击或单击缩小视图中的项目时，应激活放大视图，并且应使与单击的项目匹配的控件可见（放大的 ListView 允许滚动，因此可以隐藏控件）。只要在`SelectionChanged`单击项目时触发事件，我就知道如何执行此操作。

**相反会发生什么：**

当用户在缩小视图中点击或单击项目时，放大视图会自动激活，并且不会`SelectionChanged`触发任何事件。但是，当使用右键单击或 Ctrl+单击时，它可以正常工作。

**所以，我的问题是：**

`SelectionChanged`除了右键单击和 Ctrl+单击之外，还有什么方法可以让 ListView 在项目点击或左键单击时触发事件？如果没有，我如何检测点击或左键单击？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:14:05.187

我找到了解决方案。我必须控制为列表`Tapped`定义的控件的事件，而`DataTemplate`不是`ListView`自身的事件：

```
<SemanticZoom...>
    <SemanticZoom.ZoomedOutView>
        <ListView ...>
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border ... Tapped="Item_Tapped"> 
```

在`Item_Tapped`方法中，我只是投射`sender`并`FrameworkElement`查看它的`DataContext`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:08:37.547

在 Windows 8 中不再有点击事件，而是有手势（即 Tapped、RightTapped、Holding）和指针（即 Pressed、Release、Moved）。从这里开始，您可以根据所使用的输入设备（即鼠标、笔、触摸）来处理不同的情况。

这里以一小段代码为例。

```
void MyElement_Holding(object sender, Windows.UI.Input.HoldingEventArgs e)
{
    switch (e.PointerDeviceType)
    {
        case PointerDeviceType.Mouse:
            break;
        case PointerDeviceType.Pen:
            break;
        case PointerDeviceType.Touch:
            break;
    }
} 
```

希望这有帮助。

# java - 在 Java 中是否可以在同一个 catch 块中捕获两个异常？

> ID：11211286
> 
> 赞同：116
> 
> 时间：2012-06-26T15:56:50.337
> 
> 标签：java, exception-handling, try-catch

我需要捕获两个异常，因为它们需要相同的处理逻辑。我想做类似的事情：

```
catch (Exception e, ExtendsRuntimeException re) {
    // common logic to handle both exceptions
} 
```

是否可以避免在每个 catch 块中重复处理程序代码？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-06-26T15:58:45.870

## Java 7 及更高版本

从 Java 7 开始支持[多异常捕获。](http://www.oracle.com/technetwork/articles/java/java7exceptions-486908.html)

语法是：

```
try {
     // stuff
} catch (Exception1 | Exception2 ex) {
     // Handle both exceptions
} 
```

的静态类型`ex`是列出的异常中最专业的通用超类型。有一个很好的特性，如果你`ex`在 catch 中重新抛出，编译器知道只能抛出一个列出的异常。

* * *

## Java 6 及更早版本

在 Java 7 之前，有一些方法可以处理这个问题，但它们往往不够优雅，并且有局限性。

## 方法#1

```
try {
     // stuff
} catch (Exception1 ex) {
     handleException(ex);
} catch (Exception2 ex) {
     handleException(ex);
}

public void handleException(SuperException ex) {
     // handle exception here
} 
```

如果异常处理程序需要访问在`try`. 如果处理程序方法需要重新抛出异常（并且已检查），那么您会遇到签名的严重问题。具体来说，`handleException`必须声明为 throwing `SuperException`... 这可能意味着您必须更改封闭方法的签名，依此类推。

## 方法#2

```
try {
     // stuff
} catch (SuperException ex) {
     if (ex instanceof Exception1 || ex instanceof Exception2) {
         // handle exception
     } else {
         throw ex;
     }
} 
```

再一次，我们有一个潜在的签名问题。

## 方法#3

```
try {
     // stuff
} catch (SuperException ex) {
     if (ex instanceof Exception1 || ex instanceof Exception2) {
         // handle exception
     }
} 
```

如果您忽略该`else`部分（例如，因为目前没有其他子类型`SuperException`），代码将变得更加脆弱。如果异常层次结构被重新组织，这个没有 an 的处理程序`else`最终可能会默默地吃掉异常！

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-06-26T16:09:05.707

**Java <= 6.x 只允许您为每个 catch 块捕获一个异常：**

```
try {

} catch (ExceptionType name) {

} catch (ExceptionType name) {

} 
```

*文档：*

> 每个 catch 块都是一个异常处理程序，并处理由其参数指示的异常类型。参数类型 ExceptionType 声明处理程序可以处理的异常类型，并且必须是从 Throwable 类继承的类的名称。

**对于 Java 7，您可以在一个 catch 块上捕获多个异常：**

```
catch (IOException|SQLException ex) {
    logger.log(ex);
    throw ex;
} 
```

*文档：*

> 在 Java SE 7 及更高版本中，单个 catch 块可以处理多种类型的异常。此功能可以减少代码重复并减少捕获过于广泛的异常的诱惑。

***参考：*** [http ://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-26T16:04:54.977

如果您不在 java 7 上，您可以将异常处理提取到方法中 - 这样您至少可以最大限度地减少重复

```
try {
   // try something
}
catch(ExtendsRuntimeException e) { handleError(e); }
catch(Exception e) { handleError(e); } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T18:14:19.013

对于 Java < 7，您可以将 if-else 与 Exception 一起使用：

```
try {
    // common logic to handle both exceptions
} catch (Exception ex) {
    if (ex instanceof Exception1 || ex instanceof Exception2) {

    }
    else {
        throw ex;
        // or if you don't want to have to declare Exception use
        // throw new RuntimeException(ex);
    }
} 
```

编辑并用异常替换了 Throwable。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-31T19:56:21.320

在 Java SE 7 发布之前，我们习惯于编写带有多个与 try 块相关联的 catch 语句的代码。一个非常基本的例子：

```
 try {
  // some instructions
} catch(ATypeException e) {
} catch(BTypeException e) {
} catch(CTypeException e) {
} 
```

但是现在随着 Java 的最新更新，我们可以在单个 catch 子句中处理多个异常，而不是编写多个 catch 语句。这是一个示例，展示了如何实现此功能。

```
try {
// some instructions
} catch(ATypeException|BTypeException|CTypeException ex) {
   throw e;
} 
```

所以单个catch子句中的多个异常不仅可以简化代码，还可以减少代码的冗余。我发现这篇文章很好地解释了这个特性及其实现。 [Java 7 改进和更好的异常处理](http://www.coolcoder.in/2011/08/improved-and-better-exception-handling.html) 这也可能对您有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-08T18:15:52.360

[http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)涵盖在同一块中捕获多个异常。

```
 try {
     // your code
} catch (Exception1 | Exception2 ex) {
     // Handle 2 exceptions in Java 7
} 
```

我正在制作学习卡，这个帖子很有帮助，只是想投入我的两分钱。

# php - 通过objective-c更新MySQL

> ID：11211289
> 
> 赞同：1
> 
> 时间：2012-06-26T15:56:51.810
> 
> 标签：php, mysql, objective-c

我正在制作一个“发布文本”应用程序并尝试使用名称和正文字段更新我的数据库。obj-c 代码如下所示：

```
- (IBAction)post:(id)sender
{

    NSLog(@"%@", name);
    NSLog(@"%@", body); 
    // create string contains url address for php file, the file name is post.php, it receives parameter :name
    NSString *strURL = [NSString stringWithFormat:@"http://www.mywebsite.com/post.php?name=%@&body=%@",name, body];

    // to execute php code
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

    // to receive the returend value
    NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

    NSLog(@"%@", strResult);
} 
```

php 代码如下所示：

```
<?php

if (isset($_REQUEST['name']) && isset($_REQUEST['body']) && strlen($_REQUEST['name']) > 0 && strlen($_REQUEST['body']) > 0) {
    //get data
    $title = $_REQUEST['name'];
    $body = $_REQUEST['body'];

    mysql_connect("MyServer","username","password") or die(mysql_error());
    mysql_select_db("Database_Name") or die(mysql_error());

    $date = date("Y-m-d");

    //insert data
    $insert = mysql_query("INSERT INTO news VALUES ('','".mysql_real_escape_string($title)."','".mysql_real_escape_string($body)."','".mysql_real_escape_string($date)."')") or die(mysql_error());

    die("Your text has been posted!");
} 

?> 
```

有时它可以通过应用程序发布，但它只是将 (null) 作为名称发布，将 null 作为正文发布。但在大多数情况下，它根本不起作用。它只是在日志中说：

```
 2012-06-26 16:54:49.893 AppName[12444:707] 
<UITextField: 0x17a390; frame = (63 76; 194 31); text = 'MyName'; 
clipsToBounds = YES; opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x17a4c0>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:02:47.747

在这里进行疯狂的猜测，但它们是指向 UITextField 对象的指针吗`name`？`body`根据您的日志输出，我认为它们可能是。如果是这样，您需要使用`[name text]`或`name.text`从文本字段中获取实际的 NSString 值。

# github-for-windows - GitHub for Windows - 它是开源的吗？

> ID：11211292
> 
> 赞同：32
> 
> 时间：2012-06-26T15:56:57.803
> 
> 标签：github-for-windows

GitHub for Windows 是开源的吗？如果是这样，我似乎无法找到存储库。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-26T16:17:32.027

根据 GitHub 创始人之一的 Tom Preston-Werner 在他的帖子**[“开源（几乎）一切”](http://tom.preston-werner.com/2011/11/22/open-source-everything.html)**中谈到开源哲学

> 不要开源任何代表核心业务价值的东西。[...]**请注意，我们保持关闭的所有内容都具有特定的商业价值，如果将其赠送给我们的竞争对手，可能会受到损害**。我们打开的一切都是通用工具，可以被各种人和公司用来构建各种东西。

然而，**Hubot**，以前是 GitHub 的闭源资产，最终在 2011 年底**[开源](https://github.com/blog/968-say-hello-to-hubot)**。

> 在过去一年左右的时间里，我们一直在向人们介绍 Hubot [...] 所以**我们决定从头开始重写他，开源他，并与大家分享**。

目前，Windows Github 客户端还不是开源软件……但谁知道呢，*说不定*哪天就开源了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-05T22:02:46.753

Phil Haack（目前在 GitHub 工作）在他的[博客评论](http://haacked.com/archive/2012/05/21/introducing-github-for-windows.aspx#87318)中暗示了这一点：

> 目前，它不是开源的。我们创建的许多库都是开源的。随着我们不断完善这些库，我们将发布更多用于制作应用程序的组件。

所以不，该应用程序不是开源的，但请留意它的某些部分是否在 GitHub 上发布。（但请记住，这只是一篇博客评论，而不是任何形式的官方公告）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-16T01:41:39.733

根据最新消息，GitHub for Windows 更名为 GitHub Desktop。它使用 Electron 重新设计并完全开源。测试版已经发布。GitHub Desktop 开源存储库的 Web 链接留在这里：[https](https://github.com/desktop/desktop) ://github.com/desktop/desktop 。

# perl - 比较 perl 中的两个（可能）undef 变量

> ID：11211300
> 
> 赞同：12
> 
> 时间：2012-06-26T15:57:17.627
> 
> 标签：perl

我正在尝试比较两个通常是字符串的变量。这些变量是从一个数据库、`$var1`一个数据库和`$var2`另一个数据库生成的。当我在循环中比较它们时，我使用`ne`运算符。但是有时我这些变量是`null`or `undef`。比较如下：

```
foreach my $var1 (@$varlist)
{
  if ($var1 ne $var2)
  {
    print "vars are not equal";
  }
} 
```

问题是如果`$var1`或者`$var2`是`undef`那么我得到一个错误。但是，我需要能够将值作为 undef b/c 进行比较，我将不得不编写它们。我考虑将变量转换为字符串“NULL”，然后再返回，但这似乎效率低下。

有任何解决这个问题的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T16:01:54.330

检查它们是否也被定义：

```
foreach my $var1 (@$varlist)
    if ( ! defined $var1 || ! defined $var2 || $var1 ne $var2 )
        print "vars are not equal"; 
```

如果两者都未定义，则会打印出它们不相等。如果您想要其他行为，只需更改`if`表达式即可。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-26T16:41:10.947

比较未定义的值不是错误，它只是一个警告。我喜欢`//`在这种情况下使用 Perl 的运算符（需要 >=v5.10）来确保定义了运算符：

```
if (($var1 // '') ne ($var2 // '')) { ... } 
```

例如，在比较期间会将未定义的字符串视为空字符串。

由于您希望操作数在打印时具有特定值（这`NULL`是一种可能性），您还可以考虑使用`//=`运算符。

```
if (($var1 //= 'NULL') ne ($var2 //= 'NULL')) {
   print "$var1 and $var2 are not equal";
} 
```

将使用 or 的值，或者`$var1`如果它们未定义，则在比较中。`$var2``'NULL'`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-26T19:17:23.997

您似乎正在通过使用 Perl 来练习安全，`use warnings;`但现在您可能已经到了选择性地关闭它们的地步。这些警告是为了保护您自己，但是如果您知道要比较可能的 undef 字符串，只需将它们关闭一点（该`no`命令是封闭块的本地命令，因此它们会重新打开）。

```
use strict;
use warnings;

foreach my $var1 (@$varlist)
{
  no warnings 'uninitialized';
  if ($var1 ne $var2)
  {
    print "vars are not equal";
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:01:13.773

使用定义的函数来确定：

[http://perldoc.perl.org/functions/defined.html](http://perldoc.perl.org/functions/defined.html)

# android - IntelliJ中奇怪的启动错误

> ID：11211306
> 
> 赞同：2
> 
> 时间：2012-06-26T15:57:28.980
> 
> 标签：android, intellij-idea

我最近在我的 IntelliJ Android 项目中重构了我的 src 目录，当我在设备上运行我的应用程序时，我收到了这个奇怪的错误。![在此处输入图像描述](../Images/2cd221adcc744edad8e123a5b3e503e1.png)

我已经标记了令人困惑的部分。为什么有第二个包？我如何再次删除它。此外，当我手动运行该应用程序时，我运行良好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:06:06.730

它一直都在那里。我的意思是，如果你看到第二个包名，这不是错误。您可能有一个应用程序，其包 id 是`the.package`但主要活动可能在另一个包中（例如`com.something.else.MainActivity`）。在这种情况下，您将看到如下内容：

```
Launching application: the.package/com.something.else.MainActivity. 
```

我要看的是`Run/Debug configurations`在更改项目结构后有时会损坏的内容。

# facebook - 像按钮抛出错误

> ID：11211310
> 
> 赞同：2
> 
> 时间：2012-06-26T15:57:37.420
> 
> 标签：facebook, facebook-like

自昨天起出现“赞”按钮错误 - 无法赞 URL，因为它已被阻止。

当我从我的实际应用程序画布页面单击类似插件时，我收到此错误。虽然我可以通过点击该页面上的“喜欢”按钮进入实际的应用页面并喜欢该页面。

这个错误从昨天开始出现。任何帮助都感激不尽。

应用页面 - [https://www.facebook.com/pages/World-Footie-Manager-Play-Free-Football-Soccer/169765953131927](https://www.facebook.com/pages/World-Footie-Manager-Play-Free-Football-Soccer/169765953131927)

应用画布页面（发生错误的地方）- [https://apps.facebook.com/worldfootballmanager/](https://apps.facebook.com/worldfootballmanager/)

# android - 在 Service 中获取 Activity 的结果

> ID：11211317
> 
> 赞同：1
> 
> 时间：2012-06-26T15:57:55.573
> 
> 标签：android, service, android-intent, android-activity

我如何才能获得已启动该活动的服务中的活动的结果？

例如：服务 S -> 启动 -> 活动 A。现在我想将例如布尔结果发送回服务。那可能吗？

问候，

罗伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:01:10.380

再次调用`startService()`，将布尔结果打包为`Intent`额外的，服务将在`onStartCommand()`.

请注意，让服务启动活动是不寻常的，并且可能不是用户所希望的，尤其是当他们正在做其他事情时。

# php - mysql_query 不工作

> ID：11211321
> 
> 赞同：2
> 
> 时间：2012-06-26T15:58:07.850
> 
> 标签：php, mysql

这是我正在使用的 PHP 代码：

```
 $query="select * from `myTable` where `email`='$email' limit 0,1";
    if(empty($conn))
    {
        echo "not connected".PHP_EOL;
    } 

    $result = mysql_query($query,$conn);
    $row = mysql_fetch_array($result);      

    if(empty($row))
    {   
            .... 
```

在 phpmyadmin 中执行查询时，我选择了一行。

但是，当我在 php 中执行代码时，该行始终为空。

我尝试执行的其他几个查询也是如此。`mysql_query`总是失败。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:05:07.400

我觉得没有足够的代码来查看发生了什么。但是根据您向我们展示的内容，在您获得 $result 并将其分配给 $row 之后，您就有了一个 if 语句

```
if(empty($row)) {...doing something secret...} 
```

这意味着如果返回的内容与您期望的行一样，则不会发生任何事情，因为 (empty($row)) 将是错误的并且不会执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:08:23.407

尝试使用 PDO：

```
<?php

$email = "example@example.com";

try {
    //Instantiate PDO connection
    $conn = new PDO("mysql:host=localhost;dbname=db_name", "user", "pass");
    //Make PDO errors to throw exceptions, which are easier to handle
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    //Make PDO to not emulate prepares, which adds to security
    $conn->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

    $query = <<<MySQL
SELECT *
  FROM `myTable` 
  WHERE `email`=:email 
  LIMIT 0,1;
MySQL;

    //Prepare the statement
    $stmt = $conn->prepare($query);
    $stmt->bindParam(":email", $email, PDO::PARAM_STR);

    $stmt->execute();

    //Work with results
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        //Do stuff with $row
    }
}
catch (PDOException $e) {
    //Catch any PDOExceptions errors that were thrown during the operation
    die("An error has occurred in the database: " . $e->getMessage());
} 
```

强烈建议不要使用`mysql_*`函数。这是产生损坏代码的保证。请从我给您的评论中的链接中学习 PDO 或 MySQLi，并改用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:01:30.243

首先，确认`$email`的值。在定义之前回显它`$query`以确保它是您认为的那样。

如果您已经这样做了，那么您就知道这就是问题所在——相反，您的链接标识符很可能`$conn`是问题所在。尝试将查询的第二个参数留空，而不是使用链接标识符，而是`mysql_connect()`在脚本的开头运行。这是 99.5% 的时间做事的最佳方式。

见： http: [//php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

# javascript - Photoshop 脚本 - 更新窗口中的进度条

> ID：11211323
> 
> 赞同：6
> 
> 时间：2012-06-26T15:58:11.090
> 
> 标签：javascript, photoshop, flash-cs5, adobe-scriptui

我想为我的一个 Photoshop 脚本显示一个进度条。如果我确实在按钮单击事件中工作，那么我可以毫无问题地更新进度条。

对于此脚本，不需要用户交互。我想： - 显示窗口 - 工作完成后更新进度条 - 关闭窗口

```
var win = new Window("dialog{text:'Progress',bounds:[100,100,400,150],\ bar:Progressbar{bounds:[20,20,280,31] , value:0,maxvalue:100}};");
win.show();

for(...){
    //do work here

    //update progress
    win.bar.value = ...;
}

win.close(); 
```

问题是，`win.show();`阻塞直到用户关闭窗口。我也尝试添加一个`onClose`处理程序，然后立即关闭窗口，但窗口永远不会显示。

*关于如何让进度条工作的任何想法？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:25:40.597

窗口类`dialog`是一个 MODAL 对话框，需要您在继续执行之前关闭它。

使用该类`window`创建一个非阻塞窗口：

```
var win = new Window("window{text:'Progress',bounds:[100,100,400,150],bar:Progressbar{bounds:[20,20,280,31] , value:0,maxvalue:100}};");
win.show();

for(...){
    //do work here

    //update progress
    win.bar.value = ...;
}

win.close(); 
```

但是，您将在这里遇到下一个问题。根据您在循环中执行的操作，photoshop 更新 UI 的速度不会足够快，无法看到进度条在移动。这就是我卡住的地方：/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T02:01:08.783

我曾经运行过 WaitForRedraw 片段，也许它会使 ps 重绘 UI？没时间检查，只是一个想法。

```
function WaitForRedraw(){
var eventWait = charIDToTypeID("Wait")
var enumRedrawComplete = charIDToTypeID("RdCm")
var typeState = charIDToTypeID("Stte")
var keyState = charIDToTypeID("Stte")
var desc = new ActionDescriptor()

desc.putEnumerated(keyState, typeState, enumRedrawComplete)
executeAction(eventWait, desc, DialogModes.NO)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-31T08:31:53.180

您可能需要考虑使用 app.refresh() 或 waitForRedraw()。有一个window.update()，但它似乎没有为我解决这个问题。

这是来源：[http ://www.davidebarranca.com/2012/10/scriptui-window-in-photoshop-palette-vs-dialog/](http://www.davidebarranca.com/2012/10/scriptui-window-in-photoshop-palette-vs-dialog/)

# actionscript-3 - Flex AS3 - 关于变量实例、事件监听器和垃圾收集

> ID：11211324
> 
> 赞同：2
> 
> 时间：2012-06-26T15:58:15.470
> 
> 标签：actionscript-3, apache-flex

问题一：

在以下示例中，我向 foundMic 添加了一个侦听器。我的问题是如果我重新运行 foobar.initMic(); 要重新初始化麦克风，我最终会在内存中浮动一个死事件侦听器，它会被垃圾收集器拾取吗？调用 .getMicrophone() 只是将相同的资源重新附加到 foundMic 还是破坏旧的 foundMic 并在内存中创建一个新的 foundMic 实例。

就像它完全相同的 foundMic 一样，添加事件侦听器将静默失败并且不会创建第二个侦听器。但是，如果 foundMic 成为一个新实例，那么它将创建一个新的侦听器。然后回到关于垃圾收集的问题，是否会被认为是未引用的清理？

```
public class foobar {

    public static var foundMic:Microphone = null;

    public static function initMic():void {
        foundMic = Microphone.getMicrophone();
        foundMic.codec = SoundCodec.SPEEX;
        foundMic.setSilenceLevel(0, 5000);
        foundMic.gain = 50;
        foundMic.setUseEchoSuppression(true);
        foundMic.soundTransform.volume = 1;
        foundMic.addEventListener(StatusEvent.STATUS, onMicStatusEvent);
        return;
     }

    public static function onMicStatusEvent(event:StatusEvent):void {
        if (foundMic && !foundMic.muted) someButton.enabled = true;
        else someButton.enabled = false;
        return;
    }

} // END CLASS 
```

问题二：

基于问题一，如果我在添加侦听器之前添加了一个删除侦听器，那实际上是否在第二次运行时删除了该方法第一次运行时创建的侦听器？或者 foundMic 已经是 .getMicrophone() 的一个新实例，所以没有任何内容被删除，因为第一个侦听器已经在与前一个 foundMic 实例关联的内存中浮动？

```
 public static function initMic():void {
        foundMic = Microphone.getMicrophone();
        .
        .
        .
        foundMic.removeEventListener(StatusEvent.STATUS, onMicStatusEvent);
        foundMic.addEventListener(StatusEvent.STATUS, onMicStatusEvent);
        return;
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:36:04.453

foundMic 将被分配一个新值，该值是对麦克风的引用 - 不应进行垃圾收集。

垃圾收集器应该启动的情况是这样的：

```
var someVar:Sprite;
for(var i:int = 0; i < 5; i++)
{
    someVar = new Sprite();
} 
```

在这种情况下，您创建了 5 个新的 Sprite 对象，但最终只分配了一个给 someVar 变量 - 其他 4 个应该在某个时候被垃圾收集，因为它们没有被任何变量引用。

至于问题二，您的代码应该在您第一次调用 initMic() 时给您一个错误，因为那时还没有 onMicStatusEvent 侦听器。在尝试删除事件侦听器之前，首先测试它是否存在：

```
if(foundMic.hasEventListener(StatusEvent.STATUS)
{
    foundMic.removeEventListener(StatusEvent.STATUS, onMicStatusEvent);
}
foundMic.addEventListener(StatusEvent.STATUS, onMicStatusEvent); 
```

此代码将始终首先删除事件侦听器（如果存在），然后添加新的事件侦听器。但是，在这种情况下，我看不出有任何原因，因为 addEventListener 本身应该可以正常工作 - 多个调用都在同一个对象上，所以无论你调用多少次 initMic() 你应该只有一个事件侦听器正在运行 - 无需手动删除侦听器然后重新创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:11:09.037

这是事件侦听器发生的情况。`someObject.addEventListener('someEvent', someFunction)`手`someObject`参考`someFunction`。由于作用域在 ActionScript 中的工作方式，该函数可以访问创建它的代码作用域中的所有内容。因此，在您调用 之前`removeEventListener`，只要在内存中，函数存在的实例就会保存在内存`someObject`中。

**但是，**在您的情况下，*没有*实例，因为通过使用静态函数，您的侦听器将从第`FooBar`一次引用您的 Class 到您的 swf 从计算机内存中取出。

在添加侦听器之前删除侦听器没有任何净效果，因为它是完全相同的函数被传递给完全相同的对象，它不会调用您的函数两次。

有关事件侦听器如何详细工作的更多信息，[请查看此博客文章](http://www.developria.com/2010/08/rethinking-addeventlistener-an.html)。

# compilation - 为什么 FDT 的 Launcher Chain 不按我指定的顺序执行文件

> ID：11211328
> 
> 赞同：1
> 
> 时间：2012-06-26T15:58:33.140
> 
> 标签：compilation, fdt, launching-application

鉴于下面的启动器链，为什么我看到 ADT 调用（它是启动器 FDT2815 的一部分）在我的任务“AntTask build.xml”之后执行？

![在此处输入图像描述](../Images/20256b2cb0503cadf0eb2e5fa567b088.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:58:33.717

任何与启动配置相关的启动或启动总是被推到链的末尾。

如果是 Ant 任务（文件），它们会按顺序执行。

每个launcher的编译部分都会按顺序执行，但是launcher会被推到最后。您可以尝试使用[fdt.invoke.launchConfiguration](http://fdt.powerflasher.com/docs/FDT_Ant_Tasks#fdt.invoke.launchConfiguration_.28FDT_5.5.29) (FDT 5.5)，但这在某些情况下可能不起作用。

在这种情况下`fdt.invoke.launchConfiguration`不起作用，[请等待 FDT 5.6](http://bugs.powerflasher.com/jira/browse/FDT-2812)（即将推出），它将通过为启动器提供“不启动选项”来解决此问题。

请参阅下面的屏幕截图： ![在此处输入图像描述](../Images/e0320d3582152696789b940d52da58e8.png) ![在此处输入图像描述](../Images/aea036111b8c2eb5f6ccee7572d42a19.png)

# maven - 添加另一个项目的maven依赖项

> ID：11211332
> 
> 赞同：0
> 
> 时间：2012-06-26T15:58:40.277
> 
> 标签：maven, dependencies, project, external

我在一个 Maven 项目中开发一个 Web 应用程序。我还有第二个项目（没有 web），其中包含我的 web maven 项目需要的一些类。所以，我需要在我的第二个项目的 pom.xml 文件中添加一个依赖项，但我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:01:28.480

简单的解决方案是使用依赖项

```
<dependencies>
  <dependency>
    <groupId>x.y.z</groupId>
    <artifactId>project-X</artifactId>
    <version>X.z.Z</version>
  </dependency>
</dependencies> 
```

# variables - gnuplot 将数据文件中的一个数字存储到变量中

> ID：11211339
> 
> 赞同：13
> 
> 时间：2012-06-26T15:59:09.137
> 
> 标签：variables, gnuplot

OSX v10.6.8 和 Gnuplot v4.4

我有一个包含 8 列的数据文件。我想从第 6 列中取出第一个值并将其作为标题。这是我到目前为止所拥有的：

```
#m1 m2 q taua taue K avgPeriodRatio time
#1  2  3   4   5   6        7        8

K = #read in data here
graph(n) = sprintf("K=%.2e",n) 
set term aqua enhanced font "Times-Roman,18"

plot file using 1:3 title graph(K) 
```

这是我的数据文件的前几行的样子：

```
1.00e-07 1.00e-07 1.00e+00 1.00e+05 1.00e+04 1.00e+01 1.310 12070.00
1.11e-06 1.00e-07 9.02e-02 1.00e+05 1.00e+04 1.00e+01 1.310 12070.00
2.12e-06 1.00e-07 4.72e-02 1.00e+05 1.00e+04 1.00e+01 1.310 12070.00
3.13e-06 1.00e-07 3.20e-02 1.00e+05 1.00e+04 1.00e+01 1.310 12090.00 
```

我不知道如何正确读取数据，或者这是否是正确的方法。

**编辑#1**

好的，多亏了 mgilson，我现在有了

```
#m1 m2 q taua taue K avgPeriodRatio time
#1  2  3   4   5   6        7        8

set term aqua enhanced font "Times-Roman,18"
K = "`head -1 datafile | awk '{print $6}'`"
print K+0
graph(n) = sprintf("K=%.2e",n) 

plot file using 1:3 title graph(K) 
```

但我收到错误：在需要数字表达式的地方找到非数字字符串

**编辑#2**

```
file = "testPlot.txt"
K = "`head -1 file | awk '{print $6}'`"
K=K+0  #Cast K to a floating point number  #this is line 9
graph(n) = sprintf("K=%.2e",n)
plot file using 1:3 title graph(K) 
```

这给出了错误--> head: file: No such file or directory "testPlot.gnu", line 9: Non-numeric string found where a numeric expression is expected

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T18:05:32.930

你有几个选择...

**第一个选项**：

采用`columnheader`

```
plot file using 1:3 title columnheader(6) 
```

我还没有测试过，但这可能会阻止第一行被实际绘制。

**第二个选项**：

使用外部实用程序获取标题：

```
TITLE="`head -1 datafile | awk '{print $6}'`"
plot 'datafile' using 1:3 title TITLE 
```

如果变量是数字的，并且您想重新格式化它，在 gnuplot 中，您可以通过向字符串添加 0（例如）将字符串转换为数字类型（整数/浮点数）。

```
print "36.5"+0 
```

`sprintf`然后你可以用或`gprintf`你已经在做的那样格式化它。

奇怪的是没有`float`功能。（`int`如果您想转换为整数，将起作用）。

**编辑**

下面的脚本对我有用（当我将您的示例数据粘贴到一个名为“datafile”的文件中时）：

```
K = "`head -1 datafile | awk '{print $6}'`"
K=K+0  #Cast K to a floating point number
graph(n) = sprintf("K=%.2e",n)
plot "datafile" using 1:3 title graph(K) 
```

**编辑 2**（地址评论如下）

要在 backtics 中扩展变量，您需要宏：

```
set macro
file="mydatafile.txt"
#THE ORDER OF QUOTES (' and ") IS CRUCIAL HERE.
cmd='"`head -1 ' . file . ' | awk ''{print $6}''`"'
# . is string concatenation.  (this string has 3 pieces)
# to get a single quote inside a single quoted string
#   you need to double.  e.g. 'a''b' yields the string a'b 
data=@cmd 
```

要解决您的问题 2，最好熟悉 shell 实用程序——sed 和 awk 都可以。我将展示头/尾的组合：

```
cmd='"`head -2 ' . file . ' | tail -1 | awk ''{print $6}''`"' 
```

应该管用。

**编辑 3**

我最近了解到，在 gnuplot 中，`system`既是函数又是命令。要做到以上没有所有的背部体操，

```
data=system("head -1 " . file . " | awk '{print $6}'") 
```

哇，好多了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T20:56:54.937

这是一个非常古老的问题，但这是访问数据文件中任何位置的单个值并将其保存为 gnuplot 可访问变量的好方法：

```
set term unknown #This terminal will not attempt to plot anything
plot 'myfile.dat' index 0 every 1:1:0:0:0:0 u (var=$1):1 
```

该`index`数字允许您处理特定的数据集（由两个回车符分隔），同时`every`允许您指定特定的行。

后面的冒号分隔的数字`every`应该是形式`1:1:<line_number>:<block_number>:<line_number>:<block_number>`，其中行号是包含块的行（从 0 开始），块号是块的编号（由单个回车分隔，再次从0)。第一个和第二个数字表示每 1 行和每个数据块绘制一次，第三个和第四个数字表示从 line`<line_number>`和 block开始`<block_number>`。第五和第六说在哪里停下来。这允许您在数据文件的任何位置选择一行。

plot 命令的最后一部分将特定列（在本例中为第 1 列）中的值分配给您的变量 ( `var`)。绘图命令需要有两个值，因此我选择了第 1 列来针对我的变量赋值语句进行绘图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-12T10:51:49.290

这是一个较少'awk'-ward的解决方案，它将文件'Data.txt'的第一行和第6列的值分配给变量x16。

```
set table
# Syntax: u 0:($0==RowIndex?(VariableName=$ColumnIndex):$ColumnIndex)
# RowIndex starts with 0, ColumnIndex starts with 1
# 'u' is an abbreviation for the 'using' modifier 
plot 'Data.txt' u 0:($0==0?(x16=$6):$6)
unset table 
```

下面给出了存储多个值的更一般的示例：

```
# Load data from file to variable
# Gnuplot can only access the data via the "plot" command
set table
# Syntax: u 0:($0==RowIndex?(VariableName=$ColumnIndex):$ColumnIndex)
# RowIndex starts with 0, ColumnIndex starts with 1
# 'u' is an abbreviation for the 'using' modifier 
# Example: Assign all values according to: xij = Data33[i,j]; i,j = 1,2,3
plot 'Data33.txt' u 0:($0==0?(x11=$1):$1),\
                '' u 0:($0==0?(x12=$2):$2),\
                '' u 0:($0==0?(x13=$3):$3),\
                '' u 0:($0==1?(x21=$1):$1),\
                '' u 0:($0==1?(x22=$2):$2),\
                '' u 0:($0==1?(x23=$3):$3),\
                '' u 0:($0==2?(x31=$1):$1),\
                '' u 0:($0==2?(x32=$2):$2),\
                '' u 0:($0==2?(x33=$3):$3)
unset table
print x11, x12, x13     # Data from first row
print x21, x22, x23     # Data from second row
print x31, x32, x33     # Data from third row 
```

# facebook - Facebook 事件搜索 - 访问令牌

> ID：11211343
> 
> 赞同：1
> 
> 时间：2012-06-26T15:59:23.533
> 
> 标签：facebook, events, search, facebook-php-sdk, access-token

不久前，我编写了一些使用 api 搜索 Facebook 事件的代码。我一直在尝试恢复该代码，但没有成功。我看到的主要困难是现在搜索公共事件似乎需要访问令牌。文档（https://developers.facebook.com/docs/reference/api/event/）说，直到 7 月 5 日才会出现这种情况，但是，示例事件搜索我（https://graph.facebook.如果您没有 access_token，com/search?fields=name&q=conference&type=event) 不会返回任何内容。

因此，我使用 facebook php sdk $facebook->getAccessToken() 为我的应用程序获得了 access_token。我现在遇到的问题是这似乎是错误类型的令牌。返回任何事件都不起作用，并且查询在发布到 url 栏中时不会得到任何东西，但是如果我将其切换为由学习图 api 链接生成的访问令牌，则查询在 url 栏中有效（但不是来自我的网站很烦人）。我从应用程序获得的访问令牌类型基本上是 | 那是不适用于事件搜索的类型。

我基本上是在寻找我能得到的任何建议。如何获取事件搜索将接受的访问令牌会有所帮助。我也觉得很奇怪，我可以使用 url 栏进行事件搜索，但是，通过我的应用程序进行的完全相同的查询返回一个空数组。所以基本上任何可以阐明我的问题的东西都会很棒。

更新：除了它仍然需要用户访问令牌而不是应用程序访问令牌（或没有）之外，我一切正常。我的另一个问题是由 php sdk 中的一个奇怪问题引起的，我只需自己执行 curl 查询就可以解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:52:35.340

我有同样的问题，此时我正在使用图形 API 浏览器（https://developers.facebook.com/tools/explorer）在选择我的应用程序时使用的访问令牌（我认为这是用户的令牌，所以app 可以作为用户使用，因为它是我的访问令牌，所以没什么大不了的）。但这引发了另一个问题：我认为令牌会因从 FB 注销或类似的东西而失效。

# informatica - 在 Informatica 中搜索 SQL 覆盖中的文本

> ID：11211347
> 
> 赞同：2
> 
> 时间：2012-06-26T15:59:27.970
> 
> 标签：informatica

有没有办法在 Informatica 中搜索所有映射、会话等以查找 SQL 覆盖中包含的文本字符串？

例如，假设我知道某个存储过程 ( `SP_FOO`) 在 INFA 进程的某处被调用，但我不知道具体在哪里。在某个地方，我认为在调用它的源或目标上有一个 Post SQL。我可以搜索包含 Post SQL 的所有会话`SP_FOO`吗？（类似于我可以`grep`用源代码做的事情。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:39:58.987

您可以使用存储库查询来查询 REPO 表（如果您有足够的访问权限）以获取与所有映射、转换、会话等相关的数据。

请使用以下链接获取几乎所有类型的回购查询。您的答案可以在下面的链接中找到。

[https://uisapp2.iu.edu/confluence-prd/display/EDW/Querying+PowerCenter+data](https://uisapp2.iu.edu/confluence-prd/display/EDW/Querying+PowerCenter+data)

```
select *--distinct sbj.SUBJECT_AREA,m.PARENT_MAPPING_NAME
from REP_SUBJECT sbj,REP_ALL_MAPPINGS m,REP_WIDGET_INST w,REP_WIDGET_ATTR wa
where sbj.SUBJECT_ID = m.SUBJECT_ID AND
m.MAPPING_ID = w.MAPPING_ID AND
w.WIDGET_ID = wa.WIDGET_ID
and sbj.SUBJECT_AREA in ('TLR','PPM_PNLST_WEB','PPM_CURRENCY','OLA','ODS','MMS','IT_METRIC','E_CONSENT','EDW','EDD','EDC','ABS')
and (UPPER(ATTR_VALUE)  like '%PSA_CONTACT_EVENT%'
--  or UPPER(ATTR_VALUE)  like '%PSA_MEMBER_CHARACTERISTIC%'
 -- or UPPER(ATTR_VALUE)  like '%PSA_REPORTING_HH_CHRSTC%'
--  or UPPER(ATTR_VALUE)  like '%PSA_REPORTING_MEMBER_CHRSTC%'
     )
--and m.PARENT_MAPPING_NAME like '%ARM%'
order by 1 
```

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T21:10:09.037

另一种不太科学的方法是将工作流导出为 XML，并使用文本编辑器在其中搜索存储过程名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T17:27:16.767

如果您对 informatica 存储库所在的架构具有读取权限，请尝试此操作。

```
SELECT DISTINCT f.subj_name folder, e.mapping_name, object_type_name,
                b.instance_name, a.attr_value
           FROM opb_widget_attr a,
                opb_widget_inst b,
                opb_object_type c,
                opb_attr d,
                opb_mapping e,
                opb_subject f
          WHERE a.widget_id = b.widget_id
            AND b.widget_type = c.object_type_id
            AND (   object_type_name = 'Source Qualifier'
                 OR object_type_name LIKE '%Lookup%'
                )
            AND a.widget_id = b.widget_id
            AND a.attr_id = d.attr_id
            AND c.object_type_id = d.object_type_id
            AND attr_name IN ('Sql Query')--, 'Lookup Sql Override')
            AND b.mapping_id = e.mapping_id
            AND e.subject_id = f.subj_id
            AND a.attr_value is not null
            --AND UPPER (a.attr_value) LIKE UPPER ('%currency%') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:50:42.713

是的。有一个基于 Java 的小型工具，称为 Informatica Meta Query。

使用该工具，您可以搜索 Informatica 元数据表中存在的任何信息。

如果找不到该工具，您可以直接在 Informatica Meta 数据表中编写查询以获取所需信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-05T23:17:56.617

向 Data Origin 和 Sandeep 提供的解决方案添加更多行。

强烈建议不要直接查询存储库表。相反，您可以创建同义词或视图，然后查询这些对象以避免对代表表造成任何损坏。在我们的 dev/prod 环境中，应用程序程序员没有被授予对 repo 的任何直接访问权限。表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-13T09:47:41.867

由于查询 Informatica 数据库不是最好的主意，我建议您使用 Repository Manager 将文件夹中的所有工作流导出到 xml 中。从 Rep Mgr 中，您可以一次选择所有这些并立即导出它们。然后编写一个java程序从你拥有的xml中搜索模式。

我在这里编写了一个示例程序，请根据您的要求对其进行修改：使用工作流名称（specFileName）制作一个规范文件。

```
main()
{ 
    try {
        File inFile = new File(specFileName);
        BufferedReader reader = new BufferedReader(newFileReader(infile));

        String tectToSearch = '<YourString>';
        String currentLine;

        while((currentLine = reader.readLine()) != null)
        {
            //trim newline when comparing with String
            String trimmedLine = currentLine.trim();
            if(currentline has the string pattern)
            {
             SOP(specFileName); //specfile name
            }
        }
        reader.close();
    }
    catch(IOException ex)
    {
        System.out.println("Error reading to file '" + specFileName +"'");

    }
} 
```

# iphone - 如何执行 UITableViewCell 的自定义移动？

> ID：11211350
> 
> 赞同：2
> 
> 时间：2012-06-26T15:59:34.133
> 
> 标签：iphone, uitableview, uikit

我想像这两种方法一样移动单元格：

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath;
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath; 
```

在我使用上面的这些方法移动单元格（通过用户的触摸操作）之前，必须首先调用 tableView 的 setEditing:animated:。

但我想要的是用户长按然后拖动一个单元格来移动它而不进入编辑样式，我希望这些移动视图不会出现在单元格的右边，像这样：

![在此处输入图像描述](../Images/04f3c84c7a64fd2835bf132cd220c289.png)

有什么建议吗？特别感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:33:07.313

一种解决方案： http: [//b2cloud.com.au/how-to-guides/reordering-a-uitableviewcell-from-any-touch-point](http://b2cloud.com.au/how-to-guides/reordering-a-uitableviewcell-from-any-touch-point)

但它不能使用长按手势开始拖动

我们可以使用[FMMoveTableView](http://cocoacontrols.com/platforms/ios/controls/fmmovetableview)来做到这一点。

# c++ - 用 C/C++ 代码中的定义替换所有函数调用

> ID：11211354
> 
> 赞同：3
> 
> 时间：2012-06-26T15:59:48.697
> 
> 标签：c++, c, compiler-construction, theory, compiler-theory

我想知道是否有一些理论/工具可用于将包含函数调用的一段代码替换为所有函数调用已被其各自代码替换的代码。

喜欢

```
main()
{
   fun();
}

fun()
{
   int i;
   fun2();
}

fun2()
{
   int j;
} 
```

进入

```
main()
{
   int i;
   int j;
} 
```

我知道有很多事情需要处理，比如局部变量名、递归调用、外部函数调用等。.. ..

我也知道它可能根本没有用，但仍然存在这样的东西吗？即使在理论上？

我应该称它为提前每个处理器单元吗:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T16:02:56.840

编译器通常可以判断什么时候这样做是个好主意，并且已经[在需要时自动进行内联](http://en.wikipedia.org/wiki/Inline_expansion)。您还可以建议在函数`inline`之前使用关键字内联函数（请注意，它实际上仍然没有强制执行，编译器可能会决定避免内联）。手动执行此操作通常不是一个好主意，因为现代编译器倾向于自己找出最好的内联。[这篇文章很好地解释了内联函数，我发现它很有帮助](http://www.parashift.com/c++-faq-lite/inline-functions.html)

## 编辑1：

有几个原因可能会导致您想要进行您所说的内联。如果您觉得您的代码被划分为许多不同的功能会降低其清晰度并使其过于冗长，您可以尝试使用重构工具，例如[VAssist X Visual Studio 插件](http://www.wholetomato.com/)提供的工具。虽然这个插件并没有真正按照你的建议去做（我想不出有什么工具能做到），但它可以帮助你轻松地移动函数/方法，让你清理你的代码。

# scala - 如何让 Play 2.0 框架忽略路由

> ID：11211357
> 
> 赞同：2
> 
> 时间：2012-06-26T16:00:07.760
> 
> 标签：scala, playframework

构建一个 Play 2.0 scala 应用程序并将其部署到 Tomcat 上的 ROOT 上下文（据我了解，必须将 Play 应用程序部署到 ROOT 上下文）。此服务器上还有其他 Web 应用程序在不同的上下文中运行，但是在根目录下的 Play 应用程序中，它会拦截每个请求，如果它是不理解的路由则失败。

有什么方法可以让 Play 忽略路由，以便让 Tomcat 继续将其分派到为该上下文注册的 servlet？

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:57:22.430

实际上，事实证明这毕竟不是问题。我无意中没有将其他应用程序部署在我正在测试的同一个 tomcat 服务器中（doh！）。一旦我正确部署了它们，Play Framework 应用程序就会获得正确绑定的请求，而其他应用程序会获得在子上下文中为它们绑定的请求。所以，虚惊一场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:38:02.440

事实上，你有接缝连接到子上下文部署的限制。play2 战争插件[直到 Play 2.1 才支持它](https://github.com/dlecan/play2-war-plugin)

可以使用 tomcat conf 欺骗来做你想做的事。我不太了解tomcat，无法为您提供正确的配置。

您仍然可以将 Play 应用程序部署为独立应用程序（未嵌入在 Tomcat 中）并使用前端 HTTP 服务器来处理对正确 HTTP 服务器的反向代理。您必须为每个 HTTP 服务器定义要在其上运行的正确端口，然后配置反向代理以根据域/端口将请求路由到正确的本地端口。我为此使用[Nginx](http://wiki.nginx.org/Main)。也许Tomcat也可以处理这个问题。

# javascript - Javascript文件路径修复

> ID：11211365
> 
> 赞同：2
> 
> 时间：2012-06-26T16:00:54.000
> 
> 标签：javascript

我如何转换字符串；

```
var s='uploads\product\picture\20Duleek_Lime_Green1.jpg'; 
```

进入

```
'uploads/product/picture/20Duleek_Lime_Green1.jpg'; 
```

标准的 javascript 函数替换似乎不起作用。

```
var s='uploads\product\picture\20Duleek_Lime_Green1.jpg';

strReplace = s.replace('\\', '//');

alert(strReplace); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:03:08.887

JavaScript 中没有 replaceAll，使用带有全局标志的正则表达式。

```
var s='uploads\\product\\picture\\20Duleek_Lime_Green1.jpg';
var strReplace = s.replace(/\\/g, '/');
alert(strReplace); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:02:57.560

javascript中**没有这样的函数称为**`replaceAll`

您可以使用`regex`with`replace()`来实现您想要做的事情。

# grails - 更新 Grails 中父域类中的“lastUpdated”字段

> ID：11211367
> 
> 赞同：12
> 
> 时间：2012-06-26T16:01:02.190
> 
> 标签：grails, grails-orm, grails-domain-class

我有一个父域类，它有`hasMany`另一个域类。父域类和子域类都有`lastUpdated`和`dateCreated`字段。我的问题是，当我更新子域类时，我需要父域类来反映该更改并更新其`lastUpdated`字段。

Grails 提供的父子节点之间是否有任何映射或其他配置可以实现此功能？

**更新**

我在子域类中添加了以下几行：

```
def beforeUpdate = {
    parent.lastUpdated = new Date()
} 
```

我还必须在控制器中确保当我更新一个孩子时，我还必须保存父级以保留新`lastUpdated`字段。这似乎工作正常，但我仍然想知道是否有映射或类似的东西可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:37:34.107

我感觉你建议的实现会有问题。您正在通过手动`parent`设置日期来更新，这*可能会*导致 grails在对其进行脏检查后再次更新。如果是这种情况，您实际上会得到一个 lastUpdated 时间，该时间发生在您最初设置的日期之后。在您的测试中，这可能只有几（毫秒）秒，但您不能保证。`lastUpdated`*`lastUpdated`*

 *不仅如此，您的实现也更难维护，因为您增加了 Parent 和 Child 的耦合。

我可以建议另一种实现吗？lastUpdated 字段应该代表特定域对象的更新时间。您要查找的日期并不完全相同，因此我不会尝试以“错误”的方式使用现有约定。听起来您希望父对象的日期是“最后一次修改子对象”。

**请改用公式。**

为此，您可以使用[公式](http://grails.org/doc/latest/guide/GORM.html#derivedProperties)。使用公式，您无需直接修改父对象即可获得您想要的结果，并且您仍然可以使用动态查找器和其他 Grails 糖。

```
class Parent {
    ...
    Date lastChildUpdated

    static hasMany = [ children: Child ]

    static mapping = {
        ...
        lastChildUpdated formula: '(SELECT max(c.last_updated) FROM child c WHERE c.parent_id = id)'
    }
} 
```

每当您从数据库中读取对象时，GORM 都会加载公式的值。现在，每当您保存子项时，父项将获得该属性的准确值，而无需触摸父项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T21:00:09.483

我用了一个黑客。**我在父**域类和方法中添加了一个`Long updateTrigger`字段：**`touch`**

 **```
class Parent {
    Long updateTrigger

    static mapping = {
        autoTimestamp true
    }

    static constraints = {
        updateTrigger(nullable:true)
    }

    public touch() {
        if (updateTrigger == null) updateTrigger = 0
        updateTrigger++
        this
    } 
```

在**子**控制器的更新/保存操作中，我只是调用：

```
child_instance.save() // save the child
child_instance.parent.touch().save() // updates parent's time stamp 
```

这将增加`updateTrigger`值，并且由于映射中的设置，`save()`将自动更新`lastUpdated`字段。设置为可为空，这样它就不会使任何现有的数据库表无效，因此可以随时添加到任何域类。`autoTimestamp``true``updatedTrigger`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:57:31.630

在我的一个项目中，域就像。一个程序有很多 AdvertisingMaterial，我们有 AdvertisingMaterial、FlashAd、ImageAd 等的子类。用户希望能够过滤具有 flashAds、imageAds 等的程序。现在我需要根据我们拥有的类属性进行过滤在数据库表中（当表 tablePerHierarchy 为真时）。所以我在我的域类中做了一些改变来获得这个属性。

```
class AdvertisingMaterial {
        String className

        static constraints = {
                className(nullable: true)
        }

       static mapping = {
               className formula: 'CLASS'
       }
} 
```

现在我也可以在我的动态查找器和条件查询中使用这个 className 字段。所以我可以做类似的事情

```
List<AdvertisingMaterial>adMaterials=AdvertisingMaterial.findAllByClassName("com.project.FlashAd")

static mapping = {
               fullName formula: "CONCAT(FIRST_NAME,'  ',LAST_NAME)"
               totalAmount formula: "SUM(AMOUNT)"
} 
```***

# php - 从控制台运行脚本 sotres cookie

> ID：11211370
> 
> 赞同：-2
> 
> 时间：2012-06-26T16:01:12.377
> 
> 标签：php, cookies

我正在从控制台运行一个 php 脚本。我看不到任何 cookie 存储在本地。有谁知道这是否可能？如果是，我应该检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:03:04.237

Cookies 是一种浏览器功能。您不能在控制台模式下使用它。（您可以尝试自己实现，请不要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:04:05.030

在 CLI 模式下运行 PHP 时不使用 COOKIES。有关其他详细信息，请参阅此问题：[Is it possible to read cookie/session value while execution PHP5 script through command prompt?](https://stackoverflow.com/questions/7578595/is-it-possible-to-read-cookie-session-value-while-executing-php5-script-through)

# crystal-reports - Crystal Reports - 摘要与运行总计字段

> ID：11211377
> 
> 赞同：6
> 
> 时间：2012-06-26T16:01:27.870
> 
> 标签：crystal-reports

在 Crystal Reports 中，累计字段和汇总字段有什么区别？

（在 Crystal IDE 中，汇总字段位于插入 -> 汇总。可以在字段资源管理器中添加运行总计）

（11.5 版）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:13:30.587

以我的经验，运行总计字段基本上是增强的汇总字段。

运行总计字段可以执行汇总字段可以执行的所有操作，但运行总计字段还可以执行以下操作：

*   评估每条记录、字段更改、组更改或基于公式进行评估。
*   重置字段更改、组更改、基于公式或从不更改的摘要。

但是，摘要字段可以显示为字段的百分比，因此它们并非没有用途（而且设置起来更容易一些）。

# javascript - SVG Raphael jQuery 构建路径/轨迹

> ID：11211383
> 
> 赞同：1
> 
> 时间：2012-06-26T16:01:52.723
> 
> 标签：javascript, jquery, svg, raphael

如果我在这个[例子](http://jsfiddle.net/TUb5c/)中有一个动画圆圈，有没有办法可以在画布上留下一个永久的轨迹，1px 纯白色？

我曾尝试动态构建路径，但无法使其正常工作。

在此先感谢，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:52:11.317

我不知道为什么 SVG 与它的乡下表亲 canvas 元素相比名声如此糟糕。令人惊讶的是，在真正尝试探索其功能之前，有多少次 SVG 被认为不合适或不合适。

请看看[这个小提琴](http://jsfiddle.net/kevindivdbyzero/4JyKh/)。

其中大部分是由路径上移动点的动态评估驱动的，如下所示：

```
function arrowline( canvas, pathstr, duration, attr, callback )
{    
    var guide_path = canvas.path( pathstr ).attr( { stroke: "none", fill: "none" } );
    var path = canvas.path( guide_path.getSubpath( 0, 1 ) ).attr( attr );
    var total_length = guide_path.getTotalLength( guide_path );
    var start_time = new Date().getTime();
    var interval_length = 25;

    var interval_id = setInterval( function()
        {
            var elapsed_time = new Date().getTime() - start_time;
            var this_length = elapsed_time / duration * total_length;
            var subpathstr = guide_path.getSubpath( 0, this_length );
            attr.path = subpathstr;
            path.animate( attr, interval_length );

            if ( elapsed_time >= duration )
            {
                clearInterval( interval_id );
                if ( callback != undefined ) callback();
            }                                       
        }, interval_length );  
    return path;    
} 
```

我向任何人提出挑战，让他们找到比这更经济的 HTML 画布解决方案。如果您打算向此小部件添加任何交互性，请在评估经济性时考虑 SVG 中的事件绑定是多么容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:18:17.113

你可以这样做：http: [//jsfiddle.net/nDxbK/](http://jsfiddle.net/nDxbK/)

**编辑：**我说如果示例不是直线移动的圆圈，这将不起作用，并且如果您想为随机移动做这种事情（但是画布上另一方面是理想的）。Zero 在他的回答中证明我错了，我写的内容被视为对 SVG 的批评——远离我！SVG很棒。

# php - 在 DQL 中链接相关实体字段

> ID：11211385
> 
> 赞同：1
> 
> 时间：2012-06-26T16:02:04.097
> 
> 标签：php, doctrine, dql, chaining, database-relations

这样的事情可能吗？

```
SELECT u FROM User WHERE u.address.city LIKE 'Gotham City' 
```

我知道它可以用 JOIN-s 解决，但我想知道 DQL 是否支持这种查询方式。在官方文档中没有找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:06:46.497

不，DQL 不支持。必须使用 JOIN。

请参阅 Doctrine 中的这篇文章：[12.2.2。加入](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/dql-doctrine-query-language.html#joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:08:08.493

这是不可能的，您必须将实体作为特定标识符加入并使用加入的实体检查地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:03:57.857

尝试做：

```
SELECT u FROM User
JOIN u.address a
WHERE a.city LIKE 'Gotham City' 
```

# php - Yii 中的无限滚动

> ID：11211386
> 
> 赞同：1
> 
> 时间：2012-06-26T16:02:08.790
> 
> 标签：php, javascript, pagination, yii

我正在寻找一种在 Yii 的列表视图中显示许多项目（成千上万）的解决方案。我希望能够将它们显示在一个可连续滚动的列表中。这是一个问题，当用户滚动到列表末尾时，我希望新数据替换他刚刚滚动传递的数据。有点像谷歌音乐，如果你有一个很长的播放列表。

我查看了 Yiinfinite-scroller，但它附加到列表的末尾，形成了一个非常长的列表，这正在扼杀我的内存使用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:17:09.020

它实际上很容易在几行 js 和 jQuery 的帮助下实现无限滚动。测量内容 div 的高度，当页面滚动时，从 div 高度减去滚动差异，然后当它达到最小量时，查询更多内容并重置高度计数器并重复：

```
<script type="text/javascript">
var contentHeight = 4000,;
var pageHeight = document.documentElement.clientHeight;
var scrollPosition;
var n = 1;

function scroll(){
    if(navigator.appName == "Microsoft Internet Explorer")
        scrollPosition = document.documentElement.scrollTop;
    else
        scrollPosition = window.pageYOffset;

    if((contentHeight - pageHeight - scrollPosition) < 500){
        $.ajax({ url: "./yourAPI/?next="+n, cache: false,
        success: function(data){
            //append result
            $('#infscroll').append('<div>'+data.result+'</div>');
        }, dataType: "json"});
        n += 1;
        contentHeight += 4000;
    }
}

$(document).scroll(function(){
    setInterval('scroll();', 250);
});
</script>

<div id="infscroll"></div> 
```

# spring - 如何在 JSF 2 中获取所有会话范围的 bean？

> ID：11211387
> 
> 赞同：7
> 
> 时间：2012-06-26T16:02:15.257
> 
> 标签：spring, jsf-2

据我所知，JSF 将所有会话范围的 bean 保存在某种 Map 中（如果我错了，请纠正我。）。在我的应用程序中，我有一个名为“userDetailsBean”的会话范围（由 Spring 管理并注入到支持 bean）bean。

是否可以通过 JSF API 的帮助在某种集合中获取为不同用户创建的所有 bean 实例？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T16:32:35.940

在`@PostConstruct`和`@PreDestroy`.

```
@PostConstruct
public void init() {
    allSessionScopedBeans.add(this);
}

@PreDestroy
public void destroy() {
    allSessionScopedBeans.remove(this);
} 
```

# iphone - 使用两个图像为 iphone tableviewCell 背景图像设置动画

> ID：11211397
> 
> 赞同：1
> 
> 时间：2012-06-26T16:02:51.803
> 
> 标签：iphone, uitableview, didselectrowatindexpath

我想用 didSelectRowAtIndexPath 上的两个闪烁图像为 tableviewcell 背景图像设置动画。我们可以使用以下代码，但它会在背景中显示一张图像。但是我想要像闪烁的图像一样的gif。

```
cell.backgroundView = [ [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"correctAnswer.png"]]autorelease]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:04:27.760

UIImageView 有能力用`animationImages`属性做动画。

```
UIImageView* imgView = [[[UIImageView alloc] init] autorelease];
imgView.animationImages = [NSArray arrayWithObjects:
    [UIImage imageNamed:@"correctAnswer1.png"],
    [UIImage imageNamed:@"correctAnswer2.png"], nil];

imgView.animationDuration = 0.5;
cell.backgroundView = imgView;
[imgView startAnimating]; 
```

您需要在项目中包含动画的每一帧，correctAnswer1.png、correctAnswer2.png 等...

`UITableViewCell`另外，使用'imageView 属性不是更好吗？这样，您将在单元格的左侧获得动画，并且不会干扰文本或单元格的任何其他部分...

# sql - 复杂的“排序依据”或排序问题

> ID：11211406
> 
> 赞同：3
> 
> 时间：2012-06-26T16:03:18.713
> 
> 标签：sql, oracle, sql-order-by

我有一张看起来像这样的桌子

```
Group  Recipe    Priority
0       A         400
0       A         200
0       B         500
0       B         100
1       C         300
1       C         300
1       D         600 
```

重要性是“组”>“优先级”>“配方”

第 0 组必须先行。在第 0 组中，优先级 500 必须先行（因为它具有更高的优先级），但为了效率，所有配方都必须先行。

排序后应该是这个样子

```
Group  Recipe    Priority
0       B         500
0       B         100
0       A         400
0       A         200
1       D         600
1       C         300
1       C         300 
```

我尝试了所有不同的方式来进行“订购”，但找不到正确的方式。

感谢您的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T16:16:57.557

问题很微妙。您不想按优先级排序，而是按给定组/食谱组合的最大优先级排序。也就是说，您希望根据此最大优先级将所有配方保持在一起。

以下是这样做的：

```
select t.Group, t.Recipe, t.Priority,
       max(priority) over (partition by t.group, t.recipe) as maxpriority
from tablename t
order by t.Group asc, 4 desc, t.Recipe, priority desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T22:32:34.807

在旧版本的 Oracle 中，在提供分析函数之前，我们会使用如下查询返回指定的结果集：

```
SELECT f.group
     , f.recipe
     , f.priority
  FROM foo f
  JOIN ( SELECT g.group
              , g.recipe
              , MAX(g.priority) AS max_priority 
           FROM foo g
          GROUP BY g.group, g.recipe
       ) m
    ON m.group = f.group AND m.recipe = f.recipe
 ORDER BY f.group
        , m.max_priority DESC
        , f.recipe
        , f.priority DESC 
```

这种方法适用于其他没有分析功能的数据库，例如 MySQL。

注意：上面的查询不是 NULL 安全的，因为 JOIN 谓词将消除组或配方列具有 NULL 值的行。它可以设为 NULL 安全的，但它会使 SQL 稍微复杂一些。

```
SELECT f.group
     , f.recipe
     , f.priority
  FROM foo f
  JOIN ( SELECT g.group
              , g.recipe
              , MAX(g.priority) AS max_priority 
           FROM foo g
          GROUP BY g.group, g.recipe
       ) m
    ON (m.group = f.group OR COALESCE(m.group,f.group) IS NULL)
       AND (m.recipe = f.recipe OR COALESCE(m.recipe,f.recipe) IS NULL)
 ORDER BY f.group
        , m.max_priority DESC
        , f.recipe
        , f.priority DESC 
```

使用 SELECT 列表中的相关子查询也可以获得等效结果，只是该结果集在结果集中包含一个额外的“max_priority”列。

```
SELECT f.group
     , f.recipe
     , f.priority
     , (SELECT MAX(g.priority)
          FROM foo g
         WHERE (g.group = f.group OR COALESCE(g.group,f.group) IS NULL)
           AND (g.recipe = f.recipe OR COALESCE(g.recipe,f.recipe) IS NULL)
       ) AS max_priority
  FROM foo f
 ORDER BY f.group
        , 4 DESC
        , f.recipe
        , f.priority DESC 
```

（我还没有测试是否可以从 SELECT 列表中删除相关的子查询并完全移至 ORDER BY 子句。如果可行，我们将消除返回额外的列，但该查询看起来非常非常奇怪。）另一个选项（省略该额外列）是将此查询（作为内联视图）包装在另一个查询中。

```
SELECT e.group
     , e.recipe
     , e.priority 
  FROM (
        SELECT f.group
             , f.recipe
             , f.priority
             , (SELECT MAX(g.priority)
                  FROM foo g
                 WHERE (g.group = f.group OR COALESCE(g.group,f.group) IS NULL)
                   AND (g.recipe = f.recipe OR COALESCE(g.recipe,f.recipe) IS NULL)
                ) AS max_priority
          FROM foo f
       ) e
 ORDER BY e.group
        , e.max_priority DESC
        , e.recipe
        , e.priority DESC 
```

# delphi - Delphi：如何将互联网上的文本文件加载到字符串中？

> ID：11211409
> 
> 赞同：4
> 
> 时间：2012-06-26T16:03:33.437
> 
> 标签：delphi, text, web, download

在我的程序上，我有一个检查程序当前版本的函数，它从 url 获取：www.tablemaster.webs.com/versioninfo.txt

如您所见，在 URL 处只是纯文本。我需要将此文本从 URL 加载到我的程序上的字符串中，我将如何执行此操作？我四处寻找，但一无所获。。

PS：我需要尽可能简单的代码..

提前致谢 ：）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-26T16:08:41.550

我会[`TIdHTTP`](http://www.indyproject.org/docsite/html/TIdHTTP.html)以这种方式使用 Indy 最简单的 GET 重载：

```
uses
  IdHTTP;

procedure TForm1.Button1Click(Sender: TObject);
var
  S: string;
  IdHTTP: TIdHTTP;
begin
  IdHTTP := TIdHTTP.Create(nil);
  try
    S := IdHTTP.Get('http://www.tablemaster.webs.com/versioninfo.txt');
    ShowMessage(S);
  finally
    IdHTTP.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T09:08:13.103

您可以使用[myfxboard.. 中的 TIEHTTP](http://www.myfxboard.com/tiehttp/)组件使用 TIEHTTP 从 url 加载 txt 文件：

```
http.ExecuteURL('www.tablemaster.webs.com/versioninfo.txt');
Memo1.Lines.Add(http.sl.Text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:09:21.910

我会使用 MSXML2_TLB，特别是如果我已经在项目中使用了 XML。MSXML2 从 Internet Explorer 5.5 版本开始出现在 Windows 中，因此很有可能它出现在系统上。您可以使用主菜单中的 Import Type Library 选项获取 MSXML2_TLB.pas，然后从列表中选择“Microsoft XML, v6.0”（或更高版本）。

```
var
  r:XMLHTTP;
begin
  r:=CoXMLHTTP.Create;
  r.open('GET','http://www.tablemaster.webs.com/versioninfo.txt','','');
  r.send(EmptyParam);
  if r.status<>200 then raise Exception.Create(IntToStr(r.status)+' '+r.statusText);
  Result:=r.responseText;
end; 
```

# c# - 使用 WCF 和 WPF 的纸牌游戏

> ID：11211410
> 
> 赞同：0
> 
> 时间：2012-06-26T16:03:39.010
> 
> 标签：c#, wpf, wcf, workflow-foundation, playing-cards

我开始开发纸牌游戏，我正在使用 WPF 作为 UI，我想使用 WCF 在客户端和服务器之间进行通信，我知道我想将客户端和服务器放在同一个应用程序上，这样每个人都可以成为服务器，你能给我什么建议？

*WCF 是实现通信的最佳方式？还是我应该使用套接字？

*我应该将WF用于游戏逻辑吗？

*如果我使用 WCF，你会建议我使用 p2p 吗？

欢迎任何建议，我希望这个想法足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:10:07.987

*WCF 是实现通信的最佳方式？还是我应该使用套接字？WCF 是在 .NET 中实现通信的好方法，套接字对您来说会更难。

*我应该将WF用于游戏逻辑吗？从来没有用过。

*如果我使用 WCF，你会建议我使用 p2p 吗？如果它在同一台计算机上，您应该使用 p2p

# android - 如何使用电源按钮运行应用程序

> ID：11211411
> 
> 赞同：0
> 
> 时间：2012-06-26T16:03:39.650
> 
> 标签：android, custom-action, power-management

我一直在浏览android电源按钮模块的教程，在这方面我有几个问题是：

1.  如何设置特定的计时器以使我的应用程序在按下按钮 5 秒后运行。
2.  如何让我的应用程序在启动时运行。

它是个人安全应用程序的基本前提（所以你不会认为我在用它做任何愚蠢的事情。）。我试图让它易于访问以及快速的功能。

任何提示都会很棒。
-谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:40:48.130

> 如何设置特定的计时器以使我的应用程序在按下按钮 5 秒后运行。

这是不支持的。

> 如何让我的应用程序在启动时运行。

如果您的“应用程序”有一个应该“在启动时运行”的 UI，请将其设为主屏幕。

相反，如果您正在尝试做其他事情（例如，安排`AlarmManager`事件），请在清单中`BroadcastReceiver`为该操作注册 a 并获得许可。`BOOT_COMPLETED``RECEIVE_BOOT_COMPLETED`

# javascript - 先触发一组函数，然后回调到最终函数

> ID：11211415
> 
> 赞同：0
> 
> 时间：2012-06-26T16:03:51.257
> 
> 标签：javascript, jquery

我有一个 jquery ajax 成功函数，它使用模板将 json 信息放入 div，然后使用模态插件淡入模态。问题是，模式在所有内容完全写入 div 之前触发。有没有一种方法可以在调用模态触发之前完成此模板操作集合？

```
 success: function (data) {

        //run generic order header through template
        $('#order_detail_header').vkTemplate('scripts/templates/header_template.tmpl?<?=time()?>', data);

        //run header 2 information through template
        $('#order_detail_header_2').vkTemplate('http://scripts/templates/detail_header_2_template.tmpl?<?=time()?>', data);

        //run shipment information through template
        $('#order_detail_shipment_information').vkTemplate('scripts/templates/detail_shipment_information_template.tmpl?<?=time()?>', data, function(){ $(".tracking_box").hide();});

        //run line item information through template
        $('#order_detail_line_item_information').vkTemplate('http://www.isco.net/dev/webtrack/scripts/templates/order_detail_line_item_information_template.tmpl?<?=time()?>', data, function(){ $(".tracking_box").hide();});

        //run pricing information through template 
        $('#order_detail_pricing_information').vkTemplate('http://www.isco.net/dev/webtrack/scripts/templates/order_detail_pricing_information_template.tmpl?<?=time()?>', data['order']);

        $('#order_detail_modal').reveal({ // The item which will be opened with reveal
            animation: 'fade',                   // fade, fadeAndPop, none
            animationspeed: 600,                       // how fast animtions are
            closeonbackgroundclick: true,              // if you click background will modal close?
            dismissmodalclass: 'close_modal'    // the class of a button or element that will close an open modal
        });

        } 
```

我尝试将整个东西包装在一个函数中并将该`.reveal`函数放入回调中，但我一定有错误的语法或想法。任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:14:53.297

我认为 vkTemplate 进行了 ajax 调用。如果是这样，那么您有两个选择：

*   使用同步 ajax
*   向 vkTemplate 添加一个回调参数，以便您可以订购请求

    ```
     div1.vkTemplate(url1,data1,function(){
          // the cbk function, when vkTemplate is done getting data from url and added the html
          div2.vkTemplate(url2,data2,function(){
            // all data loaded? yes? then call your function
            modal.reveal()
          })
        }) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:12:00.630

这是一个简单的答案，因为我不熟悉您使用的插件，但它会工作....

```
 success: function (data) {

        var counter = 5;

        //run generic order header through template
        $('#order_detail_header').vkTemplate('scripts/templates/header_template.tmpl?<?=time()?>', data, function() { doReveal(); });

        //run header 2 information through template
        $('#order_detail_header_2').vkTemplate('http://scripts/templates/detail_header_2_template.tmpl?<?=time()?>', data, function() { doReveal(); });

        //run shipment information through template
        $('#order_detail_shipment_information').vkTemplate('scripts/templates/detail_shipment_information_template.tmpl?<?=time()?>', data, function(){ $(".tracking_box").hide(); doReveal(); });

        //run line item information through template
        $('#order_detail_line_item_information').vkTemplate('http://www.isco.net/dev/webtrack/scripts/templates/order_detail_line_item_information_template.tmpl?<?=time()?>', data, function(){ $(".tracking_box").hide(); doReveal(); });

        //run pricing information through template 
        $('#order_detail_pricing_information').vkTemplate('http://www.isco.net/dev/webtrack/scripts/templates/order_detail_pricing_information_template.tmpl?<?=time()?>', data['order'], function() { doReveal(); });

        function doReveal() {
            counter--;
            if (counter > 0) return;
            $('#order_detail_modal').reveal({ // The item which will be opened with reveal
                animation: 'fade',                   // fade, fadeAndPop, none
                animationspeed: 600,                       // how fast animtions are
                closeonbackgroundclick: true,              // if you click background will modal close?
                dismissmodalclass: 'close_modal'    // the class of a button or element that will close an open modal
            });
        }
    } 
```

它只是应用一个计数器来指定在进行显示之前需要完成多少个函数，然后在每次调用 vkTemplate 完成时进行检查。

# android - 在设置/安全/设置 SIM 卡锁定中检测“锁定 SIM 卡”的变化

> ID：11211420
> 
> 赞同：0
> 
> 时间：2012-06-26T16:04:01.880
> 
> 标签：android, settings, sim-card

一个针对Android 4.0.x 的问题最好。

我想立即或几秒钟后检测`Lock SIM card`对`Settings > Security > Set up SIM card lock`.

我尝试了 3 种方法：

1) 访问只读`com.android.settings`共享首选项。

```
Context settings = getApplicationContext().createPackageContext("com.android.settings", Context.CONTEXT_IGNORE_SECURITY);
SharedPreferences prefSettings = settings.getSharedPreferences("com.android.settings_preferences", MODE_WORLD_READABLE);

Map<String, ?> allSettings = prefSettings.getAll();
for(String s : allSettings.keySet()){
    //do somthing like String value=allSettings.get(s).toString());
} 
```

logcat 中有警告：“未经许可尝试读取首选项文件 /data/data/com.android.settings/shared_prefs/com.android.settings_preferences.xml”。返回的地图`getAll()`是空的。

2)`ITelephony.isSimPinEnabled()`始终返回 false，即使启用并设置了 SIM PIN。因此，更改设置似乎与此界面完全无关。我正在考虑轮询界面，但这也不好。

3）在这里创建`ContentObserver`观察`Settings.Secure`不起作用。实际上，`settings.db`使用 sqlite 读取内容表明更改此设置时没有修改任何记录。以下代码也证实了这一点：

```
try {
    int lockPattern = android.provider.Settings.Secure.getInt(getContentResolver(), android.provider.Settings.Secure.LOCK_PATTERN_ENABLED);
    // check lock Pattern: 0=disabled, 1=enabled
} catch (SettingNotFoundException e) {
    e.printStackTrace(); // on run, we reach this line.
} 
```

我唯一确定的是修改`SIM PIN enabled`设置会重写 com.android.settings preferences.xml 文件，如下所示：

> $adb shell cat /data/data/com.android.settings/shared_prefs/com.android.settings_preferences.xml

```
<?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<map>
<boolean name="sim_toggle" value="true" />
<string name="sim_pin"></string>
</map> 
```

受更改影响的标签是`sim_toggle`。

有人有想法吗？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:40:39.480

必须实施一种方法来确定今天是否启用了 SimPin。ITelephony.isSimPinEnabled() 也总是为我返回 false。没有尝试您描述的其他方法。

我找到了一种获取当前设置的方法：

*   首先，您需要获取一个 proxyPhone 对象，如何做到这一点可以在这里看到： [Can a telephony.Phone object be instantiated through the sdk?](https://stackoverflow.com/questions/2143754/can-a-telephony-phone-object-be-instantiated-through-the-sdk)

*   然后您可以检索 IccCard-Object 并在此执行 getIccLockEnabled 方法。

代码：

```
 Object proxyPhone = PhoneUtil.getProxyPhoneInstance(this);

  Class<?> phone = Class.forName("com.android.internal.telephony.Phone");
  Method getIccCardMethod = phone.getDeclaredMethod("getIccCard");
  Object iccCard = getIccCardMethod.invoke(proxyPhone);
  Class<?> iccCardClass = Class.forName("com.android.internal.telephony.IccCard");

  Method getIccLockEnabled = iccCardClass.getDeclaredMethod("getIccLockEnabled");
  Boolean isIccLockEnabled = (Boolean) getIccLockEnabled.invoke(iccCard); 
```

在 Android 2.3（+？）上为我工作，但正如在另一个线程中提到的，您必须将此代码作为电话用户/电话进程运行。

对此没有公共 api / deviceAdmin-Api 真的有点失望。可以想象，公司希望确保他们的员工保持 sim pin 处于启用状态（被盗的情况）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T21:26:46.920

好吧，我想我有一个简单的方法来检测是否必须输入 Sim PIN。最重要的是，它可以通过 SDK 获得。你可以在[`PhoneStateListener`](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)...中运行它

```
public static boolean isSimPinRequired(){
    TelephonyManager m = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    if (m.getSimState() == TelephonyManager.SIM_STATE_PIN_REQUIRED) return true;
    return false;
}//end method 
```

# list - 在 Lisp 中用 defun 重写一个列表

> ID：11211428
> 
> 赞同：1
> 
> 时间：2012-06-26T16:04:13.627
> 
> 标签：list, loops, lisp

我想编写一个输出列表的函数。该函数获取一个列表并输出一个新列表。例如：

```
(0 0 1 2 2 1) -> (3 4 4 5 5 6)). 
```

它的作用是：初始列表中的 index+1 是新列表中的值。并且该值在新列表中放置 x 次，具体取决于初始列表中的值。

```
(1 2) -> (1 2 2)
(0 3 0 3) -> (2 2 2 4 4 4) 
```

所以 3 在第二个位置，值是 3，所以 2（第二个位置）在新列表中放置了 3 次。

我想出了这个，它不起作用

```
(defun change-list (list)
  (setq newlist '(1 2 3))
  (setq i 0) 
  (while (<= i (length list)) 
    (if (= (nth i list) 0)
      (concatenate 'list '0 'newlist)
    (concatenate 'list '(i) 'newlist))
    (+ i 1)
    (remove 0 newlist))) 
```

问题主要在于它无法识别新变量。它给了我这些错误：functions.lisp:27:26: warning: Undefined function referenced: while

functions.lisp:31:2：警告：对未声明变量 newlist 的自由引用假定为特殊。警告：对我认为特殊的未声明变量的自由引用。

有没有人明白这一点？

* * *

我们能够自己解决它：

```
(defun change-list (a) 
  (loop for j from 1 to (length a) by 1 append 
    (loop for i from 1 to (nth (- j 1) a) by 1 
      collect j ))) 
```

这是一个更大的任务的一部分，我们没有得到太多关于 lisp 的教育，更像是：用 lisp 做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:03:21.210

假设这是 Common Lisp，然后我将在您的代码中列出一些问题：

```
(defun change-list (list)
  (setq newlist '(1 2 3)) 
```

`SETQ`不声明变量，它只是设置它们。

```
 (setq i 0) 
  (while (<= i (length list)) 
```

`WHILE`在 Common Lisp 中不存在。

```
 (if (= (nth i list) 0)
      (concatenate 'list '0 'newlist) 
```

`0`不是一个列表。因此你不能连接它。 `CONCATENATE`没有副作用。你在这里所做的一切都会丢失。 `NEWLIST`这是一个符号，而不是一个列表。不工作。

```
 (concatenate 'list '(i) 'newlist)) 
```

`i`这里不是变量。将其放入列表中将没有。 `CONCATENATE`没有副作用。你在这里所做的一切都会丢失。 `NEWLIST`这是一个符号，而不是一个列表。不工作。

```
 (+ i 1) 
```

上面的效果就没有了。

```
 (remove 0 newlist) 
```

上面的效果就没有了。

```
 )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:38:52.437

您可以简化对此的回答：

```
(defun change-list (list) 
  (loop for i in list and j from 1
        append (loop repeat i collect j))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T19:23:41.390

基本上，只是做同样事情的另一种方法：

```
(defun change-list (x)
  (let ((index 0))
    (mapcon
     #'(lambda (y)
         (incf index)
         (let ((z (car y)))
           (unless (zerop z)
             (make-list z :initial-element index)))) x))) 
```

但可能对学习/谁知道你的教授期望什么有用。

# jquery - 将变量从 jquery 传递到 rails 控制器

> ID：11211433
> 
> 赞同：0
> 
> 时间：2012-06-26T16:04:30.033
> 
> 标签：jquery, ruby-on-rails

我需要将通过 jquery 从客户端捕获的变量传递给控制器​​，以便它可以在服务器端使用。谷歌搜索了一下，我发现我们可以通过 Ajax 调用传递它。

**路线.rb**

```
get "mymethod?Id=", :to => "sample#mymethod" 
```

**j1.js**

```
$(function(){

var test = 1;

$(.btn).click(function(){

  $.ajax({
           url: '/mymethod?Id='+ test,
           success: function(data) {
                 }
         });
    });

}); 
```

**sample_controller.rb**

```
def mymethod
 session[:Id] = params["Id"];
end 
```

当我尝试使用 session[:Id] 时，它总是为零。

有任何想法吗，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:10:59.827

如果你想在 jquery 中发出 GET 请求，你最好这样做：

```
$.ajax({
    url: '/mymethod',
    success: function(data){ // anything },
    data: { Id: test }
}); 
```

因为它会为您正确地对参数进行 urlencode 和格式化。

在 Rails 中，删除对 Id 的引用，`routes.rb`然后使用`params`控制器中的字典来访问变量 Id（此处的信息：[http](http://rails.nuvvo.com/lesson/6371-action-controller-parameters) ://rails.nuvvo.com/lesson/6371-action-controller-parameters ）

# google-docs - 将图像插入指定位置

> ID：11211434
> 
> 赞同：2
> 
> 时间：2012-06-26T16:04:40.193
> 
> 标签：google-docs, google-apps-script, google-docs-api

我有一个 Google Apps 脚本，它通过调用 body.replaceText('TextA', 'TextB'); 将模板文档副本中的占位符替换为一些文本。

现在我想扩展它以包含图像。有谁知道如何做到这一点？

谢谢你，安德烈

编辑：只是为了弄清楚我的脚本是做什么的。我在电子表格中创建了一个 Google 表单。我创建了一个脚本，它在表单提交时运行，遍历与表单对应的工作表，查找未处理的行，从相应的单元格中获取值并将它们放入 Google 文档的副本中。Google 表单中的某些字段是多行文本字段，这就是 '\r\r' 的来源。

这是我现在想出的一种解决方法，并不优雅，但它到目前为止有效：

```
// replace <IMG src="URL"> with the image fetched from URL
function processIMG_(Doc) {

  var totalElements = Doc.getNumChildren();

  for( var j = 0; j < totalElements; ++j ) {

    var element = Doc.getChild(j);
    var type = element.getType();

    if (type =='PARAGRAPH'){
      var par_text = element.getText();

      var start = par_text.search(new RegExp('<IMG'));
      var end = par_text.search(new RegExp('>'));
      if (start==-1)
        continue;

      // Retrieve an image from the web.
      var url = getURL_(par_text.substring(start,end));
      if(url==null)
        continue;

      // Before image
      var substr = par_text.substring(0,start);
      var new_par = Doc.insertParagraph(++j, substr);

      // Insert image
      var resp = UrlFetchApp.fetch(url);
      new_par.appendInlineImage(resp.getBlob());

      // After image
      var substr = par_text.substring(end+1);
      Doc.insertParagraph(++j, substr);

      element.removeFromParent();
      j -= 2; // one - for latter increment; another one - for increment in for-loop
      totalElements = Doc.getNumChildren();      
    }      
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:56:12.127

这是一段（大致）你想要的代码。

（可能还有其他方法可以做到这一点，它肯定需要一些改进，但总体思路就在那里）

我选择在文档中使用“###”来标记图片将被插入的位置，图片必须在您的谷歌驱动器中（或者更准确地说是在“某些”谷歌驱动器中）。下面的代码使用了一个文档我分享了一个图片，我也分享了，所以你可以试试。这里是[文档的链接](https://docs.google.com/document/d/1INkRIviwdjMC-PVT9io5LpiiLW8VwwIfgbq2E4xvKEo/edit)，不要忘记删除图片并在测试前在某处放置###（如果有人在你之前运行过代码;-)

```
function analyze() { // just a name, I used it to analyse docs
  var Doc = DocumentApp.openById('1INkRIviwdjMC-PVT9io5LpiiLW8VwwIfgbq2E4xvKEo');
  var image = DocsList.getFileById('0B3qSFd3iikE3cF8tSTI4bWxFMGM')
    var totalElements = Doc.getNumChildren();
    var el=[]
    for( var j = 0; j < totalElements; ++j ) {
      var element = Doc.getChild(j);
      var type = element.getType();
Logger.log(j+" : "+type);// to see doc's content
       if (type =='PARAGRAPH'){
       el[j]=element.getText()
       if(el[j]=='###'){element.removeFromParent();// remove the ###
         Doc.insertImage(j, image);// 'image' is the image file as blob 
         }
       }
    }
} 
```

编辑：要使此脚本正常工作，### 字符串**必须**在其段落中单独存在，之前或之后都没有其他字符...请记住，每次使用 ENTER 强制换行时，文档都会创建一个新段落。

# c# - 在 C# 中禁用编辑 WebBrowser

> ID：11211435
> 
> 赞同：2
> 
> 时间：2012-06-26T16:04:42.223
> 
> 标签：c#, browser, readonly

所以我一直在做这个项目，我们在表单上有一个 WebBrowser 对象。该对象的目的是将 HTML 表单加载到其中以供查看，但在当前时间点，您可以编辑 HTML 表单的内容，这是不希望的。

我只想向用户显示这种 HTML 形式的信息，但不允许他们更改表单上的文本框或复选框或任何类似性质的东西。

我尝试使用导航事件并设置 e.cancel = true;。这甚至使控件无法加载页面。如果我将其设置为仅执行 e.cancel = true; 表单加载后，我仍然可以更改表单上的文本框等，因为它似乎只是随机调用了导航事件。

有谁知道让 WebBrowser 对象只读的方法？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-27T13:14:15.567

您可以将`contentEditable`属性应用于`Body`文档的标签。

```
Document.Body.SetAttribute("contentEditable", false); 
```

这将使您的文档对用户只读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:15:16.097

您可以尝试访问页面上的所有表单元素并在标签上设置只读属性。就像是：

```
var inputs = webBrowser1.Document.GetElementsByTagName("input");
foreach (HtmlElement element in inputs)
{
  element.SetAttribute("readonly", "readonly");
} 
```

您显然必须对所有表单元素（选择等）重复该过程，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-11T13:19:24.353

我也遇到过这个问题。多亏了 steavy，我才能想出一个解决方案：

连接到`DocumentCompleted`事件（您可以在设计器中执行此操作）：

```
myWebBrowser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wb_procedure_DocumentCompleted); 
```

然后在事件中使其只读：

```
private void myWebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    myWebBrowser.Document.Body.SetAttribute("contentEditable", "false");
} 
```

我会在文档完全加载时执行此操作，因为我有时会遇到 a `NullReferenceException`，正文尚未加载并且行会抛出。

# javascript - 如何将此javascript代码转换为jquery

> ID：11211445
> 
> 赞同：0
> 
> 时间：2012-06-26T16:05:12.417
> 
> 标签：javascript, jquery

```
if (window.parent.frames['scripts1']) {
  if (window.parent.frames['scripts1'].document.documentElement) {
    var strSCRIPT = window.parent.frames['scripts1'].document.documentElement.textContent;
    if ((strSCRIPT.lastIndexOf('bbbbEND') - strSCRIPT.length) != -7) {
      window.parent.frames['scripts1'].document.location.href = 'test1.txt?refresh=' + Date();
    }
  } else {
    window.parent.frames['scripts1'].document.location.href = 'test1.txt?refresh=' + Date();
  }
} 
```

我已经尝试了很多东西，但在为跨浏览器编写东西方面没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:22:08.413

首先，重构代码以消除重复：

```
var s = window.parent.frames['scripts1'];
if (s) {
    var d = s.document;
    var e = d.documentElement;
    var t = e ? e.textContent : null;
    if (!t || t.length - t.lastIndexOf('bbbbEND') != 7) {
        d.location.href = 'test1.txt?refresh=' + Date();
    }
} 
```

有一个已确定的兼容性问题，但至少现在我们有机会发现它！

具体来说，`.textContent`IE8 或更早版本不支持，因此：

```
var s = window.parent.frames['scripts1'];
if (s) {
    var d = s.document;
    var e = d.documentElement;
    var t = e ? (e.textContent || e.innerText) : null;
    if (!t || t.length - t.lastIndexOf('bbbbEND') != 7) {
        d.location.href = 'test1.txt?refresh=' + Date();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:03:27.750

这里有一些 jQuery 概念材料可以帮助您入门：

```
// make sure to give your frame an ID, and then it's easy to access
var frame_a = $( "#frame_a" );        

// jQuery's content() function seems to only work on iFrames, not on Frames
var frame_a_document = $( frame_a[0].contentDocument );        

var frame_a_document_body = frame_a_document.find( "body" );
var frame_a_text = $( frame_a_document_body ).text();        

alert( frame_a_text ); 
```

请记住这一重要事实：您的框架是在父文档完成后加载的，这意味着 ready() 函数将在加载框架之前执行。如果您尝试在您的 ready() 函数中访问您的框架，很可能您将一无所获，因为它还没有被加载——即，它是竞争条件。

# java - 未设置“hibernate.dialect”时，连接不能为空

> ID：11211451
> 
> 赞同：26
> 
> 时间：2012-06-26T16:05:25.617
> 
> 标签：java, spring, hibernate

在使用 spring3 设置休眠时遇到更多问题。这次它说连接是 nul，因为我的 hibernate.cfg.xml 文件中没有设置方言。

这是完整的例外：

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in URL [file:war/WEB-INF/datasource-config.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Connection cannot be null when 'hibernate.dialect' not set
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:96)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:44)
    at org.springframework.test.context.TestContext.buildApplicationContext(TestContext.java:198)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:233)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:126)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:85)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:95)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:139)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.hibernate.HibernateException: Connection cannot be null when 'hibernate.dialect' not set
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:97)
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:67)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:172)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2270)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2266)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1735)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1775)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:184)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:314)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 29 more 
```

这是我设置 sessionfactory 的 dataSource-config.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
   http://www.springframework.org/schema/beans 
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/tx 
   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context-3.0.xsd
      ">

    <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="${database.driver}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.user}" />
        <property name="password" value="${database.password} " />
    </bean>

    <bean id="mySessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="myDataSource" />
        <property name="packagesToScan" value="com.jr.freedom"/>
        <property name="hibernateProperties" value="classpath:hibernate.cfg.xml"/>

    </bean>

    <!-- Declare a transaction manager -->
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager"
        p:sessionFactory-ref="mySessionFactory" />

</beans> 
```

下面是hibernate.cfg.xml文件

```
 <?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <!-- JDBC connection settings -->
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/freedom</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.connection.password">password</property>

        <!-- JDBC connection pool, use Hibernate internal connection pool -->
        <property name="connection.pool_size">25</property>

        <!-- Defines the SQL dialect used in Hiberante's application -->
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>

        <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>

        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

        <!-- Display and format all executed SQL to stdout -->
        <property name="show_sql">true</property>
        <property name="format_sql">true</property>

        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">create</property>

        <!-- Mapping to hibernate mapping files -->
        <!--mapping resource="org/kodejava/example/hibernate/app/Label.hbm.xml"/-->
    </session-factory>
</hibernate-configuration> 
```

如您所见，方言正在设置中。

编辑：我的 database.properties 文件

```
 # DB properties file

database.url=jdbc:mysql://localhost:3306/freedom
database.driver=com.mysql.jdbc.Driver
database.user=root
database.password=password
database.maxConnections=25 
```

编辑：这是一个完整的堆栈跟踪。访问数据库可能是问题，但我可以通过命令提示符成功访问它？

```
 2288 [main] WARN  org.hibernate.engine.jdbc.internal.JdbcServicesImpl  - HHH000342: Could not obtain connection to query metadata : Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: YES))
2289 [main] INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory  - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4f549ceb: defining beans [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.web.servlet.config.viewControllerHandlerMapping,userService,myDataSource,mySessionFactory,transactionManager,propertyConfigurer,org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0,viewResolver,org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter#0,hello,userController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
2289 [main] DEBUG org.springframework.beans.factory.support.DisposableBeanAdapter  - Invoking destroy method 'close' on bean with name 'myDataSource'
2289 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory  - Retrieved dependent beans for bean '(inner bean)#14': [org.springframework.web.servlet.config.viewControllerHandlerMapping]
2289 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory  - Retrieved dependent beans for bean '(inner bean)#8': [org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0]
2289 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory  - Retrieved dependent beans for bean '(inner bean)#1': [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0]
2290 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory  - Retrieved dependent beans for bean '(inner bean)': [org.springframework.web.servlet.handler.MappedInterceptor#0] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T16:23:46.097

缺少数据库连接。在 hibernate.cfg.xml 文件中添加这样的行

```
<property name="connection.driver_class">com.mysql.jdbc.Driver</property>
<property name="connection.url">
    jdbc:mysql://localhost:3306/your_database
</property>
<property name="connection.username">your_user</property>
<property name="connection.password">your_password</property> 
```

`your_`（如果您的计算机上未安装数据库，请替换 localhost，并在我的示例中设置以开头的值）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-05-20T19:08:29.283

I had this error with JPA, then I just added this line to application.properties:

```
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect 
```

based on this post: [org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when 'hibernate.dialect' not set](https://stackoverflow.com/questions/26548505/org-hibernate-hibernateexception-access-to-dialectresolutioninfo-cannot-be-null)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T14:31:18.627

我有同样的问题。从 Apache Commons 数据源切换：

```
<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${database.driver}" />
    <property name="url" value="${database.url}" />
    <property name="username" value="${database.user}" />
    <property name="password" value="${database.password} " />
</bean> 
```

对 C3P0：

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
    <property name="driverClass" value="com.mysql.jdbc.Driver" />
    <property name="jdbcUrl" value="jdbc:mysql://ipadress:3306/schema" />
    <property name="user" value="root" />
    <property name="password" value="abc" />
</bean> 
```

让我的问题消失了。也许有人可以解释为什么，我很高兴它有效，并想分享我所知道的一点：）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-21T10:51:39.657

我认为这是未`hibernate.cfg.xml`在应用程序中加载文件的问题。

我也遇到了同样的问题。我在我的项目中尝试了以下代码：

```
Configuration cfg = new Configuration();
cfg.configure("hibernate.cfg.xml"); 
```

然后它工作得很好。希望这会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T09:22:09.333

我你正在使用休眠，`InnoDB`你为什么不设置`hibernate.dialect`to`org.hibernate.dialect.MySQL5`或 `org.hibernate.dialect.MySQL`.

和 的连接属性`hibernate.connection.url`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T05:57:06.363

我认为你`datasource-config.xml`不在类路径中

而不是有这个文件`WEB-INF/datasource-config.xml`

将其复制到`WEB-INF/classes/datasource-config.xml`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-30T09:22:15.053

我认为您没有配置**hibernate.cfg.xml。**

```
Configuration configuration = new Configuration();
configuration.configure("hibernate.cfg.xml");
SessionFactory factory = configuration.buildSessionFactory(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-17T13:36:10.777

在 persistence.xml 文件中添加了以下内容，

```
<property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-25T10:49:35.647

如果您的 mysql-connector 版本和 mysql-installer 版本不同，则会出现此问题。

在内部它会抛出原因：

> com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException：客户端不支持服务器请求的认证协议；考虑升级 MySQL 客户端。

所以你需要使你的 mysql-connector 版本和 mysql-installer 版本相同......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-01T11:59:44.233

您没有发布会话工厂初始化代码。但我想这与[这个问题相同](https://stackoverflow.com/questions/21282432/hibernateexception-access-to-dialectresolutioninfo-cannot-be-null-when-hiberna)

从 Hibernate 4.3.2.Final 开始，引入了 StandardServiceRegistryBuilder。请按照此顺序进行初始化，例如：

```
Configuration configuration = new Configuration();
configuration.configure("com/jeecourse/config/hibernate.cfg.xml");

ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder().applySettings(
        configuration.getProperties()).build();
sessionFactory = configuration.buildSessionFactory(serviceRegistry); 
```

请仔细检查您的代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-15T13:04:09.353

我遇到了同样的问题，问题是我的计算机没有输入到 postgres 数据库的 pg_hba.conf 中，该数据库允许允许哪些客户端（IP 地址）与数据库交谈。

顺便说一句：其他用户告诉他们，如果他们只是忘记在本地启动数据库服务，也会引发错误

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-07T07:00:45.283

我认为在创建配置对象后卸载 hibernate.cfg.xml 文件会导致错误，如下所示：

```
Configuration config = new Configuration();
config.configure("hibernate.cfg.xml"); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-26T15:30:41.907

我认为您不会像下面那样创建配置。

```
Configuration conf = new Configuration().configure(); 
```

最好的

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-24T02:32:24.913

我们最近在我们的一个部署中遇到了同样的问题，因为我们也在使用休眠，而 dialect is null 是一个模糊的错误。我使用的是连接字符串本身，并进行了以下更改以使其工作

connectionUrl :- jdbc:mysql://127.0.0.1:3306/{{dbName}}?serverTimezone=UTC&allowPublicKeyRetrieval=true&useSSL=false

我们如何解决它的步骤 1）我们使用 JDBC 驱动程序运行简单的 DB 连接，这将给出时区异常。2）我们发现了时区问题，必须在连接字符串中添加更多属性，如上所示。3）我们还添加了 2 个其他属性，因为它仍然无法正常工作。

方言未设置模糊占用了我们很多时间，我希望这会有所帮助。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-02-15T06:05:39.560

这对我有用，添加了方言属性...

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.2" xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd">
    <persistence-unit name="project_name" transaction-type="RESOURCE_LOCAL">
        <properties>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/"/>
            <property name="javax.persistence.jdbc.user" value="root"/>
            <property name="javax.persistence.jdbc.password" value="root"/>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
            <property name="javax.persistence.schema-generation.drop-source" value="script-then-metadata"/>
            <property name="dialect" value="org.hibernate.dialect.MySQLDialect"/>  
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-01-14T06:30:44.517

单独创建`ServiceRegistry`实例并将其传递给`buildSessionFactory`可能会导致此错误。尝试`SessionFactory`如下创建实例：

```
private static SessionFactory factory;
factory = cfg.buildSessionFactory(
          new ServiceRegistryBuilder().applySettings(cfg.getProperties())
         .buildServiceRegistry()); 
```

# oracle - 创建约束时，例外进入子句不起作用

> ID：11211455
> 
> 赞同：7
> 
> 时间：2012-06-26T16:05:48.883
> 
> 标签：oracle

我使用 Oracle 11g。
我有一张桌子：

```
create table test (one number(2), two number(2)); 
```

有 2 行：

```
insert into test (one, two) values (1, 1);
insert into test (one, two) values (2, null);
commit; 
```

现在我创建一个异常表：

```
create table exceptions(row_id rowid,
                       owner varchar2(30),
                       table_name varchar2(30),
                       constraint varchar2(30)); 
```

现在我想为测试创建主键：

```
alter table test add constraint test_pk primary key (one, two) exceptions into exceptions; 
```

当然我得到以下错误：ORA-01449

但是导致异常的行不在异常表中？

有谁能够帮助我。提前致谢

沃尔夫冈

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T17:18:07.043

为此，您必须首先创建禁用的约束：

```
ALTER TABLE test ADD CONSTRAINT test_pk PRIMARY KEY (one, two) DISABLE; 
```

然后，启用带有异常的约束：

```
ALTER TABLE TEST ENABLE CONSTRAINT test_pk EXCEPTIONS INTO exceptions; 
```

然后你可以选择结果：

```
SQL> SELECT * FROM EXCEPTIONS;

ROW_ID             OWNER TABLE_NAME CONSTRAINT
------------------ ----- ---------- ----------
AAHpV4AAHAAApliAAB XXX   TEST       TEST_PK 
```

# jquery - 使用 Jquery 深入了解 UL

> ID：11211456
> 
> 赞同：0
> 
> 时间：2012-06-26T16:05:49.993
> 
> 标签：jquery, menu

我有一个 UL 列表设置如下：

```
<div id="menu">
 <ul>
   <li>
    <a href="step-1" />
   </li>
   <li>
    <a href="step-2" />
   </li>
 </ul>
</div> 
```

我正在尝试深入研究该列表中的“a href”并更改类属性，但遇到了一些麻烦。

我尝试了以下方法，但似乎没有奏效，有人可以帮我引导吗？

```
 var menuItem = $('#menu ul li').find('a:has(href="#step-'+num+'")');
 menuItem.removeClass('disabled');
 menuItem.addClass('done'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:06:48.353

```
$('#menu ul li a[href^="step"]').removeClass('disabled').addClass('done'); 
```

**[演示](http://jsfiddle.net/CC7aa/2/)**

### 笔记

`^=`是**[Attribute Starts With Selector](http://api.jquery.com/attribute-starts-with-selector/)**选择器，在这种情况下，它指出`a`那些`href`以`step`

### 在你的方法中

```
 var menuItem = $('#menu ul li').find('a[href^="step"]');
 menuItem.removeClass('disabled');
 menuItem.addClass('done'); 
```

### 根据评论中的小提琴分享

```
$('#wizard ul li a[href="#step-'+ step +'"]').removeClass('disabled').addClass('done'); 
```

不是

```
$('#menu ul li a[href="#step-'+ step +'"]').removeClass('disabled').addClass('done'); 
```

没有什么`id=menu`，它是`id=wizard`

**[演示](http://jsfiddle.net/kBxUq/1/)**

# c# - 自定义内容类型

> ID：11211461
> 
> 赞同：0
> 
> 时间：2012-06-26T16:06:16.030
> 
> 标签：c#, visual-studio-2010, sharepoint, sharepoint-2010, sharepoint-designer

我在 Visual Studio 2010 中创建了一个自定义内容类型：

[自定义 http://img204.imageshack.us/img204/439/customf.jpg](http://img204.imageshack.us/img204/439/customf.jpg)

这里有我的自定义内容类型.... 我想在同一站点的子站点中使用此内容类型。现在我有这个：

http // XXXXX/......../Forms/AllItems.aspx

我想使用这个内容类型

http //XXXXX/SUBSITE...../Forms/AllItems.aspx...

在代码中，我将自定义内容类型与第一个文档库相关联，如下所示：

```
 <CustomAction
Id="SPTest.CustomMenuItem.ButtonClicked"
Location="CommandUI.Ribbon.ListView"
RegistrationId="{F9658A9F-3F04-48BD-A14A-9EBAF5DE9EE8}"
RegistrationType="List"
> 
```

其中 RegistrationId 是文档库站点的 Id，但是当我输入此 RegistrationId 时，子站点文档库的 Id ......没有任何反应......

另一个问题：*当我在此文档库中选择一个项目时，将显示“文档”选项卡.... 是否有某种方法可以显示 PATOne 规则引擎而不是文档选项卡？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:46:00.373

那是“自定义操作”，而不是“自定义内容类型”。提示：内容类型将包含一个“内容类型”元素。它看起来像：

```
<ContentType ID="0x01AB"
     Name="MyCustomContentType"
     Group="MyCustomContentTypeGroup"
     Description="Customized Content Type"
     Version="0">
   <FieldRefs>
    <FieldRef ID="{8c06beca-0777-48f7-91c7-6da68bc07b69}"
     Name="Created"
     DisplayName="Field1" />
    <FieldRef ID="{1df5e554-ec7e-46a6-901d-d85a3881cb18}"
     Name="Author"
     DisplayName="Field2" />
   </FieldRefs>
</ContentType> 
```

此外，如果要针对内容类型进行注册，则 RegistrationId 不应是 guid。如果针对列表注册，则 RegistrationId 应该是列表的类型 ID，例如（站点中的文档库为 101），或者可能是*特定*列表的 GUID（在这种情况下，该操作仅适用于该列表）。我没有尝试过最后一个，但怀疑它会起作用。（**编辑：在**[本讨论](http://social.technet.microsoft.com/Forums/en/sharepoint2010programming/thread/1efd3cf1-e978-4020-9a63-929d7b44a3e4)的底部被描述为以这种方式工作）

根据 guid 是什么，您可能已经为特定列表注册了自定义操作，但您的子站点中的列表将具有不同的 ID，因此自定义操作注册将不适用于它。

简而言之，您可以将自定义操作添加到：

*   一个特定的列表，这就是我认为你所做的。
*   站点/子站点中给定类型的所有列表
*   然后您在这些列表中使用[的内容类型。](http://msdn.microsoft.com/en-us/library/cc768562%28v=office.12%29.aspx)（我没试过）

要针对内容类型进行注册，我希望注册看起来像：

```
<CustomAction 
    Id="SPTest.CustomMenuItem.ButtonClicked"              
    Location="CommandUI.Ribbon.ListView"
    RegistrationType="ContentType"
    RegistrationId="0x01AB" 
```

注意 RegistrationType 和 RegistrationId

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:24:07.800

这是我的内容类型

```
<?xml version="1.0" encoding="utf-8"?>
 <Elements xmlns="http://schemas.microsoft.com/sharepoint/">
<CustomAction
Id="SPTest.CustomMenuItem.ButtonClicked"
Location="CommandUI.Ribbon.ListView"
RegistrationId="{F9658A9F-3F04-48BD-A14A-9EBAF5DE9EE8}"
RegistrationType="List"
>
<CommandUIExtension>
  <CommandUIDefinitions>
    <CommandUIDefinition
      Location="Ribbon.Tabs._children">
      <Tab
        Id="Ribbon.PATOneRule"
        Title="PATOne Rule Engine"
        Sequence="501">
        <Scaling
          Id="Ribbon.PATOneRule.Scaling">
          <MaxSize
            Id="Ribbon.PATOneRule.MaxSize"
            GroupId="Ribbon.PATOneRule.PATOneRuleGroup"
            Size="OneLargeTwoMedium"/>
          <Scale
            Id="Ribbon.PATOneRule.Scaling.PATOneRuleScaling"
            GroupId="Ribbon.PATOneRule.PATOneRuleGroup"
            Size="OneLargeTwoMedium" />
        </Scaling>
        <Groups Id="Ribbon.PATOneRule.Groups">
          <Group
            Id="Ribbon.PATOneRule.PATOneRuleGroup"
            Description="Workflow Rules"
            Title="Workflow Group"
            Sequence="52"
            Template="Ribbon.Templates.CustomTemplateExample">
            <Controls Id="Ribbon.PATOneRule.PATOneRuleGroup.Controls">
              <Button
                Id="Ribbon.PATOneRule.PATOneRuleGroup.NewWorkflow"
                Image32by32="/PublishingImages/_t/new_jpg.jpg"
                Command="PATOneRule.NewWorkflow"
                Sequence="15"
                Description="Create New Workflow"
                LabelText="New Workflow"
                TemplateAlias="cust1"/>
              <Button
                Id="Ribbon.PATOneRule.PATOneRuleGroup.RunWorkflow"
                Image32by32="/PublishingImages/_t/play_jpg.jpg"
                Command="PATOneRule.RunWorkflow"
                Sequence="15"
                Description="Run Selected Workflow"
                LabelText="Run Workflow"
                TemplateAlias="cust2"/>
              <Button
               Id="Ribbon.PATOneRule.PATOneRuleGroup.EditWorkflow"
               Image32by32="/PublishingImages/_t/edit_jpg.jpg"
               Command="PATOneRule.EditWorkflow"
               Sequence="15"
               Description="Edit Selected Workflow"
               LabelText="Edit Workflow"
               TemplateAlias="cust3"/>
            </Controls>
          </Group>
        </Groups>
      </Tab>
    </CommandUIDefinition>
    <CommandUIDefinition Location="Ribbon.Templates._children">
      <GroupTemplate Id="Ribbon.Templates.CustomTemplateExample">
        <Layout
          Title="OneLargeTwoMedium"
          LayoutTitle="OneLargeTwoMedium">
          <Section Alignment="Top" Type="OneRow">
            <Row>
              <ControlRef DisplayMode="Large" TemplateAlias="cust1" />
              <ControlRef DisplayMode="Large" TemplateAlias="cust3" />
              <ControlRef DisplayMode="Large" TemplateAlias="cust2" />
            </Row>
          </Section>
        </Layout>
      </GroupTemplate>
    </CommandUIDefinition>
  </CommandUIDefinitions>
  <CommandUIHandlers>
    <CommandUIHandler
      Command="PATOneRule.NewWorkflow"
      CommandAction="javascript:__doPostBack('NewWorkflow', '')" />
    <CommandUIHandler
     Command="PATOneRule.EditWorkflow"
     CommandAction="javascript: 
     function getId() { 
       var ctx = SP.ClientContext.get_current();
       var selectedItems = SP.ListOperation.Selection.getSelectedItems(ctx);
       var key;
       var itemsSelected;
       for (key in selectedItems) {
       itemsSelected = itemsSelected + ', ' + selectedItems[key].id;
      } 
      __doPostBack('EditWorkflow',itemsSelected); 
     }
     getId();"
     EnabledScript="javascript:
     function singleEnable() { 
       var items = 
       SP.ListOperation.Selection.getSelectedItems(); 
       var ci = CountDictionary(items); 
       return (ci == 1); 
     } 
     singleEnable();"
     />
    <CommandUIHandler
    Command="PATOneRule.RunWorkflow"
    CommandAction="javascript: 
     function getId() { 
       var ctx = SP.ClientContext.get_current();
       var selectedItems = SP.ListOperation.Selection.getSelectedItems(ctx);
       var key;
       var itemsSelected;
       for (key in selectedItems) {
       itemsSelected = itemsSelected + ', ' + selectedItems[key].id;
      } 
      __doPostBack('RunWorkflow',itemsSelected); 
     }
     getId();"
    EnabledScript="javascript:
     function singleEnable() { 
       var items = 
       SP.ListOperation.Selection.getSelectedItems(); 
       var ci = CountDictionary(items); 
       return (ci>0); 
     } 
     singleEnable();"
     />
  </CommandUIHandlers>
</CommandUIExtension> 
```

# eclipse - 为什么 Eclipse 在战争中导出源？

> ID：11211462
> 
> 赞同：3
> 
> 时间：2012-06-26T16:06:22.100
> 
> 标签：eclipse

我正在尝试从 Maven 项目中导出 Eclipse 中的 WAR。当我单击“文件”>“导出”>“战争文件”时，会显示一个对话框，其中包含“包含源文件”选项。此选项未选中（是一个复选框），eclipse 仍在导出带有源文件的 WAR。我也尝试过检查该选项并仍然输出与源的战争。我在 Linux 64 位上运行 Indigo。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:07:45.463

我有同样的问题。看起来像一个已经报告给 Eclipse 团队的错误：

*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=386069](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386069)
*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=389715](https://bugs.eclipse.org/bugs/show_bug.cgi?id=389715)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:54:14.000

我在win7 64位上的Eclipse Java EE Juno版本有同样的问题，Eclipse Java EE Indigo版本没问题，所以我认为这是Eclipse Java EE Juno版本的一个错误。

# c# - 如何判断打印机是否会打印到文件？

> ID：11211471
> 
> 赞同：6
> 
> 时间：2012-06-26T16:07:09.280
> 
> 标签：c#, .net, printing, io

我有一个 .net 2.0 应用程序 (c#)，其中一个组件作为服务运行，还有一个用于配置服务的 UI。

UI 为用户提供了一种选择服务将使用的打印机的方法。

我希望 UI 过滤掉任何配置为打印到文件的打印机，因为这些打印机会导致服务出现问题（“另存为”对话框将打开，但该对话框是不可见的，因为它属于服务）。

问题是我找不到任何方法来检测设置为打印到文件的打印机。

System.Drawing.Printing.PrinterSettings 有一个名为 PrintToFile 的属性，但它始终设置为 false！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:16:02.117

PrinterSettings.PrintToFile 只能由 System.Windows.Forms.Printing.PrintDialog 类设置。打印到文件选项仅在 System.Windows.Forms.Printing.PrintDialog.AllowPrintToFile 属性设置为 true 时出现在 System.Windows.Forms.Printing.PrintDialog 上。

希望能解决您的问题。

# java - KeyListener 不工作？

> ID：11211472
> 
> 赞同：1
> 
> 时间：2012-06-26T16:07:10.530
> 
> 标签：java, swing, jframe, keylistener, focusable

好的，所以我的游戏有这个关键监听器，但它不工作，但是当我创建一个新项目只是为了测试它对我来说是否有效？所以这是我的游戏的一些代码：

```
public class GameKeyListener implements KeyListener {

private void pressMainWeapon() {
     Constants.MAIN_WEAPON_PRESSED = Constants.MAIN_WEAPON_PRESSED ? true : false;
    }

    private void pressSecondaryWeapon() {
     Constants.SECONDARY_WEAPON_PRESSED = Constants.SECONDARY_WEAPON_PRESSED ? true : false;
    }

    private void pressSkillsButton() {
        Constants.SKILLS_BUTTON_PRESSED = Constants.SKILLS_BUTTON_PRESSED ? true : false;
    }

       private void gameKeyPressed(int keyCode) {

              switch (keyCode) {      

                 case KeyEvent.VK_Q:
                     pressMainWeapon();
                    break;

                 case KeyEvent.VK_E:
                     pressSecondaryWeapon();
                     break;

                 case KeyEvent.VK_TAB:
                     pressSkillsButton();
                     break;

                 case KeyEvent.VK_W:
                     Constants.CHARACTER_Y -= 5;
                     break;

                 case KeyEvent.VK_A:
                     Constants.CHARACTER_X -= 5;
                     break;

                 case KeyEvent.VK_S:
                     Constants.CHARACTER_Y += 5;
                     break;

                 case KeyEvent.VK_D:
                     Constants.CHARACTER_X += 5;
                     break;

              }
           }

    private void gameKeyReleased(int keyCode) {  

    }

    private void gameKeyTyped(char keyChar) {  

    }

    @Override
    public void keyPressed(KeyEvent e) {
        gameKeyPressed(e.getKeyCode());
        System.out.println(e.getKeyChar());
    }

    @Override
    public void keyReleased(KeyEvent e) {
        gameKeyReleased(e.getKeyCode());
    }

    @Override
    public void keyTyped(KeyEvent e) {
        gameKeyTyped(e.getKeyChar());
    } 
```

和

```
public class GraphicsMain {

static JFrame f = new JFrame("Gurillia");

private static GameCanvas gc = new GameCanvas();

public static void startGraphics() throws IOException {
    f.setVisible(true);     
    f.setIgnoreRepaint(true);

    f.setContentPane(gc);
    gc.setPreferredSize(new Dimension(Constants.GAME_WIDTH, Constants.GAME_HEIGHT));        

    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.pack();
    f.setResizable(false);

    f.addKeyListener(new GameKeyListener());
} 
```

但这确实有效：

```
public class testkeylistener implements KeyListener {

@Override
public void keyPressed(KeyEvent arg0) {
    System.out.println(arg0.getKeyChar());
}

@Override
public void keyReleased(KeyEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void keyTyped(KeyEvent arg0) {
    // TODO Auto-generated method stub

}

public static void main(String args[]) {
    JFrame f = new JFrame("test");
    f.setSize(1000,1000);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setVisible(true);
    f.pack();
    f.addKeyListener(new testkeylistener());
} 
```

那么问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:18:32.173

问题是您使用`KeyListener`s 而 Swing 旨在使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。差异可能是由于不同的焦点行为。

例如，请参阅[这个问题](https://stackoverflow.com/questions/7543628/why-does-the-keylistener-stop-working)，其中 a`KeyListener`仅偶尔起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:15:46.037

KeyListener 应该添加到画布中，并添加到[setFocusable](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setFocusable%28boolean%29)因为需要焦点

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T16:17:41.953

尝试将侦听器添加到孩子（画布），而不是 JFrame 本身。键在当前具有焦点的元素上触发。

JFrames 几乎从来没有焦点。

# php - 使用 php & odbc 访问 foxpro 255 备忘录字段限制

> ID：11211473
> 
> 赞同：0
> 
> 时间：2012-06-26T16:07:11.957
> 
> 标签：php, odbc, foxpro

我正在使用 PHP 在可视 Foxpro 9 数据库中输入数据。

我的问题是 ODBC 驱动程序对备注字段施加了 255 个字符的限制。

我尝试使用以下方法来解决问题：

```
$sSQL = 'Insert Into detail (IT_DOC,IT_MEMO) values (?,?)';

$stmt = odbc_prepare($conn, $sSQL);
$res = odbc_execute($stmt, array($head['IT_DOC'] , $text)); 
```

但是，这给了我错误：

```
Warning: odbc_execute() [function.odbc-execute]: SQL error: [Microsoft][ODBC Driver Manager] 
Driver does not support this function, SQL state IM001 in SQLDescribeParameter in C:\inetpub\wwwroot\import.php on line 149 
```

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:10:39.827

我上一次使用 FoxPro 是在不久前，所以这可能不正确；但我认为当我们遇到这个问题时，我们通过在 INSERT 或 UPDATE 语句中写入一个空字符串来解决它。

然后，将您的字符串拆分为 250 个或更少字符的块，并通过一个接一个地附加它们来更新您的备注字段，以重新创建原始字符串。

不过，这是一种可怕的、可怕的做事方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T02:25:23.123

哦……那些讨厌 FoxPro 的人……但是，自 1987 年以来，我一直在使用它，除了其他开发语言之外，我今天仍然使用它，并且仍在使用 SQL。在过去，它是最伟大/最快的数据库之一，不需要高价的 DBA，并且完全独立的数据库和 GUI。

我不会使用 ODBC 驱动程序，但从 Microsoft 获得最新的 OleDB 驱动程序......你可能会有更好的运气......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:56:53.077

您需要使用 OLE DB 驱动程序。

这可能会有所帮助：[在网络文件夹中时无法通过 OleDB 连接到 foxpro *.dbc](http://www.webdeveloper.com/forum/showthread.php?t=208433)

# linux - 为arm编译rtmpdump

> ID：11211474
> 
> 赞同：0
> 
> 时间：2012-06-26T16:07:29.027
> 
> 标签：linux, compilation, openssl, arm, rtmp

我正在尝试为 Qnap NAS 419p (arm) 编译 rtmpdump (http://rtmpdump.mplayerhq.hu/)

我对 linux 或编译不是很熟悉，但我正在努力学习。

make 抱怨它找不到 openssl 并且我不知道从哪里开始？

```
[/share/Qdownload/src] # ipkg install openssl
Package openssl (0.9.8v-2) installed in root is up to date.
Nothing to be done
Successfully terminated. 
```

确认我已经安装了 openssl

```
[/share/Qdownload/src] #
[/share/Qdownload/src] # ipkg install zlib
Package zlib (1.2.5-1) installed in root is up to date.
Nothing to be done
Successfully terminated.
[/share/Qdownload/src] # 
```

确认我有 zlib 我认为我需要的唯一其他依赖。

```
[/share/Qdownload/src] # make linux
make[1]: Entering directory `/share/MD0_DATA/Qdownload/src'
g++ -Wall   -O2   -c -o rtmp.o rtmp.cpp
In file included from rtmp.h:44,
             from rtmp.cpp:42:
dh.h:22:24: error: openssl/bn.h: No such file or directory
dh.h:23:24: error: openssl/dh.h: No such file or directory
dh.h:25:25: error: openssl/sha.h: No such file or directory
dh.h:26:26: error: openssl/hmac.h: No such file or directory
dh.h:27:25: error: openssl/rc4.h: No such file or directory
In file included from rtmp.h:44,
                 from rtmp.cpp:42:
dh.h:34: error: 'BIGNUM' was not declared in this scope
dh.h:34: error: 'y' was not declared in this scope
dh.h:34: error: 'BIGNUM' was not declared in this scope
dh.h:34: error: 'p' was not declared in this scope
dh.h:34: error: 'BIGNUM' was not declared in this scope
dh.h:34: error: 'q' was not declared in this scope
dh.h:34: error: initializer expression list treated as compound expression
dh.h:35: error: expected constructor, destructor, or type conversion before '*' token
dh.h:36: error: 'DH' was not declared in this scope
dh.h:36: error: 'dh' was not declared in this scope
dh.h:37: error: 'DH' was not declared in this scope
dh.h:37: error: 'dh' was not declared in this scope
dh.h:37: error: expected primary-expression before '*' token
dh.h:37: error: 'pubkey' was not declared in this scope
dh.h:37: error: expected primary-expression before 'nPubkeyLen'
dh.h:37: error: initializer expression list treated as compound expression
dh.h:38: error: 'DH' was not declared in this scope
dh.h:38: error: 'dh' was not declared in this scope
dh.h:38: error: expected primary-expression before '*' token
dh.h:38: error: 'privkey' was not declared in this scope
dh.h:38: error: expected primary-expression before 'nPrivkeyLen'
dh.h:38: error: initializer expression list treated as compound expression
dh.h:39: error: 'DH' was not declared in this scope
dh.h:39: error: 'dh' was not declared in this scope
dh.h:39: error: expected primary-expression before '*' token
dh.h:39: error: 'pubkey' was not declared in this scope
dh.h:39: error: expected primary-expression before 'nPubkeyLen'
dh.h:39: error: expected primary-expression before '*' token
dh.h:39: error: 'secret' was not declared in this scope
dh.h:39: error: initializer expression list treated as compound expression
dh.h:40: error: variable or field 'DHFree' declared void
dh.h:40: error: 'DH' was not declared in this scope
dh.h:40: error: 'dh' was not declared in this scope
In file included from rtmp.cpp:42:
rtmp.h:97: error: ISO C++ forbids declaration of 'DH' with no type
rtmp.h:97: error: expected ';' before '*' token
rtmp.h:98: error: ISO C++ forbids declaration of 'RC4_KEY' with no type
rtmp.h:98: error: expected ';' before '*' token
rtmp.h:99: error: ISO C++ forbids declaration of 'RC4_KEY' with no type
rtmp.h:99: error: expected ';' before '*' token
rtmp.cpp: In member function 'int RTMP_LIB::CRTMP::ReadN(char*, int)':
rtmp.cpp:653: error: 'struct RTMP_LIB::LNK' has no member named 'rc4keyIn'
rtmp.cpp:654: error: 'struct RTMP_LIB::LNK' has no member named 'rc4keyIn'
rtmp.cpp:654: error: 'RC4' was not declared in this scope
rtmp.cpp: In member function 'bool RTMP_LIB::CRTMP::WriteN(const char*, int)':
rtmp.cpp:672: error: 'struct RTMP_LIB::LNK' has no member named 'rc4keyOut'
rtmp.cpp:674: error: 'struct RTMP_LIB::LNK' has no member named 'rc4keyOut'
rtmp.cpp:674: error: 'RC4' was not declared in this scope
make[1]: *** [rtmp.o] Error 1
make[1]: Leaving directory `/share/MD0_DATA/Qdownload/src'
make: *** [linux] Error 2
[/share/Qdownload/src] # 
```

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:13:10.727

确保安装 openssl 和 zlib 软件包的开发版本。

还要确保 openssl 目录位于标准系统中的某个位置，包括应该是的目录`/usr/include`以及`/usr/local/include`其他一些目录，具体取决于您的工具链。

但不要相信我的话并执行`cpp -v < /dev/null`。它使用来自 /dev/null 的输入运行 GNU C 预处理器。应该打印目录搜索路径。查找“#include <...> 搜索从此处开始：”，然后是标准包含搜索路径的列表。这也是包含的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:57:24.383

如果您正在为 ARM 编译，那么为您自己的发行版安装库是不够的……您需要库和一个在您的开发机器（可能是 x86 或 x86_64）上运行但为目标平台（ARM）生成代码的交叉编译器.

如果您没有此 Qnap NAS 的交叉编译器，[此链接](http://wiki.qnap.com/w/index.php?title=User%3aAnthonyDoko&setlang=fi#Step_5%3a_Create_the_arm-eglibc-linux-gnueabi_cross_compiler_toolchain_with_crosstool-ng)应该可以帮助您使用[crosstool-ng](http://crosstool-ng.org/)生成一个交叉编译器，这是一个很好的工具，可以帮助您从头开始构建交叉编译器。然后，您可能还需要一个带有为您的目标平台制作的库的根文件系统。

涉及交叉编译的所有事情都不是微不足道的，但我们可以尝试提供帮助。你在你的机器上运行什么发行版？

# objective-c - InAppPurchase - 查找模式（是沙盒）

> ID：11211475
> 
> 赞同：2
> 
> 时间：2012-06-26T16:07:29.530
> 
> 标签：objective-c, ios, in-app-purchase, sandbox

如您所知，在InAppPurchase的开发过程中，我们在沙盒环境中进行购买，有没有办法知道是否在沙盒环境中进行购买？

10倍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:29:52.407

当您处于沙盒模式时，IAP 对话框将在 OK 按钮上方显示**[Environment: Sandbox]**

查看此屏幕截图： [Storekit / In App Purchases：当我将我的应用程序提交到应用程序商店时，“环境：沙盒”标签会消失吗？](https://stackoverflow.com/questions/8719689/storekit-in-app-purchases-does-the-environment-sandbox-tag-disappear-when)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-22T15:58:45.153

有充分的理由不可能解决它，因为您的代码预计可以无缝地在两种模式下工作。

# c# - 使用反射按名称获取属性值

> ID：11211477
> 
> 赞同：2
> 
> 时间：2012-06-26T16:07:38.323
> 
> 标签：c#, .net, system.reflection

可以说我有以下课程：

```
public class Provider
{
    ...
    public sealed class Slice
    {
         public readonly double firstName;
         public readonly double secondName;
         public readonly double thirdName;
         ...
    }
    ...
} 
```

该类用于保存滑动时间序列，包含的 Slice 类是返回值。（Provider.Last 属性返回 Slice 的最新实例）。

我需要通过属性名称获取最新返回的 Slice 类的属性值。

```
PropertyInfo secondNameProperty = Provider.Last.GetType().GetProperty("secondName");
double secondNameValue = (double)secondNameProperty.GetValue(Provider.Last, null); 
```

GetProperty 返回空值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T16:10:01.817

看看你的`Slice`课：

```
public sealed class Slice
{
     public readonly double firstName;
     public readonly double secondName;
     public readonly double thirdName;
     ...
} 
```

那些不是属性。它们是田野。要么使它们成为属性，要么使用它们[`Type.GetField()`](http://msdn.microsoft.com/en-us/library/system.type.getfield.aspx)。使用属性通常是一个更好的主意，IMO，并不难。例如，如果您只想将它​​们设为*公开*只读，您可以使用：

```
public sealed class Slice
{
     public double FirstName { get; private set; }
     public double SecondName { get; private set; }
     public double ThirdName { get; private set; }
     ...
} 
```

或者，您可以直接声明只读字段，然后通过属性公开它们。这比使用自动实现的属性要多一些工作，但它消除了在`Slice`自身内部设置属性的可能性。

（顺便说一句，你*真的*有一个`firstName`类型的字段`double`吗？奇怪。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:13:33.060

您可以使用 GetMember() - 成员包括属性、方法、字段、事件等。或者使用 Jon Skeet 的回答。

请注意，如果您使用 GetField() 并稍后将字段更改为属性，则 GetMember() 将继续查找有问题的字段或属性，而无需重构代码，而 GetField() 将返回 null。

[http://msdn.microsoft.com/en-us/library/xdtchs6z.aspx](http://msdn.microsoft.com/en-us/library/xdtchs6z.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:18:28.953

正如 Jon Skeet 所说，这些不是属性。只读属性看起来像这样

```
public sealed class Slice
{
    public double FirstName { get; private set }
    public double SecondName  { get; private set }
    public double ThirdName { get; private set }
    ...
} 
```

或者

```
public sealed class Slice
{
    private double _firstName;
    public double FirstName { get { return _fristName; } }

    private double _secondName;
    public double SecondName { get { return _secondName; } }

    private double _thirdName;
    public double ThirdName { get { return _thirdName; } }

    ...
} 
```

# iphone - 电子邮件中的 Youtube 链接无法从 iOS 邮件中打开

> ID：11211481
> 
> 赞同：0
> 
> 时间：2012-06-26T16:07:53.493
> 
> 标签：iphone, ios, email, hyperlink, youtube

只需在 e-blast 中使用指向 youtube 视频的链接，在任何电子邮件客户端中都可以正常工作，但 iOS 不会打开视频。它打开 youtube 应用程序并说“无法打开视频”就这么简单。

有这方面经验的人吗？我假设你不能做任何如果/那么你会搞砸其他电子邮件客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:18:21.593

如果视频被禁止在移动设备上播放（在 youtube 视频设置中），就会发生这种情况。

# ruby-on-rails - Omniauth /auth/facebook/callback.json - request.env["omniauth.auth"] 为 nil

> ID：11211482
> 
> 赞同：4
> 
> 时间：2012-06-26T16:08:01.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, omniauth

再具体一点：

如果我打电话，我的 Rails 应用程序可以完美运行

`/auth/facebook/callback`或者`/auth/facebook/callback?format=json`

但是当我尝试打电话时

`/auth/facebook/callback.json`

没有`request.env["omniauth.auth"]`（它是零）

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T10:52:54.103

因为 .json 的 url 扩展名意味着您要么拥有此方法的 .json 视图，要么将以 json 格式响应。

虽然这应该由omniauth 在重定向中处理......但它无法正常工作。

# websphere - 将 IBM WVR (DirectTalk) 状态表应用程序转换为纯 vxml 应用程序的工具

> ID：11211488
> 
> 赞同：0
> 
> 时间：2012-06-26T16:08:23.573
> 
> 标签：websphere, ivr, vxml, voicexml

我正在寻找一种将 IBM WVR 4.2 (DirectTalk) 状态表应用程序转换为纯语音 xml 应用程序的工具。我正在考虑将我们的一些状态表应用程序移植到不同的语音 xml 平台。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:44:25.880

一位前雇主进行了类似的练习。我相信 IBM 有一个可以将 DT 状态表移植到 VXML 的工具，但您可能必须签订专业服务协议才能获得它。

但是，实际上，您应该只是将应用程序的叙述流出来，然后重写它；状态表和提示距离设计流畅/优雅的 VXML 应用程序还有很长的路要走。对于它的价值，我的前雇主放弃了他们的状态表应用程序并从头开始构建，他们对自己拥有的东西更满意。

如果您是 VXML 新手，一般来说，在[Voxeo](http://www.voxeo.com)上有一些很棒的教程。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T18:24:47.047

最好的办法是只从 VXML 应用程序调用状态表。

# mod-rewrite - eZ Publish Framework 中的 mod-rewrite

> ID：11211493
> 
> 赞同：0
> 
> 时间：2012-06-26T16:09:03.207
> 
> 标签：mod-rewrite

我目前正在使用 eZ 框架作为我新工作的一部分。

mod-rewrites 在 GUI 管理界面的 2 个部分中处理： 1 - URL 转换器 2 - URL 通配符

URL 翻译器本质上处理单次重写 URL 通配符是...顾名思义就是通配符，所以可以处理 *

目前，当创建一个新的竞赛时，需要添加一个新的“URL 翻译器”。当有 25 场比赛而 15 场比赛已经过时并且过时时，这会变得很难看。

这是数据输入人员当前必须为新比赛输入的内容： URL = /places/competitions/the-name-of-the-comp/process TO = Competition/process

我们已经尝试编写通配符 catch all，因此不必将新的组合输入为单个重写： URL = /places/*/process To = Competition/process

但是，正如您可能已经猜到的那样，它不起作用。

如果有人是 eZ Publishing 大师并且知道这是否可以做到，我将非常感激。

谢谢，

约翰

# search - 如何让高级数据库爬虫索引项目名称

> ID：11211496
> 
> 赞同：0
> 
> 时间：2012-06-26T16:09:06.360
> 
> 标签：search, sitecore

我正在尝试将 Sitecore 应用程序的搜索从“旧”索引 (Sitecore.Data.Indexing) 切换到“新”索引 (Sitecore.Search)。

我曾经有一个明确列出我想要索引的字段的索引。该项目的名称是以下之一：

```
<field target="name">@name</field> 
```

新索引以及高级数据库爬虫允许您包含字段和排除字段。我已将索引 IncludeAllFields 值设置为 false，因为我想要省略的字段比我想要索引的字段多。我添加了我想要的字段，包括：

```
<include hint="list:IncludeField">
    <!-- Field 1 -->
    <fieldId1>{396CA18D-0E46-437E-9237-C10FDB217666}</fieldId1>
    <!-- Field 2 -->
    <fieldId2>{396CA18D-0E46-437E-9237-C10FDB217666}</fieldId2>
    <!-- Field 3 -->
    <fieldId3>{CC45947E-A22C-44E3-9652-32E519DABC7F}</fieldId3>
</include> 
```

问题是我不知道如何使用这些新索引添加项目名称。据我所知，该项目的名称不在字段中。在调用 item.Fields.ReadAll() 并查看所有内容后，我尝试查看示例项目的字段，但我看不到该项目的名称。

我可以添加到包含列表中的字段中的项目名称，还是有其他方法？

谢谢

# razor - 访问发布元数据类别时出现“无法隐式转换类型”错误

> ID：11211498
> 
> 赞同：2
> 
> 时间：2012-06-26T16:09:16.357
> 
> 标签：razor, metadata, tridion

我之前也有过类似的问题，但是这比这更进一步，所以我们开始吧：

我正在尝试访问 Tridion 2011 中某个类别的值。我正在使用 Razor TBB 并使用此代码来执行此操作：

```
@foreach (var keyword in Publication.MetaData.myCategory) {
  @: Hello World!
} 
```

我已经设置了一个元数据模式，其中包含一个附加到我的出版物的 xml 名称为“myCategory”的字段。如果我在 myCategory 是文本字段的出版物上运行此代码，则此代码可以工作……有点。它将每个字符视为关键字变量的单独值......所以如果我输入文本“one”，打印的是“Hello World！Hello World！Hello World！”，如果我只有“o”作为值，它打印“Hello World！”。

奇怪的是（我也想知道为什么），我真正希望该字段成为“将从列表中选择值”类型的字段，指向我在类别和关键字中的类别。当我这样做时，myCategory 的值更改为在此类字段的下拉列表中选择的项目的值，而不是直接文本输入，代码不再起作用并给出此错误：

> 无法将类型“Tridion.Extensions.Mediators.Razor.Models.KeywordModel”隐式转换为“System.Collections.IEnumerable”。存在显式转换（您是否缺少演员表？）

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:59:40.450

如果您为字符串中的每个字符重复输出，那么您显然是在迭代字符串中的字符，而不是您期望的其他值范围。

我快速查看了 Razor mediator 的相关代码，它的`ToString`方法确实返回了底层的 Title `RepositoryLocalObject`。

[http://code.google.com/p/razor-mediator-4-tridion/source/browse/trunk/Tridion.Extensions.Mediators.RazorMediator/Tridion.Extensions.Mediators.RazorMediator/Models/AbstractRepositoryLocalObject.cs](http://code.google.com/p/razor-mediator-4-tridion/source/browse/trunk/Tridion.Extensions.Mediators.RazorMediator/Tridion.Extensions.Mediators.RazorMediator/Models/AbstractRepositoryLocalObject.cs)

[http://code.google.com/p/razor-mediator-4-tridion/source/browse/trunk/Tridion.Extensions.Mediators.RazorMediator/Tridion.Extensions.Mediators.RazorMediator/Models/KeywordModel.cs](http://code.google.com/p/razor-mediator-4-tridion/source/browse/trunk/Tridion.Extensions.Mediators.RazorMediator/Tridion.Extensions.Mediators.RazorMediator/Models/KeywordModel.cs)

[http://code.google.com/p/razor-mediator-4-tridion/source/browse/trunk/Tridion.Extensions.Mediators.RazorMediator/Tridion.Extensions.Mediators.RazorMediator/Models/DynamicItemFields.cs](http://code.google.com/p/razor-mediator-4-tridion/source/browse/trunk/Tridion.Extensions.Mediators.RazorMediator/Tridion.Extensions.Mediators.RazorMediator/Models/DynamicItemFields.cs)

文件中处理关键字字段的代码`DynamicItemsFields.cs`：

```
else if (itemField is KeywordField)
{
    KeywordField keywordField = (KeywordField)itemField;
    if (keywordField.Definition.MaxOccurs == 1)
        if (keywordField.Value == null)
            _dictionary[key] = null;
        else
            _dictionary[key] = new KeywordModel(_engine, keywordField.Value);
    else
    {
        List<KeywordModel> keywords = new List<KeywordModel>();
        int i = 0;
        foreach (Keyword k in keywordField.Values)
        {
            var kw = new KeywordModel(_engine, k);
            kw.Index = i++;
            kw.IsLast = Index == keywordField.Values.Count - 1;
            keywords.Add(kw);
        }
        _dictionary[key] = keywords;
    }
} 
```

所以看起来该`myCategory`属性要么是 KeywordModel 对象（如果 KeywordField 是单值），要么是`List<KeywordModel>`（如果 KeywordField 在 Schema 中被标记为多值）。你的`myCategory`字段是单值吗？还是多值？

如果是单值，您期望什么类型的输出？如果您期待**允许值**的列表（而不是**当前选择的值**），请检查您是否可以通过`myCategory.Definition`某种方式访问​​它（应该是常规的 TOM.NET`KeywordFieldDefinition`对象）。

# regex - 如何使用正则表达式拆分格式字符串？

> ID：11211500
> 
> 赞同：0
> 
> 时间：2012-06-26T16:09:20.670
> 
> 标签：regex

我想使用正则表达式将一些这样的字符串拆分`@key='value'`为键和值。

我的正则表达式是`[^@'=]+[^'=]`，当键和值的长度> 1时输出很好，但有时当长度只有1个字符时，输出不正确。

有人可以建议我的正则表达式改进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:16:32.287

如果你想*捕获*键和值，你可以试试这个：

```
/^@([^=]+)='([^']+)'$/ 
```

然后，您将拥有 $1 中的密钥和 $2 中的值。

**编辑：**

我想我明白你在做什么。更改您的正则表达式只是为了`[^@'=]+`查看差异。但是，除非您告诉我们您使用的语言和一些示例代码，否则我们无法帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:34:09.497

```
^@[A-Za-z0-9]+\s*=\s*'[A-Za-z0-9\s]+'

This captures 
@Key = 'value'
@key='value' 
@k = 'value'

etc.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:14:49.153

```
\A@([^=]+)='([^']+)' 
```

将作为正则表达式工作，但它不考虑转义撇号。这是 2 个捕获组... \A 表示字符串的开头...然后是 @ 然后是组...。（不等于一个或多个）=' Group(not ' ) 后跟 '

# java - Java 中的位域

> ID：11211503
> 
> 赞同：0
> 
> 时间：2012-06-26T16:09:42.430
> 
> 标签：java, endianness, bit-fields

在 1.7 之前的 Java 中提取位字段的最佳方法是什么？我知道我可以使用按位运算，但这不是更好的方法吗？

我需要将具有字节顺序控制的位数组部分提取为整数值。

# php - 如何使用 foreach 从 $_POST 获取索引值

> ID：11211505
> 
> 赞同：-2
> 
> 时间：2012-06-26T16:09:44.380
> 
> 标签：php

我想知道正确的代码来仅检测来自表单的数字 $_POST 字段。

请更正我的代码。

```
foreach ($_POST as $vals) {
  if (is_numeric($vals)) {
    if (is_numeric($vals[$i]) && ($vals[$i]!="0")) {
    //do something
  } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:12:13.997

```
$_POST = array_filter($_POST, "is_numeric"); 
```

以上将删除所有非数字数组项。

```
foreach (array_filter($_POST, "is_numeric") as $key => $val)
{   
    // do something
    echo "$key is equal to $val which is numeric.";  
} 
```

**更新：**

如果您只想要 $_POST[1]、$_POST[2] 等。

```
foreach ($_POST as $key => $vals){
    if (is_numeric($key)){
      //do something
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:11:54.620

尝试这个：

```
foreach ($_POST as $key => $val)
{   
  if (is_numeric($key))
  {
    // do something
  }   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T16:18:51.670

尝试：

```
 foreach ($_POST as $key => $vals){
     //this is read: $_POST[$key]=$value   
     if (is_numeric($vals) && ($vals!="0")){
          //do something
     }   
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T16:48:23.757

```
if(isset($_POST)){
   foreach($_POST as $key => $value){
       if(is_numeric($key)){
          echo $value;
       }
   }
} 
```

比较键

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-30T00:43:09.637

以下`isset()`尝试处理数组的代码无效。

```
if(isset($_POST)){   //isset() only works on variables and array elements.
   foreach($_POST as $key => $value){
       if(is_numeric($key)){
          echo $value;
       }
   } 
```

* * *

```
foreach ($_POST as $key => $val)
{   
  if (is_numeric($key))
  {
    // do something
  }   
} 
```

更好，但现在 foreach 将复制 $_POST 并在循环期间放入内存中（PHP 编程：第 6 章，第 128-129 页）。我希望缓冲区溢出或内存不足错误不会跳起来咬你。:-)

* * *

也许在开始之前用 is_array()、empty()、count() 和其他方法确定有关 $_POST 的一些事实会更明智，例如...

```
if(is_array($_POST) && !empty($_POST))
{
    if(count($_POST) === count($arrayOfExpectedControlNames))
    {   
        //Where the the values for the $postKeys have already been validated some...

        if(in_array($arrayOfExpectedControlNames, $postKeys))
        {
            foreach ($_POST as $key => $val)  //If you insist on using foreach.
            {   
                if (is_numeric($key))
                {
                   // do something
                }
                else
                {
                   //Alright, already. Enough!
                }   
            }
        }
        else
        {
             //Someone is pulling your leg!
        }
    }
    else
    {
        //Definitely a sham!
    }
}
else
{
    //It's a sham!
} 
```

尽管如此，这些`$val`值仍然需要一些验证，但我相信你已经做到了。

# objective-c - 在 UILabel 中显示值...？

> ID：11211509
> 
> 赞同：0
> 
> 时间：2012-06-26T16:09:57.767
> 
> 标签：objective-c, ios5, uilabel, xcode4.3

我有一个 UILabel 和一个 uint16_t。如何在标签中显示 uint16_t 值？如果我有：

```
 IBOutlet UILabel *answerField; 
```

我有：

```
uint16_t value; 
```

我这样做：

```
 [answerField setText:value]; 
```

我得到一个错误。如何在标签中显示我的 uint16_t？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:13:21.303

```
answerField.text = [NSString stringWithFormat:@"%u", value]; 
```

或者

```
[answerField setText:[NSString stringWithFormat:@"%u", value]]; 
```

# typo3 - TYPO3 - 使用 powermail 向表中添加值

> ID：11211513
> 
> 赞同：1
> 
> 时间：2012-06-26T16:10:10.340
> 
> 标签：typo3, typoscript

我制作了一个表格，以便用户可以注册他们的电子邮件地址以参加比赛。我正在使用 powermail 表单，有人告诉我使用 dbEntry 来执行此操作，但我不知道该怎么做。到目前为止，这是我的代码：

```
plugin.tx_powermail_pi1{
    dbEntry{

        tt_address._enable = TEXT
        tt_address._enable.value = 1

        tt_address.email = TEXT
        tt_address.email.value = ????
    }

    debug.output = all
}​ 
```

我被告知要激活 _enable 以启用数据插入。但是现在我不知道如何访问表单的字段值。我可能应该使用模板 ID，即###UID71###，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:55:54.820

根据[官方文档](http://typo3.org/extension-manuals/powermail/2.0.0/view/1/48/#id723855)，您可以这样做：

```
plugin.tx_powermail.settings.setup {
    dbEntry {
        # enable or disable db entry for tt_address
        tt_address._enable = TEXT
        tt_address._enable.value = 1

        # write only if field email is not yet filled with current value
        # (update: update values of existing entry)
        # (none: no entry if field is filled)
        # (disable: always add values don't care about existing values)
        tt_address._ifUnique.email = update

        # fill table "tt_address" with field "pid" with the current pid (e.g. 12)
        tt_address.pid = TEXT
        tt_address.pid.data = TSFE:id

        # fill table "tt_address" with field "tstamp" with the current time as timestamp (like 123456789)
        tt_address.tstamp = TEXT
        tt_address.tstamp.data = date:U

        # fill table "tt_address" with field "name" with the value from powermail {firstname}
        tt_address.name = TEXT
        tt_address.name.field = firstname

        ...
    }
} 
```

我还发现了一个（较旧的）[论坛帖子](http://www.typo3forum.net/forum/powermail/29245-datenbankeintrag-powermail-fe-userregistrierung.html)（德语），其中包含使用用户会话数据的示例：

```
# table "tt_address" with field "last_name" is the value from powermail (tt_content uid 88) field uid18 (###uid18###)
tt_address.last_name = TEXT
tt_address.last_name.data = TSFE:fe_user|sesData|powermail_88|uid18 
```

# jdbc - JDBC ResultSet 从不同的表中获取列

> ID：11211514
> 
> 赞同：2
> 
> 时间：2012-06-26T16:10:10.387
> 
> 标签：jdbc

我想从涉及许多表的查询中检索数据。我有一个查询如下

```
 String sql = "SELECT "
            + "s.Food_ID AS 'Sales_FoodID', "
            + "f.Food_Name AS 'foodName' "
            + "FROM Ordering o, Sales s, Food f"
            + " WHERE o.Table_No = " + tableNo + ""
            + " AND o.Paid = '" + NOT_PAID + "'"
            + " AND s.Order_ID = o.Order_ID"
            + " AND f.Food_ID = s.Food_ID;";
    resultSet = statement.executeQuery(sql); 
```

运行程序时没有发现错误，但是在我添加此行以获取表的列数据后：

```
 String orderID = resultSet.getString("foodName"); 
```

我收到了这个错误：

```
 java.sql.SQLException: Column not found 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:13:16.557

你必须使用`next()`方法。

您应该知道它`ResultSet`隐式定位在第一行之前的位置，因此您需要调用 next 以获取当前位置，如果有效，则返回`true`，否则返回`false`（光标位于最后一行之后）。

```
rs = statement.executeQuery(sql);
while (rs.next()) {
   String orderID = rs.getString(2);
} 
```

**注意：**您也可以使用`rs.getString(<columnName>)`，但如果您知道语句的外观，我建议您使用索引而不是 columnName。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T14:01:43.740

调用后，`resultSet.executeQuery()`您需要调用`next()`从数据库中提取记录

之后，您可以调用 `setXxx()`Java API 提供的

# powershell - 如何在 Powershell 中使用“空运行”

> ID：11211518
> 
> 赞同：15
> 
> 时间：2012-06-26T16:10:15.373
> 
> 标签：powershell

我只是一个初学者，干运行对于制作参数进行测试非常有用，任何人都可以告诉我如何以简单的方式使用它吗？我用谷歌搜索了它，但它的使用结果很少。

非常感谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-27T18:01:56.350

## 在现有 cmdlet 上使用

显式提供 -WhatIf 参数：

```
rm foo.txt -WhatIf 
```

结果：

```
What if: Performing operation "Remove File" on Target "C:\temp\foo.txt". 
```

## 在函数或脚本中的现有 cmdlet 上使用

`SupportsShouldProcess`属性自动传播`-WhatIf`到支持的 cmdlet：

```
function do-stuff
{
    [CmdletBinding(SupportsShouldProcess=$True)]
    param([string]$file)
    Remove-Item $file
}

do-stuff foo.txt -WhatIf 
```

结果：

```
What if: Performing operation "Remove File" on Target "C:\temp\foo.txt". 
```

## 在您自己的代码块上使用

显式使用`ShouldProcess()`方法判断是否`-WhatIf`通过：

```
function do-stuff
{
    [CmdletBinding(SupportsShouldProcess=$True)]
    param([string]$file)
    if ($PSCmdlet.ShouldProcess($file)) {
        Write-Host "Deleting file"
        Remove-Item $file
    }
}

do-stuff foo.txt -WhatIf 
```

结果：

```
What if: Performing operation "do-stuff" on Target "foo.txt". 
```

## 在*同一*模块中的嵌套函数上使用

`SupportsShouldProcess`属性自动传播`-WhatIf`到嵌套函数：

```
function do-stuff
{
    [CmdletBinding(SupportsShouldProcess=$True)]
    param([string]$file)
    if ($PSCmdlet.ShouldProcess($file)) {
        Write-Host "Deleting file"
        Remove-Item $file
    }
    inner "text"
}

function inner
{
    [CmdletBinding(SupportsShouldProcess=$True)]
    param([string]$s)
    if ($PSCmdlet.ShouldProcess($s)) {
        Write-Host "Inner task"
    }
    $s | out-file "temp9.txt"
}
do-stuff foo.txt -WhatIf 
```

结果：

```
What if: Performing operation "do-stuff" on Target "foo.txt".
What if: Performing operation "inner" on Target "text".
What if: Performing operation "Output to File" on Target "temp9.txt". 
```

## *在不同*模块中的嵌套函数上使用

不幸的是， -WhatIf 不会自动传播到不同模块中定义的函数。请参阅[Powershell：如何让 -whatif 传播到另一个模块中的 cmdlet，](https://stackoverflow.com/questions/7984876/powershell-how-to-get-whatif-to-propagate-to-cmdlets-in-another-module)以对此进行讨论和解决方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T16:26:34.273

您可能指的是 cmdlet 上的`-WhatIf`和`-Confirm`参数。您可以在以下位置阅读有关它们的信息`Get-Help about_commonParameters`：

> **风险管理参数说明**
> 
> ```
> -WhatIf[:{$true | $false}] 
> ```
> 
> > 显示一条描述命令效果的消息，而不是执行命令。
> > 
> > WhatIf 参数覆盖`$WhatIfPreference` 当前命令的变量值。`$WhatIfPreference`因为变量的默认值为 `0`（禁用），所以如果没有 WhatIf 参数，则不会执行 WhatIf 行为。有关更多信息，请键入以下命令：
> > 
> > ```
> > get-help about_preference_variables 
> > ```
> > 
> > *有效值：*
> > 
> > `$true`( `-WhatIf:$true`)。具有与 相同的效果`-WhatIf`。
> > `$false`( `-WhatIf:$false`)。抑制 $WhatIfPreference 变量的值为 1 时产生的自动 WhatIf 行为。
> > 
> > 例如，以下命令使用命令中的`WhatIf`参数 `Remove-Item`：
> > 
> > ```
> > PS> remove-item date.csv -whatif 
> > ```
> > 
> > Windows PowerShell 不会删除该项目，而是列出它将执行的操作以及将受到影响的项目。此命令产生以下输出：
> > 
> > ```
> > What if: Performing operation "Remove File" on
> > Target "C:\ps-test\date.csv". 
> > ```
> 
> ```
> -Confirm[:{$true | $false}] 
> ```
> 
> > 在执行命令之前提示您确认。
> > 
> > Confirm 参数覆盖当前命令的 $ConfirmPreference 变量的值。默认值为高。有关更多信息，请键入以下命令：
> > 
> > ```
> > get-help about_preference_variables 
> > ```
> > 
> > *有效值：*
> > 
> > `$true`( `-WhatIf:$true`)。具有与 相同的效果`-Confirm`。
> > `$false`( `-Confirm:$false`)。禁止自动确认，当 的值`$ConfirmPreference`小于或等于 cmdlet 的估计风险时会发生这种情况。
> > 
> > 例如，以下命令将 Confirm 参数与 Remove-Item 命令结合使用。在删除该项目之前，Windows PowerShell 会列出它将执行的操作以及将受到影响的项目，并请求批准。
> > 
> > ```
> > PS C:\ps-test> remove-item tmp*.txt -confirm 
> > ```
> > 
> > 此命令产生以下输出：
> > 
> > ```
> > Confirm
> > Are you sure you want to perform this action?
> > Performing operation "Remove File" on Target " C:\ps-test\tmp1.txt
> > [Y] Yes  [A] Yes to All  [N] No  [L] No to All  [S] Suspend
> > [?] Help (default is "Y"): 
> > ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-24T18:18:56.427

我认为您正在寻找的实际上是可以执行模型的模块 Pester（自第一次发布以来随 Windows 10 一起提供）。即假装运行部分代码来进行真正的独立单元测试。

虽然这是一个很大的话题......

[MS 脚本 - 什么是 Pester，我为什么要关心？](https://devblogs.microsoft.com/scripting/what-is-pester-and-why-should-i-care/)

# drag-and-drop - 如何让 Mootools 拖放兼容触控？

> ID：11211524
> 
> 赞同：2
> 
> 时间：2012-06-26T16:10:43.400
> 
> 标签：drag-and-drop, mootools, touch, draggable

我正在使用 Mootools .draggable() 方法构建拖放界面。它工作得很好，只是它不能在触摸设备上工作，这对它来说很重要。有没有办法让 .draggable() touch 兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:13:13.753

你读过这个答案吗？[在移动设备上使用 mootools 拖动](https://stackoverflow.com/questions/7588576/drag-with-mootools-on-mobile)

它似乎不适用于 droid 平板电脑。请参阅[http://jsfiddle.net/dimitar/kLVJy/](http://jsfiddle.net/dimitar/kLVJy/) - 拖拽不连贯且过早丢弃。在ios上可能会更好，不确定。无论如何都要建立的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T10:12:49.987

正如 Dimitar 所说，阅读答案[Drag with mootools on mobile](https://stackoverflow.com/questions/7588576/drag-with-mootools-on-mobile)。

虽然提供的答案是错误的，并且在撰写本文时在 android 和 ios 中都不好用。

谈到 android 问题是由于一个错误，请参阅[http://code.google.com/p/android/issues/detail?id=5491](http://code.google.com/p/android/issues/detail?id=5491)。

解决方法包括调用

```
event.preventDefault() 
```

在 touchmove 回调中。这种解决方法在我的情况下适用于 android 和 ios。

演示：http: [//jsfiddle.net/abidibo/aWJ8S/](http://jsfiddle.net/abidibo/aWJ8S/)

# arrays - Powershell 组阵列

> ID：11211525
> 
> 赞同：0
> 
> 时间：2012-06-26T16:10:46.353
> 
> 标签：arrays, powershell

我有一个自定义数组

```
$myresults = @() 
$w3svcID = $result.ReturnValue -replace "IISWebServer=", "" 
$w3svcID = $w3svcID -replace "'", "" 
$vdirName = $w3svcID = "/ROOT"; 
$vdirs = gwmi -namespace "root\MicrosoftIISv2" -class "IISWebVirtualDirSetting" 
foreach($vdir in $vdirs) 
{ 
 $vPool = $vdir.Apppoolid 
 $vName = $vdir.Name 

 $robj = New-Object System.Object  
 $robj | Add-Member -type NoteProperty -name Path -value $vName  
 $robj | Add-Member -type NoteProperty -name Pool -value $vPool  
 $myresults += $robj 
} 
$myresults | group-object Pool 
```

我希望能够以列表的形式对数据进行分组，其中组值（路径）位于分组值（池）下；像这样：

```
DefaultAppPool
   W3SVC\
   W3VSC\1\ROOT\
MyAppPool
   W3SVC\1\ROOT\MyVirtual\ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:30:22.430

试试这个：

```
Get-WmiObject IISWebVirtualDirSetting -Namespace root\MicrosoftIISv2  |
Group-Object AppPoolId | Foreach-Object{
    $_.Name
    $_.Group | Foreach-Object { "`t$($_.Name)" }
} 
```

# sql - 日期之间的 SQL 语句

> ID：11211528
> 
> 赞同：1
> 
> 时间：2012-06-26T16:11:10.293
> 
> 标签：sql, stored-procedures

这让我发疯，不知道我在这里错过了什么..

所以这是我的数据列的样子：

```
StartDateTime:
---------------
2012-01-17 11:13:46.530
2012-01-17 11:17:22.530
2012-02-17 11:31:22.223 
```

这是我试图得到的查询：

```
select * from tablName
where convert(varchar(10), startDateTime, 101) between '2012-01-17' and '2012-01-17' 
```

基于上述我应该得到两行？但它没有，它返回零行。正确的做法是什么？

PS：我也看过[MSDN](http://msdn.microsoft.com/en-us/library/ms187928.aspx)网站：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:12:52.903

您的查询将仅匹配介于`2012-01-17 00:00:00`和之间的日期`2012-01-17 00:00:00`。因此，唯一的匹配是日期正好是`2012-01-17 00:00:00`.

相反，我会这样做：

```
declare @dateInput as DateTime
set @dateInput = '2012-01-17'

select * 
from tablName 
where startDateTime >= @dateInput
    and startDateTime < dateadd(day, 1, @dateInput) 
```

注意：SQL Server 2008+ 有一个[`Date`](http://msdn.microsoft.com/en-us/library/bb630352%28v=sql.100%29.aspx)没有时间组件的新数据类型，可以使这些类型的查询更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:30:52.507

现在有更多信息，所以我将添加一个更合适的答案。现在的要求是一个存储过程传递了一个日期类型参数，而不是日期时间，并且希望根据名为 StartDateTime 的日期时间字段的标准从表中返回行...

```
create procedure dbo.spGetEntriesForOneDay
@DesiredDate DateTime
as
SET NOCOUNT ON;
SET @DesiredDate = DATEADD(day, DATEDIFF(day, 0, @DesiredDate), 0)

SELECT Field1, Field2 -- see note 1
FROM dbo.TableName
WHERE StartDateTime >= @DesiredDate -- see note 2 
  AND StartDateTime < DATEADD(day, 1, @DesiredDate)  -- see note 3 
```

**注意 1**：不要在生产代码中使用 *，尤其是在存储过程中。除了通过返回您可能不需要的列和排除在所需列的子集上优化覆盖索引之外，您还需要在基础表发生更改时重新编译此存储过程以避免不可预测的结果。

**注意 2**：避免在函数中包装字段。未包装在函数中的字段可能会被优化器匹配到索引，而包装在函数中的字段永远不会。

**注 3**：@Martin Smith 和 @RedFilter 是正确的，因为 .997 精度永远假定 DateTime 数据类型；这种方法更具前瞻性，因为它不假设数据类型的精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:13:43.957

您正在使用日期时间字段（我猜）。不要忘记时间：

```
select * from tablName
where startDateTime between '2012-01-17' and '2012-01-17 23:59:59.997' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:42:28.090

您可以在 where 子句中使用 DateDiff 函数。它看起来像这样：

```
select col1, col2 from tablName where DateDiff(day, startDateTime, @DesiredDate) = 0 
```

# javascript - href="#_self" 是什么意思？

> ID：11211529
> 
> 赞同：1
> 
> 时间：2012-06-26T16:11:10.607
> 
> 标签：javascript, html

我在这里和那里看到过这个，但找不到关于这个“东西”的任何信息。任何人都可以向我们提供一些关于`#_self`提议的信息吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:20:28.397

`<a href="#_self">``_self`将跳转到当前页面中id为的元素。

例如，在页面下方，有一个如下所示的`<p>`元素：

```
<p id="_self"> ... </p> 
```

不过，拥有一个具有该名称的 ID 非常奇怪，因此可能是`jQuery`函数的诱饵锚链接。

# java - 如何从差异网站（项目）调用 JSP？

> ID：11211530
> 
> 赞同：-1
> 
> 时间：2012-06-26T16:11:26.487
> 
> 标签：java, jsp, jspinclude

> **可能重复：**
> [如何将 diff 项目中的 jsp 文件包含到我的项目中](https://stackoverflow.com/questions/11210628/how-do-i-include-a-jsp-file-from-a-diff-project-into-my-project)

如何从差异网站（项目）调用 JSP？

我正在尝试制作一个通用项目，该项目将具有我公司中的所有 Web 项目都将使用的页眉和页脚。

所以我有一个jsp

```
http://localhost:8080/common/webappfooter.jsp 
```

我正在尝试在我的示例项目中获取一个页面来包含它。

我一直在尝试

```
<jsp:include path="http://localhost:8080/common/webappfooter.jsp" /> 
```

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:15:26.790

您可以使用 JSTL。

```
<c:import url="http://localhost:8080/common/webappfooter.jsp" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T16:19:56.620

包括在同一个项目中的工作，所以它不会在这里工作..

您可以使用 iframe 来执行此操作..

# php - modx：如何为不同的用户添加不同的管理器语言？

> ID：11211531
> 
> 赞同：0
> 
> 时间：2012-06-26T16:11:27.987
> 
> 标签：php, modx

有没有一种简单的方法可以在每个用户的基础上使用 modx 后端界面（管理器）的语言？例如，admin 看到的是英文后端，user 1 看到的是法语，user2 看到的是意大利语。
到目前为止，我唯一能找到的是系统 - >系统设置中的全局设置

我正在运行 modX 2.0.7。

编辑：我在 modx 的更高版本中找到了一种方法，方法是添加一个覆盖 manager_language 的自定义用户设置。但是 2.0.7 不允许您添加 modx-combo-language 类型的自定义设置。
更新我的 modx 版本可能有点棘手，因为在过去的 2 年里有很多开发人员已经在开发它，它可能会破坏一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:42:33.467

正如您已经意识到的那样，您可以通过`manager_language`将每个用户的设置添加到该用户的“设置”选项卡来覆盖该设置。

`modx-combo-language`在 2.0.7 中可能不可用，但您仍然可以将设置添加为文本字段，然后输入所需语言的 ISO 代码（例如 en、it、fr、es）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:25:39.387

我做了一些研究，据我所知，这是不可能的。

因为语言是在系统设置中设置的，所以（如您所说）是全局的。您可以建议将此作为未来的功能，因为此时如果不对核心文件进行大量编辑，它将无法工作。

# python - 为什么我的对象消失了？

> ID：11211532
> 
> 赞同：-4
> 
> 时间：2012-06-26T16:11:30.577
> 
> 标签：python, class

我创建的对象有问题，然后在函数中使用。

```
class environnement:
    def __init__(self, n, dic={}, listr=[], listf=[]):
        self.taille=n
        self.reg=dict(dic)
        self.raccess=listr
        self.faccess=listf 
```

首先我在我的函数中创建一个环境`compilProgram`，然后我使用 `compilInstruction`这个环境：

```
def compilProgram(fichierSortie, nbrRegDispo, AST):
    DICOFUN={}
    for elt in AST.children:
        if elt.type=='fonctionDef':
            DICOFUN[elt.leaf]=elt.children
            continue
        else :
            pass
    env=environnement(nbrRegDispo)
    print(type(env))
    compteurLabel=0
    for elt in AST.children:
        if elt.type!='fonctionDef':
            (env, compteurLabel)=compilInstruction(env, fichierSortie, elt, compteurLabel) 
```

打印`compilProgram`是`env`在我给它之前检查什么`compilInstruction`（因为我有问题）。

```
def compilInstruction(env, fichierSortie, instruction,compteurLabel):
    print(type(env))
    envInterne=environnement(env.taille, env.reg, env.raccess, env.faccess)
    ... 
```

我尝试了许多其他方式来复制`env`，但问题似乎不是来自它。这是我尝试`compilProgram`使用属性参数时得到的结果：

```
<class 'Environnement.environnement'> (this is the print from compilProgram)
<class 'Environnement.environnement'> (this is the print from compilInstruction)
<class 'NoneType'> (this again comes from the print in compilInstruction)
...
AttributeError: 'NoneType' object has no attribute 'taille' 
```

为什么打印`compilInstruction`运行两次，为什么`env`两次运行之间消失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:17:03.467

您有两个打印语句，它解释了两次打印。

您正在`env`用第一次调用该`compilInstruction`函数的返回覆盖。因此，该函数返回一个`None`值作为它返回的元组的第一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:36:32.777

您`compilInstruction`不止一次拨打电话：

```
for elt in AST.children:
    if elt.type!='fonctionDef':
        (env, compteurLabel)=compilInstruction(env, fichierSortie, elt, compteurLabel) 
```

您在 AST.children 中有多个 elt 不是“fonctionDef”（错字？？），因此您`compilInstruction`不止一次调用。这就是为什么您可以从中获得不止一张印刷品的原因。compilInstruction 的返回值被分配给`env`and `compteurLabel`，因此`env`被 None 覆盖。

# c# - 在 Winforms 中运行后台线程更新 UI 中的控件

> ID：11211533
> 
> 赞同：3
> 
> 时间：2012-06-26T16:11:37.660
> 
> 标签：c#, winforms, multithreading

我在我的 Winform 中使用后台工作线程，在我的 Do_Work 事件中我正在计算一些东西，我需要的是同时我想更新主/UI线程中的标签？如何做到这一点？

我想从 Do_Work 事件中更新我的标签...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T16:52:14.520

在 WinForms（以及 WPF）中，UI 控件只能在 UI 线程中更新。您应该以这种方式更新您的标签：

```
public void UpdateLabel(String text){
    if (label.InvokeRequired)
    {
        label.Invoke(new Action<string>(UpdateLabel), text);
        return;
    }      
    label.Text = text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:13:09.713

在您的`Do_Work`方法中，您可以使用对象的`Invoke()`方法在其 UI 线程上执行委托，例如：

```
this.Invoke(new Action<string>(UpdateLabel), newValue); 
```

...然后确保将这样的方法添加到您的类中：

```
private void UpdateLabel(string value)
{
    this.lblMyLabel.Text = value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T21:34:52.047

您在用户界面（标签）更新期间面临跨线程异常的问题，因为它（UI）位于不同的线程（主线程）中。您可以使用许多选项，例如 TPL、ThreadPool、等等，但是做您想做的事情的简单方法想要在您的 Do_Work 方法中编写一个简单的 Action 作为

私人无效背景工人1_DoWork（对象发送者，DoWorkEventArgs e）

```
{
    x++;
    //you can put any value
    Action = act =()=>
           {
              label.Text = Convert.ToString(x);
           };
     if (label.InvokeRequired)
         label.BeginInvoke(act);
     else
          label.Invoke(act);
    backgroundWorker1.ReportProgress(0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:47:52.637

我希望这有帮助：

```
 int x = 0;
    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {

        label1.Text = x.ToString();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        x++;
        //you can put any value
        backgroundWorker1.ReportProgress(0);
    }

    private void button6_Click(object sender, EventArgs e)
    {
        backgroundWorker1.RunWorkerAsync();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-04T09:42:32.883

使用扩展方法的更通用的解决方案。这允许您更新任何控件的 Text 属性。

```
public static class ControlExtensions
{
   public static void UpdateControlText(this Control control, string text)
   {
      if (control.InvokeRequired)
      {
         _ = control.Invoke(new Action<Control, string>(UpdateControlText), control, text);
      }

      control.Text = text;
   }

   public static void UpdateAsync(this Control control, Action<Control> action)
   {
      if(control.InvokeRequired)
      {
         _ = control.Invoke(new Action<Control, Action<Control>>(UpdateAsync), control, action);
      }

      action(control);
   }
} 
```

你可以使用这样的方法：

```
TextBox1.UpdateControlText(string.Empty); // Just update the Text property

// Provide an action/callback to do whatever you want.
Label1.UpdateAsync(c => c.Text = string.Empty); 
Button1.UpdateAsync(c => c.Text == "Login" ? c.Text = "Logout" : c.Text = "Login");
Button1.UpdateAsync(c => c.Enabled == false); 
```

# javascript - dojo 小部件构造函数（参数）将配置与默认值合并

> ID：11211534
> 
> 赞同：0
> 
> 时间：2012-06-26T16:11:47.240
> 
> 标签：javascript, dojo, merge, widget

我有几个带有 dojo 的自定义小部件。我正在将属性传递给构造函数。我想知道如何将默认属性与提供的参数合并`constructor(params)`？jQuery 有`extend()`我需要使用的`dojo.extend`吗？还是`dojo.hitch`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:16:15.420

`dojo.mixin`会这样做。但是，小部件会自动执行此操作。

```
// from _WidgetBase.create(/*Object?*/params, /*DomNode|String?*/srcNodeRef)    
if(params){
  this.params = params;
  lang.mixin(this, params);
} 
```

`lang.mixin``dojo.mixin`来自_`dojo/_base/lang`

```
var w = new CustomWidget({a:1,b:2}, node);
// w.a is 1
// w.b is 2 
```

# javascript - 对javascript中的while循环感到困惑

> ID：11211537
> 
> 赞同：8
> 
> 时间：2012-06-26T16:11:59.690
> 
> 标签：javascript

我可能在这里有点厚，但请回答我。考虑以下代码：

```
a=1;
while(a<=6) {
   console.log(a);
   a++;
} 
```

如果我运行它，我会在控制台中得到从 1 到 6 的值，然后是另一个 6。

现在看看这个：

```
a=1;
while(a<=6) {
    console.log(a);
    ++a;
} 
```

运行它现在将得到从 1 到 7 的值。

为什么会这样？我的理解是，语句块只有在表达式计算为真时才会运行。在我的第二个示例中，这怎么可能？为什么 6 在第一次出现两次？对我来说很困惑。

如果你能简单地解释（我还在学习）那就太好了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T16:13:46.657

控制台会为您打印最后评估的语句的值。在第二种情况下，您预先增加，所以它的值是 7 而不是第一种情况下的 6。

更改您`console.log()`的电话以打印更多内容，这很明显：

```
console.log("a is: " + a); 
```

您不会在最后一行看到该前缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:19:49.220

在这两种情况下，您都会看到一个额外的数字，因为控制台正在输出循环中最后一条语句的结果。

当该代码未直接在控制台中执行时，您将看不到似乎是多余的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:04:18.203

看看他们的反应[小提琴](http://jsfiddle.net/eqA8t/)。两者都返回 1 到 6。

**a++ ：**它返回增量之前的**a的值。**

**++a**：它返回递增后的**a**值。

循环执行直到 'a'<= 6 的值。

当您在控制台上运行任何代码时，它会评估变量值并打印其值，这也是您在输出中获得更多的`6`原因`7`。

No worries, when you'll run this code, will get the 1-6 values only.

# spring - 超类没有空构造函数，但没有给出参数。弹簧集成

> ID：11211545
> 
> 赞同：4
> 
> 时间：2012-06-26T16:12:17.070
> 
> 标签：spring, messaging, spring-integration, cglib

我正在开发 Spring Integration 支持的 Web 应用程序。我正在使用 1.0.4.RELEASE。我使用 CGLib 代理。我有一个事务性消息端点。一切正常，但我尝试了一些注释。我使用注释配置，效果很好。我开始将我的服务激活器配置从 xml 切换到注释，但它失败了。

以下配置正常工作：

**弹簧集成.xml**

```
<channel id="inChannel" />
<channel id="outChannel" />
<service-activator method="myMethod" input-channel="inChannel" ref="myService" output-channel="outChannel" /> 
```

**我的服务.java**

```
@MessageEndpoint
@Transactional
public class MyService {

   @Autowired
   private MyDao myDao;

   public MyObject myMethod(String message) throws Exception {
      ...
   }

} 
```

尝试使用注释实现完全相同的功能（记住我使用 CGLIB，所以我不需要接口，但需要默认构造函数）我

*   从我的 .xml 中删除服务激活器
*   更改了我的服务：

**更改了 MyService.java**

```
@MessageEndpoint
@Transactional
public class MyService {

   @Autowired
   private MyDao myDao;

   public MyService () {
   }

   @ServiceActivator(inputChannel="inChannel", outputChannel="outChannel")
   public MyObject myMethod(String message) throws Exception {
      ...
   }

} 
```

我收到以下错误： **java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given**

我看到很多线程描述了以下错误[文章](http://noobjuggler.blogspot.com/2011/10/javalangillegalargumentexception.html)，但问题是关于自定义类。我的问题与 Spring 课程有关。

```
Error creating bean with name 'myService'
nested exception is org.springframework.aop.framework.AopConfigException
Could not generate CGLIB subclass of class [class org.springframework.integration.handler.ServiceActivatingHandler]
java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given 
```

怎么了？为什么 Spring 尝试为 Spring 类创建代理，而不仅仅是为 MyService 创建代理？我的课以某种方式包装了吗？我不明白发生了什么。非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:16:51.397

尝试取下`@Autowired`标签。这会寻找构造函数或 setter 方法来填充该字段。考虑到你没有这两个，这可能是问题所在。不过只是猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T23:42:14.063

或者您可以将 myDao 包保护或公开（以便 Spring 可以实际自动装配它）

例如：

```
@Autowired
myDao 
```

# c# - ModelBinder 是否应该抛出 404 异常

> ID：11211546
> 
> 赞同：1
> 
> 时间：2012-06-26T16:12:20.427
> 
> 标签：c#, .net, asp.net-mvc, exception, http-status-code-404

我开始切换我的控制器以使用模型绑定器进行 GET 操作，而不是使用 int 参数。我的正常控制器 GET 操作如下所示...

```
public ActionResult Details(int id)
{
    DomainModel model = repository.GetById(id);
    if (model == null)
    {
        throw new HttpException(404, "Item does not exist")
    }

    //Continue along with our controller action
} 
```

当切换到 ModelBinder 时，我想`HttpException`在`BindModel`方法中抛出，但是我不确定它是否被认为是一种好的编程习惯。控制器是否负责抛出 404 或 ModelBinder？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:21:18.193

模型绑定就是这样做的，绑定模型。如果模型不存在，它将返回 null 或 Null 对象。然后控制器可以决定如何处理模型。如果为空，则抛出。

但是，如果您看到出现相同的代码行，那么封装该代码是一个好主意。一种选择是使用 ActionFilter。模型绑定器创建对象，如果模型为空，动作过滤器可以将响应代码设置为 404。

在这种情况下，您的控制器只需要担心“快乐路径”。那就是模型存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T16:53:16.933

所以你有一个 GET 操作，它根据它的 id 返回一个模型。根据 MVC 的原理，控制器的工作是与模型交互并获取 id 的相应实例。我认为在模型绑定器中完成这项工作并将模型提供给控制器操作并不是一个好主意，这就像将核心工作从控制器中移开一样。

如果将`Details`动作更改为，

```
public ActionResult Details(DomainModel model)
{
} 
```

它看起来像是从外部将模型提供给动作的人，但假设动作应该将模型作为视图或 json 结果返回。考虑单元测试？

# c++ - 使用 Bullet Physics 创建电影

> ID：11211547
> 
> 赞同：0
> 
> 时间：2012-06-26T16:12:23.747
> 
> 标签：c++, ffmpeg, bulletphysics

我正在尝试从我的子弹演示中制作电影。为此，我想在每个时间步存储一个图像，并使用 ffmpeg 创建一个电影。

我需要模拟一次只前进一步。为此，我正在做

```
m_dynamicsWorld->stepSimulation(0.005,0); 
```

之后，我存储场景（我稍后创建场景的图像）。在动画结束时，我正在使用时间步长 200 fps (1/0.005) 创建电影。这应该给我实时动画，但动画有点慢。

有任何想法吗？

# c# - 多异常捕获

> ID：11211548
> 
> 赞同：2
> 
> 时间：2012-06-26T16:12:34.683
> 
> 标签：c#, exception, exception-handling

`catch`是否可以在同一块中捕获多个异常？

```
try
{   }
catch(XamlException s | ArgumentException a)
{   } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T16:15:22.093

是的。如果你捕获一个超类，它也会捕获所有子类：

```
try
{
    // Some code
}
catch(Exception e)
{
    // ...
} 
```

如果这捕获的数量超出了您的预期，那么您可以通过测试它们的类型来重新抛出您不打算捕获的异常。如果这样做，请小心使用`throw;`语法，而**不是** `throw e;`. 后一种语法破坏了堆栈跟踪信息。

但是您无法使用您建议的语法捕获两种不同的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T16:16:51.347

不像你问的那么简洁。一种方法是捕获所有异常并特别处理这两个：

```
catch(Exception e)
{   
  if((e is SystemException) || (e is ArgumentException))
     // handle, rethrow, etc.
  else
     throw;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T16:30:12.897

然而，不是 C# 大师，这在任何 oop 语言中都是标准的。

```
 try
    {
        string s = null;
        ProcessString(s);
    }
    // Most specific:
    catch (InvalidCastException e) { out_one(e); }
    catch (ArgumentNullException e) { out_two(e); }

    // Least specific - anything will get caught
    // here as all exceptions derive from this superclass
    catch (Exception e)
    {
        // performance-wise, this would be better off positioned as
        // a catch block of its own, calling a function (not forking an if)
        if((e is SystemException) { out_two(); }
        else { System..... }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T18:56:26.117

在 vb.net 中，可以说，检查并决定是否捕获它的任何所需函数`Catch Ex As Exception When IsMyException(Ex)`在哪里。*在*任何内部块运行之前确定是否捕获。不幸的是，C# 的制造者不喜欢允许自定义异常过滤器的想法，可能是因为它会用特定于平台的细节污染语言（大多数平台不支持 .net 样式的异常过滤器）。因此，在 C# 中最好的希望是执行以下操作：`IsMyException``Ex``Ex`*`Finally`*

 *```
无效 HandleThisOrThatException（BaseTypeOfThisThatTheOtherException）
{ ... }

...
// 捕获 ThisException 或 ThatException，但不捕获 TheOtherException
  捕捉 (ThisException ex) {HandleThisOrThatException(ex);}
  捕捉（ThatException ex）{HandleThisOrThatException（ex）;}

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T16:18:41.830

这是一个不好的例子，因为 any`ArgumentException`也是 a `SystemException`，所以捕获*所有* `SystemException`s 也会隐含地得到`ArgumentException`s 。*

# macos - 在 Mac 应用程序中显示 Emoji 图标

> ID：11211551
> 
> 赞同：1
> 
> 时间：2012-06-26T16:12:46.540
> 
> 标签：macos, cocoa, emoji

我希望用户能够在我为我工作的公司制作的小聊天中轻松访问表情符号图标。因此，我想制作一个显示可用表情符号图标的面板。为此，我使用了一个`NSCollectionView`. 现在，我需要传递一个显示在`NSTextField`. 此字符串必须包含一个表情符号图标。

我不知道如何在字符串中用 unicode 编写这个 Emoji 图标。我尝试过的所有东西都只显示一个奇怪的符号而不是图标。

谁能告诉我，如何将表情符号图标放入`NSString`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T16:27:44.397

你想要表情符号吗？

它们现在使用 Unicode

如果您打开 Character Viewer，您实际上可以将它们直接粘贴到您的源代码中。如果您愿意，您可以通过在 Unicode 代码图表（尤其是[U+1F300 块](http://unicode.org/charts/PDF/U1F300.pdf)`\U0001F431`的图表）中查找它们，将它们编码为十六进制（猫脸）。

如果要确保它们以彩色显示，则需要为表情符号选择“Apple Color Emoji”字体。您可以使用[`NSAttributedString`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsattributedstring_Class/Reference/Reference.html)基于每个字符设置字体。

# iphone - Phonegap 在模拟器中打开 IPA

> ID：11211552
> 
> 赞同：0
> 
> 时间：2012-06-26T16:12:50.720
> 
> 标签：iphone, macos, cordova, ipa

我使用 phonegap 网站创建了一个 IPA 文件。

现在我想在模拟器中测试它以确保它有效。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:12:52.513

那是不可能的。IPA 文件被构建为只能在 iOS 设备上运行，并且模拟器只能运行专门为模拟器构建的 xCode 应用程序。

# asp.net-mvc - 我如何或在哪里可以将第一个单元测试然后 TDD 引入现有的 MVC3/MVC4 项目？

> ID：11211562
> 
> 赞同：0
> 
> 时间：2012-06-26T16:13:20.090
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing, tdd

我现在发现自己有一个 EF Code First DbContext 和实体类，我现在更愿意将其排除在单元测试之外，因为 Code First 不是关键要求，我不会对 DB First 生成的类进行单元测试，但除此之外我有一个存储库，它们都是一个模板的复制和粘贴副本，然后是一些视图模式和控制器。

我现在想采用 TDD 方法作为前进的方向，并为非纯（仅属性）DTO 的视图模型和我的操作方法添加单元测试。我是否朝着正确的方向前进，并牢记正确的覆盖范围？那么，我如何对动作进行单元测试呢？一些指向资源和教程的指针会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:54:34.343

理想情况下，在完美的 TDD 环境中，您将对代码中的所有内容进行测试 - 但有些人可能认为这是教条主义的，您认为不需要测试您的代码优先生成的数据库，所以不要这样做： ) . 你是开发者，做你想做的事。

我理解您对上述内容的感受，但是如果您想以真正的 TDD 风格进行开发，您需要在编写任何代码之前编写一个测试，然后编写代码以获得测试的“绿灯​​”。

基本工作流程如下（从您想要添加到应用程序中的任何内容开始`DBContext`）

1.  意识到您的 MVC 应用程序需要一个新功能
2.  编写一个失败的测试（因为此时没有实际的代码）
3.  编写您想要添加到应用程序的新功能
4.  运行你的测试，如果测试通过，继续 5，如果失败，编辑代码并重复 4
5.  根据需要重构并重新运行测试以确保一切通过

你会有很多测试，但只要你勤奋地维护这些测试，你就会有一个非常完善的应用程序。

在将 TDD 与 MVC（或可能的任何开发架构）一起使用时，请记住以下几点：

*   经常运行你的测试
*   确保您的测试在过去一次通过后全部通过（听起来很明显，但有些人很疯狂）
*   确保您可以轻松快速地运行测试，最好单击一两次即可运行测试。这将允许您更轻松地频繁运行它们 - 这就是测试的目的。
*   坚持下去，很容易变得懒惰，只是说，“是的，我知道这部分会起作用，不需要测试它”，但是当你在几周/几个月/几年后查看该代码时，你不会由于与它密切相关，您可能会不小心更改某些内容并运行项目的测试（因为它是使用 TDD 流程开发的）并注意到一切都通过了。但是，由于没有对您更改的部分进行测试，因此您没有证据表明代码全部按计划工作。这听起来很简单，但可以将其视为可能导致其他问题的被遗忘的“破窗”。

至于专门为 MVC 操作编写测试，我强烈推荐来自 MSDN 的[本教程](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3testing.aspx)和这本书： Freeman 和 Sanderson 的[Pro ASP.NET MVC 3 Framework](https://rads.stackoverflow.com/amzn/click/com/1430234040)（这是 MVC3 的一个整体很好的资源，包括 MVC3 的 TDD）。

# c# - CreateUserWizard 注册电子邮件中的字符串未替换

> ID：11211571
> 
> 赞同：1
> 
> 时间：2012-06-26T16:13:50.707
> 
> 标签：c#, asp.net

我的网站允许用户创建帐户。

创建后，带有 URL 的电子邮件验证将发送到用户的电子邮件。

问题：电子邮件发送成功，但不幸的是验证 URL 没有出现。

而对于

```
<a href="<%VerifyUrl%>"<%verifyUrl%></a></p> 
```

“<%VerifyUrl%>”下面有一个绿色的卷线，表示找不到这个文件。

这是 Login.aspx 的源代码：

```
protected void CreateUserWizard1_SendingMail(object sender,MailMessageEventArgs e)
{
    MembershipUser userInfo = Membership.GetUser(CreateUserWizard1.UserName);

    //Construct the verification URL
    string verifyUrl = Request.Url.GetLeftPart(UriPartial.Authority) + Page.ResolveUrl("~/Verify.aspx?ID=" + userInfo.ProviderUserKey.ToString());

   // Replace <%VerifyUrl%> placeholder with verifyUrl value
    e.Message.Body = e.Message.Body.Replace("VerifyUrl", verifyUrl.ToString());
} 
```

这是用户将在他们的电子邮件中看到的 html 文件：

```
<h2> Welcome to My Website!</h2>
<p>
    Hello, <%UserName%>. You are receiving this email because you recently created a new account at my 
    site. Before you can login, however, you need to first visit the following link:</p>
<p>
    <a href="<%VerifyUrl%>"><%verifyUrl%></a></p>
<p>
    After visiting the above link you can log into the site!</p>
<p>
    If you have any problems verifying your account, please reply to this email to 
    get assistance.</p>
<p>
    Thanks!</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:35:43.443

我假设您正在尝试复制 MSDN 中的[示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.maildefinition%28v=vs.100%29.aspx)。如果没有，您可能希望参考该示例以获取一些指针。

需要说明的几点：
意识到`<% %>`asp.net 中的语法是特殊的。在这种情况下，该`<%UserName%>`语句对控件具有特殊含义，它将用刚刚创建的 UserName 填充它（参考上面的示例）。你`<%VerifyUrl%>`对控件没有特殊意义。它是电子邮件正文的一部分，ASP.NET 仅将其视为字符串中的一些字符。（这就是绿色卷线完全不重要的原因）您只搜索字符串`VerifyUrl`。我不确定为什么你的替换功能不起作用，但如果它起作用了，你的`<a>`标签无论如何都不能正常工作，因为你的 href 值将被包裹在`<% %>`.
相反，如果您将代码更改为

```
e.Message.Body.Replace("<%VerifyUrl%>", verifyUrl.ToString()) 
```

我相信您的 Replace 会正常工作，您最终会得到一个可用的 URL。

作为旁注，我个人发现，`String.Format`只要您记得正确排序参数，在这些情况下使用可以更容易和更可靠地实现。

编辑：我刚刚注意到这个问题已经超过 6 个月了，现在答案可能对你没有帮助，但我希望其他人可以从中得到一些用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T09:10:10.100

不是解决方案，但解决方法是：

```
 Dim Email = RegisterUser.Email
    Dim UserID = Membership.GetUser(RegisterUser.UserName).ProviderUserKey
    Dim user1 As MembershipUser = Membership.GetUser(RegisterUser.UserName)
    Dim verifyUrl As String = Server.HtmlEncode(Request.Url.GetLeftPart(UriPartial.Authority) + Page.ResolveUrl("~/Account/ActivateUsers.aspx?UserID=") + UserID.ToString + "&Email=" + RegisterUser.Email)
    e.Message.Body = "<!DOCTYPE html>"
    e.Message.Body += "<html xmlns=""http://www.w3.org/1999/xhtml"">"
    e.Message.Body += "<head>"
    e.Message.Body += "<title></title>"
    e.Message.Body += "<style>body{text-decoration:none;font-family:Arial, Verdana, sans-serif;font-size:10.0pt;font-weight:normal;text-align:left;overflow: visible;}</style>"
    e.Message.Body += "</head>"
    e.Message.Body += "<body>"
    e.Message.Body += "<p>Thank you for registering. To activate your account please click on the link below:<BR /><BR />"
    e.Message.Body += verifyUrl
    e.Message.Body += "</p>"
    e.Message.Body += "</body>"
    e.Message.Body += "</html>"
    e.Message.To.Add(Email.Trim())
    e.Message.Subject = "xxxxxx Account activation Email"
    Dim smtpMail As SmtpClient = New SmtpClient()
    smtpMail.Send(e.Message) 
```

希望这可以帮助某人。

# perl - Perl wget 没有正确地“greping”

> ID：11211572
> 
> 赞同：1
> 
> 时间：2012-06-26T16:13:52.583
> 
> 标签：perl, web-scraping

期待感谢。

这个循环提供 URL（在 $_ 变量中），我的想法是将每个 URL 发送到 wget 进行处理，如您所见

```
foreach(@my_array) {
    $browser->get($_);    
    system ("wget -q -O -\"$_\" | grep -oe '\\w*.\\w*@.\\w*.\\w\\+' | sort -u");
}
print EMAILS; 
```

问题：

1) grep 不 grep，我只获取 URL，即 $_

2) 我不太确定我是否将结果正确发送到输出文件，因为我所做的只是打印 EMAILS，其中 EMAILS 是上面创建的输出文件的句柄。

3）我尝试做另一个变体，将 >output.txt 嵌入到括号中，

```
system ("wget -q -O -\"$_\" | grep -oe '\\w*.\\w*@.\\w*.\\w\\+' > output.txt| sort -u"); 
```

但它被忽略了

4) 问题是 grep 是在服务器中爬行时完成还是 wget 必须下载所有文件然后才在我的计算机中 grep 所有电子邮件？自然我不想下载整个网站。

十分感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:19:33.920

grep 在 wget 完成后执行（下载所有文件）。此外，输出到文件不会将正确的信息传递给排序命令。

LWP 在浏览网页以查找电子邮件地址时可能更有用。

[http://search.cpan.org/dist/libwww-perl/lib/LWP.pm](http://search.cpan.org/dist/libwww-perl/lib/LWP.pm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:22:35.817

看起来您忘记了 URL 之前的空格：

```
system ("wget -q -O - \"$_\" | grep -oe '\\w*.\\w*@.\\w*.\\w\\+' | sort -u"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T16:26:41.883

URL 前缺少空格。重新编辑放置到早期。

```
system("wget -q -O - \"$_\" | grep -oe '\\w*.\\w*@.\\w*.\\w\\+' | sort -u >output.txt"); 
```

是什么让你觉得`system`变化`$_`？

# reporting-services - SSRS - 匹配值的聚合函数和计数频率

> ID：11211573
> 
> 赞同：1
> 
> 时间：2012-06-26T16:13:53.710
> 
> 标签：reporting-services

我有一个报告，其中包含两个单独的表，引用了两个单独的数据集。第一个表包含一列，该列显示一些用于标记目的的整数值（即，1、2、9、12...等）。第二个表包括许多项目，每个项目显示上述标签号的一些值（多对一）。两个数据集都包含相同的 tag# 字段。

我的问题是，如何计算第二个表中第一个表中的特定标签号附加到的匹配数？我知道这与聚合函数有关，但我认为它也可能与分组有关，我不确定如何将两者结合起来以获得我正在寻找的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:33:41.137

```
SELECT Tags.TagId, Count(*) AS Matches
FROM Tags 
INNER JOIN TagMatches ON Tags.TagId = TagMatches.TagId
GROUP BY Tags.TagId 
```

# visual-studio - 从控制台使用 VS2012 差异工具

> ID：11211576
> 
> 赞同：12
> 
> 时间：2012-06-26T16:14:08.350
> 
> 标签：visual-studio, merge, diff, visual-studio-2012

是否可以从控制台使用 VS 2012 差异工具，如下所示？

```
compare.exe c:\file1 c:\file2 
```

**[编辑](http://homenko.net/post/2013/05/02/Running-VS-2012-difference-tool-from-Console)**

1.  您也可以[从命令行窗口](http://msdn.microsoft.com/en-us/library/c785s0kz.aspx)运行 diff 工具，它将在 VS 的同一实例中运行。

    ```
    Tools.DiffFiles c:\file1 c:\file2 
    ```

2.  此外，还有一个VS 2012 的[扩展](http://visualstudiogallery.msdn.microsoft.com/56f99a33-46b9-4d9e-8145-900aaba9951d)。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T03:28:27.723

```
devenv /diff c:\file1 c:\file2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-14T14:36:00.423

要打开**Visual Studio Code Diff Tool**`cmd`或者您可以输入`powershell`以下命令，当然需要指定您的文件：

```
code --diff <path1> <path2> 
```

# haskell - 我可以在 GHC 7.4.2 中使用 haskell 平台吗？

> ID：11211579
> 
> 赞同：0
> 
> 时间：2012-06-26T16:14:22.670
> 
> 标签：haskell, haskell-platform

在尝试编译时，[Haskell Platform](http://hackage.haskell.org/platform/) (2012.2.0.0) 我意识到我编译了错误的[GHC](http://www.haskell.org/ghc/)（我下载的是 7.4.2 而不是 7.4.1）。

将 7.4.2 与 haskell-platform 一起使用是否有任何问题，尤其是在生产服务器上，还是应该安装 7.4.1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:17:20.387

它可能会“正常工作”，因为 GHC 次要版本不会破坏 API 兼容性。

# objective-c - 问号作为“如果”表示法

> ID：11211585
> 
> 赞同：1
> 
> 时间：2012-06-26T16:15:01.120
> 
> 标签：objective-c

我知道使用这样的语法：

```
(something) ? TRUE : FALSE 
```

但是如果我想返回检查变量怎么办？例如：

```
if([myVar objectForKey:objectName])
    return [myVar objectForKey:objectName]
else
    return -1; 
```

这里有没有像第一行代码这样的语法？

当然我知道我可以简单地做类似的***事情***：

```
([myVar objectForKey:objectName]) ? return [myVar objectForKey:objectName] :  return -1; 
```

但这是 AFAIK 非常丑陋的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:19:12.637

我不确定你在问什么，但你总是可以这样做：

```
id foo = [myVar objectForKey:objectName];
return (foo) ? foo : -1; 
```

或者

```
return [myVar objectForKey:objectName] ? [myVar objectForKey:objectName] : -1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:26:55.753

在我的脑海中，我*认为*这应该可行*（编辑：但请参阅 andyvn22 的回答：返回类型）*：

```
id foo;
return (foo = [myVar objectForKey:objectName]) ? foo : -1; 
```

不过，作为一般规则，您几乎总是最好使用一种易于理解的符号，而不是稍微简洁但神秘的符号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T16:27:03.960

有*一种*简单的方法可以在语句中使用三元运算符（这`? :`就是所谓的语法）`return`：

```
return [myVar objectForKey:objectName] ? [myVar objectForKey:objectName] : -1; 
```

并且可以通过快速变量使其更简洁：

```
id result = [myVar objectForKey:objectName];
return result ? result : -1; 
```

然而！你在这里的返回类型是什么？有可能你会 return `[myVar objectForKey:objectName]`，这是 type `id`，或者你会 return `-1`，这是 type `NSInteger`。一个是 Objective-C 对象，另一个是 C 原语——这个具体的例子似乎有些可疑。

# android - Android打印阿拉伯语单词

> ID：11211586
> 
> 赞同：1
> 
> 时间：2012-06-26T16:15:02.410
> 
> 标签：android, arabic, android-2.2-froyo

我想构建客户端/服务器应用程序，客户端是android（2.2）应用程序，服务器是tomcat Java服务器，IDE是Eclips

我想使用servlet将阿拉伯数据从服务器发送到客户端，我在[这里](https://stackoverflow.com/questions/7962704/how-to-support-arabic-text-in-android)发现了这个问题 ，它非常有帮助，但我的问题是当我使用它时：

```
info.setText(Farsi.Convert("وليم")); 
```

它工作得很好并打印那个阿拉伯语单词，但是当我打印阿拉伯语数据来自服务器时，如下所示：

```
info.setText(Farsi.Convert(results[0])); 
```

它打印出奇怪的英文单词，所以问题可能出在从服务器发送数据到客户端或其他地方？

### 事情可能有助于了解问题

1.  我可以在服务器上的控制台上打印阿拉伯语数据，效果很好
2.  数据来自mysql，字段是`utf8_unicode_ci`
3.  我使用 servlet 将数据从服务器发送到客户端，如下所示：`response.setCharacterEncoding("UTF-8");response.setHeader("Info", word);`

请任何帮助！，因为这个应用程序是我的毕业设计，我必须支持阿拉伯语。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:55:23.900

我的观点-您不应该将标题用于阿拉伯语单词，而应使用响应**正文**。

隐藏在这里的原因 - 默认情况下 java.lang.String 构造函数使用默认系统编码，它可能不是 UTF-8 编码。您应该从手动指定 UTF-8 编码的字节数组创建字符串，但是在使用标头 AFAIK 时这是不可能的。

# mod-rewrite - mod_rewrite 规则被忽略

> ID：11211587
> 
> 赞同：0
> 
> 时间：2012-06-26T16:15:05.270
> 
> 标签：mod-rewrite

我正在寻找基于序列化错误的翻译。

```
RewriteRule ^/?(register)\.html/errors/([^/]+) index.php?temp=register&errors= $1 [L]
RewriteRule ^/?(register)\.html index.php?temp=register [L] 
```

这是被忽略并跳到顶层？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:07:26.640

好的，我现在解决了这个问题。

HTACCESS 文件...

```
 RewriteRule ^/?(register)\.html/errors/([^/]+) index.php?temp=register&errors=$1 [L]
 RewriteRule ^/?(register)\.html index.php?temp=register [L]
 RewriteRule ^/?(manage_user_account)\.html templates/manage_user_account.php [L] 
```

在主 php 文件中

```
 $linkback =  "register.html/errors/" . base64_encode(serialize($error));
 header('location: ' . $linkback); 
```

感谢您的调查。

谢谢

和我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:43:49.043

Zagorax 可以...这是管理注册表单的代码...

```
<?php 

/// Stage 1 check - create basic account and present options
require_once('../connections/application.php');

//// set the new connection to be able to write/update the DB
///// for writing database
$eggbox->close_eggbox();
$eggbox->connect_eggbox("write");

$eggbox_secure_checks = new eggbox_secure_checks;

$timenow = strtotime(date('Y-m-d H:i:s'));

////// Set the references
$PHPSESSIONID = $_SESSION['PHPSESSIONID'];  

////// set credentials
$_SESSION['client_name'] = stripslashes(str_replace("'", "''", ($_POST['client_name'])));
$_SESSION['client_email'] = stripslashes(str_replace("'", "''", ($_POST['client_email'])));
 $_SESSION['email_check'] = stripslashes(str_replace("'", "''", ($_POST['email_check'])));
$_SESSION['client_psw'] = $_POST['client_psw'];
$_SESSION['psw_check'] = $_POST['psw_check'];
$_SESSION['client_tel'] = stripslashes(str_replace("'", "''", ($_POST['client_tel'])));
$_SESSION['client_mobile'] = stripslashes(str_replace("'", "''", ($_POST['client_mobile'])));

if(isset($_POST['is_organisation'])){
    $_SESSION['is_organisation'] = $_POST['is_organisation'];
} else {
    $_SESSION['is_organisation'] = 0;
}

if($_SESSION['is_organisation'] == 1) {

    $_SESSION['company_name'] = stripslashes(str_replace("'", "''", ($_POST['company_name'])));
    $_SESSION['company_regno'] = stripslashes(str_replace("'", "''", ($_POST['company_regno'])));
    $_SESSION['company_url'] = stripslashes(str_replace("'", "''", ($_POST['company_url'])));

} else {

    $_SESSION['company_name'] = "Individual";
    $_SESSION['company_regno'] = "";    
$_SESSION['company_url'] = "";

}

if(isset($_POST['sign_up'])){
    $_SESSION['sign_up'] = $_POST['sign_up'];
} else {
    $_SESSION['sign_up'] = 0;
}

////// Checks for basic details are entered or relocate back with error messges
$error = array();
$i = 0;

if(($timenow - $_POST['timestampnow'] ) < 3){
    $error[$i][0] = 1;
    $error[$i][1] = 1;
    $i++;
    exit();
}

if($_SESSION['client_name'] == ""){    
$error[$i][0] = 2;
    $error[$i][1] = 'client_name';
    $i++;
}

if($_SESSION['client_email'] == ""){
    $error[$i][0] = 3;
    $error[$i][1] = 'client_email';
    $i++;
}

if($eggbox_secure_checks->validEmail($_SESSION['client_email']) == false){
    $error[$i][0] = 15;
    $error[$i][1] = 'client_email';
    $i++;
} 

if($_SESSION['client_email'] != $_SESSION['email_check']){
    $error[$i][0] = 4;
    $error[$i][1] = 'client_email';
    $i++;
}

if($_SESSION['client_psw'] == ""){
    $error[$i][0] = 5;
    $error[$i][1] = 'client_psw';
    $i++;
}

if($_SESSION['client_psw'] != $_SESSION['psw_check']){
    $error[$i][0] = 6;
    $error[$i][1] = 'client_psw';
    $i++;
}

/////// Additional checks for companies
if($_SESSION['is_organisation'] != 0){

    if($_SESSION['company_name'] == ""){
        $error[$i][0] = 2;
        $error[$i][1] = 'company_name';
        $i++;
    }

 } /// End if

/////// If Error then return to checkout.php
if(!empty($error)){ 

    $linkback =  "../index.php?temp=register&errors=" .      base64_encode(serialize($error));  ///// old link back
      $linkback =  "register.html?errors=" . base64_encode(serialize($error));
      header('location: ' . $linkback); //// new linkback

 } else { //// Process Transaction
////..........

 header('location: ' . $linkback);

 $eggbox->close_eggbox();

?> 
```

# ios - 向 UITextField 键盘添加取消按钮

> ID：11211589
> 
> 赞同：10
> 
> 时间：2012-06-26T16:15:08.047
> 
> 标签：ios, ios5, uitextfield, uitextinput

有没有办法在显示的键盘上添加一个取消按钮`UITextField`？查看`UITextInputTraits`协议参考，我找不到任何东西，包括尝试不同的键盘类型。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T16:22:17.210

您可以创建一个输入附件视图，它可以在键盘上方显示一个 UIToolBar，然后向它添加一个取消按钮。查看以下 inputAccessoryView 属性的文档链接。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)

这是我为 TextView 所做的一个示例。从“textViewDidBeginEditing”调用创建输入附件视图方法。然后它创建输入附件视图，在我的例子中添加了三个按钮和一个空格键。

我希望这会有所帮助。

```
-(void)textViewDidBeginEditing:(UITextView *)textView {

[self createInputAccessoryView];
[textView setInputAccessoryView:_inputAccessoryView];
self.myTextView = textView;  }

-(void)createInputAccessoryView {

_inputAccessoryView = [[UIToolbar alloc] init];
_inputAccessoryView.barStyle = UIBarStyleBlackOpaque;
[_inputAccessoryView sizeToFit];

_inputAccessoryView.frame = CGRectMake(0,_collageView.frame.size.height - 44, _collageView.frame.size.width, 44);

UIBarButtonItem *fontItem = [[UIBarButtonItem alloc] initWithTitle:@"Font"
                                                             style:UIBarButtonItemStyleBordered
                                                            target:self action:@selector(changeFont:)];
UIBarButtonItem *removeItem = [[UIBarButtonItem alloc] initWithTitle:@"Remove"
                                                             style:UIBarButtonItemStyleBordered
                                                            target:self action:@selector(removeTextView:)];
//Use this to put space in between your toolbox buttons
UIBarButtonItem *flexItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                                                                          target:nil
                                                                          action:nil];
UIBarButtonItem *doneItem = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                             style:UIBarButtonItemStyleDone
                                                            target:self action:@selector(dismissKeyBoard:)];

NSArray *items = [NSArray arrayWithObjects:fontItem,removeItem,flexItem,doneItem, nil];
[_inputAccessoryView setItems:items animated:YES];
[_myTextView addSubview:_inputAccessoryView];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T20:35:16.540

我刚刚`UIToolbar`在 Interface Builder 的视图控制器中放入了一个，然后：

```
@property IBOutlet UIToolbar *keyboardAccessory;

-(void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    // this is so I can edit it in Interface Builder, but it doesn't show in the view
    [keyboardAccessory removeFromSuperview];
}

-(BOOL) textFieldShouldBeginEditing:(UITextField*)textField {
    textField.inputAccessoryView = keyboardAccessory;
    return YES;
}

-(IBAction) pressedCancelButton {
    [self.view endEditing:YES];
} 
```

瞧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:23:37.917

安德鲁，怎么样？这是迪玛R！

据我所知，没有什么好方法可以做你想做的事。[您可以轻松地从此处](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html)列出的一种内置类型中进行选择

```
typedef enum {
   UIReturnKeyDefault,
   UIReturnKeyGo,
   UIReturnKeyGoogle,
   UIReturnKeyJoin,
   UIReturnKeyNext,
   UIReturnKeyRoute,
   UIReturnKeySearch,
   UIReturnKeySend,
   UIReturnKeyYahoo,
   UIReturnKeyDone,
   UIReturnKeyEmergencyCall,
} UIReturnKeyType; 
```

您可以做的是在包含取消按钮的键盘顶部添加一个视图，或者尝试遍历视图层次结构并以这种方式在按钮上覆盖您想要的内容（尽管这种方法不可靠）。不幸的是，这是苹果尚未提供太多定制的一件事。

**编辑：**实际上我认为我从一开始就误读了您的问题，因为无论如何您都不希望取消按钮作为主要的返回按钮。在这种情况下，输入附件视图绝对是要走的路。

# java - Java Slick2D 拍摄问题

> ID：11211590
> 
> 赞同：0
> 
> 时间：2012-06-26T16:15:11.073
> 
> 标签：java, entity, slick2d

我通常对 Java 和 Slick2D 都很陌生，即使在浏览了 Google 之后，我也找不到我的问题的答案。在我的游戏中，我有一个角色当前可以来回奔跑和跳跃。我希望他能够发射弹丸，但是按照我的编码方式，弹丸会在他切换方向或跳跃时改变轨迹。

```
if(input.isKeyPressed(Input.KEY_SPACE)){    
        shotX = charPosX;
        shotY = charPosY;
    if(left){
            shotX += delta * -0.5f;             
        }else{
            shotX +=delta * 0.5f;
        }

} 
```

这基本上是我目前拥有的代码。“left”布尔值简单地说明角色是面向左侧还是面向右侧。我觉得我遗漏了一些明显的东西，但我想知道是否有人对此有简单的解决方案，也许是一种在渲染后停止将镜头位置设置为角色位置的方法。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T01:21:44.973

正如您在评论中被告知的那样，很难从这么少的代码中确定情况，但我认为问题是在按住空格键时，您的 if 子句会一遍又一遍地执行，设置子弹的位置到角色的位置。

可能更好的是在子弹类中有一个布尔值，指示它是否已被发射，然后通过将*增量时间速度*添加到值来更新每个更新周期的位置。您所描述的情况似乎只有一个子弹，每次按住空格键时都会重置。

此外，*子弹只能在按住空格键时移动*，因为移动代码在 if 语句中。我希望这有帮助。

# html - 下拉菜单在 Safari 下不起作用

> ID：11211597
> 
> 赞同：2
> 
> 时间：2012-06-26T16:15:27.190
> 
> 标签：html, css, safari

我在 CSS 中开发了一个下拉菜单，但它似乎不适用于 Safari，但适用于所有其他浏览器，有人能在代码中看到问题吗？

它使用简单的 CSS，不应该引起任何问题

```
#nav {
    position:relative;
    margin:0 auto;
}

ul#navigation {
}

ul#navigation li {
    display:inline;
    float:left;
    position:relative;
}

ul#navigation li a {
]}

ul#navigation li a:hover {

}

ul#navigation li:hover > a {
}

/* Drop-Down Navigation */
ul#navigation li:hover > ul
{
    visibility:visible;
    opacity:1;
}

ul#navigation ul, ul#navigation ul li ul {
    list-style: none;
    margin: 0;
    padding: 0;    
    visibility:hidden;
    position: absolute;
    z-index: 99999;
    width:180px;
    background-image: linear-gradient(bottom, rgb(64,119,149) 28%, rgb(64,119,149) 32%, rgb(83,153,186) 85%);
background-image: -o-linear-gradient(bottom, rgb(64,119,149) 28%, rgb(64,119,149) 32%, rgb(83,153,186) 85%);
background-image: -moz-linear-gradient(bottom, rgb(64,119,149) 28%, rgb(64,119,149) 32%, rgb(83,153,186) 85%);
background-image: -webkit-linear-gradient(bottom, rgb(64,119,149) 28%, rgb(64,119,149) 32%, rgb(83,153,186) 85%);
background-image: -ms-linear-gradient(bottom, rgb(64,119,149) 28%, rgb(64,119,149) 32%, rgb(83,153,186) 85%);

background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.28, rgb(64,119,149)),
    color-stop(0.32, rgb(64,119,149)),
    color-stop(0.85, rgb(83,153,186))
);
    box-shadow:1px 1px 3px #ccc;
    opacity:0;
    -webkit-transition:opacity 0.2s linear, visibility 0.2s linear; 
    -moz-transition:opacity 0.2s linear, visibility 0.2s linear; 
    -o-transition:opacity 0.2s linear, visibility 0.2s linear; 
    transition:opacity 0.2s linear, visibility 0.2s linear;     
}

ul#navigation ul {
    top: 43px;
    left: 1px;
}

ul#navigation ul li ul {
    top: 0;
    left: 181px;
}

ul#navigation ul li {
    clear:both;
    width:100%;
    border:0 none;
}

ul#navigation ul li a {
    background:none;
    padding:7px 15px;
    color:#ffffff;
    text-decoration:none;
    display:inline-block;
    border:0 none;
    float:left;
    clear:both;
    width:150px;
    font-size: 12px;
    font-family: Tahoma;
}

ul#navigation ul li a:hover {
    background:none;
    padding:7px 15px;
    color:#ffffff;
    text-decoration:none;
    display:inline-block;
    border:0 none;
    float:left;
    clear:both;
    width:150px;
    font-size: 14px;
    font-family: Tahoma;
}

ul#navigation li a.first {
    border-left: 0 none;
}

ul#navigation li a.last {
    border-right: 0 none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:05:05.657

在你做任何其他事情之前尝试重置css：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# android - Windows 7 上的 Android NDK 环境变量

> ID：11211600
> 
> 赞同：3
> 
> 时间：2012-06-26T16:15:42.317
> 
> 标签：android, android-ndk

我目前正在尝试在 Eclipse 中启动和运行 NDK。我已经阅读了几篇教程，并找到了一篇对我来说似乎有意义的教程。但是，它说：

```
Please make sure that you have set the environment variables like
JAVA_HOME -- Java Home Directory
NDK_HOME -- Android NDK Home Directory
Update Path Variable with JDK Bin folder 
```

我在我的环境变量窗口中，但对该怎么做感到困惑。我还没有 JAVA_HOME 变量，所以我需要创建它，但值是什么？NDK_HOME 也是如此。我确实有一个 PATH 变量，我之前在安装 Cygwin 时对其进行了编辑。

顺便说一句，这是我正在使用的教程：http: [//www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/](http://www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:28:49.133

[通过使用 ARM 站点 ( http://ds.arm.com/ds-5-community-edition/](http://ds.arm.com/ds-5-community-edition/) )上的信息，我能够在 Eclipse 中生成 NDK 开发环境。

使用 NDK 有一些注意事项。例如，如果您将其安装在嵌入了空格的路径中（例如 C:\program files (x86)\Android），您将遇到问题。

尝试在命令提示符下运行 ndk-build.cmd 命令，看看您的安装是否有任何问题。

# android - 无法让 android 1.6 打开包含收件人电子邮件地址的电子邮件

> ID：11211602
> 
> 赞同：0
> 
> 时间：2012-06-26T16:15:53.203
> 
> 标签：android, email

我正在尝试让 Android 1.6 撰写一封电子邮件，并将收件人的电子邮件保存为字符串（不在 res/values/string.xml 文件中，因为字符串不会是常量）。到目前为止，我尝试的任何方法都没有奏效。我的代码是

```
public void SendMail(final String sender)
{
Intent emailIntent2 = new Intent(android.content.Intent.ACTION_SEND);
emailIntent2.putExtra(Intent.EXTRA_EMAIL, new String[]{sender});
emailIntent2.setType("text/plain");
emailIntent2.putExtra(Intent.EXTRA_SUBJECT, "subject");
emailIntent2.putExtra(Intent.EXTRA_TEXT   , "body");
startActivity(Intent.createChooser(emailIntent2, "Send mail client :"));
} 
```

# objective-c - 在 IOS 项目中传递 dex 编号（主从）

> ID：11211603
> 
> 赞同：1
> 
> 时间：2012-06-26T16:15:54.450
> 
> 标签：objective-c

我是 Objective-C 和 Xcode 的新手，我正在尝试使用主视图控制器中的“prepareforsegue”方法传递数组行索引。然后我将索引值插入到一个小的 sqlite3 表中，以便详细视图控制器显示正确的数据行。项目没有错误，但崩溃：

'NSRangeException'，原因：' *** -[__NSArrayM objectAtIndex:]：索引 6194506 超出范围 [0 .. 1]'

**这是prepareforsegue代码：**

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
  if ([segue.identifier isEqualToString:@"showDetail"]) 
  {
    NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
    FEIViewController *destViewController = segue.destinationViewController;
    NSInteger row = selectedRowIndex.row;

    destViewController.rowNumber = &(row);

}
} 
```

**这是 viewDidLoad 代码：**

```
- (void)viewDidLoad
{
 int myRowInt = *(_rowNumber);

FEIMyList * myFEI =[[FEIMyList alloc] init];
self.feig = [myFEI getMyFEI];
[self.feigImage setImage:((FEIList *) [self.feig objectAtIndex:myRowInt]).image];
[self.feigAction setText:((FEIList *) [self.feig objectAtIndex:myRowInt]).action];
[self.feigOther setText:((FEIList *) [self.feig objectAtIndex:myRowInt]).other];

[self.feigCondition setText:((FEIList *) [self.feig objectAtIndex:myRowInt]).condition];

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib. 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:33:42.980

您的 myRowInt 设置不正确。尝试在目标视图控制器上创建一个 NSNumber 作为属性，然后在 prepareForSegue 中设置它。

# email - 这封电子邮件发送后的外观如何？

> ID：11211605
> 
> 赞同：0
> 
> 时间：2012-06-26T16:16:01.413
> 
> 标签：email, html-email

我想知道一些事情。当发送真正的 PHP 文件时，这封电子邮件的外观如何？

`'Beste ' . $registration->voornaam . ',\n\n Bij deze ontvangt u uw ontvangstbevestiging voor uw inschrijving via het inschrijfformulier op www.lof.nl. \n\n Met vriendelijke groet, \n Stichting LOF Congres 2012');`

会是这个样子吗？

```
Beste *姓名*，
Bij deze ontvangt uw ontvangstbevestiging voor uw inschrijving via het inschrijfformulier op www.lof.nl。

遇见 vriendelijke groet，
Stichting LOF 大会 2012
```

如果是的话，非常感谢！或者如果没有，我该如何改变？有没有可以测试的在线环境？

谢谢你的时间，
乔迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:23:07.137

您的目标电子邮件客户是什么？如果是 Outlook 2007+，您可以通过创建电子邮件样本并在 Microsoft Word 中打开它进行测试，因为它们具有相同的渲染引擎。对于其他人来说，最好的方法是保存样本并在各种免费提供商（gmail、yahoo 等）中获取自己的帐户。

对于任何 Microsoft，您都需要保持非常基本的 html。关于如何在 Microsoft 中呈现 HTML 的一个很好的资源是：http: [//msdn.microsoft.com/en-us/library/aa338201](http://msdn.microsoft.com/en-us/library/aa338201%28v=office.12%29.aspx) (v=office.12).aspx 。对于上面的示例，我将其编码为：

```
'<p>Beste ' . $registration->voornaam . ',</p><p> Bij deze ontvangt u uw ontvangstbevestiging voor uw inschrijving via het inschrijfformulier op www.lof.nl. </p><p> Met vriendelijke groet, </p><p> Stichting LOF Congres 2012</p>'); 
```

但离开`\n`可能会给你大约相同的结果。

# d - 在 D 中识别具有指定 Id 的方法

> ID：11211606
> 
> 赞同：3
> 
> 时间：2012-06-26T15:46:04.240
> 
> 标签：d

我希望在编译时识别具有特定模式的特定方法，并在父类中与指定的 id 槽 mixins 一起注册。

例如：从具有预定 id:5 的类中获取方法“X”，我想要的是，在父类的 mixin 中，方法 X 将被注册为具有其 id 的委托，以便稍后由它的标识。

考虑到我希望 id 是 int 类型并且只注册指定的方法，那么指定 Id 的最佳方法是什么？

我应该（如果可能的话）使用非常类似于@property 但带有参数的自定义注释来做到这一点，例如：

```
@autoregister(id)
void method(...) 
```

如果可以这样做，那么一个示例或文档链接会很好，因为我没有在文档中找到它。

如果不可能，我将使用函数的签名作为字符串，但我真的想尽可能使用数字标识符而不是可能很长的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:07:50.580

目前无法进行自定义注释（但将来会）。

但是，您可以制定自己的方法命名约定，这将允许您执行与您所描述的类似的事情。我没有时间深入思考如何做到这一点，但我会从有一个方法开始，比如：

```
public void id30_doSomething(/* params */) {
  // body
} 
alias id30_doSomething doSomething;

// finally, lets do something with all these methods
// and generate mixin... 
```

在此之后，您可能会列出所有方法并查找它们的名称是否匹配`id([0-9]*)_.*`，如果是，则生成 mixin 以将它们注册到父...

# java - file.exists() 意外返回 false

> ID：11211613
> 
> 赞同：1
> 
> 时间：2012-06-26T16:16:44.767
> 
> 标签：java, linux

所以我有这样的事情：

```
File testFile = new File("/opt/tester/etc/test.properties");
if(!testFile.exists()){
   System.exit(0) } 
```

它总是退出，查看调试器，我看到该文件是使用“\opt\tester\etc\test.properties”的“路径”属性和 1 的“前缀长度”创建的

该文件存在于系统上，我可以对其执行“ls”和“file”命令，它工作正常，在阅读有关权限等信息后，我将文件的属性更改为：

```
-rw-rw-rw-. 1 root root 475 Jun 18 14:11 /opt/tester/etc/test.properties 
```

前：

```
 -rw-------. 1 user1 user1 475 Jun 18 14:11 /opt/tester/etc/test.properties 
```

（我的 java 类以 root 身份运行，路径上没有符号链接）

任何想法为什么会这样？谢谢你。

**更新：**刚刚在同一目录上创建了一个文件'test'，在里面添加了一个带有'nano'的单词，但仍然不起作用..所以我猜这个文件没问题，还有别的

**更新2：**继续我的书未解决..我认为这与我用/设置的路径有关，并且在调试器上查看时它存储为\。但是当没有通过调试器运行时运行良好。所以，我认为是由我的环境引起的（在 Linux 上运行的代码被 Windows 7 上运行的 Mule Studio 1.0.0（基于 eclipse 3.6.1）远程调试）。

**更新 3：**读到一些内容，说 VM 上的 32 位调试器和客户端中的 64 位调试器可能与故障有关。所以我将所有内容都移到了本地机器上，现在可以正常调试了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:50:03.613

我的部分愚蠢，我正在远程调试！所以我认为eclipse正在我的系统上而不是远程机器上寻找文件。（第一次使用远程调试）

（这不是正确的答案，因为我刚刚了解到远程调试根本不应该干扰这个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T03:22:34.023

您在评论中说它在 Windows 上完美运行。这显然是一个用户权限错误。在终端模拟器中尝试此命令

```
sudo chmod 777 /path_to_file 
```

更多关于[这里](http://en.wikipedia.org/wiki/Chmod)的命令。

它将绕过任何用户访问权限错误。

之后，再次尝试运行`Kumar Vivek Mitra`'s 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:02:17.450

我知道这可能看起来很幼稚，但是您仍然可以尝试此代码，因为它对我有用...

要将文件写入磁盘：

```
try {
    File f = new File("path_of_file"); 
    FileWriter fw = new FileWriter(f);
    BufferedWriter bw = new BufferedWriter(fw);
    bw.write("Hello");
    bw.close();
    fw.close();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

此代码检查指定位置的文件是否存在：

```
File f = new File("path_of_file");
if(f.exists()){
    System.out.println("success");
}
else{
    System.out.println("fail");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:52:02.413

我怀疑你有一个错误，是因为没有将你的`if`条件括在`{}`大括号中。`if`在没有大括号的情况下，如果在和之间有任何线`System.exit(0)`，则将始终调用出口（因为它不是`if`子句的一部分）。

# javascript - 我的 jQuery.ajax() 解析器错误的原因是什么？

> ID：11211617
> 
> 赞同：0
> 
> 时间：2012-06-26T16:16:56.620
> 
> 标签：javascript, .net, ajax, json, web-services

我正在尝试使用 javascript $.Ajax 调用从 Web 服务中获取 JSON。

```
<script type="text/javascript">
    $(function () {
        $("#" + "@Model.BidObjectId").submit(function () {
            alert("Test");
            var param = { 'id': "@Model.BidObjectId" };
            $.ajax({
                url: "http://localhost:11523/Service1.svc/GetBidObject",
                dataType: "jsonp",
                contentType: "application/json;charset=utf-8",
                type: "GET",
                data: JSON.stringify(param),
                success: function (msg) {
                    alert("success");
                    if (msg != null) {
                        return msg.URL;
                    }
                },
                error: function (msg2) {
                    alert(msg2);
                }
            });
            return false;
        });
    });
</script> 
```

我总是使用 parsererror 进入错误场景

> 状态：200 状态代码：函数（地图）{状态文本：“解析器错误”

[我已经在这里](https://stackoverflow.com/q/6643838/196526)阅读了解释，但我不能使用 JSON，因为这会创建一些 OPTION 调用。我尝试将 POST 更改为 GET，以几种不同的方式（创建类等）返回数据，但我似乎无法弄清楚问题所在。只有 JSONP 的解决方案似乎被同意做一个正确的 GET 或 POST。其他解决方案甚至找不到我的网络服务。

这是我的网络服务的代码：

```
 [OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "/GetBidObject?id={id}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        string[] GetBidObject(string id); 
```

和

```
 public string[] GetBidObject(string id)
        {
            BidObject bidobject = new BidObject() { BidObjectId = 1, Title = "callback" };

            JavaScriptSerializer ser = new JavaScriptSerializer();
            string result =  ser.Serialize(bidobject);
            List<string> listResult = new List<string>();
            listResult.Add(result);
            return listResult.ToArray(); 
        } 
```

我不使用 ASP.NET，而是使用 Razor。

**[编辑]**

如果我在 Fiddler 中通过 json 更改 jsonp，我可以读取我的调用是`OPTIONS http://localhost:11523/Service1.svc/GetBidObject?{%22id%22:%220%22} HTTP/1.1`使用 chrome。在 IE Fiddler 中什么也没检测到。ajax 调用从未完成......我真的不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:30:54.253

JSON 和查询字符串是两个不同的东西。通过 GET（或 POST）发送数据时，您不需要使用 JSON。

```
$.ajax({
    url: "http://localhost:11523/Service1.svc/GetBidObject",
    dataType: "jsonp",
    type: "GET",
    data: param,
    success: function (msg) {
        alert("success");
        if (msg != null) {
            return msg.URL;
        }
    },
    error: function (msg2) {
        alert(msg2);
    }
}); 
```

jQuery 将正确地 serailize`param`并生成 URL：

```
http://localhost:11523/Service1.svc/GetBidObject?id=123&callback=jquery1234 
```

然后，您可以`id`从后端的查询字符串中读取值。

# excel - 如何将单元格值从 WorkSheet1 复制到 WorkSheet，也就是如何使用 VBA 在 Excel 中创建主列表？

> ID：11211625
> 
> 赞同：0
> 
> 时间：2012-06-26T16:17:17.820
> 
> 标签：excel, vba, cell, rows

我正在尝试创建我拥有的几个 excel 数据的主列表。我从未使用过 Excel + VBA 程序/代码。

WorkSheet1 中有 2 列。Column1 是某种单词、术语，而 Column2 包含 Column1 的定义。现在，我必须复制该 Column1 的定义并将 Column2（如果为空，如果不是，则在 Column3 或下一个空列中）放入对应 Column1 旁边的 WorkSheet2 中。继续对 WorkSheet1 中的其余行执行此操作。基本上，不应有任何重复相同的值。WorkSheet2 中的Column1 可以有多个定义Column，只要它们不相同即可。

这有意义吗？有可能做这样的事情吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:43:40.627

欢迎使用 Excel VBA。如果我正确理解你的帖子，这应该给你（至少是基本的）你所追求的东西。这可能需要根据您的特定工作簿和数据集进行调整，但它会给您一个很好的**开始**。我使用的所有方法/程序都有大量帮助，我尝试用英语很好地评论，以便您了解正在发生的事情。

```
Option Explicit

Sub MoveIt()

Dim wkb As Workbook
Set wkb = ActiveWorkbook 'change to your workbook reference

Dim wks1 As Worksheet, wks2 As Worksheet
Set wks1 = wkb.Sheets("Sheet1") 'change to your name / definition sheet
Set wks2 = wkb.Sheets("Sheet2") 'change to the sheet where you need to paste defintions

With wks1

    Dim rngLoop As Range, cel As Range
    'assumes row 1 as column header, and definitions in Column B (2)
    Set rngLoop = Intersect(.UsedRange, .UsedRange.Offset(1), .Columns(2)) 'basically all rows with definitions in Column 2

    For Each cel In rngLoop 'loop through each definition

        Dim rngFound As Range

        'look for associated definition name in 2nd sheet
        'assumes Name in Column 1 of both worksheets
        Set rngFound = wks2.Columns(1).Find(cel.Offset(, -1).Text, lookat:=xlWhole)

        If Not rngFound Is Nothing Then 'if the name is found

            'look to see if defintion already exists in row aligned with Name of 2nd sheet
            Dim rngFoundAgain As Range
            Set rngFoundAgain = rngFound.EntireRow.Find(cel.Text,lookat:=xlWhole)

            'if not found
            If rngFoundAgain Is Nothing Then

                If rngFound.Offset(, 1) = vbNullString Then
                'if next cell (row of rngFound, column B) is blank

                    rngFound.Offset(, 1) = cel.Text

                Else
                'go the right most cell and place definition in next column

                    rngFound.End(xlToRight).Offset(, 1) = cel.Text

                End If

            End If

        End If

    Next

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:17:57.850

感谢Scott，问题解决了。如果单元格包含的字符数超过 Excel 的标准最大值。然后在第一个“If NOT ...”语句中插入这段代码而不是这行代码`Set rngFoundAgain = rngFound.EntireRow.Find(cel.Text,lookat:=xlWhole)`插入这一行：

```
Set rngFoundAgain = rngFound.EntireRow.Find(Left(cel.Value, 255), lookat:=xlWhole) 
```

# c# - Silverlight 4 + RIA 服务负载

> ID：11211627
> 
> 赞同：2
> 
> 时间：2012-06-26T16:17:26.613
> 
> 标签：c#, wcf, silverlight, silverlight-4.0, ria

使用相同的加载操作来加载多个实体然后将其异步绑定到单个事件处理程序是否可以接受？我这样做是因为我使用了一个繁忙的指示器，而且我们真的不知道哪个实体会更快地返回。

还是应该将负载分成多个负载操作/事件处理程序对？

```
 LoadOperation GetResult;

    private void LoadinDatagrid()
    {   
        IsBusy = true;
        GetResult = DomainContext.Current.Load(GetSomething1Query());
        GetResult = DomainContext.Current.Load(GetSomething2Query());
        GetResult = DomainContext.Current.Load(GetSomething3Query());         

        GetResult.Completed += new EventHandler(GetResult_Completed);                     
    }

    void GetResult_Completed(object sender, EventArgs e)
    {

        GetSomething1 = DomainContext.Current.Something1;
        GetSomething2 = DomainContext.Current.Something2;
        GetSomething3 = DomainContext.Current.Something3;
        GetResult.Completed -= new EventHandler(GetResult_Completed);
        IsBusy = false;     
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:32:12.027

加载操作获取结果；

```
private void LoadinDatagrid()
{   
    IsBusy = true;

    GetResult.Completed += new EventHandler(GetResult_Completed);       
    GetResult = DomainContext.Current.Load(GetSomething1Query());
    GetResult = DomainContext.Current.Load(GetSomething2Query());
    GetResult = DomainContext.Current.Load(GetSomething3Query());         

}

void GetResult_Completed(object sender, EventArgs e)
{
   if(e.result!=null){
    if(e.result.x=="GetSomething1")
    GetSomething1 = DomainContext.Current.Something1;
    else if(e.result.x=="GetSomething2")
    GetSomething2 = DomainContext.Current.Something2;
    else if(e.result.x=="GetSomething3")
    GetSomething3 = DomainContext.Current.Something3;
    //
    //Because when returned 1st data then stop eventhandler.
    //GetResult.Completed -= new EventHandler(GetResult_Completed);
    //
   }
    IsBusy = false;     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:55:28.363

尝试以下操作：

```
private int loadCounter;

private void LoadinDatagrid()
{   
    loadCounter = 3;
    IsBusy = true;
    GetResult = DomainContext.Current.Load(GetSomething1Query(), LoadCompleted);
    GetResult = DomainContext.Current.Load(GetSomething2Query(), LoadCompleted);
    GetResult = DomainContext.Current.Load(GetSomething3Query(), LoadCompleted);         
}

private void LoadCompleted(LoadOperation result)
{
    Interlocked.Decrement(loadCounter); // Thread save decrementing
    if(loadCounter == 0) // All queries have been loaded
    {
        IsBusy = false;
    }
} 
```

# mysql - 在 Sinatra 中使用远程 MySQL 的 ActiveRecord

> ID：11211629
> 
> 赞同：0
> 
> 时间：2012-06-26T16:17:30.190
> 
> 标签：mysql, ruby, activerecord, sinatra

我无法为我的特定问题寻找资源，或者至少我不了解我正在寻找的资源。

我需要我的 Sinatra 应用程序能够查询远程 MySQL 数据库并返回一些数据。我对数据库有只读访问权限，所以我需要做的就是检索它。我知道数据库有效，我的连接有效，并且我尝试使用的查询有效。这是一些示例代码：

```
db = ActiveRecord::Base.establish_connection(
  adapter:  'mysql', 
  host:     host, 
  database: database,
  username: user,
  password: pass) 
```

然后我试图用这样的东西查询连接

```
@courses = db.find_by_sql("SELECT *") 
```

但是该`db`对象没有该`find_by_sql`方法，或者实际上没有任何看起来可以完成这项工作的方法。我是否错过了可以查询数据库的步骤或其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:41:47.763

我不知道返回值`establish_connection`是多少。我怀疑这可能不是你想要的。正常的运行方式`find_by_sql`是：

```
ActiveRecord::Base.find_by_sql(...) 
```

如果您已经有模型，您还可以执行以下操作：

```
MyModel.find_by_sql(...) 
```

另一种方法是直接访问连接适配器对象并调用`execute`它：

```
ActiveRecord::Base.connection.execute(...) 
```

# wso2 - WSO2 银行示例 Carbon App：“无法添加具有相同身份的多个依赖项”

> ID：11211634
> 
> 赞同：1
> 
> 时间：2012-06-26T16:17:43.163
> 
> 标签：wso2, wso2esb, esb, wso2carbon

我正在尝试银行示例应用程序，当我尝试添加或选择代理时出现错误，如下所示：请帮助

![在此处输入图像描述](../Images/f64a12e08d3f1b4a69b14eeb1bd9ce0a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T05:30:38.473

似乎您正在尝试在您的 Carbon 应用程序项目中包含多个具有相同名称的依赖项，请查看我对 Jira 的评论（https://wso2.org/jira/browse/TOOLS-1130）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:25:36.897

能够通过取消检查注册表资源来添加它。请找到所附的相同屏幕截图

![在此处输入图像描述](../Images/63b4f41466d358e2fd3740970bb6de8a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:42:09.760

提出的问题：[https ://wso2.org/jira/browse/TOOLS-1130](https://wso2.org/jira/browse/TOOLS-1130)

# blackberry - 点击位图改变图片

> ID：11211637
> 
> 赞同：0
> 
> 时间：2012-06-26T16:17:55.683
> 
> 标签：blackberry, bitmap, onclick

如何 在单击位图`check_box1` 时通过另一个更改位图`check_box2``check_box1`

```
btmp_on = EncodedImage
            .getEncodedImageResource("btn_check_on.png");

    btmp_off = EncodedImage
            .getEncodedImageResource("btn_check_off.png");
    Bitmap check_box1 = getScaledBitmapImage(btmp_off,30,40);
    Bitmap check_box2 = getScaledBitmapImage(btmp_on,30,40); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:59:39.637

请参阅下面的链接：

[对于自定义列表字段](http://supportforums.blackberry.com/t5/Java-Development/list-with-separators-like-options/m-p/1558767#M190787)

对于触摸设备，在 fieldChanged 中添加相同的代码**到 touchEvent**，**如** ：

 **```
protected boolean touchEvent(TouchEvent message) 
{
    switch( message.getEvent() ) 
    {          
        case TouchEvent.CLICK:
            clickButton();
            break;

        default: break;
    }
    return super.touchEvent(message);
}
private void clickButton()
{
    Field focussedOne=this.getLeafFieldWithFocus();//Means this is the last field which is not having any otherFields;
    for(int i=0;i<size;i++)
    {
        if(focussedOne==listStyleButtonField[i])
        {
            if(listStyleButtonField[i].getChanged())
                listStyleButtonField[i].changeBitmap(bitmap,false);
            else
                listStyleButtonField[i].changeBitmap(bitmapHover,true);
        }
    }
} 
```**

# php - PHP类继承和静态成员，正确的处事方式

> ID：11211638
> 
> 赞同：0
> 
> 时间：2012-06-26T16:17:57.337
> 
> 标签：php, inheritance, static-members

我正在编写一个轻量级 ORM，它可以将数据库列映射到具有不同名称的实例字段

例如。

**数据库**

*   用户身份
*   用户名
*   另一个名不见经传的田野

**目的**

*   用户身份
*   用户名
*   another_poorly_named_field

为此，我的原始设计是这样的

```
abstract class DbObj {
    /* In a subclass the author would provide the mapping of fileds
     * from the database to the object
     * e.g.
     * array('userid' => 'user_id', 'username' => 'username'....
     */
    protected static $db_to_obj = array();

    /* This would be auto popuplated from $db_to_obj in reverse */
    protected static $obj_to_db = array();

    /* Many Methods truncated... */

    /* Used by magic methods to make sure a field is legit */
    public function isValidField($name) {
         return in_array(strtolower($name), self::$db_to_obj);
    }
} 
```

然后我将其子类化

```
class Cat extends DbObj {
     protected static $db_to_obj = array(
         'catsname' => 'name',
         'itsage' => 'age'
     );
} 
```

该`isValidField`方法没有按预期工作。使用调试器或老式的`var_dump`，您会发现 的值`self::$db_to_obj`是父类的值。如果`isValidField`是，我会理解`static`，但事实并非如此。它确实有一个`$this`指针，并且它确实知道它的类。

是否有解决此行为的方法或使用更好的架构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:24:38.613

使用继承时不要同时创建受保护和静态的变量。

如果您使用继承，您可以/应该执行以下操作：

```
parent::isValidField($name) {
  // code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:27:43.523

这是一个解决方案：

```
public function isValidField($name) {
  $class = get_class($this);
  return in_array(strtolower($name), $class::$db_to_obj);
} 
```

# java - 重载方法用户输入

> ID：11211639
> 
> 赞同：0
> 
> 时间：2012-06-26T16:17:58.893
> 
> 标签：java, input, overloading

我正在尝试使用方法重载来查找矩形的区域。唯一的问题是用户必须输入这些值。但是如果它必须从用户那里接受，我们不应该知道他输入的数据类型吗？如果我们这样做了，那么重载的目的就变得毫无用处，因为我已经知道数据类型。

你们能帮帮我吗？

您可以添加到此代码：

```
import java.io.*;
import java.lang.*;
import java.util.*;

class mtdovrld
{
   void rect(int a,int b)
   {
      int result = a*b;
      System.out.println(result);
   }

   void rect(double a,double b)
   {
      double result = a*b;
      System.out.println(result);
   }
}

class rectarea
{
   public static void main(String[] args)throws IOException
   {
      mtdovrld zo = new mtdovrld();

      Scanner input= new Scanner(System.in);

      System.out.println("Please enter values:");

      // Here is the problem, how can I accept values from user where I do not have to specify datatype and will still be accepted by method?
      double a = input.nextDouble();
      double b = input.nextDouble();

      zo.rect(a,b);

   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:22:41.747

所以你想要做的就是让它输入是一个字符串。

所以用户可以输入 9，或 9.0，或者如果你想疯狂，也许是 9。

然后您将解析字符串并将其转换为 int 或 double。然后调用任一重载方法。

[http://www.java2s.com/Code/Java/Language-Basics/Convertstringtoint.htm](http://www.java2s.com/Code/Java/Language-Basics/Convertstringtoint.htm)

这向您展示了如何将字符串转换为 int

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:23:18.267

您可以使用不同的类型参数重载，例如字符串，甚至某些对象。这将是一种预防措施，以防程序员使用您的矩形方法传入错误的参数类型，该方法不会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:37:50.370

**最好在程序中处理输入的检查，而不是让用户为此烦恼**。

例如：

`1\. First let the user give values as String.`

```
Scanner scan = new Scanner(System.in);
   String val_1 = scan.nextLine();
   String val_2 = scan.nextLine(); 
```

`2\. Now Check the type using this custom method. Place this method in the class mtdovrld,` `Call this method after taking user input, and from here call the rect() method.`

**验证方法：**

```
public void chkAndSet(String str1, String str2)
    {

       try{

             rect(Integer.parseInt(str1), Integer.parseInt(str2));

          }
        catch(NumberFormatException ex)
          {

             rect(Double.parseDouble(str1), Double.parseDouble(str2));

          }
    } 
```

# .net - MEF 组合错误：仅在某些机器上

> ID：11211640
> 
> 赞同：0
> 
> 时间：2012-06-26T16:18:01.643
> 
> 标签：.net, components, mef, composition

我有一个使用 MEF 的控制台应用程序。它在本地和部署到开发机器时都可以正常工作。当部署到发布机器时，它会引发组合错误。

开发和发布机器都是虚拟 sql server 2008 r2 机器，具有相同的规格，并且安装了大部分相同的软件和组件。有一个构建和部署过程，但即使将文件从 dev 复制到 release 并运行它们也会导致相同的错误。

发布机器上可能缺少 MEF 的任何先决条件或权限吗？

```
The composition produced a single composition error. The root cause is provided below. Review the CompositionException.Errors property for more detailed information.

1) Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information.

Resulting in: An exception occurred while trying to create an instance of type 'XXX.XXX.Dispatch.EmailDispatcher'.

Resulting in: Cannot activate part 'XXX.XXX.Dispatch.EmailDispatcher'.
Element: Lifetime.CrmBroker.Dispatch.EmailDispatcher -->  XXX.XXX.Dispatch.EmailDispatcher -->  AssemblyCatalog (Assembly="XXX.XXX, Version=1.1.2264.871, Culture=neutral, PublicKeyToken=null")

Resulting in: Cannot get export 'XXX.XXX.Dispatch.EmailDispatcher (ContractName="XXX.XXX.Dispatch.IEntityTypeDispatcher")' from part 'XXX.XXX.Dispatch.EmailDispatcher'.
Element: XXXX.XXX.Dispatch.EmailDispatcher (ContractName="XXXX.XXX.Dispatch.IEntityTypeDispatcher") -->  XXX.XXX.Dispatch.EmailDispatcher -->  AssemblyCatalog (Assembly="XXX.XXX, Version=1.1.2264.871, Culture=neutral, PublicKeyToken=null")

Resulting in: Cannot set import 'XXX.XXXX.Dispatch.DispatcherRepository.Dispatchers (ContractName="XXX.XXX.Dispatch.IEntityTypeDispatcher")' on part 'XXX.XXX.Dispatch.DispatcherRepository'.
Element: XXX.XXX.Dispatch.DispatcherRepository.Dispatchers (ContractName="XXX.XXX.Dispatch.IEntityTypeDispatcher") -->  XXX.XXX.Dispatch.DispatcherRepository
 (System.ComponentModel.Composition.CompositionException) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:15:55.090

添加一些代码来捕获`CompositionException`并获取有关根本原因的信息，如下所示：

```
catch (CompositionException e)
{
    // "unable to load one or more of the requested types" hints at a
    // ReflectionTypeLoadException, so cast to that
    var loadException = (ReflectionTypeLoadException)e.Errors.First(); 

    // as the error said,
    // "Retrieve the LoaderExceptions property for more information"
    var cause = loadException.LoaderExceptions.First();

    // print, log or extract the information in some other way 
    Debug.Print(cause.Message);
} 
```

不过，这似乎只是一个缺失的依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:43:34.150

感谢各位的回复，以及调试 MEF 的便捷技巧。

事实证明，问题是我没有在机器上安装 Entity Framework 4.1。MEF 正在吞噬本应抛出的异常，我从未找到它，但我在环境之间进行了详细比较，并尝试安装 EF 4.1 以查看它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:22:51.697

检查动态加载类型的构造函数。MEF 将构造函数中的问题隐藏在没有帮助的 MEF 错误后面。确保您在构造函数中有错误处理，然后添加一些日志记录以捕获“真正的”异常。

# javascript - 使用没有 jQuery 的 AJAX 从 Vimeo 频道获取视频

> ID：11211642
> 
> 赞同：0
> 
> 时间：2012-06-26T16:18:12.283
> 
> 标签：javascript, ajax, xmlhttprequest, jsonp, vimeo

我正在尝试编写一个简单的 AJAX 方法来从 Vimeo 获取视频列表，而不使用 jQuery。我意识到我必须使用 JSONP 格式，因为它是一个跨域请求。但是，返回的结果始终为 200 OK，并且始终为空。这是我的方法：

```
var httpRequest = new XMLHttpRequest();

httpRequest.open("GET", "http://vimeo.com/api/v2/channel/staffpicks/videos.json?callback=?", true);
httpRequest.send();

httpRequest.onreadystatechange = function () {
    if (httpRequest.readyState == 0) {
        console.log("0");
    }
    if (httpRequest.readyState == 1) {
        console.log("1");
    }
    if (httpRequest.readyState == 2) {
        console.log("2");
    }
    if (httpRequest.readyState == 3) {
        console.log("3");
    }
    if (httpRequest.readyState == 4 && httpRequest.status == 200) {
        console.log("4");
    }
    if (httpRequest.readyState == 4 && httpRequest.status == 404) {
        console.log("5");
    }
}; 
```

控制台记录 2，但不记录 0、1、3、4 或 5。它总是只有 2。

顺便说一句，这不一定是 Vimeo 请求。我使用 Vimeo URL 的唯一原因是因为我不知道如何测试 AJAX 请求而不是访问实际站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:36:41.103

您需要了解这些数字的含义。

readyState 属性指示请求的当前状态。它返回一个 4 字节整数。

此属性是只读的，并具有以下定义的值

```
UNINITIALIZED(0) 
The object has been created, but has not been initialized (the open method has not been called).
LOADING(1) 
The object has been created but the send method has not been called.
LOADED(2) 
The send method has been called and the status and headers are available, but the response is not.
INTERACTIVE(3) 
some data has been received. You can get the partial results using the responseBody and the responseText properties.
COMPLETED(4) 
All the data has been received, and is available. 
```

尝试

```
httpRequest.onreadystatechange = function () {
    alert(httpRequest.readyState + httpRequest.status);

};​ 
```

状态：

200 状态正常 400 HTTP 错误 400 错误请求

然后决定你从他的服务器收到什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:44:07.847

如果您想使用 JSONP，您需要以不同的方式进行操作，否则[跨域策略](https://developer.mozilla.org/en/http_access_control)不会让请求通过。

```
// Define a callback function
var log = function(videos){
  console.log(videos);
};

// Get the JSONP response and insert it in your DOM
var script = document.createElement('script');
script.src = "http://vimeo.com/api/v2/channel/staffpicks/videos.json?callback=log";
document.getElementsByTagName('head')[0].appendChild(script); 
```

通常通过 JSON 请求，您会得到：

```
[ { id: 0, title: "this is a title" } ] 
```

但是，当您发送 JSONP 请求时，您会得到包含在您提供的回调函数周围的响应：

```
log([ { id: 0, title: "this is a title" } ]) 
```

在您将此响应插入 DOM 时，您的回调函数可以完成其工作（来自 Javacript 的简单函数调用。）

这是[工作示例](http://jsfiddle.net/DGq4e/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T03:07:00.690

回想起来，这是一个非常糟糕的问题。真的是两三个问题：

1.  为什么我对 Vimeo 的跨域请求返回 200 OK 但它是空的？
2.  为什么控制台记录 2 而不是 0、1、3、4 或 5？
3.  除了访问实际站点之外，我还能如何测试 AJAX 请求？

问题一和二的答案如下，分别由 Alexander 和 Eswar Rajesh Pinapala 发布。问题三的答案是请求一个本地 JavaScript 文件。

我为其他人可能从中受益而苦苦挣扎的一件事是，当 httpRequest.readyState 为 0 或 1 时，httpRequest.status 会引发异常。所以这不起作用：

```
httpRequest.onreadystatechange = function () {
    alert(httpRequest.readyState + httpRequest.status);
};​ 
```

这对我有用：

```
try {
    httpRequest = new XMLHttpRequest();
    console.log("0");

    httpRequest.open(options.method, options.url, true);
    console.log("1");

    httpRequest.send();
} catch (err) {
    console.log(err.name + ': ' + err.message + ' (line ' + err.lineNumber + ')');

    return false;
}

httpRequest.onreadystatechange = function () {
    if (httpRequest.status === 404) {
        this.onreadystatechange = null;

        return false;
    }

    if (httpRequest.readyState === 2) {
        console.log("2");
    } else if (httpRequest.readyState === 3) {
        console.log("3");
    } else if (httpRequest.readyState === 4) {
        console.log("4");

        return true;
    }
}; 
```

将构造函数、打开和发送方法包装在 try...catch 语句中的原因是，您可以捕获由错误文件名或其他原因导致的任何错误。这些将在它进入 onreadystatechange 函数之前爆炸。onreadystatechange 属性仅在调用 send 方法后才被初始化。

# asp.net-mvc-3 - 如何使链接重写到同一位置并更改1个参数？

> ID：11211646
> 
> 赞同：0
> 
> 时间：2012-06-26T16:18:29.267
> 
> 标签：asp.net-mvc-3, razor

我需要创建一个链接，它要求我与另一个路线值相同的地方。

**例子**

**路由规则来自`Global.asax`**

```
routes.MapRoute(
            "News", // Route name
            "{lang}/{controller}/{action}/page-{page}", // URL with parameters
            new { lang = "pl", controller = "News", action = "Index" } // Parameter defaults
        ); 
```

**我所在的页面**

```
/pl/News/Index/page-6 
```

**我想创建链接到**

```
/en/News/Index/page-6 
```

所以我想改变`lang`参数。有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:42:36.483

首先，您需要更改路线以反映以下内容：

```
routes.MapRoute("AnyLangRoute", "{lang}/{controller}/{action]/page-{page}", new { controller = "News", action = "Index" }); 
```

您想从参数列表中删除 lang 属性，但将其保留在 URL 中。

然后你会想要使用

```
filterContext.RouteData.Values["lang"].ToString() 
```

从 routeData 中获取 {lang} 值。（注意：filterContext 是一个 ControllerContext 对象）。

所以一个网址：

```
/en/News/Index/page-6 
```

将有一个“lang”值：**en**

您可以使用该值使用全局过滤器或类似的东西将线程更改为适当的语言（请参阅*ActionFilterAttribute* - 如果您想了解更多信息）。

从记忆中做这一切，但希望它引导你朝着正确的方向前进。

# python - 似乎无法在 Python 的同一脚本中使用导入时间和导入日期时间

> ID：11211650
> 
> 赞同：14
> 
> 时间：2012-06-26T16:18:32.403
> 
> 标签：python, datetime, time, sleep

我在 Windows 上使用 Python 2.7，并且正在编写一个同时使用时间和日期时间模块的脚本。我以前做过，但是 python 似乎对加载两个模块很敏感，而且我以前使用的方法似乎不起作用。以下是我使用的不同语法以及我目前遇到的错误。

首先我试过：

```
from datetime import *
from time import *
...
checktime = datetime.today() - timedelta(days=int(2))
checktime = checktime.timetuple()
...
filetimesecs = os.path.getmtime(webgatelogdir + '/' + fn) 
file = webgatelogdir + '/' + fn
filetime = localtime(filetimesecs)
...
else: time.sleep(60) 
```

错误：

`else: time.sleep(60) AttributeError: 'builtin_function_or_method' object has no attribute 'sleep'`

然后我尝试了：

```
from datetime import *
from time import *
...
checktime = datetime.today() - timedelta(days=int(2))
checktime = checktime.timetuple()
...
filetimesecs = os.path.getmtime(webgatelogdir + '/' + fn) 
file = webgatelogdir + '/' + fn
filetime = localtime(filetimesecs)
...
#else: time.sleep(60)  # comment out time.sleep statement 
```

我没有错误，但也没有睡眠延迟。

接下来我尝试了：

```
from datetime import *
import time
...
checktime = datetime.today() - timedelta(days=int(2))
checktime = checktime.timetuple()
...
filetimesecs = os.path.getmtime(webgatelogdir + '/' + fn) 
file = webgatelogdir + '/' + fn
filetime = localtime(filetimesecs)
...
#else: time.sleep(60)  # comment out time.sleep statement 
```

错误：

`filetime = localtime(filetimesecs) NameError: name 'localtime' is not defined`

另一个修改，我试过这个：

```
import time
import datetime
...
checktime = datetime.today() - timedelta(days=int(2))
checktime = checktime.timetuple()
...
filetimesecs = os.path.getmtime(webgatelogdir + '/' + fn) 
file = webgatelogdir + '/' + fn
filetime = localtime(filetimesecs)
...
#else: time.sleep(60)  # comment out time.sleep statement 
```

错误

`checktime = datetime.today() - timedelta(days=int(2)) AttributeError: 'module' object has no attribute 'today'`

最后，我尝试了这个：

```
import time
from datetime import *
...
checktime = datetime.today() - timedelta(days=int(2))
checktime = checktime.timetuple()
...
filetimesecs = os.path.getmtime(webgatelogdir + '/' + fn) 
file = webgatelogdir + '/' + fn
filetime = localtime(filetimesecs)
...
#else: time.sleep(60)  # comment out time.sleep statement 
```

错误：

`checktime = datetime.today() - timedelta(days=int(2)) AttributeError: 'module' object has no attribute 'today'`

所以我不确定如何让这两个模块很好地发挥作用。或者我需要另一种方法来延迟脚本。

建议？或者指出我犯的错误？

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-12-31T09:19:52.570

您可以在导入时间时使用**as 。**

```
import time as t
from datetime import datetime
...
t.sleep(2) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-26T16:22:03.687

不要使用`from ... import *`——这是一种方便交互使用的语法，会导致脚本混淆。

这是一个应该工作的版本：

```
import time
import datetime
...
checktime = datetime.datetime.today() - datetime.timedelta(days=int(2))
checktime = checktime.timetuple()
...
filetimesecs = os.path.getmtime(webgatelogdir + '/' + fn) 
file = webgatelogdir + '/' + fn
filetime = time.localtime(filetimesecs)
...
#else: time.sleep(60)  # comment out time.sleep statement 
```

使用 导入模块时`import <modulename>`，您当然需要对这些模块中的所有名称使用完全限定名称

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T16:22:38.630

我的猜测是你有冲突是因为你的`from something import *`.

由于`datetime`导出一个`time`类，这可能与`time`模块冲突。

结论：不要使用`import *`;-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T16:21:22.930

永远不要使用表单的导入，`from x import *`因为你不知道你会得到什么。在这种情况下，第二次导入会从第一次导入中删除一些符号，因为它们具有相同的名称。

要么使用`import x`并限定您在该模块中使用的所有内容，要么使用 .`x.y`仅导入选定的项目`from x import y`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-26T16:25:19.700

这两个模块使用 sasme 名称定义了一些函数/类型。最好的方法是显式导入它们并使用您需要的内容：

```
import datetime
import time
datetime.datetime.today() # Datetime object for today
time.time() # Current time 
```

更一般地说，您不能只期望在`from x import *`和之间盲目切换`import x`。您需要查看每个库的文档以确定要使用的功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T16:24:57.880

当你只做 import *. 我强烈建议不要这样做。

```
import time
import datetime

.
.
.
.

time.sleep(60) 
```

如果您不想在所有功能前面加上`time.`or ，也可以执行以下操作`datetime.`

```
from datetime import X, Y
from time import Z, W

X.something()
... etc ... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-03-04T17:31:17.310

```
from time import *
import time as t
from datetime import *
import datetime as dt

secs=69
print (dt.timedelta(seconds=secs))
now = datetime.now()

#Time
current_time = now.strftime("%H:%M:%S")
print("Current Time =", current_time) 

#converting
conversion = dt.timedelta(seconds=secs)
print("Converted: ", conversion)

#sleep function
t.sleep (3)
print("DONE!") 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-01T15:13:21.650

正如上面评论中正确提到的那样，这个问题是由于：

```
from datetime import * 
```

但是我遇到了一个问题，我将它写在一个文件中并尝试运行，由于它不起作用，我从该文件中删除了整个导入语句，但是当我尝试再次运行它时，它仍然出现同样的错误。这令人惊讶，因为当一个语句根本不在文件中时，它怎么会导致错误？但是经过一些调试后，我意识到同样的语句在其他一些相互依赖的文件中，因此出现了错误。

**所以，我想说的是，如果错误仍然存​​在，请检查项目中的所有文件是否有此语句，并将它们替换为要导入的特定模块，例如：**

```
from datetime import datetime, timedelta 
```

希望这可以帮助！

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2021-08-06T18:57:09.627

### 你可以让它变得简单

```
from datetime import *

from time import * 
```

# algorithm - Cornu螺旋/样条的高速绘图算法？

> ID：11211655
> 
> 赞同：3
> 
> 时间：2012-06-26T16:18:43.623
> 
> 标签：algorithm, graphics, drawing, bresenham

有没有人见过角螺旋线（又名回旋曲线）或样条线的不错的绘图算法？对于弧线和直线，我们有 Bresenham 算法之类的东西。这适用于回旋曲线吗？

维基百科页面有这个 Sage 代码：

```
p = integral(taylor(cos(L^2), L, 0, 12), L)
q = integral(taylor(sin(L^2), L, 0, 12), L)
r1 = parametric_plot([p, q], (L, 0, 1), color = 'red') 
```

是否有可用的参数图示例代码？我的网络搜索看不到太多内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T15:16:28.740

我没有看到任何现有的高速算法。但是，我确实了解了绘制此类事物的常用方法。本质上，您递归地拆分 L，直到计算的左、中和右点足够接近可以绘制该线的直线。我能够使用 MathNet.Numerics.dll 进行集成。一些代码：

```
 public static void DrawClothoidAtOrigin(List<Point> lineEndpoints, Point left, Point right, double a, double lengthToMidpoint, double offsetToMidpoint = 0.0)
    {
        // the start point and end point are passed in; calculate the midpoint
        // then, if we're close enough to a straight line, add that line (aka, the right end point) to the list
        // otherwise split left and right

        var midpoint = new Point(a * C(lengthToMidpoint + offsetToMidpoint), a * S(lengthToMidpoint + offsetToMidpoint));
        var nearest = NearestPointOnLine(left, right, midpoint, false);
        if (Distance(midpoint, nearest) < 0.4)
        {
            lineEndpoints.Add(right);
            return;
        }
        DrawClothoidAtOrigin(lineEndpoints, left, midpoint, a, lengthToMidpoint * 0.5, offsetToMidpoint);
        DrawClothoidAtOrigin(lineEndpoints, midpoint, right, a, lengthToMidpoint * 0.5, offsetToMidpoint + lengthToMidpoint);
    }

    private static double Distance(Point a, Point b)
    {
        var x = a.X - b.X;
        var y = a.Y - b.Y;
        return Math.Sqrt(x * x + y * y);
    }

    private static readonly double PI_N2 = Math.Pow(Math.PI * 2.0, -0.5);

    public static double C(double theta)
    {
        return Integrate.OnClosedInterval(d => Math.Cos(d) / Math.Sqrt(d), 0.0, theta) / PI_N2;
    }

    public static double S(double theta)
    {
        return Integrate.OnClosedInterval(d => Math.Sin(d) / Math.Sqrt(d), 0.0, theta) / PI_N2;
    } 
```

# java - 无法在 Quartz 调度程序中获取作业列表

> ID：11211658
> 
> 赞同：4
> 
> 时间：2012-06-26T16:18:57.987
> 
> 标签：java, quartz-scheduler

我正在尝试获取特定组的所有使用 Quartz 调度程序注册的作业。这是我的一段代码

```
CustomSchdularFactory.getSchedulerInstance().getJobKeys(groupEquals(group)); 
```

这`group`是一个字符串变量，其中包含我要获取其关联作业的组的名称。在使用上面的代码时，我收到以下错误

```
The method getJobKeys(GroupMatcher<JobKey>) in the type Scheduler is not applicable for the arguments (GroupMatcher<Key<Key<T>>>) 
```

我不确定为什么会发生此错误，因为我从 Quartz 官方文档中获取了参考

[列出工作](http://quartz-scheduler.org/documentation/quartz-2.x/cookbook/ListJobs)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:09:39.857

使用 jobGroupEquals 而不是 groupEquals

```
CustomSchdularFactory.getSchedulerInstance().getJobKeys(jobGroupEquals(group)); 
```

它会为你工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T19:18:28.337

用它

```
Scheduler sched = new StdSchedulerFactory().getScheduler();

for(String group: sched.getJobGroupNames()) {
   for(JobKey jobKey : sched.getJobKeys(GroupMatcher.jobGroupEquals(group))) {
      ...
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-16T02:22:25.303

在 Quartz.NET 3.0 上，我能够让它在异步模式下工作：

```
public static async Task RunTask() {
    StdSchedulerFactory factory = new StdSchedulerFactory(System.Configuration.ConfigurationManager.AppSettings);
    IScheduler scheduler = await factory.GetScheduler();
    await scheduler.Start();

    IReadOnlyCollection<string> jgn = await sch.GetJobGroupNames(new System.Threading.CancellationToken());
    foreach (string jno in jgn)
    {
        IReadOnlyCollection <JobKey> jk = await sch.GetJobKeys(jobGroupEquals(jno));
        foreach (JobKey j in jk)
        {
            var currentJob = await sch.GetJobDetail(j);

            //print the properties of the current job
            Console.WriteLine(currentJob.Key.Name);
            Console.WriteLine(currentJob.Description);
        }                   
    }
}   

private static GroupMatcher<JobKey> jobGroupEquals(string jno)
{
    return GroupMatcher<JobKey>.GroupEquals(jno);
} 
```

# c# - Path.GetTempPath() 返回的路径是否保持不变？

> ID：11211662
> 
> 赞同：7
> 
> 时间：2012-06-26T16:19:21.593
> 
> 标签：c#, .net, temp

我有一个 Web 服务，它调用另一个可执行文件，它获取文件列表并将它们存储在一个临时位置，然后由 Web 服务读取。

我以为我会使用系统的临时文件夹，发现我可以使用`System.IO.Path.GetTempPath`函数来获取临时文件夹并将我的文件存储在这里。但是当我检查这个函数返回的输出时，它给了我

> C:\Users\用户名\AppData\Local\Temp\15\

我担心路径尽头的\15。这是否意味着 GetTempPath 返回的临时文件夹不是恒定的并且不断变化？我需要它保持不变，因为我需要 Web 服务从可执行文件输出的临时文件中读取

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:22:19.410

[文档](http://msdn.microsoft.com/en-us/library/system.io.path.gettemppath.aspx)说：

> 此方法按以下顺序检查环境变量是否存在，并使用找到的第一个路径：
> 
> 1.TMP环境变量指定的路径。
> 
> 2.  TEMP 环境变量指定的路径。
>     
>     
> 3.  USERPROFILE 环境变量指定的路径。
>     
>     
> 4.  Windows 目录。

因此，除非您更改环境，否则结果是稳定的。

（如果您作为服务帐户运行，则可能会发生环境变化，而该帐户从未进行过交互式登录），它具有默认的 %SystemRoot%\Temp 文件夹。如果有人使用此服务帐户登录到服务器，则会创建一个配置文件并且临时路径将更改）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T08:42:17.970

即使这篇文章有点老，我也想分享知识:-)

在终端服务器上运行时，Windows 的默认行为是为与该服务器的每个连接创建一个单独的临时子文件夹。有一些方法可以影响这一点，但在你想要这样做之前，我建议将你的文件放在其他地方。

（[http://blogs.msdn.com/b/oldnewthing/archive/2011/01/25/10119675.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2011/01/25/10119675.aspx)）

# c# - 如何在 C# 中的一段文本中搜索短语？

> ID：11211681
> 
> 赞同：0
> 
> 时间：2012-06-26T16:20:20.393
> 
> 标签：c#, string, linq, full-text-search

例如，我有一个文本列表，每个文本看起来像这样：

> 我们更喜欢可以回答的问题，而不仅仅是讨论。提供详细信息。分享你的研究。如果你的问题是关于这个网站的

我想通过文本列表搜索`can be answered`并将上面的文本作为具有`can be answered`. 我该怎么做？

我试过`Contains()`了，但它什么也没返回。我的代码如下所示：

```
IEnumerable<App_ProjectTask> temp;
if (!String.IsNullOrEmpty(query))
{
    temp = dc.App_ProjectTasks.Where(x => x.Title.Contains(query) || x.Description.Contains(query));
    if (temp.Count() > 0)
    {
        results = temp.ToList();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:30:05.223

```
String text = "We prefer questions that can be answered, "+
               "not just discussed.Provide details. Share your research."+
               "If your question is about this website";
if (text.Contains("can be answered"))
{
    Console.WriteLine("Text found");
} 
```

上面的代码输出`Text found`.

要获取所有`String`包含文本的 s，请执行以下操作：

```
var query =
    from text in yourListOfTexts
    where text.Contains("can be answered")
    select text; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T16:27:19.390

包含应该工作。

```
var strList = new List<String>();
string itemSearch = "string to search for";

foreach (string str in strList)
{
    if(str.Contains(itemSearch))
    {
        return str;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:22:34.013

这对我有用：这基本上是你所做的，但我展示了我的班级..

```
 private void WriteLine(String text)
    {
        textBox1.Text += text + Environment.NewLine;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        List<TestClass> list = new List<TestClass>();

        list.Add(new TestClass { Title = "101 unanswered questions", Description = "There are many questions which go unanswered, here are our top 1001" });
        list.Add(new TestClass { Title = "Best of lifes questions", Description = "Many of lifes questions answered" });
        list.Add(new TestClass { Title = "Top 10 smart answers", Description = "Top 10 smart answers for common interview questions" });

        var results =
            list.Where(x => x.Description.Contains("answered questions") | x.Title.Contains("answered questions"));
        foreach (TestClass res in results)
        {
            WriteLine(String.Format("Title: {0}, Desc: {1}", res.Title, res.Description));
        }
    }
}

public class TestClass
{
    public String Title;
    public String Description;
    public String Contents;

    public TestClass()
    {
        Title = "";
        Description = "";
        Contents = "";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T20:11:10.223

有一些提到使用 ToLower() 作为 contains 方法为了提高性能，您应该使用 string.IndoexOf("string", StringComparison.OrdinalIgnoreCase)

也就是说，如果 OP 需要他的搜索不区分大小写

[不区分大小写的“包含（字符串）”](https://stackoverflow.com/questions/444798/case-insensitive-containsstring)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-26T16:35:54.147

尝试：

```
 IEnumerable<App_ProjectTask> temp;
if (!String.IsNullOrEmpty(query))
{
temp = dc.App_ProjectTasks.Where(x => x.Title.ToLower().Contains(query.ToLower()) || x.Description.ToLower().Contains(query.ToLower()));
if (temp.Count() > 0)
{
    results = temp.ToList();
}
} 
```

# java - 这两种使用按钮和 OnClickListener 的方式有什么区别？

> ID：11211682
> 
> 赞同：1
> 
> 时间：2012-06-26T16:20:20.827
> 
> 标签：java, android, onclicklistener

我有一本非常糟糕的书，所以我不确定他们使用这两种形式的理由。

第一种方式是这样的

```
 Button button = (Button) findViewById(R.id.btnButton)

 button.setOnClickListener(new OnClickListener() {
//code code code } 
```

然后我们的书想要使用全局变量而不是局部变量，所以它随机开始使用不同的方式来处理事情

```
Button btButton;
//Done as Global Variable.

btButton = (Button) findViewById(R.id.btnButton);
btButton.setOnClickListener(bButton);

Button.OnClickListener bButton = new Button.OnClickListener(){
//code } 
```

正是这样的事情让我的书很糟糕，这也是我不会购买下一期的原因之一。我讨厌它只是在没有任何真正原因的情况下改变它做事的方式。那么有人能真正告诉我这里的区别吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:25:42.840

两者都是一样的..第一个使用匿名内部类，第二个创建listner对象并将其传递给方法..

第二种方法具有相同侦听器实例的可重用性的优点。但首先是首选，因为通常我们为每个按钮都有不同的侦听器

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T16:29:12.947

正如每个人所说，没有区别——但没有人解释原因。

`Button`延伸`View`。

当您使用`onClickListener`时，您使用的是 中定义的那个`View`。几乎总是，这个会起作用——它不会与`Dialogs`，也许还有其他一些类一起使用。

如果您明确地说`Button.onClickListener`，您正在引用类`onClickListener`中的定义`Button`，并且由于`Button`extends `View`，这与使用泛型相同`onClickListener.`

还有内部匿名与显式，但这更多是一种偏好。使用静态 onClickListener 将获得比内部匿名更好的性能，这仅仅是因为需要的垃圾收集更少，但除非您有 30 个左右的匿名内部侦听器，否则您不会注意到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T16:24:15.773

你没有什么可担心的。他们都做同样的事情。在第一个示例中，当您将其设置为按钮时，您将创建 OnClickListener 的实例。

在第二种情况下，onClickListener 已经预先创建，并且您正在传递对它的引用。

不同的人喜欢以不同的方式来做这件事，他们让自己拥有不同的功能。

显然，通过在第二个示例中将其设置为等于 bButton，您可以稍后对其进行操作或在其他按钮侦听器中使用它，而您没有第一个示例的副本来执行此操作。

因此，如果您想对多个按钮使用完全相同的代码，第二个选项将允许您将侦听器添加到所有按钮。

希望现在看起来更清楚一点

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T16:25:15.440

您发布的两个示例之间没有真正的区别。您的书可能没有涵盖这一点，因为这更像是一个 Java 问题，而不是 Android。第一个你只是动态声明你的 OnClickListener 实例，第二个你静态声明它然后引用它。在执行过程中，它们的行为完全相同。

例如，如果您有多个按钮，则可以使用第二个示例。您可以将 OnClickListener 传递给每个按钮，然后处理从 OnClickListener 中按下的按钮，而不是为每个按钮设置单独的 OnClickListener。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-26T16:33:41.010

从技术上讲，当您编写时：

```
button.setOnClickListener(new OnClickListener() { ... }); 
```

它将在编译时转换为以下代码：

```
Button.OnClickListener anonymous_listener = new Button.OnClickListener() { ... };
button.setOnClickListener(anonymous_listener); 
```

您提供的第二个示例很糟糕。它存储了对 a 的无用引用，除了在您的方法`OnClickListener`中之外，它永远不会在其他地方使用。`onCreate()`它只丢失了 8 个字节左右，但仍然没用，应该定义为局部变量。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-26T16:35:02.143

```
button.setOnClickListener(new OnClickListener() 
```

假设它动态创建了一个侦听器对象并将其传递给您的**setOnClickListener**。这种风格在 java 中被称为匿名内部类。第二个很简单。

```
Button.OnClickListener bButton = new Button.OnClickListener(){ 
```

**使用Button.OnClickListener**的原因是**OnClickListener**在**View Class**中。并且**Button 类从 View 继承它**。所以为了避免 import 语句，我们直接使用**了 Button.OnClickListener**。

# slickgrid - 将 slickgrid 格式应用于特定行

> ID：11211683
> 
> 赞同：6
> 
> 时间：2012-06-26T16:20:24.683
> 
> 标签：slickgrid

是否可以将格式应用于 Slickgrid 中的特定行？

我知道您可以通过列应用格式规则 - 但我需要将格式规则应用于一行。

即我的网格上有一个“总计”行 - 所以我想让该行加粗或从其他行中脱颖而出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T16:55:28.387

简单 - [https://github.com/mleibman/SlickGrid/wiki/Providing-data-to-the-grid](https://github.com/mleibman/SlickGrid/wiki/Providing-data-to-the-grid)。

简而言之，根据行号实现`getItemMetadata`并指定覆盖。`formatter`这正是 slick.groupitemmetadataprovider.js 与 DataView 结合使用时所做的。

# c++ - 链接 c++ 和 fortran 源代码时的未定义符号 _Z7_getcwdPci

> ID：11211684
> 
> 赞同：2
> 
> 时间：2012-06-26T16:20:27.113
> 
> 标签：c++, fortran, undefined, symbols, ld

我正在尝试将用 Microsoft Visual Studio（c、c++ 和 fortran）编写的程序移植到 mac OSX。在这个程序中有一个由 fortran 源代码调用的 c++ 函数。基本上它的插入 c++ 和 fortran。我已将 C++ 函数包裹在`"extern C"`括号中，通过互联网告诉我这是正确的方法。但是，链接器仍在抱怨此 c++ 函数中的未定义符号...

> ```
> Undefined symbols:
>   "__Z7_getcwdPci", referenced from:
>       _bisimr_ in bisimR.o
> ld: symbol(s) not found 
> ```

如果您通过互联网查看，`getcwd`是在头文件中定义的函数，`"direct.h"`. 它不是 mac OS 的一部分，仅在 Windows 系统中固有。据我所知，我能够在互联网上找到该文件，该文件似乎是 Windows“direct.h”文件。

现在我们已经完成了上下文，这是我的问题

鉴于我收到错误，可能是我的`direct.h`文件不是 Windows 的正确头文件吗？或者是名称修改，从 C++ 到 fortran，抛出这个错误？

笔记：

*   我可以通过编译阶段，它是引发此错误的库的链接。
*   `bisimr_`是c++函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:05:01.930

据我了解您的问题，您尝试通过从*Windows*系统*复制*头文件来构建程序。到此为止吧？这种方法注定会失败：头文件的存在将为*编译器*提供有关*Windows*系统上可用函数的信息，但*链接器*会抱怨，因为列出的库都没有定义所述名称的函数。

 ***您应该只使用系统附带的头文件，或者您已经为您的系统成功编译的第三方库。仅源代码的标头（特别是模板库）也可以。使用任何其他标头只是询问链接器错误。

名称出现错误的事实表明编译器认为它是一个可能重载的 C++ 函数，因此它将在名称中包含有关参数类型的详细信息。`#include`可以通过将语句包含在`extern "C"`块中来避免该方面。对于 windows 文件`direct.h`，这不会解决上述问题，但也许它会对`unistd.h`您有用：

```
extern "C" {
#include <unistd.h>
} 
```***

# c# - 从每组实体框架中选择前 1 个

> ID：11211688
> 
> 赞同：1
> 
> 时间：2012-06-26T16:20:49.503
> 
> 标签：c#, asp.net, entity

我正在尝试使用 mac 地址对设备列表进行分组。我已经在 linqpad 中尝试过，它成功运行。但是，当我尝试在实体框架中运行它时，我收到一条错误消息“不支持指定的方法”。

这是我的代码：

```
var db = new centraliteEntitiews();

var network = from n in db.infoes
              where (n.state != 2) || (n.nodeid != 0)
              orderby n.time
              group n by n.mac into g
              select g.FirstOrDefault();
return View(network); 
```

我希望它返回要发送到我的视图的对象列表。

MacAddress 状态 nodeid 正常运行时间等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:43:39.027

尝试这个...

```
var network = db.infoes
  .Where(n => (n.state != 2) || (n.nodeid != 0))
  .GroupBy(n => n.mac)
  .SelectMany(g => g.OrderBy(n => n.time).First()) // sort within groups instead of all inputs, select info ungrouped (1 from each)
  .ToList() // to memory
  .SortBy(n => n.time) // sort results (between groups)
  .ToList(); // to memory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:22:21.590

假设它`FirstOrDefault()`不受支持，您可以尝试将其更改为`First()`. 毕竟，您*知道*每个组中至少有一个元素，否则该组将不存在。

# compiler-construction - B 语言限制（表格大小）

> ID：11211692
> 
> 赞同：1
> 
> 时间：2012-06-26T16:20:54.523
> 
> 标签：compiler-construction, limit, b

官方 B 教程说如果发生错误，编译器会给出两个字母。字母组合包括：

*   `>c`- 案例表溢出
*   `>e`- 表达式表溢出
*   `>i`- 标签表溢出
*   `>s`- 符号表溢出

我不想在我的 B 编译器中使用 malloc，而是想静态分配表。

外壳、标签和符号表的最小尺寸是多少？

# perforce - Perforce：如何备份其他用户挂起的更改列表文件

> ID：11211695
> 
> 赞同：1
> 
> 时间：2012-06-26T16:21:01.703
> 
> 标签：perforce

我想备份用户（离开公司）的待处理更改列表中的所有文件，请告诉我是否有任何脚本可以执行此操作或任何其他方式来执行该活动。

提前致谢。

-卡提克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:54:32.107

早些时候，我们使用 btgrab 命令仅根据 Windows 版本的 perforce 中的待处理更改列表编号来抓取其他人的更改。不幸的是，我现在没有那个脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:27:05.183

您可以访问他们的工作站吗？如果是这样，您可以获取他们正在处理的文件。除非他们提交或搁置他们的更改，否则他们正在进行的工作的唯一副本就在他们的工作站上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:45:45.493

签出的文件是在机器上本地编辑的，而不是在服务器上。所以他们唯一的位置是在工作站上。除非用户足够好来搁置更改。

# google-earth-plugin - 使用 GoogleEarthAPI 时无法将“区域”对象添加到“文件夹”中

> ID：11211697
> 
> 赞同：0
> 
> 时间：2012-06-26T16:21:08.877
> 
> 标签：google-earth-plugin

我正在为我的论文构建一个地理可视化应用程序，使用谷歌的工具，最著名的是谷歌地球 api。我正在尝试将一些区域与我的地标组合，以便我可以创建不同级别的细节，以便当相机足够远时出现一些地标（代表区域的较大多边形），而当相机足够远时出现其他较小的多边形（代表较小区域）相机放大（较大的会消失）。

我知道理论上要实现这一点，我必须将地标括在区域中并设置最小和最大像素值，但是当我尝试创建区域本身时，我的问题就开始了。

更具体地说，我成功创建了该区域，但是当我尝试将其附加到文件夹中时出现错误。错误消息对我没有多大帮助，因为它来自包含其余代码的 init 回调函数。

“未捕获的错误：在 NPObject 上调用方法时出错。”

有问题的代码部分如下：

```
 //Try to create region
                    //experimental
                    var folder = ge.createFolder('');
                    var region = ge.createRegion('');
                    var box = ge.createLatLonAltBox('');
                    box.setAltBox(<?= $latitude + 0.035 ?>, <?= $latitude - 0.035 ?>, <?= $longitude + 0.035 ?>, <?= $longitude - 0035 ?>, 0.0, 0.0, 0.0, ge.ALTITUDE_CLAMP_TO_GROUND);
                    region.setLatLonAltBox(box);
                    var lod = ge.createLod('');
                    lod.setMinLodPixels(20.0);
                    region.setLod(lod);

                    //---------------------

                    // Create the placemark.
                    //and add it to the map
                    var placemark = makeSimplePlacemark(<?= $latitude ?>, <?= $longitude ?>,  '<?= $location ?>');
                    folder.getFeatures().appendChild(region);
                    folder.getFeatures().appendChild(placemark); 
                    ge.getFeatures().appendChild(folder); 
```

如果我删除以下行：“folder.getFeatures().appendChild(region);” 它工作正常，但我需要区域或其他解决方案 perhups。而且我几乎可以肯定，问题很简单，我错过了... :(

任何帮助表示赞赏。提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:26:28.700

我不知道这是否可行，但只是为了好玩，尝试在代码中使用任意名称而不是 '' 进行所有四个 create* 调用。

```
var folder = ge.createFolder('test1');
var region = ge.createRegion('test2');
var box = ge.createLatLonAltBox('test3');
box.setAltBox(<?= $latitude + 0.035 ?>, <?= $latitude - 0.035 ?>, <?= $longitude + 0.035 ?>, <?= $longitude - 0035 ?>, 0.0, 0.0, 0.0, ge.ALTITUDE_CLAMP_TO_GROUND);
region.setLatLonAltBox(box);
var lod = ge.createLod('test4'); 
```

在将 '' 作为参数传递给 create* 方法时，我收到了您之前提到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:01:45.430

我对将 KML 加入 Google 地球插件有另一个想法。我遇到了类似的问题，试图找出哪些方法会在 KML 层次结构中的哪些点添加哪些对象。在我的应用程序中，通过使用将我想要的 KML 编写为字符串的代码，然后使用 parseKML 方法，我完全可以绕过 API 的 KML 结构部分：

```
var myKML = '';
//build kml text and assign it to myKML
built_track = ge.parseKml(myKML);
ge.getFeatures().appendChild(built_track); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:06:42.640

毕竟我找到了答案。我想，睡个好觉总是有帮助的。

尝试使用 append 将区域添加到文件夹项作为子节点似乎是错误的。我认为我应该这样做，因为在 kml 格式中，区域和地标节点都嵌套在同一级别的文件夹节点中。

但似乎通过插件 API 有一个专用的 setRegion(kmlRegion) 成员用于此目的。好消息是这个成员也存在于 kmlPlacemarks 中，所以我什至不需要创建文件夹（至少出于这个原因）。

正确的代码是：

```
 //Try to create region          
                    //experimental
                    var region = ge.createRegion('');
                    var box = ge.createLatLonAltBox('');
                    box.setAltBox(<?= $latitude + 0.035 ?>, <?= $latitude - 0.035 ?>, <?= $longitude + 0.035 ?>, <?= $longitude - 0.035 ?>, 0.0, 0.0, 0.0, ge.ALTITUDE_CLAMP_TO_GROUND);
                    region.setLatLonAltBox(box);
                    var lod = ge.createLod('');
                    lod.set(128,-1,64,256);
                    region.setLod(lod);

                    //---------------------

                    // Create the placemark.
                    //and add it to the map
                    var placemark = makeSimplePlacemark(<?= $latitude ?>, <?= $longitude ?>,  '<?= $location ?>');
                    placemark.setRegion(region);
                    ge.getFeatures().appendChild(placemark); 
```

一开始我是怎么想念那个成员的……我应该经常停下来休息一下：/

# opengl - 具有浮动纹理钳位值的帧缓冲区对象

> ID：11211698
> 
> 赞同：3
> 
> 时间：2012-06-26T16:21:10.330
> 
> 标签：opengl, framebuffer

**我已经检查了这个类似的问题，但这些建议并没有解决我的问题：[Low precision and clamp when writing to floating point FBO](https://stackoverflow.com/questions/10950743/low-precision-and-clamping-when-writing-to-floating-point-fbo)**。

我正在使用帧缓冲区对象作为渲染目标来渲染浮动图像。但是，glReadPixels 读取的值被限制在 0 和 1 之间。如果我尝试使用此范围内的归一化值渲染图像，它可以工作，但此范围之外的值被限制为 1 或 0。遵循代码的某些部分。

以下是我创建附加到 FBO 的纹理的方法：

```
 glGenTextures(1, &color_tex); 
    glBindTexture(GL_TEXTURE_RECTANGLE_ARB, color_tex);
    glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MIN_FILTER,
        GL_NEAREST);
    glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MAG_FILTER,
        GL_NEAREST);
    glTexImage2D(GL_TEXTURE_RECTANGLE_ARB, 0, GL_RGB32F_ARB, ResX, ResY, 0,
        GL_RGB, GL_FLOAT, NULL); 
```

画完之后我是怎么读的：

```
 glReadBuffer(GL_COLOR_ATTACHMENT0_EXT);
    glReadPixels(0, 0, ResX, ResY, GL_RGB, GL_FLOAT, data); 
```

我在图像中画了一个三角形，使用

```
 glColor3f(0.5f, 2.0f, -0.5f); 
```

并且像素值在读取缓冲区中显示为**(0.5f, 1.0f, 0.0f) 。**

如何返回超出此范围的值？

**遵循我的代码的简化版本（我保留了深度缓冲区，因为我在原始版本中使用了它）：**

***附言。我根据答案更正了下面的代码。现在可以了。***

```
#include <GL/glew.h>
#include <GL/glut.h>

#include <iostream>
#include <stdio.h>
#include <stdlib.h>

#define WINDOW_WIDTH                    800
#define WINDOW_HEIGHT                   600

bool initGL(int argc, char *argv[])
{
    // initialize GLUT and glexts
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowSize(WINDOW_WIDTH, WINDOW_HEIGHT);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("FBO");

    GLenum err = glewInit();
    if (GLEW_OK != err)
    {
        /* Problem: glewInit failed. */
        printf("Error: %s\n", glewGetErrorString(err));
        return 0;
    }

    if (!GLEW_EXT_framebuffer_object)
    {
        printf("Error: no extension GL_EXT_framebuffer_object.");
        return 0;
    }

    if (!GLEW_ARB_color_buffer_float)
    {
        printf("Error: no extension ARB_color_buffer_float.");
        return 0;
    }

    glClampColor(GL_CLAMP_READ_COLOR, GL_FALSE);
    glClampColor(GL_CLAMP_VERTEX_COLOR, GL_FALSE);
    glClampColor(GL_CLAMP_FRAGMENT_COLOR, GL_FALSE);

    return 1;
}

void glErrorCheck()
{
    int errCode;
    if ((errCode = glGetError()) != GL_NO_ERROR)
    {
        printf("Failure in OpenGL %d", errCode);
        exit(0);
    }
}

bool renderFBO()
{

    GLenum status;
    GLuint color_tex, depth_rb, fb;

    int ResX, ResY;

    ResY = 4;
    ResX = 4;

    float *data;

    //gen renderbuffer
    glGenRenderbuffers(1, &depth_rb);
    glErrorCheck();
    // initialize depth renderbuffer
    glBindRenderbuffer(GL_RENDERBUFFER, depth_rb);
    glErrorCheck();
    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT32, ResX,
            ResY);

    glErrorCheck();

    // make a texture
    glGenTextures(1, &color_tex);
    // initialize texture that will store the framebuffer image (BGRA type)
    glBindTexture(GL_TEXTURE_RECTANGLE_ARB, color_tex);
    glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MIN_FILTER,
            GL_NEAREST);
    glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_MAG_FILTER,
            GL_NEAREST);
    glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_WRAP_S, GL_CLAMP);
    glTexParameteri(GL_TEXTURE_RECTANGLE_ARB, GL_TEXTURE_WRAP_T, GL_CLAMP);
    glTexImage2D(GL_TEXTURE_RECTANGLE_ARB, 0, GL_RGB32F_ARB, ResX, ResY, 0,
            GL_RGB, GL_FLOAT, NULL);
    glErrorCheck();

    // gen the framebuffer object
    glGenFramebuffers(1, &fb);
    // bind the framebuffer, fb, so operations will now occur on it
    glBindFramebuffer(GL_FRAMEBUFFER, fb);

    // bind this texture to the current framebuffer obj. as color_attachment_0
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,
            GL_TEXTURE_RECTANGLE_ARB, color_tex, 0);
    glErrorCheck();

    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT,
            GL_RENDERBUFFER, depth_rb);
    glErrorCheck();

    //check framebuffer status
    status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
    if (status != GL_FRAMEBUFFER_COMPLETE)
    {
        glBindFramebuffer(GL_FRAMEBUFFER, 0);
        {
            printf("Failure in OpenGL Framebuffer %d", status);
            return 0;
        }
    }
    glErrorCheck();

    //render to GL_TEXTURE_2D
    glBindFramebuffer(GL_FRAMEBUFFER, fb);
    glClearColor(0.0, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glViewport(0, 0, ResX, ResY);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0, (float) ResX, 0.0, (float) ResY, -1.0, 1.0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glBegin(GL_TRIANGLES);

    printf("Original color: %f %f %f\n", 0.5f, 2.0f, -0.5f);

    glColor3f(0.5f, 2.0f, -0.5f);

    glVertex3f(0.0f, 0.0f, 0.0f);
    glVertex3f((float) ResX, 0.0f, 0.0f);
    glVertex3f((float) ResX, (float) ResY, 0.0f);

    glEnd();

    // read framebuffer
    glReadBuffer(GL_COLOR_ATTACHMENT0);
    glErrorCheck();

    // allocate memory for texture data
    data = new float[ResX * ResY * 3];
    if (data == NULL)
    {
        printf("Out of memory\n");
        return false;
    }

    //glClampColor(GL_CLAMP_FRAGMENT_COLOR, GL_FALSE);
    glClampColor(GL_CLAMP_READ_COLOR, GL_FALSE);

    glReadPixels(0, 0, ResX, ResY, GL_RGB, GL_FLOAT, data);
    glErrorCheck();

    //print the last pixel of the buffer
    int i = ResX * ResY - 1;
    printf("Buffer color: %f %f %f\n", data[i], data[i + 1], data[i + 2]);

    // Re-enable rendering to the window
    glBindFramebuffer(GL_FRAMEBUFFER, 0);
    glErrorCheck();

    //deallocate data
    delete[] data;

    //delete buffers
    glDeleteTextures(1, &color_tex);
    glDeleteRenderbuffers(1, &depth_rb);
    glDeleteFramebuffers(1, &fb);
    glErrorCheck();

    return true;
}

int main(int argc, char **argv)
{

    if (!initGL(argc, argv))
    {
        printf("Failure during GLUT/GLEXT initialization.");
        return 0;
    }

    if (!renderFBO())
        printf("Fail!\n");

    printf("End!\n");
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:56:35.560

在你的函数中做一整套`glClampColor()`操作：`initGL()`

```
glClampColor(GL_CLAMP_READ_COLOR, GL_FALSE);
glClampColor(GL_CLAMP_VERTEX_COLOR, GL_FALSE);
glClampColor(GL_CLAMP_FRAGMENT_COLOR, GL_FALSE); 
```

在我的系统上，我只需要`GL_CLAMP_VERTEX_COLOR`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:28:11.027

您必须使用[`glClampColor`](http://www.opengl.org/wiki/GLAPI/glClampColor)来声明您读取的颜色是否`glReadPixels`会被钳位。

请注意，这仅用于*读取*颜色。片段着色器写入的内容将始终被解除限制。

# c# - 尝试在 ListBox 中向下滚动时垂直滚动条“跳跃” - C#

> ID：11211699
> 
> 赞同：1
> 
> 时间：2012-06-26T16:21:15.087
> 
> 标签：c#, listbox, scrollbar

我目前正在制作一个比较两个文本文件的简单 Windows 窗体应用程序。该程序将每个文本文件加载到 ListBox 中，然后突出显示它们的第一个区别。我唯一剩下的问题与垂直滚动条有关 - 每次您有一个大文本文件（大约 10000 页）时，滚动条都不允许您滚动到文档的末尾（滚动条跳回顶部到每次都没有特定的位置）。我相信这是由于我使用 DrawItem 来实现高亮效果。下面是两个代码片段，应该足以让有人指出我正确的方向，如果没有，我很乐意发布更多内容。第一个是点击“检查”按钮比较两个文本文件的代码，第二个是DrawItem：

第一个代码片段：

```
 private void checkButton_Click(object sender, EventArgs e)
    {
        done = false;
        one = 0;
        two = 0;

        try
        {
            var file = File.OpenText(fone.Text);
        }
        catch
        {
            MessageBox.Show("Failed to open:" + fone.Text + ".");
            return;
        }

        try
        {
            var file2 = File.OpenText(ftwo.Text);
        }
        catch
        {
            MessageBox.Show("Failed to open:" + ftwo.Text + ".");
            return;
        }

        string[] msglines;

        msglines = System.IO.File.ReadAllLines(fone.Text);

        foreach (string s in msglines)
        {
            foneBox.Items.Add(s);
            if (TextRenderer.MeasureText(s, myFont).Width > one)
            {
                one = TextRenderer.MeasureText(s, myFont).Width;
            }
        }

        foneBox.HorizontalExtent = one;

        string[] msglines2;

        msglines2 = System.IO.File.ReadAllLines(ftwo.Text);

        foreach (string s in msglines2)
        {
            ftwoBox.Items.Add(s);
            if (TextRenderer.MeasureText(s, myFont).Width > two)
            {
                two = TextRenderer.MeasureText(s, myFont).Width;
            }
        }

        ftwoBox.HorizontalExtent = two;
        int i = 0;

        if (foneBox.Items.Count == ftwoBox.Items.Count)
        {
            while (i < foneBox.Items.Count)
            {
                if (foneBox.Items[i].ToString() == ftwoBox.Items[i].ToString())
                {
                    i++;
                }
                else
                {
                    MessageBox.Show("Files are not equal. The first difference has been highlighted.");
                    done = true;
                    index = i;
                    foneBox.SelectedIndex = i;
                    ftwoBox.SelectedIndex = i;
                    break;
                }
                if (i == foneBox.Items.Count && done==false)
                {
                    MessageBox.Show("Files are equal.");
                }
            }
            i = 0;
        }
        else
        {
            MessageBox.Show("Files are not equal. The files are a different size.");
        }

        foneBox.Focus();
        ftwoBox.Focus();

    } 
```

第二个代码片段：

```
 private void foneBox_DrawItem(object sender, DrawItemEventArgs e)
    {

        myColor = Color.Black;
        myFont = new Font(e.Font, FontStyle.Regular);
        using (Brush brush = new SolidBrush(myColor))
        {
            if (e.Index == index && done == true)
            {
                e.Graphics.FillRectangle(new SolidBrush(Color.Yellow), e.Bounds);
                e.Graphics.DrawString(foneBox.Items[e.Index].ToString(), myFont, brush, e.Bounds);
            }
            else
            {
                e.DrawBackground();
                e.Graphics.DrawString(foneBox.Items[e.Index].ToString(), e.Font, new SolidBrush(e.ForeColor), e.Bounds);
            }
        }
    } 
```

任何帮助将不胜感激。谢谢你。

# ios - Objective c 块会保留 UI 自动释放问题吗？

> ID：11211700
> 
> 赞同：0
> 
> 时间：2012-06-26T16:21:16.477
> 
> 标签：ios, user-interface, block, autorelease

我知道目标 C 将保留`localVariable`，

```
id localVariable = instanceVariable;

dispatch_async(queue, ^{
    // localVariable is used by value, localVariable is retained (not self)
    doSomethingWithObject(localVariable);
}); 
```

但是这种保留只是在触发块时发生？如果是这样，虽然它`localVariable`是一个 UI 对象，例如`UIViewController`它可能由自动释放池控制，但如果我只是创建一个`UIViewController`由自动释放池管理而不保留或使用它，当一个事件循环完成时，它将被释放，然后在块内，我不能用这个`UIViewController`了？我必须在块外手动保留它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:57:57.287

不，`localVariable`将在创建块时由块保留。

# asynchronous - 是否可以在 webmethod asmx 服务中使用 async/await

> ID：11211701
> 
> 赞同：8
> 
> 时间：2012-06-26T16:21:16.557
> 
> 标签：asynchronous, asmx, webmethod, async-await

我试图弄清楚，但现在没有成功。是否可以在 webmethod asmx 服务中使用 async/await ？到目前为止，我发现 async/await 只能在 WCF 服务方法（休息或其他）中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-14T23:07:40.410

这是一个坏主意。您基本上是在尝试将现代语言功能与传统技术结合使用——当 .asmx 被引入时，异步服务的概念还没有真正建立起来。

答案可能就在这里：

[有什么方法可以处理 ASMX 服务后面的 async/await 吗？](https://stackoverflow.com/questions/18622372/is-there-some-way-to-handle-async-await-behind-an-asmx-service)

我会说坚持使用 WCF 或 WebAPI。

# sql - 如何在 t-sql 中从硬盘读取文件名

> ID：11211704
> 
> 赞同：1
> 
> 时间：2012-06-26T16:21:28.020
> 
> 标签：sql, sql-server, tsql

我的硬盘里有成千上万张照片。所有照片文件名由 4 个参数组成：

```
'7 digit number ' + '-' + '3 digit number ' + '.gif' 
```

例如 ：`1000091-356.gif`

我想知道如何编写查询以使用`3 digit number`文件名作为参数来更新我的表，该表的主键与`7 digit number`文件名匹配。

换句话来说，查询的行为就像：`update myTable set col2 = 356 where col1=1000091`对于所有照片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:28:50.013

首先尝试将您的文件名放入表格中（使用下面的脚本）

```
CREATE TABLE dirList (
  id int identity(1,1),
  line nvarchar(1000)
)
GO;

INSERT INTO dirList (line) EXEC xp_cmdshell 'dir C:\PathToMyPhotos'

SELECT * FROM dirList;
WITH CTE AS (
  SELECT
    id,
    SUBSTRING(line,1,17) [date],
    SUBSTRING(line,18,19) sizeordir,
    SUBSTRING(line,37,100) name
  FROM dirList
  WHERE id > (
    SELECT MIN(id) FROM dirList WHERE line LIKE '%<DIR>%..%'
  ) AND id < (SELECT MAX(id) - 2 FROM dirList)
)
SELECT
  id,
  [date],
  isDirectory = CASE WHEN sizeordir LIKE '%<DIR>%' THEN 1 ELSE 0 END,
  isFile = CASE WHEN sizeordir LIKE '%<DIR>%' THEN 0 ELSE 1 END,
  name
FROM cte 
```

现在您可以使用以下命令查询文件名：

```
declare @Lookup varchar(3)
set @Lookup = '123'

select name
from dirList
where isFile = 1 and substring(name, len(name)-7,3) = @Lookup 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:28:10.853

您必须利用 sp_OACreate 和 FileSystemObject 的强大功能才能从本地计算机读取文件名。

```
EXECUTE @hr = sp_OACreate  'Scripting.FileSystemObject' , @objFileSystem OUT 
```

这是一篇详细解释这一点的文章。

[http://www.simple-talk.com/sql/t-sql-programming/reading-and-writing-files-in-sql-server-using-t-sql/](http://www.simple-talk.com/sql/t-sql-programming/reading-and-writing-files-in-sql-server-using-t-sql/)

* * *

如果您真正需要的只是文件名，那么 FSO 可能对您的需要来说太强大了。我几乎忘记了 xp_cmdshell，它非常适合像“DIR”这样的小工作 - 请参阅 Mangist 的回答。

# linux - 如何为 wget 设置代理？

> ID：11211705
> 
> 赞同：266
> 
> 时间：2012-06-26T16:21:29.860
> 
> 标签：linux, proxy, wget

我想`wget`使用代理下载一些东西：

```
HTTP Proxy: 127.0.0.1
Port: 8080 
```

代理不需要用户名和密码。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：493
> 
> 时间：2012-06-26T16:27:12.087

对于系统的所有用户，通过`/etc/wgetrc`或 仅对于带有`~/.wgetrc`文件的用户：

```
use_proxy=yes
http_proxy=127.0.0.1:8080
https_proxy=127.0.0.1:8080 
```

或通过`-e`URL 后面的选项：

```
wget ... -e use_proxy=yes -e http_proxy=127.0.0.1:8080 ... 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-09-10T14:55:58.743

输入命令行：

```
$ export http_proxy=http://proxy_host:proxy_port 
```

对于经过身份验证的代理，

```
$ export http_proxy=http://username:password@proxy_host:proxy_port 
```

然后运行

```
$ wget fileurl 
```

对于 https，只需使用 https_proxy 而不是 http_proxy。您也可以将这些行放在您的 ~/.bashrc 文件中，这样您就不需要每次都执行此操作。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-06-26T16:26:01.590

以下可能的配置位于`/etc/wgetrc`取消注释并使用...

```
# You can set the default proxies for Wget to use for http, https, and ftp.
# They will override the value in the environment.
#https_proxy = http://proxy.yoyodyne.com:18023/
#http_proxy = http://proxy.yoyodyne.com:18023/
#ftp_proxy = http://proxy.yoyodyne.com:18023/

# If you do not want to use proxy at all, set this to off.
#use_proxy = on 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-11-01T02:24:49.597

wget 在命令行中使用类似这样的环境变量可以工作：

```
export http_proxy=http://your_ip_proxy:port/
export https_proxy=$http_proxy
export ftp_proxy=$http_proxy
export dns_proxy=$http_proxy
export rsync_proxy=$http_proxy
export no_proxy="localhost,127.0.0.1,localaddress,.localdomain.com" 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-01-04T14:41:06.550

在尝试了许多教程来在经过身份验证的代理后面配置我的 Ubuntu 16.04 LTS 之后，它使用了以下步骤：

编辑`/etc/wgetrc`：

```
$ sudo nano /etc/wgetrc 
```

取消注释这些行：

```
#https_proxy = http://proxy.yoyodyne.com:18023/
#http_proxy = http://proxy.yoyodyne.com:18023/
#ftp_proxy = http://proxy.yoyodyne.com:18023/
#use_proxy = on 
```

更改`http://proxy.yoyodyne.com:18023/`为`http://username:password@domain:port/`

> 重要提示：如果仍然不起作用，请检查您的密码是否包含特殊字符，例如`#`, `@`, ... 如果是这种情况，请将它们转义（例如，替换`passw@rd`为`passw%40rd`）。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-07-15T15:54:56.887

在 Ubuntu 12.x 中，我在 $HOME/.wgetrc 中添加了以下行

> http_proxy = [http://uname:passwd@proxy.blah.com:8080](http://uname:passwd@proxy.blah.com:8080)
> 
> use_proxy = 开启

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-04-18T16:02:57.983

在 Debian Linux 中，可以通过环境变量和 wgetrc 将 wget 配置为使用代理。在这两种情况下，用于 HTTP 和 HTTPS 连接的变量名称都是

```
http_proxy=hostname_or_IP:portNumber
https_proxy=hostname_or_IP:portNumber 
```

请注意，文件 /etc/wgetrc 优先于环境变量，因此如果您的系统在那里配置了代理并且您尝试使用环境变量，它们似乎没有效果！

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-04-08T13:39:36.707

如果您只需要使用代理执行一次 wget，最简单的方法是使用这样的单行代码：

```
http_proxy=http://username:password@proxy_host:proxy_port wget http://fileurl 
```

或使用 https 目标 URL：

```
https_proxy=http://username:password@proxy_host:proxy_port wget https://fileurl 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-09-01T08:54:38.703

在我的 ubuntu 中，遵循 $HOME/.wgetrc 中的行就可以了！

> http_proxy = [http://uname:passwd@proxy.blah.com:8080](http://uname:passwd@proxy.blah.com:8080)
> 
> use_proxy = 开启

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-02-21T14:16:01.547

```
export http_proxy=http://proxy_host:proxy_port/
export https_proxy=https://proxy_host:proxy_port/ 
```

或者

```
export http_proxy=http://username:password@proxy_host:proxy_port/
export https_proxy=https://username:password@proxy_host:proxy_port/ 
```

正如所有其他人在这里解释的那样，这些环境变量有助于传递代理。

**注意：**但请注意，如果密码包含任何特殊字符，则需要将其配置为`%<hex_value_of_special_char>`.

**示例：**如果密码是`pass#123`，需要按照`pass%23123`上面的导出命令使用。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-07-08T11:33:02.447

在 Windows 中——对于 Fiddler 来说——使用环境变量：

```
set http_proxy=http://127.0.0.1:8888
set https_proxy=http://127.0.0.1:8888 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-09-11T08:26:06.990

**在文件~/.wgetrc**或**/etc/wgetrc**中添加以下行（如果文件不存在则创建该文件）：

```
http_proxy = http://[Proxy_Server]:[port]
https_proxy = http://[Proxy_Server]:[port]
ftp_proxy = http://[Proxy_Server]:[port] 
```

欲了解更多信息，[https://www.thegeekdiary.com/how-to-use-wget-to-download-file-via-proxy/](https://www.thegeekdiary.com/how-to-use-wget-to-download-file-via-proxy/)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-05-07T07:48:48.097

**使用tsocks通过****socks5**代理启动 wget ：

 **1.  安装tsocks：`sudo apt install tsocks`
2.  配置 tsocks

    ```
    # vi /etc/tsocks.conf

    server = 127.0.0.1
    server_type = 5
    server_port = 1080 
    ```

3.  开始：`tsocks wget http://url_to_get`**

# ios - 无法让 symbolicatecrash 工作，双 Xcode 安装？

> ID：11211706
> 
> 赞同：3
> 
> 时间：2012-06-26T16:21:31.547
> 
> 标签：ios, xcode, stack-trace, symbolicatecrash

我找到了几篇关于此事的帖子，最后设法在我的电脑上找到了正确的符号崩溃。我确实跑了：

```
 306      find /Applications/Xcode.app -name symbolicatecrash -type f 
```

这给了：

```
 307  cd /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks/DTDeviceKit.framework/Versions/A/Resources/ 
```

**我安装了两个版本的 Xcode（默认一个是旧的 3.2，所以我每次都手动打开文件并选择使用 4.3 打开）所以我不确定 Xcode.app 是否是正确的路径但是有我的机器上只有一个名为 Xcode.app 的文件夹**。

当我在 .DYSM 文件上运行 symbolicatecrash 时，结果如下：

```
./symbolicatecrash LOGFILE  /Users/xxx/Library/Developer/Xcode/DerivedData/TestCocos2dx-atifzmabifuzldejedlbjjibmljf/Build/Products/Debug-iphoneos/TestCocos2dx.app.dSYM/Contents/Info.plist while reading LOGFILE, No such file or directory :  at ./symbolicatecrash line 645. 
```

有什么建议吗？这可能是由于安装了两个 Xcode 造成的吗？我不敢相信没有更简单的方法来分析堆栈跟踪和运行 symbolicatecrash。

谢谢！

# mach - mach_inject 和 mach_override 示例代码？

> ID：11211709
> 
> 赞同：1
> 
> 时间：2012-06-26T16:21:44.700
> 
> 标签：mach

`mach_inject`是否有人有任何适用于 OSX 10.6 或更高版本的示例工作代码`mach_override`？我正在尝试将代码注入 finder 以添加我自己的上下文菜单项`mach_inject`。我想看一些示例工作代码？如果有人有任何其他建议，也欢迎他们。

# php - 如何将数据从一个 php 文件发送到另一个？

> ID：11211710
> 
> 赞同：-3
> 
> 时间：2012-06-26T16:21:47.147
> 
> 标签：php, javascript, jquery

我在文件 test.php 上有一个按钮

```
<?php
$url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
?>
<input type="button" name="btn" value="Download" onclick="alert('<?php echo $url; ?>')"> 
```

单击文件时，它会提醒页面的 url。

我有另一个页面，test2.php。

我希望在 test2.php 中显示被警告的 url

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:42:37.140

传递数据的方式有很多：

你的价值： `<?php $url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; ?>`

## 表单隐藏输入字段（POST | GET）

```
<form method="POST" action="page2.php">
  <input type="hidden" name="url" value="<?php echo $url;?>">
  <p><input type="submit" value="Submit"></p>
</form> 
```

更改`method="POST"`为`method="GET"`GET

## 链接 (GET)

`<a href="page2.php?url=<?php echo urlencode($url);?>">Download</a>`

## 通过会话

```
<?php 
session_start(); //First line of page1 and page2
$_SESSION['url']=$url;
?> 
```

然后根据您选择的方法使用全局变量或获取值`$_POST`。`$_GET``$_SESSION`

## 甚至网络存储 javascript (HTML5)：

```
<div id="result"></div>

<script type="text/javascript">
if(typeof(Storage)!=="undefined")
{
    if (localStorage.passthis){
    //Already set, perhaps set it here on page1 and and display it here on page2
    }
    else{ //Not set
          localStorage.passthis = window.location.href;
    }
    document.getElementById("result").innerHTML="Passed from page1.php: " + localStorage.passthis;
}else{
    //No web storage
}
</script> 
```

希望对您有所帮助，我建议您在提问之前先进行一些研究。[php.net](http://php.net)是你的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:24:33.490

您可以通过表单 GET 或 POST 发送数据：http: [//www.w3schools.com/php/php_forms.asp](http://www.w3schools.com/php/php_forms.asp)

```
Example URL: http://yoursite.com/page2.php?frompageone=Hello

echo $_GET['frompageone']; // Echos "Hello" 
```

POST 比 GET 更安全，这只是一个简单的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T16:45:26.657

根据按钮的重要性，您可以创建一个表单，将 POST 中的 $url 发送到 test2.php。有许多解决方法，但其中一种是难以捉摸的“隐藏”输入。

test.php 上的代码最终看起来像：

```
<?php $url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; ?>

<form action="test2.php" method="POST">
    <input type="hidden" name="url" value="<?php echo $url ?>" >
    <input type="submit" name="download" value="" onclick="alert('<?php echo $url; ?>')">
</form> 
```

虽然 test2.php 上的代码必须包括：

```
<?php $sent_url = $_POST['url']; 
      echo $sent_url;
?> 
```

希望这可以帮助！

石匠

PS 有关其他方法的更多信息，请参见上[一个问题](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)。

# asp.net-web-api - WebApi 控制器

> ID：11211712
> 
> 赞同：0
> 
> 时间：2012-06-26T16:21:48.583
> 
> 标签：asp.net-web-api, autofac

我尝试为 webapi 集成 autofac，但无法使其正常工作。我的控制器构造函数签名是：

```
public class AController: ApiController
{
  public AController(IComponentContext componentContext)
  {}
} 
```

在我的 global.asax 文件中，我在 Application_Start 中调用了以下代码

```
protected void Application_Start()
{
   var builder = new ContainerBuilder();
   builder.RegisterApiControllers();
   container = builder.Build();
   var resolver = new AutofacWebApiDependencyResolver(container);
   GlobalConfiguration.Configuration.DependencyResolver = resolver; 
```

}

当我尝试运行我的应用程序并访问我的资源“/api/A”时，服务器返回错误 500，抱怨控制器没有默认构造函数。我虽然这是 AutofacWebApiDependencyResolver 在我的情况下注入容器的任务。我该如何解决我的问题？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:53:30.067

我找到了我的问题。

将此行更新为

```
builder.RegisterApiControllers(Assembly.GetExecutingAssembly()); 
```

解决问题。

# javascript - 是否可以在从其他服务器下载之前动态压缩文件？

> ID：11211713
> 
> 赞同：3
> 
> 时间：2012-06-26T16:21:50.753
> 
> 标签：javascript, zip

我想知道是否可以编写浏览器扩展程序或简单的 Java 脚本代码，其中包含指向不同位置的 URL 列表，可以将所有内容压缩在一起。

我是说...

例如...有 3 个不同的图像文件：

*   [http://example1.com/a.png](http://example1.com/a.png)
*   [http://example22.com/b.png](http://example22.com/b.png)
*   [http://example333.com/c.png](http://example333.com/c.png)

[是否可以通过http://mysite.com](http://mysite.com)上的 Java Script 代码将它们全部下载为压缩文件存档 images.zip ？

我找到[了 JSZip](http://stuartk.com/jszip/)，但是我不知道如何使用它从不同的服务器加载文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:30:13.657

看一下这段代码：我已经为你组装了一个[Demo](http://jsfiddle.net/q5asM/14/)，让你从那里开始。向下滚动到代码的最后几行。

首先，我们需要将图像加载到`<img>`标签中。然后我们将阅读它们的内容。然后一切都可以通过jszip完成。

但有一些限制。您不能从其他域加载图像。所以图像应该在相同的 url 中，或者您通过服务器端动态加载它们，例如： `http://yourdomain.com/fileLoader.php?url=Url_To_External_Image`

这是执行魔术的代码狙击手：

```
function getBase64Image(imgage) {
    var canvas = document.createElement("canvas");
    canvas.width = imgage.width;
    canvas.height = imgage.height;

    var ctx = canvas.getContext("2d");
    ctx.drawImage(imgage, 0, 0);

    var dataURL = canvas.toDataURL("image/png");
    return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
}

var img = $("<img />").attr('src', '../../../img/logo.png');

img.load(function() {
    if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
        alert('broken image!');
    }
    else {
        var zip = new JSZip();
        content = getBase64Image(img[0]);
        zip.file("24.jpg", content + "\n");
        var content = zip.generate();
        location.href="data:application/zip;base64,"+content;
    }
}); 
```

# ruby - Ruby Koans about_methods 第 123 行对象循环

> ID：11211714
> 
> 赞同：4
> 
> 时间：2012-06-26T16:21:59.047
> 
> 标签：ruby

每次我添加正确的代码时，由于 AboutMethods:0x00000101841a28 数字每次都在变化，它会给我同样的错误。这就像它卡住了，我不知道如何摆脱这个循环。它工作了一次，然后我继续下一步，但在那之后它触发了一个错误。

我一定不能输入控制台给出的正确代码行吗？

```
def test_calling_private_methods_with_an_explicit_receiver
exception = assert_raise(NoMethodError) do
  self.my_private_method
end
assert_match "private method `my_private_method' called for #<AboutMethods:0x000001008debf8>", exception.message 
```

结尾

AboutMethods:0x000001008debf8 每次都会更改，不知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T16:26:01.253

`AboutMethods:0x...`是`inspect`方法的输出，通常（在这种情况下）包括类名 ( `AboutMethods`) 和对象 ID ( `0x...`)。对象 id 与对象在内存中的位置有关，因此每次都会更改。

根据我的经验，从异常中检查字符串几乎没有价值（它很脆弱）。但是，如果您觉得有必要，请使用正则表达式：

`assert_match /private method `my_private_method' called for \#\<AboutMethods:.*/`

# javascript - 使用 if else 复选框和多字段验证动态创建输入

> ID：11211715
> 
> 赞同：0
> 
> 时间：2012-06-26T16:21:59.063
> 
> 标签：javascript

当用户单击添加更多选项时，将使用 javascript 创建一个 from `document.getElementById('addmore').innerHTML`... 多次显示表单非常有用。我每次都添加一个唯一编号，以便为每个提交的字段创建唯一 ID。我有一个复选框，如果选中，则需要显示另一个字段才能填写：

```
document.getElementById('addmore').innerHTML += '<p><div class="required">*Type of Folder</div><label for="it09" class="hidelabel">Content Drive</label><input name="request['+fields+'][Type of Folder:]" id="cbpathCDB'+fields+'" type="checkbox" value="Content Drive" class="required" /><strong>Content Drive</strong> (A: drive)<br /><div id="pathCDB'+fields+'"><label for="newpathCDB"><span class="req">*Path to Content Drive Folder</span></label><input name="request['+fields+'][Path to Content Drive Folder:]" type="text" id="npcdb'+fields+'" size="50" class="required"/><br /><small>Path of folder to be created on Content Drive (A: drive)<br><em>(example: A:\drivefolder</em></small><br /></div></p>'; 
```

我尝试了多种方法（包括 jquery）来获取下一个 div，pathCDB+fields，以显示复选框何时被选中。如果没有 + 字段，它可以正常工作......请参阅[http://jsfiddle.net/kuVzV/4/](http://jsfiddle.net/kuVzV/4/)但是，当我添加字段时，它无法使用复选框显示/隐藏。

但是，当创建表单时，div 最初不会显示，就像它不应该显示一样......所以我知道 ID 是正确的。根据 Firebug，它显示了正确的 ID，该字段显示了正确的 #，即创建...

我现在不知所措。

如果选中复选框以动态创建多个输入，有关如何显示/隐藏此 div 的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:26:02.713

尝试检查 jQuery [.show()](http://api.jquery.com/show/)和 Jquery .hide [()](http://api.jquery.com/hide/)。我相信这就是您正在寻找的。

```
$(document).ready(function(){
    $("#cbpathCDB1").on('click', $("#cbpathCDB1 input[type=checkbox]").is(":checked"), someFunction);

});
function someFunction(event){
    if (event.target.checked){
         $("#pathCDB1").hide('slow');
    }
    else{
       $("#pathCDB1").show('slow');
    }
}​ 
```

jsfiddle [http://jsfiddle.net/FERMIS/7ThtT/6/](http://jsfiddle.net/FERMIS/7ThtT/6/)这是一个包含多个字段的示例。

# objective-c - TableView 从 ARC 自动释放创建 Zombie

> ID：11211719
> 
> 赞同：1
> 
> 时间：2012-06-26T16:22:14.293
> 
> 标签：objective-c, ios, uitableview

我在另一张桌子里面有一张桌子。我可以毫无问题地将单元格添加到“超级表”和“子表”中 - 它们会显示、滚动等。但是，当我尝试与“子表”交互时（选择其中一个文本字段进行编辑）程序崩溃。我在程序上运行了僵尸工具，它回溯了这段代码的崩溃（我使用的是 ARC）：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (saveTheTable == nil) saveTheTable = tableView;
    static NSString *licenseCellId = @"licenseID";
    UINib *nib = [UINib nibWithNibName:@"LicenseCell" bundle:nil];
    [tableView registerNib:nib forCellReuseIdentifier:licenseCellId];

    //This line causes the crash
    LicenseCell *cell = [tableView dequeueReusableCellWithIdentifier:licenseCellId];

    cell.delegate = self;
    [licenseFields replaceObjectAtIndex:indexPath.row withObject:cell];

    return cell;
} 
```

负责的调用者是 UITextField。似乎“子表”正在被自动释放池排水管释放。为什么会这样，我该如何解决？我尝试存储对单元格的强引用。

**-编辑-**也许回溯会有所帮助

```
* thread #1: tid = 0x1f03, 0x017a309b libobjc.A.dylib`objc_msgSend + 15, stop reason = EXC_BAD_ACCESS (code=2, address=0x8)
    frame #0: 0x017a309b libobjc.A.dylib`objc_msgSend + 15
    frame #1: 0x003c7c7e UIKit`-[UITextField canBecomeFirstResponder] + 167
    frame #2: 0x00405fe7 UIKit`-[UIResponder becomeFirstResponder] + 179
    frame #3: 0x005e58fb UIKit`-[UITextInteractionAssistant setFirstResponderIfNecessary] + 208
    frame #4: 0x005e75f8 UIKit`-[UITextInteractionAssistant oneFingerTap:] + 1989
    frame #5: 0x005dfe29 UIKit`_UIGestureRecognizerSendActions + 143
    frame #6: 0x005df133 UIKit`-[UIGestureRecognizer _updateGestureWithEvent:] + 379
    frame #7: 0x005e03bf UIKit`-[UIGestureRecognizer _delayedUpdateGesture] + 46
    frame #8: 0x005e2a21 UIKit`___UIGestureRecognizerUpdate_block_invoke_0541 + 57
    frame #9: 0x005e297c UIKit`_UIGestureRecognizerApplyBlocksToArray + 277
    frame #10: 0x005db3d7 UIKit`_UIGestureRecognizerUpdate + 1026
    frame #11: 0x003401a2 UIKit`-[UIWindow _sendGesturesForEvent:] + 1121
    frame #12: 0x00340532 UIKit`-[UIWindow sendEvent:] + 93
    frame #13: 0x00326dc4 UIKit`-[UIApplication sendEvent:] + 464
    frame #14: 0x0031a634 UIKit`_UIApplicationHandleEvent + 8196
    frame #15: 0x01f9aef5 GraphicsServices`PurpleEventCallback + 1274
    frame #16: 0x012b3195 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    frame #17: 0x01217ff2 CoreFoundation`__CFRunLoopDoSource1 + 146
    frame #18: 0x012168da CoreFoundation`__CFRunLoopRun + 2218
    frame #19: 0x01215d84 CoreFoundation`CFRunLoopRunSpecific + 212
    frame #20: 0x01215c9b CoreFoundation`CFRunLoopRunInMode + 123
    frame #21: 0x01f997d8 GraphicsServices`GSEventRunModal + 190
    frame #22: 0x01f9988a GraphicsServices`GSEventRun + 103
    frame #23: 0x00318626 UIKit`UIApplicationMain + 1163
    frame #24: 0x0000274d trainingAttendance`main + 141 at main.m:16
    frame #25: 0x000026b5 trainingAttendance`start + 53 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:14:07.423

事实证明，就像 phix23 所说，问题出在 registernib 命令上。这是新`cellForRowAtIndexPath`方法：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (saveTheTable == nil) saveTheTable = tableView;
    static NSString *licenseCellId = @"licenseID";

    LicenseCell *cell = (LicenseCell *)[tableView dequeueReusableCellWithIdentifier:licenseCellId];
    if( cell == nil ) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"LicenseCell" owner:self options:nil];
        cell = (LicenseCell *)[nib objectAtIndex:0];
    }

    cell.delegate = self;
    [licenseFields replaceObjectAtIndex:indexPath.row withObject:cell];

    if (nibRetainer == nil) nibRetainer = [[NSMutableArray alloc] initWithObjects:cell, nil];
    else [nibRetainer addObject:cell];
    return cell;
} 
```

# axapta - 在网格中创建新线时，有没有办法让它在底部而不是网格的中间创建？

> ID：11211720
> 
> 赞同：3
> 
> 时间：2012-06-26T16:22:15.347
> 
> 标签：axapta, dynamics-ax-2009, x++

在记录创建（Ctrl+N）期间有没有办法在网格的末尾而不是在中间自动创建线？

我知道这只是视觉上它创建它的地方，但它仍然会造成一些混乱。

这是我迄今为止在数据源上所做的，但它不能正常工作：

```
public void create(boolean _append = false)
{
    this.setPosition(MyTable.RowCount());

    super(_append);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:01:31.583

Ah figured it out. Just had to check MSDN.

```
public void create(boolean _append = true)
{
    this.last();
    super(_append);
} 
```

# spring - Spring-Wicket：可选但仍需要命名 bean

> ID：11211724
> 
> 赞同：2
> 
> 时间：2012-06-26T16:22:20.473
> 
> 标签：spring, dependency-injection, wicket, wicket-1.5

考虑以下（检票口）代码：

```
@SpringBean(required=false)
private StatusCheckService service; 
```

在我的用例中，我的上下文中没有 StatusCheckService 类型的 bean。这不是问题，它被标记为可选，因此（检票口）页面将初始化得很好。

然而：

```
@SpringBean(name = "statusCheckService", required=false)
private StatusCheckService service; 
```

这失败了：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'statusCheckService' is defined
     at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529)
     at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095)
     at org.springframework.beans.factory.support.AbstractBeanFactory.isSingleton(AbstractBeanFactory.java:400)
     at org.springframework.context.support.AbstractApplicationContext.isSingleton(AbstractApplicationContext.java:1113)
     at org.apache.wicket.spring.SpringBeanLocator.isSingletonBean(SpringBeanLocator.java:100)
     at org.apache.wicket.spring.injection.annot.AnnotProxyFieldValueFactory.getFieldValue(AnnotProxyFieldValueFactory.java:140) 
```

我希望这没有什么区别。好的，没有具有这样名称的 bean，但我将其标记为可选，为什么会出现异常？有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:40:28.827

通过在 Eclipse 中进行用法搜索，您可以看到唯一一次查询注解的所需值是在 AnnotProxyFieldValue 的第 215 行：

```
if (names.isEmpty())
{
    if (annot.required())
    {
        throw new IllegalStateException("bean of type [" + clazz.getName() + "] not found");
    }
    return null;
} 
```

在这里你可以看到@SpringBean注解的'required'字段仅在名称列表（在函数中设置较高）为空时使用......

这解释了您遇到的行为，因为当您不指定名称时，名称列表为空（因为它找不到您的类），并且返回 null。但是，当您确实指定了一个名称时，它不会费心尝试查看该类是否存在，因此会将您提供的类名发送给 spring 进行查找，当它找不到该类时会继续抱怨。

这可能是一个错误，具体取决于设计人员的意图，我个人认为，如果您已指定该字段不是必需的，那么该功能应该提前返回......如果您同意，那么可以考虑放入一个快速启动的 jira 票。

至于解决方案，您没有提及太多关于您的用例，以及为什么即使您不需要注入 bean 也需要设置名称。但是假设您这样做是为了根据某些标准动态注入 bean，您可以执行以下操作：（未经测试）

在注入 SpringBean 的类中，替换：

```
@SpringBean(name="statusCheckService", required=false)
private StatusCheckService service; 
```

和：

```
MyCustomSpringBeanInjector injectedService; 
```

然后 MyCustomSpringBeanInjector 类类似于：

```
import org.apache.wicket.injection.Injector;
import org.apache.wicket.spring.injection.annot.SpringBean;

public class MyCustomSpringBeanInjector
{
    @SpringBean public StatusCheckService service;

    public MyCustomSpringBeanInjector()
    {
        Injector.get().inject(this);
    }
} 
```

然后回到注入 SpringBean 的类中，输入如下内容：

```
if(statusCheckServiceRequired)
    injectedService = new MyCustomSpringBeanInjector(); 
```

并替换“服务”。必要时使用“injectedService.service”。

显然，这是我脑海中的一个 qwik-e 修复程序，我确信有更好的方法，但你明白了！:)

祝你好运！

# ios - 如何在当前视图控制器后面添加视图控制器的视图？

> ID：11211733
> 
> 赞同：0
> 
> 时间：2012-06-26T16:22:39.693
> 
> 标签：ios, ios5, ios4

我在屏幕上显示了一个导航控制器，我想让另一个视图控制器的视图位于当前导航控制器的后面（供以后使用）
我该怎么做？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:27:06.450

如果你想隐藏它

`yourView.hidden=YES;`

如果您想更改视图排列，请将您想要的子视图放在前面

```
[self.view bringSubViewToFront:yourView]; 
```

或者，仅在需要时创建它

# visual-studio-2010 - Azure - 从 VStudio 发布

> ID：11211735
> 
> 赞同：2
> 
> 时间：2012-06-26T16:22:43.150
> 
> 标签：visual-studio-2010, azure

使用 VStudio 2010 向导设置基本的“Hello World”asp.net Web 角色，在模拟器下工作，但从 azure 管理门户导入发布文件时出现错误“publishsettings 不包含 Windows Azure 的有效发布设置”。

在 Azure 最新管理门户（预览版）中设置了网站、存储和云服务，所以不清楚是什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:13:34.233

如果您正在使用 Windows Azure 网站（预览版）并为您的应用程序使用 Visual Studio 发布向导，您需要从您的网站下载发布文件，如下所示：

![在此处输入图像描述](../Images/8b1b520de85d3b4b5eb43fd894ad3104.png)

之后，您可以在 VS Publish 向导中使用这个 .publishsettings 文件，甚至不需要单击，您的网站就会被发布。

请参阅我的最新博客：[使用 Visual Studio Web 发布向导部署 Windows Azure 网站](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/26/deploying-windows-azure-website-using-visual-studio-web-publish-wizard.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:50:15.763

我遇到过同样的问题。似乎与特定站点/服务/应用程序相关的发布设置文件总是被拒绝。解决方案似乎是为您的*整个 Azure 帐户*获取一个发布设置文件，然后您就可以访问您的站点/服务/应用程序或创建新的站点并发布到它们。这是使用以下步骤执行的：

. 右键单击 VS10 中的项目并打开“发布...”（Azure 发布设置）。转到摘要选项卡。您可以在此处下载与您的 Azure*帐户*相关的发布设置文件。此文件的名称类似于“三个月免费评估期 1-1-2013-credentials.publishsettings”，而不是特定站点的发布设置文件，该文件的名称类似于“mysite.azurewebsites.net.publishsettings”。导入该文件 - 它会工作！3\. 现在转到设置选项卡。在这里您可以选择一个云服务（选择现有的或者您可以创建一个新的）并分配一些设置。

![第 3 步](../Images/5b95a473e4a558f18ab5ea8cf2b93491.png)

. 配置完成并单击 Next 按钮后，VS10 将开始将您的项目部署到所选服务。这显示在 VS10 的“Windows Azure 活动日志”输出窗口中。

![在此处输入图像描述](../Images/bb744d77ab53e17dabbb234f401fb401.png)

# jira - 升级到 Confluence 4.2 后渲染宏出错

> ID：11211741
> 
> 赞同：0
> 
> 时间：2012-06-26T16:23:03.720
> 
> 标签：jira, confluence, wiki-markup

将 Confluence 从 3.5 更新到 4.2.3 后，出现以下错误：

```
Error rendering macro 'list-data' : Unsupported type: class
org.randombits.confluence.metadata.reference.WikiReference 
```

![在此处输入图像描述](../Images/42b990f1c2a3b2ae862bb714213a64e1.png)

所以看起来像宏渲染的问题，在这个领域我有我无法编辑的列表数据。在其他一些领域（不仅在列表数据中），如文本数据也有同样的问题。

我找到了解决这个问题的方法，但它只在局部情况下有帮助，对整个空间没有帮助。

我在 Atlassian Q&A 网站上发布了同样的问题。
[https://answers.atlassian.com/questions/64871/error-rendering-macro](https://answers.atlassian.com/questions/64871/error-rendering-macro)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:55:03.547

此问题已通过更新数据和向此文本添加转义字符来解决。

# mongodb - 如何使用 json API 在 mongo db 2.0.6 中编写简单的聚合查询

> ID：11211743
> 
> 赞同：1
> 
> 时间：2012-06-26T16:23:16.743
> 
> 标签：mongodb, aggregation-framework

刚开始 mongo 并开始遇到查询问题。我有一个名为“externalTransaction”的集合，我想编写一个等效于这个 mysql 查询：

```
select transactionCode, 
       sum(amount) as totalSum, 
       count(amount) as totalCount 
from externalTransaction 
where transactioncode in ('aa','bb','cc') 
group by sum(amount) 
```

以下是我的尝试：

```
{
 "collectionName": "externalTransaction",
  sort: {transactionCode:-1},
  query: {this._id: {$in:['aa','bb','cc']}},
  mapReduce:{
   'map': 'function(){

        emit(this.transactionCode, this.amount);

   }',
 'reduce': 'function(key, values){
    var result = {count: 0, sum: 0.0};

    values.forEach(function(value) {
      result.count++
       result.sum += value.amount;
    });
    return result;
 }',
   'out' : 'sumAmount'
 } 
```

}

上面的查询给了我一个如下所示的结果集：

```
_id     value.count        value.sum
ct      2.0                NaN
bb      40.0           NaN
fg      71.0           NaN
fd      36.0           NaN
sd      5.0                NaN
as      4.0            NaN
aa      71.0           NaN
df      4.0                NaN
cc      10.0               NaN 
```

从带有版本的文档中，`2.0.6`我还不能使用`aggregation framework`如何处理像我在 mongo 中的简单查询。感谢您阅读并原谅我的问题的琐碎性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:34:05.847

您的`map`和`reduce`功能有一些错误。首先，在`map`你发出一个简单的数字，在 reduce 你尝试取`amount`一个数字。我敢打赌，它没有那个属性。其次，`map`和的输出`reduce`必须是一致的，因为`reduce`应该可以在部分减少的结果上运行。试试这些功能：

```
var map = function() {
  emit(this.transactionCode, {sum: this.amount, count: 1})
}

var reduce = function(k, vals) {
  var result = {sum: 0, count: 0};

  vals.forEach(function(v) {
    result.sum += v.sum;
    result.count += v.count;
  });
  return result;
} 
```

# php - 列数与第 1 行 php mysql 的值计数不匹配

> ID：11211745
> 
> 赞同：4
> 
> 时间：2012-06-26T16:23:23.997
> 
> 标签：php, mysql, sql, insert

单击“AD RECORD”按钮时出现以下错误：

> INSERT 失败：INSERT INTO user_master VALUES('cha' , 'rstein' , 'bar' , 'foo') 列计数与第 1 行的值计数不匹配

从以下代码：

```
 if (isset($_POST['delete']) && isset($_POST['first']))
{
    $first = get_post('first');
    $query = "DELETE FROM user_master WHERE first='$first'";
    if(!mysql_query($query, $db_server))
        echo "DELETE failed: $query<br />" . 
        mysql_error() . "<br /><br />";
}

if (isset($_POST['first']) && isset($_POST['last']) && isset($_POST['user_name']) && isset($_POST['email']))
{
    $first      = get_post('first');
    $last       = get_post('last');
    $email      = get_post('email');
    $user_name  = get_post('user_name');

    $query = "INSERT INTO user_master VALUES" . "('$first' , '$last' , '$user_name' , '$email')";

    if(!mysql_query($query, $db_server)) echo "INSERT failed: $query <br />" . mysql_error() . "<br /><br />";
}

echo <<<END
<form action = "willingLog.html" method="post"><pre>
    First       <input type="text" name="first" />
    Last        <input type="text" name="last" />
    Email       <input type="text" name="email" />
    Username    <input type="text" name="user_name" />
            <input type="submit" value="AD RECORD" />
</pre></form>
    END; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T16:25:30.137

您的数据库表有更多列，然后您将插入其中，因此您会收到错误消息。（您可能不代表您的用户 ID 字段，这可能是您的主键）。您需要在查询中指定数据用于哪些字段：

```
 $query = "INSERT INTO user_master (first_name, last_name, user_name, email) VALUES" . "('$first' , '$last' , '$user_name' , '$email')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:34:47.797

如果你的`user_master`表有类似`id`or的主键`user_id`，那么你可以做两件事：

*   您可以在“id”字段上添加 auto_increment 属性
*   为“id”添加主值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T20:12:29.850

我有同样的问题......我解决它的方法是确保**不在我的整数值中放置逗号**。

因此，如果您在 html 表单中输入薪水，请不要在薪水图中使用逗号。（我正在按照教程点给出的示例。我认为薪水框应该包含一个逗号，但它导致了这个错误。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T13:09:05.200

确保您的 sql 查询在开始和结束括号附近没有空格。以下将导致您提到的错误：

```
$sql = "INSERT INTO table_name ( email, username ) VALUES ($userEmail,$username)" 
```

# scipy - scipy 缺少 libifport.so.5

> ID：11211746
> 
> 赞同：3
> 
> 时间：2012-06-26T16:23:30.170
> 
> 标签：scipy, pip

我正在尝试使用 pip 在 Ubuntu 10.10 上安装 scipy 0.10.1。

我已经成功安装了 numpy：

```
$ sudo pip install --upgrade numpy
[snip]
Successfully installed numpy
Cleaning up... 
```

但是当我尝试 scipy 我得到：

```
$ sudo pip install --upgrade scipy
  [snip]
    File "/usr/local/lib/python2.6/dist-packages/numpy/linalg/linalg.py", line 23, in <module>
      from numpy.linalg import lapack_lite
ImportError: libifport.so.5: cannot open shared object file: No such file or directory 
```

我确实有 libifport.so.5，但我不知道为什么安装程序没有找到它。

```
$ echo $LD_LIBRARY_PATH
  :/opt/intel/composerxe-2011.2.137/compiler/lib/intel64 
```

我还尝试安装其他几个软件包，希望其中一个可能有所帮助（例如 libatlas-base-dev liblapack-dev libatlas-base-dev liblapack-dev 等）

有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:08:51.093

很可能您尚未定义`LD_LIBRARY_PATH`for root。要检查这一点：

`$`须藤

`$`回声 $LD_LIBRARY_PATH

您可以按如下方式指定环境变量：

`$`sudo env LD_LIBRARY_PATH=path/to/compiler' pip install scipy

查看此博客文章以创建别名以节省您每次输入的时间：http: [//final-world-domination.blogspot.ch/2011/02/sudo-doesnt-export-ldlibrarypath.html](http://final-world-domination.blogspot.ch/2011/02/sudo-doesnt-export-ldlibrarypath.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-01T13:43:27.927

这解决了我在 Debian 9 上的问题： `conda install -c intel -c conda-forge -c pytorch --override-channels intel-fortran-rt`

```
# find / -iname "libifport*"
./opt/conda/lib/libifport.so
./opt/conda/lib/libifport.so.5
./opt/conda/pkgs/intel-fortran-rt-2021.3.0-intel_3350/lib/libifport.so
./opt/conda/pkgs/intel-fortran-rt-2021.3.0-intel_3350/lib/libifport.so.5 
```

# powershell - 如何在 PowerShell 中重命名文件？

> ID：11211748
> 
> 赞同：2
> 
> 时间：2012-06-26T16:23:35.300
> 
> 标签：powershell

我有 2 个任务要使用 PowerShell 来完成：

1 - 我还需要将所有 index.asp 重命名为 Default.aspx

2 - 我有一个目录`C:\WWW`，我需要将所有`.asp`文件以`.aspx`递归方式重命名为 。

我试过这个`Rename-Item`命令，但总是出错。

> 当该文件已存在时无法创建该文件

如何在 PowerShell 中重命名文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:43:48.587

使用`Get-ChildItem`cmdlet 获取所有 index.asp 文件。将结果通过管道传输到`Rename-Item`cmdlet 并为文件指定新名称。

```
Get-ChildItem c:\www -Filter Index.asp -Recurse | Where-Object {$_.Extension -eq '.asp' } | Rename-Item -NewName Default.aspx 
```

，这也将为您提供 index.aspx 文件，因此将结果通过管道传输到“Where-Object” cmdlet 并根据文件扩展名进行过滤

对 asp 文件执行相同的操作，注意现在您将获得 .aspx 文件，因此将结果通过管道传输到“Where-Object”cmdlet 并根据文件扩展名进行过滤。在新名称中，仅取每个文件的基本名称（不带扩展名）并将其附加为“.aspx”

```
Get-ChildItem c:\www -Filter *.asp -Recurse | Where-Object {$_.Extension -eq '.asp' } | Rename-Item -NewName {$_.BaseName + '.aspx'} 
```

# entity-framework - 使用导航属性与使用 FK 属性时我做错了什么？

> ID：11211750
> 
> 赞同：1
> 
> 时间：2012-06-26T16:23:40.830
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

当我在 MVC4 操作方法中使用以下代码时，我在其下方收到错误：

```
var role = _roleRepository.GetByName(model.RegistrationType.ToString());
var mr = new MemberRole();
mr.Priority = int.MaxValue;
mr.IsActive = true;
entity.MemberRoles.Add(mr);
role.MemberRoles.Add(mr);
_roleRepository.Update(role);
_memberRepository.Insert(entity); 
```

*发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。*

我有点理解，但需要移动和交付，尝试了以下方法，给出了下面的错误。我以为我还不能更新这个角色，因为它的一个`MemberRole`“孩子”没有有效的`Member`参考（FK）：

```
var role = _roleRepository.GetByName(model.RegistrationType.ToString());
var mr = new MemberRole();
mr.Priority = int.MaxValue;
mr.IsActive = true;
entity.MemberRoles.Add(mr);
role.MemberRoles.Add(mr);
//_roleRepository.Update(role);
_memberRepository.Insert(entity); 
```

*INSERT 语句与 FOREIGN KEY 约束 FK_MemberRole_Role_RoleId 冲突。冲突发生在数据库 Educ8，表 dbo.Role，列 Id.*

我终于在 MemberRole 上仅使用 FK 属性取得了成功，如下所示，一切都很平静：

```
_memberRepository.Insert(entity);
var role = _roleRepository.GetByName(model.RegistrationType.ToString());
var mr = new MemberRole();
mr.MemberId = entity.Id;
mr.RoleId = role.Id;
mr.Priority = int.MaxValue;
mr.IsActive = true;
_memberRoleRepository.Insert(mr); 
```

我的流利映射和实体类很好，只是我做错了，我怀疑更新的顺序，并且不知道是什么。

# c# - 我是否需要编写 CRC 32 来使用 Packet.Net 和 SharpPcap 发送工艺以太网数据包

> ID：11211752
> 
> 赞同：1
> 
> 时间：2012-06-26T16:23:51.513
> 
> 标签：c#, network-programming, sharppcap, packet.net

我用 C# 编写了一个代码，在有效负载前面添加 MAC 标头，并通过 SharpPcap 发送原始制作的以太网数据包。我可以通过wireshark捕获来自发送方的数据包，但我无法在接收端接收任何内容。我发现发送部分的数据包长度是1514。这是否意味着FCS错误导致我发送的所有数据包都被接收者丢弃？SharpPcap 是否提供任何 API 来创建 CRC32？

# logging - CDI 注入和序列化

> ID：11211756
> 
> 赞同：5
> 
> 时间：2012-06-26T16:24:06.213
> 
> 标签：logging, cdi, code-injection

我正在考虑为 slf4j 记录器使用 CDI 注入，所以我创建了一个生产者。

我将它注入到一个`ApplicationScoped`可序列化的bean中：

```
@ApplicationScoped
public final class CurrentApplicationBean implements Serializable {
    @Inject
    private transient Logger          logger;
} 
```

它必须是瞬态的，因为它`org.slf4j.Logger`是一个不扩展的接口`Serializable`，但这意味着必须在反序列化后重新注入记录器。

**我认为 CDI 不能处理这个问题，你知道什么？**

此外，提供者总是提供一个新`Logger`实例，因为它必须从 设置记录器名称`InjectionPoint`，这意味着`RequestScoped`bean 有自己的记录器实例，而不是每个类记录器的静态记录器。

**也许日志记录不是 CDI 注入的好上下文……您有什么考虑？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T21:58:49.177

> 但这意味着必须在反序列化后重新注入记录器。

CDI 容器代理是可序列化的。反序列化时，代理会定位/绑定到正确的注入。我不会将注入点标记为瞬态；因为这会阻止容器定位/重新绑定注入并导致 NPE。

> 这意味着 RequestScoped bean 有自己的记录器实例，而不是每个类记录器的静态

如果您的生产者方法类似于以下内容

```
@RequestScoped
@Produces   
public Logger produceLog(InjectionPoint injectionPoint) {   
    return LoggerFactory.getLogger(injectionPoint.getMember().getDeclaringClass().getName());   
} 
```

LoggerFactory.getLogger() 为每个类创建一个记录器。

> 也许日志记录不是 CDI 注入的好上下文……您有什么考虑？

这是你的选择。

# objective-c - 自定义 UITableViewCell 中的 Alloc/init

> ID：11211759
> 
> 赞同：-1
> 
> 时间：2012-06-26T16:24:18.047
> 
> 标签：objective-c, ios, uitableview

我正在使用[DYRateView](https://github.com/dyang/DYRateView)`UITableViewCell`在自定义类中显示星级视图。DYRateView（UIView 的子类）的一个实例在我的“layoutSubviews”方法中分配和初始化。

在“layoutSubviews”中分配/初始化视图是一种不好的做法吗？当单元被重用时，它是在每个单元中分配/初始化还是重用视图？

。H

```
@property (retain, nonatomic) IBOutlet DYRateView *rateView; 
```

.m

```
- (void)layoutSubviews
{
[super layoutSubviews];

rateView = [[DYRateView alloc] initWithFrame:CGRectMake(100, 60, 160, 20) fullStar:[UIImage imageNamed:@"StarFullLarge.png"] emptyStar:[UIImage imageNamed:@"StarEmptyLarge.png"]];
    NSLog(@"created");

rateView.padding = 10;
rateView.alignment = RateViewAlignmentCenter;
rateView.editable = YES;
rateView.delegate = self;
rateView.rate = _rating;
[self.contentView addSubview:rateView];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:46:31.227

分配它是可以的`layoutSubviews`，但是**每次** `layoutSubviews`调用时你都在这样做，并且它会比分配后更频繁地调用。因此，您现在拥有它的方式会严重泄漏内存（除非您使用的是 ARC）。此外，您将在每次调用时不断地向`rateView`您的对象添加新对象，这会带来相当不利的后果。`contentView`

由于子视图归单元视图所有，如果单元视图被重用，它也将被重用。

相反，检查子视图是否存在，并相应地分配。

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    if ( rateView == nil ) {
        rateView = [[DYRateView alloc] initWithFrame:CGRectMake(...) fullStar:[UIImage imageNamed:@"..."] emptyStar:[UIImage imageNamed:@"..."]];

        // rest of rateView set up here

       [self.contentView addSubview:rateView];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:46:32.930

我相信它只会重复使用它。你可以自己测试一下

NSLog(@"布局子视图，保留计数为 %d", rateView.retainCount);

虽然，你为什么不在自定义单元格的 init 方法中这样做呢？只需在 layoutSubviews 中设置框架？它看起来更干净。

# html - 我想用 css 或 javascript 编写 HTML，这样我就可以纵向打印 Page1 和 Landsape 中的 Page 2, 3, ..

> ID：11211761
> 
> 赞同：2
> 
> 时间：2012-06-26T16:24:31.040
> 
> 标签：html, css, printing

有没有其他方法可以达到这个要求。

我正在使用`filter: progid:DXImageTransform.Microsoft.BasicImage(Rotation=3);`旋转有效的页面，但如果内容很长，则无法正确打印页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:30:24.787

使用打印 CSS。在您的 CSS 中，您可以设置 @page 属性，如下所示。

```
@media print{@page {size: landscape}} 
```

@page 是[CSS 2.1 规范](http://www.w3.org/TR/CSS21/page.html#page-box)的一部分，但这`size`并没有像问题的答案所强调的那样[@Page { size:landscape} 已过时？](https://stackoverflow.com/questions/4249532/is-page-sizelandscape-obsolete)：

> CSS 2.1 不再指定 size 属性。CSS3 Paged Media 模块的当前工作草案确实指定了它（但这不是标准或被接受的）。

如前所述，尺寸选项来自[CSS 3 Draft Specification](http://www.w3.org/TR/css3-page/#page-size)。理论上，它可以设置为页面大小和方向，尽管在我的示例中省略了大小。

该支持与[在 firefox 中开始提交的错误报告](https://developer.mozilla.org/en/Mozilla_CSS_support_chart#section_3)混合在一起，大多数浏览器不支持它。

它在 IE7 中似乎可以工作，但这是因为 IE7 会记住用户在打印预览中最后选择的横向或纵向（仅重新启动浏览器）。

[本文](http://edacio.us/forum/comments.php?DiscussionID=39)确实有一些使用 JavaScript 或 ActiveX 将密钥发送到用户浏览器的建议解决方法，尽管它们并不理想并且依赖于更改浏览器的安全设置。

或者，您可以旋转内容而不是页面方向。这可以通过创建样式并将其应用于包含这两行的主体来完成，但这也有缺点，会产生许多对齐和布局问题。

```
<style type="text/css" media="print">
    .page
    {
     -webkit-transform: rotate(-90deg); -moz-transform:rotate(-90deg);
     filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
    }
</style> 
```

我发现的最后一种选择是在 PDF 中创建横向版本。您可以指出，当用户选择打印时，它会打印 PDF。但是我无法让它在 IE7 中自动打印工作。

```
<link media="print" rel="Alternate" href="print.pdf"> 
```

总之，在某些浏览器中，使用@page size 选项相对容易，但是在许多浏览器中没有确定的方法，这取决于您的内容和环境。这可能是 Google Documents 在选择打印时创建 PDF 并允许用户打开并打印的原因。

# asp.net-mvc - ASP.NET MVC3 在 Windows 8 中不起作用

> ID：11211765
> 
> 赞同：3
> 
> 时间：2012-06-26T16:24:50.153
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2010, iis, razor

要在我的 Windows 8 Release Preview 安装上启用 ASP.NET MVC3，我需要做些什么特别的事情吗？甚至在 VS2010 中创建一个空白的 ASP.Net MVC3 Razor 应用程序，作为新应用程序部署到本地 IIS 实例，并在浏览器中加载页面都不起作用。我遇到以下错误：

HTTP 错误 403.14 - 禁止

Web 服务器配置为不列出此目录的内容。

所以我然后进入新的 VS2010 项目，右键单击，选择“添加可部署依赖项”并选择“ASP.NET MVC”以及“带有 Razor 语法的 ASP.NET 网页”然后我将项目重新部署到本地 IIS 应用程序。不用找了。仍然“未配置 Web 服务器以列​​出目录的内容”。

值得注意的是 VS 2010 Development Web Server 运行良好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:03:23.733

找到了。事实证明，即使我使用的是 ASP.NET MVC3 并安装了 .Net 4.0 框架，也需要安装适用于 ASP.NET 4.5 的 Windows 8“功能”才能连接所有这些。似乎有点违反直觉，但改变它就做到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:34:29.810

您可能需要考虑在主机上运行 MVC3 安装程序，以便 MVC3 项目的所有依赖项都存储在 GAC 中。如果您需要安装包，可以从以下位置下载：

[http://www.microsoft.com/web/gallery/install.aspx?appid=MVC3](http://www.microsoft.com/web/gallery/install.aspx?appid=MVC3)

我无法验证这是否适用于 Windows 8 预览版，但这将是我遇到您的问题时的第一直觉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:28:27.837

您是否确保为 .NET 4 配置了站点的工作进程？

当你说你“部署”时，你是怎么做到的？听起来该文件夹未设置为应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T12:05:43.697

对我来说，Windows 功能中没有为 IIS 8 安装 .NET 3.5。虽然我很确定我的应用程序是 .NET 4.0 ......但值得一试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T17:35:22.113

我在安装 MVC3 MS VS 2010 时遇到问题。Windows 8 x64。平台安装程序没有显示错误。
根本原因：aspnetwebpages.msi 中断更新`web.config`文件。我更新了两个似乎只包含空白的 web.config 文件。
这是我的方向：

确保`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\web.config`有效。使用 web.config.default，复制然后重命名为 web.config 以纠正它是否看起来错误。

确保`C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config\web.config`有效。使用`web.config.default`，复制然后重命名为`web.config`以纠正，如果它看起来有误。

我不知道为什么文件一开始就坏了。

# dns - WHM：域不指向帐户，而是指向服务器 IP

> ID：11211766
> 
> 赞同：0
> 
> 时间：2012-06-26T16:24:52.230
> 
> 标签：dns, cpanel, whm

希望有人可以在这里帮助我。通常，当我们为客户端设置时，我们拥有并控制域，使用我们自己的私人 WHM 服务器。在这种情况下，客户已经使用他们的技术部门注册了域。他们的技术人员只是将其定向到我们服务器的 IP 地址，因此这些域将转到 WHM 提供的可怕启动页面，但它似乎并没有转到我在 WHM 中为其设置的帐户。 ..我错过了什么？我可以使用我在 PHP 下为帐户设置的域和登录设置登录...但是浏览器中的域本身不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:41:02.157

好的，我想通了，并正在为同一问题中的人回答。刷新您的 DNS ( cmd /ipconfig flushdns)，并清除缓存，或在另一台计算机上尝试。

# objective-c - UITextView 滚动不好

> ID：11211769
> 
> 赞同：0
> 
> 时间：2012-06-26T16:24:59.833
> 
> 标签：objective-c, uitextview

我有一个运行良好的 UITextView，直到它的内容大于它自己的框架。在那种情况下，它会向下滚动，但由于某种原因，我无法将它重新滚动回到开头，而只能向上滚动几行。如何控制内容的大小和滚动范围？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:52:46.063

愚蠢的问题，但我还是会回答：

我有一个 scrollViewDidScroll 方法来控制 UITableView 滚动。当我的 textView 被滚动时，这个方法也被调用了——实际上造成了一些麻烦。所以我只是在第一行检查了发件人：

```
if (sender==textView) return; 
```

谢谢您的帮助..

# jquery - jquery sticky Footer：它来自页面顶部而不是底部页面

> ID：11211770
> 
> 赞同：0
> 
> 时间：2012-06-26T16:24:59.970
> 
> 标签：jquery, sticky-footer

我 以这种方式编辑了[Sticky Footer 脚本：](http://codershelpdesk.com/2012/04/13/jquery-sticky-footer-example-with-demo/)

```
<script type="text/javascript">
    function stickyFooter(){
            jQuery("#stickyFooter").css({position: "absolute",top:($(window).scrollTop()+$(window).height()-$("#stickyFooter").height())+"px"});
    }

    function myStickyFooter(){
            jQuery("#stickyFooter").css({position: "absolute"});
            jQuery("#stickyFooter").animate({
            top:($(window).scrollTop()+$(window).height()-$("#stickyFooter").height())+"px"
          }, 2000, function() {
          });
    }

    jQuery(function(){

        myStickyFooter();
        jQuery(window)
            .scroll(stickyFooter)
            .resize(stickyFooter);
    });
</script> 
```

因此，在 Firefox 上它工作正常；在 Chrome 或 Ie 上，它可以工作.. 相反：stickyFooter 从顶部到底部出现。为什么？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:51:13.460

这适用于所有浏览器。

解决方案：

您需要进行额外的工作来设置粘性页脚的初始位置，`window.height()`然后将其设置为动画`window.height()-($('#footer').height())`

# android-ndk - 三星 Galaxy S3 上的原生窗口渲染问题

> ID：11211773
> 
> 赞同：3
> 
> 时间：2012-06-26T16:25:05.933
> 
> 标签：android-ndk, samsung-mobile, skia

我正在使用 Skia（预建）在一个 android 本机窗口中绘制，这是我从 Java 表面获得的。该代码在我可以测试的所有设备上都运行良好，除了三星 Galaxy S3（上面装有 android 4.0.4）。第一张图是我应该看到的，第二张图出现在 Galaxy S3 上：

![在模拟器上测试的屏幕截图：显示一个红色矩形](../Images/3a61d238120d5e3159603cecb36e760d.png) ![在三星 Galaxy S3 上测试的屏幕截图：显示一系列红黑斜条纹](../Images/9dd1bc742afeba36781bf69f6f7097c3.png)

绘制矩形的 jni 函数是：

```
JNIEXPORT void JNICALL Java_com_test_TestSkia_InitializeWindow(JNIEnv* env, jobject thiz, jobject surface)
{
     ANativeWindow* window = ANativeWindow_fromSurface(env, surface);
     ANativeWindow_Buffer buffer;
     ANativeWindow_lock(window, &buffer, NULL);
     SkBitmap  bitmap;
     bitmap.setConfig(convertPixelFormat(buffer.format), buffer.width, buffer.height);
     bitmap.setPixels(buffer.bits);
     SkCanvas canvas;
     canvas.setBitmapDevice(bitmap);
     SkRect rectRed;
     rectRed.setXYWH(30,30,400,700);
     SkPaint paint;
     paint.setColor(SK_ColorRED);
     canvas.drawRect(rectRed,paint);
     ANativeWindow_unlockAndPost(window);
} 
```

我在以下设备上进行了测试，没有问题：

*   Sony X8 (android 2.3.7 定制rom)
*   三星 Nexus S (安卓 4.0.4)
*   三星 Galaxy Tab 10.1 (android 3.2)
*   三星 Galaxy S2 (安卓 2.3.5)
*   模拟器（android 4.0.3，与 Galaxy S3 相同的屏幕尺寸和 dpi）

我尝试调用 ANativeWindow_setBuffersGeometry(window,0,0,0) 没有运气（无论如何，窗口锁定后缓冲区的尺寸和格式似乎没问题）。

到目前为止，只有 Galaxy S3 给我带来麻烦，此时我不知道该怎么办，我什至无法判断问题是与 ndk 原生窗口 api 还是与skia，或者可能与使用 TouchWiz 的 Galaxy S3 ......欢迎任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:55:54.283

你需要考虑`buffer.stride`到。你的照片清楚地表明你有`buffer.stride != buffer.width`

我无法测试，但可能以下更改就足够了：

```
 SkBitmap bitmap;
 SkBitmap::Config cfg = convertPixelFormat(buffer.format);
 bitmap.setConfig(cfg, buffer.width, buffer.height,
       SkBitmap::ComputeBytesPerPixel(cfg) * buffer.stride); 
```

# c++ - FBX SDK 和 C++ IO [崩溃]

> ID：11211775
> 
> 赞同：0
> 
> 时间：2012-06-26T16:25:06.683
> 
> 标签：c++, io, fbx

例如，当我使用**FILE* pFile;** 或**fstream 文件；**初始化 fbx 并加载 FBX 文件后，程序停止，我得到一个无效的堆错误。我无法找到解决此问题的方法。错误出现在函数之后

`lImporter->Initialize(filename.c_str(), -1, pSdkManager->GetIOSettings());`

这是一个常见的问题吗，有什么技巧可以将任何 IO 类和 FBX 一起使用吗？

版本 = 2012.2

dll = fbxsdk-2012.2-mdd.lib

视觉工作室 2010 专业版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:20:57.163

将您的更改`File*`为`char[]`. 这应该可以解决您的崩溃问题：

```
char fileName[] = "file.fbx";

Model yourModel (fileName); 
```

`fstream`FBX SDK 将按原样读取您的模型（在这种情况下无需包含）。

（如果不行，升级到最新的FBX SDK 2013。我用的是VS2012）

# sql-server-2008 - 微调地理空间索引

> ID：11211776
> 
> 赞同：0
> 
> 时间：2012-06-26T16:25:08.490
> 
> 标签：sql-server-2008, geospatial, geography

我刚刚将我的 SQL Server 2008 数据库从使用纬度/经度对转换为使用新的地理类型。我使用 STDistance 函数对位于 geography::Point 30 英里范围内的企业运行查询，如下所示：

```
WHERE this_.GeoLocation.STDistance(geography::Point(42.738963, -84.5522, 4326)) <= 48280.32 
```

这是我在地理列上的索引：

```
CREATE SPATIAL INDEX IDX_Business_GeoLocation
  ON Business (GeoLocation)
  USING GEOGRAPHY_GRID
  WITH (
    GRIDS = (
      LEVEL_1 = LOW, 
      LEVEL_2 = LOW, 
      LEVEL_3 = LOW, 
      LEVEL_4 = LOW),
    CELLS_PER_OBJECT = 64
  ) 
```

我真的不明白网格级别或每个对象的单元格是什么意思，但我正在寻找的是我的场景的最佳设置，我正在搜索距离点 30 英里以内的企业（纬度/长）。

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:30:36.577

这是一个鲜为人知的秘密（或者至少在我发现它之前对我来说是这样！）

```
EXEC sp_help_spatial_geography_index
@tabname = '[TABLE_NAME]',
@indexname = '[SPATIAL_INDEX_NAME]',
@verboseoutput = 1,
@query_sample = 'POLYGON((xy,xy,xy,xy))' 
```

填写明显的位，并`@verboseoutput`保持`1`。它让您了解初级和内部过滤器的效率（当然越高越好）。[如需快速了解空间索引，包括哪些网格和单元格等同于在此处](http://technet.microsoft.com/en-us/library/bb964712%28v=sql.105%29.aspx)尝试。

另外，我发现[这个](http://sqlbits.com/Sessions/Event5/creating_high_performance_spatial_databases)视频很有趣。

# java - 从 ArrayList 中删除具有特定名称的项目

> ID：11211778
> 
> 赞同：1
> 
> 时间：2012-06-26T16:25:12.867
> 
> 标签：java, android, arraylist

我有一个 ArrayList，它有时可以在不同的位置包含值“时间 (GMT)”、“无”和“无传感器”。我想删除所有这些实例，所以我写了这个小 for 循环：

```
for(int i = 0; i < trackedFieldsMod.size(); i++ ) {
    if(trackedFieldsMod.get(i).equalsIgnoreCase("Time (GMT)") || trackedFieldsMod.get(i).equalsIgnoreCase("None") || trackedFieldsMod.get(i).equalsIgnoreCase("No Sensor")) {
        trackedFieldsMod.remove(i); //Don't let users find average/mean/etc for irrelevant fields
    }
} 
```

出于某种原因，这将删除列表开头的“时间（GMT）”，以及列表末尾的任何“无”或“无传感器”，但如果我的 ArrayList 有“无”或“无传感器” “在任何地方的中间，它们都不会被删除。我无法为我的生活找出原因。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T16:30:44.583

当您删除位置 i 的列表项时，曾经位于 i + 1 的项目将被移动到 i （一切都向 i 移动 1 个单元格）。

但是，在您的下一个 for 循环迭代中， i 变为 i + 1 所以基本上您正在跳过之前在删除操作中从 i + 1 移动到 i 的项目。删除项目时需要减少 i 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T16:35:16.623

我通常会使用迭代器来做到这一点：

```
for (Iterator<String> iterator = trackedFieldsMod.iterator(); iterator.hasNext();) {
    String string = iterator.next();
     if("Time (GMT)".equalsIgnoreCase(string) || "None".equalsIgnoreCase(string) || "No Sendor".equalsIgnoreCase(string)) {
            iterator.remove(); //Don't let users find average/mean/etc for irrelevant fields
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:21:49.207

为了完整起见，我将补充一点，您还可以使用一些方便的方法来执行此类操作：

```
List<String> toRemove = Arrays.asList("Time (GMT)", "None", "No Sendor");
trackedFieldsMod.removeAll( toRemove ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:34:21.863

只需使用包含字符串的方法..它应该可以解决您的问题

# java - 需要解析Hashtable中的数据

> ID：11211780
> 
> 赞同：0
> 
> 时间：2012-06-26T16:25:18.467
> 
> 标签：java, parsing, hashtable, key-value

我通过以下方式在哈希表中有数据：

```
key : year    value : 2011  2011
key : title   value : Almayer's Folly     Faust 
```

我有两个由制表符空格分隔的键和值。

我需要以下列方式输出。

```
Year     Title
2011     Almayer's Folly
2011     Faust 
```

我怎样才能以所需的方式解析哈希表中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:46:12.683

这对我有用，但你必须每年都有一个标题，每个标题都有一年

```
Hashtable<String, String> map = new Hashtable<String, String>();
    map.put("Year", "2011   2011");
    map.put("Title", "Almayer's Folly   Faust");

    String[] rows = null;

    for (String key : map.keySet()) {

        String value = map.get(key);

        String[] elements = value.split("\t");

        if (rows == null) {
            rows = new String[elements.length + 1]; // Element rows + Title row
            for (int i = 0; i < rows.length; i++) {
                rows[i] = "";
            }
        }
        String prefix = "";
        if (!rows[0].equals("")) { // On first append no tab
            prefix = "\t";
        }

        rows[0] += prefix + key; // append Title

        for (int i = 1; i < rows.length; i++) {
            rows[i] += prefix + elements[i - 1]; // Append Data 
        }

    }

    for (String row : rows) {
        System.out.println(row);

    } 
```

输出：

```
Year    Title
2011    Almayer's Folly
2011    Faust 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:28:03.320

这很简单，您可以使用一组键迭代 HashTable：

```
System.out.println("Year\tTitle");
keys = table.keySet();
for (String key : keys)
    System.out.println(key + "\t" + table.get(key); 
```

假设年份是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:58:15.770

首先，您的方法是管理这种结构的一种非常脆弱的方式。至少您应该将值设为某种列表。我怀疑这是您想要解决的某种练习/家庭作业之类的问题。

话虽如此，我将以伪代码的方式用 Tony 的评论扩展 pb2q 的答案。

结构中的制表符对您想要的输出毫无用处，因此它们只会用作分隔符。

```
System.out.println("Year\tTitle");
keys = table.keySet();
Map<Scanner> scanners = new Map<Scanner>();
for (String key : keys){
    // Here comes the trick
    scanners[i] = new Scanner( table.get(key) ).useDelimiter("\t");
}
-Print headings.
//Now you can pull elements from each scanner until they are empty.
boolean hasMoreElements = true;
while( hasMoreElements ){
  for ( key : keys){
     print  scanners[key].next()
  }
  printLine
  hasMoreElements = scanners[key].hasNext()
} 
```

一个正面的方法，使用原始数据和非常有用的扫描仪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:16:08.790

您存储数据的方法很糟糕。在您的表格中，您基本上表明您将使用 2011 作为您的密钥……就这样做吧！

另一个问题是您不应该在地图中使用制表符来分隔不同的数据。更合乎逻辑的一种更简单的方法是将制表符分隔的数据存储在列表中，没有制表符。

这是您尝试做的事情，表明您可以在将内容添加到地图之前或之后将其添加到列表中。

```
 HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>();
    ArrayList<String> titles2011 = new ArrayList<String>();
    titles2011.add("Almayer's Folly");
    map.put("2011", titles2011);
    map.get("2011").add("Faust");

    System.out.println("Year\tTitle");
    for (String year : map.keySet()) {
        for (String title : map.get(year)) { 
            System.out.println(year+"\t"+title);
        }
    } 
```

我还建议阅读[java.util.map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)和[java.util.HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)的开头。以及查找[哈希表](http://en.wikipedia.org/wiki/Hash_table#Collision_resolution)的用途和用途，更具体地说，如何处理冲突（一旦您学习了如何正确使用哈希表，您就会拥有）。

# ruby-on-rails - 在 ruby on rails 中动态解析字符串

> ID：11211787
> 
> 赞同：0
> 
> 时间：2012-06-26T16:25:51.073
> 
> 标签：ruby-on-rails, string-parsing

我有一个只有两个键的哈希图。一个关键，价值是有这样的模式 -

```
"flownamewkf1_somethingwkf2_something.." => 1" 
```

第二个键值具有这样的模式 -

```
"some_name" => "group_name" 
```

现在我想以这种方式创建一个新字符串：

```
make-deployment-group --flowname/wkf1_something --flowname/wkf2_something group_name 
```

有时 flowname 只能有一个 wkf 名称，然后第一个键，值将是`"flownamewkf1_something" => 1"` ，字符串应该是

```
make-deployment-group --flowname/wkf1_something group_name 
```

所以，我需要根据 wkf 的数量动态生成字符串，flowname 有并`group_name`在末尾添加 make-deployment-group 在开头，文件夹和 wkf 名称在中间

我试过`string.partition(/wkf/)`了，但是将字符串分成三个部分 flowname，wkf，rest of part

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:36:51.997

我不完全确定你在问什么。但也许你可以接受它并运行它。

```
1.8.7 :049 > flowname, *wkf = "flownamewkf1_somethingwkf2_something".split(/wkf/)
 => ["flowname", "1_something", "2_something"] 
1.8.7 :050 > params = wkf.collect{|w| "--#{flowname}/wkf#{w}"}
 => ["--flowname/wkf1_something", "--flowname/wkf2_something"] 
1.8.7 :052 >   "make-deployment-group #{params.join(' ')}"
 => "make-deployment-group --flowname/wkf_something--flowname/wkf_something" 
```

然后，您可以添加该 group_name。

# gnuplot - 如何转储当前绘图的命令

> ID：11211788
> 
> 赞同：6
> 
> 时间：2012-06-26T16:25:52.447
> 
> 标签：gnuplot

在交互模式下，gnuplot 会记住当前绘图的所有设置。当我输入“replot”时，它知道该怎么做。那么，有没有办法将所有当前设置转储到脚本文件中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T16:49:58.483

见`save`命令。

您可以按如下方式使用它：

```
save "My_stuff_goes_to_this_file.txt" 
```

这是文档的（小）摘录：

> 该`save`命令将用户定义的函数、变量、`set term`状态、所有`set`选项或所有这些以及最后一个`plot` ( `splot`) 命令保存到指定文件。
> 
> 语法：save {option} 'filename'

# php - SMTP：无法连接套接字：连接被拒绝

> ID：11211789
> 
> 赞同：4
> 
> 时间：2012-06-26T16:25:54.757
> 
> 标签：php, email, smtp, pear

我正在尝试使用 PEAR Mail 包和 SMTP 在 PHP 中发送电子邮件，但我不断收到错误消息`SMTP: Failed to connect socket: Connection Refused`

我对 SMTP 的工作原理一无所知，所以请耐心等待。

**这是我的代码：**

```
$recipients = $_SESSION['email'];
$headers["From"] = "example@example.com";
$headers["To"] = "example@example.com";
$headers["Subject"] = 'Subject Text!';
$mailmsg = $_SESSION['body'];

/* SMTP server name, port, user/password */
$smtpinfo["host"] = "mail.example.com";
$smtpinfo["port"] = "587";
$smtpinfo["auth"] = true;
$smtpinfo["username"] = $email_user;
$smtpinfo["password"] = $email_pass;
/* Create the mail object using the Mail::factory method */
$mail_object =& Mail::factory("smtp", $smtpinfo);
/* Ok send mail */
$send = $mail_object->send($recipients, $headers, $mailmsg);
if (PEAR::isError($send)) {
    echo '<p>Error: ' . $send->getMessage() . '</p>';
} else {
    header('Location: ../../emailed.php');
} 
```

**我所知道的是：**

域是 hostgator，电子邮件处理程序是 Keiro Connect。

我不确定要通过哪个端口。我查看了服务，它说侦听 IP 地址是：

*   SMTP：所有地址：25，所有地址：587
*   安全 SMTP：所有地址：465
*   SMTP 提交：所有地址：587 **虽然此服务已关闭*

我还注意到 SMTP 传递设置为使用 DNS MX 记录直接传递。我不知道这是否意味着什么。

我究竟做错了什么？我应该寻找什么才能按顺序获取所有参数？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:32:20.480

仅仅因为您正在侦听端口并不意味着您可以访问它。系统或上游内联设备上的防火墙可能会阻止它。

从您正在运行脚本的本地机器上，您是否会收到`telnet mail.example.com 587`提示？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T20:36:14.013

如果您没有 ssl 认证，我建议使用端口 25。获得 ssl 后，我会将端口配置更改为 465。您为什么使用该端口号？我认为它不符合hostgator。从 hostgator 查看此网页。[http://support.hostgator.com/articles/email-connection-settings](http://support.hostgator.com/articles/email-connection-settings)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T08:12:45.160

我以前遇到过这样的问题.. 并且用尽了我的时间来解决...
**在服务器上尝试您的脚本**.. 有时**对于某些 SMTP 主机，您无法从本地计算机发送电子邮件**。
我添加答案（或建议）为时已晚..但这可能对某人有所帮助..

# networking - iSCSI 数据传输数据包开销

> ID：11211794
> 
> 赞同：0
> 
> 时间：2012-06-26T16:26:06.433
> 
> 标签：networking, tcp, packets, iscsi, scsi

诚然，这个问题与[iSCSI Packet Header](https://stackoverflow.com/questions/7886594/iscsi-packet-header)重叠，但我希望得到一个比为我更具体的问题提供的更具体的答案。

问题：iSCSI 和 SCSI 在传输数据以读取或写入时引入了多少开销？

我知道这是在数据输入和数据输出传输数据包中完成的，并且我知道 TCP/IP 和以太网会产生开销，但是 iSCSI/SCSI 需要哪些额外开销？我认识到 SCSI 协议数据单元 (PDU) 通过某种算法打包到 TCP 数据报中，但我不确定该算法。

我意识到发起者和目标之间需要进行完整的对话，我将忽略那部分。所以，我只想知道在读或写命令之后发送的数据包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:28:09.733

这是我通过查看 iSCSI RFC 3720 收集的内容。

协议数据单元（PDU - iSCSI“数据包”）具有以下元素：

1.  基本头段 - 48 字节
2.  附加标头段 - 可选 - 0 字节（假设不需要这些）
3.  Header Digest - 4 个字节（可选，但想要这个）
4.  数据段 - 8192 字节（最大接收数据长度在发起者和目标之间协商，默认为 8192，因此将使用它）
5.  数据摘要 - 4 个字节（可选，但需要这个）

因此，我看到传输 8192 字节的实际数据需要 56 字节的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T18:22:38.697

对于阅读以下内容是正确的。但是对于写入（如果未启用即时数据），目标需要额外的字节来发送另一个称为 R2T 的 PDU，它是 48 个字节。摘要很少使用，因为大多数 iSCSI 连接都是本地连接，并且 TCP/IP 具有 CRC。

# dynamics-crm - 如何在相同的 2 个实体之间完成 fetchXML 中的 2 个外部连接？

> ID：11211800
> 
> 赞同：2
> 
> 时间：2012-06-26T16:26:33.880
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在尝试在 fetchXML 中建立 2 个左外连接。我可以完成这个sql语句吗...

```
select
a.new_campaignid
, a.new_ContactId
, b.new_campaigncontactstatusId
from
new_ContactCampaignNN AS a 
    left outer join new_campaigncontactstatus AS b ON a.new_contactid = b.new_ContactId 
        AND a.new_campaignid = b.new_CampaignId 
```

进入这样的 fetchXML 语句？

```
<fetch mapping='logical' distinct='true'>
  <entity name='new_contactcampaignnn'>
    <attribute name='new_campaignid' />
    <attribute name='new_contactid' />
    <filter type='and'>
      <condition attribute ='new_campaignid' operator='eq' value='72C9284B-905D-E111-9847-002655325864'/>
    </filter>
    <link-entity name='new_campaigncontactstatus' from='new_contactid' to='new_contactid' visible='true' link-type='outer' alias='new_contactcampaignnn_new_campaigncontactstatus'>
      <attribute name='new_campaigncontactstatusid' />
      <link-entity name='new_contactcampaignnn' from='new_campaignid' to='new_campaignid' visible='true' link-type='outer' alias='new_contactcampaignnn_new_campaigncontactstatus1'></link-entity>
    </link-entity>
  </entity>
</fetch> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:48:48.627

我认为[LINQtoCRM](http://linqtocrm.codeplex.com/)可以做到这一点，您可能也可以使用[LinqPad](http://archive.msdn.microsoft.com/crmlinqpad/)进行探索。

# javascript - 使用 javascript 小书签将单词附加到 Google 日历事件的标题

> ID：11211803
> 
> 赞同：1
> 
> 时间：2012-06-26T16:26:44.017
> 
> 标签：javascript, bookmarklet

我为 4 个分支机构维护了一个谷歌日历。我目前有一个小书签（实际上是 4 个），让我通过简单的点击输入准确的地址。但是，我想添加到该功能，以便当我单击按钮时，除了粘贴适当的地址外，它还会将分支的名称添加到标题的末尾。我想为此添加代码，因此当我单击它时，它`(Headquarters)`会附加到标题的末尾。

```
javascript:var a=document.getElementsByClassName('textinput')[1];a.value='Headquarters Branch, Street, County, State, 12345';var e=document.createEvent("HTMLEvents");e.initEvent('change',true,true);a.dispatchEvent(e);void(0); 
```

奖励：默认情况下，日历选择器设置为总部。如果我也可以在单击其他分支之一时将其更改为适当的分支，那就太棒了！

# java - Java - 如何避免使用未装饰或自定义的 LookAndFeel 窗口覆盖任务栏？

> ID：11211808
> 
> 赞同：1
> 
> 时间：2012-06-26T16:27:03.240
> 
> 标签：java, swing, look-and-feel

是的，有些问题很接近:)

Java 中有一个错误（自 2011 年以来一直存在并报告，似乎也没有努力修复它 - 应该在 VM 的本机端处理）

也就是说，当您最大化“未装饰”的窗口或以 PLAF 外观绘制的窗口时，它将覆盖 Windows 任务栏。很好 -*当你想要它*时可取，但当你想要任务栏最大化时，窗口会覆盖它。设置“始终在顶部”属性没有任何区别。

是的，可以调整窗口大小，但必须知道任务栏在哪里，或者屏幕大小减去任务栏——知道怎么做吗？

如果这样做的话，你需要知道你在没有任务栏的屏幕上最大化。如果在多显示器虚拟桌面上...

有任何想法吗 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T19:15:02.077

> 是的，可以调整窗口大小，但必须知道任务栏在哪里，或者屏幕大小减去任务栏——知道怎么做吗？

是的：

1.查找您正在使用的图形设备（假设 p 是`Point`您正在寻找的屏幕的 a）：

```
GraphicsConfiguration graphicsConfiguration = null;
for (GraphicsDevice gd : GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()) {
    if (gd.getDefaultConfiguration().getBounds().contains(p)) {
        graphicsConfiguration = gd.getDefaultConfiguration();
        break;
    }
} 
```

2.查看屏幕边界（注意一些边界位置在多个屏幕上是负数 - 例如，如果您有一个位于主屏幕左侧的辅助屏幕），屏幕尺寸和“插图”屏幕通常是任务栏和/或其他图形工件：

```
Rectangle screenBounds = graphicsConfiguration.getBounds();
Dimension screenSize = screenBounds.getSize();
Insets screenInsets = Toolkit.getDefaultToolkit()
     .getScreenInsets(graphicsConfiguration); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:04:40.823

谢谢

这是上面的代码，在系统最大化窗口后立即调用。它检查任务栏并相应地调整窗口大小。

请注意，就 Java 而言，setBounds 将“取消最大化”窗口，因此“getExtendedState()”将返回未最大化，我需要维护自己的标志。我还必须缓存最后一个预先最大化的窗口大小，这样我就知道以后在哪里恢复窗口 - 太乱了，但它可以工作。

```
Rectangle bounds;
Rectangle fbounds = frame.getBounds();
GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();

// as system maximized this at this point we test the center of the window
// as it should be on the proper screen.
Point p = new Point(fbounds.x + (fbounds.width/2),fbounds.y + (fbounds.height/2));
GraphicsConfiguration graphicsConfiguration = null;
for (GraphicsDevice gd : GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices())
{
    if (gd.getDefaultConfiguration().getBounds().contains(p)) {
        graphicsConfiguration = gd.getDefaultConfiguration();
        break;
    }
}
if(graphicsConfiguration != null)
{
    bounds = graphicsConfiguration.getBounds();
    Insets screenInsets = Toolkit.getDefaultToolkit().getScreenInsets(graphicsConfiguration);

    bounds.x += screenInsets.left;
    bounds.y += screenInsets.top;
    bounds.height -= screenInsets.bottom;
    bounds.width -= screenInsets.right;
} else {
    bounds = env.getMaximumWindowBounds();
}
if(fbounds.equals(bounds)) {
    bounds.height -= 1;
}
frame.setBounds(bounds); 
```

# python - 将时间列表与时间范围列表相交的最佳方法

> ID：11211816
> 
> 赞同：2
> 
> 时间：2012-06-26T16:27:20.417
> 
> 标签：python

基本上我所拥有的是：

```
secondData = [["8:33:00", 5], ["8:33:01", 3], ...] # and so forth
minuteData = [["8:33:00", 6], ["8:34:00", 5], ...] # and so forth 
```

现在假装时间是一个实际的日期时间对象

我想要做的是找到最有效的方法来遍历分钟数据并获取该分钟所有包含的秒数据。例如，如果我有“8:34:00”，我想要“8:34.00”..“8:34:59”。有没有一种简单的方法可以为此或其他东西制作列表过滤器？

我应该注意，这些列表是按时间顺序排列的，但是可能会丢失第二个数据。例如，我可能只有 9:58 分钟的 33 个数据点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:30:06.363

使用[bisect](http://docs.python.org/library/bisect.html)。

```
from bisect import bisect_left
secondData[bisect_left(secondData, "8:33:00"):bisect_left(secondData, "8:34:00")] 
```

这将为您`secondData`提供半开区间 ["8:33:00".."8:34:00") 的切片。

# jquery - 获取 iframe 中的每个输入属性

> ID：11211836
> 
> 赞同：0
> 
> 时间：2012-06-26T16:29:01.697
> 
> 标签：jquery

我的域上有一个 iframe，我想获取每个输入字段的属性。我正在使用类似下面的代码，但显然它不起作用。任何有关修改代码的帮助将不胜感激。谢谢。

```
$('#iFrame_Id').contents().find(function() { 
   $("#Their_Form :input").each(function(){
      var name = $(this).attr("name");
   }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:31:38.607

```
$('#iFrame_Id').contents().find( "#Their_Form :input" ).each(function(){
      var name = $(this).attr("name");
      console.log(name);
}); 
```

# iphone - CAKeyframeAnimation 延迟后重复

> ID：11211839
> 
> 赞同：3
> 
> 时间：2012-06-26T16:29:13.740
> 
> 标签：iphone, objective-c, xcode, animation, cakeyframeanimation

我有 3 个 uiviews，其中添加了一个 CAKeyframeAnimation 层来反弹。目前我在延迟后将这些添加到每个 uiview 并将它们设置为重复。

我需要他们做的是重复但延迟之后。所以视图 1 动画，但要等到视图 2 和 3 动画之后再开始。

我似乎无法阅读文档中提到重复 CAKeyframeAnimation 并具有重复开始时间延迟的任何地方。

谁能想到一个想法来解决观点之间的延迟？

谢谢

担

到目前为止的代码：

```
- (CAKeyframeAnimation *)jumpAnimation
 {
// these three values are subject to experimentation
CGFloat initialMomentum = 80.0f; // positive is upwards, per sec
CGFloat gravityConstant = 250.0f; // downwards pull per sec
CGFloat dampeningFactorPerBounce = 0.6;  // percent of rebound

// internal values for the calculation
CGFloat momentum = initialMomentum; // momentum starts with initial value
CGFloat positionOffset = 0; // we begin at the original position
CGFloat slicesPerSecond = 60.0f; // how many values per second to calculate
CGFloat lowerMomentumCutoff = 5.0f; // below this upward momentum animation ends

CGFloat duration = 0;
NSMutableArray *values = [NSMutableArray array];

do 
{
    duration += 1.0f/slicesPerSecond;
    positionOffset+=momentum/slicesPerSecond;

    if (positionOffset<0)
    {
        positionOffset=0;
        momentum=-momentum*dampeningFactorPerBounce;
    }

    // gravity pulls the momentum down
    momentum -= gravityConstant/slicesPerSecond;

    CATransform3D transform = CATransform3DMakeTranslation(0, -positionOffset, 0);
    [values addObject:[NSValue valueWithCATransform3D:transform]];
} while (!(positionOffset==0 && momentum < lowerMomentumCutoff));

CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"transform"];
animation.duration = duration;
animation.fillMode = kCAFillModeForwards;
animation.values = values;
animation.repeatCount = HUGE_VAL;
animation.delegate =self;
animation.autoreverses = YES;

return animation; 
```

}

# c++ - LINK : 致命错误 LNK1248: 图像大小超过最大允许大小 (80000000)

> ID：11211840
> 
> 赞同：4
> 
> 时间：2012-06-26T16:29:20.230
> 
> 标签：c++, visual-studio-2010, memory-management, out-of-memory

我正在做一些非常大的数组处理。我做了一个全球声明：

```
`float array[200][1600][811];` 
```

当我在 MS Visual Studio 2010 中构建解决方案时，出现以下错误

`LINK : fatal error LNK1248: image size (F85C8000) exceeds maximum allowable size (80000000)`

现在，我知道这相当于大约 1 GB 的程序内存。但该声明适用`float [50][1600][811]`于 250 MB 的声明。我知道默认堆栈大小非常有限。我已经尝试过几件事。我通过 Properties -> Linker -> Stack reserved size 增加了 VS 中的堆栈大小。这没有帮助。我将我的可执行文件更改为在 x64 模式下运行（据说可以寻址高达 2GB 的内存！）。这也没有帮助。

我不想`malloc`在数组上做 a ，因为我确定我的代码中需要它们。我必须对它们进行全局声明，以便我可以利用堆栈/堆内存。如果我在 my 中声明它们`Main ()`，则会出现内存溢出错误。

任何指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:05:30.837

似乎即使您正在构建 x64 可执行文件，链接器也有更适合 x86 构建的限制。你对此无能为力。

唯一的解决方案是从堆中分配它。这应该以与您的原始声明相同的方式使用。

```
typedef float partial_array[1600][811];
std::unique_ptr<partial_array> array = new partial_array[200]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T16:44:28.437

如果你是`malloc`不利的，你有两个立即明显的可能性。C++11 有一个很好的数组类型，它可能会有所帮助：

```
std::array<std::array<std::array<float, 50>, 1600>, 811> matrix; 
```

或者您可以考虑使用`std::vector`with 循环来正确初始化所有值：

```
std::vector<std::vector<std::vector<float>>> matrix;
matrix.reserve(50);

for (size_t i = 0; i < 50; i++)
{
    std::vector<std::vector<float>> submatrix;
    submatrix.reserve(1600);

    for (size_t j = 0; j < 1600; j++)
    {
        std::vector<float> row;
        row.resize(811);

        submatrix.push_back(row);
    }

    matrix.push_back(submatrix);
} 
```

# drop-down-menu - Selenium IDE 下拉菜单项

> ID：11211841
> 
> 赞同：1
> 
> 时间：2012-06-26T16:29:25.780
> 
> 标签：drop-down-menu, selenium-ide

我正在使用**Selenium IDE**，并且我有一个动态**下拉**菜单，我需要从中选择一个特定的值。测试工作正常，直到它到达必须选择项目的部分。到目前为止，我的命令包括：

```
    类型 | id=finditem | 瑟
    类型键 | id=finditem | 瑟

```

在这一点上，我有一个没有选择的**下拉**菜单。我使用 FireFinder 发现我必须选择的下拉项目有：

```
<<"a class="ui-corner-all" tabindex="-1">> 
```

我还使用 Firebug 来检查元素并找到这个 CSS 路径：

```
html body ul.ui-autocomplete li.ui-menu-item a.ui-corner-all 
```

如果有人有任何建议，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:38:41.757

使用以下命令

```
command select               
Target css=yourdropdowncss   //Css or xpath of that dropdown
Value label=firstitem        //option from dropdown you want to select 
```

试试看..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T05:08:52.430

我使用下面的代码在下拉框中选择一个动态值，它创造了奇迹。

```
 <tr>
    <td>click</td>
    <td>name=cmb_text_xxx</td>
    <td></td>
</tr>
    <tr>
        <td>mouseOver</td>
        <td>css=a:contains(&quot;xxx&quot;)</td>
        <td></td>
    </tr>
    <tr>
        <td>mouseDown</td>
        <td>css=a:contains(&quot;xxx&quot;)</td>
        <td></td>
    </tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T17:34:51.390

由于上述解决方案都不起作用（我有一个文本字段，只有在通过输入真实地址生成下拉菜单然后单击时才会起作用）这是我的解决方案：

```
<tr>
    <td>type</td>
    <td>id=address</td>
    <td>1 Eglinton Avenue East, Toronto, ON M4P 1P1, Canada</td>
</tr>
<tr>
    <td>keyDown</td>
    <td>id=address</td>
    <td>\40</td>
</tr>
<tr>
    <td>keyDown</td>
    <td>id=address</td>
    <td>\40</td>
</tr>
<tr>
    <td>click</td>
    <td>id=ui-active-menuitem</td>
    <td></td>
</tr> 
```

编辑：您可能还需要断言/等待下拉菜单（id=ui-active-menuitem）首先出现。但是，如果速度设置为“快”，它会失败，因此请尝试中等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-05T09:48:40.510

（通过单击主下拉菜单选择目标：）

```
mouseover target= xpath:idRelative value= blank 
```

（通过单击特定的下拉菜单选择目标：）

```
mouseover target= xpath:idRelative value= blank 
```

（然后：）

```
clickAndWait target=[same as above specific xpath] value=blank 
```

# matlab - Matlab：优化循环中函数调用和余弦符号查找的速度

> ID：11211842
> 
> 赞同：0
> 
> 时间：2012-06-26T16:29:27.830
> 
> 标签：matlab, eventtrigger, trigonometry, plane, dot-product

有问题的代码在这里：

```
function k = whileloop(odefun,args)
    ...
    while (sign(costheta) == originalsign)
        y=y(:) + odefun(0,y(:),vars,param)*(dt); % Line 4
        costheta = dot(y-normpt,normvec);
        k = k + 1;
    end
    ...
end 
```

澄清一下，odefun 是 F1.m，我的一个 m 文件。我将它传递给包含这个 while 循环的函数。有点像`whileloop(@F1,args)`。上面代码块中的第 4 行是欧拉方法。

我使用while循环的原因是因为我想在向量“y”穿过由点定义的平面“normpt”和垂直于平面的向量“normvec”时触发。

是否对这段代码进行了简单的更改，可以显着加快速度？我是否应该尝试学习如何制作 mex 文件（以提高速度）？

编辑：

这是一个可以尝试测试的示例的匆忙尝试。我没有调试过这个。就是给你一个思路：

```
%Save the following 3 lines in an m-file named "F1.m"
function ydot = F1(placeholder1,y,placeholder2,placeholder3)
    ydot = y/10;
end

%Run the following:
dt = 1.5e-12 %I do not know about this. You will have to experiment.
y0 = [.1,.1,.1];
normpt = [3,3,3];
normvec = [1,1,1];
originalsign = sign(dot(y0-normpt,normvec));
costheta = originalsign;
y = y0;
k = 0;
while (sign(costheta) == originalsign)
    y=y(:) + F1(0,y(:),0,0)*(dt); % Line 4
    costheta = dot(y-normpt,normvec);
    k = k + 1;
end
disp(k); 
```

dt 应该足够小，以至于需要数十万次迭代才能触发。

**假设我必须使用欧拉方法。如果您对我为什么告诉您做出这样的假设感到好奇，我有一个带有状态相关噪声的随机微分方程。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:40:39.013

我将专注于您的实际 ODE 集成。您必须采取的步骤越少，循环运行的速度就越快。在您优化实际集成方法后，我只会担心符号检查的速度。

看起来您正在使用一阶显式欧拉方法。您是否尝试过高阶积分器或隐式方法？通常，您可以显着增加时间步长。

# c# - 这在 DataGrid 控件中可行吗？

> ID：11211845
> 
> 赞同：0
> 
> 时间：2012-06-26T16:29:44.350
> 
> 标签：c#, wpf, winforms, datagrid

我正在规划软件（供私人使用）.. 应用程序的主要功能是数据网格。

我将有一个向数据网格添加新行的按钮。我正在考虑直接在数据网格中添加行，而不是使用另一个窗口来添加数据。换句话说，当我点击“新建”时，一个新行将直接出现在可编辑的数据网格中，直到我点击保存。在编辑过程中，某些字段可以有下拉菜单。这可以使用带有 Windows 窗体或 WPF 的 C# 来实现吗？如果可能，演示的代码会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:52:14.993

这是 Windows 窗体的示例代码。您必须创建一个表单，在其中添加一个 DataGridView 组件（您可以选择一些列）。还添加 btnNew 和 btnSave 按钮并绑定到相应的单击事件。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        // Hide row headers
        dataGridView1.RowHeadersVisible = false;
    }

    // Add new row to grid
    private void btnNew_Click(object sender, EventArgs e)
    {
        // Insert new row as the first row
        dataGridView1.Rows.Insert(0, new DataGridViewRow());

        // Set the current cell to the first cell in the newly added row
        dataGridView1.CurrentCell = dataGridView1.Rows[0].Cells[0];

        // Begin edit so that the focus goes straight to the new row
        dataGridView1.BeginEdit(false);
    }

    // "Save" (make the rows non editable)
    private void btnSave_Click(object sender, EventArgs e)
    {
        foreach (DataGridViewRow row in dataGridView1.Rows)
        {                
            // Set readonly so the user won't be able to edit these rows anymore
            row.ReadOnly = true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:48:42.743

这是一个工作示例，应该为您提供实现此功能的跳板：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <Button Content="Add New Item" x:Name="myButton" Click="myButton_Click" />
        <DataGrid x:Name="myGrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" CanUserAddRows="False" />
    </StackPanel>
</Window> 
```

代码隐藏：（不是代码背后的粉丝，而是一个快速而肮脏的例子）

```
public partial class MainWindow : Window
{

    ObservableCollection<MyViewModel> guys { get; set; }

    public MainWindow()
    {
        InitializeComponent();
        guys = new ObservableCollection<MyViewModel>();
        guys.Add(new MyViewModel { Name = "First Guy", Age = 21, FavoriteColor = "Blue" });
        guys.Add(new MyViewModel { Name = "Second Guy", Age = 22, FavoriteColor = "Red" });
        guys.Add(new MyViewModel { Name = "Third Guy", Age = 23, FavoriteColor = "Yellow" });
        guys.Add(new MyViewModel { Name = "Fourth Guy", Age = 24, FavoriteColor = "Green" });
        myGrid.ItemsSource = guys;
    }

    public class MyViewModel
    {
        public String Name { get; set; }
        public int Age { get; set; }
        public String FavoriteColor { get; set; }
    }

    private void myButton_Click(object sender, RoutedEventArgs e)
    {
        guys.Add(new MyViewModel { Name = "[New Guy]", Age = 0, FavoriteColor = "[Color]" });
    }

} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:58:02.130

这是一个使用数据绑定的简短示例：*

在 XAML 中：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Margin="0,0,417,277" Click="Button_Click">ADD</Button>
        <DataGrid ItemsSource="{Binding MyDataTable}" Margin="0,40,0,21" CanUserAddRows="False">
        </DataGrid>
    </Grid>
</Window> 
```

在 .cs 后面的代码中：

```
using System;
using System.Windows;
using System.Data;
using System.ComponentModel;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window , INotifyPropertyChanged
    {

        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;

            MyDataTable = new DataTable();
            MyDataTable.Columns.Add("Column1");
            MyDataTable.Columns.Add("Column2");

        }
        private DataTable _MyDataTable;
        public DataTable MyDataTable
        {
            get
            {
                return _MyDataTable;
            }
            set
            {
                _MyDataTable = value;
                NotifyPropertyChanged("MyDataTable");
            }
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            DataRow row = MyDataTable.NewRow();

            MyDataTable.Rows.Add(row);

        }

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
    }
} 
```

# javascript - 在构建小部件时本地化 jQuery 变量。如何在另一个对象中引用 jQuery？

> ID：11211848
> 
> 赞同：0
> 
> 时间：2012-06-26T16:29:59.750
> 
> 标签：javascript, jquery, oop, scope

我正在关注这个[关于构建小部件的教程](http://alexmarandon.com/articles/web_widget_jquery/)

在该教程中，他正在测试页面上是否存在 jquery，如果不存在，则加载它。

我[在这个小提琴中重新创建了他的代码](http://jsfiddle.net/xQBwt/)

我添加了另一个对象 CssLoader，但我无法在该对象中使用 jquery。您可以看到我的警报不起作用。

我应该如何确保 jquery 在 CssLoader 和我创建的任何其他对象中可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:51:21.257

我刚刚调整了你的代码

```
var CssLoader = (function(){
    var $=''; //the global $ inside CssLoader
    function init($, cssPathArray){ // Receive the jquery in the first argument
        $=jq; // assign jQuery to global $, so it'll be available inside CssLoader
        alert( $('body') );            
    }

    return {
        init : init
    };
})(); 
```

内部函数`main`调用`CssLoader.init`如下

```
CssLoader.init($, ['cssPath1', 'cssPath2']); // Pass the jquery in the first argument 
```

[**演示。**](http://jsfiddle.net/heera/xQBwt/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:40:34.020

首先，您正在本地化 jQuery，然后尝试从另一个匿名函数调用它。你为什么要这样做？

但是，这些文档应该有所帮助：[http ://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

# objective-c - -isKindOfClass：不使用 NSCFString

> ID：11211854
> 
> 赞同：1
> 
> 时间：2012-06-26T16:30:12.150
> 
> 标签：objective-c, introspection

为什么我的 if 语句不起作用？它不接受 NSCFStrings ......基本上我正在这样做：

```
if ([myObj isKindOfClass:[NSString class]]) {
    // ...
}
else if ([myObj isKindOfClass:[NSNumber class]]) {
    //...
}
else {
    NSLog(@"Invalid NSMutableArray.\n\tWrong type in array: %@, The value is: %@.",[myObj class], myObj);
} 
```

这是一个循环，我在其中迭代一个 NSMutableArray，里面只有 NSNumbers 和 NSStrings。
奇怪的是，它接受 NSNumbers，但不接受 NSStrings！
输出总是：

```
Invalid NSMutableArray.
    Wrong type in array: NSCFString, The value is: [Value I put in the string]. 
```

我认为 NSCFString 是 NSString 的子类并且也`-isKindOfClass:`检测到子类？

**更新：**
我自己解决了。这确实是由于——正如@jjv360 所说——第二个 if 之前缺少 else。我认为这是一个错字，因为我在这里重新输入了它而不是复制粘贴，*因为*我嵌套了更多`if-else`的 s 并且事情变得混乱（这是一个谷歌翻译）。
毕竟很傻。

jjv360 请将此作为答案发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:01:19.880

这是我作为答案发布的评论：

`else`您的 if 语句之间缺少一条语句。没有它，它将运行第一个块中的代码以及最后一个 else 块中的代码......

# objective-c - Objective-C正确使用ARC块？

> ID：11211859
> 
> 赞同：0
> 
> 时间：2012-06-26T16:30:23.943
> 
> 标签：objective-c, automatic-ref-counting, block, objective-c-blocks

我知道以前有人问过这个问题，但是没有一个解决方案可以解决我的问题，所以我再次问这个问题。作为通过块回调的结果，我试图在 self 上调用一个方法。我收到以下错误：

**在此块中强烈捕获“自我”可能会导致保留周期**

```
- (void)viewDidLoad {
   [super viewDidLoad];

   self.webClient.completionHandler = ^{
      [self populateData];
   };
} 
```

我尝试做类似下面代码的事情，但我仍然收到同样的警告。解决方案是什么？

```
__weak id myself = self;
[myself populateData]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:38:31.023

您的代码应如下所示：

```
- (void)viewDidLoad {
   [super viewDidLoad];

   __weak id weakSelf = self;
   self.webClient.completionHandler = ^{
      [weakSelf populateData];
   };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T15:35:36.900

UIAdam 给出了正确的答案，但值得理解为什么它是正确的。

首先，您为什么收到警告？

self 对 webClient 有很强的引用。webClient 对 completionHandler 有很强的引用。completionHandler 对 self 有很强的引用。因此，如果您的程序中的所有其他引用都消失了，那么在这个循环中仍然存在对每个项目的强引用，因此它们永远不会被释放。

写作的尝试

```
__weak id myself = self;
[myself populateData]; 
```

当然不起作用。该块仍然引用自我，因为它正在将它分配给我自己。所以这里没有区别。

UIAdam 的写作解决方案

__weak id 弱自我 = 自我；self.webClient.completionHandler = ^{ [weakSelf populateData]; };

表示weakSelf是一个弱引用，block只包含一个对self的弱引用。因此，如果所有其他对 self 的强引用都消失了，则只剩下一个弱引用。弱引用不会使 self 保持活动状态，因此 self 会被释放。

现在如果发生这种情况，但是其他东西对 webClient 有很强的引用并且你的块被调用了怎么办？weakSelf 是一个弱引用，当对象被释放时，弱引用被设置为 nil。所以你必须做好准备，当你的块被调用时，weakSelf 为零。实际上写得更好

```
id strongSelf = weakSelf;
[strongSelf populatedData]; 
```

块内部：strongSelf 可能设置为 nil，或者将设置为 self。但由于它是一个强引用，所以在块完成之前它将保持非零。如果它不是零开始的。

# list - ListAppend() 不起作用？

> ID：11211861
> 
> 赞同：6
> 
> 时间：2012-06-26T16:30:25.517
> 
> 标签：list, function, coldfusion, append

我的 cfml 代码有问题。该`ListAppend()`功能似乎不起作用。

这是我的 .cfm 页面中的代码：

```
<cfset fruitList="apple, orange, banana">

<cfoutput>
    fruitList before: #fruitList#<br>
</cfoutput>

<cfset temp = ListAppend(fruitList, "kiwi")>
<cfoutput>
    fruitList after: #fruitList#<br>
</cfoutput> 
```

但我总是得到这个输出：

**之前的水果清单：苹果、橙子、香蕉**

**之后的水果列表：苹果、橙子、香蕉**

`ListPrepend()`和也是如此`ListInsertAt()`。为什么会这样？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-26T16:38:06.393

listAppend() 返回新列表（列表只是字符串，ColdFusion 通过值传递）所以为了让您看到附加值，您需要使用：

```
<cfset fruitlist = ListAppend(fruitList, "kiwi") /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-26T16:40:01.583

尝试

```
<cfset fruitList="apple, orange, banana">

<cfoutput>
fruitList before: #fruitList#<br>
</cfoutput>

<cfset fruitList=ListAppend(fruitList, "kiwi")>

<cfoutput>
fruitList after: #fruitList#<br>
</cfoutput> 
```

根据 cfquickdocs listAppend 返回附加值的列表。 [http://cfquickdocs.com/#ListAppend](http://cfquickdocs.com/#ListAppend)

我希望这有帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-26T16:54:16.187

实际上，在您的示例中，您可以很好地附加到列表中。但是，您正在创建一个新列表“temp”，并将 fruitlist 的内容复制到其中，然后附加 kiwi。

```
<cfset temp = ListAppend(fruitList, "kiwi")> 
```

如果您要转储临时列表，您会看到想要查看的列表。

```
<cfdump var="#temp#"> 
```

# java - NetBeans IDE 自动完成“包含”

> ID：11211862
> 
> 赞同：9
> 
> 时间：2012-06-26T16:30:28.937
> 
> 标签：java, netbeans

有谁知道是否有办法让 NetBeans 代码自动完成以通过“包含”而不是“开始于”进行过滤。

例如 MyClass 有 getBlaBla()、setBlaBla() 和 someOtherBlaBla()

我希望能够说 MyClass.BlaBla 和代码完成来建议上面的所有三个方法名称。当您不太记得方法名称是什么但知道它包含该单词时，这将非常有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-03T09:43:55.517

为了将来参考，这是从 NetBeans 7.4 开始实现的，可以在选项中启用：

1.  在菜单栏中单击**工具**->**选项**
2.  在选项窗口中打开**编辑器**部分，然后单击**代码完成**选项卡
3.  勾选复选框**子词完成**

对于 Netbeans 8.0.2：

1.  在**首选项**->**编辑器**选项卡 ->**代码完成**选项卡下
2.  将语言下拉菜单选项从**所有语言**更改为**Java**
3.  勾选复选框**子词完成**

这是一个非常方便的选择:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:46:30.110

看起来你可以实现自己的，如果你有耐力的话。

您必须实现 CompletionProvider 接口，并且根据 Netbeans Docs：“当用户在编辑器中键入时，代码完成基础设施要求在 XML 层文件中注册的所有代码完成提供程序创建 CompletionTasks。”

这是可能帮助您到达那里的链接：http: [//platform.netbeans.org/tutorials/nbm-code-completion.html](http://platform.netbeans.org/tutorials/nbm-code-completion.html)

# android - 在收到的 SMS 上触发到 MySQL 的帖子

> ID：11211864
> 
> 赞同：0
> 
> 时间：2012-06-26T16:30:35.047
> 
> 标签：android, mysql, database, post

我正在开发一个 Android 应用程序，当收到传入消息时，我需要发布到 PHP 表单或插入 MySQL 数据库。你们中的一些人可能会犹豫是否要回复，但我向你们保证，这不是恶意应用程序。

我在下面发布的代码是我用来阻止传入消息的代码，除了一个号码。当短信被阻止时，任何人都可以帮助我找出一种方法来触发向我的服务器发帖吗？

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver {

public static int MSG_TPE=0;
private String getAddress;
public void onReceive(Context context, Intent intent) { 
    String MSG_TYPE=intent.getAction();
        if(MSG_TYPE.equals("android.provider.Telephony.SMS_RECEIVED")) {
            Toast received = Toast.makeText(context,"SMS Received: "+MSG_TYPE , Toast.LENGTH_LONG);
            received.show();

                Bundle bundle = intent.getExtras();
                Object messages[] = (Object[]) bundle.get("pdus");
                SmsMessage smsMessage[] = new SmsMessage[messages.length];
                for (int n = 0; n < messages.length; n++) {
                    smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
                }

                    getAddress = smsMessage[0].getOriginatingAddress();
                    if(getAddress.equals("APPROVEDPHONENUMBER")) {
                        Toast approved = Toast.makeText(context,"Approved SMS from: " + smsMessage[0].getOriginatingAddress(), Toast.LENGTH_LONG);
                        approved.show();
                            // Message is approved and let through
                    } else {
                        Toast blocked = Toast.makeText(context,"Blocked SMS from: " + smsMessage[0].getOriginatingAddress(), Toast.LENGTH_LONG);
                        blocked.show();
                            // Post to MySQL database
                            abortBroadcast();
                    }
                        for(int i=0;i<8;i++) {
                            System.out.println("Blocking SMS");
                        }

        }

}

} 
```

基本上我想要做的是在触发事件时从应用程序内部发布到外部 PHP 表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:48:58.073

我不确定我是否理解你的问题。所以基本上你想在某些事件发生时将一些数据发布到 Web 服务器？

我看到您已经有了触发此事件的代码，所以您只问如何发布数据？这是一个例子：

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("www.test.com");  
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
nameValuePairs.add(new BasicNameValuePair("name1", "value1"));  
nameValuePairs.add(new BasicNameValuePair("name2", "value2")); 
nameValuePairs.add(new BasicNameValuePair("name3", "value3"));   
// etc...
httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
HttpResponse response = httpClient.execute(httpPost); 
```

# mysql - 还选择倒数第二个mysql值

> ID：11211872
> 
> 赞同：0
> 
> 时间：2012-06-26T16:30:58.717
> 
> 标签：mysql

我正在尝试从表格中选择最大里程和第二大里程。

到目前为止，我的查询是：

```
SELECT oil.empid, oil.mileage, users.name, oil.date, MAX(oil.mileage)
FROM oil, users
WHERE oil.empid = users.empid
GROUP BY oil.empid
ORDER BY oil.mileage 
```

但这会选择输入的第一个里程和最大值。

我如何改变它以获得第二大里程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:34:32.150

基本上做一个正常的查询，并按降序排序并限制为2。类似下面的东西（未测试）

```
SELECT
    oil.empid,
    oil.mileage,
    users.name,
    oil.date
FROM oil, users
WHERE (oil.empid = users.empid)
GROUP BY oil.empid
ORDER BY oil.mileage DESC
LIMIT 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:37:05.940

一种快速而肮脏的方法是排序

```
ORDER BY oil.mileage DESC 
```

接着

```
LIMIT 0, 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:34:44.630

试试这个：如果你只需要倒数第二个里程然后使用这个::

```
SELECT oil.empid, oil.mileage, users.name, oil.date, MAX(oil.mileage)
FROM oil, users
WHERE oil.empid = users.empid
GROUP BY oil.empid
ORDER BY oil.mileage desc
limit 1, 1 
```

如果您同时需要最大值和倒数第二个，请使用此::

```
SELECT oil.empid, oil.mileage, users.name, oil.date, MAX(oil.mileage)
FROM oil, users
WHERE oil.empid = users.empid
GROUP BY oil.empid
ORDER BY oil.mileage desc
limit 2 
```

# jquery - 带有标题的表数据的 Jquery 选择器

> ID：11211876
> 
> 赞同：1
> 
> 时间：2012-06-26T16:31:25.347
> 
> 标签：jquery, html-table, selector

我有一个带有类的表和一些带有类的表行（所有这些都是类，因为多个相似的表是从相同的代码生成的），我想从其中包含的表数据中获取一些信息，其中包含一个标题。它看起来像这样：

```
<table class='mytable'><br/>
<tr>< td></td></tr><br/>
<tr class ='useful'><td title='hasTitle'>9</td></tr><br/>
</table><br/> 
```

（在 html 中添加空格，因为我不知道如何让它显示标签..）

jquery中有没有办法根据表类和表行和td标题选择9（所以表数据的内部文本）？我会假设是这样，但我不确定。我猜它看起来像

```
 $('#mytable tr#useful td[title='hasTitle']).html(); 
```

但我不确定选择器语法是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:33:55.300

```
$('.mytable tr.useful td[title="hasTitle"]').html(); 
```

正如你所注意到的`class`，不是`id`表格，所以你应该使用`.`而不是`#`.

阅读有关 jQuery **[id 选择器](http://api.jquery.com/id-selector/)**和**[类选择器的信息](http://api.jquery.com/class-selector/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:36:05.757

```
$('.mytable tr.useful td[title="hasTitle"]').html() 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/6AGwp/)**。

当您应该引用类时，您正在引用 ID。`#`在选择一个类的同时选择一个 ID `.`。

另一种方法是使用您拥有的代码（带有一个小的引号更正`$('#mytable tr#useful td[title="hasTitle"]').html();`），并将表格的 HTML 更改为：

```
<table id='mytable'><br/>
<tr><td></td></tr><br/>
<tr id='useful'><td title='hasTitle'>9</td></tr>
</table>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:36:08.000

选择器 jquery 就像您编写的“CSS”：

```
$('#mytable tr#useful td[title='hasTitle']).html(); 
```

在这里，您正在寻找一个**ID**为“mytable”的对象，其中包含一个 tr ...。

你应该写这样的东西：

```
$('table.mytable tr.useful td[title="hasTitle"]').html(); 
```

# internet-explorer-8 - IE8 是如何处理这个标签的

> ID：11211880
> 
> 赞同：2
> 
> 时间：2012-06-26T16:31:44.770
> 
> 标签：internet-explorer-8, x-ua-compatible

我知道 `<meta http-equiv=“X-UA-Compatible” content=“IE=9” />`会强制 IE9 以 IE9 标准方式显示页面。我想知道的是 IE8 如何处理这个标签？

以 IE 8 标准模式或兼容模式呈现页面？（找不到任何带有 IE8 的 XP）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:36:21.107

> 如果网页指定了浏览网页时使用的 Internet Explorer 版本不支持的文档兼容模式，则网页将以该版本 Internet Explorer 支持的最高文档模式显示。例如，指定 IE9 模式的页面在通过 Internet Explorer 8 查看时将以 IE8 模式显示。早期版本的浏览器将使用该指令（如果有）来确定如何显示该网页。

来自： http: [//msdn.microsoft.com/en-us/library/cc288325 (v=vs.85).aspx#Content](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx#Content)

# android - SurfaceFlinger 是如何工作的？

> ID：11211894
> 
> 赞同：3
> 
> 时间：2012-06-26T16:32:24.753
> 
> 标签：android, window

我正在用 C++ 开发一个非常简单的跨平台窗口类，这样我就有了一个可以渲染的表面。到目前为止，我已经让它在 Linux 和 Windows 上运行。在我让它在 OS-X 上运行后，我想尝试让它在我的安卓手机上运行。

但是，我需要知道使用 SurfaceFlinger 创建的所有“窗口”是否都是全屏的，或者它们是否只能占用桌面的一部分，如 Linux 或 Windows 上的窗口？我问这个是因为我知道我可以在手机桌面上放置小部件，但我从未见过应用程序做任何事情，比如弹出窗口或悬停在桌面上的框架。

创建一个小于手机分辨率的“窗口”如何工作？它只是使可绘制表面居中并留下黑色边框吗？一个应用程序也可以有多个“窗口”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:58:36.413

顾名思义，Surfaceflinger 处理的是表面，而不是窗口。每个窗口实际上都有一个可以绘制的表面，但这些是不同类型的类。每当以某种方式创建或更改某个应用程序窗口的 ViewRootImpl（窗口的顶视图）时，都会调用 WindowManagerService 的重新布局函数。现在，跳过一些无聊的细节，WindowManagerService 创建了一个表面。一个表面可以是任意大小，如果您使用多个显示器，它甚至可以连接到某个显示器（尽管这还没有实现）。这让我们回到您的问题： - 表面（如果您愿意，可以是窗口）可以是任何大小。您提到的黑色边框实际上来自位于当前窗口下方的窗口（并且被涂成黑色）。- 是的，

至于小部件，我知道启动器（桌面应用程序）如何支持它们并支持它们的拖放行为，但我从未问过自己它们是否实际上是新窗口 - 所以我无法真正回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T06:21:12.843

一个应用程序也可以有多个“窗口”吗？是的，一个应用程序可以有多个窗口。1.状态栏窗口 2.活动屏幕窗口 3.导航窗口 4.对话框等。

# iphone - iPhone SDK 修改 WiFi 设置

> ID：11211896
> 
> 赞同：0
> 
> 时间：2012-06-26T16:32:34.367
> 
> 标签：iphone

我需要能够修改 iOS 设备（iPhone 和 iPad）上的 WiFi 设置，到目前为止，通过谷歌搜索找到的大多数库都是私有库……Apple 不喜欢这样，SDK 是否允许这样做其他方式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:44:37.440

如果没有越狱设备，您将无法修改 Wi-Fi 设置。这是因为所有 iOS 应用程序都是沙盒化的，这意味着它们只能访问 Apple 允许的应用程序运行所需的数据。对于 iOS 应用程序，documents 目录构成应用程序的沙箱，应用程序不能在这些目录之外创建或修改文件或目录。因此，即使您找到了修改 Wi-Fi 设置的方法，您的应用也会被 Apple 拒绝。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:40:31.307

Apple 不会公开任何允许您执行此操作的公共 API。

# ruby-on-rails - Rails 3 Authlogic 教程

> ID：11211899
> 
> 赞同：1
> 
> 时间：2012-06-26T16:32:55.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, authlogic

实现 Authlogic 有哪些好的 rails 3 教程？github 上列出的示例已经过时了，尽管 Railscast 示例很好地解释了它开始显示其年龄的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:10:49.207

我听说过关于设计的褒贬不一的评论，但是在安装它之后，观看了几个关于它的功能的 railscast，并阅读了我决定坚持使用它的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:19:39.773

尝试设计，它更简单:)

# web-services - 创建用于查询 TFS 的 Web 服务

> ID：11211900
> 
> 赞同：0
> 
> 时间：2012-06-26T16:32:55.770
> 
> 标签：web-services, tfs, console

我的任务是创建一个 Web 服务（使用 VS2010）以通过工作项编号查询 TFS（2010）。用户将访问 Web 服务，然后输入工作项编号和项目名称并点击执行按钮。这将调用 Web 服务，检索标题和描述，并在单独的应用程序上为用户显示。所以开始这个过程，我想我会创建一个简单的控制台应用程序来做同样的事情。我能够连接到服务器，并且能够看到存在的项目集合。我正在寻找的是查询服务器的一些帮助，以便我可以输入一个数字并在我的控制台中获得响应。有没有人有任何例子，方向或网站？在等待答案的同时，我将在网上搜索。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:57:28.623

您需要使用[TFS SDK](http://msdn.microsoft.com/en-us/library/bb130146%28v=vs.80%29.aspx)以编程方式查询工作项。

Ewald Hoffman 发布了一个如何通过 ID 获取工作项的优秀示例：

1.  [第一部分](http://www.ewaldhofman.nl/post/2009/12/03/TFS-SDK-2010-e28093-Part-1-e28093-Get-the-Team-Project-Collection.aspx)讨论如何连接到您的服务器
2.  [第二部分](http://www.ewaldhofman.nl/post/2009/12/11/TFS-SDK-2010-e28093-Part-2-Get-a-work-item.aspx)展示了如何通过 ID 查询工作项。

# php - 自定义 twitter 'Tweet Button' 回调在第一次点击时不起作用，但在第二次点击时起作用

> ID：11211902
> 
> 赞同：1
> 
> 时间：2012-06-26T16:33:01.870
> 
> 标签：php, javascript, twitter

一切都在标题本身中。我正在尝试创建一个带有回调的自定义推文按钮。我已经粘贴了下面的代码。我没有使用来自 twitter 的 Twitter Button 代码，因为我在同一页面上有多个推文按钮，并且我想根据单击的按钮将唯一的 id 传递给每个回调。

第一次单击按钮时，弹出窗口打开推文，推文后，窗口关闭但不调用回调函数。第二次点击同一个按钮（没有重新加载页面），回调函数被调用！我知道为什么会发生这种情况以及如何纠正这种情况以在第一次点击时起作用？

谢谢你们。

```
<a href="#" target="_blank" id="twtShareLink" 
               onclick="return twOpenPopup('<URL>','<TEXT>','<UNIQUE_ID>')"
               >Tweet It!</a> 
```

JS：

```
function twOpenPopup(url,text,unique_id){
        twttr.events.bind('tweet',function(event){
               alert('Here');
               //Code that uses unique_id here;
        });
        var twturl="https://twitter.com/intent/tweet?url="+encodeURIComponent(url) + 
            "&count=none&source=tweetbutton&text=" + encodeURIComponent(text) + "&original_referer=" + encodeURIComponent('<?= $_SERVER['HTTP_HOST'] ?>');
        document.getElementById("twtShareLink").href = twturl;
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:01:10.623

因为在您单击按钮之前，您不会绑定您的事件。您需要在`twOpenPopup()`函数之外绑定事件。

# c# - 将 C# 位图转换为 RIOT 的 Windows dib 句柄？

> ID：11211904
> 
> 赞同：2
> 
> 时间：2012-06-26T16:33:05.237
> 
> 标签：c#, c++, pinvoke, dib

我正在尝试实现一个使用 RIOT（激进图像优化工具）进行批量图像优化的应用程序。我可以成功地将*riot.dll*导入我的应用程序。但我无法弄清楚如何将 Windows DIB（设备独立位图）句柄传递给 RIOT 函数。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace Riot_Test
{
    public partial class Form1 : Form
    {

        [DllImport("RIOT.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]
        static extern bool RIOT_LoadFromDIB(IntPtr hDIB, IntPtr hwndParent, [MarshalAs(UnmanagedType.LPStr)] string fileName = "", [MarshalAs(UnmanagedType.LPStr)] string iniFile = "", int flags = 0, [MarshalAs(UnmanagedType.LPStr)] string buf = "");

        [DllImport("RIOT.dll")]
        static extern void RIOT_Show();

        [DllImport("RIOT.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]
        static extern bool RIOT_LoadFromFile([MarshalAs(UnmanagedType.LPStr)] string filename, int flags = 0);

        [DllImport("RIOT.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto, SetLastError = true)]
        static extern bool RIOT_SaveToFile(IntPtr hDIB, IntPtr hwndParent, [MarshalAs(UnmanagedType.LPStr)] string fileName, [MarshalAs(UnmanagedType.LPStr)] string origFilename = "", ulong byteSize = 0, [MarshalAs(UnmanagedType.LPStr)]  string errorText = "", int flags = 0, [MarshalAs(UnmanagedType.LPStr)] string buf = "");

        public Form1()
        {
            InitializeComponent();
            //RIOT_Show();
            IntPtr hdib = IntPtr.Zero;
            IntPtr hwnd = IntPtr.Zero;
            string errorText = "";

            Bitmap bmp = new Bitmap("dene.jpg");
            hdib = bmp.GetHbitmap();

            string fn = "optim2.jpg";
            string fno = "dene.jpg";
            bool result = RIOT_SaveToFile_U(hdib, hwnd, fn);

        }
    }
} 
```

`RIOT_Show()`并且`RIOT_Load_From_File()`按预期工作但是当我尝试调用`RIOT_SaveToFile()`它时给我这个错误：

> System.AccessViolationException 未处理 - 试图读取或写入受保护的内存。这通常表明其他内存已损坏。

所以我的问题是：

1.  如何将`System.Bitmap`对象转换为 Windows DIB 句柄？
2.  如果我无法转换，是否可以使用 C++ 库（如果有）为我完成这项工作并返回 DIB 句柄？

编辑：

我已将代码更改为此，但它给出了相同的错误。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace from_vb
{
    public partial class Form1 : Form
    {
        [DllImport("gdi32.dll", SetLastError = true)]
        static extern IntPtr CreateCompatibleDC(IntPtr hdc);

        [DllImport("gdi32.dll", ExactSpelling = true, PreserveSig = true, SetLastError = true)]
        static extern IntPtr SelectObject(IntPtr hdc, IntPtr hgdiobj);

        [DllImport("gdi32.dll")]
        static extern int GetObject(IntPtr hgdiobj, int cbBuffer, IntPtr lpvObject);

        [DllImport("gdi32.dll")]
        static extern IntPtr CreateDIBSection(IntPtr hdc, [In] ref GDI32BITMAPINFOHEADER pbmi, uint pila, out IntPtr ppvBits, IntPtr hSection, uint dwOffset);

        [DllImport("gdi32.dll")]
        static extern int GetDIBits(IntPtr hdc, IntPtr hbmp, uint uStartScan,
           uint cScanLines, [Out] byte[] lpvBits, ref GDI32BITMAPINFOHEADER lpbmi, uint uUsage);

        [DllImport("gdi32.dll")]
        static extern bool DeleteObject(IntPtr hObject);

        [DllImport("gdi32.dll")]
        static extern bool DeleteDC(IntPtr hdc);

        [DllImport("gdi32.dll")]
        static extern bool GdiFlush();

        [DllImport("RIOT.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto, SetLastError = true)]
        static extern bool RIOT_SaveToFile(IntPtr hDIB, IntPtr hwndParent, [MarshalAs(UnmanagedType.LPStr)] string fileName, [MarshalAs(UnmanagedType.LPStr)] string origFilename = "", ulong byteSize = 0, [MarshalAs(UnmanagedType.LPStr)]  string errorText = "", int flags = 0, [MarshalAs(UnmanagedType.LPStr)] string buf = "");

        public const int BI_RGB = 0;
        public const int DIB_PAL_COLORS = 1;

        [StructLayout(LayoutKind.Sequential, Pack = 1)]
        public struct GDI32BITMAP
        {
            public int bmType;
            public int bmWidth;
            public int bmHeight;
            public int bmWidthBytes;
            public short bmPlanes;
            public short bmBitsPixel;
            public int bmBits;
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct GDI32BITMAPINFOHEADER
        {
            public int biSize;
            public int biWidth;
            public int biHeight;
            public short biPlanes;
            public short biBitCount;
            public int biCompression;
            public int biSizeImage;
            public int biXPelsPerMeter;
            public int biYPelsPerMeter;
            public uint biClrUsed;
            public uint biClrImportant;

            public void Init()
            {
                biSize = (int)Marshal.SizeOf(this);
            }
        }

        public Form1()
        {
            InitializeComponent();
            IntPtr hdc = IntPtr.Zero;
            IntPtr hSrcBitmap = IntPtr.Zero;
            IntPtr pSrcBitmapInfo = IntPtr.Zero;
            IntPtr hDestDIBitmap = IntPtr.Zero;
            IntPtr hDstOldBitmap = IntPtr.Zero;
            IntPtr pDestDIBits = IntPtr.Zero;
            IntPtr hSection = IntPtr.Zero;
            IntPtr hwnd = IntPtr.Zero;
            IntPtr ccDC = IntPtr.Zero;

            Bitmap dotNetBitmap;
            int XDPI, YDPI;

            GDI32BITMAP srcBitmapInfo = new GDI32BITMAP();
            //ccDC = CreateCompatibleDC(hdc);
            IntPtr hDstMemDC = CreateCompatibleDC(hdc);
            GDI32BITMAPINFOHEADER DestDIBMIH = new GDI32BITMAPINFOHEADER();

            dotNetBitmap = new Bitmap("dene.jpg");
            hSrcBitmap = dotNetBitmap.GetHbitmap();
            pSrcBitmapInfo = Marshal.AllocCoTaskMem(Marshal.SizeOf(srcBitmapInfo));

            GetObject(hSrcBitmap, Marshal.SizeOf(srcBitmapInfo),pSrcBitmapInfo);
            srcBitmapInfo = (GDI32BITMAP)Marshal.PtrToStructure(pSrcBitmapInfo, srcBitmapInfo.GetType());

            if (pSrcBitmapInfo != IntPtr.Zero)
            {

                Marshal.FreeCoTaskMem(pSrcBitmapInfo);
            }

            DestDIBMIH.biSize = Marshal.SizeOf(DestDIBMIH);
            DestDIBMIH.biWidth = srcBitmapInfo.bmWidth;
            DestDIBMIH.biHeight = srcBitmapInfo.bmHeight;
            DestDIBMIH.biPlanes = srcBitmapInfo.bmPlanes;
            DestDIBMIH.biBitCount = 24;
            DestDIBMIH.biCompression = BI_RGB;

            hDestDIBitmap = CreateDIBSection(hDstMemDC, ref DestDIBMIH, 0, out pDestDIBits, hSection, 0);

            string fn = "optim2.jpg";
            string fno = "dene.jpg";
            bool hede = RIOT_SaveToFile(hDestDIBitmap, hwnd, fn);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:31:42.790

您的 System.Drawing.Bitmap 对象是设备相关位图 (DDB)。您需要一个与设备无关的位图 (DIB)。我不知道 .Net 框架对此有任何帮助，但您可以 p/Invoke [CreateDIBSection](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183494.aspx)来创建一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:44:58.460

这是该方法的“文档”：

```
bool RIOT_SaveToFile(HANDLE hDIB, HWND hwndParent,const char *fileName,const char *origFilename=”", unsigned long byteSize=0,char *errorText=”",int flags=0, char *buf=”")

Saves the file with the specified parameters.

Parameters:
hDIB – handle to a Windows DIB image in memory
hwndParent – Not Used. Must be NULL.
fileName – full path to the file to be saved (only JPEG is supported)
origFilename – Fill this with the original file name if the DIB is not different than the image from the file
byteSize – filesize of the compressed JPEG image in bytes
errorText – On error errorText is filled with the error message
flags – save flags. See bellow
buf – not used. Leave blank.THe function returns true on success or false on error.If you specify byteSize you can specify any of the save flags, but the quality will not be used.
If you don’t specify byteSize flags are used.
If there are no flags or byteSize is 0 an error is thrown.Flags for RIOT_SaveToFile:0×0001 – keep EXIF
0×0002 – keep IPTC
0×0004 – keep XMP
0×0008 – keep Comments
0×1000 – keep ICC profile0x0800 – save greyscale
0×2000 – save progressive
0×10000 – disable chroma subsamplingAlso you can set a quality flag from 1 to 100Ex: flags=JPEG_SUBSAMPLING_444 | JPEG_PROGRESSIVE | 90
results in a file with no subsampling, progressive with a quality of 90
If you don’t specify quality 75 is used.
You must specify JPEG_PROGRESSIVE if you want progressive.
If you don’t specify JPEG_SUBSAMPLING_444 a default chroma of 4:2:0 is used. 
```

第一个问题是与`errorText`. 该文档指出，“在错误错误文本中填充了错误消息。” 这表明您必须传递将被填充的未指定长度的字节数组。这太可怕了。

第二个问题是它说：“如果没有标志或 byteSize 为 0，则会引发错误。”

我的猜测是你遇到了一个错误，它试图将字节复制到 errorText 中。尝试传递一个较大的 byte[] 而不是一个字符串。

# python - 将图像转换为值矩阵

> ID：11211914
> 
> 赞同：3
> 
> 时间：2012-06-26T16:33:32.977
> 
> 标签：python, image-processing, python-imaging-library

我有一个像棋盘的图像，有 4 种颜色（黑色、白色、红色、蓝色）。我必须将此图像转换为数字矩阵：1 代表白色，2 代表黑色，3 代表红色，依此类推。

例如图像：

![棋盘](../Images/ce68fe5210e2911c868505a14076d588.png)

应转换为矩阵：

```
[[1,2,1,2,1,2...]
[2,1,2,1,2,1...]
...] 
```

我更喜欢python中的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:47:44.610

我不确定 SVG 图像，但假设您有 PIL 可读的图像格式（例如 GIF、TIFF、JPEG、BMP 等）。然后你可以像这样使用 PIL 来阅读它：

```
import Image
img = Image.open("Chess_Board.bmp") 
```

现在我们要做[quantization](https://stackoverflow.com/questions/1065945/how-to-reduce-color-palette-with-pil)，所以图像像素不再是 RGB 而是从 0 到 3 的颜色索引（假设你想要 4 种不同的颜色）：

```
quantized = img.convert('P', palette=Image.ADAPTIVE, colors=4) 
```

接下来我想我们将其转换为 numpy 以便更轻松地访问各个像素。然后我们用 numpy 魔法来计算一个块中有多少个：

```
import numpy as np
a = np.array(quantized)
blockLengthX = np.argmin(a[0]==a[0,0])
blockLengthY = np.argmin(a[:,0]==a[0,0]) 
```

之后就很容易了。我们只是使用 stepsize blockLengthX 来访问数组，用于 cols 和 blockLengthY 用于行：

```
result = a[::blockLengthX, ::blockLengthY] 
```

当然，这假设您的所有块的大小*完全相同*。这是更容易复制和粘贴的完整程序。我也缩短了一点：

```
import Image
import numpy as np
img = Image.open("Chess_Board.bmp")
a = np.array(img.convert('P', palette=Image.ADAPTIVE, colors=4))
blockLengthX = np.argmin(a[0]==a[0,0])
blockLengthY = np.argmin(a[:,0]==a[0,0])
result = a[::blockLengthX, ::blockLengthY] 
```

# mysql - MySQL 表 JOIN，按平均值排序

> ID：11211919
> 
> 赞同：0
> 
> 时间：2012-06-26T16:33:52.400
> 
> 标签：mysql, sql

首先，我对 MySQL 还不是很好，所以请放轻松。我什至不知道如何表达我的问题。

我有两张桌子；一个表包含有关链接的信息，以及用户对每个链接的其他评级。本质上，我只需要能够按平均评分对链接表进行排序。

表格：

**链接**

*   link_id *PK int 自动增量*
*   url *varchar*
*   标题 *varchar*
*   描述 *文字*
*   评分*小数*

**链接评级**

*   link_rating_id *PK int 自动增量*
*   link_id *FK int*
*   user_id *FK int*
*   评分*小数*

我需要的是当有人向链接添加链接评级（新的 link_ratings 条目）或更新他们当前的评级时，该链接的所有评级都会在链接中的评级列上进行平均和更新。或者我可以完全取消链接表中的评级列并使用 JOIN 吗？

如果是这样，我将如何进行 JOIN。如果没有，我如何制作可以为我完成此任务的 TRIGGER？

我找不到太多关于如何开始的信息，很可能是由于我缺乏 SQL 知识。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:38:47.657

您不需要将`rating`平均值保留在`links`表中。我在下面计算它，这应该表现得相当好：

```
select l.link_id,
    l.url,
    l.title,
    l.description,
    lra.AvgRating
from links l
left outer join (
    select link_id, avg(rating) as AvgRating
    from link_ratings
    group by link_id
) lra on l.link_id = lra.link_id
order by lra.AvgRating desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:43:09.170

适当的数据设计会告诉您实际上不要存储平均评分。在大多数情况下，MySQL 可以足够快地计算这一点。保留所有，`link_ratings`但当需要显示实际评级时，使用[MySQL](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)[函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)`link_ratings`加入`links`并计算平均值。[`AVG()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)

但是，如果您确实需要每次都触发，请查看[MySQL 的 TRIGGER 文档](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)。类似以下未经测试的伪代码将帮助您

```
CREATE TRIGGER trig AFTER UPDATE ON link_ratings
  FOR EACH ROW BEGIN
    UPDATE links
    SET links.rating = <new average>
    WHERE links.link_id = NEW.link_id;
  END; 
```

# regex - 如何删除不是mp3的文件？

> ID：11211921
> 
> 赞同：1
> 
> 时间：2012-06-26T16:33:56.690
> 
> 标签：regex, linux, ubuntu, rm

我有一个 mp3 播放器。我已将它连接到以 Ubuntu 作为操作系统的 PC。我想删除所有不是.mp3 的文件。

我知道删除它们的命令是 rm *.mp3，但是否定它的组合是什么？我试过：rm ^.mp3, ^mp3 ^[mp3]，但它们没有用！有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:35:34.677

假设您正在使用`bash`并`extglob`已设置，您应该能够：

```
rm !(*.mp3) 
```

`ls`在盲目运行该命令之前，我会尝试进行测试：

```
ls !(*.mp3) 
```

要检查 的值`extglob`：

```
shopt extglob 
```

并在必要时将其打开：

```
shopt -s extglob 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:40:01.647

删除所有非 mp3 文件：

```
find . -type f ! -name '*.mp3' -delete 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:37:47.057

使用 GNU 查找：

```
find FOLDER -not -iname '*.mp3' -not -type d -delete 
```

它将从 FOLDER 开始，并递归地遍历子文件夹，删除任何不以 mp3 结尾的文件（不区分大小写），只要该文件不是目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:39:05.157

从 dir 递归删除所有非 mp3 文件

打印它们：

```
find dir -type f | egrep -vi "\.mp3$" 
```

删除它们

```
find dir -type f | egrep -vi "\.mp3$" | xargs rm -f 
```

# c# - WCF 消息：如何删除 SOAP 标头元素？

> ID：11211924
> 
> 赞同：4
> 
> 时间：2012-06-26T16:34:05.220
> 
> 标签：c#, .net, wcf, soap, wcf-binding

我尝试从 WCF 消息中删除整个 SOAP 标头，只想留下信封正文。任何人都可以给我一个想法如何做到这一点？

像这样创建 WCF 消息：

```
**string response = "Hello World!";
Message msg = Message.CreateMessage(MessageVersion.Soap11, "*", new TextBodyWriter(response));
msg.Headers.Clear();** 
```

发送的 SOAP 消息将是：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
  <s:Body>
    <Binary>Hello World!</Binary>
  </s:Body>
</s:Envelope> 
```

但我不想要 SOAP 标头元素，我只需要信封主体。如何从 WCF 消息中删除标头元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T09:59:29.393

选项 1：使用 bacicHttpBinding，它不会在 header 中添加内容（未配置安全性时）

选项 2：实现自定义消息编码器并在那里剥离标题。在此之前的任何地方，wcf 都有可能将标题添加回来。在此处查看[示例编码器](https://gist.github.com/yaronn/8653708)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-22T10:27:01.723

这个问题很棘手：让我们一步一步来

## 一些背景

该类`Message`将其标头写入其`ToString()`方法中。`ToString()`然后调用内部重载`ToString(XmlDictionaryWriter writer)`，然后开始写入：

```
// System.ServiceModel.Channels.Message
internal void ToString(XmlDictionaryWriter writer)
{
    if (this.IsDisposed)
    {
        throw TraceUtility.ThrowHelperError(this.CreateMessageDisposedException(), this);
    }
    if (this.Version.Envelope != EnvelopeVersion.None)
    {
        this.WriteStartEnvelope(writer);
        this.WriteStartHeaders(writer);
        MessageHeaders headers = this.Headers;
        for (int i = 0; i < headers.Count; i++)
        {
            headers.WriteHeader(i, writer);
        }
        writer.WriteEndElement();
        MessageDictionary arg_60_0 = XD.MessageDictionary;
        this.WriteStartBody(writer);
    }
    this.BodyToString(writer);
    if (this.Version.Envelope != EnvelopeVersion.None)
    {
        writer.WriteEndElement();
        writer.WriteEndElement();
    }
} 
```

无论标头的`this.WriteStartHeaders(writer);`数量如何，代码都会写入标头标签。它与`writer.WriteEndElement()`for 循环之后的匹配。这`writer.WriteEndElement()` **必须**与正在写入的 header 标签匹配，否则 Xml 文档将无效。

因此，我们无法覆盖虚拟方法来摆脱标头：`WriteStartHeaders`调用虚拟方法`OnWriteStartHeaders`但标签关闭阻止简单地将其关闭）。我们必须更改整个`ToString()`方法以删除任何与标头相关的结构，以达到：

```
- write start of envelope
- write start of body
- write body
- write end of body
- write end of envelope 
```

## 解决方案

在上面的伪代码中，我们可以控制除“写正文”部分之外的所有内容。初始调用的所有方法`ToString(XmlDictionaryWriter writer)`都是公共的，除了`BodyToString`. 所以我们需要通过反射或任何适合您需要的方法来调用它。写一条没有标题的消息就变成了：

```
private void ProcessMessage(Message msg, XmlDictionaryWriter writer)
{
    msg.WriteStartEnvelope(writer); // start of envelope
    msg.WriteStartBody(writer); // start of body

    var bodyToStringMethod = msg.GetType()
        .GetMethod("BodyToString", BindingFlags.Instance | BindingFlags.NonPublic);
    bodyToStringMethod.Invoke(msg, new object[] {writer}); // write body

    writer.WriteEndElement(); // write end of body
    writer.WriteEndElement(); // write end of envelope
} 
```

现在我们有一种方法可以在没有标题的情况下获取我们的消息内容。但是应该如何调用这个方法呢？

**我们只希望没有标题的消息作为字符串**

太好了，我们不需要关心重写`ToString()`然后调用消息的初始写入的方法。只需在您的程序中创建一个接受 a`Message`和 an的方法，`XmlDictionaryWriter`然后调用它来获取没有标头的消息。

**我们希望该`ToString()`方法返回没有标头的消息**

这个有点复杂。我们不能轻易地从`Message`类继承，因为我们需要从System.ServiceModel 程序集中提取*大量依赖项。*我不会在这个答案中去那里。

我们可以做的是使用某些框架的功能围绕现有对象创建[代理](https://en.wikipedia.org/wiki/Proxy_pattern)并拦截对原始对象的一些调用以替换/增强其行为：我习惯于[Castle Dynamic 代理](https://stackoverflow.com/questions/tagged/castle-dynamicproxy)，所以让我们使用它。

我们想要拦截 ToString() 方法，所以我们围绕`Message`我们正在使用的对象创建一个代理，并添加一个拦截器来用我们的实现替换该`ToString`方法`Message`：

```
var msg = Message.CreateMessage(MessageVersion.Soap11, "*");
msg.Headers.Clear();

var proxyGenerator = new Castle.DynamicProxy.ProxyGenerator();
var proxiedMessage = proxyGenerator.CreateClassProxyWithTarget(msg, new ProxyGenerationOptions(),
    new ToStringInterceptor()); 
```

`ToStringInterceptor`需要做与初始方法几乎相同的事情，`ToString()`但是我们将使用上面定义的 ProcessMessage 方法：

```
public class ToStringInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        if (invocation.Method.Name != "ToString")
        {
            invocation.Proceed();
        }
        else
        {
            var result = string.Empty;
            var msg = invocation.InvocationTarget as Message;

            StringWriter stringWriter = new StringWriter(CultureInfo.InvariantCulture);
            XmlDictionaryWriter xmlDictionaryWriter =
                XmlDictionaryWriter.CreateDictionaryWriter(new XmlTextWriter(stringWriter));

            try
            {
                ProcessMessage(msg, xmlDictionaryWriter);
                xmlDictionaryWriter.Flush();
                result = stringWriter.ToString();
            }
            catch (XmlException ex)
            {
                result = "ErrorMessage";
            }
            invocation.ReturnValue = result;
        }
    }

    private void ProcessMessage(Message msg, XmlDictionaryWriter writer)
    {
        // same method as above
    }
} 
```

我们在这里：对消息的 ToString() 方法的调用现在将返回一个没有标题的信封。我们可以将消息传递给框架的其他部分，并且知道它应该大部分都可以工作：直接调用 Message 的一些内部管道仍然可以产生初始输出，但如果没有完全重新实现，我们无法控制它。

## 注意事项

*   这是删除我找到的标题的最短方法。编写器中的标头序列化没有仅在一个虚拟函数中处理这一事实是一个大问题。该代码没有给您太多回旋余地。
*   此实现与`XmlWriter`, 的原始实现中使用`ToString()`的`Message`不同`EncodingFallbackAwareXmlTextWriter`。这个类在 System.ServiceModel 中是内部的，把它拉出来留给读者作为练习。结果，输出略有不同，因为 xml 没有`XmlTextWriter`使用我使用的简单格式。
*   拦截器可以简单地解析从初始`ToString()`调用返回的 xml，并在让值冒泡之前删除 headers 节点。这是另一个可行的解决方案。

## 原始代码

```
public class ToStringInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        if (invocation.Method.Name != "ToString")
        {
            invocation.Proceed();
        }
        else
        {
            var result = string.Empty;
            var msg = invocation.InvocationTarget as Message;

            StringWriter stringWriter = new StringWriter(CultureInfo.InvariantCulture);
            XmlDictionaryWriter xmlDictionaryWriter =
                XmlDictionaryWriter.CreateDictionaryWriter(new XmlTextWriter(stringWriter));

            try
            {
                ProcessMessage(msg, xmlDictionaryWriter);
                xmlDictionaryWriter.Flush();
                result = stringWriter.ToString();
            }
            catch (XmlException ex)
            {
                result = "ErrorMessage";
            }
            invocation.ReturnValue = result;
        }
    }

    private void ProcessMessage(Message msg, XmlDictionaryWriter writer)
    {
        msg.WriteStartEnvelope(writer);
        msg.WriteStartBody(writer);

        var bodyToStringMethod = msg.GetType()
            .GetMethod("BodyToString", BindingFlags.Instance | BindingFlags.NonPublic);
        bodyToStringMethod.Invoke(msg, new object[] { writer });

        writer.WriteEndElement();
        writer.WriteEndElement();
    }
}

internal class Program
{
    private static void Main(string[] args)
    {
        var msg = Message.CreateMessage(MessageVersion.Soap11, "*");
        msg.Headers.Clear();

        var proxyGenerator = new Castle.DynamicProxy.ProxyGenerator();
        var proxiedMessage = proxyGenerator.CreateClassProxyWithTarget(msg, new ProxyGenerationOptions(),
            new ToStringInterceptor());

        var initialResult = msg.ToString();
        var proxiedResult = proxiedMessage.ToString();

        Console.WriteLine("Initial result");
        Console.WriteLine(initialResult);
        Console.WriteLine();
        Console.WriteLine("Proxied result");
        Console.WriteLine(proxiedResult);

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-21T16:41:07.760

我没有您的 XmlBodyWriter，但您可以使用数据合同序列化程序或您的 xml 正文编写器，但诀窍是使用 msg.WriteBody。这将省略标题

```
var response = "Hello";            
Message msg = Message.CreateMessage(MessageVersion.Soap11, "*",response, new DataContractSerializer(response.GetType()));
msg.Headers.Clear();
var sb = new StringBuilder();
var xmlWriter = new XmlTextWriter(new StringWriter(sb));
msg.WriteBody(xmlWriter); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-22T15:05:49.677

**应该是这样的：**

```
XmlDocument xml = new XmlDocument();
xml.LoadXml(myXmlString); // suppose that myXmlString contains "<Body>...</Body>"

XmlNodeList xnList = xml.SelectNodes("/Envelope/Body");
foreach (XmlNode xn in xnList)
{
  string binary1 = xn["Binary1"].InnerText;
  string binary2 = xn["Binary2"].InnerText;
  Console.WriteLine("Binary: {0} {1}", binary1 , binary2);
} 
```

# grails - grails - 在查询中使用动态列表

> ID：11211927
> 
> 赞同：1
> 
> 时间：2012-06-26T16:34:07.533
> 
> 标签：grails, groovy, grails-orm

我是 grails 的新手，但之前有使用 .net 和 c# 和 linq 来查询数据库的经验。

我正在尝试使用多选下拉框按可选项目过滤对象列表。所以对于控制器，我将得到一个参数列表，其中一些参数为空。所以我想要类似的东西
`DailyProduction.Where(x => loaction.contains(x.location)).Select().ToList()`。

然而，在 groovy 和 grails 中它看起来并不那么简单。

这是我尝试过的：

```
def filteredList = DailyProductionReport.createCriteria()
    def results = filteredList.list {

        if(params.locationSelect != null)
            'in'("location", [params.locationSelect.each{ it != null}])

    } 
```

但我得到一个运行时异常，上面写着：

```
 Class:
java.lang.ClassCastException
Message:
[Ljava.lang.String; cannot be cast to java.lang.String 
```

我试过查看不同的论坛，但没有任何运气。我几乎无计可施。如果任何 groovy 大师可以为我阐明一些事情，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:44:34.863

看起来你的问题可能是

```
[params.locationSelect.each{ it != null }] 
```

`each`用于迭代，结果表达式只是被迭代的列表。此外，方括号将该列表嵌套在另一个列表中。你可能想要

```
'in'('location', params.locationSelect.findAll { it != null }) 
```

在这种特殊情况下，您也可以只使用标识闭包，因为对象的[“groovy truth”](http://docs.codehaus.org/display/GROOVY/Groovy+Truth)与测试 null 相同：

```
'in'('location', params.locationSelect.findAll()) 
```

# objective-c - import = dynamic linking? & include = static linking?

> ID：11211929
> 
> 赞同：0
> 
> 时间：2012-06-26T16:34:18.623
> 
> 标签：objective-c, linker, header-files

I wonder the difference of import and include in Object-c

By the way, I am not clear about the difference of dynamic and static linking.

If I use a library with static linking, is that mean I copy the code i need from library for my program and link with them? Then my program can work with the code from library.

If i use a library with dynamic linking, is that mean I only reference the code i need from library to my program when my program is running. Then my program can work with the "reference code".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:45:07.217

`#import` vs. `#include` and static vs. dynamic linking are two completely unrelated topics.

`#include` includes the contents of a file directly in another file, and is available in C (and therefore also in Objective-C). However, it's common to want to include the contents of a file *only if* that file *hasn't already been included*. (You don't, for example, want to declare the same variables twice; it'd cause compiler errors!) That's why `#import` was added in Objective-C; it does exactly that: includes the contents of a file *only if* that file hasn't already been `#import`ed. If you're not sure what to use, you should probably be using `#import`.

Static vs. dynamic linking is completely different--linking happens *after* compilation, so it couldn't possibly be related to `#import` and `#include`, which are part of the source code. Your thoughts on linking are exactly correct, however--statically linked libraries are included in your app, and your users don't need them. Dynamically linked libraries are referenced, and must be present on your users' machines for your app to run.

# javascript - Javascript：从字符串初始化变量？

> ID：11211940
> 
> 赞同：2
> 
> 时间：2012-06-26T16:35:03.960
> 
> 标签：javascript, arrays, string, google-maps, variables

我在谷歌地图上工作，要创建三个以上的瓷砖叠加层。一个例子：

**瓷砖叠加**

```
var parkingOptions = {                     //Parking Overlay
    getTileUrl: function(coord, zoom) {
        return "/maps/tiles/tilesparking/" + zoom + "_" + coord.x + "_" + coord.y + ".png";
    },
    tileSize: new google.maps.Size(256, 256)
};

var parkingMapType = new google.maps.ImageMapType(parkingOptions); 
```

但是，为了避免在我的映射范围之外丢失图块而导致 404 错误，我的代码稍微复杂一些；因此，我打算创建一个循环，将分配给每个叠加层的特定关键字*（此处为“停车”）*插入到上述代码中。因此：

**循环**

```
var tileNames = ["base", "parking", "access"];

for (var i = 0; i < tileNames.length; i++) {
    //insert Tile Overlay code here
}; 
```

但是，我有一个特殊的问题：我找不到从 tileNames 数组中获取字符串并使用它们来初始化 Tile Overlay 代码中的两个变量的方法。理想情况下，我想实现这样的目标：

**尝试 1**

```
var tileNames[1] + "Options" = {  //ideally: var parkingOptions = {
    //insert remaining code
}; 
```

但是，这不起作用，我也没有真正期望它。也不会尝试创建那些完整的字符串并尝试将其插入到初始化中：

**尝试 2**

```
var newOptions = tileNames[1] + "Options";
var newOptions = {
    //insert remaining code
}; 
```

因此，有没有办法将字符串放入初始化变量中？

* * *

**注意：**我已经包含了我自己的替代解决方案作为答案。它应该可以工作，但它会破坏变量的名称并将其替换为一个不起眼的数组变量。我最好保留一个描述性变量名称，因为它们经常用于在结果代码中添加和隐藏覆盖。

* * *

**解决方案** *无论如何对于这个问题......*

```
var tileNames = ["beloit", "parking", "access"];
var mapType = {};

for (var i = 0; i < tileNames.length; i++) {
    var tileOptions = {
        getTileUrl: function(coord, zoom) {
            return "/maps/tiles/tiles" + tileNames[i] + "/" + zoom + "_" + coord.x + "_" + coord.y + ".png";
        },
        tileSize: new google.maps.Size(256, 256)
    };
    mapType[tileNames[i]] = new google.maps.ImageMapType(tileOptions);
}; 
```

谜题的另一部分，getTileUrl 函数中的“tileNames[i]”是未定义的，因为函数在执行时需要它，而不是将名称字符串放入函数中；但是，这是一个新问题：[Javascript: Making a variable static when defined a function in a loop?](https://stackoverflow.com/questions/11214807/javascript-using-a-string-to-define-a-function)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:35:05.800

现在，我不知道上述是否确实可行*（我更喜欢它，正如我将在下面解释的那样）*，但在起草这个问题时，事先阅读的各种其他 Q/AI 开始变得更有意义。他们的一般信息：“使用数组”：

**可能的解决方案** *（已编辑；现在应该可以使用了。）*

```
var tileNames = ["beloit", "parking", "access"];  //Would be used more than once.
var tileMapType = [];

for (var i = 0; i < tileNames.length; i++) {
    var tileOptions = {
        getTileUrl: function(coord, zoom) {
            return "/maps/tiles/tiles"+tileNames[i]+"/" + zoom + "_" + coord.x + "_" + coord.y + ".png";
        },
        tileSize: new google.maps.Size(256, 256)
    };
    tileMapType[i] = new google.maps.ImageMapType(tileOptions);
}; 
```

这种方法的唯一问题是，在下面的代码中，我必须将这些 MapTypes 放入地图中，并将它们切换为可见和不可见，并且使用不具描述性的 tileMapType[x] 这样做会妨碍整体可读性。 *（也许这并不像我想的那么重要，但仍然如此。>。>）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:38:33.460

你不能这样做：

```
var tileNames[1] + "Options" = {
  //insert remaining code
}; 
```

但你可以这样做：

```
window['a'] = 'b';
alert(a); // shows 'b' 
```

或者如果你在一个函数中

```
this['a'] = 'b'; 
```

编辑：

```
var obj = {};
obj.a = 'a';
// obj.a == obj['a']
alert(obj['a']) // alerts a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:05:04.593

假设我已经理解您的问题，您可以将您的图块封装在一个对象中，并通过您提供的名称引用该图层：

```
var tileNames = ["base", "parking", "access"];
var Tiles = {};

for (var i = 0; i < tileNames.length; i++) {
    Tiles[tileNames[i]] = makeOverlay(tileNames[i], coords, zoom);
};

//iterate the maps
for (var tile in Tiles)
   alert(Tiles[tile].someGoogleMapPropery)

//individually     
alert (Tiles.base.someGoogleMapPropery)
alert (Tiles.parking.someGoogleMapPropery)
//or
alert (Tiles["access"].someGoogleMapPropery)

function makeOverlay(name, coords, zoom) {
    return new google.maps.ImageMapType({
            getTileUrl: function(coord, zoom) {
                return "/maps/tiles/tiles" + name + "/" + zoom + "_" + coord.x + "_" + coord.y + ".png";
            },
            tileSize: new google.maps.Size(256, 256)
        });
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:42:40.013

可以使用 eval() 读取类似的变量，但不能设置它们。

例子：

var a = "b"; 变量 b = "c"; 评估（一）；// 返回“c”

# windows-installer - 为不同平台捆绑 MSI 的最佳方式是什么？

> ID：11211941
> 
> 赞同：3
> 
> 时间：2012-06-26T16:35:06.177
> 
> 标签：windows-installer, bundle, cpu-architecture

我有两个 MSI 安装程序，用于 x86 和 x64 架构。我想将它们捆绑到一个统一的安装程序中，而不是根据机器的架构选择正确的安装程序并启动它。

我在 dotNetInstaller 上取得了一些成功，但它只是创建了一个额外的 exe 文件，msi 必须作为单独的文件包含，所以这是不合适的。

我不敢相信这是一项如此罕见的任务，但我找不到太多其他东西，有人能指点我一个好的捆绑/引导程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:01:07.160

[Advanced Installer](http://www.advancedinstaller.com)有一个名为“[将 EXE 转换为 MSI](http://www.advancedinstaller.com/user-guide/tutorial-convert-exe-to-msi.html) ”的功能，它也可以用来打包您的 MSI 包。

Advanced Installer 的另一个选项是在[Prerequisites page](http://www.advancedinstaller.com/user-guide/prerequisites.html)中简单地将两个 MSI 软件包添加为基于功能的先决条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:49:45.043

我使用了[NSIS](http://nsis.sourceforge.net/Embedding_other_installers)，它是免费的、最小的、可编写脚本的，并且提供了良好的压缩。

我的脚本如下：

```
!include x64.nsh

AutoCloseWindow true
SilentInstall silent
SetCompressor /SOLID lzma

Section
Initpluginsdir
${If} ${RunningX64}
  File "/oname=$pluginsdir\inst.msi" "64bit.msi"
${Else}
  File "/oname=$pluginsdir\inst.msi" "32bit.msi"
${EndIf}
ExecWait '"msiexec" /i "$pluginsdir\inst.msi"'
SectionEnd 
```

这将编译为一个安装程序，该安装程序会启动正确的 MSI 安装程序，而无需额外的 UI。

# php - 单个创建视图上的多个 _form 视图 [Yii]

> ID：11211943
> 
> 赞同：1
> 
> 时间：2012-06-26T16:35:07.517
> 
> 标签：php, forms, templates, yii, yii-chtml

我正在尝试合并 3 个模型以创建第四个模型。我有`model1`，`model2`并且`model3`我想将它们合并到`modelMaster`. 我还为所有这些创建了控制器。当我调用`modelMaster/create`操作时，我会渲染渲染`modelMaster/create`视图的`modelMaster/_form`视图。在这个`_form`视图中，我还想渲染和`model1/_form`，它从. 但是，这不起作用。如何将这三种不同的观点结合在一起？`model2/_form``CHtml::dropDownList()``model3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:29:15.227

如果您尝试跳过从 _form 视图生成的表单并使用唯一的模型名称，我认为您可以使用本手册：[具有更多模型的单一表单](http://www.yiiframework.com/wiki/19/how-to-use-a-single-form-to-collect-data-for-two-or-more-models/) 因此表单定义的生成始终处理父视图，而 _form 仅处理输入

在视图中使用单个模型的另一种方式，通过扩展 CFormModel 创建表单模型，并处理此模型与包装子模型之间的数据绑定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T07:41:49.820

如果要将多个表单嵌套到一个主表单中，则必须相应地调整表单模板。你所有的`modelMaster/create`, `model1/_form`, `model2/_form`-views 创建和渲染一个新的`CActiveForm`（以及几个`<form>`标签）。

由于您不能在 html 中嵌套表单元素（html 应该如何知道将数据传递给哪个操作），您必须通过执行以下操作来避免这种情况：

1.  将要嵌套的表单的输入提取到新视图中，例如`model1/_formInputs`看起来像

    ```
    ...
    <?php echo $form->labelEx($model,'name'); ?>
    <?php echo $form->textField($model,'name');
    <?php echo $form->error($model,'name');
    ... 
    ```

2.  通过将返回分配给变量（如果尚未完成） ，更改`model1/create`和其他视图并获取对在那里创建的表单的引用：`$this->beginWidget``$form`

    ```
    <?php $form = $this->beginWidget('CActiveForm', array(
        'id'=>'foo',
    )); ?> 
    ```

    将以前的输入字段替换为

    ```
    <?php $this->renderPartial('model1/_formInputs', array('form' => $form); ?> 
    ```

    现在，例如旧的`model1/create`-view 应该按预期工作

3.  要让您的多模型表单工作，您只需获取对在其中创建的表单的引用`modelMaster/create`并使用它来呈现`*/_formInputs`您需要的所有内容。还请记住将输入模型包含在 renderPartial 调用中。所以`modelMaster/create`看起来像：

    ```
    <?php $form = $this->beginWidget('CActiveForm', array(
        'id'=>'foo',
    )); ?>

    /* Master Inputs here */

    // Rendering other models' inputs
    <?php $this->renderPartial('model1/_formInputs', array('form' => $form, 'model' => $model1); ?>
    <?php $this->renderPartial('model2/_formInputs', array('form' => $form, 'model' => $model2); ?>

    /* Render Form Buttons here */

    <?php $this->endWidget(); ?> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T03:22:32.593

使用 Ajax 提交，在 Yii 中这很容易做到，并且控制器中的内容很容易理解，每个控制器都会有一个保存并以 json 响应以确认保存。已经有ajax验证。

```
 /**
 * Performs the AJAX validation.
 * @param CModel the model to be validated
 */
protected function performAjaxValidation($model)
{
    if(isset($_POST['ajax']) && $_POST['ajax']==='employee-form')
    {
        $valid = CActiveForm::validate($model);
        if(strlen($valid) > 2) {
            echo $valid;
            Yii::app()->end();
        }       
    }
} 
```

如您所见，如果有错误，我已对其进行了修改以返回错误（如果有效，则 validate 返回 []，我可能应该检查它而不是 strlen >2 ），否则让脚本继续，在这种情况下它将进入保存功能。

# android - Android：随机和文本视图

> ID：11211944
> 
> 赞同：0
> 
> 时间：2012-06-26T16:35:09.950
> 
> 标签：android, textview

我刚开始学习Android，遇到了一些误解。我正在尝试创建一个显示 textView 和按钮的应用程序。每次单击按钮都会生成一个新的随机数，该随机数应显示在 textView 中。

但不幸的是，我的代码会导致错误列表。这里是：

```
public class FirstAndroidProjectActivity extends Activity {

public OnClickListener listener = new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        TextView tv = (TextView) findViewById(R.id.display);
        Random r = new Random();
        int i = r.nextInt(101);
         tv.setText(i);

    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   Button button = (Button) findViewById(R.id.button);
   button.setOnClickListener(listener);    
    }
} 
```

如果我只是不使用随机并使用除**i**之外的一些字符串 （例如**tv.setText("99");**）一切正常，但它不适用于将变量作为 setText() 的参数。

哪里有错？

希望得到您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:37:37.280

在 TextView 上设置文本之前，您需要将随机数转换为字符串

尝试

```
tv.setText(i +""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:39:29.950

尝试：

```
tv.setText(String.valueOf(i)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T16:40:33.587

Java 不会自动转换类型。当其中一个或多个参数是字符串时，+ 运算符被重载以将传递给它的参数转换为字符串。因此，当您将 i + "" 传递给 setText() 时，您传递的是一个字符串，但是如果您只是传递 i，那么编译器会看到您将一个 int 传递给一个需要字符串的方法，并让您知道这不可能完毕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:39:41.683

i 是一个 int，试试 tv.setText("" + i);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T16:39:51.027

在将整数设置为 textView 之前将其转换为字符串。您还应该移出`Random r = new Random();`该方法，否则您的数字可能不是真正随机的：

```
Random r = new Random();

@Override
public void onClick(View v) {
    TextView tv = (TextView) findViewById(R.id.display);
    int i = r.nextInt(101);
    tv.setText(Integer.toString(i));
} 
```

从文档中：

> 如果使用相同的种子创建 Random 的两个实例，并且为每个实例进行相同的方法调用序列，它们将生成并返回相同的数字序列

如果您创建两个`Random`对象的速度太快（例如用户非常快速地单击按钮两次），它们将共享相同的种子（系统时钟用于生成它），结果您将获得相同的数字两次.

通过`Random`在全局变量中仅创建一个实例，您可以避免此问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T16:40:12.620

利用

```
tv.setText(new Integer(i).toString()) ; 
```

# google-chrome-extension - 在特定框架中执行脚本

> ID：11211948
> 
> 赞同：6
> 
> 时间：2012-06-26T16:35:25.927
> 
> 标签：google-chrome-extension

我只能看到如何在顶级框架或某个选项卡的所有框架中执行脚本：

```
chrome.tabs.executeScript(integer tabId, object details, function callback) 
```

where if `details.allFrames`is `true`then 它将在每个子帧中执行，但如果为 false，则只会在顶层帧中执行。我怎样才能提供一个`frameId`来执行脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T03:05:19.547

据我所知，你不能。相反，`allFrames: true`在内容脚本中设置和编写javascript来检测它是否是正确的框架，如果它不是正确的框架，则不做任何事情就返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T06:03:41.897

这是我解决同样问题的路线：

[https://github.com/Rob--W/chrome-api/blob/master/chrome.tabs.executeScriptInFrame/chrome.tabs.executeScriptInFrame.js](https://github.com/Rob--W/chrome-api/blob/master/chrome.tabs.executeScriptInFrame/chrome.tabs.executeScriptInFrame.js)

```
function alertCookie(tabId, frameId) {
chrome.tabs.executeScriptInFrame(tabId, {
    frameId: frameId,
    code: '// This code runs in one frame, specified via frameId \n' +
          'alert(location.href);' +
          'document.cookie;'
}, function(results) {
    if (!results) {
        alert('Failed to execute code. See background page for details.');
        return;
    }
    var cookie = results[0];
    alert('Found cookie: ' + cookie);
}); 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-09T08:10:32.420

从[文档](https://developer.chrome.com/extensions/tabs#method-executeScript "文件")

如果 allFrames 为真，则意味着应该将 JavaScript 或 CSS 注入到当前页面的所有框架中。默认情况下，它是 false 并且只注入到顶部框架中。如果设置了 true 和 frameId，则代码将插入所选框架及其所有子框架中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-11T15:40:38.670

从[Chrome 39 开始](https://developer.chrome.com/extensions/tabs#method-executeScript)，有一个可选参数名为`frameId`.

```
chrome.webNavigation.onCompleted.addListener(function(e) {
    chrome.tabs.executeScript(e.tabId, {
        frameId: e.frameId,      // <== LOOK HERE
        code: "console.log('hello');"
    });
}); 
```

# git - 接收后挂钩权限被拒绝“无法创建文件”错误

> ID：11211950
> 
> 赞同：2
> 
> 时间：2012-06-26T16:35:32.133
> 
> 标签：git, hook, push, gitolite, githooks

刚刚`gitolite`安装在我的网络服务器上，并试图获得一个`post-receive`可以指向`git dir`apache 方向的钩子。

这就是我的`post-receive`钩子的样子。从[Using Git to manage a web site](http://toroid.org/ams/git-website-howto)得到这个脚本。

```
#!/bin/sh
echo "post-receive example.com triggered"
GIT_WORK_TREE=/srv/sites/example.com/public git checkout -f 
```

我也试过：

```
#!/bin/sh
echo "post-receive example.com triggered"
unset GIT_INDEX_FILE
export GIT_WORK_TREE=/srv/sites/example.com/public
export GIT_DIR=/home/git/repositories/example.com.git
git checkout -f 
```

`git push origin master`这是我从本地工作站返回的错误响应。这些是我的存储库中的文件。

```
remote: post-receive example.com triggered
remote: error: unable to create file .htaccess (Permission denied)
remote: error: unable to create file .tm_sync.config (Permission denied)
remote: fatal: cannot create directory at 'application': Permission denied 
```

独立脚本错误

```
remote: sudo: no tty present and no askpass program specified
remote: Sorry, try again.
remote: sudo: no tty present and no askpass program specified
remote: Sorry, try again.
remote: sudo: no tty present and no askpass program specified
remote: Sorry, try again.
remote: sudo: 3 incorrect password attempts 
```

更新：

```
git@vannevar:~$ sudo -l
Matching Defaults entries for git on this host:
    env_reset, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin

User git may run the following commands on this host:
    (root) NOPASSWD: /usr/local/sbin/prgetsimpleappscom
git@vannevar:~$ /usr/local/sbin/prgetsimpleappscom
-su: /usr/local/sbin/prgetsimpleappscom: Permission denied
git@vannevar:~$ sh /usr/local/sbin/prgetsimpleappscom
post-receive getsimpleapps.com triggered
error: unable to unlink old 'application/config/development/database.php' (Permission denied)
error: unable to unlink old 'application/config/production/database.php' (Permission denied)
error: unable to unlink old 'application/config/quickbooks.php' (Permission denied)
git@vannevar:~$ sudo sh /usr/local/sbin/prgetsimpleappscom
[sudo] password for git: 
Sorry, user git is not allowed to execute '/bin/sh /usr/local/sbin/prgetsimpleappscom' as root on vannevar.
git@vannevar:~$ sudo /usr/local/sbin/prgetsimpleappscom
[sudo] password for git: 
sudo: /usr/local/sbin/prgetsimpleappscom: command not found
git@vannevar:~$ nano /usr/local/sbin/prgetsimpleappscom
git@vannevar:~$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-15T23:06:33.233

这就是我的工作方式：

改为`post-receive`：

```
sudo sh /usr/local/sbin/prgetsimpleappscom 
```

更改`sudoers`为`visudo`

```
git ALL = (root) NOPASSWD: /usr/local/sbin/prgetsimpleappscom
git ALL = (root) NOPASSWD: /bin/sh
git ALL = (root) NOPASSWD: /bin/sh /usr/local/sbin/prgetsimpleappscom 
```

确认`visudo`工作

```
git@vannevar:~$ sudo -l
Matching Defaults entries for git on this host:
    env_reset, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin

User git may run the following commands on this host:
    (root) NOPASSWD: /usr/local/sbin/prgetsimpleappscom
    (root) NOPASSWD: /bin/sh
    (root) NOPASSWD: /bin/sh /usr/local/sbin/prgetsimpleappscom 
```

跑：

```
sudo sh /usr/local/sbin/prgetsimpleappscom
post-receive getsimpleapps.com triggered 
```

和：

```
$ git push origin master
remote: post-receive getsimpleapps.com triggered 
```

# c++ - 这是在 C++11 中使用 unique_ptr 和 move-semantics 实现 pimpl 的正确方法吗

> ID：11211952
> 
> 赞同：9
> 
> 时间：2012-06-26T16:35:48.220
> 
> 标签：c++, c++11, unique-ptr

我还没有看到同时使用 unique_ptr 和 move-semantics 的 pimpl 示例。

我想向 STL 派生容器添加一个 CHelper 类，并使用 pimpl 隐藏 CHelper 的功能。

这看起来对吗？

## 派生的.h

```
class CDerived : public set<CSomeSharedPtr>, public CHelper  
{
//...
}; 
```

`

## 助手.h

```
// derived containers need to support both copy and move, so CHelper does too  

class CHelper  
{  
private:  
    class impl;  
    unique_ptr<impl> pimpl;  

public:  
//--- default: need both cotr & cotr (complete class) in order to use unique_ptr<impl>  
    CHelper();  
    ~CHelper();  

//--- copy  
    CHelper(const CHelper &src);         //copy constructor  
    CHelper& operator=(const CHelper &src);//assignment operator  

//--- move  
    CHelper(CHelper &&src);         //move constructor  
    CHelper& operator=(CHelper &&src);//move operator  

//--- expose public methods here  
    void SetModified(BOOL bSet=TRUE);  
}; 
```

## 助手.cpp

```
//===========================  
class CHelper::impl  
{  
public:  
BOOL m_bModified; //has the container been modified (needs to be saved)  
// ... other data  

impl() {m_bModified = FALSE;}  

//--- copy cotr/assign  
impl(const impl &src)  
{  
  *this = src;  
}  

void operator=(const impl &src)   
{  
  m_bModified = src.m_bModified;  
  // ...other data  
}  

//--- move cotr/assign ?? do I need to write move cotr/assign ??   

};  

//============================  
CHelper::CHelper() : pimpl(unique_ptr<impl>(new impl())) {}

CHelper::~CHelper() {}  

//--- copy  
CHelper::CHelper(const CHelper &src)  
: pimpl(unique_ptr<impl>(new impl(*src.pimpl))) {}

CHelper& CHelper::operator=(const CHelper &src)  
{  
  if (this != &src)  
    *pimpl = *src.pimpl;  

  return *this;  
}  

//--- move  
CHelper::CHelper(CHelper &&src)  
{  
  if (this != &src)  
  {  
    pimpl = move(src.pimpl); //use move for unique_ptr  
    src.pimpl.reset(nullptr);//leave pimpl in defined / destructable state  
  }  
}  

CHelper& CHelper::operator=(CHelper &&src)  
{  
    if (this != &src)  
    {  
      pimpl = move(src.pimpl); //use 'move' for unique_ptr  
      src.pimpl.reset(nullptr);//leave pimpl in defined / destructable state  
    }  
    return *this;  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:03:56.487

考虑到唯一的成员`CHelper`是 a`unique_ptr`并且 copy 的默认实现是调用基数和成员的副本，*move*的默认实现是调用基数和成员的*移动*，不需要覆盖`CHelper`ctors并分配。让默认值完成他们的工作。他们只会调用适当的 unique_ptr 移动构造函数和运算符。

关于组合`CHelper`并`set<...>`形成 CDerived... 这不是“规范设计”（`set`不是 OOP 类...，而 CHelper 也不是）但如果使用得当可以工作（不要尝试分配`CDerived`到`CHelper*`广告调用删除就可以了，否则你会流泪）。只是没有足够的信息来理解他们的目的。

如果问题是“我希望 CHelper 也能够复制”，那么您最好遵循这样的成语（`#include`并且`using namespace`分开......）

```
class CHelper
{
    struct impl
    {
       .....
    };
public:
    // create and initialize
    CHelper() :pimpl(new impl) {}

    // move: just keep the default
    CHelper(CHelper&& a) = default;

    // copy: initialize with a copy of impl
    CHelper(const CHelper& a) :pimpl(new impl(*a.pimpl)) {}

    CHelper& operator=(CHelper a) //note: pass by value and let compiler do the magics
    { 
        pimpl = move(a.pimpl); //a now nullifyed, but that's ok, it's just a value
        return *this; 
    }

    ~CHelper() = default; //not really necessary
private:
    unique_ptr<impl> pimpl;
}; 
```

当然，您可以根据需要随意分离声明和实现。

**根据 John Balcom 的评论进行编辑。**

是的，当然代码会发生变化，但实质上不会发生变化。您只需将声明转发`struct impl;`到`CHelper`（以便 unique_ptr 具有含义），然后`CHelper::impl`在其他地方声明结构（可能在所有 CHelper 实施将完成的 CPP 文件中）。

这里唯一需要注意的是，在 CPP 文件中，CHelper::impl 必须同时定义构造函数和析构函数，以便在 CPP 文件中具有一致的 unique_ptr 实例化（必须调用 impl 析构函数）。否则，某些编译器可能会在所有包含 CHelper 声明的文件中出现“类型使用不完整”错误。

关于第二点（源自`std::set`），这是 C++ 编程的一个有争议的方面。由于与 C++ 本身无关的原因，但在面向对象编程学派中，*“inhertance”*表示*“is a”*，*“is a”*表示*“object subtitution possible”*。正因为如此，如果基 dtor 不是虚拟的，由于通过基指针删除对象是 UB，从而使对象替代 UB，OOP 学校拒绝将任何没有虚拟 dtor 的类的继承作为教条，并且因为方式他们在开始编程时就受过教育，如果您这样做，他们就会开始向您吐火。

对我来说，这在你的设计中不是问题，但是他们理解 C++ 继承并不意味着“*是*”而是“*就像*”并且并不意味着对象替换是他们的错误（对我来说，这是他们认为每个 C++ 类都是错误的）一个 OOP 对象，而不是您使用工具来做对您有用的事情，如果您想更清楚地说明我的立场，请看[这里](https://stackoverflow.com/a/11202368/924727)或[这里](https://stackoverflow.com/a/10478845/924727)：C++ 中的对象替换不是针对“对象”而是逐个方法的，因为每个方法都可以虚拟或不相互独立）。就是说，也许你必须和那些人一起工作，所以......评估在他们自己喜欢的宗教实践中不跟随他们的利弊。

# django - Django/Jython 配置不当的错误

> ID：11211955
> 
> 赞同：0
> 
> 时间：2012-06-26T16:35:55.563
> 
> 标签：django, jython

如教程 (http://www.jython.org/jythonbook/en/1.0/JythonDjango.html) 中所述，我使用 doj.backends.zxjdbc.postgresql 作为 Django 的数据库引擎。但是，当我这样做时

```
jython manage.py syncdb 
```

我收到一个 ImproperlyConfigured 错误，指出 doj.backends.zxjdbc.postgresql 不是可用的后端，并且不存在名为 postgresql 的模块。奇怪的是，如果我进入 Jython shell，我可以做到

```
import doj.backends.zxjdbc.postgresql 
```

没有任何错误信息。

关于这里发生了什么的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:50:20.417

解决方案：django-jython 已过期。目前不支持 1.4，因此除了恢复到受支持的 django 版本外，没有解决此问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T16:02:20.337

不幸的是，django-jython 似乎不再看到太多/任何积极的发展......

但是，我发现下面的 Google 代码存储库中可用的开发版本在 Django 1.5 中工作（如果你选择正确的版本，我假设它们也可以与 1.4 一起工作）： [https ://code.google.com/p /django-jython/源/列表](https://code.google.com/p/django-jython/source/list)

特别是，我发现这个开发版本适用于 Django 1.5： [https ://code.google.com/p/django-jython/source/detail?r=c4a0dd949a6d86a4baf8d1bed3b1926fa5318e87](https://code.google.com/p/django-jython/source/detail?r=c4a0dd949a6d86a4baf8d1bed3b1926fa5318e87)

# css - 相对元素与 Chrome 中的绝对元素重叠

> ID：11211958
> 
> 赞同：4
> 
> 时间：2012-06-26T16:36:05.583
> 
> 标签：css, google-chrome, css-position

我有一个看起来很简单的安排：UL 中的标签列表，最后一个列表项包含标签“其余”的绝对定位列表。

在此处查看精简演示：http: [//dev.timmurtaugh.com/demo/chrome-problem/browse-bar-sandbox.html](http://dev.timmurtaugh.com/demo/chrome-problem/browse-bar-sandbox.html)

在 Chrome（据我所知，只有 Chrome；版本 19.0.1084.56）中，绝对定位的列表与其下方的“仪器”标题重叠。

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:55:42.057

尝试将 z-index:999 添加到下面提到的类中：

```
.browseBar ul.tagList li.seeMore, .browseBar ul.tagList li.clearAll {
  position: relative;
  color: #C82D09;
  cursor: pointer;
  z-index: 999; /* Add This */
} 
```

# php - PHP 上的 cURL 奇怪地保持沉默

> ID：11211962
> 
> 赞同：1
> 
> 时间：2012-06-26T16:36:13.587
> 
> 标签：php, curl

好的，所以在尝试获取 cURL 以获取受密码保护的 XML 文件并且完全没有得到任何东西之后，我尝试简化我的代码以查看什么*会*起作用。结果一无所获。这是我的代码：

```
$ch = curl_init("www.google.com");

curl_setopt($ch, CURLOPT_HEADER, TRUE);
curl_setopt($ch, CURLOPT_VERBOSE, TRUE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);

curl_exec($ch);

curl_close($ch); 
```

cURL 是沉默的。我的意思是没有任何东西打印到页面上。我肯定启用了它，我的 phpinfo 看起来像这样：

```
cURL support            enabled
cURL Information            libcurl/7.16.0 OpenSSL/0.9.8a zlib/1.2.3 
```

在 Windows NT 服务器上运行 php 5.2。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T16:38:58.077

关键在这一行：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
```

您告诉 cURL 返回传输结果而不是回显它（默认值）。因此，要么删除该行，要么执行以下操作：

```
$result = curl_exec($ch);

if ($result === false) {
    echo "Error: " . curl_error($ch);
} else {
    echo $result;
} 
```

如果您在评论中指出 SSL 错误，您可以在 cURL 句柄上设置另一个选项以禁用检查证书：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
```

# jquery - jquery 仅适用于单个 div

> ID：11211964
> 
> 赞同：0
> 
> 时间：2012-06-26T16:36:23.007
> 
> 标签：jquery

[我尝试在我的网站http://windows7themer.com](http://windows7themer.com)中为图像实现悬停效果，就像 Google 图片一样，但它只在第一个 div 部分有效。

该页面有大约 5 个重复的 div 部分。而且我想将图像调整为可变大小，就像在谷歌图像中一样。

这是原始的 jsfiddle：http: [//jsfiddle.net/roXon/HmTrw/](http://jsfiddle.net/roXon/HmTrw/)

```
// ibox image zoomer plugin // roXon

(function($) {
    $.fn.ibox = function() {

        // set zoom ratio //
        resize = 20;
        ////////////////////
        var img = this;
        img.parent().append('<div id="ibox" />');
        var ibox = $('#ibox');
        var elX = 0;
        var elY = 0;

        img.each(function() {
            var el = $(this);

            el.mouseenter(function() {
                ibox.html('');
                var elH = el.height();
                elX = el.position().left - 6; // 6 = CSS#ibox padding+border
                elY = el.position().top - 6;
                var h = el.height();
                var w = el.width();
                var wh;
                checkwh = (h < w) ? (wh = (w / h * resize) / 2) : (wh = (w * resize / h) / 2);

                $(this).clone().prependTo(ibox);
                ibox.css({
                    top: elY + 'px',
                    left: elX + 'px'
                });

                ibox.stop().fadeTo(200, 1, function() {
                    $(this).animate({top: '-='+(resize/2), left:'-='+wh},400).children('img').animate({height:'+='+resize},400);
                });
            });

            ibox.mouseleave(function() {
                ibox.html('').hide();
            });
        });
    };
})(jQuery);

jQuery(document).ready(function() {
    jquery('.item').ibox();
}); 
```

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:44:16.027

我检查了您的网站，问题来自您的 CSS：

```
media="all"
.grid-view, .list-view {
position: relative;
display: inline-block;
float: left;
clear: both;
width: 100%;
} 
```

你应该删除`position: relative;`它，它会起作用。

也尝试更换

`$(this).animate({top: '-='+(resize/2), left:'-='+wh},400).children('img').animate({height:'+='+resize},400)`

经过

`$(this).animate({top: '-='+(resize/2), left:'-='+wh},400).find('img').animate({height:'+='+resize},400)`

# c# - C# MSScriptControl 将类传递给函数

> ID：11211973
> 
> 赞同：2
> 
> 时间：2012-06-26T16:36:56.173
> 
> 标签：c#, msscriptcontrol

我在 C# 中使用 MSScriptControl。我想将一个类从脚本传递给主机。简化示例：Javascript：

```
function Fx(n) {
    this.name = n;
}
var fx = new Fx("test");
rfx.DoEffect(fx); 
```

C＃：

```
[ComVisible(true)]
public class Rfx {
    public void DoEffect(object fx) {
        // Try to read fx.name
    }
} 
```

我的问题是：如何从对象中获取数据（C# 报告为 System.__ComObject）。我尝试了[这里](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.getvalue.aspx)提供的技术，但它不起作用：

```
public void DoEffect(object fx)
{
    System.Reflection.FieldInfo[] myFields = fx.GetType().GetFields(System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance);
    Console.WriteLine("FieldInfo length = " + myFields.Length);
    for (int i = 0; i < myFields.Length; i++)
    {
         Console.WriteLine("The value of {0} is: {1}", myFields[i].Name, myFields[i].GetValue(fx));
    }
} 
```

myFields.Length 为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:12:45.573

建立在 Mangist 的代码之上，这是可行的：

```
using System; 
using System.Runtime.InteropServices; 
using ComTypes = System.Runtime.InteropServices.ComTypes;

public class ComHelper 
{
    public static string GetValue(object comObj, string name)
    {
        if (comObj == null)
            return String.Empty;

        if (!Marshal.IsComObject(comObj))
            //The specified object is not a COM object 
            return String.Empty;

        IDispatch dispatch = comObj as IDispatch;
        if (dispatch == null)
            //The specified COM object doesn't support getting type information 
            return String.Empty; 

        try
        {
            int language_id = 0;
            int DISPATCH_METHOD = 0x1;
            int DISPATCH_PROPERTYGET = 0x2;

            int[] displayIDs = new int[1];
            Guid empty = Guid.Empty;
            string[] names = new string[] { name };
            dispatch.GetIDsOfNames(ref empty, names, names.Length, language_id, displayIDs);
            System.Runtime.InteropServices.ComTypes.DISPPARAMS dspp = new System.Runtime.InteropServices.ComTypes.DISPPARAMS();
            System.Runtime.InteropServices.ComTypes.EXCEPINFO ei = new System.Runtime.InteropServices.ComTypes.EXCEPINFO();
            IntPtr[] arg_err = new IntPtr[10];
            object result;
            if (1 == displayIDs.Length)
            {
                dispatch.Invoke(displayIDs[0], ref empty, language_id, (ushort)(DISPATCH_METHOD | DISPATCH_PROPERTYGET), ref dspp, out result, ref ei, arg_err);
                return result.ToString();
            }
            return String.Empty;
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            return String.Empty;
        }
    }
} 
```

我以前在 C++ 中做过这个，所以我可以复制代码，但我仍然在 C# 中弄湿了我的脚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-25T14:03:46.747

由于引入了[动态](https://msdn.microsoft.com/en-us/library/dd264736.aspx)，可以将`COM`对象视为动态，在您的示例中，您可以简单地执行以下操作：

```
dynamic fx = scriptControl.Run("youFunction");
string name = fx.name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:44:14.820

```
using System; 
using System.Runtime.InteropServices; 
using ComTypes = System.Runtime.InteropServices.ComTypes; 

namespace ComUtils 
{ 
    public class ComHelper 
    { 
        /// <summary> 
        /// Returns a string value representing the type name of the specified COM object. 
        /// </summary> 
        /// <param name="comObj">A COM object the type name of which to return.</param> 
        /// <returns>A string containing the type name.</returns> 
        public static string GetTypeName(object comObj) 
        { 

            if (comObj == null) 
                return String.Empty; 

            if (!Marshal.IsComObject(comObj)) 
                //The specified object is not a COM object 
                return String.Empty; 

            IDispatch dispatch = comObj as IDispatch; 
            if (dispatch == null) 
                //The specified COM object doesn't support getting type information 
                return String.Empty; 

            ComTypes.ITypeInfo typeInfo = null; 
            try 
            { 
                try 
                { 
                    // obtain the ITypeInfo interface from the object 
                    dispatch.GetTypeInfo(0, 0, out typeInfo); 
                } 
                catch (Exception ex) 
                { 
                    //Cannot get the ITypeInfo interface for the specified COM object 
                    return String.Empty; 
                } 

                string typeName = ""; 
                string documentation, helpFile; 
                int helpContext = -1; 

                try 
                { 
                    //retrieves the documentation string for the specified type description 
                    typeInfo.GetDocumentation(-1, out typeName, out documentation, 
                        out helpContext, out helpFile); 
                } 
                catch (Exception ex) 
                { 
                    // Cannot extract ITypeInfo information 
                    return String.Empty; 
                } 
                return typeName; 
            } 
            catch (Exception ex) 
            { 
                // Unexpected error 
                return String.Empty; 
            } 
            finally 
            { 
                if (typeInfo != null) Marshal.ReleaseComObject(typeInfo); 
            } 
        } 
    } 

    /// <summary> 
    /// Exposes objects, methods and properties to programming tools and other 
    /// applications that support Automation. 
    /// </summary> 
    [ComImport()] 
    [Guid("00020400-0000-0000-C000-000000000046")] 
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)] 
    interface IDispatch 
    { 
        [PreserveSig] 
        int GetTypeInfoCount(out int Count); 

        [PreserveSig] 
        int GetTypeInfo( 
            [MarshalAs(UnmanagedType.U4)] int iTInfo, 
            [MarshalAs(UnmanagedType.U4)] int lcid, 
            out ComTypes.ITypeInfo typeInfo); 

        [PreserveSig] 
        int GetIDsOfNames( 
            ref Guid riid, 
            [MarshalAs(UnmanagedType.LPArray, ArraySubType = UnmanagedType.LPWStr)] 
            string[] rgsNames, 
            int cNames, 
            int lcid, 
            [MarshalAs(UnmanagedType.LPArray)] int[] rgDispId); 

        [PreserveSig] 
        int Invoke( 
            int dispIdMember, 
            ref Guid riid, 
            uint lcid, 
            ushort wFlags, 
            ref ComTypes.DISPPARAMS pDispParams, 
            out object pVarResult, 
            ref ComTypes.EXCEPINFO pExcepInfo, 
            IntPtr[] pArgErr); 
    }
} 
```

# c# - 如何获取 HttpWebRequest 的本地端口号？

> ID：11211974
> 
> 赞同：4
> 
> 时间：2012-06-26T16:36:57.677
> 
> 标签：c#, .net, httpwebrequest, httpwebresponse

我正在使用 HttpWebRequest 异步发出长时间运行的请求。在请求运行时，我希望能够获取请求的本地端口（即客户端上的端口，而不是服务器上的端口）。我怎么做？

我查看了 HttpWebRequest.ServicePoint.BindIPEndPointDelegate，但这似乎只允许调用者指定本地 addy/port。理想情况下，我想让 HttpWebRequest 正常选择其本地端口，然后询问它选择了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:12:26.683

不幸的是，这`HttpWebRequest`门课真的没有暴露你的要求。

我不建议在生产中使用我将在下面说的内容。这**只是程序员的乐趣**。

该类`ServicePoint`有一个[`NetworkStream`](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.aspx)名为的私有成员`m_NetworkStream`，通过**内部**属性公开`NetworkStream`。

您可能已经知道，`NetworkStream`已经公开了一个公共`Socket`属性，它为您提供了底层套接字，您可以从中访问本地 IP 端点。

因此，唯一的挑战是获取`PropertyInfo`for `ServicePoint.NetworkStream`，获取特定`HttpWebRequest`实例的值，然后从那里开始它是一条直线。

**注意：**对于正确的解决方案，您可能需要查看[Windows HTTP 服务](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384273%28v=vs.85%29.aspx)，然后可能围绕它创建一个托管包装器（如果还没有的话）。

享受！

# android - 如何在TextView上斜穿

> ID：11211979
> 
> 赞同：6
> 
> 时间：2012-06-26T16:37:44.990
> 
> 标签：android

有什么简单的方法可以在TextView上画斜线吗？现在我正在使用这段代码：

```
textview.setPaintFlags(textview.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG); 
```

但我需要这样的东西：
![在此处输入图像描述](../Images/b64817a3b2e499934b976efb3a85fc2b.png)
我不太熟悉 Paint API 如何简单地实现这一点，因此将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T17:10:48.027

`TextView`使用自定义类非常容易。查看文档中的[Canvas 指南](http://developer.android.com/guide/topics/graphics/2d-graphics.html)以获取更多信息。请注意可以更改颜色/宽度的注释：

```
public class ObliqueStrikeTextView extends TextView
{
    private int dividerColor;
    private Paint paint;

    public ObliqueStrikeTextView(Context context)
    {
        super(context);
        init(context);
    }

    public ObliqueStrikeTextView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        init(context);
    }

    public ObliqueStrikeTextView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        init(context);
    }

    private void init(Context context)
    {
        Resources resources = context.getResources();
        //replace with your color
        dividerColor = resources.getColor(R.color.black);

        paint = new Paint();
        paint.setColor(dividerColor);
        //replace with your desired width
        paint.setStrokeWidth(resources.getDimension(R.dimen.vertical_divider_width));
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);
        canvas.drawLine(0, getHeight(), getWidth(), 0, paint);
    }
} 
```

您可以通过使用包完全限定视图来在布局文件中使用它，如下所示：

```
<your.package.name.ObliqueStrikeTextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="1234567890"
        android:textSize="20sp"/> 
```

这是最终结果：

![截屏](../Images/bce50bd57d63fa775c908676cd3c10eb.png)

# image - 获取 Matlab 图像处理的坐标

> ID：11211985
> 
> 赞同：0
> 
> 时间：2012-06-26T16:38:01.557
> 
> 标签：image, matlab, coordinate

我在 MATLAB 中创建了一个程序，它加载了一个视频，然后选择了一个对象。在该视频开始播放后，我可以跟随我被选中的对象。对象在二进制视频中进行跟踪。通常它只有 3 或 4 个像素，但这些像素的坐标（我的意思是对象）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:49:42.250

```
get(hpanel,'position') 
```

将返回`[left bottom width height]`矩形的 4 元素向量。

# javascript - 为什么我的 javascript 函数只更新了一些属性？

> ID：11211988
> 
> 赞同：0
> 
> 时间：2012-06-26T16:38:20.653
> 
> 标签：javascript

我有一个按钮脚本，可以根据主框架中加载的页面更改框架中的按钮。我遇到的问题是，虽然按钮（innerHTML）上的背景图像、tabindex 和文本都按预期更改，但 onclick 没有。它似乎完全忽略了它。这是我正在使用的脚本：

```
function createbutton(btn_N, btn_I, btn_L, btn_D) // (Div Name, Tab Index, Button Text, Page To Load){
    var btnN = top.frames['buttonbar'].document.getElementById(btn_N);

    btnN.style.cssText = "display:block; cursor:pointer; padding-left:16px; padding-top:5px;";
    btnN.onmouseover = function() {this.style.backgroundImage = "url('./osdimages/navBG_roll.png')";};
    btnN.onmouseout = function() {this.style.backgroundImage = '';};
    btnN.tabindex = btn_I;
    btnN.innerHTML = btn_L;
    btnN.onclick = btn_D;
} 
```

按钮调用如下所示：

```
createbutton("button01", 1, "New Order/Browse",  "parent.frames['content'].location.href='createorder/createorder.asp';"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:46:13.290

*属性*和*属性*之间是有区别的。

最好的例子如下：

*   HTML：`<input type="text" value="hello" id="test" />`
*   在文本框中输入一些内容
*   `document.getElementById('test').value`是你输入的任何内容
*   `document.getElementById('test').getAttribute("value")`是 HTML 中的内容

一些属性直接映射到属性，反之亦然，但情况并非总是如此。

例如，`onClick`属性接受一个字符串，然后是`eval`'d，但`onclick`属性接受一个函数。这就是您的代码不起作用的原因。

要么传递一个有效的函数，要么使用`setAttribute`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:46:19.763

您正在使用字符串设置 onclick，它需要执行一个函数。

```
createbutton("button01", 1, "New Order/Browse",  function(){ parent.frames['content'].location.href='createorder/createorder.asp'; }); 
```

# php - codeigniter cookie helper 与 session helper 相结合

> ID：11211989
> 
> 赞同：1
> 
> 时间：2012-06-26T16:38:21.930
> 
> 标签：php, codeigniter, cookies, setcookie

是否可以同时运行会话和 cookie 助手？因为我正在尝试，但我无法为我的生活设置一个 cookie，无论我尝试采用什么方法，要么将 CI 的文档放在信中并在那里进行操作，要么尝试仅通过本机 php 使用 cookie。无论哪种方式我尝试cookie都不会设置。

我试图将它们设置为：

```
$this->input-set_cookie('AutoRemember', $mID.'-'.$hashbrown, $shortlife);
and
setcookie('AutoRemember', $mID.'-'.$hashbrown, $shortlife); 
```

我试着和他们一起工作

```
echo $this->input->cookie('AutoRemember');
and
echo $_COOKIE['AutoRemember']; 
```

cookie 助手是自动加载的，就像会话之一一样，所以它们被加载了。会话助手就像一个魅力，但饼干让我头疼。我想要做的就是设置一个cookie，这样我就可以在我的网站上拥有一个“记住我”的功能，而应该做一个5分钟的交易，我花了几个小时通过各种方式来传递它，或者通过设置一些东西视图拾取，以便它可以在视图中设置它，或者在控制器中设置它，什么都没有。

似乎也不是浏览器问题，因为 Chrome 和 FireFox 似乎都没有在任何地方存储 cookie。

因此，在设置 cookie 时，它​​是同时使用会话和 cookie 还是 codeigniter 垃圾，无论您尝试哪种方式都会扼杀努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:00:55.437

查看一些表达式引擎代码（Ellis Labs 提供的使用 CI 的应用程序），他们`setcookie`在其函数中调用 PHP 本机函数`set_cookie`，所以也许这是要走的路。

看起来 cookie 助手与 Session 库一起运行应该没有问题。也就是说，值得注意的是 Session 类是`setcookie`直接调用而不是使用 cookie 帮助器（重用代码 CI 的方式！）。

一般来说，调用 PHP 函数`setcookie`应该绕过任何 CI 东西并且无论如何都可以工作，所以如果这不起作用，可能是其他事情发生了。最好的选择可能是开始`setcookie`并尝试让它发挥作用。

检查 的返回值`setcookie`，如果它的`false`输出已经开始，这就是它不工作的原因；也可能是您在尝试 CI cookie 助手时遇到的相同问题。

# c# - 如何获取我刚刚在 C# 中插入 mysql 数据库的对象的 id？

> ID：11211990
> 
> 赞同：0
> 
> 时间：2012-06-26T16:38:23.353
> 
> 标签：c#, mysql

我正在尝试检索我刚刚引入数据库的对象的 id，但它不起作用（我总是遇到异常）并且它不是因为查询，显然它工作正常。我尝试了其他在网上找到的方法，但都没有奏效。这是我正在使用的代码（C# 和数据库是 MySql）

```
conn.Open();
command = conn.CreateCommand();
command.CommandText = //here it goes the insert command which works perfectly
command.ExecuteNonQuery();

//Last object's id is retrieved
command = conn.CreateCommand();
command.CommandText = "SELECT last_insert_id() AS id)";
reader = command.ExecuteReader();

while (reader.Read())
{
 reader.Read();
 MessageBox.Show(reader["id"].ToString());
}
conn.Close(); 
```

即使它不是最终解决方案，任何帮助都将不胜感激:) 非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:40:15.390

查询末尾有一个额外的括号。

改变这个

```
command.CommandText = "SELECT last_insert_id() AS id)"; 
```

至：

```
command.CommandText = "SELECT last_insert_id() AS id"; 
```

然后你从第一条记录读到第二条记录，但只有一条记录。

改变这个：

```
while (reader.Read())
{
 reader.Read();
 MessageBox.Show(reader["id"].ToString());
} 
```

至：

```
reader.Read();
MessageBox.Show(reader["id"].ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:40:38.000

如果你真的写了：

```
SELECT last_insert_id() AS id) 
```

您必须删除该 final `)`，它会导致语法错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T16:40:50.947

`reader.Read();`从 while 循环中删除

使用`executescalar`而不是`executereader`.

```
int no = convert.toint32( command.ExecuteScalar( "SELECT last_insert_id() AS id")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T16:43:10.463

我会在插入语句之后添加它。

```
command.CommandText = "INSERT ...  ; select last_insert_id();"; 
```

然后使用它来获得结果：

```
int id = Convert.ToInt32(command.ExecuteScalar()); 
```

# java - Axis 243SA 传输.cgi

> ID：11211994
> 
> 赞同：0
> 
> 时间：2012-06-26T16:38:36.397
> 
> 标签：java, android

我想使用 Axis 243-SA IPCam 在 Android 上开发 2 路音频应用程序。我试图打开一个输出流（使用 Java）来输入音频数据（通过“transmit.cgi”），但都被拒绝了（在 Windows 桌面或 android 上）。我不确定该设备是否适用于该功能。有没有人曾经使该功能起作用？需要什么设置（我启用了全双工模式）。或者该功能是否有任何先决条件（例如已建立登录/连接）？谢谢......

最好的问候，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:44:05.480

我有一个轴凸轮，我使用 vapix 库在 c# 中发送音频。如果你想给我你的代码。我将在我的摄像头上进行测试。问候

# angularjs - 使用由 angular.module().controller() 创建的 AngularJS 控制器

> ID：11211999
> 
> 赞同：44
> 
> 时间：2012-06-26T16:38:57.217
> 
> 标签：angularjs

我对 AngularJS 还是很陌生，并且正在设置我的第一个应用程序。我希望能够做到以下几点：

```
angular.module('App.controllers', [])
  .controller('home', function () {
    $scope.property = true;
  }]);

angular.module('App', ['App.controllers'])
  .config(['$routeProvider', function($routeProvider) {
    $routeProvider.when('/', {templateUrl: 'partials/home.html', controller: home});
  }]); 
```

使用此设置会生成以下错误：

```
Uncaught ReferenceError: home is not defined from App 
```

我的问题是：如何使用`angular.module.controller()`（或`$controllerProvider.register()`直接）注册控制器并在我的应用程序的其他地方使用注册的控制器。

我的动机：我想避免使用全局构造函数作为我的控制器（如 angularjs.org 上的大多数示例使用）或复杂的命名空间。如果我可以将控制器注册和使用为单个变量名（然后不放在全局范围内），那将是理想的。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-26T17:23:18.350

尝试使用字符串标识符。

`routeProvider.when('/', {templateUrl: 'partials/home.html', controller: 'home'});`

当您使用文字时，它正在寻找一个名为 的变量`home`，但在这种情况下不存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-24T11:04:54.983

如果您收到控制器未定义错误，您必须在引号内写下您的控制器名称。

或者像这样定义你的控制器

```
function controllerName()
{
   //your code here
} 
```

参考这个：[Uncaught ReferenceError:Controller is not defined in AngularJS](http://coding-issues.blogspot.in/2013/07/uncaught-referenceerrorcontroller-is.html)