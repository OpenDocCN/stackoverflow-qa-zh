# StackOverflow 问答 11391000-11391999

# c - gdb: 在 __kernel_vsyscall() 中总是停在 0xffffe410

> ID：11391000
> 
> 赞同：0
> 
> 时间：2012-07-09T07:54:04.437
> 
> 标签：c, gdb

我正在使用 gdb 附加一个正在运行的进程，但是，它总是停在`__kernel_vsyscall`. 看起来它在我的系统调用 msgrcv() 处停止了。我必须**不断地**“控制”它，不知道它什么时候可以跳出内核并返回应用程序。我怎样才能让它继续？以下是我的程序。

1.  我是怎么得到这种情况的？
2.  如何让它继续？

谢谢！

```
gdb
(gdb) attach PID
...
Reading symbols from /lib/ld-linux.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib/ld-linux.so.2
0xffffe410 in __kernel_vsyscall ()

(gdb)bt

#0  0xffffe410 in __kernel_vsyscall ()
#1  0x009ed573 in msgrcv () from /lib/libc.so.6
#2  0xf7f3a487 in _UX_wgetmsg (mode=0, msgp=0xffbb4178, pmaxtime=0xffbb4164, 
    pdata=0xf7f7a860, ux_type=0) at ../../../ux/com_ux/libux/com/UXipc.c:2550
#3  0xf7f3ad05 in UX_wgetmsg_v2 (mode=0, msgp=0xffbb4178, maxtime=10000, 
    ux_type=0) at ../../../ux/com_ux/libux/com/UXipc.c:2237
#4  0x0804bb9b in main (argc=1, argv=0xffbb5394)
    at /path/to/my_application:243 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:54:18.420

> 我是怎么得到这种情况的？

当您附加到在系统调用中被阻止的进程（等待消息或读取完成）时，这种情况是*完全正常的。*

> 如何让它继续？

您键入`continue`（此时应用程序将再次阻塞，等待消息）。如果要调试应用程序的某些部分，请在继续之前设置断点。

# iphone - 设计此屏幕的最佳方式是什么（例如 Momento 应用程序中的注释添加）？

> ID：11391001
> 
> 赞同：1
> 
> 时间：2012-07-09T07:54:05.567
> 
> 标签：iphone, uiview, uiviewcontroller

我想创建一个类似于用户可以在 Momento 应用程序中添加注释的页面（下面的屏幕截图）。

![在此处输入图像描述](../Images/3a2b63fae1db3349ac40bc5746125023.png)

为这个页面构建视图控制器的最佳方式是什么？页面中央有一个类似标签的菜单。在屏幕的上半部分，是一个视图；在下半部分，你会得到一个键盘（输入文本时）。

**我的需要**：输入一个可以包含三种类型的文本（所以三个选项卡）和一个图片 -> 总共四个选项卡的注释。

通过一些分析、观察和思考，我可以想到这些可能性：

**选项 1** 带有 4 个选项卡的 TabBarController（但我无法像在 Momento 应用程序中那样将选项卡放在屏幕中间，并且我读到（在一些 Stackoverflow 讨论中）Apple 指南不建议更改选项卡栏从它的自然位置要么。

**选项 2** 有一个视图控制器，比如 MyController。这将有 4 个按钮（在屏幕中间并排排列，使它们看起来像选项卡）。为页面的上半部分设置一个 UIView 对象。为页面的下半部分设置另一个 UIView 对象。

根据选择了四个按钮中的哪一个，我会改变顶部和底部 UIView 对象中显示的内容。

选项 2 对我来说听起来不错。但是，我想就它是否正确发表意见，还是有更好的方法来实现这一点？请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:01:55.107

您应该使用 a`UITextView`并将其设置`inputView`为带有这些按钮的视图。它应该按照您的需要自动随键盘滑动。

希望这可以帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:09:50.490

好的，这就是我要开始的地方。两个问题；tabBar 和处理键盘。其余的只是推动弹出适当的视图控制器。

TabBar：首先，Apple 有一些处理键盘附件组件的示例代码，这可能是 Momento 渲染 tabBarController 的方式。这是[链接](http://developer.apple.com/library/ios/#samplecode/KeyboardAccessory/Introduction/Intro.html)。他们的示例以“一次性”方式处理键盘，这是该特定应用程序独有的。

键盘：至于更通用的处理键盘的方法，您可能需要查看 Michael Tyson 在 github 上的 TPKeyboardAvoiding 组件。这是那个[链接](https://github.com/michaeltyson/TPKeyboardAvoiding)。TPKeyboardAvoiding 非常好，因为它是一个处理 UITableView 和 UIScrollView 的键盘问题的组件。

我还没有检查过的一件事是 Mike 的东西是否足够聪明，可以在连接了附件时处理键盘上的额外高度。（虽然它很聪明......）。

希望这可以帮助。

# java - 检查我的页面中是否存在 xpath

> ID：11391003
> 
> 赞同：6
> 
> 时间：2012-07-09T07:54:20.387
> 
> 标签：java, xpath

我搜索了很多，但从来没有找到我想要的。

我想控制当前页面中是否存在 xpath。

我发现有 java/xml、php 等......但不仅仅是 java。

如果存在 xpath，我会搜索一种简单的方法来检查当前页面。

谢谢你。

问候。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T09:36:18.533

你可以使用`javax.xml.xpath.XPath.evalute`方法：

[http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/XPath.html#evaluate(java.lang.String,%20java.lang.Object,%20javax.xml。命名空间.QName)](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/XPath.html#evaluate(java.lang.String,%20java.lang.Object,%20javax.xml.namespace.QName))

例子：

```
XPathFactory factory = XPathFactory.newInstance();
XPath path = factory.newXPath();
Node node = (Node) path.evaluate("//myXPath", document, XPathConstants.NODE);
if (node == null)
    // don't exists
else
    // I exist! 
```

**更新**

怎么弄`document`。
复制粘贴我的旧代码的一些行：

```
BufferedInputStream bufferPage = new BufferedInputStream(new URL("http://www.yourUrl.com").openStream());

Tidy tidy = new Tidy();
tidy.setQuiet(true);
tidy.setShowWarnings(false);
tidy.setInputEncoding("UTF-8");
Document document = tidy.parseDOM(bufferPage, null);
document.normalize(); 
```

我使用库（Tidy）来阅读 html 页面。

[http://jtidy.sourceforge.net/download.html](http://jtidy.sourceforge.net/download.html)
[http://jtidy.sourceforge.net/apidocs/index.html?org/w3c/tidy/package-tree.html](http://jtidy.sourceforge.net/apidocs/index.html?org/w3c/tidy/package-tree.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-12T13:41:59.197

您可以使用该实用程序方法，该方法将返回 XPath 查询（无论是 XML 标记还是 XML 属性）的值（如果存在）。否则，它会抛出一个异常，您可以按照自己的方式处理：

```
public String getValue(String xpathQuery) throws Exception
{
    Node node = null;

    try
    {

        node = (Node) xPath.evaluate(xpathQuery, doc, XPathConstants.NODE);
        if (node == null)
            throw new Exception("Xpath query "+xpathQuery+" returned no results");

        if (node.getNodeType() == Node.ATTRIBUTE_NODE)
            return node.getNodeValue();
        else
            return node.getTextContent();
    } catch (Exception e)
    {
        throw new Exception("Failed to get value from " + doc.getDocumentURI() + " using XPath expression: " + xpathQuery, e);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:29:25.740

如果您使用 JAXP API，您可以使用返回 NODE-SET 的 XPath 表达式，然后在 Java 代码中检查返回的 NodeList 是否为空；或者您可以将结果类型指定为 BOOLEAN 在这种情况下您将直接获得布尔结果。

# c# - 如何使用 selenium webdriver 和 C# 创建日志文件？

> ID：11391006
> 
> 赞同：0
> 
> 时间：2012-07-09T07:54:36.293
> 
> 标签：c#, webdriver

如何使用 selenium webdriver 创建日志文件？我使用 selenium RC 创建了一个日志文件。在 selenium RC 中，我创建了一个带有屏幕截图和错误消息的 HTML 日志文件。我在 selenium RC 中使用了以下代码。

`selenium.CaptureEntirePageScreenshot(screenShotDirectory + "\" + "用户名和密码错误.png","");

string path = "截图\错误的用户名和密码.png";

Sw.WriteLine("**用户名和密码错误**

"); `

如何使用 selenium Webdriver 创建相同的 HTML 日志文件？我应该在 C# 中编写什么代码？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:58:52.893

在 .NET 绑定中，您需要以下内容：

```
// Assumes driver is a WebDriver instance that implements ITakesScreenshot
// N.B., to be completely correct, you should check for a successful cast
// by adding a null check for screenshotDriver.
ITakesScreenshot screenshotDriver = driver as ITakesScreenshot;
Screenshot screenCapture = screenshotDriver.GetScreenshot();
screenCapture.SaveAsFile(screenShotDirectory + "\\" + "wrongUserNameAndPassword.png", 
    System.Drawing.Imaging.ImageFormat.Png); 
```

# forms - 如何将 2 个不同的提交按钮放在一个表单中（使用 CI）？

> ID：11391007
> 
> 赞同：2
> 
> 时间：2012-07-09T07:54:37.837
> 
> 标签：forms, codeigniter, paypal

我有一个表单，我希望用户选择 2 种不同的结帐方式：

假设用户输入了他的信息，例如他的地址、姓名和信用信息。最后，使用 Paypal Pro，我希望他能够选择是否要通过 paypal 或通过直接付款结帐……这将导致第二种形式。

顺便说一句，使用 CodeIgnieter，当跟随一个表单和另一个表单时，我得到了始终运行的第二个表单的验证过程，我的意思是当我从第一个表单来到第二个表单时，我会在第二个表单中看到我的即使用户尚未尝试提交，也会为每个字段显示错误消息。有没有办法避免这个错误？

谢谢 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T08:04:55.810

编辑：见答案的结尾

你应该像往常一样做：

看法：

```
<form method="post" action="mysite.com/submit">
    <input type="text" name="name1">
    <input type="text" name="name2">
    <input type="text" name="name3">

    <input type="submit" name="sbm" value="Direct">
    <input type="submit" name="sbm" value="PayPal">
</form> 
```

在 PHP 中（可能是控制器）：

```
if($this->input->post('sbm') == "PayPal") { 
    // do something with PayPal
} else {
    // do something with direct payment
} 
```

编辑：如果您希望按钮的标题（可见文本）与值不同，请使用`<button>`元素而不是`<input type="submit">`：

```
<button name="payment_type" value="paypal" type="submit">I want to pay with PayPal</button>
<button name="payment_type" value="direct" type="submit">Or should I go with Direct Payment?</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:07:20.787

使用一些条件来应用验证规则。

```
if(isPayPalPro())
{
    $this->form_validation->set_rules(....);
}else
{
    //validation credit card payment
} 
```

使用某些条件而不是 isPayPalPro()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-04T17:26:17.573

我个人更喜欢的另一种方法是将每个提交按钮命名为不同的名称，如下所示：

```
<form method="post" action="mysite.com/submit">
    <input type="text" name="name1">
    <input type="text" name="name2">
    <input type="text" name="name3">

    <input type="submit" name="direct" value="Direct">
    <input type="submit" name="paypal" value="PayPal">
</form> 
```

然后检查发送了哪个值：

```
if($this->input->post('direct')){
    //Direct button was pressed
}
if($this->input->post('paypal')){
    //Paypal button was pressed
} 
```

# google-app-engine - 使用 appengine 修复重定向

> ID：11391010
> 
> 赞同：1
> 
> 时间：2012-07-09T07:54:40.930
> 
> 标签：google-app-engine, redirect, dns

我希望我的“裸”网址以这种自然的方式重定向

`abc.com/li => www.abc.com/li`

现在，/li 重定向到 / 只是因为我使用 appengine 并且我的 DNS 注册商正在执行类似的操作。有没有办法修复重定向，使其以更自然的方式运行，就像预期的那样？我认为我的设置看起来正常/默认，从所附图像中可以看出。你能帮助我吗？ ![在此处输入图像描述](../Images/c7284c46f324a8e65d0c2735e13a4e5e.png) ![在此处输入图像描述](../Images/0e7adab1b94f961d5b8c71561437bd0b.png) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:54:33.733

好的，我试着给出一个答案！你应该有这些信息的一行：

```
www         ghs.google.com      CNAME (Alias) 
```

你有吗？

# c# - 使用 JavaScript 从 SPGridView 中的链接打开模态框

> ID：11391016
> 
> 赞同：0
> 
> 时间：2012-07-09T07:54:52.500
> 
> 标签：c#, javascript, sharepoint, hyperlink, spgridview

我在 SharePoint 2010 Foundation 中有一个 SPGridView，其中包含来自子网站的公告。我只有一列，一个 HyperLinkField，它显示公告的标题和指向项目显示的链接。

使用 SPDataSiteQuery 收集数据。

我想要的是运行 JavaScript 的链接，添加到带有内容编辑器 Web 部件的页面上，它将打开一个模态框并在其中显示 dispform。

我的代码目前如下所示，并在同一窗口中成功打开了 dispform，但我现在希望它调用 JavaScript。

```
HyperLinkField hyperFieldTask = new HyperLinkField();
            hyperFieldTask.HeaderText = "News";
            hyperFieldTask.DataTextField = "Title";

            string[] itemUrl = { "FileDirRef" };
            hyperFieldTask.DataNavigateUrlFields = itemUrl;
            hyperFieldTask.DataNavigateUrlFormatString = "";
            hyperFieldTask.SortExpression = "Title";

            this.grid.Columns.Add(hyperFieldTask); 
```

我尝试了几种解决方案，但我得到的只是一个非活动链接。

```
hyperFieldTask.DataNavigateUrlFormatString = "JavaScript:ShowDialog('url')";

hyperFieldTask.DataNavigateUrlFields = "JavaScript:ShowDialog('url')"; 
```

我所做的一切似乎都不起作用。

我错过了什么明显的东西吗？

感谢您的帮助。

编辑：

我尝试使用 NavigateUrl，它确实调用了 JavaScript。

```
hyperFieldNews.NavigateUrl = "javascript:ShowDialog('http://www.google.com', '600')"; 
```

下一步现在不是使用 www.google.com 作为 url 我想使用“FileDirRef”的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:13:50.840

添加以下 JavaScript 函数：

`<script type="text/javascript"> function ModalPopup(url, title) { var options = SP.UI.$create_DialogOptions(); options.url = url; options.title = title; options.dialogReturnValueCallback = function () { SP.UI.ModalDialog.RefreshPage(SP.UI.DialogResult.OK); }; SP.UI.ModalDialog.showModalDialog(options); } </script>`

现在您可以创建一个链接并调用该函数：

`HyperLink hyper1 = new HyperLink(); string popUpPageUrl = "javascript:ModalPopup('" + url + "','Display Item')"; hyper1.NavigateUrl = popUpPageUrl; hyper1.Text = "News";`

# bash - 如何编写一个简单的分层 Makefile？

> ID：11391018
> 
> 赞同：12
> 
> 时间：2012-07-09T07:54:56.573
> 
> 标签：bash, build, makefile

几天前，我在堆栈溢出中发布了一个关于如何编写分层 make 的答案（http://stackoverflow.com/questions/1498213/make-hierarchical-make-file）。答案已被删除，因此我认为它完全错误或偏离主题（或两者兼而有之）。

我想知道如何编写分层 Makefile。这是一个在子目录中调用多个 Makefile 的 Makefile。我假设一个目录结构，如：

```
- project
  |--module1
      |--Makefile
      |--...
  |--module2
     |--Makefile
     |--module2.1
     |--module2.2  
     |--...
  |--module3
     |--Makefile
     |--...
  |--etc 
```

我还假设项目成员只同意一组最小的 makefile 目标，例如：all（默认）、clean、install 等。因此，包括 make 标志在内的以下命令将传播到模块：

```
cd project
make clean  
make -k
make install
#etc 
```

以下项目 Makefile 有什么问题：

```
PACKAGES = \
    module1 \
    module2 \
    emodule3

VIRTUAL_PACKAGES = $(addsuffix /.virtual.Makefile,${PACKAGES})

TARGETS=clean install all

.PHONY: $(TARGETS)
default: all

FLAGS = $(ifeq $(MAKEFLAGS) "","",-$(MAKEFLAGS))

$(TARGETS): $(VIRTUAL_PACKAGES)

$(VIRTUAL_PACKAGES): 
    $(MAKE) $(FLAGS) -C $(@D) $(MAKECMDGOALS) 
```

是的，Makefile 中的 $VIRTUAL_PACKAGES 看起来很奇怪。混合 for 循环的替代方法有点短，但我不确定它是否更好（因为我需要依赖 bash）： PACKAGES = \ module1 \ module2 \ emodule3

```
TARGETS=clean install all

.PHONY: $(TARGETS)
default: all

FLAGS = $(ifeq $(MAKEFLAGS) "","",-$(MAKEFLAGS))

$(TARGETS): 
    for p in $(PACKAGES) ; do $(MAKE) $(FLAGS) -C $$p $@ || break; done 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T14:00:06.230

这里有“龙”。可以做到，但其含义可能很棘手。

谷歌，**“Recursive Make Considered Harmful”**。你会得到很好的（简单的）说明你想要什么（例如，分层制作），以及对陷阱/担忧的很好的解释。一些“回应”将讨论可能的“最佳实践”，以及缓解问题的方法。然后，您可以决定提出的问题是否对您的应用程序有吸引力。

原论文：

[http://miller.emu.id.au/pmiller/books/rmch/](http://miller.emu.id.au/pmiller/books/rmch/)

其他一些链接：

[http://c2.com/cgi/wiki?RecursiveMakeConsideredHarmful](http://c2.com/cgi/wiki?RecursiveMakeConsideredHarmful)

[http://dbaspot.com/configuration-management/194597-thoughts-recursive-make-considered-harmful.html](http://dbaspot.com/configuration-management/194597-thoughts-recursive-make-considered-harmful.html)

# javascript - options[Text] 为 null 或不是 javascript 中的对象

> ID：11391020
> 
> 赞同：1
> 
> 时间：2012-07-09T07:27:30.023
> 
> 标签：javascript

我收到 options[text] 为 null 或不是对象错误。我在这里要做的是检查选择了所有多选查找列值，将它们与数组中的值进行比较，然后删除它们

```
 var responsibleselected = returntags("select","Responsibility selected values");
  for(var i=0;i<responsibleselected.options.length;i++)
  {
       if(responsibleselected.options[i].selected == true)
          {
           for(var j=0;j< ResponsibleArray.length;j++)
            {
 if(responsibleselected.options[i].text == ResponsibleArray[j])//throws error here
             {
       GipRemoveSelectedItems(ctl00_m_g_6ad915a8_68ea_4c76_b67a_ad1215320288_ff391_ctl00_ctl00_MultiLookupPicker_m); 
             }
            }
          }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:58:40.557

而不是`.text`你需要[.textContent](https://developer.mozilla.org/en/DOM/Node.textContent)：

```
if(responsibleselected.options[i].textContent == ResponsibleArray[j]){
                                  //   ^--------------here it is 
```

# html - 如何在 PhoneGap 中使用 jQuery 将数据发布到远程服务器（跨域）？

> ID：11391022
> 
> 赞同：3
> 
> 时间：2012-07-09T07:55:22.487
> 
> 标签：html, cordova, cross-domain

这是我的代码：

```
function makeRequest() {
    //alert("inside makeRequest()");
    var settings = {
        type: "POST",
        url: URL + "?" + REQUEST,
        dataType: "json" ,
        error: function(XHR,textStatus,errorThrown) {
            console.log(XHR);
            console.log("textStatus: " + textStatus);
            console.log("errorThrown: " + errorThrown);
            //alert ("XHR="+XHR+"\ntextStatus="+textStatus+"\nerrorThrown=" + errorThrown);
        },
        success: function(data,textStatus) {
            $("body").append(data);
            console.log(data, textStatus);
        },
        headers: {
            "Access-Control-Allow-Origin" : "http://xxx.com",
            "Access-Control-Allow-Headers" : "X-Requested-With",
            "X_APNSAGENT_API_KEY" : app_key,
            "X_APNSAGENT_API_VERSION" : version,
            "X_APNSAGENT_API_TIMESTAMP" : timestamp,
            "X_APNSAGENT_API_SIGNATURE" : hash,
        }
    };
    $.ajax(settings);
}
makeRequest(); 
```

在 phonegap wiki 中，它说：

“跨域安全策略不影响PhoneGap应用。由于html文件是由webkit使用file://协议调用的，所以安全策略不适用。”

但是我怎么称呼它呢？

此外，我正在使用 jquery-1.6.4.js

我试图找到解决方案几天。请帮助我并拯救我......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:46:28.447

这是我上个月遇到此类问题时使用的方法。

```
$.ajax({
            url:dataUrl,
            dataType: 'jsonp',
            success:function(response){
                //success call back
            },
            error:function(XMLHttpRequest, textStatus, errorThrown){
                                //error call back
                        }
            }
    }); 
```

如果您在此链接[http://remysharp.com/2007/10/08/what-is-jsonp/](http://remysharp.com/2007/10/08/what-is-jsonp/)上看到 Remy Sharp 的帖子，就会更加清楚。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:05:44.197

我自己解决了这个问题。

最后，我发现 jquery 导致了这个问题。

在 ajax 请求之前。我添加代码： $.support.cors = true;

最后一切正常。

具体可以去我的博客[http://cashwordpress.sinaapp.com](http://cashwordpress.sinaapp.com)（不好意思我只发了中文）。

# c# - 将属性更改事件添加到自定义控件

> ID：11391024
> 
> 赞同：0
> 
> 时间：2012-07-09T07:55:28.793
> 
> 标签：c#, winforms, events, custom-controls, inotifypropertychanged

对于应用程序，我必须使用一个自定义按钮，该按钮在更改其属性值之一时做出反应。`Data`我向新按钮添加了一个名为的字段：

```
public class ButtonData
{
    public string Name;
    public string Color;
    //And more stuff...
} 
```

然后我有以下新按钮的代码，我希望它能够在其`Data`属性从应用程序中的某个位置更新时自我更新（更改背景颜色和其他一些东西）。我发现了一些关于实现`INotifyPropertyChanged`接口的想法，并在我的自定义按钮中进行了设置，如下所示：

```
public partial class ButtonPin : Button, INotifyPropertyChanged
{
    private ButtonData _data;

    public ButtonData Data
    {
        get { return _data; }
        set
        {
            if (value == _data) return;
            _data = value;
            OnPropertyChanged("Data");
        }
    }
    private bool _buttonDataAdded;

    public ButtonPin()
    {
        InitializeComponent();
    }

    public ButtonPin(ButtonData data)
    {
        Data = data;
        _buttonDataAdded = true;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
  } 
```

现在我不确定如何使用它！例如，如果`Data`对象中的颜色在某处以某种方式发生了变化，并将其分配给当前按钮的数据字段，我希望此按钮更改其背景颜色。就像是

```
var data = new ButtonData();
data.Name = "Hi!";
data.Color = Color.Red;

buttonPin1.Data = data; //Here I need the changes to occur 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:11:47.833

您已经在 ButtonPin 类而不是 ButtonData 类上实现了接口 INotifyPropertyChanged，并且您想要检测 ButtonData 类型对象的更改，因此您需要在 ButtonData 类上实现接口 INotifyPropertyChanged。

要检测更改，您需要在 ButtonPin.Data 属性的设置器中连接到 ButtonData 对象的 PropertyChanged 事件。像这样的东西。

```
private bool _data;
public ButtonData Data {
    get { return _data; }
    set {
        if (value != _data) {
            // Unhook previous events
            if (_data != null)
                _data.PropertyChanged -= HandleButtonDataPropertyChanged;
            // Set private field
            _data = value;
            // Hook new events
            if (_data != null)
                _data.PropertyChanged += HandleButtonDataPropertyChanged;
            // Immediate update  since we have a new ButtonData object
            if (_data != null)
                Update();
        }
    }
}

private void HandleButtonDataPropertyChanged(object sender, PropertyChangedEventArgs e) {
    // Handle change in ButtonData
    Update();
}

private void Update() {
    // Update...
} 
```

# java - 哪个更好： AbstractTableModel.fireTableDataChanged() 或 AbstractTableModel.fireTableRowInserted()

> ID：11391028
> 
> 赞同：1
> 
> 时间：2012-07-09T07:56:00.820
> 
> 标签：java, swing, jtable, abstracttablemodel

添加一行并调用 fireTableRowInserted() 或添加所有行然后调用 fireTableDataChanged() 是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:07:32.130

如果您所做的只是添加新行，则最好添加所有行，并`fireTableRowsInserted()`使用适当的第一行和最后一行进行调用。视图只需要处理一个事件，并且该事件准确地说明发生了什么，从而避免刷新视图中不需要刷新的部分。

# mysql - Mysql查询IF条件和分组依据

> ID：11391029
> 
> 赞同：0
> 
> 时间：2012-07-09T07:56:01.723
> 
> 标签：mysql

```
SELECT      ps.job_no, ps.booking_no,
            ps.type,ps.shipped_by, ps.invoice_no,
            ps.transporters_id,ps.clients_id,ps.return_terminal,
            ps.destinations_id,ps.forwarder_name,              
            containers.container_size,containers.container_no,
            containers.truck_no,
            ps.driver_cell_no,ps.shipping_line_name,
            containers.cro_no,vessels.vessel_name,vessels.eta,
            containers.empty_pickup_point,containers.loading_point,
            ps.particular 
  FROM      planning_sheet AS ps 
                LEFT JOIN vessels 
                    ON vessels.bookingno= ps.booking_no
                LEFT JOIN containers 
                    ON containers.bookingno = ps.booking_no
GROUP BY ps.clients_id 
```

我是构建此类复杂查询的新手，查询定义如下，我想要在此查询中针对“clients_id”的所有记录我得到针对此查询的一条记录。

我还想在“type = 0”时写“Air”或“type =1”而不是在“type”列中写“Sea”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:04:37.197

`GROUP BY`在使用子句之前，您必须先聚合一些列。**[有关一些聚合函数，请参见此处。](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)**但是如果要修改 中的输出`type`，可以使用 inLine`Case`语句。

```
SELECT  ....,
        CASE ps.`type`
           when 0 then 'Air'
           when 1 then 'Sea'
        END as `type`,
        ....
FROM    .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:16:48.450

尝试这个..

```
SELECT      ps.job_no, ps.booking_no,
            CASE ps.type WHEN 0 THEN 'Air' WHEN 1 THEN 'Sea' ELSE 'None' END 
            as PLAN_TYPE,
            ps.shipped_by, ps.invoice_no,
            ps.transporters_id,ps.clients_id,ps.return_terminal,
            ps.destinations_id,ps.forwarder_name,              
            containers.container_size,containers.container_no,
            containers.truck_no,
            ps.driver_cell_no,ps.shipping_line_name,
            containers.cro_no,vessels.vessel_name,vessels.eta,
            containers.empty_pickup_point,containers.loading_point,
            ps.particular 
  FROM      planning_sheet AS ps 
                LEFT JOIN vessels 
                    ON vessels.bookingno= ps.booking_no
                LEFT JOIN containers 
                    ON containers.bookingno = ps.booking_no 
```

根据数据类型使用`ps.type`

`CASE ps.type WHEN 0 THEN 'Air' WHEN 1 THEN 'Sea' ELSE 'None' END`

或者

`CASE ps.type WHEN '0' THEN 'Air' WHEN '1' THEN 'Sea' ELSE 'None' END`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T07:59:54.123

你可以把它放到你的查询中

```
select
CASE type 
      when '0' then 'Air'
      when '1' then 'Sea'
END as type 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T08:02:10.320

尝试这个：：

```
SELECT      ps.job_no, ps.booking_no,
            ps.type,ps.shipped_by, ps.invoice_no,
            ps.transporters_id,ps.clients_id,ps.return_terminal,
            ps.destinations_id,ps.forwarder_name,              
            containers.container_size,containers.container_no,
            containers.truck_no,
            ps.driver_cell_no,ps.shipping_line_name,
            containers.cro_no,vessels.vessel_name,vessels.eta,
            containers.empty_pickup_point,containers.loading_point,
            ps.particular ,
           CASE ps.type when '0' then 'Air'
when '1' then 'Sea'
END as type
  FROM      planning_sheet AS ps 
                LEFT JOIN vessels 
                    ON vessels.bookingno= ps.booking_no
                LEFT JOIN containers 
                    ON containers.bookingno = ps.booking_no 
```

# javascript - 从数组中生成选择选项并通过与另一个数组（jQuery）进行比较来选择多个元素

> ID：11391031
> 
> 赞同：1
> 
> 时间：2012-07-09T07:56:10.747
> 
> 标签：javascript, jquery, arrays, loops

我想要做的是从 JavaScript 数组`option`中为多个`select`下拉菜单生成元素。然后选择下拉列表中与另一个数组（`results`示例中的数组）中的值相同的每个选项。

问题在于，当结果数组有多个元素时，HTML 中的原始选项会乘以结果数组中的元素数。

我理解为什么会发生这种情况，但我似乎找不到比我目前使用的更好的解决方案，它是这样的：

```
var
options = ['Some value', 'Another value', 'Third value', 'Something completely different'],
results = ['Some value', 'Another value'],
selectHtml;

$.each( options, function( index, value ) {
    var option = value;

    $.each( results, function( index, value ) {
        if ( option === value ) {
            selectHtml += '<option selected="selected" value="' + option + '">' + option + '</option>';
        }
        else {
            selectHtml += '<option value="' + option + '">' + option + '</option>';
        }
    });
}); 
```

你可以在这里找到一个活生生的例子：http: [//jsfiddle.net/wCWyp/](http://jsfiddle.net/wCWyp/)

我想要完成的是同样的事情，但没有元素的乘法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:02:11.113

进行数组搜索。

```
var 
options = ['Some value', 'Another value', 'Third value', 'Something completely different'],
results = ['Some value', 'Another value'],
selectHtml;

$.each( options, function( index, value ) {
    var option = value;
    if (results.indexOf(option) == -1){
        selectHtml += '<option value="' + option + '">' + option + '</option>';
    } else {
        selectHtml += '<option selected="selected" value="' + option + '">' + option + '</option>';
    }
});

$('#test').html( selectHtml ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T08:05:30.367

如何生成选择，然后执行

```
 $("#selectId").val(results); 
```

[http://jsfiddle.net/mplungjan/kgJeQ/](http://jsfiddle.net/mplungjan/kgJeQ/)

```
var options = ['Some value', 
'Another value', 'Third value', 
'Something completely different'],
results = ['Some value', 'Another value'];

$("#selId").empty();
$.each( options, function( index, value ) {
    var text = value;
     $("#selId").append('<option value="' + value + '">' + text + '</option>');
});
$("#selId").val(results); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T08:00:26.417

`results`问题是您正在为数组的每个元素迭代`options`数组。您可以只使用该`indexOf`方法来确定当前`option`是否在`results`数组中：

```
$.each( options, function( index, value ) {
    selectHtml += '<option ' + (results.indexOf(value) > -1 ? 'selected' : '') + ' value="' + value + '">' + value + '</option>';
}); 
```

这是一个[更新的小提琴](http://jsfiddle.net/jamesallardice/wCWyp/3/)。

但是，请记住，这[`Array.prototype.indexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)在旧浏览器中不可用，因此您可能希望包含一个 polyfill。MDN 在上面的链接中提供了一个。

# c++ - 动态链接库 C++

> ID：11391032
> 
> 赞同：2
> 
> 时间：2012-07-09T07:56:11.087
> 
> 标签：c++, visual-studio, dll, hyperlink, dllexport

我正在编写一个 c++ 库并对其进行测试，我使用命令行工具编译它而不使用任何 ide，当我编译库和测试程序时没有发现错误，但是当我运行程序时它有时会产生错误，有时会正常工作，当我得到一个错误是：“找不到指定的过程”我在我的库头中使用了 dllexport，并在我的测试中使用了编译指示注释（lib，...），我的编译命令就像这样：

```
cl -o library.dll quaternion.cpp /link /DLL
cl program.cpp 
```

完整的运行输出：

```
q = 10 + 10 i + 10 j + 10 k
p = 1 + 1 i + 1 j + 1 k
testing *= operator:
q = -20 + 20 i + 20 j + 20 k
testing * operator:
q = -20 + 20 i + 20 j + 20 k
testing /= operator:
q = 10
testing / operator:
q = 10
testing += operator:
q = 11 + 11 i + 11 j + 11 k
testing + operator:
q = 11 + 11 i + 11 j + 11 k
testing -= operator:
q = 9 + 9 i + 9 j + 9 k
testing - operator:
q = 9 + 9 i + 9 j + 9 k
testing = operator:
q = 1 + 1 i + 1 j + 1 k
testing ^ operator:
power 2:
q = -200 + 200 i + 200 j + 200 k
power 3:
q = -80000 - 80000 i - 80000 j - 80000 k
power 4:
q = -1.28e+010 + 1.28e+010 i + 1.28e+010 j + 1.28e+010 k
power 0:
q = 1
testing norm function:
||q|| = 20 
```

和错误运行输出：

```
q = 10 + 10 i + 10 j + 10 k
p = 1 + 1 i + 1 j + 1 k
testing *= operator:
q = -20 + 20 i + 20 j + 20 k
testing * operator:
q = -20 + 20 i + 20 j + 20 k
testing /= operator:
q = 10
testing / operator:
q = 10
testing += operator:
q = 11 + 11 i + 11 j + 11 k
testing + operator:
error!The specified procedure could not be found. 
```

## 这是我的代码：

## 四元数

```
#include <cstdlib>
#include <cmath>
#include <string>
#include <sstream>
#include <iostream>
#ifndef QUATERNION_H
#define QUATERNION_H

#ifdef EXPORTING_DLL
    #define DllExport  __declspec( dllexport )
#else
    #define DllExport  __declspec( dllimport )
#endif
using namespace std;

class Quaternion
{
    public:
        float X, Y, Z, W;
        DllExport Quaternion();
        DllExport Quaternion(const Quaternion& orig);
        DllExport Quaternion(float x, float y, float z, float w);
        DllExport ~Quaternion();

        //base math
        DllExport Quaternion & operator +(const Quaternion &q);
        DllExport Quaternion & operator +=(const Quaternion &q);

        DllExport Quaternion & operator -(const Quaternion &q);
        DllExport Quaternion & operator -=(const Quaternion &q);

        DllExport Quaternion & operator *(const Quaternion &q);
        DllExport Quaternion & operator *=(const Quaternion &q);

        DllExport Quaternion & operator /(const Quaternion &q);
        DllExport Quaternion & operator /=(const Quaternion &q);

        DllExport Quaternion & operator =(const Quaternion &q);

        DllExport Quaternion & operator ^(int i);

        //aditional functions
        DllExport double Norm();// ||q||
        DllExport string ToString();
    private:
};

#endif 
```

## 四元数.cpp：

```
#include "quaternion.h"

Quaternion::Quaternion()
{
    X = 0;
    Y = 0;
    Z = 0;
    W = 0;
}

Quaternion::Quaternion(const Quaternion& orig) 
{
    X = orig.X;
    Y = orig.Y;
    Z = orig.Z;
    W = orig.W;
}

Quaternion::Quaternion(float x, float y, float z, float w)
{
    X = x;
    Y = y;
    Z = z;
    W = w;
}

Quaternion::~Quaternion()
{

}

Quaternion & Quaternion::operator +(const Quaternion &q)
{
    return Quaternion(X + q.X, Y + q.Y, Z + q.Z, W + q.W);
}

Quaternion & Quaternion::operator +=(const Quaternion &q)
{
    *this = *this + q;
    return *this;
}

Quaternion & Quaternion::operator -(const Quaternion &q)
{
    return Quaternion(X - q.X, Y - q.Y, Z - q.Z, W - q.W);
}
Quaternion & Quaternion::operator -=(const Quaternion &q)
{
    *this = *this - q;
    return *this;
}

Quaternion & Quaternion::operator *(const Quaternion &q)
{
    return Quaternion(
        X * q.X - Y * q.Y - Z * q.Z - W * q.W,
        X * q.Y + Y * q.X - Z * q.W + W * q.Z,
        X * q.Z + Y * q.W + Z * q.X - W * q.Y,
        X * q.W - Y * q.Z + Z * q.Y + W * q.X
    );
}
Quaternion & Quaternion::operator *=(const Quaternion &q)
{   
    *this = *this * q;
    return *this;
}

Quaternion & Quaternion::operator /(const Quaternion &q)
{
    float square = q.X * q.X + q.Y * q.Y + q.Z * q.Z + q.W * q.W;
    return Quaternion(
        (X * q.X + Y * q.Y + Z * q.Z + W * q.W) / square,
        (X * q.Z - Y * q.X - Z * q.W + W * q.Z) / square,
        (X * q.Y + Y * q.W - Z * q.X - W * q.Y) / square,
        (X * q.W - Y * q.Z + Z * q.Y - W * q.X) / square
    );
}
Quaternion & Quaternion::operator /=(const Quaternion &q)
{
    *this = *this / q;
    return *this;
}

Quaternion & Quaternion::operator =(const Quaternion &q)
{
    X = q.X;
    Y = q.Y;
    Z = q.Z;
    W = q.W;
    return *this;
}

Quaternion & Quaternion::operator ^(int i)
{
    if(i ==0)
    {
        X = 1;
        Y = Z = W = 0;
    }
    else
        while(i > 1)
        {
            *this *= *this;
            i--;
        }
    return *this;
}

double Quaternion::Norm()
{
    return sqrt(X * X + Y * Y + Z * Z + W * W);
}

string Quaternion::ToString()
{
    string result;
    stringstream ss (stringstream::in | stringstream::out);
    ss<<X;
    if(Y>0)
        ss<<" + "<<Y<<" i";
    else  if(Y<0)
        ss<<" - "<<-Y<<" i";
    if(Z>0)
        ss<<" + "<<Z<<" j";
    else if(Z<0)
        ss<<" - "<<-Z<<" j";
    if(W>0)
        ss<<" + "<<W<<" k";
    else if(W<0)
        ss<<" - "<<-W<<" k";
    result = ss.str();
    return result;
} 
```

## 程序.cpp

```
#include <stdlib.h>
#include <iostream>
#include "quaternion.h"
#include <exception>
#include <windows.h>
#pragma comment(lib,"library")
#pragma comment(lib,"user32")
#pragma comment(lib,"kernel32")
using namespace std;

int main()
{
    try
    {
        cout<<"Quaternion class library unit test:\n";

        Quaternion p = Quaternion(1, 1, 1, 1);
        Quaternion q = Quaternion(10, 10, 10, 10);
        cout<<"q = "<<q.ToString()<<"\n";
        cout<<"p = "<<p.ToString()<<"\n";

        cout<<"testing *= operator:\n";
        q *= p;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"testing * operator:\n";
        q = q * p;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"testing /= operator:\n";
        q /= p;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"testing / operator:\n";
        q = q / p;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"testing += operator:\n";
        q += p;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"testing + operator:\n";
        q = q + p;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"testing -= operator:\n";
        q -= p;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"testing - operator:\n";
        q = q - p;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"testing = operator:\n";
        q = p;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"testing ^ operator:\n";
        cout<<"power 2:\n";
        q = q ^ 2;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"power 3:\n";
        q = q ^ 3;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"power 4:\n";
        q = q ^ 4;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"power 0:\n";
        q = q ^ 0;
        cout<<"q = "<<q.ToString()<<"\n";
        q = Quaternion(10, 10, 10, 10);

        cout<<"testing norm function:\n";
        cout<<"||q|| = "<<q.Norm()<<"\n";   
    }
    catch(...)
    {
        TCHAR errmsg[512];
        FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM,0,::GetLastError(),0,errmsg,1024,NULL);
        cout<< "error!"<<errmsg;
    }
} 
```

我没有在 msdn 或 cl 和链接选项中找到任何帮助。我希望任何人都可以提供帮助。

这是当前版本的链接 [http://jumbofiles.com/rh0j46ibyt56](http://jumbofiles.com/rh0j46ibyt56)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T07:59:59.803

这不是您问题的答案，但此代码有问题 -

```
Quaternion & Quaternion::operator +(const Quaternion &q)
 {     
    return Quaternion(X + q.X, Y + q.Y, Z + q.Z, W + q.W); 
} 
```

您正在创建一个临时对象，然后返回对它的引用。当你在调用者中使用引用时，它已经被破坏了。您不需要返回参考。

编辑：正如下面所指出的，这可能会损坏您的堆栈，因此很可能是您的问题的原因。

# javascript - 使用 HTML5/JavaScript 构建数据网格

> ID：11391036
> 
> 赞同：0
> 
> 时间：2012-07-09T07:56:41.913
> 
> 标签：javascript, html

我想使用 HTML5/JavaScript 构建一个数据网格。由于许可问题，我不想使用任何第三方解决方案。我的网格的要求非常简单：

1.  显示大约 5 列的网格。
2.  第一列包含超链接数据。
3.  网格需要有分页。

关于如何实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T09:22:35.070

> 由于许可问题，我不想使用任何第三方解决方案。

您应该考虑**在 MIT 许可下分发**的以下库：

*   [EditableGrid](http://www.editablegrid.net/)（很多很酷的功能）
*   [Handsontable](http://handsontable.com/)使用 jQuery（MIT 许可证）（美观，易于扩展）

# oracle - 游标中定义的查询执行多少次？

> ID：11391039
> 
> 赞同：2
> 
> 时间：2012-07-09T07:56:58.360
> 
> 标签：oracle, stored-procedures, plsql, cursor

我在 Oracle 数据库中有一个存储过程。
在这个存储过程中，我定义了一个游标。

我使用以下方法遍历结果集：

```
FOR item IN cursor_name LOOP
END LOOP; 
```

查询执行多少次？有没有办法让我知道？这也是最好的方法，还是我应该以不同的方式迭代？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T09:12:03.337

游标`cursor_name`中的查询只执行一次。您从该游标获取多少次取决于。每个 fetch 意味着一个上下文切换。从 Oracle 版本 10 开始，如果您将参数[PLSQL_OPTIMIZE_LEVEL](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams194.htm#REFRN10255)设置为其默认值 2 或更高，则会启动优化并且您一次将获取 100 行。如果没有这个，您将分别获取每一行。在获取大量行时，这会极大地损害性能。

还要注意不要将 SQL 语句放入循环中。当您这样做时，您显然将执行这些语句的次数与从游标中获取的行数一样多。

问候，
罗布。

# java - Maven：“构建生命周期映射”是什么意思

> ID：11391042
> 
> 赞同：1
> 
> 时间：2012-07-09T07:57:11.177
> 
> 标签：java, maven, maven-plugin, maven-3, mojo

我一直在尝试理解 Maven 的概念，但我发现很难理解所使用的术语。

我遇到了这个词“ `build life cycle mapping`”。有人可以让我清楚地了解这个术语的含义吗？我知道是什么`build life cycle`，但是当我们使用“ `mapping`”时它是什么意思？

提前感谢您的帮助

**更新：**这是我找到这个术语的地方-[项目构建生命周期映射](https://docs.sonatype.org/display/M2ECLIPSE/Project+build+lifecycle+mapping)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:56:08.150

我建议您从Maven 官方网站上的[这篇文章开始。](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

简而言之，每个项目根据其打包有许多阶段和一些绑定到这些阶段的默认插件，这些插件在构建期间执行。例如，在`compile`阶段`maven-compiler-plugin`编译位于的所有源`src/main/java`（如果没有另外指定）。如果插件未绑定到默认生命周期（例如，它是一些自定义插件），那么您必须将其包含在构建中并将其映射到自己的某个特定阶段（第二个是可选的，因为大多数自定义插件都有其目标的默认映射到某些特定阶段，例如默认`jspc-maven-plugin`将其目标绑定`compile`到`compile`生命周期的阶段）。

因此，此上下文中的映射指定在项目构建的每个阶段执行哪个插件-目标对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:58:12.910

好的，如您所知，Maven 提供了一种构建生命周期，即阶段序列，从验证 POM、生成源（如果需要）或编译类等基本内容开始，最后将内容安装到本地存储库并在远程存储库上部署工件。重要的是，这是一个顺序，所以这里的顺序很重要。如果您调用某个阶段（比方说`install`），那么从头到尾的所有阶段都会`install`一个接一个地执行。

现在，这些生命周期的阶段是关于构建每个软件项目需要执行哪些步骤的一些一般概念，正如我们通常认为的那样。如您所知，软件工件可以具有许多不同的性质，因此需要在每个阶段完成非常具体的工作。这就是生命周期映射。它是生命周期阶段和具体插件目标之间的绑定，特定于工件的性质（这意味着`packaging`在 Maven 世界中）。

因此，例如，`jar`包装的这个映射说我们需要`maven-compiler-plugin:compile`在`compile`阶段调用，但`ear`包装说我们不需要在它的`compile`阶段调用任何东西。[在这里](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings)查看更多示例。

# c++ - 遍历从特定索引到特定索引的集合

> ID：11391043
> 
> 赞同：1
> 
> 时间：2012-07-09T07:57:11.507
> 
> 标签：c++, set, traversal

我有一个迭代器。假设我需要不是从一开始而是从某个特定点遍历集合。我也很难获得存储在集合中的值，因为它们是指针。那么如何修改我的代码以从一个不是开始的点遍历我的集合。?

这是代码：

```
for(iter=make.at(level).begin();iter!=make.at(level).end();iter++)
{
Function(*iter);
} 
```

使用它会产生错误：

```
for(iter=make.at(level).begin()+10;iter!=make.at(level).end();iter++)
    {
    Function(*iter);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:15:52.093

有不同类型的迭代器：`ForwardIterator`、`BidirectionalIterator`和`RandomAccessIterator`。

`ForwardIterator`仅允许您使用增量运算符向前移动。`BidirectionalIterator`允许两个方向。`RandomAccessIterator`允许任何进步，包括`operator+`和`operator-`。

您正在考虑的那个是`RandomAccessIterator`，就像在 中找到的那个`std::vector`。`std::set`但是，使用的是`BidirectionalIterator`. 这意味着您只能递增和递减。

因此，您需要将迭代器置于循环之外并将其向前推进十次。为了简单起见，`std::advance`这样做并具有不同的兼容性`BidirectionalIterator`，以及`ForwardIterator`（线性时间，因为一次只有一个增量）和`RandomAccessIterator`（恒定时间，由于 operator+）。

```
std::set<T>::iterator iter = make.at(level).begin(); //more C++03 way
auto iter = std::begin (make.at(level)); //more C++11 way
std::advance (iter, 10); //start iterator 10 elements past beginning
for (...) 
```

# java - Java中奇怪的代码计时行为

> ID：11391044
> 
> 赞同：3
> 
> 时间：2012-07-09T07:57:22.517
> 
> 标签：java

在以下代码中：

```
long startingTime = System.nanoTime();
int max = (int) Math.pow(2, 19);
for(int i = 0; i < max; ){
    i++;
}
long timePass = System.nanoTime() - startingTime;
System.out.println("Time pass " + timePass / 1000000F); 
```

我正在尝试计算在我的机器上执行简单操作所需的时间。

所有高达 19 次方的计算都会增加运行此代码所需的时间，但是当我超过 19（最大 int 值 31）时，我惊讶地发现它对所需时间没有影响。它总是在我的机器上显示 5 毫秒！！！

怎么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T07:59:43.773

您刚刚见证了 HotSpot 优化您的整个循环以被遗忘。这很**聪明**。您需要在循环内执行一些实际操作。我建议引入一个`int`累加器 var 并对它进行一些按位运算，最后**打印**结果以确保在循环之后需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T08:31:37.233

默认情况下，在 HotSpot JVM 上`-XX:CompileThreshold=10000`。这意味着迭代 10K 次的循环可以触发整个方法进行优化。在您的情况下，您正在计时检测和编译（在后台）您的方法需要多长时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:47:49.427

在循环中使用另一个 System.nanoTime()。没有人可以优化这一点。

```
for(int i = 0; i < max; ){
i++;
dummy+=System.nanoTime();
} 
```

不要忘记做：

```
System.out.println(dummy); 
```

循环之后。确保非优化

# ruby-on-rails - 我有字符串，我必须像没有 2 一样将它转换为哈希

> ID：11391046
> 
> 赞同：0
> 
> 时间：2012-07-09T07:57:25.440
> 
> 标签：ruby-on-rails

这是我的代码：

```
 1\. "special_filter,|filter_str,(&(a=1)(c=11)(p=c=11,o=m,d=4))"

 2.{ "a" =>"1", "c" => "11" , "p" => "c=11,o=m,d=4"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:15:36.757

```
#!/usr/bin/ruby

string = "special_filter,|filter_str,(&(a=1)(c=11)(p=c=11,o=m,d=4))"
hash = {}
string.slice(/\(&.*\)/).split(")").each do |match|
  match.tr("(&","").split("=",2).each_slice(2) { |key, value| hash[key] = value }
end 
```

## 逐行：

**第 1 行：**使用起始字符串设置变量字符串。

`string = "special_filter,|filter_str,(&(a=1)(c=11)(p=c=11,o=m,d=4))"`

**第 2 行：**设置一个变量 hash，用一个空的 hash 来填充。

`hash = {}`

**第 3 行：**

*   剪掉与这个正则表达式匹配的字符串部分

`string.slice(/\(&.*\)/) => "(&(a=1)(c=11)(p=c=11,o=m,d=4))"`

> 正则表达式以正斜杠结尾（/regexp 位于此处/）。括号在正则表达式中具有特殊含义，因此必须使用反斜杠对其进行转义。& 匹配字符串中的 &。在正则表达式中，一个 . 表示任何字符。* 表示没有或无限的前面的字符。所以这个正则表达式匹配 (&) 以及 (&fjalsdkfj)。

*   用右括号分割字符串

`string.slice(/\(&.*\)/).split(")") => ["(&(a=1", "(c=11", "(p=c=11,o=m,d=4"]`

*   然后遍历结果数组

`string.slice(/\(&.*\)/).split(")").each do |match|`

**第 4 行：**

*   进行迭代并从中删除不需要的字符

`match.tr("(&","")`

*   `=`使用第一个符号将其拆分一次

`match.tr("(&","").split("=",2)`

*   使用 2 值数组作为哈希上的键和值

`match.tr("(&","").split("=",2).each_slice(2) { |key, value| hash[key] = value }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:03:44.233

我的尝试。

```
Hash[*string[/\&.*/].tr("&(","").split(")").map{|i| i.split("=",2)}.flatten] 
```

来自@Conner 的解决方案的一些想法；）

谢谢@corner，我能够知道一些我以前从未使用过的功能。

# transactions - HornetQ MessageHandler 方法

> ID：11391049
> 
> 赞同：1
> 
> 时间：2012-07-09T07:57:33.707
> 
> 标签：transactions, hornetq, core-api

我对使用 hornetQ 的问题有所了解。我想要实现的是异步请求处理。我有一个接受传入 tcp 连接的服务器组件。客户端将使用 TLV 消息以专有协议发送请求。为了将处理与 io 内容分离，我使用 hornetQ 引入了一个消息队列。因此，当有新消息进入时，它会被放入 INBOX 队列。该队列有几个侦听器线程，因此处理是多线程的。这些侦听器将依次产生响应并将它们放回 OUTBOX 队列。每个客户端都有自己的发件箱队列，因此它们不会相互影响（例如，当客户端暂时断开连接时）。

到目前为止，我很清楚。但现在的问题是，当目标客户端未连接时，我无法立即发送消息，而必须邀请他再次连接（单向通信）。但是在这种情况下如何处理消息呢？我不使用事务处理，因此我无法回滚以将消息放回队列中。也许一个代码片段可以更清楚地说明我想要做什么：

```
@Override
public void onMessage(ClientMessage p_message)
{
    try
    {
        UID uid = UID.parse(p_message.getStringProperty(MessageQueueServer.MESSAGE_PROPERTY_UID));
        IoSession ioSession = SessionLookupFilter.getSession(uid);

        if ((ioSession != null) && ioSession.isConnected())
        {
            ioSession.write(MessageQueueServer.clientMessageToLTV(p_message));
            // acknowledge to remove message from queue
            p_message.acknowledge();
        }
        else
        {
            // don't acknowledge the message so we will get it again ?!?
            // TODO invite the client to establish a connection via SIP server
            // Set redelivery timeout of message to a serious value so we don't bother the client with subsequent
            // invitations.
        }
    }
    catch (Exception e)
    {
        LogMF.error(log, e, "Error during dispatching of mq-message {0} to client.", new Object[] { p_message });
    }
} 
```

我无法从 hornetq 用户手册中获得有用的信息。所以也许有人有这方面的经验。

问候塞巴斯蒂安

# php - 定时账户访问（PHP/mysql）

> ID：11391054
> 
> 赞同：1
> 
> 时间：2012-07-09T07:57:55.500
> 
> 标签：php, mysql, time

我正在尝试在我的一个 php webapps 中实现一个演示帐户。

其概念是，自首次登录以来，用户将拥有对应用程序的总共 x 小时（最大）访问权限。我正在考虑从第一次登录开始的前端计数器（javascript），如果用户退出浏览器，它将更新数据库上的剩余时间（关闭之前）。

我想知道是否有更好的方法来做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:06:44.493

这取决于停止潜在的滥用对您来说有多重要。

这样我就可以创建演示帐户，并在退出页面之前关闭 js，因此永远不会发生更新，并且我拥有永久的演示帐户 :)

我会更新每个页面上的时间并检查是否使用了空闲小时数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:17:57.403

大多数人不会使用 javascript 实现访问控制——这太容易绕过了。如果是我，我会在会话管理层实现它 - 每次用户访问页面时都会自动调用代码，并且由于它控制对会话数据的访问，因此添加额外的约束是微不足道的。

# ios - 只需用矩形遮罩 UIView

> ID：11391058
> 
> 赞同：56
> 
> 时间：2012-07-09T07:58:07.763
> 
> 标签：ios, uiview, mask

我想知道如何简单地掩盖任何类型的 UIView 的可见区域。到目前为止，我读过的所有答案/教程都描述了用图像、渐变或创建圆角进行遮罩，这比我所追求的要先进得多。

示例：我有一个边界为 (0, 0, 100, 100) 的 UIView，我想使用遮罩切除视图的右半部分。因此，我的蒙版框架将是 (0, 0, 50, 100)。

知道如何简单地做到这一点吗？我不想重写 drawrect 方法，因为这应该适用于任何 UIView。

我试过这个，但它只是让整个视图不可见。

```
CGRect mask = CGRectMake(0, 0, 50, 100);
UIView *maskView = [[UIView alloc] initWithFrame:mask];
viewToMask.layer.mask = maskView.layer; 
```

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-07-09T08:30:04.987

感谢 MSK 的链接，这是我采用的方法，效果很好：

```
// Create a mask layer and the frame to determine what will be visible in the view.
CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
CGRect maskRect = CGRectMake(0, 0, 50, 100);

// Create a path with the rectangle in it.
CGPathRef path = CGPathCreateWithRect(maskRect, NULL);

// Set the path to the mask layer.
maskLayer.path = path;

// Release the path since it's not covered by ARC.
CGPathRelease(path);

// Set the mask of the view.
viewToMask.layer.mask = maskLayer; 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-10-07T12:28:57.760

谢谢你们的回答。

万一有人在几个小时内找不到关于这个问题的合适答案，就像我刚刚做的那样，我已经在 Swift 2.2 中为`masking`/ `clipping` `UIView`with `CGRect`/组装了一个工作要点`UIBezierPath`：

[https://gist.github.com/Flar49/7e977e81f1d2827f5fcd5c6c6a3c3d94](https://gist.github.com/Flar49/7e977e81f1d2827f5fcd5c6c6a3c3d94)

```
extension UIView {

    func mask(withRect rect: CGRect, inverse: Bool = false) {
        let path = UIBezierPath(rect: rect)
        let maskLayer = CAShapeLayer()

        if inverse {
            path.append(UIBezierPath(rect: self.bounds))
            maskLayer.fillRule = kCAFillRuleEvenOdd
        }

        maskLayer.path = path.cgPath

        self.layer.mask = maskLayer
    }

    func mask(withPath path: UIBezierPath, inverse: Bool = false) {
        let path = path
        let maskLayer = CAShapeLayer()

        if inverse {
            path.append(UIBezierPath(rect: self.bounds))
            maskLayer.fillRule = kCAFillRuleEvenOdd
        }

        maskLayer.path = path.cgPath

        self.layer.mask = maskLayer
    }
} 
```

用法：

```
let viewSize = targetView.bounds.size
let rect = CGRect(x: 20, y: 20, width: viewSize.width - 20*2, height: viewSize.height - 20*2)

// Cuts rectangle inside view, leaving 20pt borders around
targetView.mask(withRect: rect, inverse: true)

// Cuts 20pt borders around the view, keeping part inside rect intact
targetView.mask(withRect: rect) 
```

希望它会在未来节省一些时间:)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-10-11T10:44:27.460

根本不需要任何面具。只需**将其放入**具有较小框架的包装视图中，然后设置[clipsToBounds](https://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/occ/instp/UIView/clipsToBounds)。

```
wrapper.clipsToBounds = true 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-20T18:16:20.890

Swift ViewController 中非常简单的示例，基于接受的答案：

```
import UIKit

class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()

        let redView = UIView(frame: view.bounds)
        view.addSubview(redView)

        view.backgroundColor = UIColor.green
        redView.backgroundColor = UIColor.red

        mask(redView, maskRect: CGRect(x: 50, y: 50, width: 50, height: 50))
    }

    func mask(_ viewToMask: UIView, maskRect: CGRect) {
        let maskLayer = CAShapeLayer()
        let path = CGPath(rect: maskRect, transform: nil)
        maskLayer.path = path

        // Set the mask of the view.
        viewToMask.layer.mask = maskLayer
    }
} 
```

**输出**

[![在此处输入图像描述](../Images/739dec5050bf49b32db320e85e88cee9.png)](https://i.stack.imgur.com/jQL5H.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T08:21:37.357

> 一个可选层，其**alpha 通道**用作蒙版，以在层的背景和将层的内容与其过滤背景合成的结果之间进行选择。
> 
> @property(retain) CALayer *mask

执行所需操作的正确方法是创建与 要遮罩的图层`maskView`相同的帧（0、0、100、100） 。`viewToMask`然后，您需要为要使其不可见的路径设置 clearColor（这将阻止路径上的视图交互，因此请注意视图层次结构）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-04T08:12:34.540

**Swift 5**，谢谢@Dan Rosenstark

```
class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        let red = UIView(frame: view.bounds)
        view.addSubview(red)
        view.backgroundColor = UIColor.cyan
        red.backgroundColor = UIColor.red
        red.mask(CGRect(x: 50, y: 50, width: 50, height: 50))
    }
}

extension UIView{
    func mask(_ rect: CGRect){
        let mask = CAShapeLayer()
        let path = CGPath(rect: rect, transform: nil)
        mask.path = path
        // Set the mask of the view.
        layer.mask = mask
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-09-01T10:40:00.527

设置`MaskToBounds`是不够的，例如，在您将`UIImageView`其定位在内部的情况下`RelativeLayout`。如果您将您放在`UIImageView`布局的顶部边缘附近然后旋转您的`UIImageView`，它将超过布局并且不会被裁剪。如果您将该标志设置为 true，它将被裁剪，但是如果`UIImageView`位于布局的中心，它也会被裁剪，这不是您想要的。

因此，确定`maskRect`是正确的方法。

# java - Eclipse android项目无法正确导出

> ID：11391065
> 
> 赞同：1
> 
> 时间：2012-07-09T07:58:26.997
> 
> 标签：java, android, class, apk

我一直在研究一个 android 项目，但是在模拟器上运行了几次之后，它似乎已经停止将类放在 .apk 文件中。当我进入“Android 工具 > 导出签名包”时，我会完成创建密钥库和导出项目的步骤。当我用7zip打开.apk时，只显示有：META-INF、res、AndroidManifest.xml、classes.dex和resources.arsc。

* * *

错误

* * *

07-09 17:47:01.059: E/AndroidRuntime(341): 由: java.lang.ClassNotFoundException: com.jackson.harris.android.MainActivity in loader dalvik.system.PathClassLoader [/data/app/com.jackson .harris.android-2.apk]

* * *

出了什么问题，我该如何解决？

谢谢！

# c++ - 如何异步刷新内存映射文件？

> ID：11391069
> 
> 赞同：9
> 
> 时间：2012-07-09T07:58:31.753
> 
> 标签：c++, windows, winapi, memory-mapped-files

我正在使用内存映射文件在 Windows 7 64 位下对大量图像文件（~10000 x 16 MB）进行读/写访问。我的目标是：

1.  尽可能多地缓存数据。

2.  能够分配新图像并尽可能快地写入这些图像。

因此我使用内存映射文件来访问这些文件。缓存效果很好，但操作系统不会刷新脏页，直到我几乎没有物理内存。因为一旦物理内存被填满，分配和写入新文件就会非常慢。

一种解决方案是定期使用`FlushViewOfFile()`，但在数据写入磁盘之前，此函数不会返回。

有没有办法异步刷新文件映射？我找到的唯一解决方案是一次`Unmap()`又一次`MapViewOfFile()`，但是使用这种方法我不能确定再次获得相同的数据指针。有人可以提出更好的方法吗？

编辑：阅读`WINAPI`文档稍长一点，似乎我找到了一个合适的解决方案来解决我的问题：

调用`VirtualUnlock()`未锁定的内存范围会导致脏页刷新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T02:40:41.370

我听说 FlushViewOfFile() 函数不会等到它物理写入文件。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366563(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366563(v=vs.85).aspx)

> FlushViewOfFile 函数**不会刷新文件元数据，它不会等到更改**从底层硬件磁盘缓存刷新并物理写入磁盘后才返回。

调用“FlushFileBuffers(...)”之后，您的数据将被物理写入磁盘。

# php - $_GET 总是返回 1

> ID：11391076
> 
> 赞同：0
> 
> 时间：2012-07-09T07:58:47.730
> 
> 标签：php, html, ajax, forms, html-table

我在将 GET 变量传递到另一个 PHP 页面时遇到了问题。我有一个简单的目录。我想使用 ajax 删除行。Ajax 在带有表单的简单示例上完美运行。

这是一个标记：

```
 while($row=mysql_fetch_array($query))
    {
/*here are rows(content) */

        <form action='#' method='get' onsubmit='deleteContent(); return false'>
        <td><input type='hidden' name='delete' value='$row[id_content]' id='delete' />
        <input type='submit' class='del'  name='delete' title='Delete' value='Delete' /></td>
        </tr></form>";  
    } 
```

当我按下提交时，它总是返回 1。这是 DeleteContent

```
 function deleteContent()//za brisanje dela
{
    try
    {
        xhr = new XMLHttpRequest();
    }
    catch (e)
    {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
    }

    if (xhr == null)
    {
        alert("Vaš brskalnik ne podpira AJAX-a!");
        return;
    }
    var url = "delete.php?delete=" + document.getElementById('delete').value;

    xhr.onreadystatechange = handler2; 
    xhr.open("GET", url, true);
    xhr.send(null);
}

function handler2()
{
    if (xhr.readyState == 4)
    {
        if (xhr.status == 200)

            document.getElementById("delete").innerHTML = xhr.responseText;
        else
            alert("error!");
    }
} 
```

这是delete.php

```
 <?php
            echo "<span>Content delete</span><br/>";
            if($_GET['delete'])
            {echo $_GET['delete'];}

    ?> 
```

有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:01:53.487

写入属性*值*。`Value`

```
<input type='hidden' 
       name='delete' 
       value="<?php echo $row['id_content'] ?>" 
       id='delete' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:22:29.860

ID 在文档中必须是唯一的。

`document.getElementById('delete')`将始终指向同一个元素。
将使用的表单作为参数提供给 deleteContent()，您将能够检索正确的值：

```
<form action='#' method='get' onsubmit='return deleteContent(this);'> 
```

……

```
function deleteContent(form)//za brisanje dela
{
    try
    {
        xhr = new XMLHttpRequest();
    }
    catch (e)
    {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
    }

    if (xhr == null)
    {
        alert("Vaš brskalnik ne podpira AJAX-a!");
        return;
    }
    var url = "delete.php?delete=" + form.delete.value;

    xhr.onreadystatechange = handler2; 
    xhr.open("GET", url, true);
    xhr.send(null);
    return false;
} 
```

还有什么：您的标记似乎无效，请使用例如

```
while($row=mysql_fetch_array($query))
    {
/*here are rows(content) */

        echo "<tr><td>
              <form action='#' method='get' onsubmit='return deleteContent(this);'>
               <input type='hidden' name='delete' value='{$row[id_content]}' id='delete' />
               <input type='submit' class='del'  name='delete' title='Delete' value='Delete' />
              </form>
             </td></tr>";  
    } 
```

# javascript - 选项卡处于活动状态时执行某些操作，ExtJs

> ID：11391078
> 
> 赞同：0
> 
> 时间：2012-07-09T07:58:54.110
> 
> 标签：javascript, extjs

我有一个点击面板，页面上有 OpenLayers 地图。我想在点击激活时显示一层。这该怎么做？我的意思是如何在活动选项卡活动时执行某些操作，并销毁此whan面板是没有活动的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:03:43.643

你可以听`tabchange`这里提到的事件[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.tab.Panel-event-tabchange](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.tab.Panel-event-tabchange)
像这样

```
{
 xtype:'tabpanel'
 //some other configs
 listeners:{
  tabchange:function(tabPabel,newCard, oldCard){
   //chek wether the newCard is same to what you wanted
   // and do whatever you wanna do
  }
 }
} 
```

# ruby-on-rails - 使用 nokogiri 解析 XML 并创建具有多个属性的记录

> ID：11391080
> 
> 赞同：3
> 
> 时间：2012-07-09T07:59:07.417
> 
> 标签：ruby-on-rails, ruby, xml, activerecord, nokogiri

感觉就像我在这里遗漏了一些非常明显但看不到的东西。

我有一个 XML 文件，并且正在使用 Nokogiri gem。

XML 看起来像这样（想象一下，如果您将拥有无限数量的“变体”）：

```
<?xml version="1.0" encoding="UTF-8"?> 
<products> 
    <variant> 
        <sku type="string">123abc</sku>
        <inventory-quantity type="integer">68</inventory-quantity> 
    </variant> 
    <variant> 
        <sku type="string">321cba</sku>
        <inventory-quantity type="integer">22</inventory-quantity> 
    </variant>
</products> 
```

我想遍历变体并为每个包含“sku”和“库存数量”属性的记录创建相应的记录。

这是我到目前为止所得到的，但不是创建单独的记录，而是在上述情况下创建两条记录并将 Nokogiri 返回的完整数组或 NodeSet 插入每个记录属性。所以这：

```
doc = Nokogiri::XML(File.open("#{Rails.root}/public/new.xml")) 

variant = doc.xpath("//variant")

variant.each do |product| 

  sku = product.xpath("//sku").text
  quan = product.xpath("//inventory-quantity").text

  Productmapping.create(:sku => sku, :product_quantity => quan)

end 
```

创建这个...

```
sku              inventory-quantity

123abc321cba     6822
123abc321cba     6822 
```

我真正想要的地方：

```
sku              inventory-quantity

123ab            68
321cba           22 
```

看起来这是因为 xpath 定位器将所有出现的事件都返回到一个数组中，我正在调用该数组并将其插入到每条记录中。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T08:29:53.290

答案很简单——而不是：

```
sku = product.xpath("//sku").text
quan = product.xpath("//inventory-quantity").text 
```

只需使用：

```
sku = product.xpath("sku").text
quan = product.xpath("inventory-quantity").text 
```

这是因为`//sku`选择了文档根目录的所有 sku 后代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:20:31.503

喜欢：

```
doc = Nokogiri::XML(File.open("#{Rails.root}/public/new.xml"))  

variant = doc.xpath("//variant")

sku, quan = nil, nil
variant.each do |product| 

  product.children.each do |child|
      case child.name
       when 'sku'  
          sku = child.text
       when 'inventory-quantity'
          quan = child.text
       end
    end

  Productmapping.create(:sku => sku, :product_quantity => quan)

end 
```

或者更神奇而不是美丽但紧凑的方式：

```
sku = product.children[1].text
quan = product.children[3].text 
```

# c# - 启动使用 python 的可执行文件

> ID：11391083
> 
> 赞同：0
> 
> 时间：2012-07-09T07:59:11.973
> 
> 标签：c#, .net, windows-7, windows-server-2003, process.start

我是编程和 C# 的新手，我正在尝试编写一个程序来检测来自我的战场 2 服务器的错误或服务器崩溃，然后它将关闭服务器（如果服务器尚未关闭）并重新启动它但是我遇到了一个小颠簸。当我尝试再次启动战场 2 备份时，我从 bf2 收到此错误：

> 调试断言失败！版本 1.0.2446.12 构建日期：
> 模块：Python
> 文件：c:\dice\Projects\BF2Branches\BF2Demo\Code\BF2\Game\Python\PythonHost.Cpp
> 行：243
> 
> 文本：无法导入 bf2 模块：
> 
> 当前配置：

错误中的路径不存在。

我研究了几种启动应用程序的不同方法，但它们都有相同的结果。这些是我到目前为止尝试过的一对：

```
Process proc = new Process();
proc.StartInfo.FileName = @"txtServerPath.Text";
proc.Start(); 
```

和

```
Process.Start(txtServerPath.Text); 
```

当我手动启动 bf2 服务器时，它启动正常。那么我做错了什么？
如果这很重要，我的程序将从 Windows Server 2003 和 Windows 7 运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:40:26.913

> 调试断言失败！版本 1.0.2446.12 构建日期：模块：Python 文件：c:\dice\Projects\BF2Branches\BF2Demo\Code\BF2\Game\Python\PythonHost.Cpp 行：243
> 
> 文本：无法导入 bf2 模块：
> 
> 当前配置：

错误中的路径不存在，因为它是编写 PythonHost.cpp 的机器上的路径。“调试断言”意味着代码的开发人员在 cpp 文件中的指定行号处进行条件检查，以检查特定条件以确保“一切正常”。但显然不是。BF2 安装了调试版本似乎很奇怪。

无论如何，您的过程确实开始了，但它出错了。问题似乎是，当您从 C# 中启动进程时，它似乎无法找到名为“bf2”的 python 模块。

所以首先要验证 {BF2 安装文件夹}\python\bf2\ __init__.py 是否存在。

为了更深入地了解为什么会发生这种情况，请尝试像这样启动 BF2（假设您的 C# 应用程序是控制台应用程序）：

```
Process bf2 = new Process();
bf2.StartInfo.FileName = @"C:\Program Files\EA Games\Battlefield 2\BF2.exe";
bf2.StartInfo.Arguments = "+debugOutput 1";
bf2.StartInfo.UseShellExecute = false;
bf2.StartInfo.RedirectStandardOutput = true;
bf2.StartInfo.RedirectStandardError = true;
bf2.Start();    

Console.WriteLine(bf2.StandardOutput.ReadToEnd());
Console.WriteLine(bf2.StandardError.ReadToEnd()); 
```

这应该在控制台上打印一些日志，我怀疑可以推断出一些有用的日志。

顺便说一句，您可以发布剩余的错误消息（即在“当前配置：”行之后）

# android - 用于从 Salesforce 在 android 移动应用程序上发送通知的 GCM

> ID：11391084
> 
> 赞同：0
> 
> 时间：2012-07-09T07:59:15.373
> 
> 标签：android, google-cloud-messaging

我们正在尝试使用 Google 的 GCM（Google Cloud Messaging）将有关 salesfoece 中生成的任何事件（如创建帐户）的通知发送到 Android 应用程序。这是有关 GCM 的链接，

[http://developer.android.com/guide/google/gcm/gs.html#android-app](http://developer.android.com/guide/google/gcm/gs.html#android-app)

我正在使用 Eclipse 创建 Android 应用程序，我的 GCM 服务器给了我 SenderID 和 API 密钥。

但问题是，我如何使用 Salesforce 作为我的 3rd 方应用程序，从那里生成通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T19:46:58.550

从 Spring 14 版本开始，Salesforce 通过 Connected Apps 框架支持 Google (GCM) 和 Apple (APNS) 移动推送通知。请查看 Developer Force 上的移动推送通知提示表以获取更多信息：[http ://www2.developerforce.com/en/mobile/resources](http://www2.developerforce.com/en/mobile/resources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:50:58.970

您可能需要通过轮询来监控 API 以了解来自 salesforce 的事件；否则，您可能能够将事件发送到特定 URL。我不肯定您可以专门从 salesforce 本身发送推送通知。

但是，对于您的应用程序，您应该能够构建一些中间件来处理它。

# sql - 获取 PostgreSQL 范围内的日期列表

> ID：11391085
> 
> 赞同：69
> 
> 时间：2012-07-09T07:59:38.200
> 
> 标签：sql, postgresql, date, date-comparison

我想在**PostgreSQL 数据库**中获取两个日期（包括它们）之间的天数列表。例如，如果我有：

*   开始日期：2012年6月29日
*   结束日期：2012 年 7 月 3 日

那么结果应该是：

```
29 june 2012
30 june 2012 
1 july 2012 
2 july 2012 
3 july 2012 
```

在 PostgreSQL 中执行此操作的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-07-09T09:05:30.057

```
select CURRENT_DATE + i 
from generate_series(date '2012-06-29'- CURRENT_DATE, 
     date '2012-07-03' - CURRENT_DATE ) i 
```

甚至更短：

```
select i::date from generate_series('2012-06-29', 
  '2012-07-03', '1 day'::interval) i 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-22T10:34:37.913

作为`timestamp`：

```
select generate_series('2012-06-29', '2012-07-03', '1 day'::interval);

    generate_series     
------------------------
 2012-06-29 00:00:00-03
 2012-06-30 00:00:00-03
 2012-07-01 00:00:00-03
 2012-07-02 00:00:00-03
 2012-07-03 00:00:00-03 
```

或转换为`date`：

```
select (generate_series('2012-06-29', '2012-07-03', '1 day'::interval))::date;

 generate_series 
-----------------
 2012-06-29
 2012-06-30
 2012-07-01
 2012-07-02
 2012-07-03 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-09T08:12:31.207

这应该这样做：

```
select date '2012-06-29' + i
from generate_series(1, (select date '2012-07-3' - date '2012-06-29')) i 
```

如果您不想在子选择中重复 start_date，事情会变得更加复杂：

```
with min_max (start_date, end_date) as (
   values (date '2012-06-29', date '2012-07-3')
), date_range as (
  select end_date - start_date as duration
  from min_max
)
select start_date + i
from min_max
  cross join generate_series(1, (select duration from date_range)) i; 
```

（有关“不重复”问题的更好版本，请参阅 maniek 的答案）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-02-07T13:15:35.827

```
select generate_series('2012-06-29', '2012-07-03', '1 day'::interval)::date; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-09T09:21:13.093

对于这样的事情，在系统中拥有一个日期表通常很方便。

就像数字表一样，它们比动态生成日期非常有用且使用起来更快，尤其是当您扩展到大型数据集时。

这种从 1900 年到 2100 年的日期表会非常小，因此存储空间不会太大。

编辑：不知道为什么这会被否决，它可能是最好的性能。此外，它还有许多其他优点。想要将订单链接到一个季度的业绩数据？它是表格之间的简单链接。(Order.OrderDate -> Dates.Date -> Dates.Quarter -> PerformanceTotal.Quarter) 等等。处理工作日也是一样的，比如一个月的最后一个工作日，或者上个月的第一个星期二。就像数字表一样，我强烈推荐它们！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T08:20:47.410

如果您已经有要查询的数据库：

```
SELECT
   TO_CHAR(date_column,'DD Mon YYYY')
FROM
   some_table
WHERE
   date_column BETWEEN '29 Jun 2012' AND '3 JUL 2012'

GROUP BY date_column
ORDER BY date_column 
```

这将导致：

```
"29 Jun 2012"
"30 Jun 2012"
"01 Jul 2012"
"02 Jul 2012"
"03 Jul 2012" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-09T08:22:48.337

这个 PLpg/SQL 函数可以解决问题：

```
CREATE OR REPLACE FUNCTION getDateList(date1 date, date2 date)
RETURNS SETOF date AS
$BODY$
DECLARE
    count integer;
    lower_limit integer :=  0;
    upper_limit integer :=  date2 - date1;
BEGIN
    FOR count IN lower_limit..upper_limit LOOP
        RETURN NEXT date1 + count;
    END LOOP;
    RETURN;
END;
$BODY$
LANGUAGE plpgsql VOLATILE 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-09T08:25:03.097

如果日期范围应来自表表达式，则可以使用以下构造：

```
DROP TABLE tbl ;
CREATE TABLE tbl (zdate date NOT NULL );
INSERT INTO tbl(zdate) VALUES( '2012-07-01') , ('2012-07-09' );

WITH mima AS (
        SELECT MIN(zdate)::timestamp as mi
        , MAX(zdate)::timestamp as ma
        FROM tbl
        )
SELECT generate_series( mima.mi, mima.ma, '1 day':: interval):: date
FROM mima
        ; 
```

需要强制转换，因为 generate_series() 不接受日期参数。

# google-maps - 我可以使用用于房地产网络应用的 Google Maps API 吗？

> ID：11391086
> 
> 赞同：3
> 
> 时间：2012-07-09T07:59:40.083
> 
> 标签：google-maps, web-applications, google-maps-api-3

我想创建一个类似于 Zillow.com 的网络应用程序，但不在美国。我想知道我是否可以免费使用 Google Maps API，如果不能，有什么便宜的替代品可以让我开始使用？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:31:00.283

如果您的地图 API 实现是公开可用的（免费），您可以免费使用 Google Maps API。如果没有，您必须购买[Google Maps API for Business License](https://developers.google.com/maps/licensing)。

以下内容来自免费的[Google Maps API 许可证](https://developers.google.com/maps/terms#section_9_1)：

> (a) 免费访问（免费）。您的 Maps API 实施必须通常可供用户免费访问，并且不得要求付费订阅或其他基于费用的受限访问。此规则适用于您的内容和 Maps API 实施中的任何其他内容，无论您的内容或其他内容是现在存在还是以后添加。
> 
> (b) 公共访问（无防火墙）。您的 Maps API 实施不得 (i) 仅在防火墙后运行；(ii) 仅在内部网络上（开发和测试阶段除外）；或 (iii) 在封闭社区中（例如，通过仅受邀访问）。

如果 Google 地图许可证不适合您，您可以使用[OpenStreetMap](http://www.openstreetmap.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:06:10.770

您可以在商业产品中使用 OpenStreetMap。您所要做的就是引用它们作为地图数据的来源。

您可以在此处找到详细的许可信息：[http ://www.openstreetmap.org/copyright](http://www.openstreetmap.org/copyright)

# c# - 使用 DrawString 方法复制标签

> ID：11391088
> 
> 赞同：1
> 
> 时间：2012-07-09T07:59:47.237
> 
> 标签：c#, .net, winforms, drawstring

我需要在 Infragistics 工具栏上绘制一个字符串，并且我不能使用标签，因为它的背景实际上不是透明的（见图）。

我已经设法使用 DrawString 方法根据需要覆盖文本，但问题是文本不像标签。它更厚，混叠并且由于某种原因是黑色的。

我应该如何更改我的代码以使用 DrawString 方法（相同的字体、大小、前景色）复制标签的外观？

![在此处输入图像描述](../Images/323033b87267b8f4d88864b4321c574e.png)

和代码：

```
FontFamily fontFamily = new FontFamily("Microsoft Sans Serif");
                Font font = new Font(
                   fontFamily,
                   17,
                   FontStyle.Regular,
                   GraphicsUnit.Pixel);
                SolidBrush solidBrush = new SolidBrush(SystemColors.ControlText);

                drawParams.Graphics.TextRenderingHint = TextRenderingHint.AntiAlias;
                drawParams.Graphics.DrawString("String Drawn with DrawString method", font, solidBrush, textEditorLoc.X, textEditorLoc.Y + 25); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T08:07:43.017

尝试使用[`TextRenderer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textrenderer.aspx)类：

```
TextRenderer.DrawString(
    drawParams.Graphics,
    "String Drawn with TextRenderer (GDI) method",
    font,
    new Point(textEditorLoc.X, textEditorLoc.Y + 25),
    SystemColors.ControlText); 
```

也保留`TextRenderingHint`as`SystemDefault`并使用与标签相同的字体大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:09:00.830

标签的标准文本大小为 8.25 磅，或大约 11 像素。您的 17 像素大小导致文本大小为 13 pt。

尝试使用这个

```
 FontFamily fontFamily = new FontFamily("Microsoft Sans Serif");
 Font font = new Font(
                   fontFamily,
                   8.25f,
                   FontStyle.Regular,
                   GraphicsUnit.Point);
 SolidBrush solidBrush = new SolidBrush(SystemColors.ControlText);            
 e.Graphics.DrawString("String Drawn with DrawString", font, solidBrush, textEditorLoc.X, textEditorLoc.Y + 25); 
```

# sencha-touch - Sencha Touch 2.0：通用 Ext.TitleBar 标题不变

> ID：11391090
> 
> 赞同：1
> 
> 时间：2012-07-09T07:59:52.413
> 
> 标签：sencha-touch, titlebar

我正在尝试为我的应用程序创建一个带有后退按钮的通用标题栏。我通过使用 {xclass:mUserStories.view.titlebar} 将它包含在各种视图中。

这是标题栏的代码：

```
Ext.define('mUserStories.view.titlebar', {
    extend: 'Ext.TitleBar',
    id: 'narwhal',
    config: {
        docked: 'top',
        // id: 'narwhal',
        title: 'CHW Module',
        items: [{
            ui: 'back',
            text: 'Back',
            id: 'backButton'
            // hidden: true
        }]
    }
}) 
```

但是，当我尝试在切换到不同页面时动态更改工具栏时，标题栏的 console.log 显示 _title 已更改，但标题栏上的文本和按钮的“隐藏”属性没有更改。

以下是按下按钮切换页面时发生的逻辑代码：

```
toPage: function (arg) {
    var t = Ext.getCmp('narwhal');
    var b = Ext.getCmp('backButton');
    console.log(t,b)
    if (arg === PAGES.PATIENT_LIST) {
        t.setTitle('Patient List');
        b.setHidden(true)
    }
    Ext.getCmp('viewPort').setActiveItem(arg);
} 
```

我还尝试在 Narwhal 的顶部包含一个 ref：'#narwhal' 并使用 var t = this.getNarwhal()，但这也不起作用。

我不确定问题是否在于 id 的保存位置、id 的调用方式，或者是因为页面没有正确刷新。任何建议都会有所帮助！

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T16:39:31.487

我的项目中也遇到过同样的情况。

通过让控制器拥有对标题栏的引用并在我的 tabPanel 上收听 activeItemChange，我设法让一切都像你想要的那样工作。

# php - 使用新添加的项目推进分页（手动设置偏移量或某事）

> ID：11391093
> 
> 赞同：2
> 
> 时间：2012-07-09T08:00:02.037
> 
> 标签：php, propel, offset, pagination

我有一个页面，我在其中以相反的时间顺序呈现数据库中的项目。最后添加的项目是页面顶部的第一个项目。

我使用无限滚动，所以每次用户点击底部时，我都会将 pagenumber 和 resultcount 发送到我的服务器。在那里我使用推进分页来获取下一页。

问题是，当用户在页面上添加新项目时，它将被添加到我的数据库中，并且是我结果中第 1 页上的第一个项目。所以所有其他结果都移动了 1 个位置。有没有办法告诉 propel 它应该从 offset+1 开始忽略新添加的元素？

一个小例子：

我每页有 5 个项目。在此示例中，每个项目只有一个数字，因此在页面上您可以看到 1、2、3、4、5。现在，用户添加了项目 0。我的数据库结果没有分页现在是：0,1,2,3,4,5，因为添加了新项目。现在用户点击页面底部，分页具有属性 page = 2，每页项目数 = 5，我将得到 5、6、7、8、9。现在我的页面再次呈现 5。如果我可以说推动初始偏移量应该在第一项之后开始，那么结果就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:26:04.213

只是一个想法，我自己没有尝试过代码，但是您可以在搜索条件中添加一个时间戳并将其与分页一起传递，以便所有搜索结果都仅限于在当前搜索开始之前创建的记录：

```
<?php
$page = (isset($_GET['page']))?$_GET['page']:1;
$timeFilter = (isset($_GET['time']))?$_GET['time']:date("Y-m-d H:i:s", time());

$posts = PostQuery::create()
  ->filterByCreatedAt($timeFilter, Criteria::LESS_THAN)
  // add other filters as necessary
  ->paginate($page, $limit);
// Obviously there is a lot of other things to include, just an example...
?>
<html>
<head>
  <title>Paging Example</title>
</head>
<body>
  <ul id='results'>
    <?php foreach ($posts as $post) {

      echo "<li>".$post->getTitle()."</li>";

    } ?>
  </ul>

  <div id='paging'>
    <?php
    if (!$pager->isFirstPage()) {
      echo "<a href='thisFile.php?page=".$pager->getPreviousPage()."&time=".$timeFilter."'>Previous Page</a>";
    }

    // may want to add a page list here...

    if (!$pager->isLastPage()) {
      echo "<a href='thisFile.php?page=".$pager->getNextPage()."&time=".$timeFilter."'>Next Page</a>";
    }

    ?>
  </div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:39:58.753

接受的答案适用于添加但不适用于删除。这不是实现这一目标的好方法。如果您可以通过记录数的起始索引，您将不会遇到上述任何问题，因为您始终可以通过查看您拥有的记录来组​​成索引。这可以使用 DB 级别来实现。但是我不确定推进是否支持这一点。

# http - FCGI / SCGI：关于多处理的理论资料

> ID：11391099
> 
> 赞同：1
> 
> 时间：2012-07-09T08:00:29.133
> 
> 标签：http, webserver, fastcgi, scgi

我即将编写一个 FastCGI / SCGI（独立实现）服务器，但我对网络化，尤其是延迟应用程序编程没有太多经验。

当我详细思考我想做什么时，我遇到了一个理论问题。当 Web 服务器向我的服务器发送 TCP 请求时，输入（字节）将被处理到当前处理程序（FastCGI / SCGI 处理程序）。问题是：如果响应创建需要一些时间会发生什么？假设客户端请求一个大约 10MB 的大文件。服务器需要等到 10MB 被刷新到客户端，我是对的吗？所以得出的结论是：如果客户端的互联网连接较低，我的服务器会被阻塞，直到刷新完整的 10MB，不是吗？

例如，需要执行 SQL 语句的流程请求呢，它们需要一些时间。这次服务器会被阻止，不是吗？请纠正我。

为了解决这个问题，我唯一的想法是使用线程——我不会对它们很有经验。如果我正确理解了 SCGI 协议，那么线程就不是解决方案，因为它期望立即响应请求。而不是支持请求 ID 的 FastCGI。你的解决方案是什么？

# javascript - 另一个元素上的 JavaScript setAttribute

> ID：11391103
> 
> 赞同：2
> 
> 时间：2012-07-09T08:00:37.633
> 
> 标签：javascript, element, extern, setattribute

我在另一个元素上设置属性时遇到问题。

我正在使用带有 JS 和 HTML 的 PHP 代码，它看起来像：

```
<textarea name='$id' id='$id' class='regular-text' cols='60' rows='1' tabindex='2'"
            . "onkeypress =\"javascript:document.getElementById('content').setAttribute('onkeypress', document.getElementById('so_observer_heading_count').innerHTML = document.getElementById('content').value.length)\">$value</textarea> 
```

你一定知道我有两个元素。第一个（'content'）用于编写文本，另一个（'so_observer_heading_count'）将更新第一个元素的符号数。

所以我的问题是，如何在另一个元素上设置属性。

我已经检查过名称是否正确，当我更改 2\. 元素上的 textarea 内容时，我从第一个元素中获得了正确的数量。但我只想更改第一个元素中的内容以刷新数量。

而且我不想更改第一个元素的代码！不要被 textarea 弄糊涂了，以后这应该是一个标签或其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:42:05.433

首先：

不要使用内联事件绑定。始终使用“真正的”javascript，（这样您还可以防止转义引号的问题）这更清洁，更易于维护。

您的代码还有另一个问题：您在文本区域上有一个事件处理程序“keypress”，它在每个“keypress”上绑定另一个属性到您的内容元素。这不是很高效，而且很可能无法正常工作。这段代码应该是你需要的一切：

```
document.getElementById('content').addEventListener("keyup",function(){

    var obs  = document.getElementById('so_observer_heading_count');    

    obs.innerHTML = this.value.length;

});​ 
```

这是给你的**[演示](http://jsfiddle.net/poikl/EF9zT/)**。

编辑：我将事件从`keypress`to更改`keyup`为 1) 正确计数 2) 考虑字符删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:33:43.063

我会说“setAttribute”不适用于方法。改为尝试：

```
 document.getElementById('content').onkeypress = function() { document.getElementById('so_observer_heading_count').innerHTML = document.getElementById('content').value.length }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:33:58.090

好吧，当然还有更多.. 有效的方法可以做到这一点，但是您忘记做的是转义单引号，因此 js 将您的事件视为字符串，而不是解析最终结果：

```
<textarea name='$id' id='$id' class='regular-text' cols='60' rows='1' tabindex='2'"
        . "onkeypress =\"document.getElementById('content').setAttribute('onkeypress', 'document.getElementById(\'so_observer_heading_count\').innerHTML = document.getElementById(\'content\').value.length;')\">$value</textarea> 
```

否则..我会亲自通过一个包含的 js 文件来执行此操作，该文件在文档加载/准备好时执行上述行，而不是每次按下一个键。

更新：轻微的编辑，所以我从你上面的代码中删除的任何东西都被添加回来，以防你想直接复制它。

# c# - Selenium：如何拦截请求

> ID：11391104
> 
> 赞同：6
> 
> 时间：2012-07-09T08:00:38.963
> 
> 标签：c#, selenium, webdriver

有人知道如何在 Selenium WebDriver 中拦截/获取请求 url (XHR) 和响应？可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:25:08.560

webdriver 不直接支持它，但您可以通过代理重定向来捕获所有流量。在java..

```
Proxy proxy = new Proxy();
// This should be the address of proxy.
proxy.setHttpProxy("localhost:8080");

DesiredCapabilities capabilities = DesiredCapabilities.firefox();
capabilities.setCapability(CapabilityType.PROXY, proxy);

WebDriver driver = new FirefoxDriver(capabilities); 
```

# c# - 像 Windows 8 开始菜单一样的图像鼠标点击效果

> ID：11391106
> 
> 赞同：3
> 
> 时间：2012-07-09T08:00:54.767
> 
> 标签：c#, wpf

我有一张图片，当用户点击它时，我想创建一个类似 Windows 8 开始菜单的效果。

我的意思是，如果这是我的图像：

![在此处输入图像描述](../Images/05e9c827b16ab863a010d992ba9d757d.png)

当用户点击它时，它应该变成这样的：

![在此处输入图像描述](../Images/0d6f376c262353834bd88bd2eaf60c13.png)

我的意思是，有点3D效果。

如何在后面的代码中创建这种效果？（在`MouseDown`活动中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:25:32.300

按照您的要求，我再次发布我的答案：

另一个 SO 问题涵盖了您的问题的解决方案：

[梯形上的 C#/WPF 图像转换](https://stackoverflow.com/questions/5237824/c-wpf-image-transformation-over-a-trapezoid)

希望这次它不会自动转换为评论:)

# c++ - C++ 类不是自身的基础

> ID：11391108
> 
> 赞同：9
> 
> 时间：2012-07-09T08:01:12.270
> 
> 标签：c++, class, inheritance

我不确定需要多少信息来回答这个问题，所以请告诉我是否需要更多信息。

当我突然遇到这个消息时，我正在修改我写的一个大代码：`error: type 'integer' is not a direct base of 'integer'`. 我知道这是一个继承问题，但我没有继承其他类。

导致此问题的代码是

```
integer(const std::string & val, uint16_t base): integer(val.begin(), val.end(), base) {} 
```

和

```
integer(iterator start, iterator end, uint16_t base) 
```

已定义。

我需要做什么来解决这个问题？

编辑：我用 -std=c++0x 编译，根据答案，我应该能够编译，除非我的编译器是旧的：我认为 gcc 4.6.2

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-09T08:04:18.650

看起来您正试图直接调用另一个构造函数。你不能在 C++03 中做到这一点，但你[可以在 C++11 中做到这一点](http://en.wikipedia.org/wiki/C++11#Object_construction_improvement)：

> ```
> class SomeType  {
>     int number;
> 
> public:
>     SomeType(int new_number) : number(new_number) {}
>     SomeType() : SomeType(42) {}
> }; 
> ```

您需要 g++ 4.7 或更新版本才能工作，4.6 还不支持此功能，即使使用 -std=c++0x，我在我的系统上测试了这两个版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T08:03:33.377

不允许调用其他`class`类似的构造函数（C++11 中有委托构造函数）。您需要初始化类的成员（正如您可能在另一个构造函数中所做的那样）。

编辑：

根据GCC 中的[C++0x/C++11 Support](http://gcc.gnu.org/projects/cxx0x.html) ，委托构造函数在 GCC v4.7 中实现

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T08:03:04.063

您不能在不同构造函数的初始化列表中调用同一类的构造函数（在 C++03 中）。但是您可以相应地初始化成员：

```
integer(const std::string & val, uint16_t base): _start(val.begin())
                                                 _end(val.end())
                                                 _base(base)
{} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T08:12:09.223

It's [not supported in g++-4.6](http://gcc.gnu.org/gcc-4.6/cxx0x_status.html) ("Delegating constructors | N1986 | No"), but [is supported in 4.7](http://gcc.gnu.org/gcc-4.7/cxx0x_status.html).

# loops - 在Jmeter的循环中改变变量

> ID：11391111
> 
> 赞同：2
> 
> 时间：2012-07-09T08:01:24.887
> 
> 标签：loops, initialization, jmeter

我有这样的网络请求

```
 Loop Controller(3)
      moreSamples=true
      startIndex=0
      While Controller(${__javaScript(${moreSamples}==true)})
       SOAP/XML-RPC Request(index=${startIndex})
       Regular Expression Extractor(startIndex=newIndex,moreSamples=samples) 
```

现在的问题是我无法在循环中初始化 moreSamples 和 startIndex。我尝试了两种选择：

1.  将 moreSamples 和 startIndex 作为用户定义的变量。现在我可以使用正则表达式提取器更改它们的值，但无法使用 BeanShell PostProcessor 在外部循环中重新初始化它们，如下所示：

    ```
    vars.put("moreSamples","false")
    vars.put("startIndex","0") 
    ```

2.  在 while 循环的预处理器中将 moreSamples 和 startIndex 作为用户参数，但是我无法使用正则表达式提取器为它们分配值。

请提出错误或一些可以适应的新结构。

截屏：

![在此处输入图像描述](../Images/155f2c3b2968cb5099cd2de1af1e491e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:25:20.460

@bpsingh，

你能做以下事情吗：

1.  在您的测试计划顶部添加 UserDefinedVariables 并使用两个定义的变量：moreSamples、startIndex（就像 @ant 已经建议的那样）

2.  在 Download - PersistentSyncScope Sampler 下，您有两个正则表达式提取器，我假设您要在其中提取一些值并将其放在上面的这两个变量中。在 Download - PersistentSyncScope Sampler 下添加 BeanShellPostProcessor。

3.  在 BeanShellPostProcessor 添加以下代码：

 ****```
vars.put("moreSamples","${REGEX_EXTRACT1}");
vars.put("startIndex","${REGEX_EXTRACT2}"); 
```**  **这两个（moreSamples，startIndex）是全局变量，它们的变化应该在循环之外可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:17:56.087

您是否必须从循环中初始化它们？添加这些怎么样`User Defined Variables`？

![在此处输入图像描述](../Images/a36979fa60f95115f753b4033fbf5745.png)

或者你也可以从你的循环中做到这一点，它对你不起作用的原因是你忘记`;`在你的表达式后面加上分号：

```
vars.put("moreSamples","false"); // ; <- was missing
vars.put("startIndex","0"); // ; <- was missing 
```

我用过`BSF Sampler`，它对我有用（如果你使用这个，别忘了选择语言-> beanshell）。这是我的调试采样器（相关部分）：

```
START.HMS=101818
START.MS=1341821898080
START.YMD=20120709
TESTSTART.MS=1341822195274
moreSamples=false
startIndex=0 
```

**更新：**

您不需要同时使用`BSF Sampler`和用户定义的变量。你可以使用任何一个，我看到你有更多的用户定义变量，不需要那个。在测试开始时有一个。我仍然不清楚您的问题是什么以及您要达到的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T09:36:49.547

实际上这里的问题是我正在使用 2 个循环，所有答案都没有正确考虑到这一点。

由于前/后处理器仅应用于采样器而不是循环，因此无法在**while**循环之前重新初始化变量。因此，如果我在预处理器中添加初始化语句，循环无限运行，如果在后处理器中，它永远不会执行。初始化的唯一方法是在 while 循环之前添加 BSF 采样器，但这会破坏报告，因为该采样器也将被侦听器记录。

所以我找到的唯一解决方案是运行一次**下载 - PersistentSyncScope Sampler**并使用以下脚本添加 BSF 预处理器

```
vars.put("moreSamples","false");
vars.put("startIndex","0"); 
```

现在添加 while 循环并添加 Download - PersistentSyncScope Sampler 作为其子项。

这是迄今为止唯一的解决方案。感谢大家帮助我理解问题。****

# php - 如何将 iframe id/name 发送到 php 文件？

> ID：11391116
> 
> 赞同：0
> 
> 时间：2012-07-09T08:02:05.827
> 
> 标签：php, javascript, iframe

我有一个带有名称的 iframe，在本例中是用户更改的电子邮件地址。我需要处理这个变量：

```
<iframe name="asd@asd.lol" src="index.html"> 
```

index.html 是一个简单的数据表单，如下所示：

```
<form ENCTYPE="multipart/form-data" action="upload.php" method="POST">
<p>Upload: <input type="file" name="file1"> <br /></p>
<input type="submit" value="Upload">
</form> 
```

我需要将值“asd@asd.lol”传递给“upload.php”文件。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:08:51.223

您是否可以将查询字符串参数添加到 index.html 文件中？

所以：

```
<iframe name="asd@asd.lol" src="index.html?email=asd@asd.lol"> 
```

然后在 index.html 文件中设置一个隐藏变量：

```
<form ENCTYPE="multipart/form-data" action="upload.php" method="POST">
<p>Upload: <input type="file" name="file1"> <br /></p>
<input type="hidden" name="email" id="email" value="">
<input type="submit" value="Upload">
</form> 
```

如果这是一个纯 HTML 文件，您可以使用一些 javascript 设置隐藏字段的值。

然后使用 $_POST["email"] 从隐藏字段中获取电子邮件值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:09:10.207

```
<form ENCTYPE="multipart/form-data" action="upload.php" method="POST" onsubmit='$(this).append('<input type="hidden" name="iframeEmail" value="'+$("iframe[src='index.html']").attr('name')+'">')'>
<p>Upload: <input type="file" name="file1"> <br /></p>
<input type="submit" value="Upload">
</form> 
```

试试这个，如果它不起作用，那么放置 iFrame 和 ID 并在 jQuery Selector 上使用 ID 找到它

# mongodb - MongoDB 映射减少计数提供比查询更多的结果

> ID：11391123
> 
> 赞同：0
> 
> 时间：2012-07-09T08:02:19.087
> 
> 标签：mongodb

我在 Mongo 有一个集合`users`，我执行这个 map reduce，我相信它相当于 COUNT(*) GROUP BY `origin`：

```
> m = function() { for (i in this.membership) {
... emit( this.membership[i].platform_profile.origin, 1 );
... }  }
function () {
    for (i in this.membership) {
        emit(this.membership[i].platform_profile.origin, 1);
    }
}
> r = function( id, values ) { var result = 0; 
... for ( var i = 0; i < values.length; i ++ ) { result += values[i];  }
... return result; }
function (id, values) {
    var result = 0;
    for (var i = 0; i < values.length; i++) {
        result += values[i];
    }
    return result;
}
> db.users.mapReduce(m, r, {out : { inline: 1}});
{
    "results" : [
        {
            "_id" : 0,
            "value" : 15
        },
        {
            "_id" : 1,
            "value" : 449
        },
    ...
} 
```

但是，如果我尝试计算有多少文档将此字段设置为特定值，例如`1`，我得到的结果会更少：

> db.users.count({"membership.platform_profile.origin": 1});

```
424 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:51:00.080

您是否有机会使用稀疏索引进行计数查询？我唯一的猜测是，如果某些其他查询条件导致索引中缺少的文档被从计数中忽略。

我使用一些固定数据重新创建了您的架构，并且 map/reduce 和简单计数查询之间的结果是一致的：

```
db.users.drop();

var map = function() {
    for (i in this.membership) {
        emit(this.membership[i].platform_profile.origin, 1);
    }
};

var reduce = function(id, values ) {
    var result = 0;
    for (var i = 0; i < values.length; i++) {
        result += values[i];
    }
    return result;
}

var origins = {1: "a", 2: "b", 3: "c", 4: "d"};

for (var i = 0; i < 1000; ++i) {
    var membership = [];

    for (var o in origins) {
        if (0 == i % o) {
            membership.push({ platform_profile: { origin: origins[o] }});
        }
    }

    db.users.save({ membership: membership });
}

db.users.mapReduce(map, reduce, {out: {inline: 1}}).results.forEach(function(result){
    print(result["_id"] + ": " + result["value"]);
});

for (var o in origins) {
    print(origins[o] + ": " + db.users.count({"membership.platform_profile.origin": origins[o]}));
} 
```

这是输出：

```
$ mongo --quiet mr_count.js 
a: 1000
b: 500
c: 334
d: 250
a: 1000
b: 500
c: 334
d: 250 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:48:45.633

您可以使用以下 map/reduce 等效于`COUNT(*) GROUP BY origin`

映射/减少功能：

```
map = function() {
    if(!this.membership) return;

    for (i in this.membership) {
        if(!this.membership[i].platform_profile || !this.membership[i].platform_profile.origin) return;
        emit(this.membership[i].platform_profile.origin, 1);
    }
}

reduce = function(key, values) {
    var count = 0;

    for (v in values) {
        count += values[v];
    }
    return count;
}

result = db.runCommand({
        "mapreduce" : "users", 
        "map" : map,
        "reduce" : reduce,
        "out" : "users_count"
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-05T16:09:41.417

我遇到过同样的问题。我替换`x.length by Array.sum(x)`了 reduce 函数（假设你在 map 函数中发出 1 ）并且它可以工作。我同意`x.length`也应该工作，但我无法解释为什么它不工作。

# php - 协议相对网址不起作用

> ID：11391125
> 
> 赞同：0
> 
> 时间：2012-07-09T08:02:23.063
> 
> 标签：php, codeigniter, url, codeigniter-2

这是我的基本网址：

```
$config['base_url'] = '//'. $_SERVER['HTTP_HOST']. 
str_replace(basename($_SERVER['SCRIPT_NAME']), '', $_SERVER['SCRIPT_NAME']); 
```

这是我的看法：

```
<form action="<?php echo $this->config->base_url().'index.php/certification/add/'; ?>" 
method="post" accept-charset="utf-8" onsubmit ='return false;'> 
```

这是结果：

```
<form action="//localhost/php/index.php/localhost/php/index.php/certification/add/" 
method="post" accept-charset="utf-8" onsubmit="return false;"> 
```

为什么会这样？（如果您不知道协议相关的 URL 是什么，请[阅读此内容。](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:09:21.353

`$config['base_url']`不应包含文件/脚本路径。如果你自己回显它，在你的情况下，你应该只是得到'//localhost/php/'

你想用额外的 SCRIPT_NAME 东西做什么？

如果我理解正确，您将希望摆脱该部分，然后使用：

```
<form action="<?php echo $this->config->base_url('index.php/certification/add/')" 
```

（我相信在从配置中删除脚本部分后它会像现在一样工作，但我想这是“正确的 CI 方式”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:12:56.773

您永远不会将前缀 http 或 https 协议设置为 base_url。因此，表单操作 url 将按预期以 // 开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:13:11.393

您似乎没有正确获取基本 URL。[这里](https://stackoverflow.com/questions/2820723/how-to-get-base-url-with-php)已经回答了一个类似的问题。

# android - 如何在 Windows 上构建和运行 ics 的核心应用程序，如设置、相机等

> ID：11391126
> 
> 赞同：-1
> 
> 时间：2012-07-09T08:02:25.153
> 
> 标签：android, build, android-source, core

我已经下载了ics 4.0.3源代码，想修改原生设置，我要做的是

1) 为设置添加自定义修改
2) 通过添加修改重新编译本机设置
3) 构建源代码
4) 生成自定义构建以适用于所有 android 设备。

我怎样才能实现上述目标？

仅供参考：使用 win7,4gb 内存，intel i5 处理器。安装 cygwin 和 git。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:16:25.807

你的第 4 点是不可能的。您无法“在所有 android 设备上”创建自定义固件，因为您缺少必要的驱动程序，并且您无法分发修改后的设置应用程序，除非通过自定义固件。

[http://source.android.com](http://source.android.com)上的文档涵盖了一般固件修改过程，特别[是 Source 选项卡中的 Getting Started 页面](http://source.android.com/source/index.html)。请注意，您的开发机器不适合，因为 Windows 不能用于构建 Android 源代码。

# testing - XPath 2.0 在线测试仪？

> ID：11391128
> 
> 赞同：15
> 
> 时间：2012-07-09T08:02:26.603
> 
> 标签：testing, xpath-2.0

我为 xPath 选择器使用 Oxygen XMLTester，支持 XPath 2.0 规范。所以我想知道是否有任何在线测试人员使用 XPath 2.0 规范？ [http://www.xmlme.com/XpathTool.aspx](http://www.xmlme.com/XpathTool.aspx) [http://www.xmlme.com/XpathTool.aspx][2] [http://www.xpathtester.com/test](http://www.xpathtester.com/test) [http://www.xpathtester .com/test][3]

上述测试人员未能采用以下 XPAth（2.0 相当成功）：**/list/sum(item/prices/price[@currency='USD'])**与 XML：

```
<list>
   <item new='true'>
     <title lang="en">Pop-Music DVD</title>
     <author >K. A. Bred</author>
     <year>2012</year>
     <prices>
       <price currency="USD">29.99</price>
       <price currency="EUR">23.2</price>
     </prices>
   </item>
   <item new='false'>
    <title>Gone with the wind</title>
    <author>M. Mitchell</author>
    <year>1936</year>
    <prices>
      <price currency="USD">19.05</price>
      <price currency="EUR">15</price>
    </prices>
  </item>
</list> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-05T23:36:30.430

由于这再次冒泡：

我还在[这里做了一个 XPath 2.0 在线测试器](http://videlibri.sourceforge.net/cgi-bin/htmlparserExampleCGI)。

不是那么丰富多彩或描述性强，但恕我直言，更容易用于小型查询。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T22:43:23.260

现在有一个在线 XPath 2.0 测试器/分析器，位于：

[http://www.qutoric.com/xslt/analyser/xpathtool.html](http://www.qutoric.com/xslt/analyser/xpathtool.html)

这实际上在后台使用[Saxon-CE](http://saxonica.com) XSLT 2.0 处理器运行（该应用程序是用 XSLT 2.0 编写的）。显示您的表达式已评估的屏幕截图：

![在此处输入图像描述](../Images/4190b383b577dad012e93f1405ca1f25.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-06T06:50:20.070

在这里，我发现了另一个有用的[交互式 xpath 测试器](http://ponderer.org/download/xpath/)。

# xcode - iOS Lion - Monotouch 和模拟器 4.3

> ID：11391132
> 
> 赞同：1
> 
> 时间：2012-07-09T08:02:53.750
> 
> 标签：xcode, mono, xamarin.ios, osx-lion, ios-simulator

我在 Mac OS X 10.7.4 上有以下配置：

*   MonoDevelop 3.0.3.2
*   单声道 2.10.9
*   Xcode 4.3.3
*   单点触控 5.2.12

我想在 iOS 4.3 上测试我用 Monotouch 开发的应用程序，因为在 iOS 5.0 上运行良好。为此，我尝试在 Xcode 中安装模拟器 4.3，但是当我打开 Monotouch 时，只有模拟器 5.0。

我在 google 上阅读了一些信息，很明显，它建议安装 SDK 4.3，但没有适用于 iOS Lion 的 SDK 版本（Apple 开发者网站上唯一的一个是 Snow Leopard）。

我很想知道如何在我的电脑上安装模拟器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:27:22.253

它有点隐藏，但您仍然可以从以下位置下载 Xcode 版本：[https ://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)

下载 Xcode 4.0 应该会为您提供适用于 iOS 4.3 的最终 SDK。

您可以在 Lion 上并排安装 4.2 和 4.3 (.app)（我有）。这也*应该*适用于 4.0 和 4.3，因为它们（如 4.2）最终位于不同的目录中。

请注意，您需要告诉 MonoDevelop 切换`Apple SDK`位置（并重新启动 MD）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:39:35.257

对我有用的解决方案是通过 Xcode 安装它。

XCode > 首选项 > 下载

您应该会在此处看到可用的安装。单击安装按钮以获取它。

# c# - 如何在 C# 中将对象写入二进制文件？

> ID：11391137
> 
> 赞同：1
> 
> 时间：2012-07-09T08:03:21.067
> 
> 标签：c#, .net, file, object, binary

我需要在 C# 中将“对象”写入文件，但到目前为止我的所有尝试都没有奏效。问题是我要编写的对象确实是类型`object`，因为它是从 Outlook 电子邮件`Attachments`中的对象集合返回的。`MailItem`

我已经设法将它插入 SQL Server 数据库，从中检索并成功创建正确的文件，但这不是唯一的方法。

我也尝试使用`BinaryFormatter`如下所示，但这总是通过在开始时添加一些不需要的字符来破坏我的文件头（剩余数据似乎没问题）：

```
[...]
using ( FileStream fileStream = new FileStream( tempName, FileMode.Create ) )
{
    using ( BinaryWriter binaryWriter = new BinaryWriter( fileStream ) )
    {
        using ( MemoryStream memoryStream = new MemoryStream() )
        {
            object attachmentData =                                     
                attachment.PropertyAccessor.GetProperty( PR_ATTACH_DATA_BIN );
            BinaryFormatter binaryFormatter = 
                new BinaryFormatter();
            binaryFormatter.Serialize( memoryStream, attachmentData );
            memoryStream.Seek( 0, SeekOrigin.Begin );
            binaryWriter.Write( memoryStream.ToArray() );
        }
    }
}
[...] 
```

有任何想法吗？我无法控制从 Outlook 获得的内容，因此通常的序列化方法似乎不是我需要的...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T08:10:56.930

我认为这就是你要找的：

[如何：保存 Outlook 中的附件](http://msdn.microsoft.com/en-us/library/ms268754.aspx)

```
if (newEmail.Attachments.Count > 0)
{
      for (int i = 1; i <= newEmail.Attachments.Count; i++)
      {
           newEmail.Attachments[i].SaveAsFile
                (@"C:\TestFileSave\" +
                newEmail.Attachments[i].FileName);
      }
} 
```

# entity-framework-4.3 - 从我的代码运行 entityframework cmdlet

> ID：11391143
> 
> 赞同：0
> 
> 时间：2012-07-09T08:03:43.783
> 
> 标签：entity-framework-4.3, cmdlets

我正在实体框架上创建一个小程序，它允许使用 UI 编辑 POCO。作为该过程的一部分，我想从我的代码中调用“add-migration”命令，以保存其他程序员与程序管理器控制台的交互。有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:44:10.707

`Add-Migration`cmdlet 在包管理器控制台使用的单独 EF 4.3 Powershell 程序集中定义。此程序集引用了一个真正的 EF 4.3 程序集。从该程序集公开的核心逻辑是`ToolingFacade`来自`System.Data.Entity.Migrations.Design`命名空间的类。公开的逻辑涉及检索数据库和挂起的迁移以及构建新迁移的脚手架，但 PowerShell 程序集包含执行工作流并在 EF、PowerShell 和 Visual Studio 之间创建桥梁（向您的项目添加类） - 这是您必须在您的项目中进行逆向工程和重新实现的工具。

编辑：您也可以尝试`MigrationCommands.AddMigration`直接从 PowerShell 程序集运行。

# android - 找不到与给定名称匹配的资源 Android 1.6

> ID：11391146
> 
> 赞同：2
> 
> 时间：2012-07-09T08:04:00.553
> 
> 标签：android, resources

我有，`'no resource found that matches the given name'`但一切都设置正确。错误：错误：未找到与给定名称匹配的资源`(at 'text' with value '@string/labReminderClear')`。

* * *

在**AndroidManifest.xml 中：**

```
<application android:label="MyName"
..... 
```

* * *

在**Strings.xml 中：**

```
<string name="app_name">MyName</string>
...
<string name="labReminderClear">Clear</string> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:48:13.293

您提到的项目在`strings.xml`文件中包含错误。它与`%`例如下一行中使用的符号连接（注意：该文件中有多个）：

```
<string name="msgYouHaveASTS">You have %d appointment(s)\n..and %d task(s)</string> 
```

这是由于`aapt`（Android 资产打包工具）变得严格并被用于**所有**版本的 Android。[请参阅此答案](https://stackoverflow.com/a/4417333/480199)中的详细说明。

如果要修复代码以使其正常工作，则必须添加有关参数位置的信息。例如上面的行应该变成：

```
<string name="msgYouHaveASTS">You have %1$d appointment(s)\n..and %2$d task(s)</string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:09:45.357

如果您使用的是*Eclipse* ，请尝试使用（从上面的菜单中）：

1.  `Project->Clean...`.
2.  选择您有问题的项目进行重建。

如果这没有帮助，`Error Log`查看可能会帮助您确定这里的真正问题是什么。从 Eclipse 菜单中选择：

`Window->Show view->ErrorLog`

# html - 如何使用 HTML5 缩放 ImageData？

> ID：11391149
> 
> 赞同：2
> 
> 时间：2012-07-09T08:04:03.907
> 
> 标签：html, canvas, scale

特别是我有这个例子，但它似乎不起作用：

```
<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="300" height="150" style="border:1px solid #d3d3d3;">
your browser does not support the canvas tag </canvas>

<canvas id="myCanvas2" width="300" height="150" style="border:1px solid #d3d3d3;">
your browser does not support the canvas tag </canvas>

<script type="text/javascript">

var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");

var c2=document.getElementById("myCanvas2");
var ctx2=c2.getContext("2d");

ctx.strokeRect(5,5,25,15);
var imageData = ctx.getImageData(0,0,c.width, c.height);

ctx2.putImageData(imageData, 100, 100);
ctx2.scale(2,2);
</script> 

</body>
</html> 
```

矩形不应该在第二个画布中缩放吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:31:34.083

试试下面的代码：

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");

var c2=document.getElementById("myCanvas2");
var ctx2=c2.getContext("2d");

ctx.strokeRect(5,5,25,15);

ctx2.scale(2, 2);
ctx2.drawImage(c, 10, 10); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-12T10:38:27.753

在将图像“写入”画布之前，您需要进行转换。

```
ctx2.scale(2,2);
ctx2.putImageData(imageData, 100, 100); 
```

然后一切都应该正常工作。

# c# - 在 Moq 中模拟虚拟成员

> ID：11391150
> 
> 赞同：15
> 
> 时间：2012-07-09T08:04:07.837
> 
> 标签：c#, moq

对于单元测试，我使用的是 NUnit 2.6 和 Moq 4.0。有一个关于虚拟成员的特殊情况，其中 Moq 的代理对象不将方法调用中继到实际实现（可能是设计使然）。例如，如果我有一堂课……

```
public class MyClass {
    protected virtual void A() {
        /* ... */
    }

    protected virtual void B(...) {
        /* ... */
    }
} 
```

...我使用 Moq在我的测试夹具中覆盖`GetSomethingElse`'s方法...`A()`

```
var mock = new Mock<MyClass>();
mock.Protected().Setup("A").Callback(SomeSortOfCallback); 
```

...使用模拟的`A`方法效果很好；但是，如果所述方法中的任何内容将调用非模拟方法`B`，则该方法将不执行任何操作和/或返回默认值，即使`MyClass`.

有没有办法解决这个问题？我用错了起订量吗？

在此先感谢，
曼尼

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-09T08:09:06.917

设置`mock.CallBase = true`，你应该很高兴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-16T18:36:41.240

```
 var systemUnderTest = new Moq.Mock<ProcessBulkData> { CallBase = true };
 systemUnderTest.Setup(s => s.MethodName(...)).Returns(...);
 var actual=systemUnderTest.Object.BulkInsert(...); 
```

# spring - Spring Roo - 在浏览器关闭时关闭会话

> ID：11391151
> 
> 赞同：0
> 
> 时间：2012-07-09T08:04:16.980
> 
> 标签：spring, spring-mvc, spring-security, spring-roo

我正在为我的 Web 应用程序使用 Spring-ROO 以及 Spring 安全性。我已将会话超时设置为 10。关闭浏览器时，会话不会自动关闭。当浏览器关闭时，谁能告诉任何方法来关闭会话？

是否有任何配置可以进行此设置？

请注意，我不能使用 jquery/javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:45:57.153

我认为这是不可能的，因为不存在 OnBrowserClosed 事件。唯一接近的是[`window.onunload`](https://developer.mozilla.org/en/DOM/window.onunload)您可以捕获的非标准 DOM 事件，但这意味着每当您从一个页面导航到另一个页面时都会运行自定义逻辑，即使那样我认为您也无法访问 URL用户将前往下一个，这需要知道用户实际上正在离开您的网站（这`null`意味着他根本没有去任何网站）。

有人认为您可以做的是将超时设置得更短，并在每个页面上都有一个 JavaScript，它使用 AJAX 定期短时间地 ping 服务器，但这是一个肮脏的 hack，它会锁定任何关闭 JS 的人。恕我直言，不可能有一个干净的解决方案。

# javascript - 访问下一个兄弟

> ID：11391155
> 
> 赞同：0
> 
> 时间：2012-07-09T08:04:30.913
> 
> 标签：javascript, jquery, html

我有一个如下的 HTML 片段：

```
<tr><td></br></td></tr>
<tr title="title"><td></td><td>凝固検査専用容器</td></tr>
<tr id='map_6011' />
<tr id='map_6012' />
<tr id='map_6010' />
<tr id='map_6184' />
<tr id='map_6336' />    
<tr><td></br></td></tr>

<tr title="title"><td></td><td>血糖専用容器(NaF入り)</td></tr>
<tr id='map_2055' />
<tr id='map_3471' />    
<tr><td></br></td></tr>

<tr title="title"><td></td><td>ｱﾝﾓﾆｱ専用容器&lt;/td></tr>
<tr id='map_2142' /> 
```

首先，我想选择标题为“title”的每个 TR 标签，然后选择该特定 TR 标签的第一个兄弟。（即，下一个 TR 的 ID 类似于“map_xxxx”）。

我有这样的javascript：

```
var lblTRs=$("tr[title=title]");
for(var i=0;i<lblTRs.length;i++){
    var obj=lblTRs[i];
    var firstTRSibling=obj.nextSibling;
    alert(firstTRSibling); //this gives [object Text]
} 
```

但它没有给出实际的 TR 兄弟。alert() 给出 [object Text]。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T08:09:12.000

试试这样：

```
var firstTRSibling;
while((firstTRSibling=obj.nextSibling).nodeType !== 3){
                                               //   ^-----indicates TEXT_NODE
    obj=obj.nextSibling;
}
alert(firstTRSibling); 
```

DOM 元素之间有额外的空白字符，它们将被视为文本节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:22:25.690

您的问题是每对元素之间的空白`<tr>`在 DOM 中表示为文本节点。然而，表格相关元素的一些看似鲜为人知的属性使得处理这个问题变得非常容易。具体在这种情况下，元素的属性和元素`rows`的属性。假设您有一个元素存储在一个名为 的变量中，您只需要：`<table>``rowIndex``<tr>``<tr>``tr`

```
tr.parentNode.rows[tr.rowIndex + 1]; 
```

这适用于 IE 4 之前的所有主要浏览器，并且是 DOM 标准的一部分。它也比使用 jQuery 或其他库更快、更兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T08:13:39.490

我认为您可以简单地使用[`next`](http://api.jquery.com/next/)：

```
$("tr[title='title']").each(function() {
    var element = $(this).next();
}); 
```

顺便说一句，`<tr>`应该有结束标签（即`</tr>`），并在`<td></td>`里面包含指定数量的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T08:08:30.583

好的，我应该使用

```
var firstTRSibling=obj.nextSibling.nextSibling; 
```

但为什么？_

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T08:14:29.173

由于您已经在使用 jQuery，我建议您使用 jQuery 内置的[next](http://api.jquery.com/next/)函数。

可能是这样的`var lblTRs=$("tr[title=title]").next("tr");`

# php - 如何在php中将foreach用于3d数组

> ID：11391166
> 
> 赞同：2
> 
> 时间：2012-07-09T08:05:10.583
> 
> 标签：php

我有一个 3d 数组，需要用它做点什么，能够使用简单的 for each 来解决问题，如下所示：

```
for($n=0;$n<count($d["T"]);$n++)
{
 $d["T"][$n]["Pay"]=number_format($d["T"][$n]["Pay"], 2, '.', '');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T08:12:14.340

最简单的技术是嵌套 Foreach 外观 ... 喜欢

```
foreach($arrD as $key => $arrInternal){

    foreach($arrInternal as $keyIn => $Data){

          //Perform your operation here
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T08:11:16.150

```
foreach ($d["T"] as &$var) {
  $var['Pay'] = number_format($var['Pay'], 2, '.', '');
} 
```

# python - 处理 Twisted 中的失败

> ID：11391168
> 
> 赞同：9
> 
> 时间：2012-07-09T08:05:27.310
> 
> 标签：python, twisted

这是我的一些 api 的简单 HTTP 客户端：

> ```
> # -*- coding: utf-8 -*-
> import settings
> from twisted.internet import reactor
> from twisted.web.client import Agent
> from twisted.web.http_headers import Headers
> 
> params = {
>     'url': 'http://api.vk.com/api.php',
>     'id':260,
>     }
> 
> def params_for_get():
>     return '&'.join(["%s=%s" % (key,val) for key, val in params.items()])
> 
> agent = Agent(reactor)
> d = agent.request(
>     'GET',
>     "%s?%s" % (settings.APPLICATION_URL, params_for_get()),
>     Headers({'User-Agent': ['Twisted Web Client Example'],
>              'Content-Type': ['text/x-greeting']}),
>     '')
> 
> def cbResponse(*args, **kwargs):
>     print args, kwargs
>     print 'Response received'
> 
> def cbShutdown(ignored):
>     reactor.stop()
> 
> def cbError(failure):
>     print type(failure.value), failure # catch error here
> 
> d.addCallbacks(cbResponse, cbError)
> d.addBoth(cbShutdown)
> 
> reactor.run() 
> ```

当我启动程序时，我发现错误：

```
<class 'twisted.web._newclient.RequestGenerationFailed'> [Failure instance: Traceback (failure with no frames): <class 'twisted.web._newclient.RequestGenerationFailed'>: [<twisted.python.failure.Failure <type 'exceptions.AttributeError'>>]
] 
```

但我不知道，这个错误发生在哪里。我怎么知道？我试图显示回溯

```
<twisted.python.failure.Failure <type 'exceptions.AttributeError'>> 
```

但我无法得到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T17:24:45.867

该Failure 实例正在包装另一个Failure 实例，并且没有打印关于其中的太多信息。这种尴尬是 Twisted 的错。该类`twisted.web._newclient._WrapperException`存储一个`reasons`属性，但似乎并不关心在其`__str__`方法中打印有关这些原因的信息。

如果您在 cbError() 函数中添加另一行，您可能会看到问题的其余部分：

```
failure.value.reasons[0].printTraceback() 
```

我可以在这里重现错误，并且通过额外的信息，很明显你的第四个参数`Agent.request()`应该是一个`IBodyProducer`提供者，但是你传递的是一个空字符串。尝试删除最后一个参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-04T18:09:30.997

上面-paul的答案是正确的。我想提供这个简短的函数，我发现它对消除失败很有用，但我不能把它放在评论中：

```
def unwrap_failures(err):
    """
    Takes nested failures and flattens the nodes into a list.
    The branches are discarded.
    """
    errs = []
    check_unwrap = [err]
    while len(check_unwrap) > 0:
        err = check_unwrap.pop()
        if hasattr(err.value, 'reasons'):
            errs.extend(err.value.reasons)
            check_unwrap.extend(err.value.reasons)
        else:
            errs.append(err)
    return errs 
```

# java - 从字符串到 Clob 和从 Clob 到字符串的转换

> ID：11391170
> 
> 赞同：2
> 
> 时间：2012-07-09T08:05:41.160
> 
> 标签：java, sql, string, clob

我正在尝试将作为 StrignBuffer 的 XML 响应保存到方法中。我需要将此字符串数据作为 CLOB 保存到 Sql 并检索它。

响应最大可达 3-4Kb，应再次检索到 StringBuffer

任何人都可以给我不包括数据库特定方法/罐子的教程或示例代码。

如果 CLOB 不合适或任何其他更好的选择，我可以更改 db 列类型。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:16:57.917

`CLOB`您可以通过调用创建一个`connection.createClob()`，然后您可以使用诸如`setString`、`setCharacterStream`或之类的方法来填充它`setAsciiStream`。

创建一个`PreparedStatement`并调用它`setClob()`以将您的 CLOB 存储在数据库中。

检索数据也是一样的，从 a 中读取，`ResultSet`然后调用`getCharacterStream`，`getAsciiStream`或者`getSubStream`就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T14:41:12.940

对于`NamedParameterJdbcTemplte`：

```
MapSqlParameterSource paramSource = new MapSqlParameterSource();
paramSource.addValue("clob", "a long long text", Types.CLOB);
namedTemplate.update(INSERT_STMT, paramSource); 
```

对于`JdbcTemplate`：

```
<bean id="lobHandler" class="org.springframework.jdbc.support.lob.OracleLobHandler">
    <property name="nativeJdbcExtractor" ref="nativeJdbcExtractor"/>
</bean> 
```

和：

```
private @Autowire LobHandler lobHandler;
jdbcTemplate.update("insert into customer(id,name,comments) "
    + "values (?, ?, ?)", new PreparedStatementSetter() {
  public void setValues(PreparedStatement ps) throws SQLException {
    ps.setLong(1, 2L);
    ps.setString(2, "Jon");
    lobHandler.getLobCreator().setClobAsString(ps, 3, "Clob data");
  }
}); 
```

要从中提取字符串`ResultSet`：

```
 inc.setDetail(lobHandler.getClobAsString(rs, "DETAIL")); 
```

查看官方文档：[http ://docs.spring.io/spring/docs/3.0.x/reference/jdbc.html#jdbc-lob](http://docs.spring.io/spring/docs/3.0.x/reference/jdbc.html#jdbc-lob)

# jquery - 如何使用 Jquery 移动选择菜单更改页面？

> ID：11391172
> 
> 赞同：2
> 
> 时间：2012-07-09T08:05:43.627
> 
> 标签：jquery, jquery-mobile, select-menu

我正在开发一个应用程序，我在其中使用选择菜单。由于我是开发新手，所以我不知道在选择选择菜单时如何更改页面。我在选择菜单上尝试了 onclick 事件和 onchange 事件，但它们不起作用。我正在使用的代码是

代码：

索引.html

```
<section id="previewPage" data-role="page">
  <div data-role="content" id="previewId" class="previewScreen">

        <select name="select-choice-0" id="select-choice-1" data-native-menu="false">
            <option value="email">Share via Email</option>
            <option value="bbm">Share via BBM</option>
            <option value="sms">Share via SMS</option>
            <option value="facebook">Share via Facebook</option>
            <option value="twitter">Share via Twitter</option>
            <option value="google">Share via Google</option>
        </select>                       
        </div>

    </section> 
```

根据上面的代码**，当我单击通过电子邮件共享或通过 BBM 共享时，它需要将页面导航到那些特定的 html 页面。**例如 **，当我单击“通过 BBM 共享”选项时，我的项目需要将页面从 index.html 更改为 BBM.html 页面。**

任何人都请帮我解决这个问题......在此先感谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:08:55.387

`data-`一种选择是向选项标签添加属性：

```
<option value="bbm" data-location='www.example.com/bbm.html'>Share via BBM</option> 
```

```
$('#select-choice-1').change(function() {
   window.location = $(this).data('location')  
}) 
```

[`data()`](http://api.jquery.com/data/#data-html5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:47:40.023

jQuery Mobile 公开`$.mobile.changePage`方法。你可以用这个解决问题。

如果需要导航的页面与“index.html”在同一目录下，可以使用下面的js。

```
$(function(){

    $('select').change(function() {
        var nextpage = $(this).children('option:selected').attr('value');
        $.mobile.changePage( nextpage + '.html' );
    });

});​ 
```

[DEMO](http://jsfiddle.net/KURWM/) :jsfiddle (多页示例)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:53:54.073

我正在使用以下代码来更改带有选择框的页面 url，作为菜单。

```
$('#menu-select').change(function() {
   window.location = $(this).data('location')  
}) 
```

的JavaScript：

```
 <select name='select-choice-1' id="menu-select">
    <option value="">Menú:</option>
    <option value="index.php">Noticias</option>
    <option value="index.php#tramites" data-location='index.php#tramites'>Trámites</option>
    <option value="index.php#twitter" data-location='index.php#twitter'>Twitter</option>
    <option value="virgen_del_valle.php">Parque Virgen del Valle</option>
    </select> 
```

我有三个页面：

*   index.php（包含页面或 data-role="page" 和 id）
*   新闻.php
*   事件.php

问题是，例如，当我选择主页选项，然后选择更多信息并尝试转到事件时，它没有加载页面。

我认为这段代码必须对内部页面和外部 url 有条件。

希望你能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T21:47:33.693

```
var a = document.createElement('a');
a.href='http://google.com/';
a.rel = 'external';
a.target = '_top';
document.body.appendChild(a);
a.click(); 
```

[提琴手](http://jsfiddle.net/s6zPE/6/)

# android - Runtime.exec() 错误：挂起

> ID：11391177
> 
> 赞同：2
> 
> 时间：2012-07-09T08:06:12.863
> 
> 标签：android, runtime.exec

我的应用程序做的第一件事是检查“su”，因为它是应用程序工作所必需的。尽管它有时会起作用，但通常是在终端中键入“killall *packageName ”之后。*我已经完成了一个简单的测试应用程序，但我无法让它每次都能正常工作。发生的代码：

```
String[] args = new String[] { "su" };
Log.v(TAG, "run(" + Arrays.toString(args) + ")");
FutureTask<Process> task = new FutureTask<Process>(new Callable<Process>() {
    @Override
    public Process call() throws Exception {
        return Runtime.getRuntime().exec(args);
    }
});
try {
    Executors.newSingleThreadExecutor().execute(task);
    return task.get(10, TimeUnit.SECONDS);
} catch (Throwable t) {
    task.cancel(true);
    throw new IOException("failed to start process within 10 seconds", t);
} 
```

完整项目：[https ://github.com/chrulri/android_testexec](https://github.com/chrulri/android_testexec)

由于此应用程序首先运行 exec()，因此我无法关闭任何以前打开的文件描述符，如另一个 stackoverflow 问题中所述：[https ://stackoverflow.com/a/11317150/1145705](https://stackoverflow.com/a/11317150/1145705)

PS：我在不同的设备上运行 Android 4.0.3 / 4.0.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:38:43.443

3c71 关于打开文件描述符是正确的。就我而言，是 AdMob SDK 导致了问题，因为它有时（重新）在我尝试调用 exec(..) 时从网络加载广告，让我陷入僵局。

我的解决方案是一次分叉一个“su”进程并将其重用于所有命令，并在分叉该进程后加载广告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:23:51.583

要安全地使用 Runtime.exec，您应该等待进程完成并使用输出和错误流，最好同时使用（以防止阻塞）： [http ://www.javaworld.com/javaworld/jw-12-2000/jw- 1229-陷阱.html](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)

# javascript - window.print() - 不打开打印窗口

> ID：11391178
> 
> 赞同：5
> 
> 时间：2012-07-09T08:06:28.743
> 
> 标签：javascript, printing

> **可能的重复：**
> [Web 应用程序中的“静默”打印](https://stackoverflow.com/questions/21908/silent-printing-in-a-web-application)

我希望`window.print()`命令直接打印，而不打开打印窗口：

![在此处输入图像描述](../Images/4ce0cdb358a89b26e4cb2f1f33baed5a.png)

那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T08:11:05.017

尝试

对于 Mozilla： http://forums.mozillazine.org/viewtopic.php?t= [48336](http://forums.mozillazine.org/viewtopic.php?t=48336)

在 IE 中使用 JavaScript`window.print()`打印网页时，默认情况下会提示 IE 的打印机对话框。为避免这种情况，请使用以下 JavaScript 代码：

```
if (navigator.appName == "Microsoft Internet Explorer")
{
var PrintCommand = '<object ID="PrintCommandObject" WIDTH=0 HEIGHT=0
CLASSID="CLSID:8856F961-340A-11D0-A96B-00C04FD705A2"></object>';
document.body.insertAdjacentHTML('beforeEnd', PrintCommand);
PrintCommandObject.ExecWB(6, -1); PrintCommandObject.outerHTML = "";
}
else {
window.print();
} 
```

来自： http: [//www.devx.com/tips/Tip/30834](http://www.devx.com/tips/Tip/30834)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T08:10:56.793

它称为静默打印，您可以在多个浏览器上执行此操作，但并不是那么简单..

火狐上——

> 在 Firefox 的地址栏输入 about:config 并按 Enter。
> 
> 右键单击页面上的任意位置，然后选择 New > Boolean
> 
> 输入首选项名称作为 print.always_print_silent 并单击确定。

看下面的问题：

[Web 应用程序中的“静默”打印](https://stackoverflow.com/questions/21908/silent-printing-in-a-web-application)

# android - 带按钮的列表视图

> ID：11391181
> 
> 赞同：3
> 
> 时间：2012-07-09T08:06:40.303
> 
> 标签：android, android-layout, android-handler

> **可能重复：**
> [在 Listview 问题的每一行中处理按钮事件](https://stackoverflow.com/questions/11363366/handling-button-event-in-each-row-of-listview-issue)

我正在开发一个安卓应用程序。我应该在 ListView 的每一行中添加一个按钮，当我单击任何按钮时，我需要删除该按钮。但是，当我这样做时，按钮被删除，但其他位置的一些其他按钮也被删除。此外，当我向下和向上滚动 ListView 时，我单击并删除的这些按钮再次出现在列表中。你能告诉我一个确切的解决方案或一段完整的代码吗？谢谢...

```
public View getView(final int position, View convertView, ViewGroup parent) {

        if(convertView == null){
            // LayoutInflater class is used to instantiate layout XML file into its corresponding View objects.
            LayoutInflater layoutInflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
            convertView = layoutInflater.inflate(R.layout.listxml, null);
        }

        rawTextView = (TextView) convertView.findViewById(R.id.textView1);
        rawTextView.setText("Text "+innerClassBookArray[position]);

        final LinearLayout lnr=(LinearLayout)convertView.findViewById(R.id.layoutforbtn);

         final Button btn = new Button(getBaseContext()); 
            btn.setText("MyButton"); 
            btn.setId(position);
            lnr.addView(btn); 

           btn.setOnClickListener(myOnBtnClickListener);

        return convertView;
    }   
      private OnClickListener myOnBtnClickListener = new OnClickListener() {
            @Override
            public void onClick(View v) {
                final int posit = bookListView.getPositionForView((View) v.getParent());
                Toast.makeText(getApplicationContext(), Integer.toString(posit), Toast.LENGTH_LONG).show();

            }
        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:21:17.483

您可以这样做，创建一个数组列表，其中每个元素为“0”（`Arraylist<String> my=new ArrayList<String>();`Arraylist 的大小应根据列表视图中列的大小），然后单击按钮将“1”设置为 like 的位置， `my.set(position,"1");`然后通知列表视图。还可以查看以下代码中的条件，例如

```
 public View getView(final int position, View convertView, ViewGroup parent) {

            if(convertView == null){
                // LayoutInflater class is used to instantiate layout XML file into its corresponding View objects.
                LayoutInflater layoutInflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
                convertView = layoutInflater.inflate(R.layout.listxml, null);
            }

            rawTextView = (TextView) convertView.findViewById(R.id.textView1);
            rawTextView.setText("Text "+innerClassBookArray[position]);
  Button button =(Button)findViewById(R.id.yourid);

      if(my.get(position).equals("1")){
    button.setVisiblity(View.INVISIBLE);
    }
            final LinearLayout lnr=(LinearLayout)convertView.findViewById(R.id.layoutforbtn);

               btn.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

    my.set(position,"1");
    ((BaseAdapter)yourActivity.this.lv.getAdapter()).notifyDataSetChanged();
                }
            });

            return convertView;
        }   
I think this will definitely help you any question ask me 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:17:49.997

[这个](http://www.vogella.com/articles/AndroidListView/article.html#listadvanced_interactive)例子帮助我解决这个问题：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T08:26:37.230

[这](http://developer.android.com/guide/topics/ui/drag-drop.html)是为您提供的简单而漂亮的教程。在此代码中，当点击事件时尝试隐藏**按钮**

```
Btn01.setOnClickListener(new OnClickListener(){

 public void onClick(View v) {

//Toast.makeText(SearchUser.this, "Button 1 "+listview_arr[position], Toast.LENGTH_SHORT).show();
Btn01.setvisibility(view.Gone);
}
}); 
```

像这样试试。希望它对你有帮助。祝你好运

# redmine - 在 Redmine 中为多个问题创建子任务很热门？

> ID：11391183
> 
> 赞同：4
> 
> 时间：2012-07-09T08:06:53.370
> 
> 标签：redmine, redmine-plugins

我正在使用 Redmine 1.4，我想将相同的子任务添加到一组问题中。

例如，我有 10 个新错误，我想将子任务“检查问题”和子任务“修复问题”添加到所有错误中。

是否有任何插件或技术可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-09T08:11:42.017

您可以使用批量编辑关闭多个问题。

从问题列表中选择要更改状态的所有问题（复选框）

![在此处输入图像描述](../Images/9be6c9e096319ee33c35335ac0e3df74.png)

从 AJAX 菜单中选择编辑，您可以选择状态并一次更新多条记录

![在此处输入图像描述](../Images/55c786efa51e5463761d50045b587f6b.png)

谢谢

欲了解更多详情，您可以访问...

[http://www.redmine.org/boards/2/topics/7908](http://www.redmine.org/boards/2/topics/7908)

# c# - 获取选定行的选定第一列值

> ID：11391185
> 
> 赞同：0
> 
> 时间：2012-07-09T08:07:17.037
> 
> 标签：c#, wpf, listview, selecteditem

在这种模式下，我有一个带有多列声明的列表视图：

```
 <ListView Grid.Column="1" Height="100" HorizontalAlignment="Left" Margin="12,449,0,0" Name="lstFilesInFolder" VerticalAlignment="Top" Width="453" SelectionChanged="lstFilesInFolder_SelectionChanged" MouseDoubleClick="lstFilesInFolder_MouseDoubleClick" ItemsSource="{Binding}">
        <ListView.Effect>
            <DropShadowEffect BlurRadius="15" Color="Black" Opacity="1"></DropShadowEffect>
        </ListView.Effect>
        <ListView.View>
            <GridView>
                <GridViewColumn DisplayMemberBinding="{Binding Path}" Width="325" Header="File Path" />
                <GridViewColumn  DisplayMemberBinding="{Binding Code}" Width="100" Header="Code" />
            </GridView>
        </ListView.View>
    </ListView> 
```

我在这种模式下以编程方式添加元素：

```
 lstFilesInFolder.Items.Add(new { Path = listFiles[i] }); 
```

它的功能正确。但我想检索列表视图的选定项目的路径？我已阅读更多文章和帖子，但我不知道如何检索元素。请帮我！

消息：

如果我尝试此代码，我会收到所选行的数据：

```
ItemCollection listitem = lstFilesInFolder.Items;
        List lst = new List();
        MessageBox.Show(listitem.GetItemAt(lstFilesInFolder.SelectedIndex).ToString()); 
```

现在我只想检索第一列。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T09:35:28.053

如果这是你真正想要的，你可以肯定地做到这一点......

```
for (int conditionVar = 0; conditionVar < listView1.Items.Count; conditionVar++)
{
   String firstValue =  listView1.Items[conditionVar].Text.ToString();
   String secondValue = listView1.Items[conditionVar].SubItems[1].Text.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:18:29.780

这是一个示例`listView`

![在此处输入图像描述](../Images/334a3165e44b9f6a2a4bd5b60f4ae0f0.png)

如果你想得到`First Value`. 像这样做：

```
string item = lstFilesInFolder.Items[lstFilesInFolder.FocusedItem.Index].Text; 
```

但如果你想要第二个值，你需要指定它`SubItem`

```
string item = 
   lstFilesInFolder.Items[lstFilesInFolder.FocusedItem.Index].SubItems[1].Text; 
```

# jquery - JQuery 和 textarea 宽度：css() 方法

> ID：11391193
> 
> 赞同：0
> 
> 时间：2012-07-09T08:08:06.217
> 
> 标签：jquery, css, textarea

我在 JQuery 对话框中有一个带有 tinyMCE 的文本区域。

这是我创建它的方法：

```
tinyMCE.init({ mode: 'none', });    
var paragraphDialog = $('#paragraph_dialog');       
$('<textarea/>').attr('id', 'txt_paragraph');
txtAreaParagraph = $('<textarea/>');    
paragraphDialog = $('<div/>').attr('id', 'paragraph_dialog');
txtAreaParagraph.appendTo(paragraphDialog);

paragraphDialog.dialog({
    height: 300,
    width: 800,
    modal: true,
open: function ()
    {
    if ($('#txt_paragraph_parent', $(this)).length == 0)
        {
        var ddd = {mode:'none'};
        txtAreaParagraph.tinymce(ddd);
        }
    }; 
```

现在，我想设置 textarea 的宽度属性。

我努力了

```
$('<textarea/>').css('width', '700px'); 
```

和

```
$('<textarea/>').css('width', '700'); 
```

但它们都不起作用。

非常感谢您对我的问题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:25:36.677

尝试这个

```
txtAreaParagraph = $('<textarea/>');  
txtAreaParagraph.css('width', '700px'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:10:07.543

您需要删除标签，请执行以下操作：

```
$('textarea').css('width', '700'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:27:57.623

尝试像这样将宽度参数添加到 tinyMCE.init 函数。

```
tinyMCE.init({width: "800", mode: 'none', });    
var paragraphDialog = $('#paragraph_dialog');       
$('<textarea/>').attr('id', 'txt_paragraph');
txtAreaParagraph = $('<textarea/>');    
paragraphDialog = $('<div/>').attr('id', 'paragraph_dialog');
txtAreaParagraph.appendTo(paragraphDialog);

paragraphDialog.dialog({
    height: 300,
    width: 800,
    modal: true,
open: function ()
    {
    if ($('#txt_paragraph_parent', $(this)).length == 0)
        {
        var ddd = {width: "800", mode:'none'};
        txtAreaParagraph.tinymce(ddd);
        }
    }; 
```

# google-app-engine - Google App Engine 实例生命周期

> ID：11391194
> 
> 赞同：0
> 
> 时间：2012-07-09T08:08:17.060
> 
> 标签：google-app-engine

例如，
First instance 维护了一个 count 变量（init 值为 0），在它服务了 10 个请求后，count 增加到 10。然后没有更多的请求，因此应用引擎关闭了第一个实例。
之后，创建第二个实例来处理传入请求。
我的问题是计数变量将是 10 还是重置为初始值 (0) ？
如果它被重置，有没有办法避免这种情况？（除了手动使用数据存储）？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:38:10.527

我假设您正在谈论一个全局/模块级变量，该变量由每个请求递增。答案是每个实例都在自己的进程中运行，因此后续实例不仅会从零开始，而且由于您可以同时运行多个实例，因此每个实例都有自己独立的计数器。

正确的方法是使用[memcache](https://developers.google.com/appengine/docs/python/memcache/overview)来存储密钥，这将是所有实例中的单个值。您可以`memcache.incr('counter')`自动增加值。

如果持久化数据很重要，您可以考虑存储[分片计数器](https://developers.google.com/appengine/articles/sharding_counters)。

# c# - 在后面的代码中添加资源

> ID：11391201
> 
> 赞同：0
> 
> 时间：2012-07-09T08:08:34.150
> 
> 标签：c#, .net, wpf, xaml, resources

我尝试搜索如何在后面的代码中添加资源。需要在后面的代码中添加以下内容

```
 <DockManager:XamDockManager.Resources>

                <SolidColorBrush x:Key="{x:Static DockManager:DockManagerBrushKeys.TabbedListActiveTextFillKey}" Color="Green"/>
                <SolidColorBrush x:Key="{x:Static DockManager:DockManagerBrushKeys.TabbedListNotActiveTextFillKey}" Color="Pink"/>

        </DockManager:XamDockManager.Resources> 
```

Dockmanager 是在后面的代码中创建的

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:38:11.177

怎么样

```
var foo = new Foo();
XamDockManager dm = new XamDockManager...
dm.Resources.Add("foo", foo); 
```

另请参阅：http: [//msdn.microsoft.com/en-us/library/ms752326.aspx](http://msdn.microsoft.com/en-us/library/ms752326.aspx)

# android - 如何检查触摸事件

> ID：11391204
> 
> 赞同：0
> 
> 时间：2012-07-09T08:08:57.377
> 
> 标签：android

我搜索检查我触摸屏幕的方式，然后将信息发送到触摸事件的方法。我想检查我是用一根手指还是两根手指触摸屏幕，还是在屏幕上移动手指。这是在应用程序执行某些操作之前检查我的手指在屏幕上做什么的任何方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:22:21.413

我想你可以试试这个。

拖动手势在第一根手指按下屏幕时开始（**ACTION_DOWN**），在移除时结束（**ACTION_UP**或**ACTION_POINTER_UP**）。

```
switch (event.getAction() & MotionEvent.ACTION_MASK) {
     case MotionEvent.ACTION_DOWN:
         savedMatrix.set(matrix);
         start.set(event.getX(), event.getY());
         Log.d(TAG, "mode=DRAG" );
         mode = DRAG;
         break;
     case MotionEvent.ACTION_UP:

     case MotionEvent.ACTION_POINTER_UP:
         mode = NONE;
         Log.d(TAG, "mode=NONE" );
         break;
     case MotionEvent.ACTION_MOVE:
         if (mode == DRAG) {
             matrix.set(savedMatrix);
             matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
         }
         break;
} 
```

有关完整信息，请[在此处查看](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-5-implementing-the-drag-gesture/1789)

```
 (or) 
```

[在此处](http://developer.android.com/guide/topics/ui/drag-drop.html)查看文件

# asp.net-mvc-3 - Asp.net MVC3 下拉列表验证

> ID：11391205
> 
> 赞同：0
> 
> 时间：2012-07-09T08:08:58.293
> 
> 标签：asp.net-mvc-3, validation, html-select

模型：

```
public class Product
{
    public string Title { get; set; }

    [Required]
    public int CategoryId { get; set; } 
    //or
    public int? CategoryId { get; set; } 
} 
```

控制器：

```
ViewBag.Categories = db.Categories.ToList(); 
```

看法：

```
@Html.DropDownListFor(m => m.CategoryId , new SelectList(ViewBag.Categories , "CategoryId ", "Title"),"")
@Html.ValidationMessageFor(model => model.CategoryId ) 
```

我有客户端验证

但在 Microsoft Default Scaffolding 中：

控制器：

```
ViewBag.CategoryId = new SelectList(db.Categories, "CategoryId ", "Title"); 
```

看法：

```
@Html.DropDownList("CategoryId" ,"") 
```

这是非常好的和干净的代码。但客户端验证不起作用。如何使用 Microsoft 默认的脚手架语法并且我有客户端验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:32:23.497

只需让您 CategoryId 属性可以为空

```
[Required]
public int? CategoryId { get; set; } 
```

# java - 导出后 Java Eclipse 项目出现问题

> ID：11391216
> 
> 赞同：0
> 
> 时间：2012-07-09T08:09:52.717
> 
> 标签：java, eclipse

我已经为学校做这个 Java 项目好几个星期了，几天前我完成了它。它是一个数据库管理员软件，旨在运行 Access 数据库，在本例中是我学校的数据库。在 Eclipse IDE 中一切正常，显示 0 个错误，0 个警告。然后，当我导出导出的文件时，我也没有收到任何错误，但是当我打开项目时，菜单的 6 个按钮中只有 2 个有效。菜单有 6 个按钮。5个与Access连接并显示不同的数据，其中只有一个起作用，另一个起作用的选项卡是退出按钮。因此，我在 cmd 中运行导出的程序以获得更精确的错误，然后弹出此日志。

```
C:\Users\IVAN>java -jar prueba.jar
consulta busar registro: SELECT * FROM StudentsAbsences ORDER BY Id;
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
        at javax.swing.ImageIcon.<init>(Unknown Source)
        at ModificarAlumno.getCancelar_btn(ModificarAlumno.java:199)
        at ModificarAlumno.getJContentPane(ModificarAlumno.java:385)
        at ModificarAlumno.initialize(ModificarAlumno.java:310)
        at ModificarAlumno.<init>(ModificarAlumno.java:298)
        at Menu$4.actionPerformed(Menu.java:127)
        at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
        at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Sour
ce)
        at java.awt.Component.processMouseEvent(Unknown Source)
        at javax.swing.JComponent.processMouseEvent(Unknown Source)
        at java.awt.Component.processEvent(Unknown Source)
        at java.awt.Container.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$000(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source) 
```

我是 stackoverflow 的新手，真的从未使用过这个问答网页，所以我不确定我是否必须发布其他内容。我必须在星期二交上工作项目，所以我很着急。任何帮助表示赞赏，如果您需要有关该项目的更多信息，请告诉我，我会尽快发布。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:23:30.737

看起来下面的代码正在抛出 NullPointerException。

```
 at javax.swing.ImageIcon.<init>(Unknown Source)
    at ModificarAlumno.getCancelar_btn(ModificarAlumno.java:199) 
```

这意味着在 ModificarAlumno.getCancelar_btn() 中，您正在构建一个新的 ImageIcon，并且在其构造函数中抛出异常。可能是导出后图像没有正确加载吗？如果这没有帮助，请发布其他代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:13:15.397

如果程序在 Eclipse 内部工作但不在外部工作，请检查两件事：

1.  在您的代码中查找您在文件系统上硬编码图像和其他文件等位置的位置。在另一台计算机上，这些位置可能会改变。

2.  导出 jar 默认只导出 java 类。如果您有作为程序一部分的非 java 文件，请确保您配置导出和构建向导以导出/构建这些文件。

# php - 计算不同的编号：数据库中列中的字符串

> ID：11391220
> 
> 赞同：0
> 
> 时间：2012-07-09T08:10:20.367
> 
> 标签：php, mysql

我有一个带有名称的表`users`和一个名为`source`. 该列包含 3 种不同类型的值，它们是字符串（facebook、google、yahoo）。现在我需要计算该列中有多少 Facebook 字符串、google 字符串和 yahoo 字符串。

使用php查询有什么简单的方法吗？

我如何才能显示数字！！！！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:36:19.317

您可以使用此解决方案。这会将计数放入单独的列中，因此您可以轻松地引用 php 中不同字符串的计数：

```
SELECT
    COUNT(CASE WHEN source = 'facebook' THEN 1 END) AS facebook_count,
    COUNT(CASE WHEN source = 'google' THEN 1 END) AS google_count,
    COUNT(CASE WHEN source = 'yahoo' THEN 1 END) AS yahoo_count
FROM
    users 
```

**编辑**：根据您对此答案的评论...关于如何使用 php 检索这些值，如下所示：

```
$sql = "
    SELECT
        COUNT(CASE WHEN source = 'facebook' THEN 1 END) AS facebook_count,
        COUNT(CASE WHEN source = 'google' THEN 1 END) AS google_count,
        COUNT(CASE WHEN source = 'yahoo' THEN 1 END) AS yahoo_count
    FROM
        users";

$social = mysql_query($sql);

while($row = mysql_fetch_assoc($social))
{
    echo "FB Count: {$row['facebook_count']}" . '<br />';
    echo "Google Count: {$row['google_count']}" . '<br />';
    echo "Yahoo Count: {$row['yahoo_count']}";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:11:40.660

试试这个：

```
 Select source, count(1) from users where source like 'facebook' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:11:54.457

```
select source, count(source) from users group by source 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T08:26:54.693

如果您的`source`列不是可选字段，那么您可以像这样简单地使用，

```
select source as source_name, count(*) as counts from users group by source 
```

否则你可以使用like，

```
select source as source_name, count(source) as counts from users group by source 
```

# c# - 将事件标记为 DataContractSerializer 的 NonSerializable

> ID：11391223
> 
> 赞同：0
> 
> 时间：2012-07-09T08:10:25.637
> 
> 标签：c#, events, datacontractserializer

我在 RelayCommand 的实现中有以下事件：

```
public event EventHandler CanExecuteChanged
{
  add { CommandManager.RequerySuggested += value; }
  remove { CommandManager.RequerySuggested -= value; }
} 
```

现在我正在使用`DataContractSerializer`. 我知道在使用`DataContractSerializer`所有事件时必须将其标记为`[field:NonSerialized]`. 但在这种情况下，这不起作用，因为我的`CanExecuteChanged`Event 只是一个没有私有字段的属性。

如何将此属性标记为`NonSerializable`？

**编辑：**

这是整个 RelayCommand 类：

```
[DataContract]
public class RelayCommand : ICommand
{

  [field:NonSerialized]
  readonly Action<object> _execute;

  [field:NonSerialized]
  readonly Predicate<object> _canExecute;

  public RelayCommand(Action<object> execute)
    : this(execute, null)
  {
  }

  public RelayCommand(Action<object> execute, Predicate<object> canExecute)
  {
    if (execute == null)
      throw new ArgumentNullException("execute");

    _execute = execute;
    _canExecute = canExecute;
  }

  [DebuggerStepThrough]
  public bool CanExecute(object parameters)
  {
    return _canExecute == null ? true : _canExecute(parameters);
  }

  public event EventHandler CanExecuteChanged
  {
    add { CommandManager.RequerySuggested += value; }
    remove { CommandManager.RequerySuggested -= value; }
  }

  public void Execute(object parameters)
  {
    _execute(parameters);
  }
} 
```

当我尝试执行时，`DataContractSerializer`出现以下错误：

> 不应使用数据合同名称“RelayCommand:http://schemas.datacontract.org/2004/07/MyNamespace”键入“MyNamespace.RelayCommand”。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:53:31.767

这就是我从[您在评论中给我的链接](https://stackoverflow.com/questions/3476595/datacontractserializer-problem-with-events-delegate-fields)更新示例的方式：

```
[Serializable]
public abstract class BaseClass
{
    public string Name { get; set; }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }
}

public class DerivedClass : BaseClass
{
    public int Age { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var derivedClass = new DerivedClass { Name = "Test", Age = 10 };
        derivedClass.CanExecuteChanged += (sender, eventArgs) => Console.WriteLine("hello");

        var serializer = new DataContractSerializer(typeof(DerivedClass));
        using (var stream = new FileStream("d:\\test.txt", FileMode.Create, FileAccess.ReadWrite))
        {
            serializer.WriteObject(stream, derivedClass);
        }
    }
} 
```

它毫无例外地工作。

# iphone - 当我触摸 tableview 内的按钮时，它会自动转到 TabGesture 方法，但我想要按钮触摸方法？

> ID：11391224
> 
> 赞同：2
> 
> 时间：2012-07-09T08:10:31.033
> 
> 标签：iphone, ios, uitableview, uibutton

目前我正在使用简单的 iPhone 应用程序，使用 UITableview 输入 Emp_Name、Emp_Salary 等字段，并使用 UIButton 设置复选框等图像并设置目标并执行选择器，当我触摸复选框按钮时，它会自动进入 UITabGesture 方法但不包含在按钮触摸方法中。如何解决这个问题，请帮助我

我试过源代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
 UITapGestureRecognizer  *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeFrom:)];
    [recognizer setNumberOfTouchesRequired:1];
    recognizer.cancelsTouchesInView = NO;
    [[self view] addGestureRecognizer:recognizer];
    [recognizer release]; 
}

-(void)handleSwipeFrom:(UISwipeGestureRecognizer *)recognizer // TabGesture method
{
    NSLog(@"Tab received.");
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

 if (indexPath.section == 0 && indexPath.row == 0) 
    {

        perlessonCheckButton = [UIButton buttonWithType:UIButtonTypeCustom];
        perlessonCheckButton.frame = CGRectMake(5, 5, 30, 30); 
        [perlessonCheckButton setImage:[UIImage imageNamed:@"tickAltered1.png"] forState:UIControlStateNormal];
        [perlessonCheckButton addTarget:self action:@selector(showPerLessonOptions) forControlEvents:UIControlEventTouchUpInside];
        [perlessonCheckButton setBackgroundColor:[UIColor lightTextColor]]; 
        [perlessonCheckButton setUserInteractionEnabled:NO];
        [cell.contentView addSubview:perlessonCheckButton];

    }
}

-(void) showPerLessonOptions // Button method
{
    [perlessonCheckButton setUserInteractionEnabled:NO];
    [flatFeeCheckButton setUserInteractionEnabled:YES];

    [perlessonCheckButton setImage:[UIImage imageNamed:@"tickAltered1.png"] forState:UIControlStateNormal];
    [flatFeeCheckButton setImage:[UIImage imageNamed:@"untickAltered1.png"] forState:UIControlStateNormal];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:38:49.527

我认为问题在于这条线，

```
[perlessonCheckButton setUserInteractionEnabled:NO]; 
```

上面的行禁用了用户交互。改成，

```
[perlessonCheckButton setUserInteractionEnabled:YES]; 
```

如果上述方法不起作用，那么您可以向按钮添加手势识别器。

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showPerLessonOptions:)];
[perlessonCheckButton  addGestureRecognizer:tap];
[perlessonCheckButton setUserInteractionEnabled:YES]; 
```

有关[UITapGestureRecognizer的更多信息](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:14:45.060

```
-(void)handleSingleTap:(UIGestureRecognizer *)gestureRecognizer
{
    CGPoint tapLocation = [gestureRecognizer locationInView:self.view];

    if(CGRectContainsPoint(yourButton.frame, tapLocation))
    {
      [self showPerLessonOptions];
    }
} 
```

# c# - 使用 foreach 将项目添加到列表视图中的列/行

> ID：11391225
> 
> 赞同：1
> 
> 时间：2012-07-09T08:10:35.517
> 
> 标签：c#, listview, foreach, itemscontrol

我进入了学习 c# 的第 5 天，并试图弄清楚如何使用 foreach 循环填充/重新填充包含 10 行和 12 列的 ListView 控件。我已经用 C 编写了我想要的功能。

```
void listPopulate(int *listValues[], int numberOfColumns, int numberOfRows)
{
    char table[100][50];
    for (int columnNumber = 0; columnNumber < numberOfColumns; ++columnNumber)
    {
        for (int rowNumber = 0; rowNumber < numberOfRows; ++rowNumber)
        {
            sprintf(&table[columnNumber][rowNumber], "%d", listValues[columnNumber][rowNumber]);
            // ...
        }
    }
} 
```

这是我到目前为止所知道的：

```
public void listView1_Populate()
{

    ListViewItem item1 = new ListViewItem("value1");
    item1.SubItems.Add("value1a");
    item1.SubItems.Add("value1b");

    ListViewItem item2 = new ListViewItem("value2");
    item2.SubItems.Add("value2a");
    item2.SubItems.Add("value2b");

    ListViewItem item3 = new ListViewItem("value3");
    item3.SubItems.Add("value3a");
    item3.SubItems.Add("value3b");
    ....

    listView1.Items.AddRange(new ListViewItem[] { item1, item2, item3 });
} 
```

我假设我必须在单独的步骤中创建列表项。所以我的问题是：在 C# 中必须有一种方法可以使用 for 或 foreach 循环来做到这一点，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:44:12.043

我不确定我是否理解正确，但这是我认为你需要的......

实际上，这取决于您`DataSource`使用哪个来填充`ListView`. 像这样的东西（我在`Dictioanry`这里用作数据源） -

```
 // Dictinary DataSource containing data to be filled in the ListView
        Dictionary<string, List<string>> Values = new Dictionary<string, List<string>>()
        {
            { "val1", new List<string>(){ "val1a", "val1b" } },
            { "val2", new List<string>(){ "val2a", "val2b" } },
            { "val3", new List<string>(){ "val3a", "val3b" } }
        };

        // ListView to be filled with the Data
        ListView listView = new ListView();

        // Iterate through Dictionary and fill up the ListView
        foreach (string key in Values.Keys)
        {
            // Fill item
            ListViewItem item = new ListViewItem(key);

            // Fill Sub Items
            List<string> list = Values[key];
            item.SubItems.AddRange(list.ToArray<string>());

            // Add to the ListView
            listView.Items.Add(item);
        } 
```

为了您的理解，我已经简化了代码，因为有几种方法可以遍历`Dictionary`...

希望能帮助到你！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:53:57.453

您执行此操作几乎与在 C 中完全相同。只需遍历集合...

```
int i = 0;
foreach (var column in listValues)
{
    var item = new ListViewItem("column " + i++);
    foreach (var row in column)
    {
        item.SubItems.Add(row);
    }        
    listView1.Items.Add(item);
} 
```

如果不看你的集合是什么样子，很难提供一个真实的例子，但是对于数组数组，这将起作用。

# mobile - 用于小任务的平台独立移动开发 SDK

> ID：11391226
> 
> 赞同：1
> 
> 时间：2012-07-09T08:10:35.970
> 
> 标签：mobile, cordova, titanium, appcelerator, appcelerator-mobile

我想创建一个可以在多个移动操作系统上运行的手机应用程序。稍微浏览一下，很明显我可以使用像[Phonegap](http://www.phonegap.com/)或[Appcelerator](http://www.appcelerator.com/)这样的 SDK，这样我的应用程序就可以在任何移动操作系统上运行。我的问题是我不知道应该使用哪个 SDK？我对我的应用程序所要求的只是
1\. 它应该在移动设备上 24x7 运行。
2.它应该可以访问手机的GPS功能。
3\. 它应该发送一个数据字符串到一个指定的服务器。

我应该使用 Phonegap 或 Appcelerator 还是他们的任何其他更好的 SDK 来完成这个小任务？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:24:59.937

最好使用 Appcelerator Titan，因为它为您的应用程序提供了原生外观……因为该应用程序将在 javascript 中实现。

请通过此链接

[http://docs.appcelerator.com/titanium/2.1/index.html](http://docs.appcelerator.com/titanium/2.1/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:04:54.420

Phonegap 适用于 7 个移动平台，而 Appcelerator 则适用于 2 个移动平台

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T03:09:54.297

我想说，根据我自己的经验，为了创建具有原生外观/感觉和原生性能的多平台应用程序，最好使用 Appcelerator Titanium。

在 iOS 和 Android 上运行应用程序非常容易，只需对代码进行最少的更改。

Titanium (JavaScript) 或 PhoneGap 和 Sencha Touch (HTML/CSS/JavaScript) 的组合都适合您的目的，但是，如上所述，我建议使用 Titanium 来获得原生感觉。

# facebook - 通过 facebook Graph API 使用 RTL 和 LTR 词发布链接

> ID：11391233
> 
> 赞同：0
> 
> 时间：2012-07-09T08:11:12.273
> 
> 标签：facebook, facebook-graph-api, right-to-left

一旦我通过 Graph API 发布了一个包含希伯来语 (RTL) 和英语 (LTR) 单词组合的链接，它就会切换单词并且文本会被反转。

有什么解决办法吗？

假设 $x 和 $y 的输入是由 Heb 和 Eng 单词组合而成的文本：

```
$attach = array('link' => $link, 'name' =>  stripslashes($x) ,  , 'description' => stripslashes($y), 'message' => stripslashes($z));

$statusUpdate = $facebook->api("/{$myid}/links", "post", $attach ); 
```

# iphone - 使用 UIImage 或 Code 绘制高亮蓝色

> ID：11391236
> 
> 赞同：0
> 
> 时间：2012-07-09T08:11:25.107
> 
> 标签：iphone, ios, xcode, uiimage, uibutton

来自[http://replyz.com/c/1244746-does-anyone-know-the-exact-cgcolorref-used-to-create-the-selection-highlight-when-using-uitableviewcellselectionstyleblue#](http://replyz.com/c/1244746-does-anyone-know-the-exact-cgcolorref-used-to-create-the-selection-highlight-when-using-uitableviewcellselectionstyleblue#)

我看到有人用 Code 做的，他说突出显示的颜色来自 UIImage。

我在哪里可以找到图像？

（我想用 UITableViewCellSelectionStyleBlue 颜色突出显示一个 UIButton）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:58:19.470

我找到了链接[http://replyz.com/c/1244746-does-anyone-know-the-exact-cgcolorref-used-to-create-the-selection-highlight-when-using-uitableviewcellselectionstyleblue#](http://replyz.com/c/1244746-does-anyone-know-the-exact-cgcolorref-used-to-create-the-selection-highlight-when-using-uitableviewcellselectionstyleblue#)包括一些代码可用于创建高光。我用代码创建了一个新的 UIImage。

这是代码：

```
+ (UIImage *) imageForSelectedBlue {
    CGRect rect = CGRectMake(0, 0, 10, 10);
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();

    size_t num_locations = 2;
    CGFloat locations[2] = { 0.0, 1.0 };
    CGFloat components[8] = { 0.021, 0.548, 0.962, 1.000, 0.008, 0.364, 0.900, 1.000 };

    CGColorSpaceRef rgbColorspace = CGColorSpaceCreateDeviceRGB();
    CGGradientRef selectionGradient = CGGradientCreateWithColorComponents(rgbColorspace, components, locations, num_locations);

    CGPoint startPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMinY(rect));
    CGPoint endPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMaxY(rect));

    CGContextDrawLinearGradient(context, selectionGradient, startPoint, endPoint, 0);

    CGGradientRelease(selectionGradient);
    CGColorSpaceRelease(rgbColorspace);

    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:20:11.920

实际上，您可以设置按钮的背景图像。它更有效。

```
[button setBackgroundImage:buttonBackgroundPressed forState:UIControlStateHighlighted]; 
```

# c# - Outlook 插件错误：未加载。加载 COM 加载项期间发生运行时错误

> ID：11391241
> 
> 赞同：5
> 
> 时间：2012-07-09T08:11:49.167
> 
> 标签：c#, vsto, outlook-addin, outlook-2010

我创建了一个 VSTO Outlook 插件。配置如下：

*   视觉工作室 2008
*   Office 2007 Outlook 插件（3.5 框架）
*   使用 Visual Studio 安装项目创建的 MSI
*   windows 7下部署到Office 2010

它在 Dev PC 上运行良好，但是一旦安装在测试机器上就无法加载。Outlook 插件窗口显示一个`"Not loaded. A runtime error occurred during loading of COM add-in"`

据我了解，我不需要安装任何 PIA，因为 Office 2007 PIA 是 Office 2010 的一部分。

到目前为止，我已经尝试了以下方法：

*   set`VSTO_SUPPRESSDISPLAYALERTS`但是它在尝试启动时不显示任何消息。
*   已配置`Fuslogvw.exe`（程序集绑定日志查看器），但未显示任何绑定错误。
*   设置`VTSO_LOGALERTS`并且它正在记录所有警报但是因为没有显示这没有帮助。

除了使这项工作之外，我还有什么做错或需要做的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T18:59:51.267

确保在测试机器上安装了[VSTO 3.0 运行时。](http://www.microsoft.com/en-us/download/details.aspx?id=23656)

如果您正在运行 Visual Studio 2008 Service Pack 1，您还需要安装[VSTO 3.0 Runtime Service Pack 1。](http://www.microsoft.com/en-us/download/details.aspx?id=1132)

您的情况不需要[VSTO 4.0 运行时，因为它与使用 Visual Studio 2010 创建的加载项一起使用。请注意，VSTO 和运行时的版本通常必须与用于创建加载项的 Visual Studio 版本一致。](http://www.microsoft.com/en-us/download/details.aspx?id=20479)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:45:26.077

这里有几个有用的站点（我不会复制和粘贴他们关于故障排除的建议） [http://www.ceptara.com/node/183](http://www.ceptara.com/node/183)

[http://blogs.msdn.com/b/vsod/archive/2008/04/22/troubleshooting-com-add-in-load-failures.aspx](http://blogs.msdn.com/b/vsod/archive/2008/04/22/troubleshooting-com-add-in-load-failures.aspx)

# magento - 在特定页面上为已登录客户设置模板？

> ID：11391248
> 
> 赞同：1
> 
> 时间：2012-07-09T08:12:24.053
> 
> 标签：magento

我遇到了 Magento xml 布局的问题。我一直在尝试在客户登录时更改页面模板，但仅限于布局中的特定页面。我尝试`<customer_logged_in>`在我的 xml 中使用句柄，但我无法让它专门引用另一个句柄。

我想要它做的非工作示例：

```
<catalog_product_view>
    <customer_logged_in>
        <reference name="root">
            <action method="setTemplate"><template>page/3columns.html</template></action>
        </reference>
    </customer_logged_in>
    <customer_logged_out>
        <reference name="root">
            <action method="setTemplate"><template>page/2columns-left.html</template></action>
        </reference>
    </customer_logged_out>
</catalog_product_view> 
```

这是否可以通过 XML 布局系统来完成，还是我应该考虑另一种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:00:23.013

不幸的是，对于 Magento 布局，没有办法在两个布局句柄之间进行过滤。

我会推荐的是稍微不同且更复杂的，但我相信它会给你你需要的灵活性。

**您将需要创建一个模块来执行此操作。**我包含了执行此操作所需的所有代码。

### 模块定义：

`app/etc/Your_Module.xml`

```
<config>
    <modules>
        <Your_Module>
            <codePool>local</codePool>
            <active>true</active>
        </Your_Module>
    </modules>
</config> 
```

### 配置 XML：

`app/code/local/Your/Module/etc/config.xml`：

```
<config>
    <global>
        <modules>
            <Your_Module>
                <version>1.0</version>
            </Your_Module>
        </modules>
    </global>
    <frontend>
        <controller_action_layout_generate_blocks_after>
            <observers>
                <your_module_name>
                    <type>singleton</type>
                    <class>Your_Module/Observer</class>
                    <method> controllerActionLayoutGenerateBlocksAfter</method>
                </your_module_name>
            </observers>
        </controller_action_layout_generate_blocks_after>
    </frontend>
</config> 
```

### 使它工作的代码

然后在这条路径`app/code/local/Your/Module/Model/Observer.php`：

```
<?php

class Your_Module_Model_Observer
{
    public function controllerActionLayoutGenerateBlocksAfter ($observer)
    {
        $controller = $observer->getAction();

        if ($controller->getFullActionName() == 'catalog_product_view') {
            $layout = $controller->getLayout();
            $rootBlock = $layout->getBlock('root');

            if (Mage::getSingleton('customer/session')->isLoggedIn()) {
                $rootBlock->setTemplate('page/1-column.html');
            } else {
                $rootBlock->setTemplate('page/2-columns.html');
            }
        }
    }
} 
```

（我从中获得了一些提示：[在 magento 事件观察器中以编程方式更新布局](https://stackoverflow.com/questions/12458611/update-layout-programatically-in-magento-event-observer)）

# oracle - JSP CODE dbms 混淆工具包.DESEncrypt DECRYPT Oracle

> ID：11391249
> 
> 赞同：0
> 
> 时间：2012-07-09T08:12:26.870
> 
> 标签：oracle, jsp, encryption, obfuscation

我正在从 oracle 数据库中解密密码，用于登录页面，以验证用户名和密码。它是一个简单的 JSP 页面：

```
<HTML>
<BODY>

<%
    Class.forName("oracle.jdbc.OracleDriver");

        Connection conn =     DriverManager.getConnection("jdbc:oracle:thin:@xxx:xxxx:xxxx","i----r","i-----r");
                        // @//machineName:port:SID,   userid,  password

    Statement st=conn.createStatement();

    ResultSet rs=st.executeQuery("Select * from xxxxxxx");

    //Just testing now, for decryption

    String algorithm1 = "DES";//magical mystery constant
    String algorithm2 = "DES/CBC/NoPadding";//magical mystery constant
    IvParameterSpec iv = new IvParameterSpec( new byte [] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 } );//magical mystery constant
    Cipher cipher;
    SecretKey key;
    String k="12345abc";
    key = new SecretKeySpec( k.getBytes( ), algorithm1 );
    cipher = Cipher.getInstance( algorithm2 );

    String str="test1234abc";

    cipher.init( Cipher.ENCRYPT_MODE, key, iv ); //normally you could leave out the IvParameterSpec argument, but not with Oracle

    byte[] bytes=str.getBytes("UTF-8");

    byte[] encrypted = cipher.doFinal( bytes );

%>
</BODY>
</HTML> 
```

我面临的问题是一切正常，但最后一行代码`byte[] encrypted = cipher.doFinal( bytes );`给了我一个错误：

```
javax.crypto.IllegalBlockSizeException: Input length not multiple of 8 bytes
at com.sun.crypto.provider.SunJCE_h.a(DashoA6275)
at com.sun.crypto.provider.SunJCE_h.b(DashoA6275)
at com.sun.crypto.provider.SunJCE_h.b(DashoA6275)
at com.sun.crypto.provider.DESCipher.engineDoFinal(DashoA6275)
at javax.crypto.Cipher.doFinal(DashoA6275)
at _check1._jspService(_check1.java:83) [SRC:/check1.jsp:45]
at com.orionserver[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].http.OrionHttpJspPage.service(OrionHttpJspPage.java:56)
at oracle.jsp.runtimev2.JspPageTable.compileAndServe(JspPageTable.java:569)
at oracle.jsp.runtimev2.JspPageTable.service(JspPageTable.java:305)
at oracle.jsp.runtimev2.JspServlet.internalService(JspServlet.java:509)
at oracle.jsp.runtimev2.JspServlet.service(JspServlet.java:413)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:824)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:330)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java:830)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.HttpRequestHandler.run(HttpRequestHandler.java:285)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.HttpRequestHandler.run(HttpRequestHandler.java:126)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:192)
at java.lang.Thread.run(Thread.java:534) 
```

可能是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:41:09.803

错误消息一次有用：将输入字符串填充为 8 个字节的倍数。

使用[`Arrays.copyOf(byte[], int)`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28byte%5B%5D,%20int%29)或用于早期版本：

```
byte[] bytes=str.getBytes("UTF-8");

byte[] bytesPadded = 
   (str
    + new String(new byte[(8  - bytes.length % 8) % 8])
   ).getBytes();

byte[] encrypted = cipher.doFinal( bytesPadded ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:16:21.880

好的，我得到了查询的答案……我正在使用 8 字节加密。所以密码必须是 8 个字符的倍数。因此，通过在登录页面上检查密码必须是 8 个字符的倍数来解决问题。

# ruby - 使用多个请求时如何停止 eventmachine

> ID：11391250
> 
> 赞同：1
> 
> 时间：2012-07-09T08:12:27.930
> 
> 标签：ruby, events, asynchronous, callback, eventmachine

我正在使用 EventMachine 和 em-http-requests 通过 HTTP 对 API 进行批量调用

我不确定在所有回调完成后如何使用 EM.Stop 停止事件机器

假设我进行了 10 次异步批处理调用，我如何在完成第 10 次回调后立即停止 eventmachine？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:58:38.203

[从GitHub 页面](https://github.com/igrigorik/em-http-request/blob/master/examples/fetch.rb)查看[这个示例`em-http-request`](https://github.com/igrigorik/em-http-request/blob/master/examples/fetch.rb)。它完全符合您的要求。

# ssis - 在ssis中将字符串转换为日期

> ID：11391252
> 
> 赞同：1
> 
> 时间：2012-07-09T08:12:56.593
> 
> 标签：ssis

我尝试使用 ssis 中的以下内容将格式为 23/12/2001 的日期转换为 2001-12-23，但我一直收到错误消息。

```
ISNULL(Date_Of_Birth) ? NULL(DT_DBTIMESTAMP) : (DT_DBTIMESTAMP)
(SUBSTRING(Date_Of_Birth,FINDSTRING(Date_Of_Birth,"/",2) + 1,4) + "-" + RIGHT("0" + 
SUBSTRING(Date_Of_Birth,1,FINDSTRING(Date_Of_Birth,"/",1) - 1),2) + "-" + RIGHT("0" + 
SUBSTRING(Date_Of_Birth,FINDSTRING(Date_Of_Birth,"/",1) + 1,FINDSTRING(Date_Of_Birth,"/",2) - 
FINDSTRING(Date_Of_Birth,"/",1)),2)) 
```

我在 todds 博客 (http://toddmcdermid.blogspot.co.uk/2008/11/converting-strings-to-dates-in-derived.html) 上使用了那个，但由于某种原因它似乎对我不起作用。谁能解释我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:36:46.877

也许在脚本任务中编写 .NET 代码来转换日期格式是更好的主意：

```
 Dim dateStr As String = "23/12/2001"
    Dim result As DateTime

    If DateTime.TryParseExact(dateStr, "dd/MM/yyyy", Nothing, Globalization.DateTimeStyles.None, result) Then
        MsgBox(result.ToString("yyyy-MM-dd"))
    End If 
```

# javascript - 如何在正文加载之前使用 javascript 滚动页面？

> ID：11391254
> 
> 赞同：1
> 
> 时间：2012-07-09T08:13:06.510
> 
> 标签：javascript

我正在尝试在正文加载之前将页面滚动 50 像素。但它总是在运行代码之前等待正文加载。

我不太确定是什么原因，我似乎记得在解析它们时运行。

我尝试了 jquery 和纯 javascript，这是我的代码：

```
$(document).scrollTop('50');
window.scrollBy(0,50); 
```

我如何使它在身体负荷之前工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:29:40.197

当您调用事件时没有正文，因此不会发生任何事情，
一种解决方法是将正文的高度设置为一些常数
并在正文标签上添加 onLoad 事件

```
<script>
SomeFunction(){
 //scrollNow
}
</Script>
<body onLoad="SomeFunction()" style="height:500px;"></body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:54:17.287

找到了一种可行的解决方案，也许有人会找到更清洁的解决方案。这甚至可以在加载之前滚动页面：

```
document.writeln('&nbsp;');
document.body.style.height = '5000px';
$(window).scrollTop(50); 
```

[测试脚本在这里](http://pastebin.com/KusECR1p)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T14:45:11.690

```
1\. Create css offset class and assign to the body

    .offset{
         margin-top:-500px;
        }

    So that body will be loaded with 500px offset from top

    2\. Then add following code to the body

        <body class="offset" onLoad="window.scroll(0, 150)">

    3\. then using jquery, remove offset class when page is loaded

        $(document).ready(function(){
         $(".row").removeClass("offset");
        }); 
```

这将工作[http://www.frameinn.com/thatisuday/about](http://www.frameinn.com/thatisuday/about)

# c# - 为什么 ListView 中的计数项目方法不适用于创建 Word 文档方法？

> ID：11391261
> 
> 赞同：0
> 
> 时间：2012-07-09T08:13:55.997
> 
> 标签：c#, asp.net, ajax, listview, printing

我正在使用 Ajax TabContiner，并且在其中一个选项卡中我有一个 ListView。此 ListView 显示数据库中特定表内的所有项目。使用该 ListView，有一种方法可以为 ListView 中的选定项目创建 Word 文档。项目的选择将通过 ListView 第一列中提供的 CheckBox。一切正常。

现在，我想计算该表中的项目数。我写了这个方法，它工作得很好，但它使创建word文档的方法现在工作得很好。例如，在那个特定的选项卡中，我想在其中显示选项卡中项目的数量。如果我想在 Word 文档中打印一些选定的项目。Word 文档将打开，但没有任何数据。我不知道为什么。如果我删除了计数项目方法，它工作得很好。**谁能帮我解决这个问题？**

ASP.NET 代码：

```
 <asp:TabContainer CssClass="ajax__tab_darkblue-theme" ID="TabContainer1" 
                runat="server" ActiveTabIndex="0" 
                             Width="90%" OnInit="counter">

            <asp:TabPanel ID="All_SafetySuggestions_Tab" HeaderText="All" runat="server">
            <ContentTemplate>
                <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>
                    <asp:ListView ID="ListView1" runat="server" DataKeyNames="ID" DataSourceID="SqlDataSource1">
                            <LayoutTemplate>
                                <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                                    <thead>
                                        <tr style="background-color:#C6D7B5;">
                                            <%--<th style="border-right:2px solid white;border-bottom:2px solid #003366; ">LL No.</th>--%>
                                            <th style="border-bottom:2px solid #003366; ">
                                                <asp:CheckBox ID="CheckBox1" runat="server" CssClass="chkBoxPosition" OnCheckedChanged="CheckBoxHeader_All" AutoPostBack="true" />
                                            </th>    
                                            <th style="border-bottom:2px solid #003366; ">Title</th>
                                            <th style="border-bottom:2px solid #003366; ">Description</th>
                                            <th style="border-bottom:2px solid #003366; ">Type</th>
                                            <th style="border-bottom:2px solid #003366; ">Username</th>
                                            <th style="border-bottom:2px solid #003366; ">Name</th>
                                            <th style="border-bottom:2px solid #003366; ">Division</th>
                                            <th style="border-bottom:2px solid #003366; ">Submitted Date</th>
                                            <th style="border-bottom:2px solid #003366; ">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                                </table></div>
                            </LayoutTemplate>
                            <ItemTemplate>
                                <tr>
                                    <td>
                                        <asp:CheckBox ID="CheckBox2" runat="server" />
                                        </td>
                                    <td>
                                        <asp:Label runat="server" ID="lblTitle" Text='<%#Eval("Title") %>'></asp:Label>
                                        </td>
                                    <td>
                                        <asp:Label runat="server" ID="lblDescription" Text='<%#Eval("Description")%>'></asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label runat="server" ID="lblType" Text='<%#Eval("Type")%>'></asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label runat="server" ID="lblUsername" Text='<%#Eval("Username") %>'></asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label runat="server" ID="lblName" Text='<%#Eval("Name") %>'></asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label runat="server" ID="lblDivision" Text='<%#Eval("DivisionShortcut") %>'></asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label runat="server" ID="lblSubmittedDate" Text='<%#Eval("DateSubmitted")%>'></asp:Label>
                                    </td>
                                    <td>
                                        <asp:LinkButton runat="server" ID="lnkSuggestionStatus" Text='<%#Eval("Status")%>'
                                                                OnClick="lnkSuggestionStatus_Click">
                                        </asp:LinkButton>
                                    </td>
                                </tr>
                            </ItemTemplate>                
                    </asp:ListView>
    ...
</asp:TabPanel>
        </asp:TabContainer>

        <asp:Label ID="Label1" runat="server" Text="Lessons as Table"></asp:Label>
        <asp:ImageButton ID="wordBtn" runat="server" ImageUrl="images/Icons/MS_Word_Icon.png" Width="30px" Height="30px" OnClick="creat_word_table"></asp:ImageButton> 
```

代码隐藏：

```
public void counter(object sender, EventArgs e)
    {
        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["testConnectionString"].ConnectionString);
        string[] commands = {
                                "SELECT COUNT(*) FROM SafetySuggestionsLog"
                            };
        int[] SSCount = new int[commands.Length];
        try
        {
            for (int i = 0; i < commands.Length; i++)
            {
                SqlCommand cmd = new SqlCommand(commands[i], conn);
                conn.Open();
                SSCount[i] = (int)cmd.ExecuteScalar();
                conn.Close();
            }
            All_SafetySuggestions_Tab.HeaderText += " (" + SSCount[0] + ")";
        }
        catch (Exception ex) { string ee = ex.Message; }
    }

    public void creat_word_table(object sender, EventArgs e)
    {
        ListView lv = new ListView();

        if (TabContainer1.ActiveTab.HeaderText == "Last Three Months") { lv = Last_Three_Months_ListView; }
        else if (TabContainer1.ActiveTab.HeaderText == "All") { lv = ListView1; }
        //lv.Items.Clear();

        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.Charset = "";
        HttpContext.Current.Response.ContentType = "application/msword";
        string tab_name = TabContainer1.ActiveTab.HeaderText;
        string strFileName = tab_name + ".doc";
        HttpContext.Current.Response.AddHeader("Content-Disposition", "inline;filename=" + strFileName);
        StringBuilder strHTMLContent = new StringBuilder();

        strHTMLContent.Append(" <h1 title='Heading' align='Center' style='font-family:verdana;font-size:80%;color:black'><u>" + tab_name + "</u> </h1>".ToString());
        strHTMLContent.Append("<br>".ToString());
        strHTMLContent.Append("<table cellspacing='0' width='100%' style='border:2px solid #003366; font-size:17px; font-weight:bold;'>".ToString());
        strHTMLContent.Append("<tr>".ToString());
        strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Title</th>".ToString());
        strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Description</th>".ToString());
        strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Type</th>".ToString());
        strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Username</th>".ToString());
        strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Name</th>".ToString());
        strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Division</th>".ToString());
        strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Submitted Date</th>".ToString());
        strHTMLContent.Append("</tr>".ToString());

        for (int i = 0; i < lv.Items.Count; i++)
        {
            CheckBox chk = lv.Items[i].FindControl("CheckBox2") as CheckBox;
            if (chk.Checked)
            {
                strHTMLContent.Append("<tr>".ToString());
                strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblTitle")).Text + "</td>".ToString());
                strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblDescription")).Text + "</td>".ToString());
                strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblType")).Text + "</td>".ToString());
                strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblUsername")).Text + "</td>".ToString());
                strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblName")).Text + "</td>".ToString());
                strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblDivision")).Text + "</td>".ToString());
                strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblSubmittedDate")).Text + "</td>".ToString());
                strHTMLContent.Append("</tr>".ToString());
            }

        }

        strHTMLContent.Append("</table>".ToString());
        strHTMLContent.Append("<br><br>".ToString());

        HttpContext.Current.Response.Write(strHTMLContent);
        HttpContext.Current.Response.End();
        HttpContext.Current.Response.Flush();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:32:29.697

根据您的评论中的要求，这里是您的示例的修改，可以规避由更改标题文本引起的任何问题（这是我对问题的猜测）。

```
public void counter(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["testConnectionString"].ConnectionString);
    string[] commands = {
                            "SELECT COUNT(*) FROM SafetySuggestionsLog"
                        };
    int[] SSCount = new int[commands.Length];
    try
    {
        for (int i = 0; i < commands.Length; i++)
        {
            SqlCommand cmd = new SqlCommand(commands[i], conn);
            conn.Open();
            SSCount[i] = (int)cmd.ExecuteScalar();
            conn.Close();
        }
        All_SafetySuggestions_Tab.HeaderText += " (" + SSCount[0] + ")";
    }
    catch (Exception ex) { string ee = ex.Message; }
}

public void creat_word_table(object sender, EventArgs e)
{
    ListView lv = new ListView();
    // THIS IS WHERE I'VE MADE A CHANGE.  INSTEAD OF == USE STARTSWITH TO ACCOUNT FOR
    // YOUR COUNT METHOD APPENDING HEADER NAMES WITH A COUNT.
    if (TabContainer1.ActiveTab.HeaderText.StartsWith("Last Three Months")) { lv = Last_Three_Months_ListView; }
    else if (TabContainer1.ActiveTab.HeaderText.StartsWith("All")) { lv = ListView1; }
    //lv.Items.Clear();

    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.Charset = "";
    HttpContext.Current.Response.ContentType = "application/msword";
    string tab_name = TabContainer1.ActiveTab.HeaderText;
    string strFileName = tab_name + ".doc";
    HttpContext.Current.Response.AddHeader("Content-Disposition", "inline;filename=" + strFileName);
    StringBuilder strHTMLContent = new StringBuilder();

    strHTMLContent.Append(" <h1 title='Heading' align='Center' style='font-family:verdana;font-size:80%;color:black'><u>" + tab_name + "</u> </h1>".ToString());
    strHTMLContent.Append("<br>".ToString());
    strHTMLContent.Append("<table cellspacing='0' width='100%' style='border:2px solid #003366; font-size:17px; font-weight:bold;'>".ToString());
    strHTMLContent.Append("<tr>".ToString());
    strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Title</th>".ToString());
    strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Description</th>".ToString());
    strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Type</th>".ToString());
    strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Username</th>".ToString());
    strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Name</th>".ToString());
    strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Division</th>".ToString());
    strHTMLContent.Append("<th style='border-bottom:2px solid #003366; '>Submitted Date</th>".ToString());
    strHTMLContent.Append("</tr>".ToString());

    for (int i = 0; i < lv.Items.Count; i++)
    {
        CheckBox chk = lv.Items[i].FindControl("CheckBox2") as CheckBox;
        if (chk.Checked)
        {
            strHTMLContent.Append("<tr>".ToString());
            strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblTitle")).Text + "</td>".ToString());
            strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblDescription")).Text + "</td>".ToString());
            strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblType")).Text + "</td>".ToString());
            strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblUsername")).Text + "</td>".ToString());
            strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblName")).Text + "</td>".ToString());
            strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblDivision")).Text + "</td>".ToString());
            strHTMLContent.Append("<td style='border:1px solid #003366;width: 100px'>" + ((Label)lv.Items[i].FindControl("lblSubmittedDate")).Text + "</td>".ToString());
            strHTMLContent.Append("</tr>".ToString());
        }

    }

    strHTMLContent.Append("</table>".ToString());
    strHTMLContent.Append("<br><br>".ToString());

    HttpContext.Current.Response.Write(strHTMLContent);
    HttpContext.Current.Response.End();
    HttpContext.Current.Response.Flush();
} 
```

# c++ - SetConsoleMode 标志中 ENABLE_PROCESSED_INPUT 的含义

> ID：11391262
> 
> 赞同：2
> 
> 时间：2012-07-09T08:14:02.327
> 
> 标签：c++, winapi

在 windows API 中，有 SetConsoleMode 函数。在众数值中，我无法理解该`ENABLE_PROCESSED_INPUT`值。MSDN 文档说

`ENABLE_PROCESSED_INPUT : value (0x0001)`: `CTRL+C`由系统处理，不放入输入缓冲区。如果输入缓冲区正在被`ReadFile`or读取`ReadConsole`，则系统会处理其他控制键，并且不会在`ReadFile`or`ReadConsole`缓冲区中返回。如果`ENABLE_LINE_INPUT`还启用了该模式，则退格、回车和换行字符由系统处理。

这是否意味着设置此标志时，`CTRL+C`不会将其放入输入缓冲区中（因为它是由系统处理的）？还是其他情况（`CTRL+C`放置在输入缓冲区中）？这个解释让我很困惑..请任何人都可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:21:03.727

这意味着如果设置了标志， `Ctrl`+`C`将不会被放入输入缓冲区`ENABLE_PROCESSED_INPUT`（相反，系统将处理它并将`SIGINT`信号发送到控制台中运行的进程）。

同样的行为也适用于`ENABLE_LINE_INPUT`标志：如果它被设置，像`backspace`,`carriage return`和`line feed`之类的字符不会被放入输入缓冲区并由系统处理（从缓冲区中删除字符并自动处理行尾）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:18:40.817

`ENABLE_PROCESSED_INPUT`: `value (0x0001)`:`CTRL+C`由系统处理，**不放入输入缓冲区。**

所以基本上是的，没有任何东西进入输入缓冲区，因为特殊符号是由系统处理的。

# django - Django 模型管理器相关过滤器

> ID：11391266
> 
> 赞同：3
> 
> 时间：2012-07-09T08:14:30.297
> 
> 标签：django, django-models

我想过滤管理器中的相关条目：

```
class UserTravelsCarsManager(models.Manager):
    def for_user(self, user):
        return super(UserTravelsCarsManager, self).get_query_set().filter(user=user)

class TravelsCars(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=255)
    ...
    objects = UserTravelsCarsManager()

class UserTravelsManager(models.Manager):
    def for_user(self, user):
        return super(UserTravelsManager, self).get_query_set().filter(user=user)

class Travels(models.Model, ClonableMixin):
    user = models.ForeignKey(User)
    vehicle = models.ForeignKey(TravelsCars)
    ...

    objects = UserTravelsManager() 
```

它不会自己工作。我得到所有用户的所有汽车。我试过了：

```
return super(UserTravelsManager, self).get_query_set().filter(user=user, vehicle__user=user) 
```

这也行不通。

更新：只是为了清除条目`Travels`被过滤。如果我`TravelsCars`通过`Travels`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:19:24.450

而不是`super(UserTravelsCarsManager, self).get_query_set().filter...`尝试使用`self.filter(user=user)`. 同样在`UserTravelsManager`

# android - 单击主页按钮时的Android默认屏幕

> ID：11391270
> 
> 赞同：0
> 
> 时间：2012-07-09T08:15:04.417
> 
> 标签：android, android-intent, android-manifest, android-activity

我实现了我的 Android 应用程序的启动画面....我的操作栏中有一个自定义主页按钮，单击该按钮时，它将被重定向到我的仪表板活动而不是我的启动画面..你知道怎么做吗去执行？？我是关于android应用程序的新手......

请告诉我怎么做......我不知道如何编码......

任何回应都非常感谢..谢谢

我的菜单项代码

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.menuitem1:
            //code to be inserted here but I dont know how
        break;
    case R.id.menuitem2:
        Log.i("This is Menu", "0");
        super.onBackPressed();

        break;

    default:
        break;
    }

    return true;
} 
```

我的 Android 清单

```
<activity android:name=".SplashScreen"
                 android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen" 

                  >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".AndroidTabLayoutActivity"
             android:logo="@drawable/logo"
             android:label=""
            >
            <intent-filter>
                <action android:name="com.droidnova.android.splashscreen.AndroidTabLayoutActivity" />
                <category android:name="android.intent.category.HOME" />
                <category android:name="android.intent.category.DEFAULT" />

            </intent-filter>
        </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:42:19.127

您说仪表板是您的 AndroidTabLayoutActivity 中的一个片段。我假设您不想从您所在的当前活动中调用该片段。

您可以像这样在打开 AndroidTabLayoutActivity 的意图中传递一个参数。（此代码在 onOptionsItemSelected() 方法中）

```
Intent intent = new Intent();
intent.setClass(this,AndroidTabLayoutActivity.class);
intent.putExtra("type","dashboard");
startActivity(intent); 
```

然后在 onCreate 方法的 AndroidTabLayoutActivity 中，您可以检查此参数是否存在。

```
 if  ( getIntent().getStringExtra("type","splash").equals("dashboard")) {
//start dashboard
} else {
  //start splashscreen
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:20:05.247

您可以只使用`startActivity(<Intent for your dashboard activity>)`而不是`super.onBackPressed()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:30:43.503

在主页按钮的 OnClick 中启动仪表板活动为

```
 home.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent intent=new Intent(currentclass.this,dashboardactivity.class);
              startActivity(intent);
              finish();
        }
    }); 
```

# android - 特定日期的android闹钟

> ID：11391271
> 
> 赞同：0
> 
> 时间：2012-07-09T08:15:09.050
> 
> 标签：android, alarmmanager, repeatingalarm

我正在制作使用警报的应用程序，该应用程序将在用户指定的日期触发，即有日期复选框（周一、周二、周三、周四、周五、周六、周日）

我在这个问题上搜索了很多，我知道的唯一解决方案是使用 AlarmManager 触发不同的警报。这意味着如果用户选中所有 7 个框，我必须触发 7 次警报，并且如果用户取消一个警报，则取消所有 7 个待处理的意图？

我的问题是，有没有其他有效的方法来处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T06:57:25.153

我会假设你想同时触发警报（比如说凌晨 12:00），无论是哪一天`as long as the day is checked`。基于此，您可以：

*   每天有七个不同的布尔共享首选项。
*   将 AlarmManager 设置为每天上午 12:00 触发。
*   当 AlarmManager 被触发时，你会得到一天并检查它是否被选中：
    *   如果是，那就做你的事。
    *   如果没有，什么也不做。

# android - android应用程序中的代码风格

> ID：11391274
> 
> 赞同：-3
> 
> 时间：2012-07-09T08:15:30.567
> 
> 标签：android, coding-style

下一个链接是指编写 android 应用程序还是仅指操作系统 - 打开 android 项目？

[https://sites.google.com/a/android.com/opensource/submit-patches/code-style-guide#field_names](https://sites.google.com/a/android.com/opensource/submit-patches/code-style-guide#field_names)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:35:14.430

是的，此链接指的是 AOSP 的编码样式。此外，这是一个旧页面。新页面在[这里](http://source.android.com/source/code-style.html)可用。实际上，每个开发人员都可以有自己的应用程序风格。创建此页面的目的是为那些为 AOSP 做出贡献的人提供统一的编码风格。但是您可以将这种编码风格作为您项目的参考。

# css - svg 背景在 IE 中以不同方式旋转

> ID：11391280
> 
> 赞同：0
> 
> 时间：2012-07-09T08:15:57.650
> 
> 标签：css, internet-explorer, background, svg

我正在尝试使用 svg 图像作为图片背景创建跨浏览器宝丽来效果，如下所示 [http://www.sitepoint.com/examples/svg/gallery.php](http://www.sitepoint.com/examples/svg/gallery.php)

如果您使用的是 IE9，您首先应该注意到问题 - svg 背景在 IE 中的旋转方式不同。问题仅出现在 IE 中，并且似乎与 background-size 属性有关。如果我切换 IE 背景大小并旋转属性，IE 就会开始正确显示所有内容！

有人有解决这个问题的方法吗？

我正在使用的 CSS：

```
.image img {

    border: 0px solid #000;
    background-color: #fff;
    height:275px;
    background: url(/test/images/polaroid.svg);
    -moz-background-size: 100% 100%;
    background-size: 100% 100% ;
    margin: 25px auto 45px 35px;
    display:inline-block;
    padding:4% 5.5% 6% 4%;
    list-style: none;
    -webkit-transform: rotate(-10deg);
    -moz-transform: rotate(-10deg);
    -o-transform: rotate(-10deg);
    transform: rotate(-10deg);
    -ms-transform: rotate(-10deg);

} 
```

我在这里只谈论IE9！对于 7 和 8，我正在使用 progid:DXImageTransform.Microsoft.Matrix

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:24:57.427

如果您使用 SVG 作为背景 - 所以您可以在 SVG 上制作所有内部图片。对于 IE8-使用[svgweb](http://code.google.com/p/svgweb/)。

用于`transform="rotate(-30)"`在`<image>`SVG 内部进行旋转。

所以，在每个`<li>`你都会有 SVG。它将在所有浏览器中同样有效。

# tridion - 需要帮助以使用核心服务发布和完成活动

> ID：11391288
> 
> 赞同：0
> 
> 时间：2012-07-09T08:16:45.137
> 
> 标签：tridion, tridion-2011

我正在尝试创建一种方法来使用核心服务发布和完成工作流活动。我收到编译错误。下面是我的代码。任何人都可以纠正我吗？这是一个紧急的。

```
public void PublishComponent(string WorkItemId)
    {
        var client = new SessionAwareCoreServiceClient();
        var readoptions = new ReadOptions();            
        ComponentData component = (ComponentData)client.Read(new TcmUri(WorkItemId), readoptions) as ComponentData;
        List<IdentifiableObjectData> ItemToPublish = new List<IdentifiableObjectData>();            
        ItemToPublish.Add(component);
        PublishInstructionData instruction = new PublishInstructionData();
        PublicationTargetData pubtarget = (PublicationTargetData)client.Read(new TcmUri("tcm: 0 - 21 - 65537"), readoptions) as PublicationTargetData;
        List<PublicationTargetData> target = new List<PublicationTargetData>();
        target.Add(pubtarget);            
        client.Publish(ItemToPublish, instruction, target, PublishPriority.Normal, readoptions);

        WorkItemData workitem = new WorkItemData();
        workitem.Id = new TcmUri(WorkItemId);            
        ActivityInstanceData currentactivity = new ActivityInstanceData();
        ActivityFinishData finish = new ActivityFinishData();
        finish.Message="Published";
        client.FinishActivity(currentactivity, finish, readoptions);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T08:47:00.067

有几个问题，但主要是没有`TcmUri`类，就像在 TOM.NET 中一样，它是 CoreService 中的字符串。与`Publish`方法相同，它需要字符串数组作为输入，而不是项数组，就像在 TOM.NET 中一样

```
 var client = new SessionAwareCoreServiceClient();
        var readoptions = new ReadOptions();
        ComponentData component = (ComponentData)client.Read(WorkItemId, readoptions);
        List<string> ItemToPublish = new List<string>();
        ItemToPublish.Add(component.Id);
        PublishInstructionData instruction = new PublishInstructionData();
        PublicationTargetData pubtarget = (PublicationTargetData)client.Read("tcm:0-21-65537", readoptions);
        List<string> target = new List<string>();
        target.Add(pubtarget.Id);
        client.Publish(ItemToPublish.ToArray(), instruction, target.ToArray(), PublishPriority.Normal, readoptions);

        WorkItemData workitem = new WorkItemData();
        workitem.Id = WorkItemId;
        ActivityInstanceData currentactivity = new ActivityInstanceData();
        ActivityFinishData finish = new ActivityFinishData();
        finish.Message = "Published";
        client.FinishActivity(currentactivity.Id, finish, readoptions); 
```

# android - Maven、Android和Eclipse共存问题

> ID：11391297
> 
> 赞同：1
> 
> 时间：2012-07-09T08:17:23.043
> 
> 标签：android, eclipse, maven, adt, m2e

我正在 Eclipse 中使用 Maven 开发 Android 项目。

我安装了 Android SDK、Eclipse 的 ADT 和 M2E 的 Android 配置器，它们运行良好。

我的问题是，当我使用 Android SDK 管理器更新 SDK 工具时，ADT 插件更新似乎已准备好，但 M2E 的 Android Configurator 尚未准备好。

目前最新的 Android SDK Tools 版本是 20。Android Configurator 与它不兼容，所以我必须等待更新。但是，我无法判断更新何时准备就绪，因为配置器没有版本号，我只能每天继续尝试安装它，看看它是否有效，如果没有，则将其卸载。

在 Eclipse 中使用 Maven 和 Android 是否有其他人更幸运？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:58:50.270

[这是m2e-android 连接器](http://rgladwell.github.com/m2e-android)的一个已知问题，由正在处理的 ADT 版本 20.0.0 的更新引起：

[https://github.com/rgladwell/m2e-android/issues/89](https://github.com/rgladwell/m2e-android/issues/89)

应该有一个 m2e-android 的版本号（当前为 0.4.1），尽管仅仅通过浏览更新站点可能并不明显。[您可以通过关注我的 twitter 提要 ( @rgladwell](https://twitter.com/rgladwell) ) 或订阅[maven-android-developers Google Group](https://groups.google.com/forum/?fromgroups#!forum/maven-android-developers)来随时了解新版本。

**更新**新的 0.4.2 版本修复了与 8 月 6 日发布的 ADT 20 的兼容性问题。请运行 Eclipse 更新（*Help -> Check for Updates*），如果这能解决您的问题，请告诉我。

# sql - 如何将月份编号转换为oracle中的完整月份名称？

> ID：11391300
> 
> 赞同：17
> 
> 时间：2012-07-09T08:17:48.383
> 
> 标签：sql, oracle

我的表中有一个月列。月份数字存储在此月份列中，例如 1 代表 1 月，2 代表 2 月，依此类推。

如何将数字转换为月份名称，例如一月、二月、三月等。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-09T08:30:19.060

```
SELECT TO_CHAR(TO_DATE(7, 'MM'), 'MONTH') AS monthname FROM DUAL; 
```

[输出](http://sqlfiddle.com/#!4/d41d8/1277)

```
monthname
---------
JULY 
```

如果您真的想要小写或大写的月份名称，您还可以使用：

```
TO_CHAR(TO_DATE(7, 'MM'), 'month')
TO_CHAR(TO_DATE(7, 'MM'), 'Month') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-14T21:28:52.533

如果你想在格式化的月份之后显示一个值，比如年份。月钉在一大堆空格上，这使得值看起来很奇怪。要解决此问题，您必须在附加后续字符串值之前修剪 Month 字符串。

```
select trim(TO_CHAR(TO_DATE(7, 'MM'), 'MONTH')) || ' 2020' month_yr from dual; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-27T07:45:42.740

如果你想指定你的语言，你可以这样使用；

`SELECT to_char(TO_DATE(6, 'MM'),'MONTH','NLS_DATE_LANGUAGE=Turkish') from dual;`

它返回一个土耳其月份名称：Haziran

# spring - AOP 的 Spring 安全错误

> ID：11391305
> 
> 赞同：1
> 
> 时间：2012-07-09T08:18:12.963
> 
> 标签：spring, spring-security, spring-aop

我想在 Spring Security 中委托我的项目的安全性，但是当我将依赖项添加到我的 POM 并启动服务器时，我得到一个没有意义的错误......它说我的 applicationContext.xml 有一个错误并且它指向我有一个 aop 语句的行...

这是我的 applicationContext.xml 的简化版本

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
        xsi:schemaLocation="  
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd  
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd  
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd  
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

 <!-- Activates scanning of @Autowired -->
    <context:annotation-config/>

    <!-- Activates scanning of @Repository and @Service -->
    <context:component-scan base-package="es.myproject"/>

    <!-- datasource configuration -->
    <context:property-placeholder location="classpath:jdbc.properties" />

    <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="${jndi.name}" />
        <property name="lookupOnStartup" value="true"></property>
        <property name="cache" value="true"></property>
        <property name="proxyInterface" value="javax.sql.DataSource"></property>
    </bean>

    <!-- hibernate session factory -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource"  ref="dataSource" />
        <property name="configLocation" value="classpath:hibernate.cfg.xml" />
        <property name="packagesToScan" value="es.myproject.modelo.datos" />
    </bean>

    <!-- enable the configuration of transactional behavior based on annotations -->
    <aop:aspectj-autoproxy />
    <tx:annotation-driven transaction-manager="transactionManager" />

    <!-- Transaction manager for a single Hibernate SessionFactory (alternative to JTA) -->
    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

这些是 de 依赖项：

```
<!-- Spring security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.0.RELEASE</version>    

        </dependency> 
       <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.0.RELEASE</version> 
        </dependency>   
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency> 
```

并且错误指向`<aop:aspectj-autoproxy />`applicationContext.xml

如果我删除 Spring Security 依赖项，错误就会消失......很奇怪吧？有什么想法吗？

错误说： `org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'http://www.springframework.org/schema/aop/spring-aop-3.1.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>. org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 41 in XML document from ServletContext resource [/WEB-INF/classes/applicationContext.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'aop:aspectj-autoproxy'.`

但是阅读那个xsd并没有真正的问题，正如我所说，如果我删除spring安全依赖项，这个错误不会显示......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:23:06.260

奇怪的。您的 XML 是有效的（根据 W3 验证器），并且您的 bean 定义看起来都很合理。这让我认为这是一个类路径问题。确保您的类路径中有以下 jar：

*   aopalliance-1.0.jar
*   commons-logging-1.0.1.jar
*   spring-aop-3.1.0.RELEASE.jar
*   spring-asm-3.1.0.RELEASE.jar
*   spring-beans-3.1.0.RELEASE.jar
*   spring-context-3.1.0.RELEASE.jar
*   spring-core-3.1.0.RELEASE.jar
*   spring-expression-3.1.0.RELEASE.jar
*   spring-jdbc-3.1.0.RELEASE.jar
*   spring-orm-3.1.0.RELEASE.jar
*   spring-security-core-3.1.0.RELEASE.jar
*   spring-security-web-3.1.0.RELEASE.jar
*   spring-tx-3.1.0.RELEASE.jar
*   spring-web-3.1.0.RELEASE.jar

还要确保这些都不会出现多次（可能使用不同的版本）

啊，重新阅读您的问题，问题可能是您没有明确将 Spring 3.1.x 列为依赖项。Spring Security 3.1.x 仅拉取 Spring core 3.0.7，除非您另有明确要求。

添加这些依赖项，您应该是安全的：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>3.1.0.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>3.1.0.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>3.1.0.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.1.0.RELEASE</version>
</dependency> 
```

# javascript - 在触发 jQuery Ajax 请求之前等待函数返回值

> ID：11391306
> 
> 赞同：0
> 
> 时间：2012-07-09T08:18:23.717
> 
> 标签：javascript, ajax, jquery, return

我正在尝试使用函数调用返回的一些数据来触发 Ajax 请求，据我所知，Ajax 调用并没有等待我的函数调用返回。

在`getSelectedMessages`使用由`getSelectedMessages`.

`getSelectedMessages`看起来像这样：

```
var getSelectedMessages = function() {
    var selected = [];
    $('input:checkbox[name=multipleops]:checked').each(function() {
      selected.push($(this).attr('value'));
    });
return selected;
} 
```

调用它的 Ajax 请求如下所示：

```
$.ajax({
   type: "POST",
   url: "/api/messages/",
   data: { ids: getSelectedMessages(), folder: folder },
   cache: false,
   success: function(){ location.reload() }
}); 
```

我已经做了一些搜索，我发现的只是关于如何*从*调用中返回值并返回*给*它的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:22:01.277

利用

`beforeSend`带有ajax的属性

尝试

```
var getSelectedMessages = function() {
    var selected = [];
    $('input:checkbox[name=multipleops]:checked').each(function() {
      selected.push($(this).attr('value'));
    });
return selected;
}

 $.ajax({
   type: "POST",
   url: "/api/messages/",
   beforeSend : function () { return jQuery.isEmptyObject(getSelectedMessages);  }
   data: { ids: getSelectedMessages(), folder: folder },
   cache: false,
   success: function(){ location.reload() }
}); 
```

参考

[`beforeSend`](http://api.jquery.com/jQuery.ajax/)
[`isEmptyObject`](http://api.jquery.com/jQuery.isEmptyObject/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:22:08.250

在 jquery (?) 的 ajax 函数之外调用 getSelectedMessages()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:39:50.753

该函数在发送请求之前执行。真正的问题是 getSelectedMessaged() 返回一个数组。这导致在 jQuery 内部序列化后 undefined=undefined。这被 $.ajax() 忽略了，所以看起来它没有发送你的 var，但它忽略了它们，因为它们是未定义的。

如果您将字符串与值连接起来并自己将其设为查询字符串参数，则它应该可以工作。我假设你想向服务器发送类似 ?var[]=something&var[]=somethingelse 的东西，所以它最终在 PHP 中作为一个数组？比您必须在 getSelectedMessages 函数中自己构建字符串。

希望对您有所帮助，PM5544

# c# - 如何根据声音频率移动物体？

> ID：11391310
> 
> 赞同：1
> 
> 时间：2012-07-09T08:18:29.990
> 
> 标签：c#, api, audio, action

有没有人可以帮助我找到基于频率信号振动将声音转换为动作的解决方案，我需要让一个物体在 PC 上移动......关于支持这个的 API 有什么建议吗？谢谢。

# c# - VS2010中的调试问题

> ID：11391314
> 
> 赞同：8
> 
> 时间：2012-07-09T08:18:51.937
> 
> 标签：c#, asp.net, visual-studio-2010, debugging

好吧，奇怪的事情又发生在我身上了。今天早上，当我启动我的 ASP.NET 应用程序时，做了一些工作，现在我尝试发布它。我收到了一个错误，我似乎找不到任何关于

```
Error   1   Unable to apply a change while debugging. Source file '\Properties\AssemblyInfo.cs' was reloaded. You must restart the debugging session. 
```

任何人都知道该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T03:04:53.050

1.  确认这个 Visual Studio 实例和另一个实例都没有调试有问题的二进制文件。
2.  **重新启动 Visual Studio。这通常会解决问题。**
3.  如果这仍然不起作用，请尝试禁用所有插件并再次重新启动 Visual Studio。
4.  最后，作为最后的手段，重新安装 Visual Studio 可以解决看似无法解决的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T06:15:38.113

您可以尝试关闭 ASP.NET 开发服务器。它将在系统托盘中（时间旁边），只需双击它并单击“关闭”，然后再次运行。

或者您可以打开任务管理器并结束 Image Name: WebDev.Webserver 的进程...

# iphone - UISegmentedControl selectedSegmentStyle 7 和 App Store 批准

> ID：11391322
> 
> 赞同：0
> 
> 时间：2012-07-09T08:19:37.397
> 
> 标签：iphone, uisegmentedcontrol, iphone-privateapi

因为 Apple 的 API 缺乏对 UISearchBar 范围栏的自定义（也就是说，我想更改它的框架，据我所知这是不可能的），所以我必须自己使用 UIView 内的 UISegmentedControl 创建一个范围栏。我已经达到了它看起来与常规范围栏完全相同的地步。我通过将 UISegmentedControl 的 segmentedControlStyle 设置为 7 来实现这一点，这是一种“隐藏”（如未记录）样式，它使分段控件看起来像范围栏。

现在的问题是：这会在 App Store 中获得批准吗？我并没有真正使用任何私有 API，我只是将属性设置为不同于任何建议值的值。我没有使用任何未记录/私有的类或方法，所以我认为/希望（希望因为我不知道我还能如何实现这个范围栏模仿）我应该没问题。其他人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T02:29:25.743

跟进：我的应用程序刚刚被接受，而这段代码仍在其中，所以显然没问题。

# ember.js - Emberjs 使用自己的路由/状态单独开发一个组件，可以集成到主应用程序中

> ID：11391333
> 
> 赞同：2
> 
> 时间：2012-07-09T08:20:14.787
> 
> 标签：ember.js, ember-old-router

我需要在 ember 中开发一个组件。

组件逻辑在某种程度上与主应用程序隔离，可以创建为单独的隔离应用程序，在组件内具有状态和路由。

目前我有组件的根控制器作为“ApplicationController”来启用路由，“applicationController”这个名字看起来像是硬编码的。

现在我有了带有“ApplicationController”+相关路由的主应用程序，以及带有“ApplicationController”+相关路由的组件。看起来很难整合它们。

有没有办法让像这样的多个组件分隔我的命名空间？[在此处](https://stackoverflow.com/questions/11390720/ember-routing-and-applicationcontroller-used-in-connectoutlet)查看评论

因此，主要关注的是一种开发带有隔离的例程/状态的 ember 组件的方法，该方法很容易与也具有路由/状态的主应用程序集成回来。

**编辑**

我在绑定到唯一集成的主应用程序的组件中有两个值。此外，一旦集成，组件路由必须作为应用程序路由的一部分。

```
Eg: #/approuteforcomponent/componentroute/componentroute2/ 
```

在开发过程中，我应该能够做到

```
#/approuteforcomponent  -- shows a page saying component under construction
#/componentroute/componentroute2/ 
```

话虽如此，我现在遇到的主要问题是关于使用“ApplicationControler”的主应用程序和组件

**更新**

类似问题

[ember.js 是否鼓励过多的控制器？](https://stackoverflow.com/questions/11637202/does-ember-js-encourage-too-many-controllers)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:01:26.387

您希望与主应用程序实现何种程度的集成？我的意思是：想要的隔离只与代码结构有关吗？或旨在分解组件重用？

主应用程序和组件路由*真的*不相关吗？

您至少有两种可能的方法：

*   您可以设置多个 ember 应用程序，它们之间的关系可能很弱，但是路由依赖于浏览器的基本状态，因此同时实例化多个路由器并进行并发位置管理听起来没有意义......

*   您还可以使用插件架构开发您的应用程序，让插件重新打开主应用程序的路线，并加强应用程序和插件之间的关系*（这就是我们在这里工作的地方......）*

# php - html 表单正在重置按钮上发送

> ID：11391334
> 
> 赞同：0
> 
> 时间：2012-07-09T08:20:17.227
> 
> 标签：php, html, forms

我的 html 表单有问题。

这是我的代码：

```
<form name="contactform" method="post" action="send_form_email.php">
  <input id="first_name"  type="text" name="first_name" size="30"/>
  <input id="company_name"  type="text" name="company_name" size="30"/>
  <input id="email"  type="text" name="email" size="30"/>
  <input type="image" align="middle" src="images/accept.png" alt="Submit" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input id="reset" type="image" src="images/reset.png" alt="Reset" align="middle" />
</form> 
```

当我单击这些图像中的任何一个时，我的表单就会被发送。如何使此重置图片仅重置而不发送表单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T08:22:00.717

您的重置按钮不是重置按钮。它有`type="image"`，它是服务器端图像映射。

当您单击服务器端图像地图时，表单将被提交，您单击的坐标将包含在数据中。

如果您想要一个作为图像的重置按钮，请使用：

```
<button type="reset"><img src="..." alt="..."></button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:22:36.743

图像类型就像一个**提交按钮**。

您必须`type="reset"`使用 css 为您的按钮设置样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:24:10.183

采用

```
<input type = "reset" value = "" class = "btnResetClass" /> 
```

您的 btnResetClass 将具有由您设置的背景图像的 Css 设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T08:50:51.723

你必须使用`type="reset"`.

[这个 jsFiddle 例子](http://jsfiddle.net/G3qu8/1/)会更好。

**HTML:**

```
<form id="contactform" method="post" action="send_form_email.php">
    <div>
        <label>
            First Name: <input id="first_name" name="first_name" type="text" size="30" />
        </label>
    </div>
    <div>
        <label>
           Company Name: <input id="company_name" name="company_name" type="text" size="30" />
        </label>
    </div>
    <div>
        <label>
            Email: <input id="email"  type="text" name="email" size="30" />
        </label>
    </div>
    <input id="submit" type="submit" value="" title="Submit" />
    <input id="reset" type="reset" value="" title="Reset" />
</form> 
```

**CSS:**

```
#submit, #reset {
    border: none;
    width: 64px;
    height: 48px
}
#submit {
    background: url('images/submit.png')
}
#reset {
    background: url('images/reset.png')
} 
```

# java - Java模式匹配器：创建新的还是重置的？

> ID：11391337
> 
> 赞同：26
> 
> 时间：2012-07-09T08:20:32.907
> 
> 标签：java, regex, reset, matcher

假设 a `Regular Expression`，通过 Java`Matcher`对象与大量字符串匹配：

```
String expression = ...; // The Regular Expression
Pattern pattern = Pattern.compile(expression);
String[] ALL_INPUT = ...; // The large number of strings to be matched

Matcher matcher; // Declare but not initialize a Matcher

for (String input:ALL_INPUT)
{
    matcher = pattern.matcher(input); // Create a new Matcher

    if (matcher.matches()) // Or whatever other matcher check
    {
         // Whatever processing
    }
} 
```

在[用于 Matcher 的 Java SE 6 JavaDoc 中](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/regex/Matcher.html)，可以通过该方法找到重用同一`Matcher`对象的选项`reset(CharSequence)`，如源代码所示，该方法比`Matcher`每次都创建一个新对象要便宜一些，即，与上面不同，可以做：

```
String expression = ...; // The Regular Expression
Pattern pattern = Pattern.compile(expression);
String[] ALL_INPUT = ...; // The large number of strings to be matched

Matcher matcher = pattern.matcher(""); // Declare and initialize a matcher

for (String input:ALL_INPUT)
{
    matcher.reset(input); // Reuse the same matcher

    if (matcher.matches()) // Or whatever other matcher check
    {
         // Whatever processing
    }
} 
```

应该使用`reset(CharSequence)`上面的模式，还是应该更喜欢`Matcher`每次都初始化一个新对象？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-09T09:21:26.933

无论如何重用`Matcher`. 创建新的唯一好理由`Matcher`是确保线程安全。这就是你不创建的`public static Matcher m`原因——事实上，这就是`Pattern`首先存在一个单独的、线程安全的工厂对象的原因。

在您确定在任何时间点只有一个用户的每种情况下，都`Matcher`可以将其与`reset`.

# c# - 递归访问 DataTable 并输入到 InnerXml 查询

> ID：11391339
> 
> 赞同：0
> 
> 时间：2012-07-09T08:20:36.690
> 
> 标签：c#, batch-file, datatable, innerxml

我的应用程序中有 DataTable。它包含 DataColumns 和 Rows。我只想递归调用它并输入到 InnerXml 查询。这里字段名称应该是 DataColumns 值，Value 应该是 DataTable 的 Row 值。贝娄是我尝试过的代码。但我不知道迭代 DataTable 并填充 InnerXml。

```
 DataTable DT = new DataTable();

    for(int i=0 ; i<DT.Length ;i++){
               batchElement.InnerXml =
               "<Method ID='4' Cmd='New'>" + "<Field Name='" + DT.DataColumn[] + "'>" + DT.row + "</Field></Method>";

    } 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:32:09.620

你想简单地枚举一个`DataTable`还是你真的想[递归地](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)迭代它？我只是问，因为您的示例代码没有显示递归，它显示了带有几个无法编译的部分的枚举。

我猜您正在尝试序列化数据表，在这种情况下，以下示例可能会起作用：

```
StringBuilder innerXml = new StringBuilder();
int methodId = 0;
foreach(DataRow row in DT.Rows)
{
    innerXml.AppendFormat("<Method ID='{0}' Cmd='New'>", methodId.ToString());
    methodId += 1;

    foreach(DataColumn column in DT.Columns)
    {
        innerXml.AppendFormat("<Field Name='{0}'>{1}</Field>", column.ColumnName, row[column.ColumnName]);
    }

    innerXml.AppendLine("</Method>");
}
batchElement.InnerXml = innerXml.ToString(); 
```

*抱歉，如果以上内容无法编译 - 手工打字 - 希望能让您走上正确的轨道。*

**注意：根据您的示例，我不确定您打算如何拆分 Xml 中的行和单元格元素。我对 Xml 结构做了一些假设，但希望它足以让你从**

# android - 如何回收位图并在以后再次使用它？

> ID：11391346
> 
> 赞同：2
> 
> 时间：2012-07-09T08:21:17.257
> 
> 标签：android, memory, bitmap

我必须释放位图占用的内存。因此，当我的活动结束时，我会召集`recycle()`他们所有人。

这些位图始终在可绘制对象中使用，作为背景属性或源（大小写`ImageView`）属性。

但问题是，当稍后另一个活动的视图也使用这些位图时，它会显示

> java.lang.RuntimeException: Canvas: 试图使用回收的位图。

我能做什么，我不能将位图保留在内存中，因为*也许*用户稍后会启动一个使用它们的活动。我如何告诉位图释放内存并且以后可以再次使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:15:37.833

解决方案是使用以下方法初始化位图和视图：

```
Bitmap b = BitmapFactory.decodeResource(resources, R.drawable.mybitmap);
view.setBackgroundDrawable(new BitmapDrawable(b)); 
```

虽然这不适用于 XML 位图。但是位图应该可以从视图中检索。

将位图实例放在内存中，可以在其上调用 recycle() 以立即释放内存。

在回收位图*之前*，必须确保它不再被任何视图引用 - 将可绘制/视图的引用设置为 null。否则会抛出异常。为了做到这一点，有必要跟踪引用位图的视图，并在回收之前将所有引用清空。

所以我的实际问题不是重用位图。问题是在视图仍然引用位图时回收位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:25:51.827

如果你用`Bitmap`s 代表的只是`Drawable`s 和`android:source`of `ImageView`s，那你为什么还要有`Bitmap`对象呢？在这些情况下，Android 将负责优化内存使用，根本不需要调用`recycle()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:40:47.040

您可以检查位图是否被回收`bitmap.isRecycled()`。如果此方法返回 true，您可以重新初始化位图。像这样的东西：

```
if(bitmap != null && bitmap.isRecycled()) {
  //Reinitialize the image
}
else {
  //The bitmap is not recycled, you can use it
} 
```

# sql - SQL 单列拆分为多列

> ID：11391348
> 
> 赞同：5
> 
> 时间：2012-07-09T08:21:31.620
> 
> 标签：sql, sql-server-2008

我想将查询中的单列结果拆分为 4 列：

样本来源： ( `Select [FirstName from User`)
Peter
Mary
John
Tina
Carl
Jane
Bill
Sarah

我想看起来像这样：

```
Column1   Column2   Column3   Column4  
Peter     Mary      John      Tina  
Carl      Jane      Bill      Sarah 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T08:43:33.483

您需要有一个独特的列来`ORDER BY`获得确定性的结果，但是这些方面的东西应该可以工作。

```
;WITH T
     AS (SELECT [FirstName],
                ( ROW_NUMBER() OVER (ORDER BY (SELECT 0)) - 1 ) / 4 AS Row,
                ( ROW_NUMBER() OVER (ORDER BY (SELECT 0)) - 1 ) % 4 AS Col
         FROM   [User])
SELECT [0] AS Column1,
       [1] AS Column2,
       [2] AS Column3,
       [3] AS Column4
FROM   T PIVOT (MAX(name) FOR Col IN ([0], [1], [2], [3])) P 
ORDER BY Row 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:26:48.507

在这里，您有大量选项，寻找更适合您的情况的选项： [从值列表创建列](http://bradsruminations.blogspot.com.es/2009/10/making-list-and-checking-it-twice.html)

上一个链接指向[更多信息](http://bradsruminations.blogspot.com.es/2009/10/un-making-list-or-shredding-of-evidence.html)

# mysql - MySQL 可移动类型记录

> ID：11391351
> 
> 赞同：3
> 
> 时间：2012-07-09T08:21:39.000
> 
> 标签：mysql, movabletype

我正在尝试从旧的 Movable Type v3.1 设置中获取一些遗留数据。我正在使用 phpMyAdmin 直接在我们的 Web 服务器上访问 MySQL 数据库。帖子表显示只有 718 条记录，最后一条记录创建于 2007 年。这是不正确的。我不熟悉 MT 的实现，但 Movable Type 是否可以将数据存储在多个数据库中的多个表中？

当我在 Movable Type 管理区域中使用备份/导出功能时，会导出完整的数据集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T23:21:32.090

不，单个 MT 安装将仅访问一个数据库，并且所有帖子记录都存储在 mt_entry 表中。MySQL 服务器和数据库名称在您的 mt-config.cgi 配置文件中定义（分别使用 DBHost 和 Database 指令）。您确定您访问的是同一台服务器上为您的 MT 安装配置的数据库吗？

（编辑：MT 可以配置为在主/从配置中使用多个 DB，但通常情况并非如此，我不确定在 3.1 中是否存在这种可能性。无论如何，从属应该具有相同数量的比主人发帖。从你所说的我最好的猜测是你没有在 phpMyAdmin 中访问与 MT 相同的数据库或表。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:08:15.333

可能是你的 mysql 数据库有损坏的表，所以你可能想用 phpmyadmin 登录到你的数据库，选择所有表并选择“检查表”选项。

等待结果，看看是否有损坏的表。如果有，则再次选择所有表，或者只选择损坏的表，然后选择名为“REPAIR TABLE”的下拉选项。

我倾向于怀疑，正如弗朗索瓦所说，您可能会偶然看到另一个数据库，而不是您的活字安装所基于的数据库。检查您的可移动式安装“mt-config.cgi”文件，并将那里的数据库详细信息与您在“phpmyadmin”中查看的数据库的详细信息进行比较。

# azure - Azure 计算模拟器未启动。DFAgent 因错误而崩溃

> ID：11391352
> 
> 赞同：2
> 
> 时间：2012-07-09T08:21:43.510
> 
> 标签：azure

从 Visual Studio 启动默认 mvc 项目时遇到问题。我尝试更改 _CSRUN_STATE_DIRECTORY 并重新安装 azure sdk。但仍然没有效果。

DFFabric 日志：

```
---
2012-7-10T4:57:53.252, 1, 1, Information, 201523206, Loading Providers`
---
2012-7-10T4:57:53.267, 2, 1, Information, 201523231, Done reading configuration from {0}`C:\Program Files\Microsoft SDKs\Windows Azure\Emulator\devfabric\DevFC.exe.Config`
---
2012-7-10T4:57:53.271, 3, 1, Information, 201523243, Loading Configuration.`
---
2012-7-10T4:57:53.352, 4, 1, Information, 201523233, {0} file not found in CWD. Extracting from dll resources.`Fabric.StockBindings.xml`
---
2012-7-10T4:57:53.356, 5, 1, Information, 201523242, Loading binding configuration.`
---
2012-7-10T4:57:53.373, 6, 1, Information, 201523242, Total {0} binding configurations loaded.`19`
---
2012-7-10T4:57:53.373, 7, 1, Information, 201523242, Loading binding configuration.`
---
2012-7-10T4:57:53.378, 8, 1, Information, 201523242, Total {0} binding configurations loaded.`19`
---
2012-7-10T4:57:53.379, 9, 1, Information, 201523234, {0} file not found in CWD. Extracting from dll resources.`Fabric.StockBehaviors.xml`
---
2012-7-10T4:57:53.381, 10, 1, Information, 201523241, Loading service behavior configuration.`
---
2012-7-10T4:57:53.386, 11, 1, Information, 201523241, Total {0} service behavior configurations loaded.`2`
---
2012-7-10T4:57:53.386, 12, 1, Information, 201523241, Loading endpoint behavior configuration.`
---
2012-7-10T4:57:53.386, 13, 1, Information, 201523241, Total {0} endpoint behavior configurations loaded.`0`
---
2012-7-10T4:57:53.386, 14, 1, Information, 201523241, Loading service behavior configuration.`
---
2012-7-10T4:57:53.386, 15, 1, Information, 201523241, Total {0} service behavior configurations loaded.`2`
---
2012-7-10T4:57:53.386, 16, 1, Information, 201523241, Loading endpoint behavior configuration.`
---
2012-7-10T4:57:53.386, 17, 1, Information, 201523241, Total {0} endpoint behavior configurations loaded.`0`
---
2012-7-10T4:57:53.386, 18, 1, Information, 201523243, Done Loading Configuration.`
---
2012-7-10T4:57:53.386, 19, 1, Information, 201523232, AppConfig Config Source deleting its artifacts.`
---
2012-7-10T4:57:53.386, 20, 1, Information, 201523232, Deleting AppConfig Config Source artifact {0}`C:\Users\KochekovskySA\AppData\Local\Temp\Fabric.StockBindings.xmlea27fd29-6349-47dc-93ba-bd14d830a8fd`
---
2012-7-10T4:57:53.386, 21, 1, Information, 201523232, Deleting AppConfig Config Source artifact {0}`C:\Users\KochekovskySA\AppData\Local\Temp\Fabric.StockBehaviors.xml9dc12dcd-2f6d-43ca-9769-3a496e71cc90`
---
2012-7-10T4:57:53.390, 22, 1, Information, 201523206, CommunicationFramework initialized with configuration source type: {0}`AppConfig`
---
2012-7-10T4:57:53.436, 23, 4, Information, 201523202, CreateService called for {0}`Microsoft.ServiceHosting.Tools.DevelopmentFabric.NetworkInformation.PxeDHCPResponder`
---
2012-7-10T4:57:53.441, 24, 4, Information, 201523202, Logging event CommFxServiceHostCreated with params: ServiceName={0} `Microsoft.ServiceHosting.Tools.DevelopmentFabric.NetworkInformation.PxeDHCPResponder`
---
2012-7-10T4:57:53.456, 25, 4, Information, 201523251, GetServiceBehaviors called for behavior config {0}`FabricServiceBehavior`
---
2012-7-10T4:57:53.456, 26, 4, Verbose, 201523249, GetServiceBehaviorConfiguration called for configuration {0}`FabricServiceBehavior`
---
2012-7-10T4:57:53.457, 27, 4, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.457, 28, 4, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.457, 29, 4, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.457, 30, 4, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.458, 31, 4, Information, 201523253, Ignoring the DataContractSerializerServiceBehavior.`
---
2012-7-10T4:57:53.458, 32, 4, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.458, 33, 4, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.459, 34, 4, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.459, 35, 4, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.459, 36, 4, Information, 201523251, Returning {0} service behaviors for the behavior config {1}`4`FabricServiceBehavior`
---
2012-7-10T4:57:53.460, 37, 4, Verbose, 201523256, GetBindingFromConfig called.`
---
2012-7-10T4:57:53.461, 38, 4, Verbose, 201523250, GetBindingConfiguration called for configuration {0}`PxeNetTcpBinding`
---
2012-7-10T4:57:53.461, 39, 4, Information, 201523257, Created binding of type {0}`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.461, 40, 4, Information, 201523257, Applying configuration {0} to binding type {1}`PxeNetTcpBinding`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.463, 41, 4, Information, 201523203, StartService called for {0}`Microsoft.ServiceHosting.Tools.DevelopmentFabric.NetworkInformation.PxeDHCPResponder`
---
2012-7-10T4:57:53.464, 42, 4, Verbose, 201523225, ServiceHost.Open called for service {0}.`PxeDHCPResponder`
---
2012-7-10T4:57:53.464, 43, 4, Information, 201523225, Logging event CommFxServiceHostOpened with params: ServiceName={0} `PxeDHCPResponder`
---
2012-7-10T4:57:53.519, 44, 1, Information, 49153, Node 27c0ade8-285e-4250-b10d-cabc5daccfef BeginWorkflow, : Reset workflow from {0}`BeginWorkflow`
---
2012-7-10T4:57:53.525, 45, 1, Warning, 49171, Node 27c0ade8-285e-4250-b10d-cabc5daccfef: Set agent version to unknown. Skip building dependency graph.`
---
2012-7-10T4:57:53.525, 46, 1, Information, 0, LogicalNode`Initializing Logical Node`
---
2012-7-10T4:57:53.532, 47, 1, Information, 201523208, CreateClient called for contract {0} with bindingConfigName {1} and IP endpoint {2}`RD.Fabric.Controller.IAgent`LargeNetTcpBinding`net.tcp://localhost:15098/dfagent/1/host`
---
2012-7-10T4:57:53.532, 48, 1, Verbose, 201523256, GetBindingFromConfig called.`
---
2012-7-10T4:57:53.532, 49, 1, Verbose, 201523250, GetBindingConfiguration called for configuration {0}`LargeNetTcpBinding`
---
2012-7-10T4:57:53.533, 50, 1, Information, 201523257, Created binding of type {0}`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.533, 51, 1, Information, 201523257, Applying configuration {0} to binding type {1}`LargeNetTcpBinding`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.541, 52, 1, Information, 201523208, Logging event CommFxClientCreated with params: ContractName={0} `RD.Fabric.Controller.IAgent`
---
2012-7-10T4:57:53.541, 53, 1, Information, 201523208, CreateClient called for contract {0} with bindingConfigName {1} and IP endpoint {2}`RD.Fabric.Controller.IDevelopmentAgent`LargeNetTcpBinding`net.tcp://localhost:15098/dfagent/1/host`
---
2012-7-10T4:57:53.542, 54, 1, Verbose, 201523256, GetBindingFromConfig called.`
---
2012-7-10T4:57:53.542, 55, 1, Verbose, 201523250, GetBindingConfiguration called for configuration {0}`LargeNetTcpBinding`
---
2012-7-10T4:57:53.542, 56, 1, Information, 201523257, Created binding of type {0}`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.543, 57, 1, Information, 201523257, Applying configuration {0} to binding type {1}`LargeNetTcpBinding`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.544, 58, 1, Information, 201523208, Logging event CommFxClientCreated with params: ContractName={0} `RD.Fabric.Controller.IDevelopmentAgent`
---
2012-7-10T4:57:53.544, 59, 1, Information, 201523202, CreateService called for {0}`RD.Fabric.Controller.DevFabricAgentInterface`
---
2012-7-10T4:57:53.545, 60, 1, Information, 201523202, Logging event CommFxServiceHostCreated with params: ServiceName={0} `RD.Fabric.Controller.DevFabricAgentInterface`
---
2012-7-10T4:57:53.545, 61, 1, Verbose, 201523256, GetBindingFromConfig called.`
---
2012-7-10T4:57:53.545, 62, 1, Verbose, 201523250, GetBindingConfiguration called for configuration {0}`LargeNetTcpBinding`
---
2012-7-10T4:57:53.546, 63, 1, Information, 201523257, Created binding of type {0}`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.546, 64, 1, Information, 201523257, Applying configuration {0} to binding type {1}`LargeNetTcpBinding`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.546, 65, 1, Information, 201523203, StartService called for {0}`RD.Fabric.Controller.DevFabricAgentInterface`
---
2012-7-10T4:57:53.546, 66, 1, Verbose, 201523225, ServiceHost.Open called for service {0}.`DevFabricAgentInterface`
---
2012-7-10T4:57:53.547, 67, 1, Information, 201523225, Logging event CommFxServiceHostOpened with params: ServiceName={0} `DevFabricAgentInterface`
---
2012-7-10T4:57:53.547, 68, 1, Information, 201523251, GetServiceBehaviors called for behavior config {0}`FabricServiceBehavior`
---
2012-7-10T4:57:53.547, 69, 1, Verbose, 201523249, GetServiceBehaviorConfiguration called for configuration {0}`FabricServiceBehavior`
---
2012-7-10T4:57:53.547, 70, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.548, 71, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.548, 72, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.548, 73, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.549, 74, 1, Information, 201523253, Ignoring the DataContractSerializerServiceBehavior.`
---
2012-7-10T4:57:53.549, 75, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.549, 76, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.549, 77, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.550, 78, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.550, 79, 1, Information, 201523251, Returning {0} service behaviors for the behavior config {1}`4`FabricServiceBehavior`
---
2012-7-10T4:57:53.559, 80, 1, Information, 0, LogicalNode`Agent Interface Initialized`
---
2012-7-10T4:57:53.560, 81, 14, Information, 0, Calling to Poll Health from PollAgent code`
---
2012-7-10T4:57:53.561, 82, 1, Information, 0, Starting DevFabric...`
---
2012-7-10T4:57:53.561, 83, 1, Information, 0, Starting Repository Service...`
---
2012-7-10T4:57:53.561, 84, 1, Information, 201523202, CreateService called for {0}`Microsoft.Windows.Azure.DevFabric.RepositoryService`
---
2012-7-10T4:57:53.571, 85, 14, Information, 49153, new version {0} of goal data is picked up.`0`
---
2012-7-10T4:57:53.572, 86, 1, Information, 201523202, Logging event CommFxServiceHostCreated with params: ServiceName={0} `Microsoft.Windows.Azure.DevFabric.RepositoryService`
---
2012-7-10T4:57:53.572, 87, 1, Verbose, 201523256, GetBindingFromConfig called.`
---
2012-7-10T4:57:53.573, 88, 1, Verbose, 201523250, GetBindingConfiguration called for configuration {0}`LargeNetTcpBinding`
---
2012-7-10T4:57:53.573, 89, 1, Information, 201523257, Created binding of type {0}`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.573, 90, 1, Information, 201523257, Applying configuration {0} to binding type {1}`LargeNetTcpBinding`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.574, 91, 1, Information, 201523203, StartService called for {0}`Microsoft.Windows.Azure.DevFabric.RepositoryService`
---
2012-7-10T4:57:53.574, 92, 1, Verbose, 201523225, ServiceHost.Open called for service {0}.`RepositoryService`
---
2012-7-10T4:57:53.574, 93, 1, Information, 201523225, Logging event CommFxServiceHostOpened with params: ServiceName={0} `RepositoryService`
---
2012-7-10T4:57:53.574, 94, 14, Information, 49153, Node 27c0ade8-285e-4250-b10d-cabc5daccfef BeginWorkflow, : Reset workflow from {0}`BeginWorkflow`
---
2012-7-10T4:57:53.575, 95, 1, Information, 201523251, GetServiceBehaviors called for behavior config {0}`FabricServiceBehavior`
---
2012-7-10T4:57:53.575, 96, 1, Verbose, 201523249, GetServiceBehaviorConfiguration called for configuration {0}`FabricServiceBehavior`
---
2012-7-10T4:57:53.575, 97, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.576, 98, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.576, 99, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.576, 100, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.576, 101, 1, Information, 201523253, Ignoring the DataContractSerializerServiceBehavior.`
---
2012-7-10T4:57:53.576, 102, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.576, 103, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.576, 104, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.576, 105, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.576, 106, 1, Information, 201523251, Returning {0} service behaviors for the behavior config {1}`4`FabricServiceBehavior`
---
2012-7-10T4:57:53.578, 107, 14, Information, 201523223, Contract: RD.Fabric.Controller.IAgent Checking channel terminal states.`
---
2012-7-10T4:57:53.578, 108, 14, Information, 201523222, Contract: RD.Fabric.Controller.IAgent Creating channel.`
---
2012-7-10T4:57:53.594, 109, 1, Information, 0, Repository Service is up and running...`
---
2012-7-10T4:57:53.595, 110, 1, Information, 0, Starting Management Service...`
---
2012-7-10T4:57:53.595, 111, 1, Information, 201523202, CreateService called for {0}`Microsoft.Windows.Azure.DevFabric.DevFabricManagement`
---
2012-7-10T4:57:53.600, 112, 1, Information, 201523202, Logging event CommFxServiceHostCreated with params: ServiceName={0} `Microsoft.Windows.Azure.DevFabric.DevFabricManagement`
---
2012-7-10T4:57:53.600, 113, 1, Verbose, 201523256, GetBindingFromConfig called.`
---
2012-7-10T4:57:53.600, 114, 1, Verbose, 201523250, GetBindingConfiguration called for configuration {0}`LargeNetTcpBinding`
---
2012-7-10T4:57:53.600, 115, 1, Information, 201523257, Created binding of type {0}`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.600, 116, 1, Information, 201523257, Applying configuration {0} to binding type {1}`LargeNetTcpBinding`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.600, 117, 1, Verbose, 201523256, GetBindingFromConfig called.`
---
2012-7-10T4:57:53.600, 118, 1, Verbose, 201523250, GetBindingConfiguration called for configuration {0}`LargeNetTcpBinding`
---
2012-7-10T4:57:53.600, 119, 1, Information, 201523257, Created binding of type {0}`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.601, 120, 1, Information, 201523257, Applying configuration {0} to binding type {1}`LargeNetTcpBinding`System.ServiceModel.NetTcpBinding`
---
2012-7-10T4:57:53.601, 121, 1, Information, 201523203, StartService called for {0}`Microsoft.Windows.Azure.DevFabric.DevFabricManagement`
---
2012-7-10T4:57:53.601, 122, 1, Verbose, 201523225, ServiceHost.Open called for service {0}.`DevFabricManagement`
---
2012-7-10T4:57:53.601, 123, 1, Information, 201523225, Logging event CommFxServiceHostOpened with params: ServiceName={0} `DevFabricManagement`
---
2012-7-10T4:57:53.601, 124, 1, Information, 201523251, GetServiceBehaviors called for behavior config {0}`FabricServiceBehavior`
---
2012-7-10T4:57:53.601, 125, 1, Verbose, 201523249, GetServiceBehaviorConfiguration called for configuration {0}`FabricServiceBehavior`
---
2012-7-10T4:57:53.601, 126, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.601, 127, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.601, 128, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.601, 129, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.601, 130, 1, Information, 201523253, Ignoring the DataContractSerializerServiceBehavior.`
---
2012-7-10T4:57:53.601, 131, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.601, 132, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.601, 133, 1, Information, 201523254, Creating service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.601, 134, 1, Information, 201523254, Copying properties for service behavior {0}`System.ServiceModel.Description.IServiceBehavior`
---
2012-7-10T4:57:53.601, 135, 1, Information, 201523251, Returning {0} service behaviors for the behavior config {1}`4`FabricServiceBehavior`
---
2012-7-10T4:57:53.608, 136, 14, Information, 201523224, Contract: RD.Fabric.Controller.IAgent Configuring channel factory with default and custom behaviors.`
---
2012-7-10T4:57:53.613, 137, 1, Information, 0, Management Service is up and running...`
---
2012-7-10T4:57:53.615, 138, 1, Information, 0, DevFabric is up and running...`
---
2012-7-10T4:57:53.618, 139, 14, Information, 201523223, Contract: RD.Fabric.Controller.IAgent Channel state is {0}`Created`
---
2012-7-10T4:57:53.618, 140, 14, Information, 201523220, Contract: RD.Fabric.Controller.IAgent GetChannel did not require channel recycle. Reusing existing channel.`
---
2012-7-10T4:57:53.619, 141, 14, Verbose, 0, 898878e0-3e5d-4335-8a1a-ada2578c2aa8`GetAgentState`System.Object[]`
---
2012-7-10T4:57:53.621, 142, 14, Information, 201523260, Logging event CommFxClientOperationInvoked with params: Id={0} TimeAtActionInvoke={1} ClientVersion={2} ClientCapabilities={3} From={4} To={5} Action={6} `00000000-0000-0000-0000-000000000000`10.07.2012 4:57:53`<null>`<null>`KOCHEKOVSKY`net.tcp://localhost:15098/dfagent/1/host`IAgent/GetState`
---
2012-7-10T4:57:55.702, 143, 14, Error, 0, 898878e0-3e5d-4335-8a1a-ada2578c2aa8`GetAgentState`System.ServiceModel.EndpointNotFoundException: ?? ??????? ???????????? ? net.tcp://localhost:15098/dfagent/1/host. ??????? ??????????? ??????????? ? ??????? ????????? ??????? 00:00:02.0014000\. ??? ?????? TCP 10061: ??????????? ?? ???????????, ?.?. ???????? ????????? ?????? ?????? ?? ??????????? 127.0.0.1:15098\.  ---> System.Net.Sockets.SocketException: ??????????? ?? ???????????, ?.?. ???????? ????????? ?????? ?????? ?? ??????????? 127.0.0.1:15098
   ? System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   ? System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   ? System.ServiceModel.Channels.SocketConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
   --- ????? ??????????? ??????????? ????? ?????????? ---

Server stack trace: 
   ? System.ServiceModel.Channels.SocketConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
   ? System.ServiceModel.Channels.BufferedConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
   ? System.ServiceModel.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout)
   ? System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)
   ? System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   ? System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   ? System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   ? System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)
   ? System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
   ? System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   ? System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   ? System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   ? System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   ? System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   ? RD.Fabric.Controller.IAgent.GetState()
   ? RD.Fabric.Controller.DevFabricAgentInterface.<>c__DisplayClass2b.<GetAgentState>b__2a(IAgent agent)
   ? RD.Fabric.Controller.DevFabricAgentInterface.CallAgent(AgentCallDelegate agentCall, String operation)`
---
2012-7-10T4:57:55.702, 144, 14, Information, 0, GetAgentState fails.`
---
2012-7-10T4:57:56.703, 145, 14, Information, 0, Calling to Poll Health from PollAgent code`
---
2012-7-10T4:57:56.703, 146, 14, Information, 201523223, Contract: RD.Fabric.Controller.IAgent Checking channel terminal states.`
---
2012-7-10T4:57:56.703, 147, 14, Information, 201523223, Contract: RD.Fabric.Controller.IAgent Channel state is {0}`Faulted`
---
2012-7-10T4:57:56.703, 148, 14, Information, 201523219, Contract: RD.Fabric.Controller.IAgent GetChannel required channel recycle. Returning new channel.`
---
2012-7-10T4:57:56.704, 149, 14, Information, 201523222, Contract: RD.Fabric.Controller.IAgent Creating channel.`
---
2012-7-10T4:57:56.704, 150, 14, Information, 201523224, Contract: RD.Fabric.Controller.IAgent Configuring channel factory with default and custom behaviors.`
---
2012-7-10T4:57:56.704, 151, 14, Verbose, 0, 898878e0-3e5d-4335-8a1a-ada2578c2aa8`GetAgentState`System.Object[]`
---
2012-7-10T4:57:56.704, 152, 14, Information, 201523260, Logging event CommFxClientOperationInvoked with params: Id={0} TimeAtActionInvoke={1} ClientVersion={2} ClientCapabilities={3} From={4} To={5} Action={6} `00000000-0000-0000-0000-000000000000`10.07.2012 4:57:56`<null>`<null>`KOCHEKOVSKY`net.tcp://localhost:15098/dfagent/1/host`IAgent/GetState`
---
2012-7-10T4:57:58.715, 153, 14, Error, 0, 898878e0-3e5d-4335-8a1a-ada2578c2aa8`GetAgentState`System.ServiceModel.EndpointNotFoundException: ?? ??????? ???????????? ? net.tcp://localhost:15098/dfagent/1/host. ??????? ??????????? ??????????? ? ??????? ????????? ??????? 00:00:02.0094056\. ??? ?????? TCP 10061: ??????????? ?? ???????????, ?.?. ???????? ????????? ?????? ?????? ?? ??????????? 127.0.0.1:15098\.  ---> System.Net.Sockets.SocketException: ??????????? ?? ???????????, ?.?. ???????? ????????? ?????? ?????? ?? ??????????? 127.0.0.1:15098
   ? System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   ? System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   ? System.ServiceModel.Channels.SocketConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
   --- ????? ??????????? ??????????? ????? ?????????? ---

Server stack trace: 
   ? System.ServiceModel.Channels.SocketConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
   ? System.ServiceModel.Channels.BufferedConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
   ? System.ServiceModel.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout)
   ? System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)
   ? System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   ? System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   ? System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   ? System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)
   ? System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
   ? System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   ? System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   ? System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   ? System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   ? System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   ? RD.Fabric.Controller.IAgent.GetState()
   ? RD.Fabric.Controller.DevFabricAgentInterface.<>c__DisplayClass2b.<GetAgentState>b__2a(IAgent agent)
   ? RD.Fabric.Controller.DevFabricAgentInterface.CallAgent(AgentCallDelegate agentCall, String operation)`
---
2012-7-10T4:57:58.716, 154, 14, Information, 0, GetAgentState fails.` 
```

DFAgent日志：

```
[2012/07/06, 08:48:31.363,  INFO, 00009220] StorageRoot: C:\DFTemp
[2012/07/06, 08:48:31.544,  INFO, 00009220] The parameters and the method signature does not match
[2012/07/06, 08:48:31.547,  INFO, 00009220]    в System.Reflection.RuntimeParameterInfo.GetParameters(IRuntimeMethodInfo methodHandle, MemberInfo member, Signature sig, ParameterInfo& returnParameter, Boolean fetchReturnParameter)
   в System.Reflection.RuntimeMethodInfo.FetchNonReturnParameters()
   в System.Reflection.RuntimeMethodInfo.GetParameters()
   в System.ServiceModel.Description.ServiceReflector.ValidateParameterMetadata(MethodInfo methodInfo)
   в System.ServiceModel.Description.TypeLoader.CreateOperationDescriptions(ContractDescription contractDescription, ContractReflectionInfo reflectionInfo, Type contractToGetMethodsFrom, ContractDescription declaringContract, MessageDirection direction)
   в System.ServiceModel.Description.TypeLoader.CreateContractDescription(ServiceContractAttribute contractAttr, Type contractType, Type serviceType, ContractReflectionInfo& reflectionInfo, Object serviceImplementation)
   в System.ServiceModel.Description.TypeLoader.LoadContractDescriptionHelper(Type contractType, Type serviceType, Object serviceImplementation)
   в System.ServiceModel.Description.TypeLoader.CreateContractDescription(ServiceContractAttribute contractAttr, Type contractType, Type serviceType, ContractReflectionInfo& reflectionInfo, Object serviceImplementation)
   в System.ServiceModel.Description.TypeLoader.LoadContractDescriptionHelper(Type contractType, Type serviceType, Object serviceImplementation)
   в System.ServiceModel.Description.ContractDescription.GetContract(Type contractType, Object serviceImplementation)
   в System.ServiceModel.ServiceHost.CreateDescription(IDictionary`2& implementedContracts)
   в System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses)
   в System.ServiceModel.ServiceHost.InitializeDescription(Type serviceType, UriSchemeKeyedCollection baseAddresses)
   в System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses)
   в Microsoft.Windows.Azure.Fabric.Cfx.Contracts.CommunicationFrameworkServ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:08:55.203

我可能不知道您的机器上发生的事情的确切原因，但可以通过尝试以下步骤来帮助您解决此问题：

1.  确保 Azure DevFabric 未在您的计算机中运行
2.  现在在管理员模式下打开 Windows Azure SDK 1.7 命令提示符并设置如下（确保有“newdftemp”文件夹，如下所述）：

    > 设置 _CSRUN_STATE_DIRECTORY=C:\newdftemp

3.  启动 dev Fabric 如下：

    > csrun /devfabric:开始

4.  这将启动 Azure Emulator 并预计会因上述问题而崩溃
5.  现在打开 C:\newdftemp\DevFCLogs 文件夹，你会发现一个日志文件 DevFabric--*.log。检查这个文件，看看可能是什么问题。（日志文件会很大，所以你不能把所有的都放在这里，但它会解释什么不会写并帮助你）
6.  您还可以打开免费事件以从 Windows Azure 支持团队获得帮助并共享此日志以在需要时获得进一步的帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T19:22:53.117

查看日志后，这是我的调查：

代理配置定义如下：

```
C:\Program Files\Microsoft SDKs\Windows Azure\Emulator\devfabric\DevFC.exe.Config 
```

代理端口设置为 15098，如下所示：

```
<DevFCSettings>
    <add key="AgentPort" value="15098" />
</DevFCSettings> 
```

现在当代理在你的机器上启动时

```
2012-7-10T4:57:55.702, 143, 14, Error, 0, 898878e0-3e5d-4335-8a1a-ada2578c2aa8`
GetAgentState`System.ServiceModel.EndpointNotFoundException:
         net.tcp://localhost:15098/dfagent/1/host.
         127.0.0.1:15098\.  ---> System.Net.Sockets.SocketException:
         127.0.0.1:15098 
? System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
? System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
? System.ServiceModel.Channels.SocketConnectionInitiator.Connect(Uri uri, TimeSpan timeout) 
```

因此，主要问题是您在开发机器中遇到了分类 WCF“EndpointNotFoundException”异常，这会导致 Compute Emulator 崩溃。您需要解决此问题以解决您的计算模拟器问题。

在我之前的一项[类似调查](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/08/windows-azure-application-error-tcp-error-code-10061-no-connection-could-be-made-because-the-target-machine-actively-refused-it-127-0-0-1-808.aspx)中，我发现特定端口已被其他服务使用，因此服务无法使用它。在您的情况下，问题是找不到端点。

这里有几点建议：

[ [1](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/08/windows-azure-application-error-tcp-error-code-10061-no-connection-could-be-made-because-the-target-machine-actively-refused-it-127-0-0-1-808.aspx) ] 尝试在您的机器上修复服务模型安装，如下所示：

```
 C:\Windows\Microsoft.NET\Framework64\v4.0.30319>ServiceModelReg.exe -r 
```

[ [2](http://msdn.microsoft.com/en-us/library/ms733025.aspx) ] 尝试在您的 DevFC.exe.config 中启用 WCF 跟踪，如此[链接](http://msdn.microsoft.com/en-us/library/ms733025.aspx)中所述。这将有助于解决您遇到此类异常的原因，并提供进一步的步骤来找到解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-08T11:08:45.177

我最近在使用 Visual Studio Azure Compute Emulator 时遇到了类似的问题，并且无法启动任何云项目。这是解决方法：

*问题：*

Azure 模拟器崩溃并出现错误 0x800700b7：当该文件已存在时无法创建该文件

*原因：*

此问题背后的实际原因是 WMI 类丢失或失败。

*解决方案：*

1.  转到开始运行并输入 wmimgmt.msc

2.  右键单击本地 WMI 控件（本地）并选择属性。

3.  在常规选项卡上，如果该框上注明了任何故障，则表明存在核心 WMI 问题。

4.  找到 Win32_Processor 命名空间/类 [WMI 控件属性的 .MOF 文件](http://i.stack.imgur.com/OwzgR.jpg)

5.  通过运行 mofcomp.exe 'MOFFilename.MOF' 修复 MOF 文件。mofcomp.exe 位于 C:\Windows\System32\wbem 文件夹中。

6.  [然后通过运行命令 regsvr32 'MOFFilename.dll' cmd](http://i.stack.imgur.com/NhhPE.jpg)重新注册关联的 DLL

7.  通过再次检查 WMI 控件 (wmimgmt.msc) 来验证它是否已修复。这一次，如下图所示，不再有 WMI 类错误。

8.  然后，重新启动模拟器，这次您将看到模拟器再次运行，这次没有问题/崩溃。

# php - php从带有空格的文件中读取

> ID：11391366
> 
> 赞同：0
> 
> 时间：2012-07-09T08:22:37.643
> 
> 标签：php, parsing

我有一个格式如下的txt文件：

```
string1 value
string2 value
string3 value 
```

我必须解析从外部脚本更改的“值”，但 stringX 是静态的。我怎样才能得到每行的价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:28:03.287

那应该对你有用。

```
$lines = file($filename);
$values = array();

foreach ($lines as $line) {
    if (preg_match('/^string(\d+) ([A-Za-z]+)$/', $line, $matches)) {
        $values[$matches[1]] = $matches[2];
    } 
}

print_r($values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:39:56.063

这可以帮助你。它一次读取一行，即使 Text.txt 包含 1000 行，如果您`file_put_contents`每次都执行一次，例如`file_put-contents("result.txt", $line[1])`，文件将在每次读取**一行**时更新（或您想要执行的任何操作），而不是**之后**读取所有 1000 行。在任何给定时间，内存中只有一行。

```
<?php

$fp = fopen("Text.txt", "r") or die("Couldn't open File");
while (!feof($fp)) { //Continue loading strings till the end of file
    $line = fgets($fp, 1024); // Load one complete line
    $line = explode(" ", $line);

    // $line[0] equals to "stringX"
    // $line[1] equals to "value"

    // do something with $line[0] and/or $line[1]
    // anything you do here will be executed immediately
    // and will not wait for the Text.txt to end.

} //while loop ENDS

?> 
```

# jquery - 适用于所有“选择选项”问题

> ID：11391370
> 
> 赞同：0
> 
> 时间：2012-07-09T08:22:53.153
> 
> 标签：jquery

我正在尝试将所选选项应用于其他下拉菜单，但在将值应用于所有下拉菜单时遇到问题。

HTML：

```
<!-- Default drop -->
<select class="fldSizeSelect" id="" name="">
    <option value="option one">-</option>
    <option value="option two">S</option>
    <option value="option three">M</option>
    <option value="option four">L</option>
    <option value="option five">XL</option>
</select>
<select class="fldSize" id="" name="">
    <option value="">-</option>
    <option value="s">S</option>
    <option value="m" selected="selected">M</option>
    <option value="l">L</option>
    <option value="xl">XL</option>
</select>
<select class="fldSize" id="" name="">
    <option value="">-</option>
    <option value="s">S</option>
    <option value="m" selected="selected">M</option>
    <option value="l">L</option>
    <option value="xl">XL</option>
</select>
<input type="button" value="Apply to all" class="selectedToAll" id="" name=""> 
```

查询：

```
$('.selectedToAll').click(function () {
    var position =  $('.fldSizeSelect option:selected').index();        
    $('.fldSize option').eq(position).attr('selected', 'selected');
}); 
```

目前，如果我从顶部下拉列表中进行选择并单击全选，它只会将该值应用于具有“fldSize”类的第一个下拉列表。我尝试使用 each() 但没有运气。

我最初得到了该值并应用于所有，但这会导致问题，因为第一个选项也被默认值覆盖（因此，如果选择了“M”并将其应用于以下下拉列表的所有输出，则变为 - M，S , 中号, L, XL)。

使用当前方法，将应用正确的选项，但仅适用于第一个下拉菜单，而不是全部。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:27:40.280

为了适用于`.fldSize`您应该使用的所有选择字段[`each`](http://api.jquery.com/each/)：

```
$('.selectedToAll').click(function() {
    var position = $('.fldSizeSelect option:selected').index();
    $('.fldSize').each(function() {
        $(this).children().eq(position).attr('selected', 'selected');
    });
});​ 
```

**演示：http:** [//jsfiddle.net/g46P6/](http://jsfiddle.net/g46P6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:31:29.720

为什么不能使用值？将 HTML 的第一部分更改为：

```
<select class="fldSizeSelect" id="" name="">
    <option value="">-</option>
    <option value="s">S</option>
    <option value="m">M</option>
    <option value="l">L</option>
    <option value="xl">XL</option>
</select> 
```

然后这样做：

```
$('.selectedToAll').click(function () {
    var value = $('.fldSizeSelect').val();
    $('.fldSize').val(value);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:36:20.427

尝试这个：

```
$('.selectedToAll').click(function () {
    var position =  $('.fldSizeSelect option:selected').index();        
    $('.fldSize:eq(0) option').eq(position).prop('selected', true);
    $('.fldSize:eq(1) option').eq(position).prop('selected', true);
}); 
```

[http://jsfiddle.net/JkfcB/](http://jsfiddle.net/JkfcB/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T08:27:09.380

```
$('.selectedToAll').click(function () {
    var position =  $('.fldSizeSelectoption:selected').index();     
    $('.fldSize option').eq(position).attr('selected', 'selected');
}); 
```

您必须在 .fldSize 和选项之间放置一个空格。

# haskell - bruteforce with lazy evaluation and memory consumption

> ID：11391377
> 
> 赞同：6
> 
> 时间：2012-07-09T08:23:30.237
> 
> 标签：haskell, ghc, lazy-evaluation, brute-force

I implemented a small function `bruteforce`, using lazy evaluation to find the first valid solution for a problem:

```
import Data.Maybe

bruteforce :: (a -> Bool) -> [a] -> Maybe a
bruteforce f xs
  | null result = Nothing
  | otherwise = Just $ head result
  where
    result = mapMaybe bruteforce' xs
    -- test one instance
    bruteforce' x
      | f x = Just x
      | otherwise = Nothing

generatorString :: Int -> [String]
generatorString 0 = [""]
generatorString deep = concatMap (\x -> map (\ys -> (x:ys)) nextgen) ['a'..'z']
  where nextgen = generatorString (deep - 1)

main :: IO ()
main = do
  putStrLn $ fromJust $ bruteforce ((==) "zabcde") (generatorString 6) 
```

also avaiable as a [gist](https://gist.github.com/3074977). yes, the test function is stupid, but it's enough to show what's the problem. It works as expected, however memory consumption is quite high:

```
$ ghc --make -O2 brute.hs -o brute -rtsopts
$ ./brute +RTS -s
zabcde
  24,752,866,120 bytes allocated in the heap
  15,748,430,224 bytes copied during GC
     581,741,352 bytes maximum residency (22 sample(s))
      18,464,056 bytes maximum slop
            1719 MB total memory in use (0 MB lost due to fragmentation)
[...] 
```

so I tried to force the RTS using less memory (i.e. call the GC more often). 200 MB should be enough?

```
$ ./brute +RTS -s -M200M
Heap exhausted;
Current maximum heap size is 209715200 bytes (200 MB);
use `+RTS -M<size>' to increase it. 
```

well, nope (I wouldn't like this approach anyway...)

Any pointers how one could rewrite `bruteforce` to be more memory friendly?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T09:14:40.830

If the memory consumption is the primary concern, stop sharing `nextgen`. That's a huge list.

So replace

```
generatorString deep = concatMap (\x -> map (\ys -> (x:ys)) nextgen) ['a'..'z']
  where nextgen = generatorString (deep - 1) 
```

with

```
generatorString deep = concatMap (\x -> map (\ys -> (x:ys)) $ generatorString (deep - 1)) ['a'..'z'] 
```

and tell the compiler that you're serious about not sharing it:

```
$ ghc -O2 -fno-full-laziness -rtsopts bruteforce 
```

That runs in

```
 $ ./bruteforce +RTS -s
 zabcde
 189,448,835,904 bytes allocated in the heap
  18,301,350,520 bytes copied during GC
          29,504 bytes maximum residency (16901 sample(s))
          37,248 bytes maximum slop
               2 MB total memory in use (0 MB lost due to fragmentation) 
```

small resident memory. Of course the recomputation means the total allocation is much higher, and it also takes much longer to compute the result.

A better algorithm could reduce space *and* time consumption.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T08:33:43.927

You could skip all those `Just`s and `Nothing`s I guess...

```
import Data.Maybe (listToMaybe)

bruteforce   :: (a -> Bool) -> [a] -> Maybe a
bruteforce f = listToMaybe . filter f 
```

This is probably as memory-friendly as `bruteforce` can get; any other problems are because of the function `f` that is being brute-forced.

* * *

The `generatorString` function can be rewritten like this:

```
import Control.Monad (replicateM)

generatorString :: Int -> [String]
generatorString = flip replicateM ['a'..'z'] 
```

If you want me to explain how this works, let me know in a comment. What the improvement boils down to is that it uses prefix sharing instead of suffix sharing. I.e. it generates strings like this:

```
"aa"
"ab"
...
"az"
"ba" 
```

... instead of:

```
"aa"
"ba"
...
"za"
"ab"
"bb" 
```

This means that the prefix (in this simple example, it's only `('a':)` and then `('b':)`) is shared, instead of storing the list of suffixes and reusing it (the list `["a", "b", "c", ..., "z"]` in this example). You can imagine that as `n` increases, the suffix list will grow with `26^n`, while the prefix list will grow with `n`. This comes at the cost of constructing the whole current string at every iteration, of course, but the memory usage is much lower.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-09T10:49:16.117

I think that you generator is kind of too strict. An optimal generator is supposed to yield as much of the result list as possible with as little information about the result of the recursive application.

Let us consider the following line.

```
concatMap (\x -> map (\ys -> (x:ys)) nextgen) ['a'..'z'] 
```

Now, let us check what happens if we only know that `nextgen` is not the empty list. In order to illustrate this we replace the variable `nextgen` by the expression `undefined:undefined`. The following equations illustrate the evaluation of the considered expression.

```
 concatMap (\x -> map (\ys -> (x:ys)) (undefined:undefined)) ['a'..'z']
= concat (map (\x -> map (\ys -> (x:ys)) (undefined:undefined)) ['a'..'z'])
= concat (map (\ys -> ('a':ys)) (undefined:undefined) : map (\x -> map (\ys -> (x:ys)) (undefined:undefined)) ['b'..'z'])
= concat (('a':undefined) : undefined) : map (\x -> map (\ys -> (x:ys)) (undefined:undefined)) ['b'..'z'])
= ('a':undefined) : undefined 
```

Your specific application can already discard many results by comparing the first character of the generated string and the search string. Therefore, we are looking for a generator that yields the heads of the generated strings as soon as possible.

Let us change the roles of the static information (list of characters) and the recursive application. We get the following expression.

```
concatMap (\ys -> map (:ys) ['a'..'z']) nextgen 
```

Now, let us do the same calculation as before.

```
 concatMap (\ys -> map (:ys) ['a'..'z']) (undefined:undefined)
= concat (map (\ys -> map (:ys) ['a'..'z']) (undefined:undefined))
= concat (map (:undefined) ['a'...'z'] : map (\ys -> map (:ys) ['a'..'z']) undefined)
= map (:undefined) ['a'...'z'] ++ concat (map (\ys -> map (:ys) ['a'..'z']) undefined 
```

The application `map (:undefined) ['a'...'z']` already yields a list where all heads are defined. Therefore, the test can already fail for most of these strings by only evaluating the recursive application to head normal form.

With this altered implementation we get the following results.

```
$ ./brute +RTS -s
zabcde
4,165,170,696 bytes allocated in the heap
    5,569,320 bytes copied during GC
       29,848 bytes maximum residency (5 sample(s))
       26,560 bytes maximum slop
            2 MB total memory in use (0 MB lost due to fragmentation) 
```

Nevertheless, as this change is quite specific to the application at hand it might not be applicable to your actual application.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T22:58:05.437

Since no one seems to have mentioned this yet, I'd just like to point out that

bruteforce = Data.List.find

# c - Linux：如何找到持有特定锁的线程？

> ID：11391379
> 
> 赞同：4
> 
> 时间：2012-07-09T08:23:33.957
> 
> 标签：c, linux, pthreads

我有一个在 Linux 上运行的多线程程序，有时如果我对它运行 gstack，有一个线程等待锁定很长时间（比如 2-3 分钟），

> 线程 2（线程 0x5e502b90 (LWP 19853)）：
> 
> 0 0x40000410 在 __kernel_vsyscall ()
> 
> 1 来自 /lib/i686/nosegneg/libpthread.so.0 的 __lll_lock_wait () 中的 0x400157b9
> 
> 2 0x40010e1d in _L_lock_981 () from /lib/i686/nosegneg/libpthread.so.0
> 
> 3 0x40010d3b 在来自 /lib/i686/nosegneg/libpthread.so.0 的 pthread_mutex_lock ()
> 
> ...

我检查了其余的线程，它们都没有获得这个锁，但是，过了一会儿，这个线程（LWP 19853）可以成功地获得这个锁。

应该有一个线程已经获得了这个锁，但是我没有找到它，我错过了什么吗？

编辑： pthread_mutex_t 的定义：

> 类型定义联合
> 
> {
> 
> 结构 __pthread_mutex_s {
> 
> int __lock;
> 
> 无符号整数__count；
> 
> int __owner;
> 
> /* KIND 必须保持在结构中的这个位置以保持二进制兼容性。*/
> 
> int __kind;
> 
> 无符号整数 __nuers;
> 
> **扩展**联合 { int __spins; __pthread_slist_t __list; };
> 
> } __数据;
> 
> 字符_*大小[* _SIZEOF_PTHREAD_MUTEX_T]；
> 
> 长整数 __align;
> 
> } pthread_mutex_t;

有一个成员“__owner”，它是现在持有互斥锁的线程的id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:47:16.667

2-3 分钟听起来很多，但是如果您的系统负载很重，则无法保证您的线程在另一个线程解锁互斥锁后立即唤醒。因此，在您查看它的那一刻，可能没有线程（不再）持有锁。

Linux 互斥锁分两个阶段工作。大致：

*   在第一阶段，对一个`int`值进行原子 CAS 操作，以查看是否可以立即锁定互斥锁。
*   如果这不可能`futex_wait`，则将具有相同地址的系统调用`int`传递给内核。

然后解锁操作包括将值更改回初始值（通常`0`）并进行`futex_wake`系统调用。然后内核查看是否有人`futex_wait`在同一地址上注册了调用，并在调度队列中恢复这些线程。真正唤醒哪个线程以及何时唤醒取决于不同的事情，特别是启用的调度策略。不能保证线程按照它们放置它们的顺序获得锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:10:46.000

Mutexes by default don't track the thread that locked them. (Or at least I don't know of such a thing )

There are two ways to debug this kind of problem. One way is to log every lock and unlock. On every thread creation you log the value of the thread id that got created. Right after locking any lock, you log the thread id, and the name of the lock that was locked ( you can use file/line for this, or assign a name to each lock). And you log again right before unlocking any lock.

This is a fine way to do it if your program doesn't have tens of threads or more. After that the logs start to become unmanageable.

The other way is to wrap your lock in a class that stores the thread id in a lock object right after each lock. You might even create a global lock registry that tracks this, that you can print out when you need to.

Something like:

```
class MyMutex
{
public:
    void lock() { mMutex.lock(); mLockingThread = getThreadId(); }
    void unlock() { mLockingThread = 0; mMutex.unlock(); }
    SystemMutex mMutex;
    ThreadId    mLockingThread;
}; 
```

The key here is - don't implement either of these methods for your release version. Both a global locking log, or a global registry of lock states creates a single global resource that will itself become a resource under lock contention.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:53:02.340

POSIX API 不包含执行此操作的函数。

在某些平台上，实现也可能不允许这样做。
例如，锁可以使用原子变量，锁定时设置为 1。获取它的线程不必在任何地方写它的ID，所以没有函数可以找到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:46:09.827

对于此类调试问题，您可能会在程序中添加两个特殊的日志记录调用，说明哪个线程何时获得锁以及何时返回锁。

这样的日志条目将帮助您找到最后获得锁的线程。

无论如何，这样做可能会极大地改变程序的运行时行为，并且要调试的问题将不再像多线程应用程序中常见的经典[heisenbug那样出现。](http://en.wikipedia.org/wiki/Heisenbug)

# php - 如何使用 Symfony2 更改现有表单中的输入类型？

> ID：11391380
> 
> 赞同：0
> 
> 时间：2012-07-09T08:23:37.737
> 
> 标签：php, symfony, doctrine-orm, dbal

我有表单类，我在其中定义了一些输入，类似于这样：

```
class User extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('mail', 'text', array('label' => 'Mail'))
                ->add('password', 'text', array('label' => 'Hasło'))
                ->add('description', 'textarea', array('label' => 'Opis'));
    }
} 
```

我想将邮件和密码输入类型更改为只读并设置它们一些值。现在，我以这种方式使用表单：

```
$form = $this->createForm(new User($this->get('database_connection'))); 
```

我尝试了很多东西，但是 Symfony2 有很多 Form 类，我已经迷失了。我想简单地为现有的添加输入添加一些属性。我不使用 Doctrine2 ORM，我使用 Doctrine DBAL，如果它确实重要的话。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T08:41:23.653

您可以使用“数据”参数设置默认值，使用 attr 参数设置只读

```
$builder
    ->add('mail', 'text', array('label' => 'Mail', 'data' => 'Default value'
           attr => array('readonly=>'readonly'))); 
```

# c# - C# 方法重载问题，字符串 string[] 转换

> ID：11391382
> 
> 赞同：-1
> 
> 时间：2012-07-09T08:23:48.080
> 
> 标签：c#

我试图让下面的工作如下。name(something) 将某些内容添加到列表中。然后 name() 检索值。但是我遇到了一些问题，希望你们中的一个人知道发生了什么。

```
public class PlayerSettings
{
    public List<string[]> Players = new List<string[]>();
    public void Name(string input)
    {
        string[] addname = new string[1];
        addname[0] = input;
        Players.Add(addname);
    }
    public string[] Name()
    {
        foreach (string[] Player in Players)
        {
            return Player[0];
        }
    }
} 
```

在下面的行中无法将类型字符串隐式转换为字符串 [] 错误。

```
return Player[0]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:28:39.060

你返回数组的元素而不是数组，替换`public string[] Name()`为`public string Name()`

或者如果您需要使用一项的数组`Array.Resize(*params*)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:29:23.100

你可以尝试类似的东西

```
public class PlayerSettings
{
    public List<String> Players = new List<String>();
    public void Name(String input)
    {
        Players.Add(input);
    }
    public IEnumerable<String> Names()
    {
        foreach (string Player in Players)
        {
            yield return Player;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T08:30:10.313

如果您的意思是您希望 Name() 返回一个累积值，例如逗号分隔的字符串：

```
 public string Name()    {  return string.Join("," Players.Select(p=>p[0]));    } 
```

如果它应该返回一个包含所有第一个值的列表：

```
 public string[] Name()    {  return Players.Select(p=>p[0]).ToArray();    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T08:31:07.313

这段代码可以满足您的要求：

```
public class PlayerSettings
{
    public List<string> Players = new List<string>();
    public void Name(string input)
    {
        Players.Add(input);
    }

    public IEnumerable<string> Name()
    {
        return Players;
    }
} 
```

但是，我**确定**这不是您想要的。

想想你真正想要你的代码做什么，特别是为什么你`List<string[]>`的代码中有一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T08:29:05.723

如果您愿意返回字符串数组，则需要返回 Player 而不是 Player[0]。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T08:29:27.863

`Player[0]`只是一个`string`。

但是您的方法定义说您正在返回一个字符串数组（`string[]`）

所以只是返回`Players.ToArray()`什么的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-09T08:29:40.573

您不能`return`多次使用一种方法。而且我不明白为什么内部列表是字符串*数组的列表。*我想你想要这样的东西：

```
public class PlayerSettings
{
    public List<string> Players = new List<string>();
    public void Name(string input)
    {
        Players.Add(input);
    }
    public string[] Name()
    {
        return Players.ToArray();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-09T08:41:10.877

首先`Player[0]`不是类型`string[]`，它只是一个字符串。因此，第二个的返回类型`Name()`应该是`string`and not `string[]`。

另外，我看不出使用`string[]`inside a的意义，`List<>`因为您只是插入一个字符串并检索它！

我认为这个修改后的代码应该对你有好处：

```
public class PlayerSettings
{
    public List<string> Players = new List<string>();
    public void Name(string input)
    {
        Players.Add(input);
    }
    public string Name()
    {
       return Players.ElementAt(0);
    }
} 
```

第一个重载 for`Name()`会将字符串添加到列表中，而第二个重载将返回添加的第一个字符串。您还可以`Name()`根据索引返回另一个，例如：

```
 public string Name(int index)
    {
        if (index >= 0 && index < Players.Count())
            return Players.ElementAt(index);
        else
            return null;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-09T08:41:12.033

您可以编写您的 playersettings 类，如：

```
public class PlayerSettings
{
    private List<string[]> Players = new List<string[]>();
    public void Name(string input)
    {`enter code here`
        string[] addname = new string[1];
        addname[0] = input;
        Players.Add(addname);
    }
    public string[] Name()
    {
        List<string> result = new List<string>();
        foreach (string[] Player in Players)
        {
            result.AddRange(Player);
        }
        return result.ToArray();
    }
} 
```

# jquery - 双击事件触发时如何取消单击事件

> ID：11391384
> 
> 赞同：4
> 
> 时间：2012-07-09T08:23:54.600
> 
> 标签：jquery

双击事件触发时如何取消单击事件？

我已经看过一些相关的，我发现了一些有用的东西

[检测到双击事件时需要取消单击/鼠标事件](https://stackoverflow.com/questions/1067464/need-to-cancel-click-mouseup-events-when-double-click-event-detected/1067484#1067484)

```
function singleClick(e) {
    // do something, "this" will be the DOM element
}

function doubleClick(e) {
    // do something, "this" will be the DOM element
}

$(selector).click(function(e) {
    var that = this;
    setTimeout(function() {
        var dblclick = parseInt($(that).data('double'), 10);
        if (dblclick > 0) {
            $(that).data('double', dblclick-1);
        } else {
            singleClick.call(that, e);
        }
    }, 300);
}).dblclick(function(e) {
    $(this).data('double', 2);
    doubleClick.call(this, e);
}); 
```

但是，如果我使用 .on("click") 而不是 .click()，则此代码不起作用。

知道这是为什么吗？我必须使用 .on() 所以使用 .click() 不是一个选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:26:56.947

如果您执行 .on('click')，则需要执行 .on('dblclick')。（在 dbl 没有触发的情况下也有同样的问题）

此外，如果事件没有触发，可能是因为您在此函数完成后添加了选择器。

所以...

...而不是 $(selector).on('click', function(){}) ...do $(selectors parent).on('click', selector, function(){})。

这是对 .live() 的超级简洁升级

```
function singleClick(e) {
    // do something, "this" will be the DOM element
}

function doubleClick(e) {
    // do something, "this" will be the DOM element
}

$('selector-parent').on('click', 'selector', function(e) {
    var that = this;
    setTimeout(function() {
        var dblclick = parseInt($(that).data('double'), 10);
        if (dblclick > 0) {
            $(that).data('double', dblclick-1);
        } else {
            singleClick.call(that, e);
        }
    }, 300);
}).on('dblclick', 'selector', function(e) {
    $(this).data('double', 2);

doubleClick.call(this, e);
}); 
```

# php - 为什么 beforeRender() 被调用了两次？

> ID：11391389
> 
> 赞同：1
> 
> 时间：2012-07-09T08:24:41.013
> 
> 标签：php, cakephp

我正在使用 CakePHP 2.2.0 并且我有这个 AppController：

```
<?php
    App::uses('Controller', 'Controller');

    class AppController extends Controller {
        public function beforeRender(){
           debug('test');
        }
    }
?> 
```

和这个简单的自定义控制器：

```
<?php

App::uses('AppController', 'Controller');

class ProvidersController extends AppController {

    public function index(){
        debug('index');
    }

}

?> 
```

我真的不明白为什么 AppController 的 beforeRender 被调用了两次......我在调试模式下看到两个“测试”字符串，当 URL 到达 ProvidersController 的 index() 方法时。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:40:58.333

当我在代码的其他地方有一个损坏的 src 时，我已经看到了这种行为。例如，如果找不到 javascript 文件，cake 将启动，导致逻辑再次运行。这可以解释为什么您会看到像 beforeRender() 这样的方法运行两次。

# windows - 将分号放在 Windows PATH 环境变量中

> ID：11391390
> 
> 赞同：5
> 
> 时间：2012-07-09T08:24:41.777
> 
> 标签：windows, environment-variables

添加新文件夹时，Windows PATH 环境变量中的尾随分号应该放在哪里？

是吗

*   [oldPATH];C:\我的文件夹
*   [oldPATH]C:\我的文件夹；
*   [旧路径];C:\我的文件夹;

?

我看到了不同的做法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T11:35:00.073

实际上，这并不是真正的语法问题。这里的正确答案是：*放置分号，这样结果是有效的`PATH`。*

这通常意味着以下之一：

```
set PATH=%PATH%;C:\Foo\Bar
set PATH=C:\Foo\Bar;%PATH% 
```

因为通常`PATH`不会以分号结尾，所以您必须适当地添加一个，以免破坏其中的现有路径。

只需查看`PATH`外观并考虑添加另一条路径时需要做什么。这意味着您必须添加分隔符（分号）和路径本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T08:28:26.750

第一个。至少这就是 Windows 在我的系统上所做的，所以如果 Windows 这样做，那可能是最好的:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:42:53.853

第一个：[oldPATH]; C:\我的文件夹。

如果您想确定，可以使用公式：“%PATH%;C:\My Folder”。

如果只是为了执行某些操作，例如，BAT 脚本，请使用：SET PATH "%PATH%;C:\My Folder"。（这个将作为一个时间变量工作）

通过命令行添加永久用户环境变量：SETX PATH "%PATH%;C:\My Folder"。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-27T06:15:14.177

您的 oldPATH 可能以分号结尾，因此在使用第四种样式时 [newPath];[OldPath] 您不要添加双分号。

```
path=%cd%;%path% 
```

请注意，windows 并不关心您是用大写还是小写编写命令。

# visual-studio-2010 - _InterlockedIncrement 内部实现

> ID：11391392
> 
> 赞同：2
> 
> 时间：2012-07-09T08:24:48.620
> 
> 标签：visual-studio-2010, assembly, x86, intrinsics

Visual Studio 在使用时会生成以下机器代码`_InterlockedIncrement`：

```
; 40   :        _InterlockedIncrement(&framecounter);

  00078 b8 00 00 00 00   mov     eax, OFFSET ?framecounter@@3JA ; framecounter
  0007d b9 01 00 00 00   mov     ecx, 1
  00082 f0 0f c1 08  lock     xadd   DWORD PTR [eax], ecx 
```

如果我要写这篇文章，我会使用 just`lock inc DWORD PTR [eax]`而不是`mov`and`xadd`

Microsoft 是否有正当理由首选`xadd`并使用 2 条指令而不是 1 条指令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T08:33:59.417

因为`_InterlockedIncrement`也返回新值。

你不能用 来做到这一点`lock inc DWORD PTR [eax]`，因为现在无论是旧值还是新值都找不到。除了在内存中，但如果你进行其他读取，显然它不会是原子的（增量本身是，但你可以得到一个与增量时发生的事情无关的值）。

返回值会`_InterlockedIncrement`更有用。

# apache-flex - Flex 图像源服务器端 Flash 和 Air

> ID：11391394
> 
> 赞同：0
> 
> 时间：2012-07-09T08:24:52.290
> 
> 标签：apache-flex, air

我正在尝试在 air 运行时而不是 flash 运行时中运行我的 flex 应用程序。除了图像之外，它似乎工作得很好。Adobe Air 运行时会尝试加载它们。有没有办法将图像的根地址更改为服务器端？如果可能的话，我想对 flash 运行时和 air 运行时使用相同的代码 ..“单一代码库 ;-)”

```
var icon:Image = new Image();
icon.source = "images/test.png"; 
```

关于西里尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:03:55.687

通常我会简单地将资产打包到 AIR 应用程序中。这样，相对路径在 Web 应用程序和桌面应用程序中都有效。但是，由于您在评论中指出我们正在谈论 10000 张图像，因此您必须找到另一种解决方案。

您需要的是一个可针对每种类型的项目进行配置的变量。访问图像的最终代码应如下所示：

```
var icon:Image = new Image();
icon.source = rootUrl + "/images/test.png"; 
```

这`rootUrl`可能`""`适用于 Web 应用程序和`"http://www.mydomain.com"`桌面应用程序。或者在这两种情况下它都可能是绝对路径。没关系：我们不想将该 URL 硬编码到我们的应用程序中。

创建一个包含值的 .properties 文件（或 XML 或 JSON；您喜欢的任何配置文件），`rootUrl`并将其读入您的应用程序模型。此配置文件可以打包到 AIR 应用程序中。

.properties 文件将如下所示：

```
#myapp.properties
rootUrl=http://www.mydomain.com 
```

要读取文件，您*可以*使用 AIR 的文件流功能，但我建议您使用 : 以老式方式加载它，`URLLoader`这样它就可以在 Web 和桌面应用程序中工作。

# mysql - MySQL - 将单词添加到文本列的末尾

> ID：11391401
> 
> 赞同：6
> 
> 时间：2012-07-09T08:25:13.913
> 
> 标签：mysql, sql, if-statement, insert

我需要在文本列的末尾添加单词“example” `keywords`。

**如果该列已经包含一些文本，添加的单词将用空格分隔**：

```
Column `keywords` = '';
Add word 'example'
Result `keywords` = 'example' 
```

**但**

```
Column `keywords` = 'Some text'
Add word 'example'
Result `keywords` = 'Some text example' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T08:27:36.073

```
UPDATE table
SET keyword=(
    CASE WHEN keyword=''
        THEN 'example'
        ELSE concat(keyword,' example')
    END
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T08:27:54.540

尝试

```
UPDATE table SET `keyword` = CONCAT_WS(' ','your text',`keyword`) 
```

[`Reference`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T08:34:14.033

试试这个：

```
UPDATE table 
   SET `keyword` = CONCAT(`keyword`, ' ', 'example') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-26T16:00:00.153

这是一些人可能更喜欢的另一种方法：

```
UPDATE `table` SET `keywords` = TRIM(CONCAT(`keywords`, ' ', 'example')) 
```

如果该字段为空，**则不会**留下前导空格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T08:28:07.457

```
select concat(keyword,' example') from tbl ; 
```

已编辑：要更新，请使用以下内容：

```
UPDATE table
SET keyword =  CASE keyword WHEN '' THEN 'example' ELSE concat(keyword,' example') END; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T08:28:29.850

试试这个：

从 myTable 中选择 CONCAT(keywords,'example')

# java - 使用 Virtual Box 在 Ubuntu 中运行 Java 类

> ID：11391402
> 
> 赞同：0
> 
> 时间：2012-07-09T08:25:17.883
> 
> 标签：java, unix, package

由于我是 Java 新手，我有一个问题。如标题所述，我在 VirtualBox 上运行 Ubuntu 服务器，但在使用 package.json 运行一个非常简单的类时遇到问题。

我给你代码：

```
package world;

public class HelloWorld{

public static void main (String[] args){

System.out.println("Hello World")
}
} 
```

确实非常简单的代码。用 编译后`javac HelloWorld.java`，没有错误（现在可以找到什么错误），

*   运行`java HelloWorld`，给我消息 NoClassDefFoundError
*   运行`java world.HelloWorld`返回无法找到或加载主类。

我怀疑它与 classpath 有关，但我找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:34:52.157

这是一个类路径问题。您可能可以通过查看`CLASSPATH`环境变量来检查您的类路径是什么。您可以尝试将您的类文件所在的目录添加到此 CLASSPATH 的末尾，但最简单的方法可能如下。

确保该`HelloWorld.java`文件位于名为 的目录`world`中，您可以编译如下：

```
javac world/HelloWorld.java 
```

`HelloWorld.class`这将在世界目录中创建一个文件。然后你可以尝试运行

```
java world.HelloWorld 
```

或者

```
java -classpath . world.HelloWorld 
```

从同一个地方。

您还可以使用`-d`带有 javac 的标志将类文件放在不同的位置，而不是源（.java 文件）所在的位置。

# c# - asp.net MVC 3 中的 LINQ to SQL

> ID：11391410
> 
> 赞同：0
> 
> 时间：2012-07-09T08:25:53.493
> 
> 标签：c#, linq

用于从 ParentCategoryID 列中选择 NULL 值的以下 SQL 查询的 LINQ 是什么：

```
SELECT ID, CategoryName, ParentCategoryID FROM Category 
WHERE (ParentCategoryID IS NULL) 
```

我尝试遵循 LINQ 但不起作用：

```
from u in db.Categories 
where (u.ParentCategoryID == null) 
select u 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:30:58.113

制作一些包含字段的类，您选择的那些（Class1）

```
List<Class1> list = CategoryRepository.Categories
                        .Where(x => x.ParentCategoryId != null)
                        .Select(x => new Class1(x.CategoryName, x.ParentCategoryId)
                        .ToList(); 
```

# silverlight - Silverlight 验证不起作用

> ID：11391414
> 
> 赞同：1
> 
> 时间：2012-07-09T08:26:12.370
> 
> 标签：silverlight, validation

我在验证字段时遇到了麻烦。我指定了一个名为 Test 的属性，其代码在小于零但验证不起作用时抛出异常。我正在使用从视图调用的 Web 服务。我想我忘了包括一些东西，但我不知道是什么。

预先感谢。

**页：**

```
namespace MonitorizacionIncidencias.Views
{
    public partial class TESTING : Page
    {
        private IncidenciasServiceClient proxy = new IncidenciasServiceClient();

        public TESTING()
        {
            InitializeComponent();

            proxy.NextCompleted += new EventHandler<NextCompletedEventArgs>(proxy_NextCompleted);
            proxy.NextAsync(null, 9, false);
        }        

        void proxy_NextCompleted(object sender, NextCompletedEventArgs e)
        {
            DataContext = e.Result;         
        }

    }
} 
```

**XAML：**

```
<TextBox Text="{Binding TEST, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" Height="23" HorizontalAlignment="Left" Margin="243,283,0,0" x:Name="textBox2" VerticalAlignment="Top" Width="120" /> 
```

**模型：**

```
[DataContract]
public class Incidencia
{

        [DataMember]
        public int TEST
        {
            get
            {
                return test;
            }
            set
            {
                if (value < 0)
                    throw new Exception("TEST EXCP");

                test = value;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:15:57.030

您正在做大部分工作，但实际上并没有处理它生成的[BindingValidationError 事件。](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.bindingvalidationerror%28v=vs.95%29.aspx)

**例如，在您的 XAML 中添加它（即应用于文本框或其父容器）：**

```
BindingValidationError="MyBindingValidationError" 
```

**并将您的实际处理放在这里：**

```
private void MyBindingValidationError(object sender, 
    ValidationErrorEventArgs e)
{
    if (e.Action == ValidationErrorEventAction.Added)
    {
        textBox2.Background = new SolidColorBrush(Colors.Red);

    }
    else if (e.Action == ValidationErrorEventAction.Removed)
    {
        textBox2.Background = new SolidColorBrush(Colors.White);
    }
} 
```

# azure - 我是否将 Azure 表存储或 SQL Azure 用于我们的 CQRS 读取系统？

> ID：11391415
> 
> 赞同：33
> 
> 时间：2012-07-09T08:26:16.457
> 
> 标签：azure, azure-sql-database, azure-storage, cqrs, azure-table-storage

我们即将在内部实施 CQRS 系统的读取部分，目标是大幅提高我们的读取性能。目前，我们的读取是通过一个 Web 服务进行的，该服务对规范化数据运行 Linq-to-SQL 查询，涉及从 SQL Azure 数据库进行一定程度的反序列化。

我们数据的简化结构是：

*   用户
*   对话（将消息分组到相同的收件人）
*   信息
*   收件人（一组用户）

我想将其移至非规范化状态，以便当用户请求查看它从以下任一读取的消息提要时：

**Azure 表存储中保存的非规范化表示**

*   UserID 作为 PartitionKey
*   作为 RowKey 的 ConversationID
*   任何易于更改的易失性数据都存储为实体
*   在实体中序列化为 JSON 的消息
*   所述消息的接收者在实体中序列化为 JSON
*   表存储中一行的大小有限（960KB）的主要问题
*   此外，对“易失性数据”列的任何查询都会很慢，因为它们不是键的一部分

**Azure 表存储中保存的规范化表示**

*   对话详细信息、消息和收件人的不同表
*   存储在对话表中的消息和收件人的分区键。
*   禁止那个；这遵循与上面相同的结构
*   解决最大行大小问题
*   但是规范化状态会降低非规范化表的性能增益吗？

或者

**SQL Azure 中保存的非规范化表示**

*   UserID 和 ConversationID 作为复合主键保存
*   任何易于更改的易失性数据都存储在单独的列中
*   在列中序列化为 JSON 的消息
*   所述消息的接收者在列中序列化为 JSON
*   索引和非规范化数据结构的最大灵活性
*   性能比表存储查询慢得多

我要问的是，是否有人有在表存储或 SQL Azure 中实现非规范化结构的经验，你会选择哪一个？还是我错过了更好的方法？

我的直觉是，表存储中的规范化（至少在某种程度上）数据将是可行的方法；但是我担心执行 3 次查询以获取用户的所有数据会降低性能提升。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-09T13:26:23.127

您考虑 Azure 表的主要驱动因素是极大地提高读取性能，并且根据您在“SQL Azure 中保存的非规范化表示”下的最后一点，在您使用 SQL Azure 的场景中“慢得多”。出于几个原因，我个人觉得这非常令人惊讶，并且会要求详细分析这种说法是如何提出的。我的默认立场是，在大多数情况下，SQL Azure 会快得多。

以下是我对这一说法持怀疑态度的一些原因：

*   SQL Azure 使用原生/高效的 TDS 协议返回数据；Azure 表使用 JSON 格式，更详细
*   只要您在 SQL Azure 中使用主键或有索引，SQL Azure 中的联接/过滤器就会非常快；Azure 表没有索引，连接必须在客户端执行
*   Azure Tables 返回的记录数限制（一次 1,000 条记录）意味着您需要实现多次往返以获取许多记录

尽管您可以通过创建包含自定义索引的附加表来伪造 Azure 表中的索引，但您有责任维护该索引，如果您不小心，这将减慢您的操作并可能创建孤立场景。

最后但并非最不重要的一点是，当您试图降低存储成本（它比 SQL Azure 便宜）以及需要比 SQL Azure 提供的更多存储时（尽管您现在可以使用联合来打破单个数据库最大存储限制）。例如，如果您需要存储 10 亿条客户记录，则使用 Azure Table 可能有意义。但在我看来，仅使用 Azure Tables 来提高速度是相当可疑的。

如果我站在你的立场上，我会非常质疑这种说法，并确保你拥有专业的 SQL 开发技能，可以证明你在完全改变你的架构之前已经达到了 SQL Server/SQL Azure 固有的性能瓶颈。

此外，我将定义您的绩效目标是什么。您是否希望访问速度提高 100 倍？您是否考虑过缓存？您是否在数据库中正确使用索引？

我的 2 美分... :)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-06-07T14:08:02.287

我不会试图争论*CQRS*的确切定义。当我们谈论*Azure*时，我将使用它的文档作为参考。从那里我们可以发现：

1.  [CQRS](https://docs.microsoft.com/en-us/azure/architecture/patterns/cqrs)不需要您使用单独的读取存储。

    > 为了更好地隔离，您可以将读取数据与写入数据**物理分离。**

    “你可以”并不意味着“你必须”。

2.  关于非规范化和读取优化：

    虽然

    > *基于CQRS*的系统的读取模型提供数据的物化视图，**通常**作为高度非规范化的视图

    关键是

    > 读取数据库可以使用自己的数据**模式，该模式针对查询进行了优化**

    它可以是不同的模式，但它仍然可以被规范化或至少不是“高度非规范化”。再说一遍——你可以，但这并不意味着你必须。

    不仅如此，如果你的性能是由于写锁而不是因为繁重的 SQL 请求而导致的：

    > 读存储可以是写存储的只读**副本**

    而当我们谈request的优化时，最好多谈request本身，少谈存储类型。

3.  **关于“它从任何一个**读取” [[...]](https://docs.microsoft.com/en-us/azure/architecture/patterns/materialized-view)

    > *物化视图*模式描述了在源数据不适合查询的格式、难以生成合适的查询或由于数据或数据的性质而导致查询性能较差的环境中生成数据的预填充**视图**店铺。

    这里的关键是**观点**是复数的。

    > 物化视图甚至可以针对单个查询进行优化。
    > 
    > ...
    > 
    > 物化视图往往专门针对一个或少量查询

    所以你的选择不在这三个选项之间。它实际上要广泛得多。同样，您不需要其他存储来创建视图。所有这些都可以在单个数据库中完成。

4.  关于

    > *我的直觉是，表存储*中的规范化（至少在某种程度上）数据将是可行的方法；但是我担心执行 3 次查询以获取用户的所有数据会降低性能提升。

    是的，当然，性能会受到影响！（还要考虑一致性问题）。但是在你测试之前你永远无法确定它是否可以。使用您的数据和您的请求。因为数据传输的延迟实际上可能少于某些复杂的 SQL 请求所需的时间。

所以一切归结为：

1.  您需要哪些功能以及*Table Storage*和/或*SQL Azure*具有哪些功能？
2.  然后，要花多少钱？

这些只能自己回答。而这些选择与性能关系不大。因为**如果其中**任何一个都有合适的索引，我相信性能几乎无法区分。

总结一下：

> SQL Azure 还是 Azure 表存储？

对于不同的请求和数据，您可以并且可能应该**同时**使用. 但是问题中的信息太少，无法给您确切的答案（我们需要一个确切的要求）。但我同意@HerveRoggero - 很可能你应该坚持使用*SQL Azure*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-15T19:52:34.807

我不确定是否可以为其他答案添加任何价值，但我想提请您注意根据您的查询路径对数据存储进行建模。你要一起查询所有提到的数据位吗？用户是否会在单击或其他内容后要求其中一些作为附加信息？我假设您已经考虑过这个问题，并且您肯定想要一次查询所有内容。即，API 或其他东西需要一次返回所有这些信息。

在这种情况下，没有什么比按键查询单个对象更好的了。如果您专门谈论[Azure 的表存储](https://azure.microsoft.com/en-us/services/storage/tables/)，它就在那里说它是一个*键值*存储。我很好奇您是否考虑过文档数据库（例如[Cosmos DB](https://azure.microsoft.com/en-us/services/cosmos-db/)）？如果您正在实施 CQRS 读取模型，您可以为每个用户生成一个文档，其中包含用户在提要中看到的所有信息。您通过用户 ID 查询该文档，这将是关键。在我看来，这种方法将是最佳的 CQRS 实现，因为毕竟您的目标是实现*读取*模型。除非我误解了您问题中的某些内容，或者您​​有充分的理由不使用文档数据库。

# c# - 调试 ASP.NET MVC3 自定义成员资格提供程序

> ID：11391417
> 
> 赞同：1
> 
> 时间：2012-07-09T08:26:22.340
> 
> 标签：c#, asp.net, asp.net-mvc-3, membership-provider

我正在尝试测试我的 asp.net mvc3 自定义会员提供程序。我似乎无法进入任何代码 - 我现在要做的就是验证用户是否已登录。

到目前为止我所做的是：

实现抽象 MembershipProvider 类：

```
public class SSDSMembershipProvider : MembershipProvider
{
        public override bool ValidateUser(string username, string password)
        {
            return true;
        } 
```

修改 web.config 以使用我的新提供程序：

```
 <membership defaultProvider="SSDSMembershipProvider">
      <providers>
        <clear/>
        <add name="SSDSMembershipProvider" type="MvcApplication6.Infrastructure.SSDSMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership> 
```

在 about HomeController 中添加 Authorize 属性：

```
 [Authorize]
    public ActionResult About()
    {
        return View();
    } 
```

授权属性是否会导致调用 ValidateUser 方法？如果我在 ValidateUser 上设置断点，它不会介入，浏览器会直接进入登录页面。我在这里采取了正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:16:49.350

您是否更改了 AccountController 中的代码？

您必须将方法“LogOn”中的代码从 Mebership.ValidateUser 更改为 SSDSMembershipProvider-Class 的新实例，然后调用 ValidateUser 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:11:38.857

`Authorize`只是将用户重定向到登录页面，一旦用户输入他/她的凭据并提交登录表单，就会调用验证用户。

# python - 如何在django中删除项目

> ID：11391424
> 
> 赞同：15
> 
> 时间：2012-07-09T08:26:39.980
> 
> 标签：python, django, project

最初，我在 Django 中有一个项目，现在我想删除最后一个项目并开始一个与上一个同名的新项目。我该怎么做？删除项目文件夹就足够了。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-09T08:28:56.440

删除项目文件夹就足够了，并且也可以在您的 apache 服务器中进行更改[如果您有的话]。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-08T19:06:18.627

要删除项目，您可以删除项目文件夹。但这种方法只有在使用 SQLite 作为数据库时才有效。

如果您在 Django 中使用 Postgresql 等任何其他数据库，则需要手动删除该数据库。

如果你在 VPS 上。只需转到项目文件夹所在的文件夹并输入命令`rm -r projectfoldername`

这应该删除文件夹及其内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-23T11:09:44.350

正如@Neverbackdown 所说，删除文件夹就足够了，但与此同时，您还想删除数据库或表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T16:35:09.053

是的。只需删除文件夹。如果项目安装在您的 settings.py 中，请将其删除。

# xml - 覆盖 XSD 上的全局元素

> ID：11391425
> 
> 赞同：0
> 
> 时间：2012-07-09T08:26:45.667
> 
> 标签：xml, xsd, overriding

有一个我需要使用 XSD 验证的 XML，XSD 包含对使用“dateTime”类型的元素的全局引用，我的 XML 上的元素将具有“日期”类型，所以我希望我可以覆盖全局 X​​SD元素引用与本地元素。

在全球范围内：

```
<xs:element name="dt" type="xs:dateTime"/> 
```

xml文件：

```
<dt>2011-11-28</dt> 
```

在这样的本地覆盖上：

```
<xs:element name="dt" type="xs:date"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:30:33.023

您拥有的 XSD 是 XML 实例的定义。如果您想将其用于验证，那么您的实例必须无一例外地符合定义的所有方面。因此，如果不更改您的 XSD 定义，我看不到您如何做到这一点。

# debugging - 逆向工程

> ID：11391434
> 
> 赞同：0
> 
> 时间：2012-07-09T08:27:23.570
> 
> 标签：debugging, reverse-engineering, file-format, decoding

我有一个用 Delphi 7 编写的应用程序的二进制副本；作为其执行的一部分，它将一些数据写入文本文件（不是纯文本）。

如果我知道部分输入数据并拥有该文件的副本，是否可以从文件中提取数据？（如果它被加密了怎么办？）我不知道提到的文件的结构。

不，我没有应用程序的源代码——我认为这很明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:04:01.557

是的，有可能，您必须先对该应用程序（IDA、HIEW）进行逆向工程和/或在将数据存储到文件时对其进行调试，如果您需要更多帮助，请与我联系。

# tomcat - Tomcat：查看哪些线程正在使用数据库连接池

> ID：11391435
> 
> 赞同：4
> 
> 时间：2012-07-09T08:27:26.200
> 
> 标签：tomcat, monitoring, apache-commons-dbcp

Tomcat 有一个数据库连接池 (DBCP) 可以使请求更快。

在我的应用程序中，太多的连接被使用太久，我怀疑有泄漏（连接没有正确关闭），我需要找出泄漏的位置。

问题：如何找出正在使用连接的每个线程的名称？

最好是实时 JMX MBean，但也欢迎其他提示。显示每个线程的堆栈跟踪或类名也是可以接受的。

*注意：我不是在寻找显示 DBCP 设置的 MBean。我想看看每个连接的用途。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T14:06:08.833

不幸的是，这样的豆子并不存在。

您*可以*做的是启用`logAbandoned`DBCP 配置中的设置。有关详细信息，请查看 Apache Commons-DBCP ( [http://commons.apache.org/dbcp/configuration.html](http://commons.apache.org/dbcp/configuration.html) ) 的文档：您可以`<Resource>`在 Tomcat 的元素中使用所有配置选项。

`logAbandoned`将告诉您连接在未及时返回的池中签出的位置。这可能表示连接泄漏，或者只是长时间运行的查询。

**更新 2015-12-15**

使用 Tomcat [`tomcat-pool`](http://tomcat.apache.org/tomcat-8.0-doc/jdbc-pool.html)，您可以附加拦截器，例如[SlowQueryReport](http://tomcat.apache.org/tomcat-8.0-doc/jdbc-pool.html#org.apache.tomcat.jdbc.pool.interceptor.SlowQueryReport)，或者，通过 JMX 获取通知，[SlowQueryReportJmx](http://tomcat.apache.org/tomcat-8.0-doc/jdbc-pool.html#org.apache.tomcat.jdbc.pool.interceptor.SlowQueryReportJmx)

这些工具可能比您从 Apache Commons-DBCP 获得的更多基本信息做得更好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T05:58:08.107

根据克里斯托弗的回答，我创建了一个工具来监控借用/释放的连接：

[https://github.com/nicolas-raoul/Commons-DBCP-monitoring](https://github.com/nicolas-raoul/Commons-DBCP-monitoring)

它监控 Commons DBCP 的使用并允许创建这样的图表：

![在此处输入图像描述](../Images/87a83e52149670382cbd0ed667fc8057.png)

![在此处输入图像描述](../Images/43033bf35a4c70af123c9643d0a399a6.png)

它使识别哪些线程长时间保持连接变得非常容易。

# json - 如何在 JSON 中为 WCF REST Web 服务传递空或空日期

> ID：11391436
> 
> 赞同：3
> 
> 时间：2012-07-09T08:27:28.500
> 
> 标签：json, wcf, rest

我们有如下 JSON 对象。

```
{
    "AdvanceNotificationDays":null,
    "Egos":[],
    "Interests":[],
    "Name":"Birthday gift for Ruchir",
    "Occasion":null,
    "OccasionDate":"\/Date(null)\/",
    "ProfileId":null,
    "UserId":4350,
    "WishlistId":0,
    "isShared":false
} 
```

我们尝试将此 JSON 对象传递给服务器，并且除了 Date 之外的所有内容都会被解析。对于日期，JSON 解析器会抛出“无法将 null 解析为 Int64”的异常。我们只想将空日期或空日期传递给服务器。有人可以帮忙吗？我们搜索了这个问题的解决方案，到目前为止还没有找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:34:17.200

为什么不直接将 OccasionDate 设置为 null？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-08T11:40:39.923

尝试制作 DateTime 类型的 OccasionDate？所以日期可以为空。

# javascript - 如何在页面上显示所有数据后获取页面加载的秒数？

> ID：11391438
> 
> 赞同：1
> 
> 时间：2012-07-09T08:27:34.943
> 
> 标签：javascript, asp.net, html

是否可以获取页面获取的总秒数并显示数据？

就像从我单击链接的那一刻起，到所有数据都显示在页面上的那一刻，在 OnInit、onrender、pageload onprerender 等上完成......这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:35:41.710

是的，它可能只是您需要在 web.config 文件中添加代码并运行应用程序，它会在页面渲染后提示您加载时间。滚动鼠标并获取详细信息。

```
 <system.web>

        <trace pageOutput="true" requestLimit="10" enabled="true" localOnly="true"        traceMode="SortByTime" mostRecent="true"/>

</system.web> 
```

注意：您需要在您的 web.config 文件中已经存在的 system.web 中编写代码的跟踪部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:25:31.950

在显示页面之前从服务器发送一个包含当前时间的变量。

在 HTML 页面上，在 onload() 上运行 javascript 函数。该函数在页面加载后调用。在此函数中再次获取当前时间。

匹配两个时间变量。一个从服务器发送，一个在 onload() 函数中。您将获得秒数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:55:31.290

这是可能的，但有点复杂，因为从点击到完全加载的加载时间包括很多东西：

1.  对服务器的请求（连接往返，有时 dns 查找等）
2.  请求处理服务器端（这你可以在你的 APS 代码中测量）
3.  请求加载直到任何事件触发
4.  ETC

长话短说是不可能用任何单一的方法来测量它，并且将许多方法结合起来会很痛苦，并且不会包括所有要测量的部分。

在这种特殊情况下，您可以做的最好的事情是：绑定`onclick`（在链接上）具有当前时间戳（毫秒精度）的 ajax 请求并使用当前时间戳执行第二个请求`onload`并减去两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T08:38:16.493

您可以轻松检查 PHP 运行脚本所需的时间：从开始到结束。只需在开始和结束时存储时间。看这里： http: [//nl.php.net/manual/en/function.microtime.php](http://nl.php.net/manual/en/function.microtime.php)

但是，这不是用户体验的时候。例如：如果 PHP 需要 0.1 秒来生成 HTML，而 HTML 包含 100 张大图像，则实际页面加载时间要比 0.1 秒长得多。最终用户体验的实际时间取决于很多因素，例如介于两者之间的网络服务器（并且需要调用 PHP）、网络速度、缓存等。

我认为你最好的办法是通过 Javascript 来解决这个问题，并使用可以附加到 body 的 onLoad 事件处理程序。使用一些外部窗口来确定点击和触发 onload 之间的时间。

另外，请记住，对于具有不同缓存设置、不同网络速度等的其他访问者，结果可能会有所不同。所以你只能得到一个近似值。

# ussd - 想要一个 USSD 服务器模拟器

> ID：11391441
> 
> 赞同：1
> 
> 时间：2012-07-09T08:27:49.723
> 
> 标签：ussd, jsmpp

我需要模拟来自 USSD 网关和 USSD 应用服务器的 SMPP 消息

我有一个使用 JSMPP 库的 USSD 网关应用程序，需要一个网关来接收从该库发送的 USSD

是否有任何开源 USSD 服务器甚至是我可以依赖的应用程序来完成 ussd 周期

正是我需要的是一种可以列出到我的本地主机上的端口以响应传入的 ussd 消息的应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:40:46.937

试试[activeXperts 免费的 smpp 模拟器](http://www.activexperts.com/freeware/)。它的功能有限，但它可以工作。

或者您可以尝试使用具有 SmppServer 和模拟器代码[的 cloudhopper-smpp构建一个。](https://github.com/twitter/cloudhopper-smpp)

# php - 致命错误：找不到类“SoapClient”

> ID：11391442
> 
> 赞同：235
> 
> 时间：2012-07-09T08:27:52.057
> 
> 标签：php, soap, fatal-error

我正在尝试一个简单的 Web 服务示例，即使我`extension=php_soap.dll`在`php.ini`文件中取消注释，我也会收到此错误：

> **致命错误：**在第 2 行的 C:\Program Files (x86)\EasyPHP-5.3.9\www\server.php 中找不到类“SoapClient”

* * *

## 回答 #1

> 赞同：395
> 
> 时间：2012-07-09T08:34:41.170

**诊断**

在脚本文件中查找以下内容

```
phpinfo(); 
```

如果你找不到这样`Soap Client`的设置`enabled`： ![肥皂应该出现在 phpinfo() 中的方式](../Images/be2d724e3eea5695345515225147afa5.png)

**使固定**

请执行下列操作：

1.  找到`php.ini`你的**apache** bin 文件夹，即`Apache/bin/php.ini`
2.  `;`从开头删除`extension=php_soap.dll`
3.  重新启动 Apache 服务器
4.  再次查找`phpinfo();`并检查您是否看到与上一张相似的图片
5.  如果你这样做了，问题就解决了！

另一方面，如果这不能解决您的问题，您可能需要在[此处检查 SOAP 的要求](http://www.php.net/manual/en/soap.requirements.php)。同样在评论部分，您可以找到有关连接到 https 的好建议。

* * *

## 回答 #2

> 赞同：175
> 
> 时间：2016-09-10T03:56:51.270

要在 PHP-7 中安装 SOAP，请在您的 Ubuntu 终端中运行以下命令：

```
sudo apt-get install php7.0-soap 
```

要在 PHP-7.1 中安装 SOAP，请在 Ubuntu 终端中运行以下命令：

```
sudo apt-get install php7.1-soap 
```

要在 PHP-7.2 中安装 SOAP，请在 Ubuntu 终端中运行以下命令：

```
sudo apt-get install php7.2-soap 
```

要在 PHP-7.3 中安装 SOAP，请在 Ubuntu 终端中运行以下命令：

```
sudo apt-get install php7.3-soap 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-08-22T19:09:21.170

对于 AWS (RHEL)：

```
sudo yum install php56-soap 
```

（这里的 56 是 5.6 PHP 版本 - 把你的版本放在这里）。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-09-19T13:41:52.570

要在 PHP5.6 中安装 SOAP，请在 Ubuntu 14.04 终端中运行以下命令：

```
sudo apt-get install php5.6-soap
service php5.6-fpm restart
service apache2 restart 
```

查看是否启用了 SOAP：

```
php -m 
```

（您应该在返回的文本之间看到 SOAP。）

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-08-01T20:37:13.717

我不得不跑

```
php-config --configure-options --enable-soap 
```

以root身份重新启动apache。

那行得通！现在我的 phpinfo() 调用显示了 SOAP 部分。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-01-30T14:46:32.647

我在 PHP 7.0.22-0ubuntu0.16.04.1 nginx 上解决了这个问题

```
sudo apt-get install php7.0-soap

sudo systemctl restart php7.0-fpm
sudo systemctl restart nginx 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-10-15T18:12:52.560

我**找不到**该`SOAP`部分，`phpinfo()`所以我不得不安装它。

有关信息，`SOAP`扩展需要`libxml`PHP 扩展。这意味着`--enable-libxml`根据[http://php.net/manual/en/soap.requirements.php也需要传入](http://php.net/manual/en/soap.requirements.php)

**来自 WHM 面板**

1.  软件 » Module Installers » PHP Extensions & Applications Package
2.  安装 SOAP 0.13.0

    警告：“pear/HTTP_Request”已被弃用，取而代之的是“pear/HTTP_Request2”

    安装好：channel://pear.php.net/SOAP-0.13.0

3.  安装 HTTP_Request2（可选）

    安装好：channel://pear.php.net/HTTP_Request2

4.  重启服务 » HTTP 服务器 (Apache)

**从 shell 命令**

1.pear安装SOAP

2.重启

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-02-06T20:27:47.570

对于**XAMPP 用户**，打开`php.ini`位于 中`C:/xampp/php`的文件并`;`从`extension=soap`. 然后重新启动Apache，就是这样！

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-02-13T11:30:16.653

对于 Docker* 添加这一行：

```
RUN apt-get update && \
    apt-get install -y libxml2-dev && \
    docker-php-ext-install soap 
```

**：对于基于 debian 的图像，即。不适用于高山变体。*

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-10-04T10:48:17.753

对于 PHP 7.4 和 Docker，在 Dockerfile 中添加这一行：

```
RUN apt-get update && apt-get install -y \
libxml2-dev \

RUN docker-php-ext-install soap 
```

重建映像并重新启动；）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-05-22T09:04:43.077

你必须继承`nusoap.php`类并把它放在你的项目目录中，你可以从[网上](http://sourceforge.net/projects/nusoap/)下载它。

使用此代码：

```
require_once('nusoap.php'); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-11T18:05:09.687

在 Centos 7.8 和 PHP 7.3 上

```
yum install php-soap
service httpd restart 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-11-28T16:21:50.807

对于 PHP 8：

```
sudo apt update
sudo apt-get install php8.0-soap 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-03T06:23:51.380

就我而言，***Symfony 缓存***导致了问题，运行后`composer install`问题就消失了。

# postgresql - 在同一个编辑器中选择 2 个表

> ID：11391444
> 
> 赞同：0
> 
> 时间：2012-07-09T08:27:56.687
> 
> 标签：postgresql, postgresql-9.1

在 SQL 中，我可以编写 2 个单独的 SELECT 语句并同时执行它们，例如：

从表名中选择 *

从另一个表中选择 *

可以在 PostgreSQL 中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:53:31.013

在我看来，你真的是在问一个 PGAdmin 问题。在 SQL Server 的查询分析器/企业管理器中，如果执行两条 select 语句，输出区域将显示两个结果集。

PGAdmin 不这样做；您需要两个单独的查询窗口来查看两个结果集。我知道没有其他适用于 PostgreSQL 的免费 G​​UI 管理工具。也许别人会。

编辑：我最近开始使用 Squirrel-SQL 和 DBeaver。这些中的任何一个都可能是您正在寻找的更多内容。我自己更喜欢 DBeaver。

布赖恩

# php - 使用 preg_replace 检索忽略的字符串

> ID：11391450
> 
> 赞同：0
> 
> 时间：2012-07-09T08:28:10.510
> 
> 标签：php, regex, string, preg-replace, logic

我还需要获取 `img`标签信息（`<img src="images/construction.jpg" border="0" alt="" />`）我需要做什么函数和代码修改，因为我使用的这个代码在我的`foreach`循环中，因为数据是从数据库中迭代的。

我的工作代码---

```
<?php

$content = '<p><img src="images/construction.jpg" border="0" alt="" />This is only a testing phase data</p>';

$content = preg_replace("/<img[^>]+\>/i", "", $content);

echo $content;  //OUTPUT --  This is only a testing phase data

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:33:57.640

您需要使用[`preg_match`](http://in.php.net/manual/en/function.preg-match.php)来检索该数据，而不是[`preg_replace`](http://in.php.net/manual/en/function.preg-replace.php).

# android - 以编程方式列出 android 中已安装/正在运行的应用程序

> ID：11391451
> 
> 赞同：-5
> 
> 时间：2012-07-09T08:28:14.493
> 
> 标签：android

> **可能重复：**
> [如何获取已安装的 android 应用程序列表并选择一个运行](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)

我们使用的是安卓手机。

1.  如何列出来`All Installed Applications`。
2.  如何列出来`All Running Applications`。

帮我。谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-09T08:35:00.303

**要获取 Android 上安装的活动/应用程序列表：**

```
final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
final List pkgAppsList = context.getPackageManager().queryIntentActivities( mainIntent, 0); 
```

参考自：[如何获取已安装的android应用程序列表并选择一个运行](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)

**检查所有正在运行的应用程序**

```
ActivityManager actvityManager = (ActivityManager)
this.getSystemService( ACTIVITY_SERVICE );
List<RunningAppProcessInfo> procInfos = actvityManager.getRunningAppProcesses(); 
```

引用自：[http ://www.dreamincode.net/forums/topic/138412-android-20-list-of-running-applications/](http://www.dreamincode.net/forums/topic/138412-android-20-list-of-running-applications/)

**注意：上述函数将返回 API 21 以下的正确结果，21 及以上已弃用。**

# javascript - Javascript：如何检查元素是否可见？

> ID：11391452
> 
> 赞同：1
> 
> 时间：2012-07-09T08:28:22.453
> 
> 标签：javascript, jquery, selector, visible, zepto

我正在使用轻量级 zepto.js 框架，现在我需要测试页面上的元素是否可见……这是我的情况：

一个按钮触发该功能`show_guides()`。

```
function show_guides() {
    $('#guides').toggle();

    if ( $('#guides').is(':visible') ) { // does not work
        //$.cookie('guides_visible', 'true');
        console.log("visible");
    } else {
        console.log("invisible");
        //$.cookie('guides_visible', null);
    }
} 
```

如果它们`$('#guides')`是可见的，我想保存一个 cookie，如果它们不可见，我想摆脱它。

但是 zepto.js 不支持像这样的选择器，`:visible`所以我必须找到一种不同的方式。任何想法如何做到这一点？现在我收到以下错误：

> 未捕获的错误：SYNTAX_ERR：DOM 异常 12

在我读过的 zepto 文档中……</p>

> 对于 jQuery 的非标准伪选择器（例如 :visible）的基本支持，包括可选的“选择器”模块。

但我不知道如何包含这个。

任何人都可以在这里帮助我吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:32:02.553

您可以检查显示 CSS 属性：

```
 function show_guides() {

        $('#guides').toggle();

        if ( $('#guides').css('display') == 'block' ) { 
            console.log("visible");
        } else {
            console.log("invisible");
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:34:45.403

尝试

```
 style.display="block"; 
```

和

```
 style.display="hidden"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T08:49:50.363

您可以检查可见性：可见/隐藏，或显示：块/无

```
$('#guides').css('visibility') == 'visible'
$('#guides').css('display') == 'block' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-13T19:55:05.897

如果您只想检查可见性，您可以使用它

```
 function visible(elem){
    elem = $(elem)
    return !!(elem.width() || elem.height()) && elem.css("display") !== "none"
  } 
```

直接取自 zepto 选择器插件。否则，您可以按照 Felix Kling 的建议仅包含[https://github.com/madrobby/zepto/blob/master/src/selector.js中的选择器模块](https://github.com/madrobby/zepto/blob/master/src/selector.js)

# mysql - 逆向工程，将我的脚本导入 mysql 工作台后没有关系

> ID：11391465
> 
> 赞同：1
> 
> 时间：2012-07-09T08:29:10.993
> 
> 标签：mysql, foreign-keys, stub, relationships

出于某种原因，我无法再打开我的模型，它已损坏，所以我尝试从 MySQL 导入以创建一个新的操作模型，但导入时总是出现此错误：

```
WARNING: Table `macrotelecom_django`.`perfil` not found. Stub was created.
WARNING: Table `macrotelecom_django`.`Agentes` : Foreign key `fk_Agentes_Perfil1` :     Referred column `macrotelecom_django`.`perfil`.`idPerfil` not found. Stub was created.
WARNING: Table `macrotelecom_django`.`usuariologin` not found. Stub was created.
WARNING: Table `macrotelecom_django`.`Agentes` : Foreign key `fk_Agentes_UsuarioLogin1` :   Referred column `macrotelecom_django`.`usuariologin`.`idUsuarioLogin` not found. Stub was created.
WARNING: Table `macrotelecom_django`.`clientes` not found. Stub was created.
WARNING: Table `macrotelecom_django`.`Albaran` : Foreign key `fk_Clientes_has_Productos_Clientes1` : Referred column `macrotelecom_django`.`clientes`.`idCliente` not found. Stub was created. 
WARNING: Table `macrotelecom_django`.`productos` not found. Stub was created.
WARNING: Table `macrotelecom_django`.`Albaran` : Foreign key `fk_Clientes_has_Productos_Productos1` : Referred column 
... 
```

由于某种原因，它无法正确导入外键，当创建者总是在约束之前实现时，总是说“找不到表”，这可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:49:38.960

这应该是 MySQL 错误报告中报告的区分大小写的[问题](http://bugs.mysql.com/bug.php?id=47981)。

> Workbench 可能会`lower_case_table_names` 在开始逆向工程之前检查变量值并 `SqlIdentifiersCS`根据需要采用，但这可能会导致模型中出现不良的套管混合。例如，几个模式是从使用不同值的不同 DBMS 进行逆向工程的 `lower_case_table_names`。因此用户必须 `SqlIdentifiersCS`在 Workbench 中显式设置参数并每次应用相同的规则集。

# parallel-processing - 具有 MPI (MPICH2) 和 nVidia CUDA 的并行计算集群

> ID：11391467
> 
> 赞同：1
> 
> 时间：2012-07-09T08:29:22.883
> 
> 标签：parallel-processing, cuda, mpi

我需要编写一个应用程序来对字典中的单词进行哈希处理以制作 WPA 预共享密钥。这是我的“网络安全”课程的论文。应用程序需要并行以提高性能。我在 IT 研究中对 MPI 有一些经验，但我想将它与 CUDA 联系起来。这个想法是使用 MPI 将负载均匀地分配到集群的节点，然后利用 CUDA 在节点的 GPU 内并行运行各个块。

使用 MPI 分配负载是我过去可以轻松完成的事情。我也可以学习使用 CUDA 进行计算。还有一个项目（pyrit）或多或少地做了我需要做的事情（实际上更多），我可以从那里得到想法。

**我想要一些关于如何在 MPI 和 CUDA 之间建立连接的建议。如果有人建造了这样的东西，我将非常感谢他的建议和建议。另外，如果您碰巧知道有关该主题的任何资源，请务必将它们指向我。**

对于冗长的介绍感到抱歉，但我认为有必要提供一些背景信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:58:56.887

这个问题在很大程度上是开放式的，因此很难给出明确的答案。这只是对 High Performance Mark、我和 Jonathan Dursi 的评论的总结。我不声称作者身份，因此将此答案设为社区 wiki。

MPI 和 CUDA 是正交的。前者是 IPC 中间件，用于在进程之间进行通信（可能位于不同的节点上），而后者为使用它的每个进程提供高度数据并行的共享内存计算。您可以将任务分解为许多小的子任务，并使用 MPI 将它们分配给在网络上运行的工作进程。主*/*从方法适用于这种应用，尤其是如果字典中的单词的长度变化很大并且处理时间的差异是可以预料的。提供所有必要的输入值后，工作进程可以使用 CUDA 并行执行必要的计算，然后使用 MPI 返回结果。MPI 还提供了启动和控制多节点作业所需的机制。

尽管 MPI 和 CUDA 可以单独使用，但现代 MPI 实现提供了一些机制来模糊这两者之间的界限。它可以是直接支持 MPI 通信操作中的设备指针，在必要时透明地调用 CUDA 函数来复制内存，或者甚至可以支持 RDMA 与设备内存之间的往来，而无需中间复制到主内存。前者简化了您的代码，而后者可以节省不同的时间，具体取决于您的算法的结构。后者还需要新的 CUDA 硬件和驱动程序以及更新的网络设备（例如更新的 InfiniBand HCA）。

支持直接 GPU 内存操作的 MPI 库包括[MVAPICH2](http://mvapich.cse.ohio-state.edu/)和[Open MPI](http://www.open-mpi.org/)的主干 SVN 版本。

# android - 应用内计费/应用内购买项目的最大限制

> ID：11391473
> 
> 赞同：4
> 
> 时间：2012-07-09T08:29:32.540
> 
> 标签：android, iphone, ios, in-app-purchase, in-app-billing

我想知道 Android 和 iphone 的应用内计费中可以放置的最大项目数。我似乎记得读过大约 3000，但我找不到参考。

此外，如果 3000 是最大值，那么解决此问题的合法方法是什么。我的应用程序将出售内容，我认为解决该问题的一种可能方法是拥有一个显示内容的中央应用程序，然后是许多不同的库，您可以在其中购买内容。这会是一个可行的解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:32:05.087

我只能回答你问题的苹果部分。我两周前刚和他们谈过，因为我还有很多可以在我的应用程序中购买的物品。

Apple 购买的当前限制为 10.000 件。如果这还不够，Apple 可以额外授予您 10.000 件物品。

您可以尝试使用一个显示内容的中央应用程序，然后使用多个销售内容的库应用程序。但是我不确定苹果是否会允许这样做。在实施之前，您应该澄清这一点。

另一种可能性是建立自己的商店并在那里销售内容。最大的优势是你不必向苹果支付 30% 的股份。缺点是您必须自己设置商店，并且 Apple 不允许从您的应用程序中直接链接到您的商店。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:11:28.777

通读开发人员指南的[要求和限制](http://developer.android.com/guide/google/play/billing/billing_overview.html#billing-limitations)部分，似乎没有指定限制。

Google Play 帮助中心的[应用内结算可用性和政策](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1153481)部分也缺少任何信息。

[您应该在Google Play Developers: Publishers & Merchants](https://support.google.com/googleplay/android-developer/bin/answer.py?answer=136601&hl=en)的支持联系页面上直接向 Google Play 支持团队提出此问题，并要求他们更新其网站上的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-22T08:48:11.437

GoolePlayStore BillingItem 的限制是 1000！

我真的试过了^^！！

# c# - 是否可以在绑定功能执行之前执行辅助方法？

> ID：11391494
> 
> 赞同：1
> 
> 时间：2012-07-09T08:31:15.220
> 
> 标签：c#, wpf, xaml, data-binding

我想在将用户输入的数据绑定到文本框之前检查业务规则？在我将数据绑定到模型之前，我需要确保它满足一定的标准。如果我可以在绑定发生之前执行一个方法，这将非常容易。我有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:41:53.297

您可以实施[`ValidationRule`](http://msdn.microsoft.com/en-us/library/system.windows.controls.validationrule.aspx)：

```
public class CustomValidationRule : ValidationRule
{
    private static bool IsValid(string value)
    {
        // implement you business rule checking logic here
        // if valid
        //     return true;
        // else
        //     return fase;
    }

    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {
        var val = (string)value;
        if(IsValid(val))
        {
            return ValidationResult.ValidResult;
        }
        else
        {
            return new ValidationResult(false, "Value is not valid");
        }
    }
} 
```

并在您的绑定中使用它：

```
<TextBox>
    <TextBox.Text>
        <Binding Path="ViewModelProperty" UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <validation:CustomValidationRule />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

Where`validation`是定义的命名空间的 XML 命名空间别名`CustomValidationRule`（添加`xmlns:validation="clr-namespace:NAMESPACE_NAME_HERE"`到您的 XAML）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:36:41.823

您可以使用[绑定转换器](http://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFgQFjAA&url=http://www.switchonthecode.com/tutorials/wpf-tutorial-binding-converters&ei=0Zf6T-6_BeX54QSj-4DtBg&usg=AFQjCNE61ivdRfajHJBqLRYr8vEp45oNqw&sig2=hAU_iV0kJAwVK_vgFBdRlA)。您将编写的代码将在绑定值推送到 UI**之前执行。**这实际上是转换器的*含义*：让您能够在 bindind 机制的中间注入代码（在执行 UI*之前*或*之后）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T08:47:07.953

您可以让绑定到视图的 ViewModel 实现 IDataErrorInfo。这个接口有一个属性和一个索引器：

```
public string this[string columnName]
{
    //The validation logic goes here
    if( columnName == "Property1")
    {
        //put validation here and return error message if exists
        if(this.Property1 == "")
        {
             return "The field Property1 is required";
        }
    }
    //and so on
}

public string Error
{
    return "This object is not valid";
} 
```

在视图的绑定中，将以下内容添加到绑定标记中：

```
<TextBox Text={Binding Property1, ValidatesOnDataErrors=True} /> 
```

并且不要忘记通知您的属性中的属性更改。

希望这会有所帮助。

# android - 如何一次取消具有重复 PendingIntent 的多个警报？

> ID：11391495
> 
> 赞同：0
> 
> 时间：2012-07-09T08:31:16.493
> 
> 标签：android, duplicates, alarmmanager, android-pendingintent

我正在设置多个警报，它们将具有完全相同的`PendingIntent`对象，但它们的响起时间不同。如果我通过向 提供相同的`Intent`对象来取消一个警报`PendingIntent`，并将其传递给`AlarmManager.cancel()`，它会取消所有警报（即具有不同的开始时间）还是会表现出其他一些行为？

这是代码：

```
while(size != 0)
{
    timeToSet = getNewTime(); //gets calendar object
    Intent intent = new Intent(this, MyAlarmReceiver.class);
    intent.putExtra("uniqueid", uuid);
    intent.putExtra("vibrate", myalarm.getVibrate());
    intent.putExtra("important", myalarm.getImportant());
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(),      
                                       0, intent, PendingIntent.FLAG_UPDATE_CURRENT | Intent.FILL_IN_DATA);
    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, timeToSet.getTimeInMillis(), 604800000, pendingIntent);

    size--;
} 
```

因此，所有警报的 Intent 对象都相同，但时间不同。现在，当我取消这些警报时：

```
Intent intent = new Intent(this, MyAlarmReceiver.class);
intent.putExtra("uniqueid", uuid);
intent.putExtra("vibrate", myalarm.getVibrate());
intent.putExtra("important", myalarm.getImportant());
PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 0, intent, PendingIntent.FLAG_UPDATE_CURRENT | Intent.FILL_IN_DATA);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.cancel(pendingIntent); 
```

所有的闹钟都会取消吗？这就是我想要它做的。我可以`requestCode`在每一个中使用不同的`PendingIntent`，但如果所有这些都被取消会更好，因为我不想维护和存储这些额外的`requestCodes`。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:49:26.633

如果您有预定义数量的警报，您可以为每个警报设置唯一的`requestCode`（第二个参数）。`getBroadcast`但我不确定这是否适合你。如果您不指定 a`requestCode`所有警报将被视为相等`filterEquals`，因此所有警报都将被取消。

# php - 组织具有类似表的批量数据的 $_POST 输入

> ID：11391500
> 
> 赞同：1
> 
> 时间：2012-07-09T08:31:30.153
> 
> 标签：php, arrays, forms, parsing, optimization

考虑一个生成表单的 PHP 脚本，该表单看起来像一个表格，并且多次输出相同的重复行：

![由代码段生成的示例表单的图像。](../Images/e27032bd7e4e8a5cbbb5d60ccf172deb.png)

```
print('<form method="POST" action="index.php">
    <table>
    <tr>
       <th>Row #</th>
       <th><tt>name</tt></th>
       <th><tt>value</tt></th>
    </tr>');

for ( $i = 1; $i <= 4; $i++ )
{
    print('<tr>
        <th>' .$i. '</th>
        <td><input type="text" name="name_' .$i. '" size="20"></td>
        <td><input type="text" name="value_' .$i. '" size="4"></td>
    </tr>');
}

print('</table>
      <input type="submit" name="is_submit" value="Submit">
</form>'); 
```

当您提交此表单时，`$_POST`数组将如下所示：

```
array (
  'name_1',
  'value_1',
  'name_2',
  'value_2',
  'name_3',
  'value_3',
  'name_4',
  'value_4',
  'is_submit',
); 
```

我想做的是组织这个输入，所以它看起来像这样：

```
array (
  1 => 
  array (
    'name',
    'value',
  ),
  2 => 
  array (
    'name',
    'value',
  ),
  3 => 
  array (
    'name',
    'value',
  ),
  4 => 
  array (
    'name',
    'value',
  ),
); 
```

这意味着，以相同*行 ID*号结尾的每个字段都与两级深度数组中的其他字段（在同一行中）组合在一起。

我一直在涂鸦解决这个问题的选项，并提出了以下“解决方案”（有组织的数组（上图）实际上是`$output`通过这种方法创建的转储）：

```
if ( array_key_exists('is_submit', $_POST) ) // Form is submitted properly
{
    unset($_POST['is_submit']); // Drop the status key

    foreach ( array_keys($_POST) as $key )
    {
        $key_exploded = explode("_", $key); // [0] is key 'basename', [1] is the 'row ID'
        $output[ $key_exploded[1] ][ $key_exploded[0] ] = $_POST[$key];
    }
} 
```

最大的问题是这种方法看起来有点混淆和硬编码。我认为并希望这里更高级的人可以指导我采用更动态的（那一`unset`行很痒，我需要调用`unset()`每个非表格行）和更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T08:38:20.540

更改这些行：

```
<td><input type="text" name="name_' .$i. '" size="20"></td>
<td><input type="text" name="value_' .$i. '" size="4"></td> 
```

至

```
<td><input type="text" name="foobar['.$i.'][name]" size="20"></td>
<td><input type="text" name="foobar['.$i.'][value]" size="4"></td> 
```

$_POST['foobar'] 现在将具有所需的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:44:44.623

如果您不想更改表单，可以在 foreach 循环中引入一个附加条件：

```
if ( array_key_exists('is_submit', $_POST) ) // Form is submitted properly
{
    foreach ( array_keys($_POST) as $key )
    {
        $key_exploded = explode("_", $key); // [0] is key 'basename', [1] is the 'row ID'

        // check if keys start with 'name' or 'value'
        if ($key_exploded[0] == 'name' || $key_exploded[0] == 'value')
            $output[ $key_exploded[1] ][ $key_exploded[0] ] = $_POST[$key];
    }
} 
```

# html - 并排对齐图像

> ID：11391501
> 
> 赞同：0
> 
> 时间：2012-07-09T08:31:30.783
> 
> 标签：html, css

如何像css sprite一样并排对齐图像

```
 <style>
.a, .mail-green, .star{ display: block; background: url('http://css.spritegen.com//uploads/ka3dublic7f3p1363fcj1lpei1.png') no-repeat; }
.a { background-position: -0px -0px; width: 103px; height: 30px; }
.mail-green { background-position: -0px -30px; width: 159px; height: 30px; }
.star { background-position: -0px -60px; width: 198px; height: 28px; }
</style>
<div class="a"/>
<div class="main-green"/>
<div class="star"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:36:55.820

您的 HTML 无效...

```
<div class="a"/> 
```

应该

```
<div class="a"></div> 
```

并且当`block`元素占据一行时，它们不会全部出现在彼此旁边....您应该考虑使用`inline-block`或者可能是`float`ing`div`元素并应用`width`

我在这里创建了一个示例[，](http://jsfiddle.net/manseuk/GCwaU/)`inline-block`但我不确定你想要的输出是什么，所以它可能不正确。

[以下是](http://www.w3.org/TR/CSS2/visuren.html#display-prop)该`display`属性的规格，包括其有效值。这[是一篇关于 CSS Floats 的好文章](http://www.alistapart.com/articles/css-floats-101/)

# python - 为所有数据库操作设置命名空间

> ID：11391502
> 
> 赞同：0
> 
> 时间：2012-07-09T08:31:32.073
> 
> 标签：python, google-app-engine

我正在尝试在 python 中为 Google App Engine 的所有数据库操作设置命名空间，但我无法完成。

目前我的代码看起来像这样：

```
""" Set Google namespace """
if user:
    namespace = thisUser.namespace
    namespace_manager.set_namespace(namespace)
""" End Google namespace """

#Then i have all sorts of classes:

class MainPage(BaseHandler):
    def get(self):
        #code with DB operations like get and put...

class MainPage2(BaseHandler):
    def get(self):
        #code with DB operations like get and put...

class MainPage3(BaseHandler):
    def get(self):
        #code with DB operations like get and put...

app = webapp2.WSGIApplication([ ... ], debug=True, config=webapp2_config) 
```

这样做的问题是，在类中，所有 DB 操作仍然在默认命名空间上完成（就好像没有设置命名空间一样）。尽管我在代码的最顶部设置了命名空间。

当我打印变量“命名空间”（我也在代码顶部设置）时，我确实可以看到我希望使用的命名空间。

但看起来 Google App Engine 在某处将命名空间重置为空，然后再运行类中的代码。

所以现在我想知道是否有一种在某处设置命名空间的好方法。

目前我在所有“def”中都这样设置：

```
class MainPage(BaseHandler):
    def get(self):
        namespace_manager.set_namespace(namespace)

        #code with DB operations like get and put...

class MainPage(BaseHandler):
    def get(self):
        namespace_manager.set_namespace(namespace)

        #code with DB operations like get and put...

etc... 
```

这不是一个非常优雅的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:50:23.950

您需要[编写一个中间件](http://www.morethanseven.net/2009/03/18/simple-wsgi-middleware-app-engine.html)来拦截请求并根据您的应用程序逻辑设置命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:29:27.223

A good solution is to add a hook. Something like that should be works.

```
from google.appengine.api import apiproxy_stub_map

NAMESPACE_NAME = 'noname'
def namespace_call(service, call, request, response):
    if hasattr(request, 'set_name_space'):
        request.set_name_space(NAMESPACE_NAME)
apiproxy_stub_map.apiproxy.GetPreCallHooks().Append(
    'datastore-hooks', namespace_call, 'datastore_v3') 
```

You can add it in your `main.py` or `appengine_config.py`. By this way the hook is configured during the loading of the instances and keeps his state.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:34:58.443

您可以使用 appconfig.py 并定义 namespace_manager_default_namespace_for_request()

阅读[https://developers.google.com/appengine/docs/python/multitenancy/multitenancy](https://developers.google.com/appengine/docs/python/multitenancy/multitenancy)请参阅“设置当前命名空间”的第一部分

# sql-server - 在 SQL Server 查询中使用 For Xml 子句、显式模式指定 XMLNAMESPACE

> ID：11391503
> 
> 赞同：1
> 
> 时间：2012-07-09T08:31:33.083
> 
> 标签：sql-server, xml, for-xml-explicit

我正在尝试使用`FOR XML`子句`EXPLICIT`模式查询某些数据库，但我不知道如何在使用此模式时指定 XMLNAMESPACE 和模式，就像使用`AUTO`模式时的 WITH XMLNAMESPACE 或`RAW`

此`MSDN`示例查询在其结果中将 指定`Schema1`为结果的架构`XML`

```
USE AdventureWorks2012;
GO
 SELECT  1 as Tag,
0 as Parent,
SalesOrderID  as [OrderHeader!1!SalesOrderID!id],
OrderDate     as [OrderHeader!1!OrderDate],
CustomerID    as [OrderHeader!1!CustomerID],
NULL          as [SalesPerson!2!SalesPersonID],
NULL          as [OrderDetail!3!SalesOrderID!idref],
NULL          as [OrderDetail!3!LineTotal],
NULL          as [OrderDetail!3!ProductID],
NULL          as [OrderDetail!3!OrderQty]
FROM   Sales.SalesOrderHeader
WHERE  SalesOrderID=43659 or SalesOrderID=43661
....
SELECT 3 as Tag,
 1 as Parent,
SOD.SalesOrderID,
NULL,
NULL,
SalesPersonID,
SOH.SalesOrderID,
LineTotal,
ProductID,
OrderQty   
FROM    Sales.SalesOrderHeader SOH,Sales.SalesOrderDetail SOD
 WHERE   SOH.SalesOrderID = SOD.SalesOrderID
 AND     (SOH.SalesOrderID=43659 or SOH.SalesOrderID=43661)
 ORDER BY [OrderHeader!1!SalesOrderID!id], [SalesPerson!2!SalesPersonID],
  [OrderDetail!3!SalesOrderID!idref],[OrderDetail!3!LineTotal]
 FOR XML EXPLICIT, XMLDATA 
```

这是示例结果：

```
 <Schema name="Schema1" xmlns="urn:schemas-microsoft-com:xml-data"                   xmlns:dt="urn:schemas-microsoft-com:datatypes">
  <ElementType name="OrderHeader" content="mixed" model="open">
    <AttributeType name="SalesOrderID" dt:type="id" />
    <AttributeType name="OrderDate" dt:type="dateTime" />
    <AttributeType name="CustomerID" dt:type="i4" />
    <attribute type="SalesOrderID" />
    <attribute type="OrderDate" />
    <attribute type="CustomerID" />
     </ElementType>
      <ElementType name="SalesPerson" content="mixed" model="open">
    <AttributeType name="SalesPersonID" dt:type="i4" />
    <attribute type="SalesPersonID" />
       </ElementType>
       <ElementType name="OrderDetail" content="mixed" model="open">
    <AttributeType name="SalesOrderID" dt:type="idref" />
    <AttributeType name="LineTotal" dt:type="number" />
    <AttributeType name="ProductID" dt:type="i4" />
    <AttributeType name="OrderQty" dt:type="i2" />
    <attribute type="SalesOrderID" />
    <attribute type="LineTotal" />
    <attribute type="ProductID" />
    <attribute type="OrderQty" />
        </ElementType>
      </Schema>
      <OrderHeader xmlns="x-schema:#Schema1" SalesOrderID="43659" OrderDate="2001-07-01T00:00:00"    CustomerID="676">
      <SalesPerson SalesPersonID="279" />
     <OrderDetail SalesOrderID="43659" LineTotal="10.373000" ProductID="712" OrderQty="2" />
     ...
    </OrderHeader>
     ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:36:41.907

来自 MSDN 的查询包含一个架构，因为它使用[XMLDATA](http://msdn.microsoft.com/en-us/library/ms190922.aspx)指令。

> 指定应返回内联 XML 数据缩减 (XDR) 架构。该模式作为内联模式附加到文档中。有关工作示例，请参阅将 RAW 模式与 FOR XML 结合使用。

如果你想包含一个显式模式的命名空间，你必须自己添加它并相应地命名你的元素和属性。

```
declare @T table
(
  id int,
  title varchar(50)
)

insert into @T values(451, 'Receptionist')
insert into @T values(1025, 'Secretary')

select 1    as Tag,
       null as Parent,
       'xx.yy.zz' as [root!1!xmlns:ns],
       null as [ns:item!2!ns:id],
       null as [ns:item!2!ns:title]
union all
select 2    as Tag,
       1 as Parent,
       null,
       id,
       title
from @T 
for xml explicit 
```

结果：

```
<root xmlns:ns="xx.yy.zz">
  <ns:item ns:id="451" ns:title="Receptionist" />
  <ns:item ns:id="1025" ns:title="Secretary" />
</root> 
```

# r - 在包 GEOquery 中使用 getGEO() 时出错

> ID：11391507
> 
> 赞同：2
> 
> 时间：2012-07-09T08:31:49.807
> 
> 标签：r, bioconductor

我在 R 中运行以下代码：

```
library(GEOquery)
mypath <- "C:/Users/Farzin/Desktop/BIOC"
GDS1 <- getGEO('GDS1',destdir=mypath) 
```

但我收到以下错误：

```
Using locally cached version of GDS1 found here:
C:/Users/Farzin/Desktop/BIOC/GDS1.soft.gz 
Error in read.table(con, sep = "\t", header = FALSE, nrows = nseries) : 
  invalid 'nlines' argument 
```

谁能告诉我如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:14:59.687

无论我查询什么 GDS 文件，我在使用来自 ubuntu（12.04）的 R 和 Bioconductor 的 GEOquery（版本 2.23.5）时遇到了同样的错误。会不会是 GEOquery 包有问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-02T14:57:27.043

*根据我的经验，getGEO 非常挑剔。*我经常遇到连接到 GEO 服务器的问题。如果在下载过程中发生这种情况，getGEO 会留下部分文件。但是由于部分文件在那里，当您尝试重新下载时，它将使用这个缓存的、部分下载的文件，并遇到您看到的错误（您想要的，因为它不是完整的文件）。

**要解决此问题，请删除缓存的 SOFT 文件并重试下载。**

# php - 如何始终在 mysql 查询中使用 Limit 获取特定行

> ID：11391511
> 
> 赞同：4
> 
> 时间：2012-07-09T08:32:04.337
> 
> 标签：php, mysql

我有一个用于获取前 40 个用户列表的 sql 查询。我想始终在该列表中检索一个用户。他们在查询中的任何方法是否指定具有限制的用户 ID

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T08:40:02.050

我能想到的最好方法是：

```
SELECT * FROM tbl WHERE userid='your-user-id' UNION SELECT * FROM tbl WHERE userid!='your-user-id' LIMIT 39 
```

基本上，您选择您的用户，然后选择其他 39 个用户。您使用 UNION 来连接两个 SELECT 结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:42:38.690

```
SELECT 
    *
FROM
    `users`
WHERE 
    `user_id` != 12345
LIMIT 39
UNION SELECT 
    *
FROM
    `users`
WHERE
    `user_id` = 12345
ORDER BY `user_id`
; 
```

这将为您提供前 39 个用户 + user_id=12345 的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:44:33.597

由于已经提供了大多数选项，请检查这是否可以帮助您

```
select name from user_details where id = user_id || id != user_id  order by field (id,user_id) desc limit 40; 
```

这将为您提供组合结果，如果您希望您指定的用户 ID 将始终排在首位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T08:33:11.983

我想那会是

```
(SELECT * from users limit 39)
UNION ALL
(SELECT * from users where userid='your-user-id') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T08:33:53.983

```
Select * from table order by userd_id limit 40 
```

# c# - 如何使用 NUnit 进行参数化测试

> ID：11391515
> 
> 赞同：0
> 
> 时间：2012-07-09T08:32:19.933
> 
> 标签：c#, selenium, nunit, webdriver

有谁知道如何使用 NUnit 和 C# 进行参数化测试？

特别是我想用 Selenium WebDriver 进行参数化测试

使用 selenium RC，我可以通过迭代和 selenium.Stop(); 来做到这一点。/ selenium.Start();

有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:55:47.670

NUnit 支持多种参数化单元测试的方法，特别是：

*   [[Values]](http://nunit.com/index.php?p=values&r=2.6)属性，通常与[[Combinatorial]](http://nunit.com/index.php?p=combinatorial&r=2.6)（默认）或[[Sequential]结合使用](http://nunit.com/index.php?p=sequential&r=2.6)
*   [[TestCase]](http://nunit.com/index.php?p=testCase&r=2.6)属性
*   [[TestCaseSource]](http://nunit.com/index.php?p=testCaseSource&r=2.6)属性

代替`[Values]`你也可以考虑[[Random]](http://nunit.com/index.php?p=random&r=2.6)或[[Range]](http://nunit.com/index.php?p=range&r=2.6)。

如果你想为每个参数化重新启动你的 Selenium Webdriver，我希望在一个方法中初始化 webdriver并在你的类`[Setup]`中的一个方法中关闭它就足够了，例如：`[TearDown]``[TestFixture]`

```
[TestFixture]
public class WebTests
{
    private IWebDriver driver;

    [SetUp]
    public void StartDriver()
    {
        driver = new FirefoxDriver();
    }

    [TearDown]
    public void StopDriver()
    {
        driver.Quit();
        driver = null;
    }
} 
```

我自己没有使用过 Selenium WebDriver，因此以下链接对我编写此回复有所帮助：

*   [使用 NUnit 自动启动和停止 SeleniumRC](http://silent-code.blogspot.se/2009/09/automatically-start-and-stop-seleniumrc.html)
*   [通过示例介绍 Selenium-WebDriver API](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)

# drupal - Drupal 7 - 清除缓存后所有菜单消失

> ID：11391517
> 
> 赞同：0
> 
> 时间：2012-07-09T08:32:24.067
> 
> 标签：drupal, drupal-7, drupal-navigation

我从某人那里继承了一个 Drupal 7 站点，并且遇到了一个非常恼人的错误，我希望有人能提供帮助，由于某种原因，如果我清空 Drupal 缓存，该站点上的所有左侧菜单都会消失。使用菜单块将菜单放在一起，并且该块的所有设置和菜单本身看起来都是正确的，即该块位于正确的区域，菜单块附加到正确的菜单，并且菜单包含站点上的所有页面它。

在数据库的备份中，cache_menu 表有大约 40,000 个条目，如果我清除它并单击站点，它永远不会超过 40，因此无论出于何种原因，它都不会重新生成菜单。

有谁知道可能发生的事情以及我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:10:37.177

您是否手动清除 cache_menu 条目？我建议使用 drush——</p>

> 全部抄送

或者转到设置/性能并清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:30:41.083

设法解决了这个问题，结果发现菜单块模块中有一个错误（我使用的是 2.2），所以升级它解决了这个问题。

# perl - ExtUtils::MakeMaker如何安装配置文件

> ID：11391519
> 
> 赞同：2
> 
> 时间：2012-07-09T08:32:33.353
> 
> 标签：perl

我正在使用 ExtUtils::MakeMaker 分发我的 perl 模块，该模块由一个 PM 文件和一个可执行文件组成。

可执行文件必须加载配置文件。

我希望我的 Makefile.PL ：

*   生成配置文件；
*   将其安装在正确的 PREFIX 中；
*   修改可执行文件以设置配置文件的真实路径。

但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:12:37.850

这就是 Makemaker 真正痛苦的地方。您必须知道如何在`make`.

首先，*Makefile.PL*只是一个 Perl 程序，所以你可以用它做任何你想做的事情。

其次，您可以将*.PL*文件用作运行以生成真实文件的程序。例如，您可以有一个*lib/Module.pm.PL*。在构建时，系统运行该程序并使用输出创建*blib/lib/Module.pm*。请参阅`PL_FILES`.

第三，您可以向`make`目标添加任务，以便在正确的时间进行处理。双冒号目标添加到已定义的任务中。

```
 all ::
      perl create_config.pl > config.pl
      install ... config.pl 
```

要将其从*Makefile.PL 添加到 Makefile* *，*您必须将特殊子例程添加到命名空间。这一切都记录在 Makemaker 中，但文档假设您对.*`MY``make`*

 *但是，即使您知道该怎么做，所有这些都确实是一件令人头疼的事情。你认为你已经弄清楚了，然后有人有不同的设置或不同类型的`make`. 您将所有时间都花在繁琐的位上，以使其在任何地方都兼容。[这是 Perl 之神发明Module::Build](https://www.metacpan.org/module/Module%3a%3aBuild)的主要原因之一。添加自定义处理和修改构建目标要容易得多，*而且*您可以在 Perl 中完成这一切！经验法则是，如果您不知道如何使用 Makemaker，那么是时候使用[Module::Build](https://www.metacpan.org/module/Module%3a%3aBuild)了。*

# fancybox - 在 ie8 中同时使用 modernizr 和 css3pie 会导致可见的 css3 容器文本节点

> ID：11391521
> 
> 赞同：1
> 
> 时间：2012-07-09T08:32:35.873
> 
> 标签：fancybox, modernizr, css3pie

似乎如果你修改一个元素的 innerhtml，就会出现一个竞争条件，导致 css3-container 文本节点呈现到屏幕上。我在网上能找到的最接近的东西是这样的：

[https://groups.google.com/forum/#!msg/knockoutjs/M7sZvSFqD5I/Lg9kpNmvkkgJ](https://groups.google.com/forum/#!msg/knockoutjs/M7sZvSFqD5I/Lg9kpNmvkkgJ) http://css3pie.com/forum/viewtopic.php?f=3&t=1531

当我尝试将 html 作为第一个参数传递时，fancybox 也遇到了同样的问题。

我试图用这个补丁到modernizr解决我的问题：

```
diff --git a/js/libs/modernizr-2.5.3.js b/js/libs/modernizr-2.5.3.js
index c1a6a9a..0bc0d11 100755
--- a/js/libs/modernizr-2.5.3.js
+++ b/js/libs/modernizr-2.5.3.js
@@ -1071,7 +1071,12 @@ window.Modernizr = (function( window, document, undefined ) {
           //   a 403 response, will cause the tab/window to crash
           // * Script elements appended to fragments will execute when their `src`
           //   or `text` property is set
-          var node = (cache[nodeName] || (cache[nodeName] = docCreateElement(nodeName))).cloneNode();
+          var node;
+          if (nodeName == "css3-container") {
+              node = docCreateElement(nodeName);
+          } else {
+              node = (cache[nodeName] || (cache[nodeName] = docCreateElement(nodeName))).cloneNode();
+          }
           return html5.shivMethods && node.canHaveChildren && !reSkip.test(nodeName) ? frag.appendChild(node) : node;
         }; 
```

但这太hackish了，有没有其他合适的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:45:32.567

我对 Modernizr 2.5.3 有同样的问题，但升级到 Modernizr 2.6.1 解决了这个问题。

# javascript - 如何在 Javascript 中交叉引用类

> ID：11391527
> 
> 赞同：4
> 
> 时间：2012-07-09T08:32:54.877
> 
> 标签：javascript, module, design-patterns, cross-reference

考虑到主 html 应用程序中定义的脚本文件的顺序很重要，有没有办法交叉引用来自不同命名空间的类的实例或实例变量。实际上我想知道是否有可能交叉引用两个不同的类实例，一个指向在不同命名空间中定义的引用，另一个在第二个类中定义的变量指向第一个。

假设我有一个**`main.js`**文件，我在其中定义了一个类，该类使用在另一个命名空间中定义的一些实例变量，比如说 in **`particle.js`**，同时我定义了一个指向`Main`类公共变量的变量。

```
var Main = (function() {
    var p = new Particle();

    this.draw = true;
    this.width = 800;
    this.height = 600;

    function print() {
        console.log(p.width, ':', p.height);
    }

    return {
        draw : this.draw,
        width : this.width,
        height : this.height,
        print : print
    }
})();

function Particle() {

    this.width = Main.width;
    this.height = Main.height;
    this.print = function() {
        console.log(this.width, ':', this.height);
    }    
}

var p = new Particle();
p.print();
Main.print(); 
```

...并且在`*.html`javascript 文件中的顺序是：

```
<script src = 'main.js'></script>
<script src = 'particle.js'></script> 
```

实际上，例如，如果您在 firebug 上尝试此代码，则该代码可以按预期工作，但是在我的真实应用程序上使用相同的逻辑，这非常复杂，我`Main is undefined`在控制台中遇到错误。我知道可以使用 AMD 和 Require.js 来模拟真实的类模块，但我现在不想继续使用 AMD。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:38:25.347

我没有设法让您的代码在 Chrome 或 Firefox 上运行，我总是在`Main.width`.

问题是当您的 Main 尚未完全构建时，您在粒子内部引用 Main 。

没有直接的解决方案，我能想到的最好的方法是在定义 Particle 类之后延迟 Main 单例的部分初始化。或者，您也可以重新排序代码以尊重依赖关系。

您必须记住，在 javascript 中，您的代码在调用时会被评估。

这是我的两个建议：

**解决方案 1**：部分延迟主初始化

```
// Main.js --> loaded first
var Main = new (function () {
    this.draw = true;
    this.width = 800;
    this.height = 600;

    // delayed initialization method
    this.init = function ()
    {
        var p = new Particle();
        this.print = function () {
            console.log(p.width, ':', p.height);
        }
    }
})();

//Particle.js --> loaded second
function Particle() {
    this.width = Main.width;
    this.height = Main.height;
    this.print = function() {
        console.log(this.width, ':', this.height);
    }    
}

// call the delayed init method
Main.init()

var p = new Particle();
p.print();
Main.print(); 
```

**解决方案 2**：拆分为 3 个文件以尊重依赖关系

```
//Particle.js --> loaded first
function Particle() {
    this.width = Main.width;
    this.height = Main.height;
    this.print = function() {
        console.log(this.width, ':', this.height);
    }    
}

// Main.js --> loaded in second position
var Main = (function() {
    var p = new Particle();
    this.draw = true;
    this.width = 800;
    this.height = 600;
    function print() {
        console.log(p.width, ':', p.height);
    }
    return {
        draw : this.draw,
        width : this.width,
        height : this.height,
        print : print
    }
})();

// Init.js --> loaded third
var p = new Particle();
p.print();
Main.print(); 
```

# objective-c - 设置谓词并删除特定的 NSManagedObject

> ID：11391533
> 
> 赞同：0
> 
> 时间：2012-07-09T08:33:33.417
> 
> 标签：objective-c, core-data, nsmanagedobject

我正在尝试删除特定属性

```
tipdescription | tip number | tipindex    

go to school   |  001       |   21

come home      |  004       |   54

lock home      |  008       |   86 
```

我将如何删除整列“锁定家”？我试过下面的代码

```
app = [[ UIApplication sharedApplication] delegate]; 

NSFetchRequest *req = [[NSFetchRequest alloc]init];

[req setEntity:[NSEntityDescription entityForName:@"Tips" inManagedObjectContext:app.managedObjectContext]];
NSString *deletestatement =[[NSString alloc] initWithFormat:@"lock home"];

[req setPredicate:[NSPredicate predicateWithFormat:@"tipdescription LIKE  %@", deletestatement]];
NSError *error;
Tips *std = [[app.managedObjectContext executeFetchRequest:req error:&error] lastObject];

[app.managedObjectContext deleteObject:std]; 
```

运行它后，我收到以下错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-deleteObject：需要非零参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:39:33.003

为什么不使用如下谓词：

```
[req setPredicate:[NSPredicate predicateWithFormat:@"tipdescription ==  %@", deletestatement]]; 
```

一种更干净的方法是针对小费编号进行谓词（我想它是一个标识符并且是一个`NSString`）

```
[req setPredicate:[NSPredicate predicateWithFormat:@"tipnumber ==  %@", @"001"]]; 
```

此外，在执行 fetch 请求时进行一些条件控制：

```
NSManagedObjectContext* myContext = app.managedObjectContext;

NSArray* result = [myContext executeFetchRequest:req error:&error];
if([result count] > 0) {

    Tips *std = (Tips*)[result objectAtIndex:0];
    [myContext deleteObject:std];
} else {

    NSLog(@"No result");
} 
```

# macos - 为什么通过自制软件安装 node.js 是（更多）错误？

> ID：11391534
> 
> 赞同：0
> 
> 时间：2012-07-09T08:33:41.177
> 
> 标签：macos, node.js, homebrew

[安装](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager) 时`node.js`，有点*意外*看到：

> **警告**：已知 brew 安装有问题

为什么`brew`有更多错误（例如，与 相比`port`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:37:12.737

自制配方大部分由社区维护。这意味着它们不断被更改或更新，并且容易出错。Node.js 可能遇到了其中一些错误，但它们很可能很快得到修复。MacPorts 有一个更正式的包含过程，但主要缺点是它几乎没有更新。

# java - 在谷歌应用引擎上加载另一个小部件

> ID：11391537
> 
> 赞同：0
> 
> 时间：2012-07-09T08:33:45.160
> 
> 标签：java, eclipse, google-app-engine

我正在开发一个谷歌应用引擎 java 项目。这是我的第一个此类项目，所以我会做一些愚蠢的事情。我首先使用 get().add(widget) 在客户端文件夹中的 myproject.java 文件上添加一个或多个小部件，一切顺利。

但我想知道我是否可以加载一个小部件并单独运行它（也许是一个用于插入照片的小部件）并在听众之后只在屏幕上看到这个小部件。简单地说，我想在我的主小部件上有 5 个按钮，每个按钮都可以加载它自己的小部件。我可以在java中做到这一点吗？

# javascript - for循环内setInterval中计数器变量i的范围

> ID：11391547
> 
> 赞同：0
> 
> 时间：2012-07-09T08:34:20.670
> 
> 标签：javascript

如何在下面的函数中将 'i' 设置为在 setInterval 内递增，而不是读取 'i' 的最终值？

```
 window.onload= function(){
        var res = ['a','b','c']
        for(i=0;i<res.length;i++){
            document.body.innerHTML += "<li id='L"+i+"' style='display:none;'>"+res[i]+"</li>";
            setTimeout(function(){ 
                document.body.innerHTML += 'L'+i+'<br/>';
                document.getElementById('L'+i).style.display = 'block'
            },1000+i*50);
        }
    } 
```

输出：

```
L3
L3
L3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:36:24.160

for 循环（或任何块）不像其他语言那样免费提供新的范围，您必须使用内联闭包或使用函数迭代，`.forEach`将内联闭包作为“副作用”：

```
window.onload= function(){
    ['a','b','c'].forEach( function(letter, index) {
        document.body.innerHTML += "<li id='L"+index+"' style='display:none;'>"+letter+"</li>";
        setTimeout(function(){ 
            document.body.innerHTML += 'L'+index+'<br/>';
            document.getElementById('L'+index).style.display = 'block';
        },1000+index*50);
    });
} 
```

如果需要，请在此处使用 shim 以获得旧版浏览器支持：

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:36:04.267

这是因为当你的回调执行时，变量`i`是`3`，你可以这样做：

```
 setTimeout((function(i){
      return function() {
        document.body.innerHTML += 'L'+i+'<br/>';
        document.getElementById('L'+i).style.display = 'block';
      };
    })(i), 1000+i*50); 
```

# tcp - TCP：连续多条消息

> ID：11391549
> 
> 赞同：0
> 
> 时间：2012-07-09T08:34:40.750
> 
> 标签：tcp

是否在 TCP 标准中，连续从服务器发送到客户端的多条消息将被客户端以相同的顺序接受（并且一条消息的字节不会分散在其他消息中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:36:13.573

TCP 提供了一种**有序的字节流传送服务**。字节不会以其他顺序到达，但写入次数不必等于读取次数。

*   您永远不会以不同于发送它们的顺序读取字节
*   您不能对“消息”做出任何假设。TCP 不知道消息，只知道字节（见上文）。发送者和接收者**都可以合并和拆分**这样的“消息”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:40:18.350

TCP 使用序列号来标识数据的每个字节。序列号标识了从每台计算机发送的字节的顺序，以便可以按顺序重构数据，而不管传输过程中可能发生的任何碎片、无序或丢包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:07:09.477

我同意@cnicutar。

你是如何反序列化对象的？我怀疑问题出在那儿。

例如，如果您的消息像

`ABCD`200 毫秒后是`PQR`. 它可能显示为：

*   `ABC`其次是`PQR`
*   或者`ABCDPQR`
*   甚至`AB`紧随其后，`CD`紧随 `PQ`其后 `R`。

基本上你不能**根据接收数据的时间做出假设**。

反序列化逻辑应该知道字节流中的对象边界。此信息应由序列化逻辑编码到流中。

如果您使用的是 Java，则可以使用`ObjectInputStream`&`ObjectOutputStream`而不会被序列化问题所困扰。

[J2ME Polish](http://www.enough.de/products/j2me-polish/)有一个很好的序列化实用程序，可以很容易地移植到其他平台。我自己在现场环境中使用过它。

# python - 从 scipy 的 weave.inline 将 C 数组返回到 python 范围

> ID：11391553
> 
> 赞同：3
> 
> 时间：2012-07-09T08:34:46.217
> 
> 标签：python, arrays, return, scipy

我正在使用 scipy 的 weave.inline 来执行计算量大的任务。我在将一维数组返回到 python 范围时遇到问题。Weave.inline 使用一个名为“return_val”的特殊参数来将值返回到 python 范围。以下返回整数值的示例效果很好：

```
>>> from scipy.weave import inline
>>> print inline(r'''int N = 10; return_val = N;''')
10 
```

但是，以下示例确实可以在不提示错误的情况下进行编译，但不会返回我期望的数组：

```
>>> from scipy.weave import inline
>>> code =\
    r'''                                                              
       int* pairs;                                                       
       int  lenght = 0;                                                      
       for (int i=0;i<N;i++){                                            
         lenght   += 1;                                                     
         pairs     = (int *)malloc(sizeof(int)*lenght);                       
         pairs[i]  = i;
         std::cout << pairs[i] << std::endl;              
       }                                                                 
       return_val = pairs;                                               
    '''
 >>> N  = 5
 >>> R = inline(code,['N'])
 >>> print "RETURN_VAL:",R
 0
 1
 2
 3
 4
 RETURN_VAL: 1 
```

我需要动态重新分配数组“对”的大小，这就是为什么我不能传递 numpy.array 或 python 列表本身。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:25:53.240

您需要做的就是使用原始的 python [c-api 调用](http://docs.python.org/c-api/list.html)，或者如果您正在寻找更方便的东西，可以使用内置的 scipy weave 包装器。

不能保证泄漏或效率，但它应该看起来有点像这样：

```
from scipy.weave import inline

code = r'''
    py::list ret; 
    for(int i = 0; i < N; i++) {
        py::list item;
        for(int j = 0; j < i; j++) {
            item.append(j);
        }
        ret.append(item);
    }
    return_val = ret;
    '''
N  = 5 
R = inline(code,['N'])
print R 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T10:45:10.043

如果您事先完全不知道输出数组的大小，则必须在您的内联代码中创建它。我很确定使用 malloc 分配的数组会导致内存泄漏，因为您无法控制何时释放此内存。

解决方案是创建一个 numpy 数组，用函数的结果填充它并返回它。

```
import scipy.weave

code = r"""
npy_intp dims[1] = {n};

PyObject* out_array = PyArray_SimpleNew(1, dims, NPY_DOUBLE);
double* data = (double*) ((PyArrayObject*) out_array)->data;

for (int i=0; i<n; ++i) data[i] = i;

return_val = out_array;
Py_XDECREF(out_array);
"""

n = 5
out_array = scipy.weave.inline(code, ["n"])
print "Array:", out_array 
```

# gwt - gwt Horizo ntalSplitPanel：捕捉分割位置事件

> ID：11391554
> 
> 赞同：0
> 
> 时间：2012-07-09T08:34:46.637
> 
> 标签：gwt, split

我在 gwt 中使用 Horizo​​nSplitPanel 并想知道如果拆分位置发生更改，是否无法获得事件。我需要该事件稍后手动更改某些绝对定位元素的位置。

是否有可能获得更改拆分位置的事件？或者有人知道解决方法吗？

最好的，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:50:22.097

您可以在 splitPanel 上接收 mouseup/mousedown 事件，并在每次释放鼠标时检查拆分位置。如果自上次以来已更改，则触发自定义事件。

您还可以使用自己的 Splitter 实现覆盖较新的 SplitLayoutPanel，该实现在调整大小时发送自定义事件，因为事件处理是在抽象 Splitter 类中实现的。

# iphone - 如何开始为 iPhone/iPad 应用程序设计图形应用程序

> ID：11391556
> 
> 赞同：0
> 
> 时间：2012-07-09T08:34:54.150
> 
> 标签：iphone

我是开发 iphone/ipad 应用程序的新手。我想构建一个基于一些 JSON 参数（可选）绘制图形的应用程序。

你们能否介入并指导我如何开始构建这样的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:41:15.720

您需要树视图来显示您的图表。您可以使用一些解决方案，例如：

[http://code.google.com/p/treeview-4iphone/](http://code.google.com/p/treeview-4iphone/)

[http://dotnet.kapenilattex.com/?p=656](http://dotnet.kapenilattex.com/?p=656)

您将采用存储解决方案并使用您的自定义对象进行绘制

# sencha-touch - sencha 中的模型（数组/对象）

> ID：11391563
> 
> 赞同：0
> 
> 时间：2012-07-09T08:35:21.713
> 
> 标签：sencha-touch, extjs, sencha-touch-2

{名称：'状态'，类型：'对象'}，

这是模型中的字段。

我可以定义 status.status1="value1"、status.status2="value2" 等等......如果是......那么如何？

如果这是不可能的，那么我可以在类型中使用数组吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:33:06.520

如果我正确理解了这个问题，那么您正在寻找的是[store](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store)。这是一个例子：

```
Ext.define('AppName.store.Statuses', {
    extend: 'Ext.data.Store',
    config: {
        model: 'AppName.model.ModelName',
        data: [
            { name: 'name1', status: 'status1' },
            { name: 'name2', status: 'status2' },
            { name: 'name3', status: 'status3' },

        ]
    }
}); 
```

上面的代码将`store`放在你的应用文件夹中的一个目录中，在一个名为 StoreName.js 的文件中。在这里，数据是硬编码的，但存储通常用于通过 AJAX 调用加载数据。有关这方面的更多信息，请参阅[文档。](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store)商店一般以型号名称的复数形式命名。例如，如果您的模型被定义为状态，那么商店将被命名为状态。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T14:54:34.913

只需将字段类型设置为“自动”，请参阅[此 Sencha 论坛帖子](http://www.sencha.com/forum/showthread.php?137949-Can-I-make-a-Model-Field-Type-array)

# php - Kohana 3.2 ORM 检查单条记录是否存在

> ID：11391565
> 
> 赞同：2
> 
> 时间：2012-07-09T08:35:31.813
> 
> 标签：php, count, exists, kohana-orm, kohana-3.2

我在尝试找出检查特定结果是否包含以下代码的任何记录的最佳方法时遇到了一些麻烦：

```
 $record = ORM::factory('my_table', $id); 
```

我通常会使用一个计数器方法，如 $record->count() 或 $records->exist() 方法，如果找到任何东西，它只会返回 true 或 false。但是没有为 ORM 实现这样的事情。

我知道 kohana ORMs 实现了 SPL 可计数接口，因此我可以使用 php count() 函数，但是当只需要一条记录时，这真的没用，因为 count() 将为任何不包含数据的模型返回 1，例如，如果未找到 id。

这是我解决它的方式：

```
try {
 $record = ORM::factory('my_table', $id);

 if($record->id === NULL) {
   throw new Exception('The id: ' . $id . ' was not found, use a valid ID');
 } 
```

}

这个特殊的解决方案不是很好，如果我的表不包含 id 字段或者表允许 ID 为空怎么办？

必须有更好的方法来检查模型是否包含任何数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:55:54.720

```
try 
{
    $record = ORM::factory('my_table', $id);

    if ( ! $record->loaded()) 
    {
        throw new Exception('The id: ' . $id . ' was not found, use a valid ID');
    }
} 
```

[http://kohanaframework.org/3.2/guide/api/ORM#loaded](http://kohanaframework.org/3.2/guide/api/ORM#loaded)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T09:57:03.130

```
$record = ORM::factory('my_table', $id);

if ($record->loaded())
{
    // Load was successful
}
else
{
    // Error
} 
```

# actionscript-3 - Actionscript 3\. 对象存在于时间轴中，但 AS3 获得空引用

> ID：11391566
> 
> 赞同：1
> 
> 时间：2012-07-09T08:35:34.303
> 
> 标签：actionscript-3, flash, actionscript

我有一些动画剪辑在 Flash 时间轴上添加和动画。现在我需要附加一个脚本并在每一帧中对这些 MovieClip 执行一些任务。

问题在于，在时间线中出现 MovieClip 的第一帧中，我得到了一个空对象引用。

[在这里](https://dl.dropbox.com/u/7604222/development/flash/NullObjectDemo.fla)，您有一个演示 de 问题的 fla 文件。在输出的跟踪上，您将看到在第 9 帧中 currentObject 为空。但是，它存在于时间线上。

我对 Flash 开发很陌生，因此我们将不胜感激。

这是演示脚本：

```
processFrame(null)
addEventListener(Event.ENTER_FRAME, processFrame);

function processFrame(e:Event){

trace("frame: ", this.currentFrame);

for (var i:uint = 0; i < this.numChildren; i++) {
    var currentObject = this.getChildAt(i);
    trace("currentObject: ", currentObject);
}

trace(" ");

if(this.currentFrame == totalFrames) {
removeEventListener(Event.ENTER_FRAME, processFrame);
this.stop();
}
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:46:29.990

尝试使用 Event.FRAME_CONSTRUCTED 而不是 ENTER_FRAME 或 EXIT_FRAME

因为它是在进入帧并加载所有阶段*后*触发的，但*在*您退出到下一帧之前。然后，您可以将所需的任何更改应用于当前帧。

此外，如果您使用此事件，我*认为*您不需要第一个 processFrame(null)，因为您永远不会在第 1 帧上获得 ENTER_FRAME，但您应该获得 FRAME_CONSTRUCTED。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:30:57.710

如果将其更改为 Event.EXIT_FRAME 它将正常工作，见下文：

```
addEventListener(Event.EXIT_FRAME, processFrame, false, 0, true);

function processFrame(e:Event){

    trace("frame: ", this.currentFrame);

    for (var i:uint = 0; i < this.numChildren; i++) {
        var currentObject = this.getChildAt(i);
        trace("currentObject: ", currentObject);
    }

    if(this.currentFrame == totalFrames) {
        removeEventListener(Event.EXIT_FRAME, processFrame);
        this.stop();
    }
} 
```

记得在移除事件监听器中更改它；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:34:24.863

时间轴上的对象是否在每个关键帧都具有相同的实例名称？这是一个常见的错误。

始终在属性面板中为您的影片剪辑指定一个实例名称，然后再在时间轴上添加操纵该影片剪辑的关键帧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T10:16:14.093

尝试用以下代码替换上面的 fla 代码：

```
addEventListener(Event.ENTER_FRAME, processFrame);

function processFrame(e:Event){

  trace("frame: ", this.currentFrame);  
  var currentObject = this.getChildAt(0);
  trace("currentObject: " + currentObject + "\n");      

  if(this.currentFrame == totalFrames) {
    removeEventListener(Event.ENTER_FRAME, processFrame);
    this.stop();
  }

} 
```

您将看到输出完全相同。

事实上，你不需要遍历舞台的孩子，实际上你的 fla 剪辑中总是只有一个孩子（在索引 0 处）。我认为的问题是，当您在第 9 帧中输入第二部分时，该对象尚未完全加载/实例化。我认为有一个事件要等待它，但我不记得确切。

# c# - 从网络共享加载 .NET 程序集

> ID：11391567
> 
> 赞同：0
> 
> 时间：2012-07-09T08:35:36.670
> 
> 标签：c#, .net, .net-assembly, code-access-security

我创建了一个需要从网络共享运行以与 AutoCAD 一起使用的程序集。从本地 PC 上的 AutoCAD 调用代码时运行良好，但从网络共享调用时会引发`System.Security.SecurityException`异常。我已经做了一些研究，并尝试使用将网络共享设置为完全信任，`caspol`但它仍然不起作用。查看跟踪，从共享中也存在的 AutoCAD 程序集之一调用方法时似乎出错。

如何设置它以便共享上的所有程序集运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T01:14:17.290

每次加载时在本地复制它。要么将其从网络读取到字节数组中，然后从内存中加载。

# android - 使用 AsyncTask，安卓

> ID：11391568
> 
> 赞同：0
> 
> 时间：2012-07-09T08:35:47.193
> 
> 标签：android, android-asynctask

我正在尝试从服务器获取图像并将该文件用作我的应用程序的背景。我已经知道我应该使用 AsyncTask 来执行此操作，但是当我运行它时，我的应用程序仍然崩溃或冻结。

这是我使用的代码：

要调用 AsyncTask：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent BG = new Intent((Intent) DownloadBGTask.THREAD_POOL_EXECUTOR); 
```

异步任务：

```
import java.net.URL;

import com.pxr.tutorial.json.Getbackground;

import android.os.AsyncTask;

public class DownloadBGTask extends AsyncTask<URL, Integer, Long> {
    protected Long doInBackground(URL... urls) {
        int count = urls.length;
        long totalSize = 0;
        for (int i = 0; i < count; i++) {
            totalSize += Getbackground.downloadFile(urls[i]);
            publishProgress((int) ((i / (float) count) * 100));
            // Escape early if cancel() is called
            if (isCancelled()) break;
        }
        return totalSize;
    }

    protected void onProgressUpdate(Integer... progress) {
        // Things to be done while execution of long running operation
    }

    protected void onPostExecute(Long result) {
        // xecution of result of Long time consuming operation
    }
} 
```

和 Getbackground.java：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.MalformedURLException;
import java.net.URL;

import android.os.Environment;

public class Getbackground {
    URL url;

    public static long downloadFile(URL url2) {
    try {

        URL url = new URL ("http://oranjelan.nl/oranjelan-bg.png");
        InputStream input = url.openStream();{
        try {

            File fileOnSD=Environment.getExternalStorageDirectory();    
            String storagePath = fileOnSD.getAbsolutePath();
            OutputStream output = new FileOutputStream (storagePath + "/oranjelangbg.png");
                try {

                    byte[] buffer = new byte[1000000];
                    int bytesRead = 0;
                    while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
                    output.write(buffer, 0, bytesRead);
                    }
                    } finally {
            output.close();
            }
            } catch (IOException e) {
            throw new RuntimeException(e);
    } finally {
        try {
            input.close();
            } catch (IOException e) {
            throw new RuntimeException(e);
     }
   }    
 }    
        } catch (MalformedURLException ex) {
         throw new RuntimeException(ex);
    } catch (IOException e) {
      throw new RuntimeException(e);
    }

        return 0;
    }
} 
```

PS，对于糟糕的代码，我很抱歉，我对此真的很陌生，所以如果那里有一些非常愚蠢的错误，请不要感到惊讶。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:58:22.507

由于您的评论说它挂在这条线上：

```
Intent BG = new Intent((Intent) DownloadBGTask.THREAD_POOL_EXECUTOR); 
```

让我们开始吧。

由于听起来您可能是新手（这并不丢脸！），我猜您不一定需要并行执行此任务。

如果您[阅读 AsyncTask 上的 Android 文档](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor%28java.util.concurrent.Executor,%20Params...%29)，他们会试图引导您远离这种情况：

> **执行顺序**
> 
> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。
> 
> 如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。

因此，如果您只想将 url 或 url 列表传递给任务以按顺序（系列）执行，那么只需像这样开始您的任务：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    DownloadBGTask downloader = new DownloadBGTask();
    downloader.execute(new URL("http://www.google.com"), 
                       new URL("http://stackoverflow.com")); 
```

其中字符串是您要检索的 URL（可以是 1 个或多个）。`execute()`传递给任务方法的参数`doInBackground()`。

* * *

**编辑：**现在您似乎已经完成了**启动任务**，这里有一些其他建议：

1.  1000000 字节对我来说似乎是一个很大的缓冲区。我并不是说它不起作用，但我通常使用类似`byte[1024]`.

2.  关于存储下载的目录。这是我喜欢使用的代码：

```
private File mDownloadRootDir;
private Context mParent;        // usually this is set to the Activity using this code

private void callMeBeforeDownloading() {
    // http://developer.android.com/guide/topics/data/data-storage.html#filesExternal
    mDownloadRootDir = new File(Environment.getExternalStorageDirectory(),
        "/Android/data/" + mParent.getPackageName() + "/files/");
    if (!mDownloadRootDir.isDirectory()) {
        // this must be the first time we've attempted to download files, so create the proper external directories
        mDownloadRootDir.mkdirs();
    }
} 
```

然后

```
storagePath = mDownloadRootDir.getAbsolutePath(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:19:38.330

使用这个实用方法在 GetBackground 类中从 Web 下载图像：

```
// Utiliy method to download image from the internet
    static private Bitmap downloadBitmap(String url) throws IOException {
        HttpUriRequest request = new HttpGet(url.toString());
        HttpClient httpClient = new DefaultHttpClient();
        HttpResponse response = httpClient.execute(request);

        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            byte[] bytes = EntityUtils.toByteArray(entity);

            Bitmap bitmap = BitmapFactory.decodeByteArray(bytes, 0,
                    bytes.length);
            return bitmap;
        } else {
            throw new IOException("Download failed, HTTP response code "
                    + statusCode + " - " + statusLine.getReasonPhrase());
        }
    } 
```

和你的 `DownloadBGTask extends AsyncTask<URL, Integer, Bitmap>`

```
URL url = new URL ("http://oranjelan.nl/oranjelan-bg.png");
DownloadBGTask task = new DownloadBGTask(); 
task.execute(url); 
```

# android - 当活动被带到前面时，如何获得新的 Intent 额外？

> ID：11391569
> 
> 赞同：4
> 
> 时间：2012-07-09T08:35:47.277
> 
> 标签：android, android-intent, android-activity

当使用 pendingIntent 启动 Activity 并且该 Activity 已经在后台处于活动状态时，我无法获得新 Intent 的附加功能。getIntent 返回**启动 Activity 的 Intent，**但在这种情况下，Android 只会将其拉回最前面并调用 onResume。我希望能够获得新的 Extras 以更新活动。

我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T08:38:17.183

尝试

```
 @Override
protected void onNewIntent(Intent intent) {
    // TODO Auto-generated method stub
    super.onNewIntent(intent);
} 
```

编辑：将活动启动模式设置为 singleTask 时有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T06:22:45.277

onCreate 和 onNewIntent 中的 Intent 不同。如果 Activity 启动模式是 singleTask 或 singleInstance，您确实将 Intent 分为两种情况。请仔细阅读：http: [//developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent)](http://developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent))

onNewIntent를통해들어오는인텐트와 onCreate에서갖어오는인텐트(getIntent)는다르다。

# java - 在eclipse中更改方法签名时添加注释

> ID：11391570
> 
> 赞同：1
> 
> 时间：2012-07-09T08:36:04.490
> 
> 标签：java, eclipse, annotations, refactoring, method-signature

我想通过重构更改 eclipse 中的方法签名。是否可以添加带有重构的注释的新参数？即：我有一个方法：

```
public void foo(int a) ; 
```

现在我想像这样重构它：

```
public void foo(int a, @Someannotation int b); 
```

PS我正在使用**eclipse helios**。

**编辑：** 目前它支持以下内容：

![在此处输入图像描述](../Images/e4fe75d63d50508139e696cfaeaef006.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:53:06.607

不，这在今天是不可能的。还为此打开了一个错误 - [https://bugs.eclipse.org/bugs/show_bug.cgi?id=381449](https://bugs.eclipse.org/bugs/show_bug.cgi?id=381449)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:23:31.700

添加不带注释的新参数。Eclipse 会将新参数的默认值添加到所有方法*调用*中。然后在方法*定义*`@Someannotation`中添加注解：它只定义一次，在源代码编辑器中输入应该不会太难。

# mono - 为什么 MonoDevelop 总是在我的 C# 解决方案中重建所有项目？

> ID：11391580
> 
> 赞同：1
> 
> 时间：2012-07-09T08:37:02.003
> 
> 标签：mono, monodevelop, xbuild

我有一个包含 20 个左右 C# 项目的解决方案。问题是 MonoDevelop 总是重建所有项目。即使只有一个项目发生更改而没有其他项目依赖，也会发生这种情况。

注意：我正在使用“实验性”MSBuild/XBuild 设置进行构建。这是跨平台可移植性所必需的。

版本：

*   MonoDevelop 3.0.3.2。
*   单声道 2.10.9
*   Mac OS 10.7.3

# joomla - Joomla 模型协会

> ID：11391581
> 
> 赞同：0
> 
> 时间：2012-07-09T08:37:11.453
> 
> 标签：joomla

我一直在使用具有模型关联的 CakePHP，例如 hasMany、belongsTom 等...

现在我正在使用 Joomla 并需要这种类型的功能。

我所需要的只是一个正确的方向，例如描述它的链接，因为我似乎无法在 Google 上找到有关它的内容。

保重，李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:42:45.977

两者之间存在天壤之别，远远超出了对 SO 的简单回答。[API Docs](http://api.joomla.org/)相当广泛，并且有很多不错的示例 。[为 Joomla!2.5 开发模型-视图-控制器 (MVC) 组件](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5)也可能会给您一些很好的参考。此外，有 9000 多个可用的开源扩展，通常很容易找到与您想要做的事情相近的一个，以便有一些示例代码可以使用。

# windows-7 - 如何让 WIX 在安装中创建文件到 Program Files 文件夹？我有“访问定义”

> ID：11391598
> 
> 赞同：1
> 
> 时间：2012-07-09T08:38:29.273
> 
> 标签：windows-7, installation, wix, access-denied

我正在创建一个 WIX 安装程序项目。在一个托管自定义操作期间，我需要在安装文件夹中创建一个文件（除了 WIX 组件中指定的部署文件），默认情况下是 Program Files 文件夹。我在 Windows 7 中遇到“拒绝访问”问题。经过一番搜索，我发现人们说不建议在 Program Files 文件夹中创建文件。相反，尝试将文件创建到例如 AppData 文件夹中。例如，请参阅此链接： [C# Access denied to path in a Windows Application](https://stackoverflow.com/questions/3945549/c-sharp-access-denied-to-path-in-a-windows-application)

但我的问题是，生成的文件对我们的软件至关重要，所以它必须驻留在安装文件夹中。我的意思是，在大多数情况下，创建文件不是 SW 安装的目标 Program Files 文件夹吗？这是否意味着应该将唯一的文件添加到安装文件夹中，在安装过程中，部署的文件（基本上是 XCopy 的目标）？

我的文件不能在 WIX 中进行部署，也就是说，它不能在安装之前准备好。那么处理这种情况的正确方法或最佳实践是什么：必须在安装过程中生成一个文件，放入安装文件夹。这不是我可以放在其他地方的日志文件。我试图在 WIX 中为 INSTALLADIR 创建一个 Permission 元素，虽然它似乎违反了链接中提到的规则，但它仍然失败。谢谢！

更新：

基于 MichaelUrman 的评论，提供更多信息。生成的文件是软件安装后需要的，软件正常启动时需要的。而且我认为在安装后的正常使用过程中需要对其进行修改。正如我提到我对@caveman_dick 答案的评论，我的 CA 实际上处于提交阶段，我不知道它与普通的延迟 CA 之间是否有任何区别

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:43:10.760

将自定义操作设置为`Execute="deferred"`，这将运行提升的命令，并应为其提供创建文件所需的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:01:12.913

由于您需要从主应用程序更新该文件，并且我假设您的应用程序不需要提升权限，因此您有三个选项。

1.  第一个是最糟糕的：没有清单，您的可执行文件尝试写入 Program Files 文件夹通常会导致它被重定向到虚拟存储（请参阅[文件虚拟化](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756960.aspx)）。听起来这在你的情况下没有发生，所以你不能使用它。
2.  第二个选项是修改应用程序以将其存储在适当的位置，例如 ProgramData 文件夹或 Common Documents，或（如果适用）LocalAppData 下的每个用户位置。这通常是最好的方法，但开发成本最高。
3.  最后第三个选项是创建文件并更改其权限（或在某些情况下更改包含该文件的文件夹的权限），允许有限的用户修改此文件。请参阅 LockPermissions 或 MsiLockPermissionsEx 以了解 Windows 安装程序解决此问题的方法。更改尽可能少的文件或文件夹的权限，如果您使用此选项，则尽可能确保系统安全。

# objective-c - 随机生成器从不显示的数组中获取数据

> ID：11391600
> 
> 赞同：0
> 
> 时间：2012-07-09T08:38:38.113
> 
> 标签：objective-c, ios, xcode

我知道使用 arc4random 有更好的解决方案（它在我的 to-try-out-function 列表中），但我想先尝试使用`rand()`and`stand(time(NULL))`函数。我创建了一个`NSMutableArray`并用 5 个数据处理它。测试它有多少数字很好。但是当我尝试使用按钮功能加载对象时，它返回给我`object <sampleData: 0x9a2f0e0>`

```
- (IBAction)generateNumber:(id)sender {

        srand(time(NULL));
    NSInteger number =rand()% ds.count ;
    label.text = [NSString stringWithFormat:@"object %@", [ds objectAtIndex:number] ];
    NSLog(@"%@",label.text);

 } 
```

虽然我觉得主要原因是方法本身，但我已经粘贴了下面的其余代码，以防万一我在某处犯了任何错误。

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "sampleData.h"
#import "sampleDataDAO.h"
@interface ViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *label;
@property (weak, nonatomic) IBOutlet UIButton *onHitMePressed;
- (IBAction)generateNumber:(id)sender;
@property(nonatomic, strong) sampleDataDAO *daoDS;
@property(nonatomic, strong) NSMutableArray *ds;
@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize label;
@synthesize onHitMePressed;
@synthesize daoDS,ds;

- (void)viewDidLoad
{
    [super viewDidLoad];
    daoDS = [[sampleDataDAO alloc] init];
    self.ds = daoDS.PopulateDataSource;
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setLabel:nil];
    [self setOnHitMePressed:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)generateNumber:(id)sender {

    srand(time(NULL));
NSInteger number =rand()% ds.count ;
label.text = [NSString stringWithFormat:@"object %@", [ds objectAtIndex:number] ];
NSLog(@"%@",label.text); 
```

} @结尾

样本数据.h

```
#import <Foundation/Foundation.h>

@interface sampleData : NSObject
@property (strong,nonatomic) NSString * object;
@end 
```

样本数据.m

```
#import "sampleData.h"

@implementation sampleData
@synthesize object;
@end 
```

样本数据DAO.h

```
#import <Foundation/Foundation.h>
#import "sampleData.h"
@interface sampleDataDAO : NSObject
@property(strong,nonatomic)NSMutableArray*someDataArray;

-(NSMutableArray *)PopulateDataSource;
@end 
```

样本数据DAO.m

```
#import "sampleDataDAO.h"

@implementation sampleDataDAO
@synthesize someDataArray;

-(NSMutableArray *)PopulateDataSource
{
    someDataArray = [[NSMutableArray alloc]init];

    sampleData * myData = [[sampleData alloc]init];
    myData.object= @"object 1";
    [someDataArray addObject:myData];
    myData=nil;

   myData = [[sampleData alloc] init];
    myData.object= @"object 2";
    [someDataArray addObject:myData];
    myData=nil;

    myData = [[sampleData alloc] init];
    myData.object= @"object 3";
    [someDataArray addObject:myData];
    myData=nil;

    myData = [[sampleData alloc] init];
    myData.object= @"object 4";
    [someDataArray addObject:myData];
    myData=nil;

    myData = [[sampleData alloc] init];
    myData.object= @"object 5";
    [someDataArray addObject:myData];
    myData=nil;

    return someDataArray;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:12:17.190

我猜正在发生的事情是 nslog 函数无法打印示例数据类中的数据，因为它不是标准类。非标准类必须实现“描述”方法。当你打印出你的类时，你得到的是指向它的指针，因为 nslog 无法知道如何打印出你的类中的数据。

如果您要在该标签/nslog 上打印的是您的类“sampledata”中的 nsstring，您应该访问该属性。

这可以通过以下方式完成：

```
SampleData *instanceOfSampleData = (SampleData*)[ds objectAtIndex:number];

label.text = [NSString stringWithFormat:@"object %@", instanceOfSampleData.object]; 
```

# c++ - 使qt忽略特定的头包含文件

> ID：11391601
> 
> 赞同：2
> 
> 时间：2012-07-09T08:38:42.767
> 
> 标签：c++, qt, waf, moc

我有一个用 qt 制作的正在运行的项目。出于构建目的，我正在使用 waf 构建工具。要从 waf 启动并运行相同的项目，我需要添加

```
#include "file.moc" 
```

在某些文件的末尾以避免未定义的引用。但是如果这些包含没有在 qt 中注释，我会得到找不到文件错误。你如何让 qt 忽略某些文件包含。我认为这样的事情应该可以解决问题

```
#ifndef Q_MOC_RUN
    #include "file.moc"
#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:12:07.183

由于提供的信息有限，我只能展示 waf 可以做什么：

您可以包含 moc 文件*或未*处理的文件。

示例包含在[https://code.google.com/p/waf/downloads/detail?name=waf-1.6.11.tar.bz2的分布式源代码中](https://code.google.com/p/waf/downloads/detail?name=waf-1.6.11.tar.bz2)

子目录：

*   游乐场/slow_qt/
*   演示/qt4/

为了完整起见，简化示例：

*默认包括*

```
def options(opt):
opt.load('compiler_cxx qt4')

def configure(conf):
conf.load('compiler_cxx qt4')
conf.load('slow_qt4')

def build(bld):
bld(
    features = 'qt4 cxx cxxprogram',
    uselib   = 'QTCORE QTGUI QTOPENGL QTSVG',
    source   = 'some.cpp files.cpp',
    includes = '.',
    target   = 'dummy',
) 
```

*moc cpp*

```
def options(opt):
opt.load('compiler_cxx qt4')

def configure(conf):
conf.load('compiler_cxx qt4')

 def build(bld):
bld(
    features = 'qt4 cxx cxxprogram',
    uselib   = 'QTCORE QTGUI QTOPENGL QTSVG',
    source   = 'some.cpp files.cpp',
    target   = 'dummy',
    includes = '.')
) 
```

# maven-2 - 有没有办法根据 cron 规则安排 Jenkins 作业与不同版本的 Maven 一起运行？

> ID：11391605
> 
> 赞同：2
> 
> 时间：2012-07-09T08:39:09.447
> 
> 标签：maven-2, jenkins, maven-3

我们正在使用 Maven 2.2.1 和 Jenkins。我们有大约 300-400 个模块。几个月前，我们完成了从 Ant 到 Maven 的迁移，当时的目标是确保在 Maven 2.2.1 下正确构建，因为我们仍然不愿意直接迁移到 Maven 3.0.x。是的，我们知道 Maven 相对稳定，但由于迁移所有模块和程序集（来自 Ant）所需的努力，我们选择坚持使用众所周知的稳定版本，例如 2.2.1。

为了列出不完全符合 Maven 3.x 的模块，我想安排 Jenkins 作业（当前使用 Maven 2.2.1 运行它们）在预定时间使用 3.0.4 构建它们在夜晚。我怎样才能做到这一点？

提前致谢！

马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:25:30.863

这是一个尖叫的黑客，但应该工作。因为它是一个黑客，我将把确切的细节留给你;-)

您需要设置两个作业来隔离 maven 3 个作业。

这两个作业都需要[Groovy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)才能添加构建步骤。

您将在系统配置中设置三个版本的 Maven。

*   Maven 2.2.1
*   Maven 3.0.4
*   Maven 2.2.1 白天 3.0.4 晚上

第一个作业将访问全局配置并更改`Maven 2.2.1 by day 3.0.4 by night`为指向与`Maven 3.0.4`. 第二个工作将其切换回来。

代码将需要类似于

```
import hudson.tasks.*;
Maven.DescriptorImpl descriptor = jenkins.model.Jenkins.instance.getDescriptor(Maven.class);
Maven.MavenInstallation[] installs = descriptor.installations.clone; 
// clone the array because we will be modifying it
Maven.MavenInstallation v3 = null;
for (Maven.MavenInstallation i: installs) {
  if (i.name.equals("Maven 3.0.4")) { v3=i; break;}
}
v3.class; // throw NPE if null (should be non-null)
for (int i = 0; i < installs.length; i++) {
  if (installs[i].name.contains("by night")) { installs[i] = new Maven.MavenInstallation(installs[i].name,v3.home); break;}
}
descriptor.setInstallations(installs); 
```

注意我没有检查上面的语法，但它应该足够接近让你排序。

反向工作应该很容易

# datagridview - 如何使用 BackgroundWorker 加载 DataGridView

> ID：11391606
> 
> 赞同：0
> 
> 时间：2012-07-09T08:39:19.403
> 
> 标签：datagridview, backgroundworker

我从事 C# 项目

在我的项目中，我有 2 个窗口表格（表格 A 和表格 B）。并且表单 A 是表单 B 的父级。另外，我在表单 A 中有一个 DataGridView，在表单 B 上有一个按钮。

单击此按钮时（在表单 B 中）。表单 A 中的 DataGridView 必须重新加载。为此，我在表单 B 中创建了一个 BackgroundWorker，并从表单 A 调用 LoadDataGridview 方法。

但我的问题是：

有时（并非总是）单击按钮时出现问题（空对象）并且 DataGridview 行消失，并且在直径中可见 2 条红线。

我的 LoadDataGridview 方法是这样的：

```
public void LoadDataGridview()
{

MyMethod.DGV.SaveDataGridViewMetaData(dgvPersons);

        objDataViewPersons = SqlServerDB.SqlMethod.GetContentOfTableWithDataView("Persons");

        objDataViewPersons.Table.Columns.Add("Department2", typeof(string));            

        if (objDataViewPersons.Table.Rows.Count == 0)
        {
            btnEditPerson.Enabled = false;
            btnLastPerson.Enabled = false;
            btnShow.Enabled = false;
            btnPrint.Enabled = false;
        }

        foreach (DataRow drcurrent in objDataViewPersons.Table.Rows)
        {
            drcurrent["Department2"] = GlobalVar.CmbControl.GetNam(ComboBoxControl.ListName.Department, ComboBoxControl.ListInput.ID, drcurrent["Department"].ToString());
        }

        objBindingSource.DataSource = objDataViewPersons;

        MyMethod.DGV.RestoreDataGridViewMetaData(dgvPersons);
    } 
```

如何快速且无错误地重新加载 DataGridView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:49:37.090

我会考虑创建用户控件。

用户控件是一种制作自定义、可重用组件的方法。用户控件可以包含其他控件，但必须由表单承载。

因此，通过这样做，您可以创建单独的控件来管理每个数据网格。

查看此链接，了解它们的用途和用途：-

[http://msdn.microsoft.com/en-us/library/aa302342.aspx](http://msdn.microsoft.com/en-us/library/aa302342.aspx)

# java - 如何在 Slick2D 中使用 JBox2D 调试绘图？

> ID：11391607
> 
> 赞同：0
> 
> 时间：2012-07-09T08:39:20.777
> 
> 标签：java, slick2d, jbox2d

[JBox2D](http://www.jbox2d.org/)是 Box2D 物理引擎的 Java 端口，具有一个可扩展的模块，用于创建形状的调试绘图。如何将它与[Slick2D](http://slick2d.com)游戏库一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:39:21.260

使用 Slick2D 的[JBox2D DebugDraw 类](https://gist.github.com/3074904)很容易添加调试绘图。将以下代码放入您的`init`方法中：

```
Slick2DJBox2DDebugDraw debugDraw = new Slick2DJBox2DDebugDraw(gameContainer);
debugDraw.setFlags(DebugDraw.e_shapeBit);
world.setDebugDraw(debugDraw); // Where world is your JBox2D world 
```

# c# - 在这个例子中“索引器”是如何工作的？

> ID：11391609
> 
> 赞同：2
> 
> 时间：2012-07-09T08:39:25.760
> 
> 标签：c#, .net

这是主要课程

```
 class Program
{
    static void Main(string[] args)
    {
        MyArray fruit = new MyArray(-2, 1);
        fruit[-2] = "Apple";
        fruit[-1] = "Orange";
        fruit[0] = "Banana";
        fruit[1] = "Blackcurrant";
        Console.WriteLine(fruit[-1]);       // Outputs "Orange"
        Console.WriteLine(fruit[0]);        // Outputs "Banana"
        Console.WriteLine(fruit[-1,0]);     // Output "O"
        Console.ReadLine();
    }
} 
```

这是索引器的类：

```
class MyArray
{
    int _lowerBound;
    int _upperBound;
    string[] _items;

    public MyArray(int lowerBound, int upperBound)
    {
        _lowerBound = lowerBound;
        _upperBound = upperBound;
        _items = new string[1 + upperBound - lowerBound];
    }

    public string this[int index]
    {
        get { return _items[index - _lowerBound]; }
        set { _items[index - _lowerBound] = value; }

    }

    public string this[int word, int position]
    {
        get { return _items[word - _lowerBound].Substring(position, 1); }
    }
} 
```

因此，在“Class MyArray”中定义的多维索引器

当我们将“-1”作为“word”的值传递给索引器时，我无法理解这是如何工作的。“_lowerbound”的值为“-2”。所以这意味着，返回的值应该是_items[-1 - (-2)]，这使它成为_items[1]。

但实际上它指向水果的-1 指数，即橙色。

请清除我的疑问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:28:39.467

This is you private array `_items`:

```
   0     1     2     3
┌────┐┌────┐┌────┐┌────┐
│ Ap ││ Or ││ Ba ││ Bl │          
└────┘└────┘└────┘└────┘  

```

This is how it appears using the indexer:

```
  -2    -1     0     1
┌────┐┌────┐┌────┐┌────┐
│ Ap ││ Or ││ Ba ││ Bl │          
└────┘└────┘└────┘└────┘  

```

> The value for `_lowerbound` is `-2`.
> 
> So it means, the value for the return should be `_items[-1 - (-2)]`, which makes it `_items[1]`.

That's correct.

> But actually it is pointing to `-1` index of fruits i.e. Orange.

That's wrong. It is pointing to `_items[1]`, i.e. Orange.

Indexers are a simple way to permit a class to be used like an array. Internally, you can manage the values presented in any fashion you wish.

`_items` is a zero-based array with the same length as the created `MyArray` object.

The indexer is just interpreting the index number supplied and map it against this underlying array.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T08:42:14.373

[[这不是预期意义上](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.71%29.aspx)的多维数组，它只是看起来像一个。]

**更新答案：**

看起来您期望：`fruits[-1, 0]`指向与 . 相同的元素`fruits[1] = "Blackcurrent"`。不幸的是，情况并非如此，因为在这两种情况下，您实际上都在使用自定义索引器，它们都会修改您提供的索引值。

上的自定义索引器会在您提供的索引值到达底层*之前*`MyArray`对其进行*变异*。这就是混淆的地方，您没有考虑自定义索引器中的代码：*`string[]`*

 *```
public string this[int index]
{
    get { return _items[index - _lowerBound]; }
    set { _items[index - _lowerBound] = value; }

}

public string this[int word, int position]
{
    get { return _items[word - _lowerBound].Substring(position, 1); }
} 
```

* * *

**老答案：**

不要将原始数组中的数组索引与**自定义实现**上的索引混淆。你可以对后者做任何你喜欢的事情，它基本上只是方法调用的语法糖。您有一个带有 的索引器`int`，这意味着任何有效`int`的都是索引器的有效参数（尽管可能不适用于底层原始数组`string[]`）。

您的索引实现从 get 和 set 中减去`lowerBound`，因此在 set 中提供的相同索引将导致与为 get 提供的索引相同的元素。

采用两个参数的第二个索引器正在执行*相同*的索引修改，因此将产生*相同*的元素（橙色）......

混乱在哪里？您是否期望...的第二个参数

```
public string this[int word, int position] 
```

...以某种方式影响返回的元素？它用于`Substring`调用 ordinal 返回的元素`word - lowerBound`，它不*影响*选择什么元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T08:51:50.217

.Net 语言（如 C#）中的数组不能包含具有负索引的项。

为了避免这种情况，这个数组类将具有最低索引（的索引`_lowerBound`）的项移动到 0。因此，当您访问内部数组时，您必须`_lowerBound`从索引中减去，因此它永远不会尝试传递负索引。

这就是为什么 -1 在内部数组中实际上是 1，因为 -1 - (-2) 等于 1。

编辑：我不确定你为什么认为你的班级的两个索引器之间应该有区别。它们都用于`_items[index - _lowerBound]`访问底层的 .Net 数组。除了 String.Substring 调用之外，这两个索引器之间没有区别。

尝试更改第二个索引器的代码，使其调用第一个索引器，您会看到它返回相同的字符。( [http://ideone.com/sFmDo](http://ideone.com/sFmDo) )

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T08:43:21.983

this[int] 和 this[int,int] 中计算的索引是_items数组中你需要的索引，这个数组从索引0开始。所以第二个item确实是index=1，也就是Orange。

更新：_items[-1] 不存在，这个数组从索引 0 开始。*

# list - SWI-Prolog：Sum-List

> ID：11391611
> 
> 赞同：2
> 
> 时间：2012-07-09T08:39:40.150
> 
> 标签：list, prolog

我从Prolog开始，我有点困惑......

我有一个简单的程序：

```
sum(0, []).
sum(Total, [Head|Tail]) :- sum(Sum, Tail), Total is Head + Sum. 
```

当我调试时，我可以看到 Prolog 首先用 Head 和 Tail 拆分列表，所以结果是 0 + 空列表，然后它开始对数字求和并再次将其添加到列表中。

有人可以解释为什么它没有`Total is Head + Sum.` 先出现然后再次将列表拆分为 Head 和 Tail 吗？

编辑：这是跟踪：

```
[trace]  ?- sum(X, [1,2,3]).
Call: (6) sum(_G345, [1, 2, 3]) ? creep
Call: (7) sum(_G424, [2, 3]) ? creep
Call: (8) sum(_G424, [3]) ? creep
Call: (9) sum(_G424, []) ? creep
Exit: (9) sum(0, []) ? creep
Call: (9) _G430 is 3+0 ? creep
Exit: (9) 3 is 3+0 ? creep
Exit: (8) sum(3, [3]) ? creep
Call: (8) _G433 is 2+3 ? creep
xit: (8) 5 is 2+3 ? creep
Exit: (7) sum(5, [2, 3]) ? creep
Call: (7) _G345 is 1+5 ? creep
Exit: (7) 6 is 1+5 ? creep
Exit: (6) sum(6, [1, 2, 3]) ? creep
X = 6. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T18:36:52.980

您的定义将添加添加到堆栈中。避免加法的优化将是一种称为*尾递归*的通用技术的特例。

以下定义可以使用尾递归：

```
sum(X,L):-sum(0,L,X).
sum(X,[],X).
sum(N, [Head|Tail],Y) :- N1 is Head + N, sum(N1,Tail,Y). 
```

它为部分和的值引入了一个累加器，并将其与列表的尾部一起携带。这是`sum(X,[1,2,3])`查询执行的跟踪。

```
?- trace, sum(S,[1,2,3]),notrace,nodebug.
   Call: (7) sum(_G584, [1, 2, 3]) ? creep
   Call: (8) sum(0, [1, 2, 3], _G584) ? creep
^  Call: (9) _G792 is 1+0 ? creep
^  Exit: (9) 1 is 1+0 ? creep
   Call: (9) sum(1, [2, 3], _G584) ? creep
^  Call: (10) _G795 is 2+1 ? creep
^  Exit: (10) 3 is 2+1 ? creep
   Call: (10) sum(3, [3], _G584) ? creep
^  Call: (11) _G798 is 3+3 ? creep
^  Exit: (11) 6 is 3+3 ? creep
   Call: (11) sum(6, [], _G584) ? creep
   Exit: (11) sum(6, [], 6) ? creep
   Exit: (10) sum(3, [3], 6) ? creep
   Exit: (9) sum(1, [2, 3], 6) ? creep
   Exit: (8) sum(0, [1, 2, 3], 6) ? creep
   Exit: (7) sum(6, [1, 2, 3]) ? creep
S = 6 . 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-04T16:59:35.167

这是另一个版本。我一直在使用概念映射软件来帮助设计代码，我无法在脑海中做复杂的事情。

```
sum(A, [], A).
sum(Total, [Head|Tail], AuxNum) :-
    Sum is Head+AuxNum,
    sum(Total, Tail, Sum).

   1 ?- trace,sum(Total,[1,2,3],0).
   Call: (7) sum(_G2090, [1, 2, 3], 0) ? creep
   Call: (8) _G2221 is 1+0 ? creep
   Exit: (8) 1 is 1+0 ? creep
   Call: (8) sum(_G2090, [2, 3], 1) ? creep
   Call: (9) _G2224 is 2+1 ? creep
   Exit: (9) 3 is 2+1 ? creep
   Call: (9) sum(_G2090, [3], 3) ? creep
   Call: (10) _G2227 is 3+3 ? creep
   Exit: (10) 6 is 3+3 ? creep
   Call: (10) sum(_G2090, [], 6) ? creep
   Exit: (10) sum(6, [], 6) ? creep
   Exit: (9) sum(6, [3], 3) ? creep
   Exit: (8) sum(6, [2, 3], 1) ? creep
   Exit: (7) sum(6, [1, 2, 3], 0) ? creep
Total = 6. 
```

# javascript - Javascript 图像加载回调类-实习函数

> ID：11391620
> 
> 赞同：1
> 
> 时间：2012-07-09T08:40:18.600
> 
> 标签：javascript, image, callback, onload

```
Objekt.prototype.loadImg = function(pImg){
    if(pImg!=null){
        this.imgLoaded=false;
        this.img = null;
        this.img = new Image();         
        this.img.src = pImg;     
        this.img.onload = function(){
            alert("!");
            this.autoSize();                
            this.imgLoaded=true;
        }; 

    }
} 
```

我的问题是“this”在“onload = function()”函数中无效！

警报（”！”）; 被执行，但不是 Objekt.prototype.autoSize() 函数，例如！

我该怎么做才能调用我的“实习生”功能（例如 autoSize）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:41:40.690

那是因为`onload`没有以您的 objekt 作为接收者来调用该函数。因此`this`，在此回调中，不是所需的对象。

您可以这样做以传输`this`到`onload`回调：

```
Objekt.prototype.loadImg = function(pImg){
    if(pImg!=null){
        this.imgLoaded=false;
        this.img = null;
        this.img = new Image();         
        this.img.src = pImg;     
        var _this = this;
        this.img.onload = function(){
            alert("!");
            _this.autoSize();                
            _this.imgLoaded=true;
        }; 
    }
} 
```

# javascript - 使用 javascript gen_validatorv4.js 验证表单字段

> ID：11391621
> 
> 赞同：0
> 
> 时间：2012-07-09T08:40:18.287
> 
> 标签：javascript, forms, validation

我正在使用来自 javascript-coder.com 的 gen_validatorv4.js 来验证表单。我喜欢它，因为它很容易设置为正常使用。但现在我遇到了一个我无法修复的设置。

这就是我想要做的。我有一个表单来编辑用户名、用户名和密码等字段。问题是我希望脚本仅在密码字段不为空时验证密码字段。

我已经尝试过这种方式，但它不起作用：

```
function DoCustomValidation() {
  var frm = document.forms["edit_validate"];
  if(frm.uPass.value != '') {

    frmvalidator.addValidation("uPass","minlen=8","Minimum 8 characters")
    frmvalidator.addValidation("uPass2","req","Passwords missing");
    frmvalidator.addValidation("uPass2","eqelmnt=uPass","Password fields doesn't match");
    frmvalidator.addValidation("uPass","neelmnt=uName","User name and password can't be the same");
    return true;

  } else {
    return false;
  }
}

frmvalidator.setAddnlValidationFunction(DoCustomValidation); 
```

任何想法任何人？

问候每

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:28:55.930

刚刚在 ehow 上找到了这个！

```
frmvalidator.addValidation("PASSWORD2","eqelmnt=PASSWORD", 
    "The confirmed password is not same as password"); 
```

# objective-c - 为什么为outlineView调用objectValueForTableColumn这么多次？

> ID：11391627
> 
> 赞同：0
> 
> 时间：2012-07-09T08:40:51.907
> 
> 标签：objective-c, cocoa

我正在通过 Apple OS x 开发人员库学习可可的大纲视图。示例源是这样的：

```
- (id)outlineView:(NSOutlineView *)outlineView child:(NSInteger)index ofItem:(id)item {
    return (item == nil) ? [FileSystemItem rootItem] : [(FileSystemItem *)item       childAtIndex:index];
}

- (BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item {
    return (item == nil) ? YES : ([item numberOfChildren] != -1);
}

- (NSInteger)outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(id)item {
    return (item == nil) ? 1 : [item numberOfChildren];
}

- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item {
    return (item == nil) ? @"/" : [item relativePath];
} 
```

这将像树一样列出我系统中的所有文件。问题是：
1.如果“/”下有32个文件，方法

```
- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item 
```

将被调用 62 次，我不知道为什么？
2.方法

```
- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item 
```

没有关于行的参数，那么可可如何确定该项目应该显示在哪一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:54:51.740

1.  如果“/”下有32个文件，方法

    *   (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item

将在显示时为每一行和每一列调用。**我假设你有 2 列，实际显示了 31 行**。

1.  该方法没有关于行的参数，那么可可如何确定该项目应显示在哪一行？

`item`是指向用于填充表的对象的指针。这就是所有`NSOutlineViewDataSource Protocol`需要知道的。内部显示行的详细信息`NSOutlineView`

# solr - 我如何使用 lucene 查询找到空的 Solr 文档字段

> ID：11391628
> 
> 赞同：4
> 
> 时间：2012-07-09T08:41:04.277
> 
> 标签：solr, lucene

我有一些这样的文件：

```
<doc>
  <str name="navTitle"/>
  <str name="title">Word 1</str>
</doc>
<doc>
  <str name="navTitle">Word 2</str>
  <str name="title">Word 3</str>
</doc> 
```

我会找到所有带有空“navTitle”字段的文档！这个 lucene 查询如何？

我尝试“navTitle:''”和“navTitle:''”，但 Solr Admin Panal 什么也没找到。查询有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T08:56:09.170

在[SolrQuerySytax](http://wiki.apache.org/solr/SolrQuerySyntax)页面中，他们说您可以使用以下查询来查找所有空查询。

```
-field:[* TO *] finds all documents without a value for field 
```

# oauth - 用于配置 api 的服务帐户 OAuth2

> ID：11391633
> 
> 赞同：3
> 
> 时间：2012-07-09T08:41:18.803
> 
> 标签：oauth, google-api-java-client, google-provisioning-api

服务帐户 OAuth2 身份验证是否适用于 Provisioning api。我有一个谷歌应用管理员帐户，需要通过桌面应用程序管理所有帐户。这是否可以使用 OAuth 2.0 的服务帐户身份验证机制。我可以提取和推送在特定域上创建的所有用户帐户的详细信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T04:01:21.647

不幸的是，服务帐户不适用于 Provisioning API。但是，它确实适用于 admin sdk，它是取代供应 API 的新 API！

[https://developers.google.com/admin-sdk/directory/](https://developers.google.com/admin-sdk/directory/)

# iphone - NSArray initWithObjects：内存泄漏

> ID：11391637
> 
> 赞同：0
> 
> 时间：2012-07-09T08:41:34.417
> 
> 标签：iphone, objective-c

这是我的代码：

```
 - (void)viewDidLoad{
[super viewDidLoad];

self.authorList = [[NSArray alloc] 
                   initWithObjects:@"Christie, Agatha", 
                   @"Archer, Jeffrey", nil];

self.title = @"Authors"; 
```

}

我在分配和初始化数组作者列表的行出现内存泄漏。我试图将 autorelease 放在 authorlist 上，但它说“对象已发送 - autorelease 发送了太多次”。我还在学习内存管理。

格拉西亚斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T08:46:36.850

setter 方法`authorList`将保留数组，因此您需要在调用它后立即释放它：

```
NSArray *list = [[NSArray alloc] 
                initWithObjects:@"Christie, Agatha", 
                @"Archer, Jeffrey", nil];
self.authorList = list;
[list release]; 
```

或者你可以自动释放它：

```
self.authorList = [[[NSArray alloc] 
                   initWithObjects:@"Christie, Agatha", 
                   @"Archer, Jeffrey", nil] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:45:30.693

你在你的类中写了dealloc方法吗？

如果你没有使用 ARC [http://cocoa-touch.blogspot.ie/2008/09/memory-management-on-iphone.html](http://cocoa-touch.blogspot.ie/2008/09/memory-management-on-iphone.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:48:56.933

您不应该直接分配属性对象。

你应该这样分配：

```
 - (void)viewDidLoad{
      [super viewDidLoad];

       NSArray *tempArray = [[NSArray alloc] 
               initWithObjects:@"Christie, Agatha", 
               @"Archer, Jeffrey", nil];
       self.authorList = tempArray;
       [tempArray release];

      NSString *titleString = @"Authors";
      self.title = titleString;
      [titleString release];
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T08:53:21.730

用这个

```
 self.authorList = [[[NSArray alloc] 
               initWithObjects:@"Christie, Agatha", 
               @"Archer, Jeffrey", nil] autorelease]; 
```

# php - PHP - 如何在某个点将“...”附加到不同长度的字符串？例如 200 个字符后

> ID：11391638
> 
> 赞同：4
> 
> 时间：2012-07-09T08:41:37.913
> 
> 标签：php, string

我有一个 mysql 数据库和一个充满信息的表，特别是一列产品描述。此列在我的脚本中使用了两次。其最大长度为 1000 个字符。

此信息的用途之一是对任何给定产品的简要描述。我想显示我刚才提到的描述的简化版本，例如 200 个字符长。

现在，使用 PHP，我想在字符串达到 200 个字符的位置附加“...”（3 个点）。所以基本上只显示前 200 个字符。

我该怎么做这样的事情？我相信这将是一项相当简单的任务，但互联网是寻找您不知道名称的东西的好地方:)

如果有人可以在这方面提供帮助，请提供与相关功能相关的示例或一些链接，那就太好了。非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T08:43:31.283

[您可以使用substr](http://php.net/manual/en/function.substr.php)实现此目的。

`$string = substr($string,0,197) . "...";`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T08:44:28.790

这个处理实际上还不是 200 个字符的字符串。

```
$string = 'your long string goes here';
if (strlen($string) >= 200) {
    $string = substr($string, 0, 197).'...';
} 
```

来源：[php.net/substr](http://php.net/substr)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-09T08:46:49.003

我可以给你一个用纯 CSS 制作的替代品吗（例如，适合标题）？

`overflow: hidden; white-space: nowrap; text-overflow: ellipsis;`

如果周围的元素不够长/足够大，则会自动切断太长的文本。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-09T08:44:49.970

```
$string = 'asd';
$maxLength = 200;
if (mb_strlen($string) > $maxLength) {
    $string = mb_substr($string, 0, $maxLength) . "...";
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-09T08:48:46.370

首先只从您的数据库中收集 200 个字符。

```
$sql = "SELECT LEFT(article, 200) as article WHERE ETC ETC " 
```

然后应用[类似这样的东西](http://www.sitepoint.com/forums/showthread.php?351954-News-Brief-Show-first-x-Number-of-Words&highlight=word%20break)，但基本上你需要回到前一个单词结束砍掉其余部分并附加一个省略号。

```
&#133; 
```

# java - 从一种 HTML 转换为另一种 HTML

> ID：11391644
> 
> 赞同：0
> 
> 时间：2012-07-09T08:41:59.800
> 
> 标签：java, javascript, html, xml, xslt

我有一个问题，对于一个项目，我有两个包（A 和 B），其中包含一些 .xml、.gif、.js、.html 文件等。我的任务是从包 A 转换为 B。对于第一步转换我用 XSLT 做的需要一个 XML 到另一个 XML。第二步是将丢失的 javascripts 文件从文件夹（包）B 包含到 A 中，这是我使用 java 程序完成的。现在我的第三个任务是修改包 A 的 .html 文件，以包含我从 B 复制的那些 javascripts 元素和其他元素（一个提交按钮）。所以任何人都可以帮我解决这个问题。

包 A 的 HTML（来源）-

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
<title>eXe</title>
<style type="text/css">
@import url(base.css); 
@import url(content.css);
</style>
<script type="text/javascript" src="common.js"></script>
</head>

<body>
<div id="outer">
<div id="main">
<div id="nodeDecoration">
<p id="nodeTitle">
Part 1</p>
</div>
<div class="TrueFalseIdevice" id="id12">
<script type="text/javascript" src="common.js"></script>
<script type="text/javascript" src="libot_drag.js"></script>
<div class="iDevice emphasis1">
......
.......
</div></html> 
```

包 B 的 HTML（必填）-

```
 <?xml version="1.0" encoding="UTF-8"?>
       <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"                               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
           <html xmlns="http://www.w3.org/1999/xhtml">
       <head>

          <title>eXe</title>
        <meta http-equiv="Content-Type" content="text/html;  charset=utf-8" />
    <style type="text/css">
@import url(base.css);
@import url(content.css);
</style>
<script type="text/javascript" src="common.js"></script>
</head>
<!--TO BE INCLUDED-->
<script type="text/javascript" src="APIWrapper.js"></script>
<script type="text/javascript" src="SCOFunctions.js"></script>
<!---->
<body onload="loadPage()" onunload="unloadPage()"><div id="outer">
<div id="main">
<div id="nodeDecoration">
<p id="nodeTitle">
Part 1</p></div>
<div class="QuizTestIdevice" id="id8">
.....
......
.......
<!--This submit button also has to be included-->
<br/><input type="submit" name="submitB" value="SUBMIT ANSWERS"/>
......
......
....
</div></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:48:17.507

您可以将 HTML 解析为 XML 信息集（有[几个可用的 HTML 解析器](http://java-source.net/open-source/html-parsers)，包括[TagSoup](http://mercury.ccil.org/~cowan/XML/tagsoup/)），[使用 XSLT 进行转换](http://docs.oracle.com/javase/7/docs/api/javax/xml/transform/TransformerFactory.html#newTransformer%28javax.xml.transform.Source%29)，并使用 XSLT 的[HTML 输出模式](http://www.w3.org/TR/xslt#section-HTML-Output-Method)[序列化](http://docs.oracle.com/javase/7/docs/api/javax/xml/transform/stream/StreamResult.html)回 HTML 。

或者您可以尝试使用正则表达式来处理这个问题，希望您可以为源 HTML 中的每个相关部分找到一个合适的表达式。

# android - 无法连接中兴安卓设备

> ID：11391647
> 
> 赞同：1
> 
> 时间：2012-07-09T08:42:06.310
> 
> 标签：android

我有 ZTE Cool 安卓手机，我想用它来做安卓开发。我无法从 Eclipse 中看到该设备。我无法为 Windows 7 安装某些驱动程序。

当我将手机连接到 PC 时，Windows 说正在安装驱动程序，但没有成功完成。提示*“ZTE HSUSB 设备未安装成功”*。当我尝试手动下载并安装驱动程序时，它说驱动程序是最新的。所以我无法从 Eclipse 连接到设备。

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:21:38.327

您应该从 ZTE 网站下载手机驱动程序

# javascript - Java 脚本/自动完成

> ID：11391649
> 
> 赞同：0
> 
> 时间：2012-07-09T08:42:23.330
> 
> 标签：javascript, autocomplete

我查看了一些来自 google 的脚本，但有些太复杂了，我只想要一个简单的解决方案。我得到了一个包含一些数据（20 个字符串）和一个文本字段的数组，我需要仅使用 javascript/css“***不在 JQUERY 中***”显示自动建议

# c# - XML上的Linq查询以选择子节点的多个元素

> ID：11391653
> 
> 赞同：1
> 
> 时间：2012-07-09T08:42:40.173
> 
> 标签：c#, xml, linq

我想从以下 xml 中选择子项的所有不同值

```
<root>
  <parent>
    <child>value 1</child>
    <child>value 2</child>
  </parent>
  <parent>
    <child>value 1</child>
    <child>value 4</child>
  </parent>
</root> 
```

我试过以下：

```
var vals  = (from res in XmlResources.Elements("root").Elements("parent") select res)
                                        .SelectMany(r => r.Elements("child")).Distinct().ToList(); 
```

但无法从中获得价值，给我价值包装在标签中而不是 Distinct

是否可以显示两种获取方法 - 查询和链接又名 lambda。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:46:12.890

您正在选择元素，并且这些*元素*都是不同的。您需要获取不同的*值*。例如：

```
var values = XmlResources.Element("root")
                         .Elements("parent")
                         .Elements("child")
                         .Select(x => x.Value)
                         .Distinct(); 
```

在这里使用查询表达式确实没有任何好处——它只会增加麻烦。当查询具有多个方面（例如，位置*和*有意义的选择或连接）时，我只使用查询表达式。对于*只是一个选择*或*只是一个*毫无意义的地方。所以是的，你可以使用：

```
var values = (from x in XmlResources.Element("root")
                                    .Elements("parent")
                                    .Elements("child")
              select x.Value).Distinct(); 
```

……但你为什么要这样做？IMO 不太清楚。

请注意，如果您不太关心根/父/子层次结构，并且很高兴获得*所有*`child`后代，则可以使用：

```
var values = XmlResources.Descendants("child")
                         .Select(x => x.Value)
                         .Distinct(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T08:45:51.983

是的，两种方式都有可能

```
var doc = new XDocument("your xml string");
var values = (from c in doc.Root.Descendants("child") select c.Value).Distinct(); 
```

//链式风格

```
var values = doc.Root.Descendants("child").Select(c=>c.Value).Distinct(); 
```

# iis - IIS 编码问题

> ID：11391655
> 
> 赞同：0
> 
> 时间：2012-07-09T08:42:59.927
> 
> 标签：iis, encoding

将 IIS 用作带有 Weblogic 的 RPS（反向代理服务器）时，使用 Weblogic ISAPI 过滤器插件，文件附件文件名似乎不支持 UTF-8。

例如，带有 RPS 的 GET 命令显示未编码的文件名，即：10.166.45.33 - - [08/juin/2012:12:07:39 -0500] "GET /cs/U1/pscc/V_d1305081-b3c5 -4e1e-989e-b8bdd497a1a3/ÇÖÐÅ.msg HTTP/1.1" 200 46088

*与未*使用RPS 时的编码文件名相比：10.210.36.126 - - [15/May/2012:11:35:38 -0500] "GET /cs/U1/pscc/V_4ed65546-e138-4a84-b5b2-a2cf9f01d85f /%C3%87%C3%96%C3%9 0%C3%85.msg HTTP/1.1" 200 46088

我该如何规避这个

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:04:12.590

这是 IIS 和 WLS 之间使用的插件的问题

# android - Android在列表视图中加载大数据

> ID：11391663
> 
> 赞同：1
> 
> 时间：2012-07-09T08:43:42.573
> 
> 标签：android, sqlite

目前我的应用程序中有 5MB sqlite 数据库，我需要在 listView 中显示几乎所有的活动记录。在 iPhone 核心数据中，可以一次加载 20 条记录，并在需要时自动加载更多数据，因此应用程序的性能比 Android 应用程序更快，任何人都可以建议我提高性能的更好方法。[http://www.iphonedevsdk.com/forum/iphone-sdk-development/60239-coredata-nsfetchedresultscontroller-performances.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/60239-coredata-nsfetchedresultscontroller-performances.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:54:06.980

您可以使用 CursorAdapter 实现相同的行为。请参阅[http://developer.android.com/reference/android/widget/CursorAdapter.html](http://developer.android.com/reference/android/widget/CursorAdapter.html)和[http://thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/](http://thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:50:27.087

使用 CommonsWare 的[Endless 适配器](https://github.com/commonsguy/cwac-endless)

# c# - c# datagrid时间信息

> ID：11391666
> 
> 赞同：0
> 
> 时间：2012-07-09T08:43:58.617
> 
> 标签：c#, wpf, datagrid

用户在三个不同的文本框中输入时间信息：小时/分钟/秒。时间信息以秒为单位存储在 xml 文件中。用户可以在数据网格中编辑此值。在数据网格中，时间信息显示为秒。如何实现以秒为单位存储的值以更易于阅读的格式显示在数据网格中，以便用户可以以这种方式对其进行编辑？

例如 4205 秒 = 1h 10m 5s

有控制或类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:37:52.553

您总是可以构建一个转换器来获取秒的绑定值并吐出所需的字符串。

# c# - 将 ID 增加 1 - ASP.NET

> ID：11391667
> 
> 赞同：0
> 
> 时间：2012-07-09T08:44:01.177
> 
> 标签：c#, asp.net

早上，我想知道如何在asp.NET c#页面后面的代码中将数字加1。

基本上我有

```
<message id>1</message id> 
```

我拥有的每条记录都需要增加。我将如何在我的代码中执行此操作？所以它看起来像下面......

```
<message id>1</message id> 
<message id>2</message id>
<message id>3</message id> 
```

提前谢谢了。

更新：我正在构建一些包含以下内容的 XML。我只需要为每个项目/产品将消息 ID 增加 1。

```
 foreach (var product in products)
        {
            xml.Append(string.Format("<Message>"));
            xml.Append(string.Format("<MessageID>1</MessageID>")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:48:30.830

```
int a=1;
foreach (var product in products)
        {
            xml.Append(string.Format("<Message>"));
            xml.Append(string.Format("<MessageID>"+a+"</MessageID>"));
            a++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:49:38.730

更改为 for 循环：

```
for(var i = 0; i < products.Count; i++)
        {
            xml.Append(string.Format("<Message>"));
            xml.Append(string.Format("<MessageID>" + i+1 + "</MessageID>"));
} 
```

当你想要一个产品时，你会索引使用：

`products[i]`

编辑：数组从 0 开始，所以你应该用 0 声明 i 变量

# php - SonataUser - 从管理表单中删除字段

> ID：11391668
> 
> 赞同：3
> 
> 时间：2012-07-09T08:44:01.987
> 
> 标签：php, symfony, fosuserbundle, symfony-sonata, sonata-admin

我将 FOSUser 与 SonataUser 和 SonataAdmin 一起使用。我还使用了 SonataEasyExtends 来创建 app/Application/Sonata/UserBundle，正如在将 FOS 与 Sonata 一起使用时的几个教程中所述。

我只是想从用户实体的管理表单中删除几个默认字段，例如社交（facebook、twitter、...）。

我试图通过放置来覆盖表单

```
#app/Application/Sonata/UserBundle/Admin/Model/UserAdmin.php

namespace Application\Sonata\UserBundle\Admin\Model;

use Sonata\UserBundle\Admin\Model\UserAdmin as UserAdmin;

class MyUserAdmin extends UserAdmin
{
    /**
     * {@inheritdoc}
     */
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->with('General')
                ->add('username')
                ->add('email')
                ->add('plainPassword', 'text', array('required' => false))
            ->end()
            ->with('Groups')
                ->add('groups', 'sonata_type_model', array('required' => false))
            ->end()
        ;

        if (!$this->getSubject()->hasRole('ROLE_SUPER_ADMIN')) {
            $formMapper->with('Management')
                ->add('roles', 'sonata_security_roles', array(
                    'expanded' => true,
                    'multiple' => true,
                    'required' => false
                ))
                ->add('locked', null, array('required' => false))
                ->add('expired', null, array('required' => false))
                ->add('enabled', null, array('required' => false))
                ->add('credentialsExpired', null, array('required' => false))
            ->end();
        }

        $formMapper
            ->with('Security')
                ->add('token', null, array('required' => false))
                ->add('twoStepVerificationCode', null, array('required' => false))
            ->end();
    }
} 
```

我想我必须将它注册为服务，并告诉索纳塔默认使用它。

但我不知道该怎么做。

我至少在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-13T08:53:08.030

没错，只需指向您的新 UserAdmin 类：

```
#app/config/config.yml
sonata_user:
admin:
    user:
      class:      Application\Sonata\UserBundle\Admin\UserAdmin 
```

之后，您覆盖完整的*configureFormFields()*方法并省略字段。

但是还有一个*remove()*方法：

```
class UserAdmin extends SonataUserAdmin
{
    // Fields to be shown on create/edit forms
    protected function configureFormFields(FormMapper $formMapper)
    {
        parent::configureFormFields($formMapper);
        $formMapper
            ->remove('facebookUid');
    }
} 
```

您可以对任何字段执行此操作。不幸的是，没有简单*的 removeGroup('Social')*方法——这可能是一种改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:29:53.137

Sonata User Admin 的表单不会被自动覆盖。

根据[Thomas Rabaix](https://groups.google.com/d/msg/sonata-users/Hp3P781GKI0/4jcdZBQf9TIJ)的说法，我们必须告诉奏鸣曲使用我们的新管理实例

```
#app/config/config.yml
services:
    vendor.admin.extens:
        class: Application\Sonata\ProductBundle\Admin\ProductAdmin
        tags:
            - { name: sonata.admin.extens, target: sonata.product.admin.product } 
```

# ruby-on-rails - Ruby Post 文件到服务器

> ID：11391670
> 
> 赞同：0
> 
> 时间：2012-07-09T08:44:11.457
> 
> 标签：ruby-on-rails, ruby, convertapi

我是 Ruby 新手，并尝试使用下面的代码将文件从 Web 应用程序发布到另一台服务器，但没有任何成功 - 文件未发布。如何正确处理？

```
uri = URI("http://do.convertapi.com/word2pdf")
puts file_path
req = Net::HTTP::Post.new(uri.path)
req.set_form_data('file'=>file_path)
res = Net::HTTP.start(uri.hostname, uri.port) do |http|     
  http.request(req)      
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:33:06.930

试试这个：

[https://github.com/taf2/curb#http-post-file-upload](https://github.com/taf2/curb#http-post-file-upload)

这是 ruby​​ 中的 cURL 库。我用过很多次，效果很好。

# perl - 组合线条元素

> ID：11391676
> 
> 赞同：0
> 
> 时间：2012-07-09T08:44:31.703
> 
> 标签：perl, file, awk

我正在寻找这个问题的解决方案：我有一个文件（制表符分隔），就像我在下面的块引用中显示的那样。如您所见，有些行与第一部分匹配（粗体字段）。

> CHR 4 164440449 165354407 G1 P8002-51-75
> **CHR1 220871675 220962596 G2** P2368-132-84
> **CHR1 220871675 220962596 G2** P2369-152-116
> **CHR1 220871675 220962596 G2** P2371-180-82
> **CHR1 220871675 220962596 G2** P2372-223-129
> **CHR1 220871675 220962596 G2** P2373 -153-96
> **chr1 220871675 220962596 G2** P2370-104-78
> **chr5 126198405 126416440 G3** P9333-135-146
> **chr5 126198405 126416440 G3** P9334-151-116

使用 AWK 或 PERL 我怎么能设法获得以下输出并保留制表符分隔格式？？？一般的概念是尝试根据它的第一部分统一行，并附加最后一个字段

> CHR4 164440449 G1 P8002-51-75
> **22096207-75 22096207-74 P2371-180-82 P2372-152-82** P2371-182-82 P2371-182-82 P2372-152-89 P2372-104-129 P2372-104-78 P2370-104-78 P2370-104-78CHR5 126198405 126416440 G3 P93733-153-96
> **P2370-104-78 126416440 G3** P93333-135 -146 P9334-151-116

一般的概念是尝试根据它的第一部分统一行，并附加最后一个字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:19:51.327

```
while (<DATA>) {
    ($x, $y) = /^(.*)\s([-\w]+)$/;
    push @{$hash{$x}}, $y;
}
while (($k, $v) = each %hash) {
    print $k, join("\t", @{$v}), "\n";
}
__DATA__
chr4 164440449 165354407 G1 P8002-51-75
chr1 220871675 220962596 G2 P2368-132-84
chr1 220871675 220962596 G2 P2369-152-116
chr1 220871675 220962596 G2 P2371-180-82
chr1 220871675 220962596 G2 P2372-223-129
chr1 220871675 220962596 G2 P2373-153-96
chr1 220871675 220962596 G2 P2370-104-78
chr5 126198405 126416440 G3 P9333-135-146
chr5 126198405 126416440 G3 P9334-151-116 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:14:18.020

一种使用方式`perl`：

```
perl -ane '
    ## Save all fields but the last one as the key to compare between rows.
    $key = join qq|\t|, @F[ 0 .. $#F - 1 ];

    ## In first line or when current key is equal to previous key, save last
    ## field in an array and stop processing current row.
    if ( $. == 1 || $key eq $pkey ) {
        $pkey = $key;
        push @value, $F[ $#F ];
        next unless eof;
    }

    ## At this point, keys between rows are different, so print previous
    ## key with its values and begin to save the new one.
    printf qq|%s\n|, join qq|\t|, $pkey, @value;
    @value = ();
    push @value, $F[ $#F ];

    ## Exception: Last line with a new key, print it.
    if ( eof && $pkey ne $key ) {
    printf qq|%s\n|, join qq|\t|, $key, @value;
    }

    ## Save previous key.
    $pkey = $key;

' infile 
```

假设`infile`您的问题的数据，输出将是：

```
chr4    164440449       165354407       G1      P8002-51-75
chr1    220871675       220962596       G2      P2368-132-84    P2369-152-116   P2371-180-82    P2372-223-129   P2373-153-96    P2370-104-78
chr5    126198405       126416440       G3      P9333-135-146   P9334-151-116 
```

# ruby-on-rails - Ubuntu 12 - 如何正确安装 Ruby 和 Rails

> ID：11391679
> 
> 赞同：29
> 
> 时间：2012-07-09T08:44:46.883
> 
> 标签：ruby-on-rails, ruby, ubuntu-12.04

我阅读了很多关于安装`Ruby 1.9`和 Ruby on `Rails 3.2.3`on的文章`Ubuntu 12`。而且我之前已经安装了它们。但这花了很多时间，大约5天。我犯了很多错误，我对此感到非常厌倦。

现在我需要再做一次。显然，我希望它毫不费力且正确。就像在 Windows 中使用 Rails 安装程序和 Ruby 安装程序一样。

谁能给我一个关于如何正确安装它们的链接（！）？或者，也许你知道正确的方法？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-09T08:57:29.577

跟随并享受

[使用 chruby 完全安装 Ruby 和 Rails](http://ryanbigg.com/2014/10/ubuntu-ruby-ruby-install-chruby-and-you//)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T08:55:24.453

我会使用[RVM](https://rvm.io/)。我发现它非常易于安装，并且它为不同的项目维护不同的每个用户（或系统范围，如果你愿意的话）gemset。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T08:57:50.583

我总是喜欢 rvm 来安装 ruby​​ 和 rails。

这里有一些非常有用的文章，指导您如何使用 rvm 安装 ruby​​、rails。

1) [http://coding.smashingmagazine.com/2011/06/21/set-up-an-ubuntu-local-development-machine-for-ruby-on-rails/](http://coding.smashingmagazine.com/2011/06/21/set-up-an-ubuntu-local-development-machine-for-ruby-on-rails/)

2) [http://hivelogic.com/articles/setup-guide-rails-stack-with-passenger-rvm-bundler-apache-and-mysql-on-ubun/](http://hivelogic.com/articles/setup-guide-rails-stack-with-passenger-rvm-bundler-apache-and-mysql-on-ubun/)

# java - Restlet-客户端的初学者东西-路径，接受标头，QueryParam

> ID：11391680
> 
> 赞同：1
> 
> 时间：2012-07-09T08:44:47.740
> 
> 标签：java, rest, jersey, restlet

在我开始使用 Restlet 之前，我已经编写了一个 Jersey 客户端。这是非常直观的 - 似乎 Restlet 不是。没有太多文档，我无法解决最简单的问题。

我在哪里：

```
 service = new ClientResource("http://localhost:8080/com-project-core/rest");
    service.setChallengeResponse(ChallengeScheme.HTTP_BASIC, "admin", "geheima"); 
```

我从文档中得到的：

```
 String myString = service.get(String.class); 
```

或包装资源：

```
 ConnectedResourceIF connectedResource = service.wrap(ConnectedResourceIF.class); 
```

那是有效的。但是关于：

A. 当我想改变我的服务路径时？在泽西岛，这很直观

```
 service.path("foo").path("bar") 
```

为了

```
http://localhost:8080/com-project-core/rest/foo/bar 
```

B. 我想设置一个acceptHeader。穿着球衣就像

```
 service.accept(MediaType.TEXT_PLAIN) 
```

C. 我想设置查询参数。球衣：

```
 service.queryParam("1","foo").queryParam("2","bar") 
```

对不起，希望有人能解决这个初学者的问题。我在 restlet 文档中找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:03:20.753

为一个：

> service.getChild("/foo/bar", ConnectedResourceIF.class);

对于 B（需要最新的 2.1 RCx 版本）：

> service.accept(MediaType.TEXT_PLAIN);

对于 C（需要最新的 2.1 RCx 版本）：

> service.setQueryValue("1","foo");
> 
> service.setQueryValue("2","bar");

查找此类内容的最佳位置是 Javadocs，因为这些 API 更改是最近才发生的： [http ://www.restlet.org/documentation/snapshot/jee/api/org/restlet/resource/ClientResource.html](http://www.restlet.org/documentation/snapshot/jee/api/org/restlet/resource/ClientResource.html)

我们正在为下一个 2.2 版本编写一个新的深入教程。首先完成“Restlet in Action”一书:)

# c# - 玩得开心 - 包含密钥功能并触发 KeyDown 事件的好方法是什么？

> ID：11391681
> 
> 赞同：1
> 
> 时间：2012-07-09T08:44:47.897
> 
> 标签：c#, .net, winforms

为了让自己保持兴趣，我尝试在我的项目中放一些复活节彩蛋（主要是为了自娱自乐）。我看过一些网站，您可以在其中键入一系列字母“aswzaswz”并获得“秘密功能” - 我将如何在 C# 中实现这一点？

我过去使用修饰键分配了一个“秘密功能”

```
 bool showFunThing = (Control.ModifierKeys & Keys.Control) == Keys.Control; 
```

但想要变得更加隐秘（没有修饰键）我只是想让表单检测没有任何输入的特定单词......我已经构建了一个我认为应该这样做的方法：

```
 private StringBuilder _pressedKeys = new StringBuilder();

    protected override void OnKeyDown(KeyEventArgs e)
    {
        const string kWord = "fun";
        char letter = (char)e.KeyValue;
        if (!char.IsLetterOrDigit(letter))
        { return; }
        _pressedKeys.Append(letter);
        if (_pressedKeys.Length == kWord.Length)
        {
            if (_pressedKeys.ToString().ToLower() == kWord)
            {
                MessageBox.Show("Fun");
                _pressedKeys.Clear();
            }
        }
        base.OnKeyDown(e);
    } 
```

现在我需要把它连接起来，但我不知道应该如何在表单设计器中引发事件......我试过这个：

```
 this.KeyDown +=new System.Windows.Forms.KeyEventHandler(OnKeyDown); 
```

以及对此的一些变化，但我遗漏了一些东西，因为它不会触发（或编译）。它告诉我 OnKeyDown 方法需要某个签名，但我还有其他类似的方法，但我没有指定参数。

我担心我可能会让自己感到困惑，所以我向 SO 寻求帮助……有人吗？

**编辑： ProcessCmdKey 似乎是与以下工作的方式：**

```
 private StringBuilder _pressedKeys = new StringBuilder();
    protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
    {
        const string kWord = "fun";
        char letter = (char)keyData;
        if (!char.IsLetterOrDigit(letter))
        {return true;}
        _pressedKeys.Append(letter);
        if (_pressedKeys.Length == kWord.Length)
        {
         if (_pressedKeys.ToString().ToLower() == kWord)
            {
                MessageBox.Show("Fun");
                _pressedKeys.Clear();
            }
            _pressedKeys.Clear();
        }
     return true;
    } 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:05:07.653

试试这个：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (keyData == (Keys.P|Keys.Control))
    {
        //do my prank
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

这将在您按 CTRL + P 时触发。

参考：[ProcessCmdKey](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.processcmdkey.aspx)

> 在消息预处理期间调用此方法以处理命令键。命令键是始终优先于常规输入键的键。命令键的示例包括加速键和菜单快捷键。该方法必须返回 true 以表明它已经处理了命令键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:48:13.603

您正在覆盖一个虚拟方法，因此您不需要处理 KeyDown 事件。如果你调试，你应该在你重写的方法中打断点，如果有东西调用了虚拟方法。

你确定你在正确的类中覆盖了正确的方法吗？只是一个想法。

# ruby-on-rails - 减少rails中的url长度

> ID：11391686
> 
> 赞同：0
> 
> 时间：2012-07-09T08:45:09.007
> 
> 标签：ruby-on-rails, url

我有这个表格：

```
<h1> Global data management </h1> </br> </br>
<h2>Enter the conditions and click "find" option to search for users based on conditions. </br> Or click the "List" option to list all the data.  </h2>
</br></br></br>
<%= form_for(:find_field, url: find_field_path , method: :get) do |f| %>
<div class="row">
      <div class="span8 offset1">
        <div class = "row">
            <div class = "span4">
              <div class="field">
              <%= f.label :data_type_choice, "Data type" %> 
              <%= f.select :data_type_choice, [["all","all"],["2D","2D"],["3D","3D"],["2D3C","2D3C"],["3D3C","3D3C"]] , :name => nil%>
              </div>
              </br></br>
              <h3> COMPLETED WITHIN </h3>:</br>
              <div class="field">
                <%= f.label :from_date_choice , "From date " %>
                <%= f.date_select :from_date_choice , :name => nil%>
              </div>          
            </div>

            <div class = "span4">     
              <div class="field">
              <%= f.label :basin_choice, "Basin" %>
              <%= f.select :basin_choice, [["all","all"],["Cauvery","Cauvery"],["KG-PG","KG-PG"],["others","others"]] , :name => nil %>
              </div>      
              </br></br>
              <h3>&nbsp</h3>
              <div class="field">
                <%= f.label :to_date_choice , "To date " %>
                <%= f.date_select :to_date_choice , :name => nil %>
              </div>
            </div>
        </div>    

                </br></br>
              <%= f.submit "  Search  ", class: "btn btn-large btn-primary" %>

      </div>
</div>
<% end %> 
```

一切正常，所有参数都正确传递等，但在我试图显示结果的视图中，我得到一个巨大的 url，如下所示：

```
http://localhost:3000/global/data/find?utf8=%E2%9C%93&find_field%5Bdata_type_choice%5D=2D&find_field%5Bfrom_date_choice%281i%29%5D=2012&find_field%5Bfrom_date_choice%282i%29%5D=7&find_field%5Bfrom_date_choice%283i%29%5D=9&find_field%5Bbasin_choice%5D=KG-PG&find_field%5Bto_date_choice%281i%29%5D=2012&find_field%5Bto_date_choice%282i%29%5D=7&find_field%5Bto_date_choice%283i%29%5D=9&commit=++Search++ 
```

我尝试使用“：name => nil”，如this [railscast](http://railscasts.com/episodes/37-simple-search-form)中所示 为什么会发生这种情况以及如何将url大小减少到“http://localhost:3000/global/data/find”？

编辑：

这是我在 fields_controller 中的查找方法：

```
 def find

    @data_type_choice = params[:find_field][:data_type_choice]
    @basin_choice = params[:find_field][:basin_choice]
    @from_date_choice = params[:find_field][:from_date_choice]
    @to_date_choice = params[:find_field][:to_date_choice]

  end 
```

我还想显示通过 find.html.erb 在表单中输入的数据，如下所示：

```
<h1><%= @data_type_choice %> dsfgdfsg</h1> 
```

如果我将其设为发布请求，则不会呈现 erb！我能做些什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:51:30.307

只需将您的方法从 GET 更改为 POST 并相应地更改路线。

尝试

```
<%= form_for(:find_field, url: find_field_path , method: :post) do |f| %> 
```

您的路由文件应与 POST 的请求匹配。

# wpf - 覆盖 WPF 中的默认 ALT 操作

> ID：11391687
> 
> 赞同：1
> 
> 时间：2012-07-09T08:45:13.010
> 
> 标签：wpf, menu, alt

我正在开发一个 WPF 应用程序，我想在用户按下 ALT 时显示/隐藏菜单。当我按下右 alt 键而不是左键时，以下代码有效。当菜单可见时，单击右 Alt 键会选择我的菜单的第一个条目（这也是一个主菜单），而不是隐藏它。

所以我想正确的 ALT 键有一个默认行为，我必须在我的事件或其他地方覆盖。

```
 private void Window_KeyDown(Object sender, KeyEventArgs e)
    {
        if (e.Key == Key.LeftAlt || e.Key == Key.RightAlt)
        {
            this.Show_HideMenu(sender, e);
        }
    } 
```

# android - 文本边距不能在不同屏幕上正确显示

> ID：11391691
> 
> 赞同：0
> 
> 时间：2012-07-09T08:45:27.197
> 
> 标签：android, text, screens

当我在一台 android 设备上工作并设置文本的 marginLeft 时，它看起来不错。然后我连接另一个设备，边距被搞砸了....

如何确保文本（以及按钮大小）在所有 android 设备上正确显示。

顺便说一句，是的，我已经在使用“dp”了

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

          <ImageView 
              android:id="@+id/speler_image"
              android:layout_width="fill_parent"
              android:layout_height="159dp"
              android:layout_marginTop="0dp" />

          <ImageView 
              android:id="@+id/speler_infoblock"
              android:src="@drawable/playerinfoblock"
              android:layout_width="fill_parent"
              android:layout_height="107dp"
              android:scaleType="fitXY"
              android:layout_marginTop="159dp" />

                          <TextView
                              android:text="Positie:"
                              android:textSize="17dp" 
                              android:textColor="#0096d6"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="180dp"
                              android:layout_marginLeft="15dp" />

                          <TextView
                              android:id="@+id/spelerPositie"
                              android:text="0"
                              android:textSize="32dp" 
                              android:textColor="#01428b"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="210dp"
                              android:layout_alignParentRight="true"
                              android:paddingRight="330dp" />

                          <TextView
                              android:text="Score:"
                              android:textSize="16dp" 
                              android:textColor="#0096d6"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="180dp"
                              android:layout_marginLeft="100dp" />

                          <TextView
                              android:id="@+id/spelerScore"
                              android:text="0"
                              android:textSize="16dp" 
                              android:textColor="#01428b"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="180dp"
                              android:layout_alignParentRight="true"
                              android:paddingRight="160dp" />

                          <TextView
                              android:text="Dagscore:"
                              android:textSize="16dp" 
                              android:textColor="#0096d6"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="230dp"
                              android:layout_marginLeft="100dp" />

                          <TextView
                              android:id="@+id/spelerDagscore"
                              android:text="0"
                              android:textSize="16dp" 
                              android:textColor="#01428b"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="230dp"
                              android:layout_alignParentRight="true"
                              android:paddingRight="160dp" />

                          <TextView
                              android:text="Hole:"
                              android:textSize="16dp" 
                              android:textColor="#0096d6"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="180dp"
                              android:layout_marginLeft="280dp" />

                          <ImageView
                              android:src="@drawable/holeround"
                              android:layout_width="45dp"
                              android:layout_height="44dp"
                              android:layout_marginTop="170dp"
                              android:layout_alignParentRight="true"
                              android:paddingRight="7dp" />

                          <TextView
                              android:id="@+id/spelerHole"
                              android:text="0"
                              android:textSize="24dp" 
                              android:textColor="#000000"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="175dp"
                              android:layout_alignParentRight="true"
                              android:paddingRight="14dp" />

                          <ImageView
                              android:id="@+id/plaatsReactie"
                              android:src="@drawable/plaats_reactie"
                              android:layout_width="149dp"
                              android:layout_height="42dp"
                              android:scaleType="fitXY"
                              android:layout_marginTop="224dp"
                              android:layout_alignParentRight="true" />

                          <TextView
                              android:text="Plaats reactie"
                              android:textSize="15dp" 
                              android:textColor="#0096d6"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="233dp"
                              android:layout_marginLeft="306dp" />

          <LinearLayout 
              android:background="#034489"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:layout_marginTop="266dp" />

                           <ImageView
                              android:id="@+id/clickBiografie"
                              android:layout_width="100dp"
                              android:layout_height="47dp"
                              android:scaleType="fitXY"
                              android:layout_marginTop="266dp"
                              android:layout_marginLeft="0dp" />

                          <TextView
                              android:text="Biografie"
                              android:textSize="17dp" 
                              android:textColor="#FFF"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="278dp"
                              android:layout_marginLeft="14dp" />

                           <ImageView
                              android:id="@+id/clickScore"
                              android:layout_width="100dp"
                              android:layout_height="47dp"
                              android:scaleType="fitXY"
                              android:layout_marginTop="266dp"
                              android:layout_marginLeft="100dp" />

                          <TextView
                              android:text="Score"
                              android:textSize="17dp" 
                              android:textColor="#FFF"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="278dp"
                              android:layout_marginLeft="127dp" />

                           <ImageView
                              android:id="@+id/clickReacties"
                              android:layout_width="100dp"
                              android:layout_height="47dp"
                              android:scaleType="fitXY"
                              android:layout_marginTop="266dp"
                              android:layout_marginLeft="200dp" />

                          <TextView
                              android:text="Reacties"
                              android:textSize="17dp" 
                              android:textColor="#FFF"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="278dp"
                              android:layout_marginLeft="220dp" />

                           <ImageView
                              android:id="@+id/clickTwitter"
                              android:layout_width="100dp"
                              android:layout_height="47dp"
                              android:scaleType="fitXY"
                              android:layout_marginTop="266dp"
                              android:layout_marginLeft="300dp" />

                          <TextView
                              android:text="Twitter"
                              android:textSize="17dp" 
                              android:textColor="#FFF"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"
                              android:layout_marginTop="278dp"
                              android:layout_marginLeft="324dp" />

          <RelativeLayout
              android:id="@+id/biografieLayout"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:layout_marginTop="313dp">

              <ImageView
                  android:src="@drawable/hole_infoline"
                  android:layout_width="375dp"
                  android:layout_height="5dp"
                  android:layout_marginTop="40dp"
                  android:layout_marginLeft="20dp" />

              <TextView
                  android:text="Country"
                  android:textSize="16dp" 
                  android:textColor="#0096d6"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_marginTop="10dp"
                  android:layout_marginLeft="25dp" />

              <TextView
                  android:id="@+id/countryText"
                  android:textSize="16dp" 
                  android:textColor="#FFF"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_marginTop="10dp"
                  android:layout_marginLeft="160dp" />

              <ImageView
                  android:src="@drawable/hole_infoline"
                  android:layout_width="375dp"
                  android:layout_height="5dp"
                  android:layout_marginTop="80dp"
                  android:layout_marginLeft="20dp" />

              <TextView
                  android:text="Date of Birth"
                  android:textSize="16dp" 
                  android:textColor="#0096d6"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_marginTop="50dp"
                  android:layout_marginLeft="25dp" />

              <TextView
                  android:id="@+id/dobText"
                  android:textSize="16dp" 
                  android:textColor="#FFF"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_marginTop="50dp"
                  android:layout_marginLeft="160dp" />

              <ImageView
                  android:src="@drawable/hole_infoline"
                  android:layout_width="375dp"
                  android:layout_height="5dp"
                  android:layout_marginTop="120dp"
                  android:layout_marginLeft="20dp" />

              <TextView
                  android:text="Height / Weight"
                  android:textSize="16dp" 
                  android:textColor="#0096d6"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_marginTop="90dp"
                  android:layout_marginLeft="25dp" />

              <TextView
                  android:id="@+id/heightweightText"
                  android:textSize="16dp" 
                  android:textColor="#FFF"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_marginTop="90dp"
                  android:layout_marginLeft="160dp" />

              <ImageView
                  android:src="@drawable/hole_infoline"
                  android:layout_width="375dp"
                  android:layout_height="5dp"
                  android:layout_marginTop="160dp"
                  android:layout_marginLeft="20dp" />

              <TextView
                  android:text="Turned Pro"
                  android:textSize="16dp" 
                  android:textColor="#0096d6"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_marginTop="130dp"
                  android:layout_marginLeft="25dp" />

              <TextView
                  android:id="@+id/turnedProText"
                  android:textSize="16dp" 
                  android:textColor="#FFF"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_marginTop="130dp"
                  android:layout_marginLeft="160dp" />

          </RelativeLayout>

          <RelativeLayout
              android:id="@+id/scoreLayout"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:layout_marginTop="313dp">

          </RelativeLayout>

          <RelativeLayout
              android:id="@+id/reactiesLayout"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:layout_marginTop="313dp">

          </RelativeLayout>

          <ScrollView
              android:id="@+id/twitterLayout"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:layout_marginTop="313dp">

          </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:15:35.007

您只能通过测试确保它正确显示。你可以通过eclipse做一些预测试。如果您在 Eclipse 中打开 xml，您可以单击“图形布局”，然后您可以更改手机（屏幕大小）以进行预览。

如果您希望您的布局占据屏幕的百分比，请使用线性布局作为父级并使用权重来定义视图应占据屏幕的百分比。

你说你的边距有问题，这是没有意义的，因为边距将是你定义的。所以我假设你说你不能让所有东西都按照你想要的方式正确对齐......如果是这种情况，你应该使用某种锚点，然后相应地定义其他布局。例如，您可以在父视图中创建一个容器视图（线性/相对等）并将该容器居中。

# ruby-on-rails-3 - Rails 3.2.5 巫术和延迟作业集成以发送电子邮件

> ID：11391692
> 
> 赞同：0
> 
> 时间：2012-07-09T08:45:28.453
> 
> 标签：ruby-on-rails-3, delayed-job, sorcery, bcrypt-ruby

我正在开发一个 Rails 3.2.5 应用程序，使用 Sorcery 进行身份验证，使用 delay_job 进行后台处理 [ sorcery (0.7.12)、delayed_job (3.0.3)、delayed_job_active_record (0.3.2) ]。

我的巫术配置如下：

```
Rails.application.config.sorcery.submodules = [:remember_me, :reset_password, :user_activation, :brute_force_protection, :activity_logging, :external]

Rails.application.config.sorcery.configure do |config|
  --[clip]

  config.user_config do |user|
    user.user_activation_mailer = UserMailer
    user.activation_success_email_method_name = nil
  end

  config.user_class = "Account"
  module Sorcery
    module Model
      module InstanceMethods
        def generic_send_email(method, mailer)
          config = sorcery_config
          mail = config.send(mailer).delay.send(config.send(method), self)
        end
      end
    end
  end
end 
```

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.5'

# gem 'thin' # delayed_job has problems with this

gem 'pg'
gem 'mongrel', '1.2.0.pre2'
gem 'bcrypt-ruby', '~> 3.0.0'
gem 'sorcery'
gem 'simple_form'
gem 'high_voltage' # static pages
gem 'squeel'
gem 'kaminari'
gem 'bourbon'
gem 'rabl'
gem 'yajl-ruby'
gem 'geocoder'
gem "carrierwave"
gem "cloudinary"
gem 'haml'
gem 'rails-settings-cached'
gem 'configatron'
gem 'store_configurable'
gem 'has_serialized'
gem 'rolify'
gem 'cancan'
gem 'delayed_job_active_record'
gem 'simple_postmark'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
    gem 'bootstrap-sass'
  gem 'sass-rails', '~> 3.2.3'
  gem 'uglifier', '>= 1.0.3'
  gem 'therubyracer'
  gem 'execjs'
end

gem 'jquery-rails'

group :development, :test do
   gem 'rspec'
   gem 'rspec-rails' , ">= 2.5.0"
   gem 'rails3-generators'
   gem 'hpricot'  # needed by devise views generator
   gem 'awesome_print'
end 
```

创建帐户时，将作业添加到延迟作业表但出现错误：

```
"{Job failed to load: uninitialized constant BCrypt. Handler: "--- !ruby/object:Delayed::PerformableMailer \nargs: \n- :activation_needed_email_method_name\n- !ruby/ActiveRecord:Account \n  attributes: \n    id: 100\n    username: student.ten@retinaindia.org\n    email: student.ten@retinaindia.org\n    crypted_password: !str:BCrypt::Password \n      str: $2a$10$ndL2tnPLheemvBsNqPXMwew6Pakf/Kf8xxt1Q54xkRWS3JfMaTAC6\n      :@checksum: w6Pakf/Kf8xxt1Q54xkRWS3JfMaTAC6\n      :@cost: 10\n      :@salt: $2a$10$ndL2tnPLheemvBsNqPXMwe\n      :@version: !str:BCrypt::Password 2a\n    salt: Aatzxp2m4fp2CYy9ZoCr\n    user_id: 74\n    user_type: Student\n    created_at: &id001 2012-07-09 08:34:23.981292 Z\n    updated_at: *id001\n    remember_me_token: \n    remember_me_token_expires_at: \n    reset_password_token: \n    reset_password_token_expires_at: \n    reset_password_email_sent_at: \n    failed_logins_count: 0\n    lock_expires_at: \n    unlock_token: \n    last_login_at: \n    last_logout_at: \n    last_activity_at: \n    activation_state: pending\n    activation_token: 7XAssTaEqsorDWpbpUY9\n    activation_token_expires_at: \n    created_by: Admin\nmethod_name: :send\nobject: !ruby/class UserMailer\n"
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:86:in `rescue in payload_object'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:84:in `payload_object'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:94:in `block in invoke_job'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/backend/base.rb:91:in `invoke_job'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:182:in `block (2 levels) in run'
/home/syed/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/timeout.rb:57:in `timeout'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:182:in `block in run'
/home/syed/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/benchmark.rb:309:in `realtime'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:181:in `run'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:238:in `block in reserve_and_run_one_job'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:238:in `reserve_and_run_one_job'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:166:in `block in work_off'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:165:in `times'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:165:in `work_off'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:133:in `block (4 levels) in start'
/home/syed/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/benchmark.rb:309:in `realtime'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:132:in `block (3 levels) in start'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:129:in `block (2 levels) in start'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:128:in `loop'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:128:in `block in start'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:7:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/plugins/clear_locks.rb:7:in `block (2 levels) in <class:ClearLocks>'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `block (2 levels) in add'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:60:in `block in initialize'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:78:in `block in add'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:65:in `execute'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/lifecycle.rb:38:in `run_callbacks'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/worker.rb:127:in `start'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/command.rb:101:in `run'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/command.rb:89:in `block in run_process'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/application.rb:215:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/application.rb:215:in `block in start_proc'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/daemonize.rb:192:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/daemonize.rb:192:in `call_as_daemon'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/application.rb:219:in `start_proc'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/application.rb:255:in `start'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/application_group.rb:123:in `block (2 levels) in start_all'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/application_group.rb:122:in `fork'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/application_group.rb:122:in `block in start_all'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/application_group.rb:121:in `each'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/application_group.rb:121:in `start_all'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/controller.rb:79:in `run'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons.rb:188:in `block in run_proc'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/cmdline.rb:105:in `call'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons/cmdline.rb:105:in `catch_exceptions'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/daemons-1.0.10/lib/daemons.rb:187:in `run_proc'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/command.rb:87:in `run_process'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/command.rb:80:in `block in daemonize'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/command.rb:78:in `times'
/home/syed/.rvm/gems/ruby-1.9.2-p0/gems/delayed_job-3.0.3/lib/delayed/command.rb:78:in `daemonize'
script/delayed_job:5:in `<main>'" 
```

这是处理程序：

```
"--- !ruby/object:Delayed::PerformableMailer 
args: 
- :activation_needed_email_method_name
- !ruby/ActiveRecord:Account 
  attributes: 
    id: 100
    username: student.ten@retinaindia.org
    email: student.ten@retinaindia.org
    crypted_password: !str:BCrypt::Password 
      str: $2a$10$ndL2tnPLheemvBsNqPXMwew6Pakf/Kf8xxt1Q54xkRWS3JfMaTAC6
      :@checksum: w6Pakf/Kf8xxt1Q54xkRWS3JfMaTAC6
      :@cost: 10
      :@salt: $2a$10$ndL2tnPLheemvBsNqPXMwe
      :@version: !str:BCrypt::Password 2a
    salt: Aatzxp2m4fp2CYy9ZoCr
    user_id: 74
    user_type: Student
    created_at: &id001 2012-07-09 08:34:23.981292 Z
    updated_at: *id001
    remember_me_token: 
    remember_me_token_expires_at: 
    reset_password_token: 
    reset_password_token_expires_at: 
    reset_password_email_sent_at: 
    failed_logins_count: 0
    lock_expires_at: 
    unlock_token: 
    last_login_at: 
    last_logout_at: 
    last_activity_at: 
    activation_state: pending
    activation_token: 7XAssTaEqsorDWpbpUY9
    activation_token_expires_at: 
    created_by: Admin
method_name: :send
object: !ruby/class UserMailer
" 
```

[编辑] 无法执行 YAML.load 时会引发此错误。但是，奇怪的是，当我尝试在控制台中手动执行此操作时，它会加载任何问题。

```
ruby-1.9.2-p0 > YAML.load("--- !ruby/object:Delayed::PerformableMailer 
ruby-1.9.2-p0"> args: 
ruby-1.9.2-p0"> - !ruby/ActiveRecord:Account 
ruby-1.9.2-p0">   attributes: 
ruby-1.9.2-p0">     id: 106
ruby-1.9.2-p0">     username: student.two@retinaindia.org
ruby-1.9.2-p0">     email: student.two@retinaindia.org
ruby-1.9.2-p0">     crypted_password: !str:BCrypt::Password 
ruby-1.9.2-p0">       str: $2a$10$przMrMWjJqTetGj4IhLsEO9AjM12rnTuP2ZiJwz1xzSgr70dvJdM2
ruby-1.9.2-p0">       :@checksum: 9AjM12rnTuP2ZiJwz1xzSgr70dvJdM2
ruby-1.9.2-p0">       :@cost: 10
ruby-1.9.2-p0">       :@salt: $2a$10$przMrMWjJqTetGj4IhLsEO
ruby-1.9.2-p0">       :@version: !str:BCrypt::Password 2a
ruby-1.9.2-p0">     salt: f5CppR8NySi4VEEFNcLT
ruby-1.9.2-p0">     user_id: 81
ruby-1.9.2-p0">     user_type: Student
ruby-1.9.2-p0">     created_at: &id001 2012-07-09 11:08:49.705831 Z
ruby-1.9.2-p0">     updated_at: *id001
ruby-1.9.2-p0">     remember_me_token: 
ruby-1.9.2-p0">     remember_me_token_expires_at: 
ruby-1.9.2-p0">     reset_password_token: 
ruby-1.9.2-p0">     reset_password_token_expires_at: 
ruby-1.9.2-p0">     reset_password_email_sent_at: 
ruby-1.9.2-p0">     failed_logins_count: 0
ruby-1.9.2-p0">     lock_expires_at: 
ruby-1.9.2-p0">     unlock_token: 
ruby-1.9.2-p0">     last_login_at: 
ruby-1.9.2-p0">     last_logout_at: 
ruby-1.9.2-p0">     last_activity_at: 
ruby-1.9.2-p0">     activation_state: pending
ruby-1.9.2-p0">     activation_token: YZWfZBoGZj2qC6sVHsbQ
ruby-1.9.2-p0">     activation_token_expires_at: 
ruby-1.9.2-p0">     created_by: Self
ruby-1.9.2-p0"> method_name: :activation_needed_email
ruby-1.9.2-p0"> object: !ruby/class Notifier
ruby-1.9.2-p0"> ")
  Account Load (2.4ms)  SELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT 1  [["id", 106]]
 => #<Delayed::PerformableMailer:0x9b39a08 @args=[#<Account id: 106, username: "student.two@retinaindia.org", email: "student.two@retinaindia.org", crypted_password: "$2a$10$przMrMWjJqTetGj4IhLsEO9AjM12rnTuP2ZiJwz1xzSg...", salt: "f5CppR8NySi4VEEFNcLT", user_id: 81, user_type: "Student", created_at: "2012-07-09 11:08:49", updated_at: "2012-07-09 11:08:49", remember_me_token: nil, remember_me_token_expires_at: nil, reset_password_token: nil, reset_password_token_expires_at: nil, reset_password_email_sent_at: nil, failed_logins_count: 0, lock_expires_at: nil, unlock_token: nil, last_login_at: nil, last_logout_at: nil, last_activity_at: nil, activation_state: "pending", activation_token: "YZWfZBoGZj2qC6sVHsbQ", activation_token_expires_at: nil, created_by: "Self">], @method_name=:activation_needed_email, @object=Notifier> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:41:56.783

回答我自己的问题，因为以下方法至少现在对我有用。

1.  在delayed_job_config.rb 中需要'bcrypt'

`require "bcrypt"`

 ````
if defined?(BCrypt)
  puts "BCrypt defined."
else
  puts "BCrypt failed loaded!!"
end

Delayed::Worker.destroy_failed_jobs = false 
```` 

`2\. 仍然无法让Sorcery 的user_activation 模块工作并通过delayed_job 自动发送电子邮件。必须完全禁用该模块并手动发送激活邮件。`

# javascript - 用孩子为列表项设置样式

> ID：11391695
> 
> 赞同：-1
> 
> 时间：2012-07-09T08:45:35.417
> 
> 标签：javascript, jquery

我已经转了几个小时，我不断收到这段代码的错误：

```
$('div.colA div.region-sidebar-left div.menu-block-wrapper').find('li').each(function() {
        if ($(this).find('> ul').size() > 0) {
            $(this).addClass('has_child');
        }
}); 
```

它应该做的就是找到所有的`<li>`孩子`<ul>`并给它上课。简单的。

[http://jsfiddle.net/simcox90/mEMmN/](http://jsfiddle.net/simcox90/mEMmN/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T08:48:41.593

代替

```
$(this).find('> ul').size(); 
```

你可以说：

```
$(this).children("ul").length 
```

见：[http ://api.jquery.com/children/](http://api.jquery.com/children/)

* * *

我认为您可以改用这个 oneliner：

```
$('div.colA div.region-sidebar-left div.menu-block-wrapper li > ul').parent().addClass("has_child"); 
```

`$('li > ul').parent()`返回女巫作为孩子`li`拥有的所有节点。`ul`

# android - 从 gmail 启动时，我的 android 应用程序崩溃

> ID：11391698
> 
> 赞同：-1
> 
> 时间：2012-07-09T08:45:47.993
> 
> 标签：android, crash, gmail, file-extension

我有一个应用程序来处理某些文件。这在浏览 android 内置文件浏览器并单击应用程序时工作正常，但是当通过 gmail 应用程序启动应用程序时（将文件发送到电子邮件，然后使用下载-> 使用应用程序打开）然后 getIntent().getExtras() 为空。我使用 extras 来获取文件的名称。我该如何解决？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:06:48.030

我认为除了处理它可以为空之外，您无能为力。

# python - Heroku 使用 Django 应用程序提高 500 而不是 404

> ID：11391700
> 
> 赞同：4
> 
> 时间：2012-07-09T08:46:07.447
> 
> 标签：python, django, heroku, django-urls

我设计了我的应用程序`URLS`以匹配所有标准，并发现它在我的本地机器上完美运行，`DEBUG=FALSE`但是当部署到[Heroku](http://heroku.com/)时，我似乎遇到了一个问题，所有应该引发**404**的 url最终都会引发**500**？

有没有人遇到过这个？

我的网址模式

```
url(r'^$', 'index', name='dashboard_index'), 
```

检索`http://localhost:5000/123/`时会引发 404 页面

检索`http://myapp.com/123/`时会引发 500 页

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T05:52:38.363

当您设置`DEBUG`为 时`False`，您需要提供 a`404.html`和 a`500.html`中的某处`TEMPLATE_DIRS`。如果您不提供这些，它会引发一个`TemplateDoesNotExist`异常，该异常会被捕获为`500`错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T05:47:16.397

根据我的经验，90% 的情况下，404 上的 500 是由于缺少 404.html 模板造成的。你是说你让它在本地工作，但我仍然会检查该模板是否是为 heroku 制作的，是否会导致任何类型的错误。

# c - 通过指针比较字符串

> ID：11391703
> 
> 赞同：1
> 
> 时间：2012-07-09T08:46:13.607
> 
> 标签：c, string-comparison

我是 C 语言的新手。拜托，有人能告诉我为什么在使用我自己的实现比较不同的字符串时我总是得到零作为输出`strcmp`吗？

我编写了`xstrcmp`比较两个字符串的函数：如果它们相等，则返回 0；否则，它返回第一个不匹配字符对的 ASCII 值之间的数值差。

```
 #include<stdio.h>

    int xstrcmp(char*,char*);

    int main()
    {   
        int i;
        char string1[]="jerry";
        char string2[]="ferry";
        i=xstrcmp(string1,string2);
        printf("difference=%d\n",i);
        return 0;
    }

    int xstrcmp(char*p,char*q)
    {
        int m;
        while(*p!=*q)
        {
             if((*p=='\0')&&(*q=='\0'))
                break;
          p++;
          q++;
        }
        m=(*p)-(*q);
        return m;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:49:57.223

你循环直到你找到相等的字符，然后你减去它们——所以结果当然总是 0。

此外，循环内的条件总是会失败......如果字符不相等，它们不能都是 NUL。

这应该足以让您修复代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:31:58.070

你总是得到零的原因是你的while循环`while(*p!=*q)`意味着只要字符不同，循环就会执行。

当 *p 和 *q 具有相同的值时，将退出循环。

因此返回值`m=(*p)-(*q);`永远为零。

```
while (*p == *q) /* as long as they have same value, loop; otherwise exit */
{
      p++; /* increment the pointers */
      q++;
}
return (*p)-(*q); 
```

将是要走的路。

# iphone - 执行 [webView goBack] 后获取 UIWebview 的 URL

> ID：11391705
> 
> 赞同：2
> 
> 时间：2012-07-09T08:46:29.253
> 
> 标签：iphone, uiwebview

我了解您可以通过以下代码获取 UIWebview 的当前 URL：

```
 NSString *urlString = [[[webView request] URL] absoluteString]; 
```

但是，我发现这仅适用于您实际加载的 webView。

在我的应用程序的某个时刻，我正在这样做： [webView goBack] 将显示 webView 的上一页。但是，调用上述行来获取 URL 并不反映显示的实际页面。

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T08:53:20.460

在页面完全加载时获取 URL 可能是一种安全的方法：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {

  NSURLRequest *currentRequest = [webView request];
  NSURL *currentURL = [currentRequest URL];
  NSLog(@"Current URL is %@", currentURL.absoluteString);

} 
```

这对你有用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:14:38.290

实现委托功能

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

在每个页面即将开始在您的 webview 中加载之前（甚至是 goback）都会在上面的函数中调用，并且`request`给出 url 的对象将被加载。

**注意**：`YES`如果您允许 webview 加载页面，则返回`NO`。

希望这可以帮助您解决问题。

# iphone - 从 iOS 应用重新开始

> ID：11391710
> 
> 赞同：1
> 
> 时间：2012-07-09T08:46:50.067
> 
> 标签：iphone, ios, xcode, app-store

我在商店中发布了一个应用程序，我想改变它的内部工作，所以我决定重新开始。我成功完成了我的应用程序的新版本，但是当我安装以前版本的应用程序并从 xcode 运行新版本以检查一切是否兼容时，我得到“无法更改应用程序的可执行权限”。

我所做的是更改应用程序新版本的捆绑标识符以匹配旧版本，但我无法让它以相同的名称运行。我需要做其他事情吗？如果没有安装旧的应用程序运行良好，但是当我安装了旧的应用程序并且我想运行新的应用程序时，它会替换旧的应用程序，我收到上面提到的错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:38:05.580

我认为您应该尝试删除在您的 iOS 设备中具有相同捆绑标识符的应用程序，希望这可以帮助您！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T00:21:05.613

我遇到的问题与使用未发布的 iOS 测试版软件有关。通过在运行最后发布的操作系统（目前是 iOS 5.1.1）的设备上测试我的应用程序来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T17:51:26.437

我刚刚遇到了同样的问题，几乎让我崩溃了。我在 xcode 5.1 和 ios 6 上。我的答案是通过将我的图形放在应用程序图标上，然后按下它旁边出现的“x”来删除我 iPad 上的应用程序。然后我回到 xcode 并构建了项目。

# ruby-on-rails - “Contact has_many :addresses”在检查地址中是否存在 :contact 时确实有效，但不适用于 :contact_id （并且没有验证）

> ID：11391711
> 
> 赞同：0
> 
> 时间：2012-07-09T08:46:58.783
> 
> 标签：ruby-on-rails, has-many, belongs-to

我真的很难追踪这个问题，现在我知道出了什么问题，但不知道为什么，以及它是否是一个错误。

```
macbuech:iq josh$ ruby -v
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.4.0]
macbuech:iq josh$ rails -v
Rails 3.2.1 
```

我有一个`Contact`模型`has_many :addresses`。到目前为止一切正常，直到我决定验证 的存在`Address.contact_id`，这似乎破坏了`my_contact.addresses << my_address`功能！首先是它过去是如何工作的：

```
class Address < ActiveRecord::Base
  belongs_to :contact
  validates :contact, :presence => true
  # ...
end

class Contact < ActiveRecord::Base
  has_many :addresses
  # ...
end 
```

这是 Rails 控制台中的测试输出：

```
1.9.3p0 :001 > c = FactoryGirl.create :contact
 => #<Contact id: 71, corporate: false, companyname: nil, firstname: nil, middlename: nil, lastname: "Doe", initials: nil, nickname: nil, gender: "male", title: nil, profession: nil, department: nil, birthday: nil, spouse: nil, kids: nil, superior: nil, assistant: nil, contacttype_id: 71, language_id: nil> 
1.9.3p0 :002 > a = FactoryGirl.create :address
 => #<Address id: 63, active: true, standard: false, street: "Mustergasse 123", extraline1: nil, extraline2: nil, city: "Musterhausen", zip: 8088, province: nil, pobox: nil, latitude: nil, longitude: nil, validfrom: nil, validto: nil, label: nil, description: nil, contact_id: 72, addresstype_id: 63, country_id: 63> 
1.9.3p0 :003 > c.addresses
 => [] 
1.9.3p0 :004 > c.addresses << a
 => [#<Address id: 63, active: true, standard: false, street: "Mustergasse 123", extraline1: nil, extraline2: nil, city: "Musterhausen", zip: 8088, province: nil, pobox: nil, latitude: nil, longitude: nil, validfrom: nil, validto: nil, label: nil, description: nil, contact_id: 71, addresstype_id: 63, country_id: 63>] 
1.9.3p0 :005 > c.addresses
 => [#<Address id: 63, active: true, standard: false, street: "Mustergasse 123", extraline1: nil, extraline2: nil, city: "Musterhausen", zip: 8088, province: nil, pobox: nil, latitude: nil, longitude: nil, validfrom: nil, validto: nil, label: nil, description: nil, contact_id: 71, addresstype_id: 63, country_id: 63>] 
1.9.3p0 :006 > c.save!
 => true 
1.9.3p0 :007 > c.reload
1.9.3p0 :008 > c.addresses
 => [#<Address id: 63, active: true, standard: false, street: "Mustergasse 123", extraline1: nil, extraline2: nil, city: "Musterhausen", zip: "8088", province: nil, pobox: nil, latitude: nil, longitude: nil, validfrom: nil, validto: nil, label: nil, description: nil, contact_id: 71, addresstype_id: 63, country_id: 63>] 
```

一切都按预期工作，地址#63 现在属于联系人#71。

[然后我在这里](https://stackoverflow.com/a/11327575/1439143)读到验证belongs_to关系名称的存在没有多大意义，但我应该验证它的外键，所以我做了：

```
class Address < ActiveRecord::Base
  belongs_to :contact
  validates :contact_id, :presence => true
  # ...
end 
```

所以这里是 Rails 控制台的日志，与上面的命令完全相同：

```
1.9.3p0 :009 > c = FactoryGirl.create :contact
 => #<Contact id: 84, corporate: false, companyname: nil, firstname: nil, middlename: nil, lastname: "Doe", initials: nil, nickname: nil, gender: "male", title: nil, profession: nil, department: nil, birthday: nil, spouse: nil, kids: nil, superior: nil, assistant: nil, contacttype_id: 84, language_id: nil> 
1.9.3p0 :010 > a = FactoryGirl.create :address
 => #<Address id: 74, active: true, standard: false, street: "Mustergasse 123", extraline1: nil, extraline2: nil, city: "Musterhausen", zip: 8088, province: nil, pobox: nil, latitude: nil, longitude: nil, validfrom: nil, validto: nil, label: nil, description: nil, contact_id: 85, addresstype_id: 74, country_id: 74> 
1.9.3p0 :011 > c.addresses
 => [] 
1.9.3p0 :012 > c.addresses << a
 => [#<Address id: 74, active: true, standard: false, street: "Mustergasse 123", extraline1: nil, extraline2: nil, city: "Musterhausen", zip: 8088, province: nil, pobox: nil, latitude: nil, longitude: nil, validfrom: nil, validto: nil, label: nil, description: nil, contact_id: 85, addresstype_id: 74, country_id: 74>] 
1.9.3p0 :013 > c.addresses
 => [#<Address id: 74, active: true, standard: false, street: "Mustergasse 123", extraline1: nil, extraline2: nil, city: "Musterhausen", zip: 8088, province: nil, pobox: nil, latitude: nil, longitude: nil, validfrom: nil, validto: nil, label: nil, description: nil, contact_id: 85, addresstype_id: 74, country_id: 74>] 
 => true 
1.9.3p0 :015 > c.reload
 => #<Contact id: 84, corporate: false, companyname: nil, firstname: nil, middlename: nil, lastname: "Doe", initials: nil, nickname: nil, gender: "male", title: nil, profession: nil, department: nil, birthday: nil, spouse: nil, kids: nil, superior: nil, assistant: nil, contacttype_id: 84, language_id: nil> 
1.9.3p0 :016 > c.addresses
 => [] 
```

如您所见，地址未正确分配给联系人！它`:contact_id`保持在 85 虽然它应该改变之后`c.addresses << a`！更可怕的是，当我删除整个验证时，它**也**不起作用！

```
1.9.3p0 :009 > c = FactoryGirl.create :contact
 => #<Contact id: 97, corporate: false, companyname: nil, firstname: nil, middlename: nil, lastname: "Doe", initials: nil, nickname: nil, gender: "male", title: nil, profession: nil, department: nil, birthday: nil, spouse: nil, kids: nil, superior: nil, assistant: nil, contacttype_id: 97, language_id: nil> 
1.9.3p0 :010 > a = FactoryGirl.create :address
 => #<Address id: 85, active: true, standard: false, street: "Mustergasse 123", extraline1: nil, extraline2: nil, city: "Musterhausen", zip: 8088, province: nil, pobox: nil, latitude: nil, longitude: nil, validfrom: nil, validto: nil, label: nil, description: nil, contact_id: 98, addresstype_id: 85, country_id: 85> 
1.9.3p0 :011 > c.addresses
 => [] 
1.9.3p0 :012 > c.addresses << a
 => [#<Address id: 85, active: true, standard: false, street: "Mustergasse 123", extraline1: nil, extraline2: nil, city: "Musterhausen", zip: 8088, province: nil, pobox: nil, latitude: nil, longitude: nil, validfrom: nil, validto: nil, label: nil, description: nil, contact_id: 98, addresstype_id: 85, country_id: 85>] 
1.9.3p0 :013 > c.addresses
 => [#<Address id: 85, active: true, standard: false, street: "Mustergasse 123", extraline1: nil, extraline2: nil, city: "Musterhausen", zip: 8088, province: nil, pobox: nil, latitude: nil, longitude: nil, validfrom: nil, validto: nil, label: nil, description: nil, contact_id: 98, addresstype_id: 85, country_id: 85>] 
1.9.3p0 :014 > c.save!
 => true 
1.9.3p0 :015 > c.reload
 => #<Contact id: 97, corporate: false, companyname: nil, firstname: nil, middlename: nil, lastname: "Doe", initials: nil, nickname: nil, gender: "male", title: nil, profession: nil, department: nil, birthday: nil, spouse: nil, kids: nil, superior: nil, assistant: nil, contacttype_id: 97, language_id: nil> 
1.9.3p0 :016 > c.addresses
 => [] 
```

同样，`:contact_id`没有改变的相同场景......

非常感谢任何帮助，我已经浪费了大约 6 个小时来调查这个问题......

**更新**

我问的原因是我在 RSpec 文件中有以下内容：

```
let (:contact) do
  contact = create(:contact)
  contact.addresses << create(:address)
  contact
end 
```

如前所述，这适用于`validates :project, :presence => true`，但它并非没有任何验证或`validates :project_id, :presence => true`.

我可以这样写，所以它可以与`validates :project_id, :presence => true`.

```
let (:contact) do
  contact = create(:contact)
  contact.addresses << create(:address, :contact => contact)
  contact
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:24:13.647

在这种情况下，我总是会通过关联创建地址，即

```
c.addresses.create 
```

那么当你这样做时会发生什么，在你的contact_id上进行验证？

# iphone - 如何在xcode中随机显示数学符号

> ID：11391712
> 
> 赞同：0
> 
> 时间：2012-07-09T08:46:59.160
> 
> 标签：iphone, ios5, xcode4.3

我知道如何使用下面的代码从 0 到 9 随机显示数字。

```
number = arc4random() % 10; 
```

但是数学符号的随机性怎么样？我有 +、-、x 和 / 符号，我想随机显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:48:26.367

您可以在 0 和 3 之间进行随机选择，例如 0 是 +，1 是 -，2 是 /，3 是 *。如果你能解决这个问题，请定期使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:13:48.347

```
int number = arc4random() % 4;
NSString *string = @"+,-,x,/";
NSLog(@"sign = %@", [[string componentsSeparatedByString:@","] 
objectAtIndex:number]); 
```

# jquery - 冲突类按钮 jQuery Mobile

> ID：11391714
> 
> 赞同：0
> 
> 时间：2012-07-09T08:47:02.110
> 
> 标签：jquery, jquery-mobile

我有一个通过 ajax 加载多个按钮的列表，每个按钮都有 quickList 类。

当我单击其中一个按钮时，颜色会改变。再次单击它会返回原始颜色，如下所示：

```
$('.quickList').live('click', function(e) { 

    var toggle = $(this).data('press');
    if ( toggle == "true" ) {
        $(this).buttonMarkup({ theme: "b" });
        $(this).data("press","false");
    }
    else {
        $(this).buttonMarkup({ theme: "a" });
        $(this).data("press","true");
    }

}); 
```

问题是，如果有多个按钮，它们就会发生冲突。如果我点击一个按钮，它会改变颜色，如果我点击另一个按钮，它会删除第一个按钮的颜色（用于起始颜色）并将该颜色放在最近点击的按钮上。

我想要的是按钮是独立的，但是这种冲突正在发生，我该如何解决？

# hadoop - hadoop S3n空目录没有被删除

> ID：11391717
> 
> 赞同：0
> 
> 时间：2012-07-09T08:47:12.213
> 
> 标签：hadoop, amazon-s3

我正在使用 Hadoop FileStatus API 来确定文件夹是否为空，以便删除目录。

为了确定我在 s3n 上是否有一个空目录，我要做的是检查 FileStatus[] 长度，如果它等于零，那么我请求 Hadoop 文件系统通过 fs.delete(path, false) 执行删除。此处的 False 表示非递归删除请求。

对于 FTP 和 HDFS，文件以及包含这些文件的空目录将按预期删除。但是对于 S3n，空目录仍然存在。我不确定为什么会这样。

我有使用内存 S3 文件系统的本地单元/集成测试，这里的删除按预期工作。但是，当针对真正的 S3n 文件系统运行代码时，它会失败（空目录未删除，但文件已删除）。

任何建议或指示将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:28:50.620

由于您没有看到任何异常或错误消息，并且您的存储桶似乎没有启用版本控制，因此您应该尝试以下操作：

S3 是一个“平面”文件系统，没有文件夹的概念。长度可能为零，仅仅是因为没有具有该名称的文件。您所说的“目录”实际上只是 S3 中的文件前缀。看看[这个答案](https://stackoverflow.com/questions/9329234/amazon-aws-ios-sdk-how-to-list-all-file-names-in-a-folder/9330600#9330600)，因为它可能有助于澄清。

# objective-c - UINavigationController rightbarbuttonitem没有显示

> ID：11391718
> 
> 赞同：2
> 
> 时间：2012-07-09T08:47:14.153
> 
> 标签：objective-c, xcode4.3, ios5

在完成与 UINavigationController 项目相关的问题后，我来发布我的确切问题.. 首先，我没有在`MainWindow.xib`我创建的文件中添加 UINavigationController 并在`AppDelegate`文件中添加 UINavigationController 之后在`UIViewController`（不是`rootViewController`）类中我必须添加`Done`类型的 rightbarbutton我在 searchbarDelegate 方法中添加它，显示为粗体：-

```
- (void) searchBarTextDidBeginEditing:(UISearchBar *)theSearchBar {

//This method is called again when the user clicks back from teh detail view.
//So the overlay is displayed on the results, which is something we do not want to happen.

if(exhibDataObj.searching)
    return;

//Add the overlay view.
if(ovController == nil)
    ovController = [[OverlayViewController alloc] initWithNibName:@"OverlayView" bundle:[NSBundle mainBundle]];

CGFloat yaxis = self.navigationController.navigationBar.frame.size.height;
CGFloat width = self.view.frame.size.width;
CGFloat height = self.view.frame.size.height;

//Parameters x = origion on x-axis, y = origon on y-axis.
CGRect frame = CGRectMake(0, yaxis, width, height);
ovController.view.frame = frame;    
ovController.view.backgroundColor = [UIColor grayColor];
ovController.view.alpha = 0.5;

ovController.rvController = self;

[self.theTableView insertSubview:ovController.view aboveSubview:self.parentViewController.view];

exhibDataObj.searching = true;
letUserSelectRow = NO;
self.theTableView.scrollEnabled = NO;

//Add the done button.
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] 
                                          initWithBarButtonSystemItem:UIBarButtonSystemItemDone 
                                          target:self action:@selector(doneSearching_Clicked:)];
 } 
```

但这永远行不通。

任何帮助都会更加明显。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:33:18.813

我已经快速测试了你的代码，它似乎对我来说工作正常，但是，我曾经遇到过同样的问题，后来发现我在 viewDidLoad 方法中将 rightBarButtonItem 设置为 nil 在将其设置为按钮后. 你应该确保你不会以某种方式犯同样的错误。

但是，如果这对您不起作用，您可以随时尝试为其设置自定义按钮：

```
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 5, 30, 30)];

button.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"done.png"]];

[button addTarget:self action:@selector(doneButtonClicked) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *customItem = [[UIBarButtonItem alloc] initWithCustomView:button];

self.navigationController.visibleViewController.navigationItem.rightBarButtonItem = customItem; 
```

# perl - Perl 换行符问题

> ID：11391721
> 
> 赞同：8
> 
> 时间：2012-07-09T08:47:30.127
> 
> 标签：perl, newline

我有一个使用 CR/LF 分隔记录的文件，但个别记录有时包含 LF。

```
while (<$in>)
{ 
    #extract record data
} 
```

我正在尝试阅读上面的代码，这（正如我所期望的那样）拆分仅包含 LF 的记录。但是，我希望重新分配[`$/`](http://perldoc.perl.org/perlvar.html#%24/)可以解决此问题，但它似乎确实会导致我在一次迭代中读取完整的文件。

```
$/ = "\r\n";
while (<$in>)
{ 
    #extract record data
} 
```

这里有人可以提出可行的解决方案吗？

我在 Windows 上使用 Activestate Perl。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T09:37:22.037

[在 Windows 上，perl 仅将传入的 CRLF 行结尾转换为 LF，通过将数据作为文本 ( perlport](http://perldoc.perl.org/perlport.html#Newlines) )读入来区分 CRLF 和 LF 是不可能的。因此，您必须在文件句柄上使用[binmode](http://perldoc.perl.org/functions/binmode.html)以二进制模式读取数据：

```
binmode($in); 
```

之后，您可以将输入记录分隔符设置为“\015\012”并照常读入您的记录：

```
$/ = "\015\012";
while (<$in>) {
    ...
} 
```

问候，马蒂亚斯

PS：目前我没有机会在本地进行测试，所以如果它不起作用，我很遗憾。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T09:22:49.733

尝试设置`$/`为`"\n"`. 来自[perlport 中的换行符](http://perldoc.perl.org/perlport.html#Newlines)：

> Perl 用于`\n`表示“逻辑”换行符，其中的逻辑可能取决于所使用的平台。在 MacPerl 中，`\n`总是意味着`\015`. 在 DOSish perls 中，`\n`通常表示`\012`，但是当以“文本”模式访问文件时，perl 使用将`:crlf`其转换为（或从）的层 `\015\012`，具体取决于您是在阅读还是在写作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T09:24:00.703

在此之前尝试一下

```
binmode($in); 
```

# python - Python条件变量超时

> ID：11391722
> 
> 赞同：5
> 
> 时间：2012-07-09T08:47:34.030
> 
> 标签：python, multithreading, condition-variable

我有 thread1 正在等待来自 thread2 的条件。但可能是 thread2 从来没有发出条件变量的信号。所以我`wait`在线程 1 的调用中添加了超时，如下所示：

```
cv.acquire()
cv.wait(1.0)
cv.release() 
```

我如何知道条件变量是否已发出信号或发生超时？`wait`似乎没有返回任何值。[Condition Objects](http://docs.python.org/library/threading.html#condition-objects)上的 python 文档对此没有提供任何线索。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-15T21:58:55.423

Martijn 的回答对于旧版本的 Python 是正确的，但是在 3.2 中，情况发生了变化。该方法`wait()`现在`False`在超时时返回。

有趣的是，现在也有一种`wait_for()`方法。这需要一个谓词方法，并等待它评估为`True`。超时后，它返回 False。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T08:59:15.587

你不应该关心；典型的情况是您的等待线程检查某个共享状态，直到该状态与某个条件匹配。

因此，[文档示例](http://docs.python.org/library/threading.html#condition-objects)如下：

```
cv.acquire()
while not an_item_is_available():
    cv.wait()
get_an_available_item()
cv.release() 
```

该文件还指出：

> […] 对特定状态变化感兴趣的线程重复调用 wait() 直到他们看到所需的状态

如果您确实迫切需要区分超时和信号，则需要使用[`Event`对象](http://docs.python.org/library/threading.html#event-objects)来代替；如果未设置标志（仅在达到超时时发生），则对对象的`.wait(timeout)`调用`Event`返回。`None`

# linux - 如何在 shell 的文本编辑器中打开一堆文件？

> ID：11391725
> 
> 赞同：0
> 
> 时间：2012-07-09T08:47:45.870
> 
> 标签：linux, editor

假设我在 linux 下工作，我如何使用、或打开文件目录（包含`.c`、`.h`、 ） ？`.cpp``emacs``vim``vi``gedit`

我的意思是像从外壳打开所有目录并在右侧/左侧有文件列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:12:07.680

`dired`这将在当前目录中以模式打开 Emacs 。

```
emacs . 
```

这将为当前目录中的每个文件打开一个缓冲区。大概你可以用 e*vi*l 做同样的事情。

```
emacs * 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:14:34.503

如果你想在 vim 中打开它-

```
vim *.c *.h *.cpp 
```

然后使用 :next 和 :prev 在所有打开的文件之间导航

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T09:03:31.153

您可能是指类似于 NERDTree for vi 的东西（还有其他用于 emacs 的插件等）。

查看此页面的屏幕截图：[NERDTree for VI](http://www.flickr.com/photos/rodneybohner/2862367534/sizes/m/)

# php - 将csv输出为字符串，必须在php中解析为数组

> ID：11391727
> 
> 赞同：0
> 
> 时间：2012-07-09T08:47:45.900
> 
> 标签：php, csv

我已经获取了一个 csv 报告，我现在有一个字符串。

```
eg ->
$report="date,pageview,clicks
2012-07-01,229316,16739
2012-07-02,295238,19582
2012-07-03,278505,17805
2012-07-04,209455,15146
2012-07-05,250756,17206"; 
```

现在我想将这些数据保存在 mysql 数据库中，但没有得到任何优化的解决方案，因为我的真实`$report`大小非常大。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T08:52:52.283

忘记使用 PHP 导入 CSV 文件然后将数据发送到 MySQL - 以优化解决方案使用[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)并直接加载数据，如果数据不完全是您需要的，您可以使用临时表

例子 ：

```
LOAD DATA INFILE '<yourcsv>' INTO TABLE <yourtable>
FIELDS TERMINATED BY ','
IGNORE 1 LINES; 
```

**警告**- 输入文件需要在 MySQL 服务器上本地可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:56:11.810

使用`fgetcsv`which read 以数组格式一一记录。 [http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

# c# - 值背后的 javascript 代码

> ID：11391729
> 
> 赞同：0
> 
> 时间：2012-07-09T08:47:49.543
> 
> 标签：c#, javascript, asp.net, code-behind

我有以下显示/隐藏按钮的 JS 代码（必须以这种方式完成，请不要说另一种方式）。

```
Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandle);
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);
function beginRequestHandle(sender, Args) {
                document.getElementById("ltInstructions").style.visibility = "hidden";
                document.getElementById("btnSubmit").style.visibility = "hidden";
                document.getElementById("btnToExcel").style.visibility = "hidden";
            }
function endRequestHandle(sender, Args) {
                    if(<%=resultsCount %> > 0)
                    {
                        document.getElementById("ltInstructions").style.visibility = "visible";
                        document.getElementById("btnSubmit").style.visibility = "visible";
                        document.getElementById("btnToExcel").style.visibility = "visible";
                    }
                    else
                    {
                        document.getElementById("results").innerHTML = "<br><b><center><font size=20>No results found, please try again.</b></font></center>";
                    }
                } 
```

问题是`<%=resultsCount %>`它在后面的代码中初始化为 0，然后在 Timer_Tick 方法中更新。上面的 Js 总是把它选为 0。

如何让 JS 把它当作正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:54:57.473

改用 asp:hiddenfield 并在 Timer_Tick 中更改其值，您将获得更新的值。

**在 HTML 中**

```
 <asp:HiddenField id="resultsCount" runat="server" Value="String" /> 
```

**在 Javascript 中**

```
resultsCount = document.getElementById('<%= resultsCount.ClientID %>').value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:51:37.327

尝试在浏览器中查看网页的来源。您必须在 JavaScript 中编写计时器，因为`<%=resultsCount %>`只评估**一次**，因此客户端看到的只是

```
 if (0 > 0) {
   ...
 } 
```

`setInterval`您可以使用和`clearInterval`方法在 JavaScript 中实现计时器。定义一个函数`update()`，每当需要更新时调用该函数，然后执行

```
var updateInterval

function update() {
  if(condition) {
    /* update stuff */
  } else {
    /* no more updates needed */
    clearInterval(updateInterval) /* stop updating */
  }
}

updateInterval = setInterval(update, 1000) /* call update() every 1000 ms, that is every second */ 
```

# java - 生成字典序上最大的字符串

> ID：11391730
> 
> 赞同：1
> 
> 时间：2012-07-09T08:47:51.157
> 
> 标签：java, string, puzzle

问题是在给定一些字符串 s 的情况下生成字典上最大的字符串。因此，目标是从 s 中找到字典顺序上最大的、唯一的（无重复）子字符串 s1。如果 s1 的字符数比 s2 多，或者如果长度相等，则我们说某个子序列 s1 大于另一个子序列 s2。

输入输出如下：

输入是：**ba** bab

输出是：巴

第二个输入是： nlhthgrfdnnlprjtecpdr **t** higjoqdejsfka **soc** tjijaoebql **r** gaiakfsbljm **p** ib **k** id **j** srtk **g** r **d** n **q** sk **nb** arp **a** bgokbsr **fhm** eklr **le**

第二个输出是：tsocrpkijgdqnbafhmle

这是我为我的 java 代码编写的，但我的代码在第二个测试用例中失败了。我也很难理解为什么第二个输出不是 tsrqponmlkjihgfedcba。有人可以提供修复甚至Java代码的建议吗？

我认为该算法必须比生成所有可能的唯一字符串、对它们进行排序并找到字典上最大的字符串更有效。

为了使问题更清楚，如果输入是 babab，那么所有可能的唯一组合将是 b、a、ba、ab。并且输出将是 ba，因为它是最长的并且在字典上大于 ab。

**注意：这不是家庭作业。**

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class mostBeautiful {
final static int MAX = 1000000;
static String[] permute;
static void permutation(String prefix, String str, int counter) {
    int n = str.length();
    //System.out.println("n is: "+ n);
    if (n == 0) {
        permute[counter] = prefix;
    } else {
        for (int i = 0; i < n; i++) {
            //System.out.println("str is: "+ str);
            permutation(prefix + str.charAt(i), str.substring(0, i) + str.substring(i+1, n), counter++);
        }
    }
}
public static void main(String[] args) throws IOException {
    BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
    String s = bf.readLine();
    char[] unique = new char[26];
    int counter = 0;
    String answer = "";
    //System.out.println("s is: " + s);
    int ascii = 0;
    final int asciiAVal = 97;
    final int asciiZVal = 122;
    for (int i = 0; i < s.length(); i++) {
        ascii = (int)s.charAt(i);
        if (ascii < asciiAVal || ascii > asciiZVal) {
            continue;
        }
        char ch = s.charAt(i);
        unique[ch - 'a'] = ch;
    }
    String result = "";
    for (int j = 25; j >= 0; j--) {
        result += unique[j];
    }
    result = result.trim();
    System.out.println(result);
    int size = result.length() * (result.length() - 1);
    permute = new String[size];
    permutation("", result, counter);
    for (int i = 1; i < size; i++) {
        if (permute[i].compareTo(permute[i - 1]) > 0){
            answer = permute[i];
        }  else {
            answer = permute[i - 1];
        }

    }
    System.out.println("answer is: " + answer);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:32:43.660

在多方面思考了这个问题之后，我确定了一个分而治之的算法，可以得到正确的结果：

### 算法 - 伪代码

假设某个输入字符串 S 定义为两个子字符串 A + B 的串联，我们递归地计算字典序上最大的字符串为：

```
LexMax(S) = Merge(LexMax(A),LexMax(B)) 
```

在哪里

```
LexMax(S)
{
    if Length(S) = 1
        return S
    else
    {
        LMA = LexMax(S[0:Length/2])
        LMB = LexMax(S[Length/2:end])
        return Merge(LMA,LMB)
    }
}

Merge(A,B)
{
    Sa = A
    Sb = B

    for n = 0:Length(A)
    {
        if Sb contains A[n]
        {
            if A[n+1:end] contains character > A[n]
                Remove A[n] from Sa
            else
                Remove A[n] from Sb
        }
    }

    return Sa + Sb
} 
```

### Java 代码

快来了！

### 例子

给定一个输入字符串

```
cefcfdabbcfed 
```

把它分成

```
cefcfda
bbcfed 
```

假设函数有效，我们有：

```
LexMax("cefcfda") = "efcda"
LexMax("bbcfed") = "bcfed" 
```

合并工作如下：

```
e: efcda bcfed 
```

在两个子字符串中，在左侧子字符串中的 e 右侧找到更大的值，从左侧移除

```
f: fcda bcfed 
```

在两个子字符串中，左侧子字符串中没有更大的值，从右侧删除

```
c: fcda bced 
```

在两个子字符串中，在左子字符串中 c 的右侧找到更大的值，从左侧删除

```
d: fda bced 
```

在两个子字符串中，左侧子字符串中没有更大的值，从右侧删除

```
a: fda bce 
```

不在两个子字符串中，什么都不做

最后结果：

```
LexMax(cefcfdabbcfed) = fdabce 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:08:24.787

这不是一个直接的答案，但是此代码不符合您在上面讨论中解释的要求吗？

```
final String x = "saontehusanoethusnaoteusnaoetuh";
final SortedSet<Character> chars = 
   new TreeSet<Character>(Collections.reverseOrder());
for (char c : x.toCharArray()) chars.add(c);
System.out.println(chars); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-17T06:33:47.167

字典顺序是使用单词中字母的出现按字母顺序显示单词的顺序。它也称为字典顺序或字母顺序。例如：-“Africa”小于“Bangladesh”，“He”比“他”小。

```
 public class LexicographicExample {  
      public static void main(String a[]) {  
           Scanner sc = new Scanner(System.in);  
           System.out.println("Enter the String:-");  
           String str = sc.nextLine();  
           System.out.println("Enter the length");  
           int count = sc.nextInt();  
           List<String> list = new ArrayList<String>();  
           for (int i = 0; i < str.length(); i = i + 1) {  
                if (str.length() - i >= count) {  
                     list.add(str.substring(i, count + i));  
                }  
           }  
           Collections.sort(list);  
           System.out.println("Smallest subString:-" + list.get(0));  
           System.out.println("Largest subString:-" + list.get(list.size() - 1));  
      }  
 } 
```

如需参考，请参阅此链接[http://techno-terminal.blogspot.in/2015/09/java-program-to-find-lexicographically.html](http://techno-terminal.blogspot.in/2015/09/java-program-to-find-lexicographically.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:04:26.643

“tsrqponmlkjihgfedcba”不是答案，因为它不是输入的子序列。*子序列的定义要求子序列的字符以相同的顺序*出现在原序列中。例如，“abc”是“apbqcr”的子序列，而“cba”不是。

至于解决方案，我认为一个简单的贪心算法就足够了。首先，必须了解输出的最大可能长度是输入中唯一符号的数量（例如 N）。由于任何比这更短的输出都不是最大的，因此它的长度必须正好为 N 个符号。该过程的其余部分很简单，并且时间复杂度最多为二次：必须遍历输入字符串，并在每一步中选择字典顺序最高的符号，以便字符串左侧的部分仍然包含所有“未使用”的符号。

例如，考虑一个字符串“bacb”。第一个符号可以是“a”或“b”，因为在这两种情况下，余数都包含其他两个字母。'b' 更大，所以我们选择它。现在对于“acb”，我们只能根据该条件选择“a”而不是“c”，因此我们最终以“bac”作为输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-17T13:54:17.027

```
 import java.util.ArrayList;
        import java.util.HashMap;
        import java.util.Scanner;

        class aaa {
            public static void main(String args[]) throws Exception {
                Scanner scan = new Scanner(System.in);

                // int n = scan.nextInt();
                String s = scan.next();

                HashMap<Character, Node5> map = new HashMap<>();

                for (int i = 0; i < s.length(); i++) {
                    if (!map.containsKey(s.charAt(i))) {
                        Node5 node = new Node5();
                        node.nl.add(i);
                        node.li = i;
                        map.put(s.charAt(i), node);
                    } else {
                        Node5 rn = map.get(s.charAt(i));
                        rn.nl.add(i);
                        rn.li = i;
                        map.put(s.charAt(i), rn);
                    }
                }

                String s1 = "";
                int index = -1;
                for (int i = 25; i >= 0; i--) {
                    if (map.containsKey((char) (97 + i))) {
                        if (map.get((char) (97 + i)).li > index) {
                            for (int j = 0; j < map.get((char) (97 + i)).nl.size(); j++) {
                                if (map.get((char) (97 + i)).nl.get(j) > index) {
                                    s1 += (char) (97 + i);
                                    index = map.get((char) (97 + i)).nl.get(j);
                                }
                            }
                        }
                    }

                }
                System.out.println(s1);
                scan.close();
            }

        }

        class Node5 {
            int li;
            ArrayList<Integer> nl;

            public Node5() {
                this.nl = new ArrayList<>();
            }
        } 
```

# syntax - 为什么 Clojure 语言使用这么多括号？

> ID：11391731
> 
> 赞同：18
> 
> 时间：2012-07-09T08:47:52.750
> 
> 标签：syntax, clojure

似乎**所有内容都**需要用 clojure 的括号括起来。即使是[一个简单的hello world](http://en.wikipedia.org/wiki/Clojure)！

```
(println "Hello world!") 
```

这种语法决定有什么好处？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-09T10:42:45.367

根本原因是Clojure 被设计为[同音](http://en.wikipedia.org/wiki/Homoiconicity)语言，即代码以该语言的核心数据结构表示。所有的 Lisps 都有这个属性，但很少有其他语言有。因此，Lisp 的整个语言设计都受到这一决定的强烈影响。

在 Lisp 设计的早期就做出了选择，列表将用于函数调用，形式如下：

```
(function arg1 arg2 arg3) => some result 
```

这有很多优点：

*   函数调用表示为称为“表单”的单个数据对象（在这种情况下，表单是列表，但它也可以是向量、哈希图、文字值等）。您可以在执行前根据需要传递、修改和转换它。
*   *使用标准列表操作*很容易构造这样的函数调用- 例如`(cons function-symbol list-of-args)`
*   语法很容易解析——两个括号之间的所有内容都是一个独立的表达式。这使得编写解析器变得容易，并且还有助于使用工具（例如，请参阅 emacs 中令人难以置信的数组处理命令）

函数名*可以*放在括号外：

```
function (arg1 arg2 arg3) => some result 
```

但这会有很多缺点：

*   您不能再以单一形式表达函数调用。您必须传递两个单独的数据对象，即函数名和参数列表。
*   它会使语法更加复杂——你需要额外的语法规则来将其识别为函数调用（例如，参数之间的额外分隔符，如“，”）
*   代码生成会更难。Lisp 从一开始就被设计为允许有效的代码生成——另一方面，如果你曾经尝试过生成 C++ 源代码，那么你就会知道在不是以这种方式设计的语言中它有多难。
*   它实际上并没有减少整体括号的数量。事实上，由于是一种非常简洁的语言，Clojure 的括号通常比 Java / C# 中的等效代码*少*

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-09T08:49:57.620

Clojure的怎么样

```
(println "Hello world!") 
```

任何不同于

```
println("Hello world!") 
```

其他语言的？相同数量的括号仅在不同的位置。

括号分隔函数调用（作为列表）。在类 C 语言中，括号仅包含参数，而在类 LISP 语言中，括号包含函数名称。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-09T08:52:13.917

基于 Lisp 的语言使用 s 表达式（括号内的代码）作为代码和数据的基础。这是非常强大的，因为它为 Lisp 提供了一个独特强大的宏系统。另请参见[同质性](https://en.wikipedia.org/wiki/Homoiconicity)。

# java - 代码效率：基于 TCP 的 Java 传输文件

> ID：11391752
> 
> 赞同：1
> 
> 时间：2012-07-09T08:49:07.363
> 
> 标签：java, tcp, client-server

我想知道这两个尝试通过 TCP 套接字发送大文件的块在性能方面的差异。我找不到太多资源来解释它们的效率。

一种-

```
byte[] buffer = new byte[1024];
int number;

while ((number = fileInputStream.read(buffer)) != -1) {
socketOutputStream.write(buffer, 0, number);
} 
```

乙-

```
byte mybytearray = new byte[filesize];
os.write(mybytearray); 
```

在传输延迟方面哪个更好？

另外，如果我将大小设置为 1024 或 65536，有什么区别？那会如何影响性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T08:54:04.890

直到文件的最后一个字节到达的延迟基本相同。然而，第一个更可取，尽管缓冲区更大，原因如下：

1.  数据*开始*更快到达。
2.  没有假设文件大小适合`int`.
3.  没有假设整个文件适合内存，所以
4.  它无需更改代码即可扩展到非常大的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:08:11.317

您的[MTU（最大传输单元）](http://en.wikipedia.org/wiki/Maximum_transmission_unit)大小可能在 1500 字节左右。这意味着无论您做什么，您的数据都将被分解（或组合成）这个大小。512 字节以上的任何合理缓冲区大小都可能为您提供相同的传输速度。

您发送和接收数据的方式会影响您使用的 CPU 数量。除非您有一个快速的网络，例如 10 GB，否则您的 CPU 将无法跟上您的网络。

以有效的方式编写代码将确保您不会浪费 CPU（这是一件好事），但不会对受带宽（和网络延迟）限制的传输速度产生太大影响

# php - 从特定模式中获取变量

> ID：11391767
> 
> 赞同：0
> 
> 时间：2012-07-09T08:50:13.327
> 
> 标签：php, variables, preg-replace, pattern-matching

我需要将每对大括号之间的数字保存为变量。

```
{2343} -> $number
echo $number;
Output = 2343 
```

我不知道如何做'->'部分。

我找到了一个类似的功能，但它只是删除了大括号，没有做任何其他事情。

```
preg_replace('#{([0-9]+)}#','$1', $string); 
```

有什么我可以使用的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:52:59.243

您可能希望将[preg_match](http://uk3.php.net/preg_match)与捕获一起使用：

```
$subject = "{2343}";
$pattern = '/\{(\d+)\}/';
preg_match($pattern, $subject, $matches);
print_r($matches); 
```

输出：

```
Array
(
    [0] => {2343}
    [1] => 2343
) 
```

`$matches`如果找到，该数组将包含索引 1 处的结果，因此：

```
if(!empty($matches) && isset($matches[1)){
    $number = $matches[1];
} 
```

如果您的输入字符串可以包含许多数字，则使用 preg_match_all：

```
$subject = "{123} {456}";
$pattern = '/\{(\d+)\}/';
preg_match_all($pattern, $subject, $matches);
print_r($matches); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => {123}
            [1] => {456}
        )

    [1] => Array
        (
            [0] => 123
            [1] => 456
        )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:58:02.107

```
$string = '{1234}';
preg_replace('#{([0-9]+)}#e','$number = $1;', $string);
echo $number; 
```

# glsl - x坐标模2 == 1.0需要不同的颜色

> ID：11391771
> 
> 赞同：0
> 
> 时间：2012-07-09T08:50:25.650
> 
> 标签：glsl, shader

当以下等式成立时，我需要编写一个像素颜色为黑色的着色器：

（像素的 x 坐标）mod 2 == 1

如果它是假的，像素应该是白色的。因此，我搜索了网络，但没有成功。

更多信息：我有一个分辨率为 800 x 600 的 OpenGL 场景和其中的茶壶。茶壶是红色的。现在我需要创建斑马外观。这是我写的一些代码，但它不起作用：

片段着色器：

```
void main(){
    if (mod(gl_FragCoord[0].x * 800.0 , 2.0) == 0){

        gl_FragColor = vec4(1.0,1.0,1.0,1.0);

    }else{
        gl_FragColor = vec4(0.0,0.0,0.0,1.0);
    }
} 
```

顶点着色器：

```
void main(void)
{
    gl_Position = ftransform();
    gl_TexCoord[0]  =   gl_MultiTexCoord0;
} 
```

据我所知， gl_FragCood.x 在范围（0,1）内，因此我需要乘以宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:20:47.607

有趣的是，您提到需要乘以宽度，您是否尝试过不使用该宽度`* 800.0`？的范围`gl_FragCoord`使得相邻像素之间的距离例如`[0.0, 800.0]`或可能为 1.0 `[0.5, 800.5]`。

删除宽度乘法，看看它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:27:30.667

不要直接与 0 比较，而是尝试针对 1.0 进行测试，例如

```
void main(){
    if (mod(gl_FragCoord[0].x , 2.0) >= 1.0){

        gl_FragColor = vec4(1.0,1.0,1.0,1.0);

    }else{
        gl_FragColor = vec4(0.0,0.0,0.0,1.0);
    }
} 
```

这将避免精度误差和舍入成本。

正如所`emackey`指出的，`gl_FragCoord`在窗口坐标中指定，其中：

> ...通过视口缩放和转换标准化设备坐标的结果。glViewport() 和 glDepthRange() 的参数控制这个转换。使用视口，您可以将标准化设备坐标立方体映射到窗口和深度缓冲区中的任何位置。

所以你实际上也不想乘以 800 - 传入的坐标已经以像素为单位。

# r - 为 googleVis annotatedTimeLine 设置 Y 轴

> ID：11391774
> 
> 赞同：2
> 
> 时间：2012-07-09T08:50:36.147
> 
> 标签：r, google-visualization, annotatedtimeline

这可能是一个非常简单的问题，但帮助文件似乎没有提出任何有用的建议。

我正在使用 googleVis 绘制一些数据，但是绝对级别非常高，所以我想为 gvisAnnotatedTimeLine 函数设置 y 轴的最小值。

下面是一个例子...

```
df <- Sys.time()-100:1
df <- as.data.frame(df)
df$k <- 9000:9099
plot(gvisAnnotatedTimeLine(df, datevar="df",numvar="k", options=list(min=8000))) 
```

结果时间线的 y 轴从零开始，但我希望它从 8000 或我选择的任意数字开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T22:58:59.907

这应该可以解决问题...

```
df <- Sys.time()-100:1
df <- as.data.frame(df)
df$k <- 9000:9099
plot(gvisAnnotatedTimeLine(df, datevar="df",numvar="k", options=list(scaleType='maximized'))) 
```

# javascript - 如何抓取 iframe 中的所有内容？

> ID：11391775
> 
> 赞同：1
> 
> 时间：2012-07-09T08:50:37.443
> 
> 标签：javascript, iframe

我需要做的是我想要一本在谷歌图书上的书的 Pdf。一本书的每一页都是通过 AJAX 来的。但谷歌也提供 iframe 这是我正在寻找的 iframe

```
<iframe id="iframeId" frameborder="0" scrolling="no" style="border:0px" src="http://books.google.com.pk/books?id=KOrTwnwcJ9IC&lpg=PP1&dq=magento%20books&pg=PT36&output=embed" width=500 height=500></iframe> 
```

我想抓取这本书的所有内容，把它放在某个 div 中，而不是制作一个 Pdf。我可以做所有事情，但我就是不能抓取内容

我试过这个但是说没有定义id

```
 <Script type="text/javascript">

   var doc;
 if (document.getElementById(iframeId).contentDocument) {
   doc = document.getElementById(iframeId).contentDocument;
 }
 else if (document.getElementById(iframeId).contentWindow) { // older IE
  doc = document.getElementById(iframeId).contentWindow.document
  }

 if (doc) { alert(doc.body.innerHTML) }

</script> 
```

在原始 iframe 标记中没有 id，所以我手动为 iframe 标记编写 id，即 id="iframeId" 但没有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:52:36.427

只要 iframe 中加载的页面在同一个域中，您就可以拥有类似的内容：

```
 var myIFrame = document.getElementById(iFrameName);
 var content = myIFrame.contentWindow.document.body.innerHTML; 
```

但谷歌也支持从谷歌文档中以 JSON 格式检索信息：

[https://developers.google.com/gdata/samples/spreadsheet_sample?hl=ro](https://developers.google.com/gdata/samples/spreadsheet_sample?hl=ro)

第二个可能是您正在寻找的。

# matlab - MATLAB 尝试捕获问题

> ID：11391776
> 
> 赞同：4
> 
> 时间：2012-07-09T08:50:39.847
> 
> 标签：matlab, exception-handling, input

我对 MATLAB 中的以下 try and catch 代码有疑问：

```
fonster='';
while ~(~isempty(fonster) && isnumeric(fonster) && isreal(fonster) && isfinite(fonster) && (fonster == fix(fonster)) && (fonster > 0))
    try
        fonster = input('Välj ett heltal till fönsterplatsen du vill lägga grafen i: ');
    catch
        disp('Du måste mata in ett heltal');
    end
end 
```

当输入无效输入作为输入函数的字符串时，它似乎永远不会输入代码的捕获部分。相反，它只是重新运行输入并忽略我的输出消息。奇怪的部分是我在代码的另一个地方的 catch 中使用了 disp，但这一次它不起作用。

以下是一些运行示例：

不带 try 和 catch 语句的输入：

```
Välj den fönsterplats du vill lägga grafen i: o
Error using input
Undefined function or variable 'o'.

Error in skapaPlot (line 11)
    fonster = input('Välj den fönsterplats du vill lägga grafen i:
    ');

Error in mainMeny (line 17)
            plot_handles = skapaPlot(plot_handles);

Välj den fönsterplats du vill lägga grafen i: 
```

尝试并抓住：

```
Välj ett heltal till fönsterplatsen du vill lägga grafen i: f
Välj ett heltal till fönsterplatsen du vill lägga grafen i: d
Välj ett heltal till fönsterplatsen du vill lägga grafen i: s
Välj ett heltal till fönsterplatsen du vill lägga grafen i: 
```

为什么不显示 disp 部分？！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T09:22:50.847

Matlab 的输入表达式求值器将处理输入过程中引发的任何异常，并立即重新显示提示，异常将被清除。因此，您的 catch 处理程序永远不会看到任何异常。如果您想自己管理事情，请改用 input(..., 's')，它返回原始字符串。然后您可以使用 'eval()' 执行评估：

```
try
    inputstring = input('Välj ett heltal till fönsterplatsen du vill lägga grafen i: ', 's');
    fonster = eval(inputstring);
catch
    disp('Du måste mata in ett heltal');
end 
```

# facebook - 无法使用 php 获取 Facebook 的用户照片

> ID：11391777
> 
> 赞同：0
> 
> 时间：2012-07-09T08:50:47.617
> 
> 标签：facebook, facebook-graph-api

我正在尝试获取用户照片，但无法获取用户的照片数据。

我正在尝试这个：

```
$photos = $facebook->api('https://graph.facebook.com/'.$profileFID.'/photos?access_token='.$access_token);
print_r($photos); 
```

我确定 URL 是正确的，因为将其粘贴到浏览器中会显示照片数组。但是，当我尝试打印数组以检查是否得到它时，我只得到这个：

```
( [id] => https://graph.facebook.com/1409006586/photos ) 
```

如何获得包含用户照片的完整数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:12:44.880

Facebook SDK 将负责为您构建 url（并附加`access_token`），您只需要构建查询：

```
$photos = $facebook->api('me/photos'); 
```

如果用户当前未登录但您拥有`access_token`，则使用：

```
$photos = $facebook->api($profileFID.'/photos', 'get', array('access_token'=>$access_token)); 
```

PS：总是把你的查询放在一个`try...catch`块中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T09:45:10.933

[https://graph.facebook.com/1409006586/](https://graph.facebook.com/1409006586/)`photos`

用图片替换照片

前 [https://graph.facebook.com/4/picture](https://graph.facebook.com/4/picture)

# java - 如何获取内部文本节点的值 使用 XPATH 和 Jtidy 的元素

> ID：11391781
> 
> 赞同：1
> 
> 时间：2012-07-09T08:51:25.290
> 
> 标签：java, xpath

这两天我一直在敲我的头。我有一个 XHTML 网页，我想从中删除一些数据，我正在使用 JTidy 到 DOMParse，然后 XPathFactory 使用 XPath 查找节点

Xhtml 片段是这样的

```
 <div style="line-height: 22px;" id="dvTitle" class="titlebtmbrdr01">BAJAJ AUTO LTD.</div> 
```

现在我想要 BAJAJ AUTO LTD。

我正在使用的代码是：

```
 import java.io.IOException;
    import java.net.MalformedURLException;
    import java.net.URL;
    import java.util.Vector;

    import javax.xml.xpath.XPath;
    import javax.xml.xpath.XPathConstants;
    import javax.xml.xpath.XPathExpression;
    import javax.xml.xpath.XPathExpressionException;
    import javax.xml.xpath.XPathFactory;

     import org.w3c.dom.Document;
    import org.w3c.dom.Node;
    import org.w3c.dom.NodeList;

   public class BSEQuotesExtractor implements valueExtractor {

@Override
public Vector<String> getName(Document d) throws XPathExpressionException {
    // TODO Auto-generated method stub
    XPathFactory factory = XPathFactory.newInstance();
    XPath xpath = factory.newXPath();
    XPathExpression expr = xpath.compile("//div[@id='dvTitle']/text()");
    Object result = expr.evaluate(d, XPathConstants.NODESET);
    NodeList nodes = (NodeList)result;
    for(int i=0;i<nodes.getLength();i++)
    {
        System.out.println(nodes.item(i).getNodeValue());
    }

    return null;
}

public static void main(String[] args) throws MalformedURLException, IOException, XPathExpressionException{
    BSEQuotesExtractor q = new BSEQuotesExtractor();
    DOMParser parser = new DOMParser(new URL("http://www.bseindia.com/bseplus/StockReach/StockQuote/Equity/BAJAJ%20AUTO%20LTD/BAJAJAUT/532977/Scrips").openStream());
    Document d = parser.getDocument();
    q.getName(d);

}

    } 
```

但我得到一个空输出而不是 BAJAJ AUTO LTD。请救救我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:29:04.047

try this.

```
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
XPathExpression expr = xpath.compile("//div[@id='dvTitle']");
Object result = expr.evaluate(d, XPathConstants.NODE);
Node node = (Node)result;
System.out.println(node.getTextContent()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:45:45.990

您必须使用`XPathConstants.STRING`而不是`XPathConstants.NODESET`. 您想要获取单个元素 (div) 的值，而不是节点列表。写：

```
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
String divContent = (String) path.evaluate("//div[@id='dvTitle']", document, XPathConstants.STRING); 
```

进入`divContent`你得到“BAJAJ AUTO LTD.”。

# postgresql - PostgreSQL 如何将 blob 条目恢复到文件系统

> ID：11391787
> 
> 赞同：0
> 
> 时间：2012-07-09T08:51:45.510
> 
> 标签：postgresql, blob

我想将 blob 条目作为文件还原到文件系统。

如何在 Linux 上使用 PostgreSQL 做到这一点？你能指导我找到一个合适的解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:36:09.197

有关如何使用 lo_export 函数的信息，请参阅[客户端接口上的 PostgreSQL 文档的第 32.3.3 节。](http://www.postgresql.org/docs/9.1/static/lo-interfaces.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-01T16:21:01.953

你可以使用我的提供基本文件系统功能的[pgsql-fio扩展。](https://github.com/csimsek/pgsql-fio)

# php - 将 px 转换为 mm

> ID：11391791
> 
> 赞同：3
> 
> 时间：2012-07-09T08:52:04.330
> 
> 标签：php, math

我正在在线创建名片制作工具，到目前为止，一切都很容易，直到我开始制作名片。在我的 html 文档中，我有：

> 宽度 = 517px 等于 90mm
> 高度 = 287px 等于 50mm

根据 Photoshop **90mm** -> **255px**所以我需要以某种方式将**517px**转换为**255px**。

经过一些谷歌搜索后，我想出了迄今为止的最佳解决方案，`(517 / 5.7) * 3`这给了我`272`，它远非正确答案。

任何建议都会有很大帮助:)

PS 我正在使用`php GD`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:01:00.527

像素和物理测量之间的相关性完全取决于显示器以及每（平方）毫米有多少物理像素。72ppi（[每英寸像素](http://en.wikipedia.org/wiki/Pixel_density)）曾经是典型的分辨率，但随着许多设备的像素密度增加，这不再是给定的。

根本没有标准公式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T09:08:31.490

生成的像素数取决于输出媒体的 DPI（分辨率）。

从 90 毫米开始，等于 ~3,54 英寸，你会得到：

```
72dpi:  255px
96dpi:  340px
120dpi: 425px
146dpi: 517px 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T11:49:49.350

如果你不想做所有的计算，有一个 PHP 类可以为你做这件事。

以下是库可以做的一些信息： 在布局事物时，通常必须计算各种位置、缩放因子、缩放等。当特定尺寸具有动态特性时，布局代码很快就会得到一系列令人困惑的无穷无尽的数学方程式。你的名字：意大利面条代码。这个库试图提供两种方法来解决这个问题：

*   通过处理从显式重新计算到隐式考虑的单位，您所要做的就是命名一个特定值将被解释为什么单位
*   通过提供众所周知的算术概念作为类型，允许以更高级的方式思考布局，而不仅仅是简单的数值。

[https://github.com/arkascha/php-urithmetic](https://github.com/arkascha/php-urithmetic)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-17T10:01:05.007

我认为 px 除以 2.02 在我的情况下在任何大小的页面上都是完美的。
在**php**代码中我使用：

```
<?php $mm = $px/2.02 ?> 
```

# asp.net - 用静态方法绑定asp中继器

> ID：11391794
> 
> 赞同：-1
> 
> 时间：2012-07-09T08:52:20.983
> 
> 标签：asp.net, c#-4.0

我的 asp 页面上有一个转发器，我想将该转发器与后面的代码绑定（C#）。在 c# 页面上，我有一个静态方法来绑定转发器。但我收到错误

> “对象未设置为对象的实例”

我拥有的静态方法是..

```
 [WebMethod(EnableSession = true)]
    public static void LoadData()
    {
        Default oDefault = new Default();
        Page p = new Page();
        if ((List<AllPostInformation>)p.Session["AllNewsPostCollection"] != (List<AllPostInformation>)p.Session["CheckExistData"])
        {
            if ((List<AllPostInformation>)p.Session["AllNewsPostCollection"] != null)
            {
                List<AllPostInformation> o = new List<AllPostInformation>();
                o = (List<AllPostInformation>)p.Session["AllNewsPostCollection"];
                oDefault.rptNews.DataSource = o;
                oDefault.rptNews.DataBind();
            }
            p.Session["CheckExistData"] = p.Session["AllNewsPostCollection"];
        }
    }
  Please Help??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:34:54.747

您不能实例化*Page*或*HttpSession*对象。您应该必须使用`HttpContext.Current.Session`属性来获取 Session 对象的引用。

# mysql - 使用 IntelliJ IDEA 无法通过 SSH 和 JDBC 连接到 MySQL 服务器

> ID：11391809
> 
> 赞同：0
> 
> 时间：2012-07-09T08:53:10.180
> 
> 标签：mysql, jdbc, ssh, intellij-idea, xubuntu

我和我的朋友正在做一个项目，我们尝试使用 JDBC、JSch 和 IntelliJ IDEA 通过 SSH 连接到 MySQL 数据库。问题很可能不是连接尝试本身，而是我的猜测是某种环境问题。我可以毫无问题地通过终端（是的，Xubuntu）进行 SSH 连接，但是当我尝试通过 IDEA 中的代码进行操作时，它给了我

```
java.sql.SQLException: Access denied for user 'websp'@'localhost' (using password: YES)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:919)
at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1694) 
```

困扰我们并支持环境理论的是它在另一个系统上运行良好。我已经使用 'sudo apt-get install IntelliJ...' 和 JetBrains 的可下载文件安装了 IDEA。我已将 MySQL-connector(http://dev.mysql.com/downloads/connector/j/) 导入到 Project Structure>Modules>Dependencies。

我重新安装了 IDEA 以查看是否是问题所在，但没有任何变化。也许我错过了什么？

想法？

问候， 尼克拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:55:43.590

专注于 jdbc 的连接字符串。

# scala - 怎么把这三行写成单行？

> ID：11391817
> 
> 赞同：8
> 
> 时间：2012-07-09T08:53:40.237
> 
> 标签：scala

我喜欢这种方式，您可以在 Scala 中编写单行方法，例如使用`List(1, 2, 3).foreach(..).map(..)`.

但是有一种情况，有时会在编写 Scala 代码时出现，情况会变得有些难看。例子：

```
def foo(a: A): Int = {
  // do something with 'a' which results in an integer
  // e.g. 'val result = a.calculateImportantThings

  // clean up object 'a'
  // e.g. 'a.cleanUp'

  // Return the result of the previous calculation
  return result
} 
```

在这种情况下，我们必须返回一个结果，但不能在计算完成后直接返回，因为我们必须在返回之前做一些清理工作。

我总是要写三行。是否也有可能写一个单行来做到这一点（不改变类`A`，因为这可能是一个无法改变的外部库）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T09:21:41.517

这里有明显的副作用（否则调用顺序无关紧要），因此建议您重新考虑您的设计`calculateImportantThings`。`cleanUp`

但是，如果这不是一个选项，您可以尝试类似的方法，

```
scala> class A { def cleanUp {} ; def calculateImportantThings = 23 }
defined class A

scala> val a = new A
a: A = A@927eadd

scala> (a.calculateImportantThings, a.cleanUp)._1
res2: Int = 23 
```

元组值`(a, b)`等同于应用程序`Tuple2(a, b)`，Scala 规范保证它的参数将从左到右进行评估，这就是你想要的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T15:26:14.210

这是`try`/的完美用例`finally`：

```
try a.calculateImportantThings finally a.cleanUp 
```

这是有效的，因为 try/catch/finally 是 scala 中的一个*表达式*，这意味着它返回一个值，甚至更好的是，无论计算是否引发异常，您都可以获得清理。

例子：

```
scala> val x = try 42 finally println("complete")
complete
x: Int = 42 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-09T09:16:11.070

也许您想使用红隼组合器？定义如下：

> Kxy = x

因此，您使用要返回的值和要执行的一些副作用操作来调用它。

您可以按如下方式实现它：

```
def kestrel[A](x: A)(f: A => Unit): A = { f(x); x } 
```

...并以这种方式使用它：

```
kestrel(result)(result => a.cleanUp) 
```

更多信息可以在这里找到：[debasish gosh 博客](http://debasishg.blogspot.de/2009/09/side-effects-with-kestrel-in-scala.html)。

**[更新]**正如 Yaroslav 正确指出的那样，这不是 kestrel 组合器的最佳应用。但是使用不带参数的函数定义类似的组合器应该没有问题，因此：

```
f: A => Unit 
```

有人可以使用：

```
f: () => Unit 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-09T11:54:23.960

事实上，有一个 Haskell 运算符可以用于这种场合：

```
(<*) :: Applicative f => f a -> f b -> f a 
```

例如：

```
ghci> getLine <* putStrLn "Thanks for the input!"
asdf
Thanks for the input!
"asdf" 
```

剩下的就是在 scalaz 中发现[相同的运算符](http://scalex.org/?q=%3C%2a)，因为 scalaz 通常复制 Haskell 拥有的所有内容。您可以将值包装在 中`Identity`，因为 Scala 不必`IO`对效果进行分类。结果看起来像这样：

```
import scalaz._
import Scalaz._

def foo(a: A): Int = 
  (a.calculateImportantThings.pure[Identity] <* a.cleanup.pure[Identity]).value 
```

不过，这相当令人讨厌，因为我们必须在 Identity 中显式地包装副作用计算。好吧，事实是，scalaz 做了一些*隐式*转换到 Identity 容器和从 Identity 容器转换的魔法，所以你可以写：

```
def foo(a: A): Int = Identity(a.calculateImportantThings) <* a.cleanup() 
```

您*确实*需要以*某种方式*向编译器提示最左边的东西在 Identity monad 中。以上是我能想到的最短方法。另一种可能性是使用`Identity() *> foo <* bar`，它将按顺序调用 和 的效果`foo`，`bar`然后产生 的值`foo`。

返回到 ghci 示例：

```
scala> import scalaz._; import Scalaz._
import scalaz._
import Scalaz._

scala> val x : String = Identity(readLine) <* println("Thanks for the input!")
<< input asdf and press enter >>
Thanks for the input!
x: String = asdf 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-09T09:19:05.367

```
class Test {
  def cleanUp() {}
  def getResult = 1
}

def autoCleanup[A <: Test, T](a: A)(x: => T) = {
  try { x } finally { a.cleanUp }
}  

def foo[A <: Test](a:A): Int = autoCleanup(a) { a.getResult }

foo(new Test) 
```

您可以查看基于类型类的解决方案的[scala-arm项目。](https://github.com/jsuereth/scala-arm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-17T16:32:59.740

开始`Scala 2.13`，链接操作[`tap`](https://www.scala-lang.org/files/archive/api/2.13.x/scala/util/ChainingOps.html#tap[U](f:A=%3EU):A)可用于对任何值*应用副作用*（在本例中为清除 A），*同时返回原始值 untouched*：

> def tap[U](f: (A) => U): A

* * *

```
import util.chaining._

// class A { def cleanUp { println("clean up") } ; def calculateImportantThings = 23 }
// val a = new A
val x = a.calculateImportantThings.tap(_ => a.cleanUp)
// clean up
// x: Int = 23 
```

在这种情况下`tap`有点滥用，因为我们甚至不使用它应用于 ( `a.calculateImportantThings`( `23`)) 的值来执行副作用 ( `a.cleanUp`)。

# ruby-on-rails - 预期响应为 <:success>，但为 <302>

> ID：11391818
> 
> 赞同：1
> 
> 时间：2012-07-09T08:53:47.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在关注“使用 Rails 进行敏捷 Web 开发”一书。我有个问题。这是我`new`在`order`控制器中的方法：

```
def new
  @cart = current_cart
  if @cart.line_items.empty?
    redirect_to store_url, notice: "Your cart is empty"
    return
  end

  @order = Order.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @order }
  end
end 
```

这是测试：

```
test "should get new" do
  cart = Cart.create
  session[:cart_id] = cart.id
  li = LineItem.create(product: products(:ruby))
  li.cart = cart

  get :new
  assert_response :success
end 
```

显示`rake test`失败：

```
Expected response to be a <:success>, but was <302> 
```

我用rails命令行检查了它，如下所示：

```
cart = Cart.create
=> #<Cart id: 24, created_at: "2012-07-09 08:39:36", updated_at: "2012-07-09 08:39:36">

products = Product.create(:title => "Lorem Ipsum", :description => "Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem", :price => 49.50, :image_url => "ruby.png")
=> #<Product id: nil, title: "Lorem Ipsum", description: "Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem", image_url: "ruby.png", price: #<BigDecimal:434f108,'0.495E2',18(45)>, created_at: nil, updated_at: nil>

li = LineItem.create(product: products)
=> #<LineItem id: 106, product_id: nil, cart_id: nil, created_at: "2012-07-09 08:41:29", updated_at: "2012-07-09 08:41:29", quantity: 1, price: nil, order_id: nil>

li.cart = cart
=> #<Cart id: 24, created_at: "2012-07-09 08:39:36", updated_at: "2012-07-09 08:39:36"> 
```

`li.cart`显示相应的`cart`，但`cart.line_items`为空。这两个模型（carts 和 line_items）彼此相关。为什么是`cart.line_items`空的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:37:37.183

`save`将您的列表项分配给购物车后。

```
test "should get new" do
  cart = Cart.create
  session[:cart_id] = cart.id
  li = LineItem.create(product: products(:ruby))
  li.cart = cart

  li.save! // Do this and make sure it doesn't raise an exception.

  get :new
  assert_response :success
end 
```

仅分配不会在数据库中注册更改，因此`@cart.line_items`将保持为空。因此，在您的控制器中，if 检查将重定向。302 代码用于重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T09:17:17.043

或者只使用 write_attribute 或 update_attribute

```
li.write_attribute :cart, cart 
```

# .net - 如何处理 .net 泄露的 3rd 方库？

> ID：11391820
> 
> 赞同：0
> 
> 时间：2012-07-09T08:53:52.237
> 
> 标签：.net, pinvoke

我有以下情况：

我正在使用第三方 .net 库，它调用非托管代码来做它需要的事情（.net 的东西只是一个瘦包装器）。该库具有各种 IDisposable 实现等，我将其包装在 usings 中，但它仍然像我想的那样泄漏内存，错误，筛子（我已经能够在单元测试中最终证明这一点）。

理想情况下，当然我会让第三方修复他们的图书馆，但他们没有响应，遗憾的是，我也不能放弃它，所以我目前正在做的是......

*我使用这个第三方库所做的工作可以很容易地封装，所以在我需要它的地方，我启动一个带有几个命令行参数的进程并捕获标准输出。该过程完成它需要做的事情并通过简单地将结果对象序列化到标准输出来返回结果对象，然后启动该过程的启动应用程序中的方法反序列化结果对象并返回它，就好像没有发生任何奇怪的事情一样。*

显然，这一切都很棘手（命令行参数解析、序列化等都增加了复杂性并减慢了速度）但它的优点是它非常简单并且可以工作（谢天谢地，您甚至可以使用 CreateNoWindow 关闭窗口，这样用户应用程序也没有注意到任何不愉快的事情）。

我想到的其他方法：

*   卸载应用程序池等等，但由于泄漏的内存是在.net 之外分配的，我认为这可能无济于事，还是会这样？
*   我还考虑过尝试卸载 DLL，但它看起来有点危险——我可以安全可靠地执行此操作吗？

所以，我的问题基本上归结为......

**有没有办法让我保持一切都在进行中，并以某种方式清理这个第三方库的底部，这样我就不会泄漏内存？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:09:22.590

> ...我想它仍然像一个错误的筛子一样泄漏内存（我已经能够在单元测试中最终证明这一点）。

我假设答案是“不”，但我不得不问 - 在正常使用期间它是否有可能“泄漏”内存，但在“关闭”时足够聪明地清理它？我至少遇到过一些库，它们的内部缓存似乎以无限的方式增长，但在调用库的终止例程时会被清理掉。

假设泄漏真的只是错误，那么......

> ...我需要它的地方我启动一个带有几个命令行参数的进程并捕获标准输出

...考虑到情况的参数，我认为您的方法是最合理的方法。实际上，您托管的是您不“信任”的代码——可能不是出于安全原因，而是出于性能/可靠性原因。

> 卸载应用程序池等等，但由于泄漏的内存是在.net 之外分配的，我认为这可能无济于事，还是会这样？

正确 - 这无济于事。

> 我还考虑过尝试卸载 DLL，但它看起来有点危险——我可以安全可靠地执行此操作吗？

那很可能解决不了问题。如果代码如您所说的那样有问题，那么在卸载时清理分配的资源很可能不会很好。（而且系统也不会为它清理它的资源——如果它分配了一个资源而不释放它，那么该资源将有效地泄漏。）

在这种情况下，您真的无能为力。我能想到的唯一最后的选择是尝试挂钩/拦截第 3 方库的例程，以某种方式强制其所有分配到一个可以一次性释放的池中（在释放库之后）。**但你真的不应该尝试这样做。** 这是非常危险的，几乎可以肯定不值得付出努力，很难正确实施，等等。

# c# - 检查树形结构中的每个节点，Umbraco（提高效率）

> ID：11391823
> 
> 赞同：0
> 
> 时间：2012-07-09T08:54:04.420
> 
> 标签：c#, algorithm, foreach, umbraco

我正在编写一些 C#(.NET) 来使用 Umbraco 4.7 将文章导入博客。简而言之，该算法旨在循环遍历每篇现有文章，并检查它是否与我们试图从 XML 中提取的新文章具有相同的 ID。该算法工作正常，但我不禁认为拥有四个 foreach 循环对于我正在做的事情非常低效。

```
foreach (Document yearNode in node.Children) //News > Years
{
    foreach (Document monthNode in yearNode.Children) //Years > Months
    {
        foreach (Document dayNode in monthNode.Children) //Months > Days
        {
            foreach (Document newsItem in dayNode.Children) //Days > Articles
            {
                // If there isn't an ID match, go ahead and create a new article node.         
            } 
```

这是没有主要功能的基本算法，只是 foreach 循环。它比简单地循环浏览日历日期要复杂一些，因为它更多的是包含特定节点的文件夹结构。任何人都可以提出一种简化这一点的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:26:39.297

使用通过 获取所有文章节点的想法，您可以使用与[此 GetDescendants 扩展方法](https://stackoverflow.com/a/8360342/1110395)`DocumentType`等效的方法来遍历特定文档类型的节点。

该方法是专门为 NodeFactory 的`Node`类编写的，但可以很容易地为`Document`. 要使用扩展方法，您需要创建一个新类并将其设为静态。例子：

```
using System;
using System.Collections.Generic;
using umbraco.cms.businesslogic.web;

namespace Example
{
    static class Extensions
    {
        public static IEnumerable<Document> GetDescendants(this Document document)
        {
            foreach (Document child in document.Children)
            {
                yield return child;

                foreach (Document grandChild in child.GetDescendants())
                {
                    yield return grandChild;
                }
            }
            yield break;
        }
    }
} 
```

然后在我们的上下文中使用该方法：

```
var myDocuments = new Document(folderId)
    .GetDescendants()
    .Cast<Document>()
    .Where(d => d.ContentType.Alias == "myDocumentType");

if (myDocuments.Any(d => d.Id == myId))
{
    ...
} 
```

*注意：我不知道为什么，但似乎`.OfType<Document>()`or`.Cast<Document>()`之后是必需的`.GetDescendants()`。（**见下面的编辑**）*

使用 NodeFactory 会更有效，`Node`因为`Document`NodeFactory 从 XML 缓存中提取它的信息，并且不会每次都调用数据库`Document`。使用 NodeFactory 的唯一缺点是它只包含那些已发布的节点，但通常您无论如何都只想使用这些节点。请参阅[节点和文档之间的区别](http://our.umbraco.org/wiki/reference/api-cheatsheet/difference-between-node-and-document)。

**编辑：**在做了一些修改之后，我发现它`Document`已经包含一个`GetDescendants()`方法并且返回一个`IEnumerable`，这就是为什么我们必须做`.Cast<Document>()`. 因此，如果您选择仍然使用`Document`. 否则，如果您仍想使用上述扩展方法，则需要将其重命名为其他名称。

# javascript - document.documentElement 的任何跨浏览器问题

> ID：11391827
> 
> 赞同：24
> 
> 时间：2012-07-09T08:54:31.147
> 
> 标签：javascript, cross-browser

如果我使用 document.documentElement 有任何跨浏览器问题吗？

目标浏览器是

*   火狐
*   IE浏览器
*   歌剧
*   苹果浏览器
*   安卓
*   iOS
*   黑莓

提前谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-09T09:00:00.120

你应该没有问题： [http ://www.quirksmode.org/dom/w3c_core.html](http://www.quirksmode.org/dom/w3c_core.html)

无论如何，这里有一个测试页面： [http ://www.quirksmode.org/dom/tests/document.html#documentElement](http://www.quirksmode.org/dom/tests/document.html#documentElement)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T08:57:46.057

[怪癖模式](http://www.quirksmode.org/mobile/viewports.html)说

`document.documentElement.clientWidth/Height`

*   **含义**：视口尺寸以 CSS 像素为单位测量
*   **浏览器错误**：无

[http://duckduckgo.com/?q=!%20document.documentElement%20site%3Aquirksmode.org](http://duckduckgo.com/?q=!%20document.documentElement%20site%3Aquirksmode.org)

# android - 我的 NFC 应用程序自动停止

> ID：11391828
> 
> 赞同：1
> 
> 时间：2012-07-09T08:54:35.950
> 
> 标签：android, android-intent, nfc

我是android应用程序开发的初学者。目前我正在尝试创建一个应用程序，该应用程序将在感应到 NFC 标签后启动，然后它将读取标签并在文本视图中显示消息。似乎存在一些问题导致我的程序意外停止。

这是我的java文件：

```
public class Reader extends Activity {

TextView mText;
NfcAdapter mAdapter;
PendingIntent mPendingIntent;
IntentFilter mFilters[];
String mTechLists[][];

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_reader);

    mText = (TextView) findViewById(R.id.text);

    mAdapter = NfcAdapter.getDefaultAdapter(this);
    mPendingIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);

    IntentFilter ndef = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
    try{
        ndef.addDataType("text/plain");
    }catch(MalformedMimeTypeException e){
        throw new RuntimeException("fail", e);
    }

    IntentFilter nt = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
    mFilters = new IntentFilter[]{
            ndef, nt
    };

    mTechLists = new String[][]{
            new String[]{
                    Ndef.class.getName()
            }
    };
    Intent intent = getIntent();
    mText.setText(getNdefMessages(intent));
}

public String getNdefMessages(Intent intent){
    NdefMessage[] msgs = null;
    String action = intent.getAction();
    if(NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)){
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        if(rawMsgs != null){
            msgs = new NdefMessage[rawMsgs.length];
            for(int i=0; i<rawMsgs.length; i++){
                msgs[i] = (NdefMessage) rawMsgs[i];
            }
        }else{
            byte[] empty = new byte[]{};
            NdefRecord record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, empty, empty);
            NdefMessage msg = new NdefMessage(new NdefRecord[]{record});
            msgs = new NdefMessage[]{msg};
        }

    }
    else {
        finish();
    }
    return msgs.toString();
}

@Override
public void onResume(){
    super.onResume();
    mAdapter.enableForegroundDispatch(this, mPendingIntent, mFilters, mTechLists);
}

@Override
public void onPause(){
    super.onPause();
    mAdapter.disableForegroundDispatch(this);
}

@Override
public void onNewIntent(Intent intent){
    Log.i("Foreground dispatch", "Discovered tag with intent:" + intent);
    mText = (TextView) findViewById(R.id.text);
    mText.setText(getNdefMessages(intent));
}

} 
```

下面是 AndroidManifest 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="android.reader"
android:versionCode="1"
android:versionName="1.0">

<uses-sdk 
    android:minSdkVersion="10" 
    android:targetSdkVersion="15" />

<uses-permission 
    android:name="android.permission.NFC"/>

<uses-feature 
    android:name="android.hardware.nfc"
    android:required="true"/>

<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme"
    android:debuggable="true">
    <activity 
        android:name=".Reader"
        android:label="@string/title_activity_reader">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
            <data 
                android:scheme="http"
                android:host="developer.android.com"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.TAG_DISCOVERED"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
    </activity>

</application>

</manifest> 
```

我用来测试的标签包含一个 url 记录。谁能帮帮我？

# eclipse - 如何在 Eclipse RCP 应用程序中的视图选项卡旁边的透视图中添加按钮？

> ID：11391829
> 
> 赞同：0
> 
> 时间：2012-07-09T08:54:35.753
> 
> 标签：eclipse, eclipse-rcp

我得到了一个带有很多视图的透视图（顶部的选项卡，如包资源管理器选项卡）。我希望将按钮放在选项卡旁边，如附图中所示。我怎样才能做到这一点？

![在此处输入图像描述](../Images/a667612ad4c7699021c9c699a7834954.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:04:15.480

我不完全理解你的问题，因为我可以用两种不同的方式解释它。我试图解决这两个问题。

在这两种情况下，您都应该指定命令（有关详细信息，请参阅相应的[vogella.de 教程](http://www.vogella.com/articles/EclipseCommands/article.html)）。

1.  如果你想在视图标题旁边放一个按钮，你需要做两件事：
    1.  您必须定位和调整视图的大小，以便在标题旁边留出一些空间 - 如果没有可用空间，按钮将显示在标题下方的工具栏中。
    2.  您必须向工具栏添加命令：«viewid» 菜单位置
2.  如果要在透视切换器旁边添加命令，则要使用的菜单 ID 是工具栏：org.eclipse.ui.trim.command2。我从 Mylyn ui 项目（org.eclipse.mylyn.tasks.ui 项目）中得到了这个。

# iphone - -[MyClassName copyWithZone:] 无法识别的选择器发送到实例

> ID：11391835
> 
> 赞同：56
> 
> 时间：2012-07-09T08:55:03.987
> 
> 标签：iphone, objective-c, class, crash, copy

我的应用程序崩溃的原因是：

> -[MyClassName copyWithZone:] 无法识别的选择器发送到实例

我有两节课。假设 Class1 和 Class2。

Class1 看起来像：

### Class1.h

```
@interface Class1 : NSObject {
    NSString *imagemd5CheckSum;
    UIImage *image;
    NSData *fileChunkData;
}

@property (nonatomic, copy)NSString *imagemd5CheckSum;
@property (nonatomic, copy)UIImage *image;
@property (nonatomic, copy)NSData *fileChunkData;

@end 
```

### Class1.m

```
@implementation Class1

@synthesize image;
@synthesize fileChunkData;
@synthesize imagemd5CheckSum;

-(id) init{
    [self setImage:nil];
    [self setFileChunkData:nil];
    [self setImagemd5CheckSum:@""];

    return self;
}

-(void)dealloc{
    [imagemd5CheckSum release];
    [image release];
    [fileChunkData release];

    fileChunkData = nil;
    imagemd5CheckSum = nil;
    image = nil;

    [super dealloc];
}
@end 
```

**

> Class2 看起来像

**

### 类2.h

* * *

```
#import "Class2.h"
@interface Class2 : NSObject {
    Class1 *obj1;
    Class1 *obj2;
    Class1 *obj3;
}

@property (nonatomic, copy)Class1 *obj1;
@property (nonatomic, copy)Class1 *obj2;
@property (nonatomic, copy)Class1 *obj3;

@end 
```

### Class2.m

* * *

```
@implementation Class2

@synthesize obj1,obj2,obj3;

-(id) init{
    [self setObj1:nil];
    [self setObj2:nil];
    [self setObj3:nil];

    return self;
}

-(void)dealloc{
    [obj1 release];
    [obj2 release];
    [obj3 release];

    obj1 = nil;
    obj2 = nil;
    obj3 = nil;

    [super dealloc];
}
@end 
```

### 坠机情况

```
Class2 *class2 = [[Class2 alloc] init];

Class1 *class1 = [[Class1 alloc] init];

[class1 setImagemd5CheckSum:@"this is md5"];
[class1 setImage:myimage];
[class1 setFileChunkData:myData];

[class2 setObj1:class1]; // This line is crashed.. 
```

...

当我打电话`[class2 setObj1:class1];`时，应用程序崩溃的原因是：

> -[Class1 copyWithZone:] 无法识别的选择器发送到实例

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-09T09:01:49.760

您的`-setObj1:`方法被声明为`copy`，因此它调用`-copy`您的`Class1`对象。`-copy`只是打电话`-copyWithZone:nil`。因此，您要么需要实现`NSCopying`协议（这意味着实现`-copyWithZone:`），要么将您的属性从 更改`copy`为`retain`。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-07-09T09:06:21.587

为了让您的班级响应`copyWithZone:`，您必须在班级中实现`NSCopying`协议。而且您必须覆盖该`copyWithZone:`方法。

例如：

首先，您必须在接口声明中实现 NSCopying 协议。

```
@interface MyObject : NSObject <NSCopying> 
```

然后覆盖该`copyWithZone`方法，例如，

```
- (id)copyWithZone:(NSZone *)zone
{
    id copy = [[[self class] alloc] init];

    if (copy)
    {
        // Copy NSObject subclasses
        [copy setVendorID:[[self.vendorID copyWithZone:zone] autorelease]];
        [copy setAvailableCars:[[self.availableCars copyWithZone:zone] autorelease]];

        // Set primitives
        [copy setAtAirport:self.atAirport];
    }

    return copy;
} 
```

如果这对您有帮助，我很高兴。

（[参考](https://stackoverflow.com/questions/4089238/implementing-nscopying)）

# ruby-on-rails - 有没有好的 ruby (on rails) 编辑器？

> ID：11391837
> 
> 赞同：3
> 
> 时间：2012-07-09T08:55:15.180
> 
> 标签：ruby-on-rails, ruby, editor

我试图找到一个同样好的编辑器来编程 ruby​​，比如 java 的 eclipse（看图），它显示了许多不同的东西（错误标志、对象的方法列表、快速修复、代码突出显示等）。至少easyeclipse of ruby​​没有这样的功能。认识这样的编辑吗？

万事如意：伊沃斯 ![java的日食](../Images/3c105053221579c9c68beb54dd080295.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:11:35.437

尝试使用 RubyMine。

它是 ruby​​ 的最佳编辑器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T09:08:55.970

我强烈建议不要依赖 IDE 来编写正确的代码。输入这些类和方法必须在你的肌肉记忆中。与 java 或其他语言不同，ruby 在方法命名方面实际上非常直观——我经常发现自己在输入方法名称时甚至不知道它们存在并且一切都按预期工作。

只需给自己一个快速且舒适的文本编辑器，它可以让您在文件或符号定义之间跳转，并且具有强大的项目范围搜索功能——这就足够了。

我个人推荐[http://www.sublimetext.com/2](http://www.sublimetext.com/2)但是你们很多人真的很喜欢 vim - 它有一个陡峭的学习曲线，但是如果你付出足够的努力学习，你会惊奇地发现你可以多快它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T09:13:43.370

我使用 VIM 和[Astrails](https://github.com/astrails/dotvim)的 Dotvim。

拥有开发 Rails 应用程序时能想到的所有功能。

使用 VIM 的最大好处是，如果您发现自己在远程服务器上编辑文件，您会感到宾至如归，因为每个 linux 安装都包含 vim。我承认它有它的学习曲线，但一旦你追求它，你就不会后悔你的决定。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T09:14:20.160

目前[最流行的 Rails 文本编辑器](http://gopollgo.com/what-is-your-primary-text-editor-for-ruby-slash-rails)是 TextMate 和 Sublime Text 2。基本上你可以使用任何文本编辑器，因为你不需要编译任何东西，如果你喜欢，即使 Emacs 或 VIM 也可以。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-09T09:24:38.610

我强烈推荐[Sublime](http://www.sublimetext.com/)。几天前我才开始使用它，我发现它非常棒。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-09T09:00:13.807

Aptana Studio 3 (http://www.aptana.com/products/studio3) 非常适合我。它在 GUI 中集成了 git、许多 Rails 任务和控制台，让开发变得非常舒适。试试看

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-09T08:57:35.670

这应该可以帮助您 [https://stackoverflow.com/questions/91445/best-ide-for-ruby-on-rails](https://stackoverflow.com/questions/91445/best-ide-for-ruby-on-rails)

我认为它建议使用 NetBeans - 我也同意

# python - 用python整理HTML

> ID：11391841
> 
> 赞同：2
> 
> 时间：2012-07-09T08:55:26.153
> 
> 标签：python, html, htmltidy

我正在处理格式错误的 html 页面，因此需要进行一些清理。[http://validator.w3.org/](http://validator.w3.org/) Tidy 函数产生我想要的精确输出。但是，我想将 HTML 文件作为更大 Python 脚本的一部分进行清理。我试过了：

```
from tidylib import tidy_document
tidy, errors = tidy_document(html) 
```

但是，虽然 tidylib 工作正常，但输出并不像 w3 那样“漂亮”。我还找到[了 w3c 标记验证服务库](https://bitbucket.org/nmb10/py_w3c)，但我没有找到清理 HTML 的方法。我的问题是：使用 Python 脚本（可能称为外部程序/Web 解决方案）清理 HTML 的最佳方式是什么——由 w3 生成的最佳输出方式。我是否应该在 tidylib 中使用其他选项，库中是否有适合 w3c 标记验证服务的方法，或者我应该尝试其他方法。指针/代码片段非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:03:59.160

您可以通过设置整洁的选项`tidylib.BASE_OPTIONS`

[PyTidy 示例](http://countergram.com/open-source/pytidylib/docs/index.html#small-example-of-use)

[整洁的选项快速参考](http://tidy.sourceforge.net/docs/quickref.html)

# glassfish - 是否有 jms 消息过期的事件侦听器？

> ID：11391842
> 
> 赞同：1
> 
> 时间：2012-07-09T08:55:29.013
> 
> 标签：glassfish, jms

我目前正在使用 glassfish 的默认代理处理 jms 消息。示例我有一个 queueA。

queueA，将收到 2 种类型的响应：

1.) 正常响应 - 意味着服务立即回复，没有任何问题，

2.) 过期响应 - 2 天后服务回复。

在 queueA 上，我有一个 jms 接收器，它在 5 分钟后超时，所以在那之后没有人会收到消息，它会在 30 秒后超时。问题是，当这个事件发生时我可以抛出一个事件，以便我可以处理延迟的响应吗？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T05:33:34.157

不幸的是，我发现当这个事件发生时，glassfish 不会抛出任何消息过期操作。我的解决方法是使用 2 个同步和异步队列，它们将被同步读取，如果消息已经消失，则写入异步队列。

SenderA 写入 AsynchronousQueueA SenderA 开始读取 SynchronousQueueResponseS（持续 n 秒） ReceiverA 从 SenderA 接收消息到 AsynchronousQueueA ReceiverA 如果失败则向 SynchronousQueueResponseS 写入回复，然后向 AsynchronousQueueResponseA 写入回复。

请注意，监听 SynchronousQueueResponseS 的线程将在 n 秒后过期，如果过期，回复将被写入 AsynchronousQueueResponseA。这是队列过期事件侦听器的解决方案。

# ruby-on-rails - 从 delay_job 开始

> ID：11391843
> 
> 赞同：1
> 
> 时间：2012-07-09T08:55:29.543
> 
> 标签：ruby-on-rails, delayed-job

我有一项任务需要每 10 分钟重复一次。我想使用`delayed_job`，但我找不到如何正确使用它来解决我的问题的教程。例如

```
 class A
   def print
     p Time.now
   end
 end 
```

我应该把这门课放在哪里？那么我应该在哪里调用这个方法（`print`），所以它每 10 分钟重复一次？它不依赖于用户，不依赖于数据库中的条目。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:58:27.760

您的目标要求更多类似[https://github.com/javan/whenever](https://github.com/javan/whenever)的东西，它基本上是基于 UNIX 系统中 crontab 文件的生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T13:30:53.760

如果您希望节省资源，我会避免任何时候（即使用 rails ；因为您已使用 rails 标记了您的问题）

每当你需要做某事时加载整个 Rails 环境。如果您正在运行一个简单的 ruby​​ 脚本，它会很有用。

[rufus-scheduler](https://github.com/jmettraux/rufus-scheduler)是要使用的 gem。

```
# config/initializers/chrons.rb

require 'rufus-scheduler'

scheduler = Rufus::Scheduler.new

scheduler.every '3m' do
  p Time.now  
end 
```

如果您有一项需要很长时间才能处理的工作（即发送电子邮件、处理图像等），那么这就是您需要delayed_job 的时候。

有一个著名的 gem，[delayed_job_active_record](https://github.com/collectiveidea/delayed_job_active_record)可以帮助解决这个问题，或者我最近编写的一个 gem， [delayed_job_active_record_threaded](https://github.com/zxiest/delayed_job_active_record_threaded)，它使用线程而不是进程。这允许更快的处理，更少的资源使用和数据库命中。

# javascript - 什么是 JavaScript 中的 NativeArray？它与普通数组有什么不同？

> ID：11391847
> 
> 赞同：-1
> 
> 时间：2012-07-09T08:55:42.887
> 
> 标签：javascript

只是碰巧在 JavaScript 中遇到了一种名为“NativeArray”的类型。不确定该类型是什么以及它与普通数组有什么不同？什么时候使用这种类型？

请帮忙

-纳扬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:15:38.720

这不是暴露的 javascript 类型，而是[Mozilla 的 rhino](http://www.mozilla.org/rhino/)中用于实现 javascript 本机（因此正常）数组的类。您可能会在其他 javascript 引擎实现中找到类似命名的类型。

所以 ：

*   它与本机数组并没有真正的不同（取决于“不同”的含义）

*   用 javascript 编码时，你不应该有这种全神贯注

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:34:24.907

`javascript`除了原`native array`生 javascript（普通）数组之外，没有这样一个特殊的东西/数组。

> `javascript`数组中唯一的不同是它`javascript`不像 `have associative array`许多其他语言那样。

因此，`javascript`您可以通过多种方式分配数组：

```
var myCars=new Array(); // a blank array
myCars[0]="Ferrari";
myCars[1]="BMW"; 
```

或者

```
var myCars=new Array('Ferrari', 'BMW'); // alert(myCars[0]); // Ferrari 
```

或者

```
var myCars=[]; // a blank array
myCars[0]="Ferrari";
myCars[1]="BMW"; 
```

或者

```
var myCars=['Ferrari', 'BMW']; // alert(myCars[0]); // Ferrari 
```

# html - css3 动画工件

> ID：11391848
> 
> 赞同：8
> 
> 时间：2012-07-09T08:55:43.413
> 
> 标签：html, css, webkit

**我对css3 动画**有一些奇怪的问题。

我有`css3 transformation`应用的块元素。当使用**-webkit-transform 矩阵进行转换**时，元素看起来非常平滑。但是当我尝试使用**-webkit-keyframes**应用动画时，字体和其他一些 div 在动画期间看起来很糟糕。

样本可以在这里找到：[http ://shuma.ru/animation.html](http://shuma.ru/animation.html)

可以在“webkit browsers Safari / Chrome”等中看到问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T09:15:26.243

对于这个问题，你可以在你的 CSS 上写这个。

```
body{
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
} 
```

& 为 safari 定义这个：

```
-webkit-transform:translate3d(0,0,0); 
```

在动画元素 CSS 中查看更多

# java - 使用原始类型作为通用对象

> ID：11391853
> 
> 赞同：0
> 
> 时间：2012-07-09T08:55:57.573
> 
> 标签：java, arrays, generics, primitive-types

我有一种从数组中检索元素的方法，我想对几种原始类型（int[]、double[]、...）使用相同的方法。方法如下：

```
public static int[] getElementsFromTo(int[] data,int from, int to){
    int[] selectedData = new int[to-from];
    for (int idx = from; idx < to; idx++){
        selectedData[idx-from]=data[idx];
    }
    return selectedData;
} 
```

我看过一些类似问题的帖子，但我找不到一个好的答案，或者至少理解它。最接近的响应是在这个线程[Java Generic Primitive type nd array](https://stackoverflow.com/questions/3767168/java-generic-primitive-type-n-d-array)中。

有些人建议使用 Object[] 然后在运行时获取原始类型，但我不知道如何。我猜该方法的签名看起来类似于：

```
public static Object[] getElementsFromTo(Object[] data,int from, int to) 
```

但是如何获取*data*的类型以使用正确的原始类型实例化*selectedElements数组？*

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T09:04:29.587

您可以实现的最接近的是使用以下内容

```
@SuppressWarnings("unchecked")
public static <A> A copyOf(A array, int from, int to) {
    int len = to - from;
    A a = (A) Array.newInstance(array.getClass().getComponentType(), len);
    System.arraycopy(array, from, a, 0, len);
    return a;
} 
```

这将复制原始和非原始数组类型的数组，但使用反射来完成。

# jqgrid - jqGrid内联编辑和数据保存到clientArray，为什么getGridParam('data')没有更新？

> ID：11391857
> 
> 赞同：1
> 
> 时间：2012-07-09T08:56:12.173
> 
> 标签：jqgrid, inline-editing

我只是 jqGrid 的新手，使用 jqGrid 创建一些客户端页面来呈现和编辑数据（数据类型：'local'）。我使用内联编辑模式和 cellsubmit:'clientArray'。我可以编辑字段并单击 enter 退出编辑模式。

我想通过以下方式检索 UI 网格上的数据：

```
var obj = $("#myGrid").jqGrid('getGridParam','data'); 
```

不幸的是，变量（一个数组）没有随着我的更改而更新。

但是，根据[这里](http://www.trirand.com/blog/?page_id=393/bugs/data-parameter-are-not-modified-during-inline-editing/)的信息，如果我调用 getRowData(rowId)，我可以成功获取更新的数据。它是一个错误吗？或者我应该调用其他方法来提交数据，以便我可以通过第一行代码检索它？

这是带有代码的[jsfiddle 。](http://jsfiddle.net/vbEuS/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:55:35.387

在 JSFiddle 的代码中，为什么要使用

var selRow = $("#grid").jqGrid('getGridParam', 'selrow');

看[jqgrid方法](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)

如果您需要获取所选行的 ID，请使用

$('#grid1').jqGrid('getGridParam', 'selrow') ; // only..declare selRow as 1 on your code after lastSel..like

```
var lastSel = -1; 
```

var mydata = [];

变量 selRow=1;

并像您使用的那样获取行数据，

var rowData = $("#grid1").jqGrid('getRowData', rowid); //这里的rowid：是数据源上设置的id值，不是行的索引。这将返回一个具有列名和值的对象，例如：{name="teddy", address="here and there", age=34} 并使用获取值

var myName = rowData.name;

对象只会在 colModel 上配置列。可能出现在数据源上的所有内容都不会出现在这里。[有关此的更多信息-如果您希望在此处具有不想在网格上显示的值，则必须将该列添加到 colModel 集合并将其设置为 hidden: true ]

希望能帮助到你..

# wcf-data-services - WCF DataServices 服务操作参数 - 字符替换

> ID：11391860
> 
> 赞同：2
> 
> 时间：2012-07-09T08:56:49.180
> 
> 标签：wcf-data-services, silverlight-5.0, service-operations

我有一个非常奇怪的问题（使用 SL5，WCF DataServices 5.0.1）：我有一个带有 2 个字符串参数（用户名、密码）的 ServiceOperation，它检查用户是否存在

```
public IQueryable<User> Login(string username, string password)
{...} 
```

当我尝试调用它时，一切工作正常，除了密码哈希中包含“+”字符的情况。在这种情况下，它似乎被替换为空格字符：

```
var pwd = CRQWKrKzCcQVnlhk2zl0j5QM+c5ujQGMv0XXnh4genI=
this.Context.BeginExecute<User>(new Uri(string.Format("/Login?username='{0}'&password='{1}'", username, pwd), UriKind.Relative), (ar) => { .. }, null); 
```

如果我用 Fiddler 抓住它，Request-Header 对我来说似乎没问题......

```
GET /Service.svc/Login?username='xyz'&password='CRQWKrKzCcQVnlhk2zl0j5QM+c5ujQGMv0XXnh4genI=' HTTP/1.1 
```

但是在 WebForms-Tab 中，Password-QueryString 已经有一个空格而不是“+”。如果我在服务器上调试它，结果相同......

你们中有人知道为什么要替换“+”吗？是否还有其他无效字符？我怎样才能避免这种情况？

**更新/编辑：**

令人惊讶的是，以下查询按预期工作：

```
var query = (DataServiceQuery<User>) from c in this.Context.Users
                                             where
                                                 c.Username.Equals(username.ToLower()) &&
                                                 c.Password.Equals(Cryptography.ComputeSha256Hash(password + username.ToLower())) 
                                             select c; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:35:09.510

URL 的查询字符串部分需要正确编码。对 WCF DS 客户端 LINQ 提供程序（例如`context.Users.Where(...)`）的调用由客户端堆栈自动编码。调用`context.Execute`不以这种方式修改 URL，因此那里的值需要由其他代码编码。

在 Visual Studio 中尝试此操作以查看差异：

```
using System;
using System.Data.Services.Client;
using System.Linq;

namespace Scratch
{
    public class Program
    {
        public static void Main()
        {
            var context = new DataServiceContext(new Uri("http://services.odata.org/OData/OData.svc/"));
            var query1 = context.CreateQuery<Category>("Categories").Where(c => c.Name == "abcd+efgh=ijlk");
            var query2 = context.Execute<Category>(new Uri("http://services.odata.org/OData/OData.svc/Categories()?$filter=Name eq 'abcd+efgh=ijlk'"));
            Console.WriteLine("context.Categories.Where(...): {0}", query1.ToString());
            Console.WriteLine("context.Execute<Category>(...): {0}", ((QueryOperationResponse)query2).Query.ToString());
        }
    }

    public class Category
    {
        public int ID { get; set; }
        public string Name { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:24:58.963

感谢马克斯塔福德的提示。我现在有一个解决这个问题的方法：

```
var pwd = Uri.EscapeDataString(Cryptography.ComputeSha256Hash(password + username.ToLower())); 
```

查询现在看起来像这样：

```
/GET Service.svc/Login?username='xyz'&password='CRQWKrKzCcQVnlhk2zl0j5QM%252Bc5ujQGMv0XXnh4genI%253D' 
```

在服务器上，等效的 unsecaping：

```
var pwd = Uri.UnescapeDataString(password); 
```

请参阅[http://www.codebadger.com/blog/post/2010/08/10/Use-EscapeUriString-instead-of-UrlEncode-for-Silverlight.aspx](http://www.codebadger.com/blog/post/2010/08/10/Use-EscapeUriString-instead-of-UrlEncode-for-Silverlight.aspx)

# ios - iPhone App 测试：如何获得全新安装？

> ID：11391863
> 
> 赞同：5
> 
> 时间：2012-07-09T08:57:21.443
> 
> 标签：ios

在测试我正在开发的 iPhone 应用程序时，我可以采取某些步骤来引发错误，例如，即使我要终止应用程序并再次加载它，也会导致应用程序在加载时或在其他某个时间点持续崩溃。

我假设为了重置导致崩溃的这种内部不稳定状态，我可以简单地重新安装应用程序。但是，重新安装后问题仍然存在，只能通过安装更新​​的版本来解决。

我只能假设某些应用程序数据正在被保留和重复使用，即使它正在被删除和重新安装（来自 IPA）。

有没有办法防止这种情况发生？例如，进行某种“全新安装”？

编辑：如果我重新安装并重新启动手机，那么问题就解决了。这是否特别指出了应用程序代码的任何问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:30:41.543

要在 iOS 模拟器中删除有关应用程序的任何存储数据，请按照下列步骤操作：

1）打开模拟器（无论你打开哪个应用程序，只要模拟器是打开的）
2）点击屏幕左上角的“iOS模拟器”。
3) 按“重置内容和设置...”（**警告**：这将删除 iOS 模拟器上的所有内容，包括已安装的应用程序、设置和存储的数据）。
4）在iOS模拟器中重新安装应用，这次应该是全新安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:40:47.800

根据持久数据的来源，您始终可以转到 iPhone Simulator 根文件夹并删除那里的应用程序数据。这样您就不必从模拟器中删除所有内容。

该文件夹已隐藏，因此您可能需要取消隐藏文件夹才能看到它。

/Users/yourName/Library/Application Support/iPhone 模拟器

下次运行应用程序时，它将是全新安装。

# java - 在 cassandra 中使用 TTL 指定列过期

> ID：11391864
> 
> 赞同：0
> 
> 时间：2012-07-09T08:57:22.937
> 
> 标签：java, jdbc, cassandra, cql

当我插入带有 TTL 列过期的值时，它给了我一些意想不到的输出

```
public static void setTTL()
    {
        try
        {
            Class.forName("org.apache.cassandra.cql.jdbc.CassandraDriver");
            Connection con = DriverManager.getConnection("jdbc:cassandra://192.168.1.32/temp");
            String qry = "INSERT INTO userscql3(user_name,password)VALUES('yogesh','temp@123') USING TTL 5";
            Statement smt = con.createStatement();
            smt.executeUpdate(qry);
            System.out.println(" TTL has been set");
        }
        catch(Exception e)
        {
            System.out.println(" : " + e.getMessage());
            e.printStackTrace();
        }
    } 
```

在追踪它之后我得到了什么

```
Caused by: UnavailableException()
    at org.apache.cassandra.thrift.Cassandra$execute_cql_query_result.read(Cassandra.java:33485)
    at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_execute_cql_query(Cassandra.java:1402)
    at org.apache.cassandra.thrift.Cassandra$Client.execute_cql_query(Cassandra.java:1388)
    at org.apache.cassandra.cql.jdbc.CassandraConnection.execute(CassandraConnection.java:392)
    at org.apache.cassandra.cql.jdbc.CassandraConnection.execute(CassandraConnection.java:416)
    at org.apache.cassandra.cql.jdbc.CassandraStatement.doExecute(CassandraStatement.java:161)
    ... 3 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:59:06.700

没有回溯就很难响应。但是您似乎在本地主机之外的另一台服务器中使用 Cassandra。是否配置了 Cassandra 的监听地址？默认情况下，它仅在 localhost 上侦听。

*编辑*

在`cassandra.yaml`您必须更改`listen_address`and `rpc_address`。仅对于测试用例，您可以使用：`0.0.0.0`

如果您`UnavailableException`在[Cassandra API](http://wiki.apache.org/cassandra/API)中检查，您可以阅读：

> **UnavailableException** 并非所有需要的副本都可以创建和/或读取。

可能是您正在使用一致性`ALL`，并且您的一个节点已关闭或类似的东西。

# javascript - $.post 和 $.ajax POST 完美但不是简单的帖子

> ID：11391866
> 
> 赞同：0
> 
> 时间：2012-07-09T08:57:31.173
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

大家好，我在没有ajax的情况下在jquery中以post格式发送数据时遇到了问题。我的网址为：

```
intranetUrl+"customer/Ri_logon5.asp?requestString="; 
```

并要发送的参数是：

```
'manish|^info1234|^|^X|^11111985|^1.0|^|$'; 
```

我用ajax试了一下：

```
function handleLogin()
{

var form = $("#loginForm");    
 var u = $("#username", form).val();
var p = $("#password", form).val();
var d = $("#dob", form).val();

if(u != '' && p!= '')
{

    var finalStr = u+encodeURIComponent("|^")+p+encodeURIComponent("|^")+encodeURIComponent("|^")+"X"+encodeURIComponent("|^")+d+encodeURIComponent("|^")+"1.0"+encodeURIComponent("|^|$");
    var encodedURL = encodeURI(intranetUrl+"customer/Ri_logon5.asp?requestString=");
    var parameters =  decodeURIComponent(finalStr);
    alert("param:"+parameters);

    $.post(encodedURL, parameters ,
            function(data) {
              alert("Data Loaded: " + data);
            });

}

else
{

    alert("You must enter a username and password", function() {});
    $("#submitButton").removeAttr("disabled");
} 
```

}

在这里我得到了正确的结果。

当我将其用作：

```
function handleLogin()
{

var form = $("#loginForm");    
 var u = $("#username", form).val();
var p = $("#password", form).val();
var d = $("#dob", form).val();

if(u != '' && p!= '')
{

    var finalStr = u+encodeURIComponent("|^")+p+encodeURIComponent("|^")+encodeURIComponent("|^")+"X"+encodeURIComponent("|^")+d+encodeURIComponent("|^")+"1.0"+encodeURIComponent("|^|$");
    var encodedURL = encodeURI(intranetUrl+"customer/Ri_logon5.asp?requestString=");
    var parameters =  decodeURIComponent(finalStr);
    alert("param:"+parameters);

 $.ajax({
        type: "POST",
        contentType:"application/x-www-form-urlencoded; charset=UTF-8",
        url: encodedURL,
        data: parameters
      }).done(function(msg)
              {
                  response  = msg
                  console.log("repon s???????????????e::>::"+response);
          });

}

else
{

    alert("You must enter a username and password", function() {});
    $("#submitButton").removeAttr("disabled");
}

} 
```

在这里我也得到了正确的结果，但是当我使用以下没有 ajax 的 post 方法时，我没有得到预期的结果：

```
function handleLogin()
{

var form = $("#loginForm");    
 var u = $("#username", form).val();
var p = $("#password", form).val();
var d = $("#dob", form).val();

if(u != '' && p!= '')
{

    var finalStr = u+encodeURIComponent("|^")+p+encodeURIComponent("|^")+encodeURIComponent("|^")+"X"+encodeURIComponent("|^")+d+encodeURIComponent("|^")+"1.0"+encodeURIComponent("|^|$");
    var encodedURL = encodeURI(intranetUrl+"customer/Ri_logon5.asp?requestString=");
    var parameters =  decodeURIComponent(finalStr);
    alert("param:"+parameters);
    post_to_url(intranetUrl+"customer/Ri_logon5.asp", finalStr); 

}

else
{

    alert("You must enter a username and password", function() {});
    $("#submitButton").removeAttr("disabled");
}

}

function post_to_url(url, params) {
var form = document.createElement('form');
form.action = url;
form.method = 'POST';

var postParam = encodeURIComponent(params);

var input = document.createElement('input');
input.type = 'hidden';
input.name = 'requestString=';
input.value = postParam;
document.body.appendChild(input);
form.appendChild(input);  
form.submit();

} 
```

但是使用最后一个代码我没有得到想要的输出。这有什么问题？任何建议将不胜感激。

现在我检查了哪个服务器得到了输出，它得到了它：

```
requestString%3D=manish%25257C%25255Einfo1234%25257C..... 
```

表示特殊字符没有很好地编码/解码。但是我已经在上面对它们进行了编码，那么有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:03:16.367

第三种方式的一些问题：

*   您不应将整个 URI 设置为操作，而应仅设置`intranetUrl+"customer/Ri_logon5.asp"`

*   您不应将输入字段的值设置为 URIEncoded 字符串。离开表单提交做编码。

*   它离开页面，因为这是正常的行为`form.submit();`

*   您应该在提交之前将表单添加到页面：`document.body.appendChild(form);`

前两点意味着你应该调用你的函数

```
var finalStr = u+encodeURIComponent("|^")+p+encodeURIComponent("|^")+encodeURIComponent("|^")+"X"+encodeURIComponent("|^")+d+encodeURIComponent("|^")+"1.0"+encodeURIComponent("|^|$");
post_to_url(intranetUrl+"customer/Ri_logon5.asp", finalStr); 
```

# c - sscanf 写入字符数组

> ID：11391870
> 
> 赞同：0
> 
> 时间：2012-07-09T08:57:48.763
> 
> 标签：c, scanf

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    char buffer[40000]= "3 Hello World";
    int idvalue;
    char buf[4000];
    sscanf(buffer,"%d %s%s",&idvalue,buf);
    printf("%d->%s\n",idvalue,buf);
    return 0;
} 
```

在这段代码中，我有一个变量缓冲区，它始终是“整数其余部分”类型。我想将该变量的内容复制到两个新变量`idvalue`和`buf`. `idvalue`将包含该整数，`buf`并将包含可以包含空格、整数、字符串等的其余部分。现在写入`idvalue`被正确复制，但如果`buf`值在空格后终止。告诉我一种将其余部分复制到单个字符串中的方法`buf`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:07:13.463

尝试使用格式说明符`%[^\n]`而不是`%s`.

这将告诉`sscanf`读取和存储任何字符，直到换行符 ( `\n`) 进入 buff：

```
sscanf(buffer, "%d%[^\n]", &idvalue, buf); 
```

对于其他应用程序，您可以添加到 内部的字符`[]`，例如，如果您想在到达换行符*或*制表符后停止阅读：`[^\n\t]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:07:17.027

这是一个替换 sscanf 行，应该可以解决您的问题。

```
 sscanf(buffer,"%d %[^\n]",&idvalue,buf); 
```

# php - 对象初始化以“！”开头

> ID：11391872
> 
> 赞同：3
> 
> 时间：2012-07-09T08:57:50.730
> 
> 标签：php

我刚刚找到
`!$foo = new Bar($var, $var2);`
了部分 PHP 代码。什么 ”！” 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:02:33.943

这 ！在这个例子中只是一个否定和无用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:07:12.070

没什么特别的意思。我认为有一个错字。

考虑以下代码：

```
$foo = new Bar($var, $var1);
var_dump(!$foo);        // bool(false)
var_dump($foo == true); // bool(true) 
```

*   将对象转换为布尔值将始终导致`true`.
*   将一个对象与另一个没有对象的对象进行比较`===`总是会导致`true`.

因此，对赋值左侧的对象使用否定在这里没有任何效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:18:41.487

在这种情况下，它绝对没有任何意义。

`!`是“逻辑非”运算符，它将计算结果转换`TRUE`为`FALSE`，反之亦然。它在 PHP 中没有其他特殊含义。

它仅作为布尔测试或作业的一部分才真正有意义，例如：

```
$false = FALSE;
if (!$false) {
  // This code will be executed
}

$true = !$false;
// $true will now be TRUE 
```

在您的示例中使用的上下文中，实例化一个对象[只会做以下两件事之一是](http://www.php.net/manual/en/language.oop5.basic.php#language.oop5.basic.new)没有意义的：

1.  返回一个对象 - 每个对象的每个实例都将`TRUE`在布尔测试中评估为，但有一个例外：空`SimpleXMLElement`。
2.  抛出异常。在这种情况下，新实例将被分配到的变量仍将具有以前的值（可能评估为假），但执行将立即离开当前过程，因此永远不会评估测试。

# freemarker - 在 Magnolia 4.5.3 中使用 cusom ftl 文件继承阶段

> ID：11391873
> 
> 赞同：0
> 
> 时间：2012-07-09T08:57:51.490
> 
> 标签：freemarker, magnolia

我正在尝试为阶段编写一个 freemarker 模板，该模板检查是否为此页面定义了一个阶段，如果没有，则尝试从其父页面继承该阶段。标准继承（就像它是默认的，例如页脚）对我不起作用，因为如果需要，用户仍然应该能够为子页面定义不同的阶段。

我已经有一个在 Magnolia 4.4 中工作的模板，但是由于模板 API 的各种变化，这在 4.5 中不可用。所以我尝试将其调整为 4.5：我正在使用 cmsfn.inherit() 函数查找父内容，然后访问该内容的阶段，但我不断收到错误（说它没有指定）。

我的模板：

```
<div id="stage" style="color: white;">
  [#if content??]
    [@cms.component content=content /]
  [#else]
    [#assign inheritedContent = cmsfn.inherit(cmsfn.content(state.mainContent.@handle)) /]
      [#if cmsfn.isEditMode()]
        Inherited content: ${inheritedContent}
      [/#if]
      [@cms.component content=inheritedContent.stage /]
  [/#if]
</div><!-- end stage --> 
```

错误信息：

```
The 'content' parameter was passed but not or wrongly specified. The problematic instruction:
----------
==> user-directive cms.component [on line 17, column 17 in ***/pages/home/inheritStage.ftl] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:51:25.670

也许我回答得太晚了，但如果其他人发现这一点：在 magnolia cms 4.5 中继承内容的方式发生了一些变化 - 现在使用原型配置做了一些不同的事情：

在您的作者实例中，转到模板工具包->站点配置，然后转到模板->原型->区域->您的区域并添加一个名为“继承”的新内容节点并为其创建节点数据。

节点数据：

components - 这可以是“all”（所有组件都被继承）、“filtered”（继承属性设置为 true 的所有组件都被继承）或“none”（不言自明）启用 - 不言自明

另外，如果您决定继承“过滤”组件，请不要忘记向相关组件添加继承对话框选项

如果您想查看一个工作示例，请查看“附加”原型。

# php - 如何使用php在框架中传递参数

> ID：11391874
> 
> 赞同：0
> 
> 时间：2012-07-09T08:57:53.263
> 
> 标签：php, parameters, parameter-passing, frame

我想将参数传递给框架中的 php 文件，但我该怎么做。目前我已经尝试过这种方法（我不确定这种方法）通过将`id`值传递给 frame2.php 来将参数传递给 frame2.php

```
<frameset cols = "25%, *">
  <frame src ="frame1.php" />
  <frame id="<?php echo "$pid"; ?>" src ="frame2.php" />
</frameset> 
```

在`frame2.php`我尝试使用此方法调用该 ID

```
<?php
$pid=$_GET['id']; //also tried $_POST['id'];
echo "$pid";
<--other php codes-->
?> 
```

但它不工作......你能告诉我为什么它不工作或我可以使用什么其他方法来传递参数

高级感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:02:29.590

通过查看您的代码，我可以建议您使用以下代码。

```
<frameset cols = "25%, *">
  <frame src ="frame1.php" />
  <frame id="<?php echo "$pid"; ?>" src ="frame2.php?id="<?php echo "$pid"; ?>" />
</frameset> 
```

在服务器端你可以像这样得到它

```
<?php
$pid=$_GET['id']; //also you can try $_REQUEST['id'];
echo "$pid";
<--other php codes-->
?> 
```

# apache-flex - 将 Flash Builder 4.5 移动应用程序 VGroup 背景颜色设置为黑色

> ID：11391878
> 
> 赞同：1
> 
> 时间：2012-07-09T08:58:00.703
> 
> 标签：apache-flex, air, flex4.5, flex-mobile, flash-builder4.5

我正在 Flash Builder 4.5 中创建一个虚拟移动应用程序。在应用程序代码中，我使用 VGroup，并且在朗姆酒时间添加和删除元素。现在我想将 VGroup 背景颜色设置为黑色。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T09:12:20.090

你不能： VGroup 是一个布局容器。它不包含图形元素。
阅读有关布局容器的答案以获取更多信息：[将布局添加到 Flex UIComponent](https://stackoverflow.com/questions/11309683/add-layout-to-flex-uicomponent/11309848#11309848)

如果您不想触摸 VGroup，最简单的问题解决方案是这样的：

```
<s:Group>
    <s:Rect left="0" right="0" top="0" bottom="0">
        <s:fill>
            <s:SolidColor color="0x000000" />
        </s:fill>
    </s:Rect>

    <s:VGroup left="0" right="0" top="0" bottom="0">
        <!--content goes here-->
    </s:VGroup>
</s:Group> 
```

但你也可以使用[BorderContainer](http://help.adobe.com/en_US/flex/using/WS03d33b8076db57b9466e6a52123e854e5d5-8000.html)代替：

```
<s:BorderContainer backgroundColor="black">
    <s:layout>
        <s:VerticalLayout />
    </s:layout>

    <!--content goes here-->
</s:BorderContainer> 
```

# iphone - cocos2d iOS中的Sprite Sheet动画

> ID：11391885
> 
> 赞同：1
> 
> 时间：2012-07-09T08:58:25.560
> 
> 标签：iphone, cocos2d-iphone

我有一个包含飞龙姿势的精灵表，我已经成功地将它集成到我的项目中，它在我的屏幕上飞得很好。我编写了通过 x 和 y 轴随机移动龙的代码，但是当龙随机将位置改变为向后时，它并没有向后翻转，这意味着当龙向后移动时，它的脸仍然在后面。当它转动屏幕时，我需要翻转龙。

此代码是随机移动到 x 和 y 轴的代码。

```
-(void)moveRandom:(CCSprite*)s
{
    CGPoint randomPoint = ccp(arc4random()%2000, arc4random()%500);
    NSLog(@"%@", NSStringFromCGPoint(randomPoint));

    [s runAction:
     [CCSequence actions:
      [CCMoveTo actionWithDuration:arc4random()%5+1 position: randomPoint],
      [CCCallBlock actionWithBlock:^{
         [self performSelector:@selector(moveRandom:) withObject:s afterDelay:0.5];
     }],
      nil]
     ];
} 
```

以下代码在init方法中

```
 [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile: @"dr.plist"];
  CCSpriteBatchNode *parrotSheet = [CCSpriteBatchNode batchNodeWithFile:@"dr.png"];
  [self addChild:parrotSheet];
  NSMutableArray *flyAnimFrames = [NSMutableArray array];

    for(int i = 1; i <= 6; ++i) {

        [flyAnimFrames addObject:

         [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:

          [NSString stringWithFormat:@"dragon%d.png", i]]];

    }

[self moveRandom:theParrot];

    CCAction *flyAction = [CCRepeatForever actionWithAction:

                           [CCAnimate actionWithAnimation:flyAnim restoreOriginalFrame:NO]];

    //start the action

    [theParrot runAction:flyAction];

    //add the sprite to the CCSpriteBatchNode object

    [parrotSheet addChild:theParrot]; 
```

如何解决这个问题。？...

我有另一个示例应用程序，它将翻转图像并在屏幕上进行触摸。当我们触摸屏幕左侧时，图像将向左转并移动该方向。我需要像这样，但没有联系，自动想要转动图像。

代码是

```
-(id) init {
    if((self = [super init])) {

        // This loads an image of the same name (but ending in png), and goes through the
        // plist to add definitions of each frame to the cache.
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"AnimBear.plist"];        

        // Create a sprite sheet with the Happy Bear images
        CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"AnimBear.png"];
        [self addChild:spriteSheet];

        // Load up the frames of our animation
        NSMutableArray *walkAnimFrames = [NSMutableArray array];
        for(int i = 1; i <= 8; ++i) {
            [walkAnimFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"bear%d.png", i]]];
        }
        CCAnimation *walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:0.1f];

        // Create a sprite for our bear
        CGSize winSize = [CCDirector sharedDirector].winSize;
        self.bear = [CCSprite spriteWithSpriteFrameName:@"bear1.png"];        
        _bear.position = ccp(winSize.width/2, winSize.height/2);
        self.walkAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];
       //[_bear runAction:_walkAction];
        [spriteSheet addChild:_bear];

        self.isTouchEnabled = YES;

    }
    return self;
}

-(void) registerWithTouchDispatcher
{
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];
}

-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
    return YES;
}

-(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event {    
    CGPoint touchLocation = [touch locationInView: [touch view]];       
    touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];
    touchLocation = [self convertToNodeSpace:touchLocation];

    float bearVelocity = 480.0/3.0;
    CGPoint moveDifference = ccpSub(touchLocation, _bear.position);
    float distanceToMove = ccpLength(moveDifference);
    float moveDuration = distanceToMove / bearVelocity;

    if (moveDifference.x < 0) {
        _bear.flipX = NO;
    } else {
        _bear.flipX = YES;
    }    

    [_bear stopAction:_moveAction];

    if (!_moving) {
        [_bear runAction:_walkAction];
    }

    self.moveAction = [CCSequence actions:                          
                   [CCMoveTo actionWithDuration:moveDuration position:touchLocation],
                   [CCCallFunc actionWithTarget:self selector:@selector(bearMoveEnded)],
                   nil
                   ];

    [_bear runAction:_moveAction];   
    _moving = TRUE;
} 

-(void)bearMoveEnded {
    [_bear stopAction:_walkAction];
    _moving = FALSE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:24:49.827

这与您展示的示例代码的想法完全相同。

每当你生成一个新的随机位置让你的龙飞到时，你需要检查它是在你当前龙位置的左边还是右边，然后通过设置*flipX*属性相应地翻转龙精灵以面向那个方向：

```
-(void)moveRandom:(CCSprite*)s 
{ 
    CGPoint randomPoint = ccp(arc4random()%2000, arc4random()%500); 
    NSLog(@"%@", NSStringFromCGPoint(randomPoint));
    CGPoint moveDifference = ccpSub(randomPoint, s.position);   
    if (moveDifference.x < 0) 
    {            
       s.flipX = NO;        
    } 
    else 
    {           
       s.flipX = YES;        
    }

    // the rest of your code...
} 
```

# r - 防止模拟被操作系统杀死

> ID：11391890
> 
> 赞同：-2
> 
> 时间：2012-07-09T08:58:36.373
> 
> 标签：r, simulation

这不是家庭作业，只是我的学习练习。我一直在 R 中运行一个非常简单的模拟（或数字曲柄）。它生成两个数字（A，B）并运行 1 个月。

```
A=NULL
B=NULL
x=NULL
x <- Sys.time()
duration <-  2592000 # 30 days
while(Sys.time() <= x + duration){
A <-append(A, sample(1:5, 1000, 1/5))
B <-append(B, sample(1:5, 1000, 1/5))
save.image()
} 
```

我认为它进展顺利，但一周后（产生了数百万个数字），操作系统终止了该进程。**有没有更好的方法来编写或运行模拟来防止操作系统杀死它？**

我宁愿重写模拟而不是适应操作系统（例如添加更多交换等）。我在低功率设备（Raspberry Pi）上运行模拟，并且在硬件方面我能做的事情有限。谢谢。

更新：
1）一次生成1000个样本*并不重要。*这只是我的一团糟。
2)重要的**是**模拟运行一段时间，即 1 周、1 个月或 1 年。
3）除非不可能，否则我想要原始数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:03:38.883

如果目标是创建两个大样本，请考虑以下事项：

```
N <- 2000000
A <- sample(1:5, N, 1/5)
B <- sample(1:5, N, 1/5)
save.image() 
```

如果对于 A 和 B 一次形成 1000 个样本很重要，请考虑以下问题：

```
N <- 2000
n <- 1000
A.list <- vector("list", N)
B.list <- vector("list", N)
for (i in 1:N) {
   A.list[[i]] <- sample(1:5, n, 1/5) 
   B.list[[i]] <- sample(1:5, n, 1/5)
}
A <- unlist(A.list)
B <- unlist(B.list)
save.image() 
```

这应该解决代码中的两个主要问题：

*   每次`append`在循环中使用时，R 都必须从头开始创建和填充几个新对象。随着对象变大，你的循环迭代变得越来越慢；我相信计算时间是二次增长的。您还冒着内存空间碎片化的风险，这很难解释，但您可以尝试研究它。通过使用列表，只需将每次迭代的新数据存储到内存中，并且每次循环的计算时间保持不变。
*   我已将 save.image() 移出循环。同样的想法，随着对象变得越来越大而保存对象将花费越来越长的时间，即减慢您的迭代速度。由于您只关心最终向量，因此仅在完成后保存才有意义。

您可以使用 的值`N`来查看您的操作系统会让您走多远。优点是您不必等待一周或一个月来找出限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:00:24.883

如果您考虑将结果打印在纸上作为可接受的解决方案，那么 Roman Luštrik 将数据附加到文本文件或数据库的解决方案（在您的问题的评论中）绝对是一个很好的解决方案。

这是附加到文本文件的样子：

```
x <- Sys.time()
duration <-  2592000
while(Sys.time() <= x + duration){
    write.table(sample(1:5, 1000, 1/5),file="A.txt",append=TRUE,row.names=FALSE,col.names=FALSE,sep="\t")
    write.table(sample(1:5, 1000, 1/5),file="B.txt",append=TRUE,row.names=FALSE,col.names=FALSE,sep="\t")
} 
```

# javascript - form.submit 触发 onsubmit 但不提交

> ID：11391893
> 
> 赞同：0
> 
> 时间：2012-07-09T08:58:43.370
> 
> 标签：javascript, jquery, html

表格

```
<form onsubmit="OnSubmitForm();" action="<?php echo base_url(); ?>" method="post" autocomplete="off" name="register_form" id="register_form"> 
```

提交按钮

```
<input id="register_submit" name="submit" class="medium" type="submit" value="Submit" onclick="document.pressed=this.value"/> 
```

提交链接

```
<a href="javascript: Submit();">full registration</a> 
```

Javascript/jQuery

```
function OnSubmitForm()
{
  if(document.pressed == 'Full registration')
  {
      alert('full');
    document.register_form.action ="<?php echo base_url(); ?>account/register";
  }
  else
  if(document.pressed == 'Submit')
  {
      alert('light');
   document.register_form.action ="<?php echo base_url(); ?>account/register_light";
  }
}

function Submit()
{
    document.pressed = 'Full registration';

    $('#register_form').submit();
} 
```

如果单击提交按钮，则会触发“轻”警报，并且表单将按应有的方式提交到“account/register_light”。

但是，如果点击链接，则会触发“完整”警报，但不会提交表单。链接上的更多点击不会触发警报，也不会提交表单。

如果在单击链接后单击提交按钮，则表单将提交到“帐户/注册”（无警报）。Whitch 是我希望链接提交表单的地方，而不是提交按钮通常提交表单的地方。

为什么 .submit() 不提交表单？我在这里很困惑，对正在发生的事情的任何见解都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:41:30.020

我第一次回答时误读了你的问题。

无论如何，您的表单没有被提交，或者至少不是您期望的方式的原因是，据我所知，`onsubmit`除非用户调用提交，否则浏览器不会触发该方法。使用`.submit()`不会导致它着火。

一种解决方法（希望这应该有效）是将您的提交功能更改为以下内容。

```
function Submit()
{
    document.pressed = 'Full registration';
    OnSubmitForm();
    $('#register_form').submit();
} 
```

我也不确定设置`document.pressed`，你可能无法做到这一点。如果没有，那么您总是可以将参数传递给 OnSubmitForm 函数。

# sql - 有没有办法让 sql LIKE 语句像那样工作？

> ID：11391894
> 
> 赞同：1
> 
> 时间：2012-07-09T08:58:52.760
> 
> 标签：sql, sql-server-2008, unicode

我是新来的。我正在使用 SQL Server 2008。我对该`LIKE`语句有疑问。

例如：我有这样的声明：

```
WHERE CONTRACTORNAME LIKE N'%aeu od%' 
```

我希望输出将包含`CONTRACTORNAME is "ấệư ôđ"`.

所以，基本上，我想输入英文字符并搜索 Unicode 字符。

有什么办法可以做到这一点？非常感谢。！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:09:54.003

您需要将`COLLATE`修饰符与重音不敏感排序规则一起使用，即：

```
 WHERE CONTRACTORNAME COLLATE Latin1_General_CI_AI LIKE N'%aeu od%' 
```

# mysql - 如何显示一个表中每条记录被其他表使用的次数

> ID：11391897
> 
> 赞同：0
> 
> 时间：2012-07-09T08:58:57.423
> 
> 标签：mysql

我的查询有问题，下面是**tbl_tag**和**tbl_tag_usedby**的两个表。我想显示 tbl_tag_usedby 中的记录使用了多少**tbl_tag**中**的**每条记录。

 **![在此处输入图像描述](../Images/f8d6a7841e1c7c9bfe0ebb4c7ea7c33b.png)

这是我使用的查询：

```
SELECT t.*, COUNT(u.tagid) AS totale FROM tbl_tag t LEFT JOIN tbl_tag_usedby u ON u.tagid = t.id AND t.status =1 GROUP BY u.tagid 
```

结果如下：

![在此处输入图像描述](../Images/b293bdb5465c74ac7e486bd335f5b5c4.png)

在这种情况下，从 2 到 6 的记录 id 不会出现在查询结果中，我希望从 2 到 6 的记录 id 也显示在“totale”字段上，其值为 0。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:04:17.120

尝试这个：

```
SELECT t.*, COUNT(t.id) AS totale FROM tbl_tag t LEFT JOIN tbl_tag_usedby u ON u.tagid = t.id AND t.status =1 GROUP BY t.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:10:22.620

尝试这个：：

```
SELECT 
t.*, COUNT(t.id) AS totale 

FROM tbl_tag t 

LEFT JOIN tbl_tag_usedby u ON u.tagid = t.id
where t.status =1 
GROUP BY t.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:11:44.937

您需要使用连接两个表`LEFT JOIN`

```
SELECT a.id,
       a.name,
       COUNT(t.id) AS totale
FROM    tbl_tag a 
           LEFT JOIN tbl_tag_usedby b 
              ON b.tagid = a.id
WHERE  a.status = 1 
GROUP BY a.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T07:54:30.900

轻微更正：这对我来说非常适合替换`COUNT(t.id)`为`COUNT(u.id)`

```
SELECT t.*, COUNT(u.id) AS totale  
FROM tbl_tag t 
     LEFT JOIN tbl_tag_usedby u ON u.tagid = t.id
where t.status =1 
GROUP BY t.id 
```**

# c# - 访问公共静态方法时出错

> ID：11391899
> 
> 赞同：-1
> 
> 时间：2012-07-09T08:59:05.407
> 
> 标签：c#, .net

我的应用程序中引用了一个 .Net dll。在我的 C# 代码中访问它的一个名为 XYZ 的方法时，我收到一个错误：

> 尝试通过方法“MyClass.ABC()”访问方法“OtherClass.XYZ()”失败。

当我在 VS.Net 中看到元数据时，我看到它仅将此方法 XYZ 显示为公共静态。请问我在这里会缺少什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:07:03.740

您需要使用类名来调用它。例如

```
public static class MyClass
{
  public static void MyMethod()
  { // Do something
  }
} 
```

调用时需要使用

```
MyClass.MyMethod(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T08:49:43.223

我遇到了同样的问题 - 这就是我的情况：

1.  我有一个程序集 my.dll 定义 `internal static void Foo();`
2.  my.dll 定义`[assembly:InternalsVisibleTo("unittests")]`

3.  我有一个调用 Foo() 的测试程序集 unittests.dll。

4.  我有 test.localtestsettings 并部署了 my.dll 和 unittests.dll。

通过一些胡说八道，testsettings 文件正在部署一个陈旧版本的 a.dll，它没有 AttributeInternalsVisibleTo。

这使我处于代码通过编译时检查但在运行时抛出 MethodAccessException 的位置。在我的情况下，原因是从程序集中调用了一个内部方法，它不应该对其可见。这是一种我不喜欢调试的安全异常。祝你好运。

# xcode - UIScreen 屏幕总是返回 1 个屏幕

> ID：11391902
> 
> 赞同：2
> 
> 时间：2012-07-09T08:59:24.880
> 
> 标签：xcode, mirroring, ipad-2, airplay

我正在尝试在没有镜像模式的情况下使用 Airplay 在 Apple TV 上显示图片。但是当镜像关闭时，[UIScreen 屏幕] 方法总是返回 1 个屏幕（主屏幕）。我希望我的图片显示与照片应用程序相同（不带镜像的 Airplay）。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(screenDidConnect:) name:UIScreenDidConnectNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(screenDidDisconnect:) name:UIScreenDidDisconnectNotification object:nil]; 
```

我使用了它们，但它们仅在镜像打开时才起作用。

请帮我。非常感谢！我正在使用 Apple TV1 和 iPad 2 (iOS 5.0.1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T19:37:32.283

嗯，确实有点误导。您应该按以下步骤进行：

*   Airplay 镜像选项应该打开
*   然后，您创建一个新的`UIWindow`并将其附加到第二个屏幕
*   一旦您将 makeKeyAndVisible 发送到这个 new `UIWindow`，它就会覆盖镜像并显示新内容。
*   您可以在应用程序的主要部分添加视图或根视图控制器

这是代码：

```
UIScreen *secondScreen = [[UIScreen screens] objectAtIndex:1];
self.secondWindow = [[UIWindow alloc] initWithFrame:secondScreen.bounds];
[self.secondWindow setScreen:secondScreen];
[self.secondWindow setBackgroundColor:[UIColor greenColor]];
[self.secondWindow makeKeyAndVisible]; 
```

# asp.net-mvc - ASP.NET Mvc3 Jquery 对话框验证摘要错误显示？

> ID：11391915
> 
> 赞同：0
> 
> 时间：2012-07-09T09:00:27.373
> 
> 标签：asp.net-mvc, jquery-ui, validationsummary

对话内容

```
<div id="div_dialog_container" class="dialog_container">
@using (Html.BeginForm((string)ViewBag.FormAction, "Musteri"))
{
    <div id="div_iu_form_container" class="ui_form_container">
        <div>@Html.ValidationSummary(true, "Müşteri Kaydı Başarısız! Lütfen Bilgileri Kontrol Ediniz.")
        </div>
        <table>
            <thead>
                <tr>
                    <th colspan="2">Genel Bilgiler</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>@Html.LabelFor(x => x.musteri_no):</td>
                    <td>@Html.TextBoxFor(x => x.musteri_no)
                        @Html.ValidationMessageFor(x => x.musteri_no)</td>
                </tr>
                <tr>
                    <td>@Html.LabelFor(x => x.musteri_adi):</td>
                    <td>@Html.TextBoxFor(x => x.musteri_adi)
                        @Html.ValidationMessageFor(x => x.musteri_adi)</td>
                </tr>
                <tr>
                    <td>@Html.LabelFor(x => x.sektor):</td>
                    <td>@Html.TextBoxFor(x => x.sektor)
                        @Html.ValidationMessageFor(x => x.sektor)</td>
                </tr>
            </tbody>
            <tfoot></tfoot>
        </table> 
```

控制器

```
[HttpPost]
    public JsonResult JsonMusteriDuzenle(TblMusteriler musteri, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            try
            {
                mus_dbo.update_musteri(musteri);
                return Json(new { success = true, redirect = returnUrl });
            }
            catch (Exception e)
            {
                ModelState.AddModelError("", "Müşteri güncelleme hatası.");
            }
        }

        return Json(new { errors = GetErrorsFromModelState() });
    } 
```

我想显示文本框的错误按钮。但它显示在顶部，如下所示：

![在此处输入图像描述](../Images/4a311921754fcffc30f016cd378e9386.png)

如何显示每个文本框自己的错误？

我要这个：

![在此处输入图像描述](../Images/3dbf52a92c33b110f5a25d69225aaa03.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:44:29.397

在这两种情况下，您都从控制器操作返回 JSON。您不能期望显示任何错误。如果您希望显示错误，您应该返回包含表单的部分视图：

```
[HttpPost]
public ActionResult JsonMusteriDuzenle(TblMusteriler musteri, string returnUrl)
{
    if (ModelState.IsValid)
    {
        try
        {
            mus_dbo.update_musteri(musteri);
            return Json(new { success = true, redirect = returnUrl });
        }
        catch (Exception e)
        {
            ModelState.AddModelError("", "Müşteri güncelleme hatası.");
        }
    }

    return PartialView("_NameOfPartialContainingTheForm", musteri);
} 
```

然后在调用此操作的 javascript 代码中，您必须将包含表单的 div 的内容替换为新的部分：

```
success: function(result) {
    if (result.success) {
        // the controller action return JSON success
        alert('Thanks');
    } else {
        // The controller action returned a PartialView
        // So now you have to refresh the DOM if you want 
        // to see errors showing up
        $('#id_of_some_div_that_contains_the_partial').html(result);
    }  
} 
```

这假设在您的主视图中，您有一个包含 div：

```
<div id="id_of_some_div_that_contains_the_partial">
    @Html.Partial("_NameOfPartialContainingTheForm")
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:23:20.237

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

这些行在我的母版页中，我在部分页面中添加了这些行。然后它按我的预期工作。

感谢您的建议。

# perl - 如何在linux中搜索字符串并将其替换为其他字符串？

> ID：11391916
> 
> 赞同：0
> 
> 时间：2012-07-09T09:00:28.967
> 
> 标签：perl, shell, replace, grep

我想在一个目录下递归地**搜索**一个`string`并将其**替换**为另一个。`string`例如：我想搜索一个字符串

`"var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");"`

并将其**替换**为

`var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-7044592-1']);_gaq.push(['_setDomainName', 'news4u.com']);_gaq.push(['_trackPageview']);`

如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:15:40.597

用于`find`查找所有文件，并`xargs`运行`sed`以修改它们：

```
find dir -type f | xargs sed -i.bak 's#from#to#' 
```

这将找到*dir*下的所有文件并将*from*替换为*to*，备份扩展名为“.bak”的原始文件

NB *from*是一个基本的正则表达式，因此您需要对要搜索的字符串中的任何 BRE 元字符进行转义。最好在单个文件上测试 sed 命令以使其正常工作：

```
sed 's#from#to#' file > test.out 
```

这将对文件进行替换，*但*不会修改*文件*，而是将输出写入*test.out*，以便您检查结果。

# ruby-on-rails - 资产管道压缩指纹位置

> ID：11391917
> 
> 赞同：1
> 
> 时间：2012-07-09T09:00:29.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, asset-pipeline

我有一个奇怪的问题...

我成功地预编译了资产

```
rake assets:precompile 
```

然后，当我在生产环境中运行我的应用程序时，一些资产会成功提供，而另一些则失败。

我试图找出为什么有些失败。我发现那些失败的人有。（点）以他们的名义

例子：

```
http://localhost:3001/assets/jquery-1.7.1.min-92db3e9645bf381db699af5c85229722.js 
```

没有路线匹配 [GET] "/assets/jquery-1.7.1.min-92db3e9645bf381db699af5c85229722.js"

**但是**，当我尝试将**指纹位置**更改为第一个**点**之前并从浏览器打开它时，它可以工作

```
http://localhost:3001/assets/jquery-1-92db3e9645bf381db699af5c85229722.7.1.min.js 
```

所以，

```
http://localhost:3001/assets/jquery-1.7.1.min-92db3e9645bf381db699af5c85229722.js fails
http://localhost:3001/assets/jquery-1-92db3e9645bf381db699af5c85229722.7.1.min.js works 
```

有什么理由吗？

# java - 如何在 Android 项目中创建新包

> ID：11391918
> 
> 赞同：2
> 
> 时间：2012-07-09T09:00:29.627
> 
> 标签：java, android

我的 Android 应用程序项目中有太多活动，我想使用包来管理它们。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:05:37.917

如果您使用的是 Eclipse：

右键单击项目并选择 new => "package"。

![Eclipse：创建新包](../Images/92d5e00332b27bd8feabce4fb77db55d.png)

![Eclipse：新建包向导](../Images/35ce2404ad8ad445ece0175753c5d633.png)

重组后，您可能需要更新对其他类的引用。我发现 ctrl+shift+o 也可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:26:04.307

在 android 中，你有一个像 com.your.package.name 这样的包名。这是你的主包。您必须创建其他包作为它的子包。

要在清单中使用此包，请使用：“.subpackage.Activity” android os 将处理其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:03:04.187

右键单击项目中的 src 文件夹->新建->包。在此处写入包的名称->完成。您将在项目的 src 文件夹下看到您命名的包。将类文件添加到该包中。使用时您必须导入不同包的类，因为它们属于其他包，并且您还必须在清单文件中声明它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T09:11:23.517

我喜欢以单独的方式创建包。

如果您在 Eclipse 中工作，只需在顶部提及所需的包名称即可。

Eclipse 会自动为您解决问题。

![在此处输入图像描述](../Images/be7faf09b334cbaef4ac72d355f71fe6.png)

# java - Java中的LDAP密码哈希匹配

> ID：11391919
> 
> 赞同：1
> 
> 时间：2012-07-09T09:00:39.560
> 
> 标签：java, authentication, hash, passwords, ldap

我的 LDAP 数据库中有这种密码哈希：

```
userPassword:: MTIzYVBkLSY= 
```

我还在我的应用程序中缓存了用户密码哈希，因此不需要每次都输入它。鉴于此，我想检查是否存在具有指定密码的 DN。这是什么哈希算法？我可以在 Java 中生成相同类型的哈希吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:10:52.137

那不是密码哈希，这似乎是密码，以 Base64 格式编码。

如果您解码发布的字符串，您将获得密码`123aPd-&`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:08:51.510

那就是`base64`编码。[在这里试试](http://www.opinionatedgeek.com/dotnet/tools/base64encode/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:57:30.543

> 我想检查是否存在具有指定密码的 DN。

这样做的方法是`bind`使用该 DN 和密码作为凭据执行 LDAP。在 JNDI 中，这是通过`LdapContext.reconnect()`.

> 这是什么哈希算法？

没关系，你不需要知道。

# ruby-on-rails - 设计路线问题

> ID：11391922
> 
> 赞同：0
> 
> 时间：2012-07-09T09:01:08.933
> 
> 标签：ruby-on-rails, ruby, devise

我正在尝试在我的应用中采用设计

这是Routes.rb的内容

```
Blog::Application.routes.draw do
  devise_for :users

  devise_scope :user do
    get "admin/login" => "devise/sessions#new"
    delete "admin/logout" => "devise/sessions#destroy"
  end

end 
```

当我尝试访问 /admin/login 时，一切正常，但是当我尝试访问 /admin/logout 时，我得到了

```
No route matches [GET] "/admin/logout" 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:04:05.727

您当前在 URL 上使用 GET。您应该使用 DELETE。在链接中指定`:method => :delete`，这是销毁操作的正确 HTTP 动词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:07:46.497

如果您使用用户作为命名空间，那么只需通过放置 rake 路由在控制台中检查您的路由，它将为您提供完整的路由表以及方法。

# tridion - 内容交付上的智能目标互操作引用不同的程序集

> ID：11391927
> 
> 赞同：4
> 
> 时间：2012-07-09T09:01:33.190
> 
> 标签：tridion

我正在尝试使用 Tridion 2011 SP1 和 Smart Target 2010 SP1 设置新的 .NET 应用程序。到目前为止，我已经完成了网站/服务器角色/配置的所有设置，但是在浏览器中运行网站时出现以下错误

```
Could not load file or assembly 'Tridion.ContentDelivery, Version=6.0.0.481, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileLoadException: Could not load file or assembly 'Tridion.ContentDelivery, Version=6.0.0.481, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
Running under executable  c:\windows\system32\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = NT AUTHORITY\NETWORK SERVICE
LOG: DisplayName = Tridion.ContentDelivery, Version=6.0.0.481, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b
 (Fully-specified)
LOG: Appbase = file:///C:/Websites/Live/malvern.com.en/
LOG: Initial PrivatePath = C:\Websites\Live\malvern.com.en\bin 
```

# 调用程序集：Tridion.SmartTarget.Interop，Version=1.0.1.0，Culture=neutral，PublicKeyToken=ddfc895746e5ee6b。

```
 LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Websites\Live\malvern.com.en\web.config
LOG: Using host configuration file:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Post-policy reference: Tridion.ContentDelivery, Version=6.0.0.481, Culture=neutral, PublicKeyToken=ddfc895746e5ee6b
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/8694a1d7/ddf129e2/Tridion.ContentDelivery.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/8694a1d7/ddf129e2/Tridion.ContentDelivery/Tridion.ContentDelivery.DLL.
LOG: Attempting download of new URL file:///C:/Websites/Live/malvern.com.en/bin/Tridion.ContentDelivery.DLL.
WRN: Comparing the assembly name resulted in the mismatch: Minor Version
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
```

我检查了网站 bin 目录，发现它使用了 Tridion.ContentDelivery.dll (v6.1.0.348) 的引用——它用于网站的开发版本，并与智能目标一起使用。然而，使用 Fusion 日志记录和反射器 Tridion.SmartTarget.Interop.dll 试图找到 Tridion.ContentDelivery.dll v6.0.0.481 - 可从 Tridion 2011 而非 Tridion 2011 SP1 获得

我可能会在 web.config 中添加依赖项绑定来告诉应用程序新程序集在哪里，但是有人知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T09:33:40.113

已修复 - 安装基于将 SDL Tridion 2011 升级到 SP1 - 需要在 Windows GAC 中安装程序集，如下所述：

[http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=MakingCustomCodeWorkWithNewCDAssemblies.xml&docid=task_A3E701D765BB44A4AE3BFDA6A537DBFA&inner_id=&tid=&query=&scope=&resourceContent= loadDoctask_A3E701D765BB44A4AE3BFDA6A537DBFA](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=MakingCustomCodeWorkWithNewCDAssemblies.xml&docid=task_A3E701D765BB44A4AE3BFDA6A537DBFA&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDoctask_A3E701D765BB44A4AE3BFDA6A537DBFA)

# javascript - 淘汰赛 - 获得点击的元素

> ID：11391932
> 
> 赞同：35
> 
> 时间：2012-07-09T09:02:02.160
> 
> 标签：javascript, jquery, knockout.js

我有以下标记：

```
<fieldset>
   <div>
       <label class="editor-label">Question 1?</label>
       <input type="text" class="editor-field" />     
       <button type="button" data-bind="click: helpClicked">Help</button>
       <p class="help">Help 3</p>
   </div>
    <div>
       <label class="editor-label">Question 2?</label>
       <input type="text" class="editor-field" />
       <button type="button" data-bind="click: helpClicked">Help</button>
       <p class="help">Help 3</p>
   </div>
   <div>
       <label class="editor-label">Question 3?</label>
       <input type="text" class="editor-field" />
        <button type="button" data-bind="click: helpClicked">Help</button>
       <p class="help">Help 3</p>
   </div>
</fieldset> 
```

我想切换与单击按钮相同`<p>`的类的可见性。我正在尝试使用 $(this) 来确定单击了哪个按钮，然后我可以从那里获得正确的“帮助”元素。`help``Div`

问题是`$(this)`没有返回单击的按钮。

目前，我试图简单地隐藏单击的按钮，例如：

```
var viewModel = {
    helpClicked: function () {
        $(this).hide();           
    }
};

ko.applyBindings(viewModel); 
```

这行不通。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-09T09:15:47.757

这是一个带有一种可能解决方案的 jsFiddle：

[http://jsfiddle.net/unklefolk/399MF/1/](http://jsfiddle.net/unklefolk/399MF/1/)

您可以通过以下语法定位所需的 DOM 元素：

```
var viewModel = {     
    helpClicked: function (item, event) {   
        $(event.target).hide(); 
        $(event.target).next(".help").show()            
    } 
};  
ko.applyBindings(viewModel); ​ 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-09T09:05:18.527

尝试使用`event.currentTarget`后跟`next()`

```
$(event.currentTarget).next().hide(); 
```

[这里的工作示例](http://jsfiddle.net/manseuk/FRd8L/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T09:17:17.100

字段集中的那些 div 是通过 Knockout 构建的吗？（它们看起来很模板）。如果是这样，我认为一种更 MVVMish 的方法是从按钮单击处理程序中提取当前绑定的项目，并将每个帮助段落的可见性绑定到该处理程序在相应项目上设置的视图模型属性，而不是做程序化的 UI 操作。至少，这是我一直在努力的模式，并且发现它更好（尤其是在 WPF 和 Silverlight 中做了类似的事情之后）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-11T14:38:10.477

```
This should work

var viewModel = 
{
         helpClicked: function (data,element) {
       /*
      data is the current model passed to the button
      element is the button currently interacting with
     but to get the dom object equivalent of the 
     element you've to access it          
    via its currentTarget property
    */
        $(element.currentTarget).hide();           
    }
};

ko.applyBindings(viewModel); 
```

# wordpress - Wordpress：在循环之外获取作者链接？

> ID：11391934
> 
> 赞同：-2
> 
> 时间：2012-07-09T09:02:19.990
> 
> 标签：wordpress

我想要循环之外的作者页面链接？请有人告诉我 Wordpress 的功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:59:36.943

使用功能：

```
get_author_posts_url($author_id); 
```

（[文档](http://codex.wordpress.org/Function_Reference/get_author_posts_url)。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-25T10:44:16.070

使用`get_author_posts_url()`函数在循环之外获取作者链接。

```
global $post;
$author_id=$post->post_author;

echo get_author_posts_url($author_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:29:07.403

If you're just wanting a link to a specific author page, you can use **yourwebsite.com/?author=23** (this would be a link to author number 23).

You can find the author number by looking in the wordpress backend, under **users > all users**, then hovering over the one you're wanting to link to.

# linux - PCM原始数据到用户空间

> ID：11391936
> 
> 赞同：1
> 
> 时间：2012-07-09T09:02:29.727
> 
> 标签：linux, embedded-linux, pcm, alsa

我有以下设置：运行 2.6.34 内核的 imx28。SAIF 接口连接到 Cinterion 调制解调器的 PCM 输出。我想以字符驱动程序之类的方式将 PCM 原始数据导出到用户空间。您对实施有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:03:01.603

“正确的做法”大概是制作一个ALSA驱动，通过ALSA驱动访问PCM数据。然后设备显示为声音设备，PCM 数据可以被任何 ALSA 音频程序访问，例如 arecord。

优点：

*   您将标准 API 用于声音数据，因此您的设备可以被许多现有的音频工具访问。相反，您编写的用户空间程序将与其他音频设备一起使用。
*   驱动程序应提供有关 PCM 采样率和数据格式的相关详细信息，以便它可以轻松地用于音频程序。

i.MX28 ALSA 驱动程序使用 ASoC 架构。请参阅`Documentation/sound/alsa/soc`Linux 源代码中的目录。

PS：我看到你问了一个[后续问题](https://stackoverflow.com/questions/11740507/alsa-with-pcm-interface-from-modem)，表明你正朝着 ALSA ASoC 方向前进。

# android - 如何在 android gridview 中获取当前焦点项目的索引。

> ID：11391940
> 
> 赞同：0
> 
> 时间：2012-07-09T09:02:31.530
> 
> 标签：android, gridview, grid, focus

是否有任何 API 可以跟踪 Android 中 GridView 的索引？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T09:11:07.373

您是否`OnItemClickListener`为 GridView 设置了一个？

```
gridView.setOnItemClickListener(
    new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Toast.makeText(
                getApplicationContext(), 
                String.format("Clicked on position #%s (id = %s)", position, id), 
                Toast.LENGTH_SHORT
            ).show();
        }   
    }
); 
```

# macos - 设置 NSTableViewCell 编辑

> ID：11391943
> 
> 赞同：1
> 
> 时间：2012-07-09T09:02:35.673
> 
> 标签：macos, cocoa, nstableview, nstableviewcell

NSTableViewCell 包含一个 NSImageCell 和一个 NSTextFieldCell，当向 NSTableView 添加一个新单元格时，方法

```
[tableView editColumn:0 row:100 withEvent:nil select:YES]; 
```

使 NSImageCell 为编辑。我希望它专注于 NSTextFieldCell，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:05:49.213

用这个

```
[tableView editColumn:1 row:100 withEvent:nil select:YES]; 
```

我认为文本字段在 2 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:26:57.610

只需将 NSImageCell Editable 设置为 NO；

```
[imageCell setEnabled:NO];
[textFieldCell setEnabled:YES]; 
```

# php - 如何从流程文件发回数据？（例如错误）

> ID：11391947
> 
> 赞同：0
> 
> 时间：2012-07-09T09:03:05.380
> 
> 标签：php, forms, login, error-handling

我正在开发一个登录系统，我想知道如何将错误发送回表单？
我将亲自在我的项目中使用 AJAX，所以它不会成为真正的问题，但我很想知道纯 php 是如何实现的。

这是表格......在`login.php`或其他页面上：

```
<form method="post" action="proccessLogin.php">
    <label for="username">Username: </label>
    <input type="text" name="username" />
    <label for="password">Password: </label>
    <input type="password" name="password" />

    <input type="submit" name="submit" value="Go!" />
</form> 
```

`processLogin.php`：

```
<?php
    $username = $_POST['username'];
    $password = $_POST['password'];

    if(password is incorrect){
        // send error or add to an error array and then send it.
    }

    etc...
?> 
```

这只是我刚刚写的一段代码，所以它显然不完整。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:16:05.533

那么你可以去 reload_page 和 $_GET 错误消息路由。

```
// Set your error messages here
$error_messages = "?password_error=true"
header("Location: http://localhost/url_to_form.php" + $error_messages);
exit(); 
```

进入表单文件后，检查已知的错误变量

```
$error_message_list = array( "password_error" => "Incorrect password" );
foreach ($_GET as $error_name => $error_value) {
    if ( in_array( $error_name, $error_message_list ) ) {
        $error_to_display[$error_name] = $error_message_list[$error_name];
    } else {
        $error_to_display[$error_name] = "";
    }
} 
```

完成此检查后，只需将 $error_to_display[ "password_error" ] 放在 HTML 中的某个位置，如下所示`echo '<label for="password">Password: ' . $error_to_display[ "password_error" ] . '</label>';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:27:28.293

使用会话设置错误..参考下面的修改代码..

```
login.php

<?php
session_start();
?>
<form method="post" action="proccessLogin.php">
    <label for="username">Username: </label>
    <input type="text" name="username" />
    <?php if($_SESSION['u_name_error']) { echo $_SESSION['u_name_error']; unset($_SESSION['u_name_error']); }
    <label for="password">Password: </label>
    <input type="password" name="password" />
    <?php if($_SESSION['pass_error']) { echo $_SESSION['pass_error']; unset($_SESSION['pass_error']); }
    <input type="submit" name="submit" value="Go!" />
</form>

==============
proccessLogin.php
<?php
session_start();

    $username = $_POST['username'];
    $password = $_POST['password'];

    if(password is incorrect){
        // send error or add to an error array and then send it.
    }else{

        //set errors in session..
        $_SESSION['pass_error']= 'error message';
        $_SESSION['u_name_error']= 'error message';
        header("Location: login.php");
        die;
    }

?> 
```

# android - java.lang.String 无法转换为 JSON 对象

> ID：11391951
> 
> 赞同：1
> 
> 时间：2012-07-09T09:03:28.160
> 
> 标签：android, cordova

我的 Downloader.java 文件是

```
package com.phonegap.plugins.downloader;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

import com.phonegap.api.Plugin;
import com.phonegap.api.PluginResult;

public class Downloader extends Plugin {

    @Override
    public PluginResult execute(String action, JSONArray args, String callbackId) {

        if (!action.equals("downloadFile")) 
            return new PluginResult(PluginResult.Status.INVALID_ACTION);

        try {

            String fileUrl = args.getString(0);
            JSONObject params = args.getJSONObject(1);

            String fileName = params.has("fileName") ? 
                    params.getString("fileName"):
                    fileUrl.substring(fileUrl.lastIndexOf("/")+1);

            String dirName = params.has("dirName") ?
                    params.getString("dirName"):
                    "sdcard/download";

            Boolean overwrite = params.has("overwrite") ? params.getBoolean("overwrite") : false;

            return this.downloadUrl(fileUrl, dirName, fileName, overwrite, callbackId);

        } catch (JSONException e) {

            e.printStackTrace();
            return new PluginResult(PluginResult.Status.JSON_EXCEPTION, e.getMessage());

        } catch (InterruptedException e) {
            e.printStackTrace();
            return new PluginResult(PluginResult.Status.ERROR, e.getMessage());
        }

    }

    private PluginResult downloadUrl(String fileUrl, String dirName, String fileName, Boolean overwrite, String callbackId) throws InterruptedException, JSONException {

        try {

            Log.d("PhoneGapLog", "Downloading "+fileUrl + " into " + dirName + "/" + fileName);

            File dir = new File(dirName);
            if (!dir.exists()) {
                Log.d("PhoneGapLog", "directory " + dirName + " created");
                dir.mkdirs();
            }

            File file = new File(dirName, fileName);

            if (!overwrite && file.exists()) {
                Log.d("DownloaderPlugin", "File already exist");

                JSONObject obj = new JSONObject();
                obj.put("status", 1);
                obj.put("total", 0);
                obj.put("file", fileName);
                obj.put("progress", 100);

                return new PluginResult(PluginResult.Status.OK, obj);
            }

            URL url = new URL(fileUrl);
            HttpURLConnection ucon = (HttpURLConnection) url.openConnection();
            ucon.setRequestMethod("GET");
            ucon.setDoOutput(true);
            ucon.connect();

            Log.d("PhoneGapLog", "Download start");

            InputStream is = ucon.getInputStream();
            byte[] buffer = new byte[1024];
            int readed = 0, 
                progress = 0,
                totalReaded = 0,
                fileSize = ucon.getContentLength();

            FileOutputStream fos = new FileOutputStream(file);

            while ((readed = is.read(buffer)) > 0) {

                fos.write(buffer, 0, readed);
                totalReaded += readed;

                int newProgress = (int) (totalReaded*100/fileSize);             
                if (newProgress != progress)
                 progress = informProgress(fileSize, newProgress, fileName, callbackId);

            }

            fos.close();

            Log.d("PhoneGapLog", "Download finished");

            JSONObject obj = new JSONObject();
            obj.put("status", 1);
            obj.put("total", fileSize);
            obj.put("file", fileName);
            obj.put("progress", progress);

            return new PluginResult(PluginResult.Status.OK, obj);

        }
        catch (FileNotFoundException e) {
            Log.d("PhoneGapLog", "File Not Found: " + e);
            return new PluginResult(PluginResult.Status.ERROR, 404);
        }
        catch (IOException e) {
            Log.d("PhoneGapLog", "Error: " + e);
            return new PluginResult(PluginResult.Status.ERROR, e.getMessage());
        }

    }

    private int informProgress(int fileSize, int progress, String fileName, String callbackId) throws InterruptedException, JSONException {

        JSONObject obj = new JSONObject();
        obj.put("status", 0);
        obj.put("total", fileSize);
        obj.put("file", fileName);
        obj.put("progress", progress);

        PluginResult res = new PluginResult(PluginResult.Status.OK, obj);
        res.setKeepCallback(true);
        success(res, callbackId);

        //Give a chance for the progress to be sent to javascript
        Thread.sleep(100);

        return progress; 
    }

} 
```

我的 downloader.js 文件是

```
function Downloader() {}

Downloader.prototype.downloadFile = function(fileUrl,dirName,fileName,overwrite,win,fail) {

    //Make params hash optional.
    if (!fail) win = params;
    PhoneGap.exec(win, fail, "Downloader", "downloadFile", [fileUrl, dirName,fileName,overwrite]);
};

PhoneGap.addConstructor(function() {
    PhoneGap.addPlugin("downloader", new Downloader());
    PluginManager.addService("Downloader", "com.phonegap.plugins.downloader.Downloader");
}); 
```

和 main.js 文件是

```
function downloadfile() {
     window.plugins.downloader.downloadFile("c:/Users/460725/Desktop/NIACustomerPhase.pdf","sdcard/cache/","NIACustomerPhase.pdf", false,
             function(data){
             if(data=="exist"){
             alert("File already exist");
             }
             else{
             alert("File saved on sd card")
             }
             },function(data){ alert("error: "+data); });

} 
```

我已将此集成到 android phonegap 项目中。但是当我运行该项目时，我收到警报错误：Java.lang.String 类型为 1 的值 sdcard/cache/ 无法转换为 JSON 对象 谁能告诉我可能是什么问题..提前谢谢..

* * *

我已经用以前的代码替换了相同的代码，还更改了 url。现在我的 main.js 文件是

```
function downloadfile () {

    window.plugins.downloader.downloadFile("http://www.toforge.com/archive.zip","sdcard/cache/","archive.zip", false,
             function(data){
             if(data=="exist"){
             alert("File already exist");
             }
             else{
             alert("File saved on sd card");
             }
             },function(data){ alert("error: "+data); });

} 
```

现在我在单击下载文件链接时收到错误警报**无法解析主机“www.toforge.com”：没有与主机名关联的地址**有人可以帮我解决这个错误吗？提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:24:13.170

您正在从 Javascript 传递一个字符串数组，但随后尝试将其中一个值转换为 JSON，这是不可能的。

用以下替换您当前的功能将起作用：

```
Downloader.prototype.downloadFile = function(fileUrl,dirName,fileName,overwrite,win,fail) 
{
    //Make params hash optional.
    if (!fail) win = params;
    PhoneGap.exec(win, fail, "Downloader", "downloadFile", [fileUrl, {dirName: dirName,  fileName: fileName, overwrite: overwrite} ]);
}; 
```

尽管您的代码仍然无法正常工作，因为`c:/Users/460725/Desktop/NIACustomerPhase.pdf`它不是有效的 URL，但它是 Windows 的文件系统路径。

![当我更改访问来源时，我收到一个警报弹出窗口**下载错误http://www.irs.gov/pub/irs-pdf/fw4.pdf **有很多错误..我附上带有此评论的图片..你能查出为什么会出现这些错误吗？](../Images/911f3a877d66a4efddb45c6c12dc1425.png)

# css - CSS Nav - 最后一项未正确对齐

> ID：11391961
> 
> 赞同：0
> 
> 时间：2012-07-09T09:04:15.067
> 
> 标签：css, html-lists, nav

链接：[http ://danhumphrey.co.uk/nav/](http://danhumphrey.co.uk/nav/)

如您所见，如果将鼠标悬停在最后一项上，则最后一项无法正常工作，您只会得到一半的盒子。

我尝试过使用 的填充和边距，但没有`li`成功。`h2``a`

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:14:46.263

问题在于固定宽度进行一些css更改，如下所示：

```
nav {
 height: auto;
 padding: 0;
 margin: 23px auto 0;
 display: block;
 position: relative;
 text-align: center;
 line-height: 23px;
 height: 29px;

}
ul#headNav {
 padding: 0px 0 0 0;
 display: inline-block;
 background: #7F7C74;
background: -moz-linear-gradient(top, #7F7C74 0%, #94918A 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#7F7C74), color-stop(100%,#94918A));
background: -webkit-linear-gradient(top, #7F7C74 0%,#94918A 100%);
background: -o-linear-gradient(top, #7F7C74 0%,#94918A 100%);
background: -ms-linear-gradient(top, #7F7C74 0%,#94918A 100%);
background: linear-gradient(top, #7F7C74 0%,#94918A 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#7f7c74', endColorstr='#94918a',GradientType=0 );
} 
```

**注意：**我刚刚从中删除`width:960px;`并`<nav>`添加`text-align:center`到它并将所有渐变 CSS & 移动`display:inline-block;`到`#headNav`

工作小提琴：http: [//jsfiddle.net/surendraVsingh/pZkk9/1/](http://jsfiddle.net/surendraVsingh/pZkk9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:12:55.530

删除内联`style="width: 40px;"`并将此行添加到您的 css：

```
nav ul li:last-child{width: 91px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:07:41.553

您已将内联定义`Width`到最后一个 li 元素 -`width: 40px;`

宽度不是必需的，您可以将其删除，或者如果您出于某种原因需要它，然后将其增加到`width: 95px;`它会起作用。在最新的 Firefox 中测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T09:08:37.747

您的问题是您更改了灰色条前面的链接背景，但没有那么宽。你有几个选择：

*   修复菜单项的宽度并确保它们相加到正确的宽度（可能包括边框）或

*   在元素上设置所有背景`a`（这样大小自然会相同）

# javascript - 使用 JQuery 的 JSON 到数组

> ID：11391966
> 
> 赞同：0
> 
> 时间：2012-07-09T09:04:24.313
> 
> 标签：javascript, json

嗨，如何使用 JQuery 或 Javascript 解析 JSON 字符串？

我有如下格式的 JSON 字符串。

```
var JSON = "{ "UserID":"1","ClientID":"1","UserName":"User1"}" 
```

我想解析这个 JSON 字符串。这样我就可以得到

```
var UserID = 1
var ClientID = 1
UserName = User1 
```

谁能帮帮我。。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:07:17.467

首先，如果您执行那里的 JSON 变量，应该会给您一个语法错误，因为您需要转义双引号，例如：

```
var JSON = "{ \"UserID\":\"1\",\"ClientID\":\"1\",\"UserName\":\"User1\"}"; 
```

或者简单地使用单引号来创建字符串

```
var JSON = '{ "UserID":"1","ClientID":"1","UserName":"User1"}'; 
```

然后你可以使用[jQuery.parseJSON()解析它](http://api.jquery.com/jQuery.parseJSON/)

```
var obj = jQuery.parseJSON(JSON);
obj.UserID == 1; // true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:09:07.500

请注意该字符串中未转义的引号。我将外部引号更改为单引号。

```
var obj = jQuery.parseJSON('{ "UserID":"1","ClientID":"1","UserName":"User1"}')

var UserID = obj.UserID 
var ClientID = obj.ClientID
var UserName = obj.UserName 
```

# python - 如何在非唯一列中按日期对 Pandas DataFrame 条目进行分组

> ID：11391969
> 
> 赞同：95
> 
> 时间：2012-07-09T09:04:33.723
> 
> 标签：python, pandas

Pandas`DataFrame`包含名为`"date"`包含非唯一`datetime`值的列。我可以使用以下方法对该框架中的行进行分组：

```
data.groupby(data['date']) 
```

但是，这会按值拆分数据`datetime`。我想按存储在“日期”列中的年份对这些数据进行分组。[此页面](http://wesmckinney.com/blog/?p=125)显示在时间戳用作索引的情况下如何按年份分组，在我的情况下并非如此。

我如何实现这个分组？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2015-09-25T13:55:49.410

我正在使用熊猫 0.16.2。这在我的大型数据集上具有更好的性能：

```
data.groupby(data.date.dt.year) 
```

使用该`dt`选项并使用`weekofyear`等`dayofweek`变得容易得多。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-07-09T14:25:27.513

ecatmur 的解决方案可以正常工作。但是，这将在大型数据集上表现更好：

```
data.groupby(data['date'].map(lambda x: x.year)) 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2017-11-06T15:34:22.983

使用示例数据集可能更容易解释这一点。

**创建示例数据**

假设我们有一列 Timestamps，`date`而另一列我们想对其执行聚合`a`。

```
df = pd.DataFrame({'date':pd.DatetimeIndex(['2012-1-1', '2012-6-1', '2015-1-1', '2015-2-1', '2015-3-1']),
                   'a':[9,5,1,2,3]}, columns=['date', 'a'])

df

        date  a
0 2012-01-01  9
1 2012-06-01  5
2 2015-01-01  1
3 2015-02-01  2
4 2015-03-01  3 
```

有几种按年份分组的方法

*   将 dt 访问器与`year`属性一起使用
*   放入`date`索引并使用匿名函数访问年份
*   使用`resample`方法
*   转换为熊猫时期

### `.dt``year`有财产的访问者

当您有一列（而不是索引）熊猫时间戳时，您可以使用访问器访问更多额外的属性和方法`dt`。例如：

```
df['date'].dt.year

0    2012
1    2012
2    2015
3    2015
4    2015
Name: date, dtype: int64 
```

我们可以使用它来形成我们的组并计算特定列上的一些聚合：

```
df.groupby(df['date'].dt.year)['a'].agg(['sum', 'mean', 'max'])

      sum  mean  max
date                
2012   14     7    9
2015    6     2    3 
```

* * *

### 将日期放入索引并使用匿名函数访问年份

如果将日期列设置为索引，它将成为具有与`dt`访问器提供普通列相同的属性和方法的 DateTimeIndex

```
df1 = df.set_index('date')
df1.index.year

Int64Index([2012, 2012, 2015, 2015, 2015], dtype='int64', name='date') 
```

有趣的是，当使用 groupby 方法时，您可以向它传递一个函数。此函数将隐式传递 DataFrame 的索引。因此，我们可以从上面得到相同的结果，如下所示：

```
df1.groupby(lambda x: x.year)['a'].agg(['sum', 'mean', 'max'])

      sum  mean  max
2012   14     7    9
2015    6     2    3 
```

* * *

### 使用`resample`方法

如果您的日期列不在索引中，则必须使用`on`参数指定该列。您还需要将[偏移别名](http://pandas.pydata.org/pandas-docs/stable/timeseries.html#offset-aliases)指定为字符串。

```
df.resample('AS', on='date')['a'].agg(['sum', 'mean', 'max'])

             sum  mean  max
date                       
2012-01-01  14.0   7.0  9.0
2013-01-01   NaN   NaN  NaN
2014-01-01   NaN   NaN  NaN
2015-01-01   6.0   2.0  3.0 
```

* * *

### 转换为熊猫时期

您还可以将日期列转换为 pandas Period 对象。我们必须将偏移别名作为字符串传递来确定 Period 的长度。

```
df['date'].dt.to_period('A')

0   2012
1   2012
2   2015
3   2015
4   2015
Name: date, dtype: object 
```

然后我们可以将其用作一个组

```
df.groupby(df['date'].dt.to_period('Y'))['a'].agg(['sum', 'mean', 'max'])

      sum  mean  max
2012   14     7    9
2015    6     2    3 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-07-09T12:39:29.280

这应该有效：

```
data.groupby(lambda x: data['date'][x].year) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-08T20:39:27.100

这也可以

`data.groupby(data['date'].dt.year)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-05T21:43:12.017

采用：

```
data.groupby(['col1', data.date.dt.year]).agg({'col2': 'agg_func'}).reset_index() 
```

如果您想从日期时间列和另一个不同类型的列（col1）按年份分组

# javascript - 使用原型 js 更改子图像源

> ID：11391974
> 
> 赞同：-1
> 
> 时间：2012-07-09T09:04:46.767
> 
> 标签：javascript, html, prototypejs

使用原型单击父链接时如何更改图标路径？

```
<a onclick="toggleAmenity('park'); return false;" href="#">
    <input type="image" id="parks_button" src="/images/amenities/icon_parks.gif" name="commit">
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:41:45.607

有大约一百万种方法可以给这只猫剥皮，但这可能会给你一些使用 Prototype 东西的想法。

我使用的是图像大小而不是“舒适”。有点令人困惑，但我想在点击时显示视觉变化。我强烈建议不要对此类事物（或大多数其他类型的事物）使用 onclick 属性。

[http://jsfiddle.net/gSfmL/](http://jsfiddle.net/gSfmL/)

```
<p>
  <a data-toggle-amenity='64' href="#">
    <input type="image" id="parks_button" src="http://www.google.com/images/icons/product/chrome-128.png" name="commit">
  </a>
</p>

<p>
  <a href="#">This anchor won't fire</a>
</p>​ 
```

.

```
document.on('click', 'a[data-toggle-amenity]', function(event, element) {
  var amenityToggleType = element.readAttribute('data-toggle-amenity');
  element.down('input').writeAttribute({src: 'http://www.google.com/images/icons/product/chrome-' + amenityToggleType + '.png'});
  element.writeAttribute('data-toggle-amenity', null); // removes the attribute
});​ 
```

# windows - Go 编译器是否有窗口设置选项？

> ID：11391975
> 
> 赞同：7
> 
> 时间：2012-07-09T09:04:52.197
> 
> 标签：windows, console, gtk, go

我正在使用 Go (6g) 编译 GTK 应用程序，我想知道是否有编译器/链接器选项可以使其成为 Windows 可执行文件而不是控制台可执行文件。MinGW 有一个 -mwindows 选项，目前我不得不使用令人讨厌的十六进制编辑器手动更改 PE 标头。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T10:49:16.780

> `-ldflags`在每个 5l、6l 或 8l 链接器调用上传递的“标志列表”参数
> 
> [编译包和依赖](http://golang.org/cmd/go/)
> 
> `-Hwindowsgui`（仅在 6l/8l 中）编写 Windows PE32+ GUI 二进制文件
> 
> [命令 ld](http://golang.org/cmd/ld/)

添加`-ldflags -Hwindowsgui`到`go build/get/install`命令行。例如，

```
go build -ldflags="-Hwindowsgui" gtkapp.go 
```

# flash - ActionScript：fscommand 与 ExternalInterface

> ID：11391976
> 
> 赞同：3
> 
> 时间：2012-07-09T09:04:52.837
> 
> 标签：flash, actionscript, externalinterface, fscommand

在 ActionScript 中，您有两个选项可以与主机通信。（在我的例子中，一个 .NET 应用程序使用 AxInterop.ShockwaveFlashObjects.dll 来托管 Flash 电影）

```
fscommand(String, ...);

ExternalInterface.call(String, ...); 
```

两者的主要区别是什么？

会不会是 fscommand 在主机端有一点延迟到达？（即它没有阻塞，因此可能与 ExternalInterface 调用混淆？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:31:53.080

`ExternalInterface``fscommand`是Flash 和容器应用程序之间通信的旧方法（Flash 播放器 8 之前）的直接替代品（请参阅[Adob​​e 文档](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cab.html)）。

再次从文档来看，`ExternalInterface`over的优点`fscommand`如下：

*   您可以使用任何 JavaScript 函数，而不仅仅是可以与 fscommand() 函数一起使用的函数。
*   您可以使用任何名称传递任意数量的参数；您不仅限于传递命令和单个字符串参数。这为外部 API 提供了比 fscommand() 更大的灵活性。
*   您可以传递各种数据类型（如布尔值、数字和字符串）；您不再局限于字符串参数。
*   您可以接收调用的值，该值会立即返回到 ActionScript（作为调用的返回值）。

如果您的目标是 Flash Player 8 或更高版本，建议您使用`ExternalInterface`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:42:28.633

一般来说，我会推荐使用 ExternalInterface 而不是 fscommand。我认为 fscommand 或多或少已被弃用。

也就是说，您提到的 fscommand 是非阻塞的可能是正确的，因为 ExternalInterface.call() 是同步的，以便能够从被调用的外部函数返回一个值。我想可能存在一些情况，边缘情况，这可能会支持 fscommand，但您可能必须对此进行测试。

同样，我会推荐 ExternalInterface，它具有 fscommand 所没有的许多功能，例如在 ActionScript 和典型的外部环境（网页中的 JavaScript）之间保留数据类型和对象的自动序列化/反序列化 - 而 fscommand 只发送字符串。在 .NET 应用程序中使用 ExternalInterface，您可能必须自己解析 XML-RPC（由 ExternalInterface 在内部使用），我相信，但我不确定。

# android - 使用 Android 库项目时生成错误

> ID：11391982
> 
> 赞同：1
> 
> 时间：2012-07-09T09:05:17.093
> 
> 标签：android, library-project

我正在尝试在 github 上使用这个库项目：

[https://github.com/pakerfeldt/android-viewflow](https://github.com/pakerfeldt/android-viewflow)

这个 Android 库项目提供水平滑动。

我将解释我如何尝试使用这个库：

1.  我从 github 下载了这个项目，并使用“现有项目到工作区”导入了“viewflow”项目。（Eclipse 给出了一些错误，但我修复了它们。这不是问题。）
2.  我创建了一个名为“test”的新android项目。
3.  我将 viewflow 项目添加到我的测试项目的构建路径中。（使用 Java 构建路径->项目->添加）
4.  这是我的 main.xml：

> ```
> <?xml version="1.0" encoding="utf-8"?>
> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>     xmlns:app="http://schemas.android.com/apk/res/com.example.test"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:orientation="vertical" >
> 
>     <LinearLayout
>         android:id="@+id/header_layout"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:gravity="center_horizontal"
>         android:orientation="vertical" >
> 
>         <org.taptwo.android.widget.TitleFlowIndicator
>             android:id="@+id/viewflowindic"
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:layout_marginTop="10dip"
>             app:clipPadding="5dp"
>             app:footerColor="#FFFFC445"
>             app:footerLineHeight="2dp"
>             app:footerTriangleHeight="10dp"
>             app:selectedColor="#FFFFC445"
>             app:selectedSize="12dp"
>             app:textColor="#FFFFFFFF"
>             app:textSize="11dp"
>             app:titlePadding="10dp" >
>         </org.taptwo.android.widget.TitleFlowIndicator>
>     </LinearLayout>
> 
>     <org.taptwo.android.widget.ViewFlow
>         android:id="@+id/viewflow"
>         android:layout_width="fill_parent"
>         android:layout_height="fill_parent"
>         android:duplicateParentState="true" >
>     </org.taptwo.android.widget.ViewFlow>
> </LinearLayout> 
> ```

但是 Eclipse 给出了这些错误：

```
Description Resource    Path    Location    Type
R cannot be resolved to a variable  Main.java   /test/src/com/example/test  line 14 Java Problem
R cannot be resolved to a variable  Main.java   /test/src/com/example/test  line 19 Java Problem
error: No resource identifier found for attribute 'titlePadding' in package 'com.example.test'  main.xml    /test/res/layout    line 15 Android AAPT Problem
error: No resource identifier found for attribute 'textSize' in package 'com.example.test'  main.xml    /test/res/layout    line 15 Android AAPT Problem
error: No resource identifier found for attribute 'textColor' in package 'com.example.test' main.xml    /test/res/layout    line 15 Android AAPT Problem
error: No resource identifier found for attribute 'selectedSize' in package 'com.example.test'  main.xml    /test/res/layout    line 15 Android AAPT Problem
error: No resource identifier found for attribute 'selectedColor' in package 'com.example.test' main.xml    /test/res/layout    line 15 Android AAPT Problem
error: No resource identifier found for attribute 'clipPadding' in package 'com.example.test'   main.xml    /test/res/layout    line 15 Android AAPT Problem
error: No resource identifier found for attribute 'footerColor' in package 'com.example.test'   main.xml    /test/res/layout    line 15 Android AAPT Problem
error: No resource identifier found for attribute 'footerLineHeight' in package 'com.example.test'  main.xml    /test/res/layout    line 15 Android AAPT Problem
error: No resource identifier found for attribute 'footerTriangleHeight' in package 'com.example.test'  main.xml    /test/res/layout    line 15 Android AAPT Problem 
```

我导入了它的示例项目（[https://github.com/pakerfeldt/android-viewflow/tree/master/viewflow-example](https://github.com/pakerfeldt/android-viewflow/tree/master/viewflow-example)），它工作正常！

问题可能与命名空间有关，但我无法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T07:30:15.147

app:selectedSize="12dp" 删除这一行

# android - 我想用 PhoneGap 创建一个 Objective-C 组件

> ID：11391984
> 
> 赞同：1
> 
> 时间：2012-07-09T09:05:20.540
> 
> 标签：android, objective-c, ios, cordova

我想用 PhoneGap 创建一个可用于 iOS 和 Android 的组件。我的第一个想法是 PhoneGap，因为它有助于使用 HTML5 和 JavaScript 开发跨平台应用程序。

问题是，我不想开发整个应用程序；我想要一个可以在现有 iOS 和 Android 项目中导入的组件。

**PhoneGap 有可能吗？或者这甚至是可取的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:05:21.573

迟到的回应，但因为我正在寻找同样的东西：

[http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS](http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)

[http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_android.md.html#Embedding%20Cordova%20WebView%20on%20Android](http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_android.md.html#Embedding%20Cordova%20WebView%20on%20Android)

# hibernate - 具有多个@Id 的休眠映射异常

> ID：11391985
> 
> 赞同：0
> 
> 时间：2012-07-09T09:05:28.620
> 
> 标签：hibernate, annotations

我有两个实体，它们之间有关系。这是我的第一个实体：

```
 @Entity
    @Table(name = "APPLICATION_DEVICE")
    public class ApplicationDevice implements Serializable {
    [...]
    @Id
        @ManyToOne
        @JoinColumn(name = "udid", nullable=false)
        public Device getDevice()
        {
            return device;
        }

        public void setDevice(Device device)
        {
            this.device = device;
        }

        @Id
        public Long getApplicationId()
        {
            return applicationId;
        }

        public void setApplicationId(Long applicationId)
        {
            this.applicationId = applicationId;
        }
[...] 
```

请注意，它有一个包含两个字段的主键：applicationId 和一个设备（它是另一个关系）。

我的另一个实体是：

```
@Entity
@Table(name = "SEGMENT_APPLICATION_DEVICES")
public class SegmentApplicationDevice
{
[...]

@Id
    @GeneratedValue
    public Long getId()
    {
        return id;
    }

    public void setId(Long id)
    {
        this.id = id;
    }

    @ManyToOne
    public ApplicationDevice getApplicationDevice()
    {
        return applicationDevice;
    }

    public void setApplicationDevice(ApplicationDevice applicationDevice)
    {
        this.applicationDevice = applicationDevice;
    }

[...] 
```

这是hibernate尝试映射此实体时的例外：

```
Exception constructing service 'HibernateSessionSource': Error invoking service builder method org.apache.tapestry5.hibernate.HibernateCoreModule.buildHibernateSessionSource(Logger, List, RegistryShutdownHub) (at HibernateCoreModule.java:123) (for service 'HibernateSessionSource'): Foreign key (FK5B8CB9821C11FEAE:SEGMENT_APPLICATION_DEVICES [applicationDevice_applicationId])) must have same number of columns as the referenced primary key (APPLICATION_DEVICE [udid,applicationId]) 
```

我在做什么错？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:53:28.793

ApplicationDevice 有一个由 2 列组成的复合 id。但是，ApplicationDevice 的 manytoone 没有指定列（应该有 2 个），因此使用带有“entityname_id”的一列的默认值。

为了缓解这种情况，请在多对一中指定**两**列，它们是 ApplicationDevice 的连接列。

# php - 使用php随机化数组

> ID：11391992
> 
> 赞同：-3
> 
> 时间：2012-07-09T09:06:01.943
> 
> 标签：php, multidimensional-array

我需要使用 PHP 重新排列跟随数组的顺序，我尝试使用数组 shuffle 和 array_random 但没有运气，谁能帮助我

```
Array (
  [0] => Array (
    [value] => 4
    [label] => GasGas
  )
  [1] => Array (
    [value] => 3
    [label] => Airoh Helmets
  )
  [2] => Array (
    [value] => 12
    [label] => XCiting Trials Wear
  )
  [3] => Array (
    [value] => 11
    [label] => Hebo Trials
  )
  [4] => Array (
    [value] => 10
    [label] => Jitsie Products
  )
  [5] => Array (
    [value] => 9
    [label] => Diadora Boots
  )
  [6] => Array (
    [value] => 8
    [label] => S3 Performance
  )
  [7] => Array (
    [value] => 7
    [label] => Scorpa
  )
  [8] => Array (
    [value] => 6
    [label] => Inspired
  )
  [9] => Array (
    [value] => 5
    [label] => Oset
  )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:13:00.397

```
$array = array(1,2,3,4,5,6,7);
shuffle($array);
print_r($array); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:25:12.790

你可以得到一个随机的数组索引序列，我认为它可以让你解决你的问题；）

> // 返回随机的非重复数字数组
> //params:
> //$fromto - 如果 $to 为空，区间将为 [0, $fromto]，其他地方为 [$fromto, $to]
> //$to - 区间结束。
> //$limit - 限制数量。注意！if $limit < size([$fromto, $to]) 并非区间 [$fromto, $to] 中的所有数字都会返回
> **function** rand_seq($fromto, $to = null, $limit = null){
> 
> if(is_null( $to)){
> $to = $fromto;
> $从托 = 0; }
> 
> if(is_null($limit)){
> $limit = $to-$fromto+1;
> 
> }
> $randArr = 数组（）；
> 
> for($i=$fromto;$i<=$to;$i++){
> $randArr[]=$i;
> 
> }
> $结果 = 数组（）；
> 
> for($i=0; $i < $limit||sizeof($randArr) > 0; $i++){
> $index = mt_rand(0, sizeof($randArr)-1); // 选择 rand 索引 / выбираем случайный индекс массива
> $result[] = $randArr[$index]; // 添加随机元素 / добавляем случайный элемент массива
> array_splice($randArr, $index, 1); // 删除它=) / удаляем его =)
> 
> }
> 
> return $result;
> }

# ios - 头像如何调用系统imagePicker方法

> ID：11391994
> 
> 赞同：0
> 
> 时间：2012-07-09T09:06:11.320
> 
> 标签：ios, uiimagepickercontroller

我想做一个显示imagePicker的功能，比如为联系人中的头像选择一张图片，请看下面的截图：

![为头像拍照的 UI](../Images/fc34cebcb416469c7ef7bfcfc4631683.png)

而且我在 UIImagePicker 类中找到了要调用的任何方法，UIImagePicker 只显示 UI 以拍摄普通照片而不是头像。

那么，这是否意味着，我必须自己做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:14:05.130

您可以通过将allowEditing 属性设置为YES 来显示让用户在使用UIImagePickerController 获取图像后编辑图像。

# java - System.console().readLine() 在实际读取内容之前需要 newLine 符号

> ID：11391999
> 
> 赞同：0
> 
> 时间：2012-07-09T09:06:23.287
> 
> 标签：java

我在使用 Console 类读取用户输入时遇到问题。

该`readLine`方法读取每个键入的输入，直到键入新行，然后它实际读取稍后返回的输入（在第二次键入新行之后）。

我想知道这是否与输入缓冲有关。我试图在 Console 对象中写入一个新的行号：

```
cons.writer ().println (System.getProperty ("line.separator")); 
```

在尝试阅读之前，但它没有帮助。

我使用 Console 类是因为它的`readPassword`方法（我有同样的问题）。

```
Console cons = System.console();
username = String(cons.readLine(format, message));
password = String(cons.readPassword(format, message)); 
```

我还必须补充一点，这段代码循环运行，直到用户名和密码都可以。

在除第一次之外的每次迭代中，此代码都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:56:02.450

你是对的。`readLine()`读取一行，并以换行符终止行，并`readLine()`阻塞直到它得到换行符或 EOS。如果您不想要这种行为，请不要调用`readLine()`.