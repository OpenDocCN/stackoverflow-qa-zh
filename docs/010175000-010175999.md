# StackOverflow 问答 10175000-10175999

# ivy - 解释如何使用文件系统解析器的示例示例

> ID：10175000
> 
> 赞同：14
> 
> 时间：2012-04-16T13:23:13.753
> 
> 标签：ivy

任何人都可以通过考虑来解释我如何在 Ivy 中使用文件系统解析器和示例。

1.  我有 ivy.xml 文件，我在其中定义了所有依赖项，但我希望我的文件系统中的 jars 不是来自 maven 存储库..？

2.  我在哪里放置 ivysettings.xml 文件。

3.  build.xml 应该包含什么才能使用 ivysettings.xml 以便我可以使用来自文件系统而不是来自 maven 的 jars ..

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-16T19:37:15.723

**ivysettings.xml**文件默认位于与**ivy.xml**文件相同的目录中。

可以使用常春藤[设置任务指定替代位置](http://ant.apache.org/ivy/history/latest-milestone/use/settings.html)

# 项目结构

位于**lib**目录中的第 3 方依赖项。

```
$ tree
.
|-- build.xml
|-- ivysettings.xml
|-- ivy.xml
|-- lib
|   |-- junit-4.10.jar
|   |-- slf4j-api-1.6.4.jar
|   `-- slf4j-simple-1.6.4.jar
`-- src
    |-- main
    |   `-- java
    |       `-- org
    |           `-- demo
    |               `-- App.java
    `-- test
        `-- java
            `-- org
                `-- demo
                    `-- AppTest.java

10 directories, 8 files 
```

## 常春藤.xml

这个 ivy 文件使用配置来管理 3 种依赖项：

1.  编译
2.  运行
3.  测试

这些将对应于 ANT 构建使用的类路径。

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations defaultconfmapping="compile->default">
        <conf name="compile" description="Required to compile application"/>
        <conf name="runtime" description="Additional run-time dependencies" extends="compile"/>
        <conf name="test"    description="Required for test only" extends="runtime"/>
    </configurations>

    <dependencies>
        <!-- compile dependencies -->
        <dependency org="org.slf4j" name="slf4j-api" rev="1.6.4"/>

        <!-- runtime dependencies -->
        <dependency org="org.slf4j" name="slf4j-simple" rev="1.6.4" conf="runtime->default"/>

        <!-- test dependencies -->
        <dependency org="junit" name="junit" rev="4.10" conf="test->default"/>
    </dependencies>

</ivy-module> 
```

## 常春藤设置.xml

没有什么花哨。对位于**lib**目录中的 jar 的简单映射：

```
<ivysettings>
    <settings defaultResolver="local"/>
    <resolvers>
        <filesystem name="local">
            <artifact pattern="${ivy.settings.dir}/lib/[artifact]-[revision].[ext]"/>
        </filesystem>
    </resolvers>
</ivysettings> 
```

或者.....我将始终包含非本地 jar 的 Maven 中央存储库，如下所示：

```
<ivysettings>
    <settings defaultResolver="central"/>
    <resolvers>
        <ibiblio name="central" m2compatible="true"/>
        <filesystem name="local">
            <artifact pattern="${ivy.settings.dir}/lib/[artifact]-[revision].[ext]"/>
        </filesystem>
    </resolvers>
    <modules>
        <module organisation="org.slf4j" resolver="local"/>
        <module organisation="junit" name="junit" resolver="local"/>
    </modules>
</ivysettings> 
```

**模块**部分指定应在本地检索哪些 jar 。

## 构建.xml

最后是使用 ivy 管理类路径的构建逻辑。

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <!--
    ================
    Build properties
    ================
    -->
    <property name="src.dir" location="src/main/java"/>
    <property name="test.src.dir" location="src/test/java"/>
    <property name="build.dir" location="build"/>
    <property name="classes.dir" location="${build.dir}/classes"/>
    <property name="test.classes.dir" location="${build.dir}/test-classes"/>
    <property name="ivy.reports.dir"  location="${build.dir}/ivy-reports"/>
    <property name="test.reports.dir"  location="${build.dir}/test-reports"/>

    <!--
    ===========
    Build setup
    ===========
    -->
    <target name="init">
        <ivy:resolve/>

        <ivy:report todir='${ivy.reports.dir}' graph='false' xml='false'/>

        <ivy:cachepath pathid="compile.path" conf="compile"/>
        <ivy:cachepath pathid="runtime.path" conf="runtime"/>
        <ivy:cachepath pathid="test.path"    conf="test"/>

        <mkdir dir="${classes.dir}"/>
        <mkdir dir="${test.classes.dir}"/>
        <mkdir dir="${test.reports.dir}"/>
    </target>

    <!--
    ===============
    Compile targets
    ===============
    -->
    <target name="compile" depends="init">
        <javac srcdir="${src.dir}" destdir="${classes.dir}" includeantruntime="false" debug="true" classpathref="compile.path"/>
    </target>

    <target name="compile-tests" depends="compile">
        <javac srcdir="${test.src.dir}" destdir="${test.classes.dir}" includeantruntime="false" debug="true">
            <classpath>
                <path refid="test.path"/>
                <pathelement path="${classes.dir}"/>
            </classpath>
        </javac>
    </target>

    <!--
    ============
    Test targets
    ============
    -->
    <target name="test" depends="compile-tests">
        <junit printsummary="yes" haltonfailure="yes">
            <classpath>
                <path refid="test.path"/>
                <pathelement path="${classes.dir}"/>
                <pathelement path="${test.classes.dir}"/>
            </classpath>
            <formatter type="xml"/>
            <batchtest fork="yes" todir="${test.reports.dir}">
                <fileset dir="${test.src.dir}">
                    <include name="**/*Test*.java"/>
                    <exclude name="**/AllTests.java"/>
                </fileset>
            </batchtest>
        </junit>
    </target>

    <!--
    =====================
    Build and run targets
    =====================
    -->
    <target name="build" depends="test"/>

    <target name="run" depends="build">
        <java classname="org.demo.App">
            <classpath>
                <path refid="runtime.path"/>
                <pathelement location="${classes.dir}"/>
            </classpath>
        </java>
    </target>

    <!--
    =============
    Clean targets
    =============
    -->
    <target name="clean">
        <delete dir="${build.dir}"/>
    </target>

    <target name="clean-all" depends="clean">
        <ivy:cleancache/>
    </target>

</project> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-03-20T16:31:20.003

如果您只是在本地拉罐子并且根本不想使用 Maven Central，那么 Ivy 就是在浪费您的时间。只需将您需要的任何 jars 放在 /lib 文件夹中，将其添加到您的类路径，然后运行您的 Ant 文件。Ivy 用于与 Maven Central 交互。但是，如果您需要两者都做，从 Maven 中提取普通 jar 并从本地提取第 3 方 jar，Mark 的解决方案是一个很棒的解决方案。

# .net - .NET Response.Filter 不使用 IIS7 调用 Write()

> ID：10175003
> 
> 赞同：1
> 
> 时间：2012-04-16T13:23:19.620
> 
> 标签：.net, iis-7, filter, ihttpmodule

我有一个 .NET IHttpModule，它添加了一个响应过滤器并对请求的文件进行了一些修改。但是，虽然这可以通过 Visual Studio 工作，但我无法通过 IIS 完成这项工作。使用 II7，v2.0.50727 框架。

响应过滤器被添加到 IHttpModule 的 BeginRequest 事件中......

```
context.Response.Filter = new myFilter(context); 
```

它调用以下...

```
public myFilter(HttpContext myContext)
{
    if (myContext.Response.Filter == null)
        throw new ArgumentNullException("ResponseStream");
    this._responseStream = myContext.Response.Filter;
    _context = myContext;
} 
```

我可以看到响应过滤器的 Flush() 和 Close() 方法被调用，但我在 Write() 中的断点从未被命中。

任何人都可以帮助解释为什么没有调用 Write() 吗？

我的 web.config 已正确设置为注册 IIS7 和 Visual Studio 的模块（模块和 httpmodule 等）

这正是在这里找到的问题[——ASP.NET Response.Filter 不调用 Write——](https://stackoverflow.com/questions/6737487/asp-net-response-filter-does-not-call-write)我无法从中找到解决我问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:23:53.417

如果有人感兴趣，我发现了问题。这是因为我试图处理未注册为 MIME 类型的文件扩展名。使用 IIS 声明此 MIME 类型解决了该问题。

# php - htaccess mod_rewrite - 长网址的子文件夹类型

> ID：10175008
> 
> 赞同：1
> 
> 时间：2012-04-16T13:23:42.617
> 
> 标签：php, mod-rewrite

我目前使用的是，

```
RewriteEngine On
RewriteBase /

RewriteRule ^blahblah/([a-z]+)$ abcd.php?word=$1 [L] 
```

所以当前的输出是 site.com/blahblah/word

我想要实现的是，site.com/blahblah/the-word-is-word

到处搜索，找不到任何东西这是怎么回事:(

例子 ：

原始网址：`site.com/abcd.php?word=Google`

目前 ：`site.com/blahblah/Google`

我在找什么：`site.com/blahblah/the-word-is-Google`

PS：大写确实很重要，因为谷歌和谷歌会有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:49:05.903

将此代码放在 DOCUMENT_ROOT 下的 .htaccess 中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# external redirect to blahblah/the-word-is-google.html
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+abcd\.php\?word=([^\s]+) [NC]
RewriteRule ^ blahblah/the-word-is-%1.html? [L,R,NC]

# internal redirect from blahblah/the-word-is-google.html to abcd.php?word=google
RewriteRule ^blahblah/the-word-is-([a-z]+)\.html$ abcd.php?word=$1 [L,NC,QSA] 
```

# facebook - Open Graph 适用于 Google+ 和 LinkedIn，但不适用于 Facebook

> ID：10175010
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:23:49.270
> 
> 标签：facebook, facebook-opengraph

首先，我不是一个全职程序员，所以放轻松;-) 我也在这里阅读了许多答案，但还没有解决我的问题，因此问这个问题。

我已将 Open Graph 代码添加到 amy 网站，并且在 LinkedIn 和 Google+ 上共享链接时，指定的标题、描述和图像都可以正常工作，但不能在 Facebook 上工作。

Facebook 调试器给了我“无法从 URL 检索数据”消息。如果我使用[http://www.opengraph.in](http://www.opengraph.in)进行测试，它会向我展示我希望看到的内容。

显示此问题的示例 URL 是[http://www.newsbase.com/newsbasearchive/cotw.jsp?pub=energo&issue=608](http://www.newsbase.com/newsbasearchive/cotw.jsp?pub=energo&issue=608)

谢谢，

铝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:53:37.437

我查看了您的 URI 的 Facebook 调试器，得到了相同的基本结果：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.newsbase.com%2Fnewsbasearchive%2Fcotw.jsp%3Fpub%3Denergo%26issue%3D608](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.newsbase.com%2Fnewsbasearchive%2Fcotw.jsp%3Fpub%3Denergo%26issue%3D608) --- 可以' t 下载：无法从 URL 检索数据。

在其上运行 W3C 验证器会显示许多问题，这些问题可能会让准确的 HTML 解析器感到困惑，但会让糟糕的临时解析器蒙混过关。

[http://validator.w3.org/check?uri=http%3A%2F%2Fwww.newsbase.com%2Fnewsbasearchive%2Fcotw.jsp%3Fpub%3Denergo%26issue%3D608&charset=%28detect+automatically%29&doctype=Inline&group=0&user -agent=W3C_Validator%2F1.3](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.newsbase.com%2Fnewsbasearchive%2Fcotw.jsp%3Fpub%3Denergo%26issue%3D608&charset=%28detect+automatically%29&doctype=Inline&group=0&user-agent=W3C_Validator%2F1.3) --- 142 个错误，21 个警告

但是，将它复制到我自己的服务器表明它在那里工作得很好，内容完全相同，而不是抱怨：

应修复的开放图警告 推断属性：应显式提供“og:url”属性，即使可以从其他标签推断出值。推断属性：应显式提供“og:title”属性，即使可以从其他标签推断出值。

因此，您的网页的正常输出显然不是问题。我检查了这个，以防 Facebook 的代理正在改变行为：

wget -np -nd -nH -U "facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)" -O foo.html 'http://www.newsbase.com/newsbasearchive/cotw. jsp?pub=energo&issue=608'

但结果在字节上是相同的。

请注意，facebook 调试器可以与[http://www.newsbase.com/newsbasearchive](http://www.newsbase.com/newsbasearchive)本身配合使用。但是一旦添加了“cotw.jsp”，游戏就结束了。

我的猜测是 cotw.jsp 本身正在做一些不受欢迎的事情。

# python - 如何为 Django 构建一个类似 pep8 的静态分析工具？

> ID：10175011
> 
> 赞同：2
> 
> 时间：2012-04-16T13:23:52.180
> 
> 标签：python, django, static-analysis

有 pyflakes 和 pep8.py 之类的工具，它们会告诉您您编写的代码是否符合某些标准。我想构建一个类似的工具，对 Django 进行静态分析，并在它们不符合标准时告诉它们。（例如模型应该有一个`__unicode__`。）问题：

*   这样做值得吗？（是否有足够多的常见事物可供测试？）
*   有一个好的起点吗？（例如，我可以贡献一些应用程序，而不是自己创建。）
*   我该如何进行？（例如，使用 ast 模块是个好主意吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:54:56.203

我知道有两个开源项目专门为 Django 进行这种类型的分析：

*   [django-lint](https://chris-lamb.co.uk/projects/django-lint/)，它是 PyLint 的包装器/扩展
*   [djangolint](http://djangolint.com/)这是一个 Django Dash 项目，它似乎有自己的一组分析器

任何一个都应该为您想要做的事情提供一个坚实的起点。

# php - mysql查询以计算整行中的空格或单词

> ID：10175012
> 
> 赞同：3
> 
> 时间：2012-04-16T13:23:58.327
> 
> 标签：php, mysql

在我的数据库中，有一个表，名称为 tableA。这里给出了表的结构

```
id      from     message
1       23       hi how are you
2       65       hey whats going on
3       74       enjoying the vacation with family
4       23       here in Australia its chilly season
5       74       hey sam whats the plan for tomorrow 
```

看到 id 是 auto-increment.from 列表示哪个用户正在发送消息，并且 message 列由 messages 组成。我想知道哪些用户发送了多少单词。所以我必须先计算行中的单词然后我必须搜索整个列并找到重复的位置并为该特定用户添加单词。在我的示例中你可以看到 23 和 74 的两个地方来了。我希望我的输出为

```
 from       nos
    23         10
    65         4 
    74         12 
```

在这里你可以看到 23 分两行出现，所以我添加了两行的单词数，比如 74 也分两行出现。请指导

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T13:29:26.170

您可以通过此查询计算单词-

```
Select length('string')-length(replace('string',' ',''))+1; 
```

对于您的桌子，您可以这样做

```
Select *,(length(message)-length(replace(message,' ',''))+1) from table_name 
```

这将显示它前面的每个味精的字数。

**为了您想要的结果，试试这个 -**

```
Select `from`, sum((length(message)-length(replace(message,' ',''))+1)) as nos from table_name group by `from` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:37:26.613

假设单词由一个空格分隔，您可以使用：

```
SUM( LENGTH(message) - LENGTH(REPLACE(message, ' ', ''))+1) 
```

得到字数。由于您想汇总来自每个用户的所有消息，因此您需要按用户（从列）分组。最后你应该有这样的东西：

```
select `from`, SUM( LENGTH(message) - LENGTH(REPLACE(message, ' ', ''))+1) as nos
from tableA
group by `from` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:00:33.880

```
SELECT from, SUM(LENGTH(message) - LENGTH(REPLACE(TRIM(message), ' ', ''))+1) FROM my_table GROUP BY from; 
```

# php - ASP 到 PHP 翻译 - 字符串连接

> ID：10175016
> 
> 赞同：0
> 
> 时间：2012-04-16T13:24:16.343
> 
> 标签：php, asp-classic

我在将字符串连接从 ASP 转换为 PHP 时遇到问题。我正在使用自动翻译器，可能会发生错误，因为 \ 是 PHP 中的转义引号。

例如，

```
caminhoMP3 = Application("Root")&"_content\img\musica\musica_"&MusicaIDAux&"\"&ArquivoMP3Aux 
```

被翻译

```
$caminhoMP3 = Application("Root")."_content\img\musica\musica_".$MusicaIDAux."\".$ArquivoMP3Aux; 
```

或者

```
$caminhoMP3=."_content\img\musica\musica_".$MusicaIDAux."\".$ArquivoMP3Aux; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:28:00.430

你的权利，反斜杠基本上会转义引号“。所以你也需要转义你的斜杠（通过添加一个额外的）。

```
$caminhoMP3 = Application("Root")."content\img\musica\musica".$MusicaIDAux."\\".$ArquivoMP3Aux; 
```

# android - 如何让 MacBook 识别安卓设备

> ID：10175017
> 
> 赞同：2
> 
> 时间：2012-04-16T13:24:31.883
> 
> 标签：android

对于 Windows，谷歌提供 USB 驱动程序，但谷歌 USB 驱动程序与 Mac OS 不兼容，我读到 Mac OS 和 Linux 不需要任何东西。

我已经在我的安卓设备上设置了“USB Debugging ON”。

以下是我的开发环境。

```
OS: Mac OS 10.6.8
Android Device: Google Nexus S 
Android OS: 4.0.3
IDE: Eclipse SDK 3.7.2 
```

我制作的应用程序使用相机，所以我需要使用设备进行调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:30:14.140

[它应该可以工作。](http://developer.android.com/guide/developing/device.html)

我会想象还有其他事情发生。插入手机并尝试从命令行列出它：

```
$ adb devices 
```

如果不是，请尝试重新启动 adb 服务器：

```
$ adb kill-server
$ adb start-server 
```

重新启动服务器后，如果该设备仍未列出，请拔下插头，然后重新插入另一个 USB 端口。否则，重新启动系统。

使用`$ adb devices`命令时出现设备后，尝试获取 shell：

```
$adb shell 
```

如果失败，我会确保您的 SKD 以及 ADT Eclipse 插件是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:39:17.517

我也遇到过类似的问题，似乎与 USB 集线器无法正常工作有关。尝试[重置您的 PRAM](http://support.apple.com/kb/ht1379)，看看是否有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-05T08:27:00.797

您的 Android 设备需要处于开发者模式。

转到**设置 > 关于手机**，然后**在 Build-Number 上点击多次**。

见这里：[http ://www.gottabemobile.com/2013/11/09/disable-sms-text-google-hangouts/](http://www.gottabemobile.com/2013/11/09/disable-sms-text-google-hangouts/)

# android - 使用字符串在 SQLite 中查询

> ID：10175018
> 
> 赞同：0
> 
> 时间：2012-04-16T13:24:32.523
> 
> 标签：android, sqlite

我想从联系人姓名中检索电话号码。所以我有这个代码

```
public String getPhoneNumber(String name) {
    String phonenumber = "";
    ContentResolver cr = getContentResolver();
    Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            "DISPLAY_NAME LIKE '%" + name + "%'", null, null);
    if (cursor.moveToFirst()) {
        String contactId = cursor.getString(cursor
                .getColumnIndex(ContactsContract.Contacts._ID));
        //
        // Get all phone numbers.
        //
        Cursor phones = cr.query(Phone.CONTENT_URI, null, Phone.CONTACT_ID
                + " = " + contactId, null, null);
        while (phones.moveToNext()) {
            String number = phones.getString(phones
                    .getColumnIndex(Phone.NUMBER));
            int type = phones.getInt(phones.getColumnIndex(Phone.TYPE));
            switch (type) {
            case Phone.TYPE_HOME:
                //phonenumber = number;
                // do something with the Home number here...
                break;
            case Phone.TYPE_MOBILE:
                phonenumber = number;
                // do something with the Mobile number here...
                break;
            case Phone.TYPE_WORK:
                //phonenumber = number;
                // do something with the Work number here...
                break;
            }
        }
        phones.close();
        //
        // Get all email addresses.
        //

    }
    cursor.close();
    return phonenumber;
} 
```

但是，如果联系人姓名与数据库中的姓名不完全匹配，它将不返回任何内容。那么有没有什么办法可以找回连输入名字都不太可能的电话号码呢？

例如，有一个联系人：Prototype Alex，我输入的名称是：prototype 或 alex。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:41:36.860

这不是您具体问题的答案，但它可能会有所帮助。有一些[近似字符串匹配](http://en.wikipedia.org/wiki/Approximate_string_matching)的算法，如 Levenshtein 距离、soundex 或 metaphone。也许您可以选择从内容提供商处获取所有联系人，然后使用其中一种算法进行搜索。

# c# - 使用 c# asp.net 更新 web 应用程序中的用户信息

> ID：10175022
> 
> 赞同：3
> 
> 时间：2012-04-16T13:24:51.277
> 
> 标签：c#, asp.net, entity-framework

我正在创建一个网络应用程序，在这个应用程序中，我希望允许用户更新他们的用户信息（名字、姓氏、电子邮件、电话号码、公司名称）或更改他们的密码。当页面加载时，他们的当前信息被输入到文本框中。我的问题是我不知道如何应用用户所做的更改。我的代码目前如下所示：

```
 DataClasses1DataContext context = new DataClasses1DataContext();
    User user = new User();

    protected void Page_Load(object sender, EventArgs e)
    {
        string usr = Session["SessionUserName"].ToString();

        user = (from u in context.Users
                    where u.username.Equals(usr)
                    select u).FirstOrDefault();

        txtFName.Text = user.firstName;
        txtLName.Text = user.lastName;
        txtCompany.Text = user.companyName;
        txtEmail.Text = user.email;
        txtPhone.Text = user.phoneNumber;

    }

    protected void btnUpdate_Click(object sender, EventArgs e)
    {

        using (DataClasses1DataContext context2 = new DataClasses1DataContext())
        {
            User nUser = (from u in context2.Users
                          where u.username == user.username
                          select u).SingleOrDefault();

            if (nUser != null)
            {
                //make the changes to the user
                nUser.firstName = txtFName.Text;
                nUser.lastName = txtLName.Text;
                nUser.email = txtEmail.Text;
                if (!String.IsNullOrEmpty(txtPhone.Text))
                    nUser.phoneNumber = txtPhone.Text;
                if (!String.IsNullOrEmpty(txtCompany.Text))
                    nUser.companyName = txtCompany.Text;
                nUser.timeStamp = DateTime.Now;
            }

            //submit the changes
            context2.SubmitChanges();

            Response.Redirect("Projects.aspx");

        } 
```

这不会给我任何错误，但它也不会应用更改。一些谷歌搜索导致我添加

```
context2.Users.Attach(nUser); 
```

但这给了我错误消息：System.InvalidOperationException：无法附加已经存在的实体。所以我尝试了

```
context2.Users.Attach(nUser, true); 
```

我得到了同样的错误信息。

再看看谷歌，我发现了关于首先分离实体的信息，但该信息大约有 3 年的历史，似乎不再有效（因为 context.Detach 或 context.Users.Detach 不是选项，给我构建错误如果我尝试使用它们）。我收到的其他错误消息（我不记得我是如何说实话的）建议我更改更新策略，因此我将 Users 类下的所有字段设置为 never 用于更新策略。有人建议反序列化然后再次序列化数据，但我找不到有关如何执行此操作的任何信息。任何帮助，将不胜感激。

编辑：由于下面的一些建议而更改了代码，但它仍然无法正常工作。我没有收到任何错误消息，但没有保存数据。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            string usr = Session["SessionUserName"].ToString();

            user = (from u in context.Users
                    where u.username.Equals(usr)
                    select u).FirstOrDefault();

            txtFName.Text = user.firstName;
            txtLName.Text = user.lastName;
            txtCompany.Text = user.companyName;
            txtEmail.Text = user.email;
            txtPhone.Text = user.phoneNumber;
        }  

    }

    protected void btnUpdate_Click(object sender, EventArgs e)
    {

                //make the changes to the user
                user.firstName = txtFName.Text;
                user.lastName = txtLName.Text;
                user.email = txtEmail.Text;
                if (!String.IsNullOrEmpty(txtPhone.Text))
                    user.phoneNumber = txtPhone.Text;
                if (!String.IsNullOrEmpty(txtCompany.Text))
                    user.companyName = txtCompany.Text;
                user.timeStamp = DateTime.Now;
                //submit the changes
            context.SubmitChanges();

            Response.Redirect("Projects.aspx");

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:34:34.803

发生这种情况是因为您在更新之前将相同的信息写回这些文本框。您需要做的就是将您的 page_load 更改为：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        string usr = Session["SessionUserName"].ToString();

        user = (from u in context.Users
                where u.username.Equals(usr)
                select u).FirstOrDefault();

        txtFName.Text = user.firstName;
        txtLName.Text = user.lastName;
        txtCompany.Text = user.companyName;
        txtEmail.Text = user.email;
        txtPhone.Text = user.phoneNumber;
    }
} 
```

page_load 在更新之前执行。因此，它正在重新分配原始值，然后用相同的值更新它们。希望这可以帮助！祝你好运！

编辑：问题更新后所做的更改：

将您的整个代码更改为此。我还添加了一些需要检查您是否应该从顶部处理和删除全局变量：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        if (Session["SessionUserName"] != null)
        {
            string usr = Session["SessionUserName"].ToString();

            DataClasses1DataContext context = new DataClasses1DataContext();
            User user = (from u in context.Users
                         where u.username.Equals(usr)
                         select u).FirstOrDefault();

            if (user != null)
            {
                txtFName.Text = user.firstName;
                txtLName.Text = user.lastName;
                txtCompany.Text = user.companyName;
                txtEmail.Text = user.email;
                txtPhone.Text = user.phoneNumber;
            }
            else
            {
                //--- handle user not found error
            }
        }
        else
        {
            //--- handle session is null
        }
    }
}

protected void btnUpdate_Click(object sender, EventArgs e)
{
    if (Session["SessionUserName"] != null)
    {
        string usr = Session["SessionUserName"].ToString();

        try
        {
            DataClasses1DataContext context = new DataClasses1DataContext();
            User nUser = (from u in context.Users
                          where u.username.Equals(usr)
                          select u).FirstOrDefault();

            //make the changes to the user
            nUser.firstName = txtFName.Text;
            nUser.lastName = txtLName.Text;
            nUser.email = txtEmail.Text;
            if (!String.IsNullOrEmpty(txtPhone.Text))
                nUser.phoneNumber = txtPhone.Text;
            if (!String.IsNullOrEmpty(txtCompany.Text))
                nUser.companyName = txtCompany.Text;
            nUser.timeStamp = DateTime.Now;

            //submit the changes
            context.SubmitChanges();

            Response.Redirect("Projects.aspx");
        }
        catch (Exception ex)
        {
            //--- handle update error
        }
    }
    else
    {
        //--- handle null session error
    }
} 
```

这应该适合你。让我知道！祝你好运！

# python - 为什么添加“和”会破坏代码行的工作方式？

> ID：10175029
> 
> 赞同：-2
> 
> 时间：2012-04-16T13:25:25.617
> 
> 标签：python, django

所以现在我有

```
if request.POST['superPoints'].count('.') == False: 
```

然后它继续到其他代码。但是如果我添加

```
if request.POST['cashTexts'].count('.') and request.POST['superPoints']('.') == False: 
```

它总是转到 else: 语句，无论在两种形式中输入什么。因此，当您尝试计算两件事时，是否会出现其他不是 False 的东西并扰乱流程？为什么结合这些语句不起作用？

编辑：
如果我这样做，它会起作用：

```
if request.POST['cashTexts'].count('.') == False: 
```

所以我不认为这是其中一个领域的问题。

编辑:: 如果我将它们设置为！= True，它会起作用。不知道为什么，但我一定得到了一些错误以外的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:27:15.630

尝试：

```
if not request.POST['cashTexts'].count('.') and not request.POST['superPoints']: 
```

我相信您的问题与运算符优先级有关。

你在做：

```
test1 and test2 == False 
```

这转化为：

```
test1 and (test2 == False) 
```

这与以下内容相同：

```
test1 == True and test2 == False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:50:55.027

在 Python 中测试真实性的首选方法是：

```
if obj:
    pass 
```

代替：

```
if obj == True:
    pass 
```

同样对于虚假：

```
if not obj:
    pass 
```

代替：

```
if obj == False:
    pass 
```

此外，`.count()`字符串方法返回子字符串的出现次数。如果您只想测试一个字符是否在字符串中至少出现一次，请使用以下命令：

```
if '.' in mystr:
    pass 
```

如果要测试字符是否不在字符串中，请使用以下命令：

```
if '.' not in mystr:
    pass 
```

因此，如果您想测试任一字段中是否没有点，请执行以下操作：

```
if '.' not in request.POST['cashTexts'] and '.' not in request.POST['superPoints']:
    pass 
```

# c# - 带有 itemsource 选项的组合框动态数据显示。如何选择特定项目？

> ID：10175031
> 
> 赞同：2
> 
> 时间：2012-04-16T13:25:31.930
> 
> 标签：c#, wpf

我有一个组合框，数据动态分配如下

```
<combobox 
    name="clientbox"
    itemsource={Binding}, 
    displaymemberpath="ClientName" 
    selectedvaluepath="clientid" /> 
```

我正在从数据库加载客户端详细信息并将它们设置为列表框并分配给组合框，如下所示。

```
clientbox.DataContext = <list> 
```

运行后我可以在组合框中看到数据。这将选择第 0 个项目，但我想默认选择不同的项目。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:37:24.277

有几种可能性：

**代码隐藏：**

```
// Setting the 0-based index
clientBox.SelectedIndex = 1;

// Setting the item
clientBox.SelectedItem = activeClient;

// Setting the value (explanation follows..)
clientBox.SelectedValue = activeClientValue 
```

使用该`SelectedValue`属性，您可以定义用于填充`ComboBox`. 一个例子：你用具有属性`ComboBox`的类的项目填充，依此类推。如果您选择一个项目，该属性将是该类的一个实例。通过将 的属性设置为将始终只包含所选客户端的 id。`Client``Id``Name``SelectedItem``Client``SelectedValuePath``ComboBox``Id``SelectedValue`

**捆绑：**

当然，您始终可以使用绑定。

```
<ComboBox x:Name="clientBox"
    ItemsSource={Binding ClientList}, DisplayMemberPath = "Name" 
    SelectedValuePath="Id"
    SelectedValue={Binding ActiveClient} /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:27:30.450

```
 clientbox.SelectedItem =  ((ComboBoxItem)clientbox.Items[1]);
  clientbox.Text = ((ComboBoxItem)clientbox.Items[1]).Content.ToString(); 
```

# multithreading - 可以从多个线程安全地访问静态数组吗？

> ID：10175037
> 
> 赞同：13
> 
> 时间：2012-04-16T13:25:57.507
> 
> 标签：multithreading, delphi, delphi-xe2

如果保证每个线程只读取/写入数组的特定子集，多个线程可以在同一个（静态）数组上工作而不诉诸关键部分等吗？

**编辑**- 这是针对非引用计数类型数组及其记录/打包记录的特定情况。

如果是，有什么注意事项吗？

我的直觉是肯定的，但我的直觉有时可能是不可靠的信息来源。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T14:50:43.930

假设：

1.  您有一个数组的单个实例（静态或动态），并且
2.  数组的元素是纯值类型（即不包含引用），并且
3.  每个线程对不相交的子数组进行操作，并且
4.  当线程在阵列上运行时，系统中没有其他任何内容写入阵列。

有了这些条件，我相信您的数据结构和线程模式可以满足这些条件，那么所有算法都是线程安全的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-16T14:09:14.207

不，在某些情况下，这不可能是线程安全的。

我至少看到两个原因。

*1\. 取决于静态数组的内容。*

如果您使用一些非引用计数类型（如`double, integer, bytes, shortstring`），在大多数情况下不会有任何问题（至少如果数据是只读的）。

但是，如果您使用一些引用计数类型（例如`string, interface`，或嵌套动态数组），则必须注意线程安全。

那是：

```
TMyType1: array[0..1] of integer; // thread-safe on reading
TMyType2: array[0..1] of string;  // may be confusing 
```

*附加说明*：如果您`string`实际上在静态数组的某些子部分之间共享，则可能会混淆引用计数。除非您明确要求`UniqueString()`每个人（我怀疑在关键部分内）。`double`对于or数组`integer`，您不会遇到此问题。

*2\. 取决于访问并发*

读取访问应该是线程安全的，即使对于引用计数类型，但并发写入可能会令人困惑。对于 a `string`，在某些随机情况下，您可能会遇到 GPF 问题，尤其是在多核 CPU 上。

一些安全的实施可能是：

*   使用临界区（尽可能小，以减少开销）或其他保护结构；
*   确保使用*Copy-On-Write或内容的私有每个线程副本；*
*   *最新说明*（不是关于安全，而是关于性能）：在多个 CPU 之间共享一个阵列可能会由于 CPU 之间的缓存同步而导致性能下降。当您使用分离的数组时，性能有时会好得多，确保它们的 L1 缓存窗口不会在 CPU 之间共享。

请注意，在客户端调试此类问题可能是一场噩梦：多线程并发问题可能随机发生，并且很难跟踪。越安全越好，除非您有*明确且经过验证*的性能问题。

*附加说明*：对于您的双静态数组的特定情况，数组的子部分仅由一个线程访问，它是线程安全的。但是在所有情况下都没有绝对的线程安全规则，即使对于静态数组也是如此。一旦您使用一些引用计数类型或一些指针，您可能会遇到随机问题。

# android - Android 动画 ShapeDrawable

> ID：10175038
> 
> 赞同：1
> 
> 时间：2012-04-16T13:26:00.757
> 
> 标签：android

我正在尝试使用某些特定的基于类来绘制`Drawable`基于类的动画来绘制其内容。`ShapeDrawable``Shape`

`Shape`根据需要，应更改基于类中的某些值，并且应根据这些值进行更改（例如某种程度的温度变化）。整件事都是为 Android 2.1 编写的。我发现，我的呼唤`invalidateSelf()`应该`ShapeDrawable`没问题，但我必须提供`Drawable.Callback`它。

`invalidateDrawable( Drawable who )`问题是，接口方法中应该提供什么`Drawable.Callback`？使用这种方法的一些示例：

```
class MyShapeDrawable extends ShapeDrawable implements Drawable.Callback
{
    public void invalidateDrawable( Drawable who ) {
    }

    public void scheduleDrawable(Drawable who, Runnable what, long when) {
    }

    public void unscheduleDrawable(Drawable who, Runnable what) {
    }
} 
```

当我调用`invalidateSelf()`我`ShapeDrawable`的基于类的`invalidateDrawable()`方法被调用，但是在这个方法中应该做什么呢？如何强制我`Shape`的更新和重绘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:44:54.300

这是 View.java 的 android 源代码中的实现...

```
public void invalidateDrawable(Drawable drawable) {
    if (verifyDrawable(drawable)) {
        final Rect dirty = drawable.getBounds();
        final int scrollX = mScrollX;
        final int scrollY = mScrollY;

        invalidate(dirty.left + scrollX, dirty.top + scrollY,
                dirty.right + scrollX, dirty.bottom + scrollY);
    }
} 
```

# plone - form.SchemaEditForm 与 ignoreContext

> ID：10175040
> 
> 赞同：0
> 
> 时间：2012-04-16T13:26:03.907
> 
> 标签：plone

大家

我正在尝试为上下文以外的对象制作编辑表单。它是存储在会话中的字典。我正在关注 Martin Aspeli [Schema Drive Forms](http://plone.org/products/dexterity/documentation/manual/schema-driven-forms/form-types/edit-forms)。这应该很容易，但由于某种原因，编辑表单不会加载任何数据。也许我丢失了一些简单的细节，但我找不到它。我做了 ignoreContext=True 并尝试返回一个字典，然后返回一个实现模式的实例，但它没有工作。

```
from plone.directives import form, dexterity
from zope.interface import invariant, Invalid, implements

class IUser(form.Schema):
    '''Represents an user'''

    uid = schema.TextLine(
        title = _(u'Login'),
        )
    gn  = schema.TextLine(
        title = _(u'Name'),
        )
    sn  = schema.TextLine(
        title = _(u'Surname'),
        )
    uniqueIdentifier  = schema.TextLine(
        title = _(u'Identifier'),
        description = _(u'Ej. V11222333'),
        )
    accClass = schema.TextLine(
        title = _(u'User class'),
        )
    dateExpiration = schema.TextLine(
        title = _(u'Date of expiration'),
        )

class User:
    implements(IUser)

    def __init__(self, **kargs):
        self.uid = kargs['uid']
        self.gn = kargs['givenName']
        self.sn = kargs['sn']
        self.uniqueIdentifier = kargs['uniqueIdentifier']
        self.accClass = kargs['accClass']
        self.dateExpiration = kargs.get('dateExpiration', '2015/06')

class Edit(form.SchemaEditForm):
    '''Modify User'''
    grok.context(IUserManager)  # It's ok. This is a view of an IUserManager object
    grok.require('zope2.View')  # <- just for testing
    grok.name('modify')

    schema = IUser
    ignoreContext = True
    label = 'Modify an User'

    def getContent(self):
        # I've tried returning a dictionary too, but it's useless
        user = User(**SessionUsers(self.context).current())
        return user 
```

# .net - Lucene .NET 索引的索引浏览器（UI 工具）

> ID：10175045
> 
> 赞同：1
> 
> 时间：2012-04-16T13:26:21.867
> 
> 标签：.net, lucene.net, lucene

Lucene .NET 索引的索引浏览器（UI 工具） - 它存在吗？我知道 LUKE，它是（几年前停止开发）用于 Java 版本的 Lucene 的索引浏览器工具，但是 .NET 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T20:21:23.193

Luke 于 2012/12/28 更新至 3.5.0，其中包含 Lucene 3.5.0。

Luke 3.5.0 完美地浏览了 Lucene.NET 2.9.2 索引。

# matlab - 如何从函数中绘制 3D 表面

> ID：10175046
> 
> 赞同：1
> 
> 时间：2012-04-16T13:26:30.450
> 
> 标签：matlab, 3d, geometry-surface

我是 Matlab 的新手，在绘制以下不等式的表面时遇到问题

```
Calc.S0Func(2.7,1,1,sigmaL)-Calc.S0Func(c,delta,xT,sigmaH)>0 
```

其中 Calc 是一个类，S0Func(c,delta,xT,sigma) 是一个具有 3 个未知数 (c, delta, xT) 的函数

希望这是足够的信息。S0Function 是一个很大的函数，所以我没有在这里发布它。

非常欢迎任何帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:26:00.043

我不确定不平等的表面应该是什么。你是偶然寻找`isosurface`吗？

```
[c, delta, xT] = meshgrid(-2:.1:2, -2:.1:2, -2:.1:2);
values = c.^4 + delta.^4 + xT.^2.*sin(xT);
patch(isosurface(c, delta, xT, values, 1), 'FaceColor', 'red')
view(3) 
```

# javascript - 在一定时间后更改字体颜色

> ID：10175051
> 
> 赞同：-3
> 
> 时间：2012-04-16T13:26:39.907
> 
> 标签：javascript, html

我想在网站上放一些文本，这样它会在一些（比如 2 秒）时间延迟后改变颜色 onmouseover 并返回到原始颜色 onmouseout。

是否可以使用 JavaScript 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:31:38.423

[使用 jQuery，您可以执行以下操作（此处](http://jsfiddle.net/QdBdd/)为 JSFiddle ）

HTML：

```
<a id='v1'>Hello</a>​ 
```

JS：

```
​setTimeout(function() {
    $('#v1').css('color','#777');
}​,2000);​ 
```

**编辑**：完整的 JSFiddle 示例[在这里](http://jsfiddle.net/QdBdd/1/)

JS：

```
$('#v1').hover(function() {
     $(this).css('color','#777');   
}, function() {
    setTimeout(function() {
        $('#v1').css('color','#000');
     },2000);
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:45:31.107

此类功能应由 CSS3 提供（如果可用），而不涉及 setTimeout 或其他类型的 javascript。因此，假设您将为 IE 选择以前提出的 Javascript 解决方案之一，只需将此 CSS 用于其他所有现代浏览器

html/css

```
<span>hover me</span>

span {
    color : green;
    -webkit-transition : color 2s linear;
    -msie-transition : color 2s linear;
    -moz-transition : color 2s linear;
    -o-transition : color 2s linear;
    transition : color 2s linear;
}

span:hover {
    color : red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:32:10.130

使用此功能添加`onmouseout="timedFunction()"`到您的文本中：

```
function timedFunction{    
    var timeout = setTimeout("changeColor()",timeInMilliseconds);
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-16T13:43:20.523

这是一个使用 setTimeout 的工作示例；

css：.text { 颜色：红色；} .text.hover { 颜色：黄色；}

javascript:

```
var timeoutId = null;
$(".text").hover(function() {
    if (timeoutId != null) {
        clearTimeout(timeoutId);
        timeoutId = null;
    }
    $(this).addClass("hover");
}, function () {
    var $element = $(this);
    timeoutId = setTimeout(function() {
        $element.removeClass("hover");
    }, 500);
});​ 
```

这是jsfiddle：http: [//jsfiddle.net/9TJfD/8/](http://jsfiddle.net/9TJfD/8/)

# android - 在带有 Intent Extra 的活动之间传递数据时，我一直得到相同的值

> ID：10175052
> 
> 赞同：0
> 
> 时间：2012-04-16T13:26:43.097
> 
> 标签：android, android-intent

在我的游戏中，我试图使用 Intent Extra 将分数从 PlayGame 活动传递到记分牌活动。比赛结束后，我以这种方式进入记分牌：

```
Intent intentScoreboard = new Intent(getApplicationContext(), Scoreboard.class);
intentScoreboard.putExtra("com.example.game.SCORE", score_counter);
startActivity(intentScoreboard); 
```

然后在记分板类中，我在 onResume() 方法中检索它，如下所示：

```
Bundle b = getIntent().getExtras();
int score = b.getInt("com.example.game.SCORE"); 
```

这第一次很好，但如果我再玩另一场比赛并完成返回记分牌，我仍然会从第一场比赛中获得分数。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:29:30.390

你错过了调用 setIntent()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:35:43.420

试试这个：如果你回来开始新游戏，让你的得分活动做一个finish()

那么它应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:37:20.993

getIntent 传递启动活动的意图。如果活动恢复，您将不会获得最近收到的意图。请参阅此处了解解决方案：[https ://stackoverflow.com/a/6838082/1127492](https://stackoverflow.com/a/6838082/1127492)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:48:00.427

`Bundle``getExtra()`接收值不需要太多。在我的代码中，我曾经收到过这样的信息，

`int score = getIntent().getIntExtra("com.example.game.SCORE",defaultValue);`

它应该适用于您的问题。而且它也不会给你已经收到的值。

希望这对你来说听起来不错，伙计。

# javascript - mongo db , node express , 从 mongodb 返回的输出中提取一个元素

> ID：10175053
> 
> 赞同：0
> 
> 时间：2012-04-16T13:26:44.940
> 
> 标签：javascript, node.js, express

对于第一个代码块，console.log("ff : "+ff) 打印完全像这样：

> ff：{_id：sd845y3hishofiuwhei，全名：'sachin'}

```
console.log("ff JSON : "+JSON.stringify(ff)); // this line prints like below : 
```

> ff JSON：[{“_id”：“sd845y3hishofiuwhei”，“全名”：“sachin”}]

我怎样才能在一个单独的变量中分别得到那个“sachin”？

```
var fullname=SampleModel.find({uname:req.session.uname},{fullname : true},function(err,ff){
    if(!err){
        console.log("ff : "+ff);
        console.log("ff JSON  : "+JSON.stringify(ff));
        return ff;
    }else { 
        return null;
    }
}); 
```

下面的代码块给出了“invalid object id”之类的错误。可能是什么问题？

```
var ret= AnotherModel.find({_id : { $nin : ["1","2"] } }, function(err,details){
    if(!err) {
        res.send(details);
    }
    else {
        console.log("Error : "+err);
        res.send(err);
    }
}); 
```

我正在像这样实现textarea

```
<textarea id="myarea" cols="100" rows="20"   ></textarea> 
```

当我改变行时，输出框正在改变它的高度，但是当我改变“cols”时，它的宽度没有改变。输出框的宽度也很小，我检查了 chrome 和 mozilla。有什么解决办法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:03:57.980

我了解您使用 mongoose 而不仅仅是 mongodb 驱动程序。

在第一个代码块中，ff 值不是一个字符串，而是一个对象数组。

您可以访问“sachin”变量，只需执行以下操作：`var fullname = ff[0].fullname;` 当然，最好遍历数组，但您明白了。

如果您只想检索一个对象，则应使用“findOne”函数，然后您就可以像这样访问“sachin”：`var fullname = ff.fullname;`

对于第二个问题，您应该使用查询系统。查询是延迟的请求，您可以更精细地链接和调整。要延迟您的查询，只需省略回调函数：`var query = Model.find({});`

然后，根据您的情况添加所需的过滤器：`query.where('_id').nin(['1', '2']);`

最后，执行它：

```
query.exec(function (err, docs) {
    // called when the `query.complete` or `query.error` are called
    // internally
}); 
```

有关[查找文档](http://mongoosejs.com/docs/finding-documents.html)和[查询](http://mongoosejs.com/docs/query.html)的信息。

# c - 如何在 Vala 中使用 CCode 属性？

> ID：10175058
> 
> 赞同：6
> 
> 时间：2012-04-16T13:27:08.760
> 
> 标签：c, code-generation, abstract-syntax-tree, vala

我正在尝试使用 Vala 的 C 宏。在我看来，这应该可以通过 CCode 指令实现，但我找不到任何关于如何使用它的有意义的文档。

[在“The Hacker's Guide to Vala”](http://rodney.id.au/dev/vala/hackers.html#id2533228)中有一个关于 CCode 参数的简短部分，还有一个关于[使用 CCode 从 Vala 调用 C 宏的邮件列表](http://mail.gnome.org/archives/vala-list/2009-November/msg00000.html) 线程。

但是这两种资源都不能真正帮助我理解 CCode 的真正作用。它显然会影响 Vala 如何生成 C 代码，从[Hackers' Guide to Vala](https://live.gnome.org/Vala/Hacking)我可以推断出 CCode 指令可能直接影响了我在遍历 Valas AST 时如何创建 CCode 树。

谁能解释一下 CCode 的作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T03:27:13.547

不幸的是，没有大量关于 CCode 的单独有意义的文档。您需要做的是将它与 Vala 附带的 VAPI 文件结合使用。在最基本的情况下，您可能会使用如下宏：

```
[CCode(cname = "FOO", cheader_filename = "blah.h")]
public extern void foo(); 
```

这里我们设置`cname`（即，将被发送到C 代码中的名称）和`cheader_filename`（即，应为`#include`d 的头文件）。大多数其他 CCode 属性控制如何处理数组。`array_length = false`表示数组的长度未知。这可以应用于参数或方法，表示应用于返回类型。例如：

```
[CCode(array_length = false)] public int[] x();
[CCode(array_null_terminated = true)] public FileStream[] y();
public int[] z(); 
```

在此示例中，`x`将具有未知的数组长度并具有预期的 C 原型`int *x(void)`，而`y`假设具有以空结尾的数组，预期的 C 原型为`FILE **y(void)`。最后，`z`假设有一个数组长度输出参数（即 的原型`int *z(int *length)`，其中`length`是指向存储返回数组长度的位置的指针。

所有这些也可以应用于参数。`array_length_pos`指定是否有数组长度也很有用，但它不是紧跟在数组后面的参数。如果参数是委托，`target_pos`则指定用户数据的传递位置（即，`void*`与函数指针一起传递的位置）。

还有各种用于委托、类和结构的 CCode 属性。`instance_pos`指定类/结构实例或委托用户数据的去向。所有位置参数都用浮点数指定。这允许对多个位置进行编码。例如，假设我们有一个 C 原型：

```
void foo(void* userdata, int length, double *dbl_array, void(*handler)(double,void*)); 
```

那么我们可以这样写：

```
[CCode(cname = "foo")]
public void foo([CCode(array_length_pos = 0.2)] double[] array, [CCode(target_pos = 0.1)] Handler func); 
```

Given`Handler`在其他地方被定义为委托，您可以看到这些`pos`值将参数放在参数 0 之后（即开始），然后以特定顺序放置。

类和结构具有处理初始化、销毁和引用计数的功能，但这些功能相当简单。处理泛型也有点复杂。同样，VAPI 是最好的洞察力来源。但是，这足以让您开始使用基本的 C 函数和宏。

# javascript - OpenLayers 获取新创建点的位置

> ID：10175062
> 
> 赞同：2
> 
> 时间：2012-04-16T13:27:16.667
> 
> 标签：javascript, openlayers

我正在使用

```
lineLayer.events.on({
    "vertexmodified": update
}); 
```

在修改后获取线路信息。如果在 2 个现有点之间添加一个新点，有没有办法找出新点相对于其他所有点的位置？

我正在根据行的值更新表，并且需要知道在哪里插入新行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:01:45.020

您可以通过查看其父集合来确定顶点的位置：

```
var vertex = event.vertex;
var idx = vertex.parent.components.indexOf(vertex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:36:24.530

你不能（使用实际的 OpenLayers 代码）。我建议您获取整个几何图形（您可以`event.feature.geometry`从侦听器参数访问），并立即更新整个几何图形，而不是仅更新一个点。

# arrays - 我在数组中添加数字时遇到问题——x86 MASM 程序集

> ID：10175063
> 
> 赞同：0
> 
> 时间：2012-04-16T13:27:19.843
> 
> 标签：arrays, assembly, x86, masm, irvine32

我必须创建一个从 27 到 58 的 100 个数字的随机范围，然后将 100 个位置中的所有数字相加得到总数。但是，当我这样做时，我得到一个随机数和九十九个 32。我到处搜索并尝试了可能的解决方案，但我得到相同的结果或随机垃圾。有人可以提供一些帮助吗？

```
INCLUDE irvine32.inc

    .data
         a DWORD 27
         b DWORD 58
         delta DWORD ?

         source DWORD 100 DUP(?)

         prompt BYTE "The sum of the 100 counts in array is ",0

    .code
    main PROC
         Call Randomize

         mov edi, 0

         mov edi, OFFSET delta
         mov esi, OFFSET source

         mov eax, b
         sub eax, a
         inc eax
         mov delta, eax

         mov ecx, LENGTHOF source
         mov eax, 0
         L1:    

             mov eax, delta     
             call randomrange
             add eax, a
             mov source, eax
             call writedec
             mov al, " "
             call writechar

         loop L1

         call crlf
         call crlf

         mov ecx, SIZEOF source
         mov edx, OFFSET prompt
         call writestring

         l2:
             add eax,[esi]  
             add esi, TYPE delta

             call writedec
             mov al, " "
             call writechar
         loop l2

    exit

    main ENDP

    END main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:43:48.350

我假设 randomrange 将其随机数留在 EAX 中。

在 L1 循环中，将 A 添加到 EAX 以获取随机值，然后每次通过 L1 循环将其复制到 SOURCE 的第一个元素。这就是为什么第一个元素是随机的，但数组的其余部分没有被触及。（请注意，您在 L2 中遇到了同样的问题——您总是从 SOURCE 的第一个元素中获取要打印的值。）

# chunked-encoding - 在 .Net 中读取分块的 HTTP

> ID：10175065
> 
> 赞同：0
> 
> 时间：2012-04-16T13:27:29.407
> 
> 标签：chunked-encoding

我正在尝试编写一个读取 HTTP 分块数据的 VB.net 客户端。这些块包含我需要使用的附加信息。我已经发现我不能使用 HTTPWebResponse，因为它隐藏了可选标签。所以，按照我的理解，我需要使用 TCPClient，通过它发送 HTTP 请求，然后解析响应。此时我的问题是如何创建和发送 HTTP 请求，尤其是在 HTTPWebRequest 不可序列化的情况下。

任何帮助，包括指示更好的方法来做到这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:32:20.443

如果您#re 要使用 TCPClient，那么您将不得不手动执行请求。幸运的是，HTTP 相当容易做到。只需编写您需要发送的标头，以 /n/r 分隔。

您可能想要/需要阅读 HTTP 规范。

# python - 从 MultiIndex 中选择特定级别的数据

> ID：10175068
> 
> 赞同：15
> 
> 时间：2012-04-16T13:27:44.143
> 
> 标签：python, pandas

我有以下带有 MultiIndex(Z,A) 的 Pandas 数据框：

```
 H1       H2  
   Z    A 
0  100  200  0.3112   -0.4197   
1  100  201  0.2967   0.4893    
2  100  202  0.3084   -0.4873   
3  100  203  0.3069   NaN        
4  101  203  -0.4956  NaN 
```

问题：如何选择 A=203 的所有项目？我试过`df[:,'A']` 了，但它不起作用。然后我在在线文档中找到[了这个](http://pandas.pydata.org/pandas-docs/stable/indexing.html#cross-section-with-hierarchical-index)，所以我尝试了：
`df.xs(203,level='A')`
但我得到：
“ `TypeError: xs() got an unexpected keyword argument 'level'`”我在安装的 doc( )
中也没有看到这个参数： “参数 ---------- key : object Some label contains in索引，或部分在 MultiIndex 轴：int，默认 0 轴以在复制时检索横截面：布尔值，默认 True 是否复制数据“ 注意：我有开发版本。`df.xs?`

编辑：我找到[了这个线程](http://www.digipedia.pl/usenet/thread/16070/6393/)。他们推荐类似的东西：

```
df.select(lambda x: x[1]==200, axis=0) 
```

我仍然想知道带有 level 参数的 df.xs 发生了什么，或者在当前版本中推荐的方式是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T21:47:06.370

问题在于我的假设（不正确）我在开发版本中，而实际上我有 1.6.1，可以通过以下方式检查当前安装的版本：

```
import pandas
print pandas.__version__ 
```

在当前版本`df.xs()`中使用 level 参数可以正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-13T00:02:21.893

不是对这个问题的*直接*回答，但如果您想选择多个值，您可以使用“slice()”表示法：

```
import numpy
from pandas import  MultiIndex, Series

arrays = [['bar', 'bar', 'baz', 'baz', 'foo', 'foo', 'qux', 'qux'],
              ['one', 'two', 'one', 'two', 'one', 'two', 'one', 'two']]
tuples = list(zip(*arrays))
index = MultiIndex.from_tuples(tuples, names=['first', 'second'])
s = Series(numpy.random.randn(8), index=index)

In [10]: s
Out[10]:
first  second
bar    one       0.181621
       two       1.016225
baz    one       0.716589
       two      -0.353731
foo    one      -0.326301
       two       1.009143
qux    one       0.098225
       two      -1.087523
dtype: float64

In [11]: s.loc[slice(None)]
Out[11]:
first  second
bar    one       0.181621
       two       1.016225
baz    one       0.716589
       two      -0.353731
foo    one      -0.326301
       two       1.009143
qux    one       0.098225
       two      -1.087523
dtype: float64

In [12]: s.loc[slice(None), "one"]
Out[12]:
first
bar      0.181621
baz      0.716589
foo     -0.326301
qux      0.098225
dtype: float64

In [13]: s.loc["bar", slice(None)]
Out[13]:
first  second
bar    one       0.181621
       two       1.016225
dtype: float64 
```

# postgresql - 计算PostgreSQL中批处理查询影响的行数

> ID：10175073
> 
> 赞同：4
> 
> 时间：2012-04-16T13:27:53.627
> 
> 标签：postgresql, plpgsql, dynamic-sql

首先，是的，我已经阅读了 DO 语句的文档 :) [http://www.postgresql.org/docs/9.1/static/sql-do.html](http://www.postgresql.org/docs/9.1/static/sql-do.html)

所以我的问题：

我需要执行一些包含 UPDATE 语句的动态代码块并计算所有受影响的行数。我正在使用`Ado.Net`提供程序。

在 Oracle 中，解决方案将有 4 个步骤：

1.  将 InputOutput 参数“N”添加到命令
2.  添加**开始...结束；**命令
3.  在每个语句后添加**:N := :N + sql%rowcount 。**
4.  完成！我们可以在执行后从命令中读取 N 参数。

我怎样才能用 PostgreSQL 做到这一点？我正在使用 npgsql 提供程序，但如果有帮助可以迁移到 devard。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T13:32:49.490

`DO`语句块非常适合执行动态 SQL。它们不利于返回值。为此使用[plpgsql](https://www.postgresql.org/docs/current/interactive/plpgsql.html) [函数](https://www.postgresql.org/docs/current/interactive/sql-createfunction.html)。

您需要的关键语句是：

```
GET DIAGNOSTICS integer_var = ROW_COUNT; 
```

[手册中的详细信息。](https://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-DIAGNOSTICS)

示例代码：

```
CREATE OR REPLACE FUNCTION f_upd_some()
  RETURNS integer AS
$func$
DECLARE
   ct int;
   i  int;
BEGIN
   EXECUTE 'UPDATE tbl1 ...';       -- something dynamic here
   GET DIAGNOSTICS ct = ROW_COUNT;  -- initialize with 1st count

   UPDATE tbl2 ...;                 -- nothing dynamic here 
   GET DIAGNOSTICS i = ROW_COUNT;
   ct := ct + i;                    -- add up

   RETURN ct;
END
$func$  LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM f_upd_some(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:18:31.600

我的解决方案很简单。在 Oracle 中，我需要使用变量来计算更新行的总和，因为`command.ExecuteNonQuery()`仅返回受批处理中最后一次 UPDATE 影响的行数。

但是，`npgsql`返回由所有 UPDATE 查询更新的所有行的总和。所以我只需要调用`command.ExecuteNonQuery()`并得到没有任何变量的结果。比使用 Oracle 容易得多。

# php - 数据库效率/结构问题

> ID：10175076
> 
> 赞同：1
> 
> 时间：2012-04-16T13:28:09.330
> 
> 标签：php, mysql, database, normalization

我正在我正在创建的网站上编写电子邮件系统的简化版本。

基本前提是用户可以在网站上互相发消息，最好的例子是 ebay，你可以在网站本身上给其他用户发消息，它基本上就像一个电子邮件系统。

我所拥有的是消息本身，来自谁，发给谁以及文本。

我还希望有基本的“已读/未读”和“已删除”，甚至可能是“已发送”类别。

像这样的东西：

表结构：

id、to、from、subject、body、dateTime

我想知道的是，在该表中添加“已读”和“已删除”列是否更有意义，并在我在网站上需要它们时搜索这些特定条件，或者它是否更有效/最佳实践是有另一个“类别”表，然后有一个连接表放置一个带有类别 ID 的消息 ID，然后在请求时使用该连接表来提供信息？

如果我的问题没有意义，请原谅我，我对这些东西还是很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:31:54.290

我会添加两列：

```
read tinyint(1),
deleted tinyint(1) 
```

并将它们用作布尔值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T13:44:07.497

我刚刚实现了类似的东西。我将该列放在“消息”表中。我选择了以下内容：

```
ReadDate DATETIME DEFAULT NULL, 
```

如果消息尚未被阅读，ReadDate 为 NULL。用户阅读后，我填写阅读日期。这允许发送者知道接收者何时读取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:42:43.827

我会为这个系统创建三个表。一个用于您的线程（一组消息），一个用于您的实际消息，另一个用于您的类别。

像这样的东西，

```
MessagesThreads
--------------------
id (int, serial)
from (int, foreign: Users.id)
to (int, foreign: Users.id)
subject (varchar)
category (foreign key: Categories.id)

MessagesContent
--------------------
id (int, serial)
threadId (int, foreign: MessagesThreads.id)
content (text)
date (datetime)
status (tinyint) (0 for unread, 1 for read, 2 for deleted, for instance)

Categories
--------------------
id (int, serial) 
name (varchar) 
```

这将是一个适当规范化的数据库。

有了这个，一个线程可以包含一对多的消息（因为外键是 in `MessagesContent`），一条消息只附加到一个踏板上，一个线程可以有一个类别。

根据您的规范，我认为这是存储消息的最有效方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T14:07:40.113

给定这样的用户帐户表：

```
CREATE TABLE tbl_accounts(
    id INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(id),
    email_addr VARCHAR(50) NOT NULL,
    passkey BLOB /* AES KEY */
) ENGINE = InnoDB; 
```

您将需要一个邮箱表来根据用户帐户和他们正在检查的文件夹（收件箱|发件箱）查找电子邮件。我们将这张表分开，使数据库保持“规范化”。

```
CREATE TABLE tbl_email_box(
    account_id INT, /* owner|sender of mail */
    FOREIGN KEY (account_id) REFERENCES tbl_accounts(id) ON DELETE SET NULL,
    email_id INT,
    FOREIGN KEY (email_id) REFERENCES tbl_emails(id) ON DELETE SET NULL,

    folder TINYINT(1), /* 0=inbox->account=owner; 1=outbox->account=sender; */

    status TINYINT(1) DEFAULT 0, /* 0=unread, 1=read */

    date TIMESTAMP     /* because the query executes when they check/send mail, */
                       /* then record is created (date=sent|received date) */
) ENGINE = InnoDB; 
```

此表将存储实际的电子邮件数据

```
CREATE TABLE tbl_emails(
    id INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(id),
    subject VARCHAR(100),
    message BLOB,
    created TIMESTAMP
) ENGINE = InnoDB; 
```

希望这可以帮助。

# javascript - Joomla 中的 Javascript 冲突

> ID：10175081
> 
> 赞同：2
> 
> 时间：2012-04-16T13:28:27.027
> 
> 标签：javascript, jquery, joomla, conflict

我的网站名称是 marutiindia.in。我正在使用两个扩展——模块和插件。模块使用mootools（我认为是mootools---script_12.js），另一个使用jQuery。该模块在主页上。当我尝试启用这两个扩展时，我在 script_12.js 中收到此错误

```
Uncaught TypeError: Object #<Object> has no method 'getElement' 
```

但是插件工作正常，当我禁用这个插件时没有错误。所以我猜这是mootools和jQuery之间的一些冲突。所以我将这个脚本用于插件 jQuery 文件：

```
if(jQuery){ 
  jQuery.noConflict(); 
} 
```

但这并不能解决错误。我做得对还是我还缺少其他东西。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:50:36.567

只做这个

```
if(jQuery){ 
  jQuery.noConflict(); 
} 
```

不能解决您的问题，如果在 jquery 模块中您有`$`签名，那么您将面临同样的冲突问题。

为了摆脱这种冲突，试试这个：

```
jQuery.noConflict()
jQuery(function(){
    //replace all the '$' with 'jQuery'
    jQuery('#some_id').show();
    //instead of
    //$('#some_id').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:16:10.117

看起来您已经运行了 JQuery。（K2 使用它，这可能是问题所在。）可能是这样的脚本排序[问题](https://stackoverflow.com/questions/833883/weird-chrome-prototype-jquery-conflict)。另外，做JQuery没有冲突更像[这样](http://www.minitek.gr/tutorials/javascript-tutorials/item/99-how-to-use-the-jquery-no-conflict-mode.html)

# foreach - 淘汰 Javascript 使用绑定的可观察数组制作 foreach 复选框部分的任何策略

> ID：10175082
> 
> 赞同：1
> 
> 时间：2012-04-16T13:28:29.110
> 
> 标签：foreach, knockout.js, checked, ko.observablearray

基本上我正在制作一个可重复的部分，并且我希望所有复选框的选中状态都由数组预先提供。

```
 <div style="height: 100%; border: 1px solid grey; overflow-y: scroll;" id="AssociatedUsers" data-bind="foreach: AllUserList">
                <input type='checkbox' class='cSupUser' style="width:20px;margin:2px" value="$data" data-bind='checked: supplierUsers' /><span data-bind='text: $data.Text'></span><br />
            </div> 
```

但显然 value="$data" 只是返回字符串 "$data"。我决定开始研究一个解决方案，在我保存和加载相关数据时，我只用 json 字符串映射数组，但这增加了复杂性，感觉就像一个 hack，所以我想知道是否有更好的方法来处理这个情况。我还希望supplierUsers 可以直接映射到viewModel，因为我将从viewModel 生成对服务器的响应，但是observableArrays 似乎不适用于该参数。

我使用淘汰赛框架只有 3 天，感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:48:38.690

我处理这个问题的方法是使用`attr`每个复选框的绑定。例如

```
<input type="checkbox" data-bind="checked : supplierUsers, attr : { value : $data}" /> 
```

# java - 二叉树数组迭代

> ID：10175083
> 
> 赞同：1
> 
> 时间：2012-04-16T13:28:41.480
> 
> 标签：java, binary-tree

我有这个输出，我只需要了解，**他们如何使用这些索引来表示二叉树**？

```
How many numbers?: 6

Enter 1st number: 50
Enter 2nd number: 60
Enter 3rd number: 40
Enter 4th number: 15
Enter 5th number: 30
Enter 6th number: 27

BST Array:
[0]     50
[1]     40
[2]     60
[3]     15
[8]     30
[17]    27 
```

它从 0,1,2,3 开始，然后突然变成索引 8，然后是 17（我猜所有其他索引都是空的，但是为什么索引 8 然后是 17？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:57:31.210

这似乎是一棵没有平衡的普通二叉树。我想它是这样的：

根 -> 索引 0

根/索引 0 左侧 -> 索引 1

根/索引 0 的右侧 -> 索引 2

索引 1 左侧 -> 索引 3

索引 1 的右侧 -> 索引 4

索引 2 左侧 -> 索引 5

索引 2 的右侧 -> 索引 6

索引 3 左侧 -> 索引 7

索引 3 的右侧 -> 索引 8

索引 4 左侧 -> 索引 9

索引 4 的右侧 -> 索引 10

...

索引 i 左侧 -> 2*i + 1

索引 i 的右侧 -> 2*i + 2

## 在示例中：

```
 50
      /  \
    40    60
  /
15
  \ 
  30
  /
 27 
```

For example, 15 is located at index 3\. 30 is its right child and hence will be at index 2*3 + 2 = 8\. 27 is the left child of the element at index 8 and hence located at index 2 * 8 + 1 = 17.

# xml - Restrict/Enumerate xml:lang values in XSD

> ID：10175084
> 
> 赞同：2
> 
> 时间：2012-04-16T13:28:44.067
> 
> 标签：xml, xsd

I have my xml document containing several elements which have an attribute xml:lang.

I want to restrict the values which are allowable for the attribute's value; i.e. only allow "en-US, en-CA".

I've tried adding a restriction, but since the value is referenced that doesn't seem to be valid:

```
<xs:element name="translation">
<xs:complexType>
    <xs:sequence>
    <xs:element ref="name" />
    </xs:sequence>
    <xs:attribute ref="xml:lang" use="required"/>
</xs:complexType>
</xs:element> 
```

Getting the namespace to import was difficult enough and I can't seem to find any good resources on adding restrictions/enumerations to it =(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:00:12.960

Unfortunately, there is no easy way to achieve it. The options you have are definitely not that used.

A quick (and dirty) way is to copy the original xml.xsd on your local machine; edit the xml.xsd file to have the definition you want for the xml:lang attribute; and through some generic mechanism (e.g. catalogs if you want to use dangling types), or simply xsd:import to your modified file, instruct your stack/tooling to use the amended definition. It might not even work in some cases, since some tools may be stubborn enough to use an internal, cached copy, of the xml.xsd; can't comment, since you have not indicated the stack you're on.

There is no clean way to do it in XSD 1.0, simply because xsd:redefine only works for types, and groups of particles and attributes. Since xml:lang is of xsd:language type, there is no way to redefine that to constrain it only to the enumerations you want.

xsd:override in XSD 1.1 would allow for unconstrained replacement; unfortunately, I would be surprised to see a mainstream implementation of the new XSD version.

# c# - Sharepoint 功能区：规避上下文敏感性

> ID：10175092
> 
> 赞同：1
> 
> 时间：2012-04-16T13:29:04.190
> 
> 标签：c#, javascript, sharepoint, ribbon

我是 sharepoint 开发的新手，我正在尝试修改 Sharepoint 功能区的行为。众所周知，功能区是这样的，当其他内容（例如列表项）获得焦点时，功能区会自动切换到适当的选项卡或选项卡组（例如列表工具选项卡组）。

我想禁用这种不断切换选项卡并使浏览选项卡始终是活动选项卡，除非用户明确单击另一个选项卡。

我尝试在 Usercontrol 的 Page_Load() 中执行以下操作，但它仅在最初加载页面时有效。我究竟做错了什么？更重要的是，如果有的话，我怎么能做对呢？

基本上，我希望有人可以指出当上下文更改和功能区切换时触发的事件，以及我如何连接到该事件并强制功能区切换回浏览选项卡。

```
protected void Page_Load()
        {
            string showBrowseTabScript = string.Empty;
            showBrowseTabScript = @"
                                function ShowBrowseTab() {

                                         var ribbon = SP.Ribbon.PageManager.get_instance().get_ribbon();
                                         SelectRibbonTab(""Ribbon.Read"", true);
                                      }

                                      SP.SOD.executeOrDelayUntilScriptLoaded(function() {

                                         var pm = SP.Ribbon.PageManager.get_instance();
                                         pm.add_ribbonInited(function() {

                                            ShowBrowseTab();
                                         });

                                         var ribbon = null;
                                         try
                                         {
                                            ribbon = pm.get_ribbon();

                                         }

                                         catch (e) { }

                                         if (!ribbon) {

                                            if (typeof(_ribbonStartInit) == ""function"")

                                               _ribbonStartInit(_ribbon.initialTabId, false, null);
                                         }
                                         else {

                                            ShowBrowseTab();
                                         }

                                      },

                                      ""sp.ribbon.js"");
                                ";
            this.Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "BrowseTabScript", showBrowseTabScript, true);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:47:33.010

这是我对问题的解决方案，以防万一有人感兴趣。

考虑到 Ken Henderson 的建议，尽管我通过修改 SP.Ribbon.js 和 SP.Ribbon.debug.js 文件的代码来实现这一点，但我能够实现我一直在尝试做的事情。我正在使用 SP.Ribbon.debug.js 在下面展示我的解决方案，因为它不像 SP.Ribbon.js 那样神秘。

基本上，我使用下面的代码来欺骗功能区，使其认为用户位于不同的选项卡上并单击了“浏览”选项卡。您会注意到我在代码中设置了旧的选项卡信息。如果没有我这样做，它仍然可以工作，但我这样做是为了以防功能区需要该信息来处理我不知道的其他事情。此代码与我在第一篇文章中发布的 Page_Load() 函数相结合，使功能区的行为就像我需要的那样。

```
SP.Ribbon.PageManager.prototype = {

    executeRootCommand: function (commandId, properties, commandInfo, root) {
        ULSMg8: ;
        var $v_0;
        if (!SP.ScriptUtility.isNullOrUndefined(commandInfo) && commandId !== 'RibbonEvent' && (commandId !== 'CommandContextChanged' || (!SP.ScriptUtility.isNullOrUndefined(properties) && properties['ChangedByUser']))) {
// My changes to SP.Ribbon

if (properties["ChangedByUser"] === false) {
            properties["ChangedByUser"] = true;
            var $NewContextId = properties["NewContextId"];
            var $NewContextCommand = properties["NewContextCommand"];
            properties["OldContextId"] = $NewContextId;
            properties["OldContextCommand"] = $NewContextCommand;
            properties["NewContextId"] = "Ribbon.Read";
            properties["NewContextCommand"] = "ReadTab";
            SelectRibbonTab("Ribbon.Read", true);
        }

// End of changes to SP.Ribbon

            // the rest of the code has been ommitted for clarity
        return $v_0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:17:30.750

据我所知，SharePoint 不会公开任何事件来检测功能区选项卡何时更新（添加/删除选项卡或处于活动状态）。至少几周前，当我试图检测何时添加/删除选项卡时，我找不到任何一个（我不在乎哪个是活动的，只是它们的数量/宽度）。

（抱歉，缺少详细信息，办公室的 SharePoint 开发环境暂时不可用，所以我不能很容易地查找详细信息。）

解决这个问题有两种可能（每种都有风险/问题）：

### 覆盖 JS 功能

找出当用户单击更新功能区的项目时调用的 JavaScript 函数。您也许可以用您自己的功能替换该功能，以提供您想要的行为。这在概念上类似于在窗口上滚动并且必须更改宽度调整行为的自定义母版页。我目前无法验证详细信息，但看起来该函数在 core.js 中称为 SingleItemSelect。

如果您对何时覆盖此行为有例外，并且如果 MS 将来更改任何内容，您的实施可能会中断和/或需要更新，这可能是一个问题。

### 添加您自己的事件处理程序

在您的 JavaScript 代码中，尝试在功能区中找到适当的 DOM 事件以将事件处理程序附加到以检测 MS 的代码何时更改功能区。考虑到 DOM 事件的限制，很有可能没有事件可以附加处理程序。您最终可能会添加一个定期调用的功能（轮询循环/计时器），该功能检测功能区选项卡更改并重置活动选项卡。

老实说，这不会很好，因为当 MS 的功能区代码更改活动选项卡并且您将其更改回来时会闪烁。此外，您需要检测用户何时单击选项卡，这样您就不会撤消他们的更改。

### 包起来

老实说，我会推迟并更改此要求，以便功能区行为按照 MS 设计的方式工作，而不是试图与之抗争。如果在用户单击某个项目时显示的功能区确实是一个问题，那么我会建议客户不要强制`Browse`选项卡处于活动状态，而是在功能区区域中添加一个附加链接以允许功能区（或至少在标题区域上展开的部分）切换为隐藏/显示，独立于 MS 的 JavaScript 对功能区所做的操作。

# java - 要收藏的演员表

> ID：10175095
> 
> 赞同：2
> 
> 时间：2012-04-16T13:29:08.230
> 
> 标签：java, list, collections, interface, casting

我试着用一个例子来解释这个问题。我有一个名为 X 的接口和一个实现 X 的类 Y。Y 的几个实例收集在一个列表中。现在这是我不太明白的一点。当我尝试将此列表分配给集合时，我收到编译器错误。否则，当我将此列表分配给集合时，它会起作用。

```
List<Y> yList = new ArrayList<Y>();
// works
Collection<? extends X> coll1 = yList;
// error
Collection<X> coll2 = yList; 
```

谁能解释这两个变体之间的区别以及为什么第二个变体不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:38:27.350

为此，您需要更多地了解泛型的概念。

我们来看下面的代码：

```
List<Integer> ints = new ArrayList<Integer>();
ints.add(Integer.valueOf(1));
List<Number> numbers = ints;// This does not compile! and you will now see why:

numbers.add(new Double(2.3d));// This is valid
Integer i = ints.get(1); // This would be broken then because I expect an Integer but get a Double 
```

这就是为什么您需要将您`List<X>`的`Collection<? extends Y>`意思转换为集合包含扩展 Y 但您不知道确切类型的对象的原因。您知道可以强制转换为 (Y)，但您不知道集合中的实际类型是什么，因此不允许 add() 或 addAll() 之类的操作。

# java - 为 XYAreaChart 设置“自动”范围

> ID：10175096
> 
> 赞同：3
> 
> 时间：2012-04-16T13:29:08.590
> 
> 标签：java, charts, jfreechart

我正在使用 JFreechat API 绘制带有 TimeSeriesCollection 数据集的 XYAreaChart。我放入数据集中的值是没有限制的变量：它们可以从 0 到超过 1000。这里的问题是我想让 ValueAxis 自动适应数据。

我试过使用：

```
 XYPlot plot = mychart.getXYPlot();
    ValueAxis axis = plot.getDomainAxis();
    axis.setAutoRange(true); 
```

我看到 setAutoRange 并不是那么“自动”。确实，当绘图获得大值时它会更改轴，但是当没有更多大数据时它不会重新调整轴的大小，如下所示：

![在此处输入图像描述](../Images/aaf80b8b8cee0c6369d5dd9c7588284a.png)

![在此处输入图像描述](../Images/b0020bd6585525e8817b748f3448e455.png)

![在此处输入图像描述](../Images/60bca4e84ae6c7ad81dfbe2929cf289b.png)

我希望轴范围恢复到适合显示的最大值（在本例中约为 400），因为在不使用缩放的情况下很难读取该范围内的小值。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:18:34.550

我将研究两种方法：

*   丢弃旧数据的数据集，例如[此处](https://stackoverflow.com/a/5048863/230513)`DynamicTimeSeriesCollection`所示。
*   一个数据集，其系列允许最大年龄，例如[此处](https://stackoverflow.com/a/6517440/230513)`TimeSeriesCollection`所示。

# apache - 使用 .htaccess 的 URL 重写规则未按预期工作

> ID：10175100
> 
> 赞同：1
> 
> 时间：2012-04-16T13:29:25.017
> 
> 标签：apache, .htaccess, mod-rewrite, wordpress

继续我之前的问题[url-rewrite-rule-based-on-certain-conditions](https://stackoverflow.com/questions/10164476/url-rewrite-rule-based-on-certain-conditions) 我正在尝试像这样进行 URL 重写

```
http://www.mydomain.com/wp-content/plugins/pluginA/abc.css
http://www.mydomain.com/wp-content/plugins/pluginA/abc.js 
```

我希望当 CSS 和 JS 来自这个插件（插件 A）或任何其他我想重写其 URL 的插件时，URL 应该被重写为

```
http://www.cdn.mydomain.com/wp-content/plugins/pluginA/abc.css
http://www.cdn.mydomain.com/wp-content/plugins/pluginA/abc.js 
```

这就是我在 .htaccess 文件中尝试的方法

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine On
RewriteBase /wordpress/
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} ^.+\.(css|js)$
RewriteRule ^wp-content/plugins/(nivo-slider-light|Usernoise|lightbox-plus|wp-content-slideshow|content-slide)/(.+)$ http:/abc.cloudfront.net/wp-content/plugins/$1/$2 [L,R=302,QSA]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]
</IfModule> 
```

我已经尝试了所有可能的方法来重写 URL，以便应该从我的 CDN 服务器获取 JS 和 CSS，但似乎 apache 从未采用过该规则。这方面的任何帮助/指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:42:22.867

将此作为您的第一条规则（紧随其后`RewriteBase`）

```
RewriteRule ^(wp-content/plugins/(nivo-slider-light|Usernoise|lightbox-plus|wp-content-slideshow|content-slide)/[^.]+\.(css|js))$ http://abc.cloudfront.net/$1 [L,R,NC] 
```

另外，如果它不起作用，请尝试将您的`*.js`和`*.css`文件从`wp-content/plugins/`路径下的本地目录中移开。

# vb.net - 使用参数占位符搜索模式

> ID：10175102
> 
> 赞同：0
> 
> 时间：2012-04-16T13:29:28.197
> 
> 标签：vb.net, resharper

我在 VB.Net 中使用 ReSharper 6.1，我想搜索所有调用`Help.ShowHelp`并将它们放入包装器中。

所以我有这样的东西。

```
Private Sub BtnHelpClick(sender As System.Object, e As EventArgs) Handles btnHelp.Click
  Help.ShowHelp(Me, HelpFiles.AuditTables, HelpNavigator.TopicId, AudittablesContext.AuditTables)
End Sub 
```

我希望它变成这个。

```
Private Sub BtnHelpClick(sender As System.Object, e As EventArgs) Handles btnHelp.Click
   _navigation.ShowHelp(Me, HelpFiles.AuditTables, AudittablesContext.AuditTables)
End Sub 
```

我尝试了这样的搜索模式。

```
Help.ShowHelp($type1$, $type2$ , HelpNavigator.TopicId, $type3$) 
```

*   其中 type1 是`System.Windows.Forms.Form`
*   其中 type2 是`System.String`
*   其中 type3 是`System.Object`

我尝试了更多的事情然后我想记住。但即使这样也行不通`Help.ShowHelp($type1$`。

当我尝试`Help.ShowHelp(`时，它确实发现了这一点，所以我认为这是不匹配任何东西的表达式。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:13:07.413

您需要一个*ShowHelp参数的****参数占位符***，如下所示：每个参数占位符都应该有 1 个参数。 替换模式是：*`Help.ShowHelp($arg1$,$arg2$,$arg3$,$arg4$);`
`_navigation.ShowHelp($arg1$, $arg2$, $arg4$);`*

 *![在此处输入图像描述](../Images/ea26d2f6108f7c8ef4f1fb56724c6c73.png)

现在所有的*Help.ShowHelp*调用都被标记为建议并且可以被替换。*

# c# - 在C#中替换字符“

> ID：10175104
> 
> 赞同：5
> 
> 时间：2012-04-16T13:29:33.803
> 
> 标签：c#

我想用 C# 中字符串中的空格替换字符“。但是在编写函数时遇到了一个问题：

```
myString.Replace("""," ") 
```

第一个论点似乎是一个问题。任何的想法

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-16T13:30:16.293

逃脱它：

```
myString.Replace("\""," ") 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-16T13:32:57.127

使用接受字符而不是字符串的重载

```
myString.Replace('"', ' '); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T13:32:20.123

您需要通过在其前面放置 \ 来转义该字符：

```
myString=myString.Replace("\""," "); 
```

或用户：

```
 myString=myString.Replace('"',' '); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-16T13:32:25.760

逃脱它。

您可以使用常规字符串：

```
myString.Replace("\""," ") 
```

或[逐字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx) [字符串](http://www.c-sharpcorner.com/UploadFile/harishankar2005/verbatim_literals11262005010742AM/verbatim_literals.aspx)：

```
myString.Replace(@""""," ") 
```

# jquery-mobile - jQuery Mobile 过滤列表 - 仅匹配字符串的开头

> ID：10175105
> 
> 赞同：1
> 
> 时间：2012-04-16T13:29:34.623
> 
> 标签：jquery-mobile

我使用 jQuery 移动搜索过滤器列表：http: [//jquerymobile.com/test/docs/lists/lists-performance.html](http://jquerymobile.com/test/docs/lists/lists-performance.html)

我遇到了一些性能问题，我的列表在某些手机上过滤起来有点慢。为了尝试提高性能，我想更改搜索，以便只返回以搜索文本开头的项目。

所以'aris'目前找到了'paris'的结果，但我希望改变它。我可以从下面的文档中看到它的可能，但我不知道如何实现代码。

[http://jquerymobile.com/test/docs/lists/docs-lists.html](http://jquerymobile.com/test/docs/lists/docs-lists.html)

```
$("document").ready( function (){
  $(".ui-listview").listview('option', 'filterCallback', yourFilterFunction)
}); 
```

这似乎展示了您如何编写和调用自己的函数，但我不知道如何编写它！谢谢 [http://blog.safaribooksonline.com/2012/02/14/jquery-mobile-tip-write-your-own-list-view-filter-function/](http://blog.safaribooksonline.com/2012/02/14/jquery-mobile-tip-write-your-own-list-view-filter-function/)

更新 - 我在单独的 js 文件中尝试了以下内容：

```
$("document").ready( function (){

  function beginsWith( text, pattern) {
  text= text.toLowerCase();
  pattern = pattern.toLowerCase();

  return pattern == text.substr( 0, pattern.length );
  }

  $(".ui-listview").listview('option', 'filterCallback', beginsWith)

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:21:42.040

可能看起来像这样：

```
function beginsWith( text, pattern) {
text= text.toLowerCase();
pattern = pattern.toLowerCase();

return pattern == text.substr( 0, pattern.length );
} 
```

基本上，您将与源匹配的内容从 0 到“长度”进行比较。所以如果你传入“test”，“tester”，它会看到你传入了一个长度为**4**的字符串，然后从 0,4 中减去“tester”，这给了你“test”。那么“test”等于“test”......所以返回true。将它们小写以使其不区分大小写。

提高过滤器性能的另一个技巧，只有在输入超过 1 个字符时才过滤。

**编辑**它似乎 jQueryMobile 的过滤器功能期望“真”意味着它没有被发现......所以它需要倒退。`return pattern != text.substr( 0, pattern.length );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:04:09.817

这对我有用。我在这里使用正则表达式，所以用不同的方式来实现同样的事情。

但是我的代码最初不起作用的原因是列表项在开头和结尾都有很多空格（发现它是在调试时自己添加的）。

所以我在匹配之前对文本进行了修剪。我有一种感觉，如果我们在匹配之前执行 text.trim()，Jonathan Rowny 的实现也会起作用。

```
 $(".ui-listview").listview('option', 'filterCallback', function (text, searchValue) {

    var matcher = new RegExp("^" + searchValue, "i");

    return !matcher.test(text.trim());
}); 
```

# knockout.js - 淘汰赛没有映射数组中对象的属性

> ID：10175108
> 
> 赞同：7
> 
> 时间：2012-04-16T13:29:57.573
> 
> 标签：knockout.js, knockout-mapping-plugin

似乎淘汰赛没有正确映射数组中对象的属性。

从 chrome 控制台查看此示例：

```
> var viewmodel = ko.mapping.fromJS({list:[]});
undefined

> viewmodel.list().unshift({ name : ko.observable("Foo") });
1

> viewmodel.list()[0].name();
"Foo"

> var js = ko.mapping.toJS(viewmodel);
undefined

> js.list[0].name;
undefined 
```

因此正在创建 javascript 对象，但未映射“名称”属性。

任何想法都非常受欢迎！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T13:54:01.947

来自[http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)，关于`toJS()`功能：

> 这将创建一个未映射的对象，其中仅包含作为原始 JS 对象一部分的映射对象的属性。

由于“名称”不是您映射的原始对象的一部分，因此它不会被取消映射。您需要告诉映射插件包含此特定属性：

```
var js = ko.mapping.toJS(viewmodel, { include: ['name'] }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-25T10:56:57.840

虽然 Niko 的回答是正确的 - 有办法克服这个问题。

我不得不说这有点丑陋，但它可以完成工作并且很容易理解：

```
ko.mapping.toJS(ko.mapping.fromJSON(ko.toJSON(viewmodel))) 
```

我将视图模型从 observable 映射到 json 到 observable（所有属性都映射）到对象。

# perl - Perl：是否有类似于 statistics_info 的 DBI 函数来检索 FK 引用和约束？

> ID：10175109
> 
> 赞同：1
> 
> 时间：2012-04-16T13:30:04.547
> 
> 标签：perl, postgresql, foreign-keys, dbi, dbd-pg

在 Postgres 中对表执行 a`\d+`时，它会列出表模式以及索引，以及将其作为 FK 引用的其他表。例子：

```
 Table "public.foo_table"
   Column   | Type |   Modifiers   | Storage  | Description 
------------+------+---------------+----------+-------------
 id         | text |               | extended | 
 foo        | text |               | extended | 
 bar        | text |               | extended | 
Indexes:
    "foo_table_id_idx" btree (id)
    "foo_table_foobar_idx" btree (foo,bar)
Foreign-key constraints:
    "foo_table_bar_fk" FOREIGN KEY (bar) REFERENCES public.bar_table(id)
Referenced by:
    TABLE "public.bar_table" CONSTRAINT "bar_table_foo_fk" FOREIGN KEY (foo) REFERENCES public.foo_table(foo)
Has OIDs: no 
```

* * *

您可以做一些事情`$dbh->statistics_info(...)`来检索索引信息。是否有类似的东西来检索 FK 信息（引用和引用）？

* * *

*看来我的下一个选择是发出`->do()`命令或查询系统表。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:50:31.663

到目前为止我发现了什么：

```
$dbh->foreign_key_info( pk_cat, pk_schema, pk_tbl
                      , fk_cat, fk_schema, fk_tbl      );

# FK References
$dbh->foreign_key_info( undef , undef    , undef   
                      , undef , undef    , $table_name );

# FK Referenced By
$dbh->foreign_key_info( undef , undef    , $table_name 
                      , undef , undef    , undef       );

## Putting the schema/catalog info only ensures you are hitting the intended 
##    table. If you have dupicate tables, or your table is not in the public 
##    schema it's probably a good idea to include the schema.
## Catalog is generally unnecessary for Postgres 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:14:10.260

如果您使用该`-E`选项运行 psql，它将显示它为响应`\d`（和其他）元数据请求而运行的所有查询。从中复制/粘贴以获得您想要的查询非常容易。

# jquery - 如何将单元格 td 放入控制器？

> ID：10175110
> 
> 赞同：0
> 
> 时间：2012-04-16T13:30:06.987
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我使用 jquery 的 tempate 来构建我的表。当用户单击我的表格的一个单元格时，我在此单元格上添加属性“名称”。

我想检索单击了哪个单元格以及使用哪个值，但我没有成功将我的值单元格检索到控制器 asp mvc 中。我使用 FormCollection 但我没有找到我的单元格 td 我也尝试了 request.form["cellTd"] 但它不起作用。在我的控制器中，单元格等于 null 并且表单不包含元素 cellTd。

谢谢你的帮助。

我的观点：

```
@using (Html.BeginForm("Action", "Test", FormMethod.Post ))
{
<div id="TableToFill"></div>
<button id="send" value="send" name="btn" type="submit">send</button>
} 
```

我的模板：

```
<script id="TableTemplate" type="text/x-jquery-tmpl">
<table class="Table">
<tbody class="BodyTable"> 
    {{each list}}
    <tr class="Item">    
        <td description="Standard${Name}" >${this.Value}</td>
        {{if $index == 0}}
        <td ><input description="high${Name}" value="" type="text" /></td>
        {{/if}}
    </tr>    
    {{/each}}  
</tbody>
</table>       
</script> 
```

我的代码 jquery

```
<script type="javascript">
$.getJSON("getTable", params, function (items) {
        $("#TableTemplate").tmpl(items).appendTo("#TableToFill");        
    });
    $(".Table tbody .Item td").click(function(){
    $(this).attr("name","cellTd");
    });
</script> 
```

我的控制器

```
public class TestController : controller
{
    public ActionResult(FormCollection form)
    {
        String cell=Request.Form["cellTd"];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:35:05.697

`click`您应该在以下事件中发送您的请求`td`：

```
$(".Table tbody .Item td").click(function(){
    //you are setting the name to "CellTd"
    $(this).attr("name", "cellTd");

    var tdNameValue = $(this).attr("name"); //will always give "cellTd" as it is set above...

    //make your ajax request here
    $.ajax({
       url: 'urltocontroller',
       data: {tdName : tdNameValue},
       dataType: 'json',
       success: function(r) {
           //successcallback
       },
       type: 'POST'
    });
}); 
```

现在您可以在此处检索您的值：

```
public class TestController : controller
{
    public ActionResult(FormCollection form)
    {
        String cell=Request.Form["cellTd"];
    }
} 
```

# jquery - jQuery微调器问题

> ID：10175111
> 
> 赞同：0
> 
> 时间：2012-04-16T13:30:10.530
> 
> 标签：jquery

在此代码所在的表单中，每次单击 optionForm div 时都会触发微调器函数。第一次单击工作正常并触发一次警报。再次单击，它们会开火两次。第三次点击触发三次，等等。问题出在哪里？

```
<script type="text/javascript">

$("#optionForm").click(function() { 

    $("#process").hide().ajaxStart(function() {
        alert("show")
        $("#process").fadeIn('100');    
    })   
    .ajaxStop(function() {
        alert("hide")
        $("#process").hide();
    });

    $.post('post_requests.php', {

        scenario: ($('#scenario:checked').length ? 1 : 0 ),
        toolkit: ($('#toolkit:checked').length ? 1 : 0 ),
        newsletter: ($('#newsletter:checked').length ? 1 : 0 ),
        scenarios: $('#scenarios').val(),
        tools: $('#tools').val(),
        news: $('#news').val(),
        submit: 'yes'}, function(data) {

            $("#optionResponse").html(data).fadeIn('100');

            FadeMsg();

        }, 'text');

    function FadeMsg() {

        waiting = setInterval(function() {
            $('#optionResponse').fadeOut(500);
            },3000);    
    };

    clearInterval(waiting);
    return false; 

});         
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:35:42.467

您应该将[**ajaxStart**](http://api.jquery.com/ajaxstart/)和**[ajaxStop](http://api.jquery.com/ajaxstop/)**调用放在点击处理程序之外。

如果将它们保留在单击处理程序中，则每次新的 ajax 请求开始或停止时都会添加一个新的回调。

该文档甚至有一个与您尝试执行的操作类似的示例：

> 每当 Ajax 请求开始时显示加载消息（并且没有一个处于活动状态）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:38:21.320

这可能是因为您每次单击 optionForm 时都订阅了一个函数。

试试这个。

```
$("#process").hide().ajaxStart(function() {
        alert("show")
        $("#process").fadeIn('100');    
    })   
    .ajaxStop(function() {
        alert("hide")
        $("#process").hide();
    });
$("#optionForm").click(function() { 
    // etc...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:39:40.407

每次您单击`optionForm`div 时，都会触发 click 事件，并将新的 ajaxStart 事件附加到`$("#process")`.
因此，当您第一次单击它时，会附加一个事件。
它工作正常。
下次您单击它时，将附加一个事件并触发两次。
. 相反，你应该附加`ajaxStart()`and 。`ajaxStop()`提前而不是在调用点击功能时发生事件

# expressionengine - ExpressionEngine 中的 HABTM 关系

> ID：10175117
> 
> 赞同：0
> 
> 时间：2012-04-16T13:30:23.920
> 
> 标签：expressionengine, has-and-belongs-to-many

ExpressionEngine 是否能够处理 HABTM（拥有并属于许多）关系，即使它使用插件也是如此？

基本上，我有两个渠道：食谱和配料。用户需要能够通过从我的成分通道分配条目来创建配方，但是在添加成分时，他们还需要指定其他数据，例如数量。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:43:01.827

您的答案在于[Pixel 和 Tonic](http://pixelandtonic.com/)的两个不可或缺的 EE 附加组件：**Playa**和**Matrix**。

[Playa](http://pixelandtonic.com/playa)是一个多对多关系字段类型和模块。

[矩阵](http://pixelandtonic.com/matrix)是一种字段类型，它允许单个字段包含多行多个预定义数据列，其中每一列可以是不同的字段类型（包括 Playa）。

因此，在您的情况下，您将拥有标准成分频道，然后在您的食谱频道中，您将拥有一个成分字段，该字段将是一个矩阵字段类型。在您的 Matrix 字段中，您将有一个 Playa 列显示来自您的成分通道的条目的下拉列表，而另一列是一个简单的文本输入，设置为 Integer 的数量。

# c# - 当用户使用他的网络浏览器冲浪时，我如何检测鼠标光标当前悬停在哪个链接上？

> ID：10175120
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:30:32.137
> 
> 标签：c#, .net, winforms, mouseover

在 Windows.Forms 应用程序中，我想添加一个选项以在用户使用他的网络浏览器（safari、chrome、firefox 等）上网时自动检测一些特定链接，我想让我的程序检查鼠标使用计时器在每个时间间隔上悬停的当前链接，然后如果检测到特定链接，它只会显示一个简单的消息框，让我知道我悬停在该链接上。

例如，我进入 stackoverflow，然后设置我的应用程序以检查以下链接

```
 http://stackoverflow.com/faq 
```

然后，当我运行我的应用程序并进入 stackoverflow 并将鼠标光标移动到站点右上角的 tha faq 链接上时，将显示一个消息框，让我知道我正在悬停在该链接上

![在此处输入图像描述](../Images/cad5c78c23e3ac099f1ea853f371cbea.png)

这可能吗 ？当用户使用他的网络浏览器冲浪时，我如何检测鼠标光标当前悬停在哪个链接上？

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:43:10.373

唯一真正做到这一点的方法是挂钩到正在运行的进程。

请参阅[灰帽 Python - pg。86](http://books.google.com/books?id=EVuk7eqhWiwC&pg=PA86&lpg=PA86&dq=hooking%20the%20browser%20process&source=bl&ots=iclyhGZGMB&sig=JA4KaMvOKYYY65XhgKybz1_baFo&hl=en&sa=X&ei=-CCMT7xrhtnRAcPztegJ&ved=0CCQQ6AEwAA#v=onepage&q=hooking%20the%20browser%20process&f=false)在 Google 图书中帮助您入门。

# vba - 运行时错误 -2145320931 其他对象引用的对象

> ID：10175121
> 
> 赞同：1
> 
> 时间：2012-04-16T13:30:59.787
> 
> 标签：vba, runtime-error, autocad

我正在尝试使用 vba 删除 AutoCAD 中的图层。我得到运行时错误-2145320931（8021001d）“对象被其他对象引用。

*   我要删除的图层不属于任何实体。
*   我要删除的图层名称不是 0，也不是活动图层。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:46:04.240

绘图中的对象将在特定图层上表示。如果任何绘图对象仍位于该图层上，您将无法将其删除，因为这些对象仍引用该图层。

首先，确保该层上不存在任何对象。接下来，如果您从图层中删除了对象，您可能还必须从图形数据库中清除它们，然后才能删除图层。

另请记住，根据[开发人员文档](http://docs.autodesk.com/ACD/2010/ENU/AutoCAD%20.NET%20Developer%27s%20Guide/files/WS1a9193826455f5ff2566ffd511ff6f8c7ca-3cee.htm)，您不能删除第 0 层、Defpoints 或当前层。

# jsf - 无法调用命令按钮的操作方法

> ID：10175126
> 
> 赞同：0
> 
> 时间：2012-04-16T13:31:20.223
> 
> 标签：jsf, jsf-2, jsf-1.2

我正在尝试 JSF，但我无法调用映射到操作属性的方法我的 JSF 页面如下，

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
 <%@taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
 <%@taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <title>MAP STUDENT-COURSE</title>
        <link rel="stylesheet" href="<%=request.getContextPath()%>/demo.css" type="text/css" />
        <script type="text/javascript">
            window.onload = function(){
                    var validateFN = function(){
                        var selectObj = document.getElementById("selectOptionForm:operationTypeID");
                        var selectFN = function(){                      
                            var selectedOp = selectObj.options[selectObj.selectedIndex].value;
                            if(selectedOp == "0" || selectedOp == 0){
                                alert(" Select appropriate option.... ");                                   
                            }else{
                                document.selectOptionForm.submit();
                            }   
                        }

                        if(selectObj != null){  
                            selectObj.onchange = selectFN;                          
                        }
                    }
                    validateFN();

            }
        </script>
    </head>
    <body>
        <f:view>
            <h:form id="selectOptionForm">
                <h:panelGrid columns="2" headerClass="headerRow" rowClasses="oddRow,evenRow">
                    <f:facet name="header">
                        <h:outputText value="SELECT OPERATION" />
                    </f:facet>
                    <h:outputText value="SELECT OPTION" />
                    <h:selectOneMenu id="operationTypeID" value="#{studentCourseBean.operationType}" valueChangeListener="#{studentCourseBean.fetchCombo}">
                        <f:selectItem  itemLabel="SELECT"  itemValue="0"  />    
                    <f:selectItem  itemLabel="MAP STUDENT"  itemValue="addStudent"  />
                        <f:selectItem  itemLabel="MAP COURSE"  itemValue="addCourses"  />
                    </h:selectOneMenu>
                </h:panelGrid>
            </h:form>
            <br />
            <br />
            <br />
            <h:form id="addStudentForm" rendered="#{(studentCourseBean.addByStudents && !studentCourseBean.addByCourses)}">
                <h:panelGrid columns="2" headerClass="headerRow" rowClasses="oddRow,evenRow" footerClass="headerRow">
                    <f:facet name="header">
                        <h:outputText value="MAP STUDENT" />
                    </f:facet>
                    <h:outputText value="SELECT STUDENT" />
                    <h:selectOneMenu  id="studentID" value="#{studentCourseBean.selectedStudentId}">
                        <f:selectItems value="#{studentCourseBean.studentDropBox}" />
                    </h:selectOneMenu>
                    <h:outputText value="SELECT COURSE'S" />
                    <h:selectManyListbox id="courseID" value="#{studentCourseBean.selectedCourseList}" size="5">
                        <f:selectItems value="#{studentCourseBean.courseDropBox}" />
                    </h:selectManyListbox>
                    <f:facet name="footer">
                        <h:panelGroup>
                            <h:commandButton id="enterButton" type="submit" value="ENTER" action="#{studentCourseBean.addStudentAction}" />
                            <h:commandButton id="cancelButton" type="submit" value="CANCEL" action="#{studentCourseBean.cancelAction}" />
                        </h:panelGroup>
                    </f:facet>
                </h:panelGrid>
            </h:form>
            <h:form id="addCourseForm" rendered="#{(!studentCourseBean.addByStudents && studentCourseBean.addByCourses)}">
                <h:panelGrid columns="2" headerClass="headerRow" rowClasses="oddRow,evenRow" footerClass="headerRow">
                    <f:facet name="header">
                        <h:outputText value="MAP COURSE" />
                    </f:facet>
                    <h:outputText value="SELECT COURSE" />
                    <h:selectOneMenu  id="courseID" value="#{studentCourseBean.selectedCourseList}">
                        <f:selectItems value="#{studentCourseBean.courseDropBox}" />
                    </h:selectOneMenu>
                    <h:outputText value="SELECT STUDENTS" />
                    <h:selectManyListbox id="studentID" value="#{studentCourseBean.selectedStudentList}" size="5">
                        <f:selectItems value="#{studentCourseBean.studentDropBox}" />
                    </h:selectManyListbox>
                    <f:facet name="footer">
                        <h:panelGroup>
                            <h:commandButton id="enterCrButton" type="submit" value="ENTER" action="#{studentCourseBean.addCourseAction}" />
                            <h:commandButton id="cancelCrButton" type="submit" value="CANCEL" action="#{studentCourseBean.cancelAction}" />
                        </h:panelGroup>
                    </f:facet>
                </h:panelGrid>
            </h:form>   
        </f:view>   
    </body>
 </html> 
```

这里我说的是第二种形式，它的 id 是“addCourseForm”，

请注意，我的页面中有两个表单，第一个是“addStudentForm”表单，效果很好，但是在我的第二个表单中我无法提交，任何人都可以告诉我为什么“addCourseForm”没有按要求工作，

我在viewedScope 中的支持bean，我正在使用JSF 2.0 注释，等待回复

# streaming - 从 PC/Mac 到 Android/iPhone 的音频流

> ID：10175127
> 
> 赞同：0
> 
> 时间：2012-04-16T13:31:29.500
> 
> 标签：streaming, hosting, mp3, audio-streaming, jplayer

首先，由于这本质上是一个多学科问题，请随时提交仅回答部分帖子的答案 - 我将投票支持满足以下任何问题的答案。

嗨，我们正在组装一个安装，其中：

*   音频通过麦克风进入*FM 发射器*
*   传输到*接收器*
*   接收器已插入计算机的*线路输入*
*   **音频以 .m3u 流的形式录制/流式传输，或录制，然后上传（？）**
*   **通过在 iPhone/Android 上扫描 QR 码可以访问 Stream。**

我有几个关于这个主题的问题，我想知道人们是否可以提供帮助。

1.  如果您能够回答第二个问题，这是一个较小的第一个问题，但处理传入音频的最佳方式是在“上传”之前录制它，从而导致延迟，还是将其流式传输？

2.  我不确定托管上传的最佳方式，因为我认为它要么是 .m3u 流，要么是某种渐进式 .mp3，需要上传到支持此功能的地方。有什么建议吗？免费的虚拟主机解决方案可以实现这种事情吗？它也最好高于 128kbps。

3.  最初，我认为将音频流链接到允许二维码链接的 URL 的最简单方法是构建一个非常简单的网页，上面有一个媒体播放器，这样最终用户就不必下载任何外部应用程序，它可以通过 Android/iPhone 浏览器完成。是这样吗？最简单的方法是使用`<video>`or `<audio>`，还是对移动浏览器的 HTML5 支持还不够好？有哪些替代方案？像[jPlayer](http://www.jplayer.org/)这样的东西看起来会起作用吗？

感谢您的回复，我可以提供您可能认为相关的任何必要技术信息，但这些都是相当广泛的问题。我们可以从 OSX 10.7 或 Windows 7 运行流，因为我们两者都有，因此欢迎为任一平台推荐合适的软件。

再次感谢！

* * *

**编辑**：来自 jPlayer.org 的信息 -

> **HTML5 音频流**
> 
> HTML5 浏览器及其对音频流的支持。（请注意，jPlayer 对非 HTML5 浏览器的 Flash 回退适用于 MP3 流。）
> 
> **音频流适用于**：
> 
> 火狐（OSX，Win）：OGA
> 
> Safari (OSX)：MP3
> 
> 移动 Safari (iOS4 iPad/iPhone/iPod): MP3
> 
> Opera（OSX，Win）：OGA
> 
> Chrome (OSX, Win): MP3, OGA
> 
> IE9（赢）：MP3

没有提到 iOS5 或 Android，但我用我的 android 手机查看了他们网站上的 jplayer 1.2 流演示，它可以工作。似乎这可能是答案，但我需要更多地了解托管，也许还有 iOS5 兼容性，尽管我确信它必须继续工作。任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:35:07.590

我建议使用标准的 SHOUTcast/Icecast 设置。

首先，您需要一个编码器。如果您在 Windows 下执行此操作，我推荐[Edcast 。](http://code.google.com/p/edcast-reborn/)编码器负责收听您的声卡，并将原始 PCM 数据编码/压缩为 MP3 或您需要的任何格式。

接下来，您需要一台服务器。同样，[SHOUTcast](http://www.shoutcast.com/)或[Icecast](http://www.icecast.org/)对您来说非常有用。不，您通常不能在任何免费的网络托管服务提供商上托管它。幸运的是，托管 SHOUTcast 流很便宜，而且很容易获得。如果您有必要的带宽，您也可以自己托管服务器。它不需要太多的 CPU/RAM。

最后，你需要一个球员。你的 jPlayer 可以正常工作。对于 iOS，我通常只是链接到播放列表文件并让它播放。在 Android 上，你可以做一个 Flash 播放器。HTML5 兼容性虽然存在，但 jPlayer 将是做到这一点的方式。

另请注意，没有“.m3u 流”之类的东西。.m3u 文件只不过是一个播放列表文件，其中包含流式音频的 URL。就这样。

对于 QR 码，只需链接到包含您的播放器的网页 URL。这就是你所要做的。

如果您有更具体的问题，您应该在此处将它们作为单独的问题发布。

# python - 下载的文件的上次修改与其 HTTP 标头不匹配

> ID：10175134
> 
> 赞同：2
> 
> 时间：2012-04-16T13:31:56.003
> 
> 标签：python, http, caching

我有一段 Python 代码（无论好坏）根据 Web 服务器上的同一文件检查本地文件。如果它不存在，它会下载它，如果存在，它会`os.stat`根据服务器上同一文件的 HTTP 标头检查下载文件的最后修改。

问题是，这两个数字似乎并不相等，即使它们应该相等。这是代码：

```
from urllib import urlretrieve
from urllib2 import Request, urlopen
from time import strftime, localtime, mktime, strptime
from os import stat, path

destFile = "logo3w.png"
srvFile = "http://www.google.com/images/srpr/logo3w.png"

if path.exists(destFile):
    localLastModified = stat(destFile).st_mtime
    req = Request(srvFile)
    url_handle = urlopen(req)
    headers = url_handle.info()                        
    srvLastModified = headers.getheader("Last-Modified")
    srvLastModified = mktime(strptime(srvLastModified,
      "%a, %d %b %Y %H:%M:%S GMT"))
    print localLastModified, srvLastModified

else:
    urlretrieve(srvFile, destFile) 
```

语句的返回`print`（如果您运行代码两次）是`1334527395.26 1333350817.0`.

在我看来，这两个应该是相同的，但它们却截然不同。本地下载的文件的修改日期实际上是下载到本地机器的日期，而不是服务器上最后修改的日期。

基本上我要做的就是保留文件的本地缓存（在实际应用程序中会有很多文件），如有必要，请下载它。我有一半意识到默认情况下网络代理应该执行此操作，并且我正在运行存储这些文件的基本 WAMP 服务器，但我不确定如何将其应用于我的 PyQt 应用程序。可能有几十个文件需要下载和缓存，其中大约一半很少会改变，所以我试图确定检查和获取这些文件的最快方法。

也许这甚至不是正确的方法，所以如果有（更好/许多其他）方法可以做到这一点，我会全神贯注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T13:44:51.100

[`urllib.urlretrieve`](http://docs.python.org/library/urllib.html#urllib.urlretrieve)只下载文件；它不会复制修改日期。您必须手动使用[`os.utime`](http://docs.python.org/library/os.html#os.utime)：

```
import os

# current code
else:
    headers = urlretrieve(srvFile, destFile)[1]
    lmStr = headers.getheader("Last-Modified")
    srvLastModified = mktime(strptime(lmStr, "%a, %d %b %Y %H:%M:%S GMT"))
    os.utime(destFile, (srvLastModified, srvLastModified)) 
```

# regex - 在 perl 中使用正则表达式匹配包含元字符的变量

> ID：10175135
> 
> 赞同：1
> 
> 时间：2012-04-16T13:31:58.927
> 
> 标签：regex, perl, file

```
$match="";

for($i=0;$i<=$#wor;$i++)
{
$match=$match.$letter[$wor[$i]];
}

print $match;

open ABC,"<words.txt";

while(<ABC>)
{

if($_ =~ /^$match$/ )
{
print "$_";
print "\n";
}
} 
```

在下面的代码中，我无法匹配文件的行，即 $_ 与变量 $match （其中包含要匹配的实际元字符）？因此没有输出产生需要什么改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:35:06.323

您需要从匹配字符串开头和结尾的正则表达式中删除`^`and`$`锚点。

有了它们，正则表达式将只匹配*只*包含元字符的行。

您可能还想`$match`用`[ .. ]`字符换行，以表明它是一个字符范围，而不是一个单词。

例如，如果您想排除任何包含`_`或`%`您`$match`需要包含的行`[_$]`

**编辑**如果根据评论，您只想匹配在任一端找到元字符，请使用：

```
if (/^${match}/ || /${match}$/) {
    ...
} 
```

# c# - 将项目添加到 PopupMenu

> ID：10175140
> 
> 赞同：3
> 
> 时间：2012-04-16T13:32:10.443
> 
> 标签：c#, winforms, devexpress

我正在尝试找到如何将项目添加到 devExpress PopupMenu。我尝试了以下方法：

```
 manager = new BarManager();
        listBoxMenu = new PopupMenu(manager);

        listBoxMenu.ItemLinks.Add(manager.Items["Remove item"]);
        listBoxMenu.ItemLinks.Add(manager.Items["Clear items"]); 
```

如此处所示`http://documentation.devexpress.com/#WindowsForms/CustomDocument5472`（在底部），但它给了我一个错误，说该项目未初始化。

添加项目的正确方法是什么？我在任何地方都找不到它。

编辑，这是我的做法：

```
 //Creates the popup menu to be used for the keywords listbox
        manager = new BarManager();
        listBoxMenu = new PopupMenu(manager);

        item = new BarButtonItem(manager, "Copy");
        item2 = new BarButtonItem(manager, "Clear Item");
        item3 = new BarButtonItem(manager, "Clear All Items");

        listBoxMenu.ItemLinks.Add(item);
        listBoxMenu.ItemLinks.Add(item2);
        listBoxMenu.ItemLinks.Add(item3);

        //Adds the seperator on the second item
        item2.Links[0].BeginGroup = true;

        manager.ItemClick += manager_ItemClick; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T14:50:53.740

检查此代码片段并使用相同的方式实现。

//创建弹出窗口并管理对象

```
private DevExpress.XtraBars.BarManager barManager1;
        private DevExpress.XtraBars.PopupMenu buttonContextMenu;
        DevExpress.XtraBars.BarButtonItem menuButtonExport = new DevExpress.XtraBars.BarButtonItem();
        DevExpress.XtraBars.BarButtonItem menuButtonSave = new DevExpress.XtraBars.BarButtonItem();

        public TestForm8()
        {
            InitializeComponent();
            barManager1 = new BarManager();
            this.barManager1.Form = this;
            buttonContextMenu = new DevExpress.XtraBars.PopupMenu(barManager1);                 
            this.buttonContextMenu.Name = "subViewContextMenu";            

            menuButtonExport.Caption = "E&xport";
            menuButtonExport.Id = 1;
            menuButtonExport.Name = "menuButtonExport";
            menuButtonExport.ItemClick += new ItemClickEventHandler(menuButtonExport_ItemClick);

            menuButtonSave.Caption = "S&ave";
            menuButtonSave.Id = 2;
            menuButtonSave.Name = "menuButtonSave";
            menuButtonSave.ItemClick += new ItemClickEventHandler(menuButtonSave_ItemClick);
//add items to barmanager
            this.barManager1.Items.AddRange(new DevExpress.XtraBars.BarItem[] {
            menuButtonExport,
            menuButtonSave
            });
//create links between bar items and popup
            buttonContextMenu.ItemLinks.Add(barManager1.Items["menuButtonExport"]);
            buttonContextMenu.ItemLinks.Add(barManager1.Items["menuButtonSave"]);
//finally set the context menu to the control or use the showpopup method on right click of control
            barManager1.SetPopupContextMenu(btnInsert, buttonContextMenu);
} 
```

逐步参考以包括弹出窗口：

[如何：创建弹出菜单](http://documentation.devexpress.com/#WindowsForms/CustomDocument5474)
[如何：将项目添加到容器栏项目（菜单）填充](http://documentation.devexpress.com/#WindowsForms/CustomDocument5412)
[弹出菜单](http://documentation.devexpress.com/#WindowsForms/CustomDocument5472)
[BarManager.SetPopupContextMenu 方法](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraBarsBarManager_SetPopupContextMenutopic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:24:00.393

你的经理是空的：

```
manager = new BarManager(); 
```

您链接到的示例使用的`BarManager`是已经创建的：`barManager1`，我假设它是在设计器中创建并填充了项目。

从他们的[BarManager 帮助页面](http://documentation.devexpress.com/#WindowsForms/CustomDocument1083)：

> 将 BarManager 添加到窗体/用户控件后，您可以使用窗体上的上下文菜单、使用栏管理器的自定义窗口或其设计器来创建栏和栏命令。请参阅工具栏自定义部分，了解更多信息。

# zend-framework - Zend 框架删除级联

> ID：10175141
> 
> 赞同：0
> 
> 时间：2012-04-16T13:32:16.590
> 
> 标签：zend-framework, zend-db-table

嗨，我正在使用 zend 框架，我在删除级联时遇到问题。

我在 Zend db 表中有两个实体，称为 User，另外两个（因为我有 2 个用户）连接到 User

用户是

```
class Application_Model_DbTable_User extends Zend_Db_Table_Abstract
{
protected $_name = 'user';
protected $_primary = 'username';    
protected $_dependentTables = array('Cliente','Trainer');
} 
```

另一个是

```
class Application_Model_DbTable_Trainer extends Zend_Db_Table_Abstract{
protected $_name = 'trainer';
protected $_primary = 'idusername';

protected $_referenceMap = array(
    'Utente' => array(
        'columns' => array('idusername'), 
        'refTableClass' => 'user', 
        'refColumns' => array('username'),
        'onDelete' => self::CASCADE
    )
);

protected $_dependentTables = array('Trainermaster','Presenza','Uscita');} 
```

当我对 User 对象使用 delete 选项时，Zend 只删除 User 表中的用户，而不是 Trainer 表中的用户...

我在 mysql 数据库中也设置了删除级联以更安全，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:43:41.810

$_dependentTables 必须引用您的类名，而不是您的数据库表名：

```
protected $_dependentTables = array('Application_Model_DbTable_Cliente',
                                    'Application_Model_DbTable_Trainer'); 
```

# pysvn - 如何判断进程是在python中完成的

> ID：10175155
> 
> 赞同：0
> 
> 时间：2012-04-16T13:33:06.253
> 
> 标签：pysvn

我使用**pysvn**从存储库中签出工作副本，如何确定签出已完成以向用户提供消息？

```
client = pysvn.Client() 
client.checkout('file:///media/sda5/trunk','/tmp/test_checkout') 
```

我使用上面的代码来检查，那么如何确定它何时完成？

请给我一些想法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:55:08.723

该`client.checkout`操作正在等待结帐完成，因此只需在函数返回后以您想要的方式通知它。

# lambda - 在lua中评估函数参数中的代码块

> ID：10175156
> 
> 赞同：9
> 
> 时间：2012-04-16T13:33:10.553
> 
> 标签：lambda, lua, anonymous-function

我不太确定如何为问题命名，但请考虑以下 lua 代码：

```
print(function ()
    s = ""
    for i = 1, 10 do
      s = s..tostring(i)
    end
    return s
  end) 
```

但这仅打印函数地址，因为 function() 返回一个闭包。有没有办法评估匿名函数？就像在我可以在附加括号中包含 lambda 的方案中一样？

```
((lambda ()(display "Hello World"))) 
```

我当然知道，我可以事先定义函数并稍后调用它，但我只是好奇这在 lua 中是否可能。提前感谢所有回复。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T14:20:44.117

您需要将函数定义包装在括号中，然后通过添加`()`after 来调用它。把它放在 Lua 解释器中：

```
> print((function ()
    s=""
    for i=1,10 do
       s=s..tostring(i)
    end
    return s
  end)()) 
```

给出以下输出

```
> 12345678910 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T18:06:54.113

如果这是您想要的全局行为，最简单的解决方案是挂钩 print 以便它评估传递给它的任何函数。这样，您可以简单地将调用站点保留为 lambdas。

# java - 如何让我的 Java 程序暂停，直到按下特定按钮？

> ID：10175157
> 
> 赞同：1
> 
> 时间：2012-04-16T13:33:17.300
> 
> 标签：java, swing, events, jbutton, wait

我目前正在编写一个类似于砖块破坏者的游戏，并且需要知道如何让我的程序等待特定的函数被调用。

我需要暂停程序，直到在按钮之间做出决定。例如，游戏启动，用户可以选择他在游戏中想要的颜色。因此，游戏暂停，直到他做出选择并且他很高兴，然后程序需要恢复到不同的阶段。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T13:36:30.603

如果您使用的是 Swing 组件，则可以向按钮添加一个，并在被覆盖的方法[`ActionListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html)中包含需要执行的逻辑。[`actionPerformed`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html#actionPerformed%28java.awt.event.ActionEvent%29)

另请参阅[如何编写动作侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)。

## 编辑

> 我需要暂停程序，直到在按钮之间做出决定。例如，游戏启动，用户可以选择他在游戏中想要的颜色。因此，游戏暂停，直到他做出选择并且他很高兴，然后程序需要恢复到不同的阶段。

有几种方法可以解决这个问题，但我不打算在这里深入探讨并发编程的复杂性。你可以找到其他资源。话虽如此，我想说的一条评论是，您既不应该执行长时间运行的任务，也不应该在*事件调度线程 (EDT)*中休眠，因为这样做会导致 UI 变得无响应（即“冻结”）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T14:16:06.483

> 我需要暂停程序..

对于像砖块破坏者这样的游戏，您通常会有一个动画循环。按下按钮时，按照用户 132 的建议行事。至于发生这种情况时该*怎么*做，这取决于首先如何组织代码以循环。

EG The Swing [`Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)，这是一种在 GUI 中循环和暂停渲染的简单方法——它提供了[`start()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html#start%28%29)&之类的方法[`stop()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html#stop%28%29)。如果您有多个计时器正在运行（例如，一个用于渲染循环，另一个用于关卡的“倒计时计时器”），您显然需要将它们全部暂停。

您当前代码的[SSCCE](http://sscce.org/)可能会提供更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:39:02.327

您处于 GUI 编程领域，该领域基本上使用**事件**（**事件驱动**）

在某种程度上，你问了错误的问题。

在**赛事驾驶**系统中，您总是在等待。当某些事件发生时，您**继续**工作。

在您的情况下，您应该考虑按下按钮时该怎么做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T13:49:38.833

这是您将需要的结构类型的基本概述。

```
 import java.swing.*
    public class Breaker
    {
        private 
        Listener listener;
        JButton b1;

        public Breaker()
        {
          listener = new Listener();
          b1 = new JButton("b1");
          b1.addActionListener(listener);

        }

        class Listener implements ActionListener
        {
            public void actionPerformed(ActionEvent e)
            Component theEventer = (Component) e.getSource();

            if (theEventer == b1)
            {
                You're stuff here
            }

        }
        public static void main (String[] args)
        {
            new Breaker();
        }
    } 
```

# unit-testing - 使用 selenium 验证弹出下载框

> ID：10175158
> 
> 赞同：0
> 
> 时间：2012-04-16T13:33:21.863
> 
> 标签：unit-testing, selenium, webdriver

我有一个网站，我在其中使用 selenium 进行集成测试。

我有使用页面中的多个变量生成的链接。当我模拟点击链接下载文件时，我想验证下载弹出框是否显示。

我知道我可以让 JsUnit 为我做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:06:05.947

Selenium 在处理下载时很糟糕。点击链接会给你带来麻烦。

但是，您可以[使用 HttpURLConnection](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)、[Apache HttpComponents](http://hc.apache.org/)（或者可能只是通过[URL](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html)获取的文件）为指定的链接发出请求并断言`200 OK`响应。或者尝试获取文件 -[这是我最喜欢](https://github.com/Ardesco/Ebselen/blob/master/ebselen-core/src/main/java/com/lazerycode/ebselen/customhandlers/FileDownloader.java)的 Selenium 工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:22:51.750

Thnx to Slanec 我已经举了你的例子。

好的，经过调查，我决定最好的解决方案是沿着这条线。

```
 public int GetFileLenghtFromUrlLocation(string location)
    {
        int len = 0;
        int timeoutInSeconds = 5;

        // paranoid check for null value
        if (string.IsNullOrEmpty(location)) return 0;

        // Create a web request to the URL
        HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create(location);
        myRequest.Timeout = timeoutInSeconds * 1000;
        myRequest.AddRange(1024);
        try
        {
            // Get the web response
            HttpWebResponse myResponse = (HttpWebResponse)myRequest.GetResponse();

            // Make sure the response is valid
            if (HttpStatusCode.OK == myResponse.StatusCode)
            {
                // Open the response stream
                using (Stream myResponseStream = myResponse.GetResponseStream())
                {
                    if (myResponseStream == null) return 0;

                    using (StreamReader rdr = new StreamReader(myResponseStream))
                    {
                        len = rdr.ReadToEnd().Length;
                    }
                }
            }
        }
        catch (Exception err)
        {
            throw new Exception("Error saving file from URL:" + err.Message, err);
        }

        return len;
    } 
```

# php - 在javascript中访问php数组变量（来自ajax调用）

> ID：10175159
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:33:22.667
> 
> 标签：php, javascript, mysql, ajax, google-visualization

我无法访问在 php 中创建的数组以在 javascript 块中使用。我知道

`<?php echo json_encode($myArray); ?>`

但我没有得到任何结果。

我有一个“index.html”文件，我尝试通过 javascript 访问数组。html 页面存在于下拉菜单中。当用户在该下拉菜单中选择一个项目时，所选项目将用作从数据库中检索数据的参数。

“ajax.js”文件包含执行“retrieve.php”文件的代码，该文件从数据库内容构造数组（“$myArray”）。所以数组是通过 ajax 调用来检索的。

我可以从我的 php 文件中“回显”到 javascript 代码吗：

`echo 'dataArray = ' . json_encode($data_array) . ';';`

并使用那个javascript变量？换句话说，如何使用新的“dataArray”变量执行我的 javascript 代码？

为了获得更大的图景：我正在尝试将该数组用于“Google Chart”，为此我需要使用 javascript 来显示图表。我可以查询所有数据并将其放入 php 数组中，但我无法使用 javascript 将其正确传输到我的 html 页面并重新加载图表。

编辑：我使用 ajax 调用 no 来重新加载整个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:54:23.340

而不是`" echo 'dataArray = ' . json_encode($data_array) . ';'; "`，你应该只写这个 - 然后在客户端使用你从服务器收到的响应（json）的响应`"echo json_encode($data_array)"`
来解释它`JSON.parse(response)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:42:06.853

我发现最好的方法是这样的：

客户端代码：

```
<script>
    var phpdata = <?=json_encode($jsData)?>;
</script> 
```

服务器代码：

```
$jsData = '';
$jsData->first = $first;
$jsData->second = $second_array; 
```

客户端使用：

```
alert(phpdata.second[1]); 
```

编辑：

要使用 AJAX 从 php 获取数组，请使用 jQuery [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

客户端：

```
var stored_array;
$.getJSON(url, function(data){
    stored_array = data;
    // run any other code you wish to run after getting the array.
}); 
```

服务器端：

```
print(json_encode($array)); 
```

这将获得一个 json 编码的变量并将其存储以供您使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:42:04.980

是的，您可以通过分配上述 json_encode 函数来使用这个 php 数组

如果数组是关联数组或 php 中使用的对象，则可以将其用作关联数组，如果是非关联数组，则可以将其用作普通数组。

# c# - 在 windows phone 中使用 Socket 接收文件

> ID：10175161
> 
> 赞同：0
> 
> 时间：2012-04-16T13:33:35.350
> 
> 标签：c#, windows-phone-7

我阅读了有关在 Windows 手机上使用套接字的 msdn 教程。（[http://msdn.microsoft.com/en-us/library/system.net.sockets.socket(v=VS.96).aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket%28v=VS.96%29.aspx)）我来连接服务器。

这个，给我回复 200（OK 回复）=>

```
HTTP/1.1 200 OK
Date: Mon, 16 Apr 2012 12:45:46 GMT
Server: Apache/2.2.9 (Debian) PHP/5.2.6-1+lenny13 with Suhosin-Patch mod_ssl/2.2.9 OpenSSL/0.9.8g
Last-Modified: Tue, 08 Aug 2006 14:12:09 GMT
ETag: "129a2e5-100000-41a822e23a040"
Accept-Ranges: byte 
```

但是我不知道下一步该怎么做...

我将我连接到服务器，我发送了一个“GET Message”以下载文件

```
"GET /dwn/file.txt HTTP/1.1\r\nHost:myHost.com\r\n\r\n" 
```

和回应之后？我必须做什么？

如果您知道教程、示例或只是解释，我将非常感谢您！

这是我的功能 =>

```
private void ProcessReceive(SocketAsyncEventArgs e)
    {
        if (e.SocketError == SocketError.Success)
        {

            response = Encoding.UTF8.GetString(e.Buffer, e.Offset, e.BytesTransferred);
            response = response.Trim('\0');

           // show the response server value. 
            Debug.WriteLine(response.ToString());

            // Data has now been sent and received from the server. 
            // Disconnect from the server
            socket = e.UserToken as Socket;
            socket.Shutdown(SocketShutdown.Send);
            socket.Close();
            clientDone.Set();
        }
        else
        {
            // show error in the debugger.
            response = e.SocketError.ToString();
            Debug.WriteLine(response);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:53:40.383

你为什么不使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.110%29.aspx)或类似的东西？

如果只是为了体验，你应该知道这不是一件小事。这里有一些提示：

*   您可能**不会**在一次“接收”调用中收到整个 HTTP 响应标头 + 正文。请记住，TCP 套接字是一个流。
*   HTTP 标头以 7 位 ASCII 编码，而不是 UTF8。
*   HTTP 实体（好吧，正文）编码取决于标头，并且解码它可能很棘手。

玩得开心 ！

**编辑**

澄清（第 1 点）：

```
 // Data has now been sent and received from the server. 
        // Disconnect from the server
        socket = e.UserToken as Socket;
        socket.Shutdown(SocketShutdown.Send);
        socket.Close(); 
```

为什么你现在关闭并关闭套接字？响应正文跟随流中的标头。正如我所说，可能还有更多的字节等待从服务器接收。继续调用“receive”，直到：

*   没有更多字节要读取（套接字已被服务器关闭）
*   您确定您已阅读整个响应正文（请参阅“Content-Length”或“Transfer-Encoding”标头）

# php - 注意：未定义的偏移量：0 - 用于错误消息

> ID：10175163
> 
> 赞同：0
> 
> 时间：2012-04-16T13:33:46.010
> 
> 标签：php

我正在尝试为必填字段显示错误消息，但它只是重定向到如果输入某些内容应该转到的页面（我将其留空）

```
$required_fields = array('NativeLanguage');
    foreach ($required_fields as $val) {
        while (is_array($val))
            $val = reset($val);
    if (!empty($_POST[$val])) {
        $val = trim($_POST[$val]);
    }
    else {
        $err[] = "ERROR - $val is required";
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:07:34.697

数组值未设置，因此当 PHP 尝试访问这些数组键的值时，它会遇到未定义的偏移量。

```
$new_array = array('1','2','3');//If I have an array
//We can now access:
$new_array[0];
$new_Array[1];
$new_array[2];
//If we try and access
$new_Array[3]; 
```

我们将得到相同的错误-->错误->注意未定义的偏移量

# sh - NetworkManager 调度程序脚本

> ID：10175170
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:34:13.470
> 
> 标签：sh, x11

/etc/NetworkManager/dispatcher.d 中的脚本将获得 exec，并且参数将由 NetworkManager 传递给脚本。

我的一台笔记本电脑 BIOS 出现故障，我必须手动同步时间，然后进行系统升级 BTW。我正在使用脚本来自动执行此任务。这是脚本：#!/bin/sh

```
IF=$1
STATUS=$2

if [ "$STATUS"x != 'up'x -o "$(date +%Y)" -gt "2012"  ] ;then
   exit
fi

logger  "==$0=="
wait_for_process(){
    PNAME=$1
    PID=`pgrep $PNAME`
    while [ -z "$PID" ];do
        logger "waiting $1 running for another 3 sec.."
        sleep 3;
        PID=`pgrep $PNAME`
    done
    logger "$1 is running!"
}
wait_for_process nm-applet
wait_for_process lxpanel

export DISPLAY=$(echo $DISPLAY | cut -c -2)

if [ -z $DISPLAY ];then
    export DISPLAY=:0
fi

#below cmd will yield null string for $user
user=$(who | grep "$DISPLAY" | awk '{print $1}' | tail -n1)
#so I have to hardcode the user name:(
user=xxx
export XAUTHORITY="/home/$user/.Xauthority"

logger "Display $DISPLAY user $user"

su $user -c "xterm -e 'sudo /usr/bin/ntpd -qdg && sudo yaourt -Syua' &" || logger "cannot run xterm" 
```

（脚本在 x 窗口之前调用，以 root 身份运行）

`user=$(who | grep "$DISPLAY" | awk '{print $1}' | tail -n1)`找不到登录用户名。但它适用于 xterm。有人可以帮忙吗？

我正在使用archlinux i686 + openbox + lxpanel

编辑：我想找到真正的登录用户名，而脚本是由 root 运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:55:26.027

您是否正在寻找运行脚本的用户的名称？怎么样：

```
user=$( id -un ) 
```

# css - css底部边框不能正常工作？

> ID：10175172
> 
> 赞同：-2
> 
> 时间：2012-04-16T13:34:18.467
> 
> 标签：css

这是我的 html 文件，其中存储了一些客户详细信息

```
<html>
    <head>

        <link rel="stylesheet" type="text/css" href="css/Home.css" />
        <title>Customer</title>
    </head>
      <body>
            <form id="formId" jwcid="formId@Form" success="ognl:listeners.addCustomer">

                <table>
                         <h3 id="customerTab1">Customer Data</h3>
                         <!--TextField for taking customerId-->

                         <!--TextField for taking customerName-->
                         <tr>
                             <td><label id="customerlabel1">Customer Name:</label>
                             <input type="text" jwcid="@TextField" id="customername" value="ognl:customerName"/></td>
                         </tr>
                         <!--TextField for taking customerAddress-->
                         <tr>
                             <td><label id="customerlabel2">Customer Address:</label>
                                 <textarea rows="2" cols="20" jwcid="@TextArea" id="address" value="ognl:address"></textarea>
                             </td>
                         </tr>
                    </table> 
                        <h3 id="customerTab2" >Select Gender</h3>
                        <!--RadioGroup with Radio buttons to select Gender--> 

                            <span id="customerGender" jwcid="customerGender@RadioGroup" selected="ognl:customerGender">
                                <Input type="radio" name="customerGender" jwcid="@Radio" value="0"/><label id="customermale">Male</label>
                                <Input type="radio" name="customerGender" jwcid="@Radio" value="1" /><label id="customerfemale">Female</label>
                            </span>

                        <h3 id="customerTab3" >Select Service</h3>
                          <!--Checkbox to select Service--> 
                         <Input type="checkbox" id="customerPrivilege" jwcid="customerPrivilege@Checkbox" value="1" selected="ognl:customerPrivilege"/>
                         <label id="privilegecustomer">Privileged Customer</label>
                        <!--List to select PaymnetMode--> 
                        <h3 id="customerTab4">Customer List</h3>

                             <select>
                                 <span jwcid="@For" source='ognl:customerList' value='ognl:currentCustomerData' keyExpression="id">
                                     <option jwcid="@Any" value='ognl:currentCustomerData.id'><span jwcid="@Insert" value='ognl:currentCustomerData.customerName'></span></option>
                                 </span>
                             </select>
                            <!--Buttons to perform desired action-->
                             <input id="submitform" type="Submit" value="Add Customer" />

            </form>      

        </body>
</html>

 2\. CSS code

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}
body
{
    margin: 17% 25%;

    border-width: 1em; 

    border-style: groove;
    border-color: orange;

    background-image:url('blue.BMP');

    background-repeat:no-repeat;
    background-position:50%;

    background-size:100%;

}
textarea {
    position: absolute;
    left: 48.2%;
    height: 5%;

    resize: none;
    width:12%;
    top: 34%;
}
#customerlabel1
{
    position: absolute;
    left: 34%;
    top: 30%;
    font-family:verdana;
    font-weight:bold;
}
#customerlabel2
{
    position: absolute;
    left: 34%;
    top: 34%;
    font-family:verdana;
    font-weight:bold;
}
#customername {
    position: absolute; 
    left: 48%;
    top: 29.5%;
}
#customerGender
{
    position: absolute; 
    left: 42%;
    top: 47%;
}
#customermale
{

    font-family:verdana;
    font-weight:bold;

}
#customerfemale
{

    font-family:verdana;
    font-weight:bold;

}
#customerPrivilege
{
    position: absolute; 
    left:40%;
    top: 57%;

}
#privilegecustomer
{
    position: absolute; 
    left: 42%;
    top: 57%;
     font-family:verdana;
    font-weight:bold;
}
#customerTab1 {
    position: absolute;
    left: 42%;
    top: 26%;
    background-color:fuchsia ;
    background-repeat: no-repeat;
    color: black;
    text-align: left;
    font-family: Arial;
    font-style:  normal;
    font-weight: 500;
    font-size: 1.5em;
}
#customerTab2 {
    position: absolute;
    left: 42%;
    top: 42%;
    background-color: fuchsia;
    background-repeat:  repeat-x;
    color: black;
    text-align: left;
    font-family: Arial;
    font-style:  normal;
    font-weight: 500;
    font-size: 1.5em;
}
#customerTab3 {
    position: absolute;
    left: 42%;
    top:  52%;
    background-color: fuchsia;
    background-repeat:  repeat-x;
    color: black;
    text-align: left;
    font-family: Arial;
    font-style:  normal;
    font-weight: 500;
    font-size: 1.5em;
}
#customerTab4 {
    position: absolute;
    top: 62%;
    left: 42%;
    background-color: fuchsia;
    background-repeat:  repeat-x;
    color: black;
    text-align: left;
    font-family: Arial;
    font-style:  normal;
    font-weight: 500;
    font-size: 1.5em;

}
select {
    position: absolute;
    left: 44%;
    top: 66%;
    font-family:verdana;
    font-weight:bold;
}
#submitform
{
    position: absolute ;
    left: 44%;
    top: 70%;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:55:30.753

你的问题不是很清楚，但我猜你的问题是边框没有正确包装`body`你的html。发生这种情况是因为您绝对将所有元素定位`form`在`body`. 由于所有元素都是绝对定位的，所以实际上没有元素在 body 的布局内，所以浏览器将 body 的高度设置为 0。

我建议重写你的 css 以避免表单元素的大部分绝对定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:41:33.883

您的问题不清楚（有哪些元素边框有问题 - 并且只有适用于该元素的 css 类？），但一般来说，如果对象为空（没有可显示的内容），某些浏览器不会显示边框。

为了解决这个问题，在空对象中放置一个“空格”，例如：

```
<td>
</td> 
```

会变成

```
<td>&nbsp;</td> 
```

# xcode - Xcode 错误？带有 TableView 的旁白

> ID：10175173
> 
> 赞同：1
> 
> 时间：2012-04-16T13:34:19.720
> 
> 标签：xcode, tableview, voiceover

我只是想知道这是一个现有的错误还是有解决这个问题的方法。在 tableview 中，打开画外音会导致空的表格单元格......有人吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"tableCell";

//Exisint bug if using TableViewCell
TableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[TableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
// Configure the cell.
cell.pLabel.text = [self.tableArrayPlaces objectAtIndex:[indexPath row]];

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *selectedDest = [tableArrayPlaces objectAtIndex:indexPath.row];

//Get the selected country
NSLog(@"SelectedDest %@", selectedDest);
} 
```

已编辑：添加代码。这是我填充单元格的代码。在情节提要中，我将其设置为“推”，似乎无法正常工作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:29:53.527

它可能是 iOS 或您的代码中的错误，但可能不是 Xcode 中的错误。

检查您的表视图控制器的`-tableView:cellForRowAtIndexPath:`方法。生成空单元格时是否会调用它？如果没有，为什么不呢？如果是，它是否返回格式正确的单元格？您能否在其他应用程序（例如联系人）中重现该问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:05:10.217

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"tableCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
// Configure the cell.    
cell.text = [tableArrayPlaces objectAtIndex:[indexPath row]];

return cell;
} 
```

我没有使用我自己的 cellView，而是使用了 UITableViewCell。这解决了我的问题。但当然，我不能再直接在我的故事板上进行任何链接。

# ruby-on-rails - 在 Rails 中上传 CSV 的最佳选择？

> ID：10175175
> 
> 赞同：0
> 
> 时间：2012-04-16T13:34:30.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, csv, ruby-on-rails-3.1

创建一个表单的最佳选择是什么，您可以上传一个 CSV 文件并选择一个模型，例如（用户、公司、联系人），它获取 CSV 文件的内容并将它们逐行插入到数据库中，跳过任何重复但符合模型中的验证？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T14:23:25.923

我认为你的问题有两个部分：

1.  上传文件
2.  将 CSV 解析到您的表格中。

对于上传文件，我喜欢 Carrierwave，但 Paperclip 也很受欢迎。我会先上传文件并将其存储在某处，以便您可以在 DelayedJob（或其他异步过程）中进行解析。存储文件后，您可以开始解析它并将其存储在表中的工作，使用 Ruby 的内置 CSV 解析器应该可以很好地完成此任务（它曾经被称为 FasterCSV）。

解析它的代码类似于：

```
parsed_file = CSV.parse(imported_file, :headers => true, :skip_blanks => true) 
```

然后，您可以遍历 parse_file 中的每个“对象”并根据需要进行处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T10:00:32.973

按照 rails casts 导入 csv [http://railscasts.com/episodes/396-importing-csv-and-excel](http://railscasts.com/episodes/396-importing-csv-and-excel)

# c# - 返回视图，也跳转到 div

> ID：10175176
> 
> 赞同：0
> 
> 时间：2012-04-16T13:34:33.907
> 
> 标签：c#, asp.net, asp.net-mvc-2

我有一个带有一些服务器端验证的页面。它的工作原理是，在服务器验证失败时，它会显示相同的页面，并在输入数据的表单上方显示一个带有验证错误的框。

我的问题是页面顶部有一大堆其他东西，所以用户没有被引导到错误框，实际上它可能不在屏幕上。错误在 div #server_errors 中。我想要的是告诉控制器返回视图，但跳转到错误部分，与将 #server_errors 附加到 url 相同。

控制器返回如下：

```
public ActionResult ChangeRiskCategory(Guid id)
{
    //...
    //call server side method,  handle errors
    //...
    return View("ChangeRiskCategory", changeRiskCategoryModel);
} 
```

我现在看不到将 div id 注入视图的方法。我可以看到验证客户端可以解决这个问题，但它需要在没有启用 js 的情况下工作，所以我认为这可以排除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:52:32.547

你可以尝试这样的事情：

```
public ActionResult ChangeRiskCategory(Guid id, bool error = false)
{
    //...
    //call server side method,  handle errors
    //...
    if (!error && !ModelState.IsValid /*or other way of working out the error will be displayed*/)
    {
        return Redirect(Url.Action("ChangeRiskCategory") + "?id=" + id + "&error=true#server_error");
    }
    return View("ChangeRiskCategory", changeRiskCategoryModel);

} 
```

（“error”参数是为了阻止它无休止地重定向）

如果您改变主意使用 javascript，您可以简单地发出：

```
location.href='#server_errors'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:09:34.410

将 div id 作为 ViewModel 的属性传递给 View 怎么样？然后你可以在视图中用 Javascript 做任何你想做的事情。毕竟，ViewModel 代表了 View 的数据和状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:35:13.210

使用基于模型的验证并让您查看看起来像这样

```
@model SampleApplication.Models.BasicDemoModel

<form id="AjaxForm" action="/">
    <table>
        <tr>
            <td>@Html.LabelFor(x => x.Name)</td>
            <td>
                @Html.TextBoxFor(x => x.Name)
                @Html.ValidationMessageFor(x => x.Name, "*")
            </td>
        </tr>
        <tr>
            <td>@Html.LabelFor(x => x.Email)</td>
            <td>
                @Html.TextBoxFor(x => x.Email)
                @Html.ValidationMessageFor(x => x.Email, "*")
            </td>
        </tr>
        @{
            Html.RenderPartial("Address", Model);
        }
    </table>
    @if (!string.IsNullOrWhiteSpace(Model.Message))
    {
        <h2>@Model.Message</h2>
    }
    @if (!ViewContext.ViewData.ModelState.IsValid)
    {
        @Html.ValidationSummary()
    }
    <input type="submit" title="Submit Form" onclick="PostFormWithAjax();return false;" />
</form> 
```

如果您需要额外的验证消息，您可以像这样将其添加到更多状态

```
public ActionResult ChangeRiskCategory(Guid id)
{
    //...
    //call server side method,  handle errors
    //...
    ModelState.AddModelError("MyInput","This isn't Right");
    return View("ChangeRiskCategory", changeRiskCategoryModel);
 } 
```

# jquery - jQuery 验证：显示/隐藏默认元素之外的自定义元素

> ID：10175178
> 
> 赞同：2
> 
> 时间：2012-04-16T13:34:35.667
> 
> 标签：jquery, validation, callback, hide, element

我想做的是以下。我有一张图片显示悬停时的工具提示。当字段未通过验证时，我想在新段落中显示默认错误消息以及图像的标题。然后应该隐藏工具提示图像。当该字段通过验证时，应再次隐藏默认错误消息（默认行为），应隐藏我的段落并再次显示工具提示图像。

因此，当字段未通过验证时：
- 默认验证错误消息
- 工具提示图像的标题

当一个字段通过验证时：
- 工具提示图像

我弄清楚了“验证失败”部分，但是当该字段通过验证时，工具提示图像的标题仍然显示并且工具提示图像被隐藏。所以我基本上需要的是当某些字段通过验证时对函数的回调。

这是我到目前为止所得到的：

```
$(document).ready(function(){

$('form#saveform').validate({

    ignore: ":hidden",
    errorPlacement: function (error, element) {

        var error_td = element.parent('td').next('td');
        var tooltip_img = error_td.find('img.tooltip');

        error_td.append(error);
        error_td.append('<p class="notice">' + tooltip_img.attr('oldtitle') + '</p>');

        tooltip_img.hide();

    }

});

}); 
```

谁能帮我完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:27:13.327

我认为验证成功时验证插件不会有回调。虽然它有回调来应用和删除元素的错误突出显示。所以你可以做的是：

```
$('form#saveform').validate({
  highlight: function(element, errorClass, validClass) {
    // add error, hide image
  },
  unhighlight: function(element, errorClass, validClass) {
     // remove error, show image
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:15:10.630

啊——你想要`success`钩子：

```
$(document).ready(function(){

    $('form#saveform').validate({

        ignore: ":hidden",
        errorPlacement: function (error, element) {

            var error_td = element.parent('td').next('td');
            var tooltip_img = error_td.find('img.tooltip');
            error_td.append(error);
            error_td.append('<p class="notice">' + tooltip_img.attr('oldtitle') + '</p>');
            tooltip_img.hide();

        }
        success: function() {
            // Your success code here...
        }

    });

}); 
```

# actionscript-3 - URLRequest 在 Firefox 上的 Mac 上失败

> ID：10175179
> 
> 赞同：1
> 
> 时间：2012-04-16T13:34:39.607
> 
> 标签：actionscript-3, flash, post

我正在使用一个名为 MultipartURLLoader 的类，它只使用 URLRequest 使用字节数据将文件发布到 url。除了在 Mac 上的 Firefox 中，一切正常。在 Mac 上的其他浏览器中很好，在 PC 上也很好。我一直在调试它，并且可以看到，如果您实际上不添加文件，对 MultipartURLLoader 的调用工作正常，只要我包含“addFile”行它就会失败。代码很简单：

```
var ml:MultipartURLLoader = new MultipartURLLoader();
ml.addEventListener(Event.COMPLETE, mp3Saved);
ml.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
ml.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
ml.addEventListener(Event.OPEN, openHandler);
ml.addEventListener(ProgressEvent.PROGRESS, progressHandler);
ml.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatusHandler);
ml.addFile(sba, new Date().time+'.mp3', 'audio_file');
ml.load(url); 
```

另一个有趣的事情是这些事件都没有被触发——它似乎没有打开、报告任何进度、报告任何错误或接收任何 http 响应。然而，几分钟后错误事件被触发，因此闪存肯定正在尝试它并超时。我在 Firefox 中下载了一个名为 Live HTTP Headers 的插件，这样我就可以看到发布的内容。什么都没有——当我尝试包含“addFile”行时，只是没有发送帖子。

# r - 将部分列名传递给函数

> ID：10175181
> 
> 赞同：1
> 
> 时间：2012-04-16T13:34:40.733
> 
> 标签：r, dataframe

我正在寻找使用功能来加快数据清理过程。在显示的示例中，如果当天的“.no”列的值为 1，我希望删除 am 和 pm 列中报告的值。

`df1 = data.frame (identifier = c(1:4), mon.no = c(1,NA,NA,NA),mon.am = c(2,1,NA,3),mon.pm = c(3,4,NA,5), tues.no = c(NA,NA,1,NA),tues.am = c(2,3,1,4),tues.pm = c(3,3,2,3))`

我设想使用一个函数来清理数据：

```
clean1 = function (day) {
df1$day.am[df1$day.no==1] = NA
df1$day.pm[df1$day.no==1] = NA
return (df1)}
df2 = clean1(mon) 
```

但是，这会返回以下错误。

```
Error in `$<-.data.frame`(`*tmp*`, "day.am", value = logical(0)) : 
replacement has 0 rows, data has 4 
```

我认为这是因为该函数需要一个完整的列名并且无法填补文本输入周围的空白？是否可以以这种方式使用功能？

阅读了[这些笔记](http://vita.had.co.nz/papers/tidy-data-pres.pdf)后，我认为将我的数据整理成一个整洁的格式会是更好的做法，并且正在研究一种涉及重新组织我的数据的解决方案。但是，在数据处于原始格式时能够执行此操作也很方便。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:51:29.573

你真的很亲近。@Tyler Rinker 在评论中解释了为什么它不起作用。这是一个修复：

```
clean1 = function (day) {
  day.am = paste(day, "am", sep=".") # make a string from the variable day and the suffixes
  day.pm = paste(day, "pm", sep=".")
  day.no = paste(day, "no", sep=".")
  df1[day.am][df1[day.no]==1] = NA 
  df1[day.pm][df1[day.no]==1] = NA
  return (df1)}

df2 = clean1("mon")   # "mon" should be a string 
```

其他人可能会提供更有效的方法来做到这一点。请注意，您只能在`df1`此处使用原始文件。如果你现在运行

```
df3 = clean1("tues") 
```

你不会得到两天都清理的数据框。您也可以通过提供要对函数执行的数据框来解决此问题：

```
clean2 = function(df, day){... 
```

# java - 使用 setProperty 设置类变量的值

> ID：10175183
> 
> 赞同：0
> 
> 时间：2012-04-16T13:34:47.273
> 
> 标签：java

为什么我需要使用 setProperty 才能在我的 java 类中设置变量的值

当我可以创建变量的实例并使用实例来访问我的变量并分配一个值时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:42:13.043

你指的是[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。它是面向对象编程的基石之一。您通常希望限制其他代码干扰类的内部结构的能力。

想象一个简单的例子，将整数值设置为负值会使你的类灾难性地失败。有了一个适当的`setter`位置，您就可以更好地处理这个问题，例如：

```
public void setNumber(int number)
{
    if (number < 0)
    {
        number = 1;
    }
    this.number = number
} 
```

或（更有可能）

```
 public void setNumber(int number)
    {
        if (number < 0)
        {
            throw new Exception("Number can't be less than 0");
        }
        else
        {
            this.number = number
        }
    } 
```

正如 Raveesh Sharma 在下面的评论中所指出的，这就是为什么所有实例变量*都应该*声明为私有的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:44:06.507

它是面向对象封装原则的一般实现。在很多情况下，使用 setter 没有优势或优势微乎其微。但是，在某些情况下，它可以帮助您避免难以发现的错误。

例子

```
 Class Person 
 Integer age;
 ....
 setAge(Integer age )
 {
 if (this.age<age || age>120)
  {
    Throw new RuntimeException("The age: "+age+"is invalid");

 }
 else {
  this.age=age;
 } 
```

随着程序复杂性的增加，这可以帮助您更早地发现错误。由于您可能无法提前知道程序将如何随着时间的推移而发展，因此通常最好谨慎行事并使用 getter/setter 开始。大多数 IDE 使这变得相当轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:45:15.263

您当然可以通过直接访问给定实例的属性来分配值，但这绝对违反了 Java 面向对象原则的基本原理。

Java OO 中的最佳实践建议您通过将属性设为私有来封装类中的属性，并通过 getter/setter 授予对它们的访问权限。

应用这一原则是减少类之间耦合的一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:45:56.083

您*不需要*使用`getProperty()`or `setProperty()`（称为 getter 和 setter 方法），但它是在 Java 中访问类级别属性的首选方式。它是面向对象编程中使用的基本原则，称为封装，它根据所有权、隐私级别、对象树中的层次结构等定义了哪些对象应该有权访问哪些属性。

它还允许您对属性执行更高级的操作，例如使它们同步。这使您可以确保在访问属性时保持顺序，这样您就不会无序地覆盖值。

当我第一次学习编程时，所有这些东西对我来说并不明显，但是随着你对编程的了解更多，原因和好处开始出现并且变得更有意义。

# c# - 多个 Timers WPF 应用程序，调用线程必须是 STA 错误

> ID：10175186
> 
> 赞同：2
> 
> 时间：2012-04-16T13:35:04.423
> 
> 标签：c#, wpf, multithreading

我的 WPF 应用程序涉及多个计时器。一切都与 DispatcherTimers 一起工作，但延迟很大并且经常发生冻结（例如 3 秒冻结，然后立即添加剩余的 3 秒）。

我的问题是我不确定我必须如何重新设计我的应用程序才能解决这个问题。以前从未使用过线程，它也是我的第一个真正的 WPF 应用程序。

我收到以下错误： **调用线程必须是 STA，因为许多 UI 组件都需要这个。**

我通过使用命名空间 System.Timers 中的 Timer 替换我的 Dispatcher 计时器得到了这个错误

带有调度程序计时器的旧代码：

```
timerW = new DispatcherTimer();
        timerW.Tick += new EventHandler(timerW_Tick);
        timerW.Interval = new TimeSpan(0, 0, 5000);
        timerW.Start(); 
```

带有计时器的新代码：

```
 timerW = new Timer();
            timerW.Elapsed += new ElapsedEventHandler(timerW_Tick);
            timerW.Interval = 5000; 
            timerW.Start(); 
```

每 5 秒执行一次查询以检索日期值。当满足某些条件时，按钮会动态创建。例如*，如果日期在 3 分钟内保持不变，则会创建一个按钮。*

**动态创建的按钮包含：**

*   数据库中的日期
*   创建按钮时开始运行的计时器。此计时器仅在创建新按钮时停止，这会记录停机时间。
*   停机的一个原因

这些按钮保存在*ObservableCollection*中并使用依赖属性，以便在发生变化时得到通知。它是一个自定义按钮，带有几个文本块来显示信息。

按钮部分是我的程序中所有交互的地方，界面的其余部分只显示来自数据库的信息。这些按钮被放置在一个定制的滑块中，例如带有左右导航按钮的控件。

**所以简而言之，我的程序有 3 个不同的调度程序计时器。**

*   一个显示当前时间（hh:mm:ss 格式）
*   一个执行 sql 查询并每 5 秒检索一次日期值
*   一种在动态自定义样式的 WPF 按钮内每秒更新停机时间计时器。我用秒表记录中间的停机时间。

所以看来我需要使用**踏板**和/或**后台**工作人员？

不知道我实际上是如何开始的，因为我已经有一段时间不太了解了。一些示例代码将是最受欢迎的。

**语言：**

我使用计时器的原因如下：

*   显示当前时间
*   记录停机时间（实时，所以我实际上看到它按秒计算）
*   每 5 秒执行一次的 SQL 查询。

编辑：

```
public void InitializeDispatcherTimerW()
    {
        TimerCallback callback = MyTimerCallBack;
        timerWegingen = new Timer(callback, null, 0, 5000);

        timerWegingen.Change(0, 5000);
    }

    private void MyTimerCallBack(object state)
    {
        DisplayWegingInfo();
        CaculateTimeBetweenWegingen();
    } 
```

最好的问候，杰克兹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:02:15.587

[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)似乎需要一个 STA 线程。STA 线程是 Windows 窗体的要求，但 WPF 显然不需要它。

[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)是否满足您的需求？

这是一个例子：

```
// firstTickInterval and interval are TimeSpans
TimerCallback callback = MyTimerCallback;
Timer timer = new Timer(callback, null, firstTickInterval, interval);
// timer is now running
// To stop the timer, do timer.Change(-1, -1); 
```

回调函数如下所示：

```
void MyTimerCallback(object state)
{
    // This is not guaranteed to execute on the UI thread.
    // In this example, state will be null, since we passed null in the Timer constructor.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:29:58.450

当计时器回调代码与 UI 元素交互时，您需要使用：

```
UIElement.Dispatcher.BeginInvoke(...); 
```

更多信息：http: [//msdn.microsoft.com/en-us/magazine/cc163328.aspx](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)

# xcode - 如何在 MonoTouch 中使用 Xib 创建 UIView

> ID：10175190
> 
> 赞同：3
> 
> 时间：2012-04-16T13:35:29.607
> 
> 标签：xcode, xamarin.ios, monodevelop

我正在尝试使用 MonoTouch/MonoDevelop 创建一个带有 XIB 的自定义 UITableViewCell。

当我选择 File -> New -> File -> MonoTouch -> iPhone View 时，我得到 Xib 文件但没有关联的 UIView 类。

我可以单独创建视图类，但是如何获取关联的 Designer.cs 文件并将其全部连接起来，以便 MonoDevelop 和 XCode 之间的集成适用于设置出口和操作？

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:48:15.173

在 Xcode 中打开 XIB 之前，您必须使用 RegisterAttribute 装饰您的 UITableViewCell 类。

检查[这个](https://stackoverflow.com/questions/9857558/how-to-add-a-custom-view-to-a-xib-file-defined-view-in-monotouch/9859690#9859690)答案。

# asp.net-mvc - 不同浏览器的不同url

> ID：10175192
> 
> 赞同：0
> 
> 时间：2012-04-16T13:35:37.780
> 
> 标签：asp.net-mvc, seo

我正在使用 asp.net mvc。我使用`Html.ActionLink`chrome 创建了一个链接，Firefox 向我显示了一个 seo 友好的 url，如下所示：

> [http://localhost:3267/Store/Browse?category](http://localhost:3267/Store/Browse?category) =آموزش-برنامه-نویسی

但 IE 9.0 向我展示了这样的内容：

> [http://localhost:3267/Store/Browse?category=%D8%A7%D9%93%D9%85%D9%88%D8%B2%D8%B4-%D8%A8%D8%B1%D9% 86%D8%A7%D9%85%D9%87-%D9%86%D9%88%DB%8C%D8%B3%DB%8C](http://localhost:3267/Store/Browse?category=%D8%A7%D9%93%D9%85%D9%88%D8%B2%D8%B4-%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87-%D9%86%D9%88%DB%8C%D8%B3%DB%8C)

我应该怎么做才能在 IE 中显示友好的 seo url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:19:53.280

那些以 % 符号开头的十六进制字符是字符串中的字符，为 URL 编码。就搜索引擎而言，它们是相同的字符。

# php - codeigniter 中的 SEO 友好链接

> ID：10175198
> 
> 赞同：1
> 
> 时间：2012-04-16T13:36:02.697
> 
> 标签：php, .htaccess, codeigniter, url-rewriting

首先抱歉，如果问题已经发布，但我没有得到任何答案......

我的问题是.. 在 codeigniter 中开发应用程序。

我正在制作这样的链接

```
echo site_url('controller_name/book/'.$variable_name); 
```

其中将显示一本书的详细信息。我想做一个如下的网址

```
http://www.sitename/book/book_name ( name of the book  ) 
```

请帮我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:40:30.300

看看[url_title()](http://codeigniter.com/user_guide/helpers/url_helper.html)。

您可以使用它来设置 SEO 友好的 URL。如果你想要下划线，不要忘记传递第二个参数。

```
$url_title = url_title($title, 'underscore'); 
```

# c# - 如何在 asp.net mvc 3 项目中路由 .aspx 页面？

> ID：10175200
> 
> 赞同：15
> 
> 时间：2012-04-16T13:36:08.483
> 
> 标签：c#, asp.net, asp.net-mvc, routing

我在以下路径中有一个 .aspx 页面：

```
Areas/Management/Views/Ticket/Report.aspx 
```

我想将其路由到浏览器中的以下路径：

```
http://localhost/Reports/Tickets 
```

我怎样才能做到这一点？

我试试这个：

```
routes.MapRoute(
    "Tickets", // Route name
    "Areas/Management/Views/Ticket/Report.aspx", // Original URL
    new { controller = "Reports", action = "Tickets" } // New URL 
); 
```

但我得到了`404`错误。

我做错了什么？

Obs：我把它放在`Default`路线之前。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-16T13:59:46.497

如果您尝试在 MVC 项目中使用 Web 表单，那么我会将您的 .aspx 移出视图文件夹，因为它不是真正的视图，因此类似于 WebForms/Tickets/Report.aspx。

在 Web 表单中，您通过调用该`MapPageRoute`方法来映射路线。

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.MapPageRoute("Tickets", "Reports/Tickets", "~/WebForms/Tickets/Report.aspx");
routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

您需要将其放在默认 MVC 路由之前。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-16T17:33:59.690

**解决了！**因此，我们需要为 webforms 路由添加一个路由约束，以确保它只捕获传入路由，而不是生成传出路由。

将以下类添加到您的项目中（在新文件中或 global.asax.cs 的底部）：

```
public class MyCustomConstaint : IRouteConstraint{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection){
        return routeDirection == RouteDirection.IncomingRequest;
    }
} 
```

然后将门票路线更改为以下内容：

```
routes.MapPageRoute(
    "Tickets",
    "Reports/Tickets",
    "~/WebForms/Reports/Tickets.aspx",
    true, null, 
    new RouteValueDictionary { { "outgoing", new MyCustomConstaint() } }
); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T13:44:16.070

你正在做相反的事情。这会将您的 url 映射`Areas/Management/Views/Ticket/Report.aspx`到 {您`controller = "Reports", action = "Tickets" }`
应该做的是将 url 设置为
`Reports/Tickets` EDIT:- 您可以创建一个 routeHandler 仅用于路由到此 .aspx 页面.. 像这样。

```
public class ASPXRouteHandler : IRouteHandler 
{ 
   public IHttpHandler GetHttpHandler(RequestContext requestContext) 
   { 

     return BuildManager.CreateInstanceFromVirtualPath("~/Areas/Management/Views/Ticket/Report.aspx",  typeof(Page)) as Page; 
   } 
} 
```

然后您可以使用将您的路线添加到现有路线表中

```
Route customRoute = new Route("Reports/Ticket",null, new ASPXRouteHandler()); 
      routes.Add(customRoute); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-16T13:48:14.280

如果您在创建 asp.net 项目时保留默认路由

```
public class ReportsController : Controller
{
        public ActionResult Ticket()
        {
            return View();
        }        
} 
```

这应该可以解决问题。asp.net mvc 中的路由意味着您不直接链接到*.aspx，而是链接到操作（方法），这些操作（方法）又返回适当的视图（* .aspx）

# c# - 排序获胜表单复选框

> ID：10175204
> 
> 赞同：-5
> 
> 时间：2012-04-16T13:36:31.853
> 
> 标签：c#, .net, .net-2.0

当用户在我的 Windows 应用程序中右键单击 DataGridView 单元格时，它会清除并用列标题文本填充 CheckedListBox。然后它显示一个弹出窗口。现在如何使用检查的内容对项目进行排序？我想在同一个右键单击上进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:47:04.293

要对列表框进行排序，您需要编写自己的小代码，该代码“告诉”程序如何对数据进行排序。

请参考本[教程](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.sort.aspx)

# php - $_SESSION 被 json_decode 销毁

> ID：10175207
> 
> 赞同：2
> 
> 时间：2012-04-16T13:36:51.950
> 
> 标签：php, json, session

我正在使用 php 中的会话来存储我正在构建的网站的购物车数据。所有数据都存储为 json 字符串，并在两端使用 json_encode/json_decode 进行编码/解码。

似乎在一页上， json_decode 正在擦除我的会话数据，这看起来很奇怪。这是我将其缩小到的相关代码：

```
$cart_data = $_SESSION['cart'];
$cart = json_decode($cart_data, 1); 
```

我在测试时一直在 var_dumping $_SESSION['cart'] 并且看起来 json_decode 正在影响它，即使我没有直接告诉它（没有 json_decode，转储显示为 json 字符串，它显示为数组）。当页面被刷新或导航离开时，这会导致会话被破坏。

我有一种感觉，我错过了一些相当简单但无法发现的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:21:08.607

看起来您正在使用 register_globals = on 的服务器上运行此脚本 - 这会导致变量`$cart`被预注册为对`$_SESSION['cart']`（奇怪，但真实）的引用。因此，您将 json_decode() 的输出直接写入会话对象。

解决此问题的最佳方法是停用 register_globals，或者，如果不可能，请在分配新值之前`$cart`使用不同的变量名称或取消绑定。`unset($cart);`

在文档中阅读更多信息：[http ://www.php.net/manual/en/reserved.variables.session.php#85448](http://www.php.net/manual/en/reserved.variables.session.php#85448)

# php - 这种混乱的爆炸有什么可能的最佳选择吗？

> ID：10175209
> 
> 赞同：0
> 
> 时间：2012-04-16T13:37:00.360
> 
> 标签：php, explode

我有一个拇指生成器脚本，需要我使用define 来指示文件夹的路径...我从/images/galleries/name/imagem.jpg 形式的mySQL 字段中挑选它

我想我这样做是菜鸟的方式......必须有更好的方法来做到这一点！

```
while($r3 = mysql_fetch_array($e3)){ 
    $path = $r3['pathURLMult'];
    $ped = explode("/", $path);
    $path2 = $ped[0] . "/" . $ped[1] . "/" . $ped[2] . "/";
    define("FOLDER_IMAGES","$path2");
    $imagem = $ped[3];
    echo "<img src=\"getimage.php?img=$imagem&w=280&h=180\" width=\"280\" height=\"180\" />";
} 
```

有人可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:41:11.023

该代码似乎很奇怪，但在不了解更多信息的情况下，我想我不会对此发表评论。

对于实际问题，您可以使用[`dirname`](http://www.php.net/dirname)and [`basename`](http://www.php.net/basename)：

```
$path = dirname($r3['pathURLMult']);
$imagem = basename($r3['pathURLMult']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:01:31.753

使用路径信息（）；

尝试这个：

```
while($r3 = mysql_fetch_array($e3)){ 
    $pathinfo = pathinfo($r3['pathURLMult']);
    define("FOLDER_IMAGES",$pathinfo['dirname']);
    echo "<img src=\"getimage.php?img=".$pathinfo['filename']."&w=280&h=180\" width=\"280\" height=\"180\" />";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:47:24.483

这是错误的。您在带有变量定义的循环中有一个定义，定义应该只发生一次。变量 $r3['pathURLMult'] 的示例值是什么？（顺便说一句，$r3，$e3，$ped... 我相信您可以找到更好的变量名；）

# ruby-on-rails - Ruby on Rails - 路由 - 跳出 URL

> ID：10175214
> 
> 赞同：0
> 
> 时间：2012-04-16T13:37:18.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, seo, routes

我的 routes.rb 文件：

```
resources :forums do
   resources :discussions, 
end 
```

我的项目已全部设置并正常运行，论坛主题的 URL 是：

```
localhost:3000/forums/ - (forum name using permalink) - /topics/1 
```

我想用一个更简单的版本替换它：

```
localhost:3000/forums/ - (forum name using permalink) - /1 
```

基本上，从 URL 中删除 'topics' 部分并完全禁用 '/topics' - 这样就无法访问它。

我已经设置了论坛的显示页面以显示其主题列表。实现这一目标的最佳方法是什么？提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:46:38.083

您需要将路线添加到您的`config/routes.rb`.

在我看来，最简单的方法是为`/forums/general-chat`.

```
match 'forums/:forumname/general-chat/:id => 'controller#method' 
```

要禁用带有主题的旧路由：

```
match 'forums/:forumname/topics/:id' => redirect("forums/%{forumname}/%{id}") 
```

[铁轨路线指南](http://guides.rubyonrails.org/routing.html)很棒！

# php - PHP 参考说明返回

> ID：10175215
> 
> 赞同：0
> 
> 时间：2012-04-16T13:37:19.063
> 
> 标签：php

我在这里有一个示例脚本，通过引用魔术 __get 返回：

```
class a{

    public $_attributes = array();

    function &__get($k){
        if(isset($this->_attributes[$k])){
            return $this->_attributes[$k];
        }else{
            return null;
        }
    }

    function __set($k, $v){
        $this->_attributes[$k] = $v;
    }
}

$a = new a();
$a->username = "sam";
var_dump($a->username);
$u = $a->username;
$u = $u.'dddd';
var_dump($a->username);
var_dump($u); 
```

从我的 __get 此处通过引用返回的想法是，我可以执行以下操作：

```
 $this->user->ins[session_id()] = array(
        "key"=>$_SESSION['server_key'],
        "ip"=>$_SERVER['REMOTE_ADDR'],
        "agent"=>$_SERVER['HTTP_USER_AGENT'],
        "last_request"=>$_SERVER['REQUEST_URI'],
        "last_active"=>new MongoDate(),
    ); 
```

由于 PHP 使用原始数组的副本，我通常无法正常使用。但是，当我将“用户名”拉入一个新变量 ($u) 时，我不希望它传递其原始父级的引用。

上面的脚本打印出来：

```
string(3) "sam" string(3) "sam" string(7) "samdddd" 
```

这太棒了，因为它没有将 $username 作为引用传递回 $u 并且它像我想要的那样工作。

现在是时候提出问题了：这是一个好方法吗？PHP中的预期行为是这样做的吗？

我一直在阅读该页面以供参考，但它有点不完整，但是它确实提到要告诉 PHP $u 应该是一个参考，我在拉出变量时还必须使用参考符号（可以在这里看到：[http： //php.net/manual/en/language.references.return.php](http://php.net/manual/en/language.references.return.php)）。

那么这是预期的行为吗，我可以在 PHP 中依赖它还是有什么可怕的东西我没有看到？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:54:13.333

> 现在是时候提出问题了：这是一个好方法吗？PHP中的预期行为是这样做的吗？

这是一种不好（奇怪）的方法。简单地操作对象，这是比较普遍的做法。你拥有它的方式很棘手，并且可能会在开发过程中误导你。

如果您决定继续使用参考方法，则需要确保您通过参考获得了价值。请参阅下面的示例：

```
$a = new a();
// returning by reference is not enough, you need to receive by ref as well
$u =& $a->username; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T23:34:45.520

不是通过引用返回数组，而是返回一个`ArrayObject`.

```
class Foo
{
  private $data;

  public function __construct()
  {
    $this->data = new ArrayObject();
  }

  public function __get($key)
  {
    return $this->data;
  }
}

$foo = new Foo();
$foo->data['bar'] = 42;
var_dump($foo->data); 
```

输出：

```
object(ArrayObject)#2 (1) {
  ["storage":"ArrayObject":private]=>
  array(1) {
    ["bar"]=>
    int(42)
  }
} 
```

不幸`ArrayObject`的是，PHP 不能直接与 PHP 数组函数一起使用，但我更喜欢上面的方法，而不是总是`__get`通过引用返回。

如果将标量封装在实现`__toString()`. 是的，这也有缺陷，但我总是不鼓励`__get`通过引用使用。

# java - Java的代码问题

> ID：10175219
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:37:23.213
> 
> 标签：java

我正在使用[LongIntParallelHashMultimap](https://stackoverflow.com/questions/10064422/java-on-memory-efficient-key-value-store?answertab=votes#tab-top) java 代码，这是我[在此处](https://stackoverflow.com/questions/10064422/java-on-memory-efficient-key-value-store?answertab=votes#tab-top)获得的上一个问题的答案。我将地图保存在磁盘中并将其加载到内存中。但是，在将地图加载到内存后，当我执行 get 方法时，代码会停止执行并进入永无止境的循环。任何人都可以帮助我为什么会发生这种情况以及如何解决这个问题？任何提示都会对我有所帮助。

我的代码可以在[这里](http://textuploader.com/?p=6&id=KrkdA)找到，也可以在下面给出：

```
import java.io.*;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Arrays;
import java.util.Random;
import java.nio.*;
import java.nio.channels.FileChannel;
import java.io.RandomAccessFile ;

public class Test{
public static void main(String args[]){

LongIntParallelHashMultimap abc = new LongIntParallelHashMultimap(10, "a.txt","b.txt");
Random randomGenerator = new Random();

for(int i = 1 ; i < 5 ; i++ ){
long b = (long) Math.floor(i/2) + 1 ;
int  c = randomGenerator.nextInt();
abc.put(b,c) ;
}

int[]tt = abc.get(1);
System.out.println(tt[0]);
abc.save();

abc.load();

int[]tt1 = abc.get(1);
System.out.println(tt1[0]);

 }
}

class LongIntParallelHashMultimap {

private static final long NULL = -1L ;

private final long[] keys;
private final int[] values;
private int size;
private int savenum = 0;
private String str1 = "";
private String str2 = "";

public LongIntParallelHashMultimap(int capacity, String st1, String st2 ) {
    keys = new long[capacity];
    values = new int[capacity];
     Arrays.fill(keys, NULL);
     savenum = capacity ;
     str1 = st1;
     str2 = st2;
}

public void load(){
try{
FileChannel channel2 = new RandomAccessFile(str1, "r").getChannel();
MappedByteBuffer mbb2 = channel2.map(FileChannel.MapMode.READ_ONLY, 0,     channel2.size());
 mbb2.order(ByteOrder.nativeOrder());
  assert mbb2.remaining() == savenum * 8;
 for (int i = 0; i < savenum; i++) {
long l = mbb2.getLong();
keys[i] = l ;
 }
channel2.close();

FileChannel channel3 = new RandomAccessFile(str2, "r").getChannel();
MappedByteBuffer mbb3 = channel3.map(FileChannel.MapMode.READ_ONLY, 0, channel3.size());
mbb3.order(ByteOrder.nativeOrder());
assert mbb3.remaining() == savenum * 8;
for (int i = 0; i < savenum; i++) {
long l = mbb3.getLong();
keys[i] = l ;
 }
channel3.close();
}

catch(Exception e){
        System.out.println(e) ;
    }
}

public void put(long key, int value) {
    int index = indexFor(key);
    while (keys[index] != NULL) {
        index = successor(index);
    }
    keys[index] = key;
    values[index] = value;
    ++size;
}

public int[] get(long key) {
    int index = indexFor(key);
    int count = countHits(key, index);
    int[] hits = new int[count];
    int hitIndex = 0;

    while (keys[index] != NULL) {
        if (keys[index] == key) {
            hits[hitIndex] = values[index];
            ++hitIndex;
        }
        index = successor(index);
    }

    return hits;
}

private int countHits(long key, int index) {
    int numHits = 0;
    while (keys[index] != NULL) {
        if (keys[index] == key) ++numHits;
        index = successor(index);
    }
    return numHits;
}

private int indexFor(long key) {
return Math.abs((int) ((key * 5700357409661598721L) % keys.length));
}

private int successor(int index) {
    return (index + 1) % keys.length;
}

public int size() {
    return size;
}

     public void save() {
    try {
        long l = 0 ;
 FileChannel channel = new RandomAccessFile(str1, "rw").getChannel();
 MappedByteBuffer mbb = channel.map(FileChannel.MapMode.READ_WRITE, 0, savenum * 8);
 mbb.order(ByteOrder.nativeOrder());

for(int i = 0 ; i < savenum ; i++){
l = keys[i] ;
  mbb.putLong(l);
}
channel.close();

FileChannel channel1 = new RandomAccessFile(str2, "rw").getChannel();
MappedByteBuffer mbb1 = channel1.map(FileChannel.MapMode.READ_WRITE, 0, savenum * 8);
mbb1.order(ByteOrder.nativeOrder());

for(int i = 0 ; i < savenum ; i++){
 l = values[i] ;
 mbb1.putLong(l);
 }
 channel1.close();
    }
catch (Exception e){
   System.out.println("IOException : " + e);
      }
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:55:52.187

使用我的调试器单步执行代码，我可以看到您的 load()`keys[]`在您应该设置`keys[]`and时设置了两次`values[]`（复制和粘贴错误）

当我更改第二个负载时，测试似乎运行良好。

* * *

如果您想在不创建副本的情况下访问键和值，您可以从

```
private final LongBuffer keys;
private final IntBuffer values;
private int size;
private int savenum = 0;
private final FileChannel channel1;
private final FileChannel channel2;

public LongIntParallelHashMultimap(int capacity, String st1, String st2) throws IOException {
    boolean newFile = !new File(st1).exists();

    channel1 = new RandomAccessFile(st1, "rw").getChannel();
    MappedByteBuffer mbb1 = channel1.map(FileChannel.MapMode.READ_WRITE, 0, capacity * 8);
    mbb1.order(ByteOrder.nativeOrder());

    keys = mbb1.asLongBuffer();

    channel2 = new RandomAccessFile(st2, "rw").getChannel();
    MappedByteBuffer mbb2 = channel2.map(FileChannel.MapMode.READ_WRITE, 0, capacity * 4);
    mbb2.order(ByteOrder.nativeOrder());

    values = mbb2.asIntBuffer();

    if (newFile)
        for(int i=0;i<capacity;i++)
            keys.put(i, NULL);

    savenum = capacity;
}

public void close() throws IOException {
    channel1.close();
    channel2.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:26:56.180

我有点愚蠢，因此犯了这种愚蠢的错误。修改后的代码在这里：

[http://textuploader.com/?p=6&id=xkAHw](http://textuploader.com/?p=6&id=xkAHw)。谢谢。

# php - 我怎样才能有效地添加成像处理得到这个脚本

> ID：10175226
> 
> 赞同：0
> 
> 时间：2012-04-16T13:37:52.843
> 
> 标签：php, mysql, forms, upload

希望有人可以在这里帮助我。整夜浏览，我尝试的任何东西似乎都不起作用，但我是 php 新手，所以我很慢。我需要上传 6 张图片，这很好用。但后来我意识到您不仅可以上传图像，还可以上传所有其他文件类型。我试图能够将其限制为每个 100kb 以下的图像。嘻嘻嘻嘻嘻嘻嘻！！！请！

```
function findexts ($filename) { $filename = strtolower('$filename') ; 
$exts = preg_split("[/\\.]", $filename) ;
 $n = count($exts)-1; 
 $exts = $exts[$n];
  return $exts;
   }

$ext = findexts ($_FILES['images']['name']) ; 
$ran = rand ();
$ran2 = $ran.".";

while(list($key,$value) = each($_FILES['images']['name']))
        {
            if(!empty($value))
            {
                $filename = $ran.$value;
                    $filename=str_replace(" "," _ ",$filename);// Add _ inplace of blank space in file name, you can remove this line

                    $add = "media/".$ran."$filename";
                $insert_query = "INSERT INTO ....VALUES ...";
                       //echo $_FILES['images']['type'][$key];
                 // echo "<br>";
                    copy($_FILES['images']['tmp_name'][$key], $add);
                    chmod("$add",0777);

        mysql_query($insert_query);

            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:44:40.393

在此处查看您的两个问题的答案：

[https://stackoverflow.com/a/9153419/723855](https://stackoverflow.com/a/9153419/723855)

将此函数添加到您的脚本（从链接修改）：

```
function acceptFileUpload($thefile){
    if(isset($_FILES[$thefile])) {
        $errors     = array();
        $maxsize    = 2097152;
        $acceptable = array(
            'application/pdf',
            'image/jpeg',
            'image/jpg',
            'image/gif',
            'image/png'
        );

        if(($_FILES[$thefile]['size'] >= $maxsize) || ($_FILES[$thefile]["size"] == 0)) {
            $errors[] = 'File too large. File must be less than 2 megabytes.';
        }

        if(!in_array($_FILES[$thefile]['type'], $acceptable)) && (!empty($_FILES[$thefile]["type"]))) {
            $errors[] = 'Invalid file type. Only PDF, JPG, GIF and PNG types are accepted.';
        }

        if(count($errors) !== 0) {
            return true;
        } else {
            foreach($errors as $error) {
                echo '<script>alert("'.$error.'");</script>';
                return false;
            }

            die(); //Ensure no more processing is done
        }
    }
} 
```

然后在您的脚本中更改您的 while 循环以使用此函数来检查有效文件：

```
while(list($key,$value) = each($_FILES['images']['name']))
    {
        if(!empty($value))
        {
            if(acceptFileUpload('images'))
            {
            $filename = $ran.$value;
                $filename=str_replace(" "," _ ",$filename);// Add _ inplace of blank space in file name, you can remove this line

                $add = "media/".$ran."$filename";
            $insert_query = "INSERT INTO ....VALUES ...";
                   //echo $_FILES['images']['type'][$key];
             // echo "<br>";
                copy($_FILES['images']['tmp_name'][$key], $add);
                chmod("$add",0777);

    mysql_query($insert_query);
            }
        }

    } 
```

我可能没有传递给acceptFileUpload（）的那个参数权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:43:08.083

你可以检查文件类型

```
$_FILES['image']['type'] 
```

或者如果您也想检查扩展名

```
$extension = explode('.',(string)$_FILES['image']['name']);
//then check if its "jpg", "gif" or "png" 
```

文件大小可以检查

```
$_FILES['image']['size'] 
```

因此，对于每个图像更新，您的脚本应该是这样的：

```
$extension = explode('.',$_FILES['image']['name']);
$imgextensions = array();
$size      = $_FILES['image']['size'];
if(($extension == 'jpg' || $extension == 'gif' || $extension == 'png') &&
    $size < 100000 ){
    // upload your file to your filesystem
}else{
    //inform the user
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:58:53.180

在每个文件的处理脚本上运行四个函数，如果所有测试都通过则文件满足您的条件并且可以安全存储（png / jpg / gif + 非零 + 10Kb 限制 + 上传文件）

```
//Example Call: checkFileExtension($_FILES['fieldname']['name']);
function checkFileExtension($filename) {
    $filename = strtolower($filename) ;
    $filenamePartsArray = preg_split("[/\\.]", $filename) ;
    $extension = $filenamePartsArray[count($filenamePartsArray) - 1];
    if (($extension == 'gif') || ($extension == 'jpeg') || ($extension == 'jpg') || ($extension == 'png')) {
        return true;
    } else {
        return false;
    }
}

//Example Call: checkFileMIME($_FILES['fieldname']['type']);
function checkFileMIME($filetype) {
    if (($filetype == 'image/png') || ($filetype == 'image/jpeg') || ($filetype == 'image/gif')) {
        return true;
    } else {
        return false;
    }
}

//Example Call: checkFileSize($_FILES['fieldname']['size'], 10);
function checkFileSize($filesize, $limitKb = 0) {
    if ($filesize == 0) {
        return false;
    }
    if ($limitKb != 0) {
        if ($filesize > ($limitKb * 1024)) {
            return false;
        }
    }
    return true;
}

//Native Call: is_uploaded_file($_FILES['fieldname']['tmp_name']); 
```

编辑：伪示例使用

```
foreach ($_FILES as $fieldname => $file) {
    if ((checkFileExtension($file['name'])) && (checkFileMIME($file['type'])) && (checkFileSize($file['size'], 10)) && (is_uploaded_file($file['tmp_name']))) {
        //Move the image with move_uploaded_file
        //Save the file location with DB insert
    }
} 
```

# unix - 记录到 syslog 与文件系统：优点和缺点

> ID：10175234
> 
> 赞同：7
> 
> 时间：2012-04-16T13:38:44.527
> 
> 标签：unix, logging, syslog

大多数应用程序和服务都记录到文件系统。他们为什么不使用系统日志？是慢还是不可靠？

使用 syslog 的真正优点和缺点是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T13:49:21.690

缺点

*   类别数量有限（例如，与 log4j 相比），这限制了过滤能力
*   系统范围，需要管理员权限才能设置
*   并非在所有操作系统上都可用（例如，Windows）

优点

*   应用程序日志记录是即插即用的，具有众所周知的位置
*   过滤所有消息的单一位置
*   考虑了许多常见功能（例如写入文件、远程发送日志、轮换日志文件）
*   可以构建（并且实际存在）可以同时查看所有应用程序日志的工具

# c# - ASP.Net 页面生命周期中 LoadViewState 和 TrackViewState 事件的区别

> ID：10175235
> 
> 赞同：1
> 
> 时间：2012-04-16T13:38:49.747
> 
> 标签：c#, asp.net, viewstate, page-lifecycle

在 ASP.NET 中的 TrackViewState 页面事件方法中究竟发生了什么。它与 LoadViewState 有何不同。

谢谢，普拉文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:13:33.990

ViewState 属性的类型为 System.Web.UI.StateBag。StateBag 类提供了一种存储名称和值对的方法，在后台使用 System.Collections.Specialized.HybridDictionary。

StateBag 有 TrackViewState() 方法的原因是为了尽可能减少视图状态。同样，我们不想将初始属性值存储在视图状态中，因为它们不需要在回发中持久化。因此，TrackViewState() 方法允许在实例化和初始化阶段之后开始状态管理。

有关更多信息，请按照 [此链接中的小标题计时视图状态跟踪](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# java - 如何在我的网页中使用 EasyRec

> ID：10175245
> 
> 赞同：1
> 
> 时间：2012-04-16T13:39:40.813
> 
> 标签：java, resteasy

我对这个 EasyRec 推荐应用程序很陌生。我在我的系统中部署了 Easyrec 战争文件并使用我的凭据登录，我使用产品 url 创建了自己的 telnet，现在我想在 Easyrec 中添加产品 id 作为项目 id，但我离“如何使用 easyrec”1)如何在 easyrec 中添加项目详细信息 2) 我需要在 Easyrec 中添加详细信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:36:28.330

you should use the API of easyrec - they released a great tool to playaround with your API few days ago ... [http://easyrec.sourceforge.net/APITEST.html](http://easyrec.sourceforge.net/APITEST.html)

you should read the wiki pages which cover the basics of the easyrec recommender system... [http://sourceforge.net/apps/mediawiki/easyrec/index.php?title=Documentation_v0.97](http://sourceforge.net/apps/mediawiki/easyrec/index.php?title=Documentation_v0.97)

to get started you could use the Javascript API which is very easy to use... [http://sourceforge.net/apps/mediawiki/easyrec/index.php?title=JavaScript_API_v0.97](http://sourceforge.net/apps/mediawiki/easyrec/index.php?title=JavaScript_API_v0.97)

# android - Android：什么时候将图像存储在资产而不是可绘制文件夹中？

> ID：10175250
> 
> 赞同：0
> 
> 时间：2012-04-16T13:40:22.763
> 
> 标签：android

我有一堆适用于所有分辨率的图像（目前我只支持一种分辨率。这是有原因的）。

我的问题是，什么时候适合将图像存储在 assets 文件夹而不是 drawable 文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:53:38.300

如果您想按原始名称访问图像，最好将图像保存在 assets 文件夹中。然后，您可以使用以下方法获取它们：

```
AssetManager:AssetManager am = getResources().getAssets();
try {
    InputStream is = am.open("image.png");
    // use the input stream as you need
} catch (IOException e) {
    e.printStackTrace();
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:05:01.033

您可以随时更改资产文件夹中的文件，并且不会受到任何影响（我的意思是“无”指应用程序的资源）。例如，将图像文件的名称作为参数给出可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:12:50.953

> res/raw 目录中的原始资源和资产之间的区别在于资产的行为类似于文件系统，它们**可以被列出、迭代、发现，就像文件一样**，而对于原始资源，您需要资源 ID。
> 
> 来自： http: [//mylifewithandroid.blogspot.it/2009/06/assets.html](http://mylifewithandroid.blogspot.it/2009/06/assets.html)（强调我的）

当您需要使用子文件夹组织事物时，您也可以使用资产。

# file - 将文件读入类型 - Haskell

> ID：10175251
> 
> 赞同：-2
> 
> 时间：2012-04-16T13:40:26.657
> 
> 标签：file, haskell, input

现在我有两种类型：

```
type Rating = (String, Int)

type Film = (String, String, Int, [Rating]) 
```

我有一个文件，其中包含以下数据：

```
"Blade Runner"
"Ridley Scott"
1982
("Amy",5), ("Bill",8), ("Ian",7), ("Kevin",9), ("Emma",4), ("Sam",7), ("Megan",4)

"The Fly"
"David Cronenberg"
1986
("Megan",4), ("Fred",7), ("Chris",5), ("Ian",0), ("Amy",6) 
```

我如何查看将所有条目存储到类似 FilmDatabase = [Film] 的文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T17:14:05.617

Haskell 提供了一种独特的方式来勾勒出你的方法。从你知道的开始

```
module Main where

type Rating = (String, Int)
type Film = (String, String, Int, [Rating])

main :: IO ()
main = do
  films <- readFilms "ratings.dat"
  print films 
```

尝试将此程序加载到 ghci 将产生

```
films.hs:8:12：不在范围内：`readFilms'
```

它需要知道是什么`readFilms`，所以添加足够的代码以继续移动。

```
readFilms = undefined 
```

它是一个应该做与`Film`数据相关的事情的函数。重新加载此代码（使用`:reload`命令或`:r`简称）以获取

```
电影.hs:9:3:
    约束中的模糊类型变量“a0”：
      (Show a0) 使用 `print' 引起的
    ...
```

的类型`print`是

```
前奏> :t 打印
打印::显示a => a -> IO ()
```

换句话说，`print`接受一个参数，该参数非正式地知道如何显示自己（即，将其内容转换为字符串）并创建一个 I/O 操作，该操作在执行时输出该字符串。这或多或少是您期望`print`的工作方式：

```
前奏>打印3
3
前奏>打印“嗨”
“你好”
```

我们知道我们想要从文件中`print`获取`Film`数据，但是，虽然很好，但 ghc 无法读懂我们的想法。但是在添加了类型提示之后

```
readFilms :: FilePath -> Film
readFilms = undefined 
```

我们得到一个新的错误。

```
电影.hs:8:12:
    无法匹配预期类型“IO t0”
                具有实际类型 `(String, String, Int, [Rating])'
    预期类型：IO t0
      实际类型：电影
    在“readFilms”调用的返回类型中
    在“do”表达式中：电影 <- readFilms "ratings.dat"
```

该错误告诉您编译器对您的故事感到困惑。你说`readFilms`应该给它一个`Film`，但是你调用它的方式`main`，计算机应该首先执行一些 I/O，*然后*返回`Film`数据。

在 Haskell 中，这是*纯*字符串（比如`"JamieB"`）和副作用（比如在提示您输入 Stack Overflow 用户名后从键盘读取输入）之间的区别。

所以现在我们知道我们可以画`readFilms`成

```
readFilms :: FilePath -> IO Film
readFilms = undefined 
```

并且代码编译！（但我们还不能运行它。）

要深入挖掘另一层，假设单个电影的名称是其中唯一的数据，`ratings.dat`并在其他任何地方放置占位符以保持类型检查器满意。

```
readFilms :: FilePath -> IO Film
readFilms path = do
  alldata <- readFile path
  return (alldata, "", 0, []) 
```

这个版本可以编译，你甚至可以通过`main`在 ghci 提示符下输入来运行它。

在[dave4420 的回答](https://stackoverflow.com/a/10175462/123109)中，有关于其他要使用的功能的很好的提示。把上面的方法想象成一个拼图游戏，其中各个部分都是函数。为了使您的程序正确，所有类型都必须组合在一起。您可以通过采取上述小步骤来朝着最终的工作程序取得进展，如果您的草图中有错误，类型检查器会通知您。

要弄清楚的事情：

*   如何将整个输入块转换为单独的行？
*   您如何确定您的程序正在检查的行是否是头衔、导演等？
*   您如何将文件 (a `String`) 中的年份转换为 an`Int`以配合您的定义`Film`？
*   你如何跳过空白或空行？
*   你如何使`readFilms`累积并返回`Film`数据列表？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T13:53:00.970

这是作业吗？

您可能会发现这些功能很有用：

*   [`readFile :: FilePath -> IO String`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:readFile)
*   [`lines :: String -> [String]`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:lines)
*   [`break :: (a -> Bool) -> [a] -> ([a], [a])`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:break)
*   [`dropWhile :: (a -> Bool) -> [a] -> [a]`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:dropWhile)
*   [`null :: [a] -> Bool`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:null)
*   [`read :: Read a => String -> a`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:read)

请记住，`String`与 相同`[Char]`。

一些线索：

*   `dropWhile null`将摆脱列表开头的空行
*   `break null`将列表拆分为非空行的前导运行，以及列表的其余部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:18:45.120

Haskell 有一种很好的方法来使用类型来找到正确的函数。例如：在 Gregs 的回答中，他希望您弄清楚（除其他外）如何将电影的年份从 String 转换为 Int。好吧，你需要一个函数。该函数的类型应该是什么？它接受一个字符串并返回一个 Int，所以类型应该是`String -> Int`. 一旦你有了它，去[Hoogle](http://www.haskell.org/hoogle/)并输入那个类型。这将为您提供具有相似类型的函数列表。你需要的函数实际上有一个稍微不同的类型——`Read a => String -> a`所以它在列表的下方，但猜测一个类型然后扫描结果列表通常是一个非常有用的策略。

# gwt - GWT 从 2.1 升级到 2.4

> ID：10175254
> 
> 赞同：1
> 
> 时间：2012-04-16T13:40:31.077
> 
> 标签：gwt

从 GWT 2.1 编译到 2.4 时，显示以下错误：

找到接口 com.google.gwt.core.ext.typeinfo.JClassType，但预期类

所以请为我提供这个问题的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:53:20.180

GWT 2.2 中存在二进制向后不兼容（其中`com.google.gwt.core.ext.typeinfo.JClassType`等人从类更改为接口）。您必须使用针对 GWT 2.2 SDK 或更新版本编译的第三方依赖项进行更新；对于您自己的库，或者如果第三方库已被*遗弃*，您将不得不重新编译它（`javac`）。

[例如， GIN](http://code.google.com/p/google-gin/)提供了 2 个版本的 1.5 版本：一个与 GWT 2.1.1 及更早版本兼容，一个与 2.2 及更高版本兼容（`gwt-1.5.zip`下载中有两个不同的 JAR）。

# modelattribute - @ModelAttribute 的替代品

> ID：10175255
> 
> 赞同：1
> 
> 时间：2012-04-16T13:40:34.003
> 
> 标签：modelattribute

我正在为我的 Web 应用程序使用 spring mvc。

我想要替代@ModelAttribute。

我通过填写表单详细信息在jsp文件中设置模型对象，现在在控制器中我通过使用@ModelAttribute方法参数来获取它，如下所述。

```
@RequestMapping(value = "/requestPattern")
public ModelAndView methodName(
        @ModelAttribute FormDetail formDetail,BindingResult result,
        HttpSession session) {
// I want formDetail object without using @ModelAttribute as a method argument.
} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:48:35.783

至少在 Spring 3.X 中，您应该能够省略 @ModelAttribute 并且仍然填充您的 FormDetail 对象。我的申请就是这种情况。你可以在这里看到一些细节：

[从视图中省略 ModelAttribute](https://stackoverflow.com/questions/12117637/spring-mvc-omit-modelattribute-from-view)

# c++ - 枚举到字符串：如果无效/未找到，则返回枚举整数值

> ID：10175260
> 
> 赞同：2
> 
> 时间：2012-04-16T13:41:16.283
> 
> 标签：c++, string, debugging, map, enums

因此，我`enumToString`为我经常使用的几个枚举实现了一个函数（在 SO 中经常被问到：[Is there a simple way to convert C++ enum to string?，](https://stackoverflow.com/questions/201593/is-there-a-simple-script-to-convert-c-enum-to-string)[在 C 中使用枚举类型的变量作为字符串的简单方法？](https://stackoverflow.com/questions/147267/easy-way-to-use-variables-of-enum-types-as-string-in-c#202511)，... ）。这使得错误消息更容易调试，但我必须维护函数以添加有时没有字符串描述的值。

我的代码如下所示：

```
typedef std::map<my_enum_e, const char *> enum_map_t;
static bool s_enum_map_initialized = false;

static enum_map_t s_enum_strings;

static void s_init_maps()
{
#define ADD_ENUM( X ) s_enum_strings[X] = #X;

    if( s_enum_strings.size() == 0)
    {
        ADD_CLASS( MY_ENUM_1 );
        ADD_CLASS( MY_ENUM_2 );
        /* ... all enums */
    }
    s_enum_map_initialized = true;
}

const char *Tools::enumCString( my_enum_e e )
{
    if( ! s_enum_map_initialized )
    {
        s_init_maps();
    }

    // todo: use the iterator instead of searching twice
    if( s_enum_strings.find(e) != s_enum_strings.end() )
    {
        return s_class_strings[e];
    }

    return "(unknown enum_e)";
} 
```

现在，我想要的是，当我在地图中*找不到*枚举时，返回`"(unknown enum %d)", e`. 这会给我我错过的枚举的价值。

这样，即使我没有将它添加到地图中，我仍然有它的价值，我可以调试我的程序。

我找不到简单的方法：在堆栈上实例化的字符串流将在返回后立即被销毁，**静态**字符串流不是线程安全的，...

**编辑**：当然，使用 a`std::string`作为返回类型可以让我对其进行格式化，但我在代码中经常调用这些函数，我认为传递`const char *`指针更快，因为我不必将 std::string 推到每次堆栈。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:43:56.780

返回 a`std::string`而不是 a `char*`。

这将允许您使用 a`std::stringstream`来生成您的消息。然后调用站点只需要使用`.c_str( )`成员函数`std::string`来获取 C 样式指针（如果需要）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T16:17:27.043

就个人而言，我使用 BOOST :)

使用示例：

```
SANDBOX_DEFINE_ENUM(MyEnum, (Foo)(Bar)(Team)) 
```

将产生：

```
struct MyEnum {
  enum Type {
    Foo,
    Bar,
    Team
  };
  static Type const First = Foo;
  static Type const Last = Team;
};

inline char const* toString(MyEnum::Type value) {
  switch(value) {
  case MyEnum::Foo: return "Foo";
  case MyEnum::Bar: return "Bar";
  case MyEnum::Team: return "Team";
  }
  return 0;
} 
```

代码：

```
#include <boost/preprocessor/cat.hpp>
#include <boost/preprocessor/stringize.hpp>

#include <boost/preprocessor/seq/enum.hpp>
#include <boost/preprocessor/seq/for_each.hpp>
#include <boost/preprocessor/seq/reverse.hpp>
#include <boost/preprocessor/seq/seq.hpp>

#define SANDBOX_DEFINE_ENUM(Name_, Values_)                                     \
  SANDBOX_DEFINE_ENUM_TYPE(Name_, Values_)                                      \
  SANDBOX_DEFINE_ENUM_STRING(Name_, Values_)

#define SANDBOX_DEFINE_ENUM_TYPE(Name_, Values_)                                \
  struct Name_ {                                                                \
    enum Type {                                                                 \
      BOOST_PP_SEQ_ENUM(Values_)                                                \
    };                                                                          \
    static Type const First = BOOST_PP_SEQ_HEAD(Values_);                       \
    static Type const Last = BOOST_PP_SEQ_HEAD(BOOST_PP_SEQ_REVERSE(Values_));  \
  };

#define SANDBOX_DEFINE_ENUM_STRING(Name_, Values_)                              \
  inline char const* toString(Name_::Type value) {                              \
    switch(value) {                                                             \
      BOOST_PP_SEQ_FOR_EACH(SANDBOX_DEFINE_ENUM_TO_STRING_C, Name_, Values_)    \
    }                                                                           \
    return 0;                                              \
  }

#define SANDBOX_DEFINE_ENUM_TO_STRING_C(r, Name_, Elem_)                        \
  case Name_::Elem_: return BOOST_PP_STRINGIZE(Elem_); 
```

显然，它只适用于“常规”枚举，而不适用于定制的枚举。但是因为它是在代码中的一个地方定义的......没有维护惩罚:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:55:16.957

在这种情况下，我不会返回值。我会抛出一个异常并让您的消息包含您的无效枚举数的值。对我来说，无效的枚举器值似乎是一个错误。

如果您不想这样做，那么我同意其他人的观点，即您应该返回 std::string 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T13:44:43.597

尝试定义线程局部静态变量[http://gcc.gnu.org/onlinedocs/gcc-3.3.1/gcc/Thread-Local.html](http://gcc.gnu.org/onlinedocs/gcc-3.3.1/gcc/Thread-Local.html)

# php - 正则表达式捕获组流入第二个匹配集

> ID：10175262
> 
> 赞同：1
> 
> 时间：2012-04-16T13:41:20.040
> 
> 标签：php, regex, preg-match

我正在尝试在同一个正则表达式中匹配多个输入以捕获以下数字。
如果输入与第一组不匹配，那么我会遇到问题，因为所有先前的捕获组仍然被捕获，尽管它与它们的组不匹配。我相信我需要使用`lookaround`断言，但我不熟悉这些。

样本输入：

```
wordA 123456
wordA: 123456
wordA : 123456
wordA R123465
wordA: R123456
wordA : R123456
wordB R123465 
```

WordA 既有可选的`:`，也有`R`. 到目前为止，我有这个：`/(?:wordA :?R?(\d+)|wordB R(\d+))/i`。
使用最后一个样本输入提供了以下结果：

```
array
  0 => string 'wordB R123456' (length=13)
  1 => string '' (length=0)
  2 => string '123456' (length=6) 
```

想要的结果是：

```
array
  0 => string 'wordB R123465' (length=13)
  1 => string '123456' (length=6) 
```

任何想法如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:50:52.570

问题是你的交替

```
/(?:wordA :?R?(\d+)|wordB R(\d+))/i
              ^^^^^        ^^^^^
             Group 1       Group 2 
```

因此，如果您的正则表达式与第二个选项匹配，则结果将在第 2 组 ( `array[2]`) 中，而第一组将为空。

改成这个

```
(?:wordA :?R?|wordB R)(\d+) 
```

[在 Regexr 上](http://regexr.com?30lgs)查看

那么你的号码将永远在第一组（因为只有一个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:54:08.347

您正在定义两个捕获组，因此您将得到两个。正则表达式实现并不关心一次是否只有其中一个可以匹配。你可以重写你的表达式

```
/(?:wordA :?R?|wordB R)(\d+)/i 
```

以避免定义两个捕获组。请注意，这`:?R?`不足以将您的测试用例与`_:_`or匹配`:_`。要获得这些，您可以使用

```
/(?:wordA ?:? R?|wordB R)(\d+)/i 
```

# c# - 获取查询字符串上的日期时间

> ID：10175263
> 
> 赞同：0
> 
> 时间：2012-04-16T13:41:26.117
> 
> 标签：c#, datetime, query-string

我的查询字符串中有 2 个变量：

```
&Start=Mon Apr 02 2012 00:00:00 GMT+0200&End=Thu Apr 26 2012 00:00:00 GMT+0200 
```

当我试图得到它

像这样：

```
DateTime EndDate = Convert.ToDateTime(Request.QueryString["End"]); 
```

或这个：

```
DateTime date = DateTime.ParseExact(Request.QueryString["Start"], "dd/MM/yyyy", System.Globalization.CultureInfo.CurrentUICulture.DateTimeFormat); 
```

我收到消息：该字符串未被识别为有效的日期时间。

任何人都可以帮助我吗？

PS：我使用 devexpress 组件

```
 <dx:ASPxDateEdit ID="ASPxDateEdit_Synthe_Fin" runat="server" Width="100px" ClientInstanceName="ASPxDateEdit_Synthe_Fin">
                                                 </dx:ASPxDateEdit>

  <dx:ASPxButton ID="ASPxButton_Synthese" runat="server" Text="Synthese" AutoPostBack="False">
                             <ClientSideEvents Click="function (s, e) { e.processOnServer = false; window.open('Report/Syntehse.aspx?CientID='+ASPxComboBox_Client.GetValue()+'&Start='+ASPxDateEdit_Synth_Deb.GetValue()+'&End='+ASPxDateEdit_Synthe_Fin.GetValue());}" />
                        </dx:ASPxButton> 
```

![在此处输入图像描述](../Images/2074de3526545f90f363e979a455eee3.png) ![在此处输入图像描述](../Images/a527eb83eba4958477b9d2779925fa2c.png)

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:45:22.670

你为什么写作`"dd/MM/yyyy"`？它不是 QS 中的格式...

它应该是这样的：

```
ddd MMM  dd yyyy HH:mm:ss 
```

--->2012 年 4 月 2 日星期一 00:00:00 GMT+0200

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:46:41.993

`Convert`如您所见，将尝试不同的格式，但可能会失败。

使用时`ParseExact`或`TryParseExact`您需要传入与您尝试解析的字符串*直接对应的格式字符串。*

你有`dd/MM/yyyy`用于`Mon Apr 02 2012 00:00:00 GMT+0200`. 这些不相互对应。

请尝试`ddd MMM dd yyyy HH:mm:ss G\MTK`：

```
DateTime.ParseExact("Mon Apr 02 2012 00:00:00 GMT+0200", 
                    "ddd MMM dd yyyy HH:mm:ss G\\MTK",
                    CultureInfo.InvariantCulture) 
```

* * *

更新：

另一个问题是 URL 参数未经过 URL 编码，因此：

```
&Start=Mon Apr 02 2012 00:00:00 GMT+0200&End=Thu Apr 26 2012 00:00:00 GMT+0200 
```

最终`+`字符在服务器端被视为空格（因为`+`也在 URL 上编码了空格）。

您需要先对日期/时间值进行 URL 编码，然后再将它们放在 URL 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:02:55.343

DateTime.ParseExact(date, "ddd MMM dd yyyy HH:mm:ss \"GMT\"zzz", System.Globalization.CultureInfo.InvariantCulture) 适用于查询字符串中指定的格式。

# jquery - 从 jQuery SVG 发送文本/表单？可能的？

> ID：10175267
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:41:37.590
> 
> 标签：jquery, html, webforms, svg, html5-canvas

我有一个 jQuery SVG 网络应用程序。在此应用程序中，我想获取文本（在文本框中，例如向网站发送评论）并将其发送到我的 php 应用程序。

问题是如何通过 jQuery SVG 发送数据？它是像 HTML 这样的表单吗？怎么走呢？

谢谢！

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T22:57:28.313

为了创建这种效果，您将不得不访问 DOM 节点并解析数据。

假设您有一个 svg 文本元素：

```
 <text id="comment-box-1" fill="#000000" stroke="#000000" font-size="12" x="0" y="0">This is a comment</text> 
```

您可以像这样简单地获取数据：

```
 var comment_1 = document.getElementById('comment-box-1').textContent; 
```

然后，您可以以任何您认为合适的方式将此数据（comment_1）提交到您的 php 应用程序。

# java - 使用 NamedNativeQuery 时出现休眠“列名无效”错误

> ID：10175268
> 
> 赞同：0
> 
> 时间：2012-04-16T13:41:38.903
> 
> 标签：java, oracle, hibernate, named-query

我最近更改了一个对象以`@OneToMany`映射到另一个对象，使用`FetchType.LAZY`. 但是，当我尝试使用`@NamedNativeQuery`调用 Oracle 函数的 a 加载这些对象的列表时，它会`java.sql.SQLException: Invalid column name`为这个新的 OneToMany 映射抛出 a 。但是被标记为`LAZY`，它不应该尝试填充这个变量吗？

理论上，我可以更改函数以为此列返回一个空值（基本上是 hack），但我必须将其推广到使用 a`@NamedNativeQuery`填充这些对象之一的任何地方。

这对我来说似乎是一个错误。是否有解决方法，我在 Hibernate 的更高版本中缺少或可能修复了某些东西？

我正在使用 hibernate-core 3.3.2.GA、hibernate-entitymanager 3.4.0.GA、hibernate-annotations 3.4.0.GA 和 hibernate-commons-annotations 3.3.0.ga。

# c# - 更改文件夹的权限

> ID：10175270
> 
> 赞同：4
> 
> 时间：2012-04-16T13:41:42.483
> 
> 标签：c#, file-permissions, permission-denied

我想将一些文件夹权限（设置为只读）更改为 ReadWriteExecute！

我写了这段代码，但是文件夹权限仍然是只读的：

```
private void ChangePermissions(string folder)
{
    string userName = Environment.UserName;

    FileSystemAccessRule accessRule = new FileSystemAccessRule(userName, FileSystemRights.FullControl, InheritanceFlags.ContainerInherit 
                | InheritanceFlags.ObjectInherit, PropagationFlags.None, AccessControlType.Allow);

    DirectoryInfo directoryInfo = new DirectoryInfo(folder);
    DirectorySecurity directorySec = directoryInfo.GetAccessControl();

    directorySec.AddAccessRule(accessRule);
    directoryInfo.SetAccessControl(directorySec);
} 
```

如果我想删除此目录，`Directory.Delete(folder, true)`我会收到以下错误消息：

> “访问路径‘条目’被拒绝。”

当然，权限仍然是只读的！

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:48:40.120

你可以尝试这样的事情：

```
var dirInfo = new DirectoryInfo(folder);
dirInfo.Attributes &= ~FileAttributes.ReadOnly; 
```

这使用按位逻辑 AND 运算符[(&=)](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2013/e669ax02(v%3dvs.120))将逆向附加到现有 Attributes 属性`FileAttributes.ReadOnly`（因为`~`是按位 NOT）。

# c# - 如何停止浏览器后退按钮显示我离开的页面

> ID：10175273
> 
> 赞同：0
> 
> 时间：2012-04-16T13:41:49.400
> 
> 标签：c#, asp.net-mvc-2

我正在使用 MVC2 和 VS2010。我们创建了一个 Web 应用程序，但希望在页面离开后停止任何浏览器重新访问页面。我们希望这样做，以便使用公共计算机然后离开的人可以感到安全。我们不希望出现以下用户只需使用后退按钮即可查看首次使用页面的情况。我试过 [OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")] 这似乎工作正常，我得到一个网页过期。但是如果我再次按下浏览器的返回按钮，页面就会显示出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T22:32:48.833

我自己也有类似的情况，想防止浏览器返回，并研究了一些不同的解决方案。第一个也是最糟糕的是一个 Java 脚本函数，如果用户单击浏览器中的后退按钮，它会将用户带回到他们所在的页面。它隐藏了问题而不是解决它，但我认为我提到了它。代码如下：

```
<script type="text/javascript" language="javascript">
        function disableBackButton() {
            window.history.forward()
        }
        disableBackButton();
        window.onload = disableBackButton();
        window.onpageshow = function (evt) { if (evt.persisted) disableBackButton() }
        window.onunload = function () { void (0) };
    </script> 
```

这适用于 Firefox、Chrome 和 IE 好的。你可以把它放在你的母版页中。许多人会告诉你这不是做事的方式，但是因为它侵入了众所周知的浏览器行为等

所以我的第二个建议是我在这里看到的： [禁用整个 ASP.NET 网站的浏览器缓存，](https://stackoverflow.com/questions/1160105/asp-net-mvc-disable-browser-cache/1705113#1705113) 它不会缓存任何与我认为更符合您想要的内容的内容。

另一个想法是传递一个页面或会话令牌，并在操作上检查令牌 - 如果它无效重新路由到错误页面。这至少可以防止新用户对前一页进行任何操作。

如果你已经解决了，我很想知道你是如何解决这个问题的。

# html - 资源管理器代码有效，但 Firefox 和 Chrome 代码无效

> ID：10175277
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:42:10.640
> 
> 标签：html, google-chrome, firefox, bookmarks

> **可能重复：**
> [从 javascript 添加到浏览器收藏夹/书签，但适用于所有浏览器（我的在 CHROME 中不起作用）？](https://stackoverflow.com/questions/992844/add-to-browser-favorites-bookmarks-from-javascript-but-for-all-browsers-mine-do)

我有这段代码可以在我的网站上为我的网站添加书签，它在资源管理器中运行良好，但是在 Google Chrome 和 Firefox 中，它不起作用。

```
<p><b>
    <font style="font-family: verdana, sans-serif" size="1" face="verdana, sans-serif">
        <a href="javascript:window.external.AddFavorite('http://yourphotomovie.com','Photo Montage Site')" style="font-size: 2.5mm; font-family: Arial; color: #333333; font-    weight: bold" />
            <img border="0" src="http://yourphotomovie.com/Images/BookmarkUs.jpg" width="115"      height="18">
        </a>
    </font>
</b></p> 
```

关于如何使它工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:56:05.517

这样的事情应该做的工作：

```
<script type="text/javascript">
function addToBookmark() {
  // Firefox
  if (window.sidebar) {
      window.sidebar.addPanel(location.href,document.title,"");
  } 
  // IE 
  else if(window.external) {
      window.external.AddFavorite(location.href,document.title); 
  }
  // Opera
  else if(window.opera && window.print) {
      this.title=document.title;
      return true;
  }
}
</script>

#HTML:
<a href="#" onclick="addToBookmark();return false;">Add to bookmarks</a> 
```

我不记得这是否适用于 Safari，但希望有 Safari 的人能告诉我 :)

PS 由于安全限制，此代码不包括 Chrome。在 chrome 中，您应该简单地建议用户按 CTRL+D。

# unix - 有没有办法为 Z-shell 中的不同计算机定义不同路径的公共别名？

> ID：10175279
> 
> 赞同：0
> 
> 时间：2012-04-16T13:42:14.800
> 
> 标签：unix, zsh

我有一个 Z-shell 配置，可在多台服务器和我的个人计算机上使用。在我的个人计算机上，我有一个我们将调用的可执行文件的别名`foo`。这是我的 zshrc 中该程序的别名：

`alias foo=/path/to/foo`

在几台服务器上，路径`foo`不同，我无法将其移动到公共目录，例如`~/bin`：

`alias foo=/sever/path/to/foo`

我需要别名在所有机器上都是 foo，所以我不能创建两个单独的别名，例如 foo 和 foo-server。有没有办法让 Z-shell 检测我在哪台机器上并自动将别名更改为 foo？天真地，像：

如果在个人计算机上：
`alias foo=/path/to/foo`
否则：
`alias foo=/sever/path/to/foo`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:07:01.463

对于遇到此问题的其他任何人，我能找到的最佳解决方案是：

```
#{{{ Alias foo if it is in a specific location
if [[ -x ="/path/to/foo" ]]; then
    alias foo='/path/to/foo'
fi

#}}} 
```

感谢 larsmans 建议`-x`国旗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:01:32.217

你不应该使用任何 zsh 特定的东西。您可以使用主机名（或域名或使用 zsh 设置的变量主机名）并检查是否在您的 PC 或服务器上。然后分支。如果文件 /path/to/foo 存在但不是正确的文件，这可以避免产生的问题，这是 larsmans 的答案创建的。

# ruby-on-rails - 是否可以从linkedin rails获取登录用户电子邮件ID？

> ID：10175287
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:42:44.933
> 
> 标签：ruby-on-rails, linkedin

我正在使用以下 gem 连接并从linkedin 获取详细信息

gem 'linkedin', :git => "git://github.com/pengwynn/linkedin.git"

是否可以获得经过身份验证的用户的电子邮件 ID 或他/她登录的 ID..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:02:05.510

目前无法通过 API 获取 LinkedIn 用户的电子邮件地址。

-杰里米

# jpa-2.0 - 打开 JPA 如何从外键关系中获取结果

> ID：10175288
> 
> 赞同：0
> 
> 时间：2012-04-16T13:42:45.113
> 
> 标签：jpa-2.0, named-query

早上好。我一直在寻找试图回答这个问题的方法。

如果您的表具有指向另一个表的外键，并且您想要两个表的结果，则使用基本 sql 您将对外键进行内部联接，您将获得您请求的所有结果信息。当您在外键上生成 JPA 实体时，您会在外键列上获得 @oneToone 注释、@oneToMany、@ManyToMany、@ManyToOne 等。我在外键上有@oneToMany，在相关表列的主键上有相应的@ManyToOne 我还在正确的列上有@joinedON 注释...我还有一个基本的命名查询，它将从第一个中选择所有内容桌子。我是否需要像在基本 sql 中那样从两个表中获取信息？或者我有这些注释的事实会为我拉回这些记录吗？要清楚，如果我有基于外键关系与表 B 相关的表 A，并且我想要两个表中的记录，我将根据外键将表 A 连接到 B 或

```
Select * From A inner Join B on A.column2 = B.column1 
```

或其他一些诸如此类的废话（请原谅我的sql，如果它不完全正确，但您明白了）...该查询将选择A和B中的所有列，其中这两个选择的列...这是我的我正在使用的命名查询....

```
@NamedQuery(name="getQuickLaunch", query = "SELECT q FROM QuickLaunch q") 
```

这就是我在我的无状态会话 bean 中调用它的方式......

```
try
    {
        System.out.println("testing 1..2..3");
        listQL = emf.createNamedQuery("getQuickLaunch").getResultList();
        System.out.println("What is the size of this list: number "+listQL.size());
        qLaunchArr = listQL.toArray(new QuickLaunch[listQL.size()]);            

    } 
```

现在该调用返回表 A 的所有列，但缺少表 B 的列。我的第一反应是更改查询以连接两个表......但这让我想到使用的意义何在JPA 那么如果我只是在写同样的查询，无论如何我都会写，只是在不同的地方。另外，我不想忽略一些简单的事情。那么你说堆栈溢出爱好者呢？如何使用 JPA 取回连接查询的所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:00:26.497

假设您有一个 Person 实体，它与 Contact 实体具有 OneToMany 关联。

当您从 entityManager 获取 Person 时，对其联系人集合调用任何方法都会延迟加载该人的联系人列表：

```
person.getContacts().size();
// triggers a query select * from contact c where c.personId = ? 
```

如果要使用单个查询来加载人员及其所有联系人，则需要`fetch`在 SQL 查询中使用：

```
select p from Person p 
left join fetch p.contacts
where ... 
```

您还可以使用 将关联本身标记为预加载，`@OneToMany(lazy = false)`但是每次加载一个人（vie`em.find()`或任何查询）时，它的联系人也将被加载。

# google-maps - 谷歌地图标记未显示在 Internet Explorer 上

> ID：10175289
> 
> 赞同：2
> 
> 时间：2012-04-16T13:42:45.197
> 
> 标签：google-maps

我有一个谷歌地图，它在上面添加了多个标记，并且 InfoWindow 中包含一些自定义 html。（[这里是一个活生生的例子](http://www.lakecoeurdalene.com/on-the-water/marinas/)）

地图及其标记在除 Internet Explorer 之外的所有浏览器中都能正常显示。标记从不显示。然而，有趣的是，如果我按 F12，进入开发者模式试图弄清楚发生了什么，标记显示得很好。然后我退出开发者模式，它仍然显示得很好。

有没有其他人遇到过类似的情况？我不知道如何使标记第一次显示。（我尝试在添加标记之前添加超时以使地图有时间加载，但这不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:45:53.237

简单的答案，不直观。`console.log`在文件中注释掉`/static//places/js/google_maps.js`。我在 IE 9 中测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-08T14:45:59.417

就我而言，问题是在 IE 中找不到创建标记的链接：

```
new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|"); 
```

我为此更改了该链接，并找到了它！

```
new google.maps.MarkerImage("http://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|"); 
```

请注意基本 URL 的差异。

# .net - 如何将两列 .csv 文件转换为 xml 文档

> ID：10175290
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:42:45.993
> 
> 标签：.net, xml, csv

是否可以将 .csv 文件转换为 .xml doc 文件？如果有可能，任何人都可以帮助我，请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:50:17.910

尝试这样的事情：

```
public static void ConvertCSVToXML()
{
      String[] FileContent = File.ReadAllLines(@"G:\TEMP\test.csv");

      XElement xElm = new XElement("RootNodeName",
                          from items in FileContent
                          let fields = items.Split(',')
                          select new XElement("Item",
                             new XElement("ID", fields[0]),
                             new XElement("Name", fields[1]))
                          );

      XDocument xDoc = new XDocument(new XDeclaration("1.0", "utf-8", "yes"), xElm);
      xDoc.Save(@"G:\Temp\test.xml");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:31:34.713

为此，您首先需要将 .csv 文件读入数据表，然后从数据表中写入 xml 文件。根据您的要求使用以下代码

```
public void CreateXmlFile()
{
    DataSet dataset = GetDataSet(@"D:\my_data.csv");
    dataset.Tables[0].WriteXml(@"D:\my_data.xml", true);

}
public DataSet GetDataSet(string filename)
{
    string connString =
      string.Format(
        "Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=Text;",
        Path.GetDirectoryName(filename));

    string cmdString =
      string.Format("SELECT * FROM {0}", Path.GetFileName(filename));

    DataSet dataset = new DataSet();
    using (OleDbConnection conn = new OleDbConnection(connString))
    {
        conn.Open();

        OleDbDataAdapter adapter = new OleDbDataAdapter();
        adapter.SelectCommand = new OleDbCommand(cmdString, conn);
        adapter.Fill(dataset, "Test");

        conn.Close();
    }
    return dataset;
} 
```

希望这会帮助你......快乐的编码......

# jquery - jTemplates 在 ie8 中不起作用

> ID：10175291
> 
> 赞同：1
> 
> 时间：2012-04-16T13:42:51.097
> 
> 标签：jquery, jtemplates

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>xxxxxxxx</title>
<style>
<!-- 
*{ word-wrap:break-word; outline:none; }
-->   
</style>
<script language="JavaScript" type="text/javascript" src="/admin/js/jquery-1.7.2.min.js"></script>
<script language="JavaScript" type="text/javascript" src="/admin/js/jquery-jtemplates.js"></script>
<script type="text/javascript">
(function($) 
{ 
        var queryrole = function()
        {
            var data= [{"test":"qianyu01"}];
            $("#roleidlist").setTemplateElement("roleidlist-templates").processTemplate(data); 
        }

    $(function(){
            $('#queryrole_btn').click(queryrole);
    });
})(jQuery);             
</script>

</head>
<body>
<div>
    <input type="button" id='queryrole_btn' value="QUERY" />
    <br>
    <div>
      <p style="display:none"><textarea id="roleidlist-templates" rows="0" cols="0">
      <!--
        {#foreach $T as record}
            <td>{$T.record.test}</td>
        {#/for}
  -->
    </textarea>
  </p>
    <div id="roleidlist">
</div>
</div>
</body>
</html> 
```

它在firefox中运行良好，但在ie下无法运行。请帮忙！3x。ei....系统告诉我关于代码的内容不够多。但真的没什么好说的。我认为代码很清楚。似乎 jtemplates 中有一些错误，并触发了错误。我对javascript没有太多经验，所以无法解决这个问题。请帮助！

经过更多尝试。我删除了这一行：

```
<style>
<!-- 
*{ word-wrap:break-word; outline:none; }
-->   
</style> 
```

它有效！不知道为什么。

# cocoa - 在segue之后重新加载tableview

> ID：10175294
> 
> 赞同：0
> 
> 时间：2012-04-16T13:43:04.303
> 
> 标签：cocoa, viewcontroller

我有一系列“向下钻取”到最终视图控制器的表视图。用户填写了几个文本字段后，它会推送到另一个文本字段，这是一个祝贺屏幕！我知道了不起。我放了一个“主页”按钮（因为它是一个故事板），然后推到第一个屏幕。不幸的是，该表现在没有填充。我是否必须在 prepareForSegue 方法中实现一些代码，例如 [重新加载数据]，还是有更好/正确的方法来做到这一点？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:54:38.220

大概您有一个为表提供值的数组，并且该数组在某处得到更新。没有太多其他事情要做，我会考虑保留一个 BOOL 值来记录该数组是否已更改。然后，在 viewDidAppear 中，调用 [table reloadData] 并在发生更改时重置标志。

# ajax - AJAX 图库加载

> ID：10175298
> 
> 赞同：0
> 
> 时间：2012-04-16T13:43:14.153
> 
> 标签：ajax, jquery, image-gallery

祝大家早安，

我有异步 ajax 加载的问题....

我已经完成了一个动态画廊，我想在页面加载后加载图像。

但是当我尝试淡入图像并淡出微调器时，唯一似乎完美消失的是最后一个元素..为什么？

我能做什么？谢谢！

.js 文件

```
$('.Home-Image').each(function(index) {

MyHolder = $(this).children(".Home-Image-Holder");
MyLoader = $(this).children(".Home-Image-Loader");

IDIMG = $(MyHolder).attr("AjaxRel");

$(MyHolder).load('<?PHP echo($ABS); ?>/inl/components/AjaxImageHome.php?ABS=<?PHP echo $ABS; ?>&IDIMG='+IDIMG, function()
{
    MyLoader.fadeOut(250,0,function(){MyHolder.fadeIn();}); 
}); 
```

});

html文件

```
<div class="Home-Image">    
   <div class="Home-Image-Loader"></div>
   <div class="Home-Image-Holder" AjaxRel="1"></div>
</div>

<div class="Home-Image">    
   <div class="Home-Image-Loader"></div>
   <div class="Home-Image-Holder" AjaxRel="2"></div>
</div>

<div class="Home-Image">    
   <div class="Home-Image-Loader"></div>
   <div class="Home-Image-Holder" AjaxRel="3"></div>
</div>

<div class="Home-Image">    
   <div class="Home-Image-Loader"></div>
   <div class="Home-Image-Holder" AjaxRel="4"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:48:10.000

我的猜测是，您的`.each()`函数完成循环的速度比`.load()`' 的回调函数运行得更快。

正因为如此，当 .load() 函数运行时，循环结束并且 MyHolder 和 MyLoader 等于您最后一次定义它们的时间（在最后一次 .each() 运行中）。

解决方案：

```
$('.Home-Image').each(function(index) {

MyHolder = $(this).children(".Home-Image-Holder");
MyLoader = $(this).children(".Home-Image-Loader");
load_img(MyHolder,MyLoader);

function load_img(MyHolder,MyLoader){
   IDIMG = $(MyHolder).attr("AjaxRel");
   $(MyHolder).load('<?PHP echo($ABS); ?>/inl/components/AjaxImageHome.php?ABS=<?PHP echo    $ABS; ?>&IDIMG='+IDIMG, function()
   {
       MyLoader.fadeOut(250,0,function(){MyHolder.fadeIn();}); 
   });
} 
```

这样，一旦您运行 load_img，您的两个变量就会保存在不同的范围内，并且不会在您的下一次 .each() 迭代中覆盖它们自己。

# c# - 在 c# 类库的弹出窗口中显示图像

> ID：10175301
> 
> 赞同：8
> 
> 时间：2012-04-16T13:43:21.327
> 
> 标签：c#, image, bitmap, popup, class-library

我需要在 ac# 类库创建的弹出窗口中显示位图图像。这怎么可能？

我尝试了以下方法：

```
 Bitmap img = tpv.Img();
        Graphics graphics = Graphics.FromImage(img);
        graphics.DrawImage(img, 0, 0); 
```

和

```
 Bitmap img = tpv.Img();
        PictureBox pb = new PictureBox();
        pb.Size = img.Size;
        pb.Image = img;
        pb.Show(); 
```

但是没有显示窗口。是否有可能获得一个类库来创建一个显示位图图像的弹出窗口？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T13:58:00.960

假设 WinForms，您需要将 PictureBox 添加到像 Form 一样的顶级 Window 中。如果您使用的是 WPF，则概念是相同的，除了您将在显示窗口之前将图片框添加到网格或其他东西。

```
using (Form form = new Form()) {
    Bitmap img = tpv.Img();

    form.StartPosition = FormStartPosition.CenterScreen;
    form.Size = img.Size;

    PictureBox pb = new PictureBox();
    pb.Dock = DockStyle.Fill;
    pb.Image = img;

    form.Controls.Add(pb);
    form.ShowDialog();
} 
```

请注意，在我的示例中，它会将表单显示为模态。如果您需要非模态表单调用`form.Show()`并删除该`using`块，以便您的表单不会立即处理。

但是，更好的设计模式是设计您的类库方法以将图像返回到您的 UI，并让您的主 UI 显示图像。框架 API 永远不应该像这样直接显示 UI。

# c# - 从文本文件中读取；如何确定每行包含多少个字段？

> ID：10175303
> 
> 赞同：0
> 
> 时间：2012-04-16T13:43:32.000
> 
> 标签：c#, file, deserialization

所以，我试图从一个文本文件中读取并将每一行存储到一个对象中，然后将每个单独的值（由“，”分割）存储到一个列表中。这是一个简单的例子：

**文本文件虚拟信息：**
1、书一、22、5
2、书二、10、3
3、书三、5、15

但是，例如，第 2 行有以下内容：

**文本文件虚拟信息：**
1, Book One, 22, 5
2, Book Two, 10, 3, 22.0, 5
3, Book Three, 5, 15

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:50:20.950

如果我理解正确，似乎检查**当前**holdingArray 的长度应该告诉你哪一行的值比预期的多或少。毕竟，您是用逗号分隔行。

# java - 在更新的 Android 版本（androidapi 15 rev1 到 api 15 rev2）的设备中重新构建和运行 android 程序时出错

> ID：10175304
> 
> 赞同：0
> 
> 时间：2012-04-16T13:43:41.477
> 
> 标签：java, android, eclipse, logcat, android-install-apk

**在遇到问题之前我做了以下操作：** 我在 Android SDK Manager 中运行了更新。它提供了要安装的更新列表，其中包括 SDK 平台工具、SDK 工具的修订版本。下载后我无法自动安装..所以我手动安装，因为这是很多人的问题。除了少数之外，我在工作区中的大多数应用程序都运行良好。

**实际问题** 我可以成功构建项目，也可以将其安装在设备中。但是当我点击应用程序的 UI 时，设备中出现错误，因为“..进程已意外停止。请重试”在 logcat 中我得到了下列的..

```
 04-16 19:01:30.131: I/PhoneGapLog(4042): Changing log level to DEBUG(3)
    04-16 19:01:30.131: D/DroidGap(4042): DroidGap.onCreate()
    04-16 19:01:30.141: D/DroidGap(4042): DroidGap.loadUrl(file:///android_asset/www/index.html)
    04-16 19:01:30.141: D/DroidGap(4042): DroidGap: url=file:///android_asset/www/index.html baseUrl=file:///android_asset/www/
    04-16 19:01:30.141: D/DroidGap(4042): DroidGap.init()
    04-16 19:01:30.261: D/SoftKeyboardDetect(4042): Ignore this event
    04-16 19:01:30.311: D/SoftKeyboardDetect(4042): Ignore this event
    04-16 19:01:30.351: I/ActivityThread(4042): queueIdle
    04-16 19:01:30.351: V/ActivityThread(4042): Reporting idle of ActivityRecord{4a4a9448 token=android.os.BinderProxy@4a4a8ea8 {com.ingage.pocs.phonegap/com.ingage.pocs.phonegap.PhonegapIntegrationActivity}} finished=false
    04-16 19:01:30.351: W/ActivityNative(4042): send ACTIVITY_IDLE_TRANSACTION
    04-16 19:01:32.051: D/DroidGap(4042): DroidGap.startActivityForResult(intent,-1)
    04-16 19:01:32.091: W/dalvikvm(4042): VFY: unable to resolve static method 1761: Lcom/qualcomm/QCAR/QCAR;.requiresAlpha ()Z
    04-16 19:01:32.101: W/dalvikvm(4042): VFY: unable to resolve static method 1755: Lcom/qualcomm/QCAR/QCAR;.deinit ()V
    04-16 19:01:32.111: W/dalvikvm(4042): VFY: unable to resolve static method 1757: Lcom/qualcomm/QCAR/QCAR;.onPause ()V
    04-16 19:01:32.111: W/dalvikvm(4042): VFY: unable to resolve static method 1758: Lcom/qualcomm/QCAR/QCAR;.onResume ()V
    04-16 19:01:32.191: W/dalvikvm(4042): Exception Ljava/lang/NoClassDefFoundError; thrown during Lcom/ingage/pocs/phonegap/ImageTargets;.<clinit>
    04-16 19:01:32.201: W/dalvikvm(4042): Class init failed in newInstance call (Lcom/ingage/pocs/phonegap/ImageTargets;)
    04-16 19:01:32.201: W/dalvikvm(4042): threadid=1: thread exiting with uncaught exception (group=0x400207d8)
    04-16 19:01:32.211: E/AndroidRuntime(4042): FATAL EXCEPTION: main
    04-16 19:01:32.211: E/AndroidRuntime(4042): java.lang.ExceptionInInitializerError
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at java.lang.Class.newInstanceImpl(Native Method)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at java.lang.Class.newInstance(Class.java:1429)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2583)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at android.app.ActivityThread.access$2300(ActivityThread.java:126)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at android.os.Handler.dispatchMessage(Handler.java:99)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at android.os.Looper.loop(Looper.java:123)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at android.app.ActivityThread.main(ActivityThread.java:4633)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at java.lang.reflect.Method.invokeNative(Native Method)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at java.lang.reflect.Method.invoke(Method.java:521)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at dalvik.system.NativeStart.main(Native Method)
    04-16 19:01:32.211: E/AndroidRuntime(4042): Caused by: java.lang.NoClassDefFoundError: com.qualcomm.ar.pl.CameraPreview
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at java.lang.Runtime.nativeLoad(Native Method)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at java.lang.Runtime.loadLibrary(Runtime.java:448)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at java.lang.System.loadLibrary(System.java:557)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at com.ingage.pocs.phonegap.ImageTargets.loadLibrary(ImageTargets.java:741)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at com.ingage.pocs.phonegap.ImageTargets.<clinit>(ImageTargets.java:128)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     ... 15 more
    04-16 19:01:32.211: E/AndroidRuntime(4042): Caused by: java.lang.ClassNotFoundException: com.qualcomm.ar.pl.CameraPreview in loader dalvik.system.PathClassLoader[/data/app/com.ingage.pocs.phonegap-1.apk]
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
    04-16 19:01:32.211: E/AndroidRuntime(4042):     ... 20 more 
```

请指导我。我认为某些类文件没有被识别..任何建议都可以。谢谢你们:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:56:08.867

com.qualcomm.ar.pl.CameraPreview 来自 Qualcomm 的 Vuforia 库。只需将 QCAR.jar 复制到项目的 libs 目录即可。

# excel - 从另一个 Excel 工作表中查找值

> ID：10175306
> 
> 赞同：2
> 
> 时间：2012-04-16T13:43:43.237
> 
> 标签：excel

我有一列包含 A excel 表中的值 1 1 1 2 2 2 3 3 3 4 4 4.... 而我在 B excel 表中有另一列的值为 1 2 4 ....，我想要的是从 B 读取值并查看它们是否在 A 表中，例如，如果值 2 在 B 表中，则在表 A 的新列中的 2 前面写入 true，同样在值 3 前面写入 false 或没有。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T13:47:41.713

你可以用一个简单的`VLOOKUP`——比如假设工作表B的单元格A1的内容为2，而你调用的工作表A被调用`SheetA`，你可以在B1单元格中放入如下公式：

```
 =IF(ISERROR(VLOOKUP(A1,SheetA!A:A,1,FALSE)),"",VLOOKUP(A1,SheetA!A:A,1,FALSE)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:52:24.833

您是否想要一个很酷的公式来计算每个匹配值的数量。试试这个为你的原始帖子：

```
=IF(SUMPRODUCT(--($A1 =Sheet1!$A:$A) > 0), "True", "False") 
```

这要计算值：
`=SUMPRODUCT(--($A1 =Sheet1!$A:$A))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:47:31.010

使用此处描述的方法：http: [//spreadsheetpage.com/index.php/tip/comparing_two_lists_with_conditional_formatting/](http://spreadsheetpage.com/index.php/tip/comparing_two_lists_with_conditional_formatting/)

关键公式是这样的：`=COUNTIF(OldList,D2)=0`，您可以在所描述的条件格式上下文中使用它，或者生成您在问题中提到的真/假指示符，即：

```
=IF(COUNTIF(OldList,D2)=0,FALSE,TRUE) 
```

`OldList`只是一个范围，您不需要使用*命名*范围。但是，如果您不命名范围，请确保对要搜索的范围使用绝对引用。

# php - php函数中的错误以用段落标签替换换行符

> ID：10175308
> 
> 赞同：0
> 
> 时间：2012-04-16T13:43:52.177
> 
> 标签：php, preg-replace, str-replace

我有一个 php 函数，用于将换行符转换为段落，但忽略任何已经包含在 h、ul、ol 或 li 标记中的行。这工作正常，除非字符串如下：

```
<h1>lkjhlkjkl</h1>
hgjk
<ul>
<li>hjgkghjk</li></ul>
ghjkghj 
```

渲染如下：

`<h1>lkjhlkjkl</h1><p>hgjk</p><ul><li>hjgkghjk</li></ul><p>ghjkghj</p>`

但是，如果结束 ul 标记位于单独的行上，则会呈现以下结果：

`<h1>lkjhlkjkl</h1><p>hgjk</p><ul><li>hjgkghjk</li><p></ul><p>ghjkghj</p>`

在结束 ul 之前放置 ap 标签

这是php：

```
<?php
function format_html($content)
 {
  $content = preg_replace("/<(h[1-6]|ul|ol|li)>\n/", "<$1>", $content);
  $content = preg_replace("/<\/(h[1-6]|ul|ol|li)>\n/", "</$1><p>", $content);
  $content = "<p>" . str_replace("\n", "</p><p>", $content);
  $content = preg_replace("/<p><(h[1-6]|ul|ol|li)>/", "<$1>", $content);
  return $content;
 }

function format_html_end($content)
 {
  $content = preg_replace("/<\/(h[1-6]|ul|ol|li)><\/p>/", "</$1>", $content);
  return $content;
 }

 echo format_html_end(format_html("$content</p>"));

?> 
```

任何想法如何防止这个小错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:53:32.960

这应该适用于您发布的代码示例。但是，它匹配所有标签，而不仅仅是您请求的 h、ul、ol 和 li。

```
$content = preg_replace("/\n([^<>]+)/", "<p>$1</p>", $content);
$content = str_replace("\n", "", $str);
echo $content; 
```

# configuration - HBase 的伪分布式模板在哪里？

> ID：10175313
> 
> 赞同：0
> 
> 时间：2012-04-16T13:44:15.397
> 
> 标签：configuration, hbase

[HBase 文档](http://hbase.apache.org/pseudo-distributed.html)要求我复制伪分布式建议配置文件

```
cp conf/hbase-site.xml{.pseudo-distributed.template,} 
```

但是没有这样的文件！

```
cp: cannot stat `conf/hbase-site.xml.pseudo-distributed.template': No such file or directory 
```

我在哪里可以找到那个模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:56:39.267

它不见了。您可以在 0.9 之前的软件包中找到它。查看[错误跟踪器条目](https://issues.apache.org/jira/browse/HBASE-5822)

# cpu-usage - W3wp hih cpu 使用率和不存在的网页

> ID：10175316
> 
> 赞同：0
> 
> 时间：2012-04-16T13:44:27.617
> 
> 标签：cpu-usage, w3wp

当我尝试在我们的网站上显示一个不存在的页面时，w3wp.exe 进程使用 13% 的 cpu 并保持在该级别。每增加一个不存在的页面请求，就会额外使用 13% 的 CPU。当然，在多次请求之后，总 cpu 使用率高达 95-100%，站点变得无法使用。

我终止了 w3wp.exe 进程，一切恢复正常。一段时间后，几个随机用户转到不存在的页面，cpu 再次上升到 100%。

在研究这个问题时，我偶然发现了 web.config httperrors 部分被锁定并可能导致问题的想法。我和我的托管公司技术人员尝试了这篇文章中的建议：[http](http://forums.iis.net/p/1159721/1912266.aspx) ://forums.iis.net/p/1159721/1912266.aspx 。这些建议都没有解决问题。

我查看了 IIS 中的 Worker Processe，但什么也没告诉我。

我查看了失败的请求跟踪，但这也没有帮助。

显然，我正在寻找有关如何诊断和解决此问题的任何其他建议。

谢谢，

埃德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:07:56.433

看看[这篇博文](http://blogs.iis.net/timamm/archive/2012/02/11/asp-net-and-iis-performance-troubleshooting-tools-3-key-resources.aspx)。实际上，我曾经`Jose Reyes’ ASP.NET Perfecto tool`发现 X 页面上的 Page_Init 由于 X 而变慢。不过，您只能真正使用此工具，前提是您可以获得对服务器的远程桌面访问 - 因为您需要设置性能计数器。

FREB / Failed Request Tracing (FRT) 也应该能够告诉你它挂在哪里，尽管我没有发现它像上面那样有用。（看来你也同意：p）。

此外，听起来可能很奇怪，但如果它是一个不存在的页面，我猜这些是使用自定义错误/错误页面处理的？所以页面肯定不会那么密集！无论如何，如果是这样的话，FREB/FRT 应该可以。

还有`PerfView Tool`，我没有亲自使用过，但显然很漂亮。

高温高压

# iphone - 从psd创建iphone界面

> ID：10175321
> 
> 赞同：0
> 
> 时间：2012-04-16T13:44:40.987
> 
> 标签：iphone, user-interface, psd

对于每个开发人员来说，都是为了改善用户界面体验的一天，因为应用程序的评估主要来自 ui 的谨慎程度。

所以，我浏览了网站，发现了一些 psd 从哪里开始设计我的应用程序。

我的问题是：如何将 psd 原型转换为运行良好的应用程序？

我不明白模型如何帮助开发人员构建用户界面...

有人可以让我弄清楚情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:58:19.573

好吧，我会小心区分应用程序使用的图形和实际的用户界面。当然，图形是 UI 的一部分，但 UI 远不止这些。取决于它是如何完成的，photoshop 模型可以是简单的图形，您可以将其用于您的界面，以描述应用程序如何运行的复杂“场景”。在后一种情况下，模型对 UI 设计很有用，在前一种情况下，它只是为您提供漂亮的图像供您使用（这当然很有用）。

但为了更直接地回答您的问题，大多数人都会对 photoshop 图像进行“切片”（单独的部分）并将它们导出为 .png 图像（或 .jpg）。如果 .psd 文件还没有“切片”图像，请在 Google 上查找“photoshop 图像切片”。然后，您可以将它们导入 Xcode 并将它们用作您要使用的控件的背景图像。尤其是从 iOS 5.0 开始，图像可以用于很多控件。此外，您可能需要确保使用适当的 UIEdgeInsets 调整图像大小。这将允许通过设置可以在图像内平铺的区域来调整图像大小而不会产生像素化。

# android - 在应用程序中接收 http 网络响应代码

> ID：10175323
> 
> 赞同：0
> 
> 时间：2012-04-16T13:44:47.567
> 
> 标签：android

我想在 webview/BrowserFrame/WebViewClient 中获取服务器的网络响应代码。Eailer 它在 2.3 之前工作正常，但从 3.0 /4.0 WebViewClient API(onReciveError) 无法正常工作，并且应用程序中没有可用的 http 资源响应。

每当我将 url 传递给 webview 时，我还有其他选择可以接收它。

# android - 适用于android xml的隐形按钮

> ID：10175324
> 
> 赞同：0
> 
> 时间：2012-04-16T13:44:50.487
> 
> 标签：android, button, visibility

我想将一个按钮设置为不可见，因为它前面会有一张图片来充当按钮。你们知道如何在xml中设置它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:57:36.367

也许您能做的最好的事情是直接使用 a`ImageView`而不是 a `Button`，始终`OnClickListener`在其上设置 a 以捕捉点击动作。也许您还可以添加适当的[选择器](http://developer.android.com/guide/topics/resources/drawable-resource.html)，以获得有关按下/未按下状态的视觉反馈。

# php - Symfony 2.0 添加多个条目

> ID：10175325
> 
> 赞同：0
> 
> 时间：2012-04-16T13:44:51.053
> 
> 标签：php, javascript, symfony, crud

有没有办法将 symfony 中的多个条目添加到数据库中？我使用 ORM Doctrine，例如我想创建动态表单：

```
Main form (Dish type):
  Name
  Description
  Prep time
  Variants (Variant type):
   [
       Add new variant: name (Add more, Delete)
   ] 
```

使用 javascript 支持一次添加多个变体。**现在我有默认的 CRUD 生成的对象，在Dish**和**Variant**之间有 ManyToOne 连接，因此我认为我不需要包含那段简单的代码:)

我可以创建 javascript 但如何从浏览器获取表单？有什么例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:37:09.060

您可以使用表单集合来完成。请参阅[此](http://symfony.com/doc/current/cookbook/form/form_collections.html)食谱条目。

# java - 使用 GCC 编译 java 文件时出错

> ID：10175327
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:44:53.823
> 
> 标签：java, gcc, compiler-errors

我在 Netbeans 中编写了一个小型 Java 程序。它编译并完美运行。但我还需要在 Linux 的 javac 中编译它，因为这个作业是在那里测试的。每当我尝试时，我都会收到以下编译错误消息。您对此消息有任何想法吗？

```
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../lib64/crt1.o: In function `_start':
/home/abuild/rpmbuild/BUILD/glibc-2.14.1/csu/../sysdeps/x86_64/elf/start.S:109: undefined reference to `main' 
```

我只是为导入库编写以下行

```
 import java.sql.*; 
```

我只是使用 println 除了 sql 操作。我的代码的开头如下：

```
Connection conn = null;
try{
    String username = ".....";
    String password = "....";
    String url = "jdbc:mysql://localhost:3306/.....";
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    conn = DriverManager.getConnection(url, username, password);
    System.out.println("Database connection extablished.");
}
catch(Exception e){
    System.out.println("Cannot connect to database server");
} 
```

在这部分代码之后，没什么特别的，就是普通的几行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:47:44.467

您*不需要*（重新）为 linux 编译它。是Java。生成的类文件（来自 windows）将在 Linux*和*Windows 上运行，您只需要目标主机上的 JRE 或 JDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:48:00.053

似乎该错误可能是因为您没有定义 main 方法，因此编译器找不到它。

但是，我不得不问你为什么使用 GCC？普通 JDK 在 Linux 上可用，除非您有充分的理由，否则应该是您的首选！如果 Netbeans 没有在 Linux 上编译您的应用程序，那可能是因为您没有正确设置或安装 JDK - 您可以（并且应该）使用 JDK 而不是 GCJ，后者现在基本上没有维护。

您可以通过包管理器获取它，也可以[在此处](http://www.oracle.com/technetwork/java/javase/downloads/index.html)单独下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:48:14.660

使用[javac 编译](http://docs.oracle.com/javase/1.6/docs/tooldocs/windows/javac.html)，而不是 GCC（或者[GCJ](http://gcc.gnu.org/java/)，如果你真的想要一些“GCCish”）。

# c# - 禁用 点击按钮

> ID：10175333
> 
> 赞同：2
> 
> 时间：2012-04-16T13:45:23.043
> 
> 标签：c#, asp.net, css, html

我有以下问题。我的页面上有一个 div ( `id = "outline"`)。现在我希望`visible="false`在单击按钮时对其进行设置。
问题是它在容器 div 之外。

![截屏](../Images/3cd24379c1d5e5cc5e65dad2fe6722b3.png)

我曾考虑过使用面板，然后使用面板`Panel.FindControl` 会发生什么`</div>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:48:16.383

**服务器端**

您没有提及是否要在服务器端或通过 jquery / javascript（客户端）执行此操作。

如果在服务器端将您的 div 设置为`runat="server"`并在后面的代码中将可见性设置为 false。

所以你的 HTML 变成`<div id="outline" runat="server">`了，你的按钮点击事件只有一行：

`outline.Visible=false;`

* * *

**客户端**

如果您想通过 jquery 执行此操作（您应该这样做），只需给 div 一个 id 并使用选择器：

[http://api.jquery.com/hide/](http://api.jquery.com/hide/)

`$('.target').hide();`

或者如果您不使用 jquery，则通过 javascript：

`document.getElementById('outline').style.visibility = 'hidden';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:48:40.007

使用这样的 javascript 向按钮添加 onclick：

```
document.getElementById('outline').style.visibility = "hidden" 
```

您也可以改用“display: none”：

```
document.getElementById('outline').style.display = "none" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:52:47.577

你还没有提到你想在禁用“大纲”div的同时显示容器div吗？如果是这样将它们分开然后尝试它..是简单的答案....如果你不能分开 - 将要隐藏的部分分组到单独的 div （不包括“容器” div ）然后隐藏那部分只要。

# internet-explorer - Bootstrap 中的 IE 中没有圆边

> ID：10175334
> 
> 赞同：9
> 
> 时间：2012-04-16T13:45:29.717
> 
> 标签：internet-explorer, browser, twitter-bootstrap, compatibility

按钮和徽章中的圆角边缘在 IE 8 中显示为矩形。我正在使用引导按钮和徽章。有没有办法解决这个问题。有人遇到类似问题吗？

![在此处输入图像描述](../Images/691f8d88808196ce8b12bf843a897dd7.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T15:25:35.557

没有适当的修复，IE8 及更低版本（更高版本应该支持圆角）根本不支持`border-radius`CSS3 属性，因此您在某些元素上获得矩形而不是圆角。您可以尝试的一些事情是包括一个 .HTC 脚本文件，它在旧版本的 IE 中模拟此类效果，例如[IE-CSS3](http://fetchak.com/ie-css3/)项目或（我相信更完整的）[CSS3Pie](http://css3pie.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:49:48.383

从 bootstrap Git 检查这个线程： [https ://github.com/twitter/bootstrap/issues/1467](https://github.com/twitter/bootstrap/issues/1467)

以下 CSS 选择器有效：

```
 border-radius: 0 \0/IE89; 
```

# java - 测试DatagramSockets的传输

> ID：10175336
> 
> 赞同：1
> 
> 时间：2012-04-16T13:45:36.350
> 
> 标签：java, unit-testing, sockets, datagram

我想测试我的程序，它在*发送者*和*接收者*类`DatagramSocket`之间发送数据。我应该如何测试在类之间发送数据？

 **这是我的发件人代码...

```
public class CheckIn {

    private String patientName;
    private String pTime;
    private int portnumber;

    public CheckIn(String pname, String time, int port){
        patientName = pname;
        pTime = time;
        portnumber = port;
        process();
    }

    public void process() {
        try {
            DatagramSocket is = new DatagramSocket(5800,InetAddress.getLocalHost());
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            ObjectOutputStream oos = new ObjectOutputStream(baos);
            String n = "Your "+"\n" + pTime + "\n" + patientName + " has arrived";
            oos.writeObject(n);
            byte[] buffer = baos.toByteArray();
            baos.close();
            oos.close();
            DatagramPacket packet = new DatagramPacket(buffer, buffer.length,InetAddress.getLocalHost(), portnumber);
            is.send(packet);

            System.out.println( "patient name " + patientName );
            System.out.println( "Check In");
        }
        catch (Exception e){
            System.out.println("ERROR Cashier: " + e.getMessage() );
            e.printStackTrace();
        }
    }
} 
```

这是我的接收器类...

```
class Reciever2 extends Thread {
    public Reciever2(){
        this.start();   //starts the thread
    }

    public void run(){
        try {
            DatagramSocket socket = new DatagramSocket(5700,InetAddress.getLocalHost());
            System.out.println( "Recieving" );   //prints when receiving a message

            while (true){
                byte[] data = new byte[1024];    //array of bytes
                DatagramPacket packet = new DatagramPacket(data,data.length);  
                socket.receive(packet);      //receives the packet
                ByteArrayInputStream bais = new ByteArrayInputStream(packet.getData()); 
                ObjectInputStream ois =  new ObjectInputStream(bais);
                String s = (String) ois.readObject();   //reading the data
                bais.close();   //closes input stream
                ois.close();   //closes input stream

                System.out.println(s);
                theText.setText( s);   //displays message
            }
        }
        catch (Exception e){
            System.out.println("ERROR Cook: " + e.getMessage() );
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:50:51.713

您可能需要编写一个接收器类来进行测试，或者可以访问目标服务器以便观察变化。UDP 协议几乎是一种单向协议。

本指南可能有助于了解更多信息`DatagramSockets`- 它还有一个关于编写发送者和接收者的部分。 [http://docs.oracle.com/javase/tutorial/networking/datagrams/index.html](http://docs.oracle.com/javase/tutorial/networking/datagrams/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:54:49.357

您可以使用一种称为 Mocking 的技术。请参阅[Java 的最佳模拟框架是什么？](https://stackoverflow.com/questions/22697/whats-the-best-mock-framework-for-java)了解更多信息。**

# nosql - 如何为相关但分离的实体创建 HBase 列/表

> ID：10175337
> 
> 赞同：0
> 
> 时间：2012-04-16T13:45:37.737
> 
> 标签：nosql, hbase

我在 HBase 上看到了视频教程，其中数据存储在如下表中：

`EmployeeName - Height - ProjectInfo`

`------------------------------------`

`Jdoe - 5'7" - ProjA-TeamLead, ProjB-Contributor`

当出现一些业务需求时，需要将 ProjA 的名称更改为 ProjX 会发生什么？不会有一个单独的表来存储项目信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:47:44.647

在关系数据库中，是的：您将有一个项目表，而员工表将通过外键引用它，并且只存储不可变的项目 ID（而不是名称）。然后，当您想查询它（在关系数据库中）时，您将执行如下 JOIN 操作：

```
SELECT
  employee.name,
  employee.height,
  project.name,
  employee_project_role.role_name
 FROM
   employee
   INNER JOIN employee_project_role
     ON employee_project_role.employee_id = employee.employee_id
   INNER JOIN project
     ON employee_project_role.project_id = project.project_id 
```

这不是 HBase（和其他 NoSQL 数据库）的工作方式；原因是，由于这些数据库面向非常大的数据集，并且分布在许多机器上，透明地执行像这样的复杂连接的实际算法变得更加难以以性能良好的方式实现。因此，HBase 甚至*没有*内置连接。

相反，此类系统的一般方法是将数据*非规范化*，并将内容存储在单个表中。所以在这种情况下，每个员工可能有一行，并且非规范化到该行的是员工的所有项目角色信息（可能在单独的列中 - HBase 中一行的内容实际上是一个键/值映射，所以你可以轻松地表示重复的事物，例如所有不同的角色）。

不过，您是绝对正确的：如果您更改项目名称，则意味着您需要更改为每位员工存储的数据。在这方面，关系模型更“干净”。但是，如果您要处理 PB 级的数据或数万亿行，那么关系数据库的“干净”抽象就会变得更加混乱，因为您最终不得不手动将其全部分片。像 HBase 这样的系统的重点是在设计过程中预先支付这些成本，而不仅仅是假设关系数据库会神奇地为您大规模解决此类问题。（因为它不会）。

就是说：如果您不希望拥有至少 Terabtyes 的数据（记住，那是一百万 MB），只需在关系数据库中进行。会容易很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:01:02.090

我认为通过这个演示文稿会给你一些观点：

[http://ianvarley.com/coding/HBaseSchema_HBaseCon2012.pdf](http://ianvarley.com/coding/HBaseSchema_HBaseCon2012.pdf)

对于更程序化的表示，请查看：

[http://jimbojw.com/wiki/index.php?title=Understanding_Hbase_and_BigTable](http://jimbojw.com/wiki/index.php?title=Understanding_Hbase_and_BigTable)

# c# - 在c#中处理像素级别的图像以将其解码为文本信息（如果包含）？

> ID：10175338
> 
> 赞同：0
> 
> 时间：2012-04-16T13:45:39.993
> 
> 标签：c#, image, encoding

> 如果图像包含通过计算像素数和排列方式，我们如何从图像中获取信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:51:44.803

您可以使用 .Net 中的 Bitmap 类

这是一个很好的例子：[使用 C# 和 GDI+ 第 1 部分的傻瓜图像处理 - 每像素过滤器](http://www.codeproject.com/Articles/1989/Image-Processing-for-Dummies-with-C-and-GDI-Part-1)

以下**[StackOverflow（问题：如何在 C# 中以像素级别操作图像）](https://stackoverflow.com/questions/190385/how-to-manipulate-images-at-pixel-level-in-c)**也提供了答案：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:15:10.000

您可以使用[位图 (System.Drawing)](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.bitmap)类。然后，要操作像素，请使用[GetPixel()](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.bitmap.getpixel)和[SetPixel()](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.bitmap.setpixel)方法。但是，如果您想要更快地访问像素，请阅读这篇文章：[使用 LockBits 方法访问](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)*Bob Powell*的图像数据，该方法利用指针，使用[不安全代码](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/unsafe-code-pointers/)进行编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T00:25:17.487

这是使用指针操作像素数据的示例。

```
unsafe
{
int red, blue, green;
editImage = new Bitmap("image.jpg");
editWidth = editImage.Width;
editHeight = editImage.Height;
data = editImage.LockBits(new Rectangle(0, 0, editWidth, editHeight), 
ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);
byte* dataPtr = (byte*)data.Scan0;
h = trackBar1.Value / 60.0;
D = 1 - Math.Abs((h % 2) - 1);

if (h >= 0 && h < 1)
{
    for (int i = 0; i < editHeight; i++)
    {
        offsetStride = i * data.Stride;
        for (int j = 0; j < editWidth; j++)
        {
            blue = dataPtr[(j * 3) + offsetStride];
            green = dataPtr[(j * 3) + offsetStride + 1];
            red = dataPtr[(j * 3) + offsetStride + 2];

            if (green > blue) max = green;
            else max = blue;
            if (red > max) max = red;

            if (green < blue) min = green;
            else min = blue;
            if (red < min) min = red;

            s = (max == 0) ? 0 : 1d - (1d * min / max);
            v = max / 255d;

            C = v * s;
            X = C * D;
            E = v - C;

            dataPtr[(j * 3) + offsetStride] = (byte)(min);
            dataPtr[(j * 3) + offsetStride + 1] = (byte)((X + E) * 255);
            dataPtr[(j * 3) + offsetStride + 2] = (byte)(max);
        }
    }
}
} 
```

这只是改变图像的色调。对于任何大于 100x100 像素的相当大的图像，除非性能无关紧要，否则不要费心使用 GetPixel 或 SetPixel。

# html - HTML5 有效项目范围

> ID：10175342
> 
> 赞同：2
> 
> 时间：2012-04-16T13:46:05.333
> 
> 标签：html, schema

我正在使用 schema.org 微格式标记我的内容，并且想知道 itemscope 属性。[http://schema.org/docs/gs.html](http://schema.org/docs/gs.html)上给出的例子是

```
<div itemscope itemtype="http://schema.org/Movie"> 
```

这是有效的 HTML5 吗？我认为属性需要值，比如

```
<div itemscope="itemscope" itemtype="http://schema.org/Movie"> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T14:08:52.243

这是一个[布尔属性](https://www.w3.org/TR/html5/single-page.html#boolean-attribute)，它是有效的 HTML5。

> 如果该属性存在，则其值必须是空字符串或与属性的规范名称匹配的不区分大小写的 ASCII 值，并且没有前导或尾随空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T15:25:49.677

如果您想生成有效的 XHTML5（与 HTML5 本身相反，它不需要格式正确的 XML），那么 @itemscope 将需要一个值。根据 zzzzBov 链接的布尔属性的规范，要成为有效的 XHTML 5，它将需要是空字符串或属性名称中的一个或另一个，即`<div itemscope="">`要么`<div itemscope="itemscope">`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:04:38.470

正如 zzzBov 所说，它是有效的 HTML5。

输入字段和其他类型的内容也是如此：

```
<input type="text" value="Text goes here" disabled> 
```

HTML5 将其视为 true，而不是 disabled="disabled"，因为`disabled`它存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-08T21:13:07.913

简单的答案 -`<div itemscope itemtype="http://schema.org/Movie">`是正确的。

[示例用法](http://www.w3.org/TR/microdata/#the-basic-syntax)

[规格`itemscope`](http://www.w3.org/TR/microdata/#attr-itemscope)

# macos - 从命令行打开应用程序时 LSOpenURLsWithRole 失败

> ID：10175349
> 
> 赞同：4
> 
> 时间：2012-04-16T13:46:45.297
> 
> 标签：macos

从 Application 文件夹打开 .app 时出现以下错误。

```
open /Applications/Spark.app
LSOpenURLsWithRole() failed with error -10810 for the file /Applications/Spark.app 
```

# android - 自定义列表视图中的项目需要的建议

> ID：10175352
> 
> 赞同：0
> 
> 时间：2012-04-16T13:46:55.030
> 
> 标签：android

我正在开发一个android项目，该项目包括一个具有编辑文本字段的活动，用户填写的编辑文本字段应与输入日期一起输入到自定义列表视图中，我不能决定我应该如何为每个编辑文本字段创建一个新对象以及我应该如何显示每个编辑字段的日期？，有人可以帮我解决这个问题，我非常感谢你的努力。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:25:30.823

尝试使用 ListActivity。您将只能显示以前输入的文本，无论是否包含日期 :) 您可以在文档中获得更多信息：[ListActivity](http://developer.android.com/reference/android/app/ListActivity.html) 和资源教程：[Hello ListView](http://developer.android.com/resources/tutorials/views/hello-listview.html)

不要犹豫发布一些代码：帮助会更容易:)

# android - 当用户在列表项中标记复选框时启用按钮

> ID：10175353
> 
> 赞同：0
> 
> 时间：2012-04-16T13:47:02.253
> 
> 标签：android, android-layout, layout

我正在开发一个 Android 3.1 应用程序。

我有一个`ListView`具有这种布局的项目：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <CheckBox
        android:id="@+id/itemCheckBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

这是带有**list**的活动布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="629dp" >
    </ListView>
    <Button
        android:id="@+id/downloadFormsButton"
        android:enabled="false"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:text="@string/download_forms_button" />
    <TextView
        android:id="@+id/formErrorMsg"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="10dp"
        android:textSize="16sp" >
    </TextView>
</LinearLayout> 
```

`downloadFormsButton`当用户选择一个或多个列表项的复选框时如何启用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:17:03.433

为您的复选框实现一个 onCheckedChangeListener 并管理您的适配器中的选中项目列表。每当检查状态发生更改时，检查您的检查项目列表是否为空并基于此启用/禁用您的按钮。

```
checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {
                if (isChecked)
                    checkedItems.add(itemId);
                else
                    checkedItems.remove(itemId);

                downloadFormsButton.setEnabled(checkedItems.size() > 0); //sets button enabled = true if size is greater than 0.

            }
        }); 
```

# jquery - 如何将此链接转换为 jquery.load()？

> ID：10175354
> 
> 赞同：0
> 
> 时间：2012-04-16T13:47:03.810
> 
> 标签：jquery

我需要将此`<a>`链接转换为`jquery.load()`- 怎么做？

这是链接：

```
<a href="exibelinha.asp?linha=<%= rs_linhas("linha")%>" class="whatever">
    <img src="produtos/linhas/pequeno/<%= rs_linhas("foto_inicial")%>" alt="">
    <h3><%= rs_linhas("linha")%></h3>
</a> 
```

我需要用这个 jQuery 脚本来实现它：

```
$('#exibe_galeria').click(function(e) {
    $('#galeria_oculta').show();
    $('#container').load('exibelinha.asp?xxxx'); //here i need to call the link
    e.preventDefault();
}); 
```

在我的负载中，我需要用这个字符串调用另一个页面（exibelinha.asp）`?linha=<%= rs_linhas("linha")%>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:52:17.993

只需停止链接单击事件的默认行为，然后使用您已有的代码。您可能需要在您的锚点上添加一个 id 或类，以便能够创建不会影响页面上其他链接的选择器。像这样的东西：

**HTML**

```
<a id="link_exibelinha" href="exibelinha.asp?linha=<%= rs_linhas("linha")%>" class="whatever">
... 
```

**JS**

```
$('#link_exibelinha').click(function(e) {
    e.preventDefault();
    var url = this.href;
    $('#galeria_oculta').show();
    $('#container').load(url);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:51:23.740

如果我正确理解了您的问题，那么您可以尝试以下方法。

```
$('.whatever').click(function(e){
     e.preventDefault();//This will prevent the default behavior of the link
     $('#container').load(this.href);//This will get href from anchor and will load it
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:56:32.643

```
$('.whatever').on('click', function(e){
     e.preventDefault();
     $('#container').load(this.href);
}); 
```

# c# - C# 创建和使用函数

> ID：10175357
> 
> 赞同：18
> 
> 时间：2012-04-16T13:47:12.307
> 
> 标签：c#, function

我需要 C# 编程方面的帮助；我是新手，我来自 C 背景。我有一个这样的控制台应用程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Add_Function
{
   class Program
   {
      static void Main(string[] args)
      {
         int a;
         int b;
         int c;

         Console.WriteLine("Enter value of 'a':");
         a = Convert.ToInt32(Console.ReadLine());

         Console.WriteLine("Enter value of 'b':");
         b = Convert.ToInt32(Console.ReadLine());

         //why can't I not use it this way?
         c = Add(a, b);
         Console.WriteLine("a + b = {0}", c);
      }//END   Main

      public int Add(int x, int y)
      { 
         int result = x + y;
         return result;
      }//END   Add
   }//END      Program
}//END         Add_Function 
```

它在我调用 Add() 的行上给了我这个错误：

> 非静态字段、方法或属性“Add_Function.Program.Add(int, int)”需要对象引用

任何人都可以向我解释为什么我有这个问题。这是因为 C# 的架构与 C 不同，我称它的方式是错误的吗？谢谢。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-16T14:08:03.240

*注意：在 C# 中，术语“函数”经常被术语“方法”代替。为了这个问题，没有区别，所以我只使用“函数”这个词。*

其他答案已经为您提供了*解决*问题的快速方法（只需创建`Add`一个`static`函数），但我想解释一下原因。

C# 具有与 C 完全不同的设计范式。这种范式称为**面向对象编程**(OOP)。解释 OOP 和函数式编程之间的所有差异超出了这个问题的范围，但这是适用于您的简短版本。

用 C 编写程序，您将创建一个将两个数字相加的函数，并且该函数将独立存在并且可以从任何地方调用。在 C# 中，大多数函数不是独立存在的；相反，它们存在于对象的上下文中。在您的示例代码中，只有该类的一个实例（一个对象）`Program`知道如何执行`Add`. 换句话说，您必须创建 的实例`Program`，然后要求为您`Program`执行`Add`。

人们使用`static`关键字为您提供的解决方案围绕该设计进行。使用`static`关键字有点像说，“嘿，我定义的这个函数不需要任何上下文/状态，它可以被调用。” 由于您的`Add`功能非常简单，因此这是有道理的。当您开始深入研究 OOP 时，您会发现您的函数变得更加复杂，并且依赖于了解它们的状态/上下文。

我的建议：拿起一本面向对象编程的书，准备好将你的大脑从函数式编程转向面向对象编程。你是来兜风的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-16T13:49:23.110

您应该像这样使您的`Add`功能`static`：

```
static public int Add(int x, int y)
{ 
    int result = x + y;
    return result;
 } //END   Add 
```

`static`意味着该函数不依赖于类实例。所以你可以调用它而不需要创建类的类实例`Program`。

或者你应该在你的`Program`类的实例中创建，然后调用`Add`这个实例。像这样：

```
Program prog = new Program();
prog.Add(5,10); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-16T13:49:08.813

此代码给您一个错误，因为您的`Add`功能需要`static`：

```
static public int Add(int x, int y) 
```

在 C# 中，对实例进行操作的函数（非静态）和不对实例进行操作的函数（静态）是有区别的。实例函数可以调用其他实例函数*和*静态函数，因为它们具有对实例的隐式引用。相反，静态函数只能调用静态函数，否则它们必须显式地提供一个实例来调用非静态函数。

由于`public static void Main(string[] args)`是静态的，它调用的所有函数也必须是静态的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T13:51:18.140

因为你的函数是一个实例或非静态函数，你应该首先创建一个对象。

```
Program p=new Program();
p.Add(1,1) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T13:49:02.517

该构建错误告诉您的是，您必须拥有一个实例`Program`或使其成为`Add`静态的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-31T06:30:22.347

> 注意：在 C# 中，术语“函数”经常被术语“方法”代替。为了这个问题**，没有区别，所以我只使用术语“函数”**。

这不是真的。您可能会读到（func 类型+ Lambda 表达式）、（匿名函数“使用委托类型”）、（动作类型+Lambda 表达式）、（谓词类型+Lambda 表达式）。等等……等等……这会奏效。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

           int a;
           int b;
           int c;

           Console.WriteLine("Enter value of 'a':");
           a = Convert.ToInt32(Console.ReadLine());

           Console.WriteLine("Enter value of 'b':");
           b = Convert.ToInt32(Console.ReadLine());

           Func<int, int, int> funcAdd = (x, y) => x + y;
           c=funcAdd.Invoke(a, b);
           Console.WriteLine(Convert.ToString(c));

        }

     }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T13:50:25.923

只需通过添加如下关键字来创建您的`Add`函数：`static``static`

```
public static int Add(int x, int y) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-23T10:19:49.293

出现错误的原因是，如果您要在 main 上方创建一个函数原型，`public int Add(int x, int y);`或者您可以将整个`Add`函数复制并粘贴到 main 上方，那么您的 add 函数是在您在 main 中使用它之后定义的编译器开始执行，所以在你使用它之前声明和定义一个函数是没有意义的，希望能有所帮助。:D

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-18T17:58:16.573

你必须让你的功能像这样静态

```
namespace Add_Function
{
  class Program
  {
    public static void(string[] args)
    {
       int a;
       int b;
       int c;

       Console.WriteLine("Enter value of 'a':");
       a = Convert.ToInt32(Console.ReadLine());

       Console.WriteLine("Enter value of 'b':");
       b = Convert.ToInt32(Console.ReadLine());

       //why can't I not use it this way?
       c = Add(a, b);
       Console.WriteLine("a + b = {0}", c);
    }
    public static int Add(int x, int y)
    {
        int result = x + y;
        return result;
     }
  }
} 
```

你可以做 Program.Add 而不是 Add 你也可以像这样创建一个新的 Program 实例

```
Program programinstance = new Program(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-14T21:47:19.783

```
static void Main(string[] args)
    {
        Console.WriteLine("geef een leeftijd");
        int a = Convert.ToInt32(Console.ReadLine());

        Console.WriteLine("geef een leeftijd");
        int b = Convert.ToInt32(Console.ReadLine());

        int einde = Sum(a, b);
        Console.WriteLine(einde);
    }
    static int Sum(int x, int y)
    {
        int result = x + y;
        return result;
    } 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-12-14T21:48:38.910

```
static void Main(string[] args)
    {
        Console.WriteLine("geef een leeftijd");
        int a = Convert.ToInt32(Console.ReadLine());

        Console.WriteLine("geef een leeftijd");
        int b = Convert.ToInt32(Console.ReadLine());

        int einde = Sum(a, b);
        Console.WriteLine(einde);
    }
    static int Sum(int x, int y)
    {
        int result = x + y;
        return result; 
```

# api - 指定时间的 Youtube API 事件

> ID：10175367
> 
> 赞同：14
> 
> 时间：2012-04-16T13:47:59.007
> 
> 标签：api, youtube

当视频到达指定时间时，是否可以通过 YouTube API 触发事件？例如，当视频达到 20 秒时。触发事件。

谢谢，
毛罗

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T16:49:56.467

不知道你是否仍然需要这个问题的答案（因为我在 4 个月后找到了它），但这是我如何使用 youtube 的 iframe embed api 完成的。这很丑，因为它需要一个 setInterval，但在 YouTube API 中确实没有任何类型的“timeupdate”事件（至少在 iframe API 中没有），所以你必须通过检查视频时间来伪造它很经常。它似乎运行得很好。

假设您想使用 YT.Player() 启动播放器[，如下所示](https://developers.google.com/youtube/iframe_api_reference#Loading_a_Video_Player)，并且您想实现自己的`onProgress()`函数，该函数在视频时间更改时调用：

在 HTML 中：

```
<div id="myPlayer"></div> 
```

在 JS 中：

```
// first, load the YouTube Iframe API:
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// some variables (global here, but they don't have to be)
var player;
var videoId = 'SomeYoutubeIdHere';
var videotime = 0;
var timeupdater = null;

// load your player when the API becomes ready
function onYoutubeIframeAPIReady() {
  player = new YT.Player('myPlayer', {
    width: '640',
    height: '390',
    videoId: videoId,
    events: {
      'onReady': onPlayerReady
    }
  });
}

// when the player is ready, start checking the current time every 100 ms.
function onPlayerReady() {
  function updateTime() {
    var oldTime = videotime;
    if(player && player.getCurrentTime) {
      videotime = player.getCurrentTime();
    }
    if(videotime !== oldTime) {
      onProgress(videotime);
    }
  }
  timeupdater = setInterval(updateTime, 100);
}

// when the time changes, this will be called.
function onProgress(currentTime) {
  if(currentTime > 20) {
    console.log("the video reached 20 seconds!");
  }
} 
```

这有点草率，需要一些全局变量，但是您可以轻松地将其重构为闭包和/或通过在初始化播放器时还包括 onStateChange 事件并编写 onPlayerStateChange 来使间隔停止并在播放/暂停时自行启动检查播放和暂停的功能。您只需将 updateTime() 函数与 onPlayerReady 分开，并在正确的事件处理程序中 战略性地调用`timeupdater = setInterval(updateTime, 100);`和。有关在YouTube 中使用活动的更多信息，[请参阅此处。](https://developers.google.com/youtube/iframe_api_reference#Events)`clearInterval(timeupdater);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:24:21.657

我想你可以看看[popcorn.js](http://popcornjs.org/popcorn-with-youtube)。这是一个有趣的 mozilla 项目，它似乎可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-11T22:19:03.097

不确定是否有人同意这里，但我可能更喜欢使用 setTimeout() 而不是 setInterval() 因为它避免使用事件侦听器，例如：

```
function checkTime(){
    setTimeout(function(){
        videotime = getVideoTime();
        if(videotime !== requiredTime) {
             checkTime();//Recursive call.
        }else{
            //run stuff you want to at a particular time.
            //do not call checkTime() again.
        }
    },100);
} 
```

它是一个基本的伪代码，但希望能传达这个想法。

# c++ - 提升 shared_ptr 接口/对象

> ID：10175369
> 
> 赞同：0
> 
> 时间：2012-04-16T13:48:00.013
> 
> 标签：c++, boost, interface, shared-ptr

假设我有一个 API，它有 2 个方法可以相互结合使用：

```
boost::shared_ptr<IAsset> getAsset( const std::string & id );
void update( const Asset & asset ); 
```

`boost::shared_ptr<Asset> asset`我在另一个类中有一个成员变量。如果我做：

```
asset = otherObject->getAsset("first_asset");

// do some stuff

otherObject->update( *asset ); 
```

我收到以下错误：

```
 \boost\include\boost/smart_ptr/shared_ptr.hpp(378): error C2440: '<function-style-cast>' : cannot convert from 'boost::shared_ptr<T>' to 'boost::shared_ptr<T>'
      with
      [
          T=IAsset
      ]
      and
      [
          T=Asset
      ]
      No constructor could take the source type, or constructor overload resolution was ambiguous
      src\TestMethod.cpp(35) : see reference to function template instantiation 'boost::shared_ptr<T> &boost::shared_ptr<T>::operator =<IAsset>(boost::shared_ptr<IAsset> &&)' being compiled
      with
      [
          T=Asset
      ]
      \boost\include\boost/smart_ptr/shared_ptr.hpp(378): error C2228: left of '.swap' must have class/struct/union 
```

我应该在这里注意到，类定义`Asset`确实扩展`IAsset`为`class Asset : virtual public IAsset {...}`

有人可以告诉我正确的方法吗，因为我无法访问底层 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:52:18.197

这是一个潜在的不安全转换，因此您必须使用[动态指针](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/shared_ptr.htm#dynamic_pointer_cast)强制转换。

（请注意，您不能使用`static_cast`来自虚拟基类的 a。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:52:12.983

我认为您对继承的使用不正确。如果`update`需要，`Asset`那么您需要发送它的一个`Asset`或其子类。`IAsset`是一个超类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:52:14.950

因为您正在将 a 投射`IAsset`到 a `Asset`，这需要向下投射。

# ajax - Primefaces p:calendar 与 p:ajax 值未更新（一步延迟）

> ID：10175371
> 
> 赞同：1
> 
> 时间：2012-04-16T13:48:01.613
> 
> 标签：ajax, jsf-2, primefaces, seam3

我想在`p:calendar`. 在我的设置中，我有一个`@Named @ViewScoped`Bean，该类`ObWithDate`是一个`@Entity`带有 date 字段*validFrom*的类。

```
<h:form id="fUser">
  <p:dataTable id="dt" var="cum" value="#{myBean.listObWithDates}">
    <p:column>
      <p:calendar id="cValidFrom" value="#{cum.validFrom}">  
        <p:ajax event="dateSelect" listener="#{myBean.update(cum)}"
                update=":fUser:dt"/>  
      </p:calendar>  
    </p:column>
  </p:dataTable>
</h:form> 
```

`update(ObWithDate myO)`好消息是，每次我选择日期时，都会使用正确的对象调用bean 方法。不好的是，它`myO.validFrom`没有正确的值。它总是*落后一步*：

*   用 2012-01-01 初始化的字段
*   GUI 更改为 2012-01-05，bean 方法调试到 2012-01-01
*   GUI 更改为 2012-01-15，bean 方法调试到 2012-01-05

这个问题让我发疯，我发现了几个未正确更新值的问题，还有一些关于`p:calendar`. 他们中的大多数人建议将属性`selectListener="#{calendarBean.handleDateSelect}"`与 `handleDateSelect(DateSelectEvent event)`方法一起使用。但我想调用我的方法，因为我想传递变量的当前实例。

*   Firebug 验证，正确的更新值在 POST 请求中传输
*   我正在使用 Primefaces 3.2 和 JBoss-7.1.1-Final
*   即使没有`p:dataTable`并且仅使用`p:calendar`该问题仍然是相同的。
*   对于 method-Object以及 中的相应条目，可以观察到调试输出的*错误*值。`update(ObWithDate myO)``myBean.listObWithDates`
*   `<p:ajax immediate="true" .../>`不能解决这个问题。

**更新**MattHandy对我帮助很大，产生的问题*How to get the对应的list item in the ajax call inside the beans method?* 在后续[JSF p:calendar in p:dataTable: How to get the row of p:ajax dateSelect event](https://stackoverflow.com/questions/10276602)中制定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:41:09.647

这很可能是生命周期问题。在侦听器执行*之前*调用字段的设置器。您不应该使用侦听器来设置您的值。

*监听器上的 el 表达式在上一个*请求的渲染响应阶段进行评估，因此它的`cum`值是“落后一步”。

您应该从日历日期值的设置器更新您的自定义对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T17:04:22.003

我今天早上遇到了这个问题。发现 primefaces 已经从 Primefaces 3.5 中删除了 DateSelectEvent 。因此必须从我的日历对象中删除 ajax 事件调用。而是使用 get..() 检索值。请在下面的链接中找到相同的讨论。 [http://forum.primefaces.org/viewtopic.php?f=3&t=27590](http://forum.primefaces.org/viewtopic.php?f=3&t=27590)

# javascript - 仅使用 html 和 javascript/jquery 的基于组件的设计的最佳实践

> ID：10175381
> 
> 赞同：2
> 
> 时间：2012-04-16T13:48:41.497
> 
> 标签：javascript, jquery, html

假设我决定尝试制作一个客户端只有 html 和 javascript/jquery 的 Web 应用程序，我将从 json 服务获取数据。

我来自 Web 表单，现在正在学习和喜爱 mvc，在这里我们拥有母版页和组件，如用户控件和部分视图等，这使我们能够重用组件并构建我们的代码。

当我只使用 html 和 javascript 时，我该怎么做？

我已经看到 jquery 具有`load()`从服务器加载数据的方法。这是实现我想要的最佳方法吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:03:45.957

这是一个相当大和主观的问题。

如果您打算使用 JSON 方法使用数据，您可能想要使用[getJSON()](http://jqapi.com/#p=jQuery.getJSON)，它是更灵活的`ajax()`.

然后您可能需要一个[模板系统](https://stackoverflow.com/questions/7788611/what-javascript-template-engines-you-recommend)，以避免使用 javascript 创建和注入 html（对于比琐碎的任务更复杂的每项任务，它都会变得一团糟）。

关于您的应用程序结构，您可能会考虑诸如 MVC、MVP 或[MVVM](http://addyosmani.com/blog/understanding-mvvm-a-guide-for-javascript-developers/)之类的模式。有[几个很好的库](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/)可以让你利用这些模式，但我个人建议开始不使用框架，只有当你真正需要它时才切换到其中一个，并且你至少掌握了一些基本概念.

祝你好运 ：）

# javascript - 寻路：如何为寻路算法创建路径数据？

> ID：10175383
> 
> 赞同：1
> 
> 时间：2012-04-16T13:48:42.870
> 
> 标签：javascript, path-finding

我意识到这与编程问题并不严格相关，但由于 SO 是编程相关问题的最佳资源，我决定尝试一下。:)

我有一个项目，我需要在建筑物内使用 javascript 进行 3D 寻路。Dijkstra 算法可能是最好的情况，因为它可以很好地处理不规则形状。

然而，问题是这样的：Dijkstra 需要节点结构才能工作。但是如何创建这些数据？显然需要从基础数据进行某种转换，但是如何创建基础数据呢？浏览蓝图，为每个可能的路径节点获取 x 和 y 值，手动计算距离似乎有点过分......而且容易脏话......

我什至在考虑为此使用 Google Scetchup。为每个可能的路径画线，但问题是从中获取路径数据。：/

我不能成为第一个遇到这个问题的人......有什么想法吗？有没有现成的工具来创建路径数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:27:44.320

找不到任何现成的工具，所以我最终在 Google SketchUp 中将路径数据创建为线条，将它们导出 Collada 文件并为 Collada XML 数据编写我自己的转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:11:13.187

这一切都可以在代码中通过构建 3d 网格并移除与 3d 对象相交的立方体来完成。

然后，我将分层多个 3d 网格（每次大小加倍），以提供更一般的可达性概念（由较小的网格构成），然后凭借寻路算法，您将始终从 AB 中自动找到最有效的路径使用最大的单元格引导路径（因此计算步骤最少）。**注意**：使较大的 3d 网格具有稍低的权重，以便其路径受到青睐。

这可以用于许多应用程序。例如，如果您只能在地面上行走，则只需在无法到达的区域移除块。

# android - ListView 的项目布局错误

> ID：10175385
> 
> 赞同：0
> 
> 时间：2012-04-16T13:48:50.483
> 
> 标签：android, listview

我正在为我的列表视图项目使用以下布局。

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://scheme.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:paddingLeft="10dip"
    android:textSize="18sp"
    android:minHeight="40sp"
    /> 
```

但是我在 logcat java.lang.RuntimeException 中收到一个错误...您必须提供一个 layout_width 参数。

我的 main.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget28"
    android:background="#ff000033"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="70px"
        android:layout_height="30px"
        android:paddingLeft="2px"
        android:paddingTop="2px"
        android:background="@drawable/ic_launcher"
     ></ImageView>

    <ListView
        android:id="@+id/myListView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />
</LinearLayout> 
```

这是我活动的 onCreate 代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    context=this.getApplicationContext();
    this.setTitle("NP Headline News");

    myListView=(ListView)findViewById(R.id.myListView);
    myListView.setOnItemClickListener(new OnItemClickListener(){

            @Override
        public void onItemClick(AdapterView<?> arg0, View v, int index,long id) {
                // TODO Auto-generated method stub
                String urlAddress=urlAddresses[index];
                String urlCaption = urlsCaptions[index];
            }

    });

  int layoutId=R.layout.simple_list_item_1;
   // int layoutId=android.R.layout.simple_list_item_1;
    aa = new ArrayAdapter<String>(this,layoutId,this.urlsCaptions);

    myListView.setAdapter(aa);
} 
```

我认为这与我的 simple_list_item_1 有关，因为如果我使用 android.R.layout.simple_list_item_1 那么一切正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:20:37.697

这是您清除错误的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:paddingLeft="10dip"
    android:textSize="18sp"
    android:minHeight="40sp"

    /> 
```

您能否区分包含错误的代码和上面的代码。

我希望你们在编码的时候不要紧张和催促，那一定会导致你们头脑混乱。

对于这些类型的错误，您可以在 DDMS 的帮助下自行调试。因为代码非常非常简单，查看对。

关于前面的答案的一些话：

没有必要仅在文件内部声明 a`TextView`或 any的人。`View``Layout`

它也是一个`View`，所以它可以独自坐在一个`Canvas`。

而且问题不在于`"fill_parent"`, 和`"match_parent"`某事。

我想你现在也可能很紧张，因为我花了这么多时间给你错误的原因。

开始了，

该错误是因为仅在以下行中，

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

在上面的行中，您错误地输入`scheme`了`schemas`.

这就是错误。

所以只有我提到，如果你不紧张地看代码，你可以很容易地得到它。

`xmlns`表示命名空间，这应该是正确的，以使`android:` 前缀属性有价值。

希望您理解并回答对您有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:56:04.327

您应该在布局下使用您的 TextView，因为您使用的是唯一的 TextView，您可以添加一个 LinearLayout

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
<TextView xmlns:android="http://scheme.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:paddingLeft="10dip"
    android:textSize="18sp"
    android:minHeight="40sp"
    />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:18:49.120

我想问题来自不同的东西。

您正在执行自定义项目视图，但您使用标准 AdapterView。

对于标准的 arrayAdapter，您需要满足预期的结构。

或者，您构建自己的 ArrayAdapter 并提供您专用的 getView

[Android 自定义列表视图](https://stackoverflow.com/questions/7038986/android-custom-listview)

# java - android对NdefMessage构造的反射失败

> ID：10175386
> 
> 赞同：0
> 
> 时间：2012-04-16T13:48:55.613
> 
> 标签：java, android, arrays, reflection

我想使用带有反射的 NdefRecord 实例化 NdefMessage。下面是一个真正*应该*工作但不能工作的简单代码片段：

```
// getting Ndef Message Class OK
Class<?> ndefMessageClass = Class.forName("android.nfc.NdefMessage"); 

//getting NdefRecord class OK
Class<?> ndefRecordClass = Class.forName("android.nfc.NdefRecord");

//getting ArrayOf NdefRecord
Object[] ndefRecords = (Object[])Array.newInstance(ndefRecordClass, 1)

//filling the new Array
//I'm shure I get an Correct NdefRecord, but dont wanna mess the Code here
ndefRecords[0] = getNdefRecord()

//getting the constructor OK
Constructor<?> const = ndefMessageClass.getConstructor(ndefRecords.class)

//initialization fails here
Object myNdefMessage = const.newInstance(ndefRecords)

//same with this
Object ndefMessage = const.newInstance(Arrays.asList(args).toArray()); 
```

我绝对不会想到这会如何失败，得到以下错误消息：

> 04-16 15:38:42.113: W/System.err(13360): java.lang.IllegalArgumentException: 参数 1 应该有 android.nfc.NdefRecord[] 类型，得到 android.nfc.NdefRecord

所以我得到了正确识别的构造函数。如果我尝试这样得到它：

```
 Constructor<?> const = ndefMessageClass.getConstructor(ndefRecords[0].getClass()) 
```

我明白了

> 04-16 15:44:59.621: W/System.err(14033): java.lang.NoSuchMethodException: [class android.nfc.NdefRecord]

在调试时，它向我展示了一切正确。我可以访问我的数组的索引。为什么地狱java告诉我ndefRecords属于NdefRecords类而不是NdefRecords []？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:05:56.050

您的问题是该`newInstance` [方法](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Constructor.html#newInstance%28java.lang.Object...%29)是菱形函数（即采用可变数量参数的函数）：

```
public T newInstance(Object... initargs) 
```

但是，在 java 中，您可以将数组传递给此类函数，并且数组的元素将被视为传递给函数的连续参数。因此你得到：

```
public static void main (String [] args)
{
   double [] a = {1.1, 2.2, 4.4};
   System.out.println(avg(a) == avg(1.1, 2.2, 4.4));
}
static double avg (double ... numbers)
{
   double total = 0;
   for (int i = 0; i < numbers.length; i++)
        total += numbers [i];
   return total / numbers.length;
} 
```

并且对`avg`函数的两次调用具有完全相同的含义。

我能想到的一个快速解决方法是将您的电话更改为`newInstance`：

```
Object myNdefMessage = const.newInstance(new Object[] {ndefRecords}); 
```

# c# - 具有自定义行事件的自定义 GridView 上的“无效回发”异常

> ID：10175388
> 
> 赞同：1
> 
> 时间：2012-04-16T13:49:02.127
> 
> 标签：c#, javascript, exception, gridview

我想我已经弄清楚这个程序会发生什么。

这是标记的一部分。

```
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
        </asp:ToolkitScriptManager>
        <asp:UpdatePanel ID="upGrid" runat="server">
            <ContentTemplate>
                <asp:GridView ID="dgvPeliculas" runat="server" AllowPaging="true" PagerStyle-CssClass="pgr"
                    CssClass="mGrid" EmptyDataText="No hay más películas" OnPageIndexChanging="dgvPeliculas_PageIndexChanging1"
                    EnableSortingAndPagingCallbacks="true" OnRowDataBound="dgvPeliculas_RowDataBound">
                </asp:GridView>                
            </ContentTemplate>
        </asp:UpdatePanel>
                <table class="LogIn">
                    <tr>
                        <td>
                            <asp:UpdatePanel ID="upAlquiler" runat="server">
                                <ContentTemplate>
                                    <asp:Button ID="btnAlquilar" runat="server" Text="Alquilar" CssClass="AdminButtons"
                                        OnClick="btnAlquilar_Click" OnClientClick="javascript: Click_Alquilar(); return false" />
                                </ContentTemplate>
                            </asp:UpdatePanel>
                        </td>
                        <td>
                            <asp:Button ID="btnNuevo" runat="server" Text="Nuevo" CssClass="AdminButtons" OnClick="btnNuevo_Click"
                                OnClientClick="javascript: Click_Nuevo(); return false" />
                        </td>
                        <td>
                            <asp:Button ID="btnEditar" runat="server" Text="Editar" CssClass="AdminButtons" OnClick="btnEditar_Click"
                                OnClientClick="javascript: Click_Editar(); return false" />
                        </td>
                        <td>
                            <asp:Button ID="btnBorrar" runat="server" Text="Borrar" OnClientClick="javascript: Click_Borrar(); return false"
                                CssClass="AdminButtons" />
                        </td>
                    </tr>
                </table> 
```

我已经对它进行了编码，以便在选择一行时按钮会对其进行修改。通过更改“onclick”事件（在 RowDataBound 函数期间更改）和 Javascript 函数来选择行。

这就是我更改背后代码的方式：

```
protected void dgvPeliculas_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            dgvPeliculas.CssClass = "mGrid";
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                string rowID = String.Empty;
                rowID = "row" + e.Row.RowIndex;
                e.Row.Attributes.Add("id", rowID);
                e.Row.Attributes.Add("onclick", "onClick(" + "'" + rowID + "'" + ")");
                e.Row.Attributes.Add("onmouseover", "this.style.cursor='pointer'; this.style.backgroundColor = '#B0C5BB';");
                e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor = '';");
            }
        } 
```

这是 JavaScript 函数：

/

```
 function onClick(rowID)
     {
         //Si no hay ninguna seleccionada
         if (selected == '') {
             index = rowID;
             selected = document.getElementById(rowID);
             selected.onmouseover = '';
             selected.onmouseout = '';
             selected.style.backgroundColor = 'yellow';
         }
         else {
             //Si se deselecciona
             if (selected == document.getElementById(rowID)) {
                 selected.onmouseover = onmouseover;
                 selected.onmouseout = onmouseout;
                 selected.style.backgroundColor = '';
                 selected = '';
                 index = '';
             }
             //Deseleccionar el actual y seleccionar el nuevo
             else {
                 selected.onmouseover = onmouseover;
                 selected.onmouseout = onmouseout;
                 selected.style.backgroundColor = '';

                 index = rowID;
                 selected = document.getElementById(rowID);
                 selected.onmouseover = '';
                 selected.onmouseout = '';
                 selected.style.backgroundColor = 'yellow';
             }
         }
     } 
```

New 按钮显示了一个 ModalPopupExtender，它从那里调用一个 JavaScript 函数来验证其内容，然后回发到后面的代码以检查和更新数据库。显然，它还将寄存器附加到网格上。

编辑按钮和其余通过异常。编辑功能是特殊的，因为它的功能类似于新建按钮的功能。它显示了 ModalPopupExtender，转到 JavaScript 函数，执行回发，到数据库和更新。但这需要选择 Grid 中的行之一（否则，没有什么可编辑的）。我相信这就是它抛出“Invalid Postback or Callback”异常的原因。相同的条件适用于其他按钮，并且它们都抛出相同的异常。全部，除了新建，不需要选择行。

你认为这就是我遇到这个问题的原因吗？如果是这样，我该如何解决？

抱歉，如果您认为这是我以前的一个帖子的转贴，但我无法解决问题，我认为这给了我一个新的线索，我也无法解决。

谢谢。

# dynamics-crm-2011 - CRM 2011 - 减少约会中主题字段的“最大长度”会导致错误

> ID：10175395
> 
> 赞同：3
> 
> 时间：2012-04-16T13:49:14.863
> 
> 标签：dynamics-crm-2011, crm, appointment

当我想减少预约时“主题”字段的“最大长度”时，它给了我以下错误：

> 更新 RecurringAppointmentMaster.subject.Length 但它对更新无效。原价：400。新值：398。

我们无法将托管解决方案导入 CRM 2011，因为托管解决方案上的主题是“255”，我们使用“200”作为“主题”字段的最大长度。我们可以做些什么来调整大小（也许通过不支持的 DB 处理）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:19:00.297

好吧，您总是可以修改托管解决方案...尽管完全不受支持，但我想说这是两个不受支持的弊端中的较小者:)

# symfony1 - 在 Doctrine 1.2 中，我如何在多对多关系中访问粘合对象属性？

> ID：10175396
> 
> 赞同：0
> 
> 时间：2012-04-16T13:49:21.137
> 
> 标签：symfony1, doctrine, symfony-1.4, doctrine-1.2

我有一个 Article 模型和一个 Photo 模型，我目前正在使用这样的查询来加入这两者：

```
$q = Doctrine_Query::create()
       ->from('Article a')
       ->leftJoin('a.Photo p'); 
```

为了将它们绑定在一起，我有一个`ArticlePhoto`模型。除了`article_id`和`photo_id`字段，模型还有一个`priority INT`字段，我想用它对上述查询中的照片进行排序。

任何建议我可以如何实现这一点，而不必通过这样的查询加入：

```
$q = Doctrine_Query::create()
       ->from('Article a')
       ->leftJoin('a.ArticlePhoto ap')
       ->leftJoin('ap.Photo p')
       ->orderBy('ap.priority'); 
```

有很多代码希望在 中找到文章的第一张照片`$article['Photo'][0]`，所以我想避免不得不更改它。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:15:16.487

连接有什么问题？您始终可以将查询重写为：

```
$q = Doctrine_Query::create()
   ->from('Article a')
   ->leftJoin('a.ArticlePhoto ap, ap.Photo p')
   ->orderBy('ap.priority'); 
```

这看起来像是一个没有任何魔法的完美查询。您需要来自 ArticlePhoto 表的信息（用于排序），因此进行显式连接是正确的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:50:40.057

```
$q = Doctrine_Query::create()
   ->from('Photo p')
   ->orderBy('priority'); 
```

以上将解决问题。请注意，不需要连接具有关系的表（假设在您的示例中，表在模式中具有 1:m 关系）。您可以按如下所述获得文章对象

```
$photoObjectCollection=$q->execute();
foreach($photoObjectCollection as $photoObject){
    $photoObject->Article->requiredField;
} 
```

# c# - 添加行时保持TextBox滚动位置

> ID：10175400
> 
> 赞同：8
> 
> 时间：2012-04-16T13:49:25.520
> 
> 标签：c#, .net, winforms, textbox

在我的 WinForm 应用程序中，我有一个多行文本框控件 (uiResults)，用于在处理大量项目时报告进度。使用 AppendText 非常适合在每次更新时自动滚动到底部，但如果用户回滚以读取一些较旧的数据，我需要关闭自动滚动。如果可能的话，我宁愿远离 P/Invoke 调用。

是否可以在不使用 P/Invoke 的情况下检测用户是否向后滚动？现在，我只检查 SelectionStart 哪个有效，但需要用户从文本框的末尾移动插入符号以停止自动滚动：

```
if(uiResults.SelectionStart == uiResults.Text.Length)
{
  uiResults.AppendText(result + Environment.NewLine);
} 
```

我的主要问题是，使用 Text 属性附加字符串时，文本框会滚动到开头。我试图通过存储插入符号位置并在更新后重置并滚动到它来解决这个问题，但这会导致当前行移动到底部（当然，因为 ScrollToCaret 滚动的距离不超过使插入符号进入视图所需的距离）。

```
[Continued from above]
else
{
  int pos = uiResults.SelectionStart;
  int len = uiResults.SelectionLength;
  uiResults.Text += result + Environment.NewLine;
  uiResults.SelectionStart = pos;
  uiResults.SelectionLength = len;
  uiResults.ScrollToCaret();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T16:13:07.040

[自动滚动文本框使用的内存超出预期](https://stackoverflow.com/questions/1743448/auto-scrolling-text-box-uses-more-memory-than-expected)

问题中的代码完全实现了您正在寻找的内容。添加了文本，但仅当滚动条位于最底部时才会发生滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-09T01:35:22.960

我曾经也有过一样的问题。最后，我做了一个简单的方法。（对不起，我英语不好。）

关键是使用 GetCharIndexFromPosition 方法获取第一个显示的字符索引。

```
//Get current infomation
int selStart = textBox.SelectionStart;
int selLen = textBox.SelectionLength;
int firstDispIndex = textBox.GetCharIndexFromPosition(new Point(3, 3));

//Append Text
textBox.AppendText(...);

//Scroll to original displayed position
textBox.Select(firstDispIndex, 0);
text.ScrolltoCaret();

//Restore original Selection
textBox.Select(selStart, selLen); 
```

而且，如果文本框正在闪烁，请使用此扩展。添加文本前调用 textBox.Suspend()，添加文本后调用 textBox.Resume()。

```
namespace System.Windows.Forms
{
    public static class ControlExtensions
    {
        [System.Runtime.InteropServices.DllImport("user32.dll")]
        public static extern bool LockWindowUpdate(IntPtr hWndLock);

        public static void Suspend(this Control control)
        {
            LockWindowUpdate(control.Handle);
        }

        public static void Resume(this Control control)
        {
            LockWindowUpdate(IntPtr.Zero);
        }

    }
} 
```

希望这会帮助你。谢谢~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:09:30.457

您是否愿意接受另一种方法，因为您一定会以这种方式遇到麻烦，并且解决方案会变得复杂（您想要避免的 pinvoke 等）。例如。假设您找到了一种方法来“检测用户是否向后滚动”并且您停止滚动到底部。但是在阅读了该行之后，用户可能希望恢复滚动到底部功能。那么为什么不给用户一种控制自动滚动的方法呢。这就是我将如何做到的......

使用 RichTextBox 显示数据并使用 Checkbox 来控制 AutoScrolling，那么您的代码可能是这样的：

```
 richTextBox1.AppendText(result + Environment.NewLine);
        if (checkBoxAutoScroll.Checked)
        {
            richTextBox1.SelectionStart = richTextBox1.Text.Length;
            richTextBox1.ScrollToCaret(); 
        } 
```

RichTextBox 默认情况下不会自动滚动到 AppendText 的底部，因此第一行将始终可见（而不是新附加的行）。但是，如果用户选中了这个名为 AutoScroll 的复选框，我们的代码会将 Richtextbox 滚动到显示新行的底部。如果用户想要手动滚动阅读一行，他首先需要取消选中该复选框。

# html - 跟随 HTML5 视频的移动/调整大小事件？

> ID：10175405
> 
> 赞同：2
> 
> 时间：2012-04-16T13:49:46.127
> 
> 标签：html, resize, html5-video, move, onchange

在调整视频大小和/或移动其在页面上的位置时，是否可以使用事件检测到这一点？还是我需要设置一个计时器并手动跟踪大小和位置的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:52:03.003

只有`window`对象具有本机`onresize`事件，因此您可能需要按照您提到的方式进行自己的检测。除了计时器，您还可以挂钩鼠标事件并对鼠标向上或类似事件进行调整大小测试。

[来源：developer.mozilla.org](https://developer.mozilla.org/en/DOM/element.onresize)

# javascript - 通过 JavaScript 获取服务器控件属性值

> ID：10175407
> 
> 赞同：1
> 
> 时间：2012-04-16T13:49:51.807
> 
> 标签：javascript, asp.net

我想通过 Java 脚本访问我的用户控件的布尔属性。为此，我这样做：

```
..=document.getElementById('<%= dtPickerBirth.ClientID%>').IsValidDate; 
```

你可能猜到 IsValidDate 是一个布尔值，我想访问它。这段代码有什么问题吗？我将其用于验证目的，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:13:01.477

怎么样`..= '<%= dtPickerBirth.IsValidDate %>';`？

# c++ - 如何在发布模式下从程序中获取 isapi dll 物理路径

> ID：10175408
> 
> 赞同：1
> 
> 时间：2012-04-16T13:49:53.500
> 
> 标签：c++, isapi

LPTSTR DLLPath = new TCHAR[_MAX_PATH]; ::GetModuleFileName((HINSTANCE)&__ImageBase, DLLPath, _MAX_PATH);

我正在使用上述函数来获取 isapi dll 物理路径。它在调试模式下工作正常。当我尝试在发布模式下构建它时，它显示 __ImageBase unidentified 。任何人都可以建议我替代这个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:52:08.553

您可能应该像这样投射它：

`__ImageBase`通常是 value: `0x400000`，这通常是 Image Loader 在内存中加载 .exe 的地方。

```
HINSTANCE hInst = reinterpret_cast<HINSTANCE>(&__ImageBase) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:09:53.163

您可能应该保存并使用`hInstance`传入的参数`DllMain()`而不是`__ImageBase`.

# gwt - 在 GWT 中单击时获取单元格表中的标题列名称

> ID：10175410
> 
> 赞同：0
> 
> 时间：2012-04-16T13:50:06.040
> 
> 标签：gwt

我正在使用 GWT 2.2 版本的单元格表。我想获取我单击的标题列的名称。我没有得到任何点击事件。

有什么工作可以让我完成我的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T00:41:29.737

像这样的东西？;)

```
public class CellTableExample implements EntryPoint, ClickHandler {

    private static class SomeEntity {
        /* ... */
    }

    private static class ClickableTextHeader extends TextHeader {

        private ClickHandler handler;

        public ClickableTextHeader(String text, ClickHandler handler) {
            super(text);
            this.handler = handler;
        }

        @Override
        public void onBrowserEvent(Context context, final Element elem,
                final NativeEvent event) {

            //maybe hijack click event
            if(handler != null) {

                if(Event.ONCLICK == Event.getTypeInt(event.getType())) {

                    handler.onClick(new ClickEvent() {
                        {
                            setNativeEvent(event);
                            setRelativeElement(elem);
                            setSource(ClickableTextHeader.this);
                        }
                    });
                }
            }

            //default dom event handler 
            super.onBrowserEvent(context, elem, event);
        }
    }

    CellTable<SomeEntity> cellTable;
    TextColumn<SomeEntity> firstColumn;
    TextColumn<SomeEntity> secondColumn;
    TextColumn<SomeEntity> thirdColumn;

    @Override
    public void onModuleLoad() {

        /* somehow init columns - it's not the point for this example */

        cellTable.addColumn(firstColumn, new ClickableTextHeader("First column header", this));
        cellTable.addColumn(secondColumn, new ClickableTextHeader("Second column header", this));
        cellTable.addColumn(thirdColumn, new ClickableTextHeader("Third column header", this));
    }

    @Override
    public void onClick(ClickEvent event) {
        ClickableTextHeader source = (ClickableTextHeader) event.getSource();
        Window.alert(source.getValue());
    }
} 
```

如果我们使用“简单的侦听器接口”，劫持事件可能看起来更简单——我只是想“在语义上符合开箱即用的处理程序”:)

# php - PHPUnit @dataProvider 根本不起作用

> ID：10175414
> 
> 赞同：31
> 
> 时间：2012-04-16T13:50:21.580
> 
> 标签：php, phpunit

我已阅读有关该主题的文档，并且我的代码遵循数据提供者实现的所有要求。首先，[这是测试的完整代码，](http://pastebin.com/tuT9pV9h)以防万一。

这是实现数据提供者的函数：

```
/**
 * Test the createGroup function
 *
 * @return void
 * @author Tomas Sandven <tomas191191@gmail.com>
 *
 * @dataProvider provideFileImportTests_good
 **/
public function testCreateGroup($file, $groupname, $group, $mapping)
{
    // Create a test group
    $id = $this->odm->createGroup($groupname, $group);

    // Try to load it back out
    $result = R::load(OmniDataManager::TABLE_GROUP, $id);

    // Check that the result is not null
    $this->assertFalse(is_null($result));

    return $id;
} 
```

PHPUnit 只是失败了：

> tests\broadnet\broadmap\OmniDataManagerTest::testCreateGroup() 缺少参数 1

我已经尝试`die();`在数据提供程序函数中杀死应用程序（），但它从未发生过。数据提供者函数在同一个类中公开可用，函数名称中没有拼写错误，并且`testCreateGroup`函数在注释中的注释中引用了它，但从未调用数据提供者函数。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-04-16T15:53:41.780

最后，在对这个测试文件进行了数小时的测试后，我发现仅仅定义构造函数会破坏数据提供者的功能。很高兴知道。

要修复它，只需调用父构造函数。这是我的情况：

```
public function __construct()
{
    // Truncate the OmniDataManager tables
    R::wipe(OmniDataManager::TABLE_GROUP);
    R::wipe(OmniDataManager::TABLE_DATA);

    parent::__construct();   // <- Necessary
} 
```

* * *

正如[David Harkness](https://stackoverflow.com/questions/10175414/phpunit-dataprovider-simply-doesnt-work/10177489?noredirect=1#comment13064944_10177489)和[Vasily](https://stackoverflow.com/questions/10175414/phpunit-dataprovider-simply-doesnt-work/10177489?noredirect=1#comment49509768_10177489)在评论中指出的那样，构造函数覆盖必须匹配基类构造函数的调用签名。在我的例子中，基类构造函数不需要任何参数。我不确定这是否在较新版本的 phpunit 中发生了变化，或者它是否取决于您的用例。

无论如何，Vasily 的示例可能更适合您：

```
public function __construct($name = null, array $data = array(), $dataName = '')
{
    // Your setup code here

    parent::__construct($name, $data, $dataName)
} 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-05-02T07:19:25.887

如果你真的需要它，大卫哈克尼斯有正确的提示。这是代码：

```
public function __construct($name = NULL, array $data = array(), $dataName = '') {
    $this->preSetUp();
    parent::__construct($name, $data, $dataName);
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-05-04T16:20:21.450

为了强调[micro_user](https://stackoverflow.com/users/6141310/micro-user)提出的观点，`@dataProvider`注释*必须*在 docblock 注释中。即这样做：

```
/**
 * @dataProvider myDataProvider
 *
 */
public function testMyMethod(...)
{
  ...
} 
```

不要这样做，因为它不起作用：

```
/*
 * @dataProvider myDataProvider
 *
 */
public function testMyMethod(...)
{
  ...
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-03-16T20:08:28.637

对我来说，只有删除构造函数才有效。即使使用最新的稳定版本的 PHPUnit (6.0.9)，在我的类测试中调用父构造函数也会破坏注释。

我只是将我拥有的代码移到了在我的单元测试运行之前调用`__constructor`的函数中。`setUp`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-03-31T17:27:41.457

确保 dataProvider 拼写正确... `@dataProvidor`vs`@dataProvider`

在需要数据提供者的测试功能中，需要一个文档块，其中包含

```
/**
* @dataProvider providerItCanTest
*// 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-16T15:36:22.603

该错误意味着您的 data-provider 方法返回的数据数组中至少有一个为空。例如：

```
public function dataProvider() {
    return array(
        array(1, 2, 3),
        array(),           // this will cause a "Missing argument 1" error
        array(4, 5, 6)
    );
} 
```

因为您正在动态生成数据数组，所以您需要调试数据源并弄清楚为什么会这样。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-17T11:33:23.487

花了几个小时试图弄清楚 dataProvider 注释有什么问题。它根本没有被调用。

就我而言，问题是 opcache。检查 php.ini 以确保 opcache.save_comments 已启用：

```
php -r "phpinfo();" | grep opcache.save_comments 
```

要启用它，请将其添加到 php.ini （或 /usr/local/php5/php.d/20-extension-opcache.ini 在我的情况下，因为我正在使用来自 liip.ch 的 php for osx）：

```
[opcache]
opcache.save_comments=1 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-03T08:23:52.997

你好，任何仍然从谷歌来到这里的人 :) 我正在使用 PHP 7.0.5 和 PHPUnit 5.3.2。

正如@hubro 提到的 - 不要使用`__construct()`它，因为它会破坏一些 PHPUnit 注释。[这](https://stackoverflow.com/questions/26234169/in-phpunit-what-is-the-difference-between-construct-versus-setup)是一个包含更多细节的 SO 胎面。

我的测试类`MyStuffTest`扩展`MyFancyTestcase`了扩展`PHPUnit_Framework_TestCase`。`MyFancyTestcase`使用过`__construct()`，我得到了同样的错误。它应该`setupBeforeClass()`用来设置所有测试用例之间共享的静态数据 - 数据库连接等，不需要`__construct()`. DataProvider 现在可以工作了。

# java - Jsch：有没有办法发送控制字符

> ID：10175415
> 
> 赞同：2
> 
> 时间：2012-04-16T13:50:23.903
> 
> 标签：java, ssh, jsch

我正在使用 Jsch 连接 sshd 服务器，我是这个领域的新手。我成功发送了非控制字符，例如 a、b ...等等。但是，我需要发送“Esc”键命令（控制字符）来执行特定任务。根据[链接](https://stackoverflow.com/questions/5366923/sending-sigint-ctrl-c-using-ganymed-ssh2)，我尝试了几种方法（通过传递“27”、“0033”、“0x1b”和“^[”）但没有奏效。我找到了使用 sshj的[链接。](https://stackoverflow.com/questions/4167818/jsch-send-special-keys-ctrl-c-ctrl-d-etc)有没有办法使用 Jsch 发送控制字符？

谢谢MFH

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T00:43:18.970

下面的片段怎么样？

```
byte[] esc = { (byte)0x1b }; 
out.write(esc);
out.flush(); 
```

使用 JSch 的 JCTerm 有以下[定义](https://github.com/ymnk/jcterm/blob/master/src/main/java/com/jcraft/jcterm/EmulatorVT100.java#L554-569)，

```
byte[] ENTER = {(byte)0x0d};
byte[] UP = {(byte)0x1b, (byte)0x4f, (byte)0x41};
byte[] DOWN = {(byte)0x1b, (byte)0x4f, (byte)0x42};
byte[] RIGHT = {(byte)0x1b, (byte)0x4f, (byte)0x43};
byte[] LEFT = {(byte)0x1b, (byte)0x4f, (byte)0x44};
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:59:45.617

谢谢。我以不同的方式解决了这个问题。我正在使用 JSCH 向 VT100 终端发送字符以执行特定任务。在代码中，所有输入都转换为字节数组，但 ASCII 控制字符不能作为字节数组发送到 VT100 终端。根据[post](https://stackoverflow.com/questions/5366923/sending-sigint-ctrl-c-using-ganymed-ssh2)，我必须将控制字符作为 ASCII 码（INT）发送。例如，如果 VT100 终端需要 ESC 命令，则 SSH Session 输入流中必须写入 27（INT）。ESC 的 ASCII 码是 27。（之前，我将 27 作为字符串发送并转换为字节数组。）

# asp.net - 在回发期间更改动态加载的控件

> ID：10175418
> 
> 赞同：2
> 
> 时间：2012-04-16T13:50:31.387
> 
> 标签：asp.net, c#-4.0, dynamic-controls

我正在尝试设计一个页面，该页面根据用户的偏好同时处理`Employee`和处理 CRUD 任务。`Station`我已经`UserControl`创建一个子类`EditEntityControl`并开发了两个从这个基类派生的自定义控件，每个控件都处理`Employee`or`Station`对象的 CRUD 活动。

当用户在触发回发的下拉列表中切换值时，我想将正确的控件动态加载到页面中。这适用于每个控件的第一次加载，但是当我尝试重新加载第一个控件（加载第二个之后）时，出现以下错误：

> 无法加载视图状态。正在加载视图状态的控制树必须与在先前请求期间用于保存视图状态的控制树匹配。例如，当动态添加控件时，回发期间添加的控件必须与初始请求期间添加的控件的类型和位置相匹配。

我还在第二个控件的初始加载中看到了一些奇怪的行为，其中数据绑定没有绑定到正确的控件（例如，设置按钮的文本而不是控件上的文本框）。

有没有办法处理这种情况？或者，有没有办法清除`ViewState`并完全重新请求页面以解决此错误？看来，如果我能清除`ViewState`PostBacks 之间的这种混乱/混乱，其他一切都按设计工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:32:40.380

上面的评论中有很好的建议，但最终让我找到正确解决方案的是 Joel Coehoorn 对[这个问题](https://stackoverflow.com/questions/987680/dynamically-change-user-control-in-asp-net)的回答。

我加载控件 OnInit，然后在`SelectionChanged`事件中清除 OnInit 更改并根据需要重新创建正确的控件。感谢有关使未使用的控件不可见的其他建议。我会记住这一点以供将来参考。

# java - 将 ArrayList 保存到文本文件时出现 NotSerializableException

> ID：10175419
> 
> 赞同：0
> 
> 时间：2012-04-16T13:50:31.620
> 
> 标签：java, exception, serialization

我有一个将`PanelFurniture`对象添加到`ArrayList`. 当我尝试将数据保存在文件中时，它给了我异常`java.io.NotSerializableException: PanelFurniture$1`。`PanelFurniture`是类的名称，它已经实现`Serializable`了，所以我不明白问题可能是什么。

这是我将 ArrayList 写入文件的代码

```
if(ae.getSource() == commandButtons[5]) {
    int x = 5 , y = 11;
    File confidential = new File("secrets.txt");
    PrintWriter output = null;
    try {               
        saveFile = new FileOutputStream("myFile.dat");
        save = new ObjectOutputStream(saveFile);                                        
        save.writeObject(orderList);
        save.close(); 

        System.out.println(orderList);              
    }
    catch (Exception e){                
        e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:52:42.320

`PanelFurniture$1`指的是一个匿名内部类，它显然没有实现`Serializable`. 因此，您应该使用（或将其设为局部变量）来限定相应的类成员`transient`，因为匿名类不应该包含可序列化的数据。如果你这样做了，你应该变成一个普通的（命名的）内部类并拥有它`implement Serializable`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:56:14.270

您的`PanelFurniture`类，即您的内容`ArrayList`，需要实现`Serializable`接口以及任何匿名内部类（如`PanelFurniture$1`），因此 Java 不知道如何将这些数据读/写到磁盘。

如果你不想使用序列化，你可能想做这样的事情......（伪代码）

```
Create a FileOutputStream
for (each item in the ArrayList){
  get the properties of the PanelFurniture object, and write them to the FileOutputStream.
  eg. fos.writeLine(panelFurniture.getName() + "," + panelFurniture.getValue());
  }
Close the FileOutputStream. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:54:13.240

查看[writeObject()](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html#writeObject%28java.lang.Object%29)方法的 JavaDoc：

> 抛出：
> 
> NotSerializableException - 某些要序列化的对象未实现 java.io.Serializable 接口。

您确定构成 ArrayList 的元素实现了`Serializable`接口吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-14T11:00:46.300

您的问题与您的数组列表中包含的子模型相关联

对于对象上的每个模型，您必须添加“实现可序列化”并包含自动生成的“私有静态最终长序列版本UID”

通过这种方式，您可以毫无例外地保存整个列表

# regex - ?+* 在正则表达式中不遵循任何内容

> ID：10175421
> 
> 赞同：2
> 
> 时间：2012-04-16T13:50:39.457
> 
> 标签：regex, perl, makefile, netcat

我正在尝试在 HP-UX 上编译 netcat-0.7.1，但在制作时总是出现此错误：

```
../doc/texi2pod.pl ./netcat.texi netcat.pod
/^([^=]+)(?:=(.+))?/: ?+* follows nothing in regexp at ../doc/texi2pod.pl line 48.
*** Error exit code 255 
```

我打开 texi2pod.pl 并尝试像这样放置 \Q \E：`/\Q^([^=]+)(?:=(.+))?\E/` 但它不起作用。如果有人可以帮助我，那就太好了。

这是代码：

```
 ($flag, $value) = ($flag =~ /^([^=]+)(?:=(.+))?/);  
    die "no flag specified for -D\n" unless $flag ne "";  
    die "flags may only contain letters, digits, hyphens, dashes and underscores\n"
    unless $flag=~ /^[a-zA-ZO-9_-]+$/; 
```

perl -v：

```
 Version 4.0
    Revision 4.0.1.8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:23:19.953

Perl 5 将`(?:PATTERN)`序列添加到正则表达式中，选择它是因为`(?`在所有以前的 Perl 版本中都无效，因此不会破坏当前工作的代码。这也意味着任何使用它的代码都与之前的 Perl 版本不兼容。

很少有现代 Perl 代码可以与 Perl 4 一起使用。您可能需要升级您的 Perl。这可能需要一系列级联升级，例如您的 C 编译器等。

如果您没有与惠普进行某种安全更新安排，我会非常关心将旧系统连接到互联网。如果您没有将您与旧系统联系起来的专有软件，那么升级到更新的操作系统可能会为您提供很好的服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:52:15.183

首先，您将不得不更新您的 Perl 版本。Perl 4.0 已经过时了，我什至找不到任何关于它的文档。

您可以从[HP/UX 的 Perl for HP/UX -11i](http://h21007.www2.hp.com/portal/site/dspp/menuitem.863c3e4cbcdc3f3515b49c108973a801/?ciid=9813daedbd9f4310VgnVCM200000a460ea10RCRD)页面更新 Perl。

此更新将使您从 Perl 4.0 一直升级到大约五年前发布的 Perl 5.8.8。Perl 5.8.8 远不是最新的，但至少它将把你的 Perl 带入 21 世纪。

**带上喷气背包和飞行汽车！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:56:08.567

```
($flag, $value) = ($flag =~ /^([^=]+)(?:=(.+))?/); 
```

看起来 texi2pod.pl 是一个非常古老的脚本（最后一次更新是 2001 年？），而不是用`use strict`. 这可能会让事情变得不确定。我确定它应该可以工作，因此错误可能在您的设置中的其他地方。

但是，此特定行似乎旨在通过简单地拆分第一个等号来提取标志和值`=`，因此您可以尝试将其替换为以下之一：

```
($flag, $value) = split /=/, $flag, 2;        # either just split with a limit
($flag, $value) = ($flag =~ /^([^=]+)=(.+)/); # or simplify regex 
```

我认为问题是最后一个问号，我真的不明白它的目的。事实上，整个第二部分都很奇怪。*允许第二次捕获的空值可能*是一些错误的尝试。

**ETA：**话虽如此，请更新您的 perl 版本。如果文达斯是正确的，它大约有 20 年的历史，如果它确实有效，那只是习惯的力量。

# sql - sql 在 ssms 中运行快 在 asp.net 中运行缓慢

> ID：10175422
> 
> 赞同：29
> 
> 时间：2012-04-16T13:50:45.427
> 
> 标签：sql, asp.net, .net, sql-server-2008, ssms

我已经有这个问题几个星期了。问题是查询在网站上运行需要 4-5 分钟，而在 ssms 中运行最多需要 2 或 3 秒。我还发现，在更改此查询（例如添加 customerId 变量）后，它将开始在网页上快速运行，但到第二天又变慢了。有问题的查询是这个：

```
DECLARE @customerID INT
SET @customerID = @CustID
DECLARE @MyTable table(
Iden int NOT NULL IDENTITY(1,1),
ProductID int)

INSERT INTO @MyTable(ProductID)
SELECT P.ProductID FROM Product P WITH (NOLOCK)
left join Compunix_ProductMMY cpmmy with (nolock) on p.ProductID = cpmmy.ProductID
left join Compunix_CustomerMMY ccmmy with (nolock) on ccmmy.mmyid = cpmmy.mmyid
WHERE P.Deleted=0 AND P.Published=1 and (ccmmy.customerid = @customerID OR cpmmy.productid IS NULL)

SELECT c.Name, c.SeName, c.CategoryID
FROM Category c WITH (NOLOCK) 
JOIN ProductCategory PC With (NOLOCK) ON C.CategoryID = PC.CategoryID
JOIN @MyTable MT ON PC.ProductID=MT.ProductID
WHERE C.Published = 1
GROUP BY c.Name, c.SeName, c.CategoryID
ORDER BY c.Name 
```

我在其他 2 个网站上运行了相同的查询，它们工作得很好。站点之间的唯一区别是它们在不同的数据库上运行，与其他 2 个相比，慢速站点上的产品（54000 种产品）多一倍多。所有三个站点及其数据库都托管在同一台机器上.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-16T13:52:36.937

您可能遇到了参数嗅探的问题。

我建议阅读[应用程序中的慢，SSMS 中的快？](http://www.sommarskog.se/query-plan-mysteries.html)由 Erland Sommarskog 全面了解该问题（文章很长，但非常好）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-16T13:59:37.277

查看 sys.dm_exec_sessions 用于您的 ASP.Net 应用程序和 SSMS 会话。我会冒险猜测您的设置中至少有一个`SET`是不同的。这可能会促成不同的计划（最终这归因于参数嗅探），并且应用程序端通常会变得更糟。

有关更多详细信息，请参阅这些其他问题：

[从 Web 调用存储过程时速度慢，从 Management Studio 调用时速度快](https://stackoverflow.com/questions/6585417/stored-procedure-is-very-slow-only-when-called-from-web-but-fast-if-executed-di)

[过程在 ADO.NET 中超时，但在 SSMS 中没有](https://stackoverflow.com/questions/7096728/sproc-time-out-from-ado-net-but-not-in-ssms-on-a-specific-db)

[从 Web 执行时查询超时，但从 SSMS 执行时超快](https://stackoverflow.com/questions/2248112/sql-server-query-times-out-when-executed-from-web-but-super-fast-when-executed)

[ADO .NET 与 SQL Server Management Studio - ADO 性能更差](https://stackoverflow.com/questions/7273033/ado-net-vs-sql-server-management-studio-ado-performs-worse)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-08-13T14:15:15.780

我有同样的问题，在我的情况下它与 MARS 有关，所以我`MultipleActiveResultSets=True;`从连接字符串中删除，现在 SSMS 和 asp.net 的运行时间几乎相同（0.2s 与之前的 4.5s 相比）

> 注意：MARS = 多个活动结果集。如果在连接字符串上设置此属性，则可以以交错方式在同一连接上运行多个查询。它的主要目的是允许您在遍历结果集时提交 UPDATE 语句。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-17T17:31:09.700

同时执行以下步骤对我有用。

1.  尝试存储过程重新编译
2.  清除计划缓存
3.  更新数据库上的统计信息

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-25T10:44:03.257

不管它的价值是什么，我们偶尔会遇到同样的问题；可能一年一次。您可以花一周的时间阅读和消化其他答案中提到的所有精彩资源，或者您可以像我们一样做；停止并启动 SQL Server。

这是一种享受。

我们注意到这个问题通常发生在各种可能与手头问题没有直接关系的 schema/sp/view mods 之后。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-28T17:31:18.983

表变量和临时表在查询执行中有很大的不同

我不确定你为什么使用 table 变量你可以试试这个代码，看看是否能解决你的缓慢之谜

```
DECLARE @customerID INT
SET @customerID = @CustID

SELECT c.Name, c.SeName, c.CategoryID
FROM Category c WITH (NOLOCK) 
JOIN ProductCategory PC With (NOLOCK) ON C.CategoryID = PC.CategoryID
JOIN (SELECT P.ProductID FROM Product P WITH (NOLOCK)
        left join Compunix_ProductMMY cpmmy with (nolock) on p.ProductID = cpmmy.ProductID
        left join Compunix_CustomerMMY ccmmy with (nolock) on ccmmy.mmyid = cpmmy.mmyid
        WHERE P.Deleted=0 AND P.Published=1 and (ccmmy.customerid = @customerID OR cpmmy.productid IS NULL)
        ) MT ON PC.ProductID=MT.ProductID
WHERE C.Published = 1
GROUP BY c.Name, c.SeName, c.CategoryID
ORDER BY c.Name 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-13T22:44:41.583

你在使用任何 ORM 吗？如果您使用 NHibernate，您可以在 NHibernate 中启用数据库跟踪，看看可能是什么问题。以下是我在此类场景中观察到的一些场景：

1.  导致错误计划选择的隐式转换（`nvarchar`被使用而不是`varchar`）。您可以在其日志中观察 NHibernate 参数映射。
2.  缺乏索引。

NHibernate 使用 log4net，您只需要添加一个附加程序[，如此处所述](https://devio.wordpress.com/2010/04/14/logging-sql-statements-generated-by-nhibernate/)。

# ruby-on-rails - Rails file_field 助手不返回任何内容

> ID：10175429
> 
> 赞同：0
> 
> 时间：2012-04-16T13:50:58.523
> 
> 标签：ruby-on-rails, paperclip, attachment, simple-form

我正在使用简单表格。我有一个用于创建新项目的表单和一个用于编辑现有项目的表单。我还有每个项目的两个文件字段。让我烦恼的是，在创建新项目时文件字段显示得很好，但是在编辑现有项目时根本不会生成它们。

我在 Rails 3.0 中完美运行，现在在 Rails 3.2.1 上无法运行。

表格：

```
<%= simple_form_for @item, :html => { :multipart => true } do |f| %>
    <%= f.input :title, :input_html => { :maxlength => 35 } %>
    <%= f.input :description, :input_html => { :maxlength => 450 } %>
    <%= f.input :secure_details, :placeholder => "Serial numbers and other stuff that will remain private", :input_html => { :maxlength => 450 } %>
    <%= f.association :bookmark, :collection => current_user.bookmarks(:order => :position), :include_blank => false %>
    <%= f.input :warranty_until, :as => :string, :input_html => { :id =>'datepicker2' } %>
    <div class="image_attachment">
        <div class="attachment_text">
            Update item photo<br />
            <small>(will replace old one)</small>
        </div>
        <div class="attachment_button">
        <% f.fields_for :assets do |asset| %>
            <%= asset.file_field :photo %>
        <% end %>
        </div>
    </div>
    <div class="image_attachment">
        <div class="attachment_text">
            Update receipt<br />
            <small>(will replace old one)</small>
        </div>
        <div class="attachment_button">
        <% f.fields_for :receipts do |receipt| %>
            <%= receipt.file_field :photo %>
        <% end %>
        </div>
    </div>
    <%= f.input :public, :label => "My friends can see this item", :input_html => { :class => "right" } %>
    <%= f.input :giveaway, :label => "Mark as giveaway", :input_html => { :class => "right" } %>
    <div class="margin_r margin_t">
        <%= f.button :submit, :class => 'small_button white right' %>
    </div>

<% end %> 
```

基本上这部分代码不起作用：

```
<div class="attachment_button">
        <% f.fields_for :assets do |asset| %>
            <%= asset.file_field :photo %>
        <% end %>
</div> 
```

生成的 HTML 只是空的 div。

相同的代码在创建新项目时有效，但在编辑现有项目时无效。

Assets 和 Receipts 都使用 Paperclip 来存储图像。这是资产类的代码：

```
class Asset < ActiveRecord::Base
    belongs_to :item

    has_attached_file :photo, 
        :styles => {
            :thumb => "80x80#",  
            :small => "150x150>" }
    validates_attachment_size :photo, :less_than => 550.kilobytes
    validates_attachment_content_type :photo, :content_type => ['image/jpeg', 'image/png']

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:18:48.263

也许你忘了在你的 Item 模型中添加这行代码：

```
accepts_nested_attributes_for :receipts, :allow_destroy => true
accepts_nested_attributes_for :assets, :allow_destroy => true 
```

并添加'='：

```
<%= f.fields_for :assets do |asset| %>
    <%= asset.file_field :photo %>
<% end %>

<%= f.fields_for :receipts do |receipt| %>
    <%= receipt.file_field :photo %>
<% end %> 
```

# javascript - 这个正则表达式有什么作用，函数用它做什么？

> ID：10175430
> 
> 赞同：2
> 
> 时间：2012-04-16T13:50:58.873
> 
> 标签：javascript, jquery, regex, replace

我在一段客户端javascript中遇到了以下正则表达式：

```
([^?=&]+)(=([^&]*))? 
```

当我通过正则表达式测试器（firefox 插件）运行它时，我得到了以一种颜色突出显示的 url 的查询字符串的值，问号和 & 符号根本没有突出显示，其余的则以另一种颜色突出显示。

我不确定它是否匹配一种颜色或另一种颜色或两者，但后来我使用了替换选项，没有任何东西被替换。

这只是我的问题的开始。完整的代码是这样的：

```
var linkObj = new Object();
jQuery(this).attr('href').replace(
    new RegExp( "([^?=&]+)(=([^&]*))?", "g" ),
    function( jQuery0, jQuery1, jQuery2, jQuery3 ){
        linkObj[ jQuery1 ] = jQuery3;
    }
); 
```

函数中的这 4 个参数是`(jQuery0, jQuery1, jQuery2, jQuery3)`什么？

任何帮助，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:53:23.570

似乎分解了 URL 的 GET 部分。

```
([^?=&]+)      # 1 or more characters, exclusive of ?, = or &
(=             # = sign
  ([^&]*)        # any character not a &, 0 or more times
)?             # but optional 
```

这`function`是一个回调，replace 可以接受正则表达式调用。每个参数都是在正则表达式匹配中找到的不同值。然后该函数可以返回该`replace`方法应替换的结果）。所以，给定`?foo=bar`：

*   jQuery0 - 完全匹配
*   jQuery1 - 第一次捕获（例如`foo`）
*   jQuery2 - 第二次捕获 ( `=bar`)
*   jQuery3 - 第三个（嵌套）捕获（`bar`）

# c - Clang 链接器和 i686

> ID：10175432
> 
> 赞同：0
> 
> 时间：2012-04-16T13:50:59.897
> 
> 标签：c, ubuntu, clang

当我尝试使用 Clang 编译器编译 C 程序时，我收到此消息

```
/usr/bin/ld: i386:x86-64 architecture of input file `/usr/lib/gcc/i686-linux-gnu/4.6.1/../../../../lib/crt1.o' is incompatible with i386 output
/usr/bin/ld: i386:x86-64 architecture of input file `/usr/lib/gcc/i686-linux-gnu/4.6.1/../../../../lib/crti.o' is incompatible with i386 output
/usr/bin/ld: i386:x86-64 architecture of input file `/usr/lib/gcc/i686-linux-gnu/4.6.1/../../../../lib/crtn.o' is incompatible with i386 output
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我该如何解决这个问题？如果很重要：

```
$ uname -a
Linux asus 3.0.0-17-generic #30-Ubuntu SMP Thu Mar 8 17:34:21 UTC 2012 i686 i686 i386 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:17:01.573

您正在将 64 位库与 32 位库链接。这种混合会产生错误。您可以通过“objdump”命令检查 linux 中的体系结构，对于 Windows，您可以使用依赖项walker。我也面临同样的问题。如果您使用的是 linux，您应该使用 -m64 命令而不是 -m32 来修改它。-m64 命令用于构建 64 位库，-m32 命令用于构建 32 位库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:00:31.270

clang 编译器本质上是在告诉有问题的源代码正在使用 x86-64 处理器扩展（也称为 amd64 和“64 位处理器”），但您试图不{即仅使用也使用的 i386 架构（并扩展） i[456]86 }。这是 32 位处理器的默认设置。很可能，您下载了错误版本（64 位与预期的 32 位）您尝试编译的软件。

# matlab - MATLAB 日期编号太短 - 如何让 MATLAB 停止缩短我的序列日期编号

> ID：10175433
> 
> 赞同：0
> 
> 时间：2012-04-16T13:51:07.317
> 
> 标签：matlab, date, short

我需要从一组数据中提取日期`s`。

我使用`s(x).comm.date`可以为每个人更改 x 的命令，但是它返回的序列号`7.3244e+005`只是给了我一天，但我需要它来显示更多类似这样的细节`732162.65994213`。

我不知道我拥有的数据是否已经将其保存为速记格式，但它是来自麻省理工学院的一组数据，帮助文档将其显示为速记格式，所以我真诚地怀疑这一点。

您的，MATLAB 新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:53:21.840

尝试输入以下内容`help format`或`format long`（对于初学者）。

默认情况下，Matlab 显示 5 位有效数字（计算以适当的浮点精度完成，无论这些变量如何显示）。请参阅文档以了解不同的[显示](http://www.mathworks.ch/help/techdoc/ref/format.html)方式。

# opencv - 如何保存 Emgu `图像 内存流中的帧`作为JPEG？

> ID：10175441
> 
> 赞同：2
> 
> 时间：2012-04-16T13:51:47.553
> 
> 标签：opencv, computer-vision, emgucv, opencvdotnet

如何`Image<Bgr, Byte> frame`在内存流中将 Emgu 保存为 JPEG？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T06:04:34.263

您有两个选择，第一个是本机 EMGU images.save("filename"); 方法但是质量不是很好而且有损。最好的方法是使用下面的 c# 方法。

这是函数saveJpeg(SaveFile.FileName, img.ToBitmap(), 100);。基于方法 saveJpeg(string path, Bitmap img, long quality)。

```
using System.Drawing.Imaging;

private void saveJpeg(string path, Bitmap img, long quality)
{
    // Encoder parameter for image quality

    EncoderParameter qualityParam = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, quality);

    // Jpeg image codec
    ImageCodecInfo jpegCodec = this.getEncoderInfo("image/jpeg");

    if (jpegCodec == null)
    return;

    EncoderParameters encoderParams = new EncoderParameters(1);
    encoderParams.Param[0] = qualityParam;

    img.Save(path, jpegCodec, encoderParams);
}

private ImageCodecInfo getEncoderInfo(string mimeType)
{
    // Get image codecs for all image formats
    ImageCodecInfo[] codecs = ImageCodecInfo.GetImageEncoders();

    // Find the correct image codec
    for (int i = 0; i < codecs.Length; i++)
    if (codecs[i].MimeType == mimeType)
    return codecs[i];
    return null;
} 
```

希望这可以帮助，

干杯，

克里斯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T05:43:07.377

质量好、速度快的最快最脏的方法是：

C＃

```
yourImage.toBitmap().Save("filename.png"); 
```

VB

```
YourImage.ToBitmap().Save("filename.png") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T08:35:00.610

这里提到的所有方法都很好，但在这里我要分享另一种对我有用的快速而简短的方法。首先带上 Emgu.CV。**Image<,>**到 System.Drawing。**图像**然后使用**Save**方法将 JPEG 保存在 Memory Stream 中。

添加参考：

```
using System.Drawing.Imaging;
using System.IO;
using Emgu.CV; 
```

键入此代码：

```
MemoryStream MyMemoryStream = new MemoryStream();

Image MySystemImage = MyEmguImage.ToBitmap();
MySystemImage.Save(MyMemoryStream, ImageFormat.Jpeg); 
```

问候

# coldfusion - 在 CFC 中调用方法失败，但将其创建为对象工作正常

> ID：10175443
> 
> 赞同：2
> 
> 时间：2012-04-16T13:52:05.333
> 
> 标签：coldfusion, cfc

得到一些我无法解决的非常奇怪的东西。

我在 CFC (guest.cfc) 中有 3 种方法：

```
- save
- create
- update 
```

我将 argumentCollection 传递给 save 方法。

```
saveGuest = objGuest.save(argumentcollection=guestStruct) 
```

如果它包含一个 Identier，则将 argumentCollecion 传递给 update 方法，如果不包含，则将集合传递给 create 方法。

当从应用程序中的一个地方调用时，这工作正常，但是当我创建对 save 方法的新调用时，create 方法工作正常，但是如果在 update 方法中传递了一个 ID，我会收到一个错误，即 UPDATE变量不存在。

但是，如果我通过创建 cfc 的对象来改变我调用它的方式，它会起作用..

所以..

```
saveObject =  update(argumentCollection = arguments; 
```

不工作。收到更新变量不存在的错误。

```
saveObject =  createObject("component",'guest').update(argumentCollection = arguments); 
```

确实有效。

请注意，这两个调用都发生在 guest.cfc 本身内。

当我将表单结构传递给 save 方法时不会发生此问题，但当我将标准结构（从 XML 导入构造）传递给它时会发生。

很奇怪。

有人对可能导致这种情况的原因有任何想法吗？

* * *

编辑 4 月 24 日 - 为 guest.cfc 添加了代码

* * *

```
<cffunction name="save" output="false" access="remote" hint="save guest">
    <cfargument name="title" type="any" required="false" default="" />
    <cfargument name="first_name" type="any" required="false" default="" />
    <cfargument name="surname" type="any" required="false" default="" />
    <cfargument name="dob" type="any" required="false" default="NULL" />
    <cfargument name="partner_first_name" type="any" required="false" default="" />
    <cfargument name="partner_surname" type="any" required="false" default="" />
    <cfargument name="partner_dob" type="any" required="false" default="NULL" />
    <cfargument name="address_1" type="any" required="false" default="" />
    <cfargument name="address_2" type="any" required="false" default="" />
    <cfargument name="address_3" type="any" required="false" default="" />
    <cfargument name="city" type="any" required="false" default="" />
    <cfargument name="state" type="any" required="false" default="" />
    <cfargument name="postcode" type="any" required="false" default="" />
    <cfargument name="country" type="any" required="false" default="" />
    <cfargument name="phone_bh" type="any" required="false" default="" />
    <cfargument name="phone_ah" type="any" required="false" default="" />
    <cfargument name="phone_mob" type="any" required="false" default="" />
    <cfargument name="fax" type="any" required="false" default="" />
    <cfargument name="email" type="any" required="false" default="" />
    <cfargument name="business" type="any" required="false" default="" />
    <cfargument name="notes" type="any" required="false" default="" />
    <cfargument name="referer" type="any" required="false" default="" />
    <cfargument name="prospect" type="any" required="false" default="" />
    <cfargument name="occasion" type="any" required="false" default="" />
    <cfargument name="occasion_date" type="any" required="false" default="NULL" />

    <!---pass to Create or Save--->
    <cfif NOT isdefined("arguments.guest_id") OR arguments.guest_id EQ "0">
        <cfset saveObject =  create(argumentCollection = arguments) />
    <cfelse>
        <cfset saveObject =  update(argumentCollection = arguments) />
    </cfif>

    <cfreturn saveObject>

</cffunction>

<!---CREATE--->
<cffunction name="create" output="false" access="private" returntype="struct" hint="Create a New Item">
    <cfargument name="provider_id" type="any" required="false" default="#session.providerID#" />
    <cfargument name="ext_ref_id" type="any" required="false" default="NULL" />
    <cfargument name="tstamp" type="any" required="false" default="#session.tStamp#" />

    <cfif isValid('date',arguments.occasion_date)>
        <cfset iOccasionDate = createODBCDateTime(arguments.occasion_date)>
    <cfelse>
        <cfset iOccasionDate = "NULL">
    </cfif>

    <cfset returnStruct = StructNew()>

    <cfquery name="insertGuest" datasource="#Application.ds#">
        INSERT INTO guest (provider_id, ext_ref_id, title, first_name, surname, full_name, partner_first_name, partner_surname, partner_full_name, address_1, address_2, address_3, city, state, postcode, country, phone_bh, phone_ah, phone_mob, fax, email, company, notes, referer, prospect, occasion, occasion_date, tstamp)
        VALUES (#provider_id#, #ext_ref_id#, '#arguments.title#', '#arguments.first_name#', '#arguments.surname#', '#arguments.first_name# #arguments.surname#', '#arguments.partner_first_name#', '#arguments.partner_surname#', '#arguments.partner_first_name# #arguments.partner_surname#', '#arguments.address_1#', '#arguments.address_2#', '#arguments.address_3#', '#arguments.city#', '#arguments.state#', '#arguments.postcode#', '#arguments.country#', '#arguments.phone_bh#', '#arguments.phone_ah#', '#arguments.phone_mob#', '#arguments.fax#', '#arguments.email#', '#arguments.company#', '#arguments.notes#', '#arguments.referer#', '#arguments.prospect#', '#arguments.occasion#', #iOccasionDate#, #CreateODBCDateTime(tstamp)#)
    </cfquery>

    <cfquery name="guest" datasource="#Application.ds#">
        SELECT max(guest_id) as id
        FROM guest
        WHERE provider_id = #provider_id#
    </cfquery>

    <cfset returnStruct.id = #guest.id#>
    <cfreturn returnStruct>

</cffunction>

<!---UPDATE--->
<cffunction name="update" output="false" access="private" returntype="struct" hint="Update an existing item">

    <!---general details--->
    <cfquery name="update" datasource="#Application.ds#">
        UPDATE guest
        SET provider_id = provider_id

            <cfif isdefined("arguments.title")>
                ,title = '#arguments.title#'
            </cfif>
            <cfif isdefined("arguments.first_name")>
                ,first_name = '#arguments.first_name#'
            </cfif>
            <cfif isdefined("arguments.surname")>
                ,surname = '#arguments.surname#'
            </cfif>
            <cfif isdefined("arguments.full_name")>
                ,full_name = '#arguments.full_name#'
            </cfif>
            <cfif isdefined("arguments.dob")>
                ,dob = #formDate2odbcDate(arguments.dob)#
            </cfif>

            <cfif isdefined("arguments.partner_first_name")>
                ,partner_first_name = '#arguments.partner_first_name#'
            </cfif>
            <cfif isdefined("arguments.partner_surname")>
                ,partner_surname = '#arguments.partner_surname#'
            </cfif>
            <cfif isdefined("arguments.partner_full_name")>
                ,partner_full_name = '#arguments.partner_full_name#'
            </cfif>
            <cfif isdefined("arguments.partner_dob")>
                ,partner_dob = #formDate2odbcDate(arguments.partner_dob)#
            </cfif>

            <cfif isdefined("arguments.address_1")>
                ,address_1 = '#arguments.address_1#'
            </cfif>
            <cfif isdefined("arguments.address_2")>
                ,address_2 = '#arguments.address_2#'
            </cfif>
            <cfif isdefined("arguments.address_3")>
                ,address_3 = '#arguments.address_3#'
            </cfif>
            <cfif isdefined("arguments.city")>
                ,city = '#arguments.city#'
            </cfif>
            <cfif isdefined("arguments.state")>
                ,state = '#arguments.state#'
            </cfif>
            <cfif isdefined("arguments.postcode")>
                ,postcode = '#arguments.postcode#'
            </cfif>
            <cfif isdefined("arguments.country")>
                ,country = '#arguments.country#'
            </cfif>
            <cfif isdefined("arguments.phone_bh")>
                ,phone_bh = '#arguments.phone_bh#'
            </cfif>
            <cfif isdefined("arguments.phone_ah")>
                ,phone_ah = '#arguments.phone_ah#'
            </cfif>
            <cfif isdefined("arguments.phone_mob")>
                ,phone_mob = '#arguments.phone_mob#'
            </cfif>
            <cfif isdefined("arguments.fax")>
                ,fax = '#arguments.fax#'
            </cfif>
            <cfif isdefined("arguments.email")>
                ,email = '#arguments.email#'
            </cfif>
            <cfif isdefined("arguments.subscribe_email_broadcast")>
                ,subscribe_email_broadcast = '#arguments.subscribe_email_broadcast#'
            </cfif>
            <cfif isdefined("arguments.company")>
                ,company = '#arguments.company#'
            </cfif>
            <cfif isdefined("arguments.notes")>
                ,notes = '#arguments.notes#'
            </cfif>
            <cfif isdefined("arguments.prospect")>
                ,prospect = '#arguments.prospect#'
            </cfif>
            <cfif isdefined("arguments.occasion")>
                ,occasion = '#arguments.occasion#'
            </cfif>
            <cfif isdefined("arguments.occasion_date")>
                ,occasion_date = #formDate2odbcDate(arguments.occasion_date)#
            </cfif>

        WHERE guest_id = #arguments.guest_id#
    </cfquery>

    <cfset returnStruct = structNew()>
    <cfset returnStruct.id = arguments.guest_id>
    <cfreturn returnStruct>

</cffunction> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:28:39.983

如果没有 CFC 代码和调用代码的示例，要更精确有点困难，但是我倾向于建议您检查组件的 init()。你有一个 init() 方法，你在调用它吗？例如，组件定义的大纲

```
<cfcomponent>

    <cffunction name="init" access="public">
        <cfreturn this>
    </cffunction>

    <cffunction name="save" access="public">
        <!--- logic --->
    </cffunction>

    <cffunction name="create" access="public">
        <!--- logic --->
    </cffunction>

    <cffunction name="update" access="public">
        <!--- logic --->
    </cffunction>

</cfcomponent> 
```

这将由以下任一调用

```
<cfscript>
    // This will work in CF9 upwards
    objCFC = new guest(/* add any arguments you have in the init() method here */);
    objCFC.update(......);

    // This also works
    objCFC = CreateObject('component','guest').init(/* add any arguments you have in the init() method here */);
    objCFC.update(......);
</cfscript> 
```

**按照您的示例进行编辑**

那个CFC很讨厌。有各种明显的问题。

1.  您依赖于 CFC 内的应用程序/会话范围，从而迫使它依赖全局变量。这就是 init() 方法的用途，您可以`init(datasource, provider_id, ext_ref_id, tstamp)`将它们存储在`variables.`范围内，因此它将不再容易受到 CFC 之外未定义的变量的影响
2.  您正在使用大量的 VARCHAR 字段，没有任何转义，而 cfc 允许远程访问。这很容易受到 SQL 注入的影响。Bobby Tables 先生可以告诉你为什么这很糟糕（[http://bobby-tables.com/](http://bobby-tables.com/)）
3.  您继续使用字符串值 NULL。如果将其传递到 varchar/quotes 内的数据库中，则它将存储为“NULL”而不是数据库 NULL 值

总而言之，最好的做法是重写这个组件。任何使用该组件的代码更改都将是最小的，以至于必须添加 init() 并且可能会删除一些参数，但是您会发现它的稳定性得到了改善，并且一切顺利，这个奇怪的问题将消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:54:05.163

在 CF 中，当您在函数内部编写类似的内容时`<cfset iOccasionDate = ... >`，您正在该 CFC/模板的**全局**变量范围内`<cfquery name="insertGuest" ...>`创建这些内容。

 **您需要编写`<cfset var iOccasionDate = ... >`或`<cfset local.iOccasionDate = ... >`或`<cfquery name="local.insertGuest" ...>`以确保它们是在函数的**局部**变量范围内创建的，并且不要覆盖其他变量。

你的具体问题是因为你有这个：

```
<cfquery name="update" datasource="#Application.ds#"> 
```

因此，您正在使用更新查询覆盖您的更新功能。

需要注意的一些快速事项：

*   本地作用域适用于 CF9 及更高版本。如果您在 CF8 或以下，则需要通过`<cfset var local = StructNew() />`在函数顶部编写来模仿它。

*   如果您使用[Railo](http://www.getrailo.org/)或[OpenBD](http://www.openbluedragon.org/)，则有一些设置可以将默认行为更改为始终在本地范围内创建（这避免了对 var/local 范围的需要），但 ACF 没有此选项（还没有？）

*   **使用 cfqueryparam！**- 西蒙已经提到了这一点，但它的重要性足以重复。您应该*始终*根据数据的使用位置来处理数据——以防止有意和意外的注入攻击——对于 cfquery，这意味着使用 cfqueryparam。**

# javascript - 从下拉表单中加载页面

> ID：10175445
> 
> 赞同：21
> 
> 时间：2012-04-16T13:52:10.040
> 
> 标签：javascript, html, forms, input

我正在尝试制作一个下拉菜单，将我带到各种网页。现在它已设置好，因此您可以进行选择，然后点击“开始”按钮，然后它会将您带到相应的链接。我正在尝试弄清楚如何制作它，因此当您进行选择时，它会自动进行，您无需按下“开始”按钮。

这是我所拥有的：

```
<p align="center">
<form name="jump" class="center">
<select name="menu">
<option value="#">Select an option</option>
<option value="/link1.shtml">Link 1</option>
<option value="/link2.shtml">Link 2</option>
<option value="/link3.shtml">Link 3</option>
</select>
<input type="button" onClick="location=document.jump.menu.options[document.jump.menu.selectedIndex].value;" value="GO">
</form>
</p> 
```

任何帮助或解释链接都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-16T13:59:26.350

尝试以下操作：

```
<select onchange="location = this.options[this.selectedIndex].value;">
    <option>Please select</option>
    <option value="http://www.apple.com/">Apple</option>
    <option value="http://www.bbc.com">BBC</option>
    <option value="http://www.facebook.com">Facebook</option>
</select>​ 
```

您正在寻找的是“onchange”而不是“onsubmit”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:59:12.507

查看[jQuery .change()](http://api.jquery.com/change/)

```
<script>
   $('select.menu').change(function(e){
      // this function runs when a user selects an option from a <select> element
      window.location.href = $("select.menu option:selected").attr('value');
   });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:00:52.643

这样的事情可能会有所帮助 - 基本上你只需将 onChange 事件绑定到选择，以便在选择新选项时它将位置转发到页面。

```
<p align="center">
<form name="jump" class="center">
<select name="menu" onchange="gotoPage(this)">
<option value="#">Select an option</option>
<option value="/link1.shtml">Link 1</option>
<option value="/link2.shtml">Link 2</option>
<option value="/link3.shtml">Link 3</option>
</select>
<input type="button" onClick="location=document.jump.menu.options[document.jump.menu.selectedIndex].value;" value="GO">
</form>
</p>

<script type="text/javascript">
function gotoPage(select){
    window.location = select.value;
}
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T14:01:43.057

我建议您开始使用 javascript 框架[jQuery](http://jquery.org)，因为当涉及到 javascript 时，它确实会让您的生活变得更加轻松。

当您在网页中安装和设置 jQuery 后，您应该能够执行以下操作：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#selection").change(function() {
            location = $("#selection option:selected").val();
        });
    });
</script>

<p align="center">
    <form name="jump" class="center">
        <select name="menu" id="selection>
            <option value="#">Select an option</option>
            <option value="/link1.shtml">Link 1</option>
            <option value="/link2.shtml">Link 2</option>
            <option value="/link3.shtml">Link 3</option>
        </select>
    </form>
</p> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-02T15:51:53.637

显然在这里聚会很晚，但是由于我试图弄清楚同样的事情并且能够做到，所以我会在这里发布。

其他答案让您在更改选择元素选项时加载链接，但您最初要求在做出选择后使用按钮进行操作。这对我有用：

```
<script type="text/javascript">
    $(document).ready(function() {
        var newUrl = "";
        $("#picksite").change(function() {
            $newUrl = $("#picksite option:selected").val();
        });
        $("#executelink").click(function() {
            location = $newUrl ;
        });
    });
</script>

<select id="picksite">
    <option value="">Pick A Website</option>
    <option value="http://google.com">Google</option>
    <option value="http://facebook.com">Facebook</option>
    <option value="http://twitter.com">Twitter</option>
    <option value="http://gmail.com">Gmail</option>
</select>

<button id="executelink">Go To Site</button>
```

# php - MySQL：如果唯一字段已与 INSERT INTO 一起使用，如何执行操作

> ID：10175448
> 
> 赞同：0
> 
> 时间：2012-04-16T13:52:13.530
> 
> 标签：php, mysql, database, insert, unique

我正在使用 MySQL 语句 INSERT INTO 将数据插入到我的表中。我有几个独特的字段，例如用户名和电子邮件。我想插入数据，但是如果已经使用了一个唯一字段（比如有人试图使用已经存在的用户名），我想执行一个操作。

说重定向页面，或设置会话。目前我的代码就像它插入一样，但显然什么都不做，因为该字段是唯一的。我已经尝试了下面的代码，但我没有运气。

```
// Add the data to the table 'users'
mysql_query("INSERT INTO users
(username, password, email, dob, gender) VALUES('$username', '$cleansedPassword', '$email', '$dob', '$gender') ")
or header( 'Location: index.php' ) ;

header( 'Location:  SignUp.php' ) ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:57:02.457

好吧，我还没有从 mysql 返回错误，但如果 mysql 查询不正确，它将返回错误....您可以使用它来检查它是否实际添加或返回错误，如果出现错误 - 您可以相应地重定向- 它将需要 2 个以上的语句，而不仅仅是一个行语句。但据我所知，这是正确的方式

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T13:54:11.523

mysql_affected_rows — 获取先前 MySQL 操作中受影响的行数

如果受影响的行数为零，则您知道插入语句不起作用。

```
mysql_query("INSERT INTO users
(username, password, email, dob, gender) VALUES('$username', '$cleansedPassword', '$email', '$dob', '$gender')");

if(mysql_affected_rows() == 0){
     header( 'Location: index.php' )
}else{
     header( 'Location:  SignUp.php' )
} 
```

# clearcase - 如何使用 RTC 源代码控制模拟多开发人员场景

> ID：10175452
> 
> 赞同：2
> 
> 时间：2012-04-16T13:52:19.037
> 
> 标签：clearcase, rtc

是否可以使用 RTC 源代码控制模拟多开发人员场景，这样当我进行代码更改时，我可以测试接受更改集。这只是为了让我可以测试一个多开发人员环境，但只使用一个用户。

我尝试创建多个 Eclipse 工作区，并将相同的项目区域加载到每个 Eclipse 工作区中。使用这种方法，我无法接受更改集，因为 RTC 源代码控制只会在我对工作 Eclipse 工作区进行更改后要求我重新同步我的工作区： ![在此处输入图像描述](../Images/2b6a6ee70db2998c17d99e1495da89e9.png)

似乎接受传入更改的唯一方法是 1\. 在“待更改”视图中右键单击流 2\. 选择加载 3\. 选择以下选项： ![在此处输入图像描述](../Images/7e7509ba0f9226ecd9dbf37db6c3ee86.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:58:48.177

确保您使用 Stream（即确保您不直接交付到模拟另一个用户的另一个 repo 工作区）

[（注意：这在 ClearCase 中完全不同，在UCM 视图的配置和 rebase 之后的 Stream 配置之间](https://stackoverflow.com/questions/9948832/synchronize-with-stream-clear-case-integration-view/9949209#9949209)可能发生“不同步” ）

如果您创建不同的 repo 工作区（加载在不同的 Eclipse 工作区中），在同一个 Eclipse 实例中使用时可能会导致一些混乱。

正如在[这个线程中所说](https://jazz.net/forums/viewtopic.php?p=66196&sid=9311de1944402ffb3cf0e5b2c2fa6217)

> 存储库工作区旨在隔离更改 - 作为您的私有流。
> 不会自动接受更改，因此您可以完全控制流入的内容。您还可以在它们上运行私有构建。这就是整个想法。
> 
> 如果您想使用共享代码运行多个存储库工作区，我认为您应该使用 Stream。
> 干净的 repo 工作区将用于接受您决定交付给流的更改。
> 因此，您正在尝试将存储库工作区用作流。虽然它们几乎相同，但我不确定它们会如何对交付给它们的更改做出反应。尤其是在加载时。
> 
> 您应该使用两个 Eclipse 实例。我担心在同一个沙箱和同一个 Eclipse 中多次加载相同的 Eclipse 项目

在同一个线程中解释了“混乱”：

> 这是预期的行为。
> 当您通过交付更改 WS1 时，您已加载到磁盘的`WS1`内容不会更新。所以你必须重新加载。
> 出于这个原因，您不能交付到其他用户的工作区。您无法更改某人的工作区，但您可以更改自己的工作区，因为您会知道它为什么不同步。

查看“ [Rational Team Concert Source Control 用户的良好实践和关键工作流程](https://jazz.net/blog/index.php/2011/09/21/good-practices-and-key-workflows-for-rational-team-concert-source-control-users/)”的第 7 点和第 10 点。

* * *

注意：文章“ [Loading Content from a Jazz Source Control Repository in Rational Team Concert 2.0](https://jazz.net/library/article/192/) ”（也适用于 RTC3.0）在“Reloading [Out-of-sync Sh​​ared Folders](https://jazz.net/library/article/192/#LoadOutOfSync) ”一节中提到了与操作：

> 由于以下几个原因，本地工作区可能与远程工作区不同步：
> 
> *   远程工作区被多次加载，并且更改已从另一个客户端会话签入或接受。
> *   在修改本地和远程工作空间的操作（例如接受）期间遇到错误。
> 
> 当本地工作空间与 RTC 1.0 中的远程工作空间不同步时，用户被迫运行加载向导并重新选择需要重新加载的文件夹。
> 在 RTC 2.0 中，这个新选项将自动选择不同步的文件夹并重新加载它们，这样它们就不再不同步了。
> RTC 2.0 中的另一个新功能是在 Pending Changes 视图中指示有项目不同步，如下所示。

![不同步的 RTC 项目](../Images/c4f3567bea01e6657603db39509029f6.png)

> 单击**`Reload out of sync link in the Pending Changes`**视图将打开加载向导。

![加载存储库工作区对话框](../Images/fabc13a27e318b2a10e99f020a623140.png)

> 默认情况下将选择重新加载选项，然后单击下一步将允许您选择要重新加载的文件夹。
> 正如您在以下屏幕截图中看到的那样，Foundation 组件中的所有项目都不同步，需要重新加载。
> 单击`Finish`将重新加载这些文件夹并使它们恢复同步。

![要重新加载的项目](../Images/7c3424296a0006139a97ce9b0f7959b5.png)

此外，线程“[如何处理不同步的项目](https://jazz.net/forums/viewtopic.php?p=69532&sid=3473aaec2b05869cf9f61650f5a5c411)”提供了该机制的有趣说明（即使它不*完全是*您的情况）。

# java - JNLP 应该使用特定的 Java 版本但错误结果

> ID：10175453
> 
> 赞同：6
> 
> 时间：2012-04-16T13:52:34.733
> 
> 标签：java, jnlp, java-web-start

我在这里面临一个问题。我想使用一个特殊版本来运行我们的 java webstart 应用程序，但只用于一个 jnlp。（“它已经过测试，......blabla我们不能使用新版本......blabla”随机风袋）

所以我尝试像这样配置我们的 JNLP：

```
<resources>
    <j2se version="1.6.0_29" href="http://java.oracle.com/products/autodl/j2se"/>
    ...
</resources> 
```

当我现在启动这个 jnlp 时，即使安装了正确的 Java，我也会收到以下错误：

> **错误：**应用程序请求了当前未在本地安装的 JRE 版本（版本 1.6.0_29）。Java Web Start 无法自动下载和安装请求的版本。此 JRE 必须手动安装。

**更新**

在[JNLP 文件语法](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/syntax.html)中，允许使用特定的 Java 版本，例如**1.6.0_29**。我什至用**1.6.0_29-b11**尝试过- 仍然是同样的错误。

> 还可以指定确切的产品版本（实施版本）。通过包含 href 属性。例如，Sun Microsystems, Inc. 的 1.3.1_07、1.4.2 或 1.5.0-beta2。例如，
> 
> <j2se 版本="1.4.2" href="http://java.sun.com/products/autodl/j2se"/>
> 
> 或者
> 
> <j2se 版本="1.4.2_04" href="http://java.sun.com/products/autodl/j2se"/>

**编辑**

给定的答案没有帮助，也不是正确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:43:37.520

我已经安装了 Java 1.6.0_21，它是在 Java 控制面板中启用的。但是，我收到了与问题中所述相同的错误消息：“应用程序已请求当前未在本地安装的 JRE 版本（版本 1.6.0_29）”

即使我尝试在 JNLP 中使用不同的行，我也会收到此消息，例如：

```
<j2se version="1.6.0_29"/> 
```

或者

```
<j2se version="1.6.0_29-b06"/> 
```

我通过使用以下行编辑 JNLP 文件解决了这个问题：

```
<j2se version="1.6"/> 
```

因此，文档行“也可以指定确切的产品版本（实施版本）”似乎是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T11:14:52.257

这很常见。确保每台客户端机器都为 JNLP/Webstart 启用了 1.6.0_29。

安装 1.6.0_29 不一定足以告诉 webstart 它可用。有关更多信息，请参阅[此帖子](http://pscode.org/jws/version.html#enable)

![Webstart 设置](../Images/a2674c47191b5073ea442bd379d98396.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:23:16.877

你使用：

```
jnlp spec="1.0+" 
```

如果是这样，您应该尝试：

```
jnlp spec="6.0+" 
```

我找到了这个[链接](http://publib.boulder.ibm.com/infocenter/director/v6r1x/index.jsp?topic=/director.tbs_6.1/fqm0_r_tbs_lic_unable_to_launch_the_application.html)，也许你的浏览器/JRE 的配置有问题，或者你在代理下？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T17:35:04.427

**从 java.sun.com 自动下载软件**

试试这个网址

j2se 版本="1.6.0_05+" href="http://java.sun.com/products/autodl/j2se"/>

如果客户端计算机上安装了更高版本，则将使用最新版本。

或者

j2se 版本="1.6.0_05" href="http://java.sun.com/products/autodl/j2se"/>

然后您将被提示准确安装 1.6.0_05。

调用 ?.jnlp 时将使用 1.6.0_05 版本。

当心; 以上仅在安装了更高版本时才有效，例如 1.6.0_29 运行 1.6.0_05 作为孩子。

在 Java 控制台中，您将看到：

```
JavaPlug-in 1.6.0_31
Using JRE-Version 1.6.0_05 Java Hot Spot(TM) Client VM 
```

如果您确实要下载“当前可用于自动下载的软件包”中未列出的版本，则只有当您的**版本高于 1.6.0_29**（可能是 1.6.0_31）时**，您才能****下载指定的版本 1.6.0_29**在客户端浏览器中**启用插件。**测试安装 1.6.0_31 并查看是否为示例：Firefox 插件 1.6.0_31 是否存在并已启用。然后客户端将能够通过 *.jnlp 自动下载和安装 1.6.0_29。

 ****在客户端浏览器中调用您的应用程序。出现警告：“安装较低版本 1.6.0_29”和“证书警告”单击是。安装 1.6.0_29 开始。

下载后浏览器重启，插件 1.6.0_31 不见了！！！因此，浏览器重定向到 Oracle 下载端，您必须再次安装 1.6.0_31。下载开始到您指定的文件夹。运行启动更新的文件“jxpinstall.exe”；提示再次安装问题；是（必须关闭所有浏览器）安装开始；看看额外的插件，1.6.0_31 插件又回来了。现在您可以将 *.jnlp 应用程序与 1.6.0_29 一起使用。真的很多工作:-)

**注意：**您将无法使用“jdk-6u31-windows-i586.exe”之类的文件再次安装浏览器插件。您必须按照上述步骤操作。您将得到一个正确的文件“jxpinstall.exe”。

* * *

java.sun.com 自动下载功能简化了 Java Web Start 部署，因为它使常用软件可以随时与 Java Web Start 一起使用。通常，只需将额外的一行添加到 JNLP 文件即可利用此功能。...

**当前可自动下载的软件包有：**

```
Java 2 Runtime Environment 1.3.0_02 for Windows/i586, Linux/i586, and Solaris/SPARC
.....
Java 2 Runtime Environment 1.4.2_16 for Windows/i586, Linux/i586, and Solaris/SPARC
Java Runtime Environment 1.5.0_02 for Windows/i586, Linux/i586, and Solaris/SPARC
.....    
Java Runtime Environment 1.5.0_14 for Windows/i586, Linux/i586, and Solaris/SPARC
Java Runtime Environment 1.6.0 for Windows/i586, Linux/i586, and Solaris/SPARC
Java Runtime Environment 1.6.0_04 for Windows/i586, Linux/i586, and Solaris/SPARC
Java Runtime Environment 1.6.0_05 for Windows/i586, Linux/i586, and Solaris/SPARC 
```

[可用的包看这里](http://java.sun.com/javase/technologies/desktop/javawebstart/overview.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T12:20:58.053

**疑难解答：**

*   检查当前分配给 IDE 项目构建路径的版本
*   确保`j2se version="1.6.0_29"`在客户端机器上安装了指定的版本。
*   检查您的机器，看看您当前是否没有安装任何其他可能导致依赖冲突的版本。
*   检查您的类路径设置以查看当前默认设置的版本。这可能是正确的版本吗？

**另请注意：**

> j2se 元素指定支持应用程序的 Java 2 SE 运行时环境 (JRE) 版本，以及 Java 虚拟机的标准参数。

因此，如果您希望将应用程序发布到某些特定版本，则应列出所有支持的版本。例子：

```
 <j2se version="1.3" initial-heap-size="64m"/>
   <j2se version="1.4+"/> 
```

在您的情况下，您指定了`href`强制 Java Web Start 不将已安装的非 FCS（即里程碑）JRE 视为匹配项的属性。

> 按照惯例，如果版本字符串中有破折号 (-)，则为非 FCS（里程碑）JRE。因此不会将已安装的 1.4.1-ea 或 1.4.2-beta JRE 视为请求的匹配项。

已编辑。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-02T19:37:42.487

它是该死的 java 版本，使用较低版本可以解决问题。我使用 Java 1.8.0_05-b13 Java HotSpot(TM) 64-Bit Server VM 并成功通过。****

# php - 使用 db 删除 CodeIgniter 不起作用

> ID：10175454
> 
> 赞同：0
> 
> 时间：2012-04-16T13:52:35.370
> 
> 标签：php, codeigniter

我正在做一个ajax调用..它不输出任何mysql错误..基本上，我正在尝试删除两条记录......

```
 public function task_delete($task_id)
     {
            $this->load->database();
            $this->db->delete('task_pages', array('id' => $task_id));
            $this->db->delete('tasks', array('id' => $task_id));

       } 
```

这是模型。。

这是控制器..

```
class Ajax extends CI_Controller {

       public function delete()
      {
          $this->load->database();
          $this->load->model('tasks_model','task_delete');
          $result=$this->task_delete-> task_delete($this->input->post('myId'));
          echo $result;
      }

} 
```

我的代码在哪里失败？

更新：我收到一个错误..方法 deleteTask 正在调用无对象

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T13:56:28.840

假设您的模型也称为 task_delete 并且您要调用的函数是 deleteTask，那么您给模型中的函数指定了错误的名称，它应该声明为：

```
public function deleteTask($task_id) 
```

# jquery - Rails - best_in_place jQuery 冲突

> ID：10175457
> 
> 赞同：0
> 
> 时间：2012-04-16T13:52:43.687
> 
> 标签：jquery, ruby-on-rails, gem, best-in-place

好吧，我真的把头发拉出来了！我正在使用 gem [best_in_place](https://github.com/bernat/best_in_place)。但是我总是和jQuery发生冲突，我不知道问题是什么。

> 未捕获的类型错误：`'$'`对象`[object DOMWindow]`的属性不是函数

我可以确认首先加载了 jQuery，然后是 best_in_place.js。

**|| 解决方案 ||**

但不是正确的解决方案。

将每个 $-sign 转换为 'jQuery'

# macos - 我们可以在 XCode 中将“-fno-jump-tables”设置为“Other Cflags”吗？

> ID：10175459
> 
> 赞同：0
> 
> 时间：2012-04-16T13:52:48.917
> 
> 标签：macos, osx-snow-leopard

有没有办法在 XCode 中将“-fno-jump-tables”设置为“Other Cflags”。我尝试设置它，但它给出了编译错误。错误内容类似于“i686-apple-darwin10-gcc-4.2.1: fno-jump-tables: No such file or directory”。

我正在使用 gcc 4.2 版。Mac OS X 10.6.8。Xcode 版本是 3.2.6。

问候， 维什韦什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:31:49.313

从命令行对我来说效果很好。

```
gcc -fno-jump-tables foo.c 
```

从错误来看，前导似乎`-`丢失`fno-jump-tables`并被视为文件。我假设您正在`-fno-jump-tables`输入“其他 C 标志”，而不仅仅是`fno-jump-tables`

# memory - 如何计算计算机体系结构中的物理地址？

> ID：10175460
> 
> 赞同：0
> 
> 时间：2012-04-16T13:52:56.680
> 
> 标签：memory, computer-architecture

我无法理解如何计算物理内存地址。两个 16 位寄存器如何组合在一起生成 20 位地址？机制是什么？看看我们有一段由最大 64K 组成的内存吗？正确的？在那个特定的部分发生了什么？寄存器如何计算物理地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T21:18:18.263

您似乎在询问有关在旧的 16 位 x86 系统上计算地址的问题。可行的方法是您获取段寄存器并将其向上移动四（即乘以 16），然后将其添加到寄存器中。所以，如果 CS 是 0x1111 而 AX 是 0x1111，那么物理地址就是 0x12221。

# c# - 在 Word 中更改文本背景颜色

> ID：10175463
> 
> 赞同：6
> 
> 时间：2012-04-16T13:53:06.243
> 
> 标签：c#, office-interop, word-2007, office-addins

情况：

*   .net 3.5
*   c# 或 vb.net（也测试过）
*   word 2007 插件

我正在尝试将文本的背景颜色设置为自定义 rgb 颜色。

代码如下：

```
Range r = this.Application.ActiveDocument.Range();
r.Text = "blabla";
r.Font.Shading.BackgroundPatternColor =(WdColor) Color.FromArgb(0, 214, 227,188).ToArgb(); 
```

起初它似乎工作，除了颜色不正确。似乎每当我设置自定义颜色时，它都会将其更改为现有的 WdColor 常量。看看[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.shading.backgroundpatterncolor.aspx)，它说：

> 返回或设置应用于 Shading 对象背景的 24 位颜色。可以是任何有效的 WdColor 常量或 Visual Basic 的 RGB 函数返回的值。

所以，我的问题是：有人知道它应该如何工作吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T11:55:59.973

使用[颜色转换器](http://msdn.microsoft.com/en-us/library/yzwa1ke2.aspx)

```
Range r = this.Application.ActiveDocument.Range();
r.Text = "blabla";
r.Font.Shading.BackgroundPatternColor =(WdColor)ColorTranslator.ToOle(0, 214, 227,188); 
```

# javascript - 将 Unicode 转换回 JavaScript 转义

> ID：10175471
> 
> 赞同：-1
> 
> 时间：2012-04-16T13:53:24.707
> 
> 标签：javascript

假设我们通过`\u001B\u001A\u0019\u0018\u0017\u001E`了，它应该返回阿拉伯字符。

[这](http://www.rishida.net/tools/conversion/)是一个工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:57:41.523

只需将字符串评估为字符串文字：

```
var decoded = eval('"' + str + '"') 
```

# mysql - Mysql：允许对其他无法访问的列进行查询？

> ID：10175472
> 
> 赞同：5
> 
> 时间：2012-04-16T13:53:30.673
> 
> 标签：mysql, sql

我有一个表格，其中有一列我想阻止某些用户看到。我知道我应该能够使用视图来执行此操作，即有一个排除特定列的视图，并拒绝访问表但允许访问视图（注意，用户不需要能够更新表/看法）。

但是，我*确实*希望允许对该字段进行相等查询。如：

```
SELECT * FROM some_table_or_view WHERE hidden_field = 'some_value'; 
```

澄清：

*   不可能`hidden_field`在一般查询中返回值
*   `hidden_field`应该可以在值上运行带有约束（最好只有等式约束）的查询

这可能吗？

（编辑：如果在 Mysql 以外的 dbms 中有解决方案，我也很高兴听到这个消息）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:02:57.660

您可以创建一个存储过程，该过程将返回您允许它返回的所有字段，然后您可以将 hidden_​​value（过滤条件）作为参数传递。

禁止您的数据库用户访问该表，但允许他们调用存储过程。

当然，如果您对表有多种类型的查询，您将不得不创建多个存储过程。但至少它解决了你的权利问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:59:54.330

不它不是。为用户提供使用 hidden_​​value 列过滤结果的可能性意味着他们具有选择权限，这也意味着他们可以看到该列并因此选择它。这里[http://dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/grant.html) 是您可以授予或不授予 mySQL 中的用户的权限的列表。

# php - preg_match：如果有 html 实体怎么办？

> ID：10175478
> 
> 赞同：1
> 
> 时间：2012-04-16T13:53:46.370
> 
> 标签：php, regex

我得到了这个功能：

```
preg_match("/öppet/iu", $string); 
```

如果将“ö”写成 html 实体会怎样？像这样：`&ouml;`或者`&Ouml;` 有没有办法找到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:56:48.300

当然，只需在匹配之前[解码 HTML 实体：](http://php.net/html_entity_decode)

```
preg_match("/öppet/iu", html_entity_decode($string)); 
```

这对其他角色也有好处，例如，如果你想`ä`在将来的某个时候也匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:57:28.723

你可以这样做：

```
preg_match("/(?:ö|&ouml;)ppet/iu", $string); 
```

`?:`防止匹配被捕获以节省内存，是“`|`或”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T00:29:48.013

如果您使用低于 5.4.0 的 PHP 版本，则必须指定使用 UTF-8 编码：

```
preg_match("/öppet/iu", html_entity_decode($string, ENT_COMPAT, 'UTF-8')); 
```

希望这会有所帮助。

# ruby - 带有开放uri和循环的Ruby EOFError

> ID：10175481
> 
> 赞同：0
> 
> 时间：2012-04-16T13:54:00.200
> 
> 标签：ruby, parsing, webpage, open-uri, eoferror

我正在尝试构建一个网络爬虫，但遇到了一些障碍。基本上我正在做的是从网页中提取链接并将每个链接推送到队列中。每当 Ruby 解释器遇到这部分代码时：

```
links.each do |link|
  url_frontier.push(link)
end 
```

我收到以下错误：

```
/home/blah/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/protocol.rb:141:in `read_nonblock': end of file reached (EOFError) 
```

如果我注释掉上面的代码块，我不会收到任何错误。请，任何帮助将不胜感激。这是其余的代码：

```
require 'open-uri'
require 'net/http'
require 'uri'

class WebCrawler
  def self.Spider(root)
    eNDCHARS = %{.,'?!:;}
    num_documents = 0
    token_list = []
    url_repository = Hash.new
    url_frontier = Queue.new

    url_frontier.push(root.to_s)
    while !url_frontier.empty? && num_documents < 10
    url = url_frontier.pop
      if !url_repository.has_key?(url)
        document = open(url)
        html = document.read

        # extract url's
        links = URI.extract(html, ['http']).collect { |u| eNDCHARS.index(u[-1]) ? u.chop : u }

        links.each do |link|
          url_frontier.push(link)
        end

        # tokenize
        Tokenizer.tokenize(document).each do |word|
          token_list.push(IndexStructures::Term.new(word, url))
        end

        # add to the repository
        url_repository[url] = true
        num_documents += 1
      end
    end

    # sort by term (primary) and document id (secondary) in reverse to aid in the    construction of the inverted index
    return num_documents, token_list.sort_by! { |term| [term.term, term.document_id]}.reverse!
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T20:01:42.847

我遇到了同样的错误，但使用 Watir-webdriver，在无头模式下运行 firefox。我发现，如果我并行运行两个应用程序并在其中一个应用程序中破坏“无头”应用程序，它会自动杀死另一个应用程序以及您引用的确切错误。尽管我的情况与您的情况不同，但我认为该问题与在您的应用程序仍在使用它时过早地从外部关闭文件句柄有关。我从我的应用程序中删除了 destroy 命令，错误消失了。

希望这可以帮助。

# ruby-on-rails - rbenv 捆绑安装错误

> ID：10175487
> 
> 赞同：0
> 
> 时间：2012-04-16T13:54:12.123
> 
> 标签：ruby-on-rails, bundler, rbenv

根据我的一位 Rubyist 朋友的建议，我一直在研究 Ruby on [Rails 3 教程](http://ruby.railstutorial.org/)，最近从 RVM 切换到 rbenv。

不幸的是，现在当我创建一个新项目然后尝试`$ bundle install`我得到这个错误：

```
/Users/alexanderdiner/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/dsl.rb:7:in `instance_eval': /Users/alexanderdiner/rails_projects/sample_app/Gemfile:1: syntax error, unexpected tIDENTIFIER, expecting $end
gem 'sqlite...3.2.3'ygems.org' 
...                               ^ (SyntaxError) 
```

我已经阅读了一些 rbenv 文档等，但仍在努力在这里找到问题。作为参考，gemfile如下：

```
source 'http://rubygems.org'
gem 'rails', '3.2.3'
gem 'sqlite3'
gem 'gravatar_image_tag', '0.1.0'
gem 'will_paginate', '3.0.pre2'
group :development do
  gem 'rspec-rails', '2.0.1' 
  gem 'annotate-models', '1.0.4' 
  gem 'faker', '0.3.1'
end
group :test do
 gem 'rspec', '2.0.1'
 gem 'webrat', '0.7.1'
 gem 'spork', '0.8.4'
 gem 'factory_girl_rails', '1.0'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:25:08.470

改变：

```
group :development do
  gem 'rspec-rails', '2.0.1' gem 'annotate-models', '1.0.4' gem 'faker', '0.3.1'
end 
```

至

```
group :development do
  gem 'rspec-rails', '2.0.1' 
  gem 'annotate-models', '1.0.4'
  gem 'faker', '0.3.1'
end 
```

应该够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:19:39.723

您的 Gemfile 中可能有一个不可打印的字符。重命名它，然后使用您在问题中发布的内容创建一个新的。

# cuda - 具有 100% MP 负载的 CUDA 中的最大值（每块共享内存）/（每块线程）

> ID：10175489
> 
> 赞同：1
> 
> 时间：2012-04-16T13:54:14.793
> 
> 标签：cuda, gpgpu, gpu-shared-memory

我正在尝试使用 CUDA 2.0 (NVIDIA 590) 处理大型结构数组。我想为此使用共享内存。我已经尝试使用 CUDA 占用计算器，尝试为每个线程分配最大共享内存，以便每个线程可以处理数组的整个元素。然而，我在计算器中看到的（每块共享内存）/（每块线程）的最大值为 32 字节，100% 多处理器负载是 32 字节，这对于单个元素（数量级）来说是不够的。32 字节是（每块共享内存）/（每块线程）的最大可能值吗？是否可以说哪个alternative4native更可取-在全局内存中分配部分数组还是仅使用负载不足的多处理器？还是只能通过实验来决定？我可以看到的另一种选择是多次处理数组，但它看起来像是最后的手段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T14:31:48.627

在设计 CUDA 内核时，您需要牢记许多硬件限制。以下是您需要考虑的一些限制条件：

*   您可以在单个块中运行的最大线程数
*   一次可以在流式多处理器上加载的最大块数
*   每个流式多处理器的最大寄存器数
*   每个流式多处理器的最大共享内存量

您首先达到的这些限制中的哪一个都会成为限制您的占用率的约束（您所说的“100% 多处理器负载”是指最大占用率吗？）。一旦达到一定的入住率阈值，关注入住率就变得不那么重要了。例如，33%的占用并不意味着你只能达到GPU最大理论性能的33%。Vasily Volkov 在 2010 GPU 技术大会上做了一场精彩的演讲，建议不要过分担心占用，而是尝试通过在内核中使用一些显式缓存技巧（和其他东西）来尽量减少内存事务。你可以在这里观看演讲：[http://www.gputechconf.com/gtcnew/on-demand-GTC.php?sessionTopic=25&searchByKeyword=occupancy&submit=&select=+&sessionEvent=&sessionYear=&sessionFormat=#193](http://www.gputechconf.com/gtcnew/on-demand-GTC.php?sessionTopic=25&searchByKeyword=occupancy&submit=&select=+&sessionEvent=&sessionYear=&sessionFormat=#193)

确保您使用的内核设计能够提供最佳性能的唯一真正方法是测试所有可能性。而且您需要对运行它的每种类型的设备重新进行此性能测试，因为它们在某种程度上都有不同的约束。这显然很乏味，尤其是当不同的设计模式导致根本不同的内核时。我通过使用模板引擎在运行时根据设备硬件规范动态生成内核，在某种程度上解决了这个问题，但这仍然有点麻烦。

# wix - 如何在我的安装程序中包含强名称程序集文件

> ID：10175494
> 
> 赞同：0
> 
> 时间：2012-04-16T13:54:43.020
> 
> 标签：wix, wix3.5, custom-action, strongname

我有一个自定义操作来执行自定义操作 DLL，但它失败了，我相信这是因为它不知道如何读取强名称程序集

所以我有这个：

```
 <Binary Id="StrongName" SourceFile="$(var.MyProject.TargetDir)MyProject.CA.dll"/>

  <CustomAction Id="CreateIt"
                BinaryKey="StrongName"
                DllEntry="Create"
                Execute="deferred"
                Return="check"
                HideTarget="no"
                Impersonate="no" />

  <CustomAction Id="RemoveIt"
                BinaryKey="StrongName"
                DllEntry="Remove"
                Execute="deferred"
                Return="check"
                HideTarget="no"
                Impersonate="no" />

     <InstallExecuteSequence>
          <Custom Action="CreateIt" Before="InstallFinalize">(NOT REMOVE =       "ALL")</Custom>
          <Custom Action="RemoveIt" Before='InstallFinalize'>(NOT UPGRADINGPRODUCTCODE) AND (REMOVE="ALL")</Custom>
     </InstallExecuteSequence> 
```

那么在执行这个 DLL 时如何引用签名呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:38:03.270

我从您正在使用的 *.CA.DLL 命名法中假设这是一个 DTF 自定义操作。这是托管托管 DLL 的本机封装 DLL。作为本地人，它不能被强命名。

记录安装并查看日志以了解失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:52:35.547

我的问题的解决方案是由 .NET 4 不支持的过时库引起的安全问题，这是一个不同的主题，所以除非有人好奇，否则我不会详细介绍它。

# c# - 如何在 jQuery uidialogbox 中通过单击按钮调用服务器端函数？

> ID：10175497
> 
> 赞同：1
> 
> 时间：2012-04-16T13:54:54.417
> 
> 标签：c#, jquery

如果我在 masterlayout 中添加服务器端功能，弹出窗口将显示在所有页面中。但是，一旦我单击“否”按钮，它就不再显示了。为此，我必须使用会话，但我们不能在 jQuery 中设置会话值。

我在 masterlayout 中使用的代码是：

```
 <script runat="server">
      protected void btnCancel_Click(object sender, EventArgs e)
      {
        Session["sesvalue"] = 1;

      }
     </script> 
```

但是该方法不会在按钮单击时触发

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:31:50.240

您的方法必须具有静态属性。

```
[WebMethod]
public static string MethodName()
{
   return "";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:07:21.487

从 jQuery 调用服务器端函数的方法是通过 ajax 请求。您不需要在 Session 中放置任何内容，您只需将客户端的值作为参数传递给服务器端的函数即可。这是一个例子：

```
function ShowDialogAndCallServerSideFunction()
{
    var $dialog = $('<div class="dialog"></div>')
    .html('Dialog content goes here')
    .dialog({
        autoOpen: false,
        width: 320,
        title: 'Title goes here',
        closeOnEscape: true,
        buttons: [
            {
                text: "No",
                click: function() { $(this).dialog("close"); }
            },
            {
                text: "Yes",
                click: function() {

                        $.ajax({
                            "type": "POST",
                            "dataType": 'json',
                            "contentType": "application/json; charset=utf-8",
                            "url": "WebServiceUrl.asmx/MethodName",
                            "data": "{'parameter': " + your_parameterHere + " }",
                            "success": function(result) {
                                //handle success here
                            },
                            "error": function(xhr, ajaxOptions, thrownError) {
                                //handle any errors here
                            }
                        });
                    $(this).dialog("close");
                }
            }
        ]
    });
    $dialog.dialog('open');
} 
```

在服务器端，您可以拥有一个 Web 服务——在我的示例中称为 WebServiceUrl——：

```
[WebMethod]
public void MethodName(string parameter)
{
   //the value received in 'parameter' is the value passed from the client-side via jQuery
} 
```

# javascript - Javascript 和谷歌地图圈

> ID：10175499
> 
> 赞同：2
> 
> 时间：2012-04-16T13:55:03.297
> 
> 标签：javascript, google-maps-api-3

目前我使用的公式如下，但不如 Vincenty 公式准确，您可以在此链接上找到： [http ://www.movable-type.co.uk/scripts/latlong-vincenty-direct.html](http://www.movable-type.co.uk/scripts/latlong-vincenty-direct.html)

我的问题是，有人可以帮助简化 javascript 代码，以便我可以在我的公式中实现它吗？我正在尝试学习 javascript，但这有点超出我的能力范围。

ex = lat2 ey = lon2

我认为最简单的方法是运行代码并执行 360 度数组来计算 ex/ey 坐标。

```
<script type="text/javascript"> 

function drawCircle(point, radius, dir, addtoBounds) { 
var d2r = Math.PI / 180;   // degrees to radians 
var r2d = 180 / Math.PI;   // radians to degrees 
var earthsradius = 6378137;

   var points = 360; 

   // find the radius in lat/lon 
   var rlat = (radius / earthsradius) * r2d; 
   var rlng = rlat / Math.cos(point.lat() * d2r); 

   var extp = new Array(); 
   if (dir==1)  {var start=0;var end=points+1} // one extra here makes sure we connect the
   else     {var start=points+1;var end=0}
   for (var i=start; (dir==1 ? i < end : i > end); i=i+dir)  
   { 
    var theta = Math.PI * (i / (points/2));//i is number of points + 1 
var lat1=point.lat()*d2r;
var lon1=point.lng()*d2r;
var d=radius;
var R=earthsradius;

var ex = Math.asin( Math.sin(lat1)*Math.cos(d/R) + 
                Math.cos(lat1)*Math.sin(d/R)*Math.cos(theta));
var ey = lon1 + Math.atan2(Math.sin(theta)*Math.sin(d/R)*Math.cos(lat1), 
                 Math.cos(d/R)-Math.sin(lat1)*Math.sin(ex));
  extp.push(new google.maps.LatLng(ex*r2d, ey*r2d)); 
  if (addtoBounds) bounds.extend(extp[extp.length-1]);

   } 
   // alert(extp.length);
   return extp;

   } 
```

这是转换为php的直接公式。我正在尝试将此代码放入谷歌地图代码中。活字链接实际上在javascript中有这段代码，但是由于我对php更了解，所以我将其转换为测试它，这很好用。

```
<?php 
 $lat1 = 29.10860062;
 $lon1 = -95.46209717;
 $a = 6378137;
 $b = 6356752.314245;
 $f = 1/298.257223563;  // WGS-84 ellipsoid params
 $brng = 32.8;

 $s = 1796884.48;
 $alpha1 = deg2rad($brng);
 $sinAlpha1 = sin($alpha1);
 $cosAlpha1 = cos($alpha1);
 $tanU1 = (1-$f) * tan(deg2rad($lat1));
 $cosU1 = 1 / sqrt((1 + pow($tanU1,2)));
 $sinU1 = $tanU1*$cosU1;
 $sigma1 = atan2($tanU1, $cosAlpha1);
 $sinAlpha = $cosU1 * $sinAlpha1;
 $cosSqAlpha = 1 - pow($sinAlpha,2);
 $uSq = $cosSqAlpha * (pow($a,2) - pow($b,2)) / (pow($b,2));
 $A = 1 + $uSq/16384*(4096+$uSq*(-768+$uSq*(320-175*$uSq)));
 $B = $uSq/1024 * (256+$uSq*(-128+$uSq*(74-47*$uSq)));
 $sigma = $s / ($b*$A);
 $sigmaP = 2*pi;

 $limit = 100; 
 $counter = 1;

 while ( $counter <= $limit ) {
 $cos2SigmaM = cos(2*$sigma1 + $sigma);
 $sinSigma = sin($sigma);
 $cosSigma = cos($sigma);
 $deltaSigma = $B*$sinSigma*($cos2SigmaM+$B/4*($cosSigma*(-1+2*pow($cos2SigmaM,2))-$B/6*$cos2SigmaM*(-3+4*pow($sinSigma,2))*(-3+4*pow($cos2SigmaM,2))));
 $sigmaP = $sigma;
 $sigma = $s / ($b*$A) + $deltaSigma;
$counter = $counter+1;
};

 $tmp = $sinU1*$sinSigma - $cosU1*$cosSigma*$cosAlpha1;
 $lat2 = atan2($sinU1*$cosSigma + $cosU1*$sinSigma*$cosAlpha1,(1-$f)*sqrt(pow($sinAlpha,2)+ pow($tmp,2)));
 $lambda = atan2($sinSigma*$sinAlpha1, $cosU1*$cosSigma - $sinU1*$sinSigma*$cosAlpha1);
 $C = $f/16*$cosSqAlpha*(4+$f*(4-3*$cosSqAlpha));
 $L = $lambda - (1-$C) * $f * $sinAlpha *($sigma + $C*$sinSigma*($cos2SigmaM+$C*$cosSigma*(-1+2*pow($cos2SigmaM,2))));

 if (deg2rad($lon1)+$L+(3*pi)<(2*pi)) {
 (  $lon2 = (deg2rad($lon1)+$L+(3*pi))-pi);
 } else {
 (  $lon2 = ((deg2rad($lon1)+$L+3*pi))%(2*pi))-pi;}

 $revAz = atan2($sinAlpha, -$tmp);  // final bearing, if required

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:38:59.547

由于您提供的链接已经在 javascript 中提供了公式，因此困难的部分已经完成，您可以复制并调用它，而不是将其重写到您的函数中。只记得注明来源。我删除了未使用的变量。另外，我只是硬编码`361`到公式中，因为您只是将其分配给点变量。如果要将度数传递给公式，则可以将其更改回来。我分离了`for`循环，对我来说这更具可读性，而且我认为你以前的工作方式不像你想要的那样工作。在使用度数和弧度时，我总是将这些转换包装成函数，因为它提高了可读性。为此，我使用如下所示将它们连接到`Number`JavaScript 中的对象：`prototype`

```
Number.prototype.toRad = function() {
   //'this' is the current number the function is acting on.  
   //e.g. 360.toRad() == 2PI radians
  return this * Math.PI / 180;
}

Number.prototype.toDeg = function() {
  return this * 180 / Math.PI;
} 
```

不太难理解，原型允许您在 JavaScript 中扩展对象，类似于基于类的语言中的继承。网上有很多资源可以帮助澄清。

这是重新设计的 drawCircle 函数：

```
function drawCircle(point, radius, dir, addtoBounds) {
    //best practice is to use [] rather then new Array(), 
    //both do the same thing.   
    var extp = [];
    if (dir == 1) {
        for (var i = 0; i < 361; i++) {
            //destVincenty function returns a object with 
            //lat, lon, and final bearing.     
            var destPoint = destVincenty(point.lat(), point.lng(), i, radius);

            //add new point 
            extp.push(new google.maps.LatLng(destPoint.lat, destPoint.lon));
            if (addtoBounds) bounds.extend(extp[extp.length - 1]);
        }
    }
    else {
        for (var i = 361; i > 0; i--) {    
            var destPoint = destVincenty(point.lat(), point.lng(), i, radius);
            extp.push(new google.maps.LatLng(destPoint.lat, destPoint.lon));
            if (addtoBounds) bounds.extend(extp[extp.length - 1]);
        }
    }

    return extp;
} 
```

这是[它的工作原理](http://jsfiddle.net/bryan_weaver/CrVHz/)。

# asp.net-mvc - 当网格进入编辑模式日期时间选择器清除值

> ID：10175510
> 
> 赞同：3
> 
> 时间：2012-04-16T13:55:48.973
> 
> 标签：asp.net-mvc, telerik, telerik-grid, telerik-mvc

我有一个绑定到网格的 DateTime 字段。当网格进入编辑模式时，日期/时间选择器会显示，但值会从中清除。这迫使用户重新输入日期/时间。知道为什么在触发编辑模式时它的值会被清除吗？

```
@(Html.Telerik().Grid<ExpenseGridModel>()
    .DataBinding(dataBinding => dataBinding.Ajax()
        .Select("ExpenseAjaxBinding", "ExpenseEntry")
        .Update("ExpenseUpdate", "ExpenseEntry")
    )
    .Name("ExpensesGrid")
    .DataKeys(keys => keys.Add(r => r.id))
    .Columns(columns =>
        {
            columns.ForeignKey(o => o.categoryId, Model.expenseCategories, "Id", "Name");
            columns.ForeignKey(o => o.typeId, Model.expenseTypes, "Id", "Name");
            columns.Bound(r => r.date);
            columns.ForeignKey(o => o.classId, Model.expenseClasses, "Id", "Name");
            columns.Bound(r => r.description);
            columns.Bound(r => r.amount);
            columns.Command(commands =>
                    commands.Edit()                                          
            );
        })
         ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:19:36.227

我通过设置编辑器模板解决了这个问题。默认情况下，它使用的是 DateTime Picker。幸运的是，我不需要 TimePicker 部分。

```
columns.Bound(r => r.date).Format("{0:d}").EditorTemplateName("Date"); 
```

# apache - vhosts 配置中的 mod_rewrite

> ID：10175513
> 
> 赞同：10
> 
> 时间：2012-04-16T13:55:58.407
> 
> 标签：apache, mod-rewrite, virtualhost

我正在尝试在 vhost 配置中添加 mod_rewrite 规则，但它不起作用。对于网站“mysite.com”，我想将“/webmedia/”重定向到主页。

这是我所拥有的：

```
<VirtualHost 192.168.100.142:80>
    ServerAdmin serveradmin@bbgi.com
    DocumentRoot /home/drupal_1
    ServerName mysite.com
    ServerAlias www.mysite.com
    Alias /movies /home/movies/
    ErrorLog /var/log/httpd/mysite.com_err_log
      CustomLog /var/log/httpd/mysite.com_log special
    <Directory /home/drupal_1>
      Options FollowSymLinks Includes ExecCGI
              AllowOverride All
              DirectoryIndex index.html index.htm index.php

      # Rewrite Rules #####################
      RewriteEngine On
      RewriteRule ^/webmedia/(.*) / [R=301,L]
      # end Rewrite Rules #################

    </Directory>
    <Directory /home/movies>
      Options FollowSymLinks Includes ExecCGI
              AllowOverride All
              DirectoryIndex index.html index.htm index.php
    </Directory>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T18:59:27.310

如果您加载了 mod_rewrite，这应该可以工作。

```
<Directory /home/drupal_1>
    Options FollowSymLinks Includes ExecCGI
    AllowOverride All
    DirectoryIndex index.html index.htm index.php
</Directory>
<Directory /home/movies>
    Options FollowSymLinks Includes ExecCGI
    AllowOverride All
    DirectoryIndex index.html index.htm index.php
</Directory>
<VirtualHost 192.168.100.142:80>
    ServerAdmin serveradmin@bbgi.com
    DocumentRoot /home/drupal_1
    ServerName mysite.com
    ServerAlias www.mysite.com
    Alias /movies /home/movies/
    ErrorLog /var/log/httpd/mysite.com_err_log
    CustomLog /var/log/httpd/mysite.com_log special

    # Rewrite Rules #####################
    RewriteEngine On
    RewriteRule ^/webmedia/(.*) / [R=301,L]
    # end Rewrite Rules #################   
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-17T16:11:44.123

> ```
> <Directory /home/drupal_1>
>   Options FollowSymLinks Includes ExecCGI
>           AllowOverride All
>           DirectoryIndex index.html index.htm index.php
> 
>   # Rewrite Rules #####################
>   RewriteEngine On
>   RewriteRule ^/webmedia/(.*) / [R=301,L]
>   # end Rewrite Rules #################
> </Directory> 
> ```

由于斜杠前缀，此`RewriteRule` *模式在**目录*上下文（即容器内部）中永远不会匹配。`<Directory>`它本来需要这样写：

```
RewriteRule ^webmedia/ / [R=301,L] 
```

（尾随`(.*)`是多余的。）

但是，由于它位于`<Directory>`容器中，因此您拥有的任何 mod_rewrite 指令`.htaccess`（因为您拥有`AllowOverride All`）都可能会覆盖它。

如果您正在使用`.htaccess`并且这是不可取的，那么最好将其从`<Directory>`容器中取出并直接放在`<VirtualHost>`容器中（`virtualhost` *上下文*） - 正如@Seybsen 在他的回答中所做的那样。

# python - 在 Python 中复制光标对象

> ID：10175519
> 
> 赞同：5
> 
> 时间：2012-04-16T13:56:12.247
> 
> 标签：python, deep-copy, database-cursor

我正在开发一个 Trac 插件...

为了检索我的数据，我创建了一个游标对象并获得如下结果表：

```
 db = self.env.get_db_cnx()
 cursor = db.cursor()
 cursor.execute("SELECT...") 
```

现在结果被用于 3 个不同的功能。我的问题现在是光标在第一次循环时被清除（就像这里所说的那样[http://packages.python.org/psycopg2/cursor.html](http://packages.python.org/psycopg2/cursor.html)）

然后我尝试复制光标对象，但这也失败了。该`copy(cursor)`函数似乎有一个大数据集的问题，并且该函数`deepcopy(cursor)`无论如何都会失败（根据这个错误[http://bugs.python.org/issue1515](http://bugs.python.org/issue1515)）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T14:09:59.923

存储来自*任何有限迭代*的值很简单：

```
results = list(cursor) 
```

遍历可迭代对象并将结果存储在列表中。可以根据需要多次迭代此列表。

您不需要光标的副本，只需要查询结果的副本。

对于这种特定情况，您应该执行 9000 在他的评论中建议的操作——使用游标内置功能来获取列表的结果，这应该与手动调用一样快或更快`list`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:16:47.683

如果您想避免循环遍历数据额外的时间，您可以尝试将其包装在生成器中：

```
def lazy_execute(sql, cursor=cursor):
    results = []
    cursor.execute(sql)
    def fetch():
        if results:
            for r in results:
                yield r
            raise StopIteration()
        else:
            for r in cursor:
                results.append(r)
                yield r
            raise StopIteration()

    return fetch 
```

这实质上是根据需要创建一个列表，但可以让您在任何地方安全地调用相同的函数。然后你会像这样使用它：

```
results = lazy_execute(my_sql):
for r in results():
    "do something with r" 
```

这几乎可以肯定是一种过度设计的过早优化，尽管它确实具有相同名称的优点，在每种情况下都意味着相同的事物，而不是生成一个新列表，然后相同的数据具有两个不同的名称。

我想如果我要争论使用它，我会使用相同名称的论点，除非数据集非常大，但如果它足够重要，那么你很有可能不想将它全部存储在反正内存。

它也完全未经测试。

# c# - c# WP7上的编译器ILSpy

> ID：10175523
> 
> 赞同：0
> 
> 时间：2012-04-16T13:56:31.940
> 
> 标签：c#, windows-phone-7

我使用 ILSpy 和 .NET Reflector 来查看代码，发现代码我不理解，我在网上搜索，但没有发现任何 1 可以帮助解决它。此代码与 ILSpy（.NET Reflector 显示相同）

```
private void Item_Clicked(object sender, EventArgs e)
    {
        switch (0)
        {
        case 0:
            {
                IL_0E:
                FileSystemItem fileSystemItem;
                while (true)
                {
                    fileSystemItem = (sender as FileSystemItem);
                    int num = 1;
                    while (true)
                    {
                        switch (num)
                        {
                        case 0:
                            if (<PrivateImplementationDetails>{4E2292E7-C82C-431F-9529-B0045F4C1457}.$$method0x60003e4-1 != null)
                            {
                                goto IL_25F;
                            }
                            if (true)
                            {
                                IL_163:
                                num = 3;
                                continue;
                            }
                            goto IL_163;

                        case 1:
                            if (fileSystemItem != null)
                            {
                                num = 11;
                                continue;
                            }
                            return;

                        case 2:
                            goto IL_3B8;

                        case 3:
                            {
                                Dictionary<string, int> expr_1B9 = new Dictionary<string, int>(9);
                                expr_1B9.Add(".mp3", 0);
                                expr_1B9.Add(".wav", 1);
                                expr_1B9.Add(".wma", 2);
                                expr_1B9.Add(".wmv", 3);
                                expr_1B9.Add(".avi", 4);
                                expr_1B9.Add(".jpg", 5);
                                expr_1B9.Add(".png", 6);
                                expr_1B9.Add(".txt", 7);
                                expr_1B9.Add(".inf", 8);
                                <PrivateImplementationDetails>{4E2292E7-C82C-431F-9529-B0045F4C1457}.$$method0x60003e4-1 = expr_1B9;
                                num = 15;
                                continue;
                            }

                        case 4:
                            {
                                string ext;
                                if ((ext = fileSystemItem.Ext) != null)
                                {
                                    num = 8;
                                    continue;
                                }
                                return;
                            }

                        case 5:
                            goto IL_2C9;

                        case 6:
                            num = 12;
                            continue;

                        case 7:
                            {
                                string ext;
                                int num2;
                                if (<PrivateImplementationDetails>{4E2292E7-C82C-431F-9529-B0045F4C1457}.$$method0x60003e4-1.TryGetValue(ext, ref num2))
                                {
                                    num = 6;
                                    continue;
                                }
                                return;
                            }

                        case 8:
                            num = 0;
                            continue;

                        case 9:
                            goto IL_25A;

                        case 10:
                            goto IL_36A;

                        case 11:
                            num = 14;
                            continue;

                        case 12:
                            {
                                int num2;
                                switch (num2)
                                {
                                case 0:
                                case 1:
                                case 2:
                                    num = 16;
                                    continue;

                                case 3:
                                case 4:
                                    goto IL_171;

                                case 5:
                                case 6:
                                    goto IL_1A4;

                                case 7:
                                case 8:
                                    this.ShowText(fileSystemItem.Path);
                                    num = 9;
                                    continue;

                                default:
                                    num = 13;
                                    continue;
                                }
                                break;
                            }

                        case 13:
                            return;

                        case 14:
                            if (fileSystemItem.IsFolder)
                            {
                                switch ((1 == 1) ? 1 : 0)
                                {
                                case 0:
                                case 2:
                                    goto IL_36F;

                                case 1:
                                    IL_2B7:
                                    if (false)
                                    {
                                        IL_2BD:
                                        num = 5;
                                        continue;
                                    }
                                    goto IL_2BD;
                                }
                                goto IL_2B7;
                            }
                            num = 4;
                            continue;

                        case 15:
                            goto IL_25F;

                        case 16:
                            if (fileSystemItem.IsPlaying)
                            {
                                num = 10;
                                continue;
                            }
                            goto IL_36F;
                        }
                        break;
                        IL_25F:
                        num = 7;
                        continue;
                        IL_36F:
                        BackgroundAudioPlayer.get_Instance().set_Track(new AudioTrack(new Uri(fileSystemItem.Path, 2), "Unknown", "Unknown", "Unknown", null));
                        IEnumerator<object> enumerator = this.filesListBox.get_Items().GetEnumerator();
                        num = 2;
                    }
                }
                IL_131:
                BackgroundAudioPlayer.get_Instance().Stop();
                fileSystemItem.IsPlaying = false;
                return;
                IL_171:
                MediaPlayerLauncher mediaPlayerLauncher = new MediaPlayerLauncher();
                mediaPlayerLauncher.set_Media(new Uri(fileSystemItem.Path, 2));
                mediaPlayerLauncher.set_Location(2);
                mediaPlayerLauncher.Show();
                return;
                IL_1A4:
                this.ShowImage(fileSystemItem.Path);
                return;
                IL_25A:
                return;
                IL_2C9:
                this.ShowFolderContents(fileSystemItem.Path);
                return;
                IL_36A:
                goto IL_131;
                IL_3B8:
                try
                {
                    int num = 2;
                    while (true)
                    {
                        switch (num)
                        {
                        case 0:
                            num = 1;
                            continue;

                        case 1:
                            goto IL_EC;

                        case 3:
                            {
                                IEnumerator<object> enumerator;
                                if (!enumerator.MoveNext())
                                {
                                    num = 0;
                                    continue;
                                }
                                FileSystemItem fileSystemItem2 = (FileSystemItem)enumerator.get_Current();
                                fileSystemItem2.IsPlaying = false;
                                num = 4;
                                continue;
                            }
                        }
                        IL_A7:
                        num = 3;
                        continue;
                        goto IL_A7;
                    }
                    IL_EC:
                    goto IL_23A;
                }
                finally
                {
                    int num = 2;
                    while (true)
                    {
                        IEnumerator<object> enumerator;
                        switch (num)
                        {
                        case 0:
                            goto IL_12E;

                        case 1:
                            enumerator.Dispose();
                            num = 0;
                            continue;
                        }
                        if (enumerator == null)
                        {
                            break;
                        }
                        num = 1;
                    }
                    IL_12E:;
                }
                goto IL_131;
                IL_23A:
                fileSystemItem.IsPlaying = true;
                return;
            }
        }
        goto IL_0E;
    } 
```

这个字典的错误告诉我这个错误

```
<PrivateImplementationDetails>{4E2292E7-C82C-431F-9529-B0045F4C1457}.$$method0x60003e4-1 
```

那么，这是什么？我该如何解决？我需要用另一个变量替换它还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:10:28.793

`<PrivateImplementationDetails>{4E2292E7-C82C-431F-9529-B0045F4C1457}`不是正确的 C# 构造。这可能是 ILSpy 对某些内部框架功能发出的替代名称，一般开发人员不应该使用它。

因此，您需要对代码进行逆向工程并了解它的真正作用。并通过其他方式实现它。你不能只是拿走它并使用它:)

顺便说一句，代码似乎是一个混淆的代码，而那里有很多不必要的指令。在您的情况下，整个循环/开关以一种奇特的方式对状态机进行编码。（可能是它的执行总是顺序的，所以你应该尝试手动跟踪它——用纸和铅笔。试试吧，这很有趣！）

# mongodb - mongodb写锁发生在什么级别？

> ID：10175525
> 
> 赞同：3
> 
> 时间：2012-04-16T13:56:32.803
> 
> 标签：mongodb

我开始为一个项目研究技术，该项目可能会频繁进行大量写入。我想知道 mongo write lock 在什么级别发生？它是在服务器级别还是数据库级别？我已阅读[http://www.mongodb.org/display/DOCS/How+does+concurrency+work](http://www.mongodb.org/display/DOCS/How+does+concurrency+work)但官方文档说。`a write operation can block all other operations.`

对我来说，这意味着写锁是服务器级别的，但我希望它们是数据库级别的。有人可以确认或否认这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:05:34.170

目前，MongoDB 确实有一个全局服务器锁。但是，如果必须从磁盘加载内存块，还有一些额外的代码将释放锁定。它为此使用了锁屈服。尽管这并不能解决所有并发问题，但它解决了很多通常相关的问题。这篇文章描述得很好：[http ://blog.pythonisito.com/2011/12/mongodbs-write-lock.html](http://blog.pythonisito.com/2011/12/mongodbs-write-lock.html)

从 MongoDB 2.2 开始，将有一个数据库级别的锁，并且还完成了更多关于 yield 的工作。

# html - 自动将 tinymce 验证应用于所有 drupal 页面

> ID：10175528
> 
> 赞同：3
> 
> 时间：2012-04-16T13:56:40.980
> 
> 标签：html, validation, drupal, tinymce, wysiwyg

我碰巧继承了一个drupal项目，其中几乎每个页面上似乎都会出现常见的html验证错误。验证错误非常小而且容易，实际上我只需要在编辑器中打开任何页面，tinymce wysiwig 编辑器就会自动修复问题，我只需要保存页面。考虑到我需要执行 30k+ 次才能将其应用到整个网站，有没有办法让它自动应用到所有页面或自动应用？欢迎任何和所有建议来帮助我加快进程。

**编辑：使用的解决方案**

由于我不是最擅长寻找编程解决方案的人，因此我确实找到了一个用于 Firefox 的插件，让我可以记录和循环一系列称为 iMacros 的操作。在 5 个不同的 FF 实例中启动它，让它运行一整夜，它已经完成了一半。当然不是最有效的做事方式，但对于像我这样在编程方面不那么先进的人来说可能是一种解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:19:55.107

假设您可以以某种方式循环浏览页面，我建议您构建一个页面，您可以在其中将代码源包含到编辑器根 html 元素（textarea 或其他）中。然后在 onInit 之后（参见 tinymce 配置选项（设置参数和 onInit））触发提交或保存按钮，该按钮将页面传递到保存页面的服务器。然后页面文本区域可能会被下一页的代码填充等等......

这里重要的部分是您的服务器后端能够循环浏览不同的页面，并且在接收到修改/更正的页面代码时知道接下来是哪个页面。

# .net - 我应该使用标记接口吗？

> ID：10175531
> 
> 赞同：2
> 
> 时间：2012-04-16T13:56:49.993
> 
> 标签：.net, interface, marker-interfaces

我有一个具有许多属性的类，其中一个是对象，我们称它为 ExtraData。这可以是三种不同类型中的任何一种的对象，这三种类型之间没有共享字段。

我应该创建一个所有三个对象类都实现的标记接口并使 ExtraData 属性属于该接口类型吗？我读过的所有内容都说要在 .NET 中避免这种情况，并尽可能使用自定义属性。如果我这样做，我会让 ExtraData 成为一个简单的对象并检查属性以确定它的类型吗？如果我想使用这些数据、检查属性并相应地进行转换，这似乎需要做很多额外的工作。

这是“不使用标记接口”规则的例外吗？还是我错过了一些明显的东西？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:01:48.700

目前还不清楚你的意图是什么。要回答您的实际问题，使用这样的接口是完全可以接受的，并且忽略该方法的智慧，如果您需要将属性的值限制为少数类型，这似乎是一种合法的方法。

但实际上，可能有更好的方法，但如果没有关于你在做什么的更多信息，我无法提出任何建议。

# sql - 为什么这条 sql 行不起作用

> ID：10175533
> 
> 赞同：3
> 
> 时间：2012-04-16T13:56:57.297
> 
> 标签：sql, database, tsql

它表示该命令已成功执行，但组织表中没有插入任何值。

```
DECLARE @now DATETIME
SET @now = GETDATE()
DECLARE @numtoinsert INT
SET @numtoinsert = 100

DECLARE @counter INT
SET @counter = 101
WHILE @counter < @numtoinsert
BEGIN
SET @counter = @counter + 1

INSERT INTO [MVServices].[dbo].[Organization]
       ([Organization_Id]
       ,[Business_Number]
       ,[Legal_Name]
       ,[Common_Name]
       ,[Operating_As]
       ,[Sort_Name]
       ,[Effective_Date]
       ,[Expiry_Date]
       ,[Created_By]
       ,[Created_Date]
       ,[Last_Changed_By]
       ,[Update_Date])
 VALUES
       (@counter
       ,1234
       ,'ABC Construction'
       ,'ABC'
       ,'ABC Construction'
       ,'ABC Construction'
       ,@now
       ,null
       ,'seed'
       ,@now
       ,null
       ,null)

       END 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T13:58:44.423

它不会插入任何内容，因为您的`WHILE`条件是：

```
WHILE @counter < @numtoinsert 
```

并且 101 > 100，所以它永远不会进入循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T14:00:20.290

那是因为你插入的记录只要`@counter < @numtoinsert`, 和`@counter`101 一样，它永远不会小于`@numtoinsert`100。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T14:00:52.427

您有两个变量，如下所示：

```
SET @numtoinsert = 100
SET @counter = 101 
```

然后插入语句在一个while循环中：

```
WHILE @counter < @numtoinsert 
```

counter 不大于 numtoinsert 开始，因此不执行插入语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T14:03:56.577

你的逻辑不正确：

```
SET @numtoinsert = 100
SET @counter = 101

WHILE @counter < @numtoinsert 
```

你是说：

```
WHILE 101 IS SMALLER THAN 100 
```

这评估为 false，因此您永远不会进入 while 循环。

# php - 从mysql以表格格式显示

> ID：10175537
> 
> 赞同：2
> 
> 时间：2012-04-16T13:57:08.847
> 
> 标签：php, mysql, html-table, automation

我有一个表格，`product_category`它有 20 多个类别，我想以表格格式显示它们，如下图所示

![在此处输入图像描述](../Images/9b9cc8e7cbd60081455c64f56ccb5b9b.png)

我喜欢将类别放在 5 中，`td`然后如何将我固定`tr`在`table`

下面是我尝试过的代码，但它没有给出所需的输出

下面是可能是我需要的解决方案的图像

![在此处输入图像描述](../Images/33adc18c545d058ea177c307a5ee47e0.png)

下面的代码

```
<table>
<?php

$fquery5 = mysql_query("select Cat_ID, Cat_Name from product_category where Active_Flag=1");    

    $count1 = mysql_num_rows($fquery5);

    $hor_length = 5;
    $ver_length = $count1 / $hor_length;

    $data1 = mysql_fetch_row($fquery5);

    for ($i = 0; $i <= $ver_length; $i++) {
        echo "<tr>";
            for ($j = $i + $hor_length; $j <= $count1; $j++) {
                    echo "<td>";
                        echo "Id : " . $data1[0] . " = " . $data1[1];
                    echo "</td>";
            }
        echo "</tr>";
    } 

?>
</table> 
```

添加了由回答的结果输出图像`@DaveRandom`

![在此处输入图像描述](../Images/dabf89cdfba5e13c50e007cc54a4bc8c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:10:59.120

试试这个（**固定**）：

```
<?php

  // Number of columns
  $hor_length = 5;

  // Do the query, get the number of rows in the result
  $fquery5 = mysql_query("
    SELECT Cat_ID, Cat_Name
    FROM product_category
    WHERE Active_Flag = 1
  ");    
  $numrows = mysql_num_rows($fquery5);

  // Start of table
  echo "<table>\n<tr>\n";

  // Loop the results with a counter
  for ($i = 1; $row = mysql_fetch_row($fquery5); $i++) {
    // Every iteration echos a cell
    echo "<td>Id : " . $row[0] . " = " . $row[1] . "</td>\n";
    // If we're at the end of a row, echo a row break, unless it is the last result
    if (!($i % $hor_length) && $i < $numrows) {
      echo "</tr>\n<tr>\n";
    }
  }

  // Right-pad the end row with empty cells
  for ($i--; $i % $hor_length; $i++) {
    echo "<td></td>\n";
  }

  // Echo the end of the table
  echo "</tr>\n</table>"; 
```

查看一个[工作示例](http://codepad.org/Z3sX94VM)（手动创建数据数组，因为我无法从键盘查询数据库）

# mercurial - Mercurial：在“hg commit”之前强制执行“hg pull -u”

> ID：10175538
> 
> 赞同：7
> 
> 时间：2012-04-16T13:57:11.747
> 
> 标签：mercurial, dvcs, mercurial-hook

在某些情况下，我需要强制执行 Mercurial 用户在允许`hg pull -u`任何人之前运行，即，这意味着传入队列是空的——此外，我还希望该人使用分支的头版本。`hg commit``hg pull`

我该如何设置这样的限制？

（我完全意识到这违背了 DVCS 设计核心的部分内容）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:42:40.277

您可以要求您的开发人员安装

```
[hooks]
pre-commit = hg pull -u 
```

在他们的配置文件中（它可能应该安装在每个存储库`.hg/hgrc`文件中，因为此工作流是特定于存储库的）。

这使得 Mercurial 有点像 Subversion：您的开发人员将只有一个未完成的变更集。但是请注意，一旦有人推送到服务器，`hg pull -u`就无法更新到新的分支提示，因为它会跨分支（拓扑分支）这样做。因此，此时需要进行适当的合并（或[变基](http://mercurial.selenic.com/wiki/RebaseExtension)，请参阅参考资料`hg pull --rebase`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T08:35:02.757

正如亚当所说，也许你真正需要做的是防止多头（每个分支）。这就是我们所做的，使用来自 Netbeans 的 'forbid_2head' 钩子（从这里链接[https://www.mercurial-scm.org/wiki/TipsAndTricks#Prevent_a_push_that_would_create_multiple_heads](https://www.mercurial-scm.org/wiki/TipsAndTricks#Prevent_a_push_that_would_create_multiple_heads)）

结果是钩子阻止了在一个分支上创建多个头的任何推送（因此一个在匿名/默认分支上加上一个在命名分支上）。这有效地强制在提交之前进行拉动，因为您必须拉动，在本地获取两个头，然后合并或变基以将其移除。

*请注意，钩子在服务器/主存储库上*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:16:04.063

通常，在不使用 -f 标志（强制）的情况下，mercurial 不会让您将打开的头部推送到服务器。您可以编写一个挂钩来自动拉取，但由于服务器不知道您拥有什么，因此无法在服务器端强制执行。mercurial 的网站上有一篇关于这种情况的文章： [https ://www.mercurial-scm.org/wiki/TipsAndTricks?highlight=%28heads%29#Prevent_a_push_that_would_create_multiple_heads](https://www.mercurial-scm.org/wiki/TipsAndTricks?highlight=%28heads%29#Prevent_a_push_that_would_create_multiple_heads)

# java - 在 onResume() 方法中重新启动计时器？

> ID：10175539
> 
> 赞同：2
> 
> 时间：2012-04-16T13:57:12.200
> 
> 标签：java, android, timer, onresume

我使用 a`Timer`不断更新 a ，但是在该方法`TextView`期间我无法重新启动计时器。`onResume()`我`timer.cancel()`在`onPause()`and`onDestroy()`方法中使用，但是如何在 中重新启动计时器`onResume()`？

这是我的计时器代码...

```
int delay = 1000; 
int period = 1000; 
Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask() {

public void run() {
        //I update the TextView here 
    }

}, delay, period); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:18:54.673

一个更简单的选择是使用`Handler`类。我不推荐 Timer 类，因为它与您的 Activity 的生命周期无关，您将不得不自己担心任何潜在的线程问题。使用 Handler 的美妙之处在于所有回调都将在主线程上（因此无需担心线程问题）。以下是有关如何执行此操作的简单示例。

```
 @Override
protected void onCreate(Bundle savedInstanceState)
{
   ....
   mHandler = new Handler();
}

 @Override
protected void onResume() 
{
     mHandler.postDelayed(myRunnable, UPDATE_RATE);
}

 @Override
protected void onPause() 
{
     mHandler.removeCallbacks(myRunnable);
}

 private final Runnable myRunnable= new Runnable() {
    @Override
    public void run()
    { 
       //Do task
       mHandler.postDelayed(myRunnable, UPDATE_RATE);
    }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:01:06.263

你不重新启动计时器。而是使用一个新的计时器，即在 onResume() 中创建一个新的计时器。由于您不再使用前一个，垃圾收集会处理它。所以在 onResume() 中使用以下代码：

```
timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask() {

public void run() {

    //update the TextView here 

}

}, delay, period); 
```

# xcode - XCode，带有 Appdelegate 的 TableView 返回以前的数据

> ID：10175540
> 
> 赞同：0
> 
> 时间：2012-04-16T13:57:20.443
> 
> 标签：xcode, delegates, tableview

我已经选择了一个表格行并使用下面的方法将该值传递给 appDelegate。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *selectedDest = [tableArrayPlaces objectAtIndex:indexPath.row];

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate];
[appDelegate setSelectedDestValue:selectedDest]; 
```

但是当我在下一个视图中检索我的值时，我得到了一个我之前选择的值。

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
pLabel.text = [appDelegate selectedDestValue]; 
```

例如，我选择了值“a”，当我转到下一个视图时，我显示一个空白值。当我返回上一个视图并现在选择“b”时，“a”将显示在下一个视图中。如果我返回并选择“c”，“b”将显示在下一个视图中，依此类推。我相信这是因为 appDelegate 尚未使用新值初始化。知道如何解决这个问题吗？

# facebook - 当我尝试打开我的应用程序时出现 404 错误

> ID：10175544
> 
> 赞同：0
> 
> 时间：2012-04-16T13:57:32.040
> 
> 标签：facebook, http-status-code-404

我尝试为 facebook 制作简单的“hello world”应用程序。但是当我尝试进入我的应用程序时，它显示 404 错误。应用链接：[https ://apps.facebook.com/caponekuponfb/](https://apps.facebook.com/caponekuponfb/)

我无法上传我的配置屏幕，所以我将重新编写它：

* * *

```
## Basic information ##
App Display Name: Kupony Capone
App Namespace: caponekuponfb
Contact Email: address@address
App Domain: blank
Category: None
Hosting URL: You have not generated a URL through one of our partners (Get one)

## App on Facebook ##
Canvas URL: http://www.adamlakomy.pl/
Secure Canvas URL: https://ssl.1and1.pl/adamlakomy.pl/
Canvas Page: http://apps.facebook.com/caponekuponfb

## Facebook Tab ##
Page Tab Name: Kupon zniżkowy w Capone
Page Tab URL: http://www.adamlakomy.pl/kupon.html
Secure Page Tab URL: https://ssl.1and1.pl/adamlakomy.pl/kupon.html
Page Tab Edit URL: blank

Rest is blank/default 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:35:19.580

[http://www.adamlakomy.pl/](http://www.adamlakomy.pl/)也回答 404 错误。当您打开[http://apps.facebook.com/caponekuponfb](http://apps.facebook.com/caponekuponfb)时，您将被转发到[http://www.adamlakomy.pl/](http://www.adamlakomy.pl/)并且出现 404 错误

# plsql - PL/SQL 静态游标变量作为参考游标

> ID：10175547
> 
> 赞同：0
> 
> 时间：2012-04-16T13:57:42.373
> 
> 标签：plsql, ref-cursor, sys-refcursor

我有一个接受 SYS_REFCURSOR 并将其转换为 JSON 的过程。

在调用上述内容的过程中，我尝试将 CURSOR 定义为正常并将其作为 REF CURSOR 提供。

我收到 PLS-00361。

我知道我可以使用 OPEN FOR 构造，但我需要在其他地方使用我的光标并且不喜欢重复。

有什么建议吗？

```
 PROCEDURE LIST_EMPLOYEES 
  AS

    l_ref_cursor SYS_REFCURSOR;

    CURSOR c_emps
    IS
    SELECT email_address
      FROM employees;

  BEGIN

    OPEN c_emps;
    FETCH c_emps INTO l_ref_cursor;

    json_utils.refcursor_to_json_via_http(l_ref_cursor,
                                          'employees');

    CLOSE l_ref_cursor;

  EXCEPTION
  WHEN others
  THEN
    log_error;
  END LIST_EMPLOYEES; 
```

问候，劳伦斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:03:10.207

您不会将光标提取到 REF CURSOR 中，您只需打开它：

```
PROCEDURE LIST_EMPLOYEES AS

   l_ref_cursor SYS_REFCURSOR;

BEGIN

   OPEN l_ref_cursor FOR SELECT email_address FROM employees;

   json_utils.refcursor_to_json_via_http(l_ref_cursor, 'employees');

   CLOSE l_ref_cursor;

END LIST_EMPLOYEES; 
```

# java - 仅使用数组实现哈希表的 Java 代码

> ID：10175549
> 
> 赞同：4
> 
> 时间：2012-04-16T13:57:53.510
> 
> 标签：java, hashmap, hashtable

我将在此评论的开头说我了解哈希表的工作原理，但是我不确定如何仅使用原语从头开始实现哈希表。

任何人都能够提供仅使用数组的哈希表的 Java 代码实现吗？

我什至如何开始用 Java 编写哈希表？

我将如何仅使用原语再次编写链表哈希表？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:16:49.150

OpenJDK 给出的代码可能很难理解，所以我会写一个简短的想法如何做到这一点......

我最近这样做的一种方法是将数组本身用作符号表。然后数组的索引将是键（散列键）和元素的值（无论你想存储什么）。由于数组具有固定的大小，并且哈希键可以是任何整数，我们面临着一个挑战：裁剪哈希值，使它们与数组的大小在相同的范围内。如果说数组的长度为 5，则键需要在 0 和 4 之间。否则我们会将值放入数组之外的插槽中 => 很多异常。

当您想避免碰撞时，这个挑战变得特别有趣......

[在princeton 的这个页面上](http://algs4.cs.princeton.edu/34hash/)可以找到很多帮助。

祝你好运！

# facebook - 开放图嵌入的视频源问题

> ID：10175550
> 
> 赞同：3
> 
> 时间：2012-04-16T13:57:58.737
> 
> 标签：facebook, video

我在以下位置创建了一个测试页面：

[http://www.gmwebcast.com/test4.html](http://www.gmwebcast.com/test4.html)

当我尝试将其嵌入 facebook 时，它会获取我的播放器但不会加载内容。我正在使用的播放器使用 flashvar mediaSuiteURL 将所有视频数据传递给播放器。这包括元数据等。我不能使用自定义 flashvar 传递给播放器吗？

元属性="og:video" 内容="http://mediasuite.multicastmedia.com/templates/facebook.swf?mediaSuiteURL=http://player.multicastmedia.com/ws/get_vod_player_info/p_sfz538e8/api_f4d84551-2e85-103a -a1ba-00e08655b9fc/apiv_3.5/gft_0/sfz538e8.xml"

任何帮助都会很棒。

谢谢！

# android - 将表格布局添加到 AlertDialog

> ID：10175554
> 
> 赞同：1
> 
> 时间：2012-04-16T13:58:07.933
> 
> 标签：android, android-layout

我想显示一个 AlertDialog（确定按钮），内容是 TableLayout。

但是，我希望通过 Java 以编程方式创建 TableLayout，因为我需要添加依赖于某些变量的行。

任何想法如何做到这一点？具体来说：

1- AlertDialog 可以有 TableLayout 视图，还是只需要文本所以我应该使用对话框？
2- 如何以编程方式创建 TableLayout 并向其中添加行。

我已经在 xml 中完成了，但在 java 中不确定帮助
感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:28:04.193

您应该能够使用“setContentView”方法为对话框设置所需的任何布局。

您可以从 xml 文件中扩展 ui。喜欢

```
LayoutInflater mInflater = LayoutInflater.from(context);
View yourView = mInflater.inflate(R.layout.your_layout, null);
alertDialog.setContentView(yourView); 
```

上面的代码应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:24:33.320

你为什么不创建一个自定义对话框？

1 - 您可以实例化一个对话框，如`Dialog dialog = new Dialog(context, theme)`

2 - 然后你可以`dialog.setContentView(layout)`通过 id ( `dialog.findViewById`)找到你的表格布局

3 - 然后做你需要做的。我建议将这一切放在一个单独的方法中。

# javascript - 正则表达式提取 html 块中的一个字母

> ID：10175558
> 
> 赞同：0
> 
> 时间：2012-04-16T13:58:19.510
> 
> 标签：javascript, regex, molybdenum

您好需要从字符串中提取一个字母。

我拥有的字符串是一大块 html，但我需要搜索的部分是这个文本：

```
Vahvistustunnus&nbsp;M&nbsp;: 
```

我需要把 M 放在 nbsp 里面

那么，谁是最快的正则表达式大师呢？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:29:37.870

看起来它使用 JavaScript，如果是这样

```
var str = "Vahvistustunnus&nbsp;M&nbsp;:";
var patt = "Vahvistustunnus&nbsp;([A-Z])&nbsp;:";
var result = str.match(patt)[1]; 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:37:47.533

好的，根据钼 api 文档中的[这个页面](https://www.molyb.org/confluence/display/molyb/storeExtractedText-action-moly)，结果将是所有连接在一起的组。鉴于您只想要两者之间的字符，`&nbsp;`那么匹配整个事物然后拉出组是不够的。相反，您需要执行以下操作：

```
(?<=Vahvistustunnus&nbsp;)[a-zA-Z](?=&nbsp;) 
```

**警告** 这可能对您不起作用，因为[并非](http://www.regular-expressions.info/lookaround.html#lookbehind) `(?<=pattern)`所有正则表达式风格都提供后视。具体来说，我认为因为 molybdenum 是 firefox 扩展，所以它很可能使用 ECMA (javascript) 正则表达式风格。而且ECMA 不支持lookbehinds。

如果是这种情况，那么我将不得不请其他人回答您的问题，因为我的正则表达式忍者（业余）技能并没有比这更进一步。如果您在 javascript 代码中使用正则表达式，那么有办法绕过这个限制，但根据您的描述，听起来您必须用原始正则表达式来解决这个问题？

# sql - 有条件的 INNER JOIN 返回不想要的结果

> ID：10175559
> 
> 赞同：1
> 
> 时间：2012-04-16T13:58:35.343
> 
> 标签：sql, inner-join

基本上，我使用 LEFT JOIN 表来获取属于 PERSON 的 INVOICE 记录。

表格的快速概览以及相关记录。

```
table INVOICES    table GIGS        table BIDS               table PEOPLE
----------------  ----------------  -----------------------  ---------------- 
id | gig_id       id | bid_id       id | gig_id | person_id  id         
----------------  ----------------  -----------------------  ----------------
1  | 1            1  | 1             1 | 1      | 1          1
                  2  | 2             2 | 1      | 2          2 
```

和我的加入查询...

```
SELECT invoices.* FROM invoices 
INNER JOIN gigs ON gigs.id = invoices.gig_id 
INNER JOIN bids ON bids.gig_id = gigs.id 
INNER JOIN people ON people.id = bids.person_id 
WHERE people.id = 2
GROUP BY invoices.id 
```

和返回的结果...

```
INVOICE RESULT
--------------
id
--------------
1 
```

事实是，`people.id=2` **没有**任何发票，但上面的联接查询返回的结果就像它们一样。当一个人没有任何发票时，如何确保它返回空？

非常感谢您对此的任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:02:07.903

使用`LEFT OUTER JOIN`而不是`INNER JOIN`从`People`表开始（具有您想要查看所有数据的表）

像这样的东西：

```
SELECT 
    People.Id,
    invoices.* 
FROM 
    People    
LEFT OUTER JOIN     -- this here *might* be an INNER JOIN
    bids ON people.person_id = bids.person_id 
LEFT OUTER JOIN     -- this here *might* be an INNER JOIN
    gigs ON bids.gig_id = gigs.id 
LEFT OUTER JOIN
    invoices  ON gigs.id = invoices.gig_id 
GROUP BY 
    invoices.id 
```

# ruby-on-rails - 如何解决rails控制台中的方法丢失错误

> ID：10175560
> 
> 赞同：0
> 
> 时间：2012-04-16T13:58:35.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个模型 Dish 和 PriceDeal 如下

```
class Dish < ActiveRecord::Base
  has_one :price_deal
end

class Dish < ActiveRecord::Base
  belongs_to :dish
end 
```

在 Rails 控制台中，我想像这样检索 discountPercent 值。

```
1.9.2p290 :130 > pd=PriceDeal.find(17)
 => #<PriceDeal id: 17, name: "deal1", description: "my deal1", discountPercent: 20.0, discountCash: nil, dish_id: 2, created_at: "2012-03-22 07:42:08", updated_at: "2012-04-16 11:16:49"> 

1.9.2p290 :131 > pd.discountPercent
 => 20.0 
```

我得到了预期的结果。

但是当我试图获得这样的价值时，

```
1.9.2p290 :132 > pd1 = PriceDeal.where(:dish_id => 2)
 => [#<PriceDeal id: 17, name: "deal1", description: "my deal1", discountPercent: 20.0, discountCash: nil, dish_id: 2, created_at: "2012-03-22 07:42:08", updated_at: "2012-04-16 11:16:49">] 

1.9.2p290 :133 > pd1.discountPercent

NoMethodError: undefined method `discountPercent' for #<ActiveRecord::Relation:0xa134958>
    from /home/ragunathjawahar/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/activerecord-3.0.11/lib/active_record/relation.rb:374:in `method_missing'
    from (irb):133
    from /home/ragunathjawahar/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/railties-3.0.11/lib/rails/commands/console.rb:44:in `start'
    from /home/ragunathjawahar/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/railties-3.0.11/lib/rails/commands/console.rb:8:in `start'
    from /home/ragunathjawahar/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/railties-3.0.11/lib/rails/commands.rb:23:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我有错误，

如何从 pd1 中获取 discountPercent 的值。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:03:33.093

发生这种情况的原因是，当您使用 时`where`，您得到的不是一个类型的对象`PriceDeal`，而是一个类型的对象`ActiveRecord::Relation`，从所有意图和目的来看，它都是一个数组。

注意你是如何得到的：

```
[#<PriceDeal id: 17, name: "deal1", ... >] 
```

而不仅仅是：

```
#<PriceDeal id: 17, name: "deal1", ... > 
```

大括号 ( `[]`) 表示它是一个数组。所以你必须这样做：

```
pd1.first.discountPercent 
```

该`where`方法返回数组的原因是您可以返回多个项目。想象一下：

```
PriceDeal.where("discountPercent >= 0") 
```

你可能会从中得到很多记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:00:32.723

pd=PriceDeal.find(17)

它只会返回一个特定的列。因此您不会收到任何方法错误。

当您使用 Modelname.where("conditions")。结果将是数组。因此您不会收到任何方法错误。因为您的方法不存在于数组中。

# c# - 提取所有图像和 HTML 的正则表达式

> ID：10175561
> 
> 赞同：0
> 
> 时间：2012-04-16T13:58:44.110
> 
> 标签：c#, wpf, regex

我试图找出以下的正则表达式，但似乎无法正确。有人可以给我建议吗？

简而言之，我有一个 htmlString，它是：

```
 htmlString = "<HTML><HEAD></HEAD><BODY>Here are some images.</br>1) <IMG style='MARGIN-BOTTOM: 20px; MARGIN-LEFT: 20px' align=right src='images/sample001.jpg'>2) <IMG style='MARGIN-BOTTOM: 25px; MARGIN-LEFT: 25px' align=right src='images/sample002.png'></br> And some docs as well.</br>1) href='javascript:parent.POPUP({url:'testDoc001.htm',type:'shared',width:600,height:645})'></br>2) href='javascript:parent.POPUP({url:'testDoc002.html',type:'shared',width:700,height:712})'></br></BODY></HTML>"; 
```

我在 C#，WPF 中通过以下例程运行它：

* * *

```
 private static List<string> ExtractData(string htmlString)
    {
        List<string> data = new List<string>();

        //***  Get The Images ***
        string pattern = @"<img .* src='(.+\.(jpg|bmp|png))'";

        Regex rgx = new Regex(pattern, RegexOptions.IgnoreCase);
        MatchCollection matches = rgx.Matches(htmlString);

        for (int i = 0, l = matches.Count; i < l; i++)
        {
            data.Add(matches[i].Value);
        }

        //***  Get Html Pages ***
        pattern = @"url:'([^']*)'";

        rgx = new Regex(pattern, RegexOptions.IgnoreCase);
        matches = rgx.Matches(htmlString);

        for (int i = 0, l = matches.Count; i < l; i++)
        {
            data.Add(matches[i].Value);
        }

        return data;
    }-------------------------------------------------------------------------------------- 
```

我得到的结果是：

[0] = "< IMG style='MARGIN-BOTTOM: 20px; MARGIN-LEFT: 20px' align=right src='images/sample001.jpg'>2) < IMG style='MARGIN-BOTTOM: 25px; MARGIN-左：25px' align=right src='images/sample002.png'"

[1] = "url:'testDoc001.htm'"

[2] = "url:'testDoc002.html'"

我真正想要的是：

[0] =“图像/sample001.jpg”

[1] = "图像/sample002.png"

[2] = "testDoc001.htm"

[3] = "testDoc002.html"

有人可以告诉我我在正则表达式中做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:07:33.347

您最好使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)进行此类工作。正如其他人所提到的，用于解析 HTML 的正则表达式，除了非常具体的情况外，是一件很糟糕的事情。无论如何，您的正则表达式存在几个问题。第一个应该类似于：

```
<img.+?src\s*=\s*\'(.*?\.(jpg|bmp|png))' 
```

# apache - 根目录下的 Mod_rewrite 规则

> ID：10175566
> 
> 赞同：1
> 
> 时间：2012-04-16T13:58:59.133
> 
> 标签：apache, mod-rewrite

这个问题已经困扰我一段时间了。

我创建了一个小型站点引擎，我正在使用 mod_rewrite 告诉引擎要处理的页面，SEO 友好链接是一个奖励:)。

这就是它今天的工作方式：

地址[http://www.example.com/site/page](http://www.example.com/site/page) 变为[http://www.example.com/engine.php?address=page](http://www.example.com/engine.php?address=page)

但我想要的是：地址[http://www.example.com/page](http://www.example.com/page) 变成[http://www.example.com/engine.php?address=page](http://www.example.com/engine.php?address=page)

如果我为调用（/站点）创建一个伪目录，一切正常，但是当我尝试从根目录执行相同操作时，奇怪的事情开始发生。

```
RewriteBase /
RewriteRule ^site/(.*) engine.php?%{QUERY_STRING}&address=$1 
```

工作正常：/site/about/contacts 变为 eninge.php?address=about/contacts

```
RewriteBase /
RewriteRule ^(.*)$ eninge.php?%{QUERY_STRING}&address=$1 
```

不起作用，由于某种原因 /about/contacts 变成 eninge.php?address=eninge.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:04:53.290

检查[RewriteLog](http://httpd.apache.org/docs/2.2//mod/mod_rewrite.html#rewritelog)（这已在 2.4 中更新，如果不使用 2.2，请检查当前文档）：

```
RewriteLog "/usr/local/var/apache/logs/rewrite.log"
RewriteLogLevel 3 
```

这将准确地向您展示`mod_rewrite`正在做什么，并允许您根据其输出调整您的配置。当心 - 它增长非常快，永远不应该在生产环境中使用。

顺便说一句，您的帖子中有一些拼写错误 - 值得验证这些与您的配置不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:12:16.173

```
RewriteCond %{REQUEST_FILENAME} !^engine.php
RewriteRule (.*) engine.php?address=$1 [QSA,L] 
```

尝试这个。您所拥有的是导致重写循环并首先`engine.php?address=about/contacts`按照您的预期执行，然后再循环并将其重写为`engine.php?address=engine.php`. 说得通？这`[QSA,L]`是一个 Query String Append 和 Last 标志，它将查询字符串添加到您的 URL 并告诉重写引擎停止寻找重写。这`RewriteCond %{REQUEST_FILENAME} !^engine.php`是通过确保当前 URL 不以 engine.php 开头来检查您是否尚未指定引擎重写。如果您将其写入 .htaccess 文件而不是 .httpd 配置文件，则这是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:12:46.660

`(.*)`意思是抓住任何东西。你有没有试过在你的包罗万象之前排除文件和目录？因为没有它会导致无限递归。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ eninge.php?%{QUERY_STRING}&address=$1 [L] 
```

更多信息可在官方文档中找到：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

**更新：**您还应该`[L]`在规则末尾指定，告诉 Apache 在这里结束重写过程。

# vbscript - 无需登录即可在 Windows XP 中运行计划任务

> ID：10175567
> 
> 赞同：1
> 
> 时间：2012-04-16T13:58:59.870
> 
> 标签：vbscript, windows-xp, scheduled-tasks

我一直在开发一个需要每天运行的程序。我将此设置为计划任务并设置特定时间运行。但它只在我登录时运行。虽然我取消选中“仅在登录时运行”选项，但在我登录之前它不会运行。我的问题是，有没有办法在不登录的情况下运行计划任务？

编辑：必须每天运行的程序没有 GUI，它是一个需要在后台运行的可视化基本脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:26:35.410

你需要一个服务，在这个空间里处理太多了，谷歌“windows run program as a service”

# ios - 使用 myViewController 初始化根视图控制器/使用拆分视图（滑动导航）控制器

> ID：10175573
> 
> 赞同：0
> 
> 时间：2012-04-16T13:59:30.043
> 
> 标签：ios, controller, rootview

我正在为我的项目采用幻灯片（拆分）视图控制器。

JT、DD、ZUUI、JW、ECS......

所有这些来源都建议在 appDelegate 中初始化我的根视图控制器。

像这样的东西......

```
MyMainViewController *controller = [MyMainController alloc] init];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:Controller];
   ......... 
```

> ```
> self.window.rootViewController = viewController;
> [self.window makeKeyAndVisible]; 
> ```

问题是我无法让我的视图可见，我的应用程序只显示空白页面，导航栏为空。

我使用 AQGrid 自定义了我的主视图，这会导致问题吗？

我的视图看起来与故事板的外观不同。（因为我定制了它。）

因此，当我进行初始化时，我使用的是“self.storyboard 初始化......方法”。

但是在appdelegate中，我不能使用那个方法。

简单地说，我不能创建这个视图层次结构，因为当我初始化我的视图时它是不可见的。

*   *   ZUUIRevealController 是以下的父级：
    *   *   *   UINavigationController 是以下项的父项：
    *   *   *   *   前视图控制器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:33:37.443

如果您正在使用情节提要，请不要这样做。相反，从情节提要中选择您的起始视图控制器并在属性检查器中检查“是初始视图控制器”。

# c# - 无需用户干预即可获取访问令牌 C# SDK

> ID：10175575
> 
> 赞同：3
> 
> 时间：2012-04-16T13:59:33.877
> 
> 标签：c#, facebook, sdk

我正在运行一个工作流服务，它会自动在 facebook 页面上发布来自一些博客的消息。但是现在 facebook 弃用了 offline_access 权限，如果我的应用程序没有运行（例如 60 天）并且访问令牌过期，我需要找到解决方案。

我需要找到一种方法来获取具有给定用户名和密码的新访问令牌，而无需用户干预......

也许你们中的某个人有一个好主意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:57:03.170

如果您的服务向 Facebook API 发出定时请求，则无需担心令牌过期。因此，如果您在某个时间间隔内请求某些状态或特定 FQL，您的令牌将被扩展，并允许您随时发布。

此解决方案是一种解决方法。即使您尝试这样做，也不会涵盖所有场景。更好的方法是保持用户连接到您的应用程序，每天验证一些不变的内容。通过这种行为，您将获得用户每个入口的访问令牌。

希望它有效。

# c - 如何在 Apache2 自定义模块中获取响应数据长度？

> ID：10175577
> 
> 赞同：1
> 
> 时间：2012-04-16T13:59:38.200
> 
> 标签：c, unix, apache2, apache

我第一次编写 Apache 模块，我刚刚完成了我的 hello world 程序。

我必须得到以下值：

*   1个请求长度（我假设它是URi的长度，r->uri）如果我错了请纠正我
*   2 响应长度
*   3 请求数据
*   4 响应数据

并将其存储在日志文件中。

我已经完成了所有基本结构 server_rec、request_rec、connection 和 process，但我不确定如何完成。

我知道这是基本的，但找不到任何可以给我上述结果的文章:(

下面是我的[hello world 示例](http://pashabd.blogspot.se/2011/04/apache-hello-world-module-in-ubuntu.html)：

```
/* The simplest HelloWorld module */
#include <httpd.h>
#include <http_protocol.h>
#include <http_config.h>
static int helloworld_handler(request_rec *r)
{
if (!r->handler || strcmp(r->handler, "helloworld")) {
return DECLINED;
}
if (r->method_number != M_GET) {
return HTTP_METHOD_NOT_ALLOWED;
}
ap_set_content_type(r, "text/html;charset=ascii");
ap_rputs("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\n",
r);
ap_rputs("<html><head><title>Apache HelloWorld "
"Module</title></head>", r);
ap_rputs("<body><h1>Hello World!</h1>", r);
ap_rputs("<p>This is the Apache HelloWorld module!</p>", r);
ap_rputs("</body></html>", r);
return OK;
}
static void helloworld_hooks(apr_pool_t *pool)
{
ap_hook_handler(helloworld_handler, NULL, NULL, APR_HOOK_MIDDLE);
}
module AP_MODULE_DECLARE_DATA helloworld_module = {
STANDARD20_MODULE_STUFF,
NULL,
NULL,
NULL,
NULL,
NULL,
helloworld_hooks
} ; 
```

我能够将输出存储在文本文件中，但无法获取上述字段。

# jquery-mobile - 移动设备上的 JqGrid

> ID：10175578
> 
> 赞同：1
> 
> 时间：2012-04-16T13:59:40.943
> 
> 标签：jquery-mobile, jqgrid, rhomobile

我试图将 jqGrid 用于移动设备开发，但我无法获得与 Web 视图相同的视图。寻呼机箭头和其他图像仅在我鼠标悬停时显示。

如果我必须为插件在移动设备上工作做一些特别的事情，请告诉我。

我在让 columnChooser 工作时也遇到了问题。弹窗不来

谢谢

[更新] 请在下面找到我正在编写的函数。

我包括的文件是：

1.  jquery.mobile-1.0.min.css
2.  jqmobile-patch.css
3.  jquery-ui.css
4.  ui.jqgrid.css
5.  ui.multiselect.css
6.  jquery-1.7.1.min.js
7.  jquery-ui.min.js
8.  ui.multiselect.js
9.  grid.locale-en.js
10.  jquery.jqGrid.min.js

按照提供的顺序。

```
function buildGrid() {
var grid = jQuery("#contactGrid");
grid.jqGrid({
  url: '/public/json/contactsdata.json',
  mtype:'GET',
  datatype: 'json',
  headertitles: true,
    sortable: true,
  colNames:['ID','Name','Date of Birth',"Email","Marital Status"],
  colModel:[
    {name:'id', index:'id'},
    {name:'name',index:'name'},
    {name:'dob',index:'dob'},
    {name:'email',index:'email'},
    {name:'maritalstatus',index:'maritalstatus'}
  ],
    sortname: 'id',
    sortorder: 'asc',
    rowNum:5,
    rowList:[5,10,20],
  pager: '#contactPager',
  viewrecords: true,
  autowidth: true,
  shrinkToFit: true,
  loadonce:true,
  emptyrecords: "No Records to display",
  height: 'auto',
  width: '80%',
  caption: "Contact Details",
  ignoreCase: true,
  gridview: true

});

    grid.jqGrid('navGrid', '#contactPager', {refreshstate: 'current', search:true,add: false, edit: false, del: false});
    grid.jqGrid('navButtonAdd', '#contactPager', {
            caption: "",
            buttonicon: "ui-icon-calculator",
            title: "Choose columns",
            onClickButton: function () {
                $(this).jqGrid('columnChooser');
            }
        });
 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:12:39.630

我解决了这个问题。问题在于包含文件的顺序。我遵循的顺序是：

```
<link rel="stylesheet" href="/public/jqmobile/jquery.mobile-1.0.min.css">
<link rel="stylesheet" href="/public/css/jqmobile-patch.css">
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/redmond/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.1/css/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.1/plugin/ui.multiselect.css" />

<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="/public/jqmobile/jquery.mobile-1.0.min.js"></script>
<script type="text/javascript" charset="utf-8" src="/public/js/jqmobile-patch.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.1/plugin/ui.multiselect.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.1/js/i18n/grid.locale-en.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.1/js/jquery.jqGrid.src.js"></script> 
```

# c++ - 有没有更简单的方法来表示 C++ 中的条件？

> ID：10175579
> 
> 赞同：2
> 
> 时间：2012-04-16T13:59:45.643
> 
> 标签：c++, language-features

我写了一个基于多维数组的基本井字游戏。g[3][3]。在我的程序中，我有大约 9 个条件，就像我将要向您展示的那样：

```
if((g[0][0] == X && g[0][1] == X && g[0][2] == X) || (g[0][0] == O && g[0][1] == O && g[0][2] == O)) 
```

这太疯狂了。我可能做错了什么，但这就是我要解决这个问题的原因。有没有更简单的方法来表示像这样长而复杂的条件？例如，我不能以某种方式做到：

```
if(grid.hasXes) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T15:37:40.327

你可能走错了路。只有 3^9 或 19683 种可能的组合，因此`int`即使在 16 位机器上，您也可以将网格转换为 ：

```
int
asInt( char const (&grid)[3][3] )
{
    int results = 0;
    for ( int i = 0; i != 3; ++ i ) {
        for ( int j = 0; j != 3; ++ j ) {
            results *= 3;
            switch ( grid[i][j] ) {
            case 'X':
                results += 1;
                break;

            case 'Y':
                results += 2;
                break;

            case ' ':
                break;

            default:
                assert(0);
            }
        }
    }
    return results;
} 
```

之后，您可以使用 int 索引到一个表中，该表指示谁赢了（如果有的话）。或者，您可以将一个或另一个玩家的位置转换为 9 位整数：

```
int
asInt( char const (&grid)[3][3], char who )
{
    int results = 0;
    for ( int i = 0; i != 3; ++ i ) {
        for ( int j = 0; j != 3; ++ j ) {
            results *= 2;
            if ( grid[i][j] == who ) {
                ++ results;
            }
        }
    }
    return results;
} 
```

然后，您可以对表使用简单的线性搜索，验证是否设置了必要的位：

```
static int const wins[] =
{
    0007, 0070, 0700,       //  rows
    0111, 0222, 0444,       //  columns
    0124, 0421              //  diagonals
};

class Wins
{
    int myToMatch;
public:
    Wins( char const (&grid)[3][3], char who )
        : myToMatch( asInt( grid, who ) )
    {
    }
    bool operator()( int entry ) const
    {
        return (entry & myToMatch) == entry;
    }
}; 
```

然后：

```
if ( std::find_if( begin( wins ), end( wins ), Wins( grid, 'X' ) )
            != end( wins ) {
    //  X wins
else if ( std::find_if( begin( wins ), end( wins ), Wins( grid, 'O' ) )
            != end( wins ) {
    //  O wins
else
    //  play another turn. 
```

您甚至可以考虑将网格保持为两个`int`s，每个玩家一个。位置的位数将是`3 * i + j`，并测试移动是否合法：

```
bool
isLegal( int gridX, int gridY, int i, int j )
{
    return ((gridX | gridY) & (1 << (3 * i + j))) == 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T14:03:35.953

处理此类问题的最简单且最强大的方法是将丑陋的代码提取到函数中。如果方便的话，该函数可以是一个类的成员，或者只是一个自由函数。在您的情况下，快速修复可能是

```
bool hasXes(char[3][3] g) {
    return (g[0][0] == X && g[0][1] == X && g[0][2] == X) || (g[0][0] == O && g[0][1] == O && g[0][2] == O)
} 
```

然后你可以简单地写：

```
if (hasXes(g)) ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T14:03:20.093

现在我知道了...

```
bool check(char *g, int x, int y, int moveX, int moveY, char ch)
{
    for (int i(0); i<3; ++i)
    {
        if ((g+(y*3)+x) != ch) return false;
        x += moveX;
        y += moveY;
    }
    return true;
} 
```

你这样使用它：

```
if (check(g, 0, 0, 0, 1, 'O')) //checking O in the first row.
if (check(g, 0, 0, 0, 1, 'X')) //checking X in the first row.
if (check(g, 0, 0, 1, 0, 'O')) //checking O in the first column.
if (check(g, 0, 0, 1, 0, 'X')) //checking X in the first column. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T14:03:21.163

您可以编写函数来隐藏复杂性并增强主驱动程序函数的可读性。例如，您可以检查一行或一列以查看它是否都等于 X 或 O。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T14:07:06.540

这应该有效：

```
bool found = false;
int i, j;
for(i = 0; i < 3; i++)
{
    for(j = 0; j < 3; j++)
    {
        if(g[i][j] == X)
        {
            found = true;
            break;
        }
    }
    if(found == true)
    {
        break;
    }
}
if(found == true)
{
    // do something because one of them had X.  i, j have the co-ordinates of the first find of it
}
else
{
    // none of them had X
} 
```

也可能有一种使用 goto 的方法，尽管这些在 c++ 中是非常不鼓励的。如果您一次只想要一行，则只使用 1 个循环。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T14:31:12.170

在这种特殊情况下，还有更简单的比较：

```
if(g[0][0] == g[0][1] && g[0][1] == g[0][2]) 
```

至少假设只有`X`和`O`可能。否则会变成

```
if(g[0][0] == g[0][1] && g[0][1] == g[0][2] && ( g[0][1] == X || g[0][1] == O ) ) 
```

恕我直言，这仍然简单得多。

如果您不能像这样简化，请使用其他人指出的循环。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T15:20:17.853

类型安全的评论！

```
const bool first_is_xful = g[0][0] == X && g[0][1] == X && g[0][2] == X,
           second_is_xful = ...;

if (first_is_xful || second_is_xful || ...) ... 
```

或函数函数：

```
bool is_xful (int row, ...) ...

...

if (is_ixful(0) || ... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-16T14:11:31.697

还有一个选项可供选择。如果存储是连续的，您可以使用 memcmp

```
if(!memcmp(g[0],"XXX",3) || !memcmp(g[0],"OOO",3)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-16T14:16:18.630

您可以数 X 或尝试找到它们：

假设 g 是一个 3 x 3 数组，包含字符`X`或`O`：

```
char* end = g + 9;
std::count(g, end, 'X') > 0; 
```

或更有效地：

```
char* end = g + 9;
std::find(g, end, 'X') != end; 
```

# macos - 通过 Cocoa 终止进程

> ID：10175585
> 
> 赞同：4
> 
> 时间：2012-04-16T13:59:54.297
> 
> 标签：macos, cocoa, process, terminate

如果我终止自己，只需使用`[NSApp terminate: nil]`，它工作得很好。但是如果我想终止另一个进程，例如活动监视器，我该怎么办？

要获取进程列表，我使用

```
NSArray* processlist = [[NSWorkspace sharedWorkspace] runningApplications]; 
```

我对吗？但是如何通过 Cocoa 终止进程，而不是使用`kill`or `KillProcess(<#const ProcessSerialNumber *inProcess#>)`or `killpd`or 之类的东西，我刚开始学习 Cocoa，所以也许我需要一些简单的示例代码或一些关键字来帮助我找到文档。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:16:00.280

`-[NSWorkspace runningApplications]`返回一个对象数组`NSRunningApplication`。 `NSRunningApplication`有方法`-[NSRunningApplication terminate]`。因此，如果您正在寻找一个特定的应用程序，您可以像这样终止它：

```
-(void)killProcessesNamed:(NSString*)appName
{
    for ( id app in [[NSWorkspace sharedWorkspace] runningApplications] ) 
    {
        if ( [appName isEqualToString:[[app executableURL] lastPathComponent]] ) 
        {
            [app terminate];
        }
    }
} 
```

您也可以调用`forceTerminate`强制应用程序在没有正常退出过程的情况下退出。（它不会要求保存更改等）

您可以使用其他方法`NSRunningApplication`来简化此过程，具体取决于您是基于捆绑 ID 还是 PID 搜索进程。

# gwt - 内容未以正确的语言显示

> ID：10175588
> 
> 赞同：0
> 
> 时间：2012-04-16T14:00:07.630
> 
> 标签：gwt, internationalization

我正在尝试根据用户代理来决定要显示哪些内容（消息）。当我用户查询参数或元标记时，一切正常。它在 Firefox 中也能正常工作。在 Firefox 中，我将语言从英语更改为法语，重新加载页面，一切正常。这是基于用户代理的。如果我在 chrome/IE 中加载页面，我只会得到默认值（英文）。如果我将系统语言设置为法语（我的另一种语言），一切似乎都正常。任何想法为什么在 chrome 和 IE 中设置语言对内容没有影响？我验证了标题并且正在为法语内容发出请求？我错过了什么？

我的 gwt.xml 文件基于我在这里找到的[http://code.google.com/p/google-web-toolkit/source/browse/releases/2.3/user/src/com/google/gwt/i18n /I18N.gwt.xml](http://code.google.com/p/google-web-toolkit/source/browse/releases/2.3/user/src/com/google/gwt/i18n/I18N.gwt.xml)

据我了解，我需要添加的只是以下内容到我的 gwt.xml set-configuration-property name="locale.useragent" value="Y"

我还发现了以下[为什么 GWT 会忽略浏览器语言环境？](https://stackoverflow.com/questions/156412/why-does-gwt-ignore-browser-locale)这似乎表明它在 IE 中不起作用，但 chrome 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:10:23.950

请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=4228](http://code.google.com/p/google-web-toolkit/issues/detail?id=4228)

TL;DR：没有可靠的方法来获取您在 JavaScript 中查看的信息，该`navigator`对象为您提供浏览器的区域设置（即用于浏览器自己的菜单等的区域设置），而不是用户的语言偏好（ Firefox 除外）。
您最好的选择是使用动态主机页面并`<meta>`根据请求标头（即内容协商）在服务器上生成适当的主机页面。

# python - 将箱线图添加到python中的其他图表

> ID：10175590
> 
> 赞同：2
> 
> 时间：2012-04-16T14:00:11.553
> 
> 标签：python, matplotlib, boxplot

![在此处输入图像描述](../Images/3bf87f7133c2f006e0543cc10a358aa8.png)

这两个图的每个点的 x 轴值完全相同，是否可以在第一个图的顶部显示框须？

我试过这个：

```
 fig1 = plt.figure()
    ax = fig1.add_subplot(211)
    ax.set_xscale('log')
    ax.plot(x7,y7,'c+-')
    ax.plot(x8,y8,'m+-')
    ax.plot(x9,y9,'g+-')
    ax.boxplot(dataset)
    xtickNames = plt.setp(ax, xticklabels=boxx)
    plt.setp(xtickNames) 
```

结果只显示没有其他三行的盒须图，所以，我尝试了这个：

```
 fig1 = plt.figure()
    ax = fig1.add_subplot(211)
    ax2 = fig1.add_subplot(212)
    ax.set_xscale('log')
    ax.plot(x7,y7,'c+-')
    ax.plot(x8,y8,'m+-')
    ax.plot(x9,y9,'g+-')
    ax2.set_xscale('log')
    ax2.boxplot(dataset)
    xtickNames = plt.setp(ax2, xticklabels=boxx)
    plt.setp(xtickNames) 
```

但我希望它们显示在同一张图中，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:12:53.587

如果您希望两个具有可比较 X 和 Y 范围的图表一个在另一个之上，您可以尝试“保持”。例如：

```
import pylab

pylab.plot([1,2,3,4],[4,3,2,1]) 
pylab.hold(True) 
pylab.plot([1,2,3,4],[1,2,3,4]) 
```

# web-applications - 以编程方式从服务器取消部署 Web 应用程序

> ID：10175591
> 
> 赞同：1
> 
> 时间：2012-04-16T14:00:12.210
> 
> 标签：web-applications, deployment

是否可以从服务器以编程方式取消部署 Web 应用程序（特别是 WAR）。如果答案是肯定的，就是为不同的服务器取消部署不同的方式。

我正在专门寻找从以下服务器取消部署

*   雄猫
*   老板
*   码头
*   玻璃鱼
*   网络球
*   网络逻辑
*   杰罗尼莫
*   树脂
*   乔纳斯

我知道如果不同服务器的取消部署方式不同，这可能是一个很长的答案。在这种情况下，我非常乐意获得一些通用解决方案或有关此信息的指针

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:21:35.547

桑迪普，

我不知道一个 Web 应用程序取消部署另一个 Web 应用程序的标准容器内方式。我的直觉是应用程序本身是“包含”的，规范并不打算让他们管理他们的容器。

也就是说，大多数/所有这些 Web 容器都提供了用于部署和取消部署 Web 应用程序的 API。虽然这些方法并不常见，当我的开发同事为我们的[uDeploy](http://www.urbancode.com/html/products/deploy/)产品创建新的集成时，我们必须依次研究每一个。例如，对于 Tomcat，您可以使用 Tomcat 管理器 API。您可以使用开源 Apache Ant 任务作为您想要执行的操作的示例：http: [//tomcat.apache.org/tomcat-5.5-doc/manager-howto.html#Executing_Manager_Commands_With_Ant](http://tomcat.apache.org/tomcat-5.5-doc/manager-howto.html#Executing_Manager_Commands_With_Ant)

对于 Websphere，您可能正在编写 jython 脚本或针对 JMX API 进行一些自己的编程。Weblogic 介于两者之间，因为它提供了一些可以借用的好 Ant 脚本以及直接 API。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:20:34.270

我不确定您所说的“取消部署”究竟是什么意思，但是如果您对 Web 服务器具有 SSH 访问权限，则可以安装 Git 源代码控制管理来“切换”不同版本的 Web 应用程序，而不管有问题的 Web 服务器如何。例如，假设您有两个 Git 分支：1）“生产”和 2）“离线”。生产分支将包含 Web 应用程序的生产版本。“离线”分支可能只包含一个文件，例如 index.html，它告诉用户该站点“停止维护”或您拥有什么。

您可以使用以下命令切换分支：

```
git checkout production 
```

或者

```
git checkout offline 
```

并且 git 会自动换出文件系统中的所有文件，而 Web 服务器永远不会知道其中的区别。您可以编写一个 shell 脚本来执行此操作，甚至可以将其分配为 cron 作业，以便在计划的时间发生，如果您愿意的话。

请注意，执行此操作时将终止所有用户会话，因此您需要按计划的时间间隔或在通知用户后执行此操作。

您可以在这里找到使用 git 所需的一切：http: [//git-scm.com/](http://git-scm.com/)

# ios - 一次多次检查accessoryType

> ID：10175599
> 
> 赞同：0
> 
> 时间：2012-04-16T14:00:52.737
> 
> 标签：ios, xcode

所以，有一个问题：当我检查表格中的一个单元格时，另一个单元格也被检查了，但我只想一次检查一个。有来源：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
                                       reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = [[self.symptoms objectAtIndex:indexPath.row ] objectForKey:@"name"];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(indexPath);
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        cell.accessoryType = UITableViewCellAccessoryNone;

    } else {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:42:16.420

尽量不要重复使用该单元格。因为当您重用单元格时，您也重用了复选标记-/附件状态。那么为什么不删除单元排队。

你可以试试：

.h 文件：

```
@property (nonatomic, retain) NSMutableDictrionary *checkedState; 
```

.m 文件：（在顶部）

```
@synthesize checkedState = checkedState_; 
```

（休息）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
                                       reuseIdentifier:nil] autorelease];

    cell.textLabel.text = [[self.symptoms objectAtIndex:indexPath.row ] objectForKey:@"name"];

    if(self.checkedState) {
      NSNumber *checkmarkStateNumber = [self.checkedState objectForKey:[NSNumber numberWithInt:indexPath.row]];
      if(checkmarkStateNumber && [checkmarkStateNumber boolValue] == YES) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
      }

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(indexPath);
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    if(!checkedState) { self.checkedState = [NSMutableDictionary dictionary]; }

    BOOL checkmarkState = NO;
    if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        cell.accessoryType = UITableViewCellAccessoryNone;

    } else {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        checkmarkState = YES;
    }

    [self.checkedState setObject:[NSNumber numberWithBool:checkmarkState] forKey:[NSNumber numberWithInt:indexPath.row]];

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

**更新 1：** 现在它还应该存储复选标记状态！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:56:29.103

将以下属性添加到表视图控制器：

```
@property(nonatomic, retain) NSIndexPath* selectedIndexPath; 
```

在表视图控制器的实现中合成属性：

```
@synthesize selectedIndexPath; 
```

将此行添加到`dealloc`：

```
self.selectedIndexPath = nil; 
```

将此添加到`tableView:cellForRowAtIndexPath:`：

```
cell.accessoryType == (indexPath.section == self.selectedIndexPath.section && indexPath.row == self.selectedIndexPath.row) ? UITableViewCellAccessoryCheckmark : UITableViewCellAccessoryNone; 
```

将此添加到`tableView:didSelectRowAtIndexPath:`：

```
if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
    cell.accessoryType = UITableViewCellAccessoryNone;
    self.selectedIndexPath = nil;
} else {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
    self.selectedIndexPath = indexPath;
} 
```

优点是：

*   您仍然可以重复使用单元格；
*   即使视图由于内存不足警告而被卸载，它也会在重新加载表视图后恢复复选标记。

# regex - regex_replace 不会替换连字符/破折号

> ID：10175602
> 
> 赞同：4
> 
> 时间：2012-04-16T14:00:59.087
> 
> 标签：regex, postgresql

我在 postgreSQL 中使用 regex_replace 并尝试删除字符串中不是字母或数字的任何字符。但是，使用这个正则表达式：

```
select * from regexp_replace('blink-182', '[^a-zA-Z0-9]*$', '') 
```

返回“眨眼 182”。正如我所料，连字符没有被删除并替换为空（''）。

如何修改此正则表达式以替换连字符 - 我已经用许多其他字符（！，。#）进行了测试，它们都被正确替换了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T14:02:44.320

*您当前仅替换字符串末尾的一连串*非字母数字字符。我猜您的测试主要是`foobar!#`有效的形式的字符串，因为要删除的字符位于字符串的末尾。

要替换字符串中每个出现的此类字符，请`$`从正则表达式中删除：

```
[^a-zA-Z0-9]+ 
```

（我也将其更改`*`为 a`+`以防止在每个字符之间进行零长度替换。

如果您还想保留空格，则需要将其添加到字符类中：

```
[^a-zA-Z0-9 ]+ 
```

或者可能

```
[^a-zA-Z0-9\s]+ 
```

如果开头的正则表达式实际上是正确的，因为您只想从字符串末尾删除非字母数字字符，但您*还想*删除字符串中间的连字符减号（同时保留其他非字母数字字符在字符串的中间），那么以下应该可以工作：

```
[^a-zA-Z0-9]+$|- 
```

[maniek](https://stackoverflow.com/users/192512/maniek)指出您需要添加一个参数，`regexp_replace`以便它会替换多次匹配：

```
regexp_replace('blink-182', '[^a-zA-Z0-9]+$|-', '', 'g') 
```

# java - JDBC setMaxRows 数据库使用

> ID：10175605
> 
> 赞同：6
> 
> 时间：2012-04-16T14:01:07.417
> 
> 标签：java, database, oracle, postgresql, jdbc

我正在尝试使用 JDBC 编写一个独立于数据库的应用程序。我现在需要一种方法来从某个表中获取前 N 个条目。看到`setMaxRows`JDBC里面有一个方法，但是我用起来不太舒服，因为我怕数据库把所有结果都压出来，只有JDBC驱动才会减少结果。如果我需要一个有十亿行的表中的前 5 个结果，这将打破我的脖子（**该表有一个可用的索引**）。

为每种数据库编写特殊的 SQL 语句不是很好，但会让数据库进行巧妙的查询计划并停止获取不必要的结果。

我可以依靠`setMaxRows`告诉数据库不能工作吗？

我想在最坏的情况下，我不能以希望的方式依赖这种工作。我对 Postgres 9.1 和 Oracle 11.2 最感兴趣，所以如果有人对这些数据库有经验，请继续前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:11:38.847

> 将使数据库进行巧妙的查询计划并停止获取不必要的结果。

如果你使用

[PostgreSQL](http://www.postgresql.org/docs/current/interactive/sql-select.html) :

```
SELECT * FROM tbl ORDER BY col1 LIMIT 10; -- slow without index 
```

或者：

```
SELECT * FROM tbl LIMIT 10;               -- fast even without index 
```

[甲骨文](http://www.orafaq.com/faq/how_does_one_select_the_top_n_rows_from_a_table)：

```
SELECT *
FROM   (SELECT * FROM tbl ORDER BY col1 DESC)
WHERE  ROWNUM < 10; 
```

..那么只会**返回**10 行。但是，如果您在选择前 10 名之前对行进行排序，则*所有*基本符合条件的行都将在排序之前被**读取。**

匹配索引可以防止这种开销！

* * *

如果您不确定 JDBC 实际发送到数据库服务器的内容，请运行测试并让数据库引擎记录收到的语句。在 PostgreSQL 中，您可以[设置`postgresql.conf`](http://www.postgresql.org/docs/current/interactive/runtime-config-logging.html#GUC-LOG-STATEMENT)：

```
log_statement = all 
```

（并重新加载）以记录发送到服务器的*所有语句。*请务必在测试后重置该设置，否则您的日志文件可能会变得很大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:47:10.967

直接回答您有关 PostgreSQL 9.1 的问题：是的，JDBC 驱动程序将告诉服务器停止生成超出您设置的行。

正如其他人指出的那样，根据索引和选择的计划，服务器可能会扫描大量行以找到您想要的五个。适当的服务器配置可以帮助准确地建模成本以防止这种情况发生，但如果价值分布不寻常，您可能需要引入和优化障碍（如 CTE）来强制规划者制定一个好的计划。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:12:48.043

可能/可能会用数十亿行杀死您的是查询中的（极有可能）`ORDER BY`子句。如果无法使用索引建立此订单，则 . . . 它会折断你的脖子:)

我不会依赖这里的 jdbc 驱动程序。正如先前的评论所暗示的，目前尚不清楚它的真正作用（查看不同的 rdbms）。

如果您担心查询的速度，您也可以使用`LIMIT`子句。如果您使用`LIMIT`，您至少可以确保它已传递到数据库服务器。

编辑：对不起，我不知道 Oracle 不支持`LIMIT`.

# php - 使用下拉选择过滤信息

> ID：10175607
> 
> 赞同：1
> 
> 时间：2012-04-16T14:01:09.460
> 
> 标签：php, jquery, mysql

我的过滤系统有问题，我想过滤通知。过滤应该使用每个帖子具有的状态 ID，例如错误报告具有状态 ID nro。6.

这是我使用的 jQuery 脚本：

```
$(document).ready(function() {
$("#status_option").change(                                                     
    function(){
        var statusValue = $('#status_option option:selected').val();
        if(statusValue == "1"){
            <?php 
                $sql_status1="SELECT * FROM notice, user, status WHERE notice.userID = user.userID AND notice.statusID = status.statusID = '1' ORDER BY noticeID DESC";
                $result_status1=mysql_query($sql_status1);
            ?>
        } 
        else if(statusValue == "2"){
            <?php
                $sql_status2="SELECT * FROM notice, user, status WHERE notice.userID = user.userID AND notice.statusID = status.statusID AND status.statusID = '2' ORDER BY noticeID DESC";
                $result_status2=mysql_query($sql_status2);
            ?>
        }                                       
        else if(statusValue == "3"){
            <?php
                $sql_status3="SELECT * FROM notice, user, status WHERE notice.userID = user.userID AND notice.statusID = status.statusID AND status.statusID =  '3' ORDER BY noticeID DESC";
                $result_status3=mysql_query($sql_status3);
            ?>
        }
        else if(statusValue == "4"){
            <?php
                $sql_status4="SELECT * FROM notice, user, status WHERE notice.userID = user.userID AND notice.statusID = status.statusID AND status.statusID = '4' ORDER BY noticeID DESC";
                $result_status4=mysql_query($sql_status4);
            ?>
        }
        else if(statusValue == "5"){
            <?php
                $sql_status5="SELECT * FROM notice, user, status WHERE notice.userID = user.userID AND notice.statusID = status.statusID AND status.statusID = '5' ORDER BY noticeID DESC";
                $result_status5=mysql_query($sql_status5);
            ?>
        }                                   
        else if(statusValue == "6"){
            <?php
                $sql_status6="SELECT * FROM notice, user, status WHERE notice.userID = user.userID AND notice.statusID = status.statusID AND status.statusID = '6' ORDER BY noticeID DESC";
                $result_status6=mysql_query($sql_status6);
            ?>
        }
        else{
            <?php 
                $sql_default="SELECT * FROM notice, user, status WHERE notice.userID = user.userID AND notice.statusID = status.statusID ORDER BY noticeID DESC";
                $result_default=mysql_query($sql_default);
            ?>
        } 
    }   
);}); 
```

从下拉列表中选择状态：

```
<select id="status_valinta" style="width:210px" >
<option title="css/msdropdown_img/status_all.gif">All posts</option>
<option value="1" title=".../status1.gif">Notification</option>
<option value="2" title=".../status2.gif">Waiting for answer</option>
<option value="3" title=".../status3.gif">Guide</option>
<option value="4" title=".../status4.gif">Document</option>
<option value="5" title=".../status5.gif">Image</option>
<option value="6" title=".../status6.gif">Bug-report</option> 
```

问题是当我从下拉列表中选择我想要的状态时，什么也没有发生。此外，该过滤系统应该通过将过滤后的信息动态地打开到同一页面来工作。

这是显示打印数据的地方：

```
<table width="100%" id="notices" class="ui-widget ui-widget-content">
    <thead>
        <tr class="ui-widget-header ">
            <th>Subject</th>
            <th>Sender</th>
            <th>Comments</th>
            <th>Timestamp</th>
        </tr>
    </thead>
    <tbody>
        <?php
            while($rows=mysql_fetch_array($result)){ // Starting looping rows
        ?>
            <tr style="background-color:<?php echo $rows['colorCode']; ?>">
                <td>
                    <a class="opener_notice, load_data" href="notice_v2.php?id=<?php echo $rows['noticeID']; ?>">
                    <?php echo $rows['title']; ?>
                </td>
                <td><?php echo $rows['firstname']; ?> <?php echo $rows['lastname']; ?>
                </td>
                <td><?php echo $rows['commentID']; ?></td>
                <td><?php echo date('d.m.Y, H:i:s', strtotime( $rows['sendTime'] )); ?>
                </td>
            </tr>
        <?php
            // Stopping the looping and closing the mysql connection
            } mysql_close();
        ?>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:31:17.170

您应该检查您正在处理的 html 页面的来源....因为我可以看到并理解在此代码段中编写的所有 php 代码将仅在服务器上执行，并且在 jquery 过滤中只会有空格..

虽然你想要达到的目标可以通过这样的方式来实现

```
$(document).ready(function() {
<?php                   // this code will be executed on the server 
    $sql_status1="SELECT status_id, status_value FROM notice, user, status WHERE notice.userID = user.userID AND notice.statusID = status.statusID ORDER BY noticeID DESC"; // considering status_id, status_value are the required attributes
    $result_status1=mysql_query($sql_status1);
    foreach(result_status1 as $res)
         $json_obj_arr[$res[status_id]] = $res[status_value]
    echo 'var notices = '.json_encode($json_obj_arr).';';  //and we will have a json abject in our html 
?>
var notice_json = $.parseJSON(notices);       //we will parse this object 
$("#status_option").change(                                                     
    function(){
        var statusValue = $('#status_option option:selected').val();
        alert(notice_json.statusValue);   //and directly access the value corresponding to statusValue in the notice_json object
    }) //end on change
})// end document.ready 
```

# android - 如何清除微调器侦听器

> ID：10175608
> 
> 赞同：1
> 
> 时间：2012-04-16T14:01:17.933
> 
> 标签：android, spinner

我对 android 很陌生。我设置了微调器 SetOnItemSelected 侦听器。是否有可能从另一种方法取消微调器 OnItemSelectedListener。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T14:02:57.420

调用`setOnItemSelectedListener(null)`删除一个`OnItemSelectedListener`.

# ruby-on-rails - Rails - 无法访问表字段

> ID：10175610
> 
> 赞同：0
> 
> 时间：2012-04-16T14:01:19.120
> 
> 标签：ruby-on-rails

我是 Rails 的新手，我有一个无法解决的问题。

我有一个模型食谱

```
 class Recipe < ActiveRecord::Base
    has_many :items, :dependent => :destroy
    accepts_nested_attributes_for :items,** 
```

和一个模型项目

```
 class Item < ActiveRecord::Base
    belongs_to :recipe
  end 
```

我在通过以下方式访问 Item 属性时遇到问题`Recipe.Example`：

我有一个`@i`带有描述字段的项目（）和一个`"test_"`字符串`id = 1`

我有一个带有和描述的食谱（ `@r`）；`id=2``"test_recipe"`

我能够使用正确地将项目与食谱相关联

```
@i.recipe_id = 2 
```

如果我这样做`@i`了，我就有了结果

```
#<Recipe id: 2, description: "test_recipe", created_at: "2012-04-14 15:11:00", updated_at: "2012-04-14 15:11:00"` 
```

但如果我这样做`@r.items`了，我就有了结果

`Item id: 1,recipe_id: 2, updated_at: "2012-04-14 15:11:00" , description: nil)`

他无法访问项目的描述字段。为什么？这避免了我为食谱构建正确的表单，因为 rails 不会构建 items 字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:35:45.863

我猜这是因为你试图做这样的事情：

```
@recipe.items.description 
```

何时，如果您只想要每个项目的描述：

```
@recipe.items.map(&:description) 
```

# android - 如何在 Eclipse 的 Android 包中查看库依赖项的源代码或 javadocs？

> ID：10175624
> 
> 赞同：5
> 
> 时间：2012-04-16T14:02:09.883
> 
> 标签：android, eclipse, android-library

我在 Eclipse 中有两个包^。一个被标记为库，另一个引用它（在属性-> Android 下），如下所述：http: [//developer.android.com/guide/developing/projects/projects-eclipse.html](http://developer.android.com/guide/developing/projects/projects-eclipse.html)

我的问题是，当我将鼠标悬停在一些引用引用项目的代码上时，eclipse显示

> “此元素没有附加的 javadoc，并且在附加的源中找不到 javadoc”

此外，当我在上下文菜单中为所述代码选择“打开声明”时，它会打开带有消息的关联 .class（而不是 .Java）

> “这个类文件的 JAR 属于容器‘Android Dependencies’，它不允许修改条目上的源附件”

^ 包资源管理器中的根节点，所以我假设它们被称为包而不是项目。它们都不是罐子。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-08T06:53:40.200

这应该已在最新的 adt 版本中修复，但如果有人仍然像我一样遇到这个问题，这就是我所做的：

我将我的库项目的 .classpath 文件中的 src 的顺序切换到这个（注意 path="src" 必须在第一行）

```
<classpathentry kind="src" path="src"/>
<classpathentry kind="src" path="gen"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T14:21:25.297

如果您右键单击一个 jar 文件，您可以转到属性菜单。因为侧面有 javadoc 位置选项，可让您指定路径。也可能适用于图书馆项目。

# jquery - JQuery 的日期选择器的弹出功能是如何工作的？

> ID：10175628
> 
> 赞同：1
> 
> 时间：2012-04-16T14:02:17.207
> 
> 标签：jquery, jquery-ui, popup

我正在编写我的第一个 JQuery UI 插件，一个时间范围选择器（其中“时间范围”类似于“上周四凌晨 3:16 到明天下午 5:19”）。基本概念是`<input type="text">`具有人类可读描述的 始终可见。就像 JQuery UI 中的日期选择器一样，当用户单击文本字段时，会显示一个带有交互式控件的弹出窗口。

但是，我无法重现弹出模式。为了获得正确的位置，我想让我的弹出窗口成为元素`<div>`的子`<input>`元素，但这似乎是不可能的。但是如何在不使弹出窗口成为始终显示的文本输入元素的子项的情况下获得正确的位置和动画呢？是否有这样做的模式（在 JQuery 中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:05:18.630

您应该能够获得对文本的引用`input`。jQuery 具有获取此元素位置的功能，因此您可以`div`相对于该位置定位您的相对位置。

[http://api.jquery.com/position](http://api.jquery.com/position)

# .net - 在 VB.NET 中确定文件大小

> ID：10175630
> 
> 赞同：15
> 
> 时间：2012-04-16T14:02:26.733
> 
> 标签：.net, vb.net, file, text

如何确定文本文件的大小？

我知道我可以只计算字符数，但文件将有几 MB 大。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-16T14:04:24.257

```
Dim myFile As New FileInfo("file.txt")
Dim sizeInBytes As Long = myFile.Length 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-07-01T16:30:38.657

对于任何寻找较短 VB 版本的人：

```
FileLen("file.txt") 
```

[https://msdn.microsoft.com/en-us/library/microsoft.visualbasic.filesystem.filelen](https://msdn.microsoft.com/en-us/library/microsoft.visualbasic.filesystem.filelen)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-12T19:38:03.337

使用`file`可能很危险，因为它也是一个类的名称。最好将其编码如下：

```
Dim myFile As New FileInfo("file.txt")
Dim sizeInBytes As Long = myFile.Length 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-08-23T20:03:12.337

来自其他答案的代码不检查文件的正确大小：

```
Dim myFile As New FileInfo("file.txt")
Dim sizeInBytes As Long = MyFile.Length 
```

试试这个代码

```
Dim infoReader As System.IO.FileInfo = _
    My.Computer.FileSystem.GetFileInfo("C:\testfile.txt")
MsgBox("File C:\testfile.txt is " & infoReader.Length & " bytes.") 
```

它来自*[如何：在 Visual Basic](http://msdn.microsoft.com/en-us/library/99h600fc%28v=vs.90%29.aspx)* (MSDN) 中确定文件的大小。

# php - 运行 AJAX 查询以使用 php 文件刷新 div

> ID：10175631
> 
> 赞同：2
> 
> 时间：2012-04-16T14:02:29.027
> 
> 标签：php, jquery, ajax

我目前正在研究一个多步骤查询表单，可以在以下位置找到：http: [//jsfiddle.net/xSkgH/47/](http://jsfiddle.net/xSkgH/47/)。

我正在尝试通过 jQuery AJAX 提交变量（process.php 将处理处理）并使用 process.php 中名为**result的 div****最后一步**刷新 div 。我怎样才能做到这一点？

 **到目前为止，我已经设法使用 malsup (http://jquery.malsup.com/form/) 的 jQuery 表单插件来实现这一点，现在需要使用 jQuery AJAX 方法来完成它，作为严格规范的一部分。

这是我一直在使用的代码（使用 jQuery 表单插件）：

```
// prepare the form when the DOM is ready 

$(document).ready(function() { 
var options = { 
    target:        '#result',  
    beforeSubmit:  showRequest,  
    success:       showResponse   
}; 

// bind to the form's submit event 

$('#task5_booking').submit(function() { 
    $(this).ajaxSubmit(options); 
    return false; 
    }); 
});  

// pre-submit callback 

function showRequest(formData, jqForm, options) { 
    var queryString = $.param(formData); 
    // alert('About to submit: \n\n' + queryString); 
}

// post-submit callback 

function showResponse(responseText, statusText, xhr, $form)  {
    $('#last-step').fadeOut(300, function() {
    $('#result').html(responseText).fadeIn(300);
    });
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:08:01.673

用于`jQuery.ajax`处理最后一步：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
 else if (whichStep == 'last-step') {
        $.ajax( {
            url:'urltophp.php',
            data: {}, // your data
            dataType: 'json', //your datatype
            type: 'POST',   //or GET
            success: function(r) {
                //your callback here...
            }
        });
    } 
```

**编辑：**

```
$('#task5_booking').submit(function(e) { 
    $(e).preventDefault();  //prevent the default form submit()

    var formData = $(this).serialize(); //serialize the form fields data...

    $.ajax( {
        url:'urltophp.php',
        data: formData, // your data
        dataType: 'json', //your datatype
        type: 'POST',   //or GET
        success: showResponse
    });

    //$(this).ajaxSubmit(options); 
    //return false; 
    //}); 
}); 
```

**改变这个：**

```
function showResponse(responseText, statusText, xhr, $form)  {
    $('#last-step').fadeOut(300, function() {
    $('#result').html(responseText).fadeIn(300);
    });
} 
```

**对此：**

```
function showResponse(responseText)  {
    $('#last-step').fadeOut(300, function() {
        $('#result').html(responseText).fadeIn(300);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:15:15.573

使用[http://api.jquery.com/load/](http://api.jquery.com/load/)。就像使用 .ajax 一样，只是更容易并符合您的要求。

`$('#last-step').load(url, data, function(){})`发送一个 post 请求，并用打印到响应 html 中的任何 url 填充“last-step”的 html 内容。**

# wcf - 如何使用 WCF 4.5 WebSockets“流式传输”大数据

> ID：10175636
> 
> 赞同：2
> 
> 时间：2012-04-16T14:02:54.680
> 
> 标签：wcf, stream, websocket

我正在研究新的**WCF 4.5 Websocket 服务**。通过浏览器调用服务时遇到麻烦。

事实证明（经过大量谷歌搜索后），当您将 Web 浏览器作为 Web 套接字的客户端处理时，WCF 4.5 工作的唯一方法是，如果您使用 ' **Action="*"定义您的****OperationContract** '**标签**[因为没有从浏览器调用“特定”函数的显式方法，您只需调用 'ws.send("asd")' 将消息发送到服务器，因此您需要为所有对服务的调用，同样只能有一个回调函数]

 ****现在，如果你使用**'Action="*"'**你只能在定义你的合约时使用数据类型' **Message '。**

这很好，如果你想创建一个回显服务器，但是假设你想上传/下载数据，在默认（缓冲）模式下，数据传输速度不是他们应该的（20mb 文件需要 40-50 秒）。提高速度的唯一方法是将模式设置为“ **Streamed** ”（我尝试使用“ **StreamResponse** ”）。

*但现在的问题是，由于我们在定义 Contracts 时*只能使用 ' **Message** ' 作为数据类型，而 Message 使用 SOAP 类型定义，因此它使用了 ' **Buffered** ' 模式，即使它另有明确定义。[如果我在这里错了请纠正我]

 ***所以，我的问题是，有什么方法可以在 WCF 4.5 Websockets 中实现“流式数据传输”。

而且，是的，我正在使用 byteStreamMessageEncoding（4.5 中提供的最新版本）。我在 web.config 中使用“自定义绑定”，因为“ **netHttpBinding** ”不适用于浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:50:09.540

哦……因为 WCF 没有工作……发现它可以使用 ASP.Net 4.5 处理程序来完成。*******

# css - 从单个元素中删除 CSS 效果

> ID：10175640
> 
> 赞同：2
> 
> 时间：2012-04-16T14:03:02.347
> 
> 标签：css

我想让 div.main 中的所有文本都变成灰色，除了子 div.exception 中的所有内容。div.exception 应该看起来好像主类从未添加到父 div。

这可能吗？如果是这样，怎么做？谢谢！

```
<style type="text/css">
.main{color: gray;}
.hello{color: red;}
</style>
<div class="main">
 <div>
  <div class="exception"><p class="hello">Hello</p><a>Link</a></div>
 </div>
 <div><p>Howdy</p></div>
 <div><a>Link</a></div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:08:44.357

对于现代浏览器，只需将规则应用于每个 div 但 .exception

```
.main div:not(.exception) p {
    /* style for very nested div not exception */
} 
```

否则稍后覆盖规则（如@jacktheripper所建议）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:06:03.570

这只需通过以下方式完成：

```
.main .exception {
    your styling here (e.g. color: black)
} 
```

请参阅此[jsFiddle 示例](http://jsfiddle.net/jackdent/wr87M/)

`color: inherit`当您想在上面选择两个父级时，您不能使用它，因为它只选择直接父级。因此，您必须“手动”覆盖颜色

@F。Calderan 的答案是另一种选择，但浏览器支持是可变的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:09:45.090

不，那是不可能的。

您可以轻松地覆盖样式，使其看起来不是灰色的，但是您必须知道原始颜色是什么：

```
.main .exception { color: black; } 
```

如果您要直接在内部元素上设置样式而不是在主元素上设置样式，并将异常类设置在同一级别，则可以使用以下方法覆盖它`inheit`：

```
<style type="text/css">
.main div { color: gray; }
.main div.exception { color: inherit; }
.hello { color: red; }
</style>
<div class="main">
  <div class="exception">
    <div><p class="hello">Hello</p><a>Link</a></div>
  </div>
  <div><p>Howdy</p></div>
  <div><a>Link</a></div>
</div> 
```

# php - Textile 错误：使用 url 导致编译错误

> ID：10175643
> 
> 赞同：1
> 
> 时间：2012-04-16T14:03:10.577
> 
> 标签：php, regex, textile

当使用这个简单的纺织标记时，纺织类似乎给出了编译错误。它似乎发生在链接上：

```
"linktext":http://www.nu.nl
["linktext":http://www.nu.nl] 
```

编译错误：

```
Warning: preg_match() [function.preg-match]: Compilation failed: unrecognized character after (?< at offset 5 in /var/www/vhosts/sturb.nl/subdomains/bu/httpdocs/lib/textile.php on line 1355 
```

所有其他标记都正常显示。

顺便说一句：我正在使用[netcarver 的](https://github.com/netcarver/textile)纺织 php 类。

编辑：这是触发错误的函数。第 1355 行是`$ok = preg_match( $r, $uri, $m );`

```
function parseURI( $uri, &$m )
{
    $r = "@^((?<scheme>[^:/?#]+):)?(//(?<authority>[^/?#]*))?(?<path>[^?#]*)(\?(?<query>[^#]*))?(#(?<fragment>.*))?@";
    #       12                     3  4                      5              6  7                8 9
    #
    #   scheme    = $2
    #   authority = $4
    #   path      = $5
    #   query     = $7
    #   fragment  = $9

    $ok = preg_match( $r, $uri, $m );
    return $ok;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:03:03.867

正则表达式中的“#”符号可能存在​​问题（不在字符类中的符号）。他们必须正常逃脱。

**更新**

显然，在 php 中，除非指定了 //x 修饰符，否则 # 被视为文字。如果用作文字，则必须对其进行转义。

您收到的错误意味着正在使用的 PHP 版本不支持“命名捕获缓冲区”。我不确定哪个版本的 php 实现了这一点。

我查看了您命名的文本文件 php 类，确实存在该函数。我不知道他们是否为您提供 php，或者您正在使用自己的。我不是php专家。

ideone.com 上用来运行我的测试用例的 PHP 版本是*5.2.11*，它支持命名的捕获缓冲区。

一种判断方法是您可以将命名构造从 转换`(?<name> -- )`为`( -- )`。那应该运行，或者至少让你通过那个子表达式。

这是一个带有/不带有命名捕获缓冲区的测试用例[http://ideone.com/dm4Q8](http://ideone.com/dm4Q8)
尝试找出正在使用的版本，也许它有一个内置的“version()”函数。

这是一个扩展/收缩的正则表达式进行测试。

```
'~
^(
   ([^:/?#]+)
   :
 )?
 (
   //
   ([^/?#]*)
 )?
 ([^?#]*)
 (
   \?
   ([^#]*)
 )?
 (
   \#
   (.*)
 )?
 ~x';

'~^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?~' 
```

# iphone - 在 iOS 中本地和离线展示网站

> ID：10175648
> 
> 赞同：0
> 
> 时间：2012-04-16T14:03:25.863
> 
> 标签：iphone, ios, ios5, uiwebview

我正在为客户端开发一个应用程序，其中要求一系列复杂的（多文件、JS、CSS 等）网站必须离线呈现，根本不需要任何网络连接。

所以我拥有所有的 HTML 内容文件夹，并且可以将它们添加到我的 XCode 项目中......但现在我需要展示它们。

当您只有一个 HTML 文件时，UIWebView 很好……但是 JS 和 CSS 的相对路径不会转换。

*最好*的方法是什么。我已经看到了几个潜在的选择。一种方法是在本地运行一个超级基本的 Web 服务器，将所有文件转储到 /documents （或附近）并从那里提供它......第二种方法是以某种方式使 UIWebView 重新解释路径，以便它们指向正确的就地放置......我不确定这是否可能，但我已经看到它提到过。

似乎很多人只是介绍加载单个 UIWebView 页面，而不是讨论如何处理 CSS/JS 依赖项。

任何人有任何好主意，链接等？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:12:45.477

我认为如果您将 HTML/CSS/JS 树添加到 Xcode 项目并选择“为任何添加的文件夹创建文件夹引用”（而不是“为任何添加的文件夹递归创建组”），那么您的包将包含 HTML/ CSS/JS 文件夹层次结构（而不​​是所有文件的扁平化列表）。这将保留相对路径。

至于“重新解释”点，您可以定义

```
– webView:shouldStartLoadWithRequest:navigationType: 
```

在您的 UIWebViewDelegate 中拦截任何加载任何文件的尝试。在那里您可以随时更改网址。

另外，看看[Rob Napier 的这篇有趣的文章： UIWebView 的 Drop-in offline caching](http://robnapier.net/blog/offline-uiwebview-nsurlprotocol-588)。

# spring - RestTemplate 和 Cookie

> ID：10175649
> 
> 赞同：13
> 
> 时间：2012-04-16T14:03:30.067
> 
> 标签：spring, resttemplate

我需要发送一个 HTTP cookie，我正在使用`RestTemplate`：

```
HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.add("Cookie", "SERVERID=c52");
HttpEntity requestEntity = new HttpEntity(null, requestHeaders);
ResponseEntity responses = restTemplate.exchange(webService.getValidateUserUrl(),
       HttpMethod.POST, requestEntity,  String.class, mapValidateUser); 
```

但是，接收服务器看不到 cookie。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-11T13:03:47.993

默认的rest模板不使用持久连接，这是我使用的。

```
public class StatefullRestTemplate extends RestTemplate
{
    private final HttpClient httpClient;
    private final CookieStore cookieStore;
    private final HttpContext httpContext;
    private final StatefullHttpComponentsClientHttpRequestFactory statefullHttpComponentsClientHttpRequestFactory;

    public StatefullRestTemplate()
    {
        super();
        HttpParams params = new BasicHttpParams();
        HttpClientParams.setRedirecting(params, false);

        httpClient = new DefaultHttpClient(params);
        cookieStore = new BasicCookieStore();
        httpContext = new BasicHttpContext();
        httpContext.setAttribute(ClientContext.COOKIE_STORE, getCookieStore());
        statefullHttpComponentsClientHttpRequestFactory = new StatefullHttpComponentsClientHttpRequestFactory(httpClient, httpContext);
        super.setRequestFactory(statefullHttpComponentsClientHttpRequestFactory);
    }

    public HttpClient getHttpClient()
    {
        return httpClient;
    }

    public CookieStore getCookieStore()
    {
        return cookieStore;
    }

    public HttpContext getHttpContext()
    {
        return httpContext;
    }

    public StatefullHttpComponentsClientHttpRequestFactory getStatefulHttpClientRequestFactory()
    {
        return statefullHttpComponentsClientHttpRequestFactory;
    }

}

public class StatefullHttpComponentsClientHttpRequestFactory extends HttpComponentsClientHttpRequestFactory
{
    private final HttpContext httpContext;

    public StatefullHttpComponentsClientHttpRequestFactory(HttpClient httpClient, HttpContext httpContext)
    {
        super(httpClient);
        this.httpContext = httpContext;
    }

    @Override
    protected HttpContext createHttpContext(HttpMethod httpMethod, URI uri)
    {
        return this.httpContext;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-09T23:45:07.620

您还可以扩展 RestTemplate：

```
public class CookieRestTemplate extends RestTemplate {

  @Override
  protected ClientHttpRequest createRequest(URI url, HttpMethod method) throws IOException {
    ClientHttpRequest request = super.createRequest(url, method);

    request.getHeaders().add("Cookie", "SERVERID=c52");
    return request;
  } 
```

}

# java - 如何为 android 3D 游戏框架创建更新方法？

> ID：10175653
> 
> 赞同：2
> 
> 时间：2012-04-16T14:03:43.177
> 
> 标签：java, android, multithreading, opengl-es

我一直在尝试使用[http://www.jpct.net/](http://www.jpct.net/)创建一个 android 3D 游戏，它使用 opengl 轻松渲染 3D 图形。

我的问题是如何使用 3D 框架为游戏状态创建更新方法？

我知道 Android Activity 类有这些涉及使用 glsurface 视图的命令：

```
protected void onCreate(Bundle savedInstanceState) {
}

@Override
protected void onPause() {
}

@Override
protected void onResume() {
}

@Override
protected void onStop() {
}

public boolean onTouchEvent(MotionEvent me) {

} 
```

那么 GLSurfaceView.Renderer 类就有这些方法了。

```
class MyRenderer implements GLSurfaceView.Renderer {

    public MyRenderer() {
    }

    public void onSurfaceChanged(GL10 gl, int w, int h) {
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    }

    public void onDrawFrame(GL10 gl) {
    }
} 
```

虽然我可以使用 jpct 教程来绘制图像、响应它们并计算帧速率，但它不会调用更新方法或有办法确保接近恒定的帧速率，因为它处理 onTouchEvent 中的用户输入检查方法，而我的游戏在不触摸屏幕时需要更新。

有人对如何确保使用 onDrawFrame 方法调用和处理更新方法有任何建议吗？我认为这将涉及生成第二个调用更新的线程，但我不知道如何保证它与 onDrawFrame 方法正确同步。有人对如何处理这个有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:49:27.667

onDrawFrame() 无论如何都会被 Android 调用。只需将您的游戏逻辑放入该方法中即可。您不应该使用另一个线程来执行此操作，因为您会遇到游戏逻辑和渲染之间的同步问题。

# asp.net - asp.net 4.0 菜单控件自动换行

> ID：10175657
> 
> 赞同：1
> 
> 时间：2012-04-16T14:03:49.077
> 
> 标签：asp.net, menuitem

我的 Web 应用程序中有一个菜单控件，我无法让菜单项自动换行。这是我所拥有的：

```
<asp:Menu ID="PageNav"
                            runat="server" 
                            DataSourceID="PageMapDS" 
                            Orientation="Vertical" 
                            MaximumDynamicDisplayLevels="0" ItemWrap="true"
                            OnMenuItemDataBound="ToolNav_MenuItemDataBound">
                            <StaticMenuItemStyle 
                                BackColor="#7795bd"            
                                BorderColor="#6d8bb2"
                                BorderStyle="Solid"
                                BorderWidth="1px"
                                Height="25px"
                                width="102px" ForeColor="#000" HorizontalPadding="10px"/>
                            <StaticHoverStyle BackColor="#5d7b9d" ForeColor="#FFFFFF" />
                            </asp:Menu> 
```

如果我放入一个文本超过框宽度的项目，它会溢出到页面的其余部分，它不会在框的约束内自动换行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:11:04.723

要添加到上面马里奥的答案，而不是在控件上使用这些内联样式，请考虑正确设置`IncludeStyleBlock="False"`和设置`CssClass="myCustomClass"`样式。

然后，您可以使用 CSS 控制换行：

（我不知道菜单输出的是什么 HTML，所以我假设它只是锚点）

```
 .myCustomClass 
    // assuming this class is added to each anchor <a class="myCustomClass...
    {
      display:block;
      float:left;
      width:102px;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:07:10.923

我看到您已经尝试过 ItemWrap，但您可以使用 css：`word-wrap: break-word`

# php - 有没有一种简单的方法可以从 PHP 中的国家代码中获取语言代码

> ID：10175658
> 
> 赞同：15
> 
> 时间：2012-04-16T14:03:51.380
> 
> 标签：php, locale

我正在使用 ISO 3166-1-alpha 2 代码传递给应用程序以检索本地化提要，例如美国的 /feeds/us。我有一个 switch 语句，它提供基于该 country_code 的提要。

有没有办法将该两位数字代码转换为语言代码，例如 en_US ？我想知道是否有一个标准/函数/库可以在 PHP 中执行此操作，或者我是否需要构建自己的数组？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-29T19:28:06.687

正如其他人指出的那样，没有内置功能，因为这可能是由于许多国家拥有多种语言的现实。所以不幸的是，我不能将你指向一个这样做的库，但我确实继续编写了一个小函数来满足你的需求。

有两个警告，一个是如果没有提供语言，它只会选择列表中的第一个语言环境。为了解决这个问题，您必须在函数调用周围放置一些逻辑，以便为其提供适当的语言。另一个是它需要安装 php5-intl。

```
<?php

/**
/* Returns a locale from a country code that is provided.
/*
/* @param $country_code  ISO 3166-2-alpha 2 country code
/* @param $language_code ISO 639-1-alpha 2 language code
/* @returns  a locale, formatted like en_US, or null if not found
/**/
function country_code_to_locale($country_code, $language_code = '')
{
    // Locale list taken from:
    // http://stackoverflow.com/questions/3191664/
    // list-of-all-locales-and-their-short-codes
    $locales = array('af-ZA',
                    'am-ET',
                    'ar-AE',
                    'ar-BH',
                    'ar-DZ',
                    'ar-EG',
                    'ar-IQ',
                    'ar-JO',
                    'ar-KW',
                    'ar-LB',
                    'ar-LY',
                    'ar-MA',
                    'arn-CL',
                    'ar-OM',
                    'ar-QA',
                    'ar-SA',
                    'ar-SY',
                    'ar-TN',
                    'ar-YE',
                    'as-IN',
                    'az-Cyrl-AZ',
                    'az-Latn-AZ',
                    'ba-RU',
                    'be-BY',
                    'bg-BG',
                    'bn-BD',
                    'bn-IN',
                    'bo-CN',
                    'br-FR',
                    'bs-Cyrl-BA',
                    'bs-Latn-BA',
                    'ca-ES',
                    'co-FR',
                    'cs-CZ',
                    'cy-GB',
                    'da-DK',
                    'de-AT',
                    'de-CH',
                    'de-DE',
                    'de-LI',
                    'de-LU',
                    'dsb-DE',
                    'dv-MV',
                    'el-GR',
                    'en-029',
                    'en-AU',
                    'en-BZ',
                    'en-CA',
                    'en-GB',
                    'en-IE',
                    'en-IN',
                    'en-JM',
                    'en-MY',
                    'en-NZ',
                    'en-PH',
                    'en-SG',
                    'en-TT',
                    'en-US',
                    'en-ZA',
                    'en-ZW',
                    'es-AR',
                    'es-BO',
                    'es-CL',
                    'es-CO',
                    'es-CR',
                    'es-DO',
                    'es-EC',
                    'es-ES',
                    'es-GT',
                    'es-HN',
                    'es-MX',
                    'es-NI',
                    'es-PA',
                    'es-PE',
                    'es-PR',
                    'es-PY',
                    'es-SV',
                    'es-US',
                    'es-UY',
                    'es-VE',
                    'et-EE',
                    'eu-ES',
                    'fa-IR',
                    'fi-FI',
                    'fil-PH',
                    'fo-FO',
                    'fr-BE',
                    'fr-CA',
                    'fr-CH',
                    'fr-FR',
                    'fr-LU',
                    'fr-MC',
                    'fy-NL',
                    'ga-IE',
                    'gd-GB',
                    'gl-ES',
                    'gsw-FR',
                    'gu-IN',
                    'ha-Latn-NG',
                    'he-IL',
                    'hi-IN',
                    'hr-BA',
                    'hr-HR',
                    'hsb-DE',
                    'hu-HU',
                    'hy-AM',
                    'id-ID',
                    'ig-NG',
                    'ii-CN',
                    'is-IS',
                    'it-CH',
                    'it-IT',
                    'iu-Cans-CA',
                    'iu-Latn-CA',
                    'ja-JP',
                    'ka-GE',
                    'kk-KZ',
                    'kl-GL',
                    'km-KH',
                    'kn-IN',
                    'kok-IN',
                    'ko-KR',
                    'ky-KG',
                    'lb-LU',
                    'lo-LA',
                    'lt-LT',
                    'lv-LV',
                    'mi-NZ',
                    'mk-MK',
                    'ml-IN',
                    'mn-MN',
                    'mn-Mong-CN',
                    'moh-CA',
                    'mr-IN',
                    'ms-BN',
                    'ms-MY',
                    'mt-MT',
                    'nb-NO',
                    'ne-NP',
                    'nl-BE',
                    'nl-NL',
                    'nn-NO',
                    'nso-ZA',
                    'oc-FR',
                    'or-IN',
                    'pa-IN',
                    'pl-PL',
                    'prs-AF',
                    'ps-AF',
                    'pt-BR',
                    'pt-PT',
                    'qut-GT',
                    'quz-BO',
                    'quz-EC',
                    'quz-PE',
                    'rm-CH',
                    'ro-RO',
                    'ru-RU',
                    'rw-RW',
                    'sah-RU',
                    'sa-IN',
                    'se-FI',
                    'se-NO',
                    'se-SE',
                    'si-LK',
                    'sk-SK',
                    'sl-SI',
                    'sma-NO',
                    'sma-SE',
                    'smj-NO',
                    'smj-SE',
                    'smn-FI',
                    'sms-FI',
                    'sq-AL',
                    'sr-Cyrl-BA',
                    'sr-Cyrl-CS',
                    'sr-Cyrl-ME',
                    'sr-Cyrl-RS',
                    'sr-Latn-BA',
                    'sr-Latn-CS',
                    'sr-Latn-ME',
                    'sr-Latn-RS',
                    'sv-FI',
                    'sv-SE',
                    'sw-KE',
                    'syr-SY',
                    'ta-IN',
                    'te-IN',
                    'tg-Cyrl-TJ',
                    'th-TH',
                    'tk-TM',
                    'tn-ZA',
                    'tr-TR',
                    'tt-RU',
                    'tzm-Latn-DZ',
                    'ug-CN',
                    'uk-UA',
                    'ur-PK',
                    'uz-Cyrl-UZ',
                    'uz-Latn-UZ',
                    'vi-VN',
                    'wo-SN',
                    'xh-ZA',
                    'yo-NG',
                    'zh-CN',
                    'zh-HK',
                    'zh-MO',
                    'zh-SG',
                    'zh-TW',
                    'zu-ZA',);

    foreach ($locales as $locale)
    {
        $locale_region = locale_get_region($locale);
        $locale_language = locale_get_primary_language($locale);
        $locale_array = array('language' => $locale_language,
                             'region' => $locale_region);

        if (strtoupper($country_code) == $locale_region &&
            $language_code == '')
        {
            return locale_compose($locale_array);
        }
        elseif (strtoupper($country_code) == $locale_region &&
                strtolower($language_code) == $locale_language)
        {
            return locale_compose($locale_array);
        }
    }

    return null;
}
?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T06:09:07.327

You cannot automatically convert country code to language code because some countries use multiple languages. On the other hand, OS localization system may support multiple variants of a single language for different countries (for example, en_GB vs en_US).

For example, Switzerland (CH) has both German and French commonly used (64% and 20% of the population, according to [http://en.wikipedia.org/wiki/Switzerland](http://en.wikipedia.org/wiki/Switzerland)). If you have to decide a single language for country code CH either of those languages could make sense for some people. Note that some parts of the Switzerland use only German or French as the official language (but not both, see [http://en.wikipedia.org/wiki/File:Sprachen_CH_2000_EN.svg](http://en.wikipedia.org/wiki/File:Sprachen_CH_2000_EN.svg) for details).

If you MUST select a single language for each country, I'd suggest doing the selection by hand for every country you support. For an half-assed automatic implementation, you could scan through your available localizations and select the first one that has the matching country code after the underscore.

Also note the corollary: languages cannot be represented by national flags because languages and countries do not have 1:1 relation. One to many relations can be found in both directions.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-10-22T21:04:38.610

正如其他答案所指出的，国家和语言之间没有一对一的映射。但是，如果您安装了 PHP`Intl`扩展，则应该可以使用 Unicode CLDR[可能的子标签数据](http://cldr.unicode.org/index/cldr-spec/language-tag-equivalences#TOC-Likely-subtags)来获取特定国家/地区的“默认”或“可能”语言：

```
function getLanguage(string $country): string {
    $subtags = \ResourceBundle::create('likelySubtags', 'ICUDATA', false);
    $country = \Locale::canonicalize('und_'.$country);
    $locale = $subtags->get($country) ?: $subtags->get('und');
    return \Locale::getPrimaryLanguage($locale);
} 
```

现在，当您`getLanguage()`使用国家/地区代码调用该函数时，您将获得相应的语言代码：

```
getLanguage('US'); // "en"
getLanguage('GB'); // "en"
getLanguage('DE'); // "de"
getLanguage('CH'); // "de"
getLanguage('IN'); // "hi"
getLanguage('NO'); // "nb"
getLanguage('BR'); // "pt" 
```

这也适用于三个字母的国家代码：

```
getLanguage('USA'); // "en"
getLanguage('GBR'); // "en"
getLanguage('AUT'); // "de"
getLanguage('FRA'); // "fr" 
```

甚至[联合国 M49](https://en.wikipedia.org/wiki/UN_M49)代码：

```
getLanguage('003'); // "en"
getLanguage('013'); // "es"
getLanguage('039'); // "it"
getLanguage('155'); // "de" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T00:32:30.910

您将需要交叉引用这些文件：

> [http://www.ethnologue.com/codes/LanguageIndex.tab](http://www.ethnologue.com/codes/LanguageIndex.tab) [http://www.ethnologue.com/codes/CountryCodes.tab](http://www.ethnologue.com/codes/CountryCodes.tab) [http://www.ethnologue.com/codes/LanguageCodes.tab](http://www.ethnologue.com/codes/LanguageCodes.tab)
> 
> ..或将它们全部放在一个 zip 中： [http ://www.ethnologue.com/codes/Language_Code_Data_20110104.zip](http://www.ethnologue.com/codes/Language_Code_Data_20110104.zip)

我知道当前没有返回此数据的设置 PHP 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-03T23:49:44.437

[TheJF](https://stackoverflow.com/a/10375234/7588861)的回答非常好，但是我遇到了一些（一般）问题：

*   `br-FR`如果您致电，他的代码将返回`country_code_to_locale("FR")`-根据维基百科，现在`br`（布列塔尼语）甚至不是官方语言。虽然`fr-FR`在列表中，`br-FR`但在数组中是第一个。这也发生在许多其他国家。

*   许多其他语言环境列表正试图极其完整并考虑所有可能的语言

*   在这里很难划清界限，您当然希望为一个国家保留多种语言的好例子是：加拿大和瑞士

我采用了一种**简单的方法**：

*   我**为大多数国家只保留了一种语言**，并为一些国家留下了多种语言，如 BE、CA、CH、ZA。我保留了`es-US`，但我不确定（维基百科说`Official languages: None at federal level`：）

*   我还为我懒得研究或同时使用拉丁文和西里尔文的国家保留了多种语言

*   我添加了`shuffle($locales);`这将使数组随机化，以便我们**为具有多种语言的国家/地区获得随机语言环境**。这对我的用例很有意义，但您可能想删除它。

*   就我的目的而言，只有在网络上具有相关流行度的语言才会引起人们的兴趣。这份清单绝不是完整或正确的，而是务实的。

所以这是我的语言环境列表：

```
$locales = array('af-ZA',
                'am-ET',
                'ar-AE',
                'ar-BH',
                'ar-DZ',
                'ar-EG',
                'ar-IQ',
                'ar-JO',
                'ar-KW',
                'ar-LB',
                'ar-LY',
                'ar-MA',
                'ar-OM',
                'ar-QA',
                'ar-SA',
                'ar-SY',
                'ar-TN',
                'ar-YE',
                'az-Cyrl-AZ',
                'az-Latn-AZ',
                'be-BY',
                'bg-BG',
                'bn-BD',
                'bs-Cyrl-BA',
                'bs-Latn-BA',
                'cs-CZ',
                'da-DK',
                'de-AT',
                'de-CH',
                'de-DE',
                'de-LI',
                'de-LU',
                'dv-MV',
                'el-GR',
                'en-AU',
                'en-BZ',
                'en-CA',
                'en-GB',
                'en-IE',
                'en-JM',
                'en-MY',
                'en-NZ',
                'en-SG',
                'en-TT',
                'en-US',
                'en-ZA',
                'en-ZW',
                'es-AR',
                'es-BO',
                'es-CL',
                'es-CO',
                'es-CR',
                'es-DO',
                'es-EC',
                'es-ES',
                'es-GT',
                'es-HN',
                'es-MX',
                'es-NI',
                'es-PA',
                'es-PE',
                'es-PR',
                'es-PY',
                'es-SV',
                'es-US',
                'es-UY',
                'es-VE',
                'et-EE',
                'fa-IR',
                'fi-FI',
                'fil-PH',
                'fo-FO',
                'fr-BE',
                'fr-CA',
                'fr-CH',
                'fr-FR',
                'fr-LU',
                'fr-MC',
                'he-IL',
                'hi-IN',
                'hr-BA',
                'hr-HR',
                'hu-HU',
                'hy-AM',
                'id-ID',
                'ig-NG',
                'is-IS',
                'it-CH',
                'it-IT',
                'ja-JP',
                'ka-GE',
                'kk-KZ',
                'kl-GL',
                'km-KH',
                'ko-KR',
                'ky-KG',
                'lb-LU',
                'lo-LA',
                'lt-LT',
                'lv-LV',
                'mi-NZ',
                'mk-MK',
                'mn-MN',
                'ms-BN',
                'ms-MY',
                'mt-MT',
                'nb-NO',
                'ne-NP',
                'nl-BE',
                'nl-NL',
                'pl-PL',
                'prs-AF',
                'ps-AF',
                'pt-BR',
                'pt-PT',
                'ro-RO',
                'ru-RU',
                'rw-RW',
                'sv-SE',
                'si-LK',
                'sk-SK',
                'sl-SI',
                'sq-AL',
                'sr-Cyrl-BA',
                'sr-Cyrl-CS',
                'sr-Cyrl-ME',
                'sr-Cyrl-RS',
                'sr-Latn-BA',
                'sr-Latn-CS',
                'sr-Latn-ME',
                'sr-Latn-RS',
                'sw-KE',
                'tg-Cyrl-TJ',
                'th-TH',
                'tk-TM',
                'tr-TR',
                'uk-UA',
                'ur-PK',
                'uz-Cyrl-UZ',
                'uz-Latn-UZ',
                'vi-VN',
                'wo-SN',
                'yo-NG',
                'zh-CN',
                'zh-HK',
                'zh-MO',
                'zh-SG',
                'zh-TW'); 
```

和代码：

```
function country_code_to_locale($country_code)
{
    $locales = ...

    // randomize the array, such that we get random locales
    // for countries with multiple languages (CA, CH)
    shuffle($locales);

    foreach ($locales as $locale) {
        $locale_region = locale_get_region($locale);

        if (strtoupper($country_code) == $locale_region) {
            return $locale;
        }
    }

    return "en-US";
} 
```

# vb.net - VB.NET 在项目中包含 .exe 并附加到主进程

> ID：10175663
> 
> 赞同：0
> 
> 时间：2012-04-16T14:03:59.010
> 
> 标签：vb.net, process

我有一个 VB.NET 项目 (main.exe) 并包含一个额外的 .exe 应用程序作为内部资源。现在我不想将额外的 .exe 作为一个单独的进程运行，而是想将它附加到 main.exe 的进程中，所以我总共只有 1 个进程，而不是 2 个。

这可以以某种方式完成吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:11:32.880

解决方法是将additional.exe编译为.dll，在VB.NET中使用

# html - WkHtmlToXSharp - System.AccessViolationException

> ID：10175666
> 
> 赞同：4
> 
> 时间：2012-04-16T14:04:13.273
> 
> 标签：html, pdf, wkhtmltopdf

我在我的项目中使用 WkHtmlToXSharp 包装库从 HTML 生成 PDF 文件。

我在不同的 PC 上多次使用这个库，突然间，我遇到了以下问题：

**System.AccessViolationException：试图读取或写入受保护的内存。这通常表明其他内存已损坏。在 WkHtmlToXSharp.WkHtmlToPdfConverter.wkhtmltopdf_convert(IntPtr 转换器) 在 WkHtmlToXSharp.WkHtmlToPdfConverter。*Convert(String inputHtml) at WkHtmlToXSharp.WkHtmlToPdfConverter.Convert() at WkHtmlToXSharp.MultiplexingConverter.b*_8() --- 内部异常堆栈跟踪结束 --- 在 Sanford.Threading.DelegateQueue.EndInvoke(IAsyncResult 结果) 在 Sanford.Threading.DelegateQueue.Invoke(Delegate method, Object[] args) 在 WkHtmlToXSharp.MultiplexingConverter.Convert ()**

这似乎是这个库的一个常见问题（我在网上找到了一些关于它的反馈 - 但是没有提供修复）。顺便说一句，就我而言，它的发生有点随机。我在其他开发机器上没有遇到这个问题。我想知道是否有人可以解决它。我还想知道这是否是包装库的问题，如果是 WkHtmlToPDF 库本身。

有什么建议吗？我也愿意使用另一个转换器，只要它是免费且稳定的，并且如果可能的话，不产生新进程。它必须在所有 Windows 版本中正常和稳定地工作，并且可以进行体面的转换（要转换的 HTML 是固定的 - 包含一些图片和表格以及基本的 CSS）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:00:08.887

我建议另一种方法：直接使用 wkhtmltopdf.exe，构建自己的包装器。如果您可以控制输入并且您确切地知道如何更新它以及选项如何工作，那么它们并不是很复杂。直接使用 wkhtmltopdf（在 Win7、Win server 2008 r2、Ubuntu 和 CentOS 上）时，我从未遇到过这个问题。不过，它们确实会为每次转换生成过​​程。

例如，查看[我关于 wkhtmltopdf 的另一个答案中的](https://stackoverflow.com/questions/10292689/wkhtmltopdf-outputstream-download-diaglog/11991670#11991670)Derp 类。或者试试下面未经测试的代码（你的真实代码会更复杂，这只是一个演示/POC）。

```
var pi = new ProcessStartInfo(@"c:\wkhtmltopdf\wkhtmltopdf.exe");
pi.CreateNoWindow = true;
pi.UseShellExecute = false;
pi.WorkingDirectory = @"c:\wkhtmltopdf\";
pi.Arguments = "http://www.google.com gogl.pdf";

using (var process = Process.Start(pi))
{
    process.WaitForExit(99999);
    Debug.WriteLine(process.ExitCode);
} 
```

# windows - 获取有关 Windows 上其他进程的信息

> ID：10175667
> 
> 赞同：2
> 
> 时间：2012-04-16T14:04:15.887
> 
> 标签：windows, perl, process

如何获取有关 Windows 中其他（与 perl.exe 无关的）进程的信息？

比如说，我有一个脚本想要监控所有`firefox.exe`进程的一些基本信息。

我想做类似的事情：

```
#!perl -w
use warnings;
use strict;
use MagicModule qw/ read_process_info /;
use Data::Dumper;

my $ps = MagicModule::read_process_info();

print Dumper($ps); 
```

并看到类似的东西：

```
$VAR = [
    {
        ProcessName  => 'firefox.exe',
        PID          => 1234,
        PirvateBytes => 21153546,
        WorkingSet   => 134566354,
        # etc...
    },
    {
        ProcessName  => 'firefox.exe',
        PID          => 1556,
        PirvateBytes => 15435487,
        WorkingSet   => 245774448,
        # etc...
    },
    {
        ProcessName  => 'calc.exe',
        PID          => 2777,
        PirvateBytes => 1024,
        WorkingSet   => 4096,
        # etc...
    },
]; 
```

因为我是通过解析 Systinternals 的 PsExec 的输出来获取这些信息的，但显然这根本没有效率。

有哪些不错的 Perl 方法来获取这些数据？

（在 Windows XP 上使用 Strawberry Perl 的解决方案——Windows 7 将是首选。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:45:51.317

WMI 使用[`Win32::OLE`](http://search.cpan.org/perldoc?Win32%3a%3aOLE)是我见过的最简单的方法之一：

```
use Win32::OLE qw<in>;
use constant wbemFlagReturnImmediately => 0x10;
use constant wbemFlagForwardOnly => 0x20;

my $objWMIService 
    = Win32::OLE->GetObject( 'winmgmts:\\\\localhost\root\CIMV2' ) 
    or die 'WMI connection failed.\n'
    ;

my @processes  
    = in $objWMIService->ExecQuery( 
      'SELECT * FROM Win32_Process'
    , 'WQL'
    ,  wbemFlagReturnImmediately | wbemFlagForwardOnly
    ); 
```

[然后您可以在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)查阅对象定义。请记住，可以像哈希键或方法名称一样访问每个字段：（`$_->{Caption}`或`$_->Caption`）

# php - PHP：move_uploaded_file 问题。这里有什么问题？

> ID：10175672
> 
> 赞同：0
> 
> 时间：2012-04-16T14:04:39.693
> 
> 标签：php, file-upload

我很难让这个工作，我还没有想出一个工作场景。基本上，这是一个简单的用户友好的管理员，应该上传图像。但是，我无法让上传工作。文件名被添加到数据库中就好了，但图像不会上传。

这是代码：

```
function editMain($data){
  array_pop($data);
  $where = "main_id = {$data['main_id']}";
  unset($data['main_id']);
//upload image
if ($_FILES['main_picture']['size'] > 1){ //if image deal with it
  $data['main_picture'] = '/images/'.$_FILES['main_picture']['name'];
  $uploadedfile = $_FILES['main_picture']['tmp_name'];
  if (move_uploaded_file($uploadedfile, SITE_ROOT.$data['main_picture']))
  echo "successfully uploaded {$data['main_picture']}<br />";
  else 
  echo "failed to upload {$data['main_picture']}<br />";
} 
```

感谢您的关注，并提前感谢您为我指明了正确的方向！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:19:52.487

`SITE_ROOT`需要是本地目录，即“ `C:\...`”或“ `/home/...`”，不能是URL结构。将其更改为应上传文件的本地目录，检查权限，您应该一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:24:35.597

我这样使用它：

```
 if(!is_dir($dir = $_SERVER['DOCUMENT_ROOT']."/fies_path"))mkdir($dir);
    move_uploaded_file($_FILES['file']['tmp_name'],$src = $dir."/$file_name.ext"); 
```

# xml - 带有重复标题的 XSL-FO 表

> ID：10175674
> 
> 赞同：4
> 
> 时间：2012-04-16T14:04:54.823
> 
> 标签：xml, xslt, pdf-generation, xsl-fo

我会尽力解释这一点...

我正在使用 XML 和 XSL-FO 生成 PDF。该文档有两列带有表头。我想让表格标题只在到达新页面时重复。它目前正在这样做，但是当表格标题到达另一列时，表格标题也会重复。我只希望它在不同的页面上重复。任何帮助将不胜感激。

这是标头的 XSL：

```
<xsl:template match="MAJOR">
    <fo:table rx:table-omit-initial-header="true" width="95%">

        <fo:table-column/>
        <fo:table-header>
            <fo:table-row keep-with-next="always">
                <fo:table-cell>
                    <fo:block font-family="Times New Roman" font-size="8pt" font-weight="bold"><xsl:value-of select="@NAME"/>--Cont'd</fo:block>
                </fo:table-cell>
                <fo:table-cell><fo:block/></fo:table-cell>
            </fo:table-row>
        </fo:table-header>

        <fo:table-body>
            <fo:table-row keep-with-next="always">
                <fo:table-cell>
                    <fo:block font-family="Times New Roman" font-size="8pt" font-weight="bold"><xsl:value-of select="@NAME"/></fo:block>
                </fo:table-cell>
                <fo:table-cell><fo:block/></fo:table-cell>
            </fo:table-row>
            <xsl:apply-templates/>
        </fo:table-body>
    </fo:table>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-22T12:59:13.950

你可以这样试试吗？如果这仍然不起作用，您能否附上数据 xml 文件？

```
 <xsl:template match="/">
        <fo:table rx:table-omit-initial-header="true" width="95%">
            <fo:table-column/>
                <fo:table-header>
                    <fo:table-row keep-with-next="always">
                        <fo:table-cell>
                            <fo:block font-family="Times New Roman" font-size="8pt" font-weight="bold"><xsl:value-of select="@NAME"/>--Cont'd</fo:block>
                        </fo:table-cell>
                        <fo:table-cell><fo:block/></fo:table-cell>
                    </fo:table-row>
                </fo:table-header>

                <fo:table-body>
                    <xsl:for-each select="MAJOR">
                    <fo:table-row keep-with-next="always">
                        <fo:table-cell>
                            <fo:block font-family="Times New Roman" font-size="8pt" font-weight="bold"><xsl:value-of select="@NAME"/></fo:block>
                        </fo:table-cell>
                        <fo:table-cell><fo:block/></fo:table-cell>
                    </fo:table-row>
                </xsl:for-each>
            </fo:table-body>
        </fo:table>
    </xsl:template> 
```

编辑：只是格式化

# rest - 从 Classic ASP 向 RESTful WS 发送 JSON 字符串

> ID：10175676
> 
> 赞同：1
> 
> 时间：2012-04-16T14:05:02.767
> 
> 标签：rest, asp-classic, vbscript

我基本上是经典 ASP 和 VBScript 的菜鸟，所以我想获得一些帮助来实现我在这里的目标。我已经构建了一个 JSON 字符串，我需要使用 VBScript 将它发送到一个 RESTful Web 服务。我怎么做？

我有一些代码，但我认为它不起作用：

```
strJSONToSend = JSONstr 'this is where I use my built JSON string

webserviceurl = "url here" 

Set objRequest = Server.createobject("MSXML2.XMLHTTP.3.0") 
objRequest.open "POST", webserviceurl, False 

objRequest.setRequestHeader "Content-Type", "application/json; charset=UTF-8" 
objRequest.setRequestHeader "CharSet", "utf-8" 
objRequest.setRequestHeader "SOAPAction", webserviceurl

Set objJSONDoc = Server.createobject("MSXML2.DOMDocument.3.0") 
objJSONDoc.loadXml strJSONToSend 
objRequest.send objJSONDoc 

set objJSONDoc = nothing 
set objResult = nothing 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:46:09.300

您不需要将 JSON 转换为 XML（因为它是 JSON 而不是 XML 等等）：

```
strJSONToSend = JSONstr 'this is where I use my built JSON string

webserviceurl = "url here" 

Set objRequest = Server.createobject("MSXML2.XMLHTTP.3.0") 
objRequest.open "POST", webserviceurl, False 

objRequest.setRequestHeader "Content-Type", "application/json; charset=UTF-8" 
objRequest.setRequestHeader "CharSet", "utf-8" 
objRequest.setRequestHeader "SOAPAction", webserviceurl

objRequest.send strJSONToSend

set objJSONDoc = nothing 
set objResult = nothing 
```

# verilog - 表达式的含义

> ID：10175677
> 
> 赞同：1
> 
> 时间：2012-04-16T14:05:04.937
> 
> 标签：verilog

下面的表达式是什么意思？

```
max-tick  =   (r-reg==2**N-1)  ?   l'bl  :  l'bO; 
```

特别是 ** 运算符，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:10:15.547

```
2**n-1 == (2**n)-1 
```

** 是指数，2 的 n 次方，在其他语言中是 2^n。

# android - 列表项在 Android 中不可点击

> ID：10175679
> 
> 赞同：0
> 
> 时间：2012-04-16T14:05:09.920
> 
> 标签：android, listview, onclick, android-event

我有一个自定义 ListView，在 List 中有 3 ImageView 和 4 Textview 。我无法点击列表项，我可以点击空白空间。那么如何点击列表项和 onClick 侦听器应该工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:17:24.113

如果您的列表单元格中有可点击的视图，则必须通过调用将这些视图设置为不可聚焦（在代码中，在设置 onClickListeners 之后）以使单元格也可点击：

```
myCellButton.setOnClickListener(buttonClickListener);
myCellButton.setFocusable(false); 
```

# c++ - 共享内存 - 需要同步

> ID：10175691
> 
> 赞同：4
> 
> 时间：2012-04-16T14:06:23.887
> 
> 标签：c++, windows, concurrency, shared-memory

我见过一个项目，其中进程之间的通信是使用共享内存进行的（例如，`::CreateFileMapping`在 Windows 下使用），每次其中一个进程想要通知共享内存中有一些数据可用时，使用命名事件的同步机制会通知感兴趣的一方共享内存的内容发生了变化。

我担心这样一个事实，即读取新信息的进程不存在适当的内存围栏，以知道它必须使其数据副本无效并在生产者进程“发布”后从主内存中读取它.

您知道如何在 Windows 上使用共享内存来实现这一点吗？

**编辑** 只是想补充一点，在创建文件映射后，进程只使用一次 MapViewOfFile() API，每次对共享数据的新修改都使用通过初始调用 MapViewOfFile() 获得的指针来读取通过共享内存发送的新数据. 正确的同步是否要求每次共享内存中的数据更改时，读取数据的进程必须每次都创建 MapViewOfFile() ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T16:37:22.837

如果您使用 Windows 命名事件来发出更改信号，那么一切都应该没问题。

进程 A 更改数据并调用`SetEvent`.

进程 B 等待使用`WaitForSingleObject`或类似的事件，并看到它已设置。

然后进程 B 读取数据。`WaitForSingleObject`包含所有必要的同步，以确保进程 A 在调用之前所做的更改`SetEvent`被进程 B 读取。

当然，如果您在调用 之后对数据进行了任何更改**，**那么`SetEvent`这些可能会在进程 B 读取数据时显示，也可能不会显示。

如果你不想使用事件，你可以使用用创建的互斥锁，或者你可以使用诸如和之类`CreateMutex`的函数编写无锁代码。`Interlocked...``InterlockedExchange``InterlockedIncrement`

无论您如何进行同步，都不需要`MapViewOfFile`多次调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T15:42:21.400

您在 Windows 上寻找共享内存的是 InterlockedExchange 功能。请参阅[此处的 msdn 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683590%28v=vs.85%29.aspx)。引用了真正重要的部分：

> 该函数生成一个完整的内存屏障（或栅栏），以确保内存操作按顺序完成。

这将跨进程运行。我以前使用过它，发现它对于在共享内存上实现类似互斥的构造是 100% 可靠的。

你如何做到这一点是你用“设置”值交换它。如果你得到“清除”回来，你就有了（很清楚），但如果你得到“设置”回来，那么其他人就有了。你循环，循环之间的睡眠等等，直到你“得到”它。基本上是这样的：

```
#define LOCK_SET 1
#define LOCK_CLEAR 0

int* lock_location = LOCK_LOCATION; // ensure this is in shared memory
if (InterlockedExchange(lock_location, LOCK_SET) == LOCK_CLEAR)
{
    return true; // got the lock
}
else
{
    return false; // didn't get the lock
} 
```

如上所述，循环直到你“得到”它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:40:31.947

让我们称进程 A 为数据生产者，进程 B 为数据消费者。到目前为止，您有一种机制让进程 A 通知进程 B 新数据已生成。我建议您创建一个反向通知（从 B 到 A），它告诉进程 A 数据已被使用。如果出于性能原因，您不希望进程 A 等待数据被使用，您可以在共享内存中设置一个[环形缓冲区。](http://en.wikipedia.org/wiki/Ring_buffer)

# grails - 如何在 Grails 应用程序中使用加密的配置数据？

> ID：10175693
> 
> 赞同：2
> 
> 时间：2012-04-16T14:06:55.150
> 
> 标签：grails

我正在开发基于 Grails 的应用程序。
我已将我的应用程序配置为使用配置文件（conf 文件夹中的 app-config.properties 文件）中的邮件和数据库设置。它工作正常。

## **配置.groovy**：

```
grails<br /> 
{<br />
    mail<br />
    {<br />
        host = ""<br />
        username = ""<br />
        password = ""<br />
        port =  0<br />
        from =  "" <br />
        props = ["mail.smtp.auth":"true" ]<br />
    }<br />
}<br />
**app-config.properties**:<br /> 
```

* * *

```
grails.mail.default.from =abc@test.com<br />
grails.mail.host =mail.test.com<br />
grails.mail.username =testUser<br />
grails.mail.password =testPassword<br />
grails.mail.port =25<br />
grails.mail.from = abc@test.com<br /> 
```

**其他一些细节**：
1\. Grails 版本：1.3.7
2.邮件插件版本：1.0

我的要求是我想使用加密的用户名和密码进行邮件设置。
我的问题是，如何将任何加密属性与邮件设置以及 Grails 中的任何其他属性（即数据库用户凭据......）一起使用。

问候，
Sanjay Kharwar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:04:35.247

已经在以下两个地方得到了一些回答：

[堆栈溢出答案](https://stackoverflow.com/questions/3336391/howto-encrypt-passwords-in-configuration-files-grails-and-java)

[Grails-3620](http://jira.grails.org/browse/GRAILS-3620)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T21:16:54.680

我在搜索时遇到了这个网站：http: [//grsage.com/new/GrailsPasswordEncyrption.html](http://grsage.com/new/GrailsPasswordEncyrption.html)

这很直接。

# python - 如何构建不同类型的一对多关系？

> ID：10175698
> 
> 赞同：1
> 
> 时间：2012-04-16T14:07:21.707
> 
> 标签：python, sqlalchemy

如果我有两个表：A（id，...其他一些列）和 B（id，...一些其他列）。我需要将 Comments（另一个表：id、text、author）与 A 和 B 对象相关联。

我可以为此目的创建第四个表：comment_id、table_id（A 或 B 或其他）、item_id 吗？我的意思是一些 sqlalchemy 方式？

现在我只知道这两个解决方案： http: [//bpaste.net/show/27149/](http://bpaste.net/show/27149/) - 对于每个 A 和 B，将有单独的表格和注释。我认为这不是一个好主意，因为这些表（应该）是相同的，如果我想查看某个作者的所有评论 - 如果有一天会有 C 表，这将比其他方式更困难 - 我将需要为其评论创建一个表格...

另一种解决方案 - [http://bpaste.net/show/27148/](http://bpaste.net/show/27148/)。我认为更好，但我仍然需要为我需要评论项目的每个表创建一个关联表。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:06:45.937

你可以试试：

```
class Comment(Base):
    __tablename__ = 'comments'

    id = Column(Integer, primary_key=True)
    a_id = Column(Integer, ForeignKey('a.id'), nullable=True)
    b_id = Column(Integer, ForeignKey('b.id'), nullable=True)
    text = Column(UnicodeText, nullable=False)

    def __init__(self, text):
        self.text = text 
```

它仍然是一种比较老套的方法，但它通过使用外键来保持引用完整性。

如果您想寻找存储表名的解决方案，您可以尝试以下方法：

```
class A(Base):
    __tablename__ = 'as'

    id = Column(Integer, primary_key=True)
    name = Column(Unicode, nullable=False, unique=True)
    comments = relationship("Comment",
                    primaryjoin="and_(A.id==Comment.id, "
                        "Comment.model=='A')")

    def __init__(self, name):
        self.name = name

class Comment(Base):
    __tablename__ = 'comments'

    id = Column(Integer, primary_key=True)
    text = Column(UnicodeText, nullable=False)
    model = Column(String(50), nullable=False)

    def __init__(self, text):
        self.text = text 
```

我自己没有对此进行测试，因此如果您遇到问题，请查看[指定备用连接条件](http://docs.sqlalchemy.org/en/latest/orm/relationships.html#specifying-alternate-join-conditions)或评论，我会做更多的研究。

有关该主题的深入解释，请参阅[Mike Bayer 关于多态关联的博客条目](http://techspot.zzzeek.org/2007/05/29/polymorphic-associations-with-sqlalchemy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:18:00.693

我也会选择第二种解决方案。但是，正如您所说，可能会有第三个表`C`，那么您可以将`B_Comment`and`A_Comment`作为字段放在一个关联表中，例如：

```
class Comment(Base):
    id = Column(Integer, primary_key=True)
    a_id = Column(Integer, ForeignKey('as.id'), primary_key=True, nullable=True)
    b_id = Column(Integer, ForeignKey('bs.id'), primary_key=True, nullable=True)
    text = Column(UnicodeText, nullable=False)
    # ... 
```

您将使用如下查询：`session.query(Comment).filter_by(a=whatever)`

我想你可以添加某种约束，这样`a_id`和`b_id`不是同时的`NULL`？

这是另一种方法（我不知道这是否是*标准*方法，但它应该可以工作......

```
class Letter(Base):
    id = ...

class A(Base):
    letter_id = Column(Integer, ForeignKey('letters.id'), primary_key=True, nullable=False)
    # ...

class Comment(Base):
    letter_id = Column(Integer, ForeignKey('letters.id'), primary_key=True, nullable=True)
    # ... 
```

# php - 我的 JSON 没有被 PHP 解码

> ID：10175703
> 
> 赞同：0
> 
> 时间：2012-04-16T14:07:40.347
> 
> 标签：php, javascript, jquery, json

我的 PHP 脚本在解码我通过 AJAX 发送给它的 JSON 时遇到问题。

jQuery：

```
$.ajax({
    url : 'admin/modifyPermissions',
    type : 'post',
    data : {
        'JSON' : JSON
    },
    success : function(msg){
        if(msg == '1') {
            alert('Permissions saved successfully');
        } else {
            alert(msg);
        }
    }
}); 
```

PHP 脚本：

```
public function modifyPermissions(){

    if(isset($_POST['JSON']) && !empty($_POST['JSON'])) {
        $json = json_decode($_POST['JSON'],true);
        if($json !== NULL && $json !== FALSE) {

        } elseif($json === NULL){
            die('The string passed is not a valid JSON object and cannot be decoded.' . "\n" . $_POST['JSON']);
        } else {
            die('There was an error with the JSON string');
        }
    } else {
        die('No JSON string was sent!');
    }
} 
```

传递的 JSON 在我看来格式正确：

```
{"martin":{3,5},"user2":{3,4,5}} 
```

PHP返回null。我的服务器上安装了 PHP 5.2.7，所以我不能使用 json_last_error()

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:09:35.523

```
{"martin":{3,5},"user2":{3,4,5}} 
```

无效的 JSON。有效的 JSON 可能如下所示：

```
{"martin":[3,5],"user2":[3,4,5]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:11:53.453

您没有发送有效的 JSON，因此出现错误。查看@Matt 添加的评论。

这样您就不会重现相同的错误，在将其发送到 PHP 之前，不要尝试制作自己的 JSON 字符串，使用 JS 为您提供的内容。例子：

```
var obj = { key: val, okey: oval }
objJSON = JSON.stringify(obj)
// objJSON is ALWAYS going to be valid json 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:12:32.833

您的 JSON 无效。

该`{}`符号表示键/值对，当您将其用作数组时。

你的 JSON 应该是，

```
{"martin":[3,5],"user2":[3,4,5]} 
```

# sql-server - 为 SQL Server 2008 上的索引重新组织和重建

> ID：10175705
> 
> 赞同：1
> 
> 时间：2012-04-16T14:07:43.873
> 
> 标签：sql-server, sql-server-2008

我尝试使用带有 SQL Server 2008 的 SQL Server Management Studio 创建数据库维护计划。
如果我使用数据库维护计划向导并将其设置为全部重建索引，然后运行包，它在表上失败。

然后我只是在对象资源管理器中找到该表并使用该表的弹出菜单中的“重建所有索引”，这很好。

如此迷茫。这是否意味着这两种方式需要不同的设置？如何解决这个问题？

另一个问题是：如果应用Rebuild index，那么不需要使用Reorganize，对吗？

这是来自作业历史记录的错误消息：消息以用户身份执行：xxx\sqlservice。Microsoft (R) SQL Server Execute Package Utility Version 10.0.5500.0 for 64-bit 版权所有 (C) Microsoft Corp 1984-2005。版权所有。开始时间：晚上 7:21:27 进度：2012-04-14 19:21:27.96 来源：{9FA4339C-7D29-4059-871B-5160B63DBBA0} 执行查询“DECLARE @Guid UNIQUEIDENTIFIER EXECUTE msdb..sp...”。 : 100% 完成 End Progress Progress: 2012-04-14 19:21:30.09 Source: Rebuild Index Task Executing query "USE [MyDB] ".: 0% complete End Progress Error: 2012-04-14 19:21:30.12代码：0xC002F210 源：重建索引任务执行 SQL 任务描述：执行查询“ALTER INDEX [MyTab1_PK] ON [dbo].[MyTab1] ...”失败，出现以下错误：“

但如果我单独在表 MyTab1 上进行操作，那就没问题了。
我从列表中删除了 MyTab1 以进行重建，我将在另一个表上收到另一个错误，并显示不同的错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:57:45.057

在设置维护计划时，您需要确保取消选中重建索引子计划中的框，标题为：

> 重新索引时保持索引在线

我怀疑您或某人在创建/编辑维护计划时选中了该框，因为默认情况下不应选中它（这就是手动重建索引时不会发生错误的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T13:44:33.623

我的问题是因为我有一个离线数据库，我预计在不久的将来会删除它。删除数据库后，问题就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:58:41.573

回答您的问题，Index Rebuild 删除现有索引并重新创建它，因此无需使用 reorganize （仅适用于索引的叶节点。）

错误很简单：“在线索引操作只能在SQL Server企业版中执行。”

在线重建在企业版 SQL Server 上可以在线使用，而您的版本可能不可用，因此只需在您的向导上将操作设置为不运行“在线”即可。

快速解释：在线重建，重建 tempDB 上的索引，使其在重建时可用于查询。当操作花费大量时间并且您不能让索引“未使用”时使用它。

# asp.net-mvc-3 - 如何从数据库第一个 EF 模型添加 MVC3 控制器？

> ID：10175707
> 
> 赞同：0
> 
> 时间：2012-04-16T14:07:58.280
> 
> 标签：asp.net-mvc-3, entity-framework, controller

试图从我的 EF 模型中添加一个控制器，但不确定我做错了什么。

我从我的数据库创建了一个模型，但是当我尝试添加一个控制器时，我得到一个错误：

“无法检索“JobsApp.Category”的元数据。无法确定“JobsApp.Job”和“JobsApp.Category”类型之间关联的主体端。必须使用关系显式配置此关联的主体端流畅的 API 或数据注释。”....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:38:17.063

看起来你的模型类有一些问题——你需要先解决这些问题。

[关于“必须使用关系流式 API 或数据注释明确配置此关联的主体端”的问题（和答案）您在 SO 上看到的异常。](https://stackoverflow.com/questions/5352059/ef-4-1-model-relationships)

# c++ - 检查 XMM 寄存器是否全为零

> ID：10175711
> 
> 赞同：10
> 
> 时间：2012-04-16T14:08:15.900
> 
> 标签：c++, sse, simd, intrinsics

有没有办法检查`__m128i`变量中的所有位/字节/字等是否为 0？
在我的应用程序中，我必须检查`__m128i`变量中包含的所有整数是否为零。我必须提取它们并分别比较它们吗？

* * *

编辑：

我现在正在做的是：

```
int next = 0;
do{
    //some code

    next = idata.m128i_i32[0] + idata.m128i_i32[1] + idata.m128i_i32[2] + idata.m128i_i32[3];
}while(next > 0); 
```

我需要的是检查是否`idata`全为零，而不必访问每个单独的元素，如果它们是则退出循环......

* * *

根据哈罗德的评论，这是解决方案：

```
__m128i idata = _mm_setr_epi32(i,j,k,l);
do{
    //some code
}while( !_mm_testz_si128(idata, idata) ); 
```

如果每个 DW 的所有低位`idata`都为 0，这将退出循环......谢谢哈罗德！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T16:49:48.773

_mm_testz_si128 是 SSE4.1，在某些 CPU（例如 Intel Atom、AMD Phenom）上不受支持

这是一个与 SSE2 兼容的变体

```
inline bool isAllZeros(__m128i xmm) {
    return _mm_movemask_epi8(_mm_cmpeq_epi8(xmm, _mm_setzero_si128())) == 0xFFFF;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T12:44:04.990

就像 Paul R 对我原来的帖子发表的评论一样：

“您不需要为 的第二个参数初始化一个虚拟参数`PTEST`，也就是说，`_mm_testz_si128(idata, _mm_set1_epi32(0xFFFF))`您可以只针对自身测试一个值。”

`ptest`用一条指令完成整个工作。

这有帮助。

# ant - 从另一个目录中的构建文件中导入类似 ant 路径的结构

> ID：10175720
> 
> 赞同：0
> 
> 时间：2012-04-16T14:08:47.547
> 
> 标签：ant

我有两个 ANT 构建文件，位于不同的目录中。我想将`<include>`一个`<path>`元素的内容从另一个中提取出来。

这似乎应该足够简单，但是我无法找到有关如何正确执行此操作的文档，因为 ANT 坚持始终评估`<path>`相对于当前的元素`basedir`（这是错误的，因为从另一个目录中的文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:09:55.467

> 这似乎应该足够简单，但是我无法找到有关如何正确执行此操作的文档，因为 ANT 坚持始终评估相对于当前 basedir 的元素（这是错误的，因为访问它从另一个目录中的文件）。

ANT 这样做并没有错。**build.xml**文件通常存在于项目（或项目子组件）文件系统的根目录中，并表示该构建的逻辑。

如果您希望在两个项目之间共享路径，那么这是一个坏主意，两个项目很少会共享完全相同的构建路径.....

或者，如果您尝试在两个项目子组件之间共享路径，为什么不[覆盖 basdir](http://ant.apache.org/manual/using.html)属性的默认值，如下所示？

```
<project name="my-project" default="build" basedir="..">
.. 
```

最后，我建议调查使用像[Apache ivy](http://ant.apache.org/ivy/)这样的依赖管理器。让它为您管理构建的类路径。

# 更新

另一种选择是构建项目文件，使路径依赖项位于相同的相对文件系统路径中：

```
$ tree
.
|-- lib
|   |-- dependency1.jar
|   `-- dependency2.jar
|-- sub-component1
|   `-- build.xml
`-- sub-component2
    `-- build.xml 
```

然后每个子组件**build.xml**声明它自己的路径，如下所示：

```
<path id="build.path">
    <fileset dir="../lib" includes="*.jar"/>
</path> 
```

# search - 使用模式匹配的 LDAP 查询

> ID：10175722
> 
> 赞同：1
> 
> 时间：2012-04-16T14:08:50.107
> 
> 标签：search, active-directory, ldap

LDAP 查询是否可以过滤类似于正则表达式的模式？例如，要查找名称与“ABC-nnnnnn”匹配的所有计算机对象，其中“n”是一个数字，并且只有那些具有 6 位数字的计算机对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:12:47.953

据我所知，LDAP 仅支持通配符，例如：

```
(CN=ABC-*) 
```

这将抓住任何以`ABC-`. 您可能需要使用 PowerShell 之类的其他工具或您选择的编程语言进一步过滤结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:16:04.743

LDAP 搜索过滤器不支持模式匹配的概念，但它们支持*排序*的概念。LDAP 客户端应以编程方式查询模式以确定哪些排序规则用于属性，并且如果支持适当的排序规则，则复合过滤器中的过滤器组件的组合 `greaterOrEqual`可能`lessOrEqual`会起作用。结果是否符合预期完全取决于排序规则。

例如：

```
ldapsearch -h hostname -p port \
  -b basedn -s scope \
  `(&(cn>=abc-000000)(cn<=abc-999999))` attribute_list 
```

如上，这是否返回预期结果取决于排序规则。请咨询您友好的社区 LDAP 管理员以获取有关订购规则和架构的帮助。

### 也可以看看

*   [LDAP：协议搜索请求](https://www.rfc-editor.org/rfc/rfc4511#section-4.5.1)
*   [LDAP：掌握搜索过滤器](http://ff1959.wordpress.com/2011/09/21/mastering-ldap-search-filters/)
*   [LDAP：搜索最佳实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)
*   [LDAP：编程实践](http://ff1959.wordpress.com/2011/10/27/ldap-programming-best-practices/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:24:34.977

除了通配符建议之外，没有其他功能可以执行此操作。

# c#-4.0 - 计算 bing 地图中两点之间的距离

> ID：10175724
> 
> 赞同：3
> 
> 时间：2012-04-16T14:08:59.037
> 
> 标签：c#-4.0, silverlight-4.0, bing-maps

我有一个 bing 地图和两个点：Point1，Point2，我想计算这两个点之间的距离？那可能吗？如果我想在point1和point2之间以及point2附近的路径的三分之二上放一个圆圈……我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T06:16:31.823

Microsoft 有一个[GeoCoordinate.GetDistanceTo Method](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate.getdistanceto.aspx)，它使用 Haversine 公式。

对我来说，其他实现对于太小的距离返回 NaN。我还没有遇到内置功能的任何问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-16T14:19:39.007

参见[Haversine](http://en.wikipedia.org/wiki/Haversine_formula)甚至更好的[Vincenty](http://en.wikipedia.org/wiki/Vincenty%27s_formulae)公式如何解决这个问题。

以下代码使用 hasrsines 方式获取距离：

```
public double GetDistanceBetweenPoints(double lat1, double long1, double lat2, double long2)
    {
        double distance = 0;

        double dLat = (lat2 - lat1) / 180* Math.PI;
        double dLong = (long2 - long1) / 180 * Math.PI;

        double a = Math.Sin(dLat / 2) * Math.Sin(dLat / 2)
                    + Math.Cos(lat1 / 180* Math.PI) * Math.Cos(lat2 / 180* Math.PI) 
                    * Math.Sin(dLong/2) * Math.Sin(dLong/2);
        double c = 2 * Math.Atan2(Math.Sqrt(a), Math.Sqrt(1 - a));

        //Calculate radius of earth
        // For this you can assume any of the two points.
        double radiusE = 6378135; // Equatorial radius, in metres
        double radiusP = 6356750; // Polar Radius

        //Numerator part of function
        double nr = Math.Pow(radiusE * radiusP * Math.Cos(lat1 / 180 * Math.PI), 2);
        //Denominator part of the function
        double dr = Math.Pow(radiusE * Math.Cos(lat1 / 180 * Math.PI), 2)
                        + Math.Pow(radiusP * Math.Sin(lat1 / 180 * Math.PI), 2);
        double radius = Math.Sqrt(nr / dr);

        //Calculate distance in meters.
        distance = radius * c;
        return distance; // distance in meters
    } 
```

[你可以在这里](http://www.movable-type.co.uk/scripts/latlong.html)找到一个有信息的好网站。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T12:01:51.913

如果您需要更准确的结果或想要进行一些数学运算（例如将圆转换为类圆/投影），您可以使用地理库进行（重新）投影和计算操作。看看[DotSpatial](http://dotspatial.codeplex.com/)或[SharpMap](http://sharpmap.codeplex.com/)以及那里的示例/单元测试/源...这可能有助于解决您的问题。

无论如何，如果您知道[测地线距离](http://en.wikipedia.org/wiki/Geodesic)和[方位](http://rbrundritt.wordpress.com/2008/10/14/calculating-bearing/)，您还可以计算得到的目标位置（圆心）在哪里，例如参见[Vincenty](http://en.wikipedia.org/wiki/Vincenty%27s_formulae#Direct_Method)算法的“直接问题”。这里还有一些对 silverlight/.net[有用的算法实现](http://studentguru.gr/b/kokyri/archive/2012/01/30/some-geometry-methods-for-working-with-coordinates.aspx)

您也可以考虑在[GIS Stackexchange](https://gis.stackexchange.com/)上发布您的问题。他们讨论像您这样的 GIS 相关问题。查看[从点计算 lat long x-miles 的问题](https://gis.stackexchange.com/questions/5821/calculating-lat-lng-x-miles-from-point)（因为您现在已经知道整个距离）或查看此处关于[距离计算](https://gis.stackexchange.com/questions/3945/distance-between-lat-long-points)的讨论。这个问题与[如何在给定距离的线上绘制一个点有关，](https://gis.stackexchange.com/questions/11992/how-to-create-a-point-along-a-line-given-distance)并且几乎相同（因为你需要一个中心和半径）。

另一种选择是使用[ArcGIS API for Silverlight](http://help.arcgis.com/en/webapi/silverlight/samples/start.htm#Lengths)，它也可以显示 Bing 地图。它是开源的，你可以在那里学习你需要的东西（或者只是使用它们，因为它们已经存在于 SDK 中）。请参阅示例中的实用程序示例选项卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T12:08:26.637

正如我已经提到的：查看[此页面](http://www.movable-type.co.uk/scripts/latlong.html)以获取有关您的问题的更多信息。在那里，您会找到一个公式、Javascript 代码和一个 Excel 示例，用于按给定距离和从起点开始的方位计算目的地点（参见那里的标题）。

将代码“转换”到您的 c# 世界应该不难。

# hyper-v - 虚拟机在启动时连接全屏 Hyper-V

> ID：10175727
> 
> 赞同：1
> 
> 时间：2012-04-16T14:09:30.603
> 
> 标签：hyper-v

我们有一些训练机器（Windows Server 2008 r2），我们想启动并加载虚拟机供客户使用。

我认为通过powershell会很简单，但到目前为止。我所能做的就是让它启动（不连接）。

搜索连接到虚拟机显然会找到如何进行正常连接的随机链接。如果您登录 Hyper-V，则不会加载 VM 全屏模式

谢谢你的帮助

小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:42:49.043

通过 Hyper-V 使用远程桌面进行全屏显示。

# wpf - ListBox 中组合框的动态模板

> ID：10175732
> 
> 赞同：2
> 
> 时间：2012-04-16T14:09:36.507
> 
> 标签：wpf, xaml, combobox

我有一个带有嵌入式组合框的列表框：

```
<ListBox ItemsSource="{Binding}">
<ListBox.ItemTemplate>
    <DataTemplate>
        <ComboBox Width="100" IsEditable="False" Height="20">
            <TextBlock Text="Opt#1"></TextBlock>
            <TextBlock Text="Opt#2"></TextBlock>
            <TextBlock Text="Opt#3"></TextBlock>
        </ComboBox>
    </DataTemplate>
</ListBox.ItemTemplate>
</ListBox> 
```

我想在未选择 ListBox 行时将 ComboBox 显示为简单文本（例如 TextBlock），并在选择 ListBox 行时将其显示为 ComboBox。

我在想动态替换 ComboBox 模板就可以了。如何做到这一点？

谢谢， 莱斯泽克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:02:23.453

我会简单地使用一种样式来替换被选中`ListBox.ItemTemplate`时的样式。`ListBoxItem`

这是一个简单的例子

```
<ListBox.Resources>
    <DataTemplate x:Key="TextBoxTemplate">
        <TextBlock Text="{Binding }" />
    </DataTemplate>

    <DataTemplate x:Key="ComboBoxTemplate">
        <ComboBox SelectedItem="{Binding }">
            <ComboBoxItem>Opt#1</ComboBoxItem>
            <ComboBoxItem>Opt#2</ComboBoxItem>
            <ComboBoxItem>Opt#3</ComboBoxItem>
        </ComboBox>
    </DataTemplate>

    <Style TargetType="{x:Type ListBoxItem}">
        <Setter Property="Template" Value="{StaticResource TextBoxTemplate}" />
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Template" Value="{StaticResource ComboBoxTemplate}" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ListBox.Resources> 
```

我实际上建议使用`IsKeyboardFocusWithin`而不是`IsSelected`作为触发器属性，因为模板可以让您与它们交互而无需将项目设置为选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:45:40.093

感谢 Josh 和 Rachel 为我指明了正确的方向。

我想出了一个类似于 Rachel 建议的解决方案。我的问题是我无法使 ItemTemplateSelector 工作，而且我不知道如何从我的列表框中传递状态 IsSelected。我也不能使用 DataTemplate，因为我的 ListBox 项比单个元素复杂得多（为了示例，我在上一篇文章中对其进行了简化）。

无论如何，我想出了以下解决方案。它不是很优雅，但它有效：

1.  我在应用程序资源中定义了一种新样式：

    ```
    <Style x:Key="TextBlockTemplate" TargetType="ComboBox">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <TextBlock Text="{Binding}" Margin="3" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
    ```

2.  我将 SelectionChanged 和 PreviewMouseDown 处理程序附加到我的列表框：

3.  我定义了 MyListBox_PreviewMouseDown：

```
    私人无效 MyListBox_PreviewMouseDown（对象发送者，MouseButtonEventArgs e）
    {
        // 抓取选中的列表框项。
        对象元素 = (e.OriginalSource as FrameworkElement).DataContext;
        var item = MyListBox.ItemContainerGenerator.ContainerFromItem(element)
            作为列表框项；

        // 将 ListBox 中的行标记为选中。
        如果（项目！= null）
            item.IsSelected = true;
    }

```

1.  我定义了 MyListBox_SelectionChanged：

```
    私人组合框 prevComboBox = null;
    私人无效 MyListBox_SelectionChanged（对象发送者，SelectionChangedEventArgs e）
    {
        // 抓取列表框。
        ListBox list = 作为 ListBox 的发件人；

        // 虽然只能选择一项，
        // 我们遍历所有选定的项目。
        foreach（列表中的 MyDataItem 数据。SelectedItems）
        {
            var item = list.ItemContainerGenerator.ContainerFromItem(dat) as ListBoxItem;
            // FindElement 是在可视化树中查找元素的辅助方法。
            组合框 cbo = FindElement(item, "MyComboBox") as ComboBox;

            if (cbo != prevComboBox)
            {
                cbo.Style = null;

                if (prevComboBox != null)
                    prevComboBox.Style =
                        (样式)Application.Current.Resources["TextBlockTemplate"];

                上一页组合框 = cbo;
            }
        }
    }

```

谢谢， 莱斯泽克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:33:58.473

交换模板的最佳方法是使用 ListBox 的 ItemTemplateSelector 属性并将其设置为您创建的继承自 DataTemplateSelector 的类。

这是一个提供示例的链接：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)

# .net - 为什么我的 Web 服务响应 XML 包含转义字符，应如何处理？

> ID：10175734
> 
> 赞同：0
> 
> 时间：2012-04-16T14:09:43.037
> 
> 标签：.net, xml, web-services, webrequest

这是相关的（C#.NET）代码：

```
WebRequest webRequest = System.Net.WebRequest.Create(authenticationUrl);

UTF8Encoding encoding = new UTF8Encoding();

...

var webResponse = webRequest.GetResponse();
var webResponseLength = webResponse.ContentLength;
byte[] responseBytes = new byte[webResponseLength];

webResponse.GetResponseStream().Read(responseBytes, 0, (int)webResponseLength);
var responseText = encoding.GetString(responseBytes);
webResponse.Close(); 
```

这是值的`responseText`样子（在调试上述代码时从 Visual Studio 复制）：

```
"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<responseblock version=\"3.67\">\n  <requestreference>X3909254</requestreference>\n  <response type=\"ERROR\">\n    <timestamp>2012-04-16 13:53:59</timestamp>\n    <error>\n      <message>Invalid field</message>\n      <code>30000</code>\n      <data>baseamount</data>\n    </error>\n  </response>\n</responseblock>\n" 
```

`\"`为什么响应中似乎有转义字符（例如）？这是由于我将响应流转换为字符串的方式吗？我应该怎么做（以便可以将存储在变量中的值`responseText`解析为“标准”XML）？

更新——我使用的更多代码：

```
var resultXML = XElement.Parse(responseText);

...

int errorCode = (int)(resultXML.Element("error").Element("code")); 
```

问题是该元素`error`不是根元素的直接子元素`resultXML`，因此我显然无法引用`error`（或其子元素`code`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:12:21.133

您只能在调试时看到这些字符。我猜目的是您可以复制整个字符串并将其直接插入到 C# 代码中以进行进一步测试。此外，它能够将整个字符串表示为一行。

但是，`\n`当您访问代码中的字符串时，所有的 ' 都将转换为真正的换行符。所以你可以安全地解析它。

PS你为什么要手动调用网络请求？如果您在解决方案树中使用“添加 Web 引用”功能，Visual Studio 将为您生成存根代码。然后您不必关心 XML - 您将使用 Visual Studio 根据 WSDL 描述生成的对象。

# php - DQL 多对多和计数

> ID：10175736
> 
> 赞同：7
> 
> 时间：2012-04-16T14:09:48.060
> 
> 标签：php, symfony, dql

我将 Symfony 2 与 Doctrine 一起使用，并且我有两个实体加入了多对多关联。假设我有两个实体：User 和 Group，db 上的相关表是 users、groups 和 users_groups。

我想获得DQL 中**人口最多的 10 个组**，但我不知道在连接表 (users_groups) 上执行查询的语法。我已经查看了 Doctrine 手册，但没有找到解决方案，我想我还有很多关于 DQL 的知识要学习。

在普通的 sql 中，这将是：

```
select distinct group_id, count(*) as cnt from users_groups group by group_id order by cnt desc limit 10 
```

你能帮我把它翻译成 DQL 吗？

**更新（类）：**

```
/**
 * Entity\E_User
 *
 * @ORM\Table(name="users")
 * @ORM\Entity
 */
class E_User
{
    /**
     * @ORM\ManyToMany(targetEntity="E_Group", cascade={"persist"})
     * @ORM\JoinTable(name="users_groups",
     *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id", onDelete="cascade")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="group_id", referencedColumnName="id", onDelete="cascade")}
     * )
     */

    protected $groups;

    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /* ... other attributes & getters and setters ...*/
}

/**
 * Entity\E_Group
 *
 * @ORM\Table(name="groups")
 * @ORM\Entity
 */
class E_Group
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="text", type="string", length=255)
     */
    private $name;

    /* ... other attributes & getters and setters ...*/
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T02:09:04.113

没有看到实际的类并不容易，但是通过猜测你有一个多对多的双向关系：

```
$dql = "SELECT g.id, count(u.id) as cnt FROM Entity\Group g " .
    "JOIN g.users u GROUP BY g.id ORDER BY cnt DESC LIMIT 10;";
$query = $em->createQuery($dql);
$popularGroups = $query->getArrayResult(); 
```

更新：

您不必*使用*双向关系，您可以反过来查询：

```
$dql = "SELECT g.id, count(u.id) as cnt FROM Entity\User u " .
    "JOIN u.groups g GROUP BY g.id ORDER BY cnt DESC LIMIT 10;"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-17T11:32:59.370

对于那些想要使用 Doctrine 构建查询[`QueryBuilder`](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/query-builder.html)而不是直接使用 DQL 的人，请采用此解决方案。

请注意，我的问题不是要获得顶级用户组，但从技术上讲，问题与我的非常相似。我使用帖子（如文章/博客帖子）和添加到帖子的标签。我需要确定相关帖子的列表（由相同的标签标识）。该列表必须按相关性排序（另一个帖子的相同标签越多，相关性就越高）。

这是我`PostRepository`班级的方法：

```
/**
 * Finds all related posts sorted by relavance
 * (from most important to least important) using
 * the tags of the given post entity.
 *
 * @param Post $post
 *
 * @return POST[]
 */
public function findRelatedPosts(Post $post) {
    //  build query
    $q = $this->createQueryBuilder('p')
        ->addSelect('count(t.id) as relevance')
        ->innerJoin('p.tags', 't')
        ->where('t.id IN (:tags)')
        ->setParameter('tags', $post->getTags())
        ->andWhere('p.id != :post')
        ->setParameter('post', $post->getId())
        ->addGroupBy('p.id')
        ->addOrderBy('relevance', 'DESC')
        ->getQuery();

    //  execute query and retrieve database result
    $r = $q->execute();

    //  result contains arrays, each array contains
    //  the actual post and the relevance value
    //  --> let's extract the post entities and
    //  forget about the relevance, because the
    //  posts are already sorted by relevance
    $r = array_map(function ($entry) {
        //  first index is the post, second one
        //  is the relevance, just return the post
        return reset($entry);
    }, $r);

    //  array of posts
    return $r;
} 
```

感谢@Tom Imrei 为您提供解决方案。答案[#26549597](https://stackoverflow.com/questions/26549120/#26549597)也很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-29T07:14:56.587

要改进汤姆的答案，您可以使用 DQL 的`HIDDEN`关键字。这样，结果不包含无用的`cnt`列，并且不需要 Arvid 的`array_map`解决方案（这可以显着加快更大查询的结果）。OP 的问题是获得前 10 组，而不仅仅是他们的 ID。

它看起来像这样：

```
$query = 'SELECT g, HIDDEN COUNT(u.id) AS cnt FROM Entity\Group g LEFT JOIN g.users u ORDER BY cnt DESC';
$groups = $em->createQuery($query)->setMaxResults(10)->getResult(); 
```

另外，请注意使用`LEFT JOIN`that 确保不会解雇空组。

# objective-c - 通过 POST 命令将音频从 ios 流式传输到 REST 服务器

> ID：10175738
> 
> 赞同：4
> 
> 时间：2012-04-16T14:09:55.930
> 
> 标签：objective-c, ios, cocoa-touch, rest, audio

如何将音频编码为 u-law g.711？然后通过 http 将该音频发送到远程服务器。

> 音频流：向当前查看的摄像机发送连续的音频流。音频需要以 64 kbit/s 的 G711 mu-law 编码，以便传输到床边的 Axis 摄像机。发送（这应该是 SSL 中的 POST URL 到连接的服务器）：POST /transmitaudio?id= Content-type: audio/basic Content-Length: 99999（长度被忽略）

我在谷歌和这里搜索过，但我发现的主要是从服务器流式传输到 I 设备的方法，而不是相反。我确实找到了这个帖子（http://stackoverflow.com/questions/7750329/how-to-send-audio-file-through-http-post-to-a-server-from-ios）但是它似乎喜欢答案描述性不强，也没有被接受。

这是我到目前为止所拥有的。

```
{
        NSNumber *formatObject;

        switch (self.recordEncoding) {
            case (ENC_AAC): 
                formatObject = [NSNumber numberWithInt: kAudioFormatMPEG4AAC];
                break;
            case (ENC_ALAC):
                formatObject = [NSNumber numberWithInt: kAudioFormatAppleLossless];
                break;
            case (ENC_IMA4):
                formatObject = [NSNumber numberWithInt: kAudioFormatAppleIMA4];
                break;
            case (ENC_ILBC):
                formatObject = [NSNumber numberWithInt: kAudioFormatiLBC];
                break;
            case (ENC_ULAW):
                formatObject = [NSNumber numberWithInt: kAudioFormatULaw];
                break;
            default:
                formatObject = [NSNumber numberWithInt: kAudioFormatAppleIMA4];
        }

        [recordSettings setObject:formatObject forKey: AVFormatIDKey];
        [recordSettings setObject:[NSNumber numberWithFloat:44100.0] forKey: AVSampleRateKey];
        [recordSettings setObject:[NSNumber numberWithInt:2] forKey:AVNumberOfChannelsKey];
        [recordSettings setObject:[NSNumber numberWithInt:12800] forKey:AVEncoderBitRateKey];
        [recordSettings setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
        [recordSettings setObject:[NSNumber numberWithInt: AVAudioQualityHigh] forKey: AVEncoderAudioQualityKey];
    } 
```

这似乎是 U-law（因此是编码的名称），但是我对音频编解码器一无所知，也不知道 G711 mu-law 在 ios 上是否可行。
**如何让我的音频以正确的格式编码？**

**那么如何将编码后的音频发送到服务器呢？** 现在我把它放到一个临时文件位置，但即使我改变了，我也看不出这有什么帮助。我知道这有很多要求，我不希望得到答案，但我需要一个开始的地方，因为目前我对如何做到这一点相当迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:11:45.063

这会在完成录制后发送音频

```
 self.request = [client multipartFormRequestWithMethod:@"POST" path:[NSString stringWithFormat:@"transmitaudio?id=%@",self.restClient.sessionId] parameters:parameters constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) 
                    {
                        NSError * error = [[NSError alloc]init];

                        [formData appendPartWithFileURL:self.audioHandler.soundFileURL name:@"sound.caf" error:&error];
                        //            NSLog(@"error %@", [error localizedDescription]);
                    }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:self.request];

    [self.queue addOperation:operation]; 
```

# ajax - 如何在 Facebook 的画布应用中使用 Ajax？

> ID：10175743
> 
> 赞同：0
> 
> 时间：2012-04-16T14:10:28.013
> 
> 标签：ajax, facebook, facebook-canvas

我尝试使用 jQuery 的 ajax，但跨域请求存在问题（Facebook 中的画布应用程序位于 iframe 中，而我的浏览器 Chrome 不允许向另一个域（不是 facebook.com）发出 ajax 请求）。

已弃用的 FBJS 具有 Ajax 代理，但现在已弃用。如何处理？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:41:21.440

如果您使用 iframe，则可以进行 AJAX 调用。iframe 将是您自己的域，因此它不会是跨域请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T12:10:04.057

实际上，您必须在标头中添加跨域请求。

我已经在 PHP 中完成了。

**JavaScript:-** 看看它。

```
function ajax(id){
        $.ajax({
            type: "POST",
            url: "json.php",
            data: {id: id},
            dataType : 'json',
            forceIframeTransport: true, //force use iframe or will no work            
            success: function(result){
                console.log(result);
            },
            error: function(errorThrown){
            }
        });

    } 
```

**JSON.PHP:-**

```
<?php
    header('Access-Control-Allow-Origin: *');
$id = $_POST['id'];
$id = "test".$id;
$json = json_encode($id);
echo $json ;
?> 
```

**HTML 代码：-**

```
<a onclick="ajax(3); return false;" id="result">Hello</a> 
```

# node.js - 在环境中为猫鼬定义连接字符串

> ID：10175745
> 
> 赞同：0
> 
> 时间：2012-04-16T14:10:37.487
> 
> 标签：node.js, express, mongoose, railway.js

我有一个相当“典型”的设置（我正在使用 RailwayJS）

架构：

```
customSchema(function(){
    // Initialize Mongo DB
    var mongoose = require('mongoose'),
        Schema = mongoose.Schema;

    mongoose.connect('mongodb://localhost/mydb'); //todo: needs to come from connection or something?!

    var MyModel = new Schema({
        name : String,
        email : String,
        something : String
    });
}); 
```

我的问题是，如何指定要使用的连接字符串？

我应该将 mongoose.connect 部分移到我的配置部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:19:58.993

这是我喜欢使用的：

```
var mongourl = process.argv[2] || process.env.NODE_DB || 'mongodb://anywhere/db'; 
```

请记住更改`NODE_DB`为您的环境变量名称。

请注意，我还允许传递命令行参数（在使用 Cloud9 运行应用程序时很有用，因为这个很棒的服务不允许环境变量）。索引是 2 因为命令是`node app.js mongodb://address`，如果需要记得调整。

# javascript - 如何允许缩放平板电脑，但不允许移动

> ID：10175746
> 
> 赞同：2
> 
> 时间：2012-04-16T14:10:44.340
> 
> 标签：javascript, css, responsive-design

我想在平板电脑纵向和横向模式下查看时缩放我的网站的桌面版本，但我不想在移动设备上缩放它，因为我有一个针对移动设备的优化版本的网站。目前我有下面的元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

仅在移动设备上查看网站时才适用的最佳方法是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:46:08.100

创建您的视口并使用 css 媒体查询来定位。

```
 @media only screen and (max-device-width: 480px) {
    div#wrapper {
        width: 400px;
    }

    div#header {
        background-image: url(media-queries-phone.jpg);
        height: 93px;
        position: relative;
    }

    div#header h1 {
        font-size: 140%;
    }

    #content {
        float: none;
        width: 100%;
    }

    #navigation {
        float:none;
        width: auto;
    }
} 
```

查看[http://coding.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/](http://coding.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:07:16.920

考虑使用 WURFL 进行设备检测。使用 WURFL 的存储库，您可以为特定设备加载各种库、css 等。

WURFL 对平板电脑有特定的 API 调用

```
if ( is_tablet == 'true' ) {
 //do this or load your scaling
 echo '<meta name="viewport" content="width=device-width, initial-scale=1">';
}else{
 echo '<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">';
} 
```

[WURFL API](http://wurfl.sourceforge.net/help_doc.php)

# javascript - 如何使单击链接填充出现在它之前的输入元素的值？

> ID：10175747
> 
> 赞同：2
> 
> 时间：2012-04-16T14:10:49.527
> 
> 标签：javascript, jquery

我有以下内容：

```
<div class="btn-group">
    <input disabled="disabled" id="dialogType">
    <button data-toggle="dropdown" class="dropdown-toggle">
    <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" id="towns">
        <li><a data-value="0Z" href="#">A</a></li>
        <li><a data-value="10" href="#">B</a></li>
    </ul>
</div>

<div class="btn-group">
    <input disabled="disabled" id="dialogStatus">
    <button data-toggle="dropdown" class="dropdown-toggle">
    <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" id="places">
        <li><a data-value="22" href="#">C</a></li>
        <li><a data-value="33" href="#">D</a></li>
    </ul>
</div> 
```

过去，当单击其中一个链接时，我使用以下 javascript 填充 #town 标签字段：

```
$('#towns > li > a').click(function (e) {
    e.preventDefault();
    $('#town').text($(this).html())
 }); 
```

现在我想让这个 javascript 适用于 DIV 内的任何类似的 ul 类下拉菜单。

所以我想要的是：

*   当用户点击诸如 A 之类的链接时，btn 组内的第一个输入元素将被赋予 A 的值以及“0Z”的数据值
*   当用户单击诸如 D 之类的链接时，该 btn 组内的第一个输入元素将被赋予 D 的值以及“33”的数据值

有人能告诉我我怎么能做到这一点。我只需要上述函数的更通用版本。.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:14:58.577

我建议，虽然目前未经测试：

```
$('.dropdown-menu a').click(
    function(e){
        e.preventDefault();
        var that = $(this),
            dValue = that.attr('data-value');
        that.closest('.btn-group').find('input:first').attr('data-value',dValue).val(dValue);
    }); 
```

本质上，它的工作方式是：

1.  单击链接会阻止默认操作，
2.  找到最近的`.btn-group`（祖先）元素，
3.  找到其中的第一个后代`input`元素，
4.  将`data-value`（分配给`dValue`变量）分配给`data-value`that 的属性，`input`最后
5.  将 的 值指定`dValue`为`value`that 的`input`。

* * *

**针对OP留下的评论进行**编辑：****

 **> ...我将有更多带有 Ajax 加载的按钮组的 HTML。对不起，我应该这么说。因此，我是否也应该使用“on”...

因为`btn-group`元素是动态添加的，所以我建议进行以下更改：

```
$('#idOfBtnGroupParentElement').on('click','.dropdown-menu a',
    function(e){
        e.preventDefault();
        var that = $(this),
            dValue = that.attr('data-value');
        that.closest('.btn-group').find('input:first').attr('data-value',dValue).val(dValue);
    }); 
```

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`find()`](http://api.jquery.com/find/).
*   [`on()`](http://api.jquery.com/on/)
*   [`val()`](http://api.jquery.com/val/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:13:58.440

您可以使用`.closest`来查找与给定选择器匹配的单击元素的最近父级。

要设置输入的值，请使用`.val`，要设置数据属性，请使用`.data`

```
$('.btn-group a').click(function(e) {
   e.preventDefault();
   var input = $(this).closest('.btn-group').find('input');

   input.val($(this).html());
   input.data('value', $(this).data('value'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:14:45.413

这应该可以解决问题...

```
$(".dropdown-menu a").click(function(e){
   e.preventDefault();

   var value = $(this).data("value");
   var text = $(this).html();

   var input = $(this).parents(".btn-group").find("input");

   input.data("value", value);
   input.val(text);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T14:16:54.843

我猜这和他们一样通用。我使用代表是因为我不知道你有多少这些`a`元素。

```
$('.btn-group').on('click', '.dropdown-menu a', function (e) {

    var $this = $(this),
        $input = $this.closest('.btn-group').find('input:first')
        ;
    e.preventDefault();

    $input.val($this.html())
          .attr('data-value', $this.attr('data-value'))
          ;        
}); 
```

请注意我正在使用`.on`，因此您应该使用 jQuery 1.7 或更高版本来使用它。如果没有，请查看如何使用`delegate`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T14:27:07.080

```
$('ul.dropdown-menu a').on('click', function(e) {
  e.preventDefault();
  $(this).parent().parent().parent().find('input:first').val($(this).text()).attr('data-value', $(this).attr('data-value'));
}); 
```**

# tomcat - 使用 JRockit 运行 Tomcat

> ID：10175751
> 
> 赞同：2
> 
> 时间：2012-04-16T14:11:08.263
> 
> 标签：tomcat, ubuntu, jrockit

我已经在我的 Ubuntu 11.10 中安装了 jrockit，我将配置 Tomcat7 以与 jrockit 一起运行，以摆脱 PermGen (OutOfMemory)。

但我不知道如何配置 Tomcat 来运行 wirh JRockit

请问，有什么想法吗？！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:21:23.177

您需要编辑`/etc/default/tomcat7`.

更改`JAVA_HOME`为指向您的 JRockit 安装。

更改`JAVA_OPTS`以删除`-XX:+UseConcMarkSweepGC`标志（不适用于 JRockit）。

然后用“”重启tomcat `sudo service tomcat7 restart`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-27T11:41:24.013

使用 JRockit 运行 Tomcat 并使用 Mission Control 启用监控

在 catalina.bat 中添加初始评论后

```
set JAVA_HOME=C:\JRockit\Java\jrockit-jdk1.6.0_20-R28.1.0-4.0.1
set JAVA_OPTS=-Djava.rmi.server.hostname=127.0.0.1 
    -Xmanagement:ssl=false, authenticate=false, port=7091 %JAVA_OPTS% 
```

然后运行：catalina run

我从这个[博客得到了这个答案](http://sdoulger.blogspot.in/2011/06/running-tomcat-with-jrockit-and.html)

# python - Ctypes 捕获异常

> ID：10175753
> 
> 赞同：4
> 
> 时间：2012-04-16T14:11:25.133
> 
> 标签：python, c++, ctypes

我正在玩一点 ctypes 和 C/C++ DLL 我有一个非常简单的“数学”DLL

```
double Divide(double a, double b)
{
    if (b == 0)
    {
       throw new invalid_argument("b cannot be zero!");
    }

    return a / b;
} 
```

到目前为止唯一的问题是，我在 Python 中得到一个 WindowsError 异常，我无法检索文本 *b 不能为零* 是否有一些特殊的异常类型我必须抛出？还是必须更改 Python 代码？蟒蛇代码：

```
from ctypes import *

mathdll=cdll.MathFuncsDll
divide = mathdll.Divide
divide.restype = c_double
divide.argtypes = [c_double, c_double]

try:
    print divide (10,0)
except WindowsError:
    print "lalal"
except:
    print "dada" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:49:10.640

首先，您不应该在 C++ 中使用异常规范。这是 C++ 的一个可怕特性，并且在最新标准中已被弃用。此外，语法`throw(...)`根本不是有效的 C++，这一行不能使用符合标准的编译器（如 gcc）进行编译：

```
double Divide(double a, double b) throw (...) 
```

我认为您依赖于非标准的 Visual C++“扩展”，据我所知，这无论如何都没用，因为除非`throw()`没有参数，否则 Visual C++ 会忽略所有异常规范。

浏览 Python 2.7.3 的 ctypes 文档，我看不到任何对 C++ 的引用，并从通过 ctypes 调用的 C++ 代码中抛出异常。似乎 ctypes 仅用于调用 C 函数，不处理 C++ 异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:15:47.073

尝试这个：

```
from ctypes import *

mathdll=cdll.MathFuncsDll
divide = mathdll.Divide
divide.restype = c_double
divide.argtypes = [c_double, c_double]

try:
    print divide (10,0)
except WindowsError as we:
    print we.args[0]
except:
    print "Unhandled Exception" 
```

# javascript - jQuery - 停止正在进行的动画（淡出）并在鼠标快速进入/离开时再次显示

> ID：10175755
> 
> 赞同：3
> 
> 时间：2012-04-16T14:11:33.020
> 
> 标签：javascript, jquery, jquery-animate

我有一个 <div> ，当它悬停在上面时，会显示一些文本。当鼠标离开时，文本淡出。但是，如果鼠标在完成之前再次进入 <div> `fadeOut`，则文本将不再显示。

我知道`hoverintent`，但我不想使用它，因为它会给`mouseEnter/mouseLeave`事件带来轻微的延迟。

有没有办法在 上`mouseEnter`简单地清除`fadeOut`并再次显示文本？

我当前使用超时的尝试：

```
var timeouts = {};

$(document).ready(function(){
  $('#wrapper').hover(function(){
    clearTimeout(timeouts['test_hover']);
    $('#text').show();
  }, function(){
    timeouts['test_hover'] = setTimeout(function(){
      $('#text').fadeOut('slow');
    });
  });
}); 
```

jsbin：http: [//jsbin.com/upotuw/5](http://jsbin.com/upotuw/5)

视频：[http ://www.youtube.com/watch?v=7RLrz1bEQuU](http://www.youtube.com/watch?v=7RLrz1bEQuU)

--

编辑：问题需要将两个参数都传递给`stop()`函数：`stop(true,true)`

最终工作代码如下：

```
var timeouts = {};

$(document).ready(function(){
  $('#wrapper').hover(function(){
    clearTimeout(timeouts['test_hover']);
    $('#text').stop(true,true).show();
  }, function(){
    timeouts['test_hover'] = setTimeout(function(){
      $('#text').fadeOut('slow');
    });
  });
}); 
```

[http://jsbin.com/upotuw/7](http://jsbin.com/upotuw/7)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:20:12.347

您想查看 JQuery`stop()`函数：

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# php - Getimagesize() - 读取错误

> ID：10175758
> 
> 赞同：2
> 
> 时间：2012-04-16T14:11:42.850
> 
> 标签：php, magento

所以我正在对其他人的遗留代码进行一些维护，并且我已经修复了一些基本权限问题，但是现在在图像上传器中，我收到以下错误：

```
Warning: getimagesize() [function.getimagesize]: Read error! in /home/kirby/public_html/members/upload_advanced.php on line 211 
```

现在，该目录的权限设置为允许读取、执行和写入 - 什么会导致该问题？可能是上传者没有正确写入信息吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T22:16:55.660

我以前见过这个，对我来说这是一个内存问题，方法失败了：

```
_getNeedMemoryForFile 
```

可能最安全的选择是包装到 try-catch 并尽可能优雅地处理异常。

# facebook - fb：注册可以设置日期范围或选择未来日期吗？

> ID：10175765
> 
> 赞同：2
> 
> 时间：2012-04-16T14:11:57.733
> 
> 标签：facebook, registration

我使用 FB 注册插件在我的网站上创建了一个注册。我使用`'type':'date'`“计划的未来活动日期”字段。此日期是未来日期，但默认日期字段仅向后列出年份。可以设置日期范围，或设置至少 +1 年（例如 2013 年）？

谢谢。

# sql - 如何将我的 INNER JOIN 更改为 OUTER JOIN？

> ID：10175771
> 
> 赞同：-2
> 
> 时间：2012-04-16T14:12:13.603
> 
> 标签：sql, sql-server, join, inner-join, nullable

我有 2 张桌子：`Users`和`Documents`。

1 用户可以有 0 个或多个文档。

我想显示每个用户及其文档，但问题是：我想显示没有文档的用户，结果如下（假设`IdUser`s 3 和 5 没有文档）：

```
IdUser IdDocument DocumentName
====== ========== ============
1      1          test11.pdf
1      2          test12.pdf
1      3          test13.pdf
2      4          test21.pdf
2      5          test21.pdf
3      NULL       NULL
4      6          test41.pdf
5      NULL       NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:21:59.333

您将使用 a`LEFT JOIN`来执行此操作。

```
create table users
(
  userid int
)

create table documents
(
  documentid int,
  userid int,
  documentname varchar(10)
)

insert into users values (1)
insert into users values (2)
insert into users values (3)
insert into users values (4)

insert into documents values (1, 1, 'test')
insert into documents values (2, 1, 'test 1')
insert into documents values (3, 2, 'test 2')
insert into documents values (3, 3, 'test 3')

select *
from users u
left join documents d
on u.userid = d.userid 
```

查看[sqlfiddle](http://sqlfiddle.com/#!3/9e56b/1)进行测试

你应该做一些研究`JOINs`，这里有一个很好的描述`JOINs`：

[SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# c++ - 模仿结构/类之间的C#/D差异会是好的C++风格吗？

> ID：10175772
> 
> 赞同：1
> 
> 时间：2012-04-16T14:12:14.290
> 
> 标签：c++, class, coding-style, struct, d

如果我的理解是正确的，以下语义适用于 C++、C# 和 D 中的结构和类：

```
 struct          class
----------------------------------
C++     stack/heap      stack/heap
        value/reference value/reference

C# / D  stack           heap
        value           reference 
```

即，在 C++ 中，结构和类之间没有语义差异（除了默认的公共/私有访问）。相比之下，C# 和 D 结构具有值语义和堆栈分配（至少在默认情况下），而 C# 和 D 类具有引用语义和堆分配。

**我的问题是：将 struct 关键字专门用于所有具有值语义的实体，将 class 关键字专门用于所有具有引用语义的实体来模仿这种差异是否是一种好的 C++ 风格？**

它当然是一个编译器不强制执行的自律工具，但它可以提高代码的可读性，尤其是对于具有 C#/D 背景的审阅者。OTOH，C++ 中的当前习惯用法似乎只对简单实体使用 struct 关键字，例如纯 POD 聚合和模板元函数，因此它可能会让 C++ 程序员感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:18:32.743

在 C++ 中，结构和类基本上是相同的，除了一个主要具有私有成员的类而一个结构具有默认的公共成员。它们对分配内存的位置没有影响。

虽然这是个人喜好问题，但在 C++ 中，通常使用结构作为值对象将值组合在一起，并将类用于完全实现值语义的功能齐全的构造（赋值运算符、构造函数......）。

要将类或结构放在动态内存中，您应该使用 new 运算符并有一个指向 onbject 的指针。

```
 my_object *mop=new my_object(); 
```

或者用智能指针将它与引用计数或范围联系起来。

```
 std::unique_ptr<my_object> mop(new my_object()); 
```

或使用引用计数

```
 std::shared_ptr<my_object> mop(new my_object()); 
```

您应该始终尝试将堆栈用于大多数项目，并让容器保存大型数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:45:47.613

如果这是唯一相关的区别，那可能是有道理的。在实践中，它的意义远不止于此。在 C++ 中，将具有真实行为的对象（并且不支持复制）分配到堆栈上是非常频繁的；动态分配纯数据容器的情况也时有发生。C# 和 D 混淆了两个正交的区别：任意对象生命周期与链接到范围的对象生命周期，以及对象是否具有值语义。虽然这两个区别对于某些类型确实是一致的，但这不是一个绝对的规则，并且在语言级别上强加它会创建一个直截了当的夹克，有时会阻止使用最干净和最自然的解决方案。

# oracle - 在 Oracle 中转换十六进制字符串

> ID：10175775
> 
> 赞同：1
> 
> 时间：2012-04-16T14:12:22.413
> 
> 标签：oracle

我想将像 0x444(hexadecimal) 这样的十六进制字符串转换为 oracle 中的 varchar2。这对于 MS-SQL (SELECT CAST(0x4444 AS VARCHAR(10)) ) 可以轻松完成，我们在 oracle 中是否有类似的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:31:39.160

你可以做：

```
SELECT utl_raw.cast_to_varchar2(hextoraw('4444'))
FROM dual 
```

# c++ - 如何查看使用 /P 扩展的预处理器宏？

> ID：10175777
> 
> 赞同：2
> 
> 时间：2012-04-16T14:12:27.927
> 
> 标签：c++, visual-studio-2010

我正在尝试诊断预处理器宏的问题，并认为我会使用 /P (http://msdn.microsoft.com/en-us/library/8z9z0bx6.aspx)，这样我就可以看到它的扩展内容。

现在，当我编译 .cpp 文件时，我看到一个 .i 文件临时出现在它旁边。我无法打开该文件，因为我收到它被另一个进程锁定的错误。编译完成后，.i 文件似乎再次被自动删除。

如何查看预处理器宏扩展为什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:21:34.253

好吧，对不起，我是愚蠢的。当 .i 文件消失时，它不是，它实际上被移动到输出文件夹。

# java - 观察者模式或其他模式

> ID：10175783
> 
> 赞同：0
> 
> 时间：2012-04-16T14:12:40.027
> 
> 标签：java, observablecollection, addeventlistener, observable

我正在开发一个小型实用程序，它必须非常仓促地开发:(。实验时间太短了:(。实际上该实用程序有三个主要部分。其中两个正在填充一些不同的数据池。第三个需要坐下来听其中一个数据池，并在数据池被附加数据填充的那一刻开始运行。显然，你所有的翅膀都作为三个不同的线程运行。现在我的问题是第三个翅膀。应该是什么最好的方法。我应该使用观察者和可观察模式还是Java中有其他可用的替代方案（是的，需要一些准备好使用的f / w）。没有做太多的研发。对不起，但正如我所说的时间不多用于实验。那么任何其他让你印象深刻的模式就像听众模式一样？

谢谢， 玛维亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:16:51.930

您可以使用[阻塞队列](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)，在您的第三翼中，您尝试从队列中轮询，它将阻塞直到添加了一些元素。它是一个线程安全的结构。

# c++ - 这种情况的双向数据结构

> ID：10175784
> 
> 赞同：6
> 
> 时间：2012-04-16T14:12:45.490
> 
> 标签：c++, data-structures

我正在研究我的游戏引擎的一小部分，并想知道如何优化某些部分。

情况很简单，如下：

*   我有一张`Tile`s 的地图（存储在一个二维数组中）（~260k 瓷砖，但假设更多）
*   我有一个`Item`s 列表，它们总是至少和最多一个 tile
*   A`Tile`在逻辑上可以包含无限数量的`Item`s
*   在游戏执行过程中，许多`Item`s 不断创建，它们从自己的开始`Tile`
*   每个`Item`不断地改变它`Tile`的邻居之一（上，右，下，左）

到目前为止，每个`Item`都引用了它的实际`Tile`，我只保留了一个项目列表。每次`Item`移动到相邻的图块时，我都会更新`item->tile = ..`，我很好。这工作正常，但它是单向的。

在扩展引擎时，我意识到我必须多次查找拼贴中包含的所有项目，这实际上会降低性能（尤其是在某些情况下，我必须逐个查找一系列拼贴的所有项目） .

这意味着我想找到一个适合于找到特定项目的所有项目的数据结构`Tile`比*O(n)*更好，但我想避免在“从一个瓦片移动到另一个瓦片”阶段（现在只是分配一个指针，我想避免在那里做很多操作，因为它非常频繁）。

我正在考虑使用自定义数据结构来利用项目总是移动到相邻单元格的事实，但我目前正在黑暗中摸索！任何建议都会受到赞赏，即使是棘手或神秘的方法。不幸的是，我不能只是浪费内存，因此需要进行良好的权衡。

我正在用 STL 用 C++ 开发它，但没有 Boost。（是的，我确实知道`multimap`，它不满足我，但如果我没有找到更好的东西，我会尝试）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:49:44.417

```
struct Coordinate { int x, y; };
map<Coordinate, set<Item*>> tile_items; 
```

这会将瓦片地图上的坐标映射到指示哪些项目在该瓦片上的项目指针集。您不需要为每个坐标输入一个条目，只需要那些实际上有项目的坐标。现在，我知道你是这么说的：

> 但我想避免在“从一块瓷砖移动到另一块瓷砖”阶段产生太多开销

这种方法将涉及在该阶段增加更多开销。但是您是否真的尝试过这样的事情并确定这是一个问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:26:45.507

对我来说，我会将 a 包装`std::vector`成矩阵类型（IE 对 1d 数组施加 2d 访问），这使您可以快速随机访问任何图块（实现矩阵是微不足道的）。

采用

```
 vector_index=y_pos*y_size+x_pos; 
```

索引大小的向量

```
 vector_size=y_size*x_size; 
```

然后每个项目都可以有一个项目的 std::vector （如果一个 tile 的项目数量非常动态，可能是一个双端队列），这些都是随机访问包含的，开销非常小。

对于您的用例，我会远离间接容器。

PS：如果你想要你可以有我的矩阵模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:24:54.740

如果您真的认为让每个 tile 存储它的项目会花费太多空间，那么请考虑使用四叉树来存储项目。这使您可以有效地获取磁贴上的所有项目，但将磁贴网格保留在适当的位置以进行项目移动。

# mysql - MySQL 在单个查询中从多个不同的表中选择数据

> ID：10175789
> 
> 赞同：0
> 
> 时间：2012-04-16T14:12:48.347
> 
> 标签：mysql, database, database-table

我有一个用户数据库，其中有一个包含姓名、地址等的主表。然后，我为用户的孩子、宠物、培训课程和教育结果等设置了单独的表。

这个用户的详细信息都可以显示在同一页面上，我目前的做法是首先在数据库中查询用户的主要详细信息。然后我单独查询其他表并用循环显示这些信息。

我真的只需要知道这是否是最好的方法，或者是否有一种方法可以通过单个查询来完成，是否有任何优势？

表的基本结构是：

```
+----------------+    +-----------------------+
| Users          |    | Children              |
+----------------+    +-----------------------+
|ID |Name |Age   |    |ID |UserRef |Name |Age |
+----------------+    +-----------------------+
|1  |Jim  |53    |    |1  |1       |Joe  |11  |
|2  |Karl |37    |    |2  |1       |Jane |9   |
+----------------+    |3  |2       |Amy  |15  |
                      +-----------------------+ 
```

这是一个基本版本，只显示 user 和 children 表。其他表与子表相似，因为它们引用用户表并为单个用户提供多条记录。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:26:56.167

您可以对 users.id = children.userref 上的表进行简单的 LEFT JOIN。但是，由于它是一对多的关系，您需要使用一些 GROUP BY 魔法：

```
 SELECT users.*, GROUP_CONCAT( children.id ORDER BY children.id ASC ) AS childrens_ids, GROUP_CONCAT( children.name ORDER BY children.id ASC ) AS childrens_names, GROUP_CONCAT( children.age ORDER BY children.id ASC ) AS childrens_ages FROM users LEFT JOIN children ON users.id = children.userref GROUP BY children.userref 
```

然后，您必须使用代码来解析/分解孩子的 ID、姓名和年龄。尽管如此，这并不一定是你应该做的事情。在 MySQL 端它不一定更快，你会看到你在后端代码中需要做多少额外的工作。我的建议是尝试一下，看看它如何影响你的表现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:17:19.107

这是一个很好的查询：

```
SELECT * FROM Users RIGHT JOIN Children ON Users.ID = Children.UserRef 
```

请注意，这将为您提供两个名为“名称”的值 - 这就是您需要使用别名的原因：

```
SELECT Users.Name as ParentName, Children.Name as ChildName FROM Users RIGHT JOIN Children ON Users.ID = Children.UserRef 
```

您可以使用上述格式添加您需要的任何其他字段。

至于使用这个是否*更好*，每种方法都有其优点和缺点。当您使用更大、更高级的查询来执行您想要的操作（与许多较小的查询相反）创建脚本时，您的脚本将运行得更快，因为不是有 1 +（父级数量）查询往返于服务器，而是只会是一个查询。但是，组织不善的查询可能会在您稍后返回时导致调试问题，并且不记得为什么要按照您的方式进行操作。

# php - 如何访问数组中的这个元素？

> ID：10175794
> 
> 赞同：1
> 
> 时间：2012-04-16T14:13:15.580
> 
> 标签：php, arrays

如果我对我的数组做一个 print_r 我得到：

```
Array ( 
    [0] => stdClass Object ( 
        [ID] => 34 
        [post_author] => 1 
        [post_date] => 2012-04-16 14:07:08 
        [post_date_gmt] => 2012-04-16 14:07:08 
        [post_content] => 
        [post_title] => visit_sfondo01 
        [post_excerpt] => 
        [post_status] => inherit 
        [comment_status] => open 
        [ping_status] => open 
        [post_password] => 
        [post_name] => visit_sfondo01-2 
        [to_ping] => 
        [pinged] => 
        [post_modified] => 2012-04-16 14:07:08 
        [post_modified_gmt] => 2012-04-16 14:07:08 
        [post_content_filtered] => 
        [post_parent] => 1 
        [guid] => http://localhost:8080/pollo_blog/wp-content/uploads/2012/04/visit_sfondo011.jpg 
        [menu_order] => 0 
        [post_type] => attachment 
        [post_mime_type] => image/jpeg 
        [comment_count] => 0 
        [filter] => raw ) 
    [1] => stdClass Object ( 
        [ID] => 33 [post_author] => 1 
        [post_date] => 2012-04-16 13:53:35 
        [post_date_gmt] => 2012-04-16 13:53:35 
        [post_content] => 
        [post_title] => visit_gallery01 
        [post_excerpt] => 
        [post_status] => inherit 
        [comment_status] => open 
        [ping_status] => open 
        [post_password] => 
        [post_name] => visit_gallery01 
        [to_ping] => 
        [pinged] => 
        [post_modified] => 2012-04-16 13:53:35 
        [post_modified_gmt] => 2012-04-16 13:53:35 
        [post_content_filtered] => 
        [post_parent] => 1 
        [guid] => http://localhost:8080/pollo_blog/wp-content/uploads/2012/04/visit_gallery01.jpg 
        [menu_order] => 0 
        [post_type] => attachment 
        [post_mime_type] => image/jpeg 
        [comment_count] => 0 
        [filter] => raw ) 
    ) 
```

我想访问 [guid] 字段。试过：

```
echo $attachments[0] 
```

或者

但我什么也没显示（或者在第二个例子中，我得到一个错误）。

我哪里错了？

```
echo $attachments[0][guid] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:15:16.960

它是一个数组中的 stdClass 对象：

```
$attachments[0]->guid 
```

# yacc - Flex 和 Yacc - 找不到 - lfl？

> ID：10175795
> 
> 赞同：12
> 
> 时间：2012-04-16T14:13:31.080
> 
> 标签：yacc, lex

嗨，我正在学习 Lex 和 yacc。我创建了以下 lex 程序。

```
%{
#include <stdio.h>
%}

%%
[0123456789]+           printf("NUMBER\n");
[a-zA-Z][a-zA-Z0-9]*    printf("WORD\n");
%% 
```

我正在尝试使用以下命令运行它：

1.  法例1.l
2.  cc lex.yy.c -o example1 -ll

也试过 cc lex.yy.c -o example1 -lfl

当我输入上面的第二个命令表单时，我收到错误：

```
D:\workdir\flexyacc\Test3>gcc lex.yy.c -o Test -lfl
C:\Dev-Cpp\bin\..\lib\gcc\mingw32\3.4.2\..\..\..\..\mingw32\bin\ld.exe: cannot find -lfl
collect2: ld returned 1 exit status 
```

我试着用谷歌搜索这个错误，但到目前为止没有运气。因为我是 Lex 编程的新手，所以我不明白如何解决这个问题。任何帮助将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-03T14:12:03.070

如果您使用的是 lex + yacc，则可以在定义 yywrap 函数或使用 noyywrap 选项时删除 -lfl ：

```
%option noyywrap
%%
 ...
%% 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T21:42:35.683

要编译 lex 代码，首先你应该在你的机器上安装 flex。如果是这样，就会有一个文件 libfl.a。在我的机器上，我在 'C:\GnuWin32\lib' 中安装了 flex

gcc lex.yy.c -L"C:\GnuWin32\lib" -lfl

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-07T11:42:54.287

我遇到了同样的问题，所以我在互联网上检查了一下，并通过工作验证码找到了一个解决方案，发布于 2011 年 6 月 3 日下午 6:44[在这里](http://mihirknows.blogspot.com/2009/02/undefined-reference-to-yywrap.html)

他说：

> 您可以添加此函数并正常编译

```
yywrap()
{
} 
```

所以我在 main 函数之前提供了 .lex 文件中的代码。这样做之后，它以它应该的方式解决了:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T23:16:22.737

我在使用 MinGW 将 TXR 移植到 Windows 时遇到了这个问题。

MinGW 自己有一个 flex 库，但不会将其导出到环境中。

见这里： http: [//lists.nongnu.org/archive/html/txr-users/2011-10/msg00001.html](http://lists.nongnu.org/archive/html/txr-users/2011-10/msg00001.html)

解决方法是使用`-L/usr/lib`before `-lfl`。但想想这个：这是一个黑客。为什么？因为路径`/usr/lib/`属于MinGW，编译环境的运行时。

`/usr/lib`不是工具链应该为正在构建的 Windows 程序找到库的位置（它不在库搜索路径中！）

也就是说，我们在交叉编译作业中有效地窃取了构建机器的本机库。

这就像如果您在 Ubuntu 上交叉编译 Fedora 程序，并帮助自己`/usr/lib`使用 Fedora 交叉工具链中恰好缺少的 Ubuntu 静态库（利用架构和目标文件格式发生的事实相同）。

这绝对是 Flex 在 MingW 中“打包”的方式中的一个错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-06T11:54:49.950

在尝试解决与您相同的问题后，我安装了 flex-old：

`sudo apt install flex-old`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-23T06:56:04.057

如果您使用的是 macOSX，请替换`-lfl`为`-ll`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-15T21:55:33.890

尝试在 gcc 中使用**-ll**而不是*-lfl*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-14T22:42:28.343

对于错误： `cannot find -lflx`

在您的 Makefile 更改： `LEXLIB = -lfl`到`LEXLIB =`.

否则删除`-lfl`任何存在的参数。

# php - 实现基于文件的缓存的最佳实践

> ID：10175796
> 
> 赞同：0
> 
> 时间：2012-04-16T14:13:38.340
> 
> 标签：php, caching, io

我正在为我的 php 应用程序实现一个基于文件的缓存系统。使用时，它可以处理存储在同一个文件夹中的大约 200,000 个文件，使其难以管理：计算文件夹的总大小或列出其中的文件几乎不可能在合理的时间内完成。

我的问题是：将文件保存在单独的文件夹中对性能有好处吗？这可以减少 IO 时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:22:09.403

在现代文件系统（例如 ext3、ntfs）上，如果您打开单个文件，目录中的 200K 文件不会很慢。列出当然会更慢，但是将文件分布在多个目录中对您没有帮助。

# android - 如何获得活跃下载？

> ID：10175797
> 
> 赞同：2
> 
> 时间：2012-04-16T14:13:51.227
> 
> 标签：android, networking, download

有人可以告诉我是否有可能从网络获得一些活动下载？Android 设备包含名为**Downloads**的系统应用程序，我认为应该可以获取此应用程序是否包含一些活动下载。或者有更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:16:54.460

`DownloadManager`有一种[`query()`](http://goo.gl/Rixnk)方法可以用来

> 向下载管理器查询已请求的下载。

像这样的东西

```
Query query = new Query();
query.setFilterByStatus(DownloadManager.STATUS_RUNNING); 
```

# apache - .htaccess 将根目录重定向到 index.php

> ID：10175804
> 
> 赞同：11
> 
> 时间：2012-04-16T14:14:17.230
> 
> 标签：apache, .htaccess, mod-rewrite, root

我需要从 重定向`http://example.com/`到`http://example.com/index.php`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-16T14:16:20.457

用这个：

```
DirectoryIndex index.php 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T14:16:32.650

试试这个：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^$
RewriteCond %{HTTP_HOST} ^example.com$
RewriteRule ^$ http://example.com/index.php [L,R=301] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-13T15:15:53.313

只是添加我自己的解决方案，因为[迈克尔的答案](https://stackoverflow.com/a/10175840/107625)对我不起作用，我做了类似的事情：

```
RewriteEngine on

# These two lines redirect non-www to www.
RewriteCond %{HTTP_HOST} ^example\.com$
RewriteRule (.*) https://www.example.com$1 [R=301,L]

# These two lines redirect the root to index.html.
RewriteRule ^$ /index.html [R=301,L]
RewriteRule ^/$ /index.html [R=301,L] 
```

这也保留了任何可能的现有查询字符串参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-09T17:45:49.590

添加到上面[@Uwe Keim 的](https://stackoverflow.com/users/107625/uwe-keim) [回答](https://stackoverflow.com/a/51825547/8353776)中，我在 Apache 虚拟主机上设置了非 www 到 www。

在 .htaccess 上对我有用的是：

```
RewriteEngine on

# Two lines to redirect from the root web directory to myfile.html.
RewriteRule ^$ /index.html [R=301,L]
RewriteRule ^/$ /index.html [R=301,L] 
```

# java - 如何避免很多 if else 条件

> ID：10175805
> 
> 赞同：53
> 
> 时间：2012-04-16T14:14:18.907
> 
> 标签：java, if-statement, refactoring

我已经阅读了很多关于代码重构和避免 if else 语句的主题。实际上，我有一堂课，我使用了很多 if - else 条件。

更多细节：我正在使用拉解析器，在我的肥皂响应的每一行，我会检查是否有我感兴趣的标签，如果没有，检查另一个标签等：

```
 if(eventType == XmlPullParser.START_TAG) {
            soapResponse= xpp.getName().toString();

            if (soapResponse.equals("EditorialOffice")){  
                eventType = xpp.next();
                if (xpp.getText()!=null){
                editorialOffice += xpp.getText();
                }
            }   
            else if (soapResponse.equals("EditorialBoard")){  
                eventType = xpp.next();
                if (xpp.getText()!=null){
                editorialBoard += xpp.getText();
                }
            }
            else if (soapResponse.equals("AdvisoryBoard")){  
                eventType = xpp.next();
                if (xpp.getText()!=null){
                advisoryBoard += xpp.getText();
                }
            }   
        }
        eventType = xpp.next();
     } 
```

现在，我想使用其他东西，而不是那些 if else 条件，但我不知道是什么。

你能给我一个例子吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-16T14:22:13.953

尝试查看策略模式。

*   制作一个用于处理响应的接口类（IMyResponse）
    *   使用此 IMyResponse 创建 AdvisoryBoardResponse、EditorialBoardResponse 类
*   创建一个以soapresponse值作为键、你的策略作为值的字典
*   然后您可以通过从字典中获取 IMyResponse 类的方法来使用它

小例子：

```
// Interface
public interface IResponseHandler {
   public void handleResponse(XmlPullParser xxp);

}

// Concrete class for EditorialOffice response
private class EditorialOfficeHandler implements IResponseHandler {
   public void handleResponse(XmlPullParser xxp) {
       // Do something to handle Editorial Office response
   }
}

// Concrete class for EditorialBoard response
private class EditorialBoardHandler implements IResponseHandler {
   public void handleResponse(XmlPullParser xxp) {
       // Do something to handle Editorial Board response
   }
} 
```

在您需要创建处理程序的地方：

```
Map<String, IResponseHandler> strategyHandlers = new HashMap<String,IResponseHandler>();
strategyHandlers.put("EditorialOffice", new EditorialOfficeHandler());
strategyHandlers.put("EditorialBoard", new EditorialBoardHandler()); 
```

您收到回复的位置：

```
IResponseHandler responseHandler = strategyHandlers.get(soapResponse);
responseHandler.handleResponse(xxp); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-04-16T14:33:05.357

在这种特殊情况下，由于除了附加的字符串之外，所有 3 种情况的代码基本相同，因此我将为正在构建的每个字符串都有一个映射条目：

```
Map<String,String> map = new HashMap<String,String>();
map.put("EditorialOffice","");
map.put("EditorialBoard","");
map.put("AdvisoryBoard","");
// could make constants for above Strings, or even an enum 
```

然后将您的代码更改为以下

```
if(eventType == XmlPullParser.START_TAG) {
    soapResponse= xpp.getName().toString();
    String current = map.get(soapResponse);
    if (current != null && xpp.getText()!=null) {
        map.put( soapResponse, current += xpp.getText());
    }
    eventType = xpp.next();
} 
```

没有“如果……那么……否则”。甚至不会增加策略模式等多个类的复杂性。地图是您的朋友。策略在某些情况下很棒，但这个策略很简单，不用也可以解决。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-16T14:21:30.107

在 Java 7 中，您可以在字符串上进行 SWITCH。如果你可以使用它，你可以使用它;-)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-16T14:20:38.370

除了 zzzzzzz(etc.) 的评论...请记住，您使用的是 XmlPullParser，这会让您编写像您所拥有的那样丑陋的代码。您可以注册一些回调来拆分您的代码并使其“更好”，但如果可能，只需使用 SimpleXML 库或类似库。

此外，您可以重构代码以使其更具可读性和更少冗长。例如，为什么要`xpp.next()`在每个 if 语句中调用？为什么不只在外面调用一次：

```
if(eventType == XmlPullParser.START_TAG) {
    soapResponse= xpp.getName().toString();
    if (soapResponse.equals("EditorialOffice") && xpp.getText()!=null){  
        editorialOffice += xpp.getText();
    }   
    else if (soapResponse.equals("EditorialBoard") && xpp.getText()!=null){  
        editorialBoard += xpp.getText();
    }
    else if (soapResponse.equals("AdvisoryBoard") && xpp.getText()!=null){  
        advisoryBoard += xpp.getText();
    }   
}
eventType = xpp.next(); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-16T14:26:05.037

您可以创建一个具有三个实现的 ResponseHandler 接口，一个用于 if/else 构造的每个分支。

然后有一个映射不同的soapResponses到一个处理程序的映射，或者一个包含所有处理程序的列表，如果它可以处理那个soapResponse。

您还应该能够将一些样板代码移动到响应处理程序类的常见可能抽象实现中。

通常有很多变化。通过利用代码重复，实际上只需要一种实现：

```
class ResponseHandler{
    String stringToBuild = "" // or what ever you need
    private final String matchString

    ResponseHandler(String aMatchString){
        matchString = aMatchString
    }
    void handle(XppsType xpp){
        if (xpp.getName().toString().equals(matchString){
            eventType = xpp.next();
            if (xpp.getText()!=null){
                 editorialOffice += xpp.getText();
            }
        }
    }
} 
```

你的代码变成

```
List<ResponseHandler> handlers = Arrays.asList(
    new ResponseHandler("EditorialOffice"),
    new ResponseHandler("EditorialBoard"),
    new ResponseHandler("AdvisoryBoard"));
if(eventType == XmlPullParser.START_TAG) {
    for(ResponseHandler h : handlers)
        h.handle(xpp);
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-16T14:28:52.740

这是一个广泛的问题，没有真正的答案。（而且我不经常使用肥皂）

这里只是基于您的代码的一些想法：

首先你可以对重复的代码进行分组

```
if (soapResponse.equals("EditorialOffice")
||soapResponse.equals("EditorialBoard")
||soapResponse.equals("AdvisoryBoard")){ 
```

您可以做的另一件好事是使用 switch 语句，例如：

```
switch(soapResponse){
case "EditorialOffice":
case "EditorialBoard":
case "AdvisoryBoard":
eventType = xpp.next();
                if (xpp.getText()!=null){
                advisoryBoard += xpp.getText();
                }
break; 
```

此外，您应该考虑将测试分解为小功能：

```
public bool interestingTag(string s){
return (soapResponse.equals("EditorialOffice")
    ||soapResponse.equals("EditorialBoard")
    ||soapResponse.equals("AdvisoryBoard"));
}

    public processData(xpp){
    eventType = xpp.next();
                    if (xpp.getText()!=null){
                    editorialBoard += xpp.getText();
                    }
    ....} 
```

这样你就可以在一个 while 循环中处理你所有的答案，如果 else 变成一个 5~10 行的函数，你就会超长

但正如我所说，有很多好方法可以做同样的事情

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-04-16T15:26:22.757

您没有提到是否可以或确实使用 Java 7。从该 Java 版本开始，您可以[在 switch 语句中使用字符串](http://java.dzone.com/articles/new-java-7-feature-string)。

除此之外，封装每种情况的逻辑是一个好主意，例如：

```
Map<String, Department> strategyMap = new HashMap<String, Department>();
strategyMap.put("EditorialOffice", new EditorialOfficeDepartment());
strategyMap.put("EditorialBoard", new EditorialBoardDepartment());
strategyMap.put("AdvisoryBoard", new AdvisoryBoardDepartment()); 
```

然后您可以简单地从地图中选择正确的策略并使用它：

```
String soapResponse = xpp.getName();
Department department = strategyMap.get(soapResponse);
department.addText(xpp.getText()); 
```

`Department`当然是在界面...

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-07-25T14:08:07.193

您可以定义如下枚举：

```
public enum SoapResponseType {
    EditorialOffice(1, "description here") {
        public void handle(XmlPullParser xpp) {
            //do something you want here
            return null;
        }
    },
    EditorialBoard(2, "description here") {
        public void handle(XmlPullParser xpp) {
            //do something you want here
            return null;
        }
    },
    AdvisoryBoard(3, "description here") {
        public void handle(XmlPullParser xpp) {
            //do something you want here
            return null;
        }
    };

    public static SoapResponseType nameOf(String name) {
        for (SoapResponseType type : values()) {
            if (type.getName().equalsIgnoreCase(name)) {
                return type;
            }
        }
        return null;
    }

    public void handle(XmlPullParser xpp) {
        return null;
    }
} 
```

像这样使用上面的枚举：

```
SoapResponseType type = SoapResponseType.nameOf("input string");
if (type != null) {
    type.handle(xpp);
} 
```

这是干净的代码，不是吗！

# javascript - 在上传到远程网站期间缩小/调整视频大小

> ID：10175806
> 
> 赞同：5
> 
> 时间：2012-04-16T14:14:19.713
> 
> 标签：javascript, ruby-on-rails, video, upload

我有一个用 Ruby on rails 编写的 Web 应用程序，它使用表单将用户的视频上传到服务器（我实际上使用了一个直接上传到 s3 的 jquery 上传器，但我认为这不相关）。
为了减少视频的上传时间，我想缩小它，例如，如果视频大小是 1000x2000 像素，我想将它缩小到 500x1000。有没有办法在客户端上传视频时这样做？有没有可以做到这一点的javascript库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:50:20.540

重新压缩视频是一个重要的问题，不会很快在浏览器中发生。

随着 HTML5 的变化，如果你能克服几个问题，*理论上是有可能的：*

*   您将使用[File API](https://developer.mozilla.org/en/Using_files_from_web_applications)来读取用户使用`<input type="file">`元素选择的文件的内容。但是，看起来在将整个文件交给您的代码之前将整个文件[`FileReader`](https://developer.mozilla.org/en/DOM/FileReader)读*入内存，这正是您在处理大型视频文件时不想要的。*不幸的是，这是一个您无能为力的问题。它可能仍然可以工作，但是对于超过 10-20 MB 左右的任何东西，性能可能是不可接受的。
*   一旦你有了文件的数据，你就必须实际*解释*它——这通常通过解复用器来完成，将[continer](http://en.wikipedia.org/wiki/Multiplexer)（mpeg 等）文件拆分为视频和音频流，并使用[编解码器](http://en.wikipedia.org/wiki/Codec)将这些流解压缩为原始图像/音频数据。您的操作系统带有多个编解码器的实现，它们都不能从 JavaScript 访问。有一些 JS[视频](https://github.com/bemasc/Broadway) [和](https://github.com/mbebenita/Broadway) [音频](https://github.com/nddrylliog/jsmad) [编解码器](https://github.com/ofmlabs/alac.js)的实现，但是它们是实验性的并且非常缓慢；并且只实现***decompressor***，所以在创建输出时你会被卡住。
*   解压缩、缩放和重新压缩音频和视频是**极其**占用处理器资源的，这正是 JavaScript（以及一般的脚本语言）最不擅长的工作负载。至少，您必须使用[Web 工作者](https://developer.mozilla.org/En/Using_web_workers)在单独的线程上运行您的代码。
*   所有这些工作已经完成[了](http://www.videohelp.com/tools/sections/video-encoders)[好](http://ffmpeg.org/) [几次](http://www.videolan.org/) ；你在重新发明轮子。

实际上，这是必须在服务器端完成的事情，即便如此，这也不是一件容易的事。

如果你很绝望，你可以尝试使用插件/ActiveX 控件来处理压缩，但你必须说服用户安装插件（糟糕）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:19:22.120

您可以使用像 Carrierwave (https://github.com/jnicklas/carrierwave) 这样的 gem。它具有在存储文件之前处理文件的能力。即使您首先使用 javascript 将它们直接上传到 S3，您也可以让 Carrierwave 检索文件、处理它并再次存储它。

否则，您可以让 Carrierwave 从一开始就处理文件（除非您使用 Heroku 托管并且需要通过直接访问 S3 来避免超时）。

# actionscript-3 - AS3中向量的深拷贝

> ID：10175810
> 
> 赞同：3
> 
> 时间：2012-04-16T14:14:33.743
> 
> 标签：actionscript-3, vector

在 AS3 中，我们可以通过两种方式复制 Array：

```
newArr = oldArr.concat(); 
```

或者

```
var ba:ByteArray = new ByteArray();
ba.writeObject(oldArr);
ba.position = 0;
newArr = ba.readObject() as Array; 
```

但是当我需要复制具有复杂数据类型的Vector时，这两种方式不适用于Vector。就像`Vector.<Point>`。当我使用ByteArray复制具有复杂数据类型的Vector时，编译器说我将旧Vector复制到新Vector一片空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:32:22.853

`flash.net.registerClassAlias`在将您的对象写入之前注册一个类别名`ByteArray`，例如：

```
var points:Vector.<Point> = new Vector.<Point>();
var pointsCloned:Vector.<Point>;
var ba:ByteArray = new ByteArray();

registerClassAlias("flash.geom.Point", Point);

points.push(new Point(1, 2));
points.push(new Point(3, 4));
points.push(new Point(5, 6));

ba.writeObject(points);
ba.position = 0;
pointsCloned = ba.readObject() as Vector.<Point>;

trace(points);
trace(pointsCloned); 
```

感谢这篇[博文](http://www.rozengain.com/blog/2009/02/10/easy-deep-clone-method-for-actionscript-30/)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:54:06.780

另一种选择是使用[`.map()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html#map%28%29)，例如：

```
function pointCloner(item:Point, index:int, vector:Vector.<Point>):Point {
    return item.clone();
}

var newVector:Vector.<Point> = oldVector.map(pointCloner); 
```

# ssl - 如何使用 OpenSSL 生成自签名 SSL 证书？

> ID：10175812
> 
> 赞同：1700
> 
> 时间：2012-04-16T14:14:42.163
> 
> 标签：ssl, openssl, certificate, ssl-certificate, x509certificate

我正在向嵌入式 Linux 设备添加 HTTPS 支持。我尝试使用以下步骤生成自签名证书：

```
openssl req -new > cert.csr
openssl rsa -in privkey.pem -out key.pem
openssl x509 -in cert.csr -out cert.pem -req -signkey key.pem -days 1001
cat key.pem>>cert.pem 
```

这可行，但我遇到了一些错误，例如，谷歌浏览器：

> 这可能不是您要找的网站！
> 该站点的安全证书不受信任！

我错过了什么吗？这是构建自签名证书的正确方法吗？

* * *

## 回答 #1

> 赞同：2729
> 
> 时间：2012-04-16T15:04:51.010

您可以在一个命令中执行此操作：

```
openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -sha256 -days 365 
```

如果您不想使用密码保护您的私钥，也可以添加`-nodes`（缩写）。`no DES`否则它将提示您输入“至少 4 个字符”的密码。

您可以将`days`参数 (365) 替换为任何数字以影响到期日期。然后它会提示您输入“国家名称”之类的内容，但您可以点击`Enter`并接受默认值。

添加`-subj '/CN=localhost'`以抑制有关证书内容的问题（替换`localhost`为您想要的域）。

除非您之前将自签名证书导入浏览器，否则不会向任何第三方验证自签名证书。如果您需要更高的安全性，您应该使用由[证书颁发机构](https://en.wikipedia.org/wiki/Certificate_authority)(CA) 签名的证书。

* * *

## 回答 #2

> 赞同：626
> 
> 时间：2015-01-13T21:12:18.497

> 我错过了什么吗？这是构建自签名证书的正确方法吗？

创建自签名证书很容易。您只需使用`openssl req`命令。创建一个可供最多选择的客户端使用的客户端可能会很棘手，例如浏览器和命令行工具。

这很困难，因为浏览器有自己的一套要求，而且它们比[IETF](https://en.wikipedia.org/wiki/Internet_Engineering_Task_Force)更严格。浏览器使用的要求记录在[CA/浏览器论坛](https://cabforum.org/)（请参阅下面的参考资料）。限制出现在两个关键领域：(1) 信任锚，和 (2) DNS 名称。

现代浏览器（如我们在 2014/2015 年使用的warez）需要一个链接回信任锚的证书，并且他们希望在证书中以特定方式显示 DNS 名称。浏览器正在积极反对自签名服务器证书。

某些浏览器并不完全可以轻松导入自签名服务器证书。事实上，你不能用一些浏览器，比如Android的浏览器。所以完整的解决方案是成为你自己的权威。

在没有成为您自己的权威的情况下，您必须获得正确的 DNS 名称才能使证书获得最大的成功机会。但我会鼓励你成为自己的权威。成为自己的权威很容易，它会回避所有信任问题（谁比自己更值得信任？）。

* * *

> 这可能不是您要找的网站！
> 该站点的安全证书不受信任！

这是因为浏览器使用预定义的信任锚列表来验证服务器证书。自签名证书不会链接回受信任的锚点。

避免这种情况的最佳方法是：

1.  创建自己的权限（即成为[CA](https://en.wikipedia.org/wiki/Certificate_authority)）
2.  为服务器创建证书签名请求 (CSR)
3.  使用您的 CA 密钥签署服务器的 CSR
4.  在服务器上安装服务器证书
5.  在客户端安装 CA 证书

第 1 步 -*创建您自己的授权*只是意味着创建一个自签名证书`CA: true`并正确使用密钥。这意味着*Subject*和*Issuer*是同一个实体，CA 在*Basic Constraints*中设置为 true （它也应该标记为关键），密钥用法是`keyCertSign`and `crlSign`（如果您使用 CRL），*Subject Key Identifier* (SKI) 是与*授权密钥标识符*(AKI) 相同。

要成为您自己的证书颁发机构，请参阅 *[如何使用您的证书颁发机构签署证书签名请求？](https://stackoverflow.com/questions/21297139/how-do-you-sign-a-certificate-signing-request-with-your-certification-authority/21340898#21340898)关于堆栈溢出。然后，将您的 CA 导入浏览器使用的信任库。

步骤 2 到 4 大致是您现在为面向公众的服务器所做的，当您征用像[Startcom](https://www.startssl.com/)或[CAcert](https://www.cacert.org/)这样的 CA 的服务时。步骤 1 和 5 可以让您避开第三方权威，并充当自己的权威（谁比自己更值得信任？）。

避免浏览器警告的下一个最佳方法是信任服务器的证书。但是有些浏览器，比如 Android 的默认浏览器，不允许你这样做。所以它永远不会在平台上工作。

浏览器（和其他类似的用户代理）*不*信任自签名证书的问题将成为物联网 (IoT) 中的一个大问题。例如，当您连接到恒温器或冰箱对其进行编程时会发生什么？答案是，就用户体验而言，没什么好说的。

W3C 的 WebAppSec 工作组开始研究这个问题。例如，请参阅[提案：将 HTTP 标记为不安全](http://lists.w3.org/Archives/Public/public-webappsec/2014Dec/0203.html)。

* * *

> 如何使用 OpenSSL 创建自签名证书

下面的命令和配置文件创建一个自签名证书（它还向您展示了如何创建一个签名请求）。它们在一个方面与其他答案不同：用于自签名证书的 DNS 名称位于*Subject Alternate Name (SAN)*中，而不是*Common Name (CN)*中。

DNS 名称通过配置文件与行放在 SAN 中`subjectAltName = @alternate_names`（无法通过命令行进行）。然后`alternate_names`在配置文件中有一个部分（你应该调整它以适应你的口味）：

```
[ alternate_names ]

DNS.1       = example.com
DNS.2       = www.example.com
DNS.3       = mail.example.com
DNS.4       = ftp.example.com

# Add these if you need them. But usually you don't want them or
#   need them in production. You may need them for development.
# DNS.5       = localhost
# DNS.6       = localhost.localdomain
# IP.1        = 127.0.0.1
# IP.2        = ::1 
```

将 DNS 名称放在 SAN 而不是 CN 中很重要，因为*IETF*和 CA/浏览器论坛都指定了这种做法。他们还指定不推荐使用 CN 中的 DNS 名称（但不禁止）。*如果*您将 DNS 名称放在 CN 中，则它*必须*包含在 CA/B 策略下的 SAN 中。所以你不能避免使用主题备用名称。

如果您不将 DNS 名称放在 SAN 中，则证书将无法在遵循 CA/浏览器论坛指南的浏览器和其他用户代理下验证。

相关：浏览器遵循 CA/浏览器论坛政策；而不是 IETF 政策。这就是使用 OpenSSL（通常遵循 IETF）创建的证书有时无法在浏览器下验证的原因之一（浏览器遵循 CA/B）。它们是不同的标准，它们有不同的发布政策和不同的验证要求。

* * *

**创建一个自签名证书**（注意添加`-x509`选项）：

```
openssl req -config example-com.conf -new -x509 -sha256 -newkey rsa:2048 -nodes \
    -keyout example-com.key.pem -days 365 -out example-com.cert.pem 
```

**创建一个签名请求**（注意缺少`-x509`选项）：

```
openssl req -config example-com.conf -new -sha256 -newkey rsa:2048 -nodes \
    -keyout example-com.key.pem -days 365 -out example-com.req.pem 
```

**打印自签名证书**：

```
openssl x509 -in example-com.cert.pem -text -noout 
```

**打印签名请求**：

```
openssl req -in example-com.req.pem -text -noout 
```

**配置文件（通过`-config`选项传递）**

```
[ req ]
default_bits        = 2048
default_keyfile     = server-key.pem
distinguished_name  = subject
req_extensions      = req_ext
x509_extensions     = x509_ext
string_mask         = utf8only

# The Subject DN can be formed using X501 or RFC 4514 (see RFC 4519 for a description).
#   Its sort of a mashup. For example, RFC 4514 does not provide emailAddress.
[ subject ]
countryName         = Country Name (2 letter code)
countryName_default     = US

stateOrProvinceName     = State or Province Name (full name)
stateOrProvinceName_default = NY

localityName            = Locality Name (eg, city)
localityName_default        = New York

organizationName         = Organization Name (eg, company)
organizationName_default    = Example, LLC

# Use a friendly name here because it's presented to the user. The server's DNS
#   names are placed in Subject Alternate Names. Plus, DNS names here is deprecated
#   by both IETF and CA/Browser Forums. If you place a DNS name here, then you
#   must include the DNS name in the SAN too (otherwise, Chrome and others that
#   strictly follow the CA/Browser Baseline Requirements will fail).
commonName          = Common Name (e.g. server FQDN or YOUR name)
commonName_default      = Example Company

emailAddress            = Email Address
emailAddress_default        = test@example.com

# Section x509_ext is used when generating a self-signed certificate. I.e., openssl req -x509 ...
[ x509_ext ]

subjectKeyIdentifier        = hash
authorityKeyIdentifier    = keyid,issuer

# You only need digitalSignature below. *If* you don't allow
#   RSA Key transport (i.e., you use ephemeral cipher suites), then
#   omit keyEncipherment because that's key transport.
basicConstraints        = CA:FALSE
keyUsage            = digitalSignature, keyEncipherment
subjectAltName          = @alternate_names
nsComment           = "OpenSSL Generated Certificate"

# RFC 5280, Section 4.2.1.12 makes EKU optional
#   CA/Browser Baseline Requirements, Appendix (B)(3)(G) makes me confused
#   In either case, you probably only need serverAuth.
# extendedKeyUsage    = serverAuth, clientAuth

# Section req_ext is used when generating a certificate signing request. I.e., openssl req ...
[ req_ext ]

subjectKeyIdentifier        = hash

basicConstraints        = CA:FALSE
keyUsage            = digitalSignature, keyEncipherment
subjectAltName          = @alternate_names
nsComment           = "OpenSSL Generated Certificate"

# RFC 5280, Section 4.2.1.12 makes EKU optional
#   CA/Browser Baseline Requirements, Appendix (B)(3)(G) makes me confused
#   In either case, you probably only need serverAuth.
# extendedKeyUsage    = serverAuth, clientAuth

[ alternate_names ]

DNS.1       = example.com
DNS.2       = www.example.com
DNS.3       = mail.example.com
DNS.4       = ftp.example.com

# Add these if you need them. But usually you don't want them or
#   need them in production. You may need them for development.
# DNS.5       = localhost
# DNS.6       = localhost.localdomain
# DNS.7       = 127.0.0.1

# IPv6 localhost
# DNS.8     = ::1 
```

您可能需要对 Chrome 执行以下操作。否则[Chrome 可能会抱怨*Common Name* is invalid ( `ERR_CERT_COMMON_NAME_INVALID`)](https://superuser.com/questions/1202498/create-self-signed-certificate-with-subjectaltname-to-fix-missing-subjectaltnam/1202506#1202506)。在这种情况下，我不确定 SAN 中的 IP 地址和 CN 之间的关系是什么。

```
# IPv4 localhost
# IP.1       = 127.0.0.1

# IPv6 localhost
# IP.2     = ::1 
```

* * *

关于在 X.509/PKIX 证书中处理 DNS 名称还有其他规则。有关规则，请参阅这些文档：

*   RFC 5280，[互联网 X.509 公钥基础设施证书和证书撤销列表 (CRL) 配置文件](https://www.rfc-editor.org/rfc/rfc5280)
*   RFC 6125，[在传输层安全 (TLS) 上下文中使用 X.509 (PKIX) 证书在互联网公钥基础设施中表示和验证基于域的应用程序服务身份](https://www.rfc-editor.org/rfc/rfc6125)
*   RFC 6797，附录 A，[HTTP 严格传输安全 (HSTS)](https://www.rfc-editor.org/rfc/rfc6797)
*   RFC 7469，[HTTP 的公钥固定扩展](https://www.rfc-editor.org/rfc/rfc7469)
*   CA/浏览器论坛[基线要求](https://cabforum.org/baseline-requirements-documents/)
*   CA/浏览器论坛[扩展验证指南](https://cabforum.org/extended-validation-2/)

列出了 RFC 6797 和 RFC 7469，因为它们比其他 RFC 和 CA/B 文档更严格。RFC 6797 和 7469*也不允许*IP 地址。

* * *

## 回答 #3

> 赞同：546
> 
> 时间：2016-12-28T17:30:16.993

# # 2022 年更新

截至 2022 年，OpenSSL ≥ 1.1.1，以下命令可满足您的所有需求，包括[主题备用名称 (SAN)](https://www.openssl.org/docs/manmaster/man5/x509v3_config.html#Subject-Alternative-Name)：

```
openssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \
  -keyout example.key -out example.crt -subj "/CN=example.com" \
  -addext "subjectAltName=DNS:example.com,DNS:www.example.net,IP:10.0.0.1" 
```

* * *

在 OpenSSL ≤ 1.1.0 的旧系统上，例如 Debian ≤ 9 或 CentOS ≤ 7，需要使用更长版本的此命令：

```
openssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \
  -keyout example.key -out example.crt -extensions san -config \
  <(echo "[req]"; 
    echo distinguished_name=req; 
    echo "[san]"; 
    echo subjectAltName=DNS:example.com,DNS:www.example.net,IP:10.0.0.1
    ) \
  -subj "/CN=example.com" 
```

任一命令都会创建一个证书，该证书是

*   对（子）域`example.com`和`www.example.net`（SAN）有效，
*   也适用于 IP 地址`10.0.0.1`(SAN)，
*   相对强劲（截至 2022 年）和
*   有效期为`3650`几天（~10 年）。

生成以下文件：

*   私钥：`example.key`
*   证书：`example.crt`

所有信息都在命令行中提供。没有让您烦恼的**交互式输入**。没有**配置文件**你必须弄乱。所有必要的步骤都由**单个 OpenSSL 调用**执行：从生成私钥到自签名证书。

* * *

### 备注 #1：加密参数

由于证书是自签名的，需要用户手动接受，所以使用短过期或弱密码是没有意义的。

将来，您可能希望为 RSA 密钥使用更多`4096`位，并使用比 更强的哈希算法`sha256`，但截至 2022 年，这些都是合理的值。它们足够强大，同时受到所有现代浏览器的支持。

### 备注#2：参数“ `-nodes`”

从理论上讲，您可以省略`-nodes`参数（这意味着“没有 DES 加密”），在这种情况下`example.key`将使用密码进行加密。但是，这对于服务器安装几乎没有用处，因为您要么必须将密码也存储在服务器上，要么必须在每次重新启动时手动输入。

### 备注#3：另见

*   [直接在命令行上将 subjectAltName 提供给 openssl](https://security.stackexchange.com/a/198409/133603)
*   [如何通过命令行将多个电子邮件地址添加到 SSL 证书？](https://unix.stackexchange.com/a/333325/20407)
*   [有关 MSYS_NO_PATHCONV 的更多信息](https://stackoverflow.com/a/34386471/19163)

* * *

## 回答 #4

> 赞同：441
> 
> 时间：2014-04-13T01:48:24.573

以下是[@diegows 的答案中描述的选项，](https://stackoverflow.com/a/10176685/456814)[在文档](https://www.openssl.org/docs/apps/req.html)中进行了更详细的描述：

```
openssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days XXX 
```

> ```
> req 
> ```
> 
> PKCS#10 证书请求和证书生成实用程序。
> 
> ```
> -x509 
> ```
> 
> 此选项输出自签名证书而不是证书请求。这通常用于生成测试证书或自签名根 CA。
> 
> ```
> -newkey arg 
> ```
> 
> 此选项创建一个新的证书请求和一个新的私钥。论证采用几种形式之一。**rsa:nbits**，其中**nbits**是位数，生成大小为**nbits**的 RSA 密钥。
> 
> ```
> -keyout filename 
> ```
> 
> 这给出了将新创建的私钥写入的文件名。
> 
> ```
> -out filename 
> ```
> 
> 这指定默认情况下要写入的输出文件名或标准输出。
> 
> ```
> -days n 
> ```
> 
> 当使用**-x509**选项时，它指定认证证书的天数。默认值为 30 天。
> 
> ```
> -nodes 
> ```
> 
> 如果指定了此选项，则如果创建了私钥，则不会对其进行加密。

文档实际上比上面的更详细；我只是在这里总结了一下。

* * *

## 回答 #5

> 赞同：170
> 
> 时间：2015-08-13T09:44:52.237

我无法发表评论，因此我将其作为单独的答案。我发现接受的单行答案存在一些问题：

*   单行在密钥中包含密码短语。
*   单线使用 SHA-1，它在许多浏览器中会在控制台中引发警告。

这是一个简化版本，它删除了密码，提高了安全性以抑制警告，并在评论中包含一个建议以传递 -subj 以删除完整的问题列表：

```
openssl genrsa -out server.key 2048
openssl rsa -in server.key -out server.key
openssl req -sha256 -new -key server.key -out server.csr -subj '/CN=localhost'
openssl x509 -req -sha256 -days 365 -in server.csr -signkey server.key -out server.crt 
```

将“localhost”替换为您需要的任何域。您需要一个一个地运行前两个命令，因为 OpenSSL 会提示输入密码。

要将两者组合成一个 .pem 文件：

```
cat server.crt server.key > cert.pem 
```

* * *

## 回答 #6

> 赞同：80
> 
> 时间：2017-05-09T02:37:22.057

如果现代浏览器缺少 SAN（主题备用名称），则现代浏览器现在会为其他格式良好的自签名证书引发安全错误。***OpenSSL 没有提供命令行方式来指定这个***，所以很多开发者的教程和书签一下子就过时了。

再次运行的最快方法是一个简短的独立 conf 文件：

1.  创建一个 OpenSSL 配置文件（例如`req.cnf`：）

    ```
    [req]
    distinguished_name = req_distinguished_name
    x509_extensions = v3_req
    prompt = no
    [req_distinguished_name]
    C = US
    ST = VA
    L = SomeCity
    O = MyCompany
    OU = MyDivision
    CN = www.company.com
    [v3_req]
    keyUsage = critical, digitalSignature, keyAgreement
    extendedKeyUsage = serverAuth
    subjectAltName = @alt_names
    [alt_names]
    DNS.1 = www.company.com
    DNS.2 = company.com
    DNS.3 = company.net 
    ```

2.  创建引用此配置文件的证书

    ```
    openssl req -x509 -nodes -days 730 -newkey rsa:2048 \
     -keyout cert.key -out cert.pem -config req.cnf -sha256 
    ```

*[来自https://support.citrix.com/article/CTX135602](https://support.citrix.com/article/CTX135602_)的示例配置*

* * *

## 回答 #7

> 赞同：73
> 
> 时间：2014-10-20T09:52:10.360

我建议添加**-sha256**参数以使用 SHA-2 哈希算法，因为主要浏览器正在考虑将“SHA-1 证书”显示为不安全。

来自已接受答案的相同命令行 - @diegows 添加了 -sha256

> openssl req -x509 **-sha256** -newkey rsa:2048 -keyout key.pem -out cert.pem -days XXX

[Google 安全博客](http://googleonlinesecurity.blogspot.com/2014/09/gradually-sunsetting-sha-1.html)中的更多信息。

**2018 年 5 月更新。**正如许多人在评论中指出的那样，使用 SHA-2 不会为自签名证书增加任何安全性。但我仍然建议使用它作为不使用过时/不安全的加密哈希函数的好习惯。完整的解释可以在*[为什么最终实体证书之上的证书是基于 SHA-1 的？](https://security.stackexchange.com/questions/91913/why-is-it-fine-for-certificates-above-the-end-entity-certificate-to-be-sha1-base)*.

* * *

## 回答 #8

> 赞同：23
> 
> 时间：2017-05-13T20:21:16.093

这是我在本地机器上使用的脚本，用于在自签名证书中设置 SAN（subjectAltName）。

此脚本采用域名 (example.com) 并在同一证书中为 *.example.com 和 example.com 生成 SAN。下面的部分进行了评论。为脚本命名（例如`generate-ssl.sh`）并赋予它可执行权限。这些文件将被写入与脚本相同的目录。

Chrome 58 及更高版本要求在自签名证书中设置 SAN。

```
#!/usr/bin/env bash

# Set the TLD domain we want to use
BASE_DOMAIN="example.com"

# Days for the cert to live
DAYS=1095

# A blank passphrase
PASSPHRASE=""

# Generated configuration file
CONFIG_FILE="config.txt"

cat > $CONFIG_FILE <<-EOF
[req]
default_bits = 2048
prompt = no
default_md = sha256
x509_extensions = v3_req
distinguished_name = dn

[dn]
C = CA
ST = BC
L = Vancouver
O = Example Corp
OU = Testing Domain
emailAddress = webmaster@$BASE_DOMAIN
CN = $BASE_DOMAIN

[v3_req]
subjectAltName = @alt_names

[alt_names]
DNS.1 = *.$BASE_DOMAIN
DNS.2 = $BASE_DOMAIN
EOF

# The file name can be anything
FILE_NAME="$BASE_DOMAIN"

# Remove previous keys
echo "Removing existing certs like $FILE_NAME.*"
chmod 770 $FILE_NAME.*
rm $FILE_NAME.*

echo "Generating certs for $BASE_DOMAIN"

# Generate our Private Key, CSR and Certificate
# Use SHA-2 as SHA-1 is unsupported from Jan 1, 2017

openssl req -new -x509 -newkey rsa:2048 -sha256 -nodes -keyout "$FILE_NAME.key" -days $DAYS -out "$FILE_NAME.crt" -passin pass:$PASSPHRASE -config "$CONFIG_FILE"

# OPTIONAL - write an info to see the details of the generated crt
openssl x509 -noout -fingerprint -text < "$FILE_NAME.crt" > "$FILE_NAME.info"

# Protect the key
chmod 400 "$FILE_NAME.key" 
```

此脚本还会写入信息文件，因此您可以检查新证书并验证 SAN 设置是否正确。

```
 ...
                28:dd:b8:1e:34:b5:b1:44:1a:60:6d:e3:3c:5a:c4:
                da:3d
            Exponent: 65537 (0x10001)
    X509v3 extensions:
        X509v3 Subject Alternative Name: 
            DNS:*.example.com, DNS:example.com
Signature Algorithm: sha256WithRSAEncryption
     3b:35:5a:d6:9e:92:4f:fc:f4:f4:87:78:cd:c7:8d:cd:8c:cc:
     ... 
```

如果您使用的是 Apache，那么您可以在配置文件中引用上述证书，如下所示：

```
<VirtualHost _default_:443>
    ServerName example.com
    ServerAlias www.example.com
    DocumentRoot /var/www/htdocs

    SSLEngine on
    SSLCertificateFile path/to/your/example.com.crt
    SSLCertificateKeyFile path/to/your/example.com.key
</VirtualHost> 
```

请记住重新启动您的 Apache（或 Nginx 或 IIS）服务器以使新证书生效。

* * *

## 回答 #9

> 赞同：23
> 
> 时间：2020-01-21T07:23:31.097

我无法发表评论，所以我添加了一个单独的答案。我尝试为 NGINX 创建一个自签名证书，这很容易，但是当我想将它添加到 Chrome 白名单时，我遇到了问题。我的解决方案是创建一个根证书并用它签署一个子证书。

所以一步一步来。创建文件**config_ssl_ca.cnf** 注意，配置文件有一个选项**basicConstraints=CA:true**这意味着这个证书应该是根证书。

> 这是一个很好的做法，因为您创建一次就可以重复使用。

```
[ req ]
default_bits = 2048

prompt = no
distinguished_name=req_distinguished_name
req_extensions = v3_req

[ req_distinguished_name ]
countryName=UA
stateOrProvinceName=root region
localityName=root city
organizationName=Market(localhost)
organizationalUnitName=roote department
commonName=market.localhost
emailAddress=root_email@root.localhost

[ alternate_names ]
DNS.1        = market.localhost
DNS.2        = www.market.localhost
DNS.3        = mail.market.localhost
DNS.4        = ftp.market.localhost
DNS.5        = *.market.localhost

[ v3_req ]
keyUsage=digitalSignature
basicConstraints=CA:true
subjectKeyIdentifier = hash
subjectAltName = @alternate_names 
```

您的子证书的下一个配置文件将调用**config_ssl.cnf**。

```
[ req ]
default_bits = 2048

prompt = no
distinguished_name=req_distinguished_name
req_extensions = v3_req

[ req_distinguished_name ]
countryName=UA
stateOrProvinceName=Kyiv region
localityName=Kyiv
organizationName=market place
organizationalUnitName=market place department
commonName=market.localhost
emailAddress=email@market.localhost

[ alternate_names ]
DNS.1        = market.localhost
DNS.2        = www.market.localhost
DNS.3        = mail.market.localhost
DNS.4        = ftp.market.localhost
DNS.5        = *.market.localhost

[ v3_req ]
keyUsage=digitalSignature
basicConstraints=CA:false
subjectAltName = @alternate_names
subjectKeyIdentifier = hash 
```

第一步——创建根密钥和证书

```
openssl genrsa -out ca.key 2048
openssl req -new -x509 -key ca.key -out ca.crt -days 365 -config config_ssl_ca.cnf 
```

第二步创建子密钥和文件 CSR - 证书签名请求。因为想法是通过root签署子证书并获得正确的证书

```
openssl genrsa -out market.key 2048
openssl req -new -sha256 -key market.key -config config_ssl.cnf -out market.csr 
```

打开 Linux 终端并执行此命令

```
echo 00 > ca.srl
touch index.txt 
```

ca.srl文本文件，包含下**一个**要使用的十六进制序列号。强制的。该文件必须存在并包含有效的序列号。

最后一步，再创建一个配置文件并将其命名为**config_ca.cnf**

```
# we use 'ca' as the default section because we're usign the ca command
[ ca ]
default_ca = my_ca

[ my_ca ]
#  a text file containing the next serial number to use in hex. Mandatory.
#  This file must be present and contain a valid serial number.
serial = ./ca.srl

# the text database file to use. Mandatory. This file must be present though
# initially it will be empty.
database = ./index.txt

# specifies the directory where new certificates will be placed. Mandatory.
new_certs_dir = ./

# the file containing the CA certificate. Mandatory
certificate = ./ca.crt

# the file contaning the CA private key. Mandatory
private_key = ./ca.key

# the message digest algorithm. Remember to not use MD5
default_md = sha256

# for how many days will the signed certificate be valid
default_days = 365

# a section with a set of variables corresponding to DN fields
policy = my_policy

# MOST IMPORTANT PART OF THIS CONFIG
copy_extensions = copy

[ my_policy ]
# if the value is "match" then the field value must match the same field in the
# CA certificate. If the value is "supplied" then it must be present.
# Optional means it may be present. Any fields not mentioned are silently
# deleted.
countryName = match
stateOrProvinceName = supplied
organizationName = supplied
commonName = market.localhost
organizationalUnitName = optional
commonName = supplied 
```

您可能会问，为什么这么难，为什么我们必须再创建一个配置来通过 root 签署子证书。答案很简单，因为子证书必须有一个 SAN 块 - 主题备用名称。如果我们通过“openssl x509”工具对子证书进行签名，根证书将删除子证书中的SAN字段。所以我们使用“openssl ca”而不是“openssl x509”来避免删除SAN字段。我们创建一个新的配置文件并告诉它复制所有扩展字段**copy_extensions = copy**。

```
openssl ca -config config_ca.cnf -out market.crt -in market.csr 
```

该程序会问您 2 个问题：

1.  签署证书？说“Y”
2.  1 个证书请求中的 1 个已通过认证，提交？说“Y”

在终端中，您可以看到一个带有“数据库”一词的句子，它表示您通过“触摸”命令创建的文件 index.txt。它将包含您通过“openssl ca”实用程序创建的所有证书的所有信息。要检查证书有效使用：

```
openssl rsa -in market.key -check 
```

如果您想查看 CRT 中的内容：

```
openssl x509 -in market.crt -text -noout 
```

如果您想查看 CSR 的内容：

```
openssl req -in market.csr -noout -text 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2017-09-20T16:27:21.243

2017年单行：

```
openssl req \
-newkey rsa:2048 \
-x509 \
-nodes \
-keyout server.pem \
-new \
-out server.pem \
-subj /CN=localhost \
-reqexts SAN \
-extensions SAN \
-config <(cat /System/Library/OpenSSL/openssl.cnf \
    <(printf '[SAN]\nsubjectAltName=DNS:localhost')) \
-sha256 \
-days 3650 
```

这也适用于 Chrome 57，因为它提供了 SAN，而无需其他配置文件。它取自[这里](https://github.com/webpack/webpack-dev-server/issues/854)的答案。

这将创建一个包含私钥和证书的单个 .pem 文件。如果需要，您可以将它们移动到单独的 .pem 文件中。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2017-11-28T10:11:39.947

2017 年单线版本：

**中央操作系统：**

```
openssl req -x509 -nodes -sha256 -newkey rsa:2048 \
-keyout localhost.key -out localhost.crt \
-days 3650 \
-subj "CN=localhost" \
-reqexts SAN -extensions SAN \
-config <(cat /etc/pki/tls/openssl.cnf <(printf "\n[SAN]\nsubjectAltName=IP:127.0.0.1,DNS:localhost")) 
```

**Ubuntu：**

```
openssl req -x509 -nodes -sha256 -newkey rsa:2048 \
-keyout localhost.key -out localhost.crt \
-days 3650 \
-subj "/CN=localhost" \
-reqexts SAN -extensions SAN \
-config <(cat /etc/ssl/openssl.cnf <(printf "\n[SAN]\nsubjectAltName=IP:127.0.0.1,DNS:localhost")) 
```

编辑：在 Ubuntu 的 'subj' 选项前添加了斜线。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2017-09-11T15:14:39.710

一个班轮 FTW。我喜欢保持简单。为什么不使用一个包含所有所需参数的命令呢？这就是我喜欢的方式——这会创建一个 x509 证书及其 PEM 密钥：

```
openssl req -x509 \
 -nodes -days 365 -newkey rsa:4096 \
 -keyout self.key.pem \
 -out self-x509.crt \
 -subj "/C=US/ST=WA/L=Seattle/CN=example.com/emailAddress=someEmail@gmail.com" 
```

该单个命令包含您通常会为证书详细信息提供的所有答案。通过这种方式，您可以设置参数并运行命令，获取输出 - 然后去喝咖啡。

[>>更多这里<<](http://scaleup.us/2017/09/10/create-self-signed-tls-certificates-pkcs8-key-x509-cert-graylog-gelf/)

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2020-11-07T22:36:39.290

`openssl`允许通过单个命令生成自签名证书（`-newkey` 指示生成私钥并`-x509`指示颁发自签名证书而不是签名请求）：：

```
openssl req -x509 -newkey rsa:4096 \
-keyout my.key -passout pass:123456 -out my.crt \
-days 365 \
-subj /CN=localhost/O=home/C=US/emailAddress=me@mail.internal \
-addext "subjectAltName = DNS:localhost,DNS:web.internal,email:me@mail.internal" \
-addext keyUsage=digitalSignature -addext extendedKeyUsage=serverAuth 
```

您可以在不同的步骤中生成私钥并构建自签名证书：

```
openssl genrsa -out my.key -passout pass:123456 2048

openssl req -x509 \
-key my.key -passin pass:123456 -out my.csr \
-days 3650 \
-subj /CN=localhost/O=home/C=US/emailAddress=me@mail.internal \
-addext "subjectAltName = DNS:localhost,DNS:web.internal,email:me@mail.internal" \
-addext keyUsage=digitalSignature -addext extendedKeyUsage=serverAuth 
```

查看生成的证书::

```
openssl x509 -text -noout -in my.crt 
```

Java`keytool`创建 PKCS#12 存储::

```
keytool -genkeypair -keystore my.p12 -alias master \
-storetype pkcs12 -keyalg RSA -keysize 2048 -validity 3650 \
-storepass 123456 \
-dname "CN=localhost,O=home,C=US" \
-ext 'san=dns:localhost,dns:web.internal,email:me@mail.internal' 
```

导出自签名证书：

```
keytool -exportcert -keystore my.p12 -file my.crt \
-alias master -rfc -storepass 123456 
```

查看生成的证书::

```
keytool -printcert -file my.crt 
```

`certtool`从 GnuTLS 不允许从 CLI 传递不同的属性。我不喜欢弄乱配置文件（（

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2015-04-02T06:15:31.100

你有正确的一般程序。该命令的语法如下。

```
openssl req -new -key {private key file} -out {output file} 
```

但是，会显示警告，因为浏览器无法通过使用已知的证书颁发机构 (CA) 验证证书来验证身份。

由于这是一个自签名证书，因此没有 CA，您可以放心地忽略警告并继续。如果您想获得公共 Internet 上任何人都可以识别的真实证书，那么过程如下。

1.  生成私钥
2.  使用该私钥创建 CSR 文件
3.  向 CA 提交 CSR（威瑞信或其他等）
4.  在 Web 服务器上安装从 CA 收到的证书
5.  根据类型证书将其他证书添加到身份验证链

*[我在Securing the Connection: Creating a Security Certificate with OpenSSL](https://bigthinkingapplied.com/secure-the-connection-installing-certificates-on-3-common-web-servers/)*的帖子中有更多详细信息

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2015-10-08T21:36:12.357

> ## 生成密钥
> 
> 我`/etc/mysql`用于证书存储，因为`/etc/apparmor.d/usr.sbin.mysqld`包含`/etc/mysql/*.pem r`.
> 
> ```
> sudo su -
> cd /etc/mysql
> openssl genrsa -out ca-key.pem 2048;
> openssl req -new -x509 -nodes -days 1000 -key ca-key.pem -out ca-cert.pem;
> openssl req -newkey rsa:2048 -days 1000 -nodes -keyout server-key.pem -out server-req.pem;
> openssl x509 -req -in server-req.pem -days 1000 -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 -out server-cert.pem;
> openssl req -newkey rsa:2048 -days 1000 -nodes -keyout client-key.pem -out client-req.pem;
> openssl x509 -req -in client-req.pem -days 1000 -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 -out client-cert.pem; 
> ```
> 
> ## 添加配置
> 
> `/etc/mysql/my.cnf`
> 
> ```
> [client]
> ssl-ca=/etc/mysql/ca-cert.pem
> ssl-cert=/etc/mysql/client-cert.pem
> ssl-key=/etc/mysql/client-key.pem
> 
> [mysqld]
> ssl-ca=/etc/mysql/ca-cert.pem
> ssl-cert=/etc/mysql/server-cert.pem
> ssl-key=/etc/mysql/server-key.pem 
> ```

在我的设置中，Ubuntu 服务器登录到：`/var/log/mysql/error.log`

# 后续注意事项：

*   `SSL error: Unable to get certificate from '...'`

    [如果您的证书文件不在 apparmors 配置中，MySQL 可能会被拒绝读取访问权限](http://ubuntuforums.org/showthread.php?t=1121458&p=7048357#post7048357)。正如前面步骤中提到的^，将我们所有的证书保存为apparmor 默认批准`.pem`的目录中的文件（或修改您的 apparmor/SELinux 以允许访问您存储它们的任何位置。）`/etc/mysql/`

*   `SSL error: Unable to get private key`

    [您的 MySQL 服务器版本可能不支持默认`rsa:2048`格式](https://askubuntu.com/a/439274/250556)

    将生成的转换`rsa:2048`为普通`rsa`的：

    ```
    openssl rsa -in server-key.pem -out server-key.pem
    openssl rsa -in client-key.pem -out client-key.pem 
    ```

*   [检查本地服务器是否支持 SSL](https://mifosforge.jira.com/wiki/display/MIFOS/How+to+enable+MySQL+SSL+on+Ubuntu)：

    > ```
    > mysql -u root -p
    > mysql> show variables like "%ssl%";
    > +---------------+----------------------------+
    > | Variable_name | Value                      |
    > +---------------+----------------------------+
    > | have_openssl  | YES                        |
    > | have_ssl      | YES                        |
    > | ssl_ca        | /etc/mysql/ca-cert.pem     |
    > | ssl_capath    |                            |
    > | ssl_cert      | /etc/mysql/server-cert.pem |
    > | ssl_cipher    |                            |
    > | ssl_key       | /etc/mysql/server-key.pem  |
    > +---------------+----------------------------+ 
    > ```

*   [验证与数据库的连接是 SSL 加密的](https://kb.berkeley.edu/page.php?id=23112)：

    > ## 验证连接
    > 
    > 登录到 MySQL 实例后，您可以发出查询：
    > 
    > ```
    > show status like 'Ssl_cipher'; 
    > ```
    > 
    > 如果您的连接未加密，则结果将为空白：
    > 
    > ```
    > mysql> show status like 'Ssl_cipher';
    > +---------------+-------+
    > | Variable_name | Value |
    > +---------------+-------+
    > | Ssl_cipher    |       |
    > +---------------+-------+
    > 1 row in set (0.00 sec) 
    > ```
    > 
    > 否则，它将显示正在使用的密码的非零长度字符串：
    > 
    > ```
    > mysql> show status like 'Ssl_cipher';
    > +---------------+--------------------+
    > | Variable_name | Value              |
    > +---------------+--------------------+
    > | Ssl_cipher    | DHE-RSA-AES256-SHA |
    > +---------------+--------------------+
    > 1 row in set (0.00 sec) 
    > ```

*   [特定用户的连接](http://dev.mysql.com/doc/refman/5.0/en/grant.html)需要 ssl（“需要 ssl”）：

    > *   SSL
    > 
    > 告诉服务器只允许该帐户的 SSL 加密连接。
    > 
    > ```
    > GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
    >   REQUIRE SSL; 
    > ```
    > 
    > 要连接，客户端必须指定 --ssl-ca 选项来验证服务器证书，并且可以另外指定 --ssl-key 和 --ssl-cert 选项。如果既没有指定 --ssl-ca 选项也没有指定 --ssl-capath 选项，客户端不会验证服务器证书。

* * *

*[备用链接：使用 SSL 安全 PHP 连接到 MySQL](http://www.madirish.net/214)*中的冗长教程。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2019-02-25T21:52:11.490

正如已经详细讨论过的，[自签名证书](https://en.wikipedia.org/wiki/Self-signed_certificate) [对于 Internet 是不可信的](https://www.globalsign.com/en/ssl-information-center/dangers-self-signed-certificates/)。您可以[将自签名证书添加到许多但不是所有浏览器](https://stackoverflow.com/questions/7580508/getting-chrome-to-accept-self-signed-localhost-certificate)。或者，您可以[成为自己的证书颁发机构](https://stackoverflow.com/questions/21297139/how-do-you-sign-a-certificate-signing-request-with-your-certification-authority/21340898#21340898)。

不想从证书颁发机构获得签名证书的主要原因是成本——[赛门铁克每年为证书收取 995 美元到 1,999 美元之间的费用——仅针对用于内部网络的证书，赛门铁克每年收费 399 美元](https://www.websecurity.symantec.com/buy-renew?ef_id=Cj0KCQiAwc7jBRD8ARIsAKSUBHL3u_wl0kyXRrvQM3Fj2H9j9T6FogZsQVjmxinnw6KIf9xVvUP9O64aAj0KEALw_wcB:G:s&s_kwcid=AL!6100!3!225648135095!e!!g!!symantec%20ssl%20certificate&gclid=Cj0KCQiAwc7jBRD8ARIsAKSUBHL3u_wl0kyXRrvQM3Fj2H9j9T6FogZsQVjmxinnw6KIf9xVvUP9O64aAj0KEALw_wcB)。如果您正在处理信用卡付款或为高利润公司的利润中心工作，那么这笔费用很容易证明是合理的。对于一个在互联网上创建的个人项目，或者对于一个以最低预算运行的非营利组织，或者如果一个人在组织的成本中心工作——成本中心总是试图做更多的事情，这超出了许多人所能承受的范围。少。

另一种方法是使用[certbot](https://certbot.eff.org/)（请参阅[关于 certbot](https://certbot.eff.org/about/)）。Certbot 是一个易于使用的自动客户端，可为您的 Web 服务器获取和部署 SSL/TLS 证书。

如果您设置了 certbot，您可以启用它来为您创建和维护由[Let's Encrypt](https://letsencrypt.org/)证书颁发机构颁发的证书。

我在周末为我的组织做了这个。我在我的服务器（Ubuntu 16.04）上安装了 certbot 所需的软件包，然后运行了设置和启用 certbot 所需的命令。可能需要一个用于 certbot 的[DNS 插件](https://certbot.eff.org/docs/using.html#dns-plugins)——我们目前正在使用[DigitalOcean](https://certbot-dns-digitalocean.readthedocs.io/en/stable/)，但可能很快就会迁移到另一项服务。

请注意，有些说明并不完全正确，需要花一点时间在 Google 上摸索才能弄清楚。第一次这花了我相当多的时间，但现在我想我可以在几分钟内完成。

对于 DigitalOcean，我遇到的一个问题是当我被提示输入 DigitalOcean 凭据 INI 文件的路径时。该脚本所指的是[应用程序和 API](https://cloud.digitalocean.com/account/api/tokens)页面以及该页面上的 Tokens/Key 选项卡。您需要为 DigitalOcean 的 API 拥有或生成个人访问令牌（读取和写入）——这是一个 65 个字符的十六进制字符串。然后需要将此字符串放入运行 certbot 的网络服务器上的文件中。该文件的第一行可以有注释（注释以# 开头）。第二行是：

```
dns_digitalocean_token = 0000111122223333444455556666777788889999aaaabbbbccccddddeeeeffff 
```

[一旦我弄清楚如何为 DigitalOcean 的 API 设置读写令牌，使用 certbot 设置通配符证书](https://en.wikipedia.org/wiki/Wildcard_certificate)就很容易了。请注意，不必设置通配符证书，而是可以指定希望证书应用到的每个域和子域。通配符证书需要包含来自 DigitalOcean 的个人访问令牌的凭据 INI 文件。

请注意，公钥证书（也称为身份证书或 SSL 证书）过期并需要续订。因此，您需要定期（重复）更新您的证书。certbot 文档涵盖了[更新证书](https://certbot.eff.org/docs/using.html#renewing-certificates)。

我的计划是编写一个脚本来使用 openssl 命令获取我的证书的到期日期，并在到期前 30 天或更短时间触发续订。然后我会将此脚本添加到 cron 并每天运行一次。

这是读取证书到期日期的命令：

```
root@prod-host:~# /usr/bin/openssl x509 -enddate -noout -in path-to-certificate-pem-file
notAfter=May 25 19:24:12 2019 GMT 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-12-05T06:16:28.567

这对我有用

```
openssl req -x509 -nodes -subj '/CN=localhost'  -newkey rsa:4096 -keyout ./sslcert/key.pem -out ./sslcert/cert.pem -days 365 
```

服务器.js

```
var fs = require('fs');
var path = require('path');
var http = require('http');
var https = require('https');
var compression = require('compression');
var express = require('express');
var app = express();

app.use(compression());
app.use(express.static(__dirname + '/www'));    

app.get('/*', function(req,res) {
  res.sendFile(path.join(__dirname+'/www/index.html'));
});

// your express configuration here

var httpServer = http.createServer(app);
var credentials = {
    key: fs.readFileSync('./sslcert/key.pem', 'utf8'),
    cert: fs.readFileSync('./sslcert/cert.pem', 'utf8')
};
var httpsServer = https.createServer(credentials, app);

httpServer.listen(8080);
httpsServer.listen(8443);

console.log(`RUNNING ON  http://127.0.0.1:8080`);
console.log(`RUNNING ON  http://127.0.0.1:8443`); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2022-02-28T11:15:28.943

经过大量的尝试，尝试了各种解决方案，我仍然面临为本地主机颁发自签名证书的问题，给了我错误

`ERR_CERT_INVALID`

在展开细节时，chrome 表示：

> 您现在无法访问 localhost，因为该网站发送了加密凭据...

唯一难看的方法是输入（直接在这个屏幕上，看不到任何文本光标）：

（输入键盘）***thisisunsafe***

这让我继续。

#### 直到我发现`extendedKeyUsage = serverAuth, clientAuth`

**TL;博士**

1.  `openssl genrsa -out localhost.key 2048`

2.  `openssl req -key localhost.key -new -out localhost.csr`

3.  （在所有内容上单击输入，只需使用 localhost 或您的其他 FQDN 填写公用名 (CN)。

```
echo "
subjectKeyIdentifier   = hash
authorityKeyIdentifier = keyid:always,issuer:always
basicConstraints       = CA:TRUE
keyUsage               = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment, keyAgreement, keyCertSign
extendedKeyUsage       = serverAuth, clientAuth
subjectAltName         = DNS:localhost, DNS:localhost.localdomain
issuerAltName          = issuer:copy
" > v3.ext 
```

5.  `openssl x509 -req -in localhost.csr -signkey localhost.key -out localhost.pem -days 3650 -sha256 -extfile v3.ext`

瞧！您可以访问该网站，展开“高级”并单击“继续访问本地主机（不安全）”。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-12-27T13:35:30.253

生成10年无密码无证书的密钥，捷径：

```
openssl req  -x509 -nodes -new  -keyout server.key -out server.crt -days 3650 -subj "/C=/ST=/L=/O=/OU=web/CN=www.server.com" 
```

# java - 测试 indexOf 返回值的最佳实践

> ID：10175818
> 
> 赞同：8
> 
> 时间：2012-04-16T14:14:58.770
> 
> 标签：java, javascript

当你测试 indexOf 的返回值时，你通常会写什么？

```
if str.indexOf("a") < 0 
```

对比

```
if str.indexOf("a") == -1 
```

一种方法会优于另一种方法吗？

我实际上是在为任何语言的任何函数提出这个问题，该函数在错误时返回 -1。

我通常更喜欢 < 0 方法，因为如果函数扩展为在其他情况下返回 -2，代码仍然可以工作。

但是，我注意到 == -1 方法更常用。有什么原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:17:41.073

我试图实现对“错误条件”的测试应该尽可能广泛的一般原则。因此我会使用`< 0`而不是`== -1`.

这是我在 CS 学位期间在正式方法的课程中教授的一个原则。

简单`if`来说，这并不重要，但在循环中，重要的是检测任何“超出范围”条件以确保循环终止，而不是假设循环终止值将被准确命中。

举个例子：

```
i = 0;
while (i < 10) {
    ++i;
    // something else increments i
} 
```

对比

```
i = 0;
while (i != 10) {
    ++i;
    // something else increments i
} 
```

后一种情况可能会失败 - 前一种情况不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:18:29.500

我也更喜欢 <0 方法。根据 Java 文档，== -1 方法被广泛使用的原因是，如果索引丢失，函数确实会返回 -1，并且永远不会发生“扩展函数”的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:20:34.017

在几乎所有情况下，建议尽可能地坚持 Java 文档。请参阅 Java 文档： [http ://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf%28int%29](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf%28int%29)

...根据它：-1 将被返回。

所以我总是检查-1。如果您要检查特定值，则检查该特定值会更安全，以防止将来 java api 中的代码更改。

例如，如果你得到一个 -2，这意味着你的 JVM 中出现了严重错误。这并不意味着“未找到”。代码继续执行并导致异常/错误会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T14:19:07.467

根据 javadoc indexOf 总是应该返回 -1 如果字符没有按顺序出现 [http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf%28int%29](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf%28int%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T14:20:59.553

正如 Sandeep Nair 指出的那样，javaDoc 对此进行了解释，但我想评论一下。

两者都可以正常工作，我不会说一个比另一个“更好”。许多人写作的原因`== -1`是，如果“找不到东西”，搜索方法会返回 -1。我们不能使用 0，因为它们被用作数组等中的索引。

所以，这是一个见仁见智的问题。只要公约继续存在，就没有关系。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T14:21:17.443

我会使用`-1`只是因为我想检查我的期望。

我不期待`-2`。如果我得到了`-2`，那可能意味着我有一些问题。检查你的期望比检查你*可能*期望的要好。

# eclipse - 用于蓝图 XML 的 Eclipse 工具

> ID：10175819
> 
> 赞同：6
> 
> 时间：2012-04-16T14:15:00.453
> 
> 标签：eclipse, eclipse-plugin, blueprint-osgi

[是否有专门支持编辑Blueprint XML](http://aries.apache.org/modules/blueprint.html)文件的 Eclipse 插件？例如，自动完成参考 ID、接口名称等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-21T20:43:52.527

Eclipse 的 XML 编辑器有助于蓝图 XML 标记的自动完成以及任何标记的可用属性的帮助。但是，它不能自动完成接口名称和引用 Id。

# arrays - Matlab char 到双向量

> ID：10175834
> 
> 赞同：0
> 
> 时间：2012-04-16T14:15:59.553
> 
> 标签：arrays, string, matlab, vector

有没有一种简单的方法可以将 char 数组转换为向量？例如，我有这个

my_array = <1*64 字符>

而且全是“1010101010……”

我希望它是：

我的向量 = [1 0 1 0 1 0....]

是否有任何功能可以在我不编写任何代码的情况下实现？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:33:12.817

```
str='01001011';
[str2num(str(:))]'

ans =

     0     1     0     0     1     0     1     1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:34:08.503

```
my_vector = double(my_array - '0'); 
```

# internet-explorer - 如何从没有工具栏、地址栏和标准按钮的命令提示符打开一个新的 Internet Explorer？

> ID：10175839
> 
> 赞同：4
> 
> 时间：2012-04-16T14:16:25.450
> 
> 标签：internet-explorer

我需要打开一个新的 IE 窗口窗体控制台，

目前我正在通过从代码中执行以下命令从 java 打开一个新窗口。

```
 C:\Program Files\Internet Explorer\iexplore.exe -new "www.google.com" 
```

是否可以使用类似于上述的命令禁用 Toolbar 、 AdressBar 等...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:07:28.420

使用IE的kiosk模式。

要查看其工作原理的示例，请在运行提示符下运行以下命令。

```
 iexplore -k www.google.com 
```

# android - 听点击 TabWidget

> ID：10175841
> 
> 赞同：0
> 
> 时间：2012-04-16T14:16:32.837
> 
> 标签：android, android-tabhost, tabwidget, onclicklistener

我的 tabhost tools.java：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabtools);

    Resources res = getResources();
    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    // TabDados
    intent = new Intent().setClass(this, ToolDadosTubuCirc.class);
    spec = tabHost.newTabSpec("dados")
            .setIndicator("Dados", res.getDrawable(R.drawable.icondados))
            .setContent(intent);
    tabHost.addTab(spec);
    // TabLegenda
    intent = new Intent().setClass(this, ToolLegendaTubuCirc.class);
    spec = tabHost
            .newTabSpec("legenda")
            .setIndicator("Legenda",
                    res.getDrawable(R.drawable.iconlegenda))
            .setContent(intent);
    tabHost.addTab(spec);
    // TabCalcular
    intent = new Intent().setClass(this, ToolCalcularTubuCirc.class);
    spec = tabHost
            .newTabSpec("calcular")
            .setIndicator("Calcular",
                    res.getDrawable(R.drawable.iconcalcular))
            .setContent(intent);
    tabHost.addTab(spec);
    // TabCorrente
    tabHost.setCurrentTab(0);
}} 
```

每个意图调用一个活动。并且在每个“file.java”命令中都必须执行计算。

在“dados.java”中是我获取用户信息的地方。当他们单击选项卡“计算”时，必须验证所有数据是否已完成。

我想我需要为每个选项卡设置一个“onclicklistener”，比如一个按钮，对吧？？

**如何？单击选项卡“Dados”选项卡“Legenda”选项卡“calcular”时如何创建事件以运行代码？**

**注意：我需要检查从文件“ToolDadosCircular.java”中单击了哪个选项卡。**

编辑：tabtools.xml 代码：

```
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+layout/rowLog"
    android:layout_below="@+layout/rowLine" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="5dp" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />

    </LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:19:55.217

尝试

```
tabHost.getChildAt(yourtab).setOnClickListener(new View.onClickListener()
{
   @Override public void onClick(View view){
       //your code
   }
} 
```

编辑：我猜你的课是这样的

```
public class ToolDadosTubuCirc extends Activity{
    @Override public void onCreate(Bundle bundle){
          //code...
          TabHost tabHost = (TabHost) getParent().findViewById(yourTabHostId);
          //do what you want with tabHost
          //code...
    }
} 
```

# php - 将 css 应用于 php 表

> ID：10175843
> 
> 赞同：2
> 
> 时间：2012-04-16T14:16:38.707
> 
> 标签：php, html, css

我有一个生成的 php 表，我想在我的样式表中应用样式，例如 top:15px, left:10px 等...，不知道如何调用该表并将其与 css 链接-

```
echo "<table border=1>";
for ($i=0;$i<count($calls);$i++){
  for ($j=0;$j<count($days);$j++){
    $k = $days[$i].$times[$j];
    if (array_key_exists($k,$date)){
      echo "<td colspan='{$date[$k][1]}'>".
           "{$date[$k][0]}</td>";
      $j+=$date[$k][1]-1;
    }else
      echo "<td style='color:gray'>$k</td>";
  }

  echo "</tr>";
}
echo "</table>"; 
```

非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:19:16.670

```
echo '<table style="top: 15px; left:10px;">'; 
```

或者

```
echo '<table class="someClass">'; 
```

然后使用 CSS

```
.someClass{
top: 15px;
left: 10px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T14:19:37.153

给桌子一个`id`

```
echo "<table id=\"my_table\" border=1>"; 
```

然后`<head>`在文档的标签中使用它：

```
<style type="text/css">

  #my_table {
    top: 15px;
    ...
  }

</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:19:19.480

```
echo "<table style=\"border: 1px; top:15px; left: 10px;\">"; 
```

这个说法不成立吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T14:20:10.177

```
echo "<table border=1 style=\"top:15px; left:10px\">";

for ($i=0; $i<count($calls); $i++) {
    for ($j=0;$j<count($days);$j++) {
        $k = $days[$i].$times[$j];

        if (array_key_exists($k,$date)) {
            echo "<td colspan='{$date[$k][1]}'>".
                 "{$date[$k][0]}</td>";
            $j+=$date[$k][1]-1;
        } else {
            echo "<td style='color:gray'>$k</td>";
        }
    }

    echo "</tr>";
}

echo "</table>"; 
```

# java - 空指针异常 - 迭代 FastMap 值

> ID：10175844
> 
> 赞同：0
> 
> 时间：2012-04-16T14:16:42.203
> 
> 标签：java, collections, map

我需要迭代 FastMap.values。我的问题是基本循环失败了 NullPointerException

基本循环

```
Collection<Order> orders = myObject.getOpenOrders();
    for (Order order : orders) {
} 
```

问题是我系统中的另一个线程编辑了快速映射它正在向它添加和删除元素，我得到 NullPointerException。很少，但应该解决。

所以我添加了空检查

```
Collection<Order> orders = myObject.getOpenOrders();
   for (Order order : orders) {
        if (order != null ) 
   } 
```

我仍然得到 NullPointerExcetion 所以我尝试如下迭代它

```
 FastMap<String, Order> openOrders = myObject.getOpenOrdersMap();
    for (FastMap.Entry<String, Order> e = openOrders.head(), end = openOrders.tail(); (e = e.getNext()) != end && e != null;) {
        Order order = e.getValue();
    } 
```

但随后循环在它变为 null 而不是抛出 NullPointerExcetion 时停止。这也是一个问题，因为我需要迭代所有元素。

我认为问题在于 for 迭代使用 values() 并且它实际上是指向列表的指针。我试图复制列表，但在复制过程中我也得到了 NullPointerExcetion。任何建议

顺便说一句：我知道改变整个设计是最好的解决方案，并且在每次插入和读取时都使用锁。但是我可以做一些较小的改变来解决我的问题吗？
任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:17:50.840

如果你有一个多线程环境，你必须绝对使用一些同步，尤其是在使用迭代器时。

当另一个线程正在编辑它时，您不能迭代一个集合，这将使迭代器无效并破坏一切。

所以吞下药丸并使用一些同步，这种情况需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:22:00.827

这不是JDK类吗？（Javolution？）从什么文档说：

> 如果映射标记为**共享**，则所有操作都是线程安全的，包括对映射集合的迭代

所以你可能会遇到一些并发问题？试试看：

`FastMap<String, Order> openOrders = myObject.getOpenOrdersMap().shared()`

# javascript - 如何在javascript中分配函数？

> ID：10175853
> 
> 赞同：1
> 
> 时间：2012-04-16T14:17:09.400
> 
> 标签：javascript

我是 Javascript 新手，我刚刚发现了用于定义对象函数的 property 关键字。我尝试使用对象重构我的 websocket 实验，但我无法让它工作。

这有效（无对象）：

```
var ws = new WebSocket(something, somethingelse);
ws.onopen = function() {
   ws.send("hello");
   console.log("works");
} 
```

但这不会：

```
function MyObject() {
   this.ws = new WebSocket(something, somethingelse);
   this.ws.onopen = this.onOpen;
}

MyObject.prototype.onOpen = function() {
    this.ws.send("hello");   // undefined!
}; 
```

为什么ws未定义？我是否错误地分配了 onOpen 函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T14:22:53.757

您正在正确分配函数（只有一种分配函数的方法），您的问题是函数的上下文发生了变化。

考虑这一行：

```
this.ws.onopen = this.onOpen; 
```

**可能性一：**

现在我假设，*在* `WebSocket`某个地方，这个函数被调用作为对打开连接（如事件处理程序）的响应，可能像

```
this.onopen(); 
```

[`this`函数内部所指的内容取决于**函数**在运行时的调用方式](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)（`<-`阅读此链接，它有很大帮助）。它在定义时不受约束。在您的情况下，`this`将引用该`WebSocket`实例。

所以 inside 如果以这种方式调用， inside`MyObject.prototype.onOpen`指`this`的是没有属性的实例，而不是`this.ws`实例。`WebSocket``ws``MyObject`

这可以通过两种方式解决：

1.  既然`this`已经引用了`this.ws`，可以`send`直接调用`this`：

    ```
    MyObject.prototype.onOpen = function() {
        this.send("hello");
    }; 
    ```

2.  如果您希望`this`inside`MyObject.prototype.onOpen`始终引用`MyObject`实例，则必须保持对实例的显式引用，例如通过闭包：

    ```
    var self = this;
    this.ws.onopen = function() {
        self.onOpen();
    }; 
    ```

    现在里面`onOpen`,`this`指的是`MyObject`具有属性的实例`ws`，就像你在构造函数中设置它一样。

    在支持 ECMAScript 5 的浏览器中，函数已经有了这种技术的方法，称为`.bind()`：

    ```
    this.ws.onopen = this.onOpen.bind(this); 
    ```

* * *

**可能性2：**

也可能是这样`WebSocket`调用`onopen`的：

```
this.onopen.call(null); 
```

在这种情况下，`this`将引用`window`或将是`undefined`，取决于代码是否在严格模式下运行（没关系，无论如何这是一个问题）。

这种情况只能通过第一种可能性的第二种解决方案来解决。

* * *

**为什么第一个示例有效？**

```
var ws = new WebSocket(something, somethingelse);
ws.onopen = function() {
   ws.send("hello");
   console.log("works");
} 
```

在这种情况下，您分配给的函数`ws.onopen`是一个闭包，关闭在此范围内定义的变量，也是`ws`. 从这个意义上说，它类似于解决问题的第二种方法，但

```
ws.onopen = function() {
   this.send("hello");
   console.log("works");
} 
```

可能也会起作用。

# jquery - 如何提交没有条纹标签的未选中的 html 复选框？

> ID：10175854
> 
> 赞同：1
> 
> 时间：2012-04-16T14:17:10.197
> 
> 标签：jquery, checkbox, stripes

我正在尝试在 Stripes 框架旁边使用 javascript 客户端模板。这意味着我无法使用 stripes 表单标签库，它默认注入一个隐藏的加密字段，stripes 使用该字段来确定哪些复选框与表单一起呈现，因此它可以确定哪些复选框未被选中，如果它们没有通过作为表单参数。

在无法使用标签库的情况下将这个加密的隐藏字段包含在我的所有表单旁边是一个很大的负担，所以我正在寻找一个全局解决方案。我想出的是在提交表单之前拦截表单，将任何未选中复选框的值更改为 false，然后检查它们以便将它们发送到服务器。这样做的副作用是让用户在表单提交完成之前再次查看所有未选中的选项。有什么方法可以隐藏选中的动画但仍然让表单提交值？

这是我目前的解决方案：

```
$("body").delegate("form", "submit", function() {
    var $this = $(this);

    $('input:checkbox:not(:checked)', $this).each(function() { 
        var $this = $(this);
        $this.attr('value', 'false');
        $this.attr('checked', 'checked');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:25:28.097

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        // This :unchecked custom selecor was created by me.
        //http://nanoquantumtech.blogspot.in/2012/03/unchecked-selector-matches-all-elements.html
        $.extend($.expr[':'], {
            unchecked: function (obj) {
                return ((obj.type == 'checkbox' || obj.type == 'radio') && !$(obj).is(':checked'));
            }
        });

        $(document).ready(function () {
            $('#checkBoxList').find(':checked').addClass('vechicalChecked');

            $('#btnCheckedToUncheckedValues').click(function () {
                var checkedToUncheckedValues = [];

                $('#checkBoxList').find('.vechicalChecked:unchecked').each(function () {
                    checkedToUncheckedValues.push($(this).val());
                });

                alert('Checked To Unchecked Values Are : ' + (checkedToUncheckedValues.length == 0 ? 'none' : checkedToUncheckedValues.join(',')));
            });
        });
    </script>
</head>
<body>
    <div id="checkBoxList">
        <input type="checkbox" value="0" name="Vechical" checked="checked" />0<br />
        <input type="checkbox" value="1" name="Vechical" />1<br />
        <input type="checkbox" value="2" name="Vechical" checked="checked" />2<br />
        <input type="checkbox" value="3" name="Vechical" checked="checked" />3<br />
        <input type="checkbox" value="4" name="Vechical" />4<br />
        <input type="checkbox" value="5" name="Vechical" checked="checked" />5<br />
        <input type="checkbox" value="6" name="Vechical" />6<br />
        <input type="checkbox" value="7" name="Vechical" />7<br />
        <input type="checkbox" value="8" name="Vechical" checked="checked" />8<br />
        <input type="button" id="btnCheckedToUncheckedValues" value="checked To Unchecked Values" />
    </div>
</body>
</html> 
```

# javascript - Visual Studio 2010 失去 JS 格式规则

> ID：10175855
> 
> 赞同：1
> 
> 时间：2012-04-16T14:17:11.007
> 
> 标签：javascript, visual-studio-2010, formatting

正如标题所说，Visual Studio 只是原谅我的格式选项选择。

在`Tools > Options > Text editor > JScript > Formatting`我刚刚禁用了所有四个自动格式化。有时它似乎失去了我的选择，我不得不再次改变它。

有谁知道为什么？

我的版本是在 Windows 7 64bit 上运行的 VS2010 SP1 英文版。

# javascript - 将 Jquery 垂直选项卡更改为菜单

> ID：10175857
> 
> 赞同：0
> 
> 时间：2012-04-16T14:17:20.040
> 
> 标签：javascript, jquery, css, menu, tabs

参考 [http://mehdi.biz/blog/2010/02/05/vertical-tabs-for-jquery-lovers/](http://mehdi.biz/blog/2010/02/05/vertical-tabs-for-jquery-lovers/)

我知道这很容易，但我找不到解决方案。当用户将鼠标从图标上移开时，我只想隐藏面板（内容）。（像菜单一样不喜欢标签不想要活动标签.)

如何添加该 jquery 代码？

```
var $items3 = $('#vtab>ul>li');
$items3.mouseleave(function()
        {                           
        $('#vtab>div').hide();  
        }).mouseleave(); 
```

尝试了该代码..它隐藏了标签，所以我无法访问面板的内容..

例如： http: [//arkansas.gov/](http://arkansas.gov/) 右侧的面板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:41:43.320

您在附加鼠标后立即触发鼠标离开。为什么？而不是垂直选项卡上的javascript和你的使用这个：`display: none;`在`#vtab > div`css中添加。

```
 var $items = $('#vtab>ul>li');
    var $contents = $('#vtab>div');
    $items.on('mouseenter', function() {
        $items.removeClass('selected');
        $(this).addClass('selected');
        $contents.hide();
        var index = $items.index($(this));
        $contents.eq(index).show();
    });
    $('#vtab').on('mouseleave', function(){
        $items.removeClass('selected');
        $contents.hide();
    }); 
```

[在这里](http://jsfiddle.net/suDyw/23/)试试。这将仅显示选项卡内容并在 mouseenter 上选择选项卡并隐藏内容并在 mouseleave 上取消选择选项卡。

# java - 如何使用java在webdriver中获取当前月份

> ID：10175859
> 
> 赞同：0
> 
> 时间：2012-04-16T14:17:24.447
> 
> 标签：java, date, webdriver

我想知道是否有人可以帮助！

我一直在使用带有方法'Get_month'的以下'Get_Date'类来返回当前月份，但我现在决定转向webdriver，但不确定webdriver相当于以下函数是什么。

```
package hisScripts;
import com.thoughtworks.selenium.*;

public class Get_Date {

public String Get_Month(Selenium selenium) {
    return selenium.getEval("var MonthNames =  [ \"Jan 2012\", \"Feb 2012\", \"Mar 2012\", \"Apr 2012\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Nov 2011\", \"Nov 2011\", \"Dec 2011\" ];d = new Date();MonthNames[d.getMonth()];");
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:26:32.527

试试这个：

```
 public String get_Month(){
   Date date = new Date();
   SimpleDateFormat formatter = new SimpleDateFormat("MMMMMMMMM");
   return formatter.format(date);          
 } 
```

如果是这个月，它将返回`April`

如果您需要其他符号，请参阅[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

# iphone - 将我的应用程序提交到 App Store 时出错

> ID：10175863
> 
> 赞同：0
> 
> 时间：2012-04-16T14:17:40.973
> 
> 标签：iphone, ios, app-store

我已经在 Provisioning Portal 中设置了我的 App Buddle ID。（我没有在名称中使用任何通配符。）我已经能够成功生成配置证书并在我的设备上运行我的应用程序，甚至已经通过 Ad-Hoc 分发。但是，当我进入 iTunes Connect（或使用应用程序加载器）时，我点击“管理您的应用程序”，然后添加我的公司名称并点击下一步...然后我收到消息“您没有符合条件的iOS 应用程序的捆绑 ID。点击此处注册。” “这里”链接回我看到我的 Bundle ID 的供应门户。就像 Portal 和 iTunes Connect 不同步一样。这已经持续了大约两个星期。其他几个人报告了这个错误，但我读过的建议的解决方案都没有为我工作。它' 一个免费的应用程序，所以我不需要付费合同或任何东西。iTunes Connect 表明，在合同和银行方面一切都很好。

我无法从 Apple 获得任何解决方案。（我已致电开发人员支持热线并在 Apple 开发人员论坛上发布。两次！）任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:33:28.837

在 iTunesConnect 上创建应用程序之前，您必须在 Provisioning Portal 上创建一个 AppId。请注意，如果您已经使用过 AppId（即使您删除了该应用程序），您将无法再次使用相同的 AppId。

尝试创建另一个 AppId 并使用它在 iTunesConnect 上创建您的应用程序。

# core-data - RestKit & Core Data - 在嵌套在视图容器中的表视图中重新加载数据

> ID：10175864
> 
> 赞同：0
> 
> 时间：2012-04-16T14:17:44.067
> 
> 标签：core-data, notifications, restkit

我正在处理一个同步过程，其中使用时间戳从带有 RestKit 的服务器加载最新更改的对象，并使用基于 MOC 理念的 Core Data 保存所有更改。

**顺序**
1) 启动同步进程并将更改保存到 Core Data [AppDelegate]
2) 进程完成后从 Core Data 重新获取数据并重新加载数据 [ContactTableView]
3) 获取完成时重新加载输入视图 [ContactDetailView]
4) 重新加载表视图放置在 ContactDetailView [ContactDetailTV] 内的 ViewContainer 中

**在视图之间传递数据**

```
ContactTableView (passing object when user selects row)
--» ContactDetailView (passing object to subView in viewContainer)
    --» ContactDetailTV (displaying data of object in a tableView) 
```

**有效的问题**
*当*
我在 ContactTableView 中时，表格视图会重新加载新获取的数据，一切都很好。

*这不起作用*
当我在 ContactDetailTV 中时（因为当我查看它时数据可能会发生变化），即使在调用 [self.tableView reloadData] 之后，视图也会在 ContactDetailTV 中显示旧数据。

**问题**
我做错了什么或缺少什么以使重新加载按预期工作？

* * *

*代码*

**应用委托**

```
- (void)startSyncProcess:(NSInteger)operationCode
{        
// Init helper
syncCount = 0;
syncProcess = 0;

switch (operationCode) 
{
    default:
        // (1) Request deleted companys from server
        [self requestDeletedCompanysFromServer];
        break;

    case 0:
        // (2) Request deleted contacts from server
        [self requestDeletedContactsFromServer];
        break;

    case 1:
        // (2) Request edited companys from server
        [self requestEditedCompanysFromServer];
        break;

    case 2:
        // (2) Request edited contacts from server
        [self requestEditedContactsFromServer];
        break;

    case 3:
        // Reload data views
        [self saveCurrentSyncTime];            

        [[NSNotificationCenter defaultCenter] postNotificationName:@"updateTableViewAfterSave" object:self];
        break;
}
} 
```

**联系人表视图**

```
- (void)syncContextDidSave:(NSNotification*)saveNotification 
{   
   // Handling the "updateTableViewAfterSave"-notification by refetching the data with Core Data
    NSError *error;
    if (![[self fetchedResultsController] performFetch:&error]) 
         NSLog(@"[ERROR] Saving failed with error: %@", [error userInfo]);

    [[NSNotificationCenter defaultCenter] postNotificationName:@"updateSubViewAfterSave" object:nil];
} 
```

**联系DetailTV**

```
- (void)updateSubViewAfterSave:(NSNotification *)saveNotification
{
    // Handling the "updateSubViewAfterSave"-notification by updating the table view that displays the data without using a fetchedResultsController
    [self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:48:03.577

为了使用来自 Core Data 的最新数据更新对象（因为即使在重新获取数据时，fetchedController 的上下文也会保留对象的“快照”），我必须更新方法。

```
- (void)updateSubViewAfterSave:(NSNotification *)saveNotification
{
    // Handling the "updateSubViewAfterSave"-notification by updating the table view that displays the data without using a fetchedResultsController

    id appDelegate = (id)[[UIApplication sharedApplication] delegate]; 
    NSManagedObjectContext *tempContext = [appDelegate managedObjectContext];

    [tempContext refreshObject:contact mergeChanges:YES];
    [self.tableView reloadData];
} 
```

# .net - 如何在另一个项目中托管一个项目的 WCF 服务？

> ID：10175866
> 
> 赞同：2
> 
> 时间：2012-04-16T14:17:59.407
> 
> 标签：.net, wcf

我创建了一个 WCF 服务，现在需要将其集成到另一个项目中。我不想让服务独立运行，而是希望第二个项目来托管服务（这是一个 Sitecore 实现，从维护的角度来看，这会使事情变得更容易）。这些项目有不同的解决方案。即使代码在另一个项目中，第二个项目是否有可能提供服务？我知道我需要引用 DLL，但除此之外我不确定如何设置服务。我认为我需要某种服务的部分实现，但这是我的知识范围。

另一个问题 - 该服务是用 VB 编写的，而第二个项目是 C#。没关系，因为我通过 DLL 引用了所有服务代码，但我想我会提到它。

**更新** 我忘记提到的一件事是，我希望该服务也可以作为 Web 服务提供给其他应用程序。因此该服务将在第二个应用程序中建立起来，以便第三个应用程序可以调用该服务。我不知道这是否会影响迄今为止的任何回应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:25:34.577

如果您的 WCF 服务被编译为 DLL，它应该像添加引用一样简单，并且：

```
 static void Main(string[] args)
 {
     ServiceHost host = new ServiceHost(typeof(MyService));
     host.Open();

     Console.ReadLine();
     host.Close();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:58:59.533

该服务由运行 ServiceHost 的托管进程公开。

这可以是 Windows 服务、控制台应用程序或 IIS。

如果您在 IIS 中托管服务，则需要 .SVC 文件。

如果您不在 WCF 中托管，则应创建一个 app.config 文件，该文件将告诉 WCF 运行时您希望如何公开您的服务。为此，请使用`<System.ServiceModel/>`配置部分。

一旦托管服务，它就可以被任意数量的客户端应用程序使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:24:22.350

您不需要在宿主项目中部分实现该服务。请记住，从技术上讲，WCF 服务只是另一个 .NET 类。它的暴露只是引用类的类型或 .svc 文件的 ServiceHost 代码（如果通过 IIS 暴露）。并且 VB/C# 不会有任何区别。

# ruby-on-rails - rb_gc() 上的跨线程冲突

> ID：10175872
> 
> 赞同：6
> 
> 时间：2012-04-16T14:18:29.310
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, installation, ruby-1.9.3

我正在处理的代码库最近从 Ruby 1.9.2 升级到 Ruby 1.9.3，从 Rails 3.1 升级到 Rails 3.2.2。因为我使用的是 RVM，所以我只是做`rvm install 1.9.3`了我所期望的所有必要的事情。

当我跑

```
rails s 
```

我得到错误

> [BUG] 开启跨线程冲突`rb_gc()`

我找到了许多与此问题相关的链接。[StackOverflow 上](https://stackoverflow.com/questions/3413209/error-cross-thread-violation-on-rb-gc)有一个，但它并没有真正给出答案。最有希望的答案是[在 RVM 网站上](http://beginrescueend.com/support/troubleshooting/)：

> 到目前为止，在我所看到的每一种情况下，它总是最终是一个带有 C 扩展的 ruby​​ gem/库是针对不同的 ruby​​ 和/或架构编译的，而不是尝试加载它的那个。尝试卸载并重新安装带有 C 扩展的 gem，您的应用程序使用这些 gem 来寻找这个 buggar。

这很有帮助，但是我的 Ruby-fu 不够强大，无法知道哪些 gem 有 C 扩展，哪些我应该尝试重新安装。关于该主题的相当多的其他链接似乎表明 json gem 有问题，所以我尝试遵循建议的解决方案。

```
gem uninstall json 
gem install --platform=ruby 
```

这对我来说并没有真正改变任何事情——我在尝试启动 Rails 环境时仍然遇到完全相同的错误。

我如何追踪这个问题？

如果有帮助，这里是 gem 列表的输出：

```
actionmailer (3.2.2)
actionpack (3.2.2)
activemodel (3.2.2)
activerecord (3.2.2)
activeresource (3.2.2)
activesupport (3.2.2)
addressable (2.2.7)
akami (1.0.0)
arel (3.0.2)
bcrypt-ruby (3.0.1)
bson (1.6.1)
bson_ext (1.6.1)
builder (3.0.0)
bundler (1.1.3, 1.0.21)
capybara (1.1.2)
carmen (0.2.13)
childprocess (0.3.1)
ci_reporter (1.7.0)
coderay (1.0.5)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.2.0)
commonjs (0.2.5)
cucumber (1.1.9)
cucumber-rails (1.3.0)
database_cleaner (0.7.2)
devise (2.0.4)
diff-lcs (1.1.3)
ejs (1.0.0)
email_spec (1.2.1)
engineyard (1.4.28)
engineyard-serverside-adapter (1.6.3)
erubis (2.7.0)
escape (0.0.4)
execjs (1.3.0)
factory_girl (3.0.0)
factory_girl_rails (3.0.0)
faker (1.0.1)
fakeweb (1.3.0)
ffi (1.0.11)
gherkin (2.9.3)
gyoku (0.4.4)
haml (3.1.4)
haml-rails (0.3.4)
hash-deep-merge (0.1.1)
highline (1.6.11)
hike (1.2.1)
httpi (0.9.6)
i18n (0.6.0)
jasmine (1.1.2)
jasmine-core (1.1.0)
jasminerice (0.0.8)
journey (1.0.3)
jquery-rails (2.0.1)
json (1.6.6)
json_pure (1.6.6)
kaminari (0.13.0)
kgio (2.7.4)
launchy (2.0.5)
less (2.1.0)
less-rails (2.2.0)
libv8 (3.3.10.4 x86_64-darwin-11)
log4r (1.1.10)
mail (2.4.4)
metaclass (0.0.1)
method_source (0.7.1)
mime-types (1.18)
mocha (0.10.5)
mongo (1.6.1)
mongoid (2.4.7)
mongoid-rspec (1.4.4)
multi_json (1.2.0)
net-ssh (2.2.2)
newrelic_rpm (3.3.3)
nokogiri (1.5.2)
nori (1.1.0)
open4 (1.3.0)
orm_adapter (0.0.7)
polyglot (0.3.3)
pr_geohash (1.0.0)
pry (0.9.8.4)
pry-highlight (0.0.1)
pry_debug (0.0.1)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.2)
rails-footnotes (3.7.6)
railties (3.2.2)
raindrops (0.8.0)
rake (0.9.2.2)
rdoc (3.12)
recursive-open-struct (0.2.1)
rest-client (1.6.7)
rpm_contrib (2.1.8)
rsolr (1.0.7)
rspec (2.9.0)
rspec-core (2.9.0)
rspec-expectations (2.9.0)
rspec-mocks (2.9.0)
rspec-rails (2.9.0)
rubyzip (0.9.6.1)
sass (3.1.15)
sass-rails (3.2.5)
savon (0.9.9)
selenium-webdriver (2.20.0)
settings-tree (0.2.1)
simplecov (0.6.1)
simplecov-html (0.5.3)
simplecov-rcov (0.2.3)
slop (2.4.4)
spine-rails (0.1.0)
spork (1.0.0rc2)
sprockets (2.1.2)
sunspot (1.3.1)
sunspot_mongoid (0.4.1)
sunspot_rails (1.3.1)
sunspot_solr (1.3.1)
term-ansicolor (1.0.7)
therubyracer (0.10.1)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
twitter-bootstrap-rails (2.0.6)
tzinfo (0.3.32)
uglifier (1.2.4)
unicorn (4.2.1)
warden (1.1.1)
wasabi (2.1.0)
xpath (0.1.4) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T04:09:32.277

您可以尝试以下各种方法。

## 清理

要清理旧版本的 gem：

```
gem cleanup --dryrun 
```

## json

要暂时查看 json gem 是否存在问题，请从 json（本机）切换到 json（纯 ruby​​）并更改您的 Gemfile：

```
gem install json_pure 
```

## 本土宝石

您的宝石列表中有一些对我来说是原生的：

*   bcrypt
*   布森
*   厄鲁比斯
*   ffi（启用大量本机连接）
*   小黄瓜
*   公斤
*   较少的
*   小切
*   雨滴
*   therubyracer（许多不可预知的问题恕我直言）
*   独角兽

## 菲

你的宝石`ffi`特别有趣——你碰巧知道你在用它做什么吗？

这`ffi`使 Ruby 代码能够调用本机代码，例如，如果您的 Ruby 应用程序的某些部分需要连接到本机库。

当你诊断你的问题时，我会先看看这个宝石。

## 生成文件

要查找任何具有 Makefile 文件的 gem，这很好地表明它们具有本机代码：

```
find / | grep "/ruby/gems/" | grep Makefile 
```

要查找所有宝石以便删除它们：

```
find / | grep "/ruby/gems/" 
```

## 核动力车

要对 RVM 或其碎片进行核攻击，您可以使用`rvm uninstall`、`rvm implode`或此脚本对 RVM 进行核攻击并找到任何挥之不去的碎片：

```
https://raw.github.com/SixArm/sixarm_unix_shell_scripts/master/rvm-uninstall-danger 
```

## 尝试 rbenv + 捆绑器

我从使用 rvm 更改为使用 rbenv + bundler，它对我来说非常有用。

rbenv 工具是 rvm 管理 Ruby 版本的直接竞争对手： [https ://github.com/sstephenson/rbenv](https://github.com/sstephenson/rbenv)

Bundler 是管理 gemset 和 gem 依赖项的好方法：http: [//gembundler.com/](http://gembundler.com/)

## 酿造

如果您在 Mac 上并使用 MacPorts，要更改为 Homebrew：

[关联](https://brew.sh/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T14:40:12.893

1.  通过运行卸载所有版本的 json gem： `gem uninstall json`

2.  然后运行： `gem install json --platform=ruby`

3.  再次运行捆绑：`bundle install`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T00:49:11.750

您应该尝试使用该命令对*所有*gem 进行 nuking 并为您的应用程序重新安装它们。`bundle`

引用[此错误的 RVM 文档](http://beginrescueend.com/support/troubleshooting/)：

> 尝试卸载并重新安装带有 C 扩展的 gem，您的应用程序使用这些 gem 来寻找这个 buggar。

[使用 RVM 删除 gem](http://beginrescueend.com/rubies/removing/)的命令很简单：

```
rvm uninstall 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T13:39:22.930

在走干净的 ruby​​/rvm 安装路线之前，您应该检查是否删除了 ruby​​ 1.8.7（在大多数发行版上默认安装）。我相信这会干扰我用 1.9.2 编译的一些 gem（我认为它是原生的之一）。我使用 apt-get 完全删除了 1.8.7，然后创建了一个新的 rvm 配置文件（通过更改 .rvmrc 中的配置文件名称），然后运行 ​​bundle install 以完全刷新所有 gem。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T03:09:48.287

全新重新安装 RVM 最新版本是最佳选择。

`rvm implode`

`rm -rf ~/.rvm`

`curl -L get.rvm.io | bash -s stable`

# gwt - 将 GWT 布局堆叠在一起

> ID：10175874
> 
> 赞同：1
> 
> 时间：2012-04-16T14:18:30.853
> 
> 标签：gwt, layout, web, toolkit

我正在尝试构建一个 GWT GUI，但我不确定它是否可能。基本上，我需要能够堆叠三个布局/面板，一个在另一个之上，如下所示：

```
Bottom Layout: Panel that fills the whole screen (will actually contain SVG stuff).
Middle Layout: DockLayoutPanel with tools docked around the edges, also full screen.
Top Layout: Transparent panel, again filling the whole screen. 
```

可以这样堆叠面板吗？我想我可以使用 AbsolutePanel 以某种方式做到这一点，但我希望有一个更好的解决方案。谢谢，乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:46:24.830

因为你想要一个`DockLayoutPanel`内部，所以尝试使用 a `LayoutPanel`（或 the `RootLayoutPanel`）并简单地添加你的小部件，因为默认情况下，a 的子级`LayoutPanel` [填充其父](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/LayoutPanel.html#add%28com.google.gwt.user.client.ui.Widget%29)级。

# ios - Phonegap 哔声/声音 iOS 错误

> ID：10175875
> 
> 赞同：5
> 
> 时间：2012-04-16T14:18:31.140
> 
> 标签：ios, cordova

我正在尝试使用 PhoneGap/Cordova 1.6.0 播放声音文件。当我播放声音时，出现以下错误：

```
ERROR: Method 'create:withDict:' not defined in Plugin 'Media'
FAILED pluginJSON = {"className":"Media","methodName":"create","arguments":["INVALID","94671882-85c3-9173-17a2-ed166310d77d","beep.wav"]} 
```

即使我收到这些错误消息，声音也会在模拟器中播放，但不会在我的设备上播放（iPad 2 5.1）。我已经尝试过 navigator.notification.beep 和 new Media() 但它们都抛出了相同的错误。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:27:11.083

当我的 PhoneGap.exec() 的第四个参数与我的 Objective-C 方法名称不匹配时，我遇到了这个错误。

验证错误消息中描述的“methodName”实际上是否存在于您的 Objective-C 实现中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:38:20.000

我很确定这是科尔多瓦的一个错误......

事情是这样的，我们从以下开始：

```
navigator.notification.beep 
```

这将触发（cordova-1.6.1.js）：

```
beep:function(count) {
        (new Media('beep.wav')).play();
    } 
```

创建 Media 对象将导致：

```
var Media = function(src, successCallback, errorCallback, statusCallback) {

// successCallback optional
if (successCallback && (typeof successCallback !== "function")) {
    console.log("Media Error: successCallback is not a function");
    return;
}

// errorCallback optional
if (errorCallback && (typeof errorCallback !== "function")) {
    console.log("Media Error: errorCallback is not a function");
    return;
}

// statusCallback optional
if (statusCallback && (typeof statusCallback !== "function")) {
    console.log("Media Error: statusCallback is not a function");
    return;
}

this.id = utils.createUUID();
mediaObjects[this.id] = this;
this.src = src;
this.successCallback = successCallback;
this.errorCallback = errorCallback;
this.statusCallback = statusCallback;
this._duration = -1;
this._position = -1;
exec(null, this.errorCallback, "Media", "create", [this.id, this.src]);
}; 
```

如果您查看 Cordova.plist，您会看到插件名称“Media”被映射到“CDVSound”，并且在 CDVSound 中没有方法 create...

而且因为没有“媒体”的“创建”方法，我们得到：

```
cleanApp[24713:707] ERROR: Method 'create:withDict:' not defined in Plugin 'Media'
cleanApp[24713:707] FAILED pluginJSON = {"className":"Media","methodName":"create","arguments":["INVALID","b6acfbad-1e26-de77-1557-0d7c2f87a00a","beep.wav"]} 
```

那么我们怎么能听到声音呢？

好问题..如果你看：

```
new Media('beep.wav')).play(); 
```

你注意到我们调用了 play()，让我们看看它做了什么：

```
Media.prototype.play = function(options) {
    exec(null, null, "Media", "startPlayingAudio", [this.id, this.src, options]);
}; 
```

在 CDVSound.h 中：

```
- (void) startPlayingAudio:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options; 
```

# javascript - ASP.NET / VS2010 在项目中查找未使用的文件

> ID：10175877
> 
> 赞同：8
> 
> 时间：2012-04-16T14:18:36.283
> 
> 标签：javascript, asp.net, visual-studio-2010, image, solution

伙计们，有没有什么聪明的方法可以在整个解决方案中轻松找到未使用的文件？我的项目由以前的开发人员合并，它的大小至少增加了 3 倍。我想缩小项目的规模，但找不到快速简便的方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:28:58.587

这个开源项目可能是一个很好的起点。它旨在过滤掉未使用的图像，但它应该很容易更改，因此它会查找未使用的文件。

[在 VS Web 项目中查找未使用的图像](https://github.com/jitbit/vs-unused-image-finder)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:48:12.270

写一个程序来做这件事怎么样？对于初级开发人员来说，这可能是一个简洁的小项目，可以为您编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T08:58:56.630

上面所选答案中的扩展仅适用于 vs2012，而 Code Maid 适用于 vs2010 - vs2014：

有一个名为[**Code Maid**](https://visualstudiogallery.msdn.microsoft.com/76293c4d-8c16-4f4a-aee6-21f83a571496)的免费扩展，它“是一个开源 Visual Studio 扩展，用于清理、挖掘和简化我们的 C#、C++、F#、VB、XAML、XML、ASP、HTML、CSS、LESS、SCSS、JavaScript 和 TypeScript编码。” 图像也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T14:38:05.543

我认为查找未使用的代码是静态分析工具的工作。正如@kiru 提到的，[Reshareper](http://www.jetbrains.com/resharper/)具有此功能并且易于使用。他们还提供 1 个月的试用版。

# php - PHP函数错误

> ID：10175878
> 
> 赞同：-1
> 
> 时间：2012-04-16T14:18:39.727
> 
> 标签：php

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我希望有人可以帮助我，我有一个错误

> **警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 17 行的 C:\xampp\htdocs\phpacd\func\user.func.php 中给出**

它所指的线是**`$query_reult = mysql_fetch_assoc($query)`**。代码来自教程，我一遍又一遍地阅读教程，我无法发现问题！如果有人能指出我正确的方向，我会喜欢吗？

```
function login_check($email, $password) {
  $email = mysql_real_escape_string($email);
  $login_query = mysql_query("SELECT COUNT(`user_id`) as `count`, `user_id` FROM `users` WHERE `email`='$email' AND `password`='".md5($password)." '");
  return (mysql_result($login_query, 0) == 1) ? mysql_result($login_query, 0, 'user_id') : false;
}

function user_data() {
      $args = func_get_args();
      $fields = '`'.implode('`, `' , $args).'`';

  $query = mysql_query("SELECT $fields FROM `users` WHERE `user_id` =".$_SESSION['user_id']);
  $query_result = mysql_fetch_assoc($query);
  foreach ($args as $field){
    $args[$field] = $query_result[$field];
  }
  return $args;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:21:57.820

根据 PHP 手册，如果您遇到 SQL 语法错误，该`mysql_query`函数将返回`FALSE`，因此返回布尔类型。

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

您可以使用此语句提取错误所在：

```
<?php
$query = mysql_query("SELECT $fields FROM `users` WHERE `user_id` =".$_SESSION['user_id']);
 if (!$query ) {
    die('Invalid query: ' . mysql_error());
} 
```

# c# - windows phone 7项目使用痣的方法

> ID：10175883
> 
> 赞同：3
> 
> 时间：2012-04-16T14:18:53.130
> 
> 标签：c#, windows-phone-7, moles

我想使用[Moles](http://research.microsoft.com/en-us/projects/moles/)库为我的单元测试重载一些 Mircosoft.Pnone.Net 调用（`NetworkInterface.GetIsNetworkAvailable()`例如）。

我已经下载了痣安装程序。安装它。然后我单击了一个`Microsoft.Phone`参考并选择了菜单项“Add Moles Assembley”。

现在，当我尝试构建我的解决方案时，我遇到了一堆像这样的错误：

```
 Error    89  Type 'System.Net.WebRequest' exists in 
'c:\Program Files (x86)\Reference` 

    Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.dll', 
    and also in  'c:\Program Files (x86)\Reference 
    Assemblies\Microsoft\Framework\Silverlight\v4.0\Profile\WindowsPhone71\System.Net.dll' 
    [C:\Projects\{projName}.Tests\obj\Debug\Moles\mp\m.g.csproj]    
    C:\Projects\{projName}.Tests\m.g.cs 39886 
```

有没有办法解决这种歧义？

# twitter-bootstrap - Twitter Bootstrap 在线加载器？

> ID：10175892
> 
> 赞同：14
> 
> 时间：2012-04-16T14:19:20.777
> 
> 标签：twitter-bootstrap

> **可能重复：**
> [Twitter Bootstrap 的托管版本（可能是谷歌？）](https://stackoverflow.com/questions/9887867/hosted-version-of-twitter-bootstrap-maybe-google)

我想知道是否存在一些提供 Twiiter Bootstrap 框架用于在线加载而不是在我的网站中使用它的网站，这样可以节省我主机的带宽。

[Google](https://developers.google.com/speed/libraries/devguide)为 Javascript 库提供了类似的东西，但对于 Bootstrap，我什么也没找到。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-16T14:30:49.190

好吧，我想你可以链接到 github，但我怀疑这是一个 CDN。

```
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet"> 
```

此外，它是未压缩的。

**更新：** javascript 部分可在[cdnjs.cloudflare.com](http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js)上找到。

此处相关讨论：[https ://github.com/twitter/bootstrap/issues/1679](https://github.com/twitter/bootstrap/issues/1679)

**更新**：NetDNA 在他们的 CDN 上为 Twitter Bootstrap 建立了一个项目站点。它称为[http://Bootstrapcdn.com](http://Bootstrapcdn.com)。支持 SSL。有 CSS 文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-14T16:44:02.490

[BootstrapCDN.com](http://BootstrapCDN.com) 有 css 文件和 ssl 支持。在一个真正的 CDN 上，节点遍布世界各地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:30:58.830

我相信您正在寻找的术语是 CDN（内容交付网络），我不知道当前托管 twitter 引导 css/jscript 的任何 CDN。另一个建议是使用亚马逊的 AWS 服务，更具体地说是 CloudFront 服务：

[http://aws.amazon.com/cloudfront/](http://aws.amazon.com/cloudfront/)

# windows - 如果通过计划任务调用 BAT 文件，则无法将文件复制到 UNC 目标

> ID：10175893
> 
> 赞同：11
> 
> 时间：2012-04-16T14:19:20.380
> 
> 标签：windows, networking, copy, windows-server-2008

我有一个 bat 文件，将文件从当前机器复制到映射的网络驱动器（一行，xcopy 命令）。

当我 RDP 到服务器时它可以工作。但是，当我作为计划任务运行并将其配置为在我登录的同一用户下运行时，它不起作用并给出错误 0x4。

有没有办法可以做到这一点？

我也尝试了 dsynchronize ，当我单击同步时它可以工作。当我将它作为服务运行时，同样的问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-17T13:26:44.453

我能够弄清楚。以下批处理文件在调度程序下工作，即使作为本地系统帐户：

```
net use m: \\server\share /U:server\user password
xcopy C:\source m: /E /Y 
```

它每次都映射一个网络驱动器，然后复制到该驱动器

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-28T14:17:51.517

可以将文件复制到 UNC 路径而不映射为网络驱动器。只需尝试在引号中设置 UNC 路径。

```
copy * "\\server\share" 
```

没有引号，我在 Windows7 命令行上运行“语法错误”。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-27T01:18:02.833

我有类似的问题，我想将文件从服务器复制到数百个其他服务器，而不将远程驱动器映射到我的本地 PC。我没有足够的驱动器号将数百台远程计算机映射到我的本地 PC！我不能只映射远程驱动器并复制。

我想我可以使用 copy、xcopy 或 robocopy，并将我的凭据指定给 copy 命令。但是没有一个复制命令有任何选项可以向远程系统提供凭据。

多亏了上面的帖子，我能够创建一个小批处理文件，在其中循环浏览我的主机，并继续为我的所有主机重复使用一个驱动器映射。

这是我的批处理文件...

```
echo @off
for /F %%j in (pchostslist1.txt) do (
  net use z:\\%%j\c$ /user:domain\myusername mypassword
  mkdir \\%%j\c$\tmp\mynewdir
  xcopy c:\anyfile.txt \\%%j\c$\tmp\mynewdir
  net use z: /delete
) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-19T03:35:19.303

我有一个类似的问题，我只需要将密码存储为计划任务的一部分，而不是使用 net use。您会注意到它说只有勾选它才能访问本地资源。

![存储密码](../Images/973756cceca097bfad45cfe160b32cb0.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T14:49:11.727

谁映射网络驱动器？您是否使用映射名称，而不是底层的 UNC 本机路径？因为听起来映射驱动器是在您的登录脚本中设置的，如果您未登录，该脚本将不会运行。因此，在计划任务中，您确实拥有 UNC 路径的正确凭据，但没有映射驱动器号.

# salesforce - 无法退出 Salesforce 开发模式

> ID：10175894
> 
> 赞同：0
> 
> 时间：2012-04-16T14:19:21.653
> 
> 标签：salesforce, visualforce

当我为我的个人资料启用开发模式并打开一个自定义 VisualForce 页面时，代码编辑窗口/框架会出现在屏幕底部。

问题：现在 7-8 个月，当我完成自定义 VF 页面并进入标准页面时，此窗口不会消失。它只是坐在那里，并显示原始 VF 页面的代码。除此之外，它将自定义 VF 的 URL 保留在浏览器的地址栏中，这会干扰使用 URL 数据的其他 VF 页面。

我已将此作为问题提交给 SF 支持，他们已经研究了几个月，但没有解决。

你以前有没有遇到过这个问题，或者知道如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:42:24.390

我以前遇到过这个问题，发现页面底部的开发模式工具栏特别烦人。它不适用于我使用的一些 Firefox 插件。所以，我把它关掉了。

要在未打开开发模式的情况下编辑页面，请转到设置 > 开发 > 页面（或控制器的 Apex 类）。

如果您希望保持开发模式开启，您可能需要尝试更新您的浏览器，或尝试使用不同的浏览器（[Internet Explorer](http://windows.microsoft.com/en-US/internet-explorer/downloads/ie)、[Firefox](http://www.mozilla.org/en-US/firefox/new/)、[Chrome](http://www.google.com/chrome)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:37:33.927

也可以使用 url 参数

`core.apexpages.devmode.url=1`

在任何 VF 页面的地址中暂时禁用开发模式工具栏。

# parallel-processing - 使用内核内的推力减少 CUDA

> ID：10175897
> 
> 赞同：0
> 
> 时间：2012-04-16T14:19:31.673
> 
> 标签：parallel-processing, cuda, host, reduction

我想做并行减少，但在我的内核内部，数据在共享内存中。推力库可以做到这一点吗？就像是

```
int sum = thrust::reduce(myIntArray, myIntArray+numberOfItems, (int) 0, thrust::max_element<int>()); 
```

但这在内核中不起作用。可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:10:52.667

不，thrust::reduce() 是一个主机函数，如果数据在 GPU 上，它会导致执行 CUDA 内核。

您必须深入研究推力源并找到`__device__`它用于减少的功能。这些可以从您的内核中调用。如果减少的逻辑包含在其他`__global__`内核中，则必须手动将其拼凑在一起才能使用它。

# windows-phone-7 - 未定义的命名空间 windows phone 7

> ID：10175904
> 
> 赞同：0
> 
> 时间：2012-04-16T14:19:55.013
> 
> 标签：windows-phone-7

我在 WP7 中为聊天应用程序编写了这个，我需要把它放在项目中

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

                xmlns:Controls="clr-namespace:Chat.Controls"> 
```

我得到这个错误

```
Error   7   Undefined CLR namespace. The 'clr-namespace' URI refers to a namespace 'Chat.Controls' that is not included in the assembly.    C:\Users\Amin\Documents\Visual Studio 2010\Projects\Chat\Chat\WP7_Chat\Control.xaml 4   36  Chat 
```

需要我添加一个程序集还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:29:25.927

这样做`xmlns:Controls="clr-namespace:Chat.Controls"`意味着您正在使用当前程序集的本地命名空间（与该 XAML 位于同一项目中），但编译器说它不存在。

所以要么你有错误的命名空间，要么你错过了命名空间之后的程序集（比如`xmlns:Controls="clr-namespace:Chat.Controls;assembly=Chat.Controls"`

# php - 我试图在表单发布时添加 if else 语句以及用户是否包含文件？

> ID：10175908
> 
> 赞同：1
> 
> 时间：2012-04-16T14:19:58.563
> 
> 标签：php, html, if-statement, isset

我将如何为此做一个 if / else 语句？用户可以选择是否添加图像。如果添加图像，我希望 if 运行，如果他们不希望 else 运行，因为取决于是否添加图像，它们将有两个不同的端。

```
if (isset($_POST['formsubmitted'])) { 

if (isset($_POST['name'])){  }else{  }

if (isset($_POST['state'])){  }else{  }

if (isset($_FILES['images']['name'])) { echo 'images'; exit;} else {echo 'no images'; exit;}

} #end main form submitted 
```

if (isset($_FILES['images']['name'])) 不起作用，因为到目前为止，即使没有提交图像，它仍然会说图像已提交。

html文件字段是：

```
<form>
<input type='file' name='images[]' id=''>
<input type='file' name='images[]' id=''>
<input type='file' name='images[]' id=''>
<input type = "submit">    
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:43:34.540

你应该试试这个

> 提交.php

```
<pre>
<?php 
// those index are empty the array filter remove this 

echo "without filter"."<br>";
print_r($_FILES['images']['name']);

echo "filter"."<br>";
$usersFileUpload = array_filter($_FILES['images']['name']);
print_r($usersFileUpload);

$usersFileUploadCount = count($usersFileUpload);

for($i=0;$i<=$usersFileUploadCount;$i++){
    echo $usersFileUpload[$i]."<br>";

    // insert Table     
}
?> 
```

> HtmlForm.php

```
<form action="submit.php" method="post" enctype="multipart/form-data" name="images">
<input type='file' name='images[]' id=''><br />
<input type='file' name='images[]' id=''><br />
<input type='file' name='images[]' id=''>
<input name="" type="submit" />
</form> 
```

查看图片进行验证 1

![在此处输入图像描述](../Images/b489d3c3246fd0f087b3fbc51b71a4ef.png)

查看图片进行验证 2

![在此处输入图像描述](../Images/4ed249f0d54ee2f36dcacde87df7eedf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:27:07.877

我不确定我是否理解，我认为您正在尝试这样做。

```
if (isset($_FILES['name']) && isset($_FILES['images'])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:28:21.200

尝试检查**$_FILES['images']['error'][$x]**是否等于 4。如果我没记错的话，这表明上传有错误。

显然，对图像上传器的每次迭代都执行此操作，因此基本上将 $x 替换为上传器数组的键。

请记住，空数组仍然是集合数组。

见：[http ://uk3.php.net/manual/en/features.file-upload.errors.php](http://uk3.php.net/manual/en/features.file-upload.errors.php)

另外：[http](http://uk3.php.net/manual/en/features.file-upload.php) ://uk3.php.net/manual/en/features.file-upload.php <-- 手册。便利！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-01T15:21:00.260

试试这个

```
if($_FILES['your-name-file']['error'] == 4) {
            //process your error
    } 
```

这对我有用！

# asp.net-mvc-3 - MVC3 - 从 DB 获取信息并在 layout.cshtml 中填充

> ID：10175910
> 
> 赞同：1
> 
> 时间：2012-04-16T14:20:02.630
> 
> 标签：asp.net-mvc-3, razor

我创建了一个所有其他控制器都继承的 ApplicationController.cs。我正在尝试使用此控制器从数据库中捕获用户的全名，设置为 ViewBag 并在 layout.cshtml 中捕获。

我还在 Global.asax 中创建了一个捕获用户登录的会话变量。我的问题是 ApplicationController.cs 中的 Session 变量为空。但是，会话变量在所有子控制器中都正确填充。这是我的 ApplicationController.cs 代码：

```
public abstract class ApplicationController : Controller
{
    private SkadPROEntities db = new SkadPROEntities();

    public SkadPROEntities SkadProDB
    {
        get { return db; }                
    }

    public ApplicationController()
    {
        //string[] currentUserString = User.Identity.Name.Split('\\');
        //string myCurrentUser = currentUserString[1];
        //string myCurrentUser = Session["currentUser"].ToString();
        var empQuery = from employee in db.PRO_LSN_EMPLOYEE_OBJ
                       //where employee.LSN_Security_Nbr == Session["currentUser"].ToString()
                       where employee.LSN_Security_Nbr == "bhopkins"
                       select employee;
        string firstName = "";
        foreach (var myEmployee in empQuery)
        {
            firstName = myEmployee.LSN_cf_First_Name;
        }
        ViewBag.FirstName = firstName;
        ViewBag.EmpName = "Bill Test";
    } 
} 
```

为什么 ApplicationController.cs 中的会话变量为空，但在所有子控制器中填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:33:11.753

您不能在构造函数中访问会话变量。大概您正试图在您的子构造函数的操作中访问会话变量，而不是他们的构造函数。

请参阅[ASP.Net MVC 控制器构造函数中的 Session null](https://stackoverflow.com/questions/889516/session-null-in-asp-net-mvc-controller-constructors)

# java-me - J2ME 中的链表等价

> ID：10175912
> 
> 赞同：2
> 
> 时间：2012-04-16T14:20:10.197
> 
> 标签：java-me, trie

我找到了一个 trie 的 java 实现，并希望在 J2ME 中有一个类似的实现。这是代码。

节点类

```
import java.util.Collections;
import java.util.LinkedList;
import java.util.List;

class Node {

private final char ch;

/**
 * Flag indicates that this node is the end of the string.
 */
private boolean end;

private LinkedList<Node> children;

public Node(char ch) {
    this.ch = ch;
}

public void addChild(Node node) {
    if (children == null) {
        children = new LinkedList<Node>();
    }
    children.add(node);
}

public Node getNode(char ch) {
    if (children == null) {
        return null;
    }
    for (Node child : children) {
        if (child.getChar() == ch) {
            return child;
        }
    }
    return null;
}

public char getChar() {
    return ch;
}

public List<Node> getChildren() {
    if (this.children == null) {
        return Collections.emptyList();
    }
    return children;
}

public boolean isEnd() {
    return end;
}

public void setEnd(boolean end) {
    this.end = end;
} 
```

}

TrieNode 类

```
import java.io.File;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.LinkedList;
import java.util.List;

public class WordTree {
Node root = new Node(' ');

public WordTree() {
}

/**
* Searches for a strings that match the prefix.
*
* @param prefix - prefix
* @return - list of strings that match the prefix, or empty list of no matches are        found.
*/
public List<String> getWordsForPrefix(String prefix) {
if (prefix.length() == 0) {
    return Collections.emptyList();
}
Node node = getNodeForPrefix(root, prefix);
if (node == null) {
    return Collections.emptyList();
}
List<LinkedList<Character>> chars = collectChars(node);
List<String> words = new ArrayList<String>(chars.size());
for (LinkedList<Character> charList : chars) {
    words.add(combine(prefix.substring(0, prefix.length() - 1), charList));
}
return words;
}

private String combine(String prefix, List<Character> charList) {
StringBuilder sb = new StringBuilder(prefix);
for (Character character : charList) {
    sb.append(character);
}
return sb.toString();
}

private Node getNodeForPrefix(Node node, String prefix) {
if (prefix.length() == 0) {
    return node;
}
Node next = node.getNode(prefix.charAt(0));
if (next == null) {
    return null;
}
return getNodeForPrefix(next, prefix.substring(1, prefix.length()));
}

private List<LinkedList<Character>> collectChars(Node node) {
List<LinkedList<Character>> chars = new ArrayList<LinkedList<Character>>();

if (node.getChildren().size() == 0) {
    chars.add(new LinkedList<Character>(Collections.singletonList(node.getChar())));
} else {
    if (node.isEnd()) {
        chars.add(new LinkedList<Character>    (Collections.singletonList(node.getChar())));
    }
    List<Node> children = node.getChildren();
    for (Node child : children) {
        List<LinkedList<Character>> childList = collectChars(child);

        for (LinkedList<Character> characters : childList) {
            characters.push(node.getChar());
            chars.add(characters);
        }
     }
    }
   return chars;
}

public void addWord(String word) {
addWord(root, word);
}

private void addWord(Node parent, String word) {
if (word.trim().length() == 0) {
    return;
}
Node child = parent.getNode(word.charAt(0));
if (child == null) {
    child = new Node(word.charAt(0));
    parent.addChild(child);
}
if (word.length() == 1) {
    child.setEnd(true);
} else {
    addWord(child, word.substring(1, word.length()));
}
}

public void load() {
    WordTree tree = new WordTree();
    BufferedReader br = null;
    try {
        br = new BufferedReader(new FileReader(new    File("C:/Users/Sironka/Documents/NetBeansProjects/Final Maa Adaptive System/dictionary/Maa    Corpus.txt-02-ngrams-Freq.txt")));
        String eachLine = null;
        while ((eachLine = br.readLine()) != null) {
            tree.addWord(eachLine);
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (br != null) {
            try {
                br.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    System.out.println(tree.getWordsForPrefix("ore"));
  }

public static void main(String[] args) {

WordTree trieloader = new WordTree();
trieloader.load();
System.out.println("");
}
} 
```

以下是挑战：

```
 1\. Changing the for loop format
    2\. Classes like linkedList, Collections are not available in j2me 
```

要求： 1\. 将上述内容转换为 j2me。（类似的 j2me 实现会有所帮助）。

请协助我，因为我完全陷入了我的项目中。trie 将帮助我进行文本预测 (t9)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:31:05.567

J2ME 中似乎没有内置实现，但此代码可能是一个选项：

试试[这篇文章](http://www.expertcore.org/viewtopic.php?style=4&f=11&t=1870)中提到的实现。[你可以在这里](http://www.expertcore.org/download/file.php?style=4&id=1873&sid=743db55fba517b8b3089aa01a13924b2)下载代码。

# javascript - HTML 语法未知，无法显示包含 jpeg 图像的 javascript 二进制字符串

> ID：10175925
> 
> 赞同：0
> 
> 时间：2012-04-16T14:21:05.000
> 
> 标签：javascript, image, binary

我无法解决这个问题，尽管它一定只是一个非常小的语法问题，正如您将看到的那样：事实上，我正在寻找的只是一小段语法，除非我打算做的事情是不可能的（但是我看不出它为什么不可能......）。

我已经编写了一个函数来在服务器端将图像编码为 Base64，因为我想将大量图像存储到一个数组中：

因此，使用 Base64，我可以将图像下载为可以组织成数组的普通字符串，然后在我选择了正确的图像和正确的时刻时将它们放入对象中，而无需再次引用服务器，这样用户无需等待。

然后我做这样的事情：

*   第一阶段：

    function download64(imageUrl) //->string { // 请求服务器将 'imageUrl' 作为 base64 字符串发送 var tx = DoTheJob(); // ...通过ajax连接并将base64转换的图像作为字符串下载到var 'tx' return tx }

在这个阶段，我将图像保存在客户端的“tx”Base64 字符串中。稍后我想在名为“cadre”的 div 中显示我的图像，所以我执行以下操作：

*   第二阶段：我只需调用“display64”函数将我的图像设置为屏幕上的“干部”div-object：

    display64("干部",tx);

使用此功能：

```
function display64(destinationDiv,imgText64)    //->void
{  // display 'imgText64'   into destinationDiv
  var oImg = "<img alt='' src='data:image/jpg;base64," + imgText64 + "'>";
  var x = document.getElementById(destinationDiv);
  x.innerHTML = oImg;       
} 
```

现在显示图像。不幸的是，这只适用于 Firefox，因为 Internet Explorer 8 无法读取 32Kb 以上的 Base64 图像！在我的企业中，我们只使用 IE 8！

然后我放弃了我的 base64 编码器并决定将图像作为二进制字符串获取，尽管我最初遇到了 nul 字符的问题，但我可以管理它。

现在，我的二进制字符串包含源 JPG 文件的精确副本（包括我在服务器端编码然后在客户端恢复的零）。所以，我现在需要的是简单的函数'displayBin'，但我在网上找不到语法：

```
function displayBin(destinationDiv,imgTextBin) //->void
{  // display 'imgTextBin' into destinationDiv  
   var oImg = "<img alt='' src='??????? + imgTextBin + "'>"; // What's the syntax here, please? 
   var x = document.getElementById(destinationDiv);
   x.innerHTML = oImg;  
} 
```

任何人都可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:35:04.670

如果我理解您的问题，您想要存储图像，这样您就不必重新连接服务器。这样做的一种方法是预加载图像，例如`var img=new Image; img.src='path';`您可以将所有图像加载到一个数组中，然后您可以根据需要将它们添加到页面中。图像预加载有很多内容，因为这似乎是您想要完成的。

# drupal-7 - 在 Drupal 7 中调整客户端的图像大小？

> ID：10175926
> 
> 赞同：0
> 
> 时间：2012-04-16T14:21:07.090
> 
> 标签：drupal-7, drupal-modules, image-resizing

是否有任何与图像/文件字段模块集成的模块允许我在 Drupal 7 中调整客户端图像的大小？我的客户有非常大的图像，我更喜欢他在客户端调整它们的大小......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-24T16:40:12.470

为 Drupal安装[Plupload 模块](http://drupal.org/project/plupload)

编辑文件 plupload.module

添加`'resize' => array('width' => '320', 'height' => '240', 'quality' => '90'),`到#plupload_settings。

例子：

```
$element['filefield_plupload']['pud'] = array(
      '#type' => 'plupload',
      '#title' => t('Select one or more files to upload'),
      // Even though filefield does validation on submit, this is required for
      // client side validation as well as proper file munging during upload.
      '#upload_validators' => $element['#upload_validators'],
      '#plupload_settings' => array(
          'cardinality' => $field['cardinality'],
          'resize' => array('width' => '320', 'height' => '240', 'quality' => '90'), 
```

参考：Drupal 问题：[plupload 客户端调整大小选项](https://www.drupal.org/node/2080945)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:56:14.703

[Plupload](http://www.plupload.com/)具有该功能：

> 允许您使用 HTML5 Gears、Silverlight、Flash、BrowserPlus 或普通表单上传文件，提供一些独特的功能，例如上传进度、图像大小调整和分块上传。

Drupal的[Plupload 模块](http://drupal.org/project/plupload)已经很方便地存在了。

# delphi - 来自通知区域的卡通气泡叫什么，我如何创建一个？

> ID：10175930
> 
> 赞同：2
> 
> 时间：2012-04-16T14:21:14.660
> 
> 标签：delphi, notifications, terminology

有人可以告诉我以下弹出窗口的名称是什么：

![来自 Windows Messenger shell 通知图标的语音气泡](../Images/0607a71e4331969ed38e3dc442e6691f.png)

如何为我的应用程序创建这样的弹出窗口？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T14:42:20.137

更具体地说，这确实称为**[Notification](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511497.aspx)**（一种特定类型的气球），^([另见此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511451.aspx)) ，它来自的图标称为**Notification area Icon**。

该图标所在的屏幕区域称为**[通知区域](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511448.aspx)**。这不是特定于 Windows - 其他操作系统有自己的通知区域形式。

从 Windows 管理通知图标（或更多，如果需要）的正确方法是使用**[Shell_NotifyIcon](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762159%28v=vs.85%29.aspx)** API。

您还可以使用在线提供的众多组件来包装此功能（CoolTrayIcon 是一个很好的例子，虽然它有点臃肿）。你也可以自己做，很简单。

请记住遵循 MSDN 指南以正确使用此图标和良好做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:35:07.570

我似乎找到了答案，它被称为气球通知。创建一个的相关代码位于： [http ://swissdelphicenter.ch/torry/showcode.php?id=1164](http://swissdelphicenter.ch/torry/showcode.php?id=1164)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T03:56:46.617

TMS 组件套件有更好的通知工具。你可以看看这些

# java - 从列表构造链接链

> ID：10175933
> 
> 赞同：1
> 
> 时间：2012-04-16T14:21:25.437
> 
> 标签：java, list, hashmap

我有一个键/值对列表，我需要检测列表中值与键匹配的链。

例如，从下面可能有 12、23、34 或 62、23、34

```
Key  Value
1    2
3    4
2    3
6    2 
```

多个值可以指向同一个键，但我需要为每个唯一的起点和终点存储不同的“链”。该列表可以按任何顺序排列。

我正在使用Java，但我有点坚持如何解决这个问题。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:28:07.360

创建一个`Map<Integer, List<Integer>>`，将所有对存储在该映射中，然后迭代映射。

伪代码：

```
// 1st step
foreach(key, value){
    if(!map.containsKey(key)){
        map.put(key, new ArrayList());
    }
    map.get(key).add(value);
}
// 2nd step
foreach(entry /* of map */){
    if(map.containsKey(entry.value)){
       // print pairs
    }
} 
```

显然这是不会编译的伪代码，但它应该让你开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:29:50.530

由于这看起来像家庭作业，我会给你一些提示来帮助你自己解决问题，而不是给你一个完整的解决方案。

1.  对于map中的任意key，可以通过调用来获取对应的值`Map.get(key)`。
2.  您可以使用任何值作为键来获取其对应的值（如果有的话）。
3.  您可以使用 遍历地图中的所有键`Map.getKeys()`。

如果您只想打印出链条，这就足够了。如果您想将链存储在一些不同的数据结构中，请提供更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:41:23.510

递归！

```
import java.util.HashMap;
import java.util.Map;

public class Chain
{
    private static Map< String , String > map;

    public static void main( String args[] )
    {
        map = new HashMap< String , String >();

        map.put( "1" , "2" );
        map.put( "3" , "4" );
        map.put( "2" , "3" );
        map.put( "6" , "2" );

        for ( String key : map.keySet() )
        {
            System.out.print( "(" + key + "," + map.get( key ) + ")" );
            recurse( map.get( key ) );
            System.out.println();
        }
    }

    private static void recurse( String value )
    {
        if ( map.containsKey( value ) )
        {
            System.out.print( " (" + value + "," + map.get( value ) + ")" );
            recurse( map.get( value ) );
        }
    }
} 
```

为您提供以下输出：

```
(3,4)
(2,3) (3,4)
(1,2) (2,3) (3,4)
(6,2) (2,3) (3,4) 
```

# jquery - 在服务器上渲染 jQuery 模板

> ID：10175935
> 
> 赞同：0
> 
> 时间：2012-04-16T14:21:29.997
> 
> 标签：jquery, ajax, grails, jquery-templates

是否可以在服务器上呈现 jQuery 模板？我想定义 jQuery 模板，使用它渲染 GSP，而不是在客户端发出 AJAX 请求和更新视图。

我可以渲染简单的 GSP 模板并将其作为 AJAX 解析器返回，但它有局限性——我不仅需要返回 HTML 内容，还需要返回 JS vars

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:24:56.050

如果你把 js 放在

```
<script type="text/javascript"></script> 
```

模板中的标记以执行一些 js 调用，但请注意相同的来源策略。您可能无法进行跨域 ajax 调用。

# php - 仅使用 PHP 提交表单？没有 JavaScript？

> ID：10175945
> 
> 赞同：2
> 
> 时间：2012-04-16T14:21:59.587
> 
> 标签：php, javascript, forms, post, submit

我有一个表格

```
<form method='post' action='action.php' name='myForm'>
  <input type='' name='id' value='id'>
  <script>document.myForm.submit();</script>
</form> 
```

我可以在不使用 JavaScript 的情况下提交此表单吗？只使用 PHP 而不点击提交按钮，自动吗？

此表单必须在页面加载时自动提交，但不能使用 JavaScript（不带`onload`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:29:09.377

表单必须由客户端提交。在客户端，只有两种方式：通过 Javascript 或人工（单击提交按钮）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T14:25:43.337

表单提交的行为是在客户端（浏览器）完成的，与 PHP（服务器端）几乎没有关系。

您可以添加一个提交按钮，例如`<input type='submit' value='click here to complete step' />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:23:39.540

为什么不只使用`<input type="submit" />`以下内容：

```
<form method='post' action='action.php' name='myForm'>
  <input type='text' name='id' value='id' />
  <input type='submit' name='submission' value='Submit id'>
</form> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T14:23:53.383

添加提交按钮。

```
<input type="submit" value="Submit" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-14T17:14:39.873

不幸的是，您尝试做的事情是不可能的。你能做的最好的可能是这样的：

```
<form method='post' action='action.php' name='myForm'>
    <input type='' name='id' value='id'>
    <input type='submit' id='submit-button' />
    <script>domument.getElementByID('submit-button').style.display="none";document.myForm.submit();</script>
</form> 
```

禁用客户端脚本时会显示提交按钮。启用后，提交按钮会立即隐藏并自动提交表单。

**编辑**

或者您可以简单地包含 PHP 文件。`<?php include action.php; ?>`. 您将无权访问该`_POST`数组，但考虑到客户端没有机会输入任何数据，这并不重要。

# xpages - 具有多个 xpage 的多个托管 bean

> ID：10175949
> 
> 赞同：2
> 
> 时间：2012-04-16T14:22:09.307
> 
> 标签：xpages

我在这里可能是个白痴，但我有一个关于 xpages 和托管 bean 的问题。我试图通过将逻辑移动到对应于实体（或多或少的文档）的 bean 来分离逻辑和表示。我有一个数据提供者类来获取和设置数据。这很好，只有一个 xpage，但是随着应用程序在关系和多个 xpage 方面变得更加先进，我遇到了一个问题（我正在查看[http://blog.mindoo.com/web/blog.nsf/dx/18.03 .2011104725KLEDH8.htm?opendocument&comments#anc1](http://blog.mindoo.com/web/blog.nsf/dx/18.03.2011104725KLEDH8.htm?opendocument&comments#anc1)获取灵感）。

如果我没记错的话，我不能将不同的托管 bean 分配给不同的 xpage，因此无法在 faces-config.xml 中为不同的 xpage 设置不同的 data-provider-classes 和 businesslogic-beans。现在我可能会以错误的方式解决这个问题，但任何指针都非常感谢。

最好的问候奥洛夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:31:19.963

将bean视为“全局变量”，因此您可以通过定义不同的名称来拥有不同的功能。例如：“invoice”、“customer”、“order”、“orderItem”等。由你决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:30:08.297

您不能为特定的 xpage（据我所知）分配托管 bean（如在 faces-config 中定义它们）。它们是特定于应用程序的。我认为您正在寻找类似工厂模式/创建者模式的东西。这些是用于创建特定类的实例的设计模式。有关更多信息，请参阅：[工厂方法模式维基百科](http://en.wikipedia.org/wiki/Factory_method_pattern)或[创建模式维基百科](http://en.wikipedia.org/wiki/Creational_pattern)。

例如，当您创建比萨店网站时，您可以拥有一个工厂来创建特定类型的比萨饼，具体取决于您按下的按钮。然后在内存 (bean) 中创建每个比萨饼并用作自定义控件的数据源。当客户准备好订购比萨饼时，它会保存到 notesdocument（已保存状态）并与作为该客户订单订购的所有其他产品一起转换。

每当您想再次检索该特定披萨时（例如，当您想检查客户订购的披萨时）您只需要询问工厂您是否可以获得带有编号/ID的披萨，工厂将从notesdocument返回该披萨. 一次构建，多次使用。

因此，基本上每个页面没有多个托管 bean，而是每个应用程序，您可以在需要它们的任何地方在应用程序中使用它们。

# delphi - 在 Delphi 7 中从文本文件加载信息

> ID：10175952
> 
> 赞同：2
> 
> 时间：2012-04-16T14:22:22.753
> 
> 标签：delphi, text-files

我正在尝试使用一个程序将名称和分数保存到一个文本文件中，然后从另一个程序中的文件加载它。问题在于引用每个名称，而不是仅加载整个文件或仅加载名字。

它是这样保存的：

```
scores = record
        name: string[20];
        Score: integer;

procedure TForm1.BtnSaveClick(Sender: TObject);
var
scoresFile: file of scores;
begin
scoresrecord.name := EdtName.Text;
scoresrecord.Score := Score;
assignfile(scoresFile, 'Teacher.txt');
rewrite(scoresFile);
write(scoresFile, scoresrecord);
closeFile(scoresFile);
end; 
```

并使用以下方法加载到字符串网格中：

```
 scores = record
        name: string[20];
        Score: integer;

var 
ScoreRecord: scores;
scoresFile: file of scores;

StrGrdScores.Cells[0,0]:='Name';
StrGrdScores.Cells[1,0]:='Score';
assignfile(scoresFile, 'C:\Computing\AlgebraNew\Teacher.txt');
reset(scoresFile);
while not Eof(scoresFile) do
read(scoresFile, ScoreRecord);
closeFile(scoresFile);
for I := 1 to StrGrdScores.Row do
StrGrdScores.cells[0,i]:=ScoreRecord.name; 
```

这是我加载名称的尝试，但它只是将文件中的第一个名称加载到每一行中。当我弄清楚如何加载名称时，加载分数应该是显而易见的。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:37:26.663

您的保存过程似乎只将一条记录保存到文件中。

您的加载过程将每一行读入同一个变量，覆盖以前的值。从文件中读取值时将值写入网格。

```
i = 0;
while not Eof(scoresFile) do
begin
  read(scoresFile, ScoreRecord);
  StrGrdScores.cells[0,i]:=ScoreRecord.name;
  StrGrdScores.cells[1,i]:=ScoreRecord.Score;
  inc(i);
end;
closeFile(scoresFile); 
```

在写入值之前，您可能需要在 stringgrid 中附加一行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T14:40:40.023

assignfile/write/rewrite/closefile 是非常老式的 Pascal。在 Object Pascal 中，特别是在 Delphi 中，有 TFileStream 对象可供使用。但在这种特定情况下，我建议使用 TStringList 对象。它有 LoadFromFile 和 SaveToFile 方法，还有一个索引属性 Value，它将值存储在“Name=Value”的行中。

# android - Android应用程序中帧动画期间的内存错误

> ID：10175956
> 
> 赞同：1
> 
> 时间：2012-04-16T14:22:37.687
> 
> 标签：android, memory, animation, memory-leaks

嗨，我正在尝试设置一个帧动画，其中包含一系列图像作为我在 android 应用程序中的启动页面的背景，目前没有错误，但是当我运行应用程序时它意外退出。10 次垃圾回收后的第一个错误是 E/dalvikvm-heap(276): 1234272-byte external allocation too large for this process。我有 17 幅图像用于帧动画，每幅图像都不超过 50k，所以我认为图像大小不是问题。

我在主要活动中实现的java代码如下：

```
@Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ImageView frameanimation = (ImageView) findViewById(R.id.frame_animation);
        AnimationDrawable frame_animation = (AnimationDrawable) frameanimation.getBackground();

        frame_animation.setVisible(true, true);
        frame_animation.start();
    } 
```

然后，我让这段代码在我的 XML 布局文件中实现图像视图：

```
<ImageView
        android:id="@+id/frame_animation"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:src="@drawable/frame_animation"
android:background="@drawable/frame_animation"/> 
```

最后我将我的动画drawable保存为我的drawable文件夹中的'frame_animation.xml'。

```
<?xml version="1.0" encoding="utf-8"?>

<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false">
    <item android:drawable="@drawable/homebckgrnda1" android:duration="200" />
    <item android:drawable="@drawable/homebckgrnda2" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda3" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda4" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda5" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda6" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda7" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda8" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda9" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda10" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda11" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda12" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda13" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda14" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda15" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda16" android:duration="50" />
    <item android:drawable="@drawable/homebckgrnda17" android:duration="50" />
</animation-list> 
```

我在运行应用程序时获得的完整 LogCat 日志如下所示：

```
04-16 13:51:33.703: D/dalvikvm(276): GC_EXTERNAL_ALLOC freed 906 objects / 64688 bytes in 69ms
04-16 13:51:33.983: D/dalvikvm(276): GC_EXTERNAL_ALLOC freed 208 objects / 9952 bytes in 66ms
04-16 13:51:34.203: D/dalvikvm(276): GC_EXTERNAL_ALLOC freed 54 objects / 2112 bytes in 51ms
04-16 13:51:34.443: D/dalvikvm(276): GC_EXTERNAL_ALLOC freed 13 objects / 536 bytes in 52ms
04-16 13:51:34.683: D/dalvikvm(276): GC_EXTERNAL_ALLOC freed 13 objects / 512 bytes in 54ms
04-16 13:51:35.133: D/dalvikvm(276): GC_EXTERNAL_ALLOC freed 20 objects / 824 bytes in 52ms
04-16 13:51:35.593: D/dalvikvm(276): GC_EXTERNAL_ALLOC freed 26 objects / 1216 bytes in 70ms
04-16 13:51:36.023: D/dalvikvm(276): GC_EXTERNAL_ALLOC freed 24 objects / 1008 bytes in 51ms
04-16 13:51:36.394: D/dalvikvm(276): GC_EXTERNAL_ALLOC freed 26 objects / 1128 bytes in 55ms
04-16 13:51:36.803: D/dalvikvm(276): GC_EXTERNAL_ALLOC freed 24 objects / 984 bytes in 50ms
04-16 13:51:37.143: E/dalvikvm-heap(276): 1234272-byte external allocation too large for this process.
04-16 13:51:37.143: E/GraphicsJNI(276): VM won't let us allocate 1234272 bytes
04-16 13:51:37.153: D/AndroidRuntime(276): Shutting down VM
04-16 13:51:37.153: W/dalvikvm(276): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-16 13:51:37.203: E/AndroidRuntime(276): FATAL EXCEPTION: main
04-16 13:51:37.203: E/AndroidRuntime(276): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.BadmintonTrain/com.android.BadmintonTrain.BadmintonTrainActivity}: android.view.InflateException: Binary XML file line #19: Error inflating class android.widget.ImageView
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.os.Looper.loop(Looper.java:123)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-16 13:51:37.203: E/AndroidRuntime(276):  at java.lang.reflect.Method.invokeNative(Native Method)
04-16 13:51:37.203: E/AndroidRuntime(276):  at java.lang.reflect.Method.invoke(Method.java:521)
04-16 13:51:37.203: E/AndroidRuntime(276):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-16 13:51:37.203: E/AndroidRuntime(276):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-16 13:51:37.203: E/AndroidRuntime(276):  at dalvik.system.NativeStart.main(Native Method)
04-16 13:51:37.203: E/AndroidRuntime(276): Caused by: android.view.InflateException: Binary XML file line #19: Error inflating class android.widget.ImageView
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
04-16 13:51:37.203: E/AndroidRuntime(276):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-16 13:51:37.203: E/AndroidRuntime(276):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.app.Activity.setContentView(Activity.java:1647)
04-16 13:51:37.203: E/AndroidRuntime(276):  at com.android.BadmintonTrain.BadmintonTrainActivity.onCreate(BadmintonTrainActivity.java:21)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-16 13:51:37.203: E/AndroidRuntime(276):  ... 11 more
04-16 13:51:37.203: E/AndroidRuntime(276): Caused by: java.lang.reflect.InvocationTargetException
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.widget.ImageView.<init>(ImageView.java:108)
04-16 13:51:37.203: E/AndroidRuntime(276):  at java.lang.reflect.Constructor.constructNative(Native Method)
04-16 13:51:37.203: E/AndroidRuntime(276):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
04-16 13:51:37.203: E/AndroidRuntime(276):  ... 22 more
04-16 13:51:37.203: E/AndroidRuntime(276): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.Bitmap.nativeCreate(Native Method)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.content.res.Resources.loadDrawable(Resources.java:1709)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.content.res.Resources.getDrawable(Resources.java:581)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.drawable.AnimationDrawable.inflate(AnimationDrawable.java:265)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:788)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:729)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.content.res.Resources.loadDrawable(Resources.java:1694)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.view.View.<init>(View.java:1885)
04-16 13:51:37.203: E/AndroidRuntime(276):  at android.widget.ImageView.<init>(ImageView.java:112) 
```

非常感谢任何帮助，我只是无法弄清楚导致问题的原因。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:29:06.867

您使用的图像可能对于动画来说太大了。它们有多大？在动画中，Android 将所有图像加载到内存中并解压缩它们，这意味着每个像素将占用 4 个字节。所以 50k 意味着你的图像是 111px x 111px。从误差来看，每帧大约是 480 x 640，确实很大。尝试使用较小的图像。

# java - c3p0.idle_test_period的使用。

> ID：10175957
> 
> 赞同：14
> 
> 时间：2012-04-16T14:22:39.853
> 
> 标签：java, hibernate, c3p0

我是 c3op 的新手，对以下内容的使用感到困惑：

```
c3p0.idle_test_period 
```

在此链接中：[如何配置 C3P0 连接池](https://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool)

```
idleTestPeriod :  Must be set in hibernate.cfg.xml (or hibernate.properties), Hibernate default:  
0, If this is a number greater than 0, c3p0 will test all idle, pooled but unchecked-out  
connections, every this number of seconds. 
```

这种测试（idel，池化连接）的目的是什么，c3p0.idle_test_period和c3p0.timeout之间的关系是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-16T14:38:50.100

数据库服务器可能会在一段时间后关闭其一侧的连接 - 导致您的应用程序出现一些错误，因为它会尝试在服务器端不再可用的连接上发送查询。

为了避免这种情况，您可以让池定期检查连接（想想 ping）的有效性。这是`idle_test_period`为了什么。

`timeout`是池将从池中删除连接的时间跨度，因为该连接有一段时间没有被签出（使用）并且池包含的连接多于`c3pO.min_size`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T14:09:12.063

我认为这个设置是在休眠中使用的，以便每隔几秒验证一次池连接。考虑一个场景，如果在数据库端，密码被更改。Hibernate 已经汇集了旧密码的连接。因此，使用错误密码的池是安全漏洞。所以当休眠时会在几秒钟后验证它。它将使该池连接无效。

# java - 如何在 Java 中保存 shell 脚本的回显输出

> ID：10175960
> 
> 赞同：0
> 
> 时间：2012-04-16T14:22:48.240
> 
> 标签：java, bash, shell, junit

我正在开发一个 Java 程序，它在 JUnit 测试中调用多个 Shell 脚本（因此除了 .'s 和 E's 之外没有输出），它操作文件和 SQL 表，然后将所述表中的数据与其预期值进行比较。理论上一切正常，但是我遇到了一个意外错误，其中一种类型的测试按预期工作，而另一种类型的测试在十分钟超时后失败。我已将问题隔离为 Shell 脚本之一，但是我没有编写此脚本，也无法以任何方式更改它。解决此问题的最佳方法是保存相关脚本的输出，该输出来自一系列回显调用。是否有一种简单/可靠的方法来保存回声输出？我用谷歌搜索了一下，但什么也没出现。我还没有尝试存储输出，所以我没有

```
//Currently using BufferedWriter, File, FileWriter, IOException, and Writer
import java.io.*;

//Method to write to a log file
public void record(String input) throws IOException {
  writer = new BufferedWriter(new FileWriter(file,true));
  writer.write(input + "\n");
  writer.close();
}

Runtime rt = Runtime.getRuntime();

//Several of these since a lot of file manipulation/script running occurs
process = rt.exec("./shell.sh");
process.waitFor(); 
```

在我问的另一个问题中，有人建议不要使用 Runtime.exec() 有几个原因。虽然我意识到不使用 exec() 的好处，但对于这个版本的程序，我需要这样做。

tl;dr 问题：我的 Java 程序能否轻松运行 shell 脚本并保存它们的 echo 输出？如果没有，是否有用于读取输出的 tail -f 等效项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:36:41.877

如何使用编写一个新的脚本文件，例如`scriptWithOutput.sh`，将回声重定向到日志文件

```
#!/bin/sh

log="someDir/someLog.log"

# This saves all you "echoes" to the log file
exec &> $log

# Your shell script
./shell.sh 
```

然后在你的 Java 代码中

```
process = rt.exec("./scriptWithOutput.sh"); 
```

然后尝试`someDir/someLog.log`从 Java 中读取？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:43:06.377

要尽可能轻松地做到这一点，您应该真正使用异步读取和写入外部进程的输出。这可能是阻塞并导致超时的原因，是脚本`echo`返回其内容的方式，并且它们没有被消耗。

[不久前，我发布了对这个完全相同的问题的答案](https://stackoverflow.com/a/7770167/177800)，这在从外部进程读取时适用于所有情况，这**就是为什么**不再使用`Process.exec()`和使用`ProcessBuilder`.

# assembly - 汇编 MIPS %call16(printf)

> ID：10175962
> 
> 赞同：1
> 
> 时间：2012-04-16T14:22:55.503
> 
> 标签：assembly, mips

我在汇编中有这段代码。

```
 .data
tabela:     .word   4, 2, 10, 1, 6
print:      .asciiz "The value is: %d\n"
    .text
    .globl  programa
programa:

    ########################
    Do some stuff here.
    Value on $10 is -99
    ########################

la      $4,print
move    $5,$10
lw      $25,%call16(printf)($28)
jalr    $25 
```

此代码将打印：

```
The value is: -99 
```

我明白那个：

`la $4,print`加载要在函数调用的第一个参数 ($a0) 上打印的字符串的地址

`move $5,$10`移动寄存器 10（在本例中为 -99）上的值以注册函数调用的第二个参数

这是我的疑问。我在寄存器 25 上加载了一些东西。

是什么`%call16(printf)($28)`？这是打印字符串和数字的原因，但我不明白为什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:01:42.490

`%call16`指示汇编器插入类型为 R_MIPS_CALL16 的显式重定位，这是针对指定函数（在您的情况下为 ）的 GOT 条目的 16 位宽重定位`printf`。重定位基本上是说“将偏移量 0x 处的值替换为符号 printf 存储在的内存位置”。然后`jalr`跳转到存储的地址`$25`。

PS. In some cases (e.g. VxWorks), ELF binaries may not use PIC and then R_MIPS_CALL16 relocations point to an entry in the `.got.plt` section, but that doesn't change your use of the assembler at all.

# jsf - 从 Facelets 调用 servlet 的正确方法？

> ID：10175963
> 
> 赞同：4
> 
> 时间：2012-04-16T14:22:57.340
> 
> 标签：jsf, servlets, facelets

使用带有提交按钮的表单从 facelets 文件调用 servlet 的正确方法是什么？是否需要特定的表格？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T15:13:51.817

只需使用纯 HTML`<form>`而不是 JSF `<h:form>`。默认情况下，JSF`<h:form>`向当前视图 ID 的 URL 发送 POST 请求，并默认调用`FacesServlet`. 它不允许您更改表单操作 URL 或方法。纯 HTML`<form>`允许您指定不同的 URL，如果需要，还可以指定方法。

以下启动示例向 Google 发送搜索请求：

```
<form action="http://google.com/search">
    <input type="text" name="q" />
    <input type="submit" />
</form> 
```

请注意，您也不需要为输入/按钮使用 JSF 组件。可以使用`<h:inputText>`等，但不会在关联的支持 bean 中设置值。这样就不需要 JSF 组件开销。

例如，当您想向映射到 URL 模式的 servlet 发送 POST 请求`/foo/*`并且您需要发送带有 name 的请求参数时`bar`，您需要创建如下表单：

```
<form action="#{request.contextPath}/foo" method="post">
    <input type="text" name="bar" />
    <input type="submit" />
</form> 
```

这样`doPost()`将调用 servlet 的方法：

```
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String bar = request.getParameter("bar");
    // ...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-29T11:37:53.700

您可以通过以下方式从 jsf 调用：

```
 <h:outputText value="Download" />
        <h:outputLink value="#{request.contextPath}/files" id="btnDownload1" styleClass="redButton">
        <h:outputText value="FILESDOWNLOAD" />
        </h:outputLink>
    </h:panelGrid> 
```

然后在 web.xml 中：

```
<servlet>
  <servlet-name>files</servlet-name>
  <servlet-class>com.Download</servlet-class> 
```

# events - 防止 beforeSelectRow 事件，当用户双击 jqgrid 中的任何行时

> ID：10175967
> 
> 赞同：1
> 
> 时间：2012-04-16T14:23:13.490
> 
> 标签：events, jqgrid, event-handling

我在 jqgrid 中使用单元格编辑，为此，我正在使用许多不同的 jqgrid 事件，如下所述...... 1）beforeSelectRow，2）beforeEditCell，3）afterEditCell，4）onCellSelect，5）ondblClickRow 等......

现在，当我双击任何一行时， beforeselectRow 代码首先被执行..我想阻止......但是怎么做呢？

一些示例代码如下：-

```
ondblClickRow: function(id,irow,icol,e)
{
  ........
},
beforeSelectRow : function(rowid, e) 
{   

    if(rowid==lastSelected)
    {
        $sampleDialog.dialog('open');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:16:47.823

不同的 Web 浏览器处理双击事件的方式略有不同。所以一般来说你不能在'dblclick'之前阻止'click'事件。回调`beforeSelectRow`将在`click`jqGrid 代码内部定义的 enevt 处理程序内部调用。在`dblclick`事件处理程序的 jQuery 文档中，您可以阅读以下内容（参见[此处](http://api.jquery.com/dblclick/)）：

> 不建议将处理程序绑定到同一元素的 the`click`和`dblclick` events。触发的事件顺序因浏览器而异，有的在一个`click`之前接收两个事件，`dblclick`而另一些则只接收一个。双击灵敏度（被检测为双击的两次单击之间的最长时间）可能因操作系统和浏览器而异，并且通常是用户可配置的。

您目前所做的只是不推荐绑定“click”*和*“dblclick”句柄的方法。

您没有描述您遇到的原始问题，这可能在`ondblClickRow`回调实现的某个地方。`beforeSelectRow`唯一的解决方案是检查程序的重组，以确保内部操作和`ondblClickRow`回调之间没有冲突。

# sql-server - SQL Server 速度：左外连接与内连接

> ID：10175974
> 
> 赞同：0
> 
> 时间：2012-04-16T14:23:28.013
> 
> 标签：sql-server, performance

理论上，考虑到两个查询都返回相同的结果集，为什么内连接比左外连接工作得快得多。我有一个需要很长时间才能描述的查询，但这就是我看到的更改单连接：左外连接 - 6 秒，内连接 - 0 秒（查询的其余部分相同）。结果集：相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:36:39.563

实际上取决于数据，左外连接和内连接不会返回相同的结果..左外连接很可能会产生更多结果，并且再次取决于数据..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:05:09.653

如果我将左连接更改为内部连接并且结果没有什么不同，我会担心。我怀疑您在 where 子句中的表左侧有一个条件，有效地（并且可能不正确地）将其转换为内部连接。

就像是：

```
select * 
from table1 t1
left join table2 t2 on t1.myid = t2.myid
where t2.somefield = 'something' 
```

这不是一回事

```
select * 
from table1 t1
left join table2 t2 
on t1.myid = t2.myid and t2.somefield = 'something' 
```

所以**首先**我会担心我的查询一开始就不正确，然后我会担心性能。内连接**不是**左连接的性能增强，它们意味着两个不同的东西，应该返回不同的结果，除非你有一个表，每条记录总是匹配。在这种情况下，您更改为内部联接，因为另一个不正确，无法提高性能。

关于左连接需要更长的时间的原因，我最好的猜测是它连接到更多的行，然后被 where 子句过滤掉。但这只是一个疯狂的猜测。要知道您需要查看执行计划。

# ruby-on-rails - 当应用程序路径中有非 ASCII 字符时，Ruby on Rails 应用程序不会开始使用Passenger

> ID：10175975
> 
> 赞同：2
> 
> 时间：2012-04-16T14:23:34.953
> 
> 标签：ruby-on-rails, deployment, passenger, non-ascii-characters

我在使用Passenger 运行Ruby on Rails 应用程序时遇到问题。我的应用程序位于 /Users/Glutexo/Práce/Bytek/Bytek 目录中，您可以看到 (á) 中有一个非 ASCII 字符。即使我将它符号链接到另一个目录，例如 /Library/WebServer/Documents/Bytek 所有字符都是 US-ASCII，问题仍然存在。

但是当我在所有 US-ASCII 路径中物理创建另一个 Rails 应用程序时，例如 /Users/Glutexo/rails/pokus，它可以工作：应用程序通过Passenger 启动并正常运行。

尝试运行驻留在非 ASCII 路径中的 Rails 应用程序时出现的错误页面显示以下内容：

> 错误信息：
> 
> US-ASCII 中的无效字节序列
> 
> 异常类：
> 
> 参数错误
> 
> 回溯：
> 
> 0 | /Users/Glutexo/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/pathname.rb | 45 | 在`=~'

提到的 pathname.rb 中的行在以下函数中：

```
# chop_basename(path) -> [pre-basename, basename] or nil
def chop_basename(path)
  base = File.basename(path)
  if /\A#{SEPARATOR_PAT}?\z/o =~ base # This is the line no. 45
    return nil
  else
    return path[0, path.rindex(base)], base
  end
end
private :chop_basename 
```

有没有人有任何建议，如何说服乘客即使从包含非 ASCII 字符的路径也能够运行 Ruby on Rails 应用程序？

Rails 是 3.2.2 版，Ruby 是 1.9.3-p125 版，Apache 是 2.2.21 版，Passenger 是 3.0.12 版。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:23:57.913

此问题的解决方案是在您的 rails 应用程序源文件中添加“魔术注释”。例如，在将遇到非 ASCII 字符的文件的开头，添加以下内容：

```
# encoding: utf-8 
```

有一个有用的 gem 可以帮助你做到这一点： [https ://github.com/m-ryan/magic_encoding](https://github.com/m-ryan/magic_encoding)

为了确认此解决方案，我在包含“Práce”的目录中使用 rails 应用程序设置了乘客，并收到了类似的错误。我在 Rails 应用程序的根目录中运行了 magic_encoding gem 的“magic_encoding”命令。我重新启动了乘客，它似乎已经成功了。希望有帮助！

另请参阅：[Rails 和 Ruby 1.9 中的无效多字节字符 (US-ASCII)](https://stackoverflow.com/questions/1739836/invalid-multibyte-char-us-ascii-with-rails-and-ruby-1-9)

# python - Python 属性，我如何让它正常工作

> ID：10175976
> 
> 赞同：0
> 
> 时间：2012-04-16T14:23:39.200
> 
> 标签：python, django

我正在尝试在 python 上使用 OO 来创建一个很好的结构化类。我有一个对象，一个类的所有函数都将继承，但有可能需要一个或两个附加参数的子函数（getter 和 setter）。

我怎样才能让这种类型的逻辑正常工作。

```
class XYZ(object):
    def __init__(self, cameraId):
        self.cameraId = cameraId;
        self.index = "";

    def get_test(self):
        print "Index: " + self.index + " CameraID: " + self.cameraId;
        return self.cameraId;

    def set_test(self, value, myValue=""):
        self.cameraId = value;
        self.index = myValue;
        return True;

    TEST_XYZ = property(get_test,set_test); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:26:04.517

您可以使用`tuple`-typed 值。请注意，您不必`;`在语句之后使用...

```
class XYZ(object):
    def __init__(self, cameraId):
        self.cameraId = cameraId
        self.index = ""

    def get_test(self):
        print "Index: " + self.index + " CameraID: " + self.cameraId
        return self.cameraId

    def set_test(self, value):
        # Require value to be a tuple!
        assert(isinstance(value, tuple))

        self.cameraId = value[0]

        try:
            self.index = value[1]

        except IndexError:
            self.index = ""

        return True

    TEST_XYZ = property(get_test, set_test) 
```

# jquery - jQuery - 无法更新隐藏的输入属性

> ID：10175979
> 
> 赞同：1
> 
> 时间：2012-04-16T14:23:52.087
> 
> 标签：jquery, field

我正在尝试构建一个禁用由用户从菜单中选择确定的隐藏字段的表单。一开始我可以很容易地禁用所有字段，当用户选择不同的选项时，我可以重新启用特定字段。但是，当用户单击“更改位置”时，我需要能够重新禁用*所有*字段，但我根本无法正常工作！

到目前为止，这是我的代码......我的代码背后的目的可能对您来说并不完全清楚，因为为了清晰起见，它经过大量编辑，但发生了各种其他不相关的事情。我只想说，这就是我需要做的:)

jQuery：

```
$('input[name="hosted_button_id"]').attr("disabled",true);

$('#changelocation').click(function(){
    $('input[name="hosted_button_id"]').attr("disabled",true);
});

$('.deliveryselection').change(function(){    
    var deliveryLocation = $(this).val();
    $('input[title="' + deliveryLocation + '"]').removeAttr("disabled");
}); 
```

​</p>

HTML：

```
<select class="deliveryselection">
    <option>Please select</option>
    <option value="UK">UK</option>
    <option value="Europe">Europe</option>
    <option value="North America">North America</option>
    <option value="Rest of World">Rest of World</option>
</select>
<a href="javascript:void(0)">Change location</a>
<form>
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="button" name="hosted_button_id" title="UK" value="UK"><br />
    <input type="button" name="hosted_button_id" title="Europe" value="Europe"><br />
    <input type="button" name="hosted_button_id" title="North America" value="North America"><br />
    <input type="button" name="hosted_button_id" title="Rest of World" value="Rest of World"><br /><br />
    <input type="submit" name="submit">
</form>
​ 
```

我已经在这里的 jsfiddle 中设置了这个：http: [//jsfiddle.net/solomon/rS7nV/1/](http://jsfiddle.net/solomon/rS7nV/1/)

**编辑** 我想我已经发现了这个问题。在我的实际代码中，我一直在处理隐藏字段，而不是按钮字段，所以我无法直接看到我的劳动成果——我一直在使用 Firebug 来确定隐藏字段的禁用条件。只有在使用 jsfiddle 时将它们转换为按钮，我才发现我的代码工作正常（除了我在删除 ID 时犯的一个男生错误......谢谢你们的帮助！）。事实证明，Firebug 没有更新它的报告，并且仍然告诉我这些字段没有被禁用——尽管我的代码工作得很好！这有点令人沮丧——我整个下午都浪费在了一个 Firebug 错误上！:)

没关系 - 现在一切都解决了:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:28:33.017

问题是您没有带有 id 的元素`changelocation`。添加id就可以了。

[http://jsfiddle.net/rS7nV/4/](http://jsfiddle.net/rS7nV/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T02:44:13.943

在 div 中声明一个类并使用 jQuery 调用它，如下所示

jQuery(".declaredclassname").attr("disabled", true);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:28:48.260

如果您为包含隐藏字段的表单提供 id，您可以轻松禁用所有隐藏字段：

```
$("#hiddenFormId input").attr("disabled", true); 
```

# android - Android 上的 iptables 1.4.11

> ID：10175984
> 
> 赞同：2
> 
> 时间：2012-04-16T14:24:07.687
> 
> 标签：android, iptables

我已经从[http://source.android.com/source/building-kernels.html下载了 Android 内核源代码](http://source.android.com/source/building-kernels.html)

然后我启动了模拟器并想使用 iptable 规则，但我收到以下错误。iptable 包是否未完全安装？为什么缺少 NAT 表？

最初我已经开始关注[http://randomizedsort.blogspot.de/2011/03/porting-iptables-1410-to-android.html#comment-form_8482839589527760177](http://randomizedsort.blogspot.de/2011/03/porting-iptables-1410-to-android.html#comment-form_8482839589527760177)来安装 iptables，但是在 adb shell 上看到了 iptablesv1.4.11.1 ，我已经放弃了这个想法。有没有人尝试在较新的 android 内核源上移植 iptables？

```
 adb shell
# su root

# iptables  -t nat -A OUTPUT -p tcp --dport 8000 -j REDIRECT --to-port 8080

FIX ME! implement getprotobyname() bionic/libc/bionic/stubs.c:450
iptables v1.4.11.1: can't initialize iptables table `nat': Table does not exist (do you need to insmod?)
Perhaps iptables or your kernel needs to be upgraded. 
```

请指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T16:01:35.393

使用协议编号 ( `-p 6`) 而不是名称 ( `-p tcp`)：

`iptables -t nat -A OUTPUT -p 6 --dport 8000 -j REDIRECT --to-port 8080`

有关更多信息，请参阅此答案： [getprotobyname error iptables](https://stackoverflow.com/questions/10331699/getprotobyname-error-iptables/18385413#18385413)

# c# - 隐藏弹出菜单的最佳方法？

> ID：10175985
> 
> 赞同：0
> 
> 时间：2012-04-16T14:24:09.467
> 
> 标签：c#, winforms

我有一个在右键单击时创建弹出菜单的控件，我需要在左键单击时关闭它的最佳方法。除了在我的应用程序中处理每个控件的 mouseDown 事件之外，关闭弹出菜单的最佳方法是什么？

就像一个全局鼠标点击事件......

```
 private void lbKeywords_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Right)
        {
                listBoxMenu.ShowPopup(Cursor.Position);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:10:47.327

作为答案：尝试询问 DevExpress 或查看他们的支持页面 - 即我在快速搜索后找到了这个：[devexpress.com/Support/Center/p/CQ14210.aspx](http://devexpress.com/Support/Center/p/CQ14210.aspx)

# entity-framework - 约束实体框架codefirst中的nvarchar列？

> ID：10175986
> 
> 赞同：0
> 
> 时间：2012-04-16T14:24:12.313
> 
> 标签：entity-framework, ef-code-first

我正在编写一个使用实体框架的应用程序。

我的一个表被称为`Individuals`，它需要一个`Sex`只允许值的列`Male`，`Female`或者`Unknown`。

这应该如何用实体框架来实现？当然，我可以只限制允许用户输入的输入，但我希望对数据库也有限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:26:23.853

该列应该是 int 类型，然后映射到一个 Enum 字段，该字段的值是 Unknown、Male、Female。

# objective-c - 应用程序启动时的 EXC_BREAKPOINT (SIGTRAP)

> ID：10175988
> 
> 赞同：4
> 
> 时间：2012-04-16T14:24:18.983
> 
> 标签：objective-c, ios, xcode, ipad, crash

我有一个应用程序可以引入一些 RSS 源。我首先加载应用程序委托，然后加载一个 SplashScreenViewContoller，然后根据日期确定要拉入哪些提要。

这一切都很棒。在调试模式下运行时，模拟器/iPad 中的一切都运行良好。我现在尝试创建一个 Ad-Hoc 应用程序，但当我到达 SplashScreen 时应用程序崩溃了。

当谷歌搜索与应用程序的启动时间相关时，我遇到了一个初始异常代码错误（异常代码：0x8badf00d），但这已得到解决。这是我最新问题的崩溃日志转储。

任何人有任何想法我如何解决这个问题？？？

```
Incident Identifier: B4F5E7CE-963B-4CC0-BD6C-9FF3A8F37E83
CrashReporter Key:   3887854c6ae7a348803250fc0aa3c561e259f20e
Hardware Model:      iPad2,2
Process:         My App [8302]
Path:            /var/mobile/Applications/29A2E76E-3C2F-41E6-8965-DE0B048FB15B/My App.app/My App
Identifier:      My App
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-04-16 16:02:39.351 +0200
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x00000102, 0x6e085801
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   CoreFoundation                  0x369dae4c CFHash + 8
1   CoreFoundation                  0x36a56be0 __CFDictionaryStandardHashKey + 16
2   CoreFoundation                  0x36aa90ac __CFBasicHashAddValue + 840
3   CoreFoundation                  0x369dc1ac CFBasicHashSetValue + 3012
4   CoreFoundation                  0x369db5b4 CFDictionarySetValue + 192
5   CoreFoundation                  0x36a0eba6 -[CFXPreferencesSource setValue:forKey:] + 50
6   CoreFoundation                  0x36a19242 -[CFXPreferencesPropertyListSource setValue:forKey:] + 86
7   CoreFoundation                  0x36a19190 _CFXPreferencesSetValue + 128
8   CoreFoundation                  0x36a19082 CFPreferencesSetAppValue + 30
9   Foundation                      0x358eb456 -[NSUserDefaults(NSUserDefaults) setObject:forKey:] + 78
10  My App                      0x0007741e +[MKStoreManager setObject:forKey:] (MKStoreManager.m:123)
11  My App                      0x00079a38 -[MKStoreManager rememberPurchaseOfProduct:] (MKStoreManager.m:608)
12  My App                      0x000796b0 -[MKStoreManager provideContent:forReceipt:] (MKStoreManager.m:584)
13  My App                      0x0007a25e -[MKStoreObserver restoreTransaction:] (MKStoreObserver.m:94)
14  My App                      0x00079f48 -[MKStoreObserver paymentQueue:updatedTransactions:] (MKStoreObserver.m:53)
15  StoreKit                        0x37ce77a0 __NotifyObserverAboutChanges + 52
16  CoreFoundation                  0x369e0af4 CFArrayApplyFunction + 32
17  StoreKit                        0x37ce775c -[SKPaymentQueue _notifyObserversAboutChanges:] + 112
18  StoreKit                        0x37ce7dee -[SKPaymentQueue _processUpdates:trimUnmatched:] + 1042
19  StoreKit                        0x37ce7026 -[SKPaymentQueue _transactionsRefreshedNotification:] + 42
20  Foundation                      0x359724f8 __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 12
21  CoreFoundation                  0x36a5d540 ___CFXNotificationPost_block_invoke_0 + 64
22  CoreFoundation                  0x369e9090 _CFXNotificationPost + 1400
23  Foundation                      0x358e63e4 -[NSNotificationCenter postNotificationName:object:userInfo:] + 60
24  AppSupport                      0x35017b9c -[CPDistributedNotificationCenter deliverNotification:userInfo:] + 56
25  AppSupport                      0x35019104 _CPDNDeliverNotification + 284
26  AppSupport                      0x35017994 _XDeliverNotification + 164
27  AppSupport                      0x3500cb0a migHelperRecievePortCallout + 166
28  CoreFoundation                  0x36a6551c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
29  CoreFoundation                  0x36a654be __CFRunLoopDoSource1 + 134
30  CoreFoundation                  0x36a6430c __CFRunLoopRun + 1364
31  CoreFoundation                  0x369e749e CFRunLoopRunSpecific + 294
32  CoreFoundation                  0x369e7366 CFRunLoopRunInMode + 98
33  GraphicsServices                0x30ac9432 GSEventRunModal + 130
34  UIKit                           0x36d38e76 UIApplicationMain + 1074
35  My App                      0x00041434 main (main.m:14)
36  My App                      0x000413ec 0x40000 + 5100

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x3725f3a8 kevent + 24
1   libdispatch.dylib               0x3146df04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x3146dc22 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib          0x3726fcd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3383ff36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x3383fcc8 start_wqthread + 0

Thread 3:
0   libsystem_kernel.dylib          0x3726fcd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3383ff36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x3383fcc8 start_wqthread + 0

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x3725f004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3725f1fa mach_msg + 50
2   CoreFoundation                  0x36a653ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x36a64124 __CFRunLoopRun + 876
4   CoreFoundation                  0x369e749e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x369e7366 CFRunLoopRunInMode + 98
6   WebCore                         0x301dd0f0 _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x3384572e _pthread_start + 314
8   libsystem_c.dylib               0x338455e8 thread_start + 0

Thread 5:
0   libsystem_kernel.dylib          0x3726f0d8 __psynch_mutexwait + 24
1   libsystem_c.dylib               0x33839674 pthread_mutex_lock + 376
2   CoreData                        0x34ce3d52 -[_PFLock lock] + 18
3   CoreData                        0x34cf31f2 -[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 806
4   CoreData                        0x34d5b280 -[NSManagedObjectContext save:] + 516
5   My App                      0x00074472 -[SQCoreDataManager saveContext] (SQCoreDataManager.m:51)
6   My App                      0x000535fa -[ContentManager renewArticlesFromWebURL:sectionName:sectionIndex:] (ContentManager.m:567)
7   My App                      0x0005223a -[ContentManager main] (ContentManager.m:68)
8   Foundation                      0x3598758a __NSThread__main__ + 1042
9   libsystem_c.dylib               0x3384572e _pthread_start + 314
10  libsystem_c.dylib               0x338455e8 thread_start + 0

Thread 6 name:  com.apple.NSURLConnectionLoader
Thread 6:
0   libsystem_kernel.dylib          0x3725f004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3725f1fa mach_msg + 50
2   CoreFoundation                  0x36a653ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x36a64124 __CFRunLoopRun + 876
4   CoreFoundation                  0x369e749e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x369e7366 CFRunLoopRunInMode + 98
6   Foundation                      0x358f3bb2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302
7   Foundation                      0x358f3a7a -[NSThread main] + 66
8   Foundation                      0x3598758a __NSThread__main__ + 1042
9   libsystem_c.dylib               0x3384572e _pthread_start + 314
10  libsystem_c.dylib               0x338455e8 thread_start + 0

Thread 7:
0   libsystem_kernel.dylib          0x3726fcd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3383ff36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x3383fcc8 start_wqthread + 0

Thread 8:
0   libsystem_kernel.dylib          0x3726fcd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3383ff36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x3383fcc8 start_wqthread + 0

Thread 9 name:  com.apple.CFSocket.private
Thread 9:
0   libsystem_kernel.dylib          0x3726f570 __select + 20
1   CoreFoundation                  0x36a6963a __CFSocketManager + 726
2   libsystem_c.dylib               0x3384572e _pthread_start + 314
3   libsystem_c.dylib               0x338455e8 thread_start + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x36a56bd1      r3: 0x3f6ff9a8
    r4: 0x00000000    r5: 0x00277f60      r6: 0x00277f60      r7: 0x2fe3d9dc
    r8: 0x00000000    r9: 0x00000012     r10: 0x00277f60     r11: 0x00000001
    ip: 0x369da6bd    sp: 0x2fe3d9d8      lr: 0x36a56be7      pc: 0x369dae4c
  cpsr: 0x600f0030

Binary Images:
   0x40000 -    0xddfff +My App armv7  <69c465def4683635a36a369fa5fbb9cc> /var/mobile/Applications/29A2E76E-3C2F-41E6-8965-DE0B048FB15B/My App.app/My App
0x2fe3f000 - 0x2fe60fff  dyld armv7  <4a817f3e0def30d5ae2032157d889c1d> /usr/lib/dyld
0x300a7000 - 0x300ecfff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x30132000 - 0x30133fff  CoreSurface armv7  <7850befd26b630f183ee326aaadd7b34> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x30134000 - 0x308f2fff  WebCore armv7  <814351ff217e3425a8e532c2e2251f73> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x30ac5000 - 0x30acffff  GraphicsServices armv7  <e21a6e61bdd136b6805a9e3abe2e3d1f> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x30ad4000 - 0x30b11fff  FTServices armv7  <28ed78e01a77388cb4c0f2f6ec33482c> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x30c03000 - 0x30c19fff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x30c1a000 - 0x30c1afff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x30c1b000 - 0x30c33fff  Notes armv7  <724966ed5cd4395cb70f9c996b123f53> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x30c34000 - 0x30c37fff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x30d9c000 - 0x30da0fff  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x30db9000 - 0x30e7ffff  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x30e84000 - 0x30ebcfff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x30f1d000 - 0x3114afff  MediaToolbox armv7  <ec9bc89489763c6c93f86c5c490b2d69> /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x3114b000 - 0x3115cfff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x3115d000 - 0x3115efff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x3117f000 - 0x31180fff  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x31239000 - 0x3123efff  CrashReporterSupport armv7  <2bb524b3bb3c3eb2932ce13b655b7c7c> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x31256000 - 0x3143afff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x3144d000 - 0x31453fff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x3146a000 - 0x31480fff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x314c0000 - 0x314fcfff  iCalendar armv7  <f2836083051132d3aa40ad82d7f73aea> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x31510000 - 0x31514fff  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x31541000 - 0x31565fff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x31566000 - 0x3163dfff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x31c39000 - 0x31c3afff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x31c3e000 - 0x31c88fff  ManagedConfiguration armv7  <5e0a131bbfec305ea01f9e01f486da63> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x31d3b000 - 0x31d8cfff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x31d8d000 - 0x31d95fff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x31e01000 - 0x31e10fff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x31e11000 - 0x31e14fff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x31e7e000 - 0x31ebdfff  QuickLook armv7  <802b1092542a3017a0380632502610d4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x31ee7000 - 0x31f35fff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x31f39000 - 0x31f69fff  ContentIndex armv7  <7a64670bb2ff3ee39ddee1dc1c72f92d> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x31f84000 - 0x31f93fff  SpringBoardServices armv7  <ca5b10014b473d2eaec5c48d89ee1b54> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x31f94000 - 0x31fadfff  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x31fae000 - 0x31faefff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x3201e000 - 0x32562fff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x32607000 - 0x3263cfff  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x32640000 - 0x32691fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x32692000 - 0x32718fff  CoreMotion armv7  <6a9355d5a8e238b5b8f193605d509e15> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x32af7000 - 0x32afbfff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x32afc000 - 0x32afdfff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x32b46000 - 0x32bfcfff  AVFoundation armv7  <35cb7a0eb1dc3554a777c1cc11cb0415> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x32ec8000 - 0x32ed4fff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x330f3000 - 0x33102fff  MobileDeviceLink armv7  <70ac33720f513f0f97ea2279260678ca> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x33304000 - 0x333f2fff  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x333f3000 - 0x33409fff  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x3340a000 - 0x3340afff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x3340e000 - 0x33445fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x33553000 - 0x33559fff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x3355a000 - 0x3381bfff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x3381c000 - 0x33836fff  CoreServicesInternal armv7  <cccdb5638b17398f8082542c1b3c8cf6> /System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal
0x33837000 - 0x338c3fff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x339a6000 - 0x339a6fff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x33a13000 - 0x33a18fff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x33a19000 - 0x33a20fff  MailServices armv7  <ab2388ce733e38b7a261273a401bbbf1> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x33ad7000 - 0x33b0cfff  DataAccess armv7  <89fd0c22338b37538cf61803a0bca9e2> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x33b60000 - 0x33b61fff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x33c66000 - 0x33d8bfff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x33d8c000 - 0x33d91fff  ApplePushService armv7  <f424c0340de637c08bbeb4f3bd8c6eaf> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x33de6000 - 0x33de8fff  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x33e0d000 - 0x33e56fff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x33e59000 - 0x33e62fff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x33e63000 - 0x33eaffff  CoreTelephony armv7  <e8eb52ca5fe33c7488a33efd222e7804> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x33f1b000 - 0x33f21fff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x3400d000 - 0x34030fff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x34032000 - 0x340a2fff  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x340ae000 - 0x3426bfff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x3429e000 - 0x3429efff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x343e0000 - 0x34420fff  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x3446e000 - 0x3447afff  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x345cb000 - 0x345d0fff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x34605000 - 0x34649fff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x346c4000 - 0x34738fff  MediaControlSender armv7  <87315c54b2293ab589950341ff91b45d> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x34751000 - 0x347aefff  StoreServices armv7  <628fbbc73ed93730962c53bfbfde6794> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x347af000 - 0x34855fff  AddressBookUI armv7  <da424fecc66e3628ab03378ae80b38fc> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x34894000 - 0x349ddfff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x349de000 - 0x349e8fff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x34a92000 - 0x34b2bfff  EventKit armv7  <d67aa1508ee7306b8e2a45c76ffddff0> /System/Library/Frameworks/EventKit.framework/EventKit
0x34b3c000 - 0x34b41fff  SyncedDefaults armv7  <99fe2106e10539ba8aedcacf52361d66> /System/Library/PrivateFrameworks/SyncedDefaults.framework/SyncedDefaults
0x34b6a000 - 0x34bcdfff  IMCore armv7  <6e26e99b9b5f3829a8486ffd8c64f0d2> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x34cdb000 - 0x34e81fff  CoreData armv7  <b0215b6d4d143859a2b313ecade095ec> /System/Library/Frameworks/CoreData.framework/CoreData
0x34e83000 - 0x34e86fff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x34fcd000 - 0x35009fff  IMFoundation armv7  <77bb4365a65b32a49523b03da0340dbc> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x3500a000 - 0x35046fff  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x351a3000 - 0x351a7fff  FTClientServices armv7  <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x352f0000 - 0x352f4fff  IOSurface armv7  <6ae77a40f8e93f28bc466ca93f5675d4> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x352f5000 - 0x3531efff  AppleAccount armv7  <2ba44023410231fcb3f72f762ea3ce6e> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x35370000 - 0x35440fff  WebKit armv7  <6ff2796c2f933050ac6ecdee9fc6a216> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x35649000 - 0x356f6fff  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x356f7000 - 0x356fafff  ActorKit armv7  <434c756a6b053f4ba3c954cfccddbf59> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x3570d000 - 0x35730fff  MobileSync armv7  <e42604c550283f4aa517ae8f108b340f> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x3574a000 - 0x3577efff  MIME armv7  <d30292ea8f7e360fa5f5d5b1b62b602d> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x357ca000 - 0x357d9fff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x357df000 - 0x357f4fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x3580b000 - 0x3580dfff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x3584c000 - 0x35850fff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x35851000 - 0x35855fff  CertUI armv7  <f503892ef60e36108d28d8f9d6144d2a> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x35862000 - 0x35862fff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x3586f000 - 0x358b2fff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x358b6000 - 0x358d6fff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x358d9000 - 0x358ddfff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x358e3000 - 0x35a61fff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x35af0000 - 0x35b9efff  Message armv7  <b8221d43401d315fb84398b7aa570fc1> /System/Library/PrivateFrameworks/Message.framework/Message
0x35ba9000 - 0x35bd5fff  libtidy.A.dylib armv7  <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x36039000 - 0x36081fff  CoreMedia armv7  <eb1f503312be3c93b07b2d0d25177000> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x361c7000 - 0x362b8fff  QuartzCore armv7  <a2afbe6483683d05ad51b106f98776e2> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x362bd000 - 0x362c4fff  AssetsLibraryServices armv7  <0703f561f9a038b6850d6e93bba7e5f4> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x36319000 - 0x36336fff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x36390000 - 0x36393fff  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x36399000 - 0x363d4fff  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x363e6000 - 0x3644afff  MessageUI armv7  <b74d79ea691a35ada276f063b7217a20> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x3644b000 - 0x36451fff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x3645a000 - 0x36465fff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x3647e000 - 0x364c7fff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x365a8000 - 0x365c7fff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x365de000 - 0x3661cfff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x3661d000 - 0x36642fff  OpenCL armv7  <ec915bfc3f7633dda61b5fc87459119b> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x36646000 - 0x3669efff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x3679b000 - 0x367a7fff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x367ed000 - 0x367f4fff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x367f6000 - 0x368a0fff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x368cc000 - 0x368cdfff  libsystem_sandbox.dylib armv7  <66e985f3eea03ef08afb7cf4c153f76e> /usr/lib/system/libsystem_sandbox.dylib
0x368ce000 - 0x368dbfff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x368dc000 - 0x369b4fff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x369b9000 - 0x369c3fff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x369d8000 - 0x36aeffff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x36b21000 - 0x36b27fff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x36b2b000 - 0x36c70fff  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x36d07000 - 0x371a9fff  UIKit armv7  <d72bcc68e76a3a55a963590cdcffe8cd> /System/Library/Frameworks/UIKit.framework/UIKit
0x371aa000 - 0x371adfff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x371d4000 - 0x371d8fff  Marco armv7  <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x3725e000 - 0x37274fff  libsystem_kernel.dylib armv7  <7ac5560851ce3cb3981068092074b409> /usr/lib/system/libsystem_kernel.dylib
0x37311000 - 0x3738afff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x37391000 - 0x37453fff  Celestial armv7  <2a59586b0ae937c3b25fe526924aa885> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x37454000 - 0x37457fff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x37492000 - 0x374aafff  iAd armv7  <9e9184ed0077317a97b879c3df950316> /System/Library/Frameworks/iAd.framework/iAd
0x3752d000 - 0x37543fff  EAP8021X armv7  <fffe86a22bc434a6ae84f23bfecef9d6> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x3758f000 - 0x375a6fff  WebBookmarks armv7  <bd20a05587783a8e9596eef1d3615ea7> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x376f8000 - 0x37777fff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x37793000 - 0x377ddfff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x377de000 - 0x377effff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x37b89000 - 0x37b9dfff  PersistentConnection armv7  <65682d21486836a3aa3e17b9461e7b3a> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x37b9e000 - 0x37b9efff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x37ce5000 - 0x37cecfff  StoreKit armv7  <1bc0c05f99a8309d90476b42263e3487> /System/Library/Frameworks/StoreKit.framework/StoreKit
0x37d07000 - 0x37d0ffff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:30:12.033

添加一些代码怎么样？从您的堆栈跟踪中我可以看到，您执行的最后一条语句（我猜）是：

```
+[MKStoreManager setObject:forKey:] (MKStoreManager.m:123) 
```

我认为你可以在那里设置一个断点并检查哪些值正在被传递......

# extjs4 - 动态删除表单中的字段 sencha 2

> ID：10175990
> 
> 赞同：1
> 
> 时间：2012-04-16T14:24:28.700
> 
> 标签：extjs4, extjs, sencha-touch-2

我正在使用 sencha touch 2.0 并想创建一个按钮“+”和“-”，以动态添加和删除字段，我已经使用

> this.getForm().insert({...});

但删除部分不会隐藏该字段。

> this.getForm().remove('...');

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:43:11.060

您必须为您的字段设置一个 ID，然后尝试

`this.getForm().remove('your_field_id_here')`

希望这可以帮助。

# java - Yield/Join 是否释放监视器锁定？

> ID：10175993
> 
> 赞同：5
> 
> 时间：2012-04-16T14:24:39.350
> 
> 标签：java, multithreading

> **可能重复：**
> [如果在同步方法中调用 thread.yield() 是否会失去对象锁定？](https://stackoverflow.com/questions/10679676/does-thread-yield-lose-the-lock-on-object-if-called-inside-a-synchronized-meth)

我知道`Thread.sleep()`持有锁，但`Object.wait()`释放锁。有人说`yield`实际实现`sleep(0)`。这是否意味着 yield 不会释放锁？

另一个问题。假设当前线程获得了锁，然后调用`anotherThread.join()`. 当前线程是否释放锁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:39:47.263

除非 javadoc 提到对象的监视器（例如`Object.wait()`），否则您应该假设任何锁都将继续被持有。所以：

> 这是否意味着 yield 不会释放锁？

是的。

> 当前线程是否释放锁？

不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:45:54.910

`sleep`将线程置于等待状态，`yield`将线程直接返回到就绪池。（因此，如果一个线程让步，它可以直接从运行到就绪池，然后再次被调度程序选中，而无需等待。）两者都与锁定无关。

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.4)：

> Thread.sleep 使当前正在执行的线程在指定的持续时间内休眠（暂时停止执行），具体取决于系统计时器和调度程序的精度和准确性。线程不会失去任何监视器的所有权，并且恢复执行将取决于调度和执行线程的处理器的可用性。
> 
> 重要的是要注意 Thread.sleep 和 Thread.yield 都没有任何同步语义。特别是，编译器不必在调用 Thread.sleep 或 Thread.yield 之前将缓存在寄存器中的写入刷新到共享内存，编译器也不必在调用 Thread.sleep 或 Thread 之后重新加载缓存在寄存器中的值。屈服。
> 
> 例如，在以下（损坏的）代码片段中，假设 this.done 是一个非易失性布尔字段：
> 
> ```
> while (!this.done)
>      Thread.sleep(1000); 
> ```
> 
> 编译器可以自由地读取 this.done 字段一次，并在每次执行循环时重用缓存的值。这意味着循环永远不会终止，即使另一个线程更改了 this.done 的值。

# regex - 排除相同（预定义）字符序列的正则表达式

> ID：10175997
> 
> 赞同：0
> 
> 时间：2012-04-16T14:25:04.667
> 
> 标签：regex

我需要编写将匹配任何预定义字符序列的正则表达式，即在字符串“Hello,, world, xaxxa”中将找到双逗号和 x，但不是单个出现。希望这不是重复的问题，但我找不到任何答案...感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:30:04.070

你的意思是像

```
(.)\1+ 
```

[在 Regexr 上](http://regexr.com?30lhn)查看

`(.)`匹配任何字符并将其存储在反向引用中（因为括号周围）。随着`\1`您访问此反向引用。

所以这将匹配任何相同字符的序列。

如果您有一组已定义的字符，请使用字符类

```
([,x])\1+ 
```

[在 Regexr 上](http://regexr.com?30lht)查看

您可以将任何字符添加到方括号内的类中。