# StackOverflow 问答 11680000-11680999

# html - 如何制作一个不会影响内容的div

> ID：11680000
> 
> 赞同：0
> 
> 时间：2012-07-27T00:38:58.047
> 
> 标签：html

我正在尝试使用 div 添加独立于当前内容的内容。所以基本上我有一句话和一张图片，我想一直到网站的一边。但是添加它们会使网站发生变化。我希望在不更改任何内容的情况下添加它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T00:45:27.607

类似的东西`div { position: absolute; right: 0; }`可能会奏效。试试这个[职位](http://www.barelyfitz.com/screencast/html-training/css/positioning/)教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:59:35.547

```
<div style="float: right"> 
```

有人回答了，但他们的帖子被删除了。

# javascript - 在 Javascript 中调用函数 .ready()

> ID：11680012
> 
> 赞同：0
> 
> 时间：2012-07-27T00:40:27.047
> 
> 标签：javascript, jquery, html

有没有办法在`.ready()`函数执行后调用 JavaScript 函数？

我认为在我的代码中的某些 DOM 结构中发生了一些有趣的事情，我想尝试调用`jquery.('reload')`一个部分。但我需要在调用之后*调用*`$(document).ready(function(){})`它。

为了更清楚一点，我正在使用 jQuery 的砌体，但我在渲染元素时遇到了问题。它带有一个方法“ `reload`”，当在 内部调用时`.ready()`，不能正确呈现，但如果在滚动事件上完成，它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:09:08.220

如果您希望您的代码在执行**后** `.ready()`立即执行，您可以使用毫秒`setTimeout`。`0`

```
$.ready(function(){

    setTimeout(myCoolFunction,0);
}); 
```

*此示例将`myCoolFunction`在发生后尽快执行`.ready()`。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:47:48.037

jquery.('reload') 是什么意思？也许你可以在 $(document).ready(function(){}) 中最后调用它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T06:12:43.467

你可以试试这个[`.load()`](http://api.jquery.com/load-event/)方法。加载每个资源时都会触发它。[`.ready()`](http://api.jquery.com/ready/)只要 DOM 完全加载。

编辑：刚刚注意到，[.load() 速记已弃用](http://bugs.jquery.com/ticket/11733)，请`$().bind("load", fn)`改用

# javascript - 如何在 IE 7 和 8 上导出 .xls 文件

> ID：11680018
> 
> 赞同：0
> 
> 时间：2012-07-27T00:41:04.130
> 
> 标签：javascript, html

我需要从仅包含 HTML 表格的网页中导出 .xls 文件。现在我正在使用`document.execCommand("SaveAs","true","documentname.xls");` ，但对于 Windows XP SP3 上的 IE 7 和 IE 8，没有“另存为”对话框弹出窗口。

我只能使用 HTML 和 JavaScript（没有服务器端脚本），并且文件扩展名必须已经是 .xls 以便用户保存它。（用户以后不能更改文件扩展名）。

我怎样才能做到这一点？

# bash - 通过添加环境变量执行 Shell 脚本

> ID：11680020
> 
> 赞同：1
> 
> 时间：2012-07-27T00:41:09.697
> 
> 标签：bash, shell, unix, hadoop, hive

```
#!/bin/bash
export HIVE_OPTS="$HIVE_OPTS -hiveconf mapred.job.queue.name=hdmi-technology"
export HIVE_AUX_JARS_PATH=/home/hadoop/lib/HiveUDF.jar
hive -S -e 'set mapred.job.queue.name=hdmi-technology'
hive -S -e 'SELECT count(*) from testingtable2' > attachment.txt 
```

每当我尝试像下面那样运行上面的 shell 脚本（count.sh）时，我总是会出错，我不知道我做错了什么，因为我是 shell 脚本的新手，我不确定如何在其中添加环境变量外壳脚本。

```
bash-3.00$ sh count.sh
count.sh: HIVE_OPTS= -hiveconf mapred.job.queue.name=hdmi-technology^M: is not an
identifier 
```

通过在前两行添加环境变量的方式，我在我的 shell 脚本中做错了什么吗？任何帮助将不胜感激。

在我按照以下评论所做的所有更改之后，

```
mv count.sh count, 
chmod +x count, 
./count 
```

每当我尝试直接在提示符中执行此操作时，`export HIVE_AUX_JARS_PATH=/home/hadoop/lib/HiveUDF.jar`它都可以正常工作，但是每当我尝试将其添加到我的问题中提到的 shell 脚本中时，我总是得到 'java.io.FileNotFoundException(File file:/home/hadoop/lib /HiveUDF.jar 不存在，为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:50:50.800

您正在使用`sh`不是 bash 的命令运行 bash 脚本。运行它以`./count.sh`使 shebang 行生效，或者直接说`bash count.sh`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T00:46:28.027

您在 DOS 或 Windows 机器上编辑了 shell 脚本，它使用 CRLF 对 ( `\r\n`) 而不是 Unix 样式的 LF ('\n') 行尾。

是一个故事`^M`——它是一个`\r`回车符。

这应该解决它：

```
tr -d '\r' < count.sh > count.sh.fixed
mv count.sh.fixed count.sh 
```

另外一个选项：

```
sed -i 's/\r//g' count.sh 
```

# mysql - 如何使用 PHP 在数据库中生成随机数而不重复？

> ID：11680025
> 
> 赞同：37
> 
> 时间：2012-07-27T00:41:31.760
> 
> 标签：mysql

我想生成一个在数据库中不重复的 5 位数字。假设我有一个名为**numbers_mst**的表，其字段名为**my_number**。

我想以在 my_number 字段中不重复的方式生成数字。在此允许前面的零。所以像 00001 这样的数字是允许的。另一件事是它应该在 00001 到 99999 之间。我该怎么做？

我可以在这里猜到的一件事是我可能必须创建一个递归函数来将数字检查到表中并生成。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-27T00:47:17.077

```
SELECT FLOOR(RAND() * 99999) AS random_num
FROM numbers_mst 
WHERE "random_num" NOT IN (SELECT my_number FROM numbers_mst)
LIMIT 1 
```

这是做什么的：

1.  使用 RAND() 选择 0 - 1 之间的随机数。
2.  将其放大为 0 - 99999 之间的数字。
3.  只选择表中不存在的那些。
4.  仅返回 1 个结果。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-12-03T14:13:15.480

除了 Tushar 在 numbers_mst 为空时使其工作的答案：

```
SELECT random_num
FROM (
  SELECT FLOOR(RAND() * 99999) AS random_num 
  UNION
  SELECT FLOOR(RAND() * 99999) AS random_num
) AS numbers_mst_plus_1
WHERE `random_num` NOT IN (SELECT my_number FROM numbers_mst)
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-11T13:49:01.187

**注意：**发布的其他解决方案**仅**在列配置为`NOT NULL`. 如果`NULL`，它将不返回任何结果。您可以像这样修复查询：

```
SELECT random_num
FROM (
  SELECT FLOOR(RAND() * 99999) AS random_num
) AS numbers_mst_plus_1
WHERE random_num NOT IN (SELECT my_number FROM numbers_mst WHERE my_number IS NOT NULL)
LIMIT 1 
```

...**`...WHERE my_number IS NOT NULL`**是必要的！

**编辑：**我只想提一下，我故意删除了 inner`SELECT`的表名，因为它似乎没有必要，并且如果表中还没有数据，它似乎会中断？但是，也许这是故意包括在内的？- 请为大家澄清或评论，谢谢。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-15T09:41:55.603

这是在不检查数据库的情况下构建唯一代码生成器的最简单方法，它将节省数据库查询执行时间。

```
function unique_code_generator($prefix='',$post_fix='')
    {
        $t=time();
        return ( rand(000,111).$prefix.$t.$post_fix);
    } 
```

享受，有一个愉快的编码日..

:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-27T00:46:18.493

1.  生成随机数。

2.  检查随机数是否在数据库中。

3.  如果没有，请停止，使用此号码。

4.  转到步骤 1。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-27T00:53:34.037

你有两种方法：

第一个，在其他答案中建议，是创建一个随机数（使用 mt_rand() ）并检查它不在数据库中。如果它在数据库中，请重新生成并重试。如果您要生成一个数字，这是最简单的 - 请参阅代码的其他答案。但是，如果您生成的数字超过 50%，它将非常缓慢且效率低下。

如果您想要很多数字，另一种方法是使用所有记录填充数据库并“选择”一列。运行查询以查找“未选择”的数量，然后找到介于 0 和“未选择”的数字之间的随机数。然后运行 ​​SQL 查询以获取该位置的数字（未选择的位置，在 mysql 中使用 LIMIT）并标记为已选择。有点复杂，如果你只想要几个数字，它的工作量更大，效率更低，但是当你想要获得超过 50%（估计）的数字时会好得多。

注意：您可以通过在本地存储选择的计数并少运行一些查询来提高效率。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-11-13T16:57:23.857

我知道我的回答迟了，但如果有人在未来寻找这个主题，想要一个前导零的随机数，你应该添加这个`LPAD()`函数。

所以你的查询会喜欢

```
SELECT LPAD(FLOOR(RAND()*99999),5,0) 
```

祝你今天过得愉快。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-24T14:08:27.203

以下查询生成从 0 到 99,999 的所有 int，查找目标表中未使用的值并随机输出这些空闲数之一：

```
SELECT random_num FROM (
    select a.a + (10 * b.a) + (100 * c.a) + (1000 * d.a) + (10000 * e.a) as random_num
    from (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as a
    cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as b
    cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as c
    cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as d
    cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as e
) q
WHERE random_num NOT IN(SELECT my_number FROM numbers_mst)
ORDER BY RAND() LIMIT 1 
```

好的，它长、慢且不可扩展，但它可以作为独立查询！您可以添加一个删除更多的“0”（加入a、b、c、d、e）来增加或减少范围。

例如，您还可以使用这种行生成器技术来创建包含所有日期的行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-12T15:44:50.783

```
DELIMITER $$

USE `temp` $$

DROP PROCEDURE IF EXISTS `GenerateUniqueValue`$$

CREATE PROCEDURE `GenerateUniqueValue`(IN tableName VARCHAR(255),IN columnName VARCHAR(255)) 
BEGIN
    DECLARE uniqueValue VARCHAR(8) DEFAULT "";
    DECLARE newUniqueValue VARCHAR(8) DEFAULT "";
    WHILE LENGTH(uniqueValue) = 0 DO
        SELECT CONCAT(SUBSTRING('ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789', RAND()*34+1, 1),
                SUBSTRING('ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789', RAND()*34+1, 1),
                SUBSTRING('ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789', RAND()*34+1, 1),
                SUBSTRING('ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789', RAND()*34+1, 1),
                SUBSTRING('ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789', RAND()*34+1, 1),
                SUBSTRING('ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789', RAND()*34+1, 1),
                SUBSTRING('ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789', RAND()*34+1, 1),
                SUBSTRING('ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789', RAND()*34+1, 1)
                ) INTO @newUniqueValue;
        SET @rcount = -1;
        SET @query=CONCAT('SELECT COUNT(*) INTO @rcount FROM  ',tableName,' WHERE ',columnName,'  like ''',newUniqueValue,'''');
        PREPARE stmt FROM  @query;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
    IF @rcount = 0 THEN
            SET uniqueValue = @newUniqueValue ;
        END IF ;
    END WHILE ;
    SELECT uniqueValue;
    END$$

DELIMITER ; 
```

使用此存储过程，您可以将其与动态值一起使用，例如

```
call GenerateUniqueValue('tablename', 'columnName') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-27T21:29:22.353

我们可以简单地这样做：

```
$regenerateNumber = true;

do {
    $regNum      = rand(2200000, 2299999);
    $checkRegNum = "SELECT * FROM teachers WHERE teacherRegNum = '$regNum'";
    $result      = mysqli_query($connection, $checkRegNum);

    if (mysqli_num_rows($result) == 0) {
        $regenerateNumber = false;
    }
} while ($regenerateNumber); 
```

`$regNum`将具有数据库中不存在的值

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-17T16:24:54.847

很简单，我在那个存储过程中做了MySQL中的代码

它生成8位随机数，并且与数据库中的表唯一。

这个对我有用。

```
CREATE DEFINER=`pro`@`%` PROCEDURE `get_rand`()
BEGIN
DECLARE regenerateNumber BOOLEAN default true;
declare regNum int;
declare cn varchar(255);
repeat
SET regNum      := FLOOR(RAND()*90000000+10000000);
SET cn =(SELECT count(*) FROM stock WHERE id = regNum);
select regNum;
if cn=0
then
SET regenerateNumber = false;
end if;
UNTIL regenerateNumber=false
end repeat;
END 
```

# objective-c - UI控件之间的通信

> ID：11680026
> 
> 赞同：0
> 
> 时间：2012-07-27T00:41:34.333
> 
> 标签：objective-c

假设我有一个 UIViewController (MyViewController) 的子类，它在它自己的视图中，一个 UIImageView (MyImageView) 的子类和一个标准的 UILabel。

在 MyImageView 的代码中，我正在对触摸事件进行一些工作以获取被触摸像素的颜色，并希望使用该内容更新我的 UILabel。由于 MyImageView 和 UILabel 都作为实例存在于 MyViewController 中，有哪些典型的方法可以实现这种通信？

来自 C++ 我会在 MyImageView 中添加这样的东西

-(void)registerMyLabel:(UILabel*)label;

然后在 MyViewController 初始化的某个地方使用上面的方法将 UILabel 实例注册到 MyImageView 中。我确信我可以在这里使用类似的技术，但我想知道......是否有内置机制可以使用 Objective-c 中的 UI 控件执行此操作？

你会如何构建这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:53:42.847

我会让视图控制器完成视图之间的通信工作。

触摸处理是视图的职责还是控制器的职责取决于不同的理念，但假设我们将视图定义为具有颜色检测能力。一旦检测到颜色，`MyImageView`应该通过使用**委托协议**或发布`NSNotification`. 一旦给出了这些信息，控制器就会对标签做任何它需要的事情。

（在许多情况下，我更喜欢通知而不是委托，因为耦合更松散。）

无论如何，如果控制器负责在需要它的其他部分之间传递事件和数据，则它更符合 MVC。

# git - .gitignore 将其添加到已修改的存储库后无法正常工作。

> ID：11680035
> 
> 赞同：1
> 
> 时间：2012-07-27T00:43:27.823
> 
> 标签：git, version-control, github

> **可能重复：**
> [.gitignore 文件未忽略](https://stackoverflow.com/questions/1139762/gitignore-file-not-ignoring)

我检查了一个大仓库并在它上面工作了一天，它创建了很多临时文件。当我克隆 repo 时，我忘记添加 .gitignore 了。所以，现在我看到很多临时文件。我将 .gitignore 添加到根目录。还将相同的规则复制到 /.git/info/exclude。我仍然看到同一组文件。我在做一些愚蠢的错误吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T06:30:12.157

首先删除缓存的内容

```
git rm -r --cached 
```

然后添加并推送

```
git add .

git push 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T00:48:48.963

添加 .gitignore 后，您是否取消跟踪这些临时文件？

来自[github](https://help.github.com/articles/ignoring-files)，

> 请注意，在将规则添加到此文件以忽略它之前，git 不会忽略已经跟踪的文件。在这种情况下，必须取消跟踪文件，通常使用 git rm --cached 文件名

# php - 处理mysql中的特殊字符

> ID：11680039
> 
> 赞同：1
> 
> 时间：2012-07-27T00:43:44.327
> 
> 标签：php, mysql

我有 2 个 mysql 表`property`和`building`. 在`property`表中，我有一个字段，称为`unitnumber`该字段中的值，`1a`等等`2b`。在`building`表中，我有一个名为格式的字段。该值将类似于`address``PHP's` `urlencoded``26+Dovedale+Place%2C+Parnell`

现在我想实现一个搜索功能，这样当用户输入时`1a, 26 Dovedale`我需要从数据库中提取结果。

目前已实施：

```
 $keyword = preg_replace('/[^a-zA-Z0-9-]/', '', $_REQUEST['keyword']);
    $keyword = str_replace(" ", "-", $keyword);
    $a->rqNotEmpty('keyword', $keyword);

    $query = "SELECT * FROM `buildings` b left join properties p on p.buildingId=b.id 
      WHERE concat(p.floor,p.number,b.address) LIKE '%".$keyword."%'
      or concat(p.number,p.floor,b.address)  LIKE '%".$keyword."'"; 
```

但是现在的问题是，当我准备`$keyword`变量时，我会得到类似的东西，并且在值将是类似的东西`1a26Dovedale`之后在数据库中。我无法对 $keyword 进行 urlencode，因为数据库不是标准化的形式。数据库在地址之间有 2 个空格。那么有没有办法mysql 字符串？我在这里处理近 400 万条记录！！`CONCAT``1a26+Dovedale+Place%2C+Parnell``urldecode`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:32:08.747

您可以尝试安装 MySQL UDF（用户定义函数）以在 MySQL 中提供`urlencode()`和`urldecode()`函数。这是链接： http: [//freecode.com/projects/libmysqludf](http://freecode.com/projects/libmysqludf)

# c++ - 如何在 C++ 中处理 Windows 8 Metro 应用程序中的崩溃？

> ID：11680045
> 
> 赞同：3
> 
> 时间：2012-07-27T00:44:47.323
> 
> 标签：c++, windows, debugging, microsoft-metro

在 Metro 应用程序中是否有“标准”方法来处理崩溃？如何创建迷你转储文件？日志记录应该是基于文件的吗？

请提供一些建议或一些帖子/博客。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:00:08.573

处理应用程序崩溃的正确方法就像让应用程序崩溃一样简单。

错误报告将自动生成并稍后在商店中提供，供您分析导致问题的可能原因。更多细节[在这里](http://blogs.msdn.com/b/windowsstore/archive/2012/06/27/improving-apps-with-quality-reports.aspx)。

# python - Python/Cython：将 SciPy 与 Cython 一起使用

> ID：11680055
> 
> 赞同：7
> 
> 时间：2012-07-27T00:46:28.770
> 
> 标签：python, c, statistics, scipy, cython

Cython 教程展示了如何将 Numpy 与 Cython 一起使用的一个很好的示例。但是，我有使用 scipy.stats 包的代码，并且在尝试编译代码时，出现以下错误：

```
dvi.pyx:7:8: 'scipy.stats.pxd' not found 
```

我担心 Cython（？）不支持 scipy。有人可以评论在 Cython 中使用 scipy 或指出一些资源/教程的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T19:30:08.590

所以我在 Cython Google Group 上找到了代码（[https://groups.google.com/forum/?fromgroups#!searchin/cython-users/using$20scipy/cython-users/CF9GqYN1aPU/WKC-N9c6zpgJ](https://groups.google.com/forum/?fromgroups#!searchin/cython-users/using$20scipy/cython-users/CF9GqYN1aPU/WKC-N9c6zpgJ)）

这将以下内容显示为导入：

```
import pylab as PL
from scipy import integrate
from scipy import optimize
from scipy.integrate import odeint

import numpy as np
cimport numpy as np
cimport cython 
```

这让我有信心使用 SciPy 进行编译。添加`cimport cython`语句时，我收到以下编译错误：

```
dvi.c:237:31: error: numpy/arrayobject.h: No such file or directory
dvi.c:238:31: error: numpy/ufuncobject.h: No such file or directory 
```

似乎存在路径或目录问题。事实上我是对的，并且在这个网站上有一个帖子（[我的 Cython 代码解析成 C，但没有编译。第一次尝试使用外部 C 代码](https://stackoverflow.com/questions/6525161/my-cython-code-parses-into-c-but-doesnt-compile-first-time-trying-to-use-exte)）

解决方案是将以下内容添加到我的 setup.py 文件中：

```
import numpy 
...
Extension(..., include_dirs = [numpy.get_include(), ... ] ) 
```

哇！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T21:18:04.910

写

```
import scipy.stats 
```

不是

```
cimport scipy.stats 
```

# c - 找到第一个回文单词的开头

> ID：11680056
> 
> 赞同：0
> 
> 时间：2012-07-27T00:47:05.107
> 
> 标签：c, algorithm, palindrome

找到C中第一个回文单词的开头？
例：`Hello mom and dad, how is it going?`
`mom`是第一个。

最有效的方法是什么？

**char *find_first_palindrome(char *input)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:40:55.110

这是我的解决方案。它可以解决，但可能不是最有效的方法。希望它可以帮助你。

```
int find(char* c)//for single word
{
    int n=strlen(c);
    for(int i=0;i<n/2;i++)
    {
        if (c[i]!=c[n-i-1])
            return false;
    }
    return true;
}

char* findlong (char* lc)//for long sentence
{
    int i;
    char* end=lc+strlen(lc);
    for(;;)
    {
        for( i=0;lc[i];i++)
        {
            if(lc[i]==' ')
            {
                lc[i]='\0';
                break;
            }
        }
        if(find(lc) && !ispunct(*lc))//modified here,add !ispunct(*lc) to make it more robust.
            return lc;

        lc += i+1;
        if (lc>end)     //modified here. add this sentence.
        {
            printf("no word found!\n");
            return NULL;
        }
    }
}

int main()
{
    //test cases
    char b[]="fasdg";
    char c[]="Hello, mom and dad, how is it going?";
    char d[]="Hello , mom and dad, how is it going?";//the single comma won't be returned
                                                     //as a palindrom       

    char* result=findlong(c);
    if (result)
        printf("%s\n",result);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:51:10.590

*逐字获取，如果相等，则仅查看第一个和最后一个字符，然后继续进一步验证，否则继续下一个单词。*

```
main()
{
   string  a =  "Hello mom and dad, how is it going?";
   printf("first_palindrome word = %s",first_palindrome(a));
}

char * first_palindrome(string abc)
{

  for(i=0;i<number_of_words;i++)
  { 
    write logic will send word by  word...
    if(palindrome(word))
    {
       return word;
    }
  }
 return "no_word_found";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T10:01:37.960

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int isPalindrome(const char *str){
    const char *front, *back;
    front=str;
    back =str + strlen(str)-1;
    for(;front<back;++front,--back){
        while(!isalpha(*front))++front;//isalnum?
        while(!isalpha(*back))--back;
        if(front > back || tolower(*front)!=tolower(*back))
            return 0;
    }
    return 1;
}

int main(){
    const char *data="Hello mom and dad, how is it going?";
    char *p, *src;
    p=src=strdup(data);
    for(;NULL!=(p=strtok(p, " \t\n,.!?"));p=NULL){
        if(isPalindrome(p)){
            printf("%s\n", p);
            break;
        }
    }
    free(src);
    return 0;
} 
```

# c# - 用 C# 编写的灵活的语法荧光笔

> ID：11680057
> 
> 赞同：2
> 
> 时间：2012-07-27T00:47:16.057
> 
> 标签：c#, html, xhtml, syntax-highlighting

是否有使用 C# 编写的开源项目，它可以以类似于 shjs 的方式将语法高亮应用于各种语言？

这是一些伪代码：

```
public string HighlightSourceInHTML(string html) {
    return Highlighter.HighlightHTML(html);
} 
```

输入 HTML 将类似于以下内容：

```
<!DOCTYPE html>
<html>
<head>...</head>
<body>
    <p>Here is a function written using C#:</p>
    <pre class="source lang-csharp">public void foo(int a, int b) {
    return a + b;
}</pre>

    <p>Here is the same function written using JavaScript:</p>
    <pre class="source lang-javascript">function foo(a, b) {
    return a + b;
}</pre>
</body>
</html> 
```

上面的内容基本上会返回整个 HTML 文件，其中所有`pre`具有类的元素`source`都在定义源语言的地方突出显示语法

**注意：**这不适用于服务器端脚本，而是性能不太重要的离线应用程序的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:39:31.017

找到一个！我的硬盘上一直有一个，位于名为“ColorizerLibrary.dll”的托管 DLL 中的 Sandcastle Help File Builder (SHFB) 文件夹中。

只需添加对此 DLL 的引用，语法着色就变得非常容易。

这是一个使用示例：

```
ColorizerLibrary.CodeColorizer colorizer = new ColorizerLibrary.CodeColorizer(
    @"C:\Program Files (x86)\EWSoftware\Sandcastle Help File Builder\Colorizer\highlight.xml",
    @"C:\Program Files (x86)\EWSoftware\Sandcastle Help File Builder\Colorizer\highlight.xsl"
);
colorizer.Init();

string htmlText = "<!DOCTYPE html><html><head><title>Test Page</title></head><body><pre codelanguage=\"CSharp\">public string Foo(string a, int b = 4) {\n\treturn a + b * 3;\n}</pre></body></html>";
return colorizer.ProcessAndHighlightText(htmlText); 
```

*注意：请记住链接到 CSS 文件`head`以可视化语法颜色。*

**补充：**请`ColorizerLibrary`从这里找到源代码：http: [//shfb.codeplex.com/SourceControl/changeset/view/98645#1672960](http://shfb.codeplex.com/SourceControl/changeset/view/98645#1672960)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:34:47.417

不完全是你的追求，但它可能会有所帮助。

有用的链接：

[http://hilite.me/](http://hilite.me/)

# ruby-on-rails-3 - Rails 3 + 设计 + ? : 管理员确认的用户创建

> ID：11680059
> 
> 赞同：1
> 
> 时间：2012-07-27T00:47:31.493
> 
> 标签：ruby-on-rails-3, devise, authorization, administration

我已经安装了 Devise 并正常工作。但是，我想在用户注册中添加一个额外的步骤。我希望将电子邮件也发送给管理员/站点管理员，而不是仅将确认电子邮件发送给用户。此外，我将向 User 模型添加一个角色字段。

我希望能够让用户注册，收到一封他们已正确注册的电子邮件，然后管理员还收到一封电子邮件，说明用户已请求访问，然后管理员会给他们一个角色。

我的想法是会有3个角色。未确认用户、已确认用户和管理员。所以未经确认的用户是一个简单注册的用户。确认用户是管理员批准的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:10:58.087

根据 John 的建议，我覆盖了邮件程序中的方法，并能够将电子邮件发送给两个不同的人，但后来我决定这不是我想要的。

相反，我覆盖了 RegistrationsController 中的 create 方法，以便它向 Mailer 发送两次调用。这样请求注册的用户就会收到一封电子邮件，上面写着“酷，你注册了，我们会回复你。” 管理员收到一封电子邮件，内容是“嘿，用户刚刚请求访问”。

# javascript - 如何匹配未用引号括起来的字符串中的特定单词？

> ID：11680063
> 
> 赞同：0
> 
> 时间：2012-07-27T00:47:47.760
> 
> 标签：javascript, regex

作为一个例子，我有这个字符串： aaa bbb "aaa bbb ccc" bbb "ddd"

我想匹配 bbb，但前提是它不在使用正则表达式的引号内。

有人有想法吗？

**更新**

我想我应该更具体一些，我会修改我的例子：

假设我有一个 html 标签，我希望获取一个属性及其值：

```
<input type="text" id="textbox" myattr="myvalue" name="myattr test" /> 
```

我需要匹配单词的 myattr 和 myvalue，但只有当 myattr 没有被引号包围并且 myvalue 绝对是 myattr 的值时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:51:50.267

试试这个： "[^b"] *(bbb)[^"]* " ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:59:19.937

匹配引用的段落，或`bbb`，然后检查你得到了什么。

```
var s = 'aaa bbb "aaa bbb ccc" bbb "ddd"';

var s = s.replace(/("[^"]*"|bbb)/g, function(m){
    if (m == 'bbb') {
        return "xxx";
    } else {
        return m;
    }
});

alert(s); 
```

演示：http: [//jsfiddle.net/Guffa/Q4gB8/](http://jsfiddle.net/Guffa/Q4gB8/)

（如果`bbb`未知（本身是正则表达式），您可以检查引号。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T01:58:23.053

为什么你不能只`attr('myattr')`在你的`input`元素上使用？

查看[示例 jsfiddle](http://jsfiddle.net/5qtc2/1/)；

另外，我建议研究以下内容：

*   [HTML 5 Shim](http://ejohn.org/blog/html5-shiv/)（又名“HTML 5 Shiv”——见[历史](http://paulirish.com/2011/the-history-of-the-html5-shiv/)）
*   [HTML 5 样板文件](http://html5boilerplate.com/)。
*   [今天使用 HTML5 语义元素](http://www.nczonline.net/blog/2011/03/22/using-html5-semantic-elements-today/)

当其他人已经准备好代码供您使用时，为什么要重新发明轮子？

# java - 本地引用和字段引用内存分配

> ID：11680067
> 
> 赞同：2
> 
> 时间：2012-07-27T00:48:12.053
> 
> 标签：java

一个对象可以包含对其他对象的引用。如果将这些引用声明为类/字段变量，那么当对象本身在堆上创建时，字段引用表示的值将存储在堆上。

所以，如果我有

```
public class A {
    int size;
} 
```

*   我知道如果 size 得到一个 int 值，`2`那么它作为对象的一部分存储在堆上，但是引用（即存储的名称大小）在哪里？
*   是名称“大小”也存储在堆上的对象内部。
*   `size == 2`JVM如何在堆上交叉引用？
*   当你加载它在主线程中运行的类时，每个线程都有自己的堆栈。所以这些字段引用不是在主堆栈上创建的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:00:36.197

> 名称“大小”存储在哪里？

字段的名称存储在 Class 对象`A.class`中。您可以使用该[`java.lang.reflect`](http://docs.oracle.com/javase/6/docs/api/index.html?java/lang/reflect/package-summary.html)库检查类字段名称。

例如，要检查一个类的所有字段，请执行以下操作：

```
for (Field field : A.class.getFields()) {
    String fieldName = field.getName();
    Class<?> fieldClass = field.getType();
    // etc
} 
```

> 名称“大小”是否也存储在堆上的对象内部？

不，它存储在`permgen`内存中

> 堆上的 JVM 交叉引用大小 == 2 如何？

它在编译时查找该字段，其余的发生在字节码中

> 字段引用不是在主堆栈上创建的吗？

不。除了堆和堆栈之外，还有更多的内存区域，还有 permgen，其中存储了类定义和类字段。还有更多的内存区域，例如垃圾收集器。

# android - Android 应用程序 UI 设计说明

> ID：11680071
> 
> 赞同：0
> 
> 时间：2012-07-27T00:49:10.533
> 
> 标签：android, android-layout, user-interface, android-ui

我最近开始设计一个类似于 Google Offers 的新 android 应用程序。我希望设计一个类似于 Google Offers 的用户界面。我试过查看 Horizo​​ntalScrollView 和 ViewFlipper。两者都没有给我在谷歌优惠中看到的跨视图移动的效果。任何人都知道 Google Offers 中会使用哪种设计模式。我倾向于水平滚动视图，但我无法获得相同的效果，是否有我遗漏的东西。我将不胜感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:03:16.970

你正在寻找[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html).

以下是一些关于`ViewPager`使用选项卡实现的示例：

*   [http://blog.peterkuterna.net/2011/09/viewpager-meets-swipey-tabs.html](http://blog.peterkuterna.net/2011/09/viewpager-meets-swipey-tabs.html)
*   [http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)
*   [http://viewpagerindicator.com/](http://viewpagerindicator.com/)（不是教程，有点扩展库）

我还将研究[ActionBarSherlock](http://actionbarsherlock.com/) （下载文件夹中甚至还有一个`ViewPager`教程）以及在Android 3.0 以下使用s（的一部分）的[兼容性库。](http://developer.android.com/tools/extras/support-library.html)`demos``Fragment``ViewPager`

# nginx - 如何配置 nginx 从不同的文件夹加载 try_files？

> ID：11680072
> 
> 赞同：10
> 
> 时间：2012-07-27T00:49:10.120
> 
> 标签：nginx

我需要一些帮助来配置 nginx 以从不同的文件夹加载文件。这是我的配置：

```
index index.php;

server {
    server_name domain.com;
    root /www/domain.com/www/;

    location / {
            try_files $uri $uri/ /php_www/index.php;
    }

    location ~ \.php$ {
            try_files $uri =404;
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_index /php_www/index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_script_name;
            include /etc/nginx/fastcgi_params;
    }

    error_page  404  /404.html;

    error_log /var/log/nginx/error.log;

} 
```

问题是 /php_www/ 不在 nginx 中定义的根目录内。

我需要使用 4 个不同的文件夹来执行此操作，这是我的文件夹结构的样子：

```
/www/domain.com/www/
/www/domain.com/php_www/
/www/domain.com/content1/
/www/domain.com/content2/ 
```

例如，我想要做的是当访问者访问`domain.com/page1/content1/`我想从 content1 文件夹加载内容时。这样做的原因是我有几个带有单独存储库的 git 项目......这将使我能够将网站的某些区域推向生产，而不会影响其他任何东西。我也不想在 /www 文件夹中访问我的所有文件/内容，因此 url 不能被蛮力攻击，寻找内容。

希望这是有道理的！

# [工作解决方案（从此](https://stackoverflow.com/questions/11680072/how-do-i-configure-nginx-to-load-try-files-from-a-different-folder#comment15504977_11680573)评论中提取）

```
location ^~ / { 
    root /www/domain.com/php_www/; 
    try_files $uri $uri/ /index.php; 
    location ~* \.(?:php|html)$ { 
        try_files $uri =404; 
        fastcgi_pass 127.0.0.1:9000; 
        include /etc/nginx/fastcgi_params; 
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T02:12:46.413

你可以使用[`root`](http://nginx.org/r/root)里面的指令[`location`](http://nginx.org/r/location)。

# jquery - jQuery 问题适用于 HTML，但不适用于 Wordpress 主题

> ID：11680073
> 
> 赞同：0
> 
> 时间：2012-07-27T00:49:12.297
> 
> 标签：jquery, jquery-plugins

我在使用 Bubble Maker 插件时遇到问题...

它在这里工作[http://travisjterry.com/bubble.html](http://travisjterry.com/bubble.html)

但它不会在这里工作...... [http://travisjterry.com/waterworks2/](http://travisjterry.com/waterworks2/)

谁能指出我在这里所缺少的正确方向？

提前感谢特拉维斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:18:54.977

页面在 ($) 上出现错误

WP 以“无冲突”模式加载 JQuery，因此 ($) 快捷方式不可用，您需要使用 jQuery() 代替，例如

这个：

```
$('.item').click(function() {

}); 
```

对此：

```
jQuery('.item').click(function() {

}); 
```

或者您可以通过执行以下操作来使用自己的替代品：

```
var $jq = jQuery.noConflict(); 
```

然后这将用 $jq 替换 jQuery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:27:04.800

我不知道 WP 是这样做的，但我也不是一个大的 Javascript 人......

这是否意味着我也需要在插件 jquery-BubbleEngine.js 中将其更改为它自己`$`？`jQuery`

所以这 -

```
(function($){
  $.fn.extend({ 
```

变成这个

```
(function(jQuery){
 jQuery.fn.extend({ 
```

和这个

```
 $(document).ready(function() { 
```

对此

```
 jQuery(document).ready(function() { 
```

# c++ - 如何将哈希函数输出映射到布隆过滤器索引？

> ID：11680074
> 
> 赞同：10
> 
> 时间：2012-07-27T00:49:13.607
> 
> 标签：c++, database, algorithm, bloom-filter

任何人都可以通过提供有关如何将哈希函数输出映射到布隆过滤器索引的大纲来帮助我吗？这是[bloomfilters](http://en.wikipedia.org/wiki/Bloom_filter)的概述。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T01:19:29.900

> 关于如何将哈希函数输出映射到布隆过滤器索引的概述

对于使用的每个*k*个哈希函数，它们映射到布隆过滤器中的一个位，就像哈希映射到哈希表中的哈希桶一样。因此，通常您可能会说生成 32 位整数的哈希函数，然后使用模数`%`运算符来获取位索引`0 << i < n`，其中`n`是布隆过滤器中的位数。

为了使这一点非常具体，假设哈希函数生成从 0 到 2^32-1 的数字，并且布隆过滤器中有 1000 位：

```
int bit_index = hash_function(input_value) % 1000; 
```

重要的是要注意 2^32-1 大大大于 1000。假设哈希函数生成了相当均匀分布的数字，但仅在 0 和 1023 之间（含），那么在模运算之后，bit_index 的可能性会增加一倍与 24..999 相比，在 0..23 范围内（因为例如输入 2 和 1002 都导致后模值 2，但只有输入 25 会产生输出 25）。出于这个原因，如果您有一个生成 32 位的散列函数，您可能希望使用一个布隆过滤器，其大小为 2 的幂的位数，然后切出散列值的部分以像独立散列函数一样使用- 所有在您链接的维基百科文章中都有解释。不过，这需要一个高质量的散列函数，因为任何“聚类” 散列函数中的缺陷将直接传递到输出；具有质数位是减轻这种不良散列的一种方法。尽管如此，对于良好的散列函数，2 的幂也可以很容易地使用按位与运算和 - 如果需要 - 位移来提取位索引，这可能比整数模数更快，尽管散列函数可能会使这种考虑相形见绌整体性能概况。

编辑 - 解决评论...

假设您的 MD5 函数将`unsigned char*`“p”返回到`MD5_DIGEST_LENGTH`数据字节，我建议您尝试：

```
BOOST_STATIC_ASSERT(MD5_DIGEST_LENGTH >= sizeof(int));
int bit_index = *reinterpret_cast<unsigned int*>(p) % num_of_bloom_filter_bits; 
```

这实际上是*一个特别糟糕的主意*——抱歉——我稍后会解释两个原因。首先，回答你关于它的作用的问题：`BOOST_STATIC_ASSERT()`如果它传递的表达式的计算结果为 ，则设计为给你一个编译错误`false`。在这里，它基本上是一种记录要求的方法`MD5_DIGEST_LENGTH`——即 MD5 散列的文本表示的字符大小——至少与系统用于`int`整数类型的字节数一样长。（该大小可能是 4 个字节，但也可能是 8 个字节。）该要求旨在确保`reinterpret_cast`下一行中的 the 是安全的。这样做是从 MD5 散列的文本表示开头的字节中读取一个值，就好像这些字节包含一个`int`. 因此，假设您的`int`大小*为*4，MD5 哈希为“0cc175b9c0f1b6a831c399e269772661”，如您的评论所示：前 4 个字节包含“0cc1”。该文本的 ASCII 代码是十进制的 48、99、99、49。当它们被读`int`入时，取决于 CPU 的字节序，值可能会有所不同，但基本上你会得到其中一个数字乘以 256^3 再加上一个乘以 256^2 再加上第三个乘以 256 加上最终数字.

我说这是一个特别糟糕的主意的原因是：

*   MD5 字符串中的每个字符要么是数字（ASCII 码 48-57），要么是从“a”到“f”（97-102）的字母。这 16 个值只是一个字节可以具有的变化的 16 分之一，虽然`int`您生成的值占用 32 位，但您实际上只能得到 2^16 个不同的值。
*   在某些计算机上，`int`s 必须与 2、4、8 等倍数的内存地址对齐。`reinterpret_cast`- 如果文本碰巧从不兼容的地址开始，可能会使您的计算机崩溃。注意：英特尔和 AMD 没有这样的对齐要求，尽管它们对正确对齐的数据进行操作可能会更快。

所以，另一个建议：

```
// create a buffer of the right size to hold a valid unsigned long in hex representation...
char data[sizeof(unsigned long) * 2 + 1];

// copy as much of the md5 text as will fit into the buffer, NUL terminating it...
sprintf(data, "%.*s", sizeof data - 1, md5);

// convert to an unsigned long...
m = strtoul(data, /*endptr*/ NULL, /*base*/ 16); 
```

在这里，如果 md5 表示比数据缓冲区短，则只会安全复制它的初始部分，因此不需要 BOOST_STATIC_ASSERT。

使用非加密哈希函数要容易得多，因为它们通常只会返回一个数字而不是数字的可读文本缓冲区表示，因此您可以避免所有这些废话。

# javascript - Internet Explorer 10 忽略 CSS 'overflow:auto' 样式

> ID：11680075
> 
> 赞同：0
> 
> 时间：2012-07-27T00:49:20.893
> 
> 标签：javascript, jquery, html, css, internet-explorer

我在 IE10 上遇到了这个奇怪的问题。我有一张桌子，并且在其中一个单元格中有一个 UI 小部件（jqTree）。现在，这个树视图可以填充大量数据，所以我想修复它在屏幕上占用的大小。我还需要让用户滚动到树视图的任何部分。这在 Chrome 上效果很好，但在 IE 10 上根本不行。

```
 <td style="vertical-align:top">
        <div class="HiddenInput" style="visibility:hidden">
            <div style="overflow:auto; width:350px; height:750px; border-style:solid">
                <div id="TreeView"></div>
            </div>
        </div>
    </td> 
```

最外面的 div 只是隐藏树视图，直到我收到数据。在 IE10 中，当我填充树视图时，如果它完全忽略了它上面的 div 设置的边界，就好像它不存在一样，即使 div 的边框清晰可见。

我在某处读到 IE 需要 DOCTYPE 标签，但这并没有解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:08:47.127

所以我想通了。IE10 默认以 IE7 标准模式呈现我的页面。迁移到 IE8/9/10 解决了这个问题。

因此，如果您想确保您的页面以最新版本的 IE（或特定版本）呈现，请尝试使用：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

此处有关此元标记的更多详细信息：

[http://www.nczonline.net/blog/2010/01/19/internet-explorer-8-document-and-browser-modes/](http://www.nczonline.net/blog/2010/01/19/internet-explorer-8-document-and-browser-modes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:17:35.027

尝试这个：

```
<td style="vertical-align:top">
    <div class="HiddenInput" style="display:none">
        <div style="overflow:auto; width:350px; height:750px; border-style:solid">
            <div id="TreeView"></div>
        </div>
    </div>
</td> 
```

并在树视图填满后，更改显示属性：

```
 <div class="HiddenInput" style="display:block;"> 
```

# python - 嵌套循环、迭代器和 csv

> ID：11680076
> 
> 赞同：2
> 
> 时间：2012-07-27T00:49:47.937
> 
> 标签：python, excel, csv, nested-loops

这是两个编码风格问题合二为一。我有一个 tab-dl'd 文件，其中“对象”用空行分隔。“对象”的第一行是 ID。直到空白行的剩余行是属于该对象的事物。我想将其解析为如下哈希：

```
f = open(someFile, 'rb')
c = csv.reader(f, delimiter = "\t", quoting = csv.QUOTE_NONE)
thingstore = {}

try:
    for row in c:
        title = row[0]
        thingstore[title] = set()
        item = map(fixStupidExcelCrap, c.next())
        while ''.join(item).strip() != '':
            thingstore[title].add(tuple(item))
            item = map(fixStupidExcelCrap, c.next())
except StopIteration:
    pass

f.close() 
```

我认为这个解决方案有几件事是丑陋的。首先，在整个函数周围放置 try 块似乎是在询问问题，因为可能无法检测到格式不正确的文件。一种替代方法是将每个 next() 调用包装在 try 块中并设置一个标志以退出外部循环，这也看起来很 hacky。

其次，`while ''.join(item).strip() != '':`非常难看。有没有更好的方法来测试由 csv 模块解析的空行？

**更新：**

我错过了一个影响空行测试的细节。您可能已经猜到了，该代码正在解析从 Excel 导出的制表符分隔文件。在这种情况下，空行的有趣之处在于它们并不是真正的空行——*文件中的所有行都有相同数量的制表符。*因此，如果您在 excel 文件中有 3 列，则导出的制表符分隔文件中的空行将包含 2 个制表符，csv 会将其`['', '', '']`解析`bool`为`True`.

所以 wrt Ignacio 的更漂亮的答案是`for row in itertools.takewhile(bool, c):`行不通的，因为它会占用文件的其余部分，包括空行和 ID 行。`for row in itertools.takewhile(lambda x: ''.join(x).strip() != '', c):`确实有效，但我们又回到了我试图避免的丑陋（strip() 可能不是必需的，但为了安全起见，我把它放进去）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:04:04.063

布莱赫。空行导致空列表。

```
with open(...) as fp:
  c = csv.reader(fp)
  while True:
    try:
      title = next(c)[0]
      obj = set()
      store[title] = obj
    except StopIteration:
      break
    for row in itertools.takewhile(bool, c):
      obj.add(tuple(row)) 
```

# javascript - 如何以变量的值命名函数？

> ID：11680078
> 
> 赞同：0
> 
> 时间：2012-07-27T00:49:58.147
> 
> 标签：javascript, image, html, loading

我有一个功能可以让您加载新图像。我希望该函数创建一个函数来检测该图像何时加载，并将其存储在数组或对象中。我有另一个函数将遍历数组或对象，并检查每个函数是否已加载。

我的问题是，如何将每个新函数添加到数组中，并让每个函数返回它设置检查的图像是否已加载？

** 编辑 **

我想将名称传递给加载图像的函数，加载`'images/'+name+'.png'`然后将该名称作为键的名称传递给数组或对象。

**回复Shawn31313：这是我所拥有的基本知识：

```
var resources = {
    // I have other stuff to load here
    'newImg': function(name) {
        if (name) {
            var img = new Image();
            img.src = 'images/' + name + '.png';
            imgLoadingArray[name] = function () {
                var loaded = false;
                // detect image loading some how
            }
        }
    },
    'imgLoadingArray': {},
    'loaded': function() {
        var loaded = true;
        for (each in game.resources.imgLoadingArray) {
            if (each == 'false') {
                loaded = false;
            }
            return loaded;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:28:08.727

在我看来，您只需要在图像上设置一个在数组或对象中设置值的 onload 侦听器。如果每个图像都有一个唯一的名称，那么：

```
var imageLoaded = {};

...

'newImg': function(name) { 
    if (name) { 
        var img = new Image(); 
        img.src = 'images/' + name + '.png';
        img.name = name;
        imageLoaded[name] = false;
        img.onload = function() {imageLoaded[this.name] = true;};
        ...
     }
  },
  ... 
```

未经测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T00:53:10.740

您可以创建字典：

```
var actions = [];

function createAction(name) {
 actions[name] = function() {alert('Hi from:'+ name);};
}

createAction('hello world');

actions['hello world'](); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:10:33.157

我刚刚意识到......为什么有一个变量呢？只需将整个东西放入一个对象中即可加载！

```
var resources = {
    // load some other stuff
    'newImg': function(name) {
        if (name) {
            game.resources.imgLoading[name] = new Image();
            game.resources.imgLoading[name].src = 'images/' + name + '.png';
            game.resources.imgLoadedCheck[name] = false;
            game.resources.imgLoading[name].onload = function() {game.resources.imgLoadedCheck[name] = true;};
        }
    },
    'imgLoading': {},
    'imgLoadedCheck': {},
    'loaded': function() {
        var loaded = true;
        for (each in game.resources.imgLoadingArray) {
            if (each == 'false') {
                loaded = false;
            }
            return loaded;
        }
    }
}; 
```

# php - 使用计数器和数组在循环中多次获取

> ID：11680079
> 
> 赞同：4
> 
> 时间：2012-07-27T00:50:20.803
> 
> 标签：php, mysql, loops, pdo, fetch

我在循环中使用带有 PDO 的 bindParam() 执行准备好的查询时遇到问题。基本上我要做的是遍历一个数组，并使用每个数组元素从数据库中返回数据。现在我意识到 ->bindParam() 应该将变量绑定到查询，但是这如何与数组一起使用？因为我似乎无法让它工作：S

到目前为止，这是我的代码：

```
<?php
    $i = 0;
    $statement = $conn->prepare("SELECT * FROM users WHERE id = :id");
    $statement->bindParam(":id", $friendListIDs[$i], PDO::PARAM_STR);
    $friendListIDs = explode($details['friends'], " ");
    while($i <= count($friendListIDs))
    {
          $statement->execute();
          $row = $statement->fetch();
          echo "<img src='../img/friend_icon.png' alt='' align='left' />
                <span>
                <a href='#'>".$row['firstname']." ".$row['surname']."</a>
                <br />
                <a href='#'>100% wishes fulfilled</a>
                </span><br /><br />";
                $i++;
    }   
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:53:56.053

而不是使用`bindParam`，您可以添加一个数组参数，`$statement->execute`如下所示：

```
$statement->execute(array(":id"=>$friendListIDs[$i])); 
```

# c# - Telerik MVC Grid Ajax 手动绑定

> ID：11680081
> 
> 赞同：4
> 
> 时间：2012-07-27T00:50:38.450
> 
> 标签：c#, ajax, asp.net-mvc-3, telerik-grid

我有一个 Telerik MVC Grid 使用 ajax 来获取数据，我想控制它何时加载。

这是我认为的代码：

```
@(Html.Telerik().Grid<ViewModels.Reports.UserActionLoggingDetailViewModel>()
          .Name("UserActionLoggingFollowedGrid")
          .DataBinding(dataBinding => dataBinding.Ajax().Select("SelectUserActionLogging", "Report", new { userTeamId = Model.UserTeamId, startDate = Model.StartDate, endDate = Model.EndDate }).OperationMode(GridOperationMode.Client))
          .Columns(columns =>
                      {
                         columns.Bound(x => x.FullName).Hidden();
                         columns.Bound(x => x.ActionName);
                         columns.Bound(x => x.ActionCount);
                      })
          .Pageable(page => page.PageSize(20))
          .Sortable()
          .Groupable(grouping => grouping.Groups(groups => groups.Add(c => c.FullName)).Visible(false))
          .Filterable()
          .Localizable("fr-FR")
          .HtmlAttributes(new { @class = "grid-style static-grid-style" })
          .ClientEvents(e => e.OnError("Grid_onServerError").OnDataBinding("Grid_onDataBinding").OnDataBound("Grid_onDataBound"))
        ) 
```

默认情况下，此代码可以正常工作。加载页面时，网格会自动向服务器发送一个 post 请求以执行指定的操作，并使用返回的数据加载自身。

我想要的是具有相同行为但在加载页面时不加载数据的相同网格；我希望在用户单击按钮或任何其他操作时加载网格。

我发现了一些有趣的帖子，说明如何手动刷新网格，但没有人指定如何防止网格的初始绑定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:17:59.880

这件小作品对我有用。添加一个数据绑定客户端事件（显然您已经拥有）：

```
.ClientEvents(events => events
    .OnDataBinding("preventAjaxSelectOnPageLoad")) 
```

然后创建添加这个javascript：

```
<script type="text/javascript">

    var gridsToBind = [];

    function preventAjaxSelectOnPageLoad(e)
    {
        if ($.inArray(e.target.id, gridsToBind) == -1)
        {
            e.preventDefault();
            gridsToBind.push(e.target.id);
        }
    }
</script> 
```

基本上，您创建一个数组来跟踪需要绑定的网格。当页面加载时，数组将为空——此时，它取消数据绑定事件并将网格添加到数组中。那么下次调用ajaxRequest()时，grid就存在于数组中，可以正常绑定了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:13:14.240

我认为您可以为网格的 DataBinding 或 DataBound 事件添加一个处理程序，并检查它是否是那里页面的第一次加载。如果是这样，请使用 e.preventDefault() 以避免调用服务器。

其他选项可能是从 Grid 声明中删除 ajax 绑定，并使用[dataBind 方法自行完成](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#dataBind)

# excel - 数据透视表仅显示值在范围内的行

> ID：11680082
> 
> 赞同：0
> 
> 时间：2012-07-27T00:50:39.013
> 
> 标签：excel, filter, pivot-table

我有一个 CSV 报告，其中包含 30 天内（30,000 行）每天 1000 个用户的日期、用户和带宽字段。我将这些加载到数据透视表中，因此日期是列，用户是行，带宽是“总列值排名”的值。

我想过滤表格，使其仅显示在 30 天范围内至少有 1 个前 50 名 (1-50) 的用户。

我已经尝试对行和列使用过滤器选项，但我似乎无法执行此过滤器。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:26:06.007

您可以将一些列添加到确定过滤器的源数据中。使用下面的公式，在 UseInFilterCol 中的数据透视表中筛选为 TRUE。

TotalUserBandwidthCol

```
=SUMIF(UserCol, UserVal, BandwidthCol) 
```

UserBandwidthRankCol

```
=RANK(TotalUserBandwidthVal, TotalUserBandwidthCol) 
```

UseInFilterCol

```
=UserBandwidthRankVal <= 50 
```

# mysql - 将逗号插入到 MYSQL 中的文本块中

> ID：11680083
> 
> 赞同：0
> 
> 时间：2012-07-27T00:50:49.690
> 
> 标签：mysql, csv

现在，我正在使用一个文本文件，该文件恰好包含所有数据，如下所示`string`：`AB005103012ES-** OF**MID115748607.83`

但是，我需要将其上传到`MYSQL`数据库，因此理想情况下，翻译后的格式将使用逗号分隔代码，如下所示：

```
AB00,51,0301,2,ES-**,  ,O,F,**,M,I,D,1,157486,07.83 
```

我正在处理大约 1400 万行，逗号每次都会出现在同一个字符位置。因为第一个逗号出现在每行的第 4 个字符之后，第二个逗号出现在每行的第 6 个逗号之后，依此类推。

有什么方法可以在`MYSQL`另一个可以轻松运行的简单程序中快速实现这一目标或失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:55:40.920

您可以将 INFILE 与 SUBSTR（子字符串）命令一起使用。

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

> 要加载具有固定宽度列的文本文件，我使用了以下形式：

```
LOAD DATA LOCAL INFILE '<file name>' INTO TABLE <table>
(@var1)
SET Date=str_to_date(SUBSTR(@var1,3,10),'%m/%d/%Y'), 
Time=SUBSTR(@var1,14,8), 
WindVelocity=SUBSTR(@var1,26,5),
WindDirection=SUBSTR(@var1,33,3),
WindCompass=SUBSTR(@var1,38,3),
WindNorth=SUBSTR(@var1,43,6),
WindEast=SUBSTR(@var1,51,6),
WindSamples=SUBSTR(@var1,61,4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:02:41.850

我会在记事本++中运行一个简单的宏

# ruby-on-rails - Rspec+capybara 请求规范：使用不可见按钮测试表单提交：使按钮不可见的最佳方法？

> ID：11680090
> 
> 赞同：0
> 
> 时间：2012-07-27T00:51:41.040
> 
> 标签：ruby-on-rails, capybara

我的应用程序上有一个单文本字段表单。我不想要一个可见的提交按钮（用户必须点击“输入”才能提交）。我知道您仍然希望该按钮可访问，因此我将其移出屏幕。

我正在用 Capybara 进行测试。当我`click_on my-button`，它给了我这个错误：

```
Failure/Error: click_on "gimme-your-cc"
 Selenium::WebDriver::Error::MoveTargetOutOfBoundsError:
   Element cannot be scrolled into view:[object HTMLInputElement] 
```

该特定规范是在一个`js: true`块内完成的，因此它使用 webdriver 和 firefox。

有没有测试提交该按钮的好方法？使它成为按钮`display:hidden`也不起作用，我认为该解决方案无论如何都不是很容易获得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T17:31:16.840

一个好的解决方法是使用 javascript：

```
page.execute_script("$('#submit_id').click();") 
```

# xml - UPS 包裹追踪 API——如何不暴露密码？

> ID：11680091
> 
> 赞同：5
> 
> 时间：2012-07-27T00:51:47.997
> 
> 标签：xml, api, tracking, ups

似乎与每个 XML 请求一起发送是使用 UPS Tracking API 的唯一方法：

```
<?xml version="1.0" ?>
<AccessRequest xml:lang='en-US'> <AccessLicenseNumber>
YOURACCESSLICENSENUMBER
</AccessLicenseNumber> <UserId>
YOURUSERID
</UserId> <Password>
YOURPASSWORD
</Password> </AccessRequest> 
```

所以基本上你不能在桌面应用程序中使用它，因为你的用户可以找到你的密码。是的，我可以在自己的服务器上运行一个后端，但这太复杂了。UPS 是否提供了一种无需在我的应用程序的每个副本中都放置密码副本的可靠方式来进行身份验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:43:17.287

如果您想直接访问 UPS api，而不是通过您自己的服务器，那么您不能。UPS 提出对 api 密钥和密码的要求是有原因的：对 api 的使用方式进行一些控制（例如，必要时限制对 api 密钥的请求）。即使您决定可以让陌生人访问您的 api 密钥和密码，它也很可能会被撤销（我很确定您不允许共享这些）。所以使用api是不可能的。

作为替代方案，您可以尝试在他们的网站上使用公共跟踪（无 api）获取跟踪信息，但您可能会达到每个 IP 请求限制、csrf 令牌等，并且如果页面以任何方式更改，您会被搞砸。不是一个好主意。

简单的应用程序与否，您必须在服务器上运行其中的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:50:15.167

如果不在您的服务器上运行它，真的没有办法做到这一点。但是，既然您希望您的应用程序提供跟踪信息，那么您可以做的就是为什么不在默认 Web 浏览器中打开该信息。这可行吗？

如果是这样，看看这个：http: [//oreilly.com/pub/h/4106](http://oreilly.com/pub/h/4106)，（看逻辑而不是实现）

# c# - 客户端断开连接时检测并写入

> ID：11680094
> 
> 赞同：1
> 
> 时间：2012-07-27T00:52:33.433
> 
> 标签：c#, sockets, client-server, disconnect

我正在用 C# 编写一个简单的客户端/服务器应用程序。如您所见，代码中有 if(cSocket.Connected) 标记，我想要类似的东西...如果 cSocket 断开连接...我将给出代码，您可以从标题和我的解释中理解我的问题.. .

这是代码；

服务器;

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.IO;

namespace ConsoleApplication1
{
class Program
{
    static void Main(string[] args)
    {
        TcpListener sSocket = new TcpListener(System.Net.IPAddress.Any, 3162);
        int Counter = 0;
        Console.ForegroundColor = ConsoleColor.Green;
        Console.WriteLine("\n >> Server Started!");
        sSocket.Start();
        while (true)
        {
            Socket cSocket = sSocket.AcceptSocket();
            NetworkStream NetworkStr = new NetworkStream(cSocket);
            BinaryReader bReader = new BinaryReader(NetworkStr);
            BinaryWriter bWriter = new BinaryWriter(NetworkStr);
            IPEndPoint remoteIpEndPoint = cSocket.RemoteEndPoint as IPEndPoint;

            if (cSocket.Connected)
            {
                Counter = Counter + 1;
                Console.ForegroundColor = ConsoleColor.Yellow;
                Console.WriteLine("\n >> Client Connected! ~ Total: " + Counter + " ~ [" + remoteIpEndPoint + "]");
                bWriter.Write("\n >> Server Says: You Connected to Me!");
            }
        }
    }
 } 
```

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:39:01.663

我对 .NET 的东西不太熟悉，但理论上应用程序和协议（包括 TCP/IP）有某种超时等待。就像在 TCP/IP 协议家族中一样，一方在发送包后等待另一方一段时间，如果他没有得到答案，他会再次尝试和/或在一段时间后关闭连接。

简而言之，您可以定期发送一个小请求并检查客户是否回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:46:18.083

正如 Opi 所说，这样的事情会做到（它来自 StackOverFlow 中的另一个答案）：

```
 public static bool SocketConnected(Socket s)
        {
            if (!s.Connected) return false;
            bool part1 = s.Poll(1000, SelectMode.SelectRead);
            bool part2 = (s.Available == 0);
            if (part1 & part2)
                return false;
            return true;
        } 
```

# css - 使用媒体查询检测 iPad / iPhone

> ID：11680095
> 
> 赞同：0
> 
> 时间：2012-07-27T00:52:38.580
> 
> 标签：css, media-queries

我正在做一个项目，我需要使用媒体查询区分 iPhone、iPad 的横向和纵向模式。另外，我正在使用 iPad 3、iPhone 4s。这听起来简单明了，但我很难让它发挥作用。我最接近的是：-

```
@media (min-device-width: 768px)
and (max-device-width: 1024px)
and (orientation: portrait) {
/*iPad portrait*/
}

@media (min-device-width: 768px)
and (max-device-width: 1024px)
and (orientation: landscape) {
/*iPad landscape*/
}

@media (max-device-width: 480px)
and (orientation: portrait) {
/*iPhone portrait*/
}

@media (max-device-width: 480px)
and (orientation: landscape) {
/*iPhone landscape*/
} 
```

但是，这并不能区分 iPhone 的纵向/横向模式。关于什么可能是错的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:01:29.667

下面是一些示例代码，用于演示 iPhone 上的功能查询。纵向为白色，横向为黑色。您可以忽略 base64 部分，这只是提供一个图标而不需要外部文件：

```
<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAA5CAYAAACMGIOFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAFLlJREFUeNpsm1uUFeWVx39713kZgW4waw0jF3WQixJEEQURwUTNZEbxMgrGRFFBNDEBRUSTiVkxzigIQwhqRLNmIqBOxDsgEBVNuBgMOIjGdEA0kyAN+ATdXPJE7T0P36XqtDacrjp16lTV/9v3/94tv3r2BUcAJ22afkQEAUQUJLxXEUQFQRAREEHiZyICCCoQvlBdI73PPx4OOYB7OOCC4/Gt4ziYY4C7gzsWz3WL+/kYuBueQAiIQyPdrA5QKoTx4RWNDy9aPwakz9ICILiGbfj/BUBrS+m1HSc9qEeAgkegRQRuDurgHhCohHPxABpRBA/XiNdv8AU/TiWV/NIIUgRVQdAMWEWzRJMEg+CTlCNAAbyrNJsBJ1B43HfHhSwtdWs6bg4YKOAKFhcnXC9cu9F1bSUCJKolGZQgqhmwRqlql4UI4KlUVsJ366obgEVd6ipFi/sejrgZjmMOhYG5BoDmuFSiLc0QQFGM5us26GqHIqAEEPHhs6Q07tdAhn3NgLPkhAA4AkvaAY4Q7DtgdcQlaFwUSZBUtK+gqIg5rkFsbh6BO6qGG6hqVFdDTTACaOuqrlKzq6CKgkhSy/DAmqUXgdXPy4sSpZ6MPzskmqw+a1C2H81q6ckJaZCmSbSzKB0XR8wwD5JTdwzL5qAimIEkSQbNSd6SJgkSAaqAaJFBalZdrexUgrqq1tWdKDmvbDS51Ww3UqmnG+I15+OOCYg7Zh4+i1I0BHGjwKJ31agRjpmiYhhKQyQokAiV9GpqKaIZgGoCVx0T1er8mhQrgHWnVZNj/JWkQw4bEmwqhQ0L0nH36DUlSiyorrhgKGISQQkuoArmgho0cIKUJHnKKv5VEgqgirrUVNH6AhQ1kHmBpBZnpVLTBFCiZGogsyTFg/QExIK9mliQEIA5UoBZ9stBbU1BHbOwAK7QiE+Q1TJ7ydr7LEHVJoBFklr6TCpb1mjD6ToxoOR8wBPYFOYSyJpdYtEpqWOWFt8wCcjdgpMMVzMEpSQskiK4K+5GIzuUrnGxBi6rYARYiNbACSpF/EyidDUnDBloVNQmB5RARsm4eAwhhlqQjLhgbogEqWIg4tFzGu5KUFilDLkARWmUoqCGmARJ5pUWokSjc4nZTLMdKloEIPXjqgWqNNtybcGash6RprjlDq4pwAevauKIhnAhLsE248qYWxBgjKsImBiFCmKCqaIWJK4qNKISRFBxP6pfpbI1gBGc5uNKoVpTacm2Sg0oXcKI1DIQj2lYzlc9hIe6k/GsC44YmIQMp0jH0JjfgoiFZ/cKW0jB6iqawGYphf2iyTaVogivDFwLtAgv0YJGUb0vtKAolEYRjhdaUDQ0fFYUFEUjXq+gUKVoFGzdupWiUcR7RG1J9ys0m4hIEf2I1sym8isaEtqkThoRh5M3bdpYhYeiJsm4/WzffnZ9tBMtlCI+QEPjQxbhQYpC8/tGPKdoaHz4Bo0ELG6HDBmENgp27tjBtGlT2bFjZ23x4r2LZEZhsSrToZZ6ahUxcn4ZS6moZXzy50948sn/CglBIRRSOaHkgJY9tZQtW7dmgGmViyid9BCN9L5RPx7Ba5JyOA+g0ILhpw9n9uy7GX766bVz6/6gCDaodY9eRG3U5qSGLjkqcXv0yFH279/PmrWrs/2lNE5V+Wz/Xl5++aUqeSiSbYbX7995h9+/s5kjRw6jjUoNs7o2Cg4fOcrv3tlMW1tb/i4QtaDgO7fd1iSpZP/vbt3Cu+9uzeqZfYTWMrEuaWZO56g5iY8/3sVZZ43k2Wd/9QUJgLJ02TLOPfdctm75fQ1cweuvv8bIkSOYP38eTzzxBMOHn84Tjz+RH1yjWi5evJjzxozm8cWP8YMf3MP554+lra0NIHpqZeApA9BCwvdUWbfuDS655F945JGHWbZsKRdf9FVWrljJzDtmsG3b/zaHQKoCv5HzVWoZj8CRo0cYOfJs3ntvG6tXr+LKK6/K8XL/vn28ue4N7rvvJzz55C/zSr6zeTM/+tG9PLb4ccaPH08hyqHDh7nnntksXryYGTNuB4GfP/oIq199lTfffIuTTj4JDN7/4H1uuWVaBKm55lRVHGPz5ne47777WLjwZ4waPRovjQMdHXz3tltpb9+bnY1LfauYOJpiWF2KivDxrl0MGTKE6667nv955plqAVRYunQJU6dO4+tf/2fa2tqyyjz33HK+/4N/44LxF4QUsBCOP74XC366kKeffip6V+XRRx/lySVLGDBgQLazESNGMGPGjKyuRVTdtIDPPfccs+++m7Fjx4ZFUKFnz1YemvefHD58qJaKUqWVGnDlZCAH7uh99u/fT0tLC6edNpS+ffuwatVKrr5qIvv37WXdujd47bU30KKgpaWV9va9nHzySaxdu4Y9e/bw67VrckxM287OTjZt2ggIZ555JgMGnJIrCo98zU03TWH27NnRNqWSpMOv167lkUcepSwNdQcNxXP/fv0ZNWp0lY66IloilpyPB3Wlxkok2mL//n0MOfVURITrJ9/A/HkPMXHiJJYuXcqUqTfT2tqKIgwbNoz29j0MGPCPAPzwhz+sufSap0M4c8RZfPDB9rC6qjnpMXdcLPMyqpJZkRC24nEJ/JF7DPRSVTZ1ks0kSrGs6uP8EB7P/vjjjzmhT59MW4w+ZzR9+/Zj2bKlrFv3BtdMuiYn9See2J+2tj+CCBMmTODQoUNccMEFfOWCr/CVr4bXiBEjEFW+9KXjueiii3l/+3Z2794dKhcVChUKUZ5a9lR2PEWhGbCocOmll7J8+fIaQxhA7923l61bt9QqoIpuSQsQ2ZjmMuvokcP0OaFPgKwhn73xppt49JGHKynGi/bvf2Lkc5Trr5/MnDkP8uGHH+Yk4nDnIe6//36WLl2Sbfquu2Yz+YbJfLp7d5b6ho0bWLToZxUNWlN3FeW6665n/vx5vLN5cwbTvrede+6eTUtLSy7IU5WjsYCX4F2b6VAR2BWdTr4RwqhRo/na1/6JSRMnZXJKBE486SSeW/4s06fPYPz48UyfMYNJkyZy0kkn06tXT9avX8+ds2bx4AMPoEXIpu6+525UhKFDh3LhhRdy8OBBOjo6eOrppxk/blx0HJWKmgjjxo1jzty5zLh9Ov3796dHjxba2v7IzJl38vrrrzdJEI3VSsx4ZeXKNV4F8hCkVWMK1kgpWswv0/tGzDM1HVcKbYTCumhQqLLp7Y2oKmeNOIvjv3R8VZ1otUAHDnbw3rZttLa2cuaZIwLVYYZZSVla2C9LjplRWokdC9tNGzdi5owaPYqyNMpjJaWVeWtlybHSKMsSKw1ZuWqNF6oxoY4BW6tcstrGFC0lzE15Z8whG1p9V6t8NteYWjEJuZaMdaNbAFWa4WXYmoUHLcsAriwNK49xrAxAyrKkPBbPsQTsWDg/n2OBGnWa+d7KBTmS/1F5MupseDjLI3EsQs0+pGIdtE5Ya6Q8K4KaelEtTTR+NqfQQKh/GO9b0brVK/0SUHehKYw4TZ7J69WtfDHfLvVbu3zuVKkvjMRlSZQlfD4c1IFIF7zS9TEk8WARQ41uiCSZBlROjMz5Ct71Zl3aCBl+rRAO+LzGaXgX+j8x5GBWLV9VNHvFGHidBa8dqnVzAsvoNSEF8qtJrES2rn6kuQFT61FUC4PkJpHXzvMaSVz/jqdyPSAUbWLnPnejmAFVOKurSf1eSX29tuAumUHIX5NAatWU0ms3qdom1ap6PrcJBLmx1MxyW3UsdaSC9/QoyUgeu2XW3B0OHjjI9ve3h5ZAbhlU5pRYd/dAOrs3tYyq1l989kbCIO44yprVq1m7dg27dn0EwJBTT+Wqf72Kq6+elKWZ+4ZJxVLzJbfXYu+iCH0KF8WsjBWFIF6S+j4ePSw1wEuXLmHRokV8/PEnpNWxmifGkiCsMh1v7pBVOic0Ql8Bjhw5wkNzH0REuPbab/LVCy+kKBpsWP9bVq1ayVtvvcX8+Qvo1atnlpZFlTX3uKIemjaxf+ixSVOahYI8akdYEMne0j1I1z2wc5dffgUtLS0BdNYWq7jZuJD1rXulGcnugxYY8srK1V6o8tSypRw9epSZd87KVbzmONlg/ry5tLa2MnPmrC6xs3aehviZSK5Uqasqu3fvZvdf/0qvnr0YMfKspmZPetiDBw6wfft7jB83njICL8syJwUHDhzkD3/4ICYCo7F6XLSSjo4O/tTWxsBBg+nW7bgcLxV3PvtsP6+9tpYpU6dVzc+sjsElfu9703n55ZfYs+dTzJ3fbf4dN025Ma5ktDN3vvGNSWzYsD7b3sEDB7nxhhu5YPx4Fi5cyOQbJnP+2LFs27YNKw0rjcsuu4yFCxdy5ZVXsGjRIl5ZsYKJV18depOxF7l48WJGjDiDX/ziFyxYMJ8x547i9dd/naV16FAnV191Jc888zS33jKVj3buzPbQwOGD7e9z/vnj6Nb9uNzlzfbmwR669+jBRRdfzLp1bzD15mnZ85g7aqFUMpOsJqUHFnzKlCmcfPLJbNv2Hr169UJEWLFiBbfffjsrVqygtTWo/7KlS3jzzbdobW3ht+s34JCznsce+zlr1q7hN79ZT9++fSnLkg8//JD777+PE044gcGDT+WVl1/miiuu5Nvf/g47duxgx46dnDJwIJ6qkMNHj9C79wkZmLsFQ4/25ma4GX379I0rm2q/mI7FtppFd2oxNfvg/ffZvfuvLFiwgJaWFizmlZdffjlXXH4FTz65BLMScCZPvoEePXpQlh47WVWq98QTj/PoI4/St1/ffJ/TTjuN22+/gyVLluR4sPOjnZjDoEGDmXDphOAT3GmkIHz06JHsoSx621dXreLUU0/ltKFDcXcOdR6ipbUlqmj0bx7obCGy2lHdzYwNGzbQ0dHBxIlXN6dMAp0dHfRs7cn06dNxh9OHDw8q7uGaKWF4e9NGOjs7uffee7MHzqEKZ8uWLTzwwByuuPxKtm7Zwi23TGXWrNmcMmBgxtNw4IzhZ7BgwTxumnIz5k7hgaIfOGgwd911J8uXv0Braytv/eZN5s6dl109UYJgucUGHhPtEneYMGECl112WZfWXdj27NkazsNxKynNQngwzxpRmjNs2DCm3XJLlGysVKKkJ0++EXenW/duLFy4iGeeeZq7Z89i5sxZnDf2fCzYpDHglFPo3fsfePGF55l0zTV5pQYNGsS13/wWP/7xjzjnnFH06dOXwYOHYGb07dOH9vb20AcESgmjJ52dnfTr1w8rjTHnncfq1a8yd+5DteQ8BJK3395Ev379sTIsVll6cERJ3T141jFjzuPTT/cw9LShdO/eIyyKGWVptLX9kW7dusfZnbDw1177LXr37s3qNa9y3tixuBM4IYDbvjudl156nhdfeJ7DRw7HLxqXXDKBffv3sWrVCv793/8jqJIZJ/Tpizu8+MLz0cUby5cvp7Ozk759+1Ga8eWhX6alpZU5c+ZQxrLpWGls3LCeb996K3/5y18ojwWJpzBhZZQo1bFpt0zjzjvv4GBHR77Xnj17mDPnQd56ax1mzsoVK/ho507MjX3799G9W/egZUFdg3r0/vve/PSni3jq6WVMnXIDgwYNBmD79veYMOEydu3axdZ3t3LRRRdHtTPmzp3H9Om38dJLLwLQ3t7OL//7yRCbXHFxHn74Ee64YwZnDD+dYcNOZ8+eTwF47LHHGDr0y5RlmZ3dMSuj86skaW5MnXIzHQc7GHf+GEaPHs2hQ4dob9/L5Mk38K3rrsfKoPI/+Unwtrt27WLO3IdyOJTnn3/FtdYRUi3429+O8n9//jOiwtkjz0ZV+eSTT1i+/Ffcc8/3aW3t2dSjfHfru6gKY8aMice6dK1FaW9vp33Pp7S29mTYsGFdyppYOKfQFT1oZgritqOjgx1/aqM04+yR58QQU+aY3NnRwUcffcTAgQP5u+OOC2pvjjz3/Muu9Q5xLUtJDZ6iKEKHuXY8sGxFZNziebW2ujZ1liTPCZDHz9LQR5XQp7hLDZzXQkl2OjUWwbq+Em3i1X4jqEecuHBDvagS4VBxIuZIHP6pnk+DOy1DuCHlpu64CKaCutc6zbXxsy5jYFV65xWwOsC4LWO8ToCT3whx2yqpp7gdI2jDI7gwAxOTZQSN+24SRw4UEyPNAxUOVnqe3kIc90gEqyKuuFim7XOFXwdKJcFEMlcJCdnLJtVN3I97CC1ek5blFNCyTXsMR42KqU5VQOgzuIVBnzCZl8r5ID0VCWmbpgJVcQ3DQWmyUcRrNmkV75OFGPcTY5Dn6VIdWrNLDxpTUknOLEq3NlCY1NRrFU3OeOLwRRgLSaUSGvr2aDWn5uCxy1RopcAeyKIANI6PiUaQVjVh6jO0aYaHOLOTBpKSt/e6+iap5WKgAulWxdX6No4dhmQgV/8WbmwapphMA1UhbqgrpYVhPbEw9EcpIUwYqEaA7rhJAOipqZvYs8QlSR6QdJFUlFYMQyygm2zTvKnayd43OZi61K2Wb0dbb2RWQ+KsSLQlLEhQJQ7oSZAqWmKlhq6SGYVCacHJeO4sBYAuXo2exbFPkc+ToN6lsq+mkS17XK/Zp1nd60YHU1YL4Tn3tSp3rZNjgmMGqhFoYajHOVMp0TyYV82uqiplal1HetGFWt/+870IaZrjqbN6FbBMieRcNqhgJcnqmNVV26pqyr3r5HKkG5Qws6ZiUCqmjkiJlDFsaJiCSqHBEwktgotGItmaZtKlRj57PYIkY5eKJahojmq+PIH1VBjk916zx2oIuF6tND4XtiLQNBArcRIx9IgSkUQzKA92GTqBhpQ0jXNLjZ9tmsjqMrncPEhYMRO5vvVKkjlEkNSXWqIewmIGmcB5fUbbvdlqzHGJtqpxKthSJuPBc7qAlNW0hUke027uOndtSlR/QQDN0qRGW1YP3xxeci/Fm9UUr8ygUSeLmwi9NNguiquEsUz1OFdaDR64eBBMbeLCU+cqk90aHY9Qh+lNE4SON0m18rZhwNAqMJ97VX8qUR9fSz9NM+jS5c8YYjkMHiaX3VIjJWxLCR0jj1S9hDfZ+VRa6hUpIF3u4s2T/xWvSxduN9ExFmkXmsJMdcw+12/9/wEA9H8R00XjMG0AAAAASUVORK5CYII="/>
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Media</title>
<style>
html,body{width:100%;height:100%;margin:0;padding:0;}
@media screen and (max-device-width: 320px) and (orientation:portrait) {
    body { background-color:#FFF; }
}
@media screen and (max-device-width: 320px) and (orientation:landscape) {
    body { background-color:#000; }
}
</style>
</head>
<body onload="fullscreen()">
<span style="color:#000">Portrait</span><span style="color:#FFF">Landscape</span>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T02:05:56.517

我使用以下媒体查询（为 Web 应用程序定义启动图像）。它处理 iPhone 非视网膜和 iPhone 4/4s 以及非视网膜 iPad 和视网膜 iPad（纵向和横向）。您可以在[https://github.com/gwilson/iOSWebAppTemplates找到它](https://github.com/gwilson/iOSWebAppTemplates)

```
 <!-- iPhone standard resolution 320x460  (landscape not needed because all web apps start portrait on iPhone) -->
<link  rel="apple-touch-startup-image" href="splash-320x460.jpg" media="(device-width: 320px)" />
<!-- iPhone high resolution (retina) 640x920 pixels (landscape not needed because all web apps start portrait on iPhone) -->
<link rel="apple-touch-startup-image" href="splash-640x920.jpg" media="(device-width: 320px) and (-webkit-device-pixel-ratio: 2)" />
<!-- iPad Portrait 768x1004 -->
<link rel="apple-touch-startup-image" href="splash-768x1004.jpg" media="(device-width: 768px) and (orientation: portrait)" />
<!-- iPad Landscape 748x1024 (yes, a portrait image but with content rotated 90 degrees - allows 20px for status bar) -->
<link rel="apple-touch-startup-image" href="splash-748x1024.jpg" media="(device-width: 768px) and (orientation: landscape)" />
<!-- iPad retina Portrait 1536x2008 -->
<link rel="apple-touch-startup-image" href="splash-1536x2008.jpg" media="(device-width: 768px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" />
<!-- iPad retina Landscape 1496x2048 (yes, a portrait image but with content rotated 90 degrees - allows 40px for status bar) -->
<link rel="apple-touch-startup-image" href="splash-1496x2048.jpg" media="(device-width: 768px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T07:37:18.220

```
<html>
<head>
<style type="text/css">

/* Mobile Layout: 480px and below. */
.gridContainer {
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    padding: 0;
    height: 300px;
    background: #ff0000;
}
#LayoutDiv1 {
    clear: both;
    float: left;
    margin-left: 0;
    width: 100%;
    display: block;
}

/* Tablet Layout: 481px to 768px. Inherits styles from: Mobile Layout. */
@media only screen and (min-width: 481px) {
.gridContainer {
    width: 80.675%;
    padding-left: 1.1625%;
    padding-right: 1.1625%;
    background: #00ff00;
    height: 200px;
}
#LayoutDiv1 {
    clear: both;
    float: left;
    margin-left: 0;
    width: 100%;
    display: block;
}
}

/* Desktop Layout: 769px to a max of 1232px.  Inherits styles from: Mobile Layout and Tablet Layout. */
@media only screen and (min-width: 769px) {
.gridContainer {
    width: 88.2%;
    max-width: 1232px;
    padding-left: 0.9%;
    padding-right: 0.9%;
    margin: auto;
    background: yellow;
    height: 100px;
}
#LayoutDiv1 {
    clear: both;
    float: left;
    margin-left: 0;
    width: 100%;
    display: block;
}
}
</style>
</head>

<body>
<div id="LayoutDiv1">
    <div class="gridContainer">Welcome to iPad</div>
</div>
</body>
</html> 
```

# php - Jenkins PHP 示例测试项目

> ID：11680096
> 
> 赞同：3
> 
> 时间：2012-07-27T00:52:39.830
> 
> 标签：php, jenkins, integration-testing

运行 ubuntu 并按照此处的说明进行操作：http: [//edorian.posterous.com/setting-up-jenkins-for-php-projects](http://edorian.posterous.com/setting-up-jenkins-for-php-projects)

但是当我保存配置时，我得到 500 错误：

异常：java.lang.RuntimeException：无法实例化类 hudson.plugins.git.GitSCM

有任何想法吗？Jenkins git 插件已安装。

这是完整的堆栈跟踪：

```
Status Code: 500

Exception: java.lang.RuntimeException: Failed to instantiate class hudson.plugins.git.GitSCM from {"":["hudson.plugins.git.util.DefaultBuildChooser","7"],"authorOrCommitter":false,"branches":{"name":"**"},"browser":{"stapler-class":"hudson.plugins.dry.DryPublisher","url":"http://dev.evanta.com/gitweb/?p=mydemo.git"},"buildChooser":{"stapler-class":"hudson.scm.browsers.FishEyeSVN"},"clean":false,"disableSubmodules":false,"excludedRegions":"","excludedUsers":"","gitConfigEmail":"","gitConfigName":"","gitTool":"Default","ignoreNotifyCommit":false,"includedRegions":"","localBranch":"","pruneBranches":false,"recursiveSubmodules":false,"reference":"","relativeTargetDir":"","remotePoll":false,"scmName":"","skipTag":false,"userRemoteConfigs":{"name":"","refspec":"","url":"file:///home/mirey/mydemo"},"value":"1","wipeOutWorkspace":false}
Stacktrace:
javax.servlet.ServletException: java.lang.RuntimeException: Failed to instantiate class hudson.plugins.git.GitSCM from {"":["hudson.plugins.git.util.DefaultBuildChooser","7"],"authorOrCommitter":false,"branches":{"name":"**"},"browser":{"stapler-class":"hudson.plugins.dry.DryPublisher","url":"http://dev.evanta.com/gitweb/?p=mydemo.git"},"buildChooser":{"stapler-class":"hudson.scm.browsers.FishEyeSVN"},"clean":false,"disableSubmodules":false,"excludedRegions":"","excludedUsers":"","gitConfigEmail":"","gitConfigName":"","gitTool":"Default","ignoreNotifyCommit":false,"includedRegions":"","localBranch":"","pruneBranches":false,"recursiveSubmodules":false,"reference":"","relativeTargetDir":"","remotePoll":false,"scmName":"","skipTag":false,"userRemoteConfigs":{"name":"","refspec":"","url":"file:///home/mirey/mydemo"},"value":"1","wipeOutWorkspace":false}
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:616)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
    at org.kohsuke.stapler.MetaClass$6.doDispatch(MetaClass.java:241)
    at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:488)
    at org.kohsuke.stapler.Stapler.service(Stapler.java:162)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:45)
    at winstone.ServletConfiguration.execute(ServletConfiguration.java:248)
    at winstone.RequestDispatcher.forward(RequestDispatcher.java:333)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:376)
    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
    at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
    at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
    at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
    at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:50)
    at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
    at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
    at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
    at winstone.RequestDispatcher.forward(RequestDispatcher.java:331)
    at winstone.RequestHandlerThread.processRequest(RequestHandlerThread.java:215)
    at winstone.RequestHandlerThread.run(RequestHandlerThread.java:138)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at winstone.BoundedExecutorService$1.run(BoundedExecutorService.java:77)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.RuntimeException: Failed to instantiate class hudson.plugins.git.GitSCM from {"":["hudson.plugins.git.util.DefaultBuildChooser","7"],"authorOrCommitter":false,"branches":{"name":"**"},"browser":{"stapler-class":"hudson.plugins.dry.DryPublisher","url":"http://dev.evanta.com/gitweb/?p=mydemo.git"},"buildChooser":{"stapler-class":"hudson.scm.browsers.FishEyeSVN"},"clean":false,"disableSubmodules":false,"excludedRegions":"","excludedUsers":"","gitConfigEmail":"","gitConfigName":"","gitTool":"Default","ignoreNotifyCommit":false,"includedRegions":"","localBranch":"","pruneBranches":false,"recursiveSubmodules":false,"reference":"","relativeTargetDir":"","remotePoll":false,"scmName":"","skipTag":false,"userRemoteConfigs":{"name":"","refspec":"","url":"file:///home/mirey/mydemo"},"value":"1","wipeOutWorkspace":false}
    at hudson.model.Descriptor.newInstance(Descriptor.java:575)
    at hudson.plugins.git.GitSCM$DescriptorImpl.newInstance(GitSCM.java:1508)
    at hudson.plugins.git.GitSCM$DescriptorImpl.newInstance(GitSCM.java:1438)
    at hudson.scm.SCMS.parseSCM(SCMS.java:63)
    at hudson.model.AbstractProject.submit(AbstractProject.java:1790)
    at hudson.model.Project.submit(Project.java:197)
    at hudson.model.Job.doConfigSubmit(Job.java:990)
    at hudson.model.AbstractProject.doConfigSubmit(AbstractProject.java:699)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:288)
    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:151)
    at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:90)
    at org.kohsuke.stapler.MetaClass$1.doDispatch(MetaClass.java:111)
    at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
    ... 39 more
Caused by: java.lang.IllegalArgumentException: Failed to instantiate class hudson.plugins.git.GitSCM from {"":["hudson.plugins.git.util.DefaultBuildChooser","7"],"authorOrCommitter":false,"branches":{"name":"**"},"browser":{"stapler-class":"hudson.plugins.dry.DryPublisher","url":"http://dev.evanta.com/gitweb/?p=mydemo.git"},"buildChooser":{"stapler-class":"hudson.scm.browsers.FishEyeSVN"},"clean":false,"disableSubmodules":false,"excludedRegions":"","excludedUsers":"","gitConfigEmail":"","gitConfigName":"","gitTool":"Default","ignoreNotifyCommit":false,"includedRegions":"","localBranch":"","pruneBranches":false,"recursiveSubmodules":false,"reference":"","relativeTargetDir":"","remotePoll":false,"scmName":"","skipTag":false,"userRemoteConfigs":{"name":"","refspec":"","url":"file:///home/mirey/mydemo"},"value":"1","wipeOutWorkspace":false}
    at org.kohsuke.stapler.RequestImpl$TypePair.convertJSON(RequestImpl.java:633)
    at org.kohsuke.stapler.RequestImpl.bindJSON(RequestImpl.java:377)
    at org.kohsuke.stapler.RequestImpl.bindJSON(RequestImpl.java:373)
    at hudson.model.Descriptor.newInstance(Descriptor.java:566)
    ... 56 more
Caused by: java.lang.IllegalArgumentException: Failed to convert the buildChooser parameter of the constructor public hudson.plugins.git.GitSCM(java.lang.String,java.util.List,java.util.List,hudson.plugins.git.UserMergeOptions,java.lang.Boolean,java.util.Collection,boolean,boolean,hudson.plugins.git.util.BuildChooser,hudson.plugins.git.browser.GitRepositoryBrowser,java.lang.String,boolean,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,boolean,boolean,boolean,boolean,java.lang.String,java.lang.String,boolean,java.lang.String,boolean)
    at org.kohsuke.stapler.RequestImpl$TypePair.convertJSON(RequestImpl.java:627)
    ... 59 more
Caused by: java.lang.IllegalArgumentException: Failed to instantiate class hudson.plugins.git.util.BuildChooser from {"stapler-class":"hudson.scm.browsers.FishEyeSVN"}
    at org.kohsuke.stapler.RequestImpl$TypePair.convertJSON(RequestImpl.java:633)
    at org.kohsuke.stapler.RequestImpl.bindJSON(RequestImpl.java:377)
    at org.kohsuke.stapler.RequestImpl$TypePair.convertJSON(RequestImpl.java:625)
    ... 59 more
Caused by: java.lang.IllegalArgumentException: Specified type class hudson.scm.browsers.FishEyeSVN is not assignable to the expected class hudson.plugins.git.util.BuildChooser
    at org.kohsuke.stapler.RequestImpl$TypePair.convertJSON(RequestImpl.java:603)
    ... 61 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:26:02.823

我目前没有 Jenkins 实例来检查这一点，但堆栈跟踪中的这一行引起了我的注意：

> 引起：java.lang.IllegalArgumentException：指定类型类 hudson.scm.browsers.FishEyeSVN 不可分配给预期的类 hudson.plugins.git.util.BuildChooser

您是否为您的工作配置了诸如 FishEye 之类的代码浏览器？如果是这样，如果你删除它是否有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T19:41:25.587

我遇到了这个问题，因为我在（Windows）奴隶上运行任务。从属实例尚未以管理员身份启动，因此无法运行管理员级别的命令。

以管理员身份登录slave并重新启动实例后，错误似乎已解决。

# regex - 正则表达式会匹配这个字符串的主机名吗？

> ID：11680109
> 
> 赞同：-1
> 
> 时间：2012-07-27T00:54:09.220
> 
> 标签：regex, snmp, splunk

我正在尝试匹配此提取的 SNMP 数据包中的主机名

```
2012-07-27 12:16:03 SUP-V5-ISA-1 [10.165.26.10] (via UDP: [10.165.26.10]:61151->[0.0.0.0]:0) TRAP, SNMP v1, community public
ISAMANAGER-MIB::isaManager Enterprise Specific Trap (ISAMANAGER-MIB::clipModified) Uptime: 1:22:15.08
ISAMANAGER-MIB::vClipId = INTEGER: 42059 
```

SUP-V5-ISA-1 是主机名，在这种情况下它通常不是 FQDN（这取决于它来自的系统）

我正在尝试将其输入 splunk，但我一生都无法弄清楚如何选择第三个单词，而不是将连字符视为单词边界。我每次都能选择第三个“单词”，即“27”和 SUP，但从来没有抓住整个“单词”

它始终跟在时间戳之后，并且始终跟在方括号中的 IP 后面，但通常不包含那么多连字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:40:11.350

使用正则表达式`^\S+\s+\S+\s+(\S+)`并使用第一个捕获组作为结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:36:55.353

### 使用字段拆分而不是正则表达式

正则表达式并不总是最好的解决方案。如果您可以将日志记录拆分为字段，则此问题有一个简单的解决方案，因为获取记录的第三个字段比创建防弹正则表达式要容易得多。

我不熟悉 Splunk，但请考虑以下说明性示例。假设您的日志记录存储在*记录*变量中：

```
# Field-splitting with awk.
hostname=$(echo "$record" | awk '{print $3}')

# Field-splitting with cut.
hostname=$(echo "$record" | cut -d' ' -f3) 
```

在这两种情况下，通过将记录解析为字段并提取第三个字段的值来设置*主机名。*`SUP-V5-ISA-1`对于这个特定的用例，这似乎是一种更可靠的方法，假设您的框架允许您执行类似的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T06:24:10.407

在 Splunk 中，您可以通过从日志事件中提取字段来在索引​​时转换主机名。

为此，您需要在 $SPLUNK_HOME/etc/apps/yourapp/local 中的 2 个文件中添加条目

替换*yourapp*和*yoursourcetype*以适应您的环境。

**道具.conf**

```
[yoursourcetype]
TRANFORMS-h1=set-host-name
SHOULD_LINEMERGE=false 
```

**转换.conf**

```
[set-host-name]
DEST_KEY = MetaData:Host
REGEX =^\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}\s((?:\w|-)+)\s\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\].+$
FORMAT = host::$1 
```

# java - resultSet.getString("TABLE_CAT") - 什么是 TABLE_CAT？

> ID：11680111
> 
> 赞同：0
> 
> 时间：2012-07-27T00:54:40.917
> 
> 标签：java, jdbc

下面的代码可以正常工作，并向我显示我的数据库中的数据库列表。在下面给出的代码中，什么是 TABLE_CAT 以及它为什么存在？

```
import java.sql.*;
public class Database{
public static void main(String [] args) {
Connection con = null;
try {
  con = DriverManager.getConnection("jdbc:mysql://localhost:3306","cowboy","123456");
  DatabaseMetaData meta = con.getMetaData();
  ResultSet res = meta.getCatalogs();
  System.out.println("List of databases: "); 
  while (res.next()) {
     System.out.println("   " + res.getString("TABLE_CAT"));
  }

  res.close();
  con.close();
} catch (SQLException e) {
  System.err.println("SQLException: " + e.getMessage());
}
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:01:02.273

TABLE_CAT 是您的结果集中列的名称。当您逐行迭代结果集时，使用`res.getString("TABLE_CAT"))`允许您从当前结果行中的该列中提取值。当`meta.getCatalogs()`返回数据库中可用的目录名称时，目录名称将存储在名为 TABLE_CAT 的列下。

[这](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getCatalogs%28%29)对你现在应该更有意义了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:03:51.007

`TABLE CATEGORY`??

这是一个简单的键，可用于从`resultSet`元数据中提取值

您可以使用`ResultSetMetaData`（可以从 获得`ResultSet`）列出所有可用的列名`ResultSet`

# javascript - jQuery Mobile listview 在 Chrome 中无法正确刷新

> ID：11680114
> 
> 赞同：0
> 
> 时间：2012-07-27T00:55:03.210
> 
> 标签：javascript, jquery, listview, google-chrome, jquery-mobile

当我将页面更改为列表视图时，我收到以下错误，即使我已经完全注释掉了我的 listview.('refresh') 方法。Safari 很好地加载了我的列表视图，但每当我使用 chrome 时，我都会遇到问题。这发生在其他人身上吗？我正在 document.ready(){} 中完成所有加载

当我完全注释掉我的列表视图时，甚至会发生此问题....

**启动 changePage 的代码**

```
<!DOCTYPE html>
<html>
<head>

  <title>First jQuery Mobile Example</title>

  <!-- the three things that jQuery Mobile needs to work-->
 <link rel="stylesheet" href="./signup.css">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

</head>

<body>
  <!-- Page starts here -->
<div data-role="page" data-theme="c" id="surveyList">

<script>

$(document).bind('mobileinit', function () {
    $.mobile.page.prototype.options.theme  = "c";
});

function createNewSurvey() {

    console.log("Creating new survey");

   $.mobile.changePage( "surveyCreator.html", { transition: "slide"} );
}

function goToSurveyResults(surveyID) {
  console.log("hello");
    console.log("This survey's id  is: ",surveyID);

    surveyId = surveyID;
    console.log("surveyId is = ", surveyId);

   // $.getJSON("http://iwaiter-app.com/iWaiter_scripts/getSurveyAnalytics.php?surveyID=" + surveyId, function(json) {
   //       console.log(json);

       console.log("surveyId is = ", surveyId);
         $.mobile.changePage( "surveyResults.html", { transition: "slide"} );
             console.log("changed page");
  //  });

}

function deleteSurvey(surveyID) {
  console.log("Deleting survey with id: ",surveyID);
}

//$(document).ready(function(){
  $('#surveyList').bind('pageinit', function() {

  var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()
var fullDate = month + "-" + day + "-" + year;

$('#footer').append('<p>  Today: ' + fullDate + '</p>');
//document.write(month + "/" + day + "/" + year)

// get the JSON data from server
    $.getJSON("http://iwaiter-app.com/iWaiter_scripts/get_surveyList.php?email=alo@mit.edu", function(data) {

      console.log(data);

      // Define some local instance variables
      var listOfSurveys = data.Results;
      var currentDate;
      var numbersOrLetters;
      var onOff;
      var surveyDescription;
      var dataTheme;

       $('ul#surveyList').append('<li><a href="javascript:void(createNewSurvey());">Create New Survey</a></li>');

        for (i = 0; i < listOfSurveys.length; i++){

            // set whether the survey uses numbers or letters
            if (listOfSurveys[i].Numbers_or_letters > 0) 
                 {numbersOrLetters = 'Letters';}
            else {numbersOrLetters = 'Numbers';}

            // set whether survey is on or off
            if (listOfSurveys[i].On_off > 0) {onOff = 'Off'; dataTheme = 'data-theme="c"';}
            else {onOff = 'On'; dataTheme = 'data-theme="b"';}

            // Set description
            if (listOfSurveys[i].Survey_description != '')
              surveyDescription = ', ' + listOfSurveys[i].Survey_description;
            else
              surveyDescription = listOfSurveys[i].Survey_description;

            // set surveyAuthKey
            var authKey = listOfSurveys[i].Survey_authKey;
            console.log("authkey: ",authKey);

          if (listOfSurveys[i].Date == currentDate) {
              // create row in same section

          /* old list element
                $('ul#surveyList').append('<li><a href="javascript:void(goToSurveyResults(' + listOfSurveys[i].Survey_id + '));"><h1>' + listOfSurveys[i].Survey_authKey + '</h1><p>' + listOfSurveys[i].Number_of_options + ' Options, ' + numbersOrLetters + ', ' + onOff + ', ' + surveyDescription + '</p></a></li>');
           */     
                 $('ul#surveyList').append('<li class="ui-btn ui-btn-icon-right"' + dataTheme + '><a href="javascript:void(goToSurveyResults(' + listOfSurveys[i].Survey_id + '));"><h1>' + listOfSurveys[i].Survey_authKey + '</h1><p>' + listOfSurveys[i].Number_of_options + ' Options, ' + numbersOrLetters + ', ' + onOff + surveyDescription + '</p></a><a href="#" onclick="deleteSurvey(' + listOfSurveys[i].Survey_id + ')" data-icon="delete" class="ui-li-link-alt ui-btn "' + dataTheme + ' ></a></li>');

          }
          else {
              // otherwise create a new section
              currentDate = listOfSurveys[i].Date;
              console.log(currentDate);

               $('ul#surveyList').append('<li data-role="list-divider">' + currentDate + '</li>');

                $('ul#surveyList').append('<li class="ui-btn ui-btn-icon-right"' + dataTheme + '><a href="javascript:void(goToSurveyResults(' + listOfSurveys[i].Survey_id + '));"><h1>' + listOfSurveys[i].Survey_authKey + '</h1><p>' + listOfSurveys[i].Number_of_options + ' Options, ' + numbersOrLetters + ', ' + onOff +surveyDescription + '</p></a><a href="#" onclick="deleteSurvey(' + listOfSurveys[i].Survey_id + ')" data-icon="delete" class="ui-li-link-alt ui-btn "' + dataTheme + '></a></li>');
            }
          }
       console.log("Refreshed");
        $('ul#surveyList').listview('refresh');

    });

});

</script>

    <header data-role="header">
    <a href="Master_Survey.html" data-direction="reverse" rel="external" data-icon="" data-transition="slide" class="ui-btn-right">Logout</a>
    <h1>My Surveys</h1>

  </header>

  <div data-role="myContent">

    <div id="surveysContainer">

      <ul id="surveyList" data-role="listview" data-split-icon="delete">
      </ul>

    </div>

  </div>  

<footer data-role="footer" id="footer"></footer>

</div>

  </body>

</head>
</html> 
```

**有错误的页面**

```
<!DOCTYPE html>
<html>
<head>

  <title>First jQuery Mobile Example</title>

  <!-- the three things that jQuery Mobile needs to work-->
 <link rel="stylesheet" href="./signup.css">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

</head>

<body>
  <!-- Page starts here -->
<div data-role="page" data-theme="c" id="resultsListPage" data-add-back-btn="true">

<script>

$('#resultsListPage').bind('pageinit', function() {

  console.log("new page");
  /*
   $('ul#resultsList').append('<li>Mean: </li>');
       $('ul#resultsList').append('<li>Standard Deviation: </li>');

     $('#resultsList').listview();
        $('#resultsList').listview('refresh');
        */
});

$(document).ready(function(){
  console.log("how far?");
//document.write(month + "/" + day + "/" + year)

// get the JSON data from server
    //$.getJSON("http://iwaiter-app.com/iWaiter_scripts/get_analytics.php?surveyAuthKey=alo-1", function(data) {

    //  console.log(data);

      // Define some local instance variables
     // var listOfSurveys = data.Results;
      var currentDate;
      var numbersOrLetters;
      var onOff;
      var surveyDescription;

      // header
      // $('ul#surveyList').append('<li data-role="list-divider">' + currentDate + '</li>');

/*
      // result rows
       $('ul#resultsList').append('<li>Mean: </li>');
       $('ul#resultsList').append('<li>Standard Deviation: </li>');
     */

     // $('#resultListContainer').html('<ul id="resultsList" data-role="listview" data-inset="false" data-filter="true"><li>Mean: </li><li>Standard Deviation: </li></ul>');

     //  $("#resultsList").listview();
     //  $("#resultsList").listview('refresh');

    //  $("#resultsList").listview()

       // $('ul#resultsList').listview('refresh');

 // });

});

</script>

    <header data-role="header">
    <a href="Master_Survey.html" data-direction="reverse" rel="external" data-icon="" data-transition="slide" class="ui-btn-right">Logout</a>
    <h1>Survey Analytics</h1>
  </header>

<footer data-role="footer" id="footer"></footer>

</div>

  </body>

</head>
</html>

Uncaught cannot call methods on listview prior to initialization; attempted to call method 'refresh' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:20:30.443

*   [http://jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

不要使用 document.ready()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:40:01.893

由于您的错误：

```
Uncaught cannot call methods on listview prior to initialization; attempted to call method 'refresh' 
```

表示`.listview('refresh')`在代码中的某处调用了尚未作为列表视图启动的元素。

在您的代码中，唯一`.listview('refresh')`的是以下绑定：

```
$('#surveyList').bind('pageinit', function() {
     ...
     $('ul#surveyList').listview('refresh');
     ...
} 
```

当您更改页面时，这不会被解除绑定。这意味着当您更改页面并且 pageinit 事件发生时，javascript 仍会尝试执行此块中的代码。但是该元素不在当前页面上，因此（可能）没有正确初始化。

# html - 浏览器是否在解析 css 或形成规则后请求图像？

> ID：11680117
> 
> 赞同：3
> 
> 时间：2012-07-27T00:55:29.530
> 
> 标签：html, css, server-load

当浏览器解析 css 时，它是在遇到资源时加载资源还是在读取 css 文件并构造了一组有效规则之后加载资源？

这是一些 css，它为 IE 使用图像，但为支持它的浏览器使用 RGBA 背景。我认为 IE 将忽略 rgba 值并加载图像，而其他浏览器永远不会请求图像。这是真的？

```
background:transparent url('../img/content/black-mask.png') repeat top left;
background:rgba(0,0,0,0.7); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:11:00.983

浏览器在将样式表应用到文档结构时总是首先生成“计算样式”。因此`background-image:`，您选择的框的属性将始终为空，因为速记`background:`属性清除了该`background-image`属性，因为您没有在第二行中设置任何内容 - 因此取消了第一行。

然而，即使使用计算样式，浏览器也不一定会下载图像。尝试对 psuedo-class 使用不同的图像，`:hover`您会注意到浏览器下载它时会出现延迟。

@Andre 是正确的，因为它主要是一个实现细节，但是很多行为是由 CSS 规范定义的（例如计算样式的东西）。

我想更多的浏览器可能希望通过抢先下载样式表引用的资源来改善浏览体验，但你不能指望它（如果移动浏览器在蜂窝网络上，它们可能永远不会这样做以消耗更少的数据）。

# loops - Foreach 只输出最后一项

> ID：11680118
> 
> 赞同：0
> 
> 时间：2012-07-27T00:55:35.110
> 
> 标签：loops, foreach, fwrite

我正在尝试使用 foreach 将结果保存到文件中，但它只写入数组的最后一个结果。

```
include_once('../simple_html_dom.php');
$myFile = "urls.txt";
$fh = fopen($myFile, 'a') or die("can't open file");

$html = file_get_html('the-url');

foreach($html->find('a.bnone') as $element) 

    $stringData = $element->href . '\n';
    fwrite($fh, $stringData);
        //echo $element->href . '<br>'; 
```

注释的 echo 起作用并显示所有结果， fwrite 仅将最后一个写入文件。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:01:36.540

您需要在您的周围放置花括号，`for each`因为那里有两个语句，但只有第一个语句在 foreach 中循环，因此放入最后一个元素`$stringData`并且该`fwrite`函数只调用一次。

```
foreach($html->find('a.bnone') as $element) {

    $stringData = $element->href . '\n';
    fwrite($fh, $stringData);
    //echo $element->href . '<br>';
} 
```

# c# - 如何限制 MemoryStream 长度？

> ID：11680120
> 
> 赞同：0
> 
> 时间：2012-07-27T00:55:51.357
> 
> 标签：c#, .net

我需要将 Stream 对象传递给将一些数据序列化到流中的 API。我事先不知道数据量，也无法控制该代码。但是，我想将流大小限制为一定数量。当 MemoryStream 的长度达到指定限制时，我可以让 MemoryStream 抛出异常吗？像这样的东西：

```
var stream = new MemoryStream(...); // I want to specify MaxLength=10 somehow...

for (byte i = 0; i < 9; i++)
    stream.WriteByte(i); // ok

stream.WriteByte(10); // this should throw 
```

实现此行为的一种方法是覆盖 SetLength、Seek、Write 和 WriteByte 方法（还有其他方法吗？）。

有没有更简单或更好的方法来做到这一点？我是否缺少任何现有的构造函数或属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:58:13.830

```
var ms = new MemoryStream(new byte[10]);
for (byte i = 0; i <= 9; i++)
    ms.WriteByte(i); // ok

ms.WriteByte(10); 
```

抛出`NotSupportedException`“内存流不可扩展”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T02:16:51.287

如果您的内存限制非常高，因此您不能（或不想）预先分配数组，您可以简单地将 MemoryStream 包装在自定义的基于 Stream 的类中，该类将在写入时进行长度检查。

请注意，如果您希望将大量数据写入 MemoryStream (80Kb+)，您可能需要验证 MemoryStream 的内存使用模式和性能是否适合您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:40:11.093

您提供的解决方案是最简单的。您可以创建自己的流，该流继承自 MemoryStream 并具有将所需长度作为参数的构造函数。然后你只需要在 Write 方法中实现一些额外的逻辑，然后调用 base.Write/WriteByte()。

# php - Phalanger c# DLL 程序集已导入但无法调用

> ID：11680122
> 
> 赞同：0
> 
> 时间：2012-07-27T00:56:18.903
> 
> 标签：php, asp.net, iis, phalanger

我遇到了一个问题，我在使用 Phalanger 时无法显示 c# 代码，甚至无法使用。根据他们的定义，我所要做的就是添加

```
 <add assembly="Utility"> 
```

这会成功发生，因为如果我稍微更改名称，页面就会崩溃，所以我知道它实际上是在库中拾取的。但是，当我尝试

```
 <?php
        use Utility\...; //new version of phalanger uses "use" not import
     ?> 
```

我什么都得不到。它不仅没有出现在智能感知中，而且当我实际尝试调用属于它的函数时，它也没有出现。

知道什么可以帮助我吗？我已经命名了 DLL，这似乎是一个要求。除此之外，我不确定我还能做什么......非常感谢任何帮助！

资源：

[http://www.codeproject.com/Articles/17311/Phalanger-PHP-for-NET-Introduction-for-NET-develop](http://www.codeproject.com/Articles/17311/Phalanger-PHP-for-NET-Introduction-for-NET-develop)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:22:21.637

你做得对。

您不必使程序集 COM 可见。

您所要做的就是在`<classLibrary>`配置部分指定程序集。有两种方法：

`<add assembly="Full Assembly Name" />`当程序集在 GAC 中时

`<add url="assembly relative file name" />`当程序集在当前目录或子目录中时。

但另一个问题是，Phalanger Tools 是否显示了它应该显示的内容。如果您的程序是可编译的，但您只是在 IntelliSense 中看不到类/函数，请将 Phalanger 工具更新为从不版本（2012 年 7 月 27 日的版本应该修复它）。如果您对 Phalanger 工具有任何疑问，请在[http://support.devsense.com/viewforum.php?f=10报告](http://support.devsense.com/viewforum.php?f=10)

# asp.net - RequiredFieldValidator 和阻止 CausesValidation

> ID：11680123
> 
> 赞同：3
> 
> 时间：2012-07-27T00:56:21.770
> 
> 标签：asp.net, html, requiredfieldvalidator

我在联系表格上有一个[RequiredFieldValidator 。](http://msdn.microsoft.com/en-us/library/5hbw267h%28v=vs.80%29.aspx)

当人们单击“提交”时，它会按预期工作，但如果他们单击“取消”或我表单上的多个菜单中的任何一个，[RequiredFieldValidator](http://msdn.microsoft.com/en-us/library/5hbw267h%28v=vs.80%29.aspx)会取消该操作。

我已经搜索并发现我需要使用[CausesValidation](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.causesvalidation.aspx) = **False**（使用[这篇](https://stackoverflow.com/questions/2915530/bypassing-a-requiredfieldvalidator)文章）在我的表单上设置其他控件，但是我是否必须为页面上的每个控件都这样做？

更糟糕的是，我的表单上的菜单包含在 Master.Page 中，它们大多是`<DIV>`样式 CSS 按钮，但单击任何按钮都会导致[RequiredFieldValidator](http://msdn.microsoft.com/en-us/library/5hbw267h%28v=vs.80%29.aspx)触发并导致表单失败。

默认不应该是 False 并且我必须打开哪个控件来设置验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T01:03:43.367

您可以设置验证组

```
 <asp:TextBox ID="tb1" runat="server" ValidationGroup="ValidateMe" />
             <asp:TextBox ID="tb2" runat="server" />
             <asp:RequiredFieldValidator" ID="rfv1" runat="server" ControlToValidate="tb1" ValidationGroup="ValidateMe" />
               ...
             <asp:Button ID="btnSubmit" runat="server" ValidationGroup="ValidateMe" /> 
```

从[这里来](https://stackoverflow.com/questions/1636200/asp-validation-off-by-default)

编辑，对不起，我没有把它正确地放入代码中并且它没有显示：

或者，如果它们只是取消之类的东西，您总是可以在客户端使用和处理它们

```
 <input type="button" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T01:02:06.903

您只需要设置：

```
 CausesValidation = False 
```

到你的按钮执行一个动作

作为替代方案，您可以`ValidationGroup`向控件和按钮添加一个属性，以控制*哪些按钮引发验证*。只有与指定匹配的控件`ValidationGroup`才会被验证

# .htaccess - 重定向 public_html 文件夹

> ID：11680125
> 
> 赞同：0
> 
> 时间：2012-07-27T00:56:52.177
> 
> 标签：.htaccess, redirect, wildcard, wildcard-subdomain, public-html

我有两个域名

*   www.domain.com
*   www.parked.com

我在 public_html (www) 文件夹中有 3 个文件夹

*   文件夹1
*   文件夹2
*   文件夹3

我想要一个使用 htaccess 代码的通配符将域名重定向到，`folder2`所以它是这样的：

```
www.domain.com/  =>  public_html/folder2/
www.domain.com/forum  => public_html/folder2/forum
www.domain.com/support =>  public_html/folder2/support

or even subdomains:
www.forum.domain.com  => public_html/folder2/forum
www.support.domain.com  =>  public_html/folder2/support
www.[*random*].domain.com  =>  public_html/folder2/ 
```

与 www。没有它

对于 www.parked.com 到 folder3 也是如此

以及通过例如 www.domain.com/folder1 访问 folder1 的任何尝试，然后它仅在 folder2 内而不是在 public_html 内搜索 folder1 。

我将非常感谢您的帮助

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:13:03.627

你的一些愿望

.htaccess

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)forum.domain.com [NC]
RewriteRule ^(.*)$ http://www.domain.com/folder2/forum/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^(www\.)support.domain.com [NC]
RewriteRule ^(.*)$ http://www.domain.com/folder2/support/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^(www\.)domain.com [NC]
RewriteRule ^(.*)$ http://www.domain.com/folder2/$1 [R=301,L] 
```

**编辑：**

所以，如果输入是 url

**www.domain.com/index.html**您将被重定向到

**www.domain.com/folder2/index.html**

条件

```
RewriteCond %{HTTP_HOST} ^(www\.)domain.com [NC] 
```

方法：

如果%{HTTP_HOST} 中有“ **domain.com ”，请执行****规则**

```
RewriteRule ^(.*)$ http://www.domain.com/folder2/$1 [R=301,L] 
```

方法：

*   $1 是一个变量。如果请求是针对[http://example.com/foo/bar](http://example.com/foo/bar)的，那么 %1 将包含 example.com 而 $1 将包含 foo/bar。

[你看到这个页面这是一个很好的解释](http://httpd.apache.org/docs/2.2/rewrite/intro.html#regex)

*   对于浏览器中的**每个测试**，不要忘记**清除浏览器缓存**

# php - 如何制作随时间减少的威尔逊分数区间

> ID：11680126
> 
> 赞同：10
> 
> 时间：2012-07-27T00:56:52.697
> 
> 标签：php, mysql, algorithm, rating-system

所以我正在研究一个威尔逊分数区间来整理我网站上的热门内容，但现在它只是静态的。我的意思是它会一直保持相同的分数，直到有人投赞成票或反对票。

这就是为什么我想实现分数随时间降低的原因。就像在这篇文章中一样。[Reddit 排名算法如何工作](http://amix.dk/blog/post/19588)。在那篇文章中，他们解释了 Reddit 在内容上的得分会随着时间的推移而降低。

目前我有这个 php 函数，它可以根据上下投票给我一个分数：

```
function wilsonScore($up, $down)
{

    $score = (($up + 1.9208) / ($up + $down) - 1.96 * sqrt(($up * $down) / 
             ($up + $down) + 0.9604) / ($up + $down)) / (1 + 3.8416 / ($up + $down)) ;

    return $score;
} 
```

我希望分数相同，但在整理时向 SQL 代码添加一些内容。

SQL 代码如下所示：

```
SELECT *
FROM photos
WHERE   status = 0 
    AND net_votes > 0          // display only picture that got rated over 0
ORDER BY score DESC 
```

我的一个想法是最终得到一种算法，该算法会以对数方式降低分数，在发布的前 1-2-3 天，时间不会对分数产生太大影响，然后分数开始下降。

## 编辑

在分数上添加一些东西在理论上是否可行，以便用户在网站上获得的声誉（如 SO）越多，他的评分就越值得？互联网上是否已经存在类似的东西？

这里有人已经在这里使用过这样的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:59:04.367

您可以在 SQL 中执行此操作：

```
$sql = "SELECT  `up`,
                `down`, 
                `date`, 
                (((`up` + 1.9208) / (`up` + `down`) - 1.96 * SQRT((`up` * `down`) / (`up` + `down`) + 0.9604) / (`up` + `down`)) / (1 + 3.8416 / (`up` + `down`))) AS `wilson`, 
                ((((`up` + 1.9208) / (`up` + `down`) - 1.96 * SQRT((`up` * `down`) / (`up` + `down`) + 0.9604) / (`up` + `down`)) / (1 + 3.8416 / (`up` + `down`))) / LN(DATEDIFF(NOW(), `date`) + EXP(1))) AS `weighted_wilson` 

    FROM        `photos`

    ORDER BY    `weighted_wilson` DESC
    "; 
```

使用自然对数衰减（调整为从原始威尔逊分数开始）。显然，您可以使用这些值。

您当然可以调整每个用户授予的向上或向下投票数（即有经验的用户授予更大的向上/向下运动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:53:06.670

所以本质上，每次调用该函数时您都会生成该分数，并且每次显示该函数时都调用该函数？那么我要做的是用以下成员创建一个分数对象，这些成员反映了数据库中的一些行

```
$score->id; //int
$score->score; //float
$score->up; //int
$score->down; //int
$score->last_vote; //timestamp 
```

每次有人投赞成票或反对票时，您都会从那里处理一个新分数。每次有人查看它时，您都不必重新处理它，除非您也想考虑这一点。您还可以每天运行一次 cron 作业来惩罚长时间未更新的分数。

# jsf - JSF valueChangeListener 不起作用

> ID：11680127
> 
> 赞同：2
> 
> 时间：2012-07-27T00:56:55.157
> 
> 标签：jsf, selectonemenu, valuechangelistener

你好我有一个这样的jsp页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>title</title>
</head>
<body>
<f:view>
    <f:loadBundle basename="amdocs.gcreport.messages" var="msg" />
    <h:panelGrid columns="1">
        <h:outputLabel value="#{msg.environmens}"></h:outputLabel>
    </h:panelGrid>
    <h:panelGrid columns="1">
        <h:selectOneMenu id="selectEnv" value="#{gCAnalyzerController.envName}" onchange="submit();" valueChangeListener="#{gCAnalyzerController.envValueChange}" >
                <f:selectItems value="#{gCAnalyzerController.envs}" var="env" itemValue="#{env.name}"/>
        </h:selectOneMenu>  
    </h:panelGrid>
.
.
. 
```

每当我更改此下拉列表框中的值时，应在 bean 类中调用函数 envValueChange。但是，当在 IE 中运行这段代码时，出现异常“错误：预期对象”，当尝试在 google chrome 中调试时，出现以下异常。

未捕获的 ReferenceError：未定义提交 GCAnalyzerView.jsp:15 onchange

看起来 javascript submit() 没有在任何地方定义，所以页面无法加载它，谁能告诉我应该在哪里以及如何实现这个 javascript 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-12T09:34:24.160

*OP的解决方案。*

代码应包含在提交的表单标签中。

```
<h:form>
    <h:panelGrid columns="1">
        <h:outputLabel value="#{msg.environmens}"></h:outputLabel>
    </h:panelGrid>
    <h:panelGrid columns="1">
        <h:selectOneMenu id="selectEnv" value="#{gCAnalyzerController.envName}" onchange="submit();" valueChangeListener="#{gCAnalyzerController.envValueChange}" >
                <f:selectItems value="#{gCAnalyzerController.envs}" var="env" itemValue="#{env.name}"/>
        </h:selectOneMenu>  
    </h:panelGrid>
</h:form> 
```

# python - 什么是胶水语言？

> ID：11680128
> 
> 赞同：10
> 
> 时间：2012-07-27T00:57:11.340
> 
> 标签：python, perl, architecture, scripting

首先，这是我最喜欢的和相关的 XKCD：![http://imgs.xkcd.com/comics/lisp.jpg](../Images/007c8d4b9aef9bf47b017984afda0da7.png)

我经常听到有人提到 Perl 或 Python 作为“胶水”语言。我知道作为脚本语言与它有关。你能解释一下使用胶水语言意味着什么，以及为什么这些语言适合这个目的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T01:02:06.093

这类似于脚本语言的原始含义，并且符合 UNIX 结合许多小型通用工具来创建专门应用程序的理念：

您不用该语言编写完整的应用程序，而是使用该语言来编排用（可能有许多不同的）其他语言编写的模块，使它们一起工作以形成应用程序。胶水语言可以很容易地做到这一点（方便的语法，对进程间通信和数据修改的良好支持，没有编译步骤等）。

# sql - 使用 nexted 连接查询需要很长时间

> ID：11680129
> 
> 赞同：1
> 
> 时间：2012-07-27T00:57:22.667
> 
> 标签：sql

我有 4 个表： 域：：有很多 => 渠道：has_many => 销售：has_many => 访问

我正在尝试获取此查询中每个域的所有域、渠道计数、销售计数和访问计数：

```
SELECT
    kd.id, kd.domain,
    COUNT(distinct kc.id) AS channels_count,
    COUNT(distinct kv.id) AS visits_count,
    COUNT(distinct kv.ip_address) AS visitors_count,
    COUNT(distinct ks.id) AS sales_count
FROM
    domains AS kd
LEFT JOIN
    channels AS kc
    ON(kc.domain_id=kd.id)
LEFT JOIN
    sales AS ks
    ON(ks.channel_id=kc.id)
LEFT JOIN
    visits AS kv
    ON(kv.channel_id=kc.id)
GROUP BY kd.id 
```

我在销售和访问表中有几千条记录，没什么大不了的，但我的查询需要很长时间。它永远不会回来。知道为什么吗？

数据库：postgresql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:07:49.937

COUNT(DISTINCT) 可能会占用资源。此外，您的表可能在“kd.id”列上有许多重复项，导致生成数以亿计的行。

一种更有效的方法是先进行聚合，然后将结果连接在一起。我认为以下查询可以满足您的要求（我假设每个表中的 id 列都是唯一的）：

```
SELECT kd.id, kd.domain, channels_count, visits_count,
       visitors_count, sales_count
FROM domains kd LEFT JOIN
     (select kc.domain_id, count(*) as channels_count
      from channels kc
      group by kc.domain_id
     ) kc
     ON(kc.domain_id=kd.id) LEFT JOIN
     (select ks.channel_id, count(*) as sales_count
      from sales ks
      group by ks.channel_id
     ) ks
     ON(ks.channel_id=kc.id) LEFT JOIN
     (select kv.channel_id, count(*) as visits_count,
             count(distinct ipaddress) as visitors_count
      from visits kv
      on kv.channel_id
     )
     ON(kv.channel_id=kc.id) 
```

按 kd.id 分组

# facebook-apps - 画布应用程序的空白屏幕

> ID：11680132
> 
> 赞同：0
> 
> 时间：2012-07-27T00:58:23.130
> 
> 标签：facebook-apps, facebook-canvas

我遵循了本教程[Gath Adams 教程：如何在 10 分钟内编写一个 facebook 应用程序](http://gathadams.com/2007/06/18/how-to-write-a-facebook-application-in-10-minutes/)

我可以看出，当我尝试制作这个演示应用程序时，看到只有 50% 左右的字段名称与我最终看到的匹配，这有点过时了，但我认为有必要进行了更改。这是我的字段的照片：* *没关系，显然作为新海报，我无法发布图像。我将列出主要领域：

命名空间：gathguessgame

画布 URL：[http://[pseudoDomainName]/guessdemo/](http://[pseudoDomainName]/guessdemo/)

安全画布 URL：[https://[pseudoDomainName]/guessdemo/](https://[pseudoDomainName]/guessdemo/)

画布页面：[http ://apps.facebook.com/gathguessgame](http://apps.facebook.com/gathguessgame)

我的网络服务器的guessdemo 目录中唯一的文件是一个临时的“服务条款”（htm）、一个临时的“隐私政策”（htm）和一份教程的简单游戏代码（“guess.htm”）。让这个演示应用程序为教程的作者工作似乎很简单，但是当我转到画布页面 url 时，我只是得到一个空白画布。我需要哪些其他基本组件可能是新的且未包含在本教程中才能让这个演示应用程序在 facebook 中运行？我很感激你们能给我的任何帮助！

我试过的：

*   确保网站处理所有动词（[https://www.supportsages.com/http-405-the-http-verb-used-to-access-this-page-is-not-allowed/](https://www.supportsages.com/http-405-the-http-verb-used-to-access-this-page-is-not-allowed/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:19:00.880

这很可能是权限问题，但我从来没有让它自己工作（可能与使用 Windows 服务器有关）。无论如何，我的同事尝试了不同的 Linux 服务器并让它运行良好。感谢您的反馈，CBroe。

# jsf - Maven-JSF Primefaces EL nullPointerException 与 primefaces 应答器有关

> ID：11680141
> 
> 赞同：1
> 
> 时间：2012-07-27T00:59:40.253
> 
> 标签：jsf, jakarta-ee, maven, primefaces, el

我有一些 .xhtml hsf 页面，我在其中使用 primefaces 和 EL，当尝试对这些页面做一些事情时，我得到一个`java.lang.NullPointerException`我认为这是因为我无法获得我在 xhtml 文件中的相关 EL 表达式：

```
 javax.faces.el.EvaluationException: java.lang.NullPointerException
        at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:98)
        at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:98)
        at javax.faces.component.UICommand.broadcast(UICommand.java:311)
        at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:790)
    ....
javax.faces.FacesException: #{userMB.addUser}: java.lang.NullPointerException
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:114) 
```

我认为问题不在于 EL 依赖项，因为我已经在没有 primefaces 应答器的其他 jsf 文件中使用了它，另一件确认是 eclipse 强调了声明以及所有包含 EL 声明`xmlns:p="http://primefaces.org/ui"`的应答器。`<td><p:inputText id="name" value="#{userMB.name}">`但是，我将 primefaces 完全添加到项目的 pom.xml 中：

```
<!-- Primefaces library -->
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>3.1.1</version>
        </dependency>
        <dependency>  
    <groupId>org.primefaces.themes</groupId>  
    <artifactId>redmond</artifactId>  
    <version>1.0.6</version>  
    </dependency> 
...
<repository>
            <id>prime-repo</id>
            <name>PrimeFaces Maven Repository</name>
            <url>http://repository.primefaces.org</url>
            <layout>default</layout>
        </repository> 
```

我可以正确访问所有 jsf 页面，除了那些包含由 eclipse 使用的 primefaces 'p:' 声明的页面。

我不确定我是否理解异常，因此有一个完整的快照：

```
 Jul 27, 2012 2:44:27 AM com.sun.faces.application.ActionListenerImpl processAction
SEVERE: java.lang.NullPointerException
javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:98)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:98)
    at javax.faces.component.UICommand.broadcast(UICommand.java:311)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:790)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1255)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:334)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at com.stage.beans.UserManagedBean.addUser(UserManagedBean.java:58)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:234)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:84)
    ... 20 more

Jul 27, 2012 2:44:27 AM com.sun.faces.lifecycle.InvokeApplicationPhase execute
WARNING: #{userMB.addUser}: java.lang.NullPointerException
javax.faces.FacesException: #{userMB.addUser}: java.lang.NullPointerException
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:114)
    at javax.faces.component.UICommand.broadcast(UICommand.java:311)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:790)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1255)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:334)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:98)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:98)
    ... 19 more
Caused by: java.lang.NullPointerException
    at com.stage.beans.UserManagedBean.addUser(UserManagedBean.java:58)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:234)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:84)
    ... 20 more 
```

我很确定我配置了我的配置文件，但这是它们的一些快照：

来自我的 web.xml：

```
<listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>
    <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
        </listener>
            <listener>
            <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
          </listener>

      <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
      </servlet> 
```

从我的 faces-config.xml ：

```
<application>
        <el-resolver>
            org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
    </application> 
```

谢谢你的帮助

# xml - 有没有比在 DocBook 中重用复杂表格更好的方法？

> ID：11680142
> 
> 赞同：3
> 
> 时间：2012-07-27T01:00:02.773
> 
> 标签：xml, xsd, reusability, docbook

考虑 test.xml 中的 DocBook 文章，其中包含`<informaltable>`在每个部分的开头重复的一个。还要考虑到`<informaltable>`实际上比这个例子显示的要复杂得多。

`<informaltable>`这个例子使用外部`<!ENTITY ... SYSTEM ...>`声明实现了复杂的重用。复杂`<informaltable>`的是在另一个名为reusedtable.xml 的文件中。

### 测试.xml

```
<!DOCTYPE article [<!ENTITY ReusedTable SYSTEM "reusedtable.xml">]>

<article xmlns="http://docbook.org/ns/docbook"
xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0">
<info>
    <title>Article Template Title</title>
</info>
<section>
    <title>first title</title>
    &ReusedTable;
</section>
<section>
    <title>Second Title</title>
    &ReusedTable;
</section>
</article> 
```

### 重用table.xml

包含重用表的文件。

```
<informaltable>
    <tgroup cols='2'>
        <tbody>
            <row>
                <entry>YES</entry>
                <entry>NO</entry>
            </row>
        </tbody>
    </tgroup>
</informaltable> 
```

[这是输出的样子](http://i.stack.imgur.com/MG2qP.png)

这种方法有效，但似乎有点尴尬和有限。所以它给我留下了以下问题：

1.  有没有办法在`<informaltable>`不创建第二个 .xml 文件的情况下完成我的重用？
2.  有没有办法完成我的重用，`<informaltable>`以便我可以参数化表格？

例如，我希望能够在我的 docbook 文章中表达一个 ReusedTable 实例的存在，其中填充了不同的内容，如下所示，

### test2.xml

```
<article xmlns="http://docbook.org/ns/docbook"
xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0">
<info>
    <title>Article Template Title</title>
</info>
<section>
    <title>first title</title>
    <ReusedTable>
        <firstcol>true</firstcol>
        <seccol>false</seccol>
    </ReusedTable>    </section>
<section>
    <title>Second Title</title>
    <ReusedTable>
        <firstcol>yes</firstcol>
        <seccol>no</seccol>
    </ReusedTable>
</section>
</article> 
```

并让发布的输出[看起来像这样](http://i.stack.imgur.com/sUHDp.png)，其中 ReusedTable 的设计被定义一次，每个 ReusedTable 实例中的单元格内容来自表格将出现的文章中的标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:08:43.013

包含复杂表（或其他部分）的更好方法可能是通过 XInclude 另请参阅此问题和答案[Can ENTITY 声明可以嵌套在引用的 XML 文件中吗？](https://stackoverflow.com/questions/2923273/can-entity-declarations-be-nested-in-referenced-xml-files) 由于每个表格的内容不同，因此在渲染过程中无法动态更新该内容。如果这确实是您需要的，那么解决问题的一种方法是通过一个小程序将（复杂）表生成为单独的 xml 文件。并通过 XInclude 将这些单独的 xml 文件包含在您的文档中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:08:41.380

> 1.  有没有办法在`<informaltable>`不创建第二个 .xml 文件的情况下完成我的重用？

是的，也可以通过声明一个实体但通过在声明中`<informaltable>`省略`SYSTEM`关键字来放置内联。这完全消除了对另一个文件的需要。原始问题中的 Test.xml 看起来像这样，内联实体声明：

### 测试.xml

```
<!DOCTYPE article [
<!ENTITY ReusedTable "
<informaltable>
    <tgroup cols='2'>
        <tbody>
            <row>
                <entry>YES</entry>
                <entry>NO</entry>
            </row>
        </tbody>
    </tgroup>
</informaltable>
">
]>

<article xmlns="http://docbook.org/ns/docbook"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0">
    <info>
        <title>Article Template Title</title>
    </info>
    <section>
        <title>first title</title>
        &ReusedTable;
    </section>
    <section>
        <title>Second Title</title>
        &ReusedTable;
    </section>
</article> 
```

# javascript - chrome 中的 document.lastModified

> ID：11680148
> 
> 赞同：4
> 
> 时间：2012-07-27T01:01:33.493
> 
> 标签：javascript, html, google-chrome

我有一个网页显示上次使用`document.write(document.lastModified)`. 当我在 Chrome 和 Firefox 中查看页面时，我得到了两个不同的结果。Firefox 正确显示时间 - 在我的当地时间。Chrome 以 UTC 显示。

1.  如何让 Chrome 在 (a) 正在查看页面的人的本地时间或 (b) 在 PDT/PST 中显示日期时间（更简单）

2.  是否有在 Chrome 和 Firefox（以及其他）上显示本地时间的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:11:19.290

我已经检查过它是如何在谷歌浏览器上完成的，但坦率地说，除了你可以使用的这两种方法之外，我找不到任何有用的东西。

我相信这个方法可以帮助你：

```
function ToLocalDate (inDate) {
    var date = new Date();
    date.setTime(inDate.valueOf() - 60000 * inDate.getTimezoneOffset());
    return date;
} 
```

只需检查浏览器类型并在之后相应地调用此方法。

或者您也可以使用以下方法：

```
var utc_string = '2011-09-05 20:05:15';
var local_string = (function(dtstr) {
    var t0 = new Date(dtstr);
    var t1 = Date.parse(t0.toUTCString().replace('GMT', ''));
    var t2 = (2 * t0) - t1;
    return new Date(t2).toString();
})(utc_string); 
```

这些答案取自这个地址：[Convert UTC Epoch to local date with javascript](https://stackoverflow.com/questions/4631928/convert-utc-epoch-to-local-date-with-javascript)

# javascript - JQuery 和 HTML5 音频进度条不起作用

> ID：11680149
> 
> 赞同：0
> 
> 时间：2012-07-27T01:01:34.627
> 
> 标签：javascript, jquery, html, audio

```
<html>
    <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
        <script>
            $(document).ready(function(){

                var counter = 0;
                $("#play-bt").click(function(){
                    $(".audio-player")[counter].play();
                    $("#message").text("Music started");
                })

                $("#pause-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $("#message").text("Music paused");
                })

                $("#stop-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    $("#message").text("Music Stopped");
                })

                $("#next-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    counter++;
                    $(".audio-player")[counter].play();
                    $("#message").text("Music started");
                })

                $("#prev-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    counter--;
                    $(".audio-player")[counter].play();
                    $("#message").text("Music started");
                })

                $(".audio-player").bind('timeupdate', function(){

                    var track_length = $(".audio-player")[counter].duration;
                     var secs = $(".audio-player")[counter].currentTime;
                    var progress = (secs/track_length) * 100;

                     $('#progress').css({'width' : progress * 2});

                    var tcMins = parseInt(secs/60);
                    var tcSecs = parseInt(secs - (tcMins * 60));

                    if (tcSecs < 10) { tcSecs = '0' + tcSecs; }

                    // Display the time
                    $('#timecode').html(tcMins + ':' + tcSecs);
                })

            })
        </script>
            <style>

            </style>
    </head>
<body>
            <div class = "div.jp-audio"><audio class ="audio-player"  name= "audio-player" src="01-Breakin-A-Sweat-Zedd-Remix.mp3" ></audio></div>
            <div class = "div.jp-audio"><audio class ="audio-player" name= "audio-player" src="01-hard_rock_sofa-quasar.mp3" ></audio></div>
            <div id="message"></div>
            <div id = "playerContainer">
                <ul id = "playerControls">
                    <li><a id="play-bt" href="#">Play music</a></li> <li> <a id="pause-bt" href="#">Pause music</a></li> 
                    <li><a id="stop-bt" href="#">Stop music</a></li>  <li><a id = "next-bt" href ="#">Next Track</a></li> 
                    <li><a id = "prev-bt" href ="#">Previous Track</a></li>
                </ul>

                <span id="timecode"></span>
                 <span id="progressContainer">
                   <span id="timecode"></span>
                   <span id="progress"></span>
                 </span>
            </div>
    </body>
</html> 
```

一切正常。代码确实做了它需要的事情，但显然进度条不起作用并显示为什么会这样？我检查了我的控制台，但没有显示任何错误。如何显示当前正在播放的歌曲的进度条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:57:11.323

不要在进度条和容器中使用内联元素。尝试使用 div 而不是 span，并给它一些额外的样式以便您可以看到它（例如，背景颜色和尺寸）。您对进度条的宽度计算应该是百分比而不是 px。

另外，我建议只使用单个音频元素并使用 jQuery 更新源，而不是让多个音频元素绑定多个处理程序。 [javascript中的HTML5设置音频源不起作用](https://stackoverflow.com/questions/7928562/html5-setting-audio-source-in-javascript-not-working)

这仅适用于 Chrome，如果您希望它在 Firefox 中运行，您需要添加 ogg 文件。

```
<html>
    <head>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js "></script>
        <script>
            $(document).ready(function(){

                var counter = 0;
                $("#play-bt").click(function(){
                    $(".audio-player")[counter].play();
                    $("#message").text("Music started");
                })

                $("#pause-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $("#message").text("Music paused");
                })

                $("#stop-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    $("#message").text("Music Stopped");
                })

                $("#next-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    counter++;
                    $(".audio-player")[counter].play();
                    $("#message").text("Music started");
                })

                $("#prev-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    counter--;
                    $(".audio-player")[counter].play();
                    $("#message").text("Music started");
                })

                $(".audio-player").bind('timeupdate', function(){

                    var track_length = $(".audio-player")[counter].duration;
                    var secs = $(".audio-player")[counter].currentTime;
                    var progress = (secs/track_length) * 100;

                     $('#progress').css({'width' : progress + "%"});

                    var tcMins = parseInt(secs/60);
                    var tcSecs = parseInt(secs - (tcMins * 60));

                    if (tcSecs < 10) { tcSecs = '0' + tcSecs; }

                    // Display the time
                    $('#timecode').html(tcMins + ':' + tcSecs);
                })

            })
        </script>
    </head>
<body>
            <div class = "jp-audio"><audio class ="audio-player"  name= "audio-player" src="01-Breakin-A-Sweat-Zedd-Remix.mp3" ></audio></div>
            <div class = "jp-audio"><audio class ="audio-player" name= "audio-player" src="01-hard_rock_sofa-quasar.mp3" ></audio></div>
            <div id="message"></div>
            <div id = "playerContainer">
                <ul id = "playerControls">
                    <li><a id="play-bt" href="#">Play music</a></li> <li> <a id="pause-bt" href="#">Pause music</a></li> 
                    <li><a id="stop-bt" href="#">Stop music</a></li>  <li><a id = "next-bt" href ="#">Next Track</a></li> 
                    <li><a id = "prev-bt" href ="#">Previous Track</a></li>
                </ul>

                 <div id="progressContainer" style="width: 250px;">
                   <div id="timecode"></div>
                   <div id="progress" style="height: 10px; background-color: red; width: 0%;"></div>
                 </div>
            </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T01:29:51.623

您可以添加控件属性。喜欢

```
<audio controls="controls">
  <source src="song.ogg" type="audio/ogg" />
  <source src="song.mp3" type="audio/mpeg" />
  Your browser does not support the audio element.
</audio> 
```

ps firefox 只支持ogg。

# qt - Qt：与滚动条的坐标？

> ID：11680154
> 
> 赞同：0
> 
> 时间：2012-07-27T01:02:11.710
> 
> 标签：qt, widget, scrollbar, qtablewidget

我有一个`MyTable`包含`QTableWidget *table`. 这个 QTableWidget 有一个列的标题`QHeaderView *header`，由

```
table->horizontalHeaderView() 
```

好的，现在我想在标题的第 n°1 部分绘制一个小部件。目前，我使用：

```
QWidget *widget(header);
widget->setGeometry(header->sectionPosition(1), 0, header->sectionSize(1), header->height()); 
```

每次标题几何更改以及每次更改时都会更新小部件几何`table->horizontalScrollBar()`。

问题是当前版本有问题，因为考虑到滚动条位置，似乎没有绘制小部件。也许我必须更改坐标，`widget->setGeometry`但我不知道如何...

如何考虑滚动条的位置以在正确的位置绘制我的小部件？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:18:22.303

好的，找到解决方案：

```
QWidget *widget(header);
widget->setGeometry(header->sectionPosition(1)-header->offset(), 0, header->sectionSize(1), header->height()); 
```

# ruby-on-rails - 读取文件时 Rake 任务给出未定义的方法错误

> ID：11680157
> 
> 赞同：0
> 
> 时间：2012-07-27T01:02:26.173
> 
> 标签：ruby-on-rails, rake

我有一个 rake 任务可以更改某些页面上的元标记。

```
desc 'changes the meta tags'
task mixup_meta_tags: :environment do 
  meta_tags = ['index','noindex','index,nofollow','nofollow,noindex']
  new_tag = meta_tags.sample(1)[0]
  #
  #iterate through html docs
  base = 'app/views/site'
  pages = ['home','about','products','pricing']
  pages.each do |page|
    filename = base + '/' + page + '.html.haml'
    text = File.read(filename)
    current_tag = Nokogiri::HTML(File.open(filename, "r")).xpath("//meta[@name='robots']").first["content"]
    File.open(filename, "w") { |file| file << text.gsub(current_tag,new_tag)}
  end   
end 
```

我收到一条神秘的错误消息：

nil:NilClass 的未定义方法“[]”

关于这条线：

```
current_tag = Nokogiri::HTML(File.open(filename,"r")).xpath("//meta[@name='robots']").first["content"] 
```

这一行应该弄清楚当前标签是什么，以便可以替换它们（通过下一行代码）。

关于这里不合适的地方有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:22:01.753

它是说

```
File.open(filename,"r")).xpath("//meta[@name='robots']").first 
```

是`nil`或基本上

```
File.open(filename,"r")).xpath("//meta[@name='robots']").empty?  # true 
```

# c++ - 如何使用 CMake 选择性地链接静态或动态 boost 库？

> ID：11680168
> 
> 赞同：9
> 
> 时间：2012-07-27T01:03:49.660
> 
> 标签：c++, boost, cmake

我有一个 CMake 项目，有时我想针对静态 boost 库进行编译，但我也想让使用 cmake GUI 中的动态库变得容易。在我的顶级 CMakeLists.txt 我有这个：

```
option(USE_STATIC_BOOST "Build with static BOOST libraries instead of dynamic" NO) 
```

然后在另一个文件中，我设置了以下逻辑：

```
if(USE_STATIC_BOOST)
   unset(Boost_LIBRARIES)
   message(WARNING "Linking against boost static libraries")
   set(Boost_USE_STATIC_LIBS ON)
   set(Boost_USE_MULTITHREADED ON)
   find_package(Boost REQUIRED COMPONENTS thread program_options system)
else(USE_STATIC_BOOST)
   unset(Boost_LIBRARIES)
   message(WARNING "Linking against boost dynamic libraries")
   set(Boost_USE_STATIC_LIBS OFF)
   set(Boost_USE_MULTITHREADED ON)
   find_package(Boost REQUIRED COMPONENTS thread program_options system)
endif(USE_STATIC_BOOST) 
```

如果我从头开始并使用，这似乎工作正常：

```
cmake ../.. -DUSE_STATIC_BOOST=YES 
```

但是，当我使用

```
ccmake ../.. 
```

无论我做什么，我都无法让它使用静态库。CMake 似乎在启动时将动态选项加载到缓存中，并且更改 USE_STATIC_BOOST 不会切换它。我什至试图 unset(Boost_LIBRARIES) 明确清除它。有没有办法做我想做的事？

使用 x86_64 Linux 和 g++ 编译。提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T12:51:51.050

要强制[FindBoost](https://cmake.org/cmake/help/latest/module/FindBoost.html) CMake 模块再次搜索所需的库，您必须清除缓存变量`Boost_INCLUDE_DIR`和`Boost_LIBRARY_DIRS`，即：

```
set(Boost_USE_STATIC_LIBS ${USE_STATIC_BOOST})
set(Boost_USE_MULTITHREADED ON)
unset(Boost_INCLUDE_DIR CACHE)
unset(Boost_LIBRARY_DIRS CACHE)
find_package(Boost REQUIRED COMPONENTS thread program_options system)
if(USE_STATIC_BOOST)
   message(STATUS "Linking against boost static libraries")
else()
   message(STATUS "Linking against boost dynamic libraries")
endif() 
```

请注意，该参数`CACHE`是使[unset](https://cmake.org/cmake/help/latest/command/unset.html)命令清除缓存中的变量所必需的。

另请注意，一旦选项变量`USE_STATIC_BOOST`被缓存，您需要从命令行显式设置变量或编辑缓存文件中的值以使 CMake 注意到更改：

```
cmake ../.. -DUSE_STATIC_BOOST=NO 
```

# php - 从 javascript 到 php 使用带有 ID 列表的 $_GET 删除多行 MySQL

> ID：11680172
> 
> 赞同：0
> 
> 时间：2012-07-27T01:04:08.637
> 
> 标签：php, mysql

我在这个上花了几个小时没有运气。我正在尝试删除标有复选框并按下删除按钮的列表元素。每个复选框都有一个与实际 ID 列值相关的 html id 属性。我正在使用 MySQL 语句根据适当的 id 删除行（我可以从 html 中删除元素，但不能从 MySQL 表中删除）

```
"DELETE FROM todolist WHERE ID IN (".$_GET['id'].")" 
```

例如 id...id="456,444,454"

javascript 通过并找到复选框的 id 值并将它们发送到 php 文件。这部分很好。从警报声明中，我可以验证它提供了正确的 ID。这是按下删除按钮时调用的方法。

```
function removeCheckedTask(){
var checkBoxes = $('toDoList').getElementsByClassName('box');
var deletedID = new Array(); var indexID =0;
for (var i = 0; i < checkBoxes.length; i++) {
  if (checkBoxes[i].checked){
        deletedID[indexID]=checkBoxes[i].getAttribute('id');indexID++;
        var par = checkBoxes[i].parentNode;
        $('toDoList').removeChild(par);
        i--;
        for(var a=i+1; a<checkBoxes.length; a++){//moves other elements
            par = checkBoxes[a].parentNode;
            par.style.top = (a*40)+"px";
        }
    }

}
if(deletedID.length>0){
    $('message').innerHTML = "Just a second..."
    // Set te random number to add to URL request
    nocache = Math.random();
    // Pass the login variables like URL variable
    var ids = 'id='+deletedID[0];
    for(var i=1; i<deletedID.length; i++){
        ids+= ',' + deletedID[i];
    }
    alert('removeTasks.php?'+ids);
    http.open('get', 'removeTasks.php?'+ids);
    http.onreadystatechange = deleteReply;
    http.send(null);
    }
    function deleteReply() {
    if(http.readyState == 4){ 
        var response = http.responseText;
        $('message').innerHTML = 'Task removed:'+response;
    }
}

resetIDs();//resets ids of list elements, don't worry about it 
```

}

这是我的 php 代码，没有连接的东西。它使它成为 is 语句。

```
if(isset($_GET['id'])){
   $q+="DELETE FROM todolist WHERE ID IN (".$_GET['id'].")"; //line 13
   mysql_query($q) or die(mysql_error());
echo "tried to delete stuff";
} else { 
echo("Bad delete");
} 
```

当我对 $q 字符串进行更改时，响应回显发生了一些变化，但是最近使用这个简单的版本，它一直在打印 MySQL 错误-

注意：未定义的变量：第 13 行 C:\xampp\htdocs\todo\removeTasks.php 中的 q 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“0”附近使用正确的语法。如何进入 if 语句然后说它是未定义的？

如果我使用

```
"DELETE FROM todolist WHERE ID IN ("+$_GET['id']+")" 
```

我收到错误通知：第 13 行 C:\xampp\htdocs\todo\removeTasks.php 中的未定义变量：q 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“457”附近使用正确的语法。

457 是第一个 ID。

这里和 mysql 都是新的，所以如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:25:28.773

您收到通知，因为您的变量“q”未定义，您尝试向其中添加一些内容。你会得到一个 sql 错误，因为“+”是 php 中的数字，与 javascript 不同。所以你的 sql 语句可能会被转换为零，这就是你得到“0”错误的原因。正确的方法是：

```
$q .= "DELETE..."; 
```

此外，我宁愿建议单独调用每个查询，因为这样您就可以取回每个查询的结果（或错误）：

```
 $q = null;
 $ids = explode(",",$_GET["id"]);
 foreach($ids as $id) {
      $id = (int)$id; //VERY basic security thing
      $q = "DELETE FROM todolist WHERE ID = ".$id;
      mysql_query($q) or die(mysql_error());
 } 
```

你是在学习 php 还是它是一个实际的应用程序？因为正如之前有人所说，这不是一个好方法。GET 不应该用于对您的数据有永久更改的任何内容。您应该有一个 POST 表单和一些隐藏字段来检查请求是否真的来自该表单。你应该使用 mysql 转义函数，因为在你的查询之后可以插入任何东西。查找 mysql injections 以获取更多信息。

祝你好运

# playframework - 为什么模板引擎不渲染

> ID：11680173
> 
> 赞同：0
> 
> 时间：2012-07-27T01:04:22.003
> 
> 标签：playframework, playframework-2.0

当我在 login.scala.html 中编写下面的代码时，只显示单词“foo”，换句话说，永远不会显示“bar”。

```
<body>
    @{
        <span>bar</span>
        if(true)
        {
            <span>foo</span>
        }
    }

    @{
        <span>bar</span>
        for(i <- numbers)
        {
            <span>bar</span>
            <span>i.toString()</span>
        }
    }
</body> 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:03:54.877

当您使用块语句时，它返回最后一个表达式。

例如（在 REPL 中尝试）：

```
val a: Int = 10 
val b: Int = 20
{
a
b
} 
```

输出：

```
res0: Int = 20 
```

# algorithm - 最佳填充 DVD 进行刻录的算法是什么

> ID：11680174
> 
> 赞同：7
> 
> 时间：2012-07-27T01:05:01.067
> 
> 标签：algorithm, disk

给定数百 GB 不同大小的资产，填充一组蓝光光盘的最佳算法是什么？

我正在尝试整合大量旧 CDROM、DVD 和小型硬盘驱动器，并将所有内容放入由 MD5 签名索引的数据库中。肯定是一项艰巨的任务。

我目前所做的是按降序对资产大小（通常是目录大小）进行排序，开始在填充列表中插入最大的资产，跳过任何不适合的资产，直到我用完资产。它几乎可以立即运行，但如果有必要，我不介意一夜之间运行。

它通常给我 95% 或更多的利用率，但我确信有一种方法可以使用其他组合来提供更高的效率。对于像磁盘映像这样的大型项目，我可以通过这种原始方法获得相当低的利用率。

我的想法是一次获取所有资产组合，1 然后 2，然后 3，... 项目，并保持最高字节数 < 25,025,314,816 字节的运行值指向总和为它的数组。当我一次使用了这么多资产以至于没有一个组合适合时，停止并使用运行的最高计数器指向的数组。

这是最好的算法吗？

有 2 个 Perl 模块似乎可以胜任这项任务，Algorithm-Combinatorics 和 Math-Combinatorics。有什么更快、更稳定、更酷的建议吗？

我的方案是编写一个脚本来计算大量目录的大小，并显示要刻录的几十个磁盘的最佳内容。

而且，我不想只是逐个文件地填写文件，因为我希望整个目录都在同一张光盘上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T01:21:00.240

这是一个被称为[*装箱*](https://en.wikipedia.org/wiki/Bin_packing_problem)的 NP 完全问题。没有已知的多项式时间算法可以最佳地解决它。换句话说，如果不尝试所有的解决方案，就无法找到最佳解决方案。

从好的方面来说，一个非常简单的启发式方法，比如“将最大的剩余文件夹放在第一个有空间的磁盘上”，将保证您使用的磁盘数量少于最佳情况的两倍。（您可以阅读有关该问题的 Wikipedia 文章的更多详细信息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T01:16:01.803

该算法称为一维装箱。该算法非常快但不是最优的。您也可以使用蛮力算法，但搜索空间非常大。这是一个贪心算法的程序：[http ://www.phpclasses.org/package/2027-PHP-Pack-files-without-exceeding-a-given-size-limit.html](http://www.phpclasses.org/package/2027-PHP-Pack-files-without-exceeding-a-given-size-limit.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:40:53.410

The most practical method I have yet found to efficiently fill my Blu-Ray disks.

I make a list of fully qualified paths to all of the available files to burn.

Then (arbitrarily) decide on how many directory levels to consider a bunch or accept a command line option for it. This is to keep directories full of like items all together on a single blu-ray. There is also a STUFF option to insert the largest files first and when a file would cause an overflow, look to the next smaller one until you run out of files or space.

Make a hash with each directory as key and total size of the files it contains as the data. Also keep a parallel hash with the count of files per directory as slack space and directory overhead apparently add up and have to be accounted for.

Pick 22 as the magic number. If you have <= 22 directories, try all combinations to find the one closest to but not over 25.025 GB. If you have more than 22, just use the 22 largest. I use the Perl module Algorithm::Combinatorics to find all of the combinations. Through trial and mostly error, I determined that combinations of 21 items takes just a few seconds. 23 items takes many minutes which is longer than my attention span. 22 takes about 35 seconds.

An output directory is also accepted and checked for existing data. There is an option to move the files (copy, check size and unlink).

Every time I bought a new hard drive, it was usually twice as large as the previous one so I would just copy everything over. With a Nikon D800E (Extreme!), HDR and Panoramas, I finally ran out of space.

My project was to unique, weed and consolidate 15 years worth of [mostly junk] photos, videos, movies, music, etc. I inventoried roughly a dozen storage devices, calculated MD5 signatures and put them all in a database. I picked one drive as master for pics and one for video and nuked everything else. I found 8 copies of some stuff!

I now have about 10 TB of free disk space!!!

Below the function which does all of the real work in case anybody is interested.

=============================================== Oops! Your answer couldn't be submitted because:

```
Your post appears to contain code that is not properly formatted as code 
```

The stupid web page mangled my pristine code. Sorry :(..

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-27T01:15:24.310

使用“背包”优化问题中的算法。

[http://en.wikipedia.org/wiki/Knapsack_problem](http://en.wikipedia.org/wiki/Knapsack_problem)

1.  将权重设置为等于文件大小
2.  设置值等于“重量”
3.  为要打包的每个后续磁盘运行算法

它可能不是最佳选择（它将最大化下一个磁盘的填充因子，而不是最小化所需的总磁盘数量），但它有据可查，并且很容易找到适用于您选择的编程语言的示例和工作代码（甚至电子表格）在网络上。

# r - 如何添加自己的函数以使用 R 中先前安装的包中的方法

> ID：11680175
> 
> 赞同：2
> 
> 时间：2012-07-27T01:05:05.330
> 
> 标签：r

我正在使用`rEMM`包并想添加一个与`fade`.

一点背景知识：此功能是基于数据的时间结构“淡化”数据流。权重计算为`w = 2^{-lambda t}`。我只想将此方法的权重修改为`1/(1+(T-t/c)^lambda)`. 在这种情况下，我必须将两个附加参数传递给新函数：`T`并`c`与原始`fade`函数进行比较。当前脚本之间的唯一区别似乎是`fade.R`第 24-30 行，我将在其中创建新的`lambda_factor`.

我完全不知道该怎么做。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:56:35.013

的作者`fade`似乎已公开`lambda`为您可以指定的参数。看看代码`showMethods(fade, includeDef=TRUE)`，一切都结束了`rEMM:::.fade`，我们看到的地方

```
> rEMM:::.fade
function (x, t = 1, lambda = NULL) 
{
    if (is.null(lambda)) 
        lambda_factor <- x@tnn_d$lambda_factor
    else lambda_factor <- 2^(-lambda)
    x@tnn_d$counts <- x@tnn_d$counts * lambda_factor^t
    x@tracds_d$mm <- smc_fade(x@tracds_d$mm, lambda_factor^t)
    invisible(x)
}
<environment: namespace:rEMM> 
```

所以与其写一个新函数，不如按`lambda`你喜欢的方式计算，转换成`lambda_factor`这个函数中使用的与转换一致

```
mylambda <- function(t, lambda, T, c)
    -log(1/(1+(T-t/c)^lambda)), 2) / t 
```

然后调用`fade`为

```
fade(x, t, mylambda(t, lambda, T, c)) 
```

? 将其进一步包装为

```
myfade <- function(x, t, lambda)
    fade(x, t, mylambda(t, lambda, T, c)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T06:50:47.663

如果您有当前淡入淡出功能的代码，如下所示：

```
fade <- function(...){
  ...
} 
```

只需复制该代码，进行所需的修改（您似乎知道自己想要什么），然后运行代码。您的新函数将出现在全局环境中，并且在您每次调用 fade(...) 时都会被调用。

# language-agnostic - “字母数字”哈希 - AZ，0-9

> ID：11680176
> 
> 赞同：17
> 
> 时间：2012-07-27T01:05:08.953
> 
> 标签：language-agnostic, hash, alphanumeric

我正在寻找一个将生成“字母数字哈希”的函数。给定一个源字符串，它会生成一个确定的结果字符串，该字符串可以包含任何字母 az 或数字 0-9，并且不能通过逆向工程来生成源。这将用于为基于机密数据的系统生成密码，因此 8 到 12 个字符之间的字符串是理想的，安全哈希也是理想的。

我在想我可以使用普通的按位哈希，将其异或折叠为 64 位（例如，如果我使用 SHA256），然后一次取 5 位结果（产生一个数字 0-31）并查找索引有序集合中使用的字符代码。有 26 个字母和 10 位数字，这意味着我必须省略一些（可能会删除如果手写可能会被误认为其他字符的字符）。64 位，一次 5 位，将产生一个 12 字符的字符串，剩下 4 位。

但是，我担心两件事：首先，通过采用非 2 的位数来引入偏差；其次，如何处理剩余的位。我是按原样使用它们，知道只有 16 种可能性，我是不使用它们（并丢失可能引入偏差的数据），还是我再合并一个位来制作一个 13 个字符的字符串（最后一位应该在哪里？来自）？

**编辑：**这是我目前的尝试；它需要一个可枚举的字节（就像大多数哈希算法产生的字节数组一样）并返回一个字符串：

```
 /// <summary>
    /// Converts an IEnumerable of bytes to a string representation which can have any lowercase letter a-z except for l, o, q and z, and any digit 0-9.
    /// Uses 5 bits of the byte array at a time to generate numbers from 0 to 31, which are then translated to letters or numbers.
    /// </summary>
    /// <param name="toConvert">the byte array to convert.</param>
    /// <returns>A string containing the alphanumeric case-insensitive representation of the bytes in the array.</returns>
    public static string ToInsensitiveAlphaNumericString(this IEnumerable<byte> toConvert)
    {
        var chars = new[]
                        {
                            'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'm', 'n', 'p', 'r', 's', 't',
                            'u', 'v', 'w', 'x', 'y', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'
                        };

        var enumerator = toConvert.GetEnumerator();
        enumerator.MoveNext();

        int buffer = enumerator.Current;
        short bufferLength = 8;
        const int valueLength = 5;

        var builder = new StringBuilder();

        while (true)
        {
            var value = buffer >> (bufferLength - valueLength);

            builder.Append(chars[value]);

            buffer = buffer - (value << (bufferLength - valueLength));
            bufferLength -= valueLength;

            if(bufferLength < valueLength )
            {
                if (enumerator.MoveNext())
                {
                    buffer = (buffer << 8) + enumerator.Current;
                    bufferLength += 8;
                }
                else
                {
                    //here's the main question; to include, or not to include?
                    if (bufferLength > 0)
                        builder.Append(chars[buffer]);
                    break;
                }
            }
        }

        return builder.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T01:09:18.380

如何生成您的 SHA256，然后对结果进行[Base36](http://en.wikipedia.org/wiki/Base_36)编码？没有剩余的比特，没有偏见......

这样，您就拥有了经过验证的算法的加密强度（记得加盐并使用多次哈希迭代）以及您需要的字母数字表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:15:30.080

如果你只是按原样使用这些位（这样一个字符只有 16 种可能性），你仍然有完整的 64 位熵。如果您对 64 位熵感到满意（听起来您就是这样），那么没有理由介意一个字符的范围有限。

如果您有某种理由（美学？）更喜欢所有字符都具有完整范围，那么您可以删除这 4 位，但您会将自己的熵降低到 60 位。如果您对 8 个字符的密码感到满意，那么听起来 60 位也足够了。

因此，无论哪一个更容易，都应该可以正常工作。

# php - 使用链接将数据发送到表单

> ID：11680179
> 
> 赞同：0
> 
> 时间：2012-07-27T01:06:21.257
> 
> 标签：php, jquery, mysql, json, jquery-easyui

我不知道做这个脚本，当点击链接时，它会发送数据到表单。我想做的是。当用户点击链接数据将出现在表单中。下面是我的链接。从数据库生成。

```
<div id="menu_bar"  region="west" split="true" title="Pages listing" style="width:200px;padding:10px;">
<?php 
$parent = mysql_query("select * from pages where parent = 0");
            echo "<ul id='sitemap'>";

        while($row = mysql_fetch_array($parent)){
            $parent_id = $row['id'];
            $parent_name = $row['name'];
        echo "<li><a href='#' onclick='editPage()'>$parent_name ($parent_id)</a>";
        echo "<ul>";
                $child = mysql_query("select * from pages where parent = '$parent_id'");
                while($row = mysql_fetch_array($child)){
                $child_id = $row['id'];
                $child_name = $row['name'];
                    echo "<li><a href='list2.php?id=$child_id' onclick='editPage()'>$child_name ($child_id)</a></li>";
                }
        echo "</ul>";
        }

        echo "</li>";
        echo "</ul>";
?>
</div> 
```

和形式。

基本信息
姓名：

父母：

顺序：

正文：

特殊：

请帮助我，我还在编程领域。我正在使用 PHP、JSON、JQUERY、EASY-UI。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:29:50.637

如果您想在新页面中编辑页面详细信息，则无需调用`onclick='editPage()'`而不是在 href 中传递页面 url。

```
<?php 
    $parent = mysql_query("select * from pages where parent = 0");
                echo "<ul id='sitemap'>";

            while($row = mysql_fetch_array($parent)){
                $parent_id = $row['id'];
                $parent_name = $row['name'];
            echo "<li><a href='edit_page.php?id=".$row['id']."' >$parent_name ($parent_id)</a>";
            echo "<ul>";
                    $child = mysql_query("select * from pages where parent = '$parent_id'");
                    while($row = mysql_fetch_array($child)){
                    $child_id = $row['id'];
                    $child_name = $row['name'];
                        echo "<li><a href='edit_page.php?id=".$row['id']."' >$child_name ($child_id)</a></li>";
                    }
            echo "</ul>";
            }

            echo "</li>";
            echo "</ul>";
    ?> 
```

编辑页面代码应该是这样的

```
<?php 
    $id = $_REQUEST['id'];
    //use ur table name here
    //I am considering that ur table contain all the required information
    $result = mysql_query("select * from table where id='".$id."'");
    $row = mysql_fetch_assoc($result);
    ?>
    <form>
    Name <input type="text" name="name" id="name" value="<?php echo $row['name']; ?>" />
    Parent <input type="text" name="name" id="name" value="<?php echo $row['parent']; ?>" />
    Order <input type="text" name="name" id="name" value="<?php echo $row['order']; ?>" />
    Body <input type="text" name="name" id="name" value="<?php echo $row['body_text']; ?>" />
    Special <input type="text" name="name" id="name" value="<?php echo $row['special']; ?>" />
    </form> 
```

希望这会帮助你。

# html - iframe 的好处及其主要用途

> ID：11680180
> 
> 赞同：-1
> 
> 时间：2012-07-27T01:07:09.063
> 
> 标签：html, iframe, web

我是一名网络开发人员，我已经进行了一些研究，但是我不确定我是否获得了与 iFrame 相关的所有信息。它已被各种 Web 应用程序广泛使用。

您能否帮助我了解 iframe 的一些主要用途以及他们为何如此频繁地使用它。请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:32:19.510

我一般不推荐 Iframe，但它们在某些事情上很方便。

我个人将它们用于模板预览：您有一个 CMS 系统，并且您有许多节点类型（文章/新闻/其他），并且您有一个管理页面，您可以在其中添加您的内容。现在，由于继承了 css 样式，因此您无法在那里有效地显示预览，您只需在某处打开一个带有模板页面的 iframe，然后您就会了解该页面在其环境中的实际外观。

出于这个原因（即单独的 css 和脚本环境），像 TinyMCE 或 Google Maps 这样的应用程序使用 Iframe。

# php - php水印会导致更大的文件

> ID：11680186
> 
> 赞同：0
> 
> 时间：2012-07-27T01:08:16.713
> 
> 标签：php, image, watermark

我使用了一个 3rdparty 图像合并水印脚本来为一些图像加水印，尽管它完成了这项工作，因为结果是文件夹/目录大小从 3GB 变为 9GB 是灾难性的。

所以我认为常规水印将是一个更好的选择，而不是图像覆盖，但我似乎无法找到任何关于 wm 背景只有文本的信息，我想要的是每个图像底部的白色部分覆盖和里面的文本部分，基本上与 9gag.com 类似，但位于图像顶部而不是下方。

**例子：**

![水印示例](../Images/72e02a313d38ab120e09012d481741ff.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T01:13:39.547

问题可能是输出设置。水印本身不应该添加到该过程中，但是在生成“新”图像时，优化/压缩设置很可能与原始图像不同（将其设置为低于原始图像的任何设置都不会获得任何质量，因为信息已经丢失，所以保持不变或设置更高）。

# jsp - 如何制作 URL 过滤器以使用 Servlet 路由操作？

> ID：11680192
> 
> 赞同：2
> 
> 时间：2012-07-27T01:09:56.997
> 
> 标签：jsp, url, servlets, routes

我目前正在开发一个 Java EE Web 框架，我想知道如何路由我的 URL……我想要支持 HMVC 功能！URL 将遵循以下规则：

/module_name/controller_name/action_name，其中：

module_name：由斜杠分隔的路径... 例如：模块“X”的子模块“Y”：/X/Y controller_name：没有特殊字符的控制器名称 action_name：没有特殊字符的操作名称

我想将 /module_name/controller_name/ 映射到特定的 servlet 控制器！动作部分是该类的公共方法！:)

我怎么能做到这一点？使用过滤器？如果可能的话，我想要一个例子！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T06:05:58.237

我看到 3 种方式：过滤器、基本 servlet（所有请求都通过主 servlet）或“servlet-mapping”

**筛选**

这个例子重写 url

```
http://example.org/<int 值>
```

到

```
http://example.org/user?id=<int 值>
```

IE

```
http://example.org/1234 -> http://example.org/user?id=1234
```

1.  web.xml 中的确定过滤器

> ```
> <filter>
>     <filter-name>Router</filter-name>
>     <filter-class>org.example.Router</filter-class>
>     <init-param>
>         <param-name>param1</param-name>
>         <param-value>valueOfparam1</param-value>
>     </init-param>
> </filter>
> <filter-mapping>
>     <filter-name>Router</filter-name>
>     <url-pattern>/*</url-pattern> 
> </filter-mapping> 
> ```

在 init-param 部分你可以指定路由规则

1.  过滤器类

    ```
    public class Router implements javax.servlet.Filter {

    private static final Pattern REWRITE_PATTERN = Pattern.compile("(^[1-9]\\d*)$");

    @Override
    public void destroy() {
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain fc) throws IOException, ServletException {
    //this method calling before controller(servlet), every request

        HttpServletRequest request = (HttpServletRequest) req;
        String url = request.getRequestURL().toString();
        String number = url.substring(url.lastIndexOf("/")).replace("/", "");

        Matcher m = REWRITE_PATTERN.matcher(number);
        if(m.find()) {
            RequestDispatcher dispatcher = request.getRequestDispatcher("user?id=" + m.group(1));
            dispatcher.forward(req, res);
        } else {
            fc.doFilter(req, res);
        }
    }

    @Override
    public void init(FilterConfig fc) throws ServletException {
        //here you may read params from web.xml
    }} 
    ```

**基本小程序**

```
public class BasicServlet extends HttpServlet {
   //route rules here, and rewrite
} 
```

**servlet 映射**

```
<servlet-mapping>
    <servlet-name>UserServlet</servlet-name>
    <uri-mapping>/user/*</uri-mapping>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>PostServlet</servlet-name>
    <uri-mapping>/post/*</uri-mapping>
</servlet-mapping> 
```

*   过滤器 - 更灵活，不需要认真修改工作代码
*   基本 servlet - 灵活，需要更改您的代码
*   servlet 映射 - 简单，不灵活（针对特定路由规则）

# android - 如何查看当前的安卓设备是否有谷歌的定位服务？

> ID：11680194
> 
> 赞同：0
> 
> 时间：2012-07-27T01:09:59.670
> 
> 标签：android, location, locationmanager

众所周知，部分安卓手机没有谷歌服务，如华为、中兴、三星等设备，所以在使用[android.location.LocationManager](http://developer.android.com/reference/android/location/LocationManager.html "安卓参考")，尝试通过NetworkProvider请求当前位置时，总是无响应。GPSProvider（“gps”）工作正常，但在里面需要太多时间。因此，我现在使用的第三方位置提供商可能不够准确，无法作为备份计划。

问题是如果设备没有 Google 服务，我不想等待超时并应用备份，有没有办法在我的应用程序初始化时检测到这一点？

我在谷歌服务响应后设置了一个标志，目前没有任何反应，我想知道是否有替代方案。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:32:16.497

最后我使用以下策略：

1.  开始使用 Google 和第 3 方提供商进行定位，并等待这两个提供商返回（或超时）。

2.  检查结果，如果 Google 的服务失败，请在首选项中添加一个布尔标志以指示此设备中不提供 Google 位置服务，如果设置了标志，则切勿尝试使用 Google 的位置服务。

3.  几天后，再次运行上述步骤以重新检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:32:37.243

这是个好问题。我从来没有尝试过。但是LocationManager上有一个方法：

```
public List<String> getProviders (boolean enabledOnly) 
```

也许你可以使用它？

# nginx - URL 参数和重写

> ID：11680195
> 
> 赞同：2
> 
> 时间：2012-07-27T01:10:02.140
> 
> 标签：nginx

我对 nginx 有点陌生，并且在重写时遇到了困难。我试图得到：

/c/545_453453_4534

访问 c.php 传递 545_453453_4534 作为参数

这是我目前的conf：

```
 location / {
        try_files $uri $uri/ @extensionless-php;
        index index.html index.htm index.php;
    }

    location ~ \.php$  {
            try_files $uri =404;
            fastcgi_pass 127.0.0.1:8000;
            include /etc/nginx/fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    location @extensionless-php {
            rewrite ^(.*)$ $1.php last;
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T23:55:51.180

在您的 NGINX 服务器块中，您需要添加：

```
rewrite ^/c/([^/]*)$ /c.php?param=$1 last; 
```

我倾向于生成我重写的 Apache 样式，然后使用以下命令将其转换为 NGINX 格式：

[http://www.anilcetin.com](http://www.anilcetin.com)

# jquery - Redactor WYSIWYG 转换负载很奇怪

> ID：11680197
> 
> 赞同：0
> 
> 时间：2012-07-27T01:10:45.530
> 
> 标签：jquery, wysiwyg

这是编辑器[http://redactorjs.com/](http://redactorjs.com/)

我正在使用所见即所得的编辑器，出于某种原因，它将默认文本转换为 jQuery2。这很愚蠢。有任何想法吗？

我用于管理面板的模板需要 jQuery 而不是 $ 用于所有 jQuery 命令。这和它有什么关系吗？我必须在 redactor.js 文件中将所有 $ 转换为 jQuery ...

例子：

我在默认情况下放入了一个 html 表，它只显示标签，其余部分都消失了，当我单击源时它只是这样说：

```
<h2 style=" text-align: left; ">What is Solavei?<br>
</h2>
<p>2</p>
<h2 style=" text-align: left; ">Why Partner with Us?<br>
</h2>
<p>2</p>
<h2 style=" text-align: left; ">Join Now!<br>
</h2>
<p>2</p>
<p>2</p> 
```

这很奇怪，因为当它第一次加载时（不是在源代码视图中）它显示：

```
What is Solavei?

jQuery2

Why Partner with Us?

jQuery2

Join Now!

jQuery2 
```

这是我通过 php 插入的表格（对不起，格式不好，我不想花很多时间在上面，因为它对响应并不重要......这不是它唯一的代码和）

```
<tbody class="wsite-multicol-tbody">
<tr class="wsite-multicol-tr">
<td class="wsite-multicol-col" style="width:32.183908045977%;padding:0 20px">
<h2 style=" text-align: left; ">What is Solavei?<br></h2> 
<div class="paragraph editable-text" style=" text-align: left; display: block; ">
<ul><li>A relationship driven company that offers unlimited talk, text, and internet over a nationwide 4G network for $49 per month with no contracts.</li>
<li>Using the power of social media and networking to allow their customers and partners to build an unbelievable monthly income simply by sharing the opportunity with others.</li>  
<li>A revolution that is offering millions of Americans a chance a true financial independence!</li><li><a title="" href="/about-solavei.html">
<span style="text-decoration: underline;">More...</span></a><br></li></ul></div>
</td><td class="wsite-multicol-col" style="width:34.48275862069%;padding:0 20px"><h2 style=" text-align: left; ">Why Partner with Us?<br></h2> 
<div class="paragraph editable-text" style=" text-align: left; display: block; "><ul>
<li>We are one of Solavei's fastest growing networking organizations.</li>
<li>We offer our members 100% support and access to the experience of thousands of experienced Solavei professionals.</li>
<li><span style="font-weight: bold;">We will help you build your own Solavei Network. </span>
<span style="font-style: italic;">Our success is dependent upon the success of our individual members. After you sign your first three new members, we will sign up three more for you!</span></li><li><span style=" font-style: italic;">
<a href="/about-us.html"><span style="text-decoration: underline;">More...</span></a>
<br></span></li></ul></div>  </td>
<td class="wsite-multicol-col" style="width:33.333333333333%;padding:0 20px">
<h2 style=" text-align: left; ">Join Now!<br></h2> 
<div class="paragraph editable-text" style=" text-align: left; display: block; "><a href="/join-now.html" title="">
Click here to join the Solavei Success Network. We will respond with an invitation into our lane within 24 hours.</a><br></div>  
<div><div class="wsite-image wsite-image-border-thin " style="padding-top:10px;padding-bottom:10px;margin-left:0;margin-right:0;text-align:center"> 
<a> <img src="/uploads/2/9/1/0/2910969/5542182_orig.jpg" alt="Picture" style="width:100%;max-width:150px"> </a> 
<div style="display:block;font-size:90%"></div> </div></div>  
</td></tr></tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:38:39.400

jQuery 没有冲突的事情是原因。不要将 jQuery 与编辑器一起使用。使用 $。将所有 $ 转换为 jQuery 不起作用。

# jquery - JQuery JSONP ajax没有调用

> ID：11680204
> 
> 赞同：0
> 
> 时间：2012-07-27T01:11:24.203
> 
> 标签：jquery, ajax, jsonp, yelp

我正在尝试使用 yelp v2 js api。

当我尝试从表单事件触发 ajax 调用时，不会触发成功（firebug NET 面板中没有任何内容）我可以通过调试器逐步执行 $.ajax 行...

```
<script>
    $(document).ready(function() {
        $('#btnSubmit').click(function() {
            .
            .
            .

            $.ajax({
                'type': 'GET',
                'url': message.action,
                'data': parameterMap,
                'cache': true,
                'dataType': 'jsonp',
                'jsonp': false,
                'jsonpCallback': 'cb',
                'success': cbSuccess
            });
        });
    });
</script> 
```

但是，当我在页面加载时运行相同的代码（从上面的代码中剥离包装器 $('#btnSubmit').click(function() ）它工作正常。这是为什么？

# c# - 无法下载包含视频的子网站

> ID：11680207
> 
> 赞同：0
> 
> 时间：2012-07-27T01:11:52.187
> 
> 标签：c#, wpf, youtube

我制作了一个简单的程序（非常依赖于[这个](http://www.csharp-examples.net/download-files/)例子）来可视化我的问题。它只从指定的 URL 下载文件，仅此而已；在我尝试使用此类数据之前，一切都很好：

> [http://www.youtube.com/watch?v=pqaARDsiJv4](http://www.youtube.com/watch?v=pqaARDsiJv4)

令人惊讶的是，什么都没有发生。为什么它既不下载相关视频也不下载 HTML 源代码？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Net;
using System.IO;
using System.ComponentModel;

namespace downloader
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void DownloadButton_Click(object sender, RoutedEventArgs e)
        {
            WebClient client = new WebClient();

            string fileName;

            try
            {
                fileName = System.IO.Path.GetFileName(URLBox.Text);
                Uri currentURL = new Uri(URLBox.Text);

                client.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);
                client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(ProgressChanged);

                client.DownloadFileAsync(currentURL, fileName);
            }
            catch (Exception exc)
            {
                MessageBox.Show(exc.Message);
                progressBar.Value = 0;
            }

        }

        private void Completed(object sender, AsyncCompletedEventArgs e)
        {
            MessageBox.Show("Download Completed!");

        }

        private void ProgressChanged(object sender, DownloadProgressChangedEventArgs e)
        {
            progressBar.Value = e.ProgressPercentage;

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:15:51.660

对于这样的 URL，这一行...

```
fileName = System.IO.Path.GetFileName(URLBox.Text); 
```

...设置`fileName`为`"watch?v=pqaARDsiJv4"`，这不是合法的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:25:26.330

我认为您不能像那样从 Youtube 下载视频。我将向您推荐去年有关从 Youtube 下载内容的 Stack Exchange 问题；有很多链接，甚至还有一种方法。但是所有这些解决方案都已经 3 年了，它们现在可能不再有效；这是您想要做的问题的一部分；谷歌不断做出改变，这很可能会破坏任何现有的解决方案。

您可以查看此处提供的任何解决方案是否仍然有效：[https](https://stackoverflow.com/questions/1852029/how-can-i-download-youtube-videos-using-net-code) ://stackoverflow.com/questions/1852029/how-can-i-download-youtube-videos-using-net-code 或使用提供的信息来创建您的自己的。

# php - 来自mysql结果的多维数组

> ID：11680209
> 
> 赞同：0
> 
> 时间：2012-07-27T01:12:18.877
> 
> 标签：php, mysql, arrays

我有 2 个数据库表：`categories`和`sub_categories`. 表按类别 ID`sub_categories`链接到表`categories``cat_id`

在 php 中，我想打印父类别和属于它的所有子类别。**是否可以通过从1 个**mysql 查询创建多维数组来做到这一点？

示例结果：

```
array
(
  "Category 1"=>array
  (
  "Sub-category",
  "Sub-category",
  "Sub-category"
  ),
  "Category 2"=>array
  (
  "Sub-category"
  ),
  "Category 3"=>array
  (
  "Sub-category",
  "Sub-category",
  "Sub-category"
  )
 ); 
```

我的查询只为每个类别返回 1 个子类别：

```
SELECT `categories`.`cat_title`, `sub_categories`.`sub_cat_title` 
FROM (`categories`) 
LEFT JOIN `sub_categories` 
ON `sub_categories`.`cat_id` = `categories`.`cat_id` 
GROUP BY `categories`.`cat_title` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:12:34.863

MySQL 不会返回一个数组，它只会返回行，但是你可以很容易地用 php 创建数组.. 这样做

```
<?php
  $db = new mysqli('host','user','password','database');
  $query =  "SELECT c.cat_title, s.sub_cat_title
             FROM categories c
             LEFT JOIN sub_categories s USING (cat_id)
             ORDER BY cat_title";
  $result = $db->query($query);
  while($row = $result->fetch_assoc()){
    $cats[$row['cat_title']][] = $row['sub_cat_title'];
  }        

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T01:18:53.677

尝试改用 ORDER BY。

```
ORDER BY `categories`.`cat_title`, `sub_categories`.`sub_cat_title` 
```

# facebook - 允许用户以用户身份（而不是应用程序）发布到朋友墙

> ID：11680211
> 
> 赞同：0
> 
> 时间：2012-07-27T01:12:39.400
> 
> 标签：facebook

有没有办法（可能通过休息 api 或图形 api）允许我的应用程序的用户在没有通常的“代表”或我的应用程序发布的情况下在朋友墙上写字？我知道很多人不会授权可以代表您发布的应用程序，但我仍然希望我的用户能够轻松地在朋友墙上书写（无需离开游戏页面）。我对它不以任何方式宣传我的游戏感到满意——它应该看起来就像通过 Facebook 的网站完成的那样。我知道 Google+ 使用他们的移动宁静界面有类似的东西。这对 Facebook 来说是否可行，如果可以，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:02:51.113

不，我认为没有办法做到这一点。如果用户使用应用程序创建内容，那么它将表明他使用了该应用程序。

# cocoa - 可可：如何制作像应用商店一样的图像按钮

> ID：11680213
> 
> 赞同：1
> 
> 时间：2012-07-27T01:13:18.230
> 
> 标签：cocoa, nsbutton

我想实现一个像应用商店这样的图像按钮，而不是按钮，如下图所示：

![在此处输入图像描述](../Images/943aab6b45e625f188b36ba29cff0508.png)

单击精选图像按钮后，图像变为蓝色。我的问题是：

1.  如何制作图像按钮？
2.  点击后如何变色？

我可以将图像添加到方形按钮中，但它不喜欢应用商店按钮。 ![在此处输入图像描述](../Images/5b42cd9bb2c0e80ef9a14de3014b18b3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:00:14.697

创建另一个图像 - 蓝色图像，然后使用`-setImage`按钮的操作更改它（底部示例）。使用**渐变按钮的样式**（可以在*Attributes Inspector -> Style*中更改）然后您可以轻松更改按钮的大小。不要忘记将按钮的类型选择为**Momentary Change**（按下按钮时它将去除白色背景）。同时删除边框，取消选中*Attributes Inspector -> Visual -> bordered checkbox*。添加备用图像（您的蓝色图像）。

示例：（单击按钮时，它将变为蓝色图像）

```
-(IBAction)buttonAction:(id)sender {
    [buttonOutlet setImage:[NSImage imageNamed:@"yourBlueImageFromResources"]];
} 
```

**注意：**不要忘记`IBOutlet`按钮到 buttonOutlet。

# iphone - iPhone iOS 处理内存警告最被接受的方式是什么？

> ID：11680217
> 
> 赞同：0
> 
> 时间：2012-07-27T01:14:00.737
> 
> 标签：iphone, memory-management, ios5.1

我很惊讶 iOS 5.1 并没有像我预期的那样管理内存。当设备运行大量应用程序时，iOS 似乎不会在后台杀死占用内存的应用程序，但也会向我自己的应用程序发送内存警告。

例如，显示 UIImagePicker 在两个测试设备上使应用程序崩溃。双击主页键并杀死一些后台应用程序可防止应用程序收到内存警告和崩溃。

如果 iOS 不会为我释放内存，我会徘徊，**是否可以显示某种警报视图通知用户内存不足并且必须终止一些后台任务？**

我不知道如何处理此类事件 - iOS 是否需要时间来清理一些内存（而应用程序会响应内存警告）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T01:35:04.520

iOS 在用内存警告打扰你之前做了很多事情，包括杀死后台应用程序。从 iOS 5 开始，iOS 甚至会尽可能少地用内存警告来惹恼你，这意味着只有在确实需要你摆脱正在使用内存但现在不需要的东西时，你才会得到一个（而且您可以在未来安全地重新创建，而无需花费数小时）。如果您的应用程序在没有先给您内存警告的情况下崩溃，则可能是您分配了太多内存，以至于系统在决定杀死您之前无法告诉您它的内存不足，原因是内存警告被安排在主线程的 runloop 上，直到您给 runloop 时间进行另一次迭代，您将不会收到警告。

此外，Apple 不希望您告诉用户存在内存问题。它是您的应用程序必须处理它，而不是用户！因此，如果在审查团队审查您的应用程序时出现内存警告，您的应用程序也会被拒绝（谣言说他们发送这些警告是为了测试您的应用程序对它们的反应）

Soo，总结一下：iOS 确实像你预期的那样工作，通过杀死它可以杀死的东西，甚至关闭其他系统守护进程，只有在发生这种情况之后，你才会被通知内存不足。响应这些警告的正确方法是尽可能多地释放内存，从将来可以轻松重新创建的大内容开始（例如，如果您的应用显示大量图片但一次并非全部可见，扔掉那些现在不可见的）。告诉用户是处理问题的错误方法，Apple 不喜欢这样，所以请尝试最终解决问题。

# c# - 使用 C# 检测 2D 空间中的光投影和交叉点

> ID：11680222
> 
> 赞同：1
> 
> 时间：2012-07-27T01:14:35.020
> 
> 标签：c#, .net, geometry, 2d, raytracing

光源是二维空间中位于单个坐标中的实体。

在不同的位置周围有多个光源，每个光源在 N、S、E、W、NW、NE、SW、SE 方向上发出 8 条光线。所有灯光的坐标都是已知的。

我需要计算网格内这些光线的所有交点。

```
long width = int.MaxValue; // 2D grid width.
long height = int.MaxValue * 3; // 2D grid height.
List<Point> lights = a bunch of randomly placed light sources.
List<Point> intersections = calculate all possible intersections.

for (int i=0; i < lights.Count - 1; i++)
{
    for (int j=i + 1; j < lights.Count; j++)
    {
        // How to compare using integers only?
        // If that is not possible, what is the fastest alternative?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:50:34.107

我的回答是基于您对一个链接问题的评论：是否还有一种简单的方法可以确定两个给定点的对角线光线在哪些坐标处相互交叉？看起来您想要确定光源给出的光线的交点。

从您已经描述的内容来看，水平/垂直案例很容易。两个源之间的点描述了交叉点。对角线的情况比较棘手，我认为最简单的方法就是计算线的交叉点。

您可以将每个对角线/反对角线描述为由矢量方程描述的线，`ray = s + u * d`其中`s`是光源的位置，是光线`d`的方向（`[1, 1]`、`[1, -1]`、`[1, 0]`或`[0, 1]`）。每个源都有四个这样的方程，每个方向一个。现在，要找到对角线的交点，只需找到两个源的非平行线的交点（一对将是平行的，因此不能相交）。

抱歉，如果不清楚，我会尝试更新。

**更新**

作为一种简单的优化，当且仅当源之间的[直线距离](http://en.wikipedia.org/wiki/Taxicab_geometry)( ) 为偶数时，光线才对角相交。`|x1 - x2| + |y1 - y2|`我认为还有其他条件有助于简化您的案例。

这是找到您需要的方程式的推导。我们从两条光线开始：

```
ray1 = s1 + u1 * d1
ray2 = s2 + u2 * d2 
```

在笛卡尔坐标中：

```
ray1x = s1x + u1 * d1x
ray1y = s1y + u1 * d1y
ray2x = s2x + u2 * d2x
ray2y = s2y + u2 * d2y 
```

在十字路口，`ray1x = ray2x`并且`ray1y = ray2y`：

```
s1x + u1 * d1x = s2x + u2 * d2x
s1y + u1 * d1y = s2y + u2 * d2y 
```

为了使事情更容易，我们可以隔离和消除`u2`：

```
u2 = (s1x - s2x + u1 * d1x) / d2x
u2 = (s1y - s2y + u1 * d1y) / d2y

(s1x - s2x + u1 * d1x) / d2x = (s1y - s2y + u1 * d1y) / d2y
(s1x - s2x + u1 * d1x) * d2y = (s1y - s2y + u1 * d1y) * d2x 
```

然后解决`u1`：

```
(s1x - s2x) * d2y + u1 * d1x * d2y = (s1y - s2y) * d2x + u1 * d1y * d2x
u1 * (d1x * d2y - d1y * d2x) = (s1y - s2y) * d2x - (s1x - s2x) * d2y

u1 = ((s1y - s2y) * d2x - (s1x - s2x) * d2y) / (d1x * d2y - d1y * d2x) 
```

要找到`u2`你可以只评估上面的方程之一或使用：

```
u2 = ((s2y - s1y) * d1x - (s2x - s1x) * d1y) / (d2x * d1y - d2y * d1x) 
```

所以你有它。求解`u1`并`u2`给出源位置`s1`和`s2`射线方向`d1`的两个方程`d2`。您只需将值插入原始方程`u1`，就可以得到一对的交点。在您的情况下，当且仅当和是整数时才存在交集。在一种情况下，当方向为和时，会发生除以零，但这种情况很容易解决（源的非零坐标形成交点的坐标）。`u2``ray``u1``u2``[1, 0]``[0, 1]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T19:51:37.697

假设您有一个固定的坐标平面大小，并且您将对不同位置的光源进行多次这些计算，您可以做得比迭代每个点更好。

您可以创建四个布尔（或位）数组。

1.  水平
2.  垂直
3.  诊断
4.  诊断

对于我们的每个光源，我们将它们“投影”到那些一维阵列上。（在图片中我只显示了两个投影）。

![在此处输入图像描述](../Images/dc4badd7774b3d5962accbd8b9312f34.png)

投影到 Horiz 和 Verti 上很简单。

在图中所示的 DiagR 数组上投影一个点 (x,y) 就像 x 加 y 一样简单。

现在您可以简单地遍历所有网格点，看看是否至少有 2 个投影设置为真。

但我们可以做得更好，

例如，在示例中，我们可以从遍历 Verti 数组开始。

我们注意到 Verti[0] 设置为 true，现在我们想看看它是否与 Horiz、DiagR、DiagL 相交。

我们计算它来检查与 DiagR（我们图片中的另一个数组）的交集，我们只需要查看 DiagR[0]、DiagR[1]、DiagR[2] 和 DiagR[3] 是否为真，我们可以忽略该数组的其余部分。

Verti[0] 的光可以在其任何元素处与 horiz 相交。

Verti[0] 的光只能在 DiagL 位置 0、1、2 和 3 处与 DiagL 相交。

继续 Verti[i] 的其余部分。

我们现在可以做一些类似的事情来寻找真正的 Horiz[i] 与 DiagR 和 DiagL 的交集。

最后，我们走过 DiagR 并寻找与 DiagL 的交叉点。

这将为您返回所有光线交点的列表，但其中还包括光源的点。

您可以忽略存在点源的所有交叉点，或者使用一些独创性来解释这些点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T09:33:17.250

我已经从[这里](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=geometry2)提升了数学，

好的，所以每个点都有 4 条“基本射线”，一条射线是一条穿过两点之间的无限线。

```
// A line in the form Ax+By=C from 2 points
public struct Ray
{
    public readonly float A;
    public readonly float B;
    public readonly float C;

    public Ray(PointF one, PointF two)
    {
       this.A = two.y - one.y;
       this.B = one.x - two.x;
       this.C = (this.A * one.x) + (this.B * two.x); 
    }
} 
```

为了得到红衣主教，我们可以扩展`PointF`

```
private readonly SizeF NS = new SizeF(0.0F, 1.0F);
private readonly SizeF EW = new SizeF(1.0F, 0.0F);
private readonly SizeF NESW = new SizeF(1.0F, 1.0F);
private readonly SizeF NWSE = new SizeF(-1.0F, 1.0F);

public static IEnumerable<Ray> GetCardinals(this PointF point)
{
    yield return new Ray(point + NS, point - NS);
    yield return new Ray(point + EW, point - EW);
    yield return new Ray(point + NESW, point - NESW);
    yield return new Ray(point + NWSE, point - NWSE);
} 
```

要找到两条射线的相交，我们可以做

```
static PointF Intersection(Ray one, Ray two)
{
    var delta = (one.A * two.B) - (two.A * one.B);

    if (delta == 0.0F)
    {
        //Lines are parallel
        return PointF.Empty;
    }
    else
    {
        var x = ((two.B * one.C) - (one.B * two.C)) / delta;
        var y = ((one.A * two.C) - (two.A * one.C)) / delta;
        return new PointF(x, y);
    }
} 
```

所以，要得到两点基数的交点，

```
public static IEnumerable<PointF> GetCardinalIntersections(
    this PointF point,
    PointF other);
{
    return point.GetCardianls().SelectMany(other.GetCardinals(), Intersection)
        .Where(i => !i.IsEmpty());
} 
```

然后启用，

```
public static IEnumerable<PointF> GetCardinalIntersections(
    this PointF point,
    IEnumerable<PointF> others);
{
    return others.SelectMany((o) => point.GetCardinalIntersections(o));
} 
```

然后我们可以像这样使用这个功能。

```
var point = new PointF(1.0F, 1.0F);

var others = new [] { new PointF(2.0F, 5.0F), new PointF(-13.0F, 32.0F) };

var intersections = point.GetCardinalIntersections(others); 
```

显然这里有很多迭代，我没有编译或测试过这个，但是因为在它的核心，数学似乎相当有效，我对性能持乐观态度。

# asp.net-mvc - 数据模型中的 MVC3 必填字段导致 DIV

> ID：11680226
> 
> 赞同：0
> 
> 时间：2012-07-27T01:14:59.593
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

我希望我的视图上有字段

1) 确保满足所有必填字段。

2）做一个ajax调用并将结果发布回同一页面上的DIV标签

我已经尝试了几件事

*   Ajax.Beginform 带有 div 的 updateTargetId。

但是，我有一个现有操作，它在发布后检查某些已发布的字段，如果满足这些字段，则对另一个操作执行 RedirectToAction。这最终让我感到悲痛，因为它会走向不同的观点。

*   使用 jQuery 和 $('form').submit，检查 valid() 并发布一个帖子.. 并且工作......（结果进入同一页面上的 DIV）但随后未检查必填字段。它一直认为 valid() 是真的。

有人可以给我一个完成这项工作的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:00:22.693

你的第一个问题

**1) 确保满足所有必填字段。**

[使用注释进行数据验证](http://www.dotnetcurry.com/ShowArticle.aspx?ID=769)

而对于，

**2）做一个ajax调用并将结果发布回同一页面上的DIV标签**

**阿贾克斯调用**

```
var url = '@Url.Action("GetData")';
$.ajax({
url: url,
type: 'GET',
cache: false,
data: { value: strId},

success: function (result) {
$('#result).html(result);
}
}); 
```

**行动**

```
public ActionResult GetData(string id)
{
return Json(new {foo="bar", ball="dragon"});
} 
```

[全文](http://yassershaikh.com/how-to-call-an-action-from-javascript-or-jquery-in-mvc-3-razor/)

# css - 阻止 Twitter Bootstrap 覆盖按钮的自定义 CSS

> ID：11680235
> 
> 赞同：1
> 
> 时间：2012-07-27T01:16:01.567
> 
> 标签：css

我将 Twitter Bootstrap 用于 Rails 3.2.3 项目，并将每个样式表导入我的 application.css.scss 文件中。我正在使用应用程序文件中引导文件上方的 static.css.scss 文件自定义静态文件夹中的页面（带有位于不同文件夹中的渲染文件）。我正在尝试使按钮与普通的 btn 类不同。我的代码是：

```
.btn.signup {
    margin-top: 10px;
    font-size: 18px;
    padding: 10px 48px 10px;
    background-color: rgb(255, 138, 22);
}

.btn.signup:hover {
    margin-top: 10px;
    font-size: 18px;
    padding: 10px 48px 10px;
    background-color: rgb(255, 138, 22);
} 
```

但是在 Firefox 中，按钮仍然是灰色的，除了外边缘是正确的颜色。当我将鼠标悬停在按钮上时，下半部分是橙色的。检查按钮，它显示：

```
.btn.signup:hover, li.signup.buttons:hover {
    margin-top: 10px;
    font-size: 18px;
    padding: 10px 48px;
    background-color: rgb(255, 138, 22);
}

button.btn, input.btn[type="submit"] {
}

.btn:hover, li.buttons:hover {
    color: rgb(51, 51, 51);
    text-decoration: none;
    background-color: rgb(230, 230, 230);
    background-position: 0px -15px;
    -moz-transition: background-position 0.1s linear 0s;
}

.btn:hover, li.buttons:hover, .btn:active, li.buttons:active, .btn.active, li.active.buttons, .btn.disabled, li.disabled.buttons, .btn[disabled], li.buttons[disabled] {
    background-color: rgb(230, 230, 230);
}

.btn.signup, li.signup.buttons {
    margin-top: 10px;
    font-size: 18px;
    padding: 10px 48px;
    background-color: rgb(255, 138, 22);
} 
```

我怎样才能使它整个按钮是橙色的？稍后我将更改悬停颜色，但现在我希望它全部为橙色而不是灰色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T04:40:48.767

不确定您是否仍在为此寻求帮助。哦，好吧......我想我仍然会提出我的想法。

请注意，`.btn`Twitter Bootstrap 中的类实际上附加了一个背景图像，以生成有点微妙的渐变效果。

渐变覆盖了按钮的大部分背景，因此您选择的背景颜色仅显示在边缘。

这种渐变也是当您将鼠标悬停在按钮上时您会部分看到自己的背景颜色的`-moz-transition`原因 - 背景图像渐变向上移动的原因（这通常用于模拟当您将鼠标悬停在按钮上时按钮颜色逐渐变暗的效果）。如果仔细观察，您会发现按钮的上半部分由渐变的底部着色，而下半部分则是背景色。

所以你需要`background-image: none;`在你的自定义类中定义，或者更好的是，定义你自己的渐变，这样你就不会失去那种视觉美感。如果您采取后一种做法，请记住使渐变的底部颜色与您的`background-color`rgb(255, 138, 22) 相同。否则，当您将鼠标悬停在按钮上时，渐变结束的位置和背景颜色的开始位置将非常清晰。

# ios - Core Image 会立即加载图像数据吗？

> ID：11680237
> 
> 赞同：3
> 
> 时间：2012-07-27T01:16:33.187
> 
> 标签：ios, core-image

假设我想找出图像的大小，因此如果用户尝试在我的 iPad 应用程序中加载 10,000x10,000 像素的图像，我可以向他们显示一个对话框，而不会崩溃。如果我这样做，`[UIImage imageNamed:]`或者`[UIImage imageWithContentsOfFile:]`那会立即将我的潜在大图像加载到内存中。

如果我改用 Core Image，请这样说：

```
CIImage *ciImage = [CIImage imageWithContentsOfURL:[NSURL fileURLWithPath:imgPath]]; 
```

然后问我新`CIImage`的尺寸：

```
CGSize imgSize = ciImage.extent.size; 
```

这会将整个图像加载到内存中以告诉我这一点，还是仅查看文件的元数据以发现图像的大小？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T01:21:26.213

该`imageWithContentsOfURL`函数将图像加载到内存中，是的。

幸运的是，Apple 在 iOS4 中实现了读取图像元数据而不将实际像素数据加载到内存中，您可以[在这篇博](http://oleb.net/blog/2011/09/accessing-image-properties-without-loading-the-image-into-memory/)`CGImageSource`文中了解如何使用它（方便地它提供了有关如何获取图像尺寸的代码示例）。

编辑：在此处粘贴代码示例以防止链接腐烂：

```
#import <ImageIO/ImageIO.h>

NSURL *imageFileURL = [NSURL fileURLWithPath:...];
CGImageSourceRef imageSource = CGImageSourceCreateWithURL((CFURLRef)imageFileURL, NULL);
if (imageSource == NULL) {
    // Error loading image
    ...
    return;
}

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                     [NSNumber numberWithBool:NO], (NSString *)kCGImageSourceShouldCache,nil];
CFDictionaryRef imageProperties = CGImageSourceCopyPropertiesAtIndex(imageSource, 0, (CFDictionaryRef)options);
if (imageProperties) {
    NSNumber *width = (NSNumber *)CFDictionaryGetValue(imageProperties, kCGImagePropertyPixelWidth);
    NSNumber *height = (NSNumber *)CFDictionaryGetValue(imageProperties, kCGImagePropertyPixelHeight);
    NSLog(@"Image dimensions: %@ x %@ px", width, height);
    CFRelease(imageProperties);
} 
```

完整的 API 参考[也可在此处获得](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGImageSource/Reference/reference.html)。

# c# - “找不到 PInvoke DLL 'sqlceme35.dll”

> ID：11680239
> 
> 赞同：3
> 
> 时间：2012-07-27T01:16:54.520
> 
> 标签：c#, windows-mobile, compact-framework, sql-server-ce

我最近安装了新的 Windows Mobile 6.5.3 SDK，升级了我的旧 Windows Mobile 6 项目。

当我尝试调用 SQL 库时出现错误：“找不到 PInvoke DLL 'sqlceme35.dll”（这显然是托管代码）。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T01:31:15.933

你安装了 SQL Server CE 吗？

从未使用过 Mobile SDK，所以我在这里暗中尝试，但此博客列出了您会收到该错误的主要原因以及它们的解决方案：http: [//blogs.msdn.com/b/sqlservercompact /archive/2007/10/26/can-t-find-p-invoke-dll-sqlcemenn-dll.aspx](http://blogs.msdn.com/b/sqlservercompact/archive/2007/10/26/can-t-find-p-invoke-dll-sqlcemenn-dll.aspx)

谷歌似乎表明很多人的问题是 cab 文件或没有安装服务器 CE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T01:43:17.957

好的，事实证明我必须重新安装 Visual Studio 2008 和 SqlCe 文件才能解决此问题...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:21:38.910

不确定这是否可行（因为它可能还需要其他文件才能正常运行，而我不知道），但我会尝试将该 DLL 包含在我的项目中，以便将其与其他文件一起复制到设备中.

# ruby - 以编写 setter 和 getter 方法的经典方式表达 attr_accessor？

> ID：11680242
> 
> 赞同：1
> 
> 时间：2012-07-27T01:17:32.337
> 
> 标签：ruby

如何使用普通方法样式（长编码方式）来定义属性方法？

```
attr_accessor :name
attr_writer :name
attr_reader :legs, :arms 
```

我自己的尝试如下。如果我错了，请通过重新输入为我更正它。

我的回答是：

```
 def name=(name)
    @name = name
  end
  def name=(legs,arms)
    @name = legs, arms
  end

  def name
    @name
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:21:15.827

您正在`@name`重写版本中用于几个不同的任务。有时它存储名称，有时它存储`legs`and的元组`arms`。

你真正想要的是更详细的：

```
def name=(name)
  @name = name
end

def name()
  @name
end

def legs()
  @legs
end

def arms()
  @arms
end 
```

`legs`你永远不想分配给or是一件好事`arms`，因为那将是另外两个毫无意义的方法。

# c - 逐位读取二进制文件

> ID：11680248
> 
> 赞同：10
> 
> 时间：2012-07-27T01:18:46.190
> 
> 标签：c, file, binary, bin

我知道下面的功能：

```
size_t fread(void *ptr, size_t size_of_elements, size_t number_of_elements, FILE *a_file); 
```

它只能逐字节读取，我的目标是一次读取 12 位，然后将它们放入数组中。任何帮助或指示将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T01:24:50.223

添加到第一个注释，您可以尝试一次读取一个字节（声明一个 char 变量并在那里写入），然后使用按位运算符 >> 和 << 逐位读取。在这里阅读更多：[http ://www.cprogramming.com/tutorial/bitwise_operators.html](http://www.cprogramming.com/tutorial/bitwise_operators.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T03:59:47.680

许多年前，我用 C 语言为 Huffman 编码器编写了一些 I/O 例程。这需要能够在位而不是字节的粒度上进行读写。我创建了类似于 read(2) 和 write(2) 的函数，可以要求（比如说）从流中读取 13 位。例如，为了编码，字节将被输入编码器，可变数量的比特将出现在另一端。我有一个简单的结构，其中有一个指向正在读取或写入的当前字节的位指针。每次它结束时，它都会刷新完成的字节并将指针重置为零。不幸的是，该代码早已不复存在，但拆开一个开源 Huffman 编码器并看看那里的问题是如何解决的可能是一个想法。类似地，base64 编码需要 3 个字节的数据并将它们转换为 4 个字节（反之亦然）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-30T19:30:22.980

我已经实现了几种方法来一点一点地读/写文件。[他们在这里](https://gist.github.com/quirinpa/b3e3ea4bb416b7c20d73)。无论它对您的用例是否可行，您都必须自己决定。我已经尝试制作最易读、最优化的代码，而不是经验丰富的 C 开发人员（目前）。

在内部，它使用“bitCursor”来存储有关尚未适合完整字节的先前位的信息。它具有 who 数据字段：**d**存储数据，**s**存储大小，或存储在游标中的位数。

你有四个功能：

*   **newBitCursor** ()，它返回一个默认值为
    {0,0} 的 bitCursor 对象。在对文件进行读/写操作的序列开始时需要这样的光标。
*   **fwriteb** (void *ptr, size_t sizeb, size_t rSizeb, FILE *fp, bitCursor *c)，它将存储在ptr中的值的sizeb最右边位写入fp。
*   **fcloseb** (FILE *fp, bitCursor *c)，它写入一个剩余的字节，如果之前的写入没有完全封装所有需要写入的数据，那可能几乎总是这样......
*   **freadb** (void *ptr, size_t sizeb, size_t rSizeb, FILE *fp, bitCursor *c)，它读取 sizeb 位并将它们按位**OR**到 *ptr。（因此，您有责任将 *ptr 初始化为**0**）

评论中提供了更多信息。玩得开心！

编辑：今天[我知道](https://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Data/endian.html)，当我这样做时，我假设是小端！:P 哎呀！意识到我仍然是一个菜鸟总是很高兴；D。

编辑：[GNU 的二进制文件描述符](ftp://ftp.gnu.org/old-gnu/Manuals/bfd-2.9.1/html_chapter/bfd_1.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T01:36:15.893

从文件指针中读取前两个字节`a_file`并检查最小或最大字节中的位 - 取决于平台的[字节序](http://en.wikipedia.org/wiki/Endianness)（x86 是小字节序） - 使用位移运算符。

您不能真正将位放入数组中，因为没有位的数据类型。与其将 1 和 0 保存在一个效率低下的数组中，不如将两个字节保存在一个二元素数组（例如 type `unsigned char *`）中并编写函数将这两个字节映射到 4096 之一（2^ 12) 利益价值。

复杂的是，在后续读取中，如果您希望`fread`每 12 位通过指针，您将只读取*一个*字节，使用前一次读取的剩余位来构建一个新的 12 位值。如果没有剩余，则需要读取两个字节。

您的映射函数需要解决第二种情况，即使用先前读取的位，因为这两个字节需要不同的映射。为了有效地做到这一点，可以使用读取计数器上的模数在两个映射之间进行交换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T04:27:37.980

读取 2 个字节并执行按位操作将在下次读取第 2 个字节时完成，应用按位操作将返回您预期的结果。. . .

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T12:15:17.150

对于您的问题，您可以看到这个演示程序，它读取 2 字节，但实际信息只有 12 位。除了这种类型的东西，它还用于按位访问。

fwrite() 是一个**标准库函数**，它将 size 参数作为字节和 int 类型。所以不可能完全 12 位读取。如果您创建的文件然后创建如下所示，并如下读取它可以解决您的问题。

如果该文件是不是由您编写的特殊文件，那么请按照为该文件提供的标准进行读取，我认为他们也只能这样写。或者您可以提供我可以帮助您的确切信息。

```
#include<stdio.h>
#include<stdlib.h>
struct node
 {
   int data:12;

 }NODE;
int main()
{
   FILE *fp;
   fp=fopen("t","w");
   NODE.data=1024;
   printf("%d\n",NODE.data);
   fwrite(&NODE,sizeof(NODE),1,fp);
   NODE.data=0;
   NODE.data=2048;
   printf("%d\n",(unsigned)NODE.data);
   fwrite(&NODE,sizeof(NODE),1,fp);
   fclose(fp);
   fp=fopen("t","r");
   fread(&NODE,sizeof(NODE),1,fp);
   printf("%d\n",NODE.data);
   fread(&NODE,sizeof(NODE),1,fp);
   printf("%d\n",NODE.data);
   fclose(fp);
} 
```

# ruby-on-rails - 需要帮助安装 emacs rails reloaded

> ID：11680252
> 
> 赞同：1
> 
> 时间：2012-07-27T01:19:19.837
> 
> 标签：ruby-on-rails, emacs

您好我正在尝试从[https://github.com/dima-exe/emacs-rails-reloaded](https://github.com/dima-exe/emacs-rails-reloaded)安装 emacs rails reloaded 模式。

根据指示，我已经克隆了 repo 并将这些行添加到我的 .emacs 文件中。但是它要求通过 -

> 下一个字节编译，按 [Mx] 并输入 rails/bytecompile。

但是我找不到那个功能，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T04:20:23.210

请注意，您应该在步骤之间重新启动 Emacs

> 之后在 .emacs 文件中添加以下代码：
> 
> (setq load-path (cons (expand-file-name "~/.emacs.d/rails-reloaded") load-path))
> (需要'rails-autoload)

和

> 下一个字节编译，按 [Mx] 并输入 rails/bytecompile。

此外，在重新启动之前，请确保您已更改为文件*rails-autoload.el*`"~/.emacs.d/rails-reloaded"`所在的实际路径。如果您克隆了 git 存储库，则该路径名几乎肯定应该以*emacs-rails-reloaded*结尾（而不仅仅是*rails-reloaded*）。

 ***如果该路径不正确，Emacs 会在尝试执行时报错`(require 'rails-autoload)`。如果它是正确的，`M-x rails/bytecompile`应该工作。***

# r - R：在字符数组中查找特定数量的字符

> ID：11680254
> 
> 赞同：0
> 
> 时间：2012-07-27T01:19:42.657
> 
> 标签：r, regex

我想找到名称中恰好有两个 Os 的状态。我试过这个：

```
> data(state)
> index=grep('o.*o',state.name)
> state.name[index]
"Colorado"       "North Carolina" "North Dakota"   "South Carolina" "South Dakota" 
```

问题：“科罗拉多”中有三个操作系统，我不想要它。如何修改我的正则表达式？

我也想做三个Os：

```
> data(state)  
> index=grep('o.*o.*o',state.name)  
> state.name[index]
"Colorado" 
```

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:01:46.843

你可以做：

```
grep('^([^o]*o[^o]*){2}$', state.name, value = TRUE)
# [1] "North Carolina" "North Dakota"
# [3] "South Carolina" "South Dakota"

grep('^([^o]*o[^o]*){3}$', state.name, value = TRUE)
# [1] "Colorado" 
```

并且正如 GSee 下面建议的那样，`ignore.case = TRUE`如果您想包括大写为 O 的州，如俄亥俄州、俄克拉荷马州和俄勒冈州，您可以添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T01:40:19.557

迈克尔的回应肯定更有说服力，但这是蛮力方法：

```
state.name[sapply(strsplit(tolower(state.name), NULL), function(x) sum(x %in% "o") == 2)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T01:24:17.887

您应该确保您匹配的其他字符，除了两个匹配的 Os 之外，不是 Os：

```
grep("^[^o]*o[^o]*o[^o]*$", state.name, value = TRUE) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T02:00:28.930

使用 ?gregexpr 的解决方案：有点难看，但可以很好地推广到其他正则表达式。（不要忘记俄亥俄州的大写字母 O。）

```
state.name[sapply(state.name,function(x) length(unlist(gregexpr("o|O",x)))) == 2] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T10:08:15.540

计算状态名称中的操作系统数。

```
State <- c("North Dakota","Ohio","Colorado","South Dakota")
nos <- nchar(gsub("[^oO]","",State))
State[nos==2]
State[nos==3] 
```

# java - JAVA：知道何时调用方法

> ID：11680256
> 
> 赞同：1
> 
> 时间：2012-07-27T01:20:28.883
> 
> 标签：java, reflection, fitnesse, acceptance-testing

在这里思考一个奇怪的问题。例如，您在服务器上部署了执行以下操作的代码：

```
//GET request called when a URL is hit
public void gETCalled(){
    MyClass.invoke();
} 
```

想知道是否有可能从外部测试类（部署在同一服务器环境中）知道是否调用了 invoke() ，而无需修改 MyClass ？

我正在尝试编写验收测试，并想知道这是否可能（不接触我的 MyClass 代码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T04:31:11.753

在测试用例方面，PowerMock 可以拦截静态方法调用。

[http://code.google.com/p/powermock/wiki/MockStatic](http://code.google.com/p/powermock/wiki/MockStatic)

但是，从服务器端代码来看，AoP（特别是 aspectj）将是您最好的选择。这样您就不必实际更改任何代码（只需编写一个方面类），并且只有在您想将 aspectj weaver 添加为 javaagent 时才可以启用它。

方面看起来像这样：

```
@Aspect
public class TrackMyClassInvoke {
    @Before("execution(* MyClass.invoke())")
    public void beforeInvoke() {
         // do something to track it here
    }
} 
```

你需要确保在你的编织中包含 MyClass （我不会进入编织的完整过程，因为你可以在 aspectj 网站上找到所有这些）

[http://www.eclipse.org/aspectj/](http://www.eclipse.org/aspectj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:28:04.443

我认为您可以使用[AoP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)来执行此操作。我自己没有使用过它，但我相信它可以让您创建一个日志记录机制，您可以在其中执行某些操作，例如调用方法、打印或记录某些语句。

# javascript - Reg ex that parses window.location.pathname and returns number of /s

> ID：11680259
> 
> 赞同：0
> 
> 时间：2012-07-27T01:20:56.403
> 
> 标签：javascript, html, css, regex

I am looking for a regex pattern (and have been unable to come up with one) that can parse window.location.pathname and return the number of /s in it.

I am trying to keep all my path's relative to the home directory of my website.

For example: index.html has a script tag with an src="js/scripts.js". But that doesn't work if I access /episode/10/index.html. The path js/scripts.js is no longer valid. So my method is to write a simple javascript find and replace and return the number of /s in window.location.pathname. Subtract that number by 1 and change all the src to something like ../../

Any one know of a good quick easy way to do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:27:10.580

You can use this function I created:

```
String.prototype.count = function(a) {
    return this.match(new RegExp(a, "g")).length;
};
alert("Hi/how/are/you".count("/"))​;  // Alerts 3 
```

[jsFiddle Example](http://jsfiddle.net/shawn31313/rg9ZW/)

Just attach the `window.location.pathname` to this function:

```
window.location.pathname.count("/"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T01:31:31.393

How about just splitting on `'/'` and counting the number of array elements produced?

```
var slashCount = window.location.pathname.split('/').length - 1; 
```

I can't shake the feeling that this is solving the wrong problem, though...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T02:17:02.227

The appropriate method is [*String.prototype.match*](http://es5.github.com/#x15.5.4.10):

```
var slashCount = s.match(/\//g).length; 
```

# email - SPF=neutral，来自 Google Apps 域的电子邮件

> ID：11680264
> 
> 赞同：3
> 
> 时间：2012-07-27T01:21:30.693
> 
> 标签：email, google-apps, spf

我想允许 Google Apps 和 CampaignMonitor（电子邮件营销服务）从我的域发送电子邮件。

我已将我的 TXT 记录设置为：

> v=spf1 a mx include:_spf.google.com include:cmail1.com ~all

但是，从 Google Apps 发送的所有电子邮件都显示：

> 接收到的 SPF：中性（对于 example@example.com 的域的最佳猜测记录，google.com：209.85.216.43 既不允许也不拒绝）client-ip=209.85.216.43；身份验证结果：mx.google.com；spf=neutral (google.com: 209.85.216.43 既不允许也不拒绝 example@example.com 域的最佳猜测记录) smtp.mail=example@example.com; dkim=pass header.i=@example.com

如何使我的电子邮件 SPF “通过”而不是“中性”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T13:12:25.980

所有电子邮件都发生这种情况吗？因为如果您从 Gmail 发送并且 _spf.google.com 在您的 SPF 中它应该通过，则没有意义。

# c# - 使用数据绑定从/向数据库加载和保存图像

> ID：11680266
> 
> 赞同：0
> 
> 时间：2012-07-27T01:21:43.457
> 
> 标签：c#, sql, ado.net

我创建了 2 个表格：

UserFrm ：包含一些文本框、组合框、图片框和按钮（添加、编辑、删除）。

UserListFrm ：包含从数据库加载信息的 DataGridView。

我的问题是：

1 - 如何使用数据绑定将（我加载到图片框的图片）保存/编辑/删除到数据库。

2 - 如何使用数据绑定将图片加载到 DataGridView。

**注意：我使用 C# 作为编程语言。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:30:56.293

GridView 中的图像列

```
 <asp:TemplateField  HeaderText="Picture"> 
                        <ItemTemplate> 
                          <asp:Image ID="Image1" runat="server" ImageUrl='<%#    "Handler.ashx?id=" + Eval("Img_Id")  %>' />
                        </ItemTemplate> 
                    </asp:TemplateField> 
```

处理程序.ashx：

```
<%@ WebHandler Language="C#" Class="Handler" %>
using System;
using System.Data;
using System.Web;
using System.Data.SqlClient;
using System.IO;
public class Handler : IHttpHandler {    
    public void ProcessRequest (HttpContext context) {
 SqlConnection myConnection = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\Database.mdf;Integrated Security=True;User Instance=True"); 
  myConnection.Open(); 
  string sql = "Select Image_Content from ImageGallery where Img_Id=@ImageId"; 
  SqlCommand cmd = new SqlCommand(sql, myConnection); 
  cmd.Parameters.Add("@ImageId",SqlDbType.Int).Value =Convert.ToInt32(context.Request.QueryString["id"]); 
  cmd.Prepare(); 
  SqlDataReader dr = cmd.ExecuteReader(); 
  dr.Read();
  context.Response.ContentType = "jpeg";//dr["Image_Type"].ToString(); 
  context.Response.BinaryWrite((byte[])dr["Image_Content"]); 

    }

   public bool IsReusable {
        get {
            return false;
        }
    }

} 
```

# jquery - 如何在此应用程序中正确实现 History.js 或任何其他替代方案（jquery bbq、pjax、jquery 地址）？

> ID：11680270
> 
> 赞同：0
> 
> 时间：2012-07-27T01:22:27.637
> 
> 标签：jquery, ajax, history.js, pjax, jquery-bbq

正在处理的页面的核心看起来像这样[http://jsfiddle.net/AUCYf/1/](http://jsfiddle.net/AUCYf/1/)并且当用户从搜索引擎登陆它时，应该打开已搜索的“切换框”中的内容。我发现了很多关于使 AJAX 可爬行的教程，但我一直坚持实现我在标题中提到的脚本。

现在发生的情况是，当我单击按钮“LINK1”时 div1 打开并且 url 为：mypage.com/#link1
我需要在直接访问 mypage.com/#link1 时打开 div1。另外，因为可以同时打开更多的 div，有没有办法做这样的事情 mypage.com/#link1&link3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:05:23.030

使用 jQuery BBQ 实现此目的的一种常见方法是绑定到窗口 hashchange 事件以处理基于 ajax 哈希历史的导航，然后在首次加载应用程序时手动触发 hashchange 事件。

jQuery BBQ 使用参数化的哈希状态，可以独立管理多个参数。例如，您的网址可能看起来像

```
mypage.com/#a=link1&b=link3 
```

要使这项工作正常进行，您需要更改 onclick 事件以使用 BBQ pushState，而不仅仅是在锚点上使用 href="#link1"。

把它们放在一起，我们可以有这样的东西：

```
$('.show_hide1').click(function(){
    $.bbq.pushState({'a':'link1'});
});

...

$(window).bind( 'hashchange', function(e) {
    var state = $.bbq.getState();
    //do something with the state
    if(state['a'] === 'link1') {
        $(".slidingDiv1").fadeToggle();
    }
    ...
}

$(window).trigger('hashchange'); 
```

*$(window).trigger('hashchange')* ; 加载脚本时将触发并自动从 URL 加载适当的内容。

[在这里](http://benalman.com/code/projects/jquery-bbq/docs/files/jquery-ba-bbq-js.html#jQuery.bbq.pushState)查看 jQuery BBQ 文档，您可能想查看他的示例以独立管理多个哈希状态。

# bash - 将参数传递给由 xargs 调用的用户定义函数

> ID：11680272
> 
> 赞同：2
> 
> 时间：2012-07-27T01:23:36.260
> 
> 标签：bash

我有一个数组“foo”。我想将数组传递给自定义函数“bar”，它是 xargs 命令的一部分。我需要一些时间才能弄清楚如何在 xargs 中调用用户定义的函数。为此，我导出函数“bar”并使用“bash -c”来执行它。但是 $foo 不能传递给 bar()。bar() 中的 $1 为空。

有谁知道如何解决这个问题？

谢谢！！

```
foo="1 2 3 4 5 6 7 8 9"

bar(){
   echo $1
   echo "asdf"
   sleep 2
}

export -f bar

echo $foo | xargs -n 1 -P 3 bash -c bar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:29:24.540

我希望一个新的 shell 启动 via`bash -c`无法访问您的功能*。*我希望它仅可用于以`()`or`$()`或开头的子shell ````。

如果你想让一个新启动的shell有这个功能，也许把这个功能存储在一个文件中，然后用来`--rcfile foo`直接加载这个功能？或者，将其重写为脚本文件？（由于每次执行`bash -c`已经是一个新的`fork()/exec()`对，它还不如直接运行你的脚本。）

# django - 迁移后数据库未更改

> ID：11680274
> 
> 赞同：0
> 
> 时间：2012-07-27T01:24:12.830
> 
> 标签：django, django-south

所以使用南，我想在我的一个模型中添加一个新字段 is_private。

按照教程，更改 models.py 文件后，我应该这样做：

```
./manage.py schemamigration reconstructions --auto 
```

返回：

```
 Added field is_private on reconstructions.Reconstruction
Created 0005_auto__add_field_reconstruction_is_private.py. You can now apply this migration with: ./manage.py migrate reconstructions 
```

这是伟大的。现在下一步是，

```
python manage.py migrate reconstructions 
```

那打印：

```
- Migrating forwards to 0005_auto__add_field_reconstruction_is_private.
 > reconstructions:0005_auto__add_field_reconstruction_is_private
 - Loading initial data for reconstructions.
No fixtures found. 
```

它似乎在做它的工作。但是当我事后检查字段 is_private 时，Django 给我一个错误：

```
Cannot resolve keyword 'is_private' into field. 
```

这告诉我南根本没有改变数据库。为什么会这样？

额外信息：模型类：

```
class Reconstruction(models.Model):
    id = models.CharField(max_length=36, primary_key=True,
                          editable=False)

    uploader = models.ForeignKey(User, blank=True, null=True)
    status = models.TextField(blank=True)
    viewcount = models.IntegerField(default=0)
    error_flag = models.IntegerField(default=0)
    is_done = models.BooleanField(default=False)
    create_date = models.DateTimeField(auto_now=True)
    last_modified_date = models.DateTimeField(auto_now=True)
    is_private = models.BooleanField(default=True) 
```

导致崩溃的代码：

```
recordings = Recording.objects.filter(is_done=True).filter(is_private=False).order_by('-create_date') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:52:33.610

观察：您添加`is_private`到`Reconstruction`，但您正在尝试`Recording`根据该属性过滤对象。也许这就是问题所在？

# java - Java 应用程序的前端 - 不是 Swing 然后是 JQuery 或 Jerry？

> ID：11680277
> 
> 赞同：1
> 
> 时间：2012-07-27T01:24:48.650
> 
> 标签：java, jquery, swing, user-interface, frontend

我是 Java 前端技术的新手。如果我们想开发一个跨平台的 Java 应用程序，并且外观和感觉应该有点像 JQuery UI。如果我们不想在前端使用 swing 或 Nimbus，那么实现 JQuery UI 外观的最佳选择是什么？我想我们不能使用 JQuery，因为该应用程序是跨平台的。（必须在 linux、Solaris 和 Mobile 上运行）您有什么建议？

杰瑞是一个不错的选择吗？（我从未尝试过这个东西。[在这里](http://jodd.org/doc/jerry/index.html)找到它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:39:27.997

如果你想创建一个跨平台的客户端应用程序，Java 中基本上有三个好的（成熟的、经过验证的、得到良好支持的）选项：

*   使用具有可插拔外观和感觉的 Swing 以获得您想要的确切外观。[Nimbus](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/otherFeatures/nimbus_laf.html)是 Swing 外观和感觉的一个示例，但还有更多。您还可以创建自己的自定义外观和感觉 - 这是一项相当多的工作，但确实让您可以灵活地定义您想要的外观。Swing 是标准 Java 发行版的一部分，在所有平台上的行为几乎相同，因此如果可移植性是您最关心的问题，那么 Swing 是一个可靠的选择。
*   使用[SWT](http://www.eclipse.org/swt/)，它是来自 Eclipse 的 GUI 工具包。这是一个很棒的工具包，虽然确实有一些本机依赖项，​​所以你*可能会*在移动设备上遇到问题。SWT 为您运行它的每个平台提供了更多的“本机”外观。
*   使用 JavaFX 2.0，它是 Oracle 相对较新的富客户端框架。可能更适合图形/富媒体应用。支持类似 CSS 的样式，这可能很有用。

我对 Jerry 不是很熟悉，但它看起来更像是一个 DOM 操作库而不是一个 GUI 工具包，所以我认为它不会对你有太大帮助（除非你决定放弃客户端 GUI 而是构建一个 web - 基于前端）。

# ruby - 需要一种 Ruby 方法来确定矩阵的元素“接触”另一个元素

> ID：11680282
> 
> 赞同：1
> 
> 时间：2012-07-27T01:25:56.903
> 
> 标签：ruby, algorithm, matrix

我认为我需要一种称为“触摸”的方法（如连续的，而不是情感的）。我需要识别矩阵中靠近单个元素或一组元素的元素。至少这是我想到的解决手头问题的方式。

下面程序中的矩阵 State 表示，比如说，一些水下地形。当我降低水位时，最终最高点会伸出并成为一个“岛屿”。当“水位”为 34 时，元素 State[2,3] 是该岛的单点。数组 atlantis 保存了该单点的坐标。

随着我们进一步降低水位，额外的点将“高于水面”。额外的连续点将成为岛屿的一部分，它们的坐标将被添加到数组亚特兰蒂斯。（例如，下一块成为亚特兰蒂斯一部分的土地将是位于 31 的州 [3,4]。）

我对如何做到这一点的想法是识别所有接触/靠近亚特兰蒂斯元素的矩阵元素，找到具有最高海拔的元素，然后将其添加到数组亚特兰蒂斯。寻找单个元素旁边的元素本身就是一个挑战，但我们可以编写一些代码来检查集合 [i,j-1], [i,j+1], [i-1,j-1] , [i-1,j], [i-1,j+1], [i+1,j-1], [i+1,J], [i+1,j+1]。（我想我是对的。）

但是随着我们添加额外的点，确定哪些点围绕着亚特兰蒂斯点的任务变得越来越困难。所以这就是我的问题：谁能想到任何机制来做到这一点？任何使用我不知道的红宝石功能的简化算法？（包括除了最基本的之外的所有方法。）如果可以编写这样的方法，那么我可以编写 atlantis.touching 并获取一个数组，例如，包含当前与亚特兰蒂斯相邻的所有点的所有坐标。

至少我认为这是可以做到的。欢迎任何其他想法。如果有人知道任何类型的合作网站，我可以在其中寻找可能有兴趣与我合作的其他人，那就太好了。

```
# create State database using matrix
require 'matrix'

State=Matrix[ [3,1,4,4,6,2,8,12,8,2],
              [6,2,4,13,25,21,11,22,9,3,],
              [6,20,27,34,22,14,12,11,2,5],
              [6,28,17,23,31,18,11,9,18,12],
              [9,18,11,13,8,9,10,14,24,11],
              [3,9,7,16,9,12,28,24,29,21],
              [5,8,4,7,17,14,19,30,33,4],
              [7,17,23,9,5,9,22,21,12,21,],
              [7,14,25,22,16,10,19,15,12,11],
              [5,16,7,3,6,3,9,8,1,5] ]

#find sate elements contiguous to island
atlantis=[[2,3]]

find all state[i,j] "touching" atlantis 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:38:01.217

仅检查当前暴露区域周围的点听起来并不像它可以涵盖所有情况 - 如果下一个要暴露的点是新岛屿的开始怎么办？

我会这样做：有另一个数组 - 我们称它为`sorted`包含按高度排序的点。每次提高水位时，将所有高于新水位的元素弹出并`sorted`弹出`atlantis`。

事实上，如果你这样做，就不需要单独的`sorted`和数组。*只需存储不*`atlantis`高于水面的最高点的索引，您就可以将两个数组合二为一——一侧在水面以上，另一侧在水面以下。

 *希望有帮助！*

# sql - 如何修复未找到 Windows NT 用户或组 'IIS APPPOOL\DefaultAppPool'？

> ID：11680283
> 
> 赞同：9
> 
> 时间：2012-07-27T01:26:03.500
> 
> 标签：sql, sql-server-2005, iis-7.5

当我在 sql server 2005 上运行时：

```
EXEC sp_grantlogin "IIS APPPOOL\DefaultAppPool" 
```

我得到错误：

```
Msg 15401, Level 11, State 1, Procedure sp_grantlogin, Line 49
Windows NT user or group 'IIS APPPOOL\DefaultAppPool' not found. Check the name again. 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-27T07:58:17.960

这对我有用

```
CREATE LOGIN [IIS APPPOOL\MyAppPool] FROM WINDOWS;
CREATE USER MyAppPoolUser FOR LOGIN [IIS APPPOOL\MyAppPool]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T23:54:12.057

You need to ensure that there is a Windows account called `IIS APPPOOL\DefaultAppPool` on the machine. Run Computer Management on the machine,go to Local Users and Groups, and look at the properties in `IIS_IUSRS`.

If there is no account there called `IIS APPOOL\DefaultAppPool` then that is why you cannot add a login to SQL Server. You will only have this account on your SQL Server machine if you are also running IIS on that machine, as IIS APPPOOL\DefaultAppPool is a local account.

This link [http://forums.iis.net/t/1174325.aspx](http://forums.iis.net/t/1174325.aspx) seems to be very similar to your problem. There are some tips on how to solve the problem, including one at the very end which looks important.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-10T19:53:33.103

对于我的 IIS 7.5 开发盒上的延迟设置，我使用`BUILTIN\IIS_IUSRS`了 application pool identity 而不是`IIS APPPOOL\DefaultAppPool`。

由于（动态）应用程序池身份用户始终是 Group 的成员`IIS_IUSRS`，因此如果您重命名应用程序池或使用不同的应用程序池，则不会破坏 SQL 权限。

参考，使用 BUILTIN\Group 授予对预定义 Windows NT 组的访问权限：http: [//support.microsoft.com/kb/216808](http://support.microsoft.com/kb/216808)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-30T17:40:29.227

安装 SQL 等后我有同样的错误消息。我发现我实际上没有`IIS`启用/安装`Windows Programs and Features`.

搜索`Turn Windows features on or off`

支票`IIS - Internet Information Services`已打勾

点击`OK`

重新运行 SQL 脚本现在应该完成了。

# javascript - require.js 找不到 jquery.js

> ID：11680286
> 
> 赞同：3
> 
> 时间：2012-07-27T01:26:06.887
> 
> 标签：javascript, requirejs, amd

我们已经有一个 AMD 的 require.js 实现，它已经使用了很长时间，现在团队决定使用 r.js 优化器来优化构建。我正在按照步骤操作，但我认为我遗漏了一些东西：

我们有 require.config ，如下所示：

```
require.config({
    waitSeconds : 15,
    baseUrl: window.rootPath + 'scripts',
    paths: {
        jquery: 'empty:',
        jqueryui: 'empty:',
        recaptcha: '//www.google.com/recaptcha/api/js/recaptcha_ajax',
        maxmind: '//j.maxmind.com/app/geoip',
        enduser: '/enduser/scripts/system',
        cookies: '/enduser/scripts/system/cookies',
        errorhandler: '/enduser/scripts/system/errorhandler',
        underscore: '/enduser/scripts/underscore',
        blockui: '/enduser/scripts/jquery.blockui',
        messaging: '/enduser/scripts/system/messaging',
        jgrowl: '/enduser/scripts/jquery.jgrowl',
        knockout: 'knockout-latest.debug',
        kobindings: '/enduser/scripts/system/bindings',
        async: 'plugins/require/async',
        depend: 'plugins/require/depend',
        font: 'plugins/require/font',
        goog: 'plugins/require/goog',
        image: 'plugins/require/image',
        json: 'plugins/require/json',
        noext: 'plugins/require/noext',
        mdown: 'plugins/require/mdown',
        propertyParser: 'plugins/require/propertyParser',
        markdownConverter: 'lib/Markdown.Converter'
    },
    priority: ['jquery']
});

require(["main"]); 
```

请注意，它具有 CDN 路径而不是“空”。但是在网上阅读了一些帖子后，我将那里替换为空。我正在运行以下命令：

```
node -o name="filepath" output="output file path" 
```

它说跟踪依赖关系，然后抛出一个错误，说它没有找到 jquery.js。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:16:27.070

好吧，基本上解决方案是在命令末尾包含 paths.jquery=empty: 。所以我的命令看起来像 node -o name="filepath" output="output file path" paths.jquery=empty:。这也适用于您使用的任何 CDN，包括 Jquery。

# sql-server-2005 - 存储过程取其中一个还是变量？

> ID：11680287
> 
> 赞同：0
> 
> 时间：2012-07-27T01:26:30.023
> 
> 标签：sql-server-2005, stored-procedures

我在这里使用 sql server 2005，我想知道是否有办法让存储过程将变量 a 或变量 b 作为其参数。

现在，如果我声明 A 和 B，它需要 A 和 B。可以让它取 A 或 B 代替吗？因此，如果另一个没有价值，它会使用另一个？

前任：

```
@ID VARCHAR(255)
@MAKE VARCHAR(255)  
AS  
BEGIN  
    SET NOCOUNT ON  
    SELECT *  
    FROM CARS   
    WHERE ID = @ID OR MAKE =@MAKE 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:37:48.643

```
create procedure MyProcedure
(
    @ID VARCHAR(255) = NULL,
    @MAKE VARCHAR(255) = NULL
)  
AS  

    SET NOCOUNT ON  

    SELECT *  
    FROM CARS   
    WHERE 
        (@ID IS NOT NULL AND ID = @ID)
        OR 
        (@MAKE IS NOT NULL AND MAKE =@MAKE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T01:39:59.307

```
IF ID IS NULL
    BEGIN
        /*Code goes here*/
    END
ELSE IF MAKE IS NULL
    BEGIN
        /*More code goes here*/
    END
ELSE
    BEGIN
        /*Even more code goes here*/
    END 
```

我很确定您可以使用 NULL 调用函数。

而且，还要这样做：

```
@ID VARCHAR(255) = NULL
@MAKE VARCHAR(255) = NULL 
```

阅读：[http ://weblogs.asp.net/stanleygu/archive/2010/02/08/solution-5-implementing-optional-parameters-in-t-sql-stored-procedures.aspx](http://weblogs.asp.net/stanleygu/archive/2010/02/08/solution-5-implementing-optional-parameters-in-t-sql-stored-procedures.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T01:41:32.457

存储过程可以采用可选参数。

```
create procedure mysp
    @a varchar(255) = NULL,
    @b varchar(255) = NULL
as begin
   select * 
   from cars 
   where (a = @a and @a is not NULL) or 
               (b = @b and @b is not NULL);
end; 
```

# android - Android 的锁屏无法使用 Android 正常工作

> ID：11680291
> 
> 赞同：5
> 
> 时间：2012-07-27T01:27:14.947
> 
> 标签：android, lockscreen

使用 Android 以编程方式锁定屏幕。我从 Stackoverflow 以前的问题中得到了一些关于此的好主意，并且我做得很好，但是当我运行该代码时，没有异常和错误。而且，屏幕没有锁定。请在这段代码中指出我的错误我的 manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="net.top"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk android:minSdkVersion="8" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity 
        android:name=".LockActivity">
        </activity>
    <activity
        android:name=".LockActivity$Myclass"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <receiver 
       android:name=".LockActivity"
    android:label="device_admin"
    android:permission="android.permission.BIND_DEVICE_ADMIN">
<meta-data android:name="android.app.device_admin"
           android:resource="@xml/my_admin" />
<intent-filter>
    <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
</intent-filter>
</receiver>
</application>
<uses-permission android:name="android.permission.WAKE_LOCK"/>
<uses-permission android:name="android.permission.DISABLE_KEYGUARD" />
</manifest> 
```

我的班级文件

```
package net.top;

 import android.app.Activity;
import android.app.KeyguardManager;

import android.app.KeyguardManager.KeyguardLock;
import android.app.admin.DeviceAdminReceiver;
import android.app.admin.DevicePolicyManager;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.PowerManager;
import android.widget.Toast;

public class LockActivity extends DeviceAdminReceiver{

public void onEnabled(Context context, Intent intent) {
    showToast(context, "Sample Device Admin: enabled");
    }

    @Override
    public CharSequence onDisableRequested(Context context, Intent intent) {
    return "This is an optional message to warn the user about disabling.";
    }

    @Override
    public void onDisabled(Context context, Intent intent) {
    showToast(context, "Sample Device Admin: disabled");
    }
    void showToast(Context context, CharSequence msg) {
        Toast.makeText(context, msg, Toast.LENGTH_SHORT).show();

    }

public static class Myclass extends Activity {

protected PowerManager.WakeLock mWakeLock;
DevicePolicyManager mDPM;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
  //  setContentView(R.layout.main);

    mDPM = (DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);
    //  mDPM.lockNow();

    ComponentName mAdminName = new ComponentName(Myclass.this,LockActivity.class);

        if(!mDPM.isAdminActive(mAdminName))
        {
            Intent intent = new       
Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
            intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN,    
mAdminName);
            //mDPM.lockNow();
        }
        else
        {
            mDPM.lockNow();
        }   

         }
}

} 
```

我还添加了 My_admin.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<device-admin xmlns:android="http://schemas.android.com/apk/res/android">
<uses-policies>
    <limit-password />
    <watch-login />
    <reset-password />
    <force-lock />
    <wipe-data />
    <expire-password />
    <encrypted-storage />
    <disable-camera />
</uses-policies>
</device-admin> 
```

我找不到这里出了什么问题。请帮助我在这里指出我的错误。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:54:24.130

您可以将此代码添加到您的 Activity 类中，它对我来说很好用

```
 if(!mDPM.isAdminActive(mAdminName))
        {
             intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
            intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mAdminName);
              intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,"is locked");
              intent.putExtra("force-locked", DeviceAdminInfo.USES_POLICY_FORCE_LOCK);

            startActivityForResult(intent, 1);
            System.out.println("The Device Could not lock because device admin not enabled");
            //mDPM.lockNow();
        }
        else
        {
            System.out.println("The Device  device admin enabled");
             intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
            intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mAdminName);
              intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,"onEnabled");
            mDPM.lockNow();
            mDPM.setMaximumTimeToLock(mAdminName, 0);
              intent.putExtra("force-locked", DeviceAdminInfo.USES_POLICY_FORCE_LOCK);

                startActivityForResult(intent, 1);

        } 
```

希望这对您有所帮助。

# javascript - 阻止 JS 在某些域上加载

> ID：11680299
> 
> 赞同：1
> 
> 时间：2012-07-27T01:28:10.250
> 
> 标签：javascript

我有一个网络服务，它通过为用户提供 javascript 来嵌入他们的代码。用户还可以将该代码放在其他站点上，以使其在那里工作。但是，我还需要允许用户创建 JS 不应在其上运行的站点的黑名单。例如，竞争对手或不适当的网站。

有没有办法检查我们的 JS 文件是从哪里加载的，并在每个帐户的基础上阻止加载或中断功能？

**编辑：javascript 在网站上加载 iframe，因此另一种解决方案是以某种方式阻止某些域从我们的服务器加载 iframe，或者向该 iframe 提供不同的内容**

**编辑 2：我们也试图避免使用 JS 执行此操作，因为它可以被下载和修改以通过块**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:33:37.127

**检查页面的url**

是的，javascript 文件在开始执行时可以检查 window.url 并查看主文档的 url 是否正常。

**查看脚本的加载位置**

它还可以通过 dom，寻找引入 javascript 文件本身的脚本节点，并查看 JS 是从哪里加载的。

**然而**

任何人都可以将 javascript 加载到文本编辑器中，然后对其进行更改以消除测试，然后将修改后的 JS 托管在自己的服务器上。混淆或最小化 JS 可能会减慢某人的速度，但晦涩难懂并不是安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T01:48:42.543

您可以做的一件事是让 javascript 加载另一个 javascript 文件。您在给定的 url 从服务器提供服务。这里的诀窍是该 url 不会转到文件，而是转到将返回 javascript 文件的服务器端点。您让该端点检查该用户的路由，并决定它是否会返回您想要工作的 javascript 或某种类型的错误 javascript。

这个博客展示了如何在 php 中做到这一点。[动态-javascript-with-php](http://techtites.com/2009/01/31/dynamic-javascript-with-php/)

# java - Web 应用程序最多应该有多少状态？

> ID：11680302
> 
> 赞同：1
> 
> 时间：2012-07-27T01:28:15.733
> 
> 标签：java, web-applications, servlets, stateless

我听说 Web 应用程序应该尽可能无状态。但在我看来，常常很难意识到这一点。例如，如果我：

1.  处理请求
2.  将用户重定向到起始页
3.  想要显示请求的结果？

如果结果有点复杂，那么只是一个可以作为参数传递的字符串（或者我不想通过 URL 包含该信息），那么**我不能组合 2\. 和 3**。

我在这里能想到的唯一解决方案是将信息作为状态保存在 Java 程序中。

但这会违反 stateles Web 应用程序的规则，不是吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T01:31:37.167

> 我听说 Web 应用程序应该尽可能无状态

**什么？****Web 应用程序中到处都有** 状态，无论是在客户端还是在服务器上。像 Sproutcore/Ember 这样的框架甚至有称为状态管理器的组件来管理，嗯，状态。

服务器维护用户会话中的某些状态（通常）。

你听说过 HTTP 是无状态的吗？那是另一个故事，而且完全正确。此外，由于线程问题，编写不共享状态的服务器端组件可能是一个好主意。但是这些点都不应该被认为暗示你的应用程序没有状态。

# jquery - 上下滑动时避免跳跃（JQuery）

> ID：11680305
> 
> 赞同：1
> 
> 时间：2012-07-27T01:28:43.980
> 
> 标签：jquery

我正在尝试获取它，以便在单击预定义链接时，内容部分将向下滑动，而其他部分将向上滑动。我知道我可以为此使用 JQuery 回调，但由于某种原因，它似乎总是试图将框向上滑动然后开始将其向下移动（因此它会产生奇怪的生涩效果）。

JQuery 可以在这里看到：

```
$("#welcome_link").click(function () {
  $("div[id$='_content']").slideUp('fast', function() {
    $("#welcome_content").slideDown('fast');
  });
}); 
```

我在这里做错了什么吗？我以为这会奏效。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:30:01.240

您开始将它与其他 div 一起向上滑动，然后在回调函数中将其向下滑动；只需使用 . 从第一个匹配集中消除它即可`.not()`。

```
$("#welcome_link").click(function () {
  $("div[id$='_content']").not('#welcome_content').slideUp('fast', function() {
    $("#welcome_content").slideDown('fast');
  });
});​ 
```

# c++ - C++ - 缓冲区组合添加额外的空值

> ID：11680309
> 
> 赞同：0
> 
> 时间：2012-07-27T01:29:00.257
> 
> 标签：c++, buffer, memcpy

我试图在 C++ 中填充两个缓冲区，一个索引缓冲区对象和一个顶点缓冲区对象。

```
// Create the IBO and VBO data
GLushort* iboData = new GLushort[polyProcessed * 3];
Vertex* vboData = new Vertex[vertProcessed];

int iboPos = 0;
int vboPos = 0;

// Create the VBO and IBO
for(int i = 0; i < fragMap[0x36]; i++)
{
    // Copy the data to the IBO
    memcpy(iboData + iboPos, zmeshes[i].indices, zmeshes[i].numPoly * 3 * sizeof(GLushort));//sizeof(*zmeshes[i].indices));

    // Advance the position
    iboPos += zmeshes[i].numPoly * 3 * sizeof(GLshort);

    // Copy the data to the VBO
    memcpy(vboData + vboPos, zmeshes[i].vertices, zmeshes[i].numVert * sizeof(Vertex));//sizeof(*zmeshes[i].vertices));

    // Advance the position
    vboPos += zmeshes[i].numVert * sizeof(Vertex);

    errorLog.writeSuccess("Build log: VBO size %i VBO pos %i IBO size %i IBO pos %i", zmeshes[i].numVert * sizeof(Vertex), 
                          vboPos, zmeshes[i].numPoly * 3 * sizeof(GLshort), iboPos);
} 
```

它只是获取要复制的数据的大小，复制它，然后推进位置（将下一个数据放入缓冲区的位置）。

我得到这样的输出：

```
<---> Index dump: 0
<---> Index dump: 1
<---> Index dump: 2
<---> Index dump: 2
<---> Index dump: 3
<---> Index dump: 0
<---> Index dump: 4
<---> Index dump: 5
<---> Index dump: 23
<---> Index dump: 23
<---> Index dump: 22
<---> Index dump: 4
<---> Index dump: 26
<---> Index dump: 6
<---> Index dump: 7
<---> Index dump: 7
<---> Index dump: 8
<---> Index dump: 26
<---> Index dump: 9
<---> Index dump: 34
<---> Index dump: 10
<---> Index dump: 10
<---> Index dump: 11
<---> Index dump: 9
<---> Index dump: 12
<---> Index dump: 25
<---> Index dump: 13
<---> Index dump: 13
<---> Index dump: 14
<---> Index dump: 12
<---> Index dump: 13
<---> Index dump: 25
<---> Index dump: 31
<---> Index dump: 31
<---> Index dump: 15
<---> Index dump: 13
<---> Index dump: 28
<---> Index dump: 33
<---> Index dump: 16
<---> Index dump: 36
<---> Index dump: 33
<---> Index dump: 35
<---> Index dump: 31
<---> Index dump: 24
<---> Index dump: 15
<---> Index dump: 17
<---> Index dump: 25
<---> Index dump: 18
<---> Index dump: 18
<---> Index dump: 25
<---> Index dump: 12
<---> Index dump: 27
<---> Index dump: 34
<---> Index dump: 9
<---> Index dump: 2
<---> Index dump: 1
<---> Index dump: 19
<---> Index dump: 30
<---> Index dump: 32
<---> Index dump: 20
<---> Index dump: 29
<---> Index dump: 25
<---> Index dump: 17
<---> Index dump: 17
<---> Index dump: 21
<---> Index dump: 29
<---> Index dump: 32
<---> Index dump: 26
<---> Index dump: 8
<---> Index dump: 8
<---> Index dump: 20
<---> Index dump: 32
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0
<---> Index dump: 0 
```

这可以看作是复制了正确的 72 个值，并在其后面复制了 72 个 0。我是否在复制缓冲区时做错了什么，或者这是否表明其他地方有问题？

进一步的解释：

Mesh 1 - 72 个索引 Mesh 2 - 300 个索引 Mesh 3 - 45 个索引。

使用上面的函数，它会产生一个缓冲区来执行此操作：

[0]-[71] - 网格 1 顶点全部正确 [72]-[142] - 空 [142]-[EndofBuffer] - 网格 2

它会创建用 0 填充的重复大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:28:02.353

既然`iboData`是a `GLushort*`，那么`iboData+iboPos`实际指向的内存位置`(int)iboData + iboPos * sizeof(GLushort)`。您将字节偏移量与数组偏移量混淆了。在您的两个`+=`语句中，不要乘以`sizeof`您使用的 in `memcpy`，因为`iboPos`记录的是`GLushort`偏移量，而不是字节偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:44:02.763

Keith Randall 有正确的解决方案。我混淆了两者。这是我最终做的事情：

```
// Create the VBO and IBO
    for(int i = 0; i < fragMap[0x36]; i++)
    {
        // Copy the data to the IBO
        memcpy(&iboData[iboPos], zmeshes[i].indices, zmeshes[i].numPoly * 3 * sizeof(GLushort));//sizeof(*zmeshes[i].indices));

        // Advance the position
        iboPos += zmeshes[i].numPoly * 3;

        // Copy the data to the VBO
        memcpy(&vboData[vboPos], zmeshes[i].vertices, zmeshes[i].numVert * sizeof(Vertex));//sizeof(*zmeshes[i].vertices));

        // Advance the position
        vboPos += zmeshes[i].numVert;

        errorLog.writeSuccess("Build log: VBO size %i VBO pos %i IBO size %i IBO pos %i", zmeshes[i].numVert * sizeof(Vertex), 
                              vboPos, zmeshes[i].numPoly * 3 * sizeof(GLshort), iboPos);
    } 
```

我想要数组中的偏移量。不是缓冲区的偏移量。

# c# - 使用 NHibernate 的简单获取（使用按代码映射）非常慢

> ID：11680311
> 
> 赞同：3
> 
> 时间：2012-07-27T01:29:47.383
> 
> 标签：c#, database, performance, nhibernate, mapping-by-code

所以我对为什么这么慢已经没有想法了。也许你可以帮忙。因此，我正在尝试使用 nHibernate 通过代码映射从 oracle db 中进行简单的记录。我正在使用来自 nuget 的 nHibernate 版本 3.3.1.4。

这是映射代码：

```
public class Person
{
    public virtual PersonKey Key { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
}

public class PersonKey
{
    public virtual string PersonId { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null)
            return false;
        var t = obj as PersonKey;
        if (t == null)
            return false;
        if (PersonId == t.PersonId)
            return true;
        return false;
    }
    public override int GetHashCode()
    {
        return (PersonId).GetHashCode();
    }
}

public class PersonMap : ClassMapping<Person>
{
    public PersonMap()
    {
        Schema("MyDB");
        Table("Person");
        ComponentAsId(id => id.Key, idMapper => idMapper.Property(p => p.PersonId));
        Property(i => i.FirstName);
        Property(i => i.LastName);
    }
} 
```

这是创建会话工厂和检索数据的代码。

```
var mapper = new ModelMapper();
        var cfg = new Configuration();

        mapper.AddMappings(Assembly.GetExecutingAssembly().GetExportedTypes());

        cfg.DataBaseIntegration(c =>
        {
            c.ConnectionString = @"User Id=user;Password=password;Data Source=MyDB;";
            c.Driver<OracleClientDriver>();
            c.Dialect<Oracle10gDialect>();

            c.LogSqlInConsole = true;
            c.LogFormattedSql = true;
            c.AutoCommentSql = true;
        });

        cfg.AddMapping(mapper.CompileMappingForAllExplicitlyAddedEntities());
        var sessionFactory = cfg.BuildSessionFactory();

        stopwatch.Stop();
        Console.WriteLine("Building session factory: {0}", stopwatch.ElapsedMilliseconds);
        stopwatch.Restart();

        Person entity = null;

        using (var session = sessionFactory.OpenSession())
        using(var tx = session.BeginTransaction())
        {
            entity = (Person) session.Get("Person", new PersonKey(){PersonId = "1"});
            tx.Commit();
        } 
```

生成的查询如下：

```
SELECT person0_.PersonId as PersonId0_0_, 
person0_.FirstName as FirstName0_0_, person0_.LastName as LastName0_0_,  
FROM MyDB.Person person0_
WHERE person0_.PersonId=:p0;
:p0 = '1' 
```

平均大约需要 80-100 秒才能访问检索到的对象。这也包括创建会话。

所以我寻找了一些明显的东西：

*   personId 列被索引（它是表的主键）。
*   数据库在服务器上，所以要检查它不是网络占用时间，我使用 AD0.Net (Oracleconnection + Oraclecommand) 运行上述生成的查询。这大约需要 180 毫秒，包括创建连接并将记录映射到实体类。
*   通过 PL/SQL 开发人员运行查询（大约需要 32 毫秒）。
*   检查生成查询的查询计划（确认使用索引唯一扫描而不是全表扫描）。
*   我已经在我的本地上针对类似大小的 sql 2012 db 运行了上述代码，并且通过 NHibernate 代码大约 180 毫秒。
*   运行 nhprof（评估）并得到以下结果：

![NHibernate 分析器的结果](../Images/bb4d831d7972ee181484407a1866e8f1.png)

似乎查询已运行并且结果从数据库返回的速度非常快（根据 nhprof 结果），但可能是将查询的值水合到占用时间的实体中。我不知道可能会浪费时间！

我的下一步是将 nHibernate 源附加到解决方案并逐步完成它，但是工作中的下载访问是有限的（甚至是 github！）。到那时有什么想法吗？

干杯。

**更新：**所以我在我的项目中获得了 nHibernate 源代码并逐步完成了它。一切都在顺利进行，直到程序到达这段代码：

```
for (count = 0; count < maxRows && rs.Read(); count++) 
```

执行会`rs.Read()`消耗时间，其中 rs 是 oracle 数据读取器。这段代码在`DoQuery`Loader.cs 文件的函数中。

奇怪的是，如果传入的查询是一个非参数化的动态查询（例如`select ... from person where personid = '1'`），执行速度很快（~ 1 毫秒），但如果它是参数化的（例如`select ... from person where personid = :p1`），那么它的速度就慢得离谱。由于我想利用 nHibernate 的强大功能，我需要使用生成的参数化查询。我仍在试图弄清楚为什么甲骨文阅读器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T01:01:08.897

找到Deep Shah在[此处发布的问题和解决方案。](http://www.gitshah.com/2009/10/issue-with-systemdataoracleclient-and.html)

从本质上讲，NHibernate 中的参数化查询以及 Microsoft 的 Oracle 驱动程序是造成瓶颈的原因。

他接着分享了两个解决方案：

1.  用 oracle 开发的 Oracle Data Client Driver 替换当前的 Microsoft oracle 驱动程序。使用新驱动程序运行相同的查询消除了性能瓶颈。为此，您需要在要触发查询的计算机上安装 Oracle 数据访问组件 (ODAC)。

2.  当通过 NHibernate 在查询上设置参数时，在查询 VARCHAR 列时使用“query.SetAnsiString”而不是“query.SetParameter”。

我已经验证了这两种解决方案，它们都有效。解决方案一是我使用的解决方案，因为我使用的是按代码映射，并且我将查询生成留给 nHibernate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:04:38.417

我相信您还可以在映射中将数据类型设置为 ansi 字符串，如本文所述： [NHibernate 3 用 loquacious syntax 指定 sql 数据类型](https://stackoverflow.com/questions/7420524/nhibernate-3-specify-sql-data-type-with-loquacious-syntax)

# php - Eclipse 4.2 在 Linux 上创建 Windows 回车？

> ID：11680317
> 
> 赞同：0
> 
> 时间：2012-07-27T01:31:02.933
> 
> 标签：php, linux, eclipse, ubuntu

我目前在安装了 PDT（PHP 开发工具）的最新 Eclipse 版本（4.2）上遇到了这个问题。即使 Preferences > General > Workspace 将“New text file line delimiter”设置为“Unix”，我仍然会为我编写的每个代码获取 \n\r Windows 格式...

有没有人遇到这个问题，以及如何解决它？

现在，我正在从终端使用 dos2unix 命令解决问题，但这很烦人，因为 Eclipse 能够自行处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:38:47.233

再次保存文件后换行符是否仍然错误？重新格式化并保存后？当您更改首选项时，Eclipse 不会转换现有文件。

您可能需要使用 dos2unix 手动转换所有内容以修复现有文件。

# jquery - jQuery datepicker - 'beforeShowDay'中的循环问题

> ID：11680323
> 
> 赞同：1
> 
> 时间：2012-07-27T01:32:01.113
> 
> 标签：jquery, jquery-ui-datepicker

我正在使用[jQuery UI 的 datepicker](http://jqueryui.com/demos/datepicker/)来制作一个日历，该日历在通过 ajax 和 PHP 拉入的 db 的工具提示中显示事件。我遇到的问题是，只有数组中的第一个事件在其日期显示，而不是 ajax 返回的所有内容。

我通过 console.log() 检查了数组的内容和长度，并验证它返回了正确的信息，但除此之外，我不确定还能尝试什么。

**jQuery的相关部分：**

```
function calendarModify() {
var cal = $(".caledit");
$.ajax({
    url: "calprocess.php?action=showdates",
    type: "POST",
    dataType: "json",
    success: function (events) {
        cal.datepicker({
            showButtonPanel: true,
            dateFormat: "yy-mm-dd",
            beforeShowDay: function (dates) {
                var d = ('0' + dates.getDate()).slice(-2),
                    m = ('0' + (dates.getMonth() + 1)).slice(-2),
                    y = dates.getFullYear(),
                    date = y + "-" + m + "-" + d;
                for (var i = 0; i < events.length; i++) {
                    if (events[i].event_date === date) {
                        return [true, "event", events[i].event_desc];
                    }
                    else {
                        return [true, ""];
                    }
                }
            } 
```

（还有更多，但一切正常）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-07T20:03:27.933

**更新：** 我终于让它工作了！非常感谢[Andrew Whitaker](https://stackoverflow.com/users/497356/andrew-whitaker)提供了一个[类似问题](https://stackoverflow.com/questions/5167732/excluding-dates-in-the-jquery-datepicker-using-beforeshowday-and-an-array-of-obj?rq=1)的答案，让我走上了正轨。我的最终代码（尽管我可能还会对其进行一些优化）如下：

```
function calendarModify() {
  var cal = $(".caledit");
  $.ajax({
    url: "calprocess.php?action=showdates",
    type: "POST",
    dataType: "json",
    beforeSend: function () {
      cal.addClass("loading");
    },
    success: function (events) {
      cal.removeClass("loading");
      cal.datepicker({
        showButtonPanel: true,
        dateFormat: "yy-mm-dd",
        beforeShowDay: function (dates) {
          var d = ('0' + dates.getDate()).slice(-2),
            m = ('0' + (dates.getMonth() + 1)).slice(-2),
            y = dates.getFullYear(),
            date = y + "-" + m + "-" + d,
            length = events.length,
            i = 0,
            event = null,
            eventDate = false;
          while (i < length && !eventDate) {
            event = events[i];
            eventDate = event.event_date.valueOf() === date.valueOf();
            i++;
            console.log(event);
          }
          if (eventDate) {
            return [true,"event", event.event_desc];
          } else {
            return [true, ""];
          }
        }
        // and more... 
```

# algorithm - 找出水平的算法

> ID：11680326
> 
> 赞同：0
> 
> 时间：2012-07-27T01:32:36.707
> 
> 标签：algorithm

假设我有以下层次结构：

*   1级

    *   阶段1
    *   第二阶段
    *   第三阶段
*   2级

    *   第 4 阶段
    *   第 5 阶段
    *   第 6 阶段
*   3级

    *   第七阶段
    *   第 8 阶段
    *   第 9 阶段

如果我知道阶段编号，我如何以编程方式找到级别编号，因为阶段 5 具有级别 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:36:39.293

希望你有一个指向父节点的指针。

继续跟踪该指针，直到没有父节点。您已找到根节点。计算你必须跟随指针到父级的次数才能获得深度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T01:49:10.343

您可以使用以下公式根据给定阶段查找您所处的级别：

```
level = ceil(stage / 3) 
```

例子：

```
ceil(5 / 3) = 2
ceil(9 / 3) = 3
ceil(1 / 3) = 1 
```

不过，这个答案只有在每个级别**正好有**3 个阶段时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:18:28.943

Well

If you are using python it is very easy.

```
>>> d = { 'level 1' : [ 'stage 1', 'stage 2', 'stage 3' ], 
...       'level 2' : [ 'stage 4', 'stage 5', 'stage 6' ],
...       'level 3' : [ 'stage 7', 'stage 7', 'stage 9' ],
...     }
>>> for key, val in d.items():
...     if 'stage 5' in val:
...             print key 
```

Thank You

# security - drupal 和 joomla 哈希默认不加盐？

> ID：11680332
> 
> 赞同：1
> 
> 时间：2012-07-27T01:34:25.487
> 
> 标签：security, hash, joomla, content-management-system, salt

我一直在为 joomla 遇到的密码恢复机制至少是在用户表的密码列中添加一个已知的散列字符串。这对我说的是默认散列机制没有加盐。我错了吗？另外，我只是想知道默认情况下drupal salts 密码是否？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:44:58.997

是的，Joomla 在密码被 md5 散列之前会加盐。

有关该过程以及如何拆分它们的更详细说明，请参阅： [joomla 密码加密](https://stackoverflow.com/questions/10428126/joomla-password-encryption)

希望这是您正在寻找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T03:59:22.063

Drupal 哈希在 V7 及更高版本中被加盐。[http://drupal.org/node/493984](http://drupal.org/node/493984)

# javascript - 如何计算每个条件中的循环并将其存储到数组中？

> ID：11680334
> 
> 赞同：0
> 
> 时间：2012-07-27T01:34:43.087
> 
> 标签：javascript, arrays, loops

我已经循环`for..`对一些值求和并将其存储到具有特定条件的数组中，但现在我想计算循环已求和的项目数。
例如，我有 5 个项目`tipe`：1、4、6、2、7，我用循环求和，所以我可以得到 20，但我怎么知道循环求和了多少项目（在这个例子中是 5 个项目）。
这是我到目前为止所做的：http: [//jsfiddle.net/xKJn8/8/](http://jsfiddle.net/xKJn8/8/)

这是我的循环：

```
var SumByTipe = {};

for(i in data.GetReportIdResult){
    var currtipe = data.GetReportIdResult[i].tipe;
    if (currtipe in SumByTipe){
        for (j in data.GetReportIdResult[i]){
            if (j != "tipe" && j != "mc"){
                SumByTipe[currtipe][j + '_total'] += parseFloat(data.GetReportIdResult[i][j]);
                SumByTipe[currtipe]['isi'] += 1;  //---I want to count how many items in every tipe (e.g. in ESL there are 5 items)---//                  
            }
        }
    }else{
        var firstSum = {};
        for (j in data.GetReportIdResult[i]){
            if (j != "tipe" && j != "mc"){
                firstSum[j + '_total'] = parseFloat(data.GetReportIdResult[i][j]);
            }
        }
        SumByTipe[currtipe]=firstSum;
    }
}

alert(SumByTipe['ESL']['isi']); 
```

这是我在 json 数组中的项目：

```
var data = {
  "GetReportIdResult": [
    {
      "act_qty1": "834",
      "act_val1": "11",
      "acvqty": "0.99",
      "acvval": "0.84",
      "budqty": "84332",
      "budval": "1315",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "21.9",
      "cm_per2": "31.8",
      "cm_per3": "29.2",
      "cm_val1": "2",
      "cm_val2": "206",
      "cm_val3": "356",
      "mc": "Agen",
      "tipe": "ESL"
    },
    {
      "act_qty1": "17076",
      "act_val1": "186",
      "acvqty": "36.01",
      "acvval": "38.64",
      "budqty": "47416",
      "budval": "482",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "8.6",
      "cm_per2": "7.0",
      "cm_per3": "8.1",
      "cm_val1": "16",
      "cm_val2": "47",
      "cm_val3": "54",
      "mc": "Hotel & Restaurant",
      "tipe": "ESL"
    },
    {
      "act_qty1": "30948",
      "act_val1": "299",
      "acvqty": "16.48",
      "acvval": "16.22",
      "budqty": "187788",
      "budval": "1841",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "-3.2",
      "cm_per2": "-3.1",
      "cm_per3": "-3.1",
      "cm_val1": "-10",
      "cm_val2": "-61",
      "cm_val3": "-55",
      "mc": "Institution",
      "tipe": "ESL"
    },
    {
      "act_qty1": "8358",
      "act_val1": "121",
      "acvqty": "37.96",
      "acvval": "35.26",
      "budqty": "22019",
      "budval": "342",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "26.7",
      "cm_per2": "28.4",
      "cm_per3": "30.1",
      "cm_val1": "32",
      "cm_val2": "128",
      "cm_val3": "155",
      "mc": "Lower Trade",
      "tipe": "ESL"
    },
    {
      "act_qty1": "53433",
      "act_val1": "943",
      "acvqty": "19.45",
      "acvval": "19.48",
      "budqty": "274742",
      "budval": "4844",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "31.2",
      "cm_per2": "31.2",
      "cm_per3": "31.2",
      "cm_val1": "295",
      "cm_val2": "1423",
      "cm_val3": "1567",
      "mc": "Modern Market",
      "tipe": "ESL"
    },
    {
      "act_qty1": "0",
      "act_val1": "0",
      "acvqty": "0.00",
      "acvval": "0.00",
      "budqty": "732",
      "budval": "13",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "0.0",
      "cm_per2": "34.5",
      "cm_per3": "34.8",
      "cm_val1": "0",
      "cm_val2": "9",
      "cm_val3": "15",
      "mc": "Agen",
      "tipe": "ESL500ML"
    },
    {
      "act_qty1": "156",
      "act_val1": "3",
      "acvqty": "0.00",
      "acvval": "0.00",
      "budqty": "0",
      "budval": "0",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "33.0",
      "cm_per2": "33.2",
      "cm_per3": "33.3",
      "cm_val1": "1",
      "cm_val2": "2",
      "cm_val3": "4",
      "mc": "Hotel & Restaurant",
      "tipe": "ESL500ML"
    },
    {
      "act_qty1": "90",
      "act_val1": "2",
      "acvqty": "20.11",
      "acvval": "21.33",
      "budqty": "448",
      "budval": "8",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "39.4",
      "cm_per2": "32.8",
      "cm_per3": "37.8",
      "cm_val1": "1",
      "cm_val2": "1",
      "cm_val3": "2",
      "mc": "Lower Trade",
      "tipe": "ESL500ML"
    },
    {
      "act_qty1": "3535",
      "act_val1": "68",
      "acvqty": "20.57",
      "acvval": "20.63",
      "budqty": "17189",
      "budval": "331",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "39.7",
      "cm_per2": "40.8",
      "cm_per3": "40.3",
      "cm_val1": "27",
      "cm_val2": "140",
      "cm_val3": "166",
      "mc": "Modern Market",
      "tipe": "ESL500ML"
    },
    {
      "act_qty1": "2700",
      "act_val1": "29",
      "acvqty": "2.84",
      "acvval": "3.27",
      "budqty": "95040",
      "budval": "899",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "9.5",
      "cm_per2": "11.1",
      "cm_per3": "12.9",
      "cm_val1": "3",
      "cm_val2": "76",
      "cm_val3": "74",
      "mc": "Agen",
      "tipe": "UHT"
    },
    {
      "act_qty1": "3216",
      "act_val1": "35",
      "acvqty": "18.93",
      "acvval": "19.03",
      "budqty": "16993",
      "budval": "184",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "10.8",
      "cm_per2": "7.6",
      "cm_per3": "6.6",
      "cm_val1": "4",
      "cm_val2": "9",
      "cm_val3": "9",
      "mc": "Hotel & Restaurant",
      "tipe": "UHT"
    },
    {
      "act_qty1": "10701",
      "act_val1": "105",
      "acvqty": "23.85",
      "acvval": "24.15",
      "budqty": "44872",
      "budval": "434",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "1.4",
      "cm_per2": "-0.6",
      "cm_per3": "-0.5",
      "cm_val1": "1",
      "cm_val2": "-3",
      "cm_val3": "-2",
      "mc": "Institution",
      "tipe": "UHT"
    },
    {
      "act_qty1": "5663",
      "act_val1": "65",
      "acvqty": "18.58",
      "acvval": "19.33",
      "budqty": "30487",
      "budval": "334",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "12.7",
      "cm_per2": "12.0",
      "cm_per3": "11.2",
      "cm_val1": "8",
      "cm_val2": "36",
      "cm_val3": "40",
      "mc": "Lower Trade",
      "tipe": "UHT"
    },
    {
      "act_qty1": "16637",
      "act_val1": "197",
      "acvqty": "18.60",
      "acvval": "18.38",
      "budqty": "89424",
      "budval": "1072",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "9.3",
      "cm_per2": "7.4",
      "cm_per3": "11.8",
      "cm_val1": "18",
      "cm_val2": "68",
      "cm_val3": "133",
      "mc": "Modern Market",
      "tipe": "UHT"
    },
    {
      "act_qty1": "84",
      "act_val1": "3",
      "acvqty": "2.10",
      "acvval": "2.10",
      "budqty": "4008",
      "budval": "132",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "50.9",
      "cm_per2": "52.9",
      "cm_per3": "51.0",
      "cm_val1": "1",
      "cm_val2": "3",
      "cm_val3": "110",
      "mc": "Agen",
      "tipe": "WHP"
    },
    {
      "act_qty1": "948",
      "act_val1": "30",
      "acvqty": "26.33",
      "acvval": "27.82",
      "budqty": "3600",
      "budval": "108",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "48.9",
      "cm_per2": "50.5",
      "cm_per3": "41.2",
      "cm_val1": "15",
      "cm_val2": "63",
      "cm_val3": "76",
      "mc": "Hotel & Restaurant",
      "tipe": "WHP"
    },
    {
      "act_qty1": "2604",
      "act_val1": "71",
      "acvqty": "9.18",
      "acvval": "9.28",
      "budqty": "28360",
      "budval": "769",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "43.3",
      "cm_per2": "42.9",
      "cm_per3": "39.3",
      "cm_val1": "31",
      "cm_val2": "233",
      "cm_val3": "358",
      "mc": "Institution",
      "tipe": "WHP"
    },
    {
      "act_qty1": "6",
      "act_val1": "0",
      "acvqty": "3.33",
      "acvval": "4.26",
      "budqty": "180",
      "budval": "6",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "60.4",
      "cm_per2": "0.0",
      "cm_per3": "0.0",
      "cm_val1": "0",
      "cm_val2": "0",
      "cm_val3": "0",
      "mc": "Lower Trade",
      "tipe": "WHP"
    },
    {
      "act_qty1": "266",
      "act_val1": "11",
      "acvqty": "50.38",
      "acvval": "50.51",
      "budqty": "528",
      "budval": "21",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "48.6",
      "cm_per2": "48.8",
      "cm_per3": "49.2",
      "cm_val1": "5",
      "cm_val2": "14",
      "cm_val3": "17",
      "mc": "Modern Market",
      "tipe": "WHP"
    },
    {
      "act_qty1": "0",
      "act_val1": "0",
      "acvqty": "0.00",
      "acvval": "0.00",
      "budqty": "0",
      "budval": "0",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "0.0",
      "cm_per2": "5.1",
      "cm_per3": "5.5",
      "cm_val1": "0",
      "cm_val2": "9",
      "cm_val3": "6",
      "mc": "Agen",
      "tipe": "CHEESE1K"
    },
    {
      "act_qty1": "127",
      "act_val1": "8",
      "acvqty": "0.98",
      "acvval": "0.98",
      "budqty": "13000",
      "budval": "845",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "21.2",
      "cm_per2": "21.7",
      "cm_per3": "22.8",
      "cm_val1": "2",
      "cm_val2": "33",
      "cm_val3": "40",
      "mc": "Hotel & Restaurant",
      "tipe": "CHEESE1K"
    },
    {
      "act_qty1": "0",
      "act_val1": "0",
      "acvqty": "0.00",
      "acvval": "0.00",
      "budqty": "0",
      "budval": "0",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "0.0",
      "cm_per2": "19.8",
      "cm_per3": "0.0",
      "cm_val1": "0",
      "cm_val2": "0",
      "cm_val3": "0",
      "mc": "Lower Trade",
      "tipe": "CHEESE1K"
    },
    {
      "act_qty1": "0",
      "act_val1": "0",
      "acvqty": "0.00",
      "acvval": "0.00",
      "budqty": "0",
      "budval": "0",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "0.0",
      "cm_per2": "19.0",
      "cm_per3": "0.0",
      "cm_val1": "0",
      "cm_val2": "0",
      "cm_val3": "0",
      "mc": "Modern Market",
      "tipe": "CHEESE1K"
    }
  ]
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:40:03.057

```
var SumByTipe = {};

for(i in data.GetReportIdResult){
    var currtipe = data.GetReportIdResult[i].tipe;
    SumByTipe[currtipe] = 0;
    if (currtipe in SumByTipe){
         // <<<< RIGHT HERE <<<<<<
        for (j in data.GetReportIdResult[i]){
            if (j != "tipe" && j != "mc"){
                SumByTipe[currtipe][j + '_total'] += parseFloat(data.GetReportIdResult[i][j]);

                //SumByTipe[currtipe]['isi'] += 1;  //---I want to count how many items in every tipe (e.g. in ESL there are 5 items)---//                  
            }
        }
    }else{
        var firstSum = {};
        for (j in data.GetReportIdResult[i]){
            if (j != "tipe" && j != "mc"){
                firstSum[j + '_total'] = parseFloat(data.GetReportIdResult[i][j]);
            }
        }
        //SumByTipe[currtipe]=firstSum;
    }
}
var keys =  Object.keys(SumByTipe);
alert(keys.length); 
```

显示 6，因为您有一个“未定义的类型”。 [http://jsfiddle.net/xKJn8/12/](http://jsfiddle.net/xKJn8/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:44:17.790

我希望你能从中得到你可能需要的东西；）[http://jsfiddle.net/T4wk4](http://jsfiddle.net/T4wk4)

# javascript - 重置按钮 - 创建一个功能和一个按钮以使其工作

> ID：11680337
> 
> 赞同：0
> 
> 时间：2012-07-27T01:35:11.017
> 
> 标签：javascript, google-fusion-tables

我正在尝试在 Fusion Tables Map 中创建一个重置按钮，一旦单击它就会显示所有标记。但是有些东西不起作用。请看一下：

这是整个代码：

实际上，我试图从函数 clearBox() 的 layer10 部分“模仿”函数 initialize()。我也尝试使用reset()方法，但也没有用。

```
<!DOCTYPE html>
<html>
<head>
<style>
#map-canvas { width:500px; height:600px; }
</style>
<script type="text/javascript"
src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
var map;
var layerl0;
function initialize() {
  map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: new google.maps.LatLng(-30.070876662388095, -51.1907958984375),
    zoom: 12,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  layerl0 = new google.maps.FusionTablesLayer({
    query: {
      select: "'ENDERECO'",
      from: '3385625'
    },
    map: map
  });
}
function changeMapl0() {
  var searchString = document.getElementById('search-string-l0').value.replace(/'/g, "\\'");
  layerl0.setOptions({
    query: {
      select: "'ENDERECO'",
      from: 3385625,
      where: "'TIPO' = '" + searchString + "'"
    }
  });
}
google.maps.event.addDomListener(window, 'load', initialize);

//Function to be activated by the reset button
function clearBox() {
document.getElementById('search-string-l0').value = "";
  layerl0 = google.maps.FusionTablesLayer({
    query: {
      select: "'ENDERECO'",
      from: '3385625'
    },
  });
}

 </script>
 </head>
 <body>
<div id="map-canvas"></div>
<div style="margin-top: 10px;">
  <label>Tipo</label>
  <select id="search-string-l0" onchange="changeMapl0 (this.value);">
    <option value="">--Select--</option>
    <option value="Comidas variadas">Comidas variadas</option>
    <option value="Restaurante">Restaurante</option>
    <option value="Bar">Bar</option>
    <option value="Hotel">Hotel</option>
    <option value="Shopping Center">Shopping Center</option>
    <option value="Teatro">Teatro</option>
    <option value="Igreja">Igreja</option>
    <option value="Museu">Museu</option>
    <option value="Espaço de Cultura">Espaço de Cultura</option>
  </select><br/>
<input type="button" onclick="clearBox()" value="Reset Map" />
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:22:02.980

听起来你需要从[最近的这篇关于 SO 的帖子中重置你的查询，比如](https://stackoverflow.com/questions/11572421/fusion-table-zoom-to-boundaries-of-region)[这张地图](http://www.vciregionmap.com/)

查看您的完整代码，使其工作的最简单方法是更改​​您的重置功能以仅更改查询，而不是重新创建 FusionTablesLayer：

改变：

```
function clearBox() {
document.getElementById('search-string-l0').value = "";
  layerl0 = google.maps.FusionTablesLayer({
    query: {
      select: "'ENDERECO'",
      from: '3385625'
    },
  });
} 
```

至：

```
function clearBox() {
document.getElementById('search-string-l0').value = "";
  layerl0.setOptions({
    query: {
      select: "'ENDERECO'",
      from: '3385625'
    }
  });
} 
```

注意：我还删除了一个可能会导致 IE 出现问题的多余逗号。

[工作示例](http://www.geocodezip.com/v3_FusionTables_resetMapA.html)

# php - 通过php访问串口

> ID：11680339
> 
> 赞同：5
> 
> 时间：2012-07-27T01:35:25.343
> 
> 标签：php, serial-port

我尝试使用 PHP 访问串行端口，但运气不佳。

我试过使用`fsockopen`, `fopen`,`proc_open`等。我无法读取或写入套接字。

例子：

```
$fp = fopen("/dev/ttyUSB0", "w+");
fwrite("enable");
echo fread($fp, 1024); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:06:15.943

我过去曾多次遇到这种情况。曾经为 Cisco 2811 创建管理界面。这可能对您有用，尽管我不确定您的 IOS 版本（假设 Cisco 因为您的`fwrite();`通过控制台）。

查看您的用户是否可以先访问该设备。很容易，这可以用`screen /dev/ttyUSB0`. 运行你的命令，分离，然后`ctrl+a`按`d`。

我最常将[`stream_*`](http://www.php.net/manual/en/ref.stream.php)家庭用于此类事情。

这是一个例子：

```
$stream = stream_socket_client("udg:///dev/ttyUSB0", $errno, $errstr, 30);
fwrite($stream, "enable");

while(true){
    $line = stream_get_contents( $stream );
    if($line == 'exit'){
        break;
    }
} 
```

默认情况下，`stream_socket_client`以阻止模式启动，因此您无需手动切换它。

如果您不介意安装扩展程序，您可以做的另一件事是[`DirectIO`](http://www.php.net/manual/en/ref.dio.php)扩展程序。它具有允许您设置波特率和所有好东西的功能，[例如这里](http://www.php.net/manual/en/function.dio-tcsetattr.php)。

你甚至可以看看这个项目：[http ://code.google.com/p/php-serial/source/browse/trunk/](http://code.google.com/p/php-serial/source/browse/trunk/)

# silverlight - WP7 Silverlight：如何将两个按钮添加到 WrapPanel 的边框

> ID：11680346
> 
> 赞同：0
> 
> 时间：2012-07-27T01:36:39.823
> 
> 标签：silverlight, button, border, wrappanel

对于日历应用程序（silverlight WP7.5），我使用 wrappanel 来包含天数（以按钮为子项的边框）。现在我想在边框内添加另一个按钮。所以每天都会有数字和额外的信息/图形。刚刚注意到 Border 只能包含 1 个孩子。我该怎么办？

```
Border border = new Border();
Button btn = new Button();
border.Child = btn;
//Button btn_notification = new Button();
// how to add the btn_notification????
CalendarWrapPanel.Children.Add(border); 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:02:14.940

只需在您的边框内添加另一个容器（网格、堆栈面板、...）。此示例使用 StackPanel 演示它：

```
Border border = new Border();
Button btn = new Button();
Button btn_notification = new Button();
StackPanel panel = new StackPanel();
panel.Children.Add(btn);
panel.Children.Add(btn_notification);
border.Child = panel;
CalendarWrapPanel.Children.Add(border); 
```

# c# - C# foreach 循环 - 是否保证订单*稳定性*？

> ID：11680347
> 
> 赞同：16
> 
> 时间：2012-07-27T01:36:45.597
> 
> 标签：c#, collections, foreach

假设我有一个给定的集合。在不以任何方式更改集合的情况下，我使用 foreach 循环遍历其内容两次。除了宇宙射线之外，是否绝对保证两个循环中的顺序是一致的？

或者，给定`HashSet<string>`具有多个元素的 a，可能导致以下注释行的输出不相等：

```
{
    var mySet = new HashSet<string>();
    // Some code which populates the HashSet<string>

    // Output1
    printContents(mySet);

    // Output2
    printContents(mySet);
}

public void printContents(HashSet<string> set) {
    foreach(var element in set) {
         Console.WriteLine(element);
    }
} 
```

如果我能得到一个一般性的答案来解释导致实现不符合上述标准的原因，那将会很有帮助。不过，具体来说，我对`Dictionary`,`List`和数组很感兴趣。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T02:29:38.487

数组枚举保证顺序。

`List`并`List<T>`有望提供稳定的顺序（因为它们有望实现顺序索引的元素）。

Dictionary、HashSet 都明确不保证顺序。2 个一个接一个地迭代项目的调用不太可能以不同的顺序返回项目，但没有保证或期望。人们不应该期望任何特定的顺序。

Dictionary/HashSet 的排序版本按排序顺序返回项目。

其他 IEnumerable 对象可以自由地做任何他们想做的事情。通常以符合用户期望的方式实现迭代器。即具有隐式顺序的事物的枚举应该是稳定的，如果提供了明确的顺序 - 预期是稳定的。对未指定顺序的数据库的查询应该以半随机顺序返回项目。

检查此问题的链接：[C# 中的 foreach 循环是否保证评估顺序？](https://stackoverflow.com/questions/3097769/does-the-foreach-loop-in-c-sharp-guarantee-an-order-of-evaluation?rq=1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T01:43:27.023

实现的一切都`IEnumerable<T>`以自己的方式进行。没有一般保证任何给定的集合必须确保稳定性。

如果您专门指的是`Collection<T>`（[http://msdn.microsoft.com/en-us/library/ms132397.aspx](http://msdn.microsoft.com/en-us/library/ms132397.aspx)），我在其 MSDN 参考中没有看到任何关于排序一致的具体保证。

它可能会保持一致吗？是的。有书面保证吗？不是我能找到的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T01:57:25.297

对于许多 C# 集合，有该集合的**排序**版本。例如， a[`HashSet`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)对 a[`SortedSet`](http://msdn.microsoft.com/en-us/library/dd412070.aspx)就像 a[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)对 a一样[`SortedDictionary`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)。如果您正在使用顺序不重要的东西，`Dictionary`那么您不能假设循环顺序每次都会以相同的方式运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-05T18:22:45.847

根据您的示例`HashSet<T>`，我们现在有要检查的源代码：[HashSet:Enumerator](http://referencesource.microsoft.com/#System.Core/System/Collections/Generic/HashSet.cs,61c6bd9b8ecf54e9)

事实上，`Slot[] set.m_slots`数组是迭代的。数组对象只在方法`TrimExcess`, `Initialize`（这两个方法都只在构造函数中调用）`OnDeserialization`、 和`SetCapacity`（只被`AddIfNotPresent`and调用`AddOrGetLocation`）中改变。

的值`m_slots`仅在更改`HashSet`( `Clear`, `Remove`, `AddIfNotPresent`, `IntersectWith`, `SymmetricExceptWith`) 元素的方法中更改。

所以是的，如果没有任何东西触及集合，它会以相同的顺序枚举。

[Dictionary:Enumerator](http://referencesource.microsoft.com/#mscorlib/system/collections/generic/dictionary.cs,73212bdb7b191713)的工作方式完全相同，迭代`Entry[] entries`仅在调用此类非只读方法时才会更改。

# c# - 从另一个类访问实例化对象 - c#

> ID：11680349
> 
> 赞同：2
> 
> 时间：2012-07-27T01:36:51.437
> 
> 标签：c#, object, xna-4.0, instantiation

我有一个 Player `class`、NPC `class`、BattleManager`class`和 Game `class`。

玩家类存储/获取/设置玩家统计数据，例如健康、耐力、等级、经验。NPC 类似，但适用于 NPC。游戏`class`实例化 Player`class`和 NPC `class`。游戏玻璃有两种游戏状态，战斗和非战斗。

当玩家处于战斗状态时，GameState 进入战斗状态，当战斗结束时，它切换到非战斗状态。

我想做的是让 BattleManager`class`管理 NPC 和玩家之间的战斗，但是，由于玩家和 NPC 对象是在 Game 类中实例化的，我需要知道如何传递该对象或从 BattleManager 访问它而不实例化新的一个。

任何人都可以建议它如何工作的一般流程吗？我知道这是错误的，但有没有办法做类似的事情`Game.Player.Health -= damage;`？例如，在 player `class`is 中`public` `int Health get/set`，当 Player 类在 Game 类中实例化时，如何从其他类编辑健康？有没有办法传递 Player`object`或者只是从其他类访问在 Game 类中创建的实例化对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:07:31.617

我同意第一个评论，即探索一些设计模式是值得的。

如果您想要一个快速而肮脏的答案，那么：

修改您的 Player 和 NPC 类以在构造函数中获取 Game 实例（另一种模式是让 Game 对象成为全局单例......另一种模式要探索）。

在这里使用更简单的方法：

```
public class Game
{
    public Player PlayerProperty {get; set;}
    public NPC NPCProperty {get; set;}

    public foo() //some method to instantiate Player and NPC
    {
       PlayerProperty = new Player(this); //hand in the current game instance
       NPCProperty = new NPC(this);  //hand in the current game instance
    }
} 
```

然后，在你的 Player 和 NPC 类中......

```
//Only example for Player class here... NPC would be exact same implementation
public class Player
{

    public Game CurrentGame {get; set;}

    public Player(Game gameInstance)
    {
        CurrentGame = gameInstance;
    }

    //then anywhere else in your Player and NPC classes...
    public bar() //some method in your Player and NPC classes...
    {
        var pointerToNPCFromGame = this.CurrentGame.NPCProperty;
        //here you can access the game and NPC from the Player class
        //would be the exact same for NPC to access Player class
    }
} 
```

从我可怜的疲惫的大脑中输入这个，所以请原谅任何错误。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:41:33.153

我喜欢认为玩家和NPC是场景中的演员......所以我曾经用单例模式制作了一个ActorManager类......

```
public interface IActor {
   Stats Stats {get;}
   Vector2 Position {get;}
   bool IsFighting {get;}
   bool IsActive {get;}  // Or whatever you need
}

public class ActorManager {

     public static readonly Instance = new ActorManager();

     ActorManager();

     List<IActor> _actors = new List<IActor>();

     public IEnumerable<IActor> Actors {get{ return _actors;}}

     public void Addactor(IActor actor) { ... }

     public IEnumerable<IActor> GetActorsNear(IActor actor, float Radius)
     {
         return _actors.Where( 
               secondary => actor != secondary 
               && Vector2.Distance(actor.Position, secondary.Position)<Radius);
     }

     // or whatever you want to do with actors

}

public abstract class Actor : IActor
{
   public Stats Stats {get; protected set;}
   public Vector2 Position {get;protected set;}
   public bool IsFighting {get;protected set;}
   public bool IsActive {get;protected set;} 

       public Actor() {
           ActorManager.Instance.Add(this);
       }

   public abstract void Controller();
}

public class Player : Actor { }  // Implements an input controller
public class Npc : Actor { } // Implements a cpu IA controller 
```

# ruby-on-rails - 如何在 Ruby Net::FTP 中使用代理服务器？

> ID：11680350
> 
> 赞同：6
> 
> 时间：2012-07-27T01:36:58.583
> 
> 标签：ruby-on-rails, ruby, proxy, ftp, net-ftp

我正在使用 Net::FTP ruby​​ 库连接到 FTP 服务器并下载文件。这一切都很好，但现在我需要使用出站代理，因为他们的防火墙将 IP 地址列入白名单，并且我正在使用 Heroku 来托管该站点。我正在尝试新的 Proximo 插件，它看起来很有希望，但我无法让 Net::FTP 使用它。

[我在Net::FTP 文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/ftp/rdoc/Net/FTP.html#method-i-connect)中看到以下内容：

> 连接（主机，端口 = FTP_PORT）
> 
> 建立与主机的 FTP 连接，可选择覆盖默认端口。如果设置了环境变量 SOCKS_SERVER，则通过 SOCKS 代理设置连接。如果无法建立连接，则引发异常（通常是 Errno::ECONNREFUSED）。

但是尝试设置这个环境变量，或者设置`ENV['SOCKS_SERVER'] = proximo_url`也不起作用。有谁知道如何正确地做到这一点？它不必是 SOCKS 代理，HTTP 代理就可以，但我不确定 Net::FTP 库是否支持这一点。

...经过一些研究...

我发现 Net::FTP 寻找一个名为 的类`SOCKSSocket`，为此我找到了[这些文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/SOCKSSocket.html)。但我不能包括它。`include 'socket'`返回 false 我很确定这意味着它已经加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-24T10:43:06.803

您可以将[socksify](https://rubygems.org/gems/socksify/versions/1.7.0) gem 与例如结合使用。配额保护。确保您使用提供的静态 IP 之一（而不是 DNS 主机名）作为代理服务器，因为 FTP 和负载平衡可能会导致麻烦。

```
Socksify::debug = true
proxy_uri = URI(ENV['QUOTAGUARDSTATIC_URL'])
proxy_hostname = proxy_uri.hostname
proxy_port = 1080
TCPSocket::socks_username = proxy_uri.user
TCPSocket::socks_password = proxy_uri.password
Socksify::proxy(proxy_hostname, proxy_port) do |soc| 
       Net::FTP.open(server) do |ftp|
            ftp.passive = true
            ftp.debug_mode = true 
            ftp.login user, password
            ftp.get(export, storelocation)
            ftp.close
       end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-05T20:04:36.027

这是我对这个问题的看法。锅炉板：

```
# Connects to ftp through a socks proxy
#
# TODO: testing, use ssl, capture debugging output, recovery on network failure...
#
# @param ftpHost   [String ] Domain name or ip address of the ftp server
# @param proxyHost [String ] Host name or ip address of the socks proxy
# @param proxyPort [FixNum ] Port number of the socks proxy
# @param proxyUser [String ] User name for connecting to the proxy if needed
# @param proxyPass [String ] Password  for connecting to the proxy if needed
# @param ftpPort   [FixNum ] Ftp port, defaults to 21
# @param ftpUser   [String ] Ftp username
# @param ftpPass   [String ] Ftp password
# @param debug     [Boolean] Whether to turn on debug output of both socksify and Net::FTP, will be sent to STDOUT
# @param passive   [Boolean] Whether to use passive FTP mode
#
def ftp(

        ftpHost:                      ,
        proxyHost:                    ,
        proxyPort:                    ,
        proxyUser: nil                ,
        proxyPass: nil                ,
        ftpPort:   Net::FTP::FTP_PORT ,
        ftpUser:   'anonymous'        ,
        ftpPass:   'anonymous@'       ,
        debug:     false              ,
        passive:   true

    )

    Socksify::debug           = debug
    TCPSocket::socks_username = proxyUser
    TCPSocket::socks_password = proxyPass

    Socksify::proxy( proxyHost, proxyPort ) do |_|

        begin

            # Check whether we got an ip address or a domain name.
            # If needed we'll do dns through the socket to avoid dns leaks.
            #
            Regexp.new( URI::RFC2396_Parser.new.pattern[ :IPV4ADDR ] ) =~ ftpHost  or

                ftpHost = Socksify::resolve( ftpHost )

            ftp            = Net::FTP.new
            ftp.debug_mode = debug
            ftp.passive    = passive

            ftp.connect ftpHost, ftpPort
            ftp.login   ftpUser, ftpPass

            yield ftp

        ensure

            ftp.close

        end

    end

end 
```

现在在您的实际应用程序中，您可以这样做：

```
def listRemoteFiles

    connect do |ftp|

        puts ftp.list.inspect  # or other cool functions from Net::FTP

    end

end

def connect &block

    ftp({

        debug:     true            ,
        proxyHost: your.proxy.host ,
        proxyPort: your.proxy.port ,
        ftpHost:   your.ftpHost 

    }, &block )

end 
```

感谢[tvgriek](/users/2801791/tvgriek)指出正确的方向。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-14T08:25:06.170

您可以使用 Proximo 包装器通过 Proximo 转发流量。以下是官方说明： [https ://devcenter.heroku.com/articles/proximo#forwarding-traffic-through-proximo](https://devcenter.heroku.com/articles/proximo#forwarding-traffic-through-proximo)

# keyboard-shortcuts - 是否可以向 Python 解释器添加任意键绑定？

> ID：11680356
> 
> 赞同：1
> 
> 时间：2012-07-27T01:38:05.797
> 
> 标签：keyboard-shortcuts, interpreter, key-bindings, python

在python解释器中我们可以使用

```
readline.parse_and_bind('tab: complete') 
```

启用选项卡完成

是否可以将任意键绑定到我们自己的函数？
我想将 CTRL+E 和 CTRL+SHIFT+E 分别绑定到 edit_history() 和 edit_history(True) ，其中 edit_history() 是我自己在 .pythonrc 中定义的函数

```
def edit_history(fork=False):
    import readline
    timeStamp = time.strftime("%Y%m%d-%H%M%S")
    tmpFile = '/tmp/pyHistory.%s' % timeStamp
    readline.write_history_file(tmpFile)
    if not fork:
        os.system('gvim -f %s' % tmpFile)
        readline.clear_history()
        readline.read_history_file(tmpFile)
        os.unlink(tmpFile)
    else:
        os.system('gvim %s' % tmpFile) 
```

任何指针将不胜感激

谢谢，
达多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:20:44.983

是的……有点。定义`edit_history`函数后，您可以将键映射到序列“edit_history()\n”。按该键将模拟键入“edit_history”，然后按 Enter 键。

# oracle - oracle更快的分页查询

> ID：11680364
> 
> 赞同：10
> 
> 时间：2012-07-27T01:39:29.993
> 
> 标签：oracle

我有两个我考虑使用的分页查询。

第一个是

```
SELECT * FROM ( SELECT rownum rnum, a.* from (
    select * from members
) a WHERE rownum <= #paging.endRow# ) where rnum > #paging.startRow# 
```

第二个是

```
SELECT * FROM ( SELECT rownum rnum, a.* from (
    select * from members
) a ) WHERE rnum BETWEEN #paging.startRow# AND #paging.endRow# 
```

您如何看待哪个查询更快？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T17:35:27.977

我现在实际上没有 Oracle 的可用性，但是用于分页的最佳 SQL 查询肯定如下

```
select *
from (
        select rownum as rn, a.*
        from (
                select *
                from my_table
                order by ....a_unique_criteria...
            ) a
    )
where rownum <= :size
    and rn >  (:page-1)*:size 
```

[http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html](http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html)

**为了实现一致的分页**，您应该**使用唯一的条件对行进行排序**，这样做可以避免为页面 X 加载您已经为页面 Y (!=X) 加载的行。

编辑：

1) 使用唯一标准对行进行排序意味着以每行在每次执行查询时保持相同位置的方式对数据进行排序

2) 包含 ORDER BY 子句中使用的所有表达式的索引将有助于更快地获得结果，尤其是第一页。使用该索引，优化器选择的执行计划不需要对行进行排序，因为它将返回按其自然顺序滚动索引的行。

3) 顺便说一下，从查询中分页结果的最快方法是只执行一次查询并处理来自应用程序端的所有流程。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T05:39:36.627

看一下执行计划，例如 1000 行：

```
SELECT *
  FROM (SELECT ROWNUM rnum
              ,a.*
          FROM (SELECT *
                  FROM members) a
         WHERE ROWNUM <= endrow#)
 WHERE rnum > startrow#;

--------------------------------------------------------------------------------
| Id  | Operation            | Name    | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------------
|   0 | SELECT STATEMENT     |         |  1000 | 39000 |     3   (0)| 00:00:01 |
|*  1 |  VIEW                |         |  1000 | 39000 |     3   (0)| 00:00:01 |
|   2 |   COUNT              |         |       |       |            |          |
|*  3 |    FILTER            |         |       |       |            |          |
|   4 |     TABLE ACCESS FULL| MEMBERS |  1000 | 26000 |     3   (0)| 00:00:01 |
--------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("RNUM">"STARTROW#")
   3 - filter("MEMBERS"."ENDROW#">=ROWNUM) 
```

和 2。

```
SELECT *
  FROM (SELECT ROWNUM rnum
              ,a.*
          FROM (SELECT *
                  FROM members) a)
 WHERE rnum BETWEEN startrow# AND endrow#;

-------------------------------------------------------------------------------
| Id  | Operation           | Name    | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------
|   0 | SELECT STATEMENT    |         |  1000 | 39000 |     3   (0)| 00:00:01 |
|*  1 |  VIEW               |         |  1000 | 39000 |     3   (0)| 00:00:01 |
|   2 |   COUNT             |         |       |       |            |          |
|   3 |    TABLE ACCESS FULL| MEMBERS |  1000 | 26000 |     3   (0)| 00:00:01 |
-------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("RNUM"<="ENDROW#" AND "RNUM">="STARTROW#") 
```

除此之外，我会说版本 2*可能*会稍微快一些，因为它少了一步。但是我不知道您的索引和数据分布情况，因此您可以自己获取这些执行计划并判断数据的情况。或者简单地测试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T11:37:24.193

A已经在[这里](https://stackoverflow.com/questions/241622/paging-with-oracle/33498058#33498058)回答了但是让我复制粘贴。

只是想总结一下答案和评论。有很多方法可以进行分页。

在 oracle 12c 之前，没有 OFFSET/FETCH 功能，因此请按照@jasonk 的建议查看白皮书。这是我找到的关于不同方法的最完整的文章，并详细解释了优缺点。在这里复制粘贴它们需要大量时间，所以我想这样做。

jooq 创建者还发表了一篇很好的文章，解释了 Oracle 和其他数据库分页的一些常见警告。jooq 的博文

好消息，从 oracle 12c 开始，我们有了新的 OFFSET/FETCH 功能。OracleMagazine 12c 新特性。请参考《Top-N 查询与分页》

您可以通过发出以下语句来检查您的 oracle 版本

```
SELECT * FROM V$VERSION 
```

# android - 更改用户评论 EXIF 标签 (0x9286)

> ID：11680372
> 
> 赞同：4
> 
> 时间：2012-07-27T01:40:31.773
> 
> 标签：android, image, comments, metadata, exif

我正在开发一个 android 应用程序，我想阅读和更新用户评论 EXIF 标签。我只是在 ExifInterface.java 类中找不到那个标签。我可以在 ExifInterface 中创建一个自定义标签，比如 TAG_USER_COMMENT 吗？如果是，我该如何创建它？还是我应该使用其他工具来完成工作？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T18:53:17.067

您可以将字符串数据写入名为“UserComment”的 EXIF 标记中，如下所示：

```
`import android.media.ExifInterface;` 
```

`File directory = new File(your directory goes here);`

`final File image = new File(directory, "name.jpg");`

`ExifInterface interface = new ExifInterface(image.getPath());`

`interface.setAttribute("UserComment", "your string here");`

`interface.saveAttributes();`

然后您可以使用 getAttribute 读取数据，如下所示：

`String my_data = interface.getAttribute("UserComment");`

它不适用于某些图像

# excel-2010 - Excel 2010 查找中的错误返回值

> ID：11680374
> 
> 赞同：0
> 
> 时间：2012-07-27T01:40:39.143
> 
> 标签：excel-2010

我创建了一个查找表，作为学生成绩的嬗变工具。这是[Excel工作表](https://dl.dropbox.com/u/32739964/Transmutation.xlsx)的链接以供参考。

该结构可能看起来很奇怪，因为可能有多个查找值应该返回相同的值。现在查看链接的 excel 表，我的问题是为什么搜索完美分数不会返回完美的嬗变等级（突出显示的单元格）。每个其他查找值似乎都得到了准确的返回值。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:16:19.663

`LOOKUP`要求查找向量按升序排列。从第 102 行开始，您的数据与此不同

表格 Excel 帮助

> 重要 lookup_vector 中的值必须按升序排列：...、-2、-1、0、1、2、...、AZ、FALSE、TRUE；否则，LOOKUP 可能不会返回正确的值。大写和小写文本是等价的

一个替代公式是

```
=INDEX(Trans!A:A,MATCH(A2,Trans!E:E,0)) 
```

# jquery - 一个 jQuery 中的多个语句的语法

> ID：11680375
> 
> 赞同：0
> 
> 时间：2012-07-27T01:40:39.713
> 
> 标签：jquery, syntax

我是 jQuery 新手，似乎无法让这段代码工作。第一条语句执行，但以下两条不执行。请帮忙。

```
$(document).ready(function(){

$("#print-tab").click(function(){
   $("#print-content").hide().fadeIn();
});

$("#web-tab").click(function(){
   $("#web-content").hide().fadeIn();
});

$("#rest-tab").click(function(){
   $("#rest-content").hide().fadeIn();
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:49:09.860

可能是因为您`#print-content`在其他内容之上，而您只是从不隐藏它。你能试试：

```
$(document).ready(function(){

    $("#print-tab").click(function(){
       $("#web-content,#rest-content").fadeOut();
       $("#print-content").hide().fadeIn();
    });

    $("#web-tab").click(function(){
       $("#print-content,#rest-content").fadeOut();
       $("#web-content").hide().fadeIn();
    });

    $("#rest-tab").click(function(){
       $("#web-content,#print-content").fadeOut();
       $("#rest-content").hide().fadeIn();
    });
}); 
```

# c++ - PCC-F-02102，在执行 C 预处理 AIX 5.3 时出现致命错误

> ID：11680377
> 
> 赞同：0
> 
> 时间：2012-07-27T01:41:18.627
> 
> 标签：c++, c, oracle

```
Oracle version - 10.2.0.1.0
Pro*C/C++: Release 10.2.0.1.0
AIX version -  5.3 
```

我无法编译并出现以下错误。

```
Syntax error at line 135, column 2, file /usr/include/standards.h:
Error at line 135, column 2 in file /usr/include/standards.h
#warning  The -qdfp option is required to process DFP code in headers.
.1
PCC-S-02014, Encountered the symbol "warning" when expecting one of the following:

   a numeric constant, newline, define, elif, else, endif,
   error, if, ifdef, ifndef, include, line, pragma, undef,
   an immediate preprocessor command, a C token,
The symbol "newline," was substituted for "warning" to continue.

Syntax error at line 382, column 3, file mydb.h:
Error at line 382, column 3 in file mydb.h
  time_t timestamp;  
..1
PCC-S-02201, Encountered the symbol "time_t" when expecting one of the following
:

   } char, const, double, enum, float, int, long, ulong_varchar,
   OCIBFileLocator OCIBlobLocator, OCIClobLocator, OCIDateTime,
   OCIExtProcContext, OCIInterval, OCIRowid, OCIDate, OCINumber,
   OCIRaw, OCIString, short, signed, sql_context, sql_cursor,
   struct, union, unsigned, utext, uvarchar, varchar, void,
   volatile, a typedef name,
The symbol "enum," was substituted for "time_t" to continue.

Error at line 0, column 0 in file my_db.pc
PCC-F-02102, Fatal error while doing C preprocessing
make: *** [libdb.a] Error 1 
```

有什么解决办法吗？

## pcscfg.cfg

```
sys_include=(/usr/include)

CODE=ANSI_C
parse=partial
sqlcheck=full
sys_include=/usr/include
sys_include=/usr/include/sys
sys_include=/usr/include/linux
include=$(ORACLE_HOME)/precomp/public
include=$(ORACLE_HOME)/precomp/include
include=$(ORACLE_HOME)/oracore/include
include=$(ORACLE_HOME)/oracore/public
include=$(ORACLE_HOME)/rdbms/include
include=$(ORACLE_HOME)/rdbms/public
include=$(ORACLE_HOME)/rdbms/demo

ltype=short
define=__64BIT__
define=_IBM_C
define=_LONG_LONG 
```

在 AIX 5.2 中可以使用完全相同的代码。该问题出现在 AIX 5.3 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:50:32.800

报告的第一个错误 PCC-S-02014 实际上是重要的错误。Pro*C 预编译器会忽略一些 C 预处理器指令，但不会`#warning`- 它不理解它，并且认为`warning`在`#`.

您可以使用`ORA_PROC`宏来避免在此阶段包含有问题的头文件。假设上一个答案中给出的位置是正确的，您可以`#include`像这样“隐藏”预处理器：

```
#ifndef ORA_PROC
#include <standards.h>
#endif 
```

当然，您可能不会直接包含该文件，因此您可能需要计算出层次结构以查看您真正需要在源文件中排除哪个文件。在您的情况下，您似乎可以隐藏`mydb.h`在`my_db.pc`文件中，但这似乎太过分了；`standard.h`隐藏在您的文件中可能会更好`mydb.h`- 基本上排除您可以的最少代码量。我从错误消息中推测，您可能有更多层。

[Pro*C/C++ 文档的高级主题](http://docs.oracle.com/cd/B28359_01/appdev.111/b28427/pc_05adv.htm)部分对此进行了介绍。

这比复制和编辑系统头文件更容易，也比编辑原始文件安全得多。当然，它还允许您添加注释来解释正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:50:28.117

此问题通常发生在 AIX 5.3 及更高版本中。/usr/include/standards.h 与旧版本不同，我认为 PCC 不知何故无法编译。

要解决该问题，您必须更改standards.h 中的以下内容。

```
FROM
---

#if defined(__IBM_PP_WARNING)
#warning  The -qdfp option is required to process DFP code in headers.
#else
#error  The -qdfp option is required to process DFP code in headers.

TO
--

//#if defined(__IBM_PP_WARNING)
//#warning  The -qdfp option is required to process DFP code in headers.
//#else
#if !defined(__IBM_PP_WARNING)
#error  The -qdfp option is required to process DFP code in headers. 
```

我建议不要更改系统包含文件。因此，将`standards.h`文件复制到您的项目目录中，修复并使用它。

# mysql - MySQL 计数返回 0

> ID：11680381
> 
> 赞同：1
> 
> 时间：2012-07-27T01:41:42.120
> 
> 标签：mysql, count

正如您在此处看到的，`TotalPic`列 return `0`。有什么问题？

```
SELECT P.*, U.*, COUNT(I.iid) AS TotalPic
FROM post P
LEFT JOIN users U ON U.uid = P.uid
LEFT JOIN images I ON I.pid = P.uid
WHERE P.pid = '2' 
```

我试过用`LEFT JOIN`这样的线程解决[MYSQL COUNT return NULL？](https://stackoverflow.com/questions/9781240/mysql-count-return-null)，但还是一样。

```
+-----------+
|   images  |
+-----------+
| iid       |
| filename  |
| extension |
| pid       |
| uid       |
+-----------+

+-----------+
|   post    |
+-----------+
| pid       |
| uid       | 
|description|
| created_at|
+-----------+

+-----------+
|   users   |
+-----------+                
| uid   |
| fid       |
| date_reg  |
+-----------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:10:49.810

没关系，谢谢。我通过分离查询来解决它。我只需要计数，其他无关紧要。

```
$result = mysql_query("
          SELECT COUNT(iid) AS total_photo 
          FROM images WHERE pid = '$pid'"); 
```

# c# - 我可以将参数列表转发/委托给另一种方法吗？

> ID：11680384
> 
> 赞同：8
> 
> 时间：2012-07-27T01:42:07.733
> 
> 标签：c#, parameters, params

我可以将`params`参数转发给另一个方法吗？

例如，

```
void MyStringMethod(string format, params object[] list)
{
  String.Format(format, list);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T02:04:39.223

为我工作。

```
void Main()
{
    Method1("{0},{1},{2},{3}","Can","I","do","this").Dump();
}

String Method1(string format, params object[] list)
{
    return String.Format(format,list);
} 
```

返回

```
Can,I,do,this 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-05T17:30:23.840

**对，但是！**

我知道从技术上讲这不是一个不同的答案，但是我已经被烧毁了很多次，因为很难调试错误（由在看起来非常简单的场景中使用参数引起），我觉得有必要发表这个评论。

使用时请务必小心`params`。理想情况下不要使用它们，除非你觉得你绝对必须这样做，然后**确保你不要在参数前面使用相同的数据类型**！这会使快速阅读（扫描）代码并知道它会做什么变得非常困难，或者更糟的是，给你一个意想不到的、难以发现的错误。

例如，在下面的代码中，很难看到将打印到控制台的内容。是`(1,2,3)`被传递给`WhoKnocked`实际被识别为`int 1`跟随`int[] [2,3]`还是可能`int[] [1,2,3]`？

```
void Main()
{
    Console.WriteLine(WhoKnocked(1,2,3));
}

public string WhoKnocked(int x, params int[] knocks)
{
    return "It's mee!";
}

public string WhoKnocked(params int[] knocks)
{
    return "No, it's not, its you!";
} 
```

最后，这是另一个可能会给您带来一些令人惊讶的结果的示例。

```
void Main()
{
    Greet(1,"foo", "bar");
    Greet(1, 2, "bar");
    Greet(1,"foo", new object());
    Greet(1,2,3);
    Greet(1,2,3,4);
}

public void Greet(int i, params object[] foo)
{
    Console.WriteLine("Number then param array of objects!");
}

public void Greet(int i, int x, params object[] foo)
{
    Console.WriteLine("Number, ...nuther number, and finally object[]!");
}

public void Greet(int i, string x, params object[] foo)
{
    Console.WriteLine("number, then string, then object[]!");
} 
```

产生以下输出

```
Number, then String, then Object[]!
Number, ...nuther Number, and finally Object[]!
Number, then String, then Object[]!
Number, ...nuther Number, and finally Object[]!
Number, ...nuther Number, and finally Object[]! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T02:05:41.170

我相信你可以，它只是一个对象数组。如果您随后调用另一个需要参数列表的函数，那么您可能会得到意想不到的结果（当然取决于您的期望：-）。请注意，在第三种情况下，您只会获得 2 个参数。

```
 void Test()
    {
        DoIt(1, 2, 3, 4);
    }

    private void DoIt(params object[] p)
    {
        Console.WriteLine(p.Length);
        DoIt2(p);
        DoIt2(p, 5);
    }

    private void DoIt2(params object[] p)
    {
        Console.WriteLine(p.Length);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T02:11:50.247

关键字只是语法糖的`params`一种形式，旨在允许您进行方法调用，就好像它们具有动态参数计数一样。它实际上只是将多个参数转换为数组实例化的编译器。就是这样，一个数组。

数组只是另一个可以传递给其他方法的对象，所以**是**的，你可以转发你想要的那个数组。

# java - 为什么我的通知方法不能正常工作？

> ID：11680393
> 
> 赞同：0
> 
> 时间：2012-07-27T01:44:32.400
> 
> 标签：java, locking, wait, notify

我通过暂停做同样事情的线程等待其中一个完成来改进我的并发程序。但是，它不能正确唤醒线程。这是代码。

```
//to store graphs, if a thread finds the graph it is going to compute is in the entry, it waits, otherwise it compute then notify all other threads waiting on it.
Map<Graph, Object> entry = new ConcurrentHashMap<Graph, Object>();

public Result recursiveMethod(Graph g) {
        if (entry.get(g) != null) {//if the graph is in the entry, waits
            synchronized(entry.get(g)) {
                entry.get(g).wait();
            }
            //wakes up, and directly return the result
            return result;
        }
        synchronized(entry) {
            if (entry.get(g) == null)//if the graph is not in the entry, continue to compute
            entry.put(g,new Object());
        }
        //compute the graph recursively calls this method itself...
        calculate here...
        //wake up threads waiting on it, and remove the graph from entry
        synchronized(entry.get(g)){
            entry.get(g).notifyAll();
        }
        entry.remove(g);
        return result;
} 
```

该方法被许多线程调用。在线程开始计算之前，它会查找条目以查看是否有另一个线程在计算相同的图。如果是这样，它会等待。如果没有，它会继续计算。在计算出结果后，它会通知所有正在等待它的线程。

我使用地图来配对图形和对象。对象是锁。请注意，这张图可以识别两个相同的图，即下面的代码返回true。

```
Graph g = new Graph();
entry.put(g, new Object());
Graph copy = new Graph(g);
entry.get(g) == entry.get(copy) //this is true 
```

因此，entry.get(g) 应该可以作为锁/监视器。但是，大部分线程还没有被唤醒，只有 3-4 个线程。当等待的线程数等于我的计算机可以创建的线程数时，这意味着所有线程都在等待，这个程序永远不会终止。

为什么 entry.get(g).notifyAll() 不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:46:12.393

由于您在检查地图的时间和在地图上操作的时间之间存在不同步的间隙，因此您的逻辑中有*许多*漏洞，线程可能会错误地进行。您要么需要在地图检查之外进行同步，要么对 ConcurrentMaps 使用一些特殊的原子方法。

在编写并发代码时，我喜欢假装有一个恶意 gnome 在后台运行，尽可能地改变事物（例如，在同步块之外）。这是帮助您入门的第一个示例：

```
 if (entry.get(g) != null) {//if the graph is in the entry, waits
        synchronized(entry.get(g)) { 
```

`entry.get()`您在同步块之外调用了两次。因此，您获得的值在这 2 个调用之间可能会*有所不同*（邪恶的 gnome 会尽可能频繁地更改地图）。实际上，当您尝试对其进行同步时，它可能为 null，这将引发异常。

此外，`wait()`在等待循环条件发生变化时，应始终在循环中进行调用（由于可能出现虚假唤醒，或者在您的情况下也可能出现多次唤醒）。最后，您应该在通知*之前*更改循环条件。@AdrianShum 很好地概述了如何正确使用等待/通知。您的 while 循环不应围绕所有内容，而应在同步块内，`wait`仅围绕调用。这不是处理 InterruptedException （一个单独的问题），而是处理虚假的唤醒和`notifyAll`调用。当你调用`notifyAll` *所有*等待线程唤醒时，但只有一个可以继续，所以其余的需要回到等待（因此是 while 循环）。

简而言之，编写并发代码是*困难*的，而你试图实现的并不简单。我建议在尝试完成此代码之前先阅读一本好书（例如 Josh Bloch 的“Java Concurrency In Practice”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:17:37.710

事实上@jtahlborn 已经提出了问题的关键。我试图通过告诉这里最明显的问题来补充。

尝试让自己了解 Condition 的基础知识以及为什么它可以将这些竞争条件作为正常信号解决（例如在 Windows 中）

你的逻辑现在是这样的（假设`obj`指的是同一个对象）：

线程 1：

```
if (!hasResult) {
    synchronized(obj) {
        obj.wait();
    }
} 
```

线程 2：

```
hasResult = false;
// do your work
synchronized(obj) {
   obj.notify();
}
hasResult= true; 
```

你必须知道线程 1 和线程 2 是并行运行的，因此你可能有类似的东西

```
Thread 1                   Thread 2
                         hasResult = false
if (!hasResult)
                         do your work
                         synchronized(obj)
                         obj.notify()
                         end synchronized(obj)

synchronized(obj)
obj.wait()
end synchronized(obj) 
```

线程 1 将永远等待。

你应该做的是

线程 1：

```
synchronized(obj) {
    while (hasResult) {
        obj.wait();
    }
} 
```

线程 2：

```
hasResult = false;
synchronized(obj) {
   // do your work
   obj.notify();
   hasResult=true;
} 
```

我相信这是@jtahlborn 所说的最大漏洞之一（还有其他漏洞）。请注意，设置条件和检查条件都在同步块中受到保护。这就是 Condition 变量如何解决之前说明的竞态条件的主要基本思想。首先让自己理解这个想法，然后用更合理的东西重新设计你的代码。

# php - 使用 Composer 安装/更新后是否应该自动从磁盘中删除依赖项？

> ID：11680395
> 
> 赞同：7
> 
> 时间：2012-07-27T01:44:38.920
> 
> 标签：php, dependency-management, composer-php

从 composer.json 中删除依赖项并运行 install 或 update 后，我是否应该期望文件会自动从磁盘中删除？

我不得不手动删除它们，不确定我是否应该这样做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T15:01:04.887

运行 composer **update**将删除您从 composer.json 中删除的包。

由于**install**使用*composer.lock*而不是*composer.json*它**不会**删除从您的*composer.json*中删除的包。但是，您应该会收到一条消息，指出您的锁定文件与您的*composer.json*不同步，您应该运行更新。

# ruby - Ruby 1.92 和山狮

> ID：11680399
> 
> 赞同：0
> 
> 时间：2012-07-27T01:45:41.103
> 
> 标签：ruby, gem, sass, osx-mountain-lion

我刚刚升级到 Mountain Lion，必须安装 Xcode 4.4（4.1 不起作用）。我相信这对我的 Ruby 安装产生了不利影响，尤其是 Sass。

当我键入时，`$ sass --version`我收到以下错误：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:777:in 'report_activate_error': Could not find RubyGem sass (>= 0) (Gem::LoadError)
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:211:in 'activate'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:1056:in 'gem'
    from /usr/bin/sass:18 
```

有任何想法吗？我正在运行 ruby​​ 1.9.2p320（2012-04-20 修订版 35421）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:37:45.290

我最终做的是：

```
$ source ~/.bashrc 
```

然后我做了：

```
$ gem install sass --pre 
```

这奏效了。当我这样做`$ sass -v`时，它会报告`Sass 3.2.0.alpha.275`而不是上面的错误消息。

# spring - JSF 2.0 f:ajax 侦听器在控制器为请求范围时不被调用

> ID：11680400
> 
> 赞同：2
> 
> 时间：2012-07-27T01:45:59.700
> 
> 标签：spring, jsf, jsf-2

我在使用 JSF2.0 Ajax Tag 时遇到了非常奇怪的问题。以下是对我造成问题的步骤

1.  我的项目使用 JSF2.0 和 Spring 3.0。JSF 连接到 Spring 控制器，生命周期由 Spring 管理。
2.  我的控制器是请求范围的。

到目前为止一切正常

我有一个 selectOne 下拉菜单，在下拉菜单中选择一个值时，它会呈现屏幕的底部，该屏幕底部有另一个下拉菜单。我在父面板组上使用渲染属性来显示和隐藏此下拉菜单。

但是，对于选择值时新呈现的下拉菜单，ajax 侦听器（在其中定义的 F:ajax 标记）不会被调用。我看到以下情况发生

1.  bean 被重新初始化，因为它是请求范围。我看到我的 postconstruct 正在执行。
2.  我在客户端的数据对象中看到成功消息。

唯一缺少的是没有调用侦听器方法。

无论如何要调试生命周期并找出问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:51:47.563

如果在处理 ajax 请求期间评估`rendered`其父组件之一的属性，则不会调用 ajax 操作侦听器。`<f:ajax>``false`

每个请求都会重新创建一个请求范围的 bean，因此它的所有属性都将重置为默认值，除非在 (post) 构造函数中以其他方式初始化。如果属性后面的`rendered`属性没有根据某些请求参数正确重新初始化，那么它将`false`像初始请求一样进行评估。

要修复它，您需要根据请求参数在 bean 的（后）构造函数中进行适当的初始化，或者只是将 bean 放在 JSF 视图范围内。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)
*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)

# ruby-on-rails - 路由错误：未初始化的常量会话

> ID：11680401
> 
> 赞同：1
> 
> 时间：2012-07-27T01:46:03.127
> 
> 标签：ruby-on-rails, ruby, session, routing

我正在关注[这个 Ruby Railcasts 剧集](http://railscasts.com/episodes/250-authentication-from-scratch)以获得一些简单的身份验证，`uninitialized constant Sessions`当我导航到登录页面时出现错误。我检查了我的课程并且名称是正确的，这似乎是大多数人报告的问题。知道这里可能会发生什么吗？

我的控制器文件的名称是`sessions_controller.rb`，代码如下：

```
class SessionsController < ApplicationController
  def new
  end

  def create
    user = User.authenticate(params[:email], params[:password])
    if user
      session[:user_id] = user.id
      redirect_to root_url, :notice => 'Logged In!'
    else
      flash.now.alert = 'Invalid email or password'
      render 'new'
    end
  end

  def destroy
    session[:user_id] = nil
    redirect_to root_url, :notice => 'Logged Out!'
  end
end 
```

routes.rb 文件：

```
Albumtracker::Application.routes.draw do
  get "login" => "sessions/new", :as => "login"
  get "logout" => "sessions/destroy", :as => "logout"

  get "signup" => "users/new", :as => "sign_up"

  root :to => 'users#new'

  resources :users
  resources :sessions

  get "pages/index"
end 
```

会话/新视图文件：

```
<h1>Log in</h1>

<%= form_tag sessions_path do %>
  <p>
  <%= label_tag :email %><br />
  <%= text_field_tag :email, params[:email] %>
  </p>
  <p>
  <%= label_tag :password %><br />
  <%= password_field_tag :password %>
  </p>
  <p class="button"><%= submit_tag "Log in" %></p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T13:35:42.793

您的路线中有拼写错误。 `/`应该`#`在指定控制器和操作时。您的路线应如下所示：

```
get "login" => "sessions#new", :as => "login"
get "logout" => "sessions#destroy", :as => "logout"

get "signup" => "users#new", :as => "sign_up" 
```

当您`/`在路由中使用时，前面的部分与命名空间匹配。所以从`"sessions/new"`路由器试图找到一个名为`Sessions::NewController`. 由于`Sessions`您的应用程序中不存在命名空间，因此您收到未初始化的常量错误。

# magento - Magento 课程的长度有限制吗？

> ID：11680404
> 
> 赞同：2
> 
> 时间：2012-07-27T01:46:25.233
> 
> 标签：magento, block

尝试在 magento 模块中加载块时发现了一个意外问题。块名称是 *Mycompany_CustomerModule_Block_CustomerModuleDashboardDataBlock*（是的，名称很长，但我添加了与模块相关的所有块的模块名称，以避免将 dashboard.html 与 Magento Core 使用的混淆）。问题是，如果我尝试使用以下命令加载这样的块：

```
$this->getLayout()->createBlock('customermodule/customermoduledashboarddatablock') 
```

Magento 引发异常“无效的块类型”。我不知道出了什么问题，因为我从一个完美运行的块中复制了整个文件，然后我尝试将该块重命名为更短的名称，例如简单的*DashboardDataBlock*。使用较短的名称，块被正确加载。

因此，我的问题是，类名称的长度是否有任何限制？我总是可以缩短类名，但我想知道是否有限制，这样我就可以避免将来遇到类似的问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:19:17.517

问题是，不管文件系统是否区分大小写，Magento 类名的最后一部分**不能**是驼峰式大小写。

*   `MyNamespace_MyModule_MyClassName` **不**
*   `MyNamespace_MyModule_myclassname` **不**
*   `MyNamespace_MyModule_myclassName` **不**
*   `MyNamespace_MyModule_Myclassname` **是的**
*   `MyNamespace_MyModule_My_Class_Name` **是的**

您也会在核心模块中注意到这种模式。命名空间和模块的类前缀是从配置文件中读取的，可以包含任意大写字母。但是实际的类名是以不允许大写字母的方式从类别名派生的（`Mage_Core_Model_Config::getGroupedClassname()`如果你想知道为什么，请查看代码。*提示：*它使用`uc_words`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:13:37.337

这里可能有几件事在起作用。如果您使用的是区分大小写的文件系统，那么问题是您需要在文件名和类 ID（`customermoduledashboarddatablock`在您的情况下）之间匹配 camelCasing，并注意自动加载器解析的任何文件夹或文件的第一个字母无论类前缀或类ID如何，都需要大写。此外，请注意 PHP 不关心类名和方法调用的大小写 - 只有自动加载器关心，并且只关心区分大小写的文件系统。

另一个可能的问题是 Windows 环境中的总文件名长度。

# php - 无法在我的 PHP 代码中创建文件

> ID：11680405
> 
> 赞同：1
> 
> 时间：2012-07-27T01:46:26.173
> 
> 标签：php

我正在尝试调试以下 PHP 文件，该文件用于服务来自移动应用程序的签入请求，因此我无法使用打印输出来检查程序的流程，因此我想创建一些文件，所以我可以知道程序是如何运行的。但是我不知道在哪里没有创建文件，即使我已经成功地将记录插入到数据库中，任何人都可以帮助我

这是我的PHP代码：

```
$_Type = $_POST['Type'];
$_ClientID = $_POST['ClientID'];
$_TechID = $_POST['TechID'];
$_SiteID = $_POST['SiteID'];

$content = "First check"; 
$fp = fopen("C:/xampp/htdocs/Me/checking.txt","wb"); 
fwrite($fp,$content); 
fclose($fp);

function checkin($DB, $TechID, $ClientID, $SiteID){
    $dbConnection = mysql_connect($DB['server'], $DB['loginName'], $DB['password']);
    if(!$dbConnection){
        die('Error! ' . mysql_error());
        }
    mysql_select_db($DB['database'], $dbConnection);

    $result1 = mysql_query("SELECT COUNT(*) FROM Log") or die('Error! ' . mysql_error());
    $query = "SELECT `Type` FROM `Log` WHERE `TechID` = '".$TechID."' ORDER BY LogTime DESC LIMIT 1";
    $result2 = mysql_query($query) or die('Error! ' . mysql_error());
    while($row1 = mysql_fetch_array($result1)){
        $count = $row1['COUNT(*)'];
        if(mysql_num_rows($result2) > 0){
            while($row2 = mysql_fetch_array($result2)){
                if(trim($row2['Type'])!="Checkin"){
                    $count = $count+1;
                    $timezone = "Asia/Hong_Kong";
                    if(function_exists('date_default_timezone_set')) 
                        date_default_timezone_set($timezone);
                    $Time = date('Y/m/d H:i');

                    mysql_query("INSERT INTO Log (LogID, TechID, ClientID, SiteID, LogTime, Type)
                                VALUES (".$count.", '".$TechID."', ".$ClientID.", ".$SiteID.", '".$Time."', 'Checkin')");
                }else{
                    mail('me@gmail.com', 'Test mail', 'If you can read this, everything was fine!');

                    $content1 = "First 1"; 
                    $fp1 = fopen("C:/xampp/htdocs/Me/checking1.txt","wb"); 
                    fwrite($fp1,$content1); 
                    fclose($fp1);
                }
            }
        }else{
            $count = $count+1;
            $timezone = "Asia/Hong_Kong";
            if(function_exists('date_default_timezone_set')) 
                date_default_timezone_set($timezone);
            $Time = date('Y/m/d H:i');
            mysql_query("INSERT INTO `Log` (`LogID`, `TechID`, `ClientID`, `SiteID`, `LogTime`, `Type`)
                        VALUES (".$count.", '".$TechID."', ".$ClientID.", ".$SiteID.", '".$Time."', 'Checkin')");
        }
    }
}

checkin($DB, $_TechID, $_ClientID, $_SiteID); 
```

如您所见，这是一个用于插入签入记录的程序，但是如果有人在签出之前想再次签入，则应创建一个文件 checks1.txt。但是，执行后不会创建任何检查.txt 或检查1.txt。

# php - PHP foreach() 仅返回最后 50 个项目

> ID：11680406
> 
> 赞同：1
> 
> 时间：2012-07-27T01:46:33.810
> 
> 标签：php, foreach

我目前正在使用以下 PHP 代码从 .htm 文件返回和格式化输出：

```
<?php
$es = "</span>";
$lines = file("http://www.example.com/log.htm", FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
foreach($lines as $line){
list($date, $nick, $message) = explode(" ", $line, 3);
$str = substr($nick, 4, 1);
if($str=="+"){
  $nickspan = '<span style="color:teal">';
  $nick = substr_replace($nick, "", 2, 2);
  echo("$date $nickspan$nick$es $message <br/>
  ");
} else {
  if($str=="@"){
    $nickspan = '<span style="color:#F20707">';
    $nick = substr_replace($nick, "", 2, 2);
    echo("$date $nickspan$nick$es $message <br/>
    ");
} else {
    $str = substr($nick, 3, 1);
    if($str=="*"){
    $nickspan = '<span style="color:purple">';
    $nick = substr_replace($nick, "", 1, 2);
     echo("$date $nickspan$nick $message$es <br/>
     ");
    } else {
      $nickspan = '<span style="color:grey">';
      $str = substr($nick, 2, 2);
      if($str=="03"){
        $nick = substr_replace($nick, "", 2, 2);
        }
      echo("$date $nickspan$nick$es $message <br/>
      ");
    } } } }
?> 
```

我如何将其更改为仅显示最后 50 行，而不是绝对列出本质上是日志文件的所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:48:10.937

用于在运行循环之前[`array_slice()`](http://php.net/array_slice)切掉最后 50 个元素。`$lines``foreach() { }`

```
$lines = array_slice($lines, -50); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T01:48:33.947

您正在寻找以下[`array_slice`](http://php.net/array_slice)功能：

> `array_slice()`*返回由偏移量*指定的数组*数组*中的元素序列...

 *```
$lines = file(...);
$lines = array_slice($lines, -50); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:34:00.277

另一种选择是自己进行计算并跳过除最后 X 之外的所有计算：

```
$last  = 50;
$count = count($lines);    
foreach ($lines as $line) 
{
    if ($count-- > $last) continue;
    ... 
```*

# android - 如何在平板电脑上通过 Android 手机拨打互联网电话

> ID：11680408
> 
> 赞同：1
> 
> 时间：2012-07-27T01:47:08.530
> 
> 标签：android

我正在开发基于 Nexus 7 平板电脑的自定义嵌入式安全系统。我希望能够从我的应用程序中自动拨打我的手机（后来是 9-11）。我不知道这是否可能。我的猜测是，理论上是这样。

那么，有人知道如何在平板电脑上通过 Android 程序拨打互联网电话吗？会不会很复杂？有我可以使用的网络服务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T06:04:34.323

拨打互联网电话需要`Session Initiation Protocol`在您的手机上使用 Stack。这适用于具有 Gingerbread 及更高版本的 Android 手机。

[developer.android.com](http://developer.android.com/guide/topics/connectivity/sip.html)上有详细指南。

它具有您拨打电话所需的所有代码`SIP over wifi.`

如果您需要一个完整的工作代码，您可以使用[`Sipdroid`](http://code.google.com/p/sipdroid/)其源代码是开放的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:56:04.423

您不能从安卓平板电脑拨打电话（它们没有像手机一样的天线和接收器）。但是，您可能能够拨打 Internet 电话。查看此链接以获取有关[Internet](http://androidandme.com/2010/12/news/how-to-place-and-receive-internet-calls-with-android-2-3/)通话的更多信息。

# android - 来自 URL 按钮的 Android 图像

> ID：11680409
> 
> 赞同：0
> 
> 时间：2012-07-27T01:47:13.250
> 
> 标签：android, image, url, bitmap

我有一个按钮，当我单击它时，我想从 URL 导入图像我尝试了很多代码但没有工作我想要它只是 url 输入，然后它获取图像并将其作为结果

这是我的相机代码，

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
startActivityForResult(intent, RESULT_LOAD_IMAGE); 
```

与浏览器按钮相同，将 IMAGE_CAPTURE 更改为 INTERNET 但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:24:15.727

从互联网上获取图像有点困难，

您需要先下载它，然后将其加载到您的应用程序中。

```
Bitmap bmImg;
void downloadFile(String fileUrl){
      URL myFileUrl =null;          
      try {
           myFileUrl= new URL(fileUrl);
      } catch (MalformedURLException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
      }
      try {
          Handler handler = new Handler();
          new Thread(new Runnable() {

            @Override
            public void run() {
                 HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
                   conn.setDoInput(true);
                   conn.connect();
                   InputStream is = conn.getInputStream();

                   handler.post(new Runnable() {
                       bmImg = BitmapFactory.decodeStream(is);
                       imView.setImageBitmap(bmImg);
                   });
            }

          }).start();

      } catch (IOException e) {
           e.printStackTrace();
      }
 } 
```

[代码源](http://en.androidwiki.com/wiki/Loading_images_from_a_remote_server)

# vba - 在vba中删除自己的代码

> ID：11680411
> 
> 赞同：-1
> 
> 时间：2012-07-27T01:48:05.967
> 
> 标签：vba

您将如何在网络上不留痕迹地删除您自己的 vba 项目？我不知道，所以我不能提供任何代码。这是一个纯粹的信息性问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T02:57:56.073

您的问题有 2 个部分

1.  您将如何删除自己的 vba 项目
2.  在网络上没有踪迹

*注意*：我以 Excel VBA 为例。请相应地浏览菜单并相应地更改代码。

**第1部分**

`Trust Access To Visual Basics Project`如果启用，您可以删除自己的 VBA 项目。

要启用`Trust Access To Visual Basics Project`，请执行此操作

**EXCEL 2003（从内存中执行此操作）**

点击工具 | 宏 | 安全 | 受信任的来源，然后单击`Trust access to the VBA project object model`

**EXCEL 2007（从内存中执行此操作）**

点击办公按钮 | Excel 选项 | 信任中心 | 信任中心设置 | 宏设置并点击`Trust access to the VBA project object model`

**优秀 2010**

转到文件选项卡 | 选项 | 信任中心 | 信任中心设置 | 宏设置并点击`Trust access to the VBA project object model`

**代码**

```
Option Explicit

Sub DeleteVBAPROJECT()
    Dim i As Long

    On Error Resume Next
    With ThisWorkbook.VBProject
        For i = .VBComponents.Count To 1 Step -1
            .VBComponents.Remove .VBComponents(i)
            .VBComponents(i).CodeModule.DeleteLines _
            1, .VBComponents(i).CodeModule.CountOfLines
        Next i
    End With
    On Error GoTo 0
    ThisWorkbook.Save
End Sub 
```

**第2部分**

我不知道你这是什么意思。

如果你的意思是IP记录了那么我不这么认为（虽然我可能是错的）

如果您的意思是记录上次打开文件的用户的用户名，那么是的，只要将用户名输入系统，就会记录下来。

如果您的意思是文件属性（例如文件修改时间）将被记录，那么是的，它将被记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T01:13:17.260

不确定这是否有帮助：

我用来剥离所有 Excel VBA 代码的方法是使用 Excel 2007 或 2010 打开工作簿。然后将工作簿保存为“xlsx”文件，在警告消息处单击“是”。然后关闭工作簿。当你再次打开它时，所有的 VBA 代码都消失了。

# objective-c - Cocos2d 上的自定义字体异常

> ID：11680414
> 
> 赞同：0
> 
> 时间：2012-07-27T01:48:12.950
> 
> 标签：objective-c, ios, cocos2d-iphone

我正在尝试使用自定义字体制作菜单，但它似乎不起作用。这是代码：

```
- (id) init
{
    if (self = [super init])
    {
        CGSize size = [[CCDirector sharedDirector] winSize];
        [CCMenuItemFont setFontName:@"PC Senior Regular"];
        [CCMenuItemFont setFontSize:18];
        CCMenuItemFont *menu1 = [CCMenuItemFont itemFromString:@"Music ON" target:self selector:@selector(musicToggle)];
        CCMenuItemFont *menu2 = [CCMenuItemFont itemFromString:@"Back" target:self selector:@selector(back)];
        CCMenu *menu = [CCMenu menuWithItems:menu1, menu2, nil];
        [menu setPosition:ccp(size.width / 2 , size.height / 2)];
        [menu alignItemsVertically];
        [self addChild:menu];
    } 
```

这是我的 info.plist 中的代码：

```
<key>UIAppFonts</key>
    <array>
        <string>PC Senior Regular.ttf</string>
        <string>senior.ttf</string>
    </array> 
```

例外：

```
2012-07-27 05:42:35.369 Busterball[16089:10a03] In options
2012-07-27 05:42:35.371 Busterball[16089:10a03] -[__NSCFConstantString sizeWithZFont:]: unrecognized selector sent to instance 0xb0670
2012-07-27 05:42:35.372 Busterball[16089:10a03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString sizeWithZFont:]: unrecognized selector sent to instance 0xb0670' 
```

我曾尝试使用senior.ttf，只是高级等。两种字体都被添加为项目的目标。我仔细检查了正确的类型案例。出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:30:55.020

你有没有尝试过这样的事情？

```
CCLabelTTF *label = [CCLabelTTF labelWithString:"Some Text" fontName:@"MyFont.TTF" fontSize:24.0];
CCMenuItem *item = [CCMenuItemLabel itemWithLabel:label target:self selector:@selector(myFunction)];
CCMenu *menu = [CCMenu menuWithItems:item];
[self addChild:menu]; 
```

您的 info.plist 看起来不错，并且此代码对我有用。也就是说，我确实建议设置断点并尝试找出错误的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:30:56.807

无效参数异常意味着您正在尝试使用无法识别的方法。问题是您的 sizeWithZFont 方法。我曾尝试在 cocos2d 文档中进行搜索，但这不是其中的方法。

# ruby - Gem没有安装包

> ID：11680416
> 
> 赞同：2
> 
> 时间：2012-07-27T01:48:17.287
> 
> 标签：ruby, ubuntu, gem, compass-sass

所以我正在尝试安装一个包

```
$ sudo gem install compass 
```

再具体一点。它安装正确并在我做一个列表时显示：

```
$ gem list

*** LOCAL GEMS ***

chunky_png (1.2.5)
compass (0.12.2)
fssm (0.2.9)
sass (3.1.20) 
```

但由于某种原因，当我尝试运行指南针时，什么也没有发生。它说找不到该命令。我究竟做错了什么？

```
$ compass
  bash: compass: command not found 
```

如果有帮助，我正在运行 Ubuntu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:31:20.183

确认有 的输出`locate -r /compass.rb$`，然后`echo $GEM_HOME`。您应该会发现它`gem`不知道`compass`安装到的目录。您可以将其从之前的位置移动到由 指定的目录中`GEM_HOME`，或者将该目录附加到文件中的变量中`~/.bash_rc`。不过，更好的是[`rvm`](https://rvm.io/)用于管理您的宝石（和红宝石），因为它巧妙地避免了此类问题，并且还允许对整个过程进行更精细的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:10:32.347

这个问题可以通过以下方式解决：

[http://markushedlund.com/dev-tech/ubuntu-compass-command-not-found](http://markushedlund.com/dev-tech/ubuntu-compass-command-not-found)

问题是安装gem compass时没有正确更新的全局变量PATH

跑

> echo "PATH=\$PATH:/var/lib/gems/1.8/bin:\$HOME/.gem/ruby/1.8/bin" >> /etc/profile.d/rubygems1.8.sh

并重新登录

# vba - 控制标题文本显示得更小

> ID：11680423
> 
> 赞同：2
> 
> 时间：2012-07-27T01:49:33.633
> 
> 标签：vba, excel

我正在使用 Excel 中的用户表单，每次都必须动态生成。它可以列出许多（100+）行格式完全相同。这些是由以下代码片段生成的。

```
' ctextbox
Set ctl = .Controls.Add("Forms.Textbox.1")
With ctl
    .Top = 12 + linetop
    .Left = 464.9
    .Width = 140
    .Height = 18
    .Name = FieldName & "_ctextbox"
End With
' cshow
Set ctl = .Controls.Add("Forms.CommandButton.1")
With ctl
    .Top = 13.1 + linetop
    .Left = 611.35
    .Width = 41.95
    .Height = 18
    .Name = FieldName & "_cshow"
    .Caption = "Show All"
End With
' confirm
Set ctl = .Controls.Add("Forms.Checkbox.1")
With ctl
    .Top = 13.5 + linetop
    .Left = 659
    .Width = 44.95
    .Height = 17.25
    .Name = FieldName & "_confirm"
    .Caption = "Confirm"
End With 
```

除了确认复选框看起来比其他复选框小的随机事件之外，它会很好。下面的屏幕截图显示了我的意思。

![表格截图](../Images/20c57f506f2f5145b977bfe2eaae8fba.png)

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:32:13.157

我建议`repainting`您在动态添加控件后使用 Userform。

Repaint 方法完成指定表单的任何挂起的屏幕更新。在窗体上执行时，Repaint 方法还完成窗体控件的任何挂起的重新计算。

如果对象的内容或外观发生变化并且您不想等到系统自动重新绘制该区域，则此方法很有用。`Me.Repaint`只需通过重绘表单来更新显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T11:59:23.483

我遇到了同样的问题，因为我的重绘不起作用。我通过将 CheckBox AutoSize 属性设置为 True 解决了这个问题，我再也没有问题了。

# objective-c - NSTableView 渲染“颠倒”

> ID：11680424
> 
> 赞同：2
> 
> 时间：2012-07-27T01:49:43.520
> 
> 标签：objective-c, cocoa, nstableview

嗯，这是一个非常有趣的问题。我已经布置了一个 NSTableView（基于视图），它连接到从 nib（in 中`-initWithCoder:`）加载的自定义单元格，但单元格本身会倒置。但这不仅仅是任何传统的倒置，UI 对象的框架实际上是“翻转”的，因此定位在 {0,0} 的任何元素都将定位在 {0,120} 并且正面朝上文本。也许一些图像会做出更好的解释：

在 XIB ![XIB 中的单元格](../Images/4aeb62d8051d7828022f8d0d7bf97592.png)

现在在表中

![并在表中](../Images/20dd27b68d1cc6c01e8505f2f2987cb9.png)

到底他妈发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T03:26:15.100

听起来您已经翻转了坐标，如此处所述：[翻转滚动视图](http://www.poweredbytim.co.uk/programming/nsscrollview-top-left-pinning-and-isflipped/)。

您可以检查`isFlipped`所有视图和单元格的属性并确保它不是吗？（`isFlipped`是 NSGraphicsContext 的一个属性。）

这是坐标的官方指南：[原点左下角与左上角](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Transforms/Transforms.html)

# ruby - 如何从一个范围内返回一组天数和小时数？

> ID：11680425
> 
> 赞同：4
> 
> 时间：2012-07-27T01:50:00.433
> 
> 标签：ruby, ruby-on-rails-3

如何从一个范围内返回一组天数和小时数？到目前为止，我已经尝试过：

```
(48.hours.ago..Time.now.utc).map { |time| { :hour => time.hour } }.uniq 
```

回报：

```
[{:hour=>1}, {:hour=>2}, {:hour=>3}, {:hour=>4}, {:hour=>5}, {:hour=>6}, {:hour=>7}, {:hour=>8}, {:hour=>9}, {:hour=>10}, {:hour=>11}, {:hour=>12}, {:hour=>13}, {:hour=>14}, {:hour=>15}, {:hour=>16}, {:hour=>17}, {:hour=>18}, {:hour=>19}, {:hour=>20}, {:hour=>21}, {:hour=>22}, {:hour=>23}, {:hour=>0}] 
```

不理想，因为它每秒都在迭代。这需要很长时间。我收到几条警告消息，上面写着：

```
/Users/Chris/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.2.2/lib/active_support/time_with_zone.rb:328: warning: Time#succ is obsolete; use time + 1 
```

我试图返回类似的东西：

```
[{:day => 25, :hour=>1}, {:day => 25, :hour=>2}, {:day => 25, :hour=>3}, {:day => 25, :hour=>4} ... {:day => 26, :hour=>1}, {:day => 26, :hour=>2}, {:day => 26, :hour=>3}, {:day => 26, :hour=>4}] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T03:02:49.277

使用[Range#step](http://www.ruby-doc.org/core-1.9.3/Range.html#method-i-step)，但作为预防措施，首先将日期转换为整数（显然[使用整数的范围具有 step() 优化](https://stackoverflow.com/questions/5286868/rubys-range-step-method-causes-very-slow-execution)-YMMV）。作为风格问题，我也先截断到小时。

这是一些快速的“n”脏代码：

```
#!/usr/bin/env ruby

require 'active_support/all'

s=48.hours.ago
n=Time.now

st=Time.local(s.year, s.month, s.day, s.hour).to_i
en=Time.local(n.year, n.month, n.day, n.hour).to_i

result = (st..en).step(1.hour).map do |i|
  t = Time.at(i)
  { day: t.day, hour: t.hour }
end

puts result.inspect 
```

产量：

```
[{:day=>25, :hour=>11}, {:day=>25, :hour=>12}, {:day=>25, :hour=>13}, 
{:day=>25, :hour=>14}, {:day=>25, :hour=>15}, {:day=>25, :hour=>16},
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T03:09:55.520

```
stime = 48.hours.ago
etime=Time.now.utc
h = []
while stime <= etime
  h.push({ :day => stime.day, :hour => stime.hour })
  stime += 1.hour
end 
```

# c# - C# 在运行时填充工具条菜单项

> ID：11680427
> 
> 赞同：1
> 
> 时间：2012-07-27T01:50:26.400
> 
> 标签：c#, winforms

我想在运行时将子菜单添加到主菜单中。我查看了其他帖子 [在运行时添加到条形菜单，](https://stackoverflow.com/questions/7590395/adding-to-strip-menu-at-run-time) 但我不明白我在这里缺少什么，因为它只填充一个项目，但我在文件夹中有三个 xml 文件。下面是代码。testsuite 参数包含 xml 文件。

```
 public void LoadTestSuiteMenuStrip(string[] testsuite)
    {
        try
        {
            foreach (var temp in testsuite)
            {
                int max = temp.Length-1;
                while (temp[max] != '\\')
                    max--;

                max++;

                //remove the folder path and take only xml file name
                string name = temp.Substring(max, temp.Length - max);

                ToolStripMenuItem subItem = new ToolStripMenuItem(name);
                //subItem.DisplayStyle = ToolStripItemDisplayStyle.Text;
                //subItem .Text = name;
                //subItem .Name = name;
                //subItem.Tag = name;
                subItem.Click += new EventHandler(testSuiteToolstrip_Click);
                testsuiteToolStripMenuItem.DropDownItems.Add(subItem);
            }
        }
        catch (Exception error)
        {
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:26:53.117

确保从主线程访问 GUI。如果要从其他线程添加项目，而不是

```
LoadTestSuiteMenuStrip(args); 
```

利用

```
Invoke(new Action<string[]>(LoadTestSuiteMenuStrip), new object[] { args }); 
```

# python - 在文本文件中创建循环计数器：Ptython

> ID：11680428
> 
> 赞同：-1
> 
> 时间：2012-07-27T01:50:29.490
> 
> 标签：python, loops, text, counter

这是我到目前为止所得到的：

```
counter = (0)

loop = 1
while loop ==1:

a = open ("mustangused.txt", "w")
counter = (str(counter)+str(1))
a.write (counter)
loop = 1 
```

我想做它，这样它就会计算你通过 theis 循环的次数并在 .txt 文档中打印文本。

上面的代码有点工作，但问题是它只会将数字添加到以前的数字，如 12345，而不替换旧数字:( 我尝试了 w.write，但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T01:58:49.353

```
LIMIT = 10  # adjust this to the number of iterations you want.
with open('mustangused.txt', 'w') as f:
    counter = 0
    while counter < LIMIT:
        counter += 1

    f.write(str(counter) + '\n') 
```

不清楚你想做什么，也不清楚你想执行多少次循环。尽管如此，这为您提供了一个框架，用于在文件关闭之前打开文件、循环并将值写入文件。您可能需要对此进行一些添加/更改以满足您的需要。

一些注意事项：

*   我`with`以前是管理文件的，当我们完成或发生异常时它会自动关闭文件。

*   添加值时，无需每次在循环内将计数器转换为字符串，只需在要将其写入文件时将其转换一次。

*   不是在循环中重复打开同一个文件，而是在循环之前只打开一次文件（并在退出“with”块时自动关闭）。

*   总而言之，最后，你可以只做一个`f.write(str(LIMIT) + '\n')`没有循环的循环来完成文件中的相同输出，所以这个问题的目标对我来说仍然不清楚。

不过，我希望这在某种程度上/某种程度上有所帮助。

# google-app-engine - 使用 Google Picker 将文件上传到 Google Drive 并放置在特定文件夹中

> ID：11680429
> 
> 赞同：5
> 
> 时间：2012-07-27T01:50:39.370
> 
> 标签：google-app-engine, google-drive-api, google-picker

我正在尝试使用 Google Picker 将文件上传到 Google Drive 中的特定文件夹。当我只是上传到根文件夹时一切正常，但即使在指定父文件夹（如下面的代码所示）后，文件仍会转到根文件夹，而不是我指定的文件夹。我确定 folderID 是正确的，因为我在其他地方使用相同的 ID 在我的 GAE 应用程序中创建纺织品，并将它们放在子文件夹中。我的代码如下：

```
 function createPicker() {
            // Create a view to search images.
            var view = new google.picker.View(google.picker.ViewId.DOCS);
            view.setMimeTypes('image/png,image/jpeg');

            // Use DocsUploadView to upload documents to Google Drive.
            var uploadView = new google.picker.DocsUploadView().setParent('THE Parent folder ID');

            var picker = new google.picker.PickerBuilder().
                addView(view).
                addView(uploadView).
                setAppId("pressomatic").
                setCallback(pickerCallback).
                build();
            picker.setVisible(true);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-18T04:17:45.280

您必须添加：

```
enableFeature(google.picker.Feature.MULTISELECT_ENABLED) 
```

在你的情况下，它变成：

```
 var picker = new google.picker.PickerBuilder().
            enableFeature(google.picker.Feature.MULTISELECT_ENABLED).
            addView(view).
            addView(uploadView).
            setAppId("pressomatic").
            setCallback(pickerCallback).
            build();
        picker.setVisible(true);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-02T13:57:28.397

这是 Picker API 论坛中记录的错误：[https ://groups.google.com/forum/#!topic/Google-Picker-API/xaHcET7JYLw](https://groups.google.com/forum/#!topic/Google-Picker-API/xaHcET7JYLw)

您必须添加：

```
.enableFeature(google.picker.Feature.MULTISELECT_ENABLED) 
```

在你的情况下，它变成：

```
var picker = new google.picker.PickerBuilder()
        .enableFeature(google.picker.Feature.MULTISELECT_ENABLED)
        .addView(view)
        .addView(uploadView)
        .setAppId("pressomatic")
        .setCallback(pickerCallback)
        .build(); 
```

希望这可以帮助。

# android - Android App，添加收藏报价功能

> ID：11680433
> 
> 赞同：0
> 
> 时间：2012-07-27T01:51:17.393
> 
> 标签：android, favorites

我有一个 android 应用程序，它显示报价并导航到下一个报价等等。想根据用户选择的特定报价添加“将报价保存为收藏夹”。

一旦用户保存最喜欢的报价并只想查看这些报价，应用程序应该显示这些报价。

当前应用程序从 XML 文件中读取引号。让我知道是否需要更多信息来理解问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:05:07.453

我会为每个报价提供一个 ID (int)。每当用户选择最喜欢的报价时，该 ID 就会保存到一组整数中。稍后，如果用户决定显示收藏夹，您可以从 Set 中获取带有您的 ID 的所有引号，并将它们显示在适当的视图中，例如 ListView

如果你有一个 Quote 类或类似的东西，你不妨在用户决定他的最爱时将它们放在一个集合中，并在带有自定义适配器的 ListView 中显示它们。

# android - 在另一个选项卡中刷新 Android ListVew 的正确方法

> ID：11680436
> 
> 赞同：0
> 
> 时间：2012-07-27T01:51:54.723
> 
> 标签：android, listview, android-fragments

基本上我有两个标签。一个片段和一个 ListFragment。

在 Fragment 中时，您可以将数据插入到数据库中，该数据库将在 ListFragment 选项卡中直接填充 ListView。我希望能够滑动到该 ListFragment（插入新数据后），并且在使用 ViewPager 功能进行滑动时，我希望 ListView 刷新。

有没有合适的方法来做到这一点？如果需要，我可以显示代码；但不确定要显示哪个代码。首先，这是我的查看寻呼机设置：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_layout);

    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setDisplayHomeAsUpEnabled(true);

    mViewPager = (ViewPager) findViewById(R.id.viewpager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    mViewPager
            .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    actionBar.setSelectedNavigationItem(position);
                }
            });

    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        actionBar.addTab(actionBar.newTab()
                .setText(mSectionsPagerAdapter.getPageTitle(i))
                .setTabListener(this));
    }

} 
```

请注意：这不是双窗格设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:56:39.703

正确的方法是让您`ListFragment`实现`LoaderManager.LoaderCallbacks<D>`接口并初始化 a`Loader`以加载绑定到`ListView`.

您可以阅读此[**博客文章**](http://www.androiddesignpatterns.com/2012/07/loaders-and-loadermanager-background.html)以了解有关`Loader`s 的更多信息。

# macos - OS X 10.8 (Mountain Lion) 更新后 MAMP Apache 无法启动

> ID：11680442
> 
> 赞同：4
> 
> 时间：2012-07-27T01:53:22.727
> 
> 标签：macos, apache, localhost, mamp, osx-mountain-lion

今天我更新到 OS X Mountain Lion。我注意到 Apache 不会在 MAMP 中启动。apache 日志文件中似乎没有新内容。`sudo apachectl -k start`在终端中运行给了我这个：

```
httpd: Could not reliably determine the server's fully qualified domain name, using Ryan-Smiths-MacBook.local for ServerName 
```

我的`httpd.conf`文件中确实定义了 ServerName。

我还注意到“网络共享”不再出现在“设置”窗格中……很奇怪。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-27T09:24:35.470

嗨，瑞安，我们遇到了这个问题

事实证明，系统自己的 apache 正在运行。我们在这里记录了它[http://support.servertastic.com/mamp-not-starting-after-upgrade-to-mountain-lion/](http://support.servertastic.com/mamp-not-starting-after-upgrade-to-mountain-lion/)

干杯

理查德

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-31T14:38:03.493

要解决此问题并启动 MAMP apache，您现在可以参考：（上面的链接现在已损坏。）

[https://support.servertastic.com/mamp-not-starting-after-upgrade-to-mountain-lion/](https://support.servertastic.com/mamp-not-starting-after-upgrade-to-mountain-lion/)

或者只需运行以下命令：

```
sudo apachectl stop 
```

此外，如果您遇到无法启动 mysql 的问题，请尝试通过执行以下操作终止可能已经运行的 mysql 进程：

1.  在 Mac 上打开名为“活动监视器”的程序。
2.  搜索一个名为“mysqld”的进程。
3.  点击该进程并“退出进程”</li>

学分： [http ://eliteeternity.com/mysql-server-wont-start-mamp-red-light-mac/](http://eliteeternity.com/mysql-server-wont-start-mamp-red-light-mac/) [http://forum.mamp.info/viewtopic.php?f=6&t=6149](http://forum.mamp.info/viewtopic.php?f=6&t=6149)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T19:54:57.257

在 MAMP PRO 2.1.1 中，单击**工具**>**退出内置 Apache**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-22T17:59:29.470

通过打开活动监视器，选择“所有进程”然后在标题中使用“httpd”杀死任何进程，我能够解决这个正在运行的 OS X 10.8.4。之后我就可以启动 MAMP 并且 MYSQL 和 Apache 服务器都开了绿灯！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-13T12:33:11.000

这个修复了我的 MAMP

> 只需使用 Finder 导航到 /Applications/MAMP/bin/apache2/bin，然后将 envvars 重命名为 _envvars（是的，只需添加下划线）。繁荣！做完了。

来自[codesoap](http://codesoap.com/mamp-pro-apache-and/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T13:00:38.767

有同样的问题；没有其他技巧有帮助。我发现我有一个“允许来自 127.0.0.1”的实例——删除 IP 就可以了。不知道为什么。

[http://cl.ly/image/253g1L1W472z](http://cl.ly/image/253g1L1W472z)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-04T16:42:47.640

OSX Mountain Lion 的问题是`/usr/lib/libpq.5.3.dylib`不存在，但`/usr/lib/libpq.5.dylib`确实存在。

要解决此问题，请打开终端并：

```
~# sudo ln -s /usr/lib/libpq.5.3.dylib /usr/lib/libpq.5.dylib 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-10T07:29:35.670

只需尝试修改 httpd.conf 中的 mamp ：

> LoadModule php5_module /Applications/MAMP/bin/php/php5.5.3/modules/libphp5.so

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-16T16:39:50.423

我对类似问题的解决方案。即 MySQL 从 MAMP 管理器实用程序运行良好。Apache 服务器没有，并且“打开开始页面”是灰色的，即无法正常工作。

看来我的问题是，Apache 服务器出于某种原因无法访问 /Applications/MAMP/logs 文件夹中的日志文件 apache_error.log。该文件似乎以某种方式“卡住”了，即我无法使用 chmod 命令更改对文件的访问权限。只有在我完全删除日志文件然后重新启动 MAMP 控制实用程序并再次启动 MySQL 和 Apache 之后，一切正常。

BR，珍妮

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-27T10:11:01.950

有同样的问题。

然后我将`ServerName`to`localhost`和`Listen`port 设置为`8080`，因为 80 不知何故不可用（即使不是 sudo）。就我而言，它似乎已经解决了这个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-14T18:54:16.417

如果没有像我这样对您有用，那么问题可能是您在运行 MAMP 的情况下运行了 MAMP 更新，然后您关闭了现有的 MAMP 而没有停止您的服务器。您需要做的就是重新启动您的机器。

# sql - 是否有在 Ubuntu .deb 包上升级/创建数据库的机制？

> ID：11680448
> 
> 赞同：3
> 
> 时间：2012-07-27T01:53:47.580
> 
> 标签：sql, linux, ubuntu, deployment, deb

例如，android平台有类似的东西：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{
    db.execSQL("DROP TABLE ....");
    db.execSQL("ATER TABLE ....");
    onCreate(db);
} 
```

处理升级等非常好。

.deb 包有类似的策略吗？我知道我可以使用 debian/control，debian/preinst 来获取当前版本，debian/postinst 来处理然后数据库升级，但它不是一个整洁的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T22:08:10.880

不，没有。不过，它不需要那么干净。你的 postinst 只需要有类似的东西

```
case "$1" in
    configure)
        oldver=$2
        if dpkg --compare-versions "$oldver" -lt 1.2.3; then
            sqlite3 mydb.db 'DROP TABLE W...'
            sqlite3 mydb.db 'ALTER TABLE X...'
        fi
        if dpkg --compare-versions "$oldver" -lt 1.3.4; then
            sqlite3 mydb.db 'DROP TABLE Y...'
            sqlite3 mydb.db 'ALTER TABLE Z...'
        fi
    ;;
...
esac 
```

# mysql - Mysql CASE 语句在 Zend 中的使用

> ID：11680451
> 
> 赞同：1
> 
> 时间：2012-07-27T01:54:28.313
> 
> 标签：mysql, zend-framework, case

我有以下查询从数据库中选择一些记录：

```
$select_person = $this->select()
        ->setIntegrityCheck(false)
        ->from(array('a' => 'tableA'), 
                array(new Zend_Db_Expr('SQL_CALC_FOUND_ROWS a.id'),
                        'a.cid',  
                        'a.email',
                        'final' => new Zend_Db_Expr( "concat( '<div 
                            style=\"color:#1569C7; font-weight:bold\">',
                            a.head , ' ' ,  a.tail,  '</div>')" ),
                        'a.red_flag'
                )
        )   
        ->joinLeft(array('b' => 'tableb'), ... blah blah)
        ->where('blah blah')
        ->order('a.head ASC') 
```

我想修改上面的查询，以便它根据值选择不同`'final'`的值

```
a.red_flag. 
```

可以有值 - true 或 false。

我知道我可以使用 mysql 的 CASE 语句 - 例如如下所示：

```
'final' => new Zend_Db_Expr("CASE a.red_flag WHEN 'true' THEN '$concatstr1'
                        ELSE '$concatstr2' END") 
```

的价值`$concatstr1 = "concat( '<div style=\"color:red; font-weight:bold\">', a.head , ' ' , a.tail, '</div>')" ;`

的价值`$concatstr2 = "concat( '<div style=\"color:blue; font-weight:bold\">', a.head , ' ' , a.tail, '</div>')" ;`

但是，它会抛出一个错误说

> 消息：SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'div style="color:red; font-weight:bold">', a.head , ' ' , ' 附近使用正确的语法

我怎样才能使这个查询工作？任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T10:10:28.307

个人而言，我不喜欢从数据库中获取 HTML 作为答案。之后调试和更改会变得混乱和困难。此外，由于与 ' 和 " 以及 MySQL 中的所有保留字符（<、>、;、...）混淆，您可能会遇到一些错误，我建议您尝试以下操作：

```
'final' => new Zend_Db_Expr("CASE a.red_flag WHEN 'true' THEN 1
                        ELSE 0 END") 
```

然后检查 a.red_flag 的值；

```
if($this->final) {
    $output .= '<div style=\"color:red; font-weight:bold\">';
} else {
    $output .= '<div style=\"color:blue; font-weight:bold\">';
}
$output .= $this->head.' '.$this->tail;
$output .= '</div>'; 
```

如果查询仍然不起作用。尝试

```
echo $select->__toString; exit(); 
```

并检查查询。尝试使用数据库上的 __toString 获得的输出并检查它是否有效。以这种方式修复它更容易。您也可以在此处显示查询字符串，这样会更容易调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:04:08.987

最后，我在我的陈述中发现了错误。罪魁祸首是——我在声明中`$concatstr1`和声明中使用了引号。正确的查询应该形成如下：`$concatstr2``$select_person`

```
$select_person = $this->select()
        ->setIntegrityCheck(false)
        ->from(array('a' => 'tableA'), 
                array(new Zend_Db_Expr('SQL_CALC_FOUND_ROWS a.id'),
                        'a.cid',  
                        'a.email',
                        final' => new Zend_Db_Expr("CASE a.red_flag WHEN 'true' THEN $concatstr1 ELSE $concatstr2 END"),
                        'a.red_flag'
                )
        )   
        ->joinLeft(array('b' => 'tableb'), ... blah blah)
        ->where('blah blah')
        ->order('a.head ASC'); 
```

这现在返回给我适当的 ' `final`' 值 -否则它返回`concatstr1`我。`red_flag``true``concatstr2`

# git - git stash：我目录中的文件去哪了？

> ID：11680453
> 
> 赞同：4
> 
> 时间：2012-07-27T01:55:20.937
> 
> 标签：git, git-stash

我有一种不好的感觉，我的工作丢失了。有没有办法让他们回来？

这是我所做的要点：

```
# Initially
$ git init -q
$ echo foo >foo
$ git add foo
$ git commit -m initial
[master (root-commit) 399ac4f] initial
 1 file changed, 1 insertion(+)
 create mode 100644 foo

# Work work work
$ rm foo
$ mkdir foo && echo bar >foo/bar

# This is where things went bad
$ git stash
Saved working directory and index state WIP on master: 399ac4f initial
HEAD is now at 399ac4f initial
$ git stash pop
Removing foo
# On branch master
# ...
no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (c8353a2223b73ceb9aa73fac64829919b68c86e9)

# What happened to my work!?
$ find foo
find: foo: No such file or directory

$ git --version
git version 1.7.11.3 
```

不幸的是，我认为`foo/bar`从未见过存储库/索引，因为`git`在此之前我没有在其上运行任何命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T02:26:39.387

您可以轻松恢复丢失的存储（您可以在屏幕上查看其修订版）。但这没有用。

`git stash`不保存新文件（在您的情况下为 foo/ 目录内容），但`git reset --hard`在退出之前会保存。这将恢复有效删除`foo/`.

我建议使用某种已删除文件恢复工具。

PS 向 git 邮件列表发送了一封关于此的电子邮件。他们说这是一个错误，因为`git stash`它旨在成为一个安全的命令。但现在只需使用`git stash -u`. 这样 git 将所有（甚至未跟踪的）文件保存到存储中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:32:47.020

我本人是“Git stash \ Git stash apply”-man，但这个问题和答案可能会有所帮助。

[如何在 Git 中恢复丢失的存储？](https://stackoverflow.com/questions/89332/recover-dropped-stash-in-git)

# javascript - 溢出：自动在黑莓设备上不起作用

> ID：11680454
> 
> 赞同：1
> 
> 时间：2012-07-27T01:55:29.370
> 
> 标签：javascript, html, css, blackberry

我正在使用 HTML 和 JavaScript / CSS 开发一个简单的应用程序。我在 HTML 代码中有一个`div`容器，我在我的 CSS 文件中定义了它的样式，如下所示：

**HTML：**

```
<html>
<head>
</head>
<body>
<div id="container">
</div>
</body>
</html> 
```

**CSS：**

```
.container
{
height:150px;
width:100%;
position:relative;
overflow:auto;
} 
```

我在运行时填充`div` *容器* 。当内容超出容器时，浏览器上会出现一个自动滚动条，但在 BlackBerry 上不会发生同样的情况。

我的黑莓软件版本是 6.0 及以上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:24:08.410

对于 ID，您需要使用Notation `#`，对于类，您需要使用`.`Notation。“容器”是您的 html 中的 ID，但在 CSS 中您将其用作类。删除点并改写`#`。

# django - 将表单添加到管理端

> ID：11680455
> 
> 赞同：0
> 
> 时间：2012-07-27T01:55:30.747
> 
> 标签：django, django-forms, django-admin

我需要创建一个包含两个字段的管理端表单

1.  码数：整数
2.  代码值：浮点数

我怎样才能做到这一点。此表格与任何模型无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:58:10.600

```
from django import forms

class Your_Form(forms.Form):
    number_code = forms.IntegerField()
    value_code  = forms.FloatField() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:41:19.493

您可以按照@levi 的回答中的说明实现您的无模型表单。然后，您可以通过多种不同的方式将其放置在管理站点中，具体取决于您的需要：

*   通过[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)使表单的实例可用于所有模板，并[覆盖管理模板](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)以使其呈现在您想要的任何位置。您可以创建仅用于处理表单的视图。
*   创建一个视图以在唯一的位置呈现和处理表单，并将其连接到管理员[，如旧 Django Book 中所述](http://www.djangobook.com/en/1.0/chapter17/#cn62)，您需要确保该视图的模板扩展了管理员的模板之一（`admin/change_form.html`可能是一个不错的选择）。

# iphone - 有谁知道应用审核流程结束的时间？

> ID：11680456
> 
> 赞同：0
> 
> 时间：2012-07-27T01:55:36.733
> 
> 标签：iphone, ios, xcode

我原本以为他们会在晚上 9 点到 5 点进行审核，但是我的应用在晚上 7 点 51 分被拒绝……他们是 24/7 进行审核还是在某个时间关闭。（我和库比蒂诺在同一个时区）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:58:56.950

24/7 每当他们有时间检查你的。
通常需要 10-15 天才能在应用商店中获得应用。

# apache - 基于 IP 地址的条件 DirectoryIndex，使用 .htaccess

> ID：11680457
> 
> 赞同：0
> 
> 时间：2012-07-27T01:55:44.377
> 
> 标签：apache, .htaccess, conditional

我有这个`httpd.conf`：

```
<VirtualHost xx.xxx.xx.xxx>
    Options All +ExecCGI
    ServerAdmin hostmaster@thehost.com
    DocumentRoot /var/www/html/domain.com
    ServerName  dl.domain.org
    DirectoryIndex dlindex1.html
</VirtualHost> 
```

...这很好（我需要作为`DirectoryIndex`我们的 'dl.domain.org' 子域的），*但*现在我还需要`DirectoryIndex`根据 IP 地址更改它，使用`.htaccess`. 这可能吗？

其他 SO 帖子告诉我，我不能`DirectoryIndex`有条件地设置..而是*必须*使用`RewriteRule`. 如果这是真的，好的，但是什么`RewriteCond`和`RewriteRule`？我在 Apache 中很菜鸟，但无论如何我尝试了很多东西，包括（实际 IP 是我们 2 个开发人员的 IP）：

```
RewriteCond %{REMOTE_ADDR} ^111\.222\.333\.444$    [OR]
RewriteCond %{REMOTE_ADDR} ^555\.666\.777\.888$
RewriteCond %{SERVER_NAME} ^dl.domain.org
RewriteRule ^(.*)/$ $1/dlindex2.html 
```

..甚至只是（作为绝对测试）：

```
RewriteCond %{REMOTE_ADDR} ^555\.666\.777\.888$
RewriteRule (.*)/dlindex1.html$ $1/dlindex2.html 
```

但似乎无论我尝试什么，它都只是提供`DirectoryIndex dlindex1.html`as per `httpd.conf`，而不是`dlindex2.html`当开发人员 IP 调用时，我希望作为该子域中的默认页面提供服务。

任何人都可以指出我可以做些什么来获得我所追求的吗？即： ...实际上，甚至只是有效地，`DirectoryIndex`根据IP地址进行更改，使用`.htaccess`，在飞行中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:32:22.193

有两种方法对我有用：

[https://unix.stackexchange.com/questions/44129/conditional-directoryindex-based-on-ip-address-using-htaccess](https://unix.stackexchange.com/questions/44129/conditional-directoryindex-based-on-ip-address-using-htaccess)

[https://webmasters.stackexchange.com/questions/32727/conditional-directoryindex-based-on-ip-address-using-htaccess](https://webmasters.stackexchange.com/questions/32727/conditional-directoryindex-based-on-ip-address-using-htaccess)

例如：

```
RewriteEngine On
RewriteCond %{REMOTE_ADDR} ^12\.34\.56\.78$
RewriteCond %{REQUEST_URI} index\.html$
RewriteRule .* /index1.html

RewriteCond %{REMOTE_ADDR} !^12\.34\.56\.78$
RewriteCond %{REQUEST_URI} index\.html$
RewriteRule .* /index2.html 
```

# sql-server - SQL Server 数据仓库的 Web 前端

> ID：11680458
> 
> 赞同：4
> 
> 时间：2012-07-27T01:55:57.700
> 
> 标签：sql-server, reporting-services, ssas, business-intelligence, microstrategy

需要为 SQL Server 2008 中构建的数据仓库提供易于设置和灵活的 Web 前端。我希望能够公开 SSRS 报告和 SSAS 多维数据集以供浏览。

似乎微软希望我们所有人都为此使用 Sharepoint，但我想要一些我可以向内部用户和客户公开的东西，所以我认为 Sharepoint 不会起作用（对吧？）。

人们采取的另一种重要方法似乎是编写自定义 ASP.NET 应用程序，我不想这样做。

基本上只想要 Cognos 或 Business Objects 之类的东西，但作为 SSRS 和 SSAS 的前端，而不是一些专有数据结构。

为什么这很难找到 - 似乎这是一个普遍的需求。为什么微软不做这个？

到目前为止，我发现的只有一个是报告门户 (www.reportportal.com)，它看起来不错，但并不出色。就大公司而言，看起来 MicroStrategy (microstrategy.com) 可以与原生 SSAS 多维数据集一起使用，但对于一般报告，它有自己的结构。图形和界面看起来不错，所以如果任何有集成 Microstrategy 和 SQL Server 经验的人都可以听到。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T03:29:50.787

SharePoint 的企业版可以满足您的需求以及更多功能。它还能够处理外部用户，但这需要对架构等进行认真考虑。但是，企业 SharePoint 并不便宜，SharePoint 场安装也不是一个小练习。

使用 SharePoint 执行此操作后，它非常强大，但无法通过 SSL 很好地工作，因此请在 F5 或其他硬件上终止您的 SSL。

有关规划 SharePoint 实施的信息，请查看 [规划 SharePoint server 2010 的体系](http://technet.microsoft.com/en-us/library/cc261834)结构以及 SharePoint 2010 产品[的 Extranet 拓扑](http://technet.microsoft.com/en-us/library/cc263513.aspx)

浏览此处相当大量的文档，您应该可以大致了解使 SharePoint 外联网正常工作所涉及的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-20T14:21:09.843

会对一个好的“非共享点，非 BI”答案非常感兴趣。我看到到处有人问这个问题，人们特别说“我不想使用 sharepoint，有什么替代方案”。接下来的 200 个答案总是“使用共享点”

如果您是一家只做标准 Web 的 SQL/Asp 商店，sharepoint 和 BI 都是为了获得 Internet/Intranet 报告交付而产生的巨大膨胀。

所以答案是“不，除了你提到的那些之外，没有“盒子里的前端”。去kickstarter一个，因为这是我见过的最频繁搜索的痛点之一，而且数量最少可行的答案/解决方案。

# linq - 使用 Linq to SQL 的动态 where 子句

> ID：11680460
> 
> 赞同：1
> 
> 时间：2012-07-27T01:56:08.953
> 
> 标签：linq, linq-to-sql, linq-to-entities

我正在尝试对未选择的元素进行过滤“位置”并且不在 ViewModel 中

**这就是我拥有的：**

```
var UserQuery = (from u in db.USER
                join c in db.CONSULT on u.IdUser equals c.IdUser
                select new UserSexViewModel {  IdUser= c.IdUser, UserSex=u.Sex}).Distinct(); 
```

我想稍后`UserQuery`通过属于对象 CONSULT 或对象 USER 的任何属性过滤变量

例如，稍后按以下方式过滤：

```
CONSULT.TypeConsul, 
CONSULT.DateCreation,
USER.Name,
USER.Age, and many more... 
```

**像这样的东西：**

```
UserQuery.Where(q=>q.CONSULT.TypeConsul==2) or UserQuery.Where(q=>q.USER.Age>16) 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:16:50.083

LINQ 动态查询库将为您提供帮助。

请参考 [http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:51:07.710

```
var UserQuery = (from u in db.USER
                join c in db.CONSULT on u.IdUser equals c.IdUser
                select new UserSexViewModel {  IdUser= c.IdUser, UserSex=u.Sex}).Distinct(); 
```

//伪代码

```
var specification = PredicateBuilder.True<Consult>();//default: build from this
specification = PredicateBuilder.And(specification, x => x.TypeConsult == 2); 
var additionalCriterias = ...;
specification = additionalCriterias == null || additionalCriterias.Length == 0 
                  ? specification 
                  : GetComposedSpecification(additionalCriterias);

var users = UserQuery.Where(specification).ToList() 
```

predicateBuilder @ [http://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)还有更多示例

# objective-c - OSX 上的单调时钟

> ID：11680461
> 
> 赞同：22
> 
> 时间：2012-07-27T01:56:22.543
> 
> 标签：objective-c, macos, posix, clock, timing

CLOCK_MONOTONIC 似乎不可用，因此 clock_gettime 已过期。

我在某些地方读到 mach_absolute_time() 可能是正确的方法，但在读到它是一个“cpu 依赖值”之后，它立刻让我想知道它是否在下面使用 rtdsc。因此，即使它是单调的，该值也可能随时间漂移。此外，线程亲和性问题可能会导致调用函数产生有意义的不同结果（使其在所有内核中都不是单调的）。

当然，这只是猜测。有谁知道 mach_absolute_time 实际上是如何工作的？我实际上正在寻找替代 clock_gettime(CLOCK_MONOTONIC... 或类似 OSX 的东西。无论时钟源是什么，我都希望至少毫秒精度和毫秒精度。

我只是想了解哪些时钟可用，哪些时钟是单调的，如果某些时钟漂移，存在线程关联问题，并非所有 Mac 硬件都支持，或者需要“超高”数量的 cpu 周期来执行。

以下是我能找到的关于这个主题的链接（有些已经是死链接，在archive.org上找不到）：

[https://developer.apple.com/library/mac/#qa/qa1398/_index.html](https://developer.apple.com/library/mac/#qa/qa1398/_index.html) http://www.wand.net.nz/~smr26/wordpress/2009/01/19/monotonic-time-in -mac-os-x/ [http://www.meandmark.com/timing.pdf](http://www.meandmark.com/timing.pdf)

谢谢！布雷特

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-27T03:31:29.960

Mach 内核提供对系统时钟的访问，其中至少有一个 ( `SYSTEM_CLOCK`) 被[文档宣传](https://opensource.apple.com/source/xnu/xnu-2422.1.72/osfmk/mach/clock_types.h)为单调递增。

```
#include <mach/clock.h>
#include <mach/mach.h>

clock_serv_t cclock;
mach_timespec_t mts;

host_get_clock_service(mach_host_self(), SYSTEM_CLOCK, &cclock);
clock_get_time(cclock, &mts);
mach_port_deallocate(mach_task_self(), cclock); 
```

`mach_timespec_t`具有纳秒精度。不过，我不确定准确性。

Mac OS X 支持三个时钟：

*   `SYSTEM_CLOCK`返回自启动时间以来的时间；
*   `CALENDAR_CLOCK`返回自 1970-01-01 以来的 UTC 时间；
*   `REALTIME_CLOCK`已弃用，与`SYSTEM_CLOCK`当前的实现相同。

的[文档`clock_get_time`](https://opensource.apple.com/source/xnu/xnu-2422.1.72/osfmk/man/clock_get_time.html)说时钟是单调递增的，除非有人调用`clock_set_time`. `clock_set_time`不[鼓励](https://opensource.apple.com/source/xnu/xnu-2422.1.72/osfmk/man/clock_set_time.html)调用，因为它可能会破坏时钟的单调性，事实上，[当前的实现`KERN_FAILURE`](https://opensource.apple.com/source/xnu/xnu-2422.1.72/osfmk/kern/clock_oldops.c)不做任何事情就返回了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-26T17:54:16.363

在为此查找了几个不同的答案后，我最终定义了一个在马赫上模拟 clock_gettime 的标头：

```
#include <sys/types.h>
#include <sys/_types/_timespec.h>
#include <mach/mach.h>
#include <mach/clock.h>

#ifndef mach_time_h
#define mach_time_h

/* The opengroup spec isn't clear on the mapping from REALTIME to CALENDAR
 being appropriate or not.
 http://pubs.opengroup.org/onlinepubs/009695299/basedefs/time.h.html */

// XXX only supports a single timer
#define TIMER_ABSTIME -1
#define CLOCK_REALTIME CALENDAR_CLOCK
#define CLOCK_MONOTONIC SYSTEM_CLOCK

typedef int clockid_t;

/* the mach kernel uses struct mach_timespec, so struct timespec
    is loaded from <sys/_types/_timespec.h> for compatability */
// struct timespec { time_t tv_sec; long tv_nsec; };

int clock_gettime(clockid_t clk_id, struct timespec *tp);

#endif 
```

在 mach_gettime.c

```
#include "mach_gettime.h"
#include <mach/mach_time.h>

#define MT_NANO (+1.0E-9)
#define MT_GIGA UINT64_C(1000000000)

// TODO create a list of timers,
static double mt_timebase = 0.0;
static uint64_t mt_timestart = 0;

// TODO be more careful in a multithreaded environement
int clock_gettime(clockid_t clk_id, struct timespec *tp)
{
    kern_return_t retval = KERN_SUCCESS;
    if( clk_id == TIMER_ABSTIME)
    {
        if (!mt_timestart) { // only one timer, initilized on the first call to the TIMER
            mach_timebase_info_data_t tb = { 0 };
            mach_timebase_info(&tb);
            mt_timebase = tb.numer;
            mt_timebase /= tb.denom;
            mt_timestart = mach_absolute_time();
        }

        double diff = (mach_absolute_time() - mt_timestart) * mt_timebase;
        tp->tv_sec = diff * MT_NANO;
        tp->tv_nsec = diff - (tp->tv_sec * MT_GIGA);
    }
    else // other clk_ids are mapped to the coresponding mach clock_service
    {
        clock_serv_t cclock;
        mach_timespec_t mts;

        host_get_clock_service(mach_host_self(), clk_id, &cclock);
        retval = clock_get_time(cclock, &mts);
        mach_port_deallocate(mach_task_self(), cclock);

        tp->tv_sec = mts.tv_sec;
        tp->tv_nsec = mts.tv_nsec;
    }

    return retval;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-26T09:58:41.930

只需使用**Mach Time**。
它是公共 API，可以在 macOS、iOS 和 tvOS 上运行，并且可以在沙箱中运行。

Mach Time 返回一个我通常称之为“*时钟滴答*”的抽象时间单位。时钟滴答的长度是系统特定的，取决于 CPU。在当前的英特尔系统上，时钟滴答实际上恰好是一纳秒，但您不能依赖它（对于 ARM 可能不同，对于 PowerPC CPU 肯定不同）。系统还可以告诉您将时钟滴答转换为纳秒和纳秒转换为时钟滴答的转换因子（这个因子是静态的，它在运行时永远不会改变）。当您的系统启动时，时钟从 开始，`0`然后随着之后的每个时钟滴答声而单调增加，因此您也可以使用 Mach Time 来获取系统的正常运行时间（当然，正常运行时间是单调的！）。

这是一些代码：

```
#include <stdio.h>
#include <inttypes.h>
#include <mach/mach_time.h>

int main ( ) {
    uint64_t clockTicksSinceSystemBoot = mach_absolute_time();
    printf("Clock ticks since system boot: %"PRIu64"\n",
        clockTicksSinceSystemBoot
    );

    static mach_timebase_info_data_t timebase;
    mach_timebase_info(&timebase);
    // Cast to double is required to make this a floating point devision,
    // otherwise it would be an interger division and only the result would
    // be converted to floating point!
    double clockTicksToNanosecons = (double)timebase.numer / timebase.denom;

    uint64_t systemUptimeNanoseconds = (uint64_t)(
        clockTicksToNanosecons * clockTicksSinceSystemBoot
    );
    uint64_t systemUptimeSeconds = systemUptimeNanoseconds / (1000 * 1000 * 1000);
    printf("System uptime: %"PRIu64" seconds\n", systemUptimeSeconds);
} 
```

您还可以让线程休眠，直到达到特定的马赫时间。这是一些代码：

```
// Sleep for 750 ns
uint64_t machTimeNow = mach_absolute_time();
uint64_t clockTicksToSleep = (uint64_t)(750 / clockTicksToNanosecons);
uint64_t machTimeIn750ns = machTimeNow + clockTicksToSleep;
mach_wait_until(machTimeIn750ns); 
```

由于马赫时间与任何挂钟时间无关，您可以随意调整系统日期和时间设置，这不会对马赫时间产生任何影响。

但是，有一个特殊的考虑因素可能会使 Mach Time 不适用于某些用例：**当您的系统处于睡眠状态时，CPU 时钟没有运行！**因此，如果您让线程等待 5 分钟，并且在 1 分钟后系统进入睡眠状态并保持睡眠状态 30 分钟，那么在系统唤醒后线程仍在等待另外 4 分钟，因为 30 分钟的睡眠时间不算在内！在此期间 CPU 时钟也处于静止状态。然而在其他情况下，这正是你想要发生的。

马赫时间也是一种非常精确的测量时间的方法。这是一些显示该任务的代码：

```
// Measure time
uint64_t machTimeBegin = mach_absolute_time();
sleep(1);
uint64_t machTimeEnd = mach_absolute_time();
uint64_t machTimePassed = machTimeEnd - machTimeBegin;
uint64_t timePassedNS = (uint64_t)(
    machTimePassed * clockTicksToNanosecons
);
printf("Thread slept for: %"PRIu64" ns\n", timePassedNS); 
```

您会看到线程没有休眠一秒钟，这是因为将线程置于休眠状态需要一些时间才能再次唤醒它，即使在唤醒时，如果所有内核都不会立即获得 CPU 时间那时已经在忙着运行一个线程。

## 更新 (2018-09-26)

由于 macOS 10.12 (Sierra) 也存在`mach_continuous_time`. `mach_continuous_time`和之间的唯一区别`mach_absolute_time`是，当系统处于睡眠状态时，持续时间也会提前。因此，如果到目前为止这是一个问题并且是不使用 Mach Time 的原因，10.12 及更高版本提供了解决此问题的方法。用法与上面描述的完全相同。

同样从 macOS 10.9 (Mavericks) 开始，有一个`mach_approximate_time`，在 10.12 中还有一个`mach_continuous_approximate_time`. 这两个是相同的`mach_absolute_time`，`mach_continuous_time`唯一的区别是它们更快但不太准确。标准函数需要调用内核，因为内核负责马赫时间。这样的调用有点昂贵，尤其是在已经有[Meltdown](https://en.wikipedia.org/wiki/Meltdown_(security_vulnerability))修复的系统上。近似版本不必总是调用内核。他们在用户空间中使用一个只与内核时钟不时同步的时钟，以防止它运行得太远不同步，但总是可能出现小的偏差，因此它只是“近似的”马赫时间。

# google-maps - 在 Web 浏览器中捏合缩放作为滚轮

> ID：11680462
> 
> 赞同：3
> 
> 时间：2012-07-27T01:56:25.303
> 
> 标签：google-maps, browser, multi-touch

我有一台 Windows 7 平板电脑（ASUS EP121），我正在使用网络浏览器来显示我创建的基于 Google 地图的网络应用程序。基本上，我想要缩放手势来缩放谷歌地图（类似于使用鼠标时使用滚轮缩放谷歌地图），而不是缩放整个网页。

在 Opera、Firefox 和 Chrome 中，捏合手势只是放大整个页面。这种行为对于大多数用例来说非常有意义，但我想知道在这些浏览器（例如，Opera、FF、Chrome）中是否有任何设置可以导致捏合手势表现得像鼠标滚轮而不是放大整个页面？

有趣的是，在[Arora](http://code.google.com/p/arora/)中，捏合手势可用于放大/缩小 Google 地图；但是，其他问题正在阻止我有效地使用 Arora，我认为这些问题比我在这个问题中提出的问题更难解决。

另一种选择是禁用捏合手势（我知道这在 Firefox 中是可能的，我确信其他浏览器有一些方法可以做到这一点），然后尝试让应用程序处理它。走这条路有什么想法吗？像 jQuery mobile 这样的东西能做到这一点吗？

作为最后的手段，我可​​以使用 Qt 的 webkit 并实现我自己的事件处理（基本上是创建一个精简的 Arora），但我真的希望有一种更简单的方法来利用当前可用的浏览器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:00:51.370

如果有人遇到与我在这里遇到的相同问题，我已经使用 Qt 创建了一个*非常*简单的基于 WebKit 的 Web 浏览器，它实现了捏合手势并使用它来触发滚轮事件。

它工作得很好（特别是对于谷歌地图），源代码可以在 github 上[找到](https://github.com/hootener/SimpleBrowser)。我已经在 Windows 7 和 Ubuntu Linux 12.04 上测试了代码；它可以正常工作。

# ios - Xcode 布局在模拟器或真实设备中显示不正确

> ID：11680464
> 
> 赞同：9
> 
> 时间：2012-07-27T01:56:56.043
> 
> 标签：ios, xcode, ios5, layout, storyboard

我在 Xcode 情节提要中为 Master-Detail splitview 应用程序提供了一个布局，但是当我在模拟器或实际设备上运行它时，它看起来有点混乱，我不知道为什么。

Xcode 中的图像是这样的；

![Xcode 看起来不错](../Images/896fa0d26bce90c4ef004402681cbc83.png)

Simulator 和 Device 中的布局如下所示

![乱七八糟的图片](../Images/4c9626da30d2a02aa8c76797a85a7d75.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T03:46:38.787

这几乎肯定是您的子视图（又名“Springs and Struts”）的自动调整大小设置的问题。

您正在构建一个基于 UISplitViewController 的应用程序。请注意，当您的应用在纵向和横向模式下运行时，您的 Detail View Controller 框架的尺寸是不同的。在上面的故事板屏幕截图中，您会看到横向大小的框架。模拟器的屏幕截图显示了纵向大小的框架。您需要设置子视图的支柱和弹簧（UIPickerView、拉丝金属按钮、下面的白框等），以便这些元素调整（或不调整）大小并保持它们在父视图中的相对（或绝对）位置看法。

最简单的方法是使用右栏中的 Size Inspector 在情节提要中设置值。选择要更改设置的元素，然后查找：

![在此处输入图像描述](../Images/6c8591da50d90cc6e96ed53911a8809f.png)

通过单击内框内的红色箭头，您将打开/关闭“弹簧”，这将确定您的子视图是否在父视图展开时展开，或者在发生这种情况时它是否保持其原始大小。通过单击外部的红色 I 条，您将打开/关闭“struts”，它决定了当父视图的大小发生变化时，您的子视图是否将与其父视图的边缘保持固定距离。设置这些的正确组合将使您的视图在纵向和横向方向上看起来都正确。

您还可以通过设置视图的`autoresizingMask`属性以编程方式在代码中更改这些设置。见参考：

[http://developer.apple.com/library/ios/DOCUMENTATION/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5](http://developer.apple.com/library/ios/DOCUMENTATION/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5)

# architecture - 逆向工程——选择架构

> ID：11680465
> 
> 赞同：1
> 
> 时间：2012-07-27T01:56:57.943
> 
> 标签：architecture, reverse-engineering

我正在阅读《*逆向：逆向工程的秘密》*一书，在第二章中，作者说：

> 如果您计划学习逆向和汇编语言并且没有考虑特定的平台，请使用 IA-32。

这本书写于 2005 年，所以我想知道这是否仍然相关？如果我没有逆向工程、汇编程序等方面的经验，我应该选择 IA-32 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:01:58.597

实际上，对于现实世界的逆向工程，人们仍然会在未来几年开始使用 x86/IA-32 组装。显然，我们最近看到了 x64/AMD64 的接管，但这些 CPU 能够完全原生地运行 x86 代码（尽管系统调用和 OS API 确实需要像 WoW64 这样的模拟器的帮助）。至关重要的是，x64 指令集的 x86 子集包括初学者无论如何都想首先了解的基本指令。

当然，在逆向工程中，有一个不同的、更引人注目的动机来关注 IA-32 代码，特别是原生 x86 程序的大量可用性。从纯粹的倒转的角度来看，如果您打算为 x64 CPU 开发程序，您实际上只需要了解有关 x64 CPU 的*任何信息。*

正如我已经暗示的那样，这些差异远不足以使 x86 知识变得毫无价值。架构方面有一些变化（例如，扩展寄存器之类`RAX`的以及您可以使用它们的东西的变化）和指令集方面的一些变化（例如，您的一些常见指令将需要 64 位寄存器操作数）但还有更多那是相同的而不是不同的。

还有其他平台，例如 ARM，您的问题也会一直在谈论，但这些在您感兴趣的设备中并不普遍。默认情况下学习 x86 汇编的建议是一个很好的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T03:53:19.753

我认识的大多数优秀的逆向工程师都是从 windows IA-32 程序集开始的，因为 windows 可执行文件（尤其是恶意软件）大多是封闭源代码。您会在具有 IA-32 架构的 Windows 中找到很多二进制文件来练习。之后，您可以切换到另一种架构，例如 AT&T。当您已经熟悉 IA-32 时，只需要稍微调整以适应其他架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T02:02:39.217

就应用程序而言，IA-32 仍然是 Windows 最常用的架构，但是一些应用程序使用 AMD64。我想这一切都取决于你试图逆向工程是什么。

# javascript - Javascript AJAX 在带有多个选项卡的 Firefox 和 Firebug 中停止

> ID：11680467
> 
> 赞同：0
> 
> 时间：2012-07-27T01:57:22.893
> 
> 标签：javascript, ajax, prototypejs, firebug

因此，当我单击发送 ajax 请求的 Web 应用程序中的某些内容时，我遇到了这个问题，然后我立即单击 Firefox 中的另一个选项卡（具有完全不同网页的选项卡），如果我回到原来的脚本停止工作并且 Firebug 不再显示请求。

这是与 Firebug 相关的问题，还是我还需要担心生产模式？

有没有人有类似的？

我听说 Firebug 曾经在其他扩展程序和网站上遇到问题

# php - 使用 php 传递和接收字符串变量

> ID：11680469
> 
> 赞同：0
> 
> 时间：2012-07-27T01:57:34.377
> 
> 标签：php, html

我通过 URL 中的链接将字符串值传递到下一页 ，`<a href="ApplicationRegister.php?plan=trial">` 就像 `$plan = $_GET["plan"];` 这样 `$_SESSION['plans'] = $plan;`但是在 if 语句之后，即使使用 Session 变量，我也没有得到这个计划的值。

我的完整代码是这样的

```
 $plan = $_GET["plan"];
    echo $plan;
    $_SESSION['plan'] = $plan;
$plans = $_SESSION['plan'];
    echo $_SESSION['plans'];

    include('connect.php');

        If (isset($_POST['submit']))
        {
            $CompanyName = $_POST['CompanyName'];

            $CompanyEmail = $_POST['CompanyEmail'];
            $CompanyContact = $_POST['CompanyContact'];
            $CompanyAddress = $_POST['CompanyAddress']; 
            $StoreName = $_POST['StoreName'];
            echo $plans;

      $myURL ="$_SERVER[HTTP_HOST]";
                $myURL =$StoreName.'.'.$myURL;

        if (stripos($myURL, 'www.') !== 0) {
           $myURL = 'www.' . $myURL;

        }
        if (stripos($myURL, 'http://') !== 0) {
           $myURL = 'http://' .$myURL;

        }

        if(stripos($myURL, '.com') !== 0) {
            $myURL = $myURL . '.com';

        }
        echo $plans;

            $RegistrationType = $_POST['RegistrationType'];

            $Status = "Active";
            $sql = "select * from plans where planname = '$plans'";
            echo $sql;
            mysql_query($sql) or die (mysql_error());
            $planID = $row['planid'];

            $query1 = "select count(CompanyEmail) from ApplicationRegister where CompanyEmail = '$CompanyEmail'" ;

            $result1 = mysql_query($query1) or die ("ERROR: " . mysql_error());

            $msg = "";
             while ($row = mysql_fetch_array($result1))
             {

                if($row['count(CompanyEmail)'] > 0)
                {
                    $msg = "<font color='red'> <b>This E-mail id is already registered </b></font> ";
                    break;
                }
            }
            if($msg == "")
            {

                $query2 = "select count(URL) from ApplicationRegister where URL = '$myURL' ";
                $result2 = mysql_query($query2) or die ("ERROR: " . mysql_error());
                $msg = "";
                while ($row = mysql_fetch_array($result2))
                {

                    if($row['count(URL)'] > 0)
                    {
                        $msg = "<font color='red'> <b>This Stroename is already registered </b></font> ";
                        break;
                    }
                }
                if($msg == "")
                {
                    $sql = "INSERT INTO ApplicationRegister(planid, CompanyName, CompanyEmail, CompanyContact, CompanyAddress, RegistrationType,                        ApplicationPlan, ApplicationStatus, URL, CreatedDate) VALUES ('$planID', '$CompanyName', '$CompanyEmail', '$CompanyContact',                    '$CompanyAddress', '$RegistrationType', '$plans', '$Status', '$myURL', NOW() )";

                    mysql_query($sql) or die(mysql_error());
                    $id = mysql_insert_id();
                    $_SESSION['application_id'] = $id;

                    if($plans == "trail")
                    {
                        header("Location: userRegister.php");
                        exit();
                    } 
                    else
                    {
                        header("Location : PaymentGateway.php");
                        exit();
                    }
                }
            }
        }

?> 
```

仅在开始时它才包含该值，如果我尝试在 theIf 中显示`(isset($_POST['submit']))`它显示计划的空白值。不知道要做什么。请建议

**编辑** 即使像这样使用，它也是一样的。我不知道可能是什么问题:(

```
 $plan = $_GET["plan"];
    echo $plan;
    $_SESSION['plans'] = $plans;
    echo $_SESSION['plans'];
  // $plan = +$plan; 
    include('connect.php');

        If (isset($_POST['submit']))
        {
            $CompanyName = $_POST['CompanyName'];

            $CompanyEmail = $_POST['CompanyEmail'];
            $CompanyContact = $_POST['CompanyContact'];
            $CompanyAddress = $_POST['CompanyAddress']; 
            $StoreName = $_POST['StoreName'];
            echo $_SESSION['plans']; 
```

**已编辑**

在 ApplicationRegister.php 中，我已经传递了从上一页获得的 hiddenvalue，如下所示

```
<input type="hidden" name="plan" value="<?php echo $plan ?>"/> 
```

然后 POST 方法我用过这个。现在我得到了它的价值。谢谢大家

**已编辑**

```
if($PlanName == "trail")
                    {

                        header("Location: userRegister.php");
                        exit();
                    } 
                    else
                    {
                        header("Location : PaymentGateway.php");
                        exit();
                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:59:19.573

这是因为您没有[`session_start()`](http://us3.php.net/manual/en/function.session-start.php)在页面顶部调用。您需要它让您的会话在请求中持续存在（这是会话的重点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:06:40.480

当有人单击链接时，它将正确设置变量。但是，它不会符合`$_POST['submit']`逻辑，因为它不是一个帖子，只是一个获取。然后，假设您稍后实际发布到该页面，尝试访问其中的任何内容`$_GET`将为空，然后将会话变量重置为空。

你的第一页应该有这样的代码

```
<form action="ApplicationRegister.php" method="post">
    <select name="plan">
        <option value="trial">Trial</option>
    </select>
<input type="submit"/>
</form> 
```

然后，您检查`$_POST['plan']`并`$_POST['submit']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T02:07:15.830

除了不调用之外[`session_start();`](http://php.net/manual/en/function.session-start.php)，这段代码也是错误的：

```
$plan = $_GET["plan"];
echo $plan;
$_SESSION['plan'] = $plan;
$plans = $_SESSION['plan'];
echo $_SESSION['plans']; 
```

它应该是：

```
$plan = $_GET["plan"];
echo $plan;
$_SESSION['plan'] = $plan;
$plans = $_SESSION['plans'];
echo $_SESSION['plans']; 
```

您正在*设置* `$_SESSION['plan']`，然后尝试*访问* `$_SESSION['plans']`.

另外，您是单击链接还是提交`form`？您说您有一个链接，但您的代码尝试访问从`form`.

如果您使用的是`form`，请不要使用链接。相反，使用一个[`select`元素](https://developer.mozilla.org/en/HTML/Element/select)来选择一个计划，然后更改`$plan = $_GET["plan"];`为`$plan = $_POST["plan"];`。

**编辑：**

对于重定向问题，请尝试以下代码：

```
echo "<pre>** Plan Name: **\n";
var_dump($PlanName);
echo "</pre>";
if($PlanName == "trail")
    {
        header("Location: userRegister.php");
        exit();
    } 
    else
    {
        header("Location: PaymentGateway.php");
        exit();
} 
```

看看它输出了什么。

# macos - MATLAB 无效的 MEX 文件

> ID：11680473
> 
> 赞同：0
> 
> 时间：2012-07-27T01:57:48.680
> 
> 标签：macos, matlab, shared-libraries, 32bit-64bit, mex

所以我正在运行我下载的软件，用于分析荧光蛋白在显微镜图像中的位置。该软件名为[plusTipTracker](http://lccb.hms.harvard.edu/software.html)，它在 MATLAB 上运行。

所以第一个功能（检测图像中的“点”）工作正常，但第二个功能（“跟踪点”）失败。特别是，这似乎是 MEX 文件的错误：

```
??? Invalid MEX-file
'/Users/ethanbuchman/Documents/MATLAB/plusTipTracker_1pt1pt3_2012-07-07/software/createDistanceMatrix.mexmaci64':
dlopen(/Users/ethanbuchman/Documents/MATLAB/plusTipTracker_1pt1pt3_2012-07-07/software/createDistanceMatrix.mexmaci64,
1): no suitable image found.  Did find:
    /Users/ethanbuchman/Documents/MATLAB/plusTipTracker_1pt1pt3_2012-07-07/software/createDistanceMatrix.mexmaci64:
        unknown required load command 0x80000022. 
```

我可以在我下载的软件文件夹中找到这个文件。实际上有多个版本，每个版本都有不同的扩展名（例如 .mexa64、.mexmaci、.mexmaci64 等）。还有一个 .dll 文件。虽然文件夹中还有其他 mex 文件，每个文件都有多个扩展名，但其他文件都没有关联的 dll 文件。不确定这是否相关。

但我不知道该怎么做。

我在 MacOSX 10.5.8 上使用 Matlab R2010b。

任何见解将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:03:12.293

从我在[这里](http://asqueella.blogspot.com/2010/12/dyld-unknown-required-load-command.html)阅读的内容来看，似乎 MEX 文件是为不同版本的 Mac OS 编译的。您可以在自己的系统上重新编译 MEX 文件和 DLL 吗？

# android - JAVA_HOME 不工作

> ID：11680475
> 
> 赞同：1
> 
> 时间：2012-07-27T01:58:05.873
> 
> 标签：android, java

所以我在我的新电脑（Win 7, 64bit）上安装了Android SDK并安装了JDK，但是当我去安装SDK时它说这个

![安卓 SDK](../Images/4ae50e25bbb4d4cb3f336caa0f850da8.png)

环境变量也设置好了，有什么想法吗？

![环境变量](../Images/06050dd0eb8d1c996b2730f66345c147.png)

是的，我试图回去，然后是下一个 D：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:02:23.510

我在某处读到它可能是一个错误......解决方法是按下***回***然后***下一步***，它应该找到 JDK。

编辑：不应该**是**这样的：`C:\Program Files\Java\jdk1.7.0_03\bin`不要包括然后应用并重新启动计算机。`\bin``C:\Program Files\Java\jdk1.7.0_03`

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T02:07:36.197

该值应该类似于

C:\Program Files\Java\jdk1.7.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T02:08:57.493

你的 JRE 是什么版本？它真的位于 C:\Program Files\Java，还是在它的子文件夹中（例如 C:\Program Files\Java\jdk1.7.0）？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T02:10:03.773

路径是这样的——

> C:\Program Files\Java\jdk1.7.0_03\bin

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T05:28:00.603

我遇到了类似的问题，在这里找到了答案： [Android SDK installation doesn't find JDK](https://stackoverflow.com/questions/4382178/android-sdk-installation-doesnt-find-jdk)

[感谢 simon](https://stackoverflow.com/users/534294/simon)的回答：使用 32 位 JDK 而不是 64 位版本。

# macos - 如何启用/禁用缩放按钮（绿色+按钮）？

> ID：11680480
> 
> 赞同：9
> 
> 时间：2012-07-27T01:58:45.547
> 
> 标签：macos, cocoa, button, zooming, nswindow

我是 Mac OSx / Cocoa 开发的新手。在创建我的第一个应用程序期间，我遇到了一些事情，其中​​一个是我在绿色 + 按钮上的问题，该按钮用于缩放目的。

我想知道是否可以动态设置应用程序窗口的缩放按钮的行为？我没有违反 Apple 指南中的任何规则吗？

我想根据特定用户指定按钮的行为。比如说，允许用户有一个缩放按钮，那么这个按钮应该是启用的；否则，请禁用该按钮。

在这种情况下，当应用程序启动时，我正在检查是否允许用户启用缩放按钮。从这里我想自定义与缩放按钮有关的窗口的行为 - 根据之前对用户模式的检查是否应该启用或禁用它。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T02:27:30.017

您可以使用 获取对该按钮的引用`standardWindowButton:NSWindowZoomButton`，然后使用 any 执行您可以执行的任何操作`NSButton`。

**更新**（迅速）：

```
var button = view.window?.standardWindowButton(NSWindowButton.ZoomButton)
button?.enabled = false 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-07T03:59:35.143

抓住按钮并启用设置并不理想。最好的方法（10.6+）是使用`setStyleMask:`. 以下是如何执行此操作：

```
window.styleMask = NSTitledWindowMask | NSClosableWindowMask 
```

您可以随意添加或删除样式。在不改变样式的情况下执行此操作的另一种方法是设置`minSize`和`maxSize`相同的大小。这也将禁用调整大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-13T21:26:54.200

在 Swift 3 中，这是删除该功能的最简单方法：

```
var style = window.styleMask
style.remove(.resizable)
window.styleMask = style 
```

我通常`viewDidAppear`在情节提要中为视图控制器执行此操作，这些视图控制器自动为它们创建了一个窗口控制器，而不是我可以弄乱的一个。

# c# - 显示许多数学计算的进度条

> ID：11680481
> 
> 赞同：0
> 
> 时间：2012-07-27T01:58:47.723
> 
> 标签：c#, vb.net

我想将两个巨大的 int 数组相乘并将结果存储在第三个数组中。如果我提前知道数组的长度，如何显示进度？
我不知道如何正确显示进度条，因此没有代码可以显示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:12:03.383

进度条非常易于使用。例如，查看下面包含进度条和按钮的 Windows 表单：

![带有进度条的 Windows 窗体](../Images/8a7f0c5fff37e898820d6a5ff3255fb8.png)

现在要增加进度条，我只需将以下行放在我的`Do Stuff`按钮下：

```
progressBar1.Value += 10; 
```

我可以像这样递减：

```
progressBar1.Value -= 10; 
```

默认情况下，进度条的值可以是 0 到 100 之间的任何值，但是您可以通过修改`Maximum`属性来更改它，正如`J Steen`所指出的那样。我在这里所做的只是在每次点击时将值增加 10。该值具有 getter 和 setter 属性，因此您可以检查当前值以查看进度条是否已完成。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:56:55.927

```
Public Class Form1
Dim x(50000), y(50000), z(50000) As Integer

Private Sub btn_Click() Handles btn.Click
    For i As Integer = 0 To 49999 Step 1
        z(i) = x(i) * y(i)
        bar.Value = i / 500
    Next
End Sub

Private Sub Form1_Paint() Handles Me.Paint
    Dim r As New Random
    For i As Integer = 0 To 49999 Step 1
        x(i) = r.Next(50)
        y(i) = r.Next(50)
    Next
End Sub

End Class 
```

# jquery - 需要从类别列表中构建多选选项

> ID：11680485
> 
> 赞同：1
> 
> 时间：2012-07-27T01:59:16.977
> 
> 标签：jquery, select, option

我需要从每个类别级别构建 3 个单独的选择框过滤器：

```
<div id="something">
    <ul>    
        <li><a href="http://">Male</a>
            <ul>    
                <li><a href="http://">BaseBall</a></li>    
                <li><a href="http://">Football</a>
                    <ul>    
                        <li class="LastChild"><a href="http://">Bill</a></li>
                        <li class="LastChild"><a href="http://">Mike</a></li>
                    </ul>
                </li>    
                <li class=""><a href="http://">Basketball</a></li>    
             </ul>
         </li>
    </ul>
    <ul>    
        <li><a href="http://">Female</a>
            <ul>    
                <li class="LastChild"><a href="http://">BaseBall</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

我建立了第一级：

```
 $("<select />",{"id": "gender"}).appendTo("#something");

  $("<option />", {
     "selected": "selected",
     "value"   : "",
     "text"    : "Gender"
  }).appendTo(".gender select");

  $("#something > ul > li > a").each(function() {
   var kd = $(this);
   $("<option />", {
       "value"   : kd.attr("href"),
       "text"    : kd.text()
   }).appendTo("#something select");
  }); 
```

这给了我：

```
<select id="gender">
    <option>Male</option>
    <option>Female</option>
</select> 
```

现在我需要根据所选的孩子构建我的第二个选择。

我迷路了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:32:09.467

一次全部完成。[**更新的演示**](http://jsfiddle.net/qjWH7/2/)

```
$(function() {
    renderNextLevel('#something');
});

function renderNextLevel(parent) {
    $(parent).children('ul').each(function() {
        var height = $(this).parentsUntil('#something').length;
        var current = $(parent).children('ul');
        var sel = $('.sel' + height);
        if (sel.length == 0) {
            sel = $('<select />');
            sel.attr('class', 'sel' + height);
            $('#something').append(sel);

            var nextLevel = function(text, idx) {
                var parents = $({});
                $('#something select').each(function() {
                    if($(this).index() > idx){
                        $(this).remove();
                    }
                });

                $('#something').find('li a').each(function() {
                    if ($(this).text() == text) {
                        parents = parents.add($(this).parent());
                    }
                });
                renderNextLevel(parents);
            };

            sel.change(function() {
                nextLevel(sel.find('option:selected').text(), sel.index());
            });
        }

        $(this).children('li').each(function() {
            var opt = $('<option />');
            var link = $(this).children('a');
            var optVal = link.attr("href");
            var optText = link.text();
            if (sel.find('option[name="' + optText + '"]').length == 0) {
                sel.append(opt);
                opt.attr('value', optVal);
                opt.attr('name', optText);
                opt.text(optText);
            }
        });
    });
}​ 
```

# c++ - C++ 中是否有类似于 C# @"Text" 或 Python """Text""" 的干净续行？

> ID：11680487
> 
> 赞同：1
> 
> 时间：2012-07-27T01:59:38.977
> 
> 标签：c++

例如，**为了复制/粘贴目的**，写起来很方便：

# C＃

```
@"
SELECT * FROM ......
WHERE X = (SELECT Y FROM .....)
    AND M IN ('1','2','3')
"; 
```

或者

# Python：

```
"""
SELECT * FROM ......
WHERE X = (SELECT Y FROM .....)
    AND M IN ('1','2','3')
""" 
```

比：

# C++

```
"SELECT * FROM ...... \
WHERE X = (SELECT Y FROM .....) \
    AND M IN ('1','2','3')" 
```

有什么方法可以避免 C++ 中的 \ 样式和 C# 或 python 样式的方法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:02:03.567

C++（以及 C）自动连接相邻的字符串文字。不需要`\`使用字符串文字。例如这个

```
const char *p = "Hello" "World"   
  "!"; 
```

相当于

```
const char *p = "HelloWorld!"; 
```

在你的情况下，你可以简单地做

```
"SELECT * FROM ...... "
"WHERE X = (SELECT Y FROM .....) "
"    AND M IN ('1','2','3')" 
```

结果将等同于您的原始版本`\`，即将生成一个连续的字符串文字。

但是，这不会在连接的段之间插入换行符或任何其他额外的空格。如果您需要类似的东西，您必须记住自己做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T02:30:30.147

我认为 C++11 允许在原始字符串文字中使用换行符，例如：

```
const char *query = R"(SELECT * FROM ...... 
                       WHERE X = (SELECT Y FROM .....) 
                       AND M IN ('1','2','3'))"; 
```

源代码中的每个换行符都应导致执行字符串文字中的换行符。原始字符串文字通常采用`R"( ... )"`. 对于 GCC，这至少需要 4.5 版，而对于 clang++，它需要 3.0 版。或者，您可以使用自定义分隔符来更轻松地消除字符串末尾的歧义：

```
const char *query = R"XXXX(SELECT * FROM ...... 
                       WHERE X = (SELECT Y FROM .....) 
                       AND M IN ('1','2','3'))XXXX"; 
```

# css - 如何正确定位单选按钮？

> ID：11680489
> 
> 赞同：0
> 
> 时间：2012-07-27T01:59:42.647
> 
> 标签：css, html

[http://jsfiddle.net/BD8j2/](http://jsfiddle.net/BD8j2/)

我试图在箭头图片的右侧放置一个单选按钮，但由于某种原因它总是在其他地方出现。我想要它在箭头和 Masculino 之间。

我也不希望这个按钮真正记录任何东西，它只是为了审美目的。但我希望当有人单击此框以填充单选按钮然后链接到另一个页面。

这可能吗？让整个盒子成为链接？我正在考虑将整个 div 包装在一个`<a href>`我认为可行的方法中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:19:21.153

像[http://jsfiddle.net/XEk5d/2/](http://jsfiddle.net/XEk5d/2/)这样的东西，点击进入另一个页面的部分需要 JavaScript。

CSS

```
#answers {
    width:220px;
    height:50px;
    background-color:#DDDDDD;
    border-top:1px solid black;
    border-bottom:1px solid black;
    margin-top:20px;
}

#arrowcenter {
    width:71px;
    height:31px;
    background-image:url('http://fortmovies.com/brazil/arrow.png');
    background-position:0 50%;
    background-repeat:no-repeat;
    height:100%;
    display:inline-block; 
    vertical-align:middle;
} 

#answerstext {
    background-position:0 50%;
    display:inline-block; 
    vertical-align:middle;
}
form{
    display:inline-block;
}
input{
    vertical-align:middle;
} 
```

HTML

```
<div id="answers">
    <div id="arrowcenter"></div>
    <form>
        <input type="radio" name="sex" value="male" />
        <div id="answerstext">Masculino</div>
    </form>
</div><!-- end grayAnswer -->? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T02:41:23.010

试试这个：http: [//jsfiddle.net/BD8j2/8/](http://jsfiddle.net/BD8j2/8/)。

（本文第一版中的 HTML 无效（`input`inside `a`），并且不兼容跨浏览器，因此我已将其替换为 JavaScript 示例。）

**HTML：**

```
<div class="answers">
    <form>
        <label class="links">
            <input type="radio" name="sex" value="male" />
            <a href="http://w3.org">Masculino</a>
        </label>
    </form>
</div>
<div class="answers">
    <form>
        <label class="links">
            <input type="radio" name="sex" value="female" />
            <a href="http://w3.org">Femenino</a>
        </label>
    </form>
</div> 
```

**JavaScript：**

```
function init() {
    var link_elems = getElementsByClass('links');
    for(var i = 0; i < link_elems.length; i++) {
        addEvent(link_elems[i], 'click', goToLink);
    }
}
function goToLink(e) {
    if(e.stopPropagation) {
        e.stopPropagation();
    } else if(typeof e.cancelBubble != 'undefined') {
        e.cancelBubble();
    }
    e.currentTarget.children[0].checked = true;
    window.location = e.currentTarget.children[1].href;
}
function addEvent(elem, event, handler) {
    if(elem.addEventListener) {
        elem.addEventListener(event, handler, false);
    } else if(elem.attachEvent) {
        elem.attachEvent('on' + event, handler);
    } else {
        elem['on' + event] = handler;
    }
}
function getElementsByClass(className) {
    if(document.getElementsByClassName) {
        return document.getElementsByClassName(className);
    } else if(document.all) {
        var everything = document.all;
        var all_length = everything.length;
        var matches = [];
        for (var i = 0; i < all_length; i++) {
            if(everything[i].className == className) {
                matches[matches.length] = everything[i];
            }
        }
        return matches;
    }
    return false;
}
addEvent(window, 'load', init); 
```

**CSS：**

```
.answers {
    width: 220px;
    height: 50px;
    margin-top: 20px;
    border-top: 1px solid black;
    border-bottom: 1px solid black;
    background-color: #ddd;
    background-image: url('http://fortmovies.com/brazil/arrow.png');
    background-repeat: no-repeat;
    background-position: 0 50%;
}
.answers label {
    float: left;
    margin-left: 75px;
    padding-top: 15px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: bold
}
.answers input {
    margin-right: 5px
} 
```

在以前的版本中，JavaScript 需要将链接名称和目标放在两个数组中，现在我已经自动完成了。

# c# - 防止 DynamicMethod VerificationException - 操作可能会破坏运行时

> ID：11680490
> 
> 赞同：2
> 
> 时间：2012-07-27T01:59:52.013
> 
> 标签：c#, cil, dynamicmethod

我正在使用 IL 生成创建一个简单的反序列化器方法，该方法从 Lucene 文档中取出字符串并设置引用类型对象 (POCO) 的属性或字段。

每当我尝试运行生成的方法时，都会收到 VerificationException 错误。关于此错误还有其他问题，其中一些与 DynamicMethods 有关，但据我所知，我遇到的问题是不同的。

[操作可能会破坏运行时和动态方法与值类型](https://stackoverflow.com/questions/1277779/operation-could-destablize-the-runtime-and-dynamicmethod-with-value-types)

[msil 操作可能会破坏运行时异常的稳定性](https://stackoverflow.com/questions/615530/msil-operation-could-destabilize-the-runtime-exception)

尽管该方法将来会变得更加复杂，但我现在只是在进行字符串分配。我尝试动态创建的方法将如下所示：

```
public static PocoObject ExampleMethod(Document document)
{
    var poco = new PocoObject();
    poco.ID = document.Get("ID");
    poco.DisplayText = document.Get("DisplayText");

    poco.PropId = document.Get("PropId");
    return poco;
} 
```

PocoObject 看起来像这样：

```
class PocoObject
{
    public string ID;
    public string DisplayText;

    public string PropId { get; set; }

} 
```

我试图完全复制从编译时代码生成的 IL（甚至是不必要的位），它看起来像这样：

```
.method public instance object  'Deserializebe6d500b-d35f-4f7a-a9b3-88f6bca5fb93'(class [Lucene.Net]Lucene.Net.Documents.Document A_1) cil managed
{
  // Code size       65 (0x41)
  .maxstack  4
  IL_0000:  nop
  IL_0001:  newobj     instance void [LukeMapperTest]LukeMapperTest.PocoObject::.ctor()
  IL_0006:  stloc.0
  IL_0007:  ldloc.0
  IL_0008:  ldarg.0
  IL_0009:  ldstr      "ID"
  IL_000e:  callvirt   instance string [Lucene.Net]Lucene.Net.Documents.Document::Get(string)
  IL_0013:  stfld      string [LukeMapperTest]LukeMapperTest.PocoObject::ID
  IL_0018:  ldloc.0
  IL_0019:  ldarg.0
  IL_001a:  ldstr      "DisplayText"
  IL_001f:  callvirt   instance string [Lucene.Net]Lucene.Net.Documents.Document::Get(string)
  IL_0024:  stfld      string [LukeMapperTest]LukeMapperTest.PocoObject::DisplayText
  IL_0029:  ldloc.0
  IL_002a:  ldarg.0
  IL_002b:  ldstr      "PropId"
  IL_0030:  callvirt   instance string [Lucene.Net]Lucene.Net.Documents.Document::Get(string)
  IL_0035:  callvirt   instance void [LukeMapperTest]LukeMapperTest.PocoObject::set_PropId(string)
  IL_003a:  nop
  IL_003b:  ldloc.0
  IL_003c:  stloc.1
  IL_003d:  br.s       IL_003f
  IL_003f:  ldloc.1
  IL_0040:  ret
} // end of method Test::'Deserializebe6d500b-d35f-4f7a-a9b3-88f6bca5fb93' 
```

我已经设法将 DynamicMethod 保存到磁盘上的程序集中，检查了它，这正是它带来的。逐行它与编译时方法IL相同。

然而，在执行动态方法时，会抛出上述错误。有谁知道我该如何解决这个问题？

注意：如果有人想仔细查看，我在 GitHub 上有源代码。IL 生成代码在 LukeMapper.cs:GetDumbDeserializer() 中（第 133 行）

[LukeMapper GitHub 存储库](https://github.com/lelandrichardson/LukeMapper)

感谢所有帮助！谢谢！

* * *

编辑：所以我简化了 IL 生成代码，它基本上如下：

```
private static Func<Document, object> GetDumbDeserializer(Type type)
{
    var dm = new DynamicMethod(string.Format("Deserialize{0}", Guid.NewGuid()), typeof(object), new[] { typeof(Document) }, true);

    var il = dm.GetILGenerator();

    var ctor = type.GetConstructor(BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic, null, Type.EmptyTypes, null);
    il.Emit(OpCodes.Nop);
    il.DeclareLocal(type);
    il.Emit(OpCodes.Newobj, ctor);
    il.Emit(OpCodes.Stloc_0);
    Label returnLabel = il.DefineLabel();

    //stack is [target]

    var getFieldValue = typeof(Document).GetMethod("Get", BindingFlags.Instance | BindingFlags.Public);

    foreach (var setter in settableProperties)
    {
        il.Emit(OpCodes.Ldloc_0);// [target]
        il.Emit(OpCodes.Ldarg_0);
        il.Emit(OpCodes.Ldstr, setter.Name);
        il.Emit(OpCodes.Callvirt, getFieldValue);
        il.Emit(OpCodes.Stfld, setter.Field);
    }

    il.Emit(OpCodes.Nop);
    il.Emit(OpCodes.Ldloc_0);
    il.Emit(OpCodes.Stloc_1); // stack is empty
    il.Emit(OpCodes.Br_S, returnLabel);
    il.MarkLabel(returnLabel);
    il.Emit(OpCodes.Ldloc_1); // stack is [rval]
    il.Emit(OpCodes.Ret);
    return (Func<Document, object>)dm.CreateDelegate(typeof(Func<Document, object>));
} 
```

我根据 kvbs 的评论添加了`il.DeclareLocal(type)`（其中类型是 PocoObject），但我不确定我是否将它放在正确的位置（或者它是否重要）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T06:52:10.227

最后是胡言乱语，`Stfld`用于调用属性；我不知道最终的东西是从哪里来的，但我*不*相信那是从哪里来的`ExampleMethod`——我认为那可能来自你以前的版本。特别是，您还没有定义第二个本地，所以`Ldloc_1`没有意义；但这里绝对不需要任何标签/分支。这是我所拥有的，有效的（注意我不知道你`settableProperties`是什么，所以我只是使用`FieldInfo`/ `PropertyInfo`：

```
 var dm = new DynamicMethod(string.Format("Deserialize{0}", Guid.NewGuid()), typeof(object), new[] { typeof(Document) }, true);

    var il = dm.GetILGenerator();

    var ctor = type.GetConstructor(BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic, null, Type.EmptyTypes, null);
    il.DeclareLocal(type);
    il.Emit(OpCodes.Newobj, ctor);
    il.Emit(OpCodes.Stloc_0);

    var getFieldValue = typeof(Document).GetMethod("Get", BindingFlags.Instance | BindingFlags.Public);

    var fields = type.GetFields(BindingFlags.Public | BindingFlags.Instance);
    foreach (var field in fields)
    {
        il.Emit(OpCodes.Ldloc_0);// [target]
        il.Emit(OpCodes.Ldarg_0);
        il.Emit(OpCodes.Ldstr, field.Name);
        il.Emit(OpCodes.Callvirt, getFieldValue);
        il.Emit(OpCodes.Stfld, field);
    }
    var props = type.GetProperties(BindingFlags.Public | BindingFlags.Instance);
    foreach (var prop in props)
    {
        var setter = prop.GetSetMethod();
        if (setter == null) continue;
        il.Emit(OpCodes.Ldloc_0);// [target]
        il.Emit(OpCodes.Ldarg_0);
        il.Emit(OpCodes.Ldstr, prop.Name);
        il.Emit(OpCodes.Callvirt, getFieldValue);
        il.EmitCall(OpCodes.Callvirt, setter, null);
    }

    il.Emit(OpCodes.Ldloc_0);
    il.Emit(OpCodes.Ret);
    return (Func<Document, object>)dm.CreateDelegate(typeof(Func<Document, object>)); 
```

出于比较目的，这是我`ExampleMethod`在反射器中查看时得到的结果（在发布版本等中）：

```
.method public hidebysig static class PocoObject ExampleMethod(class Document document) cil managed
{
    .maxstack 3
    .locals init (
        [0] class PocoObject poco)
    L_0000: newobj instance void PocoObject::.ctor()
    L_0005: stloc.0 
    L_0006: ldloc.0 
    L_0007: ldarg.0 
    L_0008: ldstr "ID"
    L_000d: callvirt instance string Document::Get(string)
    L_0012: stfld string PocoObject::ID
    L_0017: ldloc.0 
    L_0018: ldarg.0 
    L_0019: ldstr "DisplayText"
    L_001e: callvirt instance string Document::Get(string)
    L_0023: stfld string PocoObject::DisplayText
    L_0028: ldloc.0 
    L_0029: ldarg.0 
    L_002a: ldstr "PropId"
    L_002f: callvirt instance string Document::Get(string)
    L_0034: callvirt instance void PocoObject::set_PropId(string)
    L_0039: ldloc.0 
    L_003a: ret 
} 
```

注意事项：

*   没有标签/分支（我不知道那是从哪里来的，但这不是你发布的）
*   它定义了一个本地
*   不`nop`

# c++ - Xcode：使用 C++ 静态库

> ID：11680493
> 
> 赞同：0
> 
> 时间：2012-07-27T02:00:27.567
> 
> 标签：c++, objective-c, xcode4

我想使用在 Xcode 4 的 Eclipse 中构建的 C++ 静态库：

例如，我有一个非常简单的库：

你好.h

```
class Test{ public: static int getX();}; 
```

你好.cpp

```
#include "hello.h"
int Test::getX(){return 10;} 
```

因此，在 Eclipse 中构建后，我有一个库 .a。现在，我将 .a 文件和标头导入 Xcode 应用程序。问题是在 .mm 文件（我创建）中，我不能调用“int x = Test::getX();”，它显示 2 个错误：

架构 i386 的未定义符号：“Test::getX()”，引用自：LibFetching.o 中的 -[LibFetching onlyfortest]

ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

你知道我该如何解决吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T20:27:48.567

从问题看来，您正在尝试将 C++ 静态库链接到目标 C++ 项目

转到项目 -> 构建设置，搜索 C++ 语言方言和 C++ 标准库。为它们选择“编译器默认值”选项，它应该可以工作

还要检查是否必须将其他链接器标志设置为 -lstdc++

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:52:00.077

您需要将静态库拖到 Xcode 项目中。然后在左侧导航栏中选择要添加库的项目，选择项目目标（如果您有多个，则选择需要该库的目标）。

然后单击 Build Phases，并在 Link Binary with Libraries 部分（如果它不存在，则创建一个），添加您的库，也将其添加到您的目标依赖项部分。

您可能需要在构建设置的标头搜索路径中输入库标头的路径。

# scala - 我可以像使用 C++ 模板专业化一样在 Scala 中专门化函数类型参数吗？

> ID：11680495
> 
> 赞同：6
> 
> 时间：2012-07-27T02:00:38.807
> 
> 标签：scala, types, parameters

我想编写一个根据其类型参数表现不同的函数。我想要的一个简单示例如下所示：

```
def f[Int] = "I'm an int"
def f[Float] = "I'm a float"
def f[Burger] = "You want fries with that?" 
```

这在 Scala 中是否可行，还是我需要一些解决方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T02:21:23.977

不直接；在 Scala 中执行此操作的常用方法是使用类型类。

```
trait FAble[T] { def doF: String }
object FAble {
  implicit val fInt = new FAble[Int] { def doF = "I'm an int" }
  implicit val fFloat = new FAble[Float] { def doF = "I'm a float" }
  implicit val fBurger = new FAble[Burger] { def doF = "You want fries?" }
}

def f[T](implicit ev: FAble[T]) = ev.doF
// or
def f[T: FAble] = implicitly[FAble[T]].doF 
```

它有点冗长，但它也有一些优点 - 可以计算隐式实例（使用`implicit def`s 而不是`val`s），并且任何给定类型都可以有多个实例，这使您可以选择行为在代码的不同点范围内的不同实例。

您不能以 C++ 方式执行此操作的原因是 Scala 泛型不涉及为不同类型参数生成代码（此外`@specialized`，因为它也不执行您想要的操作）。所以说“嘿编译器，当你在那个位置看到一个 Int 时，不要从通用模板生成代码，而是使用这个特定的代码”是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T07:10:42.013

另一种可能的方法是您使用证据：

```
def f[T](t:T)(implicit ev: T<:<Float) {

// float version 

}

def f[T](t:T)(implicit ev: T<:<Int) {

// int version 

} 
```

但是我会推荐类型类作为一个更优雅的解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T04:24:44.200

您可能想查看宏：[http](http://scalamacros.org/) ://scalamacros.org/ 。宏是在编译期间运行的自定义函数，可以根据编译时计算动态生成代码。

# mysql - MySQL中的可变长度数组

> ID：11680497
> 
> 赞同：0
> 
> 时间：2012-07-27T02:00:49.620
> 
> 标签：mysql, arrays

我正在用 PHP 编写一个应用程序，它使用 MySQL 数据库来存储信息。它必须存储的信息之一是名称数组，但该数组没有固定长度。它的范围可以从一项到多项。有没有办法将此数组存储在 MySQL 中，并能够通过仅指定数组中的一项来检索它？

例如，我希望能够在表中存储这样的内容：

```
Foo        Bar
-------------------
[baz,car]  fiz
[abc,def]  ghi 
```

然后，我希望能够告诉 MySQL 只搜索上表`car`中`SELECT`的第一行。

有没有可行的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:10:06.113

实现它的方法是“规范化”模式。有几个相关的想法构成了模式规范化，但这里关键的一个是你的数据应该用两个表和它们之间的关系来表示。这种关系被称为“一对多”，因为对于一个“Bar”，有一个或多个“Foo”。

然后，一个必要的步骤是向您的架构添加唯一标识符列（最简单的方法是使用自动递增整数），然后使用`JOIN`关联数据的机制进行查询。

*这就是为什么我们称 MySQL（和许多其他）为**“关系”**数据库的原因。*

```
Bar
+----+----------+
| id |   name   | 
+----+----------+
| 01 |   fiz    |
+----+----------+
| 02 |   ghi    |
+----+----------+

Foo
+----+--------+----------+
| id | bar_id |   name   | 
+----+--------+----------+
| 01 |   01   |  baz     |
+----+--------+----------+
| 02 |   01   |  car     |
+----+--------+----------+
| 03 |   02   |  abc     |
+----+--------+----------+
| 04 |   03   |  def     |
+----+--------+----------+ 
```

下面是连接基于 Foo 关系中的“car”选择“fiz”记录的样子

```
SELECT 
  Bar.* 
FROM Bar 
  JOIN Foo ON Bar.id = Foo.bar_id 
WHERE Foo.name = "car" 
```

如果您想要每个具有匹配 Foo 的条的 Foo 关系的整个列表：

```
SELECT 
  Bar.*, 
  GROUP_CONCAT(Foo.name) 
FROM Bar 
  JOIN Foo ON Bar.id = Foo.bar_id 
WHERE Foo.name = "car" 
GROUP BY Bar.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:05:36.400

任何一个

```
SELECT Bar FROM tbl
WHERE FIND_IN_SET('car', Foo) 
```

# asp.net - 表单身份验证 Cookie 和 WCF

> ID：11680499
> 
> 赞同：0
> 
> 时间：2012-07-27T02:01:19.323
> 
> 标签：asp.net, ajax, wcf, forms-authentication, facade

我有一个 asp.net 4.0 应用程序（客户端），它对 http 外观进行 ajax/json 调用，然后将调用传递给我们的 wcf 服务层。

用户必须使用表单身份验证在客户端上进行身份验证。然后的想法是身份验证cookie将被传递给http门面并可以在http门面访问。[基于 Dino Esposito 的书设计 - Microsoft ASP.NET 和 AJAX：架构 Web 应用程序]

问题是，在外观上，HttpContext.Current.User.Identity.Name 是一个空字符串，而 IsAuthenticated 是假的。

我通过将以下内容添加到我的 web.config（http 外观级别）中的 system.ServiceModel 部分来启用兼容性：

```
<system.serviceModel>   
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />  
</system.serviceModel> 
```

我用以下内容装饰了我的服务：

```
 [AspNetCompatibilityRequirements(RequirementsMode =
 AspNetCompatibilityRequirementsMode.Required)] 
```

当我在 ajax/facade 应用程序中调试时，我可以看到 HttpContext.Current.Request.Cookies 中存在 cookie。似乎正在使用匿名而不是我的经过身份验证的用户。

两个应用程序都在同一个 IIS 服务器上运行。

对启用 AJAX 的 wcf 服务的调用是通过 serviceProxy.js 进行的。也许这个方法没有传递必要的cookie？

WCF 跟踪当前显示 '..ASPXANONYMOUS=.....; ASP.NET_SessionId=....; .ASPXAUTH=.....' 在消息日志中。

我觉得我错过了一些简单的东西，但离问题太近了。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:45:36.510

我不确定我是否完全理解您要完成的任务的上下文，但如果这是两个独立的应用程序，您将需要共享机器密钥才能解密/加密两者中的身份验证 cookie。

在您的 web.config 中，确保您具有以下设置：

```
<machineKey
  validationKey="[generated key]"
  validation="HMACSHA512"
  decryptionKey="[generated key]"
  decryption="AES"
  /> 
```

在此 codeproject 文章中查看如何生成这些密钥（以及有关它们的更多信息）：

[ASP.Net machineKey 生成器 - CodeProject](http://www.codeproject.com/Articles/16645/ASP-NET-machineKey-Generator)

让我知道这是否有帮助...

# perl - 如何升级从 CPAN 安装的 perl 模块？

> ID：11680500
> 
> 赞同：15
> 
> 时间：2012-07-27T02:01:21.910
> 
> 标签：perl, upgrade, cpan

在cpan shell中，只能升级/regexp/或*所有*模块，如果我想升级只有CPAN安装的模块，怎么办？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-27T07:25:10.313

我建议你使用 cpanm "family" 脚本来管理 perl 模块。

## 安装[cpanm](https://metacpan.org/module/cpanm)

*   跳过这个，如果你已经有了
*   `curl -L http://cpanmin.us | perl - --sudo App::cpanminus`
*   如果你在 freebsd 上，你可以使用 curl 命令 fetch（参见：man fetch）

## 升级`cpanm`

*   跳过这个，如果你现在安装它
*   `cpanm --self-upgrade --sudo`

## 安装[cpan-outdated](https://metacpan.org/module/cpan-outdated)

*   `cpanm App::cpanoutdated`
*   cpan-outdated 命令的作用与 CPAN (r) 相同，但 IMO 最好从 shell 中使用

例如，只有我的笔记本给出的结果如下：

```
marvin:~ jomo$ cpan-outdated
S/SM/SMUELLER/Attribute-Handlers-0.93.tar.gz
D/DR/DROLSKY/Class-Load-0.20.tar.gz
D/DR/DROLSKY/DateTime-TimeZone-1.47.tar.gz
... etc 
```

## 运行 cpan-outdated & upgrade 模块

*   `cpan-outdated -p | cpanm`

## 变化

如果您想查看更改的内容（更改日志），可以尝试安装[cpan-listchanges](https://metacpan.org/module/cpan-listchanges)

*   `cpanm App::cpanlistchanges`
*   并像这样使用它：`cpan-listchanges Plack` *- 也可以查看 Plack 在您的本地和 CPAN 上的最新版本之间发生了什么变化*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T02:07:53.053

```
# cpan
cpan> h

Display Information                                                (ver 1.9800)
 command  argument          description
 a,b,d,m  WORD or /REGEXP/  about authors, bundles, distributions, modules
 i        WORD or /REGEXP/  about any of the above
 ls       AUTHOR or GLOB    about files in the author's directory
    (with WORD being a module, bundle or author name or a distribution
    name of the form AUTHOR/DISTRIBUTION)

Download, Test, Make, Install...
 get      download                     clean    make clean
 make     make (implies get)           look     open subshell in dist directory
 test     make test (implies make)     readme   display these README files
 install  make install (implies test)  perldoc  display POD documentation

Upgrade
 r        WORDs or /REGEXP/ or NONE    report updates for some/matching/all modules
 upgrade  WORDs or /REGEXP/ or NONE    upgrade some/matching/all modules

Pragmas
 force  CMD    try hard to do command  fforce CMD    try harder
 notest CMD    skip testing

Other
 h,?           display this menu       ! perl-code   eval a perl command
 o conf [opt]  set and query options   q             quit the cpan shell
 reload cpan   load CPAN.pm again      reload index  load newer indices
 autobundle    Snapshot                recent        latest CPAN uploads 
```

仅运行以下命令将完成您的要求。

```
cpan> upgrade 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-27T06:14:45.053

```
$ cpan Module 
```

和

```
cpan> install Module 
```

如果有更新的版本可用，将升级，如果您已经拥有最新版本，则不执行任何操作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-27T04:10:04.317

您应该首先登录到 cpan。然后，在提示符下键入：

```
r  [enter] 
```

这将打印出已安装的可升级模块列表。完成该列表后，您可以使用以下内容：

```
cpan upgrade <MODULE NAME> 
```

只需替换为要升级的模块名称即可。

问候，

杰夫

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-29T13:16:08.703

重新安装 perl 包将自动升级使用
`cpanm --reinstall <Module_Name>`

# iphone - 在线检查 JSON 文件的更新并将其与本地存储的文件进行比较

> ID：11680508
> 
> 赞同：1
> 
> 时间：2012-07-27T02:02:28.973
> 
> 标签：iphone, objective-c, ios, xcode, json

我用这个在树林里：我有一个通用的、基于导航的应用程序，它显示当前存储在 plist 文件中的数据。在未来的版本中，我想将数据库迁移到我服务器上的 JSON 文件，应用程序可以将其下载到它的包中，然后解析它。谁能建议一种简单的轻量级方法来检查捆绑中当前存储的文件是否与服务器上托管的版本匹配？本质上是检查数据库的更新，而无需重新下载整个 JSON 文件。

下面是 JSON 文件开头的当前样子的片段。

`{ "version" : "0.2", "description" : "1\. Corrections to several entries.\n2\. Added 21 new departments from Alameda & Fresno Counties.", "counties" : {............... *Rest of the JSON file here* .....}`

我的想法是将“版本”（“0.2”）值存储到 NSUserDefaults 中，并在每次应用启动时使用该值在线检查可用的 JSON 文件。

我是在正确的轨道上还是有更好的方法来做到这一点？

谢谢

罗密欧

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:52:24.273

您可以将`If-Modified-Since`标头添加到`NSMutableURLRequest`. 如果服务器上的文档自该日期以来发生了更改，您将取回数据。如果它没有改变，你会得到一个 304 Not Modified 并且没有数据。

这比发出 HEAD 请求要好得多，因为在更新文件的情况下，您只发出一个请求而不是两个请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T02:23:34.990

执行 HEAD 请求（而不是 GET）并检查`LastModified`标头。如果自上次检查后文件已被修改，请下载该文件。将修改后的时间保存在某处以与下次比较。

您可以像这样在请求对象上设置 http 方法：

```
 [request setHTTPMethod:@"HEAD"]; 
```

# html - 如何在点击时更改链接的图像？

> ID：11680515
> 
> 赞同：-3
> 
> 时间：2012-07-27T02:04:18.287
> 
> 标签：html, css

我有以下代码，允许用户将鼠标悬停在图像上，它将显示一个新图像（嗯，精灵图像的一个新部分）。我希望它在点击时显示第三张图片。1\. 我这样做是最有效的方式吗？2\. 如何编码以显示点击图片？

HTML：

```
<a href="<?php echo base_url('home/linkedin_login')?>" ><img style = "border-radius: 5px;" class="signin-all" src="assets/images/header/blank.png"></a> 
```

CSS：

```
 [class^="signin-"] {
  display: inline-block;

  vertical-align: text-top;
  background-image: url('../images/signin_sprite.jpg');

  background-repeat: no-repeat;
  *margin-right: .3em;
}
[class^="signin-"]:last-child {
  *margin-left: 0;
}
.signin-all{
background-position: 0px 0px;
   width: 132px;
  height: 37px;
  position: absolute;
}
.signin-all:hover{
background-position: 0px -34px;
   width: 132px;
  height: 34px;
  position: absolute;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:08:49.093

你需要 JavaScript 来解决这个问题。

```
<a href="javascript:void(0)" onclick="changeImage()">
    <img style = "border-radius: 5px;" class="signin-all" src="assets/images/header/blank.png" id="image">
</a>

<script>
    function changeImage() {
        document.getElementById("image").src="newImageSource";
    }
</script> 
```

# ruby - 在 Ruby 中舍入到最接近的整数或最接近的 0.5

> ID：11680519
> 
> 赞同：11
> 
> 时间：2012-07-27T02:05:04.053
> 
> 标签：ruby, rounding

也许标题令人困惑，但我会尝试用例子来解释：

给定一个精度 = 2 的浮点数，我希望能够舍入到其最接近的整数或最接近的 0.5。例子：

```
Given: 4.12 --> 4
       4.24 --> 4
       4.25 --> 4.5
       4.33 --> 4.5
       4.53 --> 4.5 
       4.65 --> 4.5 
       4.75 --> 5
       4.84 --> 5 
```

在 Ruby 中执行此操作的好方法是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-27T02:39:04.613

乘以 2，四舍五入，除以 2。

```
[4.12, 4.24, 4.25, 4.33, 4.53, 4.65, 4.75, 4.84].map do |x|
  r = (x * 2).round / 2.0
  r.to_i == r ? r.to_i : r
end

=> [4, 4, 4.5, 4.5, 4.5, 4.5, 5, 5] 
```

# php - 在 Mac OS X 上临时禁用所有 SSL 证书

> ID：11680526
> 
> 赞同：0
> 
> 时间：2012-07-27T02:06:12.187
> 
> 标签：php, macos, ssl, ssl-certificate

我正在为 API 编写 PHP 客户端库，并希望将 SSL 证书作为库的一部分包含在内（因为许多人仍在过时的服务器上运行代码，这些服务器可能没有我们的 SSL 证书）。

为了测试这一点，我想暂时禁用使用 Mac OS X 附带的证书的检查，方法是暂时将包含所有系统证书的文件夹移动到不同的位置。

这个文件夹在哪里，这甚至可以工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:26:49.637

最简单的事情可能是从系统偏好设置中的钥匙串导出所有内容，并在完成后导入

# objective-c - Objective-c 在 ControllerView 初始化时更新 NSTextField

> ID：11680529
> 
> 赞同：0
> 
> 时间：2012-07-27T02:06:16.457
> 
> 标签：objective-c, nstextfield

```
@interface TestViewController : NSViewController
@property (nonatomic, retain) IBOutlet NSTextField *myLabel;

- (IBAction)sendMessage:(NSButton *)sender;

@end

@implementation TestViewController
@synthesize myLabel = _myLabel;

- (id)init{
    self = [super init];
    if(self){
        [self updateLabel];
    }
    return self;
}

- (IBAction)sendMessage:(NSButton *)sender {
    [self updateLabel];
    NSLog(@"Message sent");
}

- (void) updateLabel{
    NSLog(@"Update!! %@");
    [self.myLabel setStringValue:@"random text"];
}

@end 
```

我想在显示视图时更新一个 NSTextField，我把我`updateLabel`的 at放在我`init`看到的日志中，`Update!!`但`NSTextField`它没有用我的文本更新。但是当我按下调用相同的按钮时，它`updateLabel`是`NSTextField`更新的。有人可以帮我理解为什么它没有按预期工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:59:55.633

我按照@rdelmar 的建议使用`loadView`. 谢谢你。

如果有人感兴趣，这里是如何实现它。

```
- (void)loadView
{       
    [super loadView];
    [self updateLabel];    
} 
```

# java - 如何从 Jetty 处理程序转发到另一个 URL？

> ID：11680531
> 
> 赞同：2
> 
> 时间：2012-07-27T02:06:34.463
> 
> 标签：java, jetty, handlers

在我们的 servlet 过滤器链中的某处，有一个过滤器在发送 401 错误时将请求转发到登录页面，作为可用性调整。

我正在尝试将其转换为 Jetty 处理程序，因为有人希望所有 Web 应用程序都通过相同的逻辑进行身份验证，而不是每个 Web 应用程序都必须实现自己的身份验证。

（我们首先使用过滤器方法的主要原因是没有人能够让 Jetty 的容器级身份验证工作 - 我们有能力选择 Windows 身份验证或内置身份验证，并且希望能够在运行时在这些之间切换，并且永远无法弄清楚如何使用 Jetty 来实现。）

在 Jetty 处理程序中，有一些这样的逻辑：

```
private void handleErrorBetter(HttpServletRequest servletRequest,
                               HttpServletResponse servletResponse)
        throws ServletException, IOException {
    if (isPageRequest(servletRequest)) {
        ServletContext rootContext = servletRequest.getServletContext().getContext("/");
        RequestDispatcher dispatcher = rootContext.getRequestDispatcher("/sign_in");
        dispatcher.forward(servletRequest, servletResponse);
    } else {
        // ...
    }
} 
```

`servletRequest.getServletContext()`似乎正确地返回了`/`. 有趣的是，即使我请求不同的 webapp，它似乎也会这样做，但根据 Javadoc，我必须使用`getContext("/")`它来确保我获得了根上下文，所以我正在这样做。

获取调度程序也成功。

然后我打电话`forward()`，这总是向客户端返回 404 响应。

如果我`/sign_in`直接从 Web 浏览器访问，则会加载表单。

服务器上只有两个上下文：根上下文`/`和`/sample/`我用来测试第二个 webapp 的上下文。所以我知道这`/sign_in`将在根上下文中，但是为什么`forward()`在转发到它时会给出 404 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:40:16.367

结果是一个错误。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=386359](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386359)

# php - 在 PDO 中使用绑定

> ID：11680535
> 
> 赞同：2
> 
> 时间：2012-07-27T02:06:54.833
> 
> 标签：php, parameters, pdo

我对使用绑定感到困惑！下面这两个代码有什么区别吗？

```
$stmt->bindValue( ":password", $password, PDO::PARAM_INT );

$stmt->bindParam(':password',$password); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:09:51.450

根据[PHP.Net](http://php.net/manual/en/pdostatement.bindparam.php)，

> 与 PDOStatement::bindValue() 不同，该变量被绑定为引用，并且只会在调用 PDOStatement::execute() 时进行评估。

所以使用bindParam()，如果你在调用execute()之前改变了变量，它将使用改变的值。bindValue() 将立即评估它并使用该值，而不关心在调用 bindValue() 之后但在 execute() 之前的任何更改。

# html - IE 显示的 div 大小不合适

> ID：11680537
> 
> 赞同：0
> 
> 时间：2012-07-27T02:07:23.990
> 
> 标签：html, internet-explorer

为什么 IE 中的这个 div 显示为 30 像素（用 Photoshop 测量）在所有其他浏览器中它正确显示为 29 像素

```
<div style="width:29px;height:18px;background-color:Black;"></div>​ 
```

[http://jsfiddle.net/nRnwM/](http://jsfiddle.net/nRnwM/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:11:11.560

添加`display: block;`到您的样式，然后刷新...它可能会成功

# javascript - 获取指向给定对象的所有 Parse.Relations

> ID：11680540
> 
> 赞同：2
> 
> 时间：2012-07-27T02:08:02.483
> 
> 标签：javascript, backbone.js, parse-platform

我正在使用 a`Parse.Relation`在主题下对用户进行分组。如何检索`topic.relation`指向给定用户的所有主题？

问题是关于在单个调用/回调中执行此操作。

```
// first add() a User object to the Topic's Parse.Relation
this.friendRelation = this.topic.relation("friend");
this.friendRelation.add(user);
// save the Topic to save its newly added .relation to Parse/Mongo
this.topic.save();

// iterate by adding the same User to several Topics

// (...)

// then you want to retrieve all Parse.Relations of all Topics where that 
// specific user is pointed to

// the non-optimized way is to traverse every row in the Topics index 
// and query each topic for its relations to find matching pointers to our user, 
// which means that the number of calls is bound to the number of rows – fine for
// 10 topics in Mongo but passed 100 it won't be tolerable. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:17:53.197

为 Topic 类构造一个查询，并添加一个 equalTo 约束。

```
var query = new Parse.Query(Topic);
query.equalTo("friend", user);
query.find({success: function (returnedTopics) {
    ...
    },
    error: function (...) {
    }
}); 
```

这将返回在其朋友关系中包含用户的所有主题对象。

# html - 什么是文本和源代码的好 Lucene 分析器？

> ID：11680541
> 
> 赞同：1
> 
> 时间：2012-07-27T02:08:03.397
> 
> 标签：html, search, lucene

对于混合了文本和不同源代码的文档，什么是好的 Lucene 分析器？

例如，我希望将“C”和“C++”视为不同的词，并且希望`Charset.forName("utf-8")`将类名和方法名分开，并将参数视为一个或两个词。

我想看的一个很好的示例数据集是 StackOverflow 本身。我相信 StackOverflow 使用 Lucene.NET 进行搜索；它使用库存分析器，还是经过大量定制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:23:20.597

您可能最好使用 WhitespaceTokenizer 并对其进行自定义以去除标点符号。例如，我们去掉除“+”、“-”之外的所有标点符号，以便留下诸如 C++ 等单词，但留下开头和结尾的引号和括号等。实际上，尽管对于这样的事情，您可能必须使用不同的标记器两次添加文档以捕获文档的不同部分。即，一次使用StandardTokenizer，一次使用WhitespaceTokenizer，在这种情况下，StandardTokenizer 将拆分您的所有代码，例如在类名和方法名之间，因为Whitespace 将提取诸如C++ 之类的词。显然，它有点依赖于语言，例如 Scala 允许在方法名称中使用一些标点符号。

# java - Playframework：方法 ok(Content) 不适用于 List 类型的参数？

> ID：11680543
> 
> 赞同：0
> 
> 时间：2012-07-27T02:08:24.793
> 
> 标签：java, playframework, playframework-2.0

我正在阅读“Play for Java”一书并尝试示例代码。现在我遇到了一个问题：通过运行这个示例代码

```
import ...

public class Application extends Controller {

  public static Result index() {

    ...
    ...

        List<StockItem> items = StockItem.find()
                .findList();
        return ok(items);

  }

} 
```

ECLIPSE 返回错误消息“ **Results 类型中的方法 ok(Content) 不适用于参数 (List)** ”。

有人知道我该如何解决吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:43:37.907

这取决于您要返回哪种数据格式（JSON、XML 等）。示例显示 JSON 结果：

```
import ...

public class Application extends Controller {

  public static Result index() {
    List<StockItem> items = StockItem.find().findList();
    return ok(Json.toJson(items));
  }

} 
```

您可以从 Results 类的源代码中查看“ok”方法的所有变体：[https ://github.com/playframework/Play20/blob/master/framework/src/play/src/main/java/play/mvc/Results .java](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/java/play/mvc/Results.java)

或 javadoc：[http ://www.playframework.org/documentation/api/2.0.2/java/play/mvc/Results.html](http://www.playframework.org/documentation/api/2.0.2/java/play/mvc/Results.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T07:15:38.970

`ok()`接受`String`，`JSON`（如武装所写），`File`甚至`InputStream`但**不** `List`接受（[检查代码](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/java/play/mvc/Results.java)）

很可能你想返回渲染`view`：

```
import views.html.yourview;

public class Application extends Controller {

  public static Result index() {
    List<StockItem> items = StockItem.find().findList();
    return ok(yourview.render(items));
  }

} 
```

`/app/views/yourview.scala.html`

```
@(items: List[StockItem])

<ul>
  @for(item <- items){
    <li>@item.title</li>
  }
</ul> 
```

# windows - 通过 Windows 批处理 SSH 到远程服务器

> ID：11680544
> 
> 赞同：1
> 
> 时间：2012-07-27T02:08:27.633
> 
> 标签：windows, shell, batch-file

谁能建议我如何使用 Windows 批处理程序`ssh`到远程服务器然后`shell scripts`在那里执行？

任何简单的示例示例都对我有好处。

服务器名称：-`ares-ingest.vip.host.com`

用户名：- `uname`

密码：- `password`

任何建议将不胜感激，因为我是 Windows 批处理程序的新手

**更新：-**

我尝试使用`plink`执行我在本地计算机上的 shell 脚本，但我总是收到如下错误，我做错了什么吗？

```
C:\PLINK>plink uname@cli.host.com -m email.sh
Using keyboard-interactive authentication.
Password:
Using keyboard-interactive authentication.
Your Kerberos password will expire in 73 days.

sh: HIVE_OPTS= -hiveconf mapred.job.queue.name=hdmi-technology: is not an identifier 
```

以下是我的shell脚本中的内容-

```
#!/bin/bash
export HIVE_OPTS="$HIVE_OPTS -hiveconf mapred.job.queue.name=hdmi-technology"
hive -S -e 'SELECT count(*) from testingtable2' > attachment.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:15:39.073

尝试使用[plink](http://tartarus.org/~simon/putty-snapshots/htmldoc/Chapter7.html#plink)发送您的命令。

```
Usage: plink [options] [user@]host [command] 
```

# linux - 从 windows 迁移到 ubuntu 12 linux 进行开发

> ID：11680551
> 
> 赞同：1
> 
> 时间：2012-07-27T02:09:43.860
> 
> 标签：linux, ubuntu

我是Java开发人员，我完全使用Windows进行开发，现在我想转移到ubuntu 12进行开发，当我尝试安装新软件时我什至发现困难，在Ubuntu中安装新软件不是那么容易吗？

1）在windows中我们只需点击它来安装软件，所以我需要知道linux中的命令吗？

我对linux几乎是新手，

2）关于 linux（ubuntu）我需要了解哪些基本知识，或者我在哪里可以获得信息（用于开发）。

```
 I used  

         1,Eclips

         2,Jdk

         3,Sts (spring IDE)

         4, Android SDK, etc.... 
```

现在我需要这些用于 ubuntu 的开发工具，我可以将这些工具放在一个地方吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:34:21.067

1.  您可以从 apt-get 安装 Eclipse：**sudo apt-get install eclipse**。
2.  您可以使用以下命令安装 Java JDK 的开源变体：**sudo apt-get install openjdk-7-jdk**。
3.  从未使用过它，但我见过很多地方都安装了它在 Ubuntu 中。
4.  至于 Android，您可以像在 Windows 中一样安装它。
    1.  下载地址：[Android 开发者网站](http://developer.android.com/sdk/index.html)
    2.  获取 32 位库的依赖项（如果您正在运行 64 位）：**apt-get install ia32-libs**
    3.  将 tar 文件解压到任意位置，使用终端 'cd' 命令进入 'tools' 目录，然后在里面使用**./android**。

等等。至于所有关于 Ubuntu 的帮助，我敦促您访问[http://ubuntuforums.org/forumdisplay.php?f=310](http://ubuntuforums.org/forumdisplay.php?f=310)以获取 Ubuntu 编程，或者只是访问论坛以获取 Ubuntu 帮助。**您还可以通过apt-cache search -what you want-**搜索 apt-get 来获得一堆包，这对于查找包非常方便。

# c# - 将 AutoFac 与 ASP.Net WebForms 一起使用

> ID：11680558
> 
> 赞同：0
> 
> 时间：2012-07-27T02:10:13.773
> 
> 标签：c#, autofac

我阅读了官方文档，例如如下：

```
 public class Global : System.Web.HttpApplication
    {
        static IContainerProvider _containerProvider;

        public IContainerProvider ContainerProvider
        {
            get { return _containerProvider; }
        }

        protected void Application_Start(object sender, EventArgs e)
        {
            var builder = new ContainerBuilder();
            builder.RegisterType<Foo>().As<IFoo>().HttpRequestScoped();

            _containerProvider = new ContainerProvider(builder.Build());
        } 
```

这是我按照官方例子做的，但是问题是HttpRequestScoped这个方法不存在，这是为什么呢？

另外想问一下如何获取页面中的接口实例和Singleton Pattern。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:13:49.093

您需要添加`using AutoFac.Integration.Web;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:31:51.503

我认为不再使用 HttpRequestScoped。尝试改用 InstancePerHttpRequest()。

# macos - 查找 AppleScript 应用程序的 Apple 标识符

> ID：11680560
> 
> 赞同：2
> 
> 时间：2012-07-27T02:10:23.060
> 
> 标签：macos, applescript, identifier, dashboard-designer

我最近通过编写 AppleScript 并将其保存为应用程序创建了一个应用程序。然后我想使用 DashCode 创建一个仪表板小部件，它有一个按钮来启动应用程序 - 只是为了好玩。

但是，DashCode 示例代码指示我找到用于启动应用程序的“应用程序标识符”。但是，我不知道如何找到应用程序标识符。有谁知道找到它的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:25:29.293

应用程序的应用程序标识符“看起来像一个反向的互联网域名，例如'com.apple.textedit'。” [→ 参考](http://macscripter.net/viewtopic.php?pid=96491)

如果您使用 Xcode 创建 Applescript 应用程序，您可以将 Application Bundle Identifier 设置为应用程序设置向导的一部分或在 Application Target 属性中。如果您使用 Applescript 编辑器编写脚本并将其保存为应用程序，您的包将没有标识符，但您可以添加一个。

CTRL-单击您的应用程序包，然后单击显示包内容。单击 Contents 文件夹，然后打开 Info.plist 文件。此文件以 XML 格式指定应用程序的属性。如果您安装了 Xcode，它将在 Plist 编辑器中打开文件，使其编辑更友好。您要做的是添加 CFBundleIdentifier 键和您的应用程序标识符作为值。例如：

```
<key>CFBundleIdentifier</key>
<string>com.depot6.showworkingdrive</string> 
```

将其添加到元素下的 CFBundleName 键/值对附近。保存修改后的 Info.plist 将允许您在 Dashcode 小部件中定位该应用程序。

# android - Android 调整位图大小

> ID：11680561
> 
> 赞同：1
> 
> 时间：2012-07-27T02:10:31.383
> 
> 标签：android, bitmap, resize, imageview

我希望在`bitmap`选择并插入后将其重新调整为 600*600`imageview`

这是位图图像视图的代码

```
ImageView imageView = (ImageView) findViewById(R.id.ivPhoto);
chosenBitmap = BitmapFactory.decodeFile(picturePath);
imageView.setBackgroundColor(0);
imageView.setImageBitmap(chosenBitmap); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:42:11.090

尝试这个

```
Bitmap bMap =   Bitmap.createScaledBitmap(chosenBitmap, 600, 600, true);
imageView.setImageBitmap(bMap); 
```

更多信息请看[这里](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)

# java - IntelliJ IDEA - 显示异常跟踪

> ID：11680564
> 
> 赞同：1
> 
> 时间：2012-07-27T02:10:47.787
> 
> 标签：java, android, eclipse, intellij-idea, stack-trace

我在[这里](https://stackoverflow.com/questions/934794/is-there-break-on-exception-in-intellij)找到了一些帮助，但没有什么实质性的。

我已经成功地将我的 Android 项目从 Eclipse 移动到 IntelliJ IDEA，并且正在尝试适应 UI。我已经将它设置为构建和运行，但是当我抛出异常时，我不知道如何像 Eclipse 那样查看堆栈跟踪。

例如，在 Eclipse 中运行它：

```
((TextView)findViewById(R.id.abs__action_bar)).setText("Temp"); 
```

在 Eclipse 的“LogCat”视图中产生以下结果：

```
E/AndroidRuntime(341): FATAL EXCEPTION: main
E/AndroidRuntime(341): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.appname/com.appname.activity.HomeActivity}: java.lang.ClassCastException: com.actionbarsherlock.internal.widget.ActionBarView
E/AndroidRuntime(341):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
E/AndroidRuntime(341):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
E/AndroidRuntime(341):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime(341):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
E/AndroidRuntime(341):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(341):  at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(341):  at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime(341):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(341):  at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(341):  at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(341): Caused by: java.lang.ClassCastException: com.actionbarsherlock.internal.widget.ActionBarView
E/AndroidRuntime(341):  at com.appname.activity.HomeActivity.init(HomeActivity.java:150)
E/AndroidRuntime(341):  at com.appname.activity.HomeActivity.access$0(HomeActivity.java:127)
E/AndroidRuntime(341):  at com.appname.activity.HomeActivity$1.execute(HomeActivity.java:111)
E/AndroidRuntime(341):  at com.appname.helper.Security.checkCredentialsAndLogin(Security.java:139)
E/AndroidRuntime(341):  at com.appname.activity.HomeActivity.onCreate(HomeActivity.java:118)
E/AndroidRuntime(341):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime(341):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
E/AndroidRuntime(341):  ... 11 more 
```

而在 IntelliJ 中，当我“调试 ProjectName”时，在启用“中断所有异常”后，我得到的只是如下所示：

![在此处输入图像描述](../Images/41079c8c4a2d8ffcf11d90c742514fa2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T06:12:35.277

IntelliJ IDEA 有一个单独的[Android Logcat 选项卡](http://www.jetbrains.com/idea/webhelp/android-tool-window.html#d9052e1147)，异常记录在那里。如果您的目标是 4.1 平台，请确保使用 IDEA 11.1.3，它为 Logcat 中的最新更改提供了兼容性。

# php - 社交网站IM/聊天系统的构想

> ID：11680567
> 
> 赞同：1
> 
> 时间：2012-07-27T02:11:48.883
> 
> 标签：php, codeigniter, node.js, chat, socket.io

我正在创建一个社交网络网站，我需要一个 IM/聊天解决方案。

**对话只是一对一的，用户只能与他们的朋友聊天（即 Facebook 聊天 - 没有频道，没有房间......）。**

该网站是用带有 MySQL 数据库的 CodeIgniter(PHP) 制作的。可能会放在 VPS (Linux) 上，所以我可以控制环境。此外，预计将拥有超过 100 000 个用户。

所以，我需要一些关于如何进行聊天的想法。

到目前为止我的想法：

*   每 X 秒进行一次 Ajax 轮询（对于这种大小的网站来说不是很好的解决方案）
*   实现 Jabber/XMPP 系统（我没有这方面的信息，也不可能）
*   使用 3rd 方服务（如[Pusher.com](http://pusher.com)）
*   `Node.js`在and中创建聊天`socket.io`，并使其独立于网站的其他部分

经过一些研究并在此处阅读了一些答案

[https://stackoverflow.com/a/11362929/928540](https://stackoverflow.com/a/11362929/928540)

[https://stackoverflow.com/a/5654487/928540](https://stackoverflow.com/a/5654487/928540)

**我真的很喜欢 and 的想法`Node.js`，`socket.io`所以我想听听一些关于它的意见，也许还有一些指导、链接、帮助、教程......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:03:53.327

> 此外，预计将拥有超过 100 000 个用户

我认为问题还在于有多少活跃用户/连接。

> 每 X 秒进行一次 Ajax 轮询（对于这种规模的网站来说不是很好的解决方案）。

诚然。这是一个坏主意。

> 实现 Jabber/XMPP 系统（我没有这方面的信息，也不可能）

像[Ejabberd](http://www.ejabberd.im/)和[BOSH](http://anders.conbere.org/blog/2011/05/03/get_xmpp_-_bosh_working_with_ejabberd_firefox_and_strophe/)这样的东西很受欢迎。我玩了韵律，因为它很容易安装，[strophe.js](http://strophe.im/strophejs/)作为 BOSH 客户端（浏览器中的 javascript）。

> 使用第 3 方服务（如 Pusher.com）

最容易实现（没有缩放问题），但可能会变得昂贵。5000 个同时连接将花费您每月 199 美元（太贵），我认为您可能需要？然后你有大约 5000 个活动连接，所以它是有利可图的（？）。

> 在 Node.js 和 socket.io 中创建聊天，并使其独立于网站的其他部分

非常流行的解决方案，但现在我相信一些用户正在经历内存泄漏（但这可能已经解决了）。这可能只是[websockets 传输](https://github.com/LearnBoost/socket.io/issues/880)的问题。此外，它可能不是真正的泄漏，而是[由于惰性 GC 而导致的高内存使用](https://github.com/einaros/ws/issues/43#issuecomment-6326908)。我建议在完全承诺之前先进行分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:25:55.283

[Meteor](http://meteor.com)可能是您可以使用的解决方案。它旨在创建“实时”应用程序，我敢打赌，构建一对一的消息传递系统是轻而易举的事。

我知道它不是 PHP，但您提到使用 Node.js，我想如果您可以使用 Node.js，那么您可以使用它。

# .net - 如何生成 WSDL 文件？

> ID：11680570
> 
> 赞同：5
> 
> 时间：2012-07-27T02:12:06.470
> 
> 标签：.net, web-services, wsdl

我创建了一个网络服务 [.asmx] 文件。此 Web 服务实际上将获取一个字符串作为输入并将值插入数据库。

现在这个 web 服务将被另一个应用程序调用，所以他们要求我的 wsdl 文件访问使用这个 web 服务。

我知道，可以通过 cmd 创建 wsdl 以生成 .cs 或 .vb 或 .dll 文件 当我使用 ?wsdl 以及我的 URL 时还会生成一个 xml

但我很困惑提供哪一个??!!!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:18:52.900

您的 URL 上的 ?wsdl 是您应该提供的，但这意味着它作为 XML 文件存在于您的项目中的某个位置。我不是 .net 开发人员（java），但我知道如果 ?wsdl 在您的 url 末尾将它提供给您，那么它存在于某个地方，您可以使用浏览器另存为将文件另存为 wsdl你的消费者暂时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-16T09:22:07.630

*   转到 IIS
*   转到内容视图
*   浏览 .asmx 文件
*   在 URL 末尾的浏览器中添加“?wsdl”并按 Enter
*   这现在应该给你它的 wsdl。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T09:11:28.383

对于在 IIS 和 ASP.NET 中运行的 .asmx 服务，使用 ?wsdl 和服务 url 会自动生成 wsdl。如果消费者可以访问已部署的 Web 服务，那么 ?wsdl 是向他们提供服务 wsdl 的最佳方式。

否则，您可以使用 WSDL.exe 生成 wsdl，然后将其传递过去。

（关于您向 Thomas 提出的问题，为了使用 wsdl 的 Web 服务，您需要从 wsdl 生成客户端/存根，然后使用此客户端，您可以直接调用 Web 服务。

如果消费者是 .NET 应用程序，那么只需将服务 URL 作为 Web 引用添加到项目中，这应该会从您那里生成客户端/存根。对于 Java，可以使用 wsdltojava 等工具来生成客户端。）

# asp.net-mvc - 将领域模型映射到视图模型

> ID：11680571
> 
> 赞同：3
> 
> 时间：2012-07-27T02:12:18.840
> 
> 标签：asp.net-mvc, entity-framework, automapper

我从一个非常相似的点开始：[Domain Entities、DTO 和 View Models](https://stackoverflow.com/questions/5330172/domain-entities-dto-and-view-models)。

建议使用 DTO 在域模型和 MVC 的 ViewModel 之间进行映射似乎与预期一致。我寻求如何将域模型（基于实体框架的项目）连接到 WebAPI mvc 项目的详细信息。

我从一个简单的 POCO 项目开始（由 EF PowerTools 生成以对我现有的数据库进行逆向工程），我想连接到 MVC4 WebAPI 项目。

我希望随着我的解决方案的发展，我会在基线 POCO 项目中添加业务逻辑，也许这就是这个问题的症结所在。将 POCO 转换为可以映射到 MVC 项目的业务逻辑。

究竟如何将这些项目连接在一起，以便我可以开始在 MVC 项目中创建了解 EF 项目实体的控制器？自动映射器？我们能否指出使用 Automapper 的这一特定功能的帖子/文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:26:53.780

您不希望控制器知道 EF 实体 - 这就是重点。:)

您自己说应该使用 DTO 将您的域映射到您的视图模型，然后您问“如何将我的域模型与 mvc 控制器桥接？”。您已经回答了这个问题 - 使用 DTO！

DTO 充当复杂业务对象和用于显示特定视图的模型之间的传输层。这两者都有与“仅数据”不严格相关的特殊要求 - 因此使用 DTO 将为您提供更大的解耦和关注点分离。

如果您不将域与视图模型分离，您将被迫在视图模型代码中直接引用您的 EF 对象，这会“向上”公开不必要的数据和函数。

现在，如果您使用 WebAPI 作为传送数据的一种方式，那么我认为您通常可以不用发送 DTO，因为 WebAPI 数据通常不会实现视图模型逻辑。但当然是 YMMV，这取决于您计划如何使用控制器。

对于 AutoMapper，我会说最好从他们自己的文档开始（他们甚至在其中使用 DTO 示例）：http: [//github.com/AutoMapper/AutoMapper/wiki/Getting-started](http://github.com/AutoMapper/AutoMapper/wiki/Getting-started)

# php - 来自 mysql 的整数总是返回 0

> ID：11680576
> 
> 赞同：0
> 
> 时间：2012-07-27T02:13:15.143
> 
> 标签：php, mysql

我有一些从 mysql 数据库中提取数据的代码，一切都很好，日期，变量等。我遇到的问题是唯一的整数每次都返回 0。

```
while($row = mysqli_fetch_array($result)) {
$fufilled = "1";
$flag = $row['flag'];
$shopnumb = $row['Shopnumb'];
$shoptype = $row['Shop_type'];
... 
```

`$shoptype`并且`$shopnumb`都返回正确的内容但是 $flag 每次返回 0 即使数据库有 1,1,1,1,0 的 5 行

```
CREATE TABLE `Shop_data` (
 `Shopnumb` int(15) NOT NULL AUTO_INCREMENT COMMENT 'shop id number',
 `flag` tinyint(1) NOT NULL DEFAULT '1' COMMENT '1=unread 0=read',
 `CID` int(15) NOT NULL COMMENT 'Client this shop belongs to',
 `SID` varchar(50) DEFAULT NULL COMMENT 'identifys which survey to use',
 `comp_date` date DEFAULT NULL COMMENT 'Completion Date',
 `sched_date` date DEFAULT NULL COMMENT 'Scheduled shop date',
 `shop_comp` smallint(1) NOT NULL DEFAULT '0' COMMENT 'shopper submitted report',
 `edit_comp` smallint(1) NOT NULL DEFAULT '0' COMMENT 'Report has been edited',
 `return_shop` smallint(1) NOT NULL DEFAULT '0' COMMENT 'return report to shopper for editing',
 `report_comp` smallint(1) NOT NULL DEFAULT '0' COMMENT 'report ready for client',
 `Shop_type` varchar(50) DEFAULT NULL,
 `Shoploc` varchar(100) DEFAULT NULL,
 `shop_cost` decimal(10,2) DEFAULT NULL COMMENT 'Normal or adjusted cost of shop',
 `shop_reimb` decimal(10,2) DEFAULT NULL COMMENT 'Shopper reimburstment cost',
 `shop_pay` decimal(10,2) DEFAULT NULL COMMENT 'Total cost',
 `shopper_assign` varchar(200) DEFAULT NULL COMMENT 'Identifys which shopper assigned',
 PRIMARY KEY (`Shopnumb`),
 UNIQUE KEY `Shopnumb` (`Shopnumb`)
) ENGINE=MyISAM AUTO_INCREMENT=2252 DEFAULT CHARSET=latin1 
```

我的查询

```
SELECT * FROM Shop_data WHERE CID='".$_SESSION['CID']."' AND report_comp='1' AND DATEDIFF(CURDATE(), comp_date) <".$lengthoftime." ORDER BY comp_date DESC; 
```

就像我说的，除了旗帜，一切都很好

if 语句

```
 if ($flag = '0') {
            echo "<td align=\"center\">&nbsp;&nbsp;&nbsp;&nbsp;</td>";
        } else {
            echo "<td align=\"center\">&nbsp;&nbsp;<img align=\"middle\" src=\"/images/flag.png\">&nbsp;&nbsp;</td>";
        } 
```

固定 if ($flag == '0') {

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:39:34.400

该声明

```
if ($flag = '0') { 
```

是赋值，并且*始终*为 TRUE（它计算为赋值的值，它是一个字符串）。你需要：

```
if( ! intval($flag)) { 
```

# r - 使用 := 在 data.table 中按组分配多列

> ID：11680579
> 
> 赞同：160
> 
> 时间：2012-07-27T02:13:49.993
> 
> 标签：r, dataframe, data.table, variable-assignment, colon-equals

使用 分配给多个列的最佳方法是什么`data.table`？例如：

```
f <- function(x) {c("hi", "hello")}
x <- data.table(id = 1:10) 
```

我想做这样的事情（当然这个语法是不正确的）：

```
x[ , (col1, col2) := f(), by = "id"] 
```

为了扩展它，我可能有许多列的名称存储在一个变量（比如`col_names`）中，我想做：

```
x[ , col_names := another_f(), by = "id", with = FALSE] 
```

做这样的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-10-06T08:48:38.840

这现在适用于 R-Forge 的 v1.8.3。感谢您强调它！

```
x <- data.table(a = 1:3, b = 1:6) 
f <- function(x) {list("hi", "hello")} 
x[ , c("col1", "col2") := f(), by = a][]
#    a b col1  col2
# 1: 1 1   hi hello
# 2: 2 2   hi hello
# 3: 3 3   hi hello
# 4: 1 4   hi hello
# 5: 2 5   hi hello
# 6: 3 6   hi hello

x[ , c("mean", "sum") := list(mean(b), sum(b)), by = a][]
#    a b col1  col2 mean sum
# 1: 1 1   hi hello  2.5   5
# 2: 2 2   hi hello  3.5   7
# 3: 3 3   hi hello  4.5   9
# 4: 1 4   hi hello  2.5   5
# 5: 2 5   hi hello  3.5   7
# 6: 3 6   hi hello  4.5   9 

mynames = c("Name1", "Longer%")
x[ , (mynames) := list(mean(b) * 4, sum(b) * 3), by = a]
#     a b col1  col2 mean sum Name1 Longer%
# 1: 1 1   hi hello  2.5   5    10      15
# 2: 2 2   hi hello  3.5   7    14      21
# 3: 3 3   hi hello  4.5   9    18      27
# 4: 1 4   hi hello  2.5   5    10      15
# 5: 2 5   hi hello  3.5   7    14      21
# 6: 3 6   hi hello  4.5   9    18      27 
```

```
x[ , get("mynames") := list(mean(b) * 4, sum(b) * 3), by = a][]  # same
#    a b col1  col2 mean sum Name1 Longer%
# 1: 1 1   hi hello  2.5   5    10      15
# 2: 2 2   hi hello  3.5   7    14      21
# 3: 3 3   hi hello  4.5   9    18      27
# 4: 1 4   hi hello  2.5   5    10      15
# 5: 2 5   hi hello  3.5   7    14      21
# 6: 3 6   hi hello  4.5   9    18      27

x[ , eval(mynames) := list(mean(b) * 4, sum(b) * 3), by = a][]   # same
#    a b col1  col2 mean sum Name1 Longer%
# 1: 1 1   hi hello  2.5   5    10      15
# 2: 2 2   hi hello  3.5   7    14      21
# 3: 3 3   hi hello  4.5   9    18      27
# 4: 1 4   hi hello  2.5   5    10      15
# 5: 2 5   hi hello  3.5   7    14      21
# 6: 3 6   hi hello  4.5   9    18      27 
```

* * *

使用该参数的旧版本`with`（我们尽可能不鼓励使用此参数）：

```
x[ , mynames := list(mean(b) * 4, sum(b) * 3), by = a, with = FALSE][] # same
#    a b col1  col2 mean sum Name1 Longer%
# 1: 1 1   hi hello  2.5   5    10      15
# 2: 2 2   hi hello  3.5   7    14      21
# 3: 3 3   hi hello  4.5   9    18      27
# 4: 1 4   hi hello  2.5   5    10      15
# 5: 2 5   hi hello  3.5   7    14      21
# 6: 3 6   hi hello  4.5   9    18      27 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2018-04-01T11:37:02.163

以下速记符号可能很有用。所有功劳归于[Andrew Brooks，特别是这篇文章](http://brooksandrew.github.io/simpleblog/articles/advanced-data-table/#create-multiple-columns-with--in-one-statement)。

```
dt[,`:=`(avg=mean(mpg), med=median(mpg), min=min(mpg)), by=cyl] 
```

# c++ - 提升::可选 和来自 char[] 的隐式构造函数

> ID：11680582
> 
> 赞同：5
> 
> 时间：2012-07-27T02:15:17.100
> 
> 标签：c++, string, boost, char, optional

我已经习惯于通过让编译器找出所涉及的魔法来以下列方式初始化 std::strings

```
std::string my_string = "hello"; 
```

以下将不起作用，因为这两种类型之间没有显式转换：

```
boost::optional<std::string> my_optional_string = "hello"; 
```

然而，这确实有效：

```
boost::optional<std::string> my_optional_string = std::string("hello"); 
```

现在，是否没有办法将隐式调用的单参数构造函数菊花链化以允许第二种形式？我问的原因（虽然我不想用细节来打扰你）是有一大堆类需要填充可选成员。必须显式键入所有内容似乎是一种负担（我并不太担心自己，但我正在开发一个开源 API，并希望为我的用户提供尽可能多的舒适感）。任何建议表示赞赏。

* * *

**编辑**：对不起，我是新手，应该提供更多澄清的代码示例。我有一些类（不是我自己建模的，只是在 C++ 中实现它们），其中包含要填充的可选成员，如下所示：

```
Class Class1 {
public:
    Class1(const boost::optional<std::string>& arg_1, /*... ,*/ const boost::optional<std::string>& arg_n );
}; 
```

我希望我的 API 用户能够指定的是：

```
Class1 my_class("hello","there",NULL,"stackoverflow");
/* ( Note: NULL is actually risky here, as some classes might also have members of type boost::optional<int> ) */ 
```

并不是：

```
Class1 my_class(std::string("hello"),/*or*/boost::optional<std::string>("there"),boost::optional<std::string>(),std::string("stackoverflow")); 
```

再次感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T03:07:23.063

既然构造函数被标记了`explicit`，为什么不显式调用构造函数呢？`boost::optional<std::string> my_optional_string("hello");`

**编辑后**

Xeo 已经提供了解决方案，也许你也可以为你的构造函数使用默认参数：

```
Class1(boost::optional<std::string> = boost::optional<std::string>(), /*...*/)
Class1(std::string arg1, /*...*/) : 
member1(arg1), /*member2(arg2), etc.*/ 
```

那么大家可以`Class1`这样：

```
Class1 my_class;
Class1 my_class("hello", "there"); // Rest of arguments use boost::optional 
```

但是，如果您必须提供许多构造函数和可能性，也许上述可能不是一个好的解决方案，您可以考虑对其进行模板化以减少您必须编写的代码量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T10:30:36.703

最简单的解决方案：提供多个构造函数，一个 take`char const*`或 better `std::string`，一个taking `boost::optional`。

但是，如果您希望每个参数本身都有这种可能性，那么最好只模板化ctor。

```
template<class A1, class A2, class A3 /*, ..., class AN*/>
Class1(A1 const& a1, A2 const& a2, A3 const& a3 /*, ... , AN const& aN*/)
  : _member1(a1)
  , _member2(a2)
  , _member3(a3)
/*, ...
  , _memberN(aN)*/
{ /* ... */ } 
```

顺便说一句，您不应该通过`NULL`未使用的 `optional`, 但是`boost::none`.

# html - HTML/CSS 表格布局已修复，但希望一个 td 宽度更小

> ID：11680586
> 
> 赞同：2
> 
> 时间：2012-07-27T02:15:51.467
> 
> 标签：html, css, html-table, tablelayout

我有一张有 4 列的表。我希望第一个是固定的 5%，接下来的 3 个是固定的 20%。因此，为了确保最后 3 个宽度始终相同，我正在使用`table-layout:fixed`. 但是，这导致第一个 td 与最后 3 列的宽度相同。

这是我的 HTML：

```
<tr>
<td class="groupsOptionsCheckboxCell"><input type="checkbox"/></td>
<td>{{COMPONENT_NAME}}</td>
<td>{{CO}}</td>
<td>{{PANEL_OPTIONS}}</td>
</tr> 
```

还有我的 CSS：

```
.creatorOptionsTable {border-collapse: collapse; width: 80%; table-layout: fixed;}
.creatorOptionsTable tr {border-bottom: 1px solid black;}
.creatorOptionsTable td {padding: 5px 3%; width: 20%; border-left: 1px solid black;    word-wrap: break-word}
 .creatorOptionsTable td.groupsOptionsCheckboxCell, .creatorOptionsTable th.groupsOptionsCheckboxCell {width: 5% !important;  text-align: center; border-left: none;} 
```

请注意，我知道我没有`<table>`在其中包含标签。但它就在那里。

看起来这应该很容易，但行不通。

* * *

好吧，这是我的整个代码：

```
 <table id="creatorOptionsAddTable" class="creatorOptionsTable">
<tr class="firstRow">
    <th clas="groupsOptionsCheckboxCell"></th>
    <th>Component</th>
    <th>Description</th>
    <th>Panel</th>
</tr>
 <tr>
<td class="groupsOptionsCheckboxCell"><input type="checkbox"/></td>
<td>{{COMPONENT_NAME}}</td>
<td>{{COMPONET_DESCRIPTION}}</td>
<td>{{PANEL_OPTIONS}}</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:23:44.120

那应该工作得很好。这不是你所有的HTML，对吧？确保您也声明了表类。我已经编辑了代码以考虑您的整个 HTML 示例。问题是您声明的 ths 没有 CSS 规则，因此它们影响了 tds 的宽度。让我知道这是否仍然不起作用，尽管它在 jsfiddle (http://jsfiddle.net/QWsZT/2/) 中运行良好。

HTML：

```
<table id="creatorOptionsAddTable" class="creatorOptionsTable">
<tr class="firstRow">
    <th class="groupsOptionsCheckboxCell"></th>
    <th>Component</th>
    <th>Description</th>
    <th>Panel</th>
</tr>
 <tr>
<td class="groupsOptionsCheckboxCell"><input type="checkbox"/></td>
<td>{{COMPONENT_NAME}}</td>
<td>{{COMPONET_DESCRIPTION}}</td>
<td>{{PANEL_OPTIONS}}</td>
</tr>
</table> 
```

CSS：

```
.creatorOptionsTable {border-collapse: collapse; width: 80%; table-layout: fixed;}
.creatorOptionsTable tr {border-top: 1px solid black;}
.creatorOptionsTable tr.firstRow {border-top: none;}
.creatorOptionsTable td {padding: 5px 3%; width: 20%; border-left: 1px solid black; word-wrap: break-word}
.creatorOptionsTable td.groupsOptionsCheckboxCell, .creatorOptionsTable th.groupsOptionsCheckboxCell {width: 5% !important;  text-align: center; border-left: none;}
.creatorOptionsTable th {padding: 5px 3%; width: 20%; border-left: 1px solid black; word-wrap: break-word}
.creatorOptionsTable th.groupsOptionsCheckboxCell, .creatorOptionsTable th.groupsOptionsCheckboxCell {width: 5% !important;  text-align: center; border-left: none;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T02:41:39.560

啊! 我找到了。在我决定使用 table-layout: 修复之前，我在这里有这个：

```
.creatorOptionsTable {width: 80%;} 
```

把它拿出来，它是固定的。无论如何，谢谢你们的帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T04:41:45.573

啊，所以你在你的标签中做一个愚蠢的错误检查你写的东西

```
<th clas="groupsOptionsCheckboxCell"></th> 
```

你认为它对吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T11:14:23.310

首先，您误解了这意味着什么：

```
.creatorOptionsTable { width: 80%; } 
```

这会将表格元素设置为父元素的 80%。因此，如果您的父级是 1000 像素——这将告诉浏览器，“让这个表成为 800 像素”。然后，它对列的宽度进行排序。

其次，如果要设置每列的宽度，它必须等于 100%。浏览器无法计算总计小于 100% 的所有列。这就像说：有 8 片披萨：乔吃了 1 片，约翰吃了 2 片，山姆吃了 2 片，史蒂夫吃了 2 片——我们吃了整个披萨——假的。

理解这一点，如果您希望一列是其他三列的 1/4。应该是大约 8%、30%、31%、31%（或者只做 10、30、30、30）。或者您可以将 3 的宽度设置为相同，狭窄的将填充剩余的空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T11:20:41.060

将一般宽度设置`td`为 like`30px`并用 固定`max-width`，然后将其他 3 的宽度设置为 20% 并重复出现`+td`（`td+td`表示第二个`td`和 on，`td+td+td`表示第三个`td`和 on，等等...）

```
/*Set first (general) width fixed*/
.creatorOptionsTable td {
    width: 30px;
    max-width: 30px;
}
/*Set recurring cells' width 20%*/
.creatorOptionsTable td+td {
    width: 20%;
} 
```

还将表格放在`div`宽度为 80% 的 a 中，并将表格的宽度设置为`100%`：

```
div.container {
    max-width: 80%;
}
.creatorOptionsTable {
    width: 100%;
    word-wrap: break-word;
} 
```

# tdd - 从事棕地开发工作时，TypeMock 是唯一的解决方案吗？

> ID：11680587
> 
> 赞同：0
> 
> 时间：2012-07-27T02:16:03.703
> 
> 标签：tdd, nunit, moq, typemock

我正在开始一个维护项目，我需要使用遗留代码并创建新代码。新的我可以创建适当的基于接口的开发，我可以使用 Moq 进行适当的单元测试。我不能对遗留代码使用最小起订量，因为它们没有适当的编码来模拟对象。根据阅读，Typemock 看起来非常合适，因为我可以隔离对象并在对遗留对象调用方法时返回我们想要的内容。我真的很喜欢开发的简单性和易用性。我想知道是否有任何其他工具，例如 Typemock，我应该在投入使用之前查看它，因为我必须为此付费。

谢谢

PS：我们是微软商店，我们使用 C#/ASP/ASp.Net/Silverlight 和 VB.Net

** 我刚刚发现 Infragistics 也有一个模拟工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T15:52:34.290

您正在寻找的是一个使用 Profiler API 的模拟框架。这些是可以“模拟任何东西”的，因为它们在被测试的代码“下面”运行。

在考虑其中之一时，您需要考虑以下事项：

*   **集成支持**：它是否适用于您正在使用的工具？例如，您的构建服务器、覆盖工具、单元测试工具等。它附带的任何其他工具（例如，Visual Studio 插件）可以帮助您使用它吗？
*   **技术支持**：如果出现问题或您发现产品中的错误，您可以向某人询问吗？
*   **语法/模式**：它支持 AAA 测试还是仅记录/重放？开始工作有多容易？
*   **社区和学习资源**：文档如何？有没有人可以回答您更一般的使用问题，或者您是“独自一人”？

我知道要考虑三个主要的模拟框架：

*   **[Typemock Isolator](http://www.typemock.com)** - 最成熟的开源项目免费许可证，但不是免费的。
*   **[Telerik JustMock](http://www.telerik.com/products/mocking.aspx/)** - 新场景，但功能很好。[有一个免费/有限的版本](http://www.telerik.com/freemocking.aspx)。
*   **[Moles](http://research.microsoft.com/en-us/projects/pex/)** - 来自 Microsoft，但与 VSTS 领域之外的工具集成起来不太容易。

*完全披露：我是 Typemock MVP，我使用 Isolator 已经有一段时间了。*迄今为止，它在黄金中的重量是值得的，尤其是在棕地开发方面。我承认在某些情况下，如果它更多是 Greenfield，我使用 Rhino 或 Moq。这真的取决于我在做什么。

无论如何，我建议您自己评估每个工具，看看哪些工具最适合您的环境。一定要看看它是如何集成的，它是如何容易上手的，等等，然后根据你在你的环境中的经验做出你的决定。

# javascript - Parent() UL 的 div

> ID：11680589
> 
> 赞同：0
> 
> 时间：2012-07-27T02:16:39.297
> 
> 标签：javascript, jquery, parent

HTML：

```
<ul id="column">
<li id="widget8">
    <div class="testhub"></div>
</li>
</ul> 
```

JS：

```
if ($("#widget8").parent("#dock")) {
   $(".testhub").html("<p>dock</p>");
}
else {
    $(".testhub").html("<p>not dock</p>");
}​ 
```

CSS：

```
#dock {
    width: 90%;
    height: 100px;
    background-color: blue;
}
#column {
    width: 90%;
    height: 100px;
    background-color: red;
}
#widget8 {
    width: 90%;
    height: 50px;
    background-color: yellow;
}
.testhub {
    width 50%;
    height: 25px;
    background-color: black;
    color: white;
}​ 
```

[http://jsfiddle.net/zVx8s/1/](http://jsfiddle.net/zVx8s/1/)

我要做的就是获取**li所在的****ul**，如果它在**#dock**上，然后向testhub写一些东西。但似乎不起作用，请检查 jsfiddle。

 ****我想我错误地使用了父母。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:25:28.560

试试这个：**工作演示** [http://jsfiddle.net/268mh/](http://jsfiddle.net/268mh/)

请注意，您永远不能在 DOM 中拥有相同的 id。所以我`widget8`改为上课了！

休息希望演示有助于事业！`:)`

**代码**

```
$(".widget8").each(function() {
    if ($(this).parent().prop("id") == "dock") {
        $(this).find(".testhub").html("<p>dock</p>");

    }
    else {
        $(this).find(".testhub").html("<p>not dock</p>");
    }
});​ 
```

**HTML**

```
<ul id="dock">
<li class="widget8">
    <div class="testhub"></div>
</li>
</ul>

<ul id="column">
<li class="widget8">
    <div class="testhub"></div>
</li>
</ul>
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T02:32:16.347

第一个问题是在你的小提琴上你使用 2 `ul`s 和相同的`id`. 改用类。

你必须遍历你`li`的 s 并检查父母的长度。

```
$(".widget8").each(function) {
    var $element = $(this).parent("#dock");
    if($element.length > 0) {
        var message = 'dock';
    }
    else {
        var message = 'not dock';
    }
    $($element, this).html('<p>' + message + '</p>');
});

​ 
```

[**演示**](http://jsfiddle.net/zVx8s/3/)

所以如果你只是想测试是否有 id 你只**需要使用正确的选择器**。

```
$('#dock .widget8').html('<p>dock</p>'); 
```

`#dock`上面的选择器获取内部且具有类的元素`.widget8`。

[**演示**](http://jsfiddle.net/zVx8s/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T02:22:42.187

你忘`length`了检查它是否真的存在。

```
if ($("#widget8").parent("#dock").length)
                                 ---^--- 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T02:24:10.510

问题是这个表达式：

```
$("#widget8").parent("#dock") 
```

计算结果为 jQuery 对象，并且对象在 JavaScript 中始终是“真”值。（*总是*. Even`new Boolean(false)`是一个“真”值。）

要查看上面的 jQuery 对象是否包含任何实际元素，可以[使用`.length`属性](http://api.jquery.com/length/)：

```
if ($("#widget8").parent("#dock").length) { 
```

（但我同意杰夫的观点，写得更清楚`parent().is("#dock")`：获取父级，检查它是否是`#dock`，而不是获取父级，如果它是- `#dock`，看看它是否存在。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T02:21:37.900

如果你想测试 parent `id`，你可以使用这个：

```
if ($("#widget8").parent().is("#dock")) {
    $(".testhub").html("<p>dock</p>");
}
else {
    $(".testhub").html("<p>not dock</p>");
}​ 
```****

# colors - Cocos2d ColorLayer 让半屏变黑

> ID：11680594
> 
> 赞同：0
> 
> 时间：2012-07-27T02:17:30.100
> 
> 标签：colors, cocos2d-iphone, scene

我有一个标准场景，`init`方法如下：

```
@interface CommodoreScene : CCLayerColor

@end

@implementation CommodoreScene

- (id) init {
    if (( self=[super initWithColor:ccc4(255, 255, 255, 255)] )) {

    }

    return self;
}

@end 
```

然而，当我在我的 iPhone4 上运行场景时，或者模拟器一半的屏幕变黑，另一半我的图层颜色（白色）。

我目前正在使用`[_director pushScene:[CommodoreScene node]];`cocos2d-iphone 2.0.0 运行场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:28:06.193

```
- (id) init {
    if (( self=[super initWithColor:ccc4(255, 255, 255, 255) width:480 height:320] )) {

    }

return self;
} 
```

试试看。重要的部分当然是对 super 的调用的变化。如果您处于横向状态（从您遇到的错误判断 - 您是），您可能仍然会在 -init 方法中正确读取 [[CCDirector] winSize] 问题，至少我在测试中这样做了。我记得，这是某种已知的错误，因为它似乎将 winSize 读取为纵向而不是横向。您可以通过执行以下操作来解决此问题：

```
CGRect rect = CGRectMake(0, 0, 480, 320);
CGSize size = rect.size;
// position the label on the center of the screen
label.position =  ccp( size.width /2 , size.height/2 ); 
```

在您的 -init 方法中使用新创建的大小而不是 winSize 可以解决此问题。请注意，如果您在初始化*后*创建和定位元素，例如在 onEnter 中，此问题就会消失，并且来自 director 的 winSize 可以正确读取。奇怪的错误，它是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:04:09.400

您可以更改颜色层的内容大小；

```
CGSize boxSize = CGSizeMake(sGame.winWidth, sGame.winHeight);
CCLayerColor *box = [CCLayerColor layerWithColor:ccc4(155,155,200,255)];
box.position = ccp(0.0f, 0.0f);
box.contentSize = boxSize;

[self addChild:box z:-6]; 
```

# wcf-data-services - OData、Atom、Json和WCF数据服务有什么关系

> ID：11680595
> 
> 赞同：10
> 
> 时间：2012-07-27T02:17:33.143
> 
> 标签：wcf-data-services

最近在学习 WCF 数据服务。我知道数据服务将数据公开为可以通过 URL 操作的 Rest 资源。但是这个领域有很多技术。希望有人能帮助我理解这些。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T11:47:04.887

OData 是一种将数据公开（如您所述）作为 REST 资源的协议。要了解更多信息，[请访问 http://www.odata.org](http://www.odata.org)。

WCF 数据服务是 Microsoft 在 .NET 平台上实现的 OData 协议（客户端和服务器）。因此，由 WCF 数据服务创建的服务使用 OData 协议。

ATOM 是一种标准格式，它是在 OData 协议中传输数据的可能有线格式之一。OData 协议定义了对它的扩展。为了更好地了解，ATOM 是一种基于 XML 的格式，它定义了 XML 元素及其含义（提要、条目、链接），OData 使用它以及它自己的几个 XML 元素来序列化数据。

JSON 是一种标准格式（用于 JavaScript 对象的序列化），它是在 OData 协议中传输数据的一种可能的有线格式。所以 OData 协议使用 JSON 来序列化数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T12:37:13.590

**WCF 数据服务**（以前称为“ADO.NET 数据服务”）是 .NET 框架的一个组件，它使您能够创建使用开放数据协议 (OData) 的服务，通过使用表征状态转移（REST）的语义。

开放数据协议 ( **OData** ) 是一种开放协议，允许以简单和标准的方式创建和使用可查询和可互操作的 RESTful API。

更多 [http://en.wikipedia.org/wiki/Open_Data_Protocol](http://en.wikipedia.org/wiki/Open_Data_Protocol)

**Atom**是一种公开提要的方式，与 RSS 的方式非常相似。

**JSON（JavaScript Object Notation）**是一种轻量级的数据交换格式。人类很容易阅读和写作。机器很容易解析和生成。它基于 JavaScript 编程语言标准 ECMA-262 第 3 版 - 1999 年 12 月的一个子集。

# mysql - 在 VB.NET 中删除 SQL 语句

> ID：11680597
> 
> 赞同：0
> 
> 时间：2012-07-27T02:17:36.723
> 
> 标签：mysql, sql, database, vb.net

我是 VB.NET 和 MySqL 的新手。我想删除数据库中的记录。使用，

```
 Dim SQLStatement As String = "DELETE name,date FROM people"
    RetrieveInfos(SQLStatement) 
```

在哪里，

```
Public Sub RetrieveInfos(ByRef SQLStatement As String)
    Dim cmd As MySqlCommand = New MySqlCommand

    With cmd
        .CommandText = SQLStatement
        .CommandType = CommandType.Text
        .Connection = SQLConnection
        .ExecuteNonQuery()

    End With

    SQLConnection.Close()
    SQLConnection.Dispose()
End Sub 
```

但是有一个InvalidOperationException的错误，我很困惑。我想在不引用“ WHERE number = VALUE ”的情况下删除数据库中的记录，以删除以前记录的值。那可能吗？

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:24:46.877

你有几个问题：

1.  由于您正在删除记录，因此您无需在 delete 语句中指定列名。

2.  如果您的命令成功执行，它将删除 people 表中的每条记录。

3.  您将在 RetrieveInfos 方法的末尾关闭并释放 SQLConnection。如果此连接在您的代码中的其他位置打开，则只有代码的第一次执行才会起作用。

4.  如果您的方法正在删除，则不应将其称为 Retrieve。

5.  该命令应包含在 using 语句中

    ```
    Using cmd As MySqlCommand = New MySqlCommand
        With cmd
            .CommandText = SQLStatement
            .CommandType = CommandType.Text
            .Connection = SQLConnection
            .ExecuteNonQuery()
        End With
    End Using 
    ```

# asp.net-mvc-4 - 加载 ASP.Net 配置文件时出错

> ID：11680599
> 
> 赞同：0
> 
> 时间：2012-07-27T02:17:45.373
> 
> 标签：asp.net-mvc-4, asp.net-profiles

我有一个使用 AspNetSqlProfileProvider 的现有 MVC 4 应用程序，配置如下：

```
<properties>
    <add name="MyTypeAs" 
         type="System.Collections.Generic.List`1[[My.Namespace.MyTypeA, My.Namespace, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]" serializeAs="Binary" />
</properties> 
```

现在我希望像这样更新系统（不删除旧配置文件）：

```
<properties>
    <add name="MyTypeAs" 
         type="System.Collections.Generic.List`1[[My.Namespace.MyTypeA, My.Namespace, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]" serializeAs="Binary" />
    <add name="MyHashOfInts" 
         type="System.Collections.Generic.HashSet`1[System.Int32]" serializeAs="Binary" />
</properties> 
```

在以前的项目中添加其他属性没有问题。如果序列化数据来自未定义附加属性的先前版本，则加载该属性会产生 default(T)。但是，通过此更改，当我的控制器执行此行时：

```
List<MyTypeA> myTypeAs = 
     (List<MyTypeA>)HttpContext.Current.Profile.GetPropertyValue("MyTypeA"); 
```

抛出异常：

> 尝试加载此属性的类型导致以下错误：无法加载类型“System.Collections.Generic.HashSet`1[System.Int32]”。

请注意，我正在引用类型的属性，`List<MyTypeA>`但异常说它无法加载类型

> System.Collections.Generic.HashSet`1[System.Int32]。

我在 web.config 中指定类型的方式有误吗？还有其他原因吗？

所有这一切都发生在选择了 .NET 4 运行时的 Visual Studio 2010 SP1 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:29:02.057

事实证明，与 不同`List<T>`，它`HashSet<T>`需要一个完全限定的程序集名称。

> System.Collections.Generic.HashSet`1[[System.Int32]]，System.Core，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089

# c# - 如何使用 SQL Server 数据库部署或发布 Windows 应用程序

> ID：11680600
> 
> 赞同：2
> 
> 时间：2012-07-27T02:17:51.347
> 
> 标签：c#, sql-server, database, deployment, publish

我开发了一个带有 SQL Server 数据库的 C# 应用程序。当我尝试发布应用程序以对其进行测试时>>它在我的机器上正常工作（包括 SQL Server 数据文件夹中的数据库）>>但是当我将该已发布的应用程序移动到另一台机器时它不起作用。

我想知道将项目与其数据库一起部署的最简单方法

我在我的`app.config`：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name="cs" 
         providerName="System.Data.ProviderName" 
         connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Program Files (x86)\Microsoft SQL Server\MSSQL.1\MSSQL\Data\KBank.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True" />
  </connectionStrings>
</configuration> 
```

我应该怎么做才能将数据库与部署的应用程序一起放置并动态修改数据库的连接字符串`app.config`？

当我在用户机器上打开项目时显示的异常说：

> 尝试为文件 C:\Program Files (x86)\Microsoft SQL Server\MSSQL.1\MSSQL\Data\KBank.mdf 附加自动命名数据库失败，存在同名数据库或无法打开指定文件, 或其在 UNC 共享上的位置

似乎无法读取 SQL 数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-23T18:07:59.667

您的应用程序找不到连接字符串中指定的数据库文件，少谈连接。这是因为数据库是**自动命名的**，而不是数据文件。您需要做的就是将数据库作为附加的**数据文件**添加到包中，以便在部署时数据库将与它一起使用。为此，在 Visual Studio IDE 上，在发布选项卡上选择“应用程序文件”，将数据库文件的发布状态从“包含自动”更改为“数据文件”，然后验证。这将在发布和部署时将数据库文件添加到您的应用程序。要访问项目属性，1) 使用 Visual Studio 2010/2012 - 单击项目菜单 -> 属性 ->

我希望这对你有帮助。如果不是，我会尝试再次解释。祝好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:35:07.627

我已经解决了我的问题>问题是我没有将本地数据库添加到我的项目解决方案中。所以当我在另一台机器上尝试项目时，应用程序找不到具有路径的指定连接字符串：

> C:\Program Files (x86)\Microsoft SQL Server\MSSQL.1\MSSQL\Data\KBank.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True

但是当我将本地数据库添加到我的项目解决方案中时，连接字符串路径变为：

> |数据目录|\KBank.mdf

已成功附上项目文件谢谢

# c# - 表单组件继承 CommonDialog

> ID：11680601
> 
> 赞同：1
> 
> 时间：2012-07-27T02:17:55.413
> 
> 标签：c#, winforms, components

好吧，正如标题所说，我需要创建一个继承自commonDialog的组件。我已经创建并工作了一个表单，但我需要将它创建为一个组件（如 OpenFileDialog）以在以后的项目中使用（如“弹出窗口”）。

有任何想法吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:48:58.110

CommonDialog 是一个非常特殊的基类，旨在充当 Windows 中内置对话框的通用基类。它不是您自己的组件的合适基类。而是简单地从 Component 派生。

一个简单的例子：

```
using System;
using System.ComponentModel;
using System.Windows.Forms;

class MyComponent : Component {

    public bool ShowDialog() {
        using (var dlg = new WindowsFormsApplication1.Form2()) {
            if (dlg.ShowDialog() == DialogResult.OK) {
                // Retrieve properties
                //...
                return true;
            }
            else return false;
        }
    }

    // Add your own properties here
    //...

} 
```

# jquery - 为什么我不能使用 .val() 更改此输入的值？

> ID：11680602
> 
> 赞同：3
> 
> 时间：2012-07-27T02:18:14.910
> 
> 标签：jquery

我正在尝试更改此禁用输入的值。我想也许它被禁用的事实是问题，所以我手动删除了 disabled 属性（以防你想知道为什么它不再在屏幕截图中被禁用）。见下图：

![在此处输入图像描述](../Images/4aec66c19d5025bfea13a47a490b66c9.png)

从控制台返回的内容来看，它似乎正确地选择了输入，但输入的值仍然为空白，即使启用了输入也是如此。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T02:22:56.803

我可以告诉你我也遇到过类似的问题，并且已经通过使用 jQuery 的 attr 方法解决了这些问题。它可以将任意 HTML 属性设置为您想要的任何内容。在这里查看更多信息：http: [//api.jquery.com/attr/](http://api.jquery.com/attr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:22:01.213

我认为您正在寻找[.prop()](http://api.jquery.com/prop/)而不是[.val()](http://api.jquery.com/val/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:37:01.483

不确定页面的其余部分是什么样子，但我可以看到您正在嵌套表格 - 可能会导致混淆和意外结果，尤其是隐藏的嵌套表格。当用户单击时，您是否要显示隐藏的表格`add-btn`？如果是这样，为什么不通过在单击事件中查找文本按钮来获取文本按钮，相对于单击的按钮？

```
$(".add-btn").click(function(evt){
    var product = getProductNameSomehow(); // Up to you

    var newContainer = $(this).siblings("table").find(".new-row-html");
    newContainer.find("input.product").val(product);

    evt.preventDefault();
    return false;
}); 
```

您可以使用 改进和概括此示例侦听器`$(...).on("click", ...)`。`.a-btn`可能会更好作为 a ，[`<button type="button">Add</button>`](http://www.w3.org/wiki/HTML/Elements/button#States_of_the_type_attribute)也许[样式为 link](http://natbat.net/2009/Jun/10/styling-buttons-as-links/)，如果这是你想要的，所以你不必担心停止点击事件。

# java - Eclipse 的 JSON 库

> ID：11680604
> 
> 赞同：0
> 
> 时间：2012-07-27T02:18:25.160
> 
> 标签：java, eclipse, json, openshift

我正在尝试连接到我已经设置的 OpenShift PHP 数据库。我正在尝试使用 eclipse java 类连接到它。我尝试使用 Google Http 客户端文件，但我不确定如何将这些添加到我的项目中。我尝试通过 libs 文件夹添加，但它总是显示错误。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:37:03.460

您需要将库添加到项目项目属性中的类路径中。

项目 > 属性 > Java 构建路径 > 库

将 jar 放入您的 libs 文件夹并在库设置中添加一个 jar。如果您只获得源代码，那么您必须将源代码包添加到您的源文件夹中，一切都应该没问题。或者，您可以在外部链接源。但是，您应该将库作为 jar 获取，因此只需将其放入 libs 文件夹并将其添加到您的项目属性中。

# symfony1 - 在没有指定关系的表上加入 Doctrine 查询

> ID：11680606
> 
> 赞同：1
> 
> 时间：2012-07-27T02:18:38.250
> 
> 标签：symfony1, doctrine, doctrine-1.2, doctrine-query

我有两个表在 schema.yml 中没有相互定义的关系。但是，表 1 有一个对表 2 主键的外键引用。显然，我没有很好地设计数据库，但现在是缓解的时候了。

我必须在两个表之间进行左连接，并加上一个 where 子句，该子句将检索我想要的选择行。为此，我会：

```
 Doctrine_Query::create()->select('t.*, l.lid')->from('Taxonomy t')->leftJoin('t.Cid c')      ->leftJoin('c.Lesson l')->where('t.section = ?','Critical reading'); 
```

这通常应该这样做，但它不会，因为它返回的是分类表中的所有行，而与 where 条件无关。我在想，这是因为列中没有指定关系吗？那将是荒谬的，因为查询有效，仅在教义上下文中无效。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T07:13:06.590

在原则上，您只能使用您在架构上定义的关系加入，这是一个已知的限制。您可以使用本[机 SQL](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/native-sql.html)功能作为解决方法。

# ruby - 这个 Ruby 正则表达式是什么意思？

> ID：11680608
> 
> 赞同：0
> 
> 时间：2012-07-27T02:19:00.053
> 
> 标签：ruby, regex

```
if (banners = /Ability Server 2\\.34g/) 
```

我只是对 Ruby 中的这个正则表达式感到困惑。这个正则表达式在说什么？是什么`g/`意思？

我在想我对 Ruby 中的正则表达式有点误解，因为我不应该对这个简单的问题感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:22:39.630

如果您使用正则表达式来测试字符串，则需要使用`=~`而不是`=`.

```
if (banners =~ /Ability Server 2\.34g/) 
```

而`g`你的正则表达式中的只是一个`g`，你正在测试一个字符串是否包含该字符串`'Ability Server 2.34g'`

# php - FOSUserBundle 如何匹配 symfony2 Doctrine 中数据库中的密码

> ID：11680611
> 
> 赞同：1
> 
> 时间：2012-07-27T02:20:26.783
> 
> 标签：php, symfony, fosuserbundle

我正在阅读 FOSUserbundle 各种文件，他们在 UserManager 中使用此功能

```
public function loadUserByUsername($username)
    {
        $user = $this->findUserByUsername($username);

        if (!$user) {
            throw new UsernameNotFoundException(sprintf('No user with name "%s" was found.', $username));
        }

        return $user;
    }

public function findUserBy(array $criteria)
    {
        return $this->repository->findOneBy($criteria);
    } 
```

现在这两个功能都在，`UserManager.php`但它们只根据密码或电子邮件返回用户。我还没有找到任何完成密码匹配的代码。

是由 symfony 还是 FOSUserBundle 完成的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:19:35.443

FOSUserBundle 实际上是一个具有用户管理功能的用户提供者。密码匹配是在 Symfony 的核心安全组件中完成的。见[这里](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Core/Authentication/Provider/DaoAuthenticationProvider.php#L54)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:38:53.023

密码匹配由 Validator/PasswordValidator.php 中的 FOSUserBundle 完成

# java - 通过 ssh 从 Java 程序执行 Shell 脚本到远程服务器

> ID：11680612
> 
> 赞同：1
> 
> 时间：2012-07-27T02:20:33.330
> 
> 标签：java, shell

下面是我用来 ssh 到远程服务器之一的程序，它工作正常。

**我的问题是**- 有什么方法可以`shell scripts that I have on my windows machine`在远程服务器上执行？

如果是？那么我如何修改下面的代码以在我尝试连接的远程服务器上执行 shell 脚本。

```
public class SampleTest{
  public static void main(String[] arg){

    try{
      JSch jsch=new JSch();

      String host=null;
      if(arg.length>0){
        host=arg[0];
      }
      else{
        host=JOptionPane.showInputDialog("Enter username@hostname",
                                         System.getProperty("user.name")+
                                         "@lvsaishdc3in0001.lvs.host.com"); 
      }
      String user=host.substring(0, host.indexOf('@'));
      host=host.substring(host.indexOf('@')+1);

      Session session=jsch.getSession(user, host, 22);

      String passwd = JOptionPane.showInputDialog("Enter password");
      session.setPassword(passwd);

      UserInfo ui = new MyUserInfo(){
        public void showMessage(String message){
          JOptionPane.showMessageDialog(null, message);
        }
        public boolean promptYesNo(String message){
          Object[] options={ "yes", "no" };
          int foo=JOptionPane.showOptionDialog(null, 
                                               message,
                                               "Warning", 
                                               JOptionPane.DEFAULT_OPTION, 
                                               JOptionPane.WARNING_MESSAGE,
                                               null, options, options[0]);
          return foo==0;
        }

      };

      session.setUserInfo(ui);

      //session.connect();
      session.connect(30000);   // making a connection with timeout.

      Channel channel=session.openChannel("shell");

      // Enable agent-forwarding.
      //((ChannelShell)channel).setAgentForwarding(true);

      channel.setInputStream(System.in);
      /*
      // a hack for MS-DOS prompt on Windows.
      channel.setInputStream(new FilterInputStream(System.in){
          public int read(byte[] b, int off, int len)throws IOException{
            return in.read(b, off, (len>1024?1024:len));
          }
        });
       */

      channel.setOutputStream(System.out);

      /*
      // Choose the pty-type "vt102".
      ((ChannelShell)channel).setPtyType("vt102");
      */

      /*
      // Set environment variable "LANG" as "ja_JP.eucJP".
      ((ChannelShell)channel).setEnv("LANG", "ja_JP.eucJP");
      */

      //channel.connect();
      channel.connect(3*1000);
    }
    catch(Exception e){
      System.out.println(e);
    }
  }

  public static abstract class MyUserInfo
                          implements UserInfo, UIKeyboardInteractive{
    public String getPassword(){ return null; }
    public boolean promptYesNo(String str){ return false; }
    public String getPassphrase(){ return null; }
    public boolean promptPassphrase(String message){ return false; }
    public boolean promptPassword(String message){ return false; }
    public void showMessage(String message){ }
    public String[] promptKeyboardInteractive(String destination,
                                              String name,
                                              String instruction,
                                              String[] prompt,
                                              boolean[] echo){
      return null;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-06T06:52:39.540

您可以执行脚本，甚至无需将它们复制到远程服务器。调用 bash shell 并将命令从 shell 脚本传送到远程进程（`bash`在本例中）。

所以，这是一个简单的脚本`echo "Hi there!"; env`。现在我们可以像这样运行这个脚本：

```
$ echo 'echo "Hi there!"; env' | ssh localhost bash
tuxdna@localhost's password: 
Hi there!
XDG_SESSION_ID=10
SHELL=/bin/bash
SSH_CLIENT=127.0.0.1 43064 22
USER=tuxdna
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
MAIL=/var/mail/tuxdna
PWD=/home/tuxdna
LANG=en_IN
HOME=/home/tuxdna
SHLVL=2
LANGUAGE=en_IN:en
LOGNAME=tuxdna
SSH_CONNECTION=127.0.0.1 43064 127.0.0.1 22
XDG_RUNTIME_DIR=/run/user/1000
_=/usr/bin/env 
```

本质上，您必须编写**远程进程**的**shell 脚本**`STDIN`。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:27:58.903

是的，但可能不是你想的那样。

您需要将脚本复制到远程系统。

查看[http://seancode.blogspot.com.au/2008/02/jsch-scp-file-in-java.html](http://seancode.blogspot.com.au/2008/02/jsch-scp-file-in-java.html)谁编写了一个`FileSender`可能有帮助的包装器

您还可以出于兴趣查看[使用 jsch 库在 sftp 中复制文件](https://stackoverflow.com/questions/4826821/copying-a-file-in-sftp-with-jsch-library)

您还可以查看包含的示例[http://www.jcraft.com/jsch/examples/](http://www.jcraft.com/jsch/examples/)（知道他们在某处）**

# flask - 使用 Flask 和 Mustache 进行开发

> ID：11680618
> 
> 赞同：1
> 
> 时间：2012-07-27T02:21:52.920
> 
> 标签：flask, mustache

我正在使用 Flask 制作 Web 应用程序并使用 mustache 模板（以及 sammy.js）。我正在运行该应用程序，`debug=True`但每当我在 mustache 模板（或其他静态资产）中进行更改时，我需要清除浏览器 cookie 和缓存以确保更改可见。其他时候，我需要在`incognito`模式下使用 Chrome 来查看更改。我怎样才能避免这种麻烦？有没有办法通过重新加载页面来查看更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:12:56.340

最简单的方法是停用浏览器中的缓存。在 Chrome 中，Web 检查器的设置下有一个很棒的复选框。

另一种方法应该是删除缓存 http 标头键。有一个烧瓶设置键`SEND_FILE_MAX_AGE_DEFAULT`，您应该控制静态文件的缓存寿命。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T20:01:45.507

[您可以使用Flask-Assets](http://elsdoerfer.name/docs/flask-assets/)扩展来管理您的静态资产。扩展使用的库允许缓存破坏。

在开发时，您可能还希望将您的 mustache 模板呈现到模板本身，而不是外部 javascript 文件中。[Flask-mustachejs](https://github.com/bradleywright/flask-mustachejs)烧瓶扩展实现了这一点，并且有关于在开发和生产中以不同方式加载模板的文档。

# c++ - C++ const 循环声明

> ID：11680628
> 
> 赞同：4
> 
> 时间：2012-07-27T02:22:59.633
> 
> 标签：c++, constants

为什么以下代码使用引用自身的循环 const 变量进行编译？

```
#include <iostream>

extern int main(int argc, char* argv[])
{
  const int foo = foo * 60;
  std::cout << foo << std::endl;
  return 0;
} 
```

我正在使用 SUNWspro 编译器在 Solaris 5.10 x86 主机上进行编译：

```
/opt/SUNWspro/bin/CC test.cpp 
```

为了完整起见，这是它打印的内容：

```
$ ./a.out
-519270512 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T02:24:46.783

在 C++ 中，变量在作用域内，可以用作它们自己的初始化程序的一部分。例如，下面的代码也是合法的：

```
int x = x; 
```

这样做会导致未定义的行为，因为您指的是`x`在初始化之前的值。但是，这是完全合法的代码。我认为这背后的基本原理是，在某些情况下，您可能希望一个对象在其构造过程中引用它自己。例如，你可以想象做这样的事情：

```
MyObject x(137, &x); // Pass a pointer to x into its own constructor 
```

不过，老实说，我不确定您为什么要这样做。

希望这可以帮助！

# asp.net-mvc-3 - 值不能为空。参数名称：MVC 列表框中的源

> ID：11680629
> 
> 赞同：0
> 
> 时间：2012-07-27T02:23:02.053
> 
> 标签：asp.net-mvc-3, listbox

我找到了很多关于这个的帖子，但没有一个能解决我的问题。我现在的代码：

```
@Html.ListBox("SelectedNewsletter", Model.Newsletters) 
```

和

```
public MultiSelectList Newsletters
{
    get
    {

            return new MultiSelectList(
            new[] 
            {
                // TODO: Fetch from your repository
                new { Id = 1, Name = "item 1" },
                new { Id = 2, Name = "item 2" },
                new { Id = 3, Name = "item 3" },
            },
            "Id",
            "Name"
                );

      //      return new MultiSelectList(PromoNewsletter.All, "IdString", "Display");
    }
} 
```

据我所知，它现在都是硬编码的，它仍然给出同样的错误。我想做一个 ListboxFor，但我只是想让一个列表框工作。根据我在其他地方找到的建议，我已经用字符串表示替换了我的 int id，但现在我看不出我还能做什么。即使使用所有硬编码值并且未绑定到我的 ViewModel 上的属性，它也无法正常工作。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T04:02:27.750

发生错误是因为您在**Model**或**ViewData/ViewBag**中有一个名为的属性`SelectedNewsletter`。

`ListBox`如果您无法重命名该属性，请为该属性指定一个不同的名称。

**更新：**

经过更多的实验，我发现问题是您可能正在将一个整数值设置为**ViewData/ViewBag**或**Model**`SelectedNewsletter`中的某处。

 ****您可以将必须​​在 ListBox 中选择的值设置为字符串或字符串数​​组到`SelectedNewsletter`.

IE`SelectedNewsletter = "1";`

或者

```
SelectedNewsletter = new[] { "1", "3" }; 
```

你也可以使用强类型的助手来让事情变得简单，

```
@Html.ListBoxFor(m => m.SelectedNewsletter, Model.NewsLetters); 
```****

# android - AsyncTask OnPostExecute 不更新 TextView

> ID：11680631
> 
> 赞同：3
> 
> 时间：2012-07-27T02:23:12.503
> 
> 标签：android, android-asynctask, textview

我有一个`AsyncTask`跑步。我有一个`TextView`我模仿`Toast`最初产生的消息。我想清除`TextView`成功`OnPostExecute`但它没有这样做。任务完成`Toast`工作正常。如何将`TextView`中的设置`OnPostExecute`为空白？用户仍在显示屏幕上`TextView`。

错误情况的代码如下：

```
@Override
protected void onPostExecute(Void result) 
 { FetchingImage=0;
  if(webLoadError>0)
   {
    TextView text = (TextView) findViewById(R.id.textView2);
    String temp=" ";
    text.setText(temp);
    Toast.makeText(getApplicationContext(), "Image not available from the internet.\nDefault or last image loaded.\nTry again later.",Toast.LENGTH_LONG).show();
    }  
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T02:31:54.820

尝试类似：

```
((TextView) findViewById(R.id.textView2)).setText(""); 
```

**编辑：**

尝试在`onCreate`like之外`TextView text;`然后在`onCreate`put 内部创建一个变量：`text = (TextView) findViewById(R.id.textView2);`

然后把它放在方法`text.setText("");`里面`onPostExecute`。

看看这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T13:58:37.993

我知道这个线程很旧，但我想我找到了解决方案（至少它对我有用），也许它可以帮助其他人：

我有一个带有 3 个文本视图的视图，默认值从 AsyncTask 的“doInBackground”方法接收来自 Web 服务的值，然后在“onPostExecute”方法上更改其中的文本。问题在于，在第一次执行代码时，三个文本视图中只有一个显示来自 ws 的新文本（无论如何，这是一个实现 Zxing 条形码阅读器从产品读取条形码并从网络服务器获取价格的简单应用程序） ，接下来的执行（应用程序打开后）正常更新三个文本视图。

所以我注意到在第一次执行中更新其值的唯一 textview 的参数“android:textIsSelectable”=true，另外两个为 false。宾果游戏，在其他 2 个文本视图中将此参数更改为 true 解决了该问题。

# init - __init 和 __exit 宏用于内置和可加载模块

> ID：11680641
> 
> 赞同：5
> 
> 时间：2012-07-26T09:27:16.237
> 
> 标签：init, exit

我正在阅读有关 linux 内核开发的信息，但我只是阅读了一些我不理解的文本。以下是关于模块的 __init 和 __exit 宏的段落：

> 这演示了内核 2.2 及更高版本的一个特性。注意 init 和 cleanup 函数定义的变化。__init 宏会导致 init 函数被丢弃并在 init 函数完成后释放其内存以用于内置驱动程序，但不是可加载模块。如果您考虑一下何时调用 init 函数，这很有意义。
> 
> 还有一个 __initdata，其工作方式与 __init 类似，但用于初始化变量而不是函数。
> 
> __exit 宏在模块内置到内核时会导致函数的省略，并且与 __exit 一样，对可加载模块没有影响。同样，如果您考虑清理功能何时运行

我明白了；`__init`一旦内置驱动程序的 init 函数完成，宏会导致 init 函数被丢弃并释放其内存。但是*为什么？*不适用于可加载模块？我无法理解它。

我知道这是一件愚蠢的事情，但我想了一段时间，无法完全理解。为什么使用内置驱动程序而不是可加载模块？`__init`两者都需要分配的变量，地址等，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:50:54.450

你是对的; 即使在模块中，也可能存在初始化后您确实不需要的功能，因此原则上可以将它们从内存中删除。`__init`对模块没有影响的原因更多是因为它实现起来有多容易。

[对有关性质的问题的回答`__init`](https://stackoverflow.com/a/8832142/460258)为该主题提供了一些启示。本质上，内核构建系统在内核的所有部分中查找所有标记为 的函数`__init`，并将它们安排在同一个内存块中。

然后，当内核启动时，它可以一次性释放这块内存。

这种预先排序的想法不适用于模块。加载模块时必须加载初始化代码，因此它不能与其他初始化代码共享空间。相反，内核必须从每个模块中挑选几百个字节并单独释放它们。

但是，硬件页面大小通常为 4KB，因此很难以小于 4KB 的块释放内存。因此，尝试释放`__init`每个单独模块中的功能可能比它的价值更麻烦。

# jquery - jQuery 表单插件，ajaxForm() 但带有条件字段

> ID：11680650
> 
> 赞同：0
> 
> 时间：2012-07-27T02:27:25.827
> 
> 标签：jquery, jquery-plugins, jquery-forms-plugin

我需要使用 ajaxForm() 上传表单（或者我相信，因为 fieldSerialize() 似乎没有正确序列化文件字段）。

如何仅使用 ajaxForm() 序列化表单中的字段子集？我尝试在 beforeSerialize() 或 beforeSubmit() 中操作 arr 或 $form 参数，但它没有这样做。

或者我如何使用 ajaxSubmit() 或 fieldSerialize() 以便它也支持文件上传文件。假设对于 EG，我只想排除带有 hiddenField 类的字段。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T00:02:52.530

不简单地将不需要的字段设置为禁用可以解决这个问题吗？

我相信禁用的字段没有提交。在 jquery 源代码中看到这个>

```
serializeArray: function() {
    return this.map(function(){
        return this.elements ? jQuery.makeArray( this.elements ) : this;
    })
    .filter(function(){
        return this.name && !this.disabled &&
            ( this.checked || rselectTextarea.test( this.nodeName ) ||
                rinput.test( this.type ) );
    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:13:04.840

编写一个像这样的自定义序列化函数：注意 jQuery 将过滤掉任何带有 'hiddenField' 类属性值的输入

```
 function scrapeFormData(formName){
var frm_data = "";
$('#'+formName+' :input').not('.hiddenField').each(function(){
    switch(this.type){
        // handle checkbox specially 
        // I persisted my checkbox field this way. You can do this in a better way
        case 'checkbox': {
                if ($(this).attr('checked') == 'checked'){
                    frm_data += $(this).attr('id') + "=1&";// checked value 1
                }else{
                    frm_data += $(this).attr('id') + "=0&";// unchecked value 0
                }
                break;
        }
        // handle radio button specially
        // I persisted my radio button field this way. You can do this in a better way
        case 'radio': {
                if ($(this).attr('checked') == 'checked'){
                    //alert('checked');
                    frm_data += $(this).attr('id') + "=" + $(this).attr('value')+"&";
                }                   
                break;
        }
       default:{
                frm_data += $(this).attr('id') + "=" + $(this).attr('value')+"&";
                break;
        }
    }
});   
frm_data = frm_data.substring(0,(frm_data.length - 1));
return frm_data; 
```

}

# search - SOQL Salesforce 数据库查询，用一个字符串搜索两个连接字段

> ID：11680652
> 
> 赞同：1
> 
> 时间：2012-07-27T02:27:34.723
> 
> 标签：search, salesforce

到目前为止，我正在生成这样的查询：

`$query = "SELECT $imploded From Contact WHERE FirstName LIKE '%$var%' OR LastName LIKE '%$var%' OR Email LIKE '$var'";`

其中`imploded`包含字段列表，`var`是搜索的输入。由于它在 salesforce 数据库中的设置方式，名字和姓氏是两个不同的字段。所以假设搜索是`Shelby`，如果 Shelby 确实在数据库中，您会得到响应，但是如果您尝试`Shelby X`，它无法查看这两个字段并确认这一点。有没有办法让它同时搜索名字和姓氏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:21:00.287

该`Name`字段是一个只读标准字段，充当 和 的`FirstName`组合`LastName`。您应该能够以类似的方式在查询中使用它：

```
$query = "SELECT $imploded From Contact WHERE
    FirstName LIKE '%$var%' OR LastName LIKE '%$var%'
    OR Name LIKE '%$var%' OR Email LIKE '%$var%'"; 
```

您可能还想查看[SOSL](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_sosl.htm)，它允许您跨对象搜索多个字段（或指定您感兴趣的字段）。

# ruby-on-rails - 数字的 Rails 列类型

> ID：11680655
> 
> 赞同：0
> 
> 时间：2012-07-27T02:28:14.643
> 
> 标签：ruby-on-rails

我正在存储数字，例如

```
2,000

5,000

10,000 
```

在具有“整数列”的数据库中。当我在应用程序上显示它们时，它们的显示就像

```
2.0
5.0 
```

是否有一种列类型可以让它们“按原样”显示。我之前尝试过字符串，但字符串排序不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:37:23.723

在 Ruby 中，您还可以像这样输入整数

```
10_000
5_000
2_000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:44:30.400

为了解决这个问题，我在数据库中输入了不带逗号的数字。然后数字出现在应用程序上，例如 10000.0，我曾经`number_to_currency`更改数字以使其看起来像美元值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:04:56.360

整数应该像整数一样出现。如果您尝试在内部插入“2,000”，rails 有效地在其上执行 to_i，这将是 2。（在 irb“2,000”.to_i 和“2_000”.to_i 上尝试此操作以查看 ruby​​ 如何处理整数转换）。

现在，如果您插入 2000 并得到 2000.0，这对于整数列来说不是自然的或预期的。我怀疑该属性正在进行一些后期处理，或者您的数据库是十进制/浮点列。

Rails 控制台 =>

```
"2,000".to_i => 2
"2_000".to_i => 2000
helper.number_to_currency(2000) => "$2,000.00" 
```

# python - Python：从类内部访问静态类变量

> ID：11680656
> 
> 赞同：1
> 
> 时间：2012-07-27T02:28:15.970
> 
> 标签：python, python-3.x, metaprogramming, static-variables, class-variables

所以我正在尝试创建一个扩展列表的类，具有将某些特殊属性映射到引用列表的某些部分的额外能力。使用[这个 Py3k 文档页面](http://docs.python.org/py3k/reference/datamodel.html#customizing-attribute-access)，我创建了以下代码。这个想法是（假设我有`sequence`这个类的一个实例）`sequence.seq`应该完全像`sequence[0]`，并且`sequence.index`应该完全像`sequence[2]`，等等。

它似乎工作得很好，除了我似乎无法访问列表的类变量映射属性。

我发现[了这个 SO question](https://stackoverflow.com/questions/10267620/python-accessing-class-variables-from-other-class-variables-within-the-class)，但是答案有误，或者方法中的某些内容有所不同。我也可以使用`self.__class__.__map__`，但因为我需要里面的类变量`__getattribute__`，所以我进入了一个无限递归循环。

```
>>> class Sequence(list):
...      __map__ = {'seq': 0,
...                 'size': 1,
...                 'index': 2,
...                 'fdbid': 3,
...                 'guide': 4,
...                 'factors': 5,
...                 'clas': 6,
...                 'sorttime': 7,
...                 'time': 8,
...                 'res': 9,
...                 'driver': 10 }
...      
...      def __setattr__(self, name, value): # "Black magic" meta programming to make certain attributes access the list
...           print('Setting atr', name, 'with val', value)
...           try:
...                self[__map__[name]] = value
...           except KeyError:
...                object.__setattr__(self, name, value)
...      
...      def __getattribute__(self, name):
...           print('Getting atr', name)
...           try:
...                return self[__map__[name]]
...           except KeyError:
...                return object.__getattribute__(self, name)
...      
...      def __init__(self, seq=0, size=0, index=0, fdbid=0, guide=None, factors=None, 
...           sorttime=None, time=None):
...                super().__init__([None for i in range(11)]) # Be sure the list has the necessary length
...                self.seq = seq
...                self.index = index
...                self.size = size
...                self.fdbid = fdbid
...                self.guide = ''
...                self.time = time
...                self.sorttime = sorttime
...                self.factors = factors
...                self.res = ''
...                self.driver = ''
... 
>>> a = Sequence()
Setting atr seq with val 0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 31, in __init__
  File "<stdin>", line 17, in __setattr__
NameError: global name '__map__' is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:33:34.240

由于在 after 完全定义之前不会调用任何方法`Sequence`，因此您可以`Sequence.__map__`毫无困难地参考。例如：

```
def __setattr(self, name, value):
    print('Setting atr', name, 'with val', value)
    try:
        self[Sequence.__map__[name]] = value
    except KeyError:
        object.__setattr__(self, name, value) 
```

* * *

顺便说一句，这是一个演示，只要不存在同名的实例属性，就可以通过对象访问类属性：

```
class Foo:
    i = 3
    def __init__(self, overwrite):
        if overwrite:
            self.i = 4

f = Foo(False)
id(f.i) == id(Foo.i)     # Should be True
f = Foo(True)
id(f.i) == id(Foo.i)     # Should be False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T02:31:05.953

您使用点 ( `.`) 访问属性，而不是使用`[]`. Python 不允许您省略`self`引用，因此您需要使用`self.__map__`. 所以如果你想访问那个位置的元素，你需要`self[self.__map__[name]]`.

请注意，将双下划线夹在中间的名称用于您自己的目的并不是一个好主意。即使是两个前导下划线（会进行名称修改）通常也超出您的需要。如果您只想向用户表明该`__map__`属性不是公共 API 的一部分，请调用它`_map`。

# iphone - 如何为 UILabel 的运动设置动画

> ID：11680658
> 
> 赞同：2
> 
> 时间：2012-07-27T02:28:32.710
> 
> 标签：iphone, objective-c, cocoa

我正在我的应用程序中移动 UILabel，我希望它在几帧内更改位置和大小，而不是跳跃位置。我正在为 Iphone 使用 Objective-c 和可可开发。谁能帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T02:34:02.580

最简单的方法是：

```
 CGRect endFrame = /*The frame of your label in end position*/

    [UIView animateWithDuration:0.5 animations:^{ 
        myLabel.frame = endFrame;
   }]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T04:57:50.290

此代码对您的问题有帮助

```
#define FONT_SIZE 14
#define DURATION  10
#define DELAY     10
-(void)viewWillAppear:(BOOL)animated {

  NSString* string = @"My Label";

  CGSize framesize = [string sizeWithFont:[UIFont fontWithName:@"Copperplate" size:FONT_SIZE]];

  // Origin
  float x0 = 0;
  float y0 = 0;

  CGRect  appFrame       = [[UIScreen mainScreen] applicationFrame];
  CGFloat appFrameWidth  = appFrame.size.width;
  CGFloat appFrameHeight = appFrame.size.height;

  // Destination
  float x1 = appFrameWidth - framesize.width;
  float y1 = appFrameHeight - framesize.height;

  UILabel* label = [[UILabel alloc]initWithFrame:CGRectMake(x0, y0, framesize.width, framesize.height)];
  label.backgroundColor = [UIColor clearColor];
  label.text = string;
  label.shadowColor = [UIColor grayColor];
  label.shadowOffset = CGSizeMake(1,2);
  label.font = [UIFont fontWithName:@"Copperplate" size:FONT_SIZE];

  [self.view addSubview:label];

  [UIView animateWithDuration:DURATION
                        delay:DELAY
                      options:UIViewAnimationOptionAllowUserInteraction
                   animations:^{
                       label.frame = CGRectMake(x1, y1, framesize.width, framesize.height);
                   }
                   completion:^(BOOL finished){
                     [label removeFromSuperview];
                   }];
} 
```

# wpf - Combobox 在 WPF 中显示和隐藏 ComboBox 项

> ID：11680660
> 
> 赞同：-2
> 
> 时间：2012-07-27T02:28:36.717
> 
> 标签：wpf, silverlight, user-controls, combobox, dependency-properties

ComboBox 可能有很多项目。

这是我想要实现的场景：

我必须创建一个自定义`ComboBox`，它有一个位于最后一个`ComboBox`项目的“更多”按钮。如果`ComboBox`包含 20 项，最初`ComboBox`单击 并显示下拉列表时，只有 10 项，并显示第 10 项下的“更多”按钮。

每当单击“更多”按钮项目时，“更多”按钮将变为“更少”，下拉列表将显示总共 20 个项目。因此，当单击“减少”按钮时，显示项目将反转回 10 个项目，另外 10 个项目将被隐藏。

10 个初始显示项目只是一个示例。实际上，`ComboBox's`可以通过属性设置初始显示项的总数。

例如： `<local:CustomComboBox x:Name="CustomComboBox" InitialDisplayItem="10" />`

我是 wpf 的新手......我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T04:58:28.463

创建一个自定义控件，例如：

```
public class CrazyCombo : ComboBox
{
    static CrazyCombo()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(CrazyCombo), new FrameworkPropertyMetadata(typeof(CrazyCombo)));
    }

    public int InitialDisplayItem
    {
        get { return (int)GetValue(InitialDisplayItemProperty); }
        set { SetValue(InitialDisplayItemProperty, value); }
    }

    // Using a DependencyProperty as the backing store for InitialDisplayItem.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty InitialDisplayItemProperty =
        DependencyProperty.Register("InitialDisplayItem", typeof(int), typeof(CrazyCombo), new UIPropertyMetadata(0));

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        var moreLessButton = Template.FindName("moreLessButton", this) as Button;

        moreLessButton.Click += new RoutedEventHandler(moreLessButton_Click);
    }

    void moreLessButton_Click(object sender, RoutedEventArgs e)
    {
        var moreLessButton = Template.FindName("moreLessButton", this) as Button;

        if (moreLessButton.Content.ToString() == "More")
        {
            var icv = CollectionViewSource.GetDefaultView(Items);

            icv.Filter = null;
            moreLessButton.Content = "Less";
        }
        else
        {
            var icv = CollectionViewSource.GetDefaultView(Items);

            icv.Filter += o => Items.OfType<object>().Take(InitialDisplayItem).Contains(o);

            moreLessButton.Content = "More";
        }
    }

    protected override void OnItemsSourceChanged(System.Collections.IEnumerable oldValue, System.Collections.IEnumerable newValue)
    {
        base.OnItemsSourceChanged(oldValue, newValue);

        var icv = CollectionViewSource.GetDefaultView(Items);

        icv.Filter += o => Items.OfType<object>().Take(InitialDisplayItem).Contains(o);
    }

} 
```

在 generic.xaml 中，您需要为标准组合框输入整个样式，您可以使用 blend 来获取它。我不会发布它，因为它是huuuuuggge。您将需要更改以下部分：

更改样式以指向您的自定义控件，即

```
 <Style TargetType="{x:Type local:CrazyCombo}"> 
```

在组合框中弹出添加更多/更少按钮

```
<Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                        <Microsoft_Windows_Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=MainGrid}">
                            <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                                <StackPanel>
                                    <ScrollViewer x:Name="DropDownScrollViewer">
                                        <Grid RenderOptions.ClearTypeHint="Enabled">
                                            <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                                <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                            </Canvas>
                                            <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                        </Grid>
                                    </ScrollViewer>
                                    <Button Name="moreLessButton" Content="More"/>
                                </StackPanel>
                            </Border>
                        </Microsoft_Windows_Themes:SystemDropShadowChrome>
                    </Popup> 
```

标准组合框控件模板的唯一添加是行

```
<Button Name="moreLessButton" Content="More"/> 
```

然后，您可以使用自定义控件，例如

```
<Window x:Class="WpfApplication4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication4"
    Title="MainWindow" Height="350" Width="525" Foreground="red">

<StackPanel>

    <local:CrazyCombo x:Name="bah" ItemsSource="{Binding Foo}" InitialDisplayItem="1"/>

</StackPanel> 
```

如果您要真正执行此操作，您将向按钮添加一些触发器，以便它仅在有更多项目时才显示，然后是“InitialDisplayItem”。您可能还会将该按钮设置为切换按钮，而不是我愚蠢的开关代码。

# c# - 使用 PHP 服务器的 C# 程序

> ID：11680661
> 
> 赞同：1
> 
> 时间：2012-07-27T02:28:40.493
> 
> 标签：c#, php

只是好奇解决这个问题的最佳方法。我想制作一个网页，显示 ping 我网络上的所有机器所需的时间。我想要一个 C# 程序来执行 ping 操作并将其报告给网页。我希望能够在网页上单击“Re-ping”，程序重新运行测试。解决此问题的最佳方法是什么？

最大的问题是如何从用户那里得到东西给 C# 程序。

我可以在服务器上发布程序，然后服务器向用户显示，如下所示。

```
User <----> PHP Host <---- C# Program 
```

但是我怎样才能让数据走另一条路呢？

```
PHP Host ---?-->C# Program 
```

我在想这一切都错了吗？

我确实希望 C# 程序处理 ping 和其他事情，因为它具有比根据请求解释的 PHP 主机更复杂的功能（线程、连接等）。

我是否可以让 C# 程序将页面返回给用户并避免使用 PHP 服务器？

欢迎任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:41:17.880

你有很多选择。如果您想避免使用 PHP 服务器，最简单的方法可能是编写一个与[此类](http://www.codeproject.com/Articles/137979/Simple-HTTP-Server-in-C)似的简单 http 服务器。其他选项包括使用带有 C# 后端的 ASP.NET 或 Web 服务，可以从 PHP 脚本或直接由客户端应用程序访问。

# ruby-on-rails - 大型图标集文件夹上的 Rails 资产管道

> ID：11680674
> 
> 赞同：1
> 
> 时间：2012-07-27T02:31:27.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

预编译资产需要非常长的时间（> 10 分钟），因为我在供应商/图像中有大型图标集文件夹。这使得开发非常方便，因为我可以使用所有这些图标，但我使用的图标数量很少。对于这些小图标，我在我的 sass 文件中使用了asset_data_uri 助手。

有没有办法让资产管道不编译所有图像，只编译我使用的那些？或者如果它不能消化编译图像并且只使它们可用于asset_data_uri？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:47:58.367

> 编译后的资产被写入 config.assets.prefix 中指定的位置。默认情况下，这是 public/assets 目录。

您可以`config.assets.prefix`使用要预编译的一组位置进行更新

[http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)

# field - JsonSerializer 字段顺序（不要按字母顺序） - Java

> ID：11680675
> 
> 赞同：0
> 
> 时间：2012-07-27T02:31:33.237
> 
> 标签：field, alphabetical, jsonserializer

我正在使用 JsonSerializer 将对象转换为 JSON 字符串，但顺序错误。属性会自动按字母顺序排序，但我希望它们按照它们在类中列出的顺序（例如“endPoint”不应出现在“startPoint”之前）。

当我调用 JsonSerializer 时。我只看到 4 种方法（toJava 或 toJson）。我尝试在订单中包含内容，但它不起作用/我做得不对。我这样做的方式是这样的：

```
return new String[]{"errorDescription", "searchResultRecord.billOfLadingNumber", 
"searchResultRecord.bookingNumber", "searchResultRecord.advancedManifest", 
"searchResultRecord.inboundCustomsClearanceStatus", "searchResultRecord.cargoReleaseStatus", "searchResultRecord.freightChargeReleaseStatus", 
"searchResultRecord.container.containerNumber", "searchResultRecord.container.latestEvent.event", 
"searchResultRecord.container.latestEvent.location", "searchResultRecord.container.latestEvent.time"}; 
```

如您所见，其中包含 obj.obj.attr 部分。但是当我尝试运行这段代码时，我只在输出字符串中看到“errorDescription”。然后我尝试了没有属性的“searchResultRecord”，但它只在输出中显示了 2 个属性：x

知道如何修复订单，使其不按字母顺序排列吗？所有在线示例似乎都来自具有更易于访问的方法的旧版本的课程~感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:39:21.597

您可以尝试使用

```
@XmlType(propOrder={"startPoint", "endPoint"}) 
```

在您定义为的类上`@XmlRootElement`。这些属性和您想要的任何其他属性都将按照您在 上的定义进行排序`propOrder`。

# c++ - 绑定到一个weak_ptr

> ID：11680680
> 
> 赞同：20
> 
> 时间：2012-07-27T02:32:00.697
> 
> 标签：c++, callback, bind, weak-ptr, std-function

有没有办法将**std::bind 绑定到 std::weak_ptr**？我想存储一个“弱函数”回调，当被调用者被销毁时会自动“断开”。

我知道如何使用 shared_ptr 创建 std::function：

```
std::function<void()> MyClass::GetCallback()
{
    return std::function<void()>(std::bind(&MyClass::CallbackFunc, shared_from_this()));
} 
```

然而，返回的 std::function 让我的对象永远活着。所以我想将它绑定到一个**weak_ptr**：

```
std::function<void()> MyClass::GetCallback()
{
    std::weak_ptr<MyClass> thisWeakPtr(shared_from_this());
    return std::function<void()>(std::bind(&MyClass::CallbackFunc, thisWeakPtr));
} 
```

但这不编译。（std::bind 将不接受weak_ptr！）有没有办法绑定到weak_ptr？

我找到了关于这个的讨论（见下文），但似乎没有标准的实现。存储“弱功能”的最佳解决方案是什么，特别是在 Boost 不可用的情况下？

* * *

讨论/研究（所有这些都使用 Boost 并且没有标准化）：

*   [弱函数](http://lists.boost.org/Archives/boost/2012/01/189510.php)
*   [weak_ptr 绑定](https://svn.boost.org/trac/boost/ticket/810)
*   [“弱”绑定](http://lists.boost.org/boost-users/2011/09/70647.php)（及其[修复](http://lists.boost.org/Archives/boost/2012/01/189529.php)）
*   [弱_fn](http://permalink.gmane.org/gmane.comp.lib.boost.devel/227213)
*   另一个[weak_fn](http://lists.boost.org/Archives/boost/2009/03/149980.php)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T21:38:57.547

```
std::weak_ptr<MyClass> thisWeakPtr(shared_from_this());
return std::function<void()>(std::bind(&MyClass::CallbackFunc, thisWeakPtr)); 
```

你不应该这样做。*曾经。*

`MyClass::CallbackFunc`是类的非静态成员函数`MyClass`。作为非静态成员函数，它*必须*使用*有效*的`MyClass`.

的*全部意义*在于`weak_ptr`它*不一定*有效。您可以通过将其转换为 a 来检测其有效性`shared_ptr`，然后测试指针是否为 NULL。由于`weak_ptr`不能保证在任何时候都有效，因此您*不能*使用一个来调用非静态成员函数。

你所做的并不比以下更有效：

```
std::bind(&MyClass::CallbackFunc, nullptr) 
```

它可能会编译，但当你尝试调用它时它最终会崩溃。

您最好的选择是使用实际逻辑，如果`weak_ptr`无效则不调用回调函数。`bind`不是用来做逻辑的；它只是按照你告诉它的去做：调用函数。因此，您需要使用适当的 lambda：

```
std::weak_ptr<MyClass> thisWeakPtr(shared_from_this());
return std::function<void()>([thisWeakPtr]()
{
  auto myPtr = thisWeakPtr.lock();
  if(myPtr)
    myPtr->CallbackFunc()
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:36:37.187

我能够创建 std::function 的 weak_pointers 并使用 clang-3.2 对其进行测试（您没有给出任何编译器限制）。

这是一个示例应用程序，它创建和测试我认为您要求的内容：

```
#include <functional>
#include <memory>
#include <iostream>

typedef std::function<void(void)> Func;
typedef std::shared_ptr<Func> SharedFunc;
typedef std::weak_ptr<Func> WeakFunc;

void Execute( Func f ) {
    f();
}

void Execute( SharedFunc sf ) {
    (*sf)();
}

void Execute( WeakFunc wf ) {
    if ( auto f = wf.lock() )
        (*f)();
    else
        std::cout << "Your backing pointer went away, sorry.\n";
}

int main(int, char**) {

    auto f1 = [](){ std::cout << "Func here.\n"; };
    Execute( f1 );

    auto f2 = [](){ std::cout << "SharedFunc here.\n"; };
    SharedFunc sf2( new Func(f2) );
    Execute( sf2 );

    auto f3 = [](){ std::cout << "WeakFunc here.\n"; };
    SharedFunc sf3( new Func(f3) );
    WeakFunc wf3( sf3 );
    Execute( wf3 );

    // Scoped test to make sure that the weak_ptr is really working.
    WeakFunc wf4;
    {
        auto f4 = [](){ std::cout << "You should never see this.\n"; };
        SharedFunc sf4( new Func(f4) );
        wf4 = sf4;
    }
    Execute( wf4 );

    return 0;
} 
```

输出是：

```
~/projects/stack_overflow> clang++-mp-3.2 --std=c++11 --stdlib=libc++ weak_fun.cpp -o wf && ./wf
Func here.
SharedFunc here.
WeakFunc here.
Your backing pointer went away, sorry. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-29T19:00:07.337

```
#include <iostream>
#include <string>
#include <memory>
#include <functional>
using namespace std;

template < typename T > class LockingPtr {
    std :: weak_ptr < T > w;
public:
    typedef shared_ptr < T > result_type;
    LockingPtr ( const std :: shared_ptr < T > & p ) : w ( p ) { }
    std :: shared_ptr < T > lock ( ) const {
        return std :: shared_ptr < T > ( w );
    }
    std :: shared_ptr < T > operator-> ( ) const {
        return lock ( );
    }
    template < typename ... Args > std :: shared_ptr < T > operator( ) ( Args ... ) const {
        return lock ( );
    }
};

template < typename T > LockingPtr < T > make_locking ( const shared_ptr < T > & p ) {
    return p;
}

namespace std {
    template < typename T > struct is_bind_expression < LockingPtr < T > > :
        public true_type { };
}

int main() {
    auto p = make_shared < string > ( "abc" );
    auto f = bind ( & string :: c_str, make_locking ( p ) );
    cout << f ( ) << '\n';
    p.reset ( );
    try {
    cout << f ( ) << '\n';
    } catch ( const exception & e ) {
        cout << e.what ( ) << '\n';
    }
    // your code goes here
    return 0;
} 
```

输出：

```
abc
bad_weak_ptr 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-09T16:52:50.987

我知道这是一个老问题，但我有同样的要求，我相信我并不孤单。

对我来说，最终的解决方案是返回一个函数对象，该对象返回一个 boost::optional<> 取决于函数是否被调用。

代码在这里：

```
#include <boost/optional.hpp>
#include <memory>

namespace value { namespace stdext {

    using boost::optional;
    using boost::none;

    struct called_flag {};

    namespace detail
    {
        template<class Target, class F>
        struct weak_binder
        {
            using target_type = Target;
            using weak_ptr_type = std::weak_ptr<Target>;

            weak_binder(weak_ptr_type weak_ptr, F f)
            : _weak_ptr(std::move(weak_ptr))
            , _f(std::move(f))
            {}

            template<class...Args,
            class Result = std::result_of_t<F(Args...)>,
            std::enable_if_t<not std::is_void<Result>::value>* = nullptr>
            auto operator()(Args&&...args) const -> optional<Result>
            {
                auto locked_ptr = _weak_ptr.lock();
                if (locked_ptr)
                {
                    return _f(std::forward<Args>(args)...);
                }
                else
                {
                    return none;
                }

            }

            template<class...Args,
            class Result = std::result_of_t<F(Args...)>,
            std::enable_if_t<std::is_void<Result>::value>* = nullptr>
            auto operator()(Args&&...args) const -> optional<called_flag>
            {
                auto locked_ptr = _weak_ptr.lock();
                if (locked_ptr)
                {
                    _f(std::forward<Args>(args)...);
                    return called_flag {};
                }
                else
                {
                    return none;
                }

            }

            weak_ptr_type _weak_ptr;
            F _f;
        };
    }

    template<class Ret, class Target, class...FuncArgs, class Pointee, class...Args>
    auto bind_weak(Ret (Target::*mfp)(FuncArgs...), const std::shared_ptr<Pointee>& ptr, Args&&...args)
    {
        using binder_type = decltype(std::bind(mfp, ptr.get(), std::forward<Args>(args)...));
        return detail::weak_binder<Target, binder_type>
        {
            std::weak_ptr<Target>(ptr),
            std::bind(mfp, ptr.get(), std::forward<Args>(args)...)
        };
    }
}} 
```

像这样调用（例如）：

```
TEST(bindWeakTest, testBasics)
{

    struct Y
    {
        void bar() {};
    };

    struct X : std::enable_shared_from_this<X>
    {

        int increment(int by) {
            count += by;
            return count;
        }

        void foo() {

        }

        Y y;

        int count = 0;
    };

    auto px = std::make_shared<X>();

    auto wf = value::stdext::bind_weak(&X::increment, px, std::placeholders::_1);
    auto weak_call_bar = value::stdext::bind_weak(&Y::bar, std::shared_ptr<Y>(px, &px->y));

    auto ret1 = wf(4);
    EXPECT_TRUE(bool(ret1));
    EXPECT_EQ(4, ret1.get());

    auto wfoo1 = value::stdext::bind_weak(&X::foo, px);
    auto retfoo1 = wfoo1();
    EXPECT_TRUE(bool(retfoo1));

    auto retbar1 = weak_call_bar();
    EXPECT_TRUE(bool(retbar1));

    px.reset();
    auto ret2 = wf(4);
    EXPECT_FALSE(bool(ret2));

    auto retfoo2 = wfoo1();
    EXPECT_FALSE(bool(retfoo2));

    auto retbar2 = weak_call_bar();
    EXPECT_FALSE(bool(retbar2));

} 
```

此处提供源代码和测试： [https ://github.com/madmongo1/valuelib](https://github.com/madmongo1/valuelib)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-17T06:15:30.090

`weak_ptr`您可以作为参数之一绑定到函数，
并在调用函数时对其进行检查。

例如：

```
std::function<void()> MyClass::GetCallback()
{
    std::weak_ptr<MyClass> thisWeakPtr(shared_from_this());
    return std::function<void()>(std::bind(&MyClass::CallbackFunc, this,
                                           thisWeakPtr));
}

void MyClass::CallbackFunc(const std::weak_ptr<MyClass>& thisWeakPtr)
{
  if (!thisWeakPtr.lock()) {
    return;
  }

  // Do your callback job.
  // ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T14:53:25.623

这个怎么样？它仅适用于动作`std::function<void()>`，但也许可以推广到任意参数化的函数。

```
#include <memory>
#include <functional>

template<typename T>
void 
perform_action_or_ignore_when_null(
    std::weak_ptr<T> weak, 
    std::function< void( std::shared_ptr<T> ) > func
    )
{
    if(auto ptr = weak.lock())
        func(ptr);
}

template<typename T>
std::function<void()> 
ignore_when_null(
    std::weak_ptr<T> weak, 
    std::function< void( std::shared_ptr<T> ) > func
    )
{
    return std::bind(perform_action_or_ignore_when_null<T>, weak, func);
} 
```

这是一个示例用法：

```
struct Foo {
    Foo() {}
    void bar() { 
        std::cout << "hello world!" << std::endl;
    }
};

void main()
{
  std::weak_ptr<Foo> weakfoo;
  std::function<void(std::shared_ptr<Foo>)> foobar = std::bind(&Foo::bar, std::placeholders::_1);
  {
     auto foo = std::make_shared<Foo>();
     weakfoo  = foo;

     auto f = ignore_when_null(weakfoo, foobar);
     f(); // prints "hello world!";
   }

   auto g = ignore_when_null(weakfoo, foobar);
   g(); // does nothing
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-01T20:36:35.277

不知道为什么该定义不在提升中。必须有充分的理由（如何处理锁失败？从那里抛出是否可以接受？线程安全？）无论如何，这将验证你的被调用者。

```
namespace boost {

template<class T> T * get_pointer(boost::weak_ptr<T> const& p)
{
  boost::shared_ptr< T > _strong = p.lock();
  if( _strong )
   return _strong.get();
  else
    throw 1;
}

}

int main(int arg, char *argv[])
{
  boost::weak_ptr< MyType > weak_bad;
  {
    boost::shared_ptr< MyType > strong(new MyType);
    boost::weak_ptr< MyType > weak(strong);
    boost::function< void(int) > _func1 = boost::bind(&MyType::setX, weak, _1);
    _func1(10);
    weak_bad = strong;
  }

  try {
    boost::function< void(int) > _func1 = boost::bind(&MyType::setX, weak_bad, _1);
    _func1(10);
  }
  catch(...)
  {
    std::cout << "oops!";
  }

  return 0;
}; 
```

另一种解决方案：

您可以包装 std::function。产生回调的类将持有一个 shared_ptr< wrapper_type > 并提供一个 weak_ptr< wrapper_type >。生产对象将是拥有所有权的对象，如果它超出范围，调用者将无法提升他们的弱引用。您的包装器类型可以将调用参数转发给 std::function 或简单地通过其接口公开它。只需确保在复制时正确处理包装器上的 shared_ptr （不要共享）。

```
template< typename _Ty >
struct wrapper
{
  wrapper(_Ty wrappe) 
    : _wrappe(wrappe)
  { }

  _Ty _wrappe;
};

...
boost::shared_ptr< wrapper < std::func< ... > > _func(new wrapper < std::func< ... > );

...
boost::weak_ptr< wrapper < std::func< ... > getCallBack() {
  return _func;
} 
```

# php - exec 在 PHP 中无法正确执行

> ID：11680685
> 
> 赞同：1
> 
> 时间：2012-07-27T02:32:46.863
> 
> 标签：php, cmd

我正在使用 PHP 文件运行 cmd 命令，但命令没有正确执行，可能是什么原因？

我的 php 文件执行 cmd 命令：

```
<?php
exec("C:\wamp\php\php.exe -e C:\wamp\htdocs\Me\mail.php me@gmail.com you");
?> 
```

mail.php 文件：

```
<?php
$subject = "Please check out";
$headers = "From: chico@uniserveit.com\n";

$content = "First check"; 
$fp = fopen("C:/xampp/htdocs/Me/checking.txt","wb"); 
fwrite($fp,$content); 
fclose($fp);

mail($argv[0], $subject, $argv[1], $headers);
?> 
```

既没有创建文件，也没有发送邮件，我认为命令没有正确执行，那么我应该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:34:09.700

也许功能**exec()**在您的配置中被禁用。

检查 php.ini 中的参数**disabled_function**并尝试在 httpd.conf 中关闭安全模式 **php_admin_value safe_mode off**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:34:59.040

在您的第一个示例中，您应该在传递给 exec 的字符串中使用 / 而不是 \。\ 用于转义字符，不能用作路径分隔符。如果字符串中必须有 \，则必须对其进行转义，如 "c:\\abc\\def"。您实际上尝试执行“C:wampphpphp.exe -e C:wamphtdocsMemail.php me@gmail.com you”，这很可能无法执行。将第二个和第三个参数添加到 exec()，然后检查第三个参数是否有错误返回值。

在第二段代码中，您创建的文件永远不会被引用。

# java - 连接到 USB 销售点打印机 Java API

> ID：11680687
> 
> 赞同：0
> 
> 时间：2012-07-27T02:32:54.677
> 
> 标签：java, com, usb

我们已经建立了一个很好的销售点。我已经通过 COM 端口连接解决了点阵打印机和终端打印机的实现。是否有用于连接 USB 销售点打印机的 Java API？

如果不是，我最近看到 USB 设备可以模拟为虚拟 COM 设备。是否可以为 USB Pos 打印机执行此操作？另外，一切都应该在 linux 上运行（因为部署操作系统是 Fedora）。

我已经尝试使用[jUSB](http://jusb.sourceforge.net/) api，但未能将其安装在计算机上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:33:54.253

我想到的最佳解决方案是使用 COM 端口写入，因为 Linux 检测带有虚拟 COM 端口的 USB 打印机......

# jsf - 如何在jsf单元中显示丰富的：modalPanel？

> ID：11680692
> 
> 赞同：1
> 
> 时间：2012-07-27T02:33:34.833
> 
> 标签：jsf, richfaces, jsfunit

我正在运行一个`jsf`单元测试，它包括测试是否显示模态，我想测试模态内部的一些动作，但`isDisplayed`总是错误的。

有什么我在这里想念的吗。

这是我的一段代码：

```
 HtmlSelect mSelection = (HtmlSelect) client.getElement("selecID");
        assertTrue( mSelection.isDisplayed() );
        assertFalse( mSelection.isDisabled() );

        HtmlOption mOption = mOption .getOptionByValue("18");
        mOption .setSelected(true);
        try {
            mOption .click();
        } catch (IOException e2) {
            e2.printStackTrace();
        }

        System.out.println(" SELECTED = " + mOption .getText());        
         HtmlButtonInput goButton = (HtmlButtonInput) client.getElement("goButton");
        assertTrue( goButton.isDisplayed() );
        assertFalse( goButton.isDisabled() );
        try {
            goButton.click();

        } catch (IOException e) {
        }

        try {
            Thread.sleep(10000);

        } catch (InterruptedException e1) {    
            e1.printStackTrace();
        }

            //This part is inside the modal
        HtmlSelect mmSetSelection = (HtmlSelect) client.getElement("mmSelection");
        assertTrue( mmSetSelection!= null );

        System.out.println(" IS DIAPLED? = " + mmSetSelection.isDisplayed() ); 
```

# actionscript-3 - AS3：如何自动声明多个对象

> ID：11680693
> 
> 赞同：0
> 
> 时间：2012-07-27T02:33:51.503
> 
> 标签：actionscript-3

我正在尝试自动初始化和填充多个对象及其相关属性。

基本上我有一个 32x32 的网格，对于网格上的每个位置，我想分配一个具有多个属性的对象，以便以后引用。

一个 32x32 的网格上有 1024 个位置，我真的不想手动编写那么多变量声明。我在一个单独的类文件中设置了数组，它允许我将一个变量分配给一个网格位置：*gridPos.put(x, y, object.property);*

我还设置了一对 for 循环，它将使用默认的起始数据填充对象。

现在我需要做的是让它为我声明具有唯一名称的对象，然后用起始数据填充它们。这些对象需要可以从代码的其他部分访问（我试图将它们声明为 public var *gridPosTile[h] : Object = new Object;*但将其声明为“公共”它给了我一个错误，说它*“1114：公共属性只能在包内使用。”*）

*另外，我知道 [h] 是不对的，但这有点像我在脑海中看到的那样......请照亮我:)

非常感谢

```
 public function gridPosTilePopulate():void
    {

        var g: int = 40;
        var h: int = 1;

        for(var i:int = 0; i < 32; i++)
        {
            var v: int = 40;

            g += 40;

            for(var q:int = 0; q < 32; q++)
            {
                var gridPosTile[h] : Object = new Object;

                gridPos.put(i, q, gridPosTile[h]);

                gridPosTile[h].xPos = (v + 40));
                gridPosTile[h].yPos = (g + 40));
                gridPosTile[h].p1Set = false);
                gridPosTile[h].p2Set = false);
                gridPosTile[h].m1Set = false);
                gridPosTile[h].m2Set = false);
                gridPosTile[h].m3Set = false);
                gridPosTile[h].m4Set = false);
                gridPosTile[h].coinSet = false);
                gridPosTile[h].powerupSet = false);

                v += 40;
                h++;

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:50:51.597

您没有发布完整的课程，所以我无法告诉您为什么会出现 1114 错误。
我将首先向您的类添加一个属性来存储 gridPosTitle 对象。您应该使用数组集合或向量。在我的示例中，我将使用 arrayCollection。
此存储集合将允许您轻松引用您创建的所有图块。
要添加动态名称属性，您需要做的就是使用括号表示法。
最后删除所有对“h”的引用，因为除了命名对象之外不需要它。

```
package com.example{
    public class SomeClassName{

      // storage var for future use.
      public var tileStorage:ArrayColelction
      public function gridPosTilePopulate():void
      {
        tileStorage = new ArrayCollection()

        var g: int = 40;
        var h: int = 1;

        for(var i:int = 0; i < 32; i++)
        {
            var v: int = 40;

            g += 40;

            for(var q:int = 0; q < 32; q++)
            {
                var gridPosTile : Object = new Object;

                gridPos.put(i, q, gridPosTile);

                gridPosTile.xPos = (v + 40));
                gridPosTile.yPos = (g + 40));
                gridPosTile.p1Set = false);
                gridPosTile.p2Set = false);
                gridPosTile.m1Set = false);
                gridPosTile.m2Set = false);
                gridPosTile.m3Set = false);
                gridPosTile.m4Set = false);
                gridPosTile.coinSet = false);
                gridPosTile.powerupSet = false);

                v += 40;
                h++;
                // here we add the name property
                // try to never use keywords on dynamic classes since sometimes they may already be used
                gridPosTile.myName = "tile_" + h;
                tileStorage.additem(gridPosTile)

            }
        }
      }
    }
  } 
```

# sql-server - Sql Server 如何根据任意值数组从多个表中删除？

> ID：11680698
> 
> 赞同：0
> 
> 时间：2012-07-27T02:34:18.947
> 
> 标签：sql-server

我有一个任意值列表，我想使用 T-SQL 删除多个表中的记录。我想在将来重新使用具有不同值列表的脚本。这仅用于调试目的（我只是想清除记录，以便可以使用新版本的软件重新导入），所以它不需要漂亮。

到目前为止，我有：

```
DECLARE @RequestIDList table(Request_ID nvarchar(50) NOT NULL)
INSERT INTO @RequestIDList (Request_ID) VALUES 
('00987172'), 
('01013218'), 
('01027886'), 
('01029552'), 
('01031476'), 
('01032882'), 
('01033085'), 
('01034446'), 
('01039261')
DELETE FROM Request WHERE Request_ID IN (SELECT Request_ID FROM @RequestIDList)
DELETE FROM RequestTest WHERE Request_ID IN (SELECT Request_ID FROM @RequestIDList) 
```

它似乎有效，但有更好的方法吗？我似乎无法弄清楚如何直接使用带有 IN 子句的变量（例如“WHERE Request_ID IN @RequestIDList”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:38:49.543

快速脚本：

```
SET NOCOUNT ON

-- Temp table so it can be joined against in dynamic SQL
IF OBJECT_ID('tempdb..#RequestIDList') IS NOT NULL 
  DROP TABLE #RequestIDList
GO

CREATE TABLE #RequestIDList (Request_ID nvarchar(50) NOT NULL)
INSERT INTO #RequestIDList (Request_ID) VALUES 
('00987172'),('01013218'),('01027886'),('01029552'), 
('01031476'),('01032882'),('01033085'),('01034446'), 
('01039261')

DECLARE @TableList TABLE (TableName NVARCHAR(128) NOT NULL) 
INSERT @TableList VALUES 
('Request'),
('RequestTest')

DECLARE 
  @sqlcmd VARCHAR(4000),
  @table  VARCHAR(128)

-- Loop through the tables in your delete list
DECLARE c CURSOR LOCAL FORWARD_ONLY STATIC READ_ONLY FOR
SELECT TableName
FROM @TableList
ORDER BY TableName

OPEN c 
FETCH NEXT FROM c INTO @table
WHILE @@FETCH_STATUS = 0 
BEGIN 

  -- Assuming all tables in schema dbo
  -- Assuming all tables have column Request_ID
  SET @sqlcmd = 'DELETE FROM t FROM ' + QUOTENAME(@table) 
              + ' t JOIN #RequestIDList r ON r.Request_ID = t.Request_ID'

  -- PRINT @sqlcmd
  EXEC (@sqlcmd) 
  FETCH NEXT FROM c INTO @table
END

CLOSE c 
DEALLOCATE c

-- Clean up
DROP TABLE #RequestIDList 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:08:59.740

首先，您需要创建一个解析输入的函数

```
CREATE FUNCTION inputParser (@list nvarchar(MAX))
RETURNS @tbl TABLE (number int NOT NULL) AS
BEGIN
DECLARE @pos        int,
   @nextpos    int,
   @valuelen   int

SELECT @pos = 0, @nextpos = 1

WHILE @nextpos > 0
BEGIN
SELECT @nextpos = charindex(',', @list, @pos + 1)
SELECT @valuelen = CASE WHEN @nextpos > 0
                      THEN @nextpos
                      ELSE len(@list) + 1
                 END - @pos - 1
INSERT @tbl (number)
  VALUES (convert(int, substring(@list, @pos + 1, @valuelen)))
SELECT @pos = @nextpos
END
RETURN
END 
```

然后在 SP 中使用该函数

```
CREATE PROCEDURE usp_delete
@RequestIDList varchar(50) 
AS
Begin
 DELETE FROM Request as req inner join 
 inputParser (@RequestIDList) i on req.Request_ID = i.number
End

EXEC usp_delete '1, 2, 3, 4' 
```

有关更多详细信息，请查看[本文](http://www.sommarskog.se/arrays-in-sql-2005.html)。它解释了不同的方法，具体取决于 sql server 版本。对于 SQl server 2008，它使用 TVP，这进一步简化了输入解析器

# hibernate - 休眠迭代表中满足连接的多表的所有行

> ID：11680700
> 
> 赞同：0
> 
> 时间：2012-07-27T02:34:24.590
> 
> 标签：hibernate, hibernate-mapping

我是新来的hiberante。需要指出正确的方向。

我需要遍历表“target_table”中的所有记录，其中有基于其他表的附加约束

提供所需数据记录的 sql 是

```
select target_table.id, .... 
  from  person,  
        target_table, 
        another_table 
 where person.id = target_table.person_Id 
   and target_table.dropEventId = another_table.id 
   and another_table.to_Vendor_Timestamp < to_date('Jul 29 2012','MON dd YYYY') 
   and person.identifyer = 'foobar'; 
```

不确定获取这些记录的最佳方法是什么。有人可以推荐正确的方法吗？目前我开始做一些事情

```
Criteria criteria = session.createCriteria(TargetTable.class);
Criteria personCriteria = criteria.createCriteria("person");
personCriteria.add(Restriction.equal("idenifyier",identifyier);
Criteria anotherTableConstriant = constriant.add("another_table");
anotherTableConstraint.add(Restriction.lessthan("toVendorTimeStamp", someDateObject); 
```

但是我如何获得其余的约束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:36:14.570

永远不要将 Hibernate 视为“使用 SQL/DB 的另一种方式”。您应该始终确保您拥有正确的实体以及实体之间的关系。

从您的示例看来，您应该具有 Target->Another（称为 dropEvent）和 Target->Person（假设是人）的关系。

HQL 就像

```
from Target t
where t.person.identifier = :someId
  and t.dropEvent.vendorTimeStamp < :someTime 
```

如果你发现自己仍然总是想加入表格等，很可能是你没有正确使用 Hibernate。在这种情况下，我发现 Hibernate 不会帮助你。如果您的应用程序是以数据库为中心的思维方式设计的，请考虑使用 iBatis。

# php - INSERT 语句之谜 - mysql_query 返回 true，但数据库中没有出现新行

> ID：11680706
> 
> 赞同：4
> 
> 时间：2012-07-27T02:35:52.860
> 
> 标签：php, mysql, insert

我一定在这里做的很愚蠢。我已经解决了 3 天的问题，但没有运气。

这是发送到 mysql_query() 的 PHP 字符串：

```
insert into post_replies (postID, fromID, toID, status) values ($id, $userID, $toID, ".g_unread.") 
```

在你说“啊哈哈，SQL肯定有错误”之前，请注意以下两点：

1.  mysql_query() 返回真 (1)
2.  我在发送到 mysql_query() 之前将字符串导出到文本文件（见下文） - 如果我将导出的文本粘贴到相同的 mysql_query() 语句中，它工作正常（出现新行） - 如果将导出的文本粘贴到 phpMyAdmin，它工作正常（出现新行）
3.  *精确的*（我的意思是*精确的*，因为我只是复制并粘贴它）相同的查询被使用了几行，它总是工作正常

我尝试的另一件事是从文本中加载查询*，*然后将其发送到 mysql_query() - 但这会产生相同的奇怪行为 - 它返回成功 (1)，但实际上没有插入新行。

我已经向另一个抱怨我的 PHP 编码风格的程序员展示了这个。他说 INT 应该包装成字符串，我应该在它们周围使用花括号（例如'{$id}'）。但是，当然这并没有解决任何问题，行为完全相同。如果字符串生成有问题，那么问题将出现在导出到文本文件的查询中，然后再发送到 mysql_query()。他还抱怨我使用过时的 mysql 函数（我应该使用 mysqli 函数）。但是，这并不能解释为什么我通过 mysql_query() 发送的数百个其他查询可以正常工作，包括该查询下方几行的查询。如果我将导出到文本文件的文本直接粘贴到 mysql_query() 中，它没有解释为什么查询工作正常。

非常感谢。我完全迷失在这里。

更新#1：根据要求，这里是语句周围的代码：

```
$q = "insert into post_replies (postID, fromID, toID, status) values ($id, $userID, $toID, ".g_unread.")";
$result = mysql_query($q);
if ($result == true) {
    z($q);
} else {
    z('failure');
} 
```

z() 是我用来轻松导出到文本文件的函数。顺便说一句，查询总是发送到 z()，永远不会发送“失败”。

以下是发送到文本文件的示例：

```
insert into post_replies (postID, fromID, toID, status) values (2039, 8, 1, 1) 
```

请记住，如果我将该文本粘贴到 phpMyAdmin 或上面的 mysql_query() 函数中，则会插入该行。

更新#2：由于一些人的关注，我更新了这部分代码以使用 mysql[i]

```
$mysqli = new mysqli(g_db_server, g_db_user, g_db_pass, g_db);
$result = $mysqli->query($q); 
```

我现在建立一个单独的连接，只针对这个单一的查询。但是，行为完全相同。它返回 true，但不创建新闻行。但是，如果我将 $q 导出到一个文本文件，然后将该文本粘贴到上面的 $mysqli->query() 中，它可以正常工作并且新行会按预期创建。

由于每个人似乎都放弃了，我现在正在努力将问题隔离到单个 MySQL 表/PHP 文件，任何人都可以下载并自己尝试。

更新#3：解决了！有点。似乎是周围代码的问题，导致插入后删除了行。但是，这仍然不能解释为什么 mysql_insert_id() 返回 0。也许 mysql_insert_id() 在复合键上中断。无论如何，我不在乎 - 因为它是固定的。我会把支票交给@user1231958，因为他的答案是最接近的。非常感谢大家的帮助，很抱歉被 mysql_insert_id() 欺骗了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:31:46.373

在指定表格和行时尝试使用重音，

```
$q = "INSERT INTO `post_replies` (`postID`, `fromID`, `toID`, `status`) VALUES ('$id', '$userID', '$toID', '".g_unread."')";

$result = mysql_query($q);
    if ($result == true) {
        z($q);
    } else {
        z('failure');
    } 
```

告诉我这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:34:44.663

有什么`mysql_error()`回报吗？这可能很糟糕，但是您在执行插入时是否连接到正确的数据库？

您还可以在 mysql 中启用查询日志记录以记录所有查询。Howtogeek 有[一篇](http://www.howtogeek.com/howto/database/monitor-all-sql-queries-in-mysql/ "在 Mysql 中记录查询")关于启用此功能的文章。服务器重新启动后，您应该开始看到所有查询都记录到您指定的文件中。我的看起来像这样。

```
/opt/local/libexec/mysqld, Version: 5.1.61-log (Source distribution). started with:
Tcp port: 3306  Unix socket: /opt/local/var/run/mysql5/mysqld.sock
Time                 Id Command    Argument
120727  8:57:09     1 Connect   root@localhost on foo
            1 Query /* test comment */ insert into test(foo) values(NOW())
            1 Quit 
```

既然您可以监视所有进入 mysql 服务器的查询，请在查询前加上注释以在日志中识别它。我使用下面的 PDO 代码来生成上面的日志。

```
$dbh = new PDO("mysql:host=localhost;dbname=foo",'root','');
$dbh->exec("/* test comment */ insert into test(foo) values(NOW())"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:49:08.833

我遇到了这样的问题。我发现问题出在没有默认值的字段上……我最近从 Linux 服务器转到 Windows 服务器，在使用 Linux 时一定有点懒惰。

问题是，当使用我的 Linux 服务器时，我不必将每个字段都放入 INSERT 查询中，由于某种原因（我不确定为什么），它似乎为我默认了它们，但是，我的 Windows 服务器使用确实如此，mysqli错误函数说某些字段没有默认值，添加这些字段对我来说效果很好。

我知道这个问题已经得到解答，但这可能会帮助其他有同样问题的人，毕竟我不希望别人把头发拉出来 3 天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-11T13:47:52.207

你必须检查是否有东西阻止你提交你的命令，在执行查询后尝试这个命令：mysql_query("COMMIT;");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-20T22:37:53.040

我刚刚遇到这个问题并发现了问题。

如果不知何故，您的表没有正确的主键自动增量，它将返回 true 但实际上不会插入新行。

# php - file_get_contents() 给我 403 Forbidden

> ID：11680709
> 
> 赞同：25
> 
> 时间：2012-07-27T02:36:13.083
> 
> 标签：php, html, http-headers, screen-scraping

我有一个合作伙伴为我创建了一些内容供我抓取。
我可以使用浏览器访问该页面，但是在尝试使用 user 时`file_get_contents`，我得到一个`403 forbidden`.

我试过使用`stream_context_create`，但这没有帮助 - 可能是因为我不知道那里应该放什么。

1）我有什么办法可以抓取数据吗？
2）如果没有，并且不允许合作伙伴配置服务器允许我访问，我该怎么办？

我尝试使用的代码：

```
$opts = array(
  'http'=>array(
    'user_agent' => 'My company name',
    'method'=>"GET",
    'header'=> implode("\r\n", array(
      'Content-type: text/plain;'
    ))
  )
);

$context = stream_context_create($opts);

//Get header content
$_header = file_get_contents($partner_url,false, $context); 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-27T02:44:40.790

这在您的脚本中不是问题，它是您合作伙伴 Web 服务器安全性中的一项功能。

很难说到底是什么阻碍了你，很可能是某种阻止抓取的阻碍。如果您的合作伙伴可以访问他的网络服务器设置，它可能有助于查明。

您可以做的是通过设置用户代理标头来“伪造网络浏览器”，以便它模仿标准的网络浏览器。

我建议使用 cURL 来执行此操作，并且很容易找到执行此操作的好文档。

```
 // create curl resource
    $ch = curl_init();

    // set url
    curl_setopt($ch, CURLOPT_URL, "example.com");

    //return the transfer as a string
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');

    // $output contains the output string
    $output = curl_exec($ch);

    // close curl resource to free up system resources
    curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-27T03:04:14.003

//先设置用户代理

```
ini_set('user_agent','Mozilla/4.0 (compatible; MSIE 6.0)'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T02:50:08.977

我有两件事，如果您要打开一个带有特殊字符（例如空格）的 URI，则需要使用 urlencode() 对 URI 进行编码，并且如果 fopen 包装器有，则可以使用此函数将 URL 用作文件名已启用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-20T21:19:00.847

此外，如果由于某种原因您正在请求 http 资源，但该资源存在于您的服务器上，如果您只是将文件包含为绝对路径，则可以为自己节省一些麻烦。

喜欢：`/home/sally/statusReport/myhtmlfile.html`
而不是
`https://example.org/myhtmlfile.html`

# javascript - 我应该使用 Meteor.startup() 还是 $(function() {})

> ID：11680710
> 
> 赞同：15
> 
> 时间：2012-07-27T02:36:14.553
> 
> 标签：javascript, meteor

他们做同样的事情吗？

我应该在客户端使用哪一个？

```
if ( Meteor.is_client ) {
    Meteor.startup(function () {
        // my code here
    });
} 
```

或者

```
if ( Meteor.is_client ) {
    $(function() {
        // my code here
    });
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T23:04:06.950

据我所知， （在客户端）与 jQuery 的功能`Meteor.startup`非常相似。`$`使用它的主要优点是它在客户端和服务器上是相同的 API，所以如果你想在客户端和服务器上运行的文件中编写启动代码，`Meteor.startup`就可以了。（此外，我个人发现`Meteor.startup`它比`$`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-22T18:24:15.423

我刚刚遇到了一个`$`在模板渲染之前调用的问题，所以我不得不使用 Meteor.startup

所以我想说，如果你需要使用你必须使用的 DOM 元素`Meteor.startup`（我将它用于 jQuery File Upload 插件）

# android - Android - BaseAdapter - XML、ListView、按钮

> ID：11680713
> 
> 赞同：1
> 
> 时间：2012-07-27T02:36:24.977
> 
> 标签：android, xml, listview, baseadapter

我是一名 iOS 开发人员，正在跳转到 Android 以移植我正在从事的项目，但我似乎未能掌握 Android 的自定义 BaseAdapter 的一些概念。我正在开发一个从站点解析 XML 并将 XML 元素中的文本填充到 ListView 中的应用程序。我的 XML 解析部分没有问题。我遇到的问题是在列表视图的每一行中添加一个按钮。我了解设置 OnClick 侦听器的概念，并且我需要实现一个 BaseAdapter，但我似乎无法将我的数据从我的主要活动获取到我设置的包含我的 BaseAdapter 的类。现在，启动应用程序时数据不会显示。我已经进行了一些调试并验证了 menuItems ArrayList 中的数据已正确发送到 BaseAdapter 类，我 我只是不知道如何让它显示在 ListView 中。这可能是非常小的东西，我想我只是看了太久，没有看到它。任何帮助将不胜感激。下面列出了代码和布局 XML。

```
public class Podcasts extends ListActivity{

private static final String HASHMAP_ID = "_id";
private CustomAdapter adap;

static final String URL = "http://www.undignified.podbean.com/feed";

//XML Node Keys
static final String KEY_ITEM  = "item";
static final String KEY_TITLE = "title";
static final String KEY_DESCRIPTION = "itunes:subtitle";
static final String KEY_PODCASTURL = "enclosure";

public static final  ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState); 

    setContentView(R.layout.podcasts); 

    //Instance of XML parser
    UndigParser uparser = new UndigParser();

    String xml = uparser.getXmlFromURL(URL);        

    Document doc = uparser.getDomElement(xml);    

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);

    for(int i = 0; i < nl.getLength(); i++){

        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);

        map.put(KEY_TITLE, uparser.getValue(e, KEY_TITLE));
        map.put(KEY_DESCRIPTION, uparser.getValue(e, KEY_DESCRIPTION));
        map.put(KEY_PODCASTURL, uparser.getValue(e, KEY_PODCASTURL));

        menuItems.add(map);
    }

     adap = new CustomAdapter(this, menuItems, R.layout.list_item, new String[] {KEY_TITLE, KEY_DESCRIPTION, KEY_PODCASTURL}, new int[]{ R.id.title, R.id.description, R.id.podcasturl});
    //adap = new CustomAdapter(this, menuItems);

    setListAdapter(adap);

public static class CustomAdapter extends BaseAdapter implements Filterable{

    private LayoutInflater mInflater;
    private Context context;

    public CustomAdapter(Context context, ArrayList<HashMap<String, String>> menuItems, int listItem, String[] strings, int[] is){

        mInflater = LayoutInflater.from(context);
        this.context = context;
    }

    public View getView(final int position, View convertView, ViewGroup parent){
        ViewHolder holder;

        if(convertView==null){
            convertView = mInflater.inflate(R.layout.list_item, null);

            holder = new ViewHolder();
            holder.description=(TextView)convertView.findViewById(R.id.description);
            holder.podcasturl=(TextView)convertView.findViewById(R.id.podcasturl);
            holder.title=(TextView)convertView.findViewById(R.id.title);
            holder.downloadBTN=(Button)convertView.findViewById(R.id.btnStartDownload);

            convertView.setOnClickListener(new OnClickListener(){
                private int pos = position;

                @Override
                public void onClick(View v){
                    Toast.makeText(context, "Text-" + String.valueOf(pos), Toast.LENGTH_SHORT).show();
                }
            });

            holder.downloadBTN.setOnClickListener(new OnClickListener(){
                private int pos = position;

                @Override
                public void onClick(View v){
                    Toast.makeText(context, "Button-"+String.valueOf(pos), Toast.LENGTH_SHORT).show();
                }
            });
            convertView.setTag(holder);
        }else{
            holder = (ViewHolder)convertView.getTag();
        }

        return convertView;
    }

    static class ViewHolder{
        TextView description;
        TextView title;
        TextView podcasturl;
        Button downloadBTN;
    }

    @Override
    public int getCount() {
        // Currently set to zero. If I set it to menuItems.size() it will crash the app.
        return 0;
    }

    @Override
    public Object getItem(int position) {

        return null;
    }

    @Override
    public long getItemId(int position) {

        return 0;
    }

    @Override
    public Filter getFilter() {

        return null;
    }
} 
```

XML 布局 - list_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:padding="5dip">

<LinearLayout
android:id="@+id/LinearLayout01"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
xmlns:android="http://schemas.android.com/apk/res/android">

<Button
    android:id="@+id/startPodcastDownload"
    android:layout_width="50dip"
    android:layout_height="50dip"
    android:focusable="false"
    android:text="Download Podcast"> 
</Button>        

</LinearLayout>    
    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/LinearLayout01"
        android:textColor="#acacac"
        android:paddingBottom="2dip">
    </TextView>
    <TextView
        android:id="@+id/description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/LinearLayout01"
        android:layout_below="@id/title"
        android:textColor="#acacac"
        android:paddingBottom="2dip">
    </TextView>
    <TextView
        android:id="@+id/podcasturl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/LinearLayout01"
        android:layout_below="@+id/description"
        android:textColor="#acacac"
        android:paddingBottom="2dip">
    </TextView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:06:57.790

```
@Override
    public int getCount() {
        return menuItems.size();
    }

    @Override
    public Object getItem(int position) {

        return position;
    } 
```

还要进行以下更改：

```
adap = new CustomAdapter(this, menuItems, R.layout.list_item, new String[] {KEY_TITLE, KEY_DESCRIPTION, KEY_PODCASTURL}, new int[]{ R.id.title, R.id.description, R.id.podcasturl}); 
```

到：

```
adap = new CustomAdapter(YourActivityName.this, menuItems); 
```

并将适配器的构造函数创建为：

```
public CustomAdapter(Context context, ArrayList<HashMap<String, String>> menuItems) 
```

您已将适配器的计数定义为 0，因此如何获取列表中的任何值。您的应用程序崩溃，没关系，但您必须得到`Log's`该错误。无论您获得的列表为空还是什么，只要在此处粘贴错误因为你必须得到`NullPointerException`你必须得到一些另一个错误。

# java - 标准抽奖是按键跳过阶段

> ID：11680714
> 
> 赞同：0
> 
> 时间：2012-07-27T02:36:49.483
> 
> 标签：java

在标准绘图中有一个`isKeyPressed()`功能。该函数返回一个`boolean`指示参数是否被按下。

在我正在制作的基于文本的游戏中，用户将按下`y`或`n`确定结果。有时，但并非总是如此，会跳过以下故事文本。这是我的代码。我在eclipse中运行这个。这不是我的全部代码，但我认为问题出在哪里。

```
while(true){

else if(stage == 6){

StdDraw.textLeft(0, 700,"'so, ya name's "+ name + ", huh?'");

StdDraw.textLeft(0, 680,"'What an odd name if i do say so.'");

StdDraw.textLeft(0, 660,"'you're lucky i found you when i did, the dark forest is dangerous!'");

StdDraw.textLeft(0, 620,"'So, you heading to Ivangard, right?'(y/n)");
            counter = 1;

if(StdDraw.isKeyPressed('Y')&&frame%8==0){

stage = 7;

            }
else if (StdDraw.isKeyPressed('N')&&frame%8==0){
                    stage = 9;
            }
        }
else if(stage == 7){

StdDraw.textLeft(0, 700,"'well lucky you! i'm going in the same direction!'");

    StdDraw.textLeft(0, 680,"'Well i'm Program "+ random +", nice to meet you.'");

    StdDraw.textLeft(0, 660,"'take this rusty dagger. may be of use!'");

    StdDraw.textLeft(0, 640,"'ill see you in Ivangaurd!'");

                    StdDraw.textLeft(0, 500,"continue?(O)");

                    if(StdDraw.isKeyPressed('O')&&frame%12==0){

                        stage = 11;

                        programn = random;

                        fist = 0;

                        rustyd = 1;

                }

                }

            else if(stage == 9){

        StdDraw.textLeft(0, 700,"'Well, if you need me, ill be in Ivangaurd'");

        StdDraw.textLeft(0, 680,"'I'm Program #"+ random +", nice to meet you.'");

        StdDraw.textLeft(0, 660,"'take this rusty dagger. may be of use!'");

                StdDraw.textLeft(0, 620,"continue?(O)");

                counter = 1;

                programn = random;

                fist = 0;

                rustyd = 1;

                if(StdDraw.isKeyPressed('O')&&frame%12==0){

                    stage = 11;

            }

            }

else if(stage == 11){

        StdDraw.textLeft(0, 700,"Part 2: The virus");

    StdDraw.textLeft(0, 660,"as you leave the dark forest, The voice comes back");

    StdDraw.textLeft(0, 640,"A great evil is coming to this land.");

        StdDraw.textLeft(0, 620,"a virus, a plague the program...");

        StdDraw.textLeft(0, 600,"unlike the program, all the virus does is eat.");

                StdDraw.textLeft(0, 580,"That is why we need you.");

StdDraw.textLeft(0, 560,"you are human, uneatable to the virus. All other warriors would fall were you stand.");

                StdDraw.textLeft(0, 540,"continue?(0)");

                if(StdDraw.isKeyPressed('O')&&frame%12==0){

                    stage = 10;

                }

            }

} 
```

问题出在 y/n 选项之后，它会跳过以下文本。

新文本在这里。我是新手编码员，所以我可能不明白你告诉我要做什么。

```
else if(stage == 6){
            StdDraw.textLeft(0, 700,"'so, ya name's "+ name + ", huh?'");
            StdDraw.textLeft(0, 680,"'What an odd name if i do say so.'");
            StdDraw.textLeft(0, 660,"'you're lucky i found you when i did, the dark forest is dangerous!'");
            StdDraw.textLeft(0, 620,"'So, you heading to Ivangard, right?'(y/n)");
            counter = 1;
            if(StdDraw.isKeyPressed('Y')&&frame%8==0){
                stage = 7;

            }
            if(StdDraw.isKeyPressed('N')&&frame%8==0){
                stage = 9;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T04:30:59.263

`StdDraw.isKeyPressed()`接受一个`int`不是`char`

```
public static boolean isKeyPressed(int keycode) 
```

> 如果当前正在按下键码，则返回 true，否则返回 false

[StdDraw.isKeyPressed](http://introcs.cs.princeton.edu/java/stdlib/javadoc/StdDraw.html#isKeyPressed%28int%29)

有关键码的描述，请参见[KeyEvent.java](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyEvent.html)。

**更新：** OP要求举个例子：

```
if(StdDraw.isKeyPressed(KeyEvent.VK_Y) {
   // True if the 'y' key is currently being pressed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T02:51:44.567

好的，您尝试更改 else-if 语句的执行路径。你不能这样做。

```
if (animal == sheep) {

   System.out.println("Fox in a sheep skin");
   animal = fox;

} else if (animal == fox) {

   System.out.println("hide the sheep");

} 
```

现在基本上，如果`animal == sheep`然后执行第一条语句，否则如果执行`animal == fox`第二条语句。您无法更改侧边的流程，因为它已经决定了执行路径。

就像来到岔路口，只能单向走，不能双向走……

```
if (animal == sheep) {

   System.out.println("Fox in a sheep skin");
   animal = fox;

} 

if (animal == fox) {

   System.out.println("hide the sheep");

} 
```

会做你想做的事，它更昂贵，因为它需要检查条件，但它会强制执行流通过每个语句。

**更新**

我怀疑您误解了在哪里进行更改（没有任何证据可以说明，很难知道）

这应该是它的样子（为了便于阅读，我把文本语句去掉了）

```
if(stage == 6){

    //... some text

    if(StdDraw.isKeyPressed('Y')&&frame%8==0){
        stage = 7;
    } else if (StdDraw.isKeyPressed('N')&&frame%8==0){
        stage = 9;
    }
}

if(stage == 7){

    //... some text

    if(StdDraw.isKeyPressed('O')&&frame%12==0){

        stage = 11;

        programn = random;

        fist = 0;

        rustyd = 1;

    }

}

if(stage == 9) {

    //... some text

    if(StdDraw.isKeyPressed('O')&&frame%12==0){

        stage = 11;

    }

}

if(stage == 11){

    //... some text

    if(StdDraw.isKeyPressed('O')&&frame%12==0){

        stage = 10;

    }

} 
```

# xml - xsl - 最后一个前面的兄弟

> ID：11680716
> 
> 赞同：5
> 
> 时间：2012-07-27T02:36:54.700
> 
> 标签：xml, xslt, siblings

我陷入了与前一个兄弟姐妹相关的逻辑，

尽量保持 XML 简单。

```
<order>
<orderList>
<itemid><id>100</id></itemid>
<itemid><id>100</id></itemid>
<itemid><id>111</id></itemid>
<itemid><id>111</id></itemid>
<itemid><id>123</id></itemid>
<itemid><id>324</id></itemid>
<itemid><id>244</id></itemid>
<itemid><id>244</id></itemid>
 </orderList>
</order> 
```

我正在尝试使用以下 xsl 为每个节点查找前一个兄弟节点。我需要为每个循环使用这个逻辑来适应更大的 xsl ......

```
 <html>
  <body>
     <table border="1">
   <xsl:for-each select="order/orderList/itemid">
      <tr>
        <td>itemid</td>
        <td><xsl:value-of select="id" /> </td>
        <td> <xsl:value-of select="preceding-sibling::node()"/>   </td>
      </tr>
      </xsl:for-each>
    </table>    
  </body>
  </html>
</xsl:template>

I get these Results 

itemid 100  
itemid 100 100   
itemid 111 100 
itemid 111 100   - expecting 111
itemid 123 100   - expecting 111 etc
itemid 324 100 
itemid 244 100 
itemid 244 100 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T02:48:19.310

在 XSLT 1.0 中，当给定节点集时，xsl:value-of 返回该节点集中第一个节点的字符串值，按文档顺序获取。（XSLT 2.0 返回节点集中所有节点的字符串值）。

previous-sibling::node() 返回一个节点集，其中包含一个节点的所有前面的兄弟节点。

如果您只想要最后一个前面的兄弟，请使用preceding-sibling::*[1]。

# jquery - 当我访问我的图像属性时，JQuery 返回未定义

> ID：11680718
> 
> 赞同：0
> 
> 时间：2012-07-27T02:37:02.923
> 
> 标签：jquery

我的 html 文档上有一张图片，我这样写：

```
<img src="picture.jpg:/> 
```

我在 jquery 中通过以下方式引用它：

```
$('img').click( function() {
    alert($(this).attr('width'));
}); 
```

它捕获事件但返回未定义的值。还有其他方法可以提取宽度和高度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:40:41.883

```
 alert($(this).css('width')); 
```

将获得宽度值， attr 只是读取您设置的属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T02:41:31.510

采用

```
$('img').click( function() {
    alert($(this).width());
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/BHsvm/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T02:45:20.780

`src`在attr上缺少 " 。

```
<img src="picture.jpg"/> 
```

改为使用`prop`，`attr`始终返回 true。[示例](http://jsfiddle.net/zVx8s/7/)使用
[示例](http://jsfiddle.net/zVx8s/8/)`prop`

或者没有 jQuery`alert(this.width);`

# google-app-engine - 尝试获取 Google 云端硬盘文件时出错

> ID：11680719
> 
> 赞同：1
> 
> 时间：2012-07-27T02:37:04.717
> 
> 标签：google-app-engine, google-drive-api

尝试使用以下方式获取 Google 云端硬盘文件时出现错误：

```
file = service.files().get(fileId=<googleDriveFileId>).execute() 
```

错误是：

```
<HttpError 404 when requesting https://www.googleapis.com/drive/v2/files/0B6Cpn8NXwgGPQjB6ZlRjb21ZdXc?alt=json returned "File not found: 0B6Cpn8NXwgGPQjB6ZlRjb21ZdXc"> 
```

但是，当我像这样直接在浏览器中复制并粘贴该链接时： [https ://www.googleapis.com/drive/v2/files/0B6Cpn8NXwgGPQjB6ZlRjb21ZdXc?alt=json](https://www.googleapis.com/drive/v2/files/0B6Cpn8NXwgGPQjB6ZlRjb21ZdXc?alt=json)

我得到一个不同的错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "dailyLimitExceededUnreg",
    "message": "Daily Limit Exceeded. Please sign up",
    "extendedHelp": "https://code.google.com/apis/console"
   }
  ],
  "code": 403,
  "message": "Daily Limit Exceeded. Please sign up"
 }
} 
```

我什至没有超过每日限制，控制台显示使用率为 0%。我知道 fileId 是正确的，我正在使用 Google Picker 来获取 fileId。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:02:11.193

我在其他地方发现这是他们正在努力解决的 Google Drive 的已知问题。他们提供了以下我已确认有效的解决方法。

在构建选择器时添加以下内容：

```
enableFeature(google.picker.Feature.MULTISELECT_ENABLED). 
```

完整代码：

```
var picker = new google.picker.PickerBuilder().
        addView(view).
        addView(uploadView).
        setAppId("pressomatic").
        setCallback(pickerCallback).
        enableFeature(google.picker.Feature.MULTISELECT_ENABLED).
        build();
    picker.setVisible(true); 
```

当尝试使用 DocsUploadView 上的 setParent 使用 Google Picker 上传到特定文件夹时，同样的解决方法解决了我发布的另一个问题。您仍然将相同的功能添加到 Picker，而不是 DocsUploadView，并且一切正常。

# c - 在 32 位机器上实现 64 位算法

> ID：11680720
> 
> 赞同：5
> 
> 时间：2012-07-27T02:37:15.027
> 
> 标签：c, assembly, x86

以下代码计算 x 和 y 的乘积并将结果存储在内存中。数据类型 ll_t 被定义为等价于 long long。

```
typedef long long ll_t;
void store_prod(ll_t *dest, int x, ll_t y) {
    *dest = x*y;
} 
```

gcc 生成以下实现计算的汇编代码：dest at %ebp+8, x at %ebp+12, y at %ebp+16

```
1 movl 16(%ebp), %esi
2 movl 12(%ebp), %eax
3 movl %eax, %edx
4 sarl $31, %edx
5 movl 20(%ebp), %ecx
6 imull %eax, %ecx
7 movl %edx, %ebx
8 imull %esi, %ebx
9 addl %ebx, %ecx
10 mull %esi
11 leal (%ecx,%edx), %edx
12 movl 8(%ebp), %ecx
13 movl %eax, (%ecx)
14 movl %edx, 4(%ecx) 
```

此代码使用三个乘法来实现在 32 位机器上实现 64 位算术所需的多精度算术。描述用于计算产品的算法，并注释汇编代码以显示它如何实现您的算法。

***我不明白上面汇编代码中的第 8 行和第 9 行。任何人都可以帮忙吗？***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T03:54:30.997

我已将其转换为 intel 语法。

```
mov esi, y_low
mov eax, x
mov edx, eax
sar edx, 31
mov ecx, y_high

imul ecx, eax ; ecx = y_high *{signed} x

mov ebx, edx

imul ebx, esi ; ebx = sign_extension(x) *{signed} y_low

add ecx, ebx ; ecx = y_high *{signed} x_low + x_high *{signed} y_low

mul esi ; edx:eax = x_low *{unsigned} y_low

lea edx, [ecx + edx] ; edx = high(x_low *{unsigned} y_low + y_high *{signed} x_low + x_high *{signed} y_low)

mov ecx, dest
mov [ecx], eax
mov [ecx + 4], edx 
```

上面的代码所做的是将 2 个 64 位有符号整数相乘，保持乘积的最低有效 64 位。

另一个 64 位被乘数从何而来？它从 32 位`x` *符号扩展*为 64 位。该`sar`指令用于将`x's`符号位复制到`edx`. 我称这个值仅由`x's`符号组成`x_high`。`x_low`是`x`实际传递到例程中的值。

`y_low`和`y_high`是 的最不重要和最重要的部分`y`，就像`x's` `x_low`和`x_high`是一样。

从这里开始很容易：

乘积 = `y`*{signed} `x`=
( `y_high`* 2 ^(32) + `y_low`) *{signed} ( `x_high`* 2 ^(32) + `x_low`) =
`y_high`*{signed} `x_high`* 2 ^(64) +
`y_high`*{signed} `x_low`* 2 ^(32) +
`y_low`*{signed} `x_high`* 2 ^(32) +
`y_low`*{签}`x_low`

`y_high`*{signed} `x_high`* 2 ^(64)未计算，因为它不影响乘积的最低有效 64 位。如果我们对完整的 128 位产品（挑剔的完整 96 位产品）感兴趣，我们会计算它。

`y_low`*{signed}`x_low`使用无符号乘法计算。这样做是合法的，因为 2 的补码有符号乘法给出与无符号乘法相同的最低有效位。示例：
-1 *{signed} -1 = 1
0xFFFFFFFFFFFFFFFF *{unsigned} 0xFFFFFFFFFFFFFFFF = 0xFFFFFFFFFFFFFFFE0000000000000001（64 个最低有效位相当于 1）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T03:12:10.897

考虑第 8 行和第 9 行的上下文。

此时，`ESI`包含 的下半部分`y`和`EBX`包含`sgn(x)`。所以第 8 行只是计算`sgn(x) * (y % 2^32)`并将其存储在`EBX`.

第 9 行利用了该结果。到第 9 行发生时，`ECX`包含乘法的部分上半部分，即有`x * (y >> 32)`符号。所以`EBX+ECX`最终是我们在最后一步计算的加上我们在前一行找到的部分上半部分。

完整的算法本身非常简洁；）

编辑：回应下面的评论......

第 4 行：考虑`SAR EDX, 31`（或者如果你喜欢，`sar $31, %edx`）真正的含义。由于`EDX`是 32 位寄存器，因此您最终会得到两个值之一。哪两个？考虑它们在有符号算术上下文中的含义。

第 7 行：`EDX`此时包含对以下操作非常有用的内容。我只是把它移到它需要去的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T02:57:43.060

imul 所做的是将 eax 的内容与 ecx 相乘，并将低 32 位保存在 eax 中，将高 32 位保存在 edx 中。

addl 据我记得添加了两个寄存器并将其保存在第一个寄存器中，因此在本例中为 ebx。（我不确定它是否还有其他作用，addl 之后的 l 代表很长时间）

# c++ - 在 C++ 中使用带有列表的迭代器时遇到问题

> ID：11680721
> 
> 赞同：0
> 
> 时间：2012-07-27T02:37:31.500
> 
> 标签：c++, list, multidimensional-array, iterator

我正在编写一个算法来检查 C++ 中检查器中的重复移动，但我在使用`iterator`.

这是我的代码：

```
static std::list<char[8][8]> duplicates;   

    char checkForDuplicates[8][8];
    for(char i = 0;i < 8;i++)
        for(char j = 0;j < 8;j++)
            checkForDuplicates[i][j] = board[i][j];
    bool isDuplicate = false;
    for(std::list<char[8][8]>::iterator it = duplicates.begin(); it != duplicates.end(); it++)
    {
        for(char i = 0;i < 8;i++)
        {
            for(char j = 0;j < 8;j++)
            {
                if(checkForDuplicates[i][j] != it->[i][j])
                    //do something
            }
        }
    } 
```

我特别需要这条线的帮助：

```
if(checkForDuplicates[i][j] != it->[i][j]) 
```

我正在尝试将列表中的数组元素与另一个数组元素进行比较，但我不知道如何使用`list iterator`. 有人可以帮助我提供示例和/或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:40:29.370

而不是`it->[i][j]`使用`(*it)[i][j]`. 该`->`符号仅在您访问成员时使用，但您的列表包含数组，而不是类或结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:00:47.623

如果您从迭代器创建对对象的引用，可能会更容易理解。之后，您可以像往常一样访问它。

```
static std::list<char[8][8]> duplicates;   

    char checkForDuplicates[8][8];
    for(char i = 0;i < 8;i++)
        for(char j = 0;j < 8;j++)
            checkForDuplicates[i][j] = board[i][j];
    bool isDuplicate = false;
    for(std::list<char[8][8]>::iterator it = duplicates.begin(); it != duplicates.end(); it++)
    {
        char (&thisBoard)[8][8] = *it;  # <--
        for(char i = 0;i < 8;i++)
        {
            for(char j = 0;j < 8;j++)
            {
                if(checkForDuplicates[i][j] != thisBoard[i][j])
                    //do something
            }
        }
    } 
```

# windows - 流星更新在Windows上下载失败

> ID：11680722
> 
> 赞同：2
> 
> 时间：2012-07-27T02:37:31.887
> 
> 标签：windows, meteor

当我尝试在 Windows 上更新 Meteor 时出现此错误。在此处使用 git bash，但在命令提示符下出现相同的错误。

该文件是否根本不存在，或者这里发生了什么，已经有几天了，所以我只是好奇文件是否存在，因为它还没有真正在 Windows 上得到正式支持？

```
$ meteor update
New version available: 0.3.8
Failed to download: https://d3sqy0vbqsdhku.cloudfront.net/meteor-package-Windows
_NT-i686-0.3.8.tar.gz 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:03:09.277

Windows 上尚未正式支持它。您需要依靠每周检查[win.meteor.com](http://win.meteor.com)来获取更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:58:26.477

我相信你的假设是正确的，它并没有真正在 Windows 上得到正式支持。我也遇到了同样的错误，并且已经尝试了一切来解决它。我尝试手动搜索这个包，但找不到它。

# mysql - 为用户信息构建 MySQL 数据库

> ID：11680728
> 
> 赞同：0
> 
> 时间：2012-07-27T02:38:19.643
> 
> 标签：mysql, structure

我对 MySQL 很陌生，我知道大多数基本功能以及如何发送查询等。但是，我正在尝试学习如何构建它以优化搜索用户信息，并想获得一些想法。

现在我只有一个名为 user_info 的表（用于功能目的和测试），它保存用户信息，另一个表存储链接到用户的照片。理想情况下，id 喜欢大多数此类信息，以便尽可能快地访问

在创建一个主要用于存储和检索用户信息（姓名、年龄、电话、消息等）的数据库时，为每个存储所有信息的新用户创建一个新表是一个好主意，这样一个表user_info 不会因多次查询、锁定等而陷入困境。例如，用户 john smith 将在数据库中拥有自己的表，其中包含他的所有信息，包括照片、消息等。

或者

最好只有几个表，例如 user_info、user_photos、user_messages 等。并以这种方式访问​​数据。

我不担心表格中的冗余，例如用户电子邮件地址被重复多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:42:20.250

后者是最好的方法。您为用户声明一个表，并为您想要的数据声明几列。

现在，如果您希望用户拥有照片，则需要一个带有照片的新表和一个链接到用户表的**Primary Key的****外键**属性。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T02:42:32.710

您绝对不应该为每个用户创建一个新表。为 user_info 创建一张表，如果每个用户可以拥有多张照片，则为照片创建一张表。一个消息表可能包含两个 user_id 列（user_to、user_from）和一个消息列。尽量规范化数据。

```
Users
====
id
email
etc

Photos
====
id
user_id
meta_data
etc

Messages
====
id
user_id_to
user_id_from
message
timestamp
etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T03:43:53.087

我同意这里提供的两个答案，但他们还没有提到的一件事是查找表。

考虑这里的一般示例：您有一个用户表和一个照片表。现在您想在您的网站上引入一项功能，允许用户“收藏”其他用户的照片。

与其创建一个名为“Favorites”的新表并重新添加有关图像的所有数据（字段位置、元数据、分数/其他），不如创建一个有效地位于其他两个表之间的表。

```
+-----------------------+      +-------------------------------------+
| ++ users              |      | ++ photos                           |
| userID | email | name |      | photoID | ownerID | fileLo | etc... |
+--------+-------+------|      +---------+---------+--------+--------+
| 1      | ....  | Tom  |      | 35      | 1       | .....  | .......|
| 2      | ....  | Rob  |      | 36      | 2       | .....  | .......|
| 3      | ....  | Dan  |      | 37      | 1       | .....  | .......|
+--------+-------+------+      | 43      | 3       | .....  | .......|
                               | 48      | 2       | .....  | .......|
                               | 49      | 3       | .....  | .......|
                               | 53      | 2       | .....  | .......|
                               +---------+---------+--------+--------+

+------------------+
| ++ Favs          |
| userID | photoID |
+--------+---------+
| 1      | 37      |
| 1      | 48      |
| 2      | 37      |
+--------+---------+ 
```

使用这种方法，您可以干净、高效地链接您拥有的数据，而无需过多的数据复制。**

# c# - C# 串口写字节

> ID：11680730
> 
> 赞同：3
> 
> 时间：2012-07-27T02:38:48.473
> 
> 标签：c#, serial-port, byte, send

在 C# 中将单个字节写入 .NET 4.0 中的串行端口会导致

> 用户代码未处理 InvalidOperationException

每次向 SerialPort 发送一个字节。

如何将单个字节写入串行端口？

```
 //Serial Init
    //Full fledged constuctor
    public NetCommManager(String portName, TransmissionType trans, String baud, String parity, String stopBits, String dataBits)
    {
        nc_baudRate = baud;
        nc_parity = parity;
        nc_stopBits = stopBits;
        nc_dataBits = dataBits;
        nc_portName = portName;
        nc_transType = trans;

        //now add an event handler
        comPort.DataReceived += new SerialDataReceivedEventHandler(netComm_DataReceived);
    } 
```

配置：

```
 _commManger = new NetCommManager(commPortNumber,                        
       NetCommManager.TransmissionType.Text, "19200", "None", "One", "8"); 
```

要写入的字节：

```
_commManager.WriteByte(Convert.ToByte( 0x7B)); 
```

`WriteByte`功能是：

```
public void WriteByte(byte data)
        {
            //change data to array
            //byte[] dataArray = new byte[1];
            var dataArray = new byte[] {data};
            //dataArray[0] = data;
            comPort.Write(dataArray, 0, 1);   // <-- Exception is thrown here
        } 
```

NetCommManager 类非常基于[这个例子](http://www.dreamincode.net/forums/topic/35775-serial-port-communication-in-c%23/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T04:57:13.283

你忘`Open()`了：http `comPort`: [//msdn.microsoft.com/en-us/library/ms143551.aspx](http://msdn.microsoft.com/en-us/library/ms143551.aspx)

# jquery - JQuery - ScrollTop 锁定滚动条

> ID：11680733
> 
> 赞同：1
> 
> 时间：2012-07-27T02:39:14.040
> 
> 标签：jquery

我遇到了滚动条锁定[的问题，这里是我的问题的演示](http://jsfiddle.net/QzJbT/2/)。

问题是，当您单击“我是新人”并使用“ScrollTop”滚动到元素时，滚动条会锁定几秒钟。这是正常的吗？

我希望有一个简单的解决方案或一个简单的替代方案（希望如此）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:58:43.713

从 jQuery 中删除以下内容

```
 $('html, body').animate({
                scrollTop: $("#new_content").offset().top
            }, 1000); 
```

从 `$("#new_link").click(` , 和所有项目接缝​​工作并且滚动条中没有锁定

# php - PHP - 水印 PNG 透明度/Alpha

> ID：11680734
> 
> 赞同：5
> 
> 时间：2012-07-27T02:39:19.767
> 
> 标签：php, watermark

我知道这已经被覆盖了很多次，但我一直在尝试不同的脚本并修改我拥有的脚本，但我*仍然*无法让我的 PNG-24 watermark.png 在我的父图像顶部透明。

这是我目前拥有的：

```
<?

header('content-type: image/jpeg');

$watermark = imagecreatefrompng('watermark.png');
$watermark_width = imagesx($watermark);
$watermark_height = imagesy($watermark);

$image = imagecreatefromjpeg($imageURL);
$image = imagecreatetruecolor($watermark_width, $watermark_height);
$size = getimagesize($imageURL);

imagealphablending($image, false);
imagesavealpha($image, true);

$dest_x = $size[0] - $watermark_width - 5;
$dest_y = $size[1] - $watermark_height - 5;

imagecopymerge($image, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height, 100);

imagejpeg($image);

imagedestroy($image);
imagedestroy($watermark);

?> 
```

我刚刚阅读了另一个 SO 问题，其中一个答案建议如果您不添加这两行，它将不透明：

```
imagealphablending($image, false);
imagesavealpha($image, true); 
```

我添加了它们，但仍然没有。我尝试设置标题并输出为PNG，但仍然没有运气。我在浏览器中加载了水印（原始），它绝对是透明的，但不是在图像上。这肯定不会那么难吧？任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-27T03:30:39.453

这不是应用程序代码的问题，而是水印图像 (PNG) 本身的问题。

很多水印示例/教程说要使用 PNG-24 水印，但根据我刚刚阅读的博客，他们说`imagecopymerge`不能很好地处理 PNG-24 文件，因此，使用 PNG-8 和一些特殊的“保存为网络”设置。我这样做了，现在效果很好。

以下是[此博客](http://salman-w.blogspot.com/2008/11/watermark-your-images-with-another.html)中有关 PNG 类型的相关部分：

> 水印图像应采用以下推荐格式之一：
> 
> *   PNG-8（推荐）
>     颜色：256 或更少
>     透明度：开/关
> *   GIF
>     颜色：256 或更少
>     透明度：开/关
> *   JPEG
>     颜色：真彩色
>     透明度：不适用
> 
> imagecopymerge 函数无法正确处理 PNG-24 图像；因此不建议这样做。
> 
> 如果您使用 Adob​​e Photoshop 创建水印图像，建议您使用“Save for Web”命令并进行以下设置：
> 
> ```
> File Format: PNG-8, non-interlaced
> Color Reduction: Selective, 256 colors
> Dithering: Diffusion, 88%
> Transparency: On, Matte: None
> Transparency Dither: Diffusion Transparency Dither, 100% 
> ```

* * *

为了其他人的利益，这是我拥有的水印代码：

```
<?
$masterURL = 'mydomain.com/myImage.jpg';

header('content-type: image/jpeg');
$watermark = imagecreatefrompng('watermark.png');
$watermark_width = imagesx($watermark);
$watermark_height = imagesy($watermark);
$image = imagecreatetruecolor($watermark_width, $watermark_height);
$image = imagecreatefromjpeg($masterURL);
$size = getimagesize($masterURL);
$dest_x = $size[0] - $watermark_width - 5;
$dest_y = $size[1] - $watermark_height - 5;
imagecopymerge($image, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height, 100);
imagejpeg($image);
imagedestroy($image);
imagedestroy($watermark);
?> 
```

经过更多阅读（对同一篇文章的[评论](http://salman-w.blogspot.com/2008/11/watermark-your-images-with-another.html?showComment=1345978146955#c3947848442031211061)），我发现您可以使用 PNG-24 水印，但可以`imagecopy`使用`imagecopymerge`. 您可以替换此行：

```
imagecopymerge($image, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height, 100); 
```

有了这个：

```
imagecopy($image, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height); 
```

使用`imagecopymerge`PNG-8 水印非常适合“动态”水印，因为水印文件很小。如果您在“幕后”添加水印，则文件大小并不重要，您可以从 PNG-24 水印中获得更好的质量，使用`imagecopy`.

我希望这可以帮助那些困惑的水印。

# sql-server - 将 T-SQL 左连接子查询转换为 MS-Access

> ID：11680740
> 
> 赞同：2
> 
> 时间：2012-07-27T02:40:09.047
> 
> 标签：sql-server, tsql, ms-access, jet, data-conversion

我需要帮助来将此 T-SQL 查询转换为 MS ACCESS。我得到的错误是不支持 JOIN 表达式。

更新：

我不能添加：

DDA ON TT.[描述] = DDA.AccountTypeDesc AND H.AccountNumber = DDA.AccountNumber

但

DDA ON TT.[描述] = DDA.AccountTypeDesc

作品。有没有办法添加第二个条件？

T-SQL 查询：

```
SELECT
    *
FROM
(
    SELECT
        [PesoAmount] = CASE WHEN FE.IsoCode IS NULL THEN
            LTRIM(STR(DFCF.CurrencyAmount, 20, 2))
        ELSE
            LTRIM(STR(DFCF.CurrencyAmount * FE.PhpConversionRate, 20, 2))
        END,
        DFCF.TransactionNumber,
        DFCF.AccountNumber,
        DFCF.CountryCd,
        DFCF.TransactionTypeCd,
        DFCF.Time,
        DFCF.Date,
        DFCF.TransactionStatusCd,
        DFCF.TransactionCurrencyCd,
        DFCF.BranchNumber,
        DFCF.RemitterExtPartyCd,
        DFCF.BeneficiaryExtPartyCd,
        DFCF.PostedDate,
        DFCF.AssociateNumber,
        DFCF.ExecutingPartyNumber,
        DFCF.CurrencyAmount,
        DFCF.CurrencyAmountInTxnCcy,
        DFCF.CurrencyAmountInAccountCcy,
        DFCF.SecondaryAccountKey,
        DFCF.RelatedInd,
        DFCF.ThirdPartyInd,
        DFCF.TransactionDescription,
        DFCF.SecurityName,
        DFCF.DealNumber
    FROM
        dbo.DesFactCashFlow DFCF (NOLOCK)                                            LEFT JOIN
        dbo.ForeignExchange   FE (NOLOCK) ON DFCF.TransactionCurrencyCd = FE.IsoCode
)
                           H                                                                                          LEFT JOIN
    dbo.Ctr                C (NOLOCK) ON H.PesoAmount                           = C.PesoAmountFaceValueSumInsured AND
                                         H.AccountNumber                        = C.AccountNumber                 AND
                                         H.TransactionTypeCd                    = C.TransactionType                   LEFT JOIN
    dbo.TransactionType   TT (NOLOCK) ON H.TransactionTypeCd                    = TT.Code                             LEFT JOIN
(
    SELECT
        [AccountNumber]               = DDA2.AccountNumber,
        [AccountTypeDesc]             = DDA2.AccountTypeDesc,
        [LineOfBusinessName]          = MAX(DDA2.LineOfBusinessName),
        [AccountCurrencyCode]         = MAX(DDA2.AccountCurrencyCode),
        [AccountCurrencyName]         = MAX(DDA2.AccountCurrencyName),
        [AccountRegistrationTypeDesc] = MAX(DDA2.AccountRegistrationTypeDesc),
        [AccountRegistrationName]     = MAX(DDA2.AccountRegistrationName),
        [AccountName]                 = MAX(DDA2.AccountName),
        [AlternateName]               = MAX(DDA2.AlternateName),
        [AccountOpenDate]             = MAX(DDA2.AccountOpenDate),
        [AccountCloseDate]            = MAX(DDA2.AccountCloseDate),
        [AccountStatusDesc]           = MAX(DDA2.AccountStatusDesc),
        [DormantInd]                  = MAX(DDA2.DormantInd),
        [ProductLineName]             = MAX(DDA2.ProductLineName),
        [ProductCategoryName]         = MAX(DDA2.ProductCategoryName),
        [ProductTypeName]             = MAX(DDA2.ProductTypeName),
        [ProductName]                 = MAX(DDA2.ProductName),
        [ProductNumber]               = MAX(DDA2.ProductNumber),
        [AccountTaxId]                = MAX(DDA2.AccountTaxId),
        [AccountTaxIdTypeCode]        = MAX(DDA2.AccountTaxIdTypeCode),
        [AccountTaxStateCode]         = MAX(DDA2.AccountTaxStateCode),
        [AccountPrimaryBranchName]    = MAX(DDA2.AccountPrimaryBranchName),
        [MailingAddress1]             = MAX(DDA2.MailingAddress1),
        [MailingAddress2]             = MAX(DDA2.MailingAddress2),
        [MailingCityName]             = MAX(DDA2.MailingCityName),
        [MailingStateCode]            = MAX(DDA2.MailingStateCode),
        [MailingStateName]            = MAX(DDA2.MailingStateName),
        [MailingPostalCode]           = MAX(DDA2.MailingPostalCode),
        [MailingCountryCode]          = MAX(DDA2.MailingCountryCode),
        [MailingCountryName]          = MAX(DDA2.MailingCountryName),
        [CurrencyBasedAccountInd]     = MAX(DDA2.CurrencyBasedAccountInd),
        [MaturityDate]                = MAX(DDA2.MaturityDate),
        [OriginalLoanAmount]          = MAX(DDA2.OriginalLoanAmount),
        [CollateralTypeDesc]          = MAX(DDA2.CollateralTypeDesc),
        [CollateralTypeCode]          = MAX(DDA2.CollateralTypeCode),
        [InsuredAmount]               = MAX(DDA2.InsuredAmount),
        [EmployeeInd]                 = MAX(DDA2.EmployeeInd)
    FROM
        dbo.DesDimAccount DDA2 (NOLOCK)
    GROUP BY
        DDA2.AccountNumber,
        DDA2.AccountTypeDesc
)
                         DDA          ON RTRIM(TT.[Description])                = RTRIM(DDA.AccountTypeDesc)      AND
                                         H.AccountNumber                        = DDA.AccountNumber 
```

编辑：我用 AS 关键字替换了查询。我犯了同样的错误。MS Access 查询错误：

```
SELECT
    'H'                           AS [HeaderRecordIndicator],
    '1'                           AS [SupervisingAgency],
    '0' + I.InstitutionCode       AS [InstitutionCode],
    CONVERT(char(8), H.Date, 112) AS [ReportDate],
    'CTR'                         AS [ReportType],
    '21'                          AS [FormatCode],
    '1'                           AS [SubmissionType]
FROM
(((
    SELECT
        IIF(ISNULL(FE.IsoCode), FORMAT(DFCF.CurrencyAmount, "##################.00"), FORMAT(DFCF.CurrencyAmount * FE.PhpConversionRate, "##################.00")) AS [PesoAmount],
        DFCF.TransactionNumber,
        DFCF.AccountNumber,
        DFCF.CountryCd,
        DFCF.TransactionTypeCd,
        DFCF.Time,
        DFCF.Date,
        DFCF.TransactionStatusCd,
        DFCF.TransactionCurrencyCd,
        DFCF.BranchNumber,
        DFCF.RemitterExtPartyCd,
        DFCF.BeneficiaryExtPartyCd,
        DFCF.PostedDate,
        DFCF.AssociateNumber,
        DFCF.ExecutingPartyNumber,
        DFCF.CurrencyAmount,
        DFCF.CurrencyAmountInTxnCcy,
        DFCF.CurrencyAmountInAccountCcy,
        DFCF.SecondaryAccountKey,
        DFCF.RelatedInd,
        DFCF.ThirdPartyInd,
        DFCF.TransactionDescription,
        DFCF.SecurityName,
        DFCF.DealNumber
    FROM
        DesFactCashFlow DFCF                                            LEFT JOIN
        ForeignExchange   FE ON DFCF.TransactionCurrencyCd = FE.IsoCode
) AS
                       H                                                                                 LEFT JOIN
    Ctr                C ON H.PesoAmount                           = C.PesoAmountFaceValueSumInsured AND
                            H.AccountNumber                        = C.AccountNumber                 AND
                            H.TransactionTypeCd                    = C.TransactionType)                   LEFT JOIN
    TransactionType   TT ON H.TransactionTypeCd                    = TT.Code)                             LEFT JOIN
(
    SELECT
        DDA2.AccountNumber                    AS [AccountNumber],
        DDA2.AccountTypeDesc                  AS [AccountTypeDesc],
        MAX(DDA2.LineOfBusinessName)          AS [LineOfBusinessName],
        MAX(DDA2.AccountCurrencyCode)         AS [AccountCurrencyCode],
        MAX(DDA2.AccountCurrencyName)         AS [AccountCurrencyName],
        MAX(DDA2.AccountRegistrationTypeDesc) AS [AccountRegistrationTypeDesc],
        MAX(DDA2.AccountRegistrationName)     AS [AccountRegistrationName],
        MAX(DDA2.AccountName)                 AS [AccountName],
        MAX(DDA2.AlternateName)               AS [AlternateName],
        MAX(DDA2.AccountOpenDate)             AS [AccountOpenDate],
        MAX(DDA2.AccountCloseDate)            AS [AccountCloseDate],
        MAX(DDA2.AccountStatusDesc)           AS [AccountStatusDesc],
        MAX(DDA2.DormantInd)                  AS [DormantInd],
        MAX(DDA2.ProductLineName)             AS [ProductLineName],
        MAX(DDA2.ProductCategoryName)         AS [ProductCategoryName],
        MAX(DDA2.ProductTypeName)             AS [ProductTypeName],
        MAX(DDA2.ProductName)                 AS [ProductName],
        MAX(DDA2.ProductNumber)               AS [ProductNumber],
        MAX(DDA2.AccountTaxId)                AS [AccountTaxId],
        MAX(DDA2.AccountTaxIdTypeCode)        AS [AccountTaxIdTypeCode],
        MAX(DDA2.AccountTaxStateCode)         AS [AccountTaxStateCode],
        MAX(DDA2.AccountPrimaryBranchName)    AS [AccountPrimaryBranchName],
        MAX(DDA2.MailingAddress1)             AS [MailingAddress1],
        MAX(DDA2.MailingAddress2)             AS [MailingAddress2],
        MAX(DDA2.MailingCityName)             AS [MailingCityName],
        MAX(DDA2.MailingStateCode)            AS [MailingStateCode],
        MAX(DDA2.MailingStateName)            AS [MailingStateName],
        MAX(DDA2.MailingPostalCode)           AS [MailingPostalCode],
        MAX(DDA2.MailingCountryCode)          AS [MailingCountryCode],
        MAX(DDA2.MailingCountryName)          AS [MailingCountryName],
        MAX(DDA2.CurrencyBasedAccountInd)     AS [CurrencyBasedAccountInd],
        MAX(DDA2.MaturityDate)                AS [MaturityDate],
        MAX(DDA2.OriginalLoanAmount)          AS [OriginalLoanAmount],
        MAX(DDA2.CollateralTypeDesc)          AS [CollateralTypeDesc],
        MAX(DDA2.CollateralTypeCode)          AS [CollateralTypeCode],
        MAX(DDA2.InsuredAmount)               AS [InsuredAmount],
        MAX(DDA2.EmployeeInd)                 AS [EmployeeInd]
    FROM
        DesDimAccount DDA2
    GROUP BY
        DDA2.AccountNumber,
        DDA2.AccountTypeDesc
) AS
                         DDA          ON RTRIM(TT.[Description])                = RTRIM(DDA.AccountTypeDesc)      AND
                                         H.AccountNumber                        = DDA.AccountNumber 
```

这是具有相同错误的简化查询：

```
SELECT
    *
FROM
(((
    SELECT
        IIF(ISNULL(FE.IsoCode), FORMAT(DFCF.CurrencyAmount, "##################.00"), FORMAT(DFCF.CurrencyAmount * FE.PhpConversionRate, "##################.00")) AS [PesoAmount],
        DFCF.TransactionNumber,
        DFCF.TransactionCurrencyCd,
    FROM
        DesFactCashFlow DFCF                                            LEFT JOIN
        ForeignExchange   FE ON DFCF.TransactionCurrencyCd = FE.IsoCode
) AS
                       H                                                                                 LEFT JOIN
    Ctr                C ON H.PesoAmount                           = C.PesoAmountFaceValueSumInsured AND
                            H.AccountNumber                        = C.AccountNumber                 AND
                            H.TransactionTypeCd                    = C.TransactionType)                   LEFT JOIN
    TransactionType   TT ON H.TransactionTypeCd                    = TT.Code)                             LEFT JOIN
(
    SELECT
        DDA2.AccountNumber                    AS [AccountNumber],
        DDA2.AccountTypeDesc                  AS [AccountTypeDesc],
        MAX(DDA2.LineOfBusinessName)          AS [LineOfBusinessName],
    FROM
        DesDimAccount DDA2
    GROUP BY
        DDA2.AccountNumber,
        DDA2.AccountTypeDesc
) AS
                         DDA          ON RTRIM(TT.[Description])                = RTRIM(DDA.AccountTypeDesc)      AND
                                         H.AccountNumber                        = DDA.AccountNumber 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:16:23.607

放弃尝试*将*SQL 文本从 T-SQL 查询转换为 Access SQL。从头开始创建新的 Access 查询并将 T-SQL 查询仅用作路线图。添加您的数据源并设置连接。查询设计器将保证您以使数据库引擎满意的方式创建连接：添加和定位具有多个连接的查询所需的括号；适用于 LEFT JOIN 的规则；等等。让设计师为您处理这些细节。

由于您上次加入的这一部分中的功能，设计师将在设计视图中窒息：

```
RTRIM(TT.[Description]) = RTRIM(DDA.AccountTypeDesc) 
```

因此，`RTRIM()`当您在设计视图中设置连接时，请忽略这些功能。不要担心查询不会返回正确的结果。在获得满足 db 引擎的连接后，切换到 SQL 视图并`RTRIM()`重新添加函数。

正确设置连接后，将字段表达式添加到`SELECT`列表中。

此外，您可能会发现通过将子查询分解为单独的已保存查询来更容易管理您的复杂查询 --- 然后在主查询中按名称引用这些查询，就像您使用表源一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T06:46:05.777

问题在于倒数第二行：

```
 DDA ON RTRIM(TT.[Description]) = RTRIM(DDA.AccountTypeDesc) AND 
```

Access 查询设计器的设计视图不能与`ON`子句部分中的函数一起使用。您必须删除`RTRIM`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T06:53:39.750

您在系统中使用的是哪个版本的 MSAccess？我刚刚在 2007 版本中尝试过，并且 RTRIM 正在工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:51:27.797

访问是愉快的括号。将每个连接表达式、ON 子句本身和每对表都包裹在括号中。

您不能使用 CONVERT、NOLOCK 或 CASE。

# php - 在调用同一函数时取消 Ajax 调用

> ID：11680741
> 
> 赞同：1
> 
> 时间：2012-07-27T02:40:12.163
> 
> 标签：php, ajax

我有一个功能：

```
function modifydata(what) {
    $.post(somepage.php+"?url="+replacedurl+"&userDesc="+userdesc+"&submitType="+what, {

    }, function(response){
        alert(response)
    });
} 
```

我在两个链接link1、link2上调用相同的函数。

当用户点击link1并且ajax仍在处理时，如果用户同时点击link2调用相同的函数但具有不同的值，我想关闭第一个处理以避免加载问题。如果没有创建具有不同名称的相同功能，是否有可能？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:45:24.693

将先前的 XHR 存储在静态变量中，如果值不为 null，则中止，然后在 XHR 完成时设置为 null。

# javascript - Jquery显示隐藏不起作用

> ID：11680744
> 
> 赞同：0
> 
> 时间：2012-07-27T02:40:29.377
> 
> 标签：javascript, jquery, css

```
<div class="content" id="current">
    <div id="loader" style="display:none;"><img src="/images/loader.gif" alt="" /></div>
</div> 
```

我有这个代码。上面是一个盒子，在提交一个按钮时，我想要一个加载器图像，然后当我得到响应时，我想要在 fadeIn 的响应中的图像。

当我单击提交时，我没有看到加载程序，也没有看到图像替换为#current。

```
 $('#Submit').click(function (e) {
         $('#error').html("");

         e.preventDefault();
         code = $('#Code').val(),

         $('#loader').show();
         $.post('/home/foo/', { code: code },
              function (data) {

                  $('#loader').hide();
                  alert(currentItem.ItemImage);
                  $('#current').html(currentItem.ItemImage); 
```

我怎样才能解决这个问题？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:45:20.033

我认为您需要在此行之后使用分号，而不是逗号：

```
code = $('#Code').val(), 
```

到

```
code = $('#Code').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:13:11.860

事实证明，在 css`.content img {display: none}`中导致加载程序不显示。

# c# - C# 中的 Windows 窗体取消事件

> ID：11680748
> 
> 赞同：0
> 
> 时间：2012-07-27T02:40:50.673
> 
> 标签：c#, windows, forms

我正在使用 Windows 窗体创建我的第一个 C# 应用程序，但遇到了一些麻烦。我正在尝试验证放置在 DataGridView 控件的特定单元格内的内容。如果内容无效，我想警告用户并以红色突出显示单元格的背景。此外，我想取消事件以防止用户移动到另一个单元格。当我尝试这样做时，消息框成功显示，但背景颜色永远不会改变。有谁知道为什么？这是我的代码：

```
 private void dataInventory_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {

        switch (e.ColumnIndex)
        {
            case 0:
                if (!Utilities.validName(e.FormattedValue))
                {
                    dataInventory.Rows[e.RowIndex].Cells[e.ColumnIndex].Style.BackColor = Color.Red;
                    MessageBox.Show("The value entered is not valid.");
                    e.Cancel = true;
                }
                else
                {
                    dataInventory.Rows[e.RowIndex].Cells[e.ColumnIndex].Style.BackColor = Color.White;
                }
                break; 
```

//更多东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:11:19.793

MessageBox 不是验证期间使用的最佳工具。通过 make `e.Cancel = true;`，您是在告诉网格不要让单元格失去焦点，但 MessageBox 会使光标离开控件。事情有点混乱。

着色部分应该可以工作，但由于单元格被突出显示，您可能看不到结果。

尝试更改代码以使用网格显示错误图标的能力：

```
dataGridView1.Rows[e.RowIndex].ErrorText = "Fix this";
e.Cancel = true; 
```

使用 CellEndEdit 事件清除消息。

```
void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
  dataGridView1.Rows[e.RowIndex].ErrorText = String.Empty;
} 
```

请参阅[演练：验证 Windows 窗体 DataGridView 控件中的数据](http://msdn.microsoft.com/en-us/library/ykdxa0bc.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:08:54.257

使用以下代码

```
DataGridViewCellStyle CellStyle = new DataGridViewCellStyle();
CellStyle.BackColor = Color.Red;
dataInventory.Rows[e.RowIndex].Cells[e.ColumnIndex].Style = CellStyle; 
```

# android - Android API 级别要求

> ID：11680750
> 
> 赞同：1
> 
> 时间：2012-07-27T02:41:04.837
> 
> 标签：android, api, android-3.0-honeycomb

我在我的应用程序中使用 DragShadowBuilder。[http://developer.android.com/reference/android/view/View.DragShadowBuilder.html](http://developer.android.com/reference/android/view/View.DragShadowBuilder.html)

在 AndroidManifest 中，我将支持的最低 API 级别设置为 8。但是，API 11 引入了 DragShadowBuilder。当某些内容低于最低 API 级别时，Eclipse 通常会警告我，但使用 DragShadowBuilder 似乎很好。我是否应该包含一些支持库或类似的东西以确保代码在旧版本的 Android 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:55:15.780

不，您的代码可能无法在旧版本的 Android 中运行。如果您想在旧版本中实现拖动功能，您可能想使用 AbsoluteLayout 编写自己的拖动逻辑。希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:06:43.597

我只是查看了库中已发布的内容，但没有看到任何关于 DragShadowBuilder 的内容。您可以在[http://developer.android.com/tools/extras/support-library.html查看其中的内容](http://developer.android.com/tools/extras/support-library.html)

我还查看了一些源代码，但没有看到任何关于它的内容。[如何在 Eclipse 中附加 Android 支持库源？](https://stackoverflow.com/questions/8543225/android-support-library-v4-getting-the-source-and-attaching-it-to-the-library)

如果没有向后支持，那么您基本上只能靠自己。您还可以查看 DragShadowBuilder 的源代码并尝试在您的应用程序中重新创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T03:07:30.727

我相信这是 Eclipse 的一个错误。我建议您只需将支持的最低 API 级别设置为 11。AFAIK，您始终可以先创建它以支持 API 11，然后尝试使用新项目并添加所需的库来重新创建它。

我已经尝试过了，如果您要创建一个新项目，将其设置为较低的 API，导入类似“拖放”的库，然后尝试为其编写代码，您很可能会收到一条错误消息将不起作用和/或为 API 11 设置了拖放功能。如果您之后清理项目，错误可能会“消失”消失，但一旦您尝试运行应用程序，它会重新出现并说它无法运行并出现错误。

即使您将库嵌入了代码，这也很奇怪。如果机器无法区分您尝试调用的“DragEvent”，也许您可​​以尝试重命名类等。

# java - 使用 HashMap 实现 HashSet 有问题吗？

> ID：11680751
> 
> 赞同：0
> 
> 时间：2012-07-27T02:41:10.497
> 
> 标签：java, hashmap, hashset

在 java 中，HashSet 是使用 HashMap 实现的。因此，当我们向集合中添加项目时，会执行以下代码。

```
public boolean add(E e) {
    return map.put(e, PRESENT)==null;
} 
```

将两个不同但具有相同哈希的对象添加到 HashSet 时会发生什么；它（HashSet）会包含两个对象还是会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T02:52:40.080

hashmap`.equals()`和`.hash()`. `.equals()`除非返回 true ，否则两件事是不一样的。哈希集也是如此。

因此，如果两个对象不同但具有相同的哈希值，则它们都将被存储，并且都可用，因为`.equals()`仍然会返回`false`.

确实，在内部，散列用于决定存储对象的位置，但是仍然可以存储具有相同散列的多个对象（由于它变得更加复杂，因此性能略有下降，但仅此而已）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T02:48:27.223

是的，hashmap 将包含这两个元素。我找不到它使用的具体方法，但处理冲突的流行方法包括为每个存储桶使用链表，或者只是将元素粘贴在附近的空存储桶中。

# java - 在 java 中与 ssh 一起使用的伪终端

> ID：11680753
> 
> 赞同：0
> 
> 时间：2012-07-27T02:41:19.440
> 
> 标签：java, ssh, pty

我正在编写一个程序来使用 ssh 连接到远程服务器并为用户提供 shell 终端。

我已经尝试过 JSch 和 sshj —— 两者都可以正确连接，但只需将它们的 shell 通道的输入/输出流连接到 System.in 和 System.out 就会产生时髦的输出。我知道为什么——JSch 和 sshj 的文档都说它们没有内置终端仿真，所以输入/输出很难看。（sshj 将此实现称为“基本 PTY”）

我还有一些终端仿真器可供选择：JTerm、DragonConsole 和 Terminator。

我的目标是启动终端仿真器窗口并执行类似于将输入/输出流从 shell 通道插入仿真器的操作。

诸如建议我自己处理与 shell 通道的输入/输出以摆脱垃圾字符的方法之类的替代方案也将受到赞赏——这是主要问题。

编辑：[这是 sshj “基本 PTY”](https://github.com/shikhar/sshj/blob/master/src/main/java/examples/RudimentaryPTY.java)

[这是JSch版本](http://www.jcraft.com/jsch/examples/Shell.java.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:29:40.150

JCTerm 已经实现了一个终端仿真器。其源代码可在 [https://github.com/ymnk/jcterm获得，您可以在](https://github.com/ymnk/jcterm)[http://wiredx.net/jcterm/](http://wiredx.net/jcterm/)尝试其在线演示 。

# python - 计算一个文本文件在 Python 中包含多少个句号

> ID：11680757
> 
> 赞同：0
> 
> 时间：2012-07-27T02:41:33.490
> 
> 标签：python, file, text, find

我想编写一个代码来读取和打开一个文本文件并告诉我有多少“。” （句号）它包含

我有这样的事情，但我现在不知道该怎么办？！

```
f = open( "mustang.txt", "r" )
    a = []
    for line in f: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:45:53.010

```
with open('mustang.txt') as f:
    s = sum(line.count(".") for line in f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:00:48.070

即使使用正则表达式

```
import re
with open('filename.txt','r') as f:
    c = re.findall('\.+',f.read())
    if c:print len(c) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T02:45:05.307

我会这样做：

```
with open('mustang.txt', 'r') as handle:
  count = handle.read().count('.') 
```

如果您的文件不是太大，只需将其作为字符串加载到内存中并计算点数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T02:45:25.987

```
with open('mustang.txt') as f:
    fullstops = 0
    for line in f:
        fullstops += line.count('.') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T02:45:27.717

这将起作用：

```
with open('mustangused.txt') as inf:
    count = 0
    for line in inf:
        count += line.count('.')

print 'found %d periods in file.' % count 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-27T02:46:00.040

假设您的文件绝对没有太大的危险，以至于不会导致您的计算机内存不足（例如，在用户可以选择任意文件的生产环境中，您可能不希望使用此方法）：

```
f = open("mustang.txt", "r")
count = f.read().count('.')
f.close()
print count 
```

更恰当地说：

```
with open("mustang.txt", "r") as f:
    count = f.read().count('.')
print count 
```

# sql-server - MSDTC 设置/属性正在重置

> ID：11680759
> 
> 赞同：3
> 
> 时间：2012-07-27T02:41:40.557
> 
> 标签：sql-server, sql-server-2008, msdtc

我们经常在生产框中收到此错误。

> 错误消息：链接服务器“......”的 OLE DB 提供程序“SQLNCLI”返回消息“没有事务处于活动状态”。

每次问题似乎都以某种方式 MSDTC 设置已全部重置。即，我们发现这些选项未选中`Network DTC Access`，Allow Inbound `and`Allow Outbound`。

即使我们再次检查这些选项，保存它，重新启动 MSDTC 服务、SQL 服务——它也只能工作几天。之后，同样的问题再次出现。如何找出为什么自动取消选中此设置？

对于这种情况，我们编码的方式重要吗？tempdb 压力或事务日志增长会导致 msdtc 服务崩溃吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:16:48.823

如果正确存储设置，崩溃的 MSDTC 不会导致设置被撤销。当您更改设置时，新配置可能未正确存储，或者该配置以某种方式被覆盖。当 MSDTC 运行以检查配置是否如您所料时，我会查看注册表项，一旦 MSDTC 问题再次出现，我会将注册表与之前的内容进行比较，以查看 a) 注册表是否正确更新首先，b）查看注册表是否在某个时候被覆盖并反转配置更改。

MyComputer\HKEY_LOCAL_MACHINE\Software\Microsoft\MSDTC

# ruby-on-rails - 当本地人在场时，为什么我仍然会收到 model_name 错误？

> ID：11680761
> 
> 赞同：0
> 
> 时间：2012-07-27T02:41:59.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我试图在我的另一个视图中呈现我的狗形式`PetsController.index`：

```
def index
  @page_title = "Add Pets"
  @title = "Add Pets"
end 
```

但我得到了错误：

```
NoMethodError in Pets#index

Showing C:/testapp/app/views/dogs/_form.html.erb where line #1 raised:

undefined method `model_name' for NilClass:Class

1: <%= form_for @dog do |f| %> 
```

宠物/index.html.erb

```
<div class="tab-pane" id="tab4">
   <%= render "global/flash_message" %>
   <%= render :partial => "dogs/form", :locals => {:dog => @dog } %>
</div> 
```

我知道我可以做到：

```
def index
  @page_title = "Add Pets"
  @title = "Add Pets"
  @dog = Dog.new
end 
```

但是当地的意义何在呢？缺少什么，所以我可以改用它`DogsController`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T02:46:22.403

如果`@dog`未在您的`#index`操作中分配，那么您将在调用中分配`nil`给您的`dog`本地人`render :partial`。您可以将实例分配排除在操作之外并在您的索引视图中执行（即`:locals => {:dog => Dog.new}`，但它必须发生在某个地方。

# iphone - 第一个 iPhone 应用程序

> ID：11680766
> 
> 赞同：-1
> 
> 时间：2012-07-27T02:42:21.513
> 
> 标签：iphone, objective-c, ios

我以前从来没有为 iPhone 编程过，但是通过学习 Obj-C 获得了编码经验。我一直在尝试提出一个好的第一个项目，以便我可以了解一些与移动开发相关的过程。

我的想法是制作一个由 5 个问题组成的应用程序。用户会为每个代表“是”、“否”或“可能”的问题勾选一个框，有点像调查。最后会有一个提交按钮，数据将发送到电子邮件地址。我认为这个想法/概念很简单，但是有 iPhone 经验的人是否认为这太难开始了？

我真的很喜欢在第一个应用程序中创建清单的想法，因此任何与此相关的想法都将不胜感激。不是想制作一个可用的应用程序，只是想弄乱一些东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:54:40.643

如果您只是在学习，我建议您选择*众多*iOS 书籍中的一本。以前的 SO 答案将在[此处](https://stackoverflow.com/questions/3403049/best-book-resources-for-learning-ios-programming)列出。

通常这些书一开始就简单地向你解释你在做什么。他们会在整本书中进入更中级和“高级”的主题和教程，到最后，您将接触到许多框架和 API，以开始您自己的想法。

祝你好运！

# javascript - jquery.iviewer 中的访问函数

> ID：11680767
> 
> 赞同：0
> 
> 时间：2012-07-27T02:42:29.573
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用 iviewer jQuery 插件作为文档查看器，并且我有一些自定义项需要我触发默认值之外的事件。似乎我正在尝试做的事情应该是可能的，但我不能确定。

我的页面上有一个带有 iviewer_rotate_right div 的按钮。

```
<div class="iviewer_rotate_right">Rotate</div> 
```

然后我用这个监听器调用 iviewer.angle

```
$(".iviewer_rotate_right").click(function() {
  $(".viewer").iviewer.angle(90);
}); 
```

但是，我在控制台中收到以下错误

```
$(".viewer").iviewer.angle is not a function 
```

“viewer”是包含图像的 div 的类名。

插件代码可在此处获得：

[https://github.com/can3p/iviewer/blob/master/jquery.iviewer.js](https://github.com/can3p/iviewer/blob/master/jquery.iviewer.js)角度函数从第 561 行开始。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T15:49:00.333

从 iviewer 文档中，您可以调用如下方法：

```
$('#viewer').iviewer('method', 'arg1', 'arg2') 
```

请注意，这是按 id 而不是按类调用容器 #viewer。

您可以像在示例中尝试那样在类上运行该方法，如下所示：

```
$(".iviewer_rotate_right").click(function() {
    $(".viewer").iviewer('angle', 90);
}); 
```

如果您的页面上有多个带有 .viewer 类的容器，它们都将旋转 90 度。

iviewer 文档可以在这里找到：[https ://github.com/can3p/iviewer/wiki](https://github.com/can3p/iviewer/wiki)

# actionscript-3 - as3 字节数组拼接

> ID：11680769
> 
> 赞同：0
> 
> 时间：2012-07-27T02:43:41.967
> 
> 标签：actionscript-3, bytearray, splice

我几乎是一个动作脚本新手，我正在尝试从 as3 中的字节数组中切出第一个和最后一个 X 字节，并且似乎无法在任何地方找到有关如何做到这一点的任何内容。

如果重要的话，字节数组是一组从麦克风记录的浮点数，我试图在将其编码为 .wav 文件之前将第一秒和最后 1/4 秒的时间剪掉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:51:12.697

假设您有一个现有的 ByteArray，我们称它为 rawBytes：

```
var trimmedBytes:ByteArray = new ByteArray();
var quarterSecond:int = 1000; // no. bytes per 1/4 second (arbitrary estimate)
rawBytes.readBytes(trimmedBytes, quarterSecond, rawBytes.length - quarterSecond * 2); 
```

您的 trimmedBytes 变量现在将填充第二个记录减去第一个和最后一个季度秒 - 假设 QuarterSecond 变量具有正确的值。我不知道该值应该是多少，我想这取决于您录制的比特率。不过，您可能可以通过反复试验到达那里！

# c# - 使用 System.IO 编写大文件 C#

> ID：11680773
> 
> 赞同：0
> 
> 时间：2012-07-27T02:44:04.287
> 
> 标签：c#, .net

我正在实现以下代码，以在通用处理程序中通过 http 从磁盘写入一个大文件。我的下载速度开始非常快，但随着下载的进行而减慢。我尝试将缓冲区的大小增加到 100k，但结果相同。任何人都有任何想法，也许我需要看一些不受管理的东西？

谢谢！

[http://support.microsoft.com/kb/812406](http://support.microsoft.com/kb/812406)

# php - 将数组值插入 MySQL

> ID：11680774
> 
> 赞同：1
> 
> 时间：2012-07-27T02:44:25.330
> 
> 标签：php, mysql

我试图找到另一个问题的答案，但我没有运气。我的问题基本上是……这行得通吗？

```
$insert_tweets = "INSERT INTO tweets (
  'id',
  'created_at',
  'from_user_id',
  'profile_image',
  'from_user',
  'from_user_name',
  'text' 
  ) VALUES (
  {$user_data[$i]["id"]},
  {$user_data[$i]["created_at"]},
  {$user_data[$i]["from_user_id"]},
  {$user_data[$i]["profile_image"]},
  {$user_data[$i]["from_user"]},
  {$user_data[$i]["from_user_name"]},
  {$user_data[$i]["text"]}
)"

        for($i=0;$i<count($user_data);$i++){
            mysqli_query($mysqli,$insert_tweets);
        } 
```

$user_data 是一个多维数组，第一层是数字，后一层是关联的。

此外，在插入之前“数据库准备”/清理关联数组变量的最佳方法是什么？我预计不会出现任何恶意数据，但它总是有可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:47:14.303

```
 for($i=0;$i<count($user_data);$i++){
            $insert_tweets = "INSERT INTO tweets ('id','created_at','from_user_id','profile_image','from_user','from_user_name','text') VALUES ({$user_data[$i]["id"]},{$user_data[$i]["created_at"]},{$user_data[$i]["from_user_id"]},{$user_data[$i]["profile_image"]},{$user_data[$i]["from_user"]},{$user_data[$i]["from_user_name"]},{$user_data[$i]["text"]})";
            mysqli_query($mysqli,$insert_tweets);
        } 
```

这应该工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T02:51:31.353

是的，它会起作用，但最好的方法是使用 PDO。

您可以在您的准备语句中创建无名参数，然后只需传入一个数组以将值绑定到这些参数。

```
$data = array('val1', 'val2');
$query = $db->prepare("INSERT INTO table (col1, col2) VALUES (? , ?)");
$query->execute($data); 
```

PDO 将为您转义输入值。

这是关于 PDO 的教程，可帮助您入门 [http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T03:12:56.960

这是我对阵列消毒的建议：

我所做的是创建一个用于清理数据的基本功能：

```
function array_sanitize(&$item){
    $item = mysql_real_escape_string($item);
} 
```

然后你可以使用`array_walk()`你的新函数来清理你的数组。（[php手册参考](http://php.net/manual/en/function.array-walk.php)）

并通过像这样传入您的数组进行消毒：

```
array_walk($user_data, 'array_sanitize'); 
```

# applescript - 如何使用applescript切换新听写工具的语言设置（10.8）

> ID：11680778
> 
> 赞同：2
> 
> 时间：2012-07-27T02:45:04.807
> 
> 标签：applescript

我真的很喜欢 MacOSX Mountain Lion 的新听写功能。我用两种语言使用它；英语（美国）和法语。

每次我需要切换语言时，我都必须进入系统偏好，听写和语音，然后选择语言。

现在，我想使用 Applescript 自动执行此操作，不幸的是，由于它太新，我无法获得正确的听写模块字符串。

快速示例（这只是一个开始）：

```
tell application "System Preferences"
   activate
   set the current pane to pane id "com.apple.preference.xxxxxx"
end tell 
```

对于 xxxx，我尝试了“Dictation&Speech”的疯狂猜测，但没有成功。

关于如何获得“听写和语音”的确切字符串的任何想法？

预先感谢，

弗朗索瓦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:01:29.007

您可以编辑存储设置的属性列表并重新打开 DictationIM 进程：

```
#!/bin/bash

k="com.apple.speech.recognition.AppleSpeechRecognition.prefs DictationIMLocaleIdentifier"
if [[ "$(defaults read $k)" == en-US ]]; then
  defaults write $k fr-FR
  defaults write com.apple.assistant "Session Language" fr-FR
else
  defaults write $k en-US 
  defaults write com.apple.assistant "Session Language" en-US
fi
killall -HUP DictationIM 
```

或者使用 UI 脚本：

```
delay 0.3 -- time to release modifier keys if the script is run with a shortcut
tell application "System Preferences"
    reveal anchor "Dictation" of pane "com.apple.preference.speech"
end tell
tell application "System Events" to tell process "System Preferences"
    tell pop up button 1 of tab group 1 of window 1
        click
        if value is "English (United States)" then
            click menu item "French" of menu 1
        else
            click menu item "English (United States)" of menu 1
        end if
    end tell
end tell
quit application "System Preferences" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T04:09:51.553

要获取窗格的 ID：进入系统偏好设置，选择一个窗格，在编辑器中运行此脚本。

```
tell application "System Preferences" to get id of current pane 
```

结果是确切的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:56:20.937

很酷的东西！

如果您安装了“通知脚本”（[http://www.cooperative-fruitiere.com/notifications/index_en.html](http://www.cooperative-fruitiere.com/notifications/index_en.html)），那么您甚至可以收到通知，通知您有关该语言的信息。在 FastScripts 的帮助下，您可以为该脚本分配键盘快捷键。

```
-- Switch the language of Mountain Lion's dictation
-- Here, we just toggle between English and German
-- Needs 'Notifications Scripting' ( http://www.cooperative-fruitiere.com/notifications/index_en.html )

delay 0.3 -- time to release modifier keys if the script is run with a shortcut
tell application "System Preferences"
    reveal anchor "Dictation" of pane "com.apple.preference.speech"
end tell

tell application "System Events" to tell process "System Preferences"
    tell pop up button 1 of tab group 1 of window 1
        click
        if value is "English (United States)" then
            set language to "German (Germany)"

        else
            set language to "English (United States)"
        end if
        click menu item language of menu 1
    end tell
end tell

quit application "System Preferences"

tell application "Notifications Scripting"
    set event handlers script path to (path to me)
    -- The user info parameter is a record. The supported data types are text, integer, real, boolean, date, alias, file and POSIX file.
    set dict to {theName:"Notifications Scripting", theVersion:"1.0", theScript:event handlers script path}
    display notification "Dictation Language" subtitle "Switched to:" message language
end tell

using terms from application "Notifications Scripting"
    -- This handler is called when a notification was delivered.
    on notification delivered title aTitle subtitle aSubTitle message aMessage actual delivery date aDeliveryDate user info aDict
    end notification delivered
end using terms from 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-14T06:12:36.090

`delay`除非您输入命令，否则提供的脚本不起作用。此外，它需要`application process`，而不是简单地`process`。我不会解释在哪里进行更改，而是发布工作代码。[请注意，这是在 macOS Catalina 上测试的。如果苹果在未来版本中更改系统偏好设置 GUI，此代码可能无法正常工作。]

```
tell application "System Preferences"
    reveal anchor "Dictation" of pane "com.apple.preference.speech"
end tell
delay 1
tell application "System Events" to tell application process "System Preferences"
    tell pop up button 1 of tab group 1 of window 1
        click
        if value is "English (United States)" then
            click menu item "Hungarian (Hungary)" of menu 1
        else
            click menu item "English (United States)" of menu 1
        end if

    end tell
end tell
quit application "System Preferences" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-02T14:01:26.637

我现在使用 Alfred 来触发这个 bash 脚本。我为它分配了一个热键，并为我说的语言复制了它，所以我为我的三种语言提供了三种不同的键盘快捷键。它使用对上述脚本稍作修改的脚本（使用不同的`pref`，不再需要`delay`s，并立即触发听写。）

```
k="com.apple.speech.recognition.AppleSpeechRecognition.prefs DictationIMNetworkBasedLocaleIdentifier"

if [ "$(defaults read $k)" != "de_DE" ]
then
    defaults write $k "de_DE"
    defaults write com.apple.assistant "Session Language" "de_DE"

    killall -HUP DictationIM

-- Somehow I need to do twice the keyboard shortcut to start the dictation. This is the first one.
osascript -e 'tell app "System Events" to key code {63,63}'

fi

-- second one
osascript -e 'tell app "System Events" to key code {63,63}' 
```

# objective-c - 未调用 textDidChange ( NSTextFieldDelegate )

> ID：11680784
> 
> 赞同：4
> 
> 时间：2012-07-27T02:45:31.530
> 
> 标签：objective-c, macos, cocoa

步骤 1\. 在 xib 中添加一个 NSTextField

步骤 2\. 在 .h 文件中添加 NSTextFieldDelegate，按住 Control 并拖动 NSTextField 到 File's Owner 以设置委托给它

第三步，在 .m 文件中添加方法：

```
- (void)textDidChange:(NSNotification *)notification{
    NSLog(@"textDidChange");
} 
```

但是方法 textDidChange: 没有被调用？

有什么错误吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T02:56:39.990

文件的所有者不是应用程序委托 - 是您放置该方法的应用程序委托吗？您应该控制拖动到标记为应用程序委托的蓝色立方体。

编辑后：委托收到的消息是 controlTextDidChange：不是 textDidChange，因此请改为实现该消息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-17T16:57:11.640

您需要注册一个观察者来监听`NSNotification`.

```
// When the NSWindow is displayed, register the observer.
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(controlTextDidChange:) name:NSControlTextDidChangeNotification object:nil];

- (void)controlTextDidChange:(NSNotification *)obj {
    // You can get the NSTextField, which is calling the method, through the userInfo dictionary.
    NSTextField *textField = [[obj userInfo] valueForKey:@"NSFieldEditor"];
} 
```

看起来，返回的对象`NSFieldEditor`是 a ，而不是您可能期望`NSTextView`的同一个对象。`NSTextField`

但是，根据 Apple 的文档，如果您实现此方法并且控件委托已注册到此对象，则应自动注册通知。

> 控件发布一个 NSControlTextDidChangeNotification 通知，如果控件的委托实现了这个方法，就会自动注册接收通知

来源：[https](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/controlTextDidChange) ://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/controlTextDidChange ：

# python - 规避模块名称修改的干净方法？

> ID：11680787
> 
> 赞同：2
> 
> 时间：2012-07-27T02:45:56.727
> 
> 标签：python, ctypes

我正在使用 Python 的 ctypes 来连接一个 C 库文件，运行[ctypesgen](http://code.google.com/p/ctypesgen/)来创建一个我可以导入的包装模块（例如，api.py）。碰巧许多 C 函数和宏的名称都以双下划线开头，Python 将其视为“私有”，并在用于类定义时调用名称修饰。

例如，这有效：

```
import api
api.__someGetter() 
```

但这并不

```
import api
class MyClass(object):
    i = api.__someGetter()

AttributeError: 'module' object has no attribute '_MyClass__someGetter' 
```

这*确实*有效：

```
i = api.__dict__['__someGetter']() 
```

但它对我来说似乎不是很优雅或易于阅读 - 代码将充满对字典键的调用。

有没有更好的方法来禁用或解决模块的名称修改？

（它是一个 C 库的事实可能与答案无关，但希望它解释了为什么我不能只更改命名约定。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:52:46.073

您可以在 Python 中重新导出名称，将双下划线转换为单下划线。

```
import api
for name in api.__dict__:
    if name.startswith('__'):
        globals()[name[1:]] = api.__dict__[name] 
```

这会将`api`当前模块中的所有双下划线更改为单下划线。然后可以从另一个模块导入该模块。

**注意：**在 C 中命名以下划线开头的函数是**不正确的。**请参阅 n1526 的第 7.1.3 节“保留标识符”。在 C 中使用以双下划线开头的名称是“未定义的行为”，这是“不要这样做”的技术术语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T03:14:47.543

出于好奇，这里有一种实现这种效果的方法。它将模块包装在一个类中，该类具有[自定义属性访问方法](http://docs.python.org/reference/datamodel.html#customizing-attribute-access)，该方法仅丢弃损坏名称的第一部分。这肯定有点小技巧，并且可能并非在所有情况下都有效——我不建议认真使用它！

```
 class Wrapper(object):
        def __init__(self, module):
            for name in module.__dict__:
                self.__dict__[name] = module.__dict__[name]

        #__getattr__ is called only if regular access failed
        def __getattr__(self, name): 
            try:
                return self.__dict__['__'+name.split('__', 1)[1]]
            except (IndexError, KeyError):
                raise AttributeError, name

        def __setattr__(self, name, value):
            try:
                self.__dict__['__'+name.split('__', 1)[1]] = value
            except IndexError:   #no double underscores to split
                self.__dict__[name] = value 
```

用法：

```
import cwrapper 
api = Wrapper(cwrapper)

class MyClass(object):
    i = api.__some_Getter() #works 
```

# jquery - 粘性元素从页面的直接中心开始？

> ID：11680790
> 
> 赞同：0
> 
> 时间：2012-07-27T02:46:11.790
> 
> 标签：jquery, center, sticky

我创建了一个网站，在页面的直接中心显示徽标。目前，div 的位置是固定的。徽标还包括图像映射。我想要的是它是绝对的，当用户向下滚动时，徽标将从顶部达到大约 20px 并且将变得固定。与航点非常相似。

因此，尽管我可以组织航点，但我无法让网站在页面的直接中心加载徽标（无论屏幕大小）。任何帮助将不胜感激！\

我的 HTML：

```
<div class="logo">
<img src="images/logo.png" />
</div> 
```

我的CSS：

```
.logo {
   width: 351px;
   height: 185px;
   position: fixed;
   left: 50%;
   top: 50%; 
   margin-left: -175px;
   margin-top: -92px;
   text-align:center;
   overflow:hidden;
   z-index: 900;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:00:51.127

您需要获取窗口高度的尺寸。将此添加到您的 JS 中，然后您可以以`$('.logo').centerScreen`.

```
$(document).ready(function() { 
        jQuery.fn.centerScreen = function(loaded) { 
                var obj = this; 
                if(!loaded) { 
                        obj.css('top', $(window).height()/2- 
                                this.height()/2); 
                        obj.css('left', $(window).width()/2- 
                                this.width()/2); 
                        $(window).resize(function() 
                                { obj.centerScreen(!loaded); }); 
                } else { 
                        obj.stop(); 
                        obj.animate({ top: $(window).height()/2- 
                                this.height()/2, left: $ 
                                (window).width()/2-this.width()/2}, 200, 'linear'); 
                } 
        } 
}); 
```

# c# - Jquery AutoComplete 与数据库

> ID：11680792
> 
> 赞同：0
> 
> 时间：2012-07-27T02:46:44.067
> 
> 标签：c#, jquery, asp.net, sql-server-2005

我似乎无法弄清楚自动完成搜索栏的代码有什么问题。

我唯一能想到的是我在 URL 下引用了错误的东西

aspx Javascript

```
 $(document).ready(function() {
        SearchText();
    });
    function SearchText() {
        $(".ui-autocomplete").autocomplete({
            source: function(request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Admin_home.aspx/GetAutoCompleteData",
                    data: "{'Car':'" + document.getElementById('query').value + "'}",
                    dataType: "json",
                    success: function(data) {
                        response(data.d);
                    },
                    Error: function(results) {
                        alert("Error");
                    }
                });
            }
        });
    }

</script>` 
```

asp.html 代码

我似乎无法在此处键入或粘贴 html。它只是一个
asp：Textbox ID="query" class="ui.autocomplete"

c# 代码

```
 [WebMethod]
    public static List<string> GetAutoCompleteData(string Car)
    {
        List<string> result = new List<string>();
        using (SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["CarsConnectionString"].ConnectionString))
        {
            using (SqlCommand cmd = new SqlCommand("select DISTINCT Car from T_Car where Car like '%'+ @SearchText +'%", con))
            {
                con.Open();
                cmd.Parameters.AddWithValue("@SearchText", Car);
                SqlDataReader dr = cmd.ExecuteReader();
                while (dr.Read())
                {
                    result.Add(dr["Car"].ToString());
                }
                return result;
            }
        }
    } 
```

是否需要将部分 html 包装在 AJAX 更新面板中？

另外，我正在从 sql server 2005 中搜索提取名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:52:58.477

这不是 jQuery Autocomplete 的工作方式，

jQuery 自动完成自动将文本框中输入的文本发送到您在查询字符串“术语”中指定的位置，您可以像这样在 webmethod 或处理程序中访问它

```
 string input = HttpContext.Current.Request.QueryString["term"]; 
```

像这样的东西

```
 [WebMethod]
public static List<string> GetAutoCompleteData(string Car)
{
    string input = HttpContext.Current.Request.QueryString["term"];
    List<string> result = new List<string>();
    using (SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["CarsConnectionString"].ConnectionString))
    {
        using (SqlCommand cmd = new SqlCommand("select DISTINCT Car from T_Car where Car like '%'+ @SearchText +'%", con))
        {
            con.Open();
            cmd.Parameters.AddWithValue("@SearchText", input);
            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                result.Add(dr["Car"].ToString());
            }
            return result;
        }
    }
} 
```

这在您的 .aspx 页面中

```
 $(".ui-autocomplete").autocomplete({
        source: "Admin_home.aspx/GetAutoCompleteData",
        select: function (event, ui) { }
      }); 
```

编辑：

我实际上从未在 web 方法中这样做过，我通常使用处理程序 .ashx ，但这应该同样有效。

当您完成所有更改后，然后在调试模式下运行该站点，开始在文本框中输入并适应 f12 并观察这导致的流量 - 如果您输入“abc”，它应该看起来像

Admin_home.aspx/GetAutoCompleteData?term=abc

那么你可能需要玩一点响应，默认情况下.net会在客户端的响应中添加“d：....”，但你可以观看它并相应地调整

另一个编辑：

```
 <asp:Textbox ID="query" class="ui.autocomplete"> 
```

不是你放在 jquery 中的

```
 $(".ui-autocomplete").autocomplete({ 
```

它应该是

```
 <asp:Textbox ID="query" class="ui-autocomplete"> 
```

然而，另一个编辑：

这缺少一个单引号

```
 using (SqlCommand cmd = new SqlCommand("select DISTINCT Car from T_Car where Car like '%'+ @SearchText +'%", con)) 
```

用。。。来代替

```
 using (SqlCommand cmd = new SqlCommand("select DISTINCT Car from T_Car where Car like '%'+ @SearchText +'%' ", con)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:07:07.613

试试这个也许会有所帮助

```
<script type="text/javascript">
    $(function() {
        $(".ui-autocomplete").autocomplete({
            source: function(request, response) {
                $.ajax({
                    url: "Admin_home.aspx/GetAutoCompleteData",
                    data: "{ 'Car': '" + request.term + "' }",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function(data) { return data; },
                    success: function(data) {
                        response($.map(data.d, function(item) {
                            return {
                                value: item
                            }
                        }))
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            },
            minLength: 2
        });
    });
    </script> 
```

# c# - 使用asp.net C#为特定用户创建特定的重定向url

> ID：11680796
> 
> 赞同：0
> 
> 时间：2012-07-27T02:47:19.760
> 
> 标签：c#, asp.net, visual-studio-2008

我正在使用 Visual Studio 2008 创建我的 Web 应用程序。我的问题是我想为没有登录页面的特定用户创建特定的重定向 URL。而且我还想检查用户是否为 URL 参数输入了错误的值。

我有 3 个用户，每个用户只能看到基于角色的不同数据。

```
Police - Criminal Data
Fire - Fire Data
Doctor - Patient Data 
```

所以，我想为每个人设置不同的 URL。预期网址：

```
~/DataDisplay.aspx?role=POLICE&password=1234

~/DataDisplay.aspx?role=FIRE&password=5678

~/DataDisplay.aspx?role=DOCTOR&password=1001 
```

然后，用户在浏览器中输入该 URL 后，另一个问题是我还希望我的网站检查角色和密码是否输入正确，如果不匹配，它将显示 ERROR!。

需要帮助，拜托。谢谢，西蒂.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:57:42.403

我认为你应该成为 ASP.NET 会员。如果您可以轻松扩展安全性并允许您根据需要添加更多功能。

[ASP.NET教程介绍](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)

# mysql - 将两个表连接在一起，并将第二个表上特定字段的前三个与第一个表相加

> ID：11680798
> 
> 赞同：0
> 
> 时间：2012-07-27T02:47:28.690
> 
> 标签：mysql

这是问题所在。我已经浏览了这些线程一段时间，但还没有找到确切的解决方案。

我有两个表，就像大多数问题一样，这与加入这两个表有关。一个基本上是一个表，其中包含 20,000 多条记录的跑步者列表，第二个表是那些具有 35000 多条记录的跑步者的结果列表。第二个表实际上是一个视图，其中包含所有结果信息以及视图生成的年龄等级和评级。我现在需要的是结合每个跑步者的前三个评分。我首先尝试了这个。

```
SELECT
  r.id, 
  r.FirstName,
  r.MiddleName,
  r.LastName,
  r.Age,
  r.Gender,
  r.City,
  r.State,
  ROUND((SELECT SUM(re.Rating) rating FROM vwResults re WHERE re.runnerid = r.id ORDER BY re.Rating DESC LIMIT 3)/3,2) Rating
FROM Runners r 
```

不幸的是，失败了我想要做的是将结果表中的前三个评级相加，然后将其设为 3 以获得平均值。这将是该用户的平均评分。我已经尝试了上面代码的几种不同变体，我确实得到了一个部分工作，但加载 30 条记录需要 8 秒，并且数据不正确。有没有办法做到这一点，以便我可以创建一个内置评级的新 Runner 视图？如果可能的话，我宁愿不使用程序。

```
Runners Table Structure
id int(11)
FirstName varchar(50)
MiddleName varchar(50)
LastName varchar(50)
Age int(3)
Gender varchar(2)
City varchar(50)
State varchar(2)
userid int(11)

vwResults View Structure
DistanceID int(4)
distance varchar(100)
RaceID int(11)
name varchar(100)
FirstName varchar(50)
LastName varchar(50)
place int(100)
Gender varchar(2)
age int(11)
finistime varchar(100)
pace time
agegrade varbinary(19)
ResultID int(11)
RunnerID int(11)
typeid int(11)
ftimesec bigint(10)
Rating decimal(18,2) 
```

我唯一需要从 vwResults 获得的前三个评级和 / 3 以获得新的平均评级和 Runners 表中的所有信息。

我正在尝试创建一个可以获取评分的函数，但我对 mysql 函数一无所知，有人可以告诉我我在这里做错了什么

```
 CREATE FUNCTION GetRating(
      Runnerid int( 11) 
      )
      RETURNS decimal( 18, 2) 
      READS SQL DATA
      BEGIN
      DECLARE Rat decimal(18,2);
      SELECT  ROUND(SUM(Rating)/3,2) INTO Rat  FROM vwResults WHERE runnerid = Runnerid GROUP BY runnerid
     ORDER BY Rating DESC LIMIT 3;
     RETURN(Rat);
     END 
```

我正在尝试使下面的代码正常工作，但是它似乎存在问题，不断出现以下错误。

# 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法

```
 CREATE PROCEDURE usb_GetRatings() 
        BEGIN 
        SET @rank = NULL; 
        SET @prevrunnerid = NULL;  
        DROP TABLE IF EXISTS ttRunners;
        SELECT r.id, r.FirstName,r.MiddleName, 
        r.LastName,r.Age,r.Gender,r.City,r.State,  
        ROUND(top3rating.Rating, 2) as Rating  INTO ttRunners
        FROM Runners as r 
        JOIN (SELECT runnerid, AVG(Rating) as Rating 
          FROM (SELECT if(@prevrunnerid = runnerid, 
                      @rank := @rank + 1, 
                      @rank := 1) as rank, 
                   @prevrunnerid := runnerid 
                       as runnerid, 
                   Rating 
            FROM vwResults 
            ORDER BY runnerid, Rating) as sq 
         WHERE rank <= 3 
         GROUP BY runnerid) as top3rating 
        on (r.id = top3rating.runnerid); 
      END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:04:09.533

这个怎么样？把它放在一个程序中。

```
delimiter //

CREATE PROCEDURE get_top3_rating_avg() AS BEGIN
    SET @rank = NULL;
    SET @prevrunnerid = NULL;
    SELECT r.id, r.FirstName,r.MiddleName,
           r.LastName,r.Age,r.Gender,r.City,r.State, 
           ROUND(top3rating.Rating, 2) as Rating 
    FROM Runners as r
    JOIN (SELECT runnerid, AVG(Rating) as Rating
          FROM (SELECT if(@prevrunnerid = runnerid,
                          @rank := @rank + 1,
                          @rank := 1) as rank,
                       @prevrunnerid := runnerid
                           as runnerid,
                       Rating
                FROM vwResults
                ORDER BY runnerid, Rating) as sq
          WHERE rank <= 3
          GROUP BY runnerid) as top3rating
        on (r.id = top3rating.runnerid);
END //

delimiter ; 
```

# c++ - std::mem_fun 与 std::mem_fn

> ID：11680807
> 
> 赞同：34
> 
> 时间：2012-07-27T02:49:03.800
> 
> 标签：c++, c++11, std, member-functions

**`std::mem_fun`**和 和有什么不一样**`std::mem_fn`**？为什么命名如此混乱？

Boost 的[文档](http://www.boost.org/doc/libs/1_50_0/libs/bind/mem_fn.html)说在大多数情况下`std::mem_fn`可以替换。`std::mem_fun`那么在什么情况下你还会使用`std::mem_fun`呢？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-27T03:02:39.273

`std::mem_fun`已弃用。`std::mem_fn`可以做它所做的一切，而且做起来更方便。两者的关系与`std::bind1st`/`std::bind2nd`和 C++11的关系相同`std::bind`。两者都是在 C++98 标准之后开发`std::mem_fn`和`std::bind`掌握的。所以这意味着我们必须等到 C++11 才能用更好的替代品正确地替换旧的东西。`std::bind1st``std::mem_fun`

例如，`std::mem_fun`只能处理带一个或不带参数的成员函数。`std::mem_fn`是可变的，可以处理带有任意数量参数的成员。

`std::mem_fun`您还需要`std::mem_fun_ref`根据是否要处理类对象的指针或引用（分别）进行选择。`std::mem_fn`单独可以处理任何一个，甚至提供对智能指针的支持。

的文档`boost::mem_fn`解释了何时使用`std::mem_fun`，简单地说就是当您需要使用期望的代码`std::mem_fun`或期望可适应的函子（这是 C++03 中的一个过时的概念*）进行操作的时候。对于这些情况，您也无法插入`std::mem_fn`，因此您拥有它：您将`std::mem_fun`用于旧版。

*：我的意思是新代码不应该依赖于具有例如成员类型的 C++03 协议（`result_type`更习惯于使用新的特征`std::result_of`，如它们将出现在等效的 C++03 代码中。我让你来决定是否应该通过依赖这种行为来更新依赖于可适应函子的旧代码。`std::bind``std::mem_fn``std::mem_fn`

# php - 如何调用位于 public_html 之外的 php 文件

> ID：11680808
> 
> 赞同：3
> 
> 时间：2012-07-27T02:49:28.647
> 
> 标签：php, security, invoke, public-html

我正在创建一个网站，在安全性方面我非常强迫症，所以我听说如果您将所有 .php 文件存储在 public_html 文件夹之外并使用 public_html 文件夹内的另一个 .php 文件调用它们，那么您的风险攻击较低。这是真的吗，如果是这样，我该怎么做。我读了一些关于使用 .htaccess 的文章，但我不确定这是否是正确的方法。我虽然可以使用包含，但我不确定包含如何与参数一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:53:17.557

这种策略并没有提供大量的额外保护。主要是，它确保如果您的服务器配置错误并且无法将 PHP 脚本发送到 PHP 解释器，它不允许将 PHP 代码直接发送到浏览器。

您不会将*所有*PHP 脚本存储在文档根目录之外。您通常只存储不打算在文档根目录之外公开访问的文件。将包含文件存储在 doc 根目录之外，并像包含任何文件一样包含它们。将作为公共视图的文件存储在文档根目录中，因为它们需要可通过 Web 访问。

有一种称为[前端控制器模式](http://en.wikipedia.org/wiki/Front_Controller_pattern)的设计模式，其中单个索引页面 (index.php) 接受路由并根据需要包含其他文件。许多 PHP 框架开箱即用地支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:52:52.223

参见 PHP 包含函数：[http ://www.php.net/manual/en/function.include.php](http://www.php.net/manual/en/function.include.php)

但是，我怀疑您尝试做的事情会增加安全性。您从哪里听说它可以提高安全性？

# sql - 使用 VBScript（来自 cmd）将二进制文件上传到启用文件流的表

> ID：11680810
> 
> 赞同：0
> 
> 时间：2012-07-27T02:49:50.443
> 
> 标签：sql, sql-server-2008, upload, vbscript, filestream

我想使用 VBScript（从 cmd 提示符，使用 cscript）将二进制文件插入启用文件流的（远程）数据库中。当我在本地数据库上进行测试时，我的代码可以工作，但是因为代码使用的是：

```
INSERT........ * FROM OPENROWSET(BULK '"&objFile.Path&"', SINGLE_BLOB) 
```

该文件必须是本地文件（即在 SQL 服务器所在的机器上）。我需要从我的机器上传到远程 SQL 文件。到目前为止，这是我到达的地方： Wscript.Echo "Attempting to upload "& objFile.Name &" from folder "& objsubFolder.Name

```
binstream.open
binstream.LoadFromFile objFile.Path

myCommand.CommandText = "INSERT INTO DBNAME (TimeStamp, FileName, Data)" &_
"SELECT '"&objsubFolder.Name&"' AS TimeStamp," &_
"'"&objFile.Name&"' AS FileName," &_
"'"&binstream.Read&"' AS Data"
myCommand.Execute

binstream.close 
```

但是我得到的错误是：“Microsoft VBScript 运行时错误：类型不匹配”

我认为我很傻，因为我试图通过将二进制文件粘贴到 insert sql 语句中来插入二进制文件。我该如何解决这个问题并让它上传我的文件？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:05:09.390

IMO 最简单的方法是保持您的代码适用于上传本地文件，因为这样可以通过首先将文件复制到共享上的服务器来确保文件是本地的。然后从服务器上的脚本运行您测试的 sql，如果运行脚本的用户有足够的权限访问您在另一台 PC 上的文件或将其放在可以共享的共享上，也可以从服务器完成复制读。在服务器上执行脚本可以通过计划、监视文件夹的脚本或远程脚本或 PSFILE 来完成

# ios - 在ios中单击另一个视图中的按钮时如何加载UIWebView

> ID：11680814
> 
> 赞同：2
> 
> 时间：2012-07-27T02:50:56.077
> 
> 标签：ios, uiwebview

我想创建一个包含 UIWebview 的 ios 应用程序。我看到很多教程都说如何在启动应用程序时加载 webview。但我想要的是当用户点击一个视图中的链接时，网页应该在单独的视图中加载。这是我的按钮单击事件中的代码。

`

```
 -(IBAction)visitWeb:(id)sender{
         web *wb=[[web alloc]initWithNibName:nil bundle:nil];
     [self presentModalViewController:wb animated:YES];
     [wb release];} 
```

这是在网络

`

```
 - (void)viewDidLoad {

NSString *urlAddress = @"http://www.google.com";

//Create a URL object.
NSURL *url = [NSURL URLWithString:urlAddress];

//URL Requst Object
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

//Load the request in the UIWebView.
[webView loadRequest:requestObj];

[super viewDidLoad];  } 
```

但它不显示任何东西。只是显示空`UIWebView`的它的原因是什么。请用代码给我一个解决方案。

谢谢，

# linux - 在 Linux 上删除 Windows 换行符（sed 与 awk）

> ID：11680815
> 
> 赞同：33
> 
> 时间：2012-07-27T02:51:06.950
> 
> 标签：linux, sed, awk

在字段中间（不是行尾）有一些带有不正确放置换行符的分隔文件，在 Vim 中显示为 ^M。它们源自 MSSQL 数据库的 freebcp（在 Centos 6 上）导出。以十六进制转储数据显示 \r\n 模式：

```
$ xxd test.txt | grep 0d0a
0000190: 3932 3139 322d 3239 3836 0d0a 0d0a 7c43 
```

我可以用 awk 删除它们，但不能用 sed 做同样的事情。

这适用于 awk，完全删除换行符：

```
awk 'gsub(/\r/,""){printf $0;next}{print}' 
```

但这在 sed 中没有，而是保留了换行符：

```
sed -i 's/\r//g' 
```

这似乎没有效果：

```
sed -i 's/\r\n//g' 
```

在 sed 表达式 (ctrl+v, ctrl+m) 中使用 ^M 似乎也不起作用。

对于这类任务，sed 更容易理解，但我正在努力学习更多关于这两者的知识。我使用 sed 是否不当，还是有限制？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-27T03:05:20.967

您可以使用命令行工具`dos2unix`

```
dos2unix input 
```

或者使用`tr`命令：

```
tr -d '\r' <input >output 
```

* * *

实际上，您可以进行文件格式切换`vim`：

方法一：

```
:e ++ff=dos
:w ++ff=unix
:e! 
```

方法B：

```
:e ++ff=dos
:set ff=unix
:w 
```

* * *

### 编辑

如果要删除`\r\n`文件中的序列，请尝试以下命令`vim`：

```
:e ++ff=unix           " <-- make sure open with UNIX format
:%s/\r\n//g            " <-- remove all \r\n
:w                     " <-- save file 
```

您的`awk`解决方案工作正常。另外两个`sed`解决方案：

```
sed '1h;1!H;$!d;${g;s/\r\n//g}' input
sed ':A;/\r$/{N;bA};s/\r\n//g' input 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-27T03:04:51.273

我相信某些版本的`sed`将无法识别`\r`为字符。但是，您可以使用一项`bash`功能来解决该限制：

```
echo $string | sed $'s/\r//' 
```

在这里，您让'\r' 替换为构造`bash`中的实际回车符，然后将其作为命令传递给它。（假设您使用; 其他 shell 应该有类似的结构。）`$'...'``sed``bash`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-05-08T12:35:01.653

`sed -e 's/\r//g' input_file`

这对我有用。**-e**与**-i**命令的区别。

我还提到，在不同平台上看到的行为不同。我的是：`sed --version This is not GNU sed version 4.0`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-06-04T05:43:56.547

另一种方法

```
awk 1 RS='\r\n' ORS= 
```

*   将记录分隔符设置为`\r\n`
*   将输出记录分隔符设置为空字符串
*   `1`总是正确的，并且在没有动作块的情况下`{print}`使用

# javascript - 是否有从 Rally SDK 2 应用程序设置和检索设置的示例？

> ID：11680816
> 
> 赞同：2
> 
> 时间：2012-07-27T02:51:20.143
> 
> 标签：javascript, extjs, rally

设置对象是什么样的？我似乎无法用任何东西 updateSettings 并得到一些有趣的东西。我打印出 this.settings ，每次刷新时，它只记录一个没有值的原型对象。

这就是我的测试应用程序的样子。我将它放入 Rally 内部的面板中，而不是远程运行。

```
<script type="text/javascript" src="/apps/2.0p2/sdk.js"></script>

<script type="text/javascript">
    Rally.onReady(function() {
        /*global console, Ext */

        Ext.define('CustomApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',

            launch: function() {
                //Write app code here
                console.log( "settings", this.settings );
                this.updateSettings( { Name: 'test', Value: Ext.JSON.encode( { test: "blah" } ) } );
            }
        });

        Rally.launchApp('CustomApp', {
            name: 'test'
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:53:13.893

原来我使用的预览版有一个错误。 **我**试图传递错误的偏好。请注意，首选项的范围是 App ID，而不是项目或工作区。由于它需要应用程序的 ID，因此在 Rally 之外运行时它不起作用。

错误是 updateSettings 函数缺少一行。您可以通过在您的应用程序定义中添加相同的函数来轻松地覆盖它（源代码包含在文档中不是很整洁吗？）只需创建一个这样的函数：

```
updateSettings: function(options){
  Rally.data.PreferenceManager.updateAppPreferences({
    appID: this.getContext().get('appID'),
    settings: options.settings,
    success: function(updatedSettings){
      Ext.apply(this.settings, updatedSettings);
      if(options.success){
        options.success.call(options.scope);
      }
    },
    scope: this
  });
} 
```

因此，偏好对象应该像这样传递：

```
this.updateSettings( {settings: { test: "blah" ) } } ); 
```

然后，当它回来时， getSetting("test") 会给我“废话”。（它创建一个首选项，名称等于“test”，值等于“blah”，AppId 等于当前应用程序。

# audio - 有哪些方法可以从 CDN 流式传输音频以使其无法下载？

> ID：11680820
> 
> 赞同：0
> 
> 时间：2012-07-27T02:51:34.063
> 
> 标签：audio, streaming, cdn

我正在寻找一种从 CDN 服务器流式传输音频的方法，以便最终用户在没有先注册一个特殊帐户的情况下无法下载音频，但这样他们就可以在设置之前*预览*（整个）音频一个帐户。

最好的技术是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:57:35.093

正如@dykeag 所提到的，您所要求的在技术上是不可能完全做到的，因为人们总是可以通过模拟设备或通过特殊的音频驱动程序记录音频输出。

然而，有各种障碍使这变得更加困难，尽管它们基本上都依赖于拥有一个专用的客户端程序，对正在下载的音频流进行加密，并在您的客户端中对其进行解密。

# node.js - 从数组渲染mongodb？

> ID：11680821
> 
> 赞同：1
> 
> 时间：2012-07-27T02:51:34.707
> 
> 标签：node.js, mongodb, mongoose, express

让我重新表述我的问题。如何获取返回到数组中的数据以进行渲染。（我正在使用车把）

编码：

```
//http verbs
module.exports = {
    get: function(req, res) {
      gm(req.url);
        app.set('view engine', 'hbs'); 

        //session check

        if (session checks out<-not actual code){

            //get mongoose data here
            var bmdata = bmquery.execFind(function(err, docs){
                console.log(docs);
                var model = {
                    layout:'blog.hbs',
                    BlogModel: docs,
                };
            //render page
            res.render('blog', model);
            });
        }

        else {
            console.log('illegal user');
            console.log('redirection in progress');
            res.redirect('/login');
        }
    }

}; 
```

文档的 console.log 以这样的数组形式返回：[{document 1},{document 2}]

您是否也可以动态执行此操作，以便我不必放置数组位置。

我的车把是这样的：

```
{{BlogModel[0].title}}
{{BlogModel[0].content}}
{{BlogModel[1].title}}
{{BlogModel[1].content}} 
```

**问题** 数据以数组形式返回，我无法让它动态呈现或根本无法呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:48:11.617

```
var BlogModel = mongoose.model('blogmodel', BlogPost, 'blogmodel');
var bms = BlogModel.find({ "date" : { $gte : new Date("2011-01-01T00:00:00Z")}} ).limit(1);

module.exports = {
   get: function(req, res) {
      //ExecFind is asnychornous, so you need to wait to get the data to render it.
      bms.execFind(function(err, docs) {
        console.log(docs);
        var model = {
             layout:'blog.hbs',
             BlogModel: docs
        };
        res.render('blog', model);
      });
   }
}; 
```

此外，这应该在您的应用程序配置中，而不是搁置在应用程序中的模块上

```
app.set('view engine', 'hbs'); 
```

正如有人所说，您应该学习如何处理节点的异步特性，并更多地了解回调的概念。

# android - 在 Android 中使用 Web 视图 HTML

> ID：11680822
> 
> 赞同：0
> 
> 时间：2012-07-27T02:51:39.540
> 
> 标签：android, android-webview

我在我的应用程序中使用 Web 视图并加载 URL“http://google.com”现在我想自动搜索我在 TextView 中输入的单词。

thnx 回答我只是使用它并且它有效

```
String qString ="http://www.google.com/search?q=%s";
String test="dogs";
String q = qString + test;
web.loadUrl(q); 
```

一个非常简单的方法。叹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:24:46.207

尝试这个：

[http://www.google.com/search?q=dogs](http://www.google.com/search?q=dogs)

用文本字段中的任何内容替换狗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:47:17.413

使用 String.format(..) 方法将参数放在字符串中。所以

```
 String qString ="http://www.google.com/search?q=%s"; 
```

是查询字符串。

```
 String test="dogs";  // or whatever.
     String.format(qString, test); 
```

# jquery - Jquery根据宽度将最后两项包装在菜单中

> ID：11680824
> 
> 赞同：1
> 
> 时间：2012-07-27T02:52:01.260
> 
> 标签：jquery

好的，所以我想根据宽度更改导航菜单的内容，如果它是 720 像素（对于平板电脑），菜单将获取最后两项并将它们放在下拉菜单中。

这是我的代码

```
if($('.topNavigation').css('width','720px')){
    $('.topNavigation ul').slice(-2).wrapAll(function(){
        return '<li><a href="#" class="moreNavItem">More</a><ul>' + $(this) + "</ul></li>";
})
} 
```

所以这不太奏效，它只是为菜单分配了一个宽度，并没有正确地包装项目。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:49:34.163

要测试宽度是否为 720px，您应该编写

```
if($('.topNavigation').css('width') == '720px') {
    $('.topNavigation ul').slice(-2).wrapall('<li><a href="#" lass="moreNavItem">More</a><ul></ul></li>')
} 
```

与许多 jQuery 属性函数一样，给一个参数检索值，两个参数设置值。

编辑：添加包装代码

# parsing - 斯坦福 NLP 依赖树解析器中的缺失词

> ID：11680825
> 
> 赞同：1
> 
> 时间：2012-07-27T02:52:10.810
> 
> 标签：parsing, tree, stanford-nlp

我正在使用依赖树解析器制作应用程序。实际上，解析器是这样的： [Parser Stanford](http://nlp.stanford.edu/software/stanford-dependencies.shtml)，但它很少更改我要解析的句子中某些单词的一两个字母。这对我来说是个大麻烦，因为我在这些变化中看不到任何模式，并且我需要与我的句子中的单词相同的依赖树。

我所看到的只是一些单词有这些问题。我正在使用推文数据库。所以，我在这个数据中有很多语法错误。例如，主题标签“#AllAmericanhumour”变为 AllAmericanhumor。它错过了一个字母（u）。

我能做些什么来解决这个问题吗？在我的第一个观点中，我认为使用编辑距离算法，但我认为这可能是一种更简单的方法。

提前谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:50:12.870

您可以使用 -tokenize.options 标志/属性为标记器提供选项。对于这种特殊的标准化，您可以将其关闭

```
-tokenize.options americanize=false 
```

您还可以关闭各种其他规范化（请参阅 PTBTokenizer 或[http://nlp.stanford.edu/software/tokenizer.shtml](http://nlp.stanford.edu/software/tokenizer.shtml)。您可以关闭很多

```
-tokenize.options ptb3Escaping=false 
```

但是，解析器是在看起来像输出的数据上训练的`ptb3Escaping=true`，因此如果与未标准化的标记一起使用，性能往往会下降。因此，您可能需要考虑替代策略。

如果您在 Java 级别工作，您可以查看单词 tokens，它们实际上是 Map，并且它们具有各种键。OriginalTextAnnotation 将为您提供未规范化的标记，即使它已被规范化。CharacterOffsetBeginAnnotation 和 CharacterOffsetEndAnnotation 将映射到文本中的字符偏移量。

ps 你应该接受一些答案:-)。

# html - HTML：在邮件中发送图像？body

> ID：11680826
> 
> 赞同：6
> 
> 时间：2012-07-27T02:52:15.537
> 
> 标签：html, email, mailto

我习惯于使用 mailto 功能设置带有文本的电子邮件的正文和主题，例如：

```
href="mailto:?body=Thanks!" 
```

但是有没有办法在正文中发送图像？例如：

```
href="mailto:?body=<img src='http://www.example.com/image.jpg'>" 
```

（显然以上不起作用 - 它只是将 html 添加为字符串）

任何建议表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T02:56:06.897

从[马口中](https://www.rfc-editor.org/rfc/rfc2368)：

> “body” hname 应包含消息的第一个文本/纯正文部分的内容。mailto URL 主要用于生成实际上是自动处理内容的短文本消息（例如邮件列表的“订阅”消息），而不是一般的 MIME 正文。

换句话说，内容是文本/纯格式，而不是 MIME HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-14T12:22:04.377

你问的是不可能的。`mailto`仅限于发送文本和促销信息，因此您不能使用`mailto`.

# android - 连接到 Android 手机的外围加速度计

> ID：11680827
> 
> 赞同：1
> 
> 时间：2012-07-27T02:52:17.603
> 
> 标签：android, android-ndk, linux-kernel, accelerometer

我正在用安卓智能手机和加速度计做一个实验来检测一些值。由于手机定位的限制，我打算使用外围加速度传感器代替内置的Android智能手机传感器。

是否有任何外围加速度计传感器可用于收集数据并通过某种通信（更好的无线，例如蓝牙）实时发送到 Android 手机。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:13:44.953

从理论上讲，您可以使用任何具有 Linux 驱动程序的外围设备。您必须为您的手机编译一个自定义内核，并启用并包含此驱动程序。

请注意，要安装自定义内核，您必须对您的手机进行 root，这将使其保修失效。

# c# - 使用 XNA 4.0 游戏类是否可以每秒更新 60 次以上？

> ID：11680828
> 
> 赞同：1
> 
> 时间：2012-07-27T02:52:18.230
> 
> 标签：c#, xna-4.0

我在 XNA 4.0 中的计时、用 C# 编写和使用 Visual Studio 2010 express 时遇到问题。

我并没有完全写游戏，但我正在尝试使用 XNA 来简化内容管道、绘图和计时。我想要做的是编写一个程序，该程序可以以非常精细的分辨率计时用户对屏幕刺激的响应——理想情况下小于 5 毫秒。

为此，我需要至少每 5 毫秒调用一次更新例程（以便我可以轮询键盘）。即使在可变步长计时中，每次调用我也无法获得低于约 16 毫秒的计时。这似乎与我在更新和绘制例程中所做的处理量无关。我可以注释掉这两个例程中的所有内容，并且程序在每次迭代中仍然花费大约 16.66 毫秒。

在固定步长计时中，我可以将目标设置为每秒大约 60 次迭代（更新之间为 16.66 毫秒），但如果我尝试比这更快，IsRunningSlowly 标志被触发，游戏似乎试图补偿 - 几个迭代将运行得快于每秒 60 次迭代，然后 1 次迭代将运行得更慢。

所以我想我的问题是：每秒 60 次迭代是 XNA 的上限吗？有可能绕过它吗？我应该完全放弃 XNA 吗？

我非常感谢您的时间和知识。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:06:13.017

您遇到的问题是由于 VSync。通过将此行添加到游戏的构造函数（假设您有 default `GraphicsDeviceManager graphics`）在 XNA 中禁用它：

```
graphics.SynchronizeWithVerticalRetrace = false; 
```

这将使您的游戏“尽可能快”地运行。对于您的目的，这应该“足够好”。

有关 XNA 中时序的描述，请参阅[此博客文章](http://blogs.msdn.com/b/shawnhar/archive/2007/11/23/game-timing-in-xna-game-studio-2-0.aspx)。

如果您想更花哨：对于 Windows 上的 XNA，我会考虑直接使用 Windows 事件循环和高分辨率计时器。请注意，`Game`在 XNA 中（在 Windows 和 Xbox 360 上）是完全可选的。

您希望将尽可能多的慢速操作（例如：更新和绘制）和阻塞操作（例如：vsync）移出主线程。请注意，XNA 中的输入只能在主线程上处理。我认为您可以在单独的线程上创建图形设备 - 尽管我从未尝试过。

您应该注意，如果您正在测量反应时间，则在向 GPU 发送“呈现”命令与实际出现在屏幕上的内容之间存在延迟。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T08:57:42.933

我不是 XNA 开发专家，但是，我知道我已经在 windows phone 中遇到了类似的“问题”。（慢慢的问题）。

当你有很多处理时，使用[多线程编程](http://msdn.microsoft.com/fr-fr/library/ck8bc5c6.aspx)，，

msdn：“使用多线程的应用程序对用户输入的响应速度更快，因为当处理器密集型任务在单独的线程上执行时，用户界面保持活动状态。当您创建可扩展的应用程序时，多线程也很有用，因为您可以随着工作负载的增加添加线程。”

希望我能帮助你...

# jsf - bean返回对象时的导航

> ID：11680831
> 
> 赞同：0
> 
> 时间：2012-07-27T02:52:26.730
> 
> 标签：jsf, jsf-2

关于更改视图中的信息（而不是转到不同的 .xhtml 页面）的初学者问题。我的 .xhtml 显示一个数据表（显示人员列表），但我希望用户能够通过在输入文本中输入某人姓名的开头然后单击命令按钮来缩小显示的信息量。commandbutton 和 datatable 都执行相同的 bean 方法，但如果 inputtext 有数据，则 sql 使用 Like（这使用 jdbc）。我的表单如下，问题是我得到一个“无法找到与 from-view-id 匹配的导航案例”，因为我的托管 bean 返回一个对象列表，而不是“成功”或“失败”。此外，整个表格似乎效率低下。这似乎是一个相当常见的场景 - 调用返回对象而不是导航指令的托管 bean 的方法。如何摆脱错误消息？有一个更好的方法吗？

这是代码：

```
<h:head>
    <h:outputStylesheet library="css" name="table-style.css"  />
</h:head>

<h:body>

    <h1>MavenWeb</h1>

    <h:form>
        <h:panelGrid columns="3">
            Select a customer:

            <h:inputText id="listName" value="#{customer.listName}" 
                size="20" >
            </h:inputText>
            <h:commandButton value="Submit"
                                         action="#customer.getCustomerList()}" />

        </h:panelGrid>

    <h:dataTable value="#{customer.getCustomerList()}" var="c"
            styleClass="order-table"
            headerClass="order-table-header"
            rowClasses="order-table-odd-row,order-table-even-row"
        >

        <h:column>
            <f:facet name="header">
                Customer ID
            </f:facet>
                #{c.customerID}
        </h:column>

        <h:column>
            <f:facet name="header">
                Name
            </f:facet>
                #{c.name}
        </h:column>

        <h:column>
            <f:facet name="header">
                Address
            </f:facet>
                #{c.address}
        </h:column>

        <h:column>
            <f:facet name="header">
                Created Date
            </f:facet>
                #{c.created_date}
        </h:column>

    </h:dataTable>
</h:form>
</h:body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:18:13.637

首先，确保您的托管 bean 具有 ViewScope，因此当您在同一个视图中时，每个请求只会影响表单值。其次，您可以将 ajax 行为添加到您的并使用新值`<h:commandButton>`呈现。`<h:datatable>`第三，**永远不要**将业务逻辑放在属性 getter 中，因为 JSF 框架可以对这些 getter 进行 2 次或更多调用（取决于您的设计）。

使用这些规则，您可以像这样重新编写代码：

```
@ViewScoped
@ManagedBean
public class Customer {
    private String listName;
    private List<CustomerDTO> customerList;

    public Customer() {
        listName = "";
        customerList = null; //maybe you can initialize your list here
    }

    //getters and setters...

    //look that this method returns a void (no need to return a navigation rule)
    public void fillCustomerList() {
        //your method/way to fill the customerList goes here...
        //I'll just put a code example
        customerList = new ArrayList<CustomerDTO>();
        customerList.add(new CustomerDTO(1, "Luiggi Mendoza", "Lima", new Date());
        customerList.add(new CustomerDTO(2, "StackOverflow", "Web", new Date());
    }

} 
```

您页面的代码片段

```
<h:form>
    <h:panelGrid columns="3">
        Select a customer:
        <h:inputText id="listName" value="#{customer.listName}" size="20" />
        <h:commandButton value="Submit" action="#customer.fillCustomerList}">
            <f:ajax execute="@this" render="dtMyDataTable" />
        </h:commandButton>
    </h:panelGrid>

    <h:dataTable id="dtMyDataTable" value="#{customer.customerList}" var="c"
        styleClass="order-table"
        headerClass="order-table-header"
        rowClasses="order-table-odd-row,order-table-even-row">
        <h:column>
            <f:facet name="header">
                Customer ID
            </f:facet>
            #{c.customerID}
        </h:column>
        <h:column>
            <f:facet name="header">
                Name
            </f:facet>
            #{c.name}
        </h:column>
        <h:column>
            <f:facet name="header">
                Address
            </f:facet>
            #{c.address}
        </h:column>
        <h:column>
            <f:facet name="header">
                Created Date
            </f:facet>
            #{c.created_date}
        </h:column>
     </h:dataTable>
</h:form> 
```

关于此事的更多信息：

*   [视图范围 bean 在导航 JSF 中是否存在](https://stackoverflow.com/q/4831888/1065197)
*   [学习 JSF2：JSF 中的 Ajax – 使用 f:ajax 标签](http://mkblog.exadel.com/2010/04/learning-jsf-2-ajax-in-jsf-using-fajax-tag/)

# qt - Qt：事件不可见小部件？

> ID：11680833
> 
> 赞同：0
> 
> 时间：2012-07-27T02:52:29.507
> 
> 标签：qt, events, qwidget, qtablewidget

由于某些原因，我需要将一个小部件相互绘制。结构如下（见图）：

*   我有一个原始的 QTableWigetItem
*   在 QTableWigetItem 上，我在前台创建了一个具有相同几何形状的 QWidget
*   这个 QWidget 包含一个 QBoxLayout
*   这个 QBoxLayout 包含一个 QPixmap 和一个 QComboBox ![在此处输入图像描述](../Images/3f1fc85e20cb246b917843fdf19a6357.png)

我想做以下事情： QWidget 只是我的 QBoxLayout 的“容器”，我想将他设置为对用户完全“不可见”。如果用户在小部件的位置单击或移动，我希望触发背景中的 QTableWigetItem 事件。但问题是我希望 QPixmap 和 QComboBox 位于前台、可见且“正常”。对我来说，能够将子小部件放在 HeaderView 的 QTableWidget 中只是一个技巧。

如何使 QWidget “完全不可见”（从事件/信号的角度来看）？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:32:46.593

尝试`QWidget::setWindowOpacity(0)`

# php - php数据测试

> ID：11680838
> 
> 赞同：1
> 
> 时间：2012-07-27T02:52:58.637
> 
> 标签：php

我对一些数据进行了以下测试：

```
if(isset($option_type)
    && ($option_type == 3 || $option_type == 4
                && (isset($ext_data) && $ext_data != "")
                )
  ){} 
```

它应该做的是，如果 $option 类型不是 3 或 4，则测试应该返回 true。如果 $option 类型是 3 或 4 并且 $ext_data 不存在或等于“”，那么测试应该返回 false。

但是，无论 $option_type 是什么，它都会返回 false。

如何格式化此测试，以便当 $option_type 为 3 或 4 且 $ext_data 存在且不是“”时，结果为真？

李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:01:05.843

我会将测试分成两部分以使其更清晰：

```
if (!isset($ext_data) || $ext_data == "") return false;
return $option_type != 3 && $option_type != 4; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:55:10.187

//试试这个

```
if(isset($option_type)&& ($option_type == 3 || $option_type == 4)){
    if (isset($ext_data) && $ext_data == ""){
            return false;
    }else{
        return true;
    }

  } 
```

# javascript - Javascript 长度值对于 textarea 既不一致也不正确

> ID：11680839
> 
> 赞同：1
> 
> 时间：2012-07-27T02:53:01.073
> 
> 标签：javascript, jquery, html, textarea

** 更新 **

修改了 Ricardo Lohmann 建议的代码，增加了使用 val() 而不是 text() 的修改。

它仍然不正确，但更加一致。最初，它关闭 1 个字符，并且在文本区域中每按下一个回车键，它就会逐渐关闭一个额外的字符。我还不确定文本区域是否正在返回，但它不是 CRLF。

我认为这是主要问题。我将对传递给 SMS 处理器的回车和换行进行一些测试，并希望我可以在事后进行转换。

解析 textarea 值并为每个按下的“输入键”添加 1 个字符将得到我想要的值。

如果有人对如何让 textarea 使用完整的 CRLF 有任何想法，我会全力以赴。

* * *

我允许经理创建 SMS 消息并需要向他们显示正在使用的字符数。到目前为止，当我开始时字符数减少了 1，然后随着时间的推移变得非常不准确。

```
<textarea id="message_content"></textarea>
<div id="message_length"></div> 
```

消息内容最初是用 Javascript 设置的。

```
uri_decoded = 'Test Message\r\nTest Message'; 
```

使用 select-all 选择所有文本并放入 Notepad++ 之类的文本编辑器中显示 26 个字符，这是正确的。22 个字符，2 个空格，2 个 CRLF。

以下代码最初显示 25 个字符，然后根本无法准确表示它：

```
 // Dynamically update the SMS length when keys are pressed
    $("#message_content").keypress(function(e){
      var string_length = $("#message_content").text().length + 1;
      var message_count = string_length / 160;
      message_count = Math.ceil(message_count);  
      var html = '';
      html = html + message_count + ' message(s) - ' + string_length + ' characters';
      $("#message_length").html(html);

    });

    // Dynamically update the SMS length when the textarea blurs
    $("#message_content").blur(function(){
      var string_length = $("#message_content").text().length;
      var message_count = string_length / 160;
      message_count = Math.ceil(message_count);  
      var html = '';
      html = html + message_count + ' message(s) - ' + string_length + ' characters';
      $("#message_length").html(html);
    });

    // Perform an initial update on the character count
    $("#message_content").blur(); 
```

现在在按键功能上，我已将 1 添加到 AFAICT 以来的长度，该事件无法访问添加了新字符的内容。无论如何，该事件最初不会触发，我主要评估模糊事件。

我选择 textarea 是因为它准确地表示了从数据库传递的 CRLF，最终传递给 SMS 处理器。

在获得准确值时，我们将不胜感激任何帮助或观察。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:20:11.947

修复以下问题：
`var string_length = $("#message_content").text().length + 1;`
如果没有文字[demo](http://jsfiddle.net/zVx8s/10/)则返回 1 。

改为使用`keyup`。

您可以在两个事件中使用相同的来。

```
$("#message_content").on('blur keyup', function(){
    var string_length = $("#message_content").text().length;
    var message_count = string_length / 160;
    message_count = Math.ceil(message_count);  
    var html = '';
    html = html + message_count + ' message(s) - ' + string_length + ' characters';
    $("#message_length").html(html);
}); 
```

# c++ - 读取/显示实际字节 (C++)

> ID：11680842
> 
> 赞同：1
> 
> 时间：2012-07-27T02:53:42.897
> 
> 标签：c++, binary, hex, iostream, cout

```
int main()
{
    cout << hex;
    cout << (0xe & 0x3); // 1110 & 0011 -> 0010 (AND)
    cout << endl;
    cout << (0xe | 0x3); // 1110 | 0011 -> 1111 (OR)
    cout << endl;
    cout << (0xe ^ 0x3); // 1110 ^ 0011 -> 1101 (XOR)
    return 0;
} 
```

使用 cout 时，它显示转换（2、f 和 d）与实际值（0010、1111 和 1101）。我如何使它显示这个与位的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:57:09.270

这些是`hex`您请求的二进制值表示的正确值：`0010`是 2、`1111`是 f 和`1101`是 d。

如果你想打印一个二进制表示，你可以从[这里](http://www.arachnoid.com/cpptutor/student3.html)`convBase`借用函数，或者构建你自己的。

```
cout << convBase((0xe & 0x3), 2); // 1110 & 0011 -> 0010 (AND)
cout << endl;
cout << convBase((0xe | 0x3), 2); // 1110 | 0011 -> 1111 (OR)
cout << endl;
cout << convBase((0xe ^ 0x3), 2); // 1110 ^ 0011 -> 1101 (XOR) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:22:02.193

***例如：***

```
#include <iostream>
#include <string>

using namespace std;

string convBase(unsigned long v, long base) {
  if (base < 2 || base > 16) return "Error: base out of range;";

  string result;
  string digits = "0123456789abcdef";

  do {
    result = digits[v % base] + result;
    v /= base;
  } while (v);

  return result;
}

int main(int argc, char** argv) {
  int a = 0xe;
  int b = 0x3;

  cout << hex;

  cout << (a & b) << " - " << convBase(a & b, 2);
  cout << endl;
  cout << (a | b) << " - " << convBase(a | b, 2);
  cout << endl;
  cout << (a ^ b) << " - " << convBase(a ^ b, 2);
  cout << endl;

  return 0;
} 
```

***输出：***

2 - 10 f - 1111 d - 1101

# python - 如何使用 xapian 和 python 匹配精确的短语？

> ID：11680843
> 
> 赞同：1
> 
> 时间：2012-07-27T02:53:53.457
> 
> 标签：python, xapian

这是我的代码：

```
db = xapian.Database(path/to/database)
enquire = xapian.Enquire
stemmer = xapian.Stem(<supported language>)
query_parser = xapian.QueryParser()
query_parser.set_database(db)
query_parser.set_stemmer(stemmer)
query_parser.set_default_op(xapian.query.OP_OR)
xapian_flags = xapian.QueryParser.FLAG_BOOLEAN | xapian.QueryParser.FLAG_SYNONYM | xapian.QueryParser.FLAG_LOVEHATE
query = query_parser.parse_query('"this exact phrase"', xapian_flags)
enquiry.set_query(query) 
```

这与“这个确切的短语”不匹配（除了完全匹配之外，我几乎可以实现所有目标）。请注意，我已经包含了文档中提到的双引号。有没有办法实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:59:08.517

通过将标志显式设置为查询解析器，您可以覆盖默认的`FLAG_PHRASE | FLAG_LOVEHATE | FLAG_BOOLEAN`. 因此，您所做的是打开同义词支持但关闭短语搜索，这是双引号所依赖的。

请注意，短语搜索与精确匹配并不完全相同，尽管如果没有更多上下文，很难判断这是否是针对您的情况采取的错误方法。

# python-3.x - 销毁 Box 内的内容后在 Box 内显示 TreeView (GTK+)

> ID：11680847
> 
> 赞同：0
> 
> 时间：2012-07-27T02:54:21.557
> 
> 标签：python-3.x, gtk, pygtk

所以我有一个窗口，其中有一个带有 3 个分区的 hbox。在第二个中，我有一个带有 2 个分区的 vbox，在这个 vbox 内我有 2 个带有他各自树视图的滚动窗口。

在我的代码中，我在第三个 hbox 分隔符中有一个 Next 按钮。单击后，我销毁了 2 个滚动窗口，并用他的 ListStore 创建了一个新的 Treeview，并对我有 2 个滚动窗口的 vbox 说 pack_start，但没有显示，只有第一个和第三个 hbox 分隔符。

这是我的代码：（我尝试在最后一个函数中创建新的 TreeView）

```
import xml.etree.ElementTree as etree
import gi
from gi.repository import Gtk

present_step = 0

locale_selected = ''
keymap_selected = ''

class main():

def __init__(self):

    builder = Gtk.Builder()
    builder.add_from_file("cnchi.ui")

    self.window = builder.get_object("mainwindow")
    self.header_label = builder.get_object("label_action")
    self.progressbar = builder.get_object("progressbar1")
    self.forward_button = builder.get_object("forward_button")
    self.box = builder.get_object("box1")
    self.main_info_box = builder.get_object("box2")
    self.scrolleft = builder.get_object("scrolledwindow1")
    self.scrolright = builder.get_object("scrolledwindow2")
    self.treeview_language = builder.get_object("treeview1")
    self.treeview_keymap = builder.get_object("treeview2")

    self.window.connect("delete-event", Gtk.main_quit)
    builder.connect_signals(self)
    self.window.set_title('Cinnarch Installer')
    self.window.set_position(Gtk.WindowPosition.CENTER)

    self.set_languages_list()
    self.set_keymaps_list()

    self.window.show_all()

def set_languages_list(self):
    tree = etree.parse("locales.xml")
    root = tree.getroot()

    liststore_language = Gtk.ListStore(str)

    render = Gtk.CellRendererText()
    col_languages = Gtk.TreeViewColumn("Languages",render,text=0)
    self.treeview_language.set_model(liststore_language)
    self.treeview_language.append_column(col_languages)

    for child in root:
        liststore_language.append([child.find('language_name').text])

def set_keymaps_list(self):
    tree = etree.parse("keymaps.xml")
    root = tree.getroot()

    liststore_keymap = Gtk.ListStore(str)

    render = Gtk.CellRendererText()
    col_keymaps = Gtk.TreeViewColumn("Keymaps",render,text=0)
    self.treeview_keymap.set_model(liststore_keymap)
    self.treeview_keymap.append_column(col_keymaps)

    for child in root:
        liststore_keymap.append([child.find('language_name').text])

def on_forward_button_clicked(self, widget, data=None):
    new_value = self.progressbar.get_fraction() + 0.1
    global present_step

    if new_value > 1:
        new_value = 0

    self.progressbar.set_fraction(new_value)

    if present_step == 0:
        self.get_language_value()
        self.get_keymap_value()
        self.scrolleft.destroy()
        self.scrolright.destroy()
        # self.firstbox.destroy()
        self.timezone_window()

    elif present_step == 1:
        self.main_info_box.show()

    present_step = present_step + 1

def get_language_value(self):
    global locale_selected
    selected = self.treeview_language.get_selection()

    (ls, iter) = selected.get_selected()
    language = ls.get_value(iter,0)

    tree = etree.parse("locales.xml")
    root = tree.getroot()

    for child in root:
        if child.find('language_name').text == language:
            locale_selected = child.find('locale_name').text

def get_keymap_value(self):
    global keymap_selected
    selected = self.treeview_keymap.get_selection()

    (ls, iter) = selected.get_selected()

    keymap = ls.get_value(iter,0)

    tree = etree.parse("keymaps.xml")
    root = tree.getroot()

    for child in root:
        if child.find('language_name').text == keymap:
            keymap_selected = child.find('keymap_name').text

def timezone_window(self):
    tree = etree.parse("timezones.xml")
    root = tree.getroot()

    self.header_label.set_text("Configure your Timezone")

    liststore_timezone = Gtk.ListStore(str)

    render = Gtk.CellRendererText()
    col_timezones = Gtk.TreeViewColumn("Timezones",render,text=0)

    treeview_timezone = Gtk.TreeView(liststore_timezone)

    treeview_timezone.set_model(liststore_timezone)
    treeview_timezone.append_column(col_timezones)

    for child in root:
        liststore_timezone.append([child.find('timezone_name').text])

    self.main_info_box.pack_start(treeview_timezone,True,True,0)

if __name__ == '__main__':
    main()
    Gtk.main() 
```

在最后一行之后，如果我执行“treeview_timezone.show()”之类的操作，则会显示蓝屏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:19:58.900

解决了

这就是我的 timezone_window 函数现在的样子

```
def timezone_window(self):
    tree = etree.parse("timezones.xml")
    root = tree.getroot()

    self.header_label.set_text("Configure your Timezone")

    scrolledwindow = Gtk.ScrolledWindow()
    scrolledwindow.set_vexpand(True)

    liststore_timezone = Gtk.ListStore(str)

    render = Gtk.CellRendererText()
    col_timezones = Gtk.TreeViewColumn("Timezones",render,text=0)

    treeview_timezone = Gtk.TreeView(liststore_timezone)

    treeview_timezone.set_model(liststore_timezone)
    treeview_timezone.append_column(col_timezones)

    for child in root:
        liststore_timezone.append([child.find('timezone_name').text])

    scrolledwindow.add(treeview_timezone)
    self.main_info_box.pack_start(scrolledwindow, False, False, 0)
    treeview_timezone.show()
    scrolledwindow.show() 
```

# c# - 带序列的多线程

> ID：11680850
> 
> 赞同：1
> 
> 时间：2012-07-27T02:54:42.733
> 
> 标签：c#, multithreading, sequence

我有一个主要任务是产生线程来做一些工作。工作完成后，它将写入控制台。

我的问题是稍后创建的某些线程将比之前创建的线程更快地完成。但是，我需要以与创建线程相同的顺序完成对控制台的写入。

因此，如果一个线程已经完成了它的任务，而一些较早的线程还没有，它也必须等到那些较早的线程完成。

```
 public class DoRead
    {
        public DoRead()
        {
        }

        private void StartReading()
        {
            int i = 1;

            while (i < 10000)
            {
                Runner r = new Runner(i, "Work" + i.ToString());
                r.StartThread();
                i += 1;
            }
        }
    }

    internal class Runner : System.IDisposable
    {
        int _count;
        string _work = "";

        public Runner(int Count, string Work)
        {
            _count = Count;
            _work = Work;
        }

        public void StartThread()
        {
            ThreadPool.QueueUserWorkItem(new WaitCallback(runThreadInPool), this);
        }

        public static void runThreadInPool(object obj)
        {
            ((Runner)obj).run();
        }

        public void run()
        {
            try
            {
                Random r = new Random();
                int num = r.Next(1000, 2000);

                DateTime end = DateTime.Now.AddMilliseconds(num);
                while (end > DateTime.Now)
                {
                }

                Console.WriteLine(_count.ToString() + " : Done!");
            }
            catch
            {
            }
            finally
            {
                 _work = null;
            }
        }

        public void Dispose()
        {
             this._work = null;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:59:16.097

可能有比我使用的更简单的方法（我习惯于.Net 4.0）。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Threading;

namespace ConsoleApplication5
{
    class Program
    {
        public static readonly int numOfTasks = 100;

        public static int numTasksLeft = numOfTasks;

        public static readonly object TaskDecrementLock = new object();

        static void Main(string[] args)
        {
            DoRead dr = new DoRead();

            dr.StartReading();

            int tmpNumTasks = numTasksLeft;

            while ( tmpNumTasks > 0 )
            {
                Thread.Sleep(1000);
                tmpNumTasks = numTasksLeft;
            }

            List<string> strings = new List<string>();

            lock( DoRead.locker )
            {
                for (int i = 1; i <= Program.numOfTasks; i++)
                {
                    strings.Add( DoRead.dicto[i] );
                }
            }

            foreach (string s in strings)
            {
                Console.WriteLine(s);
            }

            Console.ReadLine();
        }

        public class DoRead
        {

            public static readonly object locker = new object();

            public static Dictionary<int, string> dicto = new Dictionary<int, string>();

            public DoRead()
            {
            }

            public void StartReading()
            {
                int i = 1;

                while (i <= Program.numOfTasks )
                {
                    Runner r = new Runner(i, "Work" + i.ToString());
                    r.StartThread();
                    i += 1;
                }

            }
        }

        internal class Runner : System.IDisposable
        {
            int _count;
            string _work = "";

            public Runner(int Count, string Work)
            {
                _count = Count;
                _work = Work;
            }

            public void StartThread()
            {
                ThreadPool.QueueUserWorkItem(new WaitCallback(runThreadInPool), this);
            }

            public static void runThreadInPool(object obj)
            {
                Runner theRunner = ((Runner)obj);
                string theString = theRunner.run();

                lock (DoRead.locker)
                {
                    DoRead.dicto.Add( theRunner._count, theString);
                }

                lock (Program.TaskDecrementLock)
                {
                    Program.numTasksLeft--;
                }
            }

            public string run()
            {
                try
                {
                    Random r = new Random();
                    int num = r.Next(1000, 2000);

                    Thread.Sleep(num);

                    string theString = _count.ToString() + " : Done!";

                    return theString;

                }
                catch
                {
                }
                finally
                {
                    _work = null;
                }

                return "";
            }

            public void Dispose()
            {
                this._work = null;
            }

        }
    }
} 
```

基本上，我将您希望从每个任务打印的字符串存储到索引为任务#的字典中。（我使用锁来确保访问字典的安全）。

接下来，为了让主程序等到所有后台线程都完成，我使用了另一个对 NumTasksLeft 变量的锁定访问。

我在 Runner 的回调中添加了一些东西。

使用繁忙循环是不好的做法，因此我将其更改为 Thread.Sleep(num) 语句。

只需将 numOfTasks 更改为 10000 以匹配您的示例。

我按顺序从字典中拉出返回字符串，然后将其打印到屏幕上。

我相信您可以重构它以移动或以其他方式处理全局变量，但这有效。

另外，你可能已经注意到我没有在命令中使用 lock

```
 tmpNumTasks = numTasksLeft; 
```

那是线程安全的，因为 numTasksLeft 是一个 int，它可以在 32 位或更高的计算机上以原子方式读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:24:33.257

我对 C# 了解不多，但多线程的整个想法是您有多个线程独立执行，您永远无法知道哪个线程会更早完成（并且您不应该期望更早的线程更早结束）。

一种解决方法是，代替在处理线程中写出完成消息，让处理线程在某处设置一个标志（可能是一个没有元素的列表=没有产生线程），并让一个单独的线程根据该列表中的标志，并报告上一个标志连续“完成”的位置。

老实说，无论如何，我觉得你打印这样的完成消息是不合理的。我认为改变设计更好地拥有这种毫无意义的“功能”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T09:41:41.497

通常，这些要求通过递增的序列号来满足，就像您已经完成的那样。

通常，处理线程的输出通过过滤器对象提供，该过滤器对象包含所有无序结果对象的列表（或字典），“阻止它们”直到所有具有较低序列号的结果都出现再次，类似于您已经完成的操作。

不需要的是任何类型的 sleep() 循环。工作线程本身可以操作过滤器对象（这将是一个锁），或者工作线程可以将结果生产者-消费者-排队到操作无序过滤器的“输出线程”。

该方案适用于池化工作线程，即。那些没有持续创建/终止/销毁开销的人。

# javascript - 我如何获得最接近的 设置 .css 高度

> ID：11680851
> 
> 赞同：1
> 
> 时间：2012-07-27T02:54:57.010
> 
> 标签：javascript, jquery

这是我的jQuery：

```
$(window).load(function(){
  $(".mobile-handle").css({height: $("ul#active-tasks li").height()});
}) 
```

这是我的视图代码：

```
%li.task.clearfix[task]
  .mobile-handle 
```

我正在尝试将 的高度设置`.mobile-handle`为 parent 的高度`li`。还在学习 JS/Jquery 很抱歉，我知道这是初级的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:02:05.157

这将每个`.mobile-handle`的高度设置为其祖先的高度`li`

```
$(window).load(function(){
    $(".mobile-handle").each(function(){
        $(this).css({height: $(this).closest('li').height()});
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:10:07.777

看看`closest`。

`"Get the first element that matches the selector, beginning at the current element and progressing up through the DOM tree."`

[参考](http://api.jquery.com/closest/)

```
$(window).load(function(){
    $(".mobile-handle").css({
        'height': $("ul#active-tasks").closest('li').height()
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T02:58:09.643

也许使用 :parent 选择器就可以了。

```
$(window).load(function(){
    $(".mobile-handle").css({height: $(".mobile-handle:parent").height()});
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T02:58:33.977

尝试：

```
$(".mobile-handle").height( $("#active-tasks li").height() ); 
```

或者

```
$(".mobile-handle").height( $(".mobile-handle").parent('li').height() ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T12:09:16.573

这里我已经为上面的查询做了 bin，你也可以找到演示链接。

**演示：** [http ://codebins.com/bin/4ldqp9d](http://codebins.com/bin/4ldqp9d)

**HTML：**

```
<ul id="active-tasks">
  <li>
    <div class="mobile-handle">
      Mobile-1
    </div>
  </li>
  <li>
    <div class="mobile-handle">
      Mobile-2
    </div>
  </li>
  <li>
    <div class="mobile-handle">
      Mobile-3
    </div>
  </li>
  <li>
    <div class="mobile-handle">
      Mobile-4
    </div>
  </li>
</ul> 
```

**CSS：**

```
#active-tasks{
  padding:4px;
  border:1px solid #445599;
  list-style:none;
  width:50%;
  background:#f9c8c5;
}
#active-tasks li{
  height:30px;
} 
```

**查询：**

```
$(function() {

    $(".mobile-handle").height($(".mobile-handle").parent('li').height());
    /*
    //Another Alternate way is:
    $(".mobile-handle").height( $(".mobile-handle").closest('li').height() );*/

}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9d](http://codebins.com/bin/4ldqp9d)

# objective-c - 如何处理山狮通知点击

> ID：11680853
> 
> 赞同：2
> 
> 时间：2012-07-27T02:55:16.463
> 
> 标签：objective-c, macos, notifications, osx-mountain-lion

我只是想向 Gyazo 应用程序添加一些通知。我终于能够向通知中心发送通知[http://korniltsev.ru/p/jz6m3Nm.png](http://korniltsev.ru/p/jz6m3Nm.png) 但是当我点击它并且应用程序没有启动时，它以某种奇怪的方式启动：它显示空窗口（即使我将它 visibleAtLaunch 设置为 0) 并且没有任何反应；[http://korniltsev.ru/p/jz6mvk0.png](http://korniltsev.ru/p/jz6mvk0.png)

我尝试使用的代码在这里：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {

    NSUserNotification * clicked = [[aNotification userInfo]
            objectForKey:NSApplicationLaunchUserNotificationKey];
    if (clicked){
        [NSApp terminate:self];
        return;
    }
... 
```

我发送这样的通知

```
NSUserNotificationCenter *manager = [NSUserNotificationCenter defaultUserNotificationCenter];
NSUserNotification *urlNotification = [[NSUserNotification alloc]init];
[urlNotification setTitle:appName];
[urlNotification setInformativeText:url];
[manager deliverNotification:urlNotification]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T21:56:16.807

`[NSApp terminate:self]`有很多副作用。您确定这些副作用不会创建您的空白窗口吗？您是否尝试过`[NSApp terminate:self]`立即调用`applicationDidFinishLaunching`并确保您的应用程序在每种情况下都干净地退出？如果没有，您可能需要查看您在应用程序的文档控制器（如果有的话）和`applicationShouldTerminate`.

# clojure - Clojure 到 Java 互操作

> ID：11680854
> 
> 赞同：3
> 
> 时间：2012-07-27T02:55:22.037
> 
> 标签：clojure

我正在尝试让 javafx2 与 Clojure 一起使用 - 在实现诸如 DoubleBinding 之类的抽象类时，我不确定在 Clojure 中等价的 super.bind(moo) 是什么。我正在实现的类可以在这里找到：http: [//docs.oracle.com/javafx/2/api/index.html](http://docs.oracle.com/javafx/2/api/index.html)。

```
(def moo (ObservableDoubleValue. ...))
(def foo (proxy [DoubleBinding] []
            (computeValue []
               (Math/sqrt (.getValue moo)))))

final ObservableDoubleValue moo = ...;   
DoubleBinding foo = new DoubleBinding() {
     {
         super.bind(moo);
     }

     @Override
     protected double computeValue() {
         return Math.sqrt(moo.getValue());
     }
 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:46:30.427

根据[代理文档](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/proxy)，代理中的方法无法访问`super`...我建议您使用[`gen-class`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/gen-class)和使用它来生成类。`super`如果您将使用`:exposes-methods`指令公开它们，则可以访问它们的方法。就像是：

```
(gen-class :name MyDoubleBinding
           :extends DoubleBinding
           :exposes-methods {bind my-bind}
 ....
 ) 
```

然后`-my-bind`从你的构造函数调用......

请查看Clojure 网站上[有关类生成的文档以获取更多详细信息](http://clojure.org/compilation)`gen-class`

# c# - 在 WCF Web 服务中使用接口作为输出参数

> ID：11680869
> 
> 赞同：0
> 
> 时间：2012-07-27T02:58:41.410
> 
> 标签：c#, json, wcf, serialization, interface

我的情况是这样的。在每次调用我的 Web 服务时，我都有一个 out 参数，它是一个错误对象。如果没有错误，则对象通过为空来指示。如果出现错误，则会填充不同的属性，例如“HasError”字段、“ErrorMessage”、“PrettyMessage”等。我现在尝试做的是创建不同类型的错误对象，它们都实现了错误我已经定义的接口。然后，我希望能够使 out 参数类似于“out IMyError 错误”，然后能够将该错误对象设置为该接口的一个实现，具体取决于我在方法中遇到的错误类型。我遇到的问题是序列化似乎不喜欢这样。该方法运行良好，但我没有 无法在客户端取回任何数据。这是一些希望澄清的代码。

我的界面

```
public interface IMyError
{
    bool HasError { get; set; }
    string ErrorType { get; set; }
    string PrettyErrMsg { get; set; }
} 
```

示例类实现

```
[Serializable]
[DataContract]
public class AspError : IMyError
{
    public AspError(Exception exception)
    {
        this.HasError = true;
        this.PrettyErrMsg = "An ASP Exception was thrown";
        this.ExceptionMsg = exception.Message;
        this.StackTrace = exception.StackTrace;
    }

    [DataMember(Name = "has_error", IsRequired = true)]
    public bool HasError { get; set; }

    [DataMember(Name = "error_type", IsRequired = true)]
    public string ErrorType
    {
        get
        {
            return "ASP";
        }
        set
        {
        }
    }

    [DataMember(Name = "pretty_error", IsRequired = true)]
    public string PrettyErrMsg { get; set; }

    [DataMember(Name = "exception", IsRequired = true)]
    public string ExceptionMsg { get; set; }

    [DataMember(Name = "stack_trace", IsRequired = true)]
    public string StackTrace { get; set; }
} 
```

以及我的 WCF 服务中的方法

```
public bool MyMethod(out IMyError error)
{
    error = new MyError() { HasError = false };

    try
    {
        // do some code            
    }
    catch (Exception exception)
    {
        error = new AspError(exception);
        return false;
    }
} 
```

我想要的是该方法，当捕获到异常时，返回一个格式为 json 的 AspError，就像它在我尝试将其作为接口之前的工作方式一样。或者，如果发生不同的 IMyError 实现类，则返回格式为 json 的 THAT 类型。我认为它可以工作，因为它们都是 IMyError 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:43:17.210

您需要向客户端发送提示如何反序列化您的界面。WCF 使用`KnownTypeAttribute`.

您的服务应更改为如下所示：

```
[KnownType(typeof(AspError))]
public bool MyMethod(out IMyError error)
{
    ...
} 
```

您可以在 MSDN 中找到更多详细信息 - [http://msdn.microsoft.com/en-us/library/ms730167.aspx](http://msdn.microsoft.com/en-us/library/ms730167.aspx)

当然，您的客户应该有权访问具有类型的程序集`AspError`才能构造该类型。

# iphone - 谷歌地图输出=公里坏了？

> ID：11680872
> 
> 赞同：16
> 
> 时间：2012-07-27T02:59:40.800
> 
> 标签：iphone, google-maps, kml

全部

我在我的 iPhone 应用程序中使用谷歌地图 KML 输出。如果我在浏览器上键入以下内容，它会提供保存 kml 文件的选项：

```
http://maps.google.com/maps?q=restaurant&mrt=yp&num=10&sll=37.786945,-122.406013&radius=5&output=kml 
```

但是今天突然之间，它正在返回一个html文件。发生了什么？有任何想法吗？我在我的 iPhone 应用程序中使用它并抛出错误，因为它不是返回的有效 xml。明显地....

谢谢，mbh

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T17:13:21.350

这种通过解析 KML 文件从 Google 中提取 Google 路线的方式自 2012 年 7 月 27 日起不再可用（因为 Google 改变了检索 Google 路线的结构，现在您只能通过 JSON 或 XML 来获取），是时候将您的代码迁移到 JSON 而不是 KML。

[在我自己的问题here](https://stackoverflow.com/a/11745316/1230123)中查看答案（仅适用于Android，但iPhone可能可以理解算法并应用它）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T12:07:05.663

谷歌改变了一些东西，现在[只显示重大转折](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4321)。但是在使用 JSON 时，它会正确显示路径：

```
public class DrivingDirectionActivity extends MapActivity {

Point p1 = new Point();
Point p2 = new Point();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    MapView mapView = (MapView) findViewById(R.id.map);
    // setting a default value
    double src_lat = 18.5535;
    double src_long = 73.7966;
    double dest_lat = 18.5535;
    double dest_long = 73.7966;

    Geocoder coder = new Geocoder(getApplicationContext(),
            Locale.getDefault());

    List<Address> address_src = null;
    List<Address> address_dest = null;

    try {
        address_src = coder
                .getFromLocationName(
                        "Deepmala Housing Complex, Pimple Saudagar, Pimpri Chinchwad",
                        1);
        if (address_src.size() > 0) {
            Address loc = address_src.get(0);
            src_lat = loc.getLatitude();
            src_long = loc.getLongitude();
        }
    } catch (IOException e) { // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        address_dest = coder.getFromLocationName(
                "Infosys Phase 2, Hinjewadi Phase II, Hinjewadi", 1);
        if (address_dest.size() > 0) {
            Address loc = address_dest.get(0);
            dest_lat = loc.getLatitude();
            dest_long = loc.getLongitude();
        }
    } catch (IOException e) { // TODO Auto-generated catch block
        e.printStackTrace();
    }

    mapView.setBuiltInZoomControls(true);
    GeoPoint srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),
            (int) (src_long * 1E6));
    GeoPoint destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),
            (int) (dest_long * 1E6));

    DrawPath(srcGeoPoint, destGeoPoint, Color.GREEN, mapView);

    mapView.getController().animateTo(srcGeoPoint);
    mapView.getController().setZoom(13);

}

protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

private void DrawPath(GeoPoint src, GeoPoint dest, int color,
        MapView mMapView) {
    // connect to map web service
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(makeUrl(src, dest));
    HttpResponse response;
    try {
        response = httpclient.execute(httppost);

        HttpEntity entity = response.getEntity();
        InputStream is = null;

        is = entity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");
        String line = "0";
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        reader.close();
        String result = sb.toString();
        JSONObject jsonObject = new JSONObject(result);
        JSONArray routeArray = jsonObject.getJSONArray("routes");
        JSONObject routes = routeArray.getJSONObject(0);
        JSONObject overviewPolylines = routes
                .getJSONObject("overview_polyline");
        String encodedString = overviewPolylines.getString("points");
        List<GeoPoint> pointToDraw = decodePoly(encodedString);
        mMapView.getOverlays().add(new MyOverLay(pointToDraw));
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
        // TODO: handle exception
    }

}

private List<GeoPoint> decodePoly(String encoded) {

    List<GeoPoint> poly = new ArrayList<GeoPoint>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;

    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;

        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                (int) (((double) lng / 1E5) * 1E6));
        poly.add(p);
    }

    return poly;
}

private String makeUrl(GeoPoint src, GeoPoint dest) {
    // TODO Auto-generated method stub

    StringBuilder urlString = new StringBuilder();

    urlString.append("http://maps.googleapis.com/maps/api/directions/json");
    urlString.append("?origin=");// from
    urlString.append(Double.toString((double) src.getLatitudeE6() / 1.0E6));
    urlString.append(",");
    urlString
            .append(Double.toString((double) src.getLongitudeE6() / 1.0E6));
    urlString.append("&destination=");// to
    urlString
            .append(Double.toString((double) dest.getLatitudeE6() / 1.0E6));
    urlString.append(",");
    urlString
            .append(Double.toString((double) dest.getLongitudeE6() / 1.0E6));
    urlString.append("&sensor=false");

    Log.d("xxx", "URL=" + urlString.toString());
    return urlString.toString();
}

class MyOverLay extends Overlay {
    private int pathColor;
    private final List<GeoPoint> points;
    private boolean drawStartEnd;

    public MyOverLay(List<GeoPoint> pointToDraw) {
        // TODO Auto-generated constructor stub
        this(pointToDraw, Color.GREEN, true);
    }

    public MyOverLay(List<GeoPoint> points, int pathColor,
            boolean drawStartEnd) {
        this.points = points;
        this.pathColor = pathColor;
        this.drawStartEnd = drawStartEnd;
    }

    private void drawOval(Canvas canvas, Paint paint, Point point) {
        Paint ovalPaint = new Paint(paint);
        ovalPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        ovalPaint.setStrokeWidth(2);
        ovalPaint.setColor(Color.BLUE);
        int _radius = 6;
        RectF oval = new RectF(point.x - _radius, point.y - _radius,
                point.x + _radius, point.y + _radius);
        canvas.drawOval(oval, ovalPaint);
    }

    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        Projection projection = mapView.getProjection();
        if (shadow == false && points != null) {
            Point startPoint = null, endPoint = null;
            Path path = new Path();
            // We are creating the path
            for (int i = 0; i < points.size(); i++) {
                GeoPoint gPointA = points.get(i);
                Point pointA = new Point();
                projection.toPixels(gPointA, pointA);
                if (i == 0) { // This is the start point
                    startPoint = pointA;
                    path.moveTo(pointA.x, pointA.y);
                } else {
                    if (i == points.size() - 1)// This is the end point
                        endPoint = pointA;
                    path.lineTo(pointA.x, pointA.y);
                }
            }

            Paint paint = new Paint();
            paint.setAntiAlias(true);
            paint.setColor(pathColor);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(5);
            paint.setAlpha(90);
            if (getDrawStartEnd()) {
                if (startPoint != null) {
                    drawOval(canvas, paint, startPoint);
                }
                if (endPoint != null) {
                    drawOval(canvas, paint, endPoint);
                }
            }
            if (!path.isEmpty())
                canvas.drawPath(path, paint);
        }
        return super.draw(canvas, mapView, shadow, when);
    }

    public boolean getDrawStartEnd() {
        return drawStartEnd;
    }

    public void setDrawStartEnd(boolean markStartEnd) {
        drawStartEnd = markStartEnd;
    }
}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T18:11:05.133

我希望 Google 没有在没有通知的情况下停止支持他们记录在案的 KML。

我现在使用他们的 xml 输出将我的代码迁移到 google places API。

[https://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T10:46:23.107

-好吧，我刚刚编辑了我的答案-

面对现实吧，谷歌已经改变了他们的系统，我们必须关注他们

所以让我们使用 JSON 或 XML

:)

--编辑第二部分--

我刚刚找到了最好的解决方案，它使用 JSON 并解析成折线，所以我们可以做到！

[Google Maps API 版本差异](https://stackoverflow.com/questions/11323500/google-maps-api-version-difference/11357351#11357351)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T09:42:22.243

至于Android，我现在正在使用：

```
Intent myIntent = 
new Intent( android.content.Intent.ACTION_VIEW,
 Uri.parse( "geo:0,0?q="+ lat +","+ lon ) );                
startActivity(myIntent); 
```

我认为iOS中应该有类似的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-29T11:40:08.113

我找到了像以前一样使用标准谷歌地图链接获取`KML`输出的方法。

谷歌似乎分析了此类链接的推荐人，如果是，`https://code.google.com`那么它将生成`KML`附件而不是显示地图。

因此，首先，您需要在`https://code.google.com`. 然后在评论中对您的路由链接提出问题。

现在您可以点击链接并获取`KML`附件。

![在此处输入图像描述](../Images/2edfa6fd9f340ff6263f7d3c419adb03.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-12T00:38:22.047

KML 创作又活了！

死链接只需要修改为指向地球而不是地图

# 死链接：

[http://maps.google.com/maps?q=restaurant&mrt=yp&num=10&sll=37.786945,-122.406013&radius=5&output=kml](http://maps.google.com/maps?q=restaurant&mrt=yp&num=10&sll=37.786945,-122.406013&radius=5&output=kml)

# 工作链接：

[https://earth.google.com/earth/rpc/search?q=restaurant&mrt=yp&num=10&sll=37.786945,-122.406013&radius=5&output=kml](https://earth.google.com/earth/rpc/search?q=restaurant&mrt=yp&num=10&sll=37.786945,-122.406013&radius=5&output=kml)

# sql - 文本到字符和字符到图像

> ID：11680874
> 
> 赞同：0
> 
> 时间：2012-07-27T02:59:43.723
> 
> 标签：sql, sql-server-2008, casting

这是列内的数据：列图像数据=ÿØÿác¡Exif

```
description = text 
```

我可以将其转换为字符类型，然后将字符转换为图像文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:04:50.610

不确定您想要做什么...将“图像”列作为图像返回给浏览器？或者在网页上显示带有描述的图像？

如果您想将图像数据作为图像返回，例如在 PHP 中，您可以这样做：[将 PHP 页面作为图像返回](https://stackoverflow.com/questions/900207/return-a-php-page-as-an-image)

# c# - 事件默认初始化器

> ID：11680877
> 
> 赞同：2
> 
> 时间：2012-07-27T03:00:06.697
> 
> 标签：c#, events, delegates, initializer

我曾经使用以下内容：

```
public event EventHandler OnComplete = delegate { }; 
```

我不确定，这是怎么称呼的，这是“事件默认初始化程序”吗？

但问题似乎是当我从 EventArgs 派生，创建自己的 EventHandler 并决定使用相同的方法时。请参见：

```
public class MyEventArgs : EventArgs
{
    int result;
    public int Result
    {
        get
        {
            if (exceptionObject == null)
                return result;
            else
                throw new InvalidOperationException();
        }
        internal set { result = value; }
    }

    Exception exceptionObject;
    public Exception ExceptionObject
    {
        get { return exceptionObject; }
        internal set { exceptionObject = value; }
    }
}

public delegate EventHandler MyEventHandler(object sender, MyEventArgs e);

public class MyOperation
{
    public event MyEventHandler OnOperationComplete = delegate { };
} 
```

所以，线

```
public event MyEventHandler OnOperationComplete = delegate { }; 
```

导致问题。

如何为“我的”事件进行正确的默认初始化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T03:02:29.947

```
public event MyEventHandler OnOperationComplete = (sender, args) => { return null; }; 
```

我也认为你的意思是：

```
public delegate void MyEventHandler(object sender, MyEventArgs e); 
```

不是

```
public delegate EventHandler MyEventHandler(object sender, MyEventArgs e); 
```

# java - java - 抽象类和具体类之间的独特区别

> ID：11680880
> 
> 赞同：3
> 
> 时间：2012-07-27T03:00:43.407
> 
> 标签：java

我知道抽象类和具体类之间的区别很少。我知道与具体类不同，您不能使用抽象类创建实例，抽象类可以具有“抽象”方法。

但我有一个像下面这样的例子。很多时候，我们在工作中看到以下示例。我将跳过一些可以在 Parent 类中定义的常用方法。

```
public abstract class Parent {
    public void init() {
       doInit();
    }
    public abstract void doInit();
}

public class Child extends Parent {
    public void doInit() {
       // implementation
    }
} 
```

我认为我们可以用如下的具体类做同样的事情。

```
public class Parent {
    public void init() {
      doInit();
    }
    public void doInit() {
       // Empty
    }
} 
```

我很好奇是否有任何独特的情况需要我们使用抽象类。上面的例子在运行时有什么显着差异吗？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T03:05:24.350

在这种情况下使用`abstract`类的原因是强制继承你的基类的每个人都重写抽象`doInit`方法。如果没有抽象的类和方法，它们可能会忘记这样做，编译器也不会捕捉到它们。

除了这个实用目的之外，抽象类还提供了一种强大的方式来将您的设计理念传达给代码的读者。抽象类告诉读者，其中的方法为一组相关类提供了一些通用实现，而不是实现您正在建模的单个概念。很多时候，向读者传达你的意图与编写正确的代码一样重要，否则他们可能会在维护代码的同时破坏某些东西。

Java 中习惯于调用抽象类`Abstract...`；在你的例子中，那将是`AbstractParent`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T19:07:33.667

具体的类是具有所有方法的实现（内部代码）的类。它是否派生自其他类并不重要。

```
public abstract class IAmAbstract{
    public void writeMe(){
        System.out.println("I am done with writing");
    }
}

public class IAmConcrete extends IAmAbstract{
    public void writeMe(){
        System.out.println("I am still writing");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T04:06:36.117

当然，您可以这样做，但这完全取决于正确的业务逻辑。可能会出现一种情况，您希望对扩展您的代码的人强制执行策略。

例如，我编写了一个 Employee 类，而您扩展了我的类以编写 ProjectManager 类。但是假设业务不允许直接实例化 Employee（就像我说的，只是一个例子）。所以我将我的 Employee 类声明为抽象类，从而对我的类的所有扩展程序（读：you）强制执行他们不能直接实例化 Employee 的规则。（当然，它会通过继承链间接发生，即父对象在子对象之前创建。）

如果使用得当，A 地的一个人控制 B 地的另一个人如何编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T03:26:05.043

抽象类在软件设计中具有多种有用的属性。

除了明显的区别，比如不能被实例化和能够持有抽象方法。它们对于定义通用但可覆盖的函数、保存以逻辑方式处理其子级的静态方法很有用。

我最喜欢的是抽象工厂模式。

通过创建一个作为它可能创建的所有类的父级的工厂，它可以强制创建所需的功能，这实际上导致了一个奇怪的伪影，其中技术上更紧密耦合的代码实际上更容易维护。

# ios - 无法使用 libxml2 和 XCode 4.4 编译我的项目

> ID：11680893
> 
> 赞同：2
> 
> 时间：2012-07-27T03:02:30.673
> 
> 标签：ios, xcode, osx-mountain-lion, libxml2

我的项目`XCode 4.2`在`Lion`. 现在我正在运行`Mountain Lion`，`XCode 4.4`当我尝试构建项目时，它给了我一个`tree.h`找不到文件的错误。我检查了标题搜索路径，它是正确的。我在网上搜索了这样的错误，并在许多不同的页面上找到了相同的解决方案，但无法理解该特定解决方案，例如参见[此页面](http://permalink.gmane.org/gmane.os.apple.macports.user/26895)。

我怎么解决这个问题？或者，你能澄清一下遍布互联网的奇怪解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:47:24.957

我不得不添加另一个标题搜索路径，即：`$(SDKROOT)/usr/include/libxml2`. 这解决了问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T04:08:57.973

进入 XCode 首选项并安装命令行工具。

# c# - 通过 C# 检查 asp.NET 服务器是否存在问题

> ID：11680900
> 
> 赞同：1
> 
> 时间：2012-07-27T03:03:04.207
> 
> 标签：c#, asp.net, security

有谁知道我将如何从 .NET C# 检查远程服务器是否存在以下任何 asp.NET 安全问题？这些设置是否可以通过服务器上的特殊地址或页面查看？可能在 HTTP 标头中？

问题：启用 ASP.NET 调试 启用 ASP.NET 跟踪 ViewState 未签名 ViewState 未加密

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:23:42.887

看看[这里](https://stackoverflow.com/questions/733716/finding-security-holes-tools-for-asp-net)建议的[ANSA-Asp.Net 安全分析器](https://www.owasp.org/index.php/ANSA)。

# c# - MainForm 从另一个窗体访问方法

> ID：11680901
> 
> 赞同：0
> 
> 时间：2012-07-27T03:03:09.050
> 
> 标签：c#, wpf

我想将 WinForm 转换为 WPF，如下代码：

登录表单：

```
public partial class Login : Form
{
    public Login()
    {
        InitializeComponent();
    }
}

public static XmppClientConnection getXmpp()
{
    return xmppCon;
} 
```

主窗体：

```
public partial class MainForm: Form
{
    XmppClientConnection xmppCon = Login.getXmpp(); // It's okay to access
    public MainForm()
    {
        InitializeComponent();
    }
} 
```

WPF代码：

```
public partial class MainForm: Form
{
    XmppClientConnection xmppCon = Login.getXmpp(); // my Login can not access getXmpp method;
    public MainForm()
    {
        InitializeComponent();
    }
} 
```

行错误`Login.getXmpp`：`XmppClientConnection xmppCon = Login.getXmpp();`

我的问题是，为什么 MainForm 不能从登录表单访问方法 getXmpp？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:47:19.977

您的 WPF 代码与您的 winforms 代码相同，因此我认为您在那里粘贴了错误的信息。他们可能有不同的命名空间或在不同的项目中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:49:12.537

方法 getXmpp 未在 Login 类中定义。

# ruby-on-rails - rails 处理可选参数的最佳方法

> ID：11680902
> 
> 赞同：0
> 
> 时间：2012-07-27T03:03:25.243
> 
> 标签：ruby-on-rails

我想在用户登录时显示股票列表（默认参数）。这闻起来像索引操作。不过，我也会做一个表格供用户选择股票的市值（也就是提炼宇宙）。表单的提交会将参数发送到某个操作（我不确定是否应该使用相同的索引操作），然后对列表进行 ajax 更新。这个 ajax 不对数据库做任何事情，它只是更新数据库查询的参数。

用户第一次访问该站点时，他们会看到查询的默认参数，但我也希望他们以后能够更改参数并通过 ajax 根据他们的参数更新列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:39:45.960

是的，股票清单听起来确实像是指数行动。您的意思是要根据某些表单输入过滤列表吗？

您可以使用 get 方法将表单发送到 index 操作，并在您的控制器中，只需读取参数，然后查询您的 @stocks，但您希望过滤器工作。

这是非 Ajax 解决方案，因此没有 Javascript 的用户会很高兴。当你得到这个工作时，你可以轻松地对其进行 AJAXify。

# android - 使用从 Github 到 Android Eclipse 的源代码

> ID：11680904
> 
> 赞同：1
> 
> 时间：2012-07-27T03:03:52.303
> 
> 标签：android

我究竟如何使用来自 Github 的资源？例如 ：

[https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)

或者

[https://github.com/emilsjolander/StickyListHeaders](https://github.com/emilsjolander/StickyListHeaders)

甚至 [https://github.com/astuetz/ViewPagerExtensions](https://github.com/astuetz/ViewPagerExtensions)

[只是举例]

从网上下载完整的资源后，我该怎么处理它们？我已将它们导入 Eclipse 并将库添加到我的项目中。但我得到了很多错误。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:08:30.540

git 克隆[https://github.com/ChristopheVersieux/HoloEverywhere.git](https://github.com/ChristopheVersieux/HoloEverywhere.git)

git 克隆[https://github.com/emilsjolander/StickyListHeaders.git](https://github.com/emilsjolander/StickyListHeaders.git)

git 克隆[https://github.com/astuetz/ViewPagerExtensions.git](https://github.com/astuetz/ViewPagerExtensions.git)

在 cmd 提示符中键入这些内容会将源代码的副本下载到当前目录。克隆后，您可以将源代码导入 Eclipse。

# django - 没有浏览器的 Django CSRF 令牌

> ID：11680908
> 
> 赞同：2
> 
> 时间：2012-07-27T03:04:50.070
> 
> 标签：django, websocket, socket.io, csrf

我有一个使用 django 实现的网络应用程序（游戏）。常规的 django 视图与 CSRF 令牌一起工作得很好，但我也想让计算机玩家与服务器交谈。我使用的是websockets（django-socketio），所以电脑玩家需要连接到SocketIOServer，但是socket.io协议中的第一个请求是post，django响应CSRF验证失败。如何在没有浏览器的情况下获取 CSRF cookie 集？（或者只是绕过计算机播放器的 CSRF 验证，但这似乎有点不安全。）

我试图用来将计算机播放器连接到服务器的代码如下所示：

```
def connect(self, host, port):
    conn  = httplib.HTTPConnection(host + ':' + str(port))
    conn.request('POST','/socket.io/1/')
    resp  = conn.getresponse()
    resp_text = resp.read()
    print resp_text
    hskey = resp_text.split(':')[0]
    websocket.enableTrace(True)
    url = 'ws://' + host + ':' + str(port) + '/socket.io/1/'
    ws = websocket.WebSocketApp(url + 'websocket/' + hskey,
            on_message=self.on_message,
            on_close=self.on_close)
    ws.on_open = self.on_open
    try:
        ws.run_forever()
    except KeyboardInterrupt:
        ws.close() 
```

在我发出发布请求之前的某个地方，我需要获得一个 CSRF 令牌。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:47:45.477

CSRF 保护可以通过`csrf_exempt`装饰器禁用，请查看以下示例：

```
from django.views.decorators.csrf import csrf_exempt, csrf_protect

@csrf_exempt
def my_view(request):
    # you code here 
```

您可以在官方 django 文档中查看更多信息：

[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#csrf-protection-should-be-disabled-for-just-a-few-views](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#csrf-protection-should-be-disabled-for-just-a-few-views)

# c# - 如何在文本文件中查找字符串的位置

> ID：11680912
> 
> 赞同：0
> 
> 时间：2012-07-27T03:05:08.323
> 
> 标签：c#, string, file, text, location

我试图弄清楚如何找到某个字符串并显示它在文本文件中的行数。

例如，假设我试图在文本文件中查找字符串“I'm a string”，然后将字符串的位置（如下行）记录在变量中。

任何人都有任何提示也可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:14:34.407

首先，我会读入文件，然后遍历每一行搜索文本。就像是...

```
string[] lines = System.IO.File.ReadAllLines(@"C:\file.txt");

int count = 0;
foreach (string line in lines)
{
    count++;
    if (line.indexOf("I'm a string") > -1) {
       // found it
    }    

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:11:25.137

由于这看起来像一个硬件问题，我不会发布完整的解决方案，而只会发布指针和指南。

您基本上想逐个字母地扫描整个文本文件，读取接下来的 n 个字符，其中 n 是您的搜索字符串的长度。如果该集合与您的搜索字符串匹配，那么您就有了答案。您遇到的“\n”数是您必须遍历的行数。

也存在更简单的正则表达式解决方案。您应该尝试查看这些解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T03:55:53.970

比 ReadAllLines 更好：

```
public static IEnumerable<string> ReadLines(string path) 
```

# php - php。替换字符串中的命名组

> ID：11680913
> 
> 赞同：5
> 
> 时间：2012-07-27T03:05:14.393
> 
> 标签：php, regex

如何在替换字符串中使用命名组？
此表达式创建一个命名组：

```
$re= "/(?P<name>[0-9]+)/"; 
```

我想替换这个表达式，但它不起作用。

```
preg_replace($re, "\{name}", $text); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:57:37.770

您不能 - 只有数字匹配名称可用于`preg_replace()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-12T16:57:47.143

你可以使用这个：

```
class oreg_replace_helper {
    const REGEXP = '~
(?<!\x5C)(\x5C\x5C)*+
(?:
    (?:
        \x5C(?P<num>\d++)
    )
    |
    (?:
        \$\+?{(?P<name1>\w++)}
    )
    |
    (?:
        \x5Cg\<(?P<name2>\w++)\>
    )
)?
~xs';

    protected $replace;
    protected $matches;

    public function __construct($replace) {
        $this->replace = $replace;
    }

    public function replace($matches) {
        var_dump($matches);
        $this->matches = $matches;
        return preg_replace_callback(self::REGEXP, array($this, 'map'), $this->replace);
    }

    public function map($matches) {
        foreach (array('num', 'name1', 'name2') as $name) {
            if (isset($this->matches[$matches[$name]])) {
                return stripslashes($matches[1]) . $this->matches[$matches[$name]];
            }
        }
        return stripslashes($matches[1]);
    }
}

function oreg_replace($pattern, $replace, $subject, $limit = -1, &$count = 0) {
    return preg_replace_callback($pattern, array(new oreg_replace_helper($replace), 'replace'), $subject, $limit, $count);
} 
```

那么您可以在替换语句中使用 \g ${name} 或 $+{name} 作为参考。

cf（[http://www.rexegg.com/regex-disambiguation.html#namedcapture](http://www.rexegg.com/regex-disambiguation.html#namedcapture)）

# ruby-on-rails - 资产管道问题将 Rails 3.0 应用程序升级到 Rails 3.2

> ID：11680917
> 
> 赞同：0
> 
> 时间：2012-07-27T03:06:07.360
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets

我已按照 Railscast 的说明将 Rails 应用程序升级到 3.1：

[http://railscasts.com/episodes/282-upgrading-to-rails-3-1?view=asciicast](http://railscasts.com/episodes/282-upgrading-to-rails-3-1?view=asciicast)

服务器无法识别对`app/assets`.

可以肯定的是，我已经`rake rails:update`根据我们拥有的文件运行并比较了这些文件。看起来每个旧的配置标志都已被删除，每个新的配置标志都已设置。

当我加载主页时，我在 javascript 控制台中看到以下内容：

```
"NetworkError: 404 Not Found - http://localhost:3000/assets/application.js"

"NetworkError: 404 Not Found - http://localhost:3000/assets/application.css" 
```

有没有人有什么建议？我完全被难住了，没有创建一个新的应用程序和移动东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:20:40.697

问题出`active_reload`在我们项目中的 gem 上。在 gemfile 中禁用它并运行`bundle install`解决了这个问题

显然[项目页面上的第一条语句是它与 Rails 3.2.x 不兼容](https://github.com/paneq/active_reload/)。

# python - Python 3 类和字典

> ID：11680918
> 
> 赞同：0
> 
> 时间：2012-07-27T03:06:23.330
> 
> 标签：python, list, class, dictionary

我正在这里做一个项目，对于如何处理下一部分感到非常困惑。包括项目描述。

> 学生班级：学生班级将存储有关学生 id、学生的名字和姓氏的信息，以及一个名为成绩的字典，其中包含学生所学课程的课程编号和字母成绩。您将为学生 ID、名字和姓氏编写访问器方法，并为学生的名字和姓氏编写变异器方法。Student 类中还有两个方法，如下所示。
> 
> *   getCourseNumbers()：它返回学生所学的课程编号列表。如果学生没有上过任何课程，它会返回一个空列表。
> *   getGrade(course_no)：返回学生在参数 course_no 标识的课程中获得的成绩。如果未找到给定的课程编号，则此函数返回“Z”来表示。
> *   addCourse(course_no,grade)：添加一门带有课程编号和成绩的课程
> *   updateCourse(course_no,grade)：更新现有课程的成绩
> *   deleteCourse(course_no)：从字典中删除课程。

到目前为止，这是我的代码：

```
class Course:
    def __init__ (self, __crn, __ch, __ins):
        self.__crn = crn
        self.__ch = ch
        self.__ins = ins

    def coursename(self):
        return self.__crn

    def credithour(self):
        return self.__ch

    def instructor(self):
        return self.__ins

class Student:
    def __init__(self, id, sfirst, slast):
        self.sid = sid
        self.sfirst = sfirst
        self.slast = slast

    def studentid(self):
        return self.sid

    def studentfirst(self):
        return self.sfirst

    def studentlast(self):
        return self.slast

def main():

    course = Course('CSC 1100', '4', 'Name')

    print (course.coursename())
    print (course.credithour())
    print (course.instructor())

main() 
```

所以，我的问题确实是。现在我已经完成了最初的两个课程，我想创建一个包含课程名称和学生成绩的字典。最好的方法是什么？我有点不知所措，尝试了很多不同的方法，但都没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T04:15:27.393

为什么要开设 Course 课程？问题中没有任何要求；实际上，它指定您要将信息存储为字典。

我不同意访问器方法的请求；这是一个 Java 习惯用法，而不是 Pythonic。同样，给定的方法名称是 javaCase，与 PEP8 相反。

然后代码减少到

```
class Student(object):
    def __init__(self, id, firstname, lastname, grades=None):
        self.id = id
        self.firstname = firstname
        self.lastname = lastname
        self.grades = {} if grades is None else dict(grades)

    def get_course_numbers(self):
        return self.grades.keys()

    def get_grade(self, course):
        return self.grades.get(course, 'Z')

    def add_course(self, course, grade):
        self.grades[course] = grade 
```

...我将把最后两种方法留作练习；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:19:15.703

回想一下，字典只是键值映射——它将键与特定值相关联。因此，您所要求的只是为每个学生存储一个从课程的唯一标识符到字母等级的映射（例如存储为字符串）。字典是完成这项任务的绝佳工具。

回想一下，您*可以*使用类实例作为键，即使该类的实例是可变的。原因是它实际上并不是*实例*本身被用作键，而是它的唯一标识符（内存地址）。

不过，有一种方法将课程编号映射到`Course`实例可能更合适。注意到那里的关键字*映射*了吗？您还可以将所有课程存储在一个列表中，并在每次您想按编号查找课程时进行搜索，但这会很*慢*（对于`len(courses) -> Infinity`）。

# java - 使用 Java 将字符串打印到打印机

> ID：11680927
> 
> 赞同：1
> 
> 时间：2012-07-27T03:07:39.883
> 
> 标签：java, printing

有人可以帮我写一个简单的java程序，可以从打印机打印出字符串。我在 javaDocs 网站上看到了一些示例，但它们都很长，我什至无法弄清楚要打印哪个字符串，因为按钮名称、方法名称等都是相同的。我不介意您是否在程序中添加或不添加 GUI，我自己会弄清楚（可能是，但评论会有所帮助）。PS我的意思是打印纸的打印机

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-12T07:24:52.420

System.out.println("票据打印");

```
 FileInputStream imagestream=new FileInputStream("C:\\Users\\DELL\\Desktop\\DummyImage.jpg");
         DocFlavor doc=DocFlavor.INPUT_STREAM.JPEG;
         PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet(); 
         aset.add(new Copies(1)); 
         //aset.add(MediaSizeName.NA_5X7);
         aset.add(Sides.ONE_SIDED);
         aset.add(OrientationRequested.PORTRAIT);
         Doc document = new SimpleDoc(imagestream, doc, null);
        // DocPrintJob job = service.createPrintJob();

         PrintService[] services = PrintServiceLookup.lookupPrintServices(null, null);
         for (int i = 0; i < services.length; i++) {
            System.out.println(services[i].getName());
         }
             Media[] res1 = (Media[]) services[0].getSupportedAttributeValues(Media.class, null, null);
         for (Media media : res1) {
             if (media instanceof MediaSizeName) {
                 MediaSizeName msn = (MediaSizeName) media;
                 MediaSize ms = MediaSize.getMediaSizeForName(msn);
                 float width = ms.getX(MediaSize.INCH);
                 float height = ms.getY(MediaSize.INCH);
                 System.out.println(media + ": width = " + width + "; height = " + height);
             }
         }
        DocPrintJob job = services[4].createPrintJob();
        job.print(document, aset); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T00:30:54.763

我知道这个问题已有 4 年历史，但也许有人使用这个简单的解决方案：

```
String YourString = "first line \n second line \n etc.etc."; //define and set contents of your string - remember about formating with \n if you want to have it split on lines
JTextArea YourTextArea = new JTextArea(); //define new Swing JtextArea
YourTextArea.setLineWrap(true); //set line wrap for YourTextArea - this will prevent too long lines to be cut - they will be wrapaed to next line
YourTextArea.append(YourString); //append YourString to YourTextArea 
YourTextArea.print(); //this will display print dialog that will lead you to print contents of YourTextArea so in efect contents of YourString 
```

# https - 仅 Nginx/Django 管理员 POST https

> ID：11680931
> 
> 赞同：5
> 
> 时间：2012-07-27T03:08:48.090
> 
> 标签：https, nginx, django-admin, gunicorn

我在 Centos 6 机器上部署了 Nginx/Gunicorn/Django 服务器，只有 SSL 端口（443）对外界可见。因此，除非使用 调用服务器，否则`https://`您不会得到任何响应。如果您使用 调用它`http://domain:443`，您只会收到 400 Bad Request 消息。端口 443 是访问服务器的唯一途径。

我正在使用 Nginx 来提供我的静态文件（CSS 等），所有其他请求都由 Gunicorn 处理，它在`http://localhost:8000`. 因此，导航到`https://domain.com`工作正常，管理站点中的链接也是如此，但是当我在 Django 管理中提交表单时，重定向时 https 丢失，我被发送到`http://domain.com/`request_uri 无法到达服务器。即使如此，POST 操作也能正常工作，并且数据库已更新。

我的配置文件如下所示。位置`location /`部分是我觉得应该找到解决方案的地方。`proxy_set_header X-*`但这些指令似乎没有任何效果。我错过了一个模块还是什么？我正在运行 nginx/1.0.15。

我在互联网上可以找到的所有内容都指向`X-Forwarded-Protocol https`它应该做的事情，但我没有得到任何改变。我也无法在远程服务器上进行调试，尽管我的下一步可能必须在本地编译并启用调试以获得更多线索。最后的手段是公开端口 80 并重定向所有内容……但这需要一些文书工作。

[http://pastebin.com/Rcg3p6vQ]（我的 nginx 配置参数）

```
server {
    listen       443 ssl;

    ssl on;
    ssl_certificate /path/to/cert.crt;
    ssl_certificate_key /path/to/key.key;
    ssl_protocols       SSLv3 TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers         HIGH:!aNULL:!MD5;

    server_name  example.com;

    root /home/gunicorn/project/app;
    access_log /home/gunicorn/logs/access.log;
    error_log /home/gunicorn/logs/error.log debug;

    location /static/ {
        autoindex on;
        root /home/gunicorn;
    }

    location / {
        proxy_pass http://localhost:8000/;
        proxy_redirect off;
        proxy_set_header Host $host;
        proxy_set_header X-Scheme $scheme;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Protocol https; 
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:12:49.377

还没来得及理解这两行的确切作用，但删除它们解决了我的问题：

```
 proxy_redirect off;
    proxy_set_header Host $host; 
```

# c# - IsPostBack 有一个小问题（ASP.NET，C#）

> ID：11680934
> 
> 赞同：0
> 
> 时间：2012-07-27T03:08:54.887
> 
> 标签：c#, asp.net

到目前为止，我真的很享受我在 C# 中使用 ASP.NET 的学习体验 :)。关于我的代码实现，我只是无法理解 IsPostBack 函数。我在这里看到了一些关于 IsPostBack 的问题，但我在为我的特定实现提供更“通用”的建议。

该应用程序相对简单——您从下拉菜单中选择一种字体，然后在文本框中输入一些文本。当您按下显示时，您的文本将根据您选择的字体选项显示。我已经很好地工作了，它正在尝试实现 IsPostBack 功能，所以当我尝试在文本框中输入其他内容时，之前提交的文本不会显示。我尝试更改调用 FontsList() 方法的位置，但这不起作用 - 我收到 Null Reference 错误（我知道为什么）。

这是我编译的“代码隐藏”/C#代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{

    List<String> folderNames;
    List<String> filePrefixes;
    List<String> fileSuffixes;

    protected void FontsList()
    {

        folderNames = new List<String> {"cartoon", "copperDeco", "decoTwoTone", "embroidery", "fancy", "goldDeco", "green",
                                        "greenChunky", "ice", "letsFaceIt", "lights", "peppermintSnow", "polkadot", "rainbow", "seaScribe",
                                        "shadow", "snowflake", "teddy", "tiger", "Victorian", "water", "wood", "zebra"};

        filePrefixes = new List<String> {"alphabet_" + "", "copperdeco-", "", "embroidery-", "art_", "golddeco-", "", "109", "ice",
                                         "faceoff-", "", "peppermint-", "polkadot-", "", "", "shad_", "snowflake-", "alphabear", "", "vic",
                                         "wr_", "wood", "zebra-"};

        fileSuffixes = new List<String> {"s", "", "4", "", "", "", "", "", "", "", "1", "", "", "", "", "", "", "" + "smblue", "",
                                         "", "", "", ""};

    }

    protected void Page_Load(object sender, EventArgs e)
    {
        FontsList();
        if (!IsPostBack)
        {
            //FontsList();
            foreach (String s in folderNames)
            {
                DropDownList.Items.Add(s);
            }
        }

    }

    protected void submitDisplay_Click(object sender, EventArgs e)
    {
        int index = folderNames.IndexOf(DropDownList.Text); //drop down box

        foreach (Char c in textBox.Text)
        {
            if(c == ' ')
            {
                displayText.InnerHtml += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
            }
            else
            {
            displayText.InnerHtml += "<img src = 'Alphabets/" + folderNames[index] + "/" + filePrefixes[index] + c + fileSuffixes[index] + ".gif' />";
            }
        }
    }
} 
```

不幸的是，我无法访问具有 ASP.NET 功能的服务器，但如果需要，我很乐意发送文件等。

非常感谢任何人的帮助/反馈，一如既往:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:25:02.350

在 ASP .NET 中，控件自动将其状态存储在 ViewState 对象中。当页面回发时，displayText 控件仍然具有上一次单击的值，并且您正在将新图像附加到它。您需要在附加新值之前清除以前的数据：

```
protected void submitDisplay_Click(object sender, EventArgs e)
{
    displayText.InnerHtml = "";

    int index = folderNames.IndexOf(DropDownList.Text); //drop down box

    foreach (Char c in textBox.Text)
    {
        if(c == ' ')
        {
            displayText.InnerHtml += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
        }
        else
        {
            displayText.InnerHtml += "<img src = 'Alphabets/" + folderNames[index] + "/" + filePrefixes[index] + c + fileSuffixes[index] + ".gif' />";
        }
    }
} 
```

# scheme - 如何匹配，在球拍中匹配？

> ID：11680935
> 
> 赞同：6
> 
> 时间：2012-07-27T03:08:57.810
> 
> 标签：scheme, racket

如果我有这样的东西， `(define s (hi,there))` 那么我怎么能像这样写 `(match s [(,h , ,t)] ...)` 但是它不起作用，因为`match`需要`,`所以我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T08:08:20.200

首先请注意，逗号`,`是特殊的读者缩写。是`(hi,there)`一个读作`(hi (unquote there))`。这很难发现 - 因为默认打印机`unquote`以特殊方式打印第一个元素是 an 的列表。

```
Welcome to DrRacket, version 5.3.0.14--2012-07-24(f8f24ff2/d) [3m].
Language: racket.
> (list 'hi (list 'unquote 'there))
'(hi ,there) 
```

因此，您需要的模式是 '(list h (list 'unquote t))'。

```
> (define s '(hi,there))
> (match s [(list h (list 'unquote t)) (list h t)])
(list 'hi 'there) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T13:16:57.140

如果您想在引用部分中使用逗号作为符号，请使用反斜杠：

```
> (define s '(hi \, there))
> (match s [(list h c t) (symbol->string c)])
"," 
```

并`'|,|`用于独立的逗号符号。

```
> (match s [(list h '|,| t) (list h t)])
'(hi there) 
```

无论哪种情况，您都应该使用空格来分隔事物，并使用列表。

`(define s (hi,there))`不是有效的球拍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:55:17.993

我认为您可能会对需要逗号的位置感到困惑。在 Racket 中，您不使用逗号来分隔列表中的元素。相反，您只需使用空格。告诉我这是否错了，但我想你正在尝试匹配像`(define s '(hi there))`. 为此，您将使用

```
(match s
  [`(,h ,t) ...]) 
```

然后，在省略号所在的区域，变量`h`的值为`'hi`，变量`t`的值为`'there`

# java - 在 Java 中查找图像中的图像

> ID：11680938
> 
> 赞同：0
> 
> 时间：2012-07-27T03:09:30.317
> 
> 标签：java, image, matching

我已经尝试了几个小时来完成这项工作，但由于某种原因，它没有找到匹配项。您可以使用任何图像对其进行测试，但它应该截取屏幕左上角的屏幕截图（1000 像素 x 1000 像素）并在其中找到指定的图像。任何帮助将不胜感激！

```
 import java.awt.Rectangle;
        import java.awt.Robot;
        import java.awt.image.BufferedImage;
        import java.io.File;
        import java.io.IOException;

        import javax.imageio.ImageIO;

        public class ImageRobotTester {

            /**
             * @param args
             */
            public static void main(String[] args) {
                ImageRobot i = new ImageRobot();
                try {
                    BufferedImage settingsImage = ImageIO.read(new File("images/Dex.png"));
                    Robot r = new Robot();
                    BufferedImage screen = r.createScreenCapture(new Rectangle(0, 0, 1000, 1000));

                    i.subImage(settingsImage, screen);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

        }
      import java.awt.image.BufferedImage;

import javax.swing.ImageIcon;
import javax.swing.JOptionPane;

public class ImageRobot {

    public ImageRobot() {
        // TODO Auto-generated constructor stub
    }

    public void subImage(BufferedImage needle, BufferedImage hayStack)
    {
        int xMatch = 0;
        int yMatch = 0;
        int possMatches = 0;
        try {
            for(int j = 0; j < hayStack.getHeight() - needle.getHeight(); j++)
            {
                for(int i = 0; i < hayStack.getWidth() - needle.getWidth(); i++)
                {
                    BufferedImage hayStackSub = hayStack.getSubimage(i, j, needle.getWidth(), needle.getHeight());
                    if(hayStackSub.equals(needle))
                    {
                        System.out.println("match!");
                        xMatch = i;
                        yMatch = j;
                    }

                }
            }
        }
        catch(ArrayIndexOutOfBoundsException e)
        {
            System.out.println("Out of bounds! (" + xMatch + ", " + yMatch + ")");
        }

        System.out.println("(" + xMatch + ", " + yMatch + ")");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:22:14.377

如果我错了，请纠正我，但是您是否要在这里进行某种图像识别？您不是在搜索与参考图像逐像素匹配的子图像，而是在搜索*相似*图像？正确的？

在这种情况下，您需要在大图像上移动一个小“窗口”（就像您现在使用双 for 循环所做的那样），但不要使用“等于”，而是使用经过适当训练的神经网络来判断图像是否正在寻找的是那个窗口里面。

有关如何构建基于 NN 的图像识别器的详细信息，请参阅本教程：

[http://neuroph.sourceforge.net/image_recognition.html](http://neuroph.sourceforge.net/image_recognition.html)

# c# - 回发后如何获取 HTML 属性值？

> ID：11680939
> 
> 赞同：2
> 
> 时间：2012-07-27T03:09:53.577
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, html, custom-data-attribute

这是我的观点：

```
@using (Html.BeginForm())
{
    foreach (Mvc3Intranet.Models.Dispatcher item in ViewBag.DispatcherList)
    {
    <div>
        <input type="text" value="@(item.Fullname)" name="txtName@(item.Id)" data-tmp="@(item.Tmp)" /></div>
    }
    <input type="submit" name="test" value="Save" />
} 
```

这是 HTML：

```
<form action="/" method="post">    
    <div>
        <input type="text" value="Ray1" name="txtName1" data-tmp="AAA" /></div>
    <div>
        <input type="text" value="Ray2" name="txtName2" data-tmp="BBB" /></div>
    <div>
        <input type="text" value="Ray3" name="txtName3" data-tmp="CCC" /></div>
    <div>
        <input type="text" value="Ray4" name="txtName4" data-tmp="DDD" /></div>
    <input type="submit" name="test" value="Save" />
</form> 
```

表单回发后，我如何访问`data-tmp`控制器中的值？

```
[HttpPost]
public ActionResult Index(string test)
{
} 
```

`Request["txtName1"]`返回`valid`文本框的，但不返回`data-tmp`属性值。由于这可以在 asp.net web 表单中完成，我假设在 asp.net mvc 中也是如此，或者不是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:18:14.937

Request.Forms 字典中不包含属性。您必须将附加数据作为隐藏字段或查询字符串发布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:21:41.853

或者，您可以将数据临时存储在数组或字典中，并将其保存在会话变量中。

```
Dictionary<string, string> dict = new Dictionary<string, string>();
dict.Add("txtName1", "AAA");
dict.Add("txtName2", "BBB");
//or put the above lines in your foreach loop
this.Session["data-tmp"] = dict; 
```

...然后使用以下行从会话 var 中检索字典：

```
Dictionary<string, string> recoverDict = (Dictionary<string, string>)this.Session["data-tmp"]; 
```

# javascript - 使用jquery从一列拖放到另一列

> ID：11680943
> 
> 赞同：4
> 
> 时间：2012-07-27T03:10:20.037
> 
> 标签：javascript, ajax, jquery-ui, jquery

我需要一个使用 jquery 从一列中拖动项目并将其放入另一列的示例

有没有这样的例子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T03:13:22.723

您可以使用 jquery 可排序执行此操作：http: [//jqueryui.com/demos/sortable/#connect-lists](http://jqueryui.com/demos/sortable/#connect-lists)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T11:23:40.853

在这里，我使用 jquery UI sortable 完成了完整的 bins。我认为它应该对你有帮助。

**演示：** [http ://codebins.com/bin/4ldqp9g](http://codebins.com/bin/4ldqp9g)

**HTML：**

```
<div class="demo">
  <ul id="sortable1" class="connectedSortable">
    <li class="ui-state-default">
      Item 1
    </li>
    <li class="ui-state-default">
      Item 2
    </li>
    <li class="ui-state-default">
      Item 3
    </li>
    <li class="ui-state-default">
      Item 4
    </li>
    <li class="ui-state-default">
      Item 5
    </li>
  </ul>
  <ul id="sortable2" class="connectedSortable">
    <li class="ui-state-highlight">
      Item 1
    </li>
    <li class="ui-state-highlight">
      Item 2
    </li>
    <li class="ui-state-highlight">
      Item 3
    </li>
    <li class="ui-state-highlight">
      Item 4
    </li>
    <li class="ui-state-highlight">
      Item 5
    </li>
  </ul>

</div>
<!-- End demo -->
<div class="demo-description">
  <p>
    Sort items from one list into another and vice versa, by passing a selector
    into the 
    <code>
      connectWith
    </code>
    option. The simplest way to do this is to
    group all related lists with a CSS class, and then pass that class into the
    sortable function (i.e., 
    <code>
      connectWith: '.myclass'
    </code>
    ).
  </p>
</div> 
```

**CSS：**

```
#sortable1, #sortable2 
{

  list-style-type: none;

  margin: 0;

  padding: 0 0 2.5em;

  float: left;

  margin-right: 10px;

}
#sortable1 li, #sortable2 li 
{

  margin: 0 5px 5px 5px;

  padding: 5px;

  font-size: 1.2em;

  width: 120px;

  overflow:visible;
  display:block;

} 
```

**查询：**

```
$(function() {
    var itemclone, idx;
    $("#sortable1, #sortable2").sortable({
        start: function(event, ui) {
            //create clone of current seletected li
            itemclone = $(ui.item).clone();
            //get current li index position in list
            idx = $(ui.item).index();
            //If first li then prepend clone on first position 
            if (idx == 0) {
                itemclone.css('opacity', '0.5');
                $(this).prepend(itemclone);
            }
            //Else Append Clone on its original position
            else {
                itemclone.css('opacity', '0.7');
                $(this).find("li:eq(" + (idx - 1) + ")").after(itemclone);
            }

        },
        change: function(event, ui) {
            //While Change event set clone position as relative
            $(this).find("li:eq(" + idx + ")").css('position', 'relative');

        },
        stop: function() {
            //Once Finish Sort, remove Clone Li from current list
            $(this).find("li:eq(" + idx + ")").remove();
        },
        connectWith: ".connectedSortable"
    }).disableSelection();
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9g](http://codebins.com/bin/4ldqp9g)

# .net - WPF 样式 - 创建字体模板

> ID：11680947
> 
> 赞同：2
> 
> 时间：2012-07-27T03:10:44.583
> 
> 标签：.net, wpf, styles

我正在创建要在我们的新 WPF 应用程序中使用的资源文件。我可以按如下方式创建颜色模板：

```
<SolidColorBrush x:Key="BorderColorBrush" Color="Black"/>
<SolidColorBrush x:Key="NavigationBorderColorBrush" Color="#FF26425D" />
<SolidColorBrush x:Key="ListBorderColorBrush" Color="#FF59593E"/> 
```

但是我如何对字体做同样的事情？即：基本类型字体系列？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:33:07.240

如果你想创建自己的字体，我认为 WPF 帮不了你。但是，如果您希望所有标签和文本都采用一种格式，则可以使用`Style`Control 和 TextBlock：

```
 <Window.Resources>
            <Style TargetType="Control">
                <Setter Property="FontFamily" Value="Courier New" />
                <Setter Property="Foreground" Value="Red" />
            </Style>
            <Style TargetType="TextBlock">
                <Setter Property="FontFamily" Value="Courier New" />
                <Setter Property="Foreground" Value="Red" />
            </Style>
        </Window.Resources> 
```

因为`TextBlock`不是 的子类`Control`，你应该做两次。（如果错了请指正）

# php - 1 个 id 用于更多项目

> ID：11680950
> 
> 赞同：0
> 
> 时间：2012-07-27T03:11:10.650
> 
> 标签：php, mysql, oracle11g

我有一个表单 request_form.php，即管理请求项目的采购请求表单。

Purchase_Request_No：（自动 - 自动增量）
日期：
部门：
供应商：
Item_Request：
示例有 5 行：
1\.
2\.
3\.
4\.
5。

我想在购买请求有 1 个 Purchase_Request_No 时进行。
示例 :

Purchase_Request_No : 17
Date :25-Jul-2012
Dept :Production
供应商 :Microsoft
Item_Request :
1.Windows XP Professional
2.Keyboard
3.Mouse
4.LCD Monitor
5.Speaker

那么，我怎样才能使用 1 Purchase_Request_No 并且项目请求超过 1 个项目（在这种情况下我放置 5 个项目）？

任何人都可以帮助我吗？感谢提前。

* * *

大家好，现在又回来了，我已经在编写这个概念了。它已成功将数据保存到数据库中，但仍然在插入 5 个项目时，它会按每个 ID 提交每个项目的数据。示例：
第 1 项 - 计算机（第 1 次购买）
第 2 项 - 鼠标（第 2 次购买）
我想要的是：
第 1 项 - 计算机（第 1 次购买）
第 2 项 - 鼠标（第 1 次购买）

这是我的代码：我使用自动增量购买。

```
<?php
$conn = oci_connect("system", "dev01");
$n = $_POST['jum'];
for ($i=1; $i<=$n; $i++)
{
$dept=$_POST['dept'];
$date_request=$_POST['date_request'];
$supplier=$_POST['supplier'];   

$item=$_POST['item'.$i];    
$qty=$_POST['qty'.$i];  
$uprice=$_POST['uprice'.$i];    
$total=$_POST['total'.$i];  

$s = oci_parse($conn,
"insert into purchase_request(dept_id, supplier_id, date_request, item, qty, uprice, total_amount) values ('$dept', '$supplier', '$date_request', '$item'
, '$qty', '$uprice', '$total'
)");

$r = oci_execute($s);

oci_rollback($conn);

echo "Data was committed\n";
}
?> 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:20:40.277

有三张桌子。一个将包含以下产品：

```
id    Product
1     Windows XP Professional
2     Keyboard
3     Mouse
4     LCD Monitor
5     Speaker 
```

另一个包含请求：

```
id    request_date    dept       supplier
1     25-Jul-2012     Production Microsoft 
```

第三个将前两个映射在一起

```
id  request_id  item_id
1   1           1
2   1           2
3   1           3
4   1           4
5   1           5 
```

（或者，您可以将产品的 id 设为素数并将`items`列存储为项目的倍数。您需要做的就是找到`items`列的素数，然后您就得到了项目列表!*)

*出于某种原因，工作中没有人认为这是一个好主意。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T03:21:23.867

最好的做法是创建两个表说

```
Purchase
Purchase_Id (Primary Key)
Supplier_Id: (foreign key referring Supplier table)
Purchase_date: datetime

Purchase_Items_Details
purchase_item_id (primary key)
purchase_id (foreign key to Purchase table)
item_id (foreign key to Products/Items table)
qty (Quantity) 
```

在`Purchase`表格中，您将仅输入基本购买详细信息，有关购买的详细信息将添加到`Purchase_Items_Details`

# jsf - 无法在 Primefaces 中更新 p:dataTable（不是整个 p:dataTable）中的组件

> ID：11680951
> 
> 赞同：0
> 
> 时间：2012-07-27T03:11:15.313
> 
> 标签：jsf, primefaces

我将 Primefaces 3.3.1 与 Tomcat 7.0.22.0 一起使用。我有 p:dataTable 其中有 p:inputText 。该 p:dataTable 的 id 是“houseTabID:tabView:form0:table”。这是从 HTML 源代码复制粘贴的。我让对话框（它在数据表所在的表单之外）通过 p:dataTable 中的按钮打开，并且该对话框中的 p:commandButton 更新了 dataTable。

p:commandButton 看起来像这样；

```
<p:commandButton ajax="true" action="#{myBean.setInputText()}"
    value="OK"
    update="#{myBean.getUpdateTarget(0)}"/> 
```

myBean.getUpdateTarget(0) 重新运行正确的字符串以指向目标组件。

我可以通过指定“houseTabID:tabView:form0:table”（意味着 myBean.getUpdateTarget(0) 返回该字符串）成功更新整个 dataTable。但是我在表格中有很多行，所以更新整个表格需要更长的时间才能完成，并且滚动位置被重置，这真的很烦人。这让我只想更新表格中的一行，而不是全部。

所以我首先返回“houseTabID:tabView:form0:table:inputBox”来更新我想要更新的 p:inputText。在 p:dataTable 我有一些看起来像这样的东西；

```
<p:column headerText="Value"
    width="300" style="height:16px; font-size:9pt;">
    <p:inputText id="inputBox" value="#{myItem.value}"
        style="width:95%; height:11px; font-size:9pt;">
        <f:ajax execute="@this" event="blur" />
    </p:inputText>
</p:column> 
```

结果：没有更新，没有错误日志。我知道“houseTabID:tabView:form0:table:inputBox”不起作用，因为它没有指定表中的行。因此，通过使用 rowIndexVar，我尝试使用“houseTabID:tabView:form0:table:0:inputBox”制作：0: 部分来自 rowIndexVar。该字符串是从 HTML 源代码复制粘贴的。但不幸的是，我得到了例外。

```
javax.faces.FacesException: Cannot find component with identifier ":houseTabID:tabView:form0:table:0:inputBox" referenced from "houseTabID:j_idt181:j_idt186". 
```

为什么？显然有“houseTabID:tabView:form0:table:0:inputBox”，我在 HTML 源代码上看到它，我可以用“houseTabID:tabView:form0:table”更新整个 talbe，但用“houseTabID:tabView:form0”抛出异常：表：0：输入框“？这对我来说没有意义。另外，为什么它不会抛出任何异常或使用“houseTabID:tabView:form0:table:inputBox”溢出错误日志？我验证了那个 p:commandButton 的 HTML 源代码；

```
onclick="PrimeFaces.ab({source:'houseTabID:j_idt190:j_idt195',update:'houseTabID:tabView:form0:table:inputBox', 
```

我非常想只更新一行而不是整个 p:dataTable。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:23:02.010

我找到了解决方案。根据[这段](http://forum.primefaces.org/viewtopic.php?f=3&t=6924)对话，

```
position = JQuery(".ui-datatable-scrollable-body").scrollTop();
JQuery(".ui-datatable-scrollable-body").scrollTop(position); 
```

可以做到这一点。看来这是获取和设置 p:dataTable 垂直滚动位置的唯一方法。我在打开对话框之前保存了位置，并在从对话框更新 p:dataTable 后设置了位置。它奏效了，这就是我想做的。

但上述方法存在严重问题。该代码从顶部扫描给定的类“.ui-datatable-scrollable-body”并在第一个找到的处执行。所以它只适用于一个 p:dataTable。幸运的是，我可以提出第二个解决方案。

```
<script type="text/javascript">
    $ = jQuery;
    var scrollPos;
        function saveScrollPos()
        {
            scrollPos = $("#houseTabID\\:tabView\\:form0\\:table_data").parents(".ui-datatable-scrollable-body").scrollTop();
        }
        function getScrollPos()
        {
            $("#houseTabID\\:tabView\\:form0\\:table_data").parents(".ui-datatable-scrollable-body").scrollTop(scrollPos);
        }
</script> 
```

FireFox 中的 FireBug 帮助我发现 Primefaces 添加了“_data”的组件 ID。请看我的问题，我的数据表的 id 是“table”并且有人创建了“table_data”。我可以用上面显示的转义语法指出它，并且函数 parents() 会导致该位置。它在我的应用程序中运行良好。

我真的很感谢 stier01，他发布了他的解决方案，这是我在网上唯一能找到的解决方案。而且我真的很难过 Primefaces p:dataTable 不支持这样一个基本的东西。我知道我们中的许多人都希望在更新时保持 p:dataTable 的滚动位置。我希望它会在不久的将来得到改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:17:55.577

我在这里所知道的边缘摇摇欲坠，但我怀疑这可能是由于页面构建的时间而发生的。构建 DOM 树时，您的表行尚不存在，因此您在表外的按钮无法找到对该行的引用（因为它尚不存在）。构建树并填充数据后，行就在那里。这就是为什么在页面呈现后您可以查找列 id，但不能从表外部引用它。

我不确定解决方案。也许您可以在数据表标签中放置一个远程命令来更新它。也许可以在 JS 中做点什么。

# vim - 当keyremap4macbook不起作用时，如何将Caps Lock映射到Mountain Lion中的Vim的Esc？

> ID：11680954
> 
> 赞同：7
> 
> 时间：2012-07-27T03:11:31.053
> 
> 标签：vim, keyboard-shortcuts, osx-mountain-lion

我用vim在我的mac上开发，昨天我更新到了Mountain Lion。我正在使用[http://pqrs.org/macosx/keyremap4macbook/](http://pqrs.org/macosx/keyremap4macbook/)这将转义键的功能重新映射到大写锁定以在编辑和插入模式之间切换。没有这个，我无法在 vim 中真正进行功能开发，而且它似乎在 Moutain Lion 中不起作用。我*真的*很快需要一个解决方案！

非常感谢你们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T17:17:45.433

发现这个： [https ://github.com/tekezo/PCKeyboardHack/issues/8#issuecomment-7359829](https://github.com/tekezo/PCKeyboardHack/issues/8#issuecomment-7359829)

它对我来说非常有效。

我已经习惯于使用大写锁定作为 esc，在我发现它之前，它正在扼杀我的工作效率。

# shell - ssh 在远程机器上运行 shell 脚本，然后将输出复制到本地机器

> ID：11680956
> 
> 赞同：2
> 
> 时间：2012-07-27T03:11:44.457
> 
> 标签：shell, ssh, plink

我`plink`用来在远程执行 shell 脚本`MachineB`。并且 shell 脚本在`MachineA(Windows Box)`.

```
C:\PLINK>plink uname@MachineB -m test.sh 
Using keyboard-interactive authentication. 
Password: 
Using keyboard-interactive authentication. 
Your Kerberos password will expire in 73 days. 
```

`text file(aa.txt)`该 shell 脚本在 MachineB 上的 a 中生成输出，并将其存储在`/export/home/uname/aa.txt`

**所以我的问题是 -**有什么方法可以在`aa.txt file`脚本使用. 或者我们需要把所有这些东西放在 Windows 批处理文件中？`MachineB``MachineA``ssh`

所以问题陈述是这样的-

1.  `MachineB`在from上执行 shell 脚本`MachineA`。
2.  然后等待 shell 脚本完成它的任务，在我的例子中，它会将输出写入一个文本文件。
3.  在 shell 脚本完成所有任务后，意味着它完成了将所有内容写入 txt 文件，然后将该 txt 文件复制到`MachineA`from`MachineB`

关于如何实现上述方案的任何建议将不胜感激？

**更新：-**

所以假设如果这是 test.sh shell 脚本文件中的内容，并且在脚本末尾添加 pscp 之后，那么它应该是这样的吗？

```
#!/bin/bash 
export HIVE_OPTS="$HIVE_OPTS -hiveconf mapred.job.queue.name=hdmi-technology" 
hive -S -e 'SELECT count(*) from testingtable2' > aa.txt 
pscp uname@MachineB:/export/home/uname/aa.txt c:\documents\foo.txt 
```

所以我在上面的脚本中执行一个配置单元查询，其输出存储在`aa.txt`文件中，一旦查询完成并且输出存储在`aa.txt`文件中，它将转到`fourth line of pscp`将 aa.txt 文件传输到我的本地 Windows 机器里面的文件文件夹。我对吗？这将是整个过程吗？

如果上述过程据我了解是正确的，那么我可以简单地转到 windows cmd 提示符，然后像下面那样做，它会做完全相同的过程。正确的？

```
C:\PLINK>plink uname@MachineB -m test.sh 
Using keyboard-interactive authentication. 
Password: 
Using keyboard-interactive authentication. 
Your Kerberos password will expire in 73 days. 
```

**再次更新：-**

所以我需要创建一个bat文件，假设这是下面的文件，所以该文件中的`test.bat`内容应该是这样的-`test.bat`

```
plink uname@MachineB -m test.sh 
pscp  uname@MachineB:/export/home/uname/aa.txt c:\documents\foo.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:40:10.000

执行后可以使用`scp`下载文件。如果您在 Windows 机器上设置[winsshd](http://www.bitvise.com/winsshd)`append`并在 test.sh 文件中设置复制命令：

```
scp /export/home/uname/aa.txt user@windowsmachine.com:/homedir 
```

文件将在完成后传输。

[同样，您可以在您的 windows 机器上使用pscp](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)之类的 windows scp 客户端，您可以从 linux 机器上提取文件：

```
pscp uname@MachineB:/export/home/uname/aa.txt c:\documents\foo.txt 
```

所以在windows机器上，有一个批处理脚本：

```
plink uname@MachineB -m test.sh 
pscp  uname@MachineB:/export/home/uname/aa.txt c:\documents\foo.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:22:11.307

只是为了补充已经说过的内容，我正在运行非常相似的东西并使用以下格式（来自批处理脚本）：

plink -ssh 用户@ -pw 密码 -m yourScript.sh

pscp -sftp -pw 密码 user@IP-Address:/path/to/remote/file C:\path\to\local\save\directory

第二个命令在一行上，但它可能不会像这里那样呈现。当然，用您的登录名替换 IP 地址、用户和密码 :-)

希望有帮助！

编辑 - 对不起，刚刚意识到这个*确切*的答案已经给出。赞！

# ios - 此版本的 Xcode 不支持 IOS 文档的自动布局

> ID：11680958
> 
> 赞同：3
> 
> 时间：2012-07-27T03:12:14.880
> 
> 标签：ios, storyboard

我在创建程序时使用的是 Xcode 4.5 Beta 3。当我尝试切换到 Xcode 4.4 时，它给了我以下错误。如何让它在这个版本的 xcode 中工作。

```
The document "MainStoryboard.storyboard" could not be opened. This version of Xcode does not 
support Auto Layout for iOS documents. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:53:33.043

在 4.5 中打开项目，并在 File Inspector 的 Interface Builder Document 中关闭“Use Autolayout”。并保存项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:04:49.187

在 4.5 中打开项目并弄清楚如何关闭自动布局并打开“弹簧和支柱”。我现在没有这个版本，但是 OSX 也有类似的问题。就我而言，我可以选择一个 xib 文件，然后在文件属性的第三个窗格中我可以更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:48:57.757

如果您出于某种原因不想安装 XCode 4.5，可以右键单击有问题的 .xib，选择 Open As/Source Code，然后搜索`Autolayout`. 在我的例子中，这个属性位于文件的最后。更改`YES`为`NO`，您将能够构建您的项目。我不得不走这条路，因为 XCode 4.4.1 拒绝与 Xcode 4.5 保存的 .xib 文件有任何关系。

# textarea - 使用 Chrome 时无法在文本区域中复制输入的文本

> ID：11680962
> 
> 赞同：0
> 
> 时间：2012-07-27T03:13:10.710
> 
> 标签：textarea

我用 textarea 创建了一个简单的 HTML 表单，在 IE 中我可以“全选”，它会复制页面上和 textarea 中的所有信息，但在 Chrome 中，它不会复制 textarea 中的信息。我究竟做错了什么？

```
<textarea rows="3" cols="60">user inputs data here, won't copy this while using Chrome</textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:34:39.710

你可以认为这是一个错误。在此处报告错误：

[http://dev.chromium.org/for-testers/bug-reporting-guidelines](http://dev.chromium.org/for-testers/bug-reporting-guidelines)

作为解决方法，您可以使用 javascript 来提取 textarea 文本。或 File -> Save As 将保留 textarea 内容。

# objective-c - 如何从数组数组构建数组

> ID：11680963
> 
> 赞同：1
> 
> 时间：2012-07-27T03:13:10.300
> 
> 标签：objective-c, ios, multidimensional-array

我对 iOS 开发相当陌生。

我有一个 viewController 包含一个属性，该属性是自定义类的对象。我们将该自定义类称为 ClassA。ClassA 的对象有一个属性，它是另一个自定义类的对象的 NSMutableArray，我们将称之为 ClassB。ClassB 有一个属性，它也是 CLLocation 类型的对象的 NSMutableArray。

从 viewController 的一个方法内部，我需要创建一个 CLLocationCoordinate2D 结构的 C 数组（CLLocationCoordinate2D 是 CLLocation 的一个属性）。这些 CLLocationCoordinate2D 中的每一个都需要来自 ClassB 和 ClassA 中的所有对象所拥有的所有 CLLocation 对象。如果我理解我所做的，我相信我有一个 3-D 数组。

我被困在如何组装这个结构数组上。如果它只是一个数组，我会做这样的事情：

```
NSUInteger numberOfSteps = [objectOfClassX count];    
CLLocationCoordinate2D coordinates[numberOfSteps];

for (NSInteger index = 0; index < numberOfSteps; index++) {
    CLLocation *location = [objectOfClassX objectAtIndex:index];
    CLLocationCoordinate2D coordinate = location.coordinate;

    coordinates[index] = coordinate;
} 
```

但是，我正在努力获取第一个数组中的每个对象，然后是第二个数组中的每个对象，然后是 CLLocationCoordinate2D 中的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:23:20.147

迭代一次以获得坐标的总数，然后再次迭代以将它们复制到新分配的数组中。

```
NSInteger coordCount = 0, coordIndex = 0;
for(ClassA *a in collectionOfA)
    for(ClassB *b in a.collectionOfB)
        coordCount += [b.locations count];

CLLocationCoordinate2D coords[coordCount];

for(ClassA *a in collectionOfA)
  for(ClassB *b in a.collectionOfB)
    for(CLLocation *location in b.locations)
        coords[coordIndex++] = location.coordinate; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T03:19:25.157

试一试：`coordinates = [NSMutableArray arrayWithArray: objectOfClassX];`

# multithreading - JBoss 中的线程

> ID：11680970
> 
> 赞同：1
> 
> 时间：2012-07-27T03:14:27.443
> 
> 标签：multithreading, jboss

好的，所以我有一个 Java 应用程序正在部署到 JBoss。应用程序需要轮询外部 Web 服务以获取作业。每个作业都可以在自己的线程上运行。这将与带有处理消息的 mdb 池的 jms 队列非常相似。唯一真正的区别是工作队列是由一个安静的 web 服务提供的。所以我的问题是启动线程池的最佳方式是什么，或者 jboss 是否有更好的方式来做到这一点。JMS 不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:22:22.680

从理论上讲，您不应该在 Java EE 容器中管理自己的线程（实际上，如果您不使用 EJB、JPA 或任何其他容器功能，它会更加轻松）。

在 Java EE 6 (JBoss 7) 中，您可以使用 Java EE 的特性来做到这一点；您需要通过新的@Asynchronous EJB 调用来利用计时器功能。唯一的问题是您没有异步调用的持久性，如果它失败（处理期间服务器崩溃），则作业将丢失。

如果您需要确保工作已完成，唯一的 Java EE 方法是持久性 JMS（甚至是使用计时器 EJB 填充的本地方法）

示例：

```
@Singleton
@Startup
public class Pool{

    @Inject
    private AsyncBean aBean;

    @Resource
    private TimerService timerService;

    @Timeout
    public void pull(){
      try{
        // for performance you may get several job and launch several async job
        job = getJob() // make your REST call to get the job
        // make sure you realy get a job
        aBean.async(job)
      }finally{
        //recreate the timer
        timerService.createSingleActionTimer(100, new TimerConfig("timer name", false)); 
      }
    }

    @PostConstruct
    void init(){
       timerService.createSingleActionTimer(100, new TimerConfig("timer name", false));
       // as timer is created at each start up no need to persist it.
    }
 } 
```

异步 bean：

```
@Stateless
public class AsyncBean{
  @Asynchronous
  public void async(Job job){
     // do your stuff
  }
} 
```

# python - CSS 不适用于 Google App Engine

> ID：11680972
> 
> 赞同：-3
> 
> 时间：2012-07-27T03:14:30.347
> 
> 标签：python, css, google-app-engine, jinja2

我正在使用这些文件从官方 GAE webapp2 教程构建留言簿应用程序

**helloworld/app.yaml**

```
application: helloworld
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /stylesheets
  static_dir: stylesheets

- url: /.*
  script: helloworld.app

libraries:
- name: jinja2
  version: "2.6" 
```

**helloworld/index.html**

```
 <html>
 <head>
    <link  rel="stylesheet" type="text/css" 
    href="/stylesheets/main.css" />

  </head>
  <body>
    {% for greeting in greetings %}
      {% if greeting.author %}
        <b>{{ greeting.author }}</b> wrote:
      {% else %}
        An anonymous person wrote:
      {% endif %}
      <blockquote>{{ greeting.content|escape }}</blockquote>
    {% endfor %}

    <form action="/sign" method="post">
      <div><textarea name="content" rows="3" cols="60"></textarea></div>
      <div><input type="submit" value="Sign Guestbook"/></div>
    </form>

    <a href="{{ url }}">{{ url_linktext }}</a>

  </body>
</html> 
```

**helloworld/helloworld.py**和**helloworld/stylesheets/main.css**与教程中的相同。

```
import jinja2
import os

jinja_environment = jinja2.Environment (
    loader=jinja2.FileSystemLoader(os.path.dirname(_file_)))

import cgi
import datetime
import urllib
import webapp2

from google.appengine.ext import db
from google.appengine.api import users

class Greeting(db.Model):
  """Models an individual Guestbook entry with an author, content, and date."""
  author = db.StringProperty()
  content = db.StringProperty(multiline=True)
  date = db.DateTimeProperty(auto_now_add=True)

def guestbook_key(guestbook_name=None):
  """Constructs a Datastore key for a Guestbook entity with guestbook_name."""
  return db.Key.from_path('Guestbook', guestbook_name or 'default_guestbook')

class MainPage(webapp2.RequestHandler):
    def get(self):
        guestbook_name=self.request.get('guestbook_name')
        greetings_query = Greeting.all().ancestor(
            guestbook_key(guestbook_name)).order('-date')
        greetings = greetings_query.fetch(10)

        if users.get_current_user():
            url = users.create_logout_url(self.request.uri)
            url_linktext = 'Logout'
        else:
            url = users.create_login_url(self.request.uri)
            url_linktext = 'Login'

        template_values = {
            'greetings': greetings,
            'url': url,
            'url_linktext': url_linktext,
        }

        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

class Guestbook(webapp2.RequestHandler):
  def post(self):
    # We set the same parent key on the 'Greeting' to ensure each greeting is in
    # the same entity group. Queries across the single entity group will be
    # consistent. However, the write rate to a single entity group should
    # be limited to ~1/second.
    guestbook_name = self.request.get('guestbook_name')
    greeting = Greeting(parent=guestbook_key(guestbook_name))

    if users.get_current_user():
      greeting.author = users.get_current_user().nickname()

    greeting.content = self.request.get('content')
    greeting.put()
    self.redirect('/?' + urllib.urlencode({'guestbook_name': guestbook_name}))

app = webapp2.WSGIApplication([('/', MainPage),
                               ('/sign', Guestbook)],
                              debug=True) 
```

的CSS

```
body {
  font-family: Verdana, Helvetica, sans-serif;
  background-color: #DDDDDD;
} 
```

当我运行代码时，一切都按预期工作，但未应用 css

i）当我查看源代码时，我什至看不到 css 的标签 ii）当我查看日志时，我得到了这个奇怪的错误：

```
INFO     2012-07-27 02:59:11,921 dev_appserver.py:2904] "GET /favicon.ico HTTP/1.1" 404 
```

我很感激这方面的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:21:12.527

在 helloworld.py 的第 4 行，你写`_file`了 _ 但它应该是`__file`__

如果我做出改变，整个事情对我有用。此外，我还收到了对 css 文件的 GET 请求。

```
INFO     2012-07-28 17:19:17,895 dev_appserver.py:2952] "GET /stylesheets/main.css HTTP/1.1" 200 - 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:00:18.677

我遇到了同样的问题，其他团队成员也遇到了同样的问题。

起初，我被告知要回到 Google App Engine Launcher 的 1.6.2 版，但这不起作用，所以我通过终端进行部署（使用旧的常规方法 update.py）并且它起作用了。

我猜 GoogleAppEngine Launcher 不适用于某些项目。

注意：我们使用的是旧的 M/S 版本的 AppEngine。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T03:03:23.210

您对 app.yaml 中样式表的调用存在严重问题。试试这个，而不是：

```
application: helloworld
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /stylesheets
  static_dir: stylesheets

# you missed this section. It allows all .css files inside stylesheets
- url: /stylesheets/(.*\.(css)) 
  static_files: stylesheets/\1
  upload: stylesheets/(.*\.(css))

- url: /.*
  script: helloworld.app

libraries:
- name: jinja2
  version: "2.6" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T03:26:48.213

听起来您的测试服务器没有为您修改后的 index.html 提供服务，但它正在为您提供没有 CSS 链接标记的原始 index.html 服务。或者它可能正在使用缓存页面。尝试清除缓存或重新启动服务器。或者确保您的更新已正确保存。

# ruby-on-rails - Rails JSONP在接收端解析错误

> ID：11680976
> 
> 赞同：0
> 
> 时间：2012-07-27T03:14:59.323
> 
> 标签：ruby-on-rails, json, jquery, jsonp

我有一个非常具体的问题...

我有 2 个 Rails 应用程序：

*   应用 1 向应用 2 发出请求并获得有效的 JSONP 响应。
*   App 2 配备了 Rack JSONP 中间件，因此它返回正确的包装回调（即`JQuery1919191([{[{"find_item":{"geo_lon":-74`....etc）

出于某种原因，App 1 在 javascript 控制台中引发以下错误：

`JSONP Error: parsererror Error: jQueryXXXXXX was not called`.

但是，在非 Rails 上下文中测试它时，它工作正常。请参阅我的小提琴示例： http: [//jsfiddle.net/pBDyW/16/](http://jsfiddle.net/pBDyW/16/)此代码（在此示例中有效）与我在 Rails 应用程序中使用的代码完全相同。

我感到困惑的是我应该如何配置 App 1（接收应用程序）以正确处理传入的 JSONP 请求。我确信它一定是 Rails 的东西，因为从一个通用页面调用它，在 Apache 中提供服务，工作正常。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:34:35.877

事实证明，rails 应用程序（应用程序 1）处理传入请求的方式似乎存在（无论出于何种原因）微妙之处。我修改了我的方法，即在我的控制器中呈现 JSON 响应：

`respond_to :json`

`def json_result`

`@blah = [stuff from database]`

`respond_with @blah`

`end`

方法（推荐使用 Rack JSON Middlware 方法，并将我的 JSON 响应恢复到：

`render :json => @find_results, :callback => params[:callback]`

这里的区别很奇怪。只有当我执行如下响应时，rails *app* JSONP 调用才会成功：

`success: callbackFunction`

并不是

`success: function(){//do stuff}`

但是，后一个示例适用于 JS 小提琴。诡异的。我想这只是 Rails 3+ 中的某种格式差异。

无论如何，希望这对遇到它的人有所帮助！

# javascript - jQuery 鼠标悬停 DOM

> ID：11680977
> 
> 赞同：1
> 
> 时间：2012-07-27T03:15:32.297
> 
> 标签：javascript, jquery, html, dom, mouseover

我有许多元素（我不知道总数）。当我将鼠标悬停在这些元素中的任何一个上时，我希望出现一些东西（通过`mouseover`绑定到这些元素的共享类来处理）。

但是，我想要出现的东西`mouseover`取决于光标所在的位置 - 所以我需要获取光标下的 DOM 元素，而不需要能够将`mouseover`事件绑定到代码中的每个元素。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:23:01.350

事件委托在这里是你的朋友。

请参阅 Christian Heilmann 关于该主题的这篇文章[http://www.icant.co.uk/sandbox/eventdelegation/](http://www.icant.co.uk/sandbox/eventdelegation/)。

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:26:23.813

jQuery 使这很容易`.each()`：

```
$('#container').bind('mouseover', function () {
        $(".selector").each(function(){
                // Do something $(this) = item clicked
                $(this).toggleClass('.example'); // Toggle class is just an example
        });
}); 
```

然后，您可以检查 $(this) 的某些特征，然后根据值/特征做不同的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T03:41:50.293

*HTML：*

```
<a id="say1" class="say" href="#" data-word="one">Say 'one'</a>
<a id="say2" class="say" href="#" data-word="two">Say 'two'</a>
<a id="say3" class="say" href="#" data-word="three">Say 'three'</a> 
```

*Javascript（使用 jQuery）：*

```
$(document).ready(function () {
  $('.say').mouseover(function () {
    alert($(this).data('word'));
  });
}); 
```

*纯 Javascript（没有 jQuery，它是不等价的）：*

```
window.onload = function () {
  var onmouseover = function (e) {
    alert(e.target.getAttribute('data-word'));
  };

  var elems = document.getElementsByClassName('say');   

  for (var i = 0; i < elems.length; i += 1) {
    elems[i].onmouseover = onmouseover;
  }
}; 
```

`alert`您可以实现任何逻辑，而不是调用函数。

# c# - 异步文本框中的内容

> ID：11680979
> 
> 赞同：-2
> 
> 时间：2012-07-27T03:16:10.383
> 
> 标签：c#

我想在文本框中异步显示内容？有人知道我下面列出的代码的错误吗？我想实现文本框中的文本将每秒更新为新值？我还想问为什么每次在调用控制器的调用方法之前都要检查 InvokeRequired ？

```
 private void Counting(int Num)
    {

        int i = 0;
        string counter = null;
        while (i < Num)
        {
            Thread.Sleep(1000);
            counter = string.Format(" {0}", i);
            tbxStatus.BeginInvoke(new UpdateStatusDelegate(UpdateStatus), new string[] { counter });
        }

    }

    public void UpdateStatus(string data)
    { 
        tbxStatus.Text += data;
    }

    public delegate void UpdateStatusDelegate(string data);

    public delegate void CountDelegate(int num);

    private void btnStart_Click(object sender, EventArgs e)
    {
        if (this.InvokeRequired)
        {
            this.Invoke(new CountDelegate(Counting), new object[] { 5 });
        }
        else
            Counting(5);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T14:58:36.663

我最近遇到了类似的问题。

我正在编写一个网络游戏，我想将文本附加到我拥有的文本框中，但是我会收到一条错误消息，说我试图从不同的线程更改 Windows 窗体控件，从而导致线程不安全。这是因为我在服务器端使用 ASyncCallback。

我以前有这个：（控制台方法是一个简单的方法，它获取一个字符串并将其附加到文本框）。

```
 console("message"); 
```

为了解决这个问题，我不得不把它改成这个，现在解决这个问题：

```
 this.Invoke((MethodInvoker)delegate { console("message"); }); 
```

希望这可以帮助遇到此问题的其他人。这可能不是最好的方法，但它对我有用。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:58:22.460

您的`InvokeRequired`测试应该在委托内部：

```
public void UpdateStatus(string data)
{
    if (this.tbxStatus.InvokeRequired)
    {
        UpdateStatusDelegate d = new UpdateStatusDelegate(UpdateStatus);
        this.Invoke(d, new object[] { data });
    }
    else
    {
        this.tbxStatus.Text = data;
    }
} 
```

如果您使用以下扩展方法，您还可以使这变得更容易和更清晰：

```
public static TResult SafeInvoke(this T isi, Func call) where T : ISynchronizeInvoke
{
    if (isi.InvokeRequired) {
        IAsyncResult result = isi.BeginInvoke(call, new object[] { isi });
        object endResult = isi.EndInvoke(result); return (TResult)endResult;
    }
    else
        return call(isi);
}

public static void SafeInvoke(this T isi, Action call) where T : ISynchronizeInvoke
{
    if (isi.InvokeRequired) isi.BeginInvoke(call, new object[] { isi });
    else
        call(isi);
} 
```

因此，如果我想调用我在 UI 线程中定义的方法（例如在表单实例中定义的方法），您可以使用以下代码来执行此操作（无需创建任何委托或任何东西）：

```
formInstance.SafeInvoke(f => f.myFormMethod("parameter1","parameter2")); 
```

在您的情况下，您可以执行以下操作：

```
formInstance.SafeInvoke(f => f.UpdateStatus(myCounterInt.toString)); 
```

或类似的东西。

我已经[在我的博客上](http://www.intelligiblebabble.com/generic-method-to-safely-perform-cross-thread-invoke/)写过关于使用它的文章，但是当我写[这篇 CodeProject 文章时不要给我功劳](http://www.codeproject.com/Articles/52752/Updating-Your-Form-from-Another-Thread-without-Cre)

# java - 从数据库加载 26MB 文本数据消耗 258MB 的 JVM 堆

> ID：11680982
> 
> 赞同：4
> 
> 时间：2012-07-27T03:16:30.870
> 
> 标签：java, hibernate, jvm, out-of-memory, sybase

应用程序（Spring、JPA Hibernate、Sybase 12、Webapp）在启动时在本地运行时会消耗基于 VisualVM 的 256MB 堆空间中的 40MB。当我触发返回 70,000+ 行（文本数据无 blob）的搜索时，堆空间图会飙升至 256MB 并耗尽内存。**我已经通过使用 setMaxResults(limit) 解决了这个问题。**但是，当我查询相同的数据，复制粘贴到文本文件并保存到文件系统时，我可以看到大小只有 26MB 的文本。

所以实际上，从数据库加载 26MB 的文本量消耗了 216MB（从 256-40），在内存不足发生时**谁在消耗 190MB**？也许它会是框架，但我看不出它如何消耗比正在加载的实际数据更多......

*** *再次注意，我用 setMaxResults(limit) 解决了这个问题，我的问题不是做什么，而是为什么，出于教育目的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T03:33:10.613

需要考虑的一些事项：

您的操作系统可能使用每个字符 8 位的编码来存储文本文件。Java 字符串在内部都是以每个字符 16 位编码的，那里的空间是原来的两倍。

只有几位数字的数字将比数字编码为文本更小。例如，'1' 是文本文件中的一个字节字符，但值为 1 的 long 是内存大小的八倍。

hibernate 从 SQL 结果集中取出值并将其映射到您的 java 对象上会有重复。它可能需要将结果集的内容包装/翻译成您在映射中定义的类型。

如果您的每实体数据实际上很小且实体数量众多，那么对象开销大小与数据大小的比率显然会很高。

如果集合中有少量数据，则集合的大小可能会相对于数据快速增加。在极端的示例中，如果您有一个或两个字符串的 LinkedList，那么每 16-32 位实际数据的指针仅消耗 192 位。在数组列表中，指向 16-32 位数据的指针仍然是 64 位。（当然假设是 64 位操作系统。）

您在休眠中加载的每个对象都被“跟踪”以在所谓的 L1 缓存中进行脏检查。对于具有少量数据的大量实体而言，相对于数据大小而言，用于执行此操作的内部数据结构和仪器确实存在相当多的开销。

--

所以26MB的数据在java中已经是52MB的内存数据了，假设都是字符串，没有数字，没有日期，否则会更大。

然后如果它被分成许多小块，700,000 个小字符串而不是 1,000 个非常长的字符串，数据结构开销的大小是实际数据大小的三倍是完全合理的，很容易让你超过 200MB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T03:45:55.277

各种各样的事情。

例如，假设您的行有 10 个文本列，它们表示为具有 10 个字符串字段的简单 Java Bean。

一个字符串有 4 个字段：一个 char[] 和 3 个整数。

String 是 Object 的后代，Object 有 1 个 int 和对其类的引用。

在 64 位 JVM 上，这些引用很可能是 8 个字节（但不一定，但为了争论，我们会坚持使用它）。

一个 10 个字符的字符串将有一个 char[10] 和 3 个 int，每个 4 个字节。

char[10] 是指向数组的指针。一个数组必须跟踪它的长度，这可能是另外 4 个字节，它也是一个 Object（因此是类指针和另一个 int）加上数据。但是 Java 中的字符在内部表示为 UTF-16，每个字符 2 个字节。因此，10 个字符的实际数组需要 24 个字节。对该数组的引用是一个指针。

因此，单个 String 实例是：8 + 4 用于 Object，8 + 4 + 4 + 4 用于 String 本身，8 + 4 + 20 用于实际数据，即 62 个字节。

你的 bean 有 10 个字符串字段，加上扩展对象，所以 8 + 4 + (10 * 8)。

因此，对于 100 个字符的文本，数据库中的一行是 8 + 4 + (10 * 8) + (10 * 62) 等于 712 个字节。

这些不是完美的数字，我无法具体说明数组是如何存储的，并且对象引用在 64b JVM 上可能不是 8 个字节。

但它让您对所涉及的开销有所了解。这仅适用于您的原始数据。如果您将这些行存储在 ArrayList 中，那么有 70,000 * 8 只是指向您的对象 - 560K 仅用于结构。

# opencv - JavaCV/OpenCV cvDrawContours 修改原始图像

> ID：11680984
> 
> 赞同：3
> 
> 时间：2012-07-27T03:16:50.687
> 
> 标签：opencv, javacv

我正在试验 JavaCV (OpenCV)，我对以下行为感到困惑。我的程序很简单：

1.  抓取图像
2.  创建图像的灰度版本（保持原始图像不变）
3.  阈值灰度图像
4.  在灰度图像中查找轮廓（克隆图像，因为 cvFindContours 修改了图像，我们希望按原样显示）
5.  **在原始彩色图像上**绘制轮廓

 **问题是除非我克隆`grabbedImage`（见注释行），否则灰度图像会被修改并在其上绘制轮廓。此外，就好像在`grabbedImage`.

我还尝试在循环中添加一个睡眠，它解决了这个问题。难道我`grabbedImage`多次得到相同（修改）？我检查了java参考，它是不同的，但它可以是同一个缓冲区吗？

任何想法？

谢谢

```
package com.mdarveau.opencvtest;

import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;

import com.googlecode.javacpp.Loader;
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FrameGrabber;
import com.googlecode.javacv.cpp.opencv_core.CvContour;
import com.googlecode.javacv.cpp.opencv_core.CvMemStorage;
import com.googlecode.javacv.cpp.opencv_core.CvScalar;
import com.googlecode.javacv.cpp.opencv_core.CvSeq;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
import com.googlecode.javacv.cpp.opencv_objdetect;

public class Demo {

    public static void main( String[] args ) throws Exception {
        // Preload the opencv_objdetect module to work around a known bug.
        Loader.load( opencv_objdetect.class );

        FrameGrabber grabber = FrameGrabber.createDefault( 1 );
        grabber.start();

        IplImage grabbedImage = grabber.grab();
        int width = grabbedImage.width();
        int height = grabbedImage.height();

        IplImage grayImage = IplImage.create( width, height, IPL_DEPTH_8U, 1 );

        CvMemStorage storage = CvMemStorage.create();

        CanvasFrame filterProbe = new CanvasFrame( "Filtered", CanvasFrame.getDefaultGamma() / grabber.getGamma() );
        CanvasFrame enhancedProbe = new CanvasFrame( "Enhanced", CanvasFrame.getDefaultGamma() / grabber.getGamma() );

        while ( filterProbe.isVisible() && enhancedProbe.isVisible() && (grabbedImage = grabber.grab()) != null ) {
            cvClearMemStorage( storage );

            // Convert to grayscale image...
            cvCvtColor( grabbedImage, grayImage, CV_BGR2GRAY );
            // UNCOMMENT FIXES THE PROBLEM grabbedImage = grabbedImage.clone();

            // Let's find some contours! but first some thresholding...
            cvThreshold( grayImage, grayImage, 128, 255, CV_THRESH_BINARY );

            // To check if an output argument is null we may call either isNull() or equals(null).
            CvSeq contour = new CvSeq( null );
            // cvFindContours modifies the image so clone it first since we want to keep the grayscale version
            cvFindContours( grayImage.clone(), storage, contour, Loader.sizeof( CvContour.class ), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE );
            while ( contour != null && !contour.isNull() ) {
                if ( contour.elem_size() > 0 ) {
                    CvSeq points = cvApproxPoly( contour, Loader.sizeof( CvContour.class ), storage, CV_POLY_APPROX_DP, cvContourPerimeter( contour ) * 0.02, 0 );
                    cvDrawContours( grabbedImage, points, CvScalar.BLUE, CvScalar.BLUE, -1, 1 /*CV_FILLED*/, CV_AA );
                }
                contour = contour.h_next();
            }

            filterProbe.showImage( grayImage );
            enhancedProbe.showImage( grabbedImage );
        }
        filterProbe.dispose();
        enhancedProbe.dispose();
        grabber.stop();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T05:40:25.187

这是[cvFindContours()](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#int%20cvFindContours%28CvArr%2a%20image,%20CvMemStorage%2a%20storage,%20CvSeq%2a%2a%20first_contour,%20int%20header_size,%20int%20mode,%20int%20method,%20CvPoint%20offset%29)的预期行为：

> 该函数在提取轮廓的同时修改图像。**

# android - 以编程方式解锁屏幕

> ID：11680985
> 
> 赞同：1
> 
> 时间：2012-07-27T03:17:49.367
> 
> 标签：android, lockscreen

有什么方法可以通过单击主页按钮来解锁屏幕。我只是使用 DeviceAdminReceiver API 动态锁定屏幕。就像我需要通过单击主页按钮或其他一些键来解锁屏幕一样。请有人建议我对此提出一些想法。

# iphone - segue.destinationViewController 究竟做了什么？

> ID：11680992
> 
> 赞同：0
> 
> 时间：2012-07-27T03:18:41.653
> 
> 标签：iphone, objective-c, ios, xcode

大家好，这行代码是做什么的？

```
 AddRoleTVC *addRoleTVC = segue.destinationViewController; 
```

我知道第一部分，`AddRoleTVC *addRolveTVC`但我不知道该`segue.destinationViewController`部分的作用，我找到了许多不同的答案，我只是不确定哪个是正确的。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T06:07:01.190

在这里，`segue.destinationViewController`我们将导航到的 ViewController 的点是“id”类型。

因为我们知道我们要导航到哪里，即在这种情况下`AddRoleTVC`，我们可以将`segue.destinationViewController`其视为我们的`AddRoleTVC`并在其上调用方法。

这就是我们如何通过 segue 将数据从一个 VC 传递到另一个，方法是直接在我们的新 ViewController 上调用**set 属性方法，即****addRoleTVC**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:34:11.607

segue 是从一个视图控制器到另一个视图控制器的转换。destinationViewController 是“另一个”，正在转换到的那个。

此属性的典型用途是在 segue 发生之前对 destinationViewController 进行一些额外的设置。来自 VC 的消息 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender。然后它可以抓取 segue.destinationViewController 并进行额外的初始化，就像给它模型一样。

# ios - 将 iPad 插入 Windows 7 时出现 iPad endpointIOTimerExpired 错误

> ID：11680993
> 
> 赞同：0
> 
> 时间：2012-07-27T03:18:51.247
> 
> 标签：ios, ipad, xamarin.ios, usb

将 iPad 插入 Windows 7 笔记本电脑后，大约 5-10 秒后，我收到类似于以下错误的错误。当我将相同的 iPad 插入 WinXP 笔记本电脑时，我没有收到错误消息。我在两台 iPad 上尝试过（一台是 iOS 5.0.1，另一台是 iOS 5.1.1），它们都在 Win7 机器上显示错误。

XP 机器安装了 iTunes 10.5.0.42。

我在 Win7 机器上尝试了 iTunes 10.6.3.25 和 10.5.0.142（在第一次卸载 10.6.3.25 之后），两个版本的 iTunes 都出现了错误。我没有 10.5.0.42 安装程序的副本，否则我会在 Win7 机器上尝试。

~~我怀疑这个错误导致我在使用 USB 连接与 iPad 对话的 Win7 机器上的 monotouch 代码出现连接问题。我的代码在 XP 机器上运行良好。~~

REPHRASE：我怀疑这个错误导致我的 iPad 运行 Monotouch 客户端之间的连接问题，该客户端通过 USB 与 Win7 机器上的服务器进行通信。我在 XP 机器上的服务器通过 USB 与 iPad 通信很好。XP 和 Win7 机器上的服务器代码相同。但是，当我的代码（在任何机器/设备上）根本没有运行时，就会出现下面显示的错误，因此它看起来可能是操作系统/驱动程序之类的问题。

![在此处输入图像描述](../Images/01dec60d376113f24d1816a1561052e7.png)

注意：上图取自[这里](http://pastebin.com/mak0j0Zp "这里")。我的错误原因（插入 iPad）与此链接中列出的不同，但错误消息基本相似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:49:02.447

如果有任何帮助，我可以通过将我的 ipad 2 插入我的 Mac 上的 Win7 VM（安装了最新的 iTunes）来重现这一点

我猜这是Win7 + iOS的问题？与 MonoTouch 没有任何关系？

# javascript - socket.io 解析连接 (>= 2.4.1) 签名会话 cookie

> ID：11680997
> 
> 赞同：12
> 
> 时间：2012-07-27T03:19:36.223
> 
> 标签：javascript, node.js, express, socket.io, connect

使用最新版本的 connect（截至 2012 年 7 月 26 日），我找到了以下从 socket.io 获取会话 ID 的方法，该会话 ID 将与 connect-redis 存储一起使用。

```
var express = require('express')
, routes = require('./routes')
, fs = require('fs')
, http = require('http')
, io = require('socket.io')
, redis = require('connect-redis')
, connect = require('express/node_modules/connect')
, parseSignedCookie = connect.utils.parseSignedCookie
, cookie = require('express/node_modules/cookie');

var secret = '...';
var rStore = new(require('connect-redis')(express));

//...

var server = http.createServer(app);
var sio = io.listen(server);

sio.set('authorization', function(data, accept) {
    if(data.headers.cookie) {
        data.cookie = cookie.parse(data.headers.cookie);
        data.sessionID = parseSignedCookie(data.cookie['connect.sid'], secret);
    } else {
        return accept('No cookie transmitted', false);
    }
    accept(null, true);
}); 
```

`data.sessionID`然后可以稍后使用，例如

```
sio.sockets.on('connection', function(socket) {
    console.log('New socket connection with ID: ' + socket.handshake.sessionID);
    rStore.get(socket.handshake.sessionID, function(err, session) {
        //...
    });
}); 
```

必须从 express（connect，connect 的实用程序和 cookie 模块）导入这么多，似乎是获取解析 connect 签名 cookie 所需的函数的一种过于迂回的方式。有没有人找到另一种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T05:29:38.180

我遇到了同样的问题，只是写了一个小模块来抽象它。这是它的用法。它是使用 express 3 编写和测试的，所以应该可以在 connect 2.4.x 中正常工作。否则请告诉我。

```
var SessionSockets = require('session.socket.io')
  , sessionSockets = new SessionSockets(io, sessionStore, cookieParser);

sessionSockets.on('connection', function (err, socket, session) {
  //your regular socket.io code goes here
}); 
```

有关其工作原理的更多详细信息，请参阅[https://github.com/wcamarao/session.socket.io](https://github.com/wcamarao/session.socket.io)

# c# - 为什么此代码在集合索引器中有新的

> ID：11680999
> 
> 赞同：6
> 
> 时间：2012-07-27T03:20:08.733
> 
> 标签：c#, collections, indexer

> **可能重复：**
> [属性声明中的“new”关键字](https://stackoverflow.com/questions/3649174/new-keyword-in-property-declaration)

如果这是 C# 101，请原谅我，但我试图理解下面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections;

namespace Generics
{
    class RabbitCollection : ArrayList
    {
        public int Add(Rabbit newRabbit)
        {
            return base.Add(newRabbit);
        }

        //collections indexer 
        public new Rabbit this[int index]
        {
            get { return base[index] as Rabbit; }
            set { base[index] = value; }
        }
    }
} 
```

为什么索引器`new`前面有？顺便说一句，Rabbit 是在另一个文件中定义的类。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T03:24:33.003

尝试从代码中删除 new ，您应该会收到警告：

> RabbitCollection.this[int]'**隐藏继承的成员** 'System.Collections.ArrayList.this[int]'。**要使当前成员覆盖该实现，请添加 override 关键字。否则添加新关键字。**

您可能希望看到[新的修饰符 C#](http://msdn.microsoft.com/en-us/library/435f1dw2.aspx)

> new 关键字**显式隐藏了从基类继承的成员**。当您隐藏继承的成员时，该成员的派生版本将替换基类版本。尽管您可以在不使用 new 修饰符的情况下隐藏成员，但结果是警告。如果您使用 new 显式隐藏成员，它会抑制此警告并记录派生版本旨在作为替换的事实。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T03:25:31.460

因为基类 ( `ArrayList`) 也有一个索引器。上面写着“`new`我故意用我自己的一个替换基类成员。”

它在没有 的情况下也可以工作`new`，但是`new`告诉编译器你知道你在做什么。

当然，在过去七八年的任何时间编写的代码中，您应该使用`List<T>`代替`ArrayList`，然后您不需要使用自己的强类型索引器创建后代。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-27T03:26:30.510

这是因为这个类隐藏了基类的一个成员（ArrayList 也定义了相同的索引器）。

New 告诉编译器这种行为是有意的而不是错误的。

阅读[c# 多态性指南](http://msdn.microsoft.com/en-us/library/ms173152%28v=vs.80%29.aspx)

> 用新的派生成员替换基类的成员需要 new 关键字。如果基类定义了方法、字段或属性，则 new 关键字用于在派生类上创建该方法、字段或属性的新定义。new 关键字放在被替换的类成员的返回类型之前。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T03:27:40.350

通常，如果一个基类型打算重写一个方法，它将被标记为虚拟的。在这种情况下，子类型只是用覆盖标记方法。

如果基类型没有，而子类型定义了相同的方法，则存在歧义。C# 编译器要求您通过用 new 标记子类型方法来确认您想要这个 - 实际上是说“是的，我知道并且我想隐藏基类型提供的方法”