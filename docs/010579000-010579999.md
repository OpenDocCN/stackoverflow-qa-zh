# StackOverflow 问答 10579000-10579999

# iphone - 如何从加速度计计算正确的速度值

> ID：10579004
> 
> 赞同：3
> 
> 时间：2012-05-14T07:19:13.343
> 
> 标签：iphone, ios, core-motion, acceleration

我需要计算 iphone 在太空中的速度，例如打孔速度。
我的第一个问题是：`accelerometer:didAccelerate`此过滤操作的加速度值是否：

```
gravity_x = acceleration.x * kFilteringFactor + gravity_x * (1.0 - kFilteringFactor);
gravity_y = acceleration.y * kFilteringFactor + gravity_y * (1.0 - kFilteringFactor);
gravity_z = acceleration.z * kFilteringFactor + gravity_z * (1.0 - kFilteringFactor);
float gravityNorm = sqrt(gravity_x * gravity_x + gravity_y * gravity_y + gravity_z * gravity_z);
accelX = acceleration.x - gravity_x / gravityNorm;
accelY = acceleration.y - gravity_y / gravityNorm;
accelZ = acceleration.z - gravity_z / gravityNorm; 
```

与使用 CoreMotion 的一样
`motionManager.deviceMotion.userAcceleration.x; motionManager.deviceMotion.userAcceleration.y; motionManager.deviceMotion.userAcceleration.z;`吗？

接下来，根据相同的问题，我执行以下操作

```
 const float accuracy=10;
    float accx = (float) ((int)  (accelX * accuracy))/ accuracy;
    float accy=  (float) ((int)  (accelY * accuracy))/ accuracy;
    float accz=  (float) ((int)  (accelZ * accuracy))/ accuracy; 
```

对于舍入值，然后，我认为，我获得当前速度

```
float dx = accx*9.81+prevX*9.81;
float dy = accy*9.81+prevY*9.81;
float dz = accz*9.81+prevZ*9.81;

speed_after_x = dx/2*myAccelerometer.updateInterval+speed_before_x;
speed_after_y = dy/2*myAccelerometer.updateInterval+speed_before_y;
speed_after_z = dz/2*myAccelerometer.updateInterval+speed_before_z; 
```

然后根据[iphone加速度计速度和距离](https://stackoverflow.com/questions/3177199/iphone-accelerometer-speed-and-distance)

```
 prevX=accx;
    prevY=accy;
    prevZ=accz;

    speed_before_x=speed_after_x;
    speed_before_y=speed_after_y;
    speed_before_z=speed_after_z; 
```

最后将速度计算为向量的长度

```
 float speed = sqrt(speed_after_x*speed_after_x+speed_after_y*speed_after_y+speed_after_z*speed_after_z);
    if (max_speed<speed)  max_speed = speed; 
```

但是标签中包含的速度值总是在增加。我的意思是如果我移动设备然后停止，速度值不会变为 0。加速度不会在 0 处自我补偿吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-14T10:07:26.410

这是我设法散列的示例代码。我暂时把它放在这里：

```
//
//  ViewController.m
//  Acce
//
//  Created by Diziet on 14/05/2012.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "ViewController.h"

@interface ViewController () {
    UIAccelerationValue gravX;
    UIAccelerationValue gravY;
    UIAccelerationValue gravZ;
    UIAccelerationValue prevVelocity;
    UIAccelerationValue prevAcce;
}

@property (strong) UIAccelerometer *sharedAcc;

@end

@implementation ViewController

@synthesize sharedAcc = _sharedAcc;

#define kAccelerometerFrequency        50.0 //Hz
#define kFilteringFactor 0.1

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.sharedAcc = [UIAccelerometer sharedAccelerometer];
    self.sharedAcc.delegate = self;
    self.sharedAcc.updateInterval = 1 / kAccelerometerFrequency; 

    gravX = gravY = gravZ = prevVelocity = prevAcce = 0.f;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (UIAccelerationValue)tendToZero:(UIAccelerationValue)value {
    if (value < 0) {
        return ceil(value);
    } else {
        return floor(value);
    }
}

#define kAccelerometerFrequency        50.0 //Hz
#define kFilteringFactor 0.1
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    gravX = (acceleration.x * kFilteringFactor) + (gravX * (1.0 - kFilteringFactor));
    gravY = (acceleration.y * kFilteringFactor) + (gravY * (1.0 - kFilteringFactor));
    gravZ = (acceleration.z * kFilteringFactor) + (gravZ * (1.0 - kFilteringFactor));

    UIAccelerationValue accelX = acceleration.x - ( (acceleration.x * kFilteringFactor) + (gravX * (1.0 - kFilteringFactor)) );

    UIAccelerationValue accelY = acceleration.y - ( (acceleration.y * kFilteringFactor) + (gravY * (1.0 - kFilteringFactor)) );
    UIAccelerationValue accelZ = acceleration.z - ( (acceleration.z * kFilteringFactor) + (gravZ * (1.0 - kFilteringFactor)) );
    accelX *= 9.81f;
    accelY *= 9.81f;
    accelZ *= 9.81f;
    accelX = [self tendToZero:accelX];
    accelY = [self tendToZero:accelY];
    accelZ = [self tendToZero:accelZ];

    UIAccelerationValue vector = sqrt(pow(accelX,2)+pow(accelY,2)+pow(accelZ, 2));
    UIAccelerationValue acce = vector - prevVelocity;
    UIAccelerationValue velocity = (((acce - prevAcce)/2) * (1/kAccelerometerFrequency)) + prevVelocity;

    NSLog(@"X %g Y %g Z %g, Vector %g, Velocity %g",accelX,accelY,accelZ,vector,velocity);

    prevAcce = acce;
    prevVelocity = velocity;
}

@end 
```

它需要根据您的需要进行修改，特别是因为我只是在之后丢弃这些值。记录为“速度”的结果值“速度”在加速事件停止后趋向于极小的负值，例如 *10^-17。所以，是的，这在我的书中几乎为零。你会想在那里做一些四舍五入，甚至可能扩大值。我认为我不能让它高于 0.2 或 0.3，但我又不想把手机扔到房间的另一边（还）。

# solr - 在 Solr 中显示部分可搜索文本

> ID：10579006
> 
> 赞同：0
> 
> 时间：2012-05-14T07:19:22.673
> 
> 标签：solr, indexing

我索引了非常大的文档，在某些情况下，这些文档有 100.000 个字符。当我查询“Solr”时，有没有办法返回部分文档（比如说前 300 个字符）？是否有任何属性可以在 schema.xml 或 solrconfig.xml 中设置来实现这一点？我尝试了很多东西，但没有任何效果。

先感谢您，

汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:29:08.547

如果要预览，则需要使用 a`copyField`并指定`maxChars`：

```
<copyField source="searchedField" dest="previewField" maxChars="300" /> 
```

然后显示`previewField`而不是显示`searchedField`在您的结果中。

我假设您**不**希望正常的搜索突出显示。[如果这样做，只需使用此答案](https://stackoverflow.com/a/10306407/320220)中概述的内置[突出显示参数](http://wiki.apache.org/solr/HighlightingParameters)即可。`hl.fragsize`

# javascript - 为什么承诺中的“失败”不会捕获错误？

> ID：10579007
> 
> 赞同：1
> 
> 时间：2012-05-14T07:19:25.670
> 
> 标签：javascript, windows-runtime, promise, winjs

我正在尝试访问一个可能不存在的文件：

```
var localFolder = Windows.Storage.ApplicationData.current.localFolder;

localFolder.getFileAsync(stateFile).then(function (file) {
            Windows.Storage.FileIO.readTextAsync(file).then(function (text) {
        // do something with the text

    });
}, function (err) {
    // log error, load dummy data

}); 
```

如果文件不存在，则确实会调用“失败”方法，但仅在我的应用程序停止并出现异常“找不到文件”后才会发生这种情况。只有当我为调试器按“继续”时，它才会继续执行“失败”方法..

我究竟做错了什么？我应该事先检查是否存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:09:56.773

您看到的是第一次机会例外。调试器在抛出点中断。如果您点击调试器对话框上的“继续”按钮，应用程序将继续运行并且异常处理程序将运行。

您可以通过使用“调试|异常”菜单关闭首次机会异常来更改此设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:25:57.673

为同样的问题苦苦挣扎了两三天，终于得出以下解决方案：我使用 getFilesAsync 函数获取文件夹中所有文件的列表，然后查看该列表以了解所需文件是否存在。之后，我可以调用 getFileAsyncs 而不抛出。不是很漂亮，但对我有用。我同意假设开发人员可以关闭异常并不是最好的建议……在我看来，这个问题应该被视为 RT 实现中的错误。

# jquery - Ajax 响应问题（Access-Control-Allow-Origin。）

> ID：10579017
> 
> 赞同：1
> 
> 时间：2012-05-14T07:20:42.393
> 
> 标签：jquery, ajax

在我的页面中，我有一个按钮，当单击该按钮时，它有一个 ajax 调用。代码如下

```
 $(document).ready(function() {
     $('#one').click(function() {

    $("#one").load(
    "http://www.ggookkll.com/pinIt/?frm_firstName=" +encodeURIComponent('frm_firstName'));
 }); }); 
```

但我的请求已成功收到，但我没有得到任何回应。

错误是

```
 Origin http://127.0.0.1 is not allowed by Access-Control-Allow-Origin. 
```

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:44:35.397

上面的答案并不完全准确。**jQuery**不能发出跨域 AJAX 请求。

其他库可以，例如[Frame.js](https://github.com/bishopZ/Frame.js)等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:22:35.683

您不能*发出跨域 ajax 请求。

使用代理服务器来处理这个。或者

使用这个库来处理 [http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)

# javascript - 如何将一个变量中的一些json数组拆分为不同的变量？(Javascript)

> ID：10579018
> 
> 赞同：0
> 
> 时间：2012-05-14T07:20:48.543
> 
> 标签：javascript, arrays, json, split

我对 JSON 感到困惑。

我从 php 得到了这个 JSON 数据（已经解析）；

```
 var json =
    {"id":"1", "name":"AAA", "sex":"m", "age":"20", "region":"X"}
    {"id":"2", "name":"BBB", "sex":"m", "age":"25", "region":"Y"}
    {"id":"3", "name":"CCC", "sex":"f", "age":"30", "region":"Z"}
    {"id":"4", "name":"DDD", "sex":"m", "age":"35", "region":"Q"} 
```

这些是一个变量中的分隔数组。

我想让它们变成这样

```
 var json1 = {"id":"1", "name":"AAA", "sex":"m", "age":"20", "region":"X"}
    var json2 = {"id":"2", "name":"BBB", "sex":"m", "age":"25", "region":"Y"}
    var json3 = {"id":"3", "name":"CCC", "sex":"f", "age":"30", "region":"Z"}
    var json4 = {"id":"4", "name":"DDD", "sex":"m", "age":"35", "region":"Q"} 
```

* * *

我目前正在使用 PHP 开发 Titanium 移动（iOS）。和 PHP 发送这样的 JSON 数据；

```
 foreach($responses as $response)
    {
        echo encode_json($response);
    } 
```

※$responses 是 sql 命令的结果。

现在 Titanium 端，Titanium 文件将接收并解析它。

```
 Req.onload = function()
    {
        var json = JSON.stringify(this.responseText);
        var response = JSON.parse(json);
        Ti.API.info(response);
    } 
```

Ti.API.info 在控制台上说；

```
 [INFO] {"id":"1", "name":"AAA", "sex":"m", "age":"20", "region":"X"}{"id":"2", "name":"BBB", "sex":"m", "age":"25", "region":"Y"}{"id":"3", "name":"CCC", "sex":"f", "age":"30", "region":"Z"}{"id":"4", "name":"DDD", "sex":"m", "age":"35", "region":"Q"}
    //as I wrote it above 
```

对于那些来看 JS 问题但 Titanium 的人，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:39:47.720

Do you mean something like this?:

```
var json =
    {"id":"1", "name":"AAA", "sex":"m", "age":"20", "region":"X"}
    {"id":"2", "name":"BBB", "sex":"m", "age":"25", "region":"Y"}
    {"id":"3", "name":"CCC", "sex":"f", "age":"30", "region":"Z"}
    {"id":"4", "name":"DDD", "sex":"m", "age":"35", "region":"Q"}

var json1 = json[0];
var json2 = json[1];
var json3 = json[2];
var json4 = json[3]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T07:40:43.133

If your first json is actually an array like this :

```
var json = [
    {"id":"1", "name":"AAA", "sex":"m", "age":"20", "region":"X"},
    {"id":"2", "name":"BBB", "sex":"m", "age":"25", "region":"Y"},
    {"id":"3", "name":"CCC", "sex":"f", "age":"30", "region":"Z"},
    {"id":"4", "name":"DDD", "sex":"m", "age":"35", "region":"Q"}
]; 
```

Then you could split the array into individual variables like this :

```
for(var i=0,l=json.length;i<l;i++)
    window['json' + (i+1)] = json[i]; 
```

Note that declaring a variable in the global scope (like `var foo = 'bar'`) can be done by attaching that name to the window object (`window['foo'] = 'bar';`);

# javascript - 单选按钮上的 onchange 在 IE8 中无法正常工作

> ID：10579019
> 
> 赞同：23
> 
> 时间：2012-05-14T07:20:53.267
> 
> 标签：javascript, html, internet-explorer, radio-button

我被迫使用 IE8 (8.0.7601.17514)，我有这个简单的页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
<form action=".">
    <input type="radio" name="rad" value="1" onchange="alert(1);"/>
    <input type="radio" name="rad" value="0" onchange="alert(0);" checked="checked"/>
</form>
<a href="http://google.com">some dummy link</a>
</body>
</html> 
```

我期望的是，当第二个单选按钮被选中时，单击第一个单选按钮将立即引发警报。这在 FF 中运行良好。

实际发生的是，当我单击第一个收音机时，什么也没有发生。然后，当元素模糊时（例如，我单击其他地方，另一个收音机，页面中的某些链接等），然后发出警报。

有解决方法吗？

**编辑：**

显然这种行为完全符合[W3C 规范](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-htmlevents)

> **改变**
> 
> 当控件失去输入焦点并且其值在获得焦点后已被修改时，会发生更改事件。此事件对 INPUT、SELECT 和 TEXTAREA 有效。元素。

（感谢@mu-is-too-short）。

解决方法是添加一个 onclick blur+focus：

```
function radioClick()
{
 this.blur();  
 this.focus();  
}

<input type="radio" name="rad" value="1" onclick="radioClick" onchange="alert(1);"/> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-14T07:31:25.103

在 Internet Explorer（至少 IE8）中，单击单选按钮或复选框以更改其值实际上不会触发 onChange 事件，直到输入失去焦点。

因此，您需要自己以某种方式触发模糊事件。一个建议是要有一个函数：如下：

```
function radioClick()
{
 this.blur();  
 this.focus();  
}

<input type="radio" name="rad" value="1" onclick="radioClick" onchange="alert(1);"/> 
```

现在`onchange`应该触发您的事件，但正如您所见，它是冗余代码，因此您最好只使用`onclick`事件处理程序。

更好的解决方案是使用像 jquery 这样的现代 javascript 库，它可以为您处理所有这些怪癖。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-14T07:32:32.593

从技术上讲，IE 实际上做到了这一点。从[精细规范](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-htmlevents)：

> **改变**
> 
> 当控件失去输入焦点并且其值在获得焦点后已被修改时，会发生更改事件。此事件对 INPUT、SELECT 和 TEXTAREA 有效。元素。

因此，为了触发更改事件，规范规定元素必须失去焦点（即需要模糊）。通常的 kludge 是使用单击处理程序或按照其他人的建议强制模糊。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T07:24:04.057

使用onclick，但即在值（或检查的属性）更改之前调用事件处理程序 [msdn](http://msdn.microsoft.com/en-us/library/ie/ms536913%28v=vs.85%29.aspx)

# java - 如何分析 ant build 输出以进行进一步决策？

> ID：10579020
> 
> 赞同：1
> 
> 时间：2012-05-14T07:20:55.637
> 
> 标签：java, ant

我正在编写一个 ant 构建脚本来为应用程序运行回归测试。我需要按顺序运行测试用例，并且只有在之前的测试运行成功的情况下。有没有办法可以查看构建的输出来决定是否可以调用下一个目标？

```
 [exec] [revBuild] RC = 1
 [exec] -------------------------------------------------
 [exec] Result: 1

BUILD SUCCESSFUL
Total time: 3 minutes 23 seconds 
```

在上面的输出中，被调用的应用程序失败了。有没有办法可以在构建输出中搜索应用程序返回代码，基于该代码可以调用下一个 ant 目标（运行下一个测试用例）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:28:33.573

您可能只想[将 exec 任务](http://ant.apache.org/manual/Tasks/exec.html)`failonerror`的属性设置为 true。如果您这样做并且可执行文件的返回状态代码不是 0，那么构建将失败。

Youi 也可以使用该`resultproperty`属性将此状态代码存储在一个属性中，并仅在设置此属性（或未设置）时执行某些任务。

# c++ - 你能做一个 C++ 泛型函数吗？

> ID：10579022
> 
> 赞同：14
> 
> 时间：2012-05-14T07:21:03.987
> 
> 标签：c++, oop, generics, sorting, object

是否可以创建通用 C++ 函数`foo`？

```
foo(Object bar, Object fred)
{
    //code
} 
```

其中如果两个对象被识别，它们被比较并返回一个比较值，否则返回一些其他值以指示比较是不可能的？

我问在泛化排序类的情况下，在这种情况下你可以使用这个方法，当你派生你想要排序的新对象时，你添加到这个 foo 函数中，一个方法来对新类型的 Object 进行排序。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-14T07:48:11.957

使用模板，定义函数的两个版本，一个参数类型相同，一个参数可以不同：

```
#include <string>
#include <iostream>
using namespace std;

template<typename Type>
void func(Type, Type)
{
    cout << "same" << endl;
}

template<typename TypeA, typename TypeO>
void func(TypeA, TypeO)
{
    cout << "different" << endl;
}

int main()
{
    func(5, 3);                     // same
    func(5, 3.0);                   // different
    func(string("hello"), "hello"); // different
    func(5.0, 3.0);                 // same
    return 0;
} 
```

[输出](http://ideone.com/xxEMa)：

```
same
different
different
same 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-14T07:22:50.720

我认为您急需**[模板](http://en.wikipedia.org/wiki/Template_%28C++%29)**！
您可以编写一个模板函数，然后为上述类型编写一个特化，以便在需要时做一些特定的事情。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-14T07:37:25.520

```
template<class Type1, class Type2>
void foo(Type1 t1, Type2 t2)
{
   // put code here for function
} 
```

称为

```
foo<std::string, int> ("hello", 10); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T07:48:39.577

很可能您需要按照其他人的建议使用模板：

```
template <class T>
return_type func(T const& l, T const& r)
{
   ...
} 
```

因为当泛型函数实现的操作对特定类型没有意义时，您通常希望编译失败，所以您可以使用条件定义（在下面的示例中为 is_arithmetic）：

```
#include <boost/utility/enable_if.hpp>
#include <boost/type_traits/is_arithmetic.hpp>

template <class T>
typename boost::enable_if<boost::is_arithmetic<T>, return_type>::type
func(T const& l, T const& r)
{
    ...
} 
```

或代码中的静态断言以产生相同的结果：

```
#include <boost/type_traits/is_arithmetic.hpp>

template <class T>
return_type func(T const& l, T const& r)
{
    static_assert(boost::is_arithmetic<T>::type::value, "incompatible types");
    ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T08:23:51.753

我要在这里伸出我的脖子说你*不需要*模板来做到这一点。我并不是说不要使用它们，只是这取决于你想要做什么，还有其他选择。

听起来您想要的*是*能够比较两个通用对象，前提是它们遵守一组通用的基本规则。您实际上可以使用传统继承或使用模板来实现这一点。您想要的选择取决于您需要它的灵活性以及您是否希望在运行时或编译时做出某些决定。如果是后者 - 即您想了解投射错误等 - 然后选择模板。

无论哪种方式，您的对象都必须遵守一些基本规则来比较它们，并最好将其封装 - 这样您的比较器将是通用的。或者您必须为每个对象比较编写不同的比较器。虽然听起来后者是你想要的，但要小心不要让太多的类实现渗入比较器函数，从而破坏封装。

根据我自己的经验，直接使用模板方法有时会导致大量臃肿、混乱的代码，难以阅读、调试和维护。首先仔细看看你的设计和你真正需要的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T09:16:08.643

OP 似乎想知道这两个对象是否具有可比性。您可以使用模板专业化来实现这一点（注意：这不能在 VC 10 上编译，但在 g++ 4.7 上可以）。唯一的细微差别是您希望此功能

> 它们被比较并返回一个比较值，否则返回一些其他值以指示无法进行比较

但是您需要定义某种结构来表示无法进行比较；使用幻数“-500”或任何不好的风格。或者，您可以抛出一个错误，并允许它被捕获并处理。

```
struct NoCompare{};

template <typename U1, typename U2>
static auto compare2(const U1 & u1, const U2 & u2) -> decltype(u1 == u2)
{ 
    cout << "Comparable" << endl;
    return u1 == u2;
}

static int compare2(...) 
{ 
    // Comparison not supported - return whatever value you want. (change the return type as appropriate)
    cout << "Not comparable" << endl;
    return -500;
}

int main()
{
    int a = 5, b = 3, c = 3;
    NoCompare dns;
    cout << compare2(a, b) << endl;
    cout << compare2(dns, b) << endl;
    cout << compare2(c, b) << endl;

    return 0;
} 
```

输出：C:\MinGW\MinGW>a 可比较 0 不可比较 -500 可比较 1

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-07T06:34:47.263

您似乎指的是 Common Lisp / CLOS 样式的通用函数，它们执行多个动态调度。C++ 使用方法进行单次动态调度，但仅使用函数进行单次静态调度。所以答案是否定的。C++ 目前不支持这个。多年来一直有人提议将其添加到语言中，但尚未发生。

# .net - 在 WinRT 中的 UI 线程上运行代码

> ID：10579027
> 
> 赞同：67
> 
> 时间：2012-05-14T07:21:27.017
> 
> 标签：.net, multithreading, windows-8, windows-runtime, dispatcher

如何在 WinRT (Windows 8 Metro) 的 UI 线程上运行代码？

该`Invoke`方法不存在。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-06-26T08:32:33.343

从非UI线程直接获取**CoreWindow**更容易。以下代码在任何地方都可以使用，即使在`GetForCurrentThread()`or`Window.Current`返回*null*时也是如此。

```
CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync(CoreDispatcherPriority.Normal,
    <lambda for your code which should run on the UI thread>); 
```

例如：

```
CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync(CoreDispatcherPriority.Normal,
    () =>
    {
        // Your UI update code goes here!
    }); 
```

您需要引用`Windows.ApplicationModel.Core`命名空间：

```
using Windows.ApplicationModel.Core; 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-05-15T05:02:53.663

利用：

从您的 UI 线程，执行：

```
var dispatcher = Windows.UI.Core.CoreWindow.GetForCurrentThread().Dispatcher; 
```

从您的背景（非 UI 线程）

```
dispatcher.RunAsync(DispatcherPriority.Normal, 
    <lambda for your code which should run on the UI thread>); 
```

这应该适用于 CP 和更高版本的构建。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-14T07:32:38.667

利用：

```
this.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => Frame.Navigate(typeof(Welcome), this)); 
```

这个对我有用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-12T04:18:33.783

在我看来，这是一种更简单的方法。

获取与 UI 关联的 TaskScheduler。

```
 var UISyncContext = TaskScheduler.FromCurrentSynchronizationContext(); 
```

然后在上面的 UISyncContext 上启动一个新的 Task。

```
 Task.Factory.StartNew(() => { /* Do your UI stuff here; */}, new System.Threading.CancellationToken(), TaskCreationOptions.PreferFairness, UISyncContext); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-24T13:49:36.120

在 UWP 上，我在尝试设置 CaptureElement 控件的 Source 属性（在 XAML 中定义）时遇到问题，它抱怨在不同的线程准备，即使我试图从通过 Page_Loaded 调用的代码中设置它事件处理程序。我最终使用它来解决它：

```
previewControl.Dispatcher.TryRunAsync(CoreDispatcherPriority.Normal, () => {
   previewControl.Source = _mediaCapture;
}).GetAwaiter().GetResult(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-28T17:39:14.390

[DispatcherTimer](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.dispatchertimer.aspx?f=255&MSPPError=-2147217396)也是一个选项。

我将它用于必须在 Xaml 设计器中运行的代码（CoreWindow.Dispatcher，...在 UWP 设计器中不可用）

```
var localTimer = new DispatcherTimer
{
    Interval = TimeSpan.FromMilliseconds(0)
};
localTimer.Tick += (timer, e) =>
{
    (timer as DispatcherTimer).Stop();
    action();
};
localTimer.Start(); 
```

免责声明：
我应该注意，如果其他所有方法都失败了，这应该是最后的选择。

# jquery - 已完成的 jquery 库中的淡入淡出功能

> ID：10579028
> 
> 赞同：1
> 
> 时间：2012-05-14T07:21:29.083
> 
> 标签：jquery, fade

我如何在这段代码中获得淡入淡出效果？当我点击拇指时，应该淡出“大”图片！

这是画廊演示[http://workshop.rs/demo/gallery-in-4-lines/](http://workshop.rs/demo/gallery-in-4-lines/)

```
<div class="box">
        <div id="panel"><img id="largeImage" src="pic/image_08_large.jpg" /> </div>
        <div class="text"> Die Idee und das Konzept</div>
        <div id="thumbs">
        <img src="pic/image_08_thumb.jpg" alt="1st image description" />
        <img src="pic/image_09_thumb.jpg" alt="2nd image description" />
        <img src="pic/image_10_thumb.jpg" alt="3rd image description" />

        </div> 
```

Javascript

```
<script>

$('#thumbs').delegate('img','click', function(){
$('#largeImage').attr('src',$(this).attr('src').replace('thumb','large'));
$('#description').html($(this).attr('alt'));
});

</script> 
```

CSS：

```
#thumbs { padding-top: 10px; overflow: hidden; }
#thumbs img, #largeImage { border: 1px solid gray; padding: 4px; 
background-color:white; cursor: pointer; }
#thumbs img { float: left; margin-left:60px;  margin-top:10px; }
#description { background: black; color: white; position: absolute; bottom: 0;   
padding: 10px 20px; width: 525px; margin: 5px; }
#panel { position: relative; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:33:22.927

你试试这个

```
$('#largeImage').attr('src',$(this).attr('src').replace('thumb','large'))
.hide().fadeIn('slow'); 
```

我没有尝试过，但我认为这可能有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:23:52.180

使用您的代码，您无法达到预期的效果。所以你需要：

*   （...获得所需的 efx :) 在“面板”内放置 2 个图像（您可以*克隆*单击的一个！）
*   **比你需要的**1：将*克隆*放置到位（最初需要隐藏）
*   2：淡化*旧*图像
*   3：淡入淡出*克隆*（新）图像，如：

## *[jsBin 演示示例](http://jsbin.com/ijedax/edit#javascript,html,live)*

```
$('.thumbs').on('click','img', function(){
        var $thisPanel = $(this).parents('.gallery').find('.panel');
        var clone = $(this).clone().hide();
        clone.appendTo($thisPanel);
        $thisPanel.find('img').eq(0).fadeTo(600,0,function(){
           $(this).remove();
        });
        clone.fadeTo(600,1);  
        $('.description').html($(this).attr('alt'));
}); 
```

不要将**ID**用于页面上的多个元素，而应使用**class**。（见演示）：

```
<div class="gallery">
    <div class="panel">
        <img src="http://placehold.it/565x300/cf5" />
        <div class="description">First image description</div>
    </div>

    <div class="thumbs">
        <img src="http://placehold.it/565x300/cf5" alt="1st image description" />
        <img src="http://placehold.it/565x300/f0f" alt="2nd image description" />
        <img src="http://placehold.it/565x300/444" alt="3rd image description" />
    </div>
</div> 
```

和CSS：

```
 .thumbs { padding-top: 10px; overflow: hidden;}
    .thumbs img, .panel img {
     border: 1px solid gray;
     padding: 4px;
     background-color: white;
     cursor: pointer;
    }
  .panel img{
    position:absolute;
  }
    .thumbs img {
     float: left;
     margin-right: 3px;
    width:100px;
    }
    .description {
     background: black;
     color: white;
     position: absolute;
     z-index:2;
     bottom: 0;
     padding: 10px 20px;
     width: 525px;
     margin: 5px;
    }
  .panel { position: relative; height:310px; } 
```

# java - 使用 Sqlite 数据库在 Android 中生成 Excel 报告

> ID：10579032
> 
> 赞同：0
> 
> 时间：2012-05-14T07:21:41.043
> 
> 标签：java, android, eclipse, sqlite

我对 Android 有了新的认识。我制作了一份报告，使用`ListView`它分为三列，名为`DateTime`, `OnOffStatus`, `AlarmImage`。

它工作正常并且看起来足够好，但现在我想将此表数据导出为 Excel 格式。是否可能以及如何？

在此先感谢 Om Parkash Kaushik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:03:24.113

首先查看[http://poi.apache.org/](http://poi.apache.org/)和[http://poi.apache.org/spreadsheet/index.html](http://poi.apache.org/spreadsheet/index.html) 我将这个库用于我所有的 Excel 报告。

**首先创建一个工作簿：**

```
HSSFWorkbook workbook = new HSSFWorkbook();
Map<String, CellStyle> styles = createStyles(workbook);
HSSFSheet sheet = workbook.createSheet(); 
```

**设置一些样式：**

```
private static Map<String, CellStyle> createStyles(Workbook wb) {

Map<String, CellStyle> styles = new HashMap<String, CellStyle>();
CellStyle style;
Font monthFont = wb.createFont();
monthFont.setFontHeightInPoints((short) 11);
monthFont.setColor(IndexedColors.WHITE.getIndex());
style = wb.createCellStyle();
style.setAlignment(CellStyle.ALIGN_CENTER);
style.setVerticalAlignment(CellStyle.VERTICAL_CENTER);
style.setFillForegroundColor(IndexedColors.GREY_50_PERCENT.getIndex());
style.setFillPattern(CellStyle.SOLID_FOREGROUND);
style.setFont(monthFont);
style.setWrapText(true);

styles.put("header", style);
style = wb.createCellStyle();
style.setAlignment(CellStyle.ALIGN_CENTER);
style.setWrapText(true);
style.setBorderRight(CellStyle.BORDER_NONE);
style.setBorderLeft(CellStyle.BORDER_NONE);
style.setBorderTop(CellStyle.BORDER_NONE);
style.setBorderBottom(CellStyle.BORDER_NONE);
styles.put("cell", style);
    return styles;
} 
```

**然后设置标题行：**

```
private static final String[] article_headers = {"header1", "header2"};

// Header row
Row headerRow = sheet.createRow(0);
headerRow.setHeightInPoints(40);
Cell headerCell;

for (int i = 0; i < article_headers.length; i++) {
    headerCell = headerRow.createCell(i);
    headerCell.setCellValue(article_headers[i]);
    headerCell.setCellStyle(styles.get("header"));
} 
```

然后通过设置它们的样式和值来继续这些行。

希望这会有所帮助，如果您觉得这有帮助，请记住接受。

// 雅各布

# java - 从哪里开始？（移动开发）

> ID：10579034
> 
> 赞同：-1
> 
> 时间：2012-05-14T07:21:53.633
> 
> 标签：java, android, c++, python

我现在正计划沉迷于编码。我的最终目标是学习 Java、C++ 和 Objective-C 等 OOP 语言。因为我想进入移动开发。你认为我应该从哪里开始？我读过很少的地方，而且我的朋友也建议我从 Python 开始，因为 Python 是人类可读的，而不像 C++ 或 Java 那样不堪重负。我应该从 python 开始还是应该学习 C 类？任何帮助将不胜感激。提前致谢。

问候，达里尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:26:35.620

最好的起点是[android 开发者网站](http://developer.android.com/index.html)。

一个很好的视频教程是由[thenewboston 提供](http://thenewboston.org/list.php?cat=6)的。

# tridion - 如何在 XSLT TBB 中获取组件的名称、版本、tcm id

> ID：10579037
> 
> 赞同：4
> 
> 时间：2012-05-14T07:22:14.623
> 
> 标签：tridion, tridion-2011

我正在使用 XSLT 中介器在 SDL Tridion 2011 SP1 中处理 XSLT 模板构建块。

我只是想知道，如何在渲染时获取组件的名称、版本及其 TCMID。

任何人都可以帮助它如何完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T09:26:36.250

清楚地观察模板生成器中的输出后，我得到了答案

```
<xsl:element name="TCMID">
  <xsl:value-of select="tcm:Component/@ID"/>
</xsl:element>
<xsl:element name="name">
  <xsl:value-of select="tcm:Component/tcm:Data/tcm:Title"/>
</xsl:element>
<xsl:element name="Version">
  <xsl:value-of select="tcm:Component/tcm:Info/tcm:VersionInfo/tcm:Version"/>
</xsl:element> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T08:23:14.333

可能不是您问题的完整答案，但 Package Items 应该可用作模板的参数。因此，如果您需要访问不在组件 XML 中的值，您可以在运行 XSLT TBB 之前将其添加到包中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T16:21:48.310

访问组件的非字段值困扰着许多开发人员。这并不奇怪，因为没有明显的方法可以从 UI 中查看组件的完整 XML。CME（SDL Tridion CM 用户界面）中的源选项卡仅显示 XML 中内容节点的 XML，不显示完整的 XML。

为了查看完整的 XML（无需通过 API 加载），您有多种选择。从最简单的开始，包括：

1.  使用 XSLT 写出组件的根节点，使用类似`<xsl:copy-of select="."/>`. 这会将整个组件 XML 写入模板输出，然后您可以在编写 XSLT 时将其保存以供参考。
2.  使用 CMS 服务器上的协议处理程序访问组件 XML，方法是在 Internet Explorer 中键入 URI，它应该显示完整的 XML。
3.  安装[SDL Tridion PowerTools](http://code.google.com/p/tridion-2011-power-tools/)，它会在显示 XML 的项目视图上安装一个选项卡。

一旦可以访问 XML，查找任何 Tridion 对象的任何属性就变得非常直观。

# java - SAXException2：在对象图中检测到循环。这是什么情况？

> ID：10579039
> 
> 赞同：6
> 
> 时间：2012-05-14T07:22:27.670
> 
> 标签：java, web-services, sax

我有一个带有 Java 类文件的 Web 服务，这些文件是基于我拥有的数据库模式使用 NetBeans 生成的。

我有时会遇到奇怪的异常，其中之一就是：

```
javax.xml.ws.WebServiceException: javax.xml.bind.MarshalException
 - with linked exception:
[com.sun.istack.internal.SAXException2: A cycle is detected in the object graph. This will cause infinitely deep XML: org.mylib.Person[ personId=1 ] ->org.mylib.TeamPerson[ teamPersonPK=org.mylib.teamPersonPK[ teamId=1, personId=1 ] ] -> org.mylib.Person[ personId=1 ]] 
```

我用谷歌搜索了这个异常并发现了一些类似的情况，但我仍然无法理解这个问题。我刚刚使用 NetBeans 生成了这些类（Person.java、Team.java、TeamPerson.java），那么问题是如何发生的呢？

当我尝试获取所有人时会发生这种情况：

```
Iterator iter = team.getTeamPersonCollection().iterator();
while(iter.hasNext()) {
            Person person = ((TeamPerson)iter.next()).getPerson();
...
} 
```

**编辑**
如果我从 TeamPerson 中删除 Team 引用，则会收到以下错误：

```
Internal Exception: Exception [EclipseLink-7154] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The attribute [teamPersonCollection] in entity class [class org.mylib.Team] has a mappedBy value of [team] which does not exist in its owning entity class [org.mylib.TeamPerson]. If the owning entity class is a @MappedSuperclass, this is invalid, and your attribute should reference the correct subclass.
    at org.eclipse.persistence.exceptions.PersistenceUnitLoadingException.exceptionSearchingForPersistenceResources(PersistenceUnitLoadingException.java:126) 
```

**编辑 2**
部分生成的类如下所示：

团队.java

```
public class Team implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "team_id")
    private Integer teamId;
    @Column(name = "type")
    private String type;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "team")
    private Collection<TeamPerson> teamPersonCollection; 
```

人.java

```
public class Person implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "person_id")
    private Integer personId;
    @Column(name = "name")
    private String name;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "person")
    private Collection<TeamPerson> teamPersonCollection; 
```

TeamPerson.java

```
public class TeamPerson implements Serializable {
    private static final long serialVersionUID = 1L;
    @EmbeddedId
    protected TeamPersonPK teamPersonPK;
    @Basic(optional = false)
    @Column(name = "timestamp")
    @Temporal(TemporalType.TIMESTAMP)
    private Date timestamp;
    @JoinColumn(name = "team_id", referencedColumnName = "team_id", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private Team team;
    @JoinColumn(name = "person_id", referencedColumnName = "person_id", insertable = false, updatable = false)
    @ManyToOne(optional = false)
    private Person person; 
```

TeamPersonPK.java

```
@Embeddable
public class TeamPersonPK implements Serializable {
    @Basic(optional = false)
    @Column(name = "team_id")
    private int teamId;
    @Basic(optional = false)
    @Column(name = "person_id")
    private int personId; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T21:14:54.240

解决方案是简单地在导致循环的属性的 getter 处添加注释：“ `@XmlTransient`”（ ）。`javax.xml.bind.annotation.XmlTransient`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:22:09.247

好吧，也许那是因为您的`Person`类包含 type 的字段`TeamPerson`并且`TeamPerson`包含 type 的字段`Person`。并且编组器在解析这样的循环初始化时感到困惑？

UPD。也许你需要改变这个

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "team")
    private Collection<TeamPerson> teamPersonCollection; 
```

至：

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "teamId")
    private Collection<TeamPerson> teamPersonCollection; 
```

因为`team`类中不存在字段`TeamPerson`？

# email - 是否可以通过共享合同向特定收件人发送电子邮件？

> ID：10579040
> 
> 赞同：1
> 
> 时间：2012-05-14T07:22:27.947
> 
> 标签：email, share, windows-8, windows-runtime

我正在尝试从 Metro 应用程序（js 或 c#，没关系）发送电子邮件共享合同是要走的路吗？据我所知，您无法通过 Share 合同指定电子邮件的收件人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:10:36.277

这是对的。共享合约也可用于其他应用程序，例如 Tweetro，它们不使用电子邮件地址，因此用户必须手动输入电子邮件地址。一个mailto Uri不起作用，它必须是一个有效的Uri，否则不会显示。请参阅[http://msdn.microsoft.com/en-US/library/windows/apps/hh465261](http://msdn.microsoft.com/en-US/library/windows/apps/hh465261)，了解可以设置为通过超级按钮共享的所有选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:45:11.650

你是对的。不可能。您可以尝试构建一个 mailto Uri 并启动它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-20T07:32:50.640

Use the [EmailManager.ShowComposeNewEmailAsync](https://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.applicationmodel.email.emailmanager.showcomposenewemailasync.aspx) API if you're on Windows 10\. It uses the mailto: protocol underneath.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-31T17:09:05.263

您**可以**使用 Uri 方案打开应用程序，但您需要使用 LaunchUriAsync。此外，通过 LauncherOptions 设置，如果用户没有安装应用程序，Windows 会将他们带到应用商店。

例如，这是我的方法，它只将邮件应用程序打开到屏幕的一侧（我用它来报告错误），或者如果他们安装了 Outlook，它将使用它：

```
private async Task<bool> ReportErrorMessage(string detailedErrorMessage)
{
    var uri = new Uri(string.Format("mailto:email.address@domain.com?subject=Error Report&body={0}", detailedErrorMessage), UriKind.Absolute);

    var options = new Windows.System.LauncherOptions
    {
        DisplayApplicationPicker = true,
        DesiredRemainingView = Windows.UI.ViewManagement.ViewSizePreference.UseLess,
        PreferredApplicationPackageFamilyName = "microsoft.windowscommunicationsapps_8wekyb3d8bbwe",
        PreferredApplicationDisplayName = "Mail"
    };

    return await Windows.System.Launcher.LaunchUriAsync(uri, options);
} 
```

在电子邮件 uri 的情况下，应用程序已经安装，因此它应该对每个用户同样有效。此外，如果您知道 FamilyPackageName，则可以设置要使用的首选应用程序。

[在此处查找有关使用 uri 启动器的更多信息。](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779672.aspx)

# graphviz - graphviz：使用相同的标签创建新节点

> ID：10579041
> 
> 赞同：27
> 
> 时间：2012-05-14T07:22:33.707
> 
> 标签：graphviz

我开始使用graphviz，但在创建具有相同标签的新节点时遇到问题。例如对于单词“句子”，我想创建具有 8 个节点的图形： s -> e -> n -> t -> e -> n -> c -> e 现在我收到的图形只有 5 个节点（一个“e”而不是 3，一个“n”而不是 2)。我需要创建更多具有相同标签（值）的节点。

我的问题示例可能是这张图片[http://rdftwig.sourceforge.net/paper/diagrams/bfsdeep.png](http://rdftwig.sourceforge.net/paper/diagrams/bfsdeep.png)，其中有 2 个节点的值为“C”、“E”和“D”。

可能吗？如果可能的话，我如何在我的示例中使用单词“sentence”第一个、第二个或第三个“e”节点访问？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-14T07:31:28.210

您可以明确定义节点并为它们设置标签。然后每个节点都有一个唯一的 id，但可以有相同的标签。考虑这个例子：

```
strict graph G {
    1 [label="A"];
    2 [label="B"];
    3 [label="B"];
    4 [label="A"];
    1 -- 2;
    2 -- 3;
    3 -- 4;
} 
```

这将输出（带`dot`）：

![具有相同标签的节点](../Images/b8d829fc8826487902ddcc3668e70f97.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-20T12:59:39.337

这可能听起来很连贯，但只需在重复的字符末尾放置一个空格即可解决问题。

# ios - 如何在 Master-Detail 应用程序中加载完全不同的 ViewController？

> ID：10579042
> 
> 赞同：0
> 
> 时间：2012-05-14T07:22:34.567
> 
> 标签：ios, xcode, ipad, ios5

我有一个 Master-Detail 应用程序，我想在单击 Master 中的行时加载一个新视图。如果我选择第 1 行，则视图不同，并且在选择不同的行时，新视图将显示在详细信息部分。我怎样才能做到这一点？

我正在做这样的事情。问题是 - 如果我第一次选择这 2 行中的任何一行，视图实际上会发生变化。但是当我再次单击另一行时，它并没有改变。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

if(indexPath.row==0){

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil]; 

    TwitterTweetViewController *detailView=(TwitterTweetViewController *)[storyboard instantiateViewControllerWithIdentifier:@"TwitterDetailView"];

    self.splitViewController.mainViewController = detailView;
    [self.splitViewController.mainViewController viewDidLoad];
    [self.splitViewController viewDidLoad];

}

if(indexPath.row == 1)
{

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil]; 

    TwitterDetailViewController *detailView=(TwitterDetailViewController *)[storyboard instantiateViewControllerWithIdentifier:@"TwitterDetailView"];

    self.splitViewController.mainViewController = detailView;
    [self.splitViewController.mainViewController viewDidLoad];
    [self.splitViewController viewDidLoad];

} 
```

}

我应该怎么做才能更改选择这些行的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:27:40.737

有一个很棒的方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

用它。在单击单元格后立即调用它。你可以在那里做一些检查。简短的例子：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
  if (indexPath.row == 0) {
    SomeViewController *svc = [[SomeViewController alloc]initWithNibName:@"SomeViewController" bundle:nil];
    [self.navigationController pushViewController:svc];
  } else if (indexPath.row > 0 && indexPath.row < 5) {
    SomeOtherViewController *sovc = [[SomeOtherViewController alloc]initWithNibName:@"SomeOtherViewController" bundle:nil];
    [self.navigationController pushViewController:sovc];
  } else {
    AnotherViewController *avc = [[AnotherViewController alloc]initWithNibName:@"AnotherViewController" bundle:nil];
    [self.navigationController pushViewController:avc];
  }
  //some other code if needed
} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:35:25.397

您可以创建视图控制器的枚举：-

```
enum MyViewControllers
{
viewcontroller1
viewcontroller2
viewcontroller3
} 
```

枚举中的常量将对应于每个 indexPAth 的视图控制器。

然后在 UITableVIew didSelectRowAtIndexPath: 的委托方法中，使用 switch case :-

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath 
    {
    switch(indexPath.row)
{
    case 1:
          Load view1
          break;
    case 2:
          Load view2
          break;
    case 3:
          Load view3
          break;     .
         .
         so on.
    }
} 
```

或者在不同的 NavigationControllers（如 iPad 中）的情况下，您将不得不使用委托和协议传递数据。在 rootViewController 中定义协议，然后在细节中设置其委托（您想要推送视图控制器的位置）

就像是 ：-

```
@protocol SendSelectedINdexDelegate
{
@required
-(void)sendTheIndex:(NSNumber)number.
@end 
```

在界面中

```
id <SendSelectedINdexDelegate> delegateSend 
```

设置它的属性：-

```
@property (nonatomic) id delegateSend; 
```

米

```
@synthesize delegateSend 
```

在 didSelectRowAtIndexPath 中：-

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
[self delegate]sendTheIndex:indexPath.row];

} 
```

在接收控制器符合协议并设置

```
rootview.delegateSend=self; 
```

并实现协议的方法；

```
-(void)sendTheIndex:(NSNumber)number
{
//nsnumber is your index perform operation based on this.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T09:54:42.343

请注意，如果您使用 ARC，它会禁止合成具有未指定所有权属性的属性（在 .m @synthesize delegateSend 中）。

# operating-system - 什么是原生操作系统

> ID：10579046
> 
> 赞同：3
> 
> 时间：2012-05-14T07:22:53.700
> 
> 标签：operating-system, terminology

我在网上搜索过，但找不到任何关于 Native OS 开发的详细想法，我需要详细了解 Native OS 开发，例如。什么是本机操作系统它提供了什么样的功能..等等等等..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T07:26:07.083

“本机操作系统”不是产品。这个短语描述了设备附带的操作系统，以及专门为该操作系统编写的应用程序（与跨平台的 Java 应用程序相反）。

例如，iPhone 的“Native OS”就是 iOS；“Native OS iPhone application” 将用Objective C 编写。另一方面，例如在iPhone 上运行的JavaScript 应用程序不是本地的，因为Javascript 应用程序是通过浏览器而不是直接在OS 上运行的。

另一个例子：在 Windows 机器上，本机操作系统（显然）是 MS Windows。使用 Windows API 的 C++ 应用程序是本机的；Flash 或 TCL/TK 将是非本地的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:27:37.060

如果您更喜欢本机操作系统，您应该指定它到底是什么，例如 Windows、Linux... 等 :)

# windows-phone-7 - WP7：在 C# 中添加支持的文化

> ID：10579051
> 
> 赞同：-2
> 
> 时间：2012-05-14T07:23:12.067
> 
> 标签：windows-phone-7, localization

是否有任何选项可以`<SupportedCultures><SupportedCultures>`在 Windows Phone 中动态添加？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T07:37:00.437

值得注意的是，此元数据由市场读取，因此如果您添加对其他语言环境的支持，您可能*需要重新提交您的应用程序。*

# jsf-2 - 如何限制编辑 PrimeFaces 中可编辑的 DataTable 中的某些单元格

> ID：10579055
> 
> 赞同：4
> 
> 时间：2012-05-14T07:23:40.317
> 
> 标签：jsf-2, primefaces

我想限制 DataTable 中的某些单元格进行编辑。我的意思是不允许编辑这些字段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T11:30:13.917

那就别用`<p:cellEditor>`了。

```
<p:column>#{videoList.referenceFileName}</p:column> 
```

请注意，`<f:facet name="output">`是特定于`<p:cellEditor>`. 您也应该删除它。请注意，`<h:outputText>`如果您不需要在其上使用任何特定属性，则没有必要。

# asp-classic - asp #include 和 asp 的错误控制台？

> ID：10579058
> 
> 赞同：3
> 
> 时间：2012-05-14T07:23:50.830
> 
> 标签：asp-classic

我正在尝试了解 ASP，但`#include`由于某种原因似乎无法正常工作。我正在使用 IIS 7.5（包含在 Win 7 中）。

我有两个 .asp 文件`.../wwwroot/MyWeb/`。我正在尝试`#include FiboRecursive.asp`在一个名为`test.asp`. 如果我删除`#include`. 我已经尝试过虚拟和文件包含。

这是 test.asp：

```
<%@ language="javascript" %>
<html>
<body>
<p>
<% //Response.Write(Request.ServerVariables("http_user_agent"));%>
</p>
<p>
<%
var remoteAddr = Request.ServerVariables("REMOTE_ADDR");
remoteAddr += "";
if ((remoteAddr.length > 5) && (remoteAddr.substr(0,7)=="140.114") ) {
    Response.Write("Hello there Tsingda student!");
    }
    else {
    Response.Write("You're not a Tsingda student!");
    }
%>
</p>

<form action="./FiboRecursive.asp" method="post">
<input type="submit" value="Calculate Fibonacci numbers!" />
</form>

<!--#INCLUDE FILE="fiborecursive.asp" --> 

</body>
</html> 
```

这是 FiboRecursive.asp 中的代码：

```
<%@ language="javascript" %>
<%
Response.Write("Let's calculate some Fibonacci numbers!");
%> 
```

编辑：另一件事：我总是在 Firefox 中使用 Web 开发人员工具（错误控制台）来检查我的代码中的错误，但显然这在做服务器端的事情时效果不佳。有什么方法可以从控制台或类似设备中获得一些关于出了什么问题的提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:37:50.367

You should not have the @ command within your include file as this will (in ISS version 5.1 at least) result in the following error:

```
Error Type:
Active Server Pages, ASP 0141 (0x80004005)
The @ command can only be used once within the Active Server Page. 
```

# android-framework - 安卓应用框架

> ID：10579060
> 
> 赞同：0
> 
> 时间：2012-05-14T07:24:01.723
> 
> 标签：android-framework

我是 android 应用程序开发的新手。我正在寻找构建一个传统的数据库驱动的应用程序，该应用程序将从本地数据存储中存储/检索数据。任何人都可以帮助我开始使用框架或“有人可以指点我执行此操作的示例应用程序吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:31:27.830

访问 Android 应用程序开发的开发者网站。

[Android 开发者网站](http://developer.android.com/index.html)

# jquery - 如何动态创建/删除元素并允许模型绑定启动？

> ID：10579065
> 
> 赞同：3
> 
> 时间：2012-05-14T07:24:25.717
> 
> 标签：jquery, asp.net-mvc-3, razor, model-binding

我过去做过这个，我可能不得不再做一次，但在我做之前，我想把它扔在那里，看看人们如何处理它。

剃刀视图：

```
<ul>
   @Html.EditorFor(model => model.Questions)
</ul> 
```

可以产生：

```
<ul>
   <li><input type="text" id="Questions_0__Title" name="Questions[0].Title" value="hi"/></li>
   <li><input type="text" id="Questions_1__Title" name="Questions[1].Title" value="hi2"/></li>
<ul> 
```

非常简单。

现在，我需要允许用户**添加、编辑或删除**任何这些“问题”。

对于编辑来说，这很容易——不需要工作。但是对于添加/删除，如果我用 jQuery 来做，我需要对生成“id”和“name”属性的方式很聪明（例如，计算有多少，加 1，等等)，对于删除我会“重新渲染”一些元素（例如，如果一个被删除，我需要将所有后续元素的“id”和“name”属性更改为-1）。

所有这一切都是因为它是一种形式，并且需要模型绑定。

这对我来说太麻烦了，所以**在过去**，我使用表单上的任何内容对服务器进行了 AJAX 调用，然后在控制器中添加/删除元素，并呈现部分视图。这样所有元素都“准备好被模型绑定”。我仍然需要一点，但 jQuery，但远不及那么多。

有没有人找到更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:56:37.113

我也不得不处理完全相同的情况。我想出的最简单的解决方案是使用包装模型，类似于：

```
public class QuestionListModel
{
    public IList<QuestionModel> Questions { get; set; }

    public IList<QuestionModel> Template
    {
        get
        {
            return new List<QuestionModel>
                       {
                           new QuestionModel {/* defaults for new question */}
                       };
        }
    }

    public QuestionListModel()
    {
        Questions = new List<QuestionModel>();
    }
} 
```

重要的部分是拥有**Template**属性，它也是`IEnumerable<T>`与您想要的实际模型相同的类型。这样，MVC 将为您完成自动编号。所以使用这个模型，你得到的是你的集合，带有“Questions_0__Title”编号，你还得到一个带有“Template_0__Title”命名的模板行。

我将我的模板行从 UI 中隐藏起来，并在添加新行时使用它。

在 razor 中，您可以像绑定常规问题一样绑定模板，唯一的区别是它会在隐藏的`<div>`. 您还需要将`Count`您的问题列表绑定到隐藏字段。就我而言，我有一个问题的编辑器模板，它`<div>`使用特定的选择器将其呈现在内部，以便以后轻松访问。所以你最终得到的是类似于：

```
<div class="templateContainer">
  <div class="question">
    [Template]
  </div>
</div>
<div class="items">
  [for each of your items]
  <div class="question">
    [Question]
  </div>
</div> 
```

添加行时，诀窍是使用 javascript：

1.  从隐藏字段中获取计数，将其递增。

    ```
     var counter = $("#QuestionsListCount");
        var count = parseInt(counter.val());
        count++; 
    ```

2.  获取整个模板块，克隆它（`.clone(true)`例如使用 jquery），将其命名为唯一的东西（例如使用步骤 1 中的计数器值），并将其附加到您的问题所在的部分。

    ```
     var template = $("#templateContainer");
        var newItem = template.clone(true);
        var newId = "item_" + count;
        var newQuestion = newItem.children().first();
        newQuestion.attr("id", newId);
        newQuestion.appendTo('#items'); 
    ```

3.  对于每个项目，例如新附加块中的输入（您可以使用分配给它的新 id 找到它），您将 ids => "Template_0" 替换为 "Questions__count from step 2"，并且 names => "Template[ 0]”和“问题[从步骤 2 开始计数]”。

    ```
     $("#" + newId + " :input").each(function (index, input) {
            input.id = input.id.replace("Template_0", "Questions_" + (count - 1));
            input.name = input.name.replace("Template[0]", "Questions[" + (count - 1) + "]");
        }); 
    ```

4.  更新计数器的隐藏字段=>`counter.val(count);`

5.  ...
6.  利润！

现在，关于删除，我这样做的方式是，我的 ViewModel 实际上有一个`IsDeleted`标志，我也将它绑定到问题编辑器模板中的隐藏字段。这样，删除就像隐藏特定的问题一样简单（问题选择器很方便），然后将该`IsDeleted`字段设置为 true。当您通过默认模型绑定器取回整个列表时，您需要丢弃所有已删除的列表（或发出实际删除，具体取决于您的后端数据模型）。

通过这种方式，我避免了处理识别已删除项目的单独方法，也避免了重新编号 UI 中的所有项目。此外，您还可以让服务器端代码确定删除时实际应该发生的情况（例如验证或撤消操作）。

这是一篇很长的文章，但实现并不是那么困难（或长），并且可以很容易地以通用方式重用。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:34:04.127

我假设这些东西有一个主键 Id 字段？

不确定这是最好的方法，但我有一个隐藏的输入字段，例如，deletedIds。在渲染输入元素时，我添加了一个属性，例如：

```
data-rowId='@Model.Id' 
```

然后当他们单击删除时，我将 id 添加到隐藏列表中，或者我使用 css 类将该行标记为已删除，并在提交之前最后将它们铲起，例如：

```
var deletedIds = [];
$('myselector').each(function(){ deletedIds.push($(this).attr('data-rowId'));});
$('deletedIds').val(deletedIds.join(',')); 
```

然后将字符串拆分回服务器上的数组。

如果您在位置上处理它们并且您确定服务器上的序列不能在请求之间更改，那么我将使用相同的方法，但使用数组的索引而不是 id。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-05-25T06:50:21.113

所以我想到了一个更好的解决方案，根本不需要太多的 JS。

1.  在我的控制器中，我创建了一个包含大约 100 个元素的模型。全部为空，但“新”了起来，并带有“隐藏”的 css 类
2.  根据填充了多少现有值，我更新了元素，包括删除“隐藏”的 css 类。
3.  然后我使用 CSS 来隐藏带有“隐藏”css 类的那些。
4.  当我单击“添加更多”时，我从前 3 个元素中删除了“隐藏”类。
5.  当我单击“删除”时，我只需重新添加“隐藏”类。

简单，我以前怎么没想到。

# java - 在java中将视频合二为一

> ID：10579067
> 
> 赞同：0
> 
> 时间：2012-05-14T07:24:41.063
> 
> 标签：java, servlets, video

您知道如何在 servlet 中将视频合二为一吗？我试过谷歌，但找不到任何明确的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:41:57.660

Do you mean taking two video files and merging them into one? If so check out Xuggler, it is a Java wrapper on top of ffmpeg.

To be honest though, Java is a pretty bad choice for working with Video, it's not an area that is well covered. Try having a think about what you're actually trying to achieve, do you need a single video or would a playlist give you the same effect?

# c# - 如何在 MonoDevelop 中的标签上添加点击操作

> ID：10579072
> 
> 赞同：0
> 
> 时间：2012-05-14T07:25:13.560
> 
> 标签：c#, ios, monodevelop

我搜索了一段时间，但不知道如何使用 MonoDevelop 在标签上添加操作。通常，您可以在动作、出口之间进行选择。但是使用标签只能添加出口。

所以在这里我的问题是当用户点击标签时是否可以添加一个事件？如果是，你该怎么做？

（我的备份计划只是将标签更改为按钮（具有相同的外观和感觉），但想保留我的标签..）

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:39:43.017

有了`UILabel`你可以使用`UITapGestureRecognizer`来实现这一点-

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myAction:)];
gestureRecognizer.numberOfTapsRequired = 1;
gestureRecognizer.cancelsTouchesInView = NO;
[myLabel addGestureRecognizer:gestureRecognizer]; 
```

//现在可以在 myAction 方法中定义动作了。

希望它清除。

# javascript - 使用javascript重新加载div而不重新加载页面

> ID：10579074
> 
> 赞同：0
> 
> 时间：2012-05-14T07:25:18.863
> 
> 标签：javascript, user-interface

我目前正在为我正在开发的网站进行简单和最终的 UI 更改，并且想知道是否有人可以帮助我解决问题。

我有一个页面上有三个 div，我想知道如何使用 javascript 重新加载这些 div 的内容，而无需在有人单击某个链接时重新加载页面？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:28:00.097

如果您需要去服务器获取内容：请阅读[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。有一个很好的[jQuery 框架](http://api.jquery.com/jQuery.ajax/)使 ajax 调用变得非常容易。

如果您不需要访问服务器，只需选择您需要的元素并更改其 innerHTML 值。[再次 - 您可以通过jQuery](http://api.jquery.com/category/selectors/)以更简单的方式选择元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:28:17.247

要重新加载此 div，您可以使用 ajax 调用。

通过您的 ajax 调用，您可以获取数据，而无需重新加载页面，然后将您的 div 内容替换为新数据。

类似的东西

```
$.ajax({
 type : 'get',
 url : 'urltogetdata',
 success : function(data){
   $('#yourdiv').html(data);
 }
}); 
```

此代码是 jquery 代码，但它可以与其他库一起使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T07:29:49.257

使用 AJAX。[在这里](http://www.mousewhisperer.co.uk/ajax_page.html)观看

或者如其他答案中所建议的那样 - 使用像 jQuery 这样的框架或库，这使得元素选择和 AJAX 尽可能简单

# java - 如何将 FocusTraversalPolicy 与 MigLayout 一起使用？

> ID：10579078
> 
> 赞同：1
> 
> 时间：2012-05-14T07:25:33.097
> 
> 标签：java, swing, layout, focus, miglayout

我有一个`JPanel`添加了绝对位置的组件（即“pos x y”），并且布局实际上是两列文本字段。我想要实现的是*Tab*将焦点垂直转移到下一个组件，以便遍历第一列，然后是第二列。目前它是水平的。我试图扩展`FocusTraversalPolicy`，但让我恼火的是你必须将它添加到`JFrame`而不只是面板本身 - 除非这是不正确的？

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:40:07.160

As far as I know the default focus traversal cycle is the natural order of the childcomponents in a container, i.e. the order in which they were added to the container. I don't know MigLayout very well, but if you manage to add the components vertically, the focus traversal might follow.

You can set a FocusTraversalPolicy to any Container, however, Swing will only use it when you call setFocusTraversalPolicyProvider(true) on the same Container.

# android - 在 Android 1.6 中添加联系人

> ID：10579082
> 
> 赞同：0
> 
> 时间：2012-05-14T07:25:48.090
> 
> 标签：android, android-contacts, android-contentprovider

我正在尝试在 Android 1.6 中添加联系人（姓名、电话号码、备注、电子邮件 ID），但我无法这样做，因为 Android 1.6 不支持 ContactsContract/ContentProviderOperation 等。我在网上搜索了很多，但找到了 Android 1.6 以上的所有示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:29:20.903

联系人 API 直到 Android 2.0 才出现。如果您想使用此 API，您必须针对 2.0+ SDK 开发您的应用程序。

来源：http: [//developer.android.com/resources/articles/contacts.html](http://developer.android.com/resources/articles/contacts.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:42:14.103

@Nick 我找到了解决方案感谢您的帮助这是一些用于从 Android 1.6 中的联系人中检索电子邮件的代码片段

```
 String[] PROJECTION = new String[] { Contacts.ContactMethods._ID,
            Contacts.ContactMethods.DATA, Contacts.PeopleColumns.NAME };
    c = managedQuery(Contacts.ContactMethods.CONTENT_EMAIL_URI, PROJECTION,
            null, null, Contacts.ContactMethods.DEFAULT_SORT_ORDER); 
```

# c++ - 关闭标准输出和脚本

> ID：10579083
> 
> 赞同：0
> 
> 时间：2012-05-14T07:25:55.357
> 
> 标签：c++, stdout

我有两个用 C++ 编写的进程，一个接一个地通过管道传输。一个人向另一个人提供一些信息`stdin`，然后他们都继续做其他事情。

问题是第二个进程挂在里面`cin.getline()`，即使没有更多的数据要交换。解决方案是第一个进程到`fclose(stdout)`，并且有效，除非我使用包含在脚本中的进程。因此，显然`stdout`脚本在通过该过程关闭后仍然打开 - 这似乎很公平，但就我而言，我可以关闭它吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T08:00:51.847

由于您的程序不会终止，因此您可以`exec your-program`在脚本中而不是仅仅`your-program`在管道的写入端保存一个打开的文件描述符（以及一堆其他东西）。

或者，在后台启动您的程序并退出脚本。

您也可以关闭标准输出，但如果您在启动程序之前这样做，它将无法使用关闭的文件描述符。所以你必须在程序运行时关闭*它*。这并不是微不足道的。我可以考虑在后台启动程序，关闭标准输出（`exec 1>&-`用于此）并将程序带回前台。

# blackberry - Blackberry WebWorks + Ripple，分发应用程序的最简单方法是什么？

> ID：10579085
> 
> 赞同：0
> 
> 时间：2012-05-14T07:26:09.367
> 
> 标签：blackberry, blackberry-simulator, blackberry-webworks, ripple

目前我使用Ripple“打包和签名”选项，然后使用黑莓桌面管理器（我的黑莓通过USB连接到PC）导入然后应用应用程序。让我烦恼的是整个过程需要至少 10 分钟，有时需要 30 分钟。

我尝试跳过“Sign”选项，即仅使用“Package”，但从设备运行应用程序时出现此错误：“错误启动 X：模块‘X’尝试访问安全 API”。

问题：

1.  您如何在开发/测试期间在黑莓上安装应用程序？
2.  您如何分发应用程序以进行 PROD 发布？
3.  我听说我们可以通过 Wi-Fi 分发，或者只是向某人发送一个链接以下载该应用程序，但实际上找不到太多关于它的信息。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T16:46:47.093

您必须签署您打算在手机上使用的 Webworks 应用程序。在模拟器中尽可能多地进行测试，因为它在编译和运行应用程序之间具有最快的周转时间。

如果您打算让用户购买您的应用程序，[Appworld可能是您最简单的分发方法。](https://bdsc.webapps.blackberry.com/devzone/appworld/)

如果您想使用互联网/WiFi 选项，您需要有一个网络服务器/站点，您可以上传打包应用程序时构建的所有 *.cod 和 *.jad 文件。然后将下载应用程序的人指向 .jad 文件，他们的手机将尝试为他们安装它。

# javascript - Javascript：在大括号和方括号内回显变量

> ID：10579088
> 
> 赞同：-2
> 
> 时间：2012-05-14T07:26:33.857
> 
> 标签：javascript

Javascript数组需要替换方括号[]和花括号{}内的静态值

```
console.log(my_array[0]); // This returns  x: 201.5,y: 136.5,z: 0

$('#superdiv').addSpice(function(super){
return $(document.createElement('span')).addClass('note').html(super.z);},              
[  {x: 0.3875, y: 0.3246, z: 4},  //Should be Array Value1
    {x: 0.57, y: 0.329, z: 2}     //Should be Array Value2
 ]);} 
```

现在 [] 中的所有内容都是静态的......我有一个数组，它有几个值，如下所示，我想以相同的方式填充这些值......但是数组 my_array[0]="x: 0.3875, y：0.3246，z：4"；my_array[1]="x: 0.57, y: 0.329, z: 2";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:38:22.783

看起来你想要这样的东西？

```
var arrclone = my_array.splice(0).map(
                  function(obj){
                    var str = []; 
                    for (var l in obj){
                      if (obj.hasOwnProperty(l)){
                       str.push(l+': '+obj[l]);
                      }
                    }
                  return str.join(',');
               });
arrclone[0]; //=> ["x: 0.3875,y: 0.3246,z: 4"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:31:50.817

```
$('#superdiv').addSpice(function(super){
   return $(document.createElement('span')).addClass('note').html(super.z);},          
    [  {x: my_array[0].x, y: my_array[0].y, z: my_array[0].z},  //Should be Array Value1
       {x: my_array[1].x, y: my_array[1].y, z: my_array[1].z}     //Should be Array Value2
    ]);}
... 
```

类似的东西？

# cookies - 从 chrome 扩展中获取 cookie 信息

> ID：10579089
> 
> 赞同：0
> 
> 时间：2012-05-14T07:26:34.220
> 
> 标签：cookies, google-chrome-extension

我试着查了一下，但没有什么能真正帮助我。我创建了一个 chrome 扩展，我需要检查给定站点的 cookie 值。这是我的清单文件：

```
{
  "name": "MyExtension",
  "version": "1.0",
  "description": "First version of My Extension",
  "browser_action": {
    "default_icon": "bmark.ico",
    "popup": "extension.html"
  },
  "permissions": [
    "tabs",
    "cookies",
    "http://www.example.com"
  ]
} 
```

在我的 html 文件中，这是我的代码：

```
chrome.cookies.get({ url: "http://www.example.com", name: 'user' }, function (cookie) {
                    alert(cookie != null);
                }); 
```

结果为假（我的 cookie 为空）。根据 google API，这意味着没有这样的 cookie 但是....当我在 chrome 中查看我的 cookie (chrome://settings/cookies) 时，我可以看到我正在寻找的 cookie。任何人都知道为什么 chrome.cookies.get 函数对我不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:43:09.350

好的，我想通了。我在 manifest.json 文件中缺少以下权限：

```
"http://*/*",
"https://*/*" 
```

显然他们需要访问 cookie。

# php - 按用户选择数据库？

> ID：10579091
> 
> 赞同：0
> 
> 时间：2012-05-14T07:26:36.060
> 
> 标签：php, database

我创建了一个基于 php 的程序，用户通过选择数据库年份（如 10-11、11-12、12-13 等）从其中启动程序。我的数据库名称类似于 10-11 的 DB1011，11-12 的 DB1112等等。

现在我有connect.php，它是连接文件，它有

```
<?php
$link = mysql_connect("localhost","root","123098ABC")
or die("Could not connect to the Server. Check your network connection : " . mysql_error());
$Db = "DB1112";
?> 
```

现在我该如何做到这一点，当用户选择数据库 11-12 时，我的程序在 DB1112 中工作，直到用户不关闭程序。如果可以在 PHP 中实现，我想在没有会话的情况下执行此操作？

谢谢。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:29:06.870

您可以使用`mysql_select_db()`来选择数据库。

```
$Db = "DB1112";
mysql_select_db($Db, $link); 
```

更多信息在这里：http: [//in2.php.net/mysql_select_db](http://in2.php.net/mysql_select_db)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:29:28.320

您始终可以使用`mysql_select_db(dbname);`.

# jquery - 一遍又一遍地从左到右移动元素 jQuery

> ID：10579100
> 
> 赞同：-1
> 
> 时间：2012-05-14T07:27:40.017
> 
> 标签：jquery, css, animation

我正在使用它在幻灯片放映中移动 div。问题是每个图像的标题必须从同一位置（每个 div）开始在每个图像上从左到右移动。使用这段代码，div 会根据需要移动，但下一个将从放置最后一个的点移动。

```
$("#elementId").animate({
        marginLeft: "-=100"
    }, 1000, function() {
        //Complete
    }
); 
```

以防万一我很难解释。

我有一个幻灯片，每个图像都会淡入，一秒钟后，每个图像顶部会显示一个带有一些文本的 div，该 div 必须从左到右移动。但是使用上面的代码，div 会移动，但只要下一个图像在 div 中淡出，就会从上一个 div 所在的最后一个位置开始移动。

如何使 div 从 0 或原始位置再次“移动”？

**要求编辑** 代码：

```
 <script type="text/javascript">
    // Speed of the automatic slideshow
    var slideshowSpeed = 6000;

    // Variable to store the images we need to set as background
    // which also includes some text and url's.

    var photos = [ {
            "title" : "First Tag line :",
            "image" : "/images/chrysanthemum-266x200.jpg",
            "url" : "http://www.gyms-ireland.com",
            "firstline" : "First Tag line :",
            "secondline" : "Second Tag line"
        }, {
            "title" : "Some text",
            "image" : "/images/tulips-oop-ll-266x200.jpg",
            "url" : "http://www.gyms-ireland.com",
            "firstline" : "Some text",
            "secondline" : "Alternative text"
        }, {
            "title" : "Npthing Here",
            "image" : "/images/koala-266x200.jpg",
            "url" : "http://www.gyms-ireland.com",
            "firstline" : "Npthing Here",
            "secondline" : "Also nothing here",
        }, {
            "title" : "Office Appartments",
            "image" : "/images/work.jpg",
            "url" : "http://www.sxc.hu/photo/1265695",
            "firstline" : "Or still busy at",
            "secondline" : "work?"
        }
    ];

    jQuery(document).ready(function() {

        // Backwards navigation
        jQuery("#back").click(function() {
            stopAnimation();
            navigate("back");
        });

        // Forward navigation
        jQuery("#next").click(function() {
            stopAnimation();
            navigate("next");
        });

        var interval;
        jQuery("#control").toggle(function(){
            stopAnimation();
        }, function() {
            // Change the background image to "pause"
            jQuery(this).css({ "background-image" : "url(images/btn_pause.png)" });

            // Show the next image
            navigate("next");

            // Start playing the animation
            interval = setInterval(function() {
                navigate("next");
            }, slideshowSpeed);
        });

        var activeContainer = 1;    
        var currentImg = 0;
        var animating = false;
        var navigate = function(direction) {
            // Check if no animation is running. If it is, prevent the action
            if(animating) {
                return;
            }

            // Check which current image we need to show
            if(direction == "next") {
                currentImg++;
                if(currentImg == photos.length + 1) {
                    currentImg = 1;
                }
            } else {
                currentImg--;
                if(currentImg == 0) {
                    currentImg = photos.length;
                }
            }

            // Check which container we need to use
            var currentContainer = activeContainer;
            if(activeContainer == 1) {
                activeContainer = 2;
            } else {
                activeContainer = 1;
            }

            showImage(photos[currentImg - 1], currentContainer, activeContainer);

        };

        var currentZindex = -1;
        var showImage = function(photoObject, currentContainer, activeContainer) {
            animating = true;

            // Make sure the new container is always on the background
            currentZindex--;

            // Set the background image of the new active container
            jQuery("#headerimg" + activeContainer).css({
                "background-image" : "url(" + photoObject.image + ")",
                "display" : "block",
                "z-index" : currentZindex
            });

            // Hide the header text
            jQuery("#headertxt").css({"display" : "none"});

            // Set the new header text
            jQuery("#firstline").html(photoObject.firstline);
jQuery("#firstline").css("marginLeft", "0").animate({
        marginLeft: "-=100"
    }, 4000, function() {
        //Complete
    }
);
            jQuery("#secondline")
                .attr("href", photoObject.url)
                .html(photoObject.secondline);
            jQuery("#pictureduri")
                .attr("href", photoObject.url)
                .html(photoObject.title);

            // Fade out the current container
            // and display the header text when animation is complete
            jQuery("#headerimg" + currentContainer).fadeOut(function() {
                setTimeout(function() {
                    jQuery("#headertxt").css({"display" : "block"});
                    animating = false;
                }, 500);
            });
        };

        var stopAnimation = function() {
            // Change the background image to "play"
            jQuery("#control").css({ "background-image" : "url(images/btn_play.png)" });

            // Clear the interval
            clearInterval(interval);
        };

        // We should statically set the first image
        navigate("next");

        // Start playing the animation
        interval = setInterval(function() {
            navigate("next");
        }, slideshowSpeed);

    });</script> 
```

**HTML**

```
<div id="headerimgs">
    <div id="headerimg1" class="headerimg"></div>
    <div id="headerimg2" class="headerimg"></div>
</div>

<!-- Slideshow controls -->

<!-- jQuery handles for the text displayed on top of the images -->
<div id="headertxt">
    <p class="caption">
        <span id="firstline"></span>
        <a href="#" id="secondline"></a>
    </p>
    <p class="pictured">
        Pictured:
        <a href="#" id="pictureduri"></a>
    </p>
</div> 
```

**CSS**

```
#header {
    height: 220px;
    width: 520px;
}
.headerimg {
    background-position: center top;
    background-repeat: no-repeat;
    height: 220px;
    position: absolute;
    width: 520px;
}

#headertxt {
    clear: both;
    margin: 0 auto;
    position: relative;
    top: 50px;
    width: 520px;
}
#firstline {
    color: #333333;
    display: block;
    float: left;
    font-size: 25px;
    margin: 10px 10px 0 0;
    padding: 10px;
    marginLeft:0px !important;
}
#secondline {
    clear: both;
    color: #CD2B3A;
    display: block;
    float: left;
    font-size: 40px;
    margin: 10px 30px 0;
    padding: 15px 10px;
    text-decoration: none;
}
#headerimgs a {
    text-indent: -999999px;
}

.new {
    display: block;
    height: 220px;
    position: absolute;
    width: 520px;
}
#secondline:hover { text-decoration:underline; color:#7F000C; }

.pictured {
    background-color: #CC3333;
    clear: both;
    color: #FFFFFF;
    display: block;
    float: right;
    font-size: 12px;
    margin-top: 10px;
    padding: 9px 16px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T07:31:25.880

很难从问题中看出，但如果您要重复使用相同的`div`，则需要 reset `marginLeft`。例如：

```
$("#elementId").css("marginLeft", "0").animate({
        marginLeft: "-=100"
    }, 1000, function() {
        //Complete
    }
); 
```

（当然，如果起点不应该是`0`, use`10px`或其他。）您可能还想`stop`在那里抛出 a 以防您在动画完成之前调用它，但这取决于您的其余代码正在做什么。

[实例](http://jsbin.com/ohiqin)| [来源](http://jsbin.com/ohiqin/edit)：

HTML：

```
<div id="elementId">I'm the div</div>
<button id="theButton">Click me</button> 
```

JavaScript：

```
jQuery(function($) {

  $("#theButton").click(function() {
    $("#elementId").stop().css("marginLeft", "0").animate({
            marginLeft: "-=100"
        }, 1000, function() {
            //Complete
            display("Done, click the button again to see the repeat");
        }
    );
  });

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:27:30.480

好的，我可以看到这已经解决了，但我会使用[jQuery Cycle](http://jquery.malsup.com/cycle/)插件；简单得多。[你可以在我的网站](http://jamesswright.co.uk/)上看到它的实际效果。

# java - 如何使用 JDBC 减少查询时间？

> ID：10579106
> 
> 赞同：-3
> 
> 时间：2012-05-14T07:28:01.357
> 
> 标签：java, mysql

我正在使用 Java (JDBC) 从 MySQL 数据库中获取记录。我有表 - 有 150 万条记录的 Stop_Times 和 1 lac 记录的 Stops。

我正在使用以下代码

```
ResultSet rs = stm.executeQuery("select distinct(stop_id) from Stop_Times force index (idx_stop_times) where agency_id = '" + agency_id + "' and route_type = " + route_type + " order by stop_id");

while(rs.next())
{
  stop_id.add(rs.getString("stop_id"));               
}

JSONArray jsonResult = new JSONArray();

String sql = "select * from Stops force index (idx_Stops) where stop_id = ? and agency_id = ? and location_type = 0 order by stop_name";

                  PreparedStatement pstm = con.prepareStatement(sql);

                  int rid = 0;

                  for(int r = 0; r < stop_id.size(); r++)
                  {
                      pstm.setString(1, stop_id.get(r).toString());
                      pstm.setString(2, agency_id);
                      rs = pstm.executeQuery();

                      if(rs.next())
                      {
                          JSONObject jsonStop = new JSONObject();
                          jsonStop.put("str_station_id", rs.getString("stop_id"));
                          jsonStop.put("str_station_name", rs.getString("stop_name") + "_" + rs.getString("stop_id"));
                          jsonStop.put("str_station_code", rs.getString("stop_code"));
                          jsonStop.put("str_station_desc", rs.getString("stop_desc"));
                          jsonStop.put("str_station_lat", rs.getDouble("stop_lat"));
                          jsonStop.put("str_station_lon", rs.getDouble("stop_lon"));
                          jsonStop.put("str_station_url", rs.getString("stop_url"));
                          jsonStop.put("str_location_type", rs.getString("location_type"));
                          jsonStop.put("str_zone_id", rs.getString("zone_id"));

                          jsonResult.put((rid++), jsonStop);
                      }                               
                  } 
```

第一个查询返回 6871 条记录。但它花费了太多时间 - 在服务器端需要 8-10 秒，在客户端需要 40-45 秒。

我想将这些时间减少到服务器端 300-500 毫秒和客户端大约 10 秒。请任何人都可以帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:34:55.727

您的策略是使用第一个查询来获取 ID，然后遍历这些 ID 并为第一个查询找到的每个 ID 执行另一个查询。您实际上是在进行“手动”连接，而不是让数据库为您完成。您可以在一个查询中重写所有内容：

```
select * from Stops stops
inner join Stop_Times stopTimes on stopTimes.stop_id = stops.stop_id
where stops.stop_id = ? 
  and stops.agency_id = ? 
  and stops.location_type = 0 
  and stopTimes.agency_id = ? 
  and stopTimes.route_type = ?
order by stops.stop_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:33:36.327

尝试获取与您的请求相关的解释计划（参见[http://dev.mysql.com/doc/refman/5.0/en/using-explain.html](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)）；避免全表扫描（解释全部连接）。然后添加相关索引。然后重试。

# java - Java：如何在 JFileChooser 中读取“文件类型”

> ID：10579114
> 
> 赞同：1
> 
> 时间：2012-05-14T07:28:40.193
> 
> 标签：java, swing, jfilechooser

我想在用户在 JFileChooser 上选择文件类型时创建一个新文件。这怎么可能。我将此代码用于 JFileChooser：

```
JFileChooser chooser = new JFileChooser();
chooser.setDialogTitle("Save data in your file format");

FileFilter type1 = new ExtensionFilter("Access 2007 Database(*.accdb)", ".accdb");
FileFilter type2 = new ExtensionFilter("Access 2002-2003 Database(*.mdb)", ".mdb");

chooser.addChoosableFileFilter(type1);
chooser.addChoosableFileFilter(type2);

int actionDialog = chooser.showSaveDialog(frame); 
```

现在，当用户通过此代码选择任何文件时，我能够获得“文件名”：

```
 chooser.getSelectedFile().getName(); 
```

**但是当用户选择任何文件时，我不知道如何获取“文件类型”。** 为方便起见，我还附上了 JFileChooser 的照片： ![在此处输入图像描述](../Images/5a7f5d12d62ba0bbc7a4fdb9e51570f9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:31:02.107

您可以使用获取该信息`JFileChooser .getFileFilter()`

[从 Javadocs](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html#getFileFilter%28%29)：

> *返回当前选择的文件过滤器*

# php - 如何将数据刷新到浏览器但继续执行

> ID：10579116
> 
> 赞同：20
> 
> 时间：2012-05-14T07:28:47.960
> 
> 标签：php, output-buffering

我有一个`ob_start()`和一个对应的`ob_flush()`. 我想刷新一部分数据并继续执行其余部分。使用`ob_flush()`没有帮助。此外，如果可能需要休息而不显示浏览器中的加载。

**编辑：**

我不想使用ajax

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-14T09:15:24.480

我过去曾这样做过，这就是我解决它的方法：

```
ob_start();

/*
 * Generate your output here
 */ 

// Ignore connection-closing by the client/user
ignore_user_abort(true);

// Set your timelimit to a length long enough for your script to run, 
// but not so long it will bog down your server in case multiple versions run 
// or this script get's in an endless loop.
if ( 
     !ini_get('safe_mode') 
     && strpos(ini_get('disable_functions'), 'set_time_limit') === FALSE 
){
    set_time_limit(60);
}

// Get your output and send it to the client
$content = ob_get_contents();         // Get the content of the output buffer
ob_end_clean();                      // Close current output buffer
$len = strlen($content);             // Get the length
header('Connection: close');         // Tell the client to close connection
header("Content-Length: $len");     // Close connection after $len characters
echo $content;                       // Output content
flush();                             // Force php-output-cache to flush to browser.
                                     // See caveats below.

// Optional: kill all other output buffering
while (ob_get_level() > 0) {
    ob_end_clean();
} 
```

正如我之前在几条评论中所说，你应该注意压缩你的内容，因为这会改变你的内容的长度，但不会改变它的标题。它还可以缓冲您的输出，因此不会立即发送到客户端。
您可以尝试让 apache 知道不要使用 gzip 压缩您的内容`apache_setenv('no-gzip', '1');`。但是，如果您使用重写规则转到您的页面，这将不起作用，因为它也会修改这些环境变量。至少，它对我来说是这样的。

[请参阅手册](http://www.php.net/manual/en/function.flush.php)中有关将内容刷新给用户的更多注意事项。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-14T07:32:06.337

`ob_flush`写入缓冲区。换句话说，`ob_flush`告诉 PHP 给 Apache（或 nginx/lighttpd/whatever）输出，然后让 PHP 忘记它。一旦 Apache 有了输出，它就可以随心所欲地使用它。（换句话说，在`ob_flush`您无法控制它是否立即写入浏览器之后）。

所以，简短的回答：没有保证的方法可以做到这一点。

只是猜测，您可能正在寻找 AJAX。每当人们试图操纵页面内容加载时，AJAX 几乎总是正确的路径。

如果您想在后台继续执行任务，可以使用`ignore_user_abort`，如此[处](https://stackoverflow.com/questions/265073/php-background-processes)详述，但是，这通常不是最佳方法。您基本上失去了对该线程的控制，在我看来，Web 服务器线程不属于繁重的处理。

我会尝试从面向网络的东西中提取它。这可能意味着一个 cron 条目或只是从 PHP 内部生成一个后台进程（虽然从脚本执行内部开始的进程不会随着脚本而死，并且脚本不会等待它在死前完成）。

如果你真的走那条路，这意味着你甚至可以在必要时制作某种身份系统。然后，您可以监控执行情况并定期向用户提供进度更新。（从技术上讲，您也可以使用 -ed 脚本制作状态系统`ignore_user_abort`，但它对我来说似乎并不干净。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T06:37:46.893

这是我的功能

```
function bg_process($fn, $arr) {
    $call = function($fn, $arr){
        header('Connection: close');
        header('Content-length: '.ob_get_length());
        ob_flush();
        flush();
        call_user_func_array($fn, $arr);
        };
    register_shutdown_function($call, $fn, $arr);
    } 
```

最后包装要执行的函数，在php关闭连接之后。当然浏览器会停止缓冲。

```
function test() {
    while (true) {
        echo 'this text will never seen by user';
        }
    } 
```

这是调用函数的方法

```
bg_process('test'); 
```

第一个参数是[`callable`](http://www.php.net/manual/en/language.types.callable.php)，第二个参数是要传递给带有索引数组的“测试”函数的数组

注意：我不在`ob_start()`脚本开头使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T07:50:34.567

我有一篇文章解释了如何在我的博客上使用 apache/mod_php 来实现这一点：http: [//codehackit.blogspot.com/2011/07/how-to-kill-http-connection-and.html](http://codehackit.blogspot.com/2011/07/how-to-kill-http-connection-and.html)希望这会有所帮助，干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-25T00:31:47.087

`fastcgi_finish_request`

> 此函数将所有响应数据刷新到客户端并完成请求。这允许在不打开与客户端的连接的情况下执行耗时的任务。

不能在 Apache 上工作。（PHP 5 >= 5.3.3，PHP 7）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-28T08:37:02.553

如果您使用的是 PHP-FPM：

```
ignore_user_abort(true);
fastcgi_finish_request(); 
```

以上两个功能是`ignore_user_abort`防止错误和`fastcgi_finish_request`关闭客户端连接的关键因素。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-14T07:53:03.377

采用：

```
header("Content-Length: $len"); 
```

..where`$len`是要刷新到客户端的数据的长度。

我没有背景知道这将在何时何地起作用，但我尝试了一些浏览器，并立即返回：

```
<?PHP 
    header("Content-length:5");
    echo "this is more than 5";
    sleep(5);
?> 
```

编辑：Chrome、IE 和 Opera 显示`this`，而 FireFox 显示`this is more than 5`。在那之后，他们所有人都关闭了请求。

# mysql - 有人可以向我解释这个 mysql 选择查询值的逻辑吗？

> ID：10579121
> 
> 赞同：0
> 
> 时间：2012-05-14T07:29:12.330
> 
> 标签：mysql

```
Concat(Date_format(Date_add(Date_format(Str_to_date(
                                               products_options_values,
                                               '%m-%d-%Y'
                                                      ),
                                                      '%Y-%m-%d'),
                                             INTERVAL(2-Dayofweek(Date_format(
                                             Str_to_date(
                                             products_options_values, '%m-%d-%Y'
                                             )
                                             , '%Y-%m-%d')))day), '%b%d'), '-',
       Date_format(Date_add(Date_format(Str_to_date(products_options_values,
                                        '%m-%d-%Y'
       )
       ,
       '%Y-%m-%d'
       ),
       INTERVAL( 8 - Dayofweek( Date_format(Str_to_date(products_options_values,
       '%m-%d-%Y'
       ), '%Y-%m-%d')) )day), '%b%d'))
       AS week_dates,
       Week(Date_format(Str_to_date(products_options_values, '%m-%d-%Y'),
            '%Y-%m-%d'))
                   AS weekdays 
```

我需要在jquery中实现上面的mysql日期计算逻辑。这是获取日期的 mysql select 语句的一部分。但是我不明白这个日期计算到底发生了什么，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:20:24.180

理解这样的代码的关键是从*内*向外工作。快速浏览您的代码会发现最里面的函数调用是相同的：

```
DATE_FORMAT(STR_TO_DATE(products_options_values, '%m-%d-%Y'), '%Y-%m-%d') 
```

这两个函数调用的最里面，[`STR_TO_DATE`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)，将字符串输入并通过根据第二个参数中给出的格式（即美国风格的*月-日-年*）对其进行解析`products_options_values`，将其转换为 MySQL值。最外层的函数调用 ,获取结果值并将其格式化*为其*第二个参数（即*year-month-day*）给出的形式。`DATE`*[`DATE_FORMAT`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_date-format)`DATE`*

 ***也就是说，这些调用一起将以美国样式形式表示的日期转换为更国际化的格式。`international_date`使用代替这些调用重写查询的其余部分：

```
Concat(
  Date_format(
    Date_add(
      international_date,
      INTERVAL(
        2 - Dayofweek(international_date)
     ) day
   ),
   '%b%d'
  ),
  '-',
  Date_format(
    Date_add(
      international_date,
      INTERVAL(
        8 - Dayofweek(international_date)
      ) day
    ),
    '%b%d'
  )
) AS week_dates,
Week(international_date) AS weekdays 
```

该[`DAYOFWEEK`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_dayofweek)函数将给定日期的星期几作为从 1 到 7 的整数返回（其中 1 是星期日，7 是星期六）。因此，添加`2 - DAYOFWEEK(international_date)`天数将给出同一周的星期一；并添加`8 - DAYOFWEEK(international_date)`将给出下周的星期日。这正是[`DATE_ADD`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_date-add)函数正在做的事情。

然后将这些日期（同一周的星期一和下一周的星期日）格式化为特定形式（三个字母的月份和两位数的日期，例如`Jan14`or `May18`），并[`CONCAT`](http://dev.mysql.com/doc/refman/string-functions.html#function_concat)使用分隔连字符连接起来。结果被赋予别名`week_dates`。

结果集中还有另一列被赋予别名`weekdays`；this 保存了[`WEEK`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_week)应用于`international_date`（即一年中的一周）的函数的值。***

# spring - RestTemplate "没有合适的 HttpMessageConverter"

> ID：10579122
> 
> 赞同：1
> 
> 时间：2012-05-14T07:29:13.993
> 
> 标签：spring, rest, spring-mvc, resttemplate

我意识到在我尝试创建的项目中存在一些关联。我正在使用 RestTemplate。我正在尝试连接服务器并检索数据。一切都很顺利，直到我决定在多个控制器类中破坏我的程序。看看我做了什么。在这些新类中的每一个中，我都会在其中插入：

```
RestTemplate restTemplate= new RestTemplate(); 
```

为了检索数据，我只使用 JAXB 注释（用于数据绑定），我可以检索我想要的任何内容。但是当我试图在新类中执行这行代码时：

```
 ResponseEntity<AClass> result = restTemplate.exchange("url",
                        HttpMethod.GET, entity, AClass.class); 
```

我正在接受这个例外：RestClientException“无法提取响应：没有找到适合响应类型 [AClass] 和内容类型 [application/xml] 的 HttpMessageConverter”

如果我把它放回上一课可以毫无问题地执行。真的我不明白为什么。可能是因为我在新类中使用了一个新的 RestTemplate。我尝试声明不同的 RestTemplates 并以这种方式声明：@Autowired 但问题仍然存在。我应该在调度程序 servlet 中声明一些新内容吗？此外，我可以在许多类中调用对象 restTemplate(RestTemplate restTemplate=new RestTemplate())。我应该在特定的类中声明它并从那里调用它吗？我该怎么办？我期待你的提议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:41:33.583

您之前是如何`restTemplate`设置实例的？您必须向实例注册 a `MarshallingHttpMessageConverter`，`RestTemplate`否则它将不知道如何解组 XML。像这样的东西：

```
Jaxb2Marshaller jaxbMarshaller = new Jaxb2Marshaller();
// Make sure context paths includes AClass's package
jaxbMarshaller.setContextPaths("com.example.generated");
MarshallingHttpMessageConverter converter = new 
    MarshallingHttpMessageConverter(jaxbMarshaller, jaxbMarshaller);
restTemplate.setMessageConverters(Arrays.<HttpMessageConverter<?>> asList(converter)); 
```

# visual-studio-2010 - 使用实体框架在datagridview中显示数据库中的多行

> ID：10579140
> 
> 赞同：1
> 
> 时间：2012-05-14T07:30:34.170
> 
> 标签：visual-studio-2010, sql-server-2008, entity-framework-4

我试图在 datagridview 中显示来自数据库的多条记录，但我一直只有一条记录。
此查询涉及 2 个表，从第一个表我获取所有满足条件的 id，从第二个表我获取用户信息。
第一个表是 tblUsers_Roles，第二个表是 tblUsers。
这些表具有主/外键关系。
这是我的代码：

```
IEnumerable<tblUsers_Role> id = db.tblUsers_Role.Where(a => a.User_Role == selectRole);

foreach (var user in id)
{
    var userinfo = from b in db.tblUsers 
                   where b.User_Id == user.User_Id 
                   select new { b.First_Name, b.Last_Name, b.Status, b.Authenticated };

    dgvResults.DataSource = userinfo.ToList();
    dgvResults.Show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:38:06.060

您正在循环中分配网格。那是行不通的。也许这样的事情会起作用：

```
var userinfo =(from ur in db.tblUsers_Role
    join u in db.tblUsers
        on ur.User_Id equals u.User_Id 
    where ur.User_Role == selectRole
    select new
    {
        u.First_Name, 
        u.Last_Name, 
        u.Status, 
        u.Authenticated
    }).ToList();

dgvResults.DataSource = userinfo;
dgvResults.Show(); 
```

或者一个替代方案是这样的：

```
 var roles=db.tblUsers_Role
             .Where(a => a.User_Role == selectRole)
             .Select (a =>a.User_Id).ToList();

var userinfo=
    (
        from u in db.tblUsers
        where roles.Contains(u.User_Id)
        select new
        {
            u.First_Name, 
            u.Last_Name, 
            u.Status, 
            u.Authenticated
        }
    ).ToList();

dgvResults.DataSource = userinfo;
dgvResults.Show(); 
```

不如第一个好看。但也许你理解这个概念。

# actionscript-3 - 如何将flv嵌入flash并用AS3播放？

> ID：10579142
> 
> 赞同：4
> 
> 时间：2012-05-14T07:30:38.843
> 
> 标签：actionscript-3, flash

我想创建一个包含多个视频的 ipad 应用程序。所有视频都必须嵌入到 Flash 中，因此不能流式传输。我可以将 flv 嵌入到时间轴上以这种方式播放，但是有没有其他方法可以使用 Actionscript 来控制播放，它引用库中的视频对象，或者可能在 AS 中使用嵌入标签 - 这样我就可以获得更多控制权并访问提示点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T07:52:10.290

您必须嵌入文件并附加 NetStream 字节：

```
[Embed(source = "movie.flv", mimeType = "application/octet-stream")]
public var bytes:Class;

public var video:Video = new Video(640, 480);

public function Main():void {

    addChild(video);

    var nc:NetConnection = new NetConnection();
    nc.addEventListener(NetStatusEvent.NET_STATUS , onConnect);
    nc.addEventListener(AsyncErrorEvent.ASYNC_ERROR , trace);

    var metaSniffer:Object=new Object();  
    nc.client=metaSniffer;
    metaSniffer.onMetaData=getMeta;
    nc.connect(null);
}

private function getMeta (mdata:Object):void {
    video.width=mdata.width/2;
    video.height=mdata.height/2;
};

private function onConnect(e:NetStatusEvent):void {
    if (e.info.code == 'NetConnection.Connect.Success') {
        trace(e.target as NetConnection);
        var ns:NetStream = new NetStream(e.target as NetConnection);

        ns.client = {};
        var file:ByteArray = new bytes();
        ns.play(null);

        ns.appendBytes(file);
        video.attachNetStream(ns);
    }

} 
```

# c# - ClickOnce 发布

> ID：10579144
> 
> 赞同：-2
> 
> 时间：2012-05-14T07:31:00.937
> 
> 标签：c#, iis-7, clickonce

我在理解发布 clickOnce 时遇到了一些问题。

我如何通过我得到的视觉工作室发布它，这只是一些填充物。

这是我没有得到的网络服务器。我已经在我的计算机上安装了 IIS，但我真的不知道我必须用它做什么。谁能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:54:10.773

最好的方法是阅读相关教程。其中的主要步骤是在 IIS 中启用远程管理。

这是我使用的一篇很棒的文章。

[http://weblogs.asp.net/scottgu/archive/2010/09/13/automating-deployment-with-microsoft-web-deploy.aspx](http://weblogs.asp.net/scottgu/archive/2010/09/13/automating-deployment-with-microsoft-web-deploy.aspx)

# ruby-on-rails - 未定义的方法“original_filename”错误？

> ID：10579149
> 
> 赞同：-1
> 
> 时间：2012-05-14T07:31:20.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试创建一个将图片存储在数据库中的图像上传器，这里是 db 模式：

```
owner, type, filename, binary_data 
```

所有字符串类型，除了 binary_data，它是二进制类型。

我的文件：

看法

```
<%= form_tag({:action => "createnew"}, {:mulstipart => true}) %>
  <%= hidden_field "image", "owner", :value => session[:login] %><br/>
  <%= text_field "image", "filename",  :size => 20 %><br/>
  <%= file_field "image", "image_file" %><br/>
<%= submit_tag "Upload" %> 
```

.rb 文件（错误来源）

```
def image_file=(input_data)
  self.filename = input_data.original_filename
  self.type = input_data.content_type.chomp
  self.binary_data = input_data.read
end 
```

控制器

```
def createnew
  @image = Image.new(params[:image])
  if request.post? 
    @image.save
  end
end 
```

有人知道我的代码有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T12:36:07.390

你错在`multipart`数据上。请将您的表格更改为：

```
<%= form_tag({:action => "createnew"}, :method => :post, :multipart => true do %> 
```

# jquery - 在 DIV 中获取 href 并将其放在 window.location.href

> ID：10579150
> 
> 赞同：0
> 
> 时间：2012-05-14T07:31:23.623
> 
> 标签：jquery

说我有

```
<div id= "page">
<div class = "container">
<a href="http://www.google.com"></a>
</div>
</div> 
```

是否可以在“容器”中获取该 url，并且只能在“页面”中获取，并使用 jquery 将其放在 window.location.href 中？我知道可能有更好的方法可以访问该 URL，但我只想知道这是否可能。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:32:31.610

由于您想要*“容器”内的链接并且仅在“页面”内*，因此选择器必须是

```
window.location = $('#page .container a').attr('href'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T07:32:37.677

```
var url = $('#page .container a').attr('href');
window.location = url; 
```

# adapter - 使用 OpenNETCF 搜索 MC75 设备上的无线适配器

> ID：10579156
> 
> 赞同：1
> 
> 时间：2012-05-14T07:31:33.460
> 
> 标签：adapter, wireless, opennetcf

我正在使用 OpenNETCF 在**摩托罗拉 MC-75**设备上查找无线适配器，但它没有显示任何无线适配器。当我使用“无线伴侣”搜索 wifi 时，它确实显示所有 wifi。

我已取消选中 802.11d 并选择**Motorola JEDI WIFI**驱动程序。摩托罗拉 JEDI WIFI 是否兼容 WZC？但相同的代码正在其他 HTC windows 设备上运行。

请建议。

任何帮助，将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:01:36.023

SDF 的代码库只能列举平台告诉它的内容。首先它询问 NDIS 它知道哪些适配器。对于它们中的每一个，它都会询问 WZC 是否注册了相同的适配器，如果没有，它会询问 NDIS 是否至少认为它是一个无线适配器。

如果适配器驱动程序没有向 WZC 注册，并且没有向 NDIS 报告自己是无线的，那么我们只能说它是一个 NetworkInterface，所以这就是您获得的实例类型。一些原始设备制造商选择使用专有 API 来控制无线电（是的，我在看你的思科！）并且驱动程序使用它们而不是发布公共的通用接口。

不幸的是，除了从 OEM 获取 API 文档（祝你好运）和更新该特定驱动程序的代码库之外，您几乎无能为力。

# php - 从另一个类访问一个类变量

> ID：10579162
> 
> 赞同：1
> 
> 时间：2012-05-14T07:32:12.450
> 
> 标签：php, oop

我对 PHP OO 概念比较陌生。我一直在搞乱以下，

```
<?php

require('class_database.php');
require('class_session.php');

class something {  

  $database = NULL;
  $session = NULL;

  function __construct() {
    $this->database = new database();
    $this->session = new session();
  }

  function login() {
    $this->session->doLogin();
  }
}
?>

in another script

$something = new something();
$something->login(); 
```

在这个例子中，`$database`有一个构造函数，它创建一个包含 MySQLi 连接的受保护变量。它还有一个名为`query()`.

如果`$session`需要运行`$database->query`，我该怎么做？创建一个新的数据库类会非常浪费，但我似乎无法`$database`从`$session`.

我是否为自己制造了本应避免的大麻烦？我希望会话提供登录验证，这需要访问数据库以检查凭据。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:35:32.437

有关此主题的更多信息，请参阅[http://en.wikipedia.org/wiki/Dependency_Injection](http://en.wikipedia.org/wiki/Dependency_Injection)和[http://martinfowler.com/articles/injection.html](http://martinfowler.com/articles/injection.html)。

```
<?php
class something {  
  require('class_database.php');
  require('class_session.php');

  $database = new database();
  // dependency injection either here in constructor or in the function that needs it below
  $session = new session($database);

  $session->doSomething(); //This method wants to access $database->query();
}
?> 
```

**更新**（OP 更改了有问题的代码）

```
<?php

require('class_database.php');
require('class_session.php');

class something
{  
  protected $session = NULL;

  public function __construct($session) {
    $this->session = $session;
  }

  public function login() {
    $this->session->doLogin();
  }
}

$database = new database();
$session = new session($database);
$something = new something($session);
$something->login();
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T07:36:39.423

让会话类的构造函数接受一个数据库实例的参数怎么样？

```
$database = new database();
$session = new session($database); 
```

然后在会话构造函数中，将其设置为对象的属性并使用它：

```
private var $_database;

public function __construct($database) {
   $this->_database = $database;
}

public function doSomething() {
    $this->_database->query();
} 
```

# jquery - 使用 fadeIN 函数限制链接标签以具有平滑滚动效果

> ID：10579164
> 
> 赞同：2
> 
> 时间：2012-05-14T07:32:20.953
> 
> 标签：jquery, fadein, smooth-scrolling

当单击标签（导航）时，我有一个具有平滑滚动效果的单页网站`a`，其中一个导航条目还调用了带有fadeIN函数的隐藏div（input.box），我的问题是每当带有fadeIN函数的条目显示时，页面也向下滑动了一点。我应该如何限制这个带有淡入淡出功能的菜单也不能滚动？我的 jsfiddle 波纹管上有用于平滑滚动和淡入淡出的代码。

[平滑滚动代码](http://jsfiddle.net/Rn9tE/)

[FadeIN 效果代码](http://jsfiddle.net/ET544/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:36:33.497

平滑滚动代码的以下部分选择要应用效果的元素：

```
$('a[href*=#]') 
```

您需要限制它以排除打开弹出窗口的锚点。执行此操作的方法取决于您如何识别要排除的元素：

```
$('a[href*="#"]:not(a[href="#info"])') 
```

或者

```
$('a[href*="#"]:not(.info-popup)') 
```

也有人可能会争辩说，如果标准相反，它会更整洁，因此需要积极选择应该针对平滑滚动的元素，而不是过滤掉：

```
$('a.page-nav') 
```

# mysql - mysql内部连接随机语法错误

> ID：10579170
> 
> 赞同：1
> 
> 时间：2012-05-14T07:32:48.313
> 
> 标签：mysql, inner-join

```
(SELECT * FROM table1 
INNER JOIN table2 
ON table1.id = table2.id) 
AS t1 
JOIN (SELECT ROUND(RAND() * (SELECT MAX(table1.id) FROM table1)) AS id) 
AS t2 
WHERE t1.id >= t2.id 
LIMIT 1) 
```

我尝试使用`RAND()` `max(id)`获取随机 mysql 结果，但得到一个`#1064`错误。

`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS t1 JOIN (SELECT ROUND(RAND() * (SELECT MAX(table1.id) FROM table1))' at line 1`

问题出在哪里？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:37:20.340

（假设这个代码片段是一个完整的查询）

可能是错误的，但您的语句没有 SELECT ... 简而言之，它看起来像这样：

t1 加入 t2 在哪里...

没有 SELECT something FROM t1 JOIN t2 WHERE ...

不知道我是否说清楚...

附录：

不确定您要达到什么目的，但是下面的代码会从您的表中返回随机 ID（查询的变体），所以也许您可以使用它。也许有点混乱，但我又不知道你想达到什么目的:)。

```
SELECT * FROM 
  (SELECT table1.id as id1 
    FROM table1 
    INNER JOIN table2 
    ON table1.id = table2.id)  as t1
JOIN (
  (SELECT ROUND(RAND() * (SELECT MAX(table1.id) FROM table1)) AS id2) 
AS t2 )
WHERE t1.id1 >= t2.id2
LIMIT 1 
```

您可以选择 id1 或 id2 而不是 *，具体取决于您的目标...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:43:57.707

（假设此代码片段是更大查询的一部分）

问题是这个子查询：

```
(SELECT * FROM table1 
INNER JOIN table2 
ON table1.id = table2.id) 
AS t1 
```

单独运行：

```
SELECT * FROM table1 
  INNER JOIN table2 
  ON table1.id = table2.id ; 
```

不会给出错误，但它会显示/返回至少 2 个同名的列 ( `id`)。当您尝试将其作为子查询包含在更大的查询中时，这会导致冲突。

# c# - 读取空值并从 xml 文件中返回空值 C# win froms

> ID：10579172
> 
> 赞同：0
> 
> 时间：2012-05-14T07:32:54.560
> 
> 标签：c#, xml, visual-studio-2010, linq

```
<?xml version="1.0" encoding="utf-8"?>
<configuration version="45.2012.4.23" xmlns="http://www.example.com/">
  <description>example.com</description>
  <reading />
  <connection>
    <sourceId>452342341</sourceId>  
    <organization/>
    <field>*</field>
  </connection>
  <source>
    <sourceId>452342341</sourceId>
    <connectionContext>
      <id />
      <name>testing</name>
      <description />
      <contextType>Section</contextType>      
      <organization/>
      <field>Demo Field</field>
      <section>testing</section>
      <subSection />
    </connectionContext>
    <Mode>Section</Mode>
    <activity>bell Testing</activity>
  </source>
</configuration> 
```

我想读取这个 xml 并`textboxes`以 windows 形式显示数据。

当我在列表框中选择 xml 文件时，我想从标签中读取第一组数据，从`connection`标签中读取第二组数据`connectionContext`，在文本框中显示值。

下面的代码有空值时的问题不起作用？？？

```
 private void DisplayFile(string path)
        {
            var doc = XDocument.Load(path);
            var ns = doc.Root.GetDefaultNamespace();
            var conn = doc.Root.Element(ns + "connection");

            textBox1.Text = conn.Element(ns + "sourceId").Value;
            textBox3.Text = conn.Element(ns + "description").Value;
            textBox4.Text = conn.Element(ns + "uri").Value;
            textBox5.Text = conn.Element(ns + "username").Value;

            var conn1 = doc.Root.Element(ns + "connectionContext");

            textBox7.Text = conn1.Element(ns + "field").Value;
            textBox8.Text = conn1.Element(ns + "bellName").Value;
            textBox9.Text = conn1.Element(ns + "id").Value;
            textBox10.Text = conn1.Element(ns + "bellboreName").Value;    
        } 
```

`Object reference not set to an instance of an object. Object reference not set to an instance of an object.`此字段的错误消息`(ns + "field").Value;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:14:21.440

`connectionContext`不在`source`文档根目录下，因此您要更改此内容：

```
var conn1 = doc.Root.Element(ns + "connectionContext"); 
```

对此：

```
var conn1 = doc.Root.Element(ns + "source").Element(ns + "connectionContext"); 
```

或者，在架构中允许更多的灵活性：

```
var conn1 = doc.Descendants(ns + "connectionContext").First(); 
```

# android - 第一次调用 WebViewClient 时页面加载速度较慢

> ID：10579176
> 
> 赞同：1
> 
> 时间：2012-05-14T07:33:06.880
> 
> 标签：android, android-webview, webviewclient

下面是我的 WebViewClient 代码。我通过单击按钮调用了该类。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.webview);

        webView = (WebView) findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                activity.setTitle("Loading...");
                activity.setProgress(progress * 100);

                if (progress == 100)
                    activity.setTitle(R.string.app_name);
            }
        });

        webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {
                // Handle the error
            }

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        });

        webView.loadUrl("http://mylink.com");
        // String customHtml =
        // "<html><body><h1>Hello, WebView</h1></body></html>";
        // webView.loadData(customHtml, "text/html", "UTF-8");

    }

} 
```

![错误图像](../Images/c567e11358a9189cb54bac3181c43ac4.png)

加载 WebViewClient 需要更多时间。我需要加快速度。有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:44:08.853

我认为 WebView 出于各种原因（例如 Web 缓存）在您的应用程序的临时目录中创建了一个数据库。第一次从应用程序调用 WebView 时会创建此数据库。在随后的调用中，它被重新使用。

因此，这个创造过程可能就是你正在经历的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:40:13.120

据我所知，您的代码没有任何问题。我强烈建议您检查您正在连接的 Web 服务器的性能，因为这很可能是您的问题的原因。特别注意服务器的响应时间。要测试 Web 视图的性能，请尝试将 url 设置为快速响应的网站，例如 google.com。

# android - 从 MIC 读取的 android AudioRecord 幅度

> ID：10579184
> 
> 赞同：11
> 
> 时间：2012-05-14T07:33:44.727
> 
> 标签：android, audio, record

我正在尝试录制来自 MIC 的声音并绘制实时图表。我能够记录和绘制图表。问题是使用下面的代码记录的值不准确，例如......下面的图像是我在没有声音时得到的。我已经看到使用 fft 的示例，但我不确定这是否对我的情况有任何帮助，因为我正在尝试绘制时域图并且我认为没有将其转换为频域的目的（目前）。其他人正在使用平均功率，这可能会有所帮助，但我不确定。

谢谢你的帮助。

![在此处输入图像描述](../Images/5c9f178856fa83bd022eb8aa941e9f19.png)

```
bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING);

    recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
            RECORDER_SAMPLERATE, RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING, bufferSize);

    short data [] = new short[bufferSize];

    while (!Thread.interrupted()) {

        recorder.startRecording();

        recorder.read(data, 0, bufferSize);

        recorder.stop();

        for (short s : data)
        {
            try {
                Thread.sleep((long) 300.00);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            postUI (Math.abs(s));
        }
    }

    recorder.release(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:41:43.627

尝试使用更高的采样率。最大值为 48000，但标准为 44100。

此外，麦克风可能只是在记录背景噪音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T12:53:01.233

这是@Gourneau 的答案，但有代码

```
AudioRecord recorder; // our recorder, must be initialized first
short[] buffer; // buffer where we will put captured samples
DataOutputStream output; // output stream to target file
boolean isRecording; // indicates if sound is currently being captured
ProgressBar pb; // our progress bar recieved from layout
while (isRecording) {
    double sum = 0;
    int readSize = recorder.read(buffer, 0, buffer.length);
    for (int i = 0; i < readSize; i++) {
        output.writeShort(buffer [i]);
        sum += buffer [i] * buffer [i];
    }
    if (readSize > 0) {
        final double amplitude = sum / readSize;
        pb.setProgress((int) Math.sqrt(amplitude));
    }
} 
```

[http://web.archive.org/web/20140709183733/http://developer.samsung.com/android/technical-docs/Displaying-Sound-Volume-in-Real-Time-While-Recording](http://web.archive.org/web/20140709183733/http://developer.samsung.com/android/technical-docs/Displaying-Sound-Volume-in-Real-Time-While-Recording)

# php - 如何在 PHP 中生成动态 PDF 文件？

> ID：10579187
> 
> 赞同：-3
> 
> 时间：2012-05-14T07:34:22.443
> 
> 标签：php, pdf, pdf-generation

大家好，

我有一个包含 5 步的表单，在最后一步中，用户单击提交，然后所有数据都将存储在数据库中。

现在我想在第一步之后生成 pdf，在我的表单第一步中有个人详细信息字段。因此，在第二步中，用户可以下载这些具有第一步数据的动态 pdf。我知道如何生成 PDF，只是想用动态变量来做到这一点。

但这里的问题是我没有数据可以从 db 这些所有字段存储在所有 sep 结束时。如何获取生成 PDF 文件的第一步数据。

提前致谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T07:36:00.767

您可以使用[FPDF](http://www.fpdf.org/)类。使用起来非常简单，就像在这个例子中一样：

```
<?php
require('fpdf.php');

$pdf = new FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial','B',16);
$pdf->Cell(40,10,'Hello World!');
$pdf->Output();
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T07:37:17.507

您可以在第一步中使用 session 来存储数据，然后使用诸如[TCPDF](http://www.tcpdf.org/)之类的许多库来生成 pdf。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T08:40:40.433

我认为[TCPDF FLOSS PHP 类](http://www.tcpdf.org/index.php)可能会对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T10:22:29.673

我认为饼干是最好的主意

```
<SCRIPT TYPE="text/javascript">
set_cookie( "name", "ajay", 1 );
set_cookie( "id", "101", 1 );
set_cookie( "gender", "male", 1 );

function set_cookie ( cookie_name, cookie_value,
    lifespan_in_days, valid_domain )
{
    // http://www.thesitewizard.com/javascripts/cookies.shtml
    var domain_string = valid_domain ?
                       ("; domain=" + valid_domain) : '' ;
    document.cookie = cookie_name +
                       "=" + encodeURIComponent( cookie_value ) +
                       "; max-age=" + 60 * 60 *
                       24 * lifespan_in_days +
                       "; path=/" + domain_string ;
}

</SCRIPT> 
```

现在使用 FPDF

```
<?php
require('../fpdf.php');

$pdf = new FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial','B',16);
$pdf->Cell(40,10,'Hello World!');

$pdf->Cell(80,10,$_COOKIE['name']);
$pdf->Cell(80,10,$_COOKIE['id']);

$pdf->Output();
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-19T05:41:02.797

如果您需要从 Word 或 ODT 模板生成复杂的动态 PDF 文档，您可以尝试[Docxpresso](http://www.docxpresso.com)

# sql-server-2008 - 带有 Ion_Auth 和 MS SQL 的 CodeIgniter

> ID：10579190
> 
> 赞同：0
> 
> 时间：2012-05-14T07:34:43.310
> 
> 标签：sql-server-2008, codeigniter, authentication

我正准备使用 CodeIgniter 2.1.0 构建应用程序。我的数据库在 MS SQL 2008 上。其中一个要求是用户身份验证，所以我想我会先解决这个问题。安全性不是我的强项，所以我决定使用 Ion_Auth，而不是自己酿造，因为有人提到它与 MS SQL 配合得很好。

我按照说明设置了所有内容，并运行了 Ion_Auth 附带的脚本来创建 MS SQL 数据库。脚本中有一些错误，但经过一些调整（MS SQL 不喜欢约束——我可以没有这些约束，所以我删除了约束行；还有一个重复的列，但我检查了 MySQL 脚本并确定该列实际上应该是什么），我能够运行脚本在我的数据库中重新创建必要的表。

但是，当我使用默认管理员用户名和密码（admin@admin.com 和密码）登录示例页面时，我收到一条错误消息，提示“登录错误”。

在排除了拼写错误、错误的用户名和密码等之后，我打开了 SQL 分析器以查看是否正在向服务器发送有效的查询。确实发送了一个有效的查询——我在 SQL 控制台上运行了查询，它返回了正确的记录。

于是我尝试重设密码，但收到一条消息说“无法重设密码”。

我的下一个想法是创建一个新用户。我必须对代码进行一些调整（无需以管理员身份登录即可创建新用户；由于数据类型错误而在 IP 地址中硬编码；由于算术溢出而注释掉了日期时间字段），并且能够创建新用户没有收到错误。

然后我以新用户身份登录，再次收到“登录错误”消息。

在这一点上，我完全被卡住了。我不知道出了什么问题，我不知道接下来应该尝试什么。

如果有人将 Ion_Auth 与 MS SQL 一起使用，如果您能分享有关如何使其运行的任何指示，我将不胜感激。或者，作为替代方案，建议为 CodeIgniter 提供一个身份验证插件，该插件绝对可以与 MS SQL 一起使用，并且非常容易设置（我已经尝试过 Tank_Auth ......需要进行太多自定义才能使其与 MS SQL 一起使用） . 谢谢。

# python - 带有 Python 变量的 Django 重定向

> ID：10579191
> 
> 赞同：0
> 
> 时间：2012-05-14T07:34:51.997
> 
> 标签：python, django

所以我目前正在处理一个 Django 项目，其中一个具有 id 的对象是从一个表单创建的，并且第一个表单重定向到的表单中需要该 id。有没有办法可以使用重定向传递这个 id（在 python 中）？我似乎无法弄清楚如何做到这一点，但我确信有一种方法，因为它看起来非常有用。

谢谢大家，亚历克斯

# algorithm - CouchDB - 带有排名的分层评论。黑客新闻风格

> ID：10579200
> 
> 赞同：11
> 
> 时间：2012-05-14T07:36:05.010
> 
> 标签：algorithm, data-structures, tree, couchdb

我正在尝试使用 CouchDB 实现一种以 Hacker News 提供的方式显示评论的基本方式。不仅按层次排序，而且树的每一级都应按“点”变量排序。

我的想法是，我想要一个视图以我除外的顺序返回它，而不是进行很多 Ajax 调用，例如，检索它们并使它们看起来像是正确排序的。

这是我到目前为止得到的：

*   每个文档都是一个“评论”。
*   每个评论都有一个属性`path`，它是一个包含其所有父项的有序列表。

例如，假设我有 4 条评论（带有 _id 、`1`和`2`）。评论是的孩子，评论是的孩子，评论也是的孩子。这就是数据的样子：`3``4``2``1``3``2``4``1`

```
{ _id: 1, path: ["1"] },
{ _id: 2, path: ["1", "2"] },
{ _id: 3, path: ["1", "2", "3"] }
{ _id: 4, path: ["1", "4"] } 
```

这对于层次结构非常有效。一个简单`view`的东西已经按照我想要的方式返回。

当我想独立订购树的每个“级别”时，问题就来了。因此，例如文档`2`和`4`属于同一分支，但在该级别上按其 ID 排序。相反，我希望它们根据我想要添加到路径的“点”变量进行排序 - 但似乎无法理解我可以在哪里添加这个变量以使其按照我想要的方式工作。

有没有办法做到这一点？考虑“点”变量会随时间变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T18:39:46.100

因为每个级别都需要按分数递归排序，所以 Couch 需要知道每个父母的分数才能使这项工作按您希望的方式进行。

以以下分数为例 (1: 10, 2: 10, 3: 10, 4: **20** )

在这种情况下，您希望订单如下所示：

```
.1
.1.4
.1.2
.1.2.3 
```

您的文档需要一个像这样的**分数**数组：

```
{ _id: 1, path: [1], scores: [10] },
{ _id: 2, path: [1, 2], scores: [10,10] },
{ _id: 3, path: [1, 2, 3], scores: [10,10,10] },
{ _id: 4, path: [1, 4], scores: [10,20] } 
```

然后，您将在视图中使用以下排序键。

```
emit([doc.scores, doc.path], doc) 
```

该**路径**被用作决胜局，因为在某些情况下兄弟评论具有完全相同的分数。如果没有决胜局，他们的后代可能会失去他们的分组（按祖先链）。

*注意：* 这种方法将返回从低到高的分数，而您可能需要分数（从高到低）和路径/决胜局（从低到高）。因此，解决方法是用每个分数的倒数填充分数数组，如下所示：

```
{ _id: 1, path: [1], scores: [0.1] },
{ _id: 2, path: [1, 2], scores: [0.1,0.1] },
{ _id: 3, path: [1, 2, 3], scores: [0.1,0.1,0.1] },
{ _id: 4, path: [1, 4], scores: [0.1,0.2] } 
```

然后`descending=true`在您请求查看时使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T04:19:32.000

也许任何有趣的人都可以在这个问题上使用各种解决方案：

[http://mail-archives.apache.org/mod_mbox/couchdb-dev/201205.mbox/thread](http://mail-archives.apache.org/mod_mbox/couchdb-dev/201205.mbox/thread) -> 主题“分层评论黑客新闻风格”16/05/2012

# android - 如何在我的应用程序中创建这种类型的聊天布局？

> ID：10579203
> 
> 赞同：3
> 
> 时间：2012-05-14T07:36:26.760
> 
> 标签：android, xml, android-layout, chat

我正在开发一个聊天应用程序，我想创建一个聊天屏幕布局，如以下屏幕。

![聊天屏幕布局](../Images/007af86783d86723bd07fa25c02d3f32.png)

目前我正在为我的聊天文本使用 ListView，但问题是要阅读我必须向下滚动的长聊天，我的屏幕不会自动滚动。

我想要这种气泡式的聊天布局。如何开发这种聊天布局？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T07:48:13.520

您在这里需要的是一个带有页眉和页脚部分的布局，主视图为`ListView`.

这`ListView`应该有一个自定义`Adapter`来显示消息项。

要实现这种类似气泡的显示，您的 itemRenderer 应该能够处理状态 ( `fromMe`- `fromOther`)。

要拥有气泡，您应该将不同的`backgroundDrawable`（指向左侧和右侧的气泡 9 补丁）附加到不同的状态。

如果您卡在某个地方，请分享相关的代码片段和 logcat 输出，以便我们进一步帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T07:39:43.570

尝试查看[此](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)内容以创建 listView 的自定义视图。

我会创建一个父视图和一个传入的视图和一个从它继承的传出视图，并根据它们的颜色和重力改变颜色和重力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T07:45:21.700

您需要以下内容：

1.  一个 ListActivity，ListView XML 布局。
2.  ListActivity 使用的 BaseAdapter。
3.  BaseAdapter getView 将膨胀每一行。
4.  在每一行都有一个带有气泡图像和聊天文本的行视图。
5.  在 Listview 页脚有一个 EditText 视图来键入聊天。

使用这些作为参考：

[http://developer.android.com/reference/android/app/ListActivity.html](http://developer.android.com/reference/android/app/ListActivity.html)

[http://developer.android.com/reference/android/widget/BaseAdapter.html](http://developer.android.com/reference/android/widget/BaseAdapter.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T07:53:03.970

好的，如果我理解正确，您需要做的就是为 Listview 实现自动滚动。

如果是这样，那么`smoothScrollToPosition`每次添加某些内容时尝试调用。我不知道你的课是什么样子，但也许可以运行这样的东西（伪代码）

```
customListview.addNewChat(...);
customListView.smoothScrollToPosition(customListView.getCount()); 
```

# gdi - 如何使用 Direct2D api 滚动窗口内容？

> ID：10579208
> 
> 赞同：0
> 
> 时间：2012-05-14T07:36:55.323
> 
> 标签：gdi, direct3d, direct2d

我想通过 ID2D1RenderTarget 滚动使用 Direct2D api 执行绘图的窗口内容。

在 GDI 中，我可以使用 CreateCompatibleDC 创建一个缓冲区，然后使用 ScrollDC 滚动其内容，重绘暴露区域并将缓冲区 BitBlt 到窗口。

我在 Direct2D 中看不到任何必要的 API 来执行相同的操作。如何在不使用 GetDC（和 GDI）以及不使用自己的第三个缓冲区的情况下实现相同的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:51:45.783

你可以使用翻译。

MSDN：平移 2-D 对象是沿 x 轴、y 轴或两者移动对象。

```
m_pRenderTarget->SetTransform(D2D1::Matrix3x2F::Translation(20, 10)); 
```

更多细节在这里 [http://msdn.microsoft.com/en-us/library/windows/desktop/dd756691(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756691(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T06:40:38.763

Direct2D 中没有滚动 API。获得硬件加速滚动的最佳解决方案是使用第二个缓冲区。在`ID2D1RenderTarget`您要滚动的地方，使用`CreateCompatibleRenderTarget()`创建一个`ID2D1BitmapRenderTarget` （缓存这个家伙是个好主意），其像素大小`ID2D1RenderTarget::GetPixelSize()`与从`ID2D1RenderTarget::GetDpi()`. 然后，用于`ID2D1BitmapRenderTarget::GetBitmap()`获取底层`ID2D1Bitmap`. 接下来，使用`ID2D1Bitmap::CopyFromRenderTarget()`复制内容并调整您滚动的距离。然后将该位图的内容复制回原始渲染目标，重新渲染未覆盖的区域，并呈现（通过 EndDraw）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T17:04:46.757

在 DXGI 1.2 中有一个带 参数的新`IDXGISwapChain1::Present1`API 调用。`DXGI_PRESENT_PARAMETERS`它包含支持滚动窗口内容的功能。

# windows - 动态添加事件

> ID：10579216
> 
> 赞同：0
> 
> 时间：2012-05-14T07:37:35.480
> 
> 标签：windows, winforms, events, dynamic, picturebox

我有 n 个图片框。他们应该动态执行以下事件：

```
private void pictureBoxMouseHover(object sender, EventArgs e) 
{
    if (sender is PictureBox)
    {
        ((PictureBox)sender).BorderStyle = BorderStyle.FixedSingle;
    }
}

private void pictureBoxMouseLeave(object sender, EventArgs e)
{
    if (sender is PictureBox)
    {
        ((PictureBox)sender).BorderStyle = BorderStyle.None;
    }
}

private void MainMaster_Load(object sender, EventArgs e)
{
    foreach (var control in Controls)
    {
        if (sender is PictureBox)
        {
            PictureBox pb=new PictureBox();
            pb.Name = sender.ToString();
            pb.MouseHover += new System.EventHandler(this.pictureBoxMouseHover);
            pb.MouseLeave += new System.EventHandler(this.pictureBoxMouseHover);
        }
    }
} 
```

我找不到这有什么问题；请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:57:39.790

[dbaseman](https://stackoverflow.com/users/1001985/dbaseman)是对的，您在遍历控件时使用了错误的变量。

但是，如果您想将此行为添加到所有图片框，那么更好的解决方案是创建自定义图片框，并将其简单地放置在您的表单上：

```
public class MyPictureBox : PictureBox
{
    protected override void OnMouseHover(EventArgs e)
    {
        BorderStyle = BorderStyle.FixedSingle;
        base.OnMouseHover(e);
    }

    protected override void OnMouseLeave(EventArgs e)
    {
        base.OnMouseLeave(e);
        BorderStyle = BorderStyle.None;
    }
} 
```

创建此类，编译应用程序并将这些自定义图片框从工具箱拖到您的表单中。当鼠标悬停在图片框上时，它们都会显示边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:47:07.650

我认为错误在这里：

 ~~~~```
foreach (var control in Controls)
{
    if (sender is PictureBox) 
```~~  ~~**在这种情况下，发送**者将是窗口。我想你有意**控制**。

```
foreach (var control in Controls)
{
    if (control is PictureBox) 
```~~~~

# mysql - SQL 查询“找到产生最多收入的文章？”

> ID：10579221
> 
> 赞同：0
> 
> 时间：2012-05-14T07:38:01.437
> 
> 标签：mysql, sql

我想做一个 SQL 查询，向我显示产生最多收入的文章。（在商店）

```
 Table = orderrader

   rownumber    articlenumber   ordernumber price   amount
   1            11              1           8624    3
   2            6               1           4794    2
   3            17              1           8755    3
   4            1               1           7803    1
   5            16              1           8987    3
   6            10              1           4575    3
   7            4               1           8747    1
   8            15              1           5439    3
   9            11              2           8624    3
   10           1               2           7803    1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:46:22.167

以下 sql 语句将仅返回一个具有最大收入的文章编号。

```
Select  articlenumber, sum(price*amount) as totalincome
from orderrader
group by articlenumber 
order by sum(price*amount) desc LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:41:17.490

```
SELECT articlenumber
FROM orderrader
WHERE (price * amount) = (SELECT MAX(price * amount) FROM orderrader) 
```

这应该可以解决问题，我在我自己的数据库上检查了它。它只会给出最高价格*金额的那个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T07:41:25.407

```
SELECT articlenumber, SUM(price*amount) AS income
FROM table
GROUP BY articlenumber
ORDER BY income DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:40:44.010

```
select articlenumber, sum(price*amount) as s from orderrader group by articlenumber order by s desc; 
```

# asp.net-mvc - 如何在部分视图中访问父视图中定义的 PageData？

> ID：10579222
> 
> 赞同：4
> 
> 时间：2012-05-14T07:38:05.667
> 
> 标签：asp.net-mvc, razor

我正在尝试访问部分视图中视图中定义的 PageData。如果我将 PageData 作为模型传递给 Partial 视图，我就可以访问它。我不喜欢这种方法，因为它不是视图的模型。部分视图将拥有自己的 PageData 实例。那么有没有办法访问父母的 ViewData 呢？这是示例代码... 查看代码

```
@{
    ViewBag.Title = "Home Page";
    PageData["MyName"] = "Sathi";
}
<h2>@ViewBag.Message</h2>
<h3>@WebPageContext.Current.Page.PageData.Count()</h3>
<h3>@PageData["MyName"]</h3>
<h3>@WebPageContext.Current.Page.PageData.Count()</h3>
@{ Html.RenderPartial("_Partial"); }
Parent view ends here 
```

部分视图代码

```
This is a partial view
<h3>@PageData["MyName"]</h3><-- Empty
<h3>@WebPageContext.Current.Page.PageData.Count()</h3> 
```

# java - 确定最高和最低数字

> ID：10579225
> 
> 赞同：0
> 
> 时间：2012-05-14T07:38:11.970
> 
> 标签：java

我目前正在编写一个程序，用户必须输入 10 个数字，然后输出将是最大数字和最小数字。我的代码有问题，但找不到。

```
int highest=0, lowest=0, num=0;
Scanner scan = new Scanner(System.in);

for (int i=0; i<10; i++) {
    System.out.print("Enter a number:");
    num = scan.nextInt();
}

if (num > highest) {           
    highest = num;
}         
else if(num < lowest) {             
    lowest = num;
}

System.out.println("Highest number is: " + highest);
System.out.println("Lowest number is: " + lowest); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T07:40:23.280

Initialise your values differently:

```
int highest = Integer.MIN_VALUE;
int lowest = Integer.MAX_VALUE; 
```

If you initialise them both to zero, you will never have a "highest" value below zero, or a "lowest" value above zero

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T07:42:11.623

You should put your two `if` conditions in the `for` loop else you will only compare the last number. And lowest shouldn't be set to 0 but to Integer.MAX_VALUE

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T07:44:38.483

您的初始化和逻辑存在一些问题：

```
int highest=Math.MIN_VALUE;
int lowest=Math.MAX_VALUE;
int num=0;
Scanner scan = new Scanner(System.in);

for(int i=0; i<10; i++){

   System.out.print("Enter a number:");
   num = scan.nextInt();
   if (num > highest){

    highest = num;
   }

   if(num < lowest){

    lowest = num;
   }

}

   System.out.println("Highest number is: " + highest);
   System.out.println("Lowest number is: " + lowest); 
```

您还应该使用 2 个`if`条件而不是`else if`. 如果您只有一个数字，那么您最终可能会得到类似于`highest`等于您输入的某个数字的结果，而`lowest`仍然等于`Math.MAX_VALUE`。这可能会导致混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T07:49:23.490

您隐含地假设最低和最大为 0，现在可能就是这种情况，试试这个代码片段..

```
class Main{
        public static void main(String args[]){
                int highest=0, lowest=0, num=0;
                Scanner scan = new Scanner(System.in);
                highest = lowest = scan.nextInt();
                for(int i=1; i<10; i++){
                       System.out.print("Enter a number:");
                       num = scan.nextInt();
                       if (num > highest){
                           highest = num;
                       }
                       if(num < lowest){
                           lowest = num;
                    }
                    System.out.println("Highest number is: " + highest);
                    System.out.println("Lowest number is: " + lowest);
               }
        }
} 
```

# java - JSP 上的 Java 文本修改

> ID：10579228
> 
> 赞同：0
> 
> 时间：2012-05-14T07:38:31.340
> 
> 标签：java, forms, webforms

我的 .jsp 页面上有一个表单，它将密码发送回服务器。

```
<form name="login" action="j_security_check" method="post">
    <input type="text" name="j_username">
    <input type="password" name="j_password">
    <input type="submit" name="Login"> </form> 
```

我想在处理 j_password 之前对其进行一些处理。以前，我通过调用执行类似于以下操作的函数，通过一些处理代码实现 JavaScript 来做到这一点：

```
<script type="text/javascript" src="sha256.js">
<script> function hash() { document.login.j_password.value = '@' +
    sha256_digest(document.login.j_password.value); } </script>
...
...
    <input type="submit" value="Login" onClick="hash()"> </form> 
```

现在，我正在尝试实现类似的功能，但我尝试使用 Java，而不是使用 JavaScript。我的 .java 的主要目的是加载 public.key，获取 j_password，执行加密，并将 j_password 替换为其加密形式。

```
// RSA.java Pseudocode
1) Get string from textbox "j_password"
2) Load public key from public.key
3) Perform encryption on j_password with key
4) Load cipher to textbox "j_password" 
```

但是，我看到的大多数示例都实现了“<% %>”调用，但这给我的印象是它会在页面加载时执行，而不是在单击登录按钮时执行。我还注意到我可以使用 javac 将其编译为 .class 并将其加载为“”，但是可以使用此方法修改 j_password 的输入吗？虽然它是一个 .jsp 并且我可以使用“<% %>”直接实现 Java，但我认为它在当前的 JSP 标准中是不可接受的。有没有人有任何建议或想法可以为我指明正确的方向？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:46:53.577

您可以使用[过滤器](http://docs.oracle.com/javaee/5/api/javax/servlet/Filter.html)进行加密，但它不会在客户端。正如您在该列表中看到的那样，过滤器也用于加密，就像您需要的目的一样。干预某事的唯一方法是使用过滤器。但是如果你需要客户端加密，唯一的出路就是 JavaScript。

此外，您可以查看[this](https://stackoverflow.com/questions/4121629/password-encryption-at-client-side)和[this](https://stackoverflow.com/questions/3715920/about-password-hashing-system-on-client-side)。

第二个链接很好地解释了在客户端散列密码。其中一个答案提到了这一点：

对于这个问题，更安全的身份验证协议通常会跳过许多环节，以确保这种重放攻击不起作用，通常是通过允许客户端选择一堆随机位，这些位与密码一起散列，并且还以明文形式提交给服务器。

在服务器上：

*   生成一些随机数
*   将这些位（以明文形式）发送给客户端

在客户端：

*   生成一些随机位
*   连接密码、服务器的随机位和客户端的随机位
*   生成上述哈希
*   向服务器提交随机数据（以明文形式）和散列

由于服务器知道自己的随机信息以及客户端的随机位（它以明文形式获取它们），因此它可以执行基本相同的转换。该协议确保，只要双方每次生成不同的“噪声位”，任何人都可以在以后使用该信息来使用记录的信息进行虚假身份验证（除非使用了非常弱的算法......），进行握手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:47:09.450

您是否尝试加密密码以提交到服务器？如果是这样，您不能使用 JSP，因为处理是在服务器上执行的，而不是在客户端上执行的。

JSP 是一种使用 Java 构建动态网页的方法，但所有处理指令都被转换为 servlet，然后它们遵循常规的 servlet 生命周期。如果要在客户端加密，则需要使用客户端语言。请记住，如果您使用 SSL 交付/接收您的提交，数据加载将自动加密。

如果您要将存储转换为数据库，那么您最好为表单处理程序使用标准 servlet。

# primefaces - Primefaces 对话框的正确构造

> ID：10579230
> 
> 赞同：7
> 
> 时间：2012-05-14T07:38:35.603
> 
> 标签：primefaces

我对 Primefaces 3 对话框的构造感到困惑。

我在 SO 中看到了具有这种模式的问题。表单在对话框之外。

```
<h:form>
  <p:dialog id="dialog" modal="true" widgetVar="dlg">
  </p:dialog>
</h:form> 
```

但其他问题有这个。

```
<p:dialog id="dialog" modal="true" widgetVar="dlg">
    <h:form>      
    </h:form>
</p:dialog> 
```

Primefaces 展示[http://www.primefaces.org/showcase/ui/dialogLogin.jsf](http://www.primefaces.org/showcase/ui/dialogLogin.jsf)支持后者。

如果有任何正当理由使用一个而不是另一个，我会感到困惑？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T08:19:36.343

你总是最好用这样的`<h:form>`地方`<p:dialog`

```
<p:dialog id="dialog" modal="true" widgetVar="dlg">
    <h:form>      
    </h:form>
</p:dialog> 
```

因为您的对话框内容可能会从您的页面中“取出”并附加到您的 DOM 树中的其他位置，因此如果您将对话框放置在某个表单中，它可能会导致您的对话框*重新定位到其他位置*并导致您的所有按钮/链接和其他元素停止工作（这是 SO 中一个非常常见的问题）

因此，为了安全起见，请将`<h:form>`标签放在标签`<p:dialog`内

另一个例子是当你`appendToBody="true"`在对话框中使用时：

> 如果对话框位于 h:form 组件内并且启用了 appendToBody，则浏览器上的对话框将位于表单之外，并可能导致意外结果。在这种情况下，在对话框中嵌套一个表单。

# xamarin.android - Binding project for UltraliteJNI12.jar - "already defines a member" error

> ID：10579234
> 
> 赞同：0
> 
> 时间：2012-05-14T07:39:06.600
> 
> 标签：xamarin.android

We need to use a Sybase Ultralite database in our Mono for Android app (it's a port of an existing application, synchronising with a Sybase server database).

I'm not aware of an existing Mono binding, so I'm setting off on the task of creating a binding library using the new project type in 4.2\.

So... I've added UltraliteJNI12.jar, set its build action to InputJar, and clicked 'build'.

I get an error: Com.Ianywhere.Ultralitejni12.Implementation.JniDbMgr' already defines a member called 'Release' with the same parameter types

and yes, when I look at the generated source, there are two identical Release members declared.

Is there a way of working round this? I've read the tutorial and can't see anything there which points to a solution.

Thanks, and apologies for what may be a stupid question - I'm just starting out on this!

James

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:57:45.917

答案（由 Jonathan Pryor 在 Mono for Android 列表中提供）是通过将以下内容添加到*metadata.xml*来重命名发布实例之一：

```
 <attr
  path="/api/package[@name='com.ianywhere.ultralitejni12.implementation']/class  [@name='JniDbMgr']/method[@name='release']"
  name="managedName">Release2
</attr> 
```

# c# - ComponentResolutionException after upgrading to Castle 3.0

> ID：10579236
> 
> 赞同：2
> 
> 时间：2012-05-14T07:39:30.183
> 
> 标签：c#, wcf, castle-windsor, castle

I've just upgraded a solution from .NET 3.5 to .NET 4 In the same time, I've upgraded all external libraries to the latest version, so Castle is now upgraded from 2.5.2 to v3.0

I've some code that register db access that throw now an Exception when I try to resolve:

> [Castle.MicroKernel.ComponentResolutionException] {"Could not obtain scope for component DF.MailFlowAdapter. This is most likely either a bug in custom IScopeAccessor or you're trying to access scoped component outside of the scope (like a per-web-request component outside of web request etc)"} Castle.MicroKernel.ComponentResolutionException

The component is registered this way:

```
Container
    .AddFacility<WcfFacility>()
    .AddFacility<DataAccessAdapterFacility>()
    .Register(Component
        .For<SD.LLBLGen.Pro.ORMSupportClasses.IDataAccessAdapter>()
        .ImplementedBy<MailFlowAdapter>()
        .LifeStyle.PerWcfOperation()) 
```

The problem comes from the PerWcfOperation LifeStyle, but I don't know why: The project is a WCF project and the component is resolved when calling a WCF method. This registration is working fine in the branch that use Castle 2.5.

The exception is thrown when Validating the wcf login/pwd (in a IAuthorizationPolicy that use a UserNamePasswordValidator), because I resolve an IDataAccessAdapter (to check login/pwd in the db).

Other piece of information:

The DataAccessAdapterFacility is an old code that register a component activator, I had to slightly change de code because model.Service changed to model.Services:

```
void Kernel_ComponentModelCreated(ComponentModel model)
{
    foreach (var service in model.Services)
    {
        if (service == typeof(SD.LLBLGen.Pro.ORMSupportClasses.IDataAccessAdapter))
        {
            model.CustomComponentActivator = typeof(DataAccessAdapterActivator);
        }
    }
} 
```

And the DataAccessAdapterActivator has in charge to create the object using a connection string in the config file:

```
protected override object InternalCreate(CreationContext context)
{
    var connectionString = string.Empty;
    if (ConfigurationManager.ConnectionStrings["Main"] != null)
        connectionString = ConfigurationManager.ConnectionStrings["Main"].ConnectionString;
    return new MailFlowAdapter(connectionString);
} 
```

I think the code with DataAccessAdapterFacility/DataAccessAdapterActivator could be simplify using Factory but it's not the question here :)

So does someone have an idea on why I can't use PerWcfOperation lifestyle ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:05:32.993

我不相信 OperationContext.Current 在调用自定义 UserNamePasswordValidator 时可用。是否可以为该组件使用另一种生活方式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:22:53.623

好的，让我们在城堡邮件列表上继续我与 Craig Neuwirt 的讨论：

*   行为发生了变化，在 v2.5 中是依靠短暂的生活方式。但由于不一致（没有关于组件何时为 PerWcfOperation 以及何时为 Transient 的信息），因此已将其删除。
*   可以使用自定义生活方式范围访问器来做同样的事情

我不会在此处发布我的代码，因为一旦您阅读了在[castlecontrib](https://github.com/castleprojectcontrib/Castle.Windsor.Lifestyles)项目中如何完成混合生活方式，这将是微不足道的

# twitter-bootstrap - Twitter Bootstrap Modal Window

> ID：10579241
> 
> 赞同：1
> 
> 时间：2012-05-14T07:39:59.350
> 
> 标签：twitter-bootstrap, modal-dialog

On clicking a Button i want to show a Modal Window.

This is what i have implemented.

```
<a class="btn addIdeaBtn" data-toggle="modal" href="#addIdea" >Launch Modal</a> 
<!-- Model Window
    ================================================== --> 
<!-- Placed at the end of the document so the pages load faster -->
<div class="modal hide fade in" id="addIdea">
  <div class="modal-header">
    <button class="close" data-dismiss="modal">×</button>
    <h3>Add Idea</h3>
  </div>
  <div class="modal-body">
    <form action="" method="post">
      <textarea id="addIdeaPopUp" class="tinymce" name="" cols="" rows=""></textarea>
    </form>
  </div>
  <div class="modal-footer"> <a href="home.html" class="btn">Close</a> <a href="home.html" class="btn btn-primary">Add Idea</a> </div>
</div> 
```

When i click the Button the modal window appears and then vanishes :P

> [http://mink7.com/projects/cmrc/idea_exchange.html](http://mink7.com/projects/cmrc/idea_exchange.html)

The button is at the bottom of the screen to the left sticking as a footer.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:56:37.237

尝试`in`从您的模态中删除该类。`hide`JS 自动在和之间切换`in`。由于您的按钮设置为切换模式，它会消失，因为它认为它是可见的。

意义：`<div class="modal hide fade" id="addIdea">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:38:27.757

我不确定为什么在没有看到更多源代码的情况下会发生这种情况......但是：将“tinymce”类添加到您的文本区域是导致窗口消失的原因。

tinymce 的某些东西必须与引导程序冲突。

您可能需要手动初始化引导模式窗口或注意 tinymce 是如何初始化自身的。

希望这足以让您走上正确的道路。

# c# - Displaying a content page as popup in asp.net,using

> ID：10579242
> 
> 赞同：1
> 
> 时间：2012-05-14T07:40:04.043
> 
> 标签：c#, javascript, asp.net, popup, master-pages

I have a content page(Say.. invoice.aspx) in asp.net application with master pages.

The content page(invoice.aspx) is using a gridview, which displays records from database.

Currently i am navigating to this page using - Response.redirect("invoice.aspx") and this is working fine.

But i need to display this page as pop-up from calling page, so that this popup invoice can be seen on the top of other pages.

Please help me if this can be done using javascript or some other way. Thanks in advance..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:49:57.763

页面弹出可以使用 div 作为具有不同样式（不透明度、窗口位置、大小等）的容器来实现，并且具有比页面其余部分更高的 z-index。

因此基本上你需要一个像

```
<div class="overlayOuter"> 
    <div class="overlayInner">
      <!-- external content to be loaded here -->
    </div>
  </div> 
```

现在使用 AJAX 将`invoice.aspx`页面加载到内部容器并显示容器并降低外部容器的不透明度。

应该有图书馆可以让你这样做。你需要自己去探索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:48:53.973

您可以在上述情况下使用模式弹出窗口：

一个例子可以在这里找到：[http ://sandbox.scriptiny.com/tinybox2/](http://sandbox.scriptiny.com/tinybox2/)

它很简单，您需要编写的代码并不多，还可以将弹出窗口作为 iframe 加载，因此可以在不回发父页面的情况下处理回发，或者您可以使用 ajax

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:36:10.827

```
 function OpenWindow(strChildPageUrl) {
          var testwindow = window.open(strChildPageUrl, "Child", "width=700px,height=650px,top=0,left=0,scrollbars=1");
          testwindow.moveTo(100, 0);
      }

  </script> 
```

# asp.net - Scriptcontrol - bind client & server properties

> ID：10579248
> 
> 赞同：2
> 
> 时间：2012-05-14T07:40:27.623
> 
> 标签：asp.net, scriptcontrol, msscriptcontrol

Is it possible to bind properties on the client and server side in Scriptcontrol, so when I set property in javascript, change will be visible also in code behind and when I set property in code behind, change will be visible in javascript?

I can't get it work like above - it is set initially, when I set property where scriptcontrol is declared, but when I change it later it is still the same as before...

EDIT: I try to do a ProgressBar for long postbacks in our ASP.NET application. I have tried many options but none works for me... I want to set progress value in code behind and has it updated in view during long task postback.

Code for ScriptControl: C#:

```
public class ProgressBar : ScriptControl
{
    private const string ProgressBarType = "ProgressBarNamespace.ProgressBar";
    public int Value { get; set; }
    public int Maximum { get; set; }

    protected override IEnumerable<ScriptDescriptor> GetScriptDescriptors()
    {
        this.Value = 100;
        this.Maximum = 90;
        var descriptor = new ScriptControlDescriptor(ProgressBarType, this.ClientID);

        descriptor.AddProperty("value", this.Value);
        descriptor.AddProperty("maximum", this.Maximum);

        yield return descriptor;
    }

    protected override IEnumerable<ScriptReference> GetScriptReferences()
    {
        yield return new ScriptReference("ProgressBar.cs.js");          
    }
} 
```

Javascript:

```
Type.registerNamespace("ProgressBarNamespace");

ProgressBarNamespace.ProgressBar = function(element) {
    ProgressBarNamespace.ProgressBar.initializeBase(this, [element]);
    this._value = 0;
    this._maximum = 100;
};

ProgressBarNamespace.ProgressBar.prototype = {
    initialize: function () {
        ProgressBarNamespace.ProgressBar.callBaseMethod(this, "initialize");
        this._element.Value = this._value;
        this._element.Maximum = this._maximum;

        this._element.show = function () {
            alert(this.Value);
        };
    },
    dispose: function () {
        ProgressBarNamespace.ProgressBar.callBaseMethod(this, "dispose");
    },
    get_value: function () {
        return this._value;
    },
    set_value: function (value) {
        if (this._value !== value) {
            this._value = value;
            this.raisePropertyChanged("value");
        }
    },
    get_maximum: function () {
        return this._maximum;
    },
    set_maximum: function (value) {
        if (this._maximum !== value) {
            this._maximum = value;
            this.raisePropertyChanged("maximum");
        }
    }
};

ProgressBarNamespace.ProgressBar.registerClass("ProgressBarNamespace.ProgressBar", Sys.UI.Control);
if (typeof (Sys) !== "undefined") Sys.Application.notifyScriptLoaded(); 
```

I'll appreciate any way to implement this progress bar...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:47:01.477

就个人而言，我经常使用隐藏字段来执行此操作。请记住，隐藏字段不安全并且可能有其他缺点，因为它们实际上并没有隐藏它们的值，只是简单地不显示它。

ASPX 标记

```
<asp:HiddenField ID="hiddenRequest" runat="server" ClientIDMode="Static" /> 
```

ASPX.CS 后面的代码

```
 public string HiddenRequest
    {
        set
        {
            hiddenRequest.Value = value;
        }
        get
        {
            return hiddenRequest.Value;
        }
    } 
```

页面 JAVASCRIPT（使用 jQuery）

```
$('#hiddenRequest').val('MyResult'); 
```

这样，我可以使用一个变量访问相同的字段，从客户端和服务器端访问。

# android - why drawable still holds reference of textview on article "Android - Avoiding Memory Leaks"

> ID：10579259
> 
> 赞同：3
> 
> 时间：2012-05-14T07:41:28.500
> 
> 标签：android

Article: [http://developer.android.com/resources/articles/avoiding-memory-leaks.html](http://developer.android.com/resources/articles/avoiding-memory-leaks.html) metioned that:

```
private static Drawable sBackground;

@Override
protected void onCreate(Bundle state) {
  super.onCreate(state);

  TextView label = new TextView(this);
  label.setText("Leaks are bad");

  if (sBackground == null) {
    sBackground = getDrawable(R.drawable.large_bitmap);
  }
  label.setBackgroundDrawable(sBackground);

  setContentView(label);
} 
```

> When a Drawable is attached to a view, the view is set as a callback on the drawable.

That's true, drawable will hold that view as callback,

```
public void setBackgroundDrawable(Drawable d) {
        ......
            d.setCallback(this); 
```

But when screen orientation changes, drawable's callback will be reset as the new activity context. I think the previous textView will be detached from the static drawble, so that textview and according activity became recyclable.

So could anyone explain me in details? Thanks.

# php - php/javascript绘图工具

> ID：10579261
> 
> 赞同：0
> 
> 时间：2012-05-14T07:41:42.150
> 
> 标签：php

我可以使用 GD 或其他东西通过编写几行代码来绘制用户选择的形状，但是是否有一个库已经在处理它？

用户只能选择 4-5 个形状，并且还需要放置文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:50:14.657

如果你想要我认为你想要（在浏览器中绘制而不使用服务器端脚本）查看这篇文章，也许你会找到你需要的东西：

[10-jquery-绘图插件](http://www.jquery4u.com/plugins/10-jquery-drawing-plugins/)

享受！

# javascript - 函数不显示来自 JSON 的数据

> ID：10579263
> 
> 赞同：0
> 
> 时间：2012-05-14T07:41:51.870
> 
> 标签：javascript, jquery, json, getjson

在我的 webapp 中，我有一个页面，我使用 getJSON 从服务器获取数据。Firebug 显示它以应有的方式从服务器获取 JSON，但未显示任何数据。可能是什么问题呢？这是我的代码的样子：

```
 $('#detailsPage').live('pageshow', function(event) {
    var id = getUrlVars()["id"];
    $.getJSON(serviceURL + 'getemployee.php?id='+id+'&callback=?', displayEmployee);
});

function displayEmployee(data) {
    var employee = data.item;
    $('#employeePic').attr('src', 'pics/' + employee.PIC);
    $('#fullName').text(employee.NAME);
    $('#employeeTitle').text(employee.TITLE);
    $('#lisatieto').text(employee.INFO);

    if (employee.puhelin_nro) {
        $('#actionList').append('<li><a href="tel:' + employee.puhelin_nro + '"><h3>Soita puhelimeen</h3></a></li>');
        $('#actionList').append('<li><a href="sms:' + employee.puhelin_nro + '"><h3>SMS</h3></a></li>');
    }
    $('#actionList').listview('refresh');

} 
```

控制台显示

```
employee is undefined
[Break On This Error]   

$('#employeePic').attr('src', 'pics/' + employee.PIC); 
```

这是 JSON 响应：

```
jQuery164008509381752724021_1336981793995({
    "key": [
        {
            "PIC": "Tuntematon",
            "NAME": "0",
            "TITLE": "0",
            "INFO": "0"
        }
    ]
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:55:05.500

你需要使用这个

```
var employee = data.key[0]; 
```

# java - how to display a stack of image followed by name in order

> ID：10579268
> 
> 赞同：0
> 
> 时间：2012-05-14T07:42:05.210
> 
> 标签：java, image, jlabel

i wan to ask that if my machine got 1000/10000 of image and each image is named follow by order (1.jpg, 2.jpg, 3.jpg, 4.jpg .... 10000.jpg) , how to do it to let it display follow th order ?

i saw a lot of question on internet that they put it on the JLabel but many of them say it won't work . i have even try a few method to let it display like javascript but it is not the result i want.

I wish the program is running like 0.5 seconds a time and display the image followed the image number.

Can anyone guild me through this ? thanks in advance

==================================================================================

update : this is my javascript code

```
<html> 
<head>
</head>

<body>
<img src="images/image1.jpg" alt="rotating image" width="600" height="500" id="rotator">

<script type="text/javascript">
(function() {
var rotator = document.getElementById('rotator');  // change to match image ID
//var imageDir = 'images/';                          // change to match images folder
var delayInSeconds = 1;                            // set number of seconds delay
// list image names
var images = ['1.jpg','2.jpg', '3.jpg', '4.jpg'];

// don't change below this line
var num = 0;
var changeImage = function() {
    var len = images.length;
    rotator.src = images[num++];
    if (num == len) {
        num = 0;
    }
};
setInterval(changeImage, delayInSeconds * 50);
})();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:52:59.900

首先，您需要预先加载图像，为此，您可以将它们添加到隐藏的 div 中。然后用它替换你的原始图像。像这样的东西：

```
<html>
<head>
<title>ViewImage</title>
<script type="text/javascript" src="/jquery-1.4.2.min.js"></script>

<script>
var img_num = 1;
$(function(){
window.setInterval(function(){
    var img = $('#hiden-img');
    if(img[0].complete==true)
        $('#real-image').attr('src', img.attr('src'));
    img_num++;
    if(img_num>10000)img_num=1;
    img.attr('src', '/img/'+img_num+'.jpg');

}, 500);
});
</script>
</head>
<body>
<img id="hiden-img" style="display:none;"/>
<img id="real-image" src="/img/1.jpg"/>
</body>
</html> 
```

像这样试试。下载 jquery 并将其放置在您的站点中，将路径“/path/to/img”（2 次）和“/path/to/jquery”替换为您的真实路径。这应该可以解决问题。

您不需要每秒刷新页面。您不需要全部刷新。它适用于我的网站。

# java - apache httpclient + ntlm 身份验证

> ID：10579279
> 
> 赞同：3
> 
> 时间：2012-05-14T07:43:57.943
> 
> 标签：java, file-upload, ntlm, apache-httpclient-4.x

我有一个客户端通过 https 帖子将文件上传到服务器。它使用代理，这是我的代码

```
public void upload() throws Exception {

    //create default client
    DefaultHttpClient client = new DefaultHttpClient();

    //set proxy authentication if specified
    if (proxy.equals("yes") && proxyAuth.equals("yes")){
    client.getCredentialsProvider().setCredentials(
            new AuthScope(address, port),
            new UsernamePasswordCredentials(proxyUsername, proxyPassword));
    }

    //set proxy if specified
    if (proxy.equals("yes")){
        HttpHost proxy = new HttpHost(address, port);
        client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY,proxy);
    }

    HttpPost post = new HttpPost(url);
    MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

    File dir = new File(inputFilePath);
    File[] fileArray = dir.listFiles(); 
    File file = fileArray[0];

    FileBody uploadFilePart = new FileBody(file);

    entity.addPart("file", uploadFilePart);
    entity.addPart("username", new StringBody(username));
    entity.addPart("password", new StringBody(password));

    post.setEntity(entity);

    //execute post and get response
    String response = EntityUtils.toString(client.execute(post).getEntity(), "UTF-8");

    client.getConnectionManager().shutdown();

    log4j.info(response);

    if(!response.substring(0, 3).equalsIgnoreCase("200")){
        Exception e = new Exception("An error has occurred server side: ");
        throw e;
    }
} 
```

现在的问题是这有时可以完美地工作，有时我会收到以下错误。

> org.apache.http.impl.client.AbstractAuthenticationHandler.selectScheme(AbstractAuthenticationHandler.java:149) - 不支持身份验证方案 ntlm"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:59:12.167

您需要按照[http://hc.apache.org/httpcomponents-client-ga/ntlm.html](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)中的说明注册 NTLM 处理程序：

```
client.getAuthSchemes().register("ntlm", new NTLMSchemeFactory()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-20T16:04:04.617

尝试 - 而不是这个： new UsernamePasswordCredentials(proxyUsername, proxyPassword)

使用这个：新的NTCredentials（proxyUsername，proxyPassword，“localhostname”，“domain”）

# iphone - 部分的 UITableView 标题仅在向下滚动时出现

> ID：10579287
> 
> 赞同：0
> 
> 时间：2012-05-14T07:44:47.033
> 
> 标签：iphone, ipad, uitableview, ios5

我在 iPad 上有一些奇怪的行为，而我在 iPhone 上没有。

我有一个分组表视图，其中包含部分的部分和标题，问题是在 iPad 上最顶部的部分的标题没有显示，当向下滚动表格时，部分标题会在屏幕前出现一小段时间。

滚动前

[http://desmond.imageshack.us/Himg525/scaled.php?server=525&filename=screenshot2012051410074.png&res=landing http://desmond.imageshack.us/Himg525/scaled.php?server=525&filename=screenshot2012051410074.png&res=landing](http://desmond.imageshack.us/Himg525/scaled.php?server=525&filename=screenshot2012051410074.png&res=landing)

滚动后

[http://desmond.imageshack.us/Himg59/scaled.php?server=59&filename=screenshot2012051410074.png&res=landing http://desmond.imageshack.us/Himg59/scaled.php?server=59&filename=screenshot2012051410074.png&res=landing](http://desmond.imageshack.us/Himg59/scaled.php?server=59&filename=screenshot2012051410074.png&res=landing)

用于创建节标题的代码：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
{
    NSString *sectionTitle = [self tableView:tableView titleForHeaderInSection:section];
    if (sectionTitle == nil || [sectionTitle isEqualToString:@""]) {
        return nil;
    }

    // Create label with section title
    UILabel *label = [[UILabel alloc] init] ;
    label.frame = CGRectMake(12, 0, 300, 30);
    label.backgroundColor = [UIColor clearColor];
    label.textColor = [UIColor blackColor];
    label.shadowColor = [UIColor whiteColor];
    label.shadowOffset = CGSizeMake(0.0, 1.0);
    label.font = [UIFont boldSystemFontOfSize:16];
    label.text = sectionTitle;

    UIImage *img = [UIImage imageNamed:@"header"];
    UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 0, 300, 44)];
    imgView.image = img;

    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 44)];

    [view addSubview:imgView];
    [view addSubview:label];

    return view;
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    int aSection = [[self.sectionsToDisplay objectAtIndex:section] integerValue];
    return [self.groupHeadings objectAtIndex:aSection];
} 
```

我的 TableView 的代码：

```
tableViewResult = [[UITableView alloc] initWithFrame:mainView.frame style:UITableViewStyleGrouped];

tableViewResult.separatorColor = [UIColor clearColor];
[mainView addSubview:tableViewResult]; 
```

我在另一种方法中设置委托和数据源，因为我首先在将任何数据加载到表中之前进行 Web 请求，即当 Web 请求完成时，我会这样做：

```
tableViewResult.delegate = self;
tableViewResult.dataSource = self;
[tableViewResult reloadData]; 
```

除了最顶部部分的标题外，一切都按预期工作，并且仅在 iPad 上。

有什么想法会导致这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:28:03.990

解决这个问题的方法是将此功能更改为：

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    int aSection = [[self.sectionsToDisplay objectAtIndex:section] integerValue];
    if([[self.groupHeadings objectAtIndex:aSection] isEqualToString:@""])
        return nil;
    return [self.groupHeadings objectAtIndex:aSection];
} 
```

# android - android webview 历史记录无法正常工作

> ID：10579288
> 
> 赞同：4
> 
> 时间：2012-05-14T07:44:50.177
> 
> 标签：android, webview

我的应用程序将网站的 url 加载到 android webview 中。该网站由 3 个页面组成（实际上是同一页面，但 ID 不同）我们称它们为 AB 和 C。该网站有一个后退按钮，代码为：

```
javascript:history.go(-1) 
```

如果我从 A 浏览到 B 并按下后退按钮 - 它工作正常。

如果我从 B 浏览到 C 并按下后退按钮 - 我回到 B - 也很好。

如果我然后按后退按钮，我会回到 C 而不是回到 A - 不好。
然后，如果我按回去，我将回到 B……再次回到 C……然后回到 B……无休止地，我永远不会到达 A。

如果我使用设备的物理背面并使用以下内容，它会按预期工作：

```
if ((keyCode == KeyEvent.KEYCODE_BACK) && webView.canGoBack()) {
        webView.goBack();
        return true;
    } 
```

额外信息：我正在使用 WebViewClient，覆盖“shouldOverrideUrlLoading”并启用 javascript：

```
webView.getSettings().setJavaScriptEnabled(true); 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:02:51.560

我写这样的代码

```
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    if (url.startsWith("tel:") || url.startsWith("mailto:")) {
                return true;
            }
            if (mOnWebViewEventListener != null) {
                mOnWebViewEventListener.onWebViewPageStart(view);
            }

            if (mShowProgress) {
                mProgressBar.show();
            }
            return false;
        } 
```

是工作还是不工作？

# wcf - 服务器已拒绝客户端凭据，双工 wcf 服务

> ID：10579289
> 
> 赞同：1
> 
> 时间：2012-05-14T07:44:51.417
> 
> 标签：wcf, c#-4.0, windows-services, networkcredentials

我在 Windows 服务上托管了一个带有 tcp 绑定的 wcf 服务。它在我们的局域网上正常工作，但是当用户想从互联网连接到服务时，他们会收到以下错误：

> 服务器已拒绝客户端凭据

这是我的服务配置：

```
 service behaviorConfiguration="WcfServiceLibrary1.Service1Behavior"
        name="LivePushServiceLib.SubscribeService">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
          contract="WCF_Interface.ISubscribeService">

        </endpoint>
        <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
          contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://188.x.x.x:8524/SubscribeService.svc" />
          </baseAddresses>
        </host>
      </service>
    </services> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:04:24.670

您正在使用 Windows 的 NetTcpBinding 的默认安全性。在您的局域网中，我假设每个人都非常高兴地使用 Windows 凭据。但是，来自 Internet 的人不太可能在您的域上拥有凭据

如果您想在 Internet 上使用它，请查看将安全性设置为 TransportWithMessageCredential 之类的东西，然后使用凭据类型的用户名。这允许基于 Internet 的客户端使用您可以在自定义 UsernamePasswordValidator 中验证的用户名进行身份验证

# c# - 如何在 C# 中读取网站内容？

> ID：10579292
> 
> 赞同：7
> 
> 时间：2012-05-14T07:44:59.717
> 
> 标签：c#, html, httpwebrequest, webclient, streamreader

我想阅读没有 html 标签和标题的网站文本。我只需要在网络浏览器中显示的文本。

我不需要这样

```
<html>
<body>
bla bla </td><td>
bla bla 
<body>
<html> 
```

***我只需要文本“bla bla bla bla”。***

我已经使用 webclient 和 httpwebrequest 方法来获取 HTML 内容并拆分接收到的数据，但这是不可能的，因为如果我更改网站，标签可能会更改。

那么有什么方法可以仅以字谜方式获取网站中显示的文本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T07:48:27.627

您需要使用特殊的 HTML 解析器。获取此类*非*正则语言内容的唯一方法。

请参阅：[在 C# 中解析 html 的最佳方法是什么？](https://stackoverflow.com/questions/56107/what-is-the-best-way-to-parse-html-in-c)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T08:10:39.103

以下是使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)的方法。

首先是您的示例 HTML：

```
var html = "<html>\r\n<body>\r\nbla bla </td><td>\r\nbla bla \r\n<body>\r\n<html>"; 
```

加载它（在这种情况下作为字符串）：

```
var doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html); 
```

如果从网上获取，类似：

```
var web = new HtmlWeb();
var doc = web.Load(url); 
```

现在只选择具有非空白的文本节点并修剪它们。

```
var text = doc.DocumentNode.Descendants()
              .Where(x => x.NodeType == HtmlNodeType.Text && x.InnerText.Trim().Length > 0)
              .Select(x => x.InnerText.Trim()); 
```

如果您愿意，可以将其作为单个连接字符串获取：

```
String.Join(" ", text) 
```

当然，这只适用于简单的网页。任何复杂的东西也会返回带有您显然不想要的数据的节点，例如 javascript 函数等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-04T15:40:45.383

```
public string GetwebContent(string urlForGet)
{
    // Create WebClient
    var client = new WebClient();
    // Download Text From web
    var text = client.DownloadString(urlForGet);
    return text.ToString();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-14T08:09:29.343

我认为[这个链接](http://www.dotnetperls.com/remove-html-tags)可以帮助你。

```
/// <summary>
/// Remove HTML tags from string using char array.
/// </summary>
public static string StripTagsCharArray(string source)
{
char[] array = new char[source.Length];
int arrayIndex = 0;
bool inside = false;

for (int i = 0; i < source.Length; i++)
{
    char let = source[i];
    if (let == '<')
    {
    inside = true;
    continue;
    }
    if (let == '>')
    {
    inside = false;
    continue;
    }
    if (!inside)
    {
    array[arrayIndex] = let;
    arrayIndex++;
    }
}
return new string(array, 0, arrayIndex);
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-14T07:47:49.593

```
// Reading Web page content in c# program
//Specify the Web page to read
WebRequest request = WebRequest.Create("http://aspspider.info/snallathambi/default.aspx");
//Get the response
WebResponse response = request.GetResponse(); 
//Read the stream from the response
StreamReader reader = new StreamReader(response.GetResponseStream()); 
//Read the text from stream reader
string str = reader.ReadLine();
for(int i=0;i<200;i++)
{
   str += reader.ReadLine();

}

Console.Write(str); 
```

# javascript - 扩展 SVG 路径

> ID：10579296
> 
> 赞同：0
> 
> 时间：2012-05-14T07:45:35.520
> 
> 标签：javascript, html, svg, jquery-svg

在我的一个应用程序中，我正在使用以下代码创建一个 SVG 路径

```
var points="M1180,401 S1180,476 1030 476 L100, 476";
createPath(points, id, name);

   function createPath(points, id, nane) {

                var shape = document.createElementNS(svgNS, "path");
                shape.setAttributeNS(null, "d", points);
                shape.setAttributeNS(null, "class", "path");
                shape.setAttributeNS(null, "id", id);
                document.getElementById("holder").appendChild(shape);
                return id;
} 
```

这将在我的 SVG 中创建一个路径（名为“holder”）。在按钮按下事件中，我需要延长它的长度。由于该 SVG 中有不止一个路径，所以我们不能拿它点。

请帮忙谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T15:13:27.537

如果您保持 id 唯一性，您可以使用它来检索您的形状`document.getElementById(id)`并从那里修改路径。

# java - 通过 Android 开发扩展类的不同方法？

> ID：10579299
> 
> 赞同：1
> 
> 时间：2012-05-14T07:45:45.163
> 
> 标签：java, android, extends

所以我一直在阅读Android开发的教程，并且在我的Java开发过程中遇到了一些我从未见过的东西（主要是学校工作）：

```
Thread th = new Thread() { 
    public void run() {
        if (iotdHandler == null) {
            iotdHandler = new IotdHandler(); 
        }
        iotdHandler.processFeed(); resetDisplay(
        iotdHandler.getTitle(), 
        iotdHandler.getDate(),
        iotdHandler.getUrl(),
        iotdHandler.getDescription());
        dialog.dismiss();
    }
};
th.start(); 
```

现在这本书说扩展线程，从某种意义上说，我有点理解它在做什么，但它不遵循通常的方式来扩展 java 中的普通类，如下所示：

```
public Class Dog extends Animal... 
```

然后您可以继续并覆盖方法等。但我的问题是，它实际上在引用新的 Thread 对象时做了什么，但同时在它之后创建了一个方法，而我假设是覆盖了 Thread 类中的某种方法？由于我不知道它叫什么，因此我无法真正搜索它，因此对于明显的问题，如果它是一个，我深表歉意。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:51:57.743

修改您的 Java 书籍 :) 它被称为[匿名内部类](http://en.wikipedia.org/wiki/Anonymous_inner_class)，最初是为了促进 Java GUI 开发（使用 AWT/Swing）而引入的。由于 Android UI 开发遵循许多相同的模式，因此它在 Android 中经常使用。

它所做的是在适当的位置实例化一个类（而不在单独的文件中定义它等），覆盖它的一些方法（在这种情况下`run()`）。如果您为其所有方法提供实现，您还可以实现一个接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:52:58.867

首先，这与 Android 无关。您可以在“普通 Java”中以相同的方式进行扩展。像这样进行类扩展的原因是为了减少类，而这种“类扩展”只需要一次。在你的例子中，写起来是一样的

```
public class MyThread extends Thread
{
   @Override
   public void run() {
   [...]
   } 
}; 
```

后来：

```
MyThread thread = new MyThread();
thread.start(); 
```

So the advantage is, that you don't need to implement a class and instantiate it later on.

# matlab - 将 m 文件 matlab 更改为mathematica

> ID：10579302
> 
> 赞同：-2
> 
> 时间：2012-05-14T07:46:08.470
> 
> 标签：matlab, wolfram-mathematica

我编写了一个 matlab m 文件来绘制如下所示的双积分。每个人都可以告诉我它在数学中的等价物吗？？？

```
tetha = pi/4;
lamb = -1;
h = 4;
tetha0 = 0;
syms x y l

n = [h.*((cos(tetha)).^2)./sin(tetha); h.*abs(cos(tetha)); 0];
ft = ((tetha - pi/2)./sin(tetha)).^4;
Rt = [cos(tetha) -sin(tetha); sin(tetha) cos(tetha)];
zt = [cos(tetha0) -sin(tetha0); sin(tetha0) cos(tetha0)];
lt = [x;y];

integrand = @(x,y)(ft.*h.*((abs(cos(tetha)).*      (x.*cos(tetha)-y.*sin(tetha)))-((cos(tetha)).^2/sin(tetha)).*(x.*sin(tetha)+y.*cos(tetha))));
PhiHat = @(a,b)(dblquad(integrand,0,a,0,b));
ezsurfc(PhiHat,[0,5,0,5]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T17:56:12.180

到这里了（只做了很小的改动），但你必须做功课才能理解 Mathematica 中的函数定义、集成、绘图等。此外，这不是惯用的 Mathematica，但我们不要去那里......

```
tetha=Pi/4;
lamb=-1;
h=4;
tetha0=0;

n={h*((Cos[tetha])^2)/Sin[tetha],h*Abs[Cos[tetha]],0};
ft=((tetha-Pi/2)/Sin[tetha])^4;
Rt={{Cos[tetha], -Sin[tetha]}, {Sin[tetha], Cos[tetha]}};
zt={{Cos[tetha0], -Sin[tetha0]}, {Sin[tetha0], Cos[tetha0]}};

integrand[x_,y_]:= (ft*h*((Abs[Cos[tetha]]*(x*Cos[tetha]-y*Sin[tetha]))-((Cos[tetha])^2/Sin[tetha])*(x*Sin[tetha]+y*Cos[tetha])));
PhiHat[a_,b_]:=NIntegrate[integrand[x,y],{x,0,a},{y,0,b}];
Plot3D[PhiHat[x,y],{x,0,5},{y,0,5}] 
```

![在此处输入图像描述](../Images/49ef4821c634e6a5a4d3d324f51120e8.png)

# javascript - 在 JavaScript 中模拟“警报”或“提示”

> ID：10579307
> 
> 赞同：0
> 
> 时间：2012-05-14T07:46:24.747
> 
> 标签：javascript, alert, prompt

我知道事件驱动编程背后的原则，但仍会尝试更好地理解是否以及如何在 JavaScript 中模拟本机警报或提示功能的功能。很明显，关键在于这些原生函数的阻塞行为，以及如何在 JavaScript 中进行模拟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:57:20.103

你可以使用 twitters bootstrap - modal：twitter.github.com/bootstrap/javascript.html#modals

或 jquerys ui - 模态：jqueryui.com/demos/dialog/#modal-confirmation

两者都是非阻塞的

//编辑：这个？[https://github.com/malsup/blockui/blob/master/jquery.blockUI.js](https://github.com/malsup/blockui/blob/master/jquery.blockUI.js) && [http://jquery.malsup.com/block/#demos](http://jquery.malsup.com/block/#demos)

# qt - 如何在 Qt Gui 应用程序中获取对话框背景颜色（窗口颜色）？

> ID：10579308
> 
> 赞同：1
> 
> 时间：2012-05-14T07:46:26.253
> 
> 标签：qt, qt4.7, backcolor, qlineedit, qtstylesheets

我的 Qt 版本是 4.7.1，我想将 QLineEdit 的背景颜色设置为与窗口颜色相同，我使用这种方式：

```
QString bgColorName = palette().color(QPalette::Normal, QPalette::Window).name();
QString strStyleSheet = QString("QLineEdit {background-color: ").append(bgColorName).append("}");
ui->lineEdit->setStyleSheet(strStyleSheet); 
```

我尝试获取背景颜色名称，然后设置QLineEdit的样式表，但是，运行应用程序后，我发现QLineEdit的颜色有点不同，也就是说，如果你仔细看，你可以看到不同，在 Win7 和 Mac 上。谁能帮我找到一种方法来获得正确的对话框背景颜色，提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T15:39:39.630

您发布的代码实际上对我有用（使用 Windows 7）。您是否使用 Photoshop 等图像编辑器验证了行编辑的背景与对话框不同？有时大脑会耍花招，并认为背景颜色不同（由于边框），而实际上并非如此。

顺便说一句，您可以使用如下样式表使 QLineEdit 的背景透明：

```
QLineEdit le("Line Edit with transparent BG");
le.setStyleSheet("background:transparent;"); 
```

# actionscript-3 - flashfirebug As3 控制台计时器或 setInterval 不起作用

> ID：10579309
> 
> 赞同：2
> 
> 时间：2012-05-14T07:46:28.860
> 
> 标签：actionscript-3, flash, actionscript, firebug

我曾尝试在 FlashFirebug 插件的 as3 控制台中使用计时器，但它不起作用（尝试了几种组合）。计时器代码是这样的：

```
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.display.Sprite;    

var myTimer = new Timer(1000, 2);
myTimer.addEventListener(TIMER, timerHandler);
myTimer.start();

function timerHandler(event:TimerEvent){trace("timerHandler: ");} 
```

//但它给出了这个错误：

```
Error #1034: Type Coercion failed: cannot convert r1.deval.rt::FunctionDef@50ef781 to Function. 
```

//也尝试使用 setInterval 与此代码：

```
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.display.Sprite;
import flash.utils.setInterval;
function d(){trace("cc");}
setInterval(d, 2000); 
```

//但是控制台错误说：

```
Error: Call to a possibly undefined method. 
```

//可能需要导入一些东西。尝试导入“import flash.utils.setInterval;” 但给出此错误：“错误：您必须先导入该类，然后才能实例化它。例如 import flash.display.MovieClip;”

你能帮我解决这个问题吗？计时器或 setInterval 函数？谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T10:00:10.287

问题出在这一行：

```
myTimer.addEventListener(TIMER, timerHandler); 
```

它应该是：

```
myTimer.addEventListener(TimerEvent.TIMER, timerHandler);
//              add this ^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T10:08:25.350

这是相当古老的。但回答它以帮助将来的任何人。

[仍在审批队列中的FlashFirebug 4.8.0](https://addons.mozilla.org/en-US/firefox/addon/flashfirebug/versions/)（在回答时）应该允许您在运行的 SWF 中注入一个 SWF 文件。

当您遇到控制台限制时，这将允许您使用完整的 AS3 功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:40:38.437

我不确定您是否已对其进行排序，但它看起来像：

```
var num:int = setInterval(d, 2000); 
```

如果你导入 import flash.utils.clearInterval; 你可以像这样停止它：

```
clearInterval(num) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:49:25.983

好吧，看起来没有办法实现这一点。FlashFirebug 使用[D.eval](http://www.riaone.com/products/deval/)库，我现在找不到它支持计时器或间隔。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T09:19:44.493

我不确定您收到的错误消息，但是在您为计时器分配事件侦听器时，您的代码中确实存在错误。您需要从 TimerEvent 类访问事件名称常量，如下所示：

```
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.display.Sprite;    

var myTimer = new Timer(1000, 2);
myTimer.addEventListener(TimerEvent.TIMER, timerHandler);
myTimer.start();

function timerHandler(event:TimerEvent){trace("timerHandler: ");} 
```

[关于使用 ActionScript 3.0 Timer 类而不是 setInterval 的优势，](http://www.negush.net/blog/how-to-use-timer-class-instead-of-setinterval/)这里有一个不错的解释。

# php - 使用基于 Symfony 2 的网站处理生产中的 PHP 错误

> ID：10579318
> 
> 赞同：4
> 
> 时间：2012-05-14T07:47:10.213
> 
> 标签：php, exception-handling, symfony, hosting

我们在生产中运行了几个 symfony2 网站，我们同时使用 Airbrake 和 Sentry 来收集异常。真正的异常即使在生产中也能很好地工作，我们可以用大量的上下文记录它们，我们可以向用户展示一个漂亮的 500 错误页面。

PHP 错误是另一回事。我可以使用“关闭时”处理程序将它们记录到 Sentry，但是使用它我无法传递很多上下文。对于用户来说，也只有一个空的 503 错误。这很糟糕，因为如果出现问题，我们无法向用户显示“下一步”。

来自 Java 背景，我非常喜欢“真正的”异常，在开发模式下，有一个类可以转换异常中的许多错误，但是没有记录或明显的方法可以在生产中启用它，所以我想也许我应该' t 在询问更多信息之前；）

你们是如何处理这个问题的，这会带来什么样的性能损失？

这是来自：[http ://groups.google.com/group/symfony2/browse_thread/thread/6129f57a35d8cb90?hl=en](http://groups.google.com/group/symfony2/browse_thread/thread/6129f57a35d8cb90?hl=en)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T20:09:52.783

*   您应该将所有“错误”作为例外处理
*   您应该发送正确的 http 标头代码并在网络服务器中拦截此 http 错误代码：[http](http://wiki.nginx.org/HttpFastcgiModule#fastcgi_intercept_errors) ://wiki.nginx.org/HttpFastcgiModule#fastcgi_intercept_errors （apache 中也有类似的内容）
*   您只需要关闭处理程序来记录“致命”的事情
*   “关闭功能”中的“上下文”不受限制（如果您在错误之前“分配”它！）
*   最好的优化是不犯错误；）

启用此功能的 PHP 方式：

1.  错误（引导程序！）：

    ```
    set_error_handler('errorToException');

    function errorToException($code, $message, $file = null, $line = 0) {
        if (error_reporting() == 0) {
            return true;
        }
        throw new \ErrorException($message, $code, $file, $line);
    } 
    ```

2.  异常（ExceptionHandler 类）：

    ```
    set_exception_handler(array($this, 'exception'));

    public function exception(\Exception $e) {
        $this->logger->log($e);
    } 
    ```

3.  致命错误（ExceptionHandler 类）：

    ```
    register_shutdown_function(array($this, 'shutdown'));

    public function shutdown() {
        $error = error_get_last();
        if (isset($error)) {
            $this->exception(new \FatalException($error['message'], $error['type'],     $error['file'], $error['line']));
        }
    } 
    ```

这是-PHP-way™。你所有的“Symfony2™”错误处理应该保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T12:41:55.567

在 Symfony2 中，我们可以引入错误/异常侦听器服务（它捕获所有错误），并且在 onKernelException() 中我们可以包含我们所有的域逻辑来处理错误/异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-27T16:50:23.913

假设你至少使用 Symfony 2.3 有一个新的机制。

```
use Symfony\Component\Debug\ErrorHandler;

require_once __DIR__.'/../app/bootstrap.php.cache';
require_once __DIR__.'/../app/AppKernel.php';

// we need to register the Error Handler in order
// to get fatal errors delivered as Exceptions
ErrorHandler::register();

[...] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T12:24:56.173

您可以将事件处理程序添加到某些内核事件（异常，OnResponse ....）

# android - 如何在 Android 中的 ListView 之后添加元素

> ID：10579322
> 
> 赞同：1
> 
> 时间：2012-05-14T07:47:25.973
> 
> 标签：android, android-layout

以下是我对 XML 的看法。（我只添加了结构）。问题是当列表视图中的元素很少（动态生成）时，输出将显示直到最后一个按钮的所有内容。但是一旦视图增长通过列表视图后的屏幕大小元素就不会显示。但是列表视图中的所有元素都会出现。如何通过更改此 XML 来修复它。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <TableRow >
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    </TableRow>
</TableLayout>
<ListView 
    android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
</ListView>
<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <TableRow >
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    </TableRow>
</TableLayout>
<Button 
     android:layout_height="wrap_content"
     android:layout_width="fill_parent" />
<Button 
     android:layout_height="wrap_content"
     android:layout_width="fill_parent"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:51:16.650

`ListView`渴望身高。呈现的最坏情况`ListView`是给它的高度`wrap_content`。

随着你的 Items`ListView`变大，`ListView`增加它的高度来包裹它的内容，因此它会把其他`View`的 s 推出屏幕。

我建议你给它高度`fill_parent`并使用`layout_weight`参数。

为了进一步参考，我建议您阅读[这篇](http://blog.maxaller.name/2010/05/attaching-a-sticky-headerfooter-to-an-android-listview/)关于使用与其他和`RelativeLayout`调整进行调整的文章。`ListView``View``ViewGroup`

# c# - 如何在 tableLayoutControl 中显示整个图片

> ID：10579325
> 
> 赞同：1
> 
> 时间：2012-05-14T07:48:04.013
> 
> 标签：c#, visual-studio-2010

我刚刚开始学习 C# 和 Visual Studio，试图同时在书籍和示例代码上工作。

我知道这不是一个非常聪明的问题，但这是我要解决的问题。我有一个 Windows 窗体，我需要在 tableLayoutPanel 中包含的图片框中显示图像。一个简单的问题是我必须加载的图像可能有多种尺寸，并且典型的图像没有完全显示在分配的空间内：只显示适合容器的区域，图像的其余部分被切断。我必须完整地显示图像，我不必调整它的大小。我已经设置了 autosize 属性，但这似乎不起作用。

这是form.cs中的一些代码

```
 string imageName = openFileDialog1.FileName;        // Get the image name

// Read the image

try
{
img = ( Bitmap) Image .FromFile(imageName);
}
catch
{
     MessageBox.Show("oooops" , Text, MessageBoxButtons.OK, MessageBoxIcon .Hand);
}
pictureBox1.Image = img;   // show the image 
```

然后在form.designer.cs中找到的private void InitializeComponent()中：

```
this.flowLayoutPanel1 = new System.Windows.Forms.FlowLayoutPanel();
 ...
this.pictureBox1 = new System.Windows.Forms.PictureBox();
...
this.tableLayoutPanel1.Controls.Add(this.pictureBox1, 1, 1);
...
this.tableLayoutPanel1.Controls.Add(this.pictureBox1, 1, 1);
...
this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 9.034863F));
this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 2.388038F));
this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 88.5771F));
this.tableLayoutPanel1.Size = new System.Drawing.Size(784, 762);
...
this.pictureBox1.SizeMode = System.Windows.Forms.PictureBoxSizeMode.AutoSize; 
```

您对如何显示整个图像有任何提示吗？

即使使用滑动条也可以，但是尽管容器具有 autoscroll = true 的事实，但没有任何反应并且图像仍然被截断。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:24:28.817

tableLayout 控件中的 autoscroll 属性管理整个表格的滚动，包括所有子控件。当图像太大而无法放入图片控件框时， autoscroll = yes 属性显示滑动条，允许滑动表格布局控件中打包的所有内容，而不是单个图像单元格。图片框没有自动滚动属性，因为据我了解，自动滚动是容器的属性；我猜要在自己分配的空间中滑动图像，应该使用中间容器。

我的问题不是一个好问题。它的根源在于我对收容层级和相关属性的困惑，而不是真正缺乏知识或概念。好吧，总是有改进的余地......

# php - 使用 jquery 切换，在附加元素后，如何删除该元素？

> ID：10579332
> 
> 赞同：0
> 
> 时间：2012-05-14T07:48:22.597
> 
> 标签：php, jquery, html, ajax

添加后如何删除`var icon`元素？当前方法不起作用。

我尝试了[这里](https://stackoverflow.com/questions/3331449/jquery-remove-element-from-string)解释的方式，但没有奏效。

查询

```
$('#edit').toggle(function(){
    $('#edit').text('Close');
    var icon='<i class="icon-remove"></i>';
    $('.para').append(icon);
}, function(){
    $('#edit').text('Edit');
    var $icon = $(icon).not('i');
    $('.para').append($icon);
}); 
```

这也不起作用

```
 $('#edit').toggle(function(){
    $('#edit').text('Close');
    var icon='<i class="icon-remove"></i>';
    $('.para').append(icon);
}, function(){
    $('#edit').text('Edit');
    var icon='.remove';
    $('.para').remove(icon);
}); 
```

HTML/PHP

```
foreach ($users_tags as $key => $list) {
echo '<span>'.$list['tag_name'].'<span class="para"></span> </span>. ';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:51:36.750

你可以那样做

```
('#edit').toggle(function(){
    $('#edit').text('Close');
    var icon='<i class="icon-remove"></i>';
    $('.para').append(icon);
}, function(){
    $('#edit').text('Edit');
    var $icon = $('.icon-remove');
    $icon.remove();
}); 
```

# android - 如何获取我的 Activity 的选项菜单？

> ID：10579333
> 
> 赞同：46
> 
> 时间：2012-05-14T07:48:25.550
> 
> 标签：android, menu, optionmenu

在我的活动的某些方法中，我想检查菜单的标题或知道它是否被选中。我怎样才能得到活动的菜单。我需要类似的东西`this.getMenu()`

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-12-19T21:52:43.570

警惕`invalidateOptionsMenu()`。它重新创建了整个菜单。这有很多开销，并且会重置嵌入式组件，例如`SearchView`. 我花了很长时间才弄清楚为什么我`SearchView`会“随机”关闭。

我最终捕获了 Dark 发布的菜单，然后`onPrepareOptionsMenu(Menu)`根据需要调用。这满足了我的要求，没有令人讨厌的副作用。`onPrepareOptionsMenu()`问题：确保在创建菜单之前调用空值检查。我这样做如下：

```
private Menu mOptionsMenu;

@Override
public boolean onCreateOptionsMenu(final Menu menu) {
    mOptionsMenu = menu
    ...
}

private void updateOptionsMenu() {
    if (mOptionsMenu != null) {
        onPrepareOptionsMenu(mOptionsMenu);
    }
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-08T08:39:22.390

调用 invalidateOptionsMenu() 而不是传递菜单对象。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-13T12:41:13.440

您可以通过将 Menu 对象传递给您的 Activity 类来做到这一点

```
public class MainActivity extends Activity
{
    ...
    ...
    private Menu _menu = null;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        _menu = menu;
        return true;
    }

    private Menu getMenu()
    {
        //use it like this
        return _menu;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T07:56:46.977

有几个回调方法提供菜单作为参数。

你可能想在那里操纵它。

例如：

```
onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo)
onCreateOptionsMenu(Menu menu)
onCreatePanelMenu(int featureId, Menu menu) 
```

还有更多，最好查看活动文档并寻找所需的方法：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T08:11:43.970

据我所知，您在这里想要的可能会对您有所帮助：

**1.通过**[选项菜单](http://developer.android.com/guide/topics/ui/menus.html#options-menu)参考本教程。

**2.**每次用户按下菜单按钮，你可以通过它检查它的标题`getTitle()`。

**3.**或者，如果您想知道用户没有按下菜单按钮时检查或选择的最后一个菜单项，那么您需要在用户按下时存储首选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-07T18:21:59.277

Android 现在有[工具栏](https://developer.android.com/reference/android/widget/Toolbar)小部件，它是您可以设置/获取的菜单。使用 setSupportActionBar(Toolbar) 的一些变体在您的 Activity 中设置工具栏，例如来自 Fragment 的 onCreateOptionsMenu 之类的东西。线程复活了！

# php - Ajax - 无法获取 json 数据

> ID：10579337
> 
> 赞同：0
> 
> 时间：2012-05-14T07:48:37.407
> 
> 标签：php, javascript, jquery, ajax

我是ajax技术的初学者。我有一个用于执行 mysql_query 的 php，我想在客户端使用结果。

我的`database.php`：

```
$q=mysql_query("SELECT name FROM customers");
$res=mysql_fetch_array($q);
echo json_encode($res); 
```

和我的`client.php`

```
<div id="output">this element will be accessed by jquery and this text replaced </div>

<script id="source" language="javascript" type="text/javascript">

$(function () 
{
$.ajax({                                      
  url: 'database.php',                  //the script to call to get data          
  data: "",                        

  dataType: 'json',                //data format      
  success: function(data)          //on recieve of reply
  {
    var name = data[0];              

     $('#output').html("<b>id: </b>"+name);

    } 
});
}); 

</script> 
```

这是我找到的一些教程。正如我看到的`database.php`作品。它打印正确的数据，但在`client.php`我什么也得不到。可能是什么问题呢？

---------已编辑---------

因此，似乎在 Web 服务器上运行 php 4.4.7 并且看起来 json_encode() 函数因此无法正常工作。我找到了一个“解决方案”。我包括 upgrade.php，据我了解，它为旧版本的 php 实现了新方法。这是它的网站[http://include-once.org/p/upgradephp/](http://include-once.org/p/upgradephp/)

我无法升级 php 版本，所以这可能是一个好的解决方案吗？目前它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:05:38.113

```
$.ajax({                                      
  url: '/database.php',      //Correct path.                 
  //data: "",                       
  type : 'Get',
  dataType: 'json',                   
  success: function(data)          
  {
     alert(JSON.stringify(data)); 
     var name = data[0];    
     $('#output').html("<b>id: </b>"+name);
  } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:09:02.157

```
$.getJSON("database.php",function(data){
var entries = data;
$.each(entries,function(index,entry){
    //do stuff with json entry here
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:55:49.960

首先尝试提醒或提醒您的价值..如果它根据您的价值来做..

```
 <div id="output">this element will be accessed by jquery and this text replaced </div>

    <script id="source" language="javascript" type="text/javascript">

    $(function () 
    {
    $.ajax({                                      
      url: 'database.php',                  //the script to call to get data          
      data: "",                        

      dataType: 'json',                //data format      
      success: function(data)          //on recieve of reply
      {
       alert(data);  // check data value is coming or not..
        var name = data[0];              

         $('#output').html("<b>id: </b>"+name);

        } 
    });
    }); 

    </script> 
```

为您检查它的印刷价值...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:51:42.523

在 database.php 中使用此代码

```
 $q=mysql_query("SELECT name FROM customers");

    while($res=mysql_fetch_array($q))
{
$a[]=$res['name'];
}
    echo json_encode($a); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T08:27:01.193

正确地是这样：

数据库.php

```
if (isset($_POST['getData'])) {
    $q=mysql_query("SELECT name FROM customers");
    $res=mysql_fetch_array($q);
    echo json_encode($res);
    die();
} 
```

客户端.php

```
<div id="output">this element will be accessed by jquery and this text replaced </div>

<script id="source" language="javascript" type="text/javascript">

$(function () 
{
    $.ajax({                                      
        url: 'database.php',                  //the script to call to get data          
        type: "post",
        data: { getData: true },
        dataType: 'json',                //data format      
        success: function(data)          //on recieve of reply
        {
            var name = data[0];              

            $('#output').html("<b>id: </b>"+name);

        } 
    });
}); 

</script> 
```

# java - 是否可以在 Android 上从 Xalan 调用 Java 扩展函数？

> ID：10579339
> 
> 赞同：6
> 
> 时间：2012-05-14T07:48:42.120
> 
> 标签：java, android, xslt, dalvik, xalan

docx4j 使用 Xalan 将 docx 转换为 HTML，并且严重依赖 Xalan Java 扩展来完成这项工作。

但是 Xalan 扩展在 Android 上对我不起作用（使用 4.0.3）。LogCat 说：

```
05-14 15:38:02.840: I/dalvikvm(7249): DexOpt: illegal method access (call Lorg/apache/xalan/extensions/ExtensionHandler;.getClassForName (Ljava/lang/String;)Ljava/lang/Class; from Lorg/apache/xalan/extensions/ExtensionHandlerJavaPackage;)
05-14 15:38:02.840: I/dalvikvm(7249): Could not find method org.apache.xalan.extensions.ExtensionHandler.getClassForName, referenced from method org.apache.xalan.extensions.ExtensionHandlerJavaPackage.callFunction
05-14 15:38:02.840: W/dalvikvm(7249): VFY: unable to resolve static method 21489: Lorg/apache/xalan/extensions/ExtensionHandler;.getClassForName (Ljava/lang/String;)Ljava/lang/Class;
05-14 15:38:02.840: D/dalvikvm(7249): VFY: replacing opcode 0x71 at 0x0096
05-14 15:38:02.840: I/dalvikvm(7249): Could not find method org.apache.xalan.transformer.TransformerImpl.getDebug, referenced from method org.apache.xalan.extensions.ExtensionHandlerJavaPackage.callFunction
05-14 15:38:02.840: W/dalvikvm(7249): VFY: unable to resolve virtual method 23717: Lorg/apache/xalan/transformer/TransformerImpl;.getDebug ()Z
05-14 15:38:02.840: D/dalvikvm(7249): VFY: replacing opcode 0x74 at 0x0133
05-14 15:38:02.840: I/dalvikvm(7249): DexOpt: illegal method access (call Lorg/apache/xalan/extensions/ExtensionHandler;.getClassForName (Ljava/lang/String;)Ljava/lang/Class; from Lorg/apache/xalan/extensions/ExtensionHandlerJavaPackage;)
05-14 15:38:02.840: I/dalvikvm(7249): Could not find method org.apache.xalan.extensions.ExtensionHandler.getClassForName, referenced from method org.apache.xalan.extensions.ExtensionHandlerJavaPackage.callFunction
05-14 15:38:02.840: W/dalvikvm(7249): VFY: unable to resolve static method 21489: Lorg/apache/xalan/extensions/ExtensionHandler;.getClassForName (Ljava/lang/String;)Ljava/lang/Class;
05-14 15:38:02.840: D/dalvikvm(7249): VFY: replacing opcode 0x71 at 0x0189
05-14 15:38:02.840: I/dalvikvm(7249): Could not find method org.apache.xalan.transformer.TransformerImpl.getDebug, referenced from method org.apache.xalan.extensions.ExtensionHandlerJavaPackage.callFunction
05-14 15:38:02.840: W/dalvikvm(7249): VFY: unable to resolve virtual method 23717: Lorg/apache/xalan/transformer/TransformerImpl;.getDebug ()Z
05-14 15:38:02.840: D/dalvikvm(7249): VFY: replacing opcode 0x74 at 0x028e
05-14 15:38:02.840: I/dalvikvm(7249): DexOpt: illegal method access (call Lorg/apache/xalan/extensions/ExtensionHandler;.getClassForName (Ljava/lang/String;)Ljava/lang/Class; from Lorg/apache/xalan/extensions/ExtensionHandlerJavaPackage;)
05-14 15:38:02.840: I/dalvikvm(7249): Could not find method org.apache.xalan.extensions.ExtensionHandler.getClassForName, referenced from method org.apache.xalan.extensions.ExtensionHandlerJavaPackage.isElementAvailable
05-14 15:38:02.840: W/dalvikvm(7249): VFY: unable to resolve static method 21489: Lorg/apache/xalan/extensions/ExtensionHandler;.getClassForName (Ljava/lang/String;)Ljava/lang/Class;
05-14 15:38:02.840: D/dalvikvm(7249): VFY: replacing opcode 0x71 at 0x0022
05-14 15:38:02.840: I/dalvikvm(7249): DexOpt: illegal method access (call Lorg/apache/xalan/extensions/ExtensionHandler;.getClassForName (Ljava/lang/String;)Ljava/lang/Class; from Lorg/apache/xalan/extensions/ExtensionHandlerJavaPackage;)
05-14 15:38:02.840: I/dalvikvm(7249): Could not find method org.apache.xalan.extensions.ExtensionHandler.getClassForName, referenced from method org.apache.xalan.extensions.ExtensionHandlerJavaPackage.isFunctionAvailable
05-14 15:38:02.840: W/dalvikvm(7249): VFY: unable to resolve static method 21489: Lorg/apache/xalan/extensions/ExtensionHandler;.getClassForName (Ljava/lang/String;)Ljava/lang/Class;
05-14 15:38:02.840: D/dalvikvm(7249): VFY: replacing opcode 0x71 at 0x0021
05-14 15:38:02.840: I/dalvikvm(7249): DexOpt: illegal method access (call Lorg/apache/xalan/extensions/ExtensionHandler;.getClassForName (Ljava/lang/String;)Ljava/lang/Class; from Lorg/apache/xalan/extensions/ExtensionHandlerJavaPackage;)
05-14 15:38:02.840: I/dalvikvm(7249): Could not find method org.apache.xalan.extensions.ExtensionHandler.getClassForName, referenced from method org.apache.xalan.extensions.ExtensionHandlerJavaPackage.processElement
05-14 15:38:02.840: W/dalvikvm(7249): VFY: unable to resolve static method 21489: Lorg/apache/xalan/extensions/ExtensionHandler;.getClassForName (Ljava/lang/String;)Ljava/lang/Class;
05-14 15:38:02.840: D/dalvikvm(7249): VFY: replacing opcode 0x71 at 0x004c
05-14 15:38:02.840: I/dalvikvm(7249): Could not find method org.apache.xalan.transformer.TransformerImpl.getDebug, referenced from method org.apache.xalan.extensions.ExtensionHandlerJavaPackage.processElement
05-14 15:38:02.840: W/dalvikvm(7249): VFY: unable to resolve virtual method 23717: Lorg/apache/xalan/transformer/TransformerImpl;.getDebug ()Z
05-14 15:38:02.840: D/dalvikvm(7249): VFY: replacing opcode 0x74 at 0x0091
05-14 15:38:02.860: D/AndroidRuntime(7249): Shutting down VM
05-14 15:38:02.860: W/dalvikvm(7249): threadid=1: thread exiting with uncaught exception (group=0x40a531f8)
05-14 15:38:02.860: E/AndroidRuntime(7249): FATAL EXCEPTION: main
05-14 15:38:02.860: E/AndroidRuntime(7249): java.lang.IllegalAccessError: tried to access method org.apache.xalan.extensions.ExtensionHandler.getClassForName:(Ljava/lang/String;Ljava/util/Vector;Ljava/lang/Object;Lorg/apache/xalan/extensions/ExpressionContext;)Ljava/lang/Object; from class org.apache.xalan.extensions.ExtensionHandlerJavaPackage
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.extensions.ExtensionHandlerJavaPackage.callFunction(ExtensionHandlerJavaPackage.java:315)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.extensions.ExtensionHandlerJavaPackage.callFunction(ExtensionHandlerJavaPackage.java:440)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.extensions.ExtensionsTable.extFunction(ExtensionsTable.java:222)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.transformer.TransformerImpl.extFunction(TransformerImpl.java:417)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xpath.functions.FuncExtFunction.execute(FuncExtFunction.java:208)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xpath.XPath.execute(XPath.java:337)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.templates.ElemVariable.getValue(ElemVariable.java:274)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.templates.ElemVariable.execute(ElemVariable.java:245)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.templates.ElemApplyTemplates.transformSelectedNodes(ElemApplyTemplates.java:370)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.templates.ElemApplyTemplates.execute(ElemApplyTemplates.java:175)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2223)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.transformer.TransformerImpl.applyTemplateToNode(TransformerImpl.java:2096)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.transformer.TransformerImpl.transformNode(TransformerImpl.java:1228)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:614)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:1145)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:1123)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.docx4j.XmlUtils.transform(XmlUtils.java:841)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.docx4j.XmlUtils.transform(XmlUtils.java:734)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at org.docx4j.convert.out.html.HtmlExporterNG2.html(HtmlExporterNG2.java:269)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at com.example.HelloAndroid.HelloAndroid.onCreate(HelloAndroid.java:58)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at android.app.Activity.performCreate(Activity.java:4465)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at android.os.Looper.loop(Looper.java:137)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at java.lang.reflect.Method.invokeNative(Native Method)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at java.lang.reflect.Method.invoke(Method.java:511)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-14 15:38:02.860: E/AndroidRuntime(7249):  at dalvik.system.NativeStart.main(Native Method) 
```

关于问题到底是什么以及解决方法的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:43:43.340

Android 包括它自己的一些 Apache XML 库的副本。如果您想在您的应用程序中包含您自己的版本，最好的办法是使用[此处的说明](http://code.google.com/p/dalvik/wiki/JavaxPackages)重新打包它。

# ruby-on-rails - Rendering a completely new partial using jquery ajax

> ID：10579340
> 
> 赞同：0
> 
> 时间：2012-05-14T07:48:42.663
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

I'm trying to write an AJAX call that renders a new partial when a particular item is selected from a drop down list. I have been searching for a solution all day with no luck :(

The only way I got it working was not using AJAX, but having a hidden div containing my second partial, and then showing it and hiding the other div when the appropriate option is selected from the drop down box. Yes this worked but I was looking for a cleaner solution.

I'm not looking for a direct answer, but if anyone has any resources that could point me in the right direction it would be greatly appreciated :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:57:42.193

How about adding a controller action that would render the view (so it's view would just render the partial), and then using jquery to place it:

```
$('#id-of-box').load("<%= some_action_path %>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:12:30.393

You should perform a remote AJAX call when the onchange event from your select element is being triggered, so on the page which contains your select element there should be something like this (inside a script):

```
$('#select_id').live('change',function(){
  $.ajax({
    url: 'url_bound_to_partial_renderer'
  });
} 
```

and on the action of the controller which responds to your `url_to_fetch_result`, you should write something like this:

```
# controller
# action bound to 'url_bound_to_partial_renderer' by routes.rb
def partial_renderer
   ...
end

#view (partial) _partial_renderer.js.erb
$('jquery_selector_path_to_container_element_of_your_partial').html("<%= escape_javascript render(:partial => 'my_partial') %>");

#view (partial) to be rendered inside container element: _my_partial.html.erb
<p>Here goes the content of the partial you want to be rendered on the container!</p> 
```

Hope this will respond to your question.

# gwt - 在新窗口中显示 GWT RPC 结果

> ID：10579341
> 
> 赞同：0
> 
> 时间：2012-05-14T07:48:46.060
> 
> 标签：gwt

`GWT Window#open`方法可用于打开新的浏览器窗口，但它适用于正常的同步 URL 连接。如何`GWT RPC`在下面的新浏览器窗口中显示调用的异步结果？

```
 myServiceAsync.getHtmlResult(new AsyncCallback<String>() {
             @Override
             public void onSuccess(String htmlResult) {

//how to display #htmlResult in a new browser window?

             }
             @Override
             public void onFailure(Throwable caught) {}
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:09:22.973

您可以通过[JSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)使用 Javascript来解决这个问题。

像这样的方法可以解决问题：

```
public native void showWindowWithHtml(String html)/*-{
  var newWindow = $wnd.open("about:blank"); //receive a reference to the window object
  newWindow.document.body.innerHTML = html; //works for IE9 and Chrome 
  newWindow.onload = function(){newWindow.document.body.innerHTML = html} //works for Firefox 11

}-*/; 
```

当您调用时，它是一个带有指定 HTML 的新窗口。也不是说这个原生方法中的 js 只是一个例子，我不保证它总是在任何地方都可以工作。

您必须使用这种方法，因为 GWT 没有对使用外部窗口的内置支持。

# spring - WebSphere Camel JMS、spring、taskExecutor、haninging 线程

> ID：10579345
> 
> 赞同：2
> 
> 时间：2012-05-14T07:49:00.323
> 
> 标签：spring, jakarta-ee, jms, websphere, apache-camel

我正在尝试将 Camel 与 WebSphere 集成。它工作正常，除了一件事。

该场景如下所示：JMS (WMQ) -> 路由/转换 -> BEAN（执行 JPA (OpenJPA1.2/DB2) 提交）。

为了能够插入 WAS 事务管理器和管理线程，我将工作管理器作为 taskExecutor 插入骆驼：

```
<!-- Selected parts of the spring config -->  
<tx:jta-transaction-manager/>

<bean id="wasTaskExecutor"
  class="org.springframework.scheduling.commonj.WorkManagerTaskExecutor">
  <property name="workManagerName" value="wm/default" />
</bean>

<bean id="camelTransactionRequired" class="org.apache.camel.spring.spi.SpringTransactionPolicy" depends-on="transactionManager">
    <property name="transactionManager" ref="transactionManager"/>
    <property name="propagationBehaviorName" value="PROPAGATION_REQUIRED"/>
</bean>

<bean id="jms" class="org.apache.camel.component.jms.JmsComponent">
  <property name="connectionFactory" ref="connectionFactory"/>
  <property name="taskExecutor" ref="wasTaskExecutor"/>
  <property name="transacted" value="true"/>
  <property name="transactionManager" ref="transactionManager"/>
</bean> 
```

然后是一条路线，例如：

```
from("jms:queue:MY.QUEUE")
   .transacted("camelTransactionRequired")
   .log(..)
   .bean(storeJPA); 
```

这个 wasTaskExecutor bean 用于应用程序中的一个独立的 spring 消息侦听器（相同的 jms 提供程序，WMQ）以及预期的行为。

部署/启动时，可以以这种方式处理 ONE 消息（下面的第一个日志行）-然后线程开始挂起。

[5/12/12 22:14:55:890 CEST] 00000055 SystemOut O INFO routeFromBackend - 消息从队列拉到消息框

[5/12/12 22:27:00:638 CEST] 00000031 ThreadMonitor W WSVR0605W：线程“默认值：1”（0000001e）已活动 739306 毫秒，可能已挂起。服务器中总共有 1 个线程可能被挂起。在 java.lang.Object.wait(Native Method) 在 java.lang.Object.wait(Object.java:196) 在 com.ibm.ws.util.BoundedBuffer.waitPut_(BoundedBuffer.java:214) 在 com.ibm .ws.util.BoundedBuffer.put(BoundedBuffer.java:324) 在 com.ibm.ws.util.ThreadPool.execute(ThreadPool.java:1296) 在 com.ibm.ws.util.ThreadPool.execute(ThreadPool.java :1100) 在 com.ibm.ws.asynchbeans.WorkItemImpl.executeOnPool(WorkItemImpl.java:219) 在 com.ibm.ws.com.ibm.ws.asynchbeans.WorkItemImpl$PoolExecuteProxy.run(WorkItemImpl.java:198)。 asynchbeans.WorkManagerImpl.queueWorkItemForDispatch(WorkManagerImpl.java:433) 在 com。

有人见过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:00:51.673

线程“挂起”等待将工作提交到满队列，并且工作管理器被配置为在队列满时阻塞而不是抛出错误。要解决“挂起”，要么增加工作管理器线程池中的线程数，要么将队列满操作更改为“错误”而不是“等待”。或者，调查提交给工作经理的工作项是否由于某种原因花费了太长时间。

# android - BroadcastReceiver 没有捕捉到 INSTALL_REFERRER 广播

> ID：10579347
> 
> 赞同：0
> 
> 时间：2012-05-14T07:49:13.453
> 
> 标签：android, broadcastreceiver, referrer

我创建了一个应用程序，它有一个可以捕获广播的 BroadcastReceiver `INSTALL_REFERRER`。

当我使用 eclipse 安装应用程序并使用 adb 创建广播时，我发现一切正常，LogCat 正在显示它应该显示的所有内容。但是当我从 Play 商店安装应用程序时，logcat 上没有显示任何内容。如果我理解正确，Play 商店应用程序应该创建一个广播女巫，正在安装的应用程序应该捕获，对吧？

这基本上就是我在做什么：

```
public class SDK_Referrer extends BroadcastReceiver
{
    public void onReceive(Context context, Intent intent)
    {
        if (intent.getAction().equals("com.android.vending.INSTALL_REFERRER"))
        {
            String referrer = intent.getStringExtra("referrer");
            if (!(referrer == null || referrer.length() == 0))
            {
                // extracting the relevant data to Map
                Log.d("SAMPLE", "Generating Ymid from referrel");
                Map<String, String> referralmap = 
                    createHashMapFromQueryString(referrer);
                Log.d("SAMPLE", "Ymid is: " + referralmap.get("ymid"));
            }
        }
    }
} 
```

我只想在安装应用程序时向服务器发送一些东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:21:59.630

您需要将接收器添加到您的清单中，以便您的应用知道您有一些东西正在监听广播。像这样的东西：

```
<receiver android:name="com.company.cool.SDK_Referrer" android:exported="true">
    <intent-filter>
      <action android:name="com.android.vending.INSTALL_REFERRER" />
    </intent-filter>
  </receiver> 
```

# c++ - 在 C++ 中实现代码以模拟有限自动机非确定性

> ID：10579348
> 
> 赞同：10
> 
> 时间：2012-05-14T07:49:15.130
> 
> 标签：c++, dfa, automaton

我正在为自动机理论做作业，我必须确定一个词是否被确定性有限自动机的转移函数接受

我有这个输入文件：

```
6 8 0 2
2
5
0 0 a
0 1 a
1 1 b
1 2 c
1 3 c
3 4 d
4 4 d
4 5 d
3
aaabcccc
aabbbbcdc
acdddddd 
```

输入以 4 个整数开头，第一个是自动机的状态数，接下来是自动机的转移数，第三个数字是初始状态，然后是最终状态数。然后是最终状态（在示例中，最终状态是 2 和 5）。

然后是 N 行（N 是转换的数量），每行有 2 个整数和一个字符 I、J 和 C，表示转换的状态，即转换从状态 i 到状态 J，字符 C。在这一行之后是一个整数 S，它将包含要测试的字符串的数量，然后是 S 行与相应的字符串。

这个程序的输出应该是：

```
Case #2:
aaabcccc Rejected
aabbbbcdc Rejected
acdddddd Accepted 
```

它应该说明字符串是被接受还是被拒绝。到目前为止，我只使用输入对工作进行了编码。

**我不知道如何最方便地表示 automaton**。我应该简单地使用数组吗？我会对数组应用什么逻辑？在事先不知道自动机字母表的情况下，有什么办法可以做到吗？我需要一个数据结构来表示自动机吗？我对这个任务有点坚持，并且想要一些想法，一些伪代码或想法来完成它。代码是另一种语言吗？我不想要解决方案，因为我想做我的任务，但如果我可以使用一些帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T07:58:59.710

我认为你可以有一个`tr`转换图，`tr[(i, c)] = j`如果有从`i`状态到`j`状态的转换`c`，则为最终状态的数组，`fs[m]`其中`m`是最终状态的数量和初始状态的整数`s0`。

Bellow 是具有以下属性的类的框架：

```
class Automata
{
public:
    Automata(int start) : s0(start)
    {}

    void add_transition(int i, int j, char c) {
        //...
    }

    void add_final_state(int i) {
        //...
    }

    bool validate_string(const std::string& str) {
        //...
    }
private:
    std::map<std::pair<int, char>, int> tr; // transitions
    std::vector<int> fs; // final states
    int s0; // initial state
}; 
```

# php - 如何以编程方式在 Drupal 7 中向用户配置文件添加新字段

> ID：10579350
> 
> 赞同：0
> 
> 时间：2012-05-14T07:49:31.773
> 
> 标签：php, drupal, drupal-7, drupal-fields, drupal-field-api

我想开发一个模块，在drupal 7中向用户配置文件添加字段，例如电话号码和简历......我不知道该怎么做（使用数据库或使用字段API）请帮助我。
任何清晰的教程将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T07:24:16.763

尝试按照以下代码

```
 $myField_name = "NEW_FIELD_NAME";
    if(!field_info_field($myField_name)) // check if the field already exists.
    {
        $field = array(
            'field_name'    => $myField_name,
            'type'          => 'text',
        );
        field_create_field($field);

        $field_instance = array(
            'field_name'    => $myField_name,
            'entity_type'   => 'user', // change this to 'node' to add attach the field to a node
            'bundle'        => 'user', // if chosen 'node', type here the machine name of the content type. e.g. 'page'
            'label'         => t('Field Label'),
            'description'   => t(''),
            'widget'        => array(
                'type'      => 'text_textfield',
                'weight'    => 10,
            ),
            'formatter'     => array(
                'label'     => t('field formatter label'),
                'format'    => 'text_default'
            ),
            'settings'      => array(
            )
        );
        field_create_instance($field_instance); 
```

希望这行得通……穆罕默德。

# android - 发出 Permission Denial 的传出 SMS

> ID：10579351
> 
> 赞同：3
> 
> 时间：2012-05-14T07:49:46.407
> 
> 标签：android

我想记录所有发送短信并按照下面的代码

SMSObserver 类

```
public class ServiceObserver extends ContentObserver {
private Context mContext;

//private String contactId = "", contactName = "";
private String smsBodyStr = "", phoneNoStr = "";
private long smsDatTime = System.currentTimeMillis();
static final Uri SMS_STATUS_URI = Uri.parse("content://sms/out");

public ServiceObserver(Handler handler, Context ctx) {
    super(handler);
    mContext = ctx;
}

public boolean deliverSelfNotifications() {
    return true;
}
public void onChange(boolean selfChange) {
    try{
        //Log.e("Info","Notification on SMS observer");
        Cursor sms_sent_cursor = mContext.getContentResolver().query(SMS_STATUS_URI, null, null, null, null);
        if (sms_sent_cursor != null) {
            if (sms_sent_cursor.moveToFirst()) {
                String protocol = sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("protocol"));
                Log.e("Info","protocol : " + protocol);
                int type = sms_sent_cursor.getInt(sms_sent_cursor.getColumnIndex("type"));
                    Log.e("Info","SMS Type : " + type);
                    // for actual state type=2
                    if(type == 2){
                        Log.e("Info","Id : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("_id")));
                        Log.e("Info","Thread Id : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("thread_id")));
                        Log.e("Info","Address : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("address")));
                        Log.e("Info","Person : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("person")));
                        Log.e("Info","Date : " + sms_sent_cursor.getLong(sms_sent_cursor.getColumnIndex("date")));
                        Log.e("Info","Read : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("read")));
                        Log.e("Info","Status : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("status")));
                        Log.e("Info","Type : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("type")));
                        Log.e("Info","Rep Path Present : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("reply_path_present")));
                        Log.e("Info","Subject : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("subject")));
                        Log.e("Info","Body : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("body")));
                        Log.e("Info","Err Code : " + sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("error_code")));

                        smsBodyStr = sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("body")).trim();
                        phoneNoStr = sms_sent_cursor.getString(sms_sent_cursor.getColumnIndex("address")).trim();
                        smsDatTime = sms_sent_cursor.getLong(sms_sent_cursor.getColumnIndex("date"));

                        Log.e("Info","SMS Content : "+smsBodyStr);
                        Log.e("Info","SMS Phone No : "+phoneNoStr);
                        Log.e("Info","SMS Time : "+smsDatTime);
                    }
                }
            }
        }
        else
            Log.e("Info","Send Cursor is Empty");
    }
    catch(Exception sggh){
        Log.e("Error", "Error on onChange : "+sggh.toString());
    }
    super.onChange(selfChange);
} 
```

}

在主要活动上

```
ServiceObserver smsSentObserver = new ServiceObserver(new Handler(), this);
this.getContentResolver().registerContentObserver(SMS_STATUS_URI, true, smsSentObserver); 
```

并在清单文件中添加了以下权限

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.test.sms"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<uses-permssion android:name="android.permission.READ_SMS"/>
<uses-permssion android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>    
    <uses-permission android:name="android.permission.INTERNET" />    
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar"
        android:name="com.test.sms.mainactivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name="com.test.sms.ServiceReceiver"> 
        <intent-filter> 
            <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>                
        </intent-filter> 
    </receiver>        
</application> 
```

但是在尝试将短信从第一个模拟器发送到第二个模拟器之后，直到出现这样的权限错误

* **onChange 错误：java.lang.SecurityException: Permission Denial: opening provider com.android.providers.telephony.SmsProvider....需要 android.permission.READ_SMS 或 android.permission.WRITE_SMS***

任何人都可以帮助请......谢谢......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T13:33:23.770

这是因为您的拼写错误（`permssion`而不是`permission`）。只需将相应的行更改为：

```
<uses-permission android:name="android.permission.READ_SMS"/>
<uses-permission android:name="android.permission.WRITE_SMS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:36:49.670

在清单文件中添加以下权限。

`<uses-permission android:name="android.permission.SEND_SMS" />`

希望能帮助到你。

谢谢。

# ruby-on-rails - Rails 3.1.0 + ruby -1.9.2-p180 不能同时使用 unicorn 和 rake

> ID：10579355
> 
> 赞同：1
> 
> 时间：2012-05-14T07:50:13.173
> 
> 标签：ruby-on-rails, rack, unicorn

我在 Rails 3.1.0 上有 Ruby 1.9.2-p180，在 unicorn 4.1.1 上运行。

这是一个有趣的问题：

1.  如果我使用机架 1.4.1：我可以执行“rails generate migration something”，但 Unicorn 无法处理此错误：

    你已经激活了 rack 1.4.1，但是你的 Gemfile 需要 rack 1.3.6。考虑使用 bundle exec。（宝石::加载错误）

2.  如果我卸载 rack 1.4.1 并使用 rack-1.3.6: Unicorn 工作正常，我可以运行服务器，但我不能执行“rails generate migration something”错误：

    /Users/macbookpro/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems.rb:284:in `activate': 无法激活 actionpack-3.2.1，因为机架-1.3.6 与机架冲突 (~> 1.4.0) (Gem::LoadError)

有没有人遇到过这个问题，我应该怎么做才能同时拥有它们（独角兽+能够进行轨道生成迁移）？

# php - Google Maps JS API V3：地图不会在 Internet Explorer 中显示

> ID：10579363
> 
> 赞同：0
> 
> 时间：2012-05-14T07:50:48.077
> 
> 标签：php, javascript, internet-explorer, google-maps-api-3

[http://dev.epicwebdesign.ca/emco/assets/mapping.php](http://dev.epicwebdesign.ca/emco/assets/mapping.php)

[这在http://dev.epicwebdesign.ca/emco/?page=dealerlocator](http://dev.epicwebdesign.ca/emco/?page=dealerlocator)中作为 iFrame 加载。

由于某种原因，该地图不会出现在 Internet Explorer 中。没有 (JS) 错误消息。我已经尝试了所有我能找到的东西，包括在行尾删除几个无关的逗号。

如果我使用开发人员工具手动将 div 高度设置为 500px，它会一直工作，直到我再次搜索并重置。内部 div 并不总是出现。

内部 div 的高度为 100%。map_canvas 高度为 550 像素。内部 div 不应该填充它而不是 0px 高吗？

这仅在 Internet Explorer 中。谷歌代码上没有类或 id，所以我不能强迫它。

这是[同样的行为](https://stackoverflow.com/questions/5719622/google-maps-api-bug)。从 3.3 到 3.8，该修复不起作用。

我现在已经用完了我的 Google-fu，现在是凌晨 4 点 44 分。有任何想法吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Markers</title>
<link rel="stylesheet" type="text/css" href="../css/normalize.css" />
<?php
$a = ''; $b = ''; $c='';
$btext='';
function validateCanadaZip($zip_code)
{
$zip_code = strtoupper($zip_code);
$zip_code = str_replace(" ", "", $zip_code);
$zip_code = str_replace("-", "", $zip_code);

$count = count($zip_code);

if(strlen($zip_code) != 6) {
return array(false, $zip_code);
}

if(preg_match("/^([a-ceghj-npr-tv-z]){1}[0-9]{1}[a-ceghj-npr-tv-z]{1}[0-9]{1}[a-ceghj-npr-tv-z]{1}[0-9]{1}$/i",$zip_code))
return array(true, $zip_code[0].$zip_code[1].$zip_code[2]." ".$zip_code[3].$zip_code[4].$zip_code[5]);
else
return array(false, $zip_code);
}

if (isset($_POST['submit'])){
if (isset($_POST['location'])) 

{
    $zipcode = $_POST['location'];
    $result = validateCanadaZip($zipcode);
    if ($result['0']) {
    } else {
    print $_POST['location'] ." is not a valid Postal Code";
    }
}

    $host = "removed";
    $user = "removed";
    $pass = "removed";
    $dbnm = "removed";

    $conn = mysql_connect ($host, $user, $pass);
    if ($conn) {
    $buka = mysql_select_db ($dbnm);
    if (!$buka) {
        die ("Database Not Found"); 
    }
    } else {
        notify("Fatal Error. Can not connect to Database", ""); 
    }

 $radius = $_POST['radius']; 

$selected="selected=\"selected\"";
if ($radius == 10)      $a=$selected;
else if ($radius == 25) $b=$selected;
else if ($radius == 50) $c=$selected;
else if ($radius == 100) $d=$selected;

$address = str_replace(" ", "+", $result[1]);
$url= 'http://maps.googleapis.com/maps/api/geocode/json?address='.$address.'&sensor=false';

$data = @file_get_contents($url);

$jsondata = json_decode($data,true);
if(is_array($jsondata )&& $jsondata ['status']=="OK"){
  $lat = $jsondata['results'][0]['geometry']['location']['lat'];
  $lng = $jsondata['results'][0]['geometry']['location']['lng'];
}
else echo "didnt get in";

$query1 =  "SELECT name, address, city, prov, postalcode, phone, showroom, lat, lng, ( 6371 * ACOS( COS( RADIANS( $lat ) ) * COS( RADIANS( lat ) ) * COS( RADIANS( lng ) - RADIANS( $lng ) ) + SIN( RADIANS( $lat ) ) * SIN( RADIANS( lat ) ) ) ) AS distance FROM dealers HAVING distance <$radius ORDER BY showroom desc, distance LIMIT 0, 6";

$data = mysql_query($query1) or die("A MySQL error has occurred.<br />Your Query: " . $your_query . "<br /> Error: (" . mysql_errno() . ") " . mysql_error());

 ?> 

<?php 
$btext = '<table width="100%" cellspacing="0" cellpadding="0" id="dealers">';

// set up the arrays
$n = 0;
while($info = mysql_fetch_array( $data )) 
 { 

    ${'latlng'.$n} = array(
    "lat" => addslashes ($info['lat']),
    "lng" => addslashes ($info['lng']),
    "name" => ucwords(strtolower(addslashes ($info['name']))),
    "address" => addslashes ($info['address']),
    "city" => addslashes ($info['city']),
    "province" => addslashes ($info['prov']),
    "postalcode" => addslashes ($info['postalcode']),
    "phonenumber" => addslashes ($info['phone']), 
    "dist" => round($info['distance'],2),
    "showroom" => addslashes ($info['showroom'])

);

$info['showroom']?$bg="#DDD":$bg="";
$info['showroom']?$sr="*":$sr="";

$btext.= '<tr style="background:'.$bg.';">';
$btext.= '<td>';
$btext.= '<a href="javascript:void(0)" class="sidebar" id="row'.$n.'" ><span>'.$sr.ucwords(strtolower($info['name']))."</span></a>";
$btext.= '</td>';
$btext.= '<td>';
$btext.= ucwords(strtolower($info['address']));
$btext.= '<br>';
$btext.= ucwords(strtolower($info['city'])).", ".strtoupper($info['prov']);
$btext.= '<br>';
$btext.= $info['phone'];
$btext.= '</td>';

$btext.= '</td>';
$btext.= '</tr>';
 $n++;

 }

 $btext.= '</table>'; 
 $btext.= '*Come visit our showroom'; 

function getlatlng($array){

    echo $array["lat"].",".$array["lng"];
}

function getmarkertext($array){
    echo "'<div id=\"boxcontent\">'+
    '<div id=\"siteNotice\">'+
    '</div>'+
    '<h2 id=\"firstHeading\" class=\"firstHeading\">".$array["name"]."</h2>'+
    '<div id=\"bodyContent\">'+
    '<p>".ucwords(strtolower($array['address']))."<br>".$array["city"].", ".
    $array["province"]."<br>".
    $array["postalcode"]."<br>".
    $array["phonenumber"]."<br>"."</p>'+
    '</div>'+
    '</div>' ";
}
?>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

 function initialize() {

    var map = new google.maps.Map(document.getElementById('map_canvas'), { 
     mapTypeId: google.maps.MapTypeId.ROADMAP,
      disableDefaultUI: true
   });

    var markerBounds = new google.maps.LatLngBounds();
    var randomPoint, i;
    var infowindow = new google.maps.InfoWindow();

<?php for ($i = 0; $i < $n; $i++) {?>

    randomPoint = new google.maps.LatLng(<?php getlatlng(${'latlng'.$i}); ?>);

    var marker<?php echo $i ?> = new google.maps.Marker({
       position: randomPoint, 
       map: map
    });

    var contentString<?php echo $i ?> = <?php getmarkertext(${'latlng'.$i}) ?> ;

    google.maps.event.addListener(marker<?php echo $i ?>, 'click',
    function(){
        infowindow.close();//hide the infowindow
        infowindow.setContent(contentString<?php echo $i ?>);//update the content for this marker
        infowindow.open(map, marker<?php echo $i ?>);//"move" the info window to the clicked marker and open it
    });

    google.maps.event.addDomListener(document.getElementById('row<?php echo $i ?>'), 'mouseover',
    function(){
        infowindow.close();//hide the infowindow
        infowindow.setContent(contentString<?php echo $i ?>);//update the content for this marker
        infowindow.open(map, marker<?php echo $i ?>);//"move" the info window to the clicked marker and open it

        map.setZoom(15);
        map.setCenter(marker<?php echo $i ?>.getPosition());

    });

     markerBounds.extend(randomPoint);

   <?php } ?>

   map.fitBounds(markerBounds);
 }

</script>

<?php } ?>

<style>
body, body form input, a{
background:none;
    font-family:Arial, Helvetica, sans-serif;
    height:100%;
    text-align:justify; 
    color:#383838;
    text-decoration:none;   

    text-align:left;

}
body form input{
    background:#FFF;

}
  #map_canvas {
    height: 550px;
    width:400px;
    display:block;

    margin:0 auto;
  }

#boxcontent{

}
#firstHeading{
    margin:0px;
    font-size:14px;
}
#bodyContent{
    font-size:12px;
}

.sidebar{
display:block;
height:59px;
width:190px;    
padding:0px;
}

#dealers{
    font-size:12px;

}
#dealers a:hover{
background:#eee;    
}

#dealers tr td{

    padding:0px;
    width:200px;
    margin: -10px 0px;
    height:59px;

}

#dealers tr{
height:59px;
padding:0px;    
}

</style>

</head>

<?php $i = isset($_POST['submit'])?"<body onload=\"initialize()\">" : "<body>"; 
echo $i."\n";

?>
<table cellpadding="0" cellspacing="0">
<tr>

<td style="vertical-align:top;">

<form method='post'>
 Within <select name='radius' value='50'>
 <option <?php echo $a ?> value='10' >10</option>
 <option <?php echo $b ?> value='25'>25</option>
 <option <?php echo $c ?> value='50'>50</option>
 </select>
 km of

 <input type='text' maxlength="7"  name='location' value='<?php echo $result[1] ?>'/>
 <input type='submit' name='submit' value='submit' />
 </form>
 <?php echo $btext ?>
</td>

<td id="map_canvas">
  </td>

  </tr>
  </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:47:24.190

似乎地图 api 在使用表格单元格作为地图内容时遇到问题。这在 Internet Explorer 中并不奇怪。通过在表格单元格内简单地嵌套一个 id="map_canvas" 的 div（并从“td”标签中删除 id），在 Internet Explorer 9 中为我显示的页面。

因此，将 IE 设置为 IE7 模式可以使地图正确显示，即使使用表格单元格的地图也是如此。

# objective-c - 如何从可可应用程序运行 rails 命令？

> ID：10579364
> 
> 赞同：3
> 
> 时间：2012-05-14T07:50:48.623
> 
> 标签：objective-c, ruby-on-rails, cocoa, rvm

我已经坚持了一段时间了。我正在尝试从我的可可应用程序运行 rails shell 命令来创建一个新闻 rails 应用程序。当我跑

```
~/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/bin/rails new projectname 
```

我能够创建一个新项目。但是如果我运行这样的东西

```
NSString *path = @"~/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/bin/rails";
NSString *script = [NSString stringWithFormat:@"%@ new ~/Desktop/testapp", path];
system([script UTF8String]); 
```

或这个

```
- (IBAction)buildProject:(NSButton *)sender 
{
NSString *path = @"~/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/bin/rails";
NSArray *args = [NSArray arrayWithObjects:@"new", @"~/Desktop/testapp", nil];

NSTask *task = [NSTask new];
[task setLaunchPath:path];
[task setArguments:args];
[task launch];
} 
```

我收到以下错误

```
/Users/dylanross/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/bin/rails:7:in `require': no such file to load -- rails/cli (LoadError)
from /Users/dylanross/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/bin/rails:7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-26T06:26:13.957

我遇到了类似的问题，因为我使用`/bin/sh`的是 launchPath。

试试这个快速代码。

```
let task = NSTask()
task.launchPath = "/bin/bash"
let fileToRun = "/Users/johndoe/Desktop/testapp/app.rb"
task.arguments = ["-l", "rvm-auto-ruby", fileToRun]
let pipe = NSPipe()
task.standardOutput = pipe
task.launch() 
```

# php - PHP 密码重置令牌。解析重置网址？

> ID：10579367
> 
> 赞同：0
> 
> 时间：2012-05-14T07:51:08.513
> 
> 标签：php, passwords, token, reset

我对我的密码重置链接有疑问。到目前为止，我已经设法使用 sha256 生成一个随机令牌，将其附加到 URL - domain.com/reset/randomtoken - 并将链接通过电子邮件发送给相应的用户。我的问题是，我将使用哪个函数将其转到 reset.php，而不是认为有一个名为 domain.com/reset/randomtoken 的目录。在此先感谢，我仍然是一个菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:56:07.433

配置您的 Web 服务器（Apache、nginx 等）以将该路径重定向到您的 PHP 文件，或者让您的生活更轻松并生成一个如下所示的链接：

```
domain.com/reset.php?token=randomtoken 
```

然后用于`$_GET['token']`检索值。

# java - 推土机 5.3.2。以编程方式设置自定义转换器？

> ID：10579368
> 
> 赞同：7
> 
> 时间：2012-05-14T07:51:11.760
> 
> 标签：java, dozer

如何以编程方式为推土机设置自定义转换器？以下代码不起作用：

自定义转换器实现：

```
class ConverterImpl extends DozerConverter<A, B> {

ConverterImpl() {
    super(A.class, B.class);
}

@Override
public B convertTo(A source, B destination) {
    return destination;
}

@Override
public A convertFrom(B source, A destination) {
    return destination;
}
} 
```

测试代码：

```
DozerBeanMapper mapper = new DozerBeanMapper();
mapper.setCustomConverters(Collections.<CustomConverter>singletonList(new ConverterImpl()));
A a = new A(); 
B b = mapper.map(a, A.class); 
```

运行上面的代码后，自定义转换器不会被调用。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:08:41.110

看起来您必须实际添加一个特定的映射，不幸的是，您只能使用编程 API 指定字段级转换器，而不是类级转换器。因此，如果将 A 和 B 类包装在容器类中，则可以为 A 和 B 字段指定映射。

例如，以下详细代码按预期工作：

```
public class DozerMap {

   public static class ContainerA {
      private A a;
      public A getA() { return a; }
      public void setA(A a) { this.a = a; }
   }

   public static class ContainerB {
      private B b;
      public B getB() { return b; }
      public void setB(B b) { this.b = b; }
   }

   private static class A { };

   private static class B { };

   static class ConverterImpl extends DozerConverter<A, B> {

      ConverterImpl() {
         super(A.class, B.class);
      }

      @Override
      public B convertTo(A source, B destination) {
         Logger.getAnonymousLogger().info("Invoked");
         return destination;
      }

      @Override
      public A convertFrom(B source, A destination) {
         Logger.getAnonymousLogger().info("Invoked");
         return destination;
      }
   }

   public static void main(String[] args) {

      DozerBeanMapper mapper = new DozerBeanMapper();
      mapper.setCustomConverters(Collections.<CustomConverter> singletonList(new ConverterImpl()));
      BeanMappingBuilder foo = new BeanMappingBuilder() {

         @Override
         protected void configure() {
            mapping(ContainerA.class, ContainerB.class).fields("a", "b", FieldsMappingOptions.customConverter(ConverterImpl.class));
         }
      };
      mapper.setMappings(Collections.singletonList(foo));
      ContainerA containerA = new ContainerA();
      containerA.a = new A();
      ContainerB containerB = mapper.map(containerA, ContainerB.class);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:01:57.817

为什么要以编程方式设置它？我的意思是你有什么特别的需要吗？否则，通过 xml 文件映射可以正常工作。

如果您想以编程方式进行更多操作，而不是通过一些 xml 配置文件，请查看 [Orika](http://code.google.com/p/orika/wiki/GettingStartedGuide)。

它具有良好的 API 支持。

# ruby-on-rails - 在多个表单失败时将 ID 保留在 URL 中

> ID：10579375
> 
> 赞同：0
> 
> 时间：2012-05-14T07:52:08.530
> 
> 标签：ruby-on-rails

是的，所以`http://localhost:3000/reviews/new/5`告诉我的应用程序为 ID 为 5 的产品设置产品评论。但是，当我提交带有虚假信息的表单时，我会在“创建”操作中触发此代码：

```
 @style = Style.find(params[:review][:style_id])
    render 'new' 
```

当页面重新加载时，我得到了新的 URL `http://localhost:3000/reviews`，这很好，但是如果我再次提交虚假信息，那么在下一页加载 @style 将无法分配。

这是“新”操作中的代码：

```
 @style = Style.find(params[:id])
    @review = current_user.reviews.build(style_id: params[:id]) 
```

我确信这很简单。休息吃晚饭。

我通过在我的视图中添加一个 if 语句来修复它......我改变了：

```
<%= f.hidden_field :style_id, :value => params[:id] %> 
```

到：

```
<% if params[:id] == nil %>
    <%= f.hidden_field :style_id, :value => params[:review][:style_id] %>
<% else %>
    <%= f.hidden_field :style_id, :value => params[:id] %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:12:17.947

而不是这个：

```
<% if params[:id] == nil %>
    <%= f.hidden_field :style_id, :value => params[:review][:style_id] %>
<% else %>
    <%= f.hidden_field :style_id, :value => params[:id] %>
<% end %> 
```

你可以简单地这样做：

```
<%= f.hidden_field :style_id, :value => @style.id %> 
```

# c# - 从未引用的程序集中获取类型

> ID：10579378
> 
> 赞同：0
> 
> 时间：2012-05-14T07:52:17.403
> 
> 标签：c#, reflection, assemblies

我想从未引用的程序集中获取类型。我尝试了这个问题的建议：[如何从未引用的程序集中获取类型？](https://stackoverflow.com/questions/463228/how-to-get-a-type-from-an-unreferenced-assembly)像这样：

```
Assembly assembly = Assembly.LoadFrom(@"c:\Path\To\My\Assembly\myAssembly.dll");
Type myType = assembly.GetType("myAssembly.MyClass"); 
```

读取程序集有效，但 GetType 方法返回`null`. 请求的类型 ( `MyClass`) 是公共的，因此这不是问题，因为我在上面链接的问题的一个答案中阅读。

**编辑：**

我必须从不同的程序集中加载许多不同的类型。我要加载的类型在 XML 文件中定义。现在`myType.FullName`存储在 XML 文件中，并且可以正常工作。但是所以我没有得到存储类型的程序集的名称。我现在的问题是：

`GetType`是否可以通过指定 -Method来获取类型`myType.AssemblyQualifiedName`？

我试过这个，但它对我不起作用 - 保存的类型是`null`.

# android - 方法 drawVertices() 没有在 Android Canvas 上绘制任何东西

> ID：10579382
> 
> 赞同：1
> 
> 时间：2012-05-14T07:52:29.463
> 
> 标签：android, canvas

我想画三角形和多边形

为了画一个三角形，我使用了我在互联网上找到的这个方法：

```
this.p.setStyle(Paint.Style.STROKE);
    int triangleColors[] = {
            this.p.getColor(), this.p.getColor(), this.p.getColor(),
            this.p.getColor(), this.p.getColor(), this.p.getColor()
        };

    float verts[] = {
            ptsFloat.get(0).x, ptsFloat.get(0).y,
            ptsFloat.get(1).x, ptsFloat.get(1).y,
            ptsFloat.get(2).x, ptsFloat.get(2).y
    };
    c.drawVertices(Canvas.VertexMode.TRIANGLES, 
        verts.length, 
        verts, 
        0, 
        null,
        0,
        triangleColors,
        0,
        null, 
        0,
        0,
        this.p); 
```

但是结果是空的，我什么都没画……而drawLine，drawCircle工作得很好，你知道为什么这个方法不起作用吗？此外，我的 logcat 控制台中没有任何帮助我的痕迹！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:03:14.320

好的，所以在自己尝试之后，我意识到问题出在你的颜色阵列上。如果您对每个点使用相同的颜色，那么您不需要该数组。getColor() 函数没有返回您需要的 int 值。如果您需要不同的颜色，请使用 Color.X 将该颜色分配给三角形的该部分。

# backbone.js - 骨干集合添加事件触发一次

> ID：10579395
> 
> 赞同：1
> 
> 时间：2012-05-14T07:53:42.443
> 
> 标签：backbone.js, backbone-events

我有一个 Backbone 集合，当我向它添加一个新模型时，“添加”事件似乎没有像我预期的那样工作。我已经绑定了 2 个视图来监听集合上的添加事件，但似乎只有一个视图收到了事件通知，并且当这种情况发生时，没有 PUT 请求发送到我的服务器。当我删除第二个绑定时，另一个绑定工作并发送 PUT 请求。这是代码片段：

```
 var FlagList = Backbone.Collection.extend({
    model: Flag  // model not shown here... let me know if it would help to see
});

    var FlagCollectionView = Backbone.View.extend({
    el: $('ul.#flags'),
    initialize: function() {
        flags.bind('add', this.addFlag, this);  // this one doesn't fire!!
    },
    addFlag: function(flag) {
        alert("got it 1");  // I never see this popup
    }
});

    var AddFlagView = Backbone.View.extend({
    el: $("#addFlagPopup"),
    events: {
        "click #addFlag": "addFlag"
    },
            initialize: function() {
                    flags.bind('add', this.closePopup, this);   // this one fires!!
            }
    addFlag: function() {
        flags.create(new Flag);
    },
    closePopup: function() {
        alert("got it 2");  // I see this popup
    }
});

var flags = new FlagList;
var addFlagView = new AddFlagView;
var flagCollectionView = new FlagCollectionView; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T09:34:04.700

几点建议：

**ID 与类**

你已经通过结合一个类和一个 id 来过度限定你的选择器。jQuery 允许这样做，但是 ID 选择器在页面上应该是唯一的，因此更改`el: $('ul.#flags')`为`el: $('ul#flags')`.

**利用骨干**

我喜欢明确地将我的集合和/或模型传递给我的视图，并在视图上使用魔法`collection`和`model`属性。

```
var flags = new FlagList;
var addFlagView = new AddFlagView({collection: flags});
var flagCollectionView = new FlagCollectionView({collection: flags}); 
```

这意味着在您看来，您将自动访问 this.collection

**解除绑定事件以避免重影视图**

```
var FlagCollectionView = Backbone.View.extend(
{
    initialize: function (options)
    {
        this.collection.bind('add', this.addFlag, this);
    },
    addFlag: function (flag)
    {
        alert("got it 1");
    },
    destroyMethod: function()
    {
        // you need some logic to call this function, this is not a default Backbone implementation
        this.collection.unbind('add', this.addFlag);
    }
});

var AddFlagView = Backbone.View.extend(
{
    initialize: function ()
    {
        this.collection.bind('add', this.closePopup, this);
    },
    closePopup: function ()
    {
        alert("got it 2");
    },
    destroyMethod: function()
    {
        // you need some logic to call this function, this is not a default Backbone implementation
        this.collection.unbind('add', this.closePopup);
    }
}); 
```

看来我必须同意@fguillen，您的问题一定出在您初始化视图的方式上，因为在我的评论中我提到它最有可能与时间有关，即：在“添加”之后将您的事件绑定到集合' 事件已经触发。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T08:24:05.787

这段代码对我有用：

```
var FlagList = Backbone.Collection.extend({});

var FlagCollectionView = Backbone.View.extend({
  initialize: function() {
    flags.bind('add', this.addFlag, this); 
  },
  addFlag: function(flag) {
      alert("got it 1");
  }
});

var AddFlagView = Backbone.View.extend({
  initialize: function() {
    flags.bind('add', this.closePopup, this);
  },
  closePopup: function() {
    alert("got it 2");
  }
});

var flags = new FlagList;
var addFlagView = new AddFlagView;
var flagCollectionView = new FlagCollectionView;

flags.add({key:"value"}); 
```

[检查jsFiddle](http://jsfiddle.net/fguillen/CPuYH/)

你的问题在别的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T02:13:02.123

如果你在犯了我犯的同样愚蠢的错误后来到这里，请确保你有：

```
this.collection.bind( 'add', this.render ) 
```

而**不是**：

```
this.collection.bind( 'add', this.render() ) 
```

# utf-8 - 有没有办法恢复表示字符串的字节数组，该数组保存为具有不同编码的字符串

> ID：10579403
> 
> 赞同：0
> 
> 时间：2012-05-14T07:54:14.003
> 
> 标签：utf-8, character-encoding

我们有一个保存字节数组（HBase）的数据库。我们所有的字符串都被编码为字节，我们手动进行转换。但是，一些旧数据被错误地保存了，不知道有没有办法恢复它们。

发生的事情是我们有一些原始文本被编码，比方说，在 ISO_8859_1 但是，将这些字符串保存为字节数组的过程做了类似的事情`new String(original_bytes, UTF8).getBytes(UTF8)` （而 original_bytes 将字符串表示为 ISO8859_1）

我找不到恢复 original_bytes 数组的方法。它实际上可能吗？

我尝试使用这个简单的 Java 示例代码重现它：

```
String s = "é";
System.out.println("s: " + s);
System.out.println("s.getBytes: " + Arrays.toString(s.getBytes()));
System.out.println("s.getBytes(UTF8): " + Arrays.toString(s.getBytes(Charsets.UTF_8)));
System.out.println("new String(s.getBytes()): " + new String(s.getBytes()));
System.out.println("new String(s.getBytes(), UTF-8): " + new String(s.getBytes(), Charsets.UTF_8));

byte [] iso = s.getBytes(Charsets.ISO_8859_1);
System.out.println("iso " + Arrays.toString(iso));
System.out.println("new String(iso)" + new String(iso));
System.out.println("new String(iso, ISO)" + new String(iso, Charsets.ISO_8859_1));
System.out.println("new String(iso).getBytes()" + Arrays.toString(new String(iso).getBytes()));
System.out.println("new String(iso).getBytes(ISO)" + Arrays.toString(new String(iso).getBytes(Charsets.ISO_8859_1)));
System.out.println("new String(iso, UTF8).getBytes()" + Arrays.toString(new String(iso, Charsets.UTF_8).getBytes()));
System.out.println("new String(iso, UTF8).getBytes(UTF8)" + Arrays.toString(new String(iso, Charsets.UTF_8).getBytes(Charsets.UTF_8))); 
```

输出：（在默认字符集为 UTF8 的计算机上）

```
s: é
s.getBytes: [-61, -87]
s.getBytes(UTF8): [-61, -87]
new String(s.getBytes()): é
new String(s.getBytes(), UTF-8): é
iso [-23]
new String(iso)�
new String(iso, ISO)é
new String(iso).getBytes()[-17, -65, -67]
new String(iso).getBytes(ISO)[63]
new String(iso, UTF8).getBytes()[-17, -65, -67]
new String(iso, UTF8).getBytes(UTF8)[-17, -65, -67]
new String(new String(iso).getBytes(), Charsets.ISO_8859_1) ï¿½ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:09:18.940

不幸的是，不，并非在每种情况下都是可能的。

UTF-8 有很多非法的字节序列，在解码时（通常）会被一些替换字符替换。当您`original_bytes`包含任何这些字节序列时，该信息肯定会丢失。

你最好的选择是做相反的事情，这可能会让你尽可能接近原始字符串：

```
byte[] originalISOData = ...;
byte[] badUTF8 = new String(originalISOData, "UTF-8").getBytes("UTF-8");
byte[] partialReconstruction = new String(badUTF8, "ISO-8859-1"); 
```

**tl;dr**将非 UTF-8 数据解码为 UTF-8*通常*不是无损操作。有效的 UTF-8 解码器将用替换字符替换所有格式错误的字节序列（甚至中止解码，具体取决于解码器及其设置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T22:08:38.393

您可以使用 Hbase API 提供的 Bytes 类。例如，将字节数组转换为字符串，您可以使用“Bytes.toString(byteArray)”。

# php - 图像 imagejpeg() 不返回任何内容。CakePHP

> ID：10579405
> 
> 赞同：0
> 
> 时间：2012-05-14T07:54:20.943
> 
> 标签：php, ajax, cakephp, upload

我正在修改此插件以保存路径记录并制作缩略图并保存[http://bakery.cakephp.org/articles/srs2012/2012/03/12/ajaxmultiupload_plugin_for_cake_2_0_x_and_2_1](http://bakery.cakephp.org/articles/srs2012/2012/03/12/ajaxmultiupload_plugin_for_cake_2_0_x_and_2_1) 我修改了upload.php像这样的插件：

```
function save($path, $folder, $filename) {    
    $input = fopen("php://input", "r");
    $temp = tmpfile();
    $realSize = stream_copy_to_stream($input, $temp);
    fclose($input);

    if ($realSize != $this->getSize()){            
        return false;
    }
    $width = 290; 
    $height = 146;
    $target = fopen($path, "w");  
    //$this->Upload->setImage($this->Image);

    fseek($temp, 0, SEEK_SET);
    stream_copy_to_stream($temp, $target);  
    fclose($target);
    $val = $this->resizeImage($filename, $filename, $folder, $folder.'/small/', $width, $height, 100);
    $this->saveToDatabase(array('path' => $folder.$filename, 'thumb' => $folder.'/small/'.$filename));

    return true;
} 
```

这是我保存的功能：

```
function saveToDatabase($data){
    $this->Image->save($data);
} 
```

我添加以下内容以创建缩略图：

```
function resizeImage($src_img, $dst_img, $src_path2, $dst_path2, $dst_w, $dst_h, $dst_quality){
    //Stop and giving an error if the file does not exists.
    $src_path = 'img/';
    $dst_path = 'img/';
    $src_path .= $src_path2;
    $dst_path .= $dst_path2;
    if(file_exists($src_path . basename($src_img)) == false){
        echo 0;
    }
        //Get variables for the function.
            //complete path of the source image.
    $src_cpl = $src_path . basename($src_img);
    //return $src_cpl;
            //complete path of the destination image.
    $dst_cpl = $dst_path . basename($dst_img);
            //extension excl "." of the source image, in lowercase.
    $src_ext = strtolower(end(explode(".", $src_img)));
            //width and height sizes of the source image.
    list($src_w, $src_h) = getimagesize($src_cpl);

            //get type of image.
    //return 'IETS: '.$src_cpl.' :IETS';  
    $src_type = exif_imagetype($src_cpl);//
    //Checking extension and imagetype of the source image and path.
    if( ($src_ext =="jpg") && ($src_type =="2") ){
        $src_img = imagecreatefromjpeg($src_cpl);
    }else if( ($src_ext =="jpeg") && ($src_type =="2") ){
        $src_img = imagecreatefromjpeg($src_cpl);
    }else if( ($src_ext =="gif") && ($src_type =="1") ){
        $src_img = imagecreatefromgif($src_cpl);
    }else if( ($src_ext =="png") && ($src_type =="3") ){
        $src_img = imagecreatefrompng($src_cpl);
    }else{
        die('<p>The file "'. $src_img . '" with the extension "' . $src_ext . '" and the imagetype "' . $src_type . '" is not a valid image. Please upload an image with the extension JPG, JPEG, PNG or GIF and has a valid image filetype.</p>');
    }

    //Get heights and width so the image keeps its ratio.
    $x_ratio = $dst_w / $src_w;
    $y_ratio = $dst_h / $src_h;

        if( (($x_ratio > 1) || ($y_ratio > 1)) && ($x_ratio > $y_ratio) ){
        //If one of the sizes of the image is smaller than the destination (normal: more height than width).
        $dst_w = ceil($y_ratio * $src_w);
        $dst_h = $dst_h;
    }elseif( (($x_ratio > 1) || ($y_ratio > 1)) && ($y_ratio > $x_ratio) ){
        //If one of the sizes of the image is smaller than the destination (landscape: more width than height).
        $dst_w = $dst_w;
        $dst_h = ceil($x_ratio * $src_h);
    }elseif (($x_ratio * $src_h) < $dst_h){
        //if the image is landscape (more width than height).
        $dst_h = ceil($x_ratio * $src_h);
        $dst_w = $dst_w;
    }elseif (($x_ratio * $src_h) > $dst_h){
        //if the image is normal (more height than width).
        $dst_h = ceil($x_ratio * $src_h);
        $dst_w = $dst_w;
    }else{
        //if the image is normal (more height than width).
        $dst_w = ceil($y_ratio * $src_w);
        $dst_h = $dst_h;
    }
     // Creating the resized image.
    $dst_img=imagecreatetruecolor($dst_w,$dst_h);
    $result = imagecopyresampled($dst_img,$src_img,0,0,0,0,$dst_w, $dst_h,$src_w,$src_h);

    // Saving the resized image.
    $result2 = imagejpeg($dst_img,$dst_cpl,$dst_quality);
    return 'dfdfhdfhhgfddghhgffddghdghhdgghgfhdh: '.$result.'|||asdasda'.$result2;

    // Cleaning the memory.
    imagedestroy($src_img);
    imagedestroy($dst_img);

}

enter code here 
```

现在我已经在同一台服务器上使用了这段代码，它运行得非常好。但在我的返回值中，我得到以下信息：

```
[uploader] responseText = dfdfhdfhhgfddghhgffddghdghhdgghgfhdh: 1|||asdasda{"success":true} 
```

函数 imagejpeg 不返回任何内容。

现在可能出了什么问题？我只是一个实习生，我不知道出了什么问题。

问候，伤害。撞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:40:49.937

请参阅[http://php.net/manual/en/function.imagejpeg.php](http://php.net/manual/en/function.imagejpeg.php) - 我认为您在函数 imagejpeg 中有问题 - 请参阅参数文件名。

如果会有更多问题，请参阅[http://www.php.net/manual/en/function.gd-info.php](http://www.php.net/manual/en/function.gd-info.php)

# python - PIL 的 getpixel 和 getdata 的数据不一样？

> ID：10579414
> 
> 赞同：2
> 
> 时间：2012-05-14T07:55:21.007
> 
> 标签：python, python-imaging-library

伙计们。我使用 getpixel 和 getdata 从同一张图片中检索数据。但有些点不同。为什么？

```
im = Image.open("cljr.jpg") 
t=list(im.getdata())
for i in range(10):
    print "%d %x %x %x"%(i,t[i][0],t[i][1],t[i][2])

print '' 

print "%x %x %x"% im.getpixel((0,7))
print "%x %x %x"% im.getpixel((0,8)) 
```

这是输出：

```
0 ec f7 f9
1 ec f7 f9
2 ec f7 f9
3 ec f7 f9
4 ec f7 f9
5 ec f7 f9
6 ec f7 f9
7 ec f7 f9
8 eb f6 f8
9 eb f6 f8

ec f7 f9
ed f8 fa 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:08:21.760

从这里，您可以看到它`im.getdata`是按列优先排序的，并且`im.getpixel`将是行优先的。

```
>>> import Image
>>> import numpy as np
>>> x = np.array([[1., 2.], [3., 4.]])
>>> im = Image.fromarray(x)
>>> list(im.getdata())
[1.0, 2.0, 3.0, 4.0]
>>> [im.getpixel(x) for x in [(0,0), (0,1), (1,0), (1,1)]]
[1.0, 3.0, 2.0, 4.0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T21:31:09.303

混淆是由于 arg to`getpixel`是坐标`(x, y)`和

*   x = 列索引
*   y = 行索引。

即你应该做`getpixel(col, row)`

# node.js - 从 Node.js 中的主事件循环中卸载繁重的计算

> ID：10579416
> 
> 赞同：5
> 
> 时间：2012-05-14T07:55:38.180
> 
> 标签：node.js

对于一些用户请求，我需要做一些繁重的计算（大约需要 100ms 的时间）；当然，我不想在节点的主事件循环中执行这些操作，以免阻止其他请求提供服务。

解决此问题的最明显但绝对不是最干净的方法是将计算卸载到另一个程序并异步等待结果。

有没有办法在不离开节点进程（并实现进程间通信）的情况下做到这一点？例如这样的：

```
var compute = function (input) {
    var i,
        result = input;
    for (i = 0; i < 1000000; i++) {
        result = md5(result);
    }
}

var controller = function (req, res) {
    offload(compute, req.params.input, function(result) {
        res.send(result);
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T05:35:37.310

我找到了一个[`compute-cluster`](https://github.com/lloyd/node-compute-cluster)模块，它似乎是为我的目标而设计的。它产生子进程，并使用 IPC 进行通信（不浪费套接字）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:05:50.567

JavaScript 语言不支持线程，并且 node.js 也不为它们提供接口，因此您需要依赖库来提供线程功能。有关可能的解决方案，请参阅[node-fibers](https://github.com/laverdet/node-fibers)和[node-threads-a-go-go](https://github.com/xk/node-threads-a-gogo)库。

如果您正在寻找一种在 node.js 中使 IPC 更容易的方法，请考虑使用[zeromq 库](http://www.zeromq.org/)（[node.js 绑定](http://www.zeromq.org/bindings:node-js)）。 [这个有点相关的答案](https://stackoverflow.com/a/9491860/244128)也可能有用。

# javascript - Jquery/Javascript 使用另一个文本框的 id 获取文本框的 id

> ID：10579418
> 
> 赞同：1
> 
> 时间：2012-05-14T07:55:51.113
> 
> 标签：javascript, jquery, asp.net-mvc-3

我想使用 jQuery/JavaScript 函数来验证文本框的输入。

我有一对这样的复选框：

```
<input type="text" id="MinMondayTxt" />
<input type="text" id="MondayTxt" /> 
```

这是一周中的每一天（MinTuesdatTxt、MinWednesdayTxt...）

函数是这样的：

```
function ValidateTxt(TxtId){
} 
```

它以文本框的 ID 作为输入。我想要做的是以下内容：

1）检查Id是否以“Min”开头

2）通过从id中删除“Min”来获取相应的文本框。例如，如果我们有`MinMondayTxt`我想删除“Min”以访问`MondayTxt`文本框

3）比较2个文本框的值（所有值都是数字）

4)`if MinMondayTxt > MondayTxt`提醒用户

我正在为步骤 1) 和 2) 寻求帮助：如何检查 id 是否以“Min”开头以及如何获取相应的文本框 id（通过删除 min）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:58:57.927

您可以将[replace()](http://www.w3schools.com/jsref/jsref_replace.asp) 方法与`#id`jquery 的选择器一起使用，如下所示

```
function ValidateTxt(TxtId){ 
 var withoutminid = TxtId.replace(/^Min/, '');

 var withouminidval = $('#' + withoutminid).val();
 var minidval = $('#' + TxtId).val();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:57:45.500

如果存在，这将删除`"Min"`，然后获取 jQuery 对象：

```
$('#' + TxtId.replace(/^Min/, '')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T08:02:12.330

也许你可以尝试拆分：

```
txtId.split('Min'); 
```

如果 Min 存在，它应该创建一个这样的数组：

```
array = ["Min","MondayTxt"]; 
```

那么你只需要使用`array[1]`.

# c++ - TagLib：无法打开文件

> ID：10579419
> 
> 赞同：1
> 
> 时间：2012-05-14T07:55:59.073
> 
> 标签：c++, audio, boost, metadata, taglib

我正在尝试编写一个简单的程序来查找 TagLib (http://developer.kde.org/~wheeler/taglib.html) 的工作原理。该程序适用于代码中的注释。但是当我更改代码时，我得到了这些我无法解决的错误。这是代码

```
#include<iostream>
#include<QString>
//#include "Helper.h"
#include "../../player/Util.h"
#include <taglib/tag.h>
#include <taglib/taglib.h>
#include <taglib/fileref.h>
#include <QString>

#include <boost/filesystem.hpp>

using std::string;
struct MetaData{

    string filepath, artist, album, title;
    signed int year, track_num, length_ms, bitrate;
};

//MetaData getMetaDataOfFile(QString file)
MetaData getMetaDataOfFile(string file)
{
    MetaData md;
    //TagLib::FileRef f(TagLib::FileName(file.toUtf8())); 
    const char * filename = file.c_str();
    std::cout<< filename;
    TagLib::FileRef f(TagLib::FileName(filename)); 

    //md.filepath = file.toStdString();
    md.filepath = file;

    //boost::filesystem::path filePath(file.toStdString());
    boost::filesystem::path filePath(file);
    md.title = filePath.stem().string();

    if(f.isNull()) return md;
    if(!f.tag()) return md;
    if(f.tag()->isEmpty()) return md;

    string artist = f.tag()->artist().to8Bit(true);
    string album = f.tag()->album().to8Bit(true);
    string title = f.tag()->title().to8Bit(true);
    uint year = f.tag()->year();
    uint track = f.tag()->track();
    int bitrate = f.audioProperties()->bitrate() * 1000;
    int length = f.audioProperties()->length();

    md.album = cnvrtString2FirstUpper(album);
    md.artist = cnvrtString2FirstUpper(artist);
    md.title = cnvrtString2FirstUpper(title);
    //md.filepath = file.toStdString();
    md.filepath = file;
    md.length_ms = length * 1000;
    md.year = year;
    md.track_num = track;
    md.bitrate = bitrate;

    if(md.title.length()==0)
    {

    //boost::filesystem::path filePath(file.toStdString());
    boost::filesystem::path filePath(file);
    md.title = filePath.stem().string();
    }

    return md;
}

int main()
{
    using namespace std;

    //QString file("/home/vickey/Downloads/song1.mp3");
    string file("/home/vickey/Downloads/song1.mp3");
    MetaData md = getMetaDataOfFile(file);

    return 0;

} 
```

在编译我得到这个错误

```
 g++ getmd.cpp -o getmd -I /usr/include/qt4/ -I /usr/include/qt4/QtCore/ -ltag -lboost_system -lboost_filesystem -lQtCore -g
getmd.cpp: In function ‘MetaData getMetaDataOfFile(std::string)’:
getmd.cpp:36:10: error: request for member ‘isNull’ in ‘f’, which is of non-class type ‘TagLib::FileRef(TagLib::FileName) {aka TagLib::FileRef(const char*)}’
getmd.cpp:37:11: error: request for member ‘tag’ in ‘f’, which is of non-class type ‘TagLib::FileRef(TagLib::FileName) {aka TagLib::FileRef(const char*)}’
getmd.cpp:38:10: error: request for member ‘tag’ in ‘f’, which is of non-class type ‘TagLib::FileRef(TagLib::FileName) {aka TagLib::FileRef(const char*)}’
getmd.cpp:40:23: error: request for member ‘tag’ in ‘f’, which is of non-class type ‘TagLib::FileRef(TagLib::FileName) {aka TagLib::FileRef(const char*)}’
getmd.cpp:41:22: error: request for member ‘tag’ in ‘f’, which is of non-class type ‘TagLib::FileRef(TagLib::FileName) {aka TagLib::FileRef(const char*)}’
getmd.cpp:42:22: error: request for member ‘tag’ in ‘f’, which is of non-class type ‘TagLib::FileRef(TagLib::FileName) {aka TagLib::FileRef(const char*)}’
getmd.cpp:43:19: error: request for member ‘tag’ in ‘f’, which is of non-class type ‘TagLib::FileRef(TagLib::FileName) {aka TagLib::FileRef(const char*)}’
g    etmd.cpp:44:20: error: request for member ‘tag’ in ‘f’, which is of non-class type ‘TagLib::FileRef(TagLib::FileName) {aka TagLib::FileRef(const char*)}’
getmd.cpp:45:21: error: request for member ‘audioProperties’ in ‘f’, which is of non-class type ‘TagLib::FileRef(TagLib::FileName) {aka TagLib::FileRef(const char*)}’
getmd.cpp:46:20: error: request for member ‘audioProperties’ in ‘f’, which is of non-class type ‘TagLib::FileRef(TagLib::FileName) {aka TagLib::FileRef(const char*)}’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:45:30.723

两个版本——评论和未评论——都是错误的。Unix 上的 TagLib 需要`const char *`文件名。从 a 中获得一个的最佳方法`QString`是使用[`QFile::encodeName()`](http://qt-project.org/doc/qt-4.8/qfile.html#encodeName). 所以你应该有这样的东西：

```
TagLib::FileRef f(QFile::encodeName(file).constData()); 
```

# eclipse - 我在哪里可以找到 java 元素过滤器对话框？

> ID：10579422
> 
> 赞同：0
> 
> 时间：2012-05-14T07:56:13.890
> 
> 标签：eclipse, eclipse-indigo

eclipse中的java元素过滤器对话框在哪里？

我找不到它。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T09:45:24.190

In package explorer tab -> view menu (down arrow icon) -> customize views.

Then you can select radio button to show the empty package.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:20:31.670

在 STS v3.1 中，如果您正在查看 Java 透视图，您可以在 Package Explorer 视图中看到：

![Java 透视图的 Package Explorer 视图、视图菜单的屏幕截图](../Images/f99254e6cc48fa4b1740a1ac81c75961.png)

然后，您可以通过选中（或取消选中）您要过滤（或显示）的那些元素来操纵“视图”，如下所示：

![Java 元素过滤器的屏幕截图](../Images/495c4f5361fe6fd734517693c9ca1568.png)

希望有帮助。

# javascript - NodeJs, javascript: .forEach 似乎是异步的？需要同步

> ID：10579423
> 
> 赞同：14
> 
> 时间：2012-05-14T07:56:18.433
> 
> 标签：javascript, node.js, asynchronous, foreach, synchronous

我目前正在与 3 个朋友一起使用 nodeJs、expressJs、MongoDB、html5 进行一个项目……由于我们对这些技术还很陌生，因此遇到了一些问题。我找不到解决方案的一个大问题是某些代码的异步执行。

我想要一个 for each 循环完成，以便我有一个更新的在线朋友列表，然后执行 res.render （我在其中传递在线朋友列表），因为目前它在完成循环之前执行 res.render . 代码：

```
function onlineFriends(req, res) {
var onlinefriends = new Array();
onlinefriends.push("mark");
FriendList.findOne({
    owner: req.session.username
}, function (err, friendlist) {
    friendlist.friends.forEach(function (friend) { // here forEach starts
        OnlineUser.findOne({
            userName: friend
        }, function (err, onlineFriend) {
            if (onlineFriend != null) {
                onlinefriends.push(onlineFriend.userName);
                console.log("a loop");
            }
        });

    });  
        console.log("online friends: " + onlinefriends);
        console.log("redirecting");
        res.render('index', { // this is still inside the forEach function
            friendlist: friendlist.friends,
            onlinefriendlist: onlinefriends,
            username: req.session.username
        });// and here it ends
}); 
```

}

输出如下：

```
online friends: mark
redirecting
a loop
a loop
a loop
a loop
a loop
a loop
a loop 
```

正如这里所讨论的（[JavaScript, Node.js: is Array.forEach asynchronous？](https://stackoverflow.com/questions/5050265/javascript-nodejs-is-array-foreach-asynchronous)），答案是 for-each 是阻塞的，但在我的示例中，它似乎是非阻塞的，因为它在执行 res.render 之前它有完成循环？如何确保 for each 已完成，以便我有一个最新的 onlinefriends 列表（和friendlist），然后我可以将其传递给 res.render 而不是 res.render 在 for -each 循环完成之前发生的方式（这给了我一个不正确的在线用户列表）？

非常感谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T08:36:47.447

以下控制台日志：

```
console.log("a loop"); 
```

在回调中

我相信函数*OnlineUser.findOne()*的回调是异步调用的，这就是为什么代码会在重定向日志之后记录“循环”

您应该在执行完所有循环回调后进行重定向

就像是：

```
var count = 0;
friendlist.friends.forEach(function (friend) { // here forEach starts
    OnlineUser.findOne({
        userName: friend
    }, function (err, onlineFriend) {
        count++;
        if (onlineFriend != null) {
            onlinefriends.push(onlineFriend.userName);
            console.log("a loop");
        }
        if(count == friendlist.friends.length) { // check if all callbacks have been called
            redirect();
        }
    });
}); 

function redirect() {
    console.log("online friends: " + onlinefriends);
    console.log("redirecting");
    res.render('index', { // this is still inside the forEach function
        friendlist: friendlist.friends,
        onlinefriendlist: onlinefriends,
            username: req.session.username
    });// and here it ends
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-31T02:38:37.953

[通过将 async 包添加到我的项目并将 forEach() 更改为async.each()](https://github.com/caolan/async#each)，我能够解决类似的问题。优点是这提供了一种为应用程序的其他部分进行同步的标准方法。

你的项目是这样的：

```
function onlineFriends(req, res) {
  var onlinefriends = new Array();
  onlinefriends.push("mark");

  FriendList.findOne({owner: req.session.username}, function (err, friendlist) {
    async.each(friendlist.friends, function(friend, callback) {
      OnlineUser.findOne({userName: friend}, function (err, onlineFriend) {
        if (onlineFriend != null) {
          onlinefriends.push(onlineFriend.userName);
          console.log("a loop");
        }
        callback();
      });
    }, function(err) {
      console.log("online friends: " + onlinefriends);
      console.log("redirecting");
      res.render('index', { // this is still inside the forEach function
          friendlist: friendlist.friends,
          onlinefriendlist: onlinefriends,
          username: req.session.username
      });
    });
  });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T07:58:11.223

[通过jsbeautifier](http://jsbeautifier.org/)运行您的代码可以正确缩进并告诉您为什么会发生这种情况：

```
function onlineFriends(req, res) {
    var onlinefriends = new Array();
    onlinefriends.push("mark");
    FriendList.findOne({
        owner: req.session.username
    }, function (err, friendlist) {
        friendlist.friends.forEach(function (friend) { // here forEach starts
            console.log("vriend: " + friend);
            OnlineUser.findOne({
                userName: friend
            }, function (err, onlineFriend) {
                if (onlineFriend != null) {
                    onlinefriends.push(onlineFriend.userName);
                    console.log("online friends: " + onlinefriends);
                }
            });
            console.log("nu door verwijzen");
            res.render('index', { // this is still inside the forEach function
                friendlist: friendlist.friends,
                onlinefriendlist: onlinefriends,
                username: req.session.username
            });
        });  // and here it ends
    }); 
```

所以......总是正确缩进你的代码，你不会有这样的问题。一些编辑器（例如 Vim）可以使用单个快捷方式（`gg=G`在 vim 中）缩进整个文件。

但是，`OnlineUser.findOne()`很可能是异步的。因此，即使您将呼叫移动到正确的位置，它也不会起作用。有关如何解决此问题，请参阅[ShadowCloud 的答案。](https://stackoverflow.com/a/10579923/298479)

# asp.net-mvc-3 - IList 上的 MVC 模型自定义验证

> ID：10579425
> 
> 赞同：3
> 
> 时间：2012-05-14T07:56:29.977
> 
> 标签：asp.net-mvc-3, validation, model, data-annotations, customvalidator

我的模型中有一个 IList 属性。我需要为该属性（列表）计数编写一个自定义验证，它必须大于 2。

```
public IList<AccountAddress> BulkOrderAddresses { get; set; } 
```

请帮我....

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:00:44.340

你可以实现[IValidatableObject 接口](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx)

像这样的东西：

```
public class MyObject : IValidatableObject
{
     public IList<AccountAddress> BulkOrderAddresses { get; set; }

     public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
     {
          if(BulkOrderAddresses == null && !BulkOrderAddresses.Length > 2)
          {
               yield return new ValidationResult("List should contain more than 2 items");
          }
     }
} 
```

# java - 尝试将资产文件夹中的数据库复制到应用程序的数据库文件夹中时遇到的问题

> ID：10579427
> 
> 赞同：1
> 
> 时间：2012-05-14T07:56:37.030
> 
> 标签：java, android, database, sqlite, sqliteopenhelper

我目前正在处理一个项目，但我在尝试将资产文件夹中的数据库复制到应用程序的数据库文件夹中时遇到了问题。现在我什至无法将它复制到应用程序的文件夹中。但是，在我之前的一次尝试中，我设法将其复制到应用程序的数据库文件夹中，但发现它是一个空数据库。我真的无法弄清楚这一点。有什么建议么？

这里用于复制数据库的代码：

```
package sirtat.individualProject.PublicTransportationTimeScheduler;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseHelper extends SQLiteOpenHelper{

    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/sirtat.individualProject.PublicTransportationTimeScheduler/databases/";

    private static String DB_NAME = "transportdb";

    private SQLiteDatabase myDataBase; 

    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DataBaseHelper(Context context) {

     super(context, DB_NAME, null, 1);
        this.myContext = context;
    } 

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

     boolean dbExist = checkDataBase();

     if(dbExist){
      //do nothing - database already exist
     }else{

      //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
         this.getReadableDatabase();

         try {

       copyDataBase();

      } catch (IOException e) {

          throw new Error("Error copying database");

         }
     }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

     SQLiteDatabase checkDB = null;

     try{
      String myPath = DB_PATH + DB_NAME;
      checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

     }catch(SQLiteException e){

      //database does't exist yet.

     }

     if(checkDB != null){

      checkDB.close();

     }

     return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

     //Open your local db as the input stream
     InputStream myInput = myContext.getAssets().open(DB_NAME);

     // Path to the just created empty db
     String outFileName = DB_PATH + DB_NAME;

     //Open the empty db as the output stream
     OutputStream myOutput = new FileOutputStream(outFileName);

     //transfer bytes from the inputfile to the outputfile
     byte[] buffer = new byte[1024];
     int length;
     while ((length = myInput.read(buffer))>0){
      myOutput.write(buffer, 0, length);
     }

     //Close the streams
     myOutput.flush();
     myOutput.close();
     myInput.close();

    }

    public void openDataBase() throws SQLException{

     //Open the database
        String myPath = DB_PATH + DB_NAME;
     myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
 public synchronized void close() {

         if(myDataBase != null)
          myDataBase.close();

         super.close();

 }

 @Override
 public void onCreate(SQLiteDatabase db) {

 }

 @Override
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

 }

        // Add your public helper methods to access and get content from the database.
       // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
       // to you to create adapters for your views.

} 
```

希望你们能帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:07:16.510

/** * 在系统上创建一个空数据库并用你自己的数据库重写它。* */

```
public void createDataBase() throws IOException{

 boolean dbExist = checkDataBase();

 if(dbExist){
  //do nothing - database already exist
 }else{ 
```

//如果 db 不在您的数据库内部内存中，您在这里提到过您正在创建新的 *** **检查这里

```
 //By calling this method and empty database will be created into the default system path
           //of your application so we are gonna be able to overwrite that database with our database. 
```

//阻塞这一行执行一次

// this.getReadableDatabase();

```
 try {

   copyDataBase();

  } catch (IOException e) {

      throw new Error("Error copying database");

     }
 } 
```

# ssis - 使用SSIS将数据从excel导入多个表

> ID：10579429
> 
> 赞同：4
> 
> 时间：2012-05-14T07:56:50.103
> 
> 标签：ssis

我有一张 Excel 表，其中包含必须保存在 4 个表中的信息。我必须为每个表创建唯一的 id。我还必须将一些数据插入表 1，然后在那里创建的唯一 id 将用于将数据插入第二个表（参考完整性）。此外，一张表将始终插入要插入的记录，但对于其余 3 张表，如果某些数据已经存在，则必须对其进行更新而不是插入。我是 SSIS 的新手，所以请指导我如何在 SSIS 中继续前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:45:01.003

loads of requirements :)

First, [here](http://www.techrepublic.com/blog/datacenter/how-to-import-an-excel-file-into-sql-server-2005-using-integration-services/205) is an example of a package that loads an excel sheet to a sql database. You can easily follow it to build your package.

Differences:

You say you need to insert the same data on 4 tables, so between your excel source and your destination, you will add a multicast component and them instead of 1 destination, you will have 4\. The "multicast" will create 4 copies of your data, so you can insert into your 4 tables.

The IDs may be a problem, since the 4 destinations will execute separately, you cant get the ID inserted on the first table to update the second. I suggest you do it using a T-SQL on a "Execute SQL task" after everything is imported .

If that is not possible you will need to have 4 separately data flows where on each one you do the inserts reading from your excel and joining with the result of the previous insert with a lookup task

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T12:50:54.713

将其导入到 SQL 服务器上的 Temp 表中。然后，您将能够编写一个从 Temp 表检索到多个表的查询。

希望这可以根据您的要求解决您的问题。

# winapi - 为什么滚动条的最大滚动位置是 (MaxRangeValue - (PageSize - 1)) 而不是 (MaxRangeValue - PageSize)？

> ID：10579431
> 
> 赞同：0
> 
> 时间：2012-05-14T07:57:04.810
> 
> 标签：winapi, user-interface, scrollbar

我正在学习 Windows 编程，我不明白滚动条的滚动范围和页面大小。

基于[http://msdn.microsoft.com/en-us/library/bb787527.aspx](http://msdn.microsoft.com/en-us/library/bb787527.aspx)，

```
MaxScrollPos = MaxRangeValue - (PageSize - 1) 
```

但为什么？我认为如果

```
MaxScrollPos = MaxRangeValue - PageSize 
```

如果我想显示一个高度为2000px，客户端高度为600px的位图，自然设置滚动范围为[0, 2000]，页面大小为600。当滚动位置为0时，位图的顶部被展示; 当滚动位置为 1400 时，显示位图的底部。但是如果我这样做，我可以将滚动位置设置为 2000 - (600 - 1) = 1401。如果 1400 应该显示底部，那么位置 1401 是什么意思？如果“MaxScrollPos”确实等于“MaxRangeValue - PageSize”，那么一切都会完美运行。现在我必须将滚动范围设置为 [0, 1999] 以避免该问题。我认为这是不自然的。那么，有谁能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:03:21.273

从 0 到 1999 的范围涵盖 2000 个值。这是一个从零开始的索引，而您的像素大小计数从 1 开始。

# android - osm地图加载错误

> ID：10579433
> 
> 赞同：2
> 
> 时间：2012-05-14T07:57:10.953
> 
> 标签：android, osmdroid

我想在openstreetmap 中查看地图。我添加了 osmdroid-android-3.0.8 和 slf4j-android-1.5.8 并授予以下权限...

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission> 
```

我的代码…………

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapview=(MapView) findViewById(R.id.mapview);
    mapview.setTileSource(TileSourceFactory.MAPNIK);
    mapview.setBuiltInZoomControls(true);
    mapcontroller=mapview.getController();
    mapcontroller.setZoom(13);
    GeoPoint gp=new GeoPoint(51500000, -150000);
    mapcontroller.setCenter(gp);
} 
```

但我得到空地图并在 LogCat 中得到一个错误......

下载 MapTile 时出错。java.lang.SequrityException: ConnectivityService: 用户 10034 和当前进程都没有 android.permission.ACCESS_NETWORK_...

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:00:39.277

//你需要在你的manifest中添加这个使用权限

// 并确保你在 google api 中运行它

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission> 
```

# php - 读取目录并将特定文件路径放入数组

> ID：10579435
> 
> 赞同：1
> 
> 时间：2012-05-14T07:57:29.833
> 
> 标签：php

假设我有一个包含以下文件的目录：

*   a_1.csv
*   一个.csv
*   b_1.csv
*   b.csv
*   something_else.csv

现在我想 readdir() 这个目录并将所有以 a (a.csv, a_1.csv) 开头的文件放入数组 $a 并将所有以 b (b.csv 和 b_1.csv) 开头的文件放入数组 $湾。应忽略所有其他文件，例如 something_else.csv

我想过遍历整个目录并 preg_match'ing 文件名，但我不知道是否有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:01:31.367

您可以使用 glob [http://sg.php.net/glob](http://sg.php.net/glob)

```
$a = glob('a*.csv');
$b = glob('b*.csv'); 
```

# c# - 捕获应用程序退出事件 - WinForms

> ID：10579446
> 
> 赞同：15
> 
> 时间：2012-05-14T07:58:01.943
> 
> 标签：c#, winforms

单击应用程序停止时，这是否可以捕获 Windows 窗体关闭事件。我知道应用程序停止工作，但是当应用程序关闭时，是否有任何可用的方法在任何情况下都会触发？我从谷歌找到了这些方法，但它们不起作用：

```
 AppDomain.CurrentDomain.ProcessExit += new EventHandler(CurrentDomain_ProcessExit); 
```

或者

```
 Application.ApplicationExit += new EventHandler(this.OnApplicationExit); 
```

单击应用程序停止按钮时是否可以获得关闭事件？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-14T08:11:44.853

In Program.cs file, you must have those methods **before** Application.Run :

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.ApplicationExit += new EventHandler(Application_ApplicationExit);
        AppDomain.CurrentDomain.ProcessExit += new EventHandler(CurrentDomain_ProcessExit);
        Application.Run(new MainForm());
    } 
```

You can also use the Disposed event on the MainForm (the form used in Application.Run method).

# arrays - 为什么在有集合的情况下在 VBA 中使用数组？

> ID：10579457
> 
> 赞同：45
> 
> 时间：2012-05-14T07:59:28.417
> 
> 标签：arrays, vba, excel

许多人在 Excel/VBA 中广泛使用数组来存储数据列表。但是，在我看来，有一个集合对象要方便得多（主要是：不需要重新/定义列表的长度）。

所以，我真诚地**问自己，我是否错过了什么？**为什么其他人仍然使用数组来存储数据列表？它只是过去的宿醉吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-14T08:44:14.540

使用数组而不是集合（或字典）的几个原因：

*   您可以轻松地将数组转移到范围（反之亦然）`Range("A1:B12") = MyArray`
*   集合只能存储**唯一**键，而数组可以存储任何值
*   集合必须存储一对（键，值），而您可以将任何内容存储在数组中

请参阅[Chip Pearson](http://www.cpearson.com/excel/vbaarrays.htm)关于数组的文章以获得更好的理解

一个更好的问题是为什么人们会使用集合而不是字典（好吧，集合是标准的 VBA，而您必须*导入*字典）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-15T13:01:37.343

@CharlesWilliams 的答案是正确的：遍历数组的所有值比迭代集合或字典要快：如此之多，以至于当我需要这样做时，我总是使用字典的 Keys() 或 Items() 方法-两种方法都返回一个向量数组。

注意：我使用 Dictionary 类的次数远远多于使用集合，Exists() 方法太有用了。

收藏和字典当然也有缺点。其中之一是数组可以是 2 维甚至 3 维的——对于表格数据来说，这是一种更好的数据结构。您*可以*将数组存储为集合的成员，但这样做有一些缺点：其中之一是您可能无法获得对该项目的引用 - 除非您使用，否则您 `arrItem = MyDictionary(strKey)`几乎肯定会获得数组的“ByVal”副本；如果您的数据是动态的，并且会受到多个进程的更改，那就不好了。它也很慢：大量的分配和释放。

最糟糕的是，如果我有一个包含数组（或对象！）作为成员的集合或字典，我不太相信 VBA 会释放内存：不在范围外，不在 by `Set objCollection = Nothing`，甚至不是 objDictionary.RemoveAll -很难证明问题存在于 VBE 中可用的有限测试工具包中，但我已经在字典中使用数组的应用程序中看到了足够多的内存泄漏，我知道您需要谨慎。话虽如此，我从不在某处使用没有 Erase 命令的数组。

@JMax 解释了数组的另一个重要优点：您可以在工作表的单个“命中”中填充数组，并在单个“命中”中写回您的工作。

当然，您可以通过构建索引数组类来获得两全其美：一个二维数组，其中包含关联的集合或字典对象，存储某种行标识符作为键，行序号作为数据项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-14T08:07:06.667

自动调整大小的集合速度较慢（从理论上讲，不同的实现显然会有自己的里程）。如果您知道您有一定数量的条目并且您只需要以线性方式访问它们，那么传统数组是正确的方法。

# logging - 如何在黑莓网络中获取日志

> ID：10579465
> 
> 赞同：1
> 
> 时间：2012-05-14T08:00:21.163
> 
> 标签：logging, blackberry, cordova

我正在使用 blackberry webworks 和 phonegap 开发一个黑莓应用程序。我总是需要发出警报才能获取值。我需要通过 console.log() 或类似的东西来获取日志。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:00:48.980

您可以使用远程 Web 检查器来调试您的应用程序： [Web Inspector 入门](https://bdsc.webapps.blackberry.com/html5/documentation/ww_testing/getting_started_webinsp_microsite_1987477_11.html)

或者，我认为您可以在主屏幕上按 alt+lglg 以访问设备日志。

# java - 检查字节数组是否都在 0xff

> ID：10579467
> 
> 赞同：9
> 
> 时间：2012-05-14T08:00:23.067
> 
> 标签：java, arrays, byte

有没有一种简单的方法来检查java中的字节数组是否具有所有0xFF作为值？

例子

```
byte[] b = new byte[]{ 0xff, 0xff, 0xff, 0xff, 0xff };

if (b is all 'ff')
    process? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:30:07.293

没有循环（显式或递归）的任何语言都无法做到这一点。即使你的 CPU 有一个特殊的指令来检查内存区域的模式，它也会在内部循环。所以你的问题真的没有意义。

如果您要求一种有效的方法来做到这一点，有以下方法：

*   如果您的数组始终具有相同的长度，您可以设置一个常量并使用`Arrays.equals()`. 如果您有几个不同的长度，但只有少量不同的长度，您可以创建多个常量。

*   您可以对数组进行排序并检查第一个和最后一个值。如果它们相同，则它们之间的所有值也必须为 -1。

*   您可以将检查移动到一个方法中，这意味着“检查循环”不会在重要位置混淆代码。

*   您可以使用 JNI 访问汇编代码，而汇编代码又使用特殊指令。

*   其他语言为此类事情提供更好的支持。在 Groovy 中，你可以做`b.size() == b.count { it == -1 }`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T08:24:17.927

如果您不喜欢循环，请使用递归:)

```
 public static void test1() {
    class Chk {
        boolean c(int [] b, int val, int pos) {
            if (pos >= b.length) {
                return true;
            }
            if (b[pos] != val) {
                return false;
            }
            return c(b, val, pos + 1);
        }
    }
    Chk test = new Chk();

    System.out.println(test.c(new int [] {0xff, 0xff}, 0xff, 0));

    System.out.println(test.c(new int [] {0xff, 0xff, 0xff, 0xfe}, 0xff, 0));

    System.out.println(test.c(new int [] {0x01, 0x01, 0x01, 0x01}, 0xff, 0));

    System.out.println(test.c(new int [] {0x01, 0x01, 0x01, 0x01}, 0x01, 0));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:00:30.417

疯狂的想法，你可以用字符串匹配来做到这一点

```
int[] b = new int[]{0xff, 0xff, 0xff, 0xff, 0xff};
String arr = Arrays.toString(b).replaceAll(", ", "");
String match = "\\[("+new Integer(0xff).toString()+")+\\]";
System.out.println(arr);
System.out.println(match);
System.out.print(arr.matches(match)); 
```

# objective-c - 如何在 WebView 中捕获 mouseDown 事件？

> ID：10579469
> 
> 赞同：1
> 
> 时间：2012-05-14T08:00:31.680
> 
> 标签：objective-c, macos, cocoa, webview, webkit

我想`mouseDown`处理`WebView`. 我对 进行了子类化`WebView`，实现了`mouseDown`，然后我才知道`mouseDown`被重定向到了`WebHTMLView`。

我已经通过以下链接。

[mouseDown：不在 WebView 子类中触发](https://stackoverflow.com/questions/5341278/mousedown-not-firing-in-webview-subclass)

从上面的链接我知道，我们可以将 mouseDownEvent 重定向到 Objective-C，但我没有找到任何解决方案。我可以有任何指针或示例 javascript 来实现相同的。

我在子类中尝试了 hitTest 方法`webview`。

```
- (NSView*)hitTest:(NSPoint)aPoint 
```

上述方法是否可以识别mouseDown？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:09:07.407

您可以使用 onTouchStart 事件进行相同的操作。请参阅此[链接以在 iphone 上绑定事件](http://jquerymobile.com/test/docs/api/events.html)

或使用这个： -

```
$('button').bind( "touchstart", function(){alert('hey'} ); 
```

touchstart 相当于 mouseDown

另一种解决方案是将元素的光标设置为指针，它与 jQuery live 和 click 事件一起使用。在 CSS 中设置它。（光标：指针）

在 JavaScript 中，您可以使用：-

```
node.ontouchmove = function(e){
  if(e.touches.length == 1){ // Only deal with one finger
    var touch = e.touches[0]; // Get the information for finger #1
    var node = touch.target; // Find the node the drag started from
    node.style.position = "absolute";
    node.style.left = touch.pageX + "px";
    node.style.top = touch.pageY + "px";
  }
} 
```

或者

```
document.addEventListener('touchstart', function(event) {
    alert(event.touches.length);
}, false); 
```

有关更多详细信息，请参阅[javascript iPhone 事件](http://www.sitepen.com/blog/2008/07/10/touching-and-gesturing-on-the-iphone/)

对于 Mac OSx，请参阅[链接](https://stackoverflow.com/questions/4755848/javascript-events-for-gestures-in-webkit-on-mac)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:32:13.693

我使用以下 HTML 和 JavaScript 来捕获 mouseEvents 并在`WebView`.

```
 <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
    <script type="text/javascript">
    function SetValues()
    {
        var s = 'X=' + window.event.clientX +  ' Y=' + window.event.clientY ;
        document.getElementById('divCoord').innerText = s;

    }  
</script>
</head>
<body id="bodyTag" onclick=SetValues()>
<div id="divCoord"></div>
</body>
</html> 
```

# algorithm - 在一个矩形上均匀分布 N 个点

> ID：10579470
> 
> 赞同：4
> 
> 时间：2012-05-14T08:00:38.693
> 
> 标签：algorithm, height, width, equals, points

我需要在具有一定宽度和高度的矩形上平均分配 N 个点。

前任。给定一个 10x10 的盒子和 100 个点，这些点将被设置为：

```
(1,1)  (1,2)  (1,3)  (1,4)  (1,5)  (1,6)  (1,7)  (1,8)  (1,9)  (1,10)
(2,1)  (2,2)  (2,3)  (2,4)  (2,5)  (2,6)  (2,7)  (2,8)  (2,9)  (2,10)
(3,1)  (3,2)  (3,3)  (3,4)  (3,5)  (3,6)  (3,7)  (3,8)  (3,9)  (3,10)
...
... 
```

对于任何 N 点、宽度和高度组合，我如何概括这一点？

注意：它不需要是完美的，但很接近，我还是要随机化一点（从 X 和 Y 轴上的这个“起点”移动点 +/- x 像素），所以有一个剩下的几个点在最后随机添加就可以了。

我正在寻找这样的东西（准随机）：

![准随机](../Images/c5155fef6ac187beecc34906847bd4f5.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T00:09:06.347

我设法做到了，如果其他人想要做到这一点，方法如下：

首先计算矩形的总面积，然后计算每个点应该使用的面积，然后计算自己的pointWidth和pointHeight（长度），然后迭代制作cols和rows，这里是一个例子。

PHP代码：

```
$width = 800;
$height = 300;
$nPoints = 50;

$totalArea = $width*$height;
$pointArea = $totalArea/$nPoints;
$length = sqrt($pointArea);

$im = imagecreatetruecolor($width,$height);
$red = imagecolorallocate($im,255,0,0);

for($i=$length/2; $i<$width; $i+=$length)
{
    for($j=$length/2; $j<$height; $j+=$length)
    {
        imageellipse($im,$i,$j,5,5,$im,$red);
    }
} 
```

我还需要稍微随机化点的位置，我把它放在第二个“for”而不是上面的代码中。

```
{
    $x = $i+((rand(0,$length)-$length/2)*$rand);
    $y = $j+((rand(0,$length)-$length/2)*$rand);
    imageellipse($im,$x,$y,5,5,$im,$red);

    // $rand is a parameter of the function, which can take a value higher than 0 when using something like 0.001 the points are "NOT RANDOM", while a value of 1 makes the distribution of the points look random but well distributed, high values produced results unwanted for me, but might be useful for other applications.
} 
```

希望这可以帮助那里的人。

# c++ - copy_backward 还是使用 reverse_iterators 复制？

> ID：10579474
> 
> 赞同：10
> 
> 时间：2012-05-14T08:00:56.913
> 
> 标签：c++, stl

在实际使用方面有什么区别

a）copy_backward

b) 使用 reverse_iterators 复制源和目标

特别是一个比另一个更普遍适用？还有其他区别吗？

更新：如果真的没有区别，那么 C++ 文献中对此等价的任何引用都将受到赞赏。这个问题背后的动机是了解这是设计使然还是其中一个失误（例如缺少 copy_if）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T07:25:44.733

首先，使用 copy_backward() 清楚地表明开发人员打算以相反的顺序复制间隔。

copy_backward() 适用于原始的双向迭代器，而 reverse_iterator 是双向迭代器的适配器，可能不如原始迭代器有效。

当您需要将诸如 copy() 之类的输入迭代器的算法应用于反向序列时，使用 reverse_iterator 是有意义的，但没有用于诸如 copy_backward() 之类的双向运算符的对应物。

因此，存在概念上*和*实践上的差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T13:23:04.153

[http://www.cplusplus.com/reference/algorithm/copy/](http://www.cplusplus.com/reference/algorithm/copy/)有一个实现`std::copy`

[http://www.cplusplus.com/reference/algorithm/copy_backward/](http://www.cplusplus.com/reference/algorithm/copy_backward/)有一个实现`std::copy_backward`

您可以自己查看差异。

**注意：**如果我是你，我会使用，因为使用类`std::copy_backward`调用可能会慢一些（它需要比双向迭代器更多的内存）`std::copy``std::reverse_iterator<T>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T06:23:16.690

不同之处在于`copy`将迭代器返回到传递结束元素，而`copy_backward`将迭代器返回到第一个元素。

从这个意义上说，它们是不等价的。

*   签名当然不同。`copy`可以使用`InputIterator`s 和`OutputIterator`. 虽然`copy_backward`期望`BidirectionalIterator`s。
*   对容器的影响（正确使用时）是一样的，但返回的迭代器类型不同，指向不同的元素。

例子：

这是可行的，因为`vector`可以使用`RandomAccessIterator`which 确实支持`InputIterator`,`OutputIterator`和所期望的属性`BidirectionalIterator`。

```
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;

void printer(int i) {
    cout << i << ", ";
}

int main() {

    int mynumbers[] = {3, 9, 0, 2, 1, 4, 5};
    vector<int> v1(mynumbers, mynumbers + 7);

    vector<int>::iterator it = copy_backward(mynumbers, mynumbers + 7, v1.end());
    for_each(v1.begin(), v1.end(), printer);
    cout << endl << "Returned element: " << *it;
    cout << endl;

    vector<int>::reverse_iterator rit = copy(mynumbers, mynumbers + 7, v1.rbegin());
    for_each(v1.begin(), v1.end(), printer);
    cout << endl << "Before the first element (reverse end)? " << (rit == v1.rend());
    rit--; // go to first element, because it is a reverse iterator
    cout << endl << "Returned element: " << *rit;

    return 0;
} 
```

结果：

```
3, 9, 0, 2, 1, 4, 5, 
Returned element: 3
5, 4, 1, 2, 0, 9, 3, 
Before the first element (reverse end)? 1
Returned element: 5 
```

如果您使用不支持的容器，`BidirectionalIterator`那么您将面临麻烦（例如，如果您尝试向后复制 a ，`forward_list`因为它使用 a `ForwardIterator`，它不支持 a 提供的操作`BidirectionalIterator`）。
同样在这种情况下，使用反向迭代器进行复制`forward_list`也是不可能的，因为它不支持反向迭代器。

基本上，您需要确保支持容器的迭代器，并根据您希望返回的容器的哪一端进行选择。否则效果是一样的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-14T08:08:27.383

实际上没有区别。以同样的方式，您可以比较正向复制。

复印件

b) 带有反向迭代器的 copy_backward。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-21T19:57:49.447

但是，应该没有任何区别：如果迭代器是某些函数调用的结果，并且与使用带有反向迭代器的复制相比，copy_backward 会派上用场。

# java - 使用 PHP 从 Java 生成器提供内存中的 pdf

> ID：10579475
> 
> 赞同：1
> 
> 时间：2012-05-14T08:01:07.093
> 
> 标签：java, php, pdf

我正在为客户创建一个 Web 前端以下载他们的报告。该公司使用的程序是用 Java 编写的，由 31 个 mysql 表组成，其中需要 4 个报告，每个报告有超过 140 个数据点。我正在用 PHP 制作网站并用 Java 制作报告生成器，但我在查找有关如何让内存 PDF 直接加载到客户端浏览器中的信息时遇到问题。我想使用从 Java 到 PHP 的 TCP 客户端/服务器，但我如何对其进行编码，以便不必将其写入服务器驱动器并作为链接提供。我也不希望将 17,000 行 Java 代码重写为 PHP，因为我是 PHP 新手。有没有办法完成这件事？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:33:48.307

根据 java 应用程序运行需要多长时间，您可以考虑使用`proc_open`创建一个到 java 程序的管道：

```
<?php
    $desc = array(array('pipe','r'),array('pipe','w'));
    $resource= proc_open('bash',$desc,$pipes);
    if (!is_resource($resource))
    {
        throw new Exception('PDF stream creation failed');
    }
    usleep(5);//for safety
    fwrite($pipes[0],'java mkPDF paras'."\n");//double quoted \n is crucial
    fclose($pipes[0]);
    usleep(100);//while java app is running;
    $pdf = stream_get_contents($pipes[1]);
    fclose($pipes[1]);
    proc_close($resource);
?> 
```

这只是一个基本示例，它将流式 pdf 集中在一个大块中，因此它远非完美。您-IMO-应该研究的是使用while循环以块的形式获取流。[php手册页](http://www.php.net/manual/en/function.proc-open.php)包含几个这样的例子，基本上，repleace

```
usleep(100);//while java app is running;
$pdf = stream_get_contents($pipes[1]); 
```

和：

```
usleep(10);//while java app is running;
$pdf = '';
while (($pdfBuff = fgets($pipes[1],1024)) !== null)
{
    $pdf.=$pdfBuff;//or echo, or whatever
}
fclose($pipes[1]); 
```

后者未经测试，所以我不确定这是否适用于你的情况......但你明白了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:17:51.340

1.  正如[@Elias](https://stackoverflow.com/users/1230836/elias-van-ootegem)所说，直接向java应用程序发送网络请求并将pdf流式传输到php。

2.  使用网络服务，

    I. 在 java 端开发一些 web 服务，它们只会发送 XML、json 等任何格式的数据。

    二、编写代码来使用这些 Web 服务并开发代码以生成 pdf 并流式传输这些 pdf。

有一个 pdf 生成库。[请在此处](http://www.ifadey.com/2010/04/creating-pdf-using-php/)找到链接

# paypal - 比较收件人电子邮件是否是 Paypal IPN 脚本的关键部分？

> ID：10579476
> 
> 赞同：4
> 
> 时间：2012-05-14T08:01:15.423
> 
> 标签：paypal

在标准的 Paypal IPN PHP 脚本中，有这行来评估支付是否成功：

```
if ($_POST["payment_status"] == "Completed" && $_POST["receiver_email"] == $email) 
```

评估支付状态的目的是显而易见的。但据我所知，比较的第二部分似乎并没有增加太多价值。

据`$email`我了解，价值只是您希望将错误和成功的付款确认电子邮件发送到的地方。这`receiver_email`只是在 Paypal 上附加到商家帐户的电子邮件。

在我看来，这些可能不是一回事。尤其是在使用 Paypal 沙箱进行测试时，它一直让我感到困惑，因为商家电子邮件地址部分是在我设置帐户时自动生成的，因此无论如何我都无法接收电子邮件。

因此，由于两个电子邮件地址可能不同，我最初的想法是这种比较并不那么重要。但也许我错过了一个重要的安全考虑。

这种比较是否重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:27:59.980

是的，在大多数情况下这是一项关键检查，因为如果您在发布请求（按钮）中发送 IPN，恶意用户可能会向他自己的 PayPal 地址付款。

由于您有 2 个贝宝帐户，因此更容易更换

```
$_POST["receiver_email"] == $email 
```

和

```
in_array($_POST["receiver_email"], array("myemail1", "myemail2")) 
```

就我个人而言，即使您的 IPN 网址被很好地隐藏并在您的帐户中配置，我也不会跳过接收者检查。我的简单方法将使您免受恶意请求的侵害。

# perl - perl中recv()函数的返回值

> ID：10579477
> 
> 赞同：5
> 
> 时间：2012-05-14T08:01:17.553
> 
> 标签：perl, recv

我以这种方式在 perl 中创建了非阻塞 UDP 套接字

```
my $my_sock = IO::Socket::INET->new(LocalPort => $MY_PORT,
                                     Proto => 'udp',
                     Blocking => '0') or die "socket: $@"; 
```

recv 调用是

```
my $retValue = $sock->recv($my_message, 64); 
```

我需要知道 a) 当没有数据要读取时 b) 如果有数据，读取了多少数据 c) 任何错误情况

令人惊讶的是，我在 perldoc 中没有看到 recv 的任何返回值。当我自己尝试时，recv 在（a）中返回 undef，对于 b 它是一个不可打印的字符

这似乎是一个基本问题。但是，我仍然找不到有关谷歌搜索或堆栈溢出的信息。感谢任何输入

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:04:34.057

根据 perldoc，recv“如果 SOCKET 的协议支持，则返回发送者的地址；否则返回空字符串。如果有错误，则返回未定义的值。”

如果你得到一个 undef，这意味着 recv 遇到了一个错误。

您的代码中的错误在以下行中：

```
$retValue = $sock->recv($my_message, 64); 
```

recv 的函数原型是：

```
recv SOCKET,SCALAR,LENGTH,FLAGS 
```

根据 perldoc，recv“尝试从指定的 SOCKET 文件句柄将 LENGTH 个字符的数据接收到变量 SCALAR。SCALAR 将增长或缩小到实际读取的长度。”

尝试：

```
$retvalue = recv($sock, $my_message, 64) 
```

这是我获得所有信息的地方：http: [//perldoc.perl.org/functions/recv.html](http://perldoc.perl.org/functions/recv.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-04T17:56:11.163

返回的值`recv`是接收该数据的地址和端口

```
my $hispaddr = $sock->recv($my_message, 64);

if ($retValue) {
  my ($port, $iaddr);
  ($port, $iaddr) = sockaddr_in($hispaddr);
  printf("address %s\n", inet_ntoa($iaddr));
  printf("port %s\n", $port);
  printf("name %s\n", gethostbyaddr($iaddr, AF_INET));
} 
```

返回数据的长度可以通过以下方式确定

```
length($my_message); 
```

# jquery - Safari/iPhone 和 Opera/Android 中的 JSONP 不起作用

> ID：10579478
> 
> 赞同：3
> 
> 时间：2012-05-14T08:01:20.020
> 
> 标签：jquery, android, iphone, jsonp

我试图发出一个适用于所有桌面浏览器的 JSONP 请求，但它不适用于 iPhone 和 Android。

我对返回 JSONP 的 web 服务进行跨域调用，例如：

```
myFunction({name : "Jonh", last : "Doe"})

        $.ajax({
                type: "GET",
                crossDomain: true,
                url: "http://192.168.1.41:8081/Service1/",
                dataType: "jsonp",
                processData : true,
                headers: {
                    "Content-Type": "application/json"
                },
                jsonp : "myFunction",
                jsonpCallback: "myFunction"
                });

    function myFunction(data)
    {
        alert("Hello world!");
    } 
```

它适用于桌面，但不适用于移动设备！

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T11:17:59.030

我的问题是我将 JSONP 请求从 http 服务器（我的开发机器）发送到 https 服务器。

要完全清楚它的样子

[从http://localhost.com](http://localhost.com)到[https://api.xxx.com](https://api.xxx.com)的请求

它适用于除移动 safari 之外的所有浏览器。

http -> http = 工作
https -> https = 工作
http -> https = 不工作

# fonts - 古吉拉特语的 Windows 应用程序

> ID：10579480
> 
> 赞同：0
> 
> 时间：2012-05-14T08:01:31.083
> 
> 标签：fonts, desktop-application, windows-applications

我想用古吉拉特语开发寡妇应用程序。但我不知道该怎么做？

那么谁能给我建议如何用古吉拉特语字体开发桌面窗口应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:07:55.427

无论您选择哪种语言来开发它，您都需要将全球化应用于您的应用程序。请参阅这些链接以了解如何执行此操作。以下示例展示了如何使用 C# 开发窗口应用程序。

[http://www.codeproject.com/Questions/186760/How-to-develop-Software-in-language-Marathi-Hindi](http://www.codeproject.com/Questions/186760/How-to-develop-Software-in-language-Marathi-Hindi)

[http://www.codeproject.com/Articles/15248/Globalization-of-Windows-Applications-in-20-Minute](http://www.codeproject.com/Articles/15248/Globalization-of-Windows-Applications-in-20-Minute)

希望这会帮助你。

# xslt - 如何使用文档标签检查查找表标签

> ID：10579482
> 
> 赞同：0
> 
> 时间：2012-05-14T08:01:36.730
> 
> 标签：xslt

光环，

我有这个 xml 文档：

```
<document>
<Line>
    <Line-Item>
        <ID>5</ID>
        <Quantity>100</Quantity>                
    </Line-Item>
</Line>
<Line>
    <Line-Item>
        <ID>6</ID>
        <Quantity>9</Quantity>              
    </Line-Item>
</Line>
<Line>
    <Line-Item>
        <ID>60</ID>
        <Quantity>3020</Quantity>               
    </Line-Item>
</Line>
</document> 
```

并使用表格查找文件：

```
<lookup>
    <Code>
        <LookupID>5</LookupID>
        <LookupQuantity>25</LookupQuantity>
    </Code>
    <Code>
        <LookupID>6</LookupID>
        <LookupQuantity>3</LookupQuantity>
    </Code>
    <Code>
        <LookupID>70</LookupID>
        <LookupQuantity>3</LookupQuantity>
    </Code>
</lookup> 
```

我应该使用文档 Line/Line-Item/ID 检查查找表字段 lookup/Code/LookupId。如果lookup/Code/LookupId=document/Line/Line-Item/ID然后document/Line/Line-Item/Quantity=document/Line/Line-Item/Quantity div lookup/Code/LookupQuantity，否则document/Line/Line-项目/数量=文档/行/行项目/数量

需要的结果：

```
<document>
<Line>
    <Line-Item>
        <ID>5</ID>
        <Quantity>4</Quantity>              
    </Line-Item>
</Line>
<Line>
    <Line-Item>
        <ID>6</ID>
        <Quantity>3</Quantity>              
    </Line-Item>
</Line>
<Line>
    <Line-Item>
        <ID>60</ID>
        <Quantity>3020</Quantity>               
    </Line-Item>
</Line>
</document> 
```

我的 xslt：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:date="http://exslt.org/dates-and-times" extension-element-prefixes="date">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

    <xsl:key name="skRez" match="LookupQuantity" use="../LookupID"/>
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="Line/Line-Item/Quantity">
        <xsl:variable name="inputS" select="..//ID"/>
        <xsl:variable name="inputQ" select="..//Quantity"/>
            <OrderedQuantity>
                <xsl:for-each select="document('lookup.xml')">
                    <xsl:for-each select="key('skRez',$inputS)">
                        <xsl:variable name="Quantity" select="."/>
                        <xsl:choose>
                            <xsl:when test="$Quantity"><xsl:value-of select="ceiling($inputQ div $Quantity)"/></xsl:when>
                            <xsl:otherwise><xsl:value-of select="$inputQ"/></xsl:otherwise>
                        </xsl:choose>                       
                    </xsl:for-each>
                </xsl:for-each>
            </OrderedQuantity>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:43:25.447

为此，您可以定义一个变量来保存查找数据

```
<xsl:variable name="lookup" select="document('Lookup.xml')/lookup"/> 
```

然后您可以像这样查找特定 Line-Item 的数量（在这种情况下，XSLT 当前位于 Line-Item 内的 Quantity 元素上）

```
<xsl:variable name="quantity" 
  select="$lookup//Code[LookupID = current()/../ID]/LookupQuantity"/> 
```

如果此变量未返回任何内容，则您知道该元素不在查找中

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:variable name="lookup" select="document('Lookup.xml')/lookup"/>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="Line-Item/Quantity">
      <xsl:variable name="quantity" 
         select="$lookup//Code[LookupID = current()/../ID]/LookupQuantity"/>
      <Quantity>
         <xsl:choose>
            <xsl:when test="number($quantity) = number($quantity)">
               <xsl:value-of select="number(.) div number($quantity)"/>
            </xsl:when>
            <xsl:otherwise>
               <xsl:value-of select="."/>
            </xsl:otherwise>
         </xsl:choose>
      </Quantity>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<document>
   <Line>
      <Line-Item>
         <ID>5</ID>
         <Quantity>4</Quantity>
      </Line-Item>
   </Line>
   <Line>
      <Line-Item>
         <ID>6</ID>
         <Quantity>3</Quantity>
      </Line-Item>
   </Line>
   <Line>
      <Line-Item>
         <ID>60</ID>
         <Quantity>3020</Quantity>
      </Line-Item>
   </Line>
</document> 
```

# java - JPA 查询 - 如何混合任意查询字符串和 CriteriaBuilder

> ID：10579483
> 
> 赞同：0
> 
> 时间：2012-05-14T08:01:45.267
> 
> 标签：java, jpa, jpql

我需要执行表单的查询

```
SELECT dontcare FROM Bar b WHERE x = y AND expr 
```

*   x 是 Bar 中任何字段的名称，y 是特定值。这些是通过 Servlet 来的，不能被信任。
*   expr 是一个项目特定的过滤器，用于更改涉及其他字段的查询范围 - 这是受信任的，来自配置文件，可能非常复杂。

一种不安全的方法是

```
String qStr = "SELECT foo FROM Bar b WHERE " + x " = " + y " AND " + expr 
```

但是 x 和 y 不是受信任的来源，因此容易受到注入攻击。我找到了 CriteriaBuilder，并对“x = y”部分进行了编程构建，该部分运行良好，但找不到如何附加“AND expr”。

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaBuilder<Bar> q = cb.createQuery(Foo.class);
Root<Bar> root = q.from(Bar.class);
Predicate p1 = cb.equals(root.get(x), y);
Predicate p2 = <====== help needed here, how can I use expr
q.where(cb.and(p1, p2));
Query query = em.createQuery(q); 
```

有任何想法吗？我花了很多时间浏览教程和表达式、谓词、查询等的 javadocs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:07:37.600

使用条件 api，您可以创建连词，其中包含许多必须为真的谓词。

如果你想要 OR，你可以使用析取。

就像是：

```
Criteria crit = session.createCriteria(Product.class);
Conjunction conjunction = Restrictions.conjunction();
conjunction.add(Restrictions.isNull("location"));
conjunction.add(Restrictions.eq("location", ""));
crit.add(conjunction); 
```

# c# - 带圆角的文本框

> ID：10579488
> 
> 赞同：0
> 
> 时间：2012-05-14T08:02:03.270
> 
> 标签：c#, winforms, system.drawing

如何在winform c#中创建文本框的弯曲边缘

示例文本框：http: [//www.codeproject.com/KB/edit/RoundedCornerTextbox/RoundedTextbox.png](http://www.codeproject.com/KB/edit/RoundedCornerTextbox/RoundedTextbox.png)

这段代码VB

```
 Protected Overrides Function ProcessCmdKey(ByRef msg _
                    As System.Windows.Forms.Message, _
                    ByVal keyData As System.Windows.Forms.Keys) As Boolean 
    If msg.WParam.ToInt32() = CInt(Keys.Enter) Then 
        SendKeys.Send("{Tab}")
        Return True 
    ElseIf msg.WParam.ToInt32() = CInt(Keys.Decimal) Then 
        SendKeys.Send(",")
        Return True 
    End If 
End Function 
```

> 下一个方法是 WM_Paint 事件的实际覆盖，其中完成重绘。它利用 API 函数 GetWindowDC 和 ReleaseDC 来获取控件的实际图形，包括非客户区。

```
Protected Overrides Sub WndProc(ByRef m As _
          System.Windows.Forms.Message) Handles MyBase.WndProc(m)
    Select Case m.Msg
        Case &HF 'WM_PAINT 
            Dim rect As New Rectangle(0, 0, MyBase.Width, MyBase.Height)
            Dim hDC As IntPtr = GetWindowDC(Me.Handle)
            Dim g As Graphics = Graphics.FromHdc(hDC)
            If Me.Enabled Then 
                g.Clear(Color.White)
            Else 
                g.Clear(Color.FromName("control"))
            End If 
            DrawBorder(g)
            DrawText(g)
            ReleaseDC(Me.Handle, hDC)
            g.Dispose()
        Case &H7, &H8, &H200, &H2A3
        'CMB_DROPDOWN, CMB_CLOSEUP, WM_SETFOCUS, 
        'WM_KILLFOCUS, WM_MOUSEMOVE, 'WM_MOUSELEAVE 
            UpdateState()
    End Select 
End Sub 
```

> 要获得圆角，使用如下所示的方法。

```
Private Sub TekenRondeRechthoek(ByVal g As Graphics, _
            ByVal pen As Pen, ByVal rectangle As Rectangle, _
            ByVal radius As Single)
    Dim size As Single = (radius * 2.0!)
    Dim gp As GraphicsPath = New GraphicsPath
    gp.AddArc(rectangle.X, rectangle.Y, size, size, 180, 90)
    gp.AddArc((rectangle.X + (rectangle.Width - size)), _
               rectangle.Y, size, size, 270, 90)
    gp.AddArc((rectangle.X + (rectangle.Width - size)), _
              (rectangle.Y + (rectangle.Height - size)), _
              size, size, 0, 90)
    gp.AddArc(rectangle.X, (rectangle.Y + _
             (rectangle.Height - size)), size, size, 90, 90)
    gp.CloseFigure()
    g.DrawPath(pen, gp)
    gp.Dispose()
End Sub 
```

如何在c#中创建

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:40:44.543

[http://www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)是将 VB.net 代码转换为 C#（或其他方式）的绝佳站点。应该使您更容易进行更改并查看它在 VB.net 中的效果

# seo - 我的网站如何出现在搜索引擎中

> ID：10579495
> 
> 赞同：-1
> 
> 时间：2012-05-14T08:02:50.533
> 
> 标签：seo, pagerank

我为一家经营泵、阀门和柴油发动机的公司开发了一个网站。他们要求当感兴趣的用户使用“泵经销商”或“阀门经销商”等关键字进行搜索时，他们的网站应该出现在结果中。目前我不知道如何解决这个问题，所以我的问题是我应该怎么做才能获得更好的页面排名。我正在使用有意义的页面标题，并且每页都有足够的文字。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:58:09.843

首先，Pagerank 这些天是无关紧要的，所以不用担心。

你应该确保你使用谷歌的网站管理员工具来检查谷歌是否知道你的网站等。这会告诉你它在谷歌上即将发生的事情。

确保页面上有你想要排名的文本——正如你提到的，标题、标题等会有所帮助，但不要过度。

要做的主要事情是获取指向您网站的链接——撰写有趣的博客文章、联系客户等，以便他们链接到您。

这真的取决于你的竞争对手是谁——如果已经有 10 家大公司在这些条件下排名，那么你就被困住了。

另一种方法是购买 Adwords——不过，这可能需要每天 5-10 美元以上才能获得任何有意义的流量。

# php - Joomla 菜单不显示标题

> ID：10579496
> 
> 赞同：2
> 
> 时间：2012-05-14T08:02:58.517
> 
> 标签：php, joomla, joomla-template, joomla2.5

我想知道是否有人可以提供帮助，我的模板中有以下代码：

```
<?php if ($this->countModules('quick_links_1')): ?>
    <jdoc:include type="modules" name="quick_links_1" />                        
<?php endif; ?> 
```

我还创建了一个菜单，该菜单已分配给 Joomla 管理员中的该位置，并且菜单显示正常。

在菜单配置中，我将“显示标题”设置为“显示”，但它不显示菜单标题。

有任何想法吗？此外，当我讨论这个主题时，我在前端找不到菜单的组件（如 com_content），我希望能够覆盖菜单的默认显示，这样我就可以获得一些额外的 HTML。你能指出我正确的方向吗？

我正在使用 Joomla 2.5。

谢谢，

伊恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T13:00:20.003

我最终设法解决了它，它是 jdoc 包括：

```
<jdoc:include type="modules" name="quick_links_1" /> 
```

这需要是这样的：

```
<jdoc:include type="modules" name="quick_links_1" style="xhtml" /> 
```

我最终在模板文件夹的 modules.php 中设置了我自己的 modChrome。有关这方面的更多信息，请查看此处：[http ://docs.joomla.org/Applying_custom_module_chrome](http://docs.joomla.org/Applying_custom_module_chrome)

而且正如 Javex 所说，没有 com_menu，它在 modules/mod_menu 中，我不知道为什么我没有进去看！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:22:34.327

前端没有“com_menus”。您将需要查看文件夹“modules”中的“mod_mainmenu”。复制一份并在适当的文件中重命名新的。

在此过程中，您还可以通过检查源代码来检查为什么它不显示您的标题。也许在这里进行了修改（无论出于何种原因）。

此外，如果您向我提供一个网址，我也许可以调查问题（也许是显示问题？）。

# sharepoint - 从 NewFrom、EditForm、通知电子邮件中隐藏自定义列表列

> ID：10579497
> 
> 赞同：0
> 
> 时间：2012-05-14T08:03:05.727
> 
> 标签：sharepoint, sharepoint-2010

我在 Tasks 列表中创建了几个名为*NotifyUser*和*IsUserNotified*的自定义列。这些列不应该由用户更改。我只以编程方式更改它们。是否有任何机制：

1.  从 NewForm、EditForm 中隐藏这些列（我想使用现有的表单）。
2.  当这两个列中的任何一个发生更改时，跳过执行工作流。
3.  从通知邮件中排除列（只要用户对这些列一无所知，就不需要显示它们）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:36:26.133

[如果您以编程方式或通过字段架构定义](http://msdn.microsoft.com/en-us/library/aa979575)（通过 WSP 解决方案和功能部署）创建字段，则只能控制这些内容：

1.  将属性*Hidden*设置为`true`以隐藏用户表单和视图中的字段。
2.  参考：[SharePoint Workflow：如何在不再次触发工作流的情况下更新项目](https://stackoverflow.com/q/2466533/181108)
3.  应该在1之前完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T06:16:12.707

您可以通过进入列表工具->列表->列表设置->视图来编辑您的视图。然后单击列表的名称，您可以从中取消选中您不想向用户显示的列，然后单击确定。

# dynamic - 基于来自不同工作表的行的动态组合框

> ID：10579502
> 
> 赞同：0
> 
> 时间：2012-05-14T08:03:29.343
> 
> 标签：dynamic, combobox, excel, vba

我在 Excel 2010 的工作簿中有 2 张工作表。第一张有一行名称，如下所示：Jens A. Christian Peter Jens A. Anders Jens A. 等。

在第二张纸上，我想制作一个组合框，它显示第一张纸上的所有名称，但没有重复。可以用 VBA 代码实现吗？

另外我想让列表动态，但我想我只需要调用函数：

```
Private Sub Workbook_Open() 
```

实现这一目标？

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T19:49:40.983

请检查以下宏。它在 2 列上运行，但您可以对其进行调整。

```
Option Explicit
Sub UniqueRecords()

Dim i As Long
Dim j As Long
Dim k As Long
Dim bDuplicate As Boolean

i = 1
Do Until Cells(i, 1).Value = ""

  'check if record exist
  j = 1
  Do Until Cells(j, 2).Value = ""
    bDuplicate = False
    If Cells(i, 1).Value = Cells(j, 2).Value Then
      bDuplicate = True
      Exit Do
    End If
  j = j + 1
  Loop

  'add record if no duplicate
  If bDuplicate = False Then
    For k = 1 To ActiveSheet.Rows.Count
      If Cells(k, 2).Value = "" Then
        Cells(k, 2).Value = Cells(i, 1).Value
        Exit For
      End If
    Next k
  End If

i = i + 1
Loop

End Sub 
```

# php - 在 php 中获取 cookie？

> ID：10579504
> 
> 赞同：-4
> 
> 时间：2012-05-14T08:03:35.657
> 
> 标签：php, cookies, get, set

> **可能重复：**
> [可以通过一个插入查询php在mysql中的两个不同表中插入数据吗？](https://stackoverflow.com/questions/10578599/it-is-possible-to-insert-data-in-two-different-table-in-mysql-by-one-insert-quer)

我有一些用户信息保存在cookie中，用户信息是这样的，

**Fname:Muhammad,Lname:Riaz,title:Developer,org:MagicLamp,email:riaz@yaho.com**

我想将这些信息插入到 mysql 数据库中，问题是如何从 cookie 中获取这些信息并插入到数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:09:21.073

It looks like you're only creating one cookie, "user_token", which contains the serialized information you want. I think you want your foreach to iterate over the unserialized "user_token" cookie instead of all the cookies.

# javascript - jQuery / canvas：检查矩形是否穿过另一个矩形

> ID：10579506
> 
> 赞同：1
> 
> 时间：2012-05-14T08:03:49.367
> 
> 标签：javascript, jquery, html5-canvas

我有一个网格，用户可以在上面绘制矩形（实际上是房子里的房间）。因为房间不能相互交叉，所以我尝试在绘制第二个房间之前检查是否存在冲突。到目前为止，我设法检查了第二个矩形的“到点”是否在第一个矩形内（=> return false）。**但是当房间的边界穿过**另一个房间时，代码也必须“返回：false” 。

[我在这里设置了一个示例页面](http://www.pixlogic.be/so/)

要尝试它，请单击网格中的任意位置，然后单击其他位置以创建第一个房间。然后在此框外单击并移动光标以查看问题...

在源代码中，我标记了相关代码（从第 175 行开始）。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:08:51.907

这个[http://www.gamedev.net/page/resources/_/technical/game-programming/collision-detection-r735](http://www.gamedev.net/page/resources/_/technical/game-programming/collision-detection-r735)算法看起来相当容易被窃取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:45:49.237

您在每个语句调用的匿名函数中返回 false :-) checkConflict 函数始终返回 true ！看 ：

```
function checkConflict(fromx, fromy, tox, toy) {
    $.each(rooms, function() {
        var left1 = fromx;
        var left2 = $(this)[0];
        var right1 = tox;
        var right2 = $(this)[2];
        var top1 = fromy;
        var top2 = $(this)[1];
        var bottom1 = toy;
        var bottom2 = $(this)[3];

        if (bottom1 < top2) { return false; }
        if (top1 > bottom2) { return false; }
        if (right1 < left2) { return false; }
        if (left1 > right2) { return false; }
    });  
    return true;
} 
```

这很容易解决，但我给你更新的代码，因为你的测试也不正确（你想测试你是否在盒子里面，你以前的代码总是返回 false ）所以这可能是这样的（你必须改进此代码，因为它也不能完美运行）：

```
 function checkConflict(fromx, fromy, tox, toy) {
    var returnValue = true;
    $.each(rooms, function() {
       if (tox > this[0] &&
           tox < this[2] && 
           toy > this[1] && 
           toy < this[3]) 
        { returnValue = false; return false; }

        if (fromx > this[0] && 
            fromx < this[2] &&
            fromy > this[1] && 
            fromy < this[3]) 
        { returnValue = false; return false; }

    });
    return returnValue;
} 
```

**编辑：** 我写了正确的代码。我认为这会更容易，但是，承诺就是承诺......可能有重构代码的方法，但现在头痛已经足够了:-D

我做了一个 JSFiddle，所以你可以看到结果：http: [//jsfiddle.net/T4ta9/2/](http://jsfiddle.net/T4ta9/2/)

```
function checkConflict(fromx, fromy, tox, toy) {
    var returnValue = true;
    $.each(rooms, function() {

         var squareLeft = Math.min( parseInt(this[0]) ,parseInt(this[2])) , 
            squareRight = Math.max(parseInt(this[0]) ,parseInt(this[2]))  , 
            squareTop = Math.min(parseInt(this[1]) ,parseInt(this[3])) ,
            squareBot = Math.max(parseInt(this[1]) ,parseInt(this[3])) ;

         //drawing inside a shape
         if ((fromx > squareLeft && fromx < squareRight && fromy > squareTop && fromy < squareBot) 
         && (tox > squareRight || tox < squareLeft || toy > squareBot || toy < squareTop)) {
        returnValue = false;
        return false;
    }

        // meet the bottom of the current square ?
        if (fromy >= squareBot && // we are below this square 
                ( 
                (toy < squareBot) &&  // and our destination is above the bottom of this square
                    ( 
                        (
                            fromx < squareRight && // we are drawing on the inner left side of this square
                            (tox > squareLeft || fromx > squareLeft)  // and our destination is on the left of this square, or we started to draw on the right part of this square
                        ) 
                        || 
                        (
                            fromx > squareLeft && // we are drawing on the inner right side of this square
                            (tox < squareRight || fromx < squareRight)  // and our destination is on 
                        )
                    )
                )
            ) 
        {
            returnValue = false;
            return false;
        }

        // meet the top of a square ?
        if (fromy <= squareTop && 
                ( 
                (toy > squareTop) &&  
                    ( 
                        (
                            fromx < squareRight && 
                            (tox > squareLeft || fromx > squareLeft) 
                        ) 
                        || 
                        (
                            fromx > squareLeft && 
                            (tox < squareRight || fromx < squareRight)  
                        )
                    )
                )
            ) 
        {
            returnValue = false;
            return false;
        }

        // meet the left of a square ?
        if (fromx <= squareLeft && 
                ( 
                (tox > squareLeft) &&  
                    ( 
                        (
                            fromy < squareBot && 
                            (toy > squareTop || fromy > squareTop) 
                        ) 
                        || 
                        (
                            fromy > squareTop && 
                            (toy < squareBot || fromy < squareBot)  
                        )
                    )
                )
            ) 
        {
            returnValue = false;
            return false;
        }

        // meet the right of a square ?
        if (fromx >= squareRight && 
                ( 
                (tox < squareRight) &&  
                    ( 
                        (
                            fromy < squareBot && 
                            (toy > squareTop || fromy > squareTop) 
                        ) 
                        || 
                        (
                            fromy > squareTop && 
                            (toy < squareBot || fromy < squareBot)  
                        )
                    )
                )
            ) 
        {
            returnValue = false;
            return false;
        }

    });
    return returnValue;
} 
```

# iphone - 枚举二级 NSDictionaries

> ID：10579507
> 
> 赞同：0
> 
> 时间：2012-05-14T08:03:50.750
> 
> 标签：iphone, ios, nested, nsdictionary, enumeration

假设我有一个像这样嵌套 NSDictionary 的 NSDictionary（简单来说，我有大约 10 个嵌套字典）：

```
key1={
  nesteddictionary={
    nestkey1 = "nested value";
    nestedkey2 = "another value";
  }
  nesteddictionary2={
    nestedkey3 = "want this too";
  }
}
key2="awesome" 
```

打电话`[dictionary allKeys]`只给我'key1'和'key2'。有没有什么简单的方法可以像这样遍历嵌套字典中的所有键？即使是嵌套的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:08:30.550

递归函数

```
- (void) findAllKey:(NSDictionary*)dic
{
    for ( NSString *key in [dic allKeys] )
    {
        NSLog(@"%@",key);

        if ( [[dic objectForKey:key] isKindOfClass:[NSDictionary class]] )
        {
            [self findAllKey:[dic objectForKey:key]];
        }
    }
} 
```

这是深度优先搜索

# c# - 只锁定1个操作？

> ID：10579508
> 
> 赞同：5
> 
> 时间：2012-05-14T08:03:54.863
> 
> 标签：c#, .net, multithreading, .net-4.0

我一直在问自己：“为什么我应该只对一个语句使用锁定”......

*（恕我直言 - 如果它的 1 操作只是像分配一样 - 所以不应该有问题..）？*

然后我看到了这个：

> 作为基本规则，您需要锁定访问任何可写共享字段。即使在最简单的情况下——对单个字段的赋值操作——你也必须考虑同步。在下面的类中，Increment 和 Assign 方法都不是线程安全的：

```
class ThreadUnsafe
{
  static int _x;
  static void Increment() { _x++; }  
  static void Assign() { _x = 123; }
} 
```

你能告诉我为什么这不是线程安全的吗？我在脑海中运行了许多脚本，但找不到任何问题...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:12:35.150

这是为什么您的示例不是线程安全的示例。最初，`_x = 0`. 假设您`Increment`并行运行`Assign`。如果方法是线程安全的，则结果应该是`100`（如果在分配之前执行增量）或`101`（如果在分配之后执行增量）。

（编辑：请注意，每个线程都有自己的工作堆栈！）

```
 Thread 1 (executing Increment)    Thread 2 (executing Assign 100)
 -----------------------------------------------------------------
 read _x onto stack       (= 0)
                                   put 100 on top of stack
                                   write top of stack to _x (= 100)
 increment top of stack   (= 1)
 write top of stack to _x (= 1) 
```

`_x`是现在`1`，既不是`100`也不是`101`。

当然，可能是您的增量方法被编译器编译为单个原子操作。但是你不能依赖这个，除非你使用的编译器特别保证。

* * *

如果使用锁，会发生以下情况：

```
 Thread 1 (executing Increment)    Thread 2 (executing Assign 100)
 -----------------------------------------------------------------
 lock (success)
 read _x onto stack       (= 0)
                                   lock (lock already taken; 
                                   |     wait until Thead 1's lock is released)
 increment top of stack   (= 1)    |
 write top of stack to _x (= 1)    |
 unlock                            |
                                   +> (success)
                                   put 100 on top of stack
                                   write top of stack to _x (= 100)
                                   unlock 
```

结果是现在`100`。基本上，锁确保两个锁定的块不重叠。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T08:18:28.997

增量操作产生这个 MSIL...

```
.method private hidebysig static void  Increment() cil managed
{
  // Code size       14 (0xe)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldsfld     int32 ThreadUnsafe::_x
  IL_0006:  ldc.i4.1
  IL_0007:  add
  IL_0008:  stsfld     int32 ThreadUnsafe::_x
  IL_000d:  ret
} // end of method ThreadUnsafe::Increment 
```

所以你可以看到，即使在 MSIL 级别，增量也不是原子的。JIT 编译器可能会做一些聪明的事情来将其转回机器级别的原子增量，但我们当然不能依赖它。想象一下 2 个线程在“加载”和“存储”操作重叠的情况下递增相同的 X - 您可以看到最终可能是 X = X + 1 而不是 X + 2。

将增量包裹在锁内意味着它们不能重叠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T08:07:18.967

你必须在比编程语言更低的层次上思考。

不能保证

a）处理器将一次性写入新值（原子或非原子）

b) 该值将在一个 CPU 内核的缓存中更新，但不会在另一个 CPU 内核中更新（缺少内存屏障）

也许您的 CPU（可能）可以原子地读取和写入 32 位整数，您不会有任何问题。但是当你试图读/写一个 64 位值时会发生什么？128？该值可能最终处于不确定状态，其中两个不同的线程同时修改相同的内存位置，并且您最终得到值 a、值 b，或者是两者混合的中间值（并且非常不正确）。

还有很多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:20:42.590

锁定是一个非常混乱的主题，您通常很难弄清楚引擎盖下发生了什么（哪个核心缓存何时失效）。这就是为什么编写高效的并行代码是一个问题。其他人甚至指出了一些潜在的问题，即使是一次赋值（显然是增加一个变量）。只需查看[volatile](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.100%29.aspx)关键字的所有问题：[https ://www.google.com/search?q=.net+volatile+concurrency&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=火狐-a](https://www.google.com/search?q=.net+volatile+concurrency&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)

因此，如果您必须并行执行操作，请从锁定*很多*开始，即使在您认为不需要锁定的操作上也是如此。仅在遇到性能问题时才优化锁定。

# jquery - 如何从 jQuery Ajax 获取 304 而不是 200？

> ID：10579510
> 
> 赞同：6
> 
> 时间：2012-05-14T08:04:15.573
> 
> 标签：jquery

我的服务返回一个`304`但 jQuery Ajax 似乎将其转换为`200 OK`结果。

这是我的要求：

```
$.ajax({    
    url: '/api/items',    
    type: 'GET',    
    dataType: 'json',    
    contentType: 'application/json',    
    ifModified:true,    
    cache: false,    
    statusCode: {    
        304: function() {    
            alert("not modified"); // does not fire
        }    
    },    

    complete: function (xhr, status) {    
        console.log(xhr.status); // 200 
        }    
    }    
}); 
```

使用 Fiddler，我可以看到服务`304`正确返回。

为什么 jQuery 将其转换为`200`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:15:02.033

如果您想区分它们，请使用`success(data, textStatus, jqXHR)`事件并从中读取`jqXHR.status`

或以其他方式访问 jqXHR：

```
var jqxhr = $.ajax(
    ...     
    statusCode: {    
        200: function() {    
            if(304 == jqxhr.status)
                alert("not modified"); // does not fire
        }    
    },    
) 
```

[处理 304 未在 jQuery ajax 中修改的正确方法](https://stackoverflow.com/questions/5215181/proper-way-to-handle-304-not-modified-in-jquery-ajax)

***编辑***

附加`ajax()`设置：

```
ifModified:true, // Lets respond `304:notmodified` 
```

但它破坏了数据响应：

[http://forum.jquery.com/topic/how-to-fix-browser-cache-and-notmodified-respond-for-json-jquery-ajax-ifmodified-true-break-on-data-respond](http://forum.jquery.com/topic/how-to-fix-browser-cache-and-notmodified-respond-for-json-jquery-ajax-ifmodified-true-break-on-data-respond)

但是您已经使用了它，但它的工作方式仍然不同：-/

# javascript - 如何配置 datepicker 使其无法选择小于当前日期的日期？

> ID：10579515
> 
> 赞同：2
> 
> 时间：2012-05-14T08:04:40.463
> 
> 标签：javascript, jquery, datepicker

我正在使用 Datepicker，我想知道如何配置以便用户不能选择更少的当天？

解决了：`$("selector").datepicker({ minDate: "+0D" });`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:24:34.537

你在使用 jquery-ui 的日期选择器吗？它有一个满足您需求的选项（minDate）

[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

顺便说一句，您必须在服务器端验证输入，数据可能被欺骗

# python - 如何在python中生成负随机值

> ID：10579518
> 
> 赞同：14
> 
> 时间：2012-05-14T08:04:58.467
> 
> 标签：python, random

我开始学习python，我尝试通过传入一个负数和正数来生成随机值。比方说 `-1`，`1`。

我应该如何在python中做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-14T08:08:12.370

利用[`random.uniform(a, b)`](http://docs.python.org/library/random.html#random.uniform)

```
>>> import random
>>> random.uniform(-1, 1)
0.4779007751444888
>>> random.uniform(-1, 1)
-0.10028581710574902 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T08:06:09.450

```
import random

def r(minimum, maximum):
    return minimum + (maximum - minimum) * random.random()

print r(-1, 1) 
```

编辑：@San4ez`random.uniform(-1, 1)`是正确的方法。无需重新发明轮子……</p>

无论如何，`random.uniform()`编码为：

```
def uniform(self, a, b):
    "Get a random number in the range [a, b) or [a, b] depending on rounding."
    return a + (b-a) * self.random() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T08:09:57.880

if you want [integer in a specified range](http://docs.python.org/library/random#random.randrange):

```
print random.randrange(-1, 2) 
```

it uses the same convention as `range`, so the upper limit is not included.

`random.uniform` does something similar if you need float values, but it's [not always clear](http://docs.python.org/library/random#random.uniform) if the upper limit is included or not

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-23T16:40:01.387

> # **如果你想要一个给定间隔的随机*整数***

例子：

```
from random import randint
randint(-1,1)               --> Randomly returns one of the following: -1, 0, 1 
```

*区间 [-1, 1]*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T08:08:25.760

大多数语言都有一个函数，它将返回 [0, 1] 范围内的随机数，然后您可以对其进行操作以适应您需要的范围。在 python 中，函数是`random.random`. 因此，对于您的 [-1, 1] 范围，您可以这样做：

```
import random
random_number = random.random() * 2 - 1 
```

通过将数字加倍，我们得到 [0, 2] 的范围，通过从中减去一个，我们得到 [-1, 1]。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-17T22:25:08.803

你也可以做这样的事情

```
import random
random.choice([-1, 1]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-14T18:50:13.650

我发现这适用于列表理解：

```
print([x for x in [random.randint(1, 11) * -1]]) 
```

或者

```
#int range is n1 to n2
def make_negative(n1, n2):
    print([x for x in [random.randint(n1, n2) * -1]])

make_negative(1,10) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-04T02:14:38.213

我今天注意到了这一点。

```
 random.randint(a, b) 
```

其中 B > A 或 B 大于 A

所以如果我们用 -999 代替 A 和 1 代替 B

它将给我们一个负随机整数或 0 和 1。

此外，这是数学中的一条规则，较大的负数的值小于较小的负数，例如 -999 < -1

这条规则可以在这里应用！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-24T09:42:19.867

如果您想要正、负或混合范围内的 n 个随机值，您可以使用 random.sample(range(min,max), population)。

约束是距离（最大-最小）必须小于或等于总体值。在上面的示例中，您最多可以生成 6 个值

```
>> import random
>> random.sample(range(-3,3), 5) 
[-2, -3, 2, -1, 1] 
```

# android - Android：刷新活动

> ID：10579519
> 
> 赞同：0
> 
> 时间：2012-05-14T08:05:09.460
> 
> 标签：android, listview, refresh

我只是一个小问题（我希望这只是一个小问题;-)）。

当然，我当前的应用程序项目有很多活动。在其中一项活动（我称之为 DataActivity）中，我可以输入一些信息（存储在网络服务器上）。另一个活动（称为 ListViewActivity）应该显示存储在网络服务器上的所有可用信息。

问题是：我的第一步是用一些条目打开 ListViewActivity（它第一次工作正常）。然后我去 DataActivity 输入一个新的列表项。当我现在回到我的 ListViewActivity 时，没有列出新条目。我想我必须刷新 ListViewActivity ...但我不完全知道如何。;-)

添加新行/列表项后，我该怎么做才能刷新此 ListView，以便显示所有可用信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:07:55.970

我假设您在 onCreate 中调用列表的 init。只需实现 onResume （或 onStart 应该也可以）并添加一个 refresh() 方法，从您的服务器中为您的列表调用数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:08:35.680

当您回到您[`notifyDataSetChanged()`](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)的.[`notifyDataSetInvalidated()`](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetInvalidated%28%29)`ListViewActivity`

# android - “准备失败。：状态= 0x1”流式传输时发生异常

> ID：10579522
> 
> 赞同：1
> 
> 时间：2012-05-14T08:05:20.343
> 
> 标签：android, streaming

我正在使用 StreamProxy 类，以便使用`MediaPlayer`. 所以，我写了一些代码如下来启动本地服务器：

```
ProxyStream proxyStream = new ProxyStream();
proxyStream.init();
proxyStream.start(); 
```

至此，本地服务器创建成功，并获得了特殊端口。（`port 41257`获得）。我知道我们可以通过尝试将链接作为`http://127.0.0.1:41257/http://printf.ir/music/01.mp3`. 现在，我想使用 MediaPlayer 对象进行流式传输并尝试如下代码：

```
this.mediaPlayer.setDataSource("127.0.0.1:41257/http://printf.ir/music/01.wma");
this.mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
this.mediaPlayer.prepare(); 
```

在运行时，异常发生在第三行代码中，我将其粘贴在这里：

```
05-17 18:49:49.989: W/System.err(10444): java.io.IOException: Prepare failed.: status=0x1
05-17 18:49:49.989: W/System.err(10444): at android.media.MediaPlayer.prepare(Native Method)
05-17 18:49:49.989: W/System.err(10444): at com.exmaple.stream.StreamMediaPlayerActivity.onClick(StreamMediaPlayerActivity.java:83)
05-17 18:49:49.989: W/System.err(10444): at android.view.View.performClick(View.java:2485)
05-17 18:49:49.989: W/System.err(10444): at android.view.View$PerformClick.run(View.java:9080)
05-17 18:49:49.989: W/System.err(10444): at android.os.Handler.handleCallback(Handler.java:587)
05-17 18:49:49.989: W/System.err(10444): at android.os.Handler.dispatchMessage(Handler.java:92)
05-17 18:49:49.989: W/System.err(10444): at android.os.Looper.loop(Looper.java:130)
05-17 18:49:49.989: W/System.err(10444): at android.app.ActivityThread.main(ActivityThread.java:3687)
05-17 18:49:49.989: W/System.err(10444): at java.lang.reflect.Method.invokeNative(Native Method)
05-17 18:49:49.989: W/System.err(10444): at java.lang.reflect.Method.invoke(Method.java:507)
05-17 18:49:49.989: W/System.err(10444): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-17 18:49:49.989: W/System.err(10444): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-17 18:49:49.989: W/System.err(10444): at dalvik.system.NativeStart.main(Native Method) 
```

如何使用 MediaPlayer 进行流式传输？！请帮我解决这个问题。

谢谢你的提前:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:40:24.137

你试过类似的东西吗

```
private void initMediaPlayer() {
mediaPlayer = new MediaPlayer();
mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
@Override
public void onPrepared(MediaPlayer mp) {
mediaPlayer.start();
statusText.setText("Playing...");
}
});
} 
```

[这](http://www.newyyz.com/ntgsite/2012/05/android-using-the-mediaplayer-for-online-streams/)是一个教程，介绍了使用 MediaPlayer 进行在线流的整个过程，它是教程的第二部分......我大约 3 个月前在我的一个项目中使用了这个教程，所以它确实有效，你应该给以前

# php - 以分层方式从php mysql中删除记录

> ID：10579523
> 
> 赞同：-6
> 
> 时间：2012-05-14T08:05:20.540
> 
> 标签：php, mysql, hierarchical-data

我想以分层方式从 mysql 中删除记录。我有这样的数据库

```
id pid
1 0
2 1
3 2 
```

我想删除以上所有记录。请在 php mysql 中回复正确的功能。

```
function content_deleted($content_id=0, $parent_id=0)
    {
        if($parent_id==0)
        {
            $query = $this->db->query("SELECT content_id FROM tbl_content WHERE content_id = $content_id");
        }
        else
        {
            $query = $this->db->query("SELECT content_id FROM tbl_content WHERE content_parent_id = $content_id");  
        }

        if($query->num_rows()>0)
        {
            foreach($query->result() as $res)
            {
                $id = $res->content_id;
                if($parent_id==0)
                {
                    $this->db->query("DELETE FROM tbl_content WHERE content_id = $id"); 
                }
                else
                {
                    $this->db->query("DELETE FROM tbl_content WHERE content_parent_id = $id");
                    $this->content_deleted($content_id, $id);   
                }
            }   
        }
    } 
```

这是我的功能，我卡在这里它只删除一条记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:09:26.843

关系数据库不适合树结构。如果您只有`id`和`parent_id`字段，则必须进行大量循环和递归才能使用树。这就是发明[嵌套集或 MPTT](http://en.wikipedia.org/wiki/MPTT)的原因。您应该为您的树移至该模型，这个问题将自行解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:07:29.527

```
delete from your_table order by id desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:14:55.817

用 php 转表：

```
$SQL = "TRUNCATE TABLE `table_name`";
mysql_query($SQL); 
```

这将重置所有自动增量。并删除表中的所有记录。

# c# - 运行 c# .exe 文件而不安装它（包括 DLL）

> ID：10579528
> 
> 赞同：1
> 
> 时间：2012-05-14T08:05:53.290
> 
> 标签：c#

我在 Visual Studio 2008 中使用 c# 桌面基础应用程序，它是 zip 制造商，所以我想让 .exe 文件必须在不安装的情况下运行。那么任何人都可以帮我做到这一点吗？

我想在该 exe 中包含所有 .dll 文件，并希望在不安装它的情况下运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:11:52.420

ILMerge allows you to package your dependent DLLs into your .exe file.

[http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:08:57.210

By default VS makes .exe file goto your project debug folder and use it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:10:35.867

Click on Build!

The Exe is created in the `"\bin\Debug"` Folder.

Copy the Exe From the `"\bin\Debug"` Folder.

If more Dll's are present use [IlMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx) to pack all the dll and exe to one file.

An alternative to IlMerge is [.NETZ](http://madebits.com/netz/)

Use the new exe without installation!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:21:22.617

作为 ILMerge 的替代方案，您可以将 DLL 打包为嵌入式资源并按需加载它们。

请参阅[http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)

# java - Java 接收附件邮件错误

> ID：10579529
> 
> 赞同：0
> 
> 时间：2012-05-14T08:06:06.307
> 
> 标签：java, email, character-encoding, jakarta-mail, mime

我有一个使用 java 邮件获取附件的 java 代码，我可以下载附件并插入到特定文件夹中。但问题是当我从黑莓手机发送带有附件的电子邮件时，我收到如下错误下载附件。

```
ERROR [STDERR] java.io.FileNotFoundException: E:\CCjboss\server\sor
emicc\deploy\eis.ear\CC.war\attachment\=?utf-8?B?MS5qcGc= (The filename, directo
ry name, or volume label syntax is incorrect)
07:31:10,739 ERROR [STDERR]     at java.io.FileOutputStream.open(Native Method)
07:31:10,741 ERROR [STDERR]     at java.io.FileOutputStream.<init>(FileOutputStr
eam.java:179)
07:31:10,744 ERROR [STDERR]     at java.io.FileOutputStream.<init>(FileOutputStr
eam.java:131)
07:31:10,747 ERROR [STDERR]     at com.infosense.eis.webapp.util.Mobilekiran.sav
eFile(Mobilekiran.java:230)
07:31:10,750 ERROR [STDERR]     at com.infosense.eis.webapp.util.Mobilekiran.Mob
ileTimeCheckTask(Mobilekiran.java:179)
07:31:10,753 ERROR [STDERR]     at com.infosense.eis.webapp.util.Mobilekiran.run
(Mobilekiran.java:38)
07:31:10,756 ERROR [STDERR]     at java.util.TimerThread.mainLoop(Timer.java:432
)
07:31:10,759 ERROR [STDERR]     at java.util.TimerThread.run(Timer.java:382) 
```

我认为它有一些编码和解码问题。附件被编码或其他东西

```
=?utf-8?B?MS5qcGc= 
```

以下是接收带有附件的电子邮件的代码

```
import javax.mail.*;
import javax.mail.internet.*;
import java.util.*;
import java.io.*;
import java.util.*;
import java.lang.String;
import javax.mail.internet.*;
/**
 *
 * @author  Administrator
 */
public class Mobilekiran extends TimerTask{
     List emattach=new ArrayList();
  List emails = new ArrayList();
  List attachments=new ArrayList();
  String emailbody=null;
  String bodypart=null;
  String s1=null;
  String fromaddress=null;
  String subject=null;
  String body=null;
  String date1=null;
  String filename=null;
  int filesize=0;

    public void run() {
        MobileTimeCheckTask(); 
    }

    private void MobileTimeCheckTask(){

    String host = "mail.**********.com";
    String username = "*****@****.com";
    String password = "*******";
    String downloadDir = "E:/CCjboss/server/soremicc/deploy/eis.ear/CC.war/attachment";
    String provider = "pop3";
        try{

             // Create empty properties
  Properties props = new Properties();

  // Get the session
  Session session = Session.getInstance(props, null);

  // Get the store
  Store store = session.getStore("pop3");
  store.connect(host, username, password);

  // Get folder
  Folder folder = store.getFolder("INBOX");
  folder.open(Folder.READ_WRITE);

  Message messages[] = folder.getMessages();
   for (int i = 0; i < messages.length; i++) {

    // from 
       Address[] toaddress1=messages[i].getAllRecipients();
      String toaddress=toaddress1[0].toString();
       System.out.println("to address"+toaddress1[0].toString());

    emails.add(0,messages[i].getFrom()[0].toString());
    s1=messages[i].getFrom()[0].toString();
    InternetAddress address = new InternetAddress(s1);
     fromaddress=address.getAddress();

    // subject
    emails.add(1,messages[i].getSubject());
    subject=messages[i].getSubject();
    // received date
    if (messages[i].getReceivedDate() != null) {
     emails.add(2,messages[i].getReceivedDate().toString());
     date1=messages[i].getReceivedDate().toString();
      // emattach.add(0,emails);
    } else {
     emails.add(2,new Date());
     date1=(new Date()).toString();
      // emattach.add(0,emails);
    }

    // body and attachments
    //email.body = "";
    Object content = messages[i].getContent();
    if (content instanceof java.lang.String) {

     emails.add(3,(String) content);

    } else if (content instanceof Multipart) {

     Multipart mp = (Multipart) content;
     boolean d=true;
     for (int j = 0; j < mp.getCount(); j++) {

      Part part = mp.getBodyPart(j);
      BodyPart bp=mp.getBodyPart(j);
      Object o2 = bp.getContent();
      if (o2 instanceof String) {

                            System.out.println("**This is a String BodyPart**");
                            System.out.println("bodypart "+(String)o2);
                            if(d)

                            emails.add(3,(String)o2);
                            body=(String)o2;
                            d=false;

                        } 

      String disposition = part.getDisposition();

      if (disposition == null) {

       MimeBodyPart mbp = (MimeBodyPart) part;
       if (mbp.isMimeType("text/plain")) {
        // Plain

        emailbody += (String) mbp.getContent();
           emails.add(3,emailbody);

       } 

      } else if ((disposition != null) && (disposition.equals(Part.ATTACHMENT) || disposition .equals(Part.INLINE))) {

       // Check if plain
       MimeBodyPart mbp = (MimeBodyPart) part;
       if (mbp.isMimeType("text/plain")) {

           emailbody += (String) mbp.getContent();
           emails.add(3,emailbody);

       } else {
        //EmailAttachment attachment = new EmailAttachment();

           System.out.println("the filename  i required"+part.getFileName().toString());

        attachments.add(0,Mobilekiran.decodeName(part.getFileName()));
         filename=decodeName(part.getFileName());
        File savedir = new File(downloadDir);
        savedir.mkdirs();
        // File savefile = File.createTempFile( "emailattach", ".atch", savedir);
        File savefile = new File(downloadDir,attachments.get(0).toString());
        attachments.add(1,savefile.getAbsolutePath());
        attachments.add(2,new Integer(Mobilekiran.saveFile(savefile, part)));
        filesize=saveFile(savefile,part);
        emattach.add(0,attachments);
       }
      }
     } // end of multipart for loop 
    emattach.add(0,emails);
   System.out.println(emattach);
   emattach.clear();
   System.out.println(emattach);
    messages[i].setFlag(Flags.Flag.DELETED , true);

      } // end messages for loop

    // Finally delete the message from the server.

   }

   // Close connection
   folder.close(true); // true tells the mail server to expunge deleted messages
   store.close();
        }catch(Exception e){
            e.printStackTrace();
         }
    }  
    private static String decodeName(String name) throws Exception {
  if (name == null || name.length() == 0) {
   return "unknown";
  }
  String ret = java.net.URLDecoder.decode(name, "UTF-8");

  // also check for a few other things in the string:
  ret = ret.replaceAll("=\\?utf-8\\?q\\?", "");
  ret = ret.replaceAll("\\?=", "");
  ret = ret.replaceAll("=20", " ");

  return ret;
 }

 private static int saveFile(File saveFile, Part part) throws Exception {

  BufferedOutputStream bos = new BufferedOutputStream(
    new FileOutputStream(saveFile));

  byte[] buff = new byte[2048];
  InputStream is = part.getInputStream();
  int ret = 0, count = 0;
  while ((ret = is.read(buff)) > 0) {
   bos.write(buff, 0, ret);
   count += ret;
  }
  bos.close();
  is.close();
  return count;
 }
} 
```

请帮助我解决上述问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:08:28.360

看起来附件是编码的。

# android - Android 图库和大图

> ID：10579531
> 
> 赞同：0
> 
> 时间：2012-05-14T08:06:10.207
> 
> 标签：android, memory

`OutOfMemoryException`在 Android 上，这是一个真正的痛苦。
目前我有一个画廊小部件，我在其中设置了 30 个 256x256 像素的图像，并使用 BaseAdapter 显示它们。

在某些时候，假设每秒钟尝试一次，当我想将`ArrayList<Bitmap>`列表作为数据加载到图库时，应用程序就会崩溃。
我知道在内存中保留 30 个位图是愚蠢的，但有什么替代方法。我在资源中有它们，我需要它们在画廊中展示。

**更新（适配器）：**

```
public class MyGalleryAdapter extends BaseAdapter {
    private Context mContext;
    private ArrayList<MyDataObject> data = new ArrayList<MyDataObject>();

    public GalleryItemsAdapter(Context context) {
        mContext = context;
    }

    public int getCount() {
        return data.size();
    }

    public DataHolder getItem(int position) {
        return data.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = LayoutInflater.from(mContext);
        convertView = inflater.inflate(R.layout.single_item, null);

        ImageView imgView = (ImageView) convertView.findViewById(R.id.single_item_image_view);
        imgView.setImageBitmap(data.get(position).bitmap);

        return convertView;
    }

    public void setData(ArrayList<MyDataObject> data) {
        this.data = data;
    }
}

    private class MyDataObject {
        public String title;
        public Bitmap image;
    }
} 
```

**更新（错误）：**

```
I/dalvikvm( 9073): "main" prio=5 tid=1 RUNNABLE
I/dalvikvm( 9073):   | group="main" sCount=0 dsCount=0 obj=0x40a3c460 self=0x12828
I/dalvikvm( 9073):   | sysTid=9073 nice=0 sched=0/0 cgrp=default handle=1074185352
I/dalvikvm( 9073):   | schedstat=( 0 0 0 ) utm=437 stm=30 core=1
I/dalvikvm( 9073):   at android.graphics.Bitmap.nativeCreate(Native Method)
I/dalvikvm( 9073):   at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
I/dalvikvm( 9073):   at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
I/dalvikvm( 9073):   at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
I/dalvikvm( 9073):   at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
I/dalvikvm( 9073):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
I/dalvikvm( 9073):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
I/dalvikvm( 9073):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
I/dalvikvm( 9073):   at android.content.res.Resources.loadDrawable(Resources.java:1937)
I/dalvikvm( 9073):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
I/dalvikvm( 9073):   at android.view.View.<init>(View.java:2780)
I/dalvikvm( 9073):   at android.view.View.<init>(View.java:2717)
I/dalvikvm( 9073):   at android.view.ViewGroup.<init>(ViewGroup.java:379)
I/dalvikvm( 9073):   at android.widget.RelativeLayout.<init>(RelativeLayout.java:174)
I/dalvikvm( 9073):   at java.lang.reflect.Constructor.constructNative(Native Method)
I/dalvikvm( 9073):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:13:42.167

为您的图像创建缩略图。

```
Thumbnails.getThumbnail(cr, origId, kind, options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:16:31.710

我猜这里有什么问题：

在您的适配器的 onCreateView 方法中，无论如何您都会创建一个新视图。

您要做的是检查参数给出的视图是否已经创建：

```
@override
public abstract View getView (int position, View convertView, ViewGroup parent){
if(view==null)
   // inflate the view 
else{
   // use view how it is
 }

.......
return view;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:16:41.767

你应该在 android 开发网站上阅读这篇关于如何处理位图和内存错误的文章

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# javascript - tojson 没有显示 json 响应

> ID：10579532
> 
> 赞同：-1
> 
> 时间：2012-05-14T08:06:11.730
> 
> 标签：javascript, jquery, json

我有一个从java代码返回的json。我使用 toJSON 来显示 json，但是当我使用 firebug 调试它时它没有显示任何内容并给出错误。下面是我必须在浏览器中显示的响应。

```
{"status":"0","Response":{ 
        "name":"abc";
    "gender":"male";
    }
} 
```

下面是我正在调用的jsp中的函数：

```
$.ajax({
        type: 'post',
        url:$("#abc").val(), 
        dataType:'json',
        success:function(data) {
            alert(data);
           var json = $.toJSON(data);
           alert(json);
           $("#response").val(json);
        },
        error:function() {
             alert("request failed");
        }                 
    }); 
```

第一个警报显示 [object] 但第二个警报没有显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:22:58.857

没有这样的东西`$.toJSON()`，这就是你得到错误的原因。使用`JSON.stringify()`和`JSON.parse()`。

或者，如果您设置了正确的 contentType，您应该能够在不进行任何转换的情况下使用它。

编辑：正确`toJSON()`的是一个插件。Imo 不需要这个，来自浏览器和 jQuery 的标准 JSON 处理足以完成该任务。

# umbraco - Umbraco v 4.7.1.1 加载缓慢

> ID：10579537
> 
> 赞同：2
> 
> 时间：2012-05-14T08:06:39.323
> 
> 标签：umbraco

我已经建立了一个全新的虚拟服务器。Windows Server 2008R2 Datacenter Edition 和 MS-SQL 2008R2 Standard Edition 在同一台服务器上。该服务器使用 2 个 CPU，并具有 4 GB 的内存。可以说，机器上有足够的电量。

在服务器上，我只安装了五个 Umbraco 网站。

但是我的 Umbraco 版本 4.7.1.1 安装的加载速度很慢。当我运行 ?umbDebugShowTrace=true 时，我明白了：

类别：umbracoInit
消息：处理请求
从第一个：4.60952439486024E-05
从最后一个：0,000046

所有其他类别都非常快。有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:59:14.843

访问[http://st5.workcopy.net/?umbDebugShowTrace=true](http://st5.workcopy.net/?umbDebugShowTrace=true)（显示您的网站堆栈跟踪）后，您的主要问题在于 NavigationSelect 宏，它在页面生命周期的 0.015-0.016 秒开始渲染，并完成渲染进入周期 8.52 秒。我是否可以建议您考虑改进该宏中的方法调用（您是否经常调用`library.NiceUrl()`？），因为这似乎是您的页面加载速度的来源。

您的 FirstPageBoxes 宏似乎也在尝试大量的静态类型转换，这表明对`Model.MyProperty`具有底层复杂类型（例如 XML 块 - YouTube 数据类型，也许？）的属性（例如）的大量调用 - 也许您应该将其调用一次到一个单独的强类型变量中，以便您的转换仅在运行时执行一次，从而进一步提高宏性能。

# javascript - 如何捕获页面上的所有请求和响应，并根据需要对每个响应状态执行操作

> ID：10579541
> 
> 赞同：3
> 
> 时间：2012-05-14T08:06:52.373
> 
> 标签：javascript, jquery, html

他们是否可以通过任何方式监控页面上由脚本、单击或其他任何内容触发的所有请求，它不应该依赖于任何脚本块或代码，只需使用 jquery 和 javascript 监控请求的内容

例子：

// 监控页面上的所有请求。

```
monitor{

    success:function(){

    }
    error:function(){

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T21:51:44.860

在 jQuery 中可能是这样的：

```
var original_jquery_ajax=$.ajax;
$.ajax=function(){
    var a_fn, a_url;
    var cb=function(data, status, settings){
        a_fn(data, status, settings);
        console.log(a_url, data); // <-- here
    }
    for(var i=0; i<arguments.length; i++)
        if(arguments[i] instanceof Object){
            if(arguments[i].success){
                a_fn=arguments[i].success; arguments[i].success=cb;
            }
            if(arguments[i].url) a_url=arguments[i].url;
        }
    if(typeof(arguments[0])=="string") a_url=argements[0];
    var aj=original_jquery_ajax.apply(null,arguments);
    var done_original=aj.done;
    aj.done=function(cb_fn){
        a_fn=cb_fn;
        done_original(cb);
        return aj;
    };
    return aj;
}; 
```

现在，当使用 $.ajax(url) 时，您在控制台中有 url 和返回的数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:48:20.337

您无法跟踪网页上的***所有请求。***但是，您可以通过将 $.ajax bay 替换为包装器来跟踪***使用 jQuery***发出的请求。

示例替换插件：

```
(function($, undefined) {
    // a private variable which will store the current active monitors
    var monitors = [];

    // a public API to add a monitor.
    $.monitorAjax = function(monitor) {
        monitors.push(monitor);
    };

    // here starts the implementation.

    // a function to wrap a callback (error or success) to make monitors functions called.
    var wrapCallback = function(name, settings) {
        return function() {
            for(var i = 0; i < monitors.length; i++) {
                var monitor = monitors[i];
                if(monitor[name] != null) monitor[name].apply(this, arguments);
            }
            if(settings[name] != null) settings[name].apply(this, arguments);
        };
    };

    // replace $.ajax by a wraped version which will replace success and error callbacks by wrappers.
    // note that you may also track calls and their settings if you want.
    var unwrappedAjax = $.ajax;
    $.ajax = function(url, settings) {
        if(settings == null) settings = {};

        var wrappedSuccess = wrapCallback("success", settings);
        var wrappedError = wrapCallback("error", settings);

        var wrappedSettings = $.extend({}, settings, {success: wrappedSuccess, error: wrappedError});

        return unwrappedAjax(url, wrappedSettings);
    };
})(jQuery); 
```

# android - 检索数据时如何从 Web 服务获取时间？

> ID：10579542
> 
> 赞同：0
> 
> 时间：2012-05-14T08:06:57.157
> 
> 标签：android, web-services

我可以从 web 服务检索数据，但现在我想知道/获取时间，数据是从 web 服务发送的。从 Web 服务接收数据的时间。不是本地设备时间。换句话说，Web 服务应该与调用 Web 服务方法的数据一起打包时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:16:08.160

根据 WS 本身，这样做的唯一方法是让 WS 实现一个返回该值的方法。

OTOH，您可以尝试在 WS 回复的 HTTP 标头中查找值。

# asp.net - Jabber-net 发送消息 (VB.NET)

> ID：10579543
> 
> 赞同：0
> 
> 时间：2012-05-14T08:06:58.500
> 
> 标签：asp.net, xmpp, vb.net-2010, sendmessage, google-talk

我创建了测试项目以使用 Jabber 库通过 google talk 发送消息。由于我已经有可以使用 agsXMPP 成功发送消息的测试项目，我想模仿这个项目来使用 jabber 库。但是，即使代码运行 pass 发送消息命令没有任何错误，也没有发送消息。似乎甚至没有检查密码，因为它没有进入 OnAuthError 事件。

我的测试项目是使用 VB.NET 语言的 ASP.NET Web 应用程序项目。有 4 个文本框需要填写：发送者帐户 (txt_Sender)、发送者密码 (txt_Password)、要发送的消息 (txt_Message) 和接收者帐户 (txt_Receiver)，还有 1 个用于发送消息的按钮 (btn_Send)。我使用我的电子邮件帐户 (xxx1@gmail.com) 进行测试并将消息发送给我的朋友 (xxx2@gmail.com)。这是我的VB代码

```
Imports jabber
Imports jabber.client
Imports Microsoft.Win32
Imports System.Threading
Imports jabber.protocol.client
Imports jabber.connection

Public Class TestSendMsg
    Inherits System.Web.UI.Page
    Public done As ManualResetEvent
    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        done = New ManualResetEvent(False)
    End Sub

    Private Sub btn_Send_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btn_Send.Click
        Dim jcSender As JabberClient = New JabberClient()
        Dim jidSender As New jabber.JID(txt_Sender.Text.Trim)
        With jcSender
            .User = jidSender.User
            .Password = txt_Password.Text.Trim
            .Server = jidSender.Server
            .AutoReconnect = True
            .AutoRoster = True
        End With
        With jcSender
            Try
                AddHandler .OnAuthenticate, New bedrock.ObjectHandler(AddressOf j_OnAuthenticate)
                'AddHandler .OnAuthenticate, AddressOf j_OnAuthenticate
                AddHandler .OnPresence, AddressOf j_OnPresence
                AddHandler .OnBeforePresenceOut, AddressOf j_OnBeforePresenceOut
                AddHandler .OnAuthError, AddressOf j_OnAuthError
                AddHandler .OnAfterPresenceOut, AddressOf j_OnAfterPresenceOut
                .Connect()
                .Login()
                .IsAuthenticated = True
                .Message(txt_Reciever.Text.Trim, txt_Message.Text.Trim)
            Catch ex As Exception
                MsgBox(ex.Message)
            End Try
            .Close()
            .Dispose()
        End With
    End Sub

Private Sub j_OnAfterPresenceOut(ByVal sender As Object, ByVal pres As Presence)
    'Dim j As JabberClient = CType(sender, JabberClient)
    'j.Message(TARGET, "Registered: " & iq.BaseURI)
    'done.Set()
End Sub

Private Sub j_OnAuthError(ByVal sender As Object, ByVal pres As Presence)
    'Dim j As JabberClient = CType(sender, JabberClient)
    'j.Message(TARGET, "Registered: " & iq.BaseURI)
    'done.Set()
End Sub

Private Sub j_OnBeforePresenceOut(ByVal sender As Object, ByVal pres As Presence)
    'Dim j As JabberClient = CType(sender, JabberClient)
    'j.Message(TARGET, "Registered: " & iq.BaseURI)
    'done.Set()
End Sub

Private Sub j_OnPresence(ByVal sender As Object, ByVal pres As Presence)
    'Dim j As JabberClient = CType(sender, JabberClient)
    'j.Message(TARGET, "Presence: " & pres.BaseURI)
    'done.Set()
End Sub

Private Sub j_OnAuthenticate(ByVal sender As Object)
    ' Sender is always the JabberClient.
    Dim j As JabberClient = CType(sender, JabberClient)
    j.Message(txt_Reciever.Text.Trim, "Test OnAuthenticate")
    ' Finished sending.  Shut down.
    done.Set()
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:13:45.557

在发送消息之前，您需要等待 OnAuthenticate。

# c++ - 像 `msg(long)` 这样的函数的模棱两可的重载与候选 `msg(int32_t)` 和 `msg(int64_t)`

> ID：10579544
> 
> 赞同：7
> 
> 时间：2012-05-14T08:07:00.930
> 
> 标签：c++, gcc

**注意：这与**[在编译时确定整数类型的位数](https://stackoverflow.com/questions/10578359/determine-number-of-bits-in-integral-type-at-compile-time)非常相似，但是这是一个非常简化的版本，所有内容都包含在单个`.cpp`

**编辑**：添加了一个解决方案-尽管给出了正确的*解释*（并被接受），但我找到了一种解决问题的方法。

# 问题

问题出在功能上

```
 msg(int32_t);
 msg(int64_t); 
```

像这样的电话

```
long long myLong = 6;
msg(myLong);    // Won't compile on gcc (4.6.3), call is ambiguous 
```

这在 MSVC 上编译。任何人都可以解释为什么这在 gcc 上失败（我假设这可能与 gcc 通常严格符合标准的事实有关）以及如何正确实现相同效果的示例？

```
#include <iostream>
#include <stdint.h>

#include <boost/integer.hpp>

using namespace std;

void msg(int v) { cout << "int: " << sizeof(int) << ' ' << v << '\n'; }
void msg(long v) { cout << "long: " << sizeof(long) << ' ' << v << '\n'; }
void msg(long long v) { cout << "long long: " << sizeof(long long) << ' ' << v << '\n'; }

void msg2(int32_t v) { cout << "int32_t: " << sizeof(int32_t) << ' ' << v << '\n'; }
void msg2(int64_t v) { cout << "int64_t: " << sizeof(int64_t) << ' ' << v << '\n'; }
void msg2(uint32_t v) { cout << "uint32_t: " << sizeof(uint32_t) << ' ' << v << '\n'; }
void msg2(uint64_t v) { cout << "uint64_t: " << sizeof(uint64_t) << ' ' << v << '\n'; }

int main()
{

    int myInt = -5;
    long myLong = -6L;
    long long myLongLong = -7LL;

    unsigned int myUInt = 5;
    unsigned int myULong = 6L;
    unsigned long long myULongLong = 7LL;

    msg(myInt);
    msg(myLong);
    msg(myLongLong);

    msg2(myInt);
    msg2(myLong);     // fails on gcc 4.6.3 (32 bit)
    msg2(myLongLong);

    msg2(myUInt);
    msg2(myULong);   // fails on gcc 4.6.3 (32 bit)
    msg2(myULongLong);

   return 0;
}

// Output from MSVC  (and gcc if you omit lines that would be commented out)
int: 4 5
long: 4 6
long long: 8 7
int32_t: 4 -5
int32_t: 4 -6   // omitted on gcc
int64_t: 8 -7
uint32_t: 4 5
uint32_t: 4 6   // omitted on gcc
uint64_t: 8 7 
```

# 解决方案

解决方案是提供一个成功映射的函数`int`，`long`并映射`long long`到适当的`int32_t`or `int64_t`。这可以通过`if (sizeof(int)==sizeof(int32_t))`类型语句在运行时轻松完成，但最好使用编译时解决方案。编译时解决方案可通过使用[`boost::enable_if`](http://www.boost.org/doc/libs/1_49_0/libs/utility/enable_if.html).

以下适用于 MSVC10 和 gcc 4.6.3。通过禁用非整数类型可以进一步增强解决方案，但这超出了此问题的范围。

```
#include <iostream>
#include <stdint.h>

#include <boost/integer.hpp>
#include <boost/utility/enable_if.hpp>
#include <boost/type_traits/is_signed.hpp>
#include <boost/type_traits/is_unsigned.hpp>

using namespace std;

template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(int32_t) && boost::is_signed<InputT>::value,
 int32_t>::type ConvertIntegral(InputT z) { return static_cast<int32_t>(z); }

template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(int64_t) && boost::is_signed<InputT>::value, 
int64_t>::type ConvertIntegral(InputT z) { return static_cast<int64_t>(z); }

template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(uint32_t) && boost::is_unsigned<InputT>::value, 
uint32_t>::type ConvertIntegral(InputT z) { return static_cast<uint32_t>(z); }

template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(uint64_t) && boost::is_unsigned<InputT>::value, 
uint64_t>::type ConvertIntegral(InputT z) { return static_cast<uint64_t>(z); }

void msg(int v) { cout << "int: " << sizeof(int) << ' ' << v << '\n'; }
void msg(long v) { cout << "long: " << sizeof(long) << ' ' << v << '\n'; }
void msg(long long v) { cout << "long long: " << sizeof(long long) << ' ' << v << '\n'; }

void msg2(int32_t v) { cout << "int32_t: " << sizeof(int32_t) << ' ' << v << '\n'; }
void msg2(int64_t v) { cout << "int64_t: " << sizeof(int64_t) << ' ' << v << '\n'; }
void msg2(uint32_t v) { cout << "uint32_t: " << sizeof(uint32_t) << ' ' << v << '\n'; }
void msg2(uint64_t v) { cout << "uint64_t: " << sizeof(uint64_t) << ' ' << v << '\n'; }

int main()
{

    int myInt = -5;
    long myLong = -6L;
    long long myLongLong = -7LL;

    unsigned int myUInt = 5;
    unsigned int myULong = 6L;
    unsigned long long myULongLong = 7LL;

    msg(myInt);
    msg(myLong);
    msg(myLongLong);

    msg2(ConvertIntegral(myInt));
    msg2(ConvertIntegral(myLong));
    msg2(ConvertIntegral(myLongLong));

    msg2(ConvertIntegral(myUInt));
    msg2(ConvertIntegral(myULong));
    msg2(ConvertIntegral(myULongLong));

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:16:11.090

代码是否编译由实现定义。没有类型`int32_t`也没有`int64_t`；这些只是现有整数类型的 typedef。如果该类型恰好是已经重载的类型（`int`或`long`）`long long`，几乎可以肯定是这种情况，那么您对同一个函数有多个定义。如果它们在同一个翻译单元中，则为编译时错误，需要进行诊断。如果它们在不同的翻译单元中，这是未定义的行为，但我想大多数实现也会产生错误。

在您的情况下，最好的解决方案可能是制作`msg`一个模板，并将类型的名称作为参数传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T09:42:53.283

格雷格一针见血：`int32_t`并且`int64_t`是 typedef，可能是也可能不是`long`. 如果两者都不是 typedef `long`，则重载决议可能会失败。两者`long->int32_t`都有`long->int64_t`Rank=Promotion (表 12, 13.3.3.1.2)

# android - DialogFragment : 使用带有自定义布局的 AlertDialog

> ID：10579545
> 
> 赞同：24
> 
> 时间：2012-05-14T08:07:02.820
> 
> 标签：android, android-fragments, android-alertdialog

我在`Fragments API`支持下重写我的应用程序。在原始应用程序中，我有一个`AlertDialog`这样创建的：

```
 LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.button_dialog, null);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setView(view);
    ListView mListView = (ListView) view.findViewById(R.id.mblist);
    builder.setTitle(getString(R.string.sysinfo)).setNeutralButton(
            getString(R.string.okay), null);
    Cursor dcursor = propManager.propCursor();
    if (dcursor.moveToFirst()) {
        startManagingCursor(dcursor);
        String[] from = { Constants.NAME_DET,
                Constants.VALUE_DET };
        int[] to = { R.id.mbname, R.id.mbvalue };
        SimpleCursorAdapter dadapter = new SimpleCursorAdapter(this,
                R.layout.info_list_row, dcursor, from, to);
        mListView.setAdapter(dadapter);
    }
    final Dialog dialog = builder.create();
    dialog.show(); 
```

如何通过 DialogFragment 显示相同的对话框？我已阅读文档，但无法弄清楚如何进行此操作。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-14T14:19:36.140

我很惊讶没有人回答。这是解决方案：

```
public class PropDialogFragment extends DialogFragment {

    private PropDialogFragment() { /*empty*/ } 

    /** creates a new instance of PropDialogFragment */
    public static PropDialogFragment newInstance() {
        return new PropDialogFragment();
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        //getting proper access to LayoutInflater is the trick. getLayoutInflater is a                   //Function
        LayoutInflater inflater = getActivity().getLayoutInflater();

        View view = inflater.inflate(R.layout.my_dialog, null);
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setView(view);
        builder.setTitle(getActivity().getString(R.string.sysinfo)).setNeutralButton(
                getActivity().getString(R.string.okay), null);
        return builder.create();
    }
} 
```

您可以使用以下方式显示对话框：

```
private void showDialog() {
    // DialogFragment.show() will take care of adding the fragment
    // in a transaction.  We also want to remove any currently showing
    // dialog, so make our own transaction and take care of that here.
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    Fragment prev = getSupportFragmentManager().findFragmentByTag("dialog");
    if (prev != null) {
        ft.remove(prev);
    }
    ft.addToBackStack(null);

    // Create and show the dialog.
    DialogFragment newFragment = PropDialogFragment.newInstance();
    newFragment.show(ft, "dialog");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:30:07.260

基本上你可以像这样展示你的片段：

```
SherlockDialogFragment newFragment = new TimePickerFragment();
newFragment.show(getActivity().getSupportFragmentManager(), "timePicker"); 
```

这将是一个简单的 TimePickerFragment：

```
public class TimePickerFragment extends SherlockDialogFragment implements TimePickerDialog.OnTimeSetListener{

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        final Calendar c = Calendar.getInstance();
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        return new TimePickerDialog(getActivity(), this, hour, minute, DateFormat.is24HourFormat(getActivity()));
}
} 
```

# css - 单击时链接颜色应保持不变，直到单击菜单中的另一个链接并再次恢复其颜色

> ID：10579550
> 
> 赞同：0
> 
> 时间：2012-05-14T08:07:19.170
> 
> 标签：css

我想制作菜单，这样当我单击菜单项时，活动菜单项文本颜色应保持与悬停效果相同...我使用了 a:active 但它仅在页面/内容打开之前有效...一旦页面获取打开它的效果就消失了..我该怎么办..??

假设我将“黑色”颜色作为菜单项文本颜色的默认颜色，它的颜色在悬停时变为“白色”，在加载内容时再次变为“黑色”。它应该保持“白色”，直到我点击另一个菜单项即“活动”菜单项应保持其颜色。（所有菜单项都应如此）。我需要做什么才能达到这个效果？

我是 javascript 和 jquery 的新手....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:45:02.753

如果在您单击时页面重新加载，那么您需要以某种方式在后端代码中将类名（例如“selected”）添加到所选元素。然后将与 :hover 相同的 CSS 规则应用于该元素。

否则，如果您不刷新页面，而是依靠 jQuery 来维持“选定”类型的状态，请执行以下操作：

HTML：

```
<ul id="menu">
     <li>Item 1</li>
     <li>Item 2</li>
     <li>Item 3</li>
</ul> 
```

jQuery：

```
$('#menu li').click(function(){
    $('#menu li').removeClass('selected'); // remove selected from any other item first
    (this).addClass('selected'); //add selected to the one just clicked.
}); 
```

CSS

```
#menu li{color:black;background:white;}    
#menu li:hover, #menu li.selected{     
    color:white;background:black;    
    /* CSS properties here will be applied to both hovered */    
    /* and last-clicked item*/     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:29:42.147

你应该使用类序列

1-a：链接

2-a：已访问

3-a：悬停

4-a：主动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T18:20:36.990

感谢浮士德的帮助，您的解决方案确实对我有用。不过，快速编辑一下，我认为“（this）”前面需要有一个“$”符号，或者至少这对我有用。所以：

```
$('#menu li').click(function(){
    $('#menu li').removeClass('selected'); // remove selected from any other item first
    $(this).addClass('selected'); //add selected to the one just clicked.
}); 
```

# c# - Metro 类库，FileInfo 替换？

> ID：10579552
> 
> 赞同：3
> 
> 时间：2012-05-14T08:07:28.770
> 
> 标签：c#, io, windows-runtime

在我们从 Java 移植到 C# 的组件之一中，我们将其用作 Java类[`FileInfo`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)的等价物。[`File`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)

现在我们正在努力使 Metro 应用程序可以使用该类库，显然我们必须通过认证。

`FileInfo`.NET Framework 4.5 核心配置文件中有什么好的替代品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:10:59.603

The [StorageFile Class](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.aspx) in the [Windows.Storage Namespace](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.aspx).

> **StorageFile class**
> 
> Represents a file. Provides information about the file and its content, and ways to manipulate them.

*Example:*

```
var file = await StorageFile.GetFileFromPathAsync(path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T07:08:36.117

为了同时针对win8平台和silverlight。在您的情况下，这适用于 Metro 应用程序和非 Metro 应用程序，只需创建一个共享文件项目并输入 #if 条件即可。以便它针对两个平台。查看以下链接以创建相同的

[http://www.dotnetjalps.com/2015/02/shared-project-visual-studio-2015.html](http://www.dotnetjalps.com/2015/02/shared-project-visual-studio-2015.html)

# c# - 如何指定连接字符串以打开本地数据库？

> ID：10579556
> 
> 赞同：0
> 
> 时间：2012-05-14T08:07:51.670
> 
> 标签：c#, .net, sql, ms-access, oledb

我想从数据库中获取所有表名，但是**GetOleDbSchemaTable**方法执行时间过长，大约从 2 分钟到 10 分钟。但是，当我拔下网线时，它会立即执行。

如何正确指定连接以避免使用某些网络资源（*我认为它必须有帮助*）？

```
OleDbConnection connection = new OleDbConnection();
connection.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=F:\\TEST\\db\\STAT.MDB;";
  connection.Open();

DataTable dt = connection.GetOleDbSchemaTable(System.Data.OleDb.OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" } );

foreach ( DataRow row in dt.Rows )
{
    Console.WriteLine( row[2].ToString() );
} 
```

# javascript - 使用 text-align: center 时如何调整图像大小并保持图像坐标？

> ID：10579560
> 
> 赞同：0
> 
> 时间：2012-05-14T08:07:58.410
> 
> 标签：javascript, jquery, imagemapster

我正在使用[ImageMapster](http://www.outsharked.com/imagemapster/)调整图像大小并将“图像映射”坐标更改为新大小。我正在调整大小的图像用作背景图像，因此位于屏幕中间：

CSS：

```
#block_content 
{    
    text-align:center;    
} 
```

block_content 是图像的容器 div。

我正在使用此示例中的代码：http: [//jsfiddle.net/JpgYm/8/](http://jsfiddle.net/JpgYm/8/)

问题是，当我使用 时`text-align: center`，坐标没有正确映射到图像。它们与图像水平在同一条线上，但稍微偏左一点。

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T23:40:52.337

这是一个错误。它应该在当前版本中修复。

[https://github.com/jamietre/ImageMapster](https://github.com/jamietre/ImageMapster)

# highcharts - Highchart/stock 缩放时返回不同的对象

> ID：10579570
> 
> 赞同：0
> 
> 时间：2012-05-14T08:08:31.557
> 
> 标签：highcharts, highstock

在 highstocks 工具提示中，我需要显示特定点的数据。

我就是这样做的：

```
tooltip: {
            formatter: function() {
                var s = '<b>'+ Highcharts.dateFormat('%A, %b %e, %Y', this.x) +'</b>';
                s += '<br/>Time: '+ Highcharts.dateFormat('%H:%mu', this.x);

                if(this.point)
                {
                    s += "<br/>this is a flag on " + new Date(this.point.x).toDateString();
                }
                else
                {
                    s += '<br/>Price: '+ this.points[0].y +' EUR';
                    s += '<br/>Ask: '+ this.points[0].point.ask +' EUR';
                    s += '<br/>Bid: '+ this.points[0].point.bid +' EUR';
                    console.log(this.points[0].point);
                }

                return s;
            }

        }, 
```

当悬停在某个点上时，我会获得有关该特定点的更多信息。

```
s += '<br/>Price: '+ this.points[0].y +' EUR';
s += '<br/>Ask: '+ this.points[0].point.ask +' EUR';
s += '<br/>Bid: '+ this.points[0].point.bid +' EUR'; 
```

如果我的缩放（范围选择器）设置为 YTD 或更低，这会很好。

奇怪的是，当我将缩放设置为 1y 或全部时，`this.points[0].point.`它消失了。我找不到我设置的要价和出价值。

我希望我的解释清楚。

问题解决了：

```
dataGrouping : {
    enabled: false
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T14:10:29.163

我觉得有责任回答这个问题，因为我忽略了几个小时试图找到类似问题的解决方案，即使它在问题中作为编辑得到了回答。所以这里有一个解决方案：

```
series: [{
     name: 'USD to EUR',
     data: newusdeur,
     dataGrouping : {
          enabled: false
     }
}] 
```

选择：

```
plotOptions: {
    series: {
        dataGrouping : {
            enabled: false
        }
    }
} 
```

[jsfiddle](http://jsfiddle.net/X9275/2/)

[API 参考](http://api.highcharts.com/highstock#plotOptions.spline.dataGrouping)

# playframework - 为 Play 添加环境变量！框架

> ID：10579575
> 
> 赞同：1
> 
> 时间：2012-05-14T08:08:42.913
> 
> 标签：playframework

> **可能重复：**
> [安装播放框架](https://stackoverflow.com/questions/10573654/installing-play-framework)

我正在尝试安装 Play！Windows 7 上的框架。当我`play help`在命令行键入时，我收到消息

> 'play' 不是内部或外部命令、可运行程序或批处理文件。

它仅在我位于播放目录的路径中时运行。[我添加了一个系统环境变量，如此处](https://lh5.googleusercontent.com/-EzHTs4_DtYo/T7Cz8aALksI/AAAAAAAAAAU/i8Wo0Z8d4LI/s1600/myanv.png)所示。我以前从未使用过环境变量：这应该工作还是我必须做的其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:11:48.920

If you want to call play from anywhere, you should add it to the end of Windows' System variable: Path

The path variable is in the same place you add your system environment variable.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T01:14:38.403

你已经成功了一半。

现在您已经创建了存储 Play 路径的变量，您需要将该变量添加到系统的路径中，以便可以从命令行访问它。

在同一个系统变量列表（新变量所在的位置）中，找到“路径”变量，并添加您为 Play 框架位置创建的变量名称，并用 % 括起来。

例如，如果您的新变量名为 Plat（如您的屏幕截图所示），那么您将编辑您的 Path 变量，使其看起来像这样：

```
[previous path element];%Plat% 
```

请记住，分号分隔路径中的变量，因此如果您需要添加其他变量，请务必在变量的两端使用分号。

仅供参考，您也可以跳过已经完成的步骤（创建新的环境变量），只需将安装 Play 的路径直接添加到路径中：

```
[previous path element];C:\webapp\Play 
```

两种实现都将达到相同的结果；首先创建一个变量只是简化了路径在其他变量中的重用。

# javascript - 是否有支持递归之类的javascript模板引擎？

> ID：10579576
> 
> 赞同：3
> 
> 时间：2012-05-14T08:08:47.953
> 
> 标签：javascript, templates, recursion

我能想到的最明显的例子是输出嵌套评论。假设您有一个评论树，并且您想使用您的模板将其输出为嵌套的 html（比如说列表中的列表或 div 中的 div）。

“评论”块/函数/标签/助手/任何东西都必须能够以某种方式为评论的孩子调用自己。

是否有模板引擎可以在一个模板文件中支持这种事情？

我知道您可以预先计算每条评论的“缩进”或“深度级别”，并以正确的顺序将它们作为一个平面列表发送到模板，但我们只是说我不想要那个。假设我不想在代码中/模板之外将片段拼接在一起——我希望整个页面都包含在一个模板或主题文件中。

* * *

**更新**：我想生成嵌套的 html。我希望评论*是*嵌套的，而不是*嵌套*的。我知道如何使用 CSS 缩进。:) 无论是在浏览器还是在服务器上完成都无关紧要，因为关键是我希望模板在一个文件中自包含。

如：

```
var html = render(template, {comments: aTreeOfNestedComments}); 
```

（看到了吗？可能是node.js，一个浏览器插件，一些“jQuery”，因为现在有些人喜欢称之为javascript......）看起来jade可以使用mixins来做到这一点。任何可以做类似事情的基于标签的模板引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T15:52:55.067

模板引擎可以解决通用的、普通的问题。虽然嵌套模板似乎是一个常见的用例，但我还没有遇到很多可以做到这一点的模板引擎。

由于市场没有提供好的解决方案，我正在从知道如何呈现自己的 JavaScript 对象构建我的应用程序。我从不使用模板；每个块都获得对 DOM 的引用（就像应该附加自身的父元素一样），或者渲染器返回子容器，父元素可以将其添加到合适的位置。

这让我可以使用 JS 的全部功能而不受模板引擎的限制。

**[编辑]**这是一种解决方法：如果您需要递归元素，请添加一个`span`（如果递归元素应该是内联的）或`div`（如果它是一个块元素）。给它类`recursiveTemplate`和[数据属性](http://ejohn.org/blog/html-5-data-attributes/) `data-template-name="..."`

使用标准模板引擎运行模板。之后，使用 jQuery 之类的找到所有具有该类的元素`recursiveTemplate`并自己替换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:18:02.380

[远端模板](http://code.google.com/p/distal/)在这里有一个嵌套树的示例：

[http://code.google.com/p/distal/wiki/UseCaseExamples#Building_a_nested_tree](http://code.google.com/p/distal/wiki/UseCaseExamples#Building_a_nested_tree)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T08:13:19.017

正如@TJHeuvel 所说，您可以使用服务器端脚本来生成所需的输出，这将是满足您要求的最佳方式。但是，如果您必须使用 JavaScript，我建议您使用 jQuery，这也可以让您产生所需的结果。

例如：

```
$("ul li").css("margin-left", "10px"); 
```

# yii - Yii 更新加入

> ID：10579587
> 
> 赞同：0
> 
> 时间：2012-05-14T08:09:25.517
> 
> 标签：yii

我有一个代码

```
$command = Yii::app()->db->createCommand()
        ->update(
            'queue q',
            array('i.status_id' => $status_id)
        )
        ->join('item i', 'q.item_id = i.item_id')
        ->where('IN', 'queue_id', $ids); 
```

在我调用 $command->buildQuery() 后，我收到一个错误：

> CDbCommand 执行 SQL 语句失败：参数号无效：未定义参数。执行的 SQL 语句是： UPDATE `queue q`SET `i`。`status_id`=:i.status_id

印象是它没有看到 join 和 where 命令。什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T11:21:41.450

您的代码在最新的 Yii 版本中有效。自 1.1.14 起已添加此 MySQL 特定功能：[https](https://github.com/yiisoft/yii/commit/ed49b77ca059c0895be17df5813ee1e83d4c916d) ://github.com/yiisoft/yii/commit/ed49b77ca059c0895be17df5813ee1e83d4c916d 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:51:40.103

您必须绑定参数：

```
$command = Yii::app()->db->createCommand()
    ->update(
        'queue q',
        array('i.status_id' => ':status_id'),
        array('in', 'queue_id', $ids),
        array(':status_id' => $status_id),
    )
    ->join('item i', 'q.item_id = i.item_id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:15:36.520

where 子句应该像这样在 update() 函数中

```
 Yii::app()->db->createCommand()
        ->update(
            'queue q',
            array('i.status_id' => $status_id),array('in', 'queue_id', $ids)
        ); 
```

关于 JOIN 部分，在[https://github.com/yiisoft/yii/issues/124](https://github.com/yiisoft/yii/issues/124)有一个开放的错误（我不确定。如果我错了，请纠正我）。请让我知道是否有解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T11:35:03.083

在我的项目中遇到过几次这个问题后，我想出了以下使用 CDbCriteria 的 Yii 解决方法，这有点 hacky，但提供了参数计数匹配的安全性。

当应用于您的示例时，我的代码将是（猜测您的结构）：

```
$ids = array(1,2,3,4,5);
$criteria = new CDbCriteria();
$criteria->addInCondition('i.queue_id',$ids);

$sql = '
  UPDATE queue q
    JOIN item i 
      ON q.item_id = i.item_id
     SET i.status_id = :status
   WHERE '.$criteria->condition;

$command = Yii::app()->db->createCommand($sql);
$command->bindValue('status',$status);
$command->bindValues($criteria->params);
$rows = $command->execute(); 
```

# ios - Keep NSTimer running when app is in background

> ID：10579597
> 
> 赞同：2
> 
> 时间：2012-05-14T08:10:37.267
> 
> 标签：ios, nstimer, multitasking, nsthread

I hope there's an expert out there who can help me with this:

I googled it for hours, but could not find any information if there is any way to keep a running NSTimer active when the app is running in the background ?

The problem scenario is I need to set a countdown timer on button click. Time left is shown (02:34:45) as title of button. how do my timer is keep on running when application enters into background or it is suspended . Please help me how i can maintain the time left for alarm, what are the values selected for alarm ( like 2 hours , 3 minutes )

Thanks for any help!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:58:59.780

如果您将其用于警报，最好的办法是使用本地通知。这样您就不需要使用任何后台处理模式。

当您的应用程序即将进入后台（在您的应用程序委托中`applicationWillResignActive`或`applicationDidEnterBackground`在您的应用程序委托中）时，获取您的计时器剩余的时间。然后在未来安排一个本地通知：

```
NSTimeInterval timeUntilNotification = ...

UILocalNotification *localNotif = [[UILocalNotification alloc] init];
localNotif.fireDate = [[NSDate date] dateByAddingTimeInterval:secondsUntilNotification];
localNotif.soundName = UILocalNotificationDefaultSoundName;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; 
```

当您的应用再次激活时，请务必使用 取消所有通知`cancelAllLocalNotifications`。

# php - 如何在java脚本文件中添加PHP标签

> ID：10579598
> 
> 赞同：1
> 
> 时间：2012-05-14T08:10:38.957
> 
> 标签：php, javascript

我在 /js 目录中有一组 JavaScript 文件。如何将 PHP 标签添加到 Javascript 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:12:52.980

与将它们添加到任何其他文本文件的方式完全相同。在文本编辑器中打开它们并开始输入`<?php etc`.

您需要确保使用 PHP 来处理文件。在大多数系统上，通过将它们重命名为具有`.php`文件扩展名，最容易做到这一点。您还可以更改网络服务器的配置。

如果它们要发出 JavaScript，那么您应该确保它们声称是 JavaScript，而不是 HTML（PHP 的默认设置）。

```
<?php
    header("Content-Type: application/javascript");
?> 
```

JavaScript 文件通常带有鼓励大量缓存的缓存控制标头发送。如果您向它们添加动态内容，那么请准备好失去缓存的好处。如果合适，请使用 PHP 将[合适的缓存控制标头](http://www.mnot.net/cache_docs/)与 JS 一起发送。

您可能希望考虑将您的逻辑保存在静态 JavaScript 文件中，并使用 PHP 将一些动态数据`<script>`直接注入到 HTML 文档中的元素中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T08:16:49.233

在您的 htaccess 文件中放置：

如果服务器安装了 php5，请使用：

```
AddHandler application/x-httpd-php5 .js 
```

如果服务器安装了 php4，请使用：

```
AddHandler application/x-httpd-php4 .js 
```

如果要解析单个文件，可以按照 .htaccess 中的以下代码进行操作。

```
<FilesMatch “testfilename.js”&gt;
AddHandler application/x-httpd-php5 .js
</FilesMatch> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T08:27:22.970

您只需将 .php 扩展名添加到 javascript 文件即可，您可能需要设置标头以便浏览器将文件识别为 javascript 文件。你甚至可以传递变量和一切。前任。

索引.html

```
<html>
<head>
  <script src="js/jquery.min.js"></script>
  <script src="js/somefile.js.php?var=hiAgain"></script>
.... 
```

js/somefile.js.php

```
<?PHP header("Content-type: application/x-javascript"); ?>
$(document).ready(function(){
    alert("<?PHP echo "Hello from PHP. var:".$GET_['var']; ?>");
}) 
```

希望这就是你要找的。

# excel - Macro needs to check 5 cells in row

> ID：10579600
> 
> 赞同：0
> 
> 时间：2012-05-14T08:10:49.160
> 
> 标签：excel, vba

Does anyone knows idea of my below problem in VBA excel

Macro needs to check 5 cells(Continues) in a 1 row.. Totally more than 500 rows are there ..if anyone cell color in a row has color “red” means it has to mention “new” in some column ..

Any idea or solution.. ??

i use the below code , to check any cell in single(or selected) column has red ...

Does anyone knows idea of my below problem in VBA excel

Macro needs to check 5 cells(Continues) in a 1 row.. Totally more than 500 rows are there ..if anyone cell color in a row has color “red” means it has to mention “new” in some column ..

Any idea or solution.. ??

i use the below code for to check any cell in single has red ...

```
Sub test()

    Dim erange as range

    for each erange in selection

        if erange.interior.color = red then
            Erange.offset(0,1)="New"
        end if 

    next erange

end if 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:58:18.673

我计划把它作为评论，但是这永远不适合在那里。

> > > 有谁知道我在 VBA excel 中的以下问题的想法

您的代码中有两个主要错误。

首先，`Red`不会评估为 Excel 中的有效颜色。

将该行更改为

```
 if erange.interior.color = vbRed then 
```

或者

```
 If erange.Interior.ColorIndex = 3 Then 
```

其次，您缺少一个`End Sub`. 将最后`end if`一个替换为`End Sub`

现在到你的主要问题。上面的代码不会帮助您检查 5 个连续的单元格是否有`Red`颜色。一种方法是使用此逻辑

循环遍历您的范围并设置`erange`为由 5 个单元格组成例如，如果您的范围是 A1:C10，那么在您的循环中，您的第一个范围将是 A1:A5，然后是 A2:A6，然后是 A3:A7，依此类推......一旦你有你的范围然后你检查范围中的每个单元格是否都有红色。希望这能给你一个开始。

# ios - how can i pass any kind of parameter in UiButton action?

> ID：10579603
> 
> 赞同：5
> 
> 时间：2012-05-14T08:11:04.210
> 
> 标签：ios, iphone, uibutton

I want to pass a url through button action, because i have 10 buttons which are created through code dynamically and on clicking then there a specific url are assign for each corresponding button. Here is my code

```
NSString *linkUrl = [NSString stringWithFormat:@"%@",[AllrecordG objectForKey:@"Link"]];
[leftLabelG addTarget:self action:@selector(clickMe:linkUrl:) forControlEvents:UIControlEventTouchUpInside];

-(void)clickMe:(UIButton *)sender{
} 
```

But here I get warning as "unused variable linkUrl".

I have studied different articles but somebody told that it is not possible to pass argument linke that. Anybody can tell me that how can i pass url for each button action and also how I retrieve those values. in the clickMe definition.

Thanks in advance.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T08:13:44.693

子类 UIButton 像这样：

**我的按钮.h**

```
@interface MyButton : UIButton
{
     NSString *_linkUrl;
}

@property (nonatomic, retain) NSString *linkUrl 
```

**我的按钮.m**

```
@implementation MyButton
@synthesize linkUrl = _linkUrl 
```

通过 linkUrl ：

```
NSString *linkUrl = [NSString stringWithFormat:@"%@",[AllrecordG objectForKey:@"Link"]];
[leftLabelG addTarget:self action:@selector(clickMe:) forControlEvents:UIControlEventTouchUpInside];
[leftLabelG setLinkUrl:linkUrl]; 
```

现在您可以像这样在您的操作中获取 linkUrl：

```
-(void)clickMe:(MyButton *)sender{
      NSString *url = sender.linkUrl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T08:26:10.930

将您的链接网址放在 NSArray 中；

```
NSArray *linkUrls = [NSArray arratWithObjects:@"link",@"blah",@"blah"........,nil]; 
```

然后为您的按钮设置一个标签作为数组中的索引，然后

```
leftLabelG.tag = 1;
rightLabelG.tag = 2;

-(void)clickMe:(UIButton *)sender{
      NSString *url = [linkUrls objectAtIndex:sender.tag];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-10T16:18:56.843

使用类别

```
- (void)addTarget:(id)target action:(SEL)action withObject:(id)object forControlEvents:(UIControlEvents)controlEvents;

-(void)addTarget:(id)target action:(SEL)action withObject:(id)object1 withObject:(id)object2 forControlEvents:(UIControlEvents)controlEvents {
SEL action_ = [self generateAction:action withObject:object1 withObject:object2];
IMP impl = imp_implementationWithBlock(^(id self_) {
    objc_msgSend(self_, action, self, [object1 copy], [object2 copy]);
});
class_replaceMethod([target class], action_, impl, "v@:@");

[self addTarget:target action:action_ forControlEvents:controlEvents]; 
```

}

# python - How to connect the current user and the user of a web application using htpasswd in python?

> ID：10579607
> 
> 赞同：0
> 
> 时间：2012-05-14T08:11:22.090
> 
> 标签：python

I have a python script which is using htpasswd authentication. I wish to modify the script depending on the user who has logged in currently. This application is web-enabled. eg.

```
if current_username = 'ABC':
   m = 2 
elif current_username = 'PQE':   
   m = 4
else:      
   m = 6 
```

Any of the user can log in any time / simultaneously. Want the simplest and most efficient solution. Can anybody help? **How do I know which of the user has logged in at any point of time? import getpass getpass.getuser() in the script** ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:15:25.897

如果您要检索特定用户名的值，可以使用字典来存储用户名和值之间的映射。例如，您上面的代码可以重写：

```
username_mapping = {"ABC": 2, "PQE": 4}
# The second argument to get will be returned if the key could not be found
# in the dictionary
m = username_mapping.get(current_username, 6) 
```

对于更大的系统，您可能希望研究分布式键值存储（redis 将是一个不错的起点）。

# hibernate - Java EE 6 + Hibernate 延迟加载异常

> ID：10579608
> 
> 赞同：1
> 
> 时间：2012-05-14T08:11:24.830
> 
> 标签：hibernate, jakarta-ee, jpa, ejb

这是我卡住的地方：

> javax.servlet.ServletException：org.hibernate.LazyInitializationException：未能延迟初始化角色集合：it.trew.model.TipoCaratteristica.traduzioni，没有会话或会话已关闭

我的一些实体代码：

```
@Entity
@Table(name = "tipi_caratteristiche")
public class TipoCaratteristica implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;

    private String nome;

    @OneToMany(cascade = CascadeType.ALL)
    @JoinTable(
        name = "tipi_caratteristiche_traduzioni", 
        joinColumns = { @JoinColumn(name = "tipo_caratteristica_id") }, 
        inverseJoinColumns = { @JoinColumn(name = "traduzione_id") }
    )
    private List<Traduzione> traduzioni = new ArrayList<Traduzione>(); 
```

“Traduzione”是一个简单的普通实体，具有一对字符串属性。

我有一个“编辑”jsf 页面，它通过 id 加载“TipoCaratteristica”并尝试在标签中显示其列表。

我使用 ejb-facade 方法来获取已编辑的对象：

```
public T find(Object id) {
        return getEntityManager().find(entityClass, id);
    } 
```

然后，在 jsf 支持 bean 中：

```
TipoCaratteristica tc = ejbFacade.find(Long.valueOf(value)); 
```

我读了一些关于那个例外的东西。实际上，在“traduzioni”集合上设置获取类型 EAGER 可以修复它，但我不想这样做。我读过关于在事务中完成所有操作，或使用 Hibernate.initialize() 但不知道如何做到这一点。

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:38:53.717

```
@Override
public TipoCaratteristica find(Object id) {
    TipoCaratteristica result = super.find(id);
    Hibernate.initialize(result.getTraduzioni());
    return result;
} 
```

或者不使用`em.find()`，而是使用将加载所有内容的查询是单个查询：

```
select distinct tc from TipoCaratteristica 
left join fetch tc.traduzioni
where tc.id = :id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T21:17:14.847

`PersistentContext.EXTENDED`您可以使用实体管理器中的属性来解决此问题。

例子：

```
@PersistentContext(type=PersistentContext.EXTENDED)
private EntityManager em; 
```

或在较新的版本中：

```
@PersistentContext(type=PersistentContextType.EXTENDED)
private EntityManager em; 
```

发生此错误是因为对于每个事务，实体管理器事务都关闭，此属性避免了这种情况并允许实体管理器保持可用。您可以阅读 Dan Allen 的 Seam in Action 一书了解更多详细信息，他详细解释了这个问题。

# jquery - Jquery在悬停时显示和隐藏

> ID：10579618
> 
> 赞同：0
> 
> 时间：2012-05-14T08:12:03.190
> 
> 标签：jquery

我想在将鼠标悬停在图像上时显示一个 div 我找到了一个我关注的演示，但它是一个切换悬停我只想在鼠标悬停一次时显示 div 并在鼠标离开时再次隐藏我不知道我需要什么更改代码以像我希望的那样工作，我是 jquery 的新手

```
 $(document).ready(function () {

        $(".slidingDiv").hide();
        $(".show_hide").show();

        $('.show_hide').hover(function () {
            $(".slidingDiv").slideToggle();
        });

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:17:15.300

改变：

```
$('.show_hide').hover(function () {
    $(".slidingDiv").slideToggle();
}); 
```

到：

```
$('.show_hide').hover(function () {
    $(".slidingDiv").slideDown();
}, function(){
    $(".slidingDiv").slideUp();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:16:09.080

$.hover 函数接受第二个回调，在鼠标离开时调用，所以你只需要再次切换元素：

```
$(document).ready(function () {

    $(".slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').hover(function () {
        $(".slidingDiv").slideDown();
    }, function () {
        $(".slidingDiv").slideUp();
    }
    );

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:16:49.030

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#slidingDiv").hide();
            $("#show_hide").show();
            $('#show_hide').hover(function () {
                $("#slidingDiv").slideDown();
            }, function () {
                $("#slidingDiv").slideUp();
            });
        });
    </script>
</head>
<body>
    <a id="show_hide">Show / Hide</a>
    <div id="slidingDiv">
        Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test
        Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test
        Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test
        Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test
        Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test
        Test Test Test Test Test Test Test Test Test Test Test
    </div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:17:35.583

您可以使用 mouseEnter 和 mouseLeave 来执行此操作

```
$('#ImgToHover').mouseEnter(function(){
 // Action to perform to add hover
});

$('#ImgToHover').mouseLeave(function(){
 // Action to perform to remove hover
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T08:19:14.693

```
$(document).ready(function () {
    $("#div").mouseout(function(){
        $("#div").hide();
    }).mouseover(function(){
        $("#div").show();
    });
}); 
```

记录在这里：[http ://api.jquery.com/mouseout/](http://api.jquery.com/mouseout/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-10T13:16:24.157

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0  /jquery.min.js"></script>

<script type="text/javascript">

$(document).ready(

function()

{

$("#b1").click(function(){

$("p").hide();

})

$("#b2").click(function(){

$("p").show();

})

$("#fade").click(function()

{

$("p").fadeOut(2000);

})

$("#fade1").click(function()

{

$("p").fadeIn(5000);

})

});

</script>

</head>

<body>

<p>If you click on me, I will disappear.

If you click on me, I will disappear.

If you click on me, I will disappear.

If you click on me, I will disappear.

If you click on me, I will disappear.

If you click on me, I will disappear.

If you click on me, I will disappear.

If you click on me, I will disappear.

</p>

<input type="button" value="Hide" id="b1"/>

<input type="button" value="Show" id="b2"/>

<input type="button" value="Fade" id="fade"/>

<input type="button" value="Fade" id="fade1"/>

</body>

</html>

Replace Click() with hover(). 
```

# primefaces - Primefaces 3: Component ID and Widget Var should not have the same name

> ID：10579619
> 
> 赞同：2
> 
> 时间：2012-05-14T08:12:08.513
> 
> 标签：primefaces

I am getting confused why IE and Chrome is having trouble rendering my Primefaces 3 UI.

I have basically this use case: I wanted to have an Add New Member button that when user clicks it a dialog will open asking for member details.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>

</h:head>
<h:body>
    <ui:composition template="../../WEB-INF/MyTemplate.xhtml">
        <ui:define name="content">
            <h:form id="memberListForm">
                <p:panel styleClass="search-panel">
                    <h:panelGrid columns="2">
                        <h:outputText value="#{msgs.firstName}" styleClass="label" />
                        <h:inputText />
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <h:outputText value="#{msgs.lastName}" styleClass="label" />
                        <h:inputText />
                    </h:panelGrid>
                    <p:commandButton value="Search" ajax="false" />
                    <p:commandButton value="Add New Member" type="button"
                        onclick="addMemberDialog.show()" />
                </p:panel>

                <p:panel>
                    <p:dataTable value="#{memberManagedBean.memberDataModel}"
                        id="membersTable" var="member" paginator="true" rows="10"
                        selectionMode="single"
                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        rowsPerPageTemplate="5,10,15">
                        <p:column>
                            <f:facet name="header">
                                <h:outputText>#{msgs.firstName}</h:outputText>
                            </f:facet>
                            <h:outputText value="#{member.firstName}" />
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText>Middle Name</h:outputText>
                            </f:facet>
                            <h:outputText value="#{member.middleName}" />
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText>Last Name</h:outputText>
                            </f:facet>
                            <h:outputText value="#{member.lastName}" />
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText>Membership Date</h:outputText>
                            </f:facet>
                            <h:outputText value="#{member.membershipDate}">
                                <f:convertDateTime pattern="MMM dd, yyyy" />
                            </h:outputText>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText>Status</h:outputText>
                            </f:facet>
                            <h:outputText value="#{member.status}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>

            <p:dialog id="addMemberDialog" header="Member Details"
                widgetVar="addMemberDialog" resizable="false" closable="false">
                <h:form id="createupdateform">
                    <p:messages id="messages" autoUpdate="true" />
                    <h:outputText value="Test Dialog!" />
                    <p:panelGrid columns="2" id="panel">
                        <f:facet name="header">
                            Create Member
                        </f:facet>
                        <h:outputLabel value="First Name:" for="firstName" />
                        <p:inputText label="First Name" id="firstName" title="First Name"
                            required="true" value="#{memberManagedBean.newMember.firstName}">
                            <f:validateRegex pattern=".*\p{Alpha}{3,16}" />
                        </p:inputText>
                        <h:outputLabel value="Middle Name:" for="middleName" />
                        <p:inputText label="Middle Name" id="middleName"
                            title="Middle Name" required="true"
                            value="#{memberManagedBean.newMember.middleName}">
                            <f:validateRegex pattern=".*\p{Alpha}{3,16}" />
                        </p:inputText>

                        <h:outputLabel value="Last Name:" for="lastName" />
                        <p:inputText label="Last Name" id="lastName" title="Last Name"
                            required="true" value="#{memberManagedBean.newMember.lastName}">
                            <f:validateRegex pattern=".*\p{Alpha}{3,16}" />
                        </p:inputText>

                        <h:outputLabel value="Membership Date:" for="membershipDate" />
                        <p:calendar id="popupButtonCal" />

                        <f:facet name="footer">
                            <p:commandButton value="Save" 
                                actionListener="#{memberManagedBean.createOrUpdateListener}" />
                            <p:commandButton value="Cancel" immediate="true"
                                process="@this"
                                oncomplete="addMemberDialog.hide()" />
                        </f:facet>
                    </p:panelGrid>
                </h:form>
            </p:dialog>
        </ui:define>
    </ui:composition>
</h:body>
</html> 
```

On firefox, no issue is encountered. Dialogs comes out.

But on Chrome and IE, nothing is happening when I click the button.
IE is also telling that addMemberDialog is undefined.

Another strange thing, only Firefox generates my footer and the complete `</body> and </html>` end tag which is strange. Both IE8 and Chrome seems to have an invalid HTML structure generated.

Does anyone know the reason?

**UPDATED:** This is the generated HTML taken directly from IE. Notice that there are no ending body and html tag.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><link type="text/css" rel="stylesheet" href="/SI/faces/javax.faces.resource/theme.css?ln=primefaces-aristo" /><link type="text/css" rel="stylesheet" href="/SI/faces/javax.faces.resource/common.css?ln=css" /><link type="text/css" rel="stylesheet" href="/SI/faces/javax.faces.resource/primefaces.css?ln=primefaces&amp;v=3.2" /><script type="text/javascript" src="/SI/faces/javax.faces.resource/jquery/jquery.js?ln=primefaces&amp;v=3.2"></script><script type="text/javascript" src="/SI/faces/javax.faces.resource/primefaces.js?ln=primefaces&amp;v=3.2"></script>
    <title>Sample App
    </title></head><body>
    <div id="header">
            <!-- &lt;h1&gt;SI Management System&lt;/h1&gt; -->
            <h2>Testing</h2>
            <!--  include your header file or uncomment the include below and create header.xhtml in this directory -->
            <!-- &lt;ui:include src=&quot;header.xhtml&quot;/&gt; -->
    </div>

    <div id="content">
<form id="memberListForm" name="memberListForm" method="post" action="/SI/faces/pages/members/showmembers.xhtml" enctype="application/x-www-form-urlencoded">
<input type="hidden" name="memberListForm" value="memberListForm" />
<div id="memberListForm:j_idt12" class="ui-panel ui-widget ui-widget-content ui-corner-all search-panel"><div id="memberListForm:j_idt12_content" class="ui-panel-content ui-widget-content"><table>
<tbody>
<tr>
<td><span class="label">First Name:</span></td>
<td><input type="text" name="memberListForm:j_idt15" /></td>
</tr>
</tbody>
</table>
<table>
<tbody>
<tr>
<td><span class="label">Last Name:</span></td>
<td><input type="text" name="memberListForm:j_idt18" /></td>
</tr>
</tbody>
</table>
<button id="memberListForm:j_idt19" name="memberListForm:j_idt19" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" type="submit"><span class="ui-button-text">Search</span></button><script id="memberListForm:j_idt19_s" type="text/javascript">PrimeFaces.cw('CommandButton','widget_memberListForm_j_idt19',{id:'memberListForm:j_idt19'});</script><button id="memberListForm:j_idt20" name="memberListForm:j_idt20" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="addMemberDialog.show();" type="button"><span class="ui-button-text">Add New Member</span></button><script id="memberListForm:j_idt20_s" type="text/javascript">PrimeFaces.cw('CommandButton','widget_memberListForm_j_idt20',{id:'memberListForm:j_idt20'});</script></div></div><script id="memberListForm:j_idt12_s" type="text/javascript">PrimeFaces.cw('Panel','widget_memberListForm_j_idt12',{id:'memberListForm:j_idt12'});</script><div id="memberListForm:membersTable" class="ui-datatable ui-widget"><table role="grid"><thead><tr><th id="memberListForm:membersTable_paginator_top" class="ui-paginator ui-paginator-top ui-widget-header" colspan="5"><span class="ui-paginator-current">(1 of 1)</span> <span class="ui-paginator-first ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-first">p</span></span><span class="ui-paginator-prev ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-prev">p</span></span><span class="ui-paginator-pages"><span class="ui-paginator-page ui-state-default ui-state-active ui-corner-all">1</span></span><span class="ui-paginator-next ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-next">p</span></span><span class="ui-paginator-last ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-end">p</span></span><select class="ui-paginator-rpp-options ui-widget ui-state-default ui-corner-left" value="10"><option value="5">5</option><option value="10" selected="selected">10</option><option value="15">15</option></select></th></tr><tr role="row"><th id="memberListForm:membersTable:j_idt35" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span></span></div></th><th id="memberListForm:membersTable:j_idt24" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span></span></div></th><th id="memberListForm:membersTable:j_idt41" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span></span></div></th><th id="memberListForm:membersTable:j_idt44" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span></span></div></th><th id="memberListForm:membersTable:j_idt47" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span></span></div></th></tr></thead><tfoot><tr><td id="memberListForm:membersTable_paginator_bottom" class="ui-paginator ui-paginator-bottom ui-widget-header" colspan="5"><span class="ui-paginator-current">(1 of 1)</span> <span class="ui-paginator-first ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-first">p</span></span><span class="ui-paginator-prev ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-prev">p</span></span><span class="ui-paginator-pages"><span class="ui-paginator-page ui-state-default ui-state-active ui-corner-all">1</span></span><span class="ui-paginator-next ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-next">p</span></span><span class="ui-paginator-last ui-state-default ui-corner-all ui-state-disabled"><span class="ui-icon ui-icon-seek-end">p</span></span><select class="ui-paginator-rpp-options ui-widget ui-state-default ui-corner-left" value="10"><option value="5">5</option><option value="10" selected="selected">10</option><option value="15">15</option></select></td></tr></tfoot><tbody id="memberListForm:membersTable_data" class="ui-datatable-data ui-widget-content"><tr data-ri="0" data-rk="1" class="ui-widget-content ui-datatable-even" role="row" aria-selected="false"><td role="gridcell"><div class="ui-dt-c">john cesar</div></td><td role="gridcell"><div class="ui-dt-c">jamora</div></td><td role="gridcell"><div class="ui-dt-c">alojado</div></td><td role="gridcell"><div class="ui-dt-c">Dec 31, 2009</div></td><td role="gridcell"><div class="ui-dt-c">A</div></td></tr><tr data-ri="1" data-rk="2" class="ui-widget-content ui-datatable-odd" role="row" aria-selected="false"><td role="gridcell"><div class="ui-dt-c">frank</div></td><td role="gridcell"><div class="ui-dt-c"></div></td><td role="gridcell"><div class="ui-dt-c">nimphius</div></td><td role="gridcell"><div class="ui-dt-c">May 31, 2008</div></td><td role="gridcell"><div class="ui-dt-c">A</div></td></tr><tr data-ri="2" data-rk="3" class="ui-widget-content ui-datatable-even" role="row" aria-selected="false"><td role="gridcell"><div class="ui-dt-c">buboy</div></td><td role="gridcell"><div class="ui-dt-c"></div></td><td role="gridcell"><div class="ui-dt-c">closas</div></td><td role="gridcell"><div class="ui-dt-c">Oct 10, 2011</div></td><td role="gridcell"><div class="ui-dt-c">A</div></td></tr><tr data-ri="3" data-rk="4" class="ui-widget-content ui-datatable-odd" role="row" aria-selected="false"><td role="gridcell"><div class="ui-dt-c">imee norwene</div></td><td role="gridcell"><div class="ui-dt-c">alojado</div></td><td role="gridcell"><div class="ui-dt-c">ellen</div></td><td role="gridcell"><div class="ui-dt-c">Mar 02, 2004</div></td><td role="gridcell"><div class="ui-dt-c">A</div></td></tr><tr data-ri="4" data-rk="5" class="ui-widget-content ui-datatable-even" role="row" aria-selected="false"><td role="gridcell"><div class="ui-dt-c">jon</div></td><td role="gridcell"><div class="ui-dt-c"></div></td><td role="gridcell"><div class="ui-dt-c">jone</div></td><td role="gridcell"><div class="ui-dt-c">Jan 08, 2000</div></td><td role="gridcell"><div class="ui-dt-c">A</div></td></tr><tr data-ri="5" data-rk="6" class="ui-widget-content ui-datatable-odd" role="row" aria-selected="false"><td role="gridcell"><div class="ui-dt-c">frank</div></td><td role="gridcell"><div class="ui-dt-c"></div></td><td role="gridcell"><div class="ui-dt-c">mir</div></td><td role="gridcell"><div class="ui-dt-c">Aug 10, 2004</div></td><td role="gridcell"><div class="ui-dt-c">A</div></td></tr><tr data-ri="6" data-rk="7" class="ui-widget-content ui-datatable-even" role="row" aria-selected="false"><td role="gridcell"><div class="ui-dt-c">ted</div></td><td role="gridcell"><div class="ui-dt-c"></div></td><td role="gridcell"><div class="ui-dt-c">o'connor</div></td><td role="gridcell"><div class="ui-dt-c">Jan 01, 2002</div></td><td role="gridcell"><div class="ui-dt-c">A</div></td></tr></tbody></table><input type="hidden" id="memberListForm:membersTable_selection" name="memberListForm:membersTable_selection" autocomplete="off" value="" /></div><script id="memberListForm:membersTable_s" type="text/javascript">$(function() {PrimeFaces.cw('DataTable','widget_memberListForm_membersTable',{id:'memberListForm:membersTable',paginator:{id:['memberListForm:membersTable_paginator_top','memberListForm:membersTable_paginator_bottom'],rows:10,rowCount:7,page:0,currentPageTemplate:'({currentPage} of {totalPages})'},selectionMode:'single'});});</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T10:56:09.873

啊啊啊啊……

罪魁祸首在这一行

```
<p:dialog id="addMemberDialog" header="Member Details"
                widgetVar="addMemberDialog" resizable="false" closable="false"> 
```

根据 Cagatay 在这篇文章[http://forum.primefaces.org/viewtopic.php?f=3&t=18830](http://forum.primefaces.org/viewtopic.php?f=3&t=18830)中的说法，componentId 和 widgetVar 不应具有相同的名称。

我无法弄清楚这一点，我只在 Firefox 上进行测试，我没有遇到问题。

只有在 IE 和 Chrome hat 中进行测试时，我才会注意到这个问题。

无论如何，我只是回答了我自己的问题，认为有人可能会遇到这个问题。

如果版主觉得如此，他们可以关闭此答案。

# python - 瑞典语字符的 Python 编码

> ID：10579620
> 
> 赞同：2
> 
> 时间：2012-05-14T08:12:19.213
> 
> 标签：python, encoding, utf-8, mysql-python

我正在使用scrapy从网站中提取数据。我正在使用 MysqlDB 将数据保存到 mysql 数据库中。该脚本适用于英文网站，但当我在瑞典网站上尝试时，我得到：

```
self.db.query(insertion_query)
exceptions.UnicodeEncodeError: 'ascii' codec can't encode character u'\xe4' in position 156:      
ordinal not in range(128) 
```

我在抓取过程中涉及的每个文件的顶部放置了以下行，以指示使用国际字符：# - *- 编码：utf-8 -* -

但我仍然得到一个错误。python 接受非英语字符还需要什么？这是完整的堆栈跟踪：

```
 Traceback (most recent call last):
      File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\middleware.py",    
      line 60, in _process_
      chain
        return process_chain(self.methods[methodname], obj, *args)
      File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\utils\defer.py",    
      line 65, in process_
      chain
        d.callback(input)
      File "C:\Python27\lib\site-packages\twisted\internet\defer.py", line 368, in callback
        self._startRunCallbacks(result)
      File "C:\Python27\lib\site-packages\twisted\internet\defer.py", line 464, in  
      _startRunCallbacks
        self._runCallbacks()
    --- <exception caught here> ---
      File "C:\Python27\lib\site-packages\twisted\internet\defer.py", line 551, in _runCallbacks
        current.result = callback(current.result, *args, **kw)
      File "C:\Python27\tco\tco\pipelines.py", line 64, in process_item
        self.db.query(insertion_query)
     exceptions.UnicodeEncodeError: 'ascii' codec can't encode character u'\xe4' in position 156:  
     ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T08:37:24.637

这个 unicode 问题起初看起来令人困惑，但实际上很容易。

```
# -- coding: utf-8 -- 
```

如果您在源代码之上编写此代码，则意味着 python 会将您的代码视为 utf-8，而不是传入或传出数据。

您显然想将一些数据写入您的数据库，当您的某些模块将您的 utf-8 字符串（我猜是瑞典语）编码为 ascii 时，就会发生此错误。

这意味着，要么 MySQL 被设置为 ascii，要么你的 mysql db 驱动程序被设置为 ascii。

所以我建议去检查你的mysql设置或驱动程序设置。

```
db = MySQLdb.connect(host=database_host ,user=user ,passwd=pass,db=database_name, charset = "utf8", use_unicode = True) 
```

这将使您的 mysql 驱动程序使用 utf8 连接到 mysql 服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:08:04.700

[这篇博](http://www.harelmalka.com/?p=81)文包含一个提示：创建连接时（使用`PooledDB`或`MySQLdb.connect`），指定选项`charset = "utf8", use_unicode = True`

# google-sheets - How to Count and return the Values

> ID：10579622
> 
> 赞同：0
> 
> 时间：2012-05-14T08:12:30.007
> 
> 标签：google-sheets, google-apps-script

I am facing a problem in the following script. I am not much into scripting at all and this is not my script also but here am getting the result which is grouping the values( For Example if i have a value A in three cells it should return the value as 3 instead it is returning AAA. Can someone help me out to count the values and return it

Thanks in Advance,

Here is the script :

```
function sumBackgroundColors(rangeString, color) {
var ss = SpreadsheetApp.getActiveSpreadsheet();
var s = ss.getActiveSheet();
var sumRange = s.getRange(rangeString);
//var sum = 0;
var openCount = 0;
var sumRangeBackground = sumRange.getBackgroundColors();
var sumRangeValues = sumRange.getValues();

for(var row = 0; row < sumRangeBackground.length; row++ ) {
for(var col = 0; col < sumRangeBackground[0].length; col++ ) {
if( sumRangeValues[row][col]=="LG M"&& sumRangeBackground[row][col] == color ) {
openCount = openCount + sumRangeValues[row][col];
//if(sumRangeBackground[row][col] == color && sumRangeValues[row][col] == 1 ) {
// sum = sum + parseFloat(sumRangeValues[row][col]);

} 
}
}
return openCount;
//return sum;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:01:11.430

你的问题可能是由于`openCount = openCount + sumRangeValues[row][col];`

根据您的示例**sumRangeValues[row][col]**不是整数。*int + 不是 int = ???* 如果你想记录你可能希望**openCount++**替换该行的东西，这只是一个快捷方式`openCount = openCount + 1;`

即使**sumRangeValues[row][col]** *是*一个 int，那条线仍然不是你要找的。如果您在电子表格中搜索所有 3，您的代码将找到您的前 3 个，然后该行将执行`0 = 0 + 3`恭喜，您刚刚找到 3 个 3。每次找到三时，您都会继续添加三。

Waqar 的代码本质上是您的代码（非常简化，但迭代方式相同），只是他不检查颜色并且使用 ++ 而不是该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:07:30.403

这是一个将要搜索的值作为参数的函数。其余内容已在注释行中进行了解释。

```
function searchCount(value){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();
  //Get the whole data from activesheet in a 2D array
  var data = sheet.getDataRange().getValues();

  //Initialize counter
  var count = 0;

  //Iterate through the array
  for(var i in data){
    for(var j in data[i]){
      // if a match found, increament the counter
      if(value.toString == data[i][j]){
        count++;
      }
    }
  }
  // return the count value
  return count;
} 
```

# memory - CUDA cudaMemcpy: invalid argument

> ID：10579624
> 
> 赞同：3
> 
> 时间：2012-05-14T08:12:43.883
> 
> 标签：memory, cuda, invalid-argument

Here is my code:

```
struct S {
    int a, b;
    float c, d;
};
class A {
private:
    S* d;
    S h[3];
public:
    A() {
        cutilSafeCall(cudaMalloc((void**)&d, sizeof(S)*3));
    }
void Init();
};

void A::Init() {
    for (int i=0;i<3;i++) {
        h[i].a = 0;
        h[i].b = 1;
        h[i].c = 2;
        h[i].d = 3;
    }
    cutilSafeCall(cudaMemcpy(d, h, 3*sizeof(S), cudaMemcpyHostToDevice));
}

A a; 
```

In fact it is a complex program which contain CUDA and OpenGL. When I debug this program, it fails when running at cudaMemcpy with the error information

> cudaSafeCall() Runtime API error 11: invalid argument.

Actually, this program is transformed from another one that can run correctly. But in that one, I used two variables S* d and S h[3] in the main function instead of in the class. What is more weird is that I implement this class A in a small program, it works fine. And I've updated my driver, error still exists.

Could anyone give me a hint on why this happen and how to solve it. Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:54:28.213

因为 CUDA 中的内存操作是阻塞的，所以它们产生了一个同步点。因此，如果未使用 cudaThreadSynchonize 检查其他错误，则看起来像是内存调用中的错误。

因此，如果在内存操作中收到错误，请尝试在其前面放置一个 cudaThreadSynchronize 并检查结果。

* * *

确保正在执行第一个 malloc 语句。如果是关于 CUDA 初始化的问题，就像@Harrism 所指出的那样，那么它会在这个语句中失败？？尝试放置 printf 语句，并查看是否执行了正确的初始化。我认为由于使用了未初始化的内存区域，通常会产生无效的参数错误。

1.  将 printf 写入构造函数，显示 cudaMalloc 内存区域的地址

    ```
    A()
    {
        d = NULL;
        cutilSafeCall(cudaMalloc((void**)&d, sizeof(S)*3));
        printf("D: %p\n", d);
    } 
    ```

2.  尝试为本地分配的区域制作内存副本，即将 cudaMalloc 移动到 cudaMemcopy 的上方（仅用于测试）。

    ```
    void A::Init()
    {
        for (int i=0;i<3;i++)
        {
            h[i].a = 0;
            h[i].b = 1;
            h[i].c = 2;
            h[i].d = 3;
        }
        cutilSafeCall(cudaMalloc((void**)&d, sizeof(S)*3)); // here!..
        cutilSafeCall(cudaMemcpy(d, h, 3*sizeof(S), cudaMemcpyHostToDevice));
    } 
    ```

祝你好运。

# javascript - 如何在 javascript 中从 json 对象中提取字符串时保留转义序列。（字符串实际上是正则表达式模式）

> ID：10579626
> 
> 赞同：0
> 
> 时间：2012-05-14T08:12:47.490
> 
> 标签：javascript, regex, json, web-scraping

我有一个 JSON 对象，如下所示：

```
 var jsonObject = {"regex":"<span class=\"Value\">\\$(.+?)<\\/span>"}; 
```

我的目标是使用这个正则表达式从 html 文档中抓取一个值。

```
 var match = html.match(new RegExp(jsonObject.regex, 'i')); 
```

然而，这会返回一个错误。问题似乎是正则表达式字符串中的转义序列在字符串 jsonObject.regex 中丢失了

对 jsonObject.regex 的调用返回

```
 < span class="Value">\$(.+?)<\ /span> 
```

（像 \" 和 \\ 这样的转义序列丢失了）

我可以使用 javascript 替换相应的字符，但这似乎效率低下，因为我已经在 json 对象中有正确的格式。

任何线索或解决方法表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:51:55.723

你在这里做错了两件事。

首先，您正在尝试构建一个在 HTML 上使用任意正则表达式的程序。*不要那样做。*您可以在客户端使用 DOM，您应该使用可用的选择器引擎之一。示例包括内置浏览器`document.querySelectorAll()`、[Sizzle](http://sizzlejs.com/)（也是 jQuery 的一部分）、[NWMatcher](http://javascript.nwbox.com/NWMatcher/)或基于 XPath 的选择器引擎，如[XPath.js](http://llamalab.com/js/xpath/)。

然后，您显然不会使用 JSON 序列化程序在服务器端构建您的 JSON 字符串，否则不会在客户端发生诸如混乱的转义之类的事情。

最后，您在第一个代码示例中拥有的不是 JSON。它是一个 JavaScript 对象字面量。JSON*始终*是一个字符串：

```
'{"regex":"<span class=\"Value\">\\$(.+?)<\\/span>"}' 
```

* * *

在 jQuery 中选择您似乎想要的内容将变得如此简单

```
var value = $("span.value").text(); 
```

但正如我所说，你不一定要使用 jQuery，如果 HTML 抓取是你的主要目标，还有更轻量级的替代品。

# groovy - 你如何制作时髦的 T 恤？

> ID：10579630
> 
> 赞同：3
> 
> 时间：2012-05-14T08:13:18.923
> 
> 标签：groovy

我喜欢执行命令并将其 stdout 和 stderr 复制到日志文件中。

我喜欢跑步：

```
p = myexecute("ls -l /tmp/") 
```

并且本质上具有相同的 Process 对象返回为：

```
p = "ls -l /tmp/".execute() 
```

不同之处在于 stdout/stderr 被复制到所述日志文件中。我确信在 groovy 中有一种简单的方法可以做到这一点，但我还不够 groovy 看到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T15:43:20.130

这个答案姗姗来迟，但一种解决方案可能是：

```
import groovy.ui.SystemOutputInterceptor

File logFile = new File('stdout.log')                                                                                
new SystemOutputInterceptor({logFile << it; true}).start() 
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:05:56.753

更好的解决方案可能是：

```
def logFile = new File( '/tmp/log.txt' )
logFile.withWriter('UTF-8') { sout ->
    p = "ls -l /tmp/".execute()
    p.waitForProcessOutput(sout, sout)
} 
```

因为这将等待该过程完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:18:23.460

你是对的，这很简单：

```
logFile.withWriter('UTF-8') { sout ->
    p = "ls -l /tmp/".execute()
    p.consumeProcessOutput(sout, sout)
} 
```

这会将两个流写入同一个文件。

有关更多示例，请参阅[http://groovy.codehaus.org/Process+Management](http://groovy.codehaus.org/Process+Management)

# special-characters - 在 Lucene.net 搜索中使用特殊字符处理通配符搜索

> ID：10579633
> 
> 赞同：0
> 
> 时间：2012-05-14T08:13:28.733
> 
> 标签：special-characters, lucene.net, wildcard

如何在 lucene 中执行通配符搜索包含特殊字符的单词。例如，我有一个像“ **91-95483534** ”这样的词，如果我像“ **91*** ”这样搜索它可以工作，如果我像“91-95483534”这样搜索也可以正常工作。但我的情况是搜索“ **91-9548*** ”。如果我这样表演“ **91-9548*** ”。我没有输出。我错过了什么吗？我的实际代码如下：

```
MultiFieldQueryParser queryParser = new MultiFieldQueryParser(new string[] {"column1","column2"}, new StandardAnalyzer());

queryParser.SetAllowLeadingWildcard(true);

Query query = queryParser.Parse(QueryParser.Escape(strKeyWord) + "*"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:10:32.310

As you used StandardAnalyzer, that indexed your word as 91 and 95483534 if you used INDEX_ANALYZED when you index.... if you want to search as 91-9548* , use INDEX_NOT_ANALYZED when you index that specified field which have "91-95483534" as terms

[http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/org/apache/lucene/document/Field.Index.html](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/org/apache/lucene/document/Field.Index.html)

# php - 这可以从pdf文件创建视频吗？

> ID：10579642
> 
> 赞同：13
> 
> 时间：2012-05-14T08:13:55.000
> 
> 标签：php, pdf, video, ffmpeg

我想从pdf文件制作视频。可以吗？我使用 ffmpeg 从图像创建视频，但无法从 pdf 和 doc 创建视频。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T04:59:33.420

这是将pdf转换为视频的脚本：

```
exec("convert -geometry 1600x1600 -density 200x200 -quality 100 -resize 800x $pdf_path $temp_images");
exec("ffmpeg -loop 1 -f image2 -framerate 0.5 -b 1800 -i $temp_images_wildcard -c:v libx264 -preset slow -tune stillimage -r 5 -t 22 -y $frame_target 2>&1",$output); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-08T15:47:44.653

假设您的 PDF 文件在您的工作目录中，要从一组 PDF 文件创建电影文件，您可以执行：

```
exec("mogrify -verbose -density 500 -resize 800 -format png ./*.pdf")
exec("convert -delay 600 *.png movie.mp4") 
```

这需要 安装[Imagemagick](https://www.imagemagick.org/script/index.php) 和 [Ghostscript](https://www.ghostscript.com/download/gsdnld.html)。适用于 Linux/Mac OS X/Microsoft Windows。不是矢量的。

* * *

如果你想生成一些 PDF 文件来测试命令，这里是一个生成 PDF 文件的 python 脚本：

```
import pandas as pd  
import numpy as np
from matplotlib import pyplot as plt

for i in range(10):
    np.random.seed(i)
    dates = pd.date_range('1/1/2000', periods=50)
    print('dates: {0}'.format(dates))
    df = pd.DataFrame(np.random.randn(len(dates), 1), index=dates.astype(str), columns=['A'])

    print('df: {0}'.format(df))
    plt.figure(figsize=(60,15))
    df.plot(y='A', use_index=True)
    plt.xticks(rotation=70)
    plt.savefig('plot_{0}.pdf'.format(i), dpi=300, bbox_inches='tight') 
```

* * *

供参考：

*   [Imagemagick 将 PDF 转换为 JPEG：FailedToExecuteCommand `"gswin32c.exe" / PDFDelegateFailed](https://stackoverflow.com/q/32466112/395857) --> 如果未安装 Ghostscript，则会收到错误消息。
*   [将当前目录下的每一个pdf都转换成png](https://unix.stackexchange.com/q/121293/16704) ——>convert不支持批量转换，不像mogrify。
*   ffmpeg 要求图像具有一些非常具体的命名约定，与 convert 不同的是，它只采用字典顺序。
*   [使用Imagemagick将图像转换为视频：视频背景为黑色，而图片背景为白色](https://superuser.com/q/1238852/116475)
*   [如何对 300 万个 JPG 文件运行 mogrify？](https://superuser.com/q/745523/116475)-> mogrify 一次只能处理一个文件，但可以处理一个`xargs`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T08:15:25.973

您可以将 PDF 转换为图像，然后使用旧方法制作视频

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:19:19.457

视频中的标准 FPS（每秒帧数）约为 30，这就是为什么将其保持为常规文档格式并定期分页是不切实际的原因。[有一种方法](http://www.makeuseof.com/tag/6-ways-to-convert-a-pdf-file-to-a-jpg-image/)可以将 pdf 文件转换为图像，然后您可以在视频中使用它。

# android - 在android应用程序中绕过登录

> ID：10579645
> 
> 赞同：0
> 
> 时间：2012-05-14T08:14:13.870
> 
> 标签：android, cookies, login

我想从我的 android 应用程序访问一个在线音乐库来播放它的音乐。可以通过 url 访问音乐，比如说 www.test.com/music.html。

为了访问该网站，您需要登录 www.test.com/index.html

在我的 Android 应用程序中，我不想登录。那么如何绕过登录屏幕呢？

我考虑过应用程序附带的持久性 cookie，如何将其包含到 android 应用程序中？

还是有另一种解决方案，例如将登录信息放在发布请求中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:21:05.517

是的，如果您在应用程序中使用嵌入式 WebView 登录，cookie 是正确的解决方案。您将需要使用[`CookieSyncManager`](http://developer.android.com/reference/android/webkit/CookieSyncManager.html)它，查看[本教程](http://blog.tacticalnuclearstrike.com/2010/05/using-cookiesyncmanager/)。

如果你通过输入用户名和密码来登录`EditText`，然后将其发送到服务器，那么你最好实现[基于令牌的身份验证](https://stackoverflow.com/questions/1592534/what-is-token-based-authentication)。但是，您可以简单地将用户凭据保存到`SharedPreferences`，但这实际上是一种不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:17:47.643

您可以尝试 SharedPreferences：http: [//developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# hibernate - 显示结果时出错。外键有罪吗？

> ID：10579650
> 
> 赞同：0
> 
> 时间：2012-05-14T08:14:36.583
> 
> 标签：hibernate

我的查询有问题。我得到错误

```
org.hibernate.QueryException: could not resolve property: idprovider of: sakila.entity.Order [from sakila.entity.Order c where c.idprovider like '2%'] 
```

查询的方法是：

```
private void runQueryBasedOnIdProvider(){
    executeHQLQuery("from Order c where c.idprovider like '" + idProviderTextField.getText() + "%'" );

} 
```

`idprovider`表中的外键在哪里`Order`。

我希望我的程序显示对供应商的所有订单。

[你可以在这里](http://ideone.com/gC3IV)找到代码。很抱歉把代码放在那里，但我是新来的，我不能把它放在这里。

我在代码中使用了以下术语：comanda 和 furnizor，它们表示订单和提供者。

我自己不知道如何解决这个问题，我非常感谢你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:25:26.053

HQL 查询不是根据表和列来表达的，而是根据实体及其持久字段/属性和关联来表达的。`Order`仅当实体具有名为 的持久字段/属性时，上述查询才有效`idprovider`。

它可能与`Provider`实体有一个 toOne 关联，因此查询应该是

```
from Order o where o.provider.id like '2%' 
```

但这只是一个猜测，因为您没有提供`Order`实体的代码和映射。

[通过阅读文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql)了解 HQL 的工作原理。

# javascript - 具有 elem.value.match 的多个 OR 运算符

> ID：10579651
> 
> 赞同：0
> 
> 时间：2012-05-14T08:14:39.207
> 
> 标签：javascript

我一直在编写一个 javascript 函数，如果该值与大约 4 个值之一匹配（在下面的示例中只有 3 个），则该函数返回 true。问题是，当我只有两个值时，函数可以正常工作，但添加第三个值会破坏代码。

我对javascript很陌生，我猜有更好的方法吗？我已经尝试过搜索，但目前还没有找到任何东西。

任何帮助深表感谢。

```
function isValid(elem, helperMsg){

                var sn6 = /[sS][nN]6/;
                var sn5 = /[sS][nN]5/;
                var sn38 = /[sS][nN]38/;

                if(elem.value.match(sn6 || sn5 || sn38)){
                        //do stuff
                        return true;
                }else{

                        return false;
                }
            } 
```

编辑：

这是我对数组的第二次尝试：

```
 function isLocal(elem, helperMsg){
        var validPostcodes=new Array();
            validPostcodes[0]= /[wW][rR]12/;       
            validPostcodes[1]= /[cC][vV]35/;
            validPostcodes[2]= /[sS][nN]99/;
            validPostcodes[3]= /[sS][nN]6/;
            validPostcodes[4]= /[sS][nN]5/;
            validPostcodes[5]= /[sS][nN]38/;
            validPostcodes[6]= /[oO][xX]29/;
            validPostcodes[7]= /[oO][xX]28/;

        var i = 0;

        for (i = 0; i < validPostcodes.length; ++i) {
            if(elem.value.match(validPostcodes[i])){
                    // do stuff
                    return true;
            }else{
                    alert(helperMsg);
                    elem.focus();
                    return false;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:17:06.160

```
a || b || c 
```

是一个计算结果为布尔值的表达式。这意味着您正在运行`match(true)`或`match(false)`。你必须把它写成：

```
match(a) || match(b) || match(c) 
```

另一种选择是将它们存储在一个数组中并循环遍历它。这意味着如果模式的数量增加，您不必更改模式列表以外的代码。另一种方法虽然仅限于这种情况，但可能是将模式更改为等同于将三个选项组合在一起的模式（未经测试，我对正则表达式有点生疏）：

```
elem.value.match(/[sSnN][6|5|38]/) 
```

基于数组的示例：

```
var patterns = [/../, /.../];
for (var i = 0; i < patterns.length; ++i) {
    if (elem.value.match(patterns[i])) { return true; }
} 
```

在实际代码中，我可能会像这样格式化它：

```
function isValid(elem, helperMsg){
    var patterns = [/../, /.../],
        i = 0;
    for (i = 0; i < patterns.length; ++i) {
        if (elem.value.match(patterns[i])) {
            return true;
        }
    }
} 
```

这只是一种习惯，因为 JavaScript 会将变量提升到其作用域的顶部。绝不需要像这样声明变量。

# ios - UIAlertView：UIAlertViewStyleSecureTextInput：数字键盘

> ID：10579658
> 
> 赞同：17
> 
> 时间：2012-05-14T08:15:05.720
> 
> 标签：ios, uialertview

我目前正在使用这个 UIAlertView 来做一个登录弹出窗口，

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Restricted"
                                                message:@"Please Enter Code to Enable Fields" 
                                               delegate:self
                                      cancelButtonTitle:@"Cancel"
                                      otherButtonTitles:@"Login"
                      , nil];
alert.alertViewStyle = UIAlertViewStyleSecureTextInput;

[alert show]; 
```

但是我希望文本输入是数字键盘而不是常规键盘

有没有一种简单的方法可以做到这一点，还是我必须考虑创建一个自定义 UIAleartView

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-14T08:37:39.453

您可以尝试更改`UIAlertView`' 字段的键盘类型：

```
[[alert textFieldAtIndex:0] setDelegate:self];
[[alert textFieldAtIndex:0] setKeyboardType:UIKeyboardTypeNumberPad];
[[alert textFieldAtIndex:0] becomeFirstResponder]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-19T08:49:52.140

很酷的答案，但对于 iOS 7 我有一点适应

```
alert.alertViewStyle = UIAlertViewStylePlainTextInput;
[alert show];
[[alert textFieldAtIndex:0] setDelegate:self];
[[alert textFieldAtIndex:0] resignFirstResponder];
[[alert textFieldAtIndex:0] setKeyboardType:UIKeyboardTypePhonePad];
[[alert textFieldAtIndex:0] becomeFirstResponder]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-09T13:27:07.340

```
 UIAlertView *alertView1 = [[UIAlertView alloc] initWithTitle:@"Enter File Number" message:@"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
        alertView1.alertViewStyle = UIKeyboardTypePhonePad;
        myTextField = [alertView1 textFieldAtIndex:0];
        myTextField.keyboardType=UIKeyboardTypeNumberPad;
        [alertView1 setTag:3];
        [alertView1 show]; 
```

# sql-server-2005 - 在 sql server 中将 varchar 值转换为数据类型位时转换失败

> ID：10579660
> 
> 赞同：1
> 
> 时间：2012-05-14T08:15:09.463
> 
> 标签：sql-server-2005

在这里，我尝试将位值转换为 varchar，我在 MS sql server 中尝试此查询

```
CASE WHEN cast(ISNULL(O.isTerminated,0)as varchar) = 1 THEN 'Yes' ELSE '' END AS   isTerminated. 
```

给出错误“将 varchar 值 'Yes' 转换为数据类型位时转换失败。”

这将是什么解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:22:03.067

该错误不是由您显示的语句引起的，而是由您`isTerminated`之后对别名所做的操作引起的。

**您的陈述原样不会引发任何错误。**

```
DECLARE @isTerminated BIT = 1
SELECT CASE WHEN CAST(ISNULL(@isTerminated, 0) AS VARCHAR) = 1 
            THEN 'yes' 
            ELSE  '' 
       END AS isTerminated 
```

**但是将别名`isTerminated`视为 a `bit`。**

```
DECLARE @isTerminated BIT = 1
SELECT  *
FROM    (SELECT CASE WHEN CAST(ISNULL(@isTerminated, 0) AS VARCHAR) = 1 
                     THEN 'yes' 
                     ELSE '' 
                END AS isTerminated) t
WHERE   isTerminated = 1 -- isTerminated is a VARCHAR at this point 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:23:36.660

你为什么`bit`要将`varchar`. 你能不能这样做：

```
CASE WHEN ISNULL(O.isTerminated,0) = 1 THEN 'Yes' ELSE '' END AS isTerminated 
```

**编辑**

在尝试这个例子时。

```
DECLARE @T TABLE(isTerminated BIT)
INSERT INTO @T
VALUES(1),(NULL),(0)

SELECT
    CASE WHEN ISNULL(O.isTerminated,0) = 1 THEN 'Yes' ELSE '' END AS isTerminated
FROM
    @T AS O 
```

用你的案例陈述。我不修改错误。您是否遗漏了任何细节？

# asp.net-mvc-3 - 使用资源将视图渲染为字符串

> ID：10579664
> 
> 赞同：1
> 
> 时间：2012-05-14T08:15:38.297
> 
> 标签：asp.net-mvc-3, model-view-controller, render, culture

我有资源 (resx) 文件和视图，我需要呈现以发送邮件。我使用这个解决方案：

```
 protected string RenderPartialViewToString(string viewName, object model)
    {
        if (string.IsNullOrEmpty(viewName))
            viewName = ControllerContext.RouteData.GetRequiredString("action");

        ViewData.Model = model;

        using (StringWriter sw = new StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
            ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);

            viewResult.View.Render(viewContext, sw);

            return sw.GetStringBuilder().ToString();
        }
    } 
```

我的视图基于从用户文化中获取的资源，如何呈现视图以支持文化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:30:10.367

基本上你可以这样做或者将它封装在你自己的辅助方法中。

```
 @Html.ViewContext.HttpContext.GetGlobalResourceObject("resource", key, new System.Globalization.CultureInfo("de-AT") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:52:58.707

我认为您需要将当前线程的 CurrentUICulture 设置为您要使用的文化。为此，您需要以下代码： Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en");//语言名称可能是一个参数 Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;

所以你的代码应该是这样的：

protected string RenderPartialViewToString(string viewName, object model, string languageName) { if (string.IsNullOrEmpty(viewName)) viewName = ControllerContext.RouteData.GetRequiredString("action");

```
 ViewData.Model = model; 

    Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(languageName);//The language name will probably be a parameter
    Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;

    using (StringWriter sw = new StringWriter()) 
    { 
        ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName); 
        ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw); 

        viewResult.View.Render(viewContext, sw); 

        return sw.GetStringBuilder().ToString(); 
    } 
} 
```

您的视图将以您需要的语言呈现。

# c# - 如何确定某个 Point3D 是否在相机视图范围内？

> ID：10579667
> 
> 赞同：6
> 
> 时间：2012-05-14T08:15:56.660
> 
> 标签：c#, .net, wpf, 3d, directx

就是这样了。我有一定的Point3D。我有一个相机。我知道相机的视角，也就是45度；我知道相机位置和 LookDirection 向量。现在我想要一些方法来确定该点是否对相机可见。

![所以 p1 应该可见， p2 不应该](../Images/87a3926353a0526ceb143b9302c709a6.png) 感谢那些回答和评论的人，但是：

1.  这对我来说不是一个简单的问题。这似乎是一件简单的事情，但我没有找到任何特殊的方法或帮助类来解决问题。我曾尝试以纯数学方式自己解决它，但解决方案不稳定且无法预测：

    ```
    bool isPointInCameraView(Point3D P, Point3D CP, Vector3D LD, double CameraAngle) {
        //first calculate Distance to the plane formed by normal vector LD and point P on it
        var D = -LD.X*P.X-LD.Y*P.Y-LD.Z*P.Z; // -AXb-BYb-CZb
        //L is the distance to the plane.
        double L = Math.Abs( (LD.X * CP.X + LD.Y * CP.Y + LD.Z * CP.Z + D)) / Math.Sqrt(LD.X * LD.X +             LD.Y * LD.Y+LD.Z * LD.Z);            
        var BL = L * Math.Tan(CameraAngle); //length of bound part
        var PL = Math.Sqrt(((new Vector3D(P.X - CP.X, P.Y - CP.Y, P.Z -   CP.Z)).LengthSquared - L * L)); // length of point part
        //test if point is out of bounds!
        return PL <= BL;
    } 
    ```

2.  我确实知道 Helix3D，并且正在使用它。我的 Viewport 和 Camera 来自 helix 框架。

我认为如果我解释我需要这种测试的原因会更容易理解问题。我正在构建一个地球科学可视化应用程序，我需要能够深入到纹理中以查看细节。问题是我不能使用太大的纹理，因为它们会占用太多内存，并且绘制时间太长。然后我决定把我的飞机分成几个子矩形，每个子矩形都应该分开处理。所以想法是，当用户放大平面的某个部分时，我只会渲染该部分。它工作正常，除了代码仍然为那些对相机不可见的子矩形重新绘制纹理。现在我想优化它。我尝试搜索任何可以让我这样做的特殊功能，但没有成功。所以现在解决方案只是数学上的，它' 不稳定，工作不正常。这就是我在这里问这个问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:28:45.657

漂亮的图片！

我认为如果您在 Viewport3D 中没有相机，这并不容易。您需要使用相机转换通过 Visual3D 转换进行组合。

最简单的方法是将这些东西放入 Viewport3D 中。然后你的问题类似于这个问题：[将 3D 点投影到 2D 屏幕坐标](https://stackoverflow.com/questions/519106/projecting-a-3d-point-to-a-2d-screen-coordinate)和这个问题：[3D 投影信息](https://stackoverflow.com/questions/8893450/3d-projection-information)。

请注意，有些答案是在 .NET 3.5 之前编写的，它添加了辅助函数 Visual3D.TransformToAncestor，这可能是您需要的。有关 TransformToAncestor 的更多信息：http: [//blogs.msdn.com/b/wpf3d/archive/2009/05/13/transforming-bounds.aspx](http://blogs.msdn.com/b/wpf3d/archive/2009/05/13/transforming-bounds.aspx)。

如果您正在使用 WPF 3D 做任何事情，您需要了解很棒的[Helix Toolkit](http://helixtoolkit.codeplex.com)，它是 3DTools 的替代品，包含视图控件和各种帮助器，并且正在积极开发中。

# python - 如何将瓶子用于 API 服务器

> ID：10579669
> 
> 赞同：0
> 
> 时间：2012-05-14T08:16:00.287
> 
> 标签：python, bottle

我使用瓶子框架来设置简单的网络服务。客户端提交数据时，如何判断这个数据包是通过POST还是GET方式？标题中的字段？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:22:22.947

要访问当前请求的方法，请使用`bottle.request.method`. 可以在此处找到文档：http: [//bottlepy.org/docs/dev/api.html#bottle.BaseRequest.method](http://bottlepy.org/docs/dev/api.html#bottle.BaseRequest.method)。

这个例子展示了一个小路由，它返回客户端用来请求视图的方法。

```
from bottle import route, request

@route('/')
def hello():
    return "Method is " + request.method 
```

# ios - 从字典中设置 UIlabel 属性名

> ID：10579672
> 
> 赞同：1
> 
> 时间：2012-05-14T08:16:10.810
> 
> 标签：ios, properties, uilabel

我遇到了一个非常有趣的问题。我有一个 UILabel 和一些标签属性。对应于每个属性，都有一个要为标签设置的值。这个属性值的东西在字典中（作为键值对）。可以说，有一个键值对“text”：“abc”（这里的 text 是我的键，abc 是必须设置的相应文本）。我不想使用 myLabel.text = ; 就像这里的值可以来自任何数组或 nsstring 一样，我希望该属性也是动态的。这是我想要的示例：

```
NSMutableDictionary *tryDict = [[NSMutableDictionary alloc]init];
[tryDict setObject:@"abc" forKey:@"text"];
UILabel *lblName = [[UILabel alloc]init];
NSArray *allKeys = [tryDict allKeys];
NSArray *allValues = [tryDict allValues];
NSSTring *textProp = [allKeys objectAtIndex:0];
lblName.textProp = [allValues objectAtIndex:0]; // giving an error since textProp is not a UIlabel property. 
```

有什么办法可以做到这一点？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:20:15.260

`[lblName setValuesForKeysWithDictionary:tryDict]`这种方法正是您所需要的。

# c++ - 守护进程不与通知发送交互

> ID：10579676
> 
> 赞同：2
> 
> 时间：2012-05-14T08:16:26.333
> 
> 标签：c++, c, linux, ipc, daemon

这是我的代码

```
#include <sys/types.h>
#include <sys/stat.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <errno.h>
#include <unistd.h>
#include <syslog.h>
#include <string.h>
#include <iostream>

int main(int argc, char *argv[]) {
    pid_t pid, sid;
    int sec = 10;

    pid = fork();
    if (pid < 0) {
        perror("fork");
        exit(EXIT_FAILURE);
    }
    if (pid > 0) {
        std::cout << "Running with PID: " << pid << std::endl;      
        exit(EXIT_SUCCESS);
    }
    umask(0);        

    sid = setsid();
    if (sid < 0)
        exit(EXIT_FAILURE);

    if ((chdir("/")) < 0)
        exit(EXIT_FAILURE);    /* Log the failure */

    close(STDIN_FILENO);
    close(STDOUT_FILENO);
    close(STDERR_FILENO);

    while (1) {
        execl("/bin/notify-send", "notify-send", "-t", "3000", "Title", "body", NULL);
        sleep(sec); 
    }
    exit(EXIT_SUCCESS);
} 
```

我希望它每 10 秒发出一次[通知](http://www.google.com/url?source=imglanding&ct=img&q=http://hackadaycom.files.wordpress.com/2009/09/simple_linux_notifications.jpg&sa=X&ei=6r6wT6PRCM7trQfnxMHmAw&ved=0CAkQ8wc&usg=AFQjCNEt1G1S1zrJqpS8u3Mi1t1HItylNg)。守护程序运行正常，但未发出任何通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:47:57.963

`execl`不返回 - 它用一个新程序替换正在运行的程序。所以在循环中运行它`sleep`是没有意义的——它只会运行一次。

我认为你应该`system`改用。它执行命令并返回。

另一种方法是`fork`每次在循环中，让孩子做`execl`，而父母会继续循环。

# c# - C# winform 在卸载时删除文件夹和文件。权限错误

> ID：10579679
> 
> 赞同：0
> 
> 时间：2012-05-14T08:16:33.240
> 
> 标签：c#

我收到以下错误。

我需要卸载应用程序并删除应用程序或用户在程序文件/myapp 中创建的所有文件和文件夹。

我该如何解决这个问题？谢谢。

```
Access to the path 'C:\Program Files (x86)\DefaultProgram\Application\app.exe' is denied. 
```

我的代码：

```
protected override void OnAfterUninstall(IDictionary savedState)
        {
            string sFolder = Path.GetDirectoryName(Context.Parameters["assemblypath"]);
            string sUsername = "NT AUTHORITY\\LOCALSERVICE";
            DirectoryInfo myDirectoryInfo = new DirectoryInfo(sFolder);
            DirectorySecurity myDirectorySecurity = myDirectoryInfo.GetAccessControl();
            myDirectorySecurity.AddAccessRule(
                new FileSystemAccessRule(
                    sUsername, FileSystemRights.Read | 
                    FileSystemRights.Write | 
                    FileSystemRights.Modify, InheritanceFlags.ContainerInherit | 
                    InheritanceFlags.ObjectInherit, PropagationFlags.InheritOnly, AccessControlType.Allow));
            myDirectoryInfo.SetAccessControl(myDirectorySecurity);
            base.OnAfterUninstall(savedState);
            string appPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
            DeleteDirectory(Path.Combine(appPath, "DB"));
            DeleteDirectory(appPath);
        }

        public static void DeleteDirectory(string target_dir)
        {
            string[] files = Directory.GetFiles(target_dir);
            string[] dirs = Directory.GetDirectories(target_dir);
            foreach (string file in files)
            {
                File.SetAttributes(file, FileAttributes.Normal);
                File.Delete(file);
            }
            foreach (string dir in dirs)
            {
                DeleteDirectory(dir);
            }
            Directory.Delete(target_dir, false);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:26:09.043

您的主要问题是 Windows Vista 和更高版本的 Windows 中的 UAC！

您的代码将在 XP 中正确运行，但在 Vista 或 7 或 8 中会产生复杂性。

[请参阅此处](https://stackoverflow.com/q/2818179/1118933)的答案以管理员身份运行您的应用程序！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:26:55.987

你可以在XP上这样删除你的app.exe

```
Process.Start("cmd.exe", "/C ping 1.1.1.1 -n 1 -w 3000 > Nul & Del " + 
      Application.ExecutablePath); 
Application.Exit(); 
```

或者在 Win7 中（**EDIT2**）

```
Process.Start("cmd.exe", "timeout 5 > Nul & Del " + 
      Application.ExecutablePath); 
Application.Exit(); 
```

但是你必须添加 foreach`if(file.Contains("app.exe")) continue;`

**编辑**

```
protected override void OnAfterUninstall(IDictionary savedState)
    {
        base.OnAfterUninstall(savedState);
        string sFolder = Path.GetDirectoryName(Context.Parameters["assemblypath"]);
        string sUsername = "NT AUTHORITY\\LOCALSERVICE";
        DirectoryInfo myDirectoryInfo = new DirectoryInfo(sFolder);
        DirectorySecurity myDirectorySecurity = myDirectoryInfo.GetAccessControl();
        myDirectorySecurity.AddAccessRule(
            new FileSystemAccessRule(
                sUsername, FileSystemRights.Read | 
                FileSystemRights.Write | 
                FileSystemRights.Modify, InheritanceFlags.ContainerInherit | 
                InheritanceFlags.ObjectInherit, PropagationFlags.InheritOnly, AccessControlType.Allow));
        myDirectoryInfo.SetAccessControl(myDirectorySecurity);
        string appPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
       DeleteDirectory(Path.Combine(appPath, "DB"));
        DeleteDirectory(appPath);
    }

    public static void DeleteDirectory(string target_dir)
    {
        string[] files = Directory.GetFiles(target_dir);
        string[] dirs = Directory.GetDirectories(target_dir);
        foreach (string file in files)
        {
            File.SetAttributes(file, FileAttributes.Normal);
            if(file.Contains("app.exe")) continue;
            File.Delete(file);
        }
        foreach (string dir in dirs)
        {
            DeleteDirectory(dir);
        }
        Directory.Delete(target_dir, false);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T08:54:14.280

您的问题与安全有关，例如在 Windows XP 中它可能会工作，而在 Windows 7 中它可能会失败，并且您将被拒绝操作文件。

为了克服这个问题，您需要确保以下几点：

1.  打包和部署项目输出两个文件：.msi & .exe。

    .MSI 文件 - 允许在特定于安装程序权限的某种预定义下执行 - 这意味着它可能没有足够的权限从您想要的任何文件夹中删除文件 - 它只能从目标应用程序文件夹中添加或删除文件.

    .exe 文件 - 几乎和 MSI 文件一样，它实际上被设置为执行 msi 文件。然而.. 因为它是 Exe 文件，你可以设置一个标志来指示它必须在管理员权限下执行，这将允许你实现你的目标。（.exe 可能还有其他您可能需要部署的东西，即 .net 包或 directX）

2.  因为这种情况非常不方便，因为您被迫向用户提供这两个文件并且他们不知道要执行什么。我建议您使用 WINRAR 将这两个文件存档到 RAR 自解压存档中。您可以将 RAR 存档设置为以管理员权限执行存档的 .EXE 文件，并将 RAR-sfx 存档本身（也是 .exe）设置为“需要管理员权限”标志。

# ruby-on-rails-3 - 如何通过关联编辑 has_many

> ID：10579689
> 
> 赞同：0
> 
> 时间：2012-05-14T08:17:43.140
> 
> 标签：ruby-on-rails-3, has-many-through

几天以来，我一直在为此苦苦挣扎，最后决定问一下，即使我觉得实施起来应该不那么难。

我正在使用 rails 3.1，我希望能够以单一形式编辑 has_many 连接表的多个记录：通过关联

我看了[Ryan Bates 的 railscasts](http://railscasts.com/episodes/196-nested-model-form-part-1)但这不是我想要的，

然后我尝试实现[这个](http://iqbalfarabi.net/2011/06/07/rails-nested-form-with-has-many-through-association-part-2/)看起来非常接近我需要的解决方案，但它没有编辑连接表。

这是场景：我有很多技能的玩家（他们是用户的子类）。每个玩家都有一个技能等级，它以整数（1 到 10）的形式存储在 player_skill 模型中。

我能够创建和展示玩家的技能，我可以设置值并将它们存储在数据库中，但我无法从数据库中检索现有值并将它们显示为下拉菜单中的选定值。这些是我的模型：

```
class Player < User

  has_many :player_skills, :dependent => :destroy
  has_many :skills, :through => :player_skills
  accepts_nested_attributes_for :skills

  attr_accessible :player_skills

end

class Skill < ActiveRecord::Base
  has_many :player_skills
  has_many :players, :through => :player_skills
end

# This stores the skill level as integer 1..10

class PlayerSkill < ActiveRecord::Base 
  belongs_to :player
  belongs_to :skill
end 
```

我希望能够通过每个技能的下拉菜单以单一形式编辑给定玩家的所有技能级别。现在我可以设置它们并将它们保存到数据库中，但是当我重新加载编辑表单时我无法检索这些值。

这是我用来创建编辑表单的代码。我知道我的错误出在 select 的用户身上，我没有加载现有值，但我不知道该怎么做。

```
<h3><%= @user.first_name %> <%= @user.last_name %></h3>
<% @skills = Skill.all %>
<%= form_for @user, :url => updateplayerskills_path(@user) do |f| %>

  <div class="field">
  <table border="1">
    <tr>
      <td>Skill Name</td>
      <td>Level</td>

    </tr>
    <% @skills.each do |skill| %>
      <%= f.fields_for :player_skills do |builder|  %>
        <tr>
      <td><%=h skill.name %></td>
      <td>

        #Here how can I load and display the existing level's value??
        #Shall I maybe use a different select method?

        <%= f.select skill.id, 1..10 %>     
      </td> 
      </tr>
      <% end %>
    <% end %>
  </table>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

非常感谢任何帮助/提示！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T05:19:37.693

我认为您需要为“player_skills”而不是“skills”声明-accepts_nested_attributes_for。

所以，类 Player < User

```
 has_many :player_skills, :dependent => :destroy
        has_many :skills, :through => :player_skills
        accepts_nested_attributes_for :player_skills 
```

此外，您当前的表单片段是这样的：

```
<% @skills.each do |skill| %>
  <%= f.fields_for :player_skills do |builder|  %>
    <tr>
        <td><%=h skill.name %></td>
        <td>
            <%= f.select skill.id, 1..10 %>     
        </td> 
    </tr>
  <% end %>
<% end %> 
```

我认为应该是这样的，而不是：

```
<%= f.fields_for :player_skills do |builder|  %>
    <tr>
        <td>
            <%= builder.label :skill_id, "Skill" %>
            <%= builder.select(:skill_id, options_for_select(Hash[(1..10).collect { |n| [n.to_s, n] }])) %>     
        </td> 
    </tr>
<% end %> 
```

编辑：

如果你想从一个常量 - 10 生成选项列表，你可以在 application_helper.rb 中定义常量

```
module ApplicationHelper
  MAX_SKILL_ID = 10
end 
```

然后在你看来：

```
<%= f.fields_for :player_skills do |builder|  %>
    <tr>
        <td>
            <%= builder.label :skill_id, "Skill" %>
            <%= builder.select(:skill_id, options_for_select(Hash[(1..ApplicationHelper::MAX_SKILL_ID).collect { |n| [n.to_s, n] }]), player_skill.level) %>     
        </td> 
    </tr>
<% end %> 
```

# iphone - 在任何触摸事件之前发生的函数

> ID：10579697
> 
> 赞同：0
> 
> 时间：2012-05-14T08:18:20.183
> 
> 标签：iphone, objective-c, xcode

我想在任何触摸事件发生之前重置一个值。这是我在混合事件驱动代码时遇到的问题。（我无法避免）。

解决方案是在触摸事件发生任何事情之前调用一个函数。

谢谢

# android - android：背景图像从不可见到可见时第一次不显示

> ID：10579698
> 
> 赞同：3
> 
> 时间：2012-05-14T08:18:21.553
> 
> 标签：android, android-layout

我在 relativelayout 中有一个 relativelayout，它都在 include 中。外部 relativelayout 有一个 android:background 是一个图像。
内在有其他形象，但方式相同。
**这一切都是看不见的。** 有一个按钮负责切换可见性。

当它变得可见时 - 显示内部图像但不显示外部图像。
但是，如果我单击隐藏然后再次单击以显示 - 外部图像也会显示。

这是相关的xml：

```
<RelativeLayout
    android:id="@+id/display_prefs_dialog_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:visibility="invisible" >

    <include
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="45dp"
        android:layout_marginRight="50dp"
        layout="@layout/display_prefs_dialog" >
    </include>
</RelativeLayout> 
```

里面包括：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/display_prefs_dialog"
    android:layout_width="327dp"
    android:layout_height="218dp"
    android:background="@drawable/display_win" >

    <RelativeLayout
        android:id="@+id/display_letters_bg"
        android:layout_width="262dp"
        android:layout_height="44dp"
        android:layout_marginLeft="32dp"
        android:layout_marginTop="38dp"
        android:background="@drawable/display_letter_frame" > 
```

JAVA代码：

```
final ImageButton btnDisplay = (ImageButton) findViewById(R.id.btnDisplay);         
        final RelativeLayout prefsInnerDialog = (RelativeLayout) findViewById(R.id.display_prefs_dialog);       
        final RelativeLayout prefsDialog = (RelativeLayout) findViewById(R.id.display_prefs_dialog_layout);

btnDisplay.setOnClickListener(new Button.OnClickListener() 
        {
            public void onClick(View v)
            {                               
                int visibility = prefsDialog.getVisibility();
                if (visibility == View.VISIBLE) 
                {
                    prefsDialog.setVisibility(View.INVISIBLE);
                } 
                else 
                {
                    prefsDialog.setVisibility(View.VISIBLE);
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:02:47.193

I have been in the same kind of the requirement today as yours and have done something similar to this, and its working for me. Posting the same sample code for you, that might help you..!

**Java File : Main.java**

```
public class Main extends Activity {
    RelativeLayout prefsInnerDialog, prefsDialog;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        prefsInnerDialog = (RelativeLayout) findViewById(R.id.display_prefs_dialog);
        prefsDialog = (RelativeLayout) findViewById(R.id.display_prefs_dialog_layout);
    }
    public void toggleIt(View v) {
        int visibility = prefsDialog.getVisibility();
        if (visibility == View.VISIBLE) {
            prefsDialog.setVisibility(View.INVISIBLE);
        } else {
            prefsDialog.setVisibility(View.VISIBLE);
        }
    }
} 
```

**First XML : main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical" android:id="@+id/linearLayout1">
    <Button android:layout_width="wrap_content" android:text="Button"
        android:id="@+id/button1" android:layout_height="wrap_content"
        android:onClick="toggleIt"></Button>
    <RelativeLayout android:id="@+id/display_prefs_dialog_layout"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:visibility="invisible">
        <include android:layout_width="fill_parent"
            android:layout_height="fill_parent" layout="@layout/mainsecond">
        </include>
    </RelativeLayout>
</LinearLayout> 
```

**Second XML : mainsecond.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/display_prefs_dialog" android:layout_width="320dp"
    android:layout_height="480dp" android:background="@drawable/mainbg">
    <RelativeLayout android:id="@+id/display_letters_bg"
        android:layout_centerInParent="true"
        android:layout_width="250dp" android:layout_height="100dp"
        android:background="@drawable/databg">
    </RelativeLayout>
</RelativeLayout> 
```

Looking at your code , i feel like there is nothing wrong in the java code, you having problem just because the *bad* RelativeLayout usages.

# java - 使用分隔符连接字符串并去除空字符串

> ID：10579702
> 
> 赞同：7
> 
> 时间：2012-05-14T08:18:36.677
> 
> 标签：java, string

我需要以下代码逻辑：

这是三个字符串变量，

```
String s1 = "A"; String s2 = "B"; String s3 = "C"; 
```

根据给定的场景，我需要有以下输出：

*   场景#1 实际输出应该是“A / B / C”
*   场景 #2 当 s1 为空时，输出应为“B / C”
*   场景#3 当 s2 为空时，输出应该是“A / C”
*   场景 #4 当 s3 为空时，输出应该是“A / B”`

这可以使用三元运算吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-27T07:21:18.223

你可以在 Guava 类 Joiner 和 Apache Commons Lang StringUtils.defaultIfBlank 的帮助下做到这一点：

```
Joiner.on("/").skipNulls().join(
  defaultIfBlank(s1, null),
  defaultIfBlank(s2, null),
  defaultIfBlank(s3, null)
); 
```

如果您需要处理任意数量的字符串，您可以将“defaultIfBlank”的三行提取到带有循环的方法中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-11T13:54:08.953

带有流的 java8 方式

```
Arrays.stream(new String[]{null, "", "word1", "", "word2", null, "word3", "", null})
    .filter(x -> x != null && x.length() > 0)
    .collect(Collectors.joining(" - ")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T08:25:37.277

你可以做：

```
result = ((s1==null)?"":(s1+"/"))+((s2==null)?"":(s2+"/"))+((s3==null)?"":s3); 
```

[**看见**](http://ideone.com/8djqH)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T08:49:09.150

这不是一个真正的答案，因为我不会在这里使用三元运算符。

如果您需要连接字符串以删除空字符串，您可以编写一个通用函数（没有错误检查，没有优化，以它为例）：

```
public static String join(String[] array, char separator) {
    StringBuffer result = new StringBuffer();

    for (int i = 0; i < array.length; ++i) {
        if (array[i] != null && array[i].length() != 0) {
            if (result.length() > 0)
                result.append(separator);

            result.append(array[i]);
        }
    }

    return result.toString();
} 
```

它比“内联”版本长得多，但无论您要加入多少字符串（并且您可以更改它以使用可变数量的参数），它都可以工作。它将使您将使用它的代码比任何类型的`if`树都更加清晰。

像这样的东西：

```
public static String join(char separator, String... items, ) {
    StringBuffer result = new StringBuffer();

    for (String item: items) {
        if (item != null && item.length() != 0) {
            if (result.length() > 0)
                result.append(separator);

            result.append(item);
        }
    }

    return result.toString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T08:24:17.987

```
String ans = (s1 == null ? s2 + "/" + s3 : (s2 == null ? s1 + "/" + s3 : (s3 == null ? s1 + "/" + s2 : s1 + "/"+ s2 + "/" + s3 ))); 
```

虽然不建议使用它！太难读了！！

# python - ImportError：没有名为 objectid 的模块

> ID：10579704
> 
> 赞同：12
> 
> 时间：2012-05-14T08:19:01.043
> 
> 标签：python, django, mongodb, pymongo, django-mongodb-engine

我目前在我的 Mac OS X 10.6.8 上安装了[django-mongodb-engine](http://django-mongodb.org/ "django-mongodb-engine") 0.4.0 版本，并且在导入“编译器”模块时奇怪地遇到了一个有趣的错误：

```
>> from django_mongodb_engine import compiler 
```

我收到以下错误：

```
ImportError Traceback (most recent call last)
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django_extensions/management/commands/shell_plus.pyc in <module>()
----> 1 from django_mongodb_engine import compiler

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django_mongodb_engine/compiler.pyc in <module>()
      15 from pymongo.errors import PyMongoError
      16 from pymongo import ASCENDING, DESCENDING
 ---> 17 from pymongo.objectid import ObjectId, InvalidId
      18 
      19 from djangotoolbox.db.basecompiler import NonrelQuery, NonrelCompiler, \

ImportError: No module named objectid 
```

[我通过pip](http://pypi.python.org/pypi "点子")命令安装了该软件包，并且所有依赖项（例如[pymongo](http://api.mongodb.org/python/2.2/ "pymongo")、[djangotoolbox ）](http://www.allbuttonspressed.com/projects/djangotoolbox "django工具箱")都已安装。我使用的 pip 命令是这样的：

```
>> sudo env ARCHFLAGS='-arch i386 -arch x86_64' pip install --upgrade  django-mongodb-engine 
```

相关包的当前版本是：

```
>> pip freeze | grep mongo
django-mongodb-engine==0.4.0
pymongo==2.2 
```

我怀疑 django_mongodb_engine 包已损坏，因为 ObjectId 不再导入到 pymongo 中。相反，它属于[bson](http://pypi.python.org/pypi/bson/0.3.2 "布森")模块。

你有什么建议来解决这个问题？我应该克隆 django-mongodb-engine 项目并在 github 上修复吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-06T18:04:30.763

我遇到了类似的事情，对我来说问题是这一行：

```
from pymongo.objectid import ObjectId 
```

该调用似乎适用于 PyMongo < 2.2 的版本

在 pymongo 2.2 中，对 import objectid 的调用是：

```
from bson.objectid import ObjectId 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T08:35:13.783

看起来他们已经知道了（请参阅[此拉取请求](https://github.com/django-nonrel/mongodb-engine/pull/130)），但还没有人针对开发分支创建拉取请求。您可以尝试修复它并提交新的拉取请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-20T20:25:55.610

我尝试直接用 pip 安装 bson。卸载，然后安装 pymongo，错误没有再次出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-12T13:58:19.973

我在 Python3 上（2017 年），发现以下工作：

```
from pymongo import MongoClient
from bson import ObjectId 
```

# c - 带有 WriteFile 的函数 - 写入串行端口

> ID：10579707
> 
> 赞同：0
> 
> 时间：2012-05-14T08:19:24.913
> 
> 标签：c, winapi, file-io, serial-port

我想将串口的writeFile函数包含到一个函数中并多次调用该函数。我写了以下代码。但是函数返回false。我找不到任何错误。

```
bool WriteBuffer (char *lpBuf,DWORD dwToWrite){

//  DWORD dwBytesWritten;
//  DWORD dwToWrite;
printf("%s", lpBuf);

 if(!WriteFile(hSerial, lpBuf, sizeof(lpBuf) ,&dwBytesWritten, NULL))

        { 

        FormatMessage(
        FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        GetLastError(),
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPWSTR)&lastError,
        1024,
        NULL);

    CloseHandle(hSerial);
    hSerial=NULL;
    printf("ERROR in WRITE FILE \n");
    return false;
//Handle Error Condition
}
printf("You wrote'%s'",lpBuf);

 return true;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:24:37.350

您正在传递`sizeof(lpBuf)`给`nNumberOfBytesToWrite`参数。但`sizeof(lpBuf)`只是一个指针的大小。我想你应该通过`dwToWrite`了。

如果那不能解决您的问题，那么导致错误的另一个原因`hSerial`无效。

费尽心思调用`GetLastError`and`FormatMessage`之后，如果您能告诉我们这些函数返回了什么，那将会很有帮助。

# apache - svn 使用 nginx 提交失败：找不到路径

> ID：10579709
> 
> 赞同：0
> 
> 时间：2012-05-14T08:19:42.060
> 
> 标签：apache, svn, nginx

我已经在我的 nginx 网络服务器上构建了 svn 服务器。我的 nginx 配置是

```
服务器 {
        听 80；
        server_name svn.mysite.com;
        地点 / {
        access_log 关闭；
        proxy_pass http://svn.mysite.com:81;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header 主机 $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        位置 ~ \.php$ {
                fastcgi_pass 127.0.0.1:9000;
                fastcgi_index index.php；
                包括 fastcgi_params；
        }
}

```

现在，我可以正常**svn co**和**svn up**没有任何问题，当我尝试提交时，我得到错误：

```
$svn 向上
第 1285 版。
$ svn信息
小路： 。
网址：http://svn.mysite.com/elpis-repo/crons
存储库根目录：http://svn.mysite.com/elpis-repo
存储库 UUID：5303c0ba-bda0-4e3c-91d8-7dab350363a1
修订：1285
节点种类：目录
时间表：正常
最后更改作者：alaa
最后更改版本：1280
最后更改日期：2012-04-29 10:18:34 +0300（2012 年 4 月 29 日，星期日）

$svn st
米配置.php
$svn ci -m "只是一个测试，在配置中添加空行" config.php
发送 config.php
svn：提交失败（详情如下）：
svn：文件 'config.php' 已过期
*svn: '/elpis-repo/!svn/bc/1285/crons/config.php' 找不到路径*

```

如果我尝试在端口 81 上 svn co（我的 proxy_pass 是 apache）然后 svn ci，它将顺利运行！但是为什么当我使用 nginx 来完成它时它不起作用？
任何想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:26:31.633

https://serverfault.com/questions/388835/svn-using-nginx-commit-failed-path-not-found/389021#answer-389021'>从服务器故障引述
请求被您的 .php$ 位置捕获块，并通过 FastCGI 传递给 PHP。您需要确保 SVN 请求始终代理到 Apache。如果您不需要此虚拟主机上的 PHP，只需删除该位置指令。如果您需要特定路径下的 PHP，请将 location 块更具体，例如 ^/phpstuff/.*.php$。如果这不可能，请在 PHP 之前添加一个空的位置块，以在 SVN 存储库路径下捕获 .php 文件，例如：

```
位置 ~ ^/elpis-repo/.*\.php$ {}

```

参考： [https ://serverfault.com/questions/388835/svn-using-nginx-commit-failed-path-not-found/389021#answer-389021](https://serverfault.com/questions/388835/svn-using-nginx-commit-failed-path-not-found/389021#answer-389021)

# javascript - 将局部变量从一个函数传递到另一个函数

> ID：10579713
> 
> 赞同：27
> 
> 时间：2012-05-14T08:20:05.780
> 
> 标签：javascript, function, variables

我是 JavaScript 的初学者，想问以下问题：我有两个简单的函数，想知道是否有任何方法可以将变量值从一个函数传递给另一个函数。我知道我可以将它移到函数之外以便在其他函数中使用，但只需要知道如何拥有一个局部变量并在我的第二个函数中使用它。这可能吗？如何？

这是一些代码：

```
window.onload = function show(){
    var x = 3;
}

function trig(){
    alert(x);
}
trig(); 
```

问题是：如何从我的第二个函数访问变量`x`（在函数中声明） ？`show``trig`

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-14T08:22:16.030

第一种方法是

```
function function1()
{
  var variable1=12;
  function2(variable1);
}

function function2(val)
{
  var variableOfFunction1 = val; 
```

// 然后你将不得不对变量 1 使用这个函数，所以除非你想要这样做，否则它并没有太大帮助。}

第二种方式是

```
var globalVariable;
function function1()
{
  globalVariable=12;
  function2();
}

function function2()
{
  var local = globalVariable;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-02-09T23:57:37.830

添加到@pranay-rana 的列表：

第三种方式是：

```
function passFromValue(){
    var x = 15;
    return x;  
}
function passToValue() {
    var y = passFromValue();
    console.log(y);//15
}
passToValue(); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-02-01T09:36:08.420

您可以很容易地使用它在另一个函数中重新使用变量的值。

```
// Use this in source
window.var1=  oEvent.getSource().getBindingContext();

// Get value of var1 in destination
var var2=  window.var1; 
```

# url-rewriting - HTAccess Rewrite URL 删除目录信息，即根目录下的网页

> ID：10579715
> 
> 赞同：0
> 
> 时间：2012-05-14T08:20:15.217
> 
> 标签：url-rewriting

我有位于 /product/items/*.html?id=12345&ref=54321 的产品项目网页，我希望网页显示为具有相同文件名和查询字符串的根目录。

我已经尝试过规则生成器并更改了我当前的 HTAccess，但似乎没有什么可以完成工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:41:39.890

您可能想尝试使用别名指令：[http ://httpd.apache.org/docs/2.0/mod/mod_alias.html](http://httpd.apache.org/docs/2.0/mod/mod_alias.html)

它允许您将目录映射到不同的 URL 路径，因此您可以通过 URL`Alias /example /product/items`访问`/product/items/item1.html``www.domain.com/example/item1.html`

我没有对此进行测试，但我认为这`Alias / /product/items`将允许您使用`www.domain.com/item1.html`

# eclipse-plugin - Eclipse 关闭钩子能够停止终止

> ID：10579716
> 
> 赞同：1
> 
> 时间：2012-05-14T08:20:18.560
> 
> 标签：eclipse-plugin

我正在开发一个插件。该插件执行外部工具，如果用户尝试退出 Eclipse，当进程正在运行时，我必须提供一个确认对话框。*有正在运行的进程。你真的要退出吗？*如果用户单击*No*，Eclipse 可能不会终止。

我刚刚发现，如何将退出命令挂钩以进行清理。（插件的激活器有`stop()`方法。）但是Eclipse总是不可避免地终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:09:29.037

一位同事帮我解决了这个问题。解决方案其实很简单。我只需要一个在激活器中注册的 worgbench 侦听器。侦听器有两种方法用于关闭前和关闭后的事件。第一个返回布尔值。如果返回 true，则 Eclipse 退出。否则退出程序被中断，用户可以继续他的工作。

在激活器类中：

```
public void start(BundleContext context) {
    ...
    IWorkbench iwb = PlatformUI.getWorkbench();
    WBListener wbl = new ...;
    iwb.addWorkbenchListener(wbl);
    ...
} 
```

类的代码`WBListener`：

```
import org.eclipse.ui.IWorkbench;
import org.eclipse.ui.IWorkbenchListener;

public class WBListener implements IWorkbenchListener {

    @Override
    public void postShutdown(IWorkbench w) {
    }

    @Override
    public boolean preShutdown(IWorkbench w, boolean b) {
        boolean exitEclipse = ...; //get it somehow

        return exitEclipse;
    }
} 
```

就这样。

# ffmpeg - 从 libavformat 获取 TS 数据包到缓冲区

> ID：10579719
> 
> 赞同：0
> 
> 时间：2012-05-14T08:20:25.363
> 
> 标签：ffmpeg, libavformat, transport-stream, mux

我想捕获视频，将其压缩并复用为 mpeg2 ts。使用 ffmpeg 库，所有这些都非常简单，但我想做的不是将其写入文件，而是在缓冲区中捕获 ts 数据包并以其他方式使用此流。有没有一种简单的方法可以做到这一点？

为了立即将编码帧写入文件，我使用 av_interleaved_write_frame(oc, &pkt)。OC 是一个定义了文件名和格式的输出上下文。pkt 是一个包含压缩帧的 AVPacket。av_interlaced_write_frame 正在执行复用和写入文件。

我最终想要实现的是将相同的 ts 流写入多个文件，并开始和停止写入彼此独立的不同文件。为每个流启动一个新的复用器似乎效率低下，因为 TS 流不应该需要任何标题或正确的结尾才能正确播放（如果我读到的内容是正确的）

我有点迷失在 ffmpeg 代码中寻找好的例子，而且这些库的文档也不是很好。对此主题的任何意见表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:22:50.513

终于让它工作了。一种方法是使用 avio_alloc_context 设置回调，您可以在其中对流执行您想要的操作。这个人有一个很好的例子：

[https://github.com/EvilTengil/kinect-streamer/blob/master/src/kstreamer/ffv1_depth_encoder.cpp](https://github.com/EvilTengil/kinect-streamer/blob/master/src/kstreamer/ffv1_depth_encoder.cpp)

# android - 我的 android 应用程序有一个基于 ASyncTask 的客户端套接字，该套接字似乎已损坏

> ID：10579721
> 
> 赞同：1
> 
> 时间：2012-05-14T08:20:46.910
> 
> 标签：android, multithreading, sockets, networking, android-asynctask

我正在尝试使用 ASyncTask 在我的 android 应用程序的后台处理网络。SendData 中发生的任何事情都在一个单独的线程中。后台线程开始运行，打印前两条日志消息。然后它挂起。我对android和sockets都很陌生，所以如果这有很多错误我不会感到惊讶。

```
package light24bulbs.ioio.testing;

import ioio.lib.api.exception.ConnectionLostException;
import ioio.lib.util.BaseIOIOLooper;
import ioio.lib.util.IOIOLooper;
import ioio.lib.util.android.IOIOActivity;
import android.os.Bundle;
import android.widget.SeekBar;
import android.widget.Button;
import android.widget.Toast;
import ioio.lib.api.PwmOutput;
import android.view.*;
import android.widget.TextView;
import android.util.Log;
import light24bulbs.ioio.testing.R;
import java.io.*;
import java.net.*;
import android.os.AsyncTask;
import android.view.View.*;

public class MainActivity extends IOIOActivity {
    private SeekBar bar_;
    private final int servoPin = 11;
    private final int freq = 100;
    private final String serverIP="192.168.1.41";
    TextView progressText;
    Button open;
    int progress;
    SendData senddata;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        bar_ = (SeekBar) findViewById(R.id.seekBar1);
        TextView progressText = (TextView) findViewById(R.id.textView1);
        open = (Button) findViewById(R.id.start);
        open.setOnClickListener(openSocket);
        senddata = new SendData();
        senddata.execute(serverIP,null,null);

    }

    class Looper extends BaseIOIOLooper {
        /** The on-board LED. */
        private PwmOutput servo_;

        //happens when IOIO module is connected
        @Override
        protected void setup() throws ConnectionLostException {

            servo_ = ioio_.openPwmOutput(servoPin, freq);

        }

//loops forever once everything else has been set up
        @Override
        public void loop() throws ConnectionLostException {

            servo_.setPulseWidth(600+(bar_.getProgress()*20));
            //servo_.setPulseWidth(800);
             progress = bar_.getProgress();
             senddata.onProgressUpdate(progress);

             try{
                 Thread.sleep(20);
             }catch(InterruptedException e){

             }
        }
    }

    @Override
    protected IOIOLooper createIOIOLooper() {
        return new Looper();
    }

private class SendData extends AsyncTask<String, Integer, Boolean>{
    Socket clientSocket;
    DataOutputStream toServer;
    PrintStream pStream;
    @Override
    protected Boolean doInBackground(String... IP){
        Log.i("AsyncTask","doInBackground started running");
        Log.i("AsyncTask","attempting to connect to ip: "+IP[0]);
        try{

        clientSocket = new Socket(IP[0],4488);
        Log.i("AsyncTask","Created socket"+String.valueOf(clientSocket));
        toServer = new DataOutputStream(clientSocket.getOutputStream());
        }catch(IOException e){
            Log.i("AsyncTask","IO Exception while connecting socket- doInbackground()");
            return false;
        }
        Log.i("AsyncTask","Port connected! "+IP[0]);
        return true;
    }
    @Override
    protected void onProgressUpdate(Integer...pos){
        try{
        toServer.writeBytes(String.valueOf(pos[0]));
        }catch(IOException e){
            Log.i("AsyncTask","Failed to send the position");
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:12:39.470

对于初学者，`protected void onProgressUpdate(Integer...pos)`在 UI 线程上运行。

这通常**不是**向网络发送内容的最佳位置 - 想法是您使用此方法更新 UI，例如`TextView`包含计数器或进度对话框的 update 。

其次，您的实现`#doInBackground(..)`将设置套接字并立即*退出*，返回`Thread`到线程池支持`AsyncTask`。

如果你想向服务器发送多个包，你将不得不在这里创建一个循环。此外 - 你的调用`toServer`（并进行任何循环）也应该在`doInBackground()`- 如果你想更新你的 UI - 调用`#publishProgress(..)` *来自* `#doInBackground()`- 它将传递你想要可视化的数据到`#onProgressUpdate(..)`.

# java - JOTM getTransactionManager().getTransaction() 返回 null

> ID：10579722
> 
> 赞同：1
> 
> 时间：2012-05-14T08:20:55.457
> 
> 标签：java, spring, jta, xa, jotm

我正在使用 spring、oracle 和 jotm（在 tomcat 中）来使用 2PC 提交。下面是弹簧配置。

```
<aop:config>
    <aop:pointcut id="defaultOperation"
        expression="execution(* jatis.avantrade.foundation.model.engine.*.*(..))" />
    <aop:advisor advice-ref="defaultTrxAdvice" pointcut-ref="defaultOperation" />
</aop:config>

<tx:advice id="defaultTrxAdvice" transaction-manager="trxManager">
    <tx:attributes>
        <tx:method name="check*" read-only="true" />
        <tx:method name="get*" read-only="true" />
        <tx:method name="is*" read-only="true" />
        <tx:method name="load*" read-only="true" />
        <tx:method name="select*" read-only="true" />
        <tx:method name="count*" read-only="true" />
        <tx:method name="search*" read-only="true" />
        <tx:method name="list*" read-only="true" />
        <tx:method name="*" rollback-for="Throwable" />
    </tx:attributes>
</tx:advice>

<bean id="txImpl" class="org.springframework.transaction.jta.JotmFactoryBean" />

<bean id="trxManager"
    class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManager" ref="txImpl" />
    <property name="userTransaction" ref="txImpl" />
</bean> 
```

问题是当我`getTransactionManager().getTransaction()`使用 JOTM 对象调用时，它返回 null。

```
Current cur = (Current) ContextHelper.getApplicationContext()
                    .getBean("txImpl");
            try {
                log.error("cur : " cur.getTransactionManager().getTransaction());
        } catch (SystemException e) {
            log.error(e.getMessage(), e);
        } 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:37:40.263

一种方法可能是使用[Apache TomEE](http://openejb.apache.org/apache-tomee.html)，它是已经集成了 TransactionManager 的 Tomcat。编写一个简单的 Spring factory bean 来交给 Spring TransactionManager 和 UserTransaction。

两者都可以从 JNDI 中查到：

*   `java:comp/TransactionManager`
*   `java:comp/UserTransaction`

该工厂将替换上述配置中的工厂：

```
<bean id="txImpl" class="org.foo.MyTransactionFactoryBean" /> 
```

不过，很可能 Spring 已经有了一个工厂 bean，用于通过这些名称查找 TransactionManager。

# apache - htaccess https/http 重定向问题

> ID：10579725
> 
> 赞同：0
> 
> 时间：2012-05-14T08:21:09.217
> 
> 标签：apache, .htaccess

我正在尝试将 HTACCESS 用于 http 和 https 的重定向链接。

这是我的 HTACCESS 代码：

```
RewriteRule ^go/(https:\/*)*(.+)$ https://$2 [L,R=301]
RewriteRule ^go/(http:\/*)*(.+)$ http://$2 [L,R=301] 
```

当我使用 https 链接时，它工作正常：

```
http://mywebsite.com/go/https://facebook.com 
```

导致`https://facebook.com`

但是由于某种原因，当我使用 http 时，它会像 https 一样读取它，这就是发生的情况： `http://website.com/go/http://facebook.com`导致`https://http/facebook.com`

我究竟做错了什么？

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:11:58.553

不太清楚为什么你想自己链接到外部网站作为虚假链接，但是好的..

您可能可以将它们浓缩为 1 条规则，例如：

> RewriteRule ^go/(http(s?):/{1,2})(.+)$ http$2://$3 [R=301,L]

# javascript - 在 HTML5 Canvas 上未触发 TouchEnd 事件

> ID：10579726
> 
> 赞同：2
> 
> 时间：2012-05-14T08:21:10.573
> 
> 标签：javascript, html, canvas

我正在开发 HTML5 Canvas 上的素描应用程序。我在画布上添加了“Touch Listeners”。

但只有 touchstart 和 touchmove 事件被触发。Touchend 不会被解雇。谁能解释为什么以及解决方法是什么？

```
<script type="text/javascript" charset="utf-8"> 

    var canvas ;
    var context ;

    // create a drawer which tracks touch movements
    var drawer = {
        isDrawing: false,
            touchstart: function(coors){
            context.beginPath();
            context.moveTo(coors.x, coors.y);
            this.isDrawing = true;
        },
        touchmove: function(coors){
            if (this.isDrawing) {
                context.lineTo(coors.x, coors.y);
                current_stroke+= coors.x+','+coors.y+';';
                context.stroke();

            }
        },
        touchend: function(coors){

            if (this.isDrawing) {
                context.lineTo(coors.x, coors.y);
                current_stroke+= coors.x+','+coors.y+';';
                context.stroke();
                this.isDrawing = false;

            }
        }
    };  // end of drawer 

    // create a function to pass touch events and coordinates to drawer
    function draw(event){
        // get the touch coordinates
        var coors = {
            x: event.targetTouches[0].pageX,
            y: event.targetTouches[0].pageY
        };
        // pass the coordinates to the appropriate handler
        drawer[event.type](coors);
    }

$(document).ready(function() {
    // get the canvas element and its context
    canvas = document.getElementById('sketchpad');
    context = canvas.getContext('2d');
    context.lineWidth = 5;
    context.strokeStyle = 'blue';

    // attach the touchstart, touchmove, touchend event listeners.
    canvas.addEventListener('touchstart',draw, false);
    canvas.addEventListener('touchmove',draw, false);
    canvas.addEventListener('touchend',draw, false);

    // prevent elastic scrolling
    document.body.addEventListener('touchmove',function(event){
        event.preventDefault();
    },false);   // end body.onTouchMove

});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:30:07.457

这可能有点晚了，但这里......

Touchend 事件不会注册 x 和 y 屏幕位置，因为实际上在触发时您的手指并没有放在屏幕上，并且它无法调用最后一个已知的屏幕位置。

尝试使用这样的方法...

在您的 touchmove 函数中 - 如果您像这样捕获当前的 x 和 y 坐标：this.lastCoors = {coors.x, coors.y} 您将能够在您的 touchend 函数中使用它们来替换当前的坐标值

或者，重新设计您的代码可能是明智之举，这样您的 Touchend 函数就不再需要同时使用 coors.x 和 y 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:56:04.140

我做了什么作为解决方案

我创建了一个函数并调用它而不是 draw ，它有效

```
function ended(){
  /*  your code here */
    }
     canvas.addEventListener('touchend',ended, false); 
```

# php - Symfony2 自定义存储库不工作

> ID：10579727
> 
> 赞同：2
> 
> 时间：2012-05-14T08:21:15.040
> 
> 标签：php, symfony, doctrine-orm

我已经遵循了书中的每一步，但我无法使用任何实体自定义存储库。

例如，我有我的用户实体：

```
/**
 * @ORM\Table("fos_user")
 * @ORM\Entity(repositoryClass="XXX\UserBundle\Repository\UserRepository")
 */
class User extends BaseUser implements ParticipantInterface
{
} 
```

它的存储库类：

```
namespace XXX\UserBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * UserRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class UserRepository extends EntityRepository
{

    public function initializeUser()
    {
        //some logic
    }

} 
```

但是当我调用 $user->initializeUser(); 我收到**致命错误：调用未定义的方法 XXX\UserBundle\Entity\User::initializeUser()**，因此很明显它无法识别自定义存储库，即使我已经在实体类上声明了它。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T08:46:04.160

自定义存储库不会向 Entity 对象添加方法。

`$em`要使用实体管理器调用您的自定义方法：

```
$em->getRepository('UserBundle:User')->initializeUser(), 
```

# svn - 是否可以将 p4convert-svn 与正在运行的 Perforce 服务器一起使用，该服务器需要密码才能访问 Perforce 服务器

> ID：10579729
> 
> 赞同：0
> 
> 时间：2012-05-14T08:21:19.137
> 
> 标签：svn, perforce

在关于如何使用 p4convert-svn 的 wiki 文档：[如何使用 p4convert-svn](ftp://ftp.perforce.com/perforce/tools/p4convert-svn/p4convert-svn.html#section4)中，声明它仅适用于不需要安全/密码的 Perforce 服务器。

我正在尝试的 perforce 服务器需要用户名和密码来验证服务器。那么是否有可能以该工具在需要密码的 perforce 服务器上工作的方式配置 config.txt？

目前，当我运行 jar 文件时，我遇到了 com.perforce.p4java.exception.RequestException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:56:12.517

最好的办法是将转换器运行到一个新的、空的 Perforce 存储库中，并将安全级别设置为 0（无身份验证）。然后，在迁移成功完成后，您可以使用 perfmerge 工具将结果合并到您的实时服务器中。

# php - 在php中将图像保存在字节数组中

> ID：10579734
> 
> 赞同：4
> 
> 时间：2012-05-14T08:21:31.810
> 
> 标签：php, bytearray

如何将图像文件保存到字节数组中。我将图像文件作为base64发布到服务器。和tehn转换为jpg。但我不知道如何从 JPG 转换为 bytearray

```
$base=$_POST["image"];

$binary=base64_decode($base);
$file = fopen("image.jpg", "w");
fwrite($file, $binary);
fclose($file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:26:12.207

您需要以二进制模式打开文件...

```
$file = fopen("image.jpg", "wb"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:26:35.410

试试这个`imagecreatefromstring()`功能：[http ://us.php.net/manual/en/function.imagecreatefromstring.php](http://us.php.net/manual/en/function.imagecreatefromstring.php)

（该页面上的示例与您的代码非常相似）

# c++ - 如何在win32 C++中创建自定义形状控件

> ID：10579737
> 
> 赞同：0
> 
> 时间：2012-05-14T08:21:51.793
> 
> 标签：c++, winapi, visual-c++, graphics

我想创建一个带有圆形边缘的编辑框。我不能使用标准编辑框控件，因为它会绘制矩形编辑框。

任何建议或指示如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:34:14.883

你有几个选择： -

1.  创建一个父控件并在其中有一个子无边框文本编辑控件
2.  子类一个文本编辑控件并重载 NC_PAINT 以绘制边框

**更新**

在弄乱了一个示例程序之后，我逐渐意识到子类编辑控件并没有真正起作用，并且在线检查证实了这一点（感谢 MS 如此一致！）。

所以只剩下选项 1 和选项 3（只是想到它）：

1.  创建自己的编辑控件

以下是方法 1 的示例：

```
#include <windows.h>

LRESULT __stdcall EditboxProc (HWND window, unsigned message, WPARAM w_param, LPARAM l_param)
{
  bool
    use_default = true;

  LRESULT
    result = 0;

  switch (message)
  {
  case WM_CREATE:
    {
      RECT
        client;

      GetClientRect (window, &client);

      HWND
        edit = CreateWindowEx (0,
                               TEXT ("Edit"),
                               0,
                               WS_VISIBLE | WS_CHILD,
                               10,
                               10,
                               client.right - 20,
                               client.bottom - 20,
                               window,
                               0,
                               GetModuleHandle (0),
                               0);

      SetWindowLongPtr (window, GWLP_USERDATA, static_cast <LONG> (reinterpret_cast <LONG_PTR> (edit)));
    }
    break;

  case WM_SIZE:
    {
      RECT
        client;

      GetClientRect (window, &client);
      SetWindowPos (reinterpret_cast <HWND> (static_cast <LONG_PTR> (GetWindowLongPtr (window, GWLP_USERDATA))), 0, 10, 10, client.right - 20, client.bottom - 20, SWP_NOZORDER | SWP_NOOWNERZORDER);

      use_default = false;
    }
    break;
  }

  return use_default ? DefWindowProc (window, message, w_param, l_param) : result;
}

LRESULT __stdcall WindowProc (HWND window, unsigned message, WPARAM w_param, LPARAM l_param)
{
  bool
    use_default = true;

  LRESULT
    result = 0;

  switch (message)
  {
  case WM_CREATE:
    {
      RECT
        client;

      GetClientRect (window, &client);

      CreateWindowEx (0,
                      TEXT ("EditboxClass"),
                      0,
                      WS_VISIBLE | WS_CHILD,
                      client.right / 4,
                      client.bottom / 2 - 20,
                      client.right / 2,
                      40,
                      window,
                      0,
                      GetModuleHandle (0),
                      0);
    }
    break;
  }

  return use_default ? DefWindowProc (window, message, w_param, l_param) : result;
}

int __stdcall WinMain (HINSTANCE instance, HINSTANCE prev_instance, LPSTR command_line, int show)
{
  WNDCLASSEX
    window_class = 
    {
      sizeof window_class,
      0,
      WindowProc,
      0,
      0,
      instance,
      0,
      0,
      reinterpret_cast <HBRUSH> (static_cast <int> (COLOR_WINDOW) + 1),
      0,
      TEXT ("WindowClass"),
      0
    },
    editbox_class = 
    {
      sizeof editbox_class,
      0,
      EditboxProc,
      0,
      0,
      instance,
      0,
      0,
      reinterpret_cast <HBRUSH> (static_cast <int> (COLOR_BTNFACE) + 1),
      0,
      TEXT ("EditboxClass"),
      0
    }; 

  if (RegisterClassEx (&window_class) && RegisterClassEx (&editbox_class))
  {
    HWND
      window = CreateWindowEx (0,
                               TEXT ("WindowClass"),
                               TEXT ("Demo"),
                               WS_OVERLAPPEDWINDOW | WS_VISIBLE,
                               CW_USEDEFAULT,
                               CW_USEDEFAULT,
                               CW_USEDEFAULT,
                               CW_USEDEFAULT,
                               0,
                               0,
                               instance,
                               0);

    if (window)
    {
      MSG
        message;

      bool
        quit = false;

      while (!quit)
      {
        switch (GetMessage (&message, window, 0, 0))
        {
        case -1:
        case 0:
          quit = true;
          break;

        default:
          TranslateMessage (&message);
          DispatchMessage (&message);
          break;
        }
      }
    }
  }

  return 0;
} 
```

这有点简单，但应该让你知道如何做你想做的事。它不适用于使用资源脚本定义的对话框（我认为，自从我手动编码资源以来已经有一段时间了），因为它对编辑框的父级（渲染框架的东西）使用了自定义控件。您可能希望将处理程序添加到 EditboxProc 以处理传入和传出编辑控件的消息（如 WM_NOTIFY、WM_COMMAND、WM_GETTEXT 等）并渲染圆角（WM_PAINT、WM_ERASEBKGND）。

# c++ - Boost Python：多态容器？

> ID：10579739
> 
> 赞同：5
> 
> 时间：2012-05-14T08:22:04.790
> 
> 标签：c++, python, boost, polymorphism, boost-python

我有一个方法（或函数），它返回对多态对象列表的引用：

```
class A {

};
class B : public A {

};

std::list<boost::shared_ptr<A> >& getList(); 
```

如何在 boost::python 中公开这样的函数，以便在 python 中迭代列表时，我会看到不同类型的`A`s 和`B`s ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T15:50:36.353

首先，确保你的类确实是多态的（即它们至少有一个虚函数或虚析构函数）。您上面的示例没有，但我确信您的真实用例确实如此。没有它，Boost.Python 的基于 RTTI 的多态机制将无法工作。

然后，如果您使用 Boost.Python 公开了这两个类并`shared_ptr`为它们注册了转换器：

```
#include <boost/python.hpp>

namespace bp = boost::python;

BOOST_PYTHON_MODULE(example) {
    bp::class_<A >("A");
    bp::register_ptr_to_python< boost::shared_ptr<A> >();
    bp::class_< B, bp::bases<A> >("B");
    bp::register_ptr_to_python< boost::shared_ptr<B> >();
} 
```

...这就是您需要做的所有事情，以确保 Python 只看到最派生的类型。没有必要做任何特别的事情来确保在可能的情况下`A`被投射到`B`。

这仍然留下了如何包装返回容器的函数的问题。最简单的可能是使用 Boost.Python 附带的索引套件：

[http://www.boost.org/doc/libs/1_49_0/libs/python/doc/v2/indexing.html](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/v2/indexing.html)

网络上还有其他选项（包括索引套件的“版本 2”，它在许多方面都更好，但不包含在 Boost.Python 中），但对于简单的问题，这可能是最方便的。

# ruby-on-rails-3 - 启动 sunspot solr 服务器失败

> ID：10579744
> 
> 赞同：0
> 
> 时间：2012-05-14T08:22:25.367
> 
> 标签：ruby-on-rails-3, sunspot

我在启动太阳黑子服务器时遇到问题。上周它就像一个魅力，但现在当我运行 rake sunspot:solr:run 时出现错误

我的输出使用 --trace

```
C:\contractbeheersysteem2>rake sunspot:solr:run --trace
** Invoke sunspot:solr:run (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute sunspot:solr:run
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-b22)
Java HotSpot(TM) Client VM (build 23.0-b21, mixed mode, sharing)
2012-05-14 10:10:28.077::INFO:  Logging to STDERR via org.mortbay.log.StdErrLog
2012-05-14 10:10:28.374::INFO:  jetty-6.1.3
2012-05-14 10:10:28.670::INFO:  Extract jar:file:/H:/RailsInstaller/Ruby1.9.3/li
b/ruby/gems/1.9.1/gems/sunspot_solr-1.3.1/solr/webapps/solr.war!/ to C:\DOCUME~1
\ksonnema\LOCALS~1\Temp\Jetty_0_0_0_0_8982_solr.war__solr__-2c5peu\webapp
[Fatal Error] :107:17: Open quote is expected for attribute "{1}" associated wit
h an  element type  "name".
2012-05-14 10:10:31.577::INFO:  Started SocketConnector @ 0.0.0.0:8982 
```

希望有人知道是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:29:13.910

删除了位于您的应用程序根目录中的 solr 映射。并再次运行 rake sunspot:solr:run。现在将在根目录中创建一个新的 solr 映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:17:24.750

我自己也遇到了这个问题，Kees 建议的修复方法对我不起作用。在 ubuntu 上，我只需升级我的 JRE 即可解决问题。运行命令`sudo apt-get install openjdk-version-here`为我处理了更新。

检查您的系统监视器以确保陈旧的 solr 实例尚未运行也是值得的。

# objective-c - Objective C：switch inside loop - 如何避免（潜在的）内存泄漏

> ID：10579746
> 
> 赞同：0
> 
> 时间：2012-05-14T08:22:44.643
> 
> 标签：objective-c, release, switch-statement, autorelease, alloc

我有一个 for 循环，在开始时声明一个 NSObject“值”，然后实际创建“值”中的 switch 语句。那么“值”可以是 NSNumber、NSDate、NSData、NSString 或 nil。这是代码：

```
for (int i = 0; i < self.columnCount; i++) {
  NSObject *value;
  switch (mysql_fields[i].type) {
    case ...
      ...
    case MYSQL_TYPE_LONG:
      value = [[NSNumber alloc] initWithInt:atoi(row[i])];
      /* [value autorelease]; */  // 2)
      break;
    case MYSQL_TYPE_DECIMAL:
      NSString *decimal = [[NSString alloc] initWithCString:(char *)row[i] encoding:NSUTF8StringEncoding];
      value = [[NSDecimalNumber alloc] initWithString:decimal];
      /* [value autorelease]; */  // 2)
      [decimal release];
      break;
    case ...
      ...
  } // end of switch
} end of for
Field *field = [[[Field alloc] initWithRecord:record] autorelease];
/* [value autorelease]; */  // 3)
[field setValue:value forKey:@"value"];
/* [value release]; */  // 4) 
```

现在我不知道如何释放“价值”。这是我尝试过的以及相应的 Xcode 4“分析器”消息：

1.  没有释放->“潜在泄漏”
2.  [value autorelease] 在每个 case 语句中的 alloc/init 之后->“对象发送自动释放太多次”
3.  [value autorelease] 直接在最后一次使用之前 -> “对象发送 autorelease 太多次”
4.  [值释放] 最后一次使用后->“此时不由调用者拥有的对象的引用计数递减不正确”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:25:25.843

仅在分配对象的地方添加自动释放，删除其余部分：

```
value = [[[NSNumber alloc] initWithInt:atoi(row[i])] autorelease];
// ....
value = [[[NSDecimalNumber alloc] initWithString:decimal] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:31:57.230

您`value`在 for 循环内声明，因此您必须在切换后但在 for 循环内释放它。

```
for (int i = 0; i < self.columnCount; i++)
{
    NSObject *value;
    switch (mysql_fields[i].type)
    {
        case ...
            ...
        case MYSQL_TYPE_LONG:
            value = [[NSNumber alloc] initWithInt:atoi(row[i])];
            break;
        case MYSQL_TYPE_DECIMAL:
            NSString *decimal = [[NSString alloc] initWithCString:(char *)row[i] encoding:NSUTF8StringEncoding];
            value = [[NSDecimalNumber alloc] initWithString:decimal];
            [decimal release];
            break;
        case ...
            ...
    }
    Field *field = [[[Field alloc] initWithRecord:record] autorelease];
    [field setValue:value forKey:@"value"];
    [value release];
} 
```

# php - Windows上的PHP cURL SSL错误

> ID：10579748
> 
> 赞同：0
> 
> 时间：2012-05-14T08:22:49.327
> 
> 标签：php, windows, ssl, curl

我对使用 Windows 的 PHP 和 cURL 有一个奇怪的问题。

如果有对 https 资源的 cURL 调用。直到今天早上一切都很顺利。现在 cURL 在请求 URL 时会抛出此错误：

```
SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

我已阅读有关 .pem 文件或禁用主机验证的信息。但我不想使用它们中的任何一个，因为我想知道是什么导致了问题。

直到今天，cURL 是如何验证 URL 的？它是否使用一些系统 CA 信息？我在最后一天没有对 PHP 或 cURL 进行任何更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:26:54.097

服务器的证书很可能已过期，或已被自签名证书、由您不信任的 CA 颁发的证书或颁发给错误主体的证书替换。

无论问题是什么，它都是服务器端的，与您的代码无关 - 您应该联系运营您正在使用的服务的人员并将问题告知他们。

您可以在浏览器中访问 URL 以轻松检查证书 - 浏览器很可能会给您一个很好的人类可读消息，告诉您确切的问题是什么，因为它也无法验证证书。

一旦您联系了服务提供商以确认他们的证书确实存在问题，这不是有人试图欺骗您使用错误的服务器的情况（毕竟，这是 SSL 的主要目的之一) 您可以跳过对服务器证书的验证作为临时修复。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-14T08:30:07.693

添加这个：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

我想必须更改服务器设置

# html - IE=9 兼容模式的条件注释

> ID：10579753
> 
> 赞同：0
> 
> 时间：2012-05-14T08:23:21.007
> 
> 标签：html, internet-explorer-9, conditional-comments

我正在使用以下条件注释来通知用户他们正在运行不受支持的浏览器版本。

```
<!--[if lt IE 8]>
...
<![endif]--> 
```

我注意到这条评论是在 IE9 兼容模式下被触发的——这也是我没有注意的。

有没有办法让 IE9 兼容模式成为例外，或者将它和 IE7 模式与常规 IE7 区分开来，以便我可以为它们自定义消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:10:34.777

检查兼容性模式的一种简单方法是：

```
try{ JSON } catch (e){ alert("Compatibility Mode Detected")  } 
```

这是因为 JSON 对象在兼容模式下不可用。

# javascript - HTML - 通过单击图像调用 javascript

> ID：10579754
> 
> 赞同：1
> 
> 时间：2012-05-14T08:23:30.157
> 
> 标签：javascript, html

我正在尝试通过单击图像来调用 javascript，但它不起作用。
请参阅下面的代码。

Javascript

```
<script type="text/javascript">
<!--
var image1=new Image()
image1.src="images/Image_1.png"
var image2=new Image()
image2.src="images/Image_2.png"
var image3=new Image()
image3.src="images/Image_3.png"
//-->

  function login(showhide){
    if(showhide == "show"){
        document.getElementById('popupbox').style.visibility="visible";
    }else if(showhide == "hide"){
        document.getElementById('popupbox').style.visibility="hidden"; 
    }
  }
  </script> 
```

我的代码

```
<div id="apDiv21"><img src="images/Login_OnOut.png" width="71" height="44" 
onmouseover="this.src='images/Login_OnRollover.png'" 
  onmouseout="this.src='images/Login_OnOut.png'" onclick="login('show');" />

  <div id="popupbox"> 
<form name="login" action="" method="post" style="background-color:#C7C7C7">
<center>Username:</center>
<center><input name="username" size="14" /></center>
<center>Password:</center>
<center><input name="password" type="password" size="14" /></center>
<center><input type="submit" name="submit" value="login" /></center>
</form>
<center><a href="login('hide');">close</a></center> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:25:59.507

看看我制作的这个 JSFiddle：

[http://jsfiddle.net/Q5asp/](http://jsfiddle.net/Q5asp/)

我更改了底部的链接以正确隐藏它。问题是当你使用`Login('show')`它时，它试图访问你的表单，因为它是同名的。您必须确保您的函数名称和名称不冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:00:05.470

`name="login"`从`form`标签中删除属性。它现在污染了名称空间，因此 JavaScript 解释器将名称`login`视为引用表单节点而不是您的函数。（由于这个原因，Firefox 控制台错误消息显示“登录不是功能”。） – 您也可以重命名表单，但通常不需要`name`表单属性。

PS您对问题所做的编辑是错误的。可点击文本的正确标记是`<a onclick="login('hide');">close</a>`（尽管为了可用性，使用按钮会更好）。

# javascript - 使用 jscript 或 ajax 仅重置 1 个 DIV

> ID：10579761
> 
> 赞同：1
> 
> 时间：2012-05-14T08:23:57.603
> 
> 标签：javascript, ajax, html, reload

我正在尝试重新加载 DIV 而不重新加载其余部分，我在许多网站（包括这个网站）上找到了下面的脚本，但是我发现的每一个变体都不起作用，如果我在 href 中包含 # 它什么都不做，如果我删除它会重新加载整个页面

```
$(function() {
  $("#refresh").click(function(evt) {
     $("#scratcher-box").load("index.php")
  })
})

<a href="#" id="refresh">click</a> 
```

尝试禁用我正在运行的许多其他迷你脚本、切换 div、延迟加载和计数。拥有 JQuery 1.7.2 加载器以及[http://dl.dropbox.com/u/31213713/scratcher.js](http://dl.dropbox.com/u/31213713/scratcher.js)，其中一些更改破坏了包含的重置按钮。我的 jscrips 很糟糕，所以寻找一个备份计划以防我们无法修复重置，这是原始的[http://dl.dropbox.com/u/31213713/scratcher_orig.js](http://dl.dropbox.com/u/31213713/scratcher_orig.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:28:57.543

可能您应该阻止默认链接操作：

```
$(function() {
  $("#refresh").click(function(evt) {
     evt.preventDefault();
     $("#scratcher-box").load("index.php")
  })
}) 
```

然后确保`#scratcher-box`在页面中有一个元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:31:22.083

~~一方面：您可能希望在函数调用中返回 false，因为您不希望执行 href。在函数中返回 false 将禁用您包装点击的元素的默认执行（在这种情况下执行 href）。~~

第二：您正在尝试将 index.php 加载到带有 id 刮板框的元素中，这似乎不存在？您要么忘记创建这样的元素，要么没有发布完整的代码。尝试以下操作：

```
<a href="#" id="refresh">click</a>
<div id="scratcher-box" />

<script type="text/javascript">
  $(function() {
    $("#refresh").click(function(evt) {
      $("#scratcher-box").load("index.php")
      return false;
    })
  })
</script> 
```

 ~~审查问题后：我已经检查了在 Dropbox 上使用您的文件，问题不在于 click 事件或该事件的调用中，问题在于 Scratcher.js 文件中的更改。

您已将 javascript 调用中的“Scratcher”对象的数量从 3 个更改为 20 个。但是，一旦脚本尝试获取 Scratcher4 的宽度，它就会在第 192 行引发错误，因为没有 ID 为 Scratcher4 的画布元素。

加载文档时会引发此错误，这导致 javascript 除了等待您修复该错误并添加这些画布元素外，无法执行任何其他操作。

除了将划痕添加到 javascript 对象中，还可以在 HTML 中创建画布项。这可以修复您的错误，并使 javascript 能够执行 .click 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:35:10.457

您可以使用以下代码：通过添加 preventDefault 您可以阻止锚标记的默认操作

```
$(function() {
  $("#refresh").on('click', function(e) {
     e.preventDefault();
     $("#scratcher-box").load("index.php");
  });
}); 
```~~

# xcode - 开始/结束外观转换的不平衡呼叫

> ID：10579762
> 
> 赞同：1
> 
> 时间：2012-05-14T08:23:57.893
> 
> 标签：xcode, login, uisplitviewcontroller, loginview

我在我的 iPad 应用程序上使用了 splitViewController，但在此之前，我有一个登录名，并且在成功通过身份验证后，我刷新了根视图和详细视图。问题是，一旦我加载主视图没有任何反应，我尝试推送任何视图并且没有事件。

当我以模态方式加载登录视图时，我收到此错误：“开始/结束外观转换的不平衡调用

我使用以下方法在主视图（frontViewController）中进行登录视图：

```
-(void)displayLoginView:(BOOL)animated{
 LoginView *loginController = [[LoginView alloc] initWithNibName:@"LoginView" bundle:nil];
[self presentModalViewController:loginController animated:YES]; 
```

}

```
- (void)viewDidLoad{
 [super viewDidLoad];

//Add logout button 
```

self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Logout" style:UIBarButtonItemStyleBordered target:self action:@selector(logout)]; //如果还没有登录，显示登录视图 [self displayLoginView:NO]; }

```
-(void)logout{
[self displayLoginView:YES]; 
```

}

和 appdelegate.m ：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

FrontViewController *frontViewController;

RearViewController *rearViewController;

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){

 frontViewController = [[FrontViewController alloc]           initWithNibName:@"FrontViewController_iPhone" bundle:nil];

 rearViewController = [[RearViewController alloc] initWithNibName:@"RearViewController_iPhone" bundle:nil];
}
else{
    frontViewController = [[FrontViewController alloc] initWithNibName:@"FrontViewController_iPad" bundle:nil];

    rearViewController = [[RearViewController alloc] initWithNibName:@"RearViewController_iPad" bundle:nil];
}

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:frontViewController];
    RevealController *revealController = [[RevealController alloc] initWithFrontViewController:navigationController rearViewController:rearViewController];
self.viewController = revealController;
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES; 
```

}

有人可以帮助我吗？

非常感谢提前！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T10:00:17.150

检查你的`viewWillAppear:animated:, viewDidAppear:animated:, viewWillDisappear:animated:, and viewDidDisappear:animated:`方法，要么你不实现它们，要么你必须调用[super viewDid ....]。我有相同的 pb，原因是 shouldAutoRotateToInterfaceOrientation ：其中一个返回 false 而其他返回 true，我将它们设置为返回相同的，没关系。

# ios - 为什么在搜索模型文件的路径时扩展名是“momd”而不是“xcdatamodel”

> ID：10579767
> 
> 赞同：50
> 
> 时间：2012-05-14T08:24:23.880
> 
> 标签：ios, core-data

我使用 Core Data 创建了一个 Master-Detail 应用程序。并且有一个简单的代码来获取模型文件的路径：

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"]; 
```

我不知道为什么扩展名不是“xcdatamodel”而是“momd”。

有人知道答案吗？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-05-14T09:30:30.980

`mom`和`momd`文件是`xcdatamodel`和文件的编译版本`xcdatamodeld`。

[这里](http://www.warrenworks.com/ITP_137/References/CoreData.pdf)有关于编译过程如何工作的信息（第 31 页）。引用文档：

> 数据模型是一种部署资源。除了模型中实体和属性的详细信息之外，您在 Xcode 中创建的模型还包含有关图表的信息——它的布局、元素的颜色等等。运行时不需要后面的信息。使用模型编译器编译模型文件`momc`，以删除无关信息并使资源的运行时加载尽可能高效。

# c# - ASP.Net SiteMap URL 区别

> ID：10579771
> 
> 赞同：-1
> 
> 时间：2012-05-14T08:24:43.417
> 
> 标签：c#, asp.net, sitemap

我有一个我继承的 Web 应用程序，它包含一个页面，该页面根据传递给它的对象的状态决定您需要访问哪个 URL。

URL 保存在站点地图中，并且有一种方法可以检索所有这些。

```
private Dictionary<string, string> GetUrls() {
    var urls = new Dictionary<string, string>();
    var provider = SiteMap.Provider;

    var page1 = provider.FindSiteMapNodeFromKey("page1");
    var page2 = provider.FindSiteMapNodeFromKey("page2");

    if (page1 == null || page2 == null)
    {
        throw new ApplicationException("Pages not found in sitemap");
    }

    urls["page1URL"] = page1.Url.ToString(CultureInfo.InvariantCulture);
    urls["page2URL"] = page2.Url.ToString(CultureInfo.InvariantCulture);

    return urls;
} 
```

不幸的是，在这种方法中，page1 和 page2 始终为 null

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" enableLocalization="true">
    <siteMapNode resourceKey="Concessions" rule="AllowRead">
        <siteMapNode url="/page1.aspx" resourceKey="page1" rule="AllowAuthorised"/>
        <siteMapNode url="/page2.aspx" resourceKey="page2" rule="AllowAuthorised"/>
    </siteMapNode>
</siteMap> 
```

我试图通过这个过程进行调试，但我没有得到任何解决问题的地方。所以回顾一下，我需要这个方法来返回站点地图中定义的页面的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:27:12.417

完全不相关的错误，抱歉浪费您的时间

# java - 创建子类的对象

> ID：10579772
> 
> 赞同：-2
> 
> 时间：2012-05-14T08:24:43.740
> 
> 标签：java, android

我有`MyClass mc=new MyClass();`，我需要访问子类：`mc.Sub.Check()`。

[https://stackoverflow.com/a/488749/1234275](https://stackoverflow.com/a/488749/1234275) - 在这种情况下不起作用。

```
public class MyClass {
  public onCreate() {
    super();
  }
  Public class Sub {
    public void Check() {
      //
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:28:23.420

您可以像任何其他类一样启动内部类，即`new MyClass.Sub`，然后调用该方法。如果要跳过启动，则必须将嵌套类声明为静态。

（另外：非静态内部类的实例只能存在于包含类的实例的上下文中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:31:35.123

您只需要像普通类一样创建内部类的对象。在上述情况下，您可以按照以下方式进行。

子子 = 新子（）；

子检查（）；

把上面的代码放在 onCreate();

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:35:42.720

仅使用类名调用**静态方法，要么将方法设为静态，要么在外部类中****创建**内部类的实例以及带有实例的所有方法。

# sql - SQL 选择行取决于上次选择的时间

> ID：10579773
> 
> 赞同：0
> 
> 时间：2012-05-14T08:24:53.097
> 
> 标签：sql, sql-server, sql-server-2005, select, time

我有一张看起来像这样的桌子

```
id   |   refreshTime   |   lastRanAt             |   otherFeilds
1    |   60            |   2012-05-14 14:25:08   |   somthing
2    |   30            |   2012-05-14 15:25:08   |   something else
3    |   20            |   2012-05-03 16:25:08   |   foo 
```

我想返回“lastRanAt”日期时间小于 currentTime 减去 refreshTime 的结果（refreshTime 以分钟为单位）

这可以在一个查询中完成吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:40:55.160

像这样的东西？

```
select * 
from Table t
where lastRanAt < dateadd(mi, (t.refreshTime * -1), getdate()) 
```

[SQL小提琴](http://sqlfiddle.com/#!3/6b06c/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:33:13.890

编辑：

```
select * 
from your_table
where lastRanAt < dateadd(mi, refreshTime * -1 , getdate()) 
```

# c# - 在组框窗口窗体中使用 LINQ 进行复选框验证

> ID：10579775
> 
> 赞同：1
> 
> 时间：2012-05-14T08:25:15.400
> 
> 标签：c#, linq

我发现可以验证 linq 是否选择了复选框。

我得到了像这样的代码

```
btnAgree.Enabled = (from chkbox in Controls.OfType<CheckBox>() select chkbox).Count(b => b.Checked) >= 2; 
```

但我的情况就像我的获胜表单上有很多复选框，但我想检查我的组框内的任何复选框都被 LINQ 选中。有可能吗，但我还是没有办法。请帮我写代码。

我有一个有点相似的小代码。代码如下

```
public static IEnumerable<T> AllControls<T>(this Control startingPoint) where T : Control
{
 bool hit = startingPoint is T;
 if (hit)
 {
    yield return startingPoint as T;
 }
 foreach (var child in startingPoint.Controls.Cast<Control>())
 {
    foreach (var item in AllControls<T>(child))
    {
       yield return item;
    }
 } 
```

}

```
 var checkboxes = control.AllControls<CheckBox>();
 var checkedBoxes = control.AllControls<CheckBox>().Where(c => c.Checked); 
```

但是如何自定义此代码以使其与我的所有复选框所在的组框一起使用。请指导。另一个问题是我使用的是 c# v2.0。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:31:02.080

```
btnAgree.Enabled = 
    (from chkbox in groupBox1.Controls.OfType<CheckBox>()
     select chkbox).Count(b => b.Checked) >= 2; 
```

您正在检查表单的控件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T08:32:51.360

您不需要使用表单的控件集合，您可以使用[GroupBox 的控件集合](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)：

```
btnAgree.Enabled = GroupBox1.Controls.OfType<CheckBox>()
                  .Where(chk => chk.Checked)
                  .Count() >= 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T08:36:36.993

如果您需要递归（假设您的 GroupBox 中有一个面板，并且复选框已添加到面板中），我认为您的扩展方法仍然有用

改变了一点

```
public static IEnumerable<T> AllControls<T>(this Control startingPoint) where T : Control
        {
            if (startingPoint is T)
                yield return startingPoint as T;

            foreach (var item in startingPoint.Controls.Cast<Control>().SelectMany(AllControls<T>))
                yield return item;
        } 
```

用法 ：

```
var list = groupBox1.AllControls<CheckBox>();
var listChecked = list.Where(m => m.Checked); 
```

# c# - 如何更改 MVC2 的验证消息？

> ID：10579779
> 
> 赞同：1
> 
> 时间：2012-05-14T08:25:26.390
> 
> 标签：c#, asp.net, jquery-ui, validation, asp.net-mvc-2

我正在用 C# 和 ASP.NET 构建一个 MVC2 项目。在我的一种形式中，我有一个接受“时间”值的字段。该字段正在使用 JQuery UI 时间选择器，但它仍然允许用户自己输入文本（这是正确的并且需要这种方式）。但是，当用户输入的值不是有效的“时间”格式时，会显示如下错误消息：

```
The value 'garbage' is not valid for StartTime. 
```

我需要将此验证消息更改为其他内容。我该怎么做呢？在模型中，字段如下：

```
 public TimeSpan? StartTime { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:41:53.110

我有同样的问题。下面链接到我的帖子： [http](http://forums.asp.net/t/1718498.aspx/1?Validation+Message) ://forums.asp.net/t/1718498.aspx/1?Validation+Message ，看标记的答案，用两个词你需要： http: [//mvccontrolstoolkit.codeplex.com/ wikipage?title=Wrong%20Format%20Errors](http://mvccontrolstoolkit.codeplex.com/wikipage?title=Wrong%20Format%20Errors) 。在我的项目中运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:30:17.460

最终，我采用的解决方案是将模型中的字段转换为“字符串”类型，并使用 TimeSpan.Parse 和“Try Catch”自己处理数据验证。这不是最好的解决方案，但它胜过涉及自定义验证器和第三方模块。

# codeigniter - 将 RESTful 服务器部署到 CentOS

> ID：10579792
> 
> 赞同：1
> 
> 时间：2012-05-14T08:26:27.763
> 
> 标签：codeigniter, rest, basic-authentication

我正在使用[Phil Sturgeon 的 library](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)构建一个 RESTful 服务。它在本地主机（Windows 7，WAMP 服务器）上就像一个魅力。但是在 Web 服务器 (CentOS) 上部署时，我无法获得基本身份验证。我尝试在第 880 行修改 REST_Controller.php：

```
protected function _check_login($username = '', $password = NULL)
{
    $this->response(array("username"=>$username, "password"=>$password));
    if (empty($username))
    {
        return FALSE;
    }
... 
```

响应中的用户名和密码均为空。谁能告诉我如何解决这个问题？提前致谢！

**[更新]** 我在这里找到了答案：[http ://www.sslcatacombnetworking.com/articles/http-authentication-php-cgi.html](http://www.sslcatacombnetworking.com/articles/http-authentication-php-cgi.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:45:06.240

我在这里找到了答案：[http](http://www.sslcatacombnetworking.com/articles/http-authentication-php-cgi.html) ://www.sslcatacombnetworking.com/articles/http-authentication-php-cgi.html [更新]

**第 1 步：** 使用文本编辑器（如 Windows 记事本）创建纯文本文件。

**第 2 步：** 添加以下文本...

```
<IfModule mod_rewrite.c>
     RewriteEngine on
     RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
</IfModule> 
```

**第 3 步：** 将文件另存为纯文本文件。将文件命名为“.htaccess”

**第 4 步：** 使用 FTP 应用程序以 ASCII 模式将 .htaccess 文件上传到您的网络空间。

第 5 步：在您的用户/通过检查例程之前，在您的 PHP 脚本中添加以下内容。

```
list($_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW']) = explode(':', base64_decode(substr($_SERVER['HTTP_AUTHORIZATION'], 6))); 
```

# zend-framework - 如何增加 max_excution 时间？

> ID：10579795
> 
> 赞同：0
> 
> 时间：2012-05-14T08:26:47.827
> 
> 标签：zend-framework, memcached

我想为 10 个表中的所有数据生成一个包含 url 或链接的表。

我创建了一个表（contentUrl），然后从每个表中获取 id 和 name，为每个表中的所有数据生成 url，最后将这些 url 插入到 contentUrl 表中。

当代码执行时，我发现了这个错误：

> 致命错误：path/Doctrine/Cache/Memcache.php 中的最大执行时间超过 30 秒**

我该如何解决这个错误？我可以增加 Memcache 的内存或执行时间吗？我正在使用 Zend 框架

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:30:59.133

你可以用这个

```
set_time_limit(0); 
```

但我想，您的内存缓存服务器无法访问。检查您的内存缓存服务器详细信息。

# android - 如何以及在何处将 sqlite(.db) 文件添加到 android 项目中

> ID：10579798
> 
> 赞同：31
> 
> 时间：2012-05-14T08:26:55.790
> 
> 标签：android, sqlite

我是安卓新手。现在，我正在尝试使用数据库。我有很多关于操作 Sqlite 数据库操作的教程。但我怀疑我应该在哪里将 .db 文件添加到应用程序中。在 IDE 的包资源管理器窗口中，我需要在哪个文件夹组下添加 .db 文件？我希望你能理解我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-14T08:30:29.353

如果您已经有**.db**文件，则将该文件放在**assets**文件夹或**raw**文件夹中

然后，您必须将该文件复制到路径**/your.package.name/data/data**目录以供进一步使用。

否则，您可以使用代码创建新数据库...

看[这个](http://www.vogella.com/articles/AndroidSQLite/article.html)例子....

# java - 使用 ArrayList 中的数据加载 JTable

> ID：10579802
> 
> 赞同：0
> 
> 时间：2012-05-14T08:27:05.043
> 
> 标签：java, swing, arraylist, hashmap, jpanel

我试图让 JTable 从存储在 ArrayList 中的数据中加载 HashMaps。代码看起来像

```
private ArrayList<HashMap> menuLijst;
private JPanel tablePanel;
//some init
tablePanel = new JPanel(); 
```

然后，这是一些随机数据，只是为了确保它有效。

```
this.menuList = new ArrayList();
// hashmap
HashMap hm1 = new HashMap();
HashMap hm2 = new HashMap();
hm1.put("question", "Contact");
hm1.put("query", "select contact from tim");
hm1.put("message", "contact");
hm2.put("question", "Sales");
hm2.put("query", "select sales from tim");
hm2.put("message", "sales");
menuList.add(hm1);
menuList.add(hm2); 
```

所以这就是我的 HashMap 的样子，这有点多余，因为 JTabel 不依赖于预定义的大小数据。

总之，我的问题是，如何将 ArrayLists 中的数据与 HashMaps 放在 JTable 中。

我尝试了一些选项，但没有达到应有的效果。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:32:07.433

要么您只是创建自己的`TableModel`实现（或从一个可用类扩展），要么您必须使用另一种数据结构（请参阅可用的构造函数`DefaultTableModel`）。

但是`TableModel`，只要您找到一种机制来确定列顺序为`HashMap`无顺序，就可以直接使用此数据结构创建您的。

[Swing table 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)包含有关创建`TableModel`实例的部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:36:23.173

只需扩展[AbstractTableModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/AbstractTableModel.html)并实现以下方法：

*   获取列数
*   获取行数
*   获取值
*   获取列名

选择列的出现顺序（例如查询然后消息），并使用

```
HashMap map = menuLijst.get(row);
if (col==0)
     return map.get("query");
else if (col==1)
     return map.get("message"); 
```

实施 `getValueAt(int row, int col)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:31:00.367

jtable 使用 javabeans 的概念，hashmap 键/值对没有实现为 javabeans 属性。我会使用对类或使用键/值属性定义您自己的对类

# python - 用于执行 python 的 Bash 解析和连接参数

> ID：10579806
> 
> 赞同：1
> 
> 时间：2012-05-14T08:27:40.787
> 
> 标签：python, bash, unix, arguments

我有一个引导程序（bash），它应该在启动propper python 脚本之前过滤掉一些参数。

问题是，每当我将带有空格的字符串传递给引导程序时，一旦到达 python，它就会被破坏

例如执行

```
./myBootStrap.sh --preload "argl bargl" -j -as -argl --postload "my Test" 
```

打印这个

```
Executing myBootStrap --preload "argl bargl" -j -as -argl --postload "my Test" 
```

我的 python 脚本打印它的参数

```
got arguments ['myBootStrap','--preload', '"argl', 'bargl"', '-j', '-as', '-argl', '--postload', '"my', 'Test"'] 
```

如您所见，“argl bargl”和“my Test”被拆分为 ['"argl','bargl"'] & ['"my', 'Test"'] 而不是保持组合。

知道我的代码有什么问题吗？

多谢！

* * *

myBootStrap.sh

```
#!/bin/bash
declare -a argv
for ((i=1;i<=${#@};i+=1))
do

   arg=${@:i:1}

   if [[ "$arg" == "--preload"* ]];then
      i=$i+1
      marg=${@:$((i)):1}
      preLoadO=$arg
      preLoadA=" \"${marg}\""
      argv=("${argv[@]}" $arg)
      argv=("${argv[@]}" $preLoadA)

   elif [[ "$arg" == "--postload"* ]];then
      i=$i+1
      marg=${@:$((i)):1}
      postLoadO=$arg
      postLoadA=" \"${marg}\""
      argv=("${argv[@]}" $arg)
      argv=("${argv[@]}" $postLoadA)       
   else          
      argv=("${argv[@]}" $arg)
   fi
done

arguments=$(printf " %s" "${argv[@]}")
arguments=${arguments:1}

echo "Executing myBootStrap" $arguments 
exec myBootStrap $arguments 
```

和 python 脚本 myBootStrap

```
#!/usr/bin/env python
import sys
print 'got arguments %s'%sys.argv 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:34:01.120

引用几乎总能解决这类问题。

```
exec myBootStrap "$arguments" 
```

演示：

```
$ a='"abc def" ghi'
$ echo "$a"
"abc def" ghi
$ args $a
3 args: <"abc> <def"> <ghi>
$ args "$a"
1 args: <"abc def" ghi>
$ cat args
#! /bin/sh
# Greg Wooledge's args script
printf "%d args:" $#
printf " <%s>" "$@"
echo 
```

**编辑**：

好的，我花了一些时间分析您的 Bash 脚本实际上在做什么。只是尝试产生与给出的完全相同的参数，然后将它们传递给 Python 脚本，它经历了很多次旋转。

它可以简单地替换为：

```
exec myBootStrap "$@" 
```

但是，我认为您实际上正在那里进行一些我们看不到的其他处理。基于此，我修改了您的脚本，以便可以将其用作类似内容的基础。

```
#!/bin/bash
declare -a argv
for ((i = 1; i <= $#; i += 1))
do

   arg=${@:i:1}

   if [[ "$arg" == "--preload"* ]]; then
      marg=${@: ++i:1}
      preLoadO=$arg
      preLoadA="${marg}"
      argv+=("$arg")
      argv+=("$preLoadA")

   elif [[ "$arg" == "--postload"* ]]; then
      marg=${@: ++i:1}
      postLoadO=$arg
      postLoadA="${marg}"
      argv+=("$arg")
      argv+=("$postLoadA")
   else
      argv+=("$arg")
   fi
done

exec ./myBootStrap "${argv[@]}" 
```

参数必须作为带引号的数组传递。您已经构建了数组，但随后您使用`printf`.

请注意，数组切片已经是算术上下文，因此您不需要`$(())`在其中。我删除了单独的`i=i+1`（将字符连接起来，所以你会`1+1+1+1`在一段时间后得到），然后在数组切片中放置一个预增量。第一个加号之前的空间是必需的，因为`:+`在大括号扩展中很重要。如果您愿意，您可以像这样单独进行增量：（`((i++)); marg=${@:i:1}`当然，如果您愿意，可以在单独的行上）。

我将您的数组追加更改为更简单的`+=`形式，并为它们添加了引用。

# java - 如何在Java中实现对映射到内存的文件的并发读取？

> ID：10579808
> 
> 赞同：7
> 
> 时间：2012-05-14T08:27:52.803
> 
> 标签：java, file-io, concurrency, nio

我有许多线程同时读取同一个文件（大约 100M），并且只有一个线程来更新文件。我想将文件映射到内存中以减少 FILE I/O。如何在 Java 中做到这一点？

我基本上考虑了以下两种方法：

1.  用字节数组存储文件，多线程读取时每次创建ByteArrayInputStream读取缓冲区。
2.  用NIO获取一个文件通道，同步通道从MappedByteBuffer中读取，进行多线程读取。

我不确定这些方法是否应该有效。如果有更好的解决方案，请帮助给出一些提示。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T09:42:18.987

使用 NIO 与每个线程创建自己的映射并在自己的私有缓冲区中读取数据。保持私有缓冲区大小最佳。操作系统以页为单位读取其文件缓存中的文件，并将这些页读入私有缓冲区。如果多个线程读取相同的区域，则将从文件缓存中的相同页面读取数据，从而节省一些文件 i/o 周期。下面是一个小图来说明这一点。希望它有助于更​​好地理解。

![内存映射文件io](../Images/69ad3223cc62fe37a11546daf074ff50.png)

参考上图，下面是一些解释。文件的一个区域被映射到内存。创建映射只是一个逻辑标记，表示您要从文件的特定部分读取。创建映射后，映射区域就可以被读取了。当您开始阅读时，操作系统会将文件数据提取到文件缓存中的页面中。该区域可以映射到一个或多个页面。现在，您将页面读入自己的私有缓冲区（一次要优化多个页面）。其他一些线程可能正在读取与第一个线程相同的区域，因此它也会将相同的页面读取到其私有缓冲区中。请注意，这次读取是从文件缓存中发生的，没有页面错误。处理完私有缓冲区后，您请求进一步阅读。请注意，您一次将一部分映射读取到您的私有缓冲区中。您的文件可能是 100MB，并且您将 10MB 的一部分映射到内存；你可以有 40KB 的私有缓冲区，你首先从 10MB 中读取 40KB。然后请求下一个 40KB 等等。操作系统检查您要读取的数据是否已被提取到缓存中。如果不是，则发生页面错误，并且操作系统将请求的数据提取到页面中。同样，如果多个线程请求读取同一区域，则可以共享此数据。您可以很好地使用文件缓存本身进行读取，而不是创建自己的私有缓冲区。但是，如果跨多个区域同时读取文件多次，这可能会导致多个页面错误。因此，在这种情况下，最好有一个最佳大小的私有缓冲区。您的文件可能是 100MB，并且您将 10MB 的一部分映射到内存；你可以有 40KB 的私有缓冲区，你首先从 10MB 中读取 40KB。然后请求下一个 40KB 等等。操作系统检查您要读取的数据是否已被提取到缓存中。如果不是，则发生页面错误，并且操作系统将请求的数据提取到页面中。同样，如果多个线程请求读取同一区域，则可以共享此数据。您可以很好地使用文件缓存本身进行读取，而不是创建自己的私有缓冲区。但是，如果跨多个区域同时读取文件多次，这可能会导致多个页面错误。因此，在这种情况下，最好有一个最佳大小的私有缓冲区。您的文件可能是 100MB，并且您将 10MB 的一部分映射到内存；你可以有 40KB 的私有缓冲区，你首先从 10MB 中读取 40KB。然后请求下一个 40KB 等等。操作系统检查您要读取的数据是否已被提取到缓存中。如果不是，则发生页面错误，并且操作系统将请求的数据提取到页面中。同样，如果多个线程请求读取同一区域，则可以共享此数据。您可以很好地使用文件缓存本身进行读取，而不是创建自己的私有缓冲区。但是，如果跨多个区域同时读取文件多次，这可能会导致多个页面错误。因此，在这种情况下，最好有一个最佳大小的私有缓冲区。操作系统检查您要读取的数据是否已被提取到缓存中。如果不是，则发生页面错误，并且操作系统将请求的数据提取到页面中。同样，如果多个线程请求读取同一区域，则可以共享此数据。您可以很好地使用文件缓存本身进行读取，而不是创建自己的私有缓冲区。但是，如果跨多个区域同时读取文件多次，这可能会导致多个页面错误。因此，在这种情况下，最好有一个最佳大小的私有缓冲区。操作系统检查您要读取的数据是否已被提取到缓存中。如果不是，则发生页面错误，并且操作系统将请求的数据提取到页面中。同样，如果多个线程请求读取同一区域，则可以共享此数据。您可以很好地使用文件缓存本身进行读取，而不是创建自己的私有缓冲区。但是，如果跨多个区域同时读取文件多次，这可能会导致多个页面错误。因此，在这种情况下，最好有一个最佳大小的私有缓冲区。如果跨多个区域同时读取文件多次，这可能会导致多个页面错误。因此，在这种情况下，最好有一个最佳大小的私有缓冲区。如果跨多个区域同时读取文件多次，这可能会导致多个页面错误。因此，在这种情况下，最好有一个最佳大小的私有缓冲区。

# android - 动画适用于网格中的所有图像视图？

> ID：10579811
> 
> 赞同：1
> 
> 时间：2012-05-14T08:28:09.153
> 
> 标签：android, android-animation

我有一个图像的 GridView。图像在下载时显示，我想让它们具有淡入效果，因为图像填充了位图。我添加了代码来执行此操作，但动画适用于所有图像，而不仅仅是当时正在加载的图像。这意味着当设置下一个位图并重新启动动画时，所有图像都会淡出一小部分然后消失。

如何使动画仅适用于当时正在加载的图像？

淡入 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
        <alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:interpolator="@android:anim/accelerate_interpolator" 
android:duration="2500" android:repeatCount="0"/>
</set> 
```

这是在 ImageAdapter 中加载图像的代码：

```
 public View getView(int position, View convertView, ViewGroup parent) {
        try {

            BorderedImageView imageView;
            imageView = new BorderedImageView(mContext, mPhotoId, position);
            Animation myFadeInAnimation =    AnimationUtils.loadAnimation(this.mContext , R.anim.fadein);

            if (convertView == null) {  // if it's not recycled, initialize some attributes
                imageView.setLayoutParams(new GridView.LayoutParams(mSize, mSize));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(3,3,3,3);
            } else {
                imageView = (BorderedImageView) convertView;
            }

            Bitmap b = photoCollection.GetThumbnail(position);
            imageView.startAnimation(myFadeInAnimation);
            imageView.setImageBitmap(b);
            return imageView;
        }
        catch (Exception e)
        {
            e.printStackTrace();
            return null;
        }
    } 
```

**编辑**好的实际上很明显为什么会发生这种情况 - 每次下载缩略图时我都会调用 notifydatasetchanged() ，因此每次下载时都会为所有图像运行上述代码。仍然不知道如何解决它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:16:07.907

好的，我现在已经解决了这个问题。

我将动画移动到我自己的 ImageView 类中，并添加了一个方法来启动动画。这是由我的照片集上的一个标志触发的，该标志是在缩略图下载完成时设置的。

# java - 如何重新加载我的类，以便此堆栈跟踪消失？

> ID：10579812
> 
> 赞同：0
> 
> 时间：2012-05-14T08:28:16.047
> 
> 标签：java, jsp, jakarta-ee, websphere, ibm-rad

我有一个非常奇怪的错误。这是来自应用程序服务器（websphere 8）的堆栈跟踪：

```
JSPG0049E: /arendeprocess_grunduppgifter_visa.jsp failed to compile : JSPG0225E: An error occurred at line: 7 in the statically included file: /includes/arendeprocess_card_header_inc.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter_visa.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter_5F_visa.java : 446 : The method isRo() is undefined for the type AnsokanInfo JSPG0225E: An error occurred at line: 8 in the statically included file: /includes/arendeprocess_card_header_inc.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter_visa.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter_5F_visa.java : 450 : The method isIsa() is undefined for the type AnsokanInfo JSPG0225E: An error occurred at line: 9 in the statically included file: /includes/arendeprocess_card_header_inc.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter_visa.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter_5F_visa.java : 454 : The method isIpea() is undefined for the type AnsokanInfo JSPG0225E: An error occurred at line: 10 in the statically included file: /includes/arendeprocess_card_header_inc.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter_visa.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter_5F_visa.java : 458 : The method isIsa() is undefined for the type AnsokanInfo 
```

另一个 JSP 页面也有类似的问题，它不会加载新添加的方法：

```
JSPG0049E: /arendeprocess_grunduppgifter.jsp failed to compile : JSPG0091E: An error occurred at line: 410 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 682 : PandoraFieldConstants.LABEL_FORNAMN cannot be resolved JSPG0091E: An error occurred at line: 414 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 690 : PandoraFieldConstants.LABEL_EFTERNAMN cannot be resolved JSPG0091E: An error occurred at line: 428 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 700 : PandoraFieldConstants.LABEL_FORETAG cannot be resolved JSPG0091E: An error occurred at line: 431 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 708 : PandoraFieldConstants.LABEL_ORGNUMMER cannot be resolved JSPG0091E: An error occurred at line: 439 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 716 : PandoraFieldConstants.LABEL_ATTENTION cannot be resolved JSPG0091E: An error occurred at line: 442 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 724 : PandoraFieldConstants.LABEL_POSTADRESS cannot be resolved JSPG0091E: An error occurred at line: 445 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 732 : PandoraFieldConstants.LABEL_POSTNR cannot be resolved JSPG0091E: An error occurred at line: 448 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 740 : PandoraFieldConstants.LABEL_POSTORT cannot be resolved JSPG0091E: An error occurred at line: 451 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 748 : PandoraFieldConstants.LABEL_LANDKOD cannot be resolved JSPG0091E: An error occurred at line: 497 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 799 : PandoraFieldConstants.LABEL_TEL cannot be resolved JSPG0091E: An error occurred at line: 500 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 807 : PandoraFieldConstants.LABEL_FAX cannot be resolved JSPG0091E: An error occurred at line: 503 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 815 : PandoraFieldConstants.LABEL_EPOST cannot be resolved JSPG0091E: An error occurred at line: 506 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 823 : PandoraFieldConstants.LABEL_REFERENS cannot be resolved JSPG0091E: An error occurred at line: 510 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 833 : PandoraFieldConstants.LABEL_SOKANDE_I cannot be resolved JSPG0091E: An error occurred at line: 526 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 859 : PandoraFieldConstants.FIELD_SOKANDE_I_LAND cannot be resolved JSPG0091E: An error occurred at line: 562 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 887 : The method getFormattedAdress() is undefined for the type PersonInfo JSPG0091E: An error occurred at line: 563 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 889 : The method getFormattedReferens() is undefined for the type PersonInfo JSPG0091E: An error occurred at line: 583 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 917 : The method getFormattedAdress() is undefined for the type PersonInfo JSPG0091E: An error occurred at line: 584 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 919 : The method getFormattedReferens() is undefined for the type PersonInfo JSPG0091E: An error occurred at line: 614 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 933 : PandoraFieldConstants.LABEL_FORNAMN cannot be resolved JSPG0091E: An error occurred at line: 615 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 941 : PandoraFieldConstants.LABEL_EFTERNAMN cannot be resolved JSPG0091E: An error occurred at line: 628 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 949 : PandoraFieldConstants.LABEL_FORETAG cannot be resolved JSPG0091E: An error occurred at line: 629 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 957 : PandoraFieldConstants.LABEL_ORGNUMMER cannot be resolved JSPG0091E: An error occurred at line: 633 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 965 : PandoraFieldConstants.LABEL_ATTENTION cannot be resolved JSPG0091E: An error occurred at line: 636 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 973 : PandoraFieldConstants.LABEL_POSTADRESS cannot be resolved JSPG0091E: An error occurred at line: 639 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 981 : PandoraFieldConstants.LABEL_POSTNR cannot be resolved JSPG0091E: An error occurred at line: 642 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 989 : PandoraFieldConstants.LABEL_POSTORT cannot be resolved JSPG0091E: An error occurred at line: 645 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 997 : PandoraFieldConstants.LABEL_LANDKOD cannot be resolved JSPG0091E: An error occurred at line: 679 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 1036 : PandoraFieldConstants.LABEL_TEL cannot be resolved JSPG0091E: An error occurred at line: 682 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 1044 : PandoraFieldConstants.LABEL_FAX cannot be resolved JSPG0091E: An error occurred at line: 685 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 1052 : PandoraFieldConstants.LABEL_EPOST cannot be resolved JSPG0091E: An error occurred at line: 688 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 1058 : PandoraFieldConstants.FIELD_OMBUD_REFERENS cannot be resolved JSPG0091E: An error occurred at line: 688 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 1060 : PandoraFieldConstants.LABEL_REFERENS cannot be resolved JSPG0091E: An error occurred at line: 689 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 1064 : PandoraFieldConstants.FIELD_OMBUD_REFERENS cannot be resolved JSPG0091E: An error occurred at line: 691 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 1068 : PandoraFieldConstants.LABEL_OMBUD_FOR cannot be resolved JSPG0091E: An error occurred at line: 718 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 1106 : The method getFormattedAdress() is undefined for the type PersonInfo JSPG0091E: An error occurred at line: 719 in the file: /arendeprocess_grunduppgifter.jsp JSPG0093E: Generated servlet error from file: /arendeprocess_grunduppgifter.jsp C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv1\temp\PRVSTHV1510Node01\server1\PandoraArendeEar\PandoraArendeWeb.war\_arendeprocess_5F_grunduppgifter.java : 1108 : The method getFormattedReferens() is undefined for the type PersonInfo 
```

但是它抱怨的方法确实在类中，我已经重新部署了它并重新启动了服务器。所以似乎有些改动没有更新。处理这个问题的正确方法是什么？我可以编译和清理项目，但是当我尝试访问 JSP 页面时出现此运行时异常。我使用 RAD 8 和 WAS 8，这就是堆栈跟踪出现的地方。

## 更新

我还没有解决这个问题。环境是 IBM RAD 8 (=Eclipse) 和 WAS (websphere) 8，我的 JSP 无法识别新添加到我的 Java 类的方法。我怀疑正在进行某种缓存，无法让我重新加载我的课程。我已经尝试从 JSP 中删除临时文件并重新启动服务器，并且我已经清理了项目，但仍然出现错误。我应该怎么办？

## 更新 2

我可以删除其中一个有问题的类，然后得到一个 noclassfounderror ，但这也好不到哪里去。IBM RAD 不适合我，从命令提示符进行开发比使用 IDE 更好，因为 IDE 使您无法进行开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:36:15.210

尝试删除在 WAS 应用程序服务器运行时将 JSP 转换为 .Java 文件的临时工作文件夹。然后进行干净的构建并部署它并重新启动服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:43:53.490

尝试清理并构建您的**IDE**合理应用程序开发 *，并注意任何“重要”错误的输出*

> [http://www.coderanch.com/t/528330/vc/does-Project-Clean-do-Eclipse](http://www.coderanch.com/t/528330/vc/does-Project-Clean-do-Eclipse)

# visual-studio - 如何让 CMake 创建一个仅包含配置文件的 Visual Studio 项目？

> ID：10579813
> 
> 赞同：0
> 
> 时间：2012-05-14T08:28:17.583
> 
> 标签：visual-studio, cmake

我们正在使用 CMake 为 Visual Studio 2008 生成解决方案文件。除了构建库和可执行文件的常规源项目之外，我还想要一个仅包含配置文件的项目。这些文件用于在运行时配置项目的行为。构建项目不需要它们，但是将它们包含在解决方案中可以方便地编辑这些文件。我能够使用`add_custom_target`这样的方式完成此操作：

```
file(GLOB ini_files ${PROJECT_SOURCE_DIR}/../config/ini/*)
source_group(ini FILES ${ini_files})
file(GLOB xml_files ${PROJECT_SOURCE_DIR}/../config/xml/*)
source_group(xml FILES ${xml_files})
add_custom_target(config SOURCES ${ini_files} ${xml_files}) 
```

这给了我一个“配置”项目，其中包含配置文件作为子文件夹。但是，还有一个名为“config”的链接指向一些不存在的文件。我认为这应该是该规则创建的目标的链接。由于没有任何东西要构建，这将仍然是一个死链接。现在我的问题是：

1.  add_custom_target 是完成我想要的正确方法吗？如果没有，有什么更好的解决方案？
2.  如果是正确的方法，我怎样才能摆脱目标名称的链接？另外，我想删除“CMake Rules”文件夹以使配置项目尽可能干净。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:30:14.233

Visual Studio 项目本质上是根据一组源文件构建目标。

不建议使用仅列出一组静态文件而存在的项目，因为一旦添加自定义目标，CMake 就会盲目地尝试为项目创建输出，以保持与其他后端系统的兼容性。想象一下，如果 CMake 创建了一个没有实际目标的 Unix Makefile，那根本就不是 Makefile，对吗？

执行此操作的正确方法是将文件实际添加到另一个现有项目中。从技术上讲，如果您正在构建一个可执行文件，并且该可执行文件在运行时读取配置文件，则这些文件合法地是项目的一部分。

另外，我不推荐使用file globing来列出源文件或配置文件，因为如果你在文件夹中添加文件，CMake将无法知道新文件已经添加，并且不会重新生成Visual Studio项目包括这些文件。相反，您应该列出 CMakeLists.txt 文件中的每个文件，以便在其中添加新文件将触发 cmake 文件重新生成。

最后一点，如果你真的需要“干净”的项目，那么 CMake 不是你需要的工具，因为它生成的所有东西对于维护一个连贯的构建过程都是有用的。

# php - .htaccess 文件中的问题并连接到 db

> ID：10579814
> 
> 赞同：0
> 
> 时间：2012-05-14T08:28:20.940
> 
> 标签：php, mysql, .htaccess

我正在将我的 php 工作从一台笔记本电脑转移到另一台笔记本电脑。对于我在本地机器上的工作，我使用的是 WAMP 服务器。所以我的项目在 c:\wamp\www\

我面临两个问题：

1.  我在 c:\wamp\www\Test\edge 文件中的一个项目。所以我复制了这个“测试”文件并将其粘贴到我的新笔记本电脑上。现在，当我尝试使用浏览器“localhost/Test”访问文件时，它不会显示其中的“edge”文件夹。所以，我认为“edge”文件夹中的某个文件可能有问题，经过几次点击和尝试后，我发现问题出在 edge 文件夹中的 .htaccess 文件中。所以，我删除了它，然后 localhost/Test 也在其中显示边缘文件夹。但现在项目运行不正常。

.htaccess 代码如下：

```
 RewriteEngine On

Options +FollowSymLinks

RewriteRule ^demo+[\/]*$ /demo/

RewriteRule ^service/([a-zA-Z]{1,})+[\/]*$ site/service.php?mode=$1 [QSA,L] 
```

2\. 我也在我的新笔记本电脑上创建了相同的数据库和相同的表，但我仍然不知道如何将数据库连接到我的网站。我的意思是，我是否需要更改任何 conf 文件中的某些内容或什么...

请在这两个问题上帮助我。

问候泽山

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:34:19.927

1) localhost/Test 显示什么。您的 .htaccess 文件中有什么内容？

2）您的笔记本电脑/台式机数据库的密码是否相同？

# iphone - 我们可以在 iphone 项目中使用用 c++ 编写的库吗？

> ID：10579815
> 
> 赞同：0
> 
> 时间：2012-05-14T08:28:21.047
> 
> 标签：iphone, c++, html, pdf, wkhtmltopdf

我们可以将一个库，如在 c++ 中为 linux 编写的 wkhtmltopdf 集成到 ios 中。我听说我们可以将 c++ 代码集成到 iphone 项目中，即我们可以使用代码还是使用静态库本身。如何完成这个。如果不是可能，是否有任何其他好的库可以将 html 转换为 pdf。（除了将 uiwebview 打印为 pdf）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:33:41.847

我不特别了解 wkhtmltopdf，但在这种情况下，您不需要构建静态库，只需在项目中包含 wkhtmltopdf 源并让它们构建即可。然后您应该能够通过调用 wkhtmltopdf API 来使用 wkhtmltopdf。

# hadoop - 如何在不使用 map reduce 的情况下使用 lzo 压缩写入 hadoop hdfs

> ID：10579821
> 
> 赞同：2
> 
> 时间：2012-05-14T08:29:02.077
> 
> 标签：hadoop, gzip, hdfs, lzo

我正在写信给 hadoop hdfs。该文件必须使用 lzo 压缩。该文件还将实时附加。

源文件是一个 gzip 文件，在 hadoop 中不存在。批处理此 gzip 文件，然后进行 lzo 压缩并附加到 hadoop。这是否消除了使用 map reduce 的可能性？

我们怎样才能做到这一点？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T13:03:03.350

您可以从自定义 java 代码直接写入 HDFS：

```
public class HdfsWrite extends Configured implements Tool {
    public int run(String[] arg0) throws Exception {

        // create am HDFS file system
        FileSystem fs = FileSystem.get(getConf());

        // create an output stream to write to a new file in hdfs
        Path outputPath = new Path(
                "/path/to/file/in/hdfs.default");
        OutputStream outputStream = fs.create(outputPath);

        // now wrap the output stream with a Zlib compression codec
        CompressionCodecFactory codecFactory = new CompressionCodecFactory(getConf());
        CompressionCodec codec = codecFactory.getCodec(outputPath);
        CompressionOutputStream compressedOutput = codec.createOutputStream(outputStream);

        // send content to file via compressed output stream using .write methods
        // ..

        // close out stream
        compressedOutput.close();

        return 0;
    }    

    public static void main(String[] args) throws Exception {
        ToolRunner.run(new HdfsWrite(), args);
    }
} 
```

此代码适用于 zlib 压缩 - 对于 LZO 压缩，您是否已经拥有一些可以为您执行压缩的 java 库（例如[hadoop-gpl-compression](http://code.google.com/a/apache-extras.org/p/hadoop-gpl-compression/wiki/FAQ?redir=1)库）。如果您按照详细说明安装上述库，那么您需要做的就是将输出路径扩展名修改为“.lzo_deflate”，一切都应该正常工作。如果要使用其他压缩库，可以跳过 CompressionCodecFactory 代码块，直接包装 outputStream。

至于附加到文件 - 根据您的 hadoop 版本，这可能不受支持。您还需要考虑您的压缩库是否支持连接文件（例如 GZip，但早期版本的 Java/hadoop 在处理这些类型时存在一些问题）。如果您确实有支持附加的 hadoop 版本，并且您的压缩库支持它，则将`fs.create(outputPath)`调用修改为`fs.append(outputPath)`

# python - Python vs Jython vs IronPython vs wxPython有什么区别？

> ID：10579824
> 
> 赞同：41
> 
> 时间：2012-05-14T08:29:13.187
> 
> 标签：python, wxpython, jython, ironpython

我是 Python 编程的新手。在谷歌搜索时，我发现了一些`Python`相关的词。我只是想知道 Python、Jython、IronPython 和 wxPython 之间有什么区别。

我知道`wxPython`是用于 GUI 编程。但是什么是 Jython 和 IronPython？请帮我。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-14T08:34:15.747

Jython 和 IronPython 是不同的 python 实现，它们都运行在不同的虚拟机上。Jython 在 JVM（Java 虚拟机）上运行，IronPython 在 CLR（公共语言运行时）上运行。这意味着使用这些实现的程序可以利用虚拟机的库和生态系统。例如，使用 Jython，我可以为 Java 应用程序编写插件，使用 IronPython，我可以使用 .NET 标准库。使用与 CPython 不同的实现的缺点是 CPython 是最常用的 Python，因此得到了库和开发人员的最佳支持。例如，像 NumPy 这样的流行库只能在 CPython 上运行，因为它依赖于 CPython 的 C api，而 Jython 或 IronPython 都无法提供。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-07-20T06:08:57.887

“最好将 Jython 和 IronPython 视为模仿 Python 而不是其生态系统的语言。”

凯明白了！

无论如何，最好学习 C# 或 Java，除非您从事大量的科学研究或 AI 编程。那么你可能不需要 Python，因为它显然对其他所有东西都很糟糕，还有可怕的 gil。您不会很快用 Python 创建下一代游戏，而 C# 是许多专业游戏引擎中的主要语言 Unity 就是一个例子。

# c - C语言中的对象

> ID：10579825
> 
> 赞同：4
> 
> 时间：2012-05-14T08:29:27.367
> 
> 标签：c, object

即使我浏览了一些 C 的教程/笔记，我也会遇到“对象”这个术语。我一直想知道对象与程序语言有什么关系。深入一点我可以理解占用一块内存的东西在c中被称为“对象”。

我的问题是我的理解是正确的还是我遗漏了什么。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T08:41:13.703

来自[C99 标准的草案](http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1256.pdf)：

> 3.14
> **object**
> region 执行环境中的数据存储区，其内容可以表示值

所以，你基本上是对的。

笔记：

*   一个对象可以有一个名字：`int object = 42;`
*   一个对象可以是一个更大对象的一部分：`struct tm x; /* (x) and (x.tm_year) are objects */`
*   可以动态分配对象：`int *arr = malloc(42); if (arr) /* arr[4] is an object */;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T08:41:41.137

至少在 C 标准中，“对象”大致是一块占用连续内存的数据。因此，int、long、float、指针变量都是对象，以及数组或结构或结构数组，或 malloc 内存块中的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T08:47:24.647

不久前，著名的 Chris Torek 在 comp.lang.c 上发表了一篇与此相关的帖子，它可能会对您有所帮助[。](http://groups.google.com/group/comp.lang.c/msg/63589f9a335a8307)

# android - How do I add APKs in an AOSP build?

> ID：10579827
> 
> 赞同：45
> 
> 时间：2012-05-14T08:29:31.490
> 
> 标签：android, android-source

I need to add some 3rd party APKs to my AOSP build. What folder should I keep these APKs so that when I build the code and the image is created, it is installed in the emulator?

It looks like the system apps are kept in the *packages/app* folder so I need to know where the third party APKs are kept.

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-11-22T05:25:40.173

Adding third party APKs to the build is definitely possible.

Also APKs and APPs with source code go to the same place; the `package/app` folder.

**Adding a new APK to the build**

In the AOSP root add the folder:

`<aosp root>/package/app/< yourappfolder >`

Then inside this folder add:

*   empty `Android.mk`
*   `< yourapp.apk >`

The android make file should have the reference to your apk, add this to your `Android.mk`:

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE_TAGS := optional

LOCAL_MODULE := < your app folder name >

LOCAL_CERTIFICATE := < desired key >

LOCAL_SRC_FILES := < app apk filename >

LOCAL_MODULE_CLASS := APPS

LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)

include $(BUILD_PREBUILT) 
```

Create an entry in the `commons.mk` (from AOSP 8.1.0 onwards it is called `core.mk`, and is usually found in `build/target/product`) for your apk add the line (check where all the others are)

```
PRODUCT_PACKAGES += < what you have defined in LOCAL_MODULE, it should be your app folder name > 
```

Compile the AOSP and you have a brand new app installed on the system.

**Notes**

*   If your APK is already signed, use the special value `PRESIGNED` as value for `LOCAL_CERTIFICATE`
*   If you want your APK to end up in the `/data/app/` directory, add the line `LOCAL_MODULE_PATH := $(TARGET_OUT_DATA)` before the line `include $(BUILD_PREBUILT)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-30T12:02:10.003

The Android.mk presented above will install the APK in /system/app

If you wish to install the APK in /data/app you will need to add the following the line to Android.mk before line `include $(BUILD_PREBUILT)`

```
LOCAL_MODULE_PATH := $(TARGET_OUT_DATA) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-26T17:33:33.743

You could also do the following in the target output dir:

```
<path-to-your-build-dir>/host/linux-x86/bin/simg2img system.img temp.img
mkdir system_root
sudo mount -t ext4 -o loop temp.img system_root 
```

At this point you can make whatever changes you'd like to the files in system_root, i.e. adding apks to system/app etc...

When you're done just go back down to the output dir and do:

```
sudo umount system_root
<path-to-your-build-dir>/host/linux-x86/bin/img2simg temp.img system.img 
```

You can now flash system.img using fastboot as usual.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-23T04:22:24.893

Follow the first answer to make the apk and Android.mk file and place it where it is supposed to. But now there is no core.mk file in build/target/product but it has been renamed to handheld_product.mk So, add your app's folder name there.

# javascript - 以不同的方式附加 iframe？

> ID：10579829
> 
> 赞同：0
> 
> 时间：2012-05-14T08:30:02.987
> 
> 标签：javascript, jquery, html, iframe

我很容易地添加了如下所示的 iframe。

```
$("p").append("<iframe src='http://www.site.com'></iframe>"); 
```

但是搜索机器人也会看到这个 url 并转到该 url。我想要做的是使相同的附加不同。如果它是在 php 中，我可以这样做

```
$part1 = "<iframe src='http://www.site";
$part2 = ".com'></iframe>";

echo $part1$part2; 
```

但是我怎样才能使用 jquery 实现同样的效果呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:43:31.627

你如何生成 iframe 应该没有任何区别，因为正如@felix-kling 所说，它最终将内容显示为 HTML，如果脚本执行脚本，如果你已经在使用 jQuery，它似乎正在为你做生成 iframe。下一个最好的办法是尝试阻止正在运行的脚本。

这可以通过多种方式完成，

将您的脚本放在被 robots.txt 文件阻止的目录中的外部 js 文件中，或者更好地使用 .htaccess 文件来阻止外部站点访问该目录中的 js 文件。

```
 RewriteEngine On
 RewriteCond %{HTTP_REFERER} !^http://(.+\.)?mysite\.com/ [NC]
 RewriteCond %{HTTP_REFERER} !^$
 RewriteRule .*\.(js)$ - [F] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:31:34.543

```
$("p").append("<iframe src='http://www.s"+"ite.com'></iframe>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T08:33:11.563

请尝试以下方法：

```
var part1 = "<iframe src='http://www.site"; 
var part2 = ".com'></iframe>"; 
$("p").append(part1+part2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T08:33:33.763

使用数组构建域部分：

```
var domain = [];
domain.push('http://', 'www', 'site', '.com');
$('p').append('<iframe src="', domain.join(''), '"></iframe>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T08:37:43.187

```
$("p").append($('<iframe />', { 'src' : 'http://www.site.com' })); 
```

# java - 如何在 Java 上抑制类实例上的静态方法？

> ID：10579835
> 
> 赞同：2
> 
> 时间：2012-05-14T08:30:17.857
> 
> 标签：java, eclipse

例如，IntelliJ 不会在实例变量上显示静态睡眠方法

```
Thread z = new Thread();
z.sleep(1000); // Eclipse shows sleep as part of z, while IntelliJ do not 
```

看来 sleep 是 z 变量的一部分

如何防止 Eclipse 在实例变量上显示静态方法？如果可能的话，如何在 Eclipse-wise 和命令行中产生编译错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:32:23.250

不确定是否可以将其从选项中删除，但可以使 Eclipse 产生错误：

首选项 -> Java -> 编译器 -> 错误/警告 -> 对静态成员的非静态访问 -> 设置为错误。

![在此处输入图像描述](../Images/cc86d8aa4e9dcb3749e6a7f5bfe92114.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:24:47.823

这可能是一种解决方法，但在*保存操作*（*Preferences->Java->Editor->Save Actions*）中，您可以要求“<em>使用声明类型更改对静态成员的非静态访问”，这将自动删除此类用法.

此外，Eclipse 通常不会首先建议静态提案。如果是这种情况，您应该检查您的*Content Assist*设置（*Preferences->Java->Editor->Content Assist*）。尤其是，确保将*排序建议*设置为“<em>按相关性”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:34:31.923

你不能从命令行让它成为编译错误，因为对象有它的类，并且你可以在这个对象上调用静态方法，这不仅会影响这个对象。由于这种全局影响，从类调用静态方法然后从对象调用静态方法只是一个更好的设计，这就是 IntelliJ 阻止你这样做的原因。

# javascript - $.getJSON 返回一个带有 IE 和 Opera 浏览器的文件

> ID：10579836
> 
> 赞同：0
> 
> 时间：2012-05-14T08:30:21.583
> 
> 标签：javascript, json, internet-explorer

$.getJSON 正在返回一个带有 IE 和 Opera 浏览器（Firefox、Chrome ......工作正常）的文件。

代码是这样的：

```
$.getJSON("http://open.mapquestapi.com/nominatim/v1/search.php?format=json&osm_type=N&bounded=1&limit=100&viewbox=-5.667593479156494,43.54767717445222,-5.656242370605469,43.54280902999833&q=Restaurants",
{
    tagmode: "any",
    format: "json"
},
function(data) {
    var ind = 0;
    $.each(data, function(i, pos_reg){
       alert("Recovery " + i++ + " row");
    });
})
.error(function() {       
    alert("Was an error");
}); 
```

我认为问题是从服务器返回的 Http 标头。[如果我将URL](http://open.mapquestapi.com/nominatim/v1/search.php?format=json&osm_type=N&bounded=1&limit=100&viewbox=-5.667593479156494,43.54767717445222,-5.656242370605469,43.54280902999833&q=Restaurants)粘贴到Firefox 或 Chrome 上，我会看到 JSON 响应。如果我将 URL 粘贴到 IE 和 Opera 上，他们会尝试将 JSON 响应下载为文件。

我试过这样的东西：

```
$.ajaxSetup({ scriptCharset: "utf-8" , contentType: "application/json; charset=utf-8"}); 
```

但同样的结果:(

请问有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:39:24.123

这不是问题的答案。**真正的问题**（最初的问题很模糊）是如何在 Opera 和 Internet Explorer 中进行跨域 ajax 调用。

复制到[跨域 Ajax 请求在 Opera 和 IE9 中不起作用？](https://stackoverflow.com/questions/6947821/cross-origin-ajax-requests-dont-work-in-opera-and-ie9)由主题启动器链接。

* * *

我知道 Opera 默认情况下不会打开 JSON，它确实会尝试下载文件。您可以在设置中更改此设置：“设置”>“高级”>“下载”，现在搜索*json*，如果找不到，可以创建一个新类型。现在填写*application/json*并将其设置为使用 Opera 打开（我还添加了*text/json*因为有时网站会返回此内容类型）。以下是这些屏幕的屏幕截图：

![Opera json 下载设置](../Images/2398a51f923fbbbb0ed75430ffc0b978.png)

我猜你也可以在 Internet Explorer 中做类似的事情。编辑：我找到了 Internet Explorer 的解决方案。之前已经在 SO 上回答过，所以我将在这里发布答案的链接：[https](https://stackoverflow.com/a/2492211) ://stackoverflow.com/a/2492211 。

# c++ - 如果我不定期 cout 或 cerr，C++ CGI 执行/处理会停止

> ID：10579839
> 
> 赞同：1
> 
> 时间：2012-05-14T08:30:40.087
> 
> 标签：c++, cgi, buffer

我正在使用通过调用调用的**c++** （我也从直接 cgi 链接运行相同的 c++ cgi 程序）。 该程序运行良好，但我经常发现程序的执行会停止（即使对于相同的数据集）。但是，如果我向其发送数据，则执行将照常继续。 任何帮助，将不胜感激。 先感谢您。 `CGI program``PHP curl`
`cout/cerr`

系统信息：

*   **操作系统**：`Ubuntu 11.10`
*   **服务器**：`Apache2`
*   **数据库**：`MySQL 5.1.62`
*   **C++ 编译器**：`gcc`

# sql - JPL：javax.persistence.Query.setParameter sql-injection 安全吗？

> ID：10579843
> 
> 赞同：0
> 
> 时间：2012-05-14T08:30:49.830
> 
> 标签：sql, sql-injection, jpl

我可以 sql-inject setParameter 设置的 jpl 参数吗？我的意思是，我知道如果我有这样的事情我可以做到：

```
String nm = "'anything' or 'x'='x'--";
Query m = em.createQuery("SELECT p FROM Tbl p WHERE UPPER(p.name) = '" + nm + "'"); 
```

我可以用这样的东西做类似的事情吗？：

```
String nm = "'anything' or 'x'='x'--";
   Query m = em.createQuery("SELECT p FROM Tbl p WHERE UPPER(p.name) = :param").setParameter("param", nm.toUpperCase()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:17:24.067

似乎它是 sql-injection 安全的。我查看了 sql 查询日志：潜在危险符号在生成的 sql 中被转义

# java - 如何让 jtable 单元格监听来自另一个单元格的更改

> ID：10579844
> 
> 赞同：2
> 
> 时间：2012-05-14T08:30:50.680
> 
> 标签：java, jtable, cell, custom-cell, focuslistener

请帮忙。我有两个来自 jtable 的单元格，一个 ID 和一个描述。ID 和描述都是自定义组合框。我要做的是当 ID 失去焦点或更改其值时，描述将根据 ID 上的值更新。我怎么做？

这是我实现两个单元的代码：

```
TableColumn subAccountCol = jTable1.getColumnModel().getColumn(table.findColumn("SubAccount"));

    javax.swing.JComboBox accountCbx = new javax.swing.JComboBox(Account.toArray());
    javax.swing.JComboBox accountDescCbx = new javax.swing.JComboBox(AccountDesc.toArray());

    CompleteText.enable(accountCbx);
    CompleteText.enable(accountDescCbx);

    jTable1.getColumnModel().getColumn(table.findColumn("Account")).setCellEditor(new ComboBoxCellEditor(accountCbx));
    jTable1.getColumnModel().getColumn(table.findColumn("Account Description")).setCellEditor(new ComboBoxCellEditor(accountDescCbx)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:34:06.867

`setValueAt()`单元格编辑器最终会在您的表格模型上调用该方法。在此表格模型中，除了编辑的单元格值之外，只需更新链接的单元格值，并为两个单元格触发适当的更改事件。

```
public MyTableModel extends AbstractTableModel() {
    // ...

    // modifies the value for the given cell
    @Override
    public void setValueAt(Object value, int row, int column) {
        Foo foo = this.list.get(row);
        if (column == INDEX_OF_ID_COLUMN) {
            foo.setId(value); // change the ID
            fireTableCellUpdated(row, column); // signal the the ID has changed
            // and now also change the description
            String newDescription = createNewDescription(value);
            foo.setDescription(newDescription);
            fireTableCellUpdated(row, INDEX_OF_DESCRIPTION_COLUMN); // signal the the description has changed  
        }
        // ...
    }
} 
```

# apache-flex - Flex 工具栏元素

> ID：10579853
> 
> 赞同：0
> 
> 时间：2012-05-14T08:31:19.070
> 
> 标签：apache-flex, actionscript, toolbar, flex-mx

Flex 中是否存在任何工具栏，例如 c# ToolBar (http://msdn.microsoft.com/en-us/library/ms752063.aspx)

我正在使用 HBox 和 clipAndEnableScrolling = true

但是当内容更宽时我需要滚动，就像 c# 一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:54:12.823

默认情况下，不，它没有。不过，其他人可能已经构建了一些组件。我总是根据需要自己滚动。我可能会做类似下面的事情。我相信有更好的方法，但蛮力可以满足我的需要，希望它会对你有所帮助。

```
<s:HGroup width="100%">
        <s:Button label="scroll left" click="scrollLeftClick()"/>
        <s:Scroller width="100%" horizontalScrollPolicy="off">
            <s:HGroup>
                <s:Button label="button"/>
                <s:Button label="button"/>
                <s:Button label="button"/>
                <s:Button label="button"/>
                <s:Button label="button"/>
                <s:Button label="button"/>
                ...//as many more buttons as needed
            </s:HGroup>
        </s:Scroller>
        <s:Button label="scroll right" click="scrollRightClick()"/>
    </s:HGroup> 
```

然后作为分隔符，您始终可以在按钮之间使用以下内容：

```
<s:Line height="100%">
                    <s:stroke>
                        <s:SolidColorStroke weight="2"/>
                    </s:stroke>
                </s:Line> 
```

然后只需为 scrollLeft 和 scrollRight 添加函数来移动 scrollerPosition ，一切都会与世界保持一致......无论如何理论上都是如此。

# string - Matlab：在最后一个句点字符处分割字符串的最快方法

> ID：10579856
> 
> 赞同：0
> 
> 时间：2012-05-14T08:31:24.263
> 
> 标签：string, performance, matlab

我必须在 Matlab 中编写一个程序，性能非常重要，因为它可以处理很多文件。

我必须找到文件名的最后一个文件扩展名并将其拆分。

例如`file.name.tar.gz`应该分为`file.name.tar`和`gz`

我确定了 3 种方法来做到这一点，但我不知道哪种方法最快。

1.

```
javaFilename = java.lang.String(fileName);
lastDot = javaFilename.lastIndexOf('.');
name = char(javaFilename.substring(0, lastDot-1));    
ext = char(javaFilename.substring(lastDot+1)); 
```

2.

```
dots = findstr(fileName, '.');
lastDot = dots(length(dots));
name = fileName(1:lastDot-1);
ext = fileName(lastDot+1:end); 
```

3.

```
[name tempExt] = strtok(fileName, '.');
while tempExt
    [temp2 tempExt] = strtok(fileName, '.');
    if tempExt
       name = strcat(name, '.', temp2);
    end
end
ext = temp2(2:end); 
```

我认为第三个是最糟糕的。但是其他方法呢？你能想出比我描述的方法更快的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:52:41.607

您可以通过执行以下操作来测试这些：

```
tic;
fileName = 'testFileName.ext';
for i=1:100000
  <find last dot>
end
toc; 
```

我对你的进行了基准测试，发现第二个要快得多。

我的解决方案是

```
for index=length(fileName):-1:1
  if (fileName(index) == '.')
    break;
  end
end 
```

我得到的时间是：

Java 解决方案：23 秒

findstr 解决方案：0.4 秒

strtok 解决方案：（没有终止；也许我复制错了）

反向for循环解决方案：0.01秒

我的解决方案优于 findstr 和 strtok 的优点是：a）它只查找一个点，而不是所有点 b）它从字符串的末尾开始（大概大多数文件扩展名将是 2-4 个字母长）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:19:18.970

内置命令`fileparts`可以满足您的需要，但可能有很多不必要的开销/错误检查等。如果你看一下 100 左右的行，它确实

```
ind = find(name == '.', 1, 'last');

ext = name(ind:end);
name(ind:end) = []; 
```

`name`输入文件名在哪里。这与您的第二个建议非常相似 - 它可能更快或更慢，我还没有完成时间。

# mysql - MYSQL SELECT 末尾有一个条目

> ID：10579857
> 
> 赞同：0
> 
> 时间：2012-05-14T08:31:24.623
> 
> 标签：mysql

Stackoverflowers，我想从 MYSQL 表中选择并在 MYSQL 查询末尾显示 ID 54，我编写了以下代码，但它与 ORDER 冲突：

```
SELECT * FROM owners WHERE id <= 53
UNION
SELECT * FROM owners WHERE id >= 55
ORDER BY owner
UNION
SELECT * FROM owners WHERE id = 54 
```

我认为即使它有效，它也是非常错误的，你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:34:53.763

您不能依赖 a 的子选择的顺序`UNION`。另请参阅许多其他 Stack Overflow 问题，例如这个：

[UNION 和 ORDER BY 的奇怪结果](https://stackoverflow.com/questions/8491621/weird-result-with-union-and-order-by)

像这样做：

```
SELECT * FROM owners
-- Order by "ID category" first
ORDER BY CASE WHEN ID <= 53 THEN 1
              WHEN ID >= 55 THEN 2
              WHEN ID  = 54 THEN 3 END,
-- Then, within "category 55", order by owner, too
         CASE WHEN ID <= 53 THEN ''
              WHEN ID >= 55 THEN owner
              WHEN ID  = 54 THEN '' END 
```

您可能需要稍微调整第二个`ORDER BY`表达式，因为我不太确定您想通过`owner`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T08:37:16.697

如果您只想将 54 放在最后，也许您可​​以将查询缩短为：

```
SELECT * FROM owners 
WHERE id <= 53 or id >= 55 or id = 54
ORDER BY 
   id = 54, 
   owner 
```

错误排序首先，正确排序最后。其他数据库这样做：

```
SELECT * FROM owners 
WHERE id <= 53 or id >= 55 or id = 54
ORDER BY 
   case when id = 54 then 1 else 0 end, 
   owner 
```

但这很有趣，完全删除条件：

```
SELECT * FROM owners 

ORDER BY 
   case when id = 54 then 1 else 0 end, 
   owner 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T08:35:28.320

关于您的示例，您希望从中选择所有内容`owners`并显示`id=54` ~~第一个~~最后的行。

```
SELECT * FROM owners 
order by case id when 54 then 1 else 0 end, id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:33:16.210

尝试使用括号

```
(SELECT * FROM owners WHERE id <= 53)
UNION
(SELECT * FROM owners WHERE id >= 55 ORDER BY owner)
UNION
(SELECT * FROM owners WHERE id = 54) 
```

# ios - 是否可以将我的应用添加到相册的“分享方式”按钮？

> ID：10579862
> 
> 赞同：1
> 
> 时间：2012-05-14T08:32:20.960
> 
> 标签：ios, photo

我开发了一个 Android 应用程序，可以直接通过相册照片发送图片。只需通过按钮在共享中添加指向我的应用程序的链接。

现在我正在为 iPhone 做同样的应用程序。这就是为什么我想知道是否可以通过按钮将我的应用程序放入该共享中的提议列表中。

# javascript - jqGrid - 列选择器内联而不是在对话框中

> ID：10579864
> 
> 赞同：0
> 
> 时间：2012-05-14T08:32:23.720
> 
> 标签：javascript, jquery, jqgrid

我有 ui-multiselect 插件，它在对话框中呈现列选择器。我希望它在 jqGrid 内内联呈现。如何才能做到这一点。

# actionscript-3 - 空气定制关于窗口

> ID：10579865
> 
> 赞同：1
> 
> 时间：2012-05-14T08:32:34.763
> 
> 标签：actionscript-3, air, flash-builder, mxml

我在 Mas Os 上使用 Flashbuilder 4.6 和 Air 应用程序，我想自定义“关于 MyApp”窗口。

我知道有关此窗口的所有信息都在 Adob​​e AIR 应用程序描述符文件中，但我不知道如何自定义。

你知道怎么做吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:55:24.227

我不知道它是否仍然相关，但我会说创建一个没有系统镶边的新窗口：

[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7e09.html#WS5b3ccc516d4fbf351e63e3d118676a452d-7ff4](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7e09.html#WS5b3ccc516d4fbf351e63e3d118676a452d-7ff4)

然后你只需要自己制作窗户内的所有东西，就像你喜欢的那样。

您实际上想要自定义什么？

# html - 移动 HTML5 测试

> ID：10579866
> 
> 赞同：0
> 
> 时间：2012-05-14T08:32:43.123
> 
> 标签：html, testing, mobile

你能推荐一些针对 HTML5 测试手机的资源吗？我知道一些测试 HTML5 的资源：

1.  [http://www.rng.io/](http://www.rng.io/)来自 Facebook 的 Ring Mark。
2.  [http://html5test.com/](http://html5test.com/)来自 NielsLeenheer (https://github.com/NielsLeenheer/html5test)
3.  [http://acid3.acidtests.org/](http://acid3.acidtests.org/)作者：Ian Hickson（谷歌）
4.  [http://test.w3.org/html/tests/approved/](http://test.w3.org/html/tests/approved/)来自 W3.org 的列表
5.  [http://mobilehtml5.org/](http://mobilehtml5.org/)
6.  [http://www.quirksmode.org/m/](http://www.quirksmode.org/m/)很多移动测试的链接。

我对安全测试和视频/音频、CSS3 和 Web Forms 2.0 测试很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:40:34.727

我承认有几个：

*   [http://css3test.com/](http://css3test.com/)
*   [http://www.css3.info/selectors-test/](http://www.css3.info/selectors-test/)
*   [http://quirksmode.org/html5/tests/video.html](http://quirksmode.org/html5/tests/video.html)
*   [http://double.co.nz/video_test/](http://double.co.nz/video_test/)
*   [http://www.terrillthompson.com/tests/html5-audio.html](http://www.terrillthompson.com/tests/html5-audio.html)

# jmeter - 将迭代次数传递给jmeter

> ID：10579869
> 
> 赞同：0
> 
> 时间：2012-05-14T08:32:59.803
> 
> 标签：jmeter

在 JMeter 中，我可以在命令行中指定测试的线程数。我只是做：

```
jmeter -n -t mytest.jmx -l output.jtl -j jmeterlog.log -Jthreads=5 
```

是否可以对迭代次数做类似的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:42:37.710

当然，您只需在循环计数中使用[_P 。](http://jmeter.apache.org/usermanual/functions.html#__P)

> 例子
> 
> 定义属性值：
> 
> jmeter -Jgroup1.threads=7 -Jhostname1=www.realhost.edu
> 
> 获取值：
> 
> ${__P(group1.threads)} - 返回 group1.threads 的值
> 
> ${__P(group1.loops)} - 返回 group1.loops 的值
> 
> ${__P(hostname,www.dummy.org)} - 如果未定义，则返回属性主机名或 www.dummy.org 的值

# php - 使用哪个正则表达式将此字符串转换为数组？

> ID：10579889
> 
> 赞同：3
> 
> 时间：2012-05-14T08:34:22.580
> 
> 标签：php, regex, geojson

从 mysql 中的地理空间列中，我得到以下字符串值，我想将其转换为数组。最终目标是将其转换为 geoJSON。

```
POLYGON((4.885838 52.388063,4.891061 52.388381,4.890973 52.382909)) 
```

该字符串有 3 个坐标对，x 和 y 坐标用空格分隔，坐标对用逗号分隔。确切的数字是未知的和可变的。也`POLYGON`可以不同于三种不同的设置。

以我对注册的一点了解。表达我想出了这个：

```
$pat = '/^(POLYGON|LINESTRING|POINT)(\(\() (.....) (\)\))$/';
preg_match($pat, $str, $matches); 
```

用双括号的坐标部分作为不确定部分。

谁能帮我解决这个问题？

**编辑**最终生成的数组应如下所示：

```
$array['type'] = POLYGON | LINESTRING ....
$array['coordinates'] = array of all the coordinates. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:44:54.180

你最好分阶段解决这个问题。只有第一阶段需要使用正则表达式：

1.  将整个坐标字符串作为一个 glob 查找，例如：

    `"4.885838 52.388063,4.891061 52.388381,4.890973 52.382909"`

2.  将该字符串拆分为以逗号分隔的坐标对。在 Python 中，我们将使用`str.split(',')`. 我相信您的 PHP 等效项称为`explode()`.

    `[ "4.885838 52.388063" , "4.891061 52.388381" , "4.890973 52.382909" ]`

3.  将每个坐标对分成两个用空格分隔的数字：`str.split(' ')`.

    `[ ["4.885838","52.388063"] , ["4.891061","52.388381"] , ["4.890973","52.382909"] ]`

4.  转换为浮点数。在 python 中，我们使用`float()`：您的本地等效项可能会被调用`str2float()`或类似。

    `[ [4.885838,52.388063] , [4.891061,52.388381] , [4.890973,52.382909] ]`

要查找第 1 步的数字字符串，请尝试使用正则表达式

```
([-]?\d+.\d+ [-]?\d+.\d+)((,[-]?\d+.\d+ [-]?\d+.\d+)+)? 
```

它在格式中找到至少一对坐标`x y`，坐标对用逗号分隔。[您可以在regexr](http://regexr.com?30uja)上看到正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:42:12.987

我认为在坐标字符串上使用[explode](http://php.net/explode)和[array_map](http://php.net/array_map)更容易，更易于维护：

```
$coordString = $matches[3];
$coordinates = array_map(function($e) { return explode(' ', $e); },
                         explode(',', $coordString)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-07T13:37:05.407

我偶然发现了同样的问题，但是在我的情况下，我发现诸如`POLYGON ((-1.23 2.34, 3.45 4.56), (3.21 4.32, 5.43 6.54))`上述正则表达式之类的模式对我执行第 1 步不起作用。经过一番挠头后，我得到了以下模式：`/(((([-]?\d+\.\d+) ([-]?\d+\.\d+))[, ]?)+[, ]?)+/`. 然后，您将遍历以逗号分隔的匹配项，最后以空格分隔。我不是正则表达式大师，所以也许有人有更好的解决方案。

# ruby-on-rails - 什么行为应该是测试的对象？

> ID：10579895
> 
> 赞同：2
> 
> 时间：2012-05-14T08:34:35.730
> 
> 标签：ruby-on-rails, testing, rspec, behavior

我尝试学习`Rspec`，但我不明白那是什么。让我解释。我阅读了很多文章和博客，并且能够理解一些事情（基本术语，如何安装，如何使用等）。但是主要看不懂。**什么是行为？**问题可能看起来很荒谬，但我真的不明白这一点。例如，我有简单的 rails 应用程序。博客。创建文章、评论等。那里的行为是什么？这个例子可能不好。我无法理解**行为**的本质。这个词对于对象（文章，评论）是什么意思？

能给我解释一下吗？也许有人可以举一些例子吗？什么行为需要测试？什么是行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:09:05.463

我看到的最简单的行为解释如下。

在 OOP 对象中发送和接收消息。接收到消息后，对象会发生**行为**，即它会更改其状态或将消息发送到另一个对象。

测试行为你应该检查对象的**行为**是否与它收到的消息相对应。

BDD 声明：您首先通过规范定义行为，然后编写代码以使对象按预期运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:41:22.623

Rspec 的好处是基于**行为**的编写规范。它是一个可重用的规范，可以通过共享不同的规范来创建和使用。在规范视图中，它通常被称为共享示例。只需按照您的教程的链接

```
http://blog.davidchelimsky.net/2010/11/07/specifying-mixins-with-shared-example-groups-in-rspec-2/

https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples 
```

# java - 如果取消了对多重继承的限制，那么 Java 中的接口和抽象类之间有什么区别？

> ID：10579896
> 
> 赞同：0
> 
> 时间：2012-05-14T08:34:41.937
> 
> 标签：java, oop, class, interface, abstract

我知道在 java 中询问接口和抽象类之间的区别是一个非常基本、经典和简单的问题。但这个问题有点不同。

我知道 Java 不支持从多个类继承以避免菱形问题，因此提出了接口的概念作为促进一种多重继承的替代方法。但是，这是接口存在的唯一原因吗？

假设由于某种原因，Java Guys 在其新版本之一中决定克服这一限制并允许从多个类继承，那么抽象类和接口之间会有什么区别？它们只是同义词吗？接口是否仍然有存在的理由，还是只是多余的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:37:45.303

如果一个类只有一个抽象方法，它就是“抽象的”；其他方法可以在抽象类中实现。接口无法做到这一点；它们*纯粹是*抽象的。

```
public interface Iface {
    void foo() {
        System.out.println("Foo");
    }
} 
```

```
$ javac Iface.java
iface.java:2：接口方法不能有主体
    无效 foo() {
               ^
1 个错误
```

但是如果你谈论的是一个*完全*抽象的类——所有的方法都是抽象的——那么如果你假设多重继承，我不会立即看到任何真正的剩余差异，不。

* * *

重新评论您的上述问题：

> 而是试图理解如果 Java 允许从多个类继承，它是否会在其语言规范中将接口作为实体。

如果 Java 从第一天开始就有多重继承，很可能不会，因为抽象类已经完成了这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T08:38:31.923

> *它们只是同义词吗？接口是否仍然有存在的理由，还是只是多余的？*

（由于您似乎意识到将抽象类与接口进行比较是一个常见问题，我假设您知道接口不能有状态或默认方法实现。）

**只有抽象方法**的类与接口相同，所以是的，从某种意义上说，我猜接口只是语法糖。

在代码中，

```
interface Foo {
    void method();
}

class MyClass extends MyBaseClass implements Foo {
    public void method() { ... }
} 
```

假设说相当于

```
abstract class Foo {
    public abstract void method();
}

class MyClass extends MyBaseClass, Foo {
    public void method() { ... }
} 
```

* * *

**相关问题（几乎是一个重复！）：**

*   [Java抽象类和接口](https://stackoverflow.com/questions/5094825/java-abstract-class-and-interface)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:04:01.617

接口已经是一种特殊的抽象类类型，它只允许在其中使用公共抽象方法。

这是一种迫使我们遵守无钻石合同的模式。

因此，如果您制作一个可以检查抽象类是否没有任何实现的编译器，您可以将所有接口替换为抽象类（遵守本合同）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:40:10.997

仍然我认为有区别。接口是一个只属于你的实现的契约，即使对多继承的限制被取消。在java中，你可以通过使用接口来派生多继承行为，但这可能不会带来所有的特性真正的多重继承（比如调用它的超类等）它只是一种技术。

抽象类是部分对象实体，也可能包含完整的实现。因此，即使可以扩展多个类，您对接口所做的事情也是不同的。我认为Java中的多重继承和抽象类和接口是不同的。

# javascript - jquery mobile中可折叠文本和图标的单独事件

> ID：10579898
> 
> 赞同：0
> 
> 时间：2012-05-14T08:34:46.573
> 
> 标签：javascript, mobile, jquery-mobile

是否可以在可折叠中处理两个不同的事件？第一个用于可折叠文本（已处理），第二个用于出现的图标（模拟按钮）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:38:56.680

可折叠内容仅触发 3 个事件...

`create`,`collapse`和`expand`

[有关文档，请参见此处](http://jquerymobile.com/test/docs/content/content-collapsible-events.html)

所以你不能为图标触发不同的事件。您可以做到这一点的唯一方法是实现您自己的可折叠内容 - 然后使用该`click`事件。

# iphone - 拖动图像并在触摸时调整它们的大小（iPhone）

> ID：10579899
> 
> 赞同：0
> 
> 时间：2012-05-14T08:34:49.490
> 
> 标签：iphone, ios, drag-and-drop, drawing

我正在创建一个应用程序，当用户单击任何对象并点击 UIView 时，图像应该放在视图上，并且在任何方向拖动该图像时，它应该重新调整大小。任何人有任何想法这样做，请让我知道。或者我可以获得任何示例代码吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:03:00.120

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event

{

UITouch *touch = [[event allTouches] anyObject];

CGPoint touchLocation = [touch locationInView:self.view];

if ([touch view] == photo) {

photo.center = touchLocation;

}

else if ([touch view] == photo1) {

    photo1.center = touchLocation;

}

} 
```

或者您可以在该链接中看到[http://www.roseindia.net/tutorial/iphone/examples/iphone-DoubleImageMoveasd.html](http://www.roseindia.net/tutorial/iphone/examples/iphone-DoubleImageMoveasd.html)

# ios - NSString stringByReplacingOccurrencesOfString 失败

> ID：10579901
> 
> 赞同：0
> 
> 时间：2012-05-14T08:35:00.000
> 
> 标签：ios, string, replace

我正在尝试使用 stringByReplacingOccurrencesOfString 将一个字符串替换为另一个字符串，但由于某种原因，它给了我这个错误：

> -[__NSCFNumber 长度]：无法识别的选择器发送到实例 0x6e49ef0 2012-05-14 16:30:49.741 coop[78129:f803] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFNumber 长度]：无法识别的选择器发送到实例 0x6e49ef0'

```
NSString *_currentGroup;
NSString *location = [current objectForKey:@"location"];
if(_currentGroup != nil) 
{
    NSLog(@"_currentGroup: %@", _currentGroup);
    // OUTPUT: _currentGroup: 92

    location = [location stringByReplacingOccurrencesOfString:@"%group_id%" withString:_currentGroup];
} 
```

当我尝试以下操作时，它就可以工作

> location = [location stringByReplacingOccurrencesOfString:@"%group_id%" withString:@"anyOtherString"];

我还缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:45:08.883

您的“NSString”实际上是一个`NSNumber`. 这就是错误告诉你的。

# c# - 使用 Stream CopyTo() 而不覆盖现有的输出文件

> ID：10579902
> 
> 赞同：4
> 
> 时间：2012-05-14T08:35:09.037
> 
> 标签：c#, file, filestream

如何在不覆盖现有输出文件的情况下使用[Stream CopyTo方法？](http://msdn.microsoft.com/en-us/library/dd782932.aspx)

```
public void MergeAndDeleteFiles(string outputFile, IEnumerable<string> inputFiles)
        {
            using (var output = File.OpenWrite(outputFile))
            {
                foreach (var inputFile in inputFiles)
                {
                    using (var input = File.OpenRead(inputFile))
                    {
                        input.CopyTo(output);
                    }
                }
             }
        } 
```

上述方法由于某种原因覆盖了 outputFile？在使用 CopyTo 方法之前是否需要设置输出文件的位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T08:40:00.813

而不是`OpenWrite`使用`Open`并传入`FileMode.Append`：

```
using (var output = File.Open(outputFile, FileMode.Append)) 
```

这会将输出附加到文件的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T08:38:55.043

如果要附加数据，请使用以下内容：

```
using (var output = new FileStream(outputFile, FileMode.Append, FileAccess.Write, FileShare.Write))
{ 
```

或者

```
using (var output = File.Open(outputFile, FileMode.Append))
{ 
```

正如奥德建议的那样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T08:40:31.517

使用 StreamWriter 写入文本文件：

```
// create a writer and open the file
TextWriter tw = new StreamWriter("date.txt");

// write a line of text to the file
tw.WriteLine(DateTime.Now);

// close the stream
tw.Close(); 
```

# sharepoint-2010 - Sharepoint 2010 日历与 Outlook 2010 的集成

> ID：10579904
> 
> 赞同：0
> 
> 时间：2012-05-14T08:35:12.737
> 
> 标签：sharepoint-2010, calendar, outlook-2010

我创建了一个日历列表，然后在列表设置中添加了与会者列。然后我创建了一个包含某些与会者的活动，类型为会议。后来通过功能区按钮中的连接到 Outlook 选项集成到 Outlook 2010。我可以在 Outlook 中查看创建的共享点日历​​以及默认的 Outlook 日历。但是当我选择一个活动时，它不会显示我通过 sharepoint 添加的与会者。

有没有办法向与会者展示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:35:48.190

没有使用本机连接公开自定义 SharePoint 列 Outlook 的好方法。Outlook 仅了解约会类型的一组严格的列。

我们一直在开发 Outlook 插件，以扩展功能并直接在 Outlook 2007/2010 中公开任何自定义列。[您可以在http://propersync.com/unifiedcalendar.aspx](http://propersync.com/unifiedcalendar.aspx)找到更多信息。

*免责声明 - 我是 ProperSync 团队的一员，希望这是一篇相关且有用的帖子。

# python - 使用 python apscheduler 调度作业

> ID：10579907
> 
> 赞同：1
> 
> 时间：2012-05-14T08:35:31.813
> 
> 标签：python, process, cron, monitoring, scheduling

我必须持续监控一个进程，并且我使用进程 ID 来监控该进程。我编写了一个程序，在进程停止后发送电子邮件，以便我手动重新安排它，但我经常忘记重新安排进程（基本上是另一个 python 程序）。然后我遇到了 apscheduler 模块，并使用 cron 样式调度 ( [http://packages.python.org/APScheduler/cronschedule.html](http://packages.python.org/APScheduler/cronschedule.html) ) 在进程停止后生成进程。现在，一旦进程的 PID 被杀死，我就可以生成该进程，但是当我使用 apscheduler 生成它时，我无法获取新调度进程的进程 ID (PID)；因此，我无法监控该过程。apscheduler 中是否有获取调度进程的进程 ID 的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:42:57.227

与其依靠 APSchule 返回 pid，不如让您的程序报告 pid 本身。守护进程拥有 pidfiles 是很常见的，它们是位于已知位置的文件，仅包含正在运行的进程的 pid。只需将您的主要功能包装成这样：

```
import os

try:
    with open("/tmp/myproc.pid") as pidfile:
        pidfile.write(str(os.getpid()))
    main()
finally:
    os.remove("/tmp/myproc.pid") 
```

现在，每当您想监控您的进程时，您可以首先检查是否存在 pid 文件，如果存在，则检索该进程的 pid 以进行进一步监控。这样做的好处是独立于 cron 的特定实现，并且如果您想编写更多与本地程序交互的程序，将来会更容易。

# c# - 温莎城堡“后期绑定”组件

> ID：10579913
> 
> 赞同：1
> 
> 时间：2012-05-14T08:35:56.353
> 
> 标签：c#, .net, nhibernate, inversion-of-control, castle-windsor

我的容器中注册了几个组件，Windsor 可以毫无问题地注入它们。现在我以这种方式为 NHibernate ISessionFactory 添加了一个新的注册：

```
foreach (KeyValuePair<string, string> _tenantItem in _contextWrapper.TenantsConnectionStrings)
        {
            var config = Fluently.Configure()
                .Database(
                    MsSqlConfiguration.MsSql2008
                    .UseOuterJoin()
                    .ConnectionString(_tenantItem.Value)
                    .FormatSql()
                    .ShowSql()
                )

                .ExposeConfiguration(ConfigurePersistence)
                .ProxyFactoryFactory(typeof(ProxyFactoryFactory))
                .BuildConfiguration();

            Kernel.Register(
                Component.For<ISessionFactory>()
                    .UsingFactoryMethod(config.BuildSessionFactory)
                    .Named(_tenantItem.Key)
                    .LifestyleTransient()
                    );
        } 
```

现在，如果我尝试检查我的容器，我会看到：

![在此处输入图像描述](../Images/f576d61166701f4a361ea8d7a1a1aa0c.png)

组件实现是“后期绑定”，Windsor 不会注入它。

怎么了？我可以检查什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T21:27:41.747

这里有两个独立且不相关的问题，所以让我依次回答。

*正如组件描述所说， “后期绑定”*仅仅意味着温莎不知道你的`ISessionFactory`静态实现类型。这不是担心的理由。

在您的情况下，构建实例完全取决于您指定的工厂方法，`config.BuildSessionFactory()`而且它甚至可能每次都不是相同的类型。

可以实现工厂方法，例如：

```
public ISessionFactory BuildSessionFactory()
{
   if (Today == DayOfWeek.Friday)
   {
      return new BeerOClockSessionFactory();
   }
   return SomeOtherSessionFactory();
} 
```

这很好，很正常。

您暗示的另一个问题表明您可能会遇到意外行为，其中对 的依赖`ISessionFactory`未按预期满足。

可悲的是，除非您对此进行更多解释，否则请分享您所看到的错误类型，我认为除了说“它应该可以正常工作”之外，我无能为力。

同样，当我们这样做时，我完全同意@raulg 的观点，即使会话工厂瞬态听起来不是一个特别好的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T17:26:16.543

它可能不喜欢您在运行时创建配置实例。

您最好为您的配置创建一个适当的类，将其注册到容器中，然后使用它来创建 ISessionFactory 实例。

```
public class MySessionFactoryBuilder : IMySessionFactoryBuilder
{
    private FluentConfiguration _fluentConfiguration = null;

    public MySessionFactoryBuilder()
    {
    }

    void Initialize(string connectionStringKey)
    {
        IPersistenceConfigurer persistenceConfigurer = null;

        persistenceConfigurer = MsSqlConfiguration.MsSql2008
                .UseOuterJoin()
                .ConnectionString(connectionStringKey)
                .FormatSql()
                .ShowSql()
                ;

        _fluentConfiguration = Fluently.Configure()
            .Database(persistenceConfigurer)
            .ExposeConfiguration(ConfigurePersistence)
            .ProxyFactoryFactory(typeof(ProxyFactoryFactory))
            .BuildConfiguration()
            ;
    }

    public ISessionFactory BuildSessionFactory(string connectionStringKey)
    {
        Initialize(connectionStringKey);
        return _fluentConfiguration.BuildSessionFactory();
    }

} 
```

您可以正常注册。然后在安装程序循环中注册多个 ISessionFactory，每个租户一个：

```
foreach (KeyValuePair<string, string> _tenantItem in _contextWrapper.TenantsConnectionStrings)
{

    container.Register(
    Component.For<ISessionFactory>()
        .UsingFactoryMethod(k => k.Resolve<MySessionFactoryBuilder>().BuildSessionFactory(_tenantItem.Value))
        .Named(_tenantItem.Key),

    Component.For<ISession>()
        .UsingFactoryMethod(k => k.Resolve<ISessionFactory>().OpenSession())
        .Named(_tenantItem.Key + "-nhsession")
        .LifeStyle.Transient
        );

} 
```

注意，我注册了 ISession 瞬态，但没有注册 ISessionFactory。通常，您希望尽可能长时间地保留 ISessionFactory，因为创建它的成本很高。

我还没有测试过它，但我猜这会解决它，因为会话工厂构建器的实现在编译时是已知的。

# jira - 如何在 Eclipse 中添加 JIRA 源代码以对其进行修改并查看更改？

> ID：10579916
> 
> 赞同：0
> 
> 时间：2012-05-14T08:36:19.147
> 
> 标签：jira, jira-plugin

*   1

    问题是管理版本的人没有输入正确
    的版本名称格式，这是项目集成后期的一个大问题。
    因此，我想为他们禁用该按钮。这样只有管理员才能
    管理版本。那么，有没有一种方法可以在不修改源
    代码的情况下做到这一点，或者唯一的解决方案是修改源代码？

    因此如何在 eclipse 中修改源代码并兑现更改。
    提前谢谢了

# javascript - 在谷歌地图 v3 中正确显示 kml？

> ID：10579921
> 
> 赞同：0
> 
> 时间：2012-05-14T08:36:39.393
> 
> 标签：javascript, html, google-maps-api-3

在 google earth 中有一个不错的功能，我可以在其中安装一个 kml 文件，它以这样一种方式加载它，以便我切换不同的层。在谷歌地图中，​​我正在寻找一种以类似方式显示 kml 文件的方法。我想要一个侧边栏，我可以在其中选择要显示的图层。我发现了这个：

[http://www.dyasdesigns.com/geoxml/](http://www.dyasdesigns.com/geoxml/)

但看起来它只适用于谷歌地图 v2。有什么类似的东西可以与 v3 一起使用吗？

我找到了这个 QA，但我正在寻找与 V3 一起使用的东西

编辑更多信息：我的身体：

```
<body onload='load()' style = "height:100%; margin:0">
<div id="map" style="width: 100%; height: 100%"></div>

 <script type="text/javascript">
//************Function in head***************************************************
        function load() {

        var myOptions = {

        //change this to zoom with markers
          center: new google.maps.LatLng(60, 5),
          zoom: 4,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        map = new google.maps.Map(document.getElementById("map"),myOptions);
        ctaLayer = new google.maps.KmlLayer('http://thoughtfi.com/NPDsFactGlobe.kml');
        ctaLayer.setMap(map);   
       }
    //load();

    var map;
    var ctaLayer;
    var markersArray = [];
    var startformat;
    var endformat;

</script>
</body> 
```

该网站的链接（如果我正在处理它，可能会上下浮动。）：[http ://thoughtfi.com/KMLtries.html](http://thoughtfi.com/KMLtries.html)

一张来自谷歌地球的图片。我想要左栏中文件夹的功能：http: [//thoughtfi.com/desired_look.png](http://thoughtfi.com/desired_look.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:53:27.147

[http://www.google.co.uk/search?q=google+maps+v3+kml+parser](http://www.google.co.uk/search?q=google+maps+v3+kml+parser)

Ross/Udell：[http](http://code.google.com/p/geoxml3/)
://code.google.com/p/geoxml3/ Lance Dyas 替代 geoxml：[http ://code.google.com/p/geoxml-v3/](http://code.google.com/p/geoxml-v3/)

其他人可能也可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:24:44.350

你考虑过`google.maps.KmlLayer`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer)类吗？它提供了一种使用标准库内工具加载、显示和隐藏 KML 文件的方法。[**开发人员指南的KML 和 GeoRSS 图层**](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)[部分](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)`KmlLayer`提供了有关使用的介绍性教程。[](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)

# android - addTextChangedListener 与带有潜文本的列表视图

> ID：10579922
> 
> 赞同：4
> 
> 时间：2012-05-14T08:36:44.793
> 
> 标签：android, listview, android-emulator, textwatcher

我想在列表中搜索并再次在列表中显示结果，所以我使用了 addtextchangelistener，但找不到一种方法让它与带有 subtext 的 listview 一起使用

这是我的代码：

```
 package com.android;

    import java.io.FileNotFoundException;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.io.LineNumberReader;
    import java.util.ArrayList;
    import java.util.HashMap;
    import java.util.List;
    import java.util.Map;
    import java.util.StringTokenizer;

    import android.app.ListActivity;
    import android.os.Bundle;
    import android.text.Editable;
    import android.text.TextWatcher;
    import android.util.Log;
    import android.view.View;
    import android.widget.ArrayAdapter;
    import android.widget.EditText;
    import android.widget.ListView;
    import android.widget.SimpleAdapter;
    import android.widget.TextView;

    public class MyListDemoActivity extends ListActivity {
        /** Called when the activity is first created. */
        TextView tv;

        //** List<String> content;

        EditText actv;
        List<String> arr_sort;
        //** ArrayAdapter<String> adapter;
        SimpleAdapter simpleadapter;
        ListView lv;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            String line = " ";

            LineNumberReader linenoreader = null;
            StringTokenizer stringtokanixer = null;
        //**    content = new ArrayList<String>();
            List<Map<String,String>> data= new ArrayList<Map<String,String>>();

            lv = (ListView) findViewById(android.R.id.list);

            try {

                InputStream istream = getResources().openRawResource(R.raw.grelist);
                InputStreamReader streamreader = new InputStreamReader(istream);

                linenoreader = new LineNumberReader(streamreader);
                linenoreader.mark(15);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }// try catch ends here

            Log.v("getting", "working");

            for(int i=0;i<8;i++)
            {
                Map<String,String> datum= new HashMap<String,String>(2);
                try {
                    line = linenoreader.readLine();
                    Log.v("item",line);
                } catch (IOException e) {

                    e.printStackTrace();
                }
                Log.v("getting", line);
                stringtokanixer = new StringTokenizer(line);

                String st = stringtokanixer.nextToken();
                String meaning="";
                while (stringtokanixer.hasMoreTokens()) {
                    meaning +=" " +stringtokanixer.nextToken();

                }// for ends

                // map is used to add word and meaning 
                datum.put("word",st);
                datum.put("meaning",meaning);
                data.add(datum);

                //List<String> is usedto add
        //**        content.add(st);
            }

            simpleadapter = new SimpleAdapter(this, data, android.R.layout.simple_list_item_2, new String[]{"word","meaning"}, new int[]{android.R.id.text1,android.R.id.text2});

            // setListAdapter(adapter);

            lv.setAdapter(simpleadapter);
            tv = (TextView) findViewById(R.id.textView1);

            actv = (EditText) findViewById(R.id.editText1);

            /*  
                actv.addTextChangedListener(new TextWatcher() {
                int len = 0;

                @Override
                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
                        arr_sort = new ArrayList<String>();

                        len = actv.getText().length();

                        for (int i = 0; i < content.size(); i++) {
                            if (len <= content.get(i).length()) {
                                if (actv.getText()
                                        .toString()
                                        .trim()
                                        .equalsIgnoreCase(
                                                (String) content.get(i).subSequence(0,
                                                        len))) {

                                    arr_sort.add(content.get(i));
                                    Log.v("infor loop afterTextChanged", s.toString());
                                }

                            }

                        }

            //          adapter.notifyDataSetChanged();

                        adapter = new ArrayAdapter<String>(MyListDemoActivity.this,
                            android.R.layout.simple_list_item_1, arr_sort);
                        setListAdapter(adapter);
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                        Log.v("beforetextchange","hello here");
                }

                @Override
                public void afterTextChanged(Editable s) {
                    Log.v("aftertextchange","hello here");

                }
            }); // text watcher class ends here
    */

        }// on create ends here

        public void onListItemClick(ListView ls, View v, int position, long id) {
            //tv.setText(content.get(position));

            // tv.setText(content[position]) // in case of string

        }// endsd here onListItemClick(
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T05:46:23.007

我已经回答了两个 StackOverflow 问题本身，你可以，

首先是使用`getFilter()`android 为 Adapter 类提供的 Filterable 接口进行过滤。您可以从[`here`](https://stackoverflow.com/questions/8678163/list-filter-custom-adapter-dont-give-result/8678198#8678198).

其次是使用外部 jar [`Lambdaj`](http://code.google.com/p/lambdaj/)，这是从列表中过滤大量数据的最佳和有效方式。您也可以从[`here`](https://stackoverflow.com/a/10396356/726863).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T12:00:40.323

我的理解是： - 只是你想过滤`ListView`. 对？

如果我误解了这个问题，请告诉我！！！

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="vertical"
    android:layout_width="fill_parent" android:layout_height="fill_parent">

    <EditText android:id="@+id/search" android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:inputType="text" />

    <ListView android:id="@+id/list" android:layout_width="fill_parent" android:layout_height="fill_parent" />

</LinearLayout> 
```

**列表视图搜索活动**

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.app.Activity;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class ListViewSearchActivity extends Activity implements TextWatcher {

    private SimpleAdapter simpleAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        EditText search = (EditText) findViewById(R.id.search);
        search.addTextChangedListener(this);

        List<Map<String, String>> data = new ArrayList<Map<String, String>>();
        for(int i=0;i<8;i++) {
            Map<String,String> map = new HashMap<String, String>(2);
            map.put("word", "word " + i);
            map.put("meaning", "meaning " + (i + 10));
            data.add(map);
        }

        ListView listView = (ListView) findViewById(R.id.list);
        this.simpleAdapter = new SimpleAdapter(this, data, android.R.layout.simple_list_item_2, new String[]{"word","meaning"}, new int[]{android.R.id.text1,android.R.id.text2});
        listView.setAdapter(this.simpleAdapter);
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    @Override
    public void afterTextChanged(Editable s) {
        this.simpleAdapter.getFilter().filter(s.toString());
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T18:32:57.627

以下是我将如何更改您的代码以使其工作的方法：

**1.**我会删除`arr_sort`变量，并添加另一个`ArrayList`用于`Maps`保存过滤值：

```
//  List<String> arr_sort;
    final ArrayList<Map<String, String>> data = 
        new ArrayList<Map<String, String>>();
    final ArrayList<Map<String, String>> filteredData = 
        new ArrayList<Map<String, String>>(); 
```

我也会让它们成为最终的，因为没有必要为它们分配全新的值，而我们可以修改它们的内容。

**2.**应该总是显示过滤后的`simpleadapter`数据，所以必须修改：

```
filteredData.addAll(data); // fill up filteredData initially with the whole list
simpleadapter = new SimpleAdapter(this, filteredData, 
        android.R.layout.simple_list_item_2, 
        new String[] { "word", "meaning" }, 
        new int[] {android.R.id.text1, android.R.id.text2 }); 
```

**3.**接下来我将过滤代码从`onTextChanged`方法移动到`afterTextChanged`方法，以根据输入的整个文本执行过滤。使用 Regexp 也比所有字符串操作（+、子字符串...）消耗的资源更少

这样您的`TextWatcher`实现将如下所示：

```
actv.addTextChangedListener(new TextWatcher()
{
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count)
    {}

    @Override
    public void beforeTextChanged(CharSequence s,int start,int count,int after)
    {}

    @Override
    public void afterTextChanged(Editable s)
    {
        Log.v("MLDA", "afterTextChanged");
        // a temporary source list for better performance:
        // if it's possible, use the smaller filtered list
        final ArrayList<Map<String, String>> tmpSource = 
            new ArrayList<Map<String,String>>();
        tmpSource.addAll(
            (filterText.length() > 0 && s.toString().contains(filterText)) 
            ? filteredData : data);
        filterText = s.toString();

        // a temporary result list to fill with the filtered data
        final ArrayList<Map<String, String>> tmpResult = 
            new ArrayList<Map<String,String>>();

        if (filterText.length() == 0)
            tmpResult.addAll(data); //if no filter, return the base data
        else
        {
            final Pattern pattern = 
                Pattern.compile("(?i)" + Pattern.quote(s.toString()));
            Matcher matcher;
            for (final Map<String, String> map : tmpSource)
            {
                //first match against the "word":
                matcher = pattern.matcher(map.get("word"));
                if (!matcher.find())
                {
                    //if no matches were found, try to match the "meaning"
                    matcher = pattern.matcher(map.get("meaning"));
                    if (!matcher.find())
                        continue; //if no match, move to the next map
                }
                tmpResult.add(map); //match found: add to new list
            }
        }

        filteredData.clear();
        filteredData.addAll(tmpResult);
        simpleadapter.notifyDataSetChanged(); // update display
    }
}); 
```

使用临时列表可以让您在没有 gui 更新的情况下构建整个过滤数据（如果`filteredData`直接向列表中删除/添加项目，适配器将触发更新方法）。

另请注意，通过检查新过滤器文本是否包含旧过滤器文本，我们可以使用当前`filteredData`列表作为源。

类似地，如果`filterText`是一个空字符串，则没有必要执行任何匹配，我们可以简单地返回`base`列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T18:54:24.003

```
ArrayList<String> tempList ;
edtText.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                if (!edtText.getText().toString().equalsIgnoreCase("")){
                    tempList = new ArrayList<String>();
                    tempList.clear();
                    String text = filterText.getText().toString();
                    for(int i=0 ;i< listname.size();i++){
                        //if(globalconstant.mosq_list.get(globalconstant.hashformosq.get(globalconstant.tempList.get(i))).name.toUpperCase().toString().contains(text.toUpperCase())){
                        if(listname.get(i).toUpperCase().toString().contains(text.toUpperCase())){
                            tempList.add(listname.get(i));
                        }
                    }
                 used changed tempList
                }else{

                    unchaged tempList
                }
            }
        });
    } 
```

# javascript - 通过单击 href url 加载新页面时不调用 JavaScript 中的函数

> ID：10579927
> 
> 赞同：0
> 
> 时间：2012-05-14T08:37:09.687
> 
> 标签：javascript, jquery, html

我正在使用 jQuery Mobile 创建一个 Web 应用程序。我的 href 链接和我的 javascript 代码有问题。这是我的`index.html`和中的javascript代码`curate.html`：

```
$(document).ready(function(){
   alert("Hello!");
}); 
```

在 html 代码中，它只是一个导航栏的代码：

```
<ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="curate.html">curate</a></li>
</ul> 
```

所以问题是：当我在主页上时，例如，点击 curate 链接到 curate 页面，警报不会弹出。似乎该函数未在 javascript 中调用。但是，如果我重新加载策划页面，它会起作用。从策划页面到主页的同样问题。

如果我将 html 代码更改为

```
<ul>
    <li><a href="index.html" >Home</a></li>
    <li><a onclick="gotoCurate()">curate</a></li>
</ul> 
```

并在 index.html 中添加 js 代码：

```
function gotoCurate() { 
    window.location="curate.html"
} 
```

类似于策展人页面。

我想也许在使用href时，页面并没有真正加载。我`<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">`在头部添加，但它不起作用。由于某些原因，我想使用 href 在页面之间进行定向。那么有谁知道如何在保留href链接的同时解决问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:41:01.220

你需要改变：

```
$(document).ready(function(){alert("Hello!"); 
```

至：

```
$(document).ready(function(){alert("Hello!")}); 
```

我还将结构分解为不同的行，这对于您将来何时可能想要改进系统更加清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:50:05.273

要查看使用 javascript 开发时出了什么问题，您应该使用导航器的开发者控制台，这很有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T00:00:51.047

问题是由 jQuery Mobile 引起的。这是详细信息：http: [//jquerymobile.com/demos/1.0a4.1/docs/pages/docs-pages.html](http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-pages.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:47:00.687

尝试包括这个 `<script type="text/javascript" src="jquery-1.4.2.js"></script>`

[这个](http://www.roseindia.net/ajax/jquery/jquery-Hello-world-Alert.shtml)例子应该会有所帮助。

# java - audioRecord 如何以指定的采样率检索数据

> ID：10579928
> 
> 赞同：1
> 
> 时间：2012-05-14T08:37:11.003
> 
> 标签：java, android, fft, android-audiorecord

我的实验是这样的：首先，我使用matlab创建一个指定的wave文件，速率为44100，这意味着任何持续1s的片段包含44100个元素，这些元素呈现为double。然后，我使用智能手机的麦克风来检索波形。并且采样率为44100，为了还原波形。但是，audioRecord 将数据存储为字节，而我想要的是双倍的。从字节转换为双精度听起来很合理，但我仍然混淆采样率 44100 意味着 audioRecord 应该在 1s 或 44100*4 字节中记录 44100 字节，因为双精度包含 4 个字节？我已经提交的其他实验：使用录音软件检索波形并存储在 .wav 中，分别通过 matlab 的 wavread 和 java 读取 .wav。到 1s，我们得到 44100 个元素，并在下面列出：-0.00164794921875
1.52587890625E-4
2.74658203125E-4
-0.003326416015625
0.001373291015625
-4.2724609375E-4
0.00445556640625
9.1552734375E-5
-9.1552734375E-4
7.62939453125E-4
-0.003997802734375
9.46044921875E-4
-0.00103759765625
0.002471923828125
0.001922607421875
-0.00250244140625
8.85009765625E-4
-0.0032958984375
8.23974609375E-4
8.23974609375E -4
有人知道audioRecord 将在1s 内以44100 的采样率检索多少个元素吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:13:06.007

AudioRecord 的默认设置是为每个样本返回每个通道 16 位 ( `ENCODING_PCM_16BIT`)。

现在有两个读取重载，可让您指定一个 short[]（16 位）或一个 byte[]（8 位）缓冲区。

```
int read(short[] audioData, int offsetInShorts, int sizeInShorts)
int read(byte[] audioData, int offsetInBytes, int sizeInBytes) 
```

所以一个 1 秒的单声道缓冲区（1 个通道）应该有一个`short[]`长度为 44100 的缓冲区。立体声（2 个通道）应该有 88200，等等......

我会避免使用`byte[]`缓冲区，除非您`ENCODING_PCM_8BIT`出于某种原因将 AudioRecord 格式设置为（不保证所有设备都支持）。

现在，如果您想将这些短值转换为双精度值，您必须意识到`double`您在 matlab 中记录的值`double-precision normalized samples`是标准化的，`[-1 to 1]`而`short`值将来自，`[-32768 to 32767]`因此您必须编写一个转换函数，而不是仅仅尝试强制转换从短到双的数字。

# c++ - 使用 NDK6 编译的 OpenCV 2.3.1 在 Galaxy Tab 10.1 上崩溃

> ID：10579933
> 
> 赞同：2
> 
> 时间：2012-05-14T08:37:36.213
> 
> 标签：c++, opencv, android-ndk, galaxy-tab

我有以下问题：`libopencv_java.so`使用 NDK6 从 OpenCV 2.3.1 编译的库在三星 Galaxy S 上运行良好，但在 Galaxy Tab 上运行良好。构建设置：

-MacOS X

-NDK6

- 用霓虹灯建造

该库似乎在 double->integer 转换时失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:53:53.117

Galaxy Tab 似乎使用 Nvidia Tegra 2 CPU。最近在 NDK 中修复了一个错误，该错误会为 Tegra 2 处理器生成与浮点指令相关的无效代码。这是来自 NDK r7c[更改日志](http://developer.android.com/sdk/ndk/index.html)的引用：

> 此版本的 NDK 包括对基于 Tegra2 的设备的重要修复，以及一些额外的修复和改进：
> 
> 重要的错误修复：修复了 GNU STL armeabi-v7a 二进制文件，使其不会在非 NEON 设备上崩溃。NDK r7b 提供的文件配置不正确，导致在尝试使用某些浮点函数（例如 cosf、sinf、expf）时在基于 Tegra2 的设备和其他设备上崩溃。

因此，请尝试使用至少 NDK r7c 重新编译 OpenCV。

# java - 如何使arraylist的字段唯一？

> ID：10579934
> 
> 赞同：-5
> 
> 时间：2012-05-14T08:37:38.583
> 
> 标签：java, collections, arraylist, unique-key

```
class Employee implements Comparable<Employee> 
{

    public Employee(int id, String name,int salary ,String designation)
    {..} 
```

//getter 和 setter

```
}
 public class TestEmployeeSort
{
     public static void main(String[] args) 
     {
         List<Employee> col = new ArrayList<Employee>();
             Employee one =  new Employee(**2**, "rahul",100, "bc");
         Employee oone =  new Employee(**2**, "sfdful",1300, "bdfsc");
         col.add(one);
         col.add(oone);

     }
} 
```

在这里，我制作了一个程序，其中对象中的 4 个字段现在从 arraylist 对象中传递名为 id、name、salary 和 designation 我想从 4 个使用的名为“id”的对象中提取一个实体，并希望使其唯一，以便不能插入具有重复 id 的对象...（类似于 set 的工作，但不想在这里使用 set）如何完成 .....我尝试在构造函数中创建一个方法并传递“this.id” " 在一组中检查重复项，但仍然无法正常工作？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:41:00.893

您可以使用`java.util.Set`实现而不是 a`List`来确保其中没有重复项。这取决于`equals`，必须实现它来比较 id。

如果您想对某些内容进行排序，则可以使用该`TreeSet`实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T08:39:14.027

听起来您想使用[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)，而不是 List：

> 不包含重复元素的集合。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T08:45:23.147

我建议创建一个类来扩展 ArrayList，并覆盖 add 方法，所以当你尝试插入时，首先调用 contains 方法，如果它已经在列表中，则返回 false：

```
@Override
public boolean add(E e){
 if(super.contains(e){
    return false;
 }else{
    super.add(e);
 }
return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:41:31.607

如果你死心塌地使用 ArrayList，也许你应该扩展它并实现你自己的`add`函数。

# xcode - 在 Xcode 4.3 中创建没有情节提要的项目

> ID：10579938
> 
> 赞同：1
> 
> 时间：2012-05-14T08:37:57.337
> 
> 标签：xcode, storyboard

如果我想在 Xcode 4.3 中创建没有情节提要的项目并仅使用 Xcode 的 ARC 功能。

我们如何在没有故事板的情况下创建应用程序，因为我们不需要导航控制器，在应用程序中并使用 addsubview，就像我们在早期版本中用于编码一样。

以 Xcode 4.3 编码的应用程序是否可以部署在 iOS 4.0、iOS 4.3 上，或者仅适用于 iOS 5

请告诉我..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T15:33:47.570

令我非常沮丧的是，Apple 删除了 Xcode 5 中的“使用故事板”复选框。每个项目都是用可怕的 UIStoryboard 创建的。我编写了一个将 Xcode 4 的项目模板转换为 Xcode 5 的工具，因此您可以再次创建带有或不带有情节提要的项目。你可以在 GitHub 上找到它：[https ://github.com/jfahrenkrug/Xcode4templates](https://github.com/jfahrenkrug/Xcode4templates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:16:56.850

当您创建一个新项目时，可以选择“使用情节提要”。不要勾选那个。

请勾选“使用自动引用计数”框。

在 Xcode 4.3 中开发的应用程序可以针对 5.0 以下的平台，这取决于您确保包含/排除适当的功能。

# iphone - 在 iphone 的屏幕上移动 UIView

> ID：10579939
> 
> 赞同：-3
> 
> 时间：2012-05-14T08:37:59.707
> 
> 标签：iphone, ios

如何像 iphone 中的 UITableView 一样在屏幕上上下移动 UIView？请解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:43:40.393

你需要一个滚动视图。`UIScrollView`，这里有一些教程`UIScrollViews`：

[Xcode 4 教程 UIScrollView](http://www.youtube.com/watch?v=mws6Zbq_y6c)

[UIScrollView 类参考 Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

[UIScrollView 的另一个教程](http://czetsuya-tech.blogspot.com/2010/12/iphone-xcode-create-simple-uiscrollview.html)

UIScrollView 类支持显示大于应用程序窗口大小的内容。它使用户能够通过滑动手势在该内容中滚动，并通过捏合手势放大和缩小部分内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:27:17.327

你的问题有点模棱两可。如果您正在寻找视图位置之间的交换...例如将一个视图移动到另一个视图之上，或者例如将顶部的视图移动到底部并将底部的视图移动到顶部，那么您可能需要查看 [https:/ /developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html](https://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html)

# iphone - UITableView 的预加载圆圈

> ID：10579940
> 
> 赞同：0
> 
> 时间：2012-05-14T08:38:05.290
> 
> 标签：iphone, objective-c, asynchronous, preloader

我搜索了很多论坛，但没有找到，我的问题是

> 我需要从网络上预加载一些数据以加载到 UITableView。

我看到一些应用程序解决了这个问题，当显示 UITableView 时，它们将“**等待圆圈**”显示为模态视图，并且在加载数据后只是隐藏这个圆圈。

1.  有没有简单的解决方案来做到这一点？
2.  我需要做什么？
3.  我需要什么样的请求：同步还是异步？
4.  如何显示这个圈子，我需要显示animatedGif还是有一些内部/外部控制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:46:17.093

您需要为您的“等待圈”-（活动指示器）制作一个 NSThread。

1）线程[我如何创建一个不是主线程的 NSThread](https://stackoverflow.com/questions/9936267/how-do-i-create-an-nsthread-that-isnt-the-main-thread-without-performing-a-sele)。

2）活动指示器[如何使用活动指示器视图](https://stackoverflow.com/questions/593234/how-to-use-activity-indicator-view-on-iphone)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:09:58.163

```
 - (void)showWaitingView {

NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

CGRect frame = CGRectMake(90, 190, 32, 32);
UIActivityIndicatorView* progressInd = [[UIActivityIndicatorView alloc] initWithFrame:frame];
[progressInd startAnimating];
progressInd.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;

frame = CGRectMake(130, 193, 140, 30);
UILabel *waitingLable = [[UILabel alloc] initWithFrame:frame];
waitingLable.text = @"Processing...";
waitingLable.textColor = [UIColor whiteColor];
waitingLable.font = [UIFont systemFontOfSize:20];;
waitingLable.backgroundColor = [UIColor clearColor];
frame = [[UIScreen mainScreen] applicationFrame];
UIView *theView = [[UIView alloc] initWithFrame:frame];
theView.backgroundColor = [UIColor blackColor];
theView.alpha = 0.7;
theView.tag = 999;
[theView addSubview:progressInd];
[theView addSubview:waitingLable];

[progressInd release];
[waitingLable release];

[window addSubview:[theView autorelease]];
[window bringSubviewToFront:theView];
[pool drain];
  }

 - (void)removeWaitingView {
UIView *v = [window viewWithTag:999];
if(v) [v removeFromSuperview];

} 
```

# bash - Bash - 从字符串中提取数字

> ID：10579941
> 
> 赞同：5
> 
> 时间：2012-05-14T08:38:14.653
> 
> 标签：bash, shell, unix

我得到一个看起来像这样的字符串：

“abcderwer 123123 10,200 asdfasdf iopjjop”

现在我想按照 xx,xxx 方案提取数字，其中 x 是 0-9 之间的数字。例如 10,200。必须是五位数字，并且必须包含“，”。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T08:42:12.450

您可以使用`grep`：

```
$ echo "abcderwer 123123 10,200 asdfasdf iopjjop" | egrep -o '[0-9]{2},[0-9]{3}'
10,200 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T13:27:47.410

在纯 Bash 中：

```
pattern='([[:digit:]]{2},[[:digit:]]{3})'
[[ $string =~ $pattern ]]
echo "${BASH_REMATCH[1]}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T08:42:21.743

查看模式匹配和正则表达式。

链接：

[Bash 正则表达式](http://www.linuxjournal.com/content/bash-regular-expressions)

[模式和模式匹配](http://wiki.bash-hackers.org/syntax/pattern)

[所以问题](https://stackoverflow.com/questions/304864/how-do-i-use-regular-expressions-in-bash-scripts)

如上所述，使用模式匹配的一种方法是使用 grep。其他用途：echo 支持模式（globbing），find 支持正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T09:13:50.487

简单的模式匹配（glob 模式）内置在 shell 中。假设你有字符串`$*`（也就是说，它们是你脚本的命令行参数，或者你已经`set`在你获得的字符串上使用过），试试这个：

```
for token; do
  case $token in
    [0-9][0-9],[0-9][0-9][0-9] ) echo "$token" ;;
  esac
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T14:22:34.100

一个稍微不典型的解决方案：

```
< input tr -cd [0-9,\ ] | tr \  '\012' | grep '^..,...$' 
```

（第一个 tr 删除除逗号、空格和数字之外的所有内容。第二个 tr 用换行符替换空格，将每个“数字”放在单独的行上，并且 grep 丢弃除符合您的标准的那些之外的所有内容。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T09:17:10.097

以下使用输入数据字符串的示例应该使用 sed 解决问题。

```
$ echo abcderwer 123123 10,200 asdfasdf iopjjop | sed -ne 's/^.*\([0-9,]\{6\}\).*$/\1/p'
10,200 
```

# php - 插入大量数据 [PHP, MySQL]

> ID：10579942
> 
> 赞同：0
> 
> 时间：2012-05-14T08:38:17.677
> 
> 标签：php, mysql

我在 MySQL 中有一个大数据集（用户、公司、联系人）？大约 100 万条记录。

现在我需要从大约 100000 条记录的导入文件 (csv) 中导入新用户、公司、联系人。我从文件中记录了所有三个要素（用户、公司、联系人）的所有信息。此外，在生产中我不能使用加载数据（只是没有那么多权利:(）。

因此，应该将三个步骤应用于该数据集。- 与现有的数据库数据进行比较 - 更新它（如果我们会在上一步找到一些东西） - 并插入新的记录

我在服务器上使用 php 来做到这一点。我可以看到两种方法：

*   一次从文件中读取所有数据，然后使用这个 BIG 数组并应用这些步骤。
*   或从文件中逐行读取并通过步骤传递每一行

哪种方法更有效？按 CPU、内存或时间使用

我可以使用交易吗？或者它会减慢整个生产系统？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:41:33.967

尽管读取整个文件会*稍微*快一些，但CPU 时间/时间不会*太多。*但是，对于这么大的数据集，将所有记录读入内存所需的额外内存将大大超过时间优势——我肯定会一次处理一行。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:41:16.113

您是否知道 phpMyAdmin 具有用于大型 SQL 文件的“可恢复导入”的漂亮功能？

只需在*部分导入部分选中***“允许中断导入”**即可。瞧，PhpMyAdmin 将停止并循环，直到所有请求都被执行。

 *仅“使用工具”而不是“重新发明轮子”可能更有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:57:49.747

我认为，第二种方法更容易接受：

1.  创建更改列表（它将是一个单独的表）
2.  逐行更新（例如，使用“updflag”字段将每一行标记为已更新）
3.  使用事务在后台执行此过程。**

# mysql - 为什么不会创建此表

> ID：10579943
> 
> 赞同：0
> 
> 时间：2012-05-14T08:38:18.520
> 
> 标签：mysql, database

我正在尝试创建下表，但它不会创建？？

```
use [TagHolderDB]
CREATE TABLE TBLSearchTags 
(
  TagID int(11), --NOT NULL AUTO_INCREMENT,
  Tagterm varchar(255) NOT NULL DEFAULT '',
  Tagcounter int(11) NOT NULL DEFAULT '1',
  TaglastSearch datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (TagID),
  --KEY Tagterm  (Tagterm)
) --ENGINE=TagHolderDB; 
```

当前错误是：

> 消息 2716，级别 16，状态 1，行 2 列、参数或变量 #1：无法在数据类型 int 上指定列宽。

当我移开评论时也会出现不同的错误-

我需要这一切来工作，因为我正在学习一个教程，有人能告诉我我做错了什么吗？

当我删除 -- 评论时出现错误：

> 消息 102，级别 15，状态 1，第 4 行“AUTO_INCREMENT”附近的语法不正确。
> 
> 消息 156，级别 15，状态 1，第 9 行 关键字“KEY”附近的语法不正确。
> 
> 消息 102，级别 15，状态 1，第 10 行 '=' 附近的语法不正确。

如果有人可以向我解释 ENGINE 的作用，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:41:44.443

Int 数据类型没有长度。

尝试这个：

```
use [TagHolderDB]
CREATE TABLE TBLSearchTags 
(
  TagID int, --NOT NULL AUTO_INCREMENT,
  Tagterm varchar(255) NOT NULL DEFAULT '',
  Tagcounter int NOT NULL DEFAULT '1',
  TaglastSearch datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (TagID),
  --KEY Tagterm  (Tagterm)
) --ENGINE=TagHolderDB; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:42:26.933

我认为这个错误是不言自明的。

> 您不能在数据类型 int 上指定列宽。

一个 SQL 整数总是占用 4 个字节的存储空间，范围从 -2147483648 到 2147483647。

所以替换`int(11)`为`int`.

```
CREATE TABLE [dbo].[TBLSearchTags](
    [TagID] [int] IDENTITY(1,1) NOT NULL,
    [Tagterm] [varchar](255) NOT NULL,
    [TagCounter] [int] NOT NULL CONSTRAINT [DF_TBLSearchTags_TagCounter]  DEFAULT ((1)),
    [TaglastSearch] [datetime] NOT NULL CONSTRAINT [DF_TBLSearchTags_TaglastSearch]  DEFAULT ('1753-01-01'),
 CONSTRAINT [PK_TBLSearchTags] PRIMARY KEY CLUSTERED 
(
    [TagID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T08:42:50.833

代替

```
NOT NULL AUTO_INCREMENT, 
```

做

```
IDENTITY(1,1) NOT NULL 
```

并替换`int(11)`为`int`：

```
use [TagHolderDB]
CREATE TABLE TBLSearchTags 
(
  TagID int IDENTITY(1,1) NOT NULL,
  Tagterm varchar(255) NOT NULL DEFAULT '',
  Tagcounter int NOT NULL DEFAULT '1',
  TaglastSearch datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (TagID)
) 
```

# d3.js - d3.scale.quantile 是如何工作的？

> ID：10579944
> 
> 赞同：17
> 
> 时间：2012-05-14T08:38:25.400
> 
> 标签：d3.js

这句话的含义是什么？

```
quantize = d3.scale.quantile().domain([0, 15]).range(d3.range(9)); 
```

我看到域是：

> 0 - 0
> 1 - 15

范围是从 0 到 8 和 quantize.quantiles

```
0 - 1.6
1 - 3.3
2 - 4.9
3 - 6.6
4 - 8.3
5 - 9.9
6 -11.6
7 -13.3 
```

quantize.quantiles 的值是如何计算的？我试图打电话`quantize(2)`，但结果是`1`。如何`quantile`工作？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-07-09T16:52:45.240

分位数尺度的动机是获得代表数据集中值的实际分布的类。因此，有必要在构建过程中为其提供完整的值列表。然后，比例尺将输入域（由这些值定义）拆分为区间（分位数），使得大约相同数量的值落入每个区间。

从文档中：

> *为了计算分位数，输入域被排序，并被视为一组离散值。*

因此，在指定域时，我们将整个值列表提交给比例：

```
var scale = d3.scale.quantile()
  .domain([1, 1, 2, 3, 2, 3, 16])
  .range(['blue', 'white', 'red']); 
```

如果我们然后运行：

```
scale.quantiles() 
```

它将输出 [2, 3]，这意味着我们的值群被分成三个子集，分别由“蓝色”、“白色”和“红色”表示：

```
[1, 1] [2, 2] [3, 3, 16] 
```

请注意，当您要显示的数据中存在异常值时，应避免使用此比例。在上面的示例中，16 是落入上分位数的异常值。它被分配了与 3 相同的类，这可能不是所需的行为：

```
scale(3)   // will output "red"
scale(16)  // will output "red" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T02:47:16.080

我建议阅读[quantile scale 文档](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-quantile_quantiles)，尤其是 quantize.quantiles()

但基本上，d3 看到该比例的输出范围内有 9 个值，因此它根据 2 值数据集创建 9 个分位数：[0, 15]。
这导致您在问题中显示的 quantize.quantiles() 值： [1.6, 3.3, .. ,13.3] ，这些代表分位数的范围 - 小于 1.6 的任何值都将映射到输出的第一个元素范围（在这种情况下为零）。小于 3.3 和大于 1.6 的任何值都将映射到输出范围的第二个元素（一）。因此 quantize(2) = 一，正如预期的那样。

# c++ - 将 unique_ptr 插入地图，指针被破坏

> ID：10579953
> 
> 赞同：4
> 
> 时间：2012-05-14T08:39:01.950
> 
> 标签：c++, c++11, stdmap, unique-ptr

我有以下（简化）类：

```
class Operator {
private:
    std::map<std::string, std::unique_ptr<Operand>> op;

public:
    template <class T>
    void insertOperand(std::string const &s, T o = T()) {
        op.insert(std::pair<std::string, std::unique_ptr<StreamOperand>>(
            s, std::move(std::unique_ptr<T>(new T(o)))
        );
    }

    void setOperandsValue(std::string const &o, int v) {
        op.find(o)->second->setValue(v);
    }
}; 
```

插入新`Operand`作品没有任何问题。但是，当函数返回时，析构函数被调用，因此`map`调用时不包含任何对象`setOperandsValue`。我使用 DDD 观察到了这一点：在末尾`insertOperand` `Operator::~Operator()`被调用。

在查看[Using std::unique_ptr with STL](https://stackoverflow.com/q/4637442/172695)之后，我介绍了（更好：使用过）`std::move`，但要么没有正确放置，要么我遗漏了一些东西（很可能由于缺乏知识）。我没有使用`map::emplace`，因为它不可用。

**编辑：**析构函数调用是有效的，因为它正在破坏`new T(o)`. 无论如何，`map`进入时仍然是空的`setOperandsValue`。

**编辑#2：**在输入`setOperandsValue`和执行`op.find(o)`结果是`op.end`，即找不到条目，​​虽然我之前已经添加了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:53:52.710

我不认为你的指针被破坏了。你在这里看到的：

```
template <class T>
void insertOperand(std::string &s, T o = T()) {
    op.insert(std::pair<std::string, std::unique_ptr<StreamOperand>>(
        s, std::move(std::unique_ptr<T>(new T(o)))
    );
} 
```

是销毁`o`后，它已经被用来构造在 中分配的`T`堆`unique_ptr`。

地图为空并不是指针被破坏的症状。如果是这种情况（指针被销毁），您将在映射中为给定键创建一个条目，并且具有无效的 unique_ptr。

# actionscript-3 - mx:TileList ：如果启用了 allowMultipleSelection，为什么拖动不起作用

> ID：10579955
> 
> 赞同：0
> 
> 时间：2012-05-14T08:39:06.957
> 
> 标签：actionscript-3, air, flash-builder

我使用 TileList 来像画廊一样显示图像。一开始，我只激活拖动选项。

```
<mx:TileList xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:s="library://ns.adobe.com/flex/spark"
         xmlns:mx="library://ns.adobe.com/flex/mx"
         columnWidth="120"
         rowHeight="150"
         paddingLeft="2"
         paddingRight="2"
         paddingTop="2"
         paddingBottom="2"
         itemRenderer="fr.ui.display._43Imagerie.TileUnit2"
         doubleClickEnabled="true"
         dragEnabled="true"
         dropEnabled="true"
         dragMoveEnabled="true"
         verticalScrollPolicy="on"
         > 
```

现在我尝试添加多项选择的可能性。

ItemRenderer 是：

```
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" 
       verticalScrollPolicy="off" 
       horizontalScrollPolicy="off"
       width="120"
       height="150"
       borderVisible="false"
       xmlns:s="library://ns.adobe.com/flex/spark"
       creationComplete="onEvent()"

       >
<mx:Script>
    <![CDATA[
        import fr.util.imageTransform;

        import mx.controls.Image;
        import mx.core.UIComponent;
        import mx.events.DragEvent;
        import mx.managers.DragManager;

        import org.osmf.utils.URL;

        import spark.effects.Rotate;

        [Bindable]
        [Embed(source="icon/imagerie/rotate.png")]
        private var rotationArrowClass:Class;

        private var _file:File;
        private var _selected:Boolean;
        private var _sauvBMD:BitmapData;
        public var wasScaled:Boolean = false;
        public var deleted:Boolean = false;
        private var bgCenterX:Number;
        private var bgCenterY:Number;
        private var _dragDownPt:Point;

        [Bindable]
        public var angle:int = 0;

        private var dragBitmapData : BitmapData;

        private function onEvent():void
        {
            // iconCanvas.addEventListener(MouseEvent.DOUBLE_CLICK, onDoubleClick);
            // double click gere ds wPlanchePhoto3

        }

        private function rotationImage(e:MouseEvent):void
        {

            var rot:Rotate = new Rotate();
            rot.angleBy = 90;
            rot.duration = 1000;
            rot.autoCenterTransform = true;
            rot.target = iconCanvas;
            rot.play();

        }

        private function radiansToDegrees(radians:Number):Number {
            var degrees:Number = radians * (180 / Math.PI);
            return degrees;
        }

        private function degreesToRadians(degrees:Number):Number {
            var radians:Number = degrees * (Math.PI / 180);
            return radians;
        }

        public function set image(im:BitmapData):void
        {
            this._sauvBMD=im;
        }

        public function get image() :BitmapData
        {
            return this._sauvBMD;
        }

        protected function iconCanvas_mouseDownHandler(event:MouseEvent):void
        {

            // on enregistre la point de départ 
            _dragDownPt = new Point(mouseX,mouseY); 
            // puis on écoute l'éventuel déplacement de la souris 
            this.addEventListener(MouseEvent.MOUSE_MOVE,_onMouseMoveDuringDrag);

        }

        private function _onMouseMoveDuringDrag(evt:MouseEvent):void {
            // astuce pour s'assurer que la souris a vraiment bougee volontairement 
            if(Math.abs(_dragDownPt.x - mouseX) <= 2 && Math.abs(_dragDownPt.y - mouseY) <= 2)
                return; 

            else{
                dragBitmapData = new BitmapData(iconCanvas.width, iconCanvas.height,true, 1);
                dragBitmapData.draw(iconCanvas);

                var transfert:Clipboard = new Clipboard();
                transfert.setData(ClipboardFormats.BITMAP_FORMAT,Bitmap(iconCanvas.content).bitmapData);

                // only allow the file to be copied
                var dragOptions:NativeDragOptions = new NativeDragOptions();
                dragOptions.allowMove=false;
                dragOptions.allowCopy = true;
                dragOptions.allowLink = false;

                // begin the drag
                NativeDragManager.doDrag(this, transfert, dragBitmapData, null, dragOptions);
            }
            // dispatch de l'event depuis le parent pour pouvoir écouter cet event dans l'application 
        }

    ]]>
</mx:Script>

<s:BorderContainer
                   id="bcImage"
                   width="120"
                   height="99%"
                   borderVisible="true"
                   borderColor="#FFFFFF"
                   borderWeight="1"
                   cornerRadius="6"
                   backgroundAlpha=".4"
                   backgroundColor="#5f5f5f"
                   >

    <mx:Canvas id="cvsImage" width="100%">
        <mx:SWFLoader id="rotationArrow" source="{rotationArrowClass}" height="18" width="18" x="3" y="3" visible="true" click="rotationImage(event);" alpha=".5"/>
        <s:Label x="23" y="3" width="82" fontSize="11" fontWeight="normal" text="{data.imDate}"
                 textAlign="right" color="#000000"/>    

        <mx:Image id="iconCanvas" x="10" y="20" width="99" height="99" horizontalAlign="center"
                  maintainAspectRatio="true" scaleContent="true"
                  source="{data.imURL}" 
                  verticalAlign="middle" mouseDown="iconCanvas_mouseDownHandler(event)"
                  >

        </mx:Image>
    </mx:Canvas>

    <s:VGroup width="100%" y="124" height="25" bottom="1" left="3" right="3" paddingBottom="0" paddingTop="4" gap="0">
        <s:Label text="{data.imType}" height="50%" fontSize="10" paddingBottom="1"
                 fontWeight="normal" width="99%" textAlign="center" color="#000000"/>
        <s:Label text="{data.imStade}" fontSize="10" textAlign="center" paddingTop="1"
                 fontWeight="normal" width="99%" color="#000000"/>  

    </s:VGroup>

</s:BorderContainer> 
```

如果这个选项为真（allowMultipleSelection），拖动停止工作，你知道为什么吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:25:32.533

添加 allowMultipleSelection="true" 对我来说效果很好。我在装有最新版本 Flash Player 的 Mac 上运行。起初它似乎有点片状，但在刷新页面后它工作得很好。我的项目中唯一没有的是您的数据提供者和项目渲染器。我真的怀疑你的项目渲染器会导致问题，除非你在那里做一些疯狂的事情。检查您是否有最新的 Flash Player。

# asp.net-mvc - Telerik MVC Grid：Ajax DataBinding 发布附加参数？

> ID：10579957
> 
> 赞同：2
> 
> 时间：2012-05-14T08:39:20.813
> 
> 标签：asp.net-mvc, url, parameters, telerik-grid

我创建了一个支持编辑多个实体的页面。
这个页面被称为：`http://localhost/Personnel/EditMultiple?id=2944&id=7`

在这个页面上有一个GridView，它应该在一个网格中列出这些人员。该网格定义如下：

```
<% Html.Telerik().Grid<Web.Models.PersonnelMiniVM>()
    .Columns(columns =>
    {
        columns.Bound(p => p.Name);
    })
    .DataBinding(d => d.Ajax().Select("_GetPersonnelByIds", "Personnel", new { personnelIds = string.Join(",", Model.PersonnelIds) }))
    .Pageable(page => page.PageTo(Model.Page))
    .Sortable(sorting => sorting.OrderBy(sortOrder => sortOrder.Add(p => p.Name)))
    .Render();
%> 
```

但是当我查看发布到人事控制器的 URL 时，它就像：

```
http://localhost/Personnel/_GetPersonnelByIds/2944%2c7?personnelIds=7%2C2944&Personnel-size=5 
```

我不明白为什么要附加**2944%2c7**，当 URL 太长时，这也会给我一个 401 错误。

Global.asax 中定义的路由是这样的：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:16:51.310

看到这个：

> [http://www.telerik.com/community/forums/aspnet-mvc/grid/mvc3-grid-control-ajax-bound-select-url-has-extra-route-values.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/mvc3-grid-control-ajax-bound-select-url-has-extra-route-values.aspx)

解决方案是清除**id**，例如：

```
.DataBinding(d => d.Ajax().Select("_GetPersonnelByIds", "Personnel", new { id= "", personnelIds = string.Join(",", Model.PersonnelIds) })) 
```

# android - 恢复时 EditText 不显示任何内容。（活动被安卓系统破坏）

> ID：10579959
> 
> 赞同：1
> 
> 时间：2012-05-14T08:39:26.010
> 
> 标签：android, android-activity, stack

我的活动被命名为 BlacklistAddActivity。
UI 元素：EditText、editText、按钮 btn1。当我单击 btn1 时，它将启动联系人列表活动，我可以从联系人列表中选择一个联系人。然后将联系人信息发送回BlacklistAddActivity，并通过editText.setText(contact.name) 将联系人姓名设置为text1。

问题是，有时，在联系人列表中，如果我做一些操作：从最近的应用程序窗口输入拨号器（长按主页键），然后拨打电话等......众所周知，android会检查内存来决定销毁活动堆栈与否。如果内存不足，则会破坏后台活动，包括 BlacklistActivity。
现在，恢复到联系人列表并选择一个联系人，恢复到 BlacklistActivity，它将被重新创建。我可以在 onActivityResult() 中正确获取联系人信息。然后，editText.setText(contact.name)。奇怪的是：UI 上显示的 editText 仍然是空的。

以下是我的代码：（不完全）

```
 public class BlacklistAddActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener {
static final boolean DBG = true;
private static final String TAG = "BlacklistAddActivity";
private static final String KEY_MATCH_CRITERIA = "match_criteria";

private SharedPreferences mSharedPreferences;
private ListPreference mCriteria;

private static final int CONTACT_ITEM = 0;
private static final int LOGS_ITEM = 1;

private static final String NUM_PROJECTION[] = { Phone.DISPLAY_NAME, Phone.NUMBER };

protected static final Intent CONTACT_IMPORT_INTENT;
static {
    CONTACT_IMPORT_INTENT = new Intent(Intent.ACTION_GET_CONTENT);
    CONTACT_IMPORT_INTENT.setType(Phone.CONTENT_ITEM_TYPE);
}

private Context mContext;
private EditText editText;
private ImageButton searchButton;
private TwSoftkeyItem mLeftSoftkey, mRightSoftkey;
private AlertDialog mSearchDialog = null;

private InputMethodManager imm;

private boolean updateMode;
private String mNumber;
private int mMatchCriteria;

@Override
protected void onCreate(Bundle savedInstanceState) {
    initTitle();
    super.onCreate(savedInstanceState);
            Log.i(TAG, "onCreate()");
    setContentView(R.layout.blacklist_number_layout);
    addPreferencesFromResource(R.xml.blacklist_add_num_prefs);
    mSharedPreferences = getPreferenceScreen().getSharedPreferences();
    mContext = getBaseContext();

    mCriteria = (ListPreference) findPreference(KEY_MATCH_CRITERIA);
    editText = (EditText) findViewById(R.id.edit_text);
    editText.requestFocus();
    searchButton = (ImageButton) findViewById(R.id.search_button);
    mLeftSoftkey = (TwSoftkeyItem) findViewById(R.id.skleft);
    mRightSoftkey = (TwSoftkeyItem) findViewById(R.id.skright);

    initValue();
    initEvent();
    imm = (InputMethodManager) getSystemService(INPUT_METHOD_SERVICE);

    handler.postDelayed(new Runnable() {
        public void run() {
            imm.showSoftInput(editText, 1);
        }
    }, 200);
}

private void initTitle() {
    String str = getIntent().getStringExtra("FROM");
    if (str != null) {
        if (DBG) Log.i(TAG, "initTitle() => from: " + str);
        if (str.equals("msg")) {
            setTitle(R.string.list_msg_block_num);
        } else {
            setTitle(R.string.list_call_block_num);
        }
    }
}

private void initValue() {
    updateMode = getIntent().getBooleanExtra("UPDATE_MODE", false);
    Log.i(TAG, "the updatemode is: "+ updateMode);
    if (updateMode == true) {   //from Edit
        mNumber = getIntent().getStringExtra("NUMBER");
        mMatchCriteria = getIntent().getIntExtra("CRITERIA", 0);

        editText.setText(mNumber);
        editText.setSelection(mNumber.length());
        mCriteria.setValueIndex(mMatchCriteria);
        mCriteria.setSummary(mCriteria.getEntry());
    } else {    // from Add
        mCriteria.setValueIndex(0);
        mCriteria.setSummary(mCriteria.getEntry());
    }
}

private void initEvent() {
    searchButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            alertDialogSearch();
        }
    });

    editText.setOnFocusChangeListener(new OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean focused) {
            if (focused == true) {
                handler.postDelayed(new Runnable() {
                    public void run() {
                        imm.showSoftInput(editText, 1);
                    }
                }, 200);
            } else {
                imm.hideSoftInputFromWindow(editText.getWindowToken(), 0);
            }
        }
    });

    editText.setOnKeyListener(new OnKeyListener() {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER && event.getAction() == KeyEvent.ACTION_UP) {
                editText.requestFocus();
                return true;
            }
            return false;
        }
    });

    mLeftSoftkey.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent intent = new Intent();
            intent.putExtra("NUMBER", editText.getText().toString());
            intent.putExtra("CRITERIA", mCriteria.findIndexOfValue(mCriteria.getValue()));
            setResult(RESULT_OK, intent);
            finish();
        }
    });

    mRightSoftkey.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            setResult(RESULT_CANCELED, null);
            finish();
        }
    });
}

    @Override
public void onRestoreInstanceState(Bundle savedInstanceState)
{
        if(DBG){
            if(null != editText)
            Log.d(TAG, "onRestoreInstanceState: Edit Text is: "+editText.getText().toString());
        }
        super.onRestoreInstanceState(savedInstanceState);

        if(DBG){
            if(null != editText)
            Log.d(TAG, "onRestoreInstanceState: Edit Text is: "+editText.getText().toString());
        }
}
@Override
protected void onResume() {
    super.onResume();
    Log.i(TAG, "onResume()");
    if(null != editText)
        if (DBG) Log.d(TAG, "onResume() Edit Text is: "+editText.getText().toString());
    mSharedPreferences.registerOnSharedPreferenceChangeListener(this);
    mCriteria.setSummary(mCriteria.getEntry());
}

@Override
protected void onPause() {
    super.onPause();
    mSharedPreferences.unregisterOnSharedPreferenceChangeListener(this);
    if (mSearchDialog != null) {
        mSearchDialog.dismiss();
        mSearchDialog = null;
    }
}

@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
    if (DBG) Log.v(TAG, "onSharedPreferenceChanged(), key: " + key);

    if (KEY_MATCH_CRITERIA.equals(key)) {
        if (mCriteria.getEntry() == null) {
            mCriteria.setValueIndex(0);
        }
        mCriteria.setValue(sharedPreferences.getString(key, mCriteria.getEntry().toString()));
        mCriteria.setSummary(mCriteria.getEntry());
        if (DBG) Log.v(TAG, "setValue: " + mCriteria.getEntry().toString());
    }
}

private Handler handler = new Handler() {
    public void handleMessage(Message msg) {
        switch (msg.what) {
            case 0:
                System.out.println("DONE");
                break;
        }
    }
};

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    String output = "";
    switch (requestCode) {
        case CONTACT_ITEM:
            if (resultCode != RESULT_OK) {
                Log.e(TAG, "onActivityResult() => canceled");
            } else {
                Cursor cursor = getContentResolver().query(data.getData(), NUM_PROJECTION, null, null, null);
                if (cursor != null) {
                    if (cursor.moveToFirst()) {
                        output = cursor.getString(1);
                        if (DBG) Log.d(TAG, "onActivityResult() => contact output: " + output);
                        if (Utils.isValidNum(mContext, output)) {

                            editText.setText(output);
                            if (DBG) Log.d(TAG, "onActivityResult() Edit Text is: "+editText.getText().toString());
                        }
                    }
                    cursor.close();
                }
            }
            break;

        case LOGS_ITEM:
            if (resultCode == RESULT_OK) {
                output = data.getStringExtra("NUMBER");
                if (DBG) Log.d(TAG, "onActivityResult() => logs output: " + output);
                if (Utils.isValidNum(mContext, output)) {
                    editText.setText(output);
                } else {
                    output = null;
                    Utils.displayToast(mContext, getString(R.string.vip_msg_wrong_number));
                }
            }
            break;
    }
    handler.postDelayed(new Runnable() {
        public void run() {
            imm.showSoftInput(editText, 1);
        }
    }, 200);

    if (output != null && output.length() > 0) {
        editText.requestFocus();
        editText.setSelection(output.length());
    }
}

private void alertDialogSearch() {
    AlertDialog.Builder ad = new AlertDialog.Builder(this);
    ad.setTitle(R.string.title_search).setItems(R.array.dialog_search, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            Intent intent;
            switch (which) {
                case CONTACT_ITEM:
                    startActivityForResult(CONTACT_IMPORT_INTENT, CONTACT_ITEM);
                    break;
                case LOGS_ITEM:
                    intent = new Intent("contacts.com.sec.android.app.dialertab.calllog.LogsListActivity");
                    intent.putExtra("OPTION", 1);
                    startActivityForResult(intent, LOGS_ITEM);
                    break;
            }
            imm.hideSoftInputFromWindow(editText.getWindowToken(), 0);
        }
    });
    mSearchDialog = ad.show();
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:44:07.973

当您的 Activity 被销毁时，Android 不会自动备份任何数据。您必须在数据被破坏之前手动备份数据，并在重新创建 Activity 时将其恢复。

要备份您的数据，您必须覆盖此方法。（它将在您的活动被破坏之前被调用。）

```
@Override
protected void onSaveInstanceState(Bundle savedInstanceState)
{
    super.onSaveInstanceState(savedInstanceState);
    savedInstanceState.putString("key", value); //save your data in key-value pair
} 
```

要恢复您的数据，您必须覆盖此方法。（它将在您的活动恢复之前调用。）

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState)
{
    super.onRestoreInstanceState(savedInstanceState);
    value = savedInstanceState.getString("key"); //retrieve your data using its corresponding key
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T23:08:26.780

如果您的文本未正确设置/显示，您应该仔细查看您的`onCreate()`,`onResume()`和`onRestoreInstanceState()`实现。所以***arci***的答案是我在这种情况下也会回答的。

你说它是第一次工作，如果`Activity`不会被杀死，它也会工作。但是当`Activity`被杀死并重新创建时它不起作用。这听起来像是您在某些时候使用了**错误的引用**。尤其是当您使用侦听器时，这很容易发生。
您应该进入调试模式并检查您的`Activity`实例`EditText` **（通过内存地址）**每次访问它时是否相同/正确。

我真的看不出你的代码有问题，但它必须是这样的。

注意：每次使用`startActivity()`时，进入横向/纵向模式或其他调用`onCreate()`您可能会得到一个新`Activity`实例。

注意二：每次`onCreate()`调用你最有可能调用`setContentView()`最终获得新膨胀/创建的视图。这意味着您`EditText`和其他视图将是一个新实例。

# c# - 使用 c# 或批处理自动使用 winrar 提取 ISO

> ID：10579964
> 
> 赞同：3
> 
> 时间：2012-05-14T08:39:57.727
> 
> 标签：c#, batch-file, winrar

我正在尝试将 ISO 提取到最后没有 .iso 的同名文件夹中。

我在使用 winrar 时遇到问题，因为当我从带有 ISO 的文件夹中启动 seach 时，它不会启动提取。

**已更新答案代码**

```
private void ExtractISO(string toExtract, string folderName)
    {
        // reads the ISO
        CDReader Reader = new CDReader(File.Open(toExtract, FileMode.Open), true);
        // passes the root directory the folder name and the folder to extract
        ExtractDirectory(Reader.Root, folderName /*+ Path.GetFileNameWithoutExtension(toExtract)*/ + "\\", "");
        // clears reader and frees memory
        Reader.Dispose();
    }

    private void ExtractDirectory(DiscDirectoryInfo Dinfo, string RootPath, string PathinISO)
    {
        if (!string.IsNullOrWhiteSpace(PathinISO))
        {
            PathinISO += "\\" + Dinfo.Name;
        }
        RootPath += "\\" + Dinfo.Name;
        AppendDirectory(RootPath);
        foreach (DiscDirectoryInfo dinfo in Dinfo.GetDirectories())
        {
            ExtractDirectory(dinfo, RootPath, PathinISO);
        }
        foreach (DiscFileInfo finfo in Dinfo.GetFiles())
        {
            using (Stream FileStr = finfo.OpenRead())
            {
                using (FileStream Fs = File.Create(RootPath + "\\" + finfo.Name)) // Here you can Set the BufferSize Also e.g. File.Create(RootPath + "\\" + finfo.Name, 4 * 1024)
                {
                    FileStr.CopyTo(Fs, 4 * 1024); // Buffer Size is 4 * 1024 but you can modify it in your code as per your need
                }
            }
        }
    }

    static void AppendDirectory(string path)
    {
        try
        {
            if (!Directory.Exists(path))
            {
                Directory.CreateDirectory(path);
            }
        }
        catch (DirectoryNotFoundException Ex)
        {
            AppendDirectory(Path.GetDirectoryName(path));
        }
        catch (PathTooLongException Ex)
        {
            AppendDirectory(Path.GetDirectoryName(path));
        }
    } 
```

用户选择要提取的文件夹 (.ISO) 来提取。然后我在后台工作人员的 Process.Start() 中使用它。这似乎只是打开了安装软件，并没有将 ISO 提取到所需的文件夹名称。

在此先感谢您的帮助。

或者，如果有人可以给我一批来提取 ISO 并从 c# 中调用它，传递 toExtract 和文件夹名称也会有帮助。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T09:16:39.300

如果外部类库没问题！

然后使用[`SevenZipSharp`](http://sevenzipsharp.codeplex.com/)or[`.NET DiscUtils`](http://discutils.codeplex.com/)提取 ISO 的...

这两个 ClassLibraries 可以管理 ISO 并提取它们！

因为您可以在我提供的链接`DiscUtils`中找到一些 ISO 管理 [类] 的代码。`CDReader`

但是对于`SevenZipSharp`，请探索 ClassLibrary 源并找到要提取的代码或谷歌找到它！

要获取文件夹的名称，只需使用`Path.GetFileNameWithoutExtension((string)ISOFileName)`which 将返回`"ISOFile"`一个名为 的 iso `"ISOFile.iso"`。然后您可以将它与您想要的路径一起使用。

# 更新

使用 DiscUtils 提取 ISO 映像的代码：

```
using DiscUtils;
using DiscUtils.Iso9660;

void ExtractISO(string ISOName, string ExtractionPath)
{
    using (FileStream ISOStream = File.Open(ISOName, FileMode.Open))
    {
        CDReader Reader = new CDReader(ISOStream, true, true);
        ExtractDirectory(Reader.Root, ExtractionPath + Path.GetFileNameWithoutExtension(ISOName) + "\\", "");
        Reader.Dispose();
    }
}
void ExtractDirectory(DiscDirectoryInfo Dinfo, string RootPath, string PathinISO)
{
    if (!string.IsNullOrWhiteSpace(PathinISO))
    {
        PathinISO += "\\" + Dinfo.Name;
    }
    RootPath += "\\" + Dinfo.Name;
    AppendDirectory(RootPath);
    foreach (DiscDirectoryInfo dinfo in Dinfo.GetDirectories())
    {
        ExtractDirectory(dinfo, RootPath, PathinISO);
    }
    foreach (DiscFileInfo finfo in Dinfo.GetFiles())
    {
            using (Stream FileStr = finfo.OpenRead())
            {
                using (FileStream Fs = File.Create(RootPath + "\\" + finfo.Name)) // Here you can Set the BufferSize Also e.g. File.Create(RootPath + "\\" + finfo.Name, 4 * 1024)
                {
                    FileStr.CopyTo(Fs, 4 * 1024); // Buffer Size is 4 * 1024 but you can modify it in your code as per your need
                }
            }
    }
}
static void AppendDirectory(string path)
{
    try
    {
        if (!Directory.Exists(path))
        {
            Directory.CreateDirectory(path);
        }
    }
    catch (DirectoryNotFoundException Ex)
    {
        AppendDirectory(Path.GetDirectoryName(path));
    }
    catch (PathTooLongException Exx)
    {
        AppendDirectory(Path.GetDirectoryName(path));
    }
} 
```

像这样使用它：

```
ExtractISO(ISOFileName, Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory) + "\\"); 
```

在职的！经我测试！

当然，您可以随时向代码添加更多优化...

此代码只是一个基本代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T23:29:40.993

对于 UDF 或在不需要服务（DISM）后制作 Windows ISO 文件，上述接受的答案对我不起作用，所以我用 DiscUtils 尝试了这种工作方法

```
using DiscUtils;
public static void ReadIsoFile(string sIsoFile, string sDestinationRootPath)
        {
            Stream streamIsoFile = null;
            try
            {
                streamIsoFile = new FileStream(sIsoFile, FileMode.Open);
                DiscUtils.FileSystemInfo[] fsia = FileSystemManager.DetectDefaultFileSystems(streamIsoFile);
                if (fsia.Length < 1)
            {
                MessageBox.Show("No valid disc file system detected.");
            }
            else
            {
                DiscFileSystem dfs = fsia[0].Open(streamIsoFile);                    
                ReadIsoFolder(dfs, @"", sDestinationRootPath);
                return;
            }
        }
        finally
        {
            if (streamIsoFile != null)
            {
                streamIsoFile.Close();
            }
        }
    }

public static void ReadIsoFolder(DiscFileSystem cdReader, string sIsoPath, string sDestinationRootPath)
    {
        try
        {
            string[] saFiles = cdReader.GetFiles(sIsoPath);
            foreach (string sFile in saFiles)
            {
                DiscFileInfo dfiIso = cdReader.GetFileInfo(sFile);
                string sDestinationPath = Path.Combine(sDestinationRootPath, dfiIso.DirectoryName.Substring(0, dfiIso.DirectoryName.Length - 1));
                if (!Directory.Exists(sDestinationPath))
                {
                    Directory.CreateDirectory(sDestinationPath);
                }
                string sDestinationFile = Path.Combine(sDestinationPath, dfiIso.Name);
                SparseStream streamIsoFile = cdReader.OpenFile(sFile, FileMode.Open);
                FileStream fsDest = new FileStream(sDestinationFile, FileMode.Create);
                byte[] baData = new byte[0x4000];
                while (true)
                {
                    int nReadCount = streamIsoFile.Read(baData, 0, baData.Length);
                    if (nReadCount < 1)
                    {
                        break;
                    }
                    else
                    {
                        fsDest.Write(baData, 0, nReadCount);
                    }
                }
                streamIsoFile.Close();
                fsDest.Close();
            }
            string[] saDirectories = cdReader.GetDirectories(sIsoPath);
            foreach (string sDirectory in saDirectories)
            {
                ReadIsoFolder(cdReader, sDirectory, sDestinationRootPath);
            }
            return;
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

它已从应用程序源 ISOReader 中提取，但已根据我的要求进行了修改

总源代码可在[http://www.java2s.com/Open-Source/CSharp_Free_CodeDownload/i/isoreader.zip](http://www.java2s.com/Open-Source/CSharp_Free_CodeDownload/i/isoreader.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:06:09.773

试试这个：

```
string Desktop = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
Process.Start("Winrar.exe", string.Format("x {0} {1}",
   Desktop + "\\test.rar",
   Desktop + "\\SomeFolder")); 
```

这会将文件提取到文件`test.rar`夹`SomeFolder`中。您可以将 .rar 扩展名更改为 .iso，它的工作方式相同。

据我在您当前的代码中看到的，没有给出提取文件的命令，也没有必须提取的文件的路径。试试这个例子，让我知道它是否有效=]

PS如果您想隐藏提取屏幕，您可以将 设置`YourProcessInfo.WindowStyle`为`ProcessWindowStyle.Hidden`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-27T15:38:46.657

我最近对这种 .iso 提取问题感到困惑。在尝试了几种方法之后，7zip 为我完成了这项工作，您只需确保在您的系统上安装了最新版本的 7zip。也许它会帮助尝试{

```
 Process cmd = new Process();
            cmd.StartInfo.FileName = "cmd.exe";
            cmd.StartInfo.RedirectStandardInput = true;
            cmd.StartInfo.RedirectStandardOutput = true;
            cmd.StartInfo.CreateNoWindow = false;
            cmd.StartInfo.UseShellExecute = false;
            cmd.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
            cmd.Start();

            cmd.StandardInput.WriteLine("C:");
            //Console.WriteLine(cmd.StandardOutput.Read());
            cmd.StandardInput.Flush();

            cmd.StandardInput.WriteLine("cd C:\\\"Program Files\"\\7-Zip\\");
            //Console.WriteLine(cmd.StandardOutput.ReadToEnd());
            cmd.StandardInput.Flush();

            cmd.StandardInput.WriteLine(string.Format("7z x -y -o{0} {1}", source, copyISOLocation.TempIsoPath));
            //Console.WriteLine(cmd.StandardOutput.ReadToEnd());
            cmd.StandardInput.Flush();
            cmd.StandardInput.Close();
            cmd.WaitForExit();
            Console.WriteLine(cmd.StandardOutput.ReadToEnd());
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message + "\n" + e.StackTrace);
            if (e.InnerException != null)
            {
                Console.WriteLine(e.InnerException.Message + "\n" + e.InnerException.StackTrace);
            }
        } 
```

# c++ - 无法在 qgraphicsItem 中为 QTransform 设置动画

> ID：10579974
> 
> 赞同：0
> 
> 时间：2012-05-14T08:40:52.297
> 
> 标签：c++, qt, animation, qgraphicsview

我正在尝试在 GraphicsScene 中做一些 3D 动画，例如，使用 Animation 框架旋转 GraphicsScene 中的图片（使用类，从`qPixmapItem`和子类`QObject`化，如果重要的话）。

一切正常，直到我想围绕垂直轴旋转图片。没有办法通过 item.rotate() 这样做，所以我正在使用`QTranform`.

问题是这样做根本不会为任何东西设置动画。我究竟做错了什么？

PS我不想为此使用OpenGL。

这是我的做法。这种方式适用于动画更简单的属性`pos`，如旋转（通过`rotation`，`setRotation`）

我的代码：

```
// hybrid graphicsSceneItem, supporting animation 
class ScenePixmap : public QObject, public QGraphicsPixmapItem
{
    Q_OBJECT
    Q_PROPERTY(QTransform transform READ transform WRITE setTransform)
public:
    ScenePixmap(const QPixmap &pixmap, QObject* parent = NULL, QGraphicsItem* parentItem = NULL):
        QObject(parent),
        QGraphicsPixmapItem(pixmap, parentItem)

    {}
}; 
```

这是我设置场景和动画的方法：

```
//setup scene
//Unrelated stuff, loading pictures, etc.
            scene = new QGraphicsScene(this);
        foreach(const QPixmap& image, images)
        {
            ScenePixmap* item = new ScenePixmap(image);
            item->moveBy(70*i, 0);
            i++;
            this->images.append(item);
            scene->addItem(item);
        }
    }

    ui->graphicsView->setBackgroundBrush(QBrush(Qt::black, Qt::SolidPattern));
    ui->graphicsView->setScene(scene);

    //setup animation
QTransform getTransform()
{
    QTransform transform;
    transform.rotate(-30, Qt::ZAxis);//also tried transform = transform.rotate(...)

    return transform;
}

QAbstractAnimation* SetupRotationAnimation(ScenePixmap* pixmapItem)
{
    QPropertyAnimation* animation = new QPropertyAnimation(pixmapItem, "transform");
    animation->setDuration(1400);
    animation->setStartValue( pixmapItem->transform());
    animation->setEndValue(getTransform());//here i tried to multiply with default transform , this does not work either
    return animation;
} 
```

这是我开始动画的方式：

```
void MainWindow::keyPressEvent ( QKeyEvent * event )
{

    if((event->modifiers() & Qt::ControlModifier))
    {
        QAnimationGroup* groupAnimation = new QParallelAnimationGroup();

        foreach(ScenePixmap* image, images)
        {
            groupAnimation->addAnimation( SetupRotationAnimation(image));

        }

        groupAnimation->start(QAbstractAnimation::DeleteWhenStopped);

    }
} 
```

编辑[已解决] 感谢 Darko Maksimovic：

这是为我解决的代码：

```
QGraphicsRotation* getGraphicRotation()
{
    QGraphicsRotation* transform = new QGraphicsRotation(this);

    transform->setAxis(Qt::YAxis);

    return transform;
}

QAbstractAnimation* SetupRotationAnimation(ScenePixmap* pixmapItem)
{
    QGraphicsRotation* rotation = getGraphicRotation();

    QPropertyAnimation* animation = new QPropertyAnimation(rotation, "angle");
    animation->setDuration(1400);
    animation->setStartValue( 0);
    animation->setEndValue(45);

    pixmapItem->setTransformOriginPoint(pixmapItem->boundingRect().center());

    QList<QGraphicsTransform*> transfromations = pixmapItem->transformations();
    transfromations.append(rotation);
    pixmapItem->setTransformations(transfromations);

    return animation;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:31:58.843

我看到你使用 QTransform。如果你只想要一个旋转，也就是简单的旋转，你最好使用**setRotation** [不要忘记**setTransformOriginPoint** ]。

但是，如果您想记住许多旋转，例如围绕不同的变换点，那么您应该使用**QGraphicsTransform**，即它的专用派生类**QGraphicsRotation**，您可以通过在图形对象上调用**setTransformations**来应用它（您应该首先获取现有的变换通过调用 o.transformations()，追加到 this，然后调用 setTransformations；如果您保留指向添加的转换的指针，您也可以稍后直接更改它）。

从您发布的代码中，我看不出您的错误来自哪里，但是通过使用专门的功能，您可以避免一些常见问题。

PS我还看到您在发布的代码中没有使用**prepareGeometryChange**，因此请注意，在转换对象时这是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T21:20:15.313

问题很简单。`QVariantAnimation`并且`QPropertyAnimation`不支持`QTransform`。哎呀，他们现在甚至不支持无符号整数。这就是它的全部。根据 Qt 文档：

> 如果您需要对其他变体类型（包括自定义类型）进行插值，则必须自己为这些类型实现插值。为此，您可以为给定类型注册一个插值器函数。该函数接受 3 个参数：开始值、结束值和当前进度。

生成这样一个插值器可能不是那么简单。请记住，您必须在两个矩阵之间“混合”，同时保持矩阵的正交性和视觉效果。您需要将矩阵分解为单独的沿轴旋转、缩放、倾斜等子矩阵，然后分别对它们中的每一个进行插值。难怪 Qt 的人不这样做。做逆问题可能要容易得多：通过组合必要的旋转、平移等，生成所需的变换矩阵作为某个参数*t的函数，所有这些都作为**t*的（可能是常数）函数给出。

仅仅因为 a`QVariant`可以携带一个类型并不意味着它受到默认插值器的支持。可能应该为此发出运行时警告。

# javascript - 使用 javascript 控制特定的电子邮件模式

> ID：10579976
> 
> 赞同：0
> 
> 时间：2012-05-14T08:40:58.910
> 
> 标签：javascript, jquery

我有一个 textBox 控件，希望我的用户*只能*输入`....@firm1.com'`或`'....@firm2.com'`

如何使用 JavaScript 函数做到这一点？该函数必须采用文本框值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:43:52.773

给用户一个文本框但只允许他写两个值是没有意义的，
您应该使用下拉菜单：

```
<select>
    <option value="0"> @firm1.com </option>
    <option value="1"> @firm2.com </option>     
</select> 
```

* * *

**更新：**

如果您出于某种未知原因确实必须使用文本框：

```
$('#textboxId').change(function(){
    if (!this.value.match(/(@firm1.com|@firm2.com)$/g))
        alert('invalid value'); 
});​ 
```

[**现场演示**](http://jsfiddle.net/rT2ud/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:25:37.970

试试这个代码 -

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript">
    var patt1 = "[A-Za-z0-9._%+-]+@firm(1|2).com";
    function demoShowMatchClick(str) {
        var re = new RegExp(patt1);
        var m = re.exec(str);
        if (m == null) {
            document.getElementById("match").innerHTML = "no match";
        } else {
            document.getElementById("match").innerHTML = "match";
        }
    }
</script>
</head>
<body>
<span id="match"></span>
<input type="text" onkeyup="demoShowMatchClick(this.value)" />
</body>
</html> 
```

# git - Git 通过cherry-pick 与提交合并

> ID：10579977
> 
> 赞同：4
> 
> 时间：2012-05-14T08:40:59.240
> 
> 标签：git, merge, cherry-pick

以下场景：我有多个分支（主/预览/发布）。我正在开发大师，定期提交。让我们称它们为“实验性”和“修复”。

现在我想在没有实验提交的情况下将选定的修复提交合并到我的预览分支。

图像应该显示我的意思。

![git-repository 的架构](../Images/63442c10992532d2c4a5784b19e2fd39.png)

现在我试过了`cherry-pick`，`rebase`但我不知道如何管理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:17:11.700

看起来cherry-pick 是您想要的工具，但从您的评论中可以明显看出您遇到了冲突。在这种情况下，请`git cherry-pick`仔细阅读命令的输出，它应该会告诉您如何继续以完成挑选。通常，您必须找到冲突的文件（使用 eg `git status`），解决冲突，然后找到`git add`解决的文件。这三个步骤也可以用 代替`git mergetool`。完成解析后，您可以使用`git cherry-pick --continue`来完成操作。

不过，您可能想考虑一下您的分支模型，通常您不需要经常使用cherry-pick。考虑例如在他们自己的分支中开发特性，并在为这些分支准备新版本时将它们合并到适当的“发布分支”（预览/发布）中。

# java - 如何使用数组长度-java 创建数据类型引用

> ID：10579980
> 
> 赞同：0
> 
> 时间：2012-05-14T08:41:07.190
> 
> 标签：java, arrays

在一个字符串中，我有一个方法签名，例如：`String methSign = "public int add(int a, int b){ }"`，然后我使用`String`方法获得了参数列表的数组。现在如何创建对应的数组元素 dataType 引用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:27:57.557

如果您对允许的 Java 方法签名的外观感到困惑，请查看[Java 语言规范中的相关部分](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)。

如果您不确定如何解析某个字符串，则需要发布更详细的问题，包括输入字符串/数组、您的代码、您期望得到什么以及实际得到什么。Java中字符串解析的一些好的起点是：

*   [Apache Commons StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)
*   番石榴[分离器](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)/[细木工](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Joiner.html)

# jquery - 带有 ajax 的 jQuery Tooltip 插件 1.3

> ID：10579982
> 
> 赞同：0
> 
> 时间：2012-05-14T08:41:14.137
> 
> 标签：jquery, jquery-ui, jquery-events, jquery-ui-tooltip

我正在使用**jQuery 1.7.2**和**jQuery Tooltip 插件 1.3。**. **我与类customer**有一堆 div 。每个 div 都有一个包含**客户 ID**的 title 属性。我的目标是在工具提示中使用**AJAX**加载**动态数据**，当用户将鼠标移到 div 上时会显示该工具提示。

 **这是我现在拥有的代码：

```
 jQuery('.customer').tooltip({
        delay: 0,
        showURL: false,
        bodyHandler: function() {
            return jQuery('<div>HERE I WANT TO SHOW SOME RELEVANT CUSTOMER DATA</div>').attr('src', this.src);
        }
    }); 
```

如您所见，我没有找到客户 ID 所需的代码。我一直在尝试在`bodyHandler`函数中添加参数，但这不起作用。位于[http://docs.jquery.com/Plugins/Tooltip](http://docs.jquery.com/Plugins/Tooltip)的文档也没有帮助我。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:48:08.347

我已经发布了相同的帖子。你可能会在这里得到一些想法-

[http://www.codeproject.com/Tips/265445/jQuery-tooltip-with-ajax-tooltip-datasource-with-g](http://www.codeproject.com/Tips/265445/jQuery-tooltip-with-ajax-tooltip-datasource-with-g)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:48:18.423

您可以使用 html 5 数据属性将客户 ID 保存在容器中，然后您可以使用[Jquery data()检索客户 ID](http://api.jquery.com/data)

```
<div class="customer" data-CustomerID="YourCustomerID" > asdfasdfasdf</div> 
```

和 Jquery 部分

```
 jQuery('.customer').tooltip({
        delay: 0,
        showURL: false,
        bodyHandler: function() {

            alert($(this).data("CustomerID")); // will print your customerID, 
             // check in the console $(this) means, your current div wher you hovered it . 
        }
    }); 
```**

# iphone - 如何从 DER/PEM 文件中获取 SecKeyRef

> ID：10579985
> 
> 赞同：22
> 
> 时间：2012-05-14T08:41:23.157
> 
> 标签：iphone, rsa, public-key, pem, der

我需要将我的 iPhone 应用程序与系统集成，他们需要通过给定的公钥加密数据，有 3 种不同格式的 .xml .der 和 .pem 的 3 个文件，我研究并找到了一些关于从 SecKeyRef 获取的文章DER/PEM，但它们总是返回零。下面是我的代码：

```
NSString *pkFilePath = [[NSBundle mainBundle] pathForResource:@"PKFile" ofType:@"der"];
NSData *pkData = [NSData dataWithContentsOfFile:pkFilePath]; 

SecCertificateRef   cert; 
cert = SecCertificateCreateWithData(NULL, (CFDataRef) pkData);
assert(cert != NULL);

OSStatus err;

    if (cert != NULL) {
        err = SecItemAdd(
                         (CFDictionaryRef) [NSDictionary dictionaryWithObjectsAndKeys:
                                            (id) kSecClassCertificate,  kSecClass, 
                                            (id) cert,                  kSecValueRef,
                                            nil
                                            ], 
                         NULL
                         );
        if ( (err == errSecSuccess) || (err == errSecDuplicateItem) ) {
            CFArrayRef certs = CFArrayCreate(kCFAllocatorDefault, (const void **) &cert, 1, NULL); 
            SecPolicyRef policy = SecPolicyCreateBasicX509();
            SecTrustRef trust;
            SecTrustCreateWithCertificates(certs, policy, &trust);
            SecTrustResultType trustResult;
            SecTrustEvaluate(trust, &trustResult);
            if (certs) {
                CFRelease(certs);
            }
            if (trust) {
                CFRelease(trust);
            }
            return SecTrustCopyPublicKey(trust);
        }
    }
return NULL; 
```

问题发生在 SecCertificateCreateWithData，即使读取文件正常，它也总是返回 nil。有谁做过这个，请帮帮我，谢谢！

编辑：证书文件是 MD5 签名。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-06-25T10:48:10.773

我在同样的问题上挣扎了很多，终于找到了解决方案。我的问题是我需要同时使用外部私钥和公钥来加密/解密 iOS 应用程序中的数据，并且不想使用钥匙串。事实证明，您还需要 iOS 安全库的签名证书才能读取密钥数据，当然文件必须采用正确的格式。程序基本如下：

假设您有一个 PEM 格式的私钥（带有 -----BEGIN RSA PRIVATE KEY----- 和 -----END RSA PRIVATE KEY----- 标记）：rsaPrivate.pem

```
//Create a certificate signing request with the private key
openssl req -new -key rsaPrivate.pem -out rsaCertReq.csr

//Create a self-signed certificate with the private key and signing request
openssl x509 -req -days 3650 -in rsaCertReq.csr -signkey rsaPrivate.pem -out rsaCert.crt

//Convert the certificate to DER format: the certificate contains the public key
openssl x509 -outform der -in rsaCert.crt -out rsaCert.der

//Export the private key and certificate to p12 file
openssl pkcs12 -export -out rsaPrivate.p12 -inkey rsaPrivate.pem -in rsaCert.crt 
```

现在您有两个与 iOS 安全框架兼容的文件：rsaCert.der（公钥）和 rsaPrivate.p12（私钥）。假设文件已添加到您的包中，下面的代码会读取公钥：

```
- (SecKeyRef)getPublicKeyRef {

    NSString *resourcePath = [[NSBundle mainBundle] pathForResource:@"rsaCert" ofType:@"der"];
    NSData *certData = [NSData dataWithContentsOfFile:resourcePath];
    SecCertificateRef cert = SecCertificateCreateWithData(NULL, (CFDataRef)certData);
    SecKeyRef key = NULL;
    SecTrustRef trust = NULL;
    SecPolicyRef policy = NULL;

    if (cert != NULL) {
        policy = SecPolicyCreateBasicX509();
        if (policy) {
            if (SecTrustCreateWithCertificates((CFTypeRef)cert, policy, &trust) == noErr) {
                SecTrustResultType result;
                OSStatus res = SecTrustEvaluate(trust, &result);

                //Check the result of the trust evaluation rather than the result of the API invocation.
                if (result == kSecTrustResultProceed || result == kSecTrustResultUnspecified) {
                    key = SecTrustCopyPublicKey(trust);
                }
            }
        }
    }
    if (policy) CFRelease(policy);
    if (trust) CFRelease(trust);
    if (cert) CFRelease(cert);
    return key;
} 
```

要读取私钥，请使用以下代码：

```
SecKeyRef getPrivateKeyRef() {
    NSString *resourcePath = [[NSBundle mainBundle] pathForResource:@"rsaPrivate" ofType:@"p12"];
    NSData *p12Data = [NSData dataWithContentsOfFile:resourcePath];

    NSMutableDictionary * options = [[NSMutableDictionary alloc] init];

    SecKeyRef privateKeyRef = NULL;

    //change to the actual password you used here
    [options setObject:@"password_for_the_key" forKey:(id)kSecImportExportPassphrase];

    CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);

    OSStatus securityError = SecPKCS12Import((CFDataRef) p12Data,
                                             (CFDictionaryRef)options, &items);

    if (securityError == noErr && CFArrayGetCount(items) > 0) {
        CFDictionaryRef identityDict = CFArrayGetValueAtIndex(items, 0);
        SecIdentityRef identityApp =
        (SecIdentityRef)CFDictionaryGetValue(identityDict,
                                             kSecImportItemIdentity);

        securityError = SecIdentityCopyPrivateKey(identityApp, &privateKeyRef);
        if (securityError != noErr) {
            privateKeyRef = NULL;
        }
    }
    [options release];
    CFRelease(items);
    return privateKeyRef;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-08-28T18:05:06.250

从 iOS 10 开始，实际上可以导入 PEM 私钥而无需将它们转换为*PKCS#12*（这是一种非常通用的容器格式，用于与密码学相关的所有内容），因此也可以在命令行上或静态地使用 OpenSSL与它链接应用程序。在 macOS 上，从 10.7 开始甚至可以使用与此处提到的功能不同的功能（但到目前为止，iOS 尚不存在）。不过，下面描述的方式也适用于 macOS 10.12 及更高版本。

要导入证书，只需剥离

```
-----BEGIN CERTIFICATE----- 
```

和

```
-----END CERTIFICATE----- 
```

行，然后对剩下的数据运行 base64 解码，结果是标准 DER 格式的证书，可以将其输入`SecCertificateCreateWithData()`到`SecCertificateRef`. 这一直有效，在 iOS 10 之前也是如此。

要导入私钥，可能需要做一些额外的工作。如果私钥被包裹

```
-----BEGIN RSA PRIVATE KEY----- 
```

那么这很容易。同样，需要剥离第一行和最后一行，剩余数据需要进行 base64 解码，结果是*PKCS#1*格式的 RSA 密钥。这种格式只能保存 RSA 密钥并且可以直接读取，只需将解码后的数据输入`SecKeyCreateWithData()`到`SecKeyRef`. `attributes`字典只需要以下键/值对：

*   `kSecAttrKeyType`：`kSecAttrKeyTypeRSA`
*   `kSecAttrKeyClass`：`kSecAttrKeyClassPrivate`
*   `kSecAttrKeySizeInBits`：`CFNumberRef`然后密钥中的位数（例如1024、2048等）如果不知道，实际上可以从原始密钥数据中读取此信息，即ASN.1数据（这有点超出了这个答案的范围，但我将在下面提供一些有关如何解析该格式的有用链接）。*这个值可能是可选的！在我的测试中，实际上没有必要设置这个值；如果不存在，API 会自行确定该值，并且以后总是会正确设置。*

如果私钥由 包裹`-----BEGIN PRIVATE KEY-----`，则 base64 编码数据不是*PKCS#1*格式，而是*PKCS#8*格式，但是，这只是一个更通用的容器，它也可以保存非 RSA 密钥，但用于 RSA 密钥该容器的内部数据等于*PKCS#1*，因此可以说对于 RSA 密钥*PKCS#8*是带有额外标头的*PKCS#1 ，您需要做的就是剥离该额外标头。*只需剥离 base64 解码数据的前 26 个字节，您就可以再次获得*PKCS#1*。是的，就是这么简单。

要了解有关 PEM 编码中 PKCS#x 格式的更多信息，[请查看此站点](https://tls.mbed.org/kb/cryptography/asn1-key-structures-in-der-and-pem)。要了解有关 ASN.1 格式的更多信息，[这里有一个很好的网站](https://www.obj-sys.com/asn1tutorial/node4.html)。如果您需要一个简单但功能强大且具有交互性的在线 ASN.1 解析器来处理不同的格式，可以直接读取 PEM 数据，以及 base64 和 hexdump 中的 ASN.1，[试试这个站点](https://lapo.it/asn1js)。

**非常重要：**当您向上面创建的钥匙串添加私钥时，请注意这样的私钥不包含公钥散列，但公钥散列对于他们的钥匙串 API 形成身份很重要（`SecIdentityRef`)，因为使用公钥哈希是 API 如何找到属于导入证书的正确私钥的方式（a`SecIdentityRef`只是`SecKeyRef`私钥的 a 和`SecCertificateRef`一个证书形成一个组合对象，它是公钥哈希，将它们绑定在一起）。因此，当您计划将私钥添加到钥匙串时，请务必手动设置公钥哈希，否则您将永远无法获得它的身份，否则您将无法使用钥匙串 API 执行签名或解密等任务数据。公钥哈希必须存储在一个名为`kSecAttrApplicationLabel`（愚蠢的名字，我知道，但它真的不是标签，用户永远看不到，查看文档）的属性中。例如：

```
OSStatus error = SecItemAdd(
    (__bridge CFDictionaryRef)@{
        (__bridge NSString *)kSecClass: 
            (__bridge NSString *)kSecClassKey,
        (__bridge NSString *)kSecAttrApplicationLabel: 
             hashOfPublicKey, // hashOfPublicKey is NSData *
#if TARGET_OS_IPHONE
        (__bridge NSString *)kSecValueRef: 
            (__bridge id)privateKeyToAdd, // privateKeyToAdd is SecKeyRef
#else
        (__bridge NSString *)kSecUseItemList: 
              @[(__bridge id)privateKeyToAdd], // privateKeyToAdd is SecKeyRef
              // @[ ... ] wraps it into a NSArray object,
              // as kSecUseItemList expects an array of items
#endif
     },
     &outReference // Can also be NULL,
                   // otherwise reference to added keychain entry
                   // that must be released with CFRelease()
); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-09-21T21:29:32.997

在这篇文章的帮助下，经过数小时的在线研究，我终于让它完美地工作了。这是最新版本的工作 Swift 代码的注释。我希望它可以帮助某人！

1.  收到夹在 header 和 tail 之间的 base64 编码字符串中的证书，如下所示（PEM 格式）：

    ```
    -----BEGIN CERTIFICATE-----
    -----END CERTIFICATE----- 
    ```

2.  去掉头部和尾部，例如

    ```
    // remove the header string  
    let offset = ("-----BEGIN CERTIFICATE-----").characters.count  
    let index = certStr.index(cerStr.startIndex, offsetBy: offset+1)  
    cerStr = cerStr.substring(from: index)  

    // remove the tail string 
    let tailWord = "-----END CERTIFICATE-----"   
    if let lowerBound = cerStr.range(of: tailWord)?.lowerBound {  
    cerStr = cerStr.substring(to: lowerBound)  
    } 
    ```

3.  将 base64 字符串解码为 NSData：

    ```
    let data = NSData(base64Encoded: cerStr, 
       options:NSData.Base64DecodingOptions.ignoreUnknownCharacters)! 
    ```

4.  将其从 NSdata 格式转换为 SecCertificate：

    ```
    let cert = SecCertificateCreateWithData(kCFAllocatorDefault, data) 
    ```

5.  现在，此证书可用于与从 urlSession 信任收到的证书进行比较：

    ```
    certificateFromUrl = SecTrustGetCertificateAtIndex(...)
    if cert == certificate {
    } 
    ```

# c# - 反序列化期间不调用函数

> ID：10579986
> 
> 赞同：1
> 
> 时间：2012-05-14T08:41:26.573
> 
> 标签：c#, mongodb, mongodb-.net-driver

有没有办法在类反序列化期间不调用函数，例如：

```
private int _number
public int Number
{
    get
    {
        return _number;
    }
    set
    {
        _number = value
        //do not call this function during deserialization
        CallAnotherFunction()
    }
} 
```

当 MongoDB 反序列化对象并设置`Number`属性时，它正在调用，`CallAnotherFunction()`因为它在集合中。是否有一个标志或任何可以用来`CallAnotherFunction()`在反序列化期间不会被调用的东西？目前它在反序列化期间每次都调用该函数并添加重复值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:49:39.983

您可以控制 C# MongoDB 驱动程序如何对对象进行序列化和反序列化。在这种情况下，为属性本身的属性 instread 序列化支持字段应该可以解决您的问题。查看MongoDB 文档中的[这篇文章](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial)，了解有关控制序列化的更多详细信息。

使用属性，您的源代码将如下所示：

```
[BsonElement("Number")]
private int _number

[BsonIgnore]
public int Number  
{
  get { return _number; }
  set {
    _number = value

    //do not call this function during deserialization
    CallAnotherFunction()
  }
} 
```

或者，您可以设置自定义类映射。

```
BsonClassMap.RegisterClassMap<MyClass>(cm => {
   cm.AutoMap();
   cm.UnmapProperty(c => c.Number);
   cm.MapField("_number").SetElementName("Number");
}); 
```

# iphone - 哪个是 websocket 协议的更好方法？本机 ios 或混合或网络应用程序？

> ID：10579989
> 
> 赞同：0
> 
> 时间：2012-05-14T08:41:30.173
> 
> 标签：iphone, ios, websocket

我想知道将数据从服务器传输到应用程序的最佳方式是什么。

我对 javascript 很满意，因此 web 应用程序将是发布 websocket 通信的好应用程序。

将服务器数据发送到像 safari 这样的浏览器很容易（网络应用程序）。

但我不确定我是否可以将接收到的数据从浏览器发送到我的应用程序。

有人试过浏览器到应用程序传输吗？

如果这是不可能的，我需要在 ios 本机应用程序中发布 websocket 连接或

混合应用程序？我对ios的了解几乎为零。你们能推荐好的教程吗

对于 ios 和 ios websocket？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:26:12.477

使用 Javascript 中的 WebSockets 很容易将数据从浏览器发送到服务器：

```
ws.send(data). 
```

WebSocket 客户端也可以在 iOS 中使用。看到[这个](https://stackoverflow.com/questions/6347499/websocket-library-for-android-ios-and-flash)答案。

# javascript - 如何使用 NodeJS 获取“HTTP_REFERER”？

> ID：10579994
> 
> 赞同：67
> 
> 时间：2012-05-14T08:41:38.117
> 
> 标签：javascript, node.js, http-referer

一种获取方式`HTTP_REFERER`，我们可以`document.referrer`在浏览器端使用javascript。但是我们如何在 NodeJS 中得到它呢？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-06-18T03:10:39.260

你可以通过...

```
req.headers.referer 
```

在...

```
var http = require('http');
server = http.createServer(function(req, res){
...
} 
```

# blackberry - 黑莓中带有自定义 ObjectChoiceField 的自定义列表字段？

> ID：10579998
> 
> 赞同：0
> 
> 时间：2012-05-14T08:41:45.163
> 
> 标签：blackberry, custom-lists

我是一名同时在 android 上工作的新 BB 开发人员，我正在准备一个项目，其中包含两种语言的列表和对象选择字段。

在黑莓中，我有一个包含 10 个元素的列表，在每个元素行上，我需要在单击该按钮时显示一个箭头按钮，一个 ObjectChoiceField 将弹出。

在这里，很明显 list 和 obejctchoice 字段都是自定义的。

我很困惑，请让我知道，这是如何实现的。

提前谢谢..！：|![在此处输入图像描述](../Images/64446cc26f21ee006ed8fa1c55c041f3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:39:26.543

// 自定义 ListField [如何在 BlackBerry 中自定义 ListField？](https://stackoverflow.com/questions/1872160/how-to-customize-a-list-field-in-blackberry)

要获得点击的项目，只需将以下函数添加到代码中

```
protected boolean navigationClick(int status, int time) {
        Field field = this.getLeafFieldWithFocus();

        if(field instanceof ListField){
            System.out.println("navigationClick Yes Yes you clicked list item ");
            ListField listField = (ListField)field;
            // this will give you clicked index.
                    int index = listField.getSelectedIndex();
            // pop up your Object choice field here...
        }
        return true;
} 
```